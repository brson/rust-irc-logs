[00:00:21] *** Quits: fyolnish (fyolnish@moz-F8CCFEA4.uqwimax.jp) (Client exited)
[00:01:00] *** Joins: rgawdzik (chatzilla@moz-3153982F.net.uwaterloo.ca)
[00:01:23] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[00:01:25] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[00:01:32] *** Joins: fournm (Aria@moz-ABB60BA0.austin.res.rr.com)
[00:01:48] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[00:03:07] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[00:03:12] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[00:04:50] *** Joins: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net)
[00:04:52] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[00:05:00] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[00:05:31] *** Quits: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Connection reset by peer)
[00:05:35] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[00:05:47] * ChrisMorgan knew about two trailing spaces being a line break in Markdown. reStructuredText doesn't have a direct equivalent; the closest is prefixing each line of a paragraph with "| " which causes the line breaks to be literal
[00:06:21] *** Quits: svercer (svercer@moz-C5015154.secundaverba.net) (Quit: leaving)
[00:06:33] *** Quits: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[00:06:42] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[00:06:48] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[00:07:19] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[00:07:23] *** Joins: OllyG (Mibbit@moz-2DAC9399.cable.virginm.net)
[00:08:37] <luz> asciidoc uses one or more space followed by a + at the end of lines to force line breaks
[00:09:06] *** Quits: rgawdzik (chatzilla@moz-3153982F.net.uwaterloo.ca) (Ping timeout)
[00:09:14] *** Quits: moostik (Icedove@moz-53E05E9C.w92-151.abo.wanadoo.fr) (Quit: moostik)
[00:09:44] *** Joins: wcrichto (will@3640FCAC.3CF62DF9.689607DE.IP)
[00:09:49] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[00:09:51] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:10:13] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[00:10:20] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:10:20] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Ping timeout)
[00:10:48] *** Quits: elan-workweek (elancaster@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[00:11:33] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[00:11:34] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[00:12:31] *** Joins: elan-workweek (elancaster@moz-7B0110AD.mv.mozilla.com)
[00:13:08] *** Quits: elan-workweek (elancaster@moz-7B0110AD.mv.mozilla.com) (Input/output error)
[00:13:09] *** Quits: OllyG (Mibbit@moz-2DAC9399.cable.virginm.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:13:22] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[00:13:23] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[00:14:13] *** Quits: tbogdala (AnimalMach@moz-C5E39CCE.wi.res.rr.com) (Client exited)
[00:14:42] *** Joins: jzcz (nick@moz-6E6530A2.rb.lax.centurytel.net)
[00:15:05] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[00:15:08] <cmr> Our first mentored bug: https://github.com/mozilla/rust/issues/4658
[00:15:09] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[00:15:17] *** Quits: KindOne (KindOne@moz-81E2B941.dynamic.ip.windstream.net) (Ping timeout)
[00:15:17] *** Quits: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Ping timeout)
[00:16:19] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[00:16:31] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[00:16:53] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[00:16:54] <bascule> significant.whitespace-- :(
[00:16:57] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[00:17:00] <dbaupp> cmr: lies!
[00:17:08] <dbaupp> cmr: I've mentored a bug
[00:17:09] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[00:17:26] <cmr> nuuu
[00:17:35] <dbaupp> cmr: https://github.com/mozilla/rust/issues/10851
[00:17:36] <cmr> they didn't show up as E-mentored, so clearly they never existed!
[00:17:44] <dbaupp> it's under closed ;P
[00:17:46] *** Joins: jemhafoo (Mibbit@4EEAB704.5843BA5A.D4E4C7A5.IP)
[00:17:46] <cmr> No! My search was clearly exhaustive!
[00:17:48] <cmr> :P
[00:18:09] <cmr> dbaupp: do you claim the title of first, then?
[00:18:35] <ChrisMorgan> bascule: significant whitespace is normally not a genuine problem, but significant *trailing* whitespace is.
[00:18:38] <dbaupp> might as well add it to my CV.
[00:18:41] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[00:18:49] <jemhafoo> possibly dumb question... I'm getting "error: unresolved import: could not find `buffered` in `std::io`." when I try to use std::io::buffered::BufferedReader
[00:18:57] <muricula> How do I call the sqrt function? What's wrond with this line:  let mut primes: ~[bool] = ~[true, std::sqrt(number)];
[00:19:00] <dbaupp> jemhafoo: what version of rust?
[00:19:09] <dbaupp> muricula: std::num::sqrt(number)
[00:19:12] <cmr> muricula: sqrt doesn't return a bool.
[00:19:14] <bascule> ChrisMorgan: it's a significant problem in many ways, significant trailing whitespace is especially egregious
[00:19:15] <dbaupp> muricula: (or number.sqrt())
[00:19:21] <dbaupp> oh, and that too.
[00:19:26] <jemhafoo> that may be why it's a dumb question.. I'm using 0.8 because I had significant problems getting 0.9 to bootstrap properly when I compiled it
[00:19:31] * ChrisMorgan hates the way that the labels are not links in GitHub issues
[00:19:46] <bascule> ChrisMorgan: pasting Python code into a REPL has always been pain
[00:19:51] * ChrisMorgan is overall just not a fan of the GitHub issues implementation
[00:19:57] <bascule> then there's hard-to-see semantic errors
[00:20:30] <dbaupp> jemhafoo: ah, I don't think std::io::buffered existed in 0.8 :)
[00:20:34] <muricula> cmr: right. How do I declare an array of true bools of size `number`?
[00:20:45] <jemhafoo> that might do it.
[00:20:56] <ChrisMorgan> Yes, buffered came after 0.8.
[00:20:58] <dbaupp> muricula: std::vec::from_elem(number, true)
[00:21:03] <cmr> muricula: std::vec::from_elem(number.sqrt(), true)
[00:21:10] <cmr> :(
[00:21:11] <jemhafoo> darn.
[00:21:12] <muricula> thank you
[00:21:13] <dbaupp> jemhafoo: oh, it's in std::rt::io, http://static.rust-lang.org/doc/0.8/std/rt/io/buffered/index.html
[00:21:28] *** Joins: KindOne (KindOne@moz-E60622A1.dynamic.ip.windstream.net)
[00:21:38] <dbaupp> muricula: (note that sqrt() returns a float, but from_elem takes a uint; you'll need a cast.)
[00:21:47] <ChrisMorgan> Hang on, it was that far back? How time flies.
[00:22:01] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[00:22:07] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[00:22:51] <jemhafoo> gotcha.
[00:23:18] * ChrisMorgan even got to be an influencing factor in its development with rust-http's buffered types, even if rust-http still doesn't use std::io::buffered—and may well not at any time, needing more control of the internals for the sake of efficiency than it exposes
[00:23:52] <cmr> ChrisMorgan: can you stop writing books in /me? :P
[00:24:35] <jemhafoo> i'll skip this chapter in the tutorial, then. lame.
[00:24:55] <cmr> jemhafoo: what platform are you on that you're having trouble with 0.9?
[00:25:03] <jemhafoo> Mac OS X
[00:25:07] <cmr> which version
[00:25:10] <jemhafoo> getting that "ar s" error during compile
[00:25:15] <cmr> ah that one.
[00:25:24] <cmr> jack: ^ what was the solution to that? or did you just work around it.
[00:25:27] *** Joins: RagingDave (RagingDave@moz-8964F469.pools.arcor-ip.net)
[00:25:33] <jemhafoo> 10.7 here, 10.9 at home... problems on both.
[00:25:50] * ChrisMorgan isn't in the habit of writing books, though perhaps he should change that
[00:25:51] <jemhafoo> there was a note in the Github issue to uninstall llvm
[00:26:00] <jack> cmr: i patched rust libs to not have #[crate_type="rlib"] and recompiled rust.
[00:26:09] <jemhafoo> but i'm not gonna do that... got other languages that depend on it and I don't wanna bone my system, especially since this is my work machine :)
[00:26:11] <jack> upgrading Xcode will probably fix it.
[00:26:29] <jack> (assuming we're talking about 10.7 not 10.9)
[00:26:54] <jack> on 10.9 the problem magically appeared suddenly for me, and then disappeared after a make clean
[00:26:55] <jemhafoo> well, I had the problem at home, and I just upgraded to 10.9 a few weeks ago
[00:27:22] <jack> but i am using servo rust, which disabled rlibs, so i dunno about master.
[00:27:30] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[00:27:43] <jack> it's easy enough to disable rlibs. i'll link you the patch
[00:27:52] <jemhafoo> that would rock.
[00:27:53] <jemhafoo> thanks
[00:27:57] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[00:28:06] *** Quits: RagingDave (RagingDave@moz-8964F469.pools.arcor-ip.net) (Quit: Ex-Chat)
[00:28:17] <jack> jemhafoo: https://github.com/mozilla-servo/rust/commit/d3b3c66a3a54a0455b068ede8fe2f48ed99ca908.diff
[00:29:17] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[00:29:17] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[00:29:51] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[00:30:04] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[00:30:05] *** Joins: prooftechnique (prooftechn@moz-1C9C6B71.hsd1.vt.comcast.net)
[00:30:17] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[00:30:17] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[00:30:25] *** Quits: hays (quassel@moz-E481F431.washdc.east.verizon.net) (Ping timeout)
[00:31:02] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[00:31:04] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[00:32:16] *** Quits: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net) (Client exited)
[00:32:21] *** Joins: hays (quassel@moz-F7D7C936.washdc.east.verizon.net)
[00:32:23] *** Joins: mib_t9t5ao (Mibbit@moz-4014DDC7.ga.at.cox.net)
[00:32:40] <mib_t9t5ao> Does Rust prevent deadlocks?
[00:32:50] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[00:32:51] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[00:33:15] <dbaupp> mib_t9t5ao: no
[00:33:32] *** Quits: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[00:33:39] *** Joins: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net)
[00:34:09] *** Quits: okard (okard@moz-6D90BE39.dip0.t-ipconnect.de) (Quit: )
[00:34:36] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[00:34:38] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[00:35:21] <aatch> mib_t9t5ao, I'm not sure if rust could prevent deadlocks without preventing locking altogether, including anything that could be used to implement a lock.
[00:36:22] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[00:36:26] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[00:36:35] *** Joins: alisdair (textual@BB0336C3.D2943E17.C579BC3E.IP)
[00:38:05] <muricula> I have an error with the following lines of code. x seems to be () (which I believe is like NULL). Why?
[00:38:08] <muricula>         for x in range(0, primes.len()) 
[00:38:11] <muricula>         {   
[00:38:11] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[00:38:12] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[00:38:13] <muricula>                 let antix: uint = x - primes.len();
[00:39:01] *** Joins: \n (uid15310@moz-31ABA2C0.irccloud.com)
[00:39:03] <ChrisMorgan> muricula: () is not NULL; () is the unit type: a type where the only value is ().
[00:39:52] <muricula> huh. So it's not NULL and not an empty tuple.
[00:39:57] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[00:39:59] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[00:40:10] <\n> can someone clarify: http://static.rust-lang.org/doc/master/std/io/net/tcp/struct.TcpListener.html if TcpListener implements the Listener trait, why can I not call listen on instance of TcpListener? Error: type `std::io::net::tcp::TcpListener` does not implement any method in scope named `listen`
[00:40:18] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[00:40:27] *** Joins: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net)
[00:40:28] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[00:40:49] <dbaupp> \n: you may need to import the trait
[00:40:56] <ChrisMorgan> muricula: it's fair to consider it to be an empty tuple
[00:41:08] <\n> dbaupp: oh
[00:41:15] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[00:41:33] *** Quits: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo_)
[00:41:47] <muricula> so why is x of type ()?
[00:42:00] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[00:42:04] <\n> dbaupp: ty
[00:42:38] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[00:43:00] *** Joins: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP)
[00:43:31] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[00:43:46] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[00:43:49] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[00:44:04] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[00:45:04] *** Joins: moostik (Icedove@moz-53E05E9C.w92-151.abo.wanadoo.fr)
[00:45:32] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[00:45:32] *** Quits: hays (quassel@moz-F7D7C936.washdc.east.verizon.net) (Ping timeout)
[00:45:35] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[00:45:57] <ChrisMorgan> muricula: it isn't in that case.
[00:46:18] *** Joins: alinab (alina@moz-94EAE39D.alinab.org)
[00:46:40] <muricula> Perhaps I'm misreading my error then. (Also, I'm at 0% battery, so I may disappear soon)
[00:47:09] *** Quits: wcrichto (will@3640FCAC.3CF62DF9.689607DE.IP) (Ping timeout)
[00:47:13] *** Joins: hays (quassel@moz-3499D4EF.washdc.east.verizon.net)
[00:47:19] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[00:47:22] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[00:47:41] <dbaupp> muricula: what is the error?
[00:47:45] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[00:47:47] <muricula> http://pastebin.osuosl.org/5051/
[00:48:39] *** Quits: yutongzhao (yutongzhao@moz-325F8282.hsd1.ca.comcast.net) (Quit: yutongzhao)
[00:49:27] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[00:49:35] <dbaupp> muricula: ah the function doesn't return int
[00:49:50] <dbaupp> but its signature says that it should
[00:49:52] <muricula> Oh, should it be uint?
[00:49:55] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[00:50:23] <dbaupp> no, the function has no return value
[00:50:24] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[00:50:26] <jemhafoo> doesn't look like it's returning anything
[00:50:30] <dbaupp> at the moment, you're not returning anything
[00:50:31] <jemhafoo> int != ()
[00:50:53] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[00:51:25] <muricula> well it does return something sometimes and with the input I'm giving it, it always will.
[00:51:48] <muricula> so this is a case of confusing error messages. Thanks.
[00:51:50] <dbaupp> the code there has no `return` statements in it
[00:51:59] *** Quits: hays (quassel@moz-3499D4EF.washdc.east.verizon.net) (Ping timeout)
[00:52:00] <dbaupp> (which is what Rust is complaining about)
[00:52:15] <dbaupp> and, yeah, the code printed with the error message is confusing
[00:52:21] <muricula> It does later on, but wrapped in a loop. It doesn't have one outside the loop.
[00:53:02] *** Joins: hays (quassel@moz-93ED4A21.washdc.east.verizon.net)
[00:53:04] <dbaupp> well, not in the code you've posted there :)
[00:53:50] *** Joins: wcrichto (will@3640FCAC.3CF62DF9.689607DE.IP)
[00:54:06] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[00:55:29] *** Quits: mib_t9t5ao (Mibbit@moz-4014DDC7.ga.at.cox.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:55:55] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[00:56:30] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[00:56:44] *** Joins: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net)
[00:57:24] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[00:57:27] *** Quits: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP) (Connection reset by peer)
[00:57:36] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[00:57:43] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[00:59:27] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[00:59:28] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[00:59:59] <ercxx> This causes a segfault: http://kib2.free.fr/pastebin/view_paste.php?id=171 on 64 bit arch using the daily arch package.
[01:00:43] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[01:01:23] <cmr> "Segfault with ZEN style", heh
[01:01:27] <ercxx> No segfault if I remov one of the loops, or 'break'
[01:01:51] <ercxx> :)
[01:02:45] <ChrisMorgan> Erk. Same result on Ubuntu: opening http://127.0.0.1:9999/ (lazy man's way) makes it segfaults.
[01:03:09] <dbaupp> backtraces/bug filings? :)
[01:03:31] <cmr> backtrace: https://gist.github.com/cmr/7825686764d7b4c86fab
[01:03:49] <ChrisMorgan> Segfaults with or without -O
[01:04:15] <cmr> looks like read is getting a null buffer
[01:04:27] *** Quits: espindola (espindola@8EC99D26.4B7A7726.A2E931B1.IP) (Ping timeout)
[01:04:31] * cmr builds a rust with debuginfo
[01:04:38] *** Joins: espindola (espindola@8EC99D26.4B7A7726.A2E931B1.IP)
[01:05:32] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[01:05:35] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[01:06:02] *** Joins: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net)
[01:06:08] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Client exited)
[01:07:09] <Cevn> quick question - where's the string join function? i.e. str::connect(&[~str], " ") 
[01:07:19] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[01:07:19] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[01:07:42] <Cevn> I looked in str and vec but couldn't find anything relevant D: 
[01:07:44] *** Quits: hays (quassel@moz-93ED4A21.washdc.east.verizon.net) (Ping timeout)
[01:07:46] <cmr> Cevn: vec.connect(" ")
[01:07:48] <cmr> http://static.rust-lang.org/doc/master/std/str/trait.StrVector.html#tymethod.connect
[01:08:09] *** Quits: espindola (espindola@8EC99D26.4B7A7726.A2E931B1.IP) (Ping timeout)
[01:08:39] <Cevn> cmr: apparently I did not look hard enough hehe 
[01:09:04] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[01:09:06] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[01:09:25] *** Joins: hays (quassel@moz-419EDB32.washdc.east.verizon.net)
[01:09:27] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[01:09:35] <ChrisMorgan> Cevn: the search functionality in those docs is good
[01:10:52] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[01:10:54] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[01:11:01] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[01:11:15] <Cevn> ChrisMorgan: I literally did not even see that search button 
[01:11:31] <cmr> seriously how can we possibly make it more prominent
[01:11:34] <cmr> we could make it blink
[01:11:35] * ChrisMorgan thinks it worked better before it was made full width
[01:11:40] <Cevn> Maybe it's time to go back to 'noticing details' class 
[01:11:53] <ChrisMorgan> Cevn: no, the fact that you didn't see it is our problem, not yours.
[01:12:02] <cmr> (it is our problem)
[01:12:12] <Cevn> hmm 
[01:12:16] <cmr> it didn't even used to have a button :(
[01:12:17] <ChrisMorgan> Anyway, enjoy using it now you know about it ☺
[01:12:22] <Cevn> Lol
[01:12:33] <Cevn> well, everything is white 
[01:12:35] <cmr> We could make the background of the textbook some more high-contrast color.
[01:12:35] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[01:12:38] <cmr> *textbox
[01:12:41] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[01:12:53] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[01:13:04] <jemhafoo> i'd put it in that left sidebar
[01:13:08] <jemhafoo> personally
[01:14:18] <Cevn> jemhafoo: then i think it would be too small... i think changing the color slightly to make it more prominent would go a long way 
[01:14:22] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[01:14:25] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[01:14:26] <Cevn> Or blink tags hehe
[01:14:33] <Cevn> Alright thanks for the help i'm off 
[01:14:58] *** Quits: gwty (gwtypc@3D97BDC1.C4000CA7.137C914F.IP) (Ping timeout)
[01:15:02] *** Quits: gwty_ (gwtypc@3D97BDC1.C4000CA7.137C914F.IP) (Ping timeout)
[01:15:14] <jemhafoo> I dunno. I mean, you're already looking on the left to find the other sub-menu items
[01:15:53] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[01:16:03] *** Joins: Florob (Florob@moz-39532932.de)
[01:16:05] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[01:16:14] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[01:17:13] <jemhafoo> something like: http://cl.ly/image/0d3K2u0D0q2P
[01:17:33] <jemhafoo> jack: applied the patch and it still won't compile. grr :/
[01:17:55] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[01:18:01] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[01:18:19] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[01:18:19] <FlyingFoX> I am currently doing the tutorial and have a question to chapter 11: '
[01:18:19] <FlyingFoX> let managed_box  : @Point = @Point { x: 5.0, y: 1.0 };' how do I do this without @ as this is deprecated? 'let managed_box: Gc<Point>  = Gc<Point> { x: 1.0, y:2.0 };' gives me compiler errors.
[01:18:23] <jack> might be two different problems with the same `ar` failure result
[01:18:59] <ChrisMorgan> FlyingFoX: Gc::new(Point { x: 1.0, y: 2.0 })
[01:19:03] <cmr> FlyingFoX: let managed_box: Gc<Point> = Gc::new(Point { ... });
[01:19:44] *** Quits: p0nce (ponce@moz-D65F4148.fbx.proxad.net) (Quit: )
[01:19:50] *** Quits: msch (msch@moz-DA0E34D4.clients.your-server.de) (Ping timeout)
[01:19:57] <FlyingFoX> ty, that works :)
[01:20:00] <cmr> jemhafoo: maybe we can just have it in both places :P
[01:20:19] *** Quits: igork (Adium@moz-578E0B8C.broadband.corbina.ru) (Quit: Leaving.)
[01:20:25] <jemhafoo> hmm. ok, i'll mess with it tomorrow.
[01:20:28] <jemhafoo> thanks
[01:20:32] <jemhafoo> cmr: sure :)
[01:20:34] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[01:20:34] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[01:20:46] *** Quits: jemhafoo (Mibbit@4EEAB704.5843BA5A.D4E4C7A5.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:21:16] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[01:24:57] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[01:26:32] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[01:26:34] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[01:28:15] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[01:28:22] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[01:29:51] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[01:30:03] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[01:30:08] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[01:30:14] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[01:31:07] *** Joins: espindola (espindola@8EC99D26.4B7A7726.A2E931B1.IP)
[01:31:16] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[01:31:49] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[01:31:51] <cmr> http://i.imgur.com/lYBJmRL.png
[01:31:53] <cmr> Cevn: ^
[01:31:55] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[01:31:56] <cmr> is that better?
[01:31:56] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[01:32:01] <cmr> I picked a nice rusty orangish :)
[01:32:59] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[01:33:33] *** Parts: \n (uid15310@moz-31ABA2C0.irccloud.com) ()
[01:33:39] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[01:33:42] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[01:34:12] <jmgrosen> FlyingFoX: if you're near master, `box(GC) Point { x: 1.0, y: 2.0}` should also work (and will have theoretically better performance)
[01:34:46] <dbaupp> jmgrosen: very very near master :P
[01:35:23] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[01:35:29] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[01:35:45] *** Quits: jzcz (nick@moz-6E6530A2.rb.lax.centurytel.net) (Ping timeout)
[01:35:45] <dbaupp> oh, wow, that was actually 5 days ago
[01:35:54] * dbaupp is not a very good calendar
[01:36:08] <acrichto> dbaupp: what day is today
[01:36:31] <cmr> monday!
[01:36:32] <_achin> sixerday
[01:36:37] <ChrisMorgan> Tuesday!
[01:36:39] <dbaupp> acrichto: my computer says tuesday 14th of january
[01:36:39] <cmr> someday
[01:36:44] <acrichto> lol date lines
[01:36:46] <dbaupp> but you never know
[01:36:54] <_achin> cleraly none of us know the date either!
[01:37:11] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[01:37:16] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[01:37:27] *** Joins: jzcz (nick@moz-6E6530A2.rb.lax.centurytel.net)
[01:37:40] * ChrisMorgan was updating the prelude Vim syntax and saw GC in there and had to check what it was, and what was up with Gc and GC
[01:37:57] *** Quits: cdidd (cdidd@moz-FCE79F7A.broadband.corbina.ru) (Ping timeout)
[01:38:01] <acrichto> Gc is a type while GC is a value
[01:38:05] <acrichto> I think GC is transitionary
[01:38:16] <sfackler> I would hope so, that looks super janky :P
[01:38:18] <dbaupp> In theory it'll at least be renamed to Gc
[01:38:25] * dbaupp hopes
[01:38:58] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[01:38:59] <cmr> Actually I noticed a problem with that in the shower hte other day
[01:39:03] <cmr> completely forgot to bring it up
[01:39:04] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[01:39:17] <cmr> Using a static as a value like that will preclude using tuple-structs!
[01:39:27] <cmr> Since tuple-struct constructors are values, functions.
[01:40:35] *** Quits: mccr8 (mccr8@moz-BBE3ABD.mv.mozilla.com) (Quit: )
[01:41:01] <_achin> someone should invent a computer you can put in the shower.  so you can write down your ideas as they come to you
[01:41:06] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[01:41:14] <ChrisMorgan> What do people think of the idea of rust-http having header access like `request.headers[CONTENT_TYPE]`, which would produce a ContentType?
[01:41:38] <dbaupp> cmr: tuple structs are too ugly without dereferencing anyway
[01:41:38] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[01:41:41] <dbaupp> (IMO)
[01:41:43] <_achin> ChrisMorgan: stylisticly? or functionaly?
[01:41:45] <SiegeLord> Why does rustpkg use the absolute path of the source file when creating highlighted source for it?
[01:41:49] *** Joins: brendan (brendaneic@EF408078.10A53EE3.77834EAA.IP)
[01:41:50] <SiegeLord> *rustdoc
[01:42:02] <ChrisMorgan> _achin: probably more stylistically.
[01:42:27] <dbaupp> SiegeLord: because we love long URLs with irrelevant info in them
[01:42:40] <_achin> is CONTENT_TYPE some type of special enum?
[01:42:42] <SiegeLord> This is a relatively recent change
[01:42:43] <cmr> SiegeLord: because that's the span rustc gives us :(
[01:42:48] <cmr> yeah I don't remember it doing that before.
[01:42:49] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[01:42:50] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[01:43:06] <ChrisMorgan> _achin: the implementation there would have it as `struct CONTENT_TYPE;`
[01:43:20] <_achin> ChrisMorgan: in general i'd prefer request.headers.get("Content-Type") -> Option<~str>
[01:43:31] <ChrisMorgan> _achin: that ain't happening.
[01:43:32] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[01:43:43] *** Quits: alisdair (textual@BB0336C3.D2943E17.C579BC3E.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:43:45] *** Quits: icebattle (icebattle@8A14A542.EBE2EE2B.C7CEC4ED.IP) (Quit: Leaving)
[01:43:50] <_achin> in general?  or just for content-type?
[01:44:13] <ChrisMorgan> _achin: rust-http is using a strong typing discipline for headers.
[01:44:31] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[01:44:32] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[01:44:37] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[01:44:48] <_achin> maybe i don't understand what a ContentType would be
[01:44:58] <SiegeLord> cmr: Is there an issue for this?
[01:45:44] <cmr> SiegeLord: not that I've seen. mind fililng on?
[01:45:50] *** Quits: brendan (brendaneic@EF408078.10A53EE3.77834EAA.IP) (Ping timeout)
[01:46:26] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[01:46:29] <SiegeLord> Although I note that the absolute paths are encoded in the executable as well...
[01:46:32] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[01:46:37] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[01:47:09] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[01:47:32] <dbaupp> I wonder if we could save megabytes of object files by having shorter paths...
[01:48:16] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[01:49:00] <SiegeLord> I just find it disconcerning to be revealing my local user name to the wide world :P
[01:50:02] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[01:52:11] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[01:52:34] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[01:53:22] <steveklabnik> pretty sure i'm getting trolled http://www.reddit.com/r/programming/comments/1v495y/a_30_minute_introduction_to_rust/ceox55z
[01:53:44] <cmr> clearly you are.
[01:53:53] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[01:53:58] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[01:53:58] <cmr> since everything he lists is wrong.
[01:54:05] *** Quits: jzcz (nick@moz-6E6530A2.rb.lax.centurytel.net) (Quit: Konversation terminated!)
[01:54:32] * _achin lends some upgoats appropriately
[01:55:14] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[01:55:43] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[01:58:27] *** Joins: elux (peter@moz-6B45ADE5.dsl.bell.ca)
[01:58:28] *** Quits: elux (peter@moz-6B45ADE5.dsl.bell.ca) (Quit: elux)
[01:59:31] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[01:59:53] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[02:01:15] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[02:01:18] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[02:02:03] <aatch> I'm not sure if that guy actually knows how programming works...
[02:02:24] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: computer sleeping)
[02:02:38] <aatch> I mean, everbody knows that writing raw machine language is terrible idea, but everything runs on machine language!
[02:02:52] <aatch> So clearly computers are a terrible idea
[02:03:02] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[02:03:04] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[02:03:42] <pcwalton> arrrggghhh, C++'s implicit type coercions wasted a bunch of my time
[02:03:54] <pcwalton> you can implicitly coerce a bool to an enum
[02:03:56] <pcwalton> why
[02:04:00] <aatch> pcwalton, I've been hit by that.
[02:04:04] <pcwalton> combined with overloading
[02:04:19] * pcwalton is so spoiled by rust
[02:04:45] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[02:04:45] *** Quits: wcrichto (will@3640FCAC.3CF62DF9.689607DE.IP) (Ping timeout)
[02:04:51] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[02:04:52] <_achin> question for you all:  do you think rust would have come to fruition without the aid of LLVM?
[02:04:53] <aatch> pcwalton, my thing is that every time I write C++, I want Rust's ownership model.
[02:05:05] <aatch> _achin, i dunno, probably?
[02:05:16] <pcwalton> probably would have used GCC
[02:05:20] <aatch> I mean, it'd probably be using the GCC backend instead
[02:05:43] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[02:06:09] <_achin> is that the only other option (other than writing your own optimizer and code generator)?
[02:06:19] <aatch> Worst-case scenario would be outputting C or something and using the system C compiler.
[02:06:30] <aatch> Which would be enough to get a language off the ground.
[02:06:35] <_achin> it seems to me that LLVM is a great enabling technology, and that rust is a prime example of the awesome stuff that LLVM enables
[02:06:35] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[02:06:38] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[02:07:08] <nightpool> Is it possiblle to do a match inside of a destructured match expression? I'm getting "the type of this value must be known in this context" on the whole match-arm type
[02:07:11] <aatch> _achin, it doesn't enable per-se, it makes things easier.
[02:07:41] <dbaupp> nightpool: code?
[02:07:47] <_achin> i suppose i'd call that "enabling", but i do see that maybe i'm giving LLVM too much credit
[02:08:08] <nightpool> Let me take a minute and see if I can reproduce it in a simple way, before dumping a huge code-pile
[02:08:22] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[02:08:24] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[02:08:58] <aatch> _achin, don't get me wrong, LLVM allows you to focus on non-compiling stuff more than other ways would.
[02:09:35] <aatch> Which is a huge boon and allows breakthroughs to happen faster, but it isn't, itself, responsible for those breakthroughs.
[02:09:43] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:10:04] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[02:10:10] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[02:10:19] <_achin> yeah
[02:10:24] <aatch> Think of it like the internet, it makes research easier, but it's not like it does that research for you.
[02:11:27] <_achin> i admit i don't know much about compiler design (or what else exists in the LLVM space)
[02:11:52] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[02:11:59] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[02:12:03] <_achin> but if i consider the internet, i can imaging a whole class of problems that i wouldn't dream of tackling without the aid of the internet
[02:12:55] <_achin> maybe things aren't quite so daunting for people who eat compilers for brunch
[02:13:02] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[02:13:41] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[02:13:47] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[02:14:59] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[02:15:29] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[02:15:31] <whitequark> _achin: before the internet, there were books...
[02:15:32] <aatch> The basics of compilers a well-understood and well-documented. While not necessarily *easy*, it's not like you have to re-discover the idea of Basic Blocks or intermediate representation.
[02:15:34] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[02:15:55] <_achin> steveklabnik: one things that occurs to me about the first dangling example -- there are some very similar examples that not only are not caught at compile time, but you may very rarely notice them at run-time!  (because while the memory has been freed, it may still contain the data you were expecting)
[02:16:10] <nightpool> Okay. I have no idea. Let me throw my code up on gh
[02:16:27] <dbaupp> whitequark: books don't have search :P
[02:16:53] <aatch> dbaupp, the index!
[02:16:55] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[02:17:11] <_achin> i think this analogy is starting to break down :P
[02:17:15] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[02:17:16] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:17:19] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[02:18:57] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[02:19:32] <nightpool> dbaupp: here https://gist.github.com/nightpool/b10e0f9062f486153b6f
[02:19:37] <nightpool> Thank you!
[02:19:55] <chromatic> You don't know to look in the index for "basic block" until you know that's its name.
[02:20:17] <cmr> chromatic: same for searching, too.
[02:20:19] <aatch> chromatic, but you don't know to put that into a search engine either.
[02:20:48] <chromatic> Yeah, but you can at least browse the book once you hold it in your hands.
[02:20:54] <_achin> i think a more apt way to apply the internet analogy here is the types of technologies it has enabled (like real-time communication)
[02:21:43] <_achin> while [long-distance] real-time communication existed long before the internet, the internet opened up entire new classes of RTC
[02:22:11] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[02:22:34] <dbaupp> nightpool: um, sorry... what's the error?
[02:22:53] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[02:23:17] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[02:23:23] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[02:24:39] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[02:24:39] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[02:24:40] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[02:24:50] <nightpool> matchmatch.rs:29:29: 29:61 error: the type of this value must be known in this context
[02:24:54] <nightpool> matchmatch.rs:29                             sdl::event::KeyEvent(k, _, _, _)
[02:25:13] *** Parts: nical (nico@moz-4754F405.fbx.proxad.net) ()
[02:26:01] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[02:26:39] <nightpool> here, I replaced all the sdl code with stubs. Compiles without dependencies now. 
[02:26:44] <nightpool> Well, doesn't compile
[02:26:46] <nightpool> as the case may be
[02:27:27] <nightpool> If you refresh you should see the new code
[02:27:36] *** Quits: pcwalton (pcwalton@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[02:28:04] <dbaupp> nightpool: ah
[02:28:13] <dbaupp> looks like you're just stressing the inference engine too much
[02:28:17] *** jorendorff_away is now known as jorendorff
[02:28:27] <dbaupp> you just need `let (e_chan, e_port) = Chan::<Event>::new();`
[02:28:29] <nightpool> :( Okay. I should annotate the Channel's then?
[02:28:37] <nightpool> Thought so
[02:28:43] *** Quits: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt) (Connection reset by peer)
[02:28:50] *** Joins: jadbaires (jadrian@B338873B.2E7B5617.6119BA41.IP)
[02:28:58] *** Joins: rgawdzik (chatzilla@moz-31E16B62.net.uwaterloo.ca)
[02:28:59] <nightpool> That's sad. It was working right up until the inner match statement
[02:29:00] <dbaupp> (also, you can write KeyEvent(LeftKey) => ... and KeyEvent(RightKey) => .. rather than having the `if` statements)
[02:29:06] *** Quits: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net) (Quit: carllerche)
[02:29:41] <_achin> that's one of the nice things about rust -- you can write unannoted, easy to ready code.  but if you start having problems, just start annotating things until the problem becomes obivous (if it wasn't already from the compier error)
[02:29:56] <nightpool> I had no idea I could do that. I'm new to match statements, coming from python and c++
[02:30:12] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[02:30:18] *** Joins: cdidd (cdidd@moz-3028DC54.broadband.corbina.ru)
[02:30:29] <dbaupp> nightpool: matches make magic! :P
[02:30:44] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[02:31:52] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[02:31:58] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[02:32:18] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:32:41] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[02:33:11] <steveklabnik> _achin: I'm up for alternate samples!
[02:33:20] *** Joins: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au)
[02:33:38] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[02:33:45] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[02:34:06] *** jorendorff is now known as jorendorff_away
[02:35:26] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[02:35:32] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[02:35:34] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[02:36:25] <nightpool> Thanks dbaupp! It works now!
[02:36:28] <_achin> steveklabnik: i dunno, something like this:  https://gist.github.com/eminence/a21812d9a377460d51f9
[02:36:55] *** jorendorff_away is now known as jorendorff
[02:37:23] <_achin> just some way to drive home the point that incorrect code sometimes behaves "correctly", making is really really difficult to track down bugs like the one in that gist
[02:38:36] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[02:38:58] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[02:38:59] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[02:39:35] *** Joins: wcrichto (will@moz-CE2480BF.res.cmu.edu)
[02:40:15] <dwrensha> _achin, steveklabnik: some of the examples from my November post may be relevant: http://dwrensha.github.io/capnproto-rust/2013/11/17/lifetimes.html
[02:40:36] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[02:40:38] <steveklabnik> Thanks both of you!
[02:40:50] <dwrensha> these were inspired by actual errors beginners were making, as discussed on the Cap'n Proto mailing list
[02:41:08] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[02:41:15] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[02:41:31] <_achin> here's a more realistic example (in c++, based on a real bug that happened to me) -- you have a string class that uses reference counting to allow copies to be made quickly.  because of this, you tend to pass around the string class by value, not really thinknig about lifetimes, since everything is reference counted.  you write code like this: printf("data: %s", myStr.CStr());  CStr() is supposed
[02:41:33] <_achin> to point to the underlying char* representation
[02:41:47] <_achin> most of the time, this code works fine, until one day, printf starts spitting out gibberish
[02:41:51] *** Joins: \n (uid15310@moz-31ABA2C0.irccloud.com)
[02:41:54] <dbaupp> dwrensha: out of interest, do you happen to have libnative graphs for http://dwrensha.github.io/capnproto-rust/2013/11/16/benchmark.html ?
[02:42:09] <dwrensha> dbaupp: upcoming post
[02:42:23] <dbaupp> oh, awesome
[02:42:50] <\n> is it possible to move a variable into a closure?  I'm trying to mutate a variable borrowed in a do spawn block.
[02:42:58] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[02:43:08] <\n> and I don't plan on using it after
[02:43:09] <cmr> \n: into procs, yes. (which do bodies are)
[02:43:31] <\n> cmr: example?
[02:43:37] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[02:44:04] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[02:44:13] <cmr> \n: it should "just work"
[02:44:23] <cmr> you might need to introduce a "let foo = foo;" to get it to capture correctly.
[02:45:11] <\n> let mut stream: TcpStream = match acceptor.accept() { ... }; do spawn { stream.write_str("hello world"); }
[02:45:17] <dbaupp> \n: if you want to capture a variable to mutate it, you currently need `let mut x = x;` inside the closure
[02:45:20] <\n> error: cannot borrow immutable captured outer variable in a heap closure as mutable
[02:45:24] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[02:45:24] <dbaupp> I think that's a bug
[02:45:25] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[02:45:42] <dbaupp> (i.e. there's no particular reason that we need to disallow that)
[02:45:56] <\n> dbaupp: existing bug or should I file one?
[02:47:08] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[02:47:18] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[02:47:48] *** Joins: kanru (kanru@moz-99690620.hinet-ip.hinet.net)
[02:48:42] <\n> dbaupp: https://github.com/mozilla/rust/issues/11528
[02:48:51] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[02:48:58] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[02:49:04] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[02:49:18] *** jorendorff is now known as jorendorff_away
[02:50:33] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[02:50:45] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[02:50:47] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[02:50:52] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[02:51:30] *** Quits: chromatic (chromatic@moz-28CBC7F4.hsd1.or.comcast.net) (Quit: Leaving)
[02:52:02] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[02:52:55] *** Quits: jadbaires (jadrian@B338873B.2E7B5617.6119BA41.IP) (Quit: Konversation terminated!)
[02:53:02] *** Joins: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt)
[02:53:05] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Quit: Ex-Chat)
[02:53:06] *** Quits: Earnestly (earnest@moz-E86D50FA.dyn.plus.net) (Ping timeout)
[02:53:17] <dbaupp> \n: sorry, it is a dupe
[02:53:25] <dbaupp> (was afk for a bit)
[02:53:35] <dbaupp> closed it (thanks for the issue anyway :) )
[02:53:49] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:54:17] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[02:54:23] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[02:55:56] *** Quits: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt) (Quit: Konversation terminated!)
[02:56:02] *** Joins: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt)
[02:56:24] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[02:59:55] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[03:00:22] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[03:03:38] *** Quits: rgawdzik (chatzilla@moz-31E16B62.net.uwaterloo.ca) (Ping timeout)
[03:03:58] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:04:11] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[03:04:19] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:04:56] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[03:05:10] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[03:05:26] *** Quits: cdidd (cdidd@moz-3028DC54.broadband.corbina.ru) (Ping timeout)
[03:05:33] *** Joins: rgawdzik (chatzilla@moz-B36CB13A.net.uwaterloo.ca)
[03:06:37] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[03:06:41] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[03:07:20] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Ping timeout)
[03:07:49] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[03:08:26] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[03:08:31] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[03:09:25] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[03:10:40] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[03:12:04] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Ping timeout)
[03:14:01] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[03:14:02] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[03:14:06] *** Quits: espindola (espindola@8EC99D26.4B7A7726.A2E931B1.IP) (Client exited)
[03:14:27] *** Joins: espindola (espindola@8EC99D26.4B7A7726.A2E931B1.IP)
[03:14:39] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[03:14:43] *** Quits: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net) (Client exited)
[03:15:11] *** Quits: bogomips (dfukdev@EC7448F1.247D1A12.3F821976.IP) (Ping timeout)
[03:15:16] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[03:15:23] *** Quits: ziad (ziad@B20586FB.BDB3D91.6E370BFC.IP) (Quit: ziad)
[03:15:36] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:16:16] *** Quits: espindola (espindola@8EC99D26.4B7A7726.A2E931B1.IP) (Ping timeout)
[03:16:25] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[03:16:36] *** Joins: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net)
[03:16:52] *** Quits: zz_kimundi (kimundi@moz-B9792FFA.dip0.t-ipconnect.de) (Ping timeout)
[03:17:24] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[03:18:24] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[03:18:37] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[03:19:04] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[03:19:08] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[03:19:15] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[03:19:59] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[03:20:11] *** Joins: zz_kimundi (kimundi@moz-5CD33A8E.dip0.t-ipconnect.de)
[03:20:37] *** zz_kimundi is now known as kimundi
[03:20:47] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[03:20:48] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[03:20:49] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[03:21:19] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:21:19] *** ChanServ sets mode: +ao dherman dherman
[03:21:31] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[03:23:07] <dbaupp> anyone got a response to http://www.reddit.com/r/programming/comments/1v495y/a_30_minute_introduction_to_rust/ceozoaj?context=3 ?
[03:23:53] *** Joins: erickt2 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:23:59] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Connection reset by peer)
[03:24:09] *** Joins: cdidd (cdidd@moz-1103A613.broadband.corbina.ru)
[03:24:33] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[03:25:34] <Yurume> dbaupp: it's definitely a problem of having `some_fun` with such signature
[03:25:56] <Yurume> it is a general problem with RAII
[03:26:05] *** Quits: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com) (Ping timeout)
[03:26:05] <phil_> just call his mother a prostitute
[03:26:13] <Yurume> why?
[03:26:18] <phil_> im jk
[03:26:23] <cmr> dbaupp: we don't use that style exactly because of that reason.
[03:26:29] *** Joins: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net)
[03:26:37] <cmr> dbaupp: if you want a section of code guarded by a lock, you give that sectino of code as a closure.
[03:26:51] <cmr> So the answer is: "don't do that. seriously."
[03:27:10] <cmr> However, when are you going to be using a lock that isn't on a data structure?
[03:27:23] <cmr> One can have RAII access to the data structure using a borrow.
[03:27:39] <dbaupp> phil_ is an experienced internet user
[03:27:49] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:27:57] <phil_> yep :D
[03:27:58] <dbaupp> cmr: we are moving to RAII style though
[03:28:04] <cmr> that is, any use of guard would rather borrow it, rather than move it.
[03:28:15] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:28:33] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[03:28:41] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[03:28:47] <Yurume> actually, I don't like a whole concept of RAII-based mutexes.
[03:28:51] <Yurume> it is not a *resource* per se
[03:28:54] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[03:28:56] <cmr> dbaupp: this might actually be a good argument for scope guards in the language
[03:29:01] <cmr> requiring that they *can't* be moved.
[03:29:06] <cmr> my defer macro has that downside.
[03:29:11] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:29:14] *** Quits: erickt2 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Connection reset by peer)
[03:29:34] <Yurume> when you open a file you read from it or write to it. you (generally) won't bother the file to be closed if you don't use it.
[03:29:47] <dbaupp> cmr: defer ! { } ... expanding to `let _foo = ...;` would be ok
[03:29:48] <prooftechnique> Anyone use vim and know how to get it to stop thinking all my rust files are hercules files?
[03:29:58] <Yurume> mutexes are not: you should keep mutexes alive though you never directly use them
[03:30:13] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[03:30:14] <cmr> dbaupp: but it isn't, because then you can move it. this would be exactly the case the dude on reddit raises.
[03:30:19] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[03:30:52] <cmr> Yurume: I think the example is moot. I can't think of any lock that wouldn't be protecting a resource, and one can just get a reference to the resource that borrows the lock, obviating the problem.
[03:31:15] <dbaupp> cmr: no, _foo would be a hidden symbol due to hygiene
[03:31:26] <dbaupp> i.e. can't reference it outside of the macro
[03:31:34] <cmr> dbaupp: ah, right, you'd need properly-expanding macros for that.
[03:31:47] <Yurume> cmr: that is, virtually every mutex should be in the struct which the mutex protects, right?
[03:31:49] <dbaupp> our current macros handle this
[03:32:10] <cmr> dbaupp: by properly-expanding I mean you need to expand to multiple exprs.
[03:32:16] <dbaupp> cmr: why?
[03:32:21] <dbaupp> cmr: let is a single statement
[03:32:25] <cmr> dbaupp: since otherwise the defered thing will be in its own block, and get destructed early.
[03:32:32] <cmr> https://gist.github.com/cmr/8401403
[03:32:40] <Yurume> I almost agree on that (i.e. as a sane coding convention) but the compiler has no way to enforce it then.
[03:32:50] <cmr> Yurume: no, I mean: (formulating gist)
[03:32:55] <Yurume> hm
[03:32:55] <cmr> well, I don't even have to.
[03:32:57] <dbaupp> cmr: `let _foo = { struct Defer; ... }`
[03:32:59] <cmr> RefCell does exactly this today.
[03:33:00] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:33:09] <cmr> dbaupp: hm
[03:33:19] <cmr> dbaupp: good idea, why didn't I think of that!
[03:33:36] * dbaupp is a lightbulb manufacturer
[03:34:19] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[03:34:30] <Yurume> cmr: isn't your point that i) locks should protect resources and ii) locks don't have to move across functions since one can borrow corresponding resources' reference?
[03:34:50] <cmr> Yurume: http://static.rust-lang.org/doc/master/std/cell/struct.RefCell.html
[03:34:53] <cmr> Yurume: see how borrow works?
[03:34:56] <cmr> that.
[03:35:31] <Yurume> RefCell to Ref? yeah.
[03:35:34] * Yurume afk
[03:36:19] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[03:36:26] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[03:37:51] *** Quits: blank_name (blank_name@29F64526.16360A46.537E532E.IP) (Ping timeout)
[03:38:02] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[03:38:05] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[03:38:56] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[03:40:43] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:40:54] *** Joins: rattboi (bkanyid@moz-9A5A7AF8.org)
[03:41:03] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:41:47] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Quit: Leaving)
[03:42:28] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Ping timeout)
[03:43:40] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[03:43:51] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[03:43:57] *** Quits: limeburst (me@247D1419.D73964AC.27A8748.IP) (Ping timeout)
[03:43:58] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[03:45:25] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[03:45:26] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[03:48:06] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[03:48:40] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[03:48:57] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[03:48:58] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[03:49:22] *** Quits: rgawdzik (chatzilla@moz-B36CB13A.net.uwaterloo.ca) (Ping timeout)
[03:49:23] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[03:50:45] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[03:50:46] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[03:51:07] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[03:51:30] *** Joins: rgawdzik (chatzilla@moz-A494786F.net.uwaterloo.ca)
[03:52:20] *** Joins: dmz (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com)
[03:52:31] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[03:52:32] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[03:52:47] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[03:52:47] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[03:54:13] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[03:54:19] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[03:54:48] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[03:57:46] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[03:58:23] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[03:59:36] <dmz> cmr: do you remember the RefCell issue I bugged you about last night?
[03:59:52] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[04:00:17] <cmr> dmz: yes
[04:00:19] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[04:00:27] *** Quits: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net) (Quit: dogurness)
[04:00:28] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[04:00:44] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[04:00:45] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[04:00:46] <dmz> cmr: I've spend my family evening narrowing down the test case... and here it is: https://github.com/mozilla/rust/issues/11532
[04:01:34] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[04:01:38] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[04:01:40] *** Joins: yutongzhao (yutongzhao@moz-325F8282.hsd1.ca.comcast.net)
[04:02:02] *** Quits: rgawdzik (chatzilla@moz-A494786F.net.uwaterloo.ca) (Ping timeout)
[04:02:08] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[04:02:37] <dbaupp> dmz: unfortunately... that's a known bug: Rc can't store @ inside it properly and Gc currently uses @ internally.
[04:02:51] <cmr> dbaupp: what does that have to do with RefCell?
[04:02:52] <dmz> d'oh
[04:02:55] <dmz> that's sad
[04:03:17] <dmz> dbaupp: I wish I knew earlier :(
[04:03:46] <dmz> cmr: it may have nothing to do with RefCell
[04:04:02] <dbaupp> cmr: not sure, but it means that things are put into an invalid state
[04:04:06] <dbaupp> for some reason
[04:04:14] <dmz> dbaupp: should I close the issue then?
[04:04:19] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[04:04:25] <dbaupp> dmz: maybe
[04:04:28] * dbaupp isn't sure
[04:04:42] <cmr> hah
[04:04:42] <wycats_> do tuples implement Ord?
[04:04:44] <dmz> dbaupp: do you know the id of the original issue?
[04:04:48] <cmr> wycats_: some do, yes.
[04:05:04] <dbaupp> dmz: at least you know the problem now (I'd guess that previously you'd had many layers of data structures disguising the Gc pointer)
[04:05:07] <wycats_> (uint, uint, uint) will do
[04:05:08] <dbaupp> dmz: I don't think there is one
[04:05:12] <cmr> yes
[04:05:16] <wycats_> I have a sorting problem that's like CSS precedence
[04:05:19] <dbaupp> wycats_: tuples of length <= 12 with Ord elements
[04:05:33] <dbaupp> are ordered lexically
[04:05:35] <wycats_> sweet
[04:05:40] <cmr> see the impl list at http://static.rust-lang.org/doc/master/std/cmp/trait.Ord.html
[04:05:57] <dbaupp> yay for readable impls :P
[04:06:11] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[04:06:11] <dmz> dbaupp: true, I had many layers there. I suppose I'd need to replace my @ to Rc anyway some day... just hoped to postpone it
[04:06:15] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[04:06:23] <dbaupp> dmz: well, in theory Gc should be ok
[04:06:28] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[04:06:35] <wycats_> optimizing the hell out of my NFA
[04:06:38] <wycats_> by which I mean
[04:06:44] <dbaupp> (if it were implemented properly, without @)
[04:06:45] <cmr> dbaupp: so this is indeed the NonManaged issue, right?
[04:06:46] <wycats_> I am terrible at optimization so I'm doing my best
[04:06:53] *** Joins: blank_name (blank_name@A6C6321C.964BADD.93A5C78C.IP)
[04:06:56] <dbaupp> cmr: guess, so. but mainly the @ issue.
[04:07:01] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[04:07:08] <cmr> ok, sure.
[04:07:15] <dbaupp> (being managed and being @ will be different in the future.)
[04:07:19] <dmz> dbaupp: Gc - yes, but my codebase still uses @ in some places. The issue has Gc in it just because it would be unreasonable to complain about something (@) that is deprecated
[04:07:20] *** Joins: pcwalton (pcwalton@moz-F758DCCF.snfc.ca.megapath.net)
[04:07:20] *** ChanServ sets mode: +ao pcwalton pcwalton
[04:07:29] *** Joins: pnathan (Adium@moz-A8921E45.tukw.qwest.net)
[04:07:36] <dbaupp> dmz: ah, I see
[04:07:37] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[04:07:38] <dbaupp> makes sense
[04:07:40] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[04:08:13] <dbaupp> but, coincidentally, the bug is a problem with the deprecated @, so you complained about it anyway :P
[04:08:24] <dbaupp> wycats_: superspeeeeeeed \o/
[04:08:28] <wycats_> hmmm
[04:08:34] *** Quits: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net) (Quit: Lost terminal)
[04:08:42] <wycats_> actually I need a higher number to be considered less than
[04:09:17] *** Joins: rgawdzik (chatzilla@moz-E38BC0DF.net.uwaterloo.ca)
[04:09:23] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[04:09:25] <wycats_> I guess I can just use min_by
[04:09:25] <dbaupp> wycats_: 4 million
[04:09:26] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[04:11:22] *** Quits: pcwalton (pcwalton@moz-F758DCCF.snfc.ca.megapath.net) (Quit: pcwalton)
[04:11:48] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[04:12:53] <wycats_> is it considered acceptable practice to use unwrap() if the failure case is checked dynamically?
[04:13:31] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Quit: Leaving.)
[04:14:35] <geomyidae> so I've added a test.rs file and now it's trying to make a bin dir in addition to the buidl dir and then it fails on an assertion because it checks the output dirs for emptyness.
[04:14:56] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[04:15:21] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[04:15:21] *** nrc is now known as nrc|afk
[04:15:55] *** Quits: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt) (Quit: Konversation terminated!)
[04:16:02] *** Joins: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt)
[04:16:39] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[04:16:45] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[04:16:57] <dmz> is thestinger here?
[04:17:23] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[04:17:51] <dbaupp> dmz: strcat
[04:17:57] <dmz> ah
[04:18:10] <dmz> not here atm
[04:18:26] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[04:18:27] *** Joins: espindola (espindola@moz-6A685420.dsl.pltn13.sbcglobal.net)
[04:18:32] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[04:18:44] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[04:18:59] <dmz> why why why Rc ptr_eq was removed?..
[04:19:20] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Ping timeout)
[04:19:26] <dbaupp> dmz: use the ptr_eq for &T
[04:19:57] <dbaupp> err, ref_eq
[04:19:58] <dbaupp> http://static.rust-lang.org/doc/master/std/borrow/fn.ref_eq.html
[04:20:01] <jmgrosen> can anyone point me towards where the "1..4" in `match foo { 1..4 => {}, _ => {}` is parsed?
[04:20:13] <dbaupp> jmgrosen: syntax/parser/parser.rs
[04:20:20] <jmgrosen> dbaupp: got that much :P
[04:20:23] <jmgrosen> but I can't find where in it
[04:20:25] <dbaupp> search for pattern and follow it through
[04:20:27] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[04:20:28] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[04:20:28] <dbaupp> (is what I would do)
[04:20:32] <jmgrosen> alright
[04:20:35] <dbaupp> or search for the DOTDOT token
[04:20:40] <dbaupp> (the latter seems more reasonable)
[04:20:43] <dmz> dbaupp: yeah, right, and how "borrow::ref_eq(a.borrow(),b.borrow())" is better than "a.ptr_eq(&b)"?
[04:20:50] <wycats_> help: https://gist.github.com/wycats/8412975#file-lib-rs-L22-L24
[04:20:59] <wycats_> I'm trying to implement https://gist.github.com/wycats/8412975#file-lib-rs-L28
[04:21:02] <dbaupp> dmz: less code duplication
[04:21:03] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[04:21:07] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[04:21:07] <wycats_> in terms of a comparable tuple
[04:21:11] <wycats_> but this doesn't seem to be working
[04:21:20] <dbaupp> dmz: you *can* write a wrapper that lets you write ptr_eq(a, b), right?
[04:21:33] <wycats_> dbaupp: halp
[04:21:33] <jmgrosen> "// Parse an expression pattern or exp .. exp." sounds like I might be on the right track :P
[04:21:53] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[04:21:57] <dbaupp> wycats_: um
[04:22:19] <dbaupp> wycats_: I'd've though (,,).cmp((,,)) would work?
[04:22:30] <dbaupp> erm, .cmp(&(,,))
[04:22:37] <wycats_> dbaupp: I'm using max_by
[04:22:41] <wycats_> on the other sid
[04:22:42] *** Joins: weirdo (Mibbit@moz-8B946553.dsl.bell.ca)
[04:22:43] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[04:22:43] <wycats_> side*
[04:22:50] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[04:22:56] <dbaupp> wycats_: I don't know what you mean by that
[04:22:57] <wycats_> oh I guess I can just return the metadata itself
[04:23:02] <wycats_> since it implements Ord
[04:23:19] <wycats_> the other side is doing results.max_by(|a| some_sort(a))
[04:23:23] <wycats_> where some_sort is a param
[04:23:23] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[04:23:23] <dmz> dbaupp: right. just because we can write something so incredibly useful, it shouldn't be a part of the standard class any more? I could also write Rc and Gc, but you still provide them. So this point is not quite valid.
[04:23:27] <wycats_> it takes an index
[04:23:31] <wycats_> and returns an Ord
[04:23:33] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[04:23:42] <dbaupp> dmz: if you really hate it, submit a PR
[04:23:44] *** Quits: rgawdzik (chatzilla@moz-E38BC0DF.net.uwaterloo.ca) (Ping timeout)
[04:24:11] <wycats_> oh lulz I impled TotalOrd not Ord
[04:24:22] <wycats_> is there a way to synthesize Ord from TtotalOrd?
[04:24:23] <dbaupp> (I'm not going to argue on this, 'cause I don't actually care; I was just regurgitating the reasons strcat gave for removing it.)
[04:24:32] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[04:24:35] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[04:24:54] <dmz> dbaupp: thing is, it was there. So before submitting the PR I need to figure out the reasoning behind the removal of this method... Otherwise, I see no chance of the PR being accepted.
[04:24:55] <dbaupp> wycats_: yeah, `impl Ord for... { fn lt(&self, other: &...) -> bool { self.cmp(other) == Less } }`
[04:25:13] <dbaupp> dmz: https://github.com/mozilla/rust/pull/10926#issuecomment-31976440
[04:25:16] * geomyidae hm, seems that if I put it in another subdir under src/ rustpkg build will work
[04:25:43] <dbaupp> dmz: strcat's standard reason for removing things is keeping APIs small and using composition
[04:25:46] <dmz> dbaupp: yes, I was looking at this thestinger's comment for the past half an hour
[04:26:05] <dbaupp> It took you half an hour to read a once sentence comment? :P
[04:26:07] *** Quits: prooftechnique (prooftechn@moz-1C9C6B71.hsd1.vt.comcast.net) (Quit: )
[04:26:09] <dbaupp> *one sentence
[04:26:20] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[04:26:24] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[04:26:26] <wycats_> ok now I'm completely lost
[04:26:27] <cmr> I imagine eventually we'll have a ref_eq function that can operate on any two types which implement the magic smart pointer trait.
[04:26:32] <dmz> dbaupp: joke all you want, I'll go to bad angry
[04:26:37] <wycats_> max_by is giving me different results than sort() followed by last()
[04:26:51] <dmz> cmr: oh, that's actually interesting
[04:27:11] *** Quits: biardjd (kzzch@moz-BB97B490.washdc.fios.verizon.net) (Quit: WeeChat 0.4.1)
[04:27:23] <wycats_> dbaupp: is that even possible?
[04:27:25] <jmgrosen> so I'm looking at implementing https://github.com/mozilla/rust/issues/4160 and it seems like if I want "1..2" to parse in a non-pattern, it would have to be an expression, correct?
[04:27:38] <cmr> I think we should also have a trait for "extensional equality", whereby ref_eq can shortcut an actual equality check :)
[04:27:51] <dbaupp> dmz: I don't quite understand why this .ptr_eq function is so important as to waste significant amounts of time
[04:28:05] <dbaupp> wycats_: that's pretty weird
[04:28:08] <cmr> wycats_: is your max_by using the same sort of comparison thingy that TotalOrd is?
[04:28:25] <dmz> dbaupp: I liked it... I added the same for Gc... I use it a lot... and now it's no longer there
[04:28:30] <jmgrosen> hmm.. I could make a slice a new expression instead of using ExprIndex
[04:28:30] <dbaupp> jmgrosen: something like that
[04:28:37] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[04:29:11] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[04:29:12] <wycats_> sort was using |a,b| a.cmp(b)
[04:29:12] <jmgrosen> dbaupp: do you think a new ExprSlice with an Option<Expr> for start/end would be better than making "1..3" an expression, or the other way around?
[04:29:13] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[04:29:15] <jmgrosen> in your opinion :P
[04:29:23] <wycats_> max_by is using max_by(|a| a)
[04:29:24] <wycats_> (roughly)
[04:29:44] <dbaupp> jmgrosen: I though the way to make 1..3 an expression would be having an ExprSlice?
[04:29:45] <cmr> wycats_: confusing! println-debug the hell out of it.
[04:29:52] <dbaupp> jmgrosen: oh, unless you mean ExprSlice == v[1..3]
[04:29:54] <dbaupp> ?
[04:29:56] <wycats_> indeed
[04:30:02] *** Quits: Jesin (Jesin@moz-A43618DF.res.lehigh.edu) (Quit: Leaving)
[04:30:04] <jmgrosen> dbaupp: yeah, I mean the v[1..3] would be the expr
[04:30:12] <dbaupp> jmgrosen: having it separate seems nicer
[04:30:23] <jmgrosen> dbaupp: i.e. having an ExprSlice?
[04:30:24] <dbaupp> not really sure
[04:30:35] <dbaupp> jmgrosen: no, ahving 1..3 as a separate expression type
[04:30:46] <wycats_> oh lulz
[04:30:47] <jmgrosen> dbaupp: hm, okay
[04:30:51] <wycats_> I never invoked the ord() parameter
[04:30:53] <dbaupp> but then we'd need overloading of Index to work properly
[04:30:55] <wycats_> dumbass wycats
[04:30:59] <wycats_> dbaupp: can we fix it?
[04:31:01] <jmgrosen> it just seems like there wouldn't really be any other place where 1..3 would be a valid expression
[04:31:23] <dbaupp> jmgrosen: hm, ExprSlice(...) could be extended to have 1..3 separate ina  backward compatible way
[04:31:26] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[04:31:27] <cmr> (dbaupp the builder, yes we can!)
[04:31:32] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[04:31:34] <dbaupp> jmgrosen: so go with ExprSlice for now
[04:31:40] <jmgrosen> dbaupp: in #4160 nmatsakis recommends a new Slice trait
[04:31:42] <dbaupp> wycats_: fix "it"?
[04:31:52] <wycats_> dbaupp: overloading of Indexing
[04:31:53] <dbaupp> jmgrosen: yeah, which would be ExprSlice, I guess.
[04:31:57] <dbaupp> wycats_: maybe
[04:32:02] <wycats_> we need improvements for headers[ContentType]
[04:32:06] <jmgrosen> dbaupp: alright, I'll give that a shot, then
[04:32:11] <dbaupp> I believe niko wants to fix it
[04:32:13] <wycats_> ChrisMorgan discovered it wasn't working
[04:32:31] <wycats_> hm... I ran perf record -g but I'm not getting good enough data
[04:32:35] <wycats_> am I doing something wrong?
[04:32:38] <dbaupp> you can do a double dispatch device to get it to work.
[04:32:50] <wycats_> dbaupp: I think we couldn't figure out how to make it work with that syntax
[04:32:52] <jmgrosen> dbaupp: this is my first real compiler hacking, so it's new for me
[04:32:56] <wycats_> I suggested a few things but none worked
[04:33:01] <dbaupp> jmgrosen: <3 compiler hacking
[04:33:01] <wycats_> do I need to run make with -Z extra-debug-info?
[04:33:15] <dbaupp> wycats_: http://smallcultfollowing.com/babysteps/blog/2012/10/04/refining-traits-slash-impls/ "what if I want overloading"
[04:33:26] <wycats_> dbaupp: I'm familiar with that trick
[04:33:28] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[04:33:29] <wycats_> I use it all the time
[04:33:30] <dbaupp> wycats_: oh ok
[04:33:36] <wycats_> I suggested it to ChrisMorgan
[04:33:40] <wycats_> and he showed that it wasn't working for Index
[04:33:44] <wycats_> for reasons unknown
[04:33:52] <dbaupp> magical Index
[04:34:01] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[04:34:10] <wycats_> zomg I added -Z extra-debug-info and got:
[04:34:15] <wycats_> https://www.irccloud.com/pastebin/YNQEtxtL
[04:34:23] <cmr> aww
[04:34:31] <cmr> yet another one :(
[04:34:33] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[04:34:34] <dmz> dbaupp: What is the reason Eq is not actually comparing pointers (but doing the deep comparison instead) for Gc and Rc? I see it quite contrary to what anyone would expect, who came from C++ at least.
[04:34:45] <dbaupp> dmz: why?
[04:34:50] <wycats_> dmz: you want Eq to do Eq
[04:34:53] <wycats_> not === in JS :P
[04:34:57] <cmr> dmz: just because their addresses are the same doesn't mean they are equal.
[04:34:57] <dbaupp> you can have Gc::new(1) and Gc::new(1) as different pointers
[04:35:09] <wycats_> == doing a sensible thing is one of the nicest things a language can do
[04:35:10] <dbaupp> (and what cmr said; NaN != NaN)
[04:35:11] <cmr> fn eq(&self, other: &Self) -> bool { false }
[04:35:22] <dmz> but... we are calling eq on pointers. Isn't it reasonable to expect pointers to compare, not the data?
[04:35:25] <wycats_> assert!(~[1,2] == ~[1,2]) <= yeeeeessss
[04:35:41] <dmz> If I needed to compare the data, I can borrow and dereference (composition, as you said)
[04:35:41] <dbaupp> dmz: we're calling eq on boxes, which are "thin" wrappers around their data
[04:35:52] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Connection reset by peer)
[04:35:58] <wycats_> is extra-debug-info just broken?
[04:35:59] *** Joins: ptc (Adium@6C906E9F.9ECAA4DB.BCDD830B.IP)
[04:36:06] *** Quits: espindola (espindola@moz-6A685420.dsl.pltn13.sbcglobal.net) (Client exited)
[04:36:08] <cmr> wycats_: no. but it sometimes barfs on some input.
[04:36:09] <sfackler> wycats_: it's not entirely reliable
[04:36:10] <wycats_> dmz: you wouldn't want ^^ to be false
[04:36:13] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[04:36:14] <wycats_> :(
[04:36:14] <cmr> still has bugs needing to be ironed out.
[04:36:18] <wycats_> scumbaggery
[04:36:24] <dmz> dbaupp: I see.. are Gc/Rc considered "thick" wrappers/pointers?
[04:36:26] *** Joins: Jesin (Jesin@moz-A43618DF.res.lehigh.edu)
[04:36:31] <cmr> fwiw it compiles all of servo and rustc/stdlib
[04:36:33] <cmr> so
[04:36:34] <wycats_> RUSTC_LOG=rustc=1 isn't helping
[04:36:37] <dbaupp> dmz: not really
[04:36:40] <wycats_> so I'm doing something insane :P
[04:36:45] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[04:36:52] <wycats_> and by helping I mean printing output that I can use to file a bug
[04:36:58] <dbaupp> dmz: the only pointers that Eq doesn't search through are * and *mut
[04:37:19] <wycats_> namely unsafe pointer
[04:37:44] *** Quits: ptc (Adium@6C906E9F.9ECAA4DB.BCDD830B.IP) (Ping timeout)
[04:37:47] * cmr would find it very *un*expected if == didn't trace through boxes
[04:37:49] <dmz> dbaupp: You know what would be logical? To have deep_eq. In the same way we have Clone (shallow) and DeepClone. That would be very intuitive.
[04:38:04] <cmr> dmz: I've not wanted it even once!
[04:38:14] *** Joins: limeburst (me@247D1419.D73964AC.27A8748.IP)
[04:38:16] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[04:38:25] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[04:38:28] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[04:38:33] <dmz> except for == needs to be associated with either one... and there is no such problem with Clone
[04:38:37] <dbaupp> dmz: eurgh :(
[04:38:38] <wycats_> cmr: yes I would as well
[04:38:43] <wycats_> dmz: deny
[04:38:46] <wycats_> you do not want that
[04:38:55] <dbaupp> I don't like how Java's == is pointer equality
[04:39:00] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[04:39:03] <dbaupp> has confused me far too many times
[04:39:14] <dmz> that's what any C++ pointer does
[04:39:16] <wycats_> dbaupp: it's terrible in JS as well
[04:39:18] <dmz> anyone using C++ here?
[04:39:19] <wycats_> and good in Ruby
[04:39:31] <wycats_> dmz: how it works in C++ isn't a good rationale ;)
[04:39:33] <dbaupp> dmz: doesn't make C++ correct ;P
[04:39:34] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[04:39:38] <wycats_> maybe we should add === ;) ;) ;)
[04:39:46] <dmz> yeah, at least
[04:39:52] <dmz> and DeepEq with it :)
[04:40:17] <cmr> I still think DeepEq should be the default, and referential equality should be built on top of the smart pointer trait.
[04:40:31] <dmz> I could live with that :)
[04:40:44] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[04:40:47] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[04:40:58] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[04:41:08] <dmz> even though, === in JS is not exactly a pointer comparison, so this might be a bit confusing
[04:41:12] <dbaupp> trait Borrow<T> { fn borrow<'a>(&'a self) -> &'a T; fn ref_eq(&self, other: &Self) { self.borrow() as *T == other.borrow() as *T } }
[04:41:18] *** nrc|afk is now known as nrc
[04:41:26] <dbaupp> some_pointer.ref_eq(&other_pointer)
[04:41:47] <dmz> dbauupp: wouldn't borrow() conflict with Rc borrow() or Gc borrow()?
[04:41:52] <dbaupp> dmz: no
[04:42:02] <dbaupp> those methods would be unnecessary with a smart pointer Borrow trait
[04:42:09] <dbaupp> Borrow woudl be generalising them
[04:42:22] <wycats_> dmz: === is close enough to a pointer compare
[04:42:30] <dmz> dbaupp: would I need to implement borrow(), or would it just use the existing ones?
[04:43:12] <dbaupp> dmz: if you were implementing a smart pointer, yes. otherwise, no.
[04:43:18] <dbaupp> Rc and Gc would have that trait
[04:43:52] *** Joins: tristram (tris@moz-76E1F1DB.lns20.syd6.internode.on.net)
[04:43:53] <dbaupp> (that was a hypothetical trait that would be added to the stdlib along with smart pointer sugar.)
[04:44:07] <Diamond> rusti: std::sizeof::<[f32, ..4]>()
[04:44:11] <Diamond> :(
[04:44:12] <dmz> I see
[04:44:36] *** Parts: weirdo (Mibbit@moz-8B946553.dsl.bell.ca) ()
[04:44:51] <dbaupp> Diamond: 16
[04:45:02] <wycats_> dmz: I think expecting pointer equality is just what you're used to
[04:45:12] <wycats_> compare-by-value is very nice
[04:45:14] <dmz> wycats_: yeah....
[04:45:18] <wycats_> you get used to it fast and miss it when it's gone
[04:45:34] <wycats_> dmz: I can say with some confidence as a Ruby/JS person
[04:45:43] <wycats_> Ruby compares by value (with .equals? for by-reference)
[04:45:48] <wycats_> JS has no compare-by-value
[04:45:52] <wycats_> and it drives me crazy
[04:46:10] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[04:46:16] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:46:27] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[04:46:31] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[04:46:32] *** Joins: ptc1 (Adium@moz-192425C4.nyc.res.rr.com)
[04:46:32] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Client exited)
[04:46:48] <dmz> wycats_: to be fair, JS drove me crazy all the short time I used it, by a lot of reasons :)
[04:46:49] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[04:46:55] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[04:46:56] <wycats_> ;)
[04:47:00] <dbaupp> someone submit some PRs... bors is sitting around doing nothing.
[04:47:00] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:47:01] <wycats_> you have to get used to it
[04:47:02] <wycats_> and use an abstraction
[04:48:06] <Luqman> dbaupp: a vacation for bors :P
[04:48:22] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[04:48:29] <dbaupp> Luqman: I can't allow this.
[04:48:38] * dbaupp r+'s everything on the queue, correct or not
[04:48:49] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[04:48:58] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[04:49:25] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[04:49:30] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[04:49:31] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Quit: Leaving...)
[04:50:33] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[04:50:38] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[04:50:55] *** Quits: rattboi (bkanyid@moz-9A5A7AF8.org) (Ping timeout)
[04:51:03] <wycats_> http://note.io/1eB492G
[04:51:06] <wycats_> seems not very useful :(
[04:51:23] <dbaupp> ah
[04:51:29] <dbaupp> ~[] is slow...
[04:51:31] <dbaupp> hm
[04:51:34] *** Joins: rattboi (bkanyid@moz-9A5A7AF8.org)
[04:51:42] <wycats_> dbaupp: I don't have much choice
[04:51:46] <wycats_> I tried switching to DList
[04:51:49] <dbaupp> wycats_: are you preallocating it?
[04:51:53] <wycats_> and it made it MUCH worse
[04:51:56] <olsonjeffery> dbaupp: fixed not use a fixed size mutable array?
[04:51:57] <dbaupp> DList?
[04:51:57] <wycats_> I don't know the size ahead of time
[04:52:04] <olsonjeffery> wycats_, even
[04:52:10] <wycats_> even?
[04:52:14] <dbaupp> wycats_: well, preallocate a reasonable lower bound
[04:52:21] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[04:52:22] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[04:52:22] <olsonjeffery> wycats_: that previous comment, for dbaupp, was meant for you
[04:52:26] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[04:52:31] *** Quits: kvanb (kvanb@moz-2C33D4E6.lnse3.lon.bigpond.net.au) (Quit: kvanb)
[04:52:38] <dbaupp> (or a reasonable estimate of the length, so that you're noting having to reallocate)
[04:52:40] <olsonjeffery> if ~[] is too slow, pre-allocate
[04:52:47] <wycats_> the algorithm is that I walk down the DFA, and accumulate lists of states
[04:52:47] <dbaupp> s/ing//
[04:53:00] <wycats_> NFA*
[04:53:04] <wycats_> and each character consumed goes through the current states and looks for next states
[04:53:06] <olsonjeffery> common pattern w/ byte buffers in IO
[04:53:10] <wycats_> 0 or more next states
[04:53:23] <wycats_> pre-allocate what?
[04:53:47] <wycats_> so what I'm doing is for each character I'm building a new ~[] that holds the next states
[04:53:52] <dbaupp> you have a vector of states that you push to?
[04:54:03] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[04:54:09] <wycats_> dbaupp: a little bit different than that
[04:54:10] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[04:54:13] <dbaupp> create that with std::vec::with_capacity(20) rather than ~[]
[04:54:14] <dbaupp> oh?
[04:54:24] <wycats_> I store all the state for each "thread" as Thread
[04:54:30] <wycats_> and if a state has more than one child state
[04:54:32] <wycats_> I fork the threads
[04:54:37] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[04:54:37] *** ChanServ sets mode: +ao pcwalton pcwalton
[04:54:50] <wycats_> the processing function takes in a vector of threads and emits a vector of threads
[04:54:56] <wycats_> but because any item can become two items
[04:55:02] <wycats_> I have to create a new vector
[04:55:07] <wycats_> I can't just replace the state
[04:55:11] <wycats_> the Thread*
[04:56:09] <dbaupp> hm: one possibility: have it a linked list (so you can share tails) and allocate the nodes from a TypedArena
[04:56:10] <wycats_> if I could just keep replacing the elements of the vector things would be better
[04:56:11] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[04:56:14] <dbaupp> extra::arena
[04:56:24] <wycats_> hm... using just a linked list failed hard
[04:56:27] <wycats_> it was like 50% slower
[04:56:30] <wycats_> gotta learn about arenas
[04:56:38] <dbaupp> presumably because each node needed a separate malloc allocation
[04:56:43] *** Quits: wcrichto (will@moz-CE2480BF.res.cmu.edu) (Ping timeout)
[04:56:43] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[04:56:46] <wycats_> dbaupp: c
[04:57:02] <dbaupp> while with arenas it'll malloc a slab of memory and then hand out pieces of that
[04:57:16] <dbaupp> single digit nanoseconds per allocation apparently
[04:57:19] <wycats_> so the idea of a typed arena is that it'll pool the objects?
[04:57:24] <dbaupp> yeah, exactly
[04:57:34] <wycats_> dbaupp: hm... the total time for the whole recognition is like 9,000 ns
[04:57:41] <wycats_> so single digit ns might not be that helpful
[04:57:42] <dbaupp> and the *typed* bit specifically lets it chunk really efficiently
[04:57:43] <wycats_> hmmm
[04:57:50] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[04:57:53] <dbaupp> well, a normal allocation is many many nanoseconds
[04:57:56] <wycats_> yes
[04:58:01] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[04:58:09] <dbaupp> so this is basically making allocating linked list nodes a non-issue
[04:58:13] <pcwalton> every allocation is like 20-30 ns
[04:58:14] <pcwalton> iirc
[04:58:15] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[04:58:21] <pcwalton> on Mac
[04:58:28] <pcwalton> malloc is pretty slow on malloc though compared to glibc/linux
[04:58:42] <pcwalton> on mac that is
[04:58:50] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[04:58:52] <wycats_> maybe 9,000ns is fast enough
[04:59:11] <dbaupp> at least it's not over 9000
[04:59:26] <pcwalton> never fast enough! microoptimize everything!
[04:59:28] <pcwalton> :)
[05:00:42] <wycats_> also for unfathomable reasons, DList doesn't support insertion into the middle of the list
[05:00:43] <olsonjeffery> as a longtime premature optimizer, i think it would be a real shame if the rust team didn't drop what they're doing and prematurely optimize everything.
[05:00:51] <dmz> dbaupp: cmr: wycats_: g'night, and thank you for your time!
[05:00:56] <dbaupp> wycats_: ah, I think you could gain something by changing https://github.com/wycats/route-recognizer.rs/blob/master/src/nfa.rs#L202 to with_capacity(threads.len()) (since you on-average have on return thread per input thread, right?)
[05:00:58] *** Joins: gwty (gwtypc@C045AC61.3E0F208F.137C914F.IP)
[05:01:07] <jmgrosen> is there a way just to recompile libsyntax?
[05:01:14] <wycats_> dbaupp: yeah
[05:01:15] *** Joins: gwty_ (gwtypc@C045AC61.3E0F208F.137C914F.IP)
[05:01:21] *** Quits: gwty_ (gwtypc@C045AC61.3E0F208F.137C914F.IP) (Connection reset by peer)
[05:01:25] <wycats_> I actually didn't gain much from a bunch of attempts to preallocate but let me try again
[05:01:31] <wycats_> that was before some more obvious optimizations
[05:01:47] <dbaupp> I guess threads.len() * 2 would mean you basically never reallocate
[05:01:56] <dbaupp> but the cost of the large allocation may be too much
[05:02:03] *** Quits: dmz (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com) (Quit: http://www.mibbit.com ajax IRC Client)
[05:02:03] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[05:02:04] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[05:02:12] <wycats_> dbaupp: you can have n children
[05:02:14] <wycats_> not just 2
[05:02:20] <wycats_> it's not std::vec::with_capacity
[05:02:22] <wycats_> what is it?
[05:02:46] <dbaupp> it is that?
[05:02:51] <wycats_> https://www.irccloud.com/pastebin/MXzW0l4W
[05:03:05] <dbaupp> http://static.rust-lang.org/doc/master/std/vec/fn.with_capacity.html
[05:03:06] <wycats_> O_O
[05:03:15] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[05:03:23] <dbaupp> oh, you're in a submodule
[05:03:24] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[05:03:27] <dbaupp> std isn't in scope
[05:03:43] <jmgrosen> dbaupp: how do you just recompile libsyntax? I remember doing it a while ago
[05:03:47] <dbaupp> either `use std;` with that, `use std::vec;` wth vec::with_capacity, or `::std::vec::with_capacity`
[05:03:56] <dbaupp> jmgrosen: `rustc lib.rs`?
[05:04:06] <jmgrosen> dbaupp: no make target?
[05:04:22] *** Joins: omnus (omnus@moz-2E009EE2.stny.res.rr.com)
[05:04:29] <dbaupp> jmgrosen: well, if you've build std and extra and so on, then subsequence makes will start at libsyntax
[05:04:38] <dbaupp> (assuming you don't modify std and extra)
[05:04:40] <jmgrosen> dbaupp: hm, alright
[05:04:58] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[05:05:02] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[05:06:18] <wycats_> down to 7000usec ish
[05:06:48] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[05:06:49] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[05:07:01] <pcwalton> use Instruments or perf
[05:07:08] <wycats_> pcwalton: I showed the results ;)
[05:07:11] <dbaupp> some basic measurements (i.e. malloc in a loop with 10 million iterations) indicates that malloc(32) takes ~50ns
[05:07:12] <wycats_> very un-helpful
[05:07:13] <pcwalton> oh oops
[05:07:16] <dbaupp> (on my linux)
[05:07:18] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[05:07:25] <wycats_> http://note.io/1eB492G
[05:07:28] <dbaupp> wycats_: it showed vec.push as being slow :)
[05:07:52] <wycats_> dbaupp: truth
[05:08:02] <pcwalton> ah yeah, it's too much allocation
[05:08:07] <pcwalton> preallocate if it's possible
[05:08:10] <pcwalton> basically
[05:08:13] <pcwalton> what everyone else is saying :)
[05:08:16] <wycats_> pcwalton: yep
[05:08:20] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[05:08:29] <wycats_> pcwalton: got it down from 9000usec to 7000usec with dbaupp's suggestion
[05:08:40] <pcwalton> nice
[05:08:48] <wycats_> seems like "efficient list" would be a nice thing to have
[05:08:56] <wycats_> arenas seem good
[05:09:08] <pcwalton> I wonder if nfa::CharacterClass::matches can be optimized or inlined
[05:09:09] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[05:09:14] <pcwalton> if it's cross crate and not being inlined
[05:09:20] <dbaupp> code here https://github.com/wycats/route-recognizer.rs/blob/master/src/nfa.rs#L202
[05:09:25] <dbaupp> erm, remove the target
[05:09:50] <wycats_> the target?
[05:09:55] <wycats_> I should paste the latest version
[05:09:55] <dbaupp> #L202
[05:09:56] <wycats_> uno momento
[05:10:16] <wycats_> https://gist.github.com/8413394
[05:10:45] <pcwalton> I think we probably want a SmallVector optimization
[05:10:46] *** Quits: fournm (Aria@moz-ABB60BA0.austin.res.rr.com) (Quit: Leaving)
[05:10:47] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Ping timeout)
[05:10:48] <pcwalton> that's been a common request
[05:10:50] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[05:10:53] <pcwalton> where it preallocates space for N
[05:10:56] <pcwalton> and only spills if it gets too big
[05:10:56] <dbaupp> ah, I get ~35 ns/iter for the malloc loop in C
[05:11:01] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[05:11:09] <wycats_> dbaupp: what does "target" mean
[05:11:12] <wycats_> I'm confused
[05:11:22] <pcwalton> if the number of states is small then that will remove all the allocations
[05:11:39] <dbaupp> wycats_: the #L202
[05:11:44] <wycats_> yes
[05:11:46] <wycats_> I am looking at it
[05:11:47] <dbaupp> I probably have the name incorrect
[05:12:01] <wycats_> pcwalton: is there a way to implement this in terms of existing rust?
[05:12:11] <dbaupp> (I just meant that the #L202 wasn't meant to be part of my paste)
[05:12:16] <wycats_> dbaupp: let mut threads = ~[Thread::new()];
[05:12:17] <wycats_> ah
[05:12:20] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[05:12:28] <dbaupp> sorry for the confusion
[05:12:29] <wycats_> what were you saying?
[05:12:31] <wycats_> s'ok
[05:13:05] <dbaupp> wycats_: this one has known length https://gist.github.com/wycats/8413394#file-nfa-rs-L148
[05:13:08] <wycats_> pcwalton: the idea is it'd preallocate stack space for n?
[05:13:21] <wycats_> indeed!
[05:13:28] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[05:13:29] *** Joins: kvanb (kvanb@moz-2C33D4E6.lnse3.lon.bigpond.net.au)
[05:13:46] <pcwalton> wycats_: yup. you'll want to hardcode the number N in the data structure right now but you could probably make a few for 1 element, 2 elements, 4, 8, 16, 32, and share almost all the functionality, leaving only a small amount of boilerplate
[05:13:47] <dbaupp> could actually be `self.captures.iter().map(|&(begin, end)| source.slice(begin, end)).collect()` and it'll do the preallocation appropriately
[05:14:03] <wycats_> dbaupp: that only runs once per recognition so I wasn't focused on it
[05:14:09] <dbaupp> pcwalton: and the boilerplate would be macro'd away
[05:14:16] <pcwalton> yeah if you wanted to macro it away you could do that too
[05:14:17] <wycats_> was focused on the stuff in the process loop
[05:14:26] <dbaupp> wycats_: oh; even so... <3 iterators :P
[05:14:32] <pcwalton> Servo <3s SmallVectors
[05:14:41] <wycats_> if you look at this code you will see that I do too ;)
[05:14:48] <wycats_> pcwalton: you implemented something in servo?
[05:14:52] <pcwalton> no, I didn't
[05:14:58] <wycats_> hm
[05:14:59] <wycats_> iConfuse
[05:15:01] <pcwalton> it loves them but its love is currently unfulfilled :)
[05:15:02] <olsonjeffery> someone reddit asked why rust chose self over this.
[05:15:20] <wycats_> so the idea to do [Thread, ..8] or something
[05:15:23] <pcwalton> what I mean is that from my profiling some parts of servo really want smallvectors
[05:15:25] <wycats_> and keep an eye on spillage?
[05:15:27] <pcwalton> yeah
[05:15:29] <olsonjeffery> i can't think up a constructive response. at least lifthrasiir was nice.
[05:15:49] <olsonjeffery> also a preference for C# extension method syntax over impl blocks (!!)
[05:15:55] <olsonjeffery> not sure if trolling.
[05:16:05] <wycats_> oh btw all these benches are in a VM on my mac :P
[05:16:06] <pcwalton> olsonjeffery: because self is old school
[05:16:11] <wycats_> should probably run them outside
[05:16:19] <wycats_> because Ruby > Python obviously
[05:16:20] <wycats_> see Twitter
[05:16:21] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[05:16:27] <pcwalton> Ruby and Python are both self :P
[05:16:40] <pcwalton> Ruby + Python > C++ + Java
[05:16:45] *** Joins: espindola (espindola@3AA6F601.53AE8582.A535BD55.IP)
[05:16:48] <jmgrosen> dbaupp: I'm getting these weird errors upon building libsyntax, unrelated to what I'm changing: https://gist.github.com/jmgrosen/8b54fc87b3949617b037
[05:16:51] <jmgrosen> halp?
[05:16:55] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[05:16:56] <olsonjeffery> it's funny because it's so wadlerian, if you so.
[05:17:04] <jmgrosen> (that was with just `rustc lib.rs`)
[05:17:06] <olsonjeffery> if you will*
[05:17:15] <dbaupp> jmgrosen: I think your rustc is too old
[05:18:01] <wycats_> make clean baby
[05:18:17] <dbaupp> jmgrosen: (i.e. you need to build a new rustc to be able to compile libsyntax
[05:18:19] <jmgrosen> dbaupp: ...hmm, it looks like it; I thought I had built this version, but I guess not
[05:18:28] <pcwalton> wycats_: you may want it to be unsafe because otherwise you'll have a "zero value" for Thread or it'll have to be [Option<Thread>, ..8]. really we just need SmallVector in the standard library.
[05:18:48] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[05:18:50] <pcwalton> if you have a zero placeholder value, then feel free
[05:18:52] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[05:18:54] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[05:19:06] <pcwalton> or just use options
[05:19:08] <pcwalton> I guess options aren't too bad
[05:19:10] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[05:19:19] *** Parts: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) ()
[05:19:22] <pcwalton> it prevents you from handing out the buffer as a slice, I guess
[05:20:01] <pcwalton> for good reason, because rustc can't prove that you weren't handing out parts of the buffer that weren't initialized
[05:20:21] <Luqman> acrichto: oh hey, now you can get rid of all those casts again! :P
[05:20:27] <wycats_> pcwalton: can haz?
[05:20:35] <pcwalton> I don't have an implementation on me
[05:20:38] <pcwalton> but I could write one
[05:20:40] <wycats_> doit
[05:20:42] <wycats_> no I mean
[05:20:45] <wycats_> in the stdlib
[05:20:58] <pcwalton> let me finish this servo patch and then I'll write one
[05:21:22] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[05:21:22] <wycats_> ;)
[05:21:29] <pcwalton> (isn't it nice that rust has generics for stuff like this?)
[05:21:33] <wycats_> yes!
[05:21:43] <wycats_> I think that'd probably do more at this point for perf than anything else I can do
[05:21:48] <pcwalton> agreed
[05:21:59] <wycats_> I already moved all the ASCII lookup into a bitmasks
[05:22:02] <wycats_> that was a decent win
[05:22:02] <ChrisMorgan> rust-http should also use a SmallVector for many of its headers—for most of the headers that support multiple comma-separated values, in real life people *never* (literally never) use that functionality.
[05:22:51] <dbaupp> pcwalton: "it prevents you from handing out the buffer as a slice, I guess" do you mean you can't get a slice to the whole inline buffer?
[05:22:52] <wycats_> ChrisMorgan: rust-http needs enum PossiblyInvalid<T> { Invalid(~str), Valid(T) }
[05:23:05] <pcwalton> dbaupp: well, if you use Option<T> the type of the slice will be wrong
[05:23:18] <ChrisMorgan> wycats_: https://github.com/chris-morgan/rust-http/issues/27
[05:23:35] <dbaupp> pcwalton: wouldn't anything other than [T, .. n] be too slow?
[05:23:41] <wycats_> c
[05:23:48] <wycats_> sort of like a cross between Option and Result
[05:23:48] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[05:23:51] <dbaupp> (although I don't know how destructors would work in that case...)
[05:23:56] <dbaupp> careful forget()-ing I guess.
[05:24:00] <pcwalton> dbaupp: yeah
[05:24:03] <pcwalton> it wouldn't be good.
[05:24:04] <johnsoft> is there a #rust-idiots channel?
[05:24:15] <johnsoft> i hate cluttering things up with my stupid questions
[05:24:22] <dbaupp> johnsoft: this one... we're all idiots at times :)
[05:24:58] <johnsoft> fair enough :)
[05:25:05] <wycats_> Rust is still small enough that just go ahead in here
[05:25:07] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[05:25:26] <johnsoft> what do i need to do to make my traits/structs freezable?
[05:25:27] <sfackler> pcwalton: how would a smallvector work without generic integer params? have a hardcoded limit before allocating?
[05:25:37] <dbaupp> pcwalton: hm, I don't think forget() would work with destructors taking &mut self; you need to be able to move out (i.e. self)
[05:25:41] <pcwalton> sfackler: hardcoded for 1, 2, 4, 8, 16, 32
[05:25:50] <pcwalton> sharing most common functionality
[05:25:50] <dbaupp> at least, assuming that we don't zero
[05:26:00] <whitequark> wait, integers cannot be generic parameters? :(
[05:26:05] <dbaupp> johnsoft: avoid putting non-Freeze things inside them
[05:26:06] <pcwalton> not yet
[05:26:22] *** Joins: wcrichto (will@E9C1248F.6151ED9F.689607DE.IP)
[05:26:34] <dbaupp> johnsoft: non-Freeze includes: @mut (now gone), RefCell, Cell, MutexArc, RWArc
[05:27:10] <johnsoft> what am i doing wrong here? http://pastebin.com/fFngr6H5
[05:27:45] <dbaupp> johnsoft: weird
[05:27:51] <johnsoft> it's an owned vector of an owned trait, no fields to speak of
[05:27:54] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[05:28:23] <dbaupp> johnsoft: I think you may need `~[~Freezable:Freeze+Send]` as the type
[05:28:33] <dbaupp> this seems like a bug
[05:29:02] <dbaupp> trait objects don't inherit any kind bounds on the trait itself
[05:29:09] *** Quits: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt) (Ping timeout)
[05:29:34] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[05:29:52] <johnsoft> so you're saying ': Freeze' is out of place on 'pub trait Freezeable: Freeze'?
[05:29:56] <dbaupp> no
[05:30:02] <dbaupp> that's perfectly reasonable
[05:30:18] <dbaupp> I'm saying it's a bug that Rust isn't using this information for the Arc::new() line
[05:30:19] *** Quits: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au) (Quit: http://www.mibbit.com ajax IRC Client)
[05:30:31] <johnsoft> ah, i see
[05:30:35] <johnsoft> your fix did work
[05:30:39] <dbaupp> so you have to supply the info yourself, via `~Freezable:Freeze+Send`
[05:30:42] <dbaupp> awesome
[05:31:20] <dbaupp> johnsoft: ah, kimundi's come across it before: https://github.com/mozilla/rust/issues/9217
[05:31:27] <sfackler> does "pub trait Freezable: Freeze" actually force implementors to be Freeze?
[05:31:51] <dbaupp> in theory
[05:31:53] * dbaupp tries
[05:32:00] *** Joins: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP)
[05:32:20] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[05:32:29] <dbaupp> sfackler: yes, it does
[05:32:34] <sfackler> cool
[05:33:19] <johnsoft> yep, looks like the same thing
[05:33:35] <johnsoft> anyways thanks, off to play around some more
[05:34:18] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[05:34:22] *** Quits: ptc1 (Adium@moz-192425C4.nyc.res.rr.com) (Connection reset by peer)
[05:34:46] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Quit: Leaving.)
[05:37:25] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[05:37:47] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[05:37:48] *** Quits: new_one (new_one@B317A076.68E6A41C.B3C0173E.IP) (Client exited)
[05:38:06] <Yurume> I have a new draft for my How to Install Rust Nightly document: https://gist.github.com/lifthrasiir/8386766
[05:38:14] <lennart> is there a better way to dereference a &mut ~Foo into a &mut Foo
[05:38:18] <lennart> than &mut **foo
[05:38:35] <dbaupp> lennart: depending how you're using it just *foo may coerce to a &mut automatically
[05:38:59] <Yurume> this time I have added how to use Chocolatey-installed rustc with MSYS
[05:39:11] <dbaupp> and if you're extracting it via pattern matching, `~ref mut foo` (rather than just `ref mut foo`) will get you one directly
[05:39:27] *** Joins: Jemaclus (Mibbit@moz-5A4BC30.hsd1.ca.comcast.net)
[05:39:30] <dbaupp> by pattern matching "through the ~ pointer to it's contained data.
[05:40:02] <lennart> dbaupp: interestingly, that syntax appears to mess up things down the line
[05:40:05] <lennart> due to move semantics
[05:40:12] <dbaupp> lennart: which syntax?
[05:40:23] <dbaupp> `*foo`?
[05:40:37] *** Quits: FlyingFoX (quassel@moz-8F529370.weh.rwth-aachen.de) (Ping timeout)
[05:40:59] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[05:41:01] <lennart> dbaupp: yes
[05:41:14] <dbaupp> yeah, that's what I mean by "depending how you're using it"
[05:41:31] <dbaupp> e.g. if you have function(x: &mut Foo), then function(*foo) will work, without moving foo
[05:41:35] <lennart> the `foo` in question is derived from pattern matching a struct field, a mutable reference to which is later pushed to a vector
[05:41:40] <Jemaclus> another dumb question: getting an ioerror on make... IoError{kind: PermissionDenied
[05:41:56] <dbaupp> but `let x = *foo` won't work, because of move semantics, as you say.
[05:42:18] <geomyidae> Is it "okay" to try_recv() on two chans in a loop as a sort of select almost?
[05:42:23] <lennart> dbaupp: thanks
[05:42:36] <dbaupp> Jemaclus: platform? (and, have you previously built as root (i.e. sudo make)?)
[05:42:48] <Jemaclus> Mac OSX 10.9 right now, and yes, I ran sudo make
[05:42:52] <dbaupp> geomyidae: yes, it'll be quite CPU intensive though.
[05:43:02] <dbaupp> Jemaclus: is this run also `sudo make`?
[05:43:07] *** Joins: FlyingFoX (quassel@moz-8F529370.weh.rwth-aachen.de)
[05:43:09] <Jemaclus> yep
[05:43:15] <dbaupp> weird
[05:43:25] * dbaupp doesn't know enough about OSX
[05:43:27] <Jemaclus> yeah, i know
[05:43:27] <Jemaclus> hmm
[05:43:59] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[05:44:10] <Jemaclus> i'll keep trying
[05:44:11] <Jemaclus> thanks
[05:44:21] <sfackler> geomyidae: that thread will be spinning instead of sleeping when there isn't any data
[05:44:44] <sfackler> Jemaclus: make traditionally shouldn't be run with sudo
[05:44:44] <dbaupp> Jemaclus: oh, what's the last few lines of the output?
[05:46:16] <Jemaclus> http://pastebin.com/kRGakWCq
[05:46:38] *** Quits: wcrichto (will@E9C1248F.6151ED9F.689607DE.IP) (Quit: leaving)
[05:50:10] *** Quits: gwty (gwtypc@C045AC61.3E0F208F.137C914F.IP) (Ping timeout)
[05:52:52] <olsonjeffery> is the format! syntax documented anywhere?
[05:53:01] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[05:53:43] <dbaupp> olsonjeffery: are you implying that we would lack documentation on fundamental things? how dare you! :P
[05:54:15] <olsonjeffery> im not snarking, i swear.
[05:54:19] <olsonjeffery> i just want to link to it.
[05:54:21] <dbaupp> In this case, we actually have a feature that does have pretty good docs: http://static.rust-lang.org/doc/master/std/fmt/index.html
[05:54:23] <dbaupp> heh :)
[05:54:34] <olsonjeffery> ah. i was in std::fmt::format
[05:54:48] <olsonjeffery> ty
[05:55:05] <dbaupp> yeah, std::fmt could be named std::format for maximum findability
[05:55:21] *** Joins: achim (achim@moz-24AAAEB6.dip0.t-ipconnect.de)
[05:55:21] <olsonjeffery> yeah. i was search in the api docs for format! and got the fn
[05:56:53] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:57:04] <johnsoft> oh cool, i caused a segfault
[05:57:21] <johnsoft> is extra::arc unsafe?
[05:58:37] *** Quits: dbaupp (Thunderbir@DF3B07E7.D5A1DCF.37681C44.IP) (Ping timeout)
[05:59:33] *** Joins: blaenk (blaenk@moz-C270A5EA.lsanca.dsl-w.verizon.net)
[05:59:56] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[06:00:01] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[06:01:59] *** Joins: benjamin__ (benjamin@moz-CAB4ED9.dip0.t-ipconnect.de)
[06:02:32] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[06:02:56] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[06:04:19] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[06:04:47] <matthewbot> So if I have a type alias for a struct, I can't use that name to create the struct?
[06:05:08] * geomyidae internal compiler error, what do I win
[06:06:53] <ChrisMorgan> johnsoft: only the ones explicitly marked unsafe. Arc should be safe.
[06:08:25] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[06:08:25] *** ChanServ sets mode: +o jdm
[06:10:03] *** Joins: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net)
[06:10:22] <Cevn> can someone point me to an overview of rust pointers? 
[06:10:24] <Cevn> (heh) 
[06:14:03] *** Quits: heftig (heftig@moz-E5CB42A0.dip0.t-ipconnect.de) (Ping timeout)
[06:15:26] <ChrisMorgan> Cevn: http://static.rust-lang.org/doc/master/guide-pointers.html
[06:15:56] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Quit: 랜덤은 쇠퇴했습니다.)
[06:16:59] <Cevn> thanks 
[06:17:05] *** Joins: heftig (heftig@moz-B5CF9419.dip0.t-ipconnect.de)
[06:17:12] <Jemaclus> i think i'm gonna die before i get this installed... sigh
[06:20:19] <geomyidae> task 'rustc' failed at 'lookup_item: id not found: 108255', /build/rust-git/src/rust/src/librustc/metadata/decoder.rs:92
[06:22:11] *** Joins: skade (skade@moz-B73EE4D5.pools.arcor-ip.net)
[06:22:19] *** Joins: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net)
[06:23:25] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[06:23:41] *** Quits: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net) (Quit: dogurness)
[06:24:49] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[06:25:17] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[06:26:04] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Quit: csherratt)
[06:26:20] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[06:26:20] *** ChanServ sets mode: +o tjc
[06:27:06] <ChrisMorgan> geomyidae: are you (a) modifying rustc, (b) compiling code which links against code that you compiled against an earlier version of the compiler, (c) other?
[06:28:09] <geomyidae> Oops, I indeed did update rustc. thanks
[06:28:30] *** Quits: yutongzhao (yutongzhao@moz-325F8282.hsd1.ca.comcast.net) (Quit: yutongzhao)
[06:31:30] <lennart> why is `std::f32::MAX_VALUE` an f64?
[06:31:50] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[06:31:51] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[06:32:11] *** Joins: loren (loren@1F18520C.8C2A521C.405878F2.IP)
[06:33:06] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[06:33:18] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[06:34:04] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[06:34:23] <sfackler> lennart: typo probably?
[06:34:41] *** Quits: khodzha1 (khodzha@9BB3C301.EF9FA30D.CA6E2165.IP) (Ping timeout)
[06:35:19] <lennart> f32::MAX_VALUE, f32::MIN_VALUE, and f32::EPSILON are all f64s
[06:35:20] <lennart> D:
[06:35:22] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[06:36:32] <loren> Is there a decent way to "select" on a Port and a UdpSocket in a single thread?
[06:36:48] <qrada> hey, quick nub q.. just want to mess with some stuff in std::comm, particularly channels etc, so i'm trying to use Chan::new(), it keeps barking: error: unresolved name `Chan::new`. .... I have use std::comm::{Chan,Port}; use std::comm;
[06:36:52] <qrada> et
[06:36:53] <qrada> etc.. any idea :f
[06:37:03] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[06:37:21] <loren> qrada: Which version of rust are you on?
[06:37:48] <loren> I'm on nightly, and use std::comm::Chan works for me
[06:38:23] <qrada> rustc 0.9-pre (c0222cd 2013-10-28 19:26:23 -0700)
[06:38:48] <qrada> ya im looking in libstd/* and I see Chan::new() referenced just like i'm doing it.. so kind of confused
[06:38:50] <loren> Yeah, I'm on .10 pre
[06:38:52] <qrada> oo
[06:39:50] <sfackler> qrada: your build is from a couple of months ago, I think before the changes to the Chan API
[06:40:33] <qrada> ah cool thanks folks.. will update
[06:43:47] <qrada> i git pull'd/rebuilding rust, but i think the main github repo is still on 0.9 ?
[06:43:49] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[06:44:16] <qrada> where do you pull your src from?
[06:44:18] *** Quits: heftig (heftig@moz-B5CF9419.dip0.t-ipconnect.de) (Quit: Quitting)
[06:44:22] *** Quits: Jemaclus (Mibbit@moz-5A4BC30.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:45:11] <loren> Hey guys, I'm trying to write a component that handles UDP communication. It receives messages on a port that it needs to send out via UDP, and receives messages over UDP that it needs to send over a channel. I can't find a way for to receive on a UDP socket and on a Port from a single thread. Am I thinking about this wrong?
[06:45:31] *** Joins: glaebhoerl (glaebhoerl@moz-3590251D.kabelnet.hu)
[06:45:37] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[06:45:43] *** Joins: derek_c (derek@moz-C467C3E5.fwd.datafoundry.com)
[06:46:00] <ChrisMorgan> loren: being able to send and receive simultaneously is not at present possible in safe code.
[06:46:19] <derek_c> is everyone in favor of removing print and println from prelude?
[06:46:21] <ChrisMorgan> This is a known issue and is considered a high priority and is certainly blocking 1.0.
[06:46:28] <ChrisMorgan> derek_c: well, it's happened
[06:46:38] <derek_c> ChrisMorgan: I know.  I think it's bad
[06:47:01] <loren> ChrisMorgan: Thanks! Is there an unsafe alternative for the time being?
[06:47:11] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[06:47:14] <ChrisMorgan> Why: because the first argument must be a string literal so that println!(str) doesn't work?
[06:47:31] <derek_c> ChrisMorgan: yes. that makes it harder to do the easiest stuff
[06:47:49] <geomyidae> I'm writing udp code right now and trying to cheat with this https://github.com/mozilla/rust/issues/11165#issuecomment-32116120
[06:47:51] <ChrisMorgan> That's the only thing it's got against it, I think.
[06:48:09] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[06:48:14] *** Quits: espindola (espindola@3AA6F601.53AE8582.A535BD55.IP) (Quit: Leaving...)
[06:48:18] <derek_c> loren: were you talking about sockets?
[06:48:21] <ChrisMorgan> loren: what geomyidae linked to is the best we've got at present and it's only a partial workaround.
[06:48:21] <olsonjeffery> can a get some feedback on this short, rough draft of a blog post on file io in rust? https://gist.github.com/olsonjeffery/8414181
[06:48:23] <olsonjeffery> thanks
[06:48:59] <olsonjeffery> (please don't link on reddit, will be deleting the gist shortly)
[06:49:18] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[06:49:37] <loren> derek_c: Yes
[06:49:50] <loren> ChrisMorgan: geomyidae: Thanks, I'll have a look
[06:49:51] <ChrisMorgan> olsonjeffery: why "extern mod extra;" when you don't then use extra?
[06:50:34] <olsonjeffery> ChrisMorgan: ack you're right.. an earlier version also shoehorned in some extra::seralize goodness, which i then cut.
[06:50:36] *** Joins: rgawdzik (chatzilla@moz-F1D42E40.net.uwaterloo.ca)
[06:50:39] <olsonjeffery> i should remove that, along with that graf. thanks!
[06:51:27] <ChrisMorgan> 65792?
[06:51:32] <derek_c> loren: yeah, the link given by geomyidae can work around this, but not very cleanly
[06:51:41] *** Joins: victorporof (victorporo@416E2802.271BFD43.9B1E38F4.IP)
[06:51:51] <olsonjeffery> ChrisMorgan: 64 * 1028
[06:52:03] <olsonjeffery> a common const for 64K
[06:52:05] <ChrisMorgan> olsonjeffery: and why 1028 rather than 1024?
[06:52:15] <olsonjeffery> heh, you're right. i suck.
[06:52:23] * ChrisMorgan 64K = 65536, probably better written 0x10000
[06:52:24] * ChrisMorgan g2g
[06:52:32] <olsonjeffery> yes.
[06:52:38] <olsonjeffery> <-- wrong
[06:53:05] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[06:53:11] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[06:54:07] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[06:55:26] <olsonjeffery> this is why feedback is valuable.
[06:56:38] *** Quits: matthewbot (user@moz-C6814817.ga.at.cox.net) (Client exited)
[06:56:51] *** Quits: rgawdzik (chatzilla@moz-F1D42E40.net.uwaterloo.ca) (Ping timeout)
[06:56:52] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[06:56:59] <loren> Hmmm, hopefully we end up with something similar to go's select statement in the future. Thanks for your help guys!
[06:57:18] *** Joins: dbaupp (Thunderbir@moz-6002BAEA.lns20.syd6.internode.on.net)
[06:57:51] <olsonjeffery> dbaupp: ping?
[06:58:39] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[06:59:40] <dbaupp> olsonjeffery: pong
[06:59:59] <olsonjeffery> dbaupp: care to provide some feedback on this? https://gist.github.com/olsonjeffery/8414181
[07:00:06] * dbaupp looks
[07:00:24] *** Quits: acrichto (acrichto@moz-B63D64BD.res.cmu.edu) (Ping timeout)
[07:00:26] *** Joins: mouse (mouse@moz-45757DCA.dhcp.yndx.net)
[07:00:37] <dbaupp> olsonjeffery: s/it's IO/its IO/ in the first paragraph
[07:01:22] *** Joins: acrichto (acrichto@moz-B63D64BD.res.cmu.edu)
[07:01:22] *** ChanServ sets mode: +o acrichto
[07:01:49] <dbaupp> olsonjeffery: "appraising" with two p's
[07:03:07] <dbaupp> olsonjeffery: I think Path in is scope by default, and conventionally we import File as `std::io::File` (although this is functionally identical to ...::fs::File`)
[07:03:10] *** Quits: mouse (mouse@moz-45757DCA.dhcp.yndx.net) (Ping timeout)
[07:03:35] <dbaupp> (by conventionally I mean I normally do and I think others do too, but I'm not 100% sure)
[07:04:49] <dbaupp> olsonjeffery: .mut_slice_from(0) should be unnecessary... (if it's not, then as_mut_slice() is more appropriate, I think. (assuming I'm not imagining as_mut_slice))
[07:05:55] <olsonjeffery> yeah, it coerces to a slice, indeed.
[07:05:57] <dbaupp> olsonjeffery: you can also explicit drop something with `drop(hw_file)` fwiw (but scopes work perfectly well too, I find {} scopes are more obvious to look at too.)
[07:06:12] <dbaupp> looks pretty good :)
[07:06:40] <olsonjeffery> thank you for the feedback. very useful.
[07:06:40] *** Quits: skade (skade@moz-B73EE4D5.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:06:40] <dbaupp> If/when https://github.com/mozilla/rust/pull/11501 lands, you could link http://static.rust-lang.org/doc/master/guide-runtime.html in your runtimes discussion
[07:06:57] * olsonjeffery nods
[07:07:40] <dbaupp> out of interest, is this a blog post you're writing?
[07:08:02] <olsonjeffery> yes. that gist isn't the final home, of course ;P
[07:09:45] *** Joins: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP)
[07:11:03] <dbaupp> olsonjeffery: ah, but gist is the best blogging platform eva! :P
[07:11:11] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[07:11:23] <dbaupp> anyway, gtg for a while
[07:11:30] <olsonjeffery> ty for the feedback, again
[07:12:48] *** Joins: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP)
[07:13:21] <Yurume> dbaupp: interesting, rustdoc in static.rust-lang.org seems to fail to search for "drop".
[07:13:49] <Yurume> (I was unsure whether there is a drop function defined in std and discovered that)
[07:14:50] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[07:15:21] <bvssvni> how do I write an owned vec with mutable content as argument?
[07:15:31] <Yurume> as an argument?
[07:15:37] <bvssvni> Yurume: yes
[07:15:43] <Yurume> what do you mean by an argument?
[07:15:43] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:15:52] <Yurume> items or elements?
[07:15:57] <bvssvni> argument to a function
[07:16:03] <Yurume> ah well
[07:16:05] <Yurume> rusti:
[07:16:06] <Yurume> ...
[07:16:33] <Yurume> fn foo(mut f: ~[int]) -> ~[int] { f.push(42); f } foo(~[1,2,3])
[07:16:39] <geomyidae> rusti is on vacation
[07:17:07] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[07:17:15] <bvssvni> strange
[07:17:24] <bvssvni> I try to pass the ownership to a proc
[07:17:32] <bvssvni> wait a minute
[07:17:41] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: Textual IRC Client: www.textualapp.com)
[07:17:49] <strcat> did cmr's PR land?
[07:17:54] <Yurume> bvssvni: owned vectors do not have the ownership themselves.
[07:18:00] <strcat> I could just build it locally
[07:18:18] <Yurume> the ownership of owned vectors (and owned pointers in general) comes from its stored variable or field (i.e. "slots").
[07:18:51] <Yurume> since arguments are slots as well, if you mark arguments `mut`, the stored owned vectors should be mutable.
[07:18:52] <bvssvni> https://gist.github.com/bvssvni/8414419
[07:18:53] *** Joins: mouse (mouse@moz-373942D2.dhcp.yndx.net)
[07:19:16] <Yurume> (note that this is nothing to do with the exposed interface: it is identical to fn foo(f:~[int]) -> ~[int]; outside)
[07:19:31] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[07:19:45] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[07:19:46] *** Quits: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net) (Quit: Sharp)
[07:20:15] <Yurume> bvssvni: hmm, does adding `let mut a = a;` in the first line of proc work?
[07:20:32] <eddyb> hmm, how does this sound? https://github.com/mozilla/rust/issues/11196#issuecomment-32243505
[07:20:56] <bvssvni> Yurume: I get 'use of partially moved value'
[07:21:08] <Yurume> :o
[07:22:18] *** Joins: Ferreus (ferreus@moz-7F9E813A.dip0.t-ipconnect.de)
[07:22:22] <eddyb> fn map<A, B, C>(f: |A| -> B, g: |B| -> C) -> |A| -> C {|a| g(f(a))} would just work
[07:23:02] <eddyb> if that ain't beautiful, I don't know what is
[07:23:26] *** Quits: FreeFull (freefull@moz-7CCB1CA8.as13285.net) (Quit: )
[07:23:48] <eddyb> (ofc Haskell is like map f g = g f >_>)
[07:23:58] <bvssvni> Yurume: I am using 0.9-pre, so I will try update
[07:24:04] <dv> map f (x:xs) = f x : map f xs
[07:24:31] <eddyb> dv: that's a list map, not a... well, my map is a misnomer
[07:24:31] *** Joins: egghead (egghead@7851DE85.C82F6435.20F09BA6.IP)
[07:24:36] <eddyb> compose, maybe?
[07:25:15] *** Quits: darthdeus (darthdeus@62EE3073.3B96A244.4E88690D.IP) (Ping timeout)
[07:25:15] <dv> ah, that's just (f . g) x = f (g x)
[07:25:16] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[07:26:05] <Yurume> bvssvni: I believe that's because Rust's flow analysis is limited and the code touches some edge case.
[07:26:10] <Yurume> well
[07:26:55] *** Joins: darthdeus (darthdeus@62EE3073.3B96A244.4E88690D.IP)
[07:26:57] <Yurume> I think you'd better move `a` to construct a new vector (and not replacing `a` in-place)
[07:27:16] <Yurume> since this confuses the analyzer
[07:27:19] *** Quits: pnathan (Adium@moz-A8921E45.tukw.qwest.net) (Quit: Leaving.)
[07:27:21] <Yurume> otherwise it confuses*
[07:27:30] <Yurume> in this scheme:
[07:28:05] <Yurume> proc(env: &mut Env) { let mut b = ~[]; for ex in a.move_iter() { let (_, exn) = (ex.run)(env); b.push(exn); } ((), exec(b)) }
[07:28:08] <Yurume> will work.
[07:28:31] <Yurume> (I have successfully compiled the code, though I don't know whether this is intended or not)
[07:28:55] <eddyb> impl<A, B, C, F: |A| -> B, G: |B| -> C, FG: |A| -> C> Mul<G, FG> for F {fn mul(&self, g: &G) -> FG {|a| g(self(a))}}
[07:29:06] *** Quits: bvssvni (Mibbit@moz-CBD76C21.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[07:29:07] <Yurume> eddyb: is that a HKT?
[07:29:11] <eddyb> Yurume: nope
[07:29:32] <Yurume> or is |A| -> B a shorthand for Fn traits or sorta?
[07:29:46] <eddyb> (|x| x + 1) * (|x| x * x) => |x| (x+1)*(x+1)
[07:29:50] <eddyb> Yurume: yeah
[07:31:26] <Yurume> I think I've seen the same syntax in the HKT discussion ;)
[07:35:47] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[07:36:59] *** Quits: blaenk (blaenk@moz-C270A5EA.lsanca.dsl-w.verizon.net) (Quit: Leaving)
[07:37:32] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[07:37:43] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[07:37:50] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[07:37:53] *** Joins: bheylin (brianheyli@837B6557.E7BADBF1.B0C2132F.IP)
[07:40:48] <eddyb> and now that I've displayed my morning inspiration, I go back to implementing that crazy thing
[07:41:27] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[07:41:37] *** Joins: lassej (lassej@moz-839695BF.dip0.t-ipconnect.de)
[07:43:39] *** Quits: lennart (lennart@moz-DE70D6F.stanford.edu) (Ping timeout)
[07:44:13] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[07:45:57] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Ping timeout)
[07:46:24] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[07:46:44] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[07:46:52] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Quit: Leaving...)
[07:51:15] *** Joins: yutongzhao (yutongzhao@moz-325F8282.hsd1.ca.comcast.net)
[07:52:23] *** Joins: gkostyanikov (gkostyanik@7F7FFBA0.A859D9FD.CA6E2165.IP)
[07:52:46] <dbaupp> Yurume: re rustdoc search + drop... it just fails on some inputs... it's a little weird. :(
[07:53:17] <Yurume> I tried to look at main.js and I don't know where to start! :S
[07:53:21] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[07:54:11] *** Quits: bheylin (brianheyli@837B6557.E7BADBF1.B0C2132F.IP) (Quit: bheylin)
[07:54:13] <dbaupp> Yurume: there's https://github.com/mozilla/rust/pull/11438 , but the title doesn't exactly suggest that it's fixing those bugs
[07:54:18] *** Quits: derek_c (derek@moz-C467C3E5.fwd.datafoundry.com) (Quit: Leaving)
[07:54:43] <dbaupp> "TypeError: myparent is undefined"
[07:54:46] <dbaupp> for a search for drop
[07:54:56] *** Quits: gkostyanikov (gkostyanik@7F7FFBA0.A859D9FD.CA6E2165.IP) (Ping timeout)
[07:55:05] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[07:55:55] <Yurume> hmm!
[07:56:54] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[07:57:25] <Yurume> d/g/l/m/n/o/p/q/x exhibits the problem. it is not limited to `drop`...
[07:57:31] <dbaupp> breaking on that except doesn't exactly tell me what's gone wrong
[07:57:38] <dbaupp> oh? anything starting with those letters?
[07:57:48] <dbaupp> maybe we're just missing that completely from the index
[07:57:56] <Yurume> dbaupp: yeah!
[07:58:05] <Yurume> no, `drop` certainly exists in the index
[07:58:32] *** Joins: gkostyanikov (gkostyanik@E263F47A.EF9FA30D.CA6E2165.IP)
[07:58:36] <dbaupp> hm, there's this weird allPaths object mapping numbers to somethings
[07:58:51] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[07:59:32] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[08:00:32] * dbaupp prefers Rust...
[08:01:38] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[08:02:34] <Gracenotes> I found a compiler error in some library off of git: use of undeclared type name `c_void`
[08:02:40] <Gracenotes> is there a way to fix this with, say, sed?
[08:03:01] <dbaupp> Gracenotes: s/c_void/::std::libc::c_void/
[08:03:15] <dbaupp> or put `use std::libc::c_void` in the files with that error
[08:03:28] <Gracenotes> moved out of the prelude, then
[08:04:16] <dbaupp> maybe
[08:04:23] <Gracenotes> oh, hm, now there's 'single-field tuple-structs can no longer be dereferenced'
[08:04:57] <dbaupp> Ah
[08:05:29] <dbaupp> if `struct Foo(uint);`, then previously one could retrieve the `uint` from `x: Foo` via *x
[08:05:33] <Gracenotes> it's a newtype of c_int that tries to be a pointer
[08:05:38] <dbaupp> now it's only pattern matching
[08:05:50] <dbaupp> but, really, the easiest way is to just use a full struct with a named field
[08:06:06] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Client exited)
[08:06:15] <dbaupp> because `x.field` is nicer than `let Foo(whatever) = x; whatever`
[08:06:30] *** Joins: int3_ (int3_@moz-C91C1D9.subnet-207.amherst.edu)
[08:06:51] <strcat> dbaupp: why even have tuple structs then? ;p
[08:07:01] <dbaupp> strcat: my thoughts too
[08:07:07] <Yurume> dbaupp: I suspect that rustdoc cache went wrong somehow and two indices (searchIndex and allPaths) are inconsistent to each other
[08:07:15] <Yurume> I don't know why
[08:07:15] <dbaupp> Yurume: sounds very reasonable
[08:07:19] *** Quits: yutongzhao (yutongzhao@moz-325F8282.hsd1.ca.comcast.net) (Quit: yutongzhao)
[08:07:46] <strcat> dbaupp: well, we do use the equivalent in enums a lot
[08:08:02] <Yurume> in the case of `drop`, the problematic entry is as follows:
[08:08:13] *** Joins: Ms2ger (Ms2ger@AA55AE55.592AEF45.F15B0BB3.IP)
[08:08:14] <Yurume> {ty:"method",name:"drop",path:"std::logging",desc:"",parent:'183900'}
[08:08:16] <dbaupp> strcat: but enums can only be destructured via `match`ing, no matter the field style
[08:08:24] <Yurume> and id 183900 does not exist in allPaths
[08:08:25] <dbaupp> strcat: so it's not higher cost
[08:08:27] * dbaupp shrugs
[08:08:40] <dbaupp> I now never use tuple structs, fwiw.
[08:09:02] <dbaupp> I should probably go and replace the tuple structs i've used in std::rand with proper structs
[08:09:07] <strcat> I've never used a newtype/tuple struct
[08:09:14] <Gracenotes> whoa it compiles.
[08:09:19] <dbaupp> Gracenotes: \o/
[08:09:22] <strcat> tbh I've never used a type alias in my own code in rust
[08:09:37] <strcat> lack of being able to call static methods makes them pretty useless imo
[08:09:45] <strcat> since rust likes using static methods
[08:09:54] <dbaupp> I have, but only cause I got tired of writing some long nested iterator in type signatuer
[08:09:56] <dbaupp> s
[08:10:00] <Yurume> I have some aliases for very complex iterator types
[08:10:02] <Yurume> :)
[08:10:06] <Yurume> yeah,
[08:10:37] <strcat> Yurume: defining a struct would work too ;p
[08:11:00] *** Quits: lassej (lassej@moz-839695BF.dip0.t-ipconnect.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:11:01] <Yurume> heh
[08:11:18] <dbaupp> strcat: but then you have to write .inner everywhere
[08:11:38] <dbaupp> The risk of RSI is too great :P
[08:11:39] <strcat> dbaupp: well you impl Iterator for it
[08:11:56] * strcat shrugs
[08:11:57] <dbaupp> strcat: even worse for RSI!
[08:12:09] <strcat> it makes the error messages nicer
[08:12:14] <dbaupp> yeah
[08:12:15] <strcat> and the API docs nicer if it's public
[08:12:31] * dbaupp never writes libraries that people might actually want to use
[08:17:14] *** Quits: loren (loren@1F18520C.8C2A521C.405878F2.IP) (Quit: leaving)
[08:19:22] *** Quits: int3_ (int3_@moz-C91C1D9.subnet-207.amherst.edu) (Client exited)
[08:19:46] *** Joins: z0w0 (zack@moz-87AABEA0.lnse1.woo.bigpond.net.au)
[08:21:37] *** Quits: gkostyanikov (gkostyanik@E263F47A.EF9FA30D.CA6E2165.IP) (Ping timeout)
[08:22:41] *** Joins: autra_ (augustin@A14DAE84.7F753DD1.EE2CA32B.IP)
[08:23:40] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Quit: Leaving.)
[08:24:54] *** Joins: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP)
[08:24:54] *** Joins: gkostyanikov (gkostyanik@5FA94EEE.A859D9FD.CA6E2165.IP)
[08:25:50] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[08:26:06] *** Quits: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net) (Ping timeout)
[08:28:05] *** Joins: lenstr (lenstr@4BAE5C94.9636F313.7A27613B.IP)
[08:29:21] *** Joins: alonlevy (alon@18881233.66334A3F.AB64B967.IP)
[08:32:47] *** Joins: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net)
[08:36:08] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[08:36:39] *** flaper87|afk is now known as flaper87
[08:37:52] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[08:38:46] *** Joins: benjamin_ (benjamin@moz-8D104FD6.dip0.t-ipconnect.de)
[08:39:17] *** Quits: benjamin__ (benjamin@moz-CAB4ED9.dip0.t-ipconnect.de) (Ping timeout)
[08:39:29] *** Joins: gwty (gwtypc@C045AC61.3E0F208F.137C914F.IP)
[08:41:55] *** Joins: jackneill (jackneill@moz-8EF97071.pool.digikabel.hu)
[08:42:43] *** Joins: fabiand (fabiand@moz-7AA09989.adsl.alicedsl.de)
[08:43:02] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[08:48:01] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[08:49:25] *** Joins: igork (Adium@9C577557.7893D71C.6E0EE79F.IP)
[08:49:36] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[08:53:16] *** Joins: oberstet (quassel@moz-7EC8E4B7.dynamic.mnet-online.de)
[08:54:02] *** Quits: lenstr (lenstr@4BAE5C94.9636F313.7A27613B.IP) (Client exited)
[08:54:34] *** Joins: lenstr (lenstr@4BAE5C94.9636F313.7A27613B.IP)
[08:56:17] *** Quits: lenstr (lenstr@4BAE5C94.9636F313.7A27613B.IP) (Ping timeout)
[08:57:18] *** Quits: alonlevy (alon@18881233.66334A3F.AB64B967.IP) (Ping timeout)
[08:59:20] *** Joins: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP)
[09:01:43] *** Joins: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP)
[09:02:15] *** Quits: darthdeus (darthdeus@62EE3073.3B96A244.4E88690D.IP) (Connection reset by peer)
[09:03:24] *** Joins: mw (mw@moz-4638BB18.adsl.highway.telekom.at)
[09:03:27] <geomyidae> task '<main>' failed at 'Unhandled condition: io_error: io::IoError{kind: OtherIoError, desc: "no buffer space available", detail: None}', /build/rust-git/src/rust/src/libstd/condition.rs:139
[09:05:48] *** Quits: q66 (q66@moz-30F47C55.range86-151.btcentralplus.com) (Quit: Leaving)
[09:05:52] <flaper87> dbaupp: hey, what do you think is the best way to have a single implementation for this pow method? https://github.com/mozilla/rust/pull/11503#issuecomment-32232728
[09:06:06] <flaper87> dbaupp: sorry but I still have a lot to learn about rust
[09:06:10] <flaper87> :)
[09:08:25] *** Joins: sigma (sigma@moz-9EAC972C.range86-184.btcentralplus.com)
[09:09:35] *** Quits: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[09:09:40] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[09:16:27] <flaper87> strcat: ^
[09:16:38] <flaper87> or anyone, actually
[09:16:44] <flaper87> :)
[09:16:47] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[09:21:25] *** Joins: heftig (heftig@moz-D746319F.unitymedia.biz)
[09:21:47] *** Joins: alonlevy (alon@moz-F53E4C49.redhat.com)
[09:24:04] *** Quits: gwty (gwtypc@C045AC61.3E0F208F.137C914F.IP) (Connection reset by peer)
[09:26:43] *** Joins: gwty (gwtypc@3911E085.895DD04D.E6FB80A5.IP)
[09:29:11] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[09:30:55] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[09:32:33] *** Quits: sigma (sigma@moz-9EAC972C.range86-184.btcentralplus.com) (Client exited)
[09:32:56] *** Quits: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net) (Ping timeout)
[09:35:04] *** Joins: sigma (sigma@moz-9EAC972C.range86-184.btcentralplus.com)
[09:36:19] *** Joins: twi (Adium@moz-A044A5B4.lnse5.win.bigpond.net.au)
[09:36:22] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[09:36:54] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Quit: csherratt)
[09:38:03] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[09:40:58] *** Quits: gwty (gwtypc@3911E085.895DD04D.E6FB80A5.IP) (Client exited)
[09:41:09] *** Joins: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com)
[09:41:19] *** Quits: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net) (Quit: WeeChat 0.4.2)
[09:41:40] *** Joins: gwty (gwtypc@3911E085.895DD04D.E6FB80A5.IP)
[09:43:50] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[09:43:54] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[09:44:01] *** Joins: rca (rcatolino@moz-1D2195F3.adsl.proxad.net)
[09:44:02] *** Joins: samx (sami@moz-D9F3E0AE.pp.htv.fi)
[09:45:15] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[09:46:15] *** Quits: samx (sami@moz-D9F3E0AE.pp.htv.fi) (Quit: This computer has gone to sleep)
[09:46:20] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[09:52:57] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[09:55:49] *** Quits: z0w0 (zack@moz-87AABEA0.lnse1.woo.bigpond.net.au) (Quit: z0w0)
[09:59:42] *** Joins: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP)
[09:59:53] *** Joins: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp)
[09:59:57] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[10:00:15] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Input/output error)
[10:00:17] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[10:00:49] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[10:01:35] *** Quits: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[10:05:10] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[10:05:49] *** Joins: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP)
[10:06:30] *** Quits: acrichto (acrichto@moz-B63D64BD.res.cmu.edu) (Ping timeout)
[10:06:51] *** flaper87 is now known as flaper87|afk
[10:07:42] <dbaupp> flaper87|afk: have it as a default method on Mul
[10:08:14] <dbaupp> flaper87|afk: http://static.rust-lang.org/doc/master/tutorial.html#default-method-implementations-in-trait-definitions
[10:11:53] *** Joins: acrichto (acrichto@moz-B63D64BD.res.cmu.edu)
[10:11:53] *** ChanServ sets mode: +o acrichto
[10:13:54] *** flaper87|afk is now known as flaper87
[10:14:19] <flaper87> dbaupp: awesome, thanks!
[10:14:41] *** Quits: StarLight (StarLight@moz-6F88DE29.dynamic.avangarddsl.ru) (Ping timeout)
[10:15:17] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[10:16:56] *** Quits: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[10:18:59] *** Joins: StarLight (StarLight@moz-D67E58A4.dynamic.avangarddsl.ru)
[10:19:05] *** Joins: potato-cake (Mibbit@moz-A082F561.adsl.xtra.co.nz)
[10:19:31] *** Quits: potato-cake (Mibbit@moz-A082F561.adsl.xtra.co.nz) (Quit: http://www.mibbit.com ajax IRC Client)
[10:20:19] <flaper87> dbaupp: btw, I wish I'd have known that yday :D
[10:21:02] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[10:21:39] *** Quits: gkostyanikov (gkostyanik@5FA94EEE.A859D9FD.CA6E2165.IP) (Ping timeout)
[10:22:57] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[10:23:18] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[10:25:17] *** Joins: gkostyanikov (gkostyanik@5FA94EEE.A859D9FD.CA6E2165.IP)
[10:28:01] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[10:31:36] *** Joins: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net)
[10:32:38] *** Joins: fyolnish (fyolnish@moz-31BED189.uqwimax.jp)
[10:33:28] *** Quits: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net) (Ping timeout)
[10:36:42] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[10:37:19] *** Joins: killerswan (kevin.cant@E9A7755D.F485DE6D.5604FD67.IP)
[10:38:30] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[10:47:04] *** Joins: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se)
[10:48:53] *** Joins: bogomips (dfukdev@EC7448F1.247D1A12.3F821976.IP)
[10:49:12] <dbaupp> flaper87: well, you know it today :)
[10:49:20] <flaper87> :)
[10:49:33] <flaper87> like I said, still lot of things to learn about Rust :P
[10:49:48] *** Quits: gkostyanikov (gkostyanik@5FA94EEE.A859D9FD.CA6E2165.IP) (Ping timeout)
[10:50:08] <Zr40> when I compile a trivial Rust program (fn main() {}), the resulting binary is 2.6 MB. Should I do anything about that if I release a build of a real program?
[10:52:27] <kimundi> Zr40: That because libstd is statically linked into it, I think - there are ways to get around that: making it dynamically linked for example
[10:52:47] <kimundi> or not compiling with libstd at all, for a empty main function
[10:53:09] *** Joins: gkostyanikov (gkostyanik@81AEED0E.2AEE264E.CA6E2165.IP)
[10:53:10] <kimundi> doing link time optimizations will propably strip everything unused too
[10:53:35] <dbaupp> kimundi: not quite everything
[10:53:38] <dbaupp> unfortunately
[10:53:49] <kimundi> what remains?
[10:54:15] *** Quits: Jesin (Jesin@moz-A43618DF.res.lehigh.edu) (Quit: Leaving)
[10:54:32] *** Quits: twi (Adium@moz-A044A5B4.lnse5.win.bigpond.net.au) (Ping timeout)
[10:54:54] <dbaupp> the runtime-as-trait-object means that using any runtime at all will retain the whole thing
[10:54:55] <dbaupp> aiui
[10:55:15] <dbaupp> e.g. including just starting the main function
[10:55:28] <strcat> kimundi: the only workaround is not using libstd ;p
[10:55:31] <kimundi> ah, is the whole thing abstracted away behind a trait object these days?
[10:55:41] <dbaupp> kimundi: yep
[10:55:44] <strcat> yes, I/O, concurrency stuff, etc.
[10:56:01] *** Parts: mw (mw@moz-4638BB18.adsl.highway.telekom.at) ()
[10:56:04] <strcat> we can at least make trait objects generate better code though
[10:56:13] *** Joins: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au)
[10:56:14] <strcat> but it won't optimize out
[10:56:19] <strcat> as dead code
[10:58:06] *** Joins: bvssvni (Mibbit@moz-CBD76C21.bb.online.no)
[10:59:22] *** Joins: shilgapira (chatzilla@CC1D6EDB.FD9AA48F.F9582E85.IP)
[10:59:26] <Zr40> lto sounds like the way to go. How would I enable that?
[10:59:36] <strcat> Zr40: it won't really help with libstd
[10:59:38] *** Quits: gunther (Mibbit@moz-A06909E4.glbb.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[10:59:52] <strcat> -Z lto
[11:00:17] <strcat> if you avoid dynamic code selection, then it will optimize out all dead code across the whole program
[11:00:31] <strcat> but... there are a lot of chained traits and so on
[11:00:36] <strcat> trait *objects*
[11:02:13] *** Quits: killerswan (kevin.cant@E9A7755D.F485DE6D.5604FD67.IP) (Ping timeout)
[11:02:25] <Zr40> strcat: that actually fails for me, with ar reporting 'Permission denied' on libstd-3e5aeb83-0.9.rlib
[11:02:50] <strcat> well you'd had to have done something strange with permissions for that ;p
[11:02:54] <strcat> did you run something as root?
[11:03:36] <Zr40> not me, but perhaps homebrew did that
[11:03:54] * strcat shrugs
[11:04:13] <strcat> they broke static linking and lto via permissions then ;p
[11:04:19] <strcat> Zr40: well I guess you need to chmod it then
[11:04:53] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Client exited)
[11:06:10] <Zr40> the temporary directory reported is different each time
[11:08:06] *** nical is now known as nical|lunch
[11:09:06] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Input/output error)
[11:09:56] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[11:10:36] <Zr40> chmod 644 /usr/local/Cellar/rust/0.9/lib/rustlib/x86_64-apple-darwin/lib/*.rlib solves that. It was 444 before
[11:13:07] <Zr40> but I suppose 444 is more correct, and the compiler or linker could assign writable permissions when it copies the libs to the temporary dir
[11:16:21] *** flaper87 is now known as flaper87|afk
[11:16:28] *** Joins: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com)
[11:26:27] *** flaper87|afk is now known as flaper87
[11:31:32] *** Quits: benjamin_ (benjamin@moz-8D104FD6.dip0.t-ipconnect.de) (Ping timeout)
[11:32:24] *** Joins: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net)
[11:32:45] *** Quits: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au) (Quit: Leaving.)
[11:34:04] *** Joins: ofeldt- (ofeldt@moz-ABB0DE28.dip0.t-ipconnect.de)
[11:34:11] *** Quits: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net) (Ping timeout)
[11:34:41] *** Quits: dbaupp (Thunderbir@moz-6002BAEA.lns20.syd6.internode.on.net) (Quit: dbaupp)
[11:34:49] *** Joins: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au)
[11:35:02] *** Quits: ofeldt (ofeldt@moz-99D5C8E8.dip0.t-ipconnect.de) (Ping timeout)
[11:37:20] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[11:38:04] *** Joins: dbaupp (Thunderbir@moz-6002BAEA.lns20.syd6.internode.on.net)
[11:38:55] *** Joins: samx (sami@moz-D9F3E0AE.pp.htv.fi)
[11:39:00] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[11:39:41] *** Quits: samx (sami@moz-D9F3E0AE.pp.htv.fi) (Quit: This computer has gone to sleep)
[11:44:48] *** Quits: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au) (Quit: Leaving.)
[11:45:09] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[11:45:10] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[11:45:43] *** Joins: pzol (pzol@moz-7F898E32.nat.umts.dynamic.t-mobile.pl)
[11:45:58] *** Joins: kris (kris@moz-147EE6DF.diku.dk)
[11:46:00] *** Quits: shilgapira (chatzilla@CC1D6EDB.FD9AA48F.F9582E85.IP) (Ping timeout)
[11:46:18] *** Joins: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net)
[11:46:34] *** Joins: shilgapira (chatzilla@CC1D6EDB.FD9AA48F.F9582E85.IP)
[11:47:34] *** Quits: pzol (pzol@moz-7F898E32.nat.umts.dynamic.t-mobile.pl) (Ping timeout)
[11:47:47] *** Quits: kris (kris@moz-147EE6DF.diku.dk) (Ping timeout)
[11:48:09] *** Quits: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net) (Ping timeout)
[11:48:17] *** Joins: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au)
[11:49:50] <fmtq> is it possible to define a method for an index operator on an arbitrary implementation?
[11:50:11] <dbaupp> fmtq: i.e. some_nonvector[x]?
[11:50:16] <fmtq> yes
[11:50:18] <fmtq> like that 
[11:50:21] <dbaupp> there's the Index trait
[11:50:25] <fmtq> magic 
[11:50:28] <dbaupp> but it's not good enough yet
[11:50:31] <fmtq> aw
[11:50:33] <fmtq> not magic yet
[11:50:49] <dbaupp> well, it gives you the sugar
[11:50:56] <dbaupp> but it needs to be replaced: https://github.com/mozilla/rust/issues/6515
[11:51:07] <fmtq> is there any other documentation on that trait?
[11:51:35] <dbaupp> I guess so
[11:51:44] <dbaupp> searching for `Index` in the docs should turn it up
[11:52:59] *** Quits: rca (rcatolino@moz-1D2195F3.adsl.proxad.net) (Ping timeout)
[11:55:58] <fmtq> derp
[11:56:05] <fmtq> I was looking in the manual
[11:56:23] <dbaupp> whoops :)
[11:56:35] <fmtq> which module 
[11:57:50] <dbaupp> fmtq: http://static.rust-lang.org/doc/master/std/ops/trait.Index.html
[11:58:05] <dbaupp> fmtq: (do you realise there is a search bar at the top of the docs?)
[11:58:19] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[11:58:21] <fmtq> OH 
[11:58:24] <dbaupp> hm, that's a pretty weird example
[11:58:31] <fmtq> why is it in bold 
[11:58:37] <fmtq> my eyes didn't see it at all 
[11:58:40] <dbaupp> it'd be clearer if it didn't use Foo for everything
[11:58:41] <fmtq> it just looks like web 0.9
[11:59:03] <dbaupp> yeah, it does blend in and look like generic header stuff
[11:59:11] <fmtq> dbaupp: y = x + 1; solve for 1
[11:59:13] <fmtq> haha
[11:59:46] *** Joins: kris (kris@moz-47812C15.static.bcbnet.dk)
[12:05:39] *** Quits: Ferreus (ferreus@moz-7F9E813A.dip0.t-ipconnect.de) (Ping timeout)
[12:06:21] *** Joins: phaer (user@moz-D051FE96.adsl.highway.telekom.at)
[12:07:59] <phaer> Hi, i just started to look into rust (0.9) and tried to build rust-http (0.9-compatible branch) but it seems there's no Write in std::io anymore. Is this a problem with my installation?
[12:08:02] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[12:09:33] *** Joins: phaer` (user@moz-F5ABA33A.adsl.highway.telekom.at)
[12:10:45] *** Quits: phaer (user@moz-D051FE96.adsl.highway.telekom.at) (Ping timeout)
[12:11:03] *** phaer` is now known as phaer
[12:11:20] *** Joins: rca (rcatolino@moz-1D2195F3.adsl.proxad.net)
[12:11:23] *** Joins: nkoep (nik@moz-C871FE27.pool.mediaways.net)
[12:11:36] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[12:12:29] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[12:13:41] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[12:15:45] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Ping timeout)
[12:17:01] *** Joins: Earnestly (earnest@moz-E86D50FA.dyn.plus.net)
[12:19:34] *** Joins: Ferreus (ferreus@moz-1D830DAE.dip0.t-ipconnect.de)
[12:22:34] *** Joins: blinky (Mibbit@moz-A06909E4.glbb.ne.jp)
[12:22:56] <blinky> Does rust have something akin to c++ template specialization?
[12:23:54] <kimundi> blinky: Not at the moment
[12:25:00] *** Quits: KindOne (KindOne@moz-E60622A1.dynamic.ip.windstream.net) (Input/output error)
[12:25:33] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[12:25:36] *** Joins: KindOne (KindOne@moz-E60622A1.dynamic.ip.windstream.net)
[12:25:54] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[12:26:17] <dbaupp> phaer: is Write a typo for Writer?
[12:26:34] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[12:26:40] *** Joins: ski (ski@moz-E5796727.student.chalmers.se)
[12:26:42] <kimundi> dbaupp: Just checked the same - there is both a trait Writer and a enum variant Write pulic in that module in tag 0.9
[12:26:57] *** Quits: shilgapira (chatzilla@CC1D6EDB.FD9AA48F.F9582E85.IP) (Ping timeout)
[12:27:06] *** nical|lunch is now known as nical
[12:27:40] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[12:31:35] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[12:32:31] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[12:32:54] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[12:33:37] *** Joins: vmx (vmx@moz-5D89B292.pools.arcor-ip.net)
[12:33:54] *** Quits: gwty (gwtypc@3911E085.895DD04D.E6FB80A5.IP) (Ping timeout)
[12:34:27] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[12:35:18] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[12:35:53] *** Joins: gwty (gwtypc@C24C93D9.918BC1CC.137C914F.IP)
[12:36:39] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[12:37:02] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[12:38:06] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[12:38:26] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[12:39:47] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[12:40:22] *** Quits: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP) (Client exited)
[12:41:51] *** Quits: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au) (Quit: Leaving.)
[12:42:14] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[12:42:21] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[12:42:43] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[12:44:19] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[12:44:48] *** kimundi is now known as zz_kimundi
[12:46:51] *** Quits: rca (rcatolino@moz-1D2195F3.adsl.proxad.net) (Ping timeout)
[12:47:06] *** Joins: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net)
[12:48:55] *** Quits: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net) (Ping timeout)
[12:52:08] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[12:53:41] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[12:54:35] *** Joins: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu)
[12:54:41] *** Joins: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net)
[12:56:20] *** Quits: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net) (Quit: Sharp)
[12:57:23] *** Joins: rca (rcatolino@moz-1D2195F3.adsl.proxad.net)
[12:58:04] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[12:59:21] *** Quits: blinky (Mibbit@moz-A06909E4.glbb.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[12:59:44] *** Joins: int3_ (int3_@moz-CE4DC75E.singnet.com.sg)
[13:00:47] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[13:01:33] *** Quits: int3_ (int3_@moz-CE4DC75E.singnet.com.sg) (Ping timeout)
[13:01:58] *** Joins: benjamin_ (benjamin@moz-8D104FD6.dip0.t-ipconnect.de)
[13:04:59] *** Joins: nical (Nicolas@87C1F78E.1DE10CA8.D8E68FF6.IP)
[13:07:04] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Connection reset by peer)
[13:07:33] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[13:10:47] *** Joins: int3_ (int3_@moz-CE4DC75E.singnet.com.sg)
[13:11:26] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[13:11:28] *** Joins: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au)
[13:12:24] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[13:13:13] *** Quits: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au) (Ping timeout)
[13:13:44] *** Quits: tristram (tris@moz-76E1F1DB.lns20.syd6.internode.on.net) (Ping timeout)
[13:14:15] *** Joins: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au)
[13:15:57] *** Quits: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au) (Ping timeout)
[13:21:26] <bstrie> do we still support freebsd?
[13:21:33] <bstrie> both 32 and 64-bits?
[13:22:09] <dbaupp> bstrie: one of the build bots is running a bsd
[13:22:19] <bstrie> curious which arch
[13:22:43] <dbaupp> x86_64-unknown-freebsd
[13:22:47] <dbaupp> according to http://buildbot.rust-lang.org/builders/auto-bsd-64-opt/builds/3327/steps/configure/logs/stdio
[13:23:22] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Input/output error)
[13:23:23] <bstrie> ok
[13:23:39] <bstrie> I ask because someone on the other channel is having a hard time building on 32-bit freebsd
[13:23:49] <bstrie> so we should keep in mind that we're broken there
[13:25:27] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[13:25:48] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[13:26:03] *** Joins: rgawdzik (chatzilla@moz-F91A93AF.net.uwaterloo.ca)
[13:26:34] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[13:26:40] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Ping timeout)
[13:26:41] <rgawdzik> I hope I am right: but if I change the src, you don't have to make/make rust/etc right? There is a faster way to build?
[13:27:28] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[13:27:29] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[13:28:29] <rgawdzik> *remove but
[13:29:24] <bstrie> rgawdzik: you gotta make :(
[13:29:29] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[13:29:51] <bstrie> but if all you care about is making sure that your code passes typechecking, you can just ^C once it gets past the first stage
[13:30:31] <TheHydroImpulse> bstrie Does anything get cached between builds? For stuff that doesn't change, or does everything have to be rebuilt?
[13:31:04] <bstrie> well llvm doesn't need to get rebuilt
[13:32:14] <bstrie> but because we're a bootstrapping compiler, you can't really cache much
[13:32:50] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[13:33:16] <Tobba> I love when code works on the first try
[13:33:21] <Tobba> specially when its hilariously overcomplicated
[13:33:22] *** Quits: KindOne (KindOne@moz-E60622A1.dynamic.ip.windstream.net) (Ping timeout)
[13:33:35] <Tobba> eddyb was right through, the tree sturcture thing was a really shite idea for the kernel allocator, gonna use it for applications only
[13:33:45] <TheHydroImpulse> bstrie yeah, makes sense.
[13:34:40] <rgawdzik> bstrie: man, it takes 20-30 minutes for a make to complete on a good computer :( Did anyone here dev on a supercomputer with rust? I have access to a 64-core. However the last time I did make -j64 (other projects), it did get hanged at some processes which slowed it down.
[13:36:13] <TheHydroImpulse> bstrie Does the recompilation effect the runtime, too? For example, does the compiler bundle the runtime, or is that separate?
[13:36:21] *** zz_kimundi is now known as kimundi
[13:36:37] <bstrie> rgawdzik: the rust compiler is highly linear, the vast majority of our time is spent in llvm. parallelizing has no effect
[13:37:04] <eddyb> we have a problem...
[13:37:08] <bstrie> eddyb: ?
[13:37:36] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[13:37:37] *** Joins: KindOne (KindOne@moz-E60622A1.dynamic.ip.windstream.net)
[13:37:51] <eddyb> now that the env param is gone, to coerce a bare fn to a closure, you need a wrapper as the function, and then you can pass the bare fn as the env of the closure
[13:38:03] *** Joins: bachm (Mibbit@moz-4A19983C.ip227.fastwebnet.it)
[13:38:10] *** Joins: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au)
[13:38:17] <eddyb> but procs... they have to free their env, which is pointing in code memory, at a function
[13:38:22] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[13:38:47] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[13:39:07] <huhlig> stupid question. What is the suggested build manager for rust?
[13:39:18] <Tobba> I thought procs were unrelated to fns?
[13:39:25] <huhlig> does rust have its own or do you have to coax cmake/make into doing it
[13:39:33] <eddyb> I have to either deny bare fn -> proc, add more information on procs (like 'static on a closure, this is probably the hardest solution) or build a different wrapper for bare fn -> proc coercion
[13:39:44] <eddyb> Tobba: you can coerce a bare fn to a proc right now
[13:39:50] <Tobba> ah
[13:39:51] *** Quits: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au) (Ping timeout)
[13:39:53] <bstrie> huhlig: that's up in the air at this point, lots of people have their own solutions
[13:39:58] <eddyb> I'd rather just deny it, any objections?
[13:40:04] *** Quits: gwty (gwtypc@C24C93D9.918BC1CC.137C914F.IP) (Ping timeout)
[13:40:04] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[13:40:07] <bstrie> eddyb: is this part of the compiler?
[13:40:15] <huhlig> bstrie: thats about what I've seen
[13:40:26] <Tobba> cant you just inject an epilogue into each proc() definition that frees it
[13:40:37] *** Parts: kvanb (kvanb@moz-2C33D4E6.lnse3.lon.bigpond.net.au) ()
[13:40:43] <Tobba> I think I'm just missing the point
[13:40:54] <eddyb> Tobba: hmm, I like the way you think, but that's complicated as well
[13:41:20] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[13:41:21] <bstrie> eddyb: if this is changing the semantics of the compiler, you need to ask the devs
[13:41:26] <eddyb> and what do you do if you destroy a proc without calling it?
[13:41:30] <bstrie> maybe make a mailing list thread
[13:41:31] <Tobba> so when you pass a proc() it would pass a pointer to a structure in memory, which contains the function to call, call that with the structure as a parameter
[13:41:48] <Tobba> optional: give the structure a destructor to destroy it without calling
[13:41:59] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Input/output error)
[13:42:09] <eddyb> bstrie: it's about the semantics of the language, the "compiler" doesn't sound like the right word there
[13:42:12] <Tobba> would work without epilogue
[13:42:18] *** jorendorff_away is now known as jorendorff
[13:42:38] <bstrie> eddyb: well the difference between the language and the compiler is purely academic at this point :P
[13:42:40] <Tobba> set destructor to free for proc()s, generate the structure at compile time for coercing fn -> proc, with no destructor set
[13:42:44] <bstrie> no spec, no alternative implementations...
[13:43:12] <Tobba> hopefully that changes at some stage, at least the spec part
[13:43:27] <Tobba> alternative implementations wouldent really be useful
[13:43:46] <bstrie> eddyb: I don't quite understand why coercing a fn to a closure requires any futzing with environments at all...
[13:44:01] <bstrie> eddyb: isn't a closure just a pair of pointers, one to a fn and one to an env? wouldn't a bare-fn-closure just have an empty env?
[13:44:05] *** Parts: bogomips (dfukdev@EC7448F1.247D1A12.3F821976.IP) ()
[13:44:14] <eddyb> a bare fn doesn't have an env ptr
[13:44:14] <dbaupp> eddyb: would it be possible to just put the function pointer actually into the environment for the proc coercion?
[13:44:25] <bstrie> eddyb: right, but it's effectively empty. nothing to close over
[13:44:37] <dbaupp> bstrie: that changse the calling convention
[13:44:48] <dbaupp> so you need an actual wrapper fn->closure function
[13:44:59] *** Joins: killerswan (kevin.cant@E9A7755D.F485DE6D.5604FD67.IP)
[13:45:07] <eddyb> dbaupp: yes, that's the third option. hmm, the wrapper builder has the information, I'll try it
[13:45:27] <bstrie> dbaupp: ok, I'm confused. isn't the process just 1) take the bare fn pointer 2) stuff it into the usual closure structure 3) for the environment, just give it bupkis
[13:45:31] <dbaupp> and eddyb currently has it implemented by putting the bare function that is being wrapped as the environment pointer, and the wrapper just casts and calls
[13:45:41] <dbaupp> bstrie: (he's changing the representation)
[13:45:44] <eddyb> bstrie: the bare fn can't be called as a closure
[13:45:54] <eddyb> it was until now because of a very dirty hack
[13:45:58] <bstrie> oh, we're changing the representation of closures?
[13:46:02] <eddyb> bstrie: nope
[13:46:11] <bstrie> is there a bug explaining what's happening here?
[13:46:18] <eddyb> i.e. all functions had an env param, just because we might want to use them as closures
[13:46:28] <Tobba> I still think the destructor option is the most sane
[13:46:37] <bstrie> but surely that env param is just a null pointer or something
[13:46:39] <eddyb> Tobba: changing the repr of closures isn't an option
[13:46:46] <Tobba> well shit
[13:46:50] <eddyb> bstrie: it's an argument
[13:47:05] <eddyb> bstrie: you can't call a function with one more argument than it expects
[13:47:12] <bstrie> I don't understand what you mean, are you saying that all functions have an implicit extra argument?
[13:47:19] <eddyb> yes
[13:47:21] <bstrie> weird
[13:47:22] <Tobba> currently, yes
[13:47:23] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[13:47:27] <bstrie> I've never heard of this before
[13:47:29] <Tobba> I got fucked over by this... yesterday?
[13:47:46] <eddyb> bstrie: how else could they be called as closures :)?
[13:47:48] *** Joins: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net)
[13:47:52] <Tobba> extern "C" removes it but its still pointless and silly
[13:48:00] <Tobba> not to mention confusing
[13:48:09] <bstrie> eddyb: I don't see the semantic difference between a bare fn and a closure that doesn't close over anything
[13:48:12] <bstrie> either way the env is empty
[13:48:27] <dbaupp> bstrie: https://github.com/mozilla/rust/issues/10259
[13:48:35] <eddyb> bstrie: a closure is always called with the env as the first parameter
[13:48:39] <dbaupp> bstrie: semantically they're the same
[13:48:41] <eddyb> s/parameter/argument
[13:48:46] <dbaupp> bstrie: but the calling convention is different
[13:49:12] <eddyb> closure(...) => closure.fn(closure.env, ...)
[13:49:22] *** Quits: int3_ (int3_@moz-CE4DC75E.singnet.com.sg) (Connection reset by peer)
[13:49:32] <dbaupp> fn f(x: int) { ... } and let g = |x: int| { ... }; first is, in C, void f(int x), second is void g(Environment* env, int x)
[13:49:36] *** Quits: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net) (Ping timeout)
[13:49:39] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[13:49:43] *** Joins: int3_ (int3_@moz-CE4DC75E.singnet.com.sg)
[13:49:50] <dbaupp> (at least, that's what will happen after eddyb's changes)
[13:50:33] <eddyb> before, all bare fns had a dummy first argument to allow that to be valid. I removed it, and now coercing requires building a fn closure_wrapper(f: fn(...), ..args) {f(..args)} - which I did
[13:50:42] <johnsoft> is the env a "special" param?
[13:51:19] <johnsoft> like "this" in c++ on x86 is passed in ecx (iirc)
[13:51:22] <eddyb> it's just an argument
[13:51:28] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[13:51:33] <bstrie> eddyb: why not move the parameter to the end, as mentioned in that bug, rather than removing it?
[13:51:42] <eddyb> bstrie: that wouldn't solve anything
[13:51:57] <bstrie> "It seems like just putting the environment arg at the end would solve most of the problem" ~ brson
[13:51:58] <eddyb> it would break, no matter where you put it
[13:52:29] <eddyb> johnsoft: no, that's just a thiscall calling convention (used only on windows AFAIK)
[13:52:52] <eddyb> (it might break less often at the end, depending on the calling convention, it's still invalid)
[13:53:07] *** jorendorff is now known as jorendorff_away
[13:53:52] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[13:53:52] *** ChanServ sets mode: +o jdm
[13:53:54] <eddyb> not checking the result of malloc to help LLVM optimize out allocations (a suggestion of mine from yesterday) is safer than this
[13:55:56] <Tobba> in the malloc case, wouldent it just be better to wrap malloc in something that checks it
[13:56:12] <Tobba> the first thing that would happen is that the call to the "safe" malloc gets optimized out if its not used
[13:57:11] *** Joins: jhasse (jhass_000@moz-9885862.wlan.uni-bremen.de)
[13:57:32] <dbaupp> eddyb: how is that safer than this?
[13:57:43] <eddyb> that is deterministic behavior
[13:58:09] *** jorendorff_away is now known as jorendorff
[13:58:13] <eddyb> this is breaking calling convention, with a chance of nasal demons
[13:58:23] <dbaupp> how is possibly having null pointers in apparently non-null things deterministic?
[13:58:54] <dbaupp> (also, are we actually *breaking* the calling convention? I thought we were just passing more arguments.)
[13:59:00] *** jorendorff is now known as jorendorff_away
[14:01:31] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Quit: )
[14:01:42] *** Quits: flaper87 (flaper87@moz-107AD163.redhat.com) (Quit: Bye!)
[14:01:44] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Connection reset by peer)
[14:01:46] *** Joins: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt)
[14:01:54] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[14:03:02] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[14:03:25] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[14:03:55] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[14:03:59] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[14:04:00] <johnsoft> if a func expects 0 args and you give it 1 instead...
[14:04:53] <Tobba> is there any builtin macro that gives you the filename/line
[14:05:00] *** Quits: anasyrma (x@moz-DE175E38.caltech.edu) (Ping timeout)
[14:05:34] <bstrie> Tobba: line!() is one
[14:05:40] <bstrie> file!() might be another one
[14:05:43] <bstrie> try it out
[14:05:49] *** Joins: anasyrma (x@moz-DE175E38.caltech.edu)
[14:06:18] *** Quits: gkostyanikov (gkostyanik@81AEED0E.2AEE264E.CA6E2165.IP) (Quit: My iMac has gone to sleep. ZZZzzz…)
[14:07:49] <eddyb> dbaupp: if we were generating our own machine code *maybe* I would trust it to do the right thing. LLVM? nope
[14:08:32] *** Quits: int3_ (int3_@moz-CE4DC75E.singnet.com.sg) (Client exited)
[14:08:35] *** Joins: dd (chatzilla@F63B62E8.8AE8A320.7C0F3359.IP)
[14:09:01] <Tobba> goddamnit
[14:09:04] <Tobba> I cant get this macro to escape
[14:09:37] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[14:09:54] <eddyb> Tobba: order of module loading matters, I think
[14:09:58] *** Quits: fyolnish (fyolnish@moz-31BED189.uqwimax.jp) (Client exited)
[14:10:02] <Tobba> ah crap
[14:10:24] *** Joins: fyolnish (fyolnish@moz-31BED189.uqwimax.jp)
[14:10:33] <Tobba> yep
[14:10:36] <Tobba> now to sort all this crap out
[14:12:12] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[14:12:59] *** Quits: fyolnish (fyolnish@moz-31BED189.uqwimax.jp) (Ping timeout)
[14:13:26] <Tobba> what does eh_personality do
[14:13:29] <Tobba> I cant even find it in the repo
[14:13:38] <Tobba> oh wait, github search being github search
[14:13:55] *** Joins: omegaga_ (omegaga_@1AF10827.F09091A8.1348A864.IP)
[14:13:58] <Tobba> (though the code didnt really help)
[14:14:42] <Tobba> it seems to be something related to exceptions, in my case memory, and it calls GCC
[14:14:48] <Tobba> basicaly, shit
[14:16:27] *** Joins: gverilla (gverilla@moz-A576889C.versanet.de)
[14:16:34] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Ping timeout)
[14:16:47] *** Joins: int3_ (int3_@moz-CE4DC75E.singnet.com.sg)
[14:19:10] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[14:20:04] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[14:21:33] *** Joins: jyeo (Adium@moz-6F715C5D.singnet.com.sg)
[14:21:40] *** Joins: zargony (zargony@moz-93394FFC.versanet.de)
[14:22:53] <zargony> hi everybody
[14:23:10] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[14:24:03] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[14:24:26] <zargony> Did anybody else try to store a handle returned by select? I tried but failed because std::comm::select::Handle is private
[14:24:55] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[14:25:18] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[14:25:49] <bstrie> zargony: sometimes things are made private by accident, it might be an oversight. or it might be intentional!
[14:27:16] *** Joins: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net)
[14:29:55] *** Joins: flaper87|afk (flaper87@moz-107AD163.redhat.com)
[14:29:57] <zargony> bstrie: I'm not sure if this is intentional. The handle returned by add can be kept in a local variable but I can't store it in a struct since the type is private and I can't declare it in my struct
[14:30:53] *** Joins: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP)
[14:30:59] *** Quits: jyeo (Adium@moz-6F715C5D.singnet.com.sg) (Quit: Leaving.)
[14:33:04] *** flaper87|afk is now known as flaper87
[14:33:38] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[14:34:39] *** Joins: noel (noel@moz-DD794775.as13285.net)
[14:34:59] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[14:35:06] *** Quits: alonlevy (alon@moz-F53E4C49.redhat.com) (Ping timeout)
[14:36:42] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[14:38:34] *** Quits: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt) (Quit: Konversation terminated!)
[14:38:38] *** Joins: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt)
[14:39:03] *** Joins: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au)
[14:40:23] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[14:40:46] *** Quits: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au) (Ping timeout)
[14:44:11] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[14:46:38] *** Quits: omnus (omnus@moz-2E009EE2.stny.res.rr.com) (Client exited)
[14:47:14] *** Joins: elux (peter@B6F21F4B.1F20BC31.2170E5F.IP)
[14:48:37] *** Quits: jhasse (jhass_000@moz-9885862.wlan.uni-bremen.de) (Quit: Verlassend)
[14:48:38] *** Joins: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net)
[14:49:03] *** Joins: new_one (new_one@moz-3886E7BA.rice.edu)
[14:50:29] *** Quits: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net) (Ping timeout)
[14:50:36] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[14:50:57] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[14:51:45] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[14:52:37] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[14:53:21] *** Joins: mib_cntzch (Mibbit@4C20A0E9.56756B0F.A103AA52.IP)
[14:54:12] *** Quits: mib_cntzch (Mibbit@4C20A0E9.56756B0F.A103AA52.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:54:47] *** Joins: shilgapira (chatzilla@206EFB5A.FD9AA48F.F9582E85.IP)
[14:54:49] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[14:55:46] *** Joins: rgawdzik_ (chatzilla@moz-53664E2C.net.uwaterloo.ca)
[14:56:20] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[14:56:49] *** Joins: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP)
[14:56:56] *** Joins: nical1 (Nicolas@87C1F78E.1DE10CA8.D8E68FF6.IP)
[14:57:09] *** Quits: nical (Nicolas@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[14:58:32] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Quit: Leaving.)
[15:00:38] *** Quits: int3_ (int3_@moz-CE4DC75E.singnet.com.sg) (Client exited)
[15:01:09] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Quit: 랜덤은 쇠퇴했습니다.)
[15:02:38] *** Quits: omegaga_ (omegaga_@1AF10827.F09091A8.1348A864.IP) (Client exited)
[15:02:39] *** Joins: omnus (omnus@moz-2E009EE2.stny.res.rr.com)
[15:03:06] *** Joins: omegaga_ (omegaga_@1AF10827.F09091A8.1348A864.IP)
[15:04:47] *** Quits: omegaga_ (omegaga_@1AF10827.F09091A8.1348A864.IP) (Ping timeout)
[15:04:49] *** Joins: mib_zmj8ua (Mibbit@9F591EB8.D75AFE18.C456FB1C.IP)
[15:05:07] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[15:05:34] *** Quits: mib_zmj8ua (Mibbit@9F591EB8.D75AFE18.C456FB1C.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:05:41] *** Joins: samx (sami@moz-D9F3E0AE.pp.htv.fi)
[15:05:44] *** Joins: squiddy (squiddy@moz-915F460F.adsl.alicedsl.de)
[15:06:07] *** Quits: phaer (user@moz-F5ABA33A.adsl.highway.telekom.at) (Client exited)
[15:08:12] *** Quits: samx (sami@moz-D9F3E0AE.pp.htv.fi) (Quit: This computer has gone to sleep)
[15:09:06] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[15:11:16] *** Quits: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP) (Ping timeout)
[15:13:13] *** Quits: heftig (heftig@moz-D746319F.unitymedia.biz) (Quit: Quitting)
[15:13:28] *** Joins: abhaykadam (abhaykadam@3863B3DB.8C4DD549.6237D8DF.IP)
[15:13:31] *** Quits: rgawdzik_ (chatzilla@moz-53664E2C.net.uwaterloo.ca) (Ping timeout)
[15:14:08] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[15:15:25] *** Joins: heftig (heftig@moz-D746319F.unitymedia.biz)
[15:16:00] *** Quits: abhaykadam (abhaykadam@3863B3DB.8C4DD549.6237D8DF.IP) (Ping timeout)
[15:17:27] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[15:18:52] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[15:19:40] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[15:20:08] *** kimundi is now known as zz_kimundi
[15:20:22] *** Joins: gwty (gwtypc@C24C93D9.918BC1CC.137C914F.IP)
[15:20:46] *** jorendorff_away is now known as jorendorff
[15:23:40] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[15:25:33] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[15:25:36] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[15:25:59] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[15:26:17] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Connection reset by peer)
[15:26:36] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[15:26:49] *** Joins: abhaykadam (abhaykadam@352C30A0.C1A6EC22.D61FB583.IP)
[15:27:26] *** Joins: alonlevy (alon@18881233.66334A3F.AB64B967.IP)
[15:28:48] *** Joins: senorcris (Mibbit@moz-5A67F9C3.nytimes.com)
[15:29:11] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[15:30:18] *** Quits: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt) (Quit: Konversation terminated!)
[15:30:24] *** Joins: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt)
[15:30:31] <TheHydroImpulse> Anyone know how you'd use the llvm bindings that are within librustc?
[15:30:42] <TheHydroImpulse> by use, I mean including.
[15:31:03] *** Quits: alonlevy (alon@18881233.66334A3F.AB64B967.IP) (Ping timeout)
[15:31:04] *** Joins: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP)
[15:31:08] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[15:32:06] *** Quits: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt) (Quit: Konversation terminated!)
[15:32:13] *** Joins: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt)
[15:34:04] *** Quits: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt) (Ping timeout)
[15:34:16] *** Quits: shilgapira (chatzilla@206EFB5A.FD9AA48F.F9582E85.IP) (Ping timeout)
[15:34:18] *** Quits: senorcris (Mibbit@moz-5A67F9C3.nytimes.com) (Quit: http://www.mibbit.com ajax IRC Client)
[15:35:26] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[15:36:49] *** Joins: tomgibara (Mibbit@30EEE5E0.C92AC018.5411983D.IP)
[15:36:58] <eddyb> TheHydroImpulse: librustllvm is the library, I think. it's statically linked with librustc, but you may be able to link against the static library
[15:38:14] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[15:39:03] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[15:39:21] *** Joins: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt)
[15:39:56] *** Joins: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au)
[15:40:00] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[15:40:08] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[15:40:17] <TheHydroImpulse> eddyb ok, thanks.
[15:40:55] <eddyb> I don't know if it's hidden from regular compilation, you might have to look around the build system
[15:41:26] <kvark> Is it a known issue that rust build scripts do not work with Python 2.7?
[15:41:30] *** Joins: twi1 (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au)
[15:41:36] *** Quits: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au) (Connection reset by peer)
[15:42:12] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[15:42:43] <kvark> cmr: ^ the compileonline owner changed Python 2.7 to 2.6, and it worked for him
[15:42:59] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[15:43:12] *** Quits: twi1 (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au) (Ping timeout)
[15:44:17] *** Quits: dd (chatzilla@F63B62E8.8AE8A320.7C0F3359.IP) (Client exited)
[15:44:57] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[15:45:50] *** Joins: shilgapira (chatzilla@206EFB5A.FD9AA48F.F9582E85.IP)
[15:46:16] *** Parts: tomgibara (Mibbit@30EEE5E0.C92AC018.5411983D.IP) ()
[15:46:46] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[15:46:54] <cmr> kvark: nobody has complained so far.
[15:47:01] <mindcat> it is possible to do cross compile? I mean rustc
[15:47:04] <cmr> I've built rust on windows with python 2.7, so...
[15:47:07] <cmr> mindcat: yes.
[15:47:08] <kvark> ah
[15:47:20] <kvark> cmr: could be something with his Python install then. Alrighty
[15:47:21] <cmr> mindcat: --targets=... when building rustc, --target=... when compiling your program with rustc.
[15:47:38] <mindcat> cmr: ok..
[15:48:24] <kvark> out of curiosity, is windows your main platform for rust?
[15:49:02] <mindcat> kvark: me?
[15:49:11] <kvark> cmr, sorry :)
[15:49:12] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[15:49:14] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[15:49:18] *** Joins: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net)
[15:49:33] *** Joins: int3_ (int3_@D6C7AF99.B82E4B8F.EC6C369A.IP)
[15:50:03] <cmr> no
[15:50:08] <cmr> god no
[15:50:28] <kvark> heh :)
[15:50:28] <TheHydroImpulse> lol
[15:51:06] *** Quits: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net) (Ping timeout)
[15:51:28] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[15:52:25] <mouse> Hi. What is the best practice for casting buffers (e.g. from stream) to structs (e.g. headers)?
[15:52:46] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[15:54:19] *** Joins: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net)
[15:55:02] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[15:56:10] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[15:59:57] <bstrie> mouse: structs have the same layout as in C, so it should be straightforward
[16:00:04] *** Quits: shilgapira (chatzilla@206EFB5A.FD9AA48F.F9582E85.IP) (Connection reset by peer)
[16:01:01] <SiegeLord> Except maybe the ones that implement the Drop trait... not sure if that's still the case
[16:01:02] *** jorendorff is now known as jorendorff_away
[16:01:04] *** Joins: pnathan (Adium@moz-A8921E45.tukw.qwest.net)
[16:01:12] *** Joins: pzol (pzol@1A0AD8E6.E7BADBF1.B0C2132F.IP)
[16:01:59] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Input/output error)
[16:02:39] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[16:03:09] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[16:03:28] *** Joins: drewolson (Adium@961B4727.B2E7F80F.784188F5.IP)
[16:03:46] <drewolson> random question: can tests live in a separate file from application code in rust?
[16:04:06] *** Quits: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP) (Client exited)
[16:04:14] <SiegeLord> Sure, but then you'll have a harder time testing private functions
[16:04:43] <SiegeLord> Unless you're satisfied with using a textual include of the file with the tests
[16:05:14] <drewolson> SiegeLord: got it. off topic, but there are differing opinions on the value of testing private functions anyway. thanks though, that's super helpful. i need to read more about rust's module system, i'm just getting started.
[16:07:30] *** Quits: heftig (heftig@moz-D746319F.unitymedia.biz) (Quit: Quitting)
[16:08:41] *** Joins: FreeFull (freefull@moz-7CCB1CA8.as13285.net)
[16:08:49] *** Quits: Ferreus (ferreus@moz-1D830DAE.dip0.t-ipconnect.de) (Ping timeout)
[16:09:05] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[16:10:21] <mouse> bstrie, by std::cast::transmute?
[16:10:31] <bstrie> mouse: yep, that's what we use to cast things
[16:10:40] *** Joins: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP)
[16:10:52] <mouse> thanks
[16:11:02] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[16:11:39] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[16:11:43] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[16:12:31] <daschl> hey folks, I'm a little stuck.. on 0.9 -> type `std::io::net::tcp::TcpListener` does not implement any method in scope named `listen`
[16:12:39] <daschl> but the API says it implements listen?
[16:12:59] <daschl> my code is basically https://gist.github.com/daschl/8419335
[16:13:08] <mouse> bstrie,  does Rust have something like va_args? if I need to pass variable arguments to an external C-function?
[16:13:48] *** jorendorff_away is now known as jorendorff
[16:14:14] <bstrie> mouse: we have varargs for the C FFI, but not for rust functions
[16:14:24] <bstrie> I forget how to use them
[16:14:51] <bstrie> daschl: you might need to manually bring the trait into scope
[16:14:55] <kvark> daschl: I think Listener trait is out of your scope
[16:14:59] <kvark> oops, too late :)
[16:15:04] *** Quits: kris (kris@moz-47812C15.static.bcbnet.dk) (Ping timeout)
[16:15:32] <kvark> i.e. "use std::io::Listener"
[16:15:39] <eddyb> bstrie, mouse: pass arguments to an extern function defined with a trailing ... in arguments
[16:15:49] <mouse> bstrie, what is a current roadmap for loadable modules in run-time (like a dl)?
[16:15:56] <daschl> kvark: ah! thanks :) I'm new to rust
[16:16:49] <eddyb> no va_args, though, everything has to be known at compile-time
[16:16:50] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[16:16:50] *** ChanServ sets mode: +ao dherman dherman
[16:16:52] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[16:20:08] *** Quits: Kxepal (Miranda@moz-2D7B8971.pppoe.mtu-net.ru) (Ping timeout)
[16:21:49] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[16:22:41] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:23:07] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[16:24:12] <bstrie> mouse: I think we have something for that in std::unstable::dynamic_lib
[16:24:28] <mouse> I'll take a look. Thank you
[16:25:57] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[16:27:43] <bstrie> steveklabnik: I really want to see a tutorial on what stuff is implicitly copyable
[16:27:46] <bstrie> I can never remember
[16:29:20] <erickt> bstrie: I thought it was primitives or fixed sized composite types made up of primitives or fixed sized composite types
[16:29:27] <erickt> yay recursion
[16:29:52] <bstrie> erickt: so we could have potentially huge structures that are getting implicitly copied?
[16:30:10] <Seldaek> can anyone help me debug a windows FFI call that just crashes my process?
[16:30:22] <bstrie> seems like it would be easier to say what makes you ineligible to be implicitly copied
[16:30:30] <erickt> bstrie: I think so. so I think [int, .. 500000] is implicitly copiable
[16:30:31] <bstrie> is it *just* the existence of ~ ?
[16:31:15] <eddyb> bstrie: types either move or copy
[16:31:17] <bstrie> i.e. can we say "everything without a ~ in it will be copied rather than moved by default"
[16:31:27] *** Parts: drewolson (Adium@961B4727.B2E7F80F.784188F5.IP) ()
[16:31:30] <bstrie> eddyb: that's not enough, I need to be able to explain this to people
[16:31:34] <eddyb> ~T is just *one* of the things that cause a type to move
[16:31:43] <eddyb> the other thing is implementing Drop for T
[16:31:49] <bstrie> is that an exhaustive list?
[16:32:11] <eddyb> if you consider ~T as implementing Drop internally, then it's just Drop
[16:32:13] <erickt> bstrie / eddyb: there's also the Send trait
[16:32:32] <erickt> I think is somehow tied into implicit copies
[16:32:36] <eddyb> erickt: that's orthogonal to copy/move, AFAIK
[16:33:02] <eddyb> Send is more about thread safety
[16:34:03] <eddyb> bstrie: but types that copy might be passed by reference when it looks like they're passed by value (to be precise, > register sized => always passed by reference)
[16:34:08] <bstrie> what if my struct contains & or &mut
[16:34:19] * LinearInterpol watches. evilly.
[16:34:20] <bstrie> is the former copyable, and the latter not?
[16:34:21] *** Joins: lennart (lennart@moz-DE70D6F.stanford.edu)
[16:34:29] <bstrie> LinearInterpol: yes, pay attention
[16:34:35] <eddyb> bstrie: they both copy
[16:34:47] <bstrie> but you can only have one &mut pointer to a thing at a time
[16:34:52] *** Joins: LLD (Mibbit@moz-CFB96525.cnrs-imn.fr)
[16:34:52] <bstrie> I don't get how it's legal to copy it
[16:35:03] <eddyb> that's guarded by borrowck, not move/copy
[16:35:14] *** Joins: Kxepal (Miranda@moz-C762CEEA.pppoe.mtu-net.ru)
[16:35:29] <eddyb> bstrie: and types that move might be copied (in those cases, the original is not freed, or it is marked to not be freed)
[16:35:54] <bstrie> I really, really need to see a document laying out all these rules exhaustively
[16:36:00] <bstrie> it's impenetrable to me
[16:36:05] *** Joins: jurniss (Mibbit@moz-C9FEED49.midsouth.biz.rr.com)
[16:36:05] <LinearInterpol> myself included.
[16:36:07] <eddyb> bstrie: if you have a &mut T, you can lend it to multiple functions (but not at the same time), you couldn't do that if it were to move (like ~T)
[16:36:31] <LinearInterpol> so effectively all shallow data structures are implicitly copyable.
[16:36:59] <bstrie> ok
[16:37:16] *** jorendorff is now known as jorendorff_away
[16:37:24] <LinearInterpol> just trying to grok this, sorry guys.
[16:37:27] <bstrie> trying to think of an example of a valid program where you copy something with a &mut inside
[16:38:15] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:38:31] <bjz> LinearInterpol: o/
[16:38:41] <LinearInterpol> bjz: \o
[16:38:55] *** Joins: lynks (lynks@moz-CA8DE8D.clients.your-server.de)
[16:39:14] <eddyb> bstrie: let mut x = 1; let y = (0, &mut x); fn foo((a, b): (int, &mut int)) {*b += a;} foo(y); foo(y); foo(y);
[16:39:21] <jurniss> I am interested in learning Rust, is there any low-hanging fruit as far as libraries that people need?
[16:40:16] *** Quits: new_one (new_one@moz-3886E7BA.rice.edu) (Ping timeout)
[16:40:28] <steveklabnik> bstrie if you can get me the list, I can write it up
[16:40:48] <eddyb> bstrie: that should work, AFAIK. if it doesn't, it's not because copiability, but borrow errors
[16:41:11] <steveklabnik> jurinss there aren't many libraries at all, reqlly
[16:41:55] *** Quits: Kxepal (Miranda@moz-C762CEEA.pppoe.mtu-net.ru) (Connection reset by peer)
[16:42:26] <LLD> Hi. Anybody can explain this? let x = unsafe{CString::new(hello_from_c(), false).as_str()}; --> compile error (borrowed pointer lifetime) | let x = unsafe{CString::new(hello(), false)}; let option = x.as_str(); --> works.
[16:42:30] <lynks> Is there a rust lib with the equivalent of python's struct.pack, struct.unpack?
[16:42:30] *** Joins: Kxepal (Miranda@moz-C762CEEA.pppoe.mtu-net.ru)
[16:42:31] *** Joins: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au)
[16:42:59] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[16:43:17] <LLD> Is it because "CString::new(hello_from_c(), false).as_str()" is released at the end of the unsafe block?
[16:43:39] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[16:44:00] <LLD> Or is it because "CString::new(hello_from_c(), false)" needs to be put in a variable?
[16:44:08] <LLD> Or something else?
[16:44:14] *** Quits: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au) (Ping timeout)
[16:44:42] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[16:45:10] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[16:45:32] *** Quits: noel (noel@moz-DD794775.as13285.net) (Ping timeout)
[16:45:50] *** Joins: noel (noel@moz-DD794775.as13285.net)
[16:46:11] *** Quits: zargony (zargony@moz-93394FFC.versanet.de) (Quit: )
[16:46:49] *** Quits: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net) (Ping timeout)
[16:47:49] <bstrie> LLD: it's because the return value of CString::new() doesn't live long enough. see http://smallcultfollowing.com/babysteps/blog/2014/01/09/rvalue-lifetimes-in-rust/
[16:47:57] <bstrie> LLD: tl;dr is that we're working on it :P
[16:48:03] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Quit: csherratt)
[16:48:27] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Quit: Textual IRC Client: www.textualapp.com)
[16:48:34] <bstrie> lynks: rust structs are already laid out the same as C structs
[16:48:56] <bstrie> or are you looking for some kinda serialization
[16:50:13] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[16:50:15] *** Quits: glaebhoerl (glaebhoerl@moz-3590251D.kabelnet.hu) (Ping timeout)
[16:50:37] <bjz> what is 	 #[unsafe_no_drop_flag]?
[16:50:47] <bjz> LinearInterpol: ^
[16:50:54] <bjz> :P
[16:51:00] <lynks> bstrie: sorry yeah, I use pack for hacking together networky things
[16:51:05] <bstrie> jurniss: really you can write anything, because any libs that are written now will probably need to be rewritten before 1.0 anyway :P
[16:51:31] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[16:52:36] *** Quits: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net) (Quit: Sharp)
[16:53:06] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[16:53:38] *** Quits: noel (noel@moz-DD794775.as13285.net) (Quit: noel)
[16:54:02] <LLD> bstrie : Ok. So in the meantime, I should use temporaries. Fair enough. Thanks.
[16:54:38] <bstrie> LLD: exactly. we hope to life this restriction soon
[16:54:42] <bstrie> *lift
[16:54:44] *** Quits: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP) (Input/output error)
[16:54:44] *** Joins: samx (sami@moz-D9F3E0AE.pp.htv.fi)
[16:54:56] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[16:54:59] *** Quits: mouse (mouse@moz-373942D2.dhcp.yndx.net) (Ping timeout)
[16:55:08] <jurniss> what is the general opinion on rewriting functionality in pure rust vs. bindings for a well established C/C++ lib?
[16:55:17] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[16:55:19] *** zz_kimundi is now known as kimundi
[16:55:34] *** jorendorff_away is now known as jorendorff
[16:56:12] *** Quits: samx (sami@moz-D9F3E0AE.pp.htv.fi) (Quit: This computer has gone to sleep)
[16:56:25] <bstrie> jurniss: depends on the lib. in the short term bindings are gonna be more useful than buggy remimplementations, but we've gotta start somewhere...
[16:56:47] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[16:56:58] <bstrie> eddyb: that example you gave me earlier regarding &mut doesn't copy at all, nor does it hit a borrow error... it actually moves https://gist.github.com/bstrie/8421637
[16:57:01] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[16:57:08] *** Quits: bobthenameless (bobthename@moz-A1BB42C4.dhcp.leds.al.charter.com) (Ping timeout)
[16:57:13] <eddyb> bstrie: that... is new to me
[16:57:21] <bstrie> which means that &mut does in fact abolish your implicit copyability
[16:57:22] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[16:57:25] <bstrie> this is why we need a document :)
[16:57:32] <eddyb> bstrie: does a simple &mut T move? (outside of a structure)
[16:57:36] * LinearInterpol caused conflict. Apologies.
[16:57:39] *** Joins: nical (Nicolas@87C1F78E.1DE10CA8.D8E68FF6.IP)
[16:58:00] <LinearInterpol> nical: wirth?!?!
[16:58:24] <bstrie> eddyb: nope, getting rid of the tuple just does a copy
[16:58:30] *** Joins: kphelps (kphelps@moz-8B098CA5.hsd1.ma.comcast.net)
[16:58:36] *** Quits: nical1 (Nicolas@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[16:58:49] <eddyb> bstrie: okay, that's an interesting choice in type contents
[16:59:20] <eddyb> (the part of rustc::middle::ty that deals with the properties of types)
[16:59:33] *** jorendorff is now known as jorendorff_away
[16:59:40] *** jorendorff_away is now known as jorendorff
[17:00:21] <lynks> jurniss: I would envisage something similar to python's "ctypes"
[17:00:24] *** Joins: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net)
[17:00:48] <lynks> jurniss: ie; loading of shared object libraries
[17:01:04] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[17:01:24] <daschl> is there a way to print the type of the object?
[17:01:48] <vmx> daschl: have you tried "{:?}"?
[17:02:04] *** Quits: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net) (Quit: Sharp)
[17:02:31] *** jorendorff is now known as jorendorff_away
[17:02:53] <daschl> vmx: nice
[17:02:54] <daschl> thanks
[17:03:09] *** Quits: kphelps (kphelps@moz-8B098CA5.hsd1.ma.comcast.net) (Ping timeout)
[17:03:52] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:03:58] *** Joins: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net)
[17:04:27] *** Quits: pnathan (Adium@moz-A8921E45.tukw.qwest.net) (Quit: Leaving.)
[17:04:41] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[17:05:17] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Quit: csherratt)
[17:05:58] *** Joins: kphelps (kyle@moz-8B098CA5.hsd1.ma.comcast.net)
[17:06:36] *** Joins: Jemaclus (Mibbit@A084B2A7.5843BA5A.D4E4C7A5.IP)
[17:06:37] *** Quits: Jemaclus (Mibbit@A084B2A7.5843BA5A.D4E4C7A5.IP) (Quit: Jemaclus)
[17:06:57] <pzol> vmx btw how does "{:?}" work, some kind of reflection?
[17:07:25] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[17:07:39] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:07:49] <vmx> pzol: no idea, i'm a newbie myself
[17:07:59] <SiegeLord> Yes, it uses reflection
[17:08:11] <pzol> bstrie ?  how does "{:?}" work, some kind of reflection?
[17:08:14] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[17:08:29] <pzol> SiegeLord hmmm does it also have some api ?
[17:08:35] *** Joins: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net)
[17:08:45] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[17:09:45] <bstrie> pzol: reflection, yes
[17:09:48] *** Joins: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP)
[17:10:04] <pzol> thanks!
[17:10:07] *** Quits: autra_ (augustin@A14DAE84.7F753DD1.EE2CA32B.IP) (Ping timeout)
[17:10:16] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Ping timeout)
[17:10:19] *** Quits: pcdummy (pcdummy@moz-CF4CA865.page4me.ch) (Client exited)
[17:11:39] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[17:12:39] <SiegeLord> I believe the api is in std::repr
[17:12:45] *** Joins: pcdummy (pcdummy@moz-CF4CA865.page4me.ch)
[17:12:53] <daschl> vmx: yay! the server works
[17:13:14] *** Joins: derek_c (derek@D11FD957.78B8FD9.C34016C.IP)
[17:13:23] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[17:14:00] <SiegeLord> Which is marked unstable... strange that most things aren't
[17:14:24] <SiegeLord> Hopefully they will be, and the unstable lint will be turned on by default... maybe
[17:15:05] *** Joins: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net)
[17:15:11] *** Joins: hoverbear (hoverbear@moz-C2B3C905.wireless.uvic.ca)
[17:15:16] *** Quits: hoverbear (hoverbear@moz-C2B3C905.wireless.uvic.ca) (Quit: hoverbear)
[17:16:13] <pzol> SiegeLord yeah :) 
[17:16:55] *** Quits: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net) (Ping timeout)
[17:16:58] *** Quits: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net) (Quit: I haz left.)
[17:17:29] *** Joins: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net)
[17:18:14] <pzol> SiegeLord there's also http://static.rust-lang.org/doc/master/std/reflect/trait.MovePtr.html
[17:18:16] *** Joins: logicalparadox (logicalpar@7726D6BC.E47643E6.AF265B38.IP)
[17:19:35] *** Joins: hoverbear (hoverbear@moz-C2B3C905.wireless.uvic.ca)
[17:19:35] *** Quits: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net) (Quit: Sharp)
[17:20:49] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[17:20:50] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[17:23:44] <hoverbear> bstrie: Did you ever get gitter working?
[17:24:04] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[17:24:59] *** Quits: pzol (pzol@1A0AD8E6.E7BADBF1.B0C2132F.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:25:28] *** Quits: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net) (Client exited)
[17:25:42] *** Joins: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net)
[17:28:28] <wycats_> are there any docs/blog posts/anything-please-god on arenas?
[17:28:34] *** Quits: atomical (atomical@moz-C92D67E2.library.northwestern.edu) (Ping timeout)
[17:28:55] <Ms2ger> I can offer a please-god-no on arenas?
[17:28:59] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[17:28:59] *** Joins: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[17:29:54] *** Quits: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net) (Client exited)
[17:30:07] *** Joins: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net)
[17:31:00] <wycats_> Ms2ger: because they're a bad idea or buggy?
[17:31:25] <Ms2ger> I can only imagine them being painful is rust
[17:31:25] <hoverbear> wycats_: I heard there are a lot of American Football games in arenas.
[17:31:27] <Ms2ger> in*
[17:31:36] <wycats_> Ms2ger: why's that?
[17:31:41] *** Joins: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net)
[17:31:46] <Ms2ger> Well, in anything else too, but runtime painful, not compile-time painful :)
[17:31:57] <wycats_> Ms2ger: route-recognizer.rs is currently very malloc/free bound
[17:32:15] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[17:32:23] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[17:32:28] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[17:33:02] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[17:33:02] <wycats_> also, my profile is showing a transmute_copy inside of repr() inside of len()
[17:33:05] <wycats_> which is making me scared
[17:33:18] <wycats_> http://note.io/1eQBpnc
[17:33:49] *** Joins: q66 (q66@moz-30F47C55.range86-151.btcentralplus.com)
[17:33:52] <wycats_> this is compiled with -O but also -Z extra-debug-info
[17:34:34] <daschl> vmx: aww nice, that it responds to telnet requests
[17:34:40] <daschl> time to make it speak memcache
[17:34:41] <daschl> :D
[17:35:34] <vmx> daschl: reading or speaking memcache?
[17:35:38] <daschl> vmx: https://gist.github.com/daschl/8419335
[17:35:44] <daschl> speaking! I'd like to impl a simple memcached
[17:35:46] <daschl> just for fun
[17:35:59] <daschl> maybe also the couchbase client then
[17:36:00] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[17:36:03] <daschl> but thats further down the road
[17:36:27] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[17:36:33] <vmx> daschl: that would be cool. wrapping libcouchbase is always a pain (due to the callbacks)
[17:37:55] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:39:48] *** Joins: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP)
[17:39:51] *** Quits: moostik (Icedove@moz-53E05E9C.w92-151.abo.wanadoo.fr) (Ping timeout)
[17:39:56] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[17:42:32] <derek_c> is there any difference between `proc(some_arg) {...}` and `|some_arg| {...}`?
[17:42:39] *** Quits: jurniss (Mibbit@moz-C9FEED49.midsouth.biz.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[17:43:09] *** Joins: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au)
[17:43:51] <benh> well one is a proc, one is a stack closure
[17:44:01] <derek_c> hmm
[17:44:11] <benh> the proc is only callable once and its environment lives in dynamically allocated memory until it gets consumed by the invocation
[17:44:20] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[17:44:28] <benh> the stack closure does the whole lifetime thing regarding its environment
[17:44:48] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[17:44:52] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[17:44:52] *** Quits: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au) (Ping timeout)
[17:46:03] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[17:48:59] <derek_c> benh: what do you mean by "does the whole lifetime thing regarding its environment?"
[17:49:02] *** Joins: pzol (pzol@1A0AD8E6.E7BADBF1.B0C2132F.IP)
[17:49:19] *** Quits: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP) (Ping timeout)
[17:50:17] <benh> derek_c: if your stack closure uses some local variable, it can't outlive that variable
[17:50:23] *** Quits: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP) (Client exited)
[17:50:27] <benh> while the proc would just move it into itself
[17:51:01] <derek_c> benh: I see. thanks!
[17:53:11] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:53:36] <derek_c> what's the correct syntax for the signature of a function that returns a proc?
[17:54:21] <derek_c> ah I got it
[17:55:27] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[17:56:09] <diverse> nmatsakis: are you going to have the meeting today?
[17:56:56] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:56:56] *** ChanServ sets mode: +ao brson brson
[17:57:16] *** Joins: Ferreus (ferreus@moz-929FE6D8.pools.arcor-ip.net)
[17:57:22] *** Quits: Ferreus (ferreus@moz-929FE6D8.pools.arcor-ip.net) (Quit: Ferreus)
[17:57:28] <nmatsakis> diverse: I believe so
[17:58:16] <diverse> nmatsakis: alright, I fixed the agenda date
[18:00:03] <LLD> I have a const char * from a C lib. This string is translated to Rust's &str using "std::c_str::CString". Now I'm puzzled. CString returns a &str, but it is borrowed from what? Plus, I want to return this &str (I'm writing a wrapper) but when the wrapper function finishes, the &str is destroyed. How would you proceed?
[18:00:37] *** Joins: Ferreus (ferreus@moz-929FE6D8.pools.arcor-ip.net)
[18:02:50] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:02:58] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[18:03:21] *** Joins: eholk_ (eholk@9FB8E98D.93E9F6F4.284344F5.IP)
[18:03:25] *** Quits: FreeFull (freefull@moz-7CCB1CA8.as13285.net) (Ping timeout)
[18:04:30] *** rossm is now known as ross
[18:04:45] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:06:04] *** Quits: nkoep (nik@moz-C871FE27.pool.mediaways.net) (Ping timeout)
[18:06:14] *** Joins: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de)
[18:06:15] *** Joins: nkoep (nik@moz-C871FE27.pool.mediaways.net)
[18:06:23] *** Quits: pzol (pzol@1A0AD8E6.E7BADBF1.B0C2132F.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:06:49] *** Joins: rossm (rossm@moz-EE3BB1DC.br.br.cox.net)
[18:07:36] <eddyb> http://www.reddit.com/r/rust/comments/1v4955/a_30_minute_introduction_to_rust/ceoy2di?context=10 ouch
[18:07:55] *** Quits: rossm (rossm@moz-EE3BB1DC.br.br.cox.net) (Quit: )
[18:08:24] *** ross is now known as rossm
[18:08:26] *** Quits: benjamin_ (benjamin@moz-8D104FD6.dip0.t-ipconnect.de) (Ping timeout)
[18:08:27] *** Joins: trinary (Adium@moz-D78CD0D5.hsd1.co.comcast.net)
[18:08:28] <bachm> str, list dict, too short?
[18:08:46] <rossm> sorry for nick spam, I'm trying to get my client to play nice with my bouncer
[18:08:48] *** rossm is now known as ross
[18:09:21] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[18:10:01] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[18:10:12] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[18:10:30] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[18:10:42] <ross> wrt that reddit comment, honestly I'm in the camp of less abbreviations
[18:11:05] <ross> but that's probably because I use C# and Visual Studio, where you only type a few letters and then it fills in the rest
[18:11:37] <lucian> i think the mistake Python made was lowercasing them. List, Dict, Set would be fine
[18:11:38] <ross> I definitely think the tradeoff on recv vs receive is not favorable.
[18:11:52] <lucian> well, recv is quite widespread
[18:11:57] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[18:12:02] <ross> in certain worlds/contexts, sure
[18:12:08] <lucian> in fact, i wish rust had camelCase for fns
[18:12:12] <eddyb> Rc::new(RefCell::new(HashMap::new())) is already ridiculously long
[18:12:25] <ross> readability trumps almost everything to me
[18:12:30] <lucian> type ref_map = ... :)
[18:12:43] *** Quits: abhaykadam (abhaykadam@352C30A0.C1A6EC22.D61FB583.IP) (Quit: Lingo - http://www.lingoirc.com)
[18:12:57] *** Parts: nical (Nicolas@87C1F78E.1DE10CA8.D8E68FF6.IP) ()
[18:12:58] <lucian> ross: i think verbosity doesn't necessarily imply it, though. look at java
[18:13:06] <ross> agreed
[18:13:14] <eddyb> lucian: I've come to embrace the snake_case, it actually makes an even better discrepancy with UpperCamelCase
[18:13:25] <eddyb> why ref_map, that's... not a type name :P
[18:13:27] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[18:13:33] * ldlework waves to lucian
[18:13:40] <ross> in the languages I use, recv is not common. I think you can accept a lot of abbreviations when you come from cultures that already use them a lot
[18:13:41] <ldlework> We miss you in #p-o
[18:13:54] <eddyb> type MutMap<A, B> = Rc<RefCell<HashMap<A, B>>>;
[18:13:54] <lucian> eddyb: there are some good arguments for camelCase for fns and CamelCase for types http://glyph.twistedmatrix.com/2012/10/a-tired-hobgoblin.html
[18:14:05] <ldlework> TitleCase
[18:14:30] <lucian> eddyb: sure :)
[18:14:31] <eddyb> UpperCamelCase for types is awesome, don't get me wrong
[18:14:48] *** Quits: derek_c (derek@D11FD957.78B8FD9.C34016C.IP) (Ping timeout)
[18:15:10] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Quit: ziad)
[18:15:14] <eddyb> but lowerCamelCase can be easier mistaken for UpperCamelCase than snake_case can
[18:15:20] <sfackler> eddyb: I'm increasingly leaning towards making an RcMut type that wraps Rc<RefCell<T>> because it's so gross right now
[18:15:33] <ross> I write code like this though, so I get that I have a different perspective than probably most rust people http://pastebin.com/LAb5uYLH
[18:15:38] <eddyb> sfackler: you don't need a full type, just a type alias and a module ;)
[18:15:41] <steveklabnik> i obviously prefer snake_case ;)
[18:15:48] *** Quits: LLD (Mibbit@moz-CFB96525.cnrs-imn.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[18:15:51] *** Joins: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net)
[18:16:01] <eddyb> the problem with the module is that you can't have an explicit type on it, but you can on the new function
[18:16:16] <lucian> eddyb: i have yet to confuse them in Haskell, for example
[18:16:44] *** Joins: Jemaclus (Mibbit@4EEAB704.5843BA5A.D4E4C7A5.IP)
[18:16:49] <eddyb> don't compare Haskell or JS to Rust :P
[18:16:51] <LinearInterpol> I have a question: what happens when we run out of memory in Rust?
[18:17:00] <Jemaclus> ok, more mac compile problems... getting this error now: Aborting install because more than one library matching libstd-*.rlib is present in build tree x86_64-apple-darwin/stage2/lib/rustlib/x86_64-apple-darwin/lib:
[18:17:07] <eddyb> LinearInterpol: abort
[18:17:11] <Jemaclus> mac os x 10.7
[18:17:16] <LinearInterpol> And what happens when we continually allocate something in a loop? Will it allocate until it can't?
[18:17:28] <LinearInterpol> Or is it subjected to being deallocated?
[18:17:29] <Matthias247> yes
[18:17:33] <LinearInterpol> (via the destructor)
[18:17:39] *** Quits: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net) (Ping timeout)
[18:17:46] <sfackler> it depends on how it's being allocated
[18:17:47] <Matthias247> depends on how your loop looks :)
[18:18:15] <Matthias247> loop { let a = ~5; } will allocate, deallocate, allocate, ....
[18:18:44] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[18:19:08] *** Joins: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP)
[18:20:17] <wycats_> question: if I have a Node<'a, T>, is it possible for me to create a Node in 'a
[18:20:42] <eddyb> Matthias247: LLVM can optimize that out
[18:21:07] <Matthias247> eddyb: sure. That was the theoretic answer ;)
[18:21:10] *** Joins: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP)
[18:21:12] <eddyb> it doesn't right now because of some problems with our malloc/free definitions, see https://github.com/mozilla/rust/pull/11539
[18:22:15] *** Joins: lucian_ (lucian@303F9692.4304AE1E.CE5E78F6.IP)
[18:22:53] *** Quits: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP) (Ping timeout)
[18:22:56] <bstrie> hoverbear: I know you saw my messages in gitter, because I saw your messages acknowledging that you saw them
[18:23:10] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[18:23:58] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:25:22] *** Quits: KindOne (KindOne@moz-E60622A1.dynamic.ip.windstream.net) (Ping timeout)
[18:26:05] <eddyb> bstrie: :megusta: http://cosmic.mearie.org/tmp/periodic-table-of-rust-types
[18:26:14] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Ping timeout)
[18:26:50] <whitequark> wycats_: you mean allocate in 'a given X<'a>? no, I don't think you can do that
[18:26:51] <LinearInterpol> eddyb: it's 05BEAUTIFUL
[18:27:01] <wycats_> hm
[18:27:12] <eddyb> LinearInterpol: © Yurume
[18:27:22] <whitequark> think about it: region types are erased during compilation
[18:27:23] <Jemaclus> trying to get 0.9 installed today... but I messed around with 0.8 yesterday.
[18:27:43] <whitequark> there would be no way for your code to know what 'a is, as it doesn't exist at runtime.
[18:27:45] <Jemaclus> I haven't used C in over a decade... spent the last few years working with web languages (ruby, php, etc)
[18:27:50] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[18:27:52] <Jemaclus> so I'm a bit fuzzy on the ~ thing
[18:28:03] *** Joins: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[18:28:03] *** ChanServ sets mode: +ao dherman dherman
[18:28:08] <eddyb> wycats_: you would have to be able to allocate up the stack, and potentially in 'static memory...
[18:28:08] *** Joins: bheylin (brianheyli@moz-300B2629.vanguardgames.net)
[18:28:10] <Jemaclus> The tutorial I was reading pretty much always did something like:  let foo = ~"bar";
[18:28:15] *** Parts: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP) (Konversation terminated!)
[18:28:22] *** Joins: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP)
[18:28:24] <Jemaclus> is the ~ always required? under what circumstances would it need to be there?
[18:28:47] *** Quits: lucian_ (lucian@303F9692.4304AE1E.CE5E78F6.IP) (Input/output error)
[18:28:48] <whitequark> Jemaclus: think of ~ as a safe way to call malloc/free. when you write ~x, Rust calls malloc. when you no longer reference that value, Rust frees it.
[18:29:02] <Jemaclus> oh.
[18:29:07] <Jemaclus> well, that simplifies things considerably.
[18:29:08] *** Joins: lucian (lucian@303F9692.4304AE1E.CE5E78F6.IP)
[18:29:17] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[18:29:26] <eddyb> Jemaclus: if you need to modify the length of a string or a vector (though not slicing, because that doesn't require allocation)
[18:29:30] *** Joins: KindOne (KindOne@moz-E60622A1.dynamic.ip.windstream.net)
[18:29:33] <whitequark> since you cannot copy ~x (you can only take a reference to it), Rust does not need a GC to free it
[18:29:37] <eddyb> otherwise, it's there for explicit indirection
[18:30:07] *** Quits: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP) (Ping timeout)
[18:30:10] *** Joins: derek_c (derek@E909217C.727D7A21.EB673A25.IP)
[18:30:21] *** Joins: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[18:30:34] <whitequark> and type system enforces the fact that references must not outlive whatever they are referencing, so there's no dangling pointer problem either.
[18:30:50] *** Quits: lucian (lucian@303F9692.4304AE1E.CE5E78F6.IP) (Ping timeout)
[18:30:52] *** Quits: bheylin (brianheyli@moz-300B2629.vanguardgames.net) (Quit: bheylin)
[18:30:53] *** jorendorff_away is now known as jorendorff
[18:31:11] *** Joins: ziad (ziad@B20586FB.BDB3D91.6E370BFC.IP)
[18:31:15] <Jemaclus> so in this situation:
[18:31:28] <Jemaclus> http://mibpaste.com/NvddLr 
[18:31:58] <eddyb> Jemaclus: that uses ~ to deal with trait objects
[18:32:05] *** Quits: eholk_ (eholk@9FB8E98D.93E9F6F4.284344F5.IP) (Quit: eholk_)
[18:32:21] <Jemaclus> is that different than the references you just mentioned?
[18:32:34] *** Joins: Kynes (Kynes@moz-3DC6C6E7.mit.edu)
[18:33:00] <eddyb> let fox: Fox = Animal::new(); let cat: Cat = Cat::new(); let animals: &[&Animal] = [&fox as &Animal, &cat as &Animal]; // this should work as well
[18:33:11] <whitequark> yes. your example does not have any references. instead, it moves fox and cat into the animals vector.
[18:33:18] <Jemaclus> oh, i see.
[18:33:27] <Jemaclus> sorta makes sense now
[18:33:29] <whitequark> they are not accessible through fox/cat after that.
[18:33:35] <Eridius> eddyb: what does fox.make_sound() do?
[18:33:52] *** Quits: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP) (Ping timeout)
[18:33:58] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[18:34:09] <whitequark> Eridius: fn make_sound(&self) { "horrible shrieking" }
[18:34:16] <Jemaclus> whitequark: oh, gotcha. So if I tried to use fox after that animals assignment, it would fail?
[18:34:23] <eddyb> Jemaclus: the cast to ~Animal erases the type and gives you a heap-allocated object of unknown size (or "unsized")
[18:34:23] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[18:34:27] <Jemaclus> what if we did it eddyb's way with the &?
[18:34:31] <whitequark> Jemaclus: yes, this is also statically enforced by type system
[18:34:50] <whitequark> if you did it eddyb's way, it would be accessible both via fox and animals.
[18:34:56] <Jemaclus> shiny.
[18:34:56] <Jemaclus> thanks
[18:34:59] <eddyb> that's why the example uses ~, you can't have an unboxed Trait, you need the indirection, whether it is &Trait or ~Trait
[18:35:26] <Jemaclus> wait, why can't we have an unboxed Trait?
[18:35:37] <eddyb> Jemaclus: because it's of unknown size
[18:35:44] <Jemaclus> oh, right
[18:35:45] <Jemaclus> ok, gotcha
[18:35:47] <Jemaclus> this clears up a lot
[18:35:48] <Jemaclus> thanks
[18:36:10] <Jemaclus> if I ever get 0.9 installed, I'll play around with this some more... may have more questions :)
[18:36:13] <eddyb> Jemaclus: if you want to learn more about this unsized stuff, look for DST5 on the subreddit
[18:36:29] <Jemaclus> will do
[18:36:44] <eddyb> we will be able to have Rc<Trait> in the future (a shared interface, basically)
[18:37:27] <whitequark> eddyb: I'm still not quite sure how that would work, on the lowest level
[18:37:32] <eddyb> (and all sorts of combinations of crazy goodness - while still being safe)
[18:37:38] <eddyb> whitequark: read DST5 :P
[18:37:44] <whitequark> already did
[18:38:08] <eddyb> Rc has a *T, transmuted from ~T
[18:38:11] <whitequark> will Rc flatten to struct Rc { ...; uint trait_size; Trait trait; } ?
[18:38:14] <whitequark> oh
[18:38:27] <eddyb> how would Rc work without the indirection, lol?
[18:38:40] <whitequark> hm
[18:38:48] <eddyb> well, not *T, but *RcBox<T>, which contains a T
[18:39:00] <whitequark> yes, I meant RcBox above.
[18:39:11] <eddyb> whitequark: you don't need the size
[18:39:24] <eddyb> just like you don't need the size of ~Trait
[18:39:29] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[18:39:29] *** Joins: rca_ (rcatolino@moz-9F9D4FC8.adsl.proxad.net)
[18:39:50] <whitequark> but it's still flattened?
[18:39:56] <eddyb> whitequark: yes
[18:40:19] <eddyb> *RcBox<T> can be cast to *RcBox<Trait>, given proper alignment
[18:40:32] <eddyb> the latter is a fat pointer containing Trait::<for T>::vtable
[18:40:44] *** Joins: wippler (Mibbit@moz-116EC294.novotelecom.ru)
[18:40:47] *** Joins: gunther (Mibbit@moz-116EC294.novotelecom.ru)
[18:40:50] *** Quits: rca (rcatolino@moz-1D2195F3.adsl.proxad.net) (Ping timeout)
[18:41:03] *** Quits: wippler (Mibbit@moz-116EC294.novotelecom.ru) (Quit: http://www.mibbit.com ajax IRC Client)
[18:41:04] *** Quits: gunther (Mibbit@moz-116EC294.novotelecom.ru) (Quit: http://www.mibbit.com ajax IRC Client)
[18:41:09] <whitequark> I don't follow, how would you cast *RcBox<uint> to *RcBox<Add> ?
[18:41:14] <whitequark> or is that not a bitcast?
[18:41:32] <eddyb> whitequark: the pointer is the same. ptr => (ptr, vtable)
[18:42:12] <whitequark> oh, so it doesn't refer to vtable of uint, but to vtable of RcBox<uint> ?
[18:42:25] <eddyb> no, vtable of Add for uint
[18:42:42] <eddyb> since that is the unsized type that is being erased
[18:42:45] <whitequark> but the pointer points to RcBox<uint>, not uint
[18:43:00] <eddyb> whitequark: you're not casting *RcBox<uint> to *Add
[18:43:15] <eddyb> you're casting *RcBox<uint> to *RcBox<Add>
[18:43:38] <whitequark> eddyb: can you write out the representation of both?
[18:43:45] <eddyb> Rc<Add> would have a pointer to RcBox<uint> and a vtable of Add for uint
[18:43:56] *** Joins: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au)
[18:44:12] <eddyb> .borrow() returns &uint before the cast and &Add afterwards
[18:44:22] <whitequark> hm, that's really weird though
[18:44:30] <whitequark> since the vtable would not match the pointer
[18:44:32] <eddyb> the vtable is the same, since there is only one unsized type in there is is being tracked
[18:44:42] <whitequark> but I guess I kinda understand it now
[18:44:44] <eddyb> whitequark: is doesn't have to, that's what DST5 is all about
[18:44:59] <eddyb> the conversions are there to allow nesting an unsized type in something like Rc
[18:45:39] *** Quits: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au) (Ping timeout)
[18:47:56] <whitequark> I see
[18:48:02] <olsonjeffery> "life after main"
[18:49:16] <wycats_> what I'm trying to figure out is: I have a &Foo and I want to allocate a Bar and lend it into two fields in Foo
[18:49:17] *** Joins: pepper_chico (pepper_chi@E3C2E286.D158355F.F546FA5F.IP)
[18:49:26] <wycats_> eddyb: ^^
[18:49:30] <wycats_> which the lifetime system should allow
[18:49:41] <pepper_chico> man rustc still states graydon is the project leader
[18:49:42] <wycats_> I basically want to pin the two Bars to Foo's lifetime
[18:49:47] <wycats_> pepper_chico: scumbaaaaag
[18:50:37] <Jemaclus> I'm using the force of my mind to compel rustc to compile this time.
[18:50:43] <pepper_chico> wycats_, what?
[18:52:18] <whitequark> wycats_: well, when your code is generic over 'a, it can't make any assumptions about 'a. how would rust deallocate Bar when it has no way of knowing when?
[18:52:35] <wycats_> it would deallocate it when Foo was deallocated
[18:52:40] <wycats_> hm no
[18:52:44] <whitequark> that would imply that Foo owns Bar
[18:52:56] <wycats_> I guess I want Foo to own Bar and lend it to itself
[18:53:00] <wycats_> in the second field
[18:53:09] *** Quits: Kynes (Kynes@moz-3DC6C6E7.mit.edu) (Quit: Leaving)
[18:53:23] <whitequark> that should typecheck
[18:53:25] <wycats_> I want Foo to own Bar even if there is no actual field where Bar is
[18:53:30] <Jemaclus> Apparently, my mind control powers are not as strong as I thought.
[18:53:39] <wycats_> this is a linked list :P
[18:53:41] * pepper_chico didn't get the scumbaaag thing....
[18:53:45] <wycats_> so the chain of ownership goes through the nodes
[18:53:56] <whitequark> wycats_: that wouldn't work; think about it this way, when Foo is deallocated, its destructor must also deallocate Bar
[18:54:02] <whitequark> but how would it do that without a pointer to Bar?
[18:54:12] <wycats_> the chain of ownership goes through the links
[18:54:27] <wycats_> the list owns the head node
[18:54:31] <wycats_> which owns each next node
[18:54:36] <kimundi> pepper_chico: "scumbag compiler, still pretending old things as current" maybe?
[18:54:41] <wycats_> but the list wants to borrow the tail node
[18:54:47] <wycats_> from the last node
[18:54:50] <wycats_> it seems like it should work
[18:54:56] <whitequark> wycats_: oh, interesting
[18:55:04] <pepper_chico> kimundi, ah
[18:55:57] <whitequark> wycats_: I don't think that's safe in general. since owned pointers don't track borrows, what would happen if you take one-before-last node and change the next pointer to something else?
[18:56:07] <whitequark> the last node gets deallocated, yet the list still holds a reference to it
[18:56:12] *** Quits: pepper_chico (pepper_chi@E3C2E286.D158355F.F546FA5F.IP) (Quit: Ex-Chat)
[18:56:22] <wycats_> it should somehow be disallowed by the compiler :P
[18:56:47] <wycats_> it's seeming like it's impossible to safely write a linked list, which seems bad
[18:57:04] <whitequark> you just can't do it with just owned pointers
[18:57:06] <whitequark> you need Rc
[18:57:09] <bstrie> wycats_: it *was* impossible to do that, in 0.9
[18:57:10] <wycats_> that seems bad
[18:57:25] <bstrie> wycats_: you can do it if you're on master, using strcat's new weak pointer Rc types
[18:57:52] <bstrie> wycats_: https://github.com/mozilla/rust/pull/10926
[18:58:09] <hoverbear> bstrie: Cool. :) They added a mac app and private chats by the looks of it
[18:58:31] *** Joins: ptc1 (Adium@moz-8F01578B.z72-46-65.customer.algx.net)
[18:58:32] *** Quits: ptc1 (Adium@moz-8F01578B.z72-46-65.customer.algx.net) (Client exited)
[18:59:16] <wycats_> so it's just impossible to write a linked list without Rc?
[18:59:35] *** Quits: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net) (Ping timeout)
[18:59:42] <bstrie> wycats_: no, you can also write it with Gc. or you can use a trivial amount of unsafe code for the backpointers
[18:59:52] <bstrie> by linked list I'm presuming that you mean doubly-linked
[19:00:03] <wycats_> bstrie: even a singly linked list with a reference to the tail
[19:00:18] <wycats_> references to the head and tail
[19:00:38] <bstrie> referencing the tail is cheating :P
[19:00:49] *** Joins: mouse (mouse@moz-32DFB3CF.broadband.corbina.ru)
[19:00:51] *** Joins: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net)
[19:01:02] <Ms2ger> Why would you reference the tail?
[19:01:09] <whitequark> fast appends?
[19:01:23] *** Quits: derek_c (derek@E909217C.727D7A21.EB673A25.IP) (Ping timeout)
[19:01:29] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:01:51] <whitequark> wycats_: if I was you, I'd unsafely reference the last element, and then made sure it's not possible to modify list nodes without list's knowledge
[19:01:57] <Ms2ger> Why would you append to a linked list? That's what the front is for :)
[19:02:12] <bstrie> some would ask, why even use a linked list at all :P
[19:02:13] <wycats_> in order to iterate over it you need the "front" and "back" whatever that means
[19:02:29] <wycats_> front to iterate, back to append
[19:02:39] <bstrie> wycats_: are you trying to implement Iterator for a linked list?
[19:02:46] <wycats_> I will eventually need to
[19:02:49] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[19:02:55] <bstrie> wycats_: Iterator only requires a next() method
[19:02:58] <wycats_> I'm trying an arena+list strategy to reduce malloc
[19:03:03] <wycats_> bstrie: but you need the beginning ;)
[19:03:13] <bstrie> well there's no problem with referencing the beginning :P
[19:03:24] <wycats_> you need the end to append ;)
[19:03:37] <bstrie> wycats_: I hear pcwalton just gave us a fast new arena lib, are you using that?
[19:03:40] <wycats_> appending to the front and iterating backwards is not sensible
[19:03:48] <wycats_> I was planning on using extra::arena
[19:03:55] <wycats_> but I need to make the list first
[19:04:03] <wycats_> DList uses owned nodes
[19:04:08] <wycats_> which I assume won't work with arenas
[19:04:51] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:04:51] *** ChanServ sets mode: +ao brson brson
[19:04:58] <bachm> say I have a vector with 100 elements that represents a 10x10 grid. is there some way to iterate over a rectangular subsection of the grid with the vec::chunks method? the subsection can be anywhere in the grid and of any size
[19:06:11] <wycats_> I guess unsafe pointers to the back is fine
[19:06:18] <Eridius> bachm: not with chunks certainly, that method doesn't do what you want
[19:06:22] <Eridius> bachm: but you could write your own iterator
[19:06:58] <wycats_> I have managed to avoid unsafe code until now... it feels really bad :P
[19:07:20] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[19:07:30] <bstrie> wycats_: we let you drop into unsafe code for a reason!
[19:07:34] <bachm> the unsafe code, or trying to avoid unsafe code?
[19:08:00] <bstrie> wycats_: that said, you should still feel bad about it :)
[19:08:00] <erickt> wycats_: how have you managed to avoid unsafe code? aren't you writing rust code against the ruby c library?
[19:08:41] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[19:09:09] <Eridius> bachm: actually maybe with flat_map() and chunks..
[19:10:16] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[19:10:53] <Eridius> bachm: v.chunks(10).skip(y).take(height).flat_map(|v| v.iter().skip(x).take(width))
[19:11:04] *** Joins: msm (Mibbit@moz-2202AB44.hsd1.ga.comcast.net)
[19:11:11] <Eridius> bachm: that will give you an iterator that will yield each element of the sub-rectangle in turn (well, each &T)
[19:11:12] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:11:43] *** Parts: \n (uid15310@moz-31ABA2C0.irccloud.com) ()
[19:11:58] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[19:11:59] *** Joins: matthewbot (user@moz-C6814817.ga.at.cox.net)
[19:12:27] *** Joins: nik_ (nik@moz-936786A3.pool.mediaways.net)
[19:12:44] *** Quits: nkoep (nik@moz-C871FE27.pool.mediaways.net) (Ping timeout)
[19:13:27] *** Quits: japaric (japaric@5F207A99.A347E168.F4D5766F.IP) (Quit: WeeChat 0.4.2)
[19:14:38] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[19:14:38] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:14:38] *** ChanServ sets mode: +ao brson brson
[19:15:45] *** Quits: oberstet (quassel@moz-7EC8E4B7.dynamic.mnet-online.de) (Connection reset by peer)
[19:16:35] *** Joins: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net)
[19:17:27] *** Joins: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net)
[19:17:50] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[19:18:26] *** Quits: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net) (Ping timeout)
[19:18:43] *** Joins: FreeFull (freefull@moz-723D1C64.as13285.net)
[19:19:28] *** Joins: prooftechnique (prooftechn@moz-1C9C6B71.hsd1.vt.comcast.net)
[19:19:31] *** Joins: japaric (japaric@5F207A99.A347E168.F4D5766F.IP)
[19:19:50] <steveklabnik> erickt: in wycats_ 's ruby stuff, rust owns everything, so it's not actually unsafe
[19:19:55] <steveklabnik> it's ruby _calling_ c _calling_ rust
[19:19:57] <steveklabnik> not rust calling c
[19:20:15] <steveklabnik> well, i mean the C is unsafe ;)
[19:20:18] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Connection reset by peer)
[19:20:32] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[19:21:10] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[19:21:59] *** Quits: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net) (Ping timeout)
[19:22:10] *** Joins: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP)
[19:22:25] *** Quits: FreeFull (freefull@moz-723D1C64.as13285.net) (Ping timeout)
[19:22:50] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[19:23:27] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[19:23:48] *** Quits: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP) (Connection reset by peer)
[19:24:16] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:26:00] *** Quits: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net) (Quit: Sharp)
[19:26:53] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[19:27:30] *** Joins: kris (kris@moz-C9C5DD55.dk.customer.tdc.net)
[19:27:34] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[19:27:53] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:28:16] <bachm> Eridius: pretty impressive, it seems to work
[19:28:46] *** Quits: hoverbear (hoverbear@moz-C2B3C905.wireless.uvic.ca) (Ping timeout)
[19:28:50] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[19:30:20] *** Quits: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[19:31:59] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[19:31:59] *** ChanServ sets mode: +ao pcwalton pcwalton
[19:32:40] *** Joins: atomical (atomical@moz-C92D67E2.library.northwestern.edu)
[19:32:55] *** Joins: hoverbear (hoverbear@moz-C2B3C905.wireless.uvic.ca)
[19:33:43] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[19:33:49] *** Joins: sigma1 (sigma@moz-9EAC972C.range86-184.btcentralplus.com)
[19:35:53] <wycats_> Yeah the c is unsafe but none of the rust is
[19:35:55] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[19:36:21] *** Quits: sigma1 (sigma@moz-9EAC972C.range86-184.btcentralplus.com) (Ping timeout)
[19:36:27] <wycats_> It's on c to maintain the invariants
[19:36:40] *** Joins: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net)
[19:36:49] <eddyb> omg, I just had a crazy (good) idea
[19:36:59] *** Quits: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net) (Quit: Sharp)
[19:37:06] <eddyb> I can do safe runtime interface polymorphism in Rust :D
[19:37:40] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[19:37:52] <eddyb> a Many trait, similar to Any, but the implementer chooses a set of &Trait's that it can return
[19:38:17] <bstrie> haha
[19:38:21] <bstrie> I just like the name
[19:38:23] <bstrie> Many and Any
[19:38:32] <eddyb> mini mo
[19:38:33] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[19:38:45] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[19:38:47] <eddyb> using the type IDs of the &Trait types, this can be just as safe as Any is
[19:38:56] *** Joins: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP)
[19:39:16] *** Quits: gverilla (gverilla@moz-A576889C.versanet.de) (Quit: Leaving)
[19:39:47] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[19:40:02] <eddyb> and you might implement it like: many!(Add<uint, uint> + ToStr + Integer + Unsigned for uint);
[19:40:11] <carter> pcwalton: thanks, i was a bit .... after seeing that remark
[19:40:18] <flu-> eddyb: that's interesting. Could cut down on the distinct types needed to implement a pattern such as bridge
[19:40:36] <eddyb> pcmattman: this Many idea might solve the extensible enum issue from pedigree :D
[19:40:50] <carter> do my follow on questions to the other person's shuffle rfc make sense?
[19:40:58] <pcwalton> yeah they do
[19:41:00] <pcwalton> well
[19:41:20] <pcwalton> I think there is a distinction between "numeric template parameters" and associated constants
[19:41:25] <carter> ok
[19:41:29] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[19:41:30] <carter> i don't know enough  to know
[19:41:30] <bstrie> wycats_: so, again... why a linked list? and why not the one in the stdlib?
[19:41:33] <eddyb> flu-: you can technically also have a DynMany using a HashMap :D
[19:41:37] <pcwalton> namely, the position here
[19:41:39] <pcwalton> [T, ..N]
[19:41:41] <pcwalton> N is a constant
[19:41:44] <carter> yeah
[19:41:45] <pcwalton> which is a different production from a type
[19:41:45] <wycats_> bstrie: I want an arena-allocated linked list
[19:41:50] <carter> ok
[19:41:56] <pcwalton> but I think that is fine because we want to have associated constants
[19:42:00] <bstrie> wycats_: you say that you don't think extra::arena will work with owned pointers, but they you're making your bespoke LL with owned pointers awyway...
[19:42:01] <wycats_> and unless I'm misunderstanding if your library uses ~T you can't arena-allocate
[19:42:03] <pcwalton> which are like associated types but, well, constants instead of types
[19:42:04] <carter> i was just repeating an idea someone else had thrown to me
[19:42:08] <wycats_> bstrie: nah
[19:42:10] <carter> ok
[19:42:10] <bstrie> wycats_: well pcwalton would be the one to know
[19:42:10] <carter> cool
[19:42:11] <wycats_> embedded
[19:42:12] *** Quits: alexanderkyte (alexanderk@moz-95DBFBC5.csh.rit.edu) (Ping timeout)
[19:42:16] <wycats_> T not ~T
[19:42:24] <carter> pcwalton: ok, i'm glad i'm be helpful 
[19:42:27] <eddyb> pcwalton: are we discussing that? it's awesome, even if it's obscuring my Many idea :P
[19:42:28] <wycats_> Node<T> not ~Node<T>
[19:42:31] <pcwalton> maybe this is the time for the allocator library? :)
[19:43:04] *** Quits: prooftechnique (prooftechn@moz-1C9C6B71.hsd1.vt.comcast.net) (Quit: )
[19:43:14] <eddyb> allocators? I have a PR waiting which helps with that :P
[19:43:19] <carter> but yeah, the initial proposal lacks the "interleaving elements from two vectors" feature of llvm shuffle / half of the simd ops that most cpus support
[19:43:36] <wycats_> I think I'm cool with maintaining a *Node<T> to the back
[19:43:43] <wycats_> and maintaining a safe interface
[19:44:48] *** Joins: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au)
[19:44:49] <wycats_> I have no idea how to work with *T :P
[19:45:38] *** Joins: alexanderkyte (alexanderk@moz-95DBFBC5.csh.rit.edu)
[19:46:02] *** Joins: nif (nif@moz-8181E2AC.oberlin.net)
[19:46:04] <whitequark> just like with &T, except you need to wrap dereferences into unsafe{]
[19:46:22] *** Quits: squiddy (squiddy@moz-915F460F.adsl.alicedsl.de) (Input/output error)
[19:46:33] *** Quits: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au) (Ping timeout)
[19:46:37] <whitequark> well, and actually guaranteeing the safety :p
[19:48:01] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[19:48:17] <wycats_> how do I take a value and get an unsafe pointer to it
[19:48:31] <wycats_> *foo obviously isn't it
[19:48:35] <wycats_> nor &foo
[19:48:53] <Ms2ger> let x: &T = ...; let y: *T = x;
[19:48:59] <wycats_> aha
[19:49:10] <wycats_> or x as *T?
[19:49:14] <Ms2ger> Or without the variables; it just coerces
[19:49:18] <Ms2ger> No need
[19:49:41] <wycats_> ah the inferencer will take care of it
[19:49:56] <wycats_> autoref baby
[19:50:08] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Input/output error)
[19:51:09] *** Joins: bytewise (bytewise@moz-175CA5D5.adsl.alicedsl.de)
[19:51:16] *** Quits: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP) (Ping timeout)
[19:51:27] <wycats_> hm no
[19:51:27] <wycats_> mismatched types: expected `std::option::Option<*list::Node<T>>` but found `std::option::Option<list::Node<T>>` (expected *-ptr but found struct list::Node)
[19:51:44] <wycats_> self.tail = unsafe { Some(node) }
[19:51:46] <wycats_> no dice
[19:52:20] *** Joins: drjeats (drjeats@moz-3D31C6D2.nyc.res.rr.com)
[19:52:28] *** Joins: danieleggert_2 (Mibbit@moz-4E2DB390.superkabel.de)
[19:52:37] *** Joins: sigma1 (sigma@C91C7F36.70518F41.9D18269F.IP)
[19:52:38] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:53:10] <wycats_> non-scalar cast: `list::Node<T>` as `*list::Node<T>`
[19:53:12] <wycats_> hmmm
[19:53:21] <kimundi> wycats_: Well, yo don't have a pointer type there to coerce - also, it wouldn't work nested in an other type anyway afaik
[19:53:35] <danieleggert_2> When calling Rust from C (mixing source code), are there a static versions of the rust libraries?
[19:53:47] <wycats_> danieleggert_2: yep
[19:53:50] <bascule> wycats_: should sell Rust stickers through DevSwag bro
[19:53:52] <wycats_> use --rlib and --staticlib
[19:53:57] <wycats_> bascule: tell Mozilla
[19:54:01] <bascule> I did!
[19:54:02] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[19:54:08] <wycats_> bascule: we're game
[19:54:19] <bascule> there was an email thread this morning
[19:54:24] <wycats_> T-shirts would be awesome
[19:54:29] <bascule> heh
[19:54:33] <bascule> I'd totally take a Rust shirt
[19:54:51] <wycats_> me too
[19:55:04] <danieleggert_2> I'm getting
[19:55:05] <wycats_> so there's no way to get a pointer to a T?
[19:55:05] <danieleggert_2> Undefined symbols for architecture x86_64:   "_rust_crate_map_std::_3e5aeb837ae1622e::v0.9", referenced from:       __crate_map_child_vectors in foo.a
[19:55:07] <carter> bascule: i like the new channels proposal, its conservative in that it gives room to add nicer data structures later
[19:55:08] <wycats_> seems... bad?
[19:55:17] <wycats_> danieleggert_2: you may need -Z generate-crate-map
[19:55:22] <wycats_> acrichto: ^
[19:55:31] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Quit: msingle)
[19:55:46] <bascule> carter: yep, I like it
[19:55:50] <acrichto> danieleggert_2: yeah if you compile with --staticlib you'll also need -Z gen-crate-map
[19:56:04] <carter> it doesn't have anything fancy
[19:56:18] <carter> but it doesn't rule out fancier stuff happening
[19:56:25] * acrichto -> lunch
[19:56:29] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[19:56:29] <carter> but by virtue of being not fancy, unlikely to break
[19:56:51] <danieleggert_2> I'm compiling with   rustc --staticlib --rlib -c -Z gen-crate-map -o
[19:57:05] <wycats_> how can haz coerce from T -> *T
[19:57:17] <danieleggert_2> Thanks. Doesn't help, though. The linker is still complaining for some reason.
[19:57:20] <Ms2ger> From &T to *T
[19:57:23] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:57:26] <carter> wycats_: you can't in generall, what if the value T is in a register?
[19:57:37] <wycats_> so borrow it first, then cast?
[19:57:55] <carter> sounds reasonable
[19:58:09] <wycats_> can we call that a "steal"? :P
[19:58:11] <Ms2ger> No need to explicitly cast
[19:58:15] *** Joins: geoffhill (geoffhill@moz-738DC0DB.org)
[19:58:31] <wycats_> Ms2ger: expected `std::option::Option<*list::Node<T>>` but found `std::option::Option<&list::Node<T>>`
[19:58:38] <wycats_> seems like it's not auto-casting
[19:58:45] <Ms2ger> Mmm
[19:58:56] <Ms2ger> Yeah, different layout
[19:59:30] <Ms2ger> .map(|x| x), maybe
[19:59:38] <wycats_> casting worked
[19:59:40] <wycats_> attempted access of field `next` on type `*list::Node<T>`, but no field with that name was found
[19:59:45] <wycats_> deref?
[19:59:45] <Ms2ger> Casting how?
[19:59:50] <wycats_> as *Node<T>
[20:00:03] <Ms2ger> In the map, I assume
[20:00:13] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[20:01:08] <wycats_> ?
[20:01:38] *** Quits: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Ping timeout)
[20:01:43] *** Quits: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[20:02:45] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[20:03:56] <wycats_> cannot move out of dereference of * pointer
[20:03:57] <wycats_> why not
[20:04:05] <wycats_> I thought I was "LOOK MA NO HANDS"
[20:04:57] <Ms2ger> "Look ma, no teeth"?
[20:04:59] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[20:05:57] <wycats_> I have an Option<*Node>
[20:06:07] <wycats_> and I want to deref so I can work with it
[20:06:30] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[20:06:36] <wycats_> let mut tail = unsafe { *self.tail.take_unwrap() }; is what I'm trying
[20:07:17] <danieleggert_2> I'm making progress.
[20:07:33] <danieleggert_2> Still seeing Undefined symbols for architecture x86_64:   "___morestack"
[20:07:41] <danieleggert_2> What's that?
[20:08:34] <wycats_> Ms2ger: ^
[20:08:47] <Ms2ger> Not sure
[20:09:09] <wycats_> I would think this would be an everyday thing to want to do
[20:09:17] <wycats_> I can't actually do anything with the *Node
[20:09:19] <wycats_> I need a Node
[20:09:45] <wycats_> https://www.irccloud.com/pastebin/OZuvXB85
[20:10:00] <Ms2ger> Try &*foo
[20:10:13] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[20:11:15] <wycats_> "how do I work with *" "same as &" LIES
[20:11:17] <wycats_> https://www.irccloud.com/pastebin/ND4haSbn
[20:11:56] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[20:12:11] <o11c> isn't Option<*T> redundant/bad, since *T is already nullable?
[20:12:29] <wycats_> hm
[20:12:30] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[20:12:39] <wycats_> how do I find out if *T is null?
[20:12:47] <wycats_> I guess I need to re-ask "how do I work with *T"
[20:12:49] <jdm> .is_null()?
[20:12:49] *** Joins: dgryski (dgryski@moz-DEAD01C9.adsl-surfen.hetnet.nl)
[20:13:21] *** Joins: danieleggert (Mibbit@moz-4E2DB390.superkabel.de)
[20:14:07] <wycats_> is there a null?
[20:14:17] *** Quits: danieleggert_2 (Mibbit@moz-4E2DB390.superkabel.de) (Quit: http://www.mibbit.com ajax IRC Client)
[20:14:35] <jdm> wycats_: ptr::null()
[20:14:37] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[20:14:43] <dgryski> Hi, what's the state of the networking code at the moment?  I'd like to add tcp proxying support to my hexdumper.
[20:15:04] <wycats_> https://www.irccloud.com/pastebin/NSDUhwcg
[20:15:10] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[20:15:15] <wycats_> ah it's a function
[20:15:22] <wycats_> sorry I'm being dumb
[20:15:24] <wycats_> uno momento
[20:15:25] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: computer sleeping)
[20:15:37] <wycats_> "let me let #rust write my code" NO
[20:15:44] <dgryski> In my Go implementation, I just spawn two goroutines, one which reads from the source socket, hexdumps to stdout, and then writes the bytes to the other end, and another one that does the same thing in reverse.
[20:16:04] <mcpherrin> dgryski: you should be able to do the same in Rust
[20:16:21] <dgryski> https://github.com/dgryski/dhd/blob/master/main.go   vs   https://github.com/dgryski/rust-hd/blob/master/hd.rs
[20:16:36] <wycats_> hm back here:
[20:16:39] <wycats_> https://www.irccloud.com/pastebin/jpCmLgg5
[20:16:40] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[20:16:44] <dgryski> mcpherrin: ok, is there sample networking code I can look at?
[20:17:20] *** Joins: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net)
[20:17:21] *** Joins: moostik (Icedove@moz-53E05E9C.w92-151.abo.wanadoo.fr)
[20:17:29] *** Joins: SingingBoyo (SingingBoy@moz-14D91900.ubcsecure.wireless.ubc.ca)
[20:17:48] *** Quits: KindOne (KindOne@moz-E60622A1.dynamic.ip.windstream.net) (Ping timeout)
[20:18:52] <mcpherrin> dgryski: not sure.  You probably just want to browse std::io::net source
[20:18:59] <mcpherrin> and look at test cases
[20:19:08] *** Quits: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net) (Ping timeout)
[20:19:15] <dgryski> ok
[20:19:23] *** Joins: SingingB1 (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP)
[20:20:17] <wycats_> how I feel working with unsafe code: http://d24w6bsrhbeh9d.cloudfront.net/photo/4614736_700b.jpg
[20:21:34] *** Joins: KindOne (KindOne@moz-714DC945.dynamic.ip.windstream.net)
[20:22:40] <wycats_> https://www.irccloud.com/pastebin/EuJSmkje
[20:22:41] <wycats_> wtf
[20:22:41] <bstrie> wycats_: how you should feel working with unsafe code: http://www.ignani.com/Portals/0/digmeta/1/Windows-Live-Writer/30e4b6cb6368_CE21/image_thumb_3.png
[20:23:20] *** Joins: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP)
[20:23:43] *** Joins: chromatic (chromatic@moz-28CBC7F4.hsd1.or.comcast.net)
[20:23:47] <mcpherrin> bstrie: K&R is full of examples of writing code with no regard for safety ... I don't know if that's exactly how people should be writing unsafe code ;)
[20:24:29] *** Quits: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP) (Connection reset by peer)
[20:26:01] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[20:26:09] <bstrie> wycats_: you could also just try using Rc :P
[20:26:32] <bstrie> bascule: I suggested recently that we should create a new cryptocurrency, called "rustcoin", and hand it out to people for submitting patches
[20:26:38] <bstrie> to be redeemable for stickers and swag
[20:27:06] <sigma1> the build slaves can mine it in their downtime
[20:27:31] <eddyb> bstrie: I need to find simpler things to work on
[20:27:55] <bstrie> wycats_: if you're getting immutable errors, keep in mind that `*mut` is also a thing
[20:28:00] <bstrie> though I have no idea what it does
[20:28:02] <eddyb> spending a few days on changing thousands of lines get exhausting
[20:28:14] <bstrie> eddyb: have you considered knitting
[20:28:19] <eddyb> *mut T is there so you don't shoot yourself without asking the compiler first
[20:28:23] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:28:26] <eddyb> bstrie: done it when I was younger
[20:28:34] * igork found this guide useful uhttp://static.rust-lang.org/doc/master/guide-runtime.html, the only question is left - what i should to do if i want not to use runtimes at all. its stated in guide that i can do that, but not tells how. 
[20:28:38] <bstrie> eddyb: wycats_ is trying to do something dumb with unsafe pointers, I dunno. help him out
[20:29:07] <o11c> igork: look up rust-core
[20:29:16] <eddyb> bstrie: I wouldn't recommend something *that* boring to someone with ADHD, TBH
[20:29:40] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[20:30:36] *** Quits: SingingB1 (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP) (Quit: WeeChat 0.4.3-dev)
[20:30:51] <wycats_> bstrie: not dumb!
[20:30:58] <wycats_> I think you're the one who told me to use it!
[20:31:00] <bstrie> wycats_: linked lists are dumb!
[20:31:04] <bstrie> everything is dumb!
[20:31:12] <eddyb> wycats_: doubly linked lists?
[20:31:15] <igork> o11c: thanks i will, also it would be nice if there be some remark in guide too, so all cases will be covered
[20:31:18] <wycats_> nah
[20:31:19] <wycats_> just a tail
[20:31:22] <bstrie> eddyb: no, singly-linked but he wants a pointer to the tail
[20:31:31] <bstrie> because what he really wants is a structure with fast appends :P
[20:31:33] <wycats_> *mut doesn't seem like a thing
[20:31:36] <wycats_> https://www.irccloud.com/pastebin/AQeXIV5s
[20:31:40] <wycats_> bstrie: confirm
[20:31:41] <eddyb> wycats_: *mut T is a thing
[20:31:51] <wycats_> seems like not a thing
[20:31:59] <eddyb> LOL
[20:32:05] <eddyb> wycats_: it's a pointer type
[20:32:23] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[20:33:02] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[20:33:03] <luz> &mut *mut what
[20:33:05] <whitequark> there's not much difference between *T and *mut T, seeing as they are converted at need
[20:33:32] <eddyb> *T isn't converted into *mut T automatically
[20:33:48] <eddyb> &T can't be directly cast to *mut T
[20:34:03] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:34:08] <eddyb> as I've said, small set of rules to makes it harder to shoot yourself in the foot, even when working with unsafe pointers
[20:34:18] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[20:34:18] *** Joins: samx (sami@moz-D9F3E0AE.pp.htv.fi)
[20:34:27] <strcat> eddyb: hm?
[20:34:40] <strcat> ah you mean the borrowck rules
[20:34:48] <eddyb> *to make it harder
[20:34:56] *** Joins: autra_ (augustin@moz-BE76895F.fbx.proxad.net)
[20:34:59] <wycats_> I have a *Node
[20:35:04] <wycats_> I want to modify the node
[20:35:05] <wycats_> how do I do this
[20:35:07] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[20:35:09] <wycats_> seems like a simple question ;)
[20:35:10] <eddyb> strcat: <3 0ns https://github.com/mozilla/rust/pull/11539#issuecomment-32291830
[20:35:10] <strcat> wycats_: use *mut Node
[20:35:26] <strcat> eddyb: I know
[20:35:35] <strcat> that's why I use *mut u8 or *u8 in my bindings atm
[20:35:38] <eddyb> it's amazing what LLVM can do if you use it right
[20:35:40] <strcat> instead of Void
[20:35:51] <strcat> eddyb: really dumb dead store elimination doesn't impress me ;p
[20:35:56] <wycats_> https://www.irccloud.com/pastebin/enWg2h0q
[20:35:57] <strcat> it can't even move them to the stack yet!
[20:36:04] <wycats_> *mut self.tail doesn't seem to work
[20:36:07] <wycats_> ahhhh
[20:36:08] <strcat> it's just a special case for malloc/free
[20:36:11] <strcat> in dead store elimination
[20:36:12] <wycats_> you're saying in the struct
[20:36:18] <strcat> a super special case that rarely occurs
[20:36:25] <strcat> have to actually allocate when you don't need to allocate
[20:36:31] <strcat> as in... you don't use the allocation at all
[20:36:43] <strcat> if you allocate but you could have done a stack alloca, it doesn't care
[20:36:51] *** Quits: victorporof (victorporo@416E2802.271BFD43.9B1E38F4.IP) (Quit: victorporof)
[20:36:56] * strcat wonders if it ever occurs in real rust programs...
[20:36:56] <eddyb> I hope it can const-eval format! soon :P
[20:37:06] *** Quits: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: dherman)
[20:37:25] <eddyb> strcat: I'll have to add a slice sink to std::vec::test to revive those benchmarks
[20:37:26] *** Joins: Savago (Savago@4C500BA5.40BDE760.18DDB669.IP)
[20:37:48] <jensnockert> I'm so emotionally happy right now, even in my small town we just had 20 people listening to a presentation about Rust and Servo <3
[20:37:52] <strcat> meh
[20:37:54] <jensnockert> It was amazings.
[20:37:57] <wycats_> zomg it compiles
[20:37:59] <strcat> eddyb: I'd rather have IR tests for this kind of thing
[20:37:59] <eddyb> #[inline(never)] fn keep_slice_alive<T>(_: &[T]){}
[20:38:00] <strcat> not benchmarks
[20:38:01] <wycats_> holy shit
[20:38:04] <wycats_> why do you need *mut
[20:38:06] <strcat> eddyb: it will remove that function
[20:38:06] <jensnockert> I feel like a mother.
[20:38:07] <wycats_> seems ridiculous
[20:38:09] *** Joins: shilgapira (chatzilla@moz-703651C7.barak.net.il)
[20:38:17] <wycats_> it's an unsafe pointer but you have to specify mutable?!
[20:38:18] <strcat> wycats_: because when you write C bindings, you use *mut by default
[20:38:23] <strcat> you only use * when it's immutable
[20:38:24] <eddyb> strcat: nope, it doesn't, it's not the first time I do this
[20:38:25] <strcat> it's for humans
[20:38:39] <strcat> it's basically impossible to get mutability right at a higher-level if you don't get it right at a low-level one
[20:38:46] <strcat> if you use * everywhere, & will coerce to it
[20:38:55] <strcat> you'll have undefined behaviour from mutating non-mutable locals/statics
[20:39:04] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[20:39:06] <wycats_> seems weird
[20:39:07] <strcat> let x = 5; foo(&x)
[20:39:16] <strcat> would be able to mutate `x` if you incorrectly use *
[20:39:28] <strcat> wycats_: use *mut by default, and only * where you know it doesn't mutate
[20:39:35] <strcat> helps quite a bit in my experience
[20:39:51] <strcat> the stdlib does this incorrectly, and by extension it has undefined mutability issues all over
[20:40:04] <eddyb> much fun
[20:40:10] <strcat> it does mutability incorrectly *because* it doesn't annotate C functions correctly
[20:40:14] <strcat> and then doesn't do the correct borrows
[20:40:20] <wycats_> strcat: seems easy to screw up
[20:40:21] <strcat> and then doesn't have mutable locals/whatever
[20:40:28] <strcat> wycats_: not really, bindgen gets it right now
[20:40:41] <strcat> if you write the C bindings by hand, translate * -> *mut and const * -> *
[20:40:47] <strcat> * could be renamed to *const
[20:40:47] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[20:40:55] <strcat> would be nice if *mut coerced to it too
[20:41:07] <strcat> wycats_: it's easier to get wrong without a difference between them
[20:41:21] <wycats_> I think we just need a "writing unsafe code" guide
[20:41:31] <wycats_> is there a "writing an iterator" guide?
[20:41:37] <eddyb> we have a const keyword. fun fact: the code capable of reading ~mut self and @mut self was looking ahead for "const"
[20:41:37] <strcat> yes
[20:41:42] <eddyb> ofc I removed that crazyness
[20:41:43] <strcat> wycats_: in the iterator tutorial
[20:41:46] <strcat> if that's what you mean
[20:41:47] *** Quits: danieleggert (Mibbit@moz-4E2DB390.superkabel.de) (Quit: http://www.mibbit.com ajax IRC Client)
[20:41:52] <wycats_> looking
[20:42:04] <wycats_> http://static.rust-lang.org/doc/master/guide-container.html 
[20:42:05] <wycats_> ?
[20:42:07] <strcat> it doesn't tell you anything other than how to impl the trait
[20:42:09] <strcat> wycats_: yes
[20:42:15] <bstrie> isn't the "guide to writing an iterator" just "implement Iterator" which is just "implement next()"
[20:42:23] <strcat> and size_hint
[20:42:25] <strcat> ;p
[20:42:35] <wycats_> sounds good
[20:42:39] *** Quits: SingingBoyo (SingingBoy@moz-14D91900.ubcsecure.wireless.ubc.ca) (Ping timeout)
[20:42:48] <wycats_> what does size_hint do?
[20:42:50] <dgryski> strcat: 'the stdlib does this incorrectly'   <-- sounds like a lot of work to clean up the stdlib, but something that needs to be done before 1.0
[20:42:53] <strcat> wycats_: read it :)
[20:43:19] <strcat> dgryski: well the stdlib does a lot of this stuff wrong
[20:43:20] <eddyb> it gives you a hint to the run length of the iterator
[20:43:21] <bstrie> strcat: is rust-core still relevant? the readme still mentions segmented stacks a lot
[20:43:31] <wycats_> I'm being lazy today
[20:43:32] <wycats_> bad me
[20:43:34] <strcat> bstrie: rust-core is still relevant and the README is up-to-date
[20:43:35] <eddyb> (though run length might be confused for RLE)
[20:43:42] <Ms2ger> eddyb, ~mut const self?
[20:43:51] *** Quits: int3_ (int3_@D6C7AF99.B82E4B8F.EC6C369A.IP) (Client exited)
[20:43:53] <eddyb> Ms2ger: ~const self
[20:43:55] *** Joins: davbo (dave@moz-84455EE7.skybroadband.com)
[20:44:01] <strcat> bstrie: rust still uses LLVM's segmented stack support
[20:44:01] <wycats_> it doesn't say what the upper bound is used for
[20:44:17] <strcat> wycats_: so you can reduce an eager allocation size
[20:44:23] *** Joins: SingingBoyo (SingingBoy@moz-14D91900.ubcsecure.wireless.ubc.ca)
[20:44:27] <strcat> you might allocate 4K by default but reduce it if you know better
[20:44:27] *** Joins: pzol (pzol@moz-553BEE64.dynamic.chello.pl)
[20:44:29] <strcat> or whatever
[20:45:33] *** Joins: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au)
[20:46:03] <wycats_> it's optional right?
[20:46:04] <eddyb> bstrie: I like how someone posted http://cosmic.mearie.org/tmp/periodic-table-of-rust-types to reddit while Yurume is sleeping :P
[20:46:07] <strcat> wycats_: yes
[20:46:10] <strcat> wycats_: can use None
[20:46:15] <strcat> wycats_: implementing size_hint is optional
[20:46:15] *** Quits: pzol (pzol@moz-553BEE64.dynamic.chello.pl) (Ping timeout)
[20:46:17] <strcat> it's a default method
[20:46:26] <strcat> returns (0, None) by default (meaning you know nothing)
[20:47:17] *** Quits: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au) (Ping timeout)
[20:47:29] <davbo> Mornin' all, I'm trying to update this code to 0.9 and I'm a bit lost with how it should be done now. https://github.com/davbo/rust-term/blob/master/src/ios.rs#L47
[20:48:11] <sfackler> davbo: body: || -> T
[20:48:48] <eddyb> oooh, exception-safe code. neat
[20:49:34] <strcat> bstrie: pretty sure rust-core will exist for a long time anyway
[20:50:02] <strcat> no unwinding, works for freestanding usage, everything can be entirely eliminated as dead code if unused
[20:50:19] <strcat> will be able to set affinity, priority, scheduling mode
[20:51:09] <davbo> sfackler: got that, I still get: error: last argument in `do` call has non-procedure type: ||
[20:51:11] <strcat> already have multiple-consumer/multiple-producer queues (FIFO, priority) with a full API, concurrent hash table via sharding, etc.
[20:51:35] <strcat> bstrie: https://github.com/thestinger/rust-core/blob/master/core/concurrent.rs#L321
[20:51:37] <strcat> *shrug*
[20:51:49] <strcat> I haven't really done much rust for 4-5 weeks
[20:52:04] <bstrie> looks neat
[20:52:10] <strcat> if I do start again, I'll be filling out an equivalent to everything in the stdlib with the API I like there...
[20:52:10] *** Joins: mjiig (mjiig@moz-E7EA111C.clients.kiwiirc.com)
[20:52:13] <eddyb> davbo: do f {} => f(|| {})
[20:52:26] <strcat> I like having somewhere where I can push what I want
[20:52:35] *** Joins: prgrmr (eddey@moz-2C1DF1C5.dynamic.isadsl.co.za)
[20:52:36] <strcat> and then trying to get it accepted upstream
[20:52:41] *** Quits: prgrmr (eddey@moz-2C1DF1C5.dynamic.isadsl.co.za) (Quit: prgrmr)
[20:52:45] <strcat> but not worrying if it's rejected
[20:52:45] <bstrie> it's a good strategy
[20:52:51] <strcat> because hey, I have my own stdlib anyway ;p
[20:53:05] <bstrie> lang items exist for a reason :P
[20:53:26] <o11c> rust shouldn't have a stdlib anyway
[20:53:42] <o11c> if only it had a decent package manager ...
[20:53:50] <bstrie> o11c: I disagree. either we provide one or people invent a dozen
[20:53:58] <bstrie> and if people still invent a dozen, that's their right
[20:53:59] <strcat> bstrie: well it exists due to frustration with libstd... I don't like a lot of it, and it's hard to convince people of stuff over IRC or githu
[20:54:02] <strcat> github
[20:54:13] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[20:54:14] <strcat> I'm still impressed with myself for forcing iterators on all of you
[20:54:23] * strcat shrugs
[20:54:25] <bstrie> nah iterators were a good idea
[20:54:31] *** Joins: prgrmr (eddey@moz-2C1DF1C5.dynamic.isadsl.co.za)
[20:54:34] <o11c> retrospectively
[20:54:46] <strcat> so are multiple-producer/multiple-consumer queues as the default and a sharded hash table ;p
[20:54:49] <bstrie> nope, priorspective as well
[20:54:49] <eddyb> strcat: you wanted to get rid of env params, right?
[20:55:06] <mjiig> how can i get a vector of strings (one entry per line) from a file object?
[20:55:24] <strcat> and I want a 1:1 model task tree/DAG like TBB (and it seems, grand central dispatch is a crippled version)
[20:55:40] <strcat> where a task is a small number of bytes at a minimum
[20:55:41] <strcat> no stack
[20:55:47] <bachm> what's going to happen with the std?
[20:55:48] <o11c> note to self: shard globals away
[20:56:06] *** Joins: ivan (ivan@moz-531C3EC9.members.linode.com)
[20:56:09] <strcat> o11c: sharded hash tables are pretty cool ;p
[20:56:18] <eddyb> strcat: I... did that (I have the branch on github if you want to take a look at it), but nmatsakis needs to be convinced (he's not completely against removing them, but still wants a discussion)
[20:56:23] <strcat> evil global mutex -> split it as much as you want, wooo ;p
[20:56:25] <strcat> although
[20:56:32] <strcat> hardware lock elision makes it nearly pointless
[20:56:36] <eddyb> strcat: that is, if you've missed it in #rust-internals
[20:57:14] <o11c> strcat: modern hardware does not make old hardware useless - good software is still meaningful
[20:57:31] <strcat> o11c: sure
[20:57:38] <strcat> but it's less impressive due to HLE
[20:57:59] <o11c> and, how many years until I get hardware that does that?
[20:58:15] <strcat> o11c: when you buy a new laptop/desktop ;p
[20:58:27] *** Quits: SingingBoyo (SingingBoy@moz-14D91900.ubcsecure.wireless.ubc.ca) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[20:58:35] <strcat> all of haswell has RTM (restricted hardware transactional memory) and HLE
[20:58:41] <o11c> I just did ... what does it show up as in /proc/cpuinfo?
[20:58:57] <strcat> o11c: if it's haswell you have it
[20:59:05] <strcat> good chance you got ivy bridge though
[20:59:08] *** Quits: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP) (Quit: Konversation terminated!)
[20:59:13] <luz> haswells with unlocked multipliers (K variants) don't have HLE
[20:59:19] *** Joins: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP)
[20:59:33] <luz> i think
[20:59:35] <o11c> AMD A10-5745M actually
[20:59:43] <strcat> o11c: oh, then no ;p
[20:59:49] <strcat> although AMD will have it soon
[20:59:55] <eddyb> technically, a HashMap<TraitTypeId, *vtable> in tydesc is completely possible. including dynamic crate loading and whatnot
[20:59:56] <strcat> o11c: the nice thing about HLE is that it's backwards compatible
[21:00:07] <strcat> o11c: you don't even need GNU IFUNC-style dynamic code selection
[21:00:11] <strcat> HLE runs on your CPU
[21:00:15] <strcat> it's just... a no-op :)
[21:00:40] <o11c> it's just ... slow
[21:00:43] <strcat> anyway I expect the shards still help with HLE
[21:00:45] <eddyb> I think that's close to what RTTI does for C++
[21:00:57] <strcat> so on a non-HLE chip, you have contention spread across the shards
[21:01:13] *** Quits: Jemaclus (Mibbit@4EEAB704.5843BA5A.D4E4C7A5.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:01:18] <strcat> and SipHash guarantees that unless you are looking for the same key, the contention is a random spread
[21:01:47] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[21:01:50] <strcat> with HLE.... contention is eliminated for non-conflicting writes
[21:01:52] <strcat> er
[21:01:54] <strcat> writes/reads
[21:02:21] <strcat> it uses cache coherency to cancel speculative execution if a conflict happens
[21:02:23] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:02:27] <strcat> pretty cool.
[21:02:34] <mcpherrin> strcat: oh that is neat
[21:02:43] *** Joins: skoizza (Mibbit@D3C8B289.C325DF16.DDE5D3F6.IP)
[21:02:50] <strcat> mcpherrin: yup!
[21:02:54] <skoizza> Where is the default rust install location?
[21:02:58] <strcat> and RTM (restricted transaction memory) is a similar mechanism
[21:03:06] <strcat> mcpherrin: but... you write the transaction and abort code paths yourself
[21:03:09] <eddyb> is TypeId obtained from a deterministic hash?
[21:03:23] <mcpherrin> strcat: meh, I'm okay with that, as long as it's fast :)
[21:03:24] <strcat> mcpherrin: so with RTM, you will probably have to fall back to a lock too... but you can try a real transaction a few times first
[21:03:33] <strcat> mcpherrin: well that's the point :)
[21:03:33] <eddyb> such that it's still equal from a server and a client using the same communication library?
[21:03:37] *** Quits: mouse (mouse@moz-32DFB3CF.broadband.corbina.ru) (Ping timeout)
[21:03:46] <strcat> mcpherrin: HLE is a drop-in feature for locks that's backwards compatible as a no-op
[21:03:46] <eddyb> unless there's a version/type mismatch?
[21:03:55] <strcat> mcpherrin: while RTM lets you do fancy transactional memory stuff
[21:04:15] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[21:04:25] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[21:04:26] <mcpherrin> yeah that makes sense
[21:04:31] <eddyb> I'm thinking upgradeable polymorphic bridge
[21:04:39] <eddyb> for both syscalls and IPC
[21:05:18] <eddyb> and Rust could make it even type safe
[21:06:15] <eddyb> strcat: I have an excuse for my absence from OSDev :)
[21:06:25] <eddyb> I need DST for rustic
[21:06:39] *** Joins: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net)
[21:07:07] *** Joins: heftig (heftig@moz-B5CF9419.dip0.t-ipconnect.de)
[21:09:03] <Matthias247> if I use ref in a pattern match I get an immutable pointer. Could I get a mutable one or is that not possible?
[21:09:26] *** Quits: skoizza (Mibbit@D3C8B289.C325DF16.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:09:32] <mjiig> can anyone explain why file has to be mutable here:http://paste.ubuntu.com/6752609/ i get an error if it's not even though i don't change it
[21:09:56] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[21:10:01] *** Joins: mouse (mouse@moz-32DFB3CF.broadband.corbina.ru)
[21:10:03] <Matthias247> ah, now
[21:10:16] *** Quits: kris (kris@moz-C9C5DD55.dk.customer.tdc.net) (Ping timeout)
[21:10:16] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[21:10:18] <eddyb> Matthias247: ref mut :)
[21:10:30] <SiegeLord> mjiig: .lines() is mutating it
[21:10:31] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[21:10:33] <Matthias247> the parent of the struct I matched against was not mut, therefore ref mut for the member didn't work
[21:10:36] <eddyb> Matthias247: rule of thumb: mutability goes on the binding, not anywhere else
[21:10:39] *** Quits: drjeats (drjeats@moz-3D31C6D2.nyc.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[21:11:17] *** Joins: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[21:11:18] *** ChanServ sets mode: +ao dherman dherman
[21:12:21] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[21:12:25] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[21:12:52] *** Joins: vodik (simon@moz-7D40F91D.net.uwaterloo.ca)
[21:13:46] *** Quits: shilgapira (chatzilla@moz-703651C7.barak.net.il) (Ping timeout)
[21:14:21] *** Quits: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP) (Ping timeout)
[21:14:55] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[21:17:51] *** Quits: jackneill (jackneill@moz-8EF97071.pool.digikabel.hu) (Ping timeout)
[21:18:06] *** Joins: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net)
[21:19:12] <bascule> bstrie: hahaha re: Rustcoin
[21:19:59] *** Quits: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net) (Ping timeout)
[21:21:05] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[21:21:15] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[21:21:34] <halorgium> bascule: stalker
[21:21:36] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[21:21:48] <bascule> halorgium: lol ohai
[21:22:27] *** Quits: achim (achim@moz-24AAAEB6.dip0.t-ipconnect.de) (Quit: Computer has gone to sleep.)
[21:22:38] *** Joins: squiddy (squiddy@moz-915F460F.adsl.alicedsl.de)
[21:23:55] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[21:23:59] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[21:24:12] *** Joins: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP)
[21:25:52] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[21:25:52] *** ChanServ sets mode: +o tjc
[21:25:58] *** Quits: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP) (Ping timeout)
[21:26:05] *** Quits: autra_ (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[21:26:14] *** Joins: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP)
[21:27:22] *** Quits: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP) (Connection reset by peer)
[21:27:40] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[21:28:32] *** Quits: mouse (mouse@moz-32DFB3CF.broadband.corbina.ru) (Ping timeout)
[21:29:07] *** Quits: Ms2ger (Ms2ger@AA55AE55.592AEF45.F15B0BB3.IP) (Quit: nn)
[21:29:22] <steveklabnik> ahahaha
[21:29:24] *** Quits: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net) (Quit: Leaving.)
[21:29:24] *** Joins: ptc1 (Adium@moz-8F01578B.z72-46-65.customer.algx.net)
[21:29:25] *** ptc1 is now known as ptc
[21:29:25] *** Quits: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net) (Client exited)
[21:29:54] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[21:30:08] *** Quits: msm (Mibbit@moz-2202AB44.hsd1.ga.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:30:14] *** Joins: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net)
[21:30:54] *** Quits: sigma1 (sigma@C91C7F36.70518F41.9D18269F.IP) (Ping timeout)
[21:32:38] *** Joins: mouse (mouse@moz-32DFB3CF.broadband.corbina.ru)
[21:32:55] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[21:33:30] *** Joins: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au)
[21:34:08] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[21:35:03] *** Joins: Jemaclus (Mibbit@A084B2A7.5843BA5A.D4E4C7A5.IP)
[21:35:04] *** Quits: mjiig (mjiig@moz-E7EA111C.clients.kiwiirc.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[21:35:09] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[21:35:13] *** Quits: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au) (Ping timeout)
[21:35:37] <Jemaclus> ok, so i hate to keep harping on this
[21:35:51] <Jemaclus> but I'm getting this error when I try to make install on 0.9
[21:36:03] <Jemaclus> mk/install.mk:151: *** Aborting install because more than one library matching libstd-*.dylib is present in build tree x86_64-apple-darwin/stage2/lib: .  Stop.
[21:36:19] *** Joins: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au)
[21:36:30] *** Quits: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au) (Max SendQ exceeded)
[21:36:37] *** Joins: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au)
[21:36:40] <Jemaclus> any ideas?
[21:36:54] <Jemaclus> Mac OS X 10.9
[21:36:58] <Jemaclus> if that helps
[21:36:59] <tjc> Jemaclus: Did you try deleting your entire build directory and starting over?
[21:37:13] <tjc> as in, x86_64-apple-darwin/ or possibly build/x86_64-apple-darwin depending on how you set things up
[21:37:29] <Jemaclus> i'll try it and do it again
[21:37:47] *** Joins: twi1 (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au)
[21:38:12] *** Quits: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au) (Connection reset by peer)
[21:38:49] *** Quits: phil_ (phil@684D2576.37BA1B1C.20F09BA6.IP) (Quit: ())
[21:39:05] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[21:39:08] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[21:39:19] *** Quits: twi1 (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au) (Connection reset by peer)
[21:39:41] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:39:45] <tjc> yeah, it'll take a while, unfortunately, but that's the easiest way to fix some of these issues...
[21:39:59] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[21:40:03] <Jemaclus> yeah. we'll see.
[21:40:11] <Jemaclus> i've been trying for the last two days to get this thing to compile... :)
[21:40:42] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[21:41:12] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[21:41:36] *** Quits: samx (sami@moz-D9F3E0AE.pp.htv.fi) (Quit: This computer has gone to sleep)
[21:42:42] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[21:43:03] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:44:43] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[21:45:06] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[21:45:18] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[21:45:34] *** Quits: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se) (Quit: Ex-Chat)
[21:45:37] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[21:45:47] *** Joins: samx (sami@moz-D9F3E0AE.pp.htv.fi)
[21:46:16] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[21:48:36] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[21:50:35] *** Quits: mouse (mouse@moz-32DFB3CF.broadband.corbina.ru) (Ping timeout)
[21:51:07] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Client exited)
[21:52:06] *** Joins: kvanb (kvanb@moz-2C33D4E6.lnse3.lon.bigpond.net.au)
[21:52:47] *** Quits: Ferreus (ferreus@moz-929FE6D8.pools.arcor-ip.net) (Quit: WeeChat 0.4.3-dev)
[21:53:23] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:53:42] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[21:54:06] *** Joins: int3_ (int3_@D6C7AF99.B82E4B8F.EC6C369A.IP)
[21:54:16] <wycats_> https://www.irccloud.com/pastebin/hPXjkHuG
[21:54:19] <wycats_> whaaaaaa
[21:54:51] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[21:54:56] *** Joins: tq (tq@moz-9FE9CCF4.a251.priv.bahnhof.se)
[21:54:59] *** Quits: moostik (Icedove@moz-53E05E9C.w92-151.abo.wanadoo.fr) (Ping timeout)
[21:55:54] *** Quits: int3_ (int3_@D6C7AF99.B82E4B8F.EC6C369A.IP) (Ping timeout)
[21:56:43] *** Joins: moostik (Icedove@moz-53E05E9C.w92-151.abo.wanadoo.fr)
[21:57:30] *** Joins: gverilla (gverilla@moz-A576889C.versanet.de)
[21:57:31] <flaper87> mmh, I'm definitely missing something: http://pastebin.mozilla.org/4014935 Aynone ?
[21:58:24] *** jorendorff is now known as jorendorff_away
[21:58:57] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[21:59:41] <kimundi> flaper87: Both RHS and Result need to be Self afaik
[21:59:46] <kimundi> for that method
[22:00:35] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[22:00:55] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[22:01:14] <kvark> wycats_: what's wrong with these warnings? seem valid to me
[22:01:26] <wycats_> not so much the stack overflow
[22:01:34] <wycats_> turns out to be related to an infinite type
[22:01:45] *** Quits: geoffhill (geoffhill@moz-738DC0DB.org) (Ping timeout)
[22:04:25] *** Joins: skade (skade@moz-B73EE4D5.pools.arcor-ip.net)
[22:04:31] *** Quits: skade (skade@moz-B73EE4D5.pools.arcor-ip.net) (Quit: skade)
[22:04:32] *** Joins: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP)
[22:04:36] <wycats_> what's the unwind symbol for gdb?
[22:05:05] <_Vi> What is status of '@' in today's Rust? Is it deprecated?
[22:05:34] <strcat> _Vi: yes
[22:05:37] <wycats_> yes, and feature-gated
[22:05:44] <strcat> and @mut is actually *gone*
[22:06:10] <strcat> std::rc provides Rc<T> (and Weak<T>) for reference counting
[22:06:13] <sfackler> wycats_: rust_begin_unwind I think
[22:06:17] <_Vi> strcat, Why it is mentioned without notices at http://static.rust-lang.org/doc/0.9/tutorial.html ?
[22:06:21] <strcat> std::gc will provide a garbage collected Gc<T> type but atm it's not really useful...
[22:06:31] <sfackler> _Unwind_Resume should also work
[22:06:32] <strcat> _Vi: because the tutorial and manual are mostly out-of-date
[22:06:55] <strcat> _Vi: http://static.rust-lang.org/doc/0.9/tutorial.html#ownership-escape-hatches this is the only place in the tutorial they will be covered in the future
[22:07:05] <strcat> and it's up-to-date
[22:07:10] <strcat> well, it should mention RefCell
[22:07:15] *** Joins: \n (uid15310@moz-31ABA2C0.irccloud.com)
[22:07:40] <strcat> maybe it should mention stuff like Weak<T>, dunno
[22:07:49] <strcat> doesn't seem important, can be an example in the rc docstring
[22:08:00] *** Joins: kris (kris@moz-F3E9B260.fullrate.dk)
[22:08:21] <\n> hey, I'm having trouble running ApacheBench against my basic http server written in rust.  `apr_socket_recv: Connection refused`  is this a known issue with TCP?  curl and telnet work just fine
[22:08:42] <bascule> \n: are you trying to do it on OS X?
[22:08:45] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:08:48] <\n> bascule: yeah
[22:08:49] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Connection reset by peer)
[22:08:54] <bascule> OS X and ab don't get along
[22:08:56] <bascule> use wrk
[22:09:03] <bascule> wrk is awesome
[22:09:40] <\n> yes, but I'm able to test against literally the same code in C. (up to 10 concurrent connections... I think that's the size of my queue).
[22:09:51] <\n> bascule: I'll check out wrk, thanks for the rec
[22:09:59] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[22:10:07] <bascule> might be a bug in your server then
[22:10:11] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[22:10:50] <_Vi> Will some form of "I don't know where it will go, please do the magic to free it appropriately" garbage-collector be available in Rust or garbage collecting in Rust is going to be abandoned entirely?
[22:11:07] *** Joins: pepper_chico (pepper_chi@moz-13107F6.dsl.telesp.net.br)
[22:11:08] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[22:11:21] <bascule> _Vi: think they're moving it out of core into the stdlib
[22:11:37] <bachm> can I turn off the unused var warning for a certain block of code / struct?
[22:11:52] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[22:11:54] <strcat> bachm: yes, you can #[allow(lint)] on any item
[22:11:57] <strcat> bachm: but... I recommend not doing that
[22:12:04] <bascule> bachm: I think you can prefix your unused variables with _ to sidestep the warning
[22:12:07] <strcat> bachm: you can prefix a variable/parameter name with _ to silence it
[22:12:34] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[22:12:56] *** Quits: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net) (Client exited)
[22:12:57] <gverilla> I'm new to rust and I'm struggling to understand importing libs
[22:13:02] <gverilla> here are my attempts: http://pastebin.mozilla.org/4014997
[22:13:39] <\n> bascule: cool, my C server performed roughly the same as the Rust implementation! Not bad
[22:13:47] <bvssvni> gverilla: The 'extern' keyword is used to link to external binaries
[22:13:54] *** Quits: kris (kris@moz-F3E9B260.fullrate.dk) (Ping timeout)
[22:13:56] *** Joins: Havvy (Havvy@moz-4FE57F72.hsd1.wa.comcast.net)
[22:14:01] <bascule> \n: nice
[22:14:13] <Havvy> When do we get a Rust implementation of Python?
[22:14:16] *** Joins: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net)
[22:14:23] *** jorendorff_away is now known as jorendorff
[22:14:25] <bvssvni> gverilla: 'mod alib;' should suffice.
[22:14:45] <Kxepal> Havvy: without GIL?(:
[22:15:14] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[22:15:15] <bachm> and you might have to move the "use ..." before the mod declaration
[22:15:27] *** Parts: \n (uid15310@moz-31ABA2C0.irccloud.com) ()
[22:15:27] <Havvy> Kxepal:  Sure. :)
[22:15:37] <gverilla> thank you for the answer!
[22:15:48] <hoverbear> Havvy: Only if there is no GIL :o
[22:15:55] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[22:16:00] *** Joins: Skrylar_ (Skrylar@moz-F692F728.austin.res.rr.com)
[22:16:09] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:16:55] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[22:17:06] *** Quits: pepper_chico (pepper_chi@moz-13107F6.dsl.telesp.net.br) (Quit: Ex-Chat)
[22:18:10] *** Joins: espindola (espindola@563D60BB.4B7A7726.A2E931B1.IP)
[22:18:50] *** Joins: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net)
[22:19:16] <Jemaclus> tjc: didn't work. grr. :(
[22:19:17] <gverilla> quick follow-up: for "extern mod alib" to work, I should have earlier compiled alib.rs with "rustc --lib", right?
[22:19:30] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[22:19:30] *** Quits: samx (sami@moz-D9F3E0AE.pp.htv.fi) (Quit: This computer has gone to sleep)
[22:19:31] <tjc> Jemaclus: same error?
[22:19:41] *** Quits: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Connection reset by peer)
[22:19:49] *** Joins: Jemaclus_ (Mibbit@4EEAB704.5843BA5A.D4E4C7A5.IP)
[22:19:59] <bvssvni> gverilla: yes
[22:20:12] <gverilla> bvssvni, thanks again :)
[22:20:32] <bvssvni> gverilla: you're welcome
[22:20:34] *** Quits: Skrylar_ (Skrylar@moz-F692F728.austin.res.rr.com) (Quit: leaving)
[22:20:50] <egghead> hi #rust, how would I write something like this: https://gist.github.com/eggsby/8427001
[22:20:50] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[22:21:07] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[22:21:43] *** Joins: samx (sami@moz-D9F3E0AE.pp.htv.fi)
[22:21:52] <bvssvni> egghead: this is not possible, Rust does not have functions like Haskell.
[22:22:35] *** Quits: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net) (Ping timeout)
[22:22:49] <bvssvni> egghead: wait, I was too quick
[22:23:49] <bvssvni> egghead: the arrow and the int (-> int) after | | should be removed, it is inferred by the compiler
[22:24:22] *** Quits: Jemaclus (Mibbit@A084B2A7.5843BA5A.D4E4C7A5.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:24:32] <bvssvni> egghead: also, you need to use a 'proc', which can only be called once.
[22:25:34] *** Quits: elux (peter@B6F21F4B.1F20BC31.2170E5F.IP) (Quit: Bye!)
[22:25:57] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[22:26:39] <bvssvni> egghead: fn gen_closure(x: int) -> proc(int) -> int { proc(y: int) { x * y } }
[22:26:58] <flaper87> kimundi: mmh, how can I specify that?
[22:27:15] *** Joins: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP)
[22:27:28] *** Joins: kris (kris@D954AD01.1D0A8692.683E4874.IP)
[22:28:07] <egghead> yay bvssvni it compiles
[22:28:08] *** Quits: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP) (Connection reset by peer)
[22:28:12] <flaper87> kimundi: I mean, Self is not a trait
[22:28:14] <egghead> so these things can only be used once, but why?
[22:29:14] *** Quits: rca_ (rcatolino@moz-9F9D4FC8.adsl.proxad.net) (Ping timeout)
[22:29:26] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[22:29:37] <bvssvni> egghead: because owned pointers enclosed by the closure can be moved
[22:30:01] <bvssvni> egghead: I think the devs are working on a solution, I am waiting hopefully :)
[22:30:42] *** Jemaclus_ is now known as Jemaclus
[22:32:14] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:34:19] *** Quits: heftig (heftig@moz-B5CF9419.dip0.t-ipconnect.de) (Quit: Quitting)
[22:36:35] <egghead> thanks bvssvni 
[22:36:37] *** Quits: mcpherrin (mcpherrin@BB4DB59D.2876C283.70845BE5.IP) (Ping timeout)
[22:36:57] <brson> Yurume: really cool periodic table. thanks
[22:37:10] <bvssvni> Yurume: thanks!
[22:37:48] *** Joins: heftig (heftig@moz-B5CF9419.dip0.t-ipconnect.de)
[22:38:08] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[22:38:21] <SiegeLord> Woohoo... I finally managed to get my Rust support PR for Geany merged in
[22:38:34] <SiegeLord> Now hopefully nobody starts changing syntax or adding keywords!
[22:38:45] <bvssvni> haha
[22:39:13] *** Joins: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au)
[22:39:49] *** Quits: vmx (vmx@moz-5D89B292.pools.arcor-ip.net) (Quit: Leaving)
[22:40:19] <pcwalton> what's the replacement for spawn_sched(SingleThreaded) ?
[22:40:48] <acrichto> pcwalton: native::task::spawn
[22:40:56] *** Joins: mcpherrin (mcpherrin@BB4DB59D.2876C283.70845BE5.IP)
[22:40:59] <brson> erickt: shall we raise the attendence on the rust meetup to 80?
[22:41:04] *** Joins: amiga (Mibbit@moz-90355E2E.dyn.plus.net)
[22:41:17] <pcwalton> thakns
[22:41:45] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[22:41:47] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[22:42:15] <brson> erickt: i bumped it to 80
[22:44:14] <dbaupp> When is the next one?
[22:44:26] *** Quits: Kxepal (Miranda@moz-C762CEEA.pppoe.mtu-net.ru) (Quit: Kxepal)
[22:44:49] *** Joins: Kxepal (Miranda@moz-C762CEEA.pppoe.mtu-net.ru)
[22:45:46] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:45:48] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:45:49] *** Joins: jdm (jdm@CC0122E6.8F96AEA7.2D179A7D.IP)
[22:45:50] *** ChanServ sets mode: +o jdm
[22:45:52] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[22:46:14] *** Quits: bachm (Mibbit@moz-4A19983C.ip227.fastwebnet.it) (Quit: http://www.mibbit.com ajax IRC Client)
[22:46:16] *** Joins: FreeFull (freefull@moz-F7A54308.as13285.net)
[22:46:33] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[22:47:23] *** Joins: Matthias247 (Matthias24@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de)
[22:47:24] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[22:47:24] *** Quits: kris (kris@D954AD01.1D0A8692.683E4874.IP) (Ping timeout)
[22:47:33] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:48:06] *** Quits: mhoye (mhoye@moz-C14EAE67.vs.heavycomputing.ca) (Ping timeout)
[22:48:09] *** Quits: vodik (simon@moz-7D40F91D.net.uwaterloo.ca) (Quit: night class)
[22:50:23] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[22:51:25] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[22:51:30] *** Joins: mhoye (mhoye@moz-C14EAE67.vs.heavycomputing.ca)
[22:52:28] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[22:52:41] <SiegeLord> Oh I had a question about the meeting... what's a workweek?
[22:53:12] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:53:33] <dbaupp> SiegeLord: all the Mozilla people get together at one place for week to work
[22:53:38] *** jorendorff is now known as jorendorff_away
[22:53:43] <dbaupp> (rather than being spread over the world; aiui)
[22:53:45] <SiegeLord> Ah, cool
[22:54:03] *** Joins: vadimg (vadimg@moz-90355E2E.dyn.plus.net)
[22:56:04] <Matthias247> sounds reasonable. How often does that happen?
[22:58:23] *** Quits: amiga (Mibbit@moz-90355E2E.dyn.plus.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:58:25] *** Quits: samx (sami@moz-D9F3E0AE.pp.htv.fi) (Quit: This computer has gone to sleep)
[23:01:47] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[23:03:42] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[23:04:28] *** Quits: FreeFull (freefull@moz-F7A54308.as13285.net) (Ping timeout)
[23:05:31] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[23:06:34] *** Quits: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net) (Quit: Leaving.)
[23:06:41] *** Joins: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net)
[23:07:39] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[23:07:46] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[23:08:04] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[23:08:11] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[23:08:26] *** Quits: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net) (Ping timeout)
[23:08:34] * skrylar wrote a tip about Default::default()... will have to upload it tonight
[23:08:43] *** Quits: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Ping timeout)
[23:08:49] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[23:09:17] *** Joins: FreeFull (freefull@moz-B3B7A46E.as13285.net)
[23:09:26] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[23:10:11] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[23:10:31] *** Quits: twi (Adium@moz-C039D8D1.lnse7.lon.bigpond.net.au) (Quit: Leaving.)
[23:10:35] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[23:10:55] *** Joins: ashish_ (chatzilla@44E19BFC.C621D259.DA40C4B3.IP)
[23:11:25] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[23:11:54] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[23:12:36] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[23:12:48] <ashish_> I am trying to learn rust and to do so I plan on starting with a small chat server (as I do with any new programing language I try). Start with echo server and then progressively add things to it like server relaying messages between clients, using async IO, green threads etc
[23:12:49] <dgryski> Hrm, not sure how to handle two different tasks sharing a socket.  How will that work with ownership stuff?  I want one task reading from the socket and the other writing, but they both need the socket.
[23:13:05] <ashish_> But right now I dont know where to start documentation wise
[23:13:30] <ashish_> If I can open a file and display its contents it will be super
[23:13:37] <skrylar> IIRC, TcpSocket cannot be cloned
[23:13:38] *** Quits: vadimg (vadimg@moz-90355E2E.dyn.plus.net) (Ping timeout)
[23:13:40] *** Quits: Savago (Savago@4C500BA5.40BDE760.18DDB669.IP) (Quit: Savago)
[23:13:54] <skrylar> What you want is a non-blocking socket, and some kind of select mechanism; I don't know if Rust has this
[23:14:12] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[23:14:45] <dbaupp> skrylar: no
[23:14:46] *** Joins: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP)
[23:15:16] <dbaupp> This problem (basically reading/writing from one socket at the same time) is something Rust's IO libraries don't have support for
[23:15:44] <dbaupp> it's the last missing piece for being able to write IRC clients and so on
[23:16:41] <dbaupp> ashish_: std::io is where to start, fwiw
[23:17:38] <dbaupp> ashish_: http://static.rust-lang.org/doc/master/std/io/index.html
[23:18:41] <zxcdw> Is there a way to do something like pattern matching for certain values in a vector -- e.g. match somevec { 1 => ..., 2 => ..., _ => ... }, so that the code would iterate through the vector and act accordingly per-element basis depending on the value?
[23:19:03] <zxcdw> I dont even know what I am talking about, but the idea felt interesting!
[23:19:16] <Havvy> Ooh, good to know I can't write IRC clients in Rust.
[23:19:35] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[23:19:44] <jdm> zxcdw: you'll need a loop for that
[23:21:21] *** Joins: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net)
[23:21:30] <aatch> zxcdw, depending on your use case, there may be an appropriate iterator/set of iterators to help
[23:21:53] <zxcdw> Yeah, explicit one, I was just thinking of something like match vec.iter() { ... which felt as if there was a possiblity for implicit loop and pattern match based on iterator value
[23:22:11] <skrylar> hrm
[23:22:28] <skrylar> I was told rustc would now use names compatible with build systems, but it refuses to output names other than the hashy ones
[23:22:52] <zxcdw> mangled names?
[23:23:07] <zxcdw> Isn't ther a -Z something-flag to demangle?
[23:23:09] *** Quits: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net) (Ping timeout)
[23:23:46] <skrylar> zxcdw: well it keeps making foo-HASH-version.so, and completely ignoring -o which tells it "NAME IT THIS"
[23:23:55] <wycats_> -Z extra-debug-info ?
[23:24:16] <mcpherrin> skrylar: they're hashey but the names are now easier to calculate in your build system
[23:24:17] <zxcdw> Oh, I know nothing :)
[23:24:34] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[23:24:35] <skrylar> mcpherrin: if i specify -o, it should use the name i specified with -o
[23:24:36] <skrylar> full stop
[23:24:44] <flu-> skrylar: known issue
[23:24:51] <skrylar> yeah, but i was told it was fixed now :/
[23:25:35] *** Joins: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[23:25:45] <flu-> skrylar: rumor has it support for -o may be going away altogether in the future in order to support emitting llvm IR stuffs
[23:26:24] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[23:26:34] <skrylar> flu-: what compiler in its right mind doesn't obey when the user asks it to output a specific filename? (@removing the flag to do that)
[23:26:39] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[23:26:39] *** ChanServ sets mode: +ao brson brson
[23:26:42] * geomyidae_ needs a rust mascot or two for his desk
[23:26:42] *** Quits: ashish_ (chatzilla@44E19BFC.C621D259.DA40C4B3.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0a2/20131004004003])
[23:27:07] <skrylar> unless you meant a different -o
[23:27:26] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[23:28:17] *** Joins: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP)
[23:28:22] <kimundi> geomyidae_: http://www.battlegrip.com/wp-content/uploads/2012/10/rusty-430x243.jpg
[23:29:03] <aatch> I don't remember anybody saying that '-o' was going anywhere...
[23:29:17] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:29:57] *** Quits: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP) (Connection reset by peer)
[23:30:16] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[23:31:03] <aatch> Ok, so "remove" isn't *quite* true. "replaced" is probably more accurate.
[23:31:21] <aatch> Mostly just with a more descriptive name.
[23:33:58] *** Joins: lkuper (lkuper@moz-6881CCA2.dhcp-bl.indiana.edu)
[23:34:37] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:35:51] *** Quits: Matthias247 (Matthias24@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Quit: Computer has gone to sleep.)
[23:36:17] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[23:37:37] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[23:37:53] *** Quits: tq (tq@moz-9FE9CCF4.a251.priv.bahnhof.se) (Quit: tq)
[23:37:57] *** Quits: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[23:38:17] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[23:38:38] *** Quits: dgryski (dgryski@moz-DEAD01C9.adsl-surfen.hetnet.nl) (Ping timeout)
[23:41:14] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[23:41:17] *** Joins: jnsk (Mibbit@moz-D5D4385D.hsd1.ca.comcast.net)
[23:41:43] *** Quits: jnsk (Mibbit@moz-D5D4385D.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:41:44] *** Quits: squiddy (squiddy@moz-915F460F.adsl.alicedsl.de) (Quit: Leaving)
[23:42:57] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[23:43:11] <pcwalton> what has peek() turned into?
[23:43:14] <pcwalton> try_recv?
[23:43:31] *** Quits: lkuper (lkuper@moz-6881CCA2.dhcp-bl.indiana.edu) (Quit: lkuper)
[23:44:34] *** Joins: lkuper (lkuper@moz-6881CCA2.dhcp-bl.indiana.edu)
[23:44:43] *** Quits: lkuper (lkuper@moz-6881CCA2.dhcp-bl.indiana.edu) (Quit: lkuper)
[23:45:52] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[23:46:18] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Quit: )
[23:49:20] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[23:49:23] *** Joins: doomlord_ (servitor@moz-CA917A47.range86-184.btcentralplus.com)
[23:49:53] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[23:51:20] <acrichto> pcwalton: yes
[23:52:15] <jmgrosen> can someone tell me what a "guarantor" is? (from regionck.rs)
[23:52:23] *** Quits: hoverbear (hoverbear@moz-C2B3C905.wireless.uvic.ca) (Quit: Taking a nap.)
[23:52:30] <acrichto> jmgrosen: nmatsakis would probably know
[23:52:32] *** Parts: Havvy (Havvy@moz-4FE57F72.hsd1.wa.comcast.net) (Leaving)
[23:52:41] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[23:54:08] <jmgrosen> oh, never mind, found a good docstring about it
[23:56:03] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Quit: Textual IRC Client: www.textualapp.com)
[23:56:52] <jmgrosen> ack, all the different indentation styles in the compiler are seriously annoying me >.<
[23:58:18] <kimundi> jmgrosen: patches welcome ;)
[23:58:42] *** Joins: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net)
[23:58:58] <jmgrosen> kimundi: I'm working on my first non-trivial patch now, an implementation of sugar for slicing
[23:59:21] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[23:59:52] <ChrisMorgan> jmgrosen: x[y:z]?
