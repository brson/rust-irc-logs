[00:02:02] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[00:16:11] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[00:18:11] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:23:31] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:01:15] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[01:01:51] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[01:17:19] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:18:46] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:01:25] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[02:01:57] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[02:04:12] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:17:19] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:19:00] *** Quits: zz_kimundi (kimundi@moz-4D74261A.dip0.t-ipconnect.de) (Ping timeout)
[02:22:30] *** Joins: zz_kimundi (kimundi@moz-CF2827B0.dip0.t-ipconnect.de)
[02:22:31] *** zz_kimundi is now known as kimundi
[02:38:26] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[03:01:51] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[03:01:54] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[03:02:48] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:17:39] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:22:25] <eddyb9> I ranted in #9945
[04:01:19] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[04:01:43] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[04:02:38] *** Joins: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[04:12:14] <pcmattman> yay, no more external linkage required: https://github.com/pcmattman/rustic/commit/0677148219cc47f5c781743206ba490de8cdb654
[04:17:51] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:18:10] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:24:49] <eddyb9> oh please be reusable for mem*
[04:28:49] <eddyb> nope, it's not
[04:28:59] <eddyb> pcmattman: that's an ugly hack
[04:29:17] <pcmattman> it is a bit, isn't it
[04:29:38] <pcmattman> it also works
[04:30:15] <pcmattman> I am definitely a fan of things that work as a general rule
[04:31:11] <eddyb> pcmattman: won't work for mem*, which is the only thing that's going to be left around to suffer from linkage :(
[04:33:40] <pcmattman> have you tried the mem* stuff, or are you going from what you think will happen?
[04:34:16] <eddyb> I have tried. implement it in Rust then use the respective intrinsic, with a large length, like 1024
[04:34:24] <eddyb> (small lengths get optimized into a few moves)
[04:35:05] <pcmattman> you can't just use mem; mem::copy(....) ?
[04:35:16] <eddyb> pcmattman: a lot of things depend of the intrinsics
[04:35:43] *** Quits: geoffhill (geoffhill@moz-244CF33A.amazon.com) (Quit: geoffhill)
[04:36:05] <eddyb> pcmattman: assigning a large array by value in Rust might call memcpy, for example
[04:36:21] <pcmattman> well, obvious question, how are you defining memcpy?
[04:37:01] <eddyb> I put everything on it, I think, #[inline(never)] #[no_mangle] pub extern "C" fn memcpy...
[04:38:14] <eddyb> taking the address of the function might be enough to force the function to be generated, but I'm not sure it would be picked up by LLVM then
[04:38:35] <eddyb> actually, let me try, if my local rustic still compiles
[04:38:53] <pcmattman> you have to take the address in a way that isn't a nop
[04:39:10] <eddyb> #[linkage(external)] would just work :-<
[04:39:13] <pcmattman> also, don't call the funciton to force it to be generated, as it'll generate assembly for just that call
[04:39:25] <pcmattman> I think the real problem is not linkage
[04:39:42] <pcmattman> the problem is that the function is used, but it's being removed from the output
[04:40:05] <pcmattman> __attribute__((used)) on GCC
[04:40:24] <pcmattman> except that's for variables :(
[04:41:03] <pcmattman> err, the problem is it's being "used", but it's being removed from the output
[04:42:07] <eddyb> external has the right semantics, as the usage comes from somewhere outside the compilation unit, so it should see the function and the function should be kept alive
[04:42:25] <eddyb> pcmattman: oh, I can make an artificial test case
[04:42:27] <pcmattman> does the usage actually come outside the compilation unit though?
[04:42:49] <eddyb> pcmattman: in the case of LLVM, it kinda does... let me show you what I mean
[04:42:55] <pcmattman> hey cool, __attribute__((used)) IS available for functions!
[04:42:59] <pcmattman> I knew it.
[04:43:08] <eddyb> rusti: fn foo() {} asm!("call foo");
[04:43:12] -rusti- pastebinned 9 lines of output: http://ix.io/8Gw
[04:43:28] <pcmattman> that example you just pasted is literally the exact thing the documentation for __attribute__((used)) talks about
[04:43:29] <eddyb> rusti: fn foo() {} unsafe { asm!("call foo"); }
[04:43:32] -rusti- pastebinned 10 lines of output: http://ix.io/8Gx
[04:43:34] <pcmattman> "This is useful, for example, when the function is referenced only in inline assembly."
[04:44:01] <pcmattman> "This attribute, attached to a function, means that code must be emitted for the function even if it appears that the function is not referenced."
[04:44:04] <eddyb> well, LLVM intrinsics are somewhat like inline assembly
[04:44:32] <eddyb> pcmattman: hmm, how does clang implement that?
[04:45:21] <eddyb> https://github.com/llvm-mirror/clang/blob/master/test/CodeGen/attr-used.c
[04:46:39] <pcmattman> I really think your problem is better solved with something like that to say "hey, even though no code calls this function, please emit it anyway!"
[04:46:56] <eddyb> pcmattman: that + your globalize = external
[04:47:30] <pcmattman> yes, though you shouldn't need the objcopy --globalize-symbol for mem*
[04:48:04] <eddyb> rusti: #[inline(never)] #[no_mangle] pub extern "C" fn foo() {} unsafe { asm!("call foo"); }
[04:48:04] -rusti- ()
[04:48:06] <pcmattman> your issue is that those functions are getting removed as dead code before intrinsics happen
[04:48:21] <eddyb> how does that even work? rusti uses -O0?
[04:48:41] <eddyb> rusti: #[no_mangle] pub extern "C" fn foo() {} unsafe { asm!("call foo"); }
[04:48:41] -rusti- ()
[04:48:50] <eddyb> or maybe it compiles with --lib
[04:48:55] <eddyb> rusti: #[no_mangle] extern "C" fn foo() {} unsafe { asm!("call foo"); }
[04:48:56] -rusti- ()
[04:49:00] <cmr> It uses -O0
[04:49:05] <cmr> Not --lib, though
[04:49:07] <eddyb> ok, I won't spam :P
[04:49:12] <cmr> also you can query it
[04:49:16] <eddyb> yeah, -O0 and no_mangle is enough
[04:49:26] <cmr> https://github.com/thestinger/rust-playpen/blob/master/bin/irc.sh
[04:50:30] <eddyb> rusti: version
[04:50:31] -rusti- "rustc 0.9-pre (5751794 2013-10-19 05:06:17 -0700)"
[04:55:11] <eddyb> pcmattman: oh dear https://github.com/llvm-mirror/clang/blob/master/lib/CodeGen/CodeGenModule.cpp#L762-L787
[04:55:23] <pcmattman> yeah
[04:55:30] <pcmattman> I just found out how they did llvm.used
[04:55:46] <eddyb> dammit. we both searched >_>
[04:55:57] <pcmattman> I am actually impressed, that's a super elegant solution to the problem.
[04:56:06] <eddyb> pcmattman: it's a hack
[04:56:14] <pcmattman> it'll work with non-llvm assemblers and linkers
[04:57:22] <eddyb> it's like doing pub static __rust_used : [uint, ..3] = [&memcpy as *fn as uint, &memmove as *fn as uint, &memset as *fn as uint];
[04:58:08] <pcmattman> I'm kind of curious as to how else you do it.
[04:58:25] <pcmattman> you need references in generated output
[04:58:43] <eddyb> I was hoping it would set a flag, just like using external linkage
[04:59:19] <eddyb> the difference from #[used] and #[linkage(external)] is the symbol's visibility
[04:59:43] <strcat> eddyb: if the limitations in the reachability pass are fixed and it's taught about libraries vs executables (in terms of #[inline]) we could start exporting pub stuff from binaries without losing much
[05:00:06] <strcat> although it really seems like LLVM shouldn't have to force making memcpy external
[05:00:23] <eddyb> strcat: --lib is undesired in our case
[05:00:37] <eddyb> it generates code for *everything*
[05:01:48] <eddyb> (even #[inline(always)] functions, IIRC)
[05:01:49] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:01:51] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:02:30] <pcmattman> sure, it's building a library, it kind of has to. linker can ditch the unused stuff though, if --lib built static libraries.
[05:02:59] <eddyb> can I offtopic? this is cool, just showed up in my subbox https://www.youtube.com/watch?v=FYgIuc-VqHE
[05:03:03] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:03:27] <eddyb> pcmattman: oh, that might work, if we can force certain functions to not output code (like gdt::load)
[05:03:47] <pcmattman> strcat: I don't think llvm is forcing external memcpy - I think it's more that llvm can't find a memcpy that's been removed because it looks like "dead code"
[05:04:04] <strcat> ah
[05:04:07] <pcmattman> (because nothing actually calls memcpy because the intrinsics haven't been emitted yet)
[05:04:16] <strcat> keeping it internal would be best if you can
[05:04:25] <pcmattman> right
[05:04:28] <eddyb> sure, if it gets emitted :P
[05:04:52] <pcmattman> (which is why clang/gcc have __attribute__((used)) )
[05:04:53] <strcat> although LLVM might change it to fastcc and break it anyway
[05:05:08] * strcat isn't sure if that would break it
[05:05:14] <strcat> probably would
[05:06:13] * pcmattman can't possibly see how passing parameters in registers to a function expecting them on the stack would break /s ;)
[05:10:19] *** Quits: canhtak (jeremy@moz-A67811CE.wl.t.ulaval.ca) (Quit: canhtak)
[05:17:15] *** kimundi is now known as zz_kimundi
[05:18:45] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:29:07] *** Quits: jjw (jjw@FFE88C96.28E4FE9E.4375B591.IP) (Ping timeout)
[05:29:23] *** Joins: jjw (jjw@FFE88C96.28E4FE9E.4375B591.IP)
[05:29:27] *** Quits: acrichto (acrichto@moz-69F2E428.ugrad.cs.cmu.edu) (Ping timeout)
[05:29:32] *** Joins: acrichto (acrichto@moz-69F2E428.ugrad.cs.cmu.edu)
[05:32:26] *** zz_kimundi is now known as kimundi
[06:01:21] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[06:01:47] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[06:17:15] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[06:17:48] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[06:24:39] <eddyb> strcat: woo, using atomic add now :D
[06:26:21] <eddyb> strcat: are libc malloc/free reentrant?
[06:26:38] <strcat> eddyb: yes
[06:26:47] <strcat> POSIX requires all but a certain list of functions are thread-safe
[06:26:53] <strcat> eddyb: look at man 7 pthreads for the list
[06:27:03] <strcat> keeping it internal would be best if you can   Thread-safe functions
[06:27:05] <strcat> er
[06:27:07] <strcat>    Thread-safe functions
[06:27:09] <strcat> that section
[06:27:16] <strcat> lists thread *unsafe* ones
[06:28:52] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[06:32:55] <eddyb> strcat: well then, my LinearAllocator is as safe as the libc functions :P
[06:41:01] <eddyb> strcat: do you need no-special-free aligned_alloc?
[06:41:59] <strcat> C11/POSIX allocator interface does, but I doubt there will be any use cases for it
[06:42:42] <eddyb> because it's hard to implement in a sane, safe, and efficient way :(
[06:43:00] <dbaupp> skip the first one... madness \o/
[06:43:26] <eddyb> with a special free, it's just a matter of handling edge cases correctly, but the trick is simple
[06:44:13] <eddyb> without... you need the allocator to be alignment aware, in a possibly messy way
[06:44:43] <eddyb> it's easy with LinearAllocator, because it doesn't have a free at all :P
[06:45:57] <eddyb> but SlamAllocator always has the alignement of sizeof(uint), by design (assuming the slabs it gets from the base allocator are PAGE_SIZE-aligned)
[06:47:17] <eddyb> ahahahahaha I know :P
[06:47:27] <eddyb> I was wondering where I could hide the alignment offset
[06:47:55] <eddyb> strcat: so the allocation has a header, with a cache pointer. I can't/would rather not put it in there
[06:48:20] <strcat> you don't have to implement aligned_alloc
[06:48:20] <eddyb> it would be nice for Rust to track the alignment.... but it "tracks" the pointer itself
[06:49:42] <strcat> it doesn't really
[06:49:54] <eddyb> on 32bit, check the 3rd bit (4th on 64bit). if it's set, it's a normal allocation. if it isn't, it's aligned, and you can use an extra field header to store the alignment
[06:50:39] <eddyb> pretty sure SlamAllocator has this awesome property :D
[06:50:45] <strcat> a separate free function is fine
[06:51:26] <eddyb> an allocated pointer will always be k*2*sizeof(uint) + sizeof(uint)
[06:51:59] <eddyb> ptr as uint & sizeof(uint) will always be different than 0 for any allocated pointer
[06:53:27] <eddyb> the fact that it is better aligned tells you it is an aligned_alloc pointer :P
[06:53:52] * eddyb puts on his wizard hat (and preps for school)
[07:01:23] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[07:02:42] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:07:54] <eddyb> pfft, I'll end up skipping 4 classes instead of 3, miscalculated. eh, who cares
[07:08:13] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[07:23:46] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:24:29] <strcat> eddyb9: I looked into how jemalloc deals with alignment btw
[07:24:40] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:25:15] <strcat> eddyb9: it just relies on the size buckets taking care of alignment for anything small
[07:27:39] <eddyb> it doesn't work in SlamAllocator, because it has a cache pointer before the actual usable memory :/
[07:28:24] <eddyb> and I don't see how you could avoid that, other than relying on page size to find some magic structure
[07:29:52] <eddyb> whee even smaller allocation functions: http://i.imgur.com/1d3bA9O.png
[07:33:02] <eddyb> pcmattman: before you complain, it's a side-effect of cleaning up LinearAllocator :P
[07:37:35] * eddyb wonders how it would end up in ARM, with all the conditional instructions :D
[07:37:57] * pcmattman reads backlog
[07:38:09] <KokaKiwi> Hello
[07:38:40] <eddyb> can LLVM output code for a different architecture without building it as a cross-compiler?
[07:39:13] <pcmattman> yes
[07:39:21] <eddyb> can rustc do that, too?
[07:39:24] <pcmattman> yes
[07:39:26] <pcmattman> uh
[07:39:34] <pcmattman> well, yes if it's not needing to pull in libs
[07:39:39] <eddyb> wheee :D
[07:40:02] <eddyb> bbl, school (the two classes that's left of today)
[07:40:12] <pcmattman> wow I am hungry
[07:40:22] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[07:40:35] * eddyb pretends to never have seen that. stomach, get back to sleep!
[07:40:39] <pcmattman> apparently two sandwiches does not suffice for a day of sweng
[07:50:12] <eddyb> let a = non_deterministic_source(); if a != 5 { abort(); } ... does a get inlined to 5 for the following code?
[07:50:23] <eddyb> maybe I should ask in #rust
[07:58:58] *** Quits: eddyb9 (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Ping timeout)
[08:01:11] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:04:09] *** kimundi is now known as zz_kimundi
[08:06:24] *** Joins: eddyb9 (eddy@DE22A1D1.13608032.4A6B528C.IP)
[08:07:07] *** zz_kimundi is now known as kimundi
[08:09:19] <eddyb9> pcmattman: hehe, "error: unknown operating system"
[08:10:29] <eddyb9> ah, arm-linux-elf
[08:17:12] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:17:21] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[08:19:54] <eddyb9> either that's broken or my tool (radare2) is
[08:21:16] *** Quits: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Ping timeout)
[08:23:37] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[08:27:26] <Seldaek> cmr: I sort of am but not really, it's just some guys here helped a bit, but it's not really anywhere near useful yet :)
[08:28:32] <Seldaek> eddyb9: that coreutils thing is some stupidish project I started https://github.com/uutils/coreutils
[08:29:57] <pcmattman> handy
[08:31:24] <eddyb9> Seldaek: I considered rewriting a lot of GNU stuff in concise JS, that would also end up being faster for IO, in a repl (no need to load binaries)
[08:33:01] <eddyb9> that's kinda what busybox does, but it has less features and it's still C
[08:33:18] <pcmattman> to be fair, most of the most useful coreutils will be consistently hot in cache anyway
[08:33:37] <Seldaek> yeah to me it's a good way to learn rust with small-ish exercises
[08:33:42] <eddyb9> but parsing ELF headers... and all the other stuff that needs to happen
[08:34:06] <pcmattman> the slow part about loading and running an executable is I/O
[08:34:15] <Seldaek> and good to have sort of real world benchmarks of rust><C too, though the algos aren't necessarily the same because I can't be arsed to read C code
[08:34:42] <eddyb9> true... the benefits are questionable, I admit that
[08:34:43] <pcmattman> Seldaek, yeah, lots of fun things to port across to rust, and you can still use all of libstd and such :) so that's cool
[08:37:05] <eddyb9> wtf... what happened with my home laptop?
[08:37:17] <eddyb9> it hasn't reconnected yet :(
[08:37:46] <eddyb9> and I only have a winblows PC at school
[08:38:39] <Seldaek> I thoguht the point of laptops was that you could move them :P
[08:54:26] <eddyb9> Seldaek: not to school :/
[08:54:36] <Seldaek> that's lame
[08:55:13] <eddyb9> this sucks, did it freeze? I was browsing the -target arm-linux-elf output
[08:55:51] <dbaupp> eddyb9: re a != 5 getting inlined, you'd have to check what LLVM does (since we rely on it entirely for any non-super-trivial optimisations)
[08:55:59] <dbaupp> eddyb9: if clang does it, I guess we do too
[09:01:44] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[09:14:21] <pcmattman> and if an abort() written in rust is noreturn
[09:15:08] <eddyb9> pcmattman: it's a noreturn intrinsic now. if it's not wrapped, that is
[09:17:54] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[09:22:14] <eddyb9> fuck you, avast.... the shellcode DLL in the radare2 (binary introspection tool and stuff) release is not a trojan horse :(
[09:25:45] <dbaupp> are you sure? :P
[09:26:03] <Leo`> hello
[09:26:11] <pcmattman> hi!
[09:29:24] <eddyb9> yay for doing recompression on the server after removing that shellcode plugin
[09:30:29] <eddyb9> oh but it's linked against that file, not dynamically loaded :(
[09:32:01] <eddyb9> and the build is borked, they forgot to statically link libgcc :(
[09:41:37] <KokaKiwi> ahah, my buildbot is running two rust testing suites in same time: "Load average: 8.67 6.02 4.27" :'D
[09:42:02] <Leo`> :D
[09:43:52] <eddyb9> I now have to download a portable vesion of 7zip to decompress the lzma archive with mingw dlls to get radare2 working
[09:46:08] <pcmattman> rusti, !!0
[09:46:12] <pcmattman> rusti: !!0
[09:46:18] -rusti- pastebinned 14 lines of output: http://ix.io/8GE
[09:46:30] <pcmattman> oh right
[09:46:32] <pcmattman> it's broken
[09:46:43] <Leo`> oO
[09:47:10] <eddyb9> rusti: !0
[09:47:12] <Leo`> rusti: miaou ?
[09:47:14] -rusti- pastebinned 14 lines of output: http://ix.io/8GE
[09:47:14] -rusti- pastebinned 11 lines of output: http://ix.io/8GI
[09:47:16] <eddyb9> should be -1
[09:47:22] <eddyb9> rusti: !0u
[09:47:26] -rusti- pastebinned 14 lines of output: http://ix.io/8GE
[09:47:29] <eddyb9> hmpf
[09:47:32] <pcmattman> it won't be anything right now while rusti is broken
[09:47:51] <pcmattman> but I was really curious to see if !! would bool-ise the value
[09:48:39] <pcmattman> if however it did a bitwise NOT, I'd expect !!0 to give zero.
[09:49:07] <pcmattman> which would be a hilarious logic error
[09:49:55] <eddyb9> pcmattman: it's bitwise
[09:50:19] <eddyb9> there's no implicit to bool
[09:51:22] <pcmattman> hmkay
[09:51:52] <eddyb9> rusti: if true {}
[09:51:55] -rusti- pastebinned 14 lines of output: http://ix.io/8GE
[09:51:58] <pcmattman> rusti
[09:51:59] <pcmattman> is
[09:52:00] <pcmattman> broken
[09:52:42] <eddyb9> didn't bother to check. in oracle course :(
[09:54:17] <eddyb9> oh ffs, the arch packaging issue
[09:56:22] *** kimundi is now known as zz_kimundi
[10:01:34] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[10:03:19] *** zz_kimundi is now known as kimundi
[10:17:20] <KokaKiwi> "Load average" at 10 \o/
[10:18:26] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[10:20:06] <dbaupp> KokaKiwi: running make check?
[10:33:31] <KokaKiwi> Yep ^^ Two in same time on my server xD
[10:34:33] <KokaKiwi> f** yeah, test failed: "memory_region::realloc> Out of memory allocating 134217776 bytesmake: ***"
[10:34:35] <KokaKiwi> xD
[10:35:05] <KokaKiwi> Oh, it happened when he tried to compile stdtest :o
[10:38:37] <dbaupp> haha, stop killing your computers :P
[10:43:19] <KokaKiwi> I disabled automatic git polling, now I launch build myself, it's safer I think xD
[11:01:53] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[11:06:28] <KokaKiwi> Oh, goodbye rusti :(
[11:16:55] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[11:19:18] <eddyb9> rusti: 42
[11:19:25] -rusti- pastebinned 14 lines of output: http://ix.io/8GE
[11:19:31] <dbaupp> eddyb9: still broken :P
[11:19:38] <eddyb9> :(
[11:19:49] <eddyb9> dbaupp: arch's fault, right?
[11:21:07] <dbaupp> eddyb9: well, kinda (it's probably us misconfiguring something), but yeah, seems to be a problem with arch
[11:21:51] <eddyb9> my laptop is running...
[11:22:14] <dbaupp> running arch?
[11:22:16] <eddyb9> screen is off, can't wake it up
[11:22:41] <eddyb9> caps lock is flashing, wtf?
[11:23:32] <eddyb9> I know my battery is half capacity, but what's with this craziness?
[11:26:57] *** Joins: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[11:29:56] *** Quits: eddyb9 (eddy@DE22A1D1.13608032.4A6B528C.IP) (Ping timeout)
[11:32:33] <Leo`> dbaupp: an idea why this failed to build ? http://buildbot.rust-lang.org/builders/auto-win-32-nopt-t/builds/1196/steps/test/logs/stdio
[11:32:52] <Leo`> https://github.com/LeoTestard/rust/blob/ad30c6a878209bcea4c9c37d6a08f34b037678f7/src/test/run-pass/asm-out-assign.rs 
[11:32:56] <Leo`> should be ok
[11:34:54] <dbaupp> Leo`: ah, it's the windows test driver: it groups all the files into one huge crate, so the #[feature] doesn't work
[11:35:05] <Leo`> ........
[11:35:10] <dbaupp> Leo`: put `// xfail-fast #[feature] doesn't work with check-fast` in the file
[11:35:15] <Leo`> how am I supposed to do then ?
[11:35:39] <Leo`> is there a way to run the test on UNIX but not on Windows ?
[11:35:48] <dbaupp> yes, xfail-fast ^
[11:35:59] <Leo`> oh ok
[11:36:08] <Leo`> I read xfail-test
[11:36:09] <Leo`> sorry
[11:36:12] <dbaupp> np
[11:36:19] <dbaupp> (with the descriptive comment too please :) )
[11:36:29] <Leo`> yeah don't worry
[11:36:39] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[11:36:56] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[11:38:40] *** Joins: canhtak (jeremy@moz-A67811CE.wl.t.ulaval.ca)
[11:43:27] <Leo`> dbaupp: https://github.com/mozilla/rust/pull/10009/files 
[11:43:34] <Leo`> is it okay like this ?
[11:43:47] <dbaupp> Leo`: yup
[11:46:38] <Leo`> hope it will pass this time
[11:48:31] <dbaupp> in theory it will
[11:48:56] <Leo`> :p
[11:52:47] *** Joins: eddyb9 (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[11:57:01] *** kimundi is now known as zz_kimundi
[12:01:32] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[12:17:14] *** Quits: eddyb9 (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Quit: Leaving)
[12:17:27] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:59:00] *** Quits: canhtak (jeremy@moz-A67811CE.wl.t.ulaval.ca) (Quit: canhtak)
[13:01:15] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[13:16:55] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:22:32] *** zz_kimundi is now known as kimundi
[13:33:36] <Seldaek> dbaupp: yay tests :p https://github.com/uutils/coreutils/commit/13fd72e1f23e640b604d31b025a9b76f358ee84e
[13:33:48] <Seldaek> I even caught bugs
[13:34:44] <dbaupp> Seldaek: \o/
[13:34:52] <dbaupp> now add it to Rust-CI :P
[13:35:19] <Seldaek> unfortunately couldn't really write proper #[test] 
[13:35:36] <Seldaek> since I have no idea how to mock print() or stdin or anything
[13:35:46] <dbaupp> yeah... I think it's impossible
[13:35:51] <Seldaek> it'd require a lot more abstraction in the code to be testable
[13:36:07] <dbaupp> (although, i guess one could imagine redirecting stdio per task, maybe.)
[13:36:15] * dbaupp has no idea if that's at all feasible
[14:01:28] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[14:06:06] *** kimundi is now known as zz_kimundi
[14:13:37] <Seldaek> dbaupp: can't say I like to give write access to my public repos to some random third party service (rust-ci) :/ 
[14:14:55] <eddyb> why would it need write access?
[14:16:18] <dbaupp> Seldaek: does Rust-CI need write access?
[14:16:20] <Seldaek> to trigger the travis build I believe
[14:16:32] <Seldaek> I don't know if it needs it, but it's asking for it in the oauth dialog
[14:16:36] *** Joins: tgummerer (tgummerer@moz-582025B2.members.linode.com)
[14:17:09] <Seldaek> I'll shoot him an email
[14:17:25] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:01:12] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[15:05:36] <eddyb> pcmattman: I think you mentioned something similar, this could end up in rust/LLVM :D http://www.reddit.com/r/rust/comments/1owhwi/on_stack_safety/ccx3gtf?context=5
[15:17:55] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:19:27] <KokaKiwi> My buildbot: "build successful" \o/
[15:19:37] <KokaKiwi> Finally xD
[15:20:06] <KokaKiwi> Now, I know that running two builds in the same time is a bad idea :D
[15:43:34] <Leo`> why can' I use .to_owned() on a &~str ? :/
[15:43:52] <Leo`> Seldaek: I'm writing you an env command btw :p
[15:45:21] <Seldaek> Leo`: yay, check https://github.com/uutils/coreutils/commit/61a232eb0a43c388a356cac1c2fc5d634ebad48d maybe for consistency
[15:45:55] <Leo`> Seldaek: I'm not using getopts but yeah i'll have a look
[15:47:49] <Seldaek> oh why not?
[15:48:05] <Leo`> a bit complicated if I want to stick to the way GNU env read its args
[15:49:11] <Seldaek> hmm ok, you can get those as "rest" args of sorts, there is an example in the cat command it gets an arbitrary amount of file names (anything that didn't match -f or --foo)
[15:49:52] <Leo`> mh
[15:49:58] <Seldaek> not sure if it's enough or not, might not be for command etc
[15:50:08] <Seldaek> since command can be followed by args
[15:50:16] <Leo`> well let me see
[15:50:41] <Leo`> if I type something as 
[15:50:48] <Leo`> env - ls --help
[15:50:56] <Leo`> will getopts parse --help ? or will it be included in the rest ?
[15:51:04] <Seldaek> probably it'll parse --help
[15:51:07] <Leo`> (assuming getopts know nothing about "-" and "ls"
[15:51:09] <Leo`> -
[15:51:10] <Seldaek> and it may choke on - I'm not sure
[15:51:15] <Leo`> s/-/)/
[15:51:20] <Leo`> yeah, this is the problem :/
[15:51:30] <Seldaek> you'd have to do "env - -- ls --help" to make it ignore stuff
[15:51:50] <Leo`> is necessarily "--" ?
[15:52:12] <Seldaek> -- means "end of args" 
[15:52:29] <Seldaek> well, I think the rust getopts has that too, not sure but it's a common enough pattern
[15:52:42] <Seldaek> but gnu env works without -- so you should too I guess
[15:53:00] <Leo`> and the delimiter for GNU env is -, not --
[15:53:10] <Leo`> well, by the way my arg parsing loop is almost done
[15:53:16] <Seldaek> no - in gnu env means no env
[15:53:19] <Seldaek> it doesn't mean stop parsing
[15:53:22] <Leo`> nope, th'ats -i
[15:53:25] <Leo`> that's*
[15:53:31] <Seldaek> "A mere - implies -i" :)
[15:53:37] <Leo`> mhhh
[15:53:40] <Leo`> oh yes
[15:53:46] <Leo`> but it means stop parsing too
[15:53:52] <Leo`> no opt is allowed after -
[15:53:56] <Leo`> only NAME=VALUE, and then the command
[15:53:58] <Seldaek> yeah fair enough
[15:54:02] <Seldaek> but it's optional
[15:54:07] <Seldaek> while -- would be mandatory
[15:54:18] <Seldaek> and mean nothing else than stop parsing
[15:54:18] <Leo`> yeah I see
[15:54:34] <Leo`> I think this is quite hard to do with getopts
[15:54:54] <Leo`> as something like env - -0 CC=gcc foo 
[15:55:00] <Leo`> would interpret both - and -0
[15:55:08] <Leo`> where GNU env would interpret -0 as the command
[15:55:35] <Seldaek> another option of course is to extract everything until you find a string not containing a =, or just a "-" 
[15:55:44] <Seldaek> then parse that bit with getopts
[15:55:49] <Seldaek> and then process the rest by hand
[15:55:57] <Seldaek> but that may be even messier :p
[15:56:15] <Leo`> well process everything by hand is fine
[15:56:17] <Leo`> :P
[15:56:19] <Seldaek> I guess :)
[15:56:23] <Leo`> a bit messy but works
[15:56:55] <Leo`> so well
[15:57:00] <Leo`> i've got a &~str
[15:57:14] <Leo`> how can I copy (or move) it as a ~str ?
[15:57:26] <Seldaek> *foo?
[15:57:46] <Leo`> says I cant dereference out of a &
[15:57:53] <Seldaek> hm
[15:58:00] <Leo`> well not exactly
[15:58:01] <Leo`> says cannot move out of dereference of & pointer
[15:58:12] <Leo`> which seems legit
[15:58:18] <Seldaek> maybe show code, I'm not good enough at rust to be able to help with abstract questions :p
[15:58:30] <Leo`> but I can't call to_owned() on it either
[15:58:53] <cmr> Leo`: .clone() maybe?
[15:58:58] <cmr> Leo`: Or *s.to_owned() ?
[15:59:08] <cmr> Or actually that might be (*s).to_owned()
[16:01:35] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[16:02:39] <Leo`> same error 
[16:03:02] <Leo`> oh wait no
[16:03:07] <Leo`> I was using into_owned()
[16:03:11] <Leo`> instead of to_owned()
[16:04:11] <Seldaek> into would move and to just copies right?
[16:05:52] <Leo`> probably
[16:06:54] <Leo`> oh well it's even complicated than what I thought
[16:07:33] <Leo`> +more
[16:08:13] <Seldaek> programming hu :)
[16:13:22] <Leo`> it's about the arguments
[16:13:43] <Leo`> env --ls - ls -> invalid option --ls
[16:14:04] <Leo`> env - --ls ls -> tries to run the "--ls ls" command
[16:14:10] *** zz_kimundi is now known as kimundi
[16:14:29] <eddyb> that sounds correct, I think
[16:14:35] <Leo`> until there, yes
[16:14:38] <Leo`> but now :
[16:14:55] <Leo`> env ls - ls -> runs the command "ls - ls"
[16:15:02] <eddyb> that's correct, too
[16:15:09] <Leo`> yes
[16:15:18] <Leo`> but my program stops and says "invalid option ls"
[16:15:19] <Leo`> u_u
[16:15:47] <eddyb> option parsing should stop at - or the first filename-like argument
[16:16:07] <Leo`> the first non-option-like-argument
[16:16:09] <Leo`> :p
[16:16:28] <Leo`> but yeah
[16:17:23] <eddyb> you're parsing everything?
[16:17:41] <eddyb> in traceur-compiler we had to specifically stop the loop at some point
[16:18:06] <Leo`> well, no, but my stop-parsing condition isn't complete enough
[16:18:25] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:31:07] <Leo`> well it's a stupid question but how do I get a vector's size ?
[16:31:18] <Leo`> in fact, I just need a isEmpty() or something like that
[16:32:58] <Leo`> mh
[16:33:01] <Leo`> is_empty
[16:33:39] <cmr> .len(), too
[16:34:23] <Leo`> hmpf
[16:35:42] <Leo`> how do I iterate over a ~[(~str, ~str)] ?
[16:35:54] <cmr> .iter() will yield a &(~str, ~str)
[16:36:00] <Leo`> yep
[16:36:12] <eddyb> for &(a, b) in v.iter(), I think
[16:36:14] <Leo`> I wrote for (n, v) in foo.iter() but it doesn't work
[16:36:20] <Leo`> eddyb: I tried this as well
[16:36:21] <Leo`> wait
[16:36:25] <eddyb> :P
[16:36:26] <cmr> for &(ref n, ref v) in foo.iter()
[16:36:46] <cmr> Can't move out of a &-ptr
[16:36:46] <Leo`> cannot move out of dereference of & pointer :|
[16:37:22] <Leo`> mhhh
[16:37:26] <Leo`> cmr: it seems to work but
[16:37:38] <Leo`> with this, n is a &~ptr right ?
[16:37:47] <cmr> &~str, yes.
[16:38:05] <Leo`> how do I use it as a &ptr ?
[16:38:11] <cmr> It is a &ptr
[16:38:20] <cmr> &T, where T is ~str (which isn't ~T for any T!)
[16:38:30] <Leo`> well, yes
[16:38:33] <Leo`> a &str I mean
[16:38:57] <eddyb> ~str is a discrete type
[16:39:12] <cmr> n.as_slice()
[16:39:19] <Leo`> cmr: I tried this
[16:39:23] <eddyb> cmr: does that copy? oh, slice, nvm
[16:39:34] <Leo`> now I've got error: borrowed value does not live long enough
[16:39:53] <cmr> rusti: let x = ~"asdb"; let y = &x; println!("{}", y.as_slice());
[16:39:59] -rusti- pastebinned 9 lines of output: http://ix.io/8H2
[16:40:09] <cmr> Oh right
[16:40:11] <cmr> rusti broken
[16:42:09] <Leo`> :|
[16:43:37] <cmr> that code does work though :p
[16:43:46] <Leo`> env.rs:119:30: 119:53 note: ...but borrowed value is only valid for the method call at 119:30
[16:43:48] <Leo`> env.rs:119         for &(ref name, _) in std::os::env().iter() {
[16:43:54] <cmr> Ah that
[16:44:00] <cmr> Stash std::os::env() in a local variable.
[16:44:17] <cmr> That's either a bug or a feature in how lifetimes and rvalues are dealt with
[16:44:27] <Leo`> mh it's quite stupid :|
[16:53:32] *** Joins: canhtak (jeremy@moz-652E7CA4.wl.t.ulaval.ca)
[16:53:51] <Leo`> does process_status() expects a path, or a command name will do it, providen it's in the PATH ?
[16:56:06] <Leo`> okay works with just a naeme
[16:56:08] <Leo`> name*
[16:57:09] *** Quits: acrichto (acrichto@moz-69F2E428.ugrad.cs.cmu.edu) (Quit: leaving)
[16:57:27] <Leo`> erf but it does not work with -i though :d
[16:58:53] <Leo`> is there a way I can... mh... "resolve" the name in the path first, then clear the env, then run the command ?
[16:58:59] <Leo`> I mean, other than manually :d
[16:59:00] *** Joins: acrichto (acrichto@moz-69F2E428.ugrad.cs.cmu.edu)
[17:01:47] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[17:02:17] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:02:25] <Seldaek> hah nice problem Leo` :/
[17:02:43] <Leo`> yep :D
[17:02:47] <Leo`> hey brson 
[17:02:48] <Seldaek> AFAIK there is no way to resolve the process path only
[17:03:02] <Seldaek> though iterating through PATH shouldn't be *that* hard
[17:03:11] <Leo`> Seldaek: how does process_status and consorts work ?
[17:03:14] <Seldaek> and that'd be a good thing to patch in libstd..
[17:03:18] <Leo`> they do it by hand or rely on something in libc ?
[17:03:53] <Seldaek> oh wait, I didn't use that
[17:04:07] <Seldaek> use the process stuff in the new rt/io instead
[17:04:16] <Seldaek> std::run will go away I guess
[17:04:22] <Leo`> oh
[17:06:03] <Seldaek> Leo`: there's some example of the new one https://github.com/uutils/coreutils/blob/master/cat/test.rs#L42
[17:06:09] <Seldaek> but that won't solve your problem :p
[17:07:42] <Leo`> Seldaek: it does
[17:08:04] <Leo`> Seldaek: cause I can pass a env to the newly spanned process instead of modifying the parent's one
[17:08:34] <Leo`> thing I couldn't do with the old process functions :p
[17:09:29] <Seldaek> ah right 
[17:09:38] <Seldaek> otherwise.. the magic must happen somewhere in https://github.com/mozilla/rust/blob/master/src/libstd/rt/io/native/process.rs
[17:09:44] <Seldaek> but I have to run so no time to dig into it :)
[17:16:55] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:01:30] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[18:03:18] *** Joins: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP)
[18:06:15] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:10:34] <Leo`> the iPad Air...
[18:10:39] <Leo`> Apple srsly...
[18:10:44] <Leo`> Apple stahp :(
[18:12:52] <cmr> Mac Pro looks so nice, but so much money.
[18:13:45] <Leo`> boarf
[18:13:53] <Leo`> the old Mac Pro was more expensive
[18:17:52] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:27:18] <Leo`> https://github.com/LeoTestard/coreutils/commit/4f7b7c80a5d4f9068fb5bca133972fd39ee51e6d here is a first version Seldaek 
[18:27:26] <Leo`> it's not ready yet :p I'll finish it later
[18:29:44] <devbug> Is there an up to date list of what's gone down in the keynote?
[18:30:47] <cmr> what keynote?
[18:34:03] <Leo`> devbug: Mavericks available for free, 2 new iPads, 2 new iPad minis
[18:34:22] <devbug> Leo`: 2 new?
[18:34:31] <cmr> Oh the apple one
[18:34:31] <devbug> Are they seperating the lines out like S & C?
[18:34:57] <Leo`> devbug: there's a retina and non-retina for each if I understood well
[18:35:36] <devbug> Leo`: ah
[18:37:00] <Leo`> the non-retina is called "iPad 2"
[18:37:06] <Leo`> that's quite confusing
[18:37:15] <Leo`> there is 4 new models :
[18:37:19] <Leo`> - iPad Air (big, retina)
[18:37:24] <Leo`> - iPad 2 (big, non retina)
[18:37:28] <Leo`> - iPad mini retina
[18:37:32] <Leo`> - iPad mini non retina
[18:37:43] * devbug sighs
[18:37:53] <Leo`> and the new Mac Pro starts at $3000. less than what I thought
[18:39:17] * devbug waits for Apple TV
[18:39:21] <devbug> (actual TV)
[18:40:08] <Leo`> mhh didn't see anything about this
[18:51:53] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[18:53:19] *** Joins: geoffhill (geoffhill@moz-244CF33A.amazon.com)
[18:53:47] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:57:10] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:00:31] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:01:19] *** Quits: geoffhill (geoffhill@moz-244CF33A.amazon.com) (Ping timeout)
[19:01:36] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[19:01:46] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[19:02:34] *** strcat1 is now known as strcat
[19:02:48] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:08:13] *** Joins: geoffhill (geoffhill@moz-244CF33A.amazon.com)
[20:00:22] *** Quits: geoffhill (geoffhill@moz-244CF33A.amazon.com) (Quit: geoffhill)
[20:01:15] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[20:01:27] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[20:08:00] *** Quits: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Connection reset by peer)
[20:08:00] *** Joins: geoffhill (geoffhill@moz-79C8D45C.amazon.com)
[20:08:10] *** Joins: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[20:09:04] *** Quits: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Client exited)
[20:14:11] *** Joins: eddyb9 (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[20:14:46] <eddyb9> flashing capslock == kernel panic, it happened again
[20:15:19] <eddyb9> so standby is even less reliable :(
[20:15:53] <eddyb9> freaking custom laptop hardware with linux-incompatible quirks :(
[20:16:37] <eddyb9> (in its defense, it feels like hardware failure)
[20:16:56] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:17:09] <eddyb9> rusti: 42
[20:17:10] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:17:16] -rusti- pastebinned 14 lines of output: http://ix.io/8GE
[20:17:42] <eddyb9> nice timing, strcat....
[20:18:15] <strcat> it was just a 900s lapse in internet :(
[20:18:28] <eddyb9> strcat: how would you say I could get the atomic intrinsics in rust-core?
[20:18:39] <strcat> well I kind of want to redo them in the compiler
[20:18:56] <eddyb9> are they not type aware now?
[20:19:37] <eddyb9> they are wrapped by generics, but it smells of UB for sizeof(T) != sizeof(uint)
[20:20:18] <eddyb9> I've spent my evening diving in BIOS code, just out of curiosity
[20:21:02] <eddyb9> segmentation is not *that* hard, especially when you only do emulation and not analysis
[20:21:18] <strcat> brb
[20:21:51] <eddyb9> my x86 opcode defs might work with 16bit, as I'm using the generic definitions from the intel manual
[20:53:51] <devbug> eddyb9: don't tell me you manually input 'em.
[20:56:30] <eddyb9> devbug: the ones you've seen in my code?
[20:57:07] <eddyb9> I have to input the "meaning" of each one, but it goes quick with copy/modify/paste
[20:58:54] <devbug> eddyb9: I suppose
[20:59:10] <eddyb9> that's not the hardest part
[20:59:12] <devbug> but iirc there is a nice database w/ easily parsable "meaning"
[20:59:38] <eddyb9> to my knowledge, there isn't
[20:59:42] *** kimundi is now known as zz_kimundi
[21:00:04] <eddyb9> (llvm tables are interesting, but intended for codegen)
[21:00:06] <devbug> eddyb9: I'll try and dig it up.
[21:00:58] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[21:01:00] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:01:31] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[21:02:46] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:03:43] *** Quits: dbaupp (Thunderbir@moz-1613C652.lns20.syd6.internode.on.net) (Ping timeout)
[21:12:43] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[21:21:00] *** Quits: canhtak (jeremy@moz-652E7CA4.wl.t.ulaval.ca) (Quit: canhtak)
[21:22:02] *** strcat1 is now known as strcat
[21:28:50] *** Quits: geoffhill (geoffhill@moz-79C8D45C.amazon.com) (Quit: geoffhill)
[21:30:41] *** Joins: geoffhill (geoffhill@moz-244CF33A.amazon.com)
[21:53:22] *** Quits: geoffhill (geoffhill@moz-244CF33A.amazon.com) (Quit: geoffhill)
[21:57:38] *** Joins: geoffhill (geoffhill@moz-244CF33A.amazon.com)
[21:59:07] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[22:01:17] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[22:01:44] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[22:07:18] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:12:03] *** Quits: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP) (Ping timeout)
[22:17:17] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:37:08] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[22:59:14] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[23:00:53] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[23:01:00] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[23:05:40] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:17:01] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:27:16] *** Joins: dbaupp (Thunderbir@7B3DE86F.D5A1DCF.37681C44.IP)
