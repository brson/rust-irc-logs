[00:06:33] *** Quits: reem (reem@moz-9m5ss2.coob.q2h1.0009.2601.IP) (Connection closed)
[00:27:51] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[00:43:56] *** Quits: brson (brson@moz-832.7vl.56.172.IP) (Quit: leaving)
[01:07:10] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[01:12:15] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[01:24:09] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[01:26:30] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[01:28:51] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[01:28:52] *** Joins: reem (reem@moz-3e0lc7.coob.q2h1.0009.2601.IP)
[01:39:36] *** Quits: reem (reem@moz-3e0lc7.coob.q2h1.0009.2601.IP) (Connection closed)
[01:42:34] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[01:55:17] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[01:58:17] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[02:54:21] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[02:54:46] *** Joins: reem (reem@moz-3e0lc7.coob.q2h1.0009.2601.IP)
[03:21:25] *** Joins: quantheory (quantheory@moz-m50t2f.44nj.jtvf.0001.2601.IP)
[03:31:00] *** Joins: kimundi_ (kimundi@moz-r03hcq.dip0.t-ipconnect.de)
[03:34:30] *** Quits: kimundi (kimundi@moz-8ivgis.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[03:34:30] *** kimundi_ is now known as kimundi
[03:40:15] *** kimundi is now known as zz_kimundi
[03:46:53] *** zz_kimundi is now known as kimundi
[03:58:43] *** Quits: reem (reem@moz-3e0lc7.coob.q2h1.0009.2601.IP) (Connection closed)
[04:04:53] *** Joins: reem (reem@moz-3e0lc7.coob.q2h1.0009.2601.IP)
[04:55:13] *** Quits: reem (reem@moz-3e0lc7.coob.q2h1.0009.2601.IP) (Connection closed)
[05:17:24] *** Joins: reem (reem@moz-3e0lc7.coob.q2h1.0009.2601.IP)
[05:44:11] <eddyb> doener: tries disabling it?
[05:44:13] <eddyb> *tried
[05:44:49] <eddyb> nmatsakis: are you going to do something about the unsizing coercions in method lookup? there's a comment there saying it should be made into a coercion at some point
[05:45:08] <eddyb> nmatsakis: bound-targetting coercions would probably handle this nicely
[05:45:34] <eddyb> *targeting
[06:12:36] *** Quits: eddyb (eddyb@moz-l1n.kjd.26.188.IP) (Ping timeout: 121 seconds)
[06:57:42] *** Quits: quantheory (quantheory@moz-m50t2f.44nj.jtvf.0001.2601.IP) (Quit: Leaving)
[07:03:08] *** Joins: simukis (nagisa@moz-pol184.mif.vu.lt)
[07:10:29] *** Joins: eddyb (eddyb@moz-7gq.2kg.166.109.IP)
[07:34:34] *** Quits: eddyb (eddyb@moz-7gq.2kg.166.109.IP) (Ping timeout: 121 seconds)
[07:42:12] *** Quits: reem (reem@moz-3e0lc7.coob.q2h1.0009.2601.IP) (Connection closed)
[07:45:12] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[07:45:27] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[07:56:10] *** Quits: Rym (y@moz-859.d1r.39.217.IP) (Connection closed)
[07:56:15] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[08:04:56] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[08:09:33] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[08:09:33] *** ChanServ sets mode: +o pnkfelix
[08:31:42] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[08:35:55] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[08:55:38] *** Joins: reem (reem@moz-n45dpb.coob.q2h1.0009.2601.IP)
[08:58:40] *** Joins: reem_ (reem@moz-2icmmi.ca.comcast.net)
[08:59:48] *** Quits: reem (reem@moz-n45dpb.coob.q2h1.0009.2601.IP) (Ping timeout: 121 seconds)
[09:03:29] *** Quits: reem_ (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[09:05:35] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[09:08:00] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[09:11:41] *** Quits: simukis (nagisa@moz-pol184.mif.vu.lt) (Client exited)
[09:23:31] *** Joins: reem (reem@moz-0eqd3d.coob.q2h1.0009.2601.IP)
[09:25:50] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[09:26:35] *** Quits: reem (reem@moz-0eqd3d.coob.q2h1.0009.2601.IP) (Connection closed)
[09:27:49] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[09:30:02] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[09:30:06] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[09:33:26] *** Joins: reem (reem@moz-iov04i.coob.q2h1.0009.2601.IP)
[09:45:02] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Ping timeout: 121 seconds)
[09:47:44] *** Quits: reem (reem@moz-iov04i.coob.q2h1.0009.2601.IP) (Connection closed)
[09:52:21] *** Joins: reem (reem@moz-hi4tbc.coob.q2h1.0009.2601.IP)
[10:02:42] *** Quits: reem (reem@moz-hi4tbc.coob.q2h1.0009.2601.IP) (Connection closed)
[10:08:57] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[10:11:26] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[10:13:34] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[10:20:01] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[10:23:29] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[10:24:17] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[10:49:31] *** Joins: bombless (bombless@moz-arl74c.0v2u.0v40.0da8.2001.IP)
[10:52:53] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[11:01:56] *** Joins: rustical (dida@moz-55rvi2.dclient.hispeed.ch)
[11:14:10] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[11:15:51] *** Quits: bombless (bombless@moz-arl74c.0v2u.0v40.0da8.2001.IP) (Ping timeout: 121 seconds)
[11:16:00] *** Joins: bombless (bombless@moz-arl74c.0v2u.0v40.0da8.2001.IP)
[11:18:26] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[11:25:13] *** Joins: eddyb (eddyb@moz-l1n.kjd.26.188.IP)
[11:33:18] *** Quits: bombless (bombless@moz-arl74c.0v2u.0v40.0da8.2001.IP) (Quit: Leaving)
[11:33:47] <eddyb> nmatsakis: my rewrite of adjustment minutia is working out great: the recursive UnsizeKind enum is gone and there are only two places left in the code that care about the different kinds
[11:34:02] <eddyb> nmatsakis: which are extracted from the types (while being more efficient than before)
[11:35:25] <eddyb> this scheme can be furthered to unify all unsizing and allow wrapping the pointer
[11:35:37] <doener> eddyb: --disable-debug wasn't the culprit
[11:35:39] <eddyb> nmatsakis: with this in mind, I'll read nrc's RFC
[11:36:07] <eddyb> doener: that's worrying - what are measuring, exactly?
[11:36:34] <eddyb> rlibs have bitcode that would inflate with more metadata
[11:37:50] *** Joins: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com)
[11:39:33] <doener> eddyb: the metadata is in .note.rustc right?
[11:39:41] <eddyb> doener: I mean, LLVM metadata
[11:40:03] <eddyb> hmm, .note.rustc might be where it ends up in a dylib. in an rlib it has its own blob
[11:40:15] <doener> I'm looking at .sos
[11:40:32] <eddyb> hmm, they don't have bitcode
[11:40:43] <eddyb> :(
[11:41:37] <doener> eddyb: it's .text
[11:41:56] <eddyb> right, you mentioned that
[11:42:20] <eddyb> doener: IRC should have an "awake" status, "away" is overrated
[11:42:48] <eddyb> pnkfelix: around?
[11:43:01] <pnkfelix> eddyb: what's up ?
[11:43:32] <eddyb> pnkfelix: I was wondering if there any plans for the const fn RFC
[11:43:58] <pnkfelix> eddyb: I think everything I know is reflected in the comments made on the RFC itself
[11:45:04] <eddyb> pnkfelix: so it will end being discussed in triage, one of these weeks?
[11:45:14] <pnkfelix> eddyb: in particular, I think that nmatsakis indicated that the core team would like to move forward
[11:45:45] <pnkfelix> eddyb: but let me go review the mtg notes from last week
[11:46:43] <eddyb> pnkfelix: fwiw, I'm just trying to keep track of everything and be ready for a review
[11:58:53] <pnkfelix> eddyb: Okay, I now remember that I missed that mtg (scheduling snafu). it is not clear to me from the notes whether people are/were prioritizing trying to stabilize `const fn` for 1.0 -- at the very least, it seemed like it would not be stabilized for the beta
[11:59:12] <pnkfelix> eddyb: Your current PR, does it feature-gate `const fn` ?
[12:00:23] <eddyb> pnkfelix: no, I wasn't certain when I wrote it. I am still not sure if only definitions, or both uses and definitions are supposed to be gated
[12:01:06] <pnkfelix> eddyb: I would imagine for the short term that it would be best to gate both definitions and uses (in const exprs)
[12:01:41] <pnkfelix> eddyb: I know that may be contrary to your overall goal of getting rid of e.g. INIT_FOO and such
[12:02:03] <eddyb> pnkfelix: I'll be happy to clean up internals
[12:02:15] <eddyb> even if *_INIT are only deprecated
[12:04:08] *** Joins: sigma1 (sigma@moz-ohog4c.range86-135.btcentralplus.com)
[12:04:08] *** Quits: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com) (Connection closed)
[12:05:34] <doener> eddyb: *sigh* in the snapshot commit, stage2 libsyntax is large, but the commit where the new snapshot is registered is the first one where libsyntax in stage1 is small
[12:05:43] <doener> eddyb: what the heck?
[12:08:21] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[12:11:04] <eddyb> LLVM?
[12:11:09] <eddyb> no...
[12:11:21] <eddyb> doener: different build options?
[12:12:08] <doener> eddyb: didn't explicitly run configure again, just make
[12:12:37] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[12:12:40] <eddyb> doener: no, I mean, stage1 is built differently
[12:14:54] <doener> eddyb: no diff between stage1 and stage2 AFAIK -- also, the commit that registered the snapshot had a ~850kb size reduction for stage1 libsyntax compared to the commit before it
[12:15:16] <doener> eddyb: but I wonder why the commit that became the snapshot has a huge libsyntax in stage2 then anyway
[12:17:17] <eddyb> stage1 or stage0?
[12:21:58] <eddyb> nmatsakis: oh! nrc's RFC now reflects the same thing I found!
[12:22:17] <eddyb> which means... I can start implementing it
[12:26:54] <doener> eddyb: stage1/lib, i.e. the one built by the stage0 compiler
[12:29:07] <eddyb> doener: oh, I guess that is usually built the same way as stage2
[12:30:39] <doener> err, wait... build by stage0... so that would have --cfg stage0
[12:31:15] <doener> and stage2/lib/libsyntax is built by the stage1 compiler so --cfg stage1, and those do differ
[12:31:28] <eddyb> doener: you have to be specific :P
[12:32:21] <eddyb> stage1 libsyntax could be stage1/lib/libsyntax* or stage1/lib/rustlib/$target/lib/libsyntax*
[12:32:27] <eddyb> I call the former stage0 because it's stage0/lib/rustlib/$target/lib/libsyntax*
[12:35:42] <doener> eddyb: I was talking about stage1/lib/libsyntax and stage2/lib/libsyntax, respectively
[12:35:57] <doener> eddyb: i.e. the ones built in stage0 and stage1
[12:37:39] <eddyb> yeah, those can definitely differ
[12:39:37] *** Joins: joel2 (joel@moz-6ampnk.gtri.gatech.edu)
[12:58:05] <eddyb> nmatsakis: that autoslicing in method lookup is the biggest blocker right now for doing unsizing on pointers instead of lvalues
[13:00:55] <doener> eddyb: https://gist.github.com/dotdash/4aa1c8abe1c72e25e19b
[13:01:21] <nmatsakis> eddyb: nrc and I spent some time discussing the RFC and he updated it last night after that discussion; from what I can see it now reflects my preferred design
[13:01:25] <nmatsakis> eddyb: so if you like it too, that's good :)
[13:01:55] <doener> eddyb: f81f8d is the commit that registered 270a677 as the new snapshot
[13:01:59] <nmatsakis> eddyb: I plan to bring up const fn today in the core team mtg, because there were some people absent from the last discussion, but I expect we will merge it on a privisional basis 
[13:02:28] <eddyb> type ascription was merged, I need to rebase that impl
[13:02:30] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[13:02:46] <eddyb> nmatsakis: maybe we should do type ascription after these custom coercions are implemented
[13:03:16] <eddyb> otherwise it will end up in a big mess, with the linting and whatnot
[13:04:20] <eddyb> doener: pretty sure optimization levels differ between stages
[13:04:38] <eddyb> nmatsakis: I left a comment with an example of my current refactoring efforts https://github.com/rust-lang/rfcs/pull/982#discussion_r26659105
[13:06:47] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[13:07:25] <eddyb> nmatsakis: it's getting close to the point where we can make the unsized information variable-length
[13:07:42] <nmatsakis> eddyb: I'm fine with holding off on ascription until we get coercion story cleaned up
[13:08:13] <nmatsakis> eddyb: ah, cool, looks like we converged on the impl strategy
[13:08:18] <nmatsakis> independently I mean
[13:08:53] <eddyb> nmatsakis: I never liked recursion in adjustments and other places
[13:10:09] <eddyb> for structs in particular, we only care about the leaf (to determine which unsizing strategy is to be used) and the root (to cheaply query the resulting type), *nothing* in between
[13:23:50] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[13:24:15] *** Quits: sigma1 (sigma@moz-ohog4c.range86-135.btcentralplus.com) (Ping timeout: 121 seconds)
[13:28:14] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Ping timeout: 121 seconds)
[13:28:36] *** Joins: bombless (bombless@moz-at7vjf.0v2u.0v40.0da8.2001.IP)
[13:38:26] <doener> eddyb: oh, stage0 uses no-landing-pads
[13:38:31] <doener> eddyb: guess that explains it
[13:39:01] *** Joins: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com)
[13:56:41] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[14:00:56] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[14:16:41] *** Quits: bombless (bombless@moz-at7vjf.0v2u.0v40.0da8.2001.IP) (Quit: Leaving)
[14:26:14] <eddyb> nmatsakis: grrr, I hate the decodable/encodable changes :(
[14:27:19] <eddyb> nmatsakis: it used to be the case that we *technically* could implement Encodable/Decodable for specific encoders/decoder and make use of special mechanisms
[14:28:01] <eddyb> nmatsakis: astencode is mostly manual because of types, DefId's and other things that need to be specially encoded/decoded/translated between crates
[14:29:02] <nmatsakis> eddyb: yes, that was the motivation for moving the encoder/decoder into the trait
[14:29:13] <nmatsakis> never fully realized
[14:29:13] <eddyb> nmatsakis: huh?
[14:29:18] <eddyb> aaah
[14:29:26] <nmatsakis> that is, the motivation was to make astencode NOT manual
[14:29:30] <eddyb> nmatsakis: and it was eventually reverted :(
[14:30:01] <eddyb> (I didn't know the method used to be generic)
[14:30:03] <nmatsakis> I am intrigued that there is no way to put the tcx into thread-local data, I'd like to ponder some more at some point
[14:30:18] <eddyb> nmatsakis: seems very hacky
[14:30:22] <nmatsakis> *ponder that
[14:30:40] <eddyb> we have context types, how about we don't lock ourselves into being unable to use them?
[14:30:47] <nmatsakis> maybe, but it'd be very convenient in a number of places
[14:31:07] <nmatsakis> in any case, the serialization tool is specific to rustc
[14:31:11] <nmatsakis> at this point
[14:31:15] <nmatsakis> so we could certainly change it back
[14:31:23] <eddyb> nmatsakis: fwiw I figured out how to replicate it with macro_rules
[14:31:25] <nmatsakis> it'd be great to remove all the manual code from astencode
[14:31:38] <eddyb> as in, the entirety of our serialization deriving
[14:32:03] <nmatsakis> oh?
[14:32:23] <eddyb> the only issue was unnamed fields
[14:33:07] <eddyb> which, turns out, can be solved by zipping a long list of identifiers with the types
[14:37:19] <eddyb> nmatsakis: the optimal solution would involve a small built-in deriving core to generate a "verbose data type definition" and macro_rules for the bulk of the codegen
[14:37:37] <eddyb> nmatsakis: auxiliary macros would allow common patterns to be reused
[14:38:10] *** Quits: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com) (Ping timeout: 121 seconds)
[14:42:11] *** Joins: mw (mw@moz-f1s7jp.vie.surfer.at)
[14:46:00] <eddyb> nmatsakis: actually, I really want this, things like field names don't matter for us!
[14:46:29] <eddyb> acrichto: would you be okay with deprecating/removing rustc-serialize if rustc stops needing it?
[14:46:40] <eddyb> acrichto: the macro based solution can be also adopted by serde
[14:47:35] <eddyb> I should've went for this instead of trying to push for customizable deriving, it's much easier
[14:50:51] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[14:54:37] *** Joins: bombless (bombless@moz-at7vjf.0v2u.0v40.0da8.2001.IP)
[14:55:06] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[15:03:18] <nmatsakis> eddyb: seems like a promising idea
[15:45:00] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[15:49:16] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[16:19:51] <acrichto> eddyb: so long as there is a migration strategy to a different library I think we wouldn't mind deprecating it
[16:20:10] <acrichto> eddyb: it's the #1 lib on crates.io (in terms of downloads and reverse deps) so we need to tread cautiously here
[16:21:03] <eddyb> acrichto: we could totally have the library come with macros, and first deprecate the built-in deriving
[16:21:22] <eddyb> and once it's no longer tied to the language, it can die out at its own pace
[16:27:24] *** Quits: bombless (bombless@moz-at7vjf.0v2u.0v40.0da8.2001.IP) (Ping timeout: 121 seconds)
[16:39:10] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[16:43:25] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[16:54:06] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[17:02:20] *** Joins: bombless (bombless@moz-1jdpna.0v2u.0v40.0da8.2001.IP)
[17:07:54] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[17:07:54] *** ChanServ sets mode: +qo brson brson
[17:29:11] *** Quits: bombless (bombless@moz-1jdpna.0v2u.0v40.0da8.2001.IP) (Ping timeout: 121 seconds)
[17:40:06] *** Joins: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com)
[17:43:36] *** Parts: mw (mw@moz-f1s7jp.vie.surfer.at) ("")
[18:04:03] *** Joins: mw (mw@moz-f1s7jp.vie.surfer.at)
[18:06:36] *** Quits: joel2 (joel@moz-6ampnk.gtri.gatech.edu) (Ping timeout: 121 seconds)
[18:12:00] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[18:13:27] *** Joins: nrc (nrc@moz-4bhi2i.xtra.co.nz)
[18:13:28] *** ChanServ sets mode: +qo nrc nrc
[18:14:08] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[18:22:44] *** Quits: rustical (dida@moz-55rvi2.dclient.hispeed.ch) (Ping timeout: 121 seconds)
[18:30:41] <eddyb> nrc: good work on that DST RFC!
[18:31:02] <eddyb> nrc: I really like how it ended up :D
[18:55:49] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[18:59:36] *** Quits: bleibig (bleibig@moz-btk.gm4.170.73.IP) (Quit: Textual IRC Client: www.textualapp.com)
[19:22:17] *** Joins: joel2 (joel@moz-6ampnk.gtri.gatech.edu)
[19:39:07] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[19:43:21] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[19:54:12] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[19:58:28] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[20:04:07] *** Quits: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com) (Ping timeout: 121 seconds)
[20:06:01] <eddyb> nmatsakis: hang a second, why does autoderef_for_index unsize [T; N] to [T]? surely [T; N] implements indexing...
[20:06:51] <eddyb> nmatsakis: it doesn't even need to be generic over the closure, it's always try_indexing_step - did it use to be more complicated?
[20:07:49] <eddyb> error: internal compiler error: type_of with ty_param
[20:07:51] <eddyb> oh, right :P
[20:08:49] <nmatsakis> eddyb: I think it did, but I could believe it can be simplified
[20:09:12] <eddyb> nmatsakis: can you think of any case in which [T; N] wouldn't work but [T] would?
[20:09:26] <eddyb> nmatsakis: such unsizing coercions prevent a proper unification
[20:09:35] <eddyb> and then method lookup itself is just nasty
[20:10:50] <nmatsakis> eddyb: I suspect it may be there for slices
[20:11:05] <nmatsakis> x[3..] where `x` has type `[i32; 22]`
[20:11:16] <eddyb> OH
[20:12:00] *** Joins: reem (reem@moz-dh1bmk.coob.q2h1.0009.2601.IP)
[20:18:57] <nrc> eddyb: thanks
[20:19:58] *** Quits: reem (reem@moz-dh1bmk.coob.q2h1.0009.2601.IP) (Connection closed)
[20:20:10] <eddyb> mem::replace(&mut deref.autoref, None)
[20:20:49] <eddyb> makes me wonder if we should have something like rewrite rules based on the bodies of commonly used methods
[20:23:58] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[20:26:53] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[20:27:48] <eddyb> nmatsakis: do we *really* need the reborrow coercions?
[20:28:17] <eddyb> there's a lot of funny logic around caused by them
[20:38:43] <eddyb> ooh, that's interesting, method probing can only create an autoref'd unsizing
[20:41:01] <nmatsakis> eddyb: we may do some we don't need, but definitely they are there for a reason overall, and there are cases where maybe we should do more, not less
[20:41:43] <eddyb> nmatsakis: I want to kill lvalue unsizing
[20:43:00] <eddyb> but... it's tricky
[20:46:32] *** Quits: joel2 (joel@moz-6ampnk.gtri.gatech.edu) (Ping timeout: 121 seconds)
[20:55:48] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[20:58:43] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[21:00:46] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Client exited)
[21:01:29] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[21:01:54] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Client exited)
[21:02:36] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[21:10:18] <nrc> nmatsakis: is it going to be possible to have a version of the coercion algorithm which doesn't do so much early resolution?
[21:10:41] <nrc> e.g.
[21:11:26] <nrc> I want to coerce &usize to &$23, currently we just resolve $23 = usize, but I don't want to do that, because it migh preclude some later constraints
[21:23:40] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[21:29:29] *** Joins: reem (reem@moz-fc2p47.coob.q2h1.0009.2601.IP)
[21:30:10] *** Parts: mw (mw@moz-f1s7jp.vie.surfer.at) ("")
[21:33:32] *** Quits: reem (reem@moz-fc2p47.coob.q2h1.0009.2601.IP) (Ping timeout: 121 seconds)
[21:45:58] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Connection closed)
[21:54:36] *** nrc is now known as nrc|afk
[22:06:35] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[22:40:28] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[22:45:12] *** Joins: reem (reem@moz-hpgac3.coob.q2h1.0009.2601.IP)
[22:46:41] *** Joins: reem_ (reem@moz-hk2k8r.coob.q2h1.0009.2601.IP)
[22:49:26] *** Quits: reem (reem@moz-hpgac3.coob.q2h1.0009.2601.IP) (Ping timeout: 121 seconds)
[22:51:45] *** Quits: reem_ (reem@moz-hk2k8r.coob.q2h1.0009.2601.IP) (Connection closed)
[22:52:55] *** Joins: reem (reem@moz-a6ef9c.coob.q2h1.0009.2601.IP)
[22:54:58] *** Joins: reem_ (reem@moz-rnqk15.ca.comcast.net)
[22:56:59] *** Quits: reem (reem@moz-a6ef9c.coob.q2h1.0009.2601.IP) (Ping timeout: 121 seconds)
[23:31:46] *** reem_ is now known as reem
[23:58:36] *** Quits: reem (reem@moz-rnqk15.ca.comcast.net) (Connection closed)
