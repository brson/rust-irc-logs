[00:00:51] <ktt3ja> For compile-fail test, if I want to include the whole note `//~ NOTE` and it ends up being more than a 100 characters long, is there a way to break it up?
[00:02:59] <brson> ktt3ja: you can put it on the next line with `//^~ NOTE` or add `// ignore-long-lines` (or something)
[00:03:41] <ktt3ja> brson: thanks :)
[00:05:03] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:12:38] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:20:29] *** Joins: angdev (angdev@16F167B.4C57D258.D8E8354F.IP)
[00:20:37] *** Quits: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP) (Quit: Lost terminal)
[00:26:23] *** kimundi is now known as zz_kimundi
[00:31:42] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[00:32:13] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[00:35:07] <huon> acrichto: \o/
[00:35:37] *** Quits: angdev (angdev@16F167B.4C57D258.D8E8354F.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[00:39:20] *** Quits: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[00:43:16] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:43:40] *** Joins: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net)
[00:43:40] *** ChanServ sets mode: +o tjc
[00:44:26] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:44:50] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[00:46:52] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[00:47:19] *** Quits: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[00:49:02] *** Joins: lpy|codeforces (lpy@7360AA58.F09091A8.1348A864.IP)
[00:51:18] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[00:53:35] *** nrc|afk is now known as nrc
[00:56:45] *** Quits: newbie82 (kvirc@moz-98A4B5CB.dip0.t-ipconnect.de) (Ping timeout)
[01:11:09] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[01:12:49] *** Joins: lpy|code_ (lpy@9A6870A6.F09091A8.1348A864.IP)
[01:13:30] *** Quits: lpy|codeforces (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[01:14:30] *** Quits: lpy|code_ (lpy@9A6870A6.F09091A8.1348A864.IP) (Ping timeout)
[01:19:01] <huon> nmatsakis: ping
[01:19:21] <cmr> acrichto: so libctest is a bit interesting
[01:19:33] <cmr> acrichto: it's going to be linking to libextra for tests... but it's #[no_std];
[01:19:38] <cmr> how does std handle this?
[01:19:48] *** Joins: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net)
[01:19:49] *** ChanServ sets mode: +o tjc
[01:19:55] <huon> cmr: realstd
[01:20:01] <acrichto> cmr: libctest? you mean liblibc?
[01:20:09] <acrichto> or ctest for libc
[01:20:12] <acrichto> but yeah
[01:20:15] <acrichto> #[cfg(test)] extern mod std;
[01:20:19] <acrichto> #[cfg(test)] extern mod extra;
[01:20:22] <acrichto> etc.
[01:20:32] <cmr> ok
[01:20:36] <acrichto> you shouldn't need std/realstd b/c you're already std
[01:21:45] <cmr> acrichto: hah extern mod
[01:21:47] <cmr> dinosaur!
[01:22:03] <acrichto> fn foo(+a: int, &&b: char)
[01:22:18] <acrichto> I'm gonna keep typing "extern mod" for months to come
[01:22:25] <cmr> I still do it all the time.
[01:22:36] <cmr> struct Foo { priv a: int }
[01:22:38] <cmr> etc
[01:22:38] <nmatsakis> huon: pong
[01:22:52] <cmr> thankfully we have awesome error reporting.
[01:23:15] <acrichto> <3 our errors
[01:23:29] <nmatsakis> what should we tpye now
[01:23:31] <nmatsakis> instead of extend mod
[01:23:36] <nmatsakis> extern
[01:23:36] <huon> nmatsakis: I have this feeling the &mut changes you propose are required for soundness, specifically, I can recreate the case of the recurring closure: https://gist.github.com/huonw/9f847dee0e8b6ac1f36f
[01:23:41] <huon> extern crate
[01:23:58] <nmatsakis> huon: I think that may be a different bug,
[01:24:07] <nmatsakis> huon: #12224
[01:24:19] <nmatsakis> though I didn't read that very closely yet
[01:24:40] <nmatsakis> yeah *f.c shouldn't be callable
[01:24:54] <nmatsakis> I hope to close that next week when I have time to code rust again :)
[01:25:02] * cmr wants nmatsakis to have time to code rust
[01:25:08] <huon> awesome, I won't file a bug then; thanks
[01:25:42] <nmatsakis> huon: maybe put that gist in the bug?
[01:25:57] <huon> nmatsakis: ok
[01:26:40] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[01:26:40] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/4mAEAA
[01:26:40] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[01:26:41] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[01:26:41] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/heBGsg
[01:26:41] <ghrust> 13rust/06auto 14e6b032a 15Chris Morgan: Fix a pretty printer crash on `/***`....
[01:26:41] <ghrust> 13rust/06auto 14fd02f90 15bors: auto merge of #12586 : chris-morgan/rust/fix-pretty-print-slash-star-star-star-crash, r=alexcrichton...
[01:26:41] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[01:27:15] <nmatsakis> huon: that's a slight variation on the problem, but I do think it's the same one
[01:27:30] <nmatsakis> so good to have the test
[01:30:05] <huon> nmatsakis: https://github.com/mozilla/rust/issues/12224#issuecomment-36200242
[01:36:33] * ChrisMorgan is, after lunch, going to file a PR which includes making the `mod` part of `extern mod` highlighted as Error in Vim.
[01:38:59] <huon> ChrisMorgan: too slow! the emacs mode already has it :P
[01:39:06] <ChrisMorgan> Whoa, bors is lazy?
[01:39:37] <ChrisMorgan> huon: whoever it was that added crate made it highlight as Error as a bare keyword, but didn't make extern mod Error.
[01:41:07] <cmr> that would be Eridius
[01:41:09] * cmr points
[01:44:41] *** Joins: whitglint (uid15486@moz-31ABA2C0.irccloud.com)
[01:47:55] *** Quits: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[01:48:57] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[01:49:29] *** Joins: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net)
[01:49:29] *** ChanServ sets mode: +o tjc
[01:50:44] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[01:59:26] <acrichto> brson: are we compatible with this license: https://github.com/mirrors/gcc/blob/master/libbacktrace/backtrace.h
[02:01:06] <huon> acrichto: looks like http://opensource.org/licenses/BSD-3-Clause
[02:01:27] <acrichto> oh indeed, thanks
[02:02:33] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[02:04:18] *** flaper87 is now known as flaper87|afk
[02:11:39] <brson> acrichto: yes
[02:13:10] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:17:33] *** Quits: Sharp (Sharp@19388942.6B775EBE.DC877F3B.IP) (Quit: Sharp)
[02:22:28] *** Joins: lpy|codeforces (lpy@665181D6.D58093C6.8C13C571.IP)
[02:22:30] <Eridius> ChrisMorgan: I made crate an error because it's not valid in any other context
[02:22:42] <Eridius> ChrisMorgan: but I can't make mod an error because the vim syntax file isn't smart enough to know what a valid position for an ident is
[02:22:45] <Eridius> err item
[02:23:23] <Eridius> oh wait, I think I misinterpreted
[02:23:29] <Eridius> you want the construct `extern mod foo` to be an error
[02:23:41] <Eridius> to that I say: good idea. I modified the vim syntax file before that was turned into an error (i.e. pre-snapshot)
[02:24:39] *** Quits: lpy|codeforces (lpy@665181D6.D58093C6.8C13C571.IP) (Connection reset by peer)
[02:24:44] *** Joins: lpy|code_ (lpy@665181D6.D58093C6.8C13C571.IP)
[02:26:06] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[02:26:06] *** ChanServ sets mode: +ao pcwalton pcwalton
[02:27:11] *** Quits: canhtak (canhtak@moz-251024EB.wl.t.ulaval.ca) (Quit: canhtak)
[02:28:45] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[02:30:44] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Quit: Leaving...)
[02:33:35] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[02:36:02] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[02:37:43] *** Quits: lpy|code_ (lpy@665181D6.D58093C6.8C13C571.IP) (Client exited)
[02:41:44] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[02:41:44] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/heBGsg
[02:41:44] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[02:42:10] *** Joins: canhtak (canhtak@moz-251024EB.wl.t.ulaval.ca)
[02:42:16] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:44:17] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:46:40] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[02:46:40] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/HDdzUQ
[02:46:40] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[02:46:41] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[02:46:41] <ghrust> [13rust] 15bors pushed 5 new commits to 06auto: 02http://git.io/tLkuAA
[02:46:41] <ghrust> 13rust/06auto 147fbcda1 15Micah Chalmer: Fix emacs indentation of multi-line match patterns...
[02:46:41] <ghrust> 13rust/06auto 1445008f9 15Micah Chalmer: Emacs: stay at the correct position when indenting...
[02:46:41] <ghrust> 13rust/06auto 1455b3c19 15Micah Chalmer: Emacs: indent relative to enclosing block...
[02:46:43] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[02:47:09] *** Quits: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:52:07] <klutzy> rust/build/i686-w64-mingw32/llvm $ make check
[02:52:09] <klutzy> IOError: [Errno 2] No such file or directory: '/home/it/stone/rust/src/llvm/test/lit.cfg'
[02:52:15] <klutzy> grrr windows
[02:52:22] <acrichto> I ran into that recently as well
[02:52:32] <acrichto> although I just kept typing 'make' until it showed up
[02:52:37] *** Quits: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[02:52:42] <acrichto> I may have also done something like "make -C test"
[02:52:44] *** Joins: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net)
[02:52:45] *** ChanServ sets mode: +o tjc
[03:00:45] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[03:02:20] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[03:06:23] *** Quits: zz_kimundi (kimundi@moz-66E7D193.dip0.t-ipconnect.de) (Ping timeout)
[03:08:22] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:08:56] *** Joins: cgaebel (clark@moz-8E0C6BCA.nyc.res.rr.com)
[03:10:13] *** Joins: zz_kimundi (kimundi@moz-236A69C1.dip0.t-ipconnect.de)
[03:10:14] *** zz_kimundi is now known as kimundi
[03:10:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:31:57] <cmr> acrichto: https://github.com/cmr/rust/commit/901430d9fc4bd68dc86979d62d8a4ba415234601 still says https://gist.github.com/cmr/c61e0b5de0af58b485c8
[03:32:06] <cmr> acrichto: (that's just copy-pasted from VERBOSE=1)
[03:33:23] <acrichto> cmr: the start lang item comes from native or green
[03:33:34] <acrichto> or rather, it only comes in the form of libgreen currently
[03:33:42] <acrichto> does libc have any tests?
[03:36:21] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[03:38:45] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[03:40:24] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[03:41:42] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[03:41:42] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14d432431 to 14fd02f90: 02http://git.io/N3iJvQ
[03:41:42] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[03:44:10] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[03:45:00] *** Quits: cgaebel (clark@moz-8E0C6BCA.nyc.res.rr.com) (Ping timeout)
[03:49:45] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[03:51:32] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[03:52:37] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[04:01:45] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[04:01:45] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14042cc89 to 14fd02f90: 02http://git.io/N3iJvQ
[04:01:45] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[04:01:47] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[04:01:47] <ghrust> [13rust] 15bors pushed 5 new commits to 06auto: 02http://git.io/q2iiYg
[04:01:47] <ghrust> 13rust/06auto 147fbcda1 15Micah Chalmer: Fix emacs indentation of multi-line match patterns...
[04:01:47] <ghrust> 13rust/06auto 1445008f9 15Micah Chalmer: Emacs: stay at the correct position when indenting...
[04:01:48] <ghrust> 13rust/06auto 1455b3c19 15Micah Chalmer: Emacs: indent relative to enclosing block...
[04:01:50] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[04:07:45] *** Joins: k4nar (quassel@moz-EE8DAF45.ip-91-121-75.eu)
[04:08:55] <sfackler> any preferences on what the SyntaxExtension variant for an attribute that modifies the tagged item should be called?
[04:09:07] <sfackler> we already have ItemDecorator which produces new items
[04:11:02] <cmr> acrichto: ah ok.
[04:11:05] <cmr> acrichto: no, it doesn't.
[04:12:20] <cmr> acrichto: also when I *was* defining a "start" I got LLVM errors but couldn't reduce.
[04:12:27] <cmr> the usual calling fn with bad signature thing
[04:13:00] <huon> sfackler: ItemModifier?
[04:13:10] <huon> (nice talk, btw)
[04:15:18] <sfackler> thanks!
[04:20:41] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[04:22:42] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[04:22:42] *** ChanServ sets mode: +ao pcwalton pcwalton
[04:25:06] <sfackler> hmm, I kind of think I should change the name of ItemDecorator at the same time
[04:26:31] *** Quits: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net) (Quit: Textual IRC Client: www.textualapp.com)
[04:35:02] <huon> sfackler: ItemCreationDecorator, ItemModificationDecorator
[04:35:13] <huon> (with some sort of abbreviation, preferably...)
[04:35:24] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[04:44:33] *** Joins: lpy|codeforces (lpy@7360AA58.F09091A8.1348A864.IP)
[04:47:59] <cmr> eugh is there no non-racy way to destroy a pthread??
[04:48:15] <cmr> it says pthread_mutex_destroy on a locked mutex is undefined :(
[04:48:41] <erickt> acrichto: ping
[04:48:45] <cmr> ... although I suppose anything locked in it would have problems.
[04:49:12] <huon> cmr: to destroy a pthread_mutex, right?
[04:49:19] <cmr> huon: pthread_mutex_t, yes.
[04:49:21] <cmr> sorry.
[04:49:36] <cmr> also it offers no attempt at ABI stability.
[04:49:37] <sfackler> cmr: forced thread destruction is a horror
[04:49:39] <cmr> so yay for that, too.
[04:49:45] <cmr> sfackler: I meant mutex, my bad :(
[04:49:47] <sfackler> oh
[04:49:56] <sfackler> less of a horror :)
[04:50:23] *** Joins: vadimcn_ (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[04:50:29] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[04:51:15] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[04:51:46] <erickt> cmr: strcat or pcwalton probably knows for sure, but I'd be surprised if there was a non-racy way to kill a mutex
[04:52:09] *** Quits: vadimcn_ (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[04:52:13] <huon> isn't locking a destroyed mutex bad behaviour too?
[04:52:24] <erickt> I would assume so
[04:52:34] <huon> so if you're in a situation where destruction could be racy, you're screwed either way.
[04:52:57] <erickt> yeah, i think you need to guarantee that only one thread has a reference to an object as it's getting destructed
[04:53:22] <erickt> err, swap object with mutex
[04:57:31] <aatch> sfackler, that reveal.js thing you used for your presentation is awesome.
[04:58:47] <cmr> it's unfortunate because I need to write C for my OS class.
[04:58:58] <cmr> but there is basically no way to provide safety at all.
[04:59:52] <cmr> partially applied macros would do wonders for C's expressiveness for macro-based templates though ;p
[05:00:29] *** Quits: meTaAU (admin@moz-4768FEFF.lns20.per1.internode.on.net) (Ping timeout)
[05:00:53] *** Joins: meTaAU (admin@moz-7ACE51BA.lns20.per1.internode.on.net)
[05:00:54] * ChrisMorgan doesn't much like reveal.js, preferring more control over layout and contents and disliking the way it uses an unusual navigation scheme without actually providing benefits for that cost
[05:01:29] <cmr> ChrisMorgan: your svg slides are beautiful, visually.
[05:01:45] <sfackler> aatch: it's pretty cool
[05:01:58] <sfackler> the highlight.js syntax file for rust is rediculously out of date
[05:02:01] <erickt> ChrisMorgan: are you making another presentation?
[05:02:37] * erickt tries to feed more presentations to the presentation gods
[05:02:51] <ChrisMorgan> erickt: probably. Gotta get Teepee rolling before I think it'll be worth speaking about, though.
[05:03:00] <cmr> Teepee being a web framework?
[05:03:02] * cmr hopes
[05:03:12] <ChrisMorgan> Teepee being the continuation of rust-http, as a broader project.
[05:03:15] <aatch> erickt, oh, what kind of length should the presentation be?
[05:03:20] * ChrisMorgan has http://teepee.rs/
[05:03:30] <cmr> heh beautiful
[05:03:36] <cmr> did anyone end up buying a .js domain?
[05:03:48] <ChrisMorgan> cmr: no can doâ€”two letters are reserved for country codes.
[05:03:51] <erickt> aatch: aim for 20-30 minutes
[05:04:01] <ChrisMorgan> Next meetup is when?
[05:04:03] <aatch> erickt, cool, longer than I thought I had.
[05:04:09] <cmr> Ah they were? Ok
[05:04:12] <ChrisMorgan> Last week of March, I presume?
[05:04:13] <cmr> ChrisMorgan: march 13
[05:04:18] <ChrisMorgan> Ooh, earlier.
[05:04:20] <cmr> wait is that date right...
[05:04:23] <cmr> that's what I remember
[05:04:25] <aatch> g2g
[05:04:28] <erickt> it is. and a docathon on 3/16
[05:04:36] <cmr> isn't that in like 2 weeks?
[05:04:41] * cmr does not into calendar
[05:04:45] <erickt> 2 and a half weeks
[05:05:02] <erickt> trying to work around julia's schedule
[05:05:17] <sfackler> huon: do you know why ItemDecorator take a Span and MetaItem instead of just taking the Attribute directly?
[05:05:17] <cmr> is julia someone who is going to do an awesome presentation?
[05:05:34] <erickt> julia is a someone who will do an awesome presentation!
[05:05:42] <cmr> yay awesome presentations \o/
[05:05:43] <erickt> she built an os with rust and blogged about it
[05:05:47] <cmr> ohh her
[05:05:50] <cmr> jvns
[05:06:00] <erickt> yeah
[05:06:00] * cmr also does not into name
[05:06:07] <sfackler> was that the one with the elf loader?
[05:06:18] <sfackler> er, not elf
[05:06:23] <ChrisMorgan> UEFI?
[05:06:29] <sfackler> yeah, that >_>
[05:06:34] <erickt> she's only in town until the 17th and couldn't do a meetup on 14-17th
[05:06:57] <cmr> mm
[05:07:10] <cmr> ChrisMorgan: that website is awesome btw
[05:07:12] <cmr> nice blue.
[05:07:40] <huon> sfackler: no I don't
[05:07:46] <erickt> ChrisMorgan: I agree, I'm looking forward to making you present about your framework :)
[05:07:49] <ChrisMorgan> I started making an animated form of it (lines drawing themselves) but decided that wasn't exactly a high priorityâ€¦
[05:07:58] <cmr> heh
[05:07:59] <huon> sfackler: is `#[foo, bar] struct { ... }` valid?
[05:08:01] <ChrisMorgan> erickt: teepee ain't the framework, it's what rust-http is evolving into
[05:08:08] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:08:22] <ChrisMorgan> A broad project similar in scope to Spray (http://spray.io/), but for Rust.
[05:08:23] <erickt> neato
[05:08:40] <cmr> and a *much* cooler name.
[05:08:42] * ChrisMorgan still needs to get much further before he gets to writing the framework.
[05:08:46] <sfackler> huon: I don't think so?
[05:08:56] <ChrisMorgan> cmr: BTW, the blue was selected as a blueprint sort of colour
[05:08:56] <erickt> we need to buy up all the .rs domains
[05:08:58] <cmr> ChrisMorgan: well, get cracking.
[05:09:01] <huon> rusti: #[deriving(Eq), deriving(Ord)] struct A { x: int }
[05:09:01] -rusti- <anon>:10:23: 10:24 error: expected `]` but found `,`
[05:09:02] -rusti- <anon>:10         #[deriving(Eq), deriving(Ord)] struct A { x: int }
[05:09:02] -rusti-                                 ^
[05:09:02] -rusti- application terminated with error code 101
[05:09:04] <cmr> yes it does indeed look like that.
[05:09:06] <huon> sfackler: seems so
[05:09:13] * ChrisMorgan originally wanted http.rs, but RNIDS (the registrar) has it
[05:09:18] <cmr> erickt: let's just buy serbia.
[05:09:46] * ChrisMorgan went with a registrar with no HTTPS and which proceeded to email him his password in plain text
[05:09:58] <huon> breaking news: the rust community injects millions of dollars into the serbian economy by purchasing thousands of .rs domain names
[05:09:59] <cmr> ChrisMorgan: don't you love that?
[05:10:08] <cmr> ChrisMorgan: this is #1 reason why I started using keepass.
[05:10:08] <ChrisMorgan> Now *that* is why one goes for 100-character random passwords.
[05:10:28] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:11:43] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[05:11:43] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/q2iiYg
[05:11:43] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[05:11:48] <huon> wat http://static.rust-lang.org/doc/master/syntax/ext/deriving/encodable/index.html
[05:11:58] <ChrisMorgan> http://ninet.rs/ was a little cheaper as a registrar, but their site mysteriously became unavailable (timeouts) for a week or so while I was preparing to get the domain, so I didn't use them. Now a new site is up.
[05:12:20] <huon> oh! there's <S> in the doc comments
[05:13:24] <ChrisMorgan> Whoa! https://www.ninet.rs/registracija-domena says 20.5 â‚¬, https://www.ninet.rs/en/register-domains says 29 â‚¬!
[05:15:12] <ChrisMorgan> English tax :D
[05:16:08] <sfackler> huon: looks like rustdoc should be htmlencoding
[05:16:35] <huon> sfackler: well, that exact case would be fixed by the code being inside fences
[05:16:39] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[05:16:39] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/xTusZg
[05:16:39] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[05:16:45] <huon> atm it's just in the markdown "raw"
[05:17:14] <ChrisMorgan> Remember, Markdown allows arbitrary HTML.
[05:17:23] <sfackler> oh, right
[05:17:53] <ChrisMorgan> Shall I fix encoding.rs?
[05:18:00] <ChrisMorgan> s/encoding/encodable/
[05:19:19] <ChrisMorgan> Looks like code fences *and* indentation have been used, too. One or the other, one or the other.
[05:19:43] <huon> ChrisMorgan: feel free to wrap it in ```rust
[05:19:53] <cmr> ChrisMorgan: why not neither?
[05:19:54] <ChrisMorgan> ```ignore is what is needed.
[05:19:56] <huon> it's not like anyone will need to read it at all
[05:20:14] <huon> ChrisMorgan: meh, we don't run doc tests anyway :P
[05:20:32] <ChrisMorgan> cmr: well, if it's a block of Rust code, it should be one or the other.
[05:34:58] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:36:39] <ChrisMorgan> r? https://github.com/mozilla/rust/pull/12591 "Fix syntax::ext::deriving{,::*} docs formatting."
[05:38:27] *** Joins: eddyb (eddy@moz-41DB10DA.residential.rdsnet.ro)
[05:39:22] <eddyb> nmatsakis: with each day that passes, the situation becomes even simpler
[05:39:46] <eddyb> it's trivial to choose between DerefImm and DerefMut
[05:39:53] <eddyb> because there is no choice in the first place!
[05:40:58] <eddyb> RefMut only allows you to get a &mut T, not a &T
[05:42:25] <eddyb> now, there is another problem
[05:43:36] <eddyb> rusti: std::rc::Rc::new(5).ptr
[05:43:37] -rusti- <anon>:10:9: 10:32 error: field `ptr` is private
[05:43:37] -rusti- <anon>:10         std::rc::Rc::new(5).ptr
[05:43:37] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~
[05:43:37] -rusti- error: aborting due to previous error
[05:43:37] -rusti- application terminated with error code 101
[05:43:58] <eddyb> so what do we do with autoderef on that?
[05:44:24] *** Joins: edwardw (edwardw@4112974A.B4358688.30F15291.IP)
[05:44:29] <eddyb> don't want any current code to break
[05:44:31] *** Joins: lpy|code_ (lpy@9A6870A6.F09091A8.1348A864.IP)
[05:45:04] *** Quits: lpy|codeforces (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[05:49:53] *** Quits: lpy|code_ (lpy@9A6870A6.F09091A8.1348A864.IP) (Ping timeout)
[05:50:16] *** Joins: lpy|codeforces (lpy@E44EE2C4.F09091A8.1348A864.IP)
[05:50:43] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[05:52:33] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[06:15:04] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Quit: Computer has gone to sleep.)
[06:15:28] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[06:15:37] <eddyb> #rust is distracting
[06:16:11] <ChrisMorgan> IRC is distracting.
[06:16:15] <ChrisMorgan> Computers are distracting.
[06:16:18] <huon> try "/quit", it makes IRC much less distracting
[06:16:30] <cmr> can confirm.
[06:16:32] <eddyb> what do you think about prefixing smart ptr fields with _?
[06:16:43] <huon> bleh
[06:16:49] <huon> attributes or nothing
[06:16:51] <eddyb> or should we require everyone to do (*x).ptr to access a field named ptr?
[06:16:57] <huon> oh, I see
[06:17:08] <eddyb> typeck doesn't know about privacy, I don't think
[06:17:09] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[06:17:22] <cmr> it'd also be bad to let it be privacy-driven
[06:17:24] <cmr> un-priv a field
[06:17:28] <cmr> now client code is broken
[06:17:29] <eddyb> yeah
[06:17:39] <eddyb> hygiene?
[06:17:49] <eddyb> not just priv, but invisible!
[06:18:12] *** lpy|codeforces is now known as lpy
[06:18:15] <eddyb> hmm, I wonder what we do about hygiene and cross-crate
[06:18:27] <eddyb> I guess we encode resolve maps?
[06:18:30] <cmr> hygiene can't ever come into play xcrate?
[06:18:39] *** Quits: canhtak (canhtak@moz-251024EB.wl.t.ulaval.ca) (Quit: canhtak)
[06:18:52] <huon> hygiene currently only applies to let vars and 'a: loop { .. } labels
[06:18:57] <eddyb> right, because we just decode functions to instantiate them
[06:19:14] <eddyb> we don't care about the contents, and everything is resolved and type-checked already
[06:19:31] <eddyb> but I was thinking about hygiene in type names, field names, etc.
[06:20:20] <eddyb> should we consider something like #[invisible] priv ptr?
[06:23:16] <cmr> ehhhh
[06:23:22] <cmr> I'm wary of this.
[06:23:42] <cmr> how do you actually access priv though?
[06:23:42] <eddyb> suggestions very welcome
[06:24:00] <eddyb> cmr: typeck doesn't really know about privacy
[06:24:08] <cmr> by priv I mean ptr
[06:24:18] <cmr> self.ptr = foo;
[06:24:30] <cmr> self is derefable...
[06:24:37] <cmr> client code could have a ptr
[06:24:43] <cmr> do you just assume no-autoderef in those cases?
[06:24:46] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[06:24:47] <cmr> what are the rules around that exactly?
[06:24:49] <cmr> etc
[06:25:00] <eddyb> mkay, so the situation is tricky
[06:25:01] <cmr> and, how would it interact with single inheritance
[06:25:13] <eddyb> screw single inheritance >_>
[06:25:16] <cmr> pft
[06:25:22] <eddyb> anyways, you don't want to break current code
[06:25:29] <cmr> breaking current code is fine :P
[06:25:46] <eddyb> I mean, in ways that you can't fix
[06:25:57] <eddyb> so the autoderef search should stop at the first structure it finds that has the field
[06:26:04] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Quit: Computer has gone to sleep.)
[06:26:28] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[06:26:41] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[06:26:41] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/zfveZg
[06:26:41] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[06:29:50] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[06:31:48] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[06:31:48] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/WkEKZw
[06:31:48] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[06:31:50] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[06:31:50] <ghrust> [13rust] 15bors pushed 5 new commits to 06auto: 02http://git.io/GTzl3A
[06:31:50] <ghrust> 13rust/06auto 14f0098a1 15Brian Anderson: std: Make atomics immutable. #11583...
[06:31:50] <ghrust> 13rust/06auto 1481d90ab 15Brian Anderson: std: Make the generic atomics take unsafe pointers...
[06:31:50] <ghrust> 13rust/06auto 141f17f03 15Brian Anderson: std: Make the generic atomics in `sync::atomics` private...
[06:31:52] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[06:34:06] <cmr> https://github.com/cmr/cs444-lab5 such a great lab
[06:34:10] <cmr> I await rewriting it in Rust
[06:34:23] * cmr -> bed
[06:34:37] <cmr> huon: oh by the way I rebenched a few of the spikey areas on the graph, could you give it a kick?
[06:34:42] <cmr> I don't have a list :(
[06:34:47] <cmr> (of the commits)
[06:35:22] <cmr> they were all after 92c5738aae54a15717005e84499a522d173a4a09 though.
[06:35:27] * cmr -> bed, for real
[06:35:40] <huon> cmr: lists would be nice ;)
[06:35:42] <huon> but ok
[06:36:27] <huon> cmr: "one is lockless (spmc_lockless.c)." ... that file doesn't exist
[06:36:47] <huon> neither does _clever, for that matter
[06:41:10] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[06:42:40] <cmr> huon: yes this is intentional
[06:42:45] <cmr> huon: haven't finished it yet!
[06:42:59] * eddyb points to the bed
[06:43:03] <cmr> I'm in it!
[06:43:06] * cmr sleeps
[06:43:14] <huon> cmr: lies!
[06:43:17] <huon> on two fronts
[06:43:24] * huon can't believe it!
[06:43:55] <ktt3ja> he's lying, all right
[06:43:58] <ktt3ja> on the bed :p
[06:44:15] <huon> lies on three fronts
[06:44:17] <huon> hehe
[06:53:23] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[06:53:40] *** Joins: Zr40 (zr40@moz-CCFEAB92.adsl.xs4all.nl)
[06:54:49] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Ping timeout)
[06:55:14] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[06:55:28] *** Quits: lpy (lpy@E44EE2C4.F09091A8.1348A864.IP) (Client exited)
[06:56:59] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[06:59:26] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[07:05:22] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[07:06:39] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[07:06:39] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/t0Ob8g
[07:06:39] <ghrust> 13rust/06auto 142505042 15Alex Crichton: rustc: Simplify crate loading constraints...
[07:06:39] <ghrust> 13rust/06auto 148a0f221 15Alex Crichton: rustc: Add the concept of a Strict Version Hash...
[07:06:39] <ghrust> 13rust/06auto 14b251273 15bors: auto merge of #12533 : alexcrichton/rust/svh, r=brson...
[07:06:41] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[07:08:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:10:24] *** Joins: lpy (lpy@8D37022B.F09091A8.1348A864.IP)
[07:10:26] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:15:29] *** Quits: ktt3ja (ktt3ja@moz-85E2770C.hsd1.va.comcast.net) (Quit: Leaving)
[07:22:49] *** Joins: jsonnull (Thunderbir@20DADFC2.48C8B17D.494A0F8B.IP)
[07:24:51] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[07:28:31] <eddyb> nmatsakis: should we extend what we consider "immediate" to two words?
[07:29:00] <eddyb> might make codegen for DSTs better
[07:30:31] <huon> eddyb: for deciding whether passing by value is done via pointer or directly in registers?
[07:30:37] <eddyb> yeah
[07:30:45] <huon> aiui, we should be using LLVM's by-value support and not doing it ourselves
[07:30:53] <eddyb> well, it's not just that
[07:30:58] <eddyb> also eliding allocas
[07:31:33] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[07:31:46] <huon> that's just a small codegen opt, right?
[07:31:54] <eddyb> huon: far from it
[07:31:57] <huon> (well, not necessarily small)
[07:32:09] <huon> but it doesn't change semantics or ABIs
[07:32:25] <eddyb> alias analysis, mem2reg and SROA have to work together to shred to allocas
[07:32:36] <eddyb> s/to/through/
[07:32:46] <huon> which to?
[07:32:53] <eddyb> the last one :P
[07:33:13] <eddyb> devirtualization can't happen before the load of the vtable pointer is constant
[07:34:14] <eddyb> if we make trait objects and closures immediate, and use extractvalue instead of GEPi, devirtualization becomes doable with just instcombine
[07:34:36] <huon> oh, that sounds nice
[07:34:36] <eddyb> it's really only constant folding at that point
[07:34:56] <eddyb> LLVM could even do this as we construct the IR
[07:37:23] <eddyb> huon: also slices
[07:38:06] <eddyb> much simpler to remove bound checks and whatnot when the length isn't behind a pointer
[07:38:32] <huon> yeah
[07:38:45] <huon> can you just bump the threshold and see if it helps?
[07:39:01] <huon> (i guess it's more complicated than that...)
[07:39:13] <eddyb> I plan to do it at one point, after I'm done with this deref mess, though
[07:39:52] <eddyb> I still have to implement translating to SSA values directly (where applicable)
[07:41:12] <huon> how much more complicated will that make the compiler?
[07:41:41] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[07:41:42] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/pllJ5Q
[07:41:42] <ghrust> 13rust/06auto 14be61f98 15Erick Tryzelaar: collections: allow `HashMap` to work with generic hashers
[07:41:42] <ghrust> 13rust/06auto 141b883c7 15Erick Tryzelaar: std: cut down on the memory usage of `SipHasher`
[07:41:42] <ghrust> 13rust/06auto 1419ec7eb 15bors: auto merge of #12544 : erickt/rust/hash, r=alexcrichton...
[07:41:44] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[07:42:03] <eddyb> huon: it might simplify some of trans::expr, I'm not sure
[07:42:42] <eddyb> right now middle::ty tells trans whether it has to do in-place or to-value translation of an expression
[07:42:46] <eddyb> which is absurd
[07:43:22] <eddyb> those are lower details than what middle::ty should know about
[07:43:53] *** Joins: mawuli (mawuli@moz-A89BBCE.com.gh)
[07:44:07] <eddyb> I'd rather use mem_categorization to choose between lvalue and rvalue, though I doubt the distinction is needed
[07:49:07] *** Parts: jsonnull (Thunderbir@20DADFC2.48C8B17D.494A0F8B.IP) ()
[07:51:42] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[07:51:42] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1419ec7eb to 1468a92c5: 02http://git.io/N3iJvQ
[07:51:42] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[07:51:43] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[07:51:43] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/oHTKKA
[07:51:43] <ghrust> 13rust/06auto 14958118b 15Brian Leibig: Add new target 'make dist-osx' to create a .pkg installer for OS X
[07:51:43] <ghrust> 13rust/06auto 145338a53 15Brian Leibig: Make OS X installer build from /tmp/dist/pkgroot, and have it be part of the 'make dist' target
[07:51:43] <ghrust> 13rust/06auto 14be9cbcc 15bors: auto merge of #12546 : bleibig/rust/pkg-osx, r=brson...
[07:51:45] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[07:52:31] *** flaper87|afk is now known as flaper87
[07:53:23] <huon> eddyb: that does sound like it would simplify some things
[07:59:47] <eddyb> huon: how's the graph going, btw?\
[08:00:32] <huon> eddyb: meh, without a list i'm not so keen on it :P
[08:00:55] <eddyb> wouldn't it be a noop for those that didn't change?
[08:01:04] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[08:01:05] <ghrust> [13rust] 15alexcrichton 04force-pushed 06try from 14ae8cc05 to 14af1e6c3: 02http://git.io/k471pw
[08:01:05] <ghrust> 13rust/06try 14af1e6c3 15Alex Crichton: Add basic backtrace functionality...
[08:01:05] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[08:02:42] <eddyb> huon: I think the graph is missing the commit he mentioned
[08:03:04] <huon> eddyb: I just mean, if I had a list, replotting them is easy
[08:03:12] <huon> without a list I have to go and get it myself
[08:03:20] <huon> which is more work than not doing that
[08:03:45] *** Quits: edwardw (edwardw@4112974A.B4358688.30F15291.IP) (Ping timeout)
[08:04:17] <eddyb> oh, irsy doesn't like long hashes
[08:04:38] <eddyb> okay, so he said after http://huonw.github.io/isrustfastyet/mem/#92c5738
[08:05:12] <huon> it should *work* with long hashes?
[08:05:28] <eddyb> I think I should have refreshed. it's odd
[08:05:52] <eddyb> did you hook up the event for changing something after # in the URL?
[08:06:00] <huon> nope
[08:06:07] * huon is bad at JS
[08:06:14] * huon much much prefers Rust
[08:08:44] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:10:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:14:41] *** Quits: Zr40 (zr40@moz-CCFEAB92.adsl.xs4all.nl) (Quit: leaving)
[08:15:10] *** Joins: Zr40 (zr40@moz-CCFEAB92.adsl.xs4all.nl)
[08:18:01] <huon> acrichto: r? https://github.com/mozilla/rust/pull/12595
[08:19:57] <huon> eddyb: it's pushed, so will update at some point soon
[08:20:42] <eddyb> I think it looks different :/
[08:21:04] <huon> yeah, it does
[08:21:11] <huon> the second bunch of commits is smoother
[08:21:19] <eddyb> did I give you this? http://huonw.github.io/isrustfastyet/mem/#b5995b4
[08:21:31] <huon> yes
[08:22:07] <eddyb> so maybe this range is wrong http://huonw.github.io/isrustfastyet/mem/#882c25f,b5995b4
[08:22:34] * eddyb takes a flat iron to the graph
[08:30:05] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[08:31:44] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[08:31:44] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/3pu4xg
[08:31:44] <ghrust> 13rust/06auto 14958118b 15Brian Leibig: Add new target 'make dist-osx' to create a .pkg installer for OS X
[08:31:44] <ghrust> 13rust/06auto 145338a53 15Brian Leibig: Make OS X installer build from /tmp/dist/pkgroot, and have it be part of the 'make dist' target
[08:31:45] <ghrust> 13rust/06auto 149b320eb 15bors: auto merge of #12546 : bleibig/rust/pkg-osx, r=brson...
[08:31:47] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[08:32:35] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[08:32:52] <Yurume> I'm seriously thinking about #12121 (pan-crate search bar for docs)
[08:33:45] <Yurume> should it be able to customize the search bar to use the global database (say, crated from multiple crates)?
[08:34:02] <huon> I think we'll want a backend for that
[08:34:21] <huon> or people will be downloading megabytes of JSON index for every doc page
[08:34:30] <huon> (are we even gzipping & caching it?)
[08:34:43] <Yurume> no
[08:34:57] <Yurume> fyi, libstd's search-index.js weighs 490KB at the moment
[08:35:13] <Yurume> pan-crate database will easily weigh some megs
[08:35:16] <huon> http://developers.google.com/speed/pagespeed/insights/?url=http%3A%2F%2Fstatic.rust-lang.org%2Fdoc%2Fmaster%2Fstd%2Findex.html :(
[08:36:17] <Eridius> does commenting r- on a PR commit cancel a previous r+?
[08:36:20] <Yurume> $ curl -s http://static.rust-lang.org/doc/master/std/search-index.js | gzip -c -9 - | wc -c
[08:36:24] <Yurume> 84310
[08:36:48] <Yurume> not sure how to enable the Content-Encoding header in S3
[08:36:56] <huon> https://github.com/mozilla/rust/issues/12597
[08:37:01] <huon> Eridius: apparently
[08:37:42] <Eridius> I commented r- on https://github.com/mozilla/rust/pull/12584 but bors hasn't noticed yet :/
[08:38:29] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[08:40:10] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[08:42:07] <Eridius> there we go, it updated, and yes, the r- worked
[08:42:09] <Eridius> sorry acrichto 
[08:58:43] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[08:58:43] <ghrust> [13rust] 15alexcrichton 04force-pushed 06try from 14af1e6c3 to 14f158241: 02http://git.io/k471pw
[08:58:43] <ghrust> 13rust/06try 14f158241 15Alex Crichton: Add basic backtrace functionality...
[08:58:43] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[09:04:34] *** Joins: doener (bs@moz-AA189A5A.unitymedia.biz)
[09:08:41] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:10:29] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:11:12] <eddyb> rusti: Some(0) | || Some(5)
[09:11:14] -rusti- <anon>:10:9: 10:29 error: binary operation `|` cannot be applied to type `std::option::Option<<generic integer #0>>`
[09:11:17] -rusti- <anon>:10         Some(0) | || Some(5)
[09:11:19] -rusti-                   ^~~~~~~~~~~~~~~~~~~~
[09:11:21] -rusti- error: aborting due to previous error
[09:11:23] -rusti- application terminated with error code 101
[09:11:26] <eddyb> that would be cool, methinks
[09:11:44] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[09:11:44] <ghrust> [13rust] 15bors 04force-pushed 06auto from 149b320eb to 1468a92c5: 02http://git.io/N3iJvQ
[09:11:44] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[09:21:51] *** Quits: lpy (lpy@8D37022B.F09091A8.1348A864.IP) (Client exited)
[09:24:54] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[09:28:23] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[09:35:22] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[09:36:49] <eddyb> error: internal compiler error: Explicit index of non-index type `<generic #1353>`
[09:36:56] <eddyb> erm, what?
[09:39:14] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[09:41:30] <eddyb> nmatsakis: pretty much ready for review https://github.com/mozilla/rust/pull/12491 :D
[09:41:44] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[09:44:46] <huon> acrichto: thanks for the review
[09:51:45] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[09:51:45] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14ab8cb2f to 1468a92c5: 02http://git.io/N3iJvQ
[09:51:45] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[09:51:47] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[09:51:47] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/OutKhA
[09:51:47] <ghrust> 13rust/06auto 14766dcf1 15Felix Crux: Provide a more helpful error for tests that fail due to noexec...
[09:51:47] <ghrust> 13rust/06auto 14d6752d2 15bors: auto merge of #12587 : felixc/rust/noexec-error-msg, r=brson...
[09:51:47] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[09:51:57] <acrichto> huon: no problem! and of course thanks for the work :), I hope it'll prove quite useful
[09:52:10] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[09:52:11] <ghrust> [13rust] 15alexcrichton 04force-pushed 06try from 14f158241 to 14d9353cb: 02http://git.io/k471pw
[09:52:11] <ghrust> 13rust/06try 14d9353cb 15Alex Crichton: Add basic backtrace functionality...
[09:52:11] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[09:52:55] *** Quits: k4nar (quassel@moz-EE8DAF45.ip-91-121-75.eu) (Ping timeout)
[09:53:07] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[09:54:21] *** Joins: k4nar (quassel@moz-EE8DAF45.ip-91-121-75.eu)
[09:54:50] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[09:57:01] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[09:57:01] <ghrust> [13rust] 15alexcrichton 04force-pushed 06try from 14d9353cb to 14a18e54b: 02http://git.io/k471pw
[09:57:01] <ghrust> 13rust/06try 14a18e54b 15Alex Crichton: Add basic backtrace functionality...
[09:57:01] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[09:59:42] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[09:59:42] <ghrust> [13rust] 15alexcrichton 04force-pushed 06try from 14a18e54b to 14ccfef54: 02http://git.io/k471pw
[09:59:42] <ghrust> 13rust/06try 14ccfef54 15Alex Crichton: Add basic backtrace functionality...
[09:59:42] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[10:01:34] <flaper87> oh boy, StaticTestName(&'static str) 
[10:01:43] <flaper87> T_T
[10:08:20] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:09:10] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[10:09:48] *** Joins: angdev (angdev@8BFC330B.B6767090.413CBA8C.IP)
[10:10:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:12:25] *** Quits: whitglint (uid15486@moz-31ABA2C0.irccloud.com) (Quit: Connection closed for inactivity)
[10:13:03] <eddyb> we have a vec! macro?
[10:13:14] <eddyb> bleah, I need to hurry on variadic generics X_X
[10:15:27] <huon> flaper87: ?
[10:16:54] <eddyb> nmatsakis: good morning :)
[10:17:08] <flaper87> huon: http://pastebin.mozilla.org/4409924 :(
[10:17:25] <huon> &'static str is freeze?
[10:17:48] <eddyb> maybe the other variants aren't?
[10:18:02] <huon> DynTestName(~str)
[10:18:04] <huon> it is
[10:18:17] <eddyb> flaper87: so what's the issue
[10:18:47] <huon> flaper87: (btw, it would be preferably to have the span on exactly the thing that isn't Freeze, rather than the whole item.... if possible.)
[10:18:53] <huon> I guess that might be hard
[10:19:14] <nmatsakis> I think that falls under another issue
[10:19:24] <flaper87> huon: that happens for most of the cases but this one is different, though
[10:19:27] <nmatsakis> specifically, we were discussing better error messages for kind failes
[10:19:32] <nmatsakis> *kind faliures
[10:19:45] <eddyb> huon: I thought someone was working on kind failure paths
[10:19:47] <nmatsakis> don't recall the issue #
[10:20:02] <huon> nmatsakis: yeah, I think I remember an issue like that
[10:20:24] <huon> flaper87: ok
[10:22:23] <flaper87> to give more contest, that error is raised by https://github.com/mozilla/rust/blob/master/src/test/run-pass/core-run-destroy.rs#L24
[10:22:46] <flaper87> s/by/here/
[10:23:12] <eddyb> s/contest/context
[10:23:40] <nmatsakis> eddyb: re: immediates and DST, I don't know, I guess it depends on what LLVM considers "best practice"
[10:23:45] <flaper87> context*
[10:24:27] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Ping timeout)
[10:25:05] <eddyb> nmatsakis: once we have the ability to do most operations with aggregates in SSA values, we can just increase the limit to 2 * size_of::<uint>() and see what happens
[10:25:19] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[10:26:00] <nmatsakis> flaper87: the problem is probably Testfn
[10:26:16] <nmatsakis> I don't know that Proc is considered freeze,
[10:26:18] <nmatsakis> though I think it should be,
[10:26:27] <nmatsakis> in fact, our def'n of freeze is likely somewhat out of date
[10:26:28] <eddyb> hehe
[10:26:35] <eddyb> add :Freeze to everything
[10:26:44] <eddyb> (and watch it not work)
[10:26:51] <nmatsakis> e.g., I think &mut is now freeze, but I'm not sure that it is considered freeze
[10:27:10] <huon> rusti: fn test_freeze<T: Freeze>(_: T) {} test_freeze(proc() {})
[10:27:11] -rusti- <anon>:10:44: 10:55 error: instantiating a type parameter with an incompatible type `proc:Send()`, which does not fulfill `Freeze`
[10:27:11] -rusti- <anon>:10         fn test_freeze<T: Freeze>(_: T) {} test_freeze(proc() {})
[10:27:11] -rusti-                                                      ^~~~~~~~~~~
[10:27:12] -rusti- error: aborting due to previous error
[10:27:12] -rusti- application terminated with error code 101
[10:27:38] <eddyb> rusti: fn test_freeze<T: Freeze>(_: T) {} let p: proc():Freeze = proc() {}; test_freeze(p)
[10:27:39] -rusti- <anon>:10:57: 10:58 error: expected `;` but found `:`
[10:27:39] -rusti- <anon>:10         fn test_freeze<T: Freeze>(_: T) {} let p: proc():Freeze = proc() {}; test_freeze(p)
[10:27:39] -rusti-                                                                   ^
[10:27:39] -rusti- application terminated with error code 101
[10:27:48] <eddyb> rusti: fn test_freeze<T: Freeze>(_: T) {} let p: proc()->():Freeze = proc() {}; test_freeze(p)
[10:27:48] -rusti- <anon>:10:61: 10:62 error: expected `;` but found `:`
[10:27:48] -rusti- <anon>:10         fn test_freeze<T: Freeze>(_: T) {} let p: proc()->():Freeze = proc() {}; test_freeze(p)
[10:27:48] -rusti-                                                                       ^
[10:27:49] -rusti- application terminated with error code 101
[10:27:57] <eddyb> rusti: fn test_freeze<T: Freeze>(_: T) {} let p: proc:Freeze() = proc() {}; test_freeze(p)
[10:27:57] -rusti- <anon>:10:55: 10:56 error: expected `(` but found `:`
[10:27:57] -rusti- <anon>:10         fn test_freeze<T: Freeze>(_: T) {} let p: proc:Freeze() = proc() {}; test_freeze(p)
[10:27:58] -rusti-                                                                 ^
[10:27:58] -rusti- application terminated with error code 101
[10:28:02] <huon> eddyb: (private message until it works as expected)
[10:28:04] <eddyb> what's the syntax :/
[10:28:17] <huon> is there one?
[10:28:18] <eddyb> I know you can have bounds on proc
[10:28:27] <eddyb> maybe there's no exposed syntax
[10:28:57] <huon> check the parser
[10:29:10] <eddyb> I think `proc:Send()` is a bit misleading
[10:29:18] <nmatsakis> the parser is all broken for proc and closures
[10:29:25] <nmatsakis> misleading in what way?
[10:29:31] <eddyb> it's not valid syntax
[10:29:37] <nmatsakis> in what way?
[10:29:46] <nmatsakis> i.e., parser doesn't parse it?
[10:29:49] <eddyb> yeah
[10:30:02] <nmatsakis> parser is broken.
[10:30:15] <nmatsakis> #10533 -- should probably generalize that
[10:30:47] <eddyb> "mut try_mut: bool" oh someone will complain about this
[10:31:43] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[10:31:43] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14d6752d2 to 1468a92c5: 02http://git.io/N3iJvQ
[10:31:43] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[10:31:44] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[10:31:44] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/2n52AQ
[10:31:44] <ghrust> 13rust/06auto 149f3b108 15Brian Anderson: rustc: Remove codemap and reachable from metadata encoder
[10:31:44] <ghrust> 13rust/06auto 14773f2df 15bors: auto merge of #12589 : brson/rust/metadata, r=alexcrichton...
[10:31:44] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[10:33:41] <eddyb> nmatsakis: we really need to restructure method lookup to not have deref loops to gather candidates
[10:35:29] <nmatsakis> eddyb: why?
[10:35:33] <nmatsakis> (not saying I disagree)
[10:35:44] <eddyb> because I might have just made that operation costlier
[10:36:04] <eddyb> (significantly so)
[10:37:35] <nmatsakis> ok
[10:38:30] <eddyb> at least I think it won't try to run the deref loop for lookups of the deref call itself
[10:39:09] <eddyb> because it doesn't have a self_expr to put adjustments on
[10:40:13] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[10:40:46] *** Joins: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[10:41:11] <nmatsakis> eddyb: I'm looking forward to reading your PR; as part of that, I want to try and reconcile my old ideas on optimizing method lookup (which also purge the candidate gathering stage) with the new requirements...
[10:42:44] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[10:44:52] <nmatsakis> flaper87: ping
[10:45:10] <eddyb> pub type MethodMap = @RefCell<HashMap<MethodCall, MethodCallee>>;
[10:45:15] <eddyb> feels a bit nicer now
[10:45:33] <eddyb> (still need to get rid of @RefCell)
[10:46:14] <eddyb> ah, travis is working again
[10:47:56] <flaper87> nmatsakis: pong
[10:48:03] *** Joins: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com)
[10:48:11] <flaper87> nmatsakis: I moved the Freeze check into the visit_expr to get the right span
[10:48:22] <flaper87> It looks like it is indeed the TestFn 
[10:48:31] <nmatsakis> flaper87: nice, re: the span
[10:48:44] <eddyb> oh, I already have DontAutoderefReceiver, so it shouldn't recurse
[10:48:44] <nmatsakis> bit more computationally intense but...
[10:49:06] <nmatsakis> flaper87: seems lke we need a separate bug about expanding def'n of freeze
[10:49:06] <flaper87> nmatsakis: yeah :/
[10:49:35] <nmatsakis> flaper87: this is the existing bug on such error msgs https://github.com/mozilla/rust/issues/12201
[10:49:56] <nmatsakis> somebody was working on it, I think, but I forget who
[10:50:33] * flaper87 clicks and reads
[10:50:51] <nmatsakis> Hildar perhaps
[10:51:07] <nmatsakis> anywho
[10:52:41] <flaper87> "Refactor TypeContents into a visitor that walks the, well, type contents." YES PLEASE! :D
[10:53:02] <nmatsakis> flaper87: hmm I'm not sure that proc *is* Freeze
[10:53:21] <nmatsakis> I guess it depends on precisely what we say freeze means :)
[10:53:28] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:53:58] *** Quits: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com) (Client exited)
[10:54:24] <nmatsakis> in particular, I think T is considered Freeze if x: &'a T implies all data reachable from x is immutable for 'a
[10:54:45] <flaper87> well, the way I've always thought about Freeze is that it is deeply immutable
[10:55:05] <nmatsakis> but in that case, a proc might close over a &Cell or something
[10:55:21] <nmatsakis> I figured that didn't matter, because you shouldnj't be able to *call* a proc
[10:55:25] <eddyb> rusti: let mut x = 0; let y = *& &mut x;
[10:55:26] -rusti- <anon>:10:32: 10:41 error: cannot move out of dereference of & pointer
[10:55:26] -rusti- <anon>:10         let mut x = 0; let y = *& &mut x;
[10:55:27] -rusti-                                          ^~~~~~~~~
[10:55:27] -rusti- error: aborting due to previous error
[10:55:27] -rusti- application terminated with error code 101
[10:55:27] <nmatsakis> if you just have a &proc
[10:55:32] <eddyb> rusti: let mut x = 0; let y = *&mut &mut x;
[10:55:32] -rusti- <anon>:10:32: 10:44 error: cannot move out of dereference of & pointer
[10:55:32] -rusti- <anon>:10         let mut x = 0; let y = *&mut &mut x;
[10:55:32] -rusti-                                          ^~~~~~~~~~~~
[10:55:34] -rusti- error: aborting due to previous error
[10:55:36] -rusti- application terminated with error code 101
[10:55:37] <eddyb> yes :D:D
[10:55:43] <huon> rusti: (*&proc() {})()
[10:55:43] -rusti- <anon>:10:10: 10:21 error: cannot move out of dereference of & pointer
[10:55:43] -rusti- <anon>:10         (*&proc() {})()
[10:55:43] -rusti-                    ^~~~~~~~~~~
[10:55:44] -rusti- error: aborting due to previous error
[10:55:46] -rusti- application terminated with error code 101
[10:56:07] <nmatsakis> but that would make the def'n a bit more subtle, something like:
[10:56:13] <eddyb> so with my transmute_ref/transmute_mut_ref, you can't create new &mut that you can extract
[10:56:25] <nmatsakis> T is considered Freeze if x: &'a T implies all data reachable from x *via x* is immutable for 'a
[10:56:39] <nmatsakis> which is prob a valid def'n for all intents and purposes
[10:57:07] <nmatsakis> (i.e., there may be data that is mutable, but you can't touch it or interact with it)
[10:57:13] <eddyb> however, transmute_mut_ref(&mut &x) could give you &mut &mut x which is bad
[10:57:25] <flaper87> nmatsakis: mmh, I agree with that
[10:57:25] <eddyb> not sure how to restrict that one
[10:58:08] <eddyb> anyways, it would still make transmute less of a problematic construct
[10:58:11] <nmatsakis> flaper87: thinking on this a bit more,
[10:58:21] <nmatsakis> it seems to me that we were hasty to say that the type of a static item must be freeze
[10:58:36] <nmatsakis> in particular, this seems to be the same case as with dtors
[10:58:45] <nmatsakis> that is, we want to ensure that no non-freeze *value* appears
[10:58:51] <nmatsakis> but e.g. in this case, there is no actual danger
[10:59:07] <nmatsakis> (put another way: I think the def'n of freeze is wrong here, but it shouldn't concern your patch if we do it right)
[10:59:16] *** Joins: newbie82 (kvirc@moz-8ADA2484.dip0.t-ipconnect.de)
[10:59:41] <eddyb> you can't actually construct anything other than atomics in static initializers, no?
[10:59:52] <eddyb> *anything non-Freeze
[11:00:26] <nmatsakis> eddyb: well, that depends on what types the user defines
[11:00:41] <nmatsakis> flaper87: so basically I think this is similar to the dtor check
[11:01:37] <nmatsakis> flaper87: probably this amounts to avoiding the non-freeze marker, at present
[11:02:03] <flaper87> nmatsakis: but, would that definition make something like pub struct x<'a> {priv a: &'a mut int} Freeze?
[11:02:03] <nmatsakis> flaper87: since procs can't actually *be* constructed
[11:02:15] <nmatsakis> yes (and I think it should be)
[11:02:21] <nmatsakis> though it's not today
[11:02:25] <nmatsakis> so if you want to be compat with today,
[11:02:28] <nmatsakis> you'd want to ban &mut too
[11:02:36] <nmatsakis> (at least I don't think it is today)
[11:03:01] <flaper87> nmatsakis: it is not, AFAIK.
[11:03:01] <eddyb> why would &mut T not be freeze?
[11:03:18] <nmatsakis> eddyb: because freeze rules are out of date
[11:03:37] <eddyb> you can't use it through &&mut T
[11:04:02] <eddyb> (not mutably, at least)
[11:04:08] <nmatsakis> right
[11:09:03] <nmatsakis> flaper87: eddyb: I udpated #11781 to include expanding def'n of freeze
[11:09:09] <nmatsakis> but I think it need not affect this PR
[11:09:18] <nmatsakis> flaper87: you should just be compat with existing def'n I guess, and hence exclude &mut
[11:09:37] <nmatsakis> or not, I don't care :)
[11:11:46] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[11:11:46] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14773f2df to 1468a92c5: 02http://git.io/N3iJvQ
[11:11:46] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[11:11:50] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[11:11:50] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/pfCFTQ
[11:11:50] <ghrust> 13rust/06auto 147460403 15Chris Morgan: Fix syntax::ext::deriving{,::*} docs formatting....
[11:11:50] <ghrust> 13rust/06auto 1447819a5 15bors: auto merge of #12591 : chris-morgan/rust/deriving-docs-formatting-tweaks, r=huonw...
[11:11:50] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[11:11:54] * flaper87 back, sorry
[11:14:27] <flaper87> nmatsakis: mmh, ok
[11:14:38] * flaper87 is still thinking what to do
[11:15:49] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[11:15:58] <flaper87> brb
[11:19:09] <eddyb> nmatsakis: bleah, we were always inserting adjustments for all method calls, even if they were noop
[11:20:58] <nmatsakis> flaper87: I feel pretty strongly that testing the type for freeze is wrong; should have been a red flag that this one bound is treated so differently from others
[11:25:15] <flaper87> nmatsakis: yeah, it wasn't obvious to me when I first read that issue but it now makes sense. I'd just dare to say that testing the type for immutable statics is generally wrong, because of enum. (brb for realz)
[11:38:27] <huon> eddyb: btw, why do we have both ast_map::{Node, MapEntry} rather than just the latter?
[11:38:48] <eddyb> because I don't want to expose all the nitty gritty details
[11:39:28] <eddyb> MapEntry is just an optimization over (parent_id, Node)
[11:41:47] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[11:42:34] <huon> ah, ok; sounds good
[11:42:59] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[11:43:09] <eddyb> (and it also has the roots)
[11:43:27] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[11:46:00] <eddyb> autoderef(fcx, expr.span, raw_base_t, Some(base.id), true, |base_t, _| ty::index(base_t));
[11:46:10] <eddyb> this is so nice compared to the previous situation :D
[11:51:45] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[11:51:46] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1447819a5 to 1468a92c5: 02http://git.io/N3iJvQ
[11:51:46] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[11:52:11] <huon> eh?
[11:52:39] <huon> what are you doing, android? :'(
[11:53:17] <ChrisMorgan> Yes, bors is certainly broken at present (the last failure looked suspicious, now I see it's the same thing for mine which *can't* have failed).
[11:53:45] <ChrisMorgan> http://buildbot.rust-lang.org/builders/auto-linux-64-x-android-t/builds/1462/steps/test/logs/stdio
[11:54:31] <ChrisMorgan> It's ended up with e.g. libkinds_in_metadata-1646ba11-0.0.rlib and libkinds_in_metadata-64636b4d-0.0.{rlib,so}.
[11:57:04] <huon> ah
[11:57:11] * huon wonders if SVH landed
[11:57:25] <huon> nope
[11:58:21] * flaper87 back
[12:03:34] <eddyb> nmatsakis: I tried to bring back the error for dereferencing a tuple struct... I hope it works
[12:06:42] <eddyb> acrichto: why does travis check out LLVM?
[12:08:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:08:34] <huon> eddyb: it doesn't check out LLVM?
[12:09:41] <huon> oh, so it does
[12:10:03] <eddyb> minor waste of time
[12:10:16] <huon> presumably because ./configure is hardcoded to do it
[12:10:25] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:10:42] <eddyb> <3 parallelism
[12:10:54] <eddyb> it feels so much faster now to compile everything up to librustc
[12:22:59] *** Joins: cgaebel (clark@moz-8E0C6BCA.nyc.res.rr.com)
[12:39:48] *** Joins: canhtak (canhtak@moz-251024EB.wl.t.ulaval.ca)
[12:42:33] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[12:43:26] <pnkfelix> In terms of our internal process, would it be considered poor ettiquette to take the commit's on someone else's PR, pull it over to my repo, add a commit of my own on top (with my desired minor edits), and then file my own PR and r+
[12:43:53] <pnkfelix> On the one hand, I can see a person saying "I should have had a chance to decide whether I wanted those minor edits"
[12:44:12] <pnkfelix> on the other hand, I feel sort of lame making comments with really minor edits that I could just as well do myself.
[12:44:14] <ChrisMorgan> pnkfelix: I've done such a thing once before in Rust (except for giving r+ to myself :P), but it's certainly a touchy matter.
[12:44:37] <pnkfelix> maybe the right answer is to ask the person ahead of time if they mind such a practice in general
[12:44:48] <pnkfelix> rather than acting like a blanket policy for everyone is appropriate
[12:45:02] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[12:45:23] <ChrisMorgan> pnkfelix: possibly the funniest example of my own is https://github.com/mozilla/rust/pull/11492 where I didn't like the approach and wrote something myself but didn't want to file an alternative PR; he then closed his in favour of me making one.
[12:45:24] <pnkfelix> (the giving the "r+" to myself is also quite touchy here.  Obviously I would avoid doing that unless the edits were truly minor things...)
[12:45:40] <ChrisMorgan> â€¦ which I then did a month later.
[12:50:40] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Quit: Leaving...)
[12:50:57] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[12:51:32] *** lpy is now known as lpy|afk
[13:00:15] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[13:05:25] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[13:08:19] <SimonSapin> Random unsolicited suggestion for meeting notes: it would be great to have a summary next to or instead of the agenda, with the decisions that were made or other conclusions that were reached.Â See for example http://lists.w3.org/Archives/Public/www-style/2014Feb/0617.html
[13:08:43] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:10:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:10:44] *** Quits: luz (lucy@moz-CD18B14B.customer.cdi.no) (Input/output error)
[13:10:56] *** Joins: luz (lucy@moz-CD18B14B.customer.cdi.no)
[13:16:05] *** Joins: whitglint (uid15486@moz-31ABA2C0.irccloud.com)
[13:18:47] *** Quits: canhtak (canhtak@moz-251024EB.wl.t.ulaval.ca) (Quit: canhtak)
[13:19:42] *** Joins: canhtak (canhtak@moz-251024EB.wl.t.ulaval.ca)
[13:20:27] *** Quits: canhtak (canhtak@moz-251024EB.wl.t.ulaval.ca) (Quit: canhtak)
[13:21:48] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[13:21:48] <ghrust> [13rust] 15bors 04force-pushed 06auto from 141ddaa77 to 1468a92c5: 02http://git.io/N3iJvQ
[13:21:48] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[13:21:49] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[13:21:49] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/RU288w
[13:21:49] <ghrust> 13rust/06auto 140c46a68 15Axel Viala: Documentation : Tutorial improvement......
[13:21:49] <ghrust> 13rust/06auto 146557b51 15Felix S. Klock II: Minor modifications to Axel's tutorial improvements (see also #12472).
[13:21:49] <ghrust> 13rust/06auto 14a10e850 15bors: auto merge of #12599 : pnkfelix/rust/fsk-issue12472-tutorial-improvement, r=pnkfelix...
[13:21:51] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[13:26:52] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[13:31:38] <eddyb> nmatsakis: how's the #12491 review going? :>
[13:36:41] <eddyb> error: can't capture dynamic environment in a fn item; use the || { ... } closure form instead
[13:36:51] <eddyb> but....
[13:37:03] <eddyb> I guess resolve is really dumb
[13:37:39] <eddyb> it sees MethodCall::expr and it thinks it's the expr in an outer function
[13:38:00] <eddyb> nmatsakis: you added some type aliases in trans, for datums, was it this resolve error?
[13:59:02] *** Quits: mawuli (mawuli@moz-A89BBCE.com.gh) (Ping timeout)
[14:01:29] *** Quits: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Ping timeout)
[14:01:54] *** Joins: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[14:02:32] <eddyb> our Rc's Weak is pretty cheap but it can't be used to create WeakMap's :(
[14:08:31] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:10:01] *** Quits: lpy|afk (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[14:10:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:11:32] <nmatsakis> eddyb: http://4.bp.blogspot.com/-lB_esKdE0TM/UVTCVerqp9I/AAAAAAAAA4U/p1GUoPmzT90/s1600/almoststarted.gif
[14:11:38] <nmatsakis> eddyb: ...what Calvin said
[14:12:28] <eddyb> one of these days I'm going to do to rustc what I did to syntax
[14:12:48] <eddyb> CamelsCamelsEverywhere
[14:13:11] <nmatsakis> flaper87: ping me when you update the PR
[14:14:00] <flaper87> nmatsakis: check-stage2 running, I'll push in a bit
[14:14:09] <nmatsakis> pnkfelix: ...re: the nits question, I've debated it. It'd be nice if github had a way to do that "in place" somehow
[14:14:51] <eddyb> hehehe
[14:14:54] <pnkfelix> nmatsakis: its tricky.  Its easy to just make another commit on top
[14:15:04] <eddyb> I think my changes allow patterns to become overloadable
[14:15:06] <pnkfelix> nmatsakis: but arguably what you really want is a revision of the commit in place
[14:15:08] <eddyb> just slightly so
[14:15:33] <eddyb> (~pat an @pat go through the same path, in mem_categorization)
[14:15:52] <pnkfelix> nmatsakis: (which is then difficult to attach appropriate meta-data to.)  So maybe it is indeed best to have the author incoporate the feedback
[14:16:18] <nmatsakis> pnkfelix: in the end, I've decided it's ok to have several rounds with a PR.
[14:16:21] <pnkfelix> nmatsakis: Though I decided in this case to add a separate commit (after getting the blessing of the author to make a separate PR)
[14:16:30] <nmatsakis> I think our PR culture tends to be faster and looser than, say, spidermonkey, and to our detriment.
[14:16:42] <nmatsakis> partly this is because of github
[14:17:21] <nmatsakis> (which makes things less structured)
[14:17:42] <nmatsakis> (though we've also been getting a lot better -- or maybe just I've been putting more energy into staying on top)
[14:17:51] <nmatsakis> so *I* feel better about things
[14:17:57] <pnkfelix> nmatsakis: yeah, github has problems.  I realized today that we probably should be adding meta-data to the descriptions
[14:18:02] <pnkfelix> nmatsakis: e.g. when closing a bug as a dupe
[14:18:15] <pnkfelix> nmatsakis: one should probably put a link to the dupes in the description
[14:18:27] <pnkfelix> nmatsakis: because right now, when I go to file a bug
[14:18:36] <eddyb> why not a comment?
[14:18:42] <pnkfelix> nmatsakis: and do a search for the terms that I think are relevant
[14:18:48] <eddyb> Closing as duplicate of #1234.
[14:19:01] <pnkfelix> nmatsakis: sometimes a closed-bug comes up alone, and not the currently open one
[14:19:19] <pnkfelix> nmatsakis: eddyb: and it shouldn't fall upon me to read the 100's of comments
[14:19:29] <eddyb> I usually scroll to the end
[14:19:33] <eddyb> but that's just me
[14:19:36] <pnkfelix> nmatsakis: eddyb: when the relevant metadata here is short
[14:19:43] <nmatsakis> I agree that github's "everything is a comment" makes it hard to track
[14:19:57] <nmatsakis> I've been trying to update the top of the bug
[14:19:59] <nmatsakis> which I tihnk is very helpful
[14:20:03] <nmatsakis> but we don't have any guidelines
[14:20:08] <pnkfelix> eddyb: nmatsakis: Its not so bad to scroll.  Perhaps the real problem is that there's no one consistent format
[14:20:08] <nmatsakis> dups, new examples and tests
[14:20:12] <nmatsakis> these would both be helpful
[14:20:17] <eddyb> and it gets weird with PRs
[14:20:19] <nmatsakis> I disagree, I think it IS so bad to scroll
[14:20:28] <nmatsakis> because what you want might be in the middle
[14:20:36] <pnkfelix> nmatsakis: true
[14:20:37] <nmatsakis> surrounded by tons of "cc me" and random discussion
[14:20:39] <eddyb> because bors doesn't structure the merge commit message
[14:20:43] <nmatsakis> that led to the final result
[14:21:11] <eddyb> I tend to move status/discussion points into other comments
[14:21:16] <pnkfelix> and editting other people's comments to try to clean them up (e.g. when they say "closed as dupe" without the duplicate's number) is probably another breach of ettiquette.
[14:21:17] <nmatsakis> but complaining about github is ... well, while one of my favorite pasttimes, not that useful :)
[14:21:26] <eddyb> since the description will show up in the merge commit, with no other indication
[14:21:35] <eddyb> having random stuff in there feels wrong
[14:21:52] <bstrie> what's the point of "cc me"?
[14:22:02] <eddyb> ah, and that. I try to not do it at all
[14:22:05] <pnkfelix> bstrie: its so the Notifications lists those bugs under Participating
[14:22:12] <eddyb> since github - really?
[14:22:26] <eddyb> *suddenly, everything makes sense*
[14:22:32] <bstrie> pnkfelix: where do I find Participating?
[14:22:55] <pnkfelix> bstrie: the left hand side of github.com/notifications/  ?
[14:23:04] <pnkfelix> bstrie: or: https://github.com/notifications/participating
[14:23:08] <bstrie> oh, I was looking in the issue tracker
[14:23:42] *** Quits: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Ping timeout)
[14:23:43] <bstrie> I stopped using the notifications UI a long time ago, emails just seemed more convenient
[14:24:13] <pnkfelix> bstrie: the emails are only the original comment, not the latest edit to it.  So at this point I just follow the links from the web iface.
[14:24:14] <bstrie> but I'm not sure if email notifications allow you to filter out participating vs all
[14:24:35] <bstrie> yeah, that's a problem
[14:24:51] <pnkfelix> nmatsakis: anyway, while I agree that complaining about github is not directly productive, it still might make sense to discuss our policy for how we document issue meta-data
[14:24:59] <pnkfelix> nmatsakis: clearly I'm a fan of trying to update the description
[14:25:37] <pnkfelix> nmatsakis: I hadn't considered trying to put dupes up there in a special spot, but now I'm thinking we should try to encourage it.
[14:25:52] <eddyb> maybe add a label for dupes?
[14:26:33] <eddyb> and wontfix/invalid/etc.
[14:26:34] <pnkfelix> eddyb: not sure if knowing a bug is a dupe is useful without having the link to the other issue.
[14:26:34] <nmatsakis> pnkfelix: yes to everything you said
[14:27:06] <nmatsakis> bstrie: if you write cc me,
[14:27:10] <nmatsakis> then the e-mail puts your name in the cc list
[14:27:16] <nmatsakis> in my case, that affects how it is filtered
[14:27:24] <nmatsakis> so that I see updates to bugs that I'm "participating" in in my inbox
[14:27:29] <nmatsakis> whereas other stuff goes to a rust-github folder
[14:27:32] *** Joins: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP)
[14:27:33] <nmatsakis> so it's still relevant
[14:27:34] <flaper87> well, most of the time one ends up scrolling to read the comments *but* when you already know the bug very well, scrolling to the bottom can be very annoying
[14:27:39] <bstrie> the Deref trait will obviate having to write .borrow() and .borrow_mut() everywhere, right?
[14:27:41] <pnkfelix> nmatsakis: ah, I didn't know github did that with the headers
[14:27:45] <nmatsakis> bstrie: no.
[14:27:45] <pnkfelix> nmatsakis: I'll have to inspect that.
[14:28:00] <nmatsakis> bstrie: it *will* obviate the need to get .borrow().get()
[14:28:01] <eddyb> nmatsakis: did you mention this should be using adjustments instead? let t = ty::type_autoderef(ty::expr_ty(self.tcx, args[0]));
[14:28:03] * flaper87 still needs to find a good config for GH's filters in gmail
[14:28:16] <eddyb> like, a few PRs back
[14:28:18] <nmatsakis> eddyb: I dimly recall mentioning that 
[14:28:19] <nmatsakis> yes
[14:28:38] <eddyb> IMO it should still auto-deref naively after applying adjustments
[14:28:53] <eddyb> because the type can be &mut Foo and it wants Foo
[14:29:36] <eddyb> but it has to apply adjustments, otherwise some_rc.foo() will lets you call a priv foo :P
[14:29:41] <eddyb> *will let you
[14:29:51] <bstrie> nmatsakis: thanks
[14:30:01] <flaper87> I've been also thinking that it could be useful to use labels for approving PRs. I'm not sure if GH's sends notifications for lable changes, though. 
[14:30:24] <flaper87> the benefit of using labels is that it's easier to filter and / or remove if someone things it shouldn't have been approved
[14:30:29] <flaper87> without adding yet another comment
[14:30:33] <pnkfelix> flaper87: labels don't have a record of who added it, do they?
[14:30:48] <flaper87> pnkfelix: I don't think so :(
[14:30:52] <pnkfelix> (at least I don't see such in the web interface)
[14:30:52] *** Quits: angdev (angdev@8BFC330B.B6767090.413CBA8C.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[14:31:03] <pnkfelix> flaper87: I think we need a paper-trail for the r+'s
[14:31:11] <larsberg> flaper87: I don't know if gmail will let you filter on headers, but if there's no X-Github-Reason: header, I send the GH-mails to a separate folder and that works pretty well.
[14:31:30] <flaper87> larsberg: it doesn't have support for custom headers :(
[14:31:35] <larsberg> when you're mentioned, etc. in a thread, that will be set to something reasonable
[14:31:46] <pnkfelix> flaper87: (plus only a subset of the participants can currently r+; I don't know if we can impose similar limitations on adding labels)
[14:32:26] <nmatsakis> eddyb: this is in the privacy code?
[14:32:28] <flaper87> pnkfelix: ah, that's indeed a good point, the reviewers permissions
[14:32:31] <nmatsakis> eddyb: I feel like it should just check the method_origin
[14:32:34] <nmatsakis> eddyb: what else is relevant?
[14:32:54] <nmatsakis> eddyb: i.e., why do we care what the type of the receiver is anyhow?
[14:33:00] <eddyb> hmm
[14:33:12] <flaper87> larsberg: I think I'll end up moving away from gmail, this and other things are just annoying
[14:33:17] <flaper87> :D
[14:33:22] *** newbie82 is now known as eibwen
[14:34:45] <eddyb> nmatsakis: hmm, it might actually be wrong =))
[14:35:04] <nmatsakis> eddyb: "it" being the existing code?
[14:35:12] <eddyb> though constructing an example might be hard
[14:35:41] <eddyb> nmatsakis: it doesn't check privacy when the receiver is a type other than a struct or an enum
[14:35:56] <nmatsakis> eddyb: trait methods still have privacy...
[14:35:59] <nmatsakis> shouldn't be that hard
[14:36:30] <eddyb> I think a private trait implemented on a primitive might trigger it
[14:37:59] <eddyb> nmatsakis: ahh, the use statement fails
[14:38:10] <eddyb> without the use, the method isn't in scope, so it will never show up
[14:38:19] <nmatsakis> oh I see
[14:38:20] <nmatsakis> yes
[14:38:26] <eddyb> so it's incomplete but it will never actually fail
[14:38:32] <nmatsakis> subtle but cute
[14:38:50] <flaper87> nmatsakis: pushed
[14:38:50] <nmatsakis> eddyb: well
[14:38:58] <nmatsakis> do we permit private fns in traits?
[14:39:00] <nmatsakis> I forget
[14:39:03] <nmatsakis> if we did, it would fail :)
[14:39:08] <nmatsakis> flaper87: k
[14:39:10] <eddyb> according to comments, we don't
[14:39:34] <nmatsakis> nonetheless, I tihnk privacy ought to just check the method origin
[14:39:41] <nmatsakis> and see if the method is declare as private
[14:39:45] <eddyb> yeah, I removed that other nonsense
[14:39:46] *** Joins: mib_krdquy (Mibbit@moz-A1FD6A55.access.telenet.be)
[14:39:53] <eddyb> it's just a pointless type query
[14:40:29] *** Parts: mib_krdquy (Mibbit@moz-A1FD6A55.access.telenet.be) ()
[14:41:16] <eddyb> "for overloaded operatrs" classy
[14:42:21] *** Joins: lpy|afk (lpy@12172131.F09091A8.1348A864.IP)
[14:43:06] *** lpy|afk is now known as lpy
[14:47:51] <eddyb> nmatsakis: you're lucky I'm so slow... autoderef could be finished by now ;)
[14:47:57] <eddyb> (and you'd have to review two PRs)
[14:48:38] <eddyb> >_> why does resolve have to output 3 errors for each unresolved names?
[14:54:26] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[14:54:48] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[14:55:23] *** Joins: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net)
[14:55:53] <eddyb>  // Bit of a hack: the "dereference" of a function pointer like `@fn()` is a mere logical concept. We interpret it as dereferencing the environment pointer;
[14:56:02] <eddyb> nevermind that @fn isn't part of the language anymore
[14:56:29] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[14:56:36] <eddyb> it also creates an opaque type by creating an empty tuple which (!!!) is a different type than () in our type system
[14:59:02] <eddyb> nmatsakis: hah, those were the last uses of type_autoderef
[14:59:25] <eddyb> and both index_sty and deref_sty are unused!
[15:01:01] <nmatsakis> eddyb: great.
[15:01:37] <eddyb> anything working with sty feels awkward
[15:01:43] <eddyb> it's like Expr_
[15:08:20] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:08:54] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[15:10:29] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:12:46] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:16:11] *** Joins: angdev (angdev@16F167B.4C57D258.D8E8354F.IP)
[15:23:32] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[15:28:21] *** Quits: ggherdov_ (sid11402@moz-E77DEB21.irccloud.com) (User has been banned from Mozilla (no spamming here))
[15:29:52] <eddyb> cmr: this range is odd http://huonw.github.io/isrustfastyet/mem/#882c25f,b5995b4
[15:33:20] <Yurume> for those in #rust: I actually understand what he (who is from mibbit) says, it is a slightly flawed Korean, but I choose not to reply
[15:33:55] <Yurume> if you need the translation for some reason please message me
[15:34:08] *** Joins: jaeholee (uid4856@moz-31ABA2C0.irccloud.com)
[15:35:33] <pnkfelix> Yurume: Is it offensive?  Or just continued spam?
[15:35:53] <pnkfelix> Yurume: (I supposed either is actionable in terms of kicking the offender)
[15:36:44] <Yurume> a series of questions with some insults
[15:37:47] <Yurume> "ì´ê²ƒì€ ë¬´ì—‡ì— ì“°ëŠ” ë¬¼ê±´ì¸ê³ " "What is the purpose of this"
[15:38:25] <Yurume> "ë‚œ ë‚˜ì˜ ì»´í“¨í„°ê°€ ì—†ë‹¤ê³  ì„¤ëª…í–ˆë‹¤ ë°´ì‹œí‚¤ë‹¤ë‹ˆ ë°ë¼" "I already explained I have no computer but you jerk banned me"
[15:38:38] <eddyb> (technically, it was a kick not a ban)
[15:39:53] <Yurume> "ì›¹ì—ì„œ ì»´íŒŒì¼ í• ìˆ˜ìžˆë„ë¡ ëˆ„ê°€ ì»´í“¨í„°ë¥¼ ì œê³µí•˜ì‹¤ë¶„ ì—†ëƒê³  ë¬¼ì—ˆë‹¤" "I asked for a computer so that (I can) compile (Rust) in the web"
[15:40:37] <pnkfelix> Yurume: okay, at least those are more intelligible statements than the broken english from earlier
[15:40:38] <Yurume> "ì™œ êµ¬ê¸€ì€ ì´ ì–¸ì–´ë¥¼ ì—¡í”„ë¡œê·¸ëž¨ì„ ë§Œë“¤ì§€ ì•Šë‚˜í•˜ê³  ë¬¼ì—ˆë‹¤" "I asked why Google does not make {apps in this language / this language into an app}"
[15:40:48] <pnkfelix> Yurume: But still ridiculous, nonetheless.
[15:40:50] <Yurume> his Korean is broken as well
[15:43:40] <eddyb> oh dear, I can see on the graph I've increased memory usage
[15:43:57] <eddyb> (back when I removed take_glue from tydesc)
[15:44:26] <eddyb> I didn't bother to cache it so it's inlined by default everywhere
[15:45:00] <eddyb> good news is that there's yet another chunk of memory that we'll free when we move away from @T :D
[15:51:49] * pnkfelix suddenly realizes that the reason that liigo's responses are formatted so oddly is probably because they are probably responding to github notifications via via e-mail
[15:52:18] <cmr> yes, they are. as you can see from the little icon on github
[15:52:50] <pnkfelix> cmr: oh, look at that
[15:52:57] <pnkfelix> cmr: I never noticed that before
[15:53:16] *** Quits: eibwen (kvirc@moz-8ADA2484.dip0.t-ipconnect.de) (Ping timeout)
[16:00:51] <eddyb> nmatsakis: we still have deref code for newtype structs
[16:00:55] <eddyb> ;_;
[16:01:44] *** Quits: angdev (angdev@16F167B.4C57D258.D8E8354F.IP) (Quit: Textual IRC Client: www.textualapp.com)
[16:01:49] <eddyb> in trans::expr, that is
[16:04:05] *** Quits: doener (bs@moz-AA189A5A.unitymedia.biz) (Quit: leaving)
[16:05:42] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[16:05:42] *** ChanServ sets mode: +ao dherman dherman
[16:08:32] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:10:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:11:40] *** Quits: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP) (Quit: Lost terminal)
[16:11:59] *** Joins: rcxdude (rcxdude@moz-394D851.nat.csx.cam.ac.uk)
[16:13:38] *** lpy is now known as lpy|afk
[16:13:46] *** Quits: lpy|afk (lpy@12172131.F09091A8.1348A864.IP) (Client exited)
[16:16:38] <cmr> eddyb: that range is re-benching.
[16:17:53] <eddyb> I sure hope nobody tries to use deref through &DerefImm<T>
[16:17:55] *** Joins: lpy|afk (lpy@12172131.F09091A8.1348A864.IP)
[16:17:58] <eddyb> because it will break
[16:19:01] <eddyb> actually, let's just break it for all overloaded ops
[16:20:52] *** Quits: Zr40 (zr40@moz-CCFEAB92.adsl.xs4all.nl) (Quit: leaving)
[16:32:44] *** Quits: lpy|afk (lpy@12172131.F09091A8.1348A864.IP) (Client exited)
[16:35:00] *** Joins: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[16:42:06] *** Quits: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net) (Input/output error)
[16:43:50] *** jdm is now known as jdm|lunch
[16:47:08] *** Quits: Kxepal (Miranda@moz-E614A377.pppoe.mtu-net.ru) (Ping timeout)
[16:47:42] *** Joins: luzie (lu.cy@moz-CD18B14B.customer.cdi.no)
[16:48:19] *** Quits: luz (lucy@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[16:51:13] *** Joins: Kxepal (Miranda@moz-539FCAC2.pppoe.mtu-net.ru)
[16:51:29] *** Joins: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net)
[16:53:41] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[17:02:20] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:08:33] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:09:26] *** Joins: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[17:10:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:13:33] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:17:05] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[17:17:05] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14a10e850 to 1468a92c5: 02http://git.io/N3iJvQ
[17:17:05] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[17:17:06] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[17:17:06] <ghrust> [13rust] 15bors pushed 9 new commits to 06auto: 02http://git.io/NTkDMw
[17:17:06] <ghrust> 13rust/06auto 144cb3bd5 15Flavio Percoco: Remove unused type_is_pod function
[17:17:06] <ghrust> 13rust/06auto 14a22539b 15Flavio Percoco: Implement `has_dtor` method in TypeContents
[17:17:07] <ghrust> 13rust/06auto 14c75dd78 15Flavio Percoco: Keep track of Enum's with destructors
[17:17:09] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[17:17:19] *** Joins: tjc (tjc@moz-7944EAA7.hsd1.de.comcast.net)
[17:17:20] *** ChanServ sets mode: +o tjc
[17:29:20] *** Quits: luzie (lu.cy@moz-CD18B14B.customer.cdi.no) (Quit: 04â†)
[17:31:44] *** Joins: luziie (luziie@moz-CD18B14B.customer.cdi.no)
[17:34:19] <eddyb> it's not going to work cross-crate and I think I still need to support vtables... but I think I'm past the last error :D
[17:35:29] <eddyb> of course I'm not... *sigh*
[17:36:43] *** jdm|lunch is now known as jdm
[17:41:28] *** Joins: canhtak (canhtak@moz-251024EB.wl.t.ulaval.ca)
[17:42:21] <eddyb> "moved by default (use `copy` to override)"
[17:42:36] <eddyb> yay unreachable code?
[17:50:20] <nmatsakis> sounds like a dated error message...
[17:50:26] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:50:29] <eddyb> can it actually show up?
[17:50:39] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:50:53] <eddyb> it's something in borrowck triggered by a moved value
[17:51:05] <eddyb> rusti: let x = ~"foo"; let y = x; let z = x;
[17:51:08] -rusti- pastebinned 8 lines of output: http://ix.io/aMJ
[17:53:27] <nmatsakis> eddyb: is that the entirety of the error message?
[17:53:41] <eddyb> it's basically s/ref/copy
[17:54:22] <eddyb> the kind of "move source" or whatever it is - is used when the expr is in the move map and that can still happen
[17:54:24] <eddyb> oh, I know
[17:54:32] <eddyb> rusti: let x = ~"foo"; Some(x); let z = x;
[17:54:35] -rusti- pastebinned 8 lines of output: http://ix.io/aMK
[17:54:53] <eddyb> nope :/
[17:55:33] <eddyb> wish we had even more dead code analysis
[17:58:03] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[17:59:31] *** Quits: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net) (Ping timeout)
[18:00:06] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:00:50] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[18:02:52] <eddyb> pnkfelix: bors again :(
[18:03:54] <pnkfelix> eddyb: at some point someone will fix it this bug, but I figure its better to try to remind people in the meantime.
[18:04:09] <eddyb> pnkfelix: close enough?
[18:04:27] <eddyb> in other news, autoderef compiles, hopefully I didn't break anything that was already working
[18:06:09] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:07:05] <eddyb> performance will most likely drop
[18:07:53] <eddyb> nmatsakis: among other things, we should really cache method names. every operator overload (and now every method call) does a call to token::intern
[18:08:19] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:14:12] <eddyb> nmatsakis: so I broke methods on &~T and &~[T] :/
[18:17:56] <acrichto> eddyb: re travis checking out LLVM, it's actually us, it's our ./configure script
[18:18:13] <eddyb> can it be disabled?
[18:18:24] <acrichto> probably
[18:18:40] <acrichto> it uses "git submodule foreach", so we'd have to figure out how to say "all submodules but llvm"
[18:19:12] <eddyb> or remove the submodule after checkout :P
[18:19:32] <acrichto> that would also work yeah
[18:19:36] <acrichto> and is probably a better idea
[18:24:02] <eddyb> nmatsakis: I hope it's just me returning the type that's not a structurally_resolved_type, from one place
[18:24:24] <eddyb> rusti: let mut x; loop {x = ~x; x.foo();}
[18:24:29] -rusti- timeout triggered!
[18:24:37] <eddyb> nmatsakis: ^^ I think I fixed that, btw
[18:24:49] <nmatsakis> ...that shouldn't happen
[18:25:01] <nmatsakis> nice
[18:25:01] <eddyb> for fields and indexes, there's a few checks in check::do_autoderef
[18:25:31] <eddyb> check::method implemented its own deref loops, and I've changed it to use the one in check
[18:25:35] <eddyb> rusti: let mut x; loop {x = ~x; x.foo;}
[18:25:35] -rusti- <anon>:10:34: 10:39 error: type inference failed because I could not find a type
[18:25:36] -rusti-  that's both of the form <generic #3> and of the form @<generic #3> - such a type would have to be infinitely large.
[18:25:36] -rusti- <anon>:10         let mut x; loop {x = ~x; x.foo;}
[18:25:36] -rusti-                                            ^~~~~
[18:25:36] -rusti- application terminated with error code 101
[18:25:49] <eddyb> the error message is still a bit silly and inaccurate
[18:25:59] <eddyb> ty::occurs_check fwiw
[18:26:49] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[18:26:49] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1420f5767 to 1468a92c5: 02http://git.io/N3iJvQ
[18:26:49] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[18:27:18] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[18:28:12] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:28:40] <acrichto> Eridius: ping
[18:30:11] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:30:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:32:44] <eddyb> nmatsakis: hah, it was a non-structurally resolved type, std builds :D
[18:33:08] <nmatsakis> eddyb: nice
[18:34:33] <eddyb> the only crate that didn't build was libnum
[18:34:55] <eddyb> and I actually consider it a bit of a bug that it worked before
[18:35:02] <eddyb> rusti: &0 + 1
[18:35:18] *** Joins: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP)
[18:35:21] <eddyb> rusti pls
[18:35:27] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[18:35:42] <eddyb> nmatsakis: are overloaded ops supposed to autoderef the lhs?
[18:35:45] <eddyb> rusti: &0 + 1
[18:36:11] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[18:36:13] <eddyb> nmatsakis: they certainly use DontAutoderefReceiver
[18:36:40] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[18:37:51] <nmatsakis> eddyb: I agree they should not,
[18:37:51] *** Joins: luziiie (luziie@moz-CD18B14B.customer.cdi.no)
[18:38:04] <nmatsakis> in general I think we should do *no* coercions for operators
[18:38:07] <eddyb> \o/ another fixed bug, then :P
[18:38:07] <nmatsakis> but we currently do some
[18:38:29] <eddyb> nmatsakis: candidate collection was collecting more than what search was looking at
[18:38:39] *** Quits: luziie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[18:38:55] <eddyb> so complex now fails to compile
[18:38:57] <eddyb> error: binary operation `*` cannot be applied to type `&T`
[18:39:11] <eddyb> libnum::complex, that is
[18:39:15] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:39:19] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[18:39:34] *** Joins: luz1 (luziie@moz-CD18B14B.customer.cdi.no)
[18:39:40] <eddyb> nmatsakis: so should I change the code to dereference those receivers?
[18:39:48] <nmatsakis> eddyb: I believe so, yes.
[18:39:53] <eddyb> rusti: &0 + 1
[18:40:03] <eddyb> am I crashing rusti or something?
[18:40:11] *** Quits: luziiie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[18:40:49] -rusti- failed to pastebin 35 lines of output
[18:43:02] <eddyb> error: type `std::rc::Rc<std::cell::RefCell<~str>>` does not implement any method in scope named `borrow_mut`
[18:43:07] <eddyb> it doesn't quite work, it seems
[18:43:14] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:44:15] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[18:44:16] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[18:49:10] *** Quits: luz1 (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[18:49:22] *** Joins: luziie (luziie@moz-CD18B14B.customer.cdi.no)
[18:49:46] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:51:58] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[18:52:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:52:11] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[18:52:11] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:54:58] *** Joins: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com)
[18:59:59] <eddyb> push_candidates_from_impl: deref Ref<'b, T>.DerefImm<T> [deref]
[19:00:17] <eddyb> why doesn't it get picked up :(?
[19:01:04] <eddyb> does it need autoref?
[19:06:42] <eddyb> nmatsakis: I need that CFG now :(
[19:06:48] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[19:06:48] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14de51bc0 to 1468a92c5: 02http://git.io/N3iJvQ
[19:06:48] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[19:06:50] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[19:06:50] <ghrust> [13rust] 15bors pushed 9 new commits to 06auto: 02http://git.io/kVpWvw
[19:06:50] <ghrust> 13rust/06auto 144cb3bd5 15Flavio Percoco: Remove unused type_is_pod function
[19:06:50] <ghrust> 13rust/06auto 14a22539b 15Flavio Percoco: Implement `has_dtor` method in TypeContents
[19:06:50] <ghrust> 13rust/06auto 14c75dd78 15Flavio Percoco: Keep track of Enum's with destructors
[19:06:52] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[19:08:13] *** Joins: aphistic (aphistic@moz-D08A46AA.erikd.org)
[19:10:07] *** Joins: edwardw (edwardw@24D7341C.32602B75.B9C6B12A.IP)
[19:17:12] *** Quits: pcmattman (pcmattman@moz-D9B7D938.net) (Ping timeout)
[19:17:45] *** Joins: pcmattman (pcmattman@moz-D9B7D938.net)
[19:21:00] <eddyb> rusti: Some::<int> == Some::<int>
[19:21:01] -rusti- <anon>:10:9: 10:35 error: binary operation `==` cannot be applied to type `fn(int) -> std::option::Option<int>`
[19:21:01] -rusti- <anon>:10         Some::<int> == Some::<int>
[19:21:01] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~~
[19:21:01] -rusti- error: aborting due to previous error
[19:21:01] -rusti- application terminated with error code 101
[19:21:06] <eddyb> :(
[19:22:18] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:22:18] *** ChanServ sets mode: +qo brson brson
[19:24:35] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[19:24:54] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:26:38] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:27:00] <brson> i wish there was some standard way to write a cross-platform unix install script
[19:28:20] <cmr> it's called 0install :p
[19:28:24] <strcat> brson: if make install DESTDIR="$pkgdir" works
[19:28:54] <brson> cmr: does 0install require anything but sh?
[19:29:01] <strcat> 0install uses ocaml, etc.
[19:29:13] <strcat> and people will still want native packages
[19:29:32] <strcat> although 0install can do something like install llvm via the system pkg manager *as a dep* if you ask it to
[19:29:37] <brson> i don't want an ocaml dependency for installation
[19:29:46] <eddyb> rewrite it in Rust!
[19:29:51] <cmr> well it's just a static bin iirc
[19:29:55] <cmr> but yes.
[19:30:03] <cmr> it's a separate package manager.
[19:30:06] <cmr> I said it half in jest.
[19:30:32] <eddyb> cmr, huon: graph updates?
[19:30:36] <cmr> eddyb: can you kick houn to rebuild the graph?
[19:30:38] <cmr> yeah :P
[19:30:39] <eddyb> hehe
[19:30:40] <cmr> I did that range.
[19:30:44] <cmr> it finished some hours ago actually.
[19:30:49] <cmr> been busy today
[19:30:53] <eddyb> huon doesn't seem to be around
[19:31:01] *** Joins: luziiie (luziie@moz-CD18B14B.customer.cdi.no)
[19:31:13] *** Quits: luziie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[19:32:01] <eddyb> nmatsakis: so I decided to imply an AutoPtr adjustment on auto-deref calls
[19:32:03] <edwardw> r? https://github.com/mozilla/rust/pull/12563
[19:32:16] <eddyb> since auto-deref forces it to be the Self type
[19:32:26] *** Quits: whitglint (uid15486@moz-31ABA2C0.irccloud.com) (Quit: Connection closed for inactivity)
[19:32:33] <nmatsakis> eddyb: I'm not usre I follow
[19:32:42] <eddyb> mkay, so, if T implements DerefImm
[19:32:59] <eddyb> with auto-deref, it will never try to call .deref() on &T, but only on T
[19:33:32] <eddyb> which means it will always have to AutoPtr before actually calling .deref()
[19:34:33] <eddyb> since deref has a fn(&T) -> &U signature, not fn(T) -> ...
[19:34:49] <nmatsakis> ok
[19:35:37] <eddyb> though... I wonder if I need the data in AutoPtr
[19:35:44] <nmatsakis> so
[19:35:48] <nmatsakis> I think you're saying:
[19:36:02] <nmatsakis> if we want to insert an automatic deref,
[19:36:10] <nmatsakis> you're not going to (1) autoderef and then autoref,
[19:36:20] <nmatsakis> but rather try to skip  that step and just autoref to start?
[19:36:40] <eddyb> erm, no
[19:37:26] <eddyb> auto-deref always tries to peel off pointers before attempting to call an overloaded deref
[19:37:55] <eddyb> normal method lookup will try various things that may need adjustments
[19:38:06] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:38:29] <eddyb> overloaded deref calls, as part of auto-deref will always have a stripped receiver
[19:39:19] <eddyb> so the only solution would be to *only* accept 0 derefs (there's nothing to deref anyway) and AutoPtr
[19:39:45] <eddyb> and consider the AutoPtr implied for all overloaded deref calls, which are part of auto-deref
[19:39:53] <eddyb> nmatsakis: I still probably don't make a lot of sense
[19:41:00] <eddyb> mkay, so the only place that cares about region and mutability in AutoPtr is regionck
[19:41:29] <eddyb> lint cares about mutability, but that can always be extracted if necessary
[19:42:41] <eddyb> nmatsakis: okay, everything looks good, I *may* have missing functionality in regionck, but that didn't prevent my code from working in the past
[19:43:59] <nmatsakis> eddyb: I don't follow but I think (hope?) it will make more sense when I read the patch
[19:44:06] <nmatsakis> I can't do that right now 
[19:44:26] <eddyb> this is hard to understand even when you've worked on the relevant code for days :P
[19:45:16] <eddyb> it's just that we kinda have to nest deref calls in a process, preferably without storing a ton of information
[19:48:44] *** Quits: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[19:52:16] *** Quits: cgaebel (clark@moz-8E0C6BCA.nyc.res.rr.com) (Ping timeout)
[19:52:40] *** Joins: cgaebel (clark@moz-8E0C6BCA.nyc.res.rr.com)
[19:56:05] *** Quits: tjc (tjc@moz-7944EAA7.hsd1.de.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[19:56:47] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[19:56:47] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/4x2T_A
[19:56:47] <ghrust> 13rust/06auto 142505042 15Alex Crichton: rustc: Simplify crate loading constraints...
[19:56:47] <ghrust> 13rust/06auto 148a0f221 15Alex Crichton: rustc: Add the concept of a Strict Version Hash...
[19:56:47] <ghrust> 13rust/06auto 14ad57d85 15bors: auto merge of #12533 : alexcrichton/rust/svh, r=brson...
[19:56:49] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[20:06:15] <eddyb> Ok(task 'rustc' failed at 'RefCell<T> already borrowed'
[20:06:46] <eddyb> acrichto: ever since the removal of conditions, we have these Ok( things around task failure... and it's really weird :/
[20:07:04] <eddyb> if anything, I would expect it to be Err(...)
[20:07:04] <acrichto> I think that may just be rustc
[20:07:09] <eddyb> oh, hmm
[20:07:14] <eddyb> rusti: fail!("boo")
[20:07:17] -rusti- pastebinned 8 lines of output: http://ix.io/aaw
[20:07:32] <acrichto> https://github.com/mozilla/rust/blob/master/src/librustc/lib.rs#L409
[20:07:37] <eddyb> rusti: fail!("boo"); 4
[20:07:41] -rusti- pastebinned 8 lines of output: http://ix.io/aaw
[20:08:00] <eddyb> can we please not do inference for ! expressions?
[20:09:52] *** Joins: mawuli (mawuli@moz-A89BBCE.com.gh)
[20:11:42] <eddyb> (given 5 minutes to think on it, ignore that thought, it would mean unreachable code doesn't have to be valid)
[20:12:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:12:36] <eddyb> acrichto: so read_to_str is wrong?
[20:13:29] <eddyb> or, hmm, it could be that it returns Result, in which case, it should be unpacked
[20:13:55] <acrichto> it needs to be unpacked
[20:14:19] *** Quits: mawuli (mawuli@moz-A89BBCE.com.gh) (Ping timeout)
[20:14:37] *** Joins: mawuli (mawuli@moz-A89BBCE.com.gh)
[20:15:42] *** Quits: edwardw (edwardw@24D7341C.32602B75.B9C6B12A.IP) (Quit: Leaving...)
[20:16:42] <eddyb> and now I wish for a debug mode of RefCell where it stores a stack trace for mutable borrows
[20:17:13] <eddyb> acrichto: do your stack trace facilities allow for an usecase like that?
[20:18:29] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[20:18:50] *** Quits: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[20:19:10] *** Quits: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[20:20:18] <brson> acrichto: what happened with all the retries? did the android bot break?
[20:20:45] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[20:20:45] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:23:22] <eddyb> nrc: sorry I didn't check reddit earlier, only now I've read your question
[20:23:57] <brson> I can't connect to the build master
[20:24:03] <brson> think I'm going to have a panic attack
[20:24:05] <nrc> no worries - reddit is kind of annoying in that it doesn't tell you about replies
[20:24:19] <nrc> brson: breath deeply
[20:27:16] <eddyb> cmr: this assumes Self is a type parameter https://github.com/mozilla/rust/issues/12600
[20:27:30] <eddyb> which has caused us some nonsense in the current implementation
[20:27:56] <eddyb> it doesn't have to be special in impls, it can just resolve to the impl'd type
[20:28:43] *** Joins: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com)
[20:28:43] *** ChanServ sets mode: +ao nmatsakis nmatsakis
[20:29:11] *** Joins: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com)
[20:31:57] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[20:31:57] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14ad57d85 to 1468a92c5: 02http://git.io/N3iJvQ
[20:31:57] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[20:31:58] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[20:31:58] <ghrust> [13rust] 15bors pushed 9 new commits to 06auto: 02http://git.io/4MAg6g
[20:31:58] <ghrust> 13rust/06auto 144cb3bd5 15Flavio Percoco: Remove unused type_is_pod function
[20:31:58] <ghrust> 13rust/06auto 14a22539b 15Flavio Percoco: Implement `has_dtor` method in TypeContents
[20:31:58] <ghrust> 13rust/06auto 14c75dd78 15Flavio Percoco: Keep track of Enum's with destructors
[20:32:00] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[20:32:33] <eddyb> nrc: hmpf. I guess I was being emotional about the whole story
[20:33:46] <eddyb> nrc: but single inheritance tends to lead to bad patterns IME, if it starts being used on a larger scale
[20:34:12] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[20:34:39] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[20:34:43] <eddyb> if you have just single inheritance, is nicer than nothing, but limiting at the same time
[20:35:16] <eddyb> it's a tradeoff that reminds me of everything that is bad in Java
[20:35:35] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[20:35:35] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:38:26] <nrc> eddyb: do you have examples of bad patterns? I agree that Java is a bit un-flexible, but without specifics its hard to judge if single inheritance of fields will lead to the same problems
[20:38:33] *** Quits: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com) (Quit: leaving)
[20:39:07] <eddyb> nrc: exposing two sub-structures
[20:39:19] <eddyb> or sub-types to generalize
[20:39:21] *** Joins: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com)
[20:39:46] <eddyb> struct Basket {apples: Apples, oranges: Oranges}
[20:40:39] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[20:40:59] <eddyb> with traits, you can implement both HasApples and HasOranges, create another trait, ApplesAndOranges: HasApples+HasOranges, etc.
[20:41:22] <eddyb> but you don't get nice access to fields with that
[20:41:54] <eddyb> single inheritance makes it easy to do struct Basket: Apples {oranges: Oranges}
[20:42:19] <eddyb> and then only one of "apples" and "oranges" is first-class. ensue design frustration
[20:42:33] <eddyb> nrc: </rant>
[20:43:46] <eddyb> nrc: btw, DST technically allows Rc<ApplesAndOranges> -> Rc<HasApples>
[20:44:12] <eddyb> and -> Rc<HasOranges>
[20:44:52] <eddyb> with single inheritance, you make one of those semantically more powerful than the other one
[20:45:05] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[20:45:06] <eddyb> and/or restrict trait inheritance to single inheritance, which would be a crime
[20:45:50] *** Quits: blank_name (blank_name@463DB555.53526368.6D228269.IP) (Quit: leaving)
[20:47:17] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[20:47:17] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[20:47:20] <bstrie> I think sadly we might need to publish a paper on our traits design
[20:47:34] <bstrie> we've diverged pretty far from the original traits paper :P
[20:47:39] <eddyb> hehe
[20:47:44] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Ping timeout)
[20:47:52] <eddyb> and trait inheritance differs from type classes
[20:48:11] <eddyb> (I actually like that)
[20:48:22] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[20:48:22] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:49:15] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[20:50:02] <eddyb> bstrie: "Rusty traits - practical type classes"
[20:50:44] <acrichto> brson: the android bot went haywire
[20:50:55] <acrichto> brson: it was failing everything because I think 'make clean' wasn't working perhaps
[20:50:58] <eddyb> sentient droid?
[20:51:09] <acrichto> haven't had a successful commit yet, though, so there may be another problem
[20:51:36] <nrc> eddyb: thanks, that makes sense. I'll have a think about that. 
[20:52:15] <eddyb> nrc: np, just being whiny about having nice things in the only language that fits my dream specs :P
[20:52:47] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[20:52:54] *** Joins: blank_name (blank_name@463DB555.53526368.6D228269.IP)
[20:54:16] <aatch> eddyb, you too eh?
[20:54:43] <eddyb> I used to spent my holidays obsessing about it
[20:54:53] <eddyb> we still don't have an IDE, but I don't need it (yet)
[20:57:12] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[20:58:08] <eddyb> btw, one of the design points was a way to modify the language as it was parsed
[20:58:09] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[20:58:10] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:58:18] <eddyb> not really complicated semantics, but more like DSL
[20:58:31] <eddyb> macros are so close to that I don't even care anymore <3
[20:58:51] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[21:01:01] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[21:01:14] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[21:01:14] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:01:17] <flaper87> android hates me 
[21:01:20] <flaper87> :D
[21:01:26] <flaper87> and everyone else in this channel
[21:01:28] <flaper87> apparently
[21:01:29] <eddyb> android hates everyone >:D<
[21:01:30] <eddyb> hehe
[21:01:31] <flaper87> :D
[21:09:15] <eddyb> nmatsakis: so I change much in astencode.... but it causes a borrow_mut failure now
[21:09:49] <eddyb> *I didn't change much
[21:11:56] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[21:11:56] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/uu3dng
[21:11:56] <ghrust> 13rust/06auto 14958118b 15Brian Leibig: Add new target 'make dist-osx' to create a .pkg installer for OS X
[21:11:56] <ghrust> 13rust/06auto 145338a53 15Brian Leibig: Make OS X installer build from /tmp/dist/pkgroot, and have it be part of the 'make dist' target
[21:11:57] <ghrust> 13rust/06auto 1402975e0 15bors: auto merge of #12546 : bleibig/rust/pkg-osx, r=brson...
[21:11:59] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[21:15:21] *** Joins: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net)
[21:15:22] *** ChanServ sets mode: +o tjc
[21:17:20] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[21:17:20] <eddyb>     let method_ty = match bcx.ccx().maps.method_map.borrow().get().find(&method_call).map(|method| method.ty);
[21:17:27] <eddyb> if only that fit on one line :(
[21:22:09] *** Quits: jaeholee (uid4856@moz-31ABA2C0.irccloud.com) (Quit: Connection closed for inactivity)
[21:22:56] <larsberg> that doesn't work in our rust, does it? I usually have to split .borrow() calls up into a temp before I can call .get() or I anger the borrowchk. Or is this master?
[21:23:13] <eddyb> larsberg: about two weeks ago
[21:23:25] <eddyb> "rvalue lifetimes"
[21:23:40] <larsberg> eddyb: cool, thought you were still looking at the borrow error in the context of servo :-)
[21:24:31] <eddyb> (there's an extraneous match on that line, without it you get up to 99 characters, I still split it)
[21:24:53] <eddyb> (the line, not the statement)
[21:25:54] <eddyb> s/up to/down to/
[21:26:47] <eddyb> cmr: bah, I haven't done anything on r3 yet :/
[21:27:10] <eddyb> nmatsakis: and I'm still curious if you have any more work items for DST :D
[21:27:35] <eddyb> (though you can tell I'm inefficient compared to other contributors :()
[21:29:09] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[21:34:18] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[21:35:34] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[21:36:22] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[21:44:00] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Quit: dherman)
[21:46:46] <eddyb> let x = Rc::new(RefCell::new(~"foo")); x.borrow_mut().push_str("bar"); println!("{:?}", x.borrow().as_slice());
[21:46:50] <eddyb> nmatsakis: \o/
[21:48:03] <eddyb> nmatsakis: btw, ever since you mentioned that neatly typed CFG, I can't help but notice all the places where it would improve the current situation a lot
[21:54:08] <huon> eddyb: that's very cool
[21:54:19] <eddyb> huon: graph pls
[21:54:34] <huon> eddyb: which commits?
[21:54:37] <eddyb> it's http://huonw.github.io/isrustfastyet/mem/#882c25f,b5995b4 or a similar range
[21:55:16] <eddyb> I guess cmr redid that exact range, I should've expanded it a bit before telling him
[21:55:43] <cmr> exact range, including endpoints
[21:56:29] * eddyb wants search in git-gui
[21:56:46] <eddyb> I'm killing my eyes :(
[21:58:34] <flaper87> and it failed again
[21:58:46] <eddyb> flaper87: fighting droids?
[21:59:00] <flaper87> eddyb: yeah :(
[21:59:18] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[22:01:56] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[22:01:56] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1402975e0 to 1468a92c5: 02http://git.io/N3iJvQ
[22:01:56] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[22:01:58] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[22:01:58] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/_6tBjA
[22:01:58] <ghrust> 13rust/06auto 143768c4f 15Alex Crichton: rustc: Move local native libs back in link-args...
[22:01:58] <ghrust> 13rust/06auto 14b77a3a2 15bors: auto merge of #12575 : alexcrichton/rust/issue-12446, r=brson...
[22:01:58] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[22:02:20] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[22:04:31] *** Joins: mib_wdemyk (Mibbit@moz-5EBFF46A.hsi3.kabel-badenwuerttemberg.de)
[22:04:41] *** Quits: mib_wdemyk (Mibbit@moz-5EBFF46A.hsi3.kabel-badenwuerttemberg.de) (Quit: http://www.mibbit.com ajax IRC Client)
[22:05:08] <eddyb> cmr: so chrome updated, it's aura (:D), but anything crashes instantly :/
[22:05:55] <eddyb> and it's not --single-process
[22:06:10] <cmr> eddyb: have you considered using stable versions of software.
[22:06:29] <eddyb> that reminds me my kde4 is too stable :(
[22:06:39] <cmr> I used to be plauged with many issues when I used not-even-bleeding-yet edge gentoo.
[22:06:44] <eddyb> (since it's entering maintenance-only stage)
[22:06:56] <eddyb> cmr: kinda-bleeding-edge suse treated me well
[22:07:27] <eddyb> to the point where I despise debian for not offering *the choice* of latest and greatest
[22:07:58] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.50.1)
[22:08:03] <eddyb> but suse seems to be have less unstable goodies lately... I am considering trying out Arch
[22:08:10] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[22:08:44] <eddyb> (and by unstable I mean bleeding edge and almost completely functional)
[22:09:02] <cmr> I just use arch with a few -git packages.
[22:09:19] <steveklabnik> arch is nice
[22:09:57] <huon> they're a tried-and-true building technique.
[22:10:17] <eddyb> hehe
[22:10:50] <eddyb> I wonder how much worse pacman is from zypper
[22:11:28] <eddyb> (or better... my only experience with it has been in pedigree)
[22:11:31] <cmr> assuming its worse :P
[22:11:54] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[22:11:56] <eddyb> there's a few things I like in a command-line package manager...
[22:12:04] <eddyb> cmr: can it do auto-refresh?
[22:12:15] <cmr> yes but you really don't want to
[22:12:25] <eddyb> i.e. not apt-get update; apt-get foobar
[22:12:41] <eddyb> cmr: why :/? auto-refresh works very well in zypper
[22:12:46] <cmr> well define auto-refresh
[22:12:53] <cmr> pacman -Syu will re-fetch repos if they're out of date
[22:12:56] <cmr> and then update packages
[22:13:04] <eddyb> okay, that's nice
[22:13:15] <cmr> I thouhgt you meant auto-update of packages
[22:13:23] <eddyb> ah, no
[22:13:42] <eddyb> not as fluent as `sypper dup` though
[22:13:56] <cmr> what does dup even mean :p
[22:14:07] <eddyb> that's sudo zypper dist-upgrade and it includes the auto-refresh I've mentioned
[22:14:21] <eddyb> (I cba to even type sudo)
[22:15:03] <eddyb> cmr: but I guess pacman is composable
[22:15:25] <cmr> We have an offtopic channel you know
[22:15:31] <eddyb> riiight
[22:16:20] <eddyb> if only I didn't have such a rusted in suse install, I would just try Arch
[22:16:34] <cmr> VMs!
[22:16:36] <eddyb> but now, I have to use firefox
[22:16:59] <eddyb> cmr: on this laptop? I guess it's not bad if I don't run rustc :P
[22:20:42] <eddyb> nmatsakis: here you go :) https://github.com/mozilla/rust/pull/12610
[22:20:43] *** Quits: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Ping timeout)
[22:21:03] <eddyb> (no longer negative diff - slightly disappointed in myself)
[22:21:33] <eddyb> I guess https://github.com/mozilla/rust/pull/12491 is to blame
[22:23:08] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[22:23:48] <eddyb> acrichto: this may require a rather obvious answer, but what is "I-nominated" and "nominating"? https://github.com/mozilla/rust/issues/12608
[22:23:48] <fhahn> hi! does anybody know of an elegant way to print an ty::TraitRef? (I'm working on #2687)
[22:24:05] <eddyb> fhahn: does it have a Repr implementation?
[22:24:07] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[22:24:07] *** ChanServ sets mode: +ao dherman dherman
[22:24:14] <cmr> eddyb: nomination for a milestone.
[22:24:25] <eddyb> aaaah
[22:24:29] <cmr> I-nominated is the tag used for the search of nominated issues.
[22:24:35] <cmr> for categorization into milestone
[22:24:50] <eddyb> fhahn: while that might not be elegant (you'll have to check), you can look at the implementation and see what you can do to get something elegant
[22:25:21] <fhahn> eddyb: yes it seems like there is a Repr implementation
[22:26:18] <eddyb> try it out :)
[22:27:57] <flaper87> fhahn: trait_ref.repr(cx) ?
[22:28:13] <nmatsakis> eddyb: woohoo
[22:28:55] <flaper87> fhahn: you may want to look intu rustc::utils::ppaux
[22:29:20] <flaper87> s/utils/util/
[22:31:39] <eddyb> nmatsakis: I could see Rc<T> implement DerefMove<Result<T, Weak<T>>>
[22:32:02] <eddyb> but then it's not really better than a regular method
[22:39:34] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[22:39:34] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:40:06] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[22:43:16] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[22:43:16] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:43:26] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[22:43:49] <fhahn> flaper87: thanks trait_ref.repr(cx) does the trick!
[22:45:28] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[22:45:50] <flaper87> fhahn: :)
[22:49:14] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.50.1)
[22:50:55] <eddyb> ChrisMorgan: lol, of all the things
[22:51:08] <ChrisMorgan> eddyb: :D
[22:51:21] * ChrisMorgan just happened to notice that one
[22:51:56] * ChrisMorgan is not sure that he's in favour of the line continuation in multi-line stringsâ€”it is *very* common for people to get the whitespace at the end of the first line wrong
[22:53:14] *** flaper87 is now known as flaper87|afk
[22:56:59] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[22:57:00] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14b77a3a2 to 1468a92c5: 02http://git.io/N3iJvQ
[22:57:00] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[22:59:22] <acrichto> brson: arm seems very broken right now
[22:59:47] <acrichto> I will restart the emulator
[22:59:53] <huon> how can we work with broken arms?
[23:00:05] <acrichto> hehe
[23:00:39] *** Quits: doomlord_ (servitor@moz-99BE89EC.range86-184.btcentralplus.com) (Quit: Leaving)
[23:03:16] * ChrisMorgan has a sister who broke each of her arms twice over a two year period 1-3 years ago
[23:03:45] <ChrisMorgan> huon: you know foot pedals? You know the concept of chorded keyboards?
[23:04:45] * huon has a brother who broke both arms at the same time
[23:05:08] <huon> ChrisMorgan: (stop wrecking the joke :P )
[23:05:33] <huon> anyone who disagrees with moving std::rand to librand?
[23:05:39] * ChrisMorgan would be interested to see what he would do if he broke both arms at once
[23:06:04] <tjc> Jokes about breaking arms really aren't humerus
[23:06:08] <bjz> ChrisMorgan: yeeks, how did she manage that?
[23:06:17] <huon> hehe
[23:06:46] * tjc will show himself out
[23:08:12] <ChrisMorgan> bjz: once playing netball (got tangled with another student and came off worse); once playing soccer (ball kicked hard into arm); once in long jump (don't ask me how); once in falling over a low brick wall off a bicycle after exercising poor judgement when a bicycle brake cable failed going down the hill and attempting to turn into the driveway where she was going rather than continuing up the other side of the hill.
[23:08:39] <bjz> o_o
[23:08:43] <ChrisMorgan> Netball. A "non contact sport". Hah!
[23:10:40] <bjz> The health benefits of having an active lifestyle.
[23:14:52] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[23:15:08] <brson> acrichto: do you have your LDAP account set up to ssh into the network remotely?
[23:15:19] <brson> acrichto: thinking we're going to need to be able to do remote troubleshooting next week
[23:15:34] <acrichto> brson: I can magically ssh to office.mozilla.org which I use as a gateway to everything else inthe network
[23:15:45] <brson> good
[23:15:47] <acrichto> I have no idea how I can do that, it just works
[23:16:02] <nrc> whre is len on str defined?
[23:16:03] <brson> i don't think i can
[23:16:08] <nrc> And is it len in chars or bytes?
[23:16:15] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[23:16:15] *** ChanServ sets mode: +ao pcwalton pcwalton
[23:16:20] <brson> nrc: std::container::Container, bytes
[23:16:22] <acrichto> nrc: impl Container for StrSlice
[23:16:42] <nrc> thanks!
[23:16:57] * ChrisMorgan thinks the Container impl should be removed
[23:17:06] <acrichto> brson: how tough would it be to restart and shutdown the android emulator each bors run?
[23:18:18] <brson> acrichto: the hardest part is that you have to have a device running and responding by the time configure runs
[23:18:27] <brson> maybe we could restart *after* the test run
[23:18:34] <brson> then hope it comes back up before the next build
[23:19:11] <brson> i'll go try to do that
[23:19:49] <acrichto> I like that idea
[23:21:21] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[23:21:50] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[23:23:18] <larsberg> You probably don't have to hope - if you do something like 'adb shell ls', it'll wait for the emulator to finish booting, IIRC
[23:23:32] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[23:23:44] *** Joins: geoffhill (geoffhill@moz-95FF7399.members.linode.com)
[23:25:02] <brson> 'adb shell exit' maybe
[23:25:27] <acrichto> I just got "error: device offline"
[23:25:31] <acrichto> from "adb shell ls"
[23:26:13] <eddyb> nmatsakis: hehe, stdtest fails because it tries to call borrow() on Rc<RefCell<T>> and it actually hits RefCell's borrow
[23:28:13] <larsberg> `adb wait-for-device`? I think that's the thing I've seen the output from. Lemme do some trials...
[23:28:49] <larsberg> acrichto: ^ yup, that seems to block while the emulator is offline and then return when it's active
[23:29:35] <acrichto> oh indeed, yay!
[23:30:12] <larsberg> So if we had ToStr impls (in december), those should now be fmt::Show impls?
[23:30:21] * larsberg is trying to search through all the ToStr issues & PRs...
[23:30:26] <cmr> larsberg: yes.
[23:30:39] <cmr> ToStr is now derived from Show
[23:30:46] <larsberg> cmr: ty
[23:38:03] *** Quits: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[23:38:10] <brson> acrichto: i haven't quite figured out how to modify buildbot to do this
[23:39:15] <eddyb> nmatsakis.borrow_mut().review(#12491)
[23:39:42] <eddyb> "error: nmatsakis already borrowed"
[23:39:55] <larsberg> I saw ApproxEq was gone in #11402 but what's its replacement?
[23:41:06] <cmr> larsberg: defining it yourself
[23:41:15] <cmr> I think num-rs might have one
[23:41:20] <larsberg> cmr: ty
[23:41:39] <eddyb> bjz: did you end up trying to merge num-rs with libnum?
[23:41:49] <bjz> not yet
[23:41:58] <bjz> we could add approxeq in the for now
[23:42:02] <ChrisMorgan> https://github.com/bjz/num-rs/search?q=approx&ref=cmdform has no results
[23:46:29] <acrichto> sfackler: hm, so my SVH PR has made it such that the stage1 and stage2 libstd is different
[23:46:37] <acrichto> so all of the macro crate tests have started to explode
[23:46:51] <eddyb> SVH?
[23:46:51] <bjz> ChrisMorgan: no, not in libnum yet
[23:47:14] <cmr> eddyb: strict version hash
[23:47:29] <cmr> https://github.com/mozilla/rust/issues/10207 and PR
[23:47:40] <acrichto> I wonder if the ast is subtly different each time
[23:47:50] <acrichto> if something is affected by a hashmap or something like that
[23:48:03] <sfackler> acrichto: that'll also kill the arch nightly if that's the case
[23:48:15] <acrichto> "this was always going to happen"
[23:48:34] <sfackler> could we do a snapshot dance to make stage1 look like stage2?
[23:48:51] <acrichto> I think this is more subtle
[23:48:58] <acrichto> there should be no difference in the ASTs of stage1/stage2
[23:49:15] <acrichto> hash::hash(krate) is returning something different I suspect
[23:49:32] <sfackler> is stage1 built with the new svh logic or the old logic?
[23:49:32] <acrichto> hm, I will experiment
[23:49:45] <acrichto> yeah
[23:49:56] <acrichto> it's a difference between the stage1-generated and stage2-generated libraries
[23:50:11] <acrichto> libstd and rustlib/$target/libstd have different SVH entries
[23:50:32] *** Quits: eddyb (eddy@moz-41DB10DA.residential.rdsnet.ro) (Ping timeout)
[23:54:40] *** Joins: luziie (luziie@moz-CD18B14B.customer.cdi.no)
[23:54:42] *** Quits: luziiie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[23:55:07] *** Joins: chromatic (chromatic@moz-28CBC7F4.hsd1.or.comcast.net)
[23:55:38] <acrichto> oh!
[23:55:40] <acrichto> env vars
[23:55:44] <acrichto> they change between stages
[23:55:49] <acrichto> so the AST is indeed different
[23:56:11] <acrichto> or hm...
[23:56:13] <sfackler> env vars are part of the svh?
[23:56:18] <acrichto> the ast is the SVH
[23:56:21] <sfackler> oh
[23:56:42] <brson> acrichto: i have a change that could restart the emu before doing builds. should I shutdown bors and try to see if it works?
[23:56:47] <sfackler> it seems like it should skip the contents of functions
[23:57:10] <acrichto> brson: don't restart it just yet, looks like the current PR is about to land
[23:57:36] <acrichto> sfackler: it's actually pretty accurate because more nodes or not changes the symbol names
[23:57:45] <acrichto> this is really highlighting how unstable our ASTs are
[23:58:59] <chromatic> I'm looking at making failure strings static ( https://github.com/mozilla/rust/issues/12378 ) and could use a second set of eyes. Here's the patch in progress: https://gist.github.com/chromatic/9262349
[23:59:46] <acrichto> brson: you may also want to try "buildbot reconfig"
[23:59:49] <acrichto> that should get the job done
