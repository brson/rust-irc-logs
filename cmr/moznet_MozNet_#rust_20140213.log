[00:00:09] <wycats> sfackler: possibly yeah
[00:00:29] *** Quits: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[00:00:34] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[00:00:39] *** Quits: fabrice (fabrice@moz-CC46F4AB.hinet-ip.hinet.net) (Ping timeout)
[00:01:02] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[00:02:35] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:02:37] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[00:02:39] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[00:02:46] <sfackler> or really, it could just take Reader+Seek and have an adapter struct to add Seek to a un-seekable reader
[00:02:49] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[00:02:56] <sfackler> so that you wouldn't have the overhead if you're reading from a file or somethign
[00:02:58] <wycats> erickt: you should probably annotate a lot of stuff with #[allow(dead_code)] too
[00:03:03] <wycats> or maybe even the entire file
[00:03:06] <wycats> sfackler: yeah
[00:03:11] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[00:03:13] <wycats> sfackler: it really depends what you're trying to do
[00:03:15] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[00:03:32] <erickt> wycats: ok back. I thought one of the examples used a Reader. lemme check...
[00:03:37] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Quit: Savago)
[00:03:45] <wycats> erickt: the generated code does data[foo]
[00:03:49] <wycats> data[p]
[00:03:53] <wycats> so how could it use a reader?
[00:04:23] *** Quits: bluz (blaz@moz-CCAB48F7.privacyfoundation.ch) (Input/output error)
[00:04:24] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[00:04:57] <eibwen> acrichto: (after fighting with git&ssh:) https://github.com/mozilla/rust/pull/12220 (just in case you're still here)
[00:04:58] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Ping timeout)
[00:05:08] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[00:05:24] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[00:05:25] <erickt> wycats: ah, it doesn't quite, but this example hints at how it can be done: https://github.com/erickt/ragel/blob/rust/examples/rust/concurrent.rl
[00:05:25] <acrichto> eibwen: excellent! I'll take a look soon
[00:05:38] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[00:05:49] <wycats> erickt: what is the tl;dr?
[00:06:40] <erickt> wycats: if I recall correctly, you can have ragel work on a buffer of data at a time
[00:07:26] *** Joins: evanm_ (evanm@636AC086.5999CED5.71743E61.IP)
[00:07:30] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Ping timeout)
[00:07:33] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[00:07:47] *** Joins: luzie (lucy@moz-CD18B14B.customer.cdi.no)
[00:07:51] *** Quits: dkeenaghan (dkeenaghan@A9F153F4.DDE28F19.986A907C.IP) (Quit: Leaving)
[00:07:56] *** Quits: pcdummy (pcdummy@moz-CF4CA865.page4me.ch) (Ping timeout)
[00:08:09] <erickt> wycats: once it hits the end of the buffer, you can check if it's hit an end state. if not, you can load in the next chunk of data into the buffer
[00:08:15] *** Quits: luz (lucy@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[00:08:23] <wycats> erickt: yeah that isn't quite what I had in mind
[00:08:36] <wycats> I was hoping for .read_byte() instead of data[p]
[00:08:39] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[00:09:17] *** Joins: pcdummy (pcdummy@moz-CF4CA865.page4me.ch)
[00:10:03] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[00:10:13] <erickt> wycats: we might be able to switch back to that. I vaguely remember trying to switch at one point in time, but I can't remember why I stopped
[00:10:22] <wycats> interesting
[00:10:29] <erickt> it might have been that I was tripping over some performance issues at the time that might be gone now
[00:10:47] *** Joins: fabrice (fabrice@moz-CC46F4AB.hinet-ip.hinet.net)
[00:11:09] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Client exited)
[00:11:23] *** Quits: fabrice (fabrice@moz-CC46F4AB.hinet-ip.hinet.net) (Max SendQ exceeded)
[00:11:29] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[00:11:39] *** jorendorff is now known as jorendorff_away
[00:11:40] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[00:12:37] *** Joins: fabrice (fabrice@347FA24B.24D9B0A0.495EC8CD.IP)
[00:12:49] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[00:13:11] *** Quits: fabrice (fabrice@347FA24B.24D9B0A0.495EC8CD.IP) (Max SendQ exceeded)
[00:13:14] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Ping timeout)
[00:14:04] *** Joins: fabrice (fabrice@347FA24B.24D9B0A0.495EC8CD.IP)
[00:14:38] *** Quits: victorporof (victorporo@8F761026.B5EF4AF6.E96CA9D8.IP) (Ping timeout)
[00:14:38] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[00:15:00] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[00:15:00] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[00:15:04] *** Joins: victorporof (victorporo@8F761026.B5EF4AF6.E96CA9D8.IP)
[00:16:38] *** Quits: igork (igork@moz-F6DD8476.broadband.corbina.ru) (Quit: Leaving.)
[00:17:44] *** Quits: fabrice (fabrice@347FA24B.24D9B0A0.495EC8CD.IP) (Ping timeout)
[00:17:59] *** Quits: Uther (Instantbir@moz-834083A8.hfc.dyn.abo.bbox.fr) (Quit: Instantbird 1.5 -- http://www.instantbird.com)
[00:19:29] *** Joins: fabrice (fabrice@347FA24B.24D9B0A0.495EC8CD.IP)
[00:20:00] *** Quits: doomlord_ (servitor@moz-9B2006BF.range109-151.btcentralplus.com) (Quit: Leaving)
[00:20:01] *** Joins: arielb1 (tali@moz-CB7488B7.red.bezeqint.net)
[00:20:03] *** Quits: fabrice (fabrice@347FA24B.24D9B0A0.495EC8CD.IP) (Max SendQ exceeded)
[00:20:12] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[00:20:23] *** Joins: fabrice (fabrice@347FA24B.24D9B0A0.495EC8CD.IP)
[00:20:32] <arielb1> How do you convert an owned box to a managed box
[00:20:47] <arielb1> fn convert<T>(~T) -> @T
[00:20:51] *** Quits: bvssvni (Mibbit@moz-C4579D6F.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[00:20:52] <Jemaclus> I may be putting my Rust program into production in the next few weeks. :)
[00:20:57] *** Quits: fabrice (fabrice@347FA24B.24D9B0A0.495EC8CD.IP) (Max SendQ exceeded)
[00:21:14] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[00:21:26] *** Joins: fabrice (fabrice@347FA24B.24D9B0A0.495EC8CD.IP)
[00:21:49] <ChrisMorgan> arielb1: managed boxes are dying, steadily dying.
[00:21:50] *** Quits: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com) (Ping timeout)
[00:21:56] <steveklabnik> Jemaclus: brave! excellent!
[00:21:59] *** Quits: fabrice (fabrice@347FA24B.24D9B0A0.495EC8CD.IP) (Max SendQ exceeded)
[00:22:43] *** Joins: fabrice (fabrice@moz-CC46F4AB.hinet-ip.hinet.net)
[00:22:46] <ChrisMorgan> arielb1: I mean this: you should avoid using managed boxes.
[00:22:49] <eibwen> acrichto: thanks for the thorough review! should I add another commit fixing what you said or should I --amend it?
[00:22:52] *** Quits: arielb1 (tali@moz-CB7488B7.red.bezeqint.net) (Connection reset by peer)
[00:23:08] <acrichto> eibwen: for landing, you'll want to --amend, but for review, it's fine to add more commits
[00:23:19] <acrichto> eibwen: this is small enough though that --amend is fine
[00:23:29] <acrichto> eibwen: and thank you for the documentation!
[00:23:45] <erickt> wycats: https://github.com/erickt/ragel/issues/3
[00:23:54] <eibwen> thanks for taking the time and helping me :)
[00:25:46] <wycats> erickt: thanks!
[00:26:20] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[00:27:09] *** Joins: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net)
[00:27:33] *** Quits: dapz (textual@moz-16954008.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:27:37] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[00:29:37] <aatch> Jemaclus, what's the program?
[00:29:52] <Jemaclus> aatch: an address parser
[00:30:37] <aatch> Jemaclus, ah, cool. sans-regex or did you bind to something like pcre?
[00:30:52] <Jemaclus> Given a list of 10,000 addresses, it successfully broke them down in to fields (street, city, state, zip) for all but 9 addresses... in 250ms
[00:30:58] <Jemaclus> no regex
[00:31:24] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:31:36] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[00:31:50] *** Joins: AvianFlu (AvianFlu@moz-31F97978.nyc.res.rr.com)
[00:31:56] <aatch> Jemaclus, nice. Address parsing stuff is finicky, given all the different cases.
[00:32:05] <thiez> I'm using IO in a file program that has #[no_uv] but uses 'extern mod native' instead. It seems reading from stdin and files produces garbage, am I doing something wrong?
[00:32:22] <thiez> s/file program/program/
[00:32:33] <Jemaclus> in a few weeks, I'll be given a list of 130MM addresses... under my current process for my app, it would take *at least* one month to go through all of them, but I think with my new system (which I also wrote in PHP and does the same thing in 1.4s), I could parse 130MM addresses in under an hour... 
[00:32:55] <thiez> is std::io assuming uv and green threads and stuff?
[00:33:07] *** Joins: pongad (Mibbit@moz-7E8AAD2E.res.gatech.edu)
[00:33:13] *** Joins: lucian_ (lucian@moz-8408FDFA.cable.virginm.net)
[00:33:13] <Jemaclus> My current process involves talking to 3rd parties (like the US Postal Service), which is so. so. so. so. slow.
[00:33:13] <aatch> thiez, it shouldn't be.
[00:33:22] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[00:33:41] <Jemaclus> and yes, it's difficult, and there will be edge cases that this misses, but for those I can still talk to my 3rd parties
[00:33:50] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:33:53] <aatch> Jemaclus, ouch. We started out using a third-party so never had this problem.
[00:33:56] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[00:34:08] <thiez> aatch: I figured as much, but I'm not really sure what's going wrong
[00:34:18] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[00:34:45] *** Quits: nkoep (nik@moz-E78B9424.pool.mediaways.net) (Quit: Leaving)
[00:34:54] *** Quits: lucian_ (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[00:35:25] <Jemaclus> aatch: yeah, this address thing is my full time job, so... :)
[00:35:27] <thiez> it's very strange, I read either the entire contents of stdin, or the contents of a file, and split up in lines. It seems it gets the linelength correct somehow
[00:35:35] <erickt> hey #rust! anyone interested in presenting at the next rust bay area meetup? we can handle remote presentations
[00:35:49] <aatch> erickt, when is it?
[00:35:50] *** Joins: canhtak (canhtak@moz-4D8F0D46.wl.t.ulaval.ca)
[00:36:04] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[00:36:12] <erickt> aatch: not scheduled yet, I'm happy to work around your schedule if you want to present
[00:36:38] <aatch> erickt, well what's the rough estimate? I'm interested, but don't actually have anything to present.
[00:36:50] <aatch> If it's far away enough, I could probably come up with something.
[00:36:54] <Jemaclus> isn't there one in two weeks?
[00:37:37] <Jemaclus> or you mean the one after that? :)
[00:38:02] <Jemaclus> I can present! My topic: I Have No Idea What I'm Doing
[00:38:05] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[00:38:18] <erickt> aatch: normally we try to do the last week of the month, although I might be travelling that week. So i'd guess between 3/17 and 3/21, or I get brson to run it the week of 3/24-3/28
[00:38:27] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:38:33] <erickt> Jemaclus: the one after :)
[00:38:44] <aatch> erickt, so ~1 month?
[00:38:48] <erickt> yep
[00:38:53] *** Quits: fabrice (fabrice@moz-CC46F4AB.hinet-ip.hinet.net) (Quit: Leaving.)
[00:38:58] <Jemaclus> I knew that, just checking :)
[00:39:05] <eibwen> acrichto: hopefully fixed everything you commented
[00:39:22] <erickt> Jemaclus: perfect! I'm always happy to take a "I'm a newbie, and this is how I started with rust" tutorials
[00:39:39] <Jemaclus> oh boy. ok :P
[00:39:40] <aatch> erickt, cool, I'll think on it, I've normally got a few ideas rattling around that I can try and flesh out.
[00:39:41] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[00:39:47] <erickt> great!
[00:40:07] <aatch> I'd be a remote presentation though. I'm almost as far away as ChrisMorgan
[00:41:11] <erickt> not a problem
[00:41:24] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[00:41:40] <Jemaclus> erickt: i'll let you know if I can come up with something to talk about :)
[00:41:49] <erickt> great!
[00:42:03] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[00:42:31] *** Joins: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP)
[00:42:47] *** Quits: blaenk (blaenk@moz-D046F6D6.lsanca.dsl-w.verizon.net) (Quit: Leaving)
[00:42:51] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[00:43:13] <pongad> Is the += overloadable?
[00:43:15] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[00:43:20] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[00:43:32] *** Joins: dukeleto (dukeleto@moz-C083E0FB.ptld.qwest.net)
[00:43:41] <aatch> pongad, not at the moment
[00:44:01] *** Joins: speckle (speckle@moz-AD109A29.hsd1.md.comcast.net)
[00:44:07] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[00:44:07] <pongad> aatch: Normal + is right?
[00:44:12] <aatch> pongad, correct
[00:44:40] *** Quits: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP) (Ping timeout)
[00:44:44] <aatch> a += b *used* to be expanded to a = a + b, but that's not actually correct
[00:45:01] *** Quits: eibwen (kvirc@moz-222E10E3.dip0.t-ipconnect.de) (Ping timeout)
[00:45:19] <pongad> It's not? :D
[00:45:21] <aatch> since it wouldn't actually modify `a`
[00:45:22] <Jemaclus> speaking of, what's the rationale behind not supporting foo++?
[00:45:35] <pongad> oh
[00:45:59] <pongad> Jemaclus: I think it's because of   fn(x++, x++)   ?
[00:46:00] <pongad> Not sure
[00:46:19] <Jemaclus> i don't follow
[00:46:26] <thiez> you can just define an order in that case, I think java does that
[00:46:39] <aatch> pongad, for simple types (i.e. Pod) it would be fine. But for more complex types it caused all sorts of odd behaviour
[00:46:46] <speckle> hey, what does everyone think about Ada? I kind of see it as a middle ground between C++'s insanity and Rust's immaturity - it's not quite as safe as Rust, but better than C++, and has mature compilers. I think there aren't enough comparisons of Rust to Ada, given that they both try to be safe languages without GC
[00:46:56] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[00:47:00] <pongad> aatch: Right, I kind of get it now
[00:47:37] <pongad> I think ++ is not added for a similar reason ++ in Go is a statement and not an expression; my guess is Rust wants to kill it altogether
[00:47:38] <aatch> pongad, there was some work recently on making augmented assignment traits
[00:47:45] <apoelstra> speckle: i'd be interested in a rust vs. ada comparison. probably there aren't any because few people know either language, let alone both
[00:48:38] <aatch> So there'd be `trait AddAssign<T> { fn add_assign(&mut self, other: &T) { ... } }`
[00:48:49] <speckle> I've started learning a little Ada after failing to compile Rust in Windows :P but you're right, it might be hard to find people who are experienced enough with Ada to compare it to Rust
[00:49:02] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[00:49:11] <aatch> I've *heard* of Ada, never got much further than that.
[00:49:17] *** Joins: kherge (Mibbit@A9C30D0F.296F3964.822873CF.IP)
[00:49:25] <Jemaclus> One of my professors in college raved about Ada
[00:49:28] <pongad> aatch: A part of me is afraid that we'd have too many traits in the standard library :P
[00:49:31] <aatch> Seemed a little over-engineered to me, but that could just be first impressions
[00:49:38] <Jemaclus> but that was 14 years ago, so I don't know if it's any better these days
[00:49:49] <aatch> pongad, lies! you can never have too many traits.
[00:50:06] <pongad> :D
[00:50:24] <speckle> Oh it certainly seems to be getting better, Jemaclus - they're expanding what you can do without unsafe pointers in Ada.  It doesn't seem to have owned pointers like Rust, though I guess it's an evolutionary dead-end.
[00:50:49] <Jemaclus> hmm
[00:51:00] <Jesse> Jemaclus: x++ is confusing in a larger expression, doesn't show up when you scan for '=', and only saves one character over 'x+=1' as a standalone statement. python made the same choice.
[00:51:19] <Jemaclus> Jesse: good explanation. Thanks.
[00:51:23] <aatch> pongad, wait you see what the Index overloading set of traits is going to look like:
[00:51:32] <Jesse> Jemaclus: also this lets us perhaps use ++ as the "add [u]int64 values with wrapping" operator ;)
[00:51:35] *** Joins: fabrice (fabrice@moz-99690620.hinet-ip.hinet.net)
[00:51:40] <pongad> Talking about owned pointers, I'm wondering how Rust would do in large server projects. Static checking is great, but I can foresee difficulty getting my friends to use it
[00:52:16] <pongad> aatch: Oh dear god...
[00:52:25] <speckle> Rust seems a little big too, but probably by necessity rather than design.  If the language designers of Rust try to remove extraneous features from the core language, that'll be another advantage of Ada.  Ada has *tons* of keywords.  But at least Ada isn't insane to parse like C++, I guess.
[00:52:30] <ChrisMorgan> aatch, pongad: https://github.com/mozilla/rust/issues/5992
[00:52:36] <aatch> Index, IndexAssign, Index[Op]Assign
[00:52:36] <speckle> er, that's be another advantage *OVER* Ada, sorry.
[00:52:41] *** Quits: kherge (Mibbit@A9C30D0F.296F3964.822873CF.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:53:38] <speckle> I'm guessing Rust is simpler than C++ in the big scheme of things, since it doesn't have Turing-complete parsing AFAIK
[00:53:50] <pongad> aatch: Index assign is like arr[x] += 2 right?
[00:54:08] <Jesse> pongad: rust is for *frustrated* c++ developers. if some magical team can write large, complex code without having dangling pointer bugs, they won't benefit quite as much from switching.
[00:54:37] <thiez> I think I got a lifetime bug, is this known?
[00:54:41] <thiez> rusti: let contents = Some(~"######\n#@ $.#\n######"); let contents: ~[&str] = contents.unwrap().lines().collect(); contents[0]
[00:54:42] -rusti- task '<main>' failed at 'assertion failed: (w != 0)', /home/strcat/projects/rust/src/libstd/str.rs:2303
[00:54:43] -rusti- application terminated with error code 101
[00:54:59] <thiez> borrowck shouldn't allow this, correct?
[00:55:27] <pongad> Jesse: I can completely see the appeal of Rust. What I'm saying is I can see my friends be like `GAH none of my code will compile, let's go back to Java or something`
[00:55:53] <pongad> Rust feels like it has a pretty steep learning curve, for me anyway
[00:55:55] <speckle> do you guys think Rust's type system will eventually allow better IDE support than Java, since it has a stronger type system?  that might address pongad's concern
[00:55:58] <kmc> well if you can afford garbage collection then it makes for a simpler language
[00:56:11] <kmc> I love GC and use GC'd languages for lots of things
[00:56:17] <aatch> pongad, it isn't a simple language, but it can't be really.
[00:56:19] <speckle> I'm convinced that the potential for IDE support is proportional to the strength of the language's type system
[00:56:30] <aatch> speckle, there's some truth to that.
[00:57:14] <speckle> if anyone's ever used IntelliJ for Java, you know how fancy it can get.  Also, think static analysis tools for cyclomatic complexity, coupling, and so forth.  I'm thinking Rust has way more potential in that area
[00:57:30] *** Quits: mawuli (mawuli@moz-5ADAB167.com.gh) (Ping timeout)
[00:57:45] <pcwalton> I think there are tradeoffs in language design
[00:57:48] <thiez> rusti: let foo = ~"hello"; let foo: ~[&str] = foo.words().collect(); foo[0]
[00:57:50] -rusti- " \x00\x00\x00\x00"
[00:57:54] <pcwalton> there is no such thing as one language for everything
[00:57:55] <pongad> aatch: I totally see your point. I like Rust. It's converting my friends to it that's the problem :D
[00:58:16] <thiez> aatch: ^ it seems the bug I got was not in the io system :)
[00:58:20] <mcpherrin> Languages don't have to be a religion :-)
[00:58:21] *** Joins: mawuli (mawuli@moz-5ADAB167.com.gh)
[00:58:23] <pcwalton> I don't think languages are to be "converted" to
[00:58:24] <pcwalton> yeah
[00:58:32] <Jesse> pongad: if a c++ project effectively has some unique pointers, some borrowed pointers, etc, then doing it in rust with type-system help is simpler. if a c++ project only uses one kind of pointer, there's less to learn in transitioning to rust.
[00:58:40] <pongad> mcpherrin, pcwalton You are right, of course
[00:58:40] <speckle> What I'm thinking is that frameworks+IDE support might get people to use Rust for something like people use Ruby on Rails :P
[00:58:43] <aatch> pcwalton, I definitely see a big tradeoff with complexity vs. control
[00:58:49] <tiffany> speckle: but the practical IDE support is inversely proportional to language complexity
[00:59:08] <pcwalton> I'm not sure Rust's system is *complex*, but not as *easy* perhaps
[00:59:11] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[00:59:11] *** ChanServ sets mode: +ao dherman dherman
[00:59:12] <kmc> Jesse: even a C or C++ program which only uses *T is using multiple types of pointers really.  there are concepts of ownership and borrowing, you just get zero help from the compiler in keeping it straight
[00:59:19] <pcwalton> difficulty != complexity
[00:59:23] <mcpherrin> I probably wouldn't use Rust for a lot of types of projects, but for a lot of the things I work on ("embedded" systems), rust is just so awesomely *simpler* than some existing c++ monstrosities
[00:59:26] <aatch> pcwalton, Hmm, I suppose that's true
[00:59:31] <pcwalton> right
[00:59:40] <kmc> fn strdup(*c_char) -> ~c_char
[00:59:43] <jasom> I see a lot of potential in rust for RT stuff; GCs still are essentially a no-go for RT so the static lifetime analysis is quite useful.
[00:59:44] <tiffany> I haven't really seen IDEs which go much past code completion for C++
[00:59:47] <mcpherrin> Simpler because you can reason about correctness, which is entirely what matters to me
[01:00:07] <pcwalton> I think C++ has essentially everything that Rust has… it has lifetimes, unique pointers, borrowing, rvalue references
[01:00:11] <pcwalton> rvalue references == moving
[01:00:22] <aatch> I get very frustrated not being able to reason about ownership easily in C++.
[01:00:24] <pcwalton> but there's no static checking for them so they're silent compiler rules
[01:00:29] <Jesse> kmc: yep. whether you're using unique_ptr<T> or *T, you have to understand it in c++ too, and it's probably more verbose.
[01:00:35] <pcwalton> for example, C++ has a notion of "borrowing" which changes when destructors are run I believe
[01:00:39] <tiffany> the lack of static checking makes C++ infuriate me to no end
[01:00:41] <pcwalton> if you take references to things
[01:00:49] <speckle> C++ is entirely in the opposite direction from Java, in terms of type system strength.  I'd intuitively consider it on par with a dynamic language, in terms of the strength of its type system, and complexity of static analysis.
[01:01:11] <pcwalton> so, I think that Rust takes from C++ what it has to in order to get as close to the metal as C++
[01:01:20] <pcwalton> but it doesn't take from C++ whatever it can get away with not taking :)
[01:01:27] <kmc> good IDEs for good static type systems let you place an "expression hole" and then ask what type goes there... if it's an algebraic type then you can expand it automatically into a match with one case for each constructor
[01:01:31] <kmc> very nice
[01:01:32] <pongad> pcwalton: Beautifully said
[01:01:43] <jasom> speckle: dynamic analysis can allow for powerful IDEs on dynamically typed systems; consider SLIME and lisp, for example.
[01:01:48] <tiffany> unique_ptr has no guarantee of not being null, references can be nulled by accident, there's no lifetime checking built into the language
[01:02:01] *** Joins: deiome (christophe@moz-20DF51FE.dynamic.tstt.net.tt)
[01:02:09] <kmc> by the way in a dependently-typed language this corresponds to a proof assistant's features of keeping track of assumptions and case analysis :)
[01:02:52] <pcwalton> I think there is a lot of opportunity for alias analysis in Rust
[01:02:59] <pcwalton> how that could surface in an IDE, I'm not sure
[01:03:04] <aatch> I do think that, from a marketing perspective, Rust talks about concurrency too much.
[01:03:05] <pcwalton> but as a compiler writer I sure like it :)
[01:03:23] <pcwalton> aatch: quite possibly. dherman feels the same way
[01:03:32] <wycats> is there a way in macros to convert an ident to a string
[01:03:37] <kmc> tiffany: yeah, even apparently high-level code which doesn't touch raw pointers/refs can run into iterator invalidation
[01:03:38] <speckle> jasom, how could a dynamic type system can provide the IDE with *more* information than a static type system, though?
[01:03:39] <wycats> $foo:ident, but I want "$foo"
[01:03:39] <aatch> I consider the memory model to be rusts "killer feature" so to speak
[01:03:41] <pcwalton> wycats: yup! I think it's called "stringily!"
[01:03:42] <jasom> pcwalton: All C compilers have ANSI aliasing analysis for benchmarks, and then a flag to turn it off for real-world code.
[01:03:44] <pcwalton> stringify!
[01:03:54] <pcwalton> jasom: ah, but in Rust we enforce it
[01:03:58] <wycats> pcwalton: nice
[01:04:03] <wycats> ~ or &?
[01:04:07] <jasom> pcwalton: I know, which makes it actually useful
[01:04:11] <pcwalton> wycats: & I think
[01:04:16] <aatch> wycats, &'static I think
[01:04:22] <wycats> pcwalton: but I can to_owned() if I need a ~
[01:04:24] <pcwalton> yup
[01:04:26] <kmc> is there a portable way in Rust to get the filesystem path to the current executable?
[01:04:37] <benh> I think so
[01:04:39] <pcwalton> is there a portable way to get it generally? ;)
[01:04:42] <Jesse> i'm looking forward to seeing what [telling LLVM what Rust knows about aliasing] does for rust's speed
[01:04:43] <pcwalton> I think there is though
[01:04:44] <acrichto> kmc: os::get_exe_path()
[01:04:48] <kmc> acrichto: thanks!
[01:04:58] <benh> hmm
[01:05:00] <benh> did it go away?
[01:05:08] <pcwalton> Jesse: sunfish tells me it's very app dependent but likely to be something like 10%/20% for most computational programs
[01:05:09] <jasom> speckle: well strongly dynamic typed systems can often get more information than weakly statically typed systems
[01:05:23] <jasom> speckle: consider (void *) <-- might as well be dynamically typed for all that gives you
[01:05:29] <speckle> true, jasom
[01:05:31] <acrichto> kmc: oh sorry it's os::self_exe_name()
[01:05:39] <speckle> but Rust seems like a strongly statically typed system, apart from unsafe blocks
[01:05:52] <Jesse> pcwalton: wow! what do you expect in terms of speed and code size for something like servo?
[01:06:19] <jasom> speckle: so the static analysis will need to be taught  about the semantics of each unsafe block to get full advantage
[01:06:31] <aatch> I use HHVM, which is a PHP virtual machine made by Facebook, a lot and certain types of PHP code running under it can actually be faster than the equivalent C++
[01:06:42] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[01:06:55] *** Joins: zmthy (zmthy@moz-C2881CC3.ecs.vuw.ac.nz)
[01:07:04] <pcwalton> Jesse: hard to tell
[01:07:09] <pcwalton> we gotta finish it and see :)
[01:07:24] <pcwalton> btw not all the optimizations that Rust's level of aliasing information would allow for are implemented in LLVM
[01:07:28] <pcwalton> because they're impossible in C/C++
[01:07:33] <speckle> jasom, is that necessary? couldn't the IDE just ignore unsafe blocks, just like Java IDEs usually ignore JNI (native) calls?
[01:07:36] <aatch> Because a virtual machine knows more about the environment and can optimize in ways that would be unsafe if done from a static analysis
[01:07:45] <joelteon> hey where did rusti go
[01:07:53] <kmc> aatch: I want a good JIT for Haskell :)
[01:08:00] <aatch> rusti: "Nowhere"
[01:08:01] <kmc> dynamic strictness analysis \o/
[01:08:02] -rusti- "Nowhere"
[01:08:08] <joelteon> wait
[01:08:12] <joelteon> no, I meant the REPL
[01:08:21] <benh> The REPL went away because it kept breaking
[01:08:22] <Dcoder> how is c++'s type system on par with dynamic languages?
[01:08:27] <joelteon> oh ok
[01:08:29] <aatch> joelteon, that went a long time ago.
[01:08:31] <joelteon> just like my girlfriend
[01:08:33] <jasom> speckle: yes and no.  consider util::replace()
[01:08:42] <tiffany> aatch: you mean that a tracing JIT can inline in hotter cases?
[01:08:46] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:08:46] <benh> I don't think we're particularly confident that it'll come back :(
[01:08:50] <aatch> tiffany, correct
[01:08:53] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[01:08:54] <joelteon> i don't use languages without repls
[01:08:55] <jasom> speckle: you can ignore it and know something about the code, or you can learn its semantics and know a whole lot more
[01:09:07] <joelteon> but I'll give my rust the benefit of the doubt
[01:09:22] <kmc> joelteon: there is https://github.com/tarcieri/irust
[01:09:23] <cgaebel> you can just /msg rusti and use it as a repl
[01:09:25] <speckle> dcoder, it's on par in regards to how difficult static analysis is, relative to a static/strongly typed language like Java
[01:09:28] <cgaebel> that's what I've been doing lately :P
[01:09:38] <tiffany> I feel as though separation of execution and evaluation (haskell's monads being an example) have the same speed tracing JITs do but with more control
[01:09:45] <Dcoder> speckle: ok, makes sense
[01:09:54] *** Quits: ksev (DrunkenPan@moz-C6488E57.autodesk.com) (Ping timeout)
[01:10:09] <aatch> tiffany, unless there's something that only C++ can do (which is generally low-level pointery things) JIT'd PHP often comes out as fast, if not faster.
[01:10:24] <kmc> tiffany: a tracing JIT can specialize functions around how they are usually used
[01:10:32] <cgaebel> aatch: most things that are speed-sensitive are pointery things...
[01:10:42] <cgaebel> especially low-level pointery things..
[01:10:45] <kmc> this argument is usually 5, inline that and then constant-propagate and eliminate dead code and inline further etc.
[01:10:55] <kmc> a lot of optimizations are about exposing further optimizations :)
[01:11:13] <tiffany> well I mean, if you construct a chain of monads and intend to run it over and over again, you could tell the runtime to JIT it to death
[01:11:28] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Quit: Leaving...)
[01:11:28] <aatch> cgaebel, not always, calculation loops aren't normally dependent on pointers
[01:11:38] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[01:11:40] *** Joins: bakkdoor (bakkdoor@moz-D653693A.osnanet.de)
[01:12:11] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Quit: Leaving...)
[01:12:11] <cgaebel> aatch: I still don't buy this argument that someone can write faster JIT'd PHP than I can write C++.
[01:12:21] <cgaebel> err, write _in_ C++
[01:12:38] <aatch> cgaebel, well this is what I get *from* the HHVM devs.
[01:12:45] <cgaebel> aatch: They seem... biased.
[01:12:49] <cgaebel> just a bit.
[01:12:50] <speckle> either way, jasom, I would guess that it's a lot easier to add advanced IDE support for Rust than C++, and about as easy as for Java.  if Rust takes off, I can see advanced IDE features making it easier to pick up the language.
[01:13:16] <tiffany> I am pretty weary when someone says their JIT is faster than native code
[01:13:22] <kmc> tiffany: I don't see what monads have to do with it; they're just some polymorphism and syntactic sugar over what comes down to ordinary function application and closures
[01:13:36] <cgaebel> aatch: like, if you show me some "fast" PHP code, I'll be able to write a version in C++ that's faster, or as fast if they've tuned it a TON.
[01:13:36] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[01:13:41] <Jemaclus> i'm out. thanks for all your help today, guys.
[01:13:44] <speckle> a lot of people compare JIT code to unoptimized native code for some reason :P
[01:13:45] *** Quits: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP) (Quit: Leaving...)
[01:13:49] <aatch> tiffany, which is why I say *can* be.
[01:13:57] <tiffany> kmc: the idea being that you generate your hot path rather than constructing it out of runtime abstractions
[01:14:13] <kmc> you can measure whether the JIT is faster, you don't need to speculate, and I have seen cases where it is
[01:14:31] <tiffany> for example, in my game engine's rendering path, there's a lot of calls into function pointers and other optimization dead ends which aren't really there in JITs or in this monad thing I'm thinking of
[01:14:35] <kmc> there is an article I'm trying to find about C code which is faster when compiled with emscripten and run in V8
[01:14:36] *** Joins: alkino_ (alkino@moz-2677AA92.w90-46.abo.wanadoo.fr)
[01:14:39] <tiffany> but JITs have nondeterministic performance
[01:14:46] <cgaebel> if you care about speed, a JIT'd language hurts more than helps
[01:14:48] <kmc> because it uses printf and V8 specializes the printf function around the format specifier
[01:15:04] <cgaebel> kmc: code that cares about performance doesn't have printf in a hot loop...
[01:15:08] <cgaebel> that's a silly benchmark
[01:15:11] <kmc> cgaebel: it's just an example...
[01:15:20] <o11c> it's still a silly example
[01:15:23] <aatch> cgaebel, oh I don't dispute that. I don't write PHP for performance, even if I do use HHVM for performance.
[01:15:36] <cgaebel> It's just a silly argument altogether.
[01:15:41] <tiffany> I don't like when languages make wild claims like being "faster than C++"
[01:15:42] <cgaebel> If you care about performance, JITs suck.
[01:15:45] <jasom> kmc: Some C compilers specialize printf around the format specifier too, and nearly all format specifiers are static
[01:15:47] <cgaebel> If you don't, then use whatever.
[01:15:57] <tiffany> I've seen garbage collected scripting languages which compile to C++ then go to claim they are faster than C++
[01:16:04] <speckle> kmc, what compile v8 with emscripten and run it in native-compiled v8?
[01:16:04] <cgaebel> lol yeah
[01:16:07] <speckle> *what if you
[01:16:16] <Ralith_> kmc: not to mention that benchmarking printf-bound code is kind of absurd
[01:16:25] <kmc> you're all missing the point but that's okay
[01:16:40] <cgaebel> JITs are cool toys... and great for development speed!
[01:16:41] <tiffany> kmc: the point being that the JIT inlines the printf?
[01:16:46] <tiffany> regular compilers inline too
[01:16:48] <cgaebel> but to claim they're on par with native code is just silly
[01:16:49] <pongad> Is there a way to have rustc print out your program will all macros expanded?
[01:16:55] <o11c> kmc: no, the point is that *any* specialization opportunity, printf or otherwise, is something you could do just as well natively
[01:16:57] <Ralith_> if the point is valid, the point can be bothered to scrounge up more than a trivially invalid anecdote for evidence :P
[01:17:04] <sfackler> pongad: "rustc --pretty expanded foo.rs"
[01:17:09] <kmc> o11c: you don't know statically which ones are worthwhile
[01:17:17] <pongad> sfackler: Thanks a lot!
[01:17:18] <kmc> o11c: what if the format string is loaded from a config file?
[01:17:29] <cgaebel> wtf
[01:17:40] <Dcoder> printf should really be deprecated, at least in c++
[01:17:52] <Dcoder> the (...) arguments don't lend themselves to much optimization
[01:17:57] <jasom> cgaebel: interpreted byte-code can be faster than native code even in some cases
[01:18:18] <jasom> cgaebel: since interpreted byte-code can have fewer cache misses
[01:18:23] <cgaebel> ...
[01:18:37] <cgaebel> write a thing that gets turned into interpreted byte code
[01:18:42] <cgaebel> I'll write the same thing, faster, in C++.
[01:18:44] <kmc> printf is just one example of an interpreter
[01:18:45] <cgaebel> or rust
[01:18:47] <cgaebel> w/e
[01:18:55] <kmc> every nontrivial program contains lots of interpreters whether you admit it or not
[01:19:11] <jasom> cgaebel: without writing a byte-code interpreter?
[01:19:26] <cgaebel> jasom: unless you write a bytecode interpreter in a bytecode-interpreted language..
[01:19:29] <cgaebel> then that's just cheating
[01:19:31] *** Quits: stephenmac7 (quassel@moz-F2C114C1.hsd1.fl.comcast.net) (Ping timeout)
[01:19:35] <kmc> and when you run an interpreter in a tracing JIT it becomes a tracing JIT for free
[01:19:37] <kmc> that's how PyPy works
[01:20:20] <speckle> how many mainstream interpreters lack GC, though?
[01:20:45] <pingveno> Is there a way to use enums that is just a union without introducing new names e.g. Some, None?
[01:20:57] <kmc> tiffany: regular compilers inline too, the point is that a JIT can inline based on dynamic performance information, and can constant-fold values that aren't known at compile time
[01:21:06] <speckle> or mainstream JIT compilers, for that matter.
[01:21:09] <aatch> The thing is, a JIT produces native code, which will execute as fast as native code produced by an ahead-of-time compiler.
[01:21:11] <kmc> pingveno: no
[01:21:12] <tiffany> regular compilers can do PGO
[01:21:23] <kmc> tiffany: that's very limited compared to what a JIT can do
[01:21:30] <tiffany> but you can't constant fold runtime values, which is why I was talking about the monad thing
[01:21:32] <cgaebel> aatch: not without taking just as long as a regular compiler
[01:21:35] <cgaebel> or longer
[01:21:36] <pingveno> kmc: So it always needs a new constructor?
[01:21:38] <mcpherrin> Futamura projections!
[01:21:42] <kmc> pingveno: yeah
[01:21:42] *** Joins: stephenmac7 (quassel@moz-F2C114C1.hsd1.fl.comcast.net)
[01:21:44] <pingveno> :(
[01:21:49] <kmc> pingveno: if I understand your question
[01:21:51] <cgaebel> pingveno: I miss it too!
[01:21:54] <aatch> cgaebel, not really, since it's done function-at-time normally.
[01:22:08] <tiffany> being able to dynamically generate code which is compiled at runtime allows you the freedom to codegen away runtime-heavy abstractions and constants which aren't available at compile time
[01:22:21] <cgaebel> aatch: still takes the same amount of time. they just hide by letting normal execution slowly while it works.
[01:22:27] <tiffany> free of nondeterministic performance
[01:22:44] <cgaebel> yeah the nondeterminism really bugs me too
[01:22:44] <pingveno> Okay, thanks
[01:22:48] <aatch> cgaebel, and? For a long-running application, that's only an initial cost.
[01:23:01] <cgaebel> not all applications are long-running
[01:23:04] <cgaebel> and even so
[01:23:08] <cgaebel> exactly the point for compiled languages!
[01:23:14] <cgaebel> "there's only an upfront cost"
[01:23:15] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[01:23:21] <tiffany> let's not forget that with JITs they usually interpret in the general case, so if your application doesn't have explicit hotpaths you're kind of screwed performance-wise
[01:23:27] <speckle> I wonder if it's possible to fork the JVM, and replace the GC with some kind of malloc/free bytecode instructions, to use as a platform for fast JIT of languages with manual memory management
[01:23:38] <cgaebel> oh dear god if Rust switches to the jvm I'm so out.
[01:23:43] <aatch> cgaebel, then don't use a JIT language!
[01:23:53] <speckle> cgaebel, what's wrong with the JVM other than the GC, though?
[01:23:57] <cgaebel> I don't. Not for performance-sensitive things.
[01:23:59] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[01:24:01] <o11c> speckle: there is nothing terribly exciting about the JVM
[01:24:04] <aatch> Not everything is subservient to the god of performance.
[01:24:06] <cgaebel> because java. no tail-call n' stuff.
[01:24:10] <aatch> and determinsism.
[01:24:16] <cgaebel> then why use computers?
[01:24:20] <cgaebel> if not for those two things
[01:24:20] <o11c> anybody can write a JIT
[01:24:21] <tiffany> I would be more interested in running rust on luajit than running it on jvm
[01:24:28] <cgaebel> ^
[01:24:38] *** kimundi is now known as zz_kimundi
[01:24:40] <jasom> all JITs I've ever seen are fully deterministic in the sense of identical inputs produce identical outputs
[01:24:57] <tiffany> jasom: except the input is non-deterministic system performance
[01:25:03] <aatch> That doesn't invalidate the idea that *SOMETIMES* JIT-compiled code is faster than ahead-of-time compiled code.
[01:25:09] <kmc> o11c: lol what? thousands of dev-years of effort have gone into HotSpot
[01:25:12] <tiffany> the performance characteristics of your program based on where the JIT thinks the hotpaths are
[01:25:16] <cgaebel> sure. if the ahead-of-time compiled code is written poorly.
[01:25:28] <kmc> o11c: anybody can write a crap JIT; it takes a ton of effort to write a good one, and the results are amazing
[01:25:30] <cgaebel> if you write good code, you can EASILY beat a JIT.
[01:25:33] <cgaebel> it's not even hard
[01:25:33] <kmc> look at V8 and SpiderMonkey as well
[01:25:34] <aatch> cgaebel, stop being an ass.
[01:25:46] <cgaebel> :/
[01:25:52] <kmc> cgaebel: if I show you any code whatsoever that's faster in JIT you will just say it's "crap" won't you
[01:26:04] <cgaebel> no, I'll write equivalent code that beats the jit.
[01:26:06] <kmc> "your tool sucks because I can bend over backwards to not need it"
[01:26:10] <cgaebel> same output, better performance that beats the jit.
[01:26:12] <kmc> might as well code in assembly then
[01:26:20] <aatch> cgaebel, sure, if you pull out every little stop, use every goddamn feature your CPU has, you can do it.
[01:26:25] <speckle> my problem with JITs is the popular ones are all on the forced hands-off GC bandwagon
[01:26:31] <cgaebel> not even, most of the time.
[01:26:37] <speckle> both Java's and Javascript's
[01:26:43] <cgaebel> that too
[01:26:53] <kmc> anyway this off topic discussion has probably gone on long enough
[01:26:58] <aatch> Congratulations, you just did all the work the runtime does without the benefits
[01:27:04] <o11c> kmc: my point is not that you necesarily *should* write your own JIT ... but the JVM's JIT is tailored for the kind of programs that rely on a GC, etc.
[01:27:17] <tiffany> I imagine luajit has provisions for non-GC code based on how it optimizes ffi
[01:27:24] <cgaebel> I'm excited to see how llvm's JIT stuff fares for rust
[01:27:28] <speckle> Lua at least seemingly give you control over the GC
[01:27:42] <tiffany> collectgarbage('collect') hardly qualifies as control
[01:28:05] <kmc> o11c: right, I don't think JVM is a good fit for Rust at all, but "anybody can write a JIT" is absurdly and annoyingly dismissive
[01:28:06] <cgaebel> can you stop garbage collection for a section of code in lua?
[01:28:16] <speckle> Yeah, I think you can
[01:28:19] <cgaebel> neat!
[01:28:20] <aatch> Oh, also, PHP doesn't have a garbage collector. It uses refcounting.
[01:28:21] <kmc> JVM performance is pretty impressive on a large set of programs in a number of languages
[01:28:26] <kmc> it didn't get that way overnight
[01:28:38] <speckle> I don't think Lua's JIT is as fast as native code, though
[01:28:51] <Dcoder> kmc: it's hard to think of a case where absolute performance is required, and yet you can't know apriori what types you're dealing with (which is where JITs are supposed to shine)
[01:28:57] <tiffany> most benchmarks has luajit within 3x of equivalent C
[01:29:01] <o11c> speckle: "as fast as native" isn't *exactly* the goal
[01:29:17] <kmc> Dcoder: it's not just about types but also values
[01:29:22] <o11c> IMO the goals are: 1. no crazy memory usage, and 2. get past the 10x border
[01:29:26] <Dcoder> i've certainly seen cases where JITs outperformed compiled code, but it's usually not performance-critical code
[01:29:32] <Dcoder> kmc: right
[01:29:37] <aatch> Dcoder, and that's fine.
[01:29:39] <o11c> 10x border being about the fasted interpreted languages
[01:29:47] <speckle> What I'm hoping is (and maybe this is an absurb idea) eventually using JIT to cross-compile from x86 to RISC and vice versa
[01:30:08] <Dcoder> speckle: x86 already does that :) (internally)
[01:30:09] <o11c> speckle: there are plenty of people already doing that
[01:30:17] *** Joins: alan_andrade_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[01:30:19] <speckle> What about RISC to x86?
[01:30:20] <chromatic> http://www.hpl.hp.com/techreports/1999/HPL-1999-78.html
[01:30:25] *** Quits: mawuli (mawuli@moz-5ADAB167.com.gh) (Ping timeout)
[01:30:41] *** Joins: mawuli (mawuli@moz-5ADAB167.com.gh)
[01:30:51] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[01:31:34] <aatch> I never claimed that your entire program could be faster in every single aspect. But outright denying that a system that can generate code that doesn't have to run anywhere else but that exact system couldn't *possibly* be faster equivalant mostly-portable native code is absurd
[01:32:02] *** Quits: alan_andrade_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[01:33:59] *** Quits: jack (sid19593@moz-A42E5B7B.irccloud.com) (Ping timeout)
[01:34:07] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[01:34:16] *** Quits: balpert_ (sid15886@moz-A42E5B7B.irccloud.com) (Ping timeout)
[01:34:16] *** Quits: janx (uid16602@moz-A42E5B7B.irccloud.com) (Ping timeout)
[01:34:16] *** Quits: patrikstenmark (sid16326@moz-A42E5B7B.irccloud.com) (Ping timeout)
[01:34:16] *** Quits: wouterw (uid22165@moz-A42E5B7B.irccloud.com) (Ping timeout)
[01:34:16] *** Quits: mje113 (uid16557@moz-A42E5B7B.irccloud.com) (Ping timeout)
[01:34:16] *** Quits: huhlig (sid17687@moz-A42E5B7B.irccloud.com) (Ping timeout)
[01:34:16] *** Quits: robert (uid15951@moz-A42E5B7B.irccloud.com) (Ping timeout)
[01:34:16] *** Quits: tautologico (uid22285@moz-A42E5B7B.irccloud.com) (Ping timeout)
[01:34:16] *** Quits: johanh (uid17185@moz-A42E5B7B.irccloud.com) (Ping timeout)
[01:34:16] *** Quits: avdi (sid16245@moz-A42E5B7B.irccloud.com) (Ping timeout)
[01:34:16] *** Quits: abinader (sid21713@moz-A42E5B7B.irccloud.com) (Ping timeout)
[01:34:27] <cgaebel> but you usually know a LOT about your target architecture..
[01:34:28] *** Quits: jzelinskie (sid17772@moz-A42E5B7B.irccloud.com) (Ping timeout)
[01:34:34] <cgaebel> especially for things that care about performance
[01:34:37] <speckle> Theoretically, it's possible. But in practice, the best JITs are so tightly coupled to GCs with poor real-time performance, that you wouldn't want to use them for things that need fast real-time performance.  If you need brute force computation, you're often better off with OpenCL.
[01:34:48] <cgaebel> i.e. it's safe to assume SSE is available these days if your binary is x86
[01:35:17] <cgaebel> and the cache line size is 64 bytes on x86, 32 on ARM...
[01:35:30] <cgaebel> you can get a LOT of performance from those two assumtions
[01:35:30] <speckle> Maybe next decade, JIT will finally be faster in practice
[01:35:38] <aatch> cgaebel, but the point isn't "use JIT languages for performance" because that's absurd.
[01:35:50] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[01:35:59] <cgaebel> but then why bother argue that they perform well?
[01:36:08] <cgaebel> if not for things that care about performance
[01:36:09] <aatch> It's "JIT languages can, surprisingly, perform well"
[01:36:18] <cgaebel> I guess...
[01:36:22] <kmc> "care about performance" is not an absolute yes/no thing
[01:36:24] <cgaebel> in the same way that some worms can jump
[01:36:35] <kmc> there's always a tradeoff between performance and effort
[01:36:42] *** Quits: killerswan (kevin.cant@moz-1F697F7B.uvs.sntcca.sbcglobal.net) (Quit: Leaving)
[01:36:45] <aatch> I care about performance, but I don't need to squeeze every cycle out of my system.
[01:36:52] <kmc> anyway I think we should wrap this up
[01:37:07] <speckle> and then there's Go, which supposedly compiles so fast that it can compete with JITted languages, both in GC and in speed :P
[01:37:20] <cgaebel> yeah I love Go's compile times
[01:37:27] <cgaebel> huge boon for development
[01:37:46] <Dcoder> is Go actually fast (at runtime)?
[01:37:50] <cgaebel> it's meh
[01:37:51] *** Quits: bakkdoor (bakkdoor@moz-D653693A.osnanet.de) (Quit: Linkinus - http://linkinus.com)
[01:37:58] <cgaebel> like, -O0
[01:38:03] <Dcoder> ok
[01:38:03] <cgaebel> but fast compile time!!
[01:38:05] <aatch> Dcoder, it's very fast being a server
[01:38:28] <cgaebel> eeeh
[01:38:30] <aatch> But heaven help you if you want to use FFI
[01:39:06] <kmc> I think Go focuses on massively concurrent IO rather than latency or raw compute power
[01:39:08] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[01:39:26] <aatch> kmc, yep, that's the design focus.
[01:39:44] <aatch> They use a custom calling convention to limit the number of registers they have to safe when switching tasks.
[01:39:47] <kmc> that's one reason that Rust and Go are so different
[01:39:51] <speckle> I wouldn't use Go for writing a server for a first person shooter game.
[01:40:08] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[01:40:11] *** Joins: mje113 (uid16557@moz-A42E5B7B.irccloud.com)
[01:40:24] <tiernjo> Go is amazing ^-^
[01:40:39] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[01:40:39] *** ChanServ sets mode: +o tjc
[01:40:47] <aatch> speckle, well it's not for that, primarily. It would be very good for writing a server (or at least a portion of one) for an MMO though.
[01:40:50] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[01:40:53] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[01:41:06] *** Joins: jack (sid19593@moz-A42E5B7B.irccloud.com)
[01:41:06] *** ChanServ sets mode: +o jack
[01:41:08] <speckle> It's certainly an interesting approach to optimize a language's speed for IO rather than computational power - that's an undervalued aspect of performance, certainly
[01:41:50] <speckle> how do you even do that, though? I'm confused now
[01:41:53] *** Quits: evanm_ (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:41:57] <aatch> speckle, yeah. They definately pay for it elsewhere, but that's only a problem if you try to use Go for things it wasn't intended to.
[01:42:11] <speckle> I think Go is first and foremost a competitor with Java
[01:42:12] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[01:42:20] <cgaebel> and C++
[01:42:25] <cgaebel> (for their internal stuff)
[01:42:52] <cgaebel> it's very good for what it's made for: distributed systems
[01:43:15] *** Joins: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP)
[01:43:17] *** Joins: huhlig (sid17687@moz-A42E5B7B.irccloud.com)
[01:43:23] <aatch> eh, if where the people are coming from is any indication of it's real competition, it's competing with Ruby and Python mostly.
[01:43:40] <cgaebel> I'm talking more historically why it was made
[01:43:49] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[01:43:51] <aatch> cgaebel, oh right, yes. That's true
[01:43:54] <cgaebel> and also where it really shines
[01:44:00] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[01:44:03] <ChrisMorgan> And yet the language has no support for distributed channels; they are solely for concurrency. That's always struck me as odd—that they haven't even attempted to solve distributed communication in the language.
[01:44:04] <speckle> isn't Go a lot less expressive than Ruby or Python?
[01:44:05] <cgaebel> idk I still find python cleaner than Go
[01:44:20] <cgaebel> speckle: yeah it's uglier
[01:44:22] *** Joins: robert (uid15951@moz-A42E5B7B.irccloud.com)
[01:44:36] <cgaebel> but again, great for things like the next generation of Bigtable
[01:44:50] <aatch> speckle, but it's much faster and still easy to learn and work with
[01:44:59] <speckle> so that's why I think it's a lot like Java
[01:45:23] *** Quits: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP) (Ping timeout)
[01:45:24] <speckle> It's clunky, but it's relatively fast and still a lot easier than C++
[01:46:02] <cgaebel> idk I don't see it competing directly with any existing languages
[01:46:08] <speckle> I've heard of a lot of people moving from Ruby or Python to Java, to gain speed at the cost of more development effort, and I imagine Go would fill almost exactly the same role
[01:46:09] <cgaebel> I think it belongs on its own
[01:46:26] <cgaebel> it's very specific in its role
[01:46:34] <cgaebel> it's for things that talk to other things
[01:46:47] <cgaebel> not really something I'd write "ls" in, y'know
[01:46:57] <speckle> what would you write ls in? :) rust?
[01:46:58] <aatch> speckle, that's probably true. If I recall correctly Twitter re-wrote a part of itself in Java (or at least the JVM), away from Ruby.
[01:46:59] <cgaebel> nor is it something i'd write a game in
[01:47:08] <cgaebel> but for things that talk to other things? sure!
[01:47:19] <cgaebel> speckle: probably python
[01:47:46] <aatch> I'd write a load-balancer in Go, no worries. Or a message broker.
[01:47:53] <cgaebel> yeah exactly!
[01:47:53] <speckle> ls in Haskell might be fun
[01:47:56] <cgaebel> things that talk to other things
[01:48:09] <cgaebel> that's their niche
[01:48:44] <aatch> cgaebel, yep. Hence why I (and others) get annoyed when people compare us (Rust) to Go.
[01:49:04] <cgaebel> aatch: yeah. I see rust as more directly attacking C/C++'s high-performance niche
[01:49:08] <cgaebel> and even fortran!
[01:49:15] <cgaebel> (which still exists, believe it or not)
[01:49:17] <speckle> It kind of bothers me how Python and Ruby are dynamically typed, though.  I wish there was a mainstream statically typed scripting language.  Haskell is kind of it, but it's a bit too functional for me.  Maybe if you could script with Ocaml.. or what about if there was a Rust interpreter?
[01:49:36] *** Joins: tautologico (uid22285@moz-A42E5B7B.irccloud.com)
[01:49:36] <cgaebel> meh. they're great for little <100 LOC projects
[01:49:40] <mcpherrin> I'm writing a shell in rust!
[01:49:49] <mcpherrin> where you can call and define shell scripting with rust functions
[01:49:49] <mcpherrin> yay
[01:49:51] <ChrisMorgan> speckle: you might be interested in Julia
[01:50:08] <aatch> speckle, eh, scripting languages are for, well, scripting primarily.
[01:50:17] <chromatic> I've always wanted to try Typed Racket.
[01:50:19] <speckle> it's just that you could take almost any statically typed language and intepret it, but... I dunno
[01:50:31] <mcpherrin> Racket is fun
[01:50:48] <aatch> Static typing tends to go against the "quick and easy" charactistics you want for scripting.
[01:51:13] <speckle> I guess I'm thinking of something that directly executes what you write, instead of starting from a main function
[01:51:14] <cgaebel> eeeh it just turns runtime errors into compile-time errors
[01:51:16] <steveklabnik> twitter did go to the jvm, but they also wrote shit ruby
[01:51:28] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[01:51:28] <cgaebel> steveklabnik: from experience? ;)
[01:51:29] <steveklabnik> not that they probably wouldn't have EVENTUALLY needed to move to something elese
[01:51:32] <kmc> aatch: if it's truly a throwaway script yes. but many scripts take on a life of their own, and need heavy refactoring, and static types are essential for quick refactoring
[01:51:32] <aatch> steveklabnik, I shall take your word for it.
[01:51:34] <steveklabnik> not first hand, but second
[01:51:40] <cgaebel> fair enough
[01:52:00] <steveklabnik> at the rate they grew and with the way MRI is, i think the story would have ended up the same anyway, probably
[01:52:02] *** Quits: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net) (Quit: carllerche)
[01:52:11] <chromatic> This was MRI 1.8 right?
[01:52:15] <speckle> you guys know how Python or Ruby just execute code if you write it?  the control starts at the beginning of the file, not at a main function.  so I'm thinking of something that has static typing, but executes like that
[01:52:21] <speckle> thanks for the suggestions, I guess
[01:53:00] <steveklabnik> chromatic: yes, at the time
[01:54:02] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Connection reset by peer)
[01:54:06] <chromatic> With or without the enterprise patches?
[01:54:14] <steveklabnik> they wrote the enterprise patches
[01:55:02] <chromatic> Oh, I didn't know. Interesting.
[01:55:13] *** Joins: seich_ (seich@E0DBF039.6AE14CEC.624CE61B.IP)
[01:55:40] *** Quits: seich_ (seich@E0DBF039.6AE14CEC.624CE61B.IP) (Quit: Lingo - http://www.lingoirc.com)
[01:56:17] <Ralith_> speckle: you might like Julia
[01:56:26] <Ralith_> oh, ChrisMorgan already said that
[01:56:32] <steveklabnik> chromatic: oh wait, maybe that's wrong, they might have just co-maintained it
[01:56:36] <steveklabnik> https://blog.twitter.com/2011/building-faster-ruby-garbage-collector says
[01:56:44] <steveklabnik> At the time, we worked with the REE team to integrate some third-party patches that allowed us to tune the garbage collector for long-lived workloads.
[01:56:50] <bjz> Ralith_: Julia certainly is interesting
[01:57:21] <steveklabnik> yes, phusion wrote it, my mistake: http://www.rubyinside.com/ruby-enterprise-edition-ree-1-8-7-released-2557.html
[01:57:28] <bjz> Ralith_: hopefully it makes inroads into the statistics crowd
[01:57:41] <Ralith_> it's basically 80% of the good things about lisp in a pythonista- and matlabber-friendly package
[01:57:48] <bjz> Ralith_: it's rather sad they're all usin R :(
[01:57:52] <Ralith_> and with none of the baggage
[01:59:49] <chromatic> steveklabnik, it was pretty horrifying to look inside the implementation of dynamic languages in those days. By which I mean "almost anytime".
[01:59:54] <steveklabnik> heh
[02:00:04] <steveklabnik> yeah, 1.9 on is much better, but still pretty scary
[02:00:22] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[02:00:35] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[02:01:19] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[02:02:59] *** Quits: pongad (Mibbit@moz-7E8AAD2E.res.gatech.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[02:03:01] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[02:03:11] *** Quits: onelson (onelson@moz-DD666EC5.laika.com) (Quit: Leaving.)
[02:07:01] *** Quits: chromatic (chromatic@moz-28CBC7F4.hsd1.or.comcast.net) (Quit: Leaving)
[02:07:11] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[02:07:15] <speckle> would it make sense to make a "simple" Rust interpreter, that is optimized for pure simplicity (I realize this is subjective) rather than speed?  I'm guessing it would be too slow to bootstrap the compiler, but it could be usable for small scripts
[02:08:14] <cgaebel> ideally, JIT would fit that role..
[02:08:24] <speckle> heh
[02:08:40] <kmc> rusti used to be that, and it used LLVM's JIT (which is not a tracing JIT or any way optimized for speed)
[02:09:04] <kmc> I think a separate implementation of Rust would be prohibitively much work at this point, given how rapidly the language is changing
[02:09:15] <speckle> I am guessing rusti is more likely to be resurrected by someone after the language stabilizes, yeah
[02:09:18] <kmc> and the degree to which existing Rust code depends on a compiled implementation, depends on representation, depends on C ABI compatibility
[02:09:51] *** Joins: patrikstenmark (sid16326@moz-A42E5B7B.irccloud.com)
[02:09:57] <speckle> maybe it could be neat to have a RustScript that is an interpreted subset of Rust, hmm.
[02:10:21] <cgaebel> I think an interpreter would be a lot of work for something llvm already kinda-does
[02:10:23] <cgaebel> i.e. jit
[02:10:25] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[02:10:51] *** Joins: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net)
[02:10:52] <kmc> I mean is the goal really "interpreted" or is the goal "REPL interface"
[02:10:55] <kmc> because you can wire a REPL to a compiler
[02:11:48] <kmc> (in reality every language implementation in the world exists somewhere in the middle of a spectrum between "interpreter" and "compiler")
[02:12:02] *** Quits: Linear (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[02:12:26] <speckle> there's also the goal of drop-in scripts - the question is how well can uncompiled Rust interface with compiled Rust
[02:12:39] <speckle> I mean, like Lua scripting in games, for example
[02:12:51] *** Joins: Jemaclus (jemaclus@moz-A0EB9A8E.hsd1.ca.comcast.net)
[02:12:54] <speckle> but with Rust instead
[02:13:09] *** Joins: pzol_ (pzol@86821BC.DEB41A6D.AADC76B.IP)
[02:14:28] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: leaving)
[02:14:40] *** Quits: Rusky (russell@moz-B7E6EE4E.slkc.qwest.net) (Quit: Leaving.)
[02:14:54] *** Joins: avdi (sid16245@moz-A42E5B7B.irccloud.com)
[02:14:54] <speckle> I'm guessing Rust would have its own stabilized ABI at some point, being a systems language. I'm not sure how hard it would be compile and dynamically link in arbitrary Rust libraries, particularly when a Rust program is already running, though.
[02:15:11] *** Joins: Rusky (russell@moz-B7E6EE4E.slkc.qwest.net)
[02:15:32] *** Parts: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net) ()
[02:16:12] <cgaebel> meh. rust isn't that nice for scripting..
[02:16:14] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:16:16] <kmc> well if the "interpreter" is the same frontend wired to the LLVM JIT, that should be easy I hope
[02:16:46] <speckle> why not, cgaebel?
[02:16:48] <kmc> and I'm not so sure about a stable native ABI... some platforms still don't have one for C++
[02:17:31] <kmc> though specifying a C++ ABI is perhaps a lot more work (multiple virtual inheritance anyone?)
[02:17:37] <cgaebel> speckle: idk. just feels closer to a systems language. you'll have more fun doing it in python :/
[02:17:43] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[02:17:48] <speckle> that's a matter of taste
[02:17:57] <cgaebel> I guess..
[02:17:58] <kmc> automatic memory management is pretty great... I don't think that's a matter of taste
[02:18:01] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[02:18:06] <kmc> it's a very useful tool when you can afford it
[02:18:13] <kmc> Rust is all about the cases where you can't
[02:18:35] <speckle> I didn't say it was good taste :P
[02:18:41] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:18:41] *** Joins: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP)
[02:19:10] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[02:19:56] *** Joins: johanh (uid17185@moz-A42E5B7B.irccloud.com)
[02:20:22] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[02:20:47] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[02:22:08] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[02:22:32] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[02:22:57] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[02:23:20] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[02:23:32] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[02:23:43] <speckle> Actually, I guess games scripting is kind of a unique area, because you have a number of weird constraints.  You want to limit what the script has access to, so that you can be reasonably sure mods aren't trojans.  You want high performance, specifically in terms of latency and worst-case, because frame rate spikes are a significant negative.  In theory, ou might even want static typing, so that one can manage large game script codebases mor
[02:23:57] <speckle> I'm thinking that a subset of Rust could be a nice game scripting language, because of this.
[02:24:03] <kmc> cut off at "codebases mor"
[02:24:19] <speckle> "In theory, you might even want static typing, so that one can manage large game script codebases more easily."
[02:24:20] <kmc> but that's an interesting point
[02:24:21] <speckle> Sorry for being TL;DR
[02:24:23] <o11c> yes, securely embeddably languages are definitely an unfilled niche
[02:24:26] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[02:24:43] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[02:24:58] *** Joins: balpert_ (sid15886@moz-A42E5B7B.irccloud.com)
[02:25:16] <o11c> the scripting language for the game I maintain is *almost* statically typed, there's just one evil function that forces everything to be dynamic ...
[02:25:17] <speckle> Ah, you're right - you could generalize game scripting to a securely embeddably language
[02:25:26] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[02:25:31] <speckle> Which one would that be? :)
[02:25:38] <o11c> once I implement tuple support it will go away though
[02:25:45] <kmc> o11c: I'm not sure. JavaScript is the standard-bearer for sandboxed embedded scripting but I think Lua / LuaJIT do it too
[02:25:47] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[02:25:57] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: Leaving)
[02:26:04] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[02:26:09] <o11c> speckle: https://github.com/themanaworld/tmwa
[02:26:12] <speckle> thanks!
[02:26:35] <kmc> when you add the constraint for realtime performance then yeah I don't know of good existing languages
[02:26:48] <o11c> the bad function is https://wiki.themanaworld.org/index.php/EAthena_Scripting_Reference#getsavepoint
[02:26:48] <speckle> Javascript has a number of flaws - I think you don't have to be a genius to come up with a better securely embeddable language than Javascript
[02:27:03] <kmc> sure
[02:27:04] <o11c> kmc: IMO it's not so much performance as static typing
[02:27:10] <kmc> I don't think it's an "unfilled niche" though
[02:27:25] <cgaebel> javascript isn't appropriate for most games because it doesn't even have integers..
[02:27:32] <cgaebel> kinda a fatal flaw imo
[02:28:12] <o11c> lua is what our cousin project is using
[02:28:26] <speckle> I think the usual approach for real-time scripting is to let the programmer manipulate the GC how they want, as opposed to the hands-off GC of Java(script)
[02:28:48] <o11c> sigh, I wish I had more time to work on this code and didn't have to waste time on school ...
[02:28:56] <cgaebel> just drop out!
[02:29:10] <speckle> but Rust might even be nicer than tweakable GC
[02:29:49] <o11c> cgaebel: but I have only one semester left, and my current best job offer is expecting me to finish
[02:29:58] *** Joins: wouterw (uid22165@moz-A42E5B7B.irccloud.com)
[02:29:59] *** Joins: janx (uid16602@moz-A42E5B7B.irccloud.com)
[02:30:03] <cgaebel> o11c: laame. just work on rust after you graduate then!
[02:30:12] *** Joins: victorporof_ (victorporo@8F761026.B5EF4AF6.E96CA9D8.IP)
[02:30:40] *** Joins: kanru (kanru@moz-99690620.hinet-ip.hinet.net)
[02:31:16] <o11c> that's what I told my mom I would have to do, but in the end it turned out that the open-source work I *have* gotten done was enough to get attention in the right places.
[02:31:32] <o11c> my mom is one of those people who thinks a college degree is worth something
[02:31:36] <cgaebel> you know you can work on this stuff while at a job...
[02:31:40] <cgaebel> (kinda what I do)
[02:31:44] *** Quits: victorporof (victorporo@8F761026.B5EF4AF6.E96CA9D8.IP) (Ping timeout)
[02:31:44] <cgaebel> err, not while there
[02:31:46] <cgaebel> but afterwards!
[02:31:58] <cgaebel> during this thing you'll have called "free time"
[02:32:39] <o11c> of course, I expect to keep learning, but there are *so* many things I should have learned or built *already* ...
[02:32:43] <Dcoder> a college degree *is* worth something
[02:32:49] <Dcoder> but probably not what you pay in tuition
[02:32:50] <cgaebel> plus, you should be contributing because you want to give back to the world. make something awesome and give it away! not for something to put on a resume. :(
[02:33:16] <cgaebel> but that might just be my crazy OSS-advocate voice talking
[02:35:25] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[02:36:15] *** Quits: alkino_ (alkino@moz-2677AA92.w90-46.abo.wanadoo.fr) (Ping timeout)
[02:36:20] <speckle> I see open source as the best form of "backup" - to make sure your code survives when you don't.  If it's good enough for people to care about it, at least.
[02:36:49] *** Joins: onelson (owen@18CF7301.95770028.5B6BFE7D.IP)
[02:36:51] <SiegeLord> That's a bit morbid :P
[02:36:58] <speckle> where can you find a better backup service than github?
[02:37:00] <mcpherrin> cgaebel: free time *after* university? myth!
[02:37:14] *** Quits: Siyo (Siyo@A89938F4.87DAA49F.F113998C.IP) (Ping timeout)
[02:37:16] <cgaebel> mcpherrin: secret: don't have kids.
[02:37:20] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[02:37:23] *** Joins: jherms (jherms@moz-C3C10EC4.jetstream.xtra.co.nz)
[02:37:29] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[02:37:30] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[02:37:38] <cgaebel> ...or work at a startup
[02:37:49] <mcpherrin> cgaebel: I picked option startup
[02:37:57] <cgaebel> lol that's why then
[02:38:03] <mcpherrin> :D
[02:38:11] <cgaebel> but you love it anyhow, don'tcha?
[02:38:14] <mcpherrin> not early stage so it's not that bad
[02:38:18] <mcpherrin> nearing IPO really
[02:38:31] <cgaebel> uh oh. that'll be fun.
[02:39:28] *** Quits: kanru (kanru@moz-99690620.hinet-ip.hinet.net) (Connection reset by peer)
[02:40:00] *** Joins: gimpf (gimpf@moz-4A87FAE6.adsl.highway.telekom.at)
[02:40:03] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[02:40:37] *** Quits: sunfish (chatzilla@moz-C06D9702.mtv1.mozilla.com) (Ping timeout)
[02:40:38] *** Joins: kanru (kanru@moz-99690620.hinet-ip.hinet.net)
[02:40:55] *** Quits: deiome (christophe@moz-20DF51FE.dynamic.tstt.net.tt) (Quit: Leaving)
[02:41:02] *** Joins: Siyo (Siyo@A89938F4.87DAA49F.F113998C.IP)
[02:41:12] <SiegeLord> Do startups require longer hours?
[02:41:19] *** Joins: gentlefolk (chatzilla@moz-D195EAF9.cpe.teksavvy.com)
[02:41:23] <cgaebel> in general
[02:41:28] <cgaebel> yeah
[02:41:48] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[02:42:28] <SiegeLord> Hmm... maybe I shouldn't apply to work at one >.>
[02:42:37] <cgaebel> hey, if you're young, it might be a good fit
[02:42:48] <cgaebel> you can get a lot done with lots of hours, surprisingly enough
[02:43:01] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[02:43:02] <cgaebel> and have a huge impact on something amazing
[02:43:04] <SiegeLord> That's not surprising :P
[02:43:21] <SiegeLord> Well, if they decide to interview me, I know they're full of it
[02:43:32] *** Quits: Jemaclus (jemaclus@moz-A0EB9A8E.hsd1.ca.comcast.net) (Client exited)
[02:43:35] <cgaebel> how do you mean?
[02:43:39] *** Joins: Jemaclus (jemaclus@moz-A0EB9A8E.hsd1.ca.comcast.net)
[02:43:46] <SiegeLord> 'cause if they take me, they'll take anybody
[02:43:51] <cgaebel> lol
[02:44:01] *** Joins: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP)
[02:44:31] <cgaebel> "Please accept my resignation. I don’t care to belong to any club that will have me as a member". - Groucho Marx
[02:44:48] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[02:45:08] <SiegeLord> lol, exactly
[02:46:06] *** Quits: dukeleto (dukeleto@moz-C083E0FB.ptld.qwest.net) (Ping timeout)
[02:46:06] *** Quits: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP) (Ping timeout)
[02:50:49] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[02:50:49] *** ChanServ sets mode: +ao dherman dherman
[02:51:44] *** Quits: yusukesuzuki (yusukesuzu@moz-43160292.net218219047.t-com.ne.jp) (Ping timeout)
[02:51:56] *** Joins: jhermsmeier (Jonas@moz-C3C10EC4.jetstream.xtra.co.nz)
[02:52:00] *** Joins: yusukesuzuki (yusukesuzu@moz-43160292.net218219047.t-com.ne.jp)
[02:53:34] *** Quits: jhermsmeier (Jonas@moz-C3C10EC4.jetstream.xtra.co.nz) (Quit: Leaving)
[02:53:49] *** Joins: jhermsmeier (Jonas@moz-C3C10EC4.jetstream.xtra.co.nz)
[02:53:53] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[02:53:55] *** Quits: jhermsmeier (Jonas@moz-C3C10EC4.jetstream.xtra.co.nz) (Quit: Leaving)
[02:54:38] *** Quits: Ralith_ (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[02:55:07] *** Quits: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP) (Ping timeout)
[02:55:52] *** Joins: jherms_ (Jonas@moz-C3C10EC4.jetstream.xtra.co.nz)
[02:56:17] *** Quits: Jemaclus (jemaclus@moz-A0EB9A8E.hsd1.ca.comcast.net) (Client exited)
[02:56:51] <speckle> hey, the glfw bindings are generally in a better state than the sdl2 bindings, since glfw is actually used for servo, right?
[02:57:31] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[02:59:21] *** Quits: apoelstra (username@moz-B7040E82.vs.shawcable.net) (Quit: WeeChat 0.4.2)
[02:59:22] *** Joins: apoelstra (username@moz-B7040E82.vs.shawcable.net)
[02:59:31] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Ping timeout)
[02:59:38] *** Quits: gimpf (gimpf@moz-4A87FAE6.adsl.highway.telekom.at) (Quit: Leaving.)
[02:59:50] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[02:59:52] *** Quits: AvianFlu (AvianFlu@moz-31F97978.nyc.res.rr.com) (Ping timeout)
[02:59:54] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[03:00:21] *** Joins: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net)
[03:00:28] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[03:00:36] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[03:01:18] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:01:19] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[03:01:26] *** Joins: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP)
[03:01:38] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[03:02:19] *** Quits: jherms (jherms@moz-C3C10EC4.jetstream.xtra.co.nz) (Client exited)
[03:02:24] *** Quits: jherms_ (Jonas@moz-C3C10EC4.jetstream.xtra.co.nz) (Quit: Leaving)
[03:02:33] *** Joins: jherms_ (Jonas@moz-C3C10EC4.jetstream.xtra.co.nz)
[03:03:20] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[03:04:54] *** Joins: ctangent (textual@moz-4B354EF9.hsd1.wa.comcast.net)
[03:05:01] *** Joins: abinader (sid21713@moz-A42E5B7B.irccloud.com)
[03:05:39] *** Quits: jherms_ (Jonas@moz-C3C10EC4.jetstream.xtra.co.nz) (Quit: Leaving)
[03:05:55] *** Joins: jherms (Jonas@moz-C3C10EC4.jetstream.xtra.co.nz)
[03:06:36] <bjz> speckle: I maintain the glfw bindings
[03:06:41] *** Quits: espindol_ (espindola@moz-F0FBD3B4.dsl.teksavvy.com) (Quit: Leaving...)
[03:06:47] <speckle> nice!
[03:06:56] <bjz> speckle: not sure how the sdl2 binidings are
[03:07:20] <speckle> Me neither - I don't know how reliable the github "builds" or "fails to build" warnings are
[03:08:03] *** Quits: Earnestly (earnest@119EDA00.66A37A5.BFD1ABFD.IP) (Ping timeout)
[03:08:38] <bjz> speckle: well glfw-rs fails to build a couple of times every week :)
[03:08:49] <speckle> oh..
[03:08:55] <bjz> I have awesome collaborators though who help keep it in the green :)
[03:09:56] <bjz> maybe 'a couple of times' might be an exaggeration
[03:09:56] <speckle> I guess the easiest way to get libraries for Rust 0.9 is to find the earliest green commit that was made after 0.9 was released
[03:10:12] <bjz> use master
[03:10:16] <speckle> heh
[03:10:18] <bjz> :P
[03:10:47] <bjz> the glfw bindings are improving too over time
[03:10:55] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[03:10:59] <bjz> as in, the wrapper
[03:11:19] <bjz> as I gain a better understanding of how best to use Rust
[03:11:28] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:15:33] *** Joins: pcwalton (pcwalton@moz-14285ACF.ptr.us.xo.net)
[03:15:33] *** ChanServ sets mode: +ao pcwalton pcwalton
[03:15:41] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[03:15:55] *** Quits: pcwalton (pcwalton@moz-14285ACF.ptr.us.xo.net) (Quit: pcwalton)
[03:17:26] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[03:17:26] *** ChanServ sets mode: +o tjc
[03:19:18] *** Joins: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net)
[03:19:38] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[03:26:21] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[03:27:48] *** Joins: honza (honza@2F4A0D37.D725B7F3.2BF60B34.IP)
[03:28:57] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[03:29:31] *** Quits: honza (honza@2F4A0D37.D725B7F3.2BF60B34.IP) (Ping timeout)
[03:32:43] *** Quits: victorporof_ (victorporo@8F761026.B5EF4AF6.E96CA9D8.IP) (Quit: victorporof_)
[03:34:41] *** Joins: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net)
[03:34:50] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[03:35:01] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[03:35:10] *** Quits: a_m0d (a_m0d@moz-2F294D00.acanac.net) (Quit: Leaving.)
[03:35:26] *** Quits: zz_kimundi (kimundi@moz-7F6EAE0B.dip0.t-ipconnect.de) (Ping timeout)
[03:37:11] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:37:34] *** Joins: MrByte (Dartakio@moz-81792842.chy-wy.client.bresnan.net)
[03:37:51] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[03:38:45] *** Joins: zz_kimundi (kimundi@moz-7D8AC97.dip0.t-ipconnect.de)
[03:39:13] *** zz_kimundi is now known as kimundi
[03:40:38] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[03:40:51] *** Joins: Prabha-Srini (Mibbit@603687B6.FB1F0523.2F9DE622.IP)
[03:41:46] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[03:42:20] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[03:43:41] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[03:44:16] <Prabha-Srini> Hello. I have started exploring Rust and attempted to define a struct with field types int and &str. I  error: mr type in this case?issing lifetime specifier at the place of type definition. Could you guide on how to use the st
[03:44:45] *** Joins: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP)
[03:45:24] <Prabha-Srini> Sorry about the above message. The error I get is  error: missing lifetime specifier 
[03:45:42] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[03:45:44] *** Joins: sunfish (chatzilla@moz-8DE7F965.dsl.dynamic.sonic.net)
[03:45:54] <Prabha-Srini> at the place of field type definition as &str
[03:46:41] <huon> Prabha-Srini: `struct Foo<'a> { x: int, y: &'a str }`
[03:46:45] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[03:46:51] *** Quits: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP) (Ping timeout)
[03:47:05] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:47:15] <huon> The compiler needs to be able to reason about the contained &str
[03:47:29] <huon> i.e. the lifetime needs to be exposed externally to the struct
[03:47:45] <huon> (which is exactly what the extra <'a> is doing)
[03:48:51] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:49:10] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Quit: Leaving)
[03:49:17] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:50:02] *** Joins: bvssvni (Mibbit@moz-C4579D6F.bb.online.no)
[03:50:24] *** Joins: rsolomo (Mibbit@moz-C351DAD4.sd.sd.cox.net)
[03:50:38] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[03:53:58] <Prabha-Srini> huon:Thank you
[03:54:01] <bvssvni> can I specify a lifetime to any generic parameter?
[03:55:13] <aatch> bvssvni, can you elaborate?
[03:55:22] *** Joins: dukeleto (dukeleto@moz-C083E0FB.ptld.qwest.net)
[03:55:51] <bvssvni> aatch: just saw this on reddit ' -> IoResult<&'a [u8]>'
[03:56:22] <aatch> bvssvni, well that `'a` should be defined elsewhere
[03:56:34] <bvssvni> normally I separate the lifetime in it's own generic parameter
[03:56:45] <aatch> bvssvni, you *have* to
[03:56:54] *** Joins: Jemaclus (jemaclus@moz-A0EB9A8E.hsd1.ca.comcast.net)
[03:56:57] <aatch> there's no option not to, unless your lifetime is 'static
[03:57:04] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:57:05] *** Quits: dukeleto (dukeleto@moz-C083E0FB.ptld.qwest.net) (Ping timeout)
[03:57:05] <aatch> which is special.
[03:57:07] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[03:57:22] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:57:32] <Yurume> (in the other words: 'static is the only globally named lifetime.)
[03:57:53] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:57:53] *** ChanServ sets mode: +ao dherman dherman
[03:58:39] *** Quits: Jemaclus (jemaclus@moz-A0EB9A8E.hsd1.ca.comcast.net) (Ping timeout)
[04:00:55] *** Quits: rsolomo (Mibbit@moz-C351DAD4.sd.sd.cox.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:01:42] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[04:03:57] <bvssvni> was thinking of this https://gist.github.com/bvssvni/8969541
[04:04:41] <aatch> bvssvni, yeah, that's fine
[04:04:49] <enix> So, I just used Cell for the first time. I still don't feel like I fully understand its purpose. Is the idea behind Cell to work around the borrow checker in places where its too conservative, or am I missing something deeper?
[04:04:53] <bvssvni> is the lifetime of a struct the intersection of the lifetime of the parameters?
[04:05:18] <aatch> enix, Cell *used* to be for that, but now is for internal mutability I believe
[04:05:32] <aatch> bvssvni, yes
[04:05:40] <bvssvni> aatch: AH
[04:05:53] *** Quits: isaacd (quassel@moz-6902374D.dhcp.oxfr.ma.charter.com) (Input/output error)
[04:05:55] <bvssvni> you won't believe how easier Rust become mentally for me now
[04:06:00] <aatch> That is exactly how lifetimes are treated, as intersection types.
[04:06:04] *** Joins: isaacd (quassel@moz-6902374D.dhcp.oxfr.ma.charter.com)
[04:06:05] <enix> aatch: so, for places where you want to be able to mutate something via an immutable pointer?
[04:06:30] <aatch> enix, yep. Not *too* common, but does come up occasionally
[04:06:39] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Input/output error)
[04:07:30] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[04:07:38] <bvssvni> I thought I had to choose to define a struct for values of for borrowed pointers :P
[04:07:44] <bvssvni> *or
[04:08:04] <aatch> bvssvni, nope, &'a T is a type all by itself
[04:08:06] <enix> aatch: The use I found was to get my code to work again after the recent closure borrow checking changes, but I was wondering if there was something deeper. Thanks for clarifying !
[04:08:43] <aatch> enix, yeah, Cell by itself only works with Pod (plain-old data) types and get/set copy the data around
[04:08:51] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[04:08:51] *** ChanServ sets mode: +ao pcwalton pcwalton
[04:09:38] <huon> enix, aatch: it is often used to get around the borrowck
[04:09:56] <huon> since &mut is hard/impossible to use in some instances
[04:10:16] *** Joins: lolmx (nodebot@F905B51D.B292A8B8.406B3504.IP)
[04:10:26] *** Quits: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net) (Ping timeout)
[04:10:27] <aatch> huon, true, but it used to be for dealing with moving out of closures stuff
[04:10:35] *** Parts: lolmx (nodebot@F905B51D.B292A8B8.406B3504.IP) ()
[04:10:46] <aatch> And isn't anymore.
[04:11:04] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[04:11:52] <huon> well, not Cell, since that's Pod-only :P
[04:13:11] <p1start> m;'
[04:13:14] <p1start> Oops
[04:13:30] *** Quits: dmac (Adium@moz-99EF2EE6.hfc.comcastbusiness.net) (Quit: Leaving.)
[04:13:52] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[04:14:26] *** Joins: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP)
[04:15:15] <Yurume> huon: would that a good argument for including Cell and/or RefCell to the prelude? :p
[04:15:45] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[04:16:12] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:17:02] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[04:18:21] *** Quits: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:18:35] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:18:35] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[04:25:35] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:30:18] *** Joins: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP)
[04:32:55] *** Joins: honza (honza@2F4A0D37.D725B7F3.2BF60B34.IP)
[04:35:35] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[04:35:51] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[04:36:02] *** Quits: lahwran (lahwran@lahwran.net) (Ping timeout)
[04:36:50] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[04:37:09] *** Joins: lahwran (lahwran@lahwran.net)
[04:39:44] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[04:39:53] *** Quits: claudiu_ (claudiu@moz-FB94486E.thefacebook.com) (Input/output error)
[04:40:18] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[04:41:28] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Quit: Leaving...)
[04:41:41] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[04:42:29] *** Joins: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net)
[04:43:27] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[04:44:00] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[04:44:11] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[04:44:11] *** ChanServ sets mode: +ao dherman dherman
[04:44:26] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[04:45:38] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[04:46:33] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[04:48:24] *** Quits: rdn (rdn@moz-3FCD2726.tk) (Ping timeout)
[04:49:15] *** Quits: jherms (Jonas@moz-C3C10EC4.jetstream.xtra.co.nz) (Ping timeout)
[04:51:40] *** Joins: rdn (rdn@moz-3FCD2726.tk)
[04:53:27] *** Joins: Blub\0 (wry@620605B3.71150E1A.237AE2BA.IP)
[04:53:43] *** Quits: Blub\w (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[04:55:47] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[05:05:28] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[05:08:52] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[05:08:54] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Client exited)
[05:09:11] <Heather> what means  error: unknown string escape: \r
[05:09:17] <Heather> wrong file format?
[05:09:44] *** Quits: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP) (Ping timeout)
[05:09:49] <ChrisMorgan> Heather: context?
[05:10:02] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:10:08] <Heather> ChrisMorgan: let msg = ~"With no FILE, or when FILE is -, read standard input.\n\n\
[05:10:18] <Heather> 161:76 error: unknown string escape: \r
[05:10:27] <ChrisMorgan> I don't see any \r there.
[05:10:38] <Heather> ChrisMorgan: I don't see any \r too
[05:10:44] <ChrisMorgan> What's the *full* string?
[05:10:58] <Heather> ChrisMorgan: 1 sec
[05:11:09] <ChrisMorgan> (Spans on string escapes are those of the string, not the escape in question.)
[05:11:23] <Heather> ChrisMorgan: https://github.com/uutils/coreutils/blob/master/base64/base64.rs#L161
[05:11:44] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[05:12:06] <ChrisMorgan> Heather: the error you are reporting makes no sense at all.
[05:12:26] <ChrisMorgan> (a) that string doesn't use \r, (b) \r is valid.
[05:12:26] <Heather> ChrisMorgan: I'm getting it
[05:12:41] <mcpherrin> is there a literal \r charachter after a \?
[05:12:49] <mcpherrin> and rust is choking on that?
[05:13:12] <Heather> after a\ ?
[05:13:23] <huon> Heather: are you on windows?
[05:13:33] <Heather> huhlig: yes
[05:13:40] <Heather> huon: ^
[05:13:50] <huon> sounds like a git config that is rewriting \n  to \r\n
[05:13:55] <mcpherrin> Try dos2unixing the file?
[05:14:03] <Yurume> turn off core.autocrlf :)
[05:14:04] <huon> so the trailing `\`'s are becoming `\<\r>`
[05:14:12] <ChrisMorgan> Eww. It does that?
[05:14:19] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:14:19] <Heather> rust doesn't supprt \r\n ?
[05:14:22] <Yurume> that's mostly because the auto-conversion from \n to \r\n, I've met that error in the past.
[05:14:23] <ChrisMorgan> (I mean, Rust does that? It breaks on \r\n!?)
[05:14:29] <huon> ChrisMorgan: apparently
[05:14:33] * ChrisMorgan confirms it
[05:14:59] <mcpherrin> ChrisMorgan: Well, given our "specialty" at working on windows... I wouldn't be surprsied
[05:15:01] <ChrisMorgan> That is extremely unpleasant.
[05:15:24] <Yurume> ChrisMorgan: it seems that \r is only problematic when it is in the string literal and follows \.
[05:15:31] <ChrisMorgan> And the only place it shows up is string literals there.
[05:15:32] <Heather> any ideas about hacky hack workaround?
[05:15:53] *** Joins: bananasaur (gmjosack@moz-CB7AA3B8.hsd1.ca.comcast.net)
[05:15:57] <Yurume> Heather: what text editor are you using now? and do you use git in the cmd.exe?
[05:16:08] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[05:16:12] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[05:16:14] <Heather> Yurume notepad++, yes
[05:16:22] <ChrisMorgan> Note that it says that \r an invalid escape—normally it'd say z is an invalid escape for "\z". It's formatting the character for printing and so it ends up \r, which is doubly misleading.
[05:16:31] <bananasaur> are there any snmp libraries for rust?
[05:16:40] <patpat> I've had \r problems too 
[05:16:41] <Yurume> I think notepad++ has a way to control the line ending: set it to UNIX.
[05:16:58] <bananasaur> i haven't been able to find any
[05:17:11] <Yurume> and look at the output of `git config --global -l`, if it doesn't include core.autocrlf, try `git config --global --set core.autocrlf off` (I think).
[05:17:19] <Heather> Yurume I wonder if there is way to avoid convertation? e.g. make rust to not fail there
[05:17:22] <bananasaur> it'd like to write an snmp trap server
[05:17:24] *** Quits: Prabha-Srini (Mibbit@603687B6.FB1F0523.2F9DE622.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:17:32] <ChrisMorgan> Heather: Git doing that will cause problems in other places also; multi-line strings without the trailing backslash will get CRLF between lines rather than LF.
[05:17:39] <Yurume> Heather: not easy to do that, it is a (sort of) bug of rustc.
[05:18:03] <Yurume> ChrisMorgan: seriously, that's as bad as FTP's automatic line ending conversion.
[05:18:07] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:18:37] <Yurume> (so-called "text mode" exists in many FTP clients)
[05:18:44] <Heather> I've got autocrlf = true, filemode = false
[05:18:46] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:19:02] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:19:03] <Yurume> then you need to set it false (or off? not sure)
[05:19:06] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:19:14] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:19:41] <Heather> Yurume I had no other problems with this config
[05:19:48] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[05:19:55] <Yurume> okay, it was indeed `git config --global core.autocrlf false`.
[05:19:55] <Heather> Yurume it helps me to keep compatibility with TFS
[05:20:21] <Yurume> then try `git config --local core.autocrlf false`, which only applies to the current repository.
[05:20:48] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:20:57] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:21:15] <Heather> Yurume bad solution... I think it's better to resolve it in rustc
[05:21:23] <Heather> or wait for resolve )
[05:21:28] <bananasaur> are there plans to add an asn.1 module to rust stdlib or would that be worth writing as a stand alone module?
[05:22:04] <Yurume> Heather: ah, of course it is a bug of rustc and it has to be correct in rustc, but I thought you are asking for workarounds.
[05:22:10] <mcpherrin> bananasaur: asn.1 should probably be standalone for now
[05:22:13] <Yurume> corrected*
[05:22:22] *** Parts: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) ()
[05:22:34] <Yurume> mcpherrin: does UDP work by now?
[05:22:35] <mcpherrin> bananasaur: we don't really have a complete story for the library ecosystem yet
[05:22:46] <mcpherrin> Yurume: uh, i'd assume so though I haven't tried :)
[05:22:48] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[05:22:57] <bananasaur> mcpherrin: do you know if anyone in the community is working on something? i've found it impossible to find anything for asn.1 or snmp
[05:23:09] <mcpherrin> bananasaur: No, I'm not aware of anybody doing either of those
[05:23:17] <Heather> Yurume yes but for sane woraround, not for editing my git config :D
[05:23:21] <Yurume> I remember my friend complained about the lack of partial or complete support for UDP some months ago
[05:23:23] <Heather> *workaround
[05:23:24] *** Joins: dmac (dmac@moz-94F55C3.hfc.comcastbusiness.net)
[05:23:34] <bananasaur> alright cool, maybe i'll take a stab at them. would be fun projects
[05:23:47] <Yurume> Heather: eh, it is just a repository-local config (stored in .git/config).
[05:24:15] <Yurume> but if you mind that, well, some preprocessing before the actual compilation?
[05:24:22] <mcpherrin> bananasaur: I'd really like to see a no-unsafe-code asn.1 implementation:  ASN.1 is notoriously hard to get memory safety right
[05:24:38] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:24:58] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:25:02] <Yurume> mcpherrin: slices! :) (and it is rather the ASN.1 BER/DER, ASN.1 has many other encoding rules.)
[05:25:09] <Heather> Yurume I see but I don't like that hack )
[05:25:12] <bananasaur> mcpherrin:  i'll see what I can do. I'm new to rust and looking for a project to get acquainted. 
[05:25:49] <mcpherrin> bananasaur: awesome!
[05:26:04] <mcpherrin> Yurume: So I hear :)
[05:26:34] <mcpherrin> fortunately I haven't had to implement an ASN1 parser yet
[05:26:35] *** Joins: aravindavk (aravinda@moz-BD0CADEE.redhat.com)
[05:26:38] <mcpherrin> but I just feel like the day is coming
[05:26:59] <Yurume> bananasaur: do you intend to implement all the SNMP versions? (1/2c/3)
[05:27:06] <enix> is anyone else seeing ICEs like: "Ok(task 'rustc' failed at 'lookup_item: id not found: 193389', /home/enix/code/rust/src/librustc/metadata/decoder.rs:92"?
[05:27:15] <enix> I don't have a particularly nice, small test case
[05:27:41] <Yurume> I remember v3 was hard to get it right (I had implemented my own C library for SNMP client/server for work)
[05:27:51] <bananasaur> Yurume: first pass likely just 1 and 2c since that's what I'm using at the moment. v3 later
[05:28:14] <Yurume> enix: are you linking to other crates?
[05:29:30] <huon> enix: sounds like you need to recompile those other crates
[05:30:40] <enix> Ah, ok
[05:31:04] <enix> that was it. thanks!
[05:31:48] *** Parts: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) ()
[05:32:37] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Quit: No Ping reply in 180 seconds.)
[05:32:57] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[05:33:09] <wycats> can haz review: https://github.com/mozilla/rust/pull/12231
[05:33:19] <Yurume> can "i" haz review? :p
[05:33:29] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[05:33:46] *** Joins: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[05:33:58] *** Quits: nattofriends (tsutsumi@moz-A9E340E1.fuqu.jp) (Ping timeout)
[05:34:41] *** Joins: nattofriends (tsutsumi@moz-A9E340E1.fuqu.jp)
[05:35:58] *** Joins: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP)
[05:36:04] <bananasaur> speaking of review, is this a good place to get feedback on code?
[05:36:18] <ChrisMorgan> wycats: c.f. SimonSapin's rust-url and https://github.com/mozilla/rust/issues/10707
[05:36:40] <mcpherrin> bananasaur: there's probably no better!
[05:36:47] <mcpherrin> other than maybe the mailing list and subreddit
[05:37:17] <bananasaur> oh the subreddit is active? I didn't even think to look there
[05:37:37] <wycats> ChrisMorgan: do any improvements to extra::url block on a total rewrite?
[05:37:38] <Yurume> bananasaur: /r/rust :)
[05:37:44] *** Quits: canhtak (canhtak@moz-4D8F0D46.wl.t.ulaval.ca) (Quit: canhtak)
[05:37:46] <mcpherrin> reddit/email/irc are the trifecta of rust communitying
[05:37:47] <Yurume> it has thousands of subscribers
[05:37:56] <ChrisMorgan> wycats: certainly not. I just wanted to advise you of it.
[05:38:04] <wycats> ChrisMorgan: makes total sense
[05:38:13] <wycats> I liked erickt's ragel-based url parser example
[05:38:18] <wycats> in his ragel branch
[05:39:50] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[05:42:07] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[05:43:44] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: Textual IRC Client: www.textualapp.com)
[05:43:53] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[05:45:13] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[05:47:18] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[05:49:33] *** Joins: wippler (Mibbit@13D9A622.4AEB1401.D99717FD.IP)
[05:50:36] *** Quits: wippler (Mibbit@13D9A622.4AEB1401.D99717FD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:50:45] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[05:50:50] *** Joins: gmjosack (gary@moz-CB7AA3B8.hsd1.ca.comcast.net)
[05:51:03] *** Parts: bananasaur (gmjosack@moz-CB7AA3B8.hsd1.ca.comcast.net) ()
[05:54:13] *** Quits: gentlefolk (chatzilla@moz-D195EAF9.cpe.teksavvy.com) (Quit: ChatZilla 0.9.90.1 [Firefox 27.0/20140127194636])
[05:56:42] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[05:56:45] *** Joins: untwisted (untwisted@moz-60D579DC.hsd1.ca.comcast.net)
[05:58:10] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Ping timeout)
[05:58:14] <bvssvni> safe state machines with phantom types  https://gist.github.com/bvssvni/8970459
[05:58:46] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[05:59:49] <mcpherrin> bvssvni: cool.
[06:00:56] *** Joins: synackse (jordyd@moz-29D809E0.seg37.ucf.edu)
[06:01:19] * ChrisMorgan has been agonising over whether to use phantom types for the low-level HTTP reader/writer things
[06:02:42] <Yurume> great!
[06:03:32] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[06:03:36] <Yurume> ChrisMorgan: for writers that would work, for readers you can't unless you give up the incremental parsing.
[06:03:41] * ChrisMorgan has not yet decided one way or the other, for the only way that will really guarantee safety is extremely awkward
[06:06:07] <ChrisMorgan> Yurume: sure you can. Something along the lines of .read(self) -> Result<(Data, Self), Either<IoError, NextState>>
[06:06:56] *** Quits: akhosrav (akhosrav@moz-3F7067A0.tukw.qwest.net) (Ping timeout)
[06:07:27] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[06:07:48] *** Joins: akhosrav (akhosrav@moz-3F7067A0.tukw.qwest.net)
[06:09:49] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Client exited)
[06:10:09] <ChrisMorgan> HTTP/1.1 procedure: Step one: reading the request line. Step two: reading the optional headers. Step three: reading the optional body. Step four: reading the optional trailer.
[06:10:10] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[06:10:33] <ChrisMorgan> HTTP/1.0: step four is dropped. HTTP/0.9: steps two and three are also dropped.
[06:11:01] <ChrisMorgan> HTTP/2.0: I have still to confirm the precise details.
[06:11:58] *** Quits: synackse (jordyd@moz-29D809E0.seg37.ucf.edu) (Ping timeout)
[06:11:58] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[06:12:17] *** Joins: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net)
[06:13:37] *** Joins: synackse (jordyd@moz-29D809E0.seg37.ucf.edu)
[06:17:05] <mcpherrin> ChrisMorgan: Ah, so I had assumed an incremental reader would be an iterator returning Enum { Request(&str), Header(&str, &str), BodyChunk(&[u8]) }
[06:17:30] <ChrisMorgan> mcpherrin: when it's in distinct phases, I don't see much point in doing it that way.
[06:18:02] <mcpherrin> ChrisMorgan: Yeah, it's an interesting idea. Hadn't thought of using phantom types for that.
[06:18:13] <mcpherrin> Will have to let it jumble around in my brain for a bit
[06:18:14] *** Quits: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:18:43] <bvssvni> it is nice to separate the state machine from the container
[06:19:42] <ChrisMorgan> I've been considering not just phantom types; also outright different types. That, in the end, is pretty much the same as phantom types.
[06:21:11] *** Joins: mr_pants (Mibbit@BD94D99F.67FC069F.4C15670D.IP)
[06:22:36] <mr_pants> 有中国的吗？
[06:22:52] *** Quits: voxpopuli (fanservice@71D59995.6A843466.689607DE.IP) (Ping timeout)
[06:23:42] <Kroisse> mr_pants: 아뇨
[06:24:30] <Kroisse> i dunno
[06:25:54] <mr_pants> 감사합니다
[06:27:52] <mr_pants> benchmarksgame.alioth.debian.org
[06:28:21] <mr_pants> Rust appears in this benchmark.
[06:30:25] <mr_pants> Will Rust 1.0 get 80% speed of c++?
[06:30:52] <huon> rust is faster than C++ on at least one of those benchmarks
[06:31:28] * ChrisMorgan wonders when dbaupp will become fallible
[06:31:46] <huon> ChrisMorgan: (it was previously "kibwen")
[06:32:04] * huon changed it, and is waiting for him to notice
[06:32:14] <huon> but I didn't tell you that.
[06:32:40] <ChrisMorgan> huon: "had the right to remain silent—blew it."
[06:33:08] <mr_pants> huon on average, Rust 0.9 is about 2.5~3x of c++.
[06:33:27] <mr_pants> only on this benchmark
[06:33:31] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[06:33:32] <Kroisse> pidigits benchmark seems weird
[06:33:41] *** Quits: heftig (heftig@moz-AD518734.dip0.t-ipconnect.de) (Quit: Quitting)
[06:33:45] <mcpherrin> pidigits is because gmp is really good
[06:33:53] <Kroisse> it's even slower than Perl or other slow language's one
[06:33:53] <mcpherrin> and our bigint library isn't
[06:34:06] <mcpherrin> Kroisse: all the other languages just have a binding to libgmp, except go
[06:34:08] <huon> Kroisse: http://www.reddit.com/r/rust/comments/1xcq1q/c_gcc_vs_rust_wtf/cfa5oyv
[06:34:17] <Kroisse> oh
[06:34:20] *** Quits: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com) (Ping timeout)
[06:34:26] <huon> Kroisse: https://github.com/mozilla/rust/pull/12209
[06:34:38] <huon> is fixing the major source of our pidigits woes
[06:34:39] <Kroisse> it seems unfair for Rust
[06:34:53] <ChrisMorgan> huon: do you intend to remain huon rather than dbaupp?
[06:34:55] <huon> mr_pants: mostly because our implementations aren't particularly optimised
[06:35:00] <huon> ChrisMorgan: on IRC yes
[06:35:17] <ChrisMorgan> And huon, not huonw.
[06:35:21] <huon> the confusion was annoying me
[06:35:29] <huon> ChrisMorgan: I'd prefer to be huon on GH
[06:36:08] <ChrisMorgan> huon: ask GitHub if they can do anything about it—perhaps they can tell you who has it and you can ask for it. I mean, it's a completely empty account.
[06:36:16] <mr_pants> huon so Rust 0.9 is more or less as the same speed of 1.0?
[06:36:18] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[06:36:53] <huon> mr_pants: 1.0 doesn't exist
[06:37:11] <mr_pants> 1.0 in the future
[06:37:12] <huon> ChrisMorgan: maybe. not sure if I can be bothered
[06:37:28] <Kroisse> 1.0 is in the far future
[06:37:31] <huon> mr_pants: the language itself has a few possibilities to be faster
[06:37:38] *** Joins: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com)
[06:37:38] <huon> the libraries have *many*
[06:37:43] *** Joins: Earnestly (earnest@119EDA00.66A37A5.BFD1ABFD.IP)
[06:38:11] <mr_pants> huon ok wish God speed.
[06:38:24] <mcpherrin> mr_pants: 1.0 is about backwards compatability, so I wouldn't count on performance guarantees for that release.  I do expect rust to be within 80% to 120% of C++'s performance though
[06:38:32] <mcpherrin> Within a few years, at least
[06:38:52] <mr_pants> mcpherrin ok
[06:39:11] <ChrisMorgan> huon: I tried reverse-engineering huon's gravatar (it's normally an MD5 of the email address), but that just yields 862438, no email address ☹
[06:39:48] <ChrisMorgan> i.e. you would need to contact GitHub about it if you wanted it
[06:39:50] *** Joins: Prabha-Srini (Mibbit@6241867C.7E25E86D.261E7448.IP)
[06:39:52] <mcpherrin> ChrisMorgan: ho-ho, found an md5 collision!
[06:40:07] <mcpherrin> well, half of one.
[06:40:08] <ChrisMorgan> mcpherrin: that's another interpretation of the data, and the less probable one.
[06:40:22] <huon> ChrisMorgan: heh, thanks :P
[06:41:01] *** Quits: mr_pants (Mibbit@BD94D99F.67FC069F.4C15670D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:41:05] *** Quits: ctangent (textual@moz-4B354EF9.hsd1.wa.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:41:21] <mcpherrin> ChrisMorgan: Reducing the search space to common webmail providers, you could probably brute force it on any reasonable "bitcoin mining gpu" machine people seem to have sitting around :)
[06:42:10] <ChrisMorgan> mcpherrin: given that I have found a plausible match which only requires the belief that they can use numbers instead of email addresses in the hash (e.g. if an email address isn't given, not sure if they allow that), the probability of its being a collision is very, very low.
[06:42:26] <ChrisMorgan> mcpherrin: people have done such things, you know. e.g. find the email address of someone you want to contact.
[06:42:41] <ChrisMorgan> Sneaky stuff. Good fun :D
[06:42:54] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[06:43:16] *** Joins: Ferreus (ferreus@moz-D7D31878.dip0.t-ipconnect.de)
[06:44:00] <patpat> The ocean ate the last of the land and poured into the smoking gulf, thereby
[06:44:00] <patpat> giving up all it had ever conquered. From the new-flooded lands it flowed
[06:44:00] <patpat> again, uncovering death and decay; and from its ancient and immemorial bed it
[06:44:00] <patpat> trickled loathsomely, uncovering nighted secrets of the years when Time was
[06:44:00] <patpat> young and the gods unborn. Above the waves rose weedy remembered spires. The
[06:44:00] <patpat> moon laid pale lilies of light on dead London, and Paris stood up from its damp
[06:44:02] <patpat> grave to be sanctified with star-dust. Then rose spires and monoliths that were
[06:44:04] <patpat> weedy but not remembered; terrible spires and monoliths of lands that men never
[06:44:06] <patpat> knew were lands...
[06:44:07] <patpat> what!
[06:44:39] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[06:44:41] <ChrisMorgan> patpat: something went wrong in the runtime. How did you do it?
[06:45:09] <patpat> tried to run a recursive function which didn't terminate properly
[06:45:13] <Yurume> patpat: that's a pretty way to fail :)
[06:45:16] <patpat> haha
[06:45:18] <ChrisMorgan> Yep, that'll do it.
[06:45:50] <Yurume> SPOILER: https://github.com/mozilla/rust/blob/master/src/libstd/rt/util.rs#L91
[06:46:54] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Quit: zztr)
[06:48:47] *** Joins: dukeleto (dukeleto@moz-C083E0FB.ptld.qwest.net)
[06:49:36] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[06:49:50] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[06:51:29] *** Quits: dukeleto (dukeleto@moz-C083E0FB.ptld.qwest.net) (Ping timeout)
[06:53:08] *** Joins: dukeleto (dukeleto@moz-C083E0FB.ptld.qwest.net)
[06:54:00] <Prabha-Srini> Is there anyway to print the unspecified type of  a variable ( let mut x=4.9) in Rust?
[06:54:14] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Client exited)
[06:54:17] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[06:54:35] *** Joins: iDolfHatler (idolf@moz-47812C15.static.bcbnet.dk)
[06:55:11] *** Joins: dmac1 (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[06:55:25] <bvssvni> Prabha-Srini: do you mean println!("{}", 4.9); ?
[06:55:42] *** Quits: dmac1 (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Quit: Leaving.)
[06:55:53] *** Quits: dukeleto (dukeleto@moz-C083E0FB.ptld.qwest.net) (Ping timeout)
[06:57:03] <ChrisMorgan> Prabha-Srini: one easy way is to put in the wrong thing and let the compiler tell you what it should be. e.g. `let mut x: () = 4.9;`
[06:58:13] *** Joins: dmac1 (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[06:59:24] <bvssvni> ChrisMorgan: that is a nice trick
[06:59:37] <huon> bvssvni: *horrible hack
[06:59:38] <huon> :P
[07:00:07] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[07:00:32] *** Quits: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net) (Input/output error)
[07:00:35] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[07:00:36] <ChrisMorgan> Prabha-Srini: I presume http://stackoverflow.com/questions/21747136/how-do-i-print-the-type-of-variable-in-rust is you?
[07:00:52] *** Joins: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net)
[07:01:11] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[07:01:26] <Yurume> ChrisMorgan: or x.method_that_does_not_exist() or x.field_that_does_not_exist.
[07:02:21] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[07:02:37] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[07:03:26] *** Joins: claudiu_ (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP)
[07:03:46] *** Joins: dmac2 (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[07:03:46] *** Quits: dmac1 (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Connection reset by peer)
[07:04:06] *** Quits: iDolfHatler (idolf@moz-47812C15.static.bcbnet.dk) (Ping timeout)
[07:04:18] *** Quits: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net) (Ping timeout)
[07:04:31] <Prabha-Srini> bvssvni:I meant is there a way to print the type of x as int,float,etc.
[07:05:08] <ChrisMorgan> Prabha-Srini: could you please specify more exactly what you mean? Give examples of what you want.
[07:05:52] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Quit: Lost terminal)
[07:05:54] <Kroisse> it's not possible because its type is really unspecifed
[07:05:59] <gmjosack> When setting up a new repo on github is there any .gitignore that is particularly well suited for rust? They don't seem to have a rust specific one.
[07:06:03] *** Joins: barosl (barosl@34F62860.E551553C.7544CABF.IP)
[07:06:27] <ChrisMorgan> gmjosack: the conventions are not yet strong enough for such a thing to be feasible.
[07:06:28] <Kroisse> 4.9 can become a float32, float64, or others.
[07:06:39] <huon> Kroisse: only f32 and f64
[07:06:47] <gmjosack> ChrisMorgan: thanks
[07:06:47] <Kroisse> thanks
[07:06:48] <ChrisMorgan> Prabha-Srini: as it is, I really don't understand what you want or why.
[07:06:49] *** Quits: Kxepal (Miranda@moz-9E323D1A.pppoe.mtu-net.ru) (Quit: Kxepal)
[07:06:59] <Yurume> Kroisse: there is no f80 :)
[07:07:08] *** Joins: Kxepal (Miranda@moz-9E323D1A.pppoe.mtu-net.ru)
[07:07:10] <Yurume> Prabha-Srini: for the debugging purpose?
[07:07:19] <ChrisMorgan> (It's valuable to know why as newcomers to a language or library will often ask the wrong questions—knowing your motivation allows us to offer better ways of doing things.)
[07:07:57] <Prabha-Srini> ChrisMorgan:Yes, that is me.  I wanted to know if 4.9 is stored as float or double hence tried having to print out the type
[07:08:33] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[07:08:57] *** Joins: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP)
[07:08:59] <Yurume> Prabha-Srini: without a further context, 4.9 is ambiguous. when some other codes constrain it to be f32 (float in C) or f64 (double in C) then 4.9 would be of that type.
[07:09:20] <Yurume> if you really want to constrain the type of 4.9 without other codes, you should use 4.9f32 or 4.9f64.
[07:09:40] <ChrisMorgan> But f64 is the default.
[07:09:45] <huon> ChrisMorgan: but only somtimes
[07:10:03] <Yurume> specificially when?
[07:10:04] <Kroisse> and it's same for integer constants
[07:10:07] <huon> rusti: 4.9.eq(&4.9)
[07:10:10] -rusti- pastebinned 11 lines of output: http://ix.io/atH
[07:10:32] <ChrisMorgan> huon: I mean that if there are no bounds which constrain it to f32 or f64 it will be f64. But yes, there are ways to baffle it.
[07:10:35] <huon> Yurume: not really, sure... I know it definitely fails when calling methods impl'd for both f32 and f64 directly on a literal
[07:10:40] <huon> that may be the only case though
[07:11:10] <Prabha-Srini> ChrisMorgan:Thank you 
[07:11:19] <Yurume> rusti: let x = 4.9; let y = x + 5.3; y.does_not_exit;
[07:11:20] -rusti- <anon>:10:39: 10:54 error: attempted access of field `does_not_exit` on type `<generic float #0>`, but no field with that name was found
[07:11:20] -rusti- <anon>:10         let x = 4.9; let y = x + 5.3; y.does_not_exit;
[07:11:20] -rusti-                                                 ^~~~~~~~~~~~~~~
[07:11:20] -rusti- error: aborting due to previous error
[07:11:20] -rusti- application terminated with error code 101
[07:11:21] <Yurume> exist*
[07:11:37] <Yurume> rusti: let x = 4.9; x.does_not_exist;
[07:11:38] -rusti- <anon>:10:22: 10:38 error: attempted access of field `does_not_exist` on type `<generic float #0>`, but no field with that name was found
[07:11:38] -rusti- <anon>:10         let x = 4.9; x.does_not_exist;
[07:11:38] -rusti-                                ^~~~~~~~~~~~~~~~
[07:11:38] -rusti- error: aborting due to previous error
[07:11:38] -rusti- application terminated with error code 101
[07:12:05] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:12:22] <Prabha-Srini> Yurume:Thank you
[07:12:33] <Kroisse> rusti: let x = 4.9; println!("{}", x);
[07:12:36] -rusti- pastebinned 7 lines of output: http://ix.io/a6T
[07:12:41] <Yurume> ChrisMorgan: hmm, do you have an example code? even with the absence of trait resolution it doesn't seem to get inferred to f64.
[07:12:57] <p1start> https://gist.github.com/P1start/538ca44bf3b827ca2d8a shows that, at least for me, floats default to f64
[07:12:58] <huon> rusti: let x = 4.9; x + 5.3
[07:13:00] -rusti- 10.2f64
[07:13:26] <ChrisMorgan> rusti: 4.9
[07:13:28] -rusti- 4.9f64
[07:14:09] <Kroisse> rusti: let x = 4.9; println!("{:?}", x);
[07:14:12] -rusti- pastebinned 7 lines of output: http://ix.io/a6T
[07:14:15] <Yurume> aha, so the resolution precedes the automatic conversion from the generic float without any bounds to f64.
[07:14:52] <Kroisse> that's weird...
[07:15:03] *** Joins: blaenk (blaenk@moz-D046F6D6.lsanca.dsl-w.verizon.net)
[07:15:03] *** Joins: eddyb (eddy@688E9026.F7C96DA2.FCAAE698.IP)
[07:16:11] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:16:50] <ChrisMorgan> Kroisse: drop the trailing semicolon. rusti is running an old rust exhibiting that ICE.
[07:16:52] <huon> rusti: let x = 4.9; println!("{:?}", x)
[07:16:53] -rusti- 4.9f64
[07:16:53] -rusti- ()
[07:17:05] <ChrisMorgan> rusti: version
[07:17:07] -rusti- "rustc 0.10-pre (4cd555d 2014-01-24 03:28:15 -0500)"
[07:17:25] <Kroisse> aha
[07:17:36] <Kroisse> ChrisMorgan: thanks :)
[07:17:44] <Yurume> the definition of the word "old" in #rust is generally more than one week ago.
[07:17:51] <Yurume> "more than one week ago"*
[07:18:15] <ChrisMorgan> One *week*?
[07:18:37] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:19:07] <bvssvni> I was doing other stuff and came back after two weeks :P
[07:19:17] <Yurume> ChrisMorgan: well, accounting the nightlies and other libraries depend on the nightlies.
[07:19:30] *** Joins: p1start1 (rewi@moz-A082F561.adsl.xtra.co.nz)
[07:19:31] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Quit: Leaving.)
[07:20:00] <ChrisMorgan> The last two weeks have been very eventful. Several times, one day old was old.
[07:20:01] *** p1start1 is now known as p1start
[07:20:41] <huon> compiler improvements are discrete, so one second was old at some points :P
[07:20:58] <ChrisMorgan> huon: sure, sure.
[07:22:39] *** Quits: synackse (jordyd@moz-29D809E0.seg37.ucf.edu) (Ping timeout)
[07:23:03] *** Quits: FreeFull (freefull@moz-1883929A.as13285.net) (Quit: )
[07:24:51] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[07:25:31] *** Quits: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP) (Ping timeout)
[07:26:36] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[07:33:02] <pzol> Yurume LOL
[07:33:14] *** flaper87|afk is now known as flaper87
[07:34:00] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[07:34:47] *** Quits: sunfish (chatzilla@moz-8DE7F965.dsl.dynamic.sonic.net) (Ping timeout)
[07:34:57] *** Joins: bkircher (bkircher@moz-8302924D.adsl.alicedsl.de)
[07:35:42] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[07:35:55] *** Quits: StarLight (StarLight@moz-ABB1AF67.dynamic.avangarddsl.ru) (Connection reset by peer)
[07:37:30] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[07:40:35] *** Quits: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com) (Ping timeout)
[07:41:18] *** Joins: StarLight (StarLight@moz-22315840.dynamic.avangarddsl.ru)
[07:42:05] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Input/output error)
[07:42:30] *** Joins: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com)
[07:42:46] *** Quits: tiernjo (quassel@moz-21A5F23D.ks.ks.cox.net) (Ping timeout)
[07:43:38] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[07:43:52] *** Quits: Moor (Moor@moz-C04C27D8.hsd1.ca.comcast.net) (Ping timeout)
[07:45:08] *** Quits: bkircher (bkircher@moz-8302924D.adsl.alicedsl.de) (Quit: Leaving...)
[07:45:20] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[07:45:48] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[07:46:10] *** Joins: Moor (Moor@moz-C04C27D8.hsd1.ca.comcast.net)
[07:48:29] *** Quits: pzol_ (pzol@86821BC.DEB41A6D.AADC76B.IP) (Quit: ZNC - http://znc.in)
[07:49:58] *** Joins: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com)
[07:50:03] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Quit: Leaving.)
[07:52:53] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:53:48] *** Joins: jamil_1 (kvirc@59CEFC5A.28441180.3D6CCABD.IP)
[07:53:51] *** Quits: sigma1 (sigma@moz-B2E77065.range86-184.btcentralplus.com) (Quit: Leaving.)
[07:56:55] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[07:57:19] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[07:57:31] *** Quits: Earnestly (earnest@119EDA00.66A37A5.BFD1ABFD.IP) (Ping timeout)
[07:58:06] *** Joins: nkoep (nik@moz-D1EC571B.pool.mediaways.net)
[07:58:32] *** Quits: untwisted (untwisted@moz-60D579DC.hsd1.ca.comcast.net) (Ping timeout)
[07:59:35] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[07:59:40] *** Joins: fabiand (fabiand@moz-AC832C6B.adsl.alicedsl.de)
[08:00:09] *** Quits: fabiand (fabiand@moz-AC832C6B.adsl.alicedsl.de) (Quit: Verlassend)
[08:00:19] *** Quits: marshall_law (marshall@BCC5EC56.B2070AF7.505F6A0C.IP) (Ping timeout)
[08:01:00] *** Joins: marshall_law (marshall@BCC5EC56.B2070AF7.505F6A0C.IP)
[08:01:30] *** Quits: pilf (pilf@44BF5D7D.B6A69891.5411983D.IP) (Quit: pilf)
[08:01:52] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[08:02:02] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[08:02:09] *** Quits: kvanb (kvanb@EE387284.30385D4F.1611EE05.IP) (Quit: kvanb)
[08:02:32] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[08:02:48] *** Joins: fabiand (fabiand@moz-AC832C6B.adsl.alicedsl.de)
[08:04:09] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[08:04:26] <carter> acrichto: great meeting yah today!
[08:04:31] <ChrisMorgan> Bah. After compiling for ages and ages it gets to oxidising stage1 rustc and fails in linking, "cannot find -lcompiler-rt". (It built that earlier in the process, but that doesn't seem to have been enough.) So then I start it again and it starts from stage0 again ☹
[08:04:34] <carter> (and the other s too)
[08:05:03] *** Joins: dukeleto (dukeleto@moz-C083E0FB.ptld.qwest.net)
[08:05:16] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[08:05:39] <huon> ChrisMorgan: cross compiling?
[08:06:48] *** Quits: dukeleto (dukeleto@moz-C083E0FB.ptld.qwest.net) (Ping timeout)
[08:06:50] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[08:06:50] *** ChanServ sets mode: +ao dherman dherman
[08:06:51] <ChrisMorgan> huon: no.
[08:06:57] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[08:07:13] <ChrisMorgan> huon: it simply hadn't copied it. (The first thing it did in the rerun was "cp: x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/libcompiler-rt.a"
[08:07:16] <ChrisMorgan> .)
[08:07:23] <huon> weird
[08:08:36] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Ping timeout)
[08:08:44] *** Joins: Jesse_ (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[08:09:17] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[08:09:21] *** Joins: bluz (blaz@moz-A965956C.torservers.net)
[08:09:23] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[08:09:50] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[08:10:30] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[08:10:37] *** Quits: ski (ski@moz-E5796727.student.chalmers.se) (Ping timeout)
[08:10:51] *** Quits: Jesse_ (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Connection reset by peer)
[08:11:50] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[08:11:57] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[08:12:53] *** Joins: kulakowski (George@moz-E17D6299.dsl.pltn13.sbcglobal.net)
[08:12:59] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[08:12:59] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[08:13:19] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[08:13:23] *** Joins: marianoguerra (marianogue@moz-2A143238.dip0.t-ipconnect.de)
[08:13:31] *** Quits: Soft (soft@moz-EC8D39F.yok.fi) (Ping timeout)
[08:13:43] *** Quits: Blaze_ (tuomino2@moz-785A3407.org.aalto.fi) (Ping timeout)
[08:14:43] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[08:15:04] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: WeeChat 0.4.2)
[08:15:06] *** Joins: ski (ski@moz-E5796727.student.chalmers.se)
[08:16:43] *** Quits: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP) (Ping timeout)
[08:17:07] *** Quits: veddan (viktor@moz-C79BC80B.csbnet.se) (Ping timeout)
[08:17:08] *** Joins: Blaze_ (tuomino2@moz-785A3407.org.aalto.fi)
[08:17:27] *** Joins: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP)
[08:17:57] *** Quits: ski (ski@moz-E5796727.student.chalmers.se) (Ping timeout)
[08:18:49] *** Joins: veddan (viktor@moz-C79BC80B.csbnet.se)
[08:19:13] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[08:20:04] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:23:02] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[08:23:45] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Client exited)
[08:24:05] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[08:24:32] *** Joins: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP)
[08:24:36] *** Joins: victorporof (victorporo@8F761026.B5EF4AF6.E96CA9D8.IP)
[08:25:34] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[08:25:47] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[08:25:57] *** Joins: ski (ski@moz-E5796727.student.chalmers.se)
[08:26:20] *** Quits: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP) (Ping timeout)
[08:28:15] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[08:28:41] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[08:28:45] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[08:29:06] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[08:29:30] *** Joins: twi (Adium@731F9C26.5285AEC1.54B829D6.IP)
[08:30:44] *** Joins: iDolfHatler (idolf@moz-6B6C49D7.rhave.dk)
[08:34:47] *** Joins: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[08:36:21] *** Joins: alkino_ (alkino@moz-2677AA92.w90-46.abo.wanadoo.fr)
[08:36:43] *** Quits: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[08:38:04] *** Quits: astroch (astroch@moz-C18802C0.dhcp.embarqhsd.net) (Connection reset by peer)
[08:39:12] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[08:41:03] *** Quits: onelson (owen@18CF7301.95770028.5B6BFE7D.IP) (Ping timeout)
[08:44:23] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[08:44:48] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[08:46:07] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[08:46:47] <Mowah> what should I use as a mutable shared_ptr?
[08:47:23] <huon> Mowah: http://static.rust-lang.org/doc/master/sync/struct.MutexArc.html
[08:48:10] <Yurume> Mowah: or a combination of Rc plus RefCell if you won't share it across different tasks.
[08:48:49] *** Quits: twi (Adium@731F9C26.5285AEC1.54B829D6.IP) (Quit: Leaving.)
[08:49:24] <huon> oh, yeah
[08:49:31] *** Quits: nkoep (nik@moz-D1EC571B.pool.mediaways.net) (Client exited)
[08:49:33] * huon is dumb
[08:49:37] <Mowah> I'll investigate, thx
[08:50:11] <Yurume> https://github.com/mozilla/rust/pull/11578 did this get merged? (I've just updated rust-nightly) hurray!
[08:50:27] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[08:51:28] <pzol> What's a UChar *ptr; in rust?
[08:52:00] *** Quits: kanru (kanru@moz-99690620.hinet-ip.hinet.net) (Ping timeout)
[08:52:19] <Yurume> depends on what is UChar.
[08:52:56] <Yurume> it might or might be *char, but it is generally safe to be explicit about such typedefs: I suspect UChar is likely to be either u16 or u32 and thus that should be *u16 or *u32.
[08:52:57] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Input/output error)
[08:53:01] <pzol> Yurume right... from ICU
[08:54:13] *** Quits: eddyb (eddy@688E9026.F7C96DA2.FCAAE698.IP) (Ping timeout)
[08:54:16] <Yurume> hmm, it is a bit involved since ICU UChar can be either u16 or u32 depending on the builds.
[08:54:40] <pzol> typedef int32_t UChar32;
[08:54:50] *** Quits: patpat (patpat@moz-1599AAE4.as13285.net) (Ping timeout)
[08:55:07] <Yurume> pzol: https://ssl.icu-project.org/apiref/icu4c/umachine_8h_source.html#l00269
[08:55:20] <Yurume> that's not UChar but UChar32
[08:55:27] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[08:55:41] <pzol> ummm
[08:56:01] <Yurume> maybe you need to use only UChar32 to get the build-independent behavior...
[08:56:07] <Yurume> not sure if that's possible
[08:56:15] <pzol> Yurume yep, I think so
[08:56:40] <pzol> typedef int32_t UChar32;
[08:57:32] <pzol> so ~[u32] ???
[08:57:41] <Yurume> pzol: hmm, more thorough inspection gives that ICU intends UChar to be u16
[08:58:13] <pzol> so in Rust it would be ~[u16], right?
[08:58:17] <Yurume> UCHAR_TYPE is only there for broken compilers that (say) does not define __CHAR16_TYPE__ while having char16_t anyway
[08:58:20] <Yurume> yes
[08:58:36] *** Joins: Soft (soft@moz-EC8D39F.yok.fi)
[08:58:37] <Yurume> and more importantly: #define U_SIZEOF_UCHAR 2 :)
[08:59:08] <Yurume> pzol: maybe you'd better to have a type definition anyway
[08:59:15] <pzol> ??
[08:59:23] <Yurume> pub type UChar = u16;
[08:59:44] <pzol> thanks :) that'll be tough... embedding icu in Rust ;)
[09:00:01] *** Joins: heftig (heftig@moz-D746319F.unitymedia.biz)
[09:00:05] *** Joins: eddyb (eddy@688E9026.F7C96DA2.FCAAE698.IP)
[09:00:17] *** Quits: ktt3ja (ktt3ja@moz-85E2770C.hsd1.va.comcast.net) (Quit: Leaving)
[09:00:35] <Yurume> since unlike char we wouldn't have any indication what u16 is, so documenting it helps.
[09:00:44] *** Joins: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP)
[09:00:46] *** Joins: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de)
[09:00:59] <Yurume> (and it helps the documentation since you can easily say that "see the ICU4C documentation in doubt" :)
[09:01:13] <Yurume> self-documenting it by the type definition helps, I meant*
[09:01:57] <pzol> :D
[09:02:43] *** Quits: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com) (Client exited)
[09:03:11] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[09:04:33] *** Joins: alexherbo2 (alexherbo2@moz-2464876C.w90-35.abo.wanadoo.fr)
[09:06:04] *** Joins: mouse (mouse@moz-373942D2.dhcp.yndx.net)
[09:06:05] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[09:07:09] *** Quits: kulakowski (George@moz-E17D6299.dsl.pltn13.sbcglobal.net) (Ping timeout)
[09:07:24] *** Joins: pilf (pilf@8FA95888.1A994CBC.4B228AD7.IP)
[09:08:00] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[09:08:18] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[09:08:58] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[09:11:14] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[09:11:19] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[09:16:08] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:16:25] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[09:17:03] *** Joins: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com)
[09:17:48] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[09:18:28] *** Quits: iDolfHatler (idolf@moz-6B6C49D7.rhave.dk) (Ping timeout)
[09:18:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:18:39] *** Quits: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com) (Client exited)
[09:18:55] *** Quits: alkino_ (alkino@moz-2677AA92.w90-46.abo.wanadoo.fr) (Ping timeout)
[09:20:34] *** Joins: agarnier (agarnier@B49B97BC.DF317A48.8108A302.IP)
[09:21:01] *** Quits: alexherbo2 (alexherbo2@moz-2464876C.w90-35.abo.wanadoo.fr) (Quit: WeeChat 0.4.3-dev)
[09:21:17] *** Joins: twi (Adium@77A24E73.95CFB19C.A622856D.IP)
[09:21:38] *** Quits: twi (Adium@77A24E73.95CFB19C.A622856D.IP) (Quit: Leaving.)
[09:21:47] *** Joins: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP)
[09:22:07] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[09:22:28] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[09:23:19] *** Joins: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP)
[09:24:09] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[09:25:11] *** Quits: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP) (Ping timeout)
[09:27:45] *** Joins: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP)
[09:29:20] *** Quits: blaenk (blaenk@moz-D046F6D6.lsanca.dsl-w.verizon.net) (Quit: Leaving)
[09:31:20] *** Joins: Zr40 (zr40@moz-CCFEAB92.adsl.xs4all.nl)
[09:34:29] *** Joins: rca (rcatolino@moz-CFD59DD6.adsl.proxad.net)
[09:35:20] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[09:35:36] *** Joins: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[09:37:00] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[09:37:18] *** Quits: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[09:40:33] *** Joins: eibwen (kvirc@moz-2A1E42F9.dip0.t-ipconnect.de)
[09:41:08] *** Joins: ricepuddin (graham@moz-19729251.wlan.ic.ac.uk)
[09:43:56] *** Joins: rca_ (rcatolino@moz-FC4DC909.adsl.proxad.net)
[09:44:37] *** Quits: rca (rcatolino@moz-CFD59DD6.adsl.proxad.net) (Ping timeout)
[09:45:48] <pzol> what do I need to do so that rust links dylib libraries in /usr/local/lib?? I do #[link(name="libicuuc")] but that gives: ld: library not found for -l/usr/local/lib/libicuuc.dylib
[09:46:50] *** Quits: ross (r@moz-35D0ADAB.clr.io) (Ping timeout)
[09:47:04] *** Joins: ross (r@moz-35D0ADAB.clr.io)
[09:51:13] *** Joins: alexherbo2 (alexherbo2@moz-2464876C.w90-35.abo.wanadoo.fr)
[09:52:00] <Zr40> iirc -l doesn't accept paths so I'm not sure how that's going to work
[09:52:11] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[09:53:11] <Yurume> pzol: give rustc `-L /usr/local/lib` flag and use #[link(name="icuuc")], I thik
[09:53:12] <Yurume> think*
[09:54:58] *** Quits: alexherbo2 (alexherbo2@moz-2464876C.w90-35.abo.wanadoo.fr) (Ping timeout)
[09:54:58] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[09:55:04] *** Quits: mixi (mixi@moz-DBD8904A.org) (Input/output error)
[09:55:09] *** Joins: alexherbo2 (alexherbo2@moz-9AE52DD7.w90-3.abo.wanadoo.fr)
[09:55:15] *** Joins: jamil_1|2 (kvirc@4E39E67A.C68948F3.F6DA161.IP)
[09:55:17] *** Joins: mixi (mixi@moz-DBD8904A.org)
[09:55:36] *** Quits: jamil_1 (kvirc@59CEFC5A.28441180.3D6CCABD.IP) (Ping timeout)
[09:57:26] <pzol> Yurume you're right, as usual ;) actually extra::unicode already defines that dependency!
[09:57:33] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[09:57:38] *** Joins: igork (igork@moz-F6DD8476.broadband.corbina.ru)
[09:57:47] <pzol> my error was the lib in the name 
[09:58:17] <Yurume> pzol: since it is passed as like -licuuc to the linker, and the linker resolves that into libicuuc.{a,so,dylib} etc.
[09:58:43] <pzol> Yurume now I know that ;) thanks!
[09:58:44] <Yurume> there is some library with a cute name like libiberty
[09:58:56] <Yurume> (with an argument of -liberty...)
[09:59:20] *** jorendorff_away is now known as jorendorff
[10:00:08] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[10:01:04] *** Quits: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[10:01:08] <pzol> :D
[10:01:16] *** Joins: andre (andre@CA528A4A.45A4338E.8EE27E6.IP)
[10:01:25] <pzol> acutally extra::unicode is undocumented...
[10:02:01] *** Quits: ricepuddin (graham@moz-19729251.wlan.ic.ac.uk) (Ping timeout)
[10:02:20] *** Joins: ricepuddin (graham@moz-19729251.wlan.ic.ac.uk)
[10:02:43] *** Quits: alexherbo2 (alexherbo2@moz-9AE52DD7.w90-3.abo.wanadoo.fr) (Ping timeout)
[10:03:27] <marianoguerra> how hard is it to make bindings for a rust library?
[10:03:31] *** Joins: patpat (patpat@moz-7F753D82.gold.ac.uk)
[10:03:41] <marianoguerra> let's say I want to write a python binding for a rust library?
[10:03:52] <marianoguerra> change python for java/ruby/node/whatever
[10:04:20] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Input/output error)
[10:04:20] <Yurume> marianoguerra: many boilerplates can be generated via codegen, but wrapping them into an idiomatic Rust API takes time.
[10:05:00] <Yurume> ah you meant the inverse...
[10:05:31] <marianoguerra> Yurume: yep
[10:06:02] <Yurume> okay, that actually is a problem still being solved: you can safely run a function written in the subset of Rust as like C function, otherwise you'll have some problem.
[10:06:18] <eibwen> it should be at least as easy as writing a * binding for a C library
[10:06:45] <Yurume> marianoguerra: for the former, see http://brson.github.io/2013/03/10/embedding-rust-in-ruby/ (some specifics have been changed though)
[10:07:32] <pzol> hmmm in the sources there is a libextra/unicode.rs but use extra::unicode; says unresolved import: there is no `unicode` in `extra`
[10:07:51] <marianoguerra> Yurume: as long as it doesn't use the runtime/GC should be easy?
[10:07:54] <marianoguerra> that's the subset?
[10:07:58] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[10:08:00] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[10:08:15] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[10:08:16] *** ChanServ sets mode: +ao dherman dherman
[10:08:18] <Yurume> marianoguerra: it would be somewhat involved, and not a general solution anyway.
[10:08:35] <Yurume> it may be usable for "delegating" hard work to C or Rust though
[10:08:37] *** Joins: nkoep (nik@moz-D1EC571B.pool.mediaways.net)
[10:08:58] <Yurume> pzol: it's a private mod, and more importantly, it is guarded with #[cfg(unicode)]: https://github.com/mozilla/rust/blob/master/src/libextra/lib.rs#L68
[10:09:02] <marianoguerra> Yurume: yes, I'm thinking that if rust is easy to bind from dynlangs then it will grow faster
[10:09:30] <marianoguerra> I mean, you have to optimize some python code and it's easier to integrate with rust, a lot of people will choose
[10:09:33] <marianoguerra> rust
[10:09:36] <pzol> aaaa ... can I override that ?
[10:09:38] <Yurume> might or might not be true ;)
[10:09:47] *** Joins: Jesse_ (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[10:09:58] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Connection reset by peer)
[10:09:59] <Yurume> pzol: does ICU provide a strict superset of extra::unicode anyway?
[10:10:04] <Yurume> doesn't*
[10:10:08] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[10:10:12] <marianoguerra> Yurume: sure, but writing C is not something python coders like, it's something sometimes you have to do
[10:10:15] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Ping timeout)
[10:10:25] <marianoguerra> and if you can use a safer language...
[10:10:27] <huon> marianoguerra: you can (mostly) use Rust without starting a runtime and then it's like a more awesome C
[10:10:28] <marianoguerra> just an idea
[10:10:32] <Yurume> marianoguerra: in fact, Python already has some neat thing like Cython, which limits the usefulness of bare C/Rust/whatever codes
[10:10:38] <pzol> Yurume no... but it provides some useful declarations I don't want to repeat unless necessary
[10:10:38] <huon> however I don't know of any *good* examples of doing it
[10:10:49] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[10:10:49] <huon> but people are using Rust in Ruby *in production*
[10:10:55] <Yurume> huon: OpenDNS?
[10:11:32] <huon> Yurume: wycats (skylight, iirc)
[10:11:40] <Yurume> oh...
[10:12:06] *** Quits: Jesse_ (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[10:13:06] *** Joins: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP)
[10:13:25] *** Quits: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[10:13:29] <Yurume> pzol: hmm, the API itself is so experimental that has been deactivated for half an year: https://github.com/mozilla/rust/pull/8222
[10:13:50] <pzol> Yurume ok,... I'll write my own thing from scratch
[10:13:59] <Yurume> you'd better copy the code and start the new library from that
[10:14:24] <Yurume> there is not much licensing problem unless you prefer the public domain...
[10:15:07] <pzol> Yurume yeah, will do that
[10:15:10] <huon> it probably doesn't compile
[10:15:47] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[10:15:52] <Yurume> huon: if that is the case, why does it remain in libextra?
[10:16:06] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[10:16:08] <Yurume> Unicode identifiers?
[10:16:18] <Yurume> (for the use in libsyntax)
[10:17:15] *** Quits: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP) (Quit: Leaving)
[10:17:24] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:17:54] <huon> Yurume: no idea
[10:18:16] <huon> it's not used in the compiler
[10:19:07] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:19:22] *** Joins: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net)
[10:19:57] *** Quits: claudiu_ (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP) (Ping timeout)
[10:22:32] *** Joins: doener (bs@moz-AA189A5A.unitymedia.biz)
[10:23:53] <pzol> :( how do convert a ~str to a ~[char]? 
[10:24:06] *** Joins: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP)
[10:24:30] *** Quits: Prabha-Srini (Mibbit@6241867C.7E25E86D.261E7448.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:24:51] <huon> rusti:  (~"foo").chars().to_owned_vec()
[10:24:54] -rusti- ~['f', 'o', 'o']
[10:25:40] <pzol> huon thanks!
[10:25:54] *** Quits: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP) (Ping timeout)
[10:26:59] *** Quits: jamil_1|2 (kvirc@4E39E67A.C68948F3.F6DA161.IP) (Ping timeout)
[10:36:21] *** Joins: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[10:36:33] *** Joins: kanru (kanru@moz-99690620.hinet-ip.hinet.net)
[10:37:10] *** Joins: IdolfHatler (idolf@moz-6B6C49D7.rhave.dk)
[10:38:12] *** Quits: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[10:41:02] *** Quits: fabrice (fabrice@moz-99690620.hinet-ip.hinet.net) (Quit: Leaving.)
[10:45:06] *** Joins: doomlord_ (servitor@moz-9B2006BF.range109-151.btcentralplus.com)
[10:48:01] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[10:48:19] *** Joins: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[10:50:26] *** Quits: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Client exited)
[10:55:01] *** Quits: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP) (Client exited)
[10:56:50] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:57:18] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[10:59:37] <pzol> if I need to pass a buffer to a c function (buf = ALLOC_N(UChar, ICU_LEN(str) + 1);) how do I create this buf in Rust??
[11:00:50] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Connection reset by peer)
[11:01:03] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[11:01:10] *** Joins: kvanb (kvanb@C298E12F.9B7E2F50.1611EE05.IP)
[11:01:27] *** Joins: fabrice (fabrice@347FA24B.24D9B0A0.495EC8CD.IP)
[11:03:10] <huon> pzol: vec::from_elem(ICU_LEN(str) + 1, 0u8)
[11:03:18] <huon> then v.as_mut_ptr() to pass it
[11:03:25] <pzol> what about raw::as_owned_vec(self).reserve_exact(n) ??
[11:03:52] <huon> where does `self` come from/what type is it??
[11:04:08] <pzol> this is from str
[11:07:49] *** Joins: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[11:07:59] *** Quits: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Client exited)
[11:09:12] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[11:10:38] *** Joins: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[11:11:19] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[11:13:36] *** Quits: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Client exited)
[11:14:17] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[11:16:08] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:17:44] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[11:18:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:19:24] *** Joins: b1nd (b1nd@2F421D5E.88420E27.377B9828.IP)
[11:24:50] *** Joins: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP)
[11:26:46] *** Quits: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP) (Ping timeout)
[11:31:53] *** Quits: mouse (mouse@moz-373942D2.dhcp.yndx.net) (Ping timeout)
[11:34:53] *** Quits: Ferreus (ferreus@moz-D7D31878.dip0.t-ipconnect.de) (Ping timeout)
[11:36:14] *** Joins: mouse (mouse@moz-7732991A.dhcp.yndx.net)
[11:39:26] <acrichto> carter: it was good to meet you too :)
[11:41:20] *** Quits: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP) (Quit: bbl)
[11:42:02] *** Quits: patpat (patpat@moz-7F753D82.gold.ac.uk) (Ping timeout)
[11:43:04] *** Joins: vertexclique (vertexcliq@AE702353.C72799FE.6894ADF4.IP)
[11:43:04] *** Quits: vertexclique (vertexcliq@AE702353.C72799FE.6894ADF4.IP) (Client exited)
[11:43:07] *** Joins: vertexclique (vertexcliq@AE702353.C72799FE.6894ADF4.IP)
[11:43:19] *** Joins: PeterSP (peter@moz-586AF793.bstnma.fios.verizon.net)
[11:45:39] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[11:45:54] <PeterSP> Is it safe to assume that warning: unused import does not belong in libnum? (Also, would removal of the imports be worth a first pull request?)
[11:48:20] *** Joins: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[11:48:25] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[11:48:31] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Quit: Leaving...)
[11:48:57] *** Joins: Ferreus (ferreus@moz-92609A17.dip0.t-ipconnect.de)
[11:49:53] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[11:51:04] *** Quits: carter (carter@moz-58F59B3A.members.linode.com) (Ping timeout)
[11:52:02] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Ping timeout)
[11:52:25] *** Quits: petantik (oz@moz-20EC2160.net) (Ping timeout)
[11:52:35] *** Quits: Caseus (bacon@moz-9F046088.members.linode.com) (Ping timeout)
[11:55:31] *** Joins: patpat (patpat@moz-7F753D82.gold.ac.uk)
[11:55:37] *** Joins: carter (carter@moz-58F59B3A.members.linode.com)
[11:57:07] *** Quits: ivan (ivan@moz-531C3EC9.members.linode.com) (Ping timeout)
[11:58:30] *** Quits: agarnier (agarnier@B49B97BC.DF317A48.8108A302.IP) (Quit: Quitte)
[11:58:39] *** Joins: agarnier (agarnier@B49B97BC.DF317A48.8108A302.IP)
[11:59:06] *** Joins: Caseus (bacon@moz-9F046088.members.linode.com)
[11:59:19] *** Joins: petantik (oz@moz-20EC2160.net)
[12:01:28] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[12:01:38] *** Quits: agarnier (agarnier@B49B97BC.DF317A48.8108A302.IP) (Quit: Quitte)
[12:01:46] *** Quits: kvanb (kvanb@C298E12F.9B7E2F50.1611EE05.IP) (Ping timeout)
[12:01:48] *** Joins: agarnier (agarnier@B49B97BC.DF317A48.8108A302.IP)
[12:02:06] *** Joins: ivan (ivan@moz-531C3EC9.members.linode.com)
[12:02:56] *** Joins: kvanb (kvanb@moz-DBEE82EB.vxl8.lon.bigpond.net.au)
[12:03:32] *** Quits: mouse (mouse@moz-7732991A.dhcp.yndx.net) (Ping timeout)
[12:04:14] *** Quits: rca_ (rcatolino@moz-FC4DC909.adsl.proxad.net) (Ping timeout)
[12:06:34] *** Joins: victorporof_ (victorporo@8F761026.B5EF4AF6.E96CA9D8.IP)
[12:06:44] *** Joins: a_m0d (a_m0d@moz-2F294D00.acanac.net)
[12:07:21] *** Joins: vmx (vmx@moz-76C03771.dip0.t-ipconnect.de)
[12:07:45] *** Quits: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Client exited)
[12:08:08] *** Quits: victorporof (victorporo@8F761026.B5EF4AF6.E96CA9D8.IP) (Ping timeout)
[12:08:14] *** Joins: twi (Adium@302D315D.D9A77F39.CD79F7FD.IP)
[12:09:00] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[12:09:17] *** Joins: jdm (jdm@2A21C64.CCE87F86.DDC6F5D1.IP)
[12:09:17] *** ChanServ sets mode: +o jdm
[12:11:19] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[12:12:14] <ChrisMorgan> In rust-http, I had what amounts to `write!(self.stream.get_mut_ref() as &mut Writer, "{}", self.url.path.as_slice())`. This used to work; today it doesn't, because it is trying to get a mutable reference to self.stream while self.url.path is borrowed, and it doesn't like that. Is there any solution with write!?
[12:12:57] <huon> ah, sounds like a victim of closure reform...
[12:12:58] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[12:13:15] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:13:22] <huon> `let Name { ref mut stream, ref mut url } = ...; write!(...)` should work
[12:15:27] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[12:15:35] *** Quits: heftig (heftig@moz-D746319F.unitymedia.biz) (Quit: Quitting)
[12:15:47] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[12:16:38] *** Quits: kvanb (kvanb@moz-DBEE82EB.vxl8.lon.bigpond.net.au) (Ping timeout)
[12:16:59] *** Joins: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP)
[12:17:07] <kimundi> PeterSP: Removing that warning would be a good first PR, go for it.
[12:17:17] *** Joins: kvanb (kvanb@moz-DBEE82EB.vxl8.lon.bigpond.net.au)
[12:17:18] <PeterSP> :)
[12:17:24] *** Quits: agarnier (agarnier@B49B97BC.DF317A48.8108A302.IP) (Quit: Quitte)
[12:17:33] *** Joins: agarnier (agarnier@B49B97BC.DF317A48.8108A302.IP)
[12:17:40] *** Joins: mouse (mouse@moz-373942D2.dhcp.yndx.net)
[12:17:47] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[12:18:27] *** Quits: ricepuddin (graham@moz-19729251.wlan.ic.ac.uk) (Ping timeout)
[12:18:38] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[12:18:51] *** Quits: cdidd (cdidd@moz-70B82314.broadband.corbina.ru) (Input/output error)
[12:18:58] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[12:18:59] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:18:59] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:19:00] <kimundi> PeterSP: Keep in mind though that the warning might be because of conditional compilation - that is, either different platforms or the tests use it, but not the normal build. In that case, instead of removing you'd slap on the correct #[cfg()] attribute so that it only gets compiled when its needed :)
[12:19:03] <huon> acrichto: ^ ChrisMorgan's discovery
[12:19:22] *** Quits: seanmonstar (seanmonsta@8C4EE5CE.65CB159.9D887C86.IP) (Ping timeout)
[12:19:29] <huon> acrichto: I think we need to avoid using closures in format_args, now that they are correct.
[12:19:41] <acrichto> well that's unfortunate :(
[12:20:08] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[12:20:13] <acrichto> we may be able to get around it by storing the writer outside of the closure
[12:20:26] <acrichto> 'self' is entirely borrowed when you only need a borrow on 'self.writer'
[12:20:42] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[12:20:42] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[12:20:59] *** Joins: heftig (heftig@moz-D746319F.unitymedia.biz)
[12:20:59] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:21:00] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:21:02] *** Quits: kvanb (kvanb@moz-DBEE82EB.vxl8.lon.bigpond.net.au) (Ping timeout)
[12:21:55] <ChrisMorgan> huon: yes, `let RequestWriter { ref mut stream, ref url, .. } = *self;` worked; thanks! ☺
[12:22:33] <ChrisMorgan> I'll file an issue for it (so that I can have an issue reference in my code, if for no other purpose)
[12:22:46] *** Joins: kvanb (kvanb@moz-5B744777.lns5.lon.bigpond.net.au)
[12:23:19] *** Joins: seanmonstar (seanmonsta@8C4EE5CE.65CB159.9D887C86.IP)
[12:25:36] *** Joins: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP)
[12:25:37] <acrichto> ChrisMorgan: can you try out this write! macro? https://gist.github.com/alexcrichton/8974215
[12:27:04] <ChrisMorgan> acrichto: yeah, that seems to be doing it.
[12:27:20] <acrichto> cool, PR incoming
[12:27:28] <ChrisMorgan> I guess I won't bother filing an issue, then.
[12:27:31] *** Quits: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP) (Ping timeout)
[12:29:09] <pzol> help!! std::vec::from_elem(self.len, char)  -> error: unresolved name `char`. 
[12:29:21] <ChrisMorgan> acrichto: minimal test case: https://gist.github.com/chris-morgan/151113cb6cf55ae0848e
[12:29:36] <acrichto> ChrisMorgan: oh thanks!
[12:29:40] <acrichto> I was just trying to make that
[12:30:04] *** pmoore|away is now known as pmoore
[12:30:18] <ChrisMorgan> Thanks for fixing it up ☺
[12:30:24] <acrichto> zomg I don't have to wait for stage1
[12:30:30] <acrichto> it's in libstd/macros.rs
[12:30:31] <acrichto> this is awesome
[12:31:07] <eibwen> how do I know that rust isn't optimizing out my benchmark?
[12:32:59] *** Joins: rca (rcatolino@moz-FC4DC909.adsl.proxad.net)
[12:33:34] <acrichto> ChrisMorgan: https://github.com/mozilla/rust/pull/12240
[12:34:54] *** Quits: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP) (Ping timeout)
[12:35:12] <huon> eibwen: http://static.rust-lang.org/doc/master/guide-testing.html#benchmarks-and-the-optimizer
[12:35:42] <huon> eibwen: short answer: by checking --emit ir
[12:36:44] <ChrisMorgan> acrichto: thanks for doing that!
[12:36:53] * ChrisMorgan loves the Rust community
[12:37:05] <acrichto> np :)
[12:37:37] *** Quits: aravindavk (aravinda@moz-BD0CADEE.redhat.com) (Quit: Leaving)
[12:38:59] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[12:40:12] <pzol> help!! std::vec::from_elem(self.len, char)  -> error: unresolved name `char`.  anybody??
[12:41:16] <eibwen> char is a keyword, you can't use it as an identifier
[12:42:09] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[12:42:21] *** Quits: a_m0d (a_m0d@moz-2F294D00.acanac.net) (Quit: Leaving.)
[12:42:46] <huon> eibwen: no
[12:43:28] <huon> pzol: are you trying to create an uninitialised vector of length `self.len` `char`s?
[12:43:39] <huon> (btw, Rust's char is not a C char.)
[12:43:39] <pzol> huon yes
[12:43:41] <SiegeLord> Yeah, it's a bit weird... built-in types are not keywords
[12:43:54] <SiegeLord> Makes it a pain to highlight them :P
[12:44:01] <eibwen> ?
[12:44:15] <SiegeLord> And they're thinking of adding contextual keywords too :/
[12:44:35] <SiegeLord> rusti: let char = 1; char
[12:44:37] -rusti- 1
[12:45:15] <SiegeLord> I'm 90% sure that piece of code is mishighlighted by every single Rust syntax highlighter today
[12:46:28] *** Joins: fyolnish (fyolnish@moz-4AF31AF9.uqwimax.jp)
[12:47:07] <SiegeLord> Oh look at that, a question on Reddit asking for RustAlgebloat 8)
[12:47:19] *** Quits: vertexclique (vertexcliq@AE702353.C72799FE.6894ADF4.IP) (Client exited)
[12:47:25] *** Joins: canhtak (canhtak@moz-4D8F0D46.wl.t.ulaval.ca)
[12:48:03] *** Joins: vertexclique (vertexcliq@AE702353.C72799FE.6894ADF4.IP)
[12:48:12] *** Quits: vertexclique (vertexcliq@AE702353.C72799FE.6894ADF4.IP) (Client exited)
[12:49:03] *** Joins: vertexclique (vertexcliq@AE702353.C72799FE.6894ADF4.IP)
[12:49:16] *** Joins: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[12:49:33] *** Quits: ghaering (Instantbir@4DECFBA5.E64A0519.C0DAB1E3.IP) (Quit: Instantbird 1.5 -- http://www.instantbird.com)
[12:49:37] *** Joins: ghaering (Instantbir@4DECFBA5.E64A0519.C0DAB1E3.IP)
[12:49:43] *** Quits: anasyrma (x@moz-DE175E38.caltech.edu) (Ping timeout)
[12:49:44] *** Quits: ghaering (Instantbir@4DECFBA5.E64A0519.C0DAB1E3.IP) (Client exited)
[12:50:04] *** Joins: ghaering (Instantbir@4DECFBA5.E64A0519.C0DAB1E3.IP)
[12:50:38] *** Joins: anasyrma (x@moz-DE175E38.caltech.edu)
[12:51:08] *** Quits: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[12:52:18] *** Quits: rca (rcatolino@moz-FC4DC909.adsl.proxad.net) (Ping timeout)
[12:55:25] *** Joins: rca (rcatolino@moz-7FACA309.adsl.proxad.net)
[12:56:20] <pzol> how does this translate to rust??? u_strToUpper(UChar *dest, int32_t destCapacity, const UChar *src, int32_t srcLength, const char *locale, UErrorCode *pErrorCode)
[12:56:32] <pzol> pub type UChar32   = char;
[12:57:27] *** Joins: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net)
[12:57:32] *** Quits: ecl3ctic (ecl3ctic@moz-E1FAD64C.wzfv1.vic.bigpond.net.au) (Client exited)
[12:57:52] <Zr40> what's the definition of UChar and UErrorCode?
[12:58:05] <pzol> pub type UErrorCode = int;
[12:58:16] <pzol> pub type UChar   = char;
[12:58:22] <huon> u_strToUpper(dest: *mut UChar, destCapacity: i32, src: *UChar, srcLength: i32, locale: *i8, pErrorCode: *mut UErrorCode)
[12:59:07] <pzol> thanks :)
[13:01:07] <pzol> and how do I get a *char from ~str ??
[13:01:38] *** Quits: twi (Adium@302D315D.D9A77F39.CD79F7FD.IP) (Quit: Leaving.)
[13:02:34] *** Joins: arielb1 (Mibbit@moz-57697264.cs.tau.ac.il)
[13:03:13] <huon> pzol: .as_bytes().as_ptr() gives you a *u8
[13:03:20] <huon> note that it is *not* null terminated
[13:06:31] <skade> wouldn't with/to_c_str be a better option? http://static.rust-lang.org/doc/master/std/c_str/trait.ToCStr.html
[13:06:34] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[13:07:09] <huon> skade: depends if null-termination is wanted or not
[13:07:31] <eibwen> huon: well, without a length argument null-termination is probably needed
[13:07:38] <huon> and since lengths/capacities are being passed, I'm guessing that it's not needed, in which case it's much cheaper to use as_bytes.as_ptr
[13:08:06] <huon> pzol: wait... I think I lied to you
[13:08:19] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Ping timeout)
[13:08:27] <huon> pzol: you need to decode the UTF-8 string into a ~[char] fisrt
[13:08:42] *** Joins: ricepuddin (graham@moz-5C8C696E.wlan.ic.ac.uk)
[13:08:46] *** jorendorff is now known as jorendorff_away
[13:09:02] <huon> pzol: so `let v = s.chars().to_owned_vec(); v_strToUpper(... , v.as_ptr(), v.len(), ...)`
[13:09:58] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Connection reset by peer)
[13:10:43] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[13:10:43] *** ChanServ sets mode: +ao dherman dherman
[13:12:37] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Ping timeout)
[13:12:45] *** Quits: kvanb (kvanb@moz-5B744777.lns5.lon.bigpond.net.au) (Quit: kvanb)
[13:13:11] *** Quits: trobertson (quassel@moz-A4AC319.sd.sd.cox.net) (Ping timeout)
[13:13:18] *** Joins: trobertson (quassel@moz-A4AC319.sd.sd.cox.net)
[13:15:38] *** Joins: jaysonsantos (Jayson@E9FEA4A0.4427088B.20F09BA6.IP)
[13:16:08] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:16:23] <NiccosSystem> huon, why is that strToUpper and not something like str_to_upper or str_upper?
[13:16:51] *** Quits: victorporof_ (victorporo@8F761026.B5EF4AF6.E96CA9D8.IP) (Quit: victorporof_)
[13:16:52] <huon> NiccosSystem: because pzol is binding to an external (non-Rust) library
[13:17:00] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Quit: Leaving...)
[13:17:01] <NiccosSystem> ah, okay
[13:17:57] *** Quits: vertexclique (vertexcliq@AE702353.C72799FE.6894ADF4.IP) (Connection reset by peer)
[13:18:05] *** Joins: vertexclique (vertexcliq@AE702353.C72799FE.6894ADF4.IP)
[13:18:13] *** Joins: ksad (ksad@moz-727BB1AD.rsr.lip6.fr)
[13:18:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:20:36] *** Joins: tiernjo (quassel@moz-21A5F23D.ks.ks.cox.net)
[13:20:43] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[13:24:29] *** Quits: tiernjo (quassel@moz-21A5F23D.ks.ks.cox.net) (Client exited)
[13:25:01] *** Joins: Ms2ger (Ms2ger@moz-A8CA4C29.ugent.be)
[13:26:21] *** Joins: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP)
[13:26:35] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[13:26:48] *** Quits: vertexclique (vertexcliq@AE702353.C72799FE.6894ADF4.IP) (Ping timeout)
[13:27:14] *** Joins: vertexclique (vertexcliq@AE702353.C72799FE.6894ADF4.IP)
[13:27:32] <Ms2ger> nmatsakis, can has autoborrowing for my custom strings?
[13:27:49] <pzol> huon thanks ;)
[13:28:18] *** Quits: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP) (Ping timeout)
[13:32:09] *** Quits: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP) (Ping timeout)
[13:33:23] *** kimundi is now known as zz_kimundi
[13:33:41] *** Joins: cdidd (cdidd@moz-628C0523.broadband.corbina.ru)
[13:33:47] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[13:33:52] *** jorendorff_away is now known as jorendorff
[13:33:59] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Client exited)
[13:34:24] *** Joins: edwardw (Mibbit@E761717E.1B2F6624.7F41E82D.IP)
[13:36:08] <pzol> how do I get a let error_code : *mut int = 0;
[13:36:18] <pzol> I mean a pointer to an int?
[13:36:36] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[13:37:18] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[13:37:31] <Ms2ger> let error_code : *mut int = &mut 0
[13:37:33] <Ms2ger> ;
[13:39:30] <pzol> thanks :) 
[13:40:00] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[13:42:52] <pzol> and... how do I allocate a buffer for *char ?? 
[13:44:58] *** Quits: agarnier (agarnier@B49B97BC.DF317A48.8108A302.IP) (Quit: Quitte)
[13:46:12] *** Joins: mdambar (ambar_khan@4E2A76DF.854E442C.2D4378B7.IP)
[13:48:10] *** Quits: jdm (jdm@2A21C64.CCE87F86.DDC6F5D1.IP) (Quit: Lost terminal)
[13:49:14] *** Joins: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[13:50:23] *** Joins: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[13:51:03] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[13:51:12] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[13:51:20] *** Quits: drueck (uid25037@moz-5F4AA75A.irccloud.com) (Ping timeout)
[13:51:20] *** Quits: etrepum (sid763@moz-5F4AA75A.irccloud.com) (Ping timeout)
[13:51:20] *** Quits: lexs (uid12437@moz-5F4AA75A.irccloud.com) (Ping timeout)
[13:51:20] *** Quits: wycats (sid79@moz-5F4AA75A.irccloud.com) (Ping timeout)
[13:52:11] *** Quits: mhenretty (sid11899@moz-5F4AA75A.irccloud.com) (Ping timeout)
[13:52:11] *** Quits: wilfred (sid159@moz-5F4AA75A.irccloud.com) (Ping timeout)
[13:52:11] *** Quits: andreypopp (uid22726@moz-5F4AA75A.irccloud.com) (Ping timeout)
[13:52:11] *** Quits: sawrubh (uid6719@moz-5F4AA75A.irccloud.com) (Ping timeout)
[13:52:19] *** Quits: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[13:58:15] <pzol> If I define a trait and implementation for impl<'a> ToUString for &'a str - how do I import that ??
[14:00:32] *** Quits: mawuli (mawuli@moz-5ADAB167.com.gh) (Ping timeout)
[14:01:26] <nmatsakis> Ms2ger: do you have some kind of prototype?
[14:02:05] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[14:02:33] <Ms2ger> nmatsakis, https://github.com/Ms2ger/servo/compare/mozilla:master...Ms2ger:strings, in src/components/script/dom/bindings/utils.rs
[14:02:37] <Ms2ger> (Doesn't build yet)
[14:02:40] <SiegeLord> pzol: You just import the trait
[14:02:55] <pzol> SiegeLord it says error: cannot import from a trait or type implementation
[14:02:56] *** Quits: cdidd (cdidd@moz-628C0523.broadband.corbina.ru) (Input/output error)
[14:03:20] *** Joins: cdidd (cdidd@moz-628C0523.broadband.corbina.ru)
[14:03:23] *** Quits: dmac2 (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Quit: Leaving.)
[14:03:54] <nmatsakis> Ms2ger: ok. it's conceivable we could extend auto-borrow in some way; I'm always torn about auto-borrow in the first place, but whatever we do it'd be nice for a user string to work as well as the builtins...
[14:04:07] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[14:04:25] <Ms2ger> nmatsakis, yeah
[14:04:44] *** Quits: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net) (Ping timeout)
[14:05:03] *** Quits: dmac (dmac@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[14:05:03] *** Quits: vertexclique (vertexcliq@AE702353.C72799FE.6894ADF4.IP) (Ping timeout)
[14:06:00] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[14:07:04] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[14:07:21] *** Quits: canhtak (canhtak@moz-4D8F0D46.wl.t.ulaval.ca) (Quit: canhtak)
[14:08:58] *** Joins: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP)
[14:10:08] *** Joins: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net)
[14:10:25] *** Quits: disjukr (disjukr@1B452A7A.D5FE504D.FC69BED9.IP) (Ping timeout)
[14:11:05] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[14:12:33] *** Joins: nszceta (hax@moz-4C3EEAB4.wireless.pitt.edu)
[14:14:52] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[14:15:27] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[14:16:06] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[14:17:21] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[14:18:03] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[14:24:15] *** Joins: agarnier (agarnier@B49B97BC.DF317A48.8108A302.IP)
[14:24:21] *** Quits: bluz (blaz@moz-A965956C.torservers.net) (Input/output error)
[14:24:33] *** Joins: canhtak (canhtak@moz-4D8F0D46.wl.t.ulaval.ca)
[14:25:15] *** Joins: Earnestly (earnest@119EDA00.66A37A5.BFD1ABFD.IP)
[14:26:27] *** Joins: dschatzberg (dschatzber@moz-9384E83C.bu.edu)
[14:27:09] *** Joins: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP)
[14:27:31] *** Joins: tiernjo (quassel@moz-21A5F23D.ks.ks.cox.net)
[14:27:53] *** Quits: b1nd (b1nd@2F421D5E.88420E27.377B9828.IP) (Quit: Leaving)
[14:27:59] *** Quits: agarnier (agarnier@B49B97BC.DF317A48.8108A302.IP) (Quit: Quitte)
[14:28:58] *** Quits: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP) (Ping timeout)
[14:29:48] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[14:32:37] *** Quits: patpat (patpat@moz-7F753D82.gold.ac.uk) (Ping timeout)
[14:34:14] *** Joins: kris (kris@moz-8D8AE188.dk.customer.tdc.net)
[14:34:58] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[14:35:58] *** Quits: kris (kris@moz-8D8AE188.dk.customer.tdc.net) (Ping timeout)
[14:36:38] *** Quits: Ferreus (ferreus@moz-92609A17.dip0.t-ipconnect.de) (Ping timeout)
[14:36:50] *** Joins: Boreeas (Boreeas@moz-F35C832D.boreeas.net)
[14:39:30] *** Quits: mindcat (mindcat@C9575732.2443BAF3.57E3C596.IP) (Ping timeout)
[14:40:58] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[14:42:59] *** Joins: mindcat (mindcat@89BE9B74.14B01478.F956842C.IP)
[14:43:58] *** Quits: IdolfHatler (idolf@moz-6B6C49D7.rhave.dk) (Ping timeout)
[14:44:41] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[14:44:58] *** Quits: mdambar (ambar_khan@4E2A76DF.854E442C.2D4378B7.IP) (Ping timeout)
[14:45:11] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[14:45:21] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[14:45:24] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[14:46:50] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[14:46:52] <bstrie> how do I append onto a ~str
[14:46:55] *** Quits: edwardw (Mibbit@E761717E.1B2F6624.7F41E82D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:47:04] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Connection reset by peer)
[14:47:08] *** Joins: edwardw (Mibbit@E761717E.1B2F6624.7F41E82D.IP)
[14:47:18] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[14:47:50] <cmr> bstrie: .push_str
[14:48:14] <eddyb> Jurily is not around?
[14:48:35] <bstrie> cmr: how does that differ from .append?
[14:48:44] <bstrie> which I found in the meantime, after trying .push and +=
[14:49:05] <cmr> bstrie: push_str is in-place.
[14:49:11] <bstrie> ah nice
[14:49:16] *** Quits: Ms2ger (Ms2ger@moz-A8CA4C29.ugent.be) (Ping timeout)
[14:49:32] <eddyb> += requires the OpAssign overloads (coming soon?)
[14:49:41] <bstrie> one can hope!
[14:49:44] *** Joins: Ms2ger (Ms2ger@moz-A8CA4C29.ugent.be)
[14:49:50] <cmr> one can hope not!
[14:49:53] <bstrie> been waiting since 0.1 for decent assingment op overloading
[14:50:00] <cmr> I don't want += on strings.
[14:50:13] <bstrie> cmr: that's fine, but I still want them in general :P
[14:50:16] <cmr> sure.
[14:50:25] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[14:50:42] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Ping timeout)
[14:50:44] * Ms2ger does want += on strings
[14:50:50] <Ms2ger> And on my own strings
[14:51:00] *** zz_kimundi is now known as kimundi
[14:51:10] *** Joins: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[14:51:10] <bstrie> Ms2ger: what are your own strings
[14:51:19] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[14:51:31] <Ms2ger> https://github.com/Ms2ger/servo/compare/mozilla:master...Ms2ger:strings
[14:51:36] <eibwen> isn't it fine that = is a well-defined operator?
[14:51:43] <Ms2ger> Not for perf
[14:51:50] <bstrie> eibwen: = won't be overloadable, but += and friends will
[14:52:24] <bstrie> just the OpAssigns. I think everyone's vehemently against overloading =, as they should be
[14:52:48] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[14:53:02] *** Quits: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[14:53:06] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[14:53:33] <bstrie> Ms2ger: ah I see, custom strings because javascript is terrible :P
[14:53:45] <Ms2ger> Yes, exactly
[14:54:05] <bstrie> normally I'm quick to defend javascript but that really is one of the worst things about it
[14:54:51] <Ms2ger> I'm not quick to defend js at all :)
[14:55:30] *** Joins: vertexclique (vertexcliq@DC63F157.C7ED8189.6894ADF4.IP)
[15:00:08] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[15:00:57] *** Quits: edwardw (Mibbit@E761717E.1B2F6624.7F41E82D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:01:02] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Connection reset by peer)
[15:01:06] *** Quits: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net) (Quit: sw17ch)
[15:01:27] *** Joins: edwardw (Mibbit@E761717E.1B2F6624.7F41E82D.IP)
[15:02:22] <edwardw> Ms2ger: can you please post that link again? I clicked on it and my firefox nightly conveniently crashed :)
[15:02:43] <Ms2ger> https://github.com/Ms2ger/servo/compare/mozilla:master...Ms2ger:strings
[15:02:48] <edwardw> thanks
[15:02:48] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[15:07:14] *** Joins: patpat (patpat@moz-7F753D82.gold.ac.uk)
[15:08:22] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[15:09:29] *** Joins: alisdair (textual@F511297F.DC0F4EDA.115CE8E4.IP)
[15:09:51] *** jorendorff is now known as jorendorff_away
[15:10:33] *** Joins: lexs (uid12437@moz-5F4AA75A.irccloud.com)
[15:10:34] *** Joins: drueck (uid25037@moz-5F4AA75A.irccloud.com)
[15:10:34] *** Joins: etrepum (sid763@moz-5F4AA75A.irccloud.com)
[15:11:37] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[15:11:45] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[15:12:06] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[15:12:07] *** Joins: wycats (sid79@moz-5F4AA75A.irccloud.com)
[15:13:12] *** Joins: wilfred (sid159@moz-5F4AA75A.irccloud.com)
[15:13:16] *** Joins: andreypopp (uid22726@moz-5F4AA75A.irccloud.com)
[15:13:28] *** Joins: mhenretty (sid11899@moz-5F4AA75A.irccloud.com)
[15:13:36] *** Joins: sawrubh (uid6719@moz-5F4AA75A.irccloud.com)
[15:14:39] *** Joins: mib_fmxq19 (Mibbit@moz-D27F97F4.dk.customer.tdc.net)
[15:15:24] *** Quits: mib_fmxq19 (Mibbit@moz-D27F97F4.dk.customer.tdc.net) (Quit: http://www.mibbit.com ajax IRC Client)
[15:16:10] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:17:54] *** Joins: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP)
[15:18:37] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:19:20] *** Joins: alicedare (textual@1E3F14AE.29819A33.115CE8E4.IP)
[15:19:34] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[15:19:48] *** Quits: alisdair (textual@F511297F.DC0F4EDA.115CE8E4.IP) (Ping timeout)
[15:21:56] *** Quits: Kxepal (Miranda@moz-9E323D1A.pppoe.mtu-net.ru) (Ping timeout)
[15:22:01] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[15:22:33] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[15:23:37] *** Quits: alicedare (textual@1E3F14AE.29819A33.115CE8E4.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:23:48] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[15:23:58] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Quit: by!)
[15:24:34] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[15:25:19] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[15:26:28] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Ping timeout)
[15:27:53] *** Joins: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP)
[15:28:39] *** Quits: trobertson (quassel@moz-A4AC319.sd.sd.cox.net) (Ping timeout)
[15:28:41] *** Joins: trobertson (quassel@moz-A4AC319.sd.sd.cox.net)
[15:29:42] *** Quits: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP) (Ping timeout)
[15:31:04] *** Joins: dfr (dfr@moz-F0356BE3.pppoe.spdop.ru)
[15:32:28] *** Parts: dfr (dfr@moz-F0356BE3.pppoe.spdop.ru) ()
[15:36:25] <cmr> olsonjeffery: ping
[15:36:57] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[15:37:21] *** Quits: heftig (heftig@moz-D746319F.unitymedia.biz) (Quit: Quitting)
[15:37:34] *** victorporof is now known as victorporof|away
[15:37:49] *** Joins: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net)
[15:38:32] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[15:39:21] *** Quits: victorporof|away (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Quit: victorporof|away)
[15:39:37] *** Joins: kris (kris@moz-147EE6DF.diku.dk)
[15:39:44] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[15:40:22] *** Quits: patpat (patpat@moz-7F753D82.gold.ac.uk) (Ping timeout)
[15:40:27] *** Joins: patpat (patpat@moz-7F753D82.gold.ac.uk)
[15:41:31] *** Joins: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net)
[15:41:31] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[15:41:33] *** Joins: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[15:42:49] *** Joins: josh (josh@moz-76F75B70.mpls.qwest.net)
[15:42:59] *** Quits: patpat (patpat@moz-7F753D82.gold.ac.uk) (Ping timeout)
[15:43:00] *** Joins: aurynj (Eon@BF507CFB.1CEEC774.4C51A5AE.IP)
[15:43:04] *** Joins: patpat (patpat@moz-7F753D82.gold.ac.uk)
[15:43:14] *** kimundi is now known as zz_kimundi
[15:43:31] *** Quits: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[15:44:08] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[15:44:44] *** Quits: patpat (patpat@moz-7F753D82.gold.ac.uk) (Ping timeout)
[15:44:45] *** zz_kimundi is now known as kimundi
[15:45:23] *** Joins: Kxepal (Miranda@moz-D87D4BA.pppoe.mtu-net.ru)
[15:45:51] *** Quits: mixi (mixi@moz-DBD8904A.org) (Input/output error)
[15:46:04] *** Joins: patpat (patpat@moz-7F753D82.gold.ac.uk)
[15:47:24] *** Joins: mixi (mixi@moz-DBD8904A.org)
[15:50:57] <silven> I'm having some troubles with building my rust apps. I've got a binary A, which depends on a dylib B, which in turn depends on a dylib C - when I change C, I recompile it - and then when I try to recompile the binary - it breaks and sais "in dylib B undefined reference to C::stuff", why is that? Isn't the whole point of dynamic linking to avoid that?
[15:51:34] <cmr> silven: this is why dynamic linking isn't the default right now.
[15:51:48] <silven> shouldn't B be dynamically linked to C so I don't have to recompile that unless I change something major
[15:52:08] <cmr> silven: when you recompile C, if it changed at all, symbol names can change since they include a hash...
[15:52:15] <silven> cmr: so C is statically linked into B?
[15:52:18] <cmr> no.
[15:52:40] <cmr> if it were statically linked, you wouldn't be having any problems.
[15:52:55] *** Quits: ricepuddin (graham@moz-5C8C696E.wlan.ic.ac.uk) (Ping timeout)
[15:53:17] <silven> I have the same issue if I'm using rlibs instead of dylibs, is there some other flag I'm missing? How are you supposed to work with this?
[15:53:41] <cmr> are all of your deps rlibs?
[15:53:49] *** Quits: mouse (mouse@moz-373942D2.dhcp.yndx.net) (Ping timeout)
[15:53:52] <cmr> right now you can only do all-static or all-dynamic deps
[15:54:00] <cmr> to skirt around some sticky problems that comes from mixing them.
[15:54:11] <silven> All of them are the same
[15:54:36] *** Joins: IdolfHatler (idolf@moz-5A7B69C7.math.ku.dk)
[15:54:37] <silven> But I change just by flipping a switch and I've tried both rlib and dylib both have the same problem
[15:55:34] <cmr> I'd have to actually look at your build system to tell, then.
[15:55:51] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[15:56:56] <silven> cmr: https://gist.github.com/silven/8977709
[15:57:07] <silven> That's the jist of it
[15:58:11] <cmr> silven: and you say that, when using rlibs, changing C and rebuilding leads to link errors?
[15:58:15] *** Quits: patpat (patpat@moz-7F753D82.gold.ac.uk) (Ping timeout)
[15:58:28] <silven> yupp
[15:58:37] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[15:58:47] *** Parts: ksad (ksad@moz-727BB1AD.rsr.lip6.fr) (Leaving)
[15:59:13] <bstrie> bah, how do I iterate over a fixed-size stack array?
[15:59:24] <cmr> bstrie: v.iter()
[15:59:29] <silven> bstrie: foo.iter() 
[15:59:43] * bstrie headdesk
[15:59:52] <bstrie> too much python recently
[15:59:57] *** Quits: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP) (Ping timeout)
[16:00:12] *** Joins: patpat (patpat@moz-7F753D82.gold.ac.uk)
[16:00:26] <cmr> silven: seems odd. changing C should rebuild all of its deps recursively when using rlibs, though..
[16:00:33] *** Joins: kronquii (kronquii@moz-2F636E0B.onid.oregonstate.edu)
[16:01:10] <silven> Well, C has no deps. B depends on C, and A depends on both. B is never rebuilt
[16:01:25] <cmr> right, I mean things that depend on it
[16:01:27] <cmr> (sorry)
[16:01:53] *** Quits: patpat (patpat@moz-7F753D82.gold.ac.uk) (Ping timeout)
[16:01:57] *** Joins: patpat (patpat@moz-7F753D82.gold.ac.uk)
[16:02:22] <silven> The whole point of the exercise is to build a system where nothing is rebuilt unnecessarily
[16:02:43] <cmr> if C changes and B depends on C, how could B not be rebuilt?
[16:03:43] *** Joins: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP)
[16:03:52] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: WeeChat 0.4.2)
[16:04:11] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[16:04:25] <silven> isn't that what dynamic linking is supposed to do?
[16:04:25] *** Quits: doener (bs@moz-AA189A5A.unitymedia.biz) (Quit: leaving)
[16:04:29] <cmr> no.
[16:04:34] <silven> I think I made my c++ programs like that all the time
[16:04:47] <cmr> you can only not rebuild B if there is no change at all to its ABI
[16:05:23] <cmr> in C++ you could use the header files as the deps in the makefile, to make sure it gets rebuilt when important things change.
[16:05:59] <silven> I guess that makes sense
[16:06:32] <silven> But I thought the linking step when making the binary was making sure all things fit together, symbols and whatnot
[16:06:35] *** Joins: sunfish (chatzilla@moz-8DE7F965.dsl.dynamic.sonic.net)
[16:06:43] *** Quits: kris (kris@moz-147EE6DF.diku.dk) (Ping timeout)
[16:06:50] <silven> and as such, B should realize all is well and A would build correctly
[16:07:07] <cmr> symbols will be resolved, but what they actually do when you call them is entirely opaque to the linker.
[16:07:13] *** Quits: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP) (Ping timeout)
[16:09:02] <silven> So there is no way to struture this like a no-unnecessary-recompile c-program without manually tracking dependancies?
[16:09:16] <olsonjeffery> cmr: pong
[16:09:20] <cmr> unfortunately not right now :(
[16:09:34] <cmr> olsonjeffery: so I'm at the last piece of new cargo-lite and it's what to do with build_cmds
[16:09:48] <cmr> olsonjeffery: is outputting globs fine, or would you prefer explicitly being given the --out-dir to use?
[16:09:56] <cmr> (plus any other rustc args)
[16:10:41] <olsonjeffery> outdir is probably better
[16:10:46] <olsonjeffery> also
[16:10:46] <cmr> ok.
[16:10:57] <olsonjeffery> what about scripts that spew a bunch to stdout, as-is?
[16:11:04] <olsonjeffery> does cargo-lite handle that?
[16:11:11] <olsonjeffery> or does it want *just* cargo-lite: artifacts
[16:11:15] <olsonjeffery> and then files/dirs ?
[16:11:16] <cmr> right now build_cmd must be entirely silent except the artifacts line.
[16:11:21] * olsonjeffery nods
[16:11:30] <olsonjeffery> consider backtracking from the end of output to artifacts ?
[16:11:38] <cmr> if I change to passing args to the build_cmd it won't care.
[16:11:42] <olsonjeffery> i dunno if you get the output as a list of strings or what..
[16:11:50] <cmr> that'd also be possible, sure.
[16:11:54] <olsonjeffery> would be useful
[16:11:55] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[16:12:19] <olsonjeffery> right now i have a "dummy" cargo-lite set up whose build.sh clones/updates rust-sdl2 and then builds it
[16:12:22] <olsonjeffery> so there's lots of spew
[16:12:27] <cmr> mm
[16:12:37] <olsonjeffery> and im working to supress it via redirects, but it looks like cargo-lite is still picking it up
[16:12:41] *** Quits: IdolfHatler (idolf@moz-5A7B69C7.math.ku.dk) (Ping timeout)
[16:13:01] <olsonjeffery> also interesting that cargo-lite fails
[16:13:05] <olsonjeffery> because rustc writes warning to stderr
[16:13:11] <cmr> yeah
[16:13:12] <olsonjeffery> which cargo-lite interprets as failure
[16:13:19] <cmr> that's the main reason I wanted to change it
[16:13:23] <olsonjeffery> even through $? is 0
[16:13:26] * olsonjeffery nods
[16:13:27] <cmr> out-dir seems cleanest to me and allows also letting cargo-lite specify optimization level / other flags.
[16:13:57] <olsonjeffery> yeah.. that whole "have build.sh return params to rustc" is neat
[16:14:14] <cmr> I'm going to pass it via env vars, is that ok for you?
[16:14:18] <olsonjeffery> im just doing the build in my script though and want to point cargo-lite at the artifacts
[16:14:29] <olsonjeffery> not a problem for me
[16:14:30] <cmr> RUSTFLAGS=..., OUT_DIR=...
[16:14:33] <cmr> ok.
[16:14:36] <cmr> I'll do that then.
[16:14:39] *** pmoore is now known as pmoore|dinner
[16:14:40] <cmr> seems most flexible
[16:14:42] <olsonjeffery> im not going to use that feature, personally
[16:14:51] <olsonjeffery> i want to just point cargo-lite at the dir where the rlib artifacts are
[16:14:53] <olsonjeffery> because that's all i have
[16:15:07] <cmr> well instead you'd give --out-dir = $OUT_DIR to rustc when you build.
[16:15:18] <cmr> rather than cargo-lite picking them up from the output
[16:15:32] <olsonjeffery> ok so $OUT_DIR is set by cargo-lite then/
[16:15:35] <cmr> ye
[16:15:35] <olsonjeffery> should prefix, if so
[16:15:39] <olsonjeffery> $CL_OUT_DIR
[16:15:42] <cmr> ok
[16:15:42] <olsonjeffery> and document
[16:15:49] *** Quits: edwardw (Mibbit@E761717E.1B2F6624.7F41E82D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:16:02] *** Joins: edwardw (Mibbit@96E7298D.3E260003.B9C6B12A.IP)
[16:16:02] <olsonjeffery> gotcha gotcha. this is pretty cool
[16:16:11] <olsonjeffery> so then cargo-lite can set up tmp out dirs or whatever.
[16:16:14] <olsonjeffery> makes sense, now.
[16:17:26] <arielb1> is there a way to make https://gist.github.com/arielb1/8978196 work?
[16:17:34] *** Joins: Linear (RJones@moz-E6F82C3A.maine.res.rr.com)
[16:17:41] <arielb1> without using gc?
[16:17:53] <cmr> arielb1: no.
[16:17:58] <cmr> you can use Rc though
[16:18:07] *** Quits: jpf (jan@moz-A8C26A15.org) (Quit: Lost terminal)
[16:18:14] *** Joins: disjukr (disjukr@1B452A7A.D5FE504D.FC69BED9.IP)
[16:18:17] <patpat> hello, can you sort a vector of f32s or f64s in Rust using sort_by?
[16:18:27] *** Joins: jpf (jan@moz-A8C26A15.org)
[16:18:34] <cmr> patpat: v.sort_by(|a, b| a < b)
[16:18:50] <cmr> or, well.
[16:19:43] <Ms2ger> No :)
[16:19:51] <cmr> right
[16:19:54] <cmr> need to return Ordering
[16:19:58] *** Joins: ricepuddin (graham@moz-B35CFFBD.wlan.ic.ac.uk)
[16:20:02] <cmr> so, given a function that imposes an ordering on floats.
[16:20:02] <patpat> hm :/
[16:20:13] <cmr> you can use that.
[16:20:24] <Ms2ger> if a==b { Eq } else if a<b { Less } else { Greater }
[16:20:25] <Ms2ger> Maybe
[16:20:38] <Ms2ger> Or 2**-3
[16:20:39] <Ms2ger> Er
[16:20:44] <Ms2ger> |a, b| a.cmp(b)
[16:21:07] <cmr> floats don't implement TotalOrd, can't use cmp.
[16:21:12] <cmr> if they did, you wouldn't need sort_by
[16:21:18] <Ms2ger> Oh, bah
[16:21:38] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[16:22:25] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[16:22:41] *** Joins: calvinmetcalf (cmetcalf@moz-E02DAEDB.hsd1.md.comcast.net)
[16:22:47] <arielb1> note that https://gist.github.com/arielb1/8978329 works (but uses unsafe)
[16:22:52] <arielb1> (works = is sound)
[16:23:29] <arielb1> well create_bigger_context needs a transmute
[16:23:59] <Ms2ger> That doesn't look sound
[16:24:20] *** Joins: Ferreus (ferreus@moz-A3BC079B.pools.arcor-ip.net)
[16:24:22] <Ms2ger> Or like it would compile
[16:24:24] *** Quits: ghaering (Instantbir@4DECFBA5.E64A0519.C0DAB1E3.IP) (Client exited)
[16:24:52] <arielb1> I fixed it a little
[16:27:42] *** Quits: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:29:06] *** Joins: Denommus (user@FB5F40F2.6B2700D6.AD91B79.IP)
[16:29:13] *** Quits: fabiand (fabiand@moz-AC832C6B.adsl.alicedsl.de) (Quit: Verlassend)
[16:29:30] *** Quits: Ms2ger (Ms2ger@moz-A8CA4C29.ugent.be) (Ping timeout)
[16:29:35] *** Quits: patpat (patpat@moz-7F753D82.gold.ac.uk) (Ping timeout)
[16:29:35] <arielb1> because A is priv, if someone holds a reference to the A then it got it from get_A, which means the BiggerContext is live, which means the Context is live
[16:29:55] *** Quits: Zr40 (zr40@moz-CCFEAB92.adsl.xs4all.nl) (Quit: leaving)
[16:30:13] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[16:30:26] *** Joins: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[16:30:56] *** Joins: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP)
[16:31:26] <Denommus> any way to get a single char without enter?
[16:31:51] <cmr> Denommus: you need put stdin in non-canonical mode with an ioctl.
[16:32:20] <arielb1> well the safe version is to put it in a macro or something
[16:32:22] <cmr> there's no safe wrapper for it in rust.
[16:32:35] <arielb1> if you make create_bigger_context a macro
[16:33:57] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[16:34:00] *** victorporof is now known as victorporof|away
[16:35:56] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[16:36:30] <arielb1> I added an impl
[16:36:52] <arielb1> through it's ugly
[16:37:07] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[16:37:11] <arielb1> you have to do define_bigger_context!(varname) rather then let varname = define_bigger_context!()
[16:37:26] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[16:38:17] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[16:39:02] <arielb1> I'm quite sure the unsafe variant is sound
[16:39:03] *** Joins: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[16:39:17] <Denommus> cmr: hm
[16:39:53] *** Joins: nical (Nicolas@DA4ABEAF.1DE10CA8.D8E68FF6.IP)
[16:40:04] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[16:40:20] *** Joins: herrwolfe45 (user@CACBD77F.4EBBBE62.C082B7DC.IP)
[16:40:25] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[16:40:55] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[16:41:16] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[16:41:28] <nical> KokaKiwi: ping
[16:41:48] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[16:43:49] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:43:57] *** pmoore|dinner is now known as pmoore
[16:47:25] <arielb1> how do identifiers bind in macros?
[16:47:50] <cmr> arielb1: any identifiers you create in a macro are not visible outside of it (fully hygenic)
[16:47:53] <cmr> at least in theory.
[16:47:58] <bstrie> what's an efficient way to print 2^16 things rather than looping through a print! statement 2^16 times?
[16:48:01] <cmr> right now I think only `let` is hygenic.
[16:48:17] <arielb1> do identifiers in the defining crate bind into the namespace where the macro is defined or where it is placed?
[16:48:20] <bstrie> I feel like I should be using buffers, or something
[16:48:24] <cmr> defined.
[16:48:30] <arielb1> do input identifiers bind properly
[16:48:37] <cmr> I do not know.
[16:48:41] <tiffany> why are you printing 65536 lines bstrie?
[16:48:54] <eddyb> bstrie: get a stdout Writer
[16:48:59] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[16:49:03] <arielb1> if I have macro_rules! let0 (($id: ident) => (let $id = 0))
[16:49:05] <arielb1> does it work
[16:49:06] <bstrie> tiffany: generating perlin noise, I have an array of 2^16 discrete points
[16:49:19] <eddyb> bstrie: that's more efficient than println!/println in a loop
[16:49:29] <bstrie> eddyb: I'll look into it, thanks
[16:49:37] <arielb1> well it does
[16:49:53] <eddyb> you can still use a loop.... I'd print at least a 256 byte line per write call
[16:49:53] <arielb1> thanks
[16:50:11] <eddyb> can easily use a stack buffer for it
[16:50:33] <bstrie> eddyb: well my array doesn't contain the data that needs to be printed... I look up the proper character to print based on the contents of each cell
[16:50:44] <bstrie> so I can't just concat all the array together
[16:50:55] <bstrie> I mean, I guess I *could* just store the character
[16:50:55] <arielb1> then create a new array
[16:51:00] <arielb1> containing the data to be printed
[16:51:02] <eddyb> nah, write a row at a time or something
[16:51:04] <arielb1> or do it in blocs
[16:51:06] <arielb1> or do it in blocks
[16:51:31] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[16:51:33] <bstrie> eddyb: there's no concept of rows, it's just a [0f32, ..65536]
[16:51:49] <bstrie> right now rows are handled by two nested range(0,256) loops
[16:51:55] <eddyb> that should do
[16:52:32] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[16:52:36] *** Joins: vgeddes (vincent.ge@289F3EEF.7EFECA3F.A9EEF49D.IP)
[16:53:14] *** Joins: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[16:54:26] *** Quits: victorporof|away (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[16:55:29] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[16:56:08] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[16:57:15] *** Quits: edwardw (Mibbit@96E7298D.3E260003.B9C6B12A.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:57:25] <arielb1> how is /src/librustc/middle/typeck/infer/test.rs supposed to compile
[16:57:32] <arielb1> while passing the wrong number of arguments to build_session_options
[16:57:34] *** Joins: edwardw (Mibbit@96E7298D.3E260003.B9C6B12A.IP)
[16:57:41] <arielb1> and build_session
[16:57:53] *** Quits: fyolnish (fyolnish@moz-4AF31AF9.uqwimax.jp) (Connection reset by peer)
[16:58:04] *** Joins: fyolnish (fyolnish@moz-4AF31AF9.uqwimax.jp)
[16:58:24] *** Quits: sunfish (chatzilla@moz-8DE7F965.dsl.dynamic.sonic.net) (Client exited)
[16:58:27] <arielb1> around line 50
[16:58:52] <cmr> nmatsakis: when was the last time that test file was actually used?
[16:58:53] *** Joins: halleck (a@moz-372B240D.dynamic.mnet-online.de)
[16:59:17] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[16:59:21] <bstrie> eddyb: bear with me, cuz I've never done this sort of io in any language before, but does this look right? https://gist.github.com/bstrie/8979104
[16:59:59] <arielb1> looks fine
[16:59:59] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[17:00:00] <arielb1> to me
[17:00:02] *** Joins: refold (gman@moz-42D68426.a258.priv.bahnhof.se)
[17:00:30] <eddyb> bstrie: oh, BufferedWriter should do the job
[17:00:40] <bstrie> eddyb: isn't that what I'm using?
[17:00:40] *** Quits: fyolnish (fyolnish@moz-4AF31AF9.uqwimax.jp) (Connection reset by peer)
[17:00:53] <eddyb> bstrie: it is, I just haven't suggested it to you :)
[17:00:54] <arielb1> it looks like it captures stdout
[17:01:05] *** Joins: fyolnish (fyolnish@moz-4AF31AF9.uqwimax.jp)
[17:01:06] *** Quits: vmx (vmx@moz-76C03771.dip0.t-ipconnect.de) (No route to host)
[17:01:13] <bstrie> eddyb: does writeln! take a BufferedWriter as its first argument?
[17:01:23] *** Quits: mrmonday (mrmonday@moz-C7DC1A73.lin.openzula.org) (Ping timeout)
[17:01:28] <eddyb> bstrie: any Writer. BufferedWriter should implement Writer
[17:01:40] *** Joins: vmx (vmx@moz-76C03771.dip0.t-ipconnect.de)
[17:01:41] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Ping timeout)
[17:01:44] * arielb1 discovered stdout returns a copy so it's fine
[17:01:45] <eddyb> (I thought you might use a custom buffer, specialized for your requirements, but I don't think that's necessary)
[17:01:46] <bstrie> cool
[17:01:48] <bstrie> thanks
[17:02:58] *** Quits: fabrice (fabrice@347FA24B.24D9B0A0.495EC8CD.IP) (Ping timeout)
[17:03:43] *** Joins: fabrice (fabrice@moz-CC46F4AB.hinet-ip.hinet.net)
[17:04:17] *** Joins: onelson (onelson@moz-DD666EC5.laika.com)
[17:04:18] *** Quits: fabrice (fabrice@moz-CC46F4AB.hinet-ip.hinet.net) (Max SendQ exceeded)
[17:05:00] *** Parts: nical (Nicolas@DA4ABEAF.1DE10CA8.D8E68FF6.IP) ()
[17:05:08] *** Joins: fabrice (fabrice@347FA24B.24D9B0A0.495EC8CD.IP)
[17:05:13] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[17:05:20] *** Quits: vgeddes (vincent.ge@289F3EEF.7EFECA3F.A9EEF49D.IP) (Ping timeout)
[17:05:37] *** Quits: Denommus (user@FB5F40F2.6B2700D6.AD91B79.IP) (Ping timeout)
[17:06:10] <zimbatm> given a struct Config with various attributes, is it possible to create a new instance of the struct without specifying all the fields ?
[17:06:25] <zimbatm> let mut c = Config {};
[17:06:31] <cmr> zimbatm: let new_config = Config { ..old_config };
[17:06:35] <zimbatm> ^ ideally I would like something like that
[17:06:52] <zimbatm> so all the fields always need to be initialized ?
[17:06:55] <cmr> it's not possible to *not* initialize some fields in safe code.
[17:07:04] <cmr> Yes, in Rust, all usable values are always initialized.
[17:07:20] <zimbatm> ok, i was hoping to have default values in that case
[17:07:30] <NiccosSystem> Can you not make a constructor
[17:07:32] <cmr> you can implement the Default trait for that :)
[17:07:54] <bstrie> eddyb: hah, it only shaves off a hundredth of a second, I didn't think println! was quite that efficient :P
[17:08:11] <eddyb> inefficient, you mean?
[17:08:15] <SiegeLord> It's not surprising it's already buffered
[17:08:20] <cmr> bstrie: I'm pretty sure println is already using a task-local buffered stdout.
[17:08:22] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[17:08:23] <eddyb> bstrie: I would suggest not using format macros at all
[17:08:28] <zimbatm> yeah i was hoping to avoid learning traits for now
[17:08:31] <zimbatm> :)
[17:08:33] <eddyb> bstrie: in a loop, that is
[17:08:48] <bstrie> eddyb: this is without using writeln!, even
[17:08:51] <eddyb> hmm
[17:08:52] <bstrie> just the raw write_char
[17:08:52] <cmr> zimbatm: well, you could add a constructor as NiccosSystem suggests, or... just deal with it.
[17:08:59] <eddyb> bstrie: then I don't know
[17:09:02] <cmr> (the convention is Config::new())
[17:09:07] <zimbatm> cmr: thx, i'll just deal with it for now
[17:09:16] <NiccosSystem> Is there a reason not to make a constructor?
[17:09:19] <zimbatm> just wanted to check if i was missing something in the language :)
[17:09:22] <bstrie> eddyb: this is a cross-language benchmark that I'm trying to optimize, but I don't have access to a profiler so I'm just sort of flailing :)
[17:09:24] <cmr> nope
[17:09:33] <zimbatm> NiccosSystem: it's used once in the code base
[17:09:39] <eddyb> bstrie: perf works well on linux
[17:09:44] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Ping timeout)
[17:09:48] <SiegeLord> Sometimes a constructor is tricky to import
[17:09:56] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[17:09:57] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:10:02] <bstrie> eddyb: I'm using perf... but only as an overall timer. I don't know how to see more than that
[17:10:02] <SiegeLord> But that's not often a practical concern
[17:10:10] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[17:10:14] <SiegeLord> I.e. when the constructor is crate local
[17:10:19] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[17:10:25] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[17:10:51] <eddyb> bstrie: how can perf work as a timer o_O?
[17:11:04] *** Joins: Ms2ger (Ms2ger@moz-CB2E71FA.adsl-dyn.isp.belgacom.be)
[17:11:19] <eddyb> rustc -g main.rs -o test; perf record test; perf report
[17:11:39] <NiccosSystem> Oh, there isn't any default 'constructor'
[17:11:40] <bstrie> eddyb: "perf stat foo" is what I'm doing
[17:11:52] <NiccosSystem> You just make a function that returns an instance of the class
[17:11:53] <bstrie> eddyb: last line just lists elapsed time
[17:12:00] <NiccosSystem> or what?
[17:12:25] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[17:12:51] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[17:12:52] <cmr> NiccosSystem: correct.
[17:12:58] <cmr> NiccosSystem: the language does not have constructors.
[17:13:03] <cmr> we just use static methods.
[17:13:12] <NiccosSystem> I see, thanks :-)
[17:13:16] *** Joins: IdolfHatler (idolf@moz-5A7B69C7.math.ku.dk)
[17:14:33] *** Joins: kris (kris@moz-147EE6DF.diku.dk)
[17:16:10] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:17:03] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[17:17:16] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[17:17:36] <eddyb> bstrie: hah, didn't know that existed. try out perf record :)
[17:17:47] <eddyb> the reports are quite nice
[17:18:32] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:19:29] *** Joins: mib_uve0r8 (Mibbit@moz-362CDC0.fttp.sta.comporium.net)
[17:19:38] *** Quits: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP) (Ping timeout)
[17:20:55] *** Quits: canhtak (canhtak@moz-4D8F0D46.wl.t.ulaval.ca) (Quit: canhtak)
[17:21:31] <mib_uve0r8> hey, does anyone know how to print color to stdout? cout << "\033[1;31mbold red text\033[0m\n"; works in c++ but doesn't for me in rust
[17:21:57] <cmr> rusti: "\033"
[17:21:59] -rusti- "\x0033"
[17:22:01] *** Quits: kris (kris@moz-147EE6DF.diku.dk) (Ping timeout)
[17:22:05] *** Joins: kris (kris@moz-5A7B69C7.math.ku.dk)
[17:22:13] <cmr> mib_uve0r8: I don't think we do octal escapes in strings.
[17:22:17] <cmr> rusti: "\033".as_bytes()
[17:22:18] -rusti- &[0u8, 51u8, 51u8]
[17:22:26] <cmr> nope, not in the slightest.
[17:22:55] *** Quits: ricepuddin (graham@moz-B35CFFBD.wlan.ic.ac.uk) (Ping timeout)
[17:23:00] <cmr> mib_uve0r8: see libterm.
[17:23:13] <cmr> mib_uve0r8: http://static.rust-lang.org/doc/master/term/index.html
[17:23:43] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[17:24:41] *** Joins: heftig (heftig@moz-6E0B1C69.dip0.t-ipconnect.de)
[17:25:00] *** Quits: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[17:25:02] <mib_uve0r8> cmr: ty
[17:25:04] <bstrie> eddyb: rustc's telling me that the -g flag doesn't exist, and I don't see it in the help anywhere
[17:25:12] *** Joins: m-r-r (m-r-r@DA163170.3FD22A6B.CF651168.IP)
[17:25:15] <cmr> bstrie: then your rustc is out of date!
[17:25:18] <cmr> -Z extra-debug-info
[17:25:20] <bstrie> only like a week!!
[17:25:23] <bstrie> :P
[17:25:44] <bstrie> I'll recompile I guess... and go to lunch... and then a three-hour meeting...
[17:25:47] *** Quits: calvinmetcalf (cmetcalf@moz-E02DAEDB.hsd1.md.comcast.net) (Quit: calvinmetcalf)
[17:25:50] <bstrie> hopefully it will be done by then
[17:27:02] <bstrie> what's the name of strcat's archlinux rust nightly?
[17:27:12] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[17:27:16] <cmr> rust-git
[17:27:27] <cmr> [thestinger]
[17:27:30] <cmr> SigLevel = Optional
[17:27:32] <cmr> Server = http://pkgbuild.com/~thestinger/repo/$arch
[17:27:34] <cmr> slap that in /etc/pacman.conf
[17:28:11] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:28:44] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[17:28:54] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[17:29:05] <herrwolfe45> is there a rust nightly for brew?
[17:29:20] <cmr> herrwolfe45: I don't think so, at least not a pre-built on?
[17:29:23] <cmr> *one
[17:30:14] <herrwolfe45> thanks cmr
[17:30:55] *** Quits: edwardw (Mibbit@96E7298D.3E260003.B9C6B12A.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:30:59] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[17:31:01] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[17:31:33] *** Quits: fyolnish (fyolnish@moz-4AF31AF9.uqwimax.jp) (Quit: Bye)
[17:32:13] *** Joins: fyolnish (fyolnish@moz-4AF31AF9.uqwimax.jp)
[17:32:32] *** Joins: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[17:32:36] *** Quits: gmjosack (gary@moz-CB7AA3B8.hsd1.ca.comcast.net) (Ping timeout)
[17:34:17] *** Joins: ksev (DrunkenPan@moz-C6488E57.autodesk.com)
[17:35:43] *** Joins: mouse (mouse@moz-4A3624F.broadband.corbina.ru)
[17:36:33] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[17:36:41] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Ping timeout)
[17:37:19] <pzol> ~str.chars() by default are utf8?
[17:37:37] <cmr> pzol: look at the type.
[17:38:00] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[17:38:20] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:38:33] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[17:38:53] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:39:15] <pzol> cmr let s = ~"abc".chars().collect(); -> error: cannot determine a type for this bounded type parameter: 
[17:39:53] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[17:40:06] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[17:40:23] <pzol> what's a~<generic #254> ?
[17:40:28] <cmr> pzol: http://static.rust-lang.org/doc/master/std/str/trait.StrSlice.html#tymethod.chars
[17:40:32] *** Joins: patpat (patpat@moz-1599AAE4.as13285.net)
[17:40:36] <cmr> returns a Chars, which implements Iterator<char>
[17:40:40] <sfackler> pzol: you have to specify the type of s. is it a HashSet? is it a ~[char]?
[17:40:53] <cmr> like the docs say, it's an iterator of the codepoints the string is composed of.
[17:41:15] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[17:41:25] <pzol> well I am desperately trying to get a Rust string into an icu *char pointer... all non-ascii charcters get lost
[17:42:07] <cmr> icu wants char* ? http://static.rust-lang.org/doc/master/std/c_str/trait.ToCStr.html#method.with_c_str
[17:43:15] *** Joins: canhtak (canhtak@moz-4D8F0D46.wl.t.ulaval.ca)
[17:43:28] <pzol> cmr tried that... it mutilates the nonascii chars :(
[17:43:28] *** Quits: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net) (Ping timeout)
[17:43:35] <arielb1> how do you use a macro from a different module in the same crate?
[17:43:56] <cmr> arielb1: every module up to the crate root, starting at the macro, needs #[macro_escape] on it.
[17:44:00] <pzol> cmr Bär becomes BÃ¤r when using icu printf
[17:44:12] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[17:44:45] <arielb1> with or without a semicolon?
[17:44:52] <cmr> arielb1: depends on where you put it...
[17:45:05] <cmr> semicolon makes the attribute apply to the containing item, rather than the following item.
[17:45:47] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:45:54] <cmr> pzol: well, are you using icu correctly?
[17:46:01] <cmr> pzol: CString doesn't mangle non-ascii... 
[17:46:04] *** Joins: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za)
[17:46:33] <pzol> cmr if "Bär".with_c_str(|c_str| {unsafe {libicu::u_printf_52(c_str as *UChar32); } })
[17:46:34] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[17:46:34] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:46:39] <sfackler> if icu doesn't expect UTF8, output will get mangled
[17:46:41] <pzol> s/if//
[17:46:46] <arielb1> up to the root or the common ancestor
[17:46:47] <arielb1> ?
[17:46:47] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[17:46:48] *** Quits: marianoguerra (marianogue@moz-2A143238.dip0.t-ipconnect.de) (Ping timeout)
[17:47:07] <pzol> sfackler I think it expects utf16 
[17:47:12] *** Joins: calvinmetcalf (cmetcalf@moz-88F71F23.hfc.comcastbusiness.net)
[17:47:16] <cmr> arielb1: common ancester.
[17:47:44] <sfackler> pzol: rust-encoding can handle utf16 conversion: https://github.com/lifthrasiir/rust-encoding
[17:47:59] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[17:48:07] <darnuria> Hello! How I can make a integer from a string? :o
[17:48:18] *** Quits: IdolfHatler (idolf@moz-5A7B69C7.math.ku.dk) (Client exited)
[17:48:19] <Yurume> darnuria, from_str::<uint> etc.
[17:48:27] <pzol> sfackler thanks. will try that!
[17:48:28] <arielb1> I get `expected macro name without module separators'
[17:48:34] <sfackler> darnuria: let i: Option<uint> = from_str("12344");
[17:48:35] <Yurume> rusti: from_str::<uint>("314"), from_str::<uint>("not a number")
[17:48:35] -rusti- <anon>:10:32: 10:33 error: expected one of `;`, `}` but found `,`
[17:48:35] -rusti- <anon>:10         from_str::<uint>("314"), from_str::<uint>("not a number")
[17:48:35] -rusti-                                          ^
[17:48:35] -rusti- application terminated with error code 101
[17:48:39] <darnuria> Oki there is any good doc for using traits? 
[17:48:41] <Yurume> rusti: (from_str::<uint>("314"), from_str::<uint>("not a number"))
[17:48:43] -rusti- (Some(314u), None)
[17:48:45] <Yurume> :)
[17:48:49] <cmr> arielb1: right, macros aren't scoped at all.
[17:48:54] <cmr> arielb1: that's why macro_escape is necessary.
[17:49:03] <cmr> arielb1: also, the macro definition needs to come before uses, lexically.
[17:49:05] <darnuria> I'am a little lost with it actually I come from Python and C and we do not have this :(
[17:49:18] <darnuria> (thanks for all)
[17:49:18] <pzol> when rustpk still existed where would it pull git sources to in the workspace? into .rust?
[17:49:30] <sfackler> iirc yes
[17:49:32] <NiccosSystem> let blah = match(from_str::<uint>(string)) { Some(number) => number, None => 0 } isn't that right
[17:49:34] <cmr> pzol: workspace, which was .rust by default.
[17:49:46] <pzol> cmr thx 
[17:50:08] <darnuria> :q rusti 
[17:50:12] <Yurume> darnuria, the tutorial has an whole big section about traits.
[17:50:31] <darnuria> Yurume: Ah thanks :)
[17:50:33] <cmr> darnuria: as does Rust for Rubyits
[17:50:36] <cmr> *Rubyists
[17:50:40] <darnuria> Ok!
[17:51:13] <darnuria> I wrote severals programs to learn idoms :)
[17:51:57] *** kimundi is now known as zz_kimundi
[17:52:32] <darnuria> Yurume: And there is any "rustic way" to extract integer from a str? I have an idea but it will be C like method
[17:52:48] <Yurume> did you mean something like scanf?
[17:53:03] <Yurume> i.e. format-based scanner
[17:53:04] *** Quits: benh (ben@moz-4A0366D2.org) (Ping timeout)
[17:53:14] *** Joins: trinary (Adium@moz-D78CD0D5.hsd1.co.comcast.net)
[17:53:37] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[17:53:52] <darnuria> Hmmm. In my program i'am not obliged to do it. But it could be fun to have something like a secureScanf
[17:53:59] *** Quits: igork (igork@moz-F6DD8476.broadband.corbina.ru) (Quit: Leaving.)
[17:54:24] <Yurume> in Rust the safety means the safety provable by the compiler :)
[17:54:25] <arielb1> cmr: lexically?
[17:54:50] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[17:55:04] <Yurume> you can write "unsafe" codes that are actually very safe if you want, that just means you are responsible for all the errors introduced by unsafe codes.
[17:55:07] <darnuria> Yep. I could use an other way not a problem.
[17:55:24] <darnuria> yep like making a double linked list
[17:55:29] <Yurume> scanf based on the raw string would be quite unsafe...
[17:55:48] *** Quits: arielb1 (Mibbit@moz-57697264.cs.tau.ac.il) (Quit: http://www.mibbit.com ajax IRC Client)
[17:55:57] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[17:56:15] <Yurume> there is some way to do the safe parsing, but there is no officially supported one. I've written some monstery (i.e. big macros) for that purpose, but I think it is specialized to my use only.
[17:56:50] *** Joins: benh (ben@moz-4A0366D2.org)
[17:57:14] *** Quits: ienh (user@moz-F3A1CBB9.lsanca.dsl-w.verizon.net) (Ping timeout)
[17:57:14] <darnuria> Sure. I don't need it here, actually I will make a naive binnary tree implementation without unsafe things. And some thing for playing with stdin (like getting integer ;))
[17:57:34] <photex> morning everyone
[17:57:41] <Yurume> 3:00 AM here XD
[17:57:48] <photex> I'm interested in returning sepcific integer values from fn main ()
[17:57:58] <photex> but that doesn't appear to be possible
[17:58:00] <Yurume> but morning from somewhere in the earth, :p
[17:58:02] <o11c> darnuria: I have some C++ code that could be ported
[17:58:03] <photex> what am I misunderstanding?
[17:58:09] <Yurume> photex, exit code?
[17:58:14] <cmr> photex: as in, exit status of the prcoess?
[17:58:19] <photex> yea
[17:58:21] <Yurume> that should be done with std::os::set_exit_status.
[17:58:21] <photex> h
[17:58:26] <photex> ah!
[17:58:30] <photex> thank you Yurume 
[17:58:44] * photex is very used to just "return X" kind of stuff
[17:58:45] <photex> :)
[17:58:45] <o11c> darnuria: (GPL3+): https://github.com/themanaworld/tmwa/blob/master/src/common/extract.hpp
[17:59:01] *** Joins: zihaowang (zihaowang@moz-8BAEDE0A.hsd1.va.comcast.net)
[17:59:54] *** Quits: kris (kris@moz-5A7B69C7.math.ku.dk) (Client exited)
[18:00:33] *** Joins: kris (kris@moz-147EE6DF.diku.dk)
[18:00:40] <Yurume> photex, note that it is not like exit() call, it rather sets the internal exit code variable to given value.
[18:00:56] <o11c> if GPL3 is not your thing, it's basically: bool extract(str, &mut Extractable) for a bunch of impls of Extractable, including some special purpose ones called "split on comma and extract subfields"
[18:01:15] <photex> Yurume: I understood
[18:01:21] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[18:01:21] *** Quits: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP) (Ping timeout)
[18:01:21] *** Quits: gfarfl (david@61CAEA53.EC1EE148.D1416617.IP) (Ping timeout)
[18:02:10] <Yurume> well, I think the inverse of format! is now possible to define with procedural macros, but not sure how to handle the ambiguity.
[18:02:39] *** Quits: kris (kris@moz-147EE6DF.diku.dk) (Client exited)
[18:02:57] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[18:03:26] *** Joins: kris (kris@moz-147EE6DF.diku.dk)
[18:03:37] *** Joins: Jemaclus (jemaclus@moz-A0EB9A8E.hsd1.ca.comcast.net)
[18:03:47] *** Joins: chromatic (chromatic@moz-28CBC7F4.hsd1.or.comcast.net)
[18:03:50] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:03:50] *** ChanServ sets mode: +ao brson brson
[18:04:40] <darnuria> o11c: Thats not a problem :)
[18:05:02] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[18:05:17] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[18:05:34] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:05:34] *** ChanServ sets mode: +ao brson brson
[18:06:04] *** Joins: gmjosack (gary@F91A859E.75E3DBFA.7AB8439E.IP)
[18:06:16] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[18:06:24] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[18:06:56] <Moor> Hi, I'm new and mostly just playing around with rust -- but I can't figure out how to implement 'first(list)?
[18:07:07] *** Joins: jensnockert (jensnocker@moz-60DC2EAC.mobileonline.telia.com)
[18:07:16] <Ms2ger> What is first, what is list?
[18:07:54] <Moor> Sorry, get the first element of a List<T>, as defined as an example in the tutorial and manual.
[18:08:07] *** Quits: mouse (mouse@moz-4A3624F.broadband.corbina.ru) (Ping timeout)
[18:08:21] *** Joins: mouse (mouse@moz-4A3624F.broadband.corbina.ru)
[18:08:35] <Yurume> Moor, use the pattern matching.
[18:08:36] <Moor> enum List<T> { Cons(T, ~List<T>), Nil }
[18:08:56] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Quit: Leaving...)
[18:09:05] <Moor> I can't figure out how to say "list should be a List<T>, but not be Nil".
[18:09:36] <Yurume> there is no way to "enforce" that, but you can fail on the Nil case.
[18:10:05] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[18:10:11] <Yurume> i.e. match some_list { Cons(..) => println!("it's a cons!"), Nil => fail!("first() requires a Cons") }
[18:10:18] *** Quits: fyolnish (fyolnish@moz-4AF31AF9.uqwimax.jp) (Quit: Bye)
[18:10:21] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.50.1)
[18:10:25] <eddyb> first() would return an Option IMO
[18:10:48] *** Joins: vgeddes (vincent.ge@moz-D8D4FE4D.dsl.mweb.co.za)
[18:10:48] <Moor> Using Option would be better? Why?
[18:10:56] <o11c> yeah, I agree
[18:11:01] <eddyb> Moor: because there's no failure
[18:11:15] <Yurume> Moor, it is hard (or rather, inefficient) to catch the failure issued by fail!().
[18:11:15] <Moor> Okay.
[18:11:17] <o11c> and fail!ure is not an Option
[18:11:18] <eddyb> match list { Cons(data, _) => Some(data), Nil => None } it's quite beautiful
[18:11:25] <zimbatm> what's the best way to show a string representation of any object ?
[18:11:35] <Yurume> zimbatm, println!("{:?}", foo)
[18:11:52] <eddyb> o11c: nice quote :)
[18:11:57] *** Quits: josh (josh@moz-76F75B70.mpls.qwest.net) (Quit: josh)
[18:12:12] <Yurume> if you want a custom representation, your best bet is simply implementing a Show trait.
[18:12:26] <Yurume> eddyb, `fail!`ure!
[18:12:34] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[18:13:04] <zimbatm> thanks Yurume
[18:13:37] <zimbatm> i was using "{}" but most types don't implement the std::fmt::Show trait
[18:13:49] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[18:13:52] <eddyb> not yet
[18:13:57] <Ms2ger> Moor, and you can easily get the fail! behaviour with first(list).unwrap()
[18:14:28] *** zz_kimundi is now known as kimundi
[18:14:47] *** Joins: FreeFull (freefull@moz-1883929A.as13285.net)
[18:14:48] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:14:52] <Moor> Okay. Cool.
[18:15:01] <eddyb> or first(list).expect("expected non-empty list")
[18:15:19] <Ms2ger> Or that
[18:15:25] <cmr> o11c: "fail!ure is not an Option"
[18:15:29] <cmr> o11c: that's brilliant.
[18:15:46] <eddyb> cmr: I know, right?
[18:15:53] <darnuria> Moor: I have maybe the same problematic I try to make a function who return an int on success and None if fail. This is possible? :o
[18:16:06] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Quit: Leaving...)
[18:16:07] <eddyb> TWiR gold right there
[18:16:07] <Ms2ger> -> Option<int>
[18:16:13] <FreeFull> darnuria: Some(int)
[18:16:22] <darnuria> Seriously. I love Rust >_>
[18:16:23] <FreeFull> rusti: Some(3)
[18:16:24] -rusti- Some(3)
[18:16:29] <FreeFull> rusti: None
[18:16:31] <cmr> rusti: fn foo(x: int) -> Option<int> { if x == 42 { Some(x) } else { None } (foo(42), foo(2))
[18:16:34] <cmr> rusti: fn foo(x: int) -> Option<int> { if x == 42 { Some(x) } else { None } } (foo(42), foo(2))
[18:16:34] *** Quits: Jemaclus (jemaclus@moz-A0EB9A8E.hsd1.ca.comcast.net) (Client exited)
[18:16:36] -rusti- pastebinned 8 lines of output: http://ix.io/aaw
[18:16:37] -rusti- pastebinned 7 lines of output: http://ix.io/au1
[18:16:37] -rusti- (Some(42), None)
[18:16:56] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:17:02] <darnuria> Omg thats so simple!
[18:17:04] <darnuria> =O
[18:17:36] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[18:18:30] <FreeFull> Option has methods that makes working with them easier
[18:18:47] *** Joins: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP)
[18:19:03] <darnuria> And there is some method to check the type of a value before returning? I see match but with if statement there is a way?
[18:19:30] <cmr> darnuria: you should match, but there's also is_some and is_none
[18:19:32] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[18:19:42] <cmr> http://static.rust-lang.org/doc/master/std/option/enum.Option.html#method.is_some
[18:19:43] *** Quits: nszceta (hax@moz-4C3EEAB4.wireless.pitt.edu) (Ping timeout)
[18:19:51] *** Joins: jackneill (jackneill@moz-20521AD2.pool.digikabel.hu)
[18:20:09] <eddyb> darnuria: the type is the same, Some/None are variants of an enum, Option<T>
[18:20:38] <bstrie> hm, what's the precedence of `as`
[18:20:41] <bstrie> super low, right?
[18:20:42] <cmr> bstrie: nobody knows.
[18:20:45] <bstrie> haha
[18:20:49] <eddyb> bstrie: it's weird
[18:20:52] * cmr isn't joking
[18:20:52] <darnuria> fn foo(s: ~str) -> Option<int> { let x = number from_str::<int>(input); match x { Some(x) => x, None => None } } is a good way?
[18:20:59] <eddyb> a + b as int is a + (b as int)
[18:21:07] <eddyb> also, x as int < 10 will fail
[18:21:09] <cmr> darnuria: you don't need to do anything.
[18:21:15] <eddyb> rusti: 10 as int < 10
[18:21:15] <cmr> darnuria: just return from_str::<int>(input)
[18:21:16] -rusti- <anon>:10:21: 10:23 error: expected type, found token LIT_INT_UNSUFFIXED(10i64)
[18:21:16] -rusti- <anon>:10         10 as int < 10
[18:21:16] -rusti-                               ^~
[18:21:16] -rusti- application terminated with error code 101
[18:21:30] <eddyb> rusti: 10 as int < x >
[18:21:31] -rusti- <anon>:10:15: 10:24 error: type parameters are not allowed on this type
[18:21:31] -rusti- <anon>:10         10 as int < x >
[18:21:31] -rusti-                         ^~~~~~~~~
[18:21:31] -rusti- error: aborting due to previous error
[18:21:31] -rusti- application terminated with error code 101
[18:21:53] <evanm> k
[18:21:57] <NiccosSystem> darnuria, from_str itself returns Option<T>
[18:22:07] <PeterSP> 13:21 < eddyb> also, x as int < 10 will fail
[18:22:09] <PeterSP> O_O
[18:22:12] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[18:22:31] <eddyb> PeterSP: it expects generic type parameters after int
[18:22:39] <eddyb> (x as int) < 10 is fine
[18:22:56] <PeterSP> But... but... can int even take type parameters?
[18:22:57] <darnuria> fn check_input(input : ~str) -> Option<int> { match from_str::<int>(input) { Some(x) => Some(x), None => None } } (I make this)
[18:23:20] <PeterSP> (OK yes as can be used for other types presumably...)
[18:23:25] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[18:23:34] <NiccosSystem> darnuria, you really don't need to
[18:24:10] <darnuria> NiccosSystem: Why? 
[18:24:36] <PeterSP> is that equivalent to check_input(input : ~str) -> Option<int> { from_str::<int>(input) } ?
[18:24:41] <darnuria> NiccosSystem: This is not complete I have some println in it
[18:24:50] <NiccosSystem> ah, okay
[18:24:56] <darnuria> PeterSP: I know I have to print some borring stuff.
[18:25:04] <PeterSP> ahh
[18:25:11] <darnuria> That's for learning not a realy programs :)
[18:25:14] <NiccosSystem> but uhm
[18:25:32] *** Quits: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP) (Ping timeout)
[18:25:40] <darnuria> I have already read the doc about from_str no worry :))
[18:25:45] <NiccosSystem> alright, goody
[18:27:22] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:27:38] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[18:28:09] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[18:30:34] *** Joins: dmac (Adium@moz-99EF2EE6.hfc.comcastbusiness.net)
[18:30:42] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[18:30:59] <PeterSP> rusti: from_str(~"9223372036854775808")
[18:31:00] -rusti- <anon>:10:9: 10:17 error: cannot determine a type for this bounded type parameter: unconstrained type
[18:31:00] -rusti- <anon>:10         from_str(~"9223372036854775808")
[18:31:00] -rusti-                   ^~~~~~~~
[18:31:00] -rusti- application terminated with error code 101
[18:31:08] <PeterSP> ok that's sensible :P
[18:31:08] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[18:31:21] <PeterSP> rusti: from_str<int>(~"9223372036854775808")
[18:31:21] -rusti- <anon>:10:18: 10:21 error: unresolved name `int`.
[18:31:22] -rusti- <anon>:10         from_str<int>(~"9223372036854775808")
[18:31:22] -rusti-                            ^~~
[18:31:22] -rusti- error: aborting due to previous error
[18:31:22] -rusti- application terminated with error code 101
[18:31:23] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[18:31:29] <cmr> PeterSP: from_str::<int>
[18:31:31] <PeterSP> I am silly <_<
[18:31:41] <NiccosSystem> Indeed
[18:31:42] <cmr> (resolves ambiguity with the operator)
[18:31:45] <PeterSP> yes that is quite obvious a second later
[18:31:47] *** Joins: skade (skade@E45BE4B3.377A644B.FF936C9C.IP)
[18:32:04] *** Joins: mreca (mreca@moz-9B10510C.hsd1.va.comcast.net)
[18:32:30] <k4nar> now that rustpkg has been removed, is there any guidelines for structuring the sources ?
[18:32:32] <PeterSP> also the ~ is unwanted
[18:32:40] <cmr> k4nar: what source?
[18:32:42] <cmr> Oh
[18:32:59] <k4nar> well, source code of my program :)
[18:33:05] <cmr> k4nar: the recommended structure is to put source in a `src/` directory...
[18:33:20] <k4nar> hum, ok
[18:33:20] <cmr> Sometimes, for single-file applications of libraries, the `main.rs` or `lib.rs` is just left bare.
[18:33:28] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Ping timeout)
[18:33:30] <k4nar> and provide a Makefile ?
[18:33:33] <PeterSP> rusti: from_str::<int>("9223372036854775808")
[18:33:35] -rusti- None
[18:33:35] <cmr> if such is desired.
[18:33:50] <cmr> Also note the existence of https://github.com/cmr/cargo-lite
[18:34:10] <k4nar> ok, thanks
[18:34:21] <Moor> Is there some way to have a function take an optional argument?
[18:34:22] <SiegeLord> What's the thinking behind having a temporary package manager?
[18:34:32] <cmr> SiegeLord: it's useful to me.
[18:34:35] <cmr> so I wrote it.
[18:35:06] *** Quits: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP) (Client exited)
[18:35:08] <SiegeLord> That doesn't explain why you tell others to use it :P
[18:35:16] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[18:35:17] <cmr> others may find it useful
[18:35:25] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[18:35:27] *** Quits: vmx (vmx@moz-76C03771.dip0.t-ipconnect.de) (Ping timeout)
[18:36:18] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[18:36:29] <PeterSP> will there be a future rustpkg?
[18:36:31] <SiegeLord> It's very common for temporary solutions to become permanent ones... hopefully cargo-lite is designed well :P
[18:37:19] *** Quits: lerc (quassel@moz-289EFA2.telstraclear.net) (Ping timeout)
[18:38:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:38:28] *** Quits: benh (ben@moz-4A0366D2.org) (Ping timeout)
[18:40:06] <cmr> PeterSP: according to the 1.0 spreadsheet and brson's emails to the list, yes.
[18:40:33] <cmr> SiegeLord: I've tried to avoid doing anything atrocious, but it's certainly not fancy..
[18:43:17] *** Joins: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com)
[18:44:16] <cmr> SiegeLord: I was very close to using a very restrictive (non-modifyable etc) license to avoid the problem of someone forking it when I decide to retire it.
[18:44:39] <SiegeLord> That'd be vile :P
[18:45:06] *** Quits: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za) (Ping timeout)
[18:45:29] *** Quits: pilf (pilf@8FA95888.1A994CBC.4B228AD7.IP) (Quit: pilf)
[18:46:22] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[18:47:17] *** Joins: azita (Azita@moz-8AB4C835.hfc.comcastbusiness.net)
[18:47:28] *** Joins: benh (ben@moz-4A0366D2.org)
[18:47:40] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Input/output error)
[18:48:24] <PeterSP> cmr: that wouldn't actually prevent you from letting them in future
[18:48:33] <PeterSP> and presumably you would because you're not a dick, right? :P
[18:48:35] <sfackler> cmr: github requires all projects to be forkable
[18:49:04] <cmr> sfackler: I wouldn't have used github.
[18:49:13] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[18:49:28] <sfackler> ah
[18:49:38] <cmr> PeterSP: if it were replaced with a package manager I deemed acceptable, I would not have allowed it, no.
[18:49:46] <cmr> I'm serious when I mean I want cargo-lite to die :P
[18:51:16] <cmr> but I didn't decide to that.
[18:51:18] <cmr> *to do
[18:51:21] <cmr> so, that's that :p
[18:52:14] *** Quits: barosl (barosl@34F62860.E551553C.7544CABF.IP) (Quit: 랜덤은 쇠퇴했습니다.)
[18:52:21] *** Joins: jj2baile (jon@moz-345B5EBA.csclub.uwaterloo.ca)
[18:52:33] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:55:00] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:55:54] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[18:56:07] <m-r-r> Hello
[18:56:15] <NiccosSystem> Hello!
[18:56:37] *** Joins: mgottschlag (quassel@moz-65AB7C61.cust.bluewin.ch)
[18:56:49] <m-r-r> How could i create a static array of string in Rust ?
[18:57:19] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[18:57:33] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[18:58:19] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[18:58:20] <m-r-r> I've tryed `static FOO: [str] = ["foo", "bar"];`, but it doesn't works ...
[18:58:21] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[18:58:27] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[18:58:37] <erickt> m-r-r: how about `static v: &'static [&'static str] = ["foo", "bar"]`?
[18:59:09] *** Quits: azita (Azita@moz-8AB4C835.hfc.comcastbusiness.net) (Quit: azita)
[19:00:05] <erickt> rust needs you to put in a static in your static while you static
[19:00:35] <pzol> which encoding does rust assume for stings in source files??
[19:00:52] <erickt> pzol: in rust .rs files? utf8 I believe
[19:00:55] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[19:01:03] <m-r-r> erickt: it works :-) thanks !
[19:01:28] <pzol> erickt hmmm... strange ... I can't get encodings to work ;(
[19:02:21] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[19:02:22] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[19:02:23] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[19:03:18] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.50.1)
[19:03:55] <erickt> pzol: one of our tests checks if we support utf8 in the source: https://github.com/mozilla/rust/blob/master/src/test/run-pass/utf8.rs
[19:04:34] <pzol> erickt ok... thanks, must be something else than... 
[19:04:37] <cmr> pzol: everything is always utf8
[19:04:55] <pzol> cmr thanks... it ends up in icu as crap anyway :(
[19:05:38] *** Joins: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP)
[19:05:51] *** Joins: lerc (quassel@moz-289EFA2.telstraclear.net)
[19:07:09] *** Quits: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP) (Connection reset by peer)
[19:07:24] *** Joins: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP)
[19:09:25] *** Quits: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP) (Ping timeout)
[19:10:05] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Quit: by!)
[19:10:36] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[19:10:44] *** Joins: azita (Azita@moz-8AB4C835.hfc.comcastbusiness.net)
[19:11:28] *** Quits: mreca (mreca@moz-9B10510C.hsd1.va.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[19:12:29] <pzol> progress... now I am getting 牂藄潺祷䈠꓃ੲ
[19:12:31] *** Joins: tq (tq@moz-9FE9CCF4.a251.priv.bahnhof.se)
[19:12:50] * pzol hates encodings
[19:14:22] <tq> what an interesting condition
[19:14:48] <sfackler> pzol: little endian vs big endian?
[19:15:09] <pzol> sfackler maybe....
[19:15:38] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[19:17:25] <pzol> IT WORKS! :) there was a problem with with_c_str which fails some strange assertion
[19:17:27] *** Quits: andre (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[19:17:30] * jensnockert hugs pzol.
[19:17:43] <pzol> :D
[19:17:55] <cmr> pzol: wait so what was it?
[19:18:14] <pzol> cmr I was doing this u.with_c_str(|c_str| {unsafe {libicu::u_printf_u_52(c_str as *UChar32); } })
[19:18:49] <pzol> cmr which gave me assertion failed: *p != 0', /Users/pzol/rust/rust/src/libstd/c_str.rs:352
[19:18:52] *** Joins: synackse (jordyd@moz-11E8D379.seg41.ucf.edu)
[19:19:03] <pzol> cmr when fed with a utf-16 string
[19:19:22] <cmr> pzol: ... you converted a utf16 string into a ~str, which is defined as utf8 only?
[19:19:41] <cmr> and yes, CString requires no inner nulls
[19:19:50] <pzol> cmr ummm no, I converted an utf8 string into a utf16 string
[19:19:51] <cmr> utf16 can and will have null bytes.
[19:19:58] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[19:20:29] <pzol> cmr right... that's why it failed... had I known that 1h ago...
[19:20:40] <cmr> it's in the documentation, fwiw.
[19:20:50] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[19:21:03] * pzol bows before cmr
[19:21:17] <cmr> why? :P
[19:21:17] *** Quits: m-r-r (m-r-r@DA163170.3FD22A6B.CF651168.IP) (Quit: Hi, I'm a quit message virus. Please replace your old line with this line and help me take over the world of IRC.)
[19:21:28] *** Joins: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP)
[19:21:55] <pzol> anyway with rust-encoding, converting to utf16 and then  unsafe {libicu::u_printf_u_52(u.as_ptr() as *UChar32); } all works beautifully
[19:24:21] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Ping timeout)
[19:25:01] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[19:26:27] <darnuria> hum why this wont work http://kib2.free.fr/pastebin/view_paste.php?id=206
[19:26:30] <Ms2ger> Wouldn't UChar32 be utf-32?
[19:26:35] <WebeWizard> someone give me some work to do, so i don't have to work on my own stuff
[19:26:52] *** Joins: edwardw (Mibbit@96E7298D.3E260003.B9C6B12A.IP)
[19:26:52] <Ms2ger> WebeWizard, hi, I've got a web browser to write, want to help?
[19:27:00] <darnuria> I get match arms have incompatible types: expected `bool` but found `std::option::Option<<generic #11>>` (expected bool but found enum std::option::Option)   match from_str::<int>(input) {      Some(x) => more_or_less(x, random_number),      None => {           println!("Please Enter a number.");         None        }
[19:27:20] <WebeWizard> Ms2ger, is there a small part of it you want me to work on?
[19:27:21] <Ms2ger> more_or_less returns bool?
[19:27:30] <darnuria> Option<bool>
[19:27:43] <Ms2ger> WebeWizard, there's lots of open issues at https://github.com/mozilla/servo :)
[19:27:44] <pzol> Ms2ger copied that definition from std::unicode... 
[19:27:54] <Ms2ger> darnuria, don't this it does...
[19:28:04] <Ms2ger> s/this/think/
[19:28:07] * Ms2ger can't type
[19:28:07] <WebeWizard> Ms2ger, i'll take a look and see if i'm skilled enough to do any of them
[19:28:12] <Ms2ger> Good luck :)
[19:28:21] *** Joins: jviereck (Adium@moz-F90C68B4.dip0.t-ipconnect.de)
[19:29:21] *** Joins: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za)
[19:29:34] <darnuria> Ms2ger: I get it.
[19:29:54] <darnuria> Ms2ger: It return bool but input_check return Option<bool>
[19:29:58] <Ms2ger> Indeed
[19:30:06] *** Joins: untwisted (untwisted@moz-3ED7FE1D.ucsc.edu)
[19:30:34] <Ms2ger> darnuria, the error basically says "the first arm returns a bool, but another arm returns something else!"
[19:30:53] <darnuria> Ms2ger: http://kib2.free.fr/pastebin/view_paste.php?id=207
[19:30:55] <darnuria> Ok.
[19:31:04] <darnuria> So if a function return Option<bool>
[19:31:17] <darnuria> All of it's returns should return Option<bool>?
[19:31:21] *** Joins: alexherbo2 (alexherbo2@moz-9AE52DD7.w90-3.abo.wanadoo.fr)
[19:31:26] <Ms2ger> Yep
[19:31:34] <darnuria> There is no bool -> Option<bool> implicitly?
[19:31:36] <darnuria> Ok nice.
[19:31:37] <cmr> darnuria: no.
[19:33:01] <darnuria> cmr: I am wrong on what? 
[19:33:19] <cmr> darnuria: No, as in there is no implicit type conversion
[19:33:20] <darnuria> (thats cool if there is no implicit conversion for everything)
[19:33:33] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[19:33:45] <darnuria> Oki I didn't make the like between your "no
[19:33:50] <darnuria> and my assumption XD
[19:33:50] *** Quits: fmtq (fmt@moz-5769BD38.static.tpgi.com.au) (Ping timeout)
[19:33:53] <cmr> type safety is always preserved.
[19:33:58] <kmc> there's no implicit type conversion from/to structs/enums... the closest you get is that with "newtype structs" you can access the single field of x as *x
[19:34:09] <cmr> kmc: not anymore.
[19:34:12] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[19:34:13] <kmc> oh really
[19:34:15] <kmc> cool
[19:34:16] <cmr> that deref was removed
[19:34:21] <kmc> i never liked that feature :)
[19:34:32] <darnuria> cmr: Logical. So I can say bool -> Option<bool> with a method?
[19:34:42] <kmc> write Some(true) or Some(false)
[19:34:44] <cmr> darnuria: Some(your_bool)
[19:34:46] <darnuria> Oki.
[19:34:57] <darnuria> cmr: ...So simple... U_U
[19:35:04] <cmr> darnuria: yup :)
[19:35:04] <kmc> "Some" is a constructor, which makes it kind of like a function, but you can pattern match on it too
[19:35:52] <cmr> rusti: fn foo<T>(x: T) -> Option<T> { Some(x) } match Some(32i) { foo(i) => i, None => 42 }
[19:35:53] <darnuria> I am really supprised... Rust seems very difficult in the tutorial but in practice it's nice concise and easy in some way...
[19:35:53] -rusti- <anon>:10:68: 10:74 error: mismatched types: expected `std::option::Option<int>` but found a structure pattern
[19:35:54] -rusti- <anon>:10         fn foo<T>(x: T) -> Option<T> { Some(x) } match Some(32i) { foo(i) => i, None => 42 }
[19:35:54] -rusti-                                                                              ^~~~~~
[19:35:54] -rusti- error: aborting due to previous error
[19:35:55] -rusti- application terminated with error code 101
[19:36:10] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[19:36:11] <cmr> oh good that bug seems to have been fixed.
[19:36:21] *** Joins: dmckeone (dmckeone@moz-7652413D.cg.shawcable.net)
[19:37:16] <sfackler> darnuria: the tutorial definitely needs some work :)
[19:37:25] <kmc> darnuria: glad you think so :)
[19:37:52] *** Joins: gfarfl (david@61CAEA53.EC1EE148.D1416617.IP)
[19:37:55] <kmc> darnuria: Rust has some complexity that's inherent in the problem of systems programming... C also has ideas of owned vs. borrowed pointers, you just get no help from the compiler in keeping them straight :)
[19:38:37] *** Quits: synackse (jordyd@moz-11E8D379.seg41.ucf.edu) (Ping timeout)
[19:39:19] *** Quits: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za) (Ping timeout)
[19:39:22] <darnuria> kmc: I like the way of rust like You write something them compilers and test, correct yours assumptions.
[19:39:33] <kmc> yeah! type systems are pretty great.
[19:39:36] <darnuria> tests*
[19:39:56] *** Joins: mawuli (mawuli@moz-5ADAB167.com.gh)
[19:39:56] *** Quits: mawuli (mawuli@moz-5ADAB167.com.gh) (Quit: mawuli)
[19:40:11] <darnuria> With Rust type system and a good editor plugin compilation is really the last thing I have to do :)
[19:40:39] <dschatzberg> a type system doesn't obviate the need to test in all cases
[19:40:40] *** Joins: mawuli (mawuli@moz-5ADAB167.com.gh)
[19:40:46] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[19:40:49] <darnuria> I just have to write test, code, and then compile to test if everything work well. 
[19:40:50] <Ms2ger> But it definitely helps :)
[19:40:54] *** Quits: sankha93 (uid12218@moz-31ABA2C0.irccloud.com) (Ping timeout)
[19:41:19] *** Quits: zil (sid23500@moz-31ABA2C0.irccloud.com) (Ping timeout)
[19:41:19] *** Quits: Afuna (sid21127@moz-31ABA2C0.irccloud.com) (Ping timeout)
[19:41:19] *** Quits: lenary (sid5084@moz-31ABA2C0.irccloud.com) (Ping timeout)
[19:41:19] *** Quits: tomdale (sid5518@moz-31ABA2C0.irccloud.com) (Ping timeout)
[19:41:19] *** Quits: escalant3 (uid14896@moz-31ABA2C0.irccloud.com) (Ping timeout)
[19:41:19] *** Quits: cmeiklejohn (sid1900@moz-31ABA2C0.irccloud.com) (Ping timeout)
[19:41:19] *** Quits: whitglint (uid15486@moz-31ABA2C0.irccloud.com) (Ping timeout)
[19:41:21] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[19:41:31] <darnuria> dschatzberg: Yes but, With syntastics on vim I have a very good idea, of the quality of my code.
[19:41:44] *** Quits: marc_ (uid5324@moz-31ABA2C0.irccloud.com) (Ping timeout)
[19:41:45] <darnuria> (the behaviour is better than "quality"*
[19:41:50] <darnuria> )*
[19:42:10] <darnuria> I think the Rust type system is a part of it :)
[19:42:31] <Eridius> never heard of Syntastic before. Looks neat
[19:42:36] *** Quits: zihaowang (zihaowang@moz-8BAEDE0A.hsd1.va.comcast.net) (Client exited)
[19:42:41] <kmc> dschatzberg: sure, but it means you write fewer tests and they're more about the problem at hand, rather than boilerplate plumbing
[19:42:45] <darnuria> Eridius: That's Rocks!
[19:42:59] <zxcdw> Soon 3k subscribers in /r/rust
[19:43:09] <cmr> zxcdw: wow really?
[19:43:14] <cmr> 2k was, like, just recently.
[19:43:14] <kmc> hence the sense of fear when your program finally compiles... because it's not "there are no bugs anymore!" but rather "there are only tricky logic bugs anymore!"
[19:43:14] <zxcdw> damn, feels as if it was just the other day we hit 2k
[19:43:17] <zxcdw> Yeah :D
[19:43:25] <darnuria> github -> 'scrooloose/syntastic.git'
[19:43:42] <darnuria> kmc: yep thats it.
[19:44:01] <Eridius> darnuria: offhand, how do I teach syntastic about the -L flags my file needs to compile?
[19:44:14] <cmr> Eridius: don't need it.
[19:44:18] <kmc> types help with testing too... Haskell's QuickCheck is a great example
[19:44:18] <cmr> Eridius: it runs --parse-only
[19:44:21] <Eridius> cmr: it's complaining about `extern mod lua`
[19:44:24] <cmr> hm
[19:44:24] <Eridius> ah, so I can just ignore that then?
[19:44:24] <darnuria> kmc: In C when your code is Syntaxicaly correct, you have to test the rest ;)
[19:44:45] <kmc> yeah. also getting memory safety from the type system is a huge win, because it's very hard to test
[19:44:52] <kmc> especially under adversarial conditions
[19:44:56] <zxcdw> It was just 8 months ago we hit 1k, and *only* 2 months ago we hit 2k
[19:45:02] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Input/output error)
[19:45:03] <zxcdw> doubling every 3-4 months?
[19:45:05] *** Joins: zihaowang (zihaowang@moz-8BAEDE0A.hsd1.va.comcast.net)
[19:45:46] <darnuria> Eridius: I use syntastic with this option from my plugin.vim file : https://github.com/darnuria/my_dotfiles/blob/master/.vim/plugins.vim
[19:46:55] <darnuria> zxcdw: I will continue with conferences, blogging, meetups etc :)
[19:47:08] <Eridius> darnuria: nice symbols
[19:47:17] *** Joins: valenting (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP)
[19:47:33] <Eridius> darnuria: what's quickfix?
[19:48:14] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[19:48:22] *** Joins: claudiu_ (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP)
[19:48:23] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[19:48:54] *** Quits: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net) (Ping timeout)
[19:49:07] *** Joins: voxpopuli (fanservice@71D59995.6A843466.689607DE.IP)
[19:49:47] *** Joins: sunfish (chatzilla@moz-C06D9702.mtv1.mozilla.com)
[19:51:15] *** Joins: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net)
[19:51:16] *** Quits: claudiu_ (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP) (Connection reset by peer)
[19:51:31] *** Quits: herrwolfe45 (user@CACBD77F.4EBBBE62.C082B7DC.IP) (Ping timeout)
[19:51:52] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:53:11] <darnuria> Eridius: Something for the Gutter
[19:53:36] <darnuria> Like git gutter but with some candy feature. :)
[19:53:44] <sw17ch> any one tried making QuickCheck for Rust yet?
[19:53:47] <darnuria> like Neobundle it's Vundle with more fun.
[19:54:08] <darnuria> sw17ch: QuickCheck?
[19:54:31] <sw17ch> darnuria: http://en.wikipedia.org/wiki/QuickCheck
[19:54:44] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:55:07] *** Joins: synackse (jordyd@moz-11E8D379.seg41.ucf.edu)
[19:55:22] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:55:22] *** ChanServ sets mode: +ao brson brson
[19:56:25] *** Quits: lerc (quassel@moz-289EFA2.telstraclear.net) (Client exited)
[19:57:47] <darnuria> ok
[19:58:02] <cmr> sw17ch: yes, there was one.
[19:58:09] <cmr> certainly hopelessly out of date now.
[19:58:14] <cmr> it used @fn etc very heavily.
[19:58:34] *** Joins: tdc (santegoeds@moz-5EFFF6C2.range86-135.btcentralplus.com)
[19:58:42] <Armavica> hi! sorry for the naive question, but I always wondered what makes Rust (or Go) executables so large. Is it inherent to the language/compiler or is it just a consequence of the "youth" of the project?
[19:58:50] <cmr> Armavica: static linking.
[19:59:12] <cmr> Armavica: -C prefer-dynamic and your binaries shrink by megabytes :)
[19:59:48] *** Joins: jdm (jdm@E595D12E.1196002C.7DBB297B.IP)
[19:59:48] *** ChanServ sets mode: +o jdm
[19:59:58] <cmr> Armavica: of course, we're also part to blame, for generating so much code, and not optimizing out all of the unused stuff.
[20:00:00] *** Quits: zihaowang (zihaowang@moz-8BAEDE0A.hsd1.va.comcast.net) (Client exited)
[20:00:05] <Armavica> cmr: it is still not comparable to the size of a C/C++ binary, is it?
[20:00:07] <cmr>  but the root cause of largeness is static linking.
[20:00:09] <cmr> Armavica: it is, yes.
[20:00:17] <cmr> Armavica: hello work is something like 4 or 8K
[20:00:21] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 30.0a1/20140210030201])
[20:00:28] <sw17ch> cmr: cool. i might take a look again
[20:00:44] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[20:00:47] <cmr> Armavica: 12K, sorry.
[20:00:55] <sw17ch> Armavica: you'd be surprised how large a statically linked C program can be
[20:01:53] <Armavica> cmr: indeed
[20:02:32] <cmr> Armavica: C and C++ hello world with clang is 8K, with puts and std::cout
[20:03:13] *** Joins: Gordon (Mibbit@moz-4A19983C.ip227.fastwebnet.it)
[20:03:24] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:03:49] *** kimundi is now known as zz_kimundi
[20:03:58] <dmckeone> cmr: Tried rustc helloworld.rs -C prefer-dynamic -- that gave an error about an unrecognized 'C'.  Is there a difference with what you were saying and rustc -Z prefer-dynamic?
[20:04:01] <Armavica> ok, thank you for your answers
[20:04:12] <SiegeLord> D hello world is 620 K with Tango (1.2 MB with Phobos)
[20:04:27] <SiegeLord> Both statically linked as well
[20:04:28] <cmr> dmckeone: a bunch of -Z options were moved under -C
[20:04:41] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.50.1)
[20:04:52] <dmckeone> Ah, ok.  Thanks.
[20:05:07] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[20:06:06] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[20:06:18] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:06:34] <sw17ch> Armavica: here's some numbers for a C compiler: http://vpaste.net/DYSp8
[20:06:44] *** Joins: igork (igork@moz-F6DD8476.broadband.corbina.ru)
[20:07:02] <cmr> SiegeLord: so, forgive my ignorance, but how can I test that locally to poke around with it? What is the source, and how do I compile it?
[20:07:08] <cmr> (I have dmd and ldc installed...)
[20:07:31] <SiegeLord> import std.stdio; void main() { writeln("hello world"); }
[20:08:10] *** Joins: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP)
[20:08:16] <Gordon> is there a way to do something like struct Point {x: int, y: int, z: int }; let p = Point {x: 12, ..default } ?
[20:08:31] <cmr> Gordon: sure, if you have a value `default` to take the defaults from.
[20:08:41] <cmr> Gordon: otherwise you can make a function returning a struct filled with defaults...
[20:08:44] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Quit: Leaving)
[20:08:46] <cmr> Gordon: or implement Default...
[20:08:56] <Armavica> sw17ch: I just did it too ;)
[20:09:21] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[20:09:29] <Gordon> can you explain the first way? what type does the default need to be?
[20:09:41] <cmr> Gordon: a value of type Point
[20:09:50] <cmr> Gordon: it will fill in the unspecified fields from it.
[20:10:13] *** Quits: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP) (Ping timeout)
[20:10:22] *** Quits: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP) (Client exited)
[20:10:48] <Gordon> and the default trait? can I refer to the static function?
[20:11:10] <cmr> yup, you can say ..Default::default()
[20:11:15] <cmr> (a bit ugly, unfortunately)
[20:12:36] <Gordon> thanks, this is pretty nice
[20:13:07] *** Quits: canhtak (canhtak@moz-4D8F0D46.wl.t.ulaval.ca) (Quit: canhtak)
[20:14:48] <darnuria> Thanks for all ! Have a good day :)
[20:15:49] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[20:16:12] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[20:16:24] *** Quits: edwardw (Mibbit@96E7298D.3E260003.B9C6B12A.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:17:29] *** Joins: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP)
[20:17:54] *** Joins: canhtak (canhtak@moz-4D8F0D46.wl.t.ulaval.ca)
[20:19:08] *** Quits: azita (Azita@moz-8AB4C835.hfc.comcastbusiness.net) (Quit: azita)
[20:21:12] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Input/output error)
[20:21:41] *** Joins: kvark (Mibbit@9A8A5739.49975FB2.AE2D72A6.IP)
[20:22:08] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[20:22:20] <silven> What's the most lightweight construct for syncronization of tasks I can use in rust? a channel? mutex? Like I want to spawn a bunch of tasks, and then give a signal to them to do work, and then wait for all to finish
[20:22:51] *** pmoore is now known as pmoore|break
[20:23:18] *** Quits: steveklabnik (uid17044@moz-A42E5B7B.irccloud.com) (NickServ (GHOST command used by steev))
[20:23:28] <cmr> silven: perhaps a barrier?
[20:23:29] *** Joins: steveklabnik_ (uid17044@moz-A42E5B7B.irccloud.com)
[20:23:46] *** Joins: steveklabnik (steev@B1BA5385.27F34CF7.5670445F.IP)
[20:23:59] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[20:24:14] <cmr> nope, wrong direction.
[20:24:29] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[20:24:31] <cmr> although, not necessarily.
[20:24:34] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[20:24:45] <cmr> silven: http://static.rust-lang.org/doc/master/sync/struct.Barrier.html
[20:25:27] <silven> I was thinking SharedChan for signaling finish
[20:25:40] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[20:25:41] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:25:46] <silven> But starting is worse, but then again, maybe that doesn't need to be synced
[20:25:59] <silven> But i still need to signal it
[20:26:48] <cmr> so a nice way, I think, would be to use the barrier. have your coordinating task be included in the count. spawn all the tasks, then wait on the barrier, then wait again for them all to finish.
[20:27:28] <silven> Can a barrier be reused?
[20:27:34] <cmr> I think so!
[20:27:58] <cmr> (even if they weren't you could just use two)
[20:28:03] *** Joins: fabiand (fabiand@moz-AC832C6B.adsl.alicedsl.de)
[20:32:46] <silven> (I was kinda thinking about using the syncs in a loop, that's why I asked for the most lightweight one)
[20:33:57] *** Quits: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP) (Client exited)
[20:34:05] *** Quits: valenting (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP) (Ping timeout)
[20:34:17] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[20:37:03] *** Quits: fabiand (fabiand@moz-AC832C6B.adsl.alicedsl.de) (Quit: Verlassend)
[20:37:20] *** Joins: manuels (Mibbit@moz-9B05CD30.unity-media.net)
[20:37:38] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[20:37:44] *** Quits: halleck (a@moz-372B240D.dynamic.mnet-online.de) (Ping timeout)
[20:38:34] *** Joins: reima (Instantbir@moz-6F6DFF8C.dip0.t-ipconnect.de)
[20:38:53] <manuels> Hi, quick question on the rust syntax: I have a function like this fn read(vector: &mut [u8]) { vector.slice_to(100) }, however I cannot figure out what the correct return type of this function should be. Any help appreciated!
[20:39:17] <cmr> manuels: http://static.rust-lang.org/doc/master/std/vec/trait.ImmutableVector.html#tymethod.slice_to
[20:39:59] <cmr> fn read<'a>(vector: &'a mut [u8]) -> &'a mut [u8] { vector.mut_slice_to(100) }
[20:40:02] <reima> manuels: My guess: fn read<'a>(vector: &'a mut [u8]) -> &'a [u8]
[20:40:17] <reima> Seems I guessed right :)
[20:40:17] *** Quits: synackse (jordyd@moz-11E8D379.seg41.ucf.edu) (Ping timeout)
[20:40:20] <cmr> nope.
[20:40:25] <cmr> can't return a mutable slice
[20:40:28] <silven> One thing I really don't like is the limited depth-limit of the borrow-checker, when using nested proc() {..}s, you need to manually shift a value down level by level when you're using it in the innermost >_<
[20:40:30] <cmr> *immutable
[20:40:38] <reima> Oh, ok, missed that
[20:40:39] *** jorendorff_away is now known as jorendorff
[20:40:41] <cmr> silven: yeah, really annoying :(
[20:41:56] <manuels> thanks, under which keyword can I find documentation on the 'a syntax. that's new to me.
[20:42:25] <cmr> manuels: https://github.com/mozilla/rust/wiki/The-Rusticon
[20:42:28] <cmr> manuels: named lifetime.
[20:42:36] <manuels> great, thanks @cmr
[20:42:41] *** Joins: valenting (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP)
[20:42:49] <cmr> or, just lifetime.
[20:42:59] <cmr> (all references have a lifetime, even if it's implicit)
[20:43:59] <abinader> guys, I need to match a managed box, however compiler says it is obsolete syntax and I shall use a nested match instead
[20:44:10] <abinader> though I'm not sure what nested match would look like
[20:44:27] <cmr> pcwalton: ^
[20:44:32] <cmr> I don't know what that means either.
[20:44:47] * pzol has been told by Rust: You've met with a terrible fate, haven't you?
[20:44:54] <pcwalton> don't match a managed box
[20:44:55] <pcwalton> you just can't
[20:44:58] <pcwalton> dereference it explicitly
[20:45:09] <sfackler> pzol: that'll happen if you fail!() while already fail!()ing
[20:45:24] *** Quits: toshok (toshok@moz-43741342.cat) (Ping timeout)
[20:45:50] <abinader> I can't: mismatched types: expected `&'a list::List<T>` but found `&@list::List<T>`
[20:46:08] *** Joins: marianoguerra (marianogue@moz-63502B79.dip0.t-ipconnect.de)
[20:46:18] *** Joins: toshok (toshok@moz-43741342.cat)
[20:46:22] * abinader is one step closer to replacing @'s with Gc<> in libcollections/list.rs
[20:46:24] <pcwalton> use **?
[20:46:27] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[20:46:31] <pcwalton> **foo
[20:46:37] * pzol is having fun with segfaults 
[20:46:47] *** Quits: pigoz (pigoz@moz-93D3080C.as5577.net) (Ping timeout)
[20:46:50] <pzol> sfackler wow!
[20:47:00] *** Joins: pigoz (pigoz@moz-93D3080C.as5577.net)
[20:47:34] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:49:02] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[20:49:53] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:50:24] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:51:17] <pzol> this  let mut buf: ~[UChar] = std::vec::with_capacity((self.len + 1) as uint); will reserve a buffer to which a C function can write?
[20:51:23] <eibwen> sfackler: how would that work?
[20:51:36] <pzol> UChar  = u8
[20:52:03] <cmr> pzol: yes.
[20:52:04] <sfackler> eibwen: double failure? I think it can only happen if you fail in a destructor
[20:52:06] *** Quits: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com) (Ping timeout)
[20:52:18] <sfackler> or runtime bugs
[20:52:31] *** Joins: tjc (tjc@9AB07901.2D024FDB.284344F5.IP)
[20:52:31] *** ChanServ sets mode: +o tjc
[20:52:34] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:52:35] <eibwen> destructors are still run on fail!()ure?
[20:52:42] <cmr> eibwen: of course they are.
[20:52:47] <cmr> how else would task failure be safe?
[20:52:50] *** Joins: halleck (a@6355BD.E3C7EE03.9C269F8F.IP)
[20:52:59] <pzol> cmr then I pass that into the C function with buf.as_mut_ptr() right?
[20:53:06] <sfackler> that's why destructors are great!
[20:53:08] <cmr> pzol: yup.
[20:53:30] *** Joins: synackse (jordyd@moz-11E8D379.seg41.ucf.edu)
[20:53:31] <eibwen> this is just like throwing exceptions in destructors. yielding much fun
[20:53:37] <eibwen> but you say rust detects that :)
[20:53:57] <pzol> cmr thanks... grrr it does some random stuff  + segfaults though :(
[20:54:29] <sfackler> eibwen: I mean, the process will abort if you double fail, but I wouldn't call it detection :P
[20:54:46] <sfackler> it's more of a "oh man, what else can we do?"
[20:54:54] <eibwen> how is that not detection?
[20:55:34] <sfackler> oh, by detection I was thinking forbidding failure or something
[20:55:43] <eibwen> sfackler: will the process fail generally if fail!()ing in a destructor?
[20:55:45] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[20:55:51] *** Quits: tdc (santegoeds@moz-5EFFF6C2.range86-135.btcentralplus.com) (Quit: Leaving)
[20:55:59] <eibwen> otherwise it could lead to resource leakage
[20:56:10] <sfackler> nope, everything will work if the task isn't currently failing
[20:56:10] *** Joins: lerc (quassel@moz-289EFA2.telstraclear.net)
[20:56:15] <sfackler> I think?
[20:56:48] <sfackler> allowing failure in destructors allows for some nice raii patterns imo
[20:56:50] <cmr> correct.
[20:57:01] <eibwen> mh
[20:57:08] <eibwen> that sounds unclean
[20:57:12] <sfackler> you have to be careful when you're writing it obviously
[20:57:33] <eibwen> say you have a file (which can probably fail!() on close)
[20:58:00] <cmr> rusti: struct Foo; impl Drop for Foo { fn drop(&mut self) { fail!("maybe?") } } Foo;
[20:58:02] -rusti- pastebinned 10 lines of output: http://ix.io/aul
[20:58:05] <eibwen> so, depending on whether the destructor is called during a fail!() stack unwind or just a normal function return, it makes the process fail or not
[20:58:17] <cmr> feh.
[20:58:22] <sfackler> eibwen: I've been using a fail_unless_failing!() macro for that kind of thing
[20:58:22] <cmr> rusti: struct Foo; impl Drop for Foo { fn drop(&mut self) { fail!("maybe?") } } let x = Foo; 42
[20:58:23] -rusti- <anon>:10:86: 10:87 warning: unused variable: `x`, #[warn(unused_variable)] on by default
[20:58:23] -rusti- <anon>:10         struct Foo; impl Drop for Foo { fn drop(&mut self) { fail!("maybe?") } } let x = Foo; 42
[20:58:24] -rusti-                                                                                                ^
[20:58:24] -rusti- task '<main>' failed at 'maybe?', <anon>:10
[20:58:25] -rusti- application terminated with error code 101
[20:58:42] *** Quits: synackse (jordyd@moz-11E8D379.seg41.ucf.edu) (Ping timeout)
[20:58:47] *** Quits: eddyb (eddy@688E9026.F7C96DA2.FCAAE698.IP) (Ping timeout)
[20:58:51] <eibwen> mh
[20:58:53] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[20:59:11] *** Joins: eddyb (eddy@688E9026.F7C96DA2.FCAAE698.IP)
[20:59:12] <sfackler> my strategy for raii stuff that can fail at cleanup time is to have a destructor that fails if there's an error
[20:59:29] *** Quits: vertexclique (vertexcliq@DC63F157.C7ED8189.6894ADF4.IP) (Client exited)
[20:59:31] <eibwen> sfackler: that however, sounds like ignoring errors
[20:59:35] <sfackler> and a fn finish(self) -> Result<(), ErrorType> that does the same cleanup but gives you the erorr info instead of failing
[21:00:05] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[21:00:10] <sfackler> I think it depends on the context maybe
[21:00:20] <sfackler> but I kind of think that a library should never cause the process to abort
[21:00:41] <abinader> pcwalton: ok so I tried making a ref from the dereferenced managed foo - &(**foo) - but compiler says it cannot root managed value long enough (it would need to be root for the lifetime &'a) - so I guess now there's no way of returning a reference of the @ value (needed to implement Iterator's next())
[21:01:06] <abinader> at this point I don't think it's worth continuing to use @ as boxing for List in libcollections/list
[21:01:22] <sfackler> it'd be nice to be able to add to the failure message if you're in a destructor while unwinding
[21:01:27] *** Quits: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net) (Input/output error)
[21:01:40] <sfackler> so you wouldn't abort, but would be able to give some indication that there was another problem
[21:01:48] *** Joins: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net)
[21:01:48] *** zz_kimundi is now known as kimundi
[21:02:01] *** Quits: skade (skade@E45BE4B3.377A644B.FF936C9C.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:02:01] *** Joins: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net)
[21:02:12] *** Quits: eddyb (eddy@688E9026.F7C96DA2.FCAAE698.IP) (Ping timeout)
[21:02:35] *** Joins: eddyb (eddy@688E9026.F7C96DA2.FCAAE698.IP)
[21:02:48] *** Quits: halleck (a@6355BD.E3C7EE03.9C269F8F.IP) (Ping timeout)
[21:02:55] <ercxx> Did SharedChan functionality go in Chan ?
[21:02:56] *** Joins: skade (skade@E45BE4B3.377A644B.FF936C9C.IP)
[21:02:57] *** Joins: dukeleto (dukeleto@104402BE.9B9053F6.D4043753.IP)
[21:03:11] <sfackler> ercxx: yep, Chan can be clone()d now
[21:03:28] *** Quits: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net) (Ping timeout)
[21:03:44] <pcwalton> abinader: yes, that's right, there is no way to do that.
[21:03:45] <ercxx> sfackler: The docs also say it can be owned only by one task but it implements Send.
[21:04:30] <sfackler> ercxx: each copy is owned by one task, but you can make extra copies to give to multiple tasks iirc
[21:04:35] <sfackler> the docs may be a bit out of date
[21:04:37] *** Quits: skade (skade@E45BE4B3.377A644B.FF936C9C.IP) (Ping timeout)
[21:04:37] <sfackler> not sure
[21:04:42] <ercxx> sfackler: ok, thank you.
[21:04:59] <eddyb> I wish Chan/Port reflected their functionality
[21:05:09] <ercxx> eddyb: What do you mean?
[21:05:18] <eddyb> which is the sender and which is the receiver?
[21:05:19] <cmr> eddyb: there was just a thread on the ML about that.
[21:05:28] <eddyb> cmr: I may have seen that
[21:05:45] <eddyb> channel and port are partial synonyms for me
[21:05:56] <cmr> I would agree with that.
[21:06:03] <abinader> pcwalton: thanks :-) funny tho that Servo's Rust version still allows me to use the managed pointer pattern, so this fix is kind of recent
[21:06:06] <cmr> I can barely remember what it means.
[21:06:15] *** Quits: doomlord_ (servitor@moz-9B2006BF.range109-151.btcentralplus.com) (Client exited)
[21:06:46] <ercxx> using the words 'send' and 'receive' somewhere in the naming would probably make sense.
[21:07:39] <huon> https://github.com/mozilla/rust/issues/11765
[21:08:24] <cmr> huon: has it been an issue this whole time, not an ML thread?
[21:08:54] *** Joins: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP)
[21:09:47] *** Joins: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP)
[21:10:05] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[21:10:58] *** Quits: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP) (Ping timeout)
[21:11:19] <PeterSP> kimundi: There is no platform-specific switching in the code I get this warning in -- I think it's just an error introduced when a use super::* was changed to a use super::{more than needed}
[21:11:31] <PeterSP> (9 hours later)
[21:11:38] <kimundi> PeterSP: Great, then you can just remove it :)
[21:11:44] *** Quits: Gordon (Mibbit@moz-4A19983C.ip227.fastwebnet.it) (Quit: http://www.mibbit.com ajax IRC Client)
[21:12:20] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[21:12:50] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[21:15:37] <huon> cmr: the mailing list thread transmuted into an issue
[21:15:43] <cmr> ok.
[21:15:58] <PeterSP> pnkfelix: There's no secret reason that https://github.com/mozilla/rust/commit/d2d1129ad071653e32709706bb16606506ca227a#diff-2d2459525b265f4577c4c6de94ff7a52L2594 really needs the BigInt, right?
[21:16:28] <PeterSP> (You can tell my confidence level is *really* high here <_<)
[21:16:41] <huon> PeterSP: if it's warned as unused, you can remove it
[21:16:51] <pnkfelix> PeterSP: Yeah I think you can take it out
[21:17:23] <pnkfelix> I probably put it in by accident when I was trying to get rid of the globs to placate review.
[21:17:49] <SiegeLord> I feel like if globs are removed, nobody will want to fix them anymore :P
[21:17:53] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[21:18:18] <pnkfelix> SiegeLord: I continue to think that if we remove `pub use` globs, we'll have a lot easier time fixing the remainder.
[21:18:37] <SiegeLord> Those are the best kind ;(
[21:18:53] <huon> std::libc would be come ugly... :(
[21:18:55] <SiegeLord> https://github.com/SiegeLord/RustAlgebloat/blob/master/src/lib.rs
[21:19:15] <huon> but other than that, pub use ::* isn't used much
[21:19:29] <pnkfelix> huon: true.  Though ... can macros expand into `use` items?
[21:20:19] <sfackler> nope
[21:20:25] <pnkfelix> ah well
[21:20:29] <sfackler> they could though
[21:21:21] <SiegeLord> Maybe I use modules too much and should stick with include_file!
[21:21:21] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 30.0a1/20140213030201])
[21:22:11] <PeterSP> include_file! sounds evil (in the C++ sense)
[21:22:15] *** Joins: halleck (a@moz-372B240D.dynamic.mnet-online.de)
[21:22:44] *** Joins: herrwolfe45 (user@CACBD77F.4EBBBE62.C082B7DC.IP)
[21:22:56] <SiegeLord> It's basically the same as modules, except without namespacing overhead
[21:23:17] <herrwolfe45> hi - i've not worked with openssl before, but are there currently any bindings to work with it from Rust? I've found rust crypto, but it doesn't look like it is current.
[21:23:22] *** Quits: reima (Instantbir@moz-6F6DFF8C.dip0.t-ipconnect.de) (Quit: Leaving.)
[21:23:35] <cmr> herrwolfe45: https://github.com/sfackler/rust-openssl
[21:24:15] *** Joins: twi (Adium@2CCDF5AA.B720E8FD.A622856D.IP)
[21:25:46] *** pmoore|break is now known as pmoore
[21:26:10] <herrwolfe45> thanks cmr 
[21:26:17] *** Joins: ofeldt- (ofeldt@moz-B304C5B.dip0.t-ipconnect.de)
[21:26:21] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[21:26:23] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[21:27:15] *** Quits: ofeldt (ofeldt@moz-E8509514.dip0.t-ipconnect.de) (Ping timeout)
[21:30:09] *** Quits: aurynj (Eon@BF507CFB.1CEEC774.4C51A5AE.IP) (Ping timeout)
[21:30:31] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[21:30:42] *** Quits: sunfish (chatzilla@moz-C06D9702.mtv1.mozilla.com) (Ping timeout)
[21:30:45] *** Quits: tjc (tjc@9AB07901.2D024FDB.284344F5.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:30:59] *** Joins: kvanb (kvanb@moz-5B744777.lns5.lon.bigpond.net.au)
[21:31:00] *** Quits: ksev (DrunkenPan@moz-C6488E57.autodesk.com) (Ping timeout)
[21:32:04] <Matthias247> SiegeLord: is there a working include_file! ? I tried include! once, but it couldn't include definitions
[21:32:11] *** Joins: ksev (DrunkenPan@moz-C6488E57.autodesk.com)
[21:32:39] <SiegeLord> I thought that was it... to be honest, I've never tried it
[21:33:45] <Matthias247> I also foudn that making many modules doesn't work. privacy get's broken and you have to repeat all use statements
[21:34:06] *** Quits: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net) (Quit: Textual IRC Client: www.textualapp.com)
[21:34:11] <Matthias247> But I also hate making large modules because that means large files
[21:34:42] *** Joins: jroweboy (Mibbit@moz-405814B3.byu.edu)
[21:36:30] <sfackler> iirc include_file!(foo) should work exactly as if you replaced that line with the contents of foo
[21:37:01] <eibwen> sfackler: including macro processing of the contents in foo?
[21:37:15] *** Joins: reima (Instantbir@moz-6F6DFF8C.dip0.t-ipconnect.de)
[21:37:18] <jroweboy> Hello! just a curiosity, but does Rust have anything like the interface type in Go? 
[21:37:24] <sfackler> it should recursively parse stuff
[21:37:29] <sfackler> er, macro expand stuff
[21:37:35] *** Quits: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Quit: victorporof)
[21:37:49] <Matthias247> jroweboy: traits are somewhat similar
[21:39:51] *** Joins: sunfish (chatzilla@moz-C06D9702.mtv1.mozilla.com)
[21:40:07] <jroweboy> hmm I suppose so... My reasoning is I'm working on a web framework in Rust, and I'm trying to implement variables in routes. I'm trying to think of a way that I can allow the user of the framework to include any number of parameters in the URL that I'll be able to pass into their function
[21:40:25] <kmc> i want a macro mymacro!(bar) that expands to fn foo_bar() { ... }.... trying to do this with concat_idents! but failing
[21:40:32] <kmc> macro_rules! mymacro( ($x:ident) => ( fn concat_idents!(foo_, $x)() { } ) )
[21:40:40] <jroweboy> if I use a function pointer, I have to know at compile time all the variables and types to pass in... I feel like I'm just over complicating something here :)
[21:40:46] <kmc> gives "error: expected `(` but found `!`" at concat_idents!
[21:40:50] *** Quits: dschatzberg (dschatzber@moz-9384E83C.bu.edu) (Input/output error)
[21:40:56] <sfackler> jroweboy: an array of trait objects could be the way to go
[21:41:41] <sfackler> jroweboy: e.g. the "params" array here: http://www.rust-ci.org/sfackler/rust-postgres/doc/postgres/struct.NormalPostgresStatement.html#method.try_execute
[21:43:12] <jroweboy> Is there a generic "Trait" type that all Traits have at the base, eg: Object in Java so that things like ints could be passed into the array?
[21:43:34] <sfackler> jroweboy: std::any::Any
[21:43:43] <brson> i'm sad that hn post about rust on the shootout devolved into a bunch of threads about not rust
[21:43:44] <sfackler> it even has some stuff to allow you to safely downcast
[21:43:45] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[21:44:11] <chromatic> brson, but are you surprised?
[21:44:24] *** Quits: abaez (a__@moz-8D618AC3.nycmny.fios.verizon.net) (Client exited)
[21:44:33] *** Joins: abaez (a__@moz-8D618AC3.nycmny.fios.verizon.net)
[21:44:51] *** Joins: claudiu (claudiu@moz-FB94486E.thefacebook.com)
[21:44:52] <bstrie> can anyone explain why https://gist.github.com/bstrie/8984509 acts like it does?
[21:44:53] <jroweboy> sfackler: Oh that could work... hmmm... thanks a bunch!
[21:45:07] *** Quits: abaez (a__@moz-8D618AC3.nycmny.fios.verizon.net) (Quit: I haz left.)
[21:45:19] *** Joins: abaez (a__@moz-8D618AC3.nycmny.fios.verizon.net)
[21:46:54] <Ms2ger> bstrie, er, "*pixel = 2.0", maybe?
[21:47:02] <Ms2ger> Though I don't know why that'd compile
[21:47:09] <SiegeLord> bstrie: You're matching away the pointers, and thus creating a copy
[21:47:25] <SiegeLord> And then setting that copy to 2...
[21:47:32] <Ms2ger> Oh, doh
[21:47:34] <ChrisMorgan> bstrie: pixel is of type f32 because of your pattern `&mut pixel`
[21:47:35] <bstrie> Ms2ger: yes, that works if I don't declare &mut pixel
[21:47:41] *** Joins: victorporof (victorporo@8F761026.B5EF4AF6.E96CA9D8.IP)
[21:47:41] <bstrie> SiegeLord: sigh
[21:47:50] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Client exited)
[21:47:50] <Ms2ger> Thanks, smart people :)
[21:47:53] <acrichto> bstrie: I think that's being parsed as &(mut pixel)
[21:48:01] <acrichto> bstrie: which is quite surprising and possibly a bug
[21:48:08] <oldmanstan> anybody want to suggest the best (simplest) way to make http requests from rust? i don't see anything in the std lib except the lower level TCP stuff
[21:48:13] <bstrie> SiegeLord: I was so excited, because using the pattern so drastically reduced the runtime of my program! turns out llvm was just optimizing away unused code :P
[21:48:17] <Ms2ger> oldmanstan, rust-http?
[21:48:21] <SiegeLord> lol
[21:49:18] <SiegeLord> bstrie: Don't you get a warning for it?
[21:49:24] <brson> chromatic: nah
[21:49:41] <PeterSP> oldmanstan: https://github.com/chris-morgan/rust-http ?
[21:50:01] <jroweboy> oldmanstan: rust-http has an example for a http client as well
[21:50:14] <oldmanstan> ahh, ok this looks nice, i was finding this one... https://github.com/chris-morgan/rust-http
[21:50:27] <oldmanstan> oh sorry, this one https://github.com/kulasama/rust-http/blob/master/http.rs
[21:50:34] <oldmanstan> (overwrote my clipboard hehe)
[21:51:16] <PeterSP> yeah that's less helpful
[21:51:43] <bstrie> SiegeLord: I do get a warning for it, yes. that's why it was so baffling, I had no idea that was making a copy
[21:51:50] <oldmanstan> thanks Ms2ger PeterSP jroweboy !
[21:51:59] <Ms2ger> Np
[21:52:37] <bstrie> oldmanstan: what about me :(
[21:52:39] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[21:52:49] *** Quits: vgeddes (vincent.ge@moz-D8D4FE4D.dsl.mweb.co.za) (No route to host)
[21:52:52] <oldmanstan> you're awesome too
[21:53:01] <bstrie> oldmanstan: but, I didn't even do anything D:
[21:53:11] <bstrie> I'm useless!
[21:53:17] *** Quits: Ms2ger (Ms2ger@moz-CB2E71FA.adsl-dyn.isp.belgacom.be) (Quit: nn)
[21:53:25] <oldmanstan> nah, i'm sure you're great
[21:53:35] <bstrie> yeah you're probably right
[21:53:39] <oldmanstan> hehe
[21:53:42] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[21:55:24] <Matthias247> bstrie: nasty bug. Rust references can be quite tricky :)
[21:55:42] <sw17ch> bstrie: so that behavior *is* a bug?
[21:55:52] *** Joins: vgeddes (vincent.ge@moz-D8D4FE4D.dsl.mweb.co.za)
[21:56:07] <bstrie> sw17ch Matthias247 I have no idea if it's a bug!
[21:56:09] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Ping timeout)
[21:56:10] <bstrie> I might as well file it
[21:56:12] <bstrie> just to be safe
[21:56:14] <sw17ch> bstrie:  restated, what's the "correct" way to fix that code?
[21:56:21] <Matthias247> a user bug as far as I understand
[21:56:24] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[21:56:34] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[21:56:36] <bstrie> sw17ch: you would change `&mut pixel` to `pixel` and then instead of `pixel =` you'd have `*pixel =`
[21:57:39] <sw17ch> bstrie: so was the problem purely that the syntax made a copy by matching out the pointer and the compiler failed to emit a proper warning, or should what you wrote originally behave as expected?
[21:57:56] <sw17ch> Sorry about all the questions: there's a lot going on in that code! :D
[21:58:04] *** Quits: Ferreus (ferreus@moz-A3BC079B.pools.arcor-ip.net) (Quit: WeeChat 0.4.3-dev)
[21:58:12] <bstrie> sw17ch: no, it emitted warnings, but the warnings looks like: warning: variable `pixel` is assigned to, but never used
[21:58:23] <bstrie> sw17ch: which was baffling to me because clearly I was using it down below!
[21:58:49] <sw17ch> so, behind the scenes, was the dead-code elimination coming into play before the use-check pass?
[21:59:00] *** Parts: herrwolfe45 (user@CACBD77F.4EBBBE62.C082B7DC.IP) (ERC Version 5.3 (IRC client for Emacs))
[21:59:28] <Matthias247> I do understand why it doesn't work without the deref operation. But I don't understand why the code is legal and makes a copy of the variable
[22:00:29] *** Quits: jackneill (jackneill@moz-20521AD2.pool.digikabel.hu) (Ping timeout)
[22:00:40] <reima> I have a function returning an IoResult, which does several file.seek() and file.read(). If any of them fails, I want the function to forward that error. Is there a nicer way to do this than this? https://gist.github.com/reima/b673cdce68dc44ee564f
[22:00:48] <sw17ch> Matthias247: if i understand it right, the match operations destructures the mutable reference extracting out the data. the destructuring is what's doing it, i think.
[22:01:24] <sfackler> reima: the if_ok! macro
[22:01:25] <sw17ch> some one correct me if i'm wrong, please
[22:01:30] <Matthias247> i don't see a match, only a loop with in iterator :)
[22:01:55] *** Quits: dukeleto (dukeleto@104402BE.9B9053F6.D4043753.IP) (Ping timeout)
[22:01:56] <reima> sfackler: That looks useful, thank you!
[22:02:12] <sfackler> Matthias247: match blocks aren't the only places patterns can be used
[22:02:37] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[22:02:39] <sfackler> (for loops actually turn into loop { match it.next() {...} } anyways)
[22:02:41] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[22:03:15] <bstrie> https://github.com/mozilla/rust/issues/12250 <-- for everyone following this
[22:04:14] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[22:04:51] <aatch> bstrie, well I'm pretty sure it's correct.
[22:05:03] *** Quits: manuels (Mibbit@moz-9B05CD30.unity-media.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:05:21] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[22:05:32] *** Quits: jroweboy (Mibbit@moz-405814B3.byu.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[22:05:57] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[22:06:07] <aatch> And I don't think `&mut var` being parsed as `&(mut var)` is wrong either, even if it is a little surprising.
[22:06:41] <eddyb> it is quite wrong
[22:06:42] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[22:06:54] *** Quits: mib_uve0r8 (Mibbit@moz-362CDC0.fttp.sta.comporium.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:07:00] <eddyb> unless it's a pattern
[22:07:12] <aatch> eddyb, it is in a pattern
[22:07:14] <sfackler> it is a pattern
[22:07:21] <eddyb> of course it is :)
[22:07:26] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[22:07:33] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[22:07:33] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:07:51] <bstrie> the reason that I was surprised is because I know you can get rid of *foo by having &foo in the pattern
[22:07:58] <bstrie> so I figured you could do the same with &mut foo
[22:07:58] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[22:07:58] *** ChanServ sets mode: +o tjc
[22:08:04] <bstrie> and the fact that you can't seems inconsistent
[22:08:13] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[22:08:14] <eddyb> bstrie: mutability doesn't matter there
[22:08:24] <eddyb> just like you don't do mut*foo = bar;
[22:08:37] *** Quits: ksev (DrunkenPan@moz-C6488E57.autodesk.com) (Ping timeout)
[22:08:54] <sfackler> bstrie a &foo pattern dereferences the pointer and copies the contents into foo
[22:09:17] <eddyb> let &ref mut x = &mut x; is noop
[22:09:20] <bstrie> ugh, so there's actually a difference in behavior?
[22:09:24] <bstrie> I thought it was just sugar :(
[22:09:30] *** Joins: nszceta (hax@moz-E458A7C0.pharm.pitt.edu)
[22:09:34] <eddyb> bstrie: no, they're identical
[22:09:39] *** Joins: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP)
[22:09:42] <sfackler> it's exactly like patterns in a match
[22:09:47] <eddyb> you just don't have to specify mutability
[22:09:51] <bstrie> eddyb: even from a performance perspective?
[22:09:58] <aatch> bstrie, `*foo` has different semantics as an rvalue vs an lvalue
[22:10:03] <bstrie> hm
[22:10:03] <eibwen> what is &ref?
[22:10:05] <aatch> that's the difference here
[22:10:19] <Matthias247> I had expected that it's simply the declaration of the iterator, for which &mut pixel would be perfectly legal :O
[22:10:19] <bstrie> I can understand that, I guess
[22:10:22] <eddyb> eibwen: &(ref mut x), there's two patterns there
[22:10:38] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Quit: Leaving)
[22:10:39] <eddyb> (this reminds me, I should remove some extra mutability in middle::ty)
[22:11:00] <eddyb> eibwen: & peels off a reference, ref mut adds a mutable reference to the contents of the dereference
[22:11:15] <aatch> eibwen, the two patterns are a destructuring pattern (the '&') and a binding pattern (the ref mut x)
[22:11:16] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Ping timeout)
[22:11:42] *** Quits: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP) (Ping timeout)
[22:11:42] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[22:11:48] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[22:12:10] <bstrie> brson: was MirageOS the name of that ocaml project that was considering replacing their C with rust?
[22:12:18] *** jorendorff is now known as jorendorff_away
[22:13:15] *** jorendorff_away is now known as jorendorff
[22:13:33] *** Quits: untwisted (untwisted@moz-3ED7FE1D.ucsc.edu) (Ping timeout)
[22:13:34] *** Quits: alexherbo2 (alexherbo2@moz-9AE52DD7.w90-3.abo.wanadoo.fr) (Quit: WeeChat 0.4.3-dev)
[22:13:36] <brson> bstrie: OpenMirage
[22:13:40] <brson> could be MirageOS
[22:13:53] <brson> yes
[22:14:16] *** Quits: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Client exited)
[22:15:30] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[22:17:11] *** Joins: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net)
[22:18:50] *** Quits: mouse (mouse@moz-4A3624F.broadband.corbina.ru) (Ping timeout)
[22:19:07] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[22:19:26] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[22:19:55] *** Quits: mgottschlag (quassel@moz-65AB7C61.cust.bluewin.ch) (Ping timeout)
[22:20:00] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[22:20:03] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[22:21:33] <pcwalton> uh-oh
[22:21:35] <pcwalton> @horse_rust exists
[22:21:58] *** Joins: ksev (DrunkenPan@moz-C6488E57.autodesk.com)
[22:22:53] <mcpherrin> pcwalton: excelllent
[22:23:03] <pcwalton> (it's not me)
[22:23:08] <pcwalton> :)
[22:23:23] <chromatic> @HULK_RUST comes next, right?
[22:23:31] <ChrisMorgan> What is this horse thing?
[22:23:37] <pcwalton> an "art project"
[22:23:57] <mcpherrin> ChrisMorgan: @horse_ebooks was a spam twitter account that got a huge following
[22:24:03] *** Quits: vgeddes (vincent.ge@moz-D8D4FE4D.dsl.mweb.co.za) (Quit: ERC Version 5.3 (IRC client for Emacs))
[22:24:06] <ChrisMorgan> And the name? Whence cometh it?
[22:24:49] <mcpherrin> So in between selling ebooks about horses, it had some markov chained text to not instantly flag itself as spam
[22:24:49] *** Quits: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net) (Ping timeout)
[22:25:03] <mcpherrin> said randomly generated text was pretty funny to read, so it got quite a following
[22:25:09] *** Quits: canhtak (canhtak@moz-4D8F0D46.wl.t.ulaval.ca) (Connection reset by peer)
[22:25:23] <mcpherrin> somebody else started @horse_js that had a similar level of lucidity with the JS community as a source
[22:26:05] <mcpherrin> I think using horse_ as a prefix is just a thing on twitter for semi-lucid joke accounts
[22:26:32] * ChrisMorgan looks at @horse_ebooks and completely fails to see why it became popular
[22:26:44] *** Joins: sw17ch (sw17ch@moz-9D524DE1.hsd1.mi.comcast.net)
[22:27:38] <Jemaclus> for i in range(0, 100) { print "Hello"; }
[22:27:40] <eddyb> oh dear google... it's 14th already
[22:27:45] <Jemaclus> I get a warning about not using i... but what if I don't want to use i?
[22:27:47] *** Quits: kris (kris@moz-147EE6DF.diku.dk) (Ping timeout)
[22:27:51] <Jemaclus> for _ in range(0, 100)?
[22:27:53] <sfackler> yep
[22:28:03] <Jemaclus> neat.
[22:28:22] <Jemaclus> it was a real question, and then the _ occurred to me as I hit enter.. heh
[22:28:22] <sfackler> anything prefixed with _ will also disable the unused variable warning
[22:28:30] <Jemaclus> orly
[22:28:48] <eddyb> and now my new tab page has a big heart on it. can't they not make a version for people that despise the event?
[22:28:50] <aatch> Jemaclus, yep, useful for RIAA stuff
[22:29:16] <Jemaclus> neato
[22:29:23] *** Quits: halleck (a@moz-372B240D.dynamic.mnet-online.de) (Quit: Leaving)
[22:30:48] <eddyb> ChrisMorgan: I think your doing it wrong, you may need to be mildly sleep deprived
[22:30:50] <eddyb> "and that geological significance should not be lost in the search for more and more"
[22:32:00] <eddyb> https://twitter.com/horse_rust on that same page, I would suggest the following:
[22:32:10] <eddyb> come on, is rusti dead again?
[22:32:31] <eddyb> ("only `u8` can be cast as `char`, not `u8`")
[22:32:50] *** Quits: Armavica (virgile@moz-AD428ED7.ens.fr) (Ping timeout)
[22:33:02] <bstrie> hahaha, who is horse_rust
[22:33:08] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[22:34:09] <chromatic> Oh dear, those u8 errors confused me a lot.
[22:34:30] <PeterSP> o_0
[22:34:36] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[22:34:38] <eddyb> chromatic: just checks made too early
[22:35:35] <Jemaclus> what exactly is happening when you do --opt-level=3 versus leaving that out?
[22:35:50] <eddyb> the default is --opt-level=0
[22:35:51] <chromatic> eddyb, I was fiddling with code for https://github.com/mozilla/rust/issues/11976 because I have a strange sense of amusement and... yes.
[22:36:08] <eddyb> which runs always-inline and maybe a few other simple things
[22:36:18] <pcwalton> brson: r? https://github.com/mozilla/rust/pull/12244
[22:36:52] <bstrie> brson: ah yes, OpenMirage. thanks
[22:36:52] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[22:37:09] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[22:37:13] <eddyb> pcwalton: o_O
[22:37:16] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Input/output error)
[22:37:24] <pcwalton> we're going to bring them back post DST
[22:37:30] <pcwalton> do not fear
[22:37:35] <Jemaclus> what's always-inline mean?
[22:37:37] <eddyb> [] matched ~[]?
[22:37:37] *** Joins: arturo (Thunderbir@moz-4F69776.superkabel.de)
[22:37:45] <aatch> pcwalton, meh, I hardly used them.
[22:37:46] <pcwalton> yes
[22:37:47] <pcwalton> it did
[22:37:51] <pcwalton> aatch: they were rarely used
[22:37:57] <eddyb> Jemaclus: inlining of functions marked as #[inline(always)]
[22:37:58] * pcwalton is the Grim Reaper for rust features
[22:38:06] <aatch> pcwalton, well you only changed 35 files
[22:38:11] <aatch> *25
[22:38:14] <pcwalton> yup
[22:38:16] <bstrie> pcwalton: that's why you're my favorite developer :)
[22:38:21] <eddyb> so I am the Helper Reaper?
[22:38:36] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[22:38:37] <aatch> eddyb, the Cheerful Reaper?
[22:38:43] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[22:38:48] *** Quits: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP) (Client exited)
[22:38:49] <aatch> The Optimisic Reaper
[22:38:49] <eddyb> aatch: reminds me of Red John
[22:38:50] <bstrie> the "p" in "pcwalton" stands for "pluto, god of the dead"
[22:38:54] <pcwalton> heh
[22:39:05] * PeterSP fears the reaper
[22:39:16] * pcwalton has a perl script to remove ~[T] from the language
[22:39:18] <pcwalton> in preparation for DST
[22:39:24] <bstrie> he presides over his terrible and grim domain, where @s and implicit selfs and argument modes swirl endlessly in a stygian void
[22:39:39] <chromatic> Keep going and C can be for Charon.
[22:39:39] <olsonjeffery> but how else will we fulfill our quarterly tilde quota?
[22:39:56] *** Joins: fmtq (fmt@moz-5769BD38.static.tpgi.com.au)
[22:40:06] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Connection reset by peer)
[22:40:10] *** Quits: arturo (Thunderbir@moz-4F69776.superkabel.de) (Ping timeout)
[22:40:17] *** Quits: jdm (jdm@E595D12E.1196002C.7DBB297B.IP) (Quit: Lost terminal)
[22:40:27] <eddyb> bstrie: self and argument modes? hang on, who are you describing?
[22:40:57] <pcwalton> "modes" were something earlier
[22:41:06] <aatch> eddyb, dark times my friend, dark times
[22:41:18] <PeterSP> In this house at 'lyeh_r dead pcwalton waits dreaming?
[22:41:19] <olsonjeffery> i remember modes. a tool of a more primitive age.
[22:41:46] <aatch> argument modes were like... C++ references but moreso
[22:42:00] <tjc> ah, modes. the summer of 2011. when we wrote +s and ++s as the strains of "Call Me Maybe" warbled in the background, and struggled to remember the difference
[22:42:03] <PeterSP> How can you be more referency than a reference?
[22:42:07] *** eatkinson-away is now known as eatkinson
[22:42:08] <bstrie> eddyb: don't tell me you've never heard us mention argument modes before... although we do prefer not to speak of them
[22:42:17] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[22:42:24] <eddyb> bstrie: nevermind
[22:42:33] <olsonjeffery> you could say "modes" when down the... memory hole *puts on sunglasses*
[22:42:43] <tjc> rule 1 of Mode Club is that you don't talk about Mode Club
[22:42:45] <olsonjeffery> went*
[22:42:51] <bstrie> eddyb: one day you'll be able to tell people what it was like in the bad old days, when @s ruled the earth
[22:42:53] <eddyb> tjc: type state?
[22:42:57] <olsonjeffery> also: the days of crust.
[22:43:01] <PeterSP> https://mail.mozilla.org/pipermail/rust-dev/2011-September/000771.html 
[22:43:04] <olsonjeffery> heck. the days *before* crust!
[22:43:14] <PeterSP> In the mountains of madness
[22:43:16] <eddyb> bstrie: I hope to crown P as the king, at some point
[22:43:30] <bstrie> tjc: "struggled to remember" is a bit generous I think, did *anyone even know* the difference?
[22:43:30] <olsonjeffery> back when Rust placed a high-premium on self-deprecating keywords
[22:43:39] <eddyb> @T => P<T> is as minimal as it gets
[22:43:43] <tjc> bstrie: I don't know exactly who implemented modes, but whoever it was, they probably did
[22:43:47] <tjc> I mean
[22:43:49] <tjc> I'd hope they did
[22:44:20] *** Quits: japaric (japaric@61A78F7A.839FBF92.95AFB88D.IP) (Ping timeout)
[22:44:25] <bstrie> tjc: no one knows from whence modes sprang. graydon found them in an ornate silver box buried in the center of a circle of dead mushrooms in the woods beyond vancouver
[22:44:40] <tjc> bstrie: ... who told *you* about that?!
[22:44:41] <aatch> tjc, I missed the context of that sentence and it sounds very tautological in isolation
[22:44:49] <bstrie> I...
[22:45:02] *** bstrie is now known as bstrie_vanished
[22:45:08] <tjc> usually you have to swear on a copy of the Algol-60 specification that you won't reveal the secrets of the Rust inner circle before you get to find out about that
[22:45:10] *** Joins: kris (kris@moz-DDD7E995.dk.customer.tdc.net)
[22:45:17] <olsonjeffery> the secret, inner-teaching of Rust
[22:45:28] <olsonjeffery> OTIII
[22:45:53] <chromatic> Rust drags C++, kicking and screaming, halfway to Algol?
[22:46:12] *** Joins: synackse (jordyd@2D608993.77F880E0.D9401097.IP)
[22:46:25] *** Joins: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[22:46:25] *** Quits: Rusky (russell@moz-B7E6EE4E.slkc.qwest.net) (Quit: Leaving.)
[22:46:39] <tjc> "It's like C++ grew up, went to grad school, started dating. ML, and is sharing an office with Erlang.” -- lindsey
[22:47:00] *** Joins: skade (skade@moz-F3F67608.pools.arcor-ip.net)
[22:47:00] <steveklabnik> lol
[22:47:05] <PeterSP> Is that period supposed to be there?
[22:47:20] <tjc> copy/paste error
[22:47:27] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[22:47:53] *** Quits: jensnockert (jensnocker@moz-60DC2EAC.mobileonline.telia.com) (Connection reset by peer)
[22:48:33] *** Joins: nif (nif@moz-84FF761D.oberlin.net)
[22:48:40] *** Quits: eddyb (eddy@688E9026.F7C96DA2.FCAAE698.IP) (Ping timeout)
[22:48:41] *** Joins: Rusky (russell@moz-B7E6EE4E.slkc.qwest.net)
[22:49:09] *** Quits: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[22:49:10] *** Joins: japaric (japaric@8C26A633.8C2993CE.5C7588CA.IP)
[22:50:40] <pnkfelix> tjc: Wait, is that quote due to lkuper originally?  I had seen it from someone else on #rust I thought
[22:51:02] <bstrie_vanished> pnkfelix: it's as old as time, but I believe it was lkuper originally
[22:51:10] <tjc> pnkfelix: I think I first saw it in Lindsey's first end-of-internship talk, but I don't know if she has the slides for that anywhere
[22:51:46] <pnkfelix> sigh, this is what I get for not vetting my slides amongst the team first
[22:52:23] <pnkfelix> (I attributed it to rpearl, because that's who said it when I first saw it on #rust.)
[22:52:49] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:53:03] <bstrie_vanished> pnkfelix: you'd have to ask them!
[22:53:32] <tjc> pnkfelix: hmm, well, I looked at http://www.cs.indiana.edu/~lkuper/talks/rust-objects/rust-objects.pdf and it's not in the slides. she might have said it, though...
[22:53:35] <pnkfelix> ah well, lkuper's haiku got a more prominent spot anway.
[22:53:38] <tjc> or I might just be imagining things
[22:54:14] *** eatkinson is now known as eatkinson-away
[22:55:11] <abinader> how to run tests from a specific lib? (i.e. libcollections)
[22:55:25] <tjc> abinader: make check-stage1-collections (in that case) should work
[22:55:32] <abinader> tjc: thanks! :-)
[22:55:32] <Jemaclus> what does it mean if a function is inline?
[22:55:35] <tjc> assuming the build system got extended in the obvious way when libextra was split up
[22:55:45] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[22:55:46] <tjc> Jemaclus: it means Rust will emit a hint suggesting to LLVM that the code for that function should be inlined
[22:56:22] <Jemaclus> ok
[22:56:52] <olsonjeffery> tjc: when you make the changes to crates.mk it trickles down into the make check-stage1-foo variants
[22:56:54] <Jemaclus> oh, i see.
[22:56:57] <Jemaclus> thanks
[22:57:05] <tjc> olsonjeffery: ah ok. it's been a while since I went near that :-)
[22:57:07] <olsonjeffery> something acrichto did in preparation for the libssplode
[22:57:14] *** Joins: azita (Azita@moz-8AB4C835.hfc.comcastbusiness.net)
[22:57:15] <olsonjeffery> libssplosion
[22:57:22] <olsonjeffery> always with two s's
[22:58:19] <jmgrosen> is that what we're calling it now? :P
[22:58:31] *** Joins: untwisted (untwisted@moz-3ED7FE1D.ucsc.edu)
[22:58:48] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[22:58:48] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[22:58:56] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Input/output error)
[22:59:07] <Jemaclus> not-inline is more efficient than inline?
[22:59:58] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[23:00:07] <tjc> Jemaclus: it depends...
[23:00:19] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[23:00:21] <sfackler> Jemaclus: it depends. if a function is inlied, you don't have to deal with the overhead of construction the function call and it can be more efficiently optimized, but it might bloat the places it's called so much that it ends up being slower
[23:00:23] <aatch> pcwalton, what happened with your TBAA stuff?
[23:00:27] <tjc> inlining is well-known to be a black art, and it's okay to let the compiler make the decision (by leaving out an #[inline])
[23:00:29] <pcwalton> aatch: I can push it
[23:00:36] <Jemaclus> gotcha.
[23:00:54] <tjc> in most cases, the compiler will do the right thing. there are a few cases where it doesn't, which fall into the realm of Advanced Performance Debugging :-)
[23:00:55] <pcwalton> aatch: https://github.com/pcwalton/rust/tree/tbaa-struct
[23:00:59] <sfackler> #[inline] is used right now mostly because it's the only way to make a funciton inline-able across crates
[23:01:04] *** Joins: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[23:01:04] <pcwalton> incomplete and I'm not likely to pick it up soon
[23:01:05] <aatch> pcwalton, cool, thanks!
[23:01:08] <pcwalton> but anyone can if they want
[23:01:08] <sfackler> *a non-generic function
[23:01:11] *** Quits: kris (kris@moz-DDD7E995.dk.customer.tdc.net) (Ping timeout)
[23:01:33] <aatch> "This branch is 3836 commits ahead and 16 commits behind master" O.o
[23:01:49] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[23:02:03] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[23:02:43] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[23:04:19] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[23:04:23] *** Quits: untwisted (untwisted@moz-3ED7FE1D.ucsc.edu) (Ping timeout)
[23:05:51] *** Quits: sw17ch (sw17ch@moz-9D524DE1.hsd1.mi.comcast.net) (Quit: sw17ch)
[23:09:38] <bstrie_vanished> why do our seedable RNGs take a [u32, ..4] as the seed rather than just a uint or something?
[23:10:23] *** Joins: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP)
[23:11:24] <sfackler> because siphash uses a 128bit seed
[23:11:35] <sfackler> er, nvm
[23:11:39] <sfackler> that doesn't make any sense
[23:11:48] <sfackler> >_>
[23:12:11] *** Joins: lpy_ (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP)
[23:12:11] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[23:12:29] <bstrie_vanished> I really have no idea what this vector of u32 is supposed to represent
[23:12:31] *** Quits: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP) (Ping timeout)
[23:12:42] <sfackler> it's just a random seed
[23:12:48] <sfackler> raw entropy
[23:12:59] <bstrie_vanished> sfackler: then why is it not just a u64 or something?
[23:13:08] <sfackler> 64 bits of data isn't enough I guess
[23:13:17] <bstrie_vanished> sfackler: then why isn't it [u64, ..2] ???
[23:13:22] <bstrie_vanished> what does it mean?!??
[23:13:25] <sfackler> dunno
[23:13:32] <o11c> u32 is the most common internal size for stuff
[23:13:35] <sfackler> siphash takes 2 u64s
[23:13:37] <aatch> bstrie_vanished, looking at the paper, it rotates the elements around
[23:13:48] <aatch> (for XORShiftRNG)
[23:13:49] <o11c> and it's still the most common native width
[23:13:54] <bstrie_vanished> aatch: but this is supposed to be generic
[23:14:04] <bstrie_vanished> not specific to XorShift
[23:14:13] *** Quits: lpy_ (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP) (Ping timeout)
[23:14:25] <aatch> bstrie_vanished, well SeedableRng doesn't force specific types
[23:14:41] <bstrie_vanished> aatch: it forces a Seed, and I think that's just an alias for [u32, ..4]
[23:14:56] <bstrie_vanished> I don't understand how these code examples could work otherwise
[23:14:57] <aatch> bstrie_vanished, it's not though
[23:15:00] <bstrie_vanished> there's no Seed::new()
[23:15:04] <bstrie_vanished> there's no trait objects
[23:15:10] <aatch> Seed is a type parameter
[23:15:24] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Quit: Leaving...)
[23:15:25] <cmr> What are we puzzling over?
[23:15:30] <bstrie_vanished> fn from_seed(seed: Seed) -> Self;
[23:15:38] <bstrie_vanished> ^ not a type parameter
[23:15:38] <cmr> siphash's key being 128 bits?
[23:15:50] <bstrie_vanished> oh wait
[23:15:50] <aatch> bstrie_vanished, it is a type parameter, on the trait
[23:15:55] <bstrie_vanished> bleh, it is in the trait :)
[23:15:59] <sfackler> cmr: the rngs taking a [u32, ..4] instead of a (u64, u64) or whatever
[23:16:01] <aatch> bstrie_vanished, you're not having a good day today, are you?
[23:16:05] <bstrie_vanished> nope
[23:16:12] <bstrie_vanished> brain is fried
[23:16:35] <aatch> bstrie_vanished, since the SeedableRng impl for StdRng is SeedableRng<&[uint]>
[23:16:52] <bstrie_vanished> who the heck decided that it was a good idea to have a type parameter that is not just a single uppercased letter. they are the real monster here
[23:16:57] *** Quits: synackse (jordyd@2D608993.77F880E0.D9401097.IP) (Ping timeout)
[23:17:12] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[23:17:16] <cmr> bstrie_vanished: it makes for quite readable code, you should try it sometime.
[23:17:36] <bstrie_vanished> cmr: obviously not, as I just wasted everyone's time with what would have been obvious had the style guide been followed
[23:17:49] <cmr> bstrie_vanished: or if you had, you know, read the code
[23:17:58] <bstrie_vanished> cmr: I read the code :)
[23:18:06] <bstrie_vanished> I just didn't grok it!
[23:18:37] <cmr> the style guide is silent on this issue.
[23:18:38] *** Joins: synackse (jordyd@2D608993.77F880E0.D9401097.IP)
[23:18:47] <ChrisMorgan> bstrie_vanished: T for absolutely-anything, K for Key, V for Value; those are about the limit of well-known and well-recognised type parameters. I've used R for Reader and W for Writer and even S for Str upon occasion, but having longer names isn't exactly a bad thing, you know.
[23:18:48] <bstrie_vanished> look forward to my patch removing all non-single-uppercased-letter type params
[23:18:55] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[23:19:11] <PeterSP> o_0
[23:19:14] <cmr> I for iterator!
[23:19:20] <bstrie_vanished> so it must be
[23:19:24] <bstrie_vanished> for the good of the kingdom
[23:19:27] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[23:19:42] <cmr> haskell avoids this problem by having all type parameters be lowercase.
[23:19:50] *** Quits: eibwen (kvirc@moz-2A1E42F9.dip0.t-ipconnect.de) (Ping timeout)
[23:20:20] <tjc> bstrie_vanished: you didn't say we couldn't have Unicode single-character type params
[23:20:30] <bstrie_vanished> I wounder if I should add tau to std::f32::consts
[23:20:40] <bstrie_vanished> tjc: I'll allow it
[23:20:44] *** Quits: jviereck (Adium@moz-F90C68B4.dip0.t-ipconnect.de) (Quit: Leaving.)
[23:20:57] <bstrie_vanished> tjc: in fact, thinking upon it further, I might even enforce it
[23:21:08] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[23:21:11] <PeterSP> required non-ascii?
[23:21:20] <bstrie_vanished> required emoji
[23:21:44] <tjc> fn identity<😻, 😻>(x: 😻) -> 😻 { x }
[23:21:49] <olsonjeffery> and here i am with a type constructor with 27 params
[23:22:08] <bstrie_vanished> olsonjeffery: I'ma go ahead and say that's a code smell
[23:22:10] <olsonjeffery> i like TKey, TVal
[23:22:12] *** jorendorff is now known as jorendorff_away
[23:22:26] <bstrie_vanished> if you *must* give them names, then fine, TFoo, whatev
[23:22:32] <ChrisMorgan> olsonjeffery: argh! Hungarian notation!
[23:22:37] <PeterSP> what about FooType?
[23:22:52] <ChrisMorgan> But we all *know* that Hungarian notation is evil. Don't we?
[23:22:54] <ChrisMorgan> ;-)
[23:22:57] <bstrie_vanished> ChrisMorgan: that would be HFoo, this is transylvanian notation
[23:22:58] <tjc> what's this about feetypes
[23:22:59] *** kimundi is now known as zz_kimundi
[23:23:04] <olsonjeffery> ChrisMorgan: for someone stuck on a large island in the middle of ocean, you sure do have a big problem with people in eastern europe :P
[23:23:11] <PeterSP> i.e. fn identity<InType, OutType>(x: InType) -> OutType { x }
[23:23:54] <bstrie_vanished> hahaha
[23:23:58] <bstrie_vanished> ok channel smarty-pants
[23:24:03] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[23:24:13] <bstrie_vanished> then why do all the OTHER rng implementations also take a [u32, ..4] as their seed
[23:24:22] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Quit: Textual IRC Client: www.textualapp.com)
[23:24:34] <aatch> bstrie_vanished, they don't?
[23:24:35] <bstrie_vanished> I have never in my life seen any rng implementation take anything other than a single number
[23:24:42] <cmr> bstrie_vanished: it is a single number.
[23:24:46] <cmr> a 128 bit one.
[23:24:49] <bstrie_vanished> aatch: the docs all show it!
[23:25:01] <olsonjeffery> a uuid seed, heh
[23:25:04] <aatch> bstrie_vanished, so? StdRng takes a &[uint]
[23:25:08] <PeterSP> isn't the mersenne twister seed enormous too?
[23:25:19] <bstrie_vanished> cmr: then let's just implement u128 and be done with it
[23:25:35] <cmr> bstrie_vanished: inconvenient if you want to operate on 32-bit slices of it :
[23:25:36] <bstrie_vanished> this is silly
[23:25:38] <cmr> ::)
[23:25:40] <cmr> gah
[23:25:40] <bstrie_vanished> I refuse to seed this rng
[23:25:48] <sfackler> PeterSP: the state is enormous, but the seed can be any size
[23:25:48] <bstrie_vanished> literally the worst
[23:25:56] <cmr> anyway Isaac takes a &[u32], not a [u32, ..4]
[23:26:21] <bstrie_vanished> someone better fix it before I post it to hacker news
[23:26:41] <aatch> Many of them could probably get away with taking a <T:Pod> and then padding out to whatever alignment they need.
[23:26:43] <bstrie_vanished> "omg go's rng only takes a single number lol rust u bad!"
[23:26:58] <chromatic> "Y U PRGM RUST? JS 4EVA"
[23:27:07] <olsonjeffery> "Our 128bit arrows shall blot out the sun!" "Well, then we shall generate pseudorandom numbers in the shade!"
[23:27:34] *** Quits: marianoguerra (marianogue@moz-63502B79.dip0.t-ipconnect.de) (Ping timeout)
[23:28:10] <PeterSP> 300 sprints?
[23:28:19] *** Quits: azita (Azita@moz-8AB4C835.hfc.comcastbusiness.net) (Quit: azita)
[23:28:31] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[23:28:56] <olsonjeffery> probably could replace "arrows" with "seeds", such is the limit of my intellect
[23:29:18] *** Quits: synackse (jordyd@2D608993.77F880E0.D9401097.IP) (Ping timeout)
[23:29:19] *** Quits: tq (tq@moz-9FE9CCF4.a251.priv.bahnhof.se) (Quit: tq)
[23:29:20] <SiegeLord> C++'s random classes take either one number, or a few as seeds
[23:29:43] <SiegeLord> In case of the single number case, they use a second PRNG to generate the rest of the seed array
[23:30:07] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[23:31:24] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[23:31:25] <bstrie_vanished> I don't even know how to get the from_seed method in scope. it appears to be impossible
[23:31:28] * bstrie_vanished whines
[23:31:41] <bstrie_vanished> all I wanted was a seeded rng! rust why do you torment me??
[23:31:49] <cmr> use std::rand::SeedableRng;
[23:31:57] <bstrie_vanished> cmr: I have that
[23:32:06] <bstrie_vanished> error: unresolved name `XorShiftRng::from_seed`.
[23:32:08] *** Quits: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[23:32:14] <cmr> that's not how you call associated functions.
[23:32:29] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[23:32:29] <cmr> let rng: XorShiftRng = SeedableRng::from_seed(...)
[23:32:30] *** Joins: synackse (jordyd@2D608993.77F880E0.D9401097.IP)
[23:32:35] <bstrie_vanished> ugh
[23:32:43] <bstrie_vanished> some days you just wanna burn the world
[23:33:03] <olsonjeffery> heh. yeah, i'd love for that to change. pcwalton said it is planned. can't wait.
[23:34:44] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:35:53] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Quit: leaving)
[23:37:10] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Quit: Savago)
[23:37:19] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[23:38:29] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[23:38:47] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Input/output error)
[23:41:54] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:42:12] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Input/output error)
[23:42:43] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[23:43:07] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[23:43:17] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[23:44:57] *** Joins: a_m0d (a_m0d@moz-2F294D00.acanac.net)
[23:46:57] *** Joins: Apollo (RJones@moz-E6F82C3A.maine.res.rr.com)
[23:47:32] *** Quits: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Quit: Matthias247)
[23:48:03] *** Quits: Linear (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[23:48:09] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[23:48:38] *** Joins: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[23:48:56] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[23:49:02] *** Apollo is now known as LinearInterpol
[23:49:52] *** Quits: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131205075310])
[23:50:16] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[23:50:32] *** Quits: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[23:53:21] *** Joins: dukeleto (dukeleto@104402BE.9B9053F6.D4043753.IP)
[23:53:46] *** Quits: skade (skade@moz-F3F67608.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:53:52] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Ping timeout)
[23:54:04] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[23:54:20] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[23:54:48] *** Quits: sunfish (chatzilla@moz-C06D9702.mtv1.mozilla.com) (Client exited)
[23:56:24] *** Quits: nkoep (nik@moz-D1EC571B.pool.mediaways.net) (Ping timeout)
[23:56:26] *** Joins: sunfish (chatzilla@moz-C06D9702.mtv1.mozilla.com)
[23:56:49] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[23:57:48] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Connection reset by peer)
[23:58:04] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
