[00:00:08] <cmr> jeaye: are they tuple-like structs?
[00:00:10] <aatch> https://github.com/devinus/hoedown
[00:00:12] <cmr> I think those are broken cross-crate
[00:00:30] <aatch> acrichto ^^
[00:00:38] <jeaye> cmr: https://github.com/jeaye/q3/blob/master/src/math/vec3.rs#L30
[00:00:47] <jeaye> Just regular structs, but defined in a macro.
[00:00:47] <acrichto> aatch: hmm... I wonder how they're different
[00:01:13] <acrichto> looks maintained though, so probably a better choice
[00:01:33] <cmr> jeaye: https://github.com/jeaye/q3/blob/master/src/math/vec3.rs#L21
[00:01:37] <cmr> jeaye: that don't look pub to me
[00:01:55] <jeaye> cmr: Not pushed yet.
[00:02:08] <jeaye> But let me triple check their publicity.
[00:02:38] *** Joins: KindOne (KindOne@moz-E94E5CDC.dynamic.ip.windstream.net)
[00:03:09] <jeaye> Gah, PEBKAC
[00:03:13] <jeaye> One of them was not pub.
[00:03:25] <cmr> third time's the charm? :)
[00:03:32] <jeaye> cmr is the best rubber duck. :3
[00:03:45] *** Quits: canhtak (jeremy@moz-C3EEEF4B.wl.t.ulaval.ca) (Quit: canhtak)
[00:03:55] *** Quits: mark_edward (quassel@3BF24883.4ADC0C81.CB6AFAE5.IP) (Ping timeout)
[00:04:02] *** Joins: canhtak (jeremy@moz-C3EEEF4B.wl.t.ulaval.ca)
[00:04:19] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[00:04:29] <dandy> jeaye, Looking at your macro, why not a generic vec3?
[00:04:38] <dandy> Just curious why you decided on that.
[00:05:22] <aatch> acrichto, it does also have some sort of highlighting support
[00:05:23] <jeaye> dandy: That decision was made 6 months ago when generics with numbers were not nearly as nice as they are now (and I was a lot worse with Rust). I'll be moving to a generic math types for this release.
[00:05:45] <dandy> jeaye, so nothing wrong with them going forward?
[00:05:46] <aatch> acrichto, https://github.com/devinus/hoedown/commit/0bb213e183022c0c3f291200c092846abc58e0a9
[00:05:55] <acrichto> aatch: hmm, I'm inclined to not take it for now though, it looks like it came into existence 5 days ago and isn't classified as production-ready yet
[00:05:55] *** Joins: mark_edward (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[00:05:56] <jeaye> dandy: No, I think they'll do the trick just fine.
[00:06:03] <dandy> cool
[00:06:37] <aatch> acrichto, well it's just a sundown fork right now.
[00:06:43] <jeaye> They just weren't the C++ generics I was used to, honestly. It'll feel good to upgrade them to proper Rust.
[00:06:48] <acrichto> aatch: yeah, with a fair number of changes though
[00:07:00] <cmr> jeaye: you might look at what bjz or sebcrozet went through for their generic vectors if that's the path you want to take.
[00:07:10] <acrichto> aatch: well in good news it'd be very easy to switch (just renaming a few things), so it's not too bad
[00:07:13] <cmr> I think it's fine for just a vec3, but extending to vec4, ... leads to duplication
[00:07:23] <jeaye> Aye, will do.
[00:07:56] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[00:08:22] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[00:09:05] <tikue> how do i show RUST_LOG options?
[00:09:53] <cmr> tikue: RUST_LOG=::help ?
[00:09:59] <tikue> cmr: thanks :) can never remember that
[00:10:35] <dandy> Looking at https://github.com/bjz/cgmath-rs/blob/master/src/cgmath/vector.rs#L34  I see S: Primitive. Is that required in order to use arithmetic operators?
[00:12:10] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[00:12:32] <strcat> dandy: the traits for those are in std::ops
[00:12:41] <doomlord_> might a generic struct Vec3<T> ever make its way into the standard libraries, or is it too special purpose. not even all the operations, just a comon struct declaration available by default might encourage people in the community to write code thats more compatible?
[00:12:43] <strcat> each operator has a trait
[00:12:55] <strcat> there are other numeric traits inheriting from them
[00:13:19] <cmr> doomlord_: I think that's a subquestion of the whole numeric stack
[00:13:26] <cmr> bjz would be the one to ask about that
[00:13:31] <strcat> all of the numeric stuff still needs a major overhaul ;\
[00:13:37] <cmr> strcat: it's getting there
[00:13:58] <strcat> rusti: 5u.neg()
[00:13:59] -rusti- 18446744073709551611u
[00:14:31] *** Quits: eevee (eevee@moz-8B105F97.evrt.wa.frontiernet.net) (Ping timeout)
[00:14:31] <strcat> rusti: std::int::min_value / -1 /* genuine undefined behaviour */
[00:14:32] -rusti- -9223372036854775808
[00:14:34] <doomlord_> struct/trait/impl should decouple agreeing on the data-structuree from agreeing on every single operation :)
[00:14:49] <strcat> cmr: I don't really think the trait hierarchy as-is makes sense
[00:14:52] <dandy> so rather than restrict on Primitive I could just restrict on Add or Mul
[00:15:31] <dandy> pretty neat-o
[00:15:46] <strcat> Primitive needs to be renamed
[00:16:06] *** Joins: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net)
[00:16:12] *** Joins: eevee (eevee@moz-BDB33F35.evrt.wa.frontiernet.net)
[00:19:50] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[00:19:55] <cmr> acrichto: benchmarker back up, now running on ~490 commits
[00:20:16] <cmr> dbaupp: ^
[00:20:28] <cmr> dbaupp: (it's the same python scripts from before, slightly tweaked)
[00:20:33] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[00:20:44] <Jesse> <Waldo> brace yourselves, SpiderMonkey hackers, nullptr is coming \o/
[00:20:45] <Jesse> <bz> Finally, getting into the modern world
[00:20:45] <Jesse> <bz> now spidermonkey folks touching DOM code will stop adding "NULL" all over?  ;)
[00:20:46] <Jesse> sigh
[00:21:28] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[00:21:35] <amatus> SUCCESS!!!!!!!!11111oneoneone https://gist.github.com/amatus/6665852
[00:21:35] <kmc> haha
[00:21:52] <kmc> amatus: oooooh *bookmarks*
[00:22:07] * amatus bounces around the channel
[00:22:16] <cmr> amatus: that's surprisingly short!
[00:22:22] <cmr> amatus: post it to reddit!
[00:22:28] <amatus> all i had to do was use the right toolchain, duh
[00:22:29] <indirect> steveklabnik: how do you keep your rust bleeding edge? I think I'm about to create a script to pull and rebuild and cron it to run every night :P
[00:22:47] <cmr> indirect: if you're using arch or ubuntu, there are nightly packages.
[00:22:58] <indirect> osx
[00:23:06] <indirect> sadly :P
[00:23:06] *** Quits: tikue (tkuehn@90828AFE.B9B3942C.689607DE.IP) (Quit: tikue)
[00:23:08] <pnkfelix> amatus: Indeed, now I need to try to see if that tool chain will work for me.
[00:23:33] <strcat> acrichto: failed again
[00:23:43] <strcat> ;\
[00:23:56] <acrichto> same tests
[00:23:59] <amatus> cmr: i don't have a reddit account, and besides i thought self-promotion was considered tacky on reddit
[00:24:06] <acrichto> tjc: would you be ok if we xfail'd the tests for now?
[00:24:07] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[00:24:21] <tjc> acrichto: Yeah, that's fine. Sorry! Was working on something else that I thought was equally urgent
[00:24:29] <acrichto> oh no worries
[00:24:41] <tjc> amatus: self-promotion is ok on /r/rust, I'd say -- it's not like there's an overwhelming amount of content there :-)
[00:25:18] <Eridius> amatus: spamming every article by your blog or site is tacky and frowned upon. Submitting a carefully curated set of links that you believe to be relevant and likely enjoyed by the subreddit is typically fine
[00:25:24] <kmc> "yeah but reddit is tacky"
[00:26:36] <acrichto> strcat: https://github.com/mozilla/rust/pull/9444
[00:26:54] <strcat> ah I didn't realize there was #[ignore]
[00:27:05] <strcat> I've just removed the #[test] and added a FIXME in the past
[00:27:21] <acrichto> you can also do ignore(reason = "...") I think
[00:27:42] <indirect> is it normal to get "pthread_mutex_lock(&_mutex) failed in src/rt/sync/lock_and_signal.cpp at line 79, result = 22 (Invalid argument)" every other time you run rust --version ?
[00:27:44] <acrichto> haha we both added p=10
[00:27:59] <acrichto> indirect: sadly yes, let me find the issue for that...
[00:28:04] *** Quits: nkoep (nik@moz-A60B8D9F.pool.mediaways.net) (Client exited)
[00:28:05] <dave1629> is there a way to define what fmt!("%?", x) does for a user-defined type x?
[00:28:07] <strcat> acrichto: heh I added p=10 right before you did
[00:28:19] <acrichto> indirect: https://github.com/mozilla/rust/issues/8870
[00:28:23] <indirect> acrichto: phew, I didn't screw up compiling it this time :)
[00:28:24] <indirect> thanks
[00:28:31] <acrichto> dave1629: no, but you can do that with format!
[00:28:34] <strcat> dave1629: no, %? is intended to just be reflection-based debugging
[00:28:50] <acrichto> indirect: yeah it's just a false positive for now
[00:28:54] <acrichto> or negative, I forget which
[00:28:56] <strcat> in the new formatting stuff, format!("{}", x) is trait-based and {:?} is the reflection stuff
[00:29:07] <kmc> woah exciting, I get somewhere between 0 and 3 of that error message every time I run rust --version
[00:29:22] <strcat> kmc: it happens with rustc -v too, just very rarely
[00:29:33] <strcat> kmc: the pthread assertion, right?
[00:29:39] <kmc> yeah
[00:30:15] <Jesse> in borrow.rs, why does ref_eq have explicit lifetime paramters?
[00:30:15] <Jesse> pub fn ref_eq<'a, 'b, T>(thing: &'a T, other: &'b T) -> bool
[00:30:57] <dave1629> thanks!  I may be asking the wrong question - is there a conventional name like __str__ in Python for this?
[00:31:06] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[00:31:06] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/cH6r-w
[00:31:06] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[00:31:08] <cmr> dave1629: no, it's a trait.
[00:31:14] <kmc> dave1629: there's a ToStr trait
[00:31:23] <cmr> dave1629: we don't have duck typing like that
[00:31:24] <Luqman> \o/ crate_map is gone
[00:31:28] <cmr> Luqman: \o/
[00:31:29] <engla> Jesse: I think they are useless there
[00:31:41] <cmr> Jesse: I also think that. It's probably ancient code.
[00:31:50] <kmc> cmr: except for 'for' loops :3
[00:31:51] <Jesse> should there be a lint warning for useless named lifetimes?
[00:31:59] * amatus continues with phase2: writing a wrapper for libmp3lame
[00:31:59] <dave1629> kmc: thanks!  That's what I'm looking for
[00:32:00] <cmr> kmc: shh that's a bug
[00:32:03] <acrichto> Luqman: nice!
[00:32:08] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[00:32:11] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[00:32:12] <Luqman> strcat: acrichto probably going to have update the snapshot build now though
[00:32:16] <cmr> Jesse: is it possible to detect that?
[00:32:23] <cmr> If it's used only once?
[00:32:37] <cmr> That is, using it only once is where it's useless
[00:32:38] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[00:32:40] <acrichto> Luqman: lucky for you a snapshot will be attempted on the next pull :)
[00:32:43] <strcat> Luqman: once bors makes the merge commit
[00:32:50] <Jesse> cmr: if it's only used once, it's useless, right?
[00:33:12] <acrichto> Luqman: although what does the snapshot need to be for?
[00:33:14] <strcat> does ref_eq actually make sense?
[00:33:30] <strcat> seems like a questionable guarantee to make
[00:33:45] <Jesse> strcat: what do you mean?
[00:33:47] <dandy> are there any general idea for Rust 1.0 being a real thing? When servo works?
[00:34:06] <kmc> servo works already fsvo "works"
[00:34:11] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[00:34:17] <strcat> Jesse: saying address quality == object identity has performance implications, especially for what a GC can do
[00:34:18] <Luqman> acrichto: because the start entry point no longers takes the crate_map as an arg
[00:34:29] <acrichto> strcat: HTML_HARD_WRAP -- Treat newlines in paragraphs as real line breaks, github style
[00:34:32] <kmc> I don't think the timeline roadmaps of Servo and Rust are strongly tied at this point
[00:34:33] <acrichto> strcat: we just turn that off
[00:34:46] <strcat> acrichto: ah
[00:34:47] <tjc> dandy: We're actively discussing that right now (we = the core team)
[00:34:48] <pnkfelix> strcat: I doubt we'll be able to do moving GC on borrowed-ptrs ...
[00:34:51] <dandy> How is it decided that rust is ready?
[00:34:53] <dandy> Gotcha
[00:34:57] <strcat> pnkfelix: not on borrowed pointers themselves
[00:35:07] <Jesse> strcat: when would a GC violate the assumption that address quality == object identity?
[00:35:20] <pnkfelix> Jesse: when it moves the object
[00:35:29] <Jesse> wouldn't it move both pointers at once?
[00:35:41] <tjc> dandy: Rust will be ready when some subset of the bugs currently listed in the issue tracker as "milestone n" (for n in [1..5]) are done, but decidign what subset it is is what's on our agenda right now :-)
[00:35:48] <pnkfelix> Jesse: if it can precisely identify all of them, sure
[00:35:54] *** Quits: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[00:36:02] *** Joins: nejucomo (Adium@moz-4781A3E8.hsd1.ca.comcast.net)
[00:36:03] <kmc> if you call to_uint(x) == to_uint(y), a GC can occur between the to_uint calls
[00:36:04] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[00:36:04] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/QrYMrQ
[00:36:04] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[00:36:06] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[00:36:06] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/hvUnYQ
[00:36:06] <ghrust> 13rust/06auto 14a47cdc0 15Alex Crichton: Ignore some rustpkg tests for now...
[00:36:06] <ghrust> 13rust/06auto 14348d844 15bors: auto merge of #9444 : alexcrichton/rust/ignore-some-tests, r=thestinger...
[00:36:07] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[00:36:12] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[00:36:14] <kmc> and the GC won't update that "pointer" once it's been coerced to a uint
[00:36:20] <acrichto> strcat: would you like to do the honors?
[00:36:26] <strcat> acrichto: sure
[00:36:38] <Jesse> kmc: makes sense
[00:36:39] * acrichto has all 3 workspaces currently building rust
[00:37:23] <pnkfelix> kmc: Wait, are we looking at to_uint, or at ref_eq?  They happen to be right next to oneanother ...
[00:37:42] *** Joins: tikue (tkuehn@90828AFE.B9B3942C.689607DE.IP)
[00:37:48] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[00:37:48] <ghrust> 01[13rust01] 15thestinger 04force-pushed 06snap-stage3 from 142b84d1f to 14348d844: 02http://git.io/f3Qwfg
[00:37:48] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[00:37:52] <pnkfelix> (the former coerces to uint, the latter to *T.  Not that I think the GC's going to handle *T ...)
[00:38:03] <kmc> I was just thinking about to_uint in general
[00:38:09] <kmc> not a particular library function that uses it
[00:38:50] * pnkfelix drops back into lurker mode
[00:39:10] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:39:41] *** Joins: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP)
[00:41:36] *** Joins: jasdevsingh (jasdevsing@moz-60878DF8.hsd1.va.comcast.net)
[00:42:41] *** Quits: jasdevsingh (jasdevsing@moz-60878DF8.hsd1.va.comcast.net) (Quit: jasdevsingh)
[00:44:39] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[00:44:53] <Jesse> https://github.com/mozilla/rust/issues/9445 - Lint for unused lifetime parameters
[00:45:21] <cmr> Oh, I thought that was a pull request
[00:45:24] <cmr> Was gunno say :P
[00:45:37] <brson> acrichto: i'm going to look at that crash with --version
[00:45:58] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[00:46:55] <Jesse> cmr: hehe
[00:46:56] <acrichto> brson: ok, I can't reproduce it any more
[00:47:07] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:47:12] <brson> hm
[00:47:17] <acrichto> even when running it 10k times
[00:51:39] *** Joins: Larry (larryfox@moz-B8648F0F.nycmny.fios.verizon.net)
[00:52:02] <strcat> acrichto: I still can now and then
[00:52:05] <benh> rusti: println!("{:?}", &42 as &std::from_str::FromStr)
[00:52:06] -rusti- &std::from_str::FromStr<no-bounds>
[00:52:06] -rusti- ()
[00:52:09] <strcat> but not most of the time :(
[00:52:29] <benh> Any use for method-less trait objects? :v
[00:52:43] <strcat> paper weights
[00:52:48] <cmr> heh
[00:53:14] <cmr> I think it still works with associated functinos?
[00:54:57] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[00:55:31] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[00:55:55] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[00:56:15] <engla> strcat: did you consider unifying the iterator methods on Option too? you only need .iter()
[00:56:36] <strcat> engla: yeah, I just left them for the moment since they may become traits
[00:56:38] <strcat> I'm not sure
[00:57:00] <engla> ok
[00:57:12] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[00:58:00] <engla> and I would use .as_ref() rather than .as_imm().. I know you like naming discussions
[00:58:13] <strcat> I called it as_imm to match as_mut
[00:58:18] *** Quits: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[00:58:52] <engla> well in patterns they are called `ref` and `ref mut`
[00:58:54] <strcat> .as_mut_ref().unwrap() vs. .as_mut().get()
[00:59:16] <strcat> concise names are valuable because these get chained a lot
[00:59:23] <engla> yes of course
[00:59:24] <strcat> if only so I don't have to wrap 100 lines in rustc by hand
[00:59:30] <engla> I think .as_ref() and .as_mut() is fine
[00:59:36] <engla> my preference
[01:00:53] *** Joins: brson_ (brson@moz-BBE3ABD.mv.mozilla.com)
[01:00:59] *** Quits: nejucomo (Adium@moz-4781A3E8.hsd1.ca.comcast.net) (Quit: Leaving.)
[01:01:04] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[01:01:15] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[01:02:37] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Quit: Leaving)
[01:04:56] *** Joins: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net)
[01:05:42] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[01:06:57] *** Joins: Ralith (ralith@moz-36466B9F.customer.broadstripe.net)
[01:07:19] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[01:07:57] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: My lid went down)
[01:11:19] *** jorendorff_away is now known as jorendorff
[01:11:28] *** Quits: themgt (themgt@moz-EEE4DC4.baf.movistar.cl) (Quit: themgt)
[01:11:33] *** Joins: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net)
[01:11:50] *** Quits: fyolnish (fyolnish@moz-3BED4C7D.uqwimax.jp) (Client exited)
[01:12:07] <amatus> where are some good examples of wrapped C libraries?
[01:12:13] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[01:12:28] <strcat> amatus: the ffi tutorial has one
[01:12:31] <cmr> amatus: rust-zmq, glfw3, ffi tut
[01:12:50] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[01:12:55] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[01:14:49] <strcat> cmr: oh and another issue if the #[fixed_stack_segment] thing
[01:15:06] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[01:15:13] <strcat> you wouldn't put #[inline(never)] on them if you weren't using the rust runtime with segmented stacks
[01:15:35] <strcat> it makes LLVM's libcall optimizations not work
[01:16:23] <cmr> s/if/is/ ?
[01:17:02] <strcat> yes
[01:17:03] <strcat> ;p
[01:17:15] <strcat> at least the first one :)
[01:17:36] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[01:17:36] *** ChanServ sets mode: +ao dherman dherman
[01:18:19] <cmr> dherman: ping
[01:20:02] <dherman> cmr: pongish
[01:20:43] <cmr> dherman: is your oscon talk recorded anywhere?
[01:20:47] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[01:21:18] <dherman> cmr: good question, I think it was, not sure if it's gone up
[01:21:19] <dherman> lemme see
[01:21:27] *** Joins: benjamin (benjamin@moz-8A7708E6.members.linode.com)
[01:21:37] <benjamin> x86_64-unknown-linux-gnu/stage0/bin/rustc: error while loading shared libraries: libtinfo.so.5: cannot open shared object file: No such file or directory
[01:21:46] <cmr> benjamin: known problem.
[01:21:56] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[01:22:03] <benjamin> known solution? :)
[01:22:16] *** jorendorff is now known as jorendorff_away
[01:22:17] <cmr> symlink libtinfo to libncurses, is the quick hack
[01:23:21] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[01:23:37] <dherman> cmr: don't see it
[01:24:20] <dherman> cmr: maybe it'll be posted eventually.. if I find it I'll post it
[01:24:24] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[01:24:26] <cmr> dherman: thanks!
[01:24:40] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[01:24:43] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[01:24:49] <amatus> will it create problems if my wrapper for libmp3lame.so is named mp3lame.rs?
[01:24:54] *** Joins: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net)
[01:25:05] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:25:19] <cmr> amatus: no
[01:25:54] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[01:27:20] *** Joins: bt3ze (bt3ze@moz-3F0303DA.hsd1.va.comcast.net)
[01:27:51] *** Joins: MrOrdinaire (Mibbit@3749AFFF.391F484.FD383126.IP)
[01:29:09] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[01:29:51] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[01:29:53] <strcat> benjamin: ideally it will be fixed tonight
[01:30:04] <Amaranth> amatus: rust libraries are libmp3lame-somehashvalue-0.1.so
[01:30:21] <benjamin> cool
[01:30:27] <strcat> assuming the snapshot doesn't fail to build 10 more times
[01:30:33] <amatus> Amaranth: good point
[01:30:44] <bjz> strcat: re: numerics, please post your thoughts on https://github.com/mozilla/rust/issues/4819
[01:30:47] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[01:31:16] *** Joins: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp)
[01:31:17] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Connection reset by peer)
[01:31:36] <bjz> :)
[01:31:36] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[01:32:13] <bjz> strcat: its better than it was, but I'm still not happy
[01:32:19] <benjamin> quaternions :O
[01:32:22] <strcat> bjz: yeah, it's better
[01:32:36] * strcat wants perfection :P
[01:33:26] * bjz wishes it was closer to abstract algebra, but didn't win on that :/
[01:35:08] * bjz remembers a time when there was no generic maths
[01:35:11] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[01:35:30] *** Joins: themgt (themgt@moz-EEE4DC4.baf.movistar.cl)
[01:36:01] <MrOrdinaire> hi, I'm stuck on this error. Does anyone know what it means? error: type `comm::SharedChan<rt::io::signal::Signum>` does not implement any method in scope named `send_deferred`
[01:37:14] <MrOrdinaire> I grep-ed for and found `impl SendDeferred<T> for SharedChan<T>` in `src/libstd/comm.rs`
[01:37:46] <MrOrdinaire> rt::io::signal::Signum is an enum with `#[deriving(Eq, IterBytes)]`
[01:37:50] <tikue> MrOrdinaire: sounds like you need to import SendDeferred
[01:38:12] <jack> MrOrdinaire: You need to import the trait to see the methods.
[01:38:14] <tikue> MrOrdinaire: try adding use std::rt::comm::SendDeferred;
[01:38:52] <engla> bjz: what's your matrix lib called?
[01:39:02] <bjz> engla: cgmath-rs
[01:39:21] <bjz> engla: it's not general linear algebra though
[01:39:50] <bjz> engla: if that's what you're after
[01:40:01] <MrOrdinaire> jack, tikue: thanks a bunch. It works now.
[01:40:17] <tikue> np
[01:40:24] <engla> not really. I'm thinking of the simplest stuff, like 2- and 3- coordinate points are useful everywhere
[01:41:00] *** Parts: a_m0d|away (a_m0d@moz-D2E0D7FB.acanac.net) ()
[01:41:33] <bjz> engla: okiedokie, then cgmath does that
[01:41:38] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:41:59] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:42:07] *** Joins: klapaucius (klapaucius@E5AF674E.5692770D.BB41F968.IP)
[01:42:27] *** Quits: kseo (kseo@338DE5BC.4166765B.485A6DF.IP) (Client exited)
[01:42:29] *** Parts: klapaucius (klapaucius@E5AF674E.5692770D.BB41F968.IP) ()
[01:42:44] *** Joins: klapaucius (klapaucius@E5AF674E.5692770D.BB41F968.IP)
[01:42:45] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[01:42:49] <bjz> engla: still needs lots of work, but it's improved a ton. I'm converging on a design that seems to work. Let me know on #rust-gamedev if you have any issues
[01:43:01] <brson_> acrichto: oh, I remember I can't reproduce this --version crash on linux
[01:43:16] <acrichto> brson_: how come?
[01:43:19] <Luqman> brson_: rust or rustc?
[01:43:25] <brson_> rustc
[01:43:34] <brson_> I don't know why i can't reproduce it!
[01:43:39] <brson_> it just doesn't crash
[01:43:39] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:43:44] <brson_> i can try on mac
[01:43:49] <acrichto> strcat was also saying it was rare
[01:44:00] <acrichto> I'm on osx and can't reproduce it
[01:44:07] <strcat> I can run it over and over in a loop and it doesn't happen
[01:44:12] <strcat> but now and then someone hits it with my bot
[01:44:20] <strcat> because it runs rustc -v for
[01:44:22] <strcat> rusti: version
[01:44:22] -rusti- "rustc 0.8-pre (9e8fb4a 2013-09-17 12:50:46 -0700)"
[01:44:50] * strcat has been able to duplicate it a few times... not consistently
[01:45:05] <strcat> afaik rust --version is hitting the same error though
[01:45:07] <strcat> and it's consistent
[01:45:17] <cmr> I've never seen it on rustc, but sometimes with rust.
[01:45:25] <cmr> Some people on OS X seem to be able to reliably replicate it
[01:45:58] <acrichto> brson_: oh wow yeah I'm hitting it a lot with "rust -v" instead of "rustc -v"
[01:46:06] *** Joins: kseo (kseo@338DE5BC.4166765B.485A6DF.IP)
[01:46:28] <strcat> maybe because rustc always spins up a task
[01:46:37] <strcat> to catch failures and report them as an ICE
[01:46:44] <cmr> I hit it 3/20 times running rust -v on linux
[01:46:55] <cmr> rust 0.8-pre (524c190 2013-09-14 12:30:54 -0700)
[01:47:13] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[01:47:38] <engla> bjz: ok!
[01:49:23] <brson_> acrichto: ah, me too
[01:50:02] *** brson_ is now known as brson
[01:50:03] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[01:50:05] <strcat> rusti: let x = ~5; x = x;
[01:50:07] -rusti- pastebinned 8 lines of output: http://sprunge.us/eUXb
[01:50:16] <strcat> rusti: let mut x = ~5; x = x;
[01:50:18] -rusti- <anon>:7:25: 7:26 warning: value assigned to `x` is never read [-W dead-assignment (default)]
[01:50:19] -rusti- <anon>:7          let mut x = ~5; x = x;
[01:50:19] -rusti-                                   ^
[01:50:19] -rusti- ()
[01:50:22] <sp3d> rust_initialize_rt_tls_key -> lock_and_signal::lock -> abort
[01:50:26] <sp3d> according to gdb
[01:50:36] *** Joins: jeffb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[01:52:19] <brson> rust calls libc::exit!
[01:52:45] <acrichto> is that bad?
[01:53:10] <cmr> you generally shouldn't call libc::exit
[01:53:17] <cmr> it doesn't run destructors
[01:53:37] <strcat> going out-of-memory aborts or gets you killed too, so it's not unsafe
[01:53:41] <strcat> just not a great practice
[01:54:08] <acrichto> is there a recommended way for "let's just get out of here" then?
[01:54:47] <cmr> we need a fail! that doesn't... fail
[01:54:52] <cmr> just unwind the stack and fail
[01:55:22] <acrichto> cmr: isn't that what tasks are?
[01:55:30] <amatus> i can't pass *mut T to a function that takes *T?
[01:55:35] <cmr> acrichto: yeah, but fail! prints a message and such, doesn't it?
[01:56:00] <strcat> amatus: you can cast it with 'as'
[01:56:09] <acrichto> cmr: I think it's just print, then unwind
[01:56:24] <cmr> Avoiding the print would be nice
[01:56:38] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[01:56:56] <strcat> I don't think it should print
[01:57:23] <acrichto> it also allocates...
[01:57:29] *** Joins: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP)
[01:57:31] <jeaye> How can I 'use ::foo::bar;'?
[01:57:37] <acrichto> https://github.com/mozilla/rust/pull/9261 fixes the logging though
[01:57:42] <cmr> jeaye: `use foo::bar`
[01:57:49] <cmr> jeaye: imports are always relative to the crate root
[01:57:54] <jeaye> That's doesn't resolve. :|
[01:58:11] <acrichto> jeaye: perhaps it's not pub?
[01:59:23] <jeaye> Ah, I found the problem.
[01:59:55] <jeaye> 'extern mod util' where the current file (mod.rs) is also importing 'mod util;' which is a different file
[02:00:12] <jeaye> No error about that though, the local mod just shadows.
[02:00:22] *** Quits: Ferreus (ferreus@moz-4FA3FF80.dyn.telefonica.de) (Quit: WeeChat 0.4.1)
[02:00:29] *** Joins: zxcdw (r-a@858B320D.B543C4DE.3933CC16.IP)
[02:00:32] <acrichto> jeaye: yeah resolve error messages sadly aren't the best
[02:01:38] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[02:03:18] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[02:03:25] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[02:03:35] <andrew-d> strcat, acrichto: When I run 'rust -v', I get this, if it helps: pthread_mutex_lock(&_mutex) failed in /Users/andrew/Documents/repos/rust/src/rt/sync/lock_and_signal.cpp at line 79, result = 22 (Invalid argument)
[02:04:30] *** Joins: skoizza (Mibbit@moz-C3630477.hsd1.va.comcast.net)
[02:05:01] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[02:05:06] <acrichto> yeah that looks similar sadly :(
[02:06:08] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 23.0.1/20130814063812])
[02:07:14] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:09:30] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[02:10:03] *** Quits: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[02:13:48] <bogen> so... this is likely a basic rust question... when I pass a string 'let x = ~"foo";' to a function "fn foo (y : ~str)  {...}" via  "foo (x);"  is that pasing a reference? or a copy?
[02:14:27] <cmr> bogen: ~T is an owned pointer to a T. It's passing the pointer by value.
[02:14:44] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[02:14:58] <strcat> bogen: passing, assignment and returns are always a shallow copy (in terms of implementation)
[02:15:15] <strcat> but if the type has a destructor, it's considered a move of ownership
[02:15:28] <strcat> so ~T still has value semantics
[02:16:05] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[02:16:05] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/hvUnYQ
[02:16:05] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[02:19:37] <engla> that's a very useful way to think of it actually
[02:20:54] <strcat> (+ a note about &fn and &mut acting like types with destructors, and moving ownership)
[02:20:59] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[02:21:00] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/3u4lNw
[02:21:00] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[02:21:01] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[02:21:01] <ghrust> 01[13rust01] 15bors pushed 17 new commits to 06auto: 02http://git.io/eN3fKA
[02:21:01] <ghrust> 13rust/06auto 143e5de06 15Patrick Walton: librustc: Change fold to use traits instead of `@fn`.
[02:21:01] <ghrust> 13rust/06auto 143399353 15Patrick Walton: librustc: Remove garbage collected functions from front/{config,test} and metadata/{tydecode,tyencode}
[02:21:01] <ghrust> 13rust/06auto 1415ce791 15Patrick Walton: librustc: Port the pretty printer annotation infrastructure to use traits instead of garbage collected functions.
[02:21:03] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[02:21:26] <bogen> ok, thanks. I basically wanted to not make deep copies when I don't need to. So, in the case of pointers to simple types, is 'let x = ~"abcd";'  roughly the same as 'const char* x = "abcd"' in C? (Well, with the x being immutable as well in rust, not just what it is pointing to)
[02:21:44] <strcat> bogen: rust will never do a silent heap allocation
[02:21:49] <strcat> it's not part of the language
[02:22:02] <strcat> (as in while passing/assigning/returning)
[02:22:29] <strcat> bogen: it will always copy the same amount as C - entirely shallow
[02:22:42] <strcat> but a type like ~int doesn't have reference semantics
[02:23:53] <strcat> due to move semantics
[02:24:51] <strcat> rusti: let x = ~5; let _ = x; x // error, was moved from
[02:24:53] -rusti- ~5
[02:24:59] <strcat> er
[02:25:08] <strcat> rusti: let x = ~5; let _y = x; x
[02:25:10] -rusti- pastebinned 8 lines of output: http://sprunge.us/FgiO
[02:25:23] <strcat> _ patterns are broken
[02:25:46] <bogen> ok
[02:25:57] <acrichto> rusti: use std::int, std::uint;
[02:25:59] -rusti- pastebinned 7 lines of output: http://sprunge.us/JcNh
[02:26:14] <acrichto> wow that's valid syntax
[02:26:41] <cmr> huh
[02:26:44] <cmr> I didn't know that eitehr
[02:26:55] <bjz> 8[
[02:27:05] <cmr> Discovering language features by examining the AST!
[02:27:26] *** Joins: tautologico (shung@7A53DAF8.92451A23.6EB699AE.IP)
[02:27:56] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[02:28:50] <bjz> rusti: unsafe { std::cast::transmute::<~[uint], (uint, uint)>(~[1, 2, 3, 4, 5]) }
[02:28:52] <ChrisMorgan> I think it ends up like with Python: multiple imports on a line like that *works*, but is discouraged in PEP 8. Makes me wonder whether it should be removed from Rust.
[02:29:20] <bjz> oh - bye rusti!
[02:30:11] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[02:31:21] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Connection reset by peer)
[02:31:27] <cmr> ChrisMorgan: I agree, probably should be removed
[02:31:37] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:31:40] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:31:57] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[02:32:35] <strcat> rusti: 2
[02:32:41] -rusti- timeout triggered!
[02:32:43] <strcat> rusti: 2
[02:32:45] -rusti- 2
[02:32:55] *** Parts: Aetherspawn_BNC (uid6924@moz-31ABA2C0.irccloud.com) ()
[02:33:05] <ChrisMorgan> rusti: unsafe { std::cast::transmute::<~[uint], (uint, uint)>(~[1, 2, 3, 4, 5]) }
[02:33:12] -rusti- pastebinned 7 lines of output: http://sprunge.us/HPiV
[02:33:36] <ChrisMorgan> That's a weird compilation error.
[02:33:44] <strcat> brson: ^^ there's a failure from rustc -v ;p
[02:33:47] <strcat> too bad it prints as an ICE...
[02:34:05] <strcat> ChrisMorgan: it's 2 errors
[02:34:12] <strcat> one from rustc -v, + your compiler error
[02:34:41] <strcat> strange how it happens after I reboot
[02:34:43] <ChrisMorgan> Note that the transmute error is at line 1, column 0, rather than where it actually is.
[02:35:06] <strcat> ChrisMorgan: that's just because someone did the span wrong
[02:35:17] <strcat> there are a lot of those :)
[02:35:18] * ChrisMorgan wishes span column numbers were 1-indexed rather than 0-indexed; all the tools that I've seen work with a 1-index
[02:35:29] * cmr thought they were 1-indexed
[02:35:59] <ChrisMorgan> No, it's always off by one from where it "should" be.
[02:36:20] <ChrisMorgan> e.g. using the compiler config for Vim highlights the error one character to the left of where it actually is
[02:36:45] <ChrisMorgan> Hence also the 1:0 span in that error
[02:37:50] *** Quits: zz_kimundi (kimundi@moz-BFDA4039.dip0.t-ipconnect.de) (Ping timeout)
[02:40:23] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[02:41:11] <ChrisMorgan> O... kay... extra::url::to_str doesn't do anything with the port :-/
[02:41:43] *** Joins: zz_kimundi (kimundi@moz-C01E77F7.dip0.t-ipconnect.de)
[02:42:01] *** zz_kimundi is now known as kimundi
[02:42:13] *** Quits: GeneralMaximus (ankur@CE720DCC.457F5A6C.D5D59AD9.IP) (Ping timeout)
[02:42:34] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:42:35] <polyfractal> I'm trying to build a mutable vector inside of a struct/impl setupâ€¦and not having much success.  Any tips?  http://pastebin.com/8SYmPJDe
[02:43:38] <bogen> I have a function that I want to have it return a immutable hash map (but obviously came a mutable one since it had to be populated) but I'm running into trouble on how to return it. For starters I can't type blah = the hash map type. http://bpaste.net/show/134908/
[02:44:11] <strcat> bogen: you don't need to write the type, rust has type inference
[02:44:25] <strcat> the ::<> would go at the end, atm
[02:44:29] <strcat> if you did want to explicitly state it
[02:44:49] <strcat> rusti: let mut map = std::hashmap::HashMap::new(); map.insert(2, 3); map.len()
[02:44:52] -rusti- 1u
[02:45:12] <Luqman> need to specify in the return type though
[02:45:36] <strcat> yeah, missing the ret type
[02:45:37] <bogen> oh, ok, it defaults to the first insert. Alright, but on the return type it does not like the < >
[02:45:53] <strcat> bogen: it infers the type from the usage, so in that case the insert
[02:46:22] <strcat> bogen: function signature types are only inferred for lambdas - for 'fn' you always need to write the ret type and param types
[02:46:44] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[02:47:45] <ChrisMorgan> ... hang on, why is Url's port Option<~str> rather than Option<u16>?
[02:48:04] *** Quits: josedonizetti (josedonize@moz-CA73D699.cpe.teksavvy.com) (Quit: josedonizetti)
[02:48:26] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Ping timeout)
[02:49:05] <strcat> ChrisMorgan: you're making the mistake of assuming most of the library was designed, and not thrown together ;P
[02:49:21] <strcat> afaik that url module is just ancient
[02:49:23] <ChrisMorgan> "It was quicker" is certainly my guess as to why it's thus.
[02:49:47] <ChrisMorgan> I seem to recall someone was doing something about it, following a WHATWG spec or something. Can't remember details...
[02:49:48] <strcat> or maybe rust didn't have unsigned 16-bit integers when someone wrote it ;p
[02:49:53] * strcat would not be surprised
[02:50:07] <polyfractal> Doh, figured out my own question:  need to use `&mut self` instead of `&self` when modifying fields of the struct/impl.  Silly me :)
[02:54:21] <bogen> http://bpaste.net/show/134910/ the type returned is ()
[02:55:20] <strcat> bogen: you have a semicolon after bracketHash
[02:55:29] <strcat> so the last expr is an implicit ()
[02:56:00] *** jorendorff_away is now known as jorendorff
[02:56:42] *** Joins: lolcatz (Mibbit@moz-F2E42C9D.hsd1.va.comcast.net)
[02:56:56] *** Quits: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP) (Ping timeout)
[02:56:57] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[02:57:24] <lolcatz> can any one tell me how i might find out CWD from within a rust program?
[02:57:34] <bogen> strcat. ok thanks, it returns what I want now (and it is immutable, which is what I wanted)
[02:57:36] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Connection reset by peer)
[02:57:37] <cmr> rusti: std::os::getenv("CWD")
[02:57:38] -rusti- None
[02:57:42] <cmr> lolcatz: ^
[02:57:45] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[02:57:51] <lolcatz> is that in .8 or .7?
[02:57:58] <cmr> both, should be.
[02:58:11] *** Quits: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[02:58:11] <strcat> bogen: the mutability is determined by where it is located
[02:58:18] <cmr> I don't think it's changed since at least 0.6
[02:58:36] <strcat> a hashmap is a normal owned type with inherited mutability
[02:58:43] *** Quits: dandy (Dandy@moz-84CC8377.hsd1.co.comcast.net) (Quit: Leaving)
[02:58:50] <ChrisMorgan> :-( you can't use a named argument as more than one type in new format. e.g. "{a:?} {a:s}" isn't valid.
[02:59:30] <lolcatz> thanks
[02:59:38] <polyfractal> Just to confirm, it looks like after a vector is allocated using `vec::with_capacity`, I have to manually push zeros into it before it is a "valid" vector?
[02:59:46] <ChrisMorgan> And something like "{a:?} {a}" is interpreted as "{a:?} {a:?}". That really misled me.
[02:59:52] <cmr> polyfractal: it's still valid, it's just of length 0
[03:00:15] <cmr> polyfractal: do vec::from_elem(length, 0) if you want a zerod, length-long vector.
[03:00:17] <strcat> polyfractal: length and capacity are separate
[03:00:37] <strcat> with_capacity is when you want to allocate but not initialize
[03:00:59] <polyfractal> ahh, makes sense.  Thanks cmr and strcat :)
[03:01:08] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[03:02:45] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[03:03:18] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[03:04:05] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[03:04:54] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[03:04:54] *** Quits: canhtak (jeremy@moz-C3EEEF4B.wl.t.ulaval.ca) (Quit: canhtak)
[03:07:46] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[03:08:39] *** Parts: lolcatz (Mibbit@moz-F2E42C9D.hsd1.va.comcast.net) ()
[03:09:31] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[03:10:42] <tikue> is there a way to check if two shared chans are sending to the same place?
[03:11:01] <bblum> no but there could be
[03:11:17] <tikue> bblum: i'm wondering if the fact that i want to do this is a code smell or not
[03:11:17] *** Quits: KindOne (KindOne@moz-E94E5CDC.dynamic.ip.windstream.net) (Ping timeout)
[03:11:24] <bblum> oh wait
[03:11:26] <bblum> hm
[03:11:43] *** Quits: themgt (themgt@moz-EEE4DC4.baf.movistar.cl) (Ping timeout)
[03:11:43] <bblum> no
[03:11:51] <bblum> that is not an operation that makes sense with the newrt implementation
[03:11:55] <bblum> it would work with the old implementation
[03:11:59] <tikue> ah ok
[03:12:25] <tikue> thanks :)
[03:12:29] <bblum> though you could feasibly just give every sharedchan a name by hashing the address of the chan used to construct it or something
[03:12:47] <bblum> however, of course, collision risk
[03:12:57] <bblum> hmm
[03:13:05] <bblum> you could give it a name by allocating a ~().
[03:13:25] *** Joins: themgt (themgt@moz-EEE4DC4.baf.movistar.cl)
[03:13:27] <bblum> wait, no
[03:13:32] <bblum> even that would not make sense.
[03:13:45] <bblum> newrt sharedchans are too clever even for that
[03:14:02] <bblum> wait, what am i thinking. this is easy.
[03:14:12] <bblum> they are just unsafe arc handles
[03:14:36] *** Quits: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP) (Quit: Yeri)
[03:14:49] <bblum> so you could add, like, UnsafeArc::getID() which returns the rc'ed pointer casted to a uint
[03:15:15] <strcat> bblum: 0-size allocations are implementation defined, too
[03:15:21] <strcat> jemalloc could return null iirc
[03:15:28] <bblum> strcat: yeah i thought of that
[03:15:44] *** Joins: KindOne (KindOne@moz-6E538F5C.dynamic.ip.windstream.net)
[03:15:46] <bblum> fortunately the arc pointer is the obviously correct solution to this
[03:15:49] <strcat> and we might not want to guarantee ~ always allocates, not sure
[03:15:54] <bblum> tikue: so you could add this, it would be really easy
[03:17:01] <tikue> bblum: SharedChan.get_id() ?
[03:18:12] <bblum> yea
[03:21:37] <tikue> bblum: Looking at the code for SharedChan in rt::comm, I'm not sure I know how to do this :)
[03:21:41] <Jesse> rusti: &() as *() as uint
[03:21:42] -rusti- 0u
[03:21:54] <jeaye> o.O
[03:22:03] <bblum> tikue: start with UnsafeArc in unstable/sync.rs
[03:22:06] <jeaye> Jesse: Nice trick
[03:22:09] <Jesse> rusti: &'a' as *char as uint
[03:22:10] -rusti- 140640212095220u
[03:22:36] <Luqman> () is zero sized afaik
[03:22:49] <strcat> yep
[03:23:38] <Jesse> should ref_eq have an assertion that sizeof(T) > 0 ?
[03:23:55] <Jesse> so you don't try to compare the "identity" of two units?
[03:24:05] <strcat> I don't think ref_eq should exist
[03:24:28] <cmr> Yeah, I don't really see when I'd ever use it.
[03:24:42] <strcat> addresses != identity, in rust - zero-size types, merging of identical functions, etc.
[03:25:23] <strcat> you can use it as a hack but in general it doesn't necessarily work
[03:25:32] <Jesse> it makes sense for nodes in a list or tree
[03:25:36] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[03:26:40] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[03:26:56] <bogen> wow, I love the simplicity of "classes" in rust. :)
[03:27:34] <cmr> bogen: we don't have classes, and it's quite wrong to think of traits as classes.
[03:27:38] *** Quits: c74d (c74d@moz-E2EAC718.oc.oc.cox.net) (Ping timeout)
[03:27:41] <cmr> They're closest to java interfaces
[03:27:49] <acrichto> strcat: snapshot succeeded, making commit now
[03:27:53] <Jesse> "i like it!" "WRONG."
[03:28:02] *** Joins: c74d (c74d@moz-E2EAC718.oc.oc.cox.net)
[03:28:03] <cmr> (They're haskell's typeclasses, if you're familiar with that)
[03:28:15] <bogen> well, I'm just using struct/impl
[03:28:27] <strcat> acrichto: yay!
[03:28:32] <strcat> so happy...
[03:28:42] <strcat> repo can start building rust-git packages again ;p
[03:30:04] <Luqman> acrichto: \o/
[03:30:22] <acrichto> it started to build, good enough for me! https://github.com/mozilla/rust/pull/9454/files
[03:32:01] <Luqman> haha, a bit enthusiastic there huh strcat :P
[03:32:34] <strcat> Luqman: well my rust package hasn't been able to be updated for a week :(
[03:32:45] <strcat> we've been trying to make this snapshot for a while :s
[03:32:52] <Luqman>  yea, i saw
[03:32:59] <Luqman> but finally!
[03:33:27] *** Quits: MrOrdinaire (Mibbit@3749AFFF.391F484.FD383126.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:33:30] *** Quits: jeffb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffb)
[03:34:27] <bogen> in an impl method how do I access a data member?  self.data_member does not work, and data_member by iself does not work
[03:34:29] <tikue> cmr: i personally think struct/impl is quite similar to classes in other languages
[03:34:38] <strcat> acrichto: yay no libtinfo in the ldd output ;]
[03:34:41] <tikue> bogen: self.data_member _does_ work
[03:34:42] <jeaye> bogen: With self.data_member
[03:34:53] <jeaye> bogen: Assuming the function takes &self or &mut self
[03:35:06] <strcat> or self by-value
[03:35:15] <tikue> bogen: methods take self explicitly as the first argument (usually &self or &mut self, occasionally self by value)
[03:35:19] <jeaye> Where is that used, strcat?
[03:35:35] <strcat> when you want self by-value? ;p
[03:35:36] <jeaye> (other than upcoming dtors)
[03:35:45] <tikue> jeaye: iterators
[03:35:54] <jeaye> I see
[03:35:56] <strcat> jeaye: whenever you need your own copy of the value
[03:35:57] <Luqman> bogen: do you mean this in the context of `impl Foo` or `impl Bar for Foo` ?
[03:36:04] <strcat> jeaye: same reason you take other types not by-reference
[03:36:08] <bogen> ok, I get it, an explcity c++ "this", that makes sense.
[03:36:13] <strcat> if you need ownership, take it by-value
[03:36:23] <strcat> that way the caller can often elide a copy
[03:36:25] <jeaye> Yeah, just never ran into a case where it'd be needed, I s'pose.
[03:36:30] <bogen> that works (&self, other parameters)
[03:36:39] <strcat> jeaye: or you've been doing lots of needless copies ;p
[03:37:07] <jeaye> bogen: Feel free to ask comparison question with C++ and Rust (and you can ping me publicly)
[03:37:31] <jeaye> strcat: Quite the opposite, right? If I always take self in by reference?
[03:37:35] <cmr> tikue: except with no inheritence or any thing else? :P
[03:37:51] <strcat> jeaye: no
[03:37:51] <tikue> cmr: it has "interfaces"
[03:38:15] <tikue> cmr: and when i program in java i basically only use interfaces with classes, occasionally using abstract classes but almost never extending 
[03:38:20] <strcat> jeaye: passing parameters is always a shallow copy
[03:38:24] <tikue> idk, they seem more similar than different
[03:38:25] <strcat> lets have an example
[03:38:36] <strcat> the PriorityQueue type in libextra
[03:38:45] <strcat> it uses an internal ~[T] to store the heap
[03:38:57] <strcat> it has conversion functions to and from vectors
[03:39:00] <strcat> and to sorted vectors
[03:39:05] <strcat> those functions use by-value, ofc
[03:39:15] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[03:39:22] <strcat> so converting a PriorityQueue to ~[T] or a sorted ~[T] doesn't need to allocate anything
[03:39:35] <strcat> you can use it to do an in-place heap-sort on ~[T] if you really want
[03:40:06] <tikue> what strcat is saying is that all methods should be by-value and return value is always (self, T) where T is whatever else you want to return :P
[03:40:17] <strcat> I'm not saying that
[03:40:20] <tikue> i know i know
[03:40:33] <strcat> I'm saying that if you need ownership, don't pretend to need &T + clone - it's inefficient
[03:40:36] <nejucomo> Does ~MyBigStruct { â€¦ } - allocate the struct on the stack, then copy to the global heap, or does it allocate directly on the global heap?
[03:41:01] <tikue> strcat: i'd say usually it's fairly straightforward when you want to do that though
[03:41:16] <bblum> nejucomo: that's a good question; if you don't get an answer in channel, file an issue about it
[03:41:20] <strcat> nejucomo: it won't copy anything unless you get the struct from somewhere else
[03:41:31] <strcat> you can look at the IR and see
[03:41:42] <nejucomo> -and if that's allocated directly on the heap, what about: fn mk() { MyBigStruct{ â€¦ } ) -> MyBigStruct ; let x = ~mk()
[03:42:15] <strcat> nejucomo: as far as I'm aware, it will never have to do a copy
[03:42:18] <nejucomo> strcat: Hm.  I haven't delved into IR much at all yet.
[03:43:21] <nejucomo> Ok, taking a step back:  Is it a good idea to have: struct T {â€¦} ; impl T { fn new(â€¦) -> T { T { â€¦ } } }
[03:43:30] <strcat> yes
[03:43:43] <strcat> don't put it in ~ prematurely, using ~ should be very rare
[03:43:43] <nejucomo> -and by "good idea": It seems like a clean API, but if it forces heap users to copy from the stack, maybe there's a better approach.
[03:43:51] <strcat> nejucomo: it doesn't force them to do that
[03:43:51] <nejucomo> Ok.
[03:44:30] <strcat> it doesn't in C either - large structs are returned via an output parameter by necessity
[03:44:30] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[03:44:39] <nejucomo> Even if it did cause a stack initialization followed by a copy to a heap, I'd prefer it (because I prefer "simple" API over "efficient" API).
[03:44:40] <strcat> in C++, there were problems because of copy constructors
[03:44:43] <bogen> what construct could I supply a and b that would give me an iter that would iterate from a to b (preferablly b-1)
[03:44:49] <acrichto> rusti: from_str::<u32>("20000000000")
[03:44:52] <strcat> nejucomo: it doesn't though
[03:44:53] -rusti- None
[03:45:02] <strcat> the caller passes in an out pointer
[03:45:05] <nejucomo> strcat: In C, if you: return myLargeStructVar; // does it not copy it on the stack?
[03:45:19] <strcat> nejucomo: the platform ABI will dictate how structs are returned
[03:45:30] <strcat> the caller will pass in an out pointer, by necessity
[03:45:41] <strcat> it's part of the calling convention
[03:45:41] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:45:54] <strcat> if it's too large to shove into registers, you need an out pointer
[03:45:58] <acrichto> oh man it looks like @fn is about to die
[03:46:33] <tikue> acrichto: is that particularly sad : ]
[03:46:38] <strcat> nejucomo: so the caller passes in an out pointer, and the callee writes to it directly
[03:46:48] <acrichto> strcat: I am excite
[03:46:48] <tikue> bogen: are you looking for range?
[03:46:52] <strcat> (or it copies *to the out pointer*)
[03:46:56] <bogen> tikue: yes
[03:47:00] <strcat> (but it won't be that silly)
[03:47:39] <tikue> rusti: /* bogen */ for i in range(0, 3) { println!("my favorite number is {}", i) }
[03:47:40] -rusti- my favorite number is 0
[03:47:40] -rusti- my favorite number is 1
[03:47:40] -rusti- my favorite number is 2
[03:47:40] -rusti- ()
[03:48:14] <strcat> nejucomo: the only time you want ~ is a recursive data structure
[03:48:29] <strcat> using it anywhere else is a premature optimization that's likely to make the program slower, if you haven't carefully profiled
[03:48:30] <bogen> tikue, but I want to use that in a zip
[03:48:57] <strcat> ofc there are other times where it can be useful but they aren't obvious
[03:49:01] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[03:49:04] <nejucomo> strcat: When you say "you need a pointer" or "the caller will pass in an out pointer by necessity", do you mean the C programmer, or the compiler?
[03:49:10] <strcat> nejucomo: the compiler
[03:49:20] <nejucomo> Oh, interesting.  I never realized that.
[03:49:21] <strcat> the compiler needs to return a large struct
[03:49:26] <strcat> it can't fit it into the registers
[03:49:30] <strcat> so the caller has to supply an output parameter
[03:49:32] *** Joins: Thad (chatzilla@moz-C35F90AE.tx.res.rr.com)
[03:49:38] <strcat> but the platform's calling convention ABI defines this - and will specify
[03:49:51] <strcat> so the compiler doesn't *really* have a choice unless it knows the function is only used internally
[03:49:51] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:50:09] <strcat> nejucomo: large structs are also passed by-pointer, for the same reason
[03:50:19] <tikue> rusti: /* bogen */ for (i, c) in range(0, 3).zip("abc".iter()) { print!("({}, {} )", i, c) }
[03:50:20] <nejucomo> I've seen (and written) C code like: void Thingy_initialize(Thingy* p) {â€¦}    -because I didn't realize compilers would "help me" if I wrote: Thingy Thingy_new() { â€¦ return myThingy }
[03:50:20] -rusti- (0, a )(1, b )(2, c )()
[03:50:23] <strcat> if you can't fit it into a register, you need a pointer to some place (often on the stack)
[03:50:30] <strcat> nejucomo: it's not really them helping you
[03:50:32] <strcat> it's just necessity
[03:50:38] <strcat> doesn't fit in registers -> need pointer
[03:50:53] <strcat> or, you need a convention saying how things spill from the stack
[03:50:55] <strcat> er
[03:50:59] <strcat> spill onto the stack*
[03:51:05] <tikue> so you can't have nested methods? :P
[03:51:08] * tikue just realized
[03:51:09] <strcat> which is how parameters are done
[03:51:23] <strcat> tikue: what do you mean nested?
[03:51:36] <tikue> strcat: i don't even know what it would do
[03:51:42] <nejucomo> hehâ€¦  well, my understanding of compilers doesn't really accommodate parameters/return in registers, so â€¦  yeah.  I need to find a good compilers course.
[03:51:58] <tikue> strcat: but i mean inner methods, a la inner functions
[03:52:10] <strcat> nejucomo: you don't really have to know about compilers
[03:52:18] <Thad> Whats the status of the Win32 build ?  Looks like a get an make error 255 for /bin/std.dll  (even though I copied libpthread-2.dll)
[03:52:21] <strcat> just the low-level details (learning ASM for $PLATFORM would be enough)
[03:53:29] <strcat> return by-value potentially being expensive is a now fixed issue specific to C++
[03:53:34] <strcat> due to copy constructors
[03:53:43] <nejucomo> Well, my mental model (heavily stack based, registers only for non-user control stuff) was that a function could pop a return address from the stack, then if there were a giant local, increase the stack by that amount, and leave the giant value in the "return value" position on the top of the stack...
[03:54:00] <Luqman> Thad: master?
[03:54:05] <Thad> yeah
[03:54:10] <strcat> nejucomo: how does the callee know where to write the value, though?
[03:54:14] <Thad> waterfall looks good
[03:54:26] <Luqman> yea, the bots seem to be building fine
[03:54:39] <strcat> nejucomo: you could possibly codify that, but what most platforms do is use out pointers
[03:54:57] <bogen> tikue: thanks, the zip with a range works for me
[03:55:01] *** Joins: nejucomo1 (Adium@moz-434492BB.dsl.static.sonic.net)
[03:55:08] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Quit: Leaving)
[03:55:08] <Thad> hmm.... so... do we STILL have to have gcc 4.5 ??  I thought Alex had pushed the fixes / changes .. to help both 32/64 bit building... I'm trying 32bit
[03:55:12] <jmgrosen> ChrisMorgan: how feasible would it be to add websockets to your current rust-http? (not asking for you to do it, just wondering if I might be able to for an experiment)
[03:55:14] *** Joins: jeffb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[03:55:18] <tikue> bogen: no problem
[03:55:23] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Ping timeout)
[03:55:23] <cmr> Thad: Someone reported success with 4.8.1
[03:55:29] <Luqman> \o/ no more @fn is all green
[03:55:33] <Thad> with 32bit ?
[03:55:37] <tikue> it actually would be nice if methods could nest
[03:55:41] <tikue> wouldn't it?
[03:56:02] <Thad> cmr: with 32 bit ? success ?
[03:56:05] <nejucomo1> Would people here recommend I learn a "concrete" assembly (intel) first, or start with llvm IR or something else? 
[03:56:13] *** Quits: jeffb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffb)
[03:56:32] <aatch> nejucomo1, what are you planning on doing?
[03:56:35] <Luqman> Thad: cmr  i've been able to build with gcc 4.8.1 for a 32bit target on 64bit windows 8
[03:56:42] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[03:56:46] <sp3d> I'd say concrete; ARM is *fairly* sane imo
[03:56:59] <cmr> nejucomo1: for why?
[03:57:15] <nejucomo1> aatch: Understanding the compilation target, as part of understanding compilers.
[03:57:17] <mcpherrin> sp3d: Armv5 was pretty sane :P
[03:57:24] <strcat> LLVM IR is still really high-level
[03:57:29] <mcpherrin> later arm has performance gotchas...
[03:57:31] <strcat> it has an infinite number of registers, etc.
[03:57:52] <sp3d> mcpherrin: I don't know anything about v8, but up to v7 even it's much simpler than "modern x86[_64]"
[03:57:55] *** Quits: RMF (RMF@43899495.D5A48DF4.11F731AB.IP) (Ping timeout)
[03:58:00] <strcat> a bunch of optimization passes run on IR alone, but then a really clever register allocator + code generator has to figure out how to efficiently lower it down to asm
[03:58:06] <sp3d> true that gotchas always creep in though :(
[03:58:11] <mcpherrin> sp3d: yeah sure, but it's not nearly as simple as it used to be
[03:58:29] <mcpherrin> (but it's also faster so :P)
[03:58:30] <sp3d> even x86 almost made sense when the registers were baby-sized!
[03:58:34] <cmr> Plus Plus the phi instruction etc
[03:58:45] <aatch> nejucomo1, well if you're looking at specifically machine-code generation then a concrete ASM
[03:58:51] <Luqman> i really like the way you can do conditional instructions in arm
[03:59:09] <cmr> nejucomo1: if you want to understand the compilation target, look at computer architecture. Intel's manuals are pretty nice
[03:59:28] <aatch> LLVM IR is, well, just that. An IR. Designed to be ameniable to optimization.
[03:59:35] <cmr> (For x86, at least :p)
[03:59:50] <aatch> (Hence the SSA (Single Static Assignment) representation)
[04:00:56] <cmr> nejucomo1: anyway there's a lot to learn. take it bit by bit.
[04:00:59] <nejucomo1> aatch: Ok.  Thanks.
[04:01:08] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[04:01:08] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/eN3fKA
[04:01:08] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[04:01:09] <nejucomo1> cmr: heheâ€¦  I'm well aware of that.
[04:01:11] <cmr> Personally I think the logical place to start is asking "how is this implemented?"
[04:01:19] <cmr> Like, run rustc -S on a simple function
[04:01:34] *** Joins: RMF (RMF@moz-F6CF4762.dsl.telepac.pt)
[04:01:39] <cmr> Use the system manuals to figure out what each instruction does and why and how the stack works etc
[04:01:41] <nejucomo1> I feel like I have some general handle on parsers and interpreters, but not yet type checking or compilation.
[04:02:10] <aatch> nejucomo1, mostly it depends on what you're interested in. While the register allocator/code generator implementation is complex, the idea is fairly simple.
[04:02:22] <cmr> indutny has a pure-rust register allocator
[04:02:34] <cmr> it generates a fancy interactive svg so you can see how it arrived at that decision iirc
[04:02:37] <Thad> Luqman: ok...trying Vadim's method...in that last email with subject "Windows Users can build Rust properly again"
[04:03:21] <Luqman> Thad: i just followed the steps at https://github.com/mozilla/rust/wiki/Note-getting-started-developing-Rust for windows
[04:03:24] <Thad> Luqman: working ! ... so, still have to have those 3 dll's copied over... those specific versions...until...when ?  until we bundle them ?
[04:03:40] <klutzy> yep. they are external dependencies
[04:03:48] <Thad> or create a new Stage0 tarball ?
[04:03:55] <klutzy> we should bundle them in stage0 I think
[04:04:07] <Luqman> no idea, though i think we may want to move to mingw64
[04:04:27] <Thad> yes, agreed... I would rather get 64 working
[04:04:48] <Thad> so what is blocking the move to ming32-w64 ?
[04:04:56] <klutzy> mingw64's 32-bit works, but its performance is bad
[04:04:57] *** Joins: MrOrdinaire (Mibbit@3749AFFF.391F484.FD383126.IP)
[04:05:02] <mark_edward> doomlord_: ping
[04:05:55] <Luqman> klutzy: really, i didn't think there'd be a difference between them both targeting x86
[04:05:57] <aatch> nejucomo1, the advantage of starting at LLVM IR is that it helps you understand the differences between the code you write and the code that's generated. 
[04:06:05] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[04:06:05] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/AwOsgw
[04:06:05] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[04:06:06] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[04:06:06] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/J_kYcA
[04:06:06] <ghrust> 13rust/06auto 1451cfcc8 15Alex Crichton: Register new snapshots
[04:06:06] <ghrust> 13rust/06auto 14c1b187d 15bors: auto merge of #9454 : alexcrichton/rust/snapshot, r=thestinger
[04:06:06] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[04:06:15] <MrOrdinaire> hi, on the new documentation page for str, where can I find methods like `char_at`?
[04:06:53] <klutzy> Luqman: mingw-w64 is even not fork of mingw
[04:06:53] <engla> StrSlice trait MrOrdinaire 
[04:07:04] <nejucomo1> aatch: I guess for my question about allocations and copies specific to rust, the next step is to look at the IR of a few variations of rust apis.
[04:07:24] <Luqman> klutzy: sure, i still find it a bit odd
[04:07:26] *** Joins: josedonizetti (josedonize@moz-CA73D699.cpe.teksavvy.com)
[04:07:37] <acrichto> MrOrdinaire: the search box helps a fair amount too
[04:07:37] <aatch> While the LLVM IR has some extra features (like a concept of functions/function calls) and is somewhat idealized (infinite registers), it is similar enough to real ASM that you can get the idea.
[04:07:46] <MrOrdinaire> engla: thanks
[04:07:54] <aatch> especially without having to remember the difference between movl and movq etc
[04:07:56] <engla> MrOrdinaire: now, char_at doesn't have any docs until a pending change is merged in
[04:07:57] *** Quits: Larry (larryfox@moz-B8648F0F.nycmny.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[04:08:30] *** Joins: jesseray (Mibbit@moz-EE907FB2.dhcp.insightbb.com)
[04:08:37] <engla> no actualy text for the methods of StrSlice at the moment
[04:08:49] <strcat> klutzy: in the long-term I want to just use LLVM's platform
[04:09:07] <strcat> replace gcc-libs with compiler-rt, use libc++abi for unwinding, etc.
[04:09:32] *** Quits: nejucomo1 (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[04:09:51] <Luqman> also, using lld would be nice
[04:10:02] <strcat> we're going to want libclang at some point for interop with C without hardcoding definitions, so at that point it will be free to just ship clang in the snapshot
[04:10:20] <acrichto> that would be awesome
[04:10:21] *** Joins: jeffb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[04:10:27] <acrichto> to not copy struct definitions/header defines
[04:10:34] *** Quits: bt3ze (bt3ze@moz-3F0303DA.hsd1.va.comcast.net) (Quit: Leaving)
[04:10:45] <strcat> acrichto: it's a requirement essentially, because they vary per-platform in many cases
[04:10:46] *** Quits: jeffb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffb)
[04:10:49] <strcat> or based on configure options
[04:10:51] <acrichto> extern "markdown.h";
[04:10:57] <acrichto> yeah :(
[04:11:03] <acrichto> the idea is cool at least
[04:11:05] <aatch> How far along is lld?
[04:11:14] <aatch> Last I looked it could only do static linking.
[04:11:24] <acrichto> we should get static linking working again...
[04:11:30] <strcat> aatch: they're able to at least build binaries on windows without mingw or MSVC++ now
[04:11:42] <aatch> strcat, cool
[04:12:32] <Luqman> acrichto: we need a hero to massage the makefiles to build libfoo.a
[04:12:51] <acrichto> which ones are we missing?
[04:12:55] <cmr> All of them?
[04:13:03] <acrichto> oh good point
[04:13:05] <cmr> jmgrosen tried doing static linking not to long go.
[04:13:19] <Thad> Luqman: klutzy:   Updated the https://github.com/mozilla/rust/wiki/Note-getting-started-developing-Rust  with the sub-steps for copying dll's etc, STEP 9.
[04:13:45] <jmgrosen> well, I tried it against libstd and got it to work; didn't try librustrt, as that's a different beast (seeing as it's written in c++)
[04:13:48] <cmr> that sentance died :\
[04:14:12] * cmr had java homework, his brain is fried
[04:14:12] <Luqman> Thad: do we actually still need to downgrade to gcc <4.6 ?
[04:14:19] <Luqman> because 4.8 worked fine for me
[04:14:43] <Luqman> klutzy: ^ ?
[04:15:08] <Thad> you have to get the older dll's and so you temporarily downgrade to get them, copy them over...then upgrade to gcc 4.8.1 after you have grabbed and copied them.  (I think)
[04:15:22] <klutzy> Luqman: actually I used gcc 4.6 even before 0.7 landed
[04:15:42] <Thad> I am trying this all live...as I type this to you guys...and...
[04:15:55] <Luqman> yea, i very recently setup a windows environment and 4.8 worked for me
[04:15:57] <Thad> Yup... it's working... that's the steps to build currently.
[04:16:23] <Luqman> yea, i didn't do step 9
[04:16:46] <Thad> Luqman: I would love to know, HOW you skipped Step 9
[04:17:19] <Thad> try it again... clean the slate for everything, and try to skip Step 9... I think you cannot still... I could not this evening with latest master.
[04:17:23] <klutzy> Luqman: you mean stage0 worked without old dlls?
[04:17:53] <klutzy> I think we need to obtain old libstdc++.dll
[04:18:04] <Luqman> actually, nvm i did do step 9
[04:18:08] <Luqman> just slightly differently
[04:18:16] <Thad> LOL.. thought so
[04:18:21] <Luqman> i downloaded the needed libs manually
[04:18:21] <klutzy> aha it makes sense
[04:18:30] <Thad> ok makes sense.
[04:18:30] <Luqman> so i didn't do the downgrade bit
[04:18:41] <strcat> acrichto: btw, next time you compile LLVM can you start building compiler-rt.a ?
[04:18:48] <strcat> acrichto: it's a separate svn repo though
[04:18:53] <strcat> but it has to be built with LLVM
[04:18:53] <acrichto> :(
[04:18:54] <klutzy> I also think manual download is better, but don't know how hard it is for normal users
[04:19:16] <acrichto> strcat: what's it for?
[04:19:41] <strcat> acrichto: it replaces gcc-libs and will fix issues like https://github.com/mozilla/rust/issues/8449
[04:20:21] <acrichto> interesting
[04:20:51] <strcat> acrichto: compiler-rt/libgcc are for the compiler to automatically generate calls to
[04:21:09] <Luqman> Thad: klutzy hmm but I only copied libstdc++-6.dll not libgcc_s_dw2-1.dll or libpthread-2.dll
[04:22:06] <strcat> acrichto: so, anytime the platform has no concise way of doing something
[04:22:08] <acrichto> strcat: I'm not entirely familiar with this, it looks like we don't link to libgcc explicitly so is this done automatically by gcc?
[04:22:10] <Thad> Luqman: well... try again... experiment...and reply back to the email Thread or the  issue https://github.com/mozilla/rust/issues/9252
[04:22:16] <strcat> acrichto: it's done automatically by gcc
[04:22:30] <acrichto> strcat: so does this mean we'd have to stop using gcc?
[04:23:06] <strcat> acrichto: I don't think we'd have to, but it would probably be better to use clang...
[04:23:19] <Thad> strcat: +++ better to use clang
[04:23:29] <cmr> We should really be using a static compiler-rt regardless
[04:23:30] <acrichto> is clang on mingw?
[04:23:37] <cmr> acrichto: yes
[04:23:44] <cmr> I'm pretty sure I built a rust with clang around 0.7
[04:23:47] <cmr> (on windows)
[04:23:53] <acrichto> let's confuse windows builds even more!
[04:23:57] <strcat> acrichto: we would probably just ship it in the snapshot
[04:24:00] <strcat> acrichto: no it'd be easier
[04:24:02] <klutzy> :D
[04:24:05] <Thad> cmr:  you did, but never told me how ! :)
[04:24:07] <tefter> i have corrected trait inheritance method call bug
[04:24:43] <strcat> acrichto: also if we used clang, we could link with libclang
[04:24:46] <strcat> and not spawn the linker
[04:24:50] <strcat> which is where everyone goes OOM atm
[04:25:19] <Luqman> Thad: http://i.imgur.com/ojedNq9.jpg
[04:25:23] <tefter> http://pastebin.com/ZJyNKKNZ this is patch
[04:25:52] <tefter> https://github.com/mozilla/rust/issues/9394 solution for this issue
[04:26:13] <Thad> Luqman: so.. WHICH version of libstdc++ is that... REALLY ?
[04:26:38] <Luqman> Thad: 4.6.2-1
[04:26:45] <Thad> AH... not 4.8.1
[04:27:08] <Luqman> Thad: yes, point i was making is that's the only lib i needed to copy, not the other 2
[04:27:28] <Thad> ok... and how did you acquire that specific .dll ?
[04:27:38] <Thad> (trying to make it easier for Windows users)
[04:27:39] *** ozten is now known as ozten|afk
[04:28:39] <Luqman> Thad: https://github.com/mozilla/rust/wiki/Note-Building-Rust-Before-0.8-on-Windows-Systems
[04:29:19] <mcpherrin> can rustc on linux produce windows binaries?
[04:29:36] <acrichto> strcat: https://github.com/mozilla/rust/issues/2084
[04:29:46] <strcat> mcpherrin: you can compile windows binaries on linux with mingw
[04:29:50] <Luqman> mcpherrin: theoretically?
[04:29:52] <strcat> but I doubt anyone has gotten it working with rustc
[04:29:58] <mcpherrin> haha, okay.
[04:30:05] <Thad> Luqman: you manually downloaded it from the 4.6.2 base... gotcha
[04:30:15] <mcpherrin> Just curious if the simplest way to get rustc working on windows was in a linux vm ;)
[04:30:41] <strcat> acrichto: yeah but then it was removed because no one had started using it
[04:30:48] <Luqman> Thad: for pthreads i think the mingw32-libpthread-old package suffices
[04:31:16] *** Joins: aeqwa (aeqwa@moz-65C83DF5.dsl.tropolys.de)
[04:31:51] *** Quits: aeqwa_ (aeqwa@moz-30A5D8E5.dsl.tropolys.de) (Ping timeout)
[04:34:12] *** jorendorff is now known as jorendorff_away
[04:35:27] <Thad> Luqman: I get rustc.exe error... because libpthread-2.dll is missing from my computer...
[04:35:54] <Thad> Luqman: so I have to copy that one also into stage0/bin/ it appears
[04:36:05] <Thad> Luqman: but you don't ? weird
[04:36:11] <polyfractal> Hrm, Rust doesn't have the normal unary operator (~) for flipping bits, does it?  Imagine that would get confusing with the borrowed pointer...
[04:36:25] <acrichto> polyfractal: it manifests in the form of !
[04:36:28] <acrichto> rusti: !0
[04:36:29] -rusti- -1
[04:36:33] <Luqman> Thad: yea, i have it in c:\mingw\bin
[04:36:49] <mcpherrin> rusti: !0xAAAA_AAAA
[04:36:50] -rusti- -2863311531
[04:36:55] <polyfractal> acrichto: oh, awesome.  you just made my night :)
[04:37:19] <Luqman> Thad: it's installed there because of the mingw32-libpthread-old package
[04:37:31] <Thad> Luqman: Ah, you have it there... ok, that makes sense... you installed the old package as well... cool.
[04:37:34] <klutzy> Thad: libpthread-2.dll has renamed to pthreadGC2.dll
[04:37:40] <MrOrdinaire> engla: thanks, I just need to know the method names :P
[04:37:44] <Thad> klutzy: I know
[04:37:56] <Luqman> klutzy: but you can install mingw32-libpthread-old to get libpthread-2.dll
[04:38:16] <klutzy> Luqman: yep, I think just copying dll would be ok though
[04:39:10] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[04:42:24] <Thad> klutzy: Luqman: ... OK, so at a minimum, it looks like you have to have older libstdc++-6.dll AND libpthread-2.dll (which I created by copying & renaming pthreadGC2.dll) ... and now it builds just fine.
[04:43:21] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[04:44:46] *** Quits: skoizza (Mibbit@moz-C3630477.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:46:40] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[04:47:16] <engla> polyfractal: ~ is for the owned pointer in fact
[04:47:52] <polyfractal> engla: yep, that's why I was sad there wasn't a unary (but there is, just not a tilde) :)
[04:47:55] *** Joins: echristo_ (echristo@1943E90B.70F558CB.4065847B.IP)
[04:47:56] *** Joins: qr42 (qr42@moz-A112B358.oc.oc.cox.net)
[04:48:05] *** Quits: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net) (Ping timeout)
[04:48:05] *** echristo_ is now known as echristo
[04:48:24] *** Joins: GeneralMaximus (ankur@721438CE.A9A1C449.BE90E62C.IP)
[04:48:46] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:48:48] <engla> and it's possible because integers don't coerce into bool or similar things
[04:49:16] *** Quits: Thad (chatzilla@moz-C35F90AE.tx.res.rr.com) (Quit: ChatZilla 0.9.90.1 [Firefox 24.0/20130909203154])
[04:49:37] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[04:50:01] <cmr> dbaupp: let me know if the new data in benches is bad
[04:50:01] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[04:50:19] <cmr> dbaupp: but it's running and filling with new data
[04:52:33] <MrOrdinaire> r? https://github.com/mozilla/rust/pull/9318
[04:52:58] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:53:48] *** Joins: maik (maik@moz-64456714.dip0.t-ipconnect.de)
[04:54:51] *** Quits: PGGB (PGGB@BD9E64E0.2702580D.85889BB1.IP) (Ping timeout)
[04:54:55] *** Quits: nonehaxor (nonehaxor@BA9CBAE.4C3B0355.EE6E63A5.IP) (Ping timeout)
[04:55:34] *** Quits: Boreeas (Boreeas@moz-F35C832D.boreeas.net) (Ping timeout)
[04:55:53] *** Joins: aeqwa_ (aeqwa@moz-4B3D670B.dsl.tropolys.de)
[04:55:55] *** Joins: PGGB (PGGB@BD9E64E0.2702580D.85889BB1.IP)
[04:56:07] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[04:56:26] *** Quits: aeqwa (aeqwa@moz-65C83DF5.dsl.tropolys.de) (Ping timeout)
[04:56:36] *** Joins: Boreeas (Boreeas@moz-F35C832D.boreeas.net)
[04:56:37] *** Quits: exobit (textual@moz-E06F46F0.corp.bitshelter.com) (Ping timeout)
[04:58:45] *** Quits: MrOrdinaire (Mibbit@3749AFFF.391F484.FD383126.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:00:45] *** Joins: jdm (jdm@moz-AC9BBCA1.dsl.teksavvy.com)
[05:00:45] *** ChanServ sets mode: +o jdm
[05:02:14] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[05:05:57] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[05:07:17] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[05:08:06] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[05:08:41] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[05:09:01] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[05:09:55] *** Joins: fabiand (fabiand@moz-192F707C.adsl.alicedsl.de)
[05:10:04] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[05:11:03] *** Quits: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net) (Quit: sw17ch)
[05:11:21] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[05:12:14] *** Quits: jesseray (Mibbit@moz-EE907FB2.dhcp.insightbb.com) (Quit: http://www.mibbit.com ajax IRC Client)
[05:12:24] *** Joins: aeqwa (aeqwa@moz-3818C082.dsl.tropolys.de)
[05:12:49] *** Quits: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu) (Ping timeout)
[05:12:50] *** Quits: acrichto (acrichto@moz-69F2E428.ugrad.cs.cmu.edu) (Ping timeout)
[05:12:55] *** Quits: [o__o] (~o__o@moz-24EBFAC7.me) (Ping timeout)
[05:12:59] *** Quits: aeqwa_ (aeqwa@moz-4B3D670B.dsl.tropolys.de) (Ping timeout)
[05:13:03] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[05:13:03] *** Quits: oldmanstan (glesica@moz-CA910636.net) (Ping timeout)
[05:13:04] *** Quits: SteveMcQwark (steven099@moz-7CFCF343.cpe.net.cable.rogers.com) (Ping timeout)
[05:13:04] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[05:13:04] *** Quits: josedonizetti (josedonize@moz-CA73D699.cpe.teksavvy.com) (Ping timeout)
[05:13:09] *** Quits: eagen (eagen@8737942B.7A99C13A.B7961A98.IP) (Ping timeout)
[05:13:14] *** Quits: chandler (foo@moz-F990611.mastenbrook.net) (Ping timeout)
[05:13:17] *** Quits: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu) (Ping timeout)
[05:13:17] *** Joins: chandler (foo@moz-F990611.mastenbrook.net)
[05:13:19] *** Joins: oldmanstan (glesica@moz-CA910636.net)
[05:13:20] *** Joins: eagen (eagen@8737942B.7A99C13A.B7961A98.IP)
[05:13:21] *** Joins: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu)
[05:13:22] *** Joins: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu)
[05:13:23] *** Quits: omicrondelta (dwhyte@DFA0622C.2732CD06.B7FCEB19.IP) (Ping timeout)
[05:13:24] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[05:13:25] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Ping timeout)
[05:13:26] *** Joins: acrichto (acrichto@moz-69F2E428.ugrad.cs.cmu.edu)
[05:13:28] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[05:13:30] *** Quits: tikue (tkuehn@90828AFE.B9B3942C.689607DE.IP) (Ping timeout)
[05:13:30] *** Quits: joshua_ (joshua@moz-45967CBE.emarhavil.com) (Ping timeout)
[05:13:32] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[05:13:32] *** Joins: SteveMcQwark (steven099@moz-7CFCF343.cpe.net.cable.rogers.com)
[05:13:33] *** Quits: pauls (pauls@moz-7140CF01.ccs.neu.edu) (Ping timeout)
[05:13:34] *** Quits: fzzzy (fzzzy@A5CBE5CF.A81CC6E.44FA8ED.IP) (Ping timeout)
[05:13:39] *** Joins: [o__o] (~o__o@moz-24EBFAC7.me)
[05:13:43] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[05:13:47] *** Joins: fzzzy (fzzzy@A5CBE5CF.A81CC6E.44FA8ED.IP)
[05:13:47] *** Joins: joshua_ (joshua@moz-45967CBE.emarhavil.com)
[05:13:49] *** Joins: pauls (pauls@moz-7140CF01.ccs.neu.edu)
[05:14:14] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[05:15:16] *** Joins: omicrondelta (dwhyte@DFA0622C.2732CD06.B7FCEB19.IP)
[05:18:21] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[05:18:39] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[05:19:02] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:19:02] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[05:21:08] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[05:21:08] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/J_kYcA
[05:21:08] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[05:22:19] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[05:23:04] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[05:24:10] <mark_edward> doomlord_: ping
[05:25:41] *** Joins: tikue (tkuehn@90828AFE.B9B3942C.689607DE.IP)
[05:26:07] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[05:26:07] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/N4KpjA
[05:26:07] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[05:26:08] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[05:26:08] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/zY6gYw
[05:26:08] <ghrust> 13rust/06auto 1406b11ba 15Steve Klabnik: Add rustpkg tutorial to the official tutorials....
[05:26:08] <ghrust> 13rust/06auto 14df8231e 15bors: auto merge of #9439 : steveklabnik/rust/build_rustpkg_tutorial, r=brson...
[05:26:09] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[05:28:22] *** Quits: spud (spud@moz-8F8D4E52.lightspeed.bcvloh.sbcglobal.net) (Ping timeout)
[05:31:57] *** Joins: aeqwa_ (aeqwa@moz-598F3F3F.dsl.tropolys.de)
[05:32:18] *** Joins: spud (spud@moz-8F8D4E52.lightspeed.bcvloh.sbcglobal.net)
[05:32:30] *** Quits: aeqwa (aeqwa@moz-3818C082.dsl.tropolys.de) (Ping timeout)
[05:33:36] *** Quits: tautologico (shung@7A53DAF8.92451A23.6EB699AE.IP) (Quit: tautologico)
[05:33:45] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[05:38:40] *** Joins: skade (skade@moz-3B46D638.dip0.t-ipconnect.de)
[05:44:13] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Quit: Leaving)
[05:44:27] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[05:47:21] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[05:48:34] *** Quits: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net) (Quit: hoverbear)
[05:50:25] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[05:52:58] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[05:53:45] *** Joins: jviereck (Adium@moz-D03659.dip0.t-ipconnect.de)
[05:54:22] *** Joins: vk (chatzilla@moz-389FEE13.hsd1.ca.comcast.net)
[05:54:31] *** Quits: skade (skade@moz-3B46D638.dip0.t-ipconnect.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[05:55:04] *** Quits: vk (chatzilla@moz-389FEE13.hsd1.ca.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0/20130917123208])
[05:56:43] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[05:58:20] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[05:58:45] *** Quits: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu) (Quit: Leaving)
[06:00:52] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[06:03:07] *** Quits: tikue (tkuehn@90828AFE.B9B3942C.689607DE.IP) (Quit: tikue)
[06:03:28] *** Quits: jviereck (Adium@moz-D03659.dip0.t-ipconnect.de) (Quit: Leaving.)
[06:03:33] *** Joins: tikue (tkuehn@90828AFE.B9B3942C.689607DE.IP)
[06:04:22] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[06:04:49] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[06:07:20] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[06:09:42] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[06:11:21] <strcat> acrichto: the funny part is my i686 repo has been happily building this whole time
[06:11:30] <strcat> I guess the builder only has 64-bit ncurses
[06:18:24] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[06:20:04] *** Quits: ozten|afk (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten|afk)
[06:25:31] *** Quits: aeqwa_ (aeqwa@moz-598F3F3F.dsl.tropolys.de) (Quit: Lost terminal)
[06:28:26] <strcat> rusti: version
[06:28:26] -rusti- "rustc 0.8 (c1b187d 2013-09-23 21:06:03 -0700)"
[06:33:49] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[06:35:32] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[06:38:34] *** Joins: bheylin_ (brianheyli@837B6557.E7BADBF1.B0C2132F.IP)
[06:38:49] *** Quits: tefter (tefter@B5D119DC.B856A0A1.73804765.IP) (Ping timeout)
[06:39:01] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[06:41:06] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[06:41:06] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/zY6gYw
[06:41:06] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[06:41:46] *** Quits: ChrisMorgan (chris@moz-D7F2B7D6.static.tpgi.com.au) (Ping timeout)
[06:43:37] *** Quits: bheylin_ (brianheyli@837B6557.E7BADBF1.B0C2132F.IP) (Quit: bheylin_)
[06:44:18] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[06:46:06] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[06:46:06] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/5mYHCw
[06:46:06] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[06:46:07] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[06:46:07] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/_icWUQ
[06:46:07] <ghrust> 13rust/06auto 145500d86 15Dan Connolly: remove apostrophe where it's is not used as a contraction
[06:46:07] <ghrust> 13rust/06auto 1418e3bcd 15bors: auto merge of #9449 : dckc/rust/patch-1, r=alexcrichton
[06:46:08] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[06:46:28] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[06:47:01] *** Joins: spacy (Mibbit@moz-A7500DF3.hsd1.co.comcast.net)
[06:47:16] <spacy> I have a question for the list
[06:47:33] <spacy> How do I iterate over a vector in rust, summing all of the components
[06:47:37] <spacy> For example 
[06:47:42] <spacy> a=[1,2,3,4] 
[06:47:46] <spacy> I want to sum a
[06:48:50] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Bye!)
[06:48:57] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[06:49:18] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[06:55:11] *** Joins: nonehaxor (nonehaxor@BA9CBAE.4C3B0355.EE6E63A5.IP)
[06:57:08] <strcat> rusti: let xs = [1, 2, 3, 4]; xs.iter().fold(0, |a, &b| a + b)
[06:57:08] -rusti- 10
[06:57:11] <strcat> spacy: ^
[06:58:14] *** flaper87|afk is now known as flaper87
[06:59:31] <spacy> Thanks
[06:59:53] *** Joins: cdidd (cdidd@moz-BB91C0E0.broadband.corbina.ru)
[07:00:56] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[07:03:33] *** Joins: bheylin_ (brianheyli@moz-3D24C757.static.chello.nl)
[07:05:07] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[07:06:15] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[07:06:53] <flaper87> acrichto: around?
[07:07:01] <spacy> rusti: let xs = [2,4,6,8]; xs.iter().map(|&x| x/2)
[07:07:02] -rusti- pastebinned 16 lines of output: http://sprunge.us/ZHhV
[07:09:46] <strcat> spacy: map returns an iterator
[07:09:51] *** Quits: bheylin_ (brianheyli@moz-3D24C757.static.chello.nl) (Quit: bheylin_)
[07:10:31] <spacy> So how can I convert that back to a function
[07:10:36] <spacy> *vector sorry
[07:11:37] <strcat> .collect::<~[int]>()
[07:11:46] *** Joins: jaen (jaen@moz-AF4C1D.neoplus.adsl.tpnet.pl)
[07:12:13] <strcat> if you want another fixed-size vector, you have to make one yourself and set the contained elements
[07:13:41] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Client exited)
[07:14:21] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[07:16:30] <spacy> rusti: let xs = [1, 2, 3, 4]; let mut xr=xs; for i in xs.iter().fold(0, |a, &b| a + b).collect::<~[int]>()
[07:16:31] -rusti- <anon>:8:4: 8:5 error: expected `{` but found `}`
[07:16:31] -rusti- <anon>:8     };
[07:16:31] -rusti-              ^
[07:16:31] -rusti- application terminated with error code 101
[07:17:17] <strcat> rusti: let xs = [1, 2, 3]; for x in xs.iter().map(|&x| x * 2) { print!("{}", x) }
[07:17:18] -rusti- 246()
[07:17:22] <strcat> rusti: let xs = [1, 2, 3]; for x in xs.iter().map(|&x| x * 2) { print!("{} ", x) }
[07:17:23] -rusti- 2 4 6 ()
[07:17:39] <strcat> only need/want collect if you actually want a new container
[07:18:03] <strcat> http://static.rust-lang.org/doc/master/tutorial-container.html#iterators
[07:19:02] <spacy> I take it that this doesn't work for floating point
[07:19:37] <spacy> Scratch that it doesn't work for locally owned floating point
[07:20:05] <strcat> hm?
[07:20:30] <strcat> rusti: let xs = [1.5, 2.8, 3.92]; for x in xs.iter().map(|&x| x * 2.0) { print!("{} ", x) }
[07:20:30] <spacy> collect::<@[float]> returns an error
[07:20:31] -rusti- 3 5.6 7.84 ()
[07:20:49] <strcat> spacy: @ vectors aren't really useful
[07:20:58] <strcat> they can't change size
[07:21:17] <spacy> Yes, so for a simple vector division shouldn't that be the expected behavior
[07:21:38] <strcat> hm?
[07:21:48] <spacy> So if I want to divide a vector by a constant
[07:22:22] <spacy> I want some sort of guarantee for the language that the vector is the same length as it was before I called the function 
[07:22:50] <strcat> the vector will be guaranteed to be the same size if you use an iterator
[07:22:57] <strcat> and just map
[07:23:10] <spacy> That's true I suppose
[07:23:16] <spacy> It does seem like strange behavior 
[07:23:48] *** Quits: santiago (santiago@moz-8ADE82B4.socal.res.rr.com) (Ping timeout)
[07:24:11] <strcat> the problem with @ vectors is that their size is determined at runtime, but it can't be safely changed after creation
[07:24:26] <strcat> so even something like conversion from an iterator would require unsafe code
[07:24:32] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[07:24:46] <spacy> Ah, I was unaware of that. 
[07:25:13] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Quit: Leaving)
[07:25:22] <spacy> Is there anyway to get involved working on this documentation
[07:25:49] <strcat> well afaik @ vectors will be moved out of the language to a library
[07:26:21] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[07:26:24] <strcat> spacy: if you have improvements to it, you can send a pull request
[07:26:38] <strcat> lots of stuff is still undocumented or poorly/incorrectly documented
[07:26:42] <strcat> due to the fast rate of change
[07:27:24] *** Joins: tommy (smuxi@51D3B54.FEF996EA.EA6FEF3D.IP)
[07:28:18] <klutzy> my latest pr is 2-bytes fix for doc
[07:29:23] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[07:31:12] *** Joins: Ms2ger (Ms2ger@moz-45EBCB4A.adsl-dyn.isp.belgacom.be)
[07:32:23] *** Joins: santiago (santiago@moz-8ADE82B4.socal.res.rr.com)
[07:32:24] *** Quits: RMF (RMF@moz-F6CF4762.dsl.telepac.pt) (Quit: Computer has gone to sleep.)
[07:32:59] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Quit: WeeChat 0.4.2-rc1)
[07:34:20] *** Quits: maik (maik@moz-64456714.dip0.t-ipconnect.de) (Ping timeout)
[07:37:50] *** Quits: tommy (smuxi@51D3B54.FEF996EA.EA6FEF3D.IP) (Client exited)
[07:38:43] *** Joins: squiddy (squiddy@moz-AAA957C3.adsl.alicedsl.de)
[07:42:07] *** Joins: skade (skade@moz-DA43A266.hsi.kabel-badenwuerttemberg.de)
[07:42:10] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[07:45:51] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[07:46:37] *** Quits: KindOne (KindOne@moz-6E538F5C.dynamic.ip.windstream.net) (Ping timeout)
[07:50:33] *** Joins: KindOne (KindOne@moz-6E538F5C.dynamic.ip.windstream.net)
[07:54:29] *** Joins: maik (maik@moz-64456714.dip0.t-ipconnect.de)
[07:55:25] *** Joins: sk (sk@84ED2246.E25437ED.78DD174B.IP)
[07:57:08] *** Joins: victorporof (victorporo@8CD8EBC4.60E0D239.9B1E38F4.IP)
[08:00:17] <acrichto> flaper87: yes
[08:00:43] <strcat> rusti: version
[08:00:47] -rusti- "rustc 0.8 (c1b187d 2013-09-23 21:06:03 -0700)"
[08:00:48] <strcat> acrichto: :)
[08:00:58] <flaper87> acrichto: hey, just wanted to know if you managed to talk with brson
[08:01:01] <acrichto> rusti: "nice"
[08:01:02] <flaper87> about that patch
[08:01:02] -rusti- "nice"
[08:01:07] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[08:01:07] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/_icWUQ
[08:01:07] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[08:01:07] <flaper87> strcat: awesome
[08:01:12] <acrichto> flaper87: not yet, I'll grab him tomorrow though
[08:01:34] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[08:01:52] <dbaupp> cmr: \o/
[08:01:55] <flaper87> acrichto: when will the 0.8 release be tagged ?
[08:02:13] <strcat> the milestone says 7 days
[08:02:19] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[08:02:21] <dbaupp> cmr: I think I need to reenable the data downloader, do that in a bit.
[08:02:22] <acrichto> I think thursday-ish, brson wanted a rc today but I don't think he got around to doing one
[08:02:43] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:02:44] <flaper87> ah ok, so, there's still chance for the new version of that patch to land
[08:02:48] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:03:06] <flaper87> sorry it's taken me so long, last 2 weeks have been really crazy
[08:03:06] <dbaupp> flaper87: is there an urgent need for it to be in 0.8?
[08:03:36] <acrichto> flaper87: no worries :)
[08:03:47] <flaper87> dbaupp: it just made sense to let the API land and I've some cases were I could benefit from it
[08:03:48] <dbaupp> (the releases aren't real releases, basically just a way to tell the rest of the world that Rust is progressing; since they're basically just a snap of master on the day they're made.)
[08:03:58] <flaper87> dbaupp: nothing "official"
[08:04:20] *** Quits: maik (maik@moz-64456714.dip0.t-ipconnect.de) (Ping timeout)
[08:04:25] <dbaupp> flaper87: ah ok, cool
[08:04:25] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[08:04:34] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:04:39] <dbaupp> acrichto: I'm hearing rumours of a mozilla-run bencher?
[08:05:03] <acrichto> dbaupp: hopefully! we have an issue open for it now
[08:05:12] <dbaupp> eurgh, the OS course is having a lot of trouble with signal handlers :(
[08:05:13] <acrichto> we may have to do like a parts order or something like that
[08:05:28] <acrichto> OS courses should be writing kernels, not signal handlers :(
[08:05:34] <dbaupp> *and* the sigaction struct in (my) signal.h includes a C union :S
[08:05:40] <strcat> dbaupp: if they're on linux they can use signalfd
[08:05:46] <strcat> sigaction isn't going to work
[08:06:03] <dbaupp> right, well, they need to be told this.
[08:06:04] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[08:06:04] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/yTUpLg
[08:06:04] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[08:06:05] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[08:06:06] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[08:06:06] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Z0hdlQ
[08:06:06] <ghrust> 13rust/06auto 143073ba4 15Jimmy Zelinskie: Fix signature of Result in tasks tutorial. Closes #8343
[08:06:06] <ghrust> 13rust/06auto 140275b1c 15bors: auto merge of #9450 : jzelinskie/rust/tutorial-tasks-result-signature, r=alexcrichton
[08:06:06] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[08:06:08] <strcat> signals and threads already mix poorly, but rust does weird stuff to the stack
[08:06:28] <dbaupp> yeah
[08:06:32] <strcat> dbaupp: well, we don't have signal handling done :s
[08:06:48] <dbaupp> yup
[08:06:52] <strcat> proper way to do signals is signalfd in your event loop
[08:07:05] <dbaupp> presumably libuv does that on linux.
[08:07:05] <strcat> (well not *in it*, the fd from it being epoll'ed)
[08:07:08] <strcat> dbaupp: yes
[08:07:23] <strcat> and elsewhere I assume the signal handling isn't safe
[08:07:33] <strcat> because we are running multiple libuv instances
[08:07:46] <strcat> and signals + threads only mix if you mask the signal in other threads
[08:08:04] <strcat> so afaik we can't have portable signal handling unless there's a way of using kqueue or whatever it's called
[08:08:09] <strcat> (and if libuv uses it)
[08:08:14] * strcat shrugs
[08:08:29] <dbaupp> yuck
[08:08:40] <strcat> (signals and threads don't mix *if you don't use signalfd* ;p)
[08:09:28] * dbaupp is borrowing strcat's knowledge for an answer on the OS courses piazza forum
[08:09:50] *** Joins: maik (maik@moz-64456714.dip0.t-ipconnect.de)
[08:11:02] <strcat> dbaupp: it's really a pain to use by hand though
[08:11:19] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[08:11:30] <strcat> https://github.com/thestinger/playpen/blob/master/playpen.c#L442 rusti's heart
[08:11:51] <strcat> event loop for the I/O, signals (signalfd) and timeout timer (timerfd)
[08:11:52] <mcpherrin> strcat: holy shit, I needed signalfd ages ago and didn't realize it existed
[08:11:56] <mcpherrin> TIL
[08:12:03] <mcpherrin> dunno how I missed that.
[08:13:18] *** Quits: tikue (tkuehn@90828AFE.B9B3942C.689607DE.IP) (Quit: tikue)
[08:14:30] <strcat> dbaupp: signalfd forces you to have an event loop though. rust ofc already has one, but it's hidden
[08:15:06] <strcat> good old fashioned totally unsafe/crazy signals just interrupt syscalls and go to the handler, where you're basically not allowed to do *anything*
[08:15:06] <dbaupp> strcat: not my problem :P I'll just point them at the right function, and the right way to FFI-declare it.
[08:15:31] <strcat> basically all a handler can do is exit or ignore it... ;p
[08:16:39] *** Quits: jdm (jdm@moz-AC9BBCA1.dsl.teksavvy.com) (Ping timeout)
[08:16:41] <strcat> or set global state... since you already have to mask the signal in all but the thread handling it
[08:16:50] * strcat doesn't really understand how people managed with the old way
[08:17:40] <strcat> it's maybe possible you could get a basic old fashioned handler working with sigaltstack
[08:17:52] * strcat shrugs
[08:18:17] <strcat> you'd run into these same problems in C in a real program
[08:20:44] <dbaupp> eurgh, this isn't going to work very well at all :S
[08:20:59] <dbaupp> ... can't construct a sigset_t very easily at all.
[08:21:23] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[08:26:38] <strcat> dbaupp: yeah, handling signals is not going to be fun at this point 
[08:26:49] <strcat> it needs to be done by the runtime
[08:27:05] <dbaupp> strcat: I've decided that I'm not capable of giving advice that will be useful, and not just make heads explode :(
[08:27:08] <strcat> and for runtimeless rust to be usable.... we really need libclang for automatic binding usage
[08:27:26] <dbaupp> yup, that'd be very neat.
[08:27:32] *** Quits: maik (maik@moz-64456714.dip0.t-ipconnect.de) (Ping timeout)
[08:28:03] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:28:07] <strcat> dbaupp: just tell them that legacy signal handling via handlers is likely going to require sigaltstack and that rust will eventually expose it the proper way via signalfd (and equivalent functions elsewhere) under the hood
[08:30:27] <dbaupp> dave1629: ping
[08:31:22] <dbaupp> strcat: yuck ("sorry the language sucks, and you're reduced to writing C with a funny syntax." :( )
[08:31:47] <strcat> it doesn't suck
[08:31:54] <strcat> the standard library and runtime just aren't extensive/mature
[08:32:07] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[08:33:11] <dbaupp> right, that's what they (might) hear though
[08:33:47] <dbaupp> they're already complaining about fighting the *language* a lot (when the actually mean they are fighting the stdlib)
[08:34:06] <strcat> it's a far better stdlib than you get in C
[08:34:37] <strcat> the C++ stdlib doesn't have signals, networking, and so on... you're reduced to using C/POSIX functions anyway
[08:34:51] <strcat> or in the case of signals, OS-specific ones ;P
[08:35:28] <Ke> btw. how far away is using vanilla llvm with rust?
[08:36:07] <mcpherrin> strcat: I think networking is on the c++14 docket :P
[08:36:08] <dbaupp> Ke: there was rumours a few weeks ago of some LLVM committers looking over the patches (with a view to merge them), not sure if this is happened
[08:36:27] <strcat> Ke: https://github.com/alexcrichton/llvm/commits/rust-llvm-2013-09-15 9 patches
[08:37:10] <dbaupp> strcat: I imagine most of these people come from python/java/whatever that have an extensive stdlib (admittedly not for systems programming, but doesn't change their impressions), also, the prof setting tasks that very few (if any) people have done in rust is pretty mean :P
[08:37:21] *** Quits: zagabar (zagabar@858B320D.B543C4DE.3933CC16.IP) (Ping timeout)
[08:37:39] *** Quits: zxcdw (r-a@858B320D.B543C4DE.3933CC16.IP) (Ping timeout)
[08:37:59] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:38:47] <strcat> I don't think any of it would really be harder than doing it in C though.
[08:39:12] <dbaupp> it is when you're struggling to get the FFI to work properly
[08:39:27] <strcat> mcpherrin: well, I wish them luck with that, because they lack any form of efficient async support too so no one will use it
[08:39:50] <strcat> boost's asio library is an awesome low-level building block, but you still have to build http, etc. yourself
[08:40:13] <strcat> http://cpp-netlib.org/ the closest thing to sane networking in modern C++ is less mature than rust ;p
[08:41:59] <strcat> (ofc, I'm sure most people just use a library like Qt and deal with the ugly Java-style C++98)
[08:46:32] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[08:46:49] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[08:49:55] <z0w0>                                            	zzxzez
[08:50:06] <z0w0> +  3W
[08:50:08] <z0w0> 3 33XZ
[08:50:10] <z0w0>  ZZZZZ                                                                                                               WWWWWWWWWWWVVX
[08:50:12] <z0w0> 33       3V
[08:50:14] <z0w0>  X
[08:50:29] <myname> looks like some kind of really crappy esoteric programming language
[08:51:12] *** tikue_class is now known as tikue_
[08:51:15] *** tikue_ is now known as tikue
[08:51:38] <z0w0> woops
[08:51:44] <z0w0> goddamn cats
[08:52:00] <ldunn> sure, pin it on the cats
[08:52:12] <z0w0> everything in this world is the fault of cats
[08:52:21] <z0w0> everything wrong*
[08:52:25] <myname> everything on the internet
[08:52:33] *** Quits: KindOne (KindOne@moz-6E538F5C.dynamic.ip.windstream.net) (Input/output error)
[08:53:20] *** Joins: KindOne (KindOne@moz-6E538F5C.dynamic.ip.windstream.net)
[08:54:02] * tikue hopes cs4414 collectively manages to maintain an open mind toward rust
[08:55:48] <Seldaek> tikue: why that? has there been feedback making you think otherwise?
[08:56:13] <dbaupp> Seldaek: a lot of rage against the language/stdlib
[08:56:15] <Seldaek> also maybe we shouldn't speak of them like a group of lab rats :P
[08:56:37] <Ms2ger> Sounds accurate ;)
[08:56:37] <dbaupp> (well, not a lot, and "rage" might be too strong, but it's not insignificant.)
[08:57:23] <Seldaek> well it's fair enough, not everyone has the curiosity (or self-hatred?) needed to play with bleeding edge stuff
[08:57:37] <dbaupp> Seldaek: http://www.cs.virginia.edu/~evans/cs4414-fall2013/ps1-comments-comments.html
[08:58:02] <dbaupp> (oh, I forgot the rage against the docs too.)
[09:01:06] *** Quits: sk (sk@84ED2246.E25437ED.78DD174B.IP) (Ping timeout)
[09:03:15] <tikue> Seldaek: I don't think of them as a group of lab rats! But they're ostensibly the first "outside" group to test rust's waters, and even if it doesn't matter in the long run it'd still be disappointing if they came away from the class hating rust
[09:03:18] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:03:42] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[09:07:12] *** Joins: sk (sk@88FB4160.751D8A43.78DD174B.IP)
[09:07:36] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:08:08] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Ping timeout)
[09:08:48] <Seldaek> tikue: of course I get your point but it sounded a bit like a scientist observing subjects :p
[09:09:19] *** Quits: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk) (Quit: Leaving)
[09:11:57] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[09:13:25] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:15:05] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:16:56] <tikue> Seldaek: a scientist doesn't ignore freely available data points ;) 
[09:17:13] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[09:21:04] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[09:21:04] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/Z0hdlQ
[09:21:04] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[09:26:07] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[09:26:07] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/OmNfKg
[09:26:07] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[09:26:09] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[09:26:09] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/poozlQ
[09:26:09] <ghrust> 13rust/06auto 147eed184 15Felix S. Klock II: visit::Visitor refactor: replace (&mut BorrowckVisitor, @BorrowckCtxt) with &mut BorrowckCtxt.
[09:26:09] <ghrust> 13rust/06auto 144f691cd 15Felix S. Klock II: visit::Visitor refactor: fold moves.rs VisitContext into ComputeModesVisitor.
[09:26:10] <ghrust> 13rust/06auto 14c7e6726 15bors: auto merge of #9453 : pnkfelix/rust/fsk-further-syntax-visit-refactors, r=alexcrichton...
[09:26:12] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[09:26:12] *** Joins: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se)
[09:29:00] *** Joins: sinma (yaaic@FBFACCA1.EFBD84AC.8154E413.IP)
[09:30:09] <sinma> Hi
[09:30:30] <sinma> Is Rust good at keeping stable ABI?
[09:31:17] <klutzy> no. even syntax and api are changing now
[09:31:31] <klutzy> I don't know what after 1.0 though
[09:32:05] *** Joins: maik (maik@moz-64456714.dip0.t-ipconnect.de)
[09:32:40] <sinma> Because in C++ it leads to tricks like d-pointers
[09:33:07] <sinma> syntax doesn't change much now ^^
[09:36:44] *** Quits: maik (maik@moz-64456714.dip0.t-ipconnect.de) (Ping timeout)
[09:39:37] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[09:39:44] *** Joins: maik (maik@moz-64456714.dip0.t-ipconnect.de)
[09:40:56] *** Joins: RMF (RMF@4EAA63AE.44ED0B2A.7CFB50F9.IP)
[09:44:47] <bjz> dbaupp: where is random number gen again?
[09:46:32] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[09:49:14] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Quit: Leaving...)
[09:49:32] <bjz> ohh, std::rand
[09:51:24] <dbaupp> bjz: correct
[09:51:41] *** Quits: sinma (yaaic@FBFACCA1.EFBD84AC.8154E413.IP) (Quit: Yaaic - Yet another Android IRC client - http://www.yaaic.org)
[09:51:51] <bjz> dbaupp: is that a function to get a float within 0 and 1?
[09:52:11] <dbaupp> rusti: std::rand::task_rng().gen::<float>()
[09:52:12] -rusti- <anon>:7:9: 8:5 error: type `@mut std::rand::IsaacRng` does not implement any method in scope named `gen`
[09:52:12] -rusti- <anon>:7          std::rand::task_rng().gen::<float>()
[09:52:12] -rusti- <anon>:8     };
[09:52:12] -rusti- error: aborting due to previous error
[09:52:12] -rusti- application terminated with error code 101
[09:52:27] <dbaupp> rusti: use std::rand::Rng; std::rand::task_rng().gen::<float>()
[09:52:28] -rusti- 0.23815684
[09:52:40] *** Quits: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP) (Ping timeout)
[09:52:42] <bjz> is that fast?
[09:52:44] <dbaupp> no
[09:53:08] <dbaupp> for speed, you'll want to create and save a std::rand::weak_rng()
[09:53:29] <bjz> ah
[09:53:50] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[09:54:21] <dbaupp> (save it to avoid recreating a new one repeatedly, since that will go off and read /dev/urandom.)
[09:57:44] *** Joins: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP)
[09:59:29] *** Quits: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP) (Quit: z0w0)
[09:59:58] *** Joins: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP)
[10:00:05] *** Quits: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP) (Quit: z0w0)
[10:00:32] *** Joins: nkoep (nik@moz-F304B687.pool.mediaways.net)
[10:00:34] *** Joins: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP)
[10:00:41] *** Quits: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP) (Quit: z0w0)
[10:01:11] *** Joins: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP)
[10:01:17] *** Quits: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP) (Quit: z0w0)
[10:01:47] *** Joins: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP)
[10:01:53] *** Quits: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP) (Quit: z0w0)
[10:02:22] *** Joins: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP)
[10:03:11] *** Quits: madmoose (Hat@moz-E1973371.nerp.net) (Ping timeout)
[10:03:11] *** Quits: mjrosenb (mjrosenb@moz-B3592BDA.club.cc.cmu.edu) (Ping timeout)
[10:03:13] *** Joins: madmoose (Hat@moz-E1973371.nerp.net)
[10:03:23] *** Quits: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu) (Ping timeout)
[10:03:23] *** Quits: acrichto (acrichto@moz-69F2E428.ugrad.cs.cmu.edu) (Ping timeout)
[10:03:23] *** Quits: flu_ (flu@1B44C715.B5AB1363.2E11A1C0.IP) (Ping timeout)
[10:03:24] *** Joins: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu)
[10:03:24] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Connection reset by peer)
[10:03:25] *** Joins: flu_ (flu@1B44C715.B5AB1363.2E11A1C0.IP)
[10:03:28] *** Joins: acrichto (acrichto@moz-69F2E428.ugrad.cs.cmu.edu)
[10:03:28] *** Quits: pauls (pauls@moz-7140CF01.ccs.neu.edu) (Ping timeout)
[10:03:35] *** Quits: fzzzy (fzzzy@A5CBE5CF.A81CC6E.44FA8ED.IP) (Ping timeout)
[10:03:44] *** Joins: pauls (pauls@moz-7140CF01.ccs.neu.edu)
[10:03:44] *** Quits: oldmanstan (glesica@moz-CA910636.net) (Ping timeout)
[10:03:44] *** Quits: omicrondelta (dwhyte@DFA0622C.2732CD06.B7FCEB19.IP) (Ping timeout)
[10:03:45] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[10:03:46] *** Joins: oldmanstan (glesica@moz-CA910636.net)
[10:03:48] *** Joins: fzzzy (fzzzy@A5CBE5CF.A81CC6E.44FA8ED.IP)
[10:04:15] *** Quits: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP) (Ping timeout)
[10:04:25] *** Joins: omicrondelta (dwhyte@DFA0622C.2732CD06.B7FCEB19.IP)
[10:06:26] <bjz> rusti: for i in std::range(10,0) { print!("{}",i) }
[10:06:27] -rusti- <anon>:7:18: 7:28 error: unresolved name `std::range`.
[10:06:27] -rusti- <anon>:7          for i in std::range(10,0) { print!("{}",i) }
[10:06:27] -rusti-                            ^~~~~~~~~~
[10:06:27] -rusti- error: aborting due to previous error
[10:06:27] -rusti- application terminated with error code 101
[10:06:33] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:06:50] *** Quits: klapaucius (klapaucius@E5AF674E.5692770D.BB41F968.IP) (Quit: klapaucius)
[10:07:04] <bjz> huh
[10:07:15] <bjz> rusti: for i in ::std::range(10,0) { print!("{}",i) }
[10:07:16] -rusti- <anon>:7:18: 7:30 error: unresolved name `std::range`.
[10:07:16] -rusti- <anon>:7          for i in ::std::range(10,0) { print!("{}",i) }
[10:07:16] -rusti-                            ^~~~~~~~~~~~
[10:07:16] -rusti- error: aborting due to previous error
[10:07:16] -rusti- application terminated with error code 101
[10:07:37] <bjz> rusti: for i in std::iter::range(10,0) { print!("{}",i) }
[10:07:38] -rusti- ()
[10:07:55] <bjz> rusti: for i in std::iter::range(0,10).reverse() { print!("{}",i) }
[10:07:57] -rusti- pastebinned 13 lines of output: http://sprunge.us/fRhb
[10:08:03] <dbaupp> bjz: (you can private message rusti)
[10:08:16] *** Joins: thatfreakingguy (Mibbit@moz-4142E229.pool.mediaways.net)
[10:08:18] <dbaupp> rusti: for i in range(0,10).invert() { print!("{} ",i) }
[10:08:19] -rusti- 9 8 7 6 5 4 3 2 1 0 ()
[10:08:28] <bjz> oh
[10:08:35] *** Joins: mjrosenb (mjrosenb@moz-B3592BDA.club.cc.cmu.edu)
[10:08:49] <Jesse> rusti: for i in range(10,0).invert() { print!("{} ",i) }
[10:08:50] -rusti- ()
[10:09:22] <thatfreakingguy> What is "error: overly deep expansion of inlined function" supposed to mean?
[10:10:07] <thatfreakingguy> Complete error http://mibpaste.com/R2Fbbk 
[10:10:10] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:12:28] <thatfreakingguy> Removing the "let mut iter = iter.peekable();" line solves the problem
[10:12:53] <dbaupp> it sounds like something is getting recursively inlined or something
[10:13:54] <thatfreakingguy> That would be an compiler bug and not an error in the code, right?
[10:14:14] <dbaupp> maybe, can I see the whole code?
[10:14:30] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[10:14:37] *** Quits: maik (maik@moz-64456714.dip0.t-ipconnect.de) (Ping timeout)
[10:16:39] <thatfreakingguy> http://mibpaste.com/gRA0aq 
[10:16:58] <thatfreakingguy> Can't find an smaller example producing the error right now
[10:17:22] *** Quits: RMF (RMF@4EAA63AE.44ED0B2A.7CFB50F9.IP) (Quit: Computer has gone to sleep.)
[10:17:37] <thatfreakingguy> Oops wrong code
[10:17:44] <thatfreakingguy> http://mibpaste.com/MpVJok 
[10:17:46] <thatfreakingguy> There
[10:17:54] <thatfreakingguy> That one actually has the error
[10:24:20] <dbaupp> I think the problem is the `parse` line is creating an infinite sized type
[10:24:44] <thatfreakingguy> It's all pointers though
[10:25:04] <dbaupp> generics get monomorphised, so the iter.peekable() call makes a Peekable<T>, which parse then gets called ont
[10:25:05] <dbaupp> *on
[10:25:52] <dbaupp> so in that instance, the compiler has to monomorphise to `T = Peekable<T_original>`, and then again for `T = Peekable<Peekable<T_original>>`
[10:25:54] <dbaupp> etc etc
[10:26:28] <dbaupp> so the compiler has to a create an instance of `parse` for an infinite number of these types due to the recursion
[10:26:52] <thatfreakingguy> That makes sence
[10:27:48] <dbaupp> I think the "correct" approach here would for parse to remain as is, but to use an inner function with type <T: Iterator<char>>(mut iter: Peekable<char, T>) and use that function to recurse, without a .peekable call at each level
[10:28:08] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[10:28:56] <dbaupp> you'd have `fn parse<T: Iterator<char>>(iter: T) { return parse_inner(iter.peekable()); fn parse_inner<T: Iterator<char>>(mut iter: Peekable<char, T>) { /* actual work here */ } }`
[10:29:24] <thatfreakingguy> Yup
[10:29:31] <thatfreakingguy> Thanks
[10:30:12] *** jorendorff_away is now known as jorendorff
[10:32:01] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[10:41:02] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[10:41:02] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/poozlQ
[10:41:02] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[10:46:02] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[10:46:02] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/N3GRkQ
[10:46:02] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[10:46:04] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[10:46:04] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/TVBKQg
[10:46:04] <ghrust> 13rust/06auto 14426ad12 15klutzy: std::local_data: Fix document code
[10:46:04] <ghrust> 13rust/06auto 1485ca934 15bors: auto merge of #9457 : klutzy/rust/doc-fix, r=alexcrichton
[10:46:04] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[10:46:48] *** Joins: zxcdw (r-a@858B320D.B543C4DE.3933CC16.IP)
[10:46:49] *** Joins: zagabar (zagabar@858B320D.B543C4DE.3933CC16.IP)
[10:46:57] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[10:47:14] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[10:53:30] <dave1629> Full code is here: http://pastebin.com/xzpMJvxk  Can anyone explain this error:  listm1.rs:32:16: 32:35 error: mismatched types: expected `&fn<no-bounds>(&'^@ @mut Node) -> int` but found `&fn<no-bounds>(int) -> int` (expected &-ptr but found int)
[10:53:31] <dave1629> listm1.rs:32         self.map(|x: int| { x + 1 })
[10:53:32] <dave1629>                              ^~~~~~~~~~~~~~~~~~~
[10:53:33] <dave1629> where trait Map {
[10:53:34] <dave1629>     fn map(&self, &fn(int) -> int);
[10:53:35] <dave1629> }  
[10:54:51] <dbaupp> does it really have `'^@` in the error message? o_O
[10:56:37] *** Joins: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP)
[10:56:46] <dave1629> yes: http://pastebin.com/uDKAh25Z
[10:56:58] <dave1629> dbaupp: this is using 0.7
[10:57:03] *** Quits: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP) (Quit: z0w0)
[10:57:33] *** Joins: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP)
[10:57:34] *** Quits: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP) (Client exited)
[10:57:49] *** Joins: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP)
[10:57:57] <dbaupp> that looks a lot like compiler bug
[10:58:02] * dbaupp tries in a new rust
[10:58:46] <dbaupp> ah!
[10:58:55] <dbaupp> it's because Option has a .map method already
[10:59:08] <dbaupp> (and so the typedef is disguising the true cause)
[11:03:03] *** Quits: dew (Instantbir@moz-8A71886F.dhcp.stls.mo.charter.com) (Ping timeout)
[11:03:31] <dave1629> dbaupp: ah ha!  great, thanks a bunchâ€¦ 
[11:03:33] *** Joins: dew (Instantbir@moz-8A71886F.dhcp.stls.mo.charter.com)
[11:03:46] <dbaupp> np
[11:09:27] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:13:03] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:16:36] *** Joins: fyolnish (fyolnish@moz-37DC49A0.uqwimax.jp)
[11:18:27] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[11:21:04] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[11:22:15] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[11:22:41] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[11:29:27] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[11:34:29] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[11:38:35] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[11:39:32] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[11:45:50] *** Quits: zxcdw (r-a@858B320D.B543C4DE.3933CC16.IP) (Ping timeout)
[11:45:58] *** Quits: zagabar (zagabar@858B320D.B543C4DE.3933CC16.IP) (Ping timeout)
[11:49:21] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[11:49:41] *** Joins: mib_mjpqr4 (Mibbit@CD21EA63.55DBA505.232D870F.IP)
[11:50:40] *** Quits: mib_mjpqr4 (Mibbit@CD21EA63.55DBA505.232D870F.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:50:40] *** Quits: thatfreakingguy (Mibbit@moz-4142E229.pool.mediaways.net) (Quit: http://www.mibbit.com ajax IRC Client)
[11:51:12] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[11:52:58] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[11:52:58] *** ChanServ sets mode: +o pnkfelix
[11:56:03] *** Quits: skade (skade@moz-DA43A266.hsi.kabel-badenwuerttemberg.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[11:56:21] *** Quits: spacy (Mibbit@moz-A7500DF3.hsd1.co.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[11:56:51] *** Joins: Guest (textual@moz-E06F46F0.corp.bitshelter.com)
[12:01:53] *** Quits: jon (jon@moz-D51AE9DE.swym.se) (Ping timeout)
[12:01:54] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[12:02:38] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[12:03:05] *** Joins: Ferreus (ferreus@moz-E7C43FE8.dyn.telefonica.de)
[12:03:56] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[12:06:03] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[12:06:03] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/TVBKQg
[12:06:03] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[12:07:19] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[12:08:46] *** Joins: sanxiyn (tinuviel@AE8B10D7.A92E374.57C4C441.IP)
[12:09:15] *** Joins: skade (skade@moz-DA43A266.hsi.kabel-badenwuerttemberg.de)
[12:12:34] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:15:18] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[12:16:08] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:16:08] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[12:17:38] *** jorendorff is now known as jorendorff_away
[12:17:41] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[12:19:34] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[12:19:46] *** Quits: nkoep (nik@moz-F304B687.pool.mediaways.net) (Ping timeout)
[12:22:05] *** Joins: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca)
[12:23:12] <dbaupp> cmr: ping
[12:32:41] <kimundi> SimonSapin: ping
[12:32:47] <SimonSapin> kimundi: pong
[12:33:31] <kimundi> SimonSapin: Hi, I just had a very small idea about some hypothetical optimisation for an decoding iterator
[12:33:56] <kimundi> deisclaimer: I haven't read th e last weeks worth of discussion of the milaing list, and have no idea where the design is leading to at the moment
[12:34:11] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[12:34:39] <kimundi> But I remember the comment "An Iterator that emits chars could be slow"
[12:34:41] <SimonSapin> I move the proposal to the wiki, for easier updating: https://github.com/mozilla/rust/wiki/Proposal-for-character-encoding-API
[12:35:02] *** Joins: nkoep (nik@moz-E8568868.vpn.rwth-aachen.de)
[12:35:10] <SimonSapin> yes
[12:35:48] <kimundi> And I just had the idea that it could emit an enum UnicodeFragement<'self> { Char(char), Utf8(&'self str) } instead
[12:35:56] <SimonSapin> this "would be slow" is only based on intuition on not anything concrete
[12:36:44] <kimundi> "If the input contains fragments of valid utf8, even if just in the form of ascii, pass it through directly without decoding to chars"
[12:37:09] <SimonSapin> but I removed the iterator stuff entirely in the latest proposal
[12:37:28] <kimundi> No Idea if this is relevant at the moment, just wanted to tell someone who is actually involved with that right now. :P
[12:37:50] <SimonSapin> because itâ€™s relatively easy to build on top of .feed() / .finish(), and there are so many ways to do it
[12:37:57] <engla> I think a decoder in form of Iterator<char> could be useful for parsers, even if not hyper optimized
[12:38:11] <kimundi> Ah, right, rember that reason now :P
[12:38:54] <SimonSapin> IMO, iterators could be added in the next iteration of this API but do not need to be built-in right now
[12:39:03] <engla> yes
[12:39:29] <kimundi> sure
[12:40:26] *** Quits: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP) (Client exited)
[12:41:42] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[12:42:10] <SimonSapin> on further though, for fn decode<I: Iterator<u8>>(input: I, â€¦), the compiler would emit different code for each concrete iterator, which would give a chance to .next() to be inline, which makes the "too slow" concern moot
[12:42:48] <kimundi> yeah
[12:43:05] <kimundi> iterators optimze super hard :)
[12:43:34] <SimonSapin> well, itâ€™s monomorphization + inlining
[12:43:44] <kimundi> because they just end up as a loop with a bunch of inlineable calls and structs on the stack
[12:45:49] <SimonSapin> but it means that byte offsets for errors reporting would have to be counted separately
[12:46:18] <kimundi> well, the iterator could just pass them too
[12:46:29] <SimonSapin> and with Iterator<char>, UTF-8 "encoding" can not be optimized to a copy with the Encoding API
[12:46:59] <SimonSapin> so Iterator<(uint, u8)>?
[12:47:08] <kimundi> there comes my enum UnicodeFragmen{ Char(char), Utf8(&str) } into play
[12:47:15] <kimundi> For example, 
[12:47:15] <kimundi> es
[12:47:19] <kimundi> yes*
[12:47:27] <SimonSapin> it feels a bit overkill, sorry :)
[12:47:42] <kimundi> well, it wouldn't be user facing, so
[12:47:57] <SimonSapin> wouldnâ€™t it?
[12:48:26] <kimundi> Well, depends on how you meant that
[12:48:50] <kimundi> We can have something that gives you an utf encoder iterator from an &str, and from an Iterator<char>
[12:48:56] <SimonSapin> isnâ€™t the point to have a user-facing iterator-based API?
[12:49:17] <kimundi> that somewhere in the middle uses a common backend using than enum
[12:50:09] <kimundi> I think this is the point again where I'm still not sure what problems such an encoding api is supposed to solve in what way :)
[12:52:36] <kimundi> (For what it's worth, I think I have a design that allows to define two traits for decoding any input format into any output format using an char stream in the middle that allows for overriding that with something that doesn't use chars, but it needs fixes for Rust trait implementation restrictions)
[12:53:37] <doomlord_> (hi)
[12:53:49] <kimundi> basically, if we ever can do "impl Foo<X> for Z" and "impl Foo<Y> for Z" at the same time, I'd have a conrete proposal that would solve that nicely :)
[12:54:09] <SimonSapin> well, the goal is to convert between bytes (u8) and text (str/char) using the character encodings defined in http://encoding.spec.whatwg.org/
[12:55:03] <kimundi> SimonSapin: Right, and I'm trying to generalize 'u8' to 'anything implementin a specific trait' and 'str/char' to 'anything implemnting another specific trait'
[12:55:14] *** Joins: dave1629 (dave@15A3FE2B.75B49943.DDE5D3F6.IP)
[12:55:27] <kimundi> Uneccessary, but so much more powerfull if working
[12:55:29] <SimonSapin> I think thatâ€™s out of scope for "encodings"
[12:56:06] <SimonSapin> for example, Iâ€™m *not* trying to do something that supports base64 or gzip
[12:58:04] <kimundi> SimonSapin: Hm, neither am I, but I think if what i'm trying pans out it would result in a general Transcoding api, of which "string encoding/decoding" would be a subset of usecases...
[12:58:18] <kimundi> Maybe not. No idea
[12:58:25] <SimonSapin> and I think that "transform anything to anything" is too general to define anything useful that applies in all cases
[12:58:39] <kimundi> okay, a bit more specific
[12:59:25] <kimundi> "transforms any kind of string encoding into any other kind in the most performant way"
[13:00:12] <kimundi> Basically, what I have is like three traits "DecodeFrom", "EncodeTo" and "Transcode"
[13:00:37] <SimonSapin> what does "transform a string encoding" mean?
[13:01:49] <kimundi> okay, possible inputs: ~[Ascii], Utf16, ~str. Each one has different invariants and memory layouts around their content.
[13:02:19] <kimundi> An ~[Ascii] can be transfomed into a ~str and other ~[Ascii] as a noop
[13:02:23] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Ping timeout)
[13:02:50] <SimonSapin> I think these are too specific to benefit from a generalized API
[13:02:54] <kimundi> Utf16 -> ~str would allways need to be decoded to codepoints because it's not byte but u16 based
[13:02:59] <SimonSapin> but I also think that we already had this discussion :)
[13:03:01] <kimundi> etc
[13:03:06] <kimundi> yeah
[13:03:25] <kimundi> Anyway,I jsutw anted to say this
[13:04:11] <kimundi> Using my design, you'd implement both "DecodeFrom" and "EncodeTo" for ~[Ascii], utf16, ~str etc
[13:05:00] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[13:05:08] <ChrisMorgan> RFC: actually going through and replacing "borrowed pointer" with "reference" everywhere and using that terminology.
[13:05:12] <kimundi> Actually, forget it for now, I don't rember how it went :P
[13:05:21] <kimundi> ChrisMorgan: 1+
[13:05:32] <engla> given that ~[Ascii] is "binary compatible" with ~str it doesn't need a transcode api, it could just implement trait Str::as_slice()
[13:05:56] <kimundi> engla: Right, but that's an special case
[13:06:00] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[13:07:05] <Amaranth> Is borrowed pointer a term made up for rust or is it just so obscure only rust shows up in searches for it?
[13:07:12] <kimundi> engla: Regardless of what others tell me, I'd like to see a design working that can just generically abstract over all cases. :P But I'm not demanding such an solution until I get it actually working painless
[13:07:31] <dbaupp> ChrisMorgan: there's a RFC-bug open about it
[13:07:43] <ChrisMorgan> Yep, just found it - https://github.com/mozilla/rust/issues/6608
[13:07:45] <kimundi> Amaranth: Wouldn't call it made up, more like it fell out of our ownership metaphor
[13:08:12] <kimundi> Amaranth: So, we might be unique, or at least the relative majority using that term :)
[13:08:21] <Amaranth> I found a KDE dev talking about it wrt C++ on page 2, otherwise I'm only finding rust
[13:09:05] <Yoric> Amaranth: You could check in Tofte & Talpin, I believe that they are the ones who came up with the concept â€“ but I don't think they gave it a specific name.
[13:09:05] *** Joins: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com)
[13:09:51] <Amaranth> The point I was making was that using a term everyone knows is better than using an essentially made up term that means the same thing
[13:10:17] <kimundi> Anyway we should switch to reference, if only because it's easier to type and abbreviate, and we already have it semi officially ingrained in the language in form of the 'ref' keyword :P
[13:10:30] <engla> isn't the terminology in the field `pointer regions` or sim?
[13:10:34] <kimundi> Amaranth: It's not made up
[13:10:48] <kimundi> Amaranth: IT's an description of the semantic using an methaphor
[13:11:03] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[13:11:11] <kimundi> "You borrowed access to this thing in form of a pointer"
[13:11:26] <kimundi> Anyway, reference it should become
[13:12:32] <kimundi> engla: regions is something different than our lifetimes afaik. At least, regions also include heap allocations
[13:13:21] <engla> the Rust core devs have said that the lifetimes are only a limitied impl of the region idea, but an understandable part of it
[13:14:13] <kimundi> I guess that is what I meant
[13:14:38] <kimundi> Hm, renaming borrowed pointer to reference has one big problem
[13:14:49] *** jorendorff_away is now known as jorendorff
[13:15:12] <kimundi> Borrowed pointer tutorial -> Reference tutorial becomes a bit confusing ;)
[13:15:25] <doomlord_> borrowed pointer is a very clear term IMO
[13:15:25] <kimundi> Meh, maybe not
[13:15:39] <kimundi> I confused it with "Rference manual" just now in my head
[13:15:43] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[13:16:30] <kimundi> doomlord_: It's also two words and unabbreviatable unless you use the unpronounceable symbol '&'
[13:17:12] * ChrisMorgan wonders how one might abbreviate "borrowed pointer"
[13:17:22] <engla> the libstd api evidently uses ref and ref_mut
[13:17:32] <kimundi> And we have the ref keyword
[13:17:51] * ChrisMorgan wonders why ref_mut and not mut_ref
[13:17:54] *** Joins: jdm (jdm@CC0122E6.8F96AEA7.2D179A7D.IP)
[13:17:54] *** ChanServ sets mode: +o jdm
[13:18:19] <doomlord_> bp = borrowed pointer ? 
[13:18:23] <kimundi> rusti: ref mut x = "hello"; x
[13:18:24] -rusti- pastebinned 7 lines of output: http://sprunge.us/VUfH
[13:18:26] <engla> let mut ref mut x = 2;   the ref mut order is unambiguous
[13:18:38] <engla> rusti: let mut ref mut x = 2; x
[13:18:39] -rusti- pastebinned 16 lines of output: http://sprunge.us/BdFP
[13:18:48] <kimundi> rusti: let ref mut x = "hello"; x
[13:18:49] <engla> rusti: let mut ref mut x = 2; *x
[13:18:49] -rusti- pastebinned 19 lines of output: http://sprunge.us/HKfE
[13:18:49] -rusti- <anon>:7:17: 7:26 warning: variable does not need to be mutable [-W unused-mut (default)]
[13:18:49] -rusti- <anon>:7          let mut ref mut x = 2; *x
[13:18:49] -rusti-                           ^~~~~~~~~
[13:18:49] -rusti- 2
[13:20:02] <dbaupp> ChrisMorgan: ref mut == reference to mutable data? (maybe?)
[13:20:02] *** Joins: thatfreakingguy (Mibbit@moz-4142E229.pool.mediaways.net)
[13:20:07] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[13:20:56] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[13:21:00] <kimundi> let mut ref mut x == "mutable reference to an x in a mutable location" ?
[13:21:08] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[13:22:26] <kimundi> "Make a mutable binding x to an mutable reference"
[13:22:32] <ChrisMorgan> Actually, mut_ref is what is used, e.g. Option.get_mut_ref(&mut self) -> &mut T, though the pattern match is Some(ref mut x).
[13:22:49] <kimundi> ChrisMorgan: That will become .as_imm and as_mut though
[13:23:04] <ChrisMorgan> I would read "&mut x" as "mutable reference to x".
[13:23:07] <engla> ChrisMorgan: yeah I get that wrong sometimes
[13:23:18] <kimundi> the naming mut_ref is a misnomer definitly though
[13:23:34] <engla> kimundi: I'd have preferred .as_ref() and .as_mut() though
[13:23:51] <kimundi> engla: but both are ref
[13:24:00] <kimundi> the one would be ref:mut then
[13:24:07] <engla> I think it's fine
[13:24:17] <engla> the keyword "ref" isn't "ref imm"
[13:24:17] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[13:24:18] <kimundi> Well, I not :P
[13:24:38] <kimundi> engla: Two terminologies here
[13:25:08] <kimundi> We have "ref" and "ref mut" , with one being an "imm" reference, and the other being an "mut" reference
[13:25:27] <kimundi> as_ is the prefix we seem to use for casting to an reference
[13:25:48] <benh> maybe .ref and .ref_mut would have been nicer :(
[13:25:51] <benh> alas
[13:26:00] <engla> I think it fits well, as .as_ref() and .as_mut() basically implement the match statement
[13:26:04] *** Quits: sanxiyn (tinuviel@AE8B10D7.A92E374.57C4C441.IP) (Ping timeout)
[13:26:10] <kimundi> therefore as_imm and as_mut would make it clear that both return references, one & and &mut, while as_ref would be redunant because it reads as "return a reference to a reference"
[13:26:10] <engla> that uses "ref" and "ref mut"
[13:26:35] <kimundi> engla: exactly, it uses ref and ref mut, not ref an mut :P
[13:26:53] <engla> yes but we want to keep it short
[13:27:03] <kimundi> right, which as_imm and as_mut is
[13:27:05] <engla> we have .map_mut right now
[13:27:30] *** Joins: maik (maik@moz-64456714.dip0.t-ipconnect.de)
[13:28:12] <kimundi> the "mut" in "as_mut" is a different semantically use of the name "mut" than the one in a "to_ref_mut" is all I'm saying
[13:30:05] *** Joins: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP)
[13:30:07] <jorendorff> Seldaek: omg, rustdoc_ng
[13:30:12] <jorendorff> it is so good
[13:30:12] *** Joins: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP)
[13:30:16] <jorendorff> so so good
[13:30:45] *** Joins: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP)
[13:31:02] <kimundi> If you have two different method names that both return two different things, you can either name the methods in a way that puts the differences on even footing, or in a way that makes it clear that one is a modification of the other
[13:31:07] <Seldaek> jorendorff: glad you enjoy it
[13:31:23] *** Joins: AndroUser2 (androirc@moz-4357DC0E.wl.t.ulaval.ca)
[13:31:27] <jorendorff> "enjoy" does not convey my now total dependence on it
[13:31:32] <Seldaek> haha
[13:31:40] <kimundi> as_imm and as_mut is the former, to_ref and to_ref_mut is the latter. as_mut and as_imm is neither.
[13:31:50] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[13:31:56] <engla> kimundi: I think it's a compromise either way, which is what you have to do to have a short name
[13:32:43] <engla> this "imm" terminology is not used throughout rust, non-mutability is simply the default
[13:33:01] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[13:33:05] *** Quits: maik (maik@moz-64456714.dip0.t-ipconnect.de) (Ping timeout)
[13:33:18] *** Quits: AndroUser2 (androirc@moz-4357DC0E.wl.t.ulaval.ca) (Quit: AndroIRC - Android IRC Client ( http://www.androirc.com ))
[13:33:27] <kimundi> But it is no compromise! If you don't want to tack on a additional word for ref and ref_mut, use the other terminolgy that makes both even by concentrating on the imm and mut part.
[13:33:58] *** Joins: AndroUser2 (androirc@moz-4357DC0E.wl.t.ulaval.ca)
[13:34:13] <kimundi> engla: It being the default is why it's not refered to explicitly. That doesn't make it the wrong word though.
[13:34:23] *** Quits: AndroUser2 (androirc@moz-4357DC0E.wl.t.ulaval.ca) (Quit: AndroIRC - Android IRC Client ( http://www.androirc.com ))
[13:35:54] <kimundi> We use "mut" in two contexts: To modify a per-default immutable thing as mutable (let x/let mut x; &T, &mut T), and to talk about the difference in general: Immutable vs Mutable
[13:36:13] *** Joins: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net)
[13:36:39] <kimundi> If we want to call those methods in the "tack on a modifer" naming sheme, then fine: to_ref/to_ref_mut or as/as_mut
[13:36:52] <engla> .as_imm would effectively establish new terminology in the API. I'm sure I can get used to that. my inclination would be to have .as_ref, with ref meaning immutable by default, like other places
[13:37:04] *** Joins: pnkfelix (pnkfelix@A34AB32F.6B30872B.A515248C.IP)
[13:37:52] <Jesse> jorendorff: are you writing lots of rust nowadays?
[13:37:55] <Ms2ger> Servo uses _imm_ in places, fwiw
[13:38:04] <jorendorff> Jesse: no, a little here and there
[13:38:12] <kimundi> engla: Caan you at least agree with me that typing effort and api naming convention aside, as_mut and as_ref is inconsistent with each other?
[13:39:05] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[13:39:28] *** Joins: maik (maik@moz-64456714.dip0.t-ipconnect.de)
[13:39:47] <engla> I know what you mean, but I don't think so. we use short forms in all these alternatives
[13:40:26] <kimundi> I only know about "ref" vs "ref_mut" and "" vs "_mut"
[13:40:48] <kimundi> I don't know about any case where it's "_ref" vs "_mut"
[13:41:39] <bogen> strange, I can /query rusti (the bot) and it will interpret fine, but when I run the latest rusti from git I get an inter compiler error. "rusti> let a = 4; a"   produces: error: internal compiler error: node_id_to_type: no type for node `unknown node (id=-1)`  using   rust 0.8 (18e3bcd 2013-09-23 23:46:05 -0700) host: x86_64-unknown-linux-gnu
[13:41:57] <kimundi> bogen: rusti from git is different than risti here
[13:42:19] <kimundi> bogen: rusti here is rustc in form of a irc bot, rusti the executable is broken :)
[13:42:33] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[13:43:02] <Jesse> rusti: "botsnack";
[13:43:03] -rusti- ()
[13:43:09] <kimundi> haha
[13:43:27] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[13:43:48] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[13:44:34] *** jorendorff is now known as jorendorff_away
[13:44:35] <engla> () is clearly a wafer
[13:44:53] <bogen> kimundi: alright :) well, I knew rusti here is not broken, as I can carry on a conversation with it and it produces valid results.
[13:46:15] <kimundi> version.slice_to(5).iter().map(|c| match c { 'r' => 'y', 's' => 'm', 't' | 'c' => '!', c => c}).collect::<~str>()
[13:46:21] <kimundi> rusti: version.slice_to(5).iter().map(|c| match c { 'r' => 'y', 's' => 'm', 't' | 'c' => '!', c => c}).collect::<~str>()
[13:46:23] -rusti- ~"yum!!"
[13:49:53] *** Quits: thatfreakingguy (Mibbit@moz-4142E229.pool.mediaways.net) (Quit: http://www.mibbit.com ajax IRC Client)
[13:49:54] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[13:50:04] <dbaupp> kimundi: nice work :P
[13:52:48] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[13:58:04] <amatus> anyone know of a tool that will warn you about undefined behaviour in C?
[13:58:41] *** jorendorff_away is now known as jorendorff
[13:58:47] <kimundi> amatus: I guess depending on compiler there might be a few warnings you can turn on?
[13:59:03] <amatus> i think someone mentioned this a while back, or i might be remembering the wrong channel
[13:59:27] <amatus> i'm looking to catch things like oversized shifting, signed integer overflow, etc
[13:59:31] *** Joins: josedonizetti (josedonize@DF22210B.35D9DDB.8EF76F75.IP)
[13:59:36] <amatus> pretty much _any_ undefined behaviour
[13:59:39] <Ke> there is static analyzer in clang/llvm
[14:00:04] <Ke> also valgrind does that at runtime
[14:01:58] <Jesse> amatus: clang's -fsanitize=undefined ("UBSan") catches oversized shift and signed integer overflow. http://clang.llvm.org/docs/UsersManual.html#controlling-code-generation
[14:02:10] <Jesse> amatus: plus a dozen other things
[14:03:01] <sw17ch> amatus: if you're using clang, try turning on -Wall -Wextra and -Weverything
[14:03:09] *** Joins: tautologico (shung@7A53DAF8.92451A23.6EB699AE.IP)
[14:03:22] <sw17ch> amatus: it might find some of the undefined behavior, but not everything :(
[14:03:43] <kimundi> sw17ch: That reads really funny out of context :D
[14:04:02] <sw17ch> :)
[14:04:19] <Jesse> amatus: those are just the "cheap" undefined behavior checks. you have to use separate options if you want it to check for dangling pointers (ASan) or use of initialized memory (MSan)
[14:04:25] <sw17ch> I spend all day fighting C. I've found the best medicine to maintain my sanity is `clang` with the warnings cranked up as high as possible.
[14:04:36] <Jesse> "-Wall -Wextra and -Weverything" is a nice tounge-twister
[14:04:49] <sw17ch> "-Wall -Wextra -Weverything -Werror"
[14:04:52] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[14:05:14] <sw17ch> One of the best things in -Wextra is type checking across enums.
[14:05:38] <sw17ch> if you accidentally return one enum when the return type is another, it emits a warning. the first time i found that switch was a humbling experience.
[14:06:10] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[14:06:10] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/U9u7mw
[14:06:10] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[14:06:11] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[14:06:11] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Wm0ZHg
[14:06:11] <ghrust> 13rust/06auto 144aee7b2 15Simon Sapin: Do not imply that str is sometimes null-terminated.
[14:06:11] <ghrust> 13rust/06auto 14b6fe27c 15bors: auto merge of #9462 : SimonSapin/rust/patch-3, r=huonw
[14:06:12] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[14:06:15] <benh> -Weverything is a bit much in C++ code, isn't it :(
[14:06:43] <sw17ch> benh: i don't normally run with -Weverything on all the time.
[14:06:49] <sw17ch> i do use it to spot check occasionally
[14:06:49] <Ms2ger> The only warning I've found unhelpful is maybe-uninitialized
[14:06:58] <Ms2ger> Because it has a lot of false positives
[14:08:06] *** jorendorff is now known as jorendorff_away
[14:08:44] <maik> Can I embed rust in c++ atm?
[14:09:30] <SimonSapin> are we running a full build + test suite for documentation-only changes?
[14:09:54] <dbaupp> maik: you can embed C in C++, and Rust in C (mostly), so yes.
[14:09:58] <engla> I'm pretty sure every build + test is the same SimonSapin 
[14:10:02] <dbaupp> SimonSapin: yes
[14:10:34] <pnkfelix> to be fair, some of the tests are extracted from the documentation, and we want more of that in the future, right?
[14:10:38] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:10:39] <Jesse> sw17ch, kimundi: thanks for inspiring https://twitter.com/jruderman/status/382507311391985664
[14:11:08] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[14:11:17] <sw17ch> Jesse: hah, excellent. :)
[14:11:27] <maik> dbaupp, I am just curious because he said he needed zero.c https://github.com/doublec/rust-from-c-example 
[14:11:35] <maik> dbaupp, is this still up to date?
[14:13:05] <kimundi> Jesse: hehe
[14:13:14] <dbaupp> maik: not sure, but I think so
[14:13:38] <dbaupp> maik: (that is, rust libs always look for/require the two symbols in zero.c)
[14:14:08] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[14:16:15] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[14:18:46] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[14:18:51] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:22:01] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Client exited)
[14:23:12] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:23:50] <dbaupp> cmr: the history.txt includes a pile of commits left over from the last runs
[14:25:31] <dbaupp> cmr: other than that it seems to be working, although it's extremely peculiar that there doesn't appear to be anything august 10, and there doesn't appear to have been any recent update
[14:27:40] *** Quits: cdidd (cdidd@moz-BB91C0E0.broadband.corbina.ru) (Input/output error)
[14:30:31] <maik> dbaupp, does this mean I have to interface with c? -> embed rust in c -> compile a c lib -> link the c lib in c++?
[14:30:40] *** Joins: bt3ze (bt3ze@moz-3F0303DA.hsd1.va.comcast.net)
[14:30:56] <maik> dbaupp, I tried to embed rust directly into c++ but without any success atm 
[14:32:07] <dbaupp> maik: no idea, I've not even done rust in c, let alone rust in c++.
[14:32:48] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[14:33:33] *** Quits: bt3ze (bt3ze@moz-3F0303DA.hsd1.va.comcast.net) (Ping timeout)
[14:35:49] *** Quits: DasIch (dasich@moz-5EDA591.de) (Ping timeout)
[14:35:49] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Ping timeout)
[14:35:59] *** Quits: nkoep (nik@moz-E8568868.vpn.rwth-aachen.de) (Ping timeout)
[14:36:07] *** Quits: prudhvi (prudhvi@moz-154A460A.supr.io) (Ping timeout)
[14:36:10] *** Joins: nkoep (nik@moz-E8568868.vpn.rwth-aachen.de)
[14:36:11] *** Joins: prudhvi (prudhvi@moz-154A460A.supr.io)
[14:36:16] *** Quits: myname (myname@F6BC1CBC.2C5F047.A0197E77.IP) (Ping timeout)
[14:36:19] *** Joins: myname (myname@F6BC1CBC.2C5F047.A0197E77.IP)
[14:36:19] *** Quits: pcdummy (pcdummy@moz-CF4CA865.page4me.ch) (Ping timeout)
[14:36:19] *** Quits: decoder (quassel@moz-D7023D7D.own-hero.net) (Ping timeout)
[14:36:22] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[14:36:25] *** Joins: pcdummy (pcdummy@moz-CF4CA865.page4me.ch)
[14:36:43] *** jorendorff_away is now known as jorendorff
[14:36:54] *** Joins: DasIch (dasich@moz-5EDA591.de)
[14:37:34] *** Joins: decoder (quassel@moz-D7023D7D.own-hero.net)
[14:37:40] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:39:37] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[14:39:38] <cmr> dbaupp: oops, sorry about the history.txt
[14:39:48] <cmr> dbaupp: is it problematic for you or can I leave it?
[14:39:56] <cmr> (also, pong)
[14:39:58] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:41:44] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:41:48] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[14:41:58] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:42:24] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Ping timeout)
[14:42:59] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[14:43:06] *** Quits: pnkfelix (pnkfelix@A34AB32F.6B30872B.A515248C.IP) (Quit: Leaving.)
[14:44:17] *** Quits: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[14:44:30] *** Quits: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[14:45:09] *** Joins: pnkfelix (pnkfelix@A34AB32F.6B30872B.A515248C.IP)
[14:46:08] *** Quits: jaen (jaen@moz-AF4C1D.neoplus.adsl.tpnet.pl) (Ping timeout)
[14:46:26] *** Quits: nkoep (nik@moz-E8568868.vpn.rwth-aachen.de) (Ping timeout)
[14:47:24] *** Quits: jdm (jdm@CC0122E6.8F96AEA7.2D179A7D.IP) (Ping timeout)
[14:47:28] <dbaupp> cmr: it'd be useful to clear out the old ones
[14:47:37] *** Quits: pnkfelix (pnkfelix@A34AB32F.6B30872B.A515248C.IP) (Quit: Leaving.)
[14:48:15] <dbaupp> cmr: (i.e. I can't tell if something real is failing because the messages about those ones failing is confusing everything.)
[14:49:48] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[14:50:20] *** Quits: dave1629 (dave@15A3FE2B.75B49943.DDE5D3F6.IP) (Quit: dave1629)
[14:50:28] <dbaupp> cmr: 005c9bde45ba53b9039765a9ed549707973c15c4 is the first new one, afaik
[14:51:03] *** Joins: pnkfelix (pnkfelix@A34AB32F.6B30872B.A515248C.IP)
[14:51:43] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[14:52:05] <cmr> dbaupp: fixed
[14:52:22] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[14:52:46] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Connection reset by peer)
[14:52:51] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[14:53:15] <dbaupp> cmr: testing
[14:53:54] *** Joins: bt3ze (bt3ze@4EB70F1D.21C2548F.DDE5D3F6.IP)
[14:53:56] *** Joins: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP)
[14:54:11] *** Joins: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP)
[14:54:44] <dbaupp> cmr: ok, yup, appears to be fixed (have you paused the benches?)
[14:55:18] *** Quits: bt3ze (bt3ze@4EB70F1D.21C2548F.DDE5D3F6.IP) (Client exited)
[14:55:34] <cmr> dbaupp: yeah, I did overnight
[14:55:39] <cmr> it's going again
[14:56:47] *** Joins: bt3ze (bt3ze@4EB70F1D.21C2548F.DDE5D3F6.IP)
[14:57:05] <dbaupp> cmr: ok
[14:57:49] *** Quits: bt3ze (bt3ze@4EB70F1D.21C2548F.DDE5D3F6.IP) (Client exited)
[14:57:56] *** Joins: bt3ze (bt3ze@4EB70F1D.21C2548F.DDE5D3F6.IP)
[14:57:59] <dbaupp> rusti: mod foo { struct Foo { cmr: int } pub fn mk() -> Foo { Foo { cmr: 1 } } } foo::mk().cmr
[14:58:01] -rusti- 1
[14:58:11] *** Parts: bogen (dwight@moz-8B4E7E75.dsl.rcsntx.swbell.net) ()
[14:58:12] <sw17ch> It's scary when, while rooting through code that's been in production for 3 years, I find situations where memcpy has arguments in the wrong order, or memset uses junk for the third argument. C is just really really scary some times.
[14:58:31] <cmr> huh
[14:58:39] <cmr> sw17ch: heh
[14:59:08] <sw17ch> I think the worst ones are when sizeof keeps working when an array declaration moves to an extern and no one ever notices.
[14:59:18] <sw17ch> Except that the sizeof for that 'array' is now 4.
[14:59:43] <sw17ch> Speaking of, is there a comparable 'sizeof' concept in rust?
[14:59:59] <Ms2ger> Yes
[15:00:05] <engla> there is std::sys::size_of::<T>()
[15:00:13] <engla> it's a function syntactically 
[15:00:14] <Ms2ger> That's what I was thinking of :)
[15:00:41] <engla> rusti: std::sys::size_of::<Option<~int>>()
[15:00:42] -rusti- 8u
[15:01:09] <engla> 8 bytes for ~int represented as a pointer (non-nullable pointer in Option optimization)
[15:01:13] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[15:01:16] <dbaupp> engla: re https://github.com/mozilla/rust/pull/9429#issuecomment-25008505, I'm almost certain that Mut<T> must not be Freeze for any T
[15:01:28] <engla> Mut<T> is never Freeze
[15:01:36] <dbaupp> and that &T/@T/Rc<T> are Freeze only when T is Freeze too
[15:01:48] <engla> the question is about Rc<T>
[15:01:56] <engla> because Rc<T> is always Freeze
[15:02:01] <dbaupp> not it's not
[15:02:06] <engla> try it
[15:02:09] <engla> right now it is
[15:02:19] <sw17ch> Neat.
[15:02:37] <sw17ch> rusti: std::sys::size_of::<u32>()
[15:02:38] -rusti- 4u
[15:02:39] *** Quits: bt3ze (bt3ze@4EB70F1D.21C2548F.DDE5D3F6.IP) (Client exited)
[15:02:59] *** Joins: bt3ze (bt3ze@4EB70F1D.21C2548F.DDE5D3F6.IP)
[15:03:07] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[15:03:08] *** Parts: bt3ze (bt3ze@4EB70F1D.21C2548F.DDE5D3F6.IP) ()
[15:03:15] <dbaupp> rusti: use extra::rc::Rc; use std::cell::Cell; fn test_freeze<T: Freeze>(_: T) {}  test_freeze(Rc::from_send(Cell::new(1)))
[15:03:15] -rusti- ()
[15:03:17] <dbaupp> woah
[15:03:42] <dbaupp> that seems wrong
[15:03:42] <engla> rusti: use extra::rc::Rc; fn fr<T: Freeze>(_: T){}   fr(Rc::from_send(std::cell::Cell::new(1i)))
[15:03:43] -rusti- ()
[15:03:53] <engla> dbaupp: now you know what the question is about :-)
[15:03:54] *** Joins: cdidd (cdidd@moz-2E603ED9.broadband.corbina.ru)
[15:04:02] <engla> Mut<T> is marked #[no_freeze] always
[15:04:09] <dbaupp> engla: right
[15:04:52] <sw17ch> Is Freeze a new thing, or just not covered in the tutorial?
[15:04:56] *** Quits: maik (maik@moz-64456714.dip0.t-ipconnect.de) (Ping timeout)
[15:05:10] <engla> I don't know much about this dbaupp, but maybe there could be a use for the *T vs *mut T distinction here
[15:05:32] <engla> Rc<T> is  struct Rc<T> { inner: *mut RcBox<T> }
[15:05:58] <kimundi> sw17ch: Not well covered
[15:06:07] <kimundi> sw17ch: It also got renamed a few times
[15:06:10] <dbaupp> sw17ch: it's not new (and it is mentioned, http://static.rust-lang.org/doc/master/tutorial.html#traits a few paragraphs down)
[15:06:11] <engla> sw17ch: it's not tutorial material I guess
[15:06:33] <sw17ch> If I understand it, things with kind Freeze can safely be shared _everywhere_ yes?
[15:06:43] <dbaupp> no
[15:06:47] <kimundi> sw17ch: Not really
[15:06:52] <dbaupp> <T:Freeze> @T is Freeze
[15:06:55] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[15:07:14] <sw17ch> kimundi: by implementation or theoretically?
[15:07:15] <kimundi> sw17ch: Freeze just means that if you store the type in an immutable location, nothing of its data is immutable
[15:07:20] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:07:38] <kimundi> sw17ch: Which also means that most types implement Freeze automatically :)
[15:07:40] <dbaupp> engla: hm, this is weird (and surprises me a lot)
[15:08:03] <sw17ch> Wait, I think I'm misunderstanding: "nothing of its data is immutable". Did you mean "nothing of its data is mutable"?
[15:08:08] <dbaupp> sw17ch: (yes)
[15:08:14] <engla> dbaupp: raw pointers are simply encoded to have TC_NONE (type contents)
[15:08:20] <sw17ch> *phwew*
[15:08:30] <engla> I don't know much about this, I asked a bit yesterday to try to answer glehel's question
[15:08:49] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[15:08:50] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Client exited)
[15:08:53] <kimundi> sw17ch: But a few are still mutable in some sense even if put in an immutable location. Those need to be marked as not implementing Freeze, to prevent them from being used in situations where the inherint mutability could cause problemd
[15:08:53] *** Joins: bt3ze (bt3ze@4EB70F1D.21C2548F.DDE5D3F6.IP)
[15:08:59] *** Joins: maik (maik@moz-64456714.dip0.t-ipconnect.de)
[15:09:04] *** Quits: bt3ze (bt3ze@4EB70F1D.21C2548F.DDE5D3F6.IP) (Quit: bt3ze)
[15:09:10] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[15:09:17] <dbaupp> engla: neither do I, as me being wrong demonstrates :)
[15:09:52] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[15:09:59] <sw17ch> I'm probably hitting broken-record status here, but I'm trying to figure out if Rust would ever be able to share immutable data safely across many thread boundaries.
[15:10:11] <kimundi> sw17ch: It can
[15:10:26] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:10:28] <dbaupp> (currently can, that is)
[15:10:30] <sw17ch> kimundi: that's what i've come to understand, it just seems i'm missing some subtlety
[15:10:36] <kimundi> sw17ch: If a type fulfills Freeze, it will never mutate anything of it's content if put in immutable location
[15:10:39] <dbaupp> extra::arc::Arc does it now
[15:11:00] <kimundi> sw17ch: And thus a type that fulfils Freeze can be safely shared between tasks if exposed as an immutable handle
[15:11:05] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Ping timeout)
[15:11:31] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Ping timeout)
[15:12:13] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[15:12:37] <kimundi> rusti: fn foo<T: Freeze>(_:T){}; foo(@mut 5u);
[15:12:38] -rusti- <anon>:7:35: 7:38 error: instantiating a type parameter with an incompatible type `@mut uint`, which does not fulfill `Freeze`
[15:12:38] -rusti- <anon>:7          fn foo<T: Freeze>(_:T){}; foo(@mut 5u);
[15:12:38] -rusti-                                             ^~~
[15:12:38] -rusti- error: aborting due to previous error
[15:12:38] -rusti- application terminated with error code 101
[15:13:10] <sw17ch> What's the downside to an Arc?
[15:13:22] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[15:13:23] <kimundi> sw17ch: ^ A @mut for example is a type that contains mutable data, as it starts it's own ownership tree
[15:13:25] <sw17ch> Maybe that's the part that's bugging me: it doesn't seem like it should be an expensive thing, but I've seen Arc's derided.
[15:13:30] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[15:13:44] <dbaupp> sw17ch: Arc == atomically reference counted
[15:13:44] *** Quits: osa1 (uid13910@moz-5F4AA75A.irccloud.com) (Quit: )
[15:13:49] <kimundi> sw17ch: Well RWArc is more expensive than Arc is more expensive than Rc
[15:13:51] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:14:03] <dbaupp> so there's the synchronisation penalty whenever you clone an Arc.
[15:14:24] <kimundi> sw17ch: I think C++ shared_ptr are the same as our ARC in that tey need to do atomic refcounting
[15:14:25] <dbaupp> but other than that, I don't think there's much overhead
[15:14:28] <engla> shouldn't Arc be in libst?
[15:14:32] <sw17ch> dbaupp, kimundi: in the example from the docs (http://static.rust-lang.org/doc/master/extra/arc/index.html), that seems like a relatively efficient operation. the reference counts only have to be touched at the start and upon task completion, yes?
[15:14:43] <dbaupp> engla: I don't think the boundaries are well defined yet
[15:14:48] <sw17ch> There's not an implicit interaction with the reference count when local_numbers is touched, right?
[15:15:07] <dbaupp> sw17ch: as I understand it, yes
[15:15:15] <kimundi> sw17ch: The ref counts only get touched if you clone an existing Arc, or if an existing arc gets destroyed
[15:15:21] *** Quits: tautologico (shung@7A53DAF8.92451A23.6EB699AE.IP) (Quit: tautologico)
[15:15:26] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[15:15:31] <sw17ch> kimundi: but that's hardly a serious constraint, right?
[15:15:42] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[15:15:45] <kimundi> which also includes the end of an task
[15:15:46] <sw17ch> It's a cheap operation if one is dealing with a large vector, for example.
[15:15:54] <dbaupp> presumably yes
[15:15:57] <kimundi> sw17ch: It appears to me like that, yeah
[15:16:10] <sw17ch> Okay. Thank you.
[15:16:43] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[15:17:20] <kimundi> sw17ch: Interestingly, I also had the same train if thought last week: "Wait, everything I read about Arc lead me to believe that it is horrible slow, but actually looking at it... Doesn't seem that way? What?"
[15:17:39] *** Joins: tautologico (shung@7A53DAF8.92451A23.6EB699AE.IP)
[15:17:56] *** Quits: maik (maik@moz-64456714.dip0.t-ipconnect.de) (Ping timeout)
[15:18:29] <sw17ch> kimundi: right. this is what i'm coming away with. i'm writing a simulation (for fun) that has embarassingly-parallel components to it
[15:18:37] <sw17ch> but only if one can share a large buffer
[15:19:10] <kimundi> yeah, that'S definitly what arc is meant for
[15:19:27] <engla> the UnsafeArc destructor seems expensive
[15:19:35] <sw17ch> I can see Arcs being horrid and slow when compared to, say, channels, when dealing with small types. But large values?
[15:20:07] <dbaupp> engla: that presumably only runs once though?
[15:20:30] *** Joins: wakandan (Mibbit@5B9B91CA.8FF05F7.4605F140.IP)
[15:20:32] <sw17ch> This conversation seems to put at rest the concerns raised here: http://bartoszmilewski.com/2013/09/19/edward-chands/#comment-4032
[15:20:37] <dbaupp> sw17ch: (channels are actually fairly slow: they allocate a box for each message)
[15:20:47] <sw17ch> (which, otherwise, is a very very good post)
[15:20:50] <engla> yeah, the expensive part only seems to run once
[15:21:07] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:21:09] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[15:21:09] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/Wm0ZHg
[15:21:09] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[15:21:14] <sw17ch> And then amortization kicks in and it doesn't matter.
[15:21:42] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[15:25:04] *** Quits: skade (skade@moz-DA43A266.hsi.kabel-badenwuerttemberg.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[15:26:05] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[15:26:05] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/kCvFRQ
[15:26:05] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[15:26:07] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[15:26:07] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/e0QJuQ
[15:26:07] <ghrust> 13rust/06auto 140e95c34 15Felix S. Klock II: Part of #7081: Fold remainder of typeck's visit env into their visitor structs.
[15:26:07] <ghrust> 13rust/06auto 147535479 15bors: auto merge of #9463 : pnkfelix/rust/fsk-syntax-visit-refactor-rest-of-typeck, r=huonw...
[15:26:08] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[15:26:52] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[15:28:30] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[15:28:34] <engla> dbaupp: nice job on the raytracer
[15:29:17] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:29:37] <dbaupp> engla: thanks :)
[15:29:50] * dbaupp made so many stupid mistakes while porting it :S
[15:30:42] *** Joins: riley (riley@8BA43816.9AA11D69.65DDFA89.IP)
[15:30:46] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[15:30:58] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[15:32:08] <bjz> dbaupp: now you have to fit it on a bussiness card
[15:33:03] * dbaupp reduces the fontsize in his editor
[15:33:05] <dbaupp> easy!
[15:33:36] <engla> just print a bigger card
[15:33:37] <bjz> dbaupp: https://gist.github.com/bjz/380b450ef2d8f4ce4276
[15:34:12] <dbaupp> bjz: s/add/a/ etc :P
[15:34:31] *** Quits: StarLight (StarLight@moz-8AA8C953.pppoe.avangarddsl.ru) (Ping timeout)
[15:36:42] <bjz> dbaupp: I had this: use std::rand::*;let mut wr=weak_rng();let rg=||wr.gen::<F>(); rg()
[15:37:37] <dbaupp> bjz: haha nice
[15:37:45] <bjz> :)
[15:37:49] <dbaupp> (are you doing actual business card port?)
[15:37:58] <bjz> I was
[15:38:00] *** Joins: StarLight (StarLight@moz-D403F843.dynamic.avangarddsl.ru)
[15:38:01] <bjz> :)
[15:38:04] <sw17ch> Woa. The `fn V(â€¦` is new to me.
[15:38:12] <sw17ch> Is that a specialized constructor?
[15:38:16] <bjz> sw17ch: no
[15:38:16] <sw17ch> bjz ^^
[15:38:29] <sw17ch> (as is how V{V{ â€¦ }} works)
[15:38:30] <dbaupp> no, it's just a function that happens to have the same name as the struct
[15:38:34] <kimundi> What are you playing, "how to eliminate ass much white space as possible"? :P
[15:38:35] <bjz> sw17ch: just a function - they occupy different namespaces
[15:38:36] <sw17ch> oh, separate namespaces?
[15:38:40] <sw17ch> neat.
[15:38:53] <dbaupp> that's just ( ... ) -> V { V{x:,y:,z:} }
[15:38:55] <bjz> dbaupp: maybe I will port yours
[15:39:07] <bjz> dbaupp: to tinyville
[15:39:12] <kimundi> sw17ch: Also confusing. I'm having a personal vendetta for forbidding that :P
[15:39:15] <dbaupp> sw17ch: i.e. the first V is part of the function signature (the return value)
[15:39:18] <sw17ch> I'm not entirely clear what's going on in the right-hand side.
[15:39:19] <dbaupp> bjz: haha
[15:39:23] <sw17ch> oh my
[15:39:26] <sw17ch> hah
[15:39:31] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:39:43] <sw17ch> IORCC
[15:39:56] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[15:40:01] <sw17ch> It makes perfect sense now. thanks all.
[15:40:51] <kimundi> rusti: struct Foo(uint, uint); Foo(1,2)
[15:40:52] -rusti- main::Foo(1u, 2u)
[15:40:55] <kimundi> rusti: struct Foo(uint, uint); Foo
[15:40:56] -rusti- fn(uint, uint) -> main::Foo
[15:41:25] <engla> rusti: struct Foo(~fn() -> int);  do Foo || { 1 }
[15:41:26] -rusti- main::Foo(fn() -> int)
[15:41:30] <engla> cool right?
[15:41:50] * kimundi screams
[15:42:27] *** Quits: tautologico (shung@7A53DAF8.92451A23.6EB699AE.IP) (Quit: tautologico)
[15:42:39] <kimundi> rusti: struct Foo(~fn() -> int); do Foo { 1 } // <- RustWTF
[15:42:40] -rusti- main::Foo(fn() -> int)
[15:42:50] <dbaupp> kimundi: why?
[15:42:51] <engla> oh yeah the || are redundant
[15:42:57] <engla> thanks
[15:43:04] <dbaupp> (haskell does exactly the same thing with data constructors being functinos)
[15:43:15] <kimundi> dbaupp: In haskell everything is a function
[15:43:22] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[15:43:22] *** ChanServ sets mode: +o jdm
[15:43:31] <engla> rusti: range(0, 5).map(Some).to_owned_vec()
[15:43:31] -rusti- ~[Some(0), Some(1), Some(2), Some(3), Some(4)]
[15:43:41] <dbaupp> kimundi: except not actually :P
[15:44:07] <kimundi> dbaupp: In my eyes, even though they are syntactical similar, both Foo(a,b) and Foo{ a: a, b: b} should be treaded the same way: As struct constructor only.
[15:44:18] <kimundi> similar to functions*
[15:44:20] * dbaupp disagrees
[15:44:32] * sw17ch attempts to parse all that
[15:45:56] <kimundi> struct A; let a = A; struct B(uint); let b = b(4); struct C(uint, uint); let c = C(1,2); struct D{ e: uint}; let d = D { e: 3 }; (a,b,c,d)
[15:46:27] <kimundi> rusti: struct A; let a = A; struct B(uint); let b = B(4); struct C(uint, uint); let c = C(1,2); struct D{ e: uint}; let d = D { e: 3 }; (a,b,c,d)
[15:46:28] -rusti- (main::A, main::B(4u), main::C(1u, 2u), main::D{e: 3u})
[15:46:38] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[15:47:07] <kimundi> They all get treaded identical in type, construction, and representation after construction
[15:47:40] <engla> one of them doesn't work cross crate :X
[15:48:09] <dbaupp> all of those ones do, don't they?
[15:48:17] <dbaupp> (I thought it was only generic ones?)
[15:48:22] <engla> oh
[15:48:25] <engla> maybe that
[15:48:26] <kimundi> To have the part of them that uses anonymous fields also be callable seems like a unnecessary feature imo.
[15:49:21] <Jesse> what does "struct A;" mean? no fields, zero size?
[15:49:25] <kimundi> Jesse: yes
[15:49:29] <dbaupp> Jesse: both
[15:49:34] <engla> it's still useful
[15:49:48] <kimundi> rusti: std::sys::size_of::<()>()
[15:49:49] -rusti- 0u
[15:50:37] <kimundi> engla: If you want to construct a struct with a function call, write/derive a fn new() is what I'm saying
[15:50:44] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[15:51:02] <engla> hm that works too
[15:51:28] <engla> I have   do Parse::new |state|  { .. }    because it couldn't be a newtype due to the x-crate bug
[15:51:30] *** Joins: skoizza (Mibbit@20DF850A.6106F5AE.B7830B68.IP)
[15:51:51] <kimundi> Imo, anything that makes structs with anonymous positional fields and named fields behave differently is a misfeature.
[15:51:53] <engla> Some(x) does look like a function though
[15:52:11] <dbaupp> kimundi: the parser makes them behave differently?
[15:52:28] <kimundi> dbaupp: No, that would be impossible
[15:52:37] <kimundi> dbaupp: They can still be implemented as function calls
[15:53:02] <engla> some cleanup around the intersection of enum and struct would be interesting
[15:53:22] <kimundi> But you shouldn't be able to do anything else than directly call them as TYPENAME(...)
[15:53:48] <engla> Maybe it should be more consistent
[15:54:00] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[15:54:07] <engla> yes, does `Some` have to exist as a function? the compiler could just construct the type when it sees Some(x)
[15:54:34] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[15:54:45] <engla> it's a bit confusing, because None is not a function (but it doesn't look like a function call either)
[15:54:49] <kimundi> rusti: struct Foo{ a: uint, b: uint }; fn Foo(a: uint, b: uint) -> Foo { Foo{ a: a, b: b } }; Foo(1, 2)
[15:54:50] -rusti- main::Foo{a: 1u, b: 2u}
[15:56:15] <kimundi> ^ Stuff like that is why I think making the distinction consistent and then forbid declarations to share the same name if they collide in any namespace is important.
[15:56:29] <sw17ch> Hmmm, Phantom types.
[15:56:45] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[15:56:58] <sw17ch> struct A; struct B<T> { a: int, b: int };
[15:56:58] <dbaupp> kimundi: I'd almost argue that Some(x) not just being a function call would be weird (because it looks like one), but, aiui, actually being a function call makes the optimiser sad sometimes
[15:57:11] <kimundi> You should be able, based on convention and language knowledge, to see that  Foo(a, b) is not conceptually a function but an type constructor
[15:57:26] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[15:57:37] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[15:57:37] *** ChanServ sets mode: +ao dherman dherman
[15:58:50] <kimundi> dbaupp: I mean, I'm not against forbidding struct foo(a,b) or fn Foo(a,b), but the compiler should ensure that it doesn't get more confusing than that
[15:59:00] <dbaupp> kimundi: right
[15:59:18] * dbaupp wants to forbid both of those
[15:59:54] <kimundi> I mean, say someone writes code based on the assumption that the type constructor can be used as an function call, and you change it to use named fields.
[15:59:59] <engla> I suppose if there was a clean way to unify enum and struct without overlap, it would already be there 
[16:00:00] <dbaupp> (well, I'd like us to have a strong convention against them, preferably compiler enforced, but that's probably too much to ask for)
[16:00:19] <engla> dbaupp: forbid which? struct Foo(int,int) ?
[16:00:22] <dbaupp> engla: that's not a valid conclusion about rustc
[16:00:33] <kimundi> The code of the person doing that would break, which would not be possible if it would be forbidden to being with and/or a fn new() provided for that
[16:00:42] <dbaupp> engla: type_like_this, FunctionsLikeThis
[16:00:44] <engla> rust has been through so many iterations already
[16:00:49] <sw17ch> In a private session with rusti, i got a compiler error. Repeating the same statement fails to reproduce it.
[16:00:49] <engla> oh, so the names
[16:00:58] <sw17ch> And it claims to be a bug.
[16:01:05] <kimundi> engla: The decision has actaully ben mad to _not_ do that
[16:01:07] <dbaupp> engla: I believe the internal representations of struct and enum are weirdly separate, at least.
[16:01:45] <kimundi> engla: Theoretically, nothing would speak against it, except that struct and enum is more familiar for C/C++ developers, which is why they are called that way.
[16:02:02] *** Quits: echristo (echristo@1943E90B.70F558CB.4065847B.IP) (Quit: echristo)
[16:02:07] <sw17ch> https://gist.github.com/sw17ch/dfef498b97e524977ca4
[16:02:10] <engla> I don't care what they are called :)
[16:02:35] <engla> sw17ch: it's a bug unrelated to your code
[16:02:54] <dbaupp> Haskellers (semi) often suggest merging struct and enum (like Haskell just has `data` for both)
[16:02:59] <sw17ch> Is that something known? Unknown? Something I can do to help narrow it down?
[16:03:18] <dbaupp> sw17ch: `rustc -v` occasionally crashes like that
[16:03:22] <engla> yeah dbaupp, something like that. Because   struct A(int)  and enum Foo { A(int) }  seem to overlap
[16:03:36] <dbaupp> engla: yes
[16:04:36] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[16:04:36] *** Joins: RMF (RMF@moz-F6CF4762.dsl.telepac.pt)
[16:04:37] *** Quits: RMF (RMF@moz-F6CF4762.dsl.telepac.pt) (Quit: RMF)
[16:05:19] *** Quits: SteveMcQwark (steven099@moz-7CFCF343.cpe.net.cable.rogers.com) (Ping timeout)
[16:06:00] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[16:06:09] <dbaupp> sw17ch: https://github.com/mozilla/rust/issues/8870 btw
[16:06:32] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[16:07:51] <bjz> dbaupp: how do you convert ppm->png?
[16:08:17] <dbaupp> bjz: imagemagick has the `convert` command-line tool
[16:08:19] *** Joins: SteveMcQwark (steven099@moz-7CFCF343.cpe.net.cable.rogers.com)
[16:08:20] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[16:08:24] <bjz> ha
[16:08:36] <dbaupp> `convert foo.ppm foo.png`
[16:09:15] <bjz> awesome!
[16:09:18] <bjz> cheers
[16:09:37] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:09:55] <bstrie> dbaupp: did you ever investigate why your card-trace thing is slower than clang?
[16:09:59] *** Joins: andrew-__ (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net)
[16:10:04] * bstrie struggles to remember if dbaupp is huonw
[16:10:09] * dbaupp is huonw
[16:10:30] * pnkfelix i'm spartacus
[16:10:37] <dbaupp> bstrie: not yet (it's only existed for 2 hours, so "ever" is a bit optimistic :P )
[16:10:40] * bstrie I'm pnkfelix
[16:10:50] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[16:10:55] * kimundi is THE LAW!!
[16:11:19] *** Quits: sk (sk@88FB4160.751D8A43.78DD174B.IP) (Ping timeout)
[16:11:45] <dbaupp> bstrie: well, I glanced at what `perf` told be for the rust vs the clang-c++, and the clang one had more things with `sse` in the name than the rust did
[16:12:24] <bstrie> is that a simd thing?
[16:12:24] <dbaupp> bstrie: a lot more time was spent in sqrt and ceil in the rust than the C++
[16:12:32] <dbaupp> yeah, something like that
[16:12:51] <dbaupp> (I don't know if it was actually being used as simd for this task though.)
[16:13:15] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[16:13:16] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[16:13:17] *** Joins: aeqwa (aeqwa@moz-FD46AEA9.dsl.tropolys.de)
[16:13:23] <bstrie> did I hear correctly that we're automatically doing simd vectorization now, or something? is that even a coherent sentence?
[16:14:06] <dbaupp> well, our iterator loops are now designed to fit exactly the pattern that LLVM looks for when it tries to vectorise things, so it's happening more offten
[16:14:09] <dbaupp> *often
[16:14:15] <dbaupp> (I think)
[16:15:26] *** Joins: miza (miza@moz-908EA8DE.home.otenet.gr)
[16:16:16] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[16:16:20] <engla> yes, that's for the vec iterator
[16:16:28] <engla> not sure about other things
[16:16:51] <bjz> dbaupp: can you think of a more concise way to do std::io::stdout().write([p.x as u8, p.y as u8, p.z as u8]);
[16:17:11] <dbaupp> I imagine it may vectorise range(), but it's unlikely to any of the really fancy ones (but I don't know)
[16:17:19] <dbaupp> bjz: nope, that's why it's still there :P
[16:17:27] <bjz> heh
[16:17:55] <engla> dbaupp: I posted your ray tracer to /r/rust. remember me when you are famous
[16:18:24] <dbaupp> engla: I noticed
[16:18:49] * dbaupp refrained from upvoting, he's not *that* desperate for recognition... yet.
[16:18:56] <engla> hehe
[16:19:23] *** Joins: hoverbear (andrew@moz-9DF83711.wireless.uvic.ca)
[16:19:36] <wakandan> hi dbaupp engla 
[16:19:48] <engla> hi
[16:19:55] <wakandan> I got let head = Option<~Node>
[16:20:07] <wakandan> struct Node {  	value: uint,  	//make sure that  	next: Option<~Node>  }
[16:20:31] <wakandan> how do I get the "next" from head?
[16:20:31] *** Joins: sk (sk@DA137125.E993C7C3.78DD174B.IP)
[16:20:35] *** Quits: skoizza (Mibbit@20DF850A.6106F5AE.B7830B68.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:20:35] <wakandan> i can do it with pattern matching 
[16:20:39] <wakandan> but it a bit too much 
[16:21:02] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[16:21:24] <wakandan> is rust-lang down?
[16:21:42] <wakandan> or my connection is slow - I can't seem to be able to go to rust-lang
[16:21:57] <benh> rust-lang.org? works for me
[16:22:31] <wakandan> :(
[16:22:47] <bstrie> wakandan: you must be pure of heart to visit rust-lang.org
[16:24:38] <bstrie> pnkfelix: http://www.reddit.com/r/rust/comments/1mzmrh/question_about_rust_traits_and_implementations/cce3xdd I have no idea what that second bullet point is saying. can you give an example?
[16:25:27] <pnkfelix> bstrie: which part, the fact that two traits can have methods with the same name?
[16:25:31] <bstrie> yeah
[16:25:33] <bstrie> that's news to me
[16:25:35] <bstrie> or rather
[16:25:44] <bstrie> that a single type can implement two traits with methods with the same name
[16:25:50] <pnkfelix> bstrie: look at chris-morgan's example
[16:25:58] <pnkfelix> bstrie: ah yes, the latter is true too
[16:26:02] <pnkfelix> I'll show you
[16:27:36] *** Quits: andrew-__ (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net) (Input/output error)
[16:27:39] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[16:27:57] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[16:28:53] <wakandan> bstrie: in the sense I haven't "felt" rust yet, yes
[16:28:55] <engla> wakandan: match head.next { Some(~ref mut node) => (), None => () }     to get a &mut Node 
[16:29:35] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[16:29:53] <wakandan> engla: why is there's "ref" there?
[16:29:59] <wakandan> I saw it somewhere but didn't get it
[16:30:08] <pnkfelix> bstrie: https://gist.github.com/pnkfelix/6687373
[16:30:45] <pnkfelix> bstrie: *this* is what having `impl Trait for Type` buys you.  Among other things.
[16:30:51] <engla> wakandan: it's used to pick out a borrowed pointer through pattern matching
[16:31:01] <wakandan> hmm
[16:31:07] <engla> wakandan:  match 1 {  ref x =>  /* x is a &int */ }
[16:31:24] <wakandan> oh 
[16:31:27] <wakandan> ok nice
[16:31:45] <wakandan> engla: thanks
[16:31:52] *** Quits: wakandan (Mibbit@5B9B91CA.8FF05F7.4605F140.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:32:04] *** Quits: hoverbear (andrew@moz-9DF83711.wireless.uvic.ca) (Quit: hoverbear)
[16:32:41] *** Joins: dave1629 (dave@DBB4C946.C422786F.DDE5D3F6.IP)
[16:32:59] *** Quits: Ralith (ralith@moz-36466B9F.customer.broadstripe.net) (Ping timeout)
[16:33:59] *** Joins: bt3ze (bt3ze@moz-3F0303DA.hsd1.va.comcast.net)
[16:34:38] *** jorendorff is now known as jorendorff_away
[16:35:19] *** Joins: Palmik (palmik@moz-11EA685D.pks.muni.cz)
[16:35:33] *** jorendorff_away is now known as jorendorff
[16:36:12] *** Quits: wilsonk-laptop (kvirc@moz-8E86F35A.cg.shawcable.net) (Connection reset by peer)
[16:36:27] *** Joins: wilsonk-laptop (kvirc@moz-8E86F35A.cg.shawcable.net)
[16:36:49] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[16:36:49] *** ChanServ sets mode: +ao pcwalton pcwalton
[16:37:09] *** Quits: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca) (Quit: canhtak)
[16:37:37] *** Joins: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca)
[16:38:09] <pnkfelix> bstrie: in that example, if you try to call `c.name()` from `main`, you get a "multiple applicable methods in scope" error.  There are a couple ways around it, but we might need to put in something cleaner there.  Or maybe its okay to just have to put in a couple inner `fn` items when you need them.
[16:38:17] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[16:38:56] *** Joins: aeqwa_ (aeqwa@moz-DEA35250.dsl.tropolys.de)
[16:39:22] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[16:39:29] *** Quits: GregorR (Gregor@moz-D9651910.so) (Quit: Coyote finally caught me)
[16:39:31] *** Quits: aeqwa (aeqwa@moz-FD46AEA9.dsl.tropolys.de) (Ping timeout)
[16:39:34] <engla> there is a third name possible, inside impl Concrete
[16:39:43] *** Joins: GregorR (Gregor@moz-D9651910.so)
[16:39:43] <engla> and both the trait impls can refer to it
[16:40:35] *** Joins: six600110_ (six600110@moz-2FA48202.neo.res.rr.com)
[16:40:36] <pnkfelix> engla: is that right, that wouldn't collide with the `name` field decl?  Let's see....
[16:40:39] *** Quits: six600110_ (six600110@moz-2FA48202.neo.res.rr.com) (Connection reset by peer)
[16:40:43] *** Joins: echristo (echristo@4241698A.2E4FD3DD.225F4543.IP)
[16:41:11] <engla> like this https://gist.github.com/anonymous/cf9ee1593b48dcf7d522
[16:41:11] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[16:41:11] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/e0QJuQ
[16:41:11] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[16:41:20] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:41:58] <pnkfelix> engla: yes I see, just surprised.
[16:42:29] <engla> oh right there are four names, the fourth being the struct member
[16:42:44] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[16:42:48] <pnkfelix> engla: yeah, check it out: https://gist.github.com/pnkfelix/6687373
[16:43:06] <pnkfelix> I did not realize that one could overload `c.name` and `c.name()` like that.
[16:43:18] <pnkfelix> I wonder what happens if I change the field to itself be a function...
[16:43:21] <pcwalton> pnkfelix: you used to not be able to
[16:43:26] <pcwalton> but nmatsakis made that change
[16:43:28] *** Quits: echristo (echristo@4241698A.2E4FD3DD.225F4543.IP) (Ping timeout)
[16:43:37] <engla> pnkfelix: you have to use  (c.f)() to call a field `f`
[16:43:39] <pcwalton> if you change the field to be a function it will not change -- remember that methods are syntactically distinguished
[16:43:40] <pcwalton> (c.f)
[16:43:46] <pnkfelix> ah, thanks you two
[16:44:39] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[16:45:22] *** Quits: GregorR (Gregor@moz-D9651910.so) (Quit: Coyote finally caught me)
[16:45:34] *** Joins: GregorR (Gregor@moz-D9651910.so)
[16:46:17] <mark_edward> doomlord_: ping
[16:46:45] *** Joins: hoverbear (andrew@moz-9DF83711.wireless.uvic.ca)
[16:47:03] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[16:47:20] <kmc> I'll miss the Rust meeting today due to BlinkOn :/
[16:47:24] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[16:47:34] *** Joins: skade (skade@moz-71798184.web.vodafone.de)
[16:47:56] *** Quits: Ferreus (ferreus@moz-E7C43FE8.dyn.telefonica.de) (Ping timeout)
[16:48:32] <jorendorff> this may be a wrong question but
[16:49:32] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Client exited)
[16:49:53] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[16:50:08] <jorendorff> when calling a function with type params, can Rust infer a lifetime connecting two param types?   like fn<T, U>    can rust ever infer that T='a str and U=&'a str?
[16:50:22] *** Joins: bt3ze_ (bt3ze@moz-3F0303DA.hsd1.va.comcast.net)
[16:50:25] *** Quits: bt3ze (bt3ze@moz-3F0303DA.hsd1.va.comcast.net) (Ping timeout)
[16:51:05] *** Quits: bt3ze_ (bt3ze@moz-3F0303DA.hsd1.va.comcast.net) (Quit: Leaving)
[16:52:19] <bstrie> pnkfelix: ah I see. I suspected that was what you were saying, but wasn't sure if you were implying that it was somehow possible to do c.name() in that scenario
[16:52:44] <jorendorff> complete example of what i mean: https://gist.github.com/anonymous/2575dbe00eea02de567a
[16:52:48] <doomlord_> mark_edward,  hi
[16:52:53] <jorendorff> that doesn't type-check, not sure how to fix it
[16:53:03] <olsonjeffery> are there any rustpkg examples that show lib.rs re-exporting local modules?
[16:53:12] <steveklabnik> hmmmm
[16:54:01] <bstrie> pnkfelix: though that virtual dispatch example is neat
[16:54:13] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[16:55:02] <bstrie> jorendorff: did you try putting 'a on all the borrowed pointers in the signature of map?
[16:55:19] <bstrie> other than that I don't know
[16:55:31] <engla> jorendorff: pairref_to_refpair should be possible, is that the part that doesn't typecheck?
[16:56:09] <jorendorff> engla: that part seems to work; it's that in combination with map that doesn't work --- "cannot infer an appropriate lifetime"
[16:56:49] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[16:57:34] <jorendorff> bstrie: omg that worked! now i am really confused though
[16:57:49] *** Joins: Florob (Florob@moz-39532932.de)
[16:57:50] *** Quits: pnkfelix (pnkfelix@A34AB32F.6B30872B.A515248C.IP) (Quit: Leaving.)
[16:58:04] <jorendorff> bstrie: what does rust assume if I *don't* put 'a on both T-references?
[16:58:09] *** Quits: skade (skade@moz-71798184.web.vodafone.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[16:58:14] <olsonjeffery> steveklabnik: im trying to follow conventions for mod.rs as shown in libstd, but doing it in lib.rs just causes errors (can't resolve `pub use self::foo;`) and putting it in a mod.rs builds.. but then the symbols aren't there when called from `extern mod foo;use foo;`
[16:58:33] <steveklabnik> olsonjeffery: yeah, i'm still a bit fuzzy on all of that
[16:58:52] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[16:58:53] <steveklabnik> i bet tjc would know
[16:59:04] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[16:59:21] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[16:59:27] <steveklabnik> i don't have time to play around with it myself right this moment, but maybe they'll be on later
[16:59:38] <steveklabnik> i might have time later too :)
[16:59:45] <steveklabnik> this should be documented
[17:00:12] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[17:00:27] <engla> jorendorff:   fn map<'a, T, U>(f: &fn(&'a T) -> U, seq: &'a [T])    this does correspond to what you're doing, taking references out of the `seq` slice
[17:00:29] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[17:00:35] <engla> jorendorff: so it should make sense I guess?
[17:00:52] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[17:00:59] *** Joins: pnkfelix (pnkfelix@A34AB32F.6B30872B.A515248C.IP)
[17:01:22] <jorendorff> engla: That does make sense, thanks. But what does rust assume about the lifetimes if I don't explicitly mark them in the type-signature as being the same?
[17:01:32] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[17:01:32] *** ChanServ sets mode: +o tjc
[17:01:35] <jorendorff> I want to know when I can safely omit them.
[17:01:44] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:02:15] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[17:02:15] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:02:24] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:02:24] *** ChanServ sets mode: +ao brson brson
[17:02:25] <engla> I think they just get a region that's valid for the duration of the function
[17:02:34] <jorendorff> ahhh that totally makes sense
[17:02:56] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Ping timeout)
[17:03:10] <engla> yes, and you need more here, because in the parameter U you return &str
[17:03:53] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[17:05:38] *** Joins: aeqwa (aeqwa@moz-30A6CC5A.dsl.tropolys.de)
[17:05:46] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:06:10] *** Quits: aeqwa_ (aeqwa@moz-DEA35250.dsl.tropolys.de) (Ping timeout)
[17:06:31] *** Joins: skade (skade@moz-3B46D638.dip0.t-ipconnect.de)
[17:06:44] *** Joins: maik (maik@moz-64456714.dip0.t-ipconnect.de)
[17:07:29] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[17:08:07] *** Joins: Ferreus (ferreus@moz-E7C43FE8.dyn.telefonica.de)
[17:08:31] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[17:09:51] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:11:10] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[17:12:30] *** Joins: vk (chatzilla@moz-F049D154.lightspeed.sntcca.sbcglobal.net)
[17:13:18] <joelteon> where did util::unreachable go?
[17:13:20] <joelteon> is it a macro now?
[17:14:02] <benh> i heard so
[17:14:19] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[17:14:31] *** Quits: vk (chatzilla@moz-F049D154.lightspeed.sntcca.sbcglobal.net) (Ping timeout)
[17:15:11] <joelteon> and where did str::from_bytes go
[17:15:35] <kmc> it's from_utf8 now
[17:15:49] *** Joins: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:15:56] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:16:51] *** Quits: hoverbear (andrew@moz-9DF83711.wireless.uvic.ca) (Quit: hoverbear)
[17:17:09] <engla> will there ever be a point where you can hoist up the fail!() a level (so that a fail!() in Option::unwrap() shows the caller location)
[17:17:54] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Ping timeout)
[17:18:03] <kimundi> engla: We need support fro stack traces in case of fail! in gneral, that would solve that problem
[17:18:05] <kmc> should be possible for fail!() to produce a stack backtrace
[17:18:06] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:18:40] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[17:19:09] <joelteon> and there's still no comm adapters for sockets, right?
[17:21:38] *** Quits: GregorR (Gregor@moz-D9651910.so) (Quit: Coyote finally caught me)
[17:21:49] <kmc> don't know anything about that
[17:21:51] *** Joins: GregorR (Gregor@moz-D9651910.so)
[17:23:40] <joelteon> yeah, all the methods are still fail!()
[17:23:43] <joelteon> ok
[17:24:05] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[17:24:17] *** Joins: hoverbear (andrew@moz-9DF83711.wireless.uvic.ca)
[17:27:08] <Yurume> rusti: struct A { x:~str, y:~str } impl A { fn f(&mut self) -> ~str { let x=self.x; let y=self.y; self.x=~"a"; self.y=~"b"; x+y } } let mut a = A{x:~"p",y:~"q"}; println(a.f()); println(a.f());
[17:27:10] -rusti- pastebinned 8 lines of output: http://sprunge.us/JVWE
[17:27:20] <Yurume> aargh...
[17:29:43] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[17:30:47] <kimundi> Yurume: You're moving out of &mut self there
[17:31:13] <Yurume> kimundi, yeah, and immediately putting another values back.
[17:31:16] <kimundi> even if only temporary, and you wan't to plug the hole afterwards, it's not allowed right now.
[17:31:30] <Yurume> I guess that's a main motivation of stealing proposal, right?
[17:31:34] <kimundi> right
[17:31:38] *** Quits: hoverbear (andrew@moz-9DF83711.wireless.uvic.ca) (Quit: hoverbear)
[17:31:43] <kimundi> would make things much easier
[17:32:04] <kmc> we have a swap function though, right?
[17:32:10] <strcat> yes
[17:32:22] <kimundi> (Though I'm not sure if this specific example would be possible either way)
[17:32:33] <kimundi> (I guess it is)
[17:33:06] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[17:33:45] *** ahal is now known as ahal|lunch
[17:34:08] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[17:34:43] *** Quits: dave1629 (dave@DBB4C946.C422786F.DDE5D3F6.IP) (Quit: dave1629)
[17:35:55] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[17:36:40] <sw17ch> What's the stealing proposal?
[17:38:35] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[17:40:18] <kmc> sw17ch: https://mail.mozilla.org/pipermail/rust-dev/2013-August/005424.html
[17:40:38] *** Quits: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[17:47:43] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[17:48:45] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[17:48:46] <kmc> apparently that proposal is not safe as-is; read the whole thread
[17:49:30] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[17:49:54] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[17:49:58] *** Joins: hoverbear (andrew@moz-4B209FD1.wireless.uvic.ca)
[17:50:50] *** Joins: mib_es8zm1 (Mibbit@moz-3570A850.bootp.virginia.edu)
[17:51:52] <sw17ch> Ah, the 'right to read' bit.
[17:52:04] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[17:53:14] <mib_es8zm1> Hi all, is it possible to handle signals in Rust? It's easy in C, but I failed to bind the callback of signal() in Rust even if I defined an extern fn. signal() always returned a wrong code.
[17:53:53] *** Quits: Ferreus (ferreus@moz-E7C43FE8.dyn.telefonica.de) (Ping timeout)
[17:54:08] *** Joins: Ferreus (ferreus@moz-E7C43FE8.dyn.telefonica.de)
[17:54:57] <kmc> can you pastebin your code?
[17:55:31] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[17:55:56] <kimundi> mib_es8zm1: OS course I assume?
[17:56:12] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Client exited)
[17:56:17] <mib_es8zm1> sure
[17:56:19] *** Joins: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com)
[17:56:19] <mib_es8zm1> use std::libc::types::os::arch::c95::{c_int}; use std::libc::{SIGINT}; use std::libc::{sleep};     #[nolink] #[abi = "cdecl"] extern {     //extern __sighandler_t signal (int __sig, __sighandler_t __handler)     // __THROW;     unsafe fn signal(sig: c_int, handler: *u8) -> u8; }  /* Type of a signal handler.  */ //typedef void (*__sighandler_t) (int); extern 
[17:56:38] <kmc> please put it on http://pastebin.mozilla.org/ or something so the formatting isn't messed up
[17:57:10] <mib_es8zm1> http://pastebin.com/wXHM6xvd
[17:57:38] *** Quits: hoverbear (andrew@moz-4B209FD1.wireless.uvic.ca) (Quit: hoverbear)
[17:57:57] <kmc> is this Rust 0.7?
[17:58:27] <mib_es8zm1> yes
[18:01:49] *** ahal|lunch is now known as ahal
[18:01:59] *** Joins: BitPuffin (isak@moz-49828767.cust.tele2.se)
[18:02:32] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[18:03:05] *** Quits: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: brendan)
[18:03:32] <nmatsakis> acrichto: interesting though, have to mull it over
[18:04:04] <Luqman> mib_es8zm1: i am pretty sure #[abi = "cdecl"] doesn't do anything
[18:04:25] <acrichto> nmatsakis: https://github.com/mozilla/rust/issues/8122 has more discussion
[18:04:33] *** Joins: dave1629 (dave@DBB4C946.C422786F.DDE5D3F6.IP)
[18:04:43] <nmatsakis> acrichto: clearly we should add `class` and `struct`, with the former being priv-by-default
[18:05:09] <pcwalton> sully: how stable are boxed traits + default methods?
[18:05:10] <acrichto> nmatsakis: :(
[18:05:32] <sully> I think that they should work
[18:05:36] <tjc> nmatsakis: Surely if so, we have to come up with a third option and call it `union`
[18:05:57] *** Joins: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:06:17] *** Quits: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se) (Ping timeout)
[18:06:20] <mib_es8zm1> Luqman: but it seems it actually called an extern function signal(), isn't it?
[18:06:50] <kimundi> Is there a rust meeting right now?
[18:07:03] <nmatsakis> acrichto: I think you and brson are correct that the default is wrong
[18:07:38] <acrichto> nmatsakis: pnkfelix is right though in that this may not be what one expects all the time
[18:07:41] <SiegeLord> I'm reading the man pages for 'signal' and there's a whole bunch of bold text telling people not to use that function...
[18:08:00] <nmatsakis> acrichto: I know. somehow `pub struct Point { pub x: uint, pub y: uint }` feels...
[18:08:00] <mib_es8zm1> kmc: is it the problem of Rust 0.7
[18:08:03] <tjc> kimundi: It just ended
[18:08:24] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[18:08:26] <kmc> mib_es8zm1: don't think so
[18:08:27] *** Joins: ceninan (ceninan@B5874CE8.338127AB.BB9C2183.IP)
[18:08:31] <kimundi> tjc: Ah. Usually I see at least one person linking to it here, so I was curios
[18:08:34] <acrichto> nmatsakis: yeah :(, seems very verbose
[18:08:42] <kimundi> (The etherpad thingy)
[18:08:43] <kmc> mib_es8zm1: where did you get SIG_ERR = 0?
[18:09:22] <pnkfelix> Maybe what I'm thinking is that one should distinguish `pub struct Point { x: int, y: int }` versus `struct ThePoint { x: int, y: int }; pub type Point = ThePoint`
[18:09:24] *** Quits: dave1629 (dave@DBB4C946.C422786F.DDE5D3F6.IP) (Quit: dave1629)
[18:09:24] <kmc> I looked at your program's behavior using strace and on my system (Linux) the signal() C function turns into the rt_sigaction() syscall, which is returning 0 for success
[18:09:56] <pnkfelix> where the latter would be the clearest way to export the type as a type, not as a struct.  Not sure though.  I haven't really worked this out, clearly.
[18:10:07] *** Quits: maik (maik@moz-64456714.dip0.t-ipconnect.de) (Ping timeout)
[18:10:14] <engla> I fixed the overflow bugs in str and vec (those I found) and it's all related to unsafe{} code
[18:10:17] <kmc> mib_es8zm1: on my system SIG_ERR = 0xffffffffffffffff
[18:10:28] <mib_es8zm1> kmc: oh, sorry, the SIG_ERR should be this one:#define SIG_ERR	((__sighandler_t) -1)	/* Error return.  */
[18:10:29] * kimundi would like to read the meeting notes
[18:10:50] <engla> just a thought for checked overflow..
[18:11:04] <kmc> but I think you should switch to sigaction() which has the standard "0 for success" POSIX return code
[18:11:05] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[18:11:37] <mib_es8zm1> kmc: oh? but why signal() didn't work?
[18:12:41] <kmc> I think it does work!
[18:12:49] <kmc> it returns 0 on my system, not SIG_ERR = 0xffffffffffffffff
[18:13:01] <benh> oh are you turning off struct-like enum variants?
[18:13:10] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[18:13:45] <kmc> mib_es8zm1: when I hit ^C it does indeed invoke the signal handler, which produces this error "You've met with a terrible fate, haven't you?  fatal runtime error: local malloc outside of task"
[18:13:52] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Quit: tikue_)
[18:13:58] <benh> i'm not using them but i was surprised because people seemed excited about using them in variants withtons of fields :)
[18:14:02] <kmc> which is what I expect basically
[18:14:22] *** Quits: pnkfelix (pnkfelix@A34AB32F.6B30872B.A515248C.IP) (Quit: Leaving.)
[18:14:23] <SiegeLord> benh: Where did you read that?
[18:14:36] <benh> meeting etherpad
[18:14:40] <kmc> mib_es8zm1: the standard IO functions in Rust use @-boxes and so won't work from contexts outside a Rust task, such as a signal handler
[18:14:47] <kimundi> benh: Got a link? :)
[18:14:55] <benh> https://etherpad.mozilla.org/Rust-meeting-weekly
[18:15:13] <kimundi> benh: thanks
[18:15:38] <SiegeLord> Wait, "we don't use them" is a reason?
[18:16:04] <kmc> mib_es8zm1: if you really want to do IO from your signal handler, you can do something like https://github.com/mozilla/rust/blob/master/src/libstd/rt/logging.rs#L204-L209
[18:16:10] <kmc> but it would be better to avoid it
[18:16:39] <kmc> unfortunately there aren't clean docs or guidelines for writing Rust code that runs outside a task, afaik
[18:16:46] *** jorendorff is now known as jorendorff_away
[18:16:53] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:17:06] <mib_es8zm1> kmc: oh, did you mean I could do everything in the callback function except for stdio?
[18:17:10] <benh> SiegeLord: i guess it's the cautious, conservative thing to do with unused feature, rather than maintaining them and risking that they catch on before you get around to removing them :)
[18:17:13] <strcat> kmc: signal handlers are never really going to be correct, though
[18:17:33] <kmc> mib_es8zm1: no there are lots of things you can't do... call fail!(), use anything which allocates @ boxes, etc
[18:17:37] <kmc> strcat: yeah :/
[18:17:47] <kmc> probably the right way to handle signals in Rust is to arrange for libuv to receive them like other events
[18:17:52] <strcat> kmc: for correct signal handling in a multi-threaded program (all rust programs using the runtime) you need to mask it in all other threads
[18:18:04] <strcat> the only way to handle signals correctly is signalfd, or similar APIs elsewhere
[18:18:08] <strcat> not signal/sigaction
[18:18:09] <kmc> I assume libuv has an interface to signalfd() on Linux and something like the self-pipe trick on other UNIX
[18:18:16] <strcat> kmc: yeah
[18:18:23] <strcat> kmc: some hack with pselect
[18:18:31] <strcat> I hope, at least
[18:18:35] <strcat> maybe it's not thread-safe elsewhere
[18:18:37] <kmc> and then you could register a handler to be called at the Rust level, from the Rust IO manager
[18:18:51] <strcat> kmc: well I think ideally it wouldn't be handler based
[18:19:04] <strcat> in an ideal world we would have a real select, working on I/O, timers, signals
[18:19:11] <kmc> mm
[18:19:36] <kmc> btw some platforms have a broken pselect(); I think the self-pipe trick is more robust (but probably libuv has already solved this problem)
[18:19:38] <SiegeLord> benh: You couldn't use them before as they were buggy... so you have code like this: https://github.com/mozilla/rust/blob/master/src/libsyntax/ast.rs#L227
[18:19:49] <kmc> they implement pselect in userspace and consider that "good enough" even though it defeats the entire purpose
[18:19:56] <benh> That was the case I was thinking of :)
[18:20:05] <SiegeLord> So really, you're meant to do Variant(/* arg name */ foo, ...)?
[18:20:22] <SiegeLord> I really don't think that if a feature is not used in the crufty code base of rustc that it shouldn't be supported
[18:20:32] <SiegeLord> I could write a patch to make libsyntax use them :P
[18:20:38] <mib_es8zm1> kmc: strcat: anyway, i think the topic is too advanced for students in undergrad OS class.
[18:20:45] <benh> I suspect the proper way is to just use a proper struct inside the variant
[18:21:02] <strcat> well... correct signal handling is not easy/portable
[18:21:23] <kmc> signals are the worst
[18:21:26] <strcat> at least until you realize you're just supposed to use signalfd
[18:21:30] <strcat> but signals still suck
[18:21:34] <kmc> in fact everything in UNIX that isn't represented by a file descriptor is the worst
[18:21:36] <strcat> signals *should not* be sent from userland
[18:21:37] <kmc> yeah
[18:21:41] <strcat> they are inherently racy
[18:21:47] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[18:21:48] <strcat> programs using signals for anything, like reload on SIGHUP, are broken
[18:21:57] <strcat> they should use a control socket, etc.
[18:22:04] <sw17ch> strcat++
[18:22:21] <SiegeLord> benh: That does not sound clean at all... I bet 100% of the people will do /* field name */ instead
[18:23:01] <kimundi> SiegeLord: Would object against 100%
[18:23:18] <kimundi> SiegeLord: Depending on usecase, defining a new struct might be easier than pattern matching out all the time 
[18:23:45] <SiegeLord> Not easier than just using a struct variant
[18:23:57] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[18:24:44] <mib_es8zm1> kmc: strcat: thanks. but i don't think signalfd() is easy either
[18:24:47] <kimundi> There I agree
[18:25:02] <mib_es8zm1> at least, the sample code for signalfd() in C is much longer
[18:25:18] <strcat> mib_es8zm1: it's as easy as async socket/file I/O
[18:25:59] <kmc> Rust applications code should not call signalfd() directly
[18:26:11] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Client exited)
[18:26:14] <kmc> it should invoke some Rust IO library feature to invoke some libuv feature to deliver signals in a nice way
[18:26:22] <kmc> unfortunately I don't think any of that exists yet =)
[18:26:27] <SiegeLord> Until two weeks ago, you couldn't have that libsyntax enum use struct variants... I bet if you could, then it'd be using it :P
[18:26:38] <strcat> kmc: well, someone implemented a wrapper but I don't think it's safe or the right API for it
[18:26:40] <strcat> it's an open PR
[18:26:47] <kmc> ok
[18:26:51] <strcat> we really need a proper select
[18:27:00] <strcat> otherwise I'd rather use epoll directly
[18:27:32] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[18:27:32] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[18:27:36] <kmc> neither signalfd nor epoll is portable
[18:27:46] <kmc> just sayin'
[18:28:04] <strcat> sure, but we don't have a working I/O system yet
[18:28:21] <strcat> we don't *have* select and timers/signals you can mix with it
[18:28:37] <strcat> or a way to do file notification, dbus, or whatever else in the event loop
[18:28:59] <strcat> so you have no choice but to use runtimeless rust with direct usage or APIs or libuv
[18:29:39] <strcat> and then you don't get the whole stdlib
[18:29:40] <mark_edward> doomlord_: ping
[18:29:46] <doomlord_> hi
[18:29:55] <mib_es8zm1> strcat: kmc: oh god, I would rather suggest the professor not to require the signal handling feature in our project.
[18:30:12] <acrichto> dbaupp: it appears we got a little over-zealous when changing FFI things: https://github.com/mozilla/rust/blob/master/src/libstd/num/f32.rs#L45 (I think this explains why the ray tracer is slower than one would expect)
[18:30:37] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[18:31:52] *** Joins: RMF (RMF@moz-F6CF4762.dsl.telepac.pt)
[18:32:08] <SiegeLord> Also... the meeting notes don't mention how you managed to get nesting comments without breaking the regular grammar... that was the reason why they were removed originally
[18:32:41] *** Joins: maik (maik@moz-64456714.dip0.t-ipconnect.de)
[18:33:07] *** Joins: eholk (eholk@18305C91.D158D03F.6E370BFC.IP)
[18:33:18] *** Quits: RMF (RMF@moz-F6CF4762.dsl.telepac.pt) (Connection reset by peer)
[18:33:22] <kmc> rusti: /* "*/" */ 0
[18:33:23] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[18:33:24] -rusti- <anon>:9:16: 9:17 error: unknown start of token: ?
[18:33:24] -rusti- <anon>:9     println!("{:?}", r)
[18:33:24] -rusti-                          ^
[18:33:24] -rusti- application terminated with error code 101
[18:33:29] <kmc> uh
[18:33:32] <benh> heh
[18:33:52] <kmc> rusti: 0
[18:33:54] -rusti- 0
[18:33:56] <benh> /* "*/ is a comment, " /* 0 ... println(" is a string?
[18:34:02] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:34:27] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[18:34:27] *** ChanServ sets mode: +o tjc
[18:34:57] <SiegeLord> Unless it's just within docstrings?
[18:35:23] <kmc> heh I see... does it just put input inside Â«let r = ...; println!("{:?}", r)Â»
[18:35:40] *** Joins: TheDust (Stijn@moz-8C2076C2.upc-d.chello.nl)
[18:35:53] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[18:35:59] <engla> it does
[18:36:01] <benh> { ... }; I think
[18:36:21] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[18:36:21] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:37:08] *** jorendorff_away is now known as jorendorff
[18:38:07] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[18:38:40] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[18:38:55] *** Quits: mib_es8zm1 (Mibbit@moz-3570A850.bootp.virginia.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[18:39:57] <cmr> tjc: ping
[18:40:11] <tjc> cmr: pong
[18:40:23] <cmr> tjc: since https://github.com/mozilla/rust/pull/9025 was closed, https://github.com/mozilla/rust/issues/3358 should be too, yes?
[18:40:33] <tjc> cmr: Let me see
[18:41:17] <tjc> cmr: Yup. Didn't realize brson originally suggested it :-)
[18:41:31] <olsonjeffery> tjc: hey i asked this earlier, before you showed up:
[18:41:41] <olsonjeffery> are there any rustpkg examples that show lib.rs re-exporting local modules?
[18:41:50] <olsonjeffery> tjc: im trying to follow conventions for mod.rs as shown in libstd, but doing it in lib.rs just causes errors (can't resolve `pub use self::foo;`) and putting it in a mod.rs builds.. but then the symbols aren't there when called from `extern mod foo;use foo;`
[18:41:51] <kimundi> SiegeLord: I'm interpreting the meeting notes as "Screw regular token language, nested comments are too useful"
[18:42:00] <brson> r? https://github.com/mozilla/rust/pull/9471
[18:42:10] <tjc> olsonjeffery: hmm, good question. No, there aren't any examples, I'll make one
[18:42:29] <olsonjeffery> tjc: thanks! could you just gist something really quick to unblock me? if not, i'll be happy to wait.
[18:42:41] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[18:42:41] <acrichto> brson: why does exit trigger the assertion failures?
[18:42:45] <tjc> olsonjeffery: well, I don't know if it works or not :-)
[18:42:50] <SiegeLord> kimundi: I like how graydon leaves and all this stuff gets sneaked in... :P
[18:42:57] <brson> acrichto: idk
[18:43:08] <brson> acrichto: oh, there are other apps here that are calling exit too
[18:43:18] <acrichto> yeah :(
[18:43:38] <c74d> Is <https://github.com/brson/rust-llvm> up-to-date?
[18:43:40] <kimundi> SiegeLord: Well, seems like my clone -> copy change will not sneak in ;)
[18:43:55] <brson> I'll fix them all
[18:44:04] <c74d> At least, sufficiently so to be used with Rust â‰¥0.7 and LLVM â‰¥3.3?
[18:44:31] <SiegeLord> But I guess you couldn't have raw strings in a regular language anyway, I believe
[18:44:42] <tjc> olsonjeffery: I made https://github.com/mozilla/rust/issues/9472 , but I suspect if you couldn't get it to work, it doesn't work, as of now
[18:44:46] <SiegeLord> Still... a sad day
[18:45:26] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[18:45:57] <strcat> brson: probably atexit handlers installed by libuv or something
[18:46:03] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[18:46:03] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/OmvKEA
[18:46:03] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[18:46:05] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[18:46:05] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/SHod6Q
[18:46:05] <ghrust> 13rust/06auto 145e6a8ea 15Brian Anderson: rust: Don't call libc::exit...
[18:46:05] <ghrust> 13rust/06auto 14e3624ed 15bors: auto merge of #9471 : brson/rust/rustexit, r=thestinger...
[18:46:06] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[18:46:07] <strcat> _exit wouldn't call them, but that's still code smell :)
[18:46:09] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[18:47:29] <strcat> anyway I wonder why rustc -v sometimes hits it...
[18:47:30] *** Joins: dave1629 (dave@1F4C6600.C422786F.DDE5D3F6.IP)
[18:47:37] <strcat> maybe a totally different error
[18:48:29] <pcwalton> does someone want to profile the rust raytracer?
[18:48:35] <pcwalton> I am annoyed that we're losing to Go
[18:48:39] <pcwalton> but I have no time to profile
[18:49:09] <strcat> I'd just write it in runtimeless rust
[18:49:09] <engla> acrichto did just point out an issue that could be fixed
[18:49:12] <strcat> it will perform the same as C++
[18:49:17] <pcwalton> strcat: it's not
[18:49:26] <pcwalton> there's something that's causing a massive slowdown
[18:49:28] <acrichto> engla: doesn't look like it helped
[18:49:28] <pcwalton> engla: it didn't fix it
[18:49:34] <engla> oh ok
[18:49:52] <acrichto> I could also be bad at measuring
[18:50:15] <engla> it has I/O in a loop, I'm not sure if that's a good idea
[18:50:21] <engla> move that out?
[18:50:27] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[18:50:31] <cmr> Where's the current code?
[18:50:31] <acrichto> nah that wasn't hot at all
[18:50:38] <cmr> https://github.com/huonw/card-trace ?
[18:50:39] <strcat> engla: use runtimeless rust, and use the same functions the C code would call
[18:50:41] * strcat shrugs
[18:50:41] <pcwalton> yeah
[18:50:46] <acrichto> cmr: that's what I was using
[18:50:47] *** jorendorff is now known as jorendorff_away
[18:50:57] <LRN> what's up with W32?
[18:51:01] <strcat> if you're using the runtime you'll always be paying for the libcall passes not working
[18:51:06] * LRN saw the weekly meeting summaries
[18:51:07] <strcat> and those are key for microbenchmarks
[18:51:11] <engla> strcat: well, that's not really the point of this
[18:51:17] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:51:38] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[18:51:45] <strcat> are we benchmarking rust the language or the overhead of rust's current runtime and I/O libs?
[18:52:04] *** Quits: fabiand (fabiand@moz-192F707C.adsl.alicedsl.de) (Quit: Verlassend)
[18:52:05] <pcwalton> it's a pure numeric benchmark
[18:52:10] <cmr> strcat: a new rust-git \o/
[18:52:13] <engla> why not benchmark the part you want to improve strcat 
[18:52:23] <pcwalton> and we're losing to a compiler that doesn't optimize
[18:52:32] <strcat> pcwalton: we wrap C calls with high overhead wrappers
[18:52:37] <pcwalton> there are no C calls here
[18:52:41] <acrichto> there should be no C calls
[18:52:45] <acrichto> if there is we need to fix that
[18:52:58] <strcat> it doesn't allocate or anything?
[18:53:01] <pcwalton> nope
[18:53:04] <pcwalton> no allocation, no I/O
[18:53:05] <cmr> std::io::stdout().write([p.x as u8, p.y as u8, p.z as u8]);
[18:53:08] *** Joins: tcsc (tcsc@8D461857.2738C34.36DDB9BB.IP)
[18:53:10] <cmr> that looks like io to me
[18:53:14] <pcwalton> cmr: that part is not hot
[18:53:16] <pcwalton> we have profiled this
[18:53:32] * cmr is waiting on pacman
[18:53:46] * strcat shrugs
[18:54:10] <acrichto> the write syscal 0s 0.9% of the time
[18:54:17] <acrichto> powf is 2.5%
[18:54:20] <acrichto> otherwise it's all rust
[18:54:23] <cmr> Is the stuff in vec getting inlined?
[18:54:24] <strcat> yeah but the overhead would be from inlined bloat
[18:54:40] <cmr> vector.rs in the repo, that is
[18:54:42] <strcat> (I/O overhead)
[18:54:48] *** Quits: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: brendan)
[18:54:48] <acrichto> the hottest instruction is a leaq after a jne
[18:55:09] <acrichto> athough osx normall reports the hottest instruction as the one after the hottest instruction
[18:55:19] <strcat> the sanest way to do it is really porting function by function of the C and comparing the IR
[18:55:22] <acrichto> so it maight be a jbe or ucomiss
[18:55:41] <strcat> a human can't really deal with the implications of 5 extra instructions making it not fit in cache
[18:55:58] *** Quits: Diamond (dick@moz-FEA87A60.ks.ks.cox.net) (Ping timeout)
[18:55:58] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[18:56:07] <strcat> profiling won't help on a microbenchmark in my experience because there are no function calls
[18:56:41] *** Joins: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:56:47] <strcat> it could be more our function preludes, wasting registers on env pointers, not marking functions as internal
[18:56:55] <strcat> be from our*
[18:56:59] <pcwalton> that doesn't explain why Go beats us though
[18:57:04] <pcwalton> Go has the same costs
[18:57:06] <strcat> we waste 1 register per function call
[18:57:08] <strcat> Go doesn't
[18:57:08] <pcwalton> maybe our RNG?
[18:57:16] <pcwalton> but there are very few function calls
[18:57:53] <cmr> [14:57:01]~/hacking/card-trace> time ./one > /dev/null                    
[18:57:54] <cmr> ./one > /dev/null  14.59s user 0.05s system 100% cpu 14.628 total
[18:57:56] <cmr> [14:57:20]~/hacking/card-trace> time ./two > /dev/null                                                                                                                                                                                        
[18:57:58] <cmr> ./two > /dev/null  14.58s user 0.03s system 100% cpu 14.602 total
[18:58:00] <cmr> one is -O3, two is -O2
[18:58:04] <cmr> might be noise
[18:58:08] <pcwalton> that's noise
[18:58:40] *** Joins: michaelgreene (michael@DA820AA2.17CD9887.F12515B4.IP)
[18:58:51] <cmr> I don't think it is.
[18:58:57] <cmr> two is consistently 20-30ms faster than one
[18:59:06] * pcwalton shrugs
[18:59:32] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[18:59:38] <strcat> the only difference is that -O3 has a slightly higher inlining threshold, argpromotion and slp vectorize
[18:59:39] <pcwalton> we should just compare the IR of the C++ to the IR of the Rust as strcat said
[18:59:50] <strcat> make all the rust functions generic
[18:59:53] <strcat> add a useless generic param
[18:59:55] <strcat> will make them internal
[18:59:57] <strcat> shrink the code size
[19:00:14] *** Quits: miza (miza@moz-908EA8DE.home.otenet.gr) (Input/output error)
[19:01:01] *** Joins: Ferio (Mibbit@moz-23CDE542.fullrate.dk)
[19:01:19] *** Joins: Diamond (dick@moz-FEA87A60.ks.ks.cox.net)
[19:01:49] * strcat looks at it
[19:02:14] <cmr> Slapping an #[inline] on every function brought it down to 13.756s and 13.781s, -O3 and -O2 respectively
[19:02:22] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[19:02:23] <pcwalton> heh
[19:02:43] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Quit: tikue_)
[19:02:46] <pcwalton> there's probably some algorithmic thing.
[19:02:50] <strcat> why do we call a pow function?
[19:02:54] <pcwalton> I suspect the RNG, note that Go wrote their own RNG
[19:02:58] <pcwalton> for this benchmark
[19:03:02] <pcwalton> we should copy Go's RNG
[19:03:03] <strcat> LLVM has a pow intrinsic
[19:03:13] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:03:17] <cmr> We're using XorShift fwiw
[19:03:24] <strcat> it takes 18s here
[19:03:36] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Ping timeout)
[19:03:38] <pcwalton> never underestimate how much speed you can gain by using worse and worse RNGs
[19:03:47] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[19:03:55] <cmr> heh
[19:03:56] <strcat> the RNG code looks incredibly bloated
[19:03:57] <pcwalton> sad but true :)
[19:04:07] <strcat> it has like a hundred xor and fmul instructions?
[19:04:11] <strcat> not in a loop
[19:04:24] <olsonjeffery> tjc: forgive me for the repeated questions.. how do different crates in the same workspace refer to each other..? should it just `extern mod A; use A;` from crate B, given /src/A, /src/B packages in the same workspace?
[19:04:24] <strcat> oh it *is* a loop body
[19:04:33] <tjc> olsonjeffery: questions are great!
[19:04:33] <olsonjeffery> im curious if thats the issue
[19:04:51] *** Quits: Palmik (palmik@moz-11EA685D.pks.muni.cz) (Quit: Lost terminal)
[19:04:53] <olsonjeffery> i commented on your ticket
[19:05:00] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[19:05:00] <engla> so it comes down to benchmarking RNG's again :)
[19:05:03] <tjc> olsonjeffery: that sounds right. packages aren't a special thing to rustc, only to rustpkg
[19:05:13] <tjc> so, using another crate in the same package is just like using another crate in a different package
[19:05:14] <pcwalton> we don't know that
[19:05:23] <strcat> there's overhead from how we pass parameters
[19:05:31] <strcat> we don't use the byval annotation, we roll our own
[19:06:27] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[19:07:00] *** Quits: maik (maik@moz-64456714.dip0.t-ipconnect.de) (Ping timeout)
[19:07:23] <strcat> definitely is doing allocations
[19:07:25] <olsonjeffery> woah. doing `rustpkg install` for a github repo fragment asks for username/password ? is that by design or some config issue?
[19:07:42] <strcat> at least it's putting local_free...
[19:08:09] <pcwalton> oh hmm, allocations?
[19:08:11] <pcwalton> that's the problem then
[19:08:15] <pcwalton> well, might be
[19:08:20] <pcwalton> depending on how hot they are
[19:08:25] <strcat> pcwalton: we wrap every call to sqrt, pow, etc. with non-inlined wrappers making libcall optimizations not work
[19:08:27] <engla> olsonjeffery: what kind of github url does it use?
[19:08:32] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[19:08:36] <pcwalton> blech
[19:08:36] <cmr> Looking at a perf report
[19:08:37] <strcat> pcwalton: afaict, that's the issue
[19:08:39] <cmr> I'm seeing __powf_finite 10%
[19:08:43] <pcwalton> can we just call the llvm intrinsics?
[19:08:50] <strcat> pcwalton: we do, and then we wrap them
[19:08:54] <strcat> because the intrinsics usually turn to calls
[19:09:02] <pcwalton> hmm
[19:09:04] <pcwalton> can we fix that?
[19:09:04] <acrichto> that was what I changed, a modified rustc actually inlining the intrinsics didn't help ata ll
[19:09:08] <strcat> rust with the runtime is always going to do badly on these if we have to wrap calls
[19:09:09] <olsonjeffery> engla: rustpkg install github.com/steveklabnick/hello
[19:09:14] <olsonjeffery> that's the complete command..
[19:09:18] <strcat> acrichto: no fixed_stack_segment?
[19:09:29] <acrichto> strcat: only #[inline] and #[allow(cstack)]
[19:09:36] <olsonjeffery> so the url fragment doesn't specify if you're trying to set up a read/write-configured clone
[19:09:42] <strcat> I edited the by hand IR and made it faster by removing that stuff
[19:11:03] <engla> olsonjeffery: the url target doesn't exist
[19:11:06] <pcwalton> strcat: do we have a plan going forward for how to fix this? this is a serious issue
[19:11:30] <steveklabnik> olsonjeffery: engla hi.
[19:11:43] <steveklabnik> olsonjeffery: engla i'll be around in a bit if you're having some weirdness
[19:11:48] <steveklabnik> and olsonjeffery , you spelled my last name wrong
[19:12:09] <pcwalton> we could just turn off fixed stack segment for those libcalls, I doubt it hurts anything
[19:12:25] <strcat> pcwalton: we had it off and it was added due to overflows
[19:12:33] <pcwalton> on which functions?
[19:12:38] <strcat> sin, cos, etc.
[19:12:41] <pcwalton> argh
[19:12:49] <pcwalton> can we fix LLVM to make the passes work then? :\
[19:13:22] <strcat> pcwalton: we could add a bunch of attributes to bubble it up
[19:13:29] <strcat> function attributes
[19:13:32] <pcwalton> LLVM attributes?
[19:13:34] <pcwalton> that doesn't sound fun
[19:13:41] <steveklabnik> well, my call isn't happening, so i'm around now.
[19:13:41] <steveklabnik> heh
[19:13:43] <strcat> yeah I can't see another way to do it
[19:13:46] <olsonjeffery> steveklabnik: right you are!
[19:13:59] <pcwalton> can we special case the rust names in llvm?
[19:14:06] <pcwalton> after all, if they special case the C++ names, it's fair game
[19:14:10] <steveklabnik> olsonjeffery: don't worry, that's EXACTLY how it's pronounced.
[19:14:17] <strcat> pcwalton: yes, we could do that
[19:14:48] <strcat> they made it harder by removing the libcall pass and integrating it into ones like instcombine
[19:15:04] <strcat> anyway this is too big for me to really figure it out
[19:15:17] <strcat> need to build benchmarks bottom up and compare as you go if your goal is fixing perf issues
[19:15:31] <strcat> has to be structured exactly the same way
[19:16:16] <strcat> (meaning you have to use runtimeless rust)
[19:16:39] <strcat> it could just be that the RNG code is too big and wipes the L1 cache
[19:16:46] <strcat> need the exact same code in C/C++ and rust
[19:17:12] <pcwalton> strcat: so I don't fully understand the issue
[19:17:20] <pcwalton> if we wrap a function in Rust and cross crate inline that wrapper
[19:17:25] <pcwalton> doesn't that eliminate the wrapper?
[19:17:31] <pcwalton> fixed stack segment propagates up
[19:17:35] <strcat> pcwalton: we mark the wrappers as noinline, though
[19:17:40] <pcwalton> oh, why?
[19:17:56] <strcat> pcwalton: inlining them causes memory leaks from yielding while inside it
[19:18:01] <strcat> something like that
[19:18:05] <pcwalton> uhhh
[19:18:06] <strcat> brson would know
[19:18:08] <pcwalton> that is terrible
[19:18:11] <pcwalton> I'll ask brson at lunch
[19:18:12] <pcwalton> back in a bit
[19:18:13] *** Quits: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: brendan)
[19:18:44] *** bent is now known as bent|lunch
[19:18:48] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[19:19:52] <strcat> does someone have an integer numerics benchmark?
[19:20:30] *** Quits: bent|lunch (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[19:20:32] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[19:21:32] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Quit: Leaving)
[19:22:00] *** Joins: maik (maik@moz-9F5FA6A1.dip0.t-ipconnect.de)
[19:22:43] <engla> strcat: btw, I didn't write the raytracer, I just posted it to reddit
[19:23:08] *** Joins: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net)
[19:23:58] <cmr> Eugh. C FFI with sigaction is impossible, it uses unions
[19:24:45] *** Quits: eholk (eholk@18305C91.D158D03F.6E370BFC.IP) (Quit: eholk)
[19:25:12] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[19:25:25] <cmr> well, they're both of the same size, so that's not awful
[19:25:32] *** Joins: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP)
[19:25:43] *** Quits: omicrondelta (dwhyte@DFA0622C.2732CD06.B7FCEB19.IP) (Quit: Leaving.)
[19:26:02] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[19:27:06] <strcat> cmr: you can't use sigaction/signal anyway if you have the runtime on
[19:27:32] <flaper87> brson: ping
[19:28:32] <sw17ch> strcat: i've seen people discussing running with and without the runtime. what precisely does that mean in this context? is it possible to compile a rust program that doesn't link against the runtime or links against an alternative runtime?
[19:28:56] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[19:29:05] <strcat> you can compile a rust program where you define the entry point and don't have the rust runtime/stdlib
[19:29:43] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[19:29:46] <sw17ch> cool.
[19:29:56] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[19:30:26] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[19:30:40] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[19:30:41] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[19:31:55] *** Quits: maik (maik@moz-9F5FA6A1.dip0.t-ipconnect.de) (Ping timeout)
[19:32:47] *** Joins: hoverbear (andrew@moz-9DF83711.wireless.uvic.ca)
[19:32:48] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[19:39:29] *** Joins: valenting (Thunderbir@318D981E.E5432647.FB866788.IP)
[19:39:40] *** Quits: hoverbear (andrew@moz-9DF83711.wireless.uvic.ca) (Quit: hoverbear)
[19:39:40] <olsonjeffery> flaper87: hey did you see the discussion about select() in here, yesterday?
[19:40:19] <olsonjeffery> flaper87: there's an `impl Select for &mut Select { ... }` section of code in /src/libstd/select.rs that should probably be uncommented
[19:40:34] <flaper87> olsonjeffery: I missed it but I did notice that section
[19:40:55] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[19:40:55] <flaper87> olsonjeffery: https://github.com/mozilla/rust/blob/master/src/libstd/select.rs#L102
[19:41:04] <olsonjeffery> and then you can try heterogeneous ports by build a vec w/ a  port & timer like: `let vec = ~[&port as &mut Select, &timer as &mut Select];`
[19:41:10] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[19:41:19] <olsonjeffery> heterogeneous select(), even
[19:41:58] <flaper87> olsonjeffery: yeah, that module needs some refactor as well, it's 'port' oriented, in terms of variables etc
[19:42:03] <flaper87> I'll clean that up as well
[19:42:11] <flaper87> I'm working on it right now, actually
[19:42:23] *** Joins: rlbaker (rlbaker@moz-D05907D4.hfc.comcastbusiness.net)
[19:42:27] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[19:42:27] <flaper87> I'll push something soon and I'd love your feedback there
[19:42:32] <flaper87> olsonjeffery: ^
[19:42:34] <olsonjeffery> ok
[19:42:51] <olsonjeffery> go ahead and open a PR, just mention that it isn't ready to merge
[19:42:57] <olsonjeffery> and we can have the discussion there
[19:43:12] <flaper87> olsonjeffery: will do
[19:43:36] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[19:44:22] *** Joins: maik (maik@moz-9F5FA6A1.dip0.t-ipconnect.de)
[19:44:59] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[19:45:18] *** Joins: bent|lunch (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[19:45:27] *** bent|lunch is now known as bent
[19:45:55] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[19:46:32] *** bent is now known as IRCMonkey21704
[19:47:44] *** IRCMonkey21704 is now known as bent
[19:50:43] <tiffany> has that issue with building rust because of libtinfo been fixed?
[19:50:47] <strcat> yes
[19:51:04] *** Quits: valenting (Thunderbir@318D981E.E5432647.FB866788.IP) (Ping timeout)
[19:51:10] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[19:51:59] <cmr> strcat: got it working
[19:52:04] <cmr> ...not really correct
[19:52:08] <strcat> cmr: hm?
[19:52:08] <cmr> but it doesn't instantly explode
[19:52:10] <cmr> sigaction
[19:53:10] <cmr> https://github.com/cmr/rust-signal/blob/master/signal.rs
[19:53:41] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[19:56:34] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[19:57:05] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[19:58:13] <tiffany> note: /usr/bin/ld: cannot find -lmorestack
[19:58:14] <tiffany> uh..
[19:59:01] <strcat> it works fine here
[19:59:08] <strcat> what OS are you on?
[20:00:52] <tiffany> arch linux
[20:01:10] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[20:01:10] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/SHod6Q
[20:01:10] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[20:03:29] <strcat> tiffany: you're using the package?
[20:03:40] <tiffany> the package?
[20:03:51] <strcat> the rust-git package from pkgbuild.com
[20:03:56] *** Joins: roy (roy@C73C171E.DECA0B3A.874BDE0C.IP)
[20:04:02] <tiffany> no, I'm building from git
[20:04:02] *** Quits: roy (roy@C73C171E.DECA0B3A.874BDE0C.IP) (Quit: roy)
[20:04:06] <strcat> how did you install it?
[20:04:25] <tiffany> I get that error when I try to compile rustc
[20:04:26] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[20:04:37] <strcat> just using make? :\
[20:08:58] <tiffany> I ran ./configure and then make yeah
[20:09:00] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[20:09:17] <tiffany> it failed while linking libstd
[20:10:07] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[20:11:16] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[20:12:15] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[20:13:36] *** Quits: squiddy (squiddy@moz-AAA957C3.adsl.alicedsl.de) (Input/output error)
[20:14:47] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:14:57] *** Joins: tdc (santegoeds@moz-ADD1F5DF.range86-135.btcentralplus.com)
[20:15:02] *** Joins: CarpNet (Alasdair@moz-EF831A5E.cable.virginmedia.com)
[20:16:07] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[20:16:14] *** Quits: Ms2ger (Ms2ger@moz-45EBCB4A.adsl-dyn.isp.belgacom.be) (Quit: nn)
[20:16:50] *** Joins: CurlyBrace (Mibbit@6C098C0E.4DB138C4.DDE5D3F6.IP)
[20:17:00] <brson> flaper87: pong
[20:17:39] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[20:17:40] *** ChanServ sets mode: +o tjc
[20:17:59] <flaper87> brson: hey, just wanted to know if you had a chance to take a look here https://github.com/mozilla/rust/pull/9194
[20:18:21] <tiffany> building it again seems to be working
[20:18:28] *** Joins: mdu (mdu@moz-2989B319.rev.numericable.fr)
[20:20:34] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[20:23:44] *** Joins: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net)
[20:23:44] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Connection reset by peer)
[20:24:08] *** Quits: tefter (tefter@B5D119DC.B856A0A1.73804765.IP) (Ping timeout)
[20:24:22] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[20:26:24] *** Joins: vodik (simon@moz-6A4BB064.net.uwaterloo.ca)
[20:27:06] <strcat> pcwalton: http://ix.io/8et here's an example where it will do dead store elimination of the unique pointer
[20:27:09] <strcat> it's actually quite good at it.
[20:27:15] <pcwalton> strcat: cool
[20:27:15] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[20:27:17] <strcat> ofc we don't get that if we marked it as non-inline :(
[20:27:19] <pcwalton> btw, brson has a good proposal
[20:27:26] <pcwalton> inline fixed-stack-seg into other fixed-stack-seg
[20:27:50] *** Joins: miza (miza@moz-908EA8DE.home.otenet.gr)
[20:27:50] <strcat> that won't leak?
[20:27:51] *** Quits: skade (skade@moz-3B46D638.dip0.t-ipconnect.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[20:27:56] <strcat> it won't ask for another segment?
[20:28:00] <pcwalton> nope
[20:28:09] <pcwalton> at least, unless someone changed it since I first wrote it :)
[20:28:16] <pcwalton> fixed-stack-seg asks for a goodly amount of slop
[20:28:19] <pcwalton> so that it won't thrash
[20:28:34] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[20:29:41] <strcat> it's very picky
[20:29:49] <strcat> it doesn't like 'enum Void {}' and *Void
[20:29:56] <strcat> only dead store eliminates with *u8
[20:29:58] * strcat shrugs
[20:30:19] <brson> flaper87: not yet, no. I'll comment on it today
[20:31:23] *** Joins: valenting (Thunderbir@C6866972.77435D89.FB866788.IP)
[20:32:38] <strcat> pcwalton: that seems like a great solution though
[20:32:44] <pcwalton> yeah
[20:32:45] <pcwalton> I like it
[20:32:50] <pcwalton> easy to implement too
[20:33:16] *** Quits: zootm (calum@moz-DCC1F9C3.sgyl.cable.virginmedia.com) (Ping timeout)
[20:33:27] <strcat> so would be stop putting alwaysinline, and then teach LLVM to not inline fixed-stack-segment functions?
[20:33:34] <strcat> except into more fixed-stack-segment ones
[20:33:38] <strcat> would we*
[20:33:41] <pcwalton> right
[20:33:45] <strcat> er, stop putting never inline
[20:34:06] <strcat> we really need to mark functions as internal if it's not a library
[20:34:10] <pcwalton> yes
[20:34:22] <pcwalton> I tried to do that before
[20:34:23] <pcwalton> but it never landed
[20:34:35] <strcat> sadly can't do it for private functions in libs
[20:34:37] *** Quits: tdc (santegoeds@moz-ADD1F5DF.range86-135.btcentralplus.com) (Ping timeout)
[20:34:38] <strcat> due to inline functions
[20:34:43] * strcat tried and then realized
[20:34:46] <pcwalton> yeah
[20:34:57] <pcwalton> if we had a callgraph...
[20:34:58] <pcwalton> but we don't
[20:35:14] <strcat> we'd need that to lint on unused priv functions anyway
[20:35:23] <pcwalton> true
[20:36:19] <pcwalton> how do I get the dynamic borrowck to tell me where both borrows are?
[20:36:35] * strcat didn't know it worked since the new runtime landed
[20:36:42] <pcwalton> oh
[20:36:47] <brson> it does work
[20:37:06] <brson> but I don't know how
[20:37:17] <strcat> pcwalton: at least we now only make 2 layers of main functions instead of 3 ;p
[20:37:23] <pcwalton> yay
[20:37:29] <brson> maybe RUST_DEBUG_BORROW does something
[20:37:32] <strcat> going to send a PR tagging the inner one as internal...
[20:38:12] <brson> no RUST_DEBUG_BORROW is something else
[20:39:06] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[20:39:09] <strcat> brson: is it correct that our @main uses i64? are we defining the actual entry shim ourselves?
[20:39:15] *** Joins: tautologico (shung@E14878C0.75051ED3.7B974E06.IP)
[20:39:27] <strcat> I guess it must be correct since it works...
[20:40:13] * strcat won't worry about it
[20:40:39] <Luqman> i64 for what? return/argc ?
[20:40:46] <strcat> both
[20:40:49] <strcat> define i64 @main(i64, i8**) {
[20:41:13] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[20:41:48] *** Quits: tcsc (tcsc@8D461857.2738C34.36DDB9BB.IP) (Quit: computer sleeping)
[20:43:58] <strcat> hm
[20:44:09] <strcat> is there actually a use case for exposing symbols from an executable?
[20:44:10] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[20:44:18] *** Joins: rmr (Mibbit@CE15FB57.2CA42ABA.425A25DC.IP)
[20:44:23] <strcat> wondering if pub stuff should still be external
[20:44:57] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[20:45:04] <rmr> hi all :-)
[20:45:16] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[20:46:47] <pcwalton> strcat: there isn't
[20:46:50] <pcwalton> it doesn't even work on windows
[20:47:05] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[20:47:23] <strcat> pcwalton: I wonder if we could just be flipping on some whole-program switch
[20:47:34] <pcwalton> there is the llvm internalize pass
[20:47:46] <Luqman> fixing it on windows would be a matter of using DLLExportLinkage instead of ExternalLinkage afaik
[20:47:49] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Quit: Leaving)
[20:48:04] <strcat> pcwalton: aha
[20:48:13] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[20:48:45] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[20:50:03] <strcat> easy enough to tag them ourselves though
[20:51:22] <bjz> tjc: this is interesting: http://dev.af83.com/2013/09/14/a-journey-in-golang-package-manager.html
[20:51:34] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[20:51:45] <tjc> bjz: thanks, I'll bookmark that
[20:51:49] *** Joins: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[20:51:50] <bjz> tjc: ruspkg deals with that ok doesn't it?
[20:52:41] <bjz> tjc: I find it interesting that they're now getting competing managers popping up
[20:52:41] <tjc> bjz: deals with which thing? I see a couple points being made in the article but no big one
[20:52:46] *** Joins: zootm (calum@moz-DCC1F9C3.sgyl.cable.virginmedia.com)
[20:52:47] <steveklabnik> heh
[20:52:55] <steveklabnik> i really like that aspect of the package manager in theory
[20:53:01] <steveklabnik> but forcing it on everyone, i'm not sure about
[20:53:12] <bjz> tjc: versions I think
[20:53:24] <bjz> steveklabnik: :)
[20:53:37] <tjc> bjz: Ah yeah. We already handle different versions...
[20:53:44] <tjc> the goal is to support semver too, it's just not done yet
[20:55:12] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Quit: tikue_)
[20:55:55] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[20:57:56] <bjz> tjc: not that any of features in that post matters for me yet, I just thought you might find it interesting from a socialogical perspective
[20:57:57] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:58:08] *** Quits: rmr (Mibbit@CE15FB57.2CA42ABA.425A25DC.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:58:14] <tjc> bjz: Yeah, definitely, it's always good to read more opinions about the subject
[20:58:32] <tjc> I'm not one to try to dictate what the Right Way is
[20:59:15] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[20:59:15] *** ChanServ sets mode: +ao brson brson
[20:59:31] <bjz> but at the same time, you can't please everyone, and you don't want it to become a mess. but at the moment rustpkg looks like it's balancing things nicely :)
[20:59:39] *** Quits: maik (maik@moz-9F5FA6A1.dip0.t-ipconnect.de) (Ping timeout)
[21:00:07] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[21:00:10] <tjc> hope so! I know it's still missing a few key features, but I'm hoping those will be done soon and we can get to polishing it
[21:00:16] <tjc> and getting more feedback from the community
[21:01:04] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[21:01:18] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[21:02:28] <flaper87> brson: thanks :)
[21:02:44] <strcat> rusti: struct Foo; impl Drop for Foo { #[inline] fn drop(&mut self) {} }
[21:02:45] -rusti- ()
[21:02:55] <strcat> rusti: struct Foo; impl Drop for Foo { #[inline] fn drop(&mut self) {} } let _x = Foo;
[21:02:55] -rusti- ()
[21:02:58] <strcat> hrm
[21:03:59] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[21:03:59] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:04:01] <Luqman> strcat: there's an issue for that somewhere
[21:04:40] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[21:05:10] <Luqman> strcat: https://github.com/mozilla/rust/issues/6892
[21:05:34] <strcat> pcwalton: if I run internalize it removes main :s
[21:05:50] <pcwalton> haha
[21:05:55] <pcwalton> don't need that
[21:05:59] <strcat> it does this
[21:06:02] <strcat> define internal i64 @main(i64, i8** nocapture readnone) #4 {
[21:06:07] <strcat> and globalopt eats it
[21:06:10] <pcwalton> isn't there some kind of @llvm.used thing
[21:06:13] <strcat> yeah
[21:06:13] <pcwalton> that's what it was called
[21:06:47] <strcat> yeah I'm feeding it a big program and it outputs empty IR :)
[21:07:53] <ssalbiz> Luqman: 
[21:10:17] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Quit: msingle)
[21:10:55] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[21:11:08] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[21:11:17] *** Joins: hoverbear (andrew@EBFA78B5.F19E5E7B.E74D50F2.IP)
[21:11:31] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:12:40] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[21:14:52] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: night)
[21:15:10] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[21:15:29] *** Quits: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: brendan)
[21:16:24] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[21:19:24] <Kelet> Does make install work on Windows if so what is the default instruction directory?
[21:19:34] <Kelet> installation*
[21:22:33] <strcat> pcwalton: ah it wants a list of functions to preserve
[21:22:38] <pcwalton> yeah
[21:22:52] * strcat finds it odd that the default is to remove everything
[21:22:54] <CurlyBrace> Hello
[21:23:03] *** Joins: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:23:04] <CurlyBrace> I'm trying to run background tasks in the same shell
[21:23:15] <CurlyBrace> is 'do spawn' a bad way to do this?
[21:24:10] *** Quits: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Leaving)
[21:24:21] <strcat> CurlyBrace: that's a good way to do it, but std::run isn't asynchronous yet so you'll need to ask for 1 thread per task
[21:24:28] <strcat> I guess via spawn_sched
[21:25:44] *** Quits: vodik (simon@moz-6A4BB064.net.uwaterloo.ca) (Ping timeout)
[21:26:18] *** Joins: vodik (simon@moz-C1E7BA97.net.uwaterloo.ca)
[21:26:46] <CurlyBrace> Hmm...
[21:26:55] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:27:02] <acrichto> CurlyBrace: if you're brave and don't use std::io, you could try using std::rt::io::process
[21:27:12] *** Quits: vodik (simon@moz-C1E7BA97.net.uwaterloo.ca) (Quit: WeeChat 0.4.2-rc2)
[21:27:22] *** Quits: heftig (heftig@moz-67BFBDEB.dip0.t-ipconnect.de) (Quit: Quitting)
[21:28:34] *** Quits: aeqwa (aeqwa@moz-30A6CC5A.dsl.tropolys.de) (Quit: Lost terminal)
[21:29:22] <CurlyBrace> I will look into both, thanks
[21:29:55] <mitsuhiko> oh wow. the raw string conversation is still going
[21:30:13] *** Joins: jgilbert_ (jgilbert@moz-7B0110AD.mv.mozilla.com)
[21:30:14] <jeaye> Kelet: It should work (though I don't use Windows). Check in /usr/local/lib 
[21:30:23] <steveklabnik> cmr: i pushed a big update for rust for rubyists, it just uses straight pandoc and make now :)
[21:30:29] *** Quits: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[21:30:31] *** Quits: dave1629 (dave@1F4C6600.C422786F.DDE5D3F6.IP) (Quit: dave1629)
[21:30:54] *** Joins: maik (maik@moz-9F5FA6A1.dip0.t-ipconnect.de)
[21:31:18] <acrichto> r? https://github.com/mozilla/rust/pull/9336
[21:31:29] <CurlyBrace> forgive me, but what is the proper syntax for the spawn_sched?
[21:31:47] <CurlyBrace> spawn_sched(1) { print("test"); }       doesn't work
[21:31:59] <cmr> steveklabnik: did you incorporate the 0.8 changes I sent out?
[21:32:02] <strcat> CurlyBrace: std::task::spawn_shed
[21:32:11] <strcat> spawn/spawn_sched are just regular functions
[21:32:20] <strcat> 'do' is sugar for calling a function taking a closure as the last parameter
[21:34:40] <steveklabnik> cmr: that's next
[21:34:49] <steveklabnik> i have your emails saved
[21:36:22] <CurlyBrace> do spawn_sched(1) { print("Test") }; is not working, I think I am missing something obvious
[21:36:31] *** Quits: Ferio (Mibbit@moz-23CDE542.fullrate.dk) (Quit: http://www.mibbit.com ajax IRC Client)
[21:36:43] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[21:36:52] <CurlyBrace> do spawn_sched(1) { print("Test"); }; I mean
[21:36:55] <strcat> CurlyBrace: the parameter is a SchedMode
[21:37:04] <strcat> CurlyBrace: http://seld.be/rustdoc/master/std/task/fn.spawn_sched.html
[21:37:07] *** Quits: jgilbert_ (jgilbert@moz-7B0110AD.mv.mozilla.com) (Connection reset by peer)
[21:37:40] <strcat> I keep forgetting that the new docs are on rust-lang.org now
[21:37:40] *** Joins: jgilbert_ (jgilbert@moz-7B0110AD.mv.mozilla.com)
[21:37:57] <cmr> Me too :P
[21:38:02] <doomlord_> the new docs are awesome.
[21:38:02] <cmr> seld.be is so short and pleasant, too...
[21:38:18] <jeaye> doomlord_: Agreed
[21:38:19] <Seldaek> i'm not for sale :p
[21:39:05] <Seldaek> cmr: it'd be good to have doc.rust-lang.org at least, more morable and browser autocomplete would quickly remember it for you
[21:39:17] <cmr> morable?
[21:39:21] <cmr> memorable? :P
[21:39:25] <Seldaek> yes indeed
[21:39:25] <sp3d> ^, "static." is an implementation detail
[21:39:36] *** Joins: bt3ze (bt3ze@2D851E54.65B70227.DDE5D3F6.IP)
[21:40:07] <CurlyBrace> I'm sorry, srtcat, I don't understand how to make a spawn_sched :(
[21:40:14] <jeaye> doc.rust-lang.org would be good
[21:40:21] <strcat> CurlyBrace: it's just a function
[21:40:27] <strcat> you don't have to use 'do'
[21:40:40] <flaper87> olsonjeffery: do you know what the home_for_io thing is for?
[21:41:02] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[21:41:04] <flaper87> olsonjeffery: https://github.com/mozilla/rust/blob/master/src/libstd/rt/uv/uvio.rs#L1381
[21:41:08] <flaper87> or anyone ^
[21:41:26] *** Quits: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: brendan)
[21:41:29] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Quit: tikue_)
[21:42:08] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[21:42:38] <acrichto> flaper87: uv I/O must occur on the same task that the uv object was created on (in the same uv_loop), and tasks can migrate amonng schedulers
[21:42:52] <acrichto> so home_for_io brings the task back to its home scheduler to the original io_loop
[21:43:04] <flaper87> acrichto: that makes thanks! Thank you!
[21:44:36] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[21:44:57] *** Joins: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:45:05] <strcat> great, LLVM decided to rebuild again
[21:45:18] <flaper87> strcat: I feel your pain
[21:45:46] <strcat> don't understand why...
[21:46:16] <kmc> i'm told ccache is good for that
[21:46:30] <cmr> to an extent
[21:46:32] <strcat> not-ignoring-the-modification-dates would be good too :)
[21:46:39] <strcat> I blame git
[21:47:19] <strcat> I could add a git hook to touch all that llvm stuff with -d 1984-01-01
[21:47:21] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[21:47:35] <flaper87> hehe
[21:47:46] <CurlyBrace> I'm really sorry, I don't know how to make a new schedMode (at least I assume that's the problem here): std::task::spawn_sched(SchedulerHandle(1), print("Test"));
[21:48:40] <strcat> rusti: std::task::spawn_sched(std::task::DefaultScheduler, || ())
[21:48:41] -rusti- error: internal compiler error: unexpected failure
[21:48:41] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[21:48:42] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[21:48:42] -rusti- ()
[21:48:44] <strcat> um
[21:48:52] <strcat> wat
[21:48:56] <strcat> rusti: std::task::spawn_sched(std::task::DefaultScheduler, || ())
[21:48:57] -rusti- ()
[21:49:02] <strcat> oh just from rustc -v
[21:49:33] <strcat> brson: seems like the rustc -v problem is more reproducible while under load
[21:49:40] <strcat> I'm building LLVM with -j8
[21:49:55] <strcat> maybe just a coincidence...
[21:49:56] <CurlyBrace> ...is rusti a bot that tries to compile/run the code pasted into chat?
[21:50:01] <strcat> CurlyBrace: yes
[21:50:04] <kmc> code addressed to it, yes
[21:50:05] <CurlyBrace> oooo
[21:50:12] <kmc> rusti: ~"hello world"
[21:50:13] -rusti- ~"hello world"
[21:50:14] <strcat> rusti: range(0, 10).fold(0, |a, b| a + b)
[21:50:15] -rusti- error: internal compiler error: unexpected failure
[21:50:15] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[21:50:15] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[21:50:15] -rusti- 45
[21:50:23] <strcat> that ICE is from it running 'rustc -v'
[21:50:25] <kmc> haha
[21:50:26] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Ping timeout)
[21:50:26] <strcat> which is buggy...
[21:50:30] <strcat> rusti: version
[21:50:31] -rusti- error: internal compiler error: unexpected failure
[21:50:32] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[21:50:32] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[21:50:32] -rusti- "rustc 0.8 (c1b187d 2013-09-23 21:06:03 -0700)"
[21:50:34] <strcat> for that static.
[21:50:53] <strcat> I should just ignore stderr output from the rustc -v command, *sigh*
[21:51:06] *** Joins: exobit_ (foo@moz-90D1B547.nycmny.fios.verizon.net)
[21:51:10] <strcat> at least that indicates it happens after it prints to stdout
[21:51:18] *** Joins: heftig (heftig@moz-AACE7C14.dip0.t-ipconnect.de)
[21:51:22] <CurlyBrace> Ah, thanks guys
[21:51:29] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Connection reset by peer)
[21:51:31] <mcpherrin> strcat: Or hardcode that string into your template file as part of your rustc build process 
[21:51:48] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[21:51:55] <strcat> mcpherrin: I don't build rust, I install a package build on Arch's build server daily
[21:52:06] <strcat> (at least, except when I'm working on rust)
[21:52:11] <strcat> built on*
[21:52:20] <flaper87> damnit, need to borrow a mutable reference more than once! 
[21:52:20] <mcpherrin> well, install package is equivalent to building :P
[21:52:29] <strcat> I don't really want to make it hardcode it in the chroots
[21:52:32] <flaper87> is there a 'safe' way to do that?
[21:52:34] <mcpherrin> sure
[21:52:46] <flaper87> except from not doing it :P
[21:52:52] <strcat> flaper87: you can't
[21:53:01] <flaper87> thought so
[21:53:05] <strcat> flaper87: can you split it into multiple &mut that aren't overlapping instead? that's safe
[21:53:25] *** Joins: ciferkey (ciferkey@moz-23B74E52.wireless.umass.edu)
[21:53:40] <strcat> rusti: let t = (1, 2); let (ref mut x, ref mut y) = t; *x = 10; *y = 20; t
[21:53:41] -rusti- pastebinned 11 lines of output: http://sprunge.us/afTL
[21:53:42] <flaper87> nope, signatures require &mut self
[21:53:52] <strcat> rusti: let mut t = (1, 2); let (ref mut x, ref mut y) = t; *x = 10; *y = 20; t
[21:53:53] -rusti- error: internal compiler error: unexpected failure
[21:53:53] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[21:53:53] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[21:53:53] -rusti- (10, 20)
[21:54:00] <strcat> stupid rustc -v....
[21:54:44] <strcat> flaper87: so you need to call two &mut self methods? afaik it should work as long as the calls are sequential and they don't return something from the region
[21:55:05] <strcat> mut_self_one(mut_self_two()) won't work
[21:55:17] <strcat> but 'let tmp = mut_self_two(); mut_self_one(tmp)' will
[21:55:21] <strcat> that's a borrowck limitation
[21:55:30] *** Quits: TheDust (Stijn@moz-8C2076C2.upc-d.chello.nl) (Connection reset by peer)
[21:56:57] <flaper87> strcat: yeah, my case is the first one: mut_self_one(mut_self_two())
[21:57:15] *** Quits: themgt (themgt@moz-EEE4DC4.baf.movistar.cl) (Quit: Pogoapp - http://www.pogoapp.com)
[21:57:44] <strcat> flaper87: yeah just need to manually hoist it out
[21:57:53] *** Quits: maik (maik@moz-9F5FA6A1.dip0.t-ipconnect.de) (Ping timeout)
[21:58:06] <Seldaek> happy to get feedback on this if anyone feels like https://github.com/graydon/rust-www/pull/8 
[21:59:28] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[21:59:44] <flaper87> Seldaek: unreleated, you're in Switzerland, right?
[21:59:59] <Seldaek> I am yes, zurich
[22:00:11] <jeaye> Seldaek: I like it.
[22:00:18] <SiegeLord> Seldaek: Don't see the point
[22:00:35] <SiegeLord> A cluttered sidebar is replaced with a cluttered header
[22:01:02] <dbaupp> pcwalton: ping
[22:01:02] <flaper87> Seldaek: awesome, I'm in Lake of Como - Italy (like 3h from Zurich), I may be going there soon, would you like to catch up and do some rust-hacking ?
[22:01:28] <dbaupp> acrichto: that's weird (I have a feeling that the inline-attribute checker only takes the first one anyway, so it might not change anything?)
[22:01:39] <pcwalton> dbaupp: pong
[22:01:46] *** Joins: squiddy (squiddy@moz-AAA957C3.adsl.alicedsl.de)
[22:01:48] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[22:01:57] <pcwalton> if you saw the backscroll we think part of the problem is fixed stack segment inlining doesn't work
[22:02:02] <pcwalton> or rather is disabled
[22:02:06] <dbaupp> pcwalton: it's very unlikely that Go is legitimately faster than us on the ray-tracer (i'ts mine, btw)
[22:02:09] <strcat> I tried a different RNG so it's not that
[22:02:13] <dbaupp> https://github.com/kid0m4n/gorays/commit/249f229ba8c769c38d7dc018acfdf29cc86d6e43
[22:02:14] <Seldaek> SiegeLord: I think it's slightly less cluttered, though not as much as I'd like but I didn't want to get too flamed for removing stuff
[22:02:16] <pcwalton> yeah, I saw that
[22:02:19] *** Quits: rlbaker (rlbaker@moz-D05907D4.hfc.comcastbusiness.net) (Quit: rlbaker)
[22:02:22] <SiegeLord> Seldaek: And if you have to explain what # is, then it's probably a wrong decision :P
[22:02:27] <pcwalton> we should be at C++ level though
[22:02:32] <strcat> dbaupp: the way to really debug it is making one in C++ and rust at the same time, and comparing IR for each function
[22:02:32] <benh> How much faster is go currently?
[22:02:37] <pcwalton> slightly
[22:02:38] <pcwalton> 10%
[22:02:39] <Seldaek> SiegeLord: but sure, it's not fixing all issues, there is much more work but I'm trying to get a quick win here
[22:02:59] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[22:03:01] <strcat> make tidy always finds my test files and gets mad
[22:03:02] <dbaupp> strcat: well there is one in C++, original.cpp should be essentially directly comparable
[22:03:10] <SiegeLord> Seldaek: I'm saying all your fixes in the header are applicable to the sidebar just as well
[22:03:11] <strcat> dbaupp: yeah, but it needs to line up exactly
[22:03:13] <strcat> same functions in each
[22:03:15] <strcat> bottom-up
[22:03:20] <strcat> so you can compare IR
[22:03:48] <Seldaek> flaper87: we can have a beer for sure, I'm just out of town next two weeks until 15th oct, so depends when you come around
[22:03:49] <strcat> at some point you'll find somewhere that rust is different, and you have a problem if not *the* problem
[22:04:04] <strcat> that's how I've dealt with making iterators as fast as C++, at least
[22:04:22] <flaper87> Seldaek: I think it'll be end of October or mid Nov. Will let you know! 
[22:04:43] <dbaupp> strcat: I see; I take it "exactly" means #[no_std]; too
[22:04:44] <dbaupp> ?
[22:04:46] <Seldaek> SiegeLord: yes and no, I'd still argue it's easier to scan the headers horizontally than to have to parse the whole sidebar, but obviously this may be just me
[22:04:47] <strcat> dbaupp: yeah
[22:04:56] <strcat> same I/O calls, etc.
[22:04:58] <flaper87> Seldaek: any chance you're going to PyCon Ireland?
[22:05:04] <strcat> it's too painful to debug if it's not exactly the same
[22:05:30] <dbaupp> strcat: yeah; I imagine that would be a lot of effort.
[22:05:35] <Seldaek> flaper87: nope not really my thing :)
[22:05:48] <flaper87> Seldaek: heh, kk!
[22:06:34] <Seldaek> flaper87: but yes do let me know (in PM if I don't answer), I also wanted to hold a meetup some time just to give a quick intro to the language and maybe gather more interest around here
[22:06:35] *** Quits: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca) (Quit: canhtak)
[22:06:41] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[22:06:43] <strcat> dbaupp: like, it'd always end up being a specific cast or something causing the issue
[22:06:53] <strcat> so I've given up on profiling to compare
[22:06:55] <strcat> vimdiff!
[22:06:57] <strcat> ;p
[22:07:24] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[22:07:24] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:07:28] *** Joins: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca)
[22:07:35] <strcat> haha, @mut bool
[22:07:51] <Luqman> building_library?
[22:08:03] *** Quits: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca) (Quit: canhtak)
[22:08:05] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[22:08:15] <strcat> yeah
[22:08:18] *** Joins: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca)
[22:08:20] *** Quits: CarpNet (Alasdair@moz-EF831A5E.cable.virginmedia.com) (Quit: Leaving)
[22:08:57] <Luqman> strcat: i remember thinking that was weird when I needed to dereference it. why is it that anyways?
[22:09:08] <strcat> no idea
[22:09:17] *** Quits: josedonizetti (josedonize@DF22210B.35D9DDB.8EF76F75.IP) (Ping timeout)
[22:09:20] <strcat> seems like after you initialize it, you're never going to need to change it...
[22:09:59] <strcat> dbaupp: comparing the IR is easier than you'd think
[22:10:02] <strcat> ;p
[22:10:05] *** Quits: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[22:10:55] <dbaupp> strcat: but rewriting the runtime dependent bits is slightly harder :P
[22:11:09] <strcat> dbaupp: it's no harder than writing the C++ though
[22:11:44] <dbaupp> strcat: I didn't write the C++
[22:11:49] * strcat shrugs
[22:12:39] *** Joins: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com)
[22:15:12] <Kelet> How do I set RUST_PATH so that Rust can find my 'package std'? I've tried setting it to the bin directory that 'make install' made with no luck.
[22:15:45] <Kelet> Trying to use 'rustpkg build' on a project comes up with 'error: Couldn't find package std, which is needed by...'
[22:17:12] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[22:17:50] <tjc> Kelet: can you gist your code?
[22:19:23] <tjc> brb
[22:19:31] *** Quits: tautologico (shung@E14878C0.75051ED3.7B974E06.IP) (Quit: tautologico)
[22:19:31] <Kelet> tjc, Trying to build https://github.com/JeremyLetang/rust-sfml
[22:19:42] <dbaupp> cmr: ping
[22:20:47] <pcwalton> servo reflow is now 63% slower than Gecko
[22:20:54] <pcwalton> switching from match to virtual methods won 15%
[22:21:18] <SiegeLord> How big were those matches?
[22:21:20] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[22:21:25] <pcwalton> not big but there were a lot of them
[22:21:27] <pcwalton> 4 cases
[22:21:41] <tjc> Kelet: and you're typing `rustpkg build github.com/JeremyLetang/rust-sfml` ?
[22:21:47] <pcwalton> there's more I can do
[22:22:02] <SiegeLord> I expected a crossover, but I didn't expect it for small matches ._.
[22:22:07] <strcat> pcwalton: could you just make it an array?
[22:22:08] <pcwalton> virtual methods are great
[22:22:13] <Kelet> tjc, No, I've cloned the code and I'm typing 'rustpkg build rsfml' in the main directory.
[22:22:16] <pcwalton> strcat: make what an array?
[22:22:25] <pcwalton> modern CPUs really optimize perf of virtual methods due to C++
[22:22:31] <strcat> pcwalton: whatever it needs those matches for
[22:22:40] <strcat> I thought it was just translating enum values or something
[22:22:43] <pcwalton> not really
[22:22:46] <pcwalton> oh no
[22:22:52] <pcwalton> it's for taking different actions based on what kind of RenderBox something is
[22:22:57] <strcat> ah
[22:23:00] <tjc> Kelet: ok, I'll try that and see if I get the same error as you
[22:23:32] <strcat> pcwalton: so you have an enum with the possible kind?
[22:23:39] <strcat> what does LLVM make for a match? table of fn ptrs?
[22:23:42] <pcwalton> yeah, brb
[22:23:47] <pcwalton> it makes a jump table
[22:23:51] *** Quits: heftig (heftig@moz-AACE7C14.dip0.t-ipconnect.de) (Quit: Quitting)
[22:24:00] *** Joins: heftig (heftig@moz-AACE7C14.dip0.t-ipconnect.de)
[22:24:34] <sp3d> I still think there's potential for a lot of interesting low-level optimization of some matches
[22:24:52] <tjc> Kelet: also, what's the output of `rustpkg --version` ?
[22:25:13] <strcat> LLVM lacks breadth of optimization techniques
[22:25:22] <Kelet> rustpkg 0.8 (e3624ed 2013-09-24 11:46:02 -0700)
[22:25:22] <Kelet>  host: i686-pc-mingw32
[22:25:29] <strcat> it's only competitive with gcc because it's much more consistent with what it does have, due to good testing/code
[22:25:32] <sp3d> comparing something to a set of possibilities vs. comparing sequentially to individual ones seems underexplored
[22:26:01] <strcat> sp3d: well, llvm does have switch lowering techniques
[22:26:06] <tjc> Kelet: ok -- with a version that's slightly older than yours, I go into my ~/.rust/src directory; do `git clone https://github.com/JeremyLetang/rust-sfml` -
[22:26:16] <tjc> and then `rustpkg build rsfml`
[22:26:17] <strcat> sp3d: gcc is smarter in regards to this, it has more techniques
[22:26:22] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[22:26:26] <tjc> and I get a link error about csfml-system, but otherwise it builds
[22:26:29] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[22:26:34] <sp3d> mm
[22:27:02] <sp3d> switch-lowering in this context => just making jump tables or doing computed jumps?
[22:27:58] <brson> anybody have opinions about https://github.com/graydon/rust-www/pull/8
[22:28:01] <sp3d> I was thinking things like inlining and special-casing bits of strcmp for example, maybe doing things along the lines of generating a custom hash function for string matches which could be used for a computed jump
[22:28:31] <strcat> sp3d: gcc knows how to do that kind of thing
[22:28:54] <sp3d> nifty, I'll have to see if I can coerce it to on some rust-match-like C
[22:29:08] <sp3d> any tips for doing that or finding the relevant code for perusal?
[22:29:30] <strcat> sp3d: http://llvm.org/docs/doxygen/html/LowerSwitch_8cpp_source.html that's where LLVM does it
[22:29:42] <dbaupp> strcat: does LLVM have a concept of a write-only pointer?
[22:29:45] <strcat> it knows how to reorder to make them dense, etc.
[22:29:57] <strcat> dbaupp: no, afaik - why?
[22:30:08] <strcat> it has the concept of pointers to immutable data and read-only pointers
[22:30:42] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[22:30:43] <strcat> maybe optimization passes have internal ideas of write-only, but not the bytecode
[22:31:24] <dbaupp> ok, just wondering if we were missing the last piece of the mutable jigsaw (but we're apparently not)
[22:31:35] *** Quits: mark_edward (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[22:31:49] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[22:32:03] <strcat> I think I'll add a -Z alias-analysis with that kind of thing communicated
[22:32:09] <strcat> until we fix every transmute in the codebase ;p
[22:32:15] <Kelet> What *is* the 'std' package? Is it this std*.dll in the bin folder?
[22:32:22] <strcat> it won't strictly be alias analysis though
[22:32:34] <strcat> can start with marking &T for T: Freeze parameters as readonly
[22:32:52] <strcat> spitting out tbaa nodes for &T marking it readonly too
[22:32:55] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[22:33:45] <acrichto> dbaupp: did you end up concluding that attributes are emitted to metadata?
[22:34:11] <dbaupp> acrichto: hm? (context?)
[22:34:17] <acrichto> dbaupp: function attributes
[22:34:23] <acrichto> dbaupp: from your work with deprecated attributes
[22:34:38] <dbaupp> acrichto: oh, yes. non-methods do get their attributes emitted
[22:34:52] <acrichto> non-methods?
[22:34:59] <acrichto> like statics/enums/types?
[22:35:00] <dbaupp> i'm not sure about non-methods (since I didn't get method look up to work)
[22:35:07] <dbaupp> non-method functions
[22:35:16] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[22:35:22] *** Quits: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP) (Quit: Leaving)
[22:35:22] <acrichto> do you know about statics/enums?
[22:35:26] <dbaupp> but yeah, I believe enums and structs get attributes emitted too
[22:35:31] <dbaupp> not sure about statics
[22:35:41] <acrichto> huh ok, just curious
[22:35:42] <dbaupp> (nor about struct fields; but enum variants do)
[22:35:45] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[22:36:05] <dbaupp> *i'm not sure about methods
[22:36:19] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[22:36:19] *** ChanServ sets mode: +o tjc
[22:37:03] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[22:37:40] *** Quits: heftig (heftig@moz-AACE7C14.dip0.t-ipconnect.de) (Quit: Quitting)
[22:38:42] *** Joins: heftig (heftig@moz-AACE7C14.dip0.t-ipconnect.de)
[22:38:46] *** Joins: jviereck (Adium@moz-D03659.dip0.t-ipconnect.de)
[22:39:04] *** ChanServ sets mode: +o brson
[22:39:52] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[22:40:31] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[22:41:47] <acrichto> tjc: r? https://github.com/mozilla/rust/pull/9336
[22:42:37] <tjc> acrichto: r+'ed
[22:42:42] <acrichto> woohoo!
[22:42:42] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[22:42:46] <acrichto> thanks
[22:45:59] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[22:45:59] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/ah5vUw
[22:45:59] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[22:46:42] *** Quits: ciferkey (ciferkey@moz-23B74E52.wireless.umass.edu) (Quit: )
[22:48:33] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Quit: Lost terminal)
[22:48:40] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[22:49:09] *** Quits: jviereck (Adium@moz-D03659.dip0.t-ipconnect.de) (Quit: Leaving.)
[22:49:23] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[22:51:42] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[22:52:06] *** Joins: steveklabnik (steveklabn@moz-E61C28C3.lsan.ca.megapath.net)
[22:52:07] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[22:52:14] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:52:22] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:52:39] *** Quits: mdu (mdu@moz-2989B319.rev.numericable.fr) (Quit: mdu)
[22:53:38] *** Quits: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: brendan)
[22:53:42] *** Joins: rlbaker (rlbaker@moz-D05907D4.hfc.comcastbusiness.net)
[22:54:23] *** Quits: rlbaker (rlbaker@moz-D05907D4.hfc.comcastbusiness.net) (Quit: rlbaker)
[22:55:47] *** Joins: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net)
[22:58:03] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:58:57] *** Quits: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[22:59:14] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[23:00:12] *** Quits: victorporof (victorporo@8CD8EBC4.60E0D239.9B1E38F4.IP) (Ping timeout)
[23:00:37] *** Joins: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP)
[23:01:23] *** Joins: victorporof (victorporo@8AB918FF.D4B9BCD.9B1E38F4.IP)
[23:01:38] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[23:02:37] <brson> how do you register a channel with botbot.me?
[23:02:54] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[23:04:28] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[23:05:48] <indirect> brson: according to twitter, "Have an op for the channel send us an email at beep@botbot.me."
[23:07:32] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[23:07:50] <brson> how do I contact an admin of the mozilla irc network?
[23:08:06] <indirect> that one, I have no idea about, sorry
[23:08:11] <indirect> I'm only well-versed in freenode :P
[23:08:15] <brson> i was told to use #helpdesk but it's empty
[23:08:43] *** Quits: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[23:08:53] <strcat> brson: there's also http://irclog.gr/
[23:09:18] <strcat> meh, the bot doesn't seem to take commands ;p
[23:09:34] <brson> strcat: it seems like we prefer botbot.me now?
[23:09:52] <brson> we're losing precious space in our title to two different loggers
[23:09:53] <bjz> tjc: what was that command to init a new project?
[23:10:23] <jack> bjz: rustpkg init?
[23:10:33] <bjz> ahh neat :)
[23:11:56] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[23:12:23] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[23:12:29] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[23:13:34] <dbaupp> strcat: how to I get a .ll out of clang?
[23:13:54] *** Joins: bogen (dwight@moz-8B4E7E75.dsl.rcsntx.swbell.net)
[23:14:12] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[23:14:22] <strcat> dbaupp: -S -emit-llvm -o -
[23:14:30] <strcat> well, without -o - if you actually want a file
[23:14:46] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[23:14:52] *** Quits: Luqman (laden@moz-DCEF6040.csclub.uwaterloo.ca) (Quit: leaving)
[23:15:02] <dbaupp> strcat: that's only giving me a .s?
[23:15:10] *** Joins: Luqman (laden@moz-DCEF6040.csclub.uwaterloo.ca)
[23:15:49] <strcat> dbaupp: yeah, but if you passed -emit-llvm it's IR instead of ASM
[23:15:50] <bjz> tjc: is there a way to reupdate a workspace's remote deps?
[23:16:00] <dbaupp> strcat: oh
[23:16:07] <strcat> dbaupp: it will also produce IR instead of ASM if you use -flto -S
[23:16:08] <tjc> bjz: It *should* always do that for you automatically
[23:16:12] <tjc> hmm, actually
[23:16:16] <strcat> since it has to read it all in and optimize again to link ;]
[23:16:21] <tjc> with workcache, I guess it won't
[23:16:22] <tjc> that's interesting
[23:16:48] <tjc> bjz: this is sort of a "to do". right now you could just manually figure out where the sources are cached and pull them in there :-)
[23:16:55] <tjc> I'll make an issue
[23:18:01] <bjz> tjc: I wouldn't want it to re-download things everytime I build, or rely on a network connection is all
[23:18:12] <steveklabnik> tjc: i'm updating rust for rubyists for 0.8. should i convert it to using rustpkg rather than a makefile? it's trivial stuff that WILL work
[23:18:59] <tjc> bjz: I think this'll require discussion. certainly it shouldn't rely on a network connection. Not sure how it should handle the "upstream changes" case
[23:19:00] <steveklabnik> or, maybe, skip all that and just use 'rust run'
[23:19:11] <steveklabnik> since they're single files
[23:19:11] <tjc> bjz: though you can always stop it from downloading by specifying a particular revision
[23:19:13] <tjc> steveklabnik: Sure!
[23:19:17] <tjc> I think it would be a good time to do that
[23:19:22] <steveklabnik> cool
[23:19:27] *** Joins: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP)
[23:19:43] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Client exited)
[23:19:54] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[23:20:04] <bjz> tjc: is the syntax for including git repos: extern mod cgmath = "https://github.com/bjz/cgmath-rs";
[23:20:14] <bjz> tjc: I get an error :/
[23:20:26] *** Joins: ofeldt- (ofeldt@moz-E0ED28D.dip0.t-ipconnect.de)
[23:20:34] <steveklabnik> bjz: leave off the https
[23:20:37] <tjc> bjz: you don't need the https://
[23:20:40] <bjz> ahh
[23:20:41] <tjc> but the error message should be better
[23:20:46] <steveklabnik> r+++++++
[23:20:55] <steveklabnik> should that be a bug?
[23:20:59] *** Quits: Luqman (laden@moz-DCEF6040.csclub.uwaterloo.ca) (Input/output error)
[23:20:59] <steveklabnik> i was thinking that too
[23:21:06] <tjc> steveklabnik: Yes, but I think there's already an issue, let me check
[23:21:07] *** Quits: ofeldt (ofeldt@moz-56FD8CD3.dip0.t-ipconnect.de) (Ping timeout)
[23:21:08] <kmc> if you can't specify https:// then how do you have a hope of distributing software securely?
[23:21:11] *** Joins: Luqman (laden@moz-DCEF6040.csclub.uwaterloo.ca)
[23:21:13] <bjz> tjc: yeah: error: Couldn't find package https://github.com/bjz/cgmath-rs, which is needed by basis-0.1, in any of the workspaces in the RUST_PATH (~[std::path::PosixPath{is_absolute: true, components: ~[~"Users", ~"
[23:21:17] <tjc> kmc: it uses https by default
[23:21:21] <bjz> tjc: :)
[23:21:22] <kmc> interesting
[23:21:25] <kmc> i approve :)
[23:21:42] <kmc> is there a HTTP fallback and if so, how do you prevent an attacker from forcing that
[23:21:44] <bjz> tjc: ark: error: Couldn't find package github.com/bjz/cgmath-rs, which is needed by basis-0.1, in any of the workspaces in the RUST_PATH (~[std::path::PosixPath{is_absolute: true, components: ~[~"Users", ~"brendan"
[23:23:05] <tjc> bjz steveklabnik : Made one - https://github.com/mozilla/rust/issues/9477
[23:23:17] <tjc> bjz: can you gist your code?
[23:23:39] <bjz> tjc: it's literally just: extern mod cgmath = "github.com/bjz/cgmath-rs";
[23:23:50] <tikue_> is there a reason -O isn't enabled by default with rustc?
[23:23:50] <tjc> bjz: ok, thought maybe there was more to it :-)
[23:23:55] <tjc> I'll try it, but I do have to leave in about 5 minutes
[23:23:59] <bjz> tjc: rustpkg build basis
[23:24:01] <bjz> np
[23:24:21] <bjz> tjc: does it need to specify the .git?
[23:25:11] <doomlord_> RUST_PATH .. should that be set to the base of the github project, or to the src directory in there
[23:25:25] <tjc> doomlord_: the base
[23:25:26] <cmr> dbaupp: pong
[23:25:32] <tjc> bjz: it shouldn't...
[23:25:37] <bjz> :s
[23:25:46] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:26:17] *** flaper87 is now known as flaper87|afk
[23:26:25] *** Quits: bt3ze (bt3ze@2D851E54.65B70227.DDE5D3F6.IP) (Ping timeout)
[23:26:26] <tjc> bjz: ok, that *should* work, and it doesn't work for me either
[23:26:34] <bjz> heh
[23:26:37] <tjc> bjz: I have to run, but if you wanted to file a bug and assign it to me, I'd appreciate it
[23:26:43] <bjz> oki
[23:26:48] <tjc> thanks!
[23:26:54] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[23:27:07] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[23:27:35] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Input/output error)
[23:28:22] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[23:28:40] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[23:29:24] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[23:29:34] *** Quits: squiddy (squiddy@moz-AAA957C3.adsl.alicedsl.de) (Ping timeout)
[23:31:08] <dbaupp> cmr: it appears that tehre are now benches after the middle of august?
[23:31:40] <cmr> dbaupp: there should be?
[23:32:29] <cmr> It's benching the past 482 PRs
[23:32:33] <cmr> In commit order
[23:32:43] <cmr> (as in, SHA1 lexicographic order)
[23:32:53] <bstrie> waht
[23:33:04] <bstrie> the best order
[23:33:13] <cmr> cd ~/hacking/rust-benching/build; for dir in /mnt/rustb/*; do benchit.py $(basename $dir); done
[23:33:20] <bogen> is there a way to get to the last element of a vector with using length () - 1 ?
[23:33:38] <cmr> bogen: not really. `vec.last()` just does len()-1 behind the scenes.
[23:35:13] *** Quits: miza (miza@moz-908EA8DE.home.otenet.gr) (Input/output error)
[23:36:00] <bogen> `vect.last ()` is what I want, I just did not notice that in the documenation, and looking at it now it seems to only be for an immutable vector 
[23:36:11] <brson> r? https://github.com/mozilla/rust/pull/9480
[23:36:16] <strcat> brson: it's for &[T]
[23:36:18] <strcat> er
[23:36:20] <strcat> bogen: *
[23:36:23] <strcat> which works for any vector
[23:37:04] <strcat> brson: yay
[23:37:29] <bogen> strcat: yeah, I see that. Thanks (when I search the docs `last` only showd up for immutable vectors.
[23:37:40] <ChrisMorgan> ImmutableVector is a bit misleading as a name.
[23:37:42] <engla> that's kind of amusing how every executable was using exit()
[23:38:06] <bogen> strcat: but it works for my stack usage to get top
[23:38:21] <engla> bogen: all vectors coerce to the &[T] type, so they are available to call on ~[T], and other kinds of vectors
[23:38:47] <cmr> kimundi: https://github.com/mozilla/rust/pull/9442
[23:38:53] <cmr> kimundi: how is find different than filter?
[23:38:53] *** Quits: hoverbear (andrew@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: hoverbear)
[23:38:59] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[23:40:00] <engla> I can explain. it uses CharEq just like CharSplitIterator, which matches with either a char, or a function, or matching any char in a slice of char
[23:40:21] <engla> secondly it's specialized to search by byte value when the CharEq allows that
[23:40:22] <cmr> kimundi: oh it's in strings!
[23:40:24] <cmr> nevermind
[23:40:37] <cmr> yeah I see now
[23:41:09] *** Joins: jclements (jclements@moz-31F54FC5.wireless.calpoly.edu)
[23:41:34] <dbaupp> cmr: I see; I guess I'm surprsised that all the commits are before august
[23:41:51] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Ping timeout)
[23:41:53] <cmr> dbaupp: it should be doing them in a fairly random chronological order
[23:41:55] <dbaupp> cmr: I'd assume that the hashes would be approximately evenly distributed
[23:41:58] <jclements> cmr: time to review a near-trivial 62-line pull request? https://github.com/mozilla/rust/pull/9481
[23:42:13] <dbaupp> cmr: yeah, so *not* having any recent ones is very weird
[23:42:46] <cmr> dbaupp: perhaps multibuilder is doing it wrong? it does *pull*, doesn't it?
[23:42:57] <dbaupp> cmr: no
[23:43:01] <cmr> that'd be it
[23:43:06] <dbaupp> cmr: (unless you added it)
[23:43:14] <dbaupp> oh, is your original repo very old?
[23:43:15] <cmr> I didn't
[23:43:17] <cmr> yeah
[23:43:26] <cmr> I'll add that in
[23:43:32] <cmr> I have a commit to push anyway
[23:43:37] <cmr> (Colored messages!)
[23:44:01] <dbaupp> you could also do a normal pull now, and restart multibuilder
[23:44:03] <dbaupp> (yay!)
[23:44:12] <cmr> multibuilder can't run while it's benchmarking
[23:44:31] <dbaupp> yes
[23:44:39] <dbaupp> but the old benchmarks are not very interesting
[23:44:52] <dbaupp> so it'd be better to just start some new builds going
[23:45:00] <cmr> is the new data on the site?
[23:45:00] *** Quits: jclements (jclements@moz-31F54FC5.wireless.calpoly.edu) (Quit: jclements)
[23:45:27] <dbaupp> yeah
[23:45:44] <dbaupp> but it's mixed in with the old stuff, so it can't be seen very easily
[23:45:47] <kimundi> cmr: To be fair, it basically works like .offset_char_iter().filter(|(_, c)| pred(c)).map(|(i, _)| i)
[23:46:32] <kimundi> cmr: Though there where complications, and in the end writing half of it manually where the easiest solution
[23:47:46] *** Joins: skoizza (Mibbit@moz-5AD217F0.hsd1.va.comcast.net)
[23:48:31] <dbaupp> strcat: https://github.com/huonw/card-trace/blob/master/no_std.rs (I haven't converted the C++ one to match it exactly yet, but I'm getting there)
[23:49:46] <Luqman> dbaupp: #[abi = "cdecl"] doesn't do anything
[23:51:27] <dbaupp> Luqman: oh
[23:51:34] <dbaupp> Luqman: I was just cribbing of std::libc
[23:51:42] <dbaupp> *of
[23:51:43] <dbaupp> *off
[23:52:06] <Luqman> we should probably clean that up, now it's:  extern "ABI" { ... }
[23:52:11] *** Quits: CurlyBrace (Mibbit@6C098C0E.4DB138C4.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:52:52] <dbaupp> heh, std::unstable::intrinsics has #[abi = "rust-intrinsic"] extern "rust-intrinsic" { .. }, just to be safe.
[23:52:57] <skoizza> Ive got a quick question: Im trying to create a vector of vectors and I used the line let mut args: ~[~[~str]] = ~[~[]]; and when I do something like args[0].push(~str); it works, but it throws an error when I do something like args[1].push(~str)
[23:53:23] <cmr> skoizza: args[1] doesn't exist.
[23:53:34] <skoizza> how do i make it exist?
[23:53:38] <cmr> skoizza: you created a vector with one element, which is an empty vector.
[23:53:58] <cmr> ~[~[], ~[]]
[23:54:35] <skoizza> ah, thanks cmr
[23:56:18] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[23:56:46] <skoizza> cmr that code is vector that has two vectors, correct?
[23:57:14] <cmr> skoizza: yes
[23:59:01] <skoizza> cmr what if i wanted to have a vector of unlim vector? so that I could add an undetermined amount of vectors as I parse through something?
[23:59:52] <doomlord_> does libextra have dependancies on libsyntax /librustc .. or just libstd
[23:59:54] <cmr> skoizza: check if the index is greater than the length of the vector and if not, push new vectors to fill it
