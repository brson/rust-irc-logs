[00:06:33] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[00:06:33] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/0r59gw
[00:06:33] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[00:13:38] *** Quits: Jesse (jruderman@moz-62518563.mtv2.mozilla.com) (Connection reset by peer)
[00:13:57] *** Joins: Jesse_ (jruderman@moz-62518563.mtv2.mozilla.com)
[00:21:59] *** Quits: ecr (chatzilla@moz-EE515B72.dhcp4.washington.edu) (Quit: ChatZilla 0.9.90.1 [Firefox 29.0/20140318013849])
[00:26:56] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[00:33:12] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[00:35:29] *** Joins: tikue (tkuehn@CB7FC854.FAD414BA.D74CC41D.IP)
[00:36:44] <brson> acrichto: I'm going to *remove* gdb from the linux snap builder
[00:37:00] <acrichto> brson: r+
[00:37:08] <acrichto> do the tests still pass?
[00:37:10] <acrichto> they do the check?
[00:38:09] <brson> i believe the makefiles just turn off the tests if gdb isn't found, but i'll check
[00:38:32] <acrichto> I would believe that they do
[00:39:56] <tikue> hey, are adapter methods for iteratorâ€™s collect() something of interest to folks?
[00:40:12] <tikue> e.g. to support collecting into maps
[00:40:58] <acrichto> tikue: you can implement the FromIterator trait to get collect() for your collection
[00:41:07] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[00:41:14] <tikue> acrichto: how would you generalize it to a map though?
[00:41:28] <acrichto> Iterator<(K, V)> => HashMap<K, V>
[00:42:04] <tikue> what if you have Iterator<Z>
[00:42:09] <mcpherrin> Or Iterator<K> => HashMap<K, K> of half the size
[00:42:12] <acrichto> it'd fail to find the implementation
[00:42:25] <tikue> i guess itâ€™s not hard to map to (X, Y) first
[00:42:28] <acrichto> tikue: https://github.com/mozilla/rust/blob/master/src/libcollections/hashmap.rs#L1358-L1365
[00:42:35] <tikue> does HashMap implement FromIterator<(X, Y)> already?
[00:42:43] <acrichto> (and the Extendable) implementation below it)
[00:42:47] <acrichto> yes
[00:42:50] <tikue> weird, it doesnâ€™t show up http://static.rust-lang.org/doc/master/std/iter/trait.FromIterator.html
[00:42:55] <tikue> under Implementors
[00:42:56] <acrichto> it's in a separate crate
[00:42:59] <tikue> ah
[00:42:59] <acrichto> sadly :(
[00:43:01] <tikue> :\
[00:43:07] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[00:43:37] <acrichto> rusti: (~[(1, 2), (3, 4)]).move_iter().collect::<collections::HashMap<int, int>>()
[00:43:38] -rusti- {3: 4, 1: 2}
[00:43:39] <acrichto> tikue ^
[00:43:50] <tikue> awesome :)
[00:44:02] <acrichto> rusti: (~[(1, 2), (3, 4)]).move_iter().collect::<collections::HashMap<_, _>>()
[00:44:03] -rusti- <anon>:11:9: 11:80 error: cannot determine a type for this bounded type parameter: unconstrained type
[00:44:03] -rusti- <anon>:11         (~[(1, 2), (3, 4)]).move_iter().collect::<collections::HashMap<_, _>>()
[00:44:03] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[00:44:03] -rusti- playpen: application terminated with error code 101
[00:44:08] <acrichto> rusti: (~[(1i, 2i), (3, 4)]).move_iter().collect::<collections::HashMap<_, _>>()
[00:44:08] -rusti- <anon>:11:9: 11:82 error: cannot determine a type for this bounded type parameter: unconstrained type
[00:44:08] -rusti- <anon>:11         (~[(1i, 2i), (3, 4)]).move_iter().collect::<collections::HashMap<_, _>>()
[00:44:09] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[00:44:12] <acrichto> oh well
[00:44:12] -rusti- playpen: application terminated with error code 101
[00:45:05] <tikue> iâ€™ve been thinking about what itâ€™d take for rust to support .parallelIter()
[00:45:39] <tikue> (inspired by java 8â€™s streams)
[00:45:49] <mcpherrin> parallelMap is doable...
[00:46:05] <mcpherrin> not sure how iterators can be parallelized
[00:46:35] * mcpherrin looks at what java does
[00:46:42] <tikue> whyâ€™s that?
[00:47:01] <mcpherrin> tikue: I think I was misunderstanding what kind of API you had in mind
[00:47:07] <mcpherrin> I'm looking at Java8 streams and see what you mean.
[00:47:08] <tikue> like
[00:47:42] <tikue> range(10).parallelIter().map(foo).filter(bar) etc
[00:48:01] <mcpherrin> vec.parallelIter().filter(|x| x > 3).map(|y| y.to_str).sum("\n")
[00:48:03] <mcpherrin> right
[00:48:17] <mcpherrin> seems feasible
[00:48:23] <tikue> i think itâ€™d be really great if rust could support something like that
[00:48:44] <tikue> the task model is excellent but a little heavy-handed for this kind of work i think
[00:49:07] <mcpherrin> the closures are the tricky bit in current rust
[00:49:18] <aatch> nmatsakis, has a blog post relating to fork-join parallelism for Rust
[00:49:31] <tikue> oh! thanks aatch, will check it out
[00:49:45] <brson> restarting buildbot
[00:49:49] <aatch> tikue, http://smallcultfollowing.com/babysteps/blog/2013/06/11/data-parallelism-in-rust/
[00:50:02] <mcpherrin> aatch: literally "fork(2)" parallelism?
[00:50:14] <mcpherrin> I suppose I can just read it :)
[00:50:51] <aatch> mcpherrin, no, lol, more that the parallel threads of execution are still limited by the scope they were created in.
[00:51:16] <mcpherrin> aatch: yeah, I just read the post :)
[00:51:29] <mcpherrin> fork(2) parallelism would be of interest too maybe
[00:52:01] <mcpherrin> using shared memory between multiple processes instead of tasks in one process
[00:52:15] <mcpherrin> moar resilience to bugs
[00:52:56] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[00:53:07] <brson> acrichto: i've restarted buildbot and kicked off some new aws builds
[00:53:20] <brson> acrichto: usually one or two will fail with llvm cloning problems
[00:53:25] <acrichto> brson: ok
[00:53:28] <acrichto> I shall remain alert
[00:53:29] <brson> and i'm probably going to take off in 30min or so
[00:54:56] <aatch> I would really like fork-join parallelism in Rust. Since it has a different set of constraints it also allows things that the current task system doesn't. Like capturing the environment by reference.
[00:55:05] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[00:55:31] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Connection reset by peer)
[00:55:37] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[00:55:37] *** ChanServ sets mode: +o tjc
[00:56:35] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[00:56:35] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/sUXogg
[00:56:35] <ghrust> 13rust/06auto 1463dcd73 15GÃ¡bor Lehel: syntax: allow stmt/expr macro invocations to be delimited by []....
[00:56:35] <ghrust> 13rust/06auto 1405be074 15bors: auto merge of #13234 : seanmonstar/rust/pr/12947, r=brson...
[00:56:35] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[00:59:15] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[01:00:51] *** Joins: japaric_ (japaric@54F67CF5.F8F97841.212E9B57.IP)
[01:00:57] *** Quits: japaric (japaric@4553B077.F3E5B3F6.F4D5766F.IP) (Ping timeout)
[01:01:17] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[01:01:39] <bjz_> SimonSapin: beep
[01:02:16] *** Joins: Nekit1234007_ (Nekit12340@C8B984F.40F9C55F.4707F662.IP)
[01:02:37] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[01:02:37] *** ChanServ sets mode: +o tjc
[01:02:57] *** Quits: Nekit1234007 (Nekit12340@987F2484.B242805A.4707F662.IP) (Ping timeout)
[01:08:40] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[01:10:57] *** Quits: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP) (Input/output error)
[01:18:23] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[01:19:23] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[01:21:30] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[01:21:36] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[01:31:45] *** Quits: andrew-__ (andrew-d_w@C6A0796C.9DFA657C.CC0301A2.IP) (Input/output error)
[01:32:06] *** Joins: andrew-d_w (andrew-d_w@C6A0796C.9DFA657C.CC0301A2.IP)
[01:37:24] *** Quits: andrew-d_w (andrew-d_w@C6A0796C.9DFA657C.CC0301A2.IP) (Ping timeout)
[01:39:09] *** nrc is now known as nrc|afk
[01:40:29] *** Quits: Jesse_ (jruderman@moz-62518563.mtv2.mozilla.com) (Quit: Jesse_)
[01:51:37] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[01:52:44] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[01:54:11] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[01:54:28] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[01:54:28] *** ChanServ sets mode: +ao pcwalton pcwalton
[02:02:02] *** Joins: lkuper (lkuper@moz-AD4C50F5.dhcp-bl.indiana.edu)
[02:04:21] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[02:04:25] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[02:09:53] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[02:18:53] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[02:19:42] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[02:21:46] *** Joins: japaric (japaric@CA190B5E.DC1425E6.84437BC5.IP)
[02:21:46] *** Quits: japaric_ (japaric@54F67CF5.F8F97841.212E9B57.IP) (Ping timeout)
[02:24:47] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[02:29:31] <Kroisse> Is there a test case to check compiler messages?
[02:33:15] <acrichto> Kroisse: take a look at src/test/compile-fail
[02:35:26] *** Quits: zz_kimundi (kimundi@moz-EA3A956E.dip0.t-ipconnect.de) (Ping timeout)
[02:36:34] <Kroisse> acrichto: they seem to only check a single line of error message, not include a note or etc.
[02:37:08] <acrichto> if you use "//~ NOTE: some note message"
[02:37:10] <acrichto> I think it should work
[02:37:10] <Kroisse> like "note: add #[feature(macro_rules)] to the crate attributes to enable"
[02:37:18] <Kroisse> wow
[02:37:54] <Kroisse> can I write both of them?
[02:38:06] <acrichto> notes and errors?
[02:38:24] <Kroisse> yes
[02:38:35] <acrichto> you should be able to yeah
[02:38:44] <acrichto>  //~^ ERROR: test a message on the prevoius line
[02:38:59] *** Joins: zz_kimundi (kimundi@moz-EBF89014.dip0.t-ipconnect.de)
[02:39:00] *** zz_kimundi is now known as kimundi
[02:39:45] <Kroisse> acrichto: like this? https://github.com/mozilla/rust/blob/master/src/test/compile-fail/deriving-span-Ord-enum-struct-variant.rs
[02:40:11] <acrichto> yeah
[02:40:25] <Kroisse> thank you :)
[02:40:43] <klutzy> acrichto: on #10474: only one of them is unignored :p
[02:41:23] <acrichto> klutzy: oh dear, looks like I need to be more exhaustive next time
[02:41:40] <klutzy> I did same mistake some minutes ago ;)
[02:45:23] <Kroisse> how I can run the test only for compile-fail
[02:45:24] <Kroisse> ?
[02:45:57] <acrichto> make check-stage2-cfail TESTAME=some-substring-of-the-filename
[02:46:07] <acrichto> TESTNAME*
[02:48:20] <Kroisse> wow
[02:48:32] <Kroisse> that's cool
[02:49:27] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[02:54:24] <acrichto> klutzy: you may have just gotten an email from llvm-commits
[02:54:37] *** Joins: Jesse_ (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[02:55:02] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Connection reset by peer)
[02:58:44] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Connection reset by peer)
[02:58:51] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[03:03:02] *** Quits: tikue (tkuehn@CB7FC854.FAD414BA.D74CC41D.IP) (Quit: tikue)
[03:06:42] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[03:06:42] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1405be074 to 14b8ef9fd: 02http://git.io/N3iJvQ
[03:06:42] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[03:06:47] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[03:06:47] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/LxQoow
[03:06:47] <ghrust> 13rust/06auto 14a38888e 15Liigo Zhuang: libtest: rename `BenchHarness` to `Bencher`...
[03:06:47] <ghrust> 13rust/06auto 148a4ee7b 15bors: auto merge of #13236 : liigo/rust/rename-benchharness, r=alexcrichton...
[03:06:47] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[03:11:20] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[03:12:08] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[03:13:26] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[03:14:39] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[03:14:39] *** ChanServ sets mode: +o tjc
[03:16:41] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[03:17:33] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[03:17:35] *** Joins: enix_ (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[03:20:22] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[03:29:08] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:29:08] *** ChanServ sets mode: +ao dherman dherman
[03:30:08] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[03:31:00] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[03:32:05] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[03:32:25] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[03:34:14] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[03:36:00] *** Quits: rcxdude (rcxdude@moz-600BFD57.range86-179.btcentralplus.com) (Ping timeout)
[03:36:11] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[03:36:28] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[03:38:12] *** Joins: rcxdude (rcxdude@moz-156F6E40.range86-179.btcentralplus.com)
[03:49:18] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[03:52:52] *** Joins: tikue (tkuehn@A7ECB14D.ADD881BB.D5A9E6FD.IP)
[04:13:38] *** Joins: lpy_ (lpy@E44EE2C4.F09091A8.1348A864.IP)
[04:13:44] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[04:13:44] *** ChanServ sets mode: +ao pcwalton pcwalton
[04:14:36] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[04:15:33] *** Quits: lpy_ (lpy@E44EE2C4.F09091A8.1348A864.IP) (Ping timeout)
[04:18:48] *** Joins: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP)
[04:21:02] *** Quits: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP) (Quit: mankyKitty)
[04:21:10] *** Joins: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP)
[04:26:24] *** Quits: tikue (tkuehn@A7ECB14D.ADD881BB.D5A9E6FD.IP) (Quit: tikue)
[04:43:49] *** Quits: Jesse_ (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse_)
[04:45:43] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[04:48:14] *** Quits: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP) (Ping timeout)
[04:48:43] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[04:52:36] *** Quits: lkuper (lkuper@moz-AD4C50F5.dhcp-bl.indiana.edu) (Ping timeout)
[05:00:08] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[05:05:32] *** aatch is now known as aatch|work
[05:11:40] *** Joins: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP)
[05:18:09] *** Quits: enix_ (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:32:43] *** Joins: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net)
[05:33:09] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[05:33:57] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[05:33:58] *** ChanServ sets mode: +o tjc
[05:36:39] *** Joins: edwardw (Mibbit@10C20BB8.BF90DB87.492F1EB9.IP)
[05:40:13] *** nrc|afk is now known as nrc
[05:49:46] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[05:51:40] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[05:58:48] *** Quits: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP) (Quit: mankyKitty)
[06:00:17] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[06:16:33] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[06:18:27] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[06:19:08] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[06:19:13] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[06:23:12] <sfackler> destruction order is supposed to run in opposite order of cration, right?
[06:24:03] <cmr> yes
[06:24:17] <sfackler> that appears to no longer be the case for rvalues
[06:24:40] <Eridius> sfackler: it should still be the case, just be aware of the actual scope of the rvalue
[06:24:40] <sfackler> the destructor for the type returned by query runs *after* the destructors for conn and stmt here: https://github.com/sfackler/rust-postgres/issues/31
[06:25:42] <cmr> it certainly shouldn't run *after*
[06:26:10] <Eridius> sfackler: hrm, it definitely shouldn't run after regardless of the scope of the rvalue
[06:26:32] <sfackler> rooting the iterator to a variable makes everything run in the right order
[06:26:55] <cmr> yikes.
[06:31:46] * ChrisMorgan runs away
[06:35:00] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[06:36:42] *** Quits: ChrisMorgan (chris@moz-8DCBEA52.vic.adsl.internode.on.net) (Ping timeout)
[06:48:05] <huon> sfackler: klkgkjfljhgj yourself ;P
[06:48:45] <sfackler> r? https://github.com/mozilla/rust/pull/13240
[06:49:07] *** Joins: whitglint (uid15486@moz-31ABA2C0.irccloud.com)
[06:49:19] <cmr> acrichto: one second faster :(
[06:50:06] <acrichto> hehe
[06:50:42] *** Quits: zw01 (zev@3C32E5CD.21A2D65F.BCF77D2A.IP) (Ping timeout)
[06:50:54] *** flaper87|afk is now known as flaper87
[06:50:55] <cmr> acrichto: do you know much about llvm's alias analysis? specifically I'm wondering of tbaa can say that &T and &mut T never alias.
[06:51:05] <cmr> Which is not strictly true; they can alias, in the same function..
[06:51:16] <acrichto> I'm under the belief that it's a question-driven system
[06:51:29] <acrichto> you implement analysis and something repeatedly asks you about whether things can alias
[06:51:33] <acrichto> that may be a wrong belief though
[06:51:35] <cmr> yeah, I understand how the infrastructure works.
[06:51:36] <acrichto> I've never done it mysefl
[06:51:52] <acrichto> ah, then you know just as much if not more than me :)
[06:51:55] <cmr> ok :P
[06:52:03] <huon> sfackler: I was so excited for that being docs about macros..
[06:52:05] <cmr> https://etherpad.mozilla.org/7h15DtW9zI
[06:52:38] <sfackler> huon: I'm writing that section up. I'll probably finish it tomorrow
[06:52:42] <huon> sfackler: \o/
[06:52:54] <sfackler> I was going to do it tonight and then got sidetracked by destructor order being super broken'
[06:53:08] <huon> that's always an upsetting experience :(
[06:54:17] *** Joins: zw01 (zev@3C32E5CD.21A2D65F.BCF77D2A.IP)
[06:54:48] <huon> any more comments? https://github.com/rust-lang/rfcs/pull/16
[06:54:58] <sfackler> acrichto: is it intended for struct variant fields to be private by default?
[06:55:20] <flaper87> o/
[06:55:45] <acrichto> sfackler: I wondered that as well, the current answer is yes, but that answer may be wrong
[06:55:54] <flaper87> huon: one more, lets do it! :P
[07:01:42] *** Joins: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP)
[07:02:09] <sfackler> acrichto: well hopefully privacy for variant fields will be disappearing altogether, right?
[07:08:04] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[07:08:36] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 31.0a1/20140330030202])
[07:09:22] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[07:13:52] *** Quits: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com) (Ping timeout)
[07:15:19] *** Joins: mib_aorxvu (Mibbit@6D71664E.48960495.CC1A2609.IP)
[07:16:52] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Ping timeout)
[07:18:53] *** Joins: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com)
[07:21:22] *** Quits: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com) (Ping timeout)
[07:22:26] *** Joins: lpy (lpy@C7442963.9730F46D.8C13C571.IP)
[07:23:33] *** Joins: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com)
[07:25:58] *** Quits: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP) (Ping timeout)
[07:27:30] *** Quits: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com) (Ping timeout)
[07:35:26] *** Quits: mib_aorxvu (Mibbit@6D71664E.48960495.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:36:23] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[07:41:01] <huon> eddyb: I don't understand what "you can't prevent reuse" means in the context of arenas not working?
[07:41:09] *** Joins: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP)
[07:41:57] <eddyb> huon: without explicitly annotating the entire AST with lifetimes, a specific Folder implementation can just return what it gets
[07:42:08] <eddyb> huon: and now you have an AST that is partially in the old arena
[07:42:57] <huon> I would've thought that the whole AST needs lifetimes when using an arena
[07:43:02] <huon> which solves that problem
[07:43:41] <huon> (but yeah, without lifetimes I agree that that would be broken)
[07:44:00] *** Joins: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com)
[07:44:34] <acrichto> sfackler: struct variants of enums are a little uncertain to me, but I'm not too worried because they're behind a feature gate
[07:46:13] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:48:58] *** Quits: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com) (Ping timeout)
[07:51:27] *** Joins: balpert_ (sid15886@moz-A42E5B7B.irccloud.com)
[07:51:32] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[07:51:32] <ghrust> [13rust] 15huonw 04force-pushed 06try from 14f64fdf5 to 14137b604: 02http://git.io/k471pw
[07:51:32] <ghrust> 13rust/06try 14ae213a7 15Huon Wilson: std: migrate the errno -> IoError converter from libnative....
[07:51:32] <ghrust> 13rust/06try 14a41887d 15Huon Wilson: rand: bubble up IO errors when creating an OSRng.
[07:51:33] <ghrust> 13rust/06try 143411031 15Huon Wilson: rand: bubble up IO messages futher....
[07:51:35] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[07:57:32] <eddyb> huon: it just won't work with P
[07:59:52] <huon> eddyb: why not?
[07:59:56] <huon> P<'a, T>
[08:00:12] *** Joins: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP)
[08:00:17] <eddyb> mmmaybe. but not immediately so
[08:00:42] <eddyb> huon: it's just that I had to change so many things... and maybe for nothing >_>
[08:00:49] <huon> the other thing would be to just use the allocator idea
[08:00:56] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[08:00:59] <huon> P<T> == Uniq<T, Alloc>
[08:01:06] <huon> and then use an ArenaAllocator<'a>
[08:01:08] <huon> for ALloc
[08:01:20] *** Quits: lpy (lpy@C7442963.9730F46D.8C13C571.IP) (Client exited)
[08:01:23] <huon> => lifetimes etc. automatically
[08:01:33] <huon> (and the option to have an owned ast etc.)
[08:01:52] <huon> but... being generic like that removes the ability to use the advantages of each scheme
[08:02:02] <huon> (i.e. if it's generic you can't fold in place properly)
[08:02:19] *** Quits: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[08:03:10] *** Joins: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com)
[08:04:05] <huon> http://buildbot.rust-lang.org/builders/auto-linux-64-x-android-t android builder offline?
[08:04:12] <huon> acrichto: ^?
[08:04:19] <acrichto> dunno why
[08:04:24] <acrichto> it's under brson's desk
[08:04:34] <acrichto> tried to ping it but it's definitely offline
[08:04:35] <acrichto> sadly :(
[08:04:39] <acrichto> we'll just have to wait til tomorr
[08:04:41] <acrichto> tomorrow*
[08:05:04] <huon> ok :(
[08:05:55] <huon> (in how many hours is tomorrow?)
[08:06:10] <acrichto> ~8
[08:06:19] <acrichto> I should sleep lol
[08:06:23] <acrichto> that means I get up in ~6
[08:06:32] * huon puts acrichto to bed
[08:06:44] <huon> for good! *dramatic music*
[08:07:09] *** Quits: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com) (Ping timeout)
[08:07:11] * acrichto gasps once and falls silent
[08:08:21] * cmr doesn't believe in sleep
[08:08:34] *** Joins: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com)
[08:08:44] <huon> cmr: you'll have to fix std::io::timer
[08:08:46] * flaper87 never sleeps
[08:09:04] *** Quits: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP) (Ping timeout)
[08:09:52] <cmr> huon: the builder was being idle btw, so I decided to build everything since 0.5
[08:09:58] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[08:09:58] <ghrust> [13rust] 15huonw 04force-pushed 06try from 14137b604 to 14bcfd6bc: 02http://git.io/k471pw
[08:09:58] <ghrust> 13rust/06try 146a41dbe 15Huon Wilson: std: migrate the errno -> IoError converter from libnative....
[08:09:58] <ghrust> 13rust/06try 14edb64d8 15Huon Wilson: rand: bubble up IO errors when creating an OSRng.
[08:09:58] <ghrust> 13rust/06try 14043e0a5 15Huon Wilson: rand: bubble up IO messages futher....
[08:10:00] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[08:10:02] <huon> cmr: cool
[08:10:04] <huon> it works?
[08:10:06] <cmr> mhm
[08:10:08] <cmr> well
[08:10:12] <cmr> it's working so far :p
[08:10:23] <cmr> not done yet
[08:10:26] <cmr> I want to see how far back I can go
[08:10:36] <huon> (does 0.5 even exist? surely that's before written history)
[08:10:42] <cmr> :P
[08:11:03] <cmr> I don't think I will go past the invention of bors.
[08:12:28] <eddyb> huon: at least it's easier to replace P<T> than @T *shrug*
[08:12:49] <huon> eddyb: yup :)
[08:13:43] <huon> (you did go into this knowing that nmatsakis et al. were very interested in the AST being arena allocated... so... you can't be too upset if owned-ness gets thrown out :) )
[08:14:07] <eddyb> I didn't realize I couldn't use this to test how arenas would work
[08:14:20] <eddyb> and I didn't realize how much bloody work it is
[08:14:27] * huon wishes people wrote some interesting blog posts
[08:14:30] * huon is bored
[08:14:43] <huon> eddyb: :(
[08:15:09] * edwardw plenty April fools jokes, man!
[08:15:19] *** Quits: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com) (Ping timeout)
[08:15:20] <eddyb> huon: go catch some pokemon!
[08:15:32] <huon> eddyb: that's not even slightly pretending to be productive ;P
[08:15:37] * huon wants to imagine
[08:15:47] <huon> edwardw: april fools got cancelled this year
[08:15:57] <edwardw> :P
[08:16:02] <eddyb> (and I might have ruined my chance to get a job just to finish this P business *sigh*)
[08:16:15] <huon> eddyb: that's... not so good :(
[08:16:43] <eddyb> and I see how it's going to use 1.5GB of RAM
[08:17:17] *** Quits: edwardw (Mibbit@10C20BB8.BF90DB87.492F1EB9.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:17:41] *** Joins: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP)
[08:18:16] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[08:18:17] <ghrust> [13rust] 15huonw pushed 1 new commit to 06try: 02http://git.io/9Zg2og
[08:18:17] <ghrust> 13rust/06try 145be1e89 15Huon Wilson: fix-itty fix
[08:18:17] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[08:22:15] *** Quits: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP) (Quit: mankyKitty)
[08:22:23] *** Joins: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP)
[08:22:59] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:22:59] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:25:36] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[08:25:36] <ghrust> [13rust] 15huonw pushed 1 new commit to 06try: 02http://git.io/olSDhg
[08:25:36] <ghrust> 13rust/06try 144a1a593 15Huon Wilson: I'll get it right some day...
[08:25:36] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[08:25:37] *** Quits: JustAPerson (JustAPerso@EAC6AADA.C1481309.D9401097.IP) (Input/output error)
[08:25:59] *** Joins: JustAPerson (JustAPerso@EAC6AADA.C1481309.D9401097.IP)
[08:27:13] <cmr> huon: keep telling yourself that
[08:27:31] <flaper87> lol
[08:28:11] <eddyb> huon: and probably the worst part is that acrichto would've done all this in one night
[08:28:21] <cmr> acrichto doesn't count
[08:28:27] <cmr> he is 15 people in a work stealing pool.
[08:30:30] <huon> "acrichto counted to infinity - twice"
[08:30:35] *** Joins: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com)
[08:30:37] <flaper87> LOL
[08:30:40] <cmr> we should have a rustmemes tumblr.
[08:30:44] <cmr> servo has one :(
[08:30:53] <cmr> bstrie: get on this.
[08:33:57] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:34:19] <eddyb> oh dear the priv PR merged
[08:34:33] <cmr> all of rust-ci will now break.
[08:34:50] <eddyb> cmr: I touched almost every line of ast.rs
[08:35:32] <flaper87> eddyb: :(
[08:35:42] <flaper87> that sounds.... painful
[08:35:45] <strcat> huon: https://github.com/mozilla/rust/pull/13225 r?
[08:37:51] <eddyb> cmr: next time I say the word "easy", please slap me
[08:38:02] <cmr> eddyb: slap yourself :p
[08:38:48] <eddyb> strcat: look at this mess https://github.com/rust-lang/rfcs/pull/24
[08:39:38] <strcat> the lack of an obvious way to add object inheritance is a clear indication that it's a bad fit for rust ;)
[08:39:43] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:40:04] <cmr> anyone remember what tvec stands for?
[08:40:09] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:40:10] <eddyb> trans vec?
[08:40:29] <cmr> well it's trans::tvec
[08:40:31] <cmr> that'd be a bit silly
[08:40:33] <cmr> but I can see it
[08:40:44] <strcat> I don't think that's why
[08:40:53] <strcat> you should have seen the scary stuff in there before
[08:40:55] <strcat> there's still some
[08:41:02] <strcat> from when types were all dynamically sized
[08:41:06] <cmr> eugh
[08:41:08] <eddyb> cmr: if you can kill ty_unboxed_vec, pls do and thx
[08:41:12] <cmr> that must have been a freaking nightmare
[08:41:44] <eddyb> it wasn't obvious to me what call paths it may take so I was afraid of removing that last one
[08:41:57] *** Quits: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com) (Ping timeout)
[08:42:01] <cmr> eddyb: add it to the todo list
[08:42:07] <eddyb> heh, right
[08:43:46] <eddyb> strcat: I don't want single inheritance to be easier to express in Rust than, say, struct Foo {super_a: A, field: Bar, super_b: B}
[08:44:11] <strcat> oh well
[08:44:16] <cmr> I thought the first proposal was straightforward and simple.
[08:44:23] <strcat> I don't know where to rant against it because the effort to add them is too fragmented
[08:44:28] <cmr> yeah
[08:44:29] <eddyb> hah
[08:45:12] <eddyb> single inheritance leads to bad patterns (see Java or EcmaScript - JS, AS, etc.)
[08:45:20] <strcat> hehe, perf 3.14
[08:45:31] <eddyb> strcat: pierf?
[08:45:33] <strcat> it's worse in ES
[08:46:16] <strcat> anyway inheritance makes strcat sad
[08:46:57] <eddyb> (I don't have any problem with trait inheritance because it's much more flexible from the start)
[08:47:06] <strcat> trait inheritance is different, it makes sense
[08:47:43] <strcat> object inheritance makes absolutely no semantic sense
[08:47:56] *** Joins: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com)
[08:48:07] <strcat> perhaps it lets you express certain patterns efficiently, but it's semantically as sensible as a duff's device
[08:48:33] <strcat> we don't have any patterns in the stdlib for object inheritance to solve
[08:49:01] <eddyb> strcat: I've been ranting about extending traits instead, to support those same patterns
[08:49:06] <cmr> it'd be nice in rustc not to have .node.foo.node.foo.node
[08:49:17] <strcat> the only ever case where it's going to be sensible to use is with silly pre-existing object systems imo
[08:49:18] <eddyb> want optimizations? treat them like optimizations
[08:49:30] *** Quits: rcxdude (rcxdude@moz-156F6E40.range86-179.btcentralplus.com) (Ping timeout)
[08:50:09] <cmr> I somewhat like the idea of "extending enums with fields"
[08:50:16] <cmr> sure you have separate variants, but they all share some common data
[08:50:34] <cmr> I think it's cleaner than struct Foo { [common_data], inner: SomeInnerEnum }
[08:50:44] <cmr> maybe not
[08:50:52] <cmr> certainly makes pattern matching weird
[08:51:00] * cmr is happy with today's story.
[08:51:16] <eddyb> cmr: allow field access with structural variants, where all variants have the field with the same type
[08:51:24] <eddyb> if you really want stuff like that
[08:51:30] *** Quits: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com) (Ping timeout)
[08:51:33] <cmr> eddyb: that feels ad-hoc and sketchy, I wouldn't prefer it to what we have today
[08:51:41] <flaper87> FWIW, I'm happy with today's story too
[08:52:05] *** Joins: rcxdude (rcxdude@moz-95175B53.range109-147.btcentralplus.com)
[08:52:20] * flaper87 reads and provides silly feedback. He hopes he had more time to hang on IRC and participate properly in these discussions
[08:52:45] <eddyb> trait Node {#[vtable] vtable: *Vtable<Node>; parent: JS<Node>; first_child: JS<Node>; ...} (I'd cc jdm but he's not around)
[08:52:51] <eddyb> kimundi wanted to write an RFC, I think
[08:53:08] <strcat> eddyb: but people are going to want the same thing for trait objects, aren't they? ;\
[08:53:10] <eddyb> and guess what? all the code that works today will keep working
[08:53:18] <eddyb> strcat: same what?
[08:53:27] <strcat> I mean with the fields in enums
[08:53:28] <strcat> not your proposal
[08:53:29] *** Joins: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com)
[08:53:42] <strcat> anyway there are too many proposals for it to be made sense of by me now
[08:53:44] <eddyb> you mean fields in traits?
[08:53:54] <strcat> ugh
[08:54:15] * eddyb confused a bit
[08:54:48] <strcat> I want unboxed closures and then rust can stop getting huge new features ;p
[08:55:12] <cmr> strcat: do you know what tbaa metadata on a call insn does?
[08:55:23] <strcat> no
[08:55:27] <strcat> does it do anything?
[08:55:33] <cmr> it's allowed/tested for in llvm but I can't make sense of it
[08:55:37] <strcat> ;s
[08:55:59] <eddyb> maybe I should work on quasi-quoting next
[08:56:00] <strcat> https://github.com/mozilla/rust/pull/13225 anyone r? ;p
[08:57:06] <cmr> strcat: oh it's for struct-path tbaa, which I don't understand yet.
[08:57:08] * cmr ignores
[08:57:32] <eddyb> yay, rebased
[08:57:45] <strcat> * implementation of supertraits in the same block
[08:57:47] <strcat> * pointer arithmetic and indexing for pointers (no trait implementations)
[08:57:49] <strcat> * allow implicit coercions between integers when they are lossless (upcasts, no sign conversions)
[08:57:51] <strcat> * mixed split crate and cfg() design for freestanding usage and pluggable failure/allocation
[08:57:53] <strcat> * unboxed closures
[08:57:55] <strcat>     * sugar for partial application via unboxed closures
[08:57:58] * strcat wonders if there was anything else
[08:58:10] <strcat> have to look through my 115 open bugs
[09:00:44] <strcat> the funny part about the numeric stuff is that I think...
[09:00:51] <strcat> rusti: std::f64::sqrt(5.5)
[09:00:52] -rusti- 2.345208
[09:00:55] <strcat> that was exposed by accident
[09:01:03] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[09:01:04] <strcat> it's generated via a macro to use in the method impls
[09:01:08] <strcat> and is accidentally pub afailk
[09:01:11] * strcat will deal with that later
[09:03:12] <eddyb> Decodable::decode(d).map(P)
[09:03:14] <eddyb> hah
[09:04:24] <cmr> strcat: do you think we should emit tbaa that says pointsToConstantMemory for trait object/closure fn pointers, and ignore that a jit could be generating them?
[09:04:31] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[09:04:43] <cmr> I think it's only used for determining if a func is readonly
[09:05:15] <strcat> cmr: afaik it's still 'constant memory' if it's read-only but was created dynamically
[09:08:51] <eddyb> error: aborting due to 445 previous errors
[09:09:02] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[09:10:27] <flaper87> cmr: that tbaa pad is coming along quite well, good work!
[09:10:38] <cmr> flaper87: 90% done
[09:11:20] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[09:11:20] <ghrust> [13rust] 15huonw pushed 1 new commit to 06try: 02http://git.io/3VnrwQ
[09:11:20] <ghrust> 13rust/06try 14ef20203 15Huon Wilson: ...
[09:11:20] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[09:12:39] <eddyb> huon: thanks
[09:12:44] <eddyb> now I don't feel so bad anymore
[09:13:15] <cmr> I love these dead functions everywhere there still exist because they are pub
[09:13:34] <eddyb> cmr: inorite?
[09:13:42] <eddyb> I found like 5 of them in rustc::util::common
[09:13:53] <huon> eddyb: bad for?
[09:13:58] <eddyb> huon: P
[09:14:40] <eddyb> (I was referring to your try attempts, fwiw)
[09:14:58] <eddyb> cmr: the best part is that I don't have to make them work :P
[09:15:44] *** Quits: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com) (Connection reset by peer)
[09:17:03] *** Joins: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com)
[09:17:15] *** Quits: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com) (Quit: Leaving)
[09:17:17] *** Joins: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com)
[09:26:14] <huon> any ideas why the libsync update increased the librustc memory use by 40 MB? http://huonw.github.io/isrustfastyet/mem/#6bf3fca,bcaaffb
[09:28:10] <cmr> extra instanciations for the inner synchronization types? hard to believe it'd cause a 40M increase though.
[09:28:20] *** Quits: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP) (Ping timeout)
[09:31:27] <huon> how many are actually used in librustc?
[09:31:45] <cmr> to my knowledge 0 :p
[09:31:56] <huon> atomics and sync::one
[09:31:58] <huon> says grep
[09:32:06] <cmr> yes
[09:32:16] <cmr> which is nothing that was touched afaik
[09:32:33] <huon> yeah, and they're not used enough to be worth 40M
[09:32:54] <strcat> metadata?
[09:32:57] * strcat shrugs
[09:33:09] <cmr> the extra memory is created in typeck though
[09:33:54] <eddyb> it's probably that function-local stuff that I need to fix
[09:34:11] <huon> eddyb: *you* don't *need* to fix it
[09:34:43] <eddyb> huon: that someone should fix?
[09:35:16] <huon> "that I would like to fix"
[09:39:46] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Connection reset by peer)
[09:39:57] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[09:40:03] *** Quits: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP) (Ping timeout)
[09:40:03] *** Quits: sfackler (sfackler@moz-AEECCEBA.com) (Ping timeout)
[09:40:03] *** Quits: whitglint (uid15486@moz-31ABA2C0.irccloud.com) (Ping timeout)
[09:40:03] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (Ping timeout)
[09:40:03] *** Quits: balpert_ (sid15886@moz-A42E5B7B.irccloud.com) (Ping timeout)
[09:40:03] *** Quits: tca (sid17279@moz-A42E5B7B.irccloud.com) (Ping timeout)
[09:40:03] *** Quits: larsberg (sid16141@moz-A42E5B7B.irccloud.com) (Ping timeout)
[09:40:04] *** Quits: huhlig (sid17687@moz-A42E5B7B.irccloud.com) (Ping timeout)
[09:40:19] *** Joins: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP)
[09:40:25] *** Joins: sfackler (sfackler@moz-AEECCEBA.com)
[09:40:35] * eddyb looks around for ChrisMorgan - http://python.forrustprogrammers.com/
[09:43:18] *** Quits: huon (huon@moz-EC676DFE.members.linode.com) (Quit: ZNC - http://znc.in)
[09:43:44] *** Joins: huon (huon@moz-EC676DFE.members.linode.com)
[09:43:44] *** ChanServ sets mode: +o huon
[09:44:12] *** Joins: balpert_ (sid15886@moz-A42E5B7B.irccloud.com)
[09:45:13] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[09:48:02] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[09:49:12] <huon> \o/
[09:49:17] <huon> cmr: I got it right
[09:49:49] * huon was victorious, despite cmr's discouragement
[09:50:02] <cmr> :)
[09:53:16] <flaper87> said huon before finding out that he actually didn't get it right
[09:53:18] * flaper87 hides
[09:54:07] <huon> flaper87: it bootstrapped, good enough for me
[09:54:11] * huon ignores the testsuite
[09:54:13] *** Joins: huhlig (sid17687@moz-A42E5B7B.irccloud.com)
[09:54:14] *** Joins: larsberg (sid16141@moz-A42E5B7B.irccloud.com)
[09:56:18] <SimonSapin> bjz_: pong (from UTC+1)
[09:56:59] *** Joins: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no)
[09:59:14] *** Joins: tca (sid17279@moz-A42E5B7B.irccloud.com)
[09:59:15] *** Joins: whitglint (uid15486@moz-31ABA2C0.irccloud.com)
[10:00:56] *** Quits: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP) (Ping timeout)
[10:01:27] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (Ping timeout)
[10:01:27] *** Quits: [o__o] (~o__o@604A2740.DB688352.F4ADE383.IP) (Ping timeout)
[10:01:31] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[10:01:31] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Ping timeout)
[10:01:31] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[10:01:35] *** Quits: limeburst (me@247D1419.D73964AC.27A8748.IP) (Connection reset by peer)
[10:01:38] *** Quits: klutzy (th@BA61F396.8E859986.ECA1BB11.IP) (Ping timeout)
[10:01:38] *** Joins: limeburst (me@247D1419.D73964AC.27A8748.IP)
[10:01:46] *** Quits: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net) (Ping timeout)
[10:01:46] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (Ping timeout)
[10:01:46] *** Quits: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca) (Ping timeout)
[10:01:46] *** Quits: japaric (japaric@CA190B5E.DC1425E6.84437BC5.IP) (Ping timeout)
[10:01:46] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[10:01:48] *** Quits: Yurume (Yurume@A826BD81.8A0DEF81.38747683.IP) (Ping timeout)
[10:01:49] *** Joins: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP)
[10:01:53] *** Quits: Armavica (virgile@moz-AD428ED7.ens.fr) (Ping timeout)
[10:01:53] *** Quits: zxcdw (r-a@F4A4796.FC390A29.3933CC16.IP) (Ping timeout)
[10:01:53] *** Quits: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com) (Ping timeout)
[10:01:53] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[10:01:59] *** Quits: cgaebel (clark@moz-F9D89110.nyc.res.rr.com) (Ping timeout)
[10:02:04] *** Quits: sully (sully@moz-45967CBE.emarhavil.com) (Ping timeout)
[10:02:04] *** Quits: madmoose (Hat@moz-E1973371.nerp.net) (Ping timeout)
[10:02:10] *** Quits: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com) (Input/output error)
[10:02:17] *** Quits: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com) (Input/output error)
[10:02:21] *** Quits: pjenvey (pjenvey@moz-B23F7990.org) (Ping timeout)
[10:02:21] *** Quits: rhodesd (none@3646D136.4C5731DA.F395EA5B.IP) (Ping timeout)
[10:02:30] *** Quits: ski (ski@moz-E5796727.student.chalmers.se) (Ping timeout)
[10:02:44] *** Joins: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com)
[10:03:07] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[10:03:21] *** Joins: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com)
[10:03:21] *** ChanServ sets mode: +ao nmatsakis nmatsakis
[10:03:33] *** Joins: Yurume (Yurume@A826BD81.8A0DEF81.38747683.IP)
[10:03:47] *** Joins: japaric (japaric@CA190B5E.DC1425E6.84437BC5.IP)
[10:04:31] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[10:04:35] *** Joins: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com)
[10:04:37] *** Joins: cgaebel (clark@moz-F9D89110.nyc.res.rr.com)
[10:04:38] *** Joins: [o__o] (~o__o@604A2740.DB688352.F4ADE383.IP)
[10:04:39] *** Joins: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca)
[10:04:52] *** Joins: sully (sully@moz-45967CBE.emarhavil.com)
[10:04:53] *** Joins: madmoose (Hat@moz-E1973371.nerp.net)
[10:05:01] *** Joins: klutzy (th@BA61F396.8E859986.ECA1BB11.IP)
[10:05:16] *** Joins: zxcdw (r-a@F4A4796.FC390A29.3933CC16.IP)
[10:05:17] *** Joins: Armavica (virgile@moz-AD428ED7.ens.fr)
[10:05:19] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[10:05:35] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[10:05:40] *** Joins: rhodesd (none@3646D136.4C5731DA.F395EA5B.IP)
[10:05:40] *** Joins: pjenvey (pjenvey@moz-B23F7990.org)
[10:05:48] *** Joins: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net)
[10:05:52] *** Joins: ski (ski@moz-E5796727.student.chalmers.se)
[10:08:30] *** Joins: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[10:08:31] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[10:09:02] <cmr> strcat: http://cmr.github.io/blog/2014/04/01/type-based-alias-analysis-in-rust/
[10:09:07] <cmr> is my understanding of llvm correct here?
[10:19:59] *** Quits: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[10:33:11] *** Joins: dmsky (dmsky@moz-FF2573B1.pppoe.spdop.ru)
[10:38:28] *** Quits: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP) (Ping timeout)
[10:45:46] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[10:50:32] <dmsky> r? https://github.com/mozilla/rust/pull/13129
[10:50:50] <cmr> dmsky: needs a rebase
[10:52:37] <dmsky> cmr: Ah, ok.
[10:55:49] <strcat> cmr: https://github.com/mozilla/rust/pull/13225 r? added another commit
[10:56:00] <cmr> ohh the death of cmath
[10:56:03] <cmr> yay :)
[10:58:11] <strcat> yeah I'll probably do some more
[10:58:18] <strcat> need to remove all the float traits other than Float
[10:58:21] <strcat> just merge them in
[10:58:27] <strcat> and need to remove the wrapper functions
[10:58:35] <strcat> rusti: std::f32::sqrt(5.5)
[10:58:39] -rusti- 2.345208
[10:58:40] <strcat> rusti: 5.5f32.sqrt()
[10:58:41] -rusti- 2.345208
[10:58:47] <strcat> two ways to do the same thing for no reason is sad
[10:58:49] <strcat> ;)
[10:59:03] <huon> maths as methods is sad
[10:59:08] <huon> :'(
[10:59:11] <strcat> huon: we'll have UFCS
[10:59:18] <strcat> we decided not to duplicate methods as functions
[10:59:19] <huon> rusti: std::num::sqrt(5.5f32)
[10:59:19] -rusti- 2.345208
[10:59:25] <huon> (it's 3 ways, btw :P )
[10:59:32] <strcat> yeah but I removed that already
[11:01:01] <strcat> huon: yeah and an inconsistent 3 ways
[11:01:07] <cmr> nmatsakis: do you have time to take a quick look over http://cmr.github.io/blog/2014/04/01/type-based-alias-analysis-in-rust/ ?
[11:01:19] <strcat> some methods aren't exported in num, and some functions in f32/f64 aren't also methods
[11:01:21] <strcat> ;\
[11:01:40] <strcat> and the Float trait is inconsistent in the usage of values vs. references
[11:02:22] <bjz_> strcat: we could just remove all the by-ref stuff in Float
[11:02:39] <strcat> but is it intended to work for an arbitrary precision float? I guess not
[11:02:43] <strcat> it's just for IEEE754 floats
[11:02:46] <bjz_> yes
[11:02:56] <bjz_> IEEE754 only I guess
[11:03:24] <bjz_> having to do min(&x, &y) for simple math is super ugly
[11:03:51] <strcat> it's a problem across the language though
[11:03:55] <strcat> .find(&5) is also ugly
[11:04:16] <cmr> can at least justify it though.
[11:04:25] <cmr> Float taking refs is kinda dumb
[11:04:28] <strcat> you can justify it for Float if it's intended to work for extended precision
[11:04:35] <strcat> extended precision IEEE754 math does exist
[11:04:53] <cmr> I was under the impression it was only for abstracting f32/f64
[11:05:26] <bjz_> btw, will we be able to do: use Float::min; ?
[11:06:06] <strcat> yes with UFCS
[11:06:21] <kimundi> Wasn't there talk about autoref?
[11:06:34] * kimundi guesses this would have to be a rfcs now
[11:06:42] <strcat> it would suffer from the same issues as C++ with autoref
[11:06:48] <strcat> but maybe it would be an overall positive
[11:07:20] <kimundi> what issues does C++ have with autoref?
[11:07:32] * kimundi doesn't know
[11:07:47] <huon> foo(x); // is x modified?
[11:07:53] <huon> (is one issue)
[11:08:11] <cmr> non-&mut autoref could still be permissible
[11:08:15] <kimundi> ah, that would be auto mut ref
[11:08:16] <cmr> and then the answer is always "no"
[11:08:22] <strcat> kimundi: doesn't matter
[11:08:42] <strcat> rusti: use std::cell::Cell; fn foo(x: &Cell<int>) { }
[11:08:50] <kimundi> ah, right
[11:08:50] -rusti- pastebinned 7 lines of output: http://ix.io/boO
[11:08:54] <cmr> yeah but you'll always have that issue.
[11:09:06] <strcat> yes but right now you can see when it can be modified
[11:09:10] * kimundi keeps forgetting that &T does not imply immutability these days
[11:09:16] <huon> auto-immut-ref for types that don't contain Unsafe
[11:09:25] <eddyb> I was just thinking that :D
[11:09:29] <strcat> rusti: use std::cell::Cell; fn foo(x: &Cell<int>) { x.set(5) } let x = Cell::new(5); foo(&x); x
[11:09:30] -rusti- Cell { value: 0x7fffbf13edf0 }
[11:09:36] <huon> (I don't think it's a good idea, though.)
[11:09:39] <strcat> wut
[11:10:06] <eddyb> strcat: maybe Show is silly on Cells
[11:10:15] <strcat> no
[11:10:17] <strcat> on Unsafe
[11:10:29] <eddyb> fair enough
[11:10:29] <strcat> or maybe that's from Cell
[11:10:31] <strcat> w/e
[11:10:48] <strcat>     fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {
[11:10:49] <strcat>         write!(f.buf, r"Cell \{ value: {} \}", unsafe{*&self.value.get()})
[11:10:51] <strcat>     }
[11:10:57] <strcat> I think it's an accident?
[11:11:06] <strcat> it requires that T implements Show
[11:11:09] <huon> t should be &*, right?
[11:11:10] <strcat> but it prints a pointer
[11:11:12] <huon> *it
[11:11:23] <huon> hahaha
[11:11:31] <huon> such typo
[11:11:41] <strcat> I'm not quite sure why it does that at all?
[11:11:49] <strcat> this seems like a bug in the language
[11:11:52] <strcat> why is &* a ptr?
[11:11:54] <strcat> er
[11:11:58] <strcat> *& 
[11:11:59] <huon> it's *&
[11:12:03] <strcat> yes and how is that a ptr
[11:12:07] <strcat> it takes a ref and derefs
[11:12:11] <strcat> get returns a value
[11:12:12] <huon> because Unsafe<T>.get() returns *mut T
[11:12:16] <strcat> ah
[11:12:22] <eddyb> so &* is a noop
[11:12:32] <eddyb> err *&
[11:12:37] <eddyb> (so used to the correct form :P)
[11:12:41] <strcat> I know
[11:12:42] <huon> it should actually be `*unsafe { &*self.value.get() }`
[11:12:47] <huon> I guess
[11:12:49] <strcat> which is why I was wondering why it was a ptr
[11:12:53] <strcat> why not just self.get()
[11:13:03] <eddyb> because that copies :S
[11:13:11] <cmr> it's a cell, it's going to do that anyway.
[11:13:17] <huon> cmr: no?
[11:13:18] <eddyb> I guess
[11:13:23] <cmr> well, not for formatting I suppose
[11:13:42] <huon> hm... it's getting a reference into a Cell. This could be memory unsafe
[11:13:42] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[11:13:46] <cmr> Rust: high performance formatting for types you don't care about.
[11:13:50] <strcat> Cell only has get and set
[11:13:51] <huon> if it's shared and someone else modifies it?
[11:13:58] <strcat> so if you are worried about copies you have bigger problems
[11:14:13] * huon thinks if he can exploit it
[11:14:42] <eddyb> and Show on RefCell borrows, right?
[11:14:43] <cmr> it can't be modified ... it's not Share
[11:15:05] <eddyb> cmr: what if you keep a back-reference in itself?
[11:15:23] <eddyb> Cell<Foo> with struct Foo {foo: &Cell<Foo>}
[11:15:29] <eddyb> and impl Show on that
[11:15:39] <cmr> that type isn't instantiable.
[11:15:49] <cmr> (with a back-reference, that is)
[11:15:59] <huon> I think it requires a Pod GC
[11:16:00] <eddyb> Option<&Cell<Foo>>, sorry
[11:16:04] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Ping timeout)
[11:16:09] <eddyb> huon: &T is Copy
[11:17:07] <strcat> huon: you mean Show on Cell is unsound? ;p
[11:17:07] <cmr> eddyb: the Show impl on Cell doesn't keep the reference longer than the call, and it's not Share, so nothing else can modify it...
[11:17:20] <strcat> huon: it can just use get though
[11:17:38] <huon> strcat: yeah, but that does a (possibly unnecessary) memcpy, which would be nice to avoid
[11:17:45] <strcat> huon: why?
[11:17:45] <huon> but it's probably not possible
[11:17:49] <strcat> huon: Cell only has set/get
[11:17:56] <strcat> if the memcpy is a problem, Cell as a whole is a problem
[11:18:06] <strcat> it doesn't provide a way to obtain refs
[11:18:08] <strcat> at all
[11:18:11] <huon> I know
[11:18:17] <eddyb> cmr: yeah, but from within the call, you can modify it
[11:18:26] <strcat> huon: so why would it matter in Show? ;s
[11:18:28] <eddyb> cmr: or something like that
[11:18:37] <cmr> eddyb: that's true anyway, since it had a &self before
[11:18:42] <strcat>     fn eq(&self, other: &Cell<T>) -> bool {
[11:18:43] <strcat>         self.get() == other.get()
[11:18:44] <huon> strcat: because there's no need for Show to be slower?
[11:18:47] <strcat> it already does it elsewhere
[11:18:49] <huon> although I think there is here.
[11:18:54] <huon> so yes, let make it just use .get
[11:19:02] <huon> *lets
[11:19:02] <strcat> huon: there is no reason for it to be micro-optimized when Cell fundamentally only has get/set though
[11:19:03] <eddyb> it's not sound to get references to the interior of Cell
[11:19:23] <eddyb> that's why Cell is zero cost when optimized, in its current form
[11:19:44] <huon> eddyb: I think everyone discussing knows that :)
[11:20:04] <cmr> The amount of CFG_* crap needed to compile librustc is astounding.
[11:20:09] * eddyb hides
[11:20:12] <eddyb> cmr: hehe
[11:20:28] <eddyb> cmr: env CFG_{VERSION,PREFIX,LIBDIR_RELATIVE,RUSTLIBDIR,COMPILER}=
[11:21:03] <dmsky> Ok, https://github.com/mozilla/rust/pull/13129 is rebased and travis is passing, so... r?
[11:21:27] <cmr> eddyb: forgot COMPILER_HOST_TRIPLE :P
[11:21:37] <eddyb> you need that?
[11:21:41] <cmr> yes.
[11:21:58] <eddyb> cmr: I only used that stuff for perf
[11:29:13] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[11:30:52] <huon> erm, what? there are some structs that had `pub Foo { priv ... }` that were converted into `pub Foo { pub ... }` under the struct changes.
[11:30:57] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[11:31:02] <huon> surely they should've just had the priv keyword removed.
[11:31:54] <strcat> send a patch fixing it? ;p
[11:32:04] <huon> strcat: yeah, of course
[11:32:09] <huon> I'm just wondering why this happened
[11:32:22] <huon> I don't see why *any* priv's should've been change to pubs
[11:32:27] <huon> since it was just switching the default
[11:32:35] <huon> i.e. priv -> nothing, nothing -> pub
[11:33:27] <kimundi> It might've been wrong before, and this is a fix?
[11:33:38] <huon> it wasn't wrong before
[11:33:44] <huon> unless there was a compiler bug
[11:34:04] <huon> https://github.com/mozilla/rust/blob/master/src/librand/distributions/mod.rs#L103-L106 is the one I'm looking at now
[11:35:05] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[11:35:32] <huon> hm, from the context of the commit, looks like it was done manually and was just a mistake
[11:36:47] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Ping timeout)
[11:38:40] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[11:43:16] <cmr> oh jeez
[11:43:24] <cmr> #[forbid(dead_code)] reaches into macro expansion too.
[11:45:15] <huon> forbid?
[11:45:21] <huon> that's rather powerful
[11:45:24] <cmr> it is.
[11:47:24] *** Quits: darnuria (darnuria@moz-AB6EB255.ip-91-121-133.eu) (Quit: WeeChat 0.4.3)
[11:47:58] <cmr> error: aborting due to 505 previous errors
[11:48:08] <cmr> with -D dead_code
[11:48:41] <eddyb> where?
[11:48:48] <cmr> librustc
[11:48:48] <eddyb> did we allow it somehow?
[11:48:51] <eddyb> O_O
[11:49:02] <cmr> this is all the crap marked `pub` that's never actually used.
[11:49:02] <eddyb> cmr: teach me master
[11:49:11] <cmr> eddyb: librustc has a fn main you know :p
[11:49:21] <eddyb> aaah, I wanted to try that
[11:49:50] <eddyb> cmr: leave no survivors
[11:54:05] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Quit: Good Bye~)
[11:54:09] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[11:56:34] <huon> cmr: 505 things that are never used??
[11:56:46] <cmr> huon: yes.
[11:56:56] <cmr> although admittedly half of them are ffi bindings in lib/llvm.rs
[11:57:03] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[11:57:03] *** ChanServ sets mode: +o pnkfelix
[11:57:04] <cmr> should really be a separate crate
[11:57:07] <cmr> will do that after
[11:57:19] <cmr> after excluding llvm, it's only 288
[11:57:27] <huon> "only"
[11:57:58] <flaper87> lol
[12:01:21] <cmr> we still have a metadata tag for constructors.
[12:01:56] <eddyb> I reorganized the tags to be under 0x7F
[12:02:18] * eddyb can't wait to see cmr's PR
[12:02:25] <eddyb> +0 lines pls ;)
[12:02:47] *** Joins: darnuria (darnuria@moz-AB6EB255.ip-91-121-133.eu)
[12:04:14] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[12:05:16] <cmr> there's abi cruft from when Task was a structure in the (c++) runtime whose layout was hardcoded into the compiler
[12:05:24] <cmr> this is truly amazing, archeologically.
[12:05:52] <cmr> pnkfelix: ping
[12:06:03] <pnkfelix> cmr: pong
[12:06:11] *** Quits: Armavica (virgile@moz-AD428ED7.ens.fr) (Quit: Lost terminal)
[12:06:30] <cmr> pnkfelix: all of middle::cfg is marked dead, but I imagine that's just because you're actively working on fleshing it out before integrating it into the rest of the compiler?
[12:06:49] <pnkfelix> cmr: Yes, I am trying to fix it up
[12:06:57] <cmr> Ok, I'll leave it alone
[12:07:13] *** Joins: Armavica (virgile@moz-AD428ED7.ens.fr)
[12:08:39] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[12:09:38] <cmr> pnkfelix: as an aside, Graph would probably be useful in libcollections
[12:10:01] <pnkfelix> cmr: maybe.  Not sure if there is a different crate it might belong in
[12:10:19] <cmr> also possible.
[12:10:25] <pnkfelix> cmr: (i.e. is a graph a collection, or a relation, mathematical structure, etc)
[12:10:32] <cmr> shouldn't be tied up in librustc though!
[12:10:40] <pnkfelix> cmr: true
[12:11:01] <pnkfelix> cmr: And moving it out would make me feel better about adding in e.g. a module with graphviz support
[12:11:14] <pnkfelix> cmr: which I hacked up, but didn't want to put into rustc 
[12:11:42] <huon> it seems like that would be useful as a debugging tool?
[12:11:59] <huon> (even if librustc isn't it's permanent place, having it existing would be nice?)
[12:12:18] <pnkfelix> huon: yeah, I also wanted to finish doing something useful with it first
[12:12:40] *** kimundi is now known as zz_kimundi
[12:12:44] <pnkfelix> huon: so far I have used it for proof-of-concept rendering of cfg's for quote_expr!-generated ASTs.
[12:13:22] <pnkfelix> huon: niko pointed out a potentially nicer interface would be to be able to query for the control-flow graph associated with the AST rooted at a particular node id
[12:14:41] <huon> yeah, getting the CFG for a whole crate is probably so large as to be useless
[12:15:22] <huon> (could have some sort of magical interactive source code + graph display lib, so you can click around to see the CFG for various parts of the ast...)
[12:15:25] * huon dreams
[12:16:11] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[12:16:47] *** Quits: Armavica (virgile@moz-AD428ED7.ens.fr) (Input/output error)
[12:17:46] *** Joins: Armavica (virgile@moz-AD428ED7.ens.fr)
[12:18:45] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[12:20:15] <huon> strcat: what's the size of the arch nightly package now, btw? (cf. https://github.com/mozilla/rust/issues/12440 )
[12:20:18] *** Quits: Nekit1234007_ (Nekit12340@C8B984F.40F9C55F.4707F662.IP) (Ping timeout)
[12:20:46] <strcat> 131MiB
[12:20:53] <strcat> but it's not directly comparable to before
[12:20:57] <strcat> stuff was added, stuff was removed
[12:21:09] <strcat> the regression from splitting stuff is still there, but it was made up for by other stuff
[12:21:16] <huon> yeah, of course; but it's nowhere near the 300MB it was temporarily
[12:21:19] <strcat> yeah
[12:22:04] *** Joins: Nekit1234007 (Nekit12340@C8B984F.40F9C55F.4707F662.IP)
[12:28:59] <huon> flaper87: rustpkg has been slightly more than deprecated ;P https://github.com/mozilla/rust/issues/9177#issuecomment-39198669
[12:30:24] <flaper87> huon: hahaha, I didn't want to say "killed merciless" :P
[12:30:46] <huon> flaper87: "rustpkg has been removed" :P
[12:30:49] <flaper87> huon: but yeah, saying deprecated may be misleading 
[12:30:54] <huon> "rustpkg has disappeared in a cloud of smoke"
[12:31:08] <huon> "rustpkg fell off the edge of the earth"
[12:31:15] <huon> "rustpkg was abducted by aliens"
[12:31:16] <flaper87> "rustpkg commited suicide"
[12:31:36] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[12:31:40] <flaper87> "rustpkg did its last magic trick"
[12:34:15] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[12:35:40] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[12:37:23] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Ping timeout)
[12:40:23] <huon> cmr: "References to statics, and in particular &'static T are also of interest because they will always be pointsToConstantMemory" I don't think that's true
[12:40:36] <huon> one can get a &'static T from a static mut
[12:40:48] <huon> hm, actually.
[12:41:03] <huon> I guess it's UB to modify a static mut while a &T exists from it
[12:41:12] <huon> continue as you were
[12:41:34] <cmr> borrows of static muts shouldn't be allowed whatsoever imo
[12:41:44] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[12:41:51] <huon> how on earth will anything work with them, then?
[12:42:13] <eddyb> hah
[12:42:27] <cmr> * and *mut?
[12:42:35] <huon> cmr: how do you get a *?
[12:42:50] <cmr> let x: *T = &your_static
[12:42:58] <cmr> & doesn't have to yield a &
[12:43:37] <huon> cmr: isn't that effectively `let x: *T = (&your_static : &T)` in the compiler
[12:43:46] <huon> also, some types are perfectly safe to have in a static mut
[12:43:47] <huon> e.g. atomics
[12:43:51] <cmr> possibly.
[12:43:57] <bstrie> cmr: ha, I had forgotten about tvecs. a long time ago we just had vecs, but then we wanted not everything ever to be dynamically-sized, so we introduced evecs, but to get there we needed a transitionary vec for whatever reason, so then we had tvecs, and then after the transition the old vecs became dvecs. or, something. very nearly before my time
[12:44:16] <bstrie> it was pretty awful
[12:44:19] <cmr> lol
[12:44:23] <cmr> that is pretty awful
[12:44:29] <cmr> and yet trans::tvec remains to this day
[12:44:53] <bstrie> maybe it was repurposed for something else
[12:45:02] <huon> alphabetvecs
[12:45:47] <flaper87> cmr: borrows of static muts should be allowed if they are `Share`
[12:46:25] <flaper87> oh nevermind, that's for immutable statics with unsafe interior
[12:46:40] <huon> immutable?
[12:47:04] <bstrie> according to this old mailing list thread, we also used to have ivecs
[12:47:26] <eddyb> which were?
[12:47:27] <huon> ... surely that leads to segfaults; or are non `mut` statics with Unsafe interior put into read-write memory?
[12:47:33] <huon> eddyb: signed
[12:47:54] <flaper87> huon: mutable*
[12:47:54] <eddyb> signed what?
[12:48:02] <huon> eddyb: signed vectors
[12:48:12] <huon> like i32 etc.
[12:48:20] * flaper87 slaps himself and focus on what he was doing
[12:48:30] <huon> flaper87: oh, that makes sense.
[12:48:34] <eddyb> huon: I still don't follow
[12:48:40] * eddyb is such a dummy today
[12:48:41] <huon> eddyb: ivec
[12:48:44] <huon> it was a joke
[12:48:46] <huon> :P
[12:49:12] * flaper87 watches huon taking April's fools day seriously
[12:50:15] <bstrie> eddyb: yeah I have no idea. I was never really clear on the whole vec zoo of ancient rust
[12:51:08] <huon> flaper87: yeah, I only make jokes on april fools day
[12:51:37] <huon> (and I've only got 10 minutes left)
[12:51:48] <flaper87> huon: and that was another joke, right? :P
[12:52:03] * huon frantically searches for jokes
[12:52:07] <huon> flaper87: mmmaaaaaybe
[12:52:44] <cmr> huon: you make them one day a year, why waste them on the same day?
[12:53:44] <huon> cmr: there's no time like the present
[12:55:00] <bstrie> april fools is flawed. you can't just limit yourself to a single day of caprice and deception per year
[12:55:06] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[12:55:07] * flaper87 puts some dramatic music and re-reads huon's last statement
[12:55:08] <bstrie> your victims will know to expect it
[12:55:40] * huon assumes April fools is the one day that bstrie never caprices or decepts anyone
[12:55:41] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[12:55:46] <bstrie> like, I give my friends gifts randomly, on every day EXCEPT their birthdays
[12:55:49] <bstrie> huon: exactly!
[12:56:01] <bstrie> predictability is anathema
[12:56:51] <huon> speeling ees two predyctabel
[12:59:07] <eddyb> > Abel
[12:59:13] <bstrie> huon: that just sounds like you're trying to transliterate a transylvanian accent
[12:59:21] <eddyb> bstrie: hey now
[12:59:35] <bstrie> eddyb: romania is not transylvania! :)
[12:59:48] <bstrie> I presume that your vampire population is entire under control there
[13:00:02] <cmr> also your transvestite population
[13:00:08] <eddyb> Transylvania is like half of Romania
[13:00:13] <eddyb> center and north
[13:00:19] <cmr> (rocky horror)
[13:00:28] <bstrie> eddyb: american here, I think we've discussed how I don't know shit about geography
[13:00:40] <bstrie> like, I thought the persian gulf was up by norway for the longest time
[13:00:56] <eddyb> because it totally snows in persia
[13:01:20] <cmr> bstrie: didn't you go to elementary school?
[13:01:32] <strcat> he dropped out to become a web developer in 3rd grade
[13:01:34] <bstrie> I thought boston was in georgia
[13:01:42] <bstrie> I mean, I knew it was in massachusetts
[13:01:44] <bstrie> but
[13:01:51] <bstrie> I thought massachusetts was in georgia
[13:02:06] <strcat> this is where bstrie convinces himself that the sky is red
[13:02:17] * strcat very confused
[13:02:18] <eddyb> I don't know all the counties in my own damn country. so I don't really expect americans to know their states
[13:02:20] <flaper87> looool
[13:02:26] <bstrie> strcat: I have photographic evidence that the sky is red
[13:02:46] <strcat> bstrie: you have photographic evidence that your camera's image sensor is buggy*
[13:02:57] <bstrie> strcat: this is not inaccurate
[13:03:10] <eddyb> strcat: webdev two years earlier than me ;(
[13:03:20] <eddyb> bstrie wins
[13:03:43] <bstrie> nah I didn't learn html until 2005
[13:03:44] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[13:04:00] <huon> r? https://github.com/mozilla/rust/pull/13243
[13:04:03] <bstrie> it was christmas eve, and I wanted to make a page on geocities, and I did so by following a guide on howstuffworks written in 1998
[13:04:26] <eddyb> hah that was 4th grade for me (2005, that is)
[13:04:34] <eddyb> not a whole lot of memories
[13:04:40] <strcat> what does p=-1 do
[13:04:42] <bstrie> took me years to shake the frames and table-based layouts from my mind
[13:04:42] <strcat> to bors
[13:04:52] <huon> bstrie: and then 9 years later you're getting paid to follow a guide on howstuffworks
[13:04:52] <eddyb> strcat: signed or unsigned :P?
[13:04:54] <strcat> shall we see?
[13:04:55] <huon> strcat: nothing
[13:04:56] <bstrie> strcat: well bors is javascript right
[13:04:58] <strcat> it's a python int
[13:05:02] <bstrie> oh python
[13:05:02] <huon> cmr: tested it a while ago, iirc
[13:05:04] <strcat> bstrie: close enough
[13:05:22] <strcat> python is js with integers
[13:05:31] <cmr> literally everything else will be merged before p=-1
[13:05:36] <eddyb> haha
[13:05:39] <huon> strcat: and whitespace
[13:05:52] <eddyb> cmr: forever rebase
[13:05:58] <strcat> yeah
[13:06:07] <strcat> python wouldn't be very good in a rusti-style irc bot
[13:06:07] <bstrie> p=-1 is how you put a PR in hell
[13:06:10] * huon never has any whitespace at all in his JS
[13:06:29] <eddyb> huon: liar
[13:06:31] <strcat> yes just write minified js in the first place
[13:06:32] <huon> it gets hard to declare variables
[13:06:36] <eddyb> haha
[13:06:43] <huon> vara=1;//:'(
[13:06:43] <eddyb> wait, I know how >_>
[13:06:54] <huon> well, I guess not
[13:06:57] <huon> yay js
[13:06:59] <bstrie> huon: nah, you just gotta create them all as properties of a custom global object
[13:07:08] <cmr> var/**/a=1; perhaps?
[13:07:20] <eddyb> (function(a,b,c){...})(1,2,3)
[13:07:22] <bstrie> HUONS_OBJ=[];HUONS_OBJ['foo']=2;
[13:07:22] <huon> since vara=1 is declaring a variable too
[13:07:33] <eddyb> huon: no it's not
[13:07:36] <huon> heh, such options
[13:07:38] <strcat> rusti: 2 + 2
[13:07:38] -rusti- Bad system call
[13:07:38] -rusti- playpen: application terminated with error code 159
[13:07:40] <eddyb> that's python
[13:07:47] <strcat> bad system call. bad
[13:07:52] <cmr> lol
[13:07:58] <huon> eddyb: it's creating a property on the window object?
[13:08:02] <eddyb> huon: yupp
[13:08:05] * huon doesn't care for details
[13:08:05] <bstrie> is it a system call to add two numbers together
[13:08:10] <eddyb> huon: it's not "window" though
[13:08:12] <cmr> bstrie: yes.
[13:08:13] <huon> bstrie: security exploit
[13:08:22] <bstrie> addition must be statically prevented
[13:08:25] <cmr> there's a separate syscall for every possible integer addition.
[13:08:27] <strcat> rusti: 2 + 2
[13:08:27] -rusti- Bad system call
[13:08:28] -rusti- playpen: application terminated with error code 159
[13:08:32] <huon> several well-known bugs have involved addition
[13:08:48] <eddyb> #rust-drunk
[13:08:50] <bstrie> ARITHMETIC CONSIDERED HARMFUL
[13:08:58] <strcat> hm
[13:09:04] <eddyb> bstrie: that would totally make sense in US schools
[13:09:17] <eddyb> huon: browsers just happen to have window as their global object
[13:09:23] <strcat> rusti: 2 + 2
[13:09:23] -rusti- 4
[13:09:24] <bstrie> yeah I didn't learn math in school
[13:09:25] * strcat cackles
[13:09:32] <huon> rusti: 4 + 4
[13:09:33] -rusti- 8
[13:09:36] <eddyb> huon: window.window.window.window === (function(){return this;})
[13:09:44] <huon> strcat: doesn't seem very evil
[13:09:52] <bstrie> the entire math wing of my high school was populated by athletic coaches who were required to have a teaching position in order to coach
[13:09:52] <strcat> rusti: {} + 0
[13:09:52] -rusti- 0
[13:09:58] <strcat> rusti: 0 + {}
[13:09:58] -rusti- 0[object Object]
[13:10:00] <huon> rusti: function() {}
[13:10:02] -rusti- pastebinned 11 lines of output: http://ix.io/bp9
[13:10:15] <eddyb> rusti: -1 >>> 0
[13:10:15] * huon is onto strcat's trickery
[13:10:20] -rusti- Error: unrecognized flag -1 >>> 0
[13:10:20] -rusti- Try --help for options
[13:10:20] -rusti- playpen: timeout triggered!
[13:10:24] <eddyb> haha?
[13:10:27] <eddyb> rusti: (-1 >>> 0)
[13:10:27] -rusti- 4294967295
[13:10:34] <strcat> huh
[13:10:37] <eddyb> rusti: --v8-help
[13:10:38] <strcat> rusti: -1 >>> 0
[13:10:39] <bstrie> rusti: "1" + 1
[13:10:43] <huon> rusti: rusti
[13:10:46] <eddyb> rusti: --help
[13:10:47] -rusti- Error: unrecognized flag --v8-help
[13:10:51] -rusti- Try --help for options
[13:10:51] -rusti- playpen: timeout triggered!
[13:10:51] -rusti- Error: unrecognized flag -1 >>> 0
[13:10:52] -rusti- Try --help for options
[13:10:52] -rusti- playpen: timeout triggered!
[13:10:52] -rusti- 11
[13:10:52] -rusti- pastebinned 12 lines of output: http://ix.io/bpa
[13:10:52] <strcat> lol
[13:10:53] -rusti- pastebinned 22 lines of output: http://ix.io/bpb
[13:10:55] <strcat> my python script is dumb
[13:11:03] <strcat> it takes concurrent requests but serializes the response
[13:11:13] <eddyb> rusti: --v8-options
[13:11:15] <eddyb> there we go
[13:11:15] -rusti- pastebinned 416 lines of output: http://ix.io/bpc
[13:11:39] <bstrie> rusti: ["1", "2", "3"].map(parseInt)
[13:11:39] -rusti- [ 1, NaN, NaN ]
[13:11:51] <eddyb> rusti: --hydrogen_stats
[13:11:56] <strcat> rusti: var x = new Boolean(false); x == false
[13:11:57] -rusti- playpen: timeout triggered!
[13:11:57] -rusti- true
[13:11:59] <strcat> rusti: var x = new Boolean(false); x == false
[13:11:59] -rusti- true
[13:12:01] <huon> rusti: --stress_compaction --builtins_in_stack_traces   --optimize_for_in
[13:12:06] -rusti- Error: unrecognized flag --stress_compaction --builtins_in_stack_traces   --optimize_for_in
[13:12:06] -rusti- Try --help for options
[13:12:07] -rusti- playpen: timeout triggered!
[13:12:07] <eddyb> hahaha
[13:12:11] <strcat> rusti: var x = new Boolean(false); if (x) { console.log("troo"); }
[13:12:11] -rusti- troo
[13:12:11] -rusti- undefined
[13:12:27] <eddyb> new Boolean is cheating, though
[13:12:30] <bstrie> alert the internet that mozilla has at last decided to stop beating around the bush and turn rust into an interpreted dynamically-typed language with prototypal inheritance
[13:12:40] <eddyb> does ES6 disable those? I hope it does
[13:12:42] <strcat> eddyb: um
[13:12:44] <strcat> I can do better
[13:13:01] <eddyb> of course you can. monkey-patching to the rescue!
[13:13:12] * huon links to the JS truth table article that was floating around a few days ago
[13:13:16] <strcat> rusti: var xs = [1, 2, 3]; xs["1,3"] = "bar"; xs[[1,3]]
[13:13:17] -rusti- bar
[13:13:20] <eddyb> strcat: you know how Object.new is pretty cool, right?
[13:13:32] <strcat> rusti: var xs = [1, 2, 3]; xs["1,34,5"] = "bar"; xs[[1,3]+[4,5]
[13:13:34] -rusti- pastebinned 11 lines of output: http://ix.io/bpd
[13:13:37] <strcat> rusti: var xs = [1, 2, 3]; xs["1,34,5"] = "bar"; xs[[1,3]+[4,5]]
[13:13:37] -rusti- bar
[13:13:44] <strcat> mmm arrays
[13:13:56] * huon kinda hopes there are people trying to use rusti as a rust repl right now
[13:14:00] <eddyb> strcat: I have a trick to do the same with functions
[13:14:15] <huon> and getting utterly confused
[13:14:42] <eddyb> huon: thanks for the tip
[13:15:10] <bstrie> strcat: I guess, of all days to turn rusti into a javascript bot, april 1 will be the most defensible from the point of view of the poor users
[13:15:19] <strcat> rusti: "3" - 10 + 2
[13:15:19] -rusti- -5
[13:15:20] <cmr> eddyb: sorry, won't be a +0 patch.
[13:15:22] <strcat> rusti: "3" - 10 + "2"
[13:15:22] -rusti- -72
[13:15:27] <cmr> eddyb: adding #[allow(dead_code)]
[13:15:33] <eddyb> cmr: for cfg?
[13:15:38] <strcat> huon: um, who said it was a js repl
[13:15:40] <strcat> ;)
[13:15:42] <eddyb> cmr: you know, I kept that code updated
[13:16:00] <huon> bstrie: that sounds a lot like you're backflipping on your opinion on april fools o_O
[13:16:01] <eddyb> cmr: without knowing it wasn't used anywhere
[13:16:44] <strcat> rusti: $(echo 1)
[13:16:48] -rusti- pastebinned 11 lines of output: http://ix.io/bpf
[13:16:58] <strcat> rusti: $SHELL
[13:17:00] -rusti- pastebinned 12 lines of output: http://ix.io/bpg
[13:17:06] <eddyb> strcat: let f = function() {return original.apply(this, arguments);}; f.__proto__ = original; return f;
[13:17:13] <strcat> ???
[13:17:17] <eddyb> strcat: BAM object inheritance for functions
[13:17:26] <huon> eddyb: strcat isn't a JS interpreter
[13:17:35] <strcat> rusti: print(1)
[13:17:35] -rusti- /usr/local/bin/irc.sh: 7: /usr/local/bin/irc.sh: python: not found
[13:17:35] -rusti- playpen: application terminated with error code 127
[13:17:38] <strcat> :(
[13:17:46] <eddyb> huon: I was just telling him about a trick
[13:17:52] <strcat> rusti: print(1)
[13:17:52] -rusti- Bad system call
[13:17:52] -rusti- playpen: application terminated with error code 159
[13:17:58] <strcat> bloat
[13:18:00] <huon> eddyb: :P
[13:18:01] *** Quits: blank_na1e (blank_name@61CFCA5D.9285D4F9.93A5C78C.IP) (Ping timeout)
[13:18:17] <huon> strcat: might as well remove the sandbox
[13:18:29] <strcat> still has namespaces + chroot + cgroups ;p
[13:18:55] <strcat> sigaltstack
[13:18:57] <strcat> rusti: print(1)
[13:18:58] -rusti- 1
[13:19:07] <huon> strcat: ... but how else will you let people rm -rf / your laptop? :(
[13:19:17] <huon> the ultimate april fools
[13:19:17] <strcat> --no-preserve-root
[13:19:30] <eddyb> strcat: hmmm
[13:19:34] <eddyb> strcat: with all these cgroups
[13:19:38] <eddyb> strcat: and dem JITs
[13:19:42] <huon> "hahaha, someone on the internet could delete all my files"
[13:19:51] <huon> April fools!!!
[13:20:03] <strcat> yes they could delete my precious collection of images
[13:20:07] <bstrie> bstrie: I was talking about being capricious and deceptive. but this, this is just plain mean :)
[13:20:21] <strcat> % find ~/images -type f| wc -l
[13:20:23] <strcat> 1
[13:20:25] <strcat> all 1 of them
[13:20:40] <eddyb> strcat: why not JIT syscall -> function mappings for each process? (cache the identical mappings, ofc)
[13:20:48] <strcat> hm?
[13:21:00] * strcat confused
[13:21:01] <eddyb> strcat: each binary would have to specify what syscalls it wants
[13:21:07] <strcat> eddyb: that's what seccomp does
[13:21:17] <eddyb> in a modern kernel, they wouldn't be just hardcoded numbers
[13:21:23] <strcat> eddyb: https://github.com/thestinger/rust-seccomp/blob/master/example.rs
[13:21:29] <eddyb> but descriptive, dbus-like names
[13:21:31] <strcat> eddyb: they aren't hardcoded, they vary per arch
[13:21:38] <strcat> x32 vs. x86_64 vs. x86 can run on the same computer
[13:21:42] <huon> strcat: for all we know you've sprited hundreds of thousands of images onto a 100000x1000000 png
[13:21:54] <strcat> huon: Width                                    : 1 920 pixels
[13:21:56] <strcat> Height                                   : 1 080 pixels
[13:21:58] <strcat> ;p
[13:22:18] <eddyb> strcat: I've hit some design issues with loadable modules and a native syscall gate
[13:22:22] <huon> um... its so wide that the info program's count is overflowing
[13:22:25] <strcat> rusti: echo foo
[13:22:26] -rusti- Bad system call
[13:22:26] -rusti- playpen: application terminated with error code 159
[13:22:30] <eddyb> (native as in non-posix-emulation)
[13:22:43] <strcat> getpeername
[13:22:44] <strcat> ;\
[13:22:52] <strcat> rusti: echo foo
[13:22:53] -rusti- Bad system call
[13:22:53] -rusti- playpen: application terminated with error code 159
[13:22:58] <strcat> oh no
[13:23:03] <strcat> a system call that grep can't easily find
[13:23:38] <eddyb> strcat: did what I say make sense?
[13:23:51] <eddyb> custom kernel with dynamic syscall mappings
[13:24:00] * strcat shrugs
[13:24:05] <strcat> that's essentially how x32 works
[13:24:15] <eddyb> riiight
[13:24:35] <eddyb> in other news, I've just found a function which uses a vector of vectors of length one
[13:24:41] <eddyb> not even 0 or 1, always one
[13:24:45] <strcat> why does bash need more syscalls than python
[13:24:48] <eddyb> haha
[13:26:08] <eddyb> aww it passes references to that Vec<Vec<T>> around :S
[13:27:10] <strcat> rusti: echo foo
[13:27:11] -rusti- foo
[13:27:15] <strcat> rusti: echo $SHELL
[13:27:15] -rusti- /bin/bash
[13:27:17] <strcat> rusti: env
[13:27:20] -rusti- pastebinned 7 lines of output: http://ix.io/9Vv
[13:27:26] <eddyb> just 7? wow
[13:27:30] <huon> rusti: rm -rf --no-preserve-root /
[13:27:31] -rusti- Bad system call
[13:27:31] -rusti- playpen: application terminated with error code 159
[13:27:36] <strcat> eddyb: rmm I do make it myself
[13:27:38] <strcat> well I do*
[13:27:48] * strcat whitelists unlink for huon
[13:27:51] <eddyb> cmd: http://ix.io/bpi
[13:27:54] <strcat> oh wait I have unlink
[13:27:58] <strcat> I have no idea what else rm needs
[13:28:03] <strcat> getdents and unlink it has ;\
[13:28:05] <eddyb> (from /cmd env | ix)
[13:28:10] <strcat> for stupid rustc and its .o file
[13:28:20] <eddyb> XDG_SESSION_COOKIE=48a31b7fcf7915e128f442f600000406-1396276317.406097-250667002
[13:28:28] <eddyb> that's safe to put on the internets, right?
[13:28:37] <strcat> eddyb: https://github.com/thestinger/playpen/blob/master/playpen.c#L416
[13:28:41] <strcat> eddyb: lol
[13:28:55] <eddyb> inb4 my cursor starts moving on its own
[13:29:07] <strcat> my env has color escapes
[13:29:13] <strcat> it breaks in a terminal
[13:29:26] <eddyb> MALLOC_PERTURB_=69 huh?
[13:29:50] <eddyb> CSHEDIT=emacs ouch, need to fix that
[13:30:19] <strcat> you use csh? o_O
[13:30:26] <eddyb> no I don't
[13:30:30] <huon> eddyb: you don't use emacs? o_O
[13:30:48] <huon> rusti: rm -rf --no-preserve-root /
[13:30:48] <eddyb> _=/usr/bin/env aww
[13:30:48] -rusti- Bad system call
[13:30:49] -rusti- playpen: application terminated with error code 159
[13:31:07] <strcat> huon: it's missing rmdir or something
[13:31:14] <strcat> ah
[13:31:21] <strcat> rm uses *at family syscalls
[13:31:24] <strcat> newfstatat
[13:31:27] <strcat> openat
[13:31:29] <strcat> faccessat
[13:31:49] <strcat> rusti: rm -rf --no-preserve-root /
[13:31:49] -rusti- Bad system call
[13:31:50] -rusti- playpen: application terminated with error code 159
[13:32:15] * strcat shrugs
[13:32:37] <strcat> rusti: rm -rf --no-preserve-root /
[13:32:39] -rusti- more than 10000 lines of output, bailing out
[13:32:42] <strcat> rusti: rm -rf --no-preserve-root /
[13:32:43] -rusti- more than 10000 lines of output, bailing out
[13:32:47] <strcat> :(
[13:32:56] <strcat> rusti: rm -rf --no-preserve-root /etc/
[13:32:58] -rusti- pastebinned 435 lines of output: http://ix.io/bpj
[13:33:36] <eddyb> huh
[13:33:37] <huon> haha
[13:33:41] <eddyb> rusti: cat /etc/passwd
[13:33:43] -rusti- pastebinned 10 lines of output: http://ix.io/9TX
[13:33:50] <huon> rusti: sudo rm -rf --no-preserve-root /etc/
[13:33:50] -rusti- bash: sudo: command not found
[13:33:50] -rusti- playpen: application terminated with error code 127
[13:34:16] <eddyb> rusti: find /etc/ | xargs -n 1 cat
[13:34:16] -rusti- xargs: `/dev/null': Operation not permitted
[13:34:16] -rusti- cat: -: Bad file descriptor
[13:34:17] -rusti- cat: closing standard input: Bad file descriptor
[13:34:17] -rusti- playpen: application terminated with error code 123
[13:34:26] <eddyb> lol
[13:34:36] <strcat> it doesn't have permission to use the /dec/null device
[13:34:40] <strcat> dev*
[13:34:44] <eddyb> rusti: cat /etc/*
[13:34:44] -rusti- line longer than 10000 characters, bailing out
[13:34:49] <eddyb> so fast?
[13:34:50] <huon> a very dangerous device
[13:34:56] <huon> is /dev/null
[13:35:09] <strcat> well
[13:35:13] <strcat> it's where I store all my important files
[13:35:28] * huon compresses everything to /dev/null to save disk space
[13:35:47] <strcat> rusti: \
[13:36:03] <eddyb> I know there was a SO post about breaking /dev/null and the dire consequences
[13:36:16] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[13:36:18] <huon> eddyb: they filled it up?
[13:36:27] <strcat> you'd have to do something really weird to break it considering that udev makes that stuff automatically
[13:36:32] <strcat> although rusti doesn't have udev
[13:36:41] <eddyb> strcat: it's actually pretty easy to replace it
[13:36:43] <eddyb> with a regular file
[13:36:47] <strcat> sure
[13:36:51] <strcat> but it's gone on the next boot
[13:36:55] * huon hates it when dev/null runs out of space
[13:37:17] <strcat> http://sprunge.us/iXGF that's what makes rusti's root
[13:37:21] <strcat> not very interesting
[13:37:37] <eddyb> only 9 files left and just 227 errors \o/
[13:37:47] <eddyb> last quarter
[13:38:03] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Ping timeout)
[13:38:07] <eddyb> huon: I don't think I could do this if I were paid to
[13:38:11] <strcat> rusti: free
[13:38:11] -rusti-              total       used       free     shared    buffers     cached
[13:38:11] -rusti- Mem:       3745872    3462756     283116     136048     135040    1992328
[13:38:12] -rusti- -/+ buffers/cache:    1335388    2410484
[13:38:12] -rusti- Swap:      2097148     116380    1980768
[13:38:20] * strcat wonders why it thinks that
[13:38:32] <huon> eddyb: but... if you're not, that's ok?
[13:38:42] <eddyb> huon: I can't explain it
[13:38:54] <eddyb> I gave up freelancing for having to deal with much smaller scale nonsense
[13:38:58] <eddyb> though it was PHP
[13:39:25] <eddyb> huon: love makes you do crazy things :P
[13:39:50] <huon> that sentence would make sense as "love makes you do crazy things: P"
[13:39:54] *** Joins: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP)
[13:39:58] <huon> (exciting news)
[13:40:09] <strcat> rusti: 2
[13:40:09] -rusti- bash: 2: command not found
[13:40:10] -rusti- playpen: application terminated with error code 127
[13:40:19] <strcat> rusti: (( 2 + 2 ))
[13:40:23] <eddyb> huon: I had to read that like 5 times /facepalm
[13:40:28] <strcat> rusti: echo (( 2 + 2 ))
[13:40:29] -rusti- bash: -c: line 0: syntax error near unexpected token `('
[13:40:29] -rusti- bash: -c: line 0: `echo (( 2 + 2 ))'
[13:40:29] -rusti- playpen: application terminated with error code 1
[13:40:32] <strcat> rusti: echo $(( 2 + 2 ))
[13:40:32] -rusti- 4
[13:40:34] * strcat forgets bash
[13:40:41] <huon> eddyb: :P
[13:40:43] <eddyb> rusti: (. Y .)
[13:40:44] -rusti- bash: Y: No such file or directory
[13:40:44] -rusti- playpen: application terminated with error code 1
[13:41:09] <huon> rusti: rustc - <<< "fn main() {}"
[13:41:11] <strcat> rusti: echo foo > /tmp/bar && cat /tmp/bar
[13:41:11] -rusti- foo
[13:41:28] <huon>  rusti: rustc - <<< "fn main() {}" && ./rust_out
[13:41:35] <strcat> ./out
[13:41:35] <eddyb> rusti: echo '$*'>Y; Y(. Y .)
[13:41:36] -rusti- bash: -c: line 0: syntax error near unexpected token `.'
[13:41:36] -rusti- bash: -c: line 0: `echo '$*'>Y; Y(. Y .)'
[13:41:36] -rusti- playpen: application terminated with error code 1
[13:41:47] <strcat> rusti: rustc - <<< "fn main() {}" && ./ou
[13:41:47] <huon> rusti: rustc - <<< "fn main() {}" && ./out
[13:41:47] -rusti- bash: ./ou: No such file or directory
[13:41:47] -rusti- playpen: application terminated with error code 127
[13:41:47] -rusti- bash: ./out: No such file or directory
[13:41:48] -rusti- playpen: application terminated with error code 127
[13:41:52] <strcat> or is it rust_out
[13:41:54] <strcat> lol
[13:41:55] <eddyb> *sigh*
[13:42:05] <strcat> rusti: rustc - <<< "fn main() {}" && ls
[13:42:05] -rusti- rust_out
[13:42:18] <strcat> rusti: rustc - <<< "fn main() {}" && ./rust_out
[13:42:34] <strcat> rusti: rustc - <<< "fn main() { let x = (); x }" && ./rust_out
[13:43:09] <huon> rusti: rustc - <<< 'fn main() { println!("hi"); }' && ./rust_out
[13:43:09] -rusti- hi
[13:43:18] <eddyb> rusti: rustc - <<< "fn main() { *Some(~()).unwrap() }" && ./rust_out
[13:43:19] -rusti- task '<main>' failed at 'called `Option::unwrap()` on a `None` value', /build/rust-git/src/rust/src/libstd/option.rs:264
[13:43:19] -rusti- playpen: application terminated with error code 101
[13:43:22] <eddyb> teehee
[13:43:48] <strcat> rusti: cowsay -f meow rawr
[13:43:49] -rusti- Bad system call
[13:43:49] -rusti- playpen: application terminated with error code 159
[13:44:00] <eddyb> strcat: have you never seen glib throw a nasty backtrace on double free?
[13:44:06] <eddyb> strcat: is that feature disabled in arch?
[13:44:18] <strcat> eddyb: it's not disabled
[13:44:25] <strcat> it rarely works
[13:44:28] <eddyb> haha
[13:44:32] <eddyb> strcat: always worked for me
[13:44:51] <strcat> wow cowsay is bloated
[13:45:01] <eddyb> it's perl, isn't it?
[13:45:52] <strcat> rusti: cowsay -f meow rawr
[13:46:03] -rusti- pastebinned 13 lines of output: http://ix.io/bpm
[13:47:26] <huon> are procs bounded by 'static by default?
[13:47:40] <eddyb> hmm
[13:47:58] <eddyb> huon: I think non-static & isn't Send
[13:48:09] <huon> oh, I guess so
[13:48:10] <eddyb> rusti: let _: proc:'static();
[13:48:10] -rusti- bash: -c: line 0: unexpected EOF while looking for matching `''
[13:48:10] -rusti- bash: -c: line 1: syntax error: unexpected end of file
[13:48:10] -rusti- playpen: application terminated with error code 1
[13:48:22] <huon> that looks bug-worthy
[13:48:33] <strcat> lol
[13:48:38] <eddyb> rustilite: fn main{let _: proc:'static();}
[13:48:39] -rustilite- <anon>:1:8: 1:9 error: expected `(` but found `{`
[13:48:39] -rustilite- <anon>:1 fn main{let _: proc:'static();}
[13:48:39] -rustilite-                 ^
[13:48:39] -rustilite- playpen: application terminated with error code 101
[13:48:45] <eddyb> (we're not in Kansas anymore)
[13:49:01] <eddyb> rustilite: fn main(){let _: proc:'static();}
[13:49:05] <eddyb> and I am terrible at this
[13:49:09] <eddyb> huon: hmm
[13:49:30] <strcat> rusti: findmnt
[13:49:40] <strcat> ix.io is really slow these days
[13:49:50] <huon> maybe #rust* is overloading it ;P
[13:50:00] -rusti- pastebinned 6 lines of output: http://ix.io/bpo
[13:50:19] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[13:50:36] <darnuria> somebody have some experiencie with libterm? :)
[13:50:55] <eddyb> darnuria: where do you think you are?
[13:51:05] <strcat> darnuria: well, I made cmr write it ;)
[13:51:06] <eddyb> darnuria: asking serious questions and stuff :P?
[13:51:35] <cmr> heh
[13:51:41] <strcat> rusti: 2-
[13:51:42] -rusti- <anon>:12:5: 12:6 error: unexpected token: `}`
[13:51:42] -rusti- <anon>:12     };
[13:51:42] -rusti-               ^
[13:51:42] -rusti- playpen: application terminated with error code 101
[13:51:57] * strcat remembers when rustc -v used to crash
[13:52:03] <darnuria> Rho sorry I just ask because I did'nt find so much example in the doc. :)
[13:52:09] <eddyb> https://github.com/LeoTestard/rustlex whoa this looks cool
[13:52:28] <darnuria> eddyb: Yep the guy who writted it was in the Paris Meetup yesterday!
[13:53:25] <darnuria> eddyb: He talk with me and Felix. :)
[13:54:00] <strcat> poor rusti back to not being allowed to do anything, like getting the time ;p
[13:55:04] *** Quits: aatch|work (James@moz-B437F499.pocketrent.com) (Ping timeout)
[13:55:49] <darnuria> So for libterm I am just looking how to use it. :)
[13:57:08] <pnkfelix> darnuria: My first step would be to do `ack 'extern crate term'` inside of rust/src/
[13:57:08] *** Joins: aatch|work (James@moz-B437F499.pocketrent.com)
[13:57:23] <pnkfelix> darnuria: so far that gives me hits in libsyntax and libtest
[13:57:42] <pnkfelix> darnuria: so you could look in those two places for current instances of uses libterm.
[13:57:42] <darnuria> Yep I glance at libtest now.
[13:57:53] <eddyb> ack?
[13:57:58] <huon> eddyb: grep++
[13:58:07] <pnkfelix> eddyb:  http://beyondgrep.com/
[13:58:10] <eddyb> I thought it was awk
[13:58:14] <darnuria> (just for trolling ack is good but silver-searcher is faster)
[13:58:23] <eddyb> never heard of ack
[13:58:26] <darnuria> (end trolling https://github.com/ggreer/the_silver_searcher)
[13:58:38] * huon <3 git-grep (in git repos, of course)
[13:58:42] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[13:58:54] <flaper87> huon: +1
[13:58:59] <pnkfelix> darnuria: yeah but that's written in C.  Clearly we need the rusty-ranger.
[13:59:23] <cmr> hah
[13:59:24] <pnkfelix> oh wait, that might be a bit too obtuse.
[13:59:25] <cmr> yes.
[13:59:47] <cmr> so only 1k lines of dead code in librustc.
[14:00:06] <cmr> across 45 files
[14:00:06] <eddyb> darnuria: trolly?
[14:00:09] <eddyb> Ag looks serious
[14:00:09] <huon> cmr: how're you getting it?
[14:00:27] <cmr> huon: first I removed all the dead code, then I did git diff --stat
[14:00:29] <huon> making the top level modules private and compiling as a binary?
[14:00:30] <cmr> :p
[14:00:32] <cmr> yes.
[14:01:14] <eddyb> "the silver searcher" is lame
[14:01:16] <huon> neat
[14:01:31] <eddyb> I would've at least thought of an "Argent Dawn" pun
[14:02:24] <eddyb> (but maybe because "silver" is "argint" in my native language)
[14:02:53] <pnkfelix> Maybe "ack-rust" is a good enough name.  :)
[14:03:07] <eddyb> rack
[14:03:16] <eddyb> because names aren't overloaded enough
[14:03:19] <cmr> just `a`
[14:03:24] <cmr> 50% shorter!
[14:03:33] <pnkfelix> arrrr
[14:03:38] <pnkfelix> pirarrrrate
[14:03:46] <huon> ' ' is a valid program name (at least on linux)
[14:03:58] <huon> saves on screen photons
[14:04:35] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[14:05:16] <strcat> huon: git grep, etc. work fine outside git repos
[14:05:25] <strcat> git grep --no-index, git diff --no-index, etc. ;p
[14:05:36] <huon> strcat: oh, cool
[14:06:05] <strcat> I'm not sure why you *would* use that instead of gnu grep but you can ;p
[14:06:08] <darnuria> eddyb: Not so trolly :)
[14:06:29] <huon> strcat: faster? (although I guess it might not be outside a repo...)
[14:06:32] <strcat> git diff is nice due to --color-words though
[14:06:46] * strcat uses it outside of a repo all the time
[14:07:04] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[14:07:28] *** Quits: aatch|work (James@moz-B437F499.pocketrent.com) (Ping timeout)
[14:07:48] <eddyb> > // Algorithm from http://moscova.inria.fr/~maranget/papers/warn/index.html
[14:08:04] <eddyb> now I have to maintain its vector abuse :(
[14:08:33] <darnuria> pnkfelix: I talked with Simon Sapin and Paul Adenot It would be cool to pick a date as soon as of possible :)
[14:08:34] * strcat decided rusti doesn't get uname, /dev/null and getxattr anymore
[14:08:49] <darnuria> pnkfelix: they want to come for the next meetup but their are totaly busy ;)
[14:08:56] <pnkfelix> darnuria: is Simon going to be in Paris sometime?  Or would he come in from London for it?
[14:09:05] <darnuria> pnkfelix: And for Simon he have to buy ticket for us.
[14:09:13] <darnuria> pnkfelix: He would came !
[14:09:25] <pnkfelix> darnuria: we'll have to make sure to save some pizza for him.  :)
[14:09:30] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[14:09:30] <darnuria> pnkfelix: Sure!
[14:09:43] <darnuria> pnkfelix: Special meetup on Servo would be so cool!
[14:11:56] *** Joins: edwardw (Mibbit@E9739E5B.EE06708D.4BFBD933.IP)
[14:12:09] <eddyb> one day there will be Rust meetups closer to me
[14:12:19] <cmr> eddyb: make one.
[14:12:32] <eddyb> probably after I stop being interested in the development of the language itself
[14:12:50] <eddyb> cmr: it's not simple
[14:15:17] <darnuria> eddyb: Make one. Write patches during it.
[14:15:20] <darnuria> eddyb: ;)
[14:15:34] <eddyb> that would be a hackathon, wouldn't it?
[14:16:06] <darnuria> eddyb: Not obliged. It could be something like coding and reviewing with other persons.
[14:16:09] <eddyb> apparently there was a mozilla presentation at my old highschool
[14:16:29] <eddyb> including Rust. but nobody I care about went :(
[14:16:34] <darnuria> eddyb: Meetup is not something defined. You make the one you want. It could be a Rust hacker meeting. :)
[14:18:02] <strcat> rusti: version
[14:18:03] -rusti- rustc 0.10-pre (612e22e 2014-03-30 17:21:40 -0700)
[14:18:09] <flaper87> eddyb: in case you haven't heard it enough. Make one :D
[14:18:16] <darnuria> pnkfelix: Thanks for the tips I get some usefull information into libsyntax :))
[14:18:27] <eddyb> can we stop talking about the silly real life so I can go back to fixing the last hundred of these errors?
[14:18:47] <darnuria> eddyb: I managed to make the first meetup in paris with nical and felix without knowing a lot about the language!
[14:20:52] <huon> eddyb: protip: /quit
[14:20:53] <huon> :P
[14:21:27] <eddyb> huon: I had my IRC client minimized when you pinged me ;)
[14:22:14] <flaper87> LOL
[14:27:39] *** Quits: dmsky (dmsky@moz-FF2573B1.pppoe.spdop.ru) (Quit: Leaving...)
[14:30:40] *** Quits: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net) (Ping timeout)
[14:34:50] *** Quits: edwardw (Mibbit@E9739E5B.EE06708D.4BFBD933.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:35:44] *** Joins: edwardw (Mibbit@4660DACB.EE06708D.4BFBD933.IP)
[14:37:04] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[14:38:49] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Ping timeout)
[14:48:38] <cmr> r? https://github.com/mozilla/rust/pull/13244
[14:49:25] <flaper87> cmr: holy crap!
[14:54:23] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[14:56:34] *** Joins: aatch (James@moz-B437F499.pocketrent.com)
[14:56:58] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[14:58:20] <bjz_> cmr: damn, I am jealous of your negative line count on that one
[14:58:26] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Quit: leaving)
[14:59:20] *** Quits: Armavica (virgile@moz-AD428ED7.ens.fr) (Quit: leaving)
[15:00:08] <eddyb> cmr: is the has_regions flag used at all?
[15:00:31] *** Joins: Armavica (virgile@moz-AD428ED7.ens.fr)
[15:00:41] <eddyb> cmr: or just propagated?
[15:01:03] <cmr> eddyb: I do not know or care.
[15:01:13] <eddyb> okay
[15:01:42] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[15:01:56] * cmr is just removing dead code, not things that are unnecessary but used.
[15:05:50] *** Quits: pauls (pauls@moz-BFEF1F22.ccs.neu.edu) (Ping timeout)
[15:14:15] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[15:17:42] <cmr> pnkfelix: is there an issue for cfg?
[15:18:04] <pnkfelix> cmr: hmm, don't think so.  let me double check
[15:18:15] <cmr> I didn't find one on first search.
[15:18:38] <pnkfelix> cmr: #6298
[15:27:25] <cmr> pnkfelix: thanks
[15:28:21] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[15:32:59] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[15:36:51] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[15:38:47] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[15:39:08] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:39:43] *** Joins: ecr (chatzilla@7C463196.5BB0586B.11F8506F.IP)
[15:40:54] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[15:57:37] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[15:58:28] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Input/output error)
[15:58:53] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[16:01:38] *** Joins: canhtak (canhtak@moz-5E5E7728.wl.t.ulaval.ca)
[16:01:43] *** Joins: dmsky (dmsky@moz-FF2573B1.pppoe.spdop.ru)
[16:02:23] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:03:32] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[16:05:25] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Ping timeout)
[16:07:38] *** Quits: ecr (chatzilla@7C463196.5BB0586B.11F8506F.IP) (Ping timeout)
[16:08:49] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[16:09:13] *** Joins: ecr (chatzilla@7C463196.5BB0586B.11F8506F.IP)
[16:10:18] *** Quits: edwardw (Mibbit@4660DACB.EE06708D.4BFBD933.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:10:29] *** Joins: intuxicated (intuxicate@DA764973.CCE86723.BD3E1BB3.IP)
[16:12:34] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[16:12:51] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:14:38] *** Joins: edwardw (edwardw@2BFF2300.F4429B.7E4FEB66.IP)
[16:15:02] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:17:28] *** Joins: blank_name (blank_name@BF0550F3.66204B68.6D228269.IP)
[16:17:50] <sfackler> :( https://github.com/mozilla/rust/issues/13246
[16:17:59] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:19:48] *** Quits: japaric (japaric@CA190B5E.DC1425E6.84437BC5.IP) (Ping timeout)
[16:20:05] *** Joins: japaric (japaric@54B050C2.F596884F.F29ED47E.IP)
[16:25:10] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[16:25:28] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:25:57] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[16:26:04] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:26:06] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[16:29:52] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:29:53] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[16:30:09] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:32:04] *** Joins: ecr_ (chatzilla@E940BDD3.FBC7597F.11F8506F.IP)
[16:32:34] *** Quits: ecr (chatzilla@7C463196.5BB0586B.11F8506F.IP) (Ping timeout)
[16:32:44] *** ecr_ is now known as ecr
[16:35:38] *** Quits: ecr (chatzilla@E940BDD3.FBC7597F.11F8506F.IP) (Ping timeout)
[16:35:42] *** Joins: ecr_ (chatzilla@7C463196.5BB0586B.11F8506F.IP)
[16:35:46] *** ecr_ is now known as ecr
[16:38:32] <pnkfelix> should `native` be on the `DEPS_compiletest` list in crates.mk ?
[16:39:07] <pnkfelix> (it isn't currently, and I'm getting an error during `make stage1` during what I think is rustc's attempt to build compiletest.)
[16:40:18] <pnkfelix> sorry, I of course meant to say `TOOL_DEPS_compiletest`
[16:40:48] <strcat> acrichto: hm. did the visibility reform just land for structs atm?
[16:40:52] <strcat> still letting me put priv on variants
[16:42:08] <pnkfelix> strcat: I think the scope of the change was just struct fields, not variants
[16:42:21] * strcat thought priv was going away completely
[16:42:38] <strcat> oh well, I'm happy about it half going away anyway
[16:42:53] <acrichto> strcat: https://github.com/rust-lang/rfcs/pull/26
[16:43:06] <pnkfelix> strcat: Right, I meant the scope of that particular PR
[16:43:14] <acrichto> pnkfelix: compiletest still uses libgreen
[16:43:16] <pnkfelix> strcat: not the scope of the long term version
[16:43:45] <acrichto> pnkfelix: it doesn't have #[no_start]; though, so it's probably still implicitly linking to libnative
[16:44:15] <pnkfelix> acrichto: So is the right fix here is to add `#[no_start]` somewhere to compiletest?
[16:44:57] <acrichto> pnkfelix: yeah, at the top next to the features it just needs a #![no_start]
[16:45:16] <eddyb>  // <pcwalton> trans/match.rs is like stumbling around in a dark cave
[16:45:19] <strcat> heh
[16:45:20] <eddyb> ohh these comments
[16:45:29] <strcat> I found a graph library I wrote for an earlier rust dialect
[16:45:42] <eddyb> strcat: can you read it?
[16:45:45] <strcat> yes
[16:45:45] <eddyb> (also, I want to see it)
[16:45:52] <strcat> it's not that old
[16:45:58] <strcat> I just forgot about it
[16:46:27] <strcat> the rng stuff used for karger's algorithm is really out of date
[16:46:34] <strcat> might as well write that from scratch ;\
[16:48:18] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[16:51:14] <eddyb> error: aborting due to 123 previous errors
[16:51:18] <eddyb> halving errors
[16:51:20] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[16:51:21] *** ChanServ sets mode: +ao pcwalton pcwalton
[16:51:45] *** Quits: canhtak (canhtak@moz-5E5E7728.wl.t.ulaval.ca) (Quit: canhtak)
[16:57:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (No route to host)
[16:59:27] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[17:01:12] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[17:02:31] <acrichto> cmr: looks like there's some travis failures on https://github.com/mozilla/rust/pull/13244
[17:02:42] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[17:02:42] *** ChanServ sets mode: +qo brson brson
[17:03:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:03:37] *** Quits: edwardw (edwardw@2BFF2300.F4429B.7E4FEB66.IP) (Quit: Leaving...)
[17:04:21] <cmr> acrichto: ah, crap, will fix, thanks
[17:04:46] <eddyb> strcat: where's head/first on Vec?
[17:05:03] <strcat> eddyb: don't belong there
[17:05:08] <strcat> they belong on slices
[17:05:15] <eddyb> mkay
[17:05:17] <strcat> and the slice methods should all be implemented for Vec via abstraction
[17:05:26] <eddyb> sure, default methods using .as_slice()
[17:05:32] <eddyb> (on the appropriate trait)
[17:05:46] * strcat will do that now
[17:05:48] <eddyb> arm.pats.as_slice().head().map(|p| &**p)
[17:05:51] <eddyb> not fun :(
[17:06:08] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[17:07:09] <strcat> ahhh
[17:07:13] <strcat> the android bot is missing
[17:07:14] <strcat> ;[
[17:07:26] <strcat> brson: ^
[17:07:32] *** Joins: edwardw (edwardw@E761717E.1B2F6624.7F41E82D.IP)
[17:08:31] *** Joins: keret (Mibbit@EB4366F5.D84C9B5B.CC1A2609.IP)
[17:09:19] *** Quits: Kxepal (Miranda@moz-3D529086.pppoe.mtu-net.ru) (Ping timeout)
[17:11:01] *** Joins: Kxepal (Miranda@moz-5BF1FD2C.pppoe.mtu-net.ru)
[17:11:45] *** Quits: Kxepal (Miranda@moz-5BF1FD2C.pppoe.mtu-net.ru) (Quit: Kxepal)
[17:12:26] *** Quits: edwardw (edwardw@E761717E.1B2F6624.7F41E82D.IP) (Quit: Leaving...)
[17:12:43] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[17:13:26] *** Joins: Kxepal (Miranda@moz-5BF1FD2C.pppoe.mtu-net.ru)
[17:15:32] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[17:16:11] *** Joins: edwardw (edwardw@BB690835.D7DB55D8.50B134B9.IP)
[17:22:16] <eddyb> /home/eddy/Projects/rust/src/librustc/middle/check_match.rs:687:46: 687:54 error: mismatched 
[17:22:30] <eddyb> acrichto: can't wait to get a snapshot with this bug fixed
[17:22:34] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (No route to host)
[17:24:03] <acrichto> eddyb: we need a snapshot?
[17:24:19] <eddyb> well, it's showing up in the snapshot compiler
[17:24:26] <eddyb> acrichto: is not a bug you are aware of?
[17:24:33] <acrichto> nah, not yet
[17:24:37] <acrichto> what's the bug?
[17:25:25] <eddyb> stderr gets cut off
[17:25:58] <eddyb> now, this could be related to the fact that I'm piping *only* stderr through grep :P
[17:26:07] <acrichto> hm, I've seen a few things related to that recently
[17:26:14] <acrichto> it's returning "resource unavailable"
[17:26:19] <acrichto> but I'm not entirely sure where
[17:27:29] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:29:03] <strcat> that happens to me
[17:29:39] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[17:29:47] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[17:30:35] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[17:31:14] <erickt> strcat: do you know much about how our debuginfo implementation interacts with optimizations? because I ran into this odd bug last night: https://github.com/mozilla/rust/issues/13238
[17:32:06] <erickt> given your optimization experience, do you know offhand how enabling debuginfo and optimization causes a call to be converted into a tailcall, and thus an infinite loop?
[17:34:47] * strcat shrugs :)
[17:36:59] <brson> strcat: i'm looking into it
[17:38:54] <eddyb> erickt: debuginfo enabling optimizations?
[17:39:07] <eddyb> I know I wanted a few special cases when debuginfo is *off*
[17:43:14] <erickt> yeah it's rather surprising
[17:46:56] *** Quits: dmsky (dmsky@moz-FF2573B1.pppoe.spdop.ru) (Quit: Leaving...)
[17:48:58] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[17:49:27] <eddyb> error: aborting due to 53 previous errors
[17:53:34] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[17:53:34] *** ChanServ sets mode: +qo brson brson
[17:53:35] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Quit: brson)
[17:53:38] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[17:53:38] *** ChanServ sets mode: +qo brson brson
[17:54:25] *** Quits: keret (Mibbit@EB4366F5.D84C9B5B.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:00:08] <eddyb> huon: I found a good use for Haskell generic notation
[18:00:24] <eddyb> huon: fn foo(args: a: Iterator<&Arg>) {...}
[18:01:21] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:02:24] <eddyb> I feel bad for almost every one of those 7 functions I've had to change from slices to iterators
[18:10:30] <acrichto> "unsafe destructors are unsafe" <- :(
[18:11:01] <eddyb> acrichto: fair enough :P
[18:11:51] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[18:11:51] <ghrust> [13rust] 15bors 04force-pushed 06auto from 148a4ee7b to 14b8ef9fd: 02http://git.io/N3iJvQ
[18:11:51] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[18:11:53] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[18:11:53] <ghrust> [13rust] 15bors pushed 4 new commits to 06auto: 02http://git.io/aonc-g
[18:11:53] <ghrust> 13rust/06auto 14119289b 15Huon Wilson: std: migrate the errno -> IoError converter from libnative....
[18:11:53] <ghrust> 13rust/06auto 140e8c949 15Huon Wilson: rand: bubble up IO errors when creating an OSRng.
[18:11:53] <ghrust> 13rust/06auto 14bc7a2d7 15Huon Wilson: rand: bubble up IO messages futher....
[18:11:55] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[18:13:13] *** Joins: andrew-d_w (andrew-d_w@2A1732C4.9DFA657C.CC0301A2.IP)
[18:13:21] *** Quits: andrew-d_w (andrew-d_w@2A1732C4.9DFA657C.CC0301A2.IP) (Input/output error)
[18:13:42] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[18:17:55] <sfackler> acrichto: :(
[18:19:50] *** Quits: zw01 (zev@3C32E5CD.21A2D65F.BCF77D2A.IP) (Ping timeout)
[18:21:25] *** Joins: zw01 (zev@3C32E5CD.21A2D65F.BCF77D2A.IP)
[18:26:40] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[18:28:49] *** Joins: dherman (dherman@moz-C07D5168.p2p.sfo1.mozilla.com)
[18:28:49] *** ChanServ sets mode: +ao dherman dherman
[18:30:51] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:32:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:37:16] *** Quits: Nekit1234007 (Nekit12340@C8B984F.40F9C55F.4707F662.IP) (Quit: )
[18:39:38] *** Joins: Nekit1234007 (Nekit12340@C8B984F.40F9C55F.4707F662.IP)
[18:40:54] *** Joins: blaphmat (Mibbit@EB4366F5.D84C9B5B.CC1A2609.IP)
[18:41:52] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[18:44:03] *** Quits: blaphmat (Mibbit@EB4366F5.D84C9B5B.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:51:19] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[18:51:34] *** vfetwnuncszu is now known as dcrewi
[18:51:49] *** Joins: tikue (tkuehn@CB7FC854.FAD414BA.D74CC41D.IP)
[18:57:00] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[18:57:00] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:58:44] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:08:07] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[19:11:43] *** Joins: japaric_ (japaric@68FAA465.54A02F38.BFC118EE.IP)
[19:11:47] *** Quits: japaric (japaric@54B050C2.F596884F.F29ED47E.IP) (Ping timeout)
[19:15:18] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:15:36] *** Joins: andrew-d_w (andrew-d_w@2A1732C4.9DFA657C.CC0301A2.IP)
[19:18:34] *** zz_kimundi is now known as kimundi
[19:18:52] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[19:26:50] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[19:26:51] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/aonc-g
[19:26:51] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[19:31:15] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[19:31:50] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[19:31:51] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/8fjWRw
[19:31:51] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[19:36:50] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[19:36:50] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/lkFKyA
[19:36:50] <ghrust> 13rust/06auto 142374b0f 15Dmitry Promsky: rustc: fixed regionck for owned trait casts....
[19:36:50] <ghrust> 13rust/06auto 1419c63f4 15bors: auto merge of #13129 : dmski/rust/uniq-trait-bounds, r=cmr...
[19:36:51] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[19:37:24] *** Joins: japaric (japaric@7D8332EC.ABE6A7FD.E5B504CC.IP)
[19:37:28] *** Quits: japaric_ (japaric@68FAA465.54A02F38.BFC118EE.IP) (Ping timeout)
[19:44:35] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:49:12] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[19:53:29] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[20:05:05] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Connection reset by peer)
[20:11:49] *** Quits: Nekit1234007 (Nekit12340@C8B984F.40F9C55F.4707F662.IP) (Quit: )
[20:12:05] *** Joins: lkuper (lkuper@moz-AD4C50F5.dhcp-bl.indiana.edu)
[20:15:38] <seanmonstar> is there a viewable queue of bors?
[20:15:50] <mcpherrin> http://buildbot.rust-lang.org/bors/bors.html
[20:15:59] <seanmonstar> thanks
[20:16:19] <mcpherrin> it's in the topic :-)
[20:24:44] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:25:03] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[20:26:51] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[20:26:51] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1419c63f4 to 14b71c02e: 02http://git.io/N3iJvQ
[20:26:51] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[20:26:54] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[20:26:54] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/Qy-iig
[20:26:54] <ghrust> 13rust/06auto 148ca5caf 15Daniel Micay: num: rm wrapping of `Float` methods as functions...
[20:26:54] <ghrust> 13rust/06auto 145e12e1b 15Daniel Micay: remove the cmath module...
[20:26:54] <ghrust> 13rust/06auto 141217cfb 15bors: auto merge of #13225 : thestinger/rust/num, r=cmr...
[20:26:56] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[20:29:59] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: brb)
[20:30:24] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[20:30:25] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[20:31:02] *** Joins: victorporof (victorporo@moz-1C281963.dsl.bell.ca)
[20:31:09] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:31:21] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:31:32] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:31:50] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[20:33:46] <acrichto> urgh, travis keeps timing out b/c building rustc takes so long
[20:38:05] *** Quits: edwardw (edwardw@BB690835.D7DB55D8.50B134B9.IP) (Quit: Leaving...)
[20:39:11] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[20:39:50] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[20:42:14] *** Joins: pauls (pauls@moz-BFEF1F22.ccs.neu.edu)
[20:42:32] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[20:44:11] *** Joins: Nekit1234007 (Nekit12340@C8B984F.40F9C55F.4707F662.IP)
[20:45:38] *** Joins: Nekit1234007_ (Nekit12340@3126F0EA.D0169432.4707F662.IP)
[20:46:03] *** Quits: Nekit1234007 (Nekit12340@C8B984F.40F9C55F.4707F662.IP) (Ping timeout)
[20:47:15] *** Quits: Nekit1234007_ (Nekit12340@3126F0EA.D0169432.4707F662.IP) (Quit: )
[20:47:23] *** Joins: Nekit1234007 (Nekit12340@3126F0EA.D0169432.4707F662.IP)
[20:52:28] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:08:02] <acrichto> Luqman: ping
[21:08:57] *** Quits: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP) (Input/output error)
[21:11:57] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (No route to host)
[21:12:18] *** Quits: whitglint (uid15486@moz-31ABA2C0.irccloud.com) (Quit: Connection closed for inactivity)
[21:16:10] *** Quits: victorporof (victorporo@moz-1C281963.dsl.bell.ca) (Ping timeout)
[21:17:31] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:17:54] *** Joins: victorporof (victorporo@moz-1C281963.dsl.bell.ca)
[21:18:03] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[21:19:53] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Ping timeout)
[21:21:00] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[21:21:00] *** ChanServ sets mode: +o tjc
[21:33:37] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[21:33:50] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[21:33:50] *** ChanServ sets mode: +o tjc
[21:41:02] *** Joins: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net)
[21:41:48] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[21:41:48] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/Qy-iig
[21:41:48] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[21:42:18] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[21:43:52] *** Joins: japaric_ (japaric@8436FA78.BF52D463.3E85381A.IP)
[21:44:10] *** Quits: japaric (japaric@7D8332EC.ABE6A7FD.E5B504CC.IP) (Ping timeout)
[21:44:17] <Luqman> acrichto: pong
[21:45:03] *** Quits: lkuper (lkuper@moz-AD4C50F5.dhcp-bl.indiana.edu) (Quit: lkuper)
[21:45:18] <acrichto> Luqman: what happened to http://llvm-reviews.chandlerc.com/D1905?id=5040 ?
[21:46:49] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[21:46:49] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/r0i-Ug
[21:46:49] <ghrust> 13rust/06auto 14be673e7 15GÃ¡bor Lehel: syntax: allow stmt/expr macro invocations to be delimited by []....
[21:46:49] <ghrust> 13rust/06auto 14361d791 15bors: auto merge of #13234 : seanmonstar/rust/pr/12947, r=alexcrichton...
[21:46:50] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[21:49:28] *** Joins: vadimcn_ (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[21:49:51] *** Quits: vadimcn (chatzilla@moz-E841EA3A.hsd1.wa.comcast.net) (Ping timeout)
[21:49:52] *** vadimcn_ is now known as vadimcn
[21:51:12] <Luqman> acrichto: ah right, just got busy with school
[21:52:30] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[21:53:06] <acrichto> Luqman: oh no worries, I was just in the mood to upstream some LLVM patches
[21:53:15] *** Joins: lkuper (lkuper@moz-AD4C50F5.dhcp-bl.indiana.edu)
[21:53:42] <SimonSapin> Hi. https://github.com/mozilla/rust/wiki/Meeting-weekly-2014-04-01#strbuf So will ~str become immutable?
[21:53:48] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[21:53:54] <strcat> not immutable but non-resizable
[21:54:12] <strcat> same as ~[T]
[21:54:35] <strcat> nmatsakis: btw the reason Vec<T> -> ~[T] would need to shrink_to_fit is because we are going to need to pass a length to free
[21:54:47] <SimonSapin> but we disallow index-assign on ~str because UTF-8 is variable-width, so is there a remaining way to change a ~str without resizing it?
[21:54:55] <strcat> nmatsakis: for example, if we want to keep the invariant that ~Foo where Foo is 0-size doesn't allocate
[21:55:05] <strcat> nmatsakis: and also to make fast allocator designs possible
[21:55:47] <strcat> C++ tacked on a second delete overload with a length later, but it doesn't help much - the allocator can keep some work, but it still needs to do extra work when allocating and store extra metadata, since it has no idea if it will receive a length
[21:55:48] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[21:56:28] <strcat> imo you either have a fixed-size allocation or should keep track of the length yourself - makes the allocator a lot faster
[21:56:29] <brson> i would expect not to have any methods on ~str that allow mutation
[21:57:00] <strcat> brson: it can pop and remove from the front
[21:57:08] <strcat> well
[21:57:10] <strcat> maybe not
[21:57:24] <strcat> if it's not allowed to keep extra capacity, then it can't
[21:57:43] <strcat> (without being really inefficient)
[21:58:07] <SimonSapin> (other than the unsafe std::str::raw::as_owned_vec)
[21:58:24] <strcat> SimonSapin: ~[T] won't be resizable
[21:58:37] <SimonSapin> yeah, I get that
[21:59:06] <SimonSapin> but I think ~str will also happen to not allow any safe mutation
[21:59:28] <strcat> depends
[21:59:52] <SimonSapin> well, what can you do thatâ€™s UTF-8-safe and does not resize?
[21:59:54] <strcat> if free takes a length -> ~str can't allow mutation, Vec<T> -> ~[T] has to shrink_to_fit()
[22:00:13] <strcat> if free doesn't take a length -> Vec<T> -> ~[T] is a no-op, and ~str can still keep shift and pop
[22:00:24] *** Quits: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net) (Ping timeout)
[22:00:31] <strcat> but imo it would be really bad to forgo having free taking a length
[22:00:56] <strcat> I don't think ~[T] and ~str should be used outside of exceptional cases so I don't think shrink_to_fit is an issue
[22:01:45] <strcat> free taking a length vs. not taking a length can mean O(n)/O(logn) vs. O(logn)/O(1)
[22:10:44] *** Joins: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP)
[22:12:46] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:20:42] <kimundi> How long can we roughly expect the DOM optimization proposals to remain in discussion phase? Just wondering when it would be to late to write an additional one up...
[22:23:02] <huon> we might hit triple digits soon
[22:23:22] <kimundi> hehe
[22:24:43] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Client exited)
[22:24:45] <nrc> kimundi: write away, I guess we'll start getting feedback from the Servo guys in the next week or so and make a decision after that
[22:25:50] <kimundi> nrc: Well I can only start writing it at the end of this week, which is why I'm asking :)
[22:26:09] *** Quits: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP) (Ping timeout)
[22:26:24] <kimundi> But I guess that would b enough time till next week still.
[22:27:54] <nrc> kimundi: yeah, there is no great rush to a decision - it will probably be a post-1.0 feature. We just need to make sure that whatever we choose can be implemented backwards compatibly, so any preqreqs have to block 1.0
[22:28:02] <nrc> *pre-reqs
[22:29:15] <kimundi> ah, okay
[22:29:43] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[22:29:43] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:38:44] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[22:44:14] *** Joins: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP)
[22:44:52] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[22:44:52] *** ChanServ sets mode: +o tjc
[22:50:03] <strcat> brson: I actually reported those signing/tls things already ;p
[22:50:47] <brson> strcat: oh, sorry. will you close my dupes?
[22:50:57] *** kimundi is now known as zz_kimundi
[22:51:08] <strcat> well they are not actually identical
[22:51:31] * strcat did 2 bugs instead of 3
[22:51:53] *** Joins: ChrisMorgan (chris@moz-8DCBEA52.vic.adsl.internode.on.net)
[22:56:49] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[22:56:49] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/r0i-Ug
[22:56:49] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[23:01:50] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[23:01:50] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/gzXjag
[23:01:50] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[23:01:51] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[23:01:51] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/-bLxQQ
[23:01:51] <ghrust> 13rust/06auto 14e481ced 15klutzy: doc: Update windows status on FAQ
[23:01:51] <ghrust> 13rust/06auto 14159323e 15bors: auto merge of #13235 : klutzy/rust/doc-faq-win, r=alexcrichton
[23:01:51] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[23:02:11] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[23:02:56] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:16:46] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[23:16:46] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14159323e to 14361d791: 02http://git.io/N3iJvQ
[23:16:46] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[23:24:29] *** Quits: ChrisMorgan (chris@moz-8DCBEA52.vic.adsl.internode.on.net) (Ping timeout)
[23:28:16] *** Quits: victorporof (victorporo@moz-1C281963.dsl.bell.ca) (Ping timeout)
[23:28:41] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:29:39] *** Quits: lkuper (lkuper@moz-AD4C50F5.dhcp-bl.indiana.edu) (Quit: lkuper)
[23:30:15] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[23:31:47] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[23:31:47] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1408b6a6c to 14361d791: 02http://git.io/N3iJvQ
[23:31:47] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[23:31:49] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[23:31:49] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/7TeiIg
[23:31:49] <ghrust> 13rust/06auto 14e481ced 15klutzy: doc: Update windows status on FAQ
[23:31:49] <ghrust> 13rust/06auto 143d477f5 15bors: auto merge of #13235 : klutzy/rust/doc-faq-win, r=alexcrichton
[23:31:49] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[23:39:45] <brson> restarting buildbot
[23:41:15] *** Joins: victorporof (victorporo@moz-1C281963.dsl.bell.ca)
[23:41:54] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[23:41:54] <ghrust> [13rust] 15bors 04force-pushed 06auto from 143d477f5 to 14361d791: 02http://git.io/N3iJvQ
[23:41:54] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[23:41:55] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[23:41:55] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/N74t7g
[23:41:55] <ghrust> 13rust/06auto 14129cf09 15Steven Fackler: Make libtime fields public
[23:41:55] <ghrust> 13rust/06auto 14e63346b 15bors: auto merge of #13240 : sfackler/rust/time-pub, r=alexcrichton
[23:41:55] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[23:43:44] *** Quits: victorporof (victorporo@moz-1C281963.dsl.bell.ca) (Input/output error)
[23:44:04] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[23:53:53] *** Joins: victorporof (victorporo@moz-1C281963.dsl.bell.ca)
[23:56:14] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[23:56:42] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[23:57:35] *** flaper87 is now known as flaper87|afk
[23:58:37] *** Quits: dherman (dherman@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: dherman)
[23:59:08] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:59:17] *** Quits: andrew-d_w (andrew-d_w@2A1732C4.9DFA657C.CC0301A2.IP) (Input/output error)
[23:59:41] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
