[00:00:00] *** Joins: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net)
[00:00:34] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[00:01:46] *** Quits: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[00:01:51] <Thiez> I'm a bit lost here, this is all about obj-c?
[00:01:55] *** Quits: lbergstrom (lbergstrom@moz-DB4A9C19.scl3.mozilla.com) (Quit: leaving)
[00:01:59] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:02:04] <Eridius> yeah. Sorry for the digression.
[00:02:14] <Eridius> obj-c has been my primary focus for the past 10 years ;)
[00:02:35] * Eridius is hoping one day to be able to drop Rust code in to a Cocoa app though
[00:02:36] <Thiez> it looks rather unfamiliar to the untrained eye so I had no idea what you were talking about :p
[00:03:51] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:04:18] <Eridius> Of all dynamic-dispatch languages, Obj-C strikes a remarkably good balance between dynamicism and practicality. And its compatibility with C is quite useful. You can even mix C++ in there (in a dialect called Obj-C++), which I've been a fan of lately due to the enhancements this adds to Obj-C's Automated Reference Counting (notably, you can't put an obj-c object in a C struct under ARC, but you can in Obj-C++ because it can generate a constructor/destructor)
[00:04:29] <Eridius> I miss generics and algebraic datatypes though
[00:04:59] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[00:05:35] <ssbr> Eridius: That is a clever way to do things, re mixing Obj-C and C++.
[00:06:44] *** Quits: toto (yaaic@moz-B234C23B.rev.numericable.fr) (Ping timeout)
[00:07:01] <Eridius> it's nice. Of course, most obj-c programmers aren't C++ programmers, so it's pretty rare to actually see them mixed, especially because if you want to use C++ types in APIs then that starts requiring callers to be Obj-C++ too
[00:07:03] <pcwalton> I wish Obj-C weren't incompatible with polymorphic inline caching :\
[00:07:05] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[00:07:10] <pcwalton> because you can't patch TEXT pages
[00:07:26] <Eridius> initially, Obj-C++ was really only intended to be used in a glue layer between Obj-C and C++ code, but because of ARC, it's useful in other places too
[00:07:34] <pcwalton> I think Obj-C would be faster as a JIT
[00:07:46] <Eridius> Heck, the other day I switched a file to Obj-C++ so I could use a std::vector<std::tuple<(CGRect, int, NSUInteger>> in an ivar
[00:07:54] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:08:08] <Eridius> pcwalton: JIT is off the table, if for no other reason than security concerns on iOS
[00:08:12] <pcwalton> I know
[00:08:14] <pcwalton> it makes me sad :(
[00:08:26] <pcwalton> because polymorphic inline caches are serious wizardry
[00:08:26] <Eridius> but Obj-C is remarkably efficient. I think the common case for method dispatch is something on the order of 12 cycles
[00:08:29] <pcwalton> that you need some sort of JIT for
[00:08:38] <pcwalton> with PICs it turns into a function call though
[00:08:39] <Eridius> possibly even slightly faster at this point
[00:09:58] *** Joins: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net)
[00:11:00] <Eridius> pcwalton: I'm not actually sure what a polymorphic inline cache is. Based on what you already said, I assume it modifies the code at runtime to convert a stub into a direct function call?
[00:11:28] *** jorendorff is now known as jorendorff_away
[00:11:34] <Eridius> I assume it still has to jump to a thunk that verifies the class of the object first, and kills the cache if it gets an unexpected class? Which would make it slower than a direct function call
[00:13:31] <pcwalton> Eridius: it patches the call site to a class check + function call
[00:13:37] <pcwalton> it won't kill the cache if it gets an unexpected class
[00:13:46] <pcwalton> instead it patches to add *another* class check + function call
[00:13:51] <pcwalton> you get a chain of class checks + function calls
[00:14:11] <pcwalton> it ends up working really well with branch predictors
[00:14:16] <pcwalton> which is why all JS JITs do it now
[00:14:26] *** kimundi is now known as zz_kimundi
[00:14:55] <pcwalton> you can also then start speculating on the return type if the function becomes hot
[00:15:13] <pcwalton> and omit subsequent class checks
[00:15:43] <pcwalton> if a type check fails then you get deoptimization bailouts and the function has to be recompiled which is why you want to do it only for hot functions, but it ends up winning a *lot* in practice
[00:16:43] *** Quits: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo_)
[00:17:49] *** Joins: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net)
[00:20:31] *** Quits: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo_)
[00:20:49] *** Joins: alonlevy (alon@moz-FED7051B.bb.netvision.net.il)
[00:21:09] <Eridius> hmm, but in the end it's still class check + static function call? So it's basically one load (to get the object's class), one compare (against what is presumably a static value calculated at patch-time), and one function call if the check passes?
[00:21:14] *** Joins: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net)
[00:22:09] <Eridius> certainly faster than obj-c method dispatch, but not by a particularly large amount. obj-c method dispatch has some pretty awesome method caches, which is why it's, as I said before, something like 12 cycles for normal dispatch (and again, that might even be faster these days)
[00:22:09] <pcwalton> yeah
[00:22:43] <Eridius> and IMO the security of disallowing execution of writable pages is definitely worth the minor performance hit on method dispatch
[00:22:59] *** Quits: alonlevy (alon@moz-FED7051B.bb.netvision.net.il) (Ping timeout)
[00:23:02] <pcwalton> well, for JS PICs led to something like 3x-5x performance increases
[00:23:10] <pcwalton> that was pretty much all V8 did when it came out
[00:23:16] <pcwalton> again, it's hard to compare cross language
[00:23:36] <pcwalton> and I don't know what method lookup was like before PICs in JS engines
[00:23:38] <pcwalton> hard to tlel
[00:23:39] <pcwalton> tell
[00:24:46] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[00:24:56] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[00:25:20] *** Joins: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[00:25:57] <Eridius> I suspect method lookup in JS without PIC was significantly worse than in obj-c.
[00:26:25] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[00:26:30] *** Joins: prooftechnique (prooftechn@moz-65B7D4EE.hsd1.vt.comcast.net)
[00:26:33] <enix> So, i'm trying to build a struct that basically works as a state machine, but where the state value contains an owned pointer. I don't know the best way to do that. Is there a better way to do that than this: https://gist.github.com/DaGenix/7555128 ?
[00:26:46] <Eridius> I also wonder what the proportion of operations in JS is method calls vs everything else, compared to in obj-c.
[00:27:27] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[00:28:07] <Eridius> enix: is there some reason you need next_state(), instead of just manipulating the state field in next() directly?
[00:28:49] <enix> if I match on the state directly I get an error complaining that I'm trying to move out of a &
[00:28:55] <dbaupp> enix: if `state: &mut S` was `state: &mut Option<S>` it would be safer
[00:29:26] <enix> dbaupp: why would that be safer?
[00:29:32] <Eridius> hrm, did the crate hashes change again? Is this due to the removal of SHA and friends?
[00:29:34] <Thiez> however, does it really make sense for the state to be 'None'?
[00:30:01] <dbaupp> enix: specifically, if `func` fail!()'s the current next_state is memory unsafe; since it's leaving an uninit value in the &mut, so if it has a dtor, the dtor will be running on an invalid value
[00:30:32] <dbaupp> Thiez: if it's an implementation detail for memory safety, yes.
[00:30:47] <wycats_> pcwalton, nmatsakis: so I'm getting back to taking nullable pointers in Rust as Option<&u64>
[00:30:49] <enix> dbaupp: ah, thats a good point
[00:30:51] <wycats_> getting error: mismatched types: expected `std::option::Option<u32>` but found `std::option::Option<&u32>`
[00:31:02] <wycats_> I think you gave me a solution for this before
[00:31:11] <nmatsakis> wycats_: gonna need more context
[00:31:14] <pcwalton> I'd have to see more of the context
[00:31:16] <wycats_> nmatsakis: ok I'm sorry
[00:31:57] <wycats_> https://gist.github.com/wycats/c9f43b52fce6927709b1#file-lib-rs-L206-L209
[00:32:14] <enix> dbaupp: so, make it an Option, do a take() on it, manipulate it as I please, and then put it back? I was trying to avoid the tempory bogus state, but I completely didn't think of memory safety
[00:32:16] <wycats_> DoubleAnnotation is DoubleAnnotation(Option<u64>)
[00:32:27] <enix> dbaupp: thanks!
[00:32:31] <wycats_> should I take a *u64 and then do as_option()?
[00:32:47] <dbaupp> enix: yes, that would make it safe
[00:32:47] *** Joins: recrack (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[00:33:07] <dbaupp> wycats_: what is the type of .builder?
[00:33:11] <pcwalton> wycats_: yeah, I would do that
[00:33:20] <dbaupp> oh, I mean, .add
[00:33:25] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Ping timeout)
[00:33:38] <Eridius> enix: FWIW, since your states are all implicitly copyable, you can just do something like this: https://gist.github.com/kballard/7555278
[00:33:41] <nmatsakis> wycats_: I don't... quite know how that will help? 
[00:33:52] <wycats_> nmatsakis: ?
[00:33:54] <nmatsakis> but then i'm not sure what as_option() does on a *T, let me look that up :)
[00:34:17] *** Joins: vodik (simon@moz-1A28D39F.net.uwaterloo.ca)
[00:34:30] <Eridius> enix: you can do something similar to what I just pasted with non-implicitly-copyable states as well if they're Cloneable and you don't mind cloning them. You only get mucky code if you need to move out of the old state
[00:34:34] <wycats_> apparently nothing?
[00:34:42] <wycats_> pcwalton told me about something like that?
[00:34:43] <dbaupp> wycats_: it looks like the error is you're passing `parent` to .add when it is expecting a Option<u32>, not a nullable pointer.
[00:34:50] <wycats_> dbaupp: yep
[00:34:59] <pcwalton> acrichto: r? https://github.com/mozilla/rust/pull/10572
[00:35:03] <wycats_> I want to convert my *u32 into an Option<u32>
[00:35:35] <dbaupp> wycats_: `if ptr.is_null() { None } else { Some(unsafe {*ptr}) }`
[00:35:46] <enix> Eridius: cool, unfortunately my states aren't something I wan't to clone. I have ~[u8] that i want to write to in some states and read from in other. When transitioning states, I want to avoid re-allocating the ~[u8]
[00:35:46] <wycats_> no there was some nice small method
[00:35:57] <wycats_> that caused someone to say "+1 for methods on builtins"
[00:36:09] <dbaupp> wycats_: maybe ptr.as_option().map(|x| *x)
[00:36:12] *** Quits: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo_)
[00:36:12] <nmatsakis> wycats_: because you are taking a Option<*u32>, you could write "opt.map(|x| unsafe { *x })
[00:36:20] <nmatsakis> and ignore this as_option business
[00:36:30] <nmatsakis> just take the ptr as Option<&u32> to start with
[00:36:36] <nmatsakis> and then you can drop the unsafe too
[00:36:39] <nmatsakis> opt.map(|x| *x)
[00:36:48] <nmatsakis> that's what I think anyway :)
[00:37:07] <dbaupp> nmatsakis: taking Option<&u32> is valid for FFI?
[00:37:10] <dbaupp> cool
[00:37:34] <nmatsakis> dbaupp: sure, &T is represented same as a C pointer, Option<&T> is a nullable ptr, and it fits semantically here, since he's not trying to take ownership of the ptr
[00:37:51] *** Joins: Jesse_ (jruderman@moz-7B0110AD.mv.mozilla.com)
[00:37:53] <acrichto> pcwalton:  'static ||A||
[00:37:57] *** Quits: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[00:37:59] <pcwalton> yup
[00:38:00] <acrichto> pcwalton: that's awful syntax :(
[00:38:15] <dbaupp> wycats_: btw, you can use more expressions & type inference here https://gist.github.com/wycats/c9f43b52fce6927709b1#file-lib-rs-L195 , `let parent = if raw_parent == -1 { None } else {Some( raw_parent) }`
[00:38:30] <nmatsakis> pcwalton: ps https://github.com/mozilla/rust/issues/10553
[00:38:30] <dbaupp> nmatsakis: ah, of course.
[00:38:32] *** Quits: jstevans (Instantbir@moz-F5068E88.bootp.virginia.edu) (Ping timeout)
[00:38:48] <nmatsakis> pcwalton: I don't think 'static |A| should parse, should be |A|:'static
[00:38:52] <dbaupp> pcwalton, acrichto: is that a closure that takes another closure as an argument?
[00:39:03] <acrichto> dbaupp: I believe so
[00:39:10] <nmatsakis> pcwalton: though my bad that I didn't note it before...
[00:39:41] * pcwalton grimaces
[00:39:44] <pcwalton> ok, we'll need another snapshot
[00:39:44] <nmatsakis> pcwalton: ...and it'll require a bit of refactoring to make it work right, ideally by permitting arbitrary lifetimes in bounds...got a patch that lays some of the groundwork for that coming up
[00:39:55] <nmatsakis> pcwalton: ...probably worth just finishing up with what's in there now, imo
[00:39:57] <pcwalton> nmatsakis: can we just change it to what parses for now
[00:40:00] <pcwalton> ok
[00:40:13] <nmatsakis> pcwalton: but then change it afterwards, stuff like 'static || is pretty wacky anyway...
[00:40:22] <pcwalton> |||A|||
[00:40:25] <nmatsakis> pcwalton: why not use a bare fn in such a case? 
[00:40:31] <pcwalton> it's a testcase.
[00:40:41] <pcwalton> I think the ||||||A|||||| concern is theoretical
[00:40:51] <acrichto> I'm no more a fan of ||a|| than fn((int, int))
[00:40:53] <pcwalton> I saw none of it in real code
[00:40:57] <pcwalton> well, it'd be
[00:41:01] <pcwalton> fn(fn(a))
[00:41:09] *** Quits: Jesse_ (jruderman@moz-7B0110AD.mv.mozilla.com) (Quit: Jesse_)
[00:41:12] *** Joins: Jesse_ (jruderman@moz-7B0110AD.mv.mozilla.com)
[00:41:18] <pcwalton> ML "A -> () -> ()" is the only nice one
[00:41:21] <acrichto> oh I mean that &fn((int, int)) is also pretty bad
[00:41:30] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[00:41:33] <acrichto> even in ML I get confused b/c the associativity matters a lot
[00:41:48] <acrichto> or wait maybe it doesn't and maybe that's why I'm confused
[00:41:49] <nmatsakis> A -> () -> () is not the same as fn(fn(a))
[00:41:54] <nmatsakis> (A -> ()) -> ()
[00:42:06] <pcwalton> oh, oops
[00:42:09] <pcwalton> associativity!
[00:44:20] <dbaupp> is |||A||| parsed as fn() -> fn(A) -> fn() or fn(fn(fn(A)))?
[00:47:48] <Thiez> doesn't || also parse as a closure that takes no arguments?
[00:47:51] *** Joins: Jesse__ (jruderman@moz-BBE3ABD.mv.mozilla.com)
[00:47:54] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[00:48:11] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:48:41] <Thiez> and ||A as a closure that takes no arguments and returns 'A' (whatever that is)? It's been a while since I last looked at closure syntax
[00:48:42] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[00:48:51] *** Quits: Jesse__ (jruderman@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[00:48:54] *** Quits: houzi (houzi@moz-4F6A1E26.getinternet.no) (Ping timeout)
[00:48:54] *** Quits: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[00:49:07] *** Joins: houzi (houzi@moz-4F6A1E26.getinternet.no)
[00:49:33] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[00:51:53] *** Joins: nejucomo1 (Adium@moz-FC8B8F66.hsd1.ca.comcast.net)
[00:51:59] *** Quits: nejucomo (Adium@moz-FC8B8F66.hsd1.ca.comcast.net) (Ping timeout)
[00:53:00] *** Quits: skeet70 (skeet70@moz-697F48F2.bzm-mt.client.bresnan.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:55:42] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[00:58:02] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[00:58:18] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[01:00:24] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[01:00:30] <bjz_> Thiez: || -> A
[01:01:04] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[01:03:31] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[01:03:57] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[01:04:12] *** Joins: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[01:04:31] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[01:05:27] *** Joins: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net)
[01:09:06] *** Quits: mcarberry (mcarberry@moz-BE1C9F3F.lightspeed.frokca.sbcglobal.net) (Ping timeout)
[01:09:19] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[01:09:19] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[01:09:46] <brson> bstrie: is there any way to get the full history of r/rust in a spreadsheet?
[01:10:02] <brson> just dates, urls, titles
[01:10:08] *** Quits: b3kf (b3kf@moz-5C189D89.red.bezeqint.net) (Quit: Leaving)
[01:10:14] *** Joins: Jesse__ (jruderman@moz-BBE3ABD.mv.mozilla.com)
[01:10:16] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[01:11:55] *** Quits: vodik (simon@moz-1A28D39F.net.uwaterloo.ca) (Quit: WeeChat 0.4.3-dev)
[01:13:07] <Eridius> brson: you could probably walk the subreddit using the API
[01:13:23] <dbaupp> e.g. http://www.reddit.com/r/subreddit/new.json?sort=new
[01:14:38] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[01:15:13] *** Jesse_ is now known as Jesse
[01:15:19] *** Quits: engla (engla@moz-F64E1B0F.cust.bredbandsbolaget.se) (Ping timeout)
[01:15:28] *** Quits: Jesse__ (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse__)
[01:15:45] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[01:15:55] <Eridius> http://www.reddit.com/r/rust/new.json is the JSON for the most recent posts in r/rust. Bump limit to 100, then just repeatedly call this with the before parameter set to the oldest entry from the previous call until you exhaust the list (assuming before means what I think it means)
[01:16:00] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[01:16:20] <dbaupp> it could be the 'after' one
[01:16:21] <Eridius> don't forget the rules from https://github.com/reddit/reddit/wiki/API though (e.g. no more than 30 requests per minute)
[01:16:23] * dbaupp shrugs
[01:16:43] <Eridius> dbaupp: true. I actually initially said after, but then changed it to before, but I'm not sure which is which
[01:16:59] *** Joins: engla (engla@moz-F64E1B0F.cust.bredbandsbolaget.se)
[01:18:26] <dbaupp> Eridius: it looks like it's after
[01:18:59] <dbaupp> and the appropriate link is actually in the json as .data.after too
[01:19:04] <Eridius> that makes sense. I went to before because I was thinking "I want what was posted before this", but this is really a generic parameter to a particular sort, and the sort just happens to be post date DESC
[01:19:48] *** Joins: tautologico (iorek@E0D804D3.CFE755C8.C27E1635.IP)
[01:21:10] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[01:22:12] <brson> Eridius dbaupp: thanks
[01:23:51] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[01:24:12] *** Joins: Sgeo (quassel@moz-D0F30617.dyn.optonline.net)
[01:24:42] * pcwalton grumbles about people complaining about "obvious design mistakes" that are only obvious 3 years in
[01:26:30] *** Quits: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca) (Quit: canhtak)
[01:27:17] <bjz_> pcwalton: yeah
[01:27:34] <Eridius> it's also only "obvious" if you persist in thinking of ~ as "in a particular kind of box". If you think of ~ as "a unique pointer", then ~str and ~T are the same
[01:27:36] <pcwalton> it depends on a region system, which was not known to be even possible when rust was started :)
[01:27:42] <bjz_> pcwalton: you need to put in the hard work to actually try something first
[01:27:45] <pcwalton> a practical region system
[01:28:21] <Eridius> if DST unifies ~str/~[] and ~T, then my only issue with ~str, where you hvae to impl separately for the different kinds of references instead of impling once on &T, goes away
[01:31:40] *** Joins: jgilbert_ (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[01:32:02] *** Quits: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:33:14] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[01:33:38] *** Quits: boredomist (ruqs@8186917.CC8FA3EE.E3401B6E.IP) (Ping timeout)
[01:33:56] <tautologico> I think we may be near the point where it would be useful to create a rust-users list
[01:35:45] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[01:35:56] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[01:35:58] *** Joins: mib_3hextz (Mibbit@moz-F40C9BE0.threembb.ie)
[01:36:08] *** Quits: mib_3hextz (Mibbit@moz-F40C9BE0.threembb.ie) (Quit: http://www.mibbit.com ajax IRC Client)
[01:38:27] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:40:50] <ChrisMorgan> This has been a bad month for the mailing list; it's had a significant number of fruitless but extremely extensive discussions. 539 messages in a month looks to have been the previous record (April) and we're already to 611 with a third of the month to go.
[01:40:53] *** Joins: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca)
[01:41:04] *** Joins: Florob (Florob@moz-39532932.de)
[01:41:16] <dbaupp> how many from great justice? :/
[01:41:39] *** Quits: Blub\w (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[01:41:40] <dbaupp> (77 apparently)
[01:41:57] <ChrisMorgan> Yes, there have been several threads with scores of messages.
[01:42:26] <Jesse> tautologico: and a rust-bikeshed list
[01:42:51] <dbaupp> we might need a rust-list-bikeshed list to decide which lists we need :P
[01:43:01] <tautologico> the signal-to-noise ratio seems to have lowered significantly
[01:43:07] *** Quits: gandalf (zbraniecki@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: My lid went down)
[01:43:22] *** Quits: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk) (Ping timeout)
[01:43:41] *** Joins: gandalf (zbraniecki@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[01:43:45] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[01:43:48] *** Quits: gandalf (zbraniecki@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Input/output error)
[01:43:57] <tautologico> rust-bikeshed would be great, a list I would not feel bad about not subscribing :)
[01:45:23] *** Joins: TeXitoi (texitoi@moz-EA958D66.texitoi.eu)
[01:45:53] <Jesse> i'd rather not have a mailing list at all, but rather a forum where admins can move or lock threads
[01:46:09] <ChrisMorgan> Personally, I believe the language has reached the point with some things where the core team (naturally in consultation with interested parties where appropriate) needs to exert more power and simply make decisions. (Of course, this is something which would need to be handled very carefully.) Benevolent dictatorship is a good thing.
[01:47:03] <tautologico> a discourse forum for hipster cred
[01:47:17] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[01:47:30] <ssbr> Jesse: I was just mentioning this today (re rust-bikeshed). Python has "Python-Ideas" for just such a purpose.
[01:48:46] <ChrisMorgan> Forums and mailing lists both have the deficiency for such discussions that they lack structure, which is often extremely useful, especially when looking back from the future.
[01:48:56] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[01:49:04] *** Joins: mib_vrvxbf (Mibbit@C83F40FA.C3C4EFEF.4BC5EF08.IP)
[01:49:31] *** Quits: nkoep (nik@moz-50882FD.pool.mediaways.net) (Client exited)
[01:49:32] *** Joins: Blub\w (wry@620605B3.71150E1A.237AE2BA.IP)
[01:49:37] <ssbr> if only we still had google wave.
[01:49:52] <dbaupp> ChrisMorgan: the reddit format has reasonable structure, although being a tree is slightly annoying (better than a lisnked list though)
[01:51:11] <ChrisMorgan> ssbr: http://incubator.apache.org/wave/
[01:51:48] <mib_vrvxbf> Is it possible to increment multiple variables in a for loop (something like `for i, j in range(0, 10) { ... }`)?
[01:52:08] <ChrisMorgan> mib_vrvxbf: if you construct multiple iterators, there is zip.
[01:52:18] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Client exited)
[01:52:36] <ChrisMorgan> e.g. `for (i, j) in zip(range(0, 10), range(73, 83)) { ... }`
[01:53:17] <ChrisMorgan> Sorry, that should be `for (i, j) in range(0, 10).zip(range(73, 83)) { ... }`
[01:54:08] <brson> ChrisMorgan: I'm not sure how to exert any control over the mailing list besides turning on moderation. The few times I've tried to stop a conversation have been fruitless
[01:54:32] *** Joins: meTaAU_ (admin@moz-4346BE77.lns20.per1.internode.on.net)
[01:54:35] *** Quits: meTaAU (admin@moz-B04D3546.lns20.per1.internode.on.net) (Ping timeout)
[01:54:51] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:55:02] <mib_vrvxbf> What I was thinking was more of the C++ way of writing `for (int i = 0; i < 10; i++, j++) { ... }`.
[01:55:05] <mletterle> Are we bikeshedding the bikeshedding messages on the mailing list? sweet.
[01:55:11] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:55:30] <mletterle> used the new proc stuff today. \o/
[01:55:41] <mletterle> now waiting to see if the nightly ppa has it when travis runs...
[01:56:06] <tautologico> that's why I think it should be useful to have a more strictly controlled dev list and a looser users list
[01:56:20] <ChrisMorgan> brson: yes, it's hard. Graydon managed it in the "Java versus .NET style for acronyms in type names" discussion with https://mail.mozilla.org/pipermail/rust-dev/2013-August/005143.html (only one message after it, I think), but that was a more clearly-cut case of conclusion than is feasible with some of the recent discussions where you're just saying "we're getting nowhere, stop it".
[01:56:22] <bjz_> mib_vrvxbf: that's not ideomatic C++ anymore, at least for iterators
[01:56:52] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:56:53] <pcwalton> from time to time I feel that unique pointers can't possibly work, they're too restrictive
[01:56:53] <mletterle> rust-users is probably a good idea
[01:56:58] <bjz_> mib_vrvxbf: but yeah, there's no for syntax like that, you have to use `loop` or `while`
[01:57:01] <pcwalton> then I remember that C++11 bet big time on them :)
[01:57:08] <mib_vrvxbf> I see, thanks
[01:57:11] <tautologico> a discussion like "please change the entire syntax of your language to be completely different than it is" is not very useful
[01:57:20] <bjz_> mib_vrvxbf: but that's good, because it dscourages that kind of iteration
[01:57:55] <bjz_> tautologico: :P ++
[01:58:20] <mletterle> tautologico: Just direct them to the "fork" button at that point...
[01:58:23] *** Joins: iburinoc (Mibbit@moz-655D8354.cpe.net.cable.rogers.com)
[01:58:53] *** Parts: iburinoc (Mibbit@moz-655D8354.cpe.net.cable.rogers.com) ()
[01:59:33] *** Quits: mib_vrvxbf (Mibbit@C83F40FA.C3C4EFEF.4BC5EF08.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:00:05] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[02:02:41] * ChrisMorgan never did try Google Wave, and it seems to have stagnated as Apache Wave also, and their "Wave in a box" demo site has thrown two errors within a minute of trying it out...
[02:03:39] <mletterle> Google Wave was pretty slick...
[02:04:58] *** Quits: doomlord_ (servitor@moz-4625DF14.range86-184.btcentralplus.com) (Quit: Leaving)
[02:07:08] <sp3d> the coolest thing I saw from Wave was an ncurses Wave browser, but it was built on top of a big java backend
[02:07:37] <sp3d> http://i.imgur.com/lzhrwKG.png
[02:07:42] *** Quits: geoffhill (geoffhill@moz-738DC0DB.org) (Ping timeout)
[02:08:01] <ssbr> for the record, that was a joke.
[02:11:38] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Ping timeout)
[02:12:03] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[02:13:28] *** Joins: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP)
[02:14:09] *** Quits: brson (brson@6A848D32.C1B840DD.76F66111.IP) (Ping timeout)
[02:14:42] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Ping timeout)
[02:15:36] <pcwalton> acrichto: r? https://github.com/mozilla/rust/pull/10572
[02:15:39] <pcwalton> out for dinner
[02:15:47] *** Quits: ianj (ianjneu@moz-7140CF01.ccs.neu.edu) (Input/output error)
[02:15:55] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[02:17:06] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[02:18:35] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[02:18:35] *** ChanServ sets mode: +ao brson brson
[02:19:31] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[02:19:41] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (Quit: ZNC - http://znc.sourceforge.net)
[02:20:56] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[02:21:11] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[02:21:51] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[02:22:12] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[02:22:37] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[02:23:22] *** Quits: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[02:23:54] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[02:24:13] *** Joins: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP)
[02:24:18] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[02:24:18] *** ChanServ sets mode: +ao brson brson
[02:24:20] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[02:24:42] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[02:26:15] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[02:28:47] *** Quits: Jesse (jruderman@moz-7B0110AD.mv.mozilla.com) (Quit: Jesse)
[02:29:56] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:30:08] *** Quits: nejucomo1 (Adium@moz-FC8B8F66.hsd1.ca.comcast.net) (Quit: Leaving.)
[02:30:11] <ssbr> rusti:  '\v' as int
[02:30:11] -rusti- <anon>:9:12: 9:13 error: unknown character escape: v
[02:30:12] -rusti- <anon>:9           '\v' as int
[02:30:12] -rusti-                      ^
[02:30:12] -rusti- application terminated with error code 101
[02:30:15] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[02:30:23] <ssbr> sadness.
[02:30:50] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[02:31:06] <sam113101> rusti: 'a' as int
[02:31:07] -rusti- 97
[02:31:19] <sam113101> rusti: '\n' as int
[02:31:20] -rusti- 10
[02:37:02] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Quit: Leaving.)
[02:37:08] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[02:42:04] *** Quits: jdm (jdm@moz-ED0C7AC7.hinet-ip.hinet.net) (Quit: Lost terminal)
[02:44:54] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[02:56:07] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:57:47] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[02:59:54] *** Joins: jordyd (jordyd@B8DD47EA.9B8B0AD2.BB6D8913.IP)
[03:01:46] *** Quits: jordyd (jordyd@B8DD47EA.9B8B0AD2.BB6D8913.IP) (Ping timeout)
[03:03:35] *** Joins: jordyd (jordyd@B8DD47EA.9B8B0AD2.BB6D8913.IP)
[03:05:17] *** Joins: hermit (Mibbit@moz-BAFAA234.dqpe1.lon.bigpond.net.au)
[03:05:55] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:07:05] *** Quits: tautologico (iorek@E0D804D3.CFE755C8.C27E1635.IP) (Quit: zzz)
[03:07:35] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[03:07:42] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:12:58] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[03:13:36] *** Joins: tautologico (iorek@E0D804D3.CFE755C8.C27E1635.IP)
[03:15:57] *** Quits: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca) (Quit: canhtak)
[03:15:58] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[03:17:46] *** Joins: krdln (Mibbit@moz-6F8A8560.dynamic.chello.pl)
[03:17:51] *** Quits: prooftechnique (prooftechn@moz-65B7D4EE.hsd1.vt.comcast.net) (Quit: )
[03:18:07] *** Joins: GeneralMaximus (ankur@2B9456D9.591B27D3.D5D59AD9.IP)
[03:18:12] *** Quits: hermit (Mibbit@moz-BAFAA234.dqpe1.lon.bigpond.net.au) (Quit: http://www.mibbit.com ajax IRC Client)
[03:18:51] *** Joins: jdm (jdm@moz-99690620.hinet-ip.hinet.net)
[03:18:51] *** ChanServ sets mode: +o jdm
[03:19:39] *** Joins: hermit (Mibbit@moz-BAFAA234.dqpe1.lon.bigpond.net.au)
[03:19:52] *** Quits: krdln (Mibbit@moz-6F8A8560.dynamic.chello.pl) (Quit: http://www.mibbit.com ajax IRC Client)
[03:20:04] <ssbr> http://bpaste.net/show/Ooa1Dgwv9L2WCkoGA0wq/
[03:20:34] <ssbr> Is there a way to avoid the .clone() there? If I remove it I get "error: cannot move out of captured outer variable"
[03:21:31] *** Quits: victorporof (victorporo@79FE7CA6.284D02A8.D111398B.IP) (Quit: victorporof)
[03:22:05] *** Joins: SirSkidmore (taylor@moz-F145A866.com)
[03:22:23] <ssbr> http://bpaste.net/show/yDdq3uVt5jvUz0tuhYqo/ <-- more context
[03:23:01] <ssbr> (yes, I'm aware that IntermediateResult is really dumb and inconsistent. I keep meaning to fix it...)
[03:23:47] <sam113101> what does map() return?
[03:24:02] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[03:24:22] <Yurume> ssbr, what's ecma_Disjunction?
[03:24:33] <dbaupp> ssbr: if you change expect to be `expect<A>(src: &[char], pos: uint, expect: char, arg: A, ok: &fn(A) -> IntermediateResult)` then call it like `do expect(src, p, ')', r) |r| { ParseOk(r, p + 1) }` it should be fine
[03:24:50] <dbaupp> ssbr: or use a cell, that's ugly ( https://github.com/mozilla/rust/wiki/Doc-under-construction-FAQ#once-functions )
[03:25:02] <ssbr> Yurume: huge! I didn't want to dump it here
[03:25:18] <ssbr> it's just a function that returns IntermediateResult
[03:25:31] <Yurume> is a typedef of Result<>?
[03:25:34] <Yurume> is it*
[03:25:48] <ssbr> no, because it contains more fields
[03:26:04] <dbaupp> ssbr: (my change to expect is just to make it act like map_with in that wiki link)
[03:26:04] <Yurume> then at least we need what IntermediateResult is
[03:26:14] <dbaupp> Yurume: no we don't
[03:26:44] <ssbr> it could be written as Result<(uint, ~str), (uint, ~str)> I guess. I wonder if I should do that.
[03:27:03] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:27:05] <ssbr> dbaupp: thanks
[03:27:12] <Yurume> dbaupp, isn't the problem IntermediateResult::chain gives something that cannot be easily moved to the block, and is different from Result<>::chain?
[03:27:21] <Yurume> hmm.
[03:27:43] <dbaupp> Yurume: the problem is moving *out* of `r` in the closure
[03:28:20] <dbaupp> since (as far as the compiler knows) it may be called multiple times, and so after the first call, `r` is invalid (since it was moved out)
[03:28:23] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[03:28:47] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[03:28:58] <dbaupp> (it's moved out into the ParseOk function/enum)
[03:29:09] <dbaupp> ssbr: do you happen to be working on regexs?
[03:29:12] <ssbr> dbaupp: Are one-shot functions going to become a thing in the future, or is that unlikely?
[03:29:16] <Yurume> aw, I missed `expect` thing, okay.
[03:29:18] <ssbr> dbaupp: Yes! I am back to working on regexes
[03:29:32] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:29:34] <dbaupp> ssbr: \o/
[03:30:04] <dbaupp> ssbr: we currently have one-shot heap closures (called `proc`)
[03:30:07] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[03:30:16] <dbaupp> not sure about plans for once non-heap closures.
[03:30:27] <ssbr> I got through the ~5 hours of work to get a basic functioning parser done. It is very annoying.
[03:30:34] <ssbr> dbaupp: Ah, well.
[03:30:58] <dbaupp> (proc is the "replacement" for ~fn; although the former is more restricted than the latter.)
[03:31:02] *** Quits: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP) (Ping timeout)
[03:32:36] *** Quits: zz_kimundi (kimundi@moz-3F7C7055.dip0.t-ipconnect.de) (Ping timeout)
[03:34:30] <ssbr> Yup, worked perfectly. Thanks again! :)
[03:34:37] *** Joins: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca)
[03:34:52] <sam113101> why can't you do
[03:35:28] <sam113101> rusti: for i in [1, 2, 3].iter().map(|&x| x + 2) { println(i.to_str()); }
[03:35:29] -rusti- pastebinned 11 lines of output: http://sprunge.us/VRTR
[03:36:02] *** Joins: zz_kimundi (kimundi@moz-468E1F95.dip0.t-ipconnect.de)
[03:36:28] *** zz_kimundi is now known as kimundi
[03:39:30] *** Joins: pnathan1 (Adium@moz-5EBBDD83.tukw.qwest.net)
[03:41:11] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Connection reset by peer)
[03:41:13] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[03:44:10] *** Quits: pnathan1 (Adium@moz-5EBBDD83.tukw.qwest.net) (Quit: Leaving.)
[03:44:53] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[03:45:05] *** Quits: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca) (Quit: canhtak)
[03:45:56] *** Quits: tautologico (iorek@E0D804D3.CFE755C8.C27E1635.IP) (Quit: Entscheidungsproblem)
[03:47:12] *** Joins: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca)
[03:47:20] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[03:47:45] <dbaupp> rusti: let v = [1,2,3]; for i in v.iter().map(|&x| x + 2) { println(i.to_str()); }
[03:47:46] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:47:47] -rusti- 3
[03:47:47] -rusti- 4
[03:47:47] -rusti- 5
[03:47:47] -rusti- ()
[03:47:57] <dbaupp> sam113101: just a bug
[03:48:07] <dbaupp> the [] temporary doesn't live long enough
[03:48:21] <strcat> well it's just how rvalues were defined.
[03:48:31] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[03:48:31] <sam113101> will it change?
[03:48:40] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:48:56] <dbaupp> possibly
[03:48:59] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[03:48:59] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:49:49] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[03:51:20] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[03:53:23] *** Joins: tikue__ (tkuehn@1A16C144.CD72397.689607DE.IP)
[03:54:19] <sam113101> I don't know what's "'", I don't think it's mentioned in the tutorial. Or must have missed it. 'self, etc.
[03:54:47] <sfackler> sam113101: it's a lifetime
[03:55:04] <sfackler> http://static.rust-lang.org/doc/master/tutorial-borrowed-ptr.html
[03:55:05] <sam113101> sfackler: where can I learn about theme?
[03:55:10] <strcat> 'self doesn't mean anything special, it's just an arbitrary name like 'foo or 'a
[03:55:34] <sam113101> them*
[03:55:37] <sam113101> will read
[03:55:41] *** Joins: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org)
[03:57:24] <sfackler> strcat: do you know if memory barriers will synchronize non-atomic writes?
[03:57:27] <sfackler> and reads?
[03:58:02] <strcat> don't do non-atomic writes/reads to shared memory directly
[03:58:11] <strcat> there are two parts to C++11 style atomics
[03:58:34] <strcat> 1) making the operations atomic (avoiding a partial change or read being split), 2) ordering
[03:58:52] <Sharp> Out of curiosity, what happens if you do a nonatomic write at the same time as someone else?
[03:58:59] <strcat> undefined behaviour
[03:59:05] <Sharp> Figured.
[03:59:06] <Sharp> Thanks.
[03:59:29] <sfackler> strcat: so I have a global array of mutexes that I will initialize once on one thread and then read on many threads
[03:59:50] <strcat> sfackler: you can statically initialize a mutex
[03:59:56] <strcat> at least with pthread mutexes
[03:59:59] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[04:00:05] <strcat> it's just a PITA to translate the static initializer from C
[04:00:06] <sfackler> I don't know the number i'll need at compile time :(
[04:00:24] <sfackler> acrichto just added statically initializable native mutexes to Rust, so that part's taken care of
[04:00:34] <strcat> well they aren't just mutexes
[04:00:38] <strcat> they're a mutex paired with a cond var
[04:00:42] <sfackler> sure
[04:00:47] <ssbr> Is the normal way to test a library `rustc foo.rs --bin --cfg test && ./foo`, or something else?
[04:00:58] <strcat> ssbr: just --test
[04:01:07] <ssbr> oh, --test. I knew I was missing something :(
[04:01:08] <Yurume> --test sets --cfg test as well
[04:02:44] <sfackler> strcat: I'd like to just use atomics::atomic_load, but I'm worried that bad things will happen if it's stored as an Option<~[Mutex]>
[04:03:01] <sfackler> I guess I could load it and then forget() the loaded reference :/
[04:03:04] <sfackler> when I'm done
[04:03:19] <strcat> sfackler: bad things will happen if you use atomics as a partial solution
[04:03:30] <strcat> an atomic load just means loading the value is an atomic operation
[04:03:46] <sfackler> it also provides memory ordering guarantees
[04:03:58] <geomyidae> Is there a small networking lib I could write that would be useful or helpful in some way? Like a NAT negotiation/connection lib for rust or something along those lines?
[04:04:12] <sfackler> I'm only doing an atomic load to make sure that the loading thread will see the written pointer
[04:04:12] <geomyidae> I want to write something but I need something non-super-trivial to sink my teeth into
[04:04:25] <strcat> sfackler: so the store needs to be atomic too
[04:04:28] <sfackler> since the array is never modified after being initialized
[04:04:29] <sfackler> it is
[04:04:36] <strcat> but isn't the array a dynamic size?
[04:04:44] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[04:04:44] *** ChanServ sets mode: +ao pcwalton pcwalton
[04:04:44] <strcat> how are you growing it atomically? doesn't seem possible
[04:04:47] <sfackler> I'm not
[04:04:58] <sfackler> the size is provided at runtime, but it doesn't change
[04:05:19] <strcat> ah okay
[04:05:27] *** Quits: jordyd (jordyd@B8DD47EA.9B8B0AD2.BB6D8913.IP) (Ping timeout)
[04:05:45] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Ping timeout)
[04:05:49] <strcat> sfackler: well, as long as you don't need any operations that are coarser than stores and loads
[04:06:56] <sfackler> argh
[04:07:27] <sfackler> but atomic_store will end up freeing the vector :(
[04:07:42] <sfackler> I guess I can transmute to a *[Mutex] and then util::forget it
[04:07:44] <ChrisMorgan> geomyidae: does WebSocket fit into your definition?
[04:07:53] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[04:08:10] <geomyidae> Oooh, yeah, that or Server Sent Events or something along those lines might do it.
[04:08:36] <ChrisMorgan> WebSocket is a good sort of thing that would fit on top of a TcpStream nicely.
[04:08:37] <geomyidae> Both would probably be heavily inspired or live alongside rust-http no less too
[04:10:03] <ChrisMorgan> Using rust-http to take care of the HTTP layer would be a good plan and would simplify the HTTP level details.
[04:10:10] <sfackler> does a ~[T] have the same representation as a *[T]?
[04:10:40] <strcat> sfackler: *[T] isn't a type
[04:10:48] <strcat> so no
[04:10:54] <sfackler> oh
[04:11:02] <strcat> ~[T] has an implementation defined representation
[04:11:06] <strcat> can't depend on it
[04:11:57] <sfackler> man, am I going to just have to malloc a buffer :(
[04:12:24] * geomyidae pulls up the rfc, cries a bit
[04:12:35] <sfackler> I guess I could also get a ~~[T] and cast to *~[T]
[04:12:48] *** Joins: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP)
[04:13:03] <ChrisMorgan> geomyidae: I've been doing my fair share of RFC reading too for implementing HTTP/1.1. They're certainly not good-and-thorough specifications, which is sad.
[04:13:07] *** Quits: tikue__ (tkuehn@1A16C144.CD72397.689607DE.IP) (Quit: tikue__)
[04:14:08] *** Joins: tikue__ (tkuehn@1A16C144.CD72397.689607DE.IP)
[04:14:10] *** jdm is now known as jdm|f00ding
[04:17:03] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[04:21:44] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Ping timeout)
[04:23:28] <sfackler> strcat: ~T does have the same representation as *T though, right?
[04:23:40] <strcat> sometimes
[04:23:45] <strcat> if it doesn't contain managed ptrs
[04:23:56] <sfackler> ok
[04:24:05] <sfackler> this is some pretty sad code :(
[04:24:29] <sfackler> allocate a ~~[Mutex], atomic store it transmuted to a uint and then cast::forget it
[04:26:33] <wycats_> pcwalton: if I'm looking for what methods are available, on, say an Option<&u32>, where would I look?
[04:26:36] <wycats_> where are the docs
[04:26:51] <pcwalton> wycats_: scattered throughout the various trait implementations on Option, yes it's bad
[04:27:04] <strcat> the docs list all the traits defined on Option now, though
[04:27:14] <strcat> and most are just on the Option impl rather than being traits
[04:27:25] <pcwalton> oh, I see http://static.rust-lang.org/doc/master/std/option/enum.Option.html
[04:27:28] <strcat> it's only bad for built-in types (because rustdoc doesn't make a page for them)
[04:27:36] <strcat> and because we have a ridiculous number of useless traits on built-ins
[04:28:42] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[04:29:07] *** Quits: tikue__ (tkuehn@1A16C144.CD72397.689607DE.IP) (Quit: tikue__)
[04:29:08] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[04:29:22] <pcwalton> which ones
[04:29:27] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Quit: 랜덤은 쇠퇴했습니다.)
[04:29:55] <strcat> pcwalton: like all those traits in std::vec
[04:30:05] <strcat> there's one trait corresponding to &[T], one to &mut [T], etc.
[04:30:13] <strcat> one for &[T] with a Clone bound on T
[04:30:28] <strcat> and they're all shoved into the prelude as a workaround :(
[04:30:30] <pcwalton> why are those useless?
[04:30:40] <strcat> pcwalton: because they should just be impls on the built-in type
[04:30:49] <strcat> we should have a lang item for every built-in
[04:30:56] <pcwalton> well, they aren't useless right *now*
[04:30:56] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[04:30:57] <strcat> and the crate defining the lang item should be able to define impls on it
[04:31:10] <strcat> pcwalton: well by useless I mean there is a much better way to do it :P
[04:34:36] *** Joins: tikue__ (tkuehn@1A16C144.CD72397.689607DE.IP)
[04:35:41] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[04:40:09] *** Quits: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo_)
[04:43:37] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[04:43:47] <sfackler> does anyone have any idea why this would be segfaulting inside of memset in the lambda? ~std::vec::from_fn(10, |_| std::unstable::mutex::MUTEX_INIT);
[04:50:03] *** Joins: dd (chatzilla@ED7FA044.57266F2B.1C37C358.IP)
[04:50:53] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:52:25] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[04:52:39] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:53:27] <ChrisMorgan> sfackler: that'd be attempting to move a static, wouldn't it?
[04:54:17] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[04:56:38] *** Joins: Jesin (Jesin@moz-63C897DA.res.lehigh.edu)
[04:57:03] <sfackler> ah, that'd do it
[04:58:46] <sammykim> If I want to use the owend box variable passed through spawn_with, How can I deal with that?
[04:58:57] <sammykim> I published an example http://pastebin.mozilla.org/3639556 here.
[05:00:35] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[05:00:41] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[05:01:24] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:02:01] *** Quits: jgilbert_ (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[05:02:20] <hermit> i know this is pretty basic stuff, but I just started playing with Rust (right out of the box!)
[05:02:32] <hermit> can anyone tell me how to read input?
[05:02:38] <hermit> like scanf() ? cheeers
[05:03:07] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[05:03:26] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[05:05:09] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[05:06:32] <sfackler> I don't think there's an equivalent of scanf currently, but you can parse a string into a single variable with FromStr:
[05:06:36] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[05:06:51] <sfackler> let x: Option<int> = FromStr::from_str("10");
[05:07:54] <Luqman> stdin is a Reader no?
[05:08:02] <hermit> sfackler: what's the Option<int> for?
[05:08:21] *** Joins: ab (alex@BC9D99CC.37C1012D.FE617B51.IP)
[05:08:42] *** Joins: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP)
[05:08:43] <hermit> Luqman: I looked on SO for some info, and found the Reader. but I was hoping for something easier to digest
[05:08:55] <sfackler> hermit: If I do "let x: Option<int> = FromStr::from_str("asdfasdf");
[05:08:57] *** Joins: mib_ekzvhd (Mibbit@moz-37166AEE.hsi8.kabel-badenwuerttemberg.de)
[05:09:00] <sfackler> x will be equal to "None"
[05:09:08] *** Quits: mib_ekzvhd (Mibbit@moz-37166AEE.hsi8.kabel-badenwuerttemberg.de) (Quit: http://www.mibbit.com ajax IRC Client)
[05:09:13] <sfackler> buf if I do "let x: Option<int> = FromStr::from_str("10")
[05:09:19] <sfackler> x will be equal to "Some(10)"
[05:10:03] <Yurume> sfackler, seriously, should we need a parser/scanner library in std or extra?
[05:10:23] *** Joins: sankha93 (Instantbir@71F19D4F.49C43973.1C37C358.IP)
[05:11:10] <Yurume> what scanf does well is a linear, non-backtracking and limited parsing which is tremendously useful with simple data
[05:11:40] <hermit> sfackler: Oh I see.. but tbh I don't want "Some10" but stdin
[05:12:12] <strcat> hermit: what do you mean?
[05:12:27] <strcat> rusti: let x: Option<int> = from_str("10"); x
[05:12:31] -rusti- Some(10)
[05:12:47] <strcat> rusti: let x: Option<int> = from_str("10"); x.get_or_zero()
[05:12:48] -rusti- <anon>:9:46: 10:5 error: type `std::option::Option<int>` does not implement any method in scope named `get_or_zero`
[05:12:48] -rusti- <anon>:9          let x: Option<int> = from_str("10"); x.get_or_zero()
[05:12:48] -rusti- <anon>:10     };
[05:12:48] -rusti- error: aborting due to previous error
[05:12:49] -rusti- application terminated with error code 101
[05:12:51] <Yurume> it prints as Some(10), but is not a string nor a plain int
[05:12:51] <dbaupp> rusti: let x: Option<int> = from_str("10"); match x { Some(y) => y + 1, None => 0 }
[05:12:52] -rusti- 11
[05:12:55] <Yurume> yeah
[05:12:57] <strcat> rusti: let x: Option<int> = from_str("10"); x.unwrap_or_zero()
[05:12:58] -rusti- 10
[05:13:02] <dbaupp> rusti: let x: Option<int> = from_str("not an int"); match x { Some(y) => y + 1, None => 0 }
[05:13:03] -rusti- 0
[05:13:04] <hermit> I want input from the user, something like scanf
[05:13:19] <dbaupp> there isn't yet
[05:13:27] <hermit> oh really? 
[05:13:35] <SiegeLord> What about std::io::stdin ?
[05:13:37] <strcat> you can take input from stdin
[05:13:47] <strcat> he means there isn't something like scanf
[05:14:01] <dbaupp> SiegeLord: there's no scanf("%d %d %f", &x, &y, &z) equivalent
[05:14:13] <Yurume> hermit, do you want to input one whole line?
[05:14:13] <dbaupp> other than doing it by hand
[05:14:29] <hermit> yeah, like python's raw_input()
[05:14:32] <hermit> if possible
[05:14:44] <strcat> that exists
[05:14:53] <Yurume> stdin().read_line() would work
[05:15:15] <Yurume> ...is that changed in 0.9? anyway similar methods should exist.
[05:15:30] *** Joins: yuriks (yuriks@72011412.14007B8A.748B6D8D.IP)
[05:16:07] <SiegeLord> I think you might need to wrap it in a BufferedReader first
[05:16:08] *** Quits: yuriks_ (yuriks@74A1181A.6C9AD9C4.8E0C6B01.IP) (Ping timeout)
[05:16:28] * strcat really hates the stdlib now :(
[05:16:44] <SiegeLord> So BufferedReader::new(stdin()).read_line()
[05:17:17] <tikue__> strcat: the api or performance or both?
[05:17:20] <strcat> all I see is semantic/performance compromises to support GC and M:N threading
[05:17:27] <strcat> and legacy warts
[05:17:41] *** jdm|f00ding is now known as jdm
[05:17:42] <strcat> at least segmented stacks are gone so all those inline(never) wrappers will go away
[05:17:54] <strcat> but I don't really have any interest in it anymore.
[05:18:42] <tikue__> it seems to me like everyone is interested in moving the stdlib in the direction of supporting both M:N and 1:1 threading
[05:18:55] <strcat> can't support both with the same API without a huge semantic loss
[05:19:10] <strcat> same applies to I/O
[05:19:36] <tikue__> quite a few devs disagree with that conclusion don't they/
[05:19:39] <strcat> so I wish anyone who wants to work on that good luck, but rust-core will provide a better API and perform much better
[05:19:52] <strcat> tikue__: I guess they do, but it's a fact that I/O in the stdlib is 100x slower than C, mutexes and arcs are slow
[05:19:58] <strcat> message passing is slow
[05:20:01] <strcat> vectors are slow
[05:20:08] <strcat> and anyone using vectors is slow
[05:20:21] <strcat> anything* 
[05:20:41] <tikue__> the runtime isn't nearly optimized yet, is it?
[05:20:46] <strcat> it's not about being optimized
[05:21:14] <strcat> libuv for quasi-blocking I/O is slow, whether you do it from C++ or Rust
[05:21:27] <tikue__> why would that affect vectors
[05:21:31] <strcat> it won't ever not be slow, because it wraps blocking I/O with a thread pool
[05:21:37] <strcat> tikue__: vectors are slow because they support managed ptrs
[05:21:42] <strcat> the same reason doesn't apply to everything
[05:22:00] <strcat> mutexes, arcs and message passing are slow because the API and implementation is designed for M:N threading and the scheduler
[05:22:02] <tikue__> you mean @[T]? I thought that wasn't supported anymore
[05:22:05] <strcat> tikue__: no
[05:22:07] <strcat> I mean ~[T]
[05:22:08] <dd> wht is object ownership :( 
[05:22:11] <tikue__> oh
[05:22:12] <strcat> it is designed to support managed ptrs
[05:22:47] <strcat> rust-core's vector has 7x faster push, and doesn't allocate for empty vectors
[05:22:56] <strcat> I can't just submit it to the stdlib because it doesn't support @
[05:22:59] <strcat> fundamentally doesn't support it
[05:23:03] <SiegeLord> hermit: This sort of works: http://pastebin.ca/2477415
[05:23:14] <SiegeLord> I don't quite know how to handle EOF correctly though... :/
[05:23:16] <tikue__> strcat: you mean you can't do vec.push(@1) for instanec?
[05:23:24] <strcat> tikue__: rust-core doesn't have @
[05:23:25] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[05:23:26] <strcat> but anyway
[05:23:32] <tikue__> i know but if it did?
[05:23:47] <strcat> tikue__: it won't, I'm not going to make the sacrifices needed to do it
[05:23:47] <tikue__> i.e. if rust-core's vec was added to libstd
[05:23:56] <strcat> supporting @ means allocating only with ~ and ~[T] for generic containers
[05:23:58] <strcat> so
[05:24:00] <strcat> no allocator support
[05:24:09] <strcat> and you have to incredibly slow ~[T] type
[05:24:22] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[05:24:25] <strcat> I have *zero* interest in using a library making sacrifices like that
[05:24:36] <SiegeLord> Keep in mind incredibly slow is 2x faster than C++ :P
[05:24:42] <strcat> SiegeLord: hm?
[05:24:47] <strcat> ~[T] isn't faster than C++
[05:24:52] <SiegeLord> Yeah it is, I measured
[05:25:00] <strcat> against which C++ stdlib?
[05:25:15] <SiegeLord> The one that comes with GCC
[05:25:16] *** Joins: jordyd (jordyd@moz-A5444BA5.seg53.ucf.edu)
[05:25:21] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[05:25:26] <strcat> SiegeLord: so, a stdlib with a known to be very slow vector/string
[05:25:40] <strcat> enough that everyone makes their own
[05:25:45] <strcat> libc++ is way faster than rust's stdlib
[05:25:48] <SiegeLord> I'm sure everybody does
[05:26:00] <strcat> libstdc++ is slow, sure, for ABI compatibility mostly
[05:26:22] <tikue__> strcat: can you explain what about your implementation disallows @? I'm not sure I follow
[05:26:34] <strcat> tikue__: so you understand what happens when you put @ into a ~ or ~[T]?
[05:26:40] <strcat> it changes the representation of the ~ or ~[T]
[05:26:47] <tikue__> i didn't know that
[05:26:50] <strcat> if they contain @, they have a box header
[05:27:04] <strcat> and they have to be designed to hold all the type/length information in the allocation
[05:27:09] <strcat> so you can't have a sane vector representation
[05:27:12] <strcat> you need that really slow one
[05:27:20] <tikue__> will that still be the case when @ is moved to a library?
[05:27:23] <strcat> yes
[05:27:45] <strcat> and it will always be the case that to support GC, you have to allocate with built-in types
[05:27:51] <strcat> or there has to be some rooting API
[05:27:55] <strcat> with attributes and functions to call
[05:27:59] <strcat> so there is always a huge sacrifice 
[05:28:09] <tikue__> that's unfortunate
[05:28:10] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[05:28:20] <tikue__> why not have both implementations?
[05:28:34] <strcat> tikue__: sure, and do the other containers use ~[T] or Vec<T>?
[05:28:38] <strcat> if they use Vec<T> you can't put @ in them
[05:28:39] *** Quits: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP) (Quit: Leaving.)
[05:28:42] <strcat> if they don't, they're slow
[05:28:57] <strcat> so we have 2 versions of every container - okay
[05:29:09] *** Quits: jordyd (jordyd@moz-A5444BA5.seg53.ucf.edu) (Ping timeout)
[05:29:26] <strcat> SlowDeque Deque SlowVec Vec SlowTrie Trie
[05:29:27] <strcat> ;p
[05:29:32] <tikue__> strcat: is your preference to not support GC at all?
[05:29:46] <strcat> well rust-core isn't going to support it
[05:29:52] <tikue__> strcat: I meant for libstd
[05:29:52] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[05:30:00] <strcat> and it's just going to support 1:1 threading (with user-mode scheduling available where it's implemented)
[05:30:15] <strcat> tikue__: I don't really care about the stdlib anymore
[05:30:21] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[05:30:30] <strcat> I will still make a half-hearted attempt to push it in the right direction
[05:30:38] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[05:31:35] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[05:32:12] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[05:32:31] <strcat> I don't mind implementing iterators, containers, sockets, I/O and everything else again for rust-core
[05:32:40] <strcat> certainly easier than trying to fix the stdlib
[05:33:30] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[05:33:51] <tikue__> maybe there should be gclib
[05:34:03] <tikue__> libgc and libstd
[05:34:27] <strcat> what about M:N threading then? is MutexArc going to use a native mutex or one implemented on top of the scheduler?
[05:34:49] <tikue__> what is MutexArc?
[05:35:10] <strcat> safe shared memory
[05:35:19] <bblum> it's a RWArc but different
[05:35:24] <bblum> strcat: it already uses a scheduler mutex
[05:35:29] <bblum> just like rwarc
[05:35:33] <strcat> are we going to have ChanOne/PortOne, Chan/Port, SharedChan/SharedPort or just concurrent containers built on native mutexes/condvars
[05:35:36] <strcat> bblum: I know it does
[05:35:42] <bblum> oh so
[05:35:49] <strcat> I just don't think the stdlib will ever have good 1:1 threading support
[05:35:49] <bblum> i see
[05:36:09] <bblum> i mean, if pipes work on top of 1:1 threading, then mutexarc/rwarc will automatically work on 1:1 as well
[05:36:23] <strcat> they'll be much slower than native mutexes/condvars
[05:36:27] <bblum> true fact
[05:36:35] <strcat> a native mutex doesn't do a context switch or even a syscall unless it has to wait
[05:36:40] <strcat> it spins a little
[05:36:51] <bblum> i believe mutexarc/rwarc don't either
[05:36:54] <strcat> and cond vars are "free", they're just a write to memory
[05:37:11] <bblum> if there is no contention they will just go through the pthread mutex and come out again
[05:37:21] <bblum> i don't think condvars are free
[05:37:25] <strcat> native ones are
[05:37:28] <bblum> i think condvars always involve a system call of some sort
[05:37:31] <bblum> really?
[05:37:36] <strcat> bblum: no they write to memory
[05:37:40] <strcat> bblum: look at 'man futex' on linux
[05:37:51] <strcat> what a mutex (or a wait) does is spin a bit watching for memory to change
[05:37:55] <strcat> and then falls back to futex to block
[05:38:01] <strcat> a cond var signal just writes to memory
[05:38:16] <bblum> but cond_wait needs to do an atomic-unlock-and-deschedule operation
[05:38:22] <bblum> which is not possible without kernel support AIUI
[05:38:30] <strcat> bblum: well, it doesn't do a syscall
[05:38:50] *** Quits: dd (chatzilla@ED7FA044.57266F2B.1C37C358.IP) (Client exited)
[05:38:56] <strcat> I implemented a concurrent queue and I can strace it and see that with ~5 producers and ~4 consumers pushing/popping stuff it never does a syscall
[05:39:14] <bblum> i mean does it ever hit cond_wait though
[05:39:31] <strcat> I think so
[05:40:12] <strcat> bblum: it doesn't actually deschedule until after it spins for a bit
[05:40:19] <strcat> spin -> give up, call futex
[05:40:33] <bblum> i feel like we're talking about different blocking primitives
[05:40:41] <bblum> if you're taking a lock, you can do a spin sort of thing
[05:41:13] <bblum> but if the assigned task is "Drop a mutex and also block until you get woken up, but under no circumstances allow me to miss a wakeup signal and sleep forever"
[05:41:26] <bblum> i mean, i admit to not knowing the internals of pthread_cond_wait
[05:41:29] <strcat> bblum: ok so just for a second pretend cond vars always do notify_all and notify_one doesn't exist
[05:41:46] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Quit: leaving)
[05:41:47] <strcat> and lets say a cond var is a word-size block of memory
[05:42:11] <strcat> well I guess it always needs to be a list
[05:42:13] <strcat> not really sure
[05:42:49] <strcat> waiting needs to append to the list, signal needs to write to it
[05:42:56] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:43:18] <strcat> and if spinning watching for a write doesn't work, you switch to waiting on futex
[05:43:21] <strcat> at least AFAIK, that's how it works
[05:44:06] <bblum> hmm
[05:44:06] <strcat> futex is the only syscall on linux for this stuff
[05:44:15] <bblum> hmm
[05:44:22] <bblum> i can imagine a spin situation on the waiting side i guess
[05:45:00] <strcat>        When a futex(7) operation did not finish uncontended in user space, a call needs to be  made  to  the  kernel  to  arbitrate.
[05:45:02] <strcat>        Arbitration can either mean putting the calling process to sleep or, conversely, waking a waiting process.
[05:45:04] <bblum> and i guess you can get lucky and avoid a system call on the signal side? but it seems like you need to win a narrow race for that to happen
[05:45:18] <bblum> yeah, i believe that you can spin for a bit on the waiter side
[05:45:52] <bblum> strcat: so, in our undergrad OS class at CMU, we are taught to implement condvars using a "custom" system call interface that replaces futex
[05:45:56] <bblum> the interface is
[05:46:12] <bblum> void deschedule(int *reject)
[05:46:26] <bblum> and bool make_runnable(int waiter_tid)
[05:46:47] *** Quits: sankha93 (Instantbir@71F19D4F.49C43973.1C37C358.IP) (Quit: Gone to save the world!)
[05:46:53] <bblum> where 'reject' is a pointer to a flag that, if set to 1, causes the deschedule not to happen
[05:46:59] <strcat> so that looks like FUTEX_WAIT and FUTEX_WAKE, but I'm pretty sure it can always do it in userland when there's no contention or need to wait
[05:47:07] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[05:48:17] * strcat just knows that M:N threading was dropped because futex made 1:1 threading faster in most scenarios
[05:48:33] <strcat> I don't understand the glibc code at all so...
[05:48:55] <strcat> it would help if they used C11 atomics ;\
[05:50:46] <strcat> bblum: http://www.akkadia.org/drepper/futex.pdf
[05:50:58] <strcat> it doesn't really elaborate much on non-mutexes though
[05:52:47] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:53:04] *** Joins: jordyd (jordyd@moz-A5444BA5.seg53.ucf.edu)
[05:53:07] <strcat> it does say that notify_all works by using a separate queue
[05:53:49] <strcat> starting to understand why cond variables are 48 bytes ;p
[05:54:17] *** Quits: JanC (janc@moz-16E021F6.dsl.scarlet.be) (Ping timeout)
[05:54:20] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[05:54:32] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[05:54:57] *** Joins: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP)
[05:57:47] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:58:28] <strcat> anyway I really like the 1:1 threading + user-mode scheduler thing windows has
[05:59:08] <strcat> so you can have unmanaged threads, and also have ones managed by a scheduler (maybe more than one scheduler) and the kernel will pass control to the scheduler on a page fault or blocking syscall
[05:59:20] <strcat> and every task has thread-local storage, a thread id, etc.
[05:59:43] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[05:59:49] <strcat> (which google wants to push upstream for linux too)
[06:00:20] <Yurume> strcat, I seem not to understand your concern, particularly on slow vectors: why does support for managed ptrs make vectors slow?
[06:00:39] <strcat> Yurume: because they have to have a weird representation where the length is stored inside the allocation
[06:00:50] <Yurume> ah, double-allocated one?
[06:00:57] <strcat> so indexing has to calculate an offset from the box, and pushing has to calculate the size of the header
[06:01:07] <strcat> and check for overflow several times
[06:01:18] <strcat> Yurume: so, a classical vector is...
[06:01:21] <strcat> { cap, len, data* }
[06:01:23] <Yurume> i.e. typedef struct { T *ptr; size_t size, cap; } *vec;
[06:01:24] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[06:01:30] <strcat> a rust vector is...
[06:01:43] <strcat> *{ cap, len, data[] }
[06:01:45] <strcat> or
[06:02:02] <strcat> *{ { ref_count, tydesc, *prev, *next }, { cap, len, data[] } }
[06:02:05] <Yurume> was it data[]?! (I always thought it's data*...)
[06:02:06] <Yurume> ha
[06:02:17] <strcat> Yurume: it's a flexible-length struct basically
[06:02:22] <strcat> for example ~[1, 2, 3, 4]
[06:02:24] <strcat> is
[06:02:34] <strcat> 4|4|1|2|3|4
[06:02:39] <strcat> a ptr to that
[06:02:44] <strcat> (where those separators are words)
[06:02:55] <strcat> (although it currently stores the length/capacity in bytes, not elements)
[06:03:22] <strcat> a C++ style one is { 4, 4, 0x353215 } where that points to 1|2|3|4
[06:03:25] *** Joins: dd (chatzilla@B61C2AE3.78BE666E.9105FBCF.IP)
[06:03:29] <strcat> so if you index [0], you just deref
[06:03:55] <strcat> if you want to reallocate, you don't need to add an aligned header to the front
[06:04:05] <strcat> and a zero-size vector can allocate nothing, without a branch or anything
[06:04:21] *** Quits: sam113101 (sam@moz-ADDDDFB1.mc.videotron.ca) (Quit: WeeChat 0.4.3-dev)
[06:04:43] <strcat> anyway @ needs the ability to walk through all the stuff on the heap and free it
[06:04:47] <strcat> thus to tydesc in the box header
[06:04:53] <strcat> but it also needs the length in the vector
[06:05:06] <strcat> so yeah, ~[T] could be *totally* different based on whether you have @ inside it
[06:05:19] <strcat> but it's not possible to do in a library
[06:05:25] <strcat> we don't have static if
[06:05:52] <strcat> can branch inside a method but you can't define a different representation of a struct based on something about T
[06:06:07] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Quit: 랜덤은 쇠퇴했습니다.)
[06:06:09] <strcat> oh and allocators.
[06:06:19] <strcat> @ is going to want all the memory on a managed heap (including all the roots)
[06:06:24] <strcat> so that kills allocators right there
[06:07:14] *** Joins: sam113101 (sam@moz-ADDDDFB1.mc.videotron.ca)
[06:07:16] <strcat> there are costs to trying to do everything
[06:07:47] *** Joins: jvshahid (jvshahid@moz-8DE9A04C.ny325.east.verizon.net)
[06:09:20] <strcat> I'm not really sure how I would write something like CacheAlignedAllocator and then have every container take a type parameter supporting it, if there is GC
[06:09:34] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:09:34] *** Joins: JanC (janc@moz-4E9EE63A.dsl.scarlet.be)
[06:09:48] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[06:09:49] *** Joins: DAddYE_ (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:10:06] <strcat> every allocator needs GC awareness? I don't know
[06:10:22] <strcat> it's hard to support a GC that doesn't actually exist ;p
[06:13:14] *** Joins: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net)
[06:13:31] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[06:16:55] *** Joins: dherman_ (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[06:18:02] <Yurume> strcat: yeah, it seems quite hard problem, we might eventually need two kinds of vectors (GC-aware and GC-prohibiting).
[06:19:38] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[06:19:38] *** ChanServ sets mode: +o tjc
[06:22:10] <strcat> Yurume: yeah, but then you have 2 versions of every lib using vectors
[06:22:18] *** Quits: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP) (Quit: Leaving.)
[06:22:39] <strcat> feels an awful lot like having two library ecosystems anyway
[06:22:51] <strcat> (considering that this also applies a lot to threading)
[06:22:55] *** Joins: alonlevy (alon@moz-FED7051B.bb.netvision.net.il)
[06:23:03] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[06:23:05] <strcat> for example - libmagic
[06:23:09] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: nejucomo)
[06:23:11] <strcat> it's an existing C library, and it does I/O
[06:23:16] <strcat> so it supports the 1:1 model
[06:23:19] *** Joins: valenting (Thunderbir@808EE6B5.84D5EFD5.FB866788.IP)
[06:23:25] <strcat> you need a separate libmagic interacting with the scheduler for M:N
[06:24:46] <strcat> we get stuff like non-blocking stat from libuv but not the whole existing library ecosystem
[06:25:07] <strcat> anyway I realize I am not going to win this battle
[06:25:10] <strcat> so I'll make my own stdlib
[06:25:59] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[06:26:15] <Yurume> will it be a good reason to have template templates? :S
[06:26:56] <strcat> if we had type metaprogramming like C++, there would be much less conflict around this stuff
[06:27:03] <strcat> if that's what you mean
[06:27:43] *** Joins: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP)
[06:28:10] <dd> i am little confused about ownership concept .. 
[06:28:54] <tikue__> dd: hi :) what part is confusing you?
[06:28:57] <Yurume> we may have Vec<T> and GcVec<T>, and existing generic structs (say) struct Foo<T> { x: Vec<T>, ... } will become struct Foo<V<T>: VecLike> { x: V<T>, ... }
[06:29:12] <Yurume> just like C++'s template <template <class T> class V>...
[06:29:27] <Yurume> just thinking.
[06:30:22] <dd> ownership decides the life of object r8 ?? but destroying it using destructor ?
[06:30:37] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[06:30:48] <strcat> dd: owner == who is responsible for calling the dtor
[06:31:12] <dd> okey :)
[06:31:35] <strcat> and the owner also determines the mutability of the value
[06:31:41] <dd> Ownership is recursive, so mutability is inherited recursively and a destructor destroys the contained tree of owned objects. 
[06:31:50] <dd> what does this above line means ?
[06:32:17] <strcat> owners have owners and those have owners all the way up to a top-level owner
[06:32:21] <strcat> which is usually a variable
[06:32:26] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[06:32:35] <dd> okey okey ..
[06:32:49] <strcat> which is why mutability is (in most cases) declared on a variable
[06:33:18] <strcat> there are ways to work outside of the ownership system, and I plan on writing a separate tutorial on that
[06:33:57] <dd> but then if i added mut before any varibale then how ? it could be controlled by some other object ?
[06:34:46] <dd> i am sorry , my question is not clear .. 
[06:35:33] <dd> if i added mut before variable  , then how some object is controlling this variable?
[06:35:57] <Yurume> dd: your precious variable is invisible from outside of your function or, if you set struct's fields to priv, outside of your crate, no matter it is mutable or not.
[06:36:27] <Yurume> it's a fancy way to say that visibility and ownership is mutually distinct
[06:37:17] *** Quits: cubic (cubic@moz-80241A3A.mc.videotron.ca) (Quit: Leaving)
[06:38:11] <dd> okey and in case of recursive ownership ?? if some owner is mut then  does it makes any effect on nested owner ?
[06:39:04] *** Quits: jvshahid (jvshahid@moz-8DE9A04C.ny325.east.verizon.net) (Ping timeout)
[06:39:26] <dd> i am not sure but i think we can create struct inside another struct r8 ?
[06:39:45] <strcat> sure
[06:39:54] <strcat> dd: yes, ownership goes all the way down
[06:40:14] <strcat> if you have an enum inside a struct inside a struct inside an owned box inside a struct inside a mutable variable, it's all mutable
[06:40:34] <Yurume> if we have a struct A which contains a struct B which contains a struct C, and also a mutable variable x which type is A, then C inside x is also mutable.
[06:40:38] <strcat> a type can use privacy to implement an only immutable API, if it wants
[06:40:41] <Yurume> ha! strcat was faster
[06:41:24] <strcat> dd: rust does have types that express lack of ownership - references (&, &mut) are a view of memory, without ownership over it
[06:41:46] <strcat> (that's why there is a mutable version - it can't inherit since it's not an ownership relation)
[06:41:51] <dd> okey gr8 :)
[06:42:15] <strcat> anyway that part of the tutorial needs a lot of work
[06:42:32] <strcat> the only solid part is Boxes - the coverage of ownership/dtors/references is really lacking
[06:42:42] <strcat> and managed boxes don't belong in the main tutorial
[06:43:00] *** Quits: DAddYE_ (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[06:43:30] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:44:39] *** Quits: hermit (Mibbit@moz-BAFAA234.dqpe1.lon.bigpond.net.au) (Quit: http://www.mibbit.com ajax IRC Client)
[06:45:17] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:45:44] *** Joins: jvshahid (jvshahid@moz-8DE9A04C.ny325.east.verizon.net)
[06:46:30] *** Quits: Liothen (liothen@moz-888282BD.spkn.qwest.net) (Quit: Textual IRC Client: www.textualapp.com)
[06:47:33] *** Quits: tikue__ (tkuehn@1A16C144.CD72397.689607DE.IP) (Quit: tikue__)
[06:48:40] *** Quits: alonlevy (alon@moz-FED7051B.bb.netvision.net.il) (Ping timeout)
[06:53:07] *** Quits: valenting (Thunderbir@808EE6B5.84D5EFD5.FB866788.IP) (Ping timeout)
[06:56:04] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[06:56:11] *** kimundi is now known as zz_kimundi
[06:56:24] <dd> a little confused About boxing concept ... boxing mens a reference in heap ??
[06:56:25] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[06:57:10] <Yurume> dd: yeah it's on heap, but it is not an ordinary C/C++ pointer but rather compile-time-checked reference
[06:57:33] <dd> sorry lib closed. i will discuss later.
[06:57:34] <Yurume> (it's not like Java's reference either, Java does not prevent NullPointerException)
[06:57:46] <dd> thanks to all of you :)
[06:58:06] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[06:58:18] <dd> yes , i read that we can not reference a null object or null stuff :)
[06:58:43] *** Quits: dd (chatzilla@B61C2AE3.78BE666E.9105FBCF.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0/20131028113246])
[06:59:56] *** Joins: fabiand (fabiand@moz-BF4BB443.adsl.alicedsl.de)
[07:01:18] <ChrisMorgan> rusti: 0b0f32
[07:01:19] -rusti- 0f32
[07:01:20] <ChrisMorgan> rusti: 0b0.0f32
[07:01:21] -rusti- <anon>:9:9: 9:14 error: binary float literal is not supported
[07:01:21] -rusti- <anon>:9          0b0.0f32
[07:01:21] -rusti-                   ^~~~~
[07:01:21] -rusti- application terminated with error code 101
[07:01:24] <ChrisMorgan> ... go figure.
[07:01:37] *** Quits: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca) (Quit: canhtak)
[07:01:38] <ChrisMorgan> Ditto for octal.
[07:01:44] <ChrisMorgan> rusti: 0x0f32
[07:01:45] -rusti- 3890
[07:02:01] <ChrisMorgan> ... but for hexadecimal, the f32 will naturally be part of the number.
[07:02:07] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Ping timeout)
[07:02:28] <dbaupp> ChrisMorgan: https://github.com/mozilla/rust/issues/7878
[07:03:35] <ChrisMorgan> Whoa, the 0b101f problem is still there :-/
[07:03:41] <sp3d> :/
[07:03:43] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[07:03:46] <ChrisMorgan> rusti: 0b101f
[07:03:47] -rusti- 101
[07:04:15] <ChrisMorgan> rusti: 101f
[07:04:16] -rusti- 101
[07:04:33] <ChrisMorgan> I expect that not to parse any more.
[07:04:40] <heftig> rusti: 0b101 as f32
[07:04:41] -rusti- 5f32
[07:04:59] <ChrisMorgan> rusti: 0b101f32
[07:05:00] -rusti- 101f32
[07:05:03] <Yurume> I think I once looked at that problem (to be exact, as a part of hexadecimal floating point literal)
[07:05:18] <ChrisMorgan> Eek, I hadn't looked deep enough to see how completely broken it was!
[07:05:29] <Yurume> afaik:
[07:05:32] <Yurume> rusti: 0x101f
[07:05:33] -rusti- 4127
[07:05:52] <Yurume> ah
[07:05:57] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[07:05:59] <Yurume> rusti: 0x101p0f
[07:05:59] -rusti- <anon>:9:14: 9:17 error: expected one of `; }` but found `p0f`
[07:05:59] -rusti- <anon>:9          0x101p0f
[07:06:00] -rusti-                        ^~~
[07:06:00] -rusti- application terminated with error code 101
[07:06:06] <Yurume> rusti: 0x101.4
[07:06:07] -rusti- <anon>:9:9: 9:16 error: hexadecimal float literal is not supported
[07:06:07] -rusti- <anon>:9          0x101.4
[07:06:07] -rusti-                   ^~~~~~~
[07:06:07] -rusti- application terminated with error code 101
[07:06:09] <ChrisMorgan> Hexadecimal is correct, not supporting float literals at all.
[07:06:17] <Yurume> ah, yes, that *is* what I have added.
[07:06:35] <Yurume> maybe the same code path can be used to fix that bug
[07:07:32] <ChrisMorgan> Binary and octal are broken where if you put a trailing f on it it reads it as a decimal default-integer, or f32 or f64 and it will be read as a decimal of the appropriate type. In all cases, it should not parse.
[07:07:41] <sp3d> float literal parse errors are also weird: "1f" says f32 or f64 suffix expected, but "1g" says "expected one of ; or } but found g"
[07:07:57] * ChrisMorgan was going through the Vim syntax file fixing inconsistencies and stumbled upon this ant nest
[07:08:11] <Yurume> rusti: use std::num::Round; 0x103.floor()
[07:08:11] -rusti- <anon>:9:30: 10:5 error: type `<VI0>` does not implement any method in scope named `floor`
[07:08:11] -rusti- <anon>:9          use std::num::Round; 0x103.floor()
[07:08:12] -rusti- <anon>:10     };
[07:08:12] -rusti- error: aborting due to previous error
[07:08:12] -rusti- application terminated with error code 101
[07:08:18] <sp3d> ChrisMorgan: haha, I came across it when working on GtkSourceView syntax highlighting :P
[07:08:28] <Yurume> rusti: 0x103.add(&1)
[07:08:30] -rusti- pastebinned 35 lines of output: http://sprunge.us/ZDCb
[07:08:40] <Yurume> rusti: 0x103.add(&1u)
[07:08:41] <dbaupp> rusti: 0bf
[07:08:43] -rusti- pastebinned 38 lines of output: http://sprunge.us/AhAa
[07:08:43] -rusti- pastebinned 3 lines of output: http://sprunge.us/POAb
[07:08:55] * dbaupp likes that one
[07:08:57] <Yurume> ICE hurray
[07:09:04] <ChrisMorgan> std::int::generated::Add$int::add? Whence came the $?
[07:09:14] <sp3d> nowadays you need '0bf32'
[07:09:27] <dbaupp> ChrisMorgan: `Add for int` but with ' for ' == $
[07:10:36] <ChrisMorgan> `std::int::generated::Add::<for int>::add` is the last syntax proposal I heard of. Is it using $ instead or is that just for printing as a temporary measure until we get genuine syntax?
[07:11:39] <dbaupp> yeah, I assume it's partly compiler details leaking
[07:12:02] <ssbr> I wanted to end my day with a complete working thing, but instead I end my day with `Too many instructions have been executed; infer that infinite loop is in progress. This is a bug in the backtracking search implementation.`
[07:12:07] <dbaupp> (the actual binary symbols have the $ format... so I guess we're reusing that formatting code-path.)
[07:12:19] <ssbr> On the one hand, neat error message. On the other hand, :(
[07:12:30] <dbaupp> ssbr: close enough :shipit:
[07:12:55] <ssbr> all useful programs have infinite loops, therefore this is a useful program.
[07:12:58] *** Quits: jvshahid (jvshahid@moz-8DE9A04C.ny325.east.verizon.net) (Ping timeout)
[07:13:19] <dbaupp> exactly
[07:15:23] * ssbr has already spotted the bug
[07:15:41] *** Quits: GeneralMaximus (ankur@2B9456D9.591B27D3.D5D59AD9.IP) (Quit: Computer has gone to sleep.)
[07:15:52] <ssbr> things not to do: rely on the length of a list as state, and then recurse via creating an entirely new list.
[07:16:13] <ssbr> (At least not without being aware that you toss away all state)
[07:17:12] *** Joins: derek_c (chatzilla@moz-10A72C28.cit.cornell.edu)
[07:17:26] *** Joins: tikue__ (tkuehn@1A16C144.CD72397.689607DE.IP)
[07:17:54] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[07:20:11] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[07:21:43] *** Joins: Ms2ger (Ms2ger@moz-454C9175.ugent.be)
[07:22:29] <derek_c> is there a way to print the name of the type of a variable?
[07:24:05] <dbaupp> derek_c: i.e., you wish to see the type that the compiler infers for a variable?
[07:24:18] <derek_c> dbaupp: yeah I guess
[07:24:36] *** Joins: DeTeam (DeTeam@92C799C.31715274.F5F3AF2.IP)
[07:24:39] <Yurume> cause an intentional compile error! ;)
[07:24:47] <dbaupp> derek_c: one way is `let () = variable;` and look at the compiler meesage
[07:24:48] <Yurume> e.g. let v = ...; v.unlikely_to_exist();
[07:24:49] <dbaupp> *message
[07:25:42] <derek_c> ok, I guess what I want is to get the name programmatically
[07:25:50] <derek_c> not causing a compiler error :)
[07:26:35] <Yurume> rusti: macro_rules print_var!(($x:ident) => (println(format!("{} = {:?}", stringify!($x), $x)))) let a = (1, '2', "3"); print_var!(a);
[07:26:35] -rusti- <anon>:9:21: 9:30 error: expected one of `; }` but found `print_var`
[07:26:36] -rusti- <anon>:9          macro_rules print_var!(($x:ident) => (println(format!("{} = {:?}", stringify!($x), $x)))) let a = (1, '2', "3"); print_var!(a);
[07:26:36] -rusti-                               ^~~~~~~~~
[07:26:36] -rusti- application terminated with error code 101
[07:26:42] <Yurume> rusti: macro_rules! print_var(($x:ident) => (println(format!("{} = {:?}", stringify!($x), $x)))) let a = (1, '2', "3"); print_var!(a);
[07:26:43] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: Textual IRC Client: www.textualapp.com)
[07:26:43] -rusti- a = (1, '2', "3")
[07:26:43] -rusti- ()
[07:26:47] <Yurume> something like this?
[07:27:05] <dbaupp> Yurume: that's no the type?
[07:27:06] <dbaupp> *not
[07:27:22] <Yurume> "to get the name programmatically"
[07:27:25] <Yurume> hmm, is it a type name?
[07:27:37] <dbaupp> rusti: unsafe { (*std::unstable::intrinsics::get_tydesc::<int>()).name }
[07:27:38] -rusti- "int"
[07:27:43] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[07:27:43] *** ChanServ sets mode: +o tjc
[07:27:55] <derek_c> dbaupp: wow that's pretty intense
[07:28:18] <dbaupp> rusti: unsafe { (*std::unstable::intrinsics::get_tydesc::<Option<~[f64]>>()).name }
[07:28:19] -rusti- "std::option::Option<~[f64]>"
[07:28:34] * dbaupp isn't quite sure why get_tydesc returns *, rather than &'static
[07:28:39] <dbaupp> strcat: ^
[07:28:45] <dbaupp> ?
[07:29:01] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[07:29:04] <Yurume> rusti: macro_rules! print_var(($x:ident) => (println(format!("{}: {} = {:?}", stringify!($x), { fn tyname<T>(_:&T) { unsafe{(*std::unstable::intrinsics::get_tydesc::<T>()).name} } tyname(&$x) }, $x)))) let a = (1, '2', "3"); print_var!(a);
[07:29:05] -rusti- pastebinned 10 lines of output: http://sprunge.us/WQEG
[07:29:31] <Yurume> rusti: macro_rules! print_var(($x:ident) => (println(format!("{}: {} = {:?}", stringify!($x), { fn tyname<T>(_:&T)->&'static str { unsafe{(*std::unstable::intrinsics::get_tydesc::<T>()).name} } tyname(&$x) }, $x)))) let a = (1, '2', "3"); print_var!(a);
[07:29:32] -rusti- a: (int,char,&'static str) = (1, '2', "3")
[07:29:32] -rusti- ()
[07:29:35] <Yurume> ;)
[07:29:58] <dbaupp> you forgot the 'let' :P
[07:30:08] <derek_c> that's very intense
[07:30:25] <Yurume> runtime type reflection is always a bit verbose, I admit
[07:30:38] <derek_c> I miss type() in Python
[07:30:43] <strcat> I think it's a good thing it doesn't have a convenient API
[07:30:58] *** Joins: jvshahid (jvshahid@moz-C1BC0CE4.nyc.res.rr.com)
[07:31:06] <Yurume> but that's a cost have to pay to get a safe static language
[07:31:13] <dbaupp> derek_c: should be using isinstance, not type :P
[07:31:21] <strcat> reflection breaks ABI stability/privacy
[07:31:41] <dbaupp> derek_c: in any case, what do you need the typename for?
[07:31:42] <strcat> dbaupp: because python ended up with a broken model without interfaces and just has ABCs ;p
[07:31:42] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: Textual IRC Client: www.textualapp.com)
[07:31:54] <Yurume> for debugging purpose, I think something like above print_var!() would be fine, for other purposes I doubt
[07:32:01] *** Quits: jordyd (jordyd@moz-A5444BA5.seg53.ucf.edu) (Ping timeout)
[07:32:05] <dbaupp> strcat: yes
[07:32:10] <derek_c> dbaupp: don't really need it. just wondering :P
[07:32:23] <strcat> Yurume: as long as it's only there in debug builds I agree :)
[07:32:32] <dbaupp> derek_c: ah, ok
[07:33:04] <Yurume> strcat: it is often useful to release the debug builds, notable examples include Mars PathFinder...
[07:33:17] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[07:33:22] <Yurume> (not really debug builds, but it had debugging facilities that haven't been turned off)
[07:33:26] *** Quits: lerc (quassel@moz-2A8CFEEE.telstraclear.net) (Connection reset by peer)
[07:34:39] *** nrc is now known as nrc|afk
[07:36:49] *** flaper87|afk is now known as flaper87
[07:39:49] *** Joins: lerc (quassel@moz-2A8CFEEE.telstraclear.net)
[07:41:25] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[07:41:52] <derek_c> pub fn quick_sort<T>(arr: &mut [T], compare_func: Le<T>)
[07:41:56] <derek_c> what is that Le
[07:41:59] <derek_c> ?
[07:42:04] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[07:42:27] <strcat> type Le<'self, T> = &'self fn(v1: &T, v2: &T) -> bool;
[07:42:55] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:43:50] <derek_c> strcat: thanks. how do you find out this?
[07:44:04] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:44:23] <strcat> derek_c: just looked at the source
[07:44:28] <strcat> extra::sort is going to be removed
[07:44:39] <derek_c> why?
[07:44:41] <strcat> so I don't think fixing the documentation for it is going to happen (it'll just be removed)
[07:45:02] <strcat> derek_c: because it's ancient and isn't written as it would be written today
[07:45:09] <strcat> it predates the current move semantics
[07:45:16] <strcat> it's really slow and there's no reason to have so many functions
[07:45:45] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[07:45:47] <strcat> need an O(n log n) worst-case stable sort and *maybe* and O(n log n) worst-case sort that doesn't allocate
[07:45:56] *** Quits: sigma (sigma@moz-23724D77.range86-160.btcentralplus.com) (Client exited)
[07:46:24] *** Quits: derek_c (chatzilla@moz-10A72C28.cit.cornell.edu) (Ping timeout)
[07:47:46] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[07:48:22] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[07:49:22] *** Joins: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net)
[07:49:37] *** Quits: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[07:54:08] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:55:52] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[07:56:31] <TeXitoi> strcat: there is a bug report about that? may I contribute
[07:56:37] <TeXitoi> ?
[07:56:40] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[07:57:08] <Yurume> strcat: will be replaced with a simple merge sort?
[07:57:10] <strcat> TeXitoi: somewhere, I think
[07:57:13] <Yurume> will it be*
[07:57:17] *** Joins: sigma (sigma@moz-23724D77.range86-160.btcentralplus.com)
[07:57:33] <strcat> Yurume: yeah and we can reuse the heap implementation of the priority queue to provide the non-allocating alternative
[07:57:43] <Yurume> (as I never heard that it will be replaced with two functions, namely, stable and unstable)
[07:57:49] <strcat> might as well just have the standard one be a fast merge sort
[07:58:07] * strcat shrugs
[07:58:14] <strcat> depends on how much you care about freestanding rust
[07:58:28] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[07:59:15] <dbaupp> TeXitoi: https://github.com/mozilla/rust/issues/9819
[07:59:29] <Yurume> while I generally agree that timsort, when implemented appropriately, will beat a typical mergesort, I think it normally doesn't belong to the standard library
[07:59:43] <strcat> Yurume: it won't be merge sort
[07:59:47] <strcat> beat*
[08:00:01] <strcat> it's only faster if the comparison function is super expensive (like... needing to call into really slow python code)
[08:00:32] <Yurume> it is still competitive for partially sorted arrays AFAIK
[08:00:53] <strcat> a nice merge sort will use insertion sort when the length is down below 32/64
[08:01:07] <strcat> so it's still gaining a lot from pre-sorted runs
[08:01:33] <TeXitoi> dbaupp: thanks
[08:01:35] <strcat> tim sort will still be faster on fully/mostly sorted
[08:02:05] <strcat> but how often is that? ;p
[08:02:06] <Yurume> does the tipping points still remain on 32/64? isn't it more like hundreds nowadays?
[08:02:17] <strcat> Yurume: not sure
[08:02:29] <strcat> sounds like a job for a hill climbing algorithm but it's CPU-specific
[08:02:47] <Yurume> anyway, a combination of timsort plus (say) three-way quicksort is generally quite good, but too big to include to the standard library ;)
[08:03:30] <strcat> C library implementations usually use some variant of a heap sort
[08:03:35] <strcat> to avoid allocation
[08:03:45] <strcat> I think musl uses smoothsort
[08:04:04] <Yurume> is there any implementation that uses shellsort?
[08:04:20] <strcat> doubt it, it's O(n^2) isn't it? ;p
[08:04:33] <Yurume> depending on your gap sequences
[08:04:44] <strcat> http://www.etalabs.net/compare_libcs.html
[08:04:51] <strcat> uclibc does, apparently
[08:04:54] <strcat> dunno what newlib uses
[08:05:09] <Yurume> it is not faster than quicksort and others, but *fast enough* if you need very small code footprint
[08:06:11] <strcat> Yurume: faster than a simple heap sort?
[08:06:27] <Yurume> I doubt it
[08:06:39] <Yurume> but should be smaller than it 
[08:06:58] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[08:07:46] <strcat> Yurume: yeah but it's already so small ;p
[08:08:09] <Yurume> nowadays that does not make much difference of course :P
[08:08:38] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[08:08:56] <Yurume> but if one wants to implement a fast enough sort in 100 bytes of codes, I guess shellsort would be a good candidate
[08:09:11] <Yurume> (not sure it will fit in 100 bytes, I haven't tried)
[08:09:15] <Yurume> 100 bytes of binaries*
[08:09:24] *** jorendorff_away is now known as jorendorff
[08:11:02] *** zz_kimundi is now known as kimundi
[08:12:51] *** Quits: ktt3ja (Mibbit@moz-D69B60E4.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[08:13:29] *** Joins: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP)
[08:14:28] *** Joins: night (night@7EB26C07.F4E4EAA1.601BAF88.IP)
[08:14:32] *** Joins: nightghost (nightghost@moz-5C189D89.red.bezeqint.net)
[08:14:51] *** Quits: night (night@7EB26C07.F4E4EAA1.601BAF88.IP) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[08:20:11] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[08:21:50] *** jorendorff is now known as jorendorff_away
[08:22:11] *** Joins: alonlevy (alon@moz-6F8964D1.red.bezeqint.net)
[08:22:15] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[08:23:37] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[08:23:48] *** Quits: moostik (Icedove@moz-63ED7231.w82-121.abo.wanadoo.fr) (Ping timeout)
[08:24:50] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[08:26:37] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[08:27:43] *** Joins: z0w0 (zack@moz-5E840EF3.lns3.woo.bigpond.net.au)
[08:28:36] *** Joins: Benvie_ (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP)
[08:28:37] *** Quits: Benvie_ (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP) (Client exited)
[08:30:38] *** Joins: Jackneill (Jackneill@moz-D67F1BC0.pool.digikabel.hu)
[08:31:44] *** Joins: jensnockert (jensnocker@E26F71DB.81840CBC.B0E77544.IP)
[08:32:01] <SingingBoyo> Aww.  One of the semi-recent changes to fn broke evict again
[08:34:56] *** Joins: derek_c (derekc@moz-44F6C244.cit.cornell.edu)
[08:35:23] <dbaupp> SingingBoyo: is evict on rust-ci? ( http://hiho.io/rust-ci/ )
[08:35:41] *** Quits: jvshahid (jvshahid@moz-C1BC0CE4.nyc.res.rr.com) (Ping timeout)
[08:36:23] *** Quits: dherman_ (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman_)
[08:36:32] <SingingBoyo> dbaupp: nope.  should probably do that at some point but it keeps breaking and I don't have as much time as I used to.
[08:37:43] <SingingBoyo> dbaupp: though I guess that's kind of the point of having CI for a project
[08:38:17] <dbaupp> SingingBoyo: at least it tells you when it breaks, so (if you have time) the change is 10 minutes, rather than 2 hours of working out what's going wrong. (at least, that's what I've found.)
[08:39:12] *** Joins: GeneralMaximus (ankur@2B9456D9.591B27D3.D5D59AD9.IP)
[08:39:28] *** Quits: derek_c (derekc@moz-44F6C244.cit.cornell.edu) (Client exited)
[08:40:43] <SingingBoyo> dbaupp: true, true.  btw, would you happen to know what package_id on library crates is for?  doesn't have any effect I can see, but I'm getting warnings about not having one.
[08:42:09] *** Quits: nrc|afk (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[08:42:10] <dbaupp> something about rustpkg, I'm not sure how to fix it
[08:43:03] <SingingBoyo> dbaupp: meh.  I just went with the suggested default and it doesn't complain.  though I haven't been testing whether building with rustpkg works...
[08:43:13] *** Quits: Ms2ger (Ms2ger@moz-454C9175.ugent.be) (Ping timeout)
[08:45:48] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:45:49] *** Joins: derek_c (derek@moz-44F6C244.cit.cornell.edu)
[08:47:32] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:47:52] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[08:49:16] *** Joins: biefeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP)
[08:49:20] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Connection reset by peer)
[08:49:46] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[08:50:20] *** Quits: derek_c (derek@moz-44F6C244.cit.cornell.edu) (Quit: Leaving)
[08:50:37] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[08:51:55] *** Joins: derek_c (derek@moz-44F6C244.cit.cornell.edu)
[08:54:30] *** Quits: jensnockert (jensnocker@E26F71DB.81840CBC.B0E77544.IP) (Input/output error)
[08:55:17] <derek_c> How do you separate a module into several files?
[08:55:33] *** kimundi is now known as zz_kimundi
[08:55:52] *** Joins: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP)
[08:57:50] *** Joins: jensnockert (jensnocker@E26F71DB.81840CBC.B0E77544.IP)
[08:58:03] <SingingBoyo> derek_c: You usually create a 'main' file for the crate and that file will have a bunch of 'pub mod foo;' lines.  Then rustc looks for foo.rs in the same directory as the main crate file.
[08:58:56] <derek_c> SingingBoyo: yeah, but then I will have to create an extra level of modules
[09:00:14] <SingingBoyo> derek_c: Hmm are you looking to have multiple files declaring functions that are part of 'foo'?
[09:00:37] <derek_c> SingingBoyo: yeah basically
[09:02:35] <derek_c> And also another question: is there a way to create an instance of a trait and basically implement the functions in place?
[09:03:08] <derek_c> You know, rather than create a struct, implement it with the trait, then create an instance of the struct?
[09:03:42] <SingingBoyo> derek_c: you can't do that per say, but you can have foo re-export functions from other modules with 'pub use other::<fn-name>'
[09:04:37] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Ping timeout)
[09:04:40] <derek_c> SingingBoyo: I see. Thanks!
[09:06:07] <SingingBoyo> derek_c: regarding traits, there's no 'anonymous trait' functionality which is what I think you're getting at, though I suppose you could create a struct with a field for each method and implement the trait for that.
[09:07:07] *** Quits: alonlevy (alon@moz-6F8964D1.red.bezeqint.net) (Ping timeout)
[09:07:46] *** Joins: Ferreus (ferreus@moz-67D9B438.dip0.t-ipconnect.de)
[09:08:39] *** Joins: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP)
[09:10:26] *** Quits: nightghost (nightghost@moz-5C189D89.red.bezeqint.net) (Client exited)
[09:11:02] <derek_c> SingingBoyo: I see. Thanks!
[09:12:18] *** Quits: derek_c (derek@moz-44F6C244.cit.cornell.edu) (Quit: Leaving)
[09:12:30] *** Joins: derek_c (derek@moz-44F6C244.cit.cornell.edu)
[09:13:04] *** Quits: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP) (Quit: )
[09:13:11] *** Quits: sigma (sigma@moz-23724D77.range86-160.btcentralplus.com) (Ping timeout)
[09:13:19] *** Joins: Ms2ger (Ms2ger@moz-454C9175.ugent.be)
[09:16:53] <derek_c> how do you split a string by white space?
[09:19:53] *** zz_kimundi is now known as kimundi
[09:20:20] <bjz_> derek_c: there is http://static.rust-lang.org/doc/master/std/str/trait.StrSlice.html#tymethod.split_str_iter
[09:21:03] <bjz_> or http://static.rust-lang.org/doc/master/std/str/trait.StrSlice.html#tymethod.word_iter
[09:23:32] <bjz_> rusti: let s = "abc\thi\nfoo  yoho"; s.split_iter(std::char::is_whitespace).collect()
[09:23:34] -rusti- <anon>:9:39: 10:5 error: cannot determine a type for this bounded type parameter: unconstrained type
[09:23:34] -rusti- <anon>:9          let s = "abc\thi\nfoo  yoho"; s.split_iter(std::char::is_whitespace).collect()
[09:23:34] -rusti- <anon>:10     };
[09:23:34] -rusti- application terminated with error code 101
[09:23:59] <bjz_> rusti: let s = "abc\thi\nfoo  yoho"; s.split_iter(std::char::is_whitespace).to_owned_vec()
[09:24:00] -rusti- ~["abc", "hi", "foo", "", "yoho"]
[09:24:19] <bjz_> hmm, weird about that ""
[09:25:39] <bjz_> strcat: ?^
[09:26:00] <derek_c> thanks!
[09:26:24] <SingingBoyo> bjz_:you have a double space between foo and yoho, so I'd expect the empty string.
[09:28:14] <Yurume> rusti: let s = "abc\thi\nfoo  yoho"; s.split_iter(std::char::is_whitespace).filter(|x| !x.is_empty()).to_owned_vec()
[09:28:14] -rusti- ~["abc", "hi", "foo", "yoho"]
[09:28:37] <Yurume> SingingBoyo: this.
[09:29:33] *** Quits: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP) (Ping timeout)
[09:30:46] *** Quits: jensnockert (jensnocker@E26F71DB.81840CBC.B0E77544.IP) (Input/output error)
[09:31:14] *** Joins: jensnockert (jensnocker@E26F71DB.81840CBC.B0E77544.IP)
[09:33:09] *** Quits: jensnockert (jensnocker@E26F71DB.81840CBC.B0E77544.IP) (Ping timeout)
[09:33:12] *** Quits: z0w0 (zack@moz-5E840EF3.lns3.woo.bigpond.net.au) (Quit: z0w0)
[09:34:51] <tikue__> rusti: stringify!(this?)
[09:34:51] -rusti- <anon>:9:24: 9:25 error: unknown start of token: ?
[09:34:51] -rusti- <anon>:9          stringify!(this?)
[09:34:52] -rusti-                                  ^
[09:34:52] -rusti- application terminated with error code 101
[09:35:31] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Quit: Leaving...)
[09:36:02] *** Joins: jensnockert (jensnocker@E26F71DB.81840CBC.B0E77544.IP)
[09:39:34] *** Quits: jensnockert (jensnocker@E26F71DB.81840CBC.B0E77544.IP) (Input/output error)
[09:40:04] *** Joins: jensnockert (jensnocker@E26F71DB.81840CBC.B0E77544.IP)
[09:40:32] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[09:40:58] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[09:41:53] *** Quits: jensnockert (jensnocker@E26F71DB.81840CBC.B0E77544.IP) (Ping timeout)
[09:47:18] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:48:33] <derek_c> can traits have fields?
[09:48:46] <derek_c> doesn't look like so
[09:49:01] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:49:17] <SingingBoyo> derek_c: no, traits can't have fields.
[09:49:36] <derek_c> and traits can't provide default implementation for methods?
[09:50:05] <klutzy> derek_c: trait T { fn func(&self) { println!("default impl"); } }
[09:50:11] <SingingBoyo> derek_c: they can provide default implementations.  There may still be bugs though.
[09:50:19] *** Quits: arodier75 (Thunderbir@moz-D6235B0B.in-addr.btopenworld.com) (Ping timeout)
[09:51:06] <derek_c> interesting..
[09:51:30] <klutzy> derek_c: there's a proposal on trait with fields, though not concrete yet http://smallcultfollowing.com/babysteps/blog/2013/10/24/single-inheritance/
[09:53:52] <derek_c> klutzy: interesting read. thanks!
[09:54:43] *** Joins: dd (chatzilla@B61C2AE3.78BE666E.9105FBCF.IP)
[09:54:51] *** Joins: arodier74 (Thunderbir@moz-D6235B0B.in-addr.btopenworld.com)
[09:56:37] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[09:57:48] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[09:59:28] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[09:59:37] *** Quits: derek_c (derek@moz-44F6C244.cit.cornell.edu) (Quit: Leaving)
[10:00:12] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[10:03:36] *** Quits: Jesin (Jesin@moz-63C897DA.res.lehigh.edu) (Quit: Leaving)
[10:04:31] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[10:04:42] *** Quits: Soft (soft@moz-EC8D39F.yok.fi) (Ping timeout)
[10:05:10] *** Joins: jensnockert (jensnocker@E26F71DB.81840CBC.B0E77544.IP)
[10:06:01] *** Joins: tulloch (tulloch@moz-BC895BC5.damtp.cam.ac.uk)
[10:06:24] *** Joins: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP)
[10:06:42] *** Quits: flowsnake_ (flowsnake@moz-E4E567EE.aztw.cable.virginm.net) (Ping timeout)
[10:08:02] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[10:09:45] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[10:10:25] *** Joins: axitkhurana1 (Adium@63F3AA56.9CFBD76D.30E7AE68.IP)
[10:10:25] *** Quits: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP) (Connection reset by peer)
[10:10:34] *** Joins: flowsnake (flowsnake@moz-E4E567EE.aztw.cable.virginm.net)
[10:21:29] *** Quits: recrack (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:31:05] *** Quits: arodier74 (Thunderbir@moz-D6235B0B.in-addr.btopenworld.com) (Ping timeout)
[10:32:04] *** Joins: nkoep (nik@moz-6E0E6DBF.pool.mediaways.net)
[10:33:26] *** Quits: jdm (jdm@moz-99690620.hinet-ip.hinet.net) (Quit: Lost terminal)
[10:34:51] *** Joins: arodier74 (Thunderbir@moz-D6235B0B.in-addr.btopenworld.com)
[10:36:28] *** Joins: jordyd (jordyd@moz-50B70AA3.seg41.ucf.edu)
[10:39:38] *** Quits: jordyd (jordyd@moz-50B70AA3.seg41.ucf.edu) (Ping timeout)
[10:41:11] *** Quits: arodier74 (Thunderbir@moz-D6235B0B.in-addr.btopenworld.com) (Ping timeout)
[10:41:22] *** Joins: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP)
[10:46:59] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:47:48] *** kimundi is now known as zz_kimundi
[10:48:01] *** Quits: fabiand (fabiand@moz-BF4BB443.adsl.alicedsl.de) (Quit: Verlassend)
[10:48:19] *** Joins: moostik (Icedove@moz-63ED7231.w82-121.abo.wanadoo.fr)
[10:48:40] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:50:14] *** Joins: Palmik (palmik@moz-DEC2AB.pks.muni.cz)
[10:50:28] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:50:32] *** Joins: fabiand (fabiand@moz-BF4BB443.adsl.alicedsl.de)
[10:52:09] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[10:52:33] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[10:52:43] *** Joins: arodier74 (Thunderbir@166EA7D4.B6144566.D3B9122.IP)
[10:53:03] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[10:54:53] *** Joins: sigma (sigma@moz-4CAF4C94.range86-145.btcentralplus.com)
[10:54:55] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[10:56:12] *** zz_kimundi is now known as kimundi
[10:59:17] *** Quits: sigma (sigma@moz-4CAF4C94.range86-145.btcentralplus.com) (Ping timeout)
[10:59:39] *** Quits: tulloch (tulloch@moz-BC895BC5.damtp.cam.ac.uk) (Ping timeout)
[11:00:40] *** Joins: tulloch (tulloch@moz-BC895BC5.damtp.cam.ac.uk)
[11:09:17] *** Quits: jensnockert (jensnocker@E26F71DB.81840CBC.B0E77544.IP) (Input/output error)
[11:11:58] *** Quits: moostik (Icedove@moz-63ED7231.w82-121.abo.wanadoo.fr) (Quit: moostik)
[11:12:18] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[11:14:02] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[11:14:02] *** Quits: StarLight (StarLight@moz-48D2C0B3.dynamic.avangarddsl.ru) (Connection reset by peer)
[11:14:48] *** Quits: arodier74 (Thunderbir@166EA7D4.B6144566.D3B9122.IP) (Ping timeout)
[11:17:28] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[11:17:33] <Heather> Hi
[11:17:54] <Heather> How to get list of directories in directory?
[11:17:55] *** Joins: jensnockert (jensnocker@E26F71DB.81840CBC.B0E77544.IP)
[11:18:23] *** Joins: arodier74 (Thunderbir@166EA7D4.B6144566.D3B9122.IP)
[11:18:37] <SingingBoyo> Heather: take a look at std::io::fs::readdir, that will give you a list of all files and directories in the given directory
[11:18:58] <Heather> SingingBoyo thanks
[11:19:06] <eddyb> rusti: trait Foo {} impl Foo for *uint {}
[11:19:07] -rusti- ()
[11:19:19] *** Joins: StarLight (StarLight@moz-A651111B.dynamic.avangarddsl.ru)
[11:19:32] <Heather> is trait bug fixed?
[11:19:47] <strcat> which?
[11:19:53] <SingingBoyo> Heather: which one?  There's been lots
[11:20:15] <Heather> pub fn toTrait(vcs: VCS) -> Option<&Trait>
[11:20:33] <strcat> that's not correct code
[11:20:42] <Heather> eg. when I return Some custom type as &Trait
[11:20:45] <strcat> can't return a reference with no lifetime
[11:21:09] *** Parts: axitkhurana1 (Adium@63F3AA56.9CFBD76D.30E7AE68.IP) ()
[11:21:26] <Heather> strcat so I should return Option<~Trait> ?
[11:21:45] <strcat> are you sure you need a trait object at all?
[11:22:01] <Heather> strcat well yes I want
[11:22:01] *** Quits: jensnockert (jensnocker@E26F71DB.81840CBC.B0E77544.IP) (Input/output error)
[11:22:34] *** Joins: jensnockert (jensnocker@E26F71DB.81840CBC.B0E77544.IP)
[11:22:44] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[11:22:49] <Heather> strcat well I want specific object but I want to call Trait methods of it
[11:22:56] <eddyb> make it generic
[11:22:58] <strcat> you don't need a trait object for that
[11:23:17] <SingingBoyo> Heather: no need for a trait object, just make sure you've imported the trait.
[11:23:21] <strcat> Heather: you can calls methods on an object that are defined for a trait, just on the object itself
[11:23:32] <Heather> eddyb with Generic I need to specify type each time and I don't want
[11:23:49] <eddyb> Heather: what's the context?
[11:23:52] <Heather> eddyb e.g. I need to path it
[11:24:15] *** Quits: jensnockert (jensnocker@E26F71DB.81840CBC.B0E77544.IP) (Ping timeout)
[11:24:20] <strcat> trait objects aren't for reducing the amount you have to import or anything
[11:24:47] <Heather> for example I've got object a and b, I want to return it as trait c and then use different c methods many time without matching if c is a or b
[11:25:04] <eddyb> Heather: generic with c as a bound
[11:25:35] <bjz_> fn foo<T: Trait>() -> Option<T>
[11:25:36] <Heather> eddyb how generic could help there?
[11:25:37] <eddyb> and by matching I think you mean writing the same code for both of them
[11:25:57] <bjz_> for example
[11:26:07] <eddyb> Heather: you can have a function that works with either a or b, and can use their trait methods
[11:26:42] <Heather> eddyb I use a's and b's functions...
[11:26:55] <Heather> eddyb not that I use 3d party functions
[11:26:55] <bjz_> fn foo<T: Trait1 + Trait2<U>, U>() -> Option<T>;
[11:27:02] <eddyb> lol no
[11:27:07] <bjz_> (another example)
[11:27:12] <strcat> Heather: it's not really clear what you want to do
[11:27:25] <eddyb> rusti: struct A; struct B; trait C {fn foo() {}} impl C for A {} impl C for B {} fn bar<T: C>(x: T) {x.foo()}
[11:27:26] -rusti- <anon>:9:103: 9:111 error: type `T` does not implement any method in scope named `foo`
[11:27:26] -rusti- <anon>:9          struct A; struct B; trait C {fn foo() {}} impl C for A {} impl C for B {} fn bar<T: C>(x: T) {x.foo()}
[11:27:26] -rusti-                                                                                                                 ^~~~~~~~
[11:27:26] -rusti- error: aborting due to previous error
[11:27:27] -rusti- application terminated with error code 101
[11:27:35] <bjz_> Heather: yeah, try explaining again from the top
[11:27:37] <eddyb> o_O
[11:27:57] <eddyb> rusti: struct A; struct B; trait C {fn foo(&self) {}} impl C for A {} impl C for B {} fn bar<T: C>(x: &T) {x.foo()}
[11:27:58] -rusti- ()
[11:29:13] <eddyb> Heather: if you can use specific methods on A and B, you don't need to do anything to use methods from C, if A and B implement C
[11:29:19] *** Quits: Ms2ger (Ms2ger@moz-454C9175.ugent.be) (Ping timeout)
[11:29:31] <Heather> strcat bjz_ okay.... I've got some Car and some Train they implement trait Transport and both can drive() but it's their own method where they use whatever they want. e.g. I use it as Car.drive() or Train.drive() in some places. And now I want to get random transport and drive on it. Alike Transport.drive()
[11:30:25] <eddyb> Heather: the function working with any Transport should be generic over T: Transport
[11:30:57] <eddyb> althought Car is a type, you should use car.drive() when talking about instances
[11:31:00] *** Joins: engla_ (engla@moz-F64E1B0F.cust.bredbandsbolaget.se)
[11:31:32] <Heather> eddyb so I should not use Trait iteself and should create yet another generic for it?
[11:31:57] <eddyb> Heather: not yet another. the generic uses the the Trait
[11:31:58] *** Quits: engla (engla@moz-F64E1B0F.cust.bredbandsbolaget.se) (Ping timeout)
[11:32:13] <eddyb> s/the the/the/
[11:32:20] <Heather> eddyb I mean in theory Trait already can drive
[11:32:34] <Heather> *Transport
[11:32:39] <Heather> it has this method
[11:32:57] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[11:33:12] <eddyb> Heather: you use drive on each implementing type, on &Transport, ~Transport and a generic over T: Transport
[11:33:13] <Heather> eddyb well and still generic will give me only one method...
[11:33:25] <eddyb> Heather: Transport can have as many methods as you want
[11:34:06] <Heather> eddyb l'm not sure if I get it, let start from steps
[11:34:24] <Heather> eddyb so I get Car, and then I pass it to generic drive function ?
[11:34:37] <eddyb> Heather: a function generic over Transport
[11:34:47] <Heather> eddyb okay... for what?
[11:35:07] <Heather> what will I get from it?
[11:35:09] <eddyb> Heather: the function would work for both a Car or a Train
[11:35:27] <Heather> eddyb well but they already can drive()
[11:35:28] <eddyb> without you writing the code twice or using trait pointers (which are slow)
[11:35:36] <eddyb> Heather: then what do you need?
[11:36:16] *** Joins: sigma (sigma@moz-A2CEC3AD.range86-163.btcentralplus.com)
[11:37:11] *** Quits: dd (chatzilla@B61C2AE3.78BE666E.9105FBCF.IP) (Ping timeout)
[11:37:16] <Heather> eddyb well I need abstraction because I don't know if that is Car...
[11:37:30] <eddyb> Heather: are Car/Train variants?
[11:37:39] <eddyb> Heather: or their own types?
[11:37:39] <Heather> eddyb they are structs
[11:37:51] <eddyb> then you can't write code that doesn't know what type it is
[11:37:59] <Heather> eddyb they are structs with methods
[11:38:14] <eddyb> Heather: give me a code example
[11:38:17] <tikue__> Heather: is this what you mean? sorry if i misunderstood: `fn drive_something<T: Transport>(transport: T) { transport.drive() }`
[11:38:27] <eddyb> tikue__: that's what I suggested
[11:38:32] <Heather> tikue_ not
[11:38:32] <tikue__> ok
[11:38:35] <ChrisMorgan> Luqman: your latest ARM build (6c8b702) seems to be using glibc 2.17 :-(
[11:38:53] <tikue__> Heather: do you have a heterogeneous vector of transports?
[11:38:55] <Heather> for example I've got request "Drive on car"
[11:39:23] <eddyb> Heather: code pls
[11:39:31] <ChrisMorgan> The previous one, from three days earlier (90754ae), is using the older glibc version, so I'm staying with it.
[11:39:32] <Heather> okay...
[11:41:13] <eddyb> Heather: you can't use an instance without knowing its type without generics or trait pointers - and it sounds like you have neither of them
[11:42:46] <Heather> eddyb tikue_ ChrisMorgan bjz_ strcat: https://gist.github.com/Heather/7561843
[11:43:29] <eddyb> Heather: that last part is invalid
[11:43:43] <eddyb> you can't match on types
[11:43:44] <Heather> eddyb why
[11:44:03] <Heather> eddyb there is no match, it's abstraction, let me fix
[11:44:23] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[11:44:32] <eddyb> Heather: you want to return one of two instances, implementing the same trait?
[11:44:51] <eddyb> *instances of different types
[11:44:55] <Heather> eddyb refresh page
[11:45:00] <Heather> https://gist.github.com/Heather/7561843
[11:45:43] <eddyb> Heather: you can't do &Car there (assuming you had fields in Car), because it's a stack local
[11:46:02] <eddyb> Heather: is there a finite number of transport types?
[11:46:02] <Heather> eddyb I have no fields
[11:46:26] <Heather> eddyb no
[11:46:35] <eddyb> so you can't use enum variants
[11:46:52] <Heather> eddyb well I can but I doubt it will be better
[11:47:05] <eddyb> Heather: you can have methods on enums
[11:47:15] <strcat> Heather: use ~Trait then if you don't want to deal with lifetimes
[11:47:25] <tikue__> eddyb: you can actually
[11:47:29] *** Joins: victorporof (victorporo@8BCA500A.9A7C5F59.4A6B528C.IP)
[11:47:35] <tikue__> at least, it compiles for me
[11:47:45] <eddyb> tikue__: no fields == special case
[11:47:55] <eddyb> rusti: &Some(5u)
[11:47:57] -rusti- pastebinned 16 lines of output: http://sprunge.us/OHiV
[11:48:06] *** Joins: victorporof_ (victorporo@8BCA500A.9A7C5F59.4A6B528C.IP)
[11:48:08] <eddyb> rusti: struct Foo; &Foo
[11:48:08] -rusti- &main::Foo
[11:48:37] *** Quits: victorporof_ (victorporo@8BCA500A.9A7C5F59.4A6B528C.IP) (Connection reset by peer)
[11:48:38] *** Quits: victorporof (victorporo@8BCA500A.9A7C5F59.4A6B528C.IP) (Connection reset by peer)
[11:48:40] <eddyb> tikue__: since it has zero size, only the type matters
[11:48:42] <tikue__> TIL lifetimes were special cased for 0 field structs
[11:48:52] *** Joins: victorporof (victorporo@8BCA500A.9A7C5F59.4A6B528C.IP)
[11:48:52] <strcat> they aren't afaik
[11:48:52] <tikue__> that makes sense
[11:48:58] <strcat> rusti: &5
[11:49:00] -rusti- pastebinned 16 lines of output: http://sprunge.us/GWZA
[11:49:01] <strcat> rusti: &5i
[11:49:02] -rusti- pastebinned 16 lines of output: http://sprunge.us/JDgd
[11:49:07] * strcat shrugs
[11:49:08] <eddyb> strcat: you can't do that
[11:49:13] <eddyb> heck, it's your own bot, isn't it?
[11:49:38] <strcat> no it's a horse
[11:49:46] <tikue__> what
[11:49:47] <eddyb> I'm pretty sure Foo as a value is a static immut
[11:50:00] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:50:07] <strcat> eddyb: well, I didn't realize that either
[11:50:27] <strcat> rusti: struct Foo; let x = Foo; let y: &'static Foo = &x; y
[11:50:28] -rusti- pastebinned 10 lines of output: http://sprunge.us/OfLT
[11:50:47] <strcat> eddyb: oh I know why
[11:50:48] <strcat> ha
[11:50:48] <eddyb> that's a reference to a local
[11:50:57] <eddyb> rusti: static x: Option<uint> = Some(5u); &x
[11:50:57] <strcat> eddyb: yeah a zero size local
[11:50:58] -rusti- &Some(5u)
[11:51:05] <eddyb> rusti: static x: Option<uint> = Some(5u); &'static x
[11:51:06] -rusti- &Some(5u)
[11:51:12] <eddyb> rusti: &'static 5u
[11:51:13] -rusti- pastebinned 16 lines of output: http://sprunge.us/GPIR
[11:51:22] <strcat> what?
[11:51:26] <Heather> strcat thanks, it compiles with ~
[11:51:34] <Heather> and works
[11:51:38] <Heather> \o/
[11:51:42] <tikue__> rusti: struct Foo; fn bar() -> &Foo { &Foo } bar()
[11:51:43] -rusti- &main::Foo
[11:51:43] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:51:44] <eddyb> well, &'static x doesn't make x static, so I'm silly
[11:51:59] <eddyb> tikue__: &Foo is a &'static
[11:53:27] <tikue__> eddyb: it's cool that you don't need to specify that
[11:53:30] <eddyb> Heather: depending on the code using the trait pointer, it could be possible to make it generic with the trait as a bound (as I've said before) - there's a serious performance gain involved
[11:53:43] <tikue__> though the usefulness of empty structs in real-world code is dubious
[11:53:46] <tikue__> :P
[11:53:54] <strcat> tikue__: they are useful
[11:54:02] <tikue__> strcat: yeah?
[11:54:03] <Heather> eddyb here is how I use it https://github.com/Heather/Mirana/blob/master/src/Mirana/Core.rs
[11:54:03] <strcat> for generic code
[11:54:08] <strcat> tikue__: yes for example allocators
[11:54:14] <tikue__> strcat: in what sense
[11:54:18] <Heather> eddyb line 29
[11:54:19] <strcat> each container takes an allocator type parameter + stores an instance of the allocator
[11:54:23] <eddyb> struct Heap; impl Allocator for Heap {...}
[11:54:30] <eddyb> ^^ in rust-core
[11:54:37] <strcat> but stateless (well, global state) allocators can be unit structs
[11:54:42] <strcat> or thread-local allocators
[11:54:47] <tikue__> why would heap be stateless eddyb ?
[11:54:52] <strcat> because it's global
[11:54:56] <strcat> it doesn't need state per instance
[11:54:59] <eddyb> tikue__: because it calls malloc/free
[11:55:00] <strcat> as in per container/pointer
[11:55:07] <Heather> eddyb see I get random version control by passing enum value and then use it's implementation for methods
[11:55:14] <strcat> for example an arena allocator would have the arena as state, perhaps behind Rc
[11:55:17] <Heather> it's alike interfaces in C++ :)
[11:55:21] <tikue__> eddyb: why do you need a struct to call malloc/free?
[11:55:37] <strcat> tikue__: because the containers/pointers will have allocator support
[11:55:41] <strcat> think about an arena allocator
[11:55:47] <eddyb> tikue__: Heap proxies Allocator::alloc to malloc and Allocator::free to free
[11:55:47] <strcat> it has state, and it's not global state
[11:55:59] <KokaKiwi> Ohai
[11:56:09] <strcat> you can allocate a tree and maybe some unique pointers in an arena
[11:56:14] <strcat> and then allocate some other stuff in another arena
[11:56:20] <strcat> and maybe the rest in the global malloc/free heap
[11:56:28] <strcat> maybe you want to allocate some with a global cache aligned allocator
[11:56:29] <eddyb> Heather: hmm, your usecase is specific, and your code style is kinda unconventional
[11:56:33] <tikue__> maybe modules should be able to implement traits lol
[11:56:52] <strcat> a unit struct works well
[11:57:03] <strcat> it's something to attach trait methods too without state
[11:57:42] <KokaKiwi> Oh, I've updated Rust, and now I've mem leak in empty program :o
[11:57:51] <eddyb> I want mat[i, ()] and mat[(), j] for row/column accessors
[11:57:52] <KokaKiwi> mem leaks*
[11:57:54] <Heather> eddyb unconventional ?
[11:57:57] <strcat> KokaKiwi: updated to master?
[11:58:19] <KokaKiwi> strcat: I have the thestinger's compiled Rust (rust-git on Arch)
[11:58:29] * strcat is thestinger
[11:58:33] <KokaKiwi> Ah xD
[11:58:43] <strcat> KokaKiwi: ah I see, yes the stdlib/runtime seems to leave reachable stuff at the exit
[11:58:47] <strcat> it's not really a leak if it's reachable
[11:58:52] <KokaKiwi> ah?
[11:58:55] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[11:59:11] <eddyb> Heather: this part can be a generic function https://github.com/Heather/Mirana/blob/master/src/Mirana/Core.rs#L31-L38
[11:59:12] *** Joins: Ms2ger (Ms2ger@moz-454C9175.ugent.be)
[11:59:39] <KokaKiwi> strcat: I have this: https://gist.github.com/KokaKiwi/51efdc9c1f32337a55e1 but the "still reachable" is not really leaks so? :o
[11:59:54] <eddyb> Heather: it can even be a default method on the same trait vcs implements
[12:00:05] <strcat> KokaKiwi: well it's possible that indicates a real leak
[12:00:11] <strcat> but if it's still reachable, it's not really a leak
[12:00:19] <KokaKiwi> Okay
[12:00:21] <strcat> so perhaps if you spawn more tasks, you can make it actually leak them
[12:00:44] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[12:00:52] <Heather> eddyb well not it can't be generic function because it only gives me this generic function
[12:00:52] <eddyb> Heather: r.t is an enum? then why do you need traits?
[12:01:24] <Heather> eddyb it's not flexible, I use objects in other places with those methods and not only there
[12:01:30] *** Quits: GeneralMaximus (ankur@2B9456D9.591B27D3.D5D59AD9.IP) (Quit: Computer has gone to sleep.)
[12:01:35] *** Quits: tulloch (tulloch@moz-BC895BC5.damtp.cam.ac.uk) (Ping timeout)
[12:01:58] <Heather> eddyb r.t is enum
[12:02:22] <eddyb> https://github.com/Heather/Mirana/blob/master/src/Mirana/Misc.rs#L53-L58 why?
[12:02:26] <Heather> eddyb I need traits to get functions ... enum value has no functions or has it?
[12:02:30] <eddyb> LOL
[12:02:47] <eddyb> Heather: I told you already, an enum can have methods and it can implement any trait, just like every other type
[12:03:12] <Heather> eddyb how :S
[12:03:18] <eddyb> Heather: just like structs
[12:03:32] <eddyb> impl VCS {...} impl Trait for VCS {...}
[12:03:32] <Heather> eddyb well enum type is not enum value
[12:03:39] *** Quits: Tari (tari@moz-1713FB27.mtu.edu) (Ping timeout)
[12:03:46] <eddyb> Heather: you mean enum variants?
[12:03:56] <Heather> eddyb no, I've got implementations for each type
[12:04:04] <Heather> yes, variants
[12:04:30] <Heather> eddyb e.g. I need push for each VCS, for git, for hg etc....
[12:04:32] <eddyb> in each method, you use match to do the right thing
[12:04:53] <Heather> eddyb well yes, that's my effort, I don't match in any method
[12:05:00] *** Joins: jensnockert (jensnocker@E26F71DB.81840CBC.B0E77544.IP)
[12:05:04] *** Joins: tulloch (tulloch@moz-BC895BC5.damtp.cam.ac.uk)
[12:05:13] <Heather> and call them from object instead of passing enum
[12:05:14] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131114085019])
[12:05:23] <tikue__> rusti: enum Foo { Bar, Baz } impl Foo { fn pretty(&self) -> &str { match *self { Bar => "Bar", Baz => "Baz" } } } Bar.pretty()
[12:05:23] <eddyb> which is slower
[12:05:24] -rusti- "Bar"
[12:05:42] <eddyb> rusti: enum Foo { Bar, Baz } impl Foo { fn pretty(&self) -> &str { match *self { Bar => "Bar", Baz => "Baz" } } } Baz.pretty()
[12:05:43] -rusti- "Baz"
[12:06:22] <eddyb> Heather: you're mixing enums and trait pointers, doesn't feel sane :/
[12:06:45] <eddyb> either write generic code over a type implementing a trait
[12:06:55] <eddyb> or use enums
[12:06:58] <Heather> eddyb enum variant is type definition, object is implementation
[12:07:11] <eddyb> Heather: an enum variant is not a type
[12:07:17] <eddyb> it's a .... variant
[12:07:30] *** Quits: tikue__ (tkuehn@1A16C144.CD72397.689607DE.IP) (Quit: tikue__)
[12:07:32] <Heather> eddyb with type I mean it says me what trait to use
[12:07:56] <Heather> eddyb it's configuration parameter
[12:08:05] <eddyb> Heather: you should also name them better
[12:08:11] *** Quits: voxpopuli (fanservice@FD256FCE.33AC841E.689607DE.IP) (Ping timeout)
[12:08:19] <Heather> alike ? :S
[12:08:41] <eddyb> and... be more consistent. some of your code looks good, other parts doesn't, it's even hard to focus
[12:08:47] <eddyb> Heather: Git, Hg, etc.
[12:09:10] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[12:09:12] <Heather> eddyb well it's how they called now
[12:09:12] *** Joins: doomlord_ (servitor@moz-4625DF14.range86-184.btcentralplus.com)
[12:09:21] <eddyb> Heather: they're lowercase now
[12:09:28] <eddyb> also Action's variants
[12:09:30] <Heather> eddyb no, enums lowercased )
[12:09:49] *** Joins: GeneralMaximus (ankur@632B4108.BC3F86F3.5785B5AF.IP)
[12:09:55] *** Joins: doomlord__ (servitor@moz-4625DF14.range86-184.btcentralplus.com)
[12:09:59] <eddyb> toAction should be Action::from_str or Action::new
[12:10:18] <eddyb> Heather: btw, you can return Option<&'static Trait> if all your trait-implementing structures are zero-sized
[12:10:38] *** Quits: GeneralMaximus (ankur@632B4108.BC3F86F3.5785B5AF.IP) (Quit: Computer has gone to sleep.)
[12:10:52] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[12:11:00] <Heather> eddyb they are in folder Stars
[12:11:21] <KokaKiwi> strcat: It seems that reachables blocks are Rust bootstrapping vars (cli args, env and something about Scheduler) :o
[12:11:36] <eddyb> Heather: the enum variant git should be named Git
[12:12:18] <Heather> eddyb why? :)
[12:12:31] <eddyb> Heather: because it's consistent
[12:12:33] <Heather> eddyb to feet Trait Imp ?
[12:13:23] <eddyb> Trait should be named something that makes more sense
[12:13:52] <Heather> right )
[12:14:04] <Heather> what about Sky?
[12:14:13] <Heather> ... :S
[12:14:15] <eddyb> what's with all the weird names?
[12:14:40] *** Joins: Soft (soft@moz-EC8D39F.yok.fi)
[12:14:41] *** pmoore|away is now known as pmoore
[12:14:54] <eddyb> I only do stuff like that for projects or big parts of a project - not for every little thing, what you do makes code hard to understand
[12:14:59] <Heather> eddyb I was trying to get idea how weird names will feet solution but for now it's just mess...
[12:15:07] <eddyb> what's "feet"?
[12:15:13] <eddyb> other than a body part
[12:15:17] <bjz_> ha
[12:15:18] <Heather> :S
[12:15:26] <Heather> fit?
[12:15:37] <eddyb> oh dear. let's move on
[12:15:44] <Heather> yes it's fit )
[12:15:58] <Heather> I forgot this word
[12:16:11] <eddyb> Heather: if I were you, I would rename Trait to VCS or Vcs, and VCS to VcsFlavo(u)r
[12:16:47] <Heather> eddyb Flavor is USA variant?
[12:16:54] <ChrisMorgan> (Vcs is consistent with the standard naming scheme while VCS is not.)
[12:17:17] <Heather> but it's abbriviation
[12:17:18] *** Quits: doomlord__ (servitor@moz-4625DF14.range86-184.btcentralplus.com) (Quit: Leaving)
[12:17:30] <eddyb> do we have enum mod yet? because then you could have VcsFlavor::Git (where VcsFlavor is an enum) and VcsImpl::Git (where VcsImpl is a mod)
[12:17:47] <ChrisMorgan> As is Arc, Atomic Reference Counting, for example.
[12:18:00] <Heather> eddyb good idea...
[12:18:16] <eddyb> at least you're not rejecting style advice :)
[12:18:41] <Heather> -_-' you can also pull request it XD
[12:19:16] <ChrisMorgan> Incidentally, if you care about style being consistent with standard Rust style: the names of modules, methods and local variables should be snake_case rather than camelCase or StudlyCaps.
[12:19:35] <Ms2ger> snake_case? Hadn't heard that before
[12:19:38] <eddyb> UpperCamelCase :P
[12:19:43] <bjz_> Heather: re. the enum vs trait discussion: http://c2.com/cgi/wiki?ExpressionProblem
[12:19:57] <bjz_> Heather: it's a fascinating problem
[12:19:58] <eddyb> https://github.com/Heather/Mirana/blob/master/src/Mirana/Shades/Git.rs#L18-L20 I would wrap in "do wrap_lines {...}"
[12:20:20] <eddyb> I would also move all the methods on the trait itself
[12:20:39] <strcat> bjz_: so... add perimeter as a default method to the type class? ;p
[12:21:40] * strcat wants a deriving mode for enums where it can derive any trait implemented by every variant...
[12:21:43] <bjz_> strcat: huh? might be missing something - haven't been following along fully
[12:22:07] <eddyb> strcat: add refutable patterns in methods to that :P
[12:22:32] <bjz_> strcat: oh, on the wiki
[12:23:11] <eddyb> fn fib(0u) -> uint {0} fn fib(1u) -> uint {1} fn fib(n: uint) -> uint {fib(n-1)+fib(n-2)}
[12:23:27] <eddyb> then add -> _ and : _
[12:23:28] *** Parts: Ms2ger (Ms2ger@moz-454C9175.ugent.be) (Leaving)
[12:23:28] <bjz_> strcat: yeah, that is one way, but it would be trickier in more complex cases
[12:23:32] <strcat> bjz_: I don't think it's a very good explanation of the issue :P
[12:23:32] *** Joins: Ms2ger (Ms2ger@moz-454C9175.ugent.be)
[12:23:40] <bjz_> strcat: no
[12:24:07] <bjz_> strcat: there is also http://en.wikipedia.org/wiki/Expression_problem
[12:24:10] <Heather> eddyb yep ) I was thinking about lines
[12:24:31] <Heather> eddyb renamed VCS to VcsFlavor =)
[12:24:38] <eddyb> nice :)
[12:24:44] <bjz_> strcat: I'm just glad that Rust has both forms
[12:24:45] <Heather> now 01VcsImpl01 )
[12:24:55] <strcat> bjz_: enums and type classes?
[12:24:56] <Ms2ger> Ah, that's what it's called
[12:25:01] <bjz_> strcat: aye
[12:25:10] * Ms2ger was trying to remember the name a while ago, but couldn't
[12:25:13] <eddyb> Heather: the module with Git and Hg?
[12:25:44] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[12:25:44] <eddyb> Heather: try returning Option<&'static Trait> here https://github.com/Heather/Mirana/blob/master/src/Mirana/Misc.rs#L53-L58
[12:25:54] *** Joins: ofeldt- (ofeldt@moz-37B4A0D4.dip0.t-ipconnect.de)
[12:26:37] *** Quits: ofeldt (ofeldt@moz-E137D20E.dip0.t-ipconnect.de) (Ping timeout)
[12:26:45] <eddyb> btw, how crazy does this look? (defined on an enum Expr, where some variants have &Expr<'self>, others don't)
[12:27:09] <Heather> hm
[12:27:10] <eddyb> fn move<'a>(&self) -> Option<Expr<'a>>
[12:27:16] <Heather> eddyb &Git as &'static VcsImpl ?
[12:27:33] <eddyb> Heather: VcsImpl was supposed to be the module housing Git
[12:27:50] <eddyb> Heather: while the trait can be just Vcs or VcsMethods or something like that
[12:27:51] <Heather> what means housing?
[12:27:57] <eddyb> Heather: containing
[12:28:19] <Heather> well I call VcsImpl's methods in future
[12:28:38] <eddyb> so instead of Stars::Git::Git, you have VcsImpl::Git
[12:28:40] <Heather> eddyb so it's interface fro git
[12:29:00] <eddyb> and impl Vcs for Git
[12:29:03] <Heather> ah......
[12:29:07] <Heather> okay
[12:29:11] <Heather> rename Stars =)
[12:29:23] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Quit: Leaving.)
[12:29:39] <eddyb> Heather: first try &Git as &Vcs, then add 'static if it doesn't work
[12:30:08] <eddyb> rusti: struct Git; trait Vcs {} impl Vcs for Git {} &Git as &Vcs
[12:30:09] -rusti- &main::Vcs<no-bounds>
[12:30:30] <eddyb> (that's like a function return, since the code is in an inner block)
[12:30:41] <eddyb> rusti: struct Git; trait Vcs {} impl Vcs for Git {} &Git as &Vcs:Freeze
[12:30:41] -rusti- &main::Vcs:Freeze
[12:30:52] <eddyb> (never used that)
[12:31:14] <Heather> eddyb expected `>`, found `&`
[12:31:20] <Heather> -> <&'static Vcs> {
[12:31:26] <Heather> ah sorry )
[12:31:28] <Heather> Option
[12:31:33] *** Quits: GeorgeH (George@moz-FB5F2302.hsd1.nj.comcast.net) (Connection reset by peer)
[12:32:09] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[12:32:39] <Heather> eddyb works with static
[12:32:52] <eddyb> :)
[12:33:13] <eddyb> so at least you're not using the heap, just passing a vtable around
[12:34:20] <strcat> why not just define methods on the enum though?
[12:34:25] <eddyb> Heather: now, the performance problem here is that you're matching on an enum, but then you're using virtual calls - if the virtual calls were inlined in an enum, then they could be devirtualized, but that's hard to do
[12:34:37] <eddyb> strcat: because they would be ugly proxies
[12:34:39] *** Joins: dd (chatzilla@B61C2AE3.78BE666E.9105FBCF.IP)
[12:34:46] <dd> freezing : let mut x:int =5; {let y : int = &x; y = y*y; x=y;// the last operation is invalid ? }
[12:34:49] <eddyb> the enum might as well be strings
[12:35:08] <eddyb> dd: try x = *y;
[12:35:28] <dd> what is actually freezing ???
[12:35:32] <eddyb> wait, what?
[12:35:35] *** Joins: MrOrdinaire (Mibbit@5C68C0A1.6BCC7DAD.FD383126.IP)
[12:36:09] <eddyb> dd: ah nvm. I see what happens. x is immutable in that block, because y is an immutable reference to it
[12:36:50] <Heather> eddyb :S
[12:37:01] <eddyb> dd: you want something like {let y: int = x; y = y*y; x = y;}, I guess
[12:37:05] <dd> this is sick :(
[12:37:21] <eddyb> dd: I can't see how let y: int = &x; would even compile
[12:37:29] *** Quits: Sgeo (quassel@moz-D0F30617.dyn.optonline.net) (Connection reset by peer)
[12:37:42] <eddyb> rusti: let mut x: int = 5; let y: int = &x;
[12:37:44] -rusti- <anon>:9:42: 9:44 error: mismatched types: expected `int` but found `&int` (expected int but found &-ptr)
[12:37:44] -rusti- <anon>:9          let mut x: int = 5; let y: int = &x;
[12:37:44] -rusti-                                                    ^~
[12:37:44] -rusti- error: aborting due to previous error
[12:37:44] -rusti- application terminated with error code 101
[12:38:01] <MrOrdinaire> let y: int = &2;
[12:38:06] <MrOrdinaire> rusti: let y: int = &2;
[12:38:06] -rusti- <anon>:9:22: 9:24 error: mismatched types: expected `int` but found `&<VI0>` (expected int but found &-ptr)
[12:38:07] -rusti- <anon>:9          let y: int = &2;
[12:38:07] -rusti-                                ^~
[12:38:07] -rusti- error: aborting due to previous error
[12:38:07] -rusti- application terminated with error code 101
[12:38:15] <dd> yeah  sorry , i just wrote it did not compiled it .
[12:38:25] <eddyb> MrOrdinaire: no way that would work. &2 is an &int, not an int
[12:38:39] <dd> i am learning the concept of freezing :(
[12:38:47] <MrOrdinaire> eddyb: yeah, I just want to test dd's idea
[12:39:01] <eddyb> dd: a reference to an integer is (almost) useless IMO, you can just copy it and it will be faster
[12:39:31] <eddyb> dd: ah, I see. let me rewrite your example
[12:40:10] <benh> dd: freezing is basically a promise that if you have an immutable reference to a thing, no one will modify it quietly away under your feet
[12:40:27] <eddyb> rusti: let mut x: int = 5; {let y: &int = &x; /* x is now frozen for the rest of the block */ x = *y + 2;}
[12:40:28] -rusti- pastebinned 8 lines of output: http://sprunge.us/UPDD
[12:40:38] *** Joins: Sevas (Russia@4733FF71.D58F00A9.49AE3F3.IP)
[12:40:47] <benh> dd: this is really useful because eg. it means that you can just freeze a containre while looping over it and the loop body can't suddenly resize the container so the loop runs past the end
[12:40:57] <MrOrdinaire> I have a trait like this `trait Arbitrary<T> { fn arbitrary() -> T; }`, and an impl `impl<T: Rand> Arbitrary<T> for T { fn arbitrary() -> T { rand::random() } }`
[12:40:58] <eddyb> hmm, interesting, the error doesn't mention freezing
[12:41:05] <MrOrdinaire> how can I access arbitrary() now?
[12:41:30] <eddyb> MrOrdinaire: Arbitrary::<T>::arbitrary(), I think
[12:41:41] *** Quits: Sevas (Russia@4733FF71.D58F00A9.49AE3F3.IP) (Quit: )
[12:41:48] <MrOrdinaire> rustc reports not able to find Arbitrary
[12:41:57] <eddyb> is it in scope?
[12:42:00] <MrOrdinaire> (from a different crate)
[12:42:01] <benh> eddyb: I think freezing in the more narrow sense is let mut x = blah(); let x = x; ... let mut x = x;
[12:42:09] <eddyb> MrOrdinaire: import it
[12:42:19] <eddyb> benh: right, wasn't thinking straight >_>
[12:42:26] <MrOrdinaire> I did `use lib::Arbitrary;`
[12:42:35] <benh> eddyb: that the borrow checker doesn't let you undermine it is probably related but not central to the concept, idk
[12:42:51] <eddyb> MrOrdinaire: then, try let x: T = Aribitrary::arbitrary();
[12:43:27] <eddyb> benh: yeah, I blame dd's example :P
[12:44:21] <MrOrdinaire> eddyb: cannot determine a type for this bounded type parameter: unconstrained type
[12:45:05] <eddyb> MrOrdinaire: does T implement Arbitrary? where does the error show up?
[12:45:33] <MrOrdinaire> in test.rs where I test the impl
[12:45:49] <MrOrdinaire> eddyb: I've already had `impl<T: Rand> Arbitrary<T> for T { fn arbitrary() -> T { rand::random() } }`
[12:45:49] <benh> the let x: T = ... line/
[12:45:50] <benh> ?
[12:46:06] <eddyb> MrOrdinaire: is T a generic or did you replace it with something?
[12:46:11] <dd> thank you rust developers for providing only one dereferencing operator :) feeling-happy :)
[12:46:12] <MrOrdinaire> eddyb: yeah
[12:46:21] <eddyb> if it's generic, you need T: Arbitrary to use the trait
[12:46:35] <MrOrdinaire> I tried `let t: char = Arbitrary::arbitrary();
[12:46:51] <eddyb> does char implement Rand?
[12:46:58] <MrOrdinaire> eddyb: is that legal? Char does
[12:47:05] <MrOrdinaire> std::char::Char
[12:47:20] <eddyb> what is that, even?
[12:47:36] <MrOrdinaire> it's the trait for char
[12:47:44] <eddyb> then it's unrelated
[12:48:02] <eddyb> rusti: ~'a' as ~Rand
[12:48:03] -rusti- <anon>:9:18: 9:22 error: use of undeclared type name `Rand`
[12:48:03] -rusti- <anon>:9          ~'a' as ~Rand
[12:48:03] -rusti-                            ^~~~
[12:48:03] -rusti- error: aborting due to previous error
[12:48:03] -rusti- application terminated with error code 101
[12:48:25] <dbaupp> http://static.rust-lang.org/doc/master/std/rand/trait.Rand.html "impl Rand for char"
[12:48:36] <eddyb> then what is wrong here?
[12:49:11] <eddyb> MrOrdinaire: oh, I know. you don't need Arbitrary to be generic
[12:49:36] <eddyb> trait Arbitrary { fn arbitrary() -> Self; } impl<T: Rand> Arbitrary for T { fn arbitrary() -> T { rand::random() } }
[12:49:49] *** Joins: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca)
[12:50:05] <dbaupp> eddyb: your example is wrong because Rand isn't in the prelude, and possibly also because there' wasn't Rand for char in 0.8 (I can't remember)
[12:50:34] <eddyb> dbaupp: what is wrong with his example, that is :P. I found out :)
[12:50:52] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:50:54] <dbaupp> eddyb: oh
[12:51:05] *** Quits: Palmik (palmik@moz-DEC2AB.pks.muni.cz) (Ping timeout)
[12:51:22] <eddyb> lol@all the tuple implementations
[12:51:26] <dd> for making dynamically resized verctor we use ~ sign ?? let mut xx = ~[a, b, c];
[12:51:48] <eddyb> dd: currently, yes. there's some talk of changing that, but it's unclear what will happen
[12:52:01] <dd> okey 
[12:52:23] <MrOrdinaire> eddyb: no luck :(
[12:52:26] <eddyb> ~T means heap allocation, even if ~[T] is slightly different internally
[12:52:29] <eddyb> MrOrdinaire: what's wrong now?
[12:52:36] <MrOrdinaire> http://mibpaste.com/vVwiyc 
[12:52:36] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:52:40] <dd> but for all of them , i am going to contribute in the source code .. so i think i must not be using it , while writing code.
[12:53:01] <MrOrdinaire> eddyb: still unresolved name `Arbitrary`.
[12:53:22] <eddyb> MrOrdinaire: are you sure you're using it in the same module as your function?
[12:53:30] <eddyb> s/using/`use`-ing/
[12:53:41] <MrOrdinaire> eddyb: finally, it works
[12:53:55] *** Joins: Palmik (palmik@moz-DEC2AB.pks.muni.cz)
[12:54:00] <MrOrdinaire> eddyb: thanks, I changed Arbitrary<char> to Arbitrary
[12:54:16] <eddyb> oh, yeah, that's Arbitrary::<for char> which might not be implemented yet
[12:54:30] <MrOrdinaire> eddyb: thanks a bunch
[12:54:32] <eddyb> dd: you think you shouldn't be using ~[T]? where?
[12:55:08] *** Quits: jensnockert (jensnocker@E26F71DB.81840CBC.B0E77544.IP) (Input/output error)
[12:55:37] <dd> i do not know :( 
[12:55:37] *** Joins: jensnockert (jensnocker@E26F71DB.81840CBC.B0E77544.IP)
[12:55:53] <dd> but i am will not be using it in debugginfo.rs :)
[12:56:14] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[12:56:42] <dd> eddyb said it may be changed in future ?? so i can nt write using old syntax ?? 
[12:57:21] <eddyb> dd: you may have to change your code at some point, but it will work fine for now. and if you're asking about compiler code - it uses ~[T] a lot, don't worry
[12:57:32] *** Quits: jensnockert (jensnocker@E26F71DB.81840CBC.B0E77544.IP) (Ping timeout)
[12:57:47] <ChrisMorgan> eddyb: "importing" is also considered acceptable for the use of the use statement.
[12:58:33] <dd> ohh gr8 :) so does it means that deprecated syntax  also works in programming language after modification ?
[12:59:49] <eddyb> dd: the compiler has stages, so a syntax change is implemented in a few steps - it's like a crazy dance, until the new snapshot comes out and all the old code is replaced
[13:00:59] <eddyb> dd: that said, it's possible the old syntax could be deprecated, and then you can start to replace the code to use the new syntax
[13:01:01] <dd> gr8 :) so its not one time job :P
[13:01:01] *** Quits: StarLight (StarLight@moz-A651111B.dynamic.avangarddsl.ru) (Ping timeout)
[13:01:03] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[13:01:09] <eddyb> depends on what they'll decide
[13:01:29] <eddyb> dbaupp: hmm, with a proper variadic implementation of Rand for (..T), you could do struct Foo(bool, char, int, etc.) and then just impl Rand for Foo {fn rand<R: Rng>(rng: &mut R) {Foo(..Rand::rand(rng))}}
[13:01:56] *** Quits: MrOrdinaire (Mibbit@5C68C0A1.6BCC7DAD.FD383126.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:01:57] <dd> what is the syntax of closer ?? can you explain ?
[13:02:07] <eddyb> you mean closure?
[13:02:10] <dd> *Closures
[13:02:12] <dd> yeah 
[13:02:25] *** Joins: StarLight (StarLight@moz-278A921A.dynamic.avangarddsl.ru)
[13:02:40] <Heather> yeah
[13:02:42] <dd> it gives us the power to access the outer variables ? :)
[13:02:42] <eddyb> fn(A, B, C) -> R; is a function type that takes three arguments of types A, B, C and returns something of type R
[13:02:52] *** Joins: Tari (tari@moz-1713FB27.mtu.edu)
[13:02:52] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[13:02:54] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[13:02:56] <eddyb> |A, B, C| -> R; is the same thing with closures
[13:03:05] <eddyb> unless you were asking about semantics and not syntax :P
[13:03:16] <dd> god :(
[13:03:34] <eddyb> syntax is how you write things, semantics is what they mean
[13:03:50] <eddyb> (I hope I'm write, otherwise someone will burn me alive)
[13:03:55] <eddyb> *right, dammit
[13:04:10] <dd> okey now , i changed my mind now semantics :P
[13:04:20] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Input/output error)
[13:04:32] <eddyb> yes, a closure "closes over" its parent context
[13:04:39] <Heather> eddyb isn't it just lambda
[13:04:44] <eddyb> so it can read or even write variables
[13:04:57] <eddyb> Heather: is a lambda a closure or is a closure a lambda? I don't know
[13:05:23] <Heather> eddyb I mean |A, B, C| -> R example
[13:05:46] <eddyb> that's the syntax for the type
[13:06:29] <eddyb> rusti: let mut a = 0; [1, 2, 3, 4].iter().map(|&x| a += x).to_owned_vec(); a
[13:06:30] -rusti- pastebinned 11 lines of output: http://sprunge.us/MWgI
[13:06:51] <eddyb> rusti: let mut a = 0; ~[1, 2, 3, 4].iter().map(|&x| a += x).to_owned_vec(); a
[13:06:52] -rusti- pastebinned 11 lines of output: http://sprunge.us/MOjL
[13:06:54] *** Quits: tulloch (tulloch@moz-BC895BC5.damtp.cam.ac.uk) (Ping timeout)
[13:07:06] *** Quits: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) (Quit: ~ Trillian - www.trillian.im ~)
[13:07:10] <eddyb> rusti: let mut a = 0; let v = ~[1, 2, 3, 4]; v.iter().map(|&x| a += x).to_owned_vec(); a
[13:07:11] -rusti- 10
[13:07:37] <eddyb> rusti: let mut a = 0; let v = ~[1, 2, 3, 4]; (v.iter().map(|&x| {a += x; a}).to_owned_vec(), a)
[13:07:39] -rusti- (~[1, 3, 6, 10], 10)
[13:08:45] <eddyb> nobody told me if this is a good idea yet: fn move<'a>(&self) -> Option<Expr<'a>>
[13:09:23] <strcat> ?
[13:10:01] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[13:10:09] <eddyb> Expr<'self> is an enum that has some variants which contain &'self Expr<'self>
[13:10:19] *** Joins: tulloch (tulloch@moz-BC895BC5.damtp.cam.ac.uk)
[13:10:51] *** Quits: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca) (Quit: canhtak)
[13:10:56] <eddyb> it's like a AST/DAG constructed on the stack, and usually sent down the stack (method calls)
[13:11:08] *** Quits: Ms2ger (Ms2ger@moz-454C9175.ugent.be) (Ping timeout)
[13:11:58] <eddyb> strcat: expr.move() would return None for the variants which contain references or Some(*self) otherwise (just constants), does that make sense?
[13:12:09] *** Quits: tulloch (tulloch@moz-BC895BC5.damtp.cam.ac.uk) (Ping timeout)
[13:12:23] <eddyb> I'm mapping Expr<'self> to Option<Expr<'a>> and I'm not sure "move" is a good name for it
[13:13:01] <eddyb> (and I want to learn more rust-specific terms)
[13:15:19] *** Joins: tulloch (tulloch@moz-BC895BC5.damtp.cam.ac.uk)
[13:18:20] *** Quits: skal (skal@D5C2D2DF.E4265FCD.E481B5B.IP) (Ping timeout)
[13:20:40] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[13:22:55] *** Quits: dd (chatzilla@B61C2AE3.78BE666E.9105FBCF.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0/20131028113246])
[13:22:59] *** pmoore is now known as pmoore|away
[13:23:44] *** Joins: MrOrdinaire (Mibbit@5C68C0A1.6BCC7DAD.FD383126.IP)
[13:23:59] <MrOrdinaire> where can I add #[feature(macro_rules)] in a crate?
[13:24:07] *** Joins: jdm (jdm@moz-ED0C7AC7.hinet-ip.hinet.net)
[13:24:08] *** ChanServ sets mode: +o jdm
[13:24:36] *** Joins: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP)
[13:24:47] *** Quits: dbaupp (Thunderbir@moz-4CA0D523.lns20.syd6.internode.on.net) (Quit: dbaupp)
[13:25:03] <MrOrdinaire> seems like rustpkg does not support this. the crate compiles fine with rustc.
[13:25:47] <sanxiyn> I voiced my opinion against recently proposed automatic coercion removal.
[13:26:04] <sanxiyn> (Really, I don't understand the motivation at all. Can someome explain?0
[13:26:28] <strcat> I'm not sure, I like auto-slicing
[13:26:31] *** Joins: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca)
[13:26:37] <strcat> in fact I want overloadable auto-slicing
[13:27:05] <strcat> it's sooooooo painful to use a custom vector without it, unless you duplicate all the slice methods on it
[13:27:10] <strcat> I guess I'll end up doing that.
[13:27:47] <sanxiyn> strcat: I found it strange that apparently I am the first person to be clearly against the proposal in the thread
[13:27:58] <strcat> which thread?
[13:28:11] <sanxiyn> [rust-dev] Removing some autoref magic
[13:28:22] <sanxiyn> I guess many people stopped reading rust-dev because of too much volume?
[13:28:47] <bjz_> MrOrdinaire: add `#[feature(macro_rules)];` (with the semi-colon) at the top of the root module
[13:28:48] *** Joins: dbaupp (Thunderbir@moz-4CA0D523.lns20.syd6.internode.on.net)
[13:29:00] <strcat> sanxiyn: well I've been ignoring mails not in threads I have controversial opinions on :)
[13:29:11] <MrOrdinaire> bjz_: what's the root module?
[13:29:17] <strcat> I guess I assumed nothing big was going to be changed in that one
[13:29:38] <MrOrdinaire> bjz_: is it lib.rs?
[13:29:43] <bjz_> MrOrdinaire: yah
[13:29:43] <sanxiyn> Ah, so only people with controversial and minority opinions usually reply? I guess that could explain...
[13:29:43] *** Joins: Ms2ger (Ms2ger@moz-454C9175.ugent.be)
[13:29:48] <MrOrdinaire> bjz_: thanks
[13:29:59] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Connection reset by peer)
[13:30:05] <bstrie> sanxiyn: well if you wanted to talk to the devs directly, I'm sure they would listen to you :)
[13:30:05] <bjz_> sanxiyn: that's usually the case on the interwebs
[13:30:23] *** Joins: zatnosk (zatnosk@31AE4F7A.F285E7E8.9E52235C.IP)
[13:30:28] <MrOrdinaire> bjz_: still no use :(
[13:30:34] *** Joins: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP)
[13:30:47] <bjz_> MrOrdinaire: is it the first thing?
[13:30:52] <MrOrdinaire> yes
[13:31:01] <strcat> sanxiyn: I wouldn't say that, but I care a lot about having library containers be first-class, allocators, 1:1 threading, concurrent containers, etc.
[13:31:05] *** Joins: logicalparadox (logicalpar@moz-C73156AE.dr01.wlbr.pa.frontiernet.net)
[13:31:12] <strcat> so I've been ignoring all the other chatter
[13:31:17] <bjz_> MrOrdinaire: https://github.com/bjz/gfx-rs/blob/master/src/gfx/lib.rs#L15
[13:32:10] <sanxiyn> I am starting to feel that it is time to split rust-dev like we split IRC channel
[13:32:16] <bstrie> sanxiyn: there is!
[13:32:21] <bstrie> oh wait
[13:32:24] <strcat> rust-syntax
[13:32:24] <bstrie> you mean the mailing list :P
[13:32:31] <strcat> and I can not sub to that one
[13:32:33] <strcat> ;p
[13:32:33] <sanxiyn> bstrie: Yes mailing list
[13:32:34] <benh> strcat: rust-syntax-of-comments!
[13:32:56] <strcat> we need a separate mailing list for development and use of the language
[13:32:59] <bstrie> sanxiyn: python has a "python-ideas" mailing list to segregate the random bikeshedding
[13:33:01] <strcat> rust-general, rust-dev, or whatever
[13:33:05] <sanxiyn> bstrie: Exactly
[13:33:14] <sanxiyn> I was about to propose rust-ideas as a name
[13:35:08] <benh> I just want &5i + 5i to stop working for consistency!
[13:37:47] *** Quits: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP) (Ping timeout)
[13:38:41] *** Quits: sigma (sigma@moz-A2CEC3AD.range86-163.btcentralplus.com) (Ping timeout)
[13:40:09] *** Joins: zippity (Mibbit@AD5F41FF.122B79D6.E435C74A.IP)
[13:40:26] <zippity> hello, 
[13:40:27] <zippity> can anyone tell me how to install firefox addon on centos that has no display 
[13:41:01] <strcat> I think you're in the wrong channel
[13:41:09] <bstrie> zippity: try #firefox, perhaps
[13:41:15] <bjz_> :)
[13:41:22] *** Joins: vmx (vmx@moz-D7D030D2.pools.arcor-ip.net)
[13:41:33] <bjz_> zippity: but hang around if you want to learn about rust!
[13:41:45] <bjz_> x)
[13:42:16] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[13:42:48] <sanxiyn> strcat: I think I reacted to UEFI comment because I have a friend working on UEFI implementation.
[13:43:06] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[13:43:29] <sanxiyn> I pretty much agree with your coreboot comment though
[13:43:37] * strcat was trying to be funny
[13:43:44] <sanxiyn> I think you failed
[13:43:50] <strcat> yeah, I see that :)
[13:43:52] <eddyb> oh no he didn't :P
[13:44:11] *** Joins: lfox (lfox@moz-861E573F.nyc.biz.rr.com)
[13:44:20] <eddyb> although I'm like that myself
[13:44:25] <strcat> sanxiyn: intel/samsung seem like they would looooove coreboot though, I don't get the whole UEFI thing.
[13:44:42] *** Joins: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP)
[13:44:47] <eddyb> this last year of highschool we're doing Oracle DB for CS
[13:44:48] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[13:44:55] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[13:45:06] <eddyb> I was writing the schema of some table on the whiteboard, and put TEXT as the type of a column
[13:45:08] <strcat> intel puts so much money into open-source, but maybe that's just because they're a huge company so they can do lots of good and lots of evil too ;p
[13:45:32] <sanxiyn> strcat: I got the same impression
[13:45:33] <eddyb> the class noticed (weird, they usually sleep) and I had to change it to VARCHAR2
[13:45:55] <eddyb> I've added a * next to that, and lower down on the whiteboard, in fine "print", *FUCK ORACLE
[13:45:58] <bstrie> eddyb: my company decided that maintaining a database that uses "tables" and gross things like that is just too much work
[13:46:19] <sanxiyn> (That is, Intel does not really have open source strategy per se, and Intel OTC(Open Source Technology Center) exists because it can exist.)
[13:46:21] <eddyb> bstrie: something like MongoDB, then?
[13:46:25] <bstrie> eddyb: so instead we just have one giant table, with predefined fields of 10 characters each, and we use flag fields to partition this into subtables
[13:46:34] <eddyb> bstrie: BURN
[13:47:02] <bstrie> eddyb: but "it's so much easier to maintain"
[13:47:23] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[13:47:24] * bstrie vomits
[13:47:30] <eddyb> it's like using ~[BigEnum] in Rust for everything
[13:48:00] <bstrie> I'm exaggerating a bit... we *do* have other tables. but this giant table is the master table to rule them all, and in the darkness join them
[13:48:10] <strcat> bstrie: wait wat
[13:48:13] <strcat> so
[13:48:20] <eddyb> I guess SELECT makes it somewhat easy to get the rows from one "subtable"
[13:48:21] <strcat> wat.
[13:48:41] <bstrie> strcat: we store all global configuration, for every part of our internal systems, in this table
[13:48:51] <bstrie> it is 10,000 records long, with a few hundred "subtables"
[13:49:07] <strcat> bstrie: how do they query it?!?
[13:49:12] <sanxiyn> SELECT
[13:49:14] <eddyb> strcat: ~[Either<User, Either<Group, Either<Article, Either<Tag, >>>>>]
[13:49:29] <eddyb> strcat: it's actually easy, the way SELECT is designed :P
[13:49:33] <strcat> bstrie: am I wrong to assume what you're saying is that there are like 10MiB records on the disk?
[13:49:39] *** Quits: MrOrdinaire (Mibbit@5C68C0A1.6BCC7DAD.FD383126.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:49:43] <strcat> so you read some huge row off the disk
[13:49:46] <strcat> and it's a table
[13:49:51] * strcat shrugs
[13:49:55] <bstrie> strcat: who knows how it works, it's just terrible
[13:50:07] <strcat> the leveldb philosophy is fun
[13:50:10] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[13:50:18] <strcat> so.... key-value maps
[13:50:22] <strcat> why do you need more than one?
[13:50:26] <strcat> just prefix your keys, dummy
[13:50:30] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[13:50:46] <sanxiyn> No, triple store, obviously
[13:51:05] <strcat> (sqlite is switching to using a single massive map with prefixes for each index/table in sqlite4 too, so apparently it works well)
[13:51:05] <bstrie> here, let me paste one of the queries from our PHP code
[13:51:08] <bstrie> "select substr(Z2DT64, 1, 10) from SYSVAL where Z2APPL='SY' and Z2KYWD='USERXREF' and Z2TYPE='D' and Z2PLL1=ucase('$username')"
[13:51:15] <bstrie> SYSVAL is the master table
[13:51:18] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[13:51:19] <bstrie> it also has "sections"
[13:51:19] <strcat> wat?
[13:51:25] <bstrie> "SY" is a section
[13:51:31] <strcat> Z2TYPE='D'
[13:51:32] <bstrie> "USERXREF" is the subtable in the SY section
[13:51:47] <bstrie> strcat: it has generic names for every field!
[13:51:49] <strcat> bstrie: are you sure you don't work for the government from Brazil?
[13:51:51] <Sharp> strcat: SQLite isn't really designed to support multiple applications or be a "real" database in production, though.  For what it's designed for (being the backing store for a single app) it might be fine.
[13:51:58] <bstrie> strcat: oh wait, Z2TYPE is a flag field
[13:52:11] <strcat> Sharp: it's meant to be a real db in production, but for 1 process
[13:52:22] <bstrie> strcat: you see, for each subtable, there's a row in the table that contains the text labels for each of the ad-hoc fields of the subtable
[13:52:31] <bstrie> a Z2TYPE of D means that it's a data row
[13:52:35] <Sharp> Right, but I meant more that it's not likely to span multiple terabytes or anything.
[13:52:38] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[13:52:40] <bstrie> but if it was F, it would be a label row
[13:52:45] <strcat> Sharp: for a read-only database though, it scales better than postgres ;p
[13:52:54] <sanxiyn> bstrie: This starts to sound like a badly designed triple store
[13:52:58] <Sharp> Haha, no doubt.
[13:53:04] <sanxiyn> where you store subject, predicate, object, without schema
[13:53:19] <eddyb> schema? what's schema?
[13:53:23] <strcat> Sharp: in non-WAL mode, it essentially has a giant rwlock
[13:53:34] <bstrie> oh, and of course, every field in this table in prefixed with Z2
[13:53:40] <strcat> in WAL mode it has fine-grained concurrency, but it doesn't scale very well
[13:53:44] <bstrie> and also every field name has a max length of 6 characters
[13:53:51] <strcat> (it scales great for readers though...)
[13:54:09] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[13:54:11] <Sharp> "WAL mode" as in "write-ahead log" mode?  As in "if you don't have this on and you do want to write to your database, you're screwed" mode?
[13:54:20] <strcat> Sharp: yeah
[13:54:21] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[13:54:27] <Sharp> Heh.  Okay, fair enough.
[13:54:28] <strcat> Sharp: non-WAL mode, writers block everything
[13:54:35] <strcat> and after 5 seconds of blocking it times out
[13:54:36] *** Quits: biefeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:54:45] <strcat> so yeah...
[13:54:51] <strcat> it's perfect for what it's designed for
[13:54:52] <Sharp> Haha
[13:54:55] <Sharp> Exactly.
[13:54:55] <dbaupp> bstrie: is that an SQL injection of $username?
[13:55:00] <Sharp> Anytime I *can* use SQLite I do
[13:55:02] <strcat> it's a structured fopen() replacement
[13:55:03] <bstrie> dbaupp: ssshhhhhh :)
[13:55:04] <strcat> :)
[13:55:07] *** Parts: zippity (Mibbit@AD5F41FF.122B79D6.E435C74A.IP) ()
[13:55:19] <strcat> transactions, indexes, constraints
[13:55:23] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[13:55:36] <Sharp> I'm just not sure its architectural decisions say much about what, say, Postgres can get away with (though I am a bit biased because I love Postgres).
[13:55:44] <strcat> Sharp: leveldb is locks the file completely so only 1 process can use it
[13:55:48] <strcat> leveldb just locks*
[13:55:56] <eddyb> lock ness
[13:56:01] <sanxiyn> strcat: Also full text search
[13:56:09] <bstrie> dbaupp: fortunately, this database apparently doesn't support commas, nor does it support multiple semicolon-separated statements
[13:56:16] <Sharp> Hoom.
[13:56:16] <bstrie> s/commas/comments
[13:56:21] <strcat> sanxiyn: yeah, but it's really hard to use it for complex text search :)
[13:56:23] <dbaupp> bstrie: fun
[13:56:34] <sanxiyn> strcat: Good enough for simple things
[13:56:43] <Sharp> I was looking at some LevelDB clone the other day that I can't remember the name of that I thought might be useful.
[13:56:44] <strcat> sanxiyn: yeah, tokens and token prefixes
[13:57:14] <Sharp> https://github.com/krestenkrab/hanoidb
[13:57:17] <bstrie> dbaupp: according to management, security isn't a priority because this is an intranet app
[13:57:38] <bstrie> and I'm like, lolol I'll just be over here on IRC then folks
[13:57:51] <sanxiyn> strcat: What do you mean by "complex text search"?
[13:57:55] *** Joins: GeneralMaximus (ankur@1FC1837.5B928161.D5D59AD9.IP)
[13:58:01] <Sharp> And here I was thinking my former company used the database badly.
[13:59:14] <bstrie> Sharp: in total employee time, we probably spent *100 hours* last month debating on whether we should expand a two-character field to three characters, or whether we should expand that field to five characters
[13:59:29] <bstrie> at some point I was like
[13:59:38] <bstrie> "FUCK IT JUST MAKE IT 2048 CHARACTERS"
[13:59:41] <bstrie> (paraphrasing)
[13:59:47] <bstrie> they thought I was joking
[14:00:06] <bstrie> enterpriseeeeeees
[14:00:07] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[14:00:27] <sanxiyn> bstrie: Is it large? Is space saving significant? (I guess no)
[14:00:31] <Sharp> To be fair, a lot of DBAs would probably have a heart attack hearing you say that… but if it's just 10k rows you have a point :P
[14:00:32] *** Quits: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP) (Quit: Ex-Chat)
[14:00:36] *** Joins: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP)
[14:00:42] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[14:01:20] <sanxiyn> Prismatic started to recommend me to read about Scientology. I guess it's officially over.
[14:01:22] <bstrie> well our server admin doesn't know what an index is, so it's not like there's anything I can do to contribute to performance
[14:01:30] <Sharp> Oh.  Oh wow.
[14:01:47] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[14:02:11] <sanxiyn> FYI: http://rust-kr.org/
[14:02:21] <sanxiyn> Site runs on rust-http, so please don't hammer it
[14:02:23] <eddyb> things like that make me hate this Oracle shit even more
[14:02:37] <bstrie> instead of indexes, on tables with stuff like historical data (separate from the master configuration table), we have a job every night that duplicates the data in those tables into alternate views of the tables
[14:02:43] <eddyb> sanxiyn: inb4 unnamed failure in task 1....
[14:02:59] *** Quits: tulloch (tulloch@moz-BC895BC5.damtp.cam.ac.uk) (Ping timeout)
[14:02:59] <sanxiyn> eddyb: ?
[14:03:02] <bstrie> so that it's faster to access the data, you see
[14:03:04] <eddyb> bstrie: just no, fuck no. NOPE. NOPE
[14:03:09] <strcat> sanxiyn: http://swtch.com/~rsc/regexp/regexp4.html
[14:03:23] <strcat> sanxiyn: http://codesearch.debian.net/
[14:03:28] <Sharp> It seems like at your company people wanted to use a RDBMS, but didn't want to spend any time learning about how databases solve problems people used to have before the RDBMS existed
[14:03:31] <sanxiyn> strcat: What about it?
[14:03:33] <Sharp> So they just do their own thing :P
[14:03:45] <strcat> Sharp: well sqlite just lets you do prefixes
[14:03:47] <strcat> er
[14:03:48] <sanxiyn> Ah, complex text search
[14:03:49] <strcat> sanxiyn: 
[14:03:53] <eddyb> bstrie: http://no.pe/
[14:04:17] <sanxiyn> strcat: I was thinking more along the line of natural langauge processing
[14:04:20] <bstrie> eddyb: when we were in highschool, my grandfather made all of the grandchildren do manual labor around his house so that they could appreciate what a lifetime of manual labor would be like
[14:04:24] <strcat> sanxiyn: ah
[14:04:32] <bstrie> eddyb: now, I come to you in the same capacity. if you just learn java, this is what your future holds
[14:04:37] <sanxiyn> Yeah SQLite doesn't handle regex search (I think it doesn't belong there)
[14:04:59] <strcat> sanxiyn: or suffixes ;p
[14:05:07] <eddyb> bstrie: I was working in a C++ kernel at 12-13
[14:05:21] <bstrie> eddyb: I was writing Mario RPG fanfiction at 12-13
[14:05:30] <dbaupp> bstrie: in C++?
[14:05:40] <bstrie> dbaupp: sadly no, in a bizarre scriptlike format
[14:05:52] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[14:05:56] <bstrie> on the forums at gametalk.com
[14:06:16] * strcat can't remember what he was doing at 13, it probably involved eating a lot of candy and chasing girls with sticks
[14:06:45] <strcat> or not, maybe that was 6 ;p
[14:06:46] <eddyb> I didn't know what Mario was until later, I think
[14:07:26] <bstrie> which was a site where nobody had ever heard of cookies to store usernames, and the password field was just a normal text input without the ******, and in retrospect probably transmitted and saved passwords in plaintext
[14:07:33] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[14:07:41] <bstrie> ah, memories
[14:08:06] <strcat> bstrie: I am pretty sure 99% of the internet is still vulnerable to CSRF
[14:08:14] <eddyb> you know, if it weren't for this useless highschool, I could have single-handedly written the first real decompiler in existence before turning 18
[14:08:23] <eddyb> now it's a little too late :P
[14:08:24] <sanxiyn> I was working on my constructed language when I was 13
[14:08:24] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[14:08:27] <sanxiyn> But then, I still do
[14:08:31] <bstrie> haha
[14:08:42] <sanxiyn> (I'd like to think my current effort is much better)
[14:09:33] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[14:10:20] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[14:11:07] <sanxiyn> Linyaon le coronoiayang silei caileváng ayam, nárya ilon ayena evayam nuternu: Benenoieon nay sirutadayieon le setatahaeváng, nay aràton silei nasay evaea macoronasaeváng.
[14:11:10] *** Joins: skal (skal@D5C2D2DF.E4265FCD.E481B5B.IP)
[14:12:03] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[14:12:49] <eddyb> I think I liked Glosa (or whatever its name was) best, but I may be biased
[14:13:00] *** Quits: jdm (jdm@moz-ED0C7AC7.hinet-ip.hinet.net) (Ping timeout)
[14:13:30] <sanxiyn> eddyb: I don't want to go near auxlang world
[14:13:44] <eddyb> and English is good enough as my second interned language
[14:13:59] <eddyb> i.e. I've been thinking in English for years now
[14:14:12] <sanxiyn> Some people create languages to be an international auxiliary language. Some others create languages as an artistic creation.
[14:14:16] <sanxiyn> I am firmly in the later camp.
[14:14:36] <Sharp> Some of us don't create language at all :(
[14:14:37] <eddyb> sanxiyn: like tolkien's elven?
[14:14:47] <sanxiyn> eddyb: Yeah like that
[14:15:18] <bstrie> was gonna say, it reminded me of elvish :)
[14:15:30] <Sharp> Tolkien actually got paid to do that, though.
[14:15:32] <eddyb> Sharp: some of us do serious things, like work on programming languages, instead :P
[14:16:03] <sanxiyn> bstrie: I am not sure that is a compliment or not... since artists want to have their own color.
[14:17:07] <sanxiyn> Working on programming languages is an engineering project for me. Working on private natural language is an art project.
[14:17:11] <Sharp> eddyb: You don't have all your mission-critical meetings in Elven?  (Elvish?)
[14:17:45] <sanxiyn> Sharp: Actually, Tolkien created two different Elvish languages (mutually unintelligible, I think). Quenya and Sindarin.
[14:17:50] <Sharp> Yeah, I know :P
[14:17:56] <Sharp> But I couldn't remember which was which.
[14:18:25] <Sharp> He also I think came up with the rudimentary basics of a few other languages.
[14:18:26] <eddyb> sanxiyn: I've had two gfs with potential in both areas (say, design and programming), but I'm such a bad teacher :(
[14:19:06] <eddyb> or motivator or inspiration - you know what I mean
[14:19:30] <sanxiyn> eddyb: No not really
[14:19:34] *** Quits: zatnosk (zatnosk@31AE4F7A.F285E7E8.9E52235C.IP) (Quit: Computer has gone to sleep)
[14:19:47] <sanxiyn> I guess you are a bad teacher. Most people are, unless they learned to teach.
[14:20:05] *** Joins: cubic (cubic@moz-80241A3A.mc.videotron.ca)
[14:20:55] <sanxiyn> Bad teacher can do good teaching to exceptional student, but teaching skill is to be judged by normal student
[14:21:52] <Sharp> I learn a lot from the people in this room and I doubt more than a fraction of you have a teaching degree.
[14:22:24] <eddyb> I guess I couldn't find someone who knows how to learn, who is really curious and who doesn't yet know a lot about everything he wants to know about
[14:23:30] <sanxiyn> eddyb: Referent of "he" in your last sentence seems to be your potential gf...?!
[14:23:52] *** Quits: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[14:23:55] <eddyb> sanxiyn: I wasn't specifically thinking about a potential gf, just in general
[14:24:11] <eddyb> I should've used they, I always forget to do that
[14:24:33] <Sharp> What is the official ruling on that these days?  Alternate he and she?
[14:24:47] <sanxiyn> I have no idea. I don't have that problem in my native language.
[14:24:48] *** Joins: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[14:24:56] <Sharp> I try to use "he or she" but it gets awkward very quickly.
[14:25:02] <Ms2ger> "they"?
[14:25:11] <Sharp> That's not the official variant
[14:25:15] <Sharp> The reason being that "they" is plural.
[14:25:25] <eddyb> Ms2ger: yes, it works a generic third person singular, but it may be stretched a bit
[14:25:33] <Sharp> I use "he or she" generally, but it gets awkward.  Sometimes you can get away with "one."
[14:25:44] <sanxiyn> I teach my sister programming and mathematics, because she asks about them.
[14:25:52] <eddyb> yeah, but one is indefinite
[14:26:36] <Sharp> I'm not sure what precisely indefinite means in this context, but it can definitely be used in some places where I would otherwise use "he or she."
[14:26:40] <Sharp> But not all.
[14:27:01] *** Joins: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP)
[14:27:13] <quasisphere> as a side note, in Finnish we only have one 3rd person singular pronoun :) 'hän'
[14:27:28] <Sharp> Lucky.
[14:27:51] <eddyb> Sharp: "one doesn't have to do X, they can just do Y"
[14:27:56] <quasisphere> yeah.. but English is still quite lucky compared to German, say.
[14:28:01] <Sharp> That's not correct.
[14:28:23] <Sharp> You switch from singular to plural in that sentence.
[14:28:42] <eddyb> Sharp: you can't use one there, can you?
[14:29:05] <Sharp> You could use: "One doesn't have to do X, he or she can just do Y."  Or, like I said, alternate he/she.
[14:29:24] <Sharp> Or possibly: "One doesn't have to do X, one can just do Y."
[14:29:27] <sanxiyn> I guess what is being claimed is that "one" is not an anaphora.
[14:29:37] <eddyb> that's what I mean by indefinite. I could use Rust terminology for lifetimes or borrowed pointers :P
[14:29:43] <eddyb> sanxiyn: ooh, fancy. need to look up
[14:29:46] <Sharp> Yeah, I would agree.
[14:29:58] <FreeFull> Polish is ok if you were born in Poland
[14:30:10] <sanxiyn> http://en.wikipedia.org/wiki/Anaphora_(linguistics)
[14:30:28] <eddyb> Sharp: https://en.wikipedia.org/wiki/Singular_they
[14:30:39] *** Quits: victorporof (victorporo@8BCA500A.9A7C5F59.4A6B528C.IP) (Connection reset by peer)
[14:30:41] <strcat> Sharp: meh, it's a living language and there's enough usage of 'they' as a gender neutral pronoun for it to be 'right'
[14:30:56] <Sharp> I'm well aware that it is used that way, eddyb.  I simply point out that it is not the "official" term.
[14:31:10] <strcat> there's no official definition of English :P
[14:31:18] <strcat> with French, there is :)
[14:31:22] <eddyb> I was going to point that out :)
[14:31:25] <Sharp> Well, the variant for which English teachers ask, let's say.
[14:31:29] <sanxiyn> strcat: There is one for Lojban! Lojban has an official parser!
[14:31:33] <eddyb> fuck teachers :P
[14:31:41] <eddyb> sanxiyn: parser? you've got to be kidding me
[14:31:42] <Sharp> It's certainly not something that I'd point out if someone didn't explicitly bring it up :P
[14:31:43] <eddyb> BNF?
[14:31:44] <strcat> Sharp: depends on the school or the teacher
[14:31:47] <strcat> or the country
[14:31:47] <sanxiyn> eddyb: Yup.
[14:32:18] <Sharp> strcat: True, so perhaps i should amend that to "teachers I have had."
[14:32:19] *** Quits: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[14:32:49] <eddyb> rebel, don't fall in line
[14:33:01] <eddyb> they're just another brick in the wall
[14:33:12] <Sharp> Though I was fairly confident that the "he or she" thing was some sort of standard, inasmuch as it was so confusing that it seems hard to believe it would have been independently agreed upon.
[14:33:17] <Sharp> Er, not he or she
[14:33:20] <Sharp> The alternating one.
[14:33:29] <sanxiyn> eddyb: http://www.lojban.org/publications/reference_grammar/chapter21.html
[14:33:48] *** Quits: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP) (Quit: Ex-Chat)
[14:33:51] <sanxiyn> The Complete Lojban Language Chapter 21 Formal Grammars
[14:35:28] *** Joins: josh (josh@DC98BC6D.96CB7DCC.284344F5.IP)
[14:37:24] *** Joins: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[14:37:42] <benh> Sharp: Alternating he and she?
[14:37:59] <Sharp> Yes.  This is one proposed solution to the "gender-neutral singular" problem English has.
[14:38:12] <benh> I've never heard of that. Singular they has centuries of precedent.
[14:38:29] <Sharp> Check the Wikipedia article, it's in there (though that's not where I learned of it).
[14:38:50] <Sharp> http://en.wikipedia.org/wiki/Gender-specific_and_gender-neutral_pronouns#Alternation_of_she_and_he
[14:38:52] <eddyb> stop wasting my time, I have to finish implementing this thing >_<
[14:39:11] *** Quits: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Quit: Ex-Chat)
[14:39:23] <Sharp> And to be honest, the real precedent is just to use "he" as a gender-neutral pronoun, but people do not like that :P
[14:40:06] *** Joins: zatnosk (zatnosk@31AE4F7A.F285E7E8.9E52235C.IP)
[14:40:26] <eddyb> Sharp: "that's sexist"
[14:40:32] <sanxiyn> http://mail.lojban.org/lists/lojban-list/msg05249.html is what I wrote in Lojban when I tried to learn it 10 years ago
[14:40:35] <sanxiyn> Wow time flies
[14:40:47] <Sharp> Well, it is sexist (albeit historically so).
[14:41:22] <Sharp> Hm, apparently Google Translate things Lobjan is Slovenian.
[14:41:29] <sanxiyn> lol
[14:41:48] *** Joins: sigma (sigma@moz-F17CE309.range86-143.btcentralplus.com)
[14:42:06] <strcat> Sharp: http://translationparty.com/
[14:42:29] <sanxiyn> Sharp: Try http://www.lojban.org/jboski/ for official Lojban parsing
[14:42:32] <Sharp> "Foo bar baz" translated perfectly!
[14:43:06] <benh> 'he or she' is also unhelpful since not everybody subscribes to either pronoun. :/
[14:43:17] <Sharp> Looks like there are syntax errors.
[14:43:32] <strcat> benh: yeah I'll just keep saying 'they'
[14:43:33] <Sharp> benh: True, but "it" also offends people.  "One" really does work, it's just incredibly awkward.
[14:43:59] <Sharp> "They" is fine as long as you don't care about the distinction between singular and plural.  Which in many cases, people don't.
[14:44:08] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Ping timeout)
[14:44:15] <benh> Of course 'it' offends people, it's specific and excludes most gender identities.
[14:44:16] <strcat> in many cases I do but I have no choice because english sucks ;p
[14:44:20] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[14:45:04] <benh> (and is often meant to disqualify someone from being a person)
[14:45:04] <Sharp> Yeah… that's pretty much it in a nutshell.  English just sucks.
[14:45:12] <eddyb> strcat: at least it's more simple and expressive than my native language
[14:45:44] <strcat> thanks to the internet we can spread the misery and force everyone to speak english ;p
[14:45:46] <eddyb> sometimes I just can't explain something because there's no words for it, I feel like describing a computer in some ancient tribal language
[14:45:51] <Sharp> Go us!
[14:45:53] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[14:46:12] <sanxiyn> I always found number agreement in English to be difficult
[14:46:19] <benh> It's really weird in the first place to bake a completely orthongal attribute like gender into the rules of grammar, it's inherently awkward
[14:46:30] <benh> at least english doesn't go as far as some other languages there.
[14:46:37] <benh> (orthogonal*)
[14:46:39] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[14:46:42] <strcat> ugh, french :P
[14:46:47] <Seldaek> damn, I missed a weird "let's invent languages" party 
[14:46:50] <Sharp> Russian, too, from what I've heard.
[14:46:57] <strcat> how are you supposed to remember which things are arbitrarily male or female?
[14:46:58] <eddyb> all romance languages
[14:47:10] <sanxiyn> strcat: It's part of vocabulary
[14:47:15] *** jorendorff_away is now known as jorendorff
[14:47:17] <sanxiyn> You remember all the words anyway
[14:47:20] <eddyb> the only good thing about Romanian is the almost 1:1 mapping between symbols and sounds
[14:47:45] <benh> eddyb: the bad thing is that so many of the symbols aren't in ascii!
[14:47:47] <eddyb> an "a" is written as an "a" and read as "a", no matter where it is
[14:48:00] <sanxiyn> I don't judge language's so-called difficulty, since Korean is widely considered to be one of the most difficult language around
[14:48:00] <benh> .oO(rscii)
[14:48:17] <Sharp> Hebrew has a 1:1 mapping between symbols and sounds :P  It's also horribly inconsistent.
[14:48:18] <eddyb> benh: which simbols?
[14:48:22] <sanxiyn> (And I must admit its grammar is indeed horrifyingly complex)
[14:48:53] <eddyb> ăâîșț are all the diacritics, I think
[14:48:57] <benh> eddyb: sorry, I misread and thought you repeated 'Russian'
[14:48:58] <Seldaek> strcat: I'm natively french speaking living in a german speaking area now, and the worst is that both languages have gender for every "thing" out there, but obviously they randomly disagree
[14:49:01] <eddyb> benh: hehe
[14:49:11] <benh> (mental cache invalidation, argh!)
[14:49:23] <strcat> benh: I have that issue when typing.
[14:49:27] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[14:49:30] <eddyb> benh: strcat can help with that
[14:49:37] *** Joins: mib_aqagwi (Mibbit@moz-CE18456E.net.upcbroadband.cz)
[14:49:43] <eddyb> benh: he will align you chrackras cache lines
[14:49:44] *** jorendorff is now known as jorendorff_away
[14:49:47] <eddyb> *your
[14:49:52] <benh> :D
[14:49:55] <mletterle> Greetings citizens of Rustopia.
[14:49:57] <sanxiyn> Anyone complaining about gender system built in the language should try the language with honorifics system built in
[14:50:07] <eddyb> I think my IRC client is sometimes lagging :/
[14:50:07] <sanxiyn> More difficult and more socially awkward
[14:50:25] <eddyb> sanxiyn: like, politeness?
[14:50:27] <sanxiyn> (This is why many Korean people ask the age when first met)
[14:50:29] <sanxiyn> eddyb: Yes
[14:50:36] <Seldaek> yeah that goes nuts pretty quick
[14:50:37] <eddyb> haha, *raises hand*
[14:50:48] <Seldaek> you have to take so many things into account to form a sentence
[14:51:11] <sanxiyn> Seldaek: This especially becomes very problematic when you translate the fiction, say
[14:51:22] <sanxiyn> You need to decide which character will be polite to which, up front
[14:51:35] <eddyb> new generations also get a lot of shit for using the English "can I ...?" or "may I ...?" forms
[14:51:38] <Seldaek> already freaks me out when people use formal form in french with me, because I'm so used to english where there is no such thing 
[14:51:52] <eddyb> it's something "do you permit me to ...?" here
[14:52:04] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[14:52:27] <eddyb> and it's accompanied by the polite plural of "you"
[14:52:46] *** jorendorff_away is now known as jorendorff
[14:52:58] <sanxiyn> Did you know that there are different translations of Great Gatsby to Korean
[14:53:05] <sanxiyn> where in one version, Gatsby is polite to Daisy
[14:53:09] <sanxiyn> and in the other, not
[14:53:15] <sanxiyn> They read totally different
[14:53:25] <Seldaek> strange stuff
[14:53:30] *** Quits: mib_aqagwi (Mibbit@moz-CE18456E.net.upcbroadband.cz) (Quit: http://www.mibbit.com ajax IRC Client)
[14:53:37] <Seldaek> since I didn't see anyone mention it yet: let's all learn esperanto!
[14:53:40] <eddyb> oh, that's way worse than what I know
[14:53:40] <sanxiyn> Such decisions affect entire translation, so must be made up front
[14:53:41] <mletterle> pretty awesome stuff.
[14:54:03] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:54:09] <benh> personally, I'm holding out for Marain
[14:54:30] <eddyb> Seldaek: meh, I'm biased towards https://en.wikipedia.org/wiki/Glosa
[14:54:34] <Sharp> Seldaek: My grandfather used to be a big Esperanto fan
[14:54:47] <Sharp> I think he was disillusioned later in life when he realized nobody was actually speaking it.
[14:54:59] <Seldaek> eddyb: eh I'm really not into this at all, just thought someone had to say this
[14:55:43] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:57:12] <sanxiyn> (If you are dating, it is a significant event when you switch from formal register to informal register if you are a Korean speaker)
[14:57:27] <sanxiyn> I wonder whether there's similar stuffs in other languages
[14:57:29] <Seldaek> Sharp: I bet.. it's a bit like the lisp fans, condemned to be frustrated at humanity forever
[14:57:34] <sanxiyn> Maybe calling first name? Nah different.
[14:57:41] <Sharp> Seldaek: Perfect analogy.
[14:58:06] <Sharp> sanxiyn: Spanish Usted / tú?
[14:58:11] *** Quits: GeneralMaximus (ankur@1FC1837.5B928161.D5D59AD9.IP) (Quit: Computer has gone to sleep.)
[14:58:29] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:58:46] <Seldaek> Sharp: don't think so, that's like vous/tu in french or sie/du in german I think? just formal/informal, but you wouldn't really use that ever with someone you are dating I think
[14:58:48] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[14:58:50] <Seldaek> except if you're 60+
[14:58:55] <Sharp> Haha.
[14:58:56] *** strcat1 is now known as strcat
[14:58:58] <sanxiyn> Sharp: Seems to be much less pervasive
[14:59:00] <sanxiyn> compared to http://en.wikipedia.org/wiki/Korean_speech_levels
[14:59:05] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[14:59:06] <Sharp> Grammatically, it's similar, but it might not be culturally used in the same way.
[14:59:16] <Sharp> Oh god
[14:59:17] <Sharp> Seven?
[14:59:31] <Seldaek> yeah the formal stuff in most asian cultures are a lot crazier it seems
[15:00:13] <sanxiyn> Sharp: Well some forms are only used in historic drama, but still
[15:00:22] <Sharp> This article has opened my eyes
[15:00:28] <Sharp> I take back whatever I said about English :P
[15:00:37] <Seldaek> english is amazing :p
[15:00:56] <sanxiyn> I like this description of one Korean speach level
[15:01:01] <sanxiyn> It is used mainly:
[15:01:02] <Seldaek> it's braindead in some ways but it's very easy to grasp the basics
[15:01:08] <sanxiyn> * in Korean phrasebooks for foreigners
[15:01:10] <sanxiyn> lol lol lol
[15:01:16] <Sharp> Hahahaha
[15:01:24] <Sharp> Basically, so Koreans know for sure that you're not Korean?
[15:01:31] <eddyb> reminds me of Top Gear trying to speak Romanian
[15:01:49] <eddyb> it baffles me that it's hard to read something phonetically
[15:02:06] <Seldaek> eddyb: or any english speaking person trying to speak anything else? :p
[15:02:33] <Seldaek> ok that's unfair, but so many times in movies it hurts to hear actors pretend for a sentence or two they speak X fluently
[15:03:04] <Seldaek> you don't see me pushing out rust code like I know what I'm doing do you? erm.
[15:03:12] * Seldaek goes back to work :(
[15:03:36] <mletterle> "fake it till you make it"
[15:05:51] *** Quits: josh (josh@DC98BC6D.96CB7DCC.284344F5.IP) (Quit: josh)
[15:06:43] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[15:06:50] *** Quits: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP) (Quit: Leaving)
[15:08:01] *** kimundi is now known as zz_kimundi
[15:08:28] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Quit: leaving)
[15:09:34] *** Joins: mib_jizm8n (Mibbit@moz-3213C615.wavecable.com)
[15:09:57] <mib_jizm8n> What parts of the rust codebase depend on a unix environment?
[15:11:25] <bstrie> mib_jizm8n: could you clarify the question?
[15:12:39] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[15:14:49] <strcat> rust runs on windows, which clearly isn't a unix environment ;p
[15:15:06] <bstrie> strcat: but it requires mingw right now, which is kinda sorta a unix environment
[15:15:12] <strcat> not really
[15:15:15] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:15:25] <strcat> it's a toolchain
[15:15:28] <bstrie> not in the same sense as cygwin, but it's not exactly a first-class windows citizen
[15:15:32] <strcat> a C compiler, a linker, an assembler
[15:15:36] <bstrie> that's why I asked for the question to be clarified
[15:15:50] <strcat> a primitive build system (make), a shell
[15:15:58] <strcat> but it doesn't provide a POSIX implementation or anything like that
[15:16:01] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Ping timeout)
[15:16:04] <bstrie> depending on a unix-like toolchain is still a codebase dependency
[15:16:17] <strcat> it's not a 'unix-like toolchain'
[15:16:22] <strcat> it's just a toolchain that's not MSVC++
[15:16:25] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[15:16:52] <bstrie> right, so it's unixy :)
[15:18:05] <benh> That's a fairly low requirement for being unixy, probably wouldn't pass any certification!
[15:18:19] <strcat> if you want a complete C++11 implementation on windows, you have to use clang or gcc
[15:18:21] <strcat> or C99
[15:19:03] *** Joins: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP)
[15:19:13] <strcat> benh: windows has POSIX certification, linux doesn't, that tells you how much it's worth
[15:19:23] <strcat> (absolutely nothing)
[15:19:28] <bstrie> nobody said anything about posix :P
[15:19:31] <benh> I also don't have any certification, I sympathize~
[15:19:41] <eddyb> ~sympath
[15:19:59] *** Quits: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[15:20:01] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[15:20:22] <strcat> benh: https://en.wikipedia.org/wiki/Interix gcc 3.3!
[15:20:28] <bstrie> https://en.wikipedia.org/wiki/Unix-like
[15:20:45] <eddyb> MingGWStudio comes with 3.4 or something
[15:20:50] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[15:21:07] <strcat> bstrie: sure, but linux incorporates a lot of stuff from plan9 too
[15:21:12] <eddyb> thankfully my school replaced that crap with Code::Blocks which has a decently recent version
[15:21:18] <strcat> and has quite a lot that's not like POSIX/Unix at all
[15:21:53] <bstrie> again, that's why I asked for clarification :P
[15:22:34] <strcat> gcc that's not 4.8 is unusable imo
[15:22:36] <strcat> ;p
[15:22:50] <bstrie> I'm comfortable with saying that linux is a unix environment, and that windows isn't without something like cygwin or msys
[15:22:55] <strcat> the error messages are finally starting to approach usability by humans
[15:23:16] <strcat> bstrie: msys isn't a unix environment at all though
[15:23:21] <strcat> it's just some GNU tools *on windows*
[15:23:25] <benh> In my social bubble, unix pretty much means linux
[15:23:31] <bstrie> gnu tools, right, that's a unix environment :)
[15:23:36] <strcat> bstrie: it's not
[15:23:44] <benh> and I guess it's getting more acceptable in the wider linux ecosystem to decline portability
[15:23:47] *** Joins: moostik (Icedove@moz-63ED7231.w82-121.abo.wanadoo.fr)
[15:24:15] <strcat> bstrie: it's a toolchain inspired by unix toolchains
[15:24:26] <strcat> it's a tiny part of what the whole environment would be
[15:24:38] <strcat> and it's not POSIX conformant at all (intentionally)
[15:24:48] *** Quits: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca) (Quit: canhtak)
[15:24:50] <bstrie> I don't give two hoots about posix
[15:24:53] <strcat> probably why GNU stands for 'GNU's Not Unix' ;p
[15:25:20] <strcat> bstrie: inspired by Unix != Unix
[15:25:40] <bstrie> strcat: in PHP and javascript, inspired by Unix == Unix
[15:26:03] <strcat> equality challenged languages
[15:26:05] <strcat> ;p
[15:26:44] <strcat> you could just as easily say windows is unix-like
[15:26:56] <strcat> the socket API is right out of BSD
[15:27:01] <bjz_> what would `#define foo() (bar(), (baz())` expand to in C? `bar(); baz();`?
[15:27:56] <strcat> bjz_: you can ask `cpp` ;p
[15:28:10] <benh> Would the socket API look very different if it was invented today in linux?
[15:28:27] <strcat> benh: yes, linux already reinvented half of the APIs ;p
[15:28:56] <benh> i guess setsockopt would be called scntl or something??? I don't know anything about linux
[15:29:20] *** Joins: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP)
[15:30:59] <strcat> benh: maybe linux would have /net like plan9
[15:31:05] <strcat> who knows
[15:31:35] <strcat> it has the socket API because of historical momentum (and that's why POSIX standardized it)
[15:35:31] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[15:35:40] *** Quits: mib_jizm8n (Mibbit@moz-3213C615.wavecable.com) (Quit: http://www.mibbit.com ajax IRC Client)
[15:36:27] *** Quits: heftig (heftig@moz-4994C5AA.dip0.t-ipconnect.de) (Quit: Quitting)
[15:37:01] <comex> there's no way to explicitly drop a variable without letting it go out of scope?
[15:37:40] <strcat> comex: pass it by-value to a function
[15:37:42] *** Joins: DarkLinkXXXX (Mibbit@moz-3213C615.wavecable.com)
[15:37:52] <strcat> there's util::ignore which is just 'fn ignore<T>(_: T) {}'
[15:37:57] <comex> aha
[15:38:19] <DarkLinkXXXX> I have mingw installed in a nonstand location. Is that's causing rust to be "unable to locate component"?
[15:39:15] *** Quits: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP) (Ping timeout)
[15:39:18] *** Joins: GeneralMaximus (ankur@1FC1837.5B928161.D5D59AD9.IP)
[15:39:45] <bstrie> DarkLinkXXXX: never heard of that error before. it's possible, I suppose
[15:40:21] <DarkLinkXXXX> I'd suppose it'd help if it was in PATH. ^_^
[15:41:54] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[15:43:55] <strcat> comex: in theory 'let _ = foo;' is supposed to drop stuff immediately too but it's buggy
[15:44:05] *** Joins: ianj (ianjneu@moz-7140CF01.ccs.neu.edu)
[15:44:09] <strcat> and not really well specified yet.
[15:44:32] <bstrie> and that behavior is going away anyway, right?
[15:44:37] <bstrie> that theoretical behavior
[15:44:48] <benh> imo we ought to rename ignore and/or forget
[15:45:04] *** Quits: DarkLinkXXXX (Mibbit@moz-3213C615.wavecable.com) (Quit: http://www.mibbit.com ajax IRC Client)
[15:45:14] <benh> apart from the 'one of them is unsafe' thing it's not really clear which one omits cleanup
[15:45:31] <bstrie> imo we should rename them to zalgo-esque identifiers so that they are impossible to type and must be copy-pasted from the docs
[15:46:07] <benh> sounds like you're trying to sell an IDE!
[15:46:20] <comex> what is the purpose of #[unsafe_no_drop_flag] in Rc?
[15:46:21] <bstrie> automatic zalgo-completion!
[15:46:23] <strcat> benh: well it's clear by which is tagged unsafe
[15:46:40] <strcat> comex: atm rust adds a drop flag to types with custom dtors
[15:46:45] <strcat> to mark whether they are moved from
[15:46:56] <strcat> that omits it and zeroes the whole content instead
[15:47:07] <strcat> anyway the drop flag is possibly (likely?) going to go away
[15:47:22] <strcat> it's also how C++11 does it though. you have to mark something as moved from in the move ctor
[15:47:40] <benh> strcat: right now, does unsafe_no_drop_flag cause it to run the user code in the destructor multiple times on the same object or does it check whether it's zeroed the fields and decide not to run it sometimes?
[15:47:51] <mletterle> must. not. reply. on. mailing. list...
[15:47:58] *** Joins: victorporof (victorporo@8BCA500A.9A7C5F59.4A6B528C.IP)
[15:48:01] <strcat> benh: it runs the dtor N times
[15:48:03] *** Quits: moostik (Icedove@moz-63ED7231.w82-121.abo.wanadoo.fr) (Ping timeout)
[15:48:11] <comex> so it's just for efficiency?
[15:48:15] <strcat> comex: yes
[15:48:22] <comex> ok
[15:48:23] <strcat> it's to make it 1 word instead of 2
[15:48:23] <benh> isn't most of strcat's code? ;)
[15:49:17] <eddyb> <3 overefficient data structures :P
[15:49:32] *** Joins: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca)
[15:49:54] <strcat> if you want overefficient data structures, then go look at intrusive containers + intrusive reference counting
[15:49:54] *** Joins: josh (josh@DC98BC6D.96CB7DCC.284344F5.IP)
[15:50:02] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[15:50:10] <eddyb> strcat: oh, oh, I know :D
[15:50:17] *** Quits: Ms2ger (Ms2ger@moz-454C9175.ugent.be) (Ping timeout)
[15:50:21] <comex> those aren't overefficient
[15:50:23] <comex> those are nice
[15:50:25] <comex> :p
[15:50:39] <strcat> http://www.boost.org/doc/libs/1_55_0/libs/smart_ptr/intrusive_ptr.html I don't really understand why this needs to exist tbh.
[15:50:39] *** Joins: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP)
[15:50:58] <strcat> intrusive linked data structures at least have clear advantages...
[15:51:27] <bstrie> is that a pointer that stores the reference count in the unused bits of the pointer itself?
[15:51:34] <strcat> no
[15:51:37] <eddyb> strcat: I was almost proposing a "structure has field" generic type bound
[15:51:39] *** Quits: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP) (Ping timeout)
[15:51:50] *** Joins: moostik (Icedove@moz-63ED7231.w82-121.abo.wanadoo.fr)
[15:51:51] <bstrie> cuz I think that's what objective-c does
[15:52:11] <eddyb> strcat: you could totally make optionally-intrusive containers with that, couldn't you?
[15:52:12] <strcat> bstrie: yeah and obj-c is screwed when x86_64 moves to using more than 48-bit
[15:52:25] <eddyb> lol
[15:52:27] <strcat> and ARMv8
[15:52:31] <strcat> it's not 'reserved'
[15:52:36] <strcat> it's just not currently used
[15:52:38] <comex> and is there a way to unsafely call the destructor of something?
[15:52:41] <bstrie> strcat: bah, apple will just reinvent the architecture
[15:52:41] <strcat> it can be used in a future CPU revision
[15:52:52] <bstrie> problem solved
[15:52:54] <strcat> comex: read_ptr(&x) to copy it unsafely
[15:52:56] <bstrie> ...for apple hardware
[15:53:02] <strcat> comex: will optimize down to a dtor call if you don't do anything with it
[15:53:06] <bstrie> which is the only place obj-c is used
[15:53:16] <strcat> comex: ptr::read_ptr
[15:54:20] <strcat> meh
[15:54:28] <strcat> I'm going to end up making a useless Queue type
[15:54:36] <eddyb> I like what v8 does, since heap pointers are 4-byte-aligned or so, if the lowest bit is set, it can hold a 31-bit signed integer (a Smi)
[15:54:38] <strcat> code reuse plan not going well
[15:54:52] <eddyb> strcat: need moar abstractions
[15:55:15] <strcat> well I wanted to make my blocking concurrent queue code into an adaptor on top of any queue
[15:55:19] <strcat> but...
[15:55:26] <strcat> it's 10 lines of code
[15:55:28] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:55:43] <strcat> making the underlying code reusable is far more trouble than it's worth ;\
[15:56:02] <strcat> (it would be 9 lines of code if I decided to signal before unlocking the mutex ;p)
[15:56:08] *** Joins: marshall_law (marshall@BCC5EC56.B2070AF7.505F6A0C.IP)
[15:56:22] *** Joins: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP)
[15:56:43] *** Quits: josh (josh@DC98BC6D.96CB7DCC.284344F5.IP) (Quit: josh)
[15:56:52] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[15:57:07] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[15:57:08] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[15:59:23] <comex> strcat: are you sure that would actually optimize..?
[15:59:37] <comex> read_ptr's implementation uses copy_nonoverlapping_memory
[15:59:41] <strcat> comex: yes
[15:59:51] <strcat> copy_nonoverlapping_memory is LLVM's memcpy intrinsic
[16:00:04] <eddyb> memmove is copy_memory
[16:00:22] <SimonSapin> If I have a ~[T] where the empty vector is the common case, is it worth using Option<~[T]> instead (where None means the same as Some(~[])) to avoid alloc
[16:00:26] <SimonSapin> allocating?
[16:00:27] <comex> ok, thanks
[16:00:31] <eddyb> those intrinsics optimize to word-size loads and stores
[16:00:34] <strcat> SimonSapin: no, use a better vector implementation
[16:00:49] <strcat> SimonSapin: https://github.com/mozilla/rust/issues/8981
[16:00:58] <strcat> https://github.com/thestinger/rust-core/blob/master/core/vec.rs *shrug*
[16:01:08] <strcat> 7x faster push than ~[T] and it doesn't allocate for zero-size 
[16:01:47] <SimonSapin> interesting
[16:02:04] <strcat> only drawback: it doesn't support @
[16:02:34] <strcat> SimonSapin: libsyntax has OptVec and it makes me sad
[16:02:40] * benh is still confused that read_ptr takes a &mut ;)
[16:03:15] <eddyb> and Rc<Vec<T>> may be nasty - but I don't know of a better way to do that
[16:03:27] <strcat> eddyb: no better way, @[T] can't be resized
[16:03:30] <strcat> er
[16:03:34] <strcat> @mut [T] can't be resized*
[16:03:44] *** zz_kimundi is now known as kimundi
[16:03:45] <strcat> because resizing implies maybe moving the allocation
[16:03:51] <strcat> and there are a bunch of ptrs to it
[16:03:59] <strcat> need the extra level of indirection.
[16:04:20] <benh> sorry, *mut
[16:04:22] <strcat> eddyb: C++ has std::shared_ptr<T[]> as a special case
[16:04:24] <eddyb> so @Vec<T> would work, but not Vec<@T>?
[16:04:41] <strcat> eddyb: right
[16:04:43] <strcat> but...
[16:04:45] <bstrie> I want to write a rust ircbot, give it ops, and have it autokick anyone who uses the @ symbol
[16:04:49] *** Quits: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP) (Connection reset by peer)
[16:04:51] <strcat> the way I am taking rust-core, @ probably isn't going to work at all
[16:04:59] <benh> bstrie: it would just have kicked you!
[16:05:01] <strcat> allocators and so on
[16:05:05] <kimundi> benh: What'S confusing about that? read_ptr can move from the location, which mean the destructor can run for it, which means it can be mutated
[16:05:07] <bstrie> benh: it's too smart to kick me
[16:05:21] <strcat> kimundi: read_ptr doesn't move
[16:05:33] *** Quits: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[16:05:36] <strcat> pub unsafe fn read_ptr<T>(src: *T) -> T {
[16:05:47] <kimundi> strcat: Oh? I though I rembered seeing that in some low level impl to drop the elemnts of a raw allocated buffer
[16:05:48] <benh> pub unsafe fn read_ptr<T>(src: *mut T) -> T {
[16:06:00] <strcat> benh: well I'm pasting from core::mem::read_ptr ;p
[16:06:45] <kimundi> strcat: The libstd one does a memcopy of the destination... which can imply a move afaik?
[16:06:59] <benh> the whole call graph of read_ptr is a mess imo
[16:07:10] <benh> /// Coerce an immutable reference to be mutable.
[16:07:13] <benh> pub unsafe fn transmute_immut_unsafe<T,P:RawPtr<T>>(ptr: P) -> *T {
[16:07:15] <benh> does it now?
[16:07:18] *** Joins: boaz3 (boaz3@moz-5C189D89.red.bezeqint.net)
[16:07:20] <strcat> kimundi: not a move
[16:07:21] <SimonSapin> strcat: so what do you recommend doing in Servo today? Not worry about it and assume ~[T] will get a better implementation eventually?
[16:07:22] <strcat> it's an unsafe copy
[16:07:45] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[16:07:57] <kimundi> strcat: I don't see the difference
[16:08:06] <strcat> kimundi: a memcpy never mutates the source
[16:08:10] <benh> kimundi: it never calls the destructor on the operand
[16:08:10] <comex> so i have "let _: ~LcBox<T> = transmute(p);", where LcBox is #[unsafe_no_drop_flag]... shouldn't this not call the destructor, and only free it? yet it does call the destructor
[16:08:21] <benh> it's only the return value that might get destructed
[16:08:31] <strcat> comex: it should call the dtor
[16:08:38] <benh> (N times, in fact!)
[16:08:40] <boaz3> hey guys. something is strange. i am doing restc --test lib.rs but getting this error http://pastebin.com/kFt5Ncuv
[16:08:55] <comex> oh
[16:08:59] <comex> right
[16:09:10] <strcat> comex: #[unsafe_no_drop_flag] is a size hack, it just breaks cancelling cleanups on *some* moves
[16:09:13] <kimundi> strcat: But if the source is, eg, a owned ptr, then a memcpy means either the original destination or the new value becomes invalid
[16:09:18] <comex> so what i really want is a manual free
[16:09:26] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[16:09:31] <strcat> comex: can just call libc free
[16:09:34] <strcat> on ~
[16:09:43] <comex> is that guaranteed to work?
[16:09:43] <boaz3> anyone? http://pastebin.com/kFt5Ncuv
[16:09:45] <strcat> or rt::global_heap::exchange_free, which is libc free
[16:09:52] <comex> that sounds better
[16:09:54] <strcat> comex: well it always works as long as there's no @ in the ~
[16:09:59] <kimundi> strcat: If you want to keep the new value, then you effectivly moved from the destination, just without doing any cleanup there or ensuring the destination can not still be accessed
[16:10:06] <strcat> comex: exchange_free also assumes no @ in the ~
[16:10:18] <bstrie> boaz3: looking at it
[16:10:20] *** Joins: jordyd (jordyd@moz-D494A55.seg37.ucf.edu)
[16:10:21] <strcat> kimundi: the whole point of read_ptr is that it's an unsafe copy
[16:10:25] <strcat> it never mutates the source
[16:10:27] <eddyb> can I call a map from A<'self> to Option<A<'a>> (where A<'self> is an enum with &'self A<'self> references in some variants, and I return None for those variants) a "move"?
[16:10:27] <strcat> it should take *T
[16:10:54] <bstrie> boaz3: that's a pretty scary error, what platform and version of rust are you using?
[16:11:18] <boaz3> ubuntu13.04
[16:11:38] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[16:11:41] <boaz3> i have done ./configure, make and sudo make install from one account
[16:11:42] <comex> btw, is there a good reason for all this unsafe_destructor crap?
[16:11:48] <comex> why is a destructor any harder to make generic than any other method?
[16:11:50] <boaz3> but now i have made another account on linux to work on rust
[16:11:52] <strcat> comex: thank managed ptrs
[16:11:52] <boaz3> and it fails
[16:11:53] <comex> well, function
[16:12:02] <eddyb> comex: because it's not part of the AST
[16:12:02] <kimundi> strcat: The memory pointed at does not get mutated. That doesn't mean that the value pointed at doesn't get mutated
[16:12:06] <strcat> comex: cyclic dtors aren't safe
[16:12:10] <rofrol> hi
[16:12:11] <strcat> managed ptrs let you make cycles
[16:12:17] <strcat> generic dtor -> may contain managed ptr
[16:12:25] <strcat> kimundi: it doesn't get mutated
[16:12:29] <comex> ah ...
[16:12:32] <strcat> kimundi: read_ptr does a memcpy from it
[16:12:36] <eddyb> comex: or you're talking about a different kind of generic
[16:12:37] <strcat> it *never* mutates the source memory
[16:12:48] <rofrol> when I cat some file to sudoku.rs, rust complains that I haven't handled end-of-file case
[16:12:49] <strcat> and the dtor never mutates the source memory when it's called on the return value of read_ptr
[16:12:50] <comex> i guess that makes sense
[16:12:59] <comex> with deterministic destruction, it seems like "not part of the AST" is just a design flaw
[16:12:59] <strcat> it makes no sense for it to take *mut
[16:13:07] <comex> but with GC that's different
[16:13:10] <bstrie> boaz3: are you using 0.8 or are you using the git master?
[16:13:12] <kimundi> strcat: what if T = ~U ?
[16:13:26] <strcat> kimundi: it never mutates the memory pointed to by the ptr
[16:13:30] <strcat> there aren't exceptions
[16:13:30] <eddyb> *~U?
[16:13:32] <kimundi> I know.
[16:13:39] <boaz3> git master
[16:13:49] <boaz3> bstrie: git clone from rust
[16:13:52] <benh> then you have two ~U pointing to the same object
[16:13:57] <benh> and you better forget one
[16:13:59] <kimundi> But the ownership tree started by that value might well get mutated or dropped as sideeffect of making a unsafe value with that function
[16:14:10] <strcat> kimundi: which has nothing to do with the parameter
[16:14:27] <boaz3> bstrie: i am trying to understand what i have done wrong. i will let you know if i have made it.
[16:14:31] <strcat> it's entirely wrong to have it take *mut
[16:14:40] <boaz3> *if i have figured it out
[16:14:47] <kimundi> strcat: The way I see it, * and *mut do only convey intent anyway, in which case I think *mut is a better choice
[16:14:54] <strcat> kimundi: it has nothing to do with intent
[16:14:57] <strcat> it never mutates the memory
[16:15:02] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[16:15:02] *** ChanServ sets mode: +o tjc
[16:15:09] <strcat> the intent is never to mutate the memory
[16:15:24] <kimundi> Ah, whatever
[16:15:28] <strcat> the dtor isn't called on the memory pointed to by the *
[16:15:33] <eddyb> comex: strcat has a problem with Vec<T, Alloc> in rust-core, I think, rustc doesn't have enough type info for generic dtors (because they're not resolved properly as they're not part of the AST)
[16:15:35] <strcat> it's called on a copy of it
[16:15:39] <bstrie> boaz3: the test runner seems to work for me with a simple test case, let me know if you can minimize your error
[16:15:48] *** Quits: victorporof (victorporo@8BCA500A.9A7C5F59.4A6B528C.IP) (Connection reset by peer)
[16:15:54] * strcat shrugs
[16:16:13] <eddyb> strcat: what if you call the dtor on a raw copy of a ~ ptr?
[16:16:19] <strcat> hm?
[16:16:20] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[16:16:27] <strcat> we don't have a way to call a dtor on something
[16:16:35] <eddyb> I mean, trigger
[16:16:36] <boaz3> bstrie: i guess i know what i have done wrong.
[16:16:38] <strcat> you have to copy it and trust LLVM to optimize it down to that (it will)
[16:16:47] <strcat> eddyb: well it never mutates the original memory (the pointer)
[16:16:57] <eddyb> *mut ~T means a mutable T, I think
[16:17:02] <strcat> let y = read_ptr(&x)
[16:17:17] <strcat> drop receives a mutable ptr, it mutates y (or doesn't)
[16:17:24] <bstrie> boaz3: wonderful, happy that I was able to be of no help whatsoever :)
[16:17:33] <eddyb> strcat: it may mutate *x
[16:17:40] <strcat> eddyb: no, it can't
[16:17:43] <eddyb> strcat: and ~ inherits mutability
[16:17:45] <strcat> it doesn't even know the address of x
[16:17:48] <strcat> eddyb: doesn't matter
[16:17:55] <strcat> it doesn't know the address of what read_ptr read
[16:17:58] <strcat> it can't mutate it
[16:17:59] <boaz3> bstrie: i have cloned rust twice. each clone is at a different directory. in one i have compiled rust and installed it. in the other one i changed some rs files.
[16:18:08] <bstrie> ah, that could do it
[16:18:11] <eddyb> let x = ~5; read_ptr(&x)
[16:18:20] <strcat> so, inside x there is a ptr
[16:18:22] <strcat> &x is a ptr to a ptr
[16:18:24] <boaz3> bstrie: so i guess it fails due to lack of object files.
[16:18:27] <strcat> read_ptr returns a new ptr
[16:18:31] <boaz3> bstrie: yes - thanks :)
[16:18:31] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[16:18:33] <strcat> the dtor *cannot* mutate the old ptr
[16:18:45] <eddyb> both x and the result point to the same data on heap
[16:18:55] <strcat> that's not what read_ptr copied
[16:18:58] <eddyb> dropping it will invalidate x
[16:19:10] <eddyb> strcat: then what did it copy?
[16:19:13] <strcat> the pointer
[16:19:22] <strcat> read_ptr copies a block of memory
[16:19:25] <eddyb> the pointer is an owned one
[16:19:25] <strcat> the block of memory was 1 word
[16:19:28] <strcat> it contained a ptr
[16:19:34] <strcat> it doesn't mutate *that* ptr
[16:19:38] <eddyb> dropping the pointer will drop the pointed data
[16:19:47] <strcat> you can't apply high level semantics to a low-level raw ptr function
[16:19:54] <strcat> raw ptrs do not express or not express ownership
[16:19:56] <strcat> they are raw
[16:20:03] <eddyb> strcat: that's why I wasn't sure kimundi was right, although I understood his argument
[16:20:04] <strcat> they don't enforce any semantics
[16:20:34] <strcat> *T is no more similar to &T than it is to ~T
[16:20:41] <benh> strcat: maybe we should just not have non-*mut * pointers
[16:20:55] <benh> it doesn't really seem to encode anything useful in the rust terminology?
[16:20:57] <strcat> &T is a view, ~T is ownership, *T is anything
[16:21:05] <strcat> benh: it's useful
[16:21:35] <strcat> the stdlib is full of incorrect usage of mutability that will break when we do alias analysis on &/&mut
[16:21:44] <strcat> a lot of it is because it doesn't use */*mut properly and it bubbles up
[16:21:52] <eddyb> rusti: let x = ~"foobar"; unsafe {let y = ::std::ptr::read_ptr(&x);} let z = ~"bazboo"; (x, z)
[16:21:53] -rusti- pastebinned 8 lines of output: http://sprunge.us/cNKg
[16:21:55] <strcat> I happen to use it properly in my own code and will sorely miss it if it is removed
[16:22:10] <strcat> *const is useful in C++, even though it doesn't enforce full memory safety
[16:22:11] <kimundi> would we ever do alias analysis depending mutability of a raw pointer?
[16:22:16] <strcat> kimundi: that's not the point
[16:22:16] <benh> What does it buy you in alias analysis?
[16:22:26] <strcat> &mut coerces to *mut
[16:22:29] <kimundi> strcat: I know, it is a question :P
[16:22:31] <strcat> & does not coerce to *mut
[16:22:32] <eddyb> rusti: let mut x = ~"foobar"; unsafe {let y = ::std::ptr::read_ptr(&x);} let z = ~"bazboo"; (x, z)
[16:22:33] -rusti- pastebinned 8 lines of output: http://sprunge.us/YUVN
[16:22:44] <eddyb> rusti: let mut x = ~"foobar"; unsafe {let y = ::std::ptr::read_ptr(&mut x);} let z = ~"bazboo"; (x, z)
[16:22:45] -rusti- pastebinned 7 lines of output: http://sprunge.us/jCSd
[16:22:48] <strcat> good luck writing correct code with only * and no *mut
[16:22:53] <strcat> you'll end up like the stdlib where it's all wrong
[16:22:56] <benh> ugh, idgi :(
[16:23:08] <strcat> benh: fn foo(x: *mut int);
[16:23:09] <eddyb> strcat: hah, I broke it =))
[16:23:18] <strcat> benh: now, you have some unsafe block
[16:23:25] <eddyb> strcat: it's actually funny seeing it happen
[16:23:27] <strcat> let x = 5; foo(&x) /* will not work */
[16:23:34] <strcat> let mut x = 5; foo(&mut x) /* will work */
[16:23:38] <strcat> it has value in semantics for humans
[16:23:44] <strcat> humans are not good at writing unsafe code
[16:23:46] <strcat> *mut makes it easier
[16:23:55] <strcat> the stdlib doesn't use *mut properly, doesn't mean it's not useful
[16:23:56] <eddyb> rusti: let mut x = ~"foobar"; unsafe {let _y = ::std::ptr::read_ptr(&mut x);} let z = ~[49, 50, 51, 52, 53, 56]; (x, z)
[16:23:57] -rusti- (~"foobar", ~[49, 50, 51, 52, 53, 56])
[16:23:57] -rusti- task <unnamed> failed at 'called `Option::take_unwrap()` on a `None` value', /build/rust/src/rust-0.8/src/libstd/option.rs:336
[16:23:57] -rusti- terminate called after throwing an instance of 'unsigned long'
[16:23:57] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[16:24:03] <strcat> I use it properly in rust-core and it helps me write correct code
[16:24:05] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Ping timeout)
[16:24:12] <benh> Does *T imply that no one else is gonna have a *mut to the same object or something?
[16:24:19] <strcat> benh: no
[16:24:24] <kimundi> strcat: I think the confusion I and other have is simply that we are not sure which ruleset to follow for deciding whether something should be * and *mut, and how hard the consequences are if it'S wrong
[16:24:26] <eddyb> rusti: let mut x = ~"foobar"; unsafe {let _y = ::std::ptr::read_ptr(&mut x);} let z = ~"fail12345"; (x, z)
[16:24:27] -rusti- (~"fail12345", ~"fail12345")
[16:24:27] -rusti- task <unnamed> failed at 'called `Option::take_unwrap()` on a `None` value', /build/rust/src/rust-0.8/src/libstd/option.rs:336
[16:24:27] -rusti- terminate called after throwing an instance of 'unsigned long'
[16:24:27] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[16:24:32] <benh> is it C const*?
[16:24:38] <strcat> benh: that's how I use it
[16:24:42] <benh> is it just useful on function parameter lists to specify what you're going to write to?
[16:24:55] <strcat> benh: it's useful on foreign functions
[16:24:59] <strcat> to mark which parameters are const or not
[16:25:05] <strcat> and then it helps you make the right variables mutable
[16:25:11] <strcat> otherwise there is *no way* you are going to do it right
[16:25:16] <strcat> rustc will happily let you write
[16:25:25] <strcat> let out = uninit(); foo(&out)
[16:25:28] <strcat> where it's an output parameter
[16:25:41] <strcat> and that's incorrect - it *will* break if we tell LLVM about mutability
[16:25:52] <strcat> you have a borrowed ptr you're writing into
[16:25:57] <strcat> you have an immutable var you're writing into
[16:26:11] <strcat> the raw pointer being incorrect doesn't necessarily matter, but it *caused* you to make those 2 mistakes
[16:26:23] *** Joins: josh (josh@DC98BC6D.96CB7DCC.284344F5.IP)
[16:26:23] <strcat> obviously C/C++ and D don't have const for fun
[16:26:26] *** pmoore|away is now known as pmoore
[16:26:27] <strcat> they have it because it's useful
[16:26:28] <eddyb> **caused
[16:26:39] *** Quits: josh (josh@DC98BC6D.96CB7DCC.284344F5.IP) (Quit: josh)
[16:26:40] <strcat> there isn't just
[16:26:43] <strcat> 'memory unsafe'
[16:26:45] <strcat> and 'memory safe'
[16:26:54] *** Quits: GeneralMaximus (ankur@1FC1837.5B928161.D5D59AD9.IP) (Quit: Computer has gone to sleep.)
[16:27:03] <kimundi> strcat: So, what you're saying is that that case would be caught by only allowing to coerce & to * and &mut to *mut ?
[16:27:14] <strcat> that's how it works
[16:27:24] <strcat> &T doesn't coerce to *mut T
[16:27:31] <kimundi> See, I didn't know that at all :P
[16:28:10] <kimundi> Last I knew, * and *mut where interchangable and the annotation just there because we had it on the safe pointers
[16:28:29] <strcat> they're not
[16:28:35] <strcat> the compiler won't let you mutate through *
[16:28:38] <strcat> it lets you mutate through *mut
[16:28:44] <strcat> it won't let you coerce &T to *mut
[16:28:47] <eddyb> I know that very well :P
[16:28:49] <benh> strcat: i think i just want to say that it's not really obvious from the enforced mutability in most of rust what the right way to use */*mut is
[16:28:50] <strcat> it's incredibly helpful
[16:29:00] <eddyb> &mut everywhere
[16:29:23] <strcat> benh: well, it makes sense to me
[16:29:25] <kimundi> If have a correlation between unsafe ptr mutability and safe ptr mutability, and it leads to people writing more correct code, then it makes perfect sense to seperate them properly
[16:29:28] <strcat> I use them as C++ const
[16:29:31] <strcat> and I assume the same rules
[16:29:48] *** Joins: robert (uid15951@moz-A42E5B7B.irccloud.com)
[16:29:54] <strcat> kimundi: if you mark every single C API properly
[16:30:00] <benh> I guess that mostly works for me
[16:30:01] <strcat> it greatly helps you use them correctly
[16:30:04] <eddyb> read_ptr with immut *T should be fine, as side effects are only triggered by unsafe uses of read_ptr, and it's marked as unsafe anyway
[16:30:17] <benh> strcat: of course the C APIs already don't mark themselves correctly ;)
[16:30:25] <benh> like your cousin strstr
[16:30:33] <eddyb> (and those side effects are outside read_ptr itself 
[16:30:42] *** Joins: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de)
[16:30:42] <strcat> benh: isn't that proper? it takes 2 const ptrs
[16:30:49] <benh> strcat: but returns a non-const ptr
[16:30:50] <strcat>        char *strstr(const char *haystack, const char *needle);
[16:31:23] <strcat> benh: true ;p
[16:31:27] <benh> so you can use it to wash a const ptr that you could from your caller into a non-const ptr and mutate it and the compiler doesn't catch you!
[16:32:04] <benh> let const_cast = |x| strstr(x, x) :D
[16:32:06] <strcat> benh: https://www.securecoding.cert.org/confluence/display/seccode/EXP05-C.+Do+not+cast+away+a+const+qualification there's a list! ;p
[16:32:23] *** Joins: g3orge (g3orge@moz-369F78A7.access.hol.gr)
[16:32:25] <strcat> anyway libc sucks
[16:32:26] <kimundi> strcat: Yeah, I see that now, I just assumed that we had only hard limits on using mutability correctly for non-raw ptrs, which I now know is wrong :P
[16:32:32] <strcat> all the str* functions are useless garbage
[16:32:39] <strcat> should use memcpy, memmove and memcmp
[16:32:48] <strcat> via a proper string type with a length
[16:32:51] <mmalecki> is there an https library for rust?
[16:33:03] <strcat> it's faster, higher-level and supports all of UTF-8 (including \0!)
[16:33:09] <kimundi> rusti: let x = &5; let y = x as *T; *y = 10; x
[16:33:10] -rusti- <anon>:9:35: 9:36 error: use of undeclared type name `T`
[16:33:10] -rusti- <anon>:9          let x = &5; let y = x as *T; *y = 10; x
[16:33:10] -rusti-                                             ^
[16:33:10] -rusti- error: aborting due to previous error
[16:33:10] -rusti- application terminated with error code 101
[16:33:15] <kimundi> rusti: let x = &5; let y = x as *int; *y = 10; x
[16:33:16] -rusti- <anon>:9:40: 9:42 error: dereference of unsafe pointer requires unsafe function or block
[16:33:16] -rusti- <anon>:9          let x = &5; let y = x as *int; *y = 10; x
[16:33:16] -rusti-                                                  ^~
[16:33:18] -rusti- error: aborting due to previous error
[16:33:20] -rusti- application terminated with error code 101
[16:33:24] <benh> iirc someone was working on https support for rust-http long enough ago that they could reasonably be don by now...
[16:33:34] <kimundi> rusti: let x = &5; let y = x as *int; unsafe {*y = 10;}; x
[16:33:35] -rusti- pastebinned 19 lines of output: http://sprunge.us/cgYg
[16:33:51] <kimundi> rusti: let x = &5; let y = x as *int; unsafe {*y = 10;}; *x
[16:33:52] -rusti- <anon>:9:48: 9:50 error: cannot assign to immutable dereference of * pointer
[16:33:52] -rusti- <anon>:9          let x = &5; let y = x as *int; unsafe {*y = 10;}; *x
[16:33:52] -rusti-                                                          ^~
[16:33:53] -rusti- error: aborting due to previous error
[16:33:53] -rusti- application terminated with error code 101
[16:33:54] <benh> hm :/
[16:34:18] <kimundi> Okay, I'm satisfied :)
[16:34:22] <benh> strcat: alas, there's no... memcat
[16:34:24] *** Joins: mortisha (Mibbit@D6CE9FC9.FA29C3C7.12648089.IP)
[16:34:31] <strcat> benh: memcpy works
[16:34:34] <strcat> ;p
[16:34:41] *** Quits: sigma (sigma@moz-F17CE309.range86-143.btcentralplus.com) (Ping timeout)
[16:35:20] <strcat> you can set free the cats when you know how long everything is in advance
[16:35:47] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:35:55] <mortisha> why can't i do something link this "let n = 10u; let mut primes: ~[int] = ~[start, ..n];"?
[16:37:01] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[16:37:17] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:37:52] *** Joins: tulloch (tulloch@moz-1EFCD24D.nat.csx.cam.ac.uk)
[16:37:52] <benh> no one was sufficiently convinced that that's necessary to implement it?
[16:38:06] <benh> there's vec::from_elem(start, n), or (n, start), or something of the sort
[16:38:15] <strcat> benh: I would be fine with *T being mutable if we got *const
[16:38:30] <strcat> we used to have *const :(
[16:38:45] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[16:38:51] <kimundi> rusti: let n = 10u; let mut primes: ~[int] = ~[0, ..n]; primes
[16:38:52] -rusti- <anon>:9:54: 9:55 error: expected constant integer for repeat count but found variable
[16:38:52] -rusti- <anon>:9          let n = 10u; let mut primes: ~[int] = ~[0, ..n]; primes
[16:38:52] -rusti-                                                                ^
[16:38:52] -rusti- error: aborting due to previous error
[16:38:52] -rusti- application terminated with error code 101
[16:39:05] *** Joins: Janko (chatzilla@D9AEFC3E.9E37BD61.9C3D12F2.IP)
[16:39:34] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[16:39:46] <kimundi> mortisha: A problem of rusts grammar for fixed-length-vector constructor expressions. Only a constant can go there
[16:39:53] <eddyb> alloca-like fixed vectors should work, with some constraints
[16:40:08] <kimundi> mortisha: FOr a dynamic value of repeats of the start value, we have vec::from_elem()
[16:40:30] <kimundi> rusti: let n = 10u; let mut primes: ~[int] = std::vec::from_elem(0, n); primes
[16:40:30] -rusti- <anon>:9:47: 9:73 error: mismatched types: expected `~[int]` but found `~[uint]` (expected int but found uint)
[16:40:31] -rusti- <anon>:9          let n = 10u; let mut primes: ~[int] = std::vec::from_elem(0, n); primes
[16:40:31] -rusti-                                                         ^~~~~~~~~~~~~~~~~~~~~~~~~~
[16:40:31] -rusti- error: aborting due to previous error
[16:40:32] -rusti- application terminated with error code 101
[16:40:36] <kimundi> rusti: let n = 10u; let mut primes: ~[int] = std::vec::from_elem(0i, n); primes
[16:40:36] -rusti- pastebinned 8 lines of output: http://sprunge.us/QMYh
[16:40:38] *** Quits: Janko (chatzilla@D9AEFC3E.9E37BD61.9C3D12F2.IP) (Client exited)
[16:40:43] <eddyb> (is LLVM alloca considered unsafe?)
[16:40:59] <strcat> alloca is how you allocate a local variable
[16:41:07] <strcat> LLVM alloca != C alloca
[16:41:14] <kimundi> rusti: let n = 10u; let mut primes: ~[int] = std::vec::from_elem(n, 0i); primes
[16:41:15] -rusti- <anon>:9:30: 9:36 warning: variable does not need to be mutable [-W unused-mut (default)]
[16:41:15] -rusti- <anon>:9          let n = 10u; let mut primes: ~[int] = std::vec::from_elem(n, 0i); primes
[16:41:15] -rusti-                                        ^~~~~~
[16:41:15] -rusti- ~[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[16:41:18] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[16:41:25] <kimundi> mortisha: ^
[16:41:32] <eddyb> strcat: can it take a variable size?
[16:41:35] <strcat> eddyb: no
[16:41:47] <eddyb> I was hoping it was some safer version :-<
[16:41:53] <strcat> there is a way to implement c99 variable length arrays with LLVM
[16:42:00] <strcat> (or the non-standard alloca function)
[16:42:10] *** Joins: amro (quassel@moz-17EA8511.customers.ownit.se)
[16:42:21] <bstrie> does find_or_insert on hashmaps require its value to be copied? http://static.rust-lang.org/doc/0.8/std/hashmap/struct.HashMap.html#fn.find_or_insert
[16:42:35] <strcat> eddyb: http://llvm.org/docs/LangRef.html#llvm-stacksave-intrinsic
[16:42:52] <eddyb> ooh, explicit stack frame manipulation, nice
[16:42:52] <strcat> bstrie: hm?
[16:42:53] <bstrie> this guy on the internet is convinced that rust is slow because this one method forces a copy
[16:43:00] <strcat> who?
[16:43:00] <bstrie> allegedly, I can't tell
[16:43:16] <strcat> bstrie: rust doesn't have copy constructors
[16:43:24] <bstrie> strcat: http://cananian.livejournal.com/69096.html
[16:43:35] <bstrie> strcat: follow-up: https://news.ycombinator.com/item?id=6766437
[16:43:39] <eddyb> inlining should make it not require an expensive copy
[16:43:46] <eddyb> bstrie: oh, that cananian guy again?
[16:43:56] <bstrie> eddyb: well, this is the same article
[16:44:04] <bstrie> that made the rounds yesterday
[16:44:04] <strcat> bstrie: he's complaining about it taking it by-value
[16:44:04] *** Quits: mortisha (Mibbit@D6CE9FC9.FA29C3C7.12648089.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:44:07] <strcat> and it's potentially large
[16:44:15] <strcat> anyway this article is BS
[16:44:18] <bstrie> haha
[16:44:19] <strcat> he doesn't understand rust, or C
[16:44:50] <bstrie> if you say he doesn't understand C, then I trust your judgment
[16:44:57] *** Joins: jstevans (Instantbir@66F29BD1.BB5A23D8.DDE5D3F6.IP)
[16:44:58] <strcat> C11/C++11 only have threads - no data parallelism, I guess C doesn't support parallel code
[16:45:01] <strcat> so it's "slow"
[16:45:04] <strcat> that makes no sense
[16:45:08] *** Joins: sigma (sigma@moz-D4F04D48.range86-174.btcentralplus.com)
[16:45:27] <strcat> how many languages have data parallelism support? is it really surprising that an alpha version of a language doesn't have it yet?
[16:45:37] <strcat> and it does have shared memory
[16:45:37] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Ping timeout)
[16:45:50] <strcat> there is 'static mut', there is Arc/MutexArc
[16:46:07] *** jorendorff is now known as jorendorff_away
[16:46:29] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[16:46:32] *** Joins: jstevans1 (Instantbir@66F29BD1.BB5A23D8.DDE5D3F6.IP)
[16:46:44] *** Quits: jstevans (Instantbir@66F29BD1.BB5A23D8.DDE5D3F6.IP) (Ping timeout)
[16:47:47] <bstrie> strcat: in one of his other blog posts, he mentioned how he applied for a job working on servo and then was rejected for "knowing rust too well"
[16:48:38] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[16:48:43] <kmapped> data parallelism = support for SIMD, etc?
[16:50:17] *** Joins: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com)
[16:51:13] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[16:51:25] *** Joins: Janko (chatzilla@D9AEFC3E.9E37BD61.9C3D12F2.IP)
[16:51:41] *** Quits: boaz3 (boaz3@moz-5C189D89.red.bezeqint.net) (Quit: Leaving)
[16:51:43] <eddyb> strcat: stacksave/stackrestore look safe, compared to the implicit restore-at-scope-exit that's used for alloca
[16:52:07] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Quit: leaving)
[16:52:29] <bstrie> kmapped: in general I believe that's what people mean, but I think SIMD is just one kind of data parallelism
[16:52:36] <bstrie> kmapped: https://en.wikipedia.org/wiki/Data_parallelism
[16:52:43] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:52:51] <FreeFull> Haskell has some data-parallel stuff
[16:54:35] *** Quits: jstevans1 (Instantbir@66F29BD1.BB5A23D8.DDE5D3F6.IP) (Ping timeout)
[16:55:10] *** Joins: skeet70 (skeet70@moz-496E571A.msu.montana.edu)
[16:55:35] <benh> What stuff doesn't haskell have some of at this point? :)
[16:55:58] <bstrie> strings? does it have strings yet?
[16:55:58] <eddyb> benh: I heard some haskell guys dream of a completed Idris
[16:56:14] <benh> bstrie: like three of four flavors just in the standard distribution!
[16:56:41] <eddyb> nmatsakis has posts about ParallelArray in JS, I think, that model would be interesting to see in Rust (parallel iterators for closures that don't have mutable access to their patern scope(s), I guess)
[16:56:45] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[16:57:04] <bstrie> does borrowing a ~foo via &*foo actually incur a deref?
[16:57:12] <bstrie> or is it guaranteed to get optimized away
[16:57:14] <kimundi> bstrie: No
[16:58:01] <strcat> kmapped: parallel map/reduce, partitioning up arrays into slices and being able to pass them to operate on them in parallel, etc.
[16:58:08] <kimundi> bstrie: I don'T know about guarantees, but it should get optimized away if it starts as a explicit deref at all
[16:58:29] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[16:58:40] <strcat> kmapped: fork-join is basically support for sending little tasks to a thread pool and retrieving the result
[16:59:21] <strcat> and rust could support sending &/&mut to parallel threads that way
[16:59:22] <benh> rusti: let p: ~int = unsafe { std::cast::transmute(0) }; let _r = &*p; 
[16:59:22] -rusti- ()
[16:59:42] <strcat> since it enforces that &T (for Freeze types) is immutable and &mut doesn't alias & or &mut
[16:59:57] <strcat> exactly what you need for good alias analysis and data parallelism.
[17:00:01] <eddyb> rusti: let p: ~int = unsafe { std::cast::transmute(0) }; let _r = *p; 
[17:00:02] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[17:00:28] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[17:01:20] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[17:02:08] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[17:02:38] *** Quits: DeTeam (DeTeam@92C799C.31715274.F5F3AF2.IP) (Quit: DeTeam)
[17:04:16] <eddyb> I would expect that to be optimized away at some --opt-level
[17:06:52] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[17:09:24] *** Quits: skeet70 (skeet70@moz-496E571A.msu.montana.edu) (Quit: Textual IRC Client: www.textualapp.com)
[17:12:27] *** Quits: lfox (lfox@moz-861E573F.nyc.biz.rr.com) (Quit: ZZZzzz…)
[17:12:32] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[17:15:08] *** Joins: bungoman (bungoman@moz-76E7E508.ptr.richards.com)
[17:17:06] *** Quits: fmtq (fmt@moz-5769BD38.static.tpgi.com.au) (Ping timeout)
[17:18:38] *** Joins: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP)
[17:19:31] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[17:20:12] <bungoman> I'm extremely new to Rust, so apologies if this is a silly/frequent question with an obvious answer (I'm at the point where I don't even know where to look for answers to these kinds of questions yet): was the vector position function removed from the language? Specifically this one: http://static.rust-lang.org/doc/0.5/core/vec.html#function-position I see that it's the documentation for 0.5, which is pretty old by now, but I can't fin
[17:20:12] <bungoman> d any mention of it in the 0.8 documentation, nor can I find any clear reference to it being removed. If it's simply been renamed or changed to be used differently is there any documentation or examples out there?
[17:20:27] <strcat> yes it was removed
[17:20:32] <strcat> rust uses composable iterators now
[17:21:00] <strcat> http://static.rust-lang.org/doc/master/tutorial-container.html#iterators
[17:21:06] <strcat> http://static.rust-lang.org/doc/master/std/iter/trait.Iterator.html
[17:21:43] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[17:22:47] *** Joins: fmtq (fmt@moz-5769BD38.static.tpgi.com.au)
[17:23:26] *** Joins: eholk (eholk@moz-4999788.public.wayport.net)
[17:24:42] <bungoman> Another silly question. I see that's the documentation for master. Is that in 0.8? Either way, I take it the idea is to use these to do the sort of things like the old position function. Correct?
[17:24:58] *** Quits: fmtq (fmt@moz-5769BD38.static.tpgi.com.au) (Ping timeout)
[17:25:15] <strcat> there's a position method on iterators
[17:25:26] <bungoman> Derp. Didn't see it.
[17:25:30] <strcat> master is ahead of 0.8, but all of this is in 0.8
[17:25:45] <strcat> rusti: range(0, 10).position(|&x| x == 5)
[17:25:46] -rusti- <anon>:9:32: 9:34 error: mismatched types: expected `int` but found an &-pointer pattern
[17:25:46] -rusti- <anon>:9          range(0, 10).position(|&x| x == 5)
[17:25:46] -rusti-                                          ^~
[17:25:46] -rusti- error: aborting due to previous error
[17:25:46] -rusti- application terminated with error code 101
[17:25:49] <strcat> rusti: range(0, 10).position(|x| x == 5)
[17:25:49] -rusti- Some(5u)
[17:25:56] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[17:26:20] <strcat> rusti: range(0, 10).map(|x| x * 2).fold(0, |a, b| a + b)
[17:26:21] -rusti- 90
[17:26:35] <bungoman> Ahh. Cool.
[17:26:51] <bungoman> Just to give you an idea of how new I am. I had no idea about rusti until just now.
[17:26:58] <strcat> ;)
[17:27:47] <bungoman> Thanks a ton. I think I at least know where I should be looking now when I run into problems.
[17:28:39] *** Quits: huseby (huseby@moz-9127FDEC.torservers.net) (Quit: Leaving)
[17:29:22] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[17:29:30] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[17:29:30] *** ChanServ sets mode: +o pnkfelix
[17:30:00] <cmr> Damn
[17:30:13] <cmr> That's the first time #rust has filled my IRC buffer while I was away
[17:30:32] <cmr> Lots of interesting conversations, too!
[17:30:38] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[17:30:45] *** Joins: maxiepoo_ (Max@moz-DEDB4821.nuwlan.northwestern.edu)
[17:30:47] <cmr> bstrie: I'm beginning to think a "this minute in rust" wouldn't be bad ;p
[17:31:47] *** Quits: Ferreus (ferreus@moz-67D9B438.dip0.t-ipconnect.de) (Ping timeout)
[17:32:42] *** Quits: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP) (Quit: brendan)
[17:33:40] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[17:34:09] *** Joins: _lfox (lfox@moz-861E573F.nyc.biz.rr.com)
[17:34:15] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[17:35:20] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Ping timeout)
[17:35:43] *** Joins: peterdn (chatzilla@moz-30BAAE88.as13285.net)
[17:35:54] *** Quits: Janko (chatzilla@D9AEFC3E.9E37BD61.9C3D12F2.IP) (Client exited)
[17:36:36] *** Joins: fmtq (fmt@moz-5769BD38.static.tpgi.com.au)
[17:36:38] *** Quits: tulloch (tulloch@moz-1EFCD24D.nat.csx.cam.ac.uk) (Ping timeout)
[17:37:52] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:37:54] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[17:38:16] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:40:08] *** Joins: beifeng (Mibbit@32B41A.FA7FF645.C7DB8B78.IP)
[17:42:08] *** Quits: sigma (sigma@moz-D4F04D48.range86-174.btcentralplus.com) (Client exited)
[17:43:16] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[17:45:52] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[17:47:26] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[17:47:26] *** ChanServ sets mode: +ao brson brson
[17:52:05] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[17:52:10] *** Quits: mimcpher (mimcpher@moz-345B5EBA.csclub.uwaterloo.ca) (Quit: leaving)
[17:53:54] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[17:54:52] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[17:55:06] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[17:55:12] *** Joins: huseby (huseby@A083BCB.AAB185EE.9D625D35.IP)
[17:55:31] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[17:58:06] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[17:58:21] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:59:59] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[18:01:16] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[18:02:02] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[18:02:30] *** Joins: jgilbert (jgilbert@moz-4C088FCE.hsd1.ca.comcast.net)
[18:02:48] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[18:03:12] *** Joins: jstevans (Instantbir@BB601205.63B79338.DDE5D3F6.IP)
[18:03:50] <eddyb> rusti: let x = &5u; let y = &Some(x); y
[18:03:51] -rusti- pastebinned 30 lines of output: http://sprunge.us/EXgI
[18:03:54] <eddyb> rusti: let x = &5u; let y = &Some(x); *y
[18:03:55] *** Quits: mrshankly (mrshankly@3EE34383.CE0EEBAE.806C54C8.IP) (Quit: leaving)
[18:03:55] -rusti- pastebinned 16 lines of output: http://sprunge.us/TPEZ
[18:05:58] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[18:06:10] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:07:20] <mark_edward> is rust fast yet?
[18:07:51] <cmr> mark_edward: arguably, yes.
[18:07:55] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:08:03] <strcat> rust the language is ;p
[18:08:06] *** Joins: fiirhok (fiirhok@EEC1213C.4468D718.41AEFB3C.IP)
[18:08:06] <cmr> rustc sure ain't
[18:08:09] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[18:08:14] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[18:08:14] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:08:55] <mark_edward> cmr, are there any recent benchmarks? a comparison of say, rust 0.6, master, and would be awesome
[18:09:01] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:09:07] <strcat> mark_edward: benchmarks of what?
[18:09:12] <strcat> the language doesn't really include much
[18:09:15] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[18:09:22] <strcat> the stdlib has a lot, but the stdlib doesn't really perform well
[18:09:37] <strcat> I don't think there are any big flaws in the language, as in nothing in the language performs worse than C/C++
[18:09:58] <strcat> I know that everything in rust-core performs at least as well as libc++/libstdc++ so far, for example
[18:10:40] <Sharp> (Thanks, LLVM!)
[18:11:08] *** Joins: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP)
[18:11:42] <strcat> the only thing we don't have is type-based alias analysis (although we do mark ~ params/returns noalias) but that rarely helps
[18:11:56] <mark_edward> strcat, but like the stdlib is crucial! for example, i was looking at your stuff about the vector performance. vectors are so fundamental, they need to be as fast as C++ std::Vector
[18:12:08] <strcat> rust-core has a faster vector than C++
[18:12:24] <Sharp> Wait, type-based alias analysis?  How does that work?
[18:12:32] <strcat> Sharp: C has arbitrary type punning rules
[18:12:38] <strcat> it's unsafe
[18:12:47] <strcat> rust has actual rules it can enforce
[18:12:48] <mark_edward> can you make a PR with your impl? for language like rust is speed is king, safety the suzerain
[18:12:59] <Sharp> Yeah, that's what I was thinking
[18:13:02] <Sharp> It wasn't clear to me how that could be safe
[18:13:04] <strcat> Sharp: for example, &mut doesn't alias another &mut or an &
[18:13:15] <strcat> &T where T is Freeze is guaranteed to be immutable
[18:13:26] *** Joins: notmatt (notmatt@FC7F938D.DD50E21A.47C41102.IP)
[18:13:34] <strcat> in LLVM terms, two pointers don't alias if writes through one can't be seen through the other
[18:13:38] *** Quits: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP) (Ping timeout)
[18:13:40] <Sharp> Right, but in C you can't actually guarantee that
[18:13:44] <strcat> so immutable == non-aliasing (even if they point to the same memory)
[18:13:51] <strcat> Sharp: sure, but C has undef behaviour for lots of stuff
[18:13:56] <Sharp> Haha, fair enough.
[18:14:02] <strcat> Sharp: ptr arith past the end of an object (more than a byte) is undefined
[18:14:08] <strcat> doesn't enforce that in any way
[18:14:21] <Sharp> But I thought you had to explicitly tell C that two pointers don't alias each other
[18:14:22] <strcat> it's not just *deref* of that ptr that's undef, calculating it is
[18:14:27] <strcat> Sharp: not necessarily
[18:14:32] <strcat> restrict is a strong way of marking that
[18:14:35] <Sharp> Right.
[18:14:37] <strcat> but type punning rules are there
[18:14:51] <strcat> Sharp: you can't take an array of integers and use it as an array of doubles
[18:14:57] <strcat> it's undef behaviour
[18:15:06] <strcat> you can use an array of anything as an array of chars
[18:15:11] <strcat> or view a struct as chars
[18:15:19] <Sharp> "Can't" in what sense?  It wouldn't *work* but I imagine C will let me typecast it.
[18:15:22] <strcat> char is the magical may-alias-anything type
[18:15:27] <strcat> Sharp: C won't
[18:15:32] <Sharp> Huh, really?
[18:15:33] <strcat> if you invoke undefined behaviour it's not C
[18:15:37] <strcat> Sharp: the compiler won't stop you
[18:15:42] <Sharp> Oh.  Oh, I see.
[18:15:50] <strcat> C doesn't provide a set of rules to stop undefined behaviour, it's not something you can actually do in all cases
[18:15:58] <strcat> but it does say certain things are *not C*
[18:16:03] <mark_edward> strcat, have you talked to people about  getting your vector impl into rust?
[18:16:06] <strcat> and the programmer has to not do them
[18:16:23] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[18:16:24] <strcat> mark_edward: I'm not really interested in doing a huge amount of work to make ~[T] use a different representation in some cases
[18:16:26] <Sharp> Or else it's not C, yes.  I see.
[18:16:34] <strcat> Sharp: anyway that's C logic for you
[18:16:39] <strcat> INT_MAX + 1 is not C
[18:17:07] <Sharp> Is there an implementation where INT_MAX + 1 isn't 0?
[18:17:24] <strcat> Sharp: you mean INT_MIN?
[18:17:26] <strcat> sure
[18:17:28] <strcat> LLVM and gcc
[18:17:33] <strcat> both explicitly consider signed int overflow in C to be undef
[18:17:36] <Sharp> Er, yes, stupid 2's complement.
[18:17:42] <strcat> Sharp: it's not about the representation
[18:17:46] <strcat> they consider it undef
[18:17:52] <strcat> if you pass -fwrapv, they wrap
[18:17:58] <strcat> if you don't, it's undef
[18:18:03] <strcat> they assume it doesn't happen to optimize more
[18:18:05] <Sharp> Oh, signed int
[18:18:13] <strcat> Sharp: unsigned int overflow is defined in C
[18:18:16] <strcat> signed int overflow isn't
[18:18:18] <Sharp> Right
[18:18:35] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[18:18:35] <strcat> LLVM operations annotated with nothing have defined wrapping
[18:18:42] <Sharp> That sort of makes sense, inasmuch as I would probably not be using a signed int if I wanted overflow.
[18:18:43] <strcat> if you annotate them with nsw, signed int overflow is undefined
[18:18:46] <strcat> (there's also nuw)
[18:18:51] <brson> mark_edward: the rust vector representation is going to change to be more efficent
[18:19:05] <strcat> if it's a library type it would be much easier to do
[18:19:11] <strcat> so I'd rather wait for that to settle
[18:19:14] *** Quits: maxiepoo_ (Max@moz-DEDB4821.nuwlan.northwestern.edu) (Quit: maxiepoo_)
[18:19:17] <mark_edward> brson, do you know if it will be as fast as std::vector from C++?
[18:19:33] <brson> mark_edward: it will probably be whatever strcat says is the fastest
[18:19:42] <strcat> it's easy to do better than what libc++/libstdc++ do because they can't use realloc.
[18:19:44] *** Joins: Ms2ger (Ms2ger@57ACE628.C60A97A6.F9FB0584.IP)
[18:19:47] <brson> strcat: it's disapointing you are not interested in helping upstream rust
[18:19:53] *** Joins: boredomist (ruqs@8186917.CC8FA3EE.E3401B6E.IP)
[18:20:05] <strcat> brson: I am interested in it, I am just frustrated
[18:20:07] *** Joins: jvshahid (jvshahid@moz-53774307.nycm.ny.megapath.net)
[18:20:26] *** Quits: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca) (Connection reset by peer)
[18:20:42] <brson> strcat: me too
[18:20:59] <strcat> it's really hard to please everyone and fit every use case
[18:21:05] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[18:21:09] <friggle> brson: I've been following strcat's work and I don't see that as true. pcwalton also seems worried that rust-core is a 'fork' but again, its stated aim is a playground given the difficulty of hacking on the stdlib directly
[18:21:29] <eddyb> strcat: because Vec can have restrictions on the inner type to make realloc safe?
[18:21:36] <Sharp> strcat: I still don't get the sense that you are actually being blocked here?  It seems like nearly everyone is okay with GC being less optimized / poorly supported in most cases.  Or maybe I just get that sense from IRC.
[18:21:50] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[18:22:02] <strcat> Sharp: I want dynamic arrays to be a library type
[18:22:07] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[18:22:19] <cmr> Sharp: have you looked at trans? :p
[18:22:19] <strcat> so it's not really in my interest to spend a lot of time making ~[T] faster, when what I really want is Vec<T>
[18:22:29] <Ms2ger> Is that what nmatsakis's last blog was about?
[18:22:30] <strcat> hacking at trans is really hard
[18:22:35] <strcat> making library types is really easy
[18:22:35] <Sharp> cmr: Yes, unfortunately :P
[18:22:56] *** Quits: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP) (Ping timeout)
[18:23:05] *** Joins: autra_ (augustin@A14DAE84.7F753DD1.EE2CA32B.IP)
[18:23:14] <eddyb> friggle: hmm, I didn't think of this until now, but changing something in std can be a mess with the different stages
[18:23:18] *** Joins: victorporof (victorporo@8BCA500A.9A7C5F59.4A6B528C.IP)
[18:23:36] <strcat> brson: I've just had a lot of trouble landing stuff lately... it all took weeks or a month or more to reach any consensus
[18:23:37] <friggle> eddyb: and large body of code depending on it, long compiles times etc etc
[18:23:38] <mark_edward> wouldn't initializer lists give us the ability to make all containers like vec and str library type?
[18:23:52] <strcat> brson: and I know rust can provide way nicer APIs than C++ and be faster *now*
[18:24:18] <strcat> so, I realize that it's possible to do everything perfectly and have both 1:1 threading and M:N threading, and go through the process of reaching consensus for everything
[18:24:27] <strcat> but it's going to take ages
[18:24:44] <strcat> so atm I'm just working on getting it as what I think is right, and will then push for that upstream
[18:24:44] <eddyb> friggle: that's what I mean - if you change the repr of ~[T], you need to touch both rustc and std, and make sure you plan the stages right otherwise it will compiler but not run, etc.
[18:25:23] <Sharp> cmr: A lot of trans is kind of ad hoc but most of that seems to be about supporting destructors in general, not specifically @-vectors (though getting rid of that would be nice for other reasons, I don't think it would make trans much less complex).
[18:25:25] *** Joins: arodier75 (Thunderbir@moz-D6235B0B.in-addr.btopenworld.com)
[18:25:56] <mark_edward> brson, what would rust need in order to make all container types implemented as library types, instead of language supported? that would modularize things and make improvements easier/faster
[18:26:02] <strcat> brson: and it's hard to work in the presence of an imaginary GC
[18:26:06] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[18:26:06] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:26:23] <strcat> ~[T] has to support managed ptrs, but what exactly does that mean? it's hard to know because there's no actual GC
[18:26:32] *** Quits: arodier74 (Thunderbir@166EA7D4.B6144566.D3B9122.IP) (Ping timeout)
[18:26:39] <friggle> strcat: pnkfelix and nmatsakis are trying to hash that out it seems
[18:26:42] <strcat> atm it means it has to have a box header
[18:26:52] <eddyb> http://www.reddit.com/r/rust/comments/1r082g/meetingweekly20131119_static_linking_wildcards/cdivnc9?context=10 oh, something I like is getting some exposure :D
[18:26:54] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[18:26:55] <strcat> and if you have to have 2 different representations, a library type doesn't work
[18:26:57] <strcat> no static if.
[18:27:08] <strcat> so I don't think a library vector can land yet
[18:27:08] *** Quits: autra_ (augustin@A14DAE84.7F753DD1.EE2CA32B.IP) (Ping timeout)
[18:27:10] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[18:27:13] <brson> mark_edward: that's the subject of this blog post http://smallcultfollowing.com/babysteps/blog/2013/11/14/treating-vectors-like-any-other-container/
[18:27:20] *** Quits: victorporof (victorporo@8BCA500A.9A7C5F59.4A6B528C.IP) (Quit: victorporof)
[18:27:40] <mark_edward> strcat, wouldn't that + constexpr fix a lot of your problems
[18:28:06] *** Joins: victorporof (victorporo@8BCA500A.9A7C5F59.4A6B528C.IP)
[18:28:15] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[18:28:55] <pcwalton> we should just not use box headers and store the RC info out of line.
[18:29:11] <pcwalton> I don't think we need to boil the oceans here.
[18:29:18] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[18:29:19] <strcat> pcwalton: but it's hard to know what that would mean before a GC lands
[18:29:26] <pcwalton> yes it is
[18:29:29] <pcwalton> err
[18:29:29] <strcat> for example, would the GC store the length of the vector?
[18:29:31] <pcwalton> it's not that hard to know
[18:29:31] *** Quits: arodier75 (Thunderbir@moz-D6235B0B.in-addr.btopenworld.com) (Connection reset by peer)
[18:29:49] <pcwalton> card marking schemes are well known
[18:29:53] <strcat> if it was a precise GC it would trace through from the root so it would find the length on the way
[18:30:01] <strcat> with the vector repr I like
[18:30:04] <pcwalton> you have to know the length of the allocation
[18:30:08] <Sharp> ++pcwalton
[18:30:10] <pcwalton> so you can just store that out of line
[18:30:15] <strcat> pcwalton: yeah but it would find that as it traced, wouldn't it?
[18:30:29] <pcwalton> somehow it has to store the information
[18:30:29] <strcat> if it had special knowledge of vectors obviously
[18:30:37] <eholk> i thought there was talk of removing GC, or at least moving it to the libraries
[18:30:40] <pcwalton> yes. it will need special knowledge of vectors.
[18:30:44] <strcat> pcwalton: the vector stores it, and the vector is there on the stack/heap somewhere
[18:30:46] <pcwalton> but I am saying that doesn't require static if.
[18:30:55] <strcat> pcwalton: but the current @ does
[18:30:56] <pcwalton> it can be stored in the card somewhere
[18:30:56] <cmr> eholk: there was, and it will be.
[18:31:09] <pcwalton> yes, the current @ uses a very inefficient scheme
[18:31:13] *** Joins: maxiepoo_ (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[18:31:17] <pcwalton> that we should nuke and replace with card marking ASAP
[18:31:57] <pcwalton> IOW what I mean is that I don't want to add static if just to prop up our current inefficient GC scheme
[18:32:02] <pcwalton> let's just fix our GC scheme
[18:32:10] <strcat> yeah I know, I'm not seriously suggesting static if
[18:32:15] <strcat> even the C++ committee was too scared to add it
[18:32:17] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[18:32:20] <cmr> heh
[18:32:34] <strcat> bjarne thinks it is too much
[18:32:38] <o11c> even though you can do the same thing in C++ already, just with 10x as much typing
[18:32:51] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[18:33:57] <strcat> hm
[18:34:00] *** Joins: mikezaby (mikezaby@moz-AA896205.home.otenet.gr)
[18:34:02] <strcat> naming concurrent containers is a pain
[18:34:14] <cmr> s/concurrent containers//
[18:34:18] *** Joins: arodier74 (Thunderbir@moz-D6235B0B.in-addr.btopenworld.com)
[18:34:22] *** Parts: mikezaby (mikezaby@moz-AA896205.home.otenet.gr) ()
[18:34:26] <Ms2ger> Two hardest problems, and all
[18:34:27] <strcat> BlockingQueue, BlockingPriorityQueue, BoundedBlockingQueue, BoundedBlockingPriorityQueue - is this insane? ;p
[18:34:47] <strcat> and what should the non-blocking ones be called...
[18:34:51] <Sharp> If we can abbreviate BoundedBlockingQueue as BBQ it will make it all worth it.
[18:35:08] <mark_edward> strcat, what are the main performance probs you see besides the vector repr?
[18:35:40] *** eddyb is now known as Qu
[18:35:53] <pcwalton> I'm tentatively in favor of the suggestions here http://www.reddit.com/r/rust/comments/1r082g/meetingweekly20131119_static_linking_wildcards/
[18:35:59] *** Qu is now known as eddyb
[18:36:32] <pcwalton> because they seem to solve most of the problems, incorporating the efficient vector representation, allowing &* to work on ~[T], and so forth
[18:36:43] <eddyb> strcat: Queue<Blocking>, Queue<Blocking+Priority>, Queue<Bounded+Blocking+Priority>
[18:36:49] <pcwalton> &[T] has same representation as ~[T]
[18:37:01] <pcwalton> but grows a capacity if you need to push onto it
[18:37:01] *** Quits: beifeng (Mibbit@32B41A.FA7FF645.C7DB8B78.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:37:14] <strcat> eddyb: well under the hood I actually implemented it as BlockingQueuePtr<PriorityQueue<T>> BlockingQueuePtr<Deque<T>>
[18:37:34] <SingingBoyo> how does one tell rustpkg where to install to? Do installs even work?
[18:37:48] *** Joins: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[18:38:03] <Sharp> ./configure --prefix or something?  I think?
[18:38:06] <cmr> SingingBoyo: the RUST_PATH environment variable
[18:38:13] <Sharp> Or not.
[18:38:16] <strcat> you'd need higher-kinded types to expose BlockingQueue<PriorityQueue> via <T: GenericQueue> without <A, T: GenericQueue<A>> afaik
[18:38:17] <mark_edward> pcwalton, side question, but what info do GC's need about objects to do their job? strcat has an allocator trait here, https://github.com/thestinger/rust-core/blob/master/core/mem.rs#L56-L77 but don't GC's need notification one copy, move, destruction, etc?
[18:38:29] <mark_edward> s/one/on/g
[18:38:31] <strcat> allocators aren't going to mix with GC afaik
[18:38:40] <SingingBoyo> Sharp: that'd be where to install rustc, not packages with rustpkg.  Thanks anyway :)
[18:38:41] <pcwalton> mark_edward: they pretty much just need to keep track of type + size + location
[18:38:47] <Sharp> Listen to cmr :P
[18:38:50] <SingingBoyo> cmr: I'll give that a try, thanks.
[18:38:55] <strcat> unless the allocators are GC aware
[18:39:01] <Sharp> Yeah, misread the question.
[18:39:15] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:39:15] <cmr> SingingBoyo: it may not work flawlessly, there still might be bugs in rustpkg (I think tjc fixed the one I knew about)
[18:39:22] <mark_edward> can't GC's simply be seen as another sort of allocator?
[18:39:25] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Connection reset by peer)
[18:39:26] <strcat> the current scheme makes ~ and ~[T] use local alloc functions if they contain @
[18:39:38] <strcat> and afaik that was added as prep for GC
[18:39:38] <tjc> SingingBoyo: rustpkg installs to the first directory in the RUST_PATH...
[18:39:43] <tjc> or, if RUST_PATH isn't set, then ./.rust
[18:39:45] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:39:52] <tjc> If you try it and that isn't how it behaves, report a bug :-)
[18:39:53] <cmr> pcwalton: SO you can push onto a &[T]? Or am I reading that wrong
[18:39:59] <pcwalton> cmr: no, you can't
[18:40:05] <pcwalton> without copying it anyway
[18:40:18] *** Joins: DeTeam (DeTeam@moz-BAC6A2DE.dyn.broadband.iskratelecom.ru)
[18:40:20] <eddyb> cmr: the proposal I liked is about making ~[T] like &[T] is now
[18:40:43] <eddyb> cmr: non-growable..... oh, I have an idea
[18:40:46] <strcat> I like the current &[T] representation a lot, nice and simple
[18:41:03] *** Quits: jstevans (Instantbir@BB601205.63B79338.DDE5D3F6.IP) (Ping timeout)
[18:41:19] <cmr> Me too
[18:41:29] <pcwalton> with the reddit proposal we'd extend the &[T] repr. to all of the smart pointers
[18:41:35] <strcat> pcwalton: could ~[T] and @[T] be fixed-size after allocation and just be (ptr,len) ? growable vectors would be elsewhere
[18:41:37] <strcat> ah
[18:41:40] <pcwalton> strcat: that's the idea
[18:41:44] <pcwalton> you make it fixed size
[18:41:49] <pcwalton> and then you can have a growable vector type
[18:41:55] <eddyb> ~[T] could become Vec<T> without touching the heap
[18:41:59] <pcwalton> that could probably take a ~[T] by move and just slap a capacity onto it
[18:42:01] <strcat> C++ has specializations of std::unique_ptr/std::shared_ptr for T[] somehow, which is similar
[18:42:01] <pcwalton> eddyb: right
[18:42:02] <eddyb> just add capacity to it
[18:42:07] <pcwalton> just set cap = len
[18:42:11] <pcwalton> and then you can push onto it
[18:42:13] <pcwalton> and convert back if you want
[18:42:19] <eddyb> <3
[18:42:31] <strcat> pcwalton: yeah that would be great
[18:42:33] <SingingBoyo> tjc: I get the feeling I'm doing something wrong, as I can't get it to install anywhere other than the current directory.  hmmm
[18:42:36] <pcwalton> then you keep DST for vecs.
[18:42:41] <pcwalton> which makes the slice operation explicit
[18:42:44] <strcat> +1000 for that ;p
[18:42:45] *** Quits: Ms2ger (Ms2ger@57ACE628.C60A97A6.F9FB0584.IP) (Quit: nn)
[18:42:45] <pcwalton> &*x
[18:42:48] <pcwalton> will slice a vector
[18:42:57] <eddyb> using Vec only for dynamic cases is pretty neat, I didn't want to lose *all* the syntax sugar
[18:42:59] <Sharp> tjc: Actually, as a side request--from writing tooling, sometimes I have control over command line parameters but not environment variables.  It would be spiffy if rustpkg had one of those as well.
[18:43:04] <Sharp> (For specifying install directory).
[18:43:19] <eddyb> and str/String is not a big change
[18:43:31] <tjc> Sharp: We deliberately tried to avoid command-line flags in rustpkg, but you can submit an enhancement request and maybe folks will agree with it...
[18:43:32] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[18:43:44] *** Quits: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de) (Ping timeout)
[18:43:48] <tjc> I'm not maintaining rustpkg anymore, so while I'll try to answer questions when I can, the best way to make sure an issue gets addressed is to file it in github :-)
[18:44:07] <cmr> pcwalton: hm, that isn't bad
[18:44:13] <Sharp> tjc: Ah, okay.  If I feel strongly about it I'll add a patch, I've just in the past had to deal with situations like this a number of times in the past and environment variables (quite deliberately) are sometimes hard to set.
[18:44:24] <pcwalton> well, str would just be a DST
[18:44:32] <pcwalton> the pushable version would just be StringBuilder or something
[18:44:34] <pcwalton> like Java
[18:44:36] <pcwalton> or StringBuf
[18:44:42] <pcwalton> if you want to be shorter
[18:44:46] <Sharp> (That sentence brought to you by the Department of Redundancy Department).
[18:44:46] <tjc> Sharp: Out of curiosity, when are environment variables hard to set? I don't doubt there are such scenarios, I just haven't run into them myself...
[18:44:58] <Sharp> tjc: When your command is being run through another program.
[18:44:59] <strcat> pcwalton: I'd like to just have a Str (or String) type that wraps any Vec-like type
[18:45:08] <mark_edward> making str's immutable has other benefit's doesb't it?
[18:45:10] <strcat> so you could have Rope, Vec, SmallVec
[18:45:12] <Sharp> For example, I had issues getting environment variables out to Firefox running through Selenium.
[18:45:15] <strcat> and wrap them into strings
[18:45:18] <tjc> ah, I see
[18:45:20] <pcwalton> hm
[18:45:34] <pcwalton> I haven't thought through the ramifications of that but it seems attractive.
[18:45:48] <pcwalton> to be clear I absolutely want small vectors
[18:45:54] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[18:45:56] *** Joins: jstevans (Instantbir@BB601205.63B79338.DDE5D3F6.IP)
[18:46:01] <pcwalton> look at the new box builder code in servo that I wrote last week
[18:46:08] <pcwalton> it's full of // XXX: Small vector
[18:46:13] <strcat> heh
[18:46:40] <pcwalton> Gecko and WebKit use a custom allocator there too but we don't need it in Servo I don't think
[18:46:53] <benh> Do environment variables work well on Windows?
[18:46:54] <pcwalton> because they mainly use a custom allocator to poison recently freed frames
[18:47:03] <pcwalton> because they had and have so many security vulnerabilities from it
[18:47:08] <pcwalton> that it was worth writing a custom allocator
[18:47:12] <pcwalton> that tries to mitigate the,
[18:47:13] <pcwalton> them
[18:47:43] <tjc> benh: They don't work worse than anything else on Windows works, in my experience
[18:47:43] * strcat wants a CacheAlignedAllocator like TBB
[18:48:17] <strcat> brson: do you know what the minimum version of windows we want to support is?
[18:48:26] <strcat> does windows XP matter? (support ends april 2014)
[18:49:22] <strcat> I'd guess there's a server version with longer support though
[18:49:50] <friggle> strcat: what decisions would be affected by winxp support?
[18:50:02] <strcat> not really decisions just maintenance burden
[18:50:08] <strcat> XP doesn't have condition variables, for example
[18:50:17] <strcat> and windows 7 introduced user-mode scheduling
[18:50:29] <brson> strcat: windows 7 is the earliest we *do* support afaik. i personally don't care about xp
[18:50:36] <brson> firefox does though
[18:50:44] <brson> it's not clear if servo will by the time it hits production
[18:50:51] <strcat> I'm guessing they'll drop it when microsoft cuts off security patches though
[18:50:53] <strcat> seems silly not to
[18:51:01] <brson> maybe not. it's big in asia
[18:51:10] <Sharp> strcat: Dunno, didn't Firefox have an OS/2 port for a while?
[18:51:19] * strcat shrugs
[18:51:35] *** Quits: maxiepoo_ (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo_)
[18:51:51] <strcat> it seems odd to support XP but not make 64-bit windows builds ;p
[18:53:22] <strcat> acrichto: if we use -Werror it should check the compiler version
[18:53:42] <strcat> I'm 99% sure when gcc 4.9 is released, it'll warn somewhere it didn't before and break it for example
[18:53:50] *** Joins: nrc|afk (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[18:53:52] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[18:53:55] * strcat is used to this happening with lots of packages
[18:53:56] *** nrc|afk is now known as nrc
[18:54:16] <acrichto> at this stage, I still very much want to know about errors
[18:54:31] <strcat> -Werror turns warnings into errors
[18:54:33] <Luqman> acrichto: strcat: libuv certainly has a few warnings which i don't think should cause the build to fail
[18:54:35] <strcat> all of them
[18:54:47] <acrichto> Luqman: I agree, but I still want to know about src/rt errors
[18:54:52] <strcat> and they tweak/add warnings all the time
[18:55:02] <strcat> acrichto: but we don't follow clang/gcc trunk and some people run them
[18:55:07] <strcat> so rust won't build with clang/gcc trunk
[18:55:16] <friggle> werror should really be for "maintainer mode", not for random people who want to build rust
[18:55:31] * strcat shrugs
[18:55:35] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[18:55:36] <friggle> but on the other hand, it's easy enough to disable
[18:56:00] *** Joins: maxiepoo_ (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[18:56:02] <strcat> it's easy to disable if you've used a C compiler and know what to look for
[18:56:33] <strcat> for some people it might mean not using rust (they have the deps, why doesn't it build? obscure C warning messages)
[18:57:06] *** Quits: victorporof (victorporo@8BCA500A.9A7C5F59.4A6B528C.IP) (Connection reset by peer)
[18:57:17] <Luqman> and also know where to look in the makefile
[18:57:42] <strcat> acrichto: if we shipped clang and used that to self-host, this would be a non-issue
[18:57:51] <strcat> but we rely on the system compiler atm
[18:57:59] <strcat> and we don't know what version it is
[18:58:05] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[18:58:40] <strcat> (we'd really make debian/fedora upset if we self-hosted with clang though ;p)
[18:58:48] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[18:58:55] <acrichto> this is a problem in general that we want to support native versions of libraries but we don't have the ability to detect what versions they are
[18:59:25] <strcat> well you can add configure flags and have it as non-default
[18:59:28] <strcat> that's what firefox does
[18:59:52] <strcat> so linux distros flip on the system libs based on what works with that ffx version
[19:00:12] <strcat> in arch, firefox is generally too far behind a few libraries to use them
[19:02:40] <friggle> and distros like Debian *hate* when applications try to bundle their own versions of libs
[19:03:18] *** Joins: Addle (quassel@moz-89E971E4.cable.teksavvy.com)
[19:03:19] <strcat> well, Arch and Fedora do too
[19:03:45] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:04:14] <strcat> but when you're following the latest stable releases you have to accept that applications will sometimes lag behind libs, and patching them in the case of something like ffx is... not simple
[19:04:40] <strcat> and firefox does stuff like using a private cairo to gain perf by not going through the public API ;p
[19:05:04] *** Quits: Addle (quassel@moz-89E971E4.cable.teksavvy.com) (Ping timeout)
[19:05:05] <o11c> when you're speaking about libraries, you're talking about extern "C" ?
[19:05:26] *** Quits: jgilbert (jgilbert@moz-4C088FCE.hsd1.ca.comcast.net) (Ping timeout)
[19:05:50] *** Joins: Addle (quassel@moz-89E971E4.cable.teksavvy.com)
[19:06:27] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[19:09:01] *** Joins: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net)
[19:10:13] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Ping timeout)
[19:10:58] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[19:12:04] *** Quits: notmatt (notmatt@FC7F938D.DD50E21A.47C41102.IP) (Client exited)
[19:14:48] *** Joins: autra_ (augustin@moz-BE76895F.fbx.proxad.net)
[19:15:29] *** autra_ is now known as autra
[19:17:02] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[19:18:34] *** Quits: eholk (eholk@moz-4999788.public.wayport.net) (Quit: eholk)
[19:18:44] *** Quits: huseby (huseby@A083BCB.AAB185EE.9D625D35.IP) (Input/output error)
[19:19:32] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[19:20:19] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[19:21:26] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[19:24:37] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:24:37] *** ChanServ sets mode: +ao brson brson
[19:24:41] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[19:26:51] *** Quits: logicalparadox (logicalpar@moz-C73156AE.dr01.wlbr.pa.frontiernet.net) (Client exited)
[19:28:04] *** Joins: logicalparadox (logicalpar@moz-C73156AE.dr01.wlbr.pa.frontiernet.net)
[19:29:42] *** Joins: eholk (eholk@moz-4999788.public.wayport.net)
[19:29:48] *** Joins: josh (josh@moz-939DDE71.ny.onecommunications.net)
[19:29:52] *** Quits: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP) (Quit: Leaving)
[19:31:01] *** Joins: huseby (huseby@E6C3B35B.1D8BF1C3.9E74FAD6.IP)
[19:34:54] *** Quits: josh (josh@moz-939DDE71.ny.onecommunications.net) (Quit: josh)
[19:39:27] *** Quits: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[19:40:00] *** Joins: jstevans1 (Instantbir@489E370.9B1DA26B.DDE5D3F6.IP)
[19:40:48] *** Quits: jstevans (Instantbir@BB601205.63B79338.DDE5D3F6.IP) (Ping timeout)
[19:41:24] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[19:42:12] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[19:43:31] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[19:44:40] *** Quits: jstevans1 (Instantbir@489E370.9B1DA26B.DDE5D3F6.IP) (Ping timeout)
[19:45:07] *** Quits: moostik (Icedove@moz-63ED7231.w82-121.abo.wanadoo.fr) (Ping timeout)
[19:46:38] <mark_edward> strcat, what is the purpose of rust-core
[19:46:50] *** Joins: tdc (santegoeds@moz-9E05C5A4.range86-159.btcentralplus.com)
[19:47:16] <strcat> the stdlib doesn't support freestanding rust, atm
[19:47:44] <comex> oh, it's going to be fun trying to exploit servo if it's ever released :)
[19:48:34] <pnkfelix> nmatsakis: another Q
[19:48:47] *** Quits: ianj (ianjneu@moz-7140CF01.ccs.neu.edu) (Quit: leaving)
[19:49:01] <sp3d> servo exploits seem like they'd either come down to ffi-bound lib bugs, ffi bugs, or Rust bugs
[19:49:05] <nmatsakis> pnkfelix: ok
[19:49:13] <pnkfelix> nmatsakis: if there is a user-allocated block of memory, type *[T], lets call it `A`
[19:49:32] <pnkfelix> nmatsakis: and we have multiple **[T]'s that all point to `A`
[19:49:43] <pnkfelix> nmatsakis: are we going to try to avoid scanning A multiple times?
[19:50:11] <pnkfelix> nmatsakis: or are we going to essentially keep the equivalent of a mark-bitmap somewhere?
[19:50:23] <nmatsakis> pnkfelix: I don't know :) I guess there could be cycles
[19:50:26] <pnkfelix> nmatsakis: (sorry, that should have said "i.e.", not "or")
[19:50:36] *** Quits: maxiepoo_ (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo_)
[19:50:42] <pnkfelix> nmatsakis: my gut continues to say
[19:50:48] <nmatsakis> pnkfelix: so I think the answer is "yes"
[19:50:58] <pnkfelix> nmatsakis: the "right" answer here is to require users to either
[19:51:09] <pnkfelix> nmatsakis: 1. use ~[A] as their backing store for their smart-pointers,
[19:51:31] <pnkfelix> nmatsakis: 2. or use a registration facility to register memory, along with a callback for scanning it
[19:51:43] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[19:52:02] <comex> sp3d: well, any javascript engine is still going to have a lot of low level assembly stuff that could be vulnerable
[19:52:08] <pnkfelix> nmatsakis: Trying to leverage tracing for everything seems like it is likely to be really hairy to get right, both on the GC side, and on the client library side
[19:52:42] <nmatsakis> pnkfelix: "leverage tracing"? 
[19:52:52] <nmatsakis> pnkfelix: tracing is a very general term but I have the impresion you have a very specific meaning here
[19:53:04] <pnkfelix> nmatsakis: that's how I interpret "trace through *[T]'s"
[19:53:08] <strcat> pnkfelix: ~[A] doesn't cut it due to the desire for custom allocators, like if you want to allocate cache aligned nodes
[19:53:11] <nmatsakis> pnkfelix: ok, so you mean reflection basically
[19:53:20] <strcat> it would work for arenas
[19:53:32] <pnkfelix> nmatsakis: i.e. do precise stack scanning, to find all paths to *T's.
[19:53:33] <strcat> I guess you could build an aligned allocator on ~[T]...
[19:53:42] <strcat> inefficient
[19:53:43] <pnkfelix> strcat: right, that's why I tried to provide option 2.
[19:53:54] <pnkfelix> strcat: because I am figuring ~[T] cannot possibly be all things to all people
[19:54:10] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:56:17] <pnkfelix> nmatsakis: the distinction I guess I am trying to draw, when I say "leverage tracing"
[19:56:29] <pcwalton> PSA: please stop writing new "with_foo" functions
[19:56:38] <pcwalton> they are not nice to your callers and 
[19:56:40] <pcwalton> RAII is available
[19:56:46] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[19:56:51] <pcwalton> also I'm removing "do" with borrowed closures right now
[19:56:52] <pnkfelix> nmatsakis: is that there are two strategies I can envisage for user-allocated memory:
[19:56:56] <pcwalton> so they're extra not nice to your callers
[19:57:22] <pnkfelix> nmatsakis: 1. find paths from the roots through the user-allocated memory that eventually reach managed-memory
[19:57:25] <pnkfelix> nmatsakis: or
[19:57:54] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[19:57:54] <pnkfelix> nmatsakis: 2. treat all user-allocated memory as a source of roots
[19:57:57] *** Joins: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[19:58:05] <pnkfelix> nmatsakis: and provide ways to extract those roots in a flexible manner
[19:58:18] <pnkfelix> nmatsakis: … does that difference make sense?
[19:58:45] <nmatsakis> pnkfelix: yes the distinction makes sense
[19:59:06] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[19:59:28] <mark_edward> are you guys writing the GC right now?
[19:59:29] <pnkfelix> nmatsakis: (oh, and of coruse, there's option 3: don't allow paths from user-allocated memory to managed memory.  I guess that's just a specal case of 1, where you disallow such paths from existing and thus finding the set of legal such paths is "trivial")
[19:59:30] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[19:59:41] <pnkfelix> mark_edward: working on it
[20:00:10] <mark_edward> pnkfelix, thanks. is it in a repo somewhere i can see development
[20:00:10] <pnkfelix> nmatsakis: so issues like the potential for cycles are one reason I am scared about doing option 1.
[20:00:17] <nmatsakis> pnkfelix: there is also a hybrid I guess
[20:00:30] <nmatsakis> pnkfelix: well not really nm
[20:00:38] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[20:00:38] *** ChanServ sets mode: +ao brson brson
[20:00:57] <pnkfelix> mark_edward: I have experiments in my github repo but its not really in a state where I would want to advertise it or invite feedback. 
[20:01:11] <mark_edward> ok, thanks for the info
[20:01:21] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[20:02:19] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[20:02:53] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[20:03:51] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:04:02] <pnkfelix> nmatsakis: its possible that the two approaches end up being co-expressive, depending on how flexible one manages to make the user-defined portions of each
[20:04:43] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[20:04:52] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[20:06:14] <nmatsakis> pnkfelix: devil's in the details I guess, but #2 seems easier to think about, much as I don't love it
[20:06:22] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[20:06:22] *** ChanServ sets mode: +ao brson brson
[20:07:07] <pnkfelix> nmatsakis: i think it will be easier to prove #2 sound/correct/etc and reason about it.  Its possible that we might end up needing to also offer #1 as an option
[20:07:48] *** Joins: maxiepoo_ (Max@moz-13F4F196.nuwlan.northwestern.edu)
[20:07:51] <pnkfelix> nmatsakis: i.e. where some allocators use strategy #2, and other libraries put in serious dev effort (and serious integration with the GC) to get #1 working
[20:08:05] *** Joins: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP)
[20:08:30] <pnkfelix> nmatsakis: but in the interest of choosing strategies that I actually believe we can implement for 1.0, I'd currently pick working on #2 over #1.
[20:09:12] <pnkfelix> nmatsakis: I gotta go.  I'm glad we got a chance to talk about this, it is essentially the topic that I was hoping to discuss with you last night.
[20:09:51] <nmatsakis> pnkfelix: ok
[20:09:54] <nmatsakis> pnkfelix: see ya
[20:10:34] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:13:24] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[20:13:33] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[20:14:36] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:16:53] <bstrie> cmr: I'll start writing up a bot to mechanically summarize the conversations in #rust every day
[20:17:04] <bstrie> I expect it will produce hilarious results
[20:17:05] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[20:17:48] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[20:17:53] <tjc> bstrie: rust_ebooks?
[20:18:23] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:18:38] <bstrie> tjc: I once contemplated a tumblr where I would use microsoft word's "autosummary" feature to summarize famous works of literature
[20:18:52] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[20:18:56] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: adridu59)
[20:19:08] *** Joins: mizar99 (onur@9A9BE926.63649021.8D47ACD1.IP)
[20:19:16] <bstrie> tjc: with this process I attempted to summarize moby dick in thirty words, and, not even joking, every single word was some variation on "whale"
[20:19:41] <strcat> n-grams!
[20:19:59] <tjc> bstrie: that would be a fun tumblr idea!
[20:20:01] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[20:20:02] <strcat> and that's the end of what I know about natural language processing
[20:20:16] <tjc> strcat: i took a graduate NLP class and that's also all I know about natural language processing
[20:20:18] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[20:20:42] <bstrie> the only n-grams I know are where n = teddy
[20:21:39] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[20:21:42] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[20:22:33] <strcat> bstrie: make a giant table of [ word | next_word | count ] and you have the unigram version
[20:22:34] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[20:22:45] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[20:22:48] <bstrie> aha
[20:22:50] <strcat> and then do it with more prefix word
[20:22:59] <strcat> (word, word) -> next_word, count
[20:23:05] <strcat> (word, word, word) -> next_word, count
[20:23:07] <bstrie> I thought those were markov chains, or something
[20:23:12] <strcat> yeah, they are
[20:23:20] <bstrie> ok so then I do know what n-grams are :P
[20:23:41] <strcat> and soon you'll be able to detect spam and trolls
[20:23:49] <strcat> magic!
[20:24:01] <eddyb> chrome might be leaking :(
[20:24:04] <bstrie> or I could use these powers for evil, and generate spam
[20:24:10] <eddyb> I hate it when I can't run rustc proper because of what I have open
[20:24:22] <strcat> bstrie: meh, I don't think that works anymore
[20:24:35] <tjc> spam has gotten pretty sophisticated
[20:24:41] <strcat> all the spam I get is just some generic message saying I won 800,000,000 euros
[20:24:50] <strcat> (or some other variant)
[20:25:02] <tjc> When I get actual spam in my inbox it's usually one of the ones that just says "I need your help on a project"
[20:25:05] <tjc> gmail catches almost everything
[20:25:15] <tjc> I have no idea how much ham gmail's spam filter is catching, of course :P
[20:25:16] <bstrie> one day I really want to set up a honeypot and see what all the spam mails I get are actually trying to do to my system
[20:25:25] <strcat> tjc: yeah but I look in my spam folder due to curiousity
[20:25:30] <strcat> so there's no point.
[20:25:30] <bstrie> me too
[20:25:35] <strcat> I already read them all
[20:25:45] *** Joins: Jesin (Jesin@moz-C1EBF9B4.dept.lehigh.edu)
[20:25:55] <strcat> except whatever spammers google kidnaps and drops into the atlantic ocean
[20:26:43] *** Joins: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca)
[20:26:56] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[20:27:05] <bstrie> sometimes I enjoy their attempts at creativity
[20:27:08] <bstrie> "You really got the guts to break up with me over email,bitch??!? Tell you what! I just made a nice compilation of your/our best scenesand put it up for watch and try on [dubious url] or [dubious url] and btw: This email just went out to your parents. I bet they didn't know you'reinto dirty stuff like this. Cheers!Your ex bf"
[20:28:06] <tjc> well, that sort of thing is effective
[20:28:20] <tjc> it pushes enough people's buttons that they think "well, this is probably fake, but I better go to this URL to be *sure*..."
[20:29:04] <bstrie> I'm actually really impressed with the different warnings that google sticks at the top of these mails
[20:29:11] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[20:29:32] <strcat> bstrie: google also looks in your email to see if you mentioned an attachment but didn't attach it
[20:29:32] <bstrie> that one has a big yellow banner warning me that this message might not be from the *real* whoever@gmail.com
[20:29:36] <tjc> yeah, that's interesting
[20:29:41] <tjc> I haven't read my spam folder in a long time
[20:29:42] <tjc> the warnings are new
[20:29:50] <bstrie> this other one has an even bigger red banner warning me about phishing attacks
[20:29:53] <tjc> it's nice that they explain now which rule triggered something being classified as spam
[20:30:01] <bstrie> strcat: isn't that only a labs thing?
[20:30:03] <strcat> maybe
[20:30:11] <strcat> I think it might have graduated from that
[20:30:16] <bstrie> I know I have the labs for "undo sent mail" turned on, but I've never actually used it
[20:30:30] <strcat> I use undo send all the time because afaik they removed preview...
[20:30:34] <strcat> so I send it, and undo it
[20:30:35] <bstrie> haha
[20:30:50] <strcat> their plain text email thing is really awful now
[20:30:51] <bstrie> you could probably just save as a draft :)
[20:31:01] <strcat> I'm tempted to just start using mutt
[20:31:09] <tjc> ah, mutt
[20:31:12] <tjc> I remember mutt
[20:31:15] <tjc> back in 2003
[20:31:15] <strcat> used to be able to open the gmail text pane in vim
[20:31:16] <bstrie> oh wait no, drafts also send you into the new compose view
[20:31:18] <strcat> now it's filled with html crap
[20:31:42] * Seldaek happy with thunderbird..
[20:31:58] <strcat> I was happy with thunderbird when the vimperator plugin for it still worked
[20:32:09] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[20:32:13] <strcat> vimperator barely works in ffx now.
[20:32:49] <Seldaek> just get a mouse :p
[20:33:03] *** Quits: doomlord_ (servitor@moz-4625DF14.range86-184.btcentralplus.com) (Ping timeout)
[20:33:14] <friggle> strcat: I much prefer a more minimal introduction of vim bindings myself. vimfx isn't perfect, but is my extension of choice for now
[20:33:15] *** Quits: DeTeam (DeTeam@moz-BAC6A2DE.dyn.broadband.iskratelecom.ru) (Ping timeout)
[20:33:17] <FreeFull> keyboard for life
[20:33:35] <strcat> Seldaek: not sure how I'd manage tabs without it.
[20:33:47] <strcat> panorama is a really terrible interface to a great thing
[20:33:57] <Seldaek> yeah I like my keyboard shortcuts too, but it doesn't have to be vim all the way
[20:34:25] * strcat has gtk set to emacs mode so...
[20:34:26] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[20:34:37] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[20:34:40] <strcat> makes ctrl-w not exit windows... kill-backwards-word yes please
[20:35:51] *** Joins: jstevans (Instantbir@BB601205.63B79338.DDE5D3F6.IP)
[20:36:23] <kimundi> Hm, so ~[T] turns into a fixed size heap allocation, in the process simplifying the vector DST story more and making growable vectors non-special? That... doesn't sound that bad.
[20:36:48] *** Quits: eholk (eholk@moz-4999788.public.wayport.net) (Quit: eholk)
[20:36:49] <Seldaek> strcat: if you bind capslock to backspace you can do ctrl-capslock to delete word
[20:36:58] <Seldaek> it's like a 1cm shift :p
[20:37:00] <strcat> my caps lock is ctrl
[20:37:12] <Seldaek> then press it twice or something
[20:37:15] <strcat> ctrl-[ exits insert mode, and I like ctrl.
[20:37:23] <strcat> pressing both shift keys is caps lock (shiftlock)
[20:37:28] <kimundi> The [T] in that kind of ~[T] would still be dynamically sized, just with a allocation on each size change, right?
[20:38:40] *** Joins: DeTeam (DeTeam@moz-BAC6A2DE.dyn.broadband.iskratelecom.ru)
[20:38:44] *** jorendorff_away is now known as jorendorff
[20:38:51] <kimundi> let x = ~[1, 2, 3]; let y = x.into_growable();
[20:39:02] <kimundi> let x = ~[1, 2, 3]; let y = x.into_small_vec::<16>();
[20:39:47] <kimundi> Seems reasonable enough for me :P
[20:40:03] *** pmoore is now known as pmoore|away
[20:40:37] *** Joins: mikezaby (mikezaby@moz-AA896205.home.otenet.gr)
[20:41:54] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Quit: lmandel)
[20:42:01] *** Quits: DeTeam (DeTeam@moz-BAC6A2DE.dyn.broadband.iskratelecom.ru) (Quit: DeTeam)
[20:42:31] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Ping timeout)
[20:43:46] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[20:44:03] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[20:46:02] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:48:13] *** Joins: alonlevy (alon@moz-61A0AD83.red.bezeqint.net)
[20:48:16] <Leo`> oh
[20:48:31] * Leo` noticed strcat did a GMP binding for Rust
[20:48:35] * Leo` thanks strcat
[20:49:15] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[20:50:00] *** Quits: alonlevy (alon@moz-61A0AD83.red.bezeqint.net) (Ping timeout)
[20:51:07] *** pmoore|away is now known as pmoore
[20:51:23] <FreeFull> GMP is nice to have
[20:52:36] *** Quits: jstevans (Instantbir@BB601205.63B79338.DDE5D3F6.IP) (Ping timeout)
[20:53:19] *** Parts: mikezaby (mikezaby@moz-AA896205.home.otenet.gr) ()
[20:56:22] *** Joins: josh (josh@DC98BC6D.96CB7DCC.284344F5.IP)
[20:56:51] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[20:57:01] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[20:57:36] *** pmoore is now known as pmoore|away
[20:58:10] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[20:58:26] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[20:58:29] <Leo`> strcat: anyway I'm fixing it for master, expect a PR :)
[20:58:45] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[20:59:12] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[20:59:38] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[20:59:57] <eddyb> fucking swap hell. that was half an hour
[20:59:58] *** Quits: josh (josh@DC98BC6D.96CB7DCC.284344F5.IP) (Quit: josh)
[21:01:21] *** Joins: samnardo_ (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[21:01:22] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Connection reset by peer)
[21:02:27] <eddyb> http://xkcd.com/303/ << rust devs at mozilla
[21:02:40] <eddyb> sadly, I don't have a sword fighting colleague
[21:03:19] <eddyb> I can only throw myself on the bed and think about my ex while rustc is flooding my RAM
[21:03:20] *** Quits: Jesin (Jesin@moz-C1EBF9B4.dept.lehigh.edu) (Quit: Leaving)
[21:03:28] <bstrie> eddyb: I like to think that they set up eight rust directories each with different projects and work on one while the others compile
[21:03:42] <bstrie> there's no other explanation for how many commits brson has
[21:03:44] *** Quits: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP) (Quit: Rebooting)
[21:03:56] <eddyb> bstrie: what is that... 12-16GB of RAM?
[21:04:04] <bstrie> a pittance
[21:05:37] <olsonjeffery> anyone know of/have a template rust repo for game development.. like the boilerplate for opengl to get a window open?
[21:05:45] <olsonjeffery> + rustpkg stuff?
[21:06:10] <olsonjeffery> i have some graphics stuff i want to mess around with
[21:06:16] <olsonjeffery> so i guess not neccesarily game dev
[21:06:32] <Luqman> olsonjeffery: maybe checkout the glfw-rs examples
[21:06:43] *** Quits: maxiepoo_ (Max@moz-13F4F196.nuwlan.northwestern.edu) (Quit: maxiepoo_)
[21:07:08] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[21:07:09] <Luqman> well that + gl-rs
[21:07:37] <Luqman> olsonjeffery: https://github.com/bjz/gl-rs/blob/master/src/examples/basic/main.rs
[21:07:48] *** Joins: SingingBoyo (brandon@moz-2AEFE135.ubcsecure.wireless.ubc.ca)
[21:08:09] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[21:08:15] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[21:08:15] *** ChanServ sets mode: +ao brson brson
[21:09:00] <sfackler> olsonjeffery: you can also take a look at rust-sdl. there's an example app that sets stuff up
[21:09:05] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[21:09:38] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Ping timeout)
[21:10:21] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Input/output error)
[21:10:25] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[21:10:30] *** Joins: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP)
[21:10:51] <olsonjeffery> yeah i want to see a rustpkg that puts all of this stuff together, i guess
[21:11:42] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[21:12:13] *** Joins: maxiepoo_ (Max@moz-13F4F196.nuwlan.northwestern.edu)
[21:15:37] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[21:15:37] *** Joins: spott_ (spott@moz-5158CBDE.colorado.edu)
[21:15:48] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[21:16:52] *** Joins: geoffhill (geoffhill@moz-738DC0DB.org)
[21:16:54] *** Quits: Palmik (palmik@moz-DEC2AB.pks.muni.cz) (Quit: Lost terminal)
[21:17:26] *** Quits: SingingBoyo (brandon@moz-2AEFE135.ubcsecure.wireless.ubc.ca) (Ping timeout)
[21:20:55] *** Quits: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca) (Quit: canhtak)
[21:23:28] <ssbr> I had hoped that a hexacore computer with crazy amounts of RAM would make rust compilation fast, but it still took 20 minutes. :(
[21:23:29] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[21:24:03] <sp3d> ssbr: rust bootstrapping is a pretty serial task, outside of building llvm
[21:24:36] <sp3d> and after you have 'enough' RAM it doesn't help speed either
[21:24:36] <ssbr> sp3d: Aw, poop. What can I expect to be fast?
[21:24:45] <sp3d> servo :P
[21:24:53] <FreeFull> sp3d: Use more cores!
[21:24:53] <sfackler> tests will run in parallel fwiw
[21:25:01] <ssbr> compiling servo, or just using it?
[21:25:13] <sp3d> the latter; I don't know anything about servo's crate structure
[21:25:14] <ssbr> sfackler: That is an excellent thing!
[21:25:32] *** Quits: tdc (santegoeds@moz-9E05C5A4.range86-159.btcentralplus.com) (Quit: Leaving)
[21:25:40] <ssbr> sp3d: how does one structure crates to make rust projects faster to compile? Try to make many indpeendent crates, or...?
[21:25:50] <sp3d> yeah, many small crates
[21:26:25] <sp3d> I think--someone more familiar w/ rustpkg and building would know for sure
[21:26:46] <sp3d> most of my rust code is either one-big-file or one-small-file :P
[21:26:53] *** Joins: mib_bcn0v4 (Mibbit@moz-3FE0A1F.a357.priv.bahnhof.se)
[21:29:34] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:29:39] <kimundi> However, making many small crates decreases performance of the result :P
[21:30:02] <kimundi> Because a bunch of optimizations are only possible inside a crate
[21:30:41] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[21:31:06] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:31:15] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[21:31:15] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:31:46] <ssbr> It would be nice to tell the compiler whether or not to make that tradeoff -- split up work and lose optimizations, vs don't.
[21:32:10] <strcat> ssbr: well when we get static linking we can have the option to do LTO
[21:32:16] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[21:32:24] *** Quits: mib_bcn0v4 (Mibbit@moz-3FE0A1F.a357.priv.bahnhof.se) (Quit: http://www.mibbit.com ajax IRC Client)
[21:32:25] <ssbr> strcat: haha, this is not the direction I wanted to move!
[21:32:29] <strcat> can then split stuff up as much as you want
[21:32:30] *** Joins: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca)
[21:32:36] <strcat> and do incremental builds
[21:32:41] <ssbr> Ah, I see.
[21:32:42] <strcat> but still have the full perf there will LTO
[21:32:54] <strcat> ssbr: rust currently essentially does LTO within 1 crate
[21:33:01] <strcat> splitting up crates is a performance hit
[21:33:01] *** Quits: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[21:33:03] *** Joins: josh (josh@moz-698BB6AB.public.wayport.net)
[21:33:10] <strcat> and... without static linking, you end up with a bunch of libs
[21:33:12] <strcat> which is silly
[21:33:24] <ssbr> What I mean is that it'd be nice if rustc would automatically splits stuff up so as to parallelize the workload and allow for incremental builds and such
[21:33:36] *** Quits: fabiand (fabiand@moz-BF4BB443.adsl.alicedsl.de) (Quit: Verlassend)
[21:33:42] <strcat> well you don't need it for parallelization (intel wrote parallelization for passes)
[21:33:43] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:33:49] <strcat> but you do need it for incremental builds
[21:34:08] <ssbr> Well, okay.
[21:34:23] *** Quits: josh (josh@moz-698BB6AB.public.wayport.net) (Quit: josh)
[21:34:53] *** Joins: josh (josh@DC98BC6D.96CB7DCC.284344F5.IP)
[21:34:57] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:35:30] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[21:36:06] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:36:24] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[21:38:25] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Ping timeout)
[21:38:25] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:38:27] *** Joins: lenstr (lenstr@2A2A2196.9DA5669E.3F2079FA.IP)
[21:38:45] *** Quits: g3orge (g3orge@moz-369F78A7.access.hol.gr) (Quit: leaving)
[21:38:54] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[21:38:54] *** ChanServ sets mode: +o tjc
[21:42:33] <tjc> ssbr: I've thought about doing that; don't have the time anymore, but extra::workcache is what you want to look at there
[21:42:37] <tjc> it sorta gives you multiple tasks for free
[21:42:45] <tjc> at least when it comes to compiling multiple crates
[21:42:51] <tjc> parallelizing at a finer-than-crate granularity is harder
[21:42:52] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[21:43:15] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[21:46:04] <sam113101> rusti: let nums = ~~~~~~~~~~~~~[1, 2, 3];
[21:46:05] -rusti- <anon>:9:13: 9:17 warning: unused variable: `nums` [-W unused-variable (default)]
[21:46:05] -rusti- <anon>:9          let nums = ~~~~~~~~~~~~~[1, 2, 3];
[21:46:05] -rusti-                       ^~~~
[21:46:05] -rusti- ()
[21:46:15] <sam113101> rusti: let nums = ~~~~~~~~~~~~~[1, 2, 3]; nums
[21:46:16] -rusti- ~~~~~~~~~~~~~[1, 2, 3]
[21:46:50] <sam113101> what would that be?
[21:47:45] <sam113101> is ~~~~~~~~~~~~~[1, 2, 3] different than just ~[1, 2, 3]?
[21:49:08] <ssbr> sam113101: it's a pointer to a pointer to a pointer to .... to an owned vector
[21:49:37] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:50:42] *** Joins: SingingBoyo (brandon@moz-94CCBB11.ubcsecure.wireless.ubc.ca)
[21:50:55] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[21:51:24] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:51:28] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[21:51:30] *** Joins: jstevans (Instantbir@74E1ECAA.83BCE10.DDE5D3F6.IP)
[21:51:39] <sam113101> spooky shit, yo
[21:51:51] <tjc> yo dawg...
[21:52:26] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[21:53:07] <sam113101> I think you're mistaking me for someone else, my name is Gawd
[21:53:16] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[21:53:16] *** Quits: jstevans (Instantbir@74E1ECAA.83BCE10.DDE5D3F6.IP) (Ping timeout)
[21:55:26] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[21:56:46] *** Joins: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[21:56:49] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[21:56:56] *** Quits: jordyd (jordyd@moz-D494A55.seg37.ucf.edu) (Ping timeout)
[21:57:49] *** Joins: prudhvi (p@moz-154A460A.supr.io)
[21:58:04] *** Quits: josh (josh@DC98BC6D.96CB7DCC.284344F5.IP) (Quit: josh)
[22:00:53] *** Quits: Jackneill (Jackneill@moz-D67F1BC0.pool.digikabel.hu) (Input/output error)
[22:03:03] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[22:03:17] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:04:23] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[22:04:24] *** ChanServ sets mode: +ao brson brson
[22:05:00] *** Quits: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP) (Ping timeout)
[22:06:00] *** Quits: maxiepoo_ (Max@moz-13F4F196.nuwlan.northwestern.edu) (Quit: maxiepoo_)
[22:07:03] *** Joins: maxiepoo_ (Max@moz-13F4F196.nuwlan.northwestern.edu)
[22:08:22] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: Textual IRC Client: www.textualapp.com)
[22:08:55] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[22:10:27] *** Quits: amro (quassel@moz-17EA8511.customers.ownit.se) (Client exited)
[22:11:10] *** Joins: Potatoes (Mibbit@moz-4C4BC873.cable.virginm.net)
[22:11:15] *** Quits: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[22:12:54] *** Quits: spott_ (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[22:13:08] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[22:13:11] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[22:13:15] *** Joins: Jesin (Jesin@moz-C1EBF9B4.dept.lehigh.edu)
[22:14:07] *** Quits: Potatoes (Mibbit@moz-4C4BC873.cable.virginm.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:15:42] *** Joins: steveklabnik (steveklabn@moz-AB1D7A3B.nyc.res.rr.com)
[22:15:49] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[22:16:24] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[22:16:39] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:18:02] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[22:21:24] *** Quits: maxiepoo_ (Max@moz-13F4F196.nuwlan.northwestern.edu) (Quit: maxiepoo_)
[22:24:09] *** Joins: spott_ (spott@moz-5158CBDE.colorado.edu)
[22:24:10] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[22:25:03] *** Quits: spott_ (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[22:25:16] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[22:29:43] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Quit: Leaving...)
[22:30:01] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[22:30:07] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[22:31:02] <sam113101> so
[22:32:07] <sam113101> &~[1, 2, 3] would be a pointer on the stack of a vector on the heap, while ~~[1, 2, 3] would be a pointer on the heap of a vector on the heap?
[22:33:28] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[22:33:36] <SingingBoyo> does Drop::drop always get called when something is freed/goes out of scope, or should I be writing close/free/foo methods?
[22:33:41] <cmr> Just a pointer, doesn't matter where it lives
[22:33:49] <cmr> SingingBoyo: It always gets called, yes.
[22:34:20] <cmr> sam113101: No. It's a pointer to a heap-allocated vector.
[22:34:31] <SingingBoyo> cmr: so basically the equivalent of a C++ destructor? (at least in many ways)
[22:34:46] <cmr> SingingBoyo: yup
[22:34:54] <cmr> SingingBoyo: they *are* called destructors you know :p
[22:34:55] <benh> We happily call them destructors too
[22:35:04] *** Quits: boredomist (ruqs@8186917.CC8FA3EE.E3401B6E.IP) (Client exited)
[22:35:10] <sam113101> cmr: what's the difference between &~[1, 2, 3] and ~~[1, 2, 3]?
[22:36:32] <cmr> sam113101: In C, that'd be vector*, and vector**
[22:37:31] <sam113101> vector* or &vector*?
[22:37:48] <cmr> I gave types, not expression.
[22:37:54] <sam113101> ok
[22:38:42] <dbaupp> cmr: no it wouldn't
[22:39:00] <dbaupp> cmr: they're both vector*
[22:39:03] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[22:39:04] *** Joins: jstevans (Instantbir@D51285ED.1CA5FEA3.DDE5D3F6.IP)
[22:39:12] <cmr> dbaupp: eh?
[22:39:16] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Client exited)
[22:39:23] *** Joins: boredomist (ruqs@8186917.CC8FA3EE.E3401B6E.IP)
[22:39:28] <dbaupp> cmr: &(~[]) and ~(~[]) are both just pointers to vectors, right?
[22:39:29] <cmr> Actually, they'd both be vector**, no?
[22:39:36] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:39:39] <dbaupp> (I was using vector == ~[])
[22:40:13] <cmr> But yeah, they're both the same.
[22:40:14] <cmr> My bad
[22:40:40] <sam113101> there's no difference?
[22:40:41] <o11c> ~[] is std::unique_ptr<std::vector>
[22:40:47] <dbaupp> sam113101: one is a reference to a vector (&~[]) i.e. the ~[] might be stored on the stack, or on the heap, it's not known. While ~~[] is a pointer into the heap
[22:40:48] <o11c> *[] is std::vector*
[22:40:59] <dbaupp> i.e. ~~[] is a "subtype" of &~[] (kinda)
[22:41:03] <cmr> o11c: that's not C!
[22:41:51] <sam113101> I don't knew either, lawl
[22:42:00] <cmr> Ah
[22:42:16] <sam113101> dbaupp: why is it not known, if it's on the stack or heap?
[22:42:23] <sam113101> for ~[]
[22:42:30] <sam113101> I thought it was always on the heap
[22:42:42] <sam113101> s/knew/know/
[22:43:24] <dbaupp> no, for &~[]
[22:43:31] <dbaupp> the &T can point anywhere
[22:43:41] <dbaupp> (The ~[] itself is definitely on the heap)
[22:44:06] <sam113101> ah
[22:44:07] <dbaupp> that the data is definitely on the heap
[22:44:09] <dbaupp> *that is
[22:44:21] *** Quits: samnardo_ (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[22:44:36] <sam113101> that's what I thought, just misunderstood you
[22:44:42] <sam113101> brb
[22:44:45] <dbaupp> e.g. let x: ~[T] = ~[]; let y: &~[T] = &x;
[22:44:52] <dbaupp> e.g. let x: ~~[T] = ~~[]; let y: &~[T] = &*x;
[22:46:16] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[22:47:19] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[22:47:20] *** ChanServ sets mode: +o tjc
[22:48:31] *** Joins: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net)
[22:48:38] *** Quits: vmx (vmx@moz-D7D030D2.pools.arcor-ip.net) (Quit: Leaving)
[22:49:12] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:49:48] *** Joins: mrshankly (mrshankly@3EE34383.CE0EEBAE.806C54C8.IP)
[22:49:48] *** Quits: mizar99 (onur@9A9BE926.63649021.8D47ACD1.IP) (Quit: Leaving)
[22:49:52] *** Quits: mrshankly (mrshankly@3EE34383.CE0EEBAE.806C54C8.IP) (Quit: mrshankly)
[22:50:34] *** Joins: mrshankly (mrshankly@3EE34383.CE0EEBAE.806C54C8.IP)
[22:51:29] *** Quits: jstevans (Instantbir@D51285ED.1CA5FEA3.DDE5D3F6.IP) (Ping timeout)
[22:52:31] *** Quits: mrshankly (mrshankly@3EE34383.CE0EEBAE.806C54C8.IP) (Quit: leaving)
[22:52:41] *** Joins: mrshankly (mrshankly@3EE34383.CE0EEBAE.806C54C8.IP)
[22:53:56] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[22:55:02] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Quit: Savago)
[22:55:38] *** Quits: SingingBoyo (brandon@moz-94CCBB11.ubcsecure.wireless.ubc.ca) (Ping timeout)
[22:58:04] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[22:59:18] *** Quits: nkoep (nik@moz-6E0E6DBF.pool.mediaways.net) (Ping timeout)
[23:00:46] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Ping timeout)
[23:01:25] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[23:03:17] *** Quits: engla_ (engla@moz-F64E1B0F.cust.bredbandsbolaget.se) (Ping timeout)
[23:05:36] *** Joins: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[23:08:32] *** Joins: SingingBoyo (brandon@3B61FE03.D0BC3B2B.E4B23E02.IP)
[23:09:52] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[23:11:19] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[23:11:27] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[23:12:09] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[23:12:12] <SingingBoyo> when I'm writing a library crate, is it possible to use top-level types/functions in the main crate file from other files or do I need to create a foo::core module and use that, then have pub use core::* in the main file?
[23:12:29] *** Quits: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com) (Quit: )
[23:12:30] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[23:13:46] <tjc> SingingBoyo: I don't know if it's possible, but I think it's a better practice to have the main crate to be the root of the (upside-down) dependency tree, if that makes sense
[23:13:46] *** Joins: nkoep (nik@moz-9B94095F.vpn.rwth-aachen.de)
[23:13:48] *** flaper87 is now known as flaper87|afk
[23:14:04] <tjc> typically the main crate depends on everything, but nothing within the same crate depends on it
[23:14:16] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[23:14:41] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[23:14:53] <dbaupp> SingingBoyo: you can do lib.rs `pub struct Foo;` other.rs `extern mod your_library; your_library::Foo`, if that's what you mean?
[23:15:36] <dbaupp> cmr: http://www.reddit.com/r/rust/comments/1qyqpy/this_week_in_rust_19_nov_2013/cdiy69c
[23:15:48] <SingingBoyo> dbaupp: 'extern mod mylib; mylib::Foo' within the 'mylib::bar' module (in a seperate file)?  that just seems odd
[23:15:57] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[23:16:09] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (No route to host)
[23:16:15] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[23:16:25] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[23:16:45] <SingingBoyo> dbaupp: I mean I guess it'd work, but that's rather counterintuitive.  Ah well, guess I'll make a core module just to keep myself sane.
[23:16:48] <dbaupp> SingingBoyo: oh, no `other.rs` was a completely separate crate
[23:17:00] * dbaupp probably misinterpreted the question
[23:17:32] <dbaupp> SingingBoyo: oh, yes, you can actually just write `use Foo;` or `::Foo` (outside of a `use` statement)
[23:17:56] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[23:18:55] *** Joins: ianj (ianjneu@moz-7140CF01.ccs.neu.edu)
[23:19:00] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:19:10] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:19:21] <SingingBoyo> dbaupp: well, the use stmt seems to work, but now rustc complains about nonexistent traits
[23:19:53] *** Joins: Jesse (jruderman@moz-C07D5168.p2p.sfo1.mozilla.com)
[23:20:19] <dbaupp> SingingBoyo: you need to import the traits too, if you want to use the methods
[23:20:29] <cmr> dbaupp: thanks
[23:20:56] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Connection reset by peer)
[23:20:56] *** Joins: jdm (jdm@moz-ED0C7AC7.hinet-ip.hinet.net)
[23:20:56] *** ChanServ sets mode: +o jdm
[23:21:12] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[23:22:15] <SingingBoyo> dbaupp: ah whoops, can't do 'use {Foo,Bar,Baz}', need to split them up.
[23:22:29] <dbaupp> SingingBoyo: you can do `use Foo, Bar, Baz;`, but this may get removed
[23:23:10] <dbaupp> (fun fact, you can even do `use Foo, std::vec, std::str::*;` etc.)
[23:23:15] *** Joins: josh (josh@501D6691.D6F172E7.2A2F4638.IP)
[23:24:18] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[23:24:39] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[23:25:05] *** Quits: bungoman (bungoman@moz-76E7E508.ptr.richards.com) (Client exited)
[23:25:46] *** Quits: ianj (ianjneu@moz-7140CF01.ccs.neu.edu) (Quit: leaving)
[23:26:00] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[23:26:22] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[23:26:23] *** Quits: lenstr (lenstr@2A2A2196.9DA5669E.3F2079FA.IP) (Quit: Leaving...)
[23:28:25] *** nrc is now known as nrc|lunch
[23:29:23] *** Quits: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net) (Quit: Leaving.)
[23:29:34] *** Joins: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net)
[23:29:55] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[23:35:22] *** Quits: _lfox (lfox@moz-861E573F.nyc.biz.rr.com) (Quit: ZZZzzz…)
[23:36:08] *** Joins: jordyd (jordyd@moz-D494A55.seg37.ucf.edu)
[23:36:31] *** Quits: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net) (Ping timeout)
[23:37:20] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[23:38:13] *** Quits: peterdn (chatzilla@moz-30BAAE88.as13285.net) (Ping timeout)
[23:38:46] *** Quits: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[23:38:52] *** Quits: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca) (Quit: canhtak)
[23:41:17] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[23:42:57] *** Joins: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net)
[23:44:18] *** Quits: KindOne (KindOne@moz-18AC024A.dynamic.ip.windstream.net) (Ping timeout)
[23:46:39] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[23:48:26] *** Joins: KindOne (KindOne@moz-13E4294E.dynamic.ip.windstream.net)
[23:50:28] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Quit: 랜덤은 쇠퇴했습니다.)
[23:53:22] *** Quits: SingingBoyo (brandon@3B61FE03.D0BC3B2B.E4B23E02.IP) (Ping timeout)
[23:53:22] *** Quits: nkoep (nik@moz-9B94095F.vpn.rwth-aachen.de) (Ping timeout)
[23:54:12] *** Quits: steveklabnik (steveklabn@moz-AB1D7A3B.nyc.res.rr.com) (Ping timeout)
[23:54:40] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:57:30] *** Joins: jstevans (Instantbir@moz-5C73B2B1.bootp.virginia.edu)
[23:58:17] *** Joins: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net)
[23:58:55] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[23:59:14] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[23:59:57] *** Quits: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
