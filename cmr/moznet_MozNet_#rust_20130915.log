[00:00:05] <strcat> wait
[00:00:09] <strcat> acrichto: we already made a bug
[00:00:16] <strcat> as in, this isn't the right way to do it, it's just a stub
[00:00:20] <acrichto> strcat: is there an immediate resolution though?
[00:00:25] <strcat> no
[00:00:32] <acrichto> I dont think that this should be committed at all then
[00:00:39] <acrichto> because otherwise this *will* stick around
[00:00:47] <acrichto> and this is undeniably not the right way to do it
[00:00:55] <strcat> well, I agree that it's definitely wrong
[00:01:01] <acrichto> if someone wants to emulate timeouts right now it's fine to do that in user code, but I don't think that it should be in library code
[00:01:06] <strcat> so feel free to cancel it if you feel really strongly about it
[00:01:31] <strcat> acrichto: https://github.com/mozilla/rust/issues/9195
[00:01:38] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[00:02:39] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:03:12] <acrichto> strcat: thanks for the bug link
[00:03:34] <strcat> acrichto: you can see from the irc link there that I brought it up already ;p
[00:04:12] <acrichto> yeah all legitimiate concerns too, I guess I just feel a little strong about this...
[00:04:16] *** Quits: RageOfThou (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Connection reset by peer)
[00:04:19] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[00:04:28] *** Joins: RageOfThou (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[00:05:06] <acrichto> aww this'll mess up bors' track record, 13 successes in a row
[00:06:04] *** Quits: jclements (jclements@moz-BEE8D50A.dsl.snlo01.pacbell.net) (Quit: jclements)
[00:07:55] * lkuper rips big swaths of code out of rustc
[00:08:06] *** Quits: aeqwa (aeqwa@moz-5E5190D9.dsl.tropolys.de) (Quit: Lost terminal)
[00:08:08] <lkuper> I smite thee with my mighty blade, DEFAULT METHOOOOOOODS
[00:08:10] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[00:09:25] <Luqman> lkuper: yay \o/
[00:10:18] *** Joins: Daishiman (osinski@24A11BC8.62A0382D.8C1CC5AD.IP)
[00:10:19] <lkuper> this is so much fun.  and no talent required.  purely mechanical.
[00:10:44] <bblum> best kind
[00:10:54] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[00:10:54] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14edeb740 to 14cf7e93f: 02http://git.io/N3iJvQ
[00:10:54] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[00:15:05] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[00:16:07] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[00:24:01] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[00:24:36] *** Joins: ww (Mibbit@moz-9D1D3E.public.wayport.net)
[00:24:41] *** Quits: RageOfThou (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Quit: Leaving)
[00:25:11] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[00:26:27] *** Joins: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net)
[00:26:33] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[00:29:09] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[00:33:43] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Ping timeout)
[00:33:46] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[00:37:28] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Connection reset by peer)
[00:38:26] *** Joins: a__ (a__@moz-25043B93.nycmny.fios.verizon.net)
[00:38:58] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[00:41:08] *** Quits: SiegeLord (sl@moz-1DF56822.twcny.res.rr.com) (Quit: Leaving)
[00:41:19] *** Joins: vosen_ (vosen@moz-266BA656.icpnet.pl)
[00:41:51] *** Quits: vosen_ (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[00:46:00] *** Joins: JesseH (JesseH@moz-2E766C3E.mc.at.cox.net)
[00:47:53] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[00:49:45] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[01:00:01] *** Quits: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net) (Quit: hoverbear)
[01:00:48] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[01:01:07] *** Joins: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net)
[01:01:54] *** Joins: maik (maik@moz-58B2DA03.dip0.t-ipconnect.de)
[01:02:59] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[01:03:20] *** Quits: lazyden (lazyden@moz-4578A0B7.singnet.com.sg) (Quit: lazyden)
[01:04:39] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[01:05:12] *** Quits: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 23.0.1/20130814063812])
[01:05:14] *** Joins: Will_Z (Mibbit@DB953687.EEDD3B02.DDE5D3F6.IP)
[01:06:42] <ww> question: how do i return a reference to a ~[u8] of a struct?   struct1 {  f1: ~[u8] }.  fn as_bytes(&self) -> &'self [u8]  doesn't work
[01:06:47] <Will_Z> Can someone tell me why I got a compiler error when I used " for i in range(0u, 256) {     bar(i); }"? 
[01:07:19] <strcat> what error?
[01:07:46] <engla> ww: fn as_bytes<'a>(&'a self) -> &'a [u8]
[01:07:51] <Will_Z> expected '{' but found 'in' 
[01:08:05] <tiffany> will_z: are you on 0.7?
[01:08:08] <Will_Z> yea
[01:08:10] <Will_Z> 0.7
[01:08:15] <tiffany> in is a 0.8 thing
[01:08:41] <tiffany> I think the .7 syntax is for range(0u, 256) |i| {bar(i);}
[01:08:46] <Will_Z> oh.. how do I iterate over a vector using for loop?
[01:08:52] <Will_Z> in 0.7
[01:09:10] *** Quits: Daishiman (osinski@24A11BC8.62A0382D.8C1CC5AD.IP) (Quit: Leaving)
[01:09:59] <Will_Z> Thanks!
[01:10:04] <ww> rusti: for i in range(0u, 2) { println( fmt!("%?",i)); } 
[01:10:05] -rusti- 0u
[01:10:05] -rusti- 1u
[01:10:05] -rusti- ()
[01:10:28] *** Joins: Jessin (Jessin_@moz-971F1FB4.cc.lehigh.edu)
[01:10:54] <ww> engla: thx
[01:11:19] *** Quits: Jesin (Jessin_@moz-971F1FB4.cc.lehigh.edu) (Ping timeout)
[01:11:19] <engla> Will_Z: there is an example on the front page http://www.rust-lang.org/  that example is for 0.7
[01:11:37] <engla> basically it should be   for nums.iter().advance |element|  {     }
[01:11:56] <engla> wher `nums` is a vector or vector slice
[01:13:55] <Will_Z> Got it. Thanks a lot!
[01:14:01] *** Quits: maik (maik@moz-58B2DA03.dip0.t-ipconnect.de) (Ping timeout)
[01:14:05] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[01:14:47] *** Joins: antifuchs (foobar@moz-F68EBF74.dsl.dynamic.sonic.net)
[01:15:14] <antifuchs> why hello folks. Just starting out & discovering that not all examples on the web are compatible with the version I have installed (:
[01:15:25] <cmr> antifuchs: yes, rust moves fast.
[01:15:32] <cmr> antifuchs: what version are you using?
[01:15:34] <antifuchs> (it's HEAD on OS X, in case you're wondering; 0.7 segfaulted for me)
[01:16:16] <antifuchs> but hey, I got a little thing working that can run another program and read its output. That's pretty brilliant (:
[01:16:39] <antifuchs> also, std::run seems so much better than most subprocess interfaces I've seen so far. nice (:
[01:16:57] <strcat> antifuchs: it's actually a pretty awful module ;p
[01:17:04] <strcat> at least, in terms of the quality expected now
[01:17:32] <antifuchs> well then. any improvement would make this stockholm-syndromed person very happy (:
[01:18:14] <antifuchs> anyway, currently wondering how to convert the u8 that I'm getting from the process into a string - I suppose there's a conversion routine with an encoding selection somewhere?
[01:18:23] <antifuchs> .to_str() seems to convert to an array repr
[01:18:25] <cmr> str::from_utf8
[01:18:30] <antifuchs> oh, that's great (:
[01:18:30] <cmr> std::str::from_utf8, that is.
[01:18:45] <cmr> We don't have any coherent text API yet, so no encoding/decoding.
[01:18:55] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:19:07] *** Quits: a__ (a__@moz-25043B93.nycmny.fios.verizon.net) (Client exited)
[01:19:15] <antifuchs> I can live with utf8, so yay.
[01:19:35] <ww> antifuchs: like you i'm a newbie to rust, i found that getting the latest master (0.8-pre) built and use that helps tremendously.  there are substantial changes between 0.7 and 0.8 that there will be certainly migration work.  might as well start with the latest
[01:20:19] <jeaye> And then, a week from now, no longer be on that latest. :D
[01:20:37] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[01:20:45] <ww> but once the git master build process is set up, it's a matter of git pull; make; make install
[01:20:52] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[01:20:52] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/77pbOw
[01:20:52] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[01:21:02] <cmr> antifuchs: I write http://cmr.github.io/blog/categories/this-week-in-rust/ which makes it easy to track important changes
[01:21:10] <ww> i'm doing it in windows, the harder route and the build process is not too bad.
[01:21:13] <antifuchs> oh, awesome. Subscribing (:
[01:22:08] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:22:11] <antifuchs> oh yay, just listed my tmux sessions for the first time. amazing.
[01:24:46] *** Joins: tclark (ctimothy@moz-1DB1FE6E.hsd1.wa.comcast.net)
[01:24:50] <mcpherrin> cmr: TWiR is useful for those of us casually following :)
[01:25:37] *** Joins: z0w0 (zack@moz-61B3764E.qcl9.cha.bigpond.net.au)
[01:25:51] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[01:25:51] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/8MHTAw
[01:25:51] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[01:25:54] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[01:25:54] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/5Xy8Zg
[01:25:54] <ghrust> 13rust/06auto 14653ffa8 15Lindsey Kuper: Kill off method impls made redundant by default methods.
[01:25:54] <ghrust> 13rust/06auto 146ba2cb8 15Lindsey Kuper: These impls, at least, can be avoided by deriving Ord.
[01:25:54] <ghrust> 13rust/06auto 14a2231dc 15bors: auto merge of #9200 : lkuper/rust/libsyntax-cleanup, r=luqmana
[01:25:56] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[01:33:44] *** Quits: a_m0d|home (a_m0d@moz-D106051.acanac.net) (Quit: Leaving.)
[01:33:51] *** Joins: MrByte (MrByte@moz-147070D0.chy-wy.client.bresnan.net)
[01:33:57] <Eridius> antifuchs: tmux is awesome
[01:34:17] * Eridius uses mosh + tmux to keep a persistent connection to his Linode from multiple computers at once
[01:36:04] <cmr> I also use tmux for a variety of things
[01:36:59] <mcpherrin> this conversation brought to you via irssi in tmux accessed over mosh!
[01:37:06] <Eridius> mcpherrin: that's what I do too
[01:37:20] <Eridius> much better than using an irc bouncer
[01:37:43] <mcpherrin> The only downside is that irssi on a phone is a bit annoying
[01:38:21] * zxcdw irssi's with tmux too
[01:41:54] <miza> is there an easy way to do math in diferent types of int
[01:42:59] <miza> let a: uint = 1; let b: u8 = 3; a + (b as uint);
[01:43:06] <miza> without do something like this
[01:44:18] *** Joins: coreya (Mibbit@3AC902E5.28BE7003.DDE5D3F6.IP)
[01:44:59] <coreya> does anyone know why an owned vector wouldn't grow when pushing elements into it?
[01:45:09] <Eridius> coreya: paste code?
[01:47:01] <coreya> one sec trying to paste it readably for you
[01:47:25] <coreya> let program = argv.remove(0);
[01:47:36] <coreya> history.push(program.clone());
[01:47:59] <coreya> oh and here is where i declared history
[01:48:11] <coreya> let mut history: ~[~str] = ~[];
[01:48:22] <Eridius> what makes you think it isn't growing?
[01:49:34] <coreya> well after I've given input that makes it so the push line should be getting called
[01:49:57] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[01:49:59] <coreya> i iterate over it and it only prints the most recent pushed string
[01:50:11] <Eridius> coreya: can you just paste your code as-is into a pastebin, instead of cherry-picking lines?
[01:50:13] <coreya> so i put a statement in to print the length
[01:50:46] <coreya> yeah sorry i was trying that but it was going nuts with the formatting, here ill try again
[01:51:34] <tiffany> is it possible to implement coroutines in rust without using tasks?
[01:51:46] <antifuchs> Eridius: yep, yep it is ((:
[01:51:47] <coreya> http://mibpaste.com/eQPqMs 
[01:52:07] <coreya> ew that's still nasty
[01:52:10] <Eridius> coreya: wow, you managed to find a pastebin that doesn't monospace. That's, um, impressive
[01:52:13] <Eridius> coreya: go use gist.github.com
[01:52:13] <antifuchs> Eridius: I use one tmux session per terminal tab, and am going to make it re-open ones I accidentally cmd-W'd (:
[01:52:39] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[01:52:50] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[01:52:55] <Eridius> antifuchs: I have a saved Terminal.app window of the appropriate size for IRC, and a script called `start-irssi` that boots up mosh to my Linode, where it then either re-connects to the existing 'irssi' session or creates a new one and launches irssi in it
[01:53:10] <Eridius> so I can just type `start-irssi` and I get on IRC, whether or not I was already there
[01:53:47] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[01:53:59] <mark_edward> can you think of anyway to go from a *c_char to a &'r str? (string with a specified lifetime) ?
[01:54:49] <Eridius> mark_edward: str::raw::c_str_to_static_slice + cast::transmute_region
[01:55:18] <coreya> https://gist.github.com/ctames/6567406
[01:55:29] <mark_edward> Eridius: ingenious! i was looking all through vec::raw and string::raw and couldn't figure it out! thank you!
[01:55:56] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[01:56:10] <engla> mark_edward: you need to carefully assign it a correct lifetime
[01:56:13] <Eridius> fn from_c_str<'a>(cstr: &libc::c_char) -> &'a str { unsafe { cast::transmute_region(str::raw::c_str_to_static_slice(cstr)) } }
[01:56:15] <coreya> some of the indentation is still off, sorry
[01:56:16] <Eridius> something like that
[01:56:54] <mark_edward> Eridius: engla: thanks for all of the adivce!!!!
[01:57:08] <Eridius> coreya: you're re-declaring history inside the loop, so it gets reset on every line
[01:57:15] <Eridius> coreya: move the history declaration outside the loop
[01:57:42] <Eridius> coreya: incidentally, shell histories are typically the entire line, not just the program, so you should probably push a clone of the line itself
[01:58:14] <coreya> oh wow 
[01:58:15] <coreya> wow
[01:58:16] <coreya> yeah
[01:58:27] <mark_edward> what's best practice for use statements? all at the top of a file or only in the functions neccessary?
[01:58:38] <coreya> thanks a lot, sorry i wasted your time on something so trivial
[01:58:41] <Eridius> mark_edward: depends on how many functions would need it I think
[01:58:43] <coreya> that was me just not looking
[01:58:54] <Eridius> coreya: it's ok. I was guessing it was something like that, but it often needs a second pair of eyes to notice
[01:59:13] *** Quits: coreya (Mibbit@3AC902E5.28BE7003.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:59:21] <Eridius> mark_edward: I tend to always slap the use at the top of the file, unless I feel like I should restrict its scope for some reason
[01:59:40] <Eridius> i.e. if I had one function in my file that used FFI I'd probably keep the `use std::libc` in that one function. But pulling in regular std stuff I throw at the top of the file
[02:00:02] *** Quits: JesseH (JesseH@moz-2E766C3E.mc.at.cox.net) (Ping timeout)
[02:00:10] *** Quits: miza (miza@moz-908EA8DE.home.otenet.gr) (Quit: Leaving.)
[02:03:19] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[02:04:59] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[02:09:59] <mark_edward> Eridius: can you tell what's the problem ehre? https://gist.github.com/MarkJr94/6567452
[02:10:23] <antifuchs> huh, so HashSet<>s look cool, how would I construct one? I have added "use std::hashmap"; but nooo clue how to get (even a managed) instance of a HashSet, from reading the docs
[02:10:53] <eevee> HashMap::new()
[02:11:11] <antifuchs> agh, ::new()
[02:11:28] *** Quits: Will_Z (Mibbit@DB953687.EEDD3B02.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:11:38] <eevee> seems to be becoming a convention so it's probably a safe assumption
[02:11:45] <eevee> this is one of my gripes with rustdoc though  :)
[02:12:23] <mark_edward> rusti: use std::hashmap::*; let mut h = HashSet::new();  h.insert(1i,2u); h
[02:12:50] <mark_edward> rusti isn't here :(
[02:13:49] <antifuchs> so, sweet, thanks everyone (:
[02:13:53] <engla> of course, it's only a single argument for h.insert(k) on HashSet
[02:13:56] <antifuchs> I have more questions where these came from!
[02:14:07] <eevee> oh, set, yes
[02:29:15] <engla> does anyone know if this is a hole in macro hygiene? https://gist.github.com/anonymous/1d92e678d2277ae1052c
[02:30:10] <engla> I think it is, if outside_var were a `let outside_var = 2;` it is rejected
[02:30:42] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[02:31:40] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[02:34:30] <engla> hm the recent changes are only let var hygiene, that's why. it's still open
[02:35:39] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:35:50] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[02:35:50] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/5Xy8Zg
[02:35:50] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[02:36:55] *** Joins: steveo (Mibbit@moz-74AF8484.cdrr.qwest.net)
[02:37:25] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[02:38:28] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[02:40:23] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[02:40:31] <mark_edward> does rust have a newtype thing like Haskell?
[02:41:35] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[02:41:41] <cmr> mark_edward: yes
[02:41:47] <cmr> struct Foo(Bar);
[02:41:50] <cmr> Foo is now a newtype.
[02:42:08] <cmr> We don't have some of the extensions ghc has
[02:42:24] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[02:45:07] <antifuchs> I notice that strings can have slices, and that there are split iterators - how can I split a string at ":", though? 
[02:45:26] <antifuchs> I tried to get the first element via line.as_slice().split_iter(':').advance();
[02:45:38] <mark_edward> cmr: how can you get at the underlying tpe?
[02:45:39] <antifuchs> buuut that says error: this function takes 1 parameter but 0 parameters were supplied
[02:45:47] <cmr> mark_edward: dereference operator.
[02:46:04] <engla> antifuchs: advance is the wrong method. .next() is the method to get the next element (or None) from an iterator
[02:46:06] <cmr> antifuchs: you don't use advance, you use next
[02:46:12] <antifuchs> ah!
[02:46:37] <cmr> mark_edward: so if you have `let foo = Foo::new(some_bar)`, you do `*foo` to get at the Bar inside.
[02:46:58] <engla> antifuchs: you can just do   for first in line.split_iter(':') {   /* use first */; break }
[02:47:01] <mark_edward> cmr: ah i see!
[02:47:18] <antifuchs> engla: that works, too! thank you and cmr (:
[02:47:25] *** Quits: kimundi (kimundi@moz-3ECBAE9C.dip0.t-ipconnect.de) (Ping timeout)
[02:50:30] <Eridius> mark_edward: did you get an answer for your region issue?
[02:50:33] *** Joins: kimundi (kimundi@moz-E6949FE1.dip0.t-ipconnect.de)
[02:50:49] <Eridius> mark_edward: I think the problem is transmute_region actually doesn't work on slices. Just use cast::transmute() instead
[02:50:53] <mark_edward> Eridius: yes i did! i just used transmute instead of transmute_region and it worked :\
[02:53:37] <engla> mark_edward: your function: fn slice_from_c_str<'a>(cstr: *c_char) -> &'a str 
[02:53:50] <engla> this is not safe by itself, since it allows making a slice of any lifetime
[02:54:03] <Eridius> yeah it should probably be marked unsafe
[02:54:26] <mark_edward> engla: true, i'll do that. i think it's already used inly in unsafe blocks, so that makes sense
[02:55:15] *** kimundi is now known as zz_kimundi
[02:55:44] <engla> since it returns a slice of arbitrary lifetime, you don't need transmute, returning &'static str is just the same thing
[02:55:57] <engla> is almost just the same thing
[02:58:04] <antifuchs> oh wow, #[test] is amazing.
[02:58:19] <antifuchs> and I just used matching and Option<> for the first time. it's awesome
[03:00:33] <engla> nice way to put it antifuchs 
[03:00:56] <antifuchs> nowwww, I'm getting a type error one function up. will paste, hold on (:
[03:01:46] <antifuchs> https://gist.github.com/antifuchs/6567690
[03:02:10] *** zz_kimundi is now known as kimundi
[03:02:41] <Eridius> antifuchs: the type of your match arms differ, so it can't calculate a type for the match expression
[03:02:42] <antifuchs> I guess I tried a couple variants there, let me paste the original.
[03:02:45] <antifuchs> huh
[03:02:46] <Eridius> one match arm is `set.insert(n)`, which returns bool
[03:02:50] <Eridius> the other is `()` which is of course ()
[03:03:03] <antifuchs> I tried returning false from the second arm
[03:03:07] <Eridius> so you should probably say `Some(n) => { set.insert(n); }`
[03:03:19] <antifuchs> ohhh
[03:03:21] <Eridius> also you can delete line 16
[03:03:31] <jeaye> Gararagh, Rust borrow checking, rah
[03:03:34] <Eridius> if the match expression is typed as () then it's fine as-is. If it has a type that you don't want, you just slap a ; at the end
[03:03:40] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[03:03:53] <jeaye> Works when 'model' is immutable, doesn't work with mut. https://gist.github.com/jeaye/d9f3973c1436b88d88c8
[03:03:57] <engla> strcat: I think I found a bug in RangeStep already ^^
[03:03:59] <jeaye> Why? :(
[03:04:05] <antifuchs> excellent, the block was what I was missing. now to make the set properly mutable
[03:04:12] <engla> strcat:  (self.rev && self.state > self.stop) || self.state < self.stop
[03:04:21] <Eridius> antifuchs: https://gist.github.com/kballard/6567701
[03:04:23] <engla> the second half needs to be  !self.rev   I think
[03:04:26] <Eridius> btw calling .as_slice() on a &str is quite silly, so I deleted it
[03:04:39] <Eridius> antifuchs: also why are you returning a @HashSet<int> instead of just a HashSet<int>?
[03:04:47] <antifuchs> amazing, thanks Eridius (:
[03:04:54] <engla> saw "hilarious" failure with range_step in std::char,  range_step(28, -1, -4) => kaboom?
[03:05:08] <antifuchs> no reason - I was playing around with the allocation syntax, and that stuck
[03:05:11] <antifuchs> I'll drop the @
[03:05:20] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[03:05:34] <antifuchs> Eridius: I have no intuition for rust memory management/ownership/etc. yet (:
[03:05:54] *** Quits: eevee (eevee@moz-D25DD324.evrt.wa.frontiernet.net) (Quit: leaving)
[03:05:59] <antifuchs> (and just like that, this works! thanks ((-:)
[03:06:54] <antifuchs> waiiiit, is the rust naming convention StudlyCaps for structs only, and under_scores for functions/methods?
[03:07:05] <antifuchs> (if so, I should probably change this code!)
[03:07:10] <Eridius> yeah
[03:07:19] <antifuchs> renaming queued!
[03:07:29] <Eridius> I just code-golfed sessionNumber: https://gist.github.com/kballard/6567701
[03:07:37] <Eridius> the match is fine if you don't mind multiple lines of course
[03:08:13] *** Joins: eevee (eevee@moz-D25DD324.evrt.wa.frontiernet.net)
[03:08:22] <antifuchs> omg and_then
[03:08:24] <antifuchs> that's awesome ((:
[03:08:40] <Eridius> used to be called .chain(). I'm not actually a fan of the renaming, but I guess it's more descriptive
[03:09:34] <antifuchs> oh myyy. in an age where people add un-googleable syntax for this sort of thingâ€¦ (:
[03:09:40] <antifuchs> yep, this is pretty wonderful.
[03:12:34] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[03:12:34] <engla> it's nice since the split_iter is of course lazy
[03:12:44] <engla> and reasonably efficient
[03:13:05] <dbaupp> Eridius: `int::from_str` still exists?
[03:13:23] <Eridius> dbaupp: AFAIK yeah, although I suppose it's considered deprecated
[03:13:25] <engla> those are on my hit list dbaupp (although be my guest)
[03:13:28] <Eridius> should probably slap the new #[deprecated] tag on it
[03:13:37] * dbaupp does that
[03:13:47] <Eridius> rusti: let x: Option<int> = from_str("32")
[03:13:51] <engla> why do that? can't you just remove them
[03:13:58] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[03:14:00] <engla> in favor of from_str in the prelude
[03:14:01] * dbaupp wants to use #[deprecated] for something
[03:14:06] <Eridius> where's rusti?
[03:14:30] <dbaupp> strcat: people are missing their dear rusti. :(
[03:18:08] <antifuchs> so, wait, should just from_str("1290") return an integer if the return type matches?
[03:18:24] <antifuchs> (I saw int::from_string() and thought that was the thing to use, hmmm)
[03:18:27] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Ping timeout)
[03:18:40] <antifuchs> ("from_str", of course)
[03:18:42] <dbaupp> acrichto: oh, I see! merging the statics would be very useful; are you gensym-ing the name of the static/does this change the symbol name?
[03:19:01] <dbaupp> antifuchs: yeah, int::from_str is just an old function that hasn't been removed yet
[03:19:11] *** Joins: lex (lex@moz-12347B81.bootp.virginia.edu)
[03:19:23] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[03:19:30] <dbaupp> antifuchs: and yes; the type inference means that it'll parse it as an int if the return type is inferred to be Option<int>
[03:19:34] <engla> I'm migrating range_step now so uint/int::range_step will be gone
[03:19:36] <Eridius> antifuchs: from_str() is a method on the trait std::from_str::FromStr and it uses the return type to infer the correct implementation
[03:19:41] <antifuchs> oh, cool! then I'll just use from_str. I thought I had to be explicit about what I wanted the conversion to result in, but of course rust has type inference that works (:
[03:19:48] <dbaupp> engla: I'll let you handle from_str then
[03:19:51] <engla> dbaupp: I was suggesting that all the modules  std::uint, std::u8 etc maybe aren't needed
[03:19:54] <antifuchs> that's just amazing (:
[03:19:58] <dbaupp> engla: move them to std::num
[03:20:06] * dbaupp is going to move stuff under std::str
[03:20:08] <lex> Hi, I'm a student working with Rust 0.7 for an operating systems class. I'm having a little trouble understanding how to use std::path. I'm trying to make a path from a ~[
[03:20:12] <lex> oops.
[03:20:25] <dbaupp> engla: i.e. std::num::uint, etc.
[03:20:25] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[03:20:57] <lex> I'm trying to make a path from a ~[~str] by using from_str and using fmt!, but I get: error: type `std::path::PosixPath` does not implement any method in scope named `from_str`
[03:21:23] <engla> basically those modules don't need to be exposed if we have all the generic stuff in std::num.  But for now, access to statics like uint::max_value, uint::bits is needed 
[03:21:29] <engla> dbaupp: sounds good to me
[03:21:32] <dbaupp> lex: is the ~[~str] meant to be the "/foo/bar/baz"? 
[03:21:42] <dbaupp> lex: (i.e. the parts between "/")
[03:21:43] <dbaupp> ?
[03:22:03] <Eridius> lex: just use the function PosixPath(). The from_str method is on GenericPath
[03:22:27] <dbaupp> Eridius, lex: no, `Path`.
[03:22:34] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:22:36] <strcat> dbaupp: whoops
[03:22:57] <dbaupp> Eridius, lex: `Path` is aliased to PosixPath or WindowsPath based on the platform
[03:23:03] <strcat> engla: hm?
[03:23:32] <engla> strcat: found a bug^^  range_step(28, -1, -4) is infinite
[03:23:32] <strcat> engla: ah right
[03:23:34] <dbaupp> lex: but, I think `Path(vector.connect("/"))` might work
[03:23:40] <lex> ~[~str] is meath to be the "/foo/bar/baz"
[03:23:45] <strcat> engla: yeah I should have made better tests
[03:23:47] <strcat> ;p
[03:23:51] <engla> strcat: I'm writing one
[03:23:56] <dbaupp> lex: plus the leading "/" if you need it
[03:24:12] <lex> I'll try those two suggestions. Thanks!
[03:24:21] <dbaupp> lex: oh, there's a helper function: Path("/").push_many(vector)
[03:24:33] <engla> strcat: I'm not smug just to be an ass, but since this bug made me recompile stage1 like 5 times until I found the cause of the OOM errors..
[03:24:52] <dbaupp> rusti: Path("/").push_many(&["foo", "bar", "baz"]).to_str()
[03:24:53] <strcat> engla: oh since it goes forever and you were making a string
[03:24:54] -rusti- ~"/foo/bar/baz"
[03:24:55] <strcat> heh
[03:24:57] <dbaupp> lex: ^
[03:24:58] <engla> (escape_unicode)
[03:25:17] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[03:25:38] <strcat> stupid deltas take forever to apply
[03:25:40] * strcat sighs
[03:25:43] <strcat> generating rust-git-0.7.2702.g524c190-1-x86_64.pkg.tar.xz with rust-git-0.7.2649.gb81743e-1_to_0.7.2702.g524c190-1-x86_64.delta... 
[03:25:45] <strcat> :|
[03:26:10] <lex> Path("/").push_many(vector) did the trick! Other than rust-lang.org, are there any recommend resources for learning more about rust?
[03:26:20] <strcat> rusti: 2
[03:26:21] -rusti- 2
[03:26:24] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[03:26:47] <dbaupp> lex: here (and #cs4414)
[03:27:12] <dbaupp> lex: (you should encourage the rest of your classmates to come here: it'll make the learning process much much easier.)
[03:27:46] <dbaupp> lex: there's also http://www.rustforrubyists.com/ (I think it's valid 0.7 code?)
[03:27:48] <dbaupp> cmr: ^
[03:27:49] *** Quits: ww (Mibbit@moz-9D1D3E.public.wayport.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:29:44] <dbaupp> lkuper: nice deletions
[03:29:49] * dbaupp <3 default methods
[03:30:13] <strcat> engla: I want to find a better way of writing them too
[03:30:19] <strcat> the range_step things
[03:31:42] <cmr> dbaupp: it's not
[03:31:50] <dbaupp> cmr: oh :(
[03:32:04] <dbaupp> lex: (rustforrubyists probably doesn't help that much then.)
[03:32:36] <strcat> engla: hm, why does my existing rev test work
[03:32:39] <engla> strcat: ok, I it looks pretty simple right now
[03:32:45] <engla> strcat: it finishes evenly
[03:32:52] <engla> strcat: this is a fix commit https://github.com/blake2-ppc/rust/compare/range-step
[03:33:19] <strcat> engla: need to fix the other too
[03:33:23] <strcat> range_step_inclusive
[03:33:27] <engla> but I wanted to make a PR to remove uint::range_step (and the others) so I'm continuing that
[03:33:30] <engla> oh ok
[03:33:39] <dbaupp> strcat: range_step is broken for uint, right?
[03:34:15] <dbaupp> i.e. range_step(20, 0, -1) is not going to do the expected thing?
[03:34:17] <engla> strcat: I thought it reused RangeStep.
[03:34:29] <strcat> engla: it was too messed up
[03:34:29] <dbaupp> (with 20u)
[03:34:42] <strcat> engla: since RangeStep uses the hack of assigning the stop to the state
[03:34:44] <strcat> to stop
[03:36:12] <antifuchs> just refactored the whole thing to use TrieSet instead of HashSet (because the orderedness is actually a great thing), by renaming two types and modding one function's return type to be uint.
[03:36:17] <antifuchs> I think I'm in love ((:
[03:36:36] <strcat> there's also TreeSet in libextra
[03:36:49] <strcat> TrieSet is a bit weird since I was too lazy to make it generic so far.
[03:37:09] <dbaupp> it'd be awesome to have first class string trie support.
[03:37:14] <dbaupp> <3 tries
[03:37:35] <strcat> you really, really need path compression for strings
[03:37:59] <strcat> it's just a naive trie with suffix compression
[03:38:05] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[03:38:21] <dbaupp> right
[03:38:22] * strcat will add suffix buckets to make it a burst trie
[03:38:34] <strcat> probably not path compression, too slow for the memory you save
[03:38:35] <strcat> for ints
[03:38:47] <dbaupp> aha
[03:38:49] <antifuchs> strcat: it's pretty cool for integers, since that's what I want ((:
[03:38:56] <antifuchs> (unsigned ones, too!)
[03:39:06] <dbaupp> strcat: did you fi{nd,x} the cause of the segfaults with sret?
[03:39:12] <strcat> dbaupp: no
[03:39:20] <strcat> well I know where it segfaults
[03:39:22] <strcat> but not why
[03:39:35] <strcat> (I know *why* in the extreme local case but not how it ends up that way...)
[03:39:54] <strcat> dbaupp: I am probably going to land the rest of that work separately
[03:40:05] <antifuchs> now, is there a way to exec() another program? I don't see any in std::run - guess I'll have to use the posix functions?
[03:40:14] <mcpherrin> rusti: ~[1,2,3].slice(1,2)
[03:40:20] -rusti- pastebinned 15 lines of output: http://ix.io/84a
[03:40:24] <dbaupp> strcat: eurgh :(
[03:40:25] <strcat> antifuchs: yeah, you probably just have to use the posix stuff
[03:40:36] <dbaupp> rusti: printfln!((~[1,2,3]).slice(1,2))
[03:40:37] <strcat> for now
[03:40:40] -rusti- pastebinned 23 lines of output: http://ix.io/84b
[03:40:42] <antifuchs> strcat: makes sense. execvp to the rescue (:
[03:40:50] <antifuchs> or whichever I'll end up using
[03:40:58] <dbaupp> rusti: let v = ~[1,2,3]; printfln!(v.slice(1,2))
[03:40:58] <strcat> rust's stdlib is not very mature :)
[03:40:59] -rusti- &[2]
[03:40:59] -rusti- ()
[03:41:02] <dbaupp> mcpherrin: ^
[03:41:10] <mcpherrin> strcat: what's the program rusti wraps around the input line?
[03:41:15] <antifuchs> strcat: it's fairly great, if you ask me - I'd expected this to be a /lot/ harder
[03:41:28] <strcat> mcpherrin: https://github.com/thestinger/rust-playpen/blob/master/bin/irc.sh
[03:41:31] <antifuchs> and I'm almost done, after only (I don't know how few) hours (:
[03:41:53] <strcat> antifuchs: yeah, it's a great language - just not very mature ;P
[03:42:01] *** Joins: wippler (Mibbit@moz-617F0DD0.hsd1.va.comcast.net)
[03:42:03] *** Quits: wippler (Mibbit@moz-617F0DD0.hsd1.va.comcast.net) (Quit: wippler)
[03:42:40] <antifuchs> I say! better get started getting rid of all the code that doesn't work anymore - otherwise you end up with a "list tutorial" google search situation (:
[03:43:10] <antifuchs> (for the longest time, that search yielded no single useful tutorial in the top 5 results)
[03:43:23] <antifuchs> (it now has PCL, which is a marked improvement)
[03:43:35] <strcat> PCL?
[03:44:16] <antifuchs> Practical Common Lisp, sorry (:
[03:45:09] <engla> strcat: why not use <= in range_step_inclusive? it passes the tests.. https://gist.github.com/anonymous/51ece194ddcdf81f9491
[03:45:23] <antifuchs> anyway - I hope that rust will see many many pages with new and working code soon to drown out the few that have old code (:
[03:45:36] <strcat> engla: it didn't before I rewrote it to have that weird done bool
[03:45:36] *** Joins: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[03:45:37] <strcat> ;p
[03:46:50] *** Quits: StarLight (StarLight@moz-A264C0A7.pppoe.avangarddsl.ru) (Ping timeout)
[03:47:26] <strcat> engla: anyway feel free to fix it
[03:47:36] <strcat> we also need to fix range_inclusive (the non-step one)
[03:47:38] <strcat> I'll do that
[03:48:46] <engla> not sure if I can come up with something smart. I'm getting rid of uint/int::range_step simply. it's a mechanical task like lkuper said
[03:50:29] <strcat> rusti: version
[03:50:29] -rusti- "rustc 0.8-pre (524c190 2013-09-14 12:30:54 -0700)"
[03:50:42] *** Joins: StarLight (StarLight@moz-EDFEE499.dynamic.avangarddsl.ru)
[03:51:02] <cmr> Quick status update: I've cut the list of PRs for TWiR, but will write it tomorrow as I had and still have lots of homework, and exams next week.
[03:51:16] <sfackler> has anyone seen this? task <unnamed> failed at 'borrowed', /build/rust-git/src/rust/src/librustc/middle/resolve.rs:508
[03:51:29] <sfackler> the weird thing is that resolve.rs:508 is just let imports = &mut *self.imports;
[03:51:37] <cmr> sfackler: is self.imports a @mut ?
[03:51:44] <cmr> If so, that's the dynamic borrow checker in action.
[03:51:51] <sfackler> ah, yeah that's it
[03:52:06] <cmr> Can't have multiple mutable borrows to a @mut, it'd break the aliasing rules.
[03:52:12] <sfackler> yep
[03:52:15] <cmr> But can't verify at compiletime, so runtime hooks
[03:52:16] <cmr> yay @mut
[03:52:30] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[03:52:37] * strcat is going to kill @[T] and @mut [T]
[03:53:07] <bblum> hmm
[03:53:21] <sfackler> wee compiler bugs
[03:53:21] <bblum> if the justification for that is that you can always use @~[T],
[03:53:31] <engla> what about @str?
[03:53:31] <bblum> does the same justification not also hold for @fn() ?
[03:53:36] <strcat> bblum: the justification is that they're useless - we want gc'ed and rc'ed slices
[03:53:38] <bblum> and @Trait?
[03:53:46] <strcat> bblum: well I mean wiping them out in the current form
[03:53:48] <strcat> I want to have
[03:53:50] <strcat> @[1, 2, 3]
[03:53:56] <strcat> and be able to slice out
[03:53:58] <strcat> @[2, 3]
[03:54:08] <strcat> since you can't resize them
[03:54:08] <bblum> hmm
[03:54:15] <strcat> resizing would invalidate the references
[03:54:18] <bblum> that seems difficult
[03:54:23] <strcat> bblum: seems easy to me
[03:54:31] <bblum> is &[2,3] not just as easy?
[03:54:34] <strcat> (start, end, InternalBoxRepr)
[03:54:42] <bblum> for the user to use i mean
[03:54:44] <strcat> bblum: gc'ed slices can outlive where you get them from
[03:54:52] <bblum> uhm
[03:55:11] <strcat> bblum: you'd only be able to slice @[] from @[]
[03:55:16] <bblum> what happens if you have @[1,2,3,4] and slice out @[2,3] and drop the original?
[03:55:21] <bblum> will the GC know to collect '4'?
[03:55:27] <strcat> bblum: no
[03:55:40] <strcat> it will hold onto the whole vector until the slices are all gone
[03:55:45] <bblum> oh ok
[03:55:48] <bblum> hmmmm
[03:55:52] <bblum> this seems 'surprising'
[03:56:00] <strcat> well I think this is what D slices are
[03:56:29] <strcat> bblum: maybe surprising for Rc, but @ doesn't have deterministic destruction anyway
[03:56:48] <strcat> so you can't count on anything but it being gone at the end of the task
[03:56:56] <strcat> (pretending we have a gc)
[03:57:17] <strcat> bblum: atm @mut [T] is pretty silly
[03:57:19] <strcat> since it's
[03:57:28] <strcat> { length, capacity, data[] }*
[03:57:35] <strcat> but the capacity is always equal the length, and you can't resize it
[03:57:50] <mcpherrin> bblum: strcat: I'd expect it to hold onto the whole thing, but I also expect this to lead to painful memory bloat for somebody in the future
[03:58:08] <strcat> well you wouldn't use it often
[03:58:15] * strcat shrugs
[03:58:20] <strcat> I'd expect it to just be a library feature
[03:58:30] <mcpherrin> it's not an argument against it, just something that I'd note in documentation
[03:58:33] <strcat> since pcwalton wants to remove @ from the language (using lang items instead)
[03:58:53] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[03:59:14] <bblum> yeah, i mean, i don't like @[T] in its current form either, but i also don't really like the taste of this slice behaviour as something that would be built-in
[03:59:32] <strcat> bblum: it's be in extra::rc, for now
[03:59:40] <strcat> @/@mut aren't useful until a gc lands anyway
[04:00:02] <strcat> it'll*
[04:01:30] *** Quits: joshua_ (joshua@moz-45967CBE.emarhavil.com) (Ping timeout)
[04:01:58] <antifuchs> now the fun times begin: C FFI with strings and arrays of pointers to strings
[04:02:20] *** Quits: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper_)
[04:02:37] <antifuchs> I see c_str and .to_c_str(), but that doesn't return *i8, which I could hand to libc::posix::execv
[04:02:46] <antifuchs> how would I convert a rust string to *i8?
[04:02:52] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[04:03:01] <strcat> rust string's are nul-terminated, so you need to_c_str/with_c_str
[04:03:08] <cmr> aren't, not are
[04:03:15] <strcat> er, yeah
[04:03:20] <antifuchs> yeah, that much I understand from the FFI documentation
[04:03:25] <antifuchs> but how do I go c_str->*i8 (:
[04:03:31] <strcat> antifuchs: well that's good, I usually expect the documentation to be wrong
[04:03:34] <strcat> ;p
[04:03:37] <antifuchs> hah
[04:03:59] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[04:04:11] <strcat> engla: so yeah, the other bug is this
[04:04:23] <strcat> rusti: range_inclusive(5, 3).to_owned_vec()
[04:04:23] -rusti- <anon>:7:9: 7:24 error: unresolved name `range_inclusive`.
[04:04:23] -rusti- <anon>:7          range_inclusive(5, 3).to_owned_vec()
[04:04:23] -rusti-                   ^~~~~~~~~~~~~~~
[04:04:24] -rusti- error: aborting due to previous error
[04:04:24] -rusti- application terminated with error code 101
[04:04:29] <strcat> rusti: std::iter::range_inclusive(5, 3).to_owned_vec()
[04:04:30] -rusti- ~[3]
[04:04:37] <strcat> rusti: std::iter::range_inclusive(5, 3).map(|x| x * 2).to_owned_vec()
[04:04:38] -rusti- ~[6]
[04:04:40] <strcat> poor broken thing
[04:04:44] *** Joins: joshua_ (joshua@moz-45967CBE.emarhavil.com)
[04:04:56] <antifuchs> ohhh, I guess CString.unwrap would be it
[04:05:05] <strcat> antifuchs: that'll leak
[04:05:10] <engla> oh. it's supposed to be empty?
[04:05:12] <strcat> unwrap is to say "give me ownership of the ptr"
[04:05:13] <antifuchs> strcat: i'm passing it to execv ((:
[04:05:19] <strcat> antifuchs: oh, doesn't matter then
[04:05:26] <strcat> but usually, you'd want the non-unwrap one
[04:05:29] <antifuchs> not suuuper concerned with ownership at that point
[04:05:39] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[04:05:49] <strcat> although you probably don't want it to leak if execv fails ;p
[04:05:58] <antifuchs> I see, is it the with_ref one?
[04:06:01] <strcat> antifuchs: probably
[04:06:03] <strcat> yeah
[04:06:09] <antifuchs> oh yeah, that looks good
[04:06:14] <strcat> engla: yeah
[04:06:20] <strcat> engla: easy fix
[04:06:24] * strcat will do it
[04:07:14] <engla> strcat: don't you think it's better to use <= there too? That's much more sane than injecting the self.stop value
[04:07:46] *** Quits: Diamond (dick@moz-63AD8970.ks.ok.cox.net) (Client exited)
[04:07:49] <strcat> engla: maybe
[04:07:56] <strcat> it doesn't use checked_add atm
[04:10:10] *** Joins: ferristseng (ferristsen@moz-617F0DD0.hsd1.va.comcast.net)
[04:11:00] <ferristseng> hi
[04:11:31] <dbaupp> hello
[04:11:45] *** Quits: ferristseng (ferristsen@moz-617F0DD0.hsd1.va.comcast.net) (Quit: leaving)
[04:11:58] <dbaupp> rusti: version
[04:12:00] -rusti- "rustc 0.8-pre (524c190 2013-09-14 12:30:54 -0700)"
[04:12:08] <dbaupp> neat
[04:13:35] <strcat> dbaupp: did you look at the script for that? ;p
[04:14:26] <dbaupp> strcat: certainly not :P
[04:14:32] <strcat> dbaupp: https://github.com/thestinger/rust-playpen/blob/master/bin/irc.sh
[04:14:48] * strcat finds it odd that it has the time zone
[04:15:40] <dbaupp> it's the timezone of the commit too, not the build (e.g. I have rustc 0.8-pre (d09f569 2013-09-09 00:26:07 -0700), but I'm in +1000)
[04:15:48] <engla> strcat: the PR I wanted to make was simply this https://github.com/mozilla/rust/pull/9202
[04:15:53] *** Joins: JesseH (JesseH@moz-2E766C3E.mc.at.cox.net)
[04:15:59] <strcat> dbaupp: I'm not in -0700 anyway, that's the build server
[04:16:31] <dbaupp> strcat: I think it's bors' timezone, since he's the merger.
[04:16:35] <strcat> ah
[04:16:44] <strcat> that's why it confused me then
[04:17:12] <antifuchs> so, it has been a while for me since I last worked with FFIs. how can I create an FFI-able array of pointers?
[04:17:27] <antifuchs> that is, something that can be made into **i8?
[04:17:54] <dbaupp> engla: could this (https://github.com/mozilla/rust/pull/9202/files#L2R289) be range_step(4i32 * ....) ?
[04:17:56] <Eridius> antifuchs: construct a &[*i8] (or ~[*i8])
[04:17:59] <antifuchs> the array should contain pointers to C strings (I know how to make *i8 from those!), but I am stuck at the array allocation
[04:18:06] <antifuchs> oh, cool!
[04:18:09] <antifuchs> that I can do (:
[04:18:15] <dbaupp> engla: (although how you have it is perfectly fine too.)
[04:18:30] <engla> dbaupp: it could be
[04:18:32] <Eridius> antifuchs: I think there's a vec::raw function that would then turn that into **i8, or you could just take the address of v[0]
[04:18:35] <Eridius> and conver that
[04:18:39] <antifuchs> oh!
[04:18:59] <dbaupp> there's v.unsafe_ref(0) too
[04:19:14] <Eridius> oh there is? well there you go
[04:19:25] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[04:19:29] * dbaupp doesn't remember the exact name is
[04:19:41] <antifuchs> excellent, vec::raw::to_ptr is what I was looking for, I think
[04:19:43] <dbaupp> ok, yeah, .unsafe_ref
[04:20:14] <dbaupp> engla: golly, the old range_step's are horrible
[04:21:51] *** Joins: maik (maik@moz-58B2DA03.dip0.t-ipconnect.de)
[04:22:03] <engla> dbaupp: they leave a lot to the optimizer to eliminate, I think that can be an ok strategy
[04:22:10] <engla> I was thinking of that for Range/RangeStep
[04:22:11] <strcat> hm
[04:22:26] <engla> but I'm not a rangeologist
[04:22:28] <strcat> engla: is it alright if I send in a PR fixing the range_step ones? I want to fix the other issues too
[04:22:40] <engla> yes
[04:22:46] <dbaupp> engla: yeah; I just mean there's a lot of code and special cases
[04:22:54] * strcat isn't quite sure how to keep the size hint right
[04:22:56] * strcat sighs
[04:23:11] <dbaupp> what's the problem?
[04:23:16] <dbaupp> negative steps?
[04:23:20] <strcat> no
[04:23:27] <strcat> I mean range_inclusive
[04:23:32] <dbaupp> ah
[04:23:45] <antifuchs> ok, awesome, I think I'm at a point where I can execvp things!
[04:23:55] <antifuchs> (or cause hilarious segfaults) (:
[04:24:15] *** Quits: maik (maik@moz-58B2DA03.dip0.t-ipconnect.de) (Ping timeout)
[04:24:27] <dbaupp> antifuchs: (btw, there's std::libc::exec{v,vp,...})
[04:24:37] <antifuchs> dbaupp: yeah, that's what I'm calling (:
[04:24:53] <antifuchs> it requires unsafe {} and other funny things I didn't know exist!
[04:25:08] <dbaupp> antifuchs: ok, cool, just checking :)
[04:25:24] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[04:25:27] <strcat> engla: so many weird edge cases...
[04:25:33] *** Quits: z0w0 (zack@moz-61B3764E.qcl9.cha.bigpond.net.au) (Quit: z0w0)
[04:28:01] <dbaupp> strcat: size_hint = let (n, rem) = (stop - start).div_mod(step); if rem.is_zero() { n + 1 } else { n }?
[04:28:12] <dbaupp> (I guess that's broken for step < 0)
[04:28:17] <strcat> yep
[04:30:05] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[04:30:36] <strcat> engla: I'll cherry-pick your 2 other commits
[04:30:41] *** Joins: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[04:30:46] * strcat just wants to add some test cases, etc.
[04:31:10] <strcat> need to keep range_inclusive(200, 200) working
[04:31:11] <engla> ok that's great
[04:31:12] <strcat> ;p
[04:33:48] <strcat> rusti: std::iter::range_inclusive(5, 10).invert()
[04:33:52] -rusti- pastebinned 1 lines of output: http://ix.io/84c
[04:34:01] <strcat> rusti: std::iter::range_inclusive(5, 10).invert().to_owned_vec()
[04:34:02] -rusti- ~[10, 9, 8, 7, 6, 5]
[04:34:02] <dbaupp> erickt: the buildbot runs the benchmarks and uploads the jsons to S3, and so I *should* be fetching it and plotting it; but (1) it's hard to download (because I need to know the exact host/build/target triples for each build), and (2) it's a lot of data, and I don't know how to present it best.
[04:34:07] <strcat> rusti: std::iter::range_inclusive(10, 10).invert().to_owned_vec()
[04:34:08] -rusti- ~[10]
[04:34:14] <strcat> rusti: std::iter::range_inclusive(10, -1).invert().to_owned_vec()
[04:34:14] -rusti- ~[-1]
[04:34:17] <strcat> haha
[04:34:18] * strcat sighs
[04:35:16] <dbaupp> erickt: (I actually asked graydon to help fix (1)... but that was literally days before he left, so I guess I'll have to ask brson or someone else with buildbot access.)
[04:35:20] * dbaupp emails
[04:41:37] *** Joins: feduser (feduser@B184DF8C.1F811DF7.CDBED010.IP)
[04:41:57] <antifuchs> https://gist.github.com/antifuchs/6568076 - all my solutions to attaching a NULL pointer to the end of the arguments vector seem to make the type inference super unhappy
[04:42:07] <antifuchs> any hints how I could get a *i8 NULL pointer?
[04:42:13] <antifuchs> â€¦and attach that to the end of the vector?
[04:42:45] <strcat> std::ptr::null()
[04:42:54] <antifuchs> yep, I got this far, see line 9 (:
[04:42:59] <Eridius> antifuchs: don't use + [ptr::null()]. Just make c_args mut and then .push it
[04:43:08] <antifuchs> oh. yeah. oops (:
[04:43:20] <strcat> antifuchs: you can't append to &[T] or &mut [T] because slices are views
[04:43:23] <Eridius> https://gist.github.com/kballard/6568087
[04:43:34] <antifuchs> ohohoho. this works!
[04:43:41] <antifuchs> thanks a lot Eridius (:
[04:43:44] <strcat> oh I misread it
[04:44:21] *** Quits: Jessin (Jessin_@moz-971F1FB4.cc.lehigh.edu) (Quit: Leaving)
[04:45:15] <antifuchs> ZOMG it's actually, completely, working.
[04:45:24] <antifuchs> I can't believe I got this far today ((:
[04:45:25] <Eridius> \o/
[04:45:31] <antifuchs> \o/
[04:45:41] <antifuchs> thank you sooooo much, everyone! this was an amazing experience (:
[04:45:50] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[04:45:50] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/_yo7Iw
[04:45:50] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[04:45:53] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[04:45:53] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/8OnM_A
[04:45:53] <ghrust> 13rust/06auto 14a7e49d6 15Tim Chevalier: rustpkg: Always write a package_id attribute into the link metadata...
[04:45:53] <ghrust> 13rust/06auto 14ccadbd3 15bors: auto merge of #9179 : catamorphism/rust/rustpkg-package-id, r=catamorphism,metajack...
[04:45:53] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[04:45:57] <strcat> wait wat
[04:46:08] <strcat> hm
[04:46:30] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[04:49:36] <antifuchs> here's my code, everyone: https://github.com/antifuchs/tmux_min_attacher - next steps are testing this as my login shell, and actually documenting what it's supposed to do
[04:50:04] <antifuchs> (the simple version is that I want a small, fast thing that reattaches to the lowest detached tmux session number) (:
[04:50:47] *** Joins: tautologico (shung@E14878C0.75051ED3.7B974E06.IP)
[04:51:08] <tautologico> is there a scanf! ?
[04:52:02] <strcat> no, although it *could* exist
[04:52:19] <strcat> but it would probably be more idiomatic to just use parser combinators or something
[04:52:25] <Eridius> antifuchs: btw .to_c_str().with_ref() can be shortened to .with_c_str()
[04:52:30] <engla> there is from_str for simple things
[04:52:55] <antifuchs> ah, that's useful (:
[04:52:58] <dbaupp> antifuchs: neat :)
[04:53:30] <tautologico> so what's the easiest way to read an int or a float? 
[04:54:00] <dbaupp> rusti: use std::trie::TrieSet; range(0, 10).collect::<TrieSet>()
[04:54:06] -rusti- pastebinned 14 lines of output: http://ix.io/84d
[04:54:32] <dbaupp> rusti: use std::trie::TrieSet; range(0u, 10).collect::<TrieSet>()
[04:54:38] -rusti- pastebinned 1 lines of output: http://ix.io/84e
[04:55:08] <dbaupp> antifuchs: you can use that ^ and .filter_map, to shorten `detached_sessions` :)
[04:55:32] <engla> tautologico: you can use from_str to parse a specific number
[04:55:40] <strcat> dbaupp: https://github.com/mozilla/rust/pull/9203 r?
[04:56:06] <engla> rusti: "1.1 2.2 xyz 4.43".word_iter().map(|word| from_str::<float>(word)).to_owned_vec()
[04:56:07] -rusti- ~[Some(1.1), Some(2.2), None, Some(4.43)]
[04:56:17] <antifuchs> dbaupp: oooh, nice, I was hoping there are some collection comprehensions that I'd missed! nice (:
[04:56:31] <tautologico> engla: so I have to read a "word" and then use from_strâ€¦ thanks
[04:56:49] <strcat> antifuchs: there's a not-very-complete iterator tutorial btw
[04:56:57] <strcat> but it's up-to-date
[04:56:59] <antifuchs> ! should check that out next (:
[04:57:07] <dbaupp> rusti: fn detached_session(o: &str) -> std::trie::TrieSet; { o.iter().filter_map(|line| if line.starts_with("2") { None } else { from_str(line) }).collect() } detached_session("1\n2\n10\n20")
[04:57:09] -rusti- pastebinned 4 lines of output: http://ix.io/84g
[04:57:27] <dbaupp> rusti: fn detached_session(o: &str) -> std::trie::TrieSet { o.line_iter().filter_map(|line| if line.starts_with("2") { None } else { from_str(line) }).collect() } detached_session("1\n2\n10\n20")
[04:57:30] -rusti- pastebinned 1 lines of output: http://ix.io/84h
[04:57:42] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[04:57:51] <strcat> antifuchs: there's also a generic extend method on containers, for adding an iterator's contents to an existing one
[04:57:53] <strcat> quite similar
[04:58:04] <dbaupp> rusti: fn detached_session(o: &str) -> std::trie::TrieSet { o.line_iter().filter_map(|line| if line.starts_with("2") { None } else { from_str(line) }).collect() } for i in detached_session("1\n2\n10\n20") { println!("{}", i); }
[04:58:06] -rusti- pastebinned 11 lines of output: http://ix.io/84i
[04:58:09] <dbaupp> rusti: fn detached_session(o: &str) -> std::trie::TrieSet { o.line_iter().filter_map(|line| if line.starts_with("2") { None } else { from_str(line) }).collect() } for i in detached_session("1\n2\n10\n20").iter() { println!("{}", i); }
[04:58:12] -rusti- pastebinned 11 lines of output: http://ix.io/84j
[04:58:25] <strcat> rusti: let mut xs = range(0, 3).to_owned_vec(); xs.extend(&mut range(3, 6)); xs
[04:58:26] -rusti- ~[0, 1, 2, 3, 4, 5]
[04:58:29] <dbaupp> rusti: fn detached_session(o: &str) -> std::trie::TrieSet { o.line_iter().filter_map(|line| if line.starts_with("2") { None } else { from_str(line) }).collect() } let sess =  detached_session("1\n2\n10\n20"); for i in sess.iter() { println!("{}", i); }
[04:58:30] -rusti- 1
[04:58:30] -rusti- 10
[04:58:30] -rusti- ()
[04:58:36] <dbaupp> antifuchs: ^ :)
[04:58:45] <antifuchs> so much golf! Thanks, much appreciated (:
[04:59:00] <dbaupp> you can use the `do` sugar to make the filter_map call nicer too
[04:59:10] <antifuchs> oh yep, that was the plan (:
[04:59:17] <Eridius> dbaupp: well in this case it's probably just .filter_map(|line| session_number(line)) so no `do` needed
[04:59:20] <dbaupp> do o.line_iter().filter_map |line| { ... }.collect()
[04:59:42] <strcat> Eridius: can just pass session_number directly then
[04:59:51] <strcat> filter_map(session_number) ;p
[04:59:53] <dbaupp> Eridius: no, there's an extra filter from the session_is_attached, although one might argue .filter(session_is_attached).filter_map(session_number) is cleaner
[05:00:00] <Eridius> ah true
[05:00:12] <Eridius> I forgot about session_is_attached
[05:00:20] <dbaupp> hm, that `filter` call needs a !
[05:00:36] <strcat> C++ has a ridiculous std::not1 function for that
[05:00:41] <strcat> it has the '1' because 'not' is a keyword
[05:01:02] <antifuchs> wait, whoa, I hadn't realized that the type inference actually lets you take these shortcuts
[05:01:07] <antifuchs> this changes everything, again (:
[05:01:09] <dbaupp> antifuchs: it's really nice :)
[05:01:29] <strcat> antifuchs: yeah it will infer the type of something from later usage of it
[05:01:40] <strcat> assuming there's no ambiguity
[05:01:56] <dbaupp> (and it's not quite as general as it could be)
[05:03:13] <strcat> dbaupp: did you see the PR link I gave you? ;p
[05:03:34] <dbaupp> strcat: yeah, looking now
[05:03:49] <dbaupp> https://github.com/thestinger/rust/commit/8149e5c99f4fddae5d442fdedfda4c085249a12e weird that they're still around
[05:03:58] <strcat> dbaupp: yeah
[05:04:19] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[05:05:59] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[05:07:54] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[05:09:01] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[05:09:30] <jxv> is there animation software written in rust?
[05:13:16] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[05:13:43] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[05:20:56] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:26:26] <strcat> dbaupp: there are still a fair number of `advance` users since there are a lot of internal iterators lurking around and they use it to wrap external ones
[05:27:17] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[05:27:17] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[05:27:46] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[05:30:42] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Input/output error)
[05:33:05] *** Quits: indirect (indirect_m@moz-22FDA25B.hsd1.ca.comcast.net) (Ping timeout)
[05:33:59] <dbaupp> strcat: true
[05:34:39] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[05:37:01] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[05:37:09] *** Joins: indirect (indirect_m@moz-22FDA25B.hsd1.ca.comcast.net)
[05:39:11] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[05:43:06] *** Joins: quvarxa_ (quvarxa@moz-978E4C31.static.tpgi.com.au)
[05:43:47] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Quit: ChatZilla 0.9.90.1 [Firefox 24.0/20130909203154])
[05:44:33] *** Joins: SingingBoyo (brandon@DAC9C672.CE76D40F.4F048BDC.IP)
[05:44:33] *** Quits: quvarxa_ (quvarxa@moz-978E4C31.static.tpgi.com.au) (Client exited)
[05:44:35] *** Joins: quvarxa (quvarxa@moz-978E4C31.static.tpgi.com.au)
[05:48:30] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Quit: Linkinus - http://linkinus.com)
[05:48:39] *** Quits: tautologico (shung@E14878C0.75051ED3.7B974E06.IP) (Quit: tautologico)
[05:49:12] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[05:49:49] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[05:51:43] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[05:52:46] <engla> strcat: I'm sorry, I never fixed up the src/test/ testcases for range_step.. I forgot that after resolving the bug. I'll see if they pass now.
[05:52:55] <strcat> engla: I removed them
[05:53:14] <engla> good call
[05:53:17] <strcat> they aren't very useful test cases and I want to get rid of advance
[05:54:19] *** Quits: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[05:55:52] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[05:55:52] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/8OnM_A
[05:55:52] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[05:56:41] *** Quits: steveo (Mibbit@moz-74AF8484.cdrr.qwest.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:57:05] <acrichto> dbaupp: re merging statics, what was that in reference to?
[05:57:48] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[05:57:59] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[05:58:06] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[05:59:07] *** Joins: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se)
[06:00:12] <dbaupp> acrichto: you pointed out why format args should just become f(&Argument::new(...))
[06:00:16] <dbaupp> *shouldn't
[06:00:21] <dbaupp> I think.
[06:00:36] * dbaupp is bad at conversations spread over days
[06:00:39] <acrichto> ah yes
[06:00:52] <acrichto> what about the name though?
[06:00:54] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[06:00:54] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/G2AjWQ
[06:00:54] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[06:00:55] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[06:00:55] <ghrust> 01[13rust01] 15bors pushed 9 new commits to 06auto: 02http://git.io/LE2VhQ
[06:00:55] <ghrust> 13rust/06auto 141f961c7 15Daniel Micay: fix range_step{,_inclusive} with negative step
[06:00:55] <ghrust> 13rust/06auto 14bf7587f 15Daniel Micay: iter: fix `range_inclusive` when `start > stop`
[06:00:56] <ghrust> 13rust/06auto 1466c2965 15Daniel Micay: iter: fix `RangeInclusive`'s `DoubleEndedIterator`
[06:00:58] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[06:01:35] <dbaupp> the name?
[06:02:16] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[06:02:39] <acrichto> "am I gensym-ing the name of the static/does this change the symbol name?"
[06:02:41] <dbaupp> acrichto: ah, gensym? I thought https://github.com/mozilla/rust/issues/9188 was a blocker, so if we make the actual static name different, it should fix that problem?
[06:02:44] <dbaupp> yeah
[06:03:00] <acrichto> dbaupp: yes that is a problem
[06:03:04] <acrichto> I have a fix for that though
[06:03:07] <acrichto> will post it tonight
[06:03:43] <olsonjeffery> ah. you know, i really miss when rust had structural types.
[06:03:52] <olsonjeffery> i understand and accept why they were removed. but it was nice.
[06:04:39] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[06:05:06] <antifuchs> alright, thanks to you all for your help & good night (:
[06:05:10] *** Quits: antifuchs (foobar@moz-F68EBF74.dsl.dynamic.sonic.net) (Quit: Textual IRC Client: www.textualapp.com)
[06:05:11] *** Quits: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net) (Quit: hoverbear)
[06:05:40] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[06:05:44] <acrichto> dbaupp: just updated https://github.com/mozilla/rust/pull/9196
[06:05:46] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[06:06:20] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[06:07:15] <dbaupp> acrichto: ok; I have no idea about that part of rustc, so I'm not comfortable reviewing it. :)
[06:08:13] <mark_edward> how would you guys deal with union types in FFI bindings?
[06:08:25] <acrichto> dbaupp: ah ok, thanks for the unwrap_or heads -up
[06:09:22] <acrichto> dbaupp: well I thought I had a fix for 9188, apparently not though :(
[06:09:51] <olsonjeffery> mark_edward: do you have a way to discover what the union's value is as part of the FFI?
[06:10:28] <Amaranth> mark_edward: bindgen makes a struct with a vector as large as the union and an impl for it with each field in the union as a method that does a transmute
[06:10:52] <dbaupp> mark_edward: http://www.reddit.com/r/rust/comments/1lpmrx/storing_structsenums_of_structs_more_compactly_in/cc1jbku
[06:11:11] <mark_edward> olsonjeffery: i think i can, yes
[06:11:51] <dbaupp> acrichto: :(
[06:12:01] <acrichto> trying something else now...
[06:12:20] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: WeeChat 0.4.1)
[06:12:55] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[06:13:24] <dbaupp> acrichto: can you add like $then$stmt1 and $else$stmt0 for `if .. { fn foo() {} static a: uint = 1; } else { static a: uint = 2; }` to the symbol?
[06:13:35] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[06:13:38] *** Joins: lazyden (lazyden@moz-4578A0B7.singnet.com.sg)
[06:13:46] <acrichto> dbaupp: nah, I'll just throw in a path_pretty_name with teh "hash" as the node id
[06:14:00] <dbaupp> acrichto: how does that interact with inlining?/does it matter?
[06:14:04] <acrichto> dbaupp: I mistakenly thought that ident.hash() would be unique b/c of the scopes, but I'm guaranteed that the node id will always be unique
[06:14:12] *** Joins: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net)
[06:14:18] <acrichto> dbaupp: nah doesn't matter
[06:14:31] <acrichto> as long as we generate *some* unique name
[06:14:36] <dbaupp> ok
[06:14:37] <acrichto> then everything else should work just fine
[06:14:44] <dbaupp> yeah, sounds good
[06:14:53] <acrichto> yay it works now
[06:14:58] * acrichto checks in a test
[06:15:01] <dbaupp> \o/
[06:15:23] <acrichto> one more then to help unblock format!-by-default
[06:15:40] <dbaupp> which?
[06:16:22] <Amaranth> mark_edward: If you look at https://github.com/amaranth/rust-sdl2/blob/events/src/event.rs#L304 you can see what I mean
[06:16:28] <acrichto> sry, one more *thing
[06:16:35] <acrichto> I'm sure there's something else
[06:16:38] <acrichto> actually...
[06:16:41] * acrichto checks other workspace
[06:16:47] <acrichto> oh man it bootstrapped
[06:16:54] * acrichto make check
[06:17:20] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[06:17:25] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[06:18:39] <dbaupp> acrichto: wrong window :P
[06:18:53] <klutzy> anyone knows difference between extern-pass-TwoU64s-ref and extern-pass-TwoU64s tests?
[06:19:01] *** Joins: aeqwa (aeqwa@moz-FB3A19F6.dsl.tropolys.de)
[06:20:34] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[06:20:51] <acrichto> dbaupp: https://github.com/mozilla/rust/pull/9206
[06:21:13] <klutzy> ah, they were different but are same now
[06:22:42] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[06:23:53] <acrichto> haha I lifted the limit on the max log message and one of the rpass tests failed because it expected it to get truncated
[06:24:13] <strcat> acrichto: there's a reason it's like that
[06:24:15] <strcat> forget why
[06:24:21] <acrichto> strcat: format hits the local heap
[06:24:25] <acrichto> sry, logging
[06:24:29] <acrichto> but it no longer does
[06:24:32] <strcat> ah
[06:24:33] <acrichto> with my pull
[06:24:36] <strcat> nice!
[06:25:01] <acrichto> this also kinda implements debug! in terms of format!, so it's an excellent testing ground
[06:25:15] <acrichto> although debug! still uses fmt! syntax
[06:26:01] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[06:27:19] *** Joins: sebcrozet (sebcrozet@moz-A855F6C0.w82-127.abo.wanadoo.fr)
[06:30:29] <dbaupp> rusti: error!("A" + "Ã„".repeat(10000))
[06:30:36] <dbaupp> rusti: error2!("A" + "Ã„".repeat(10000))
[06:30:39] -rusti- pastebinned 2 lines of output: http://ix.io/84k
[06:30:39] -rusti- <anon>:7:17: 7:39 error: format argument must be a string literal.
[06:30:39] -rusti- <anon>:7          error2!("A" + "Ã„".repeat(10000))
[06:30:39] -rusti-                           ^~~~~~~~~~~~~~~~~~~~~~
[06:30:39] -rusti- application terminated with error code 101
[06:30:49] <dbaupp> rusti: error2!("%s", "A" + "Ã„".repeat(10000))
[06:30:49] -rusti- <anon>:7:23: 7:45 error: argument never used
[06:30:49] -rusti- <anon>:7          error2!("%s", "A" + "Ã„".repeat(10000))
[06:30:49] -rusti-                                 ^~~~~~~~~~~~~~~~~~~~~~
[06:30:50] -rusti- error: aborting due to previous error
[06:30:50] -rusti- application terminated with error code 101
[06:30:53] <dbaupp> rusti: error2!("{}", "A" + "Ã„".repeat(10000))
[06:30:54] * dbaupp sighs
[06:30:55] -rusti- pastebinned 2 lines of output: http://ix.io/7T3
[06:31:06] <acrichto> dbaupp: haha it just hates you
[06:31:07] <dbaupp> acrichto: so that^'ll be fixed 
[06:31:10] <dbaupp> ?
[06:31:12] <acrichto> dbaupp: indeed
[06:31:15] <dbaupp> awesome
[06:32:15] <acrichto> dbaupp: r? 9153
[06:32:19] <acrichto> https://github.com/mozilla/rust/pull/9153
[06:32:30] <acrichto> just updated to un-comment the tests that do format!()
[06:32:33] <acrichto> rusti: format!()
[06:32:33] -rusti- <anon>:7:9: 8:5 error: requires at least a format string argument
[06:32:33] -rusti- <anon>:7          format!()
[06:32:34] -rusti- <anon>:8     };
[06:32:34] -rusti- error: aborting due to previous error
[06:32:34] -rusti- application terminated with error code 101
[06:32:47] <acrichto> basically that span won't change
[06:32:58] <acrichto> *hsouldn't
[06:33:08] <dbaupp> heh
[06:33:21] <acrichto> there are tests asserting that anyway now
[06:34:09] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[06:34:57] <klutzy> hmm, my `make check-fast` fails at io::test::file_writer_bad_name and don't know why
[06:35:26] <klutzy> (old std::io)
[06:35:36] <dbaupp> what's the failure message?
[06:36:56] <klutzy> just one line: "failed io::tests::file_writer_bad_name" at check-stage2-@##-std.log.
[06:37:50] <dbaupp> can you run only that test to see the reason: `make check-stage2-std TESTNAME=file_writer_bad_name`?
[06:38:22] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[06:38:36] <acrichto> 10k umlauts is a lot
[06:38:47] <klutzy> "test io::tests::file_writer_bad_name ... FAILED" no info again. hmmm
[06:39:21] <SingingBoyo> klutzy: if it's testing that a 'bad name' test fails, and you're on windows instead of *nix or similar, could it be a 'bad' name that's actually valid for windows?
[06:39:30] <acrichto> klutzy: there should be an assertion failure which prints some message or something
[06:39:40] <dbaupp> rusti: "Ã„".repeat(100_000).len() // 10k is nothing
[06:39:41] -rusti- 200000u
[06:39:50] <acrichto> klutzy: or it's #[should_fail] and it didn't fail
[06:39:59] <acrichto> dbaupp: ./foo 2>&1 | wc -c => 20001
[06:40:01] <acrichto> no truncation!
[06:40:08] <klutzy> acrichto: SingingBoyo: the test tries to open Path("?/?") then sees if it is Err or Ok
[06:40:09] <dbaupp> \o/
[06:40:20] <acrichto> klutzy: hmm, that appears to be succeeding on windows
[06:40:23] <dbaupp> acrichto: is that good from a usability perspective though?
[06:40:39] <klutzy> acrichto: yes, seems that it fails only on my machine.
[06:40:45] <acrichto> dbaupp: if I write debug!, I full expect it to get printed no matter what
[06:40:50] <dbaupp> acrichto: true
[06:41:28] <acrichto> klutzy: hmm, well it's not #[should_fail], and I suppose that even if so you should see a failure message printed
[06:41:48] <dbaupp> klutzy: change the "bad names" to something that's actually and everywhere (or use `Path(if cfg!(windows) { ... } else { "?/?" })`)
[06:41:56] <dbaupp> *bad
[06:42:20] <SingingBoyo> dbaupp: well, '?' should be an invalid char in a windows filename... odd.
[06:42:35] <acrichto> https://gist.github.com/alexcrichton/6568533 muahahaha I will convert everything to format! if it kills me
[06:42:36] <klutzy> I think we need more win32 testers
[06:42:56] <acrichto> klutzy: I'm curious why the bots don't have this covered
[06:42:59] <dbaupp> SingingBoyo: oh
[06:43:20] <klutzy> acrichto: maybe my msys is so good and it is able to create ?/? file :p
[06:43:28] <acrichto> haha, that'd be fun
[06:43:42] <klutzy> or win 8.1 beta may does
[06:43:54] <dbaupp> acrichto: awesome \o/
[06:44:02] <acrichto> seems like a pretty core thing to change, but I suppose you never know
[06:44:18] <dbaupp> acrichto: no alloc + fancy formatting, all in one!
[06:44:27] <acrichto> dbaupp: makes me happy :)
[06:44:29] <SingingBoyo> klutzy: I'd do windows testing but I'm win64 and from what I've heard that's even worse
[06:44:38] <acrichto> dbaupp: watch it be a massive regression though
[06:44:41] <acrichto> that'd make me sad
[06:44:41] * SingingBoyo has enough trouble making rust tests pass after changes in linux
[06:44:49] <dbaupp> acrichto: speed regression?
[06:44:51] <dbaupp> acrichto: why?
[06:44:59] <acrichto> dbaupp: dunno, I can't imagine why
[06:45:06] <acrichto> except temporarily more codegen
[06:45:10] <dbaupp> oh, a hypothetical?
[06:45:15] <acrichto> yeah
[06:45:23] * dbaupp thinks acrichto should think more positive :P
[06:45:25] <acrichto> I wish cmr's memory bencher were still running
[06:45:26] <klutzy> SingingBoyo: I'm also win64, but we only support win32 now
[06:45:27] <acrichto> lol
[06:45:41] <acrichto> http://huonw.github.io/isrustfastyet/mem/ is so cool
[06:45:42] <dbaupp> acrichto: he's totally going to set it up again today (right, cmr?)
[06:45:44] <acrichto> it just needs more data
[06:46:18] <SingingBoyo> I still can't read those isrustfastyet graphs
[06:46:20] <dbaupp> acrichto: I wrote https://github.com/huonw/multibuilder to help him, it's a work in progress, and will make it easier
[06:46:27] <acrichto> dbaupp: oh awesome
[06:46:38] <acrichto> dbaupp: I also meant to ask, can we track library/binary size as well?
[06:46:44] <acrichto> or is that something that the rust builders don't give us?
[06:48:47] <dbaupp> not given by the rust builders, but I imagine cmr could wc -c the built files
[06:48:55] <dbaupp> (or I could do it too)
[06:49:15] <acrichto> if it's easy, that'd be a cool thing to track
[06:49:16] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[06:49:24] <acrichto> moar data
[06:49:28] <dbaupp> definitely
[06:49:37] * dbaupp should start plotting the bench mark data
[06:49:45] <acrichto> who doesn't want gigabytes of rust binaries lying around
[06:49:56] * dbaupp should start retrieving the benchmark data first, I guess
[06:49:59] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Quit: Leaving)
[06:50:10] <dbaupp> (the #[bench]'s run by the buildbots, that is.)
[06:50:11] <acrichto> haha
[06:50:21] <acrichto> I'm sad that we're not doing anything with that data
[06:50:21] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: G'night everynyan~!)
[06:50:37] <acrichto> we could really gain a lot by putting more emphasis on that
[06:50:41] <dbaupp> in theory the entire history is still there
[06:51:05] <dbaupp> so if someone was to give me a list of the host/build/target triples for each builder i'd be able to get it all
[06:51:08] <acrichto> s3 is large
[06:51:38] * dbaupp sends the email to brson that he was going to do hours ago
[06:52:41] <acrichto> moar email
[06:53:06] * acrichto wills bors to build faster
[06:55:03] <heftig> i suppose code duplication would be a problem with all the generics?
[06:55:21] <dbaupp> (if anyone's interested, the data is here http://static.rust-lang.org/build-metrics/ccadbd3b7c936dacab69856cc3963aad477c7f06/auto-linux-64-opt/linux1/check-stage2-T-x86_64-unknown-linux-gnu-H-x86_64-unknown-linux-gnu-std-metrics.json (hash, builder, buildslave, metric file))
[06:55:46] <dbaupp> but "guessing" the T-... and H-... for each platform is not my idea of fun.
[06:55:55] * SingingBoyo takes a semi-solemn vow to put his rust project onto github tonight
[06:56:08] <acrichto> SingingBoyo: moar rust!
[06:56:10] <dbaupp> heftig: you mean in the final binary?
[06:56:18] <SingingBoyo> acrichto:  moar ugly code!
[06:56:24] <heftig> dbaupp: when building multiple binaries
[06:56:30] <acrichto> SingingBoyo: it's rustic :)
[06:56:36] <acrichto> or rusty
[06:56:47] *** Joins: jaen (jaen@moz-6105DC97.play-internet.pl)
[06:56:49] <dbaupp> heftig: I'm not sure I understand... ?
[06:57:02] <SingingBoyo> acrichto: heh.  got a semi-nice FSM lib in there actually.  minimal, but it works!
[06:57:10] <acrichto> heftig: you may be interested in https://github.com/mozilla/rust/issues/1980
[06:57:24] * SingingBoyo thinks working code is the best code
[06:57:27] *** Quits: docbrown (davidb@5CE9D448.F0B9EFB2.7F8758CE.IP) (Client exited)
[06:57:53] <acrichto> SingingBoyo: what's the project in general?
[06:58:04] *** Quits: tclark (ctimothy@moz-1DB1FE6E.hsd1.wa.comcast.net) (Input/output error)
[06:58:22] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[06:58:49] <SingingBoyo> acrichto: command line bug tracking that works nicely with git branches
[06:58:51] <heftig> dbaupp: i mean the binaries may contain identical code for the reified generic functions, even if those came from a shared library
[06:59:00] <SingingBoyo> unfortunately it doesn't always work so nicely :(
[06:59:08] <acrichto> SingingBoyo: nice though :)
[06:59:28] <acrichto> heftig: that currently does happen, we don't do any sort of link-time-optimization to purge duplicated code sadly
[06:59:38] <acrichto> llvm may be able to do that, but not sure...
[06:59:45] * SingingBoyo really needs to get it to stop writing json in different orders cause it makes for really big diffs
[06:59:46] <acrichto> llvm is magical only up to a certain point
[07:00:10] <dbaupp> acrichto: lies! llvm is magical *all* the way
[07:00:52] <acrichto> one day, whenever rustc invokes llvm, llvm will randomly close an issue on github
[07:01:03] <acrichto> not only that but it'll commit the fix
[07:01:16] * acrichto wanters over to #llvm
[07:01:24] <strcat> heftig: llvm has a mergefunc pass
[07:01:31] <dbaupp> acrichto: any issue, not even rust related.
[07:01:43] <strcat> heftig: it's not entirely stable yet, but it will merge any duplicate functions
[07:02:00] <acrichto> strcat: that only works intra-crate though
[07:02:00] <heftig> strcat: does rust use the binutils linker?
[07:02:13] <SingingBoyo> dbaupp, acrichto: and it'll update all rust installs even if the computer they're on isn't connected to the internet
[07:02:15] <strcat> heftig: rust doesn't have translation units so there are no duplicates like that
[07:02:17] <dbaupp> strcat: that's still not working for Rust, right?
[07:02:25] <dbaupp> (mergefuncs)
[07:02:28] <strcat> heftig: libraries are compiled as a whole, essentially LTO
[07:02:51] <strcat> the duplicate instantiations are in separate binaries, not the same ones
[07:03:05] <heftig> ld.gold can do identical code folding
[07:03:22] <heftig> but that's only intra-object, as well
[07:03:24] <strcat> there are also many duplicates simply because instantiations for different types end up with the same code
[07:03:44] <strcat> rust's type_use takes care of many of them
[07:04:00] <strcat> but mergefunc would be much better, and would remove that complexity and associated bugs from rustc
[07:04:12] <strcat> heftig: http://llvm.org/docs/doxygen/html/MergeFunctions_8cpp_source.html
[07:04:29] <strcat> rust currently generates some bytecode it doesn't like
[07:04:35] <strcat> may be our fault, may be mergefunc's fault
[07:04:38] <strcat> likely a bit of both
[07:04:43] * strcat is planning on fixing it soon
[07:04:59] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[07:05:17] <strcat> http://ix.io/84n is the one minimized case in libextra it asserts on
[07:05:46] <strcat> % rustc merge_assert.rs --passes mergefunc --lib
[07:05:48] <strcat> warning: missing crate link meta `name`, using `merge_assert` as default
[07:05:50] <strcat> warning: missing crate link meta `vers`, using `0.0` as default
[07:05:52] <strcat> rustc: /build/rust-git/src/rust/src/llvm/lib/IR/Instructions.cpp:2327: static llvm::CastInst* llvm::CastInst::Create(llvm::Instruction::CastOps, llvm::Value*, llvm::Type*, const llvm::Twine&, llvm::Instruction*): Assertion `castIsValid(op, S, Ty) && "Invalid cast!"' failed.
[07:05:54] * strcat shrugs
[07:06:09] <acrichto> strcat: you should throw on a #[no_std] if ou can
[07:06:32] <acrichto> I do that a lot to reduce the amount of IR I have to look at
[07:06:34] <strcat> acrichto: it needs ~[], so it needs strdup_uniq, exchange_malloc, etc.
[07:06:37] <strcat> but that's true
[07:06:39] <acrichto> oh whoops, nvmd
[07:06:41] <dbaupp> strcat: does it need all of that? the two functions and the (unrelated) struct/deriving?
[07:06:46] <strcat> dbaupp: yes
[07:06:49] <dbaupp> weird
[07:07:01] <acrichto> I guess you gotta have functions to merge :P
[07:07:10] <strcat> dbaupp: it took some work to get it down from this from all of libextra
[07:07:12] <strcat> ;p
[07:07:24] <dbaupp> strcat: five or ten minutes, right? :P
[07:07:32] <dbaupp> (I can imagine was a horrible task.)
[07:07:35] <strcat> dbaupp: yeah, but boring minutes
[07:07:56] <dbaupp> acrichto: I'm just surprised by the struct/deriving being there but unused.
[07:08:06] <strcat> essentially manually deleting half of the code... but it's all entangled so that's hard
[07:08:11] <strcat> again and again
[07:10:52] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[07:10:52] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/LE2VhQ
[07:10:52] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[07:11:16] <dbaupp> acrichto: you appear to have entirely fixed the flackiness. <3
[07:11:22] <strcat> no more internal range internals
[07:11:23] <dbaupp> *flakiness
[07:11:26] <strcat> er
[07:11:27] <strcat> range iterators
[07:11:30] <dbaupp> haha
[07:11:39] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[07:11:49] <strcat> it's 3am and I should go to sleep ;p
[07:12:52] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[07:15:51] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[07:15:51] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/KLzBjg
[07:15:52] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[07:15:54] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[07:15:54] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/MosHrQ
[07:15:54] <ghrust> 13rust/06auto 14668d8bb 15Alex Crichton: Reduce the amount of complexity in format!...
[07:15:54] <ghrust> 13rust/06auto 14ffc0c63 15Alex Crichton: Document all of the format! related macros
[07:15:54] <ghrust> 13rust/06auto 142ef3895 15bors: auto merge of #9153 : alexcrichton/rust/simplify-format, r=huonw...
[07:15:56] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[07:21:02] <dbaupp> SingingBoyo: I forgot to ask/have forgotten, what's the thing about the IRFY graphs that makes them hard to read? (the small commit hash?)
[07:24:35] <acrichto> dbaupp: yay less flakiness!
[07:25:17] <dbaupp> I wonder why bsd was/is crashing
[07:28:54] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Ping timeout)
[07:31:37] *** Quits: feduser (feduser@B184DF8C.1F811DF7.CDBED010.IP) (Quit: Leaving)
[07:34:31] *** Quits: jaen (jaen@moz-6105DC97.play-internet.pl) (Ping timeout)
[07:36:13] <SingingBoyo> dbaupp: I just don't have any idea what to look for so I can't get a sense of what they're telling me.  Probably just me though
[07:37:51] <andrew-d> Quick question: how do I tell rustc to statically link things?
[07:38:29] *** Quits: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net) (Input/output error)
[07:42:00] <acrichto> dbaupp: aww I didn't fix the spans
[07:42:09] <acrichto> dbaupp: oh the bsd crashes were b/c dynamic_lib isn't thread-safe
[07:42:21] <acrichto> andrew-d: right now I don't believe that rust supports static linking sadly
[07:42:33] <andrew-d> acrichto: :-(
[07:42:36] <andrew-d> Thanks anyway
[07:42:39] <acrichto> andrew-d: you could try "-Z static", but it may not work
[07:42:45] <acrichto> not sure if anyone uses that
[07:43:16] <andrew-d> Yeah, I immediately get "can't find crate for `std`"
[07:43:50] *** Quits: cdidd (cdidd@moz-A230E478.broadband.corbina.ru) (Input/output error)
[07:44:27] <andrew-d> rusti: use std::rt::io::net::tcp::{TcpListener, TcpAcceptor}; 
[07:44:39] -rusti- pastebinned 7 lines of output: http://ix.io/84o
[07:45:41] *** Joins: jclements (jclements@moz-BEE8D50A.dsl.snlo01.pacbell.net)
[07:46:59] *** Joins: cdidd (cdidd@moz-9F8F0559.broadband.corbina.ru)
[07:47:01] <dbaupp> SingingBoyo: ah, I see. I guess the easiest way to fix that would be to write more explanations
[07:47:05] * dbaupp notes it down
[07:50:05] <dbaupp> acrichto: aha
[07:51:11] *** Quits: KindOne (KindOne@moz-697F9CA4.dynamic.ip.windstream.net) (Ping timeout)
[07:51:24] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[07:53:46] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[07:55:06] *** Joins: KindOne (KindOne@F45B92.E1AE408F.34F73994.IP)
[07:57:13] *** Quits: jclements (jclements@moz-BEE8D50A.dsl.snlo01.pacbell.net) (Quit: jclements)
[07:57:41] * SingingBoyo wishes there was a way to in-place wrap all the elements of a vector in a newtype
[07:57:43] *** Joins: jclements (jclements@moz-BEE8D50A.dsl.snlo01.pacbell.net)
[07:58:12] *** Quits: jclements (jclements@moz-BEE8D50A.dsl.snlo01.pacbell.net) (Quit: jclements)
[08:00:15] *** Joins: sanxiyn (tinuviel@5DAC0FAD.5592B676.8A051A1C.IP)
[08:05:15] *** Joins: squiddy (squiddy@moz-42C748FE.adsl.alicedsl.de)
[08:05:24] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[08:05:28] <SingingBoyo> aww damn, I've achieved an ICE
[08:07:26] <SingingBoyo> huh.  it's gone now.  Something with newtypes and lifetimes...
[08:08:07] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[08:10:28] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[08:11:07] <SingingBoyo> is there a way to convert &~ptrs to &ptrs?
[08:12:00] *** Joins: nkoep (nik@moz-E2FF5152.pool.mediaways.net)
[08:12:08] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[08:12:56] <acrichto> SingingBoyo: type ascription helps
[08:13:22] <acrichto> rusti: let a = &~2; let b: &int = *a; println!("{:?} {:?}", a, b)
[08:13:23] -rusti- &~2 &2
[08:13:23] -rusti- ()
[08:14:13] <SingingBoyo> acrichto: that's tough in context.  turns out &**x works though...  gonna be a pain reading that though
[08:14:49] <sanxiyn> In general, &* converts ~ to &, except for dynamically sized types :(
[08:23:26] *** Joins: cmr (moznet@moz-EC676DFE.members.linode.com)
[08:23:53] <Eridius> some day we'll be able to write things that are generic over constant-size arrays, and then we could have a .move_iter()
[08:23:58] <Eridius> well, I hope
[08:24:22] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Client exited)
[08:24:39] <SingingBoyo> Eridius: hmm? move_iter() exists! it works!  and I possibly missed sarcasm! \o/
[08:24:47] <Eridius> SingingBoyo: I mean so I could say [1,2,3].move_iter()
[08:25:14] <Eridius> but you can't implement a trait on all constant-sized arrays at the moment
[08:25:48] <SingingBoyo> Eridius: ah yeah okay.  I haven't ended up with constant size arrays so I don't know their limitations.
[08:28:58] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[08:33:51] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[08:35:51] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[08:35:51] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 142ef3895 to 1436872e4: 02http://git.io/N3iJvQ
[08:35:51] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[08:35:52] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[08:35:52] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/4038aQ
[08:35:52] <ghrust> 13rust/06auto 14cfe3db8 15Alex Crichton: Reduce the amount of complexity in format!...
[08:35:52] <ghrust> 13rust/06auto 14fd8c05c 15Alex Crichton: Document all of the format! related macros
[08:35:53] <ghrust> 13rust/06auto 1470ecac2 15Alex Crichton: Fix expand_stmt as well as expand_expr to use the correct span...
[08:35:55] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[08:37:27] *** Quits: squiddy (squiddy@moz-42C748FE.adsl.alicedsl.de) (Ping timeout)
[08:37:36] *** Quits: doomlord (doomlod@moz-DEFFB365.range81-147.btcentralplus.com) (Connection reset by peer)
[08:38:18] *** Joins: doomlord (doomlod@moz-DEFFB365.range81-147.btcentralplus.com)
[08:40:27] * SingingBoyo managed to have his program not create insane diffs when things get written to file.  \o/
[08:40:48] *** Quits: bstrie (ben@moz-D5A1D0F5.members.linode.com) (Ping timeout)
[08:41:16] *** Joins: bstrie (ben@moz-D5A1D0F5.members.linode.com)
[08:43:37] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[08:45:44] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[08:45:51] *** Quits: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net) (Ping timeout)
[08:47:35] <Seldaek> acrichto: assuming you're alex crichton, maybe you should stop by #rustdoc-wg :)
[08:47:56] <acrichto> Seldaek: oh cool, thanks!
[08:48:27] <acrichto> also yes, that is me
[08:50:51] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[08:50:51] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 144b8f273 to 1436872e4: 02http://git.io/N3iJvQ
[08:50:51] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[08:50:52] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[08:50:52] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/GzTJrg
[08:50:53] <ghrust> 13rust/06auto 14cfe3db8 15Alex Crichton: Reduce the amount of complexity in format!...
[08:50:53] <ghrust> 13rust/06auto 14fd8c05c 15Alex Crichton: Document all of the format! related macros
[08:50:53] <ghrust> 13rust/06auto 146406138 15Alex Crichton: Fix expand_stmt as well as expand_expr to use the correct span...
[08:50:56] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[08:52:12] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[08:53:25] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[08:54:49] *** Quits: mixi (mixi@moz-DBD8904A.org) (Quit: Life is too long...)
[08:55:44] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:56:28] *** Joins: valenting (Thunderbir@moz-9C32009D.residential.rdsnet.ro)
[08:57:24] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[08:58:15] *** Joins: mixi (mixi@moz-DBD8904A.org)
[08:58:20] *** flaper87|afk is now known as flaper87
[08:58:44] <flaper87> acrichto: ping
[09:01:59] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Ping timeout)
[09:03:00] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: WeeChat 0.4.1)
[09:03:09] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[09:03:45] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[09:03:49] *** Quits: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net) (Ping timeout)
[09:08:20] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[09:10:47] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[09:12:05] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[09:12:27] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[09:19:05] *** Joins: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net)
[09:20:27] *** Quits: sanxiyn (tinuviel@5DAC0FAD.5592B676.8A051A1C.IP) (Quit: Leaving)
[09:21:57] *** Quits: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se) (Client exited)
[09:23:32] <benh> acrichto: %{ yay %}
[09:33:18] *** Quits: santiago (santiago@moz-8ADE82B4.socal.res.rr.com) (Connection reset by peer)
[09:33:34] *** Joins: santiago (santiago@moz-8ADE82B4.socal.res.rr.com)
[09:42:16] *** Joins: lazyden (lazyden@moz-4578A0B7.singnet.com.sg)
[09:45:17] *** Quits: aeqwa (aeqwa@moz-FB3A19F6.dsl.tropolys.de) (Quit: leaving)
[09:45:20] *** Joins: aeqwa (aeqwa@moz-FB3A19F6.dsl.tropolys.de)
[09:46:26] *** Quits: KindOne (KindOne@F45B92.E1AE408F.34F73994.IP) (Ping timeout)
[09:47:23] *** Quits: aeqwa (aeqwa@moz-FB3A19F6.dsl.tropolys.de) (Quit: leaving)
[09:47:26] *** Joins: aeqwa (aeqwa@moz-FB3A19F6.dsl.tropolys.de)
[09:47:38] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Quit: ëžœë¤ì€ ì‡ í‡´í–ˆìŠµë‹ˆë‹¤.)
[09:49:29] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[09:50:36] *** Joins: KindOne (KindOne@F45B92.E1AE408F.34F73994.IP)
[09:51:09] <kimundi> SingingBoyo: If you want to wrap all elements of an vector into a newtype that has the same size, you could just transmute it. 
[09:51:24] <kimundi> dbaupp: ping
[09:52:05] <SingingBoyo> kimundi: yeah but transmute is bad.  Do newtypes have the same size as whatever they're wrapping though?
[09:52:45] <kimundi> SingingBoyo: Any struct that just contains one element will end up with the same size of that element, so yeah :)
[09:53:58] <kimundi> SingingBoyo: If you encapsulate that transmute in an conversion function it would be alright I think. std::ascii does something similar to get a ~[Ascii] form a ~[u8]
[09:54:19] <SingingBoyo> kimundi: hmm.  Still wish there was a better way to do it that didn't involve unsafe, but maybe I'll end up doing that to avoid ridiculous amounts of copying.
[09:54:35] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[09:55:24] *** Quits: ski (md9slj@moz-862B1C66.studat.chalmers.se) (Ping timeout)
[09:55:37] <kimundi> SingingBoyo: Yeah, sadly the only way I could see that work would be to have an generic in place map that only allows maping to types of the same size, something which is not expressible.
[09:57:15] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[09:57:47] <SingingBoyo> kimundi: yeah.  I managed to avoid most of the copying with borrowed pointers, so I'll be okay until I decide the code is stable enough to use transmute.
[09:58:00] <kimundi> he, alright
[09:58:25] <flaper87> SingingBoyo: what are you working on? /me curious
[10:00:14] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[10:00:53] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[10:00:53] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/GzTJrg
[10:00:53] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[10:01:30] *** Joins: ski (md9slj@moz-862B1C66.studat.chalmers.se)
[10:02:30] *** Joins: Voomer (Voomer@moz-CC05FF5E.hsd1.wa.comcast.net)
[10:04:13] <SingingBoyo> flaper87: bug tracker that integrates with git branches.  If even works now!
[10:04:17] <SingingBoyo> It*
[10:05:14] <flaper87> SingingBoyo: coool, is it uploaded somewhere?
[10:05:18] <bjz> SingingBoyo: I tend to try to wrap my transmutes in an inlined function with clearly defined input/output types
[10:05:27] <SingingBoyo> flaper87: about to put it on github
[10:05:34] <bjz> SingingBoyo: but once you do that it's usually ok
[10:05:59] * SingingBoyo wonders if he should stick a LICENSE.txt in
[10:06:20] <flaper87> SingingBoyo: yup
[10:06:38] <bjz> SingingBoyo: this is what I do: https://github.com/bjz/cgmath-rs
[10:06:42] *** Joins: squiddy (squiddy@moz-42C748FE.adsl.alicedsl.de)
[10:06:57] <bjz> SingingBoyo: also a license declaration in each source file
[10:07:23] <SingingBoyo> yeah.  knew there was a reason I wait so long to make things public
[10:07:49] <bjz> SingingBoyo: meh, I added mine after the fact
[10:08:21] <bjz> SingingBoyo: I only knew to do it from feedback from people - wouldn't have know without publishing it first
[10:08:28] <bjz> *known
[10:08:59] <SingingBoyo> bjz: I always end up with the thought process 'I know I should, but it's so much work!'
[10:09:07] * SingingBoyo should really just put licenses in from the beginning
[10:10:58] <bjz> SingingBoyo: once you have a system in place it's easy
[10:11:07] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[10:11:39] <SingingBoyo> bjz: unfortunately I had no system and now need a good way to add to several files at once.
[10:11:46] * SingingBoyo starts bash hacking
[10:11:57] <SingingBoyo> shell hacking? whatever
[10:12:09] <bjz> copy/paste ftw ^^
[10:12:24] * bjz isn't a very good programmer
[10:12:47] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[10:13:14] *** Quits: quvarxa (quvarxa@moz-978E4C31.static.tpgi.com.au) (Ping timeout)
[10:15:03] *** Joins: quvarxa (quvarxa@moz-978E4C31.static.tpgi.com.au)
[10:18:43] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[10:19:30] * SingingBoyo just copied a script off the internet
[10:19:37] * SingingBoyo just has good google-fu
[10:20:53] *** Quits: sebcrozet (sebcrozet@moz-A855F6C0.w82-127.abo.wanadoo.fr) (Ping timeout)
[10:21:05] *** Joins: sebcrozet (sebcrozet@moz-D8879CC3.w80-13.abo.wanadoo.fr)
[10:21:50] <SingingBoyo> aww. github doesn't like my markdown
[10:21:56] *** Joins: io2 (io2@moz-A6202C16.home.otenet.gr)
[10:22:14] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Ping timeout)
[10:23:09] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[10:23:09] *** ChanServ sets mode: +o pnkfelix
[10:24:11] *** Joins: glyc (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net)
[10:25:11] *** Quits: quvarxa (quvarxa@moz-978E4C31.static.tpgi.com.au) (Connection reset by peer)
[10:32:18] *** Quits: tefter (tefter@B5D119DC.B856A0A1.73804765.IP) (Ping timeout)
[10:32:31] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[10:33:25] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[10:36:52] *** Joins: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net)
[10:37:35] <SingingBoyo> flaper87: if you're still curious, it's up at https://github.com/singingboyo/evict
[10:38:09] * SingingBoyo is going to start a new rust build and sleep
[10:40:31] <dbaupp> SingingBoyo: btw, .rc is deprecated: everything is now just .rs
[10:41:09] <SingingBoyo> dbaupp: how does one deprecate a filename extension?  but ookey.
[10:41:18] * SingingBoyo fixes and then sleeps.
[10:41:18] *** Quits: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP) (Ping timeout)
[10:42:29] <dbaupp> SingingBoyo: well, it's not special or anything.
[10:43:52] * SingingBoyo just realized his (very few) tests don't work anymore.  oops.
[10:44:40] *** Joins: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP)
[10:44:47] <dbaupp> heh
[10:45:25] <SingingBoyo> sad thing is there's only like... 5 tests.  I have more source files than I have tests
[10:45:37] <dbaupp> glyc: ping
[10:45:47] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[10:45:48] <dbaupp> SingingBoyo: 5 > 4, so don't be too hard on yourself.
[10:45:53] <dbaupp> kimundi: pong
[10:46:56] <kimundi> dbaupp: Re: moving send_str.rs to str/send_str.rs - I added an comment in the diff, but I also read in the backlog that you're planning to move source files around anyway?
[10:47:09] <SingingBoyo> dbaupp: I could live with it, except I managed to completely wipe all the issues I'd created for a test branch at one point.  tests are good.
[10:47:57] <dbaupp> kimundi: yeah, it seems like it'd make sense to have `std::str::ascii`, `std::str::send_str`, `std::num::{int,i8,...}`, `std::vec::send_vec` etc etc rather than having them all flat
[10:48:13] <dbaupp> kimundi: (or std::text::str, std::text::ascii, blahblah)
[10:48:31] <dbaupp> kimundi: that is, use the module system for good rather than just ignore it.
[10:48:49] <dbaupp> SingingBoyo: are you "dogfooding" yet?
[10:49:04] *** Joins: zootm (calum@moz-DCC1F9C3.sgyl.cable.virginmedia.com)
[10:49:10] <dbaupp> SingingBoyo: (btw, http://www.reddit.com/r/rust/comments/1mfdxh/evict_a_bug_tracker_written_in_rust/ :P )
[10:49:13] <kimundi> dbaupp: Right. My original plan was to group all strinf related stuff in the str folder (str, unicodem from_str, to_str, char, ascii) etc, but I think a seperate text module would be better for that
[10:49:31] <SingingBoyo> dbaupp: ?  dogfooding?
[10:49:40] <dbaupp> kimundi: yeah, I'll open an rfc about it
[10:49:49] <kimundi> dbaupp: okay
[10:49:50] <Amaranth> SingingBoyo: Are you using evict to track bugs for evict
[10:49:54] *** Joins: sinma (sinma@moz-6A11C47C.fbx.proxad.net)
[10:49:57] <SingingBoyo> Amaranth: yup
[10:50:04] <Amaranth> That'd dogfooding
[10:50:09] <dbaupp> SingingBoyo: "eating your own dogfood", i.e. using your own product to do whatever (e.g. rustc is "dogfooding", kinda.)
[10:50:16] <dbaupp> http://en.wikipedia.org/wiki/Eating_your_own_dog_food
[10:50:26] <SingingBoyo> well then yes, I am dogfooding
[10:50:31] <dbaupp> awesome!
[10:50:33] <zootm> I have a question about design: say I have a TcpStream (new IO model) and I want to both read from it and write to it in a disconnected way, how would I achieve that?
[10:50:35] <kimundi> haha
[10:50:37] <dbaupp> SingingBoyo: good signs
[10:50:46] <kimundi> All this silly terms
[10:50:57] <kimundi> "dogfooding", "yak shaving"
[10:50:57] <zootm> the problem that I have is that the stream is single ownership and the IO is blocking, but I'd like to be able to write messages without waiting for input
[10:51:16] <zootm> (apologies if stupid question)
[10:51:18] <dbaupp> zootm: not possibly yet :) (it's certainly desired & known to be so; rust-http wants it, tiffany wants it for her IRC client, I want it.)
[10:51:24] <SingingBoyo> though not so much tracking bugs as features I want, cause any bugs are liable to blow everything up and therefore be easy to notice.
[10:51:30] <zootm> dbaupp, ha, I also want it for IRC
[10:51:42] <dbaupp> zootm: heh
[10:51:50] * SingingBoyo actually just realized he has a semi-bug where files get left behind
[10:52:02] <zootm> dbaupp: I thought about maybe having a task with a timeout but I'd like to know if anyone knows of a way of doing that before I kill myself trying to implement it
[10:52:08] * SingingBoyo will have to do more git output parsing at some point :(
[10:52:24] <dbaupp> zootm: I don't know
[10:52:48] <zootm> dbaupp: good news that other people are looking for the feature though :)
[10:53:20] <dbaupp> SingingBoyo: there's git2-rs (bindings to libgit2), but it's out of date and my update to master is done in a horrible way https://github.com/huonw/git2-rs/tree/rustc-d09f569aac99a4ef2f577d288d547504e3dcf588
[10:53:39] <SingingBoyo> dbaupp
[10:53:44] <SingingBoyo> hmm
[10:53:48] <SingingBoyo> guess I'm tired
[10:53:55] <dbaupp> (the original repo https://github.com/kimhyunkang/git2-rs)
[10:54:30] <SingingBoyo> dbaupp: so far all I've had to do is read a single line so I just used a git command via the process lib
[10:54:49] <dbaupp> SingingBoyo: yeah, that's exactly what I'm doing for my purposes too
[10:55:40] <sinma> I donâ€™t understand how to include a source file in another source file with Â«mod source.rsÂ»
[10:56:12] <sinma> Sometimes it works, sometimes it seems to work but I canâ€™t access the struct described in the included file
[10:56:13] <dbaupp> sinma: `mod foo;` will look for `foo.rs` and `foo/mod.rs` automatically (relative to the current source file)
[10:56:25] <dbaupp> ah, and it has privacy implications
[10:57:22] <dbaupp> things that you want to be accessible outside of a mod need to be public (e.g. `pub struct Foo { ... } impl Foo { pub fn bar() { ... } } pub fn baz() { ... }`) 
[10:57:44] <sinma> dbaupp: for example I do Â«use file::*; mod file.rs;Â» and it donâ€™t compile, and if do Â«use self::file::*; mod file.rsÂ» it compile but donâ€™t works
[10:57:51] <sinma> pub struct doesnâ€™t change anything
[10:58:06] <benh> mod file;
[10:58:10] <sinma> It can see the struct Point, but not the Â«pub fn new()Â»
[10:58:13] *** Joins: miza (miza@moz-908EA8DE.home.otenet.gr)
[10:58:18] <sinma> so Point::new didnâ€™t work
[10:58:54] <sinma> How yes I mean mod file;
[10:59:06] <sinma> Itâ€™s what Iâ€™ve in my source files
[10:59:17] <sinma> (itâ€™s not a compilation problemÂ»
[10:59:57] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[11:00:58] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[11:00:58] *** Quits: tefter (tefter@B5D119DC.B856A0A1.73804765.IP) (Ping timeout)
[11:01:06] <dbaupp> can you link the code/an example of this?
[11:01:10] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[11:02:02] *** Quits: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com) (Ping timeout)
[11:02:14] *** Quits: aeqwa (aeqwa@moz-FB3A19F6.dsl.tropolys.de) (Quit: Lost terminal)
[11:02:17] <sinma> Iâ€™ll try to make a minimal non-working code
[11:02:26] *** Joins: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com)
[11:03:01] <dbaupp> also, if it compiles and doesn't work, does that mean that the final executable is segfaulting/crashing?
[11:04:05] <sinma> In fact, I donâ€™t compile
[11:04:13] <sinma> Dunno why I say that
[11:04:43] <sinma> The mod and use seems to work but it didnâ€™t compile
[11:06:32] <sinma> dbaupp: https://gist.github.com/sinma/6569752
[11:07:29] <dbaupp> sinma: you need `pub struct Point { ... }` too
[11:07:47] <sinma> Didnâ€™t work too
[11:07:58] <dbaupp> really?
[11:08:00] * dbaupp tries
[11:08:02] <SingingBoyo> dbaupp: maybe I should just clone libgit2-rs and see what I can do with it.  All I really need for now is to get the current branch and a list of branches.
[11:08:09] <sinma> dbaupp: yes, really
[11:09:25] <dbaupp> sinma: weird, I see it too.
[11:09:28] * dbaupp doesn't understand
[11:09:37] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[11:10:01] <sinma> dbaupp: yes, itâ€™s not me, Iâ€™m not stupid â†’ itâ€™s a rustc bug?
[11:10:14] <dbaupp> SingingBoyo: updating to master was a lot of work, there were some big ffi changes, so it'll probably be easiest to work of my branch (feel free to not do so, obviously)
[11:10:21] <dbaupp> sinma: maybe, I don't know.
[11:11:11] *** Joins: aeqwa (aeqwa@moz-FB3A19F6.dsl.tropolys.de)
[11:11:28] <sinma> dbaupp: Iâ€™m going to eat with my family, so I will not answer
[11:11:29] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[11:11:48] <dbaupp> sinma: ah! it's because `mod Point` "overwrites" the import of the `Point` struct, so it's looking for a new function in `mod Point` not in an impl on the Point type
[11:12:03] <SingingBoyo> dbaupp: mostly becomes a question of whether I link the full lib, or just wrap the 2-3 libgit2 functions I need in a way that's convenient for me.
[11:12:05] <dbaupp> sinma: changing the names of the files fixes it, e.g. `mod point`
[11:12:09] <dbaupp> sinma: (oh, ok)
[11:12:13] * SingingBoyo will decide tomorrow
[11:12:35] <dbaupp> sinma: it's still seems like a bug though, you can file it if you want.
[11:12:46] <dbaupp> SingingBoyo: yeah, sleep on it etc.
[11:12:52] <SingingBoyo> dbaupp: so just to clear this up - you're huonw on github?
[11:12:57] <dbaupp> SingingBoyo: yes
[11:13:07] * dbaupp should probably call himself something similar on IRC too
[11:13:09] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[11:13:12] * SingingBoyo is less confused than he was earlier today
[11:13:19] <dbaupp> (sorry)
[11:13:25] <SingingBoyo> dbaupp: call yourself not-huonw
[11:13:43] *** dbaupp is now known as not-huonw
[11:13:55] <not-huonw> ok
[11:14:01] <pnkfelix> dbaupp: what happens if you're more specific about your imports, replacing the `use self::Point::*` line with specific id's?  (E.g., I'm wondering if lint would catch the shadow by telling you an earlier import went unused)
[11:14:07] *** not-huonw is now known as dbaupp
[11:14:21] <dbaupp> pnkfelix: doesn't work, or warn
[11:15:03] <pnkfelix> dbaupp: okay.  that's interesting, I thought unused import lint was pretty aggressive...
[11:15:18] <dbaupp> pnkfelix: it fails before hitting lint, so there's no opportunity for it to warn.
[11:15:28] <pnkfelix> dbaupp: ah, of course
[11:15:31] <dbaupp> (at least, I assume it's failing in resolve.)
[11:16:29] <kimundi> In my opinion we should be much more strict about name collisions/shadowing
[11:16:51] <pnkfelix> kimundi: Its tough to find the right balance with glob imports...
[11:17:17] <kimundi> mod foo{} struct foo{ data:uint } fn foo()
[11:17:27] <kimundi> That's legal afaik
[11:17:34] <kimundi> And that'S just terrible :P
[11:18:25] * SingingBoyo added appropriate bugs and can now sleep and remember things tomorrow.
[11:19:10] <dbaupp> kimundi: it's not entirely legal: writing `impl foo { fn static_function() {} }` will make rustc complain in a weird way
[11:19:44] <dbaupp> "error: duplicate definition of module `foo`" (since static methods are actually just placed in a secret generated module.)
[11:22:10] <Amaranth> The generated module doesn't have any kind of name mangling to ensure it doesn't collide with actual code?
[11:23:40] *** Quits: doomlord (doomlod@moz-DEFFB365.range81-147.btcentralplus.com) (Ping timeout)
[11:24:13] <dbaupp> nope
[11:25:06] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Connection reset by peer)
[11:25:06] <dbaupp> it can't, given the way static method calling works (aiui), i.e. Struct::method() is basically the same lookup procedure as module::function()
[11:25:36] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[11:25:56] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[11:28:49] <kimundi> dbaupp: That sounds like more of  reason to not allow two different items to share the same name :)
[11:31:00] <dbaupp> kimundi: yeah, it's pretty confusing
[11:33:11] <kimundi> Also, imo it would make sense to require that 'use'd names and local definitions need to be disjunct. Would need a way to exclude names from an wildcard import, but would remove the concept of shadowing inside the same lexical scope for items
[11:34:24] <kimundi> use std::int::* - {from_str}; fn from_str() { };
[11:36:11] *** Quits: cdidd (cdidd@moz-9F8F0559.broadband.corbina.ru) (Input/output error)
[11:37:34] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[11:37:34] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[11:39:49] <dbaupp> comments https://github.com/mozilla/rust/issues/9208 ?
[11:40:02] <dbaupp> kimundi++
[11:40:22] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[11:40:37] <dbaupp> Haskell has `import Module hiding (some_function)` which is handy when you need it
[11:42:59] <dbaupp> heh, "hierarchical" is so commonly misspelt that google doesn't suggest the correct spelling for a search for "heirarchical".
[11:45:14] <bjz_> kimundi: of course you have to allow globs in use exprs! use std::int::* - { std::uint::* }; then ofc it's logical to have a full mini set language for imports. :D
[11:45:21] * bjz_ jokes
[11:46:26] * kimundi throws an bunch or header files at bjz
[11:46:44] <dbaupp> `use std::int::* `intersection` std::uint::*` only import functions that would be ambiguous about whether they came from int or uint.
[11:47:01] <kimundi> The horror, THE HORROR!
[11:47:05] <bjz_> dbaupp: no unicode D:
[11:47:33] <kimundi> use std::int::* but use not std::int::from_str;
[11:47:43] <dbaupp> `use std::int::* Ã— std::uint::*` imports things as (from_str, from_str) or something
[11:47:53] <kimundi> haha
[11:48:21] <dbaupp> `use std::int::* sym_diff std::uint::*` only things that are in exactly one of int and uint
[11:48:27] <dbaupp> bjz_: there's real potential here
[11:48:47] <kimundi> use std::**::from_str; // deeply recurse and import all conflicting from_str definitions
[11:49:01] <dbaupp> hahaha
[11:50:12] <kimundi> extern mod *; use **; // Link to every crate in existence, and import every possible item in them.
[11:50:20] <bjz_> use std::int::* â–³ std::uint::*; use std::int::* - std::uint::*;
[11:51:07] *** flaper87 is now known as flaper87|afk
[11:51:54] <bjz_> kimundi: I'm sure the C folks would love use **;
[11:52:26] <dbaupp> kimundi: that'd be an amazing way to crash rustc :P
[11:53:18] <kimundi> dbaupp: The ultimate stress test :P
[11:55:35] <engla> dbaupp: "extra::crypto::legacy"  .. what is legacy changes with time, so I think all proposals to sort primitives by quality there will be inconsistent
[11:56:36] <sinma> dbaupp: this ***** use statement, really I donâ€™t like it
[11:56:37] <dbaupp> engla: yeah, I'm wasn't keen on that either; I'll just remove it entirely, and let someone else propose something.
[11:56:40] <engla> as in, can the library break its API just to reclassify a primitive?
[11:57:18] <kimundi> we need a term that is applicable for both crypto and hash :P
[11:57:19] *** Quits: Liothen (liothen@moz-80EF0CD7.spkn.qwest.net) (Quit: Textual IRC Client: www.textualapp.com)
[11:57:58] <dbaupp> sinma: in this case, sticking to the naming conventions helps: i.e. snake_case_functions, snake_case_modules, CamelCaseTypes
[11:58:16] <dbaupp> kimundi: "crash"
[11:58:24] <kimundi> dbaupp: haha
[11:58:43] <sinma> So files are named in snake_case?
[11:59:09] <sinma> But it do the same with another file, Component
[11:59:10] <dbaupp> by convention, yeah (e.g. the entirety of std, extra, syntax and rustc are like that.)
[11:59:11] <kimundi> "rust doesn't crash, so we feelt we could just redefine the meaning of that word"
[11:59:57] <dbaupp> sinma: I agree with you though, `use` acts quite strangely in certain circumstances :(
[12:00:03] <kimundi> sinma: files are named like the module they contain, so snake_case
[12:00:16] <sinma> dbaupp: my BehaviorComponent and Mechanism traits arenâ€™t recognised like the one with Point
[12:00:23] <sinma> Iâ€™ll try to change the mod name
[12:00:25] <sinma> *file name
[12:00:56] *** Quits: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP) (Connection reset by peer)
[12:01:32] *** Quits: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net) (Ping timeout)
[12:04:17] <Amaranth> Does someone have an example of a project using ruskpkg with a pkg.rs?
[12:04:38] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[12:08:20] <dbaupp> Amaranth: https://github.com/brson/rust-sdl/blob/master/pkg.rs maybe? (it's not a very good example, heh.)
[12:08:57] <dbaupp> https://github.com/smadhueagle/rustlings/blob/master/pkg.rs another one, again, very basic
[12:09:11] <Amaranth> hmm
[12:09:21] <Amaranth> So probably not a place I could use to run a code generator
[12:10:13] <dbaupp> in theory you can, there's rustpkg::api which is supposed to allow you to call the normal building functions, but I don't know how it works.
[12:10:39] *** Quits: glyc (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[12:11:19] <dbaupp> (so, I guess you can run the code gen and then call the normal build process afterwards. maybe.)
[12:11:38] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Input/output error)
[12:11:49] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[12:13:06] <dbaupp> http://www.ohloh.net/p/rust-lang "In a Nutshell, Rust ... is mostly written in C"
[12:13:08] <dbaupp> :(
[12:13:29] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[12:13:56] <dbaupp> (I guess that's src/rt/jemalloc skewing it, since it appears ohloh doesn't recognise Rust yet.)
[12:14:48] *** Joins: doomlord (doomlod@moz-DEFFB365.range81-147.btcentralplus.com)
[12:21:55] *** Quits: io2 (io2@moz-A6202C16.home.otenet.gr) (Quit: )
[12:23:48] <sinma> dbaupp: If I try to use the type Option<MechanismComponent> (MechanismComponent is a trait with no impl for the moment defined in component.rs), I have the error Â«undeclared typeÂ»
[12:23:58] *** Joins: mindcat (mindcat@8C05C7D2.26D3AE15.D6E1F3C4.IP)
[12:23:58] *** Quits: doomlord_ (servitor@moz-DEFFB365.range81-147.btcentralplus.com) (Ping timeout)
[12:23:58] *** Quits: doomlord (doomlod@moz-DEFFB365.range81-147.btcentralplus.com) (Ping timeout)
[12:24:01] *** Joins: doomlord_ (servitor@moz-DEFFB365.range81-147.btcentralplus.com)
[12:30:16] *** Joins: cmr (moznet@moz-EC676DFE.members.linode.com)
[12:30:27] <sinma> It will be great to have an import system like in D or Python
[12:30:41] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[12:30:49] <sinma> The Rust seems to be like Python one but more complicated
[12:31:42] <sinma> *the rust one
[12:31:58] *** Joins: myname (myname@F6BC1CBC.2C5F047.A0197E77.IP)
[12:32:02] <dbaupp> it's basically just Python + public/private, right?
[12:34:37] <sinma> dbaupp: but we need the use and mod statement, in Python itâ€™s Â«import â€¦ from â€¦Â»
[12:34:48] <sinma> I found it less intuitive
[12:36:02] <kimundi> Eh, I think it'S pretty intuitive once you understand that use only makes things visible, and that mod just defines the actual hierachy.
[12:36:21] *** flaper87|afk is now known as flaper87
[12:52:48] *** Joins: cmr (moznet@moz-EC676DFE.members.linode.com)
[12:53:11] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[12:53:11] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[12:55:03] <Amaranth> Although it seems it fails to build pkg.rs due to a missing reference to api::install_lib :(
[12:55:50] <dbaupp> you imported rustpkg::api, yeah?
[12:56:24] <Amaranth> Oh, I was trying rustpkg build on the test :)
[12:56:33] <dbaupp> but, it looks like it's been changed to build_lib/build_exe
[12:56:39] <dbaupp> https://github.com/mozilla/rust/blob/master/src/librustpkg/api.rs
[12:56:55] <Amaranth> The test that uses fancy-lib is marked as ignore for some other reason so I guess no one noticed it broke
[12:57:33] <dbaupp> yeah
[12:58:38] <dbaupp> in any case, you should ping tjc about rustpkg questions.
[12:58:39] <Amaranth> I think I'm just going to poke at things and see what happens
[13:02:26] *** Quits: sinma (sinma@moz-6A11C47C.fbx.proxad.net) (Ping timeout)
[13:05:03] *** Joins: sinma (sinma@moz-6A11C47C.fbx.proxad.net)
[13:12:09] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[13:13:30] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[13:13:50] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[13:14:03] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[13:15:22] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[13:16:06] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[13:16:22] <Amaranth> This error message makes no sense, it's telling me os doesn't exist for let args = os.args(); even though I've got use std::os;
[13:16:41] <kimundi> os::args()
[13:16:47] <kimundi> os is a module
[13:16:50] <Amaranth> derp
[13:17:05] <kimundi> os.args() is module call syntax, so it looks for a variable with name os ;)
[13:17:19] <kimundi> method call *
[13:17:22] <Amaranth> I'm still going to blame the compiler
[13:17:38] <kimundi> haha, feel free to do so :D
[13:19:47] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[13:29:10] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[13:31:05] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[13:32:54] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[13:35:24] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[13:36:23] *** Joins: doomlord (doomlod@moz-2BA2D1DA.range86-184.btcentralplus.com)
[13:37:32] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[13:37:35] *** Joins: Blub\w (wry@moz-479BF6B9.wireless.dyn.drei.com)
[13:37:57] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[13:42:11] *** Joins: a__ (a__@moz-25043B93.nycmny.fios.verizon.net)
[13:46:35] *** jorendorff_away is now known as jorendorff
[13:48:47] *** Quits: RMF (RMF@moz-7ED3CBC0.dsl.telepac.pt) (Quit: Textual IRC Client: www.textualapp.com)
[13:49:46] *** Joins: RMF (RMF@moz-7ED3CBC0.dsl.telepac.pt)
[13:49:58] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[13:52:18] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[13:55:58] *** Joins: CanhtTak (CanhTak@moz-E9D07AD7.wl.t.ulaval.ca)
[14:01:09] *** Quits: squiddy (squiddy@moz-42C748FE.adsl.alicedsl.de) (Ping timeout)
[14:02:32] *** jorendorff is now known as jorendorff_away
[14:02:52] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[14:05:26] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[14:06:28] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[14:06:32] *** Quits: diverse (diverse@moz-ED94B8D.oc.oc.cox.net) (Ping timeout)
[14:07:04] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[14:08:28] *** Quits: mindcat (mindcat@8C05C7D2.26D3AE15.D6E1F3C4.IP) (Ping timeout)
[14:12:29] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[14:14:09] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[14:20:02] *** Parts: CanhtTak (CanhTak@moz-E9D07AD7.wl.t.ulaval.ca) ()
[14:20:33] *** Joins: CanhtTak (CanhTak@moz-E9D07AD7.wl.t.ulaval.ca)
[14:30:35] *** Quits: CanhtTak (CanhTak@moz-E9D07AD7.wl.t.ulaval.ca) (Quit: CanhtTak)
[14:31:49] *** Joins: canhtak (jeremy@moz-E9D07AD7.wl.t.ulaval.ca)
[14:34:56] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[14:39:41] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[14:42:27] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[14:44:40] *** Quits: Blub\w (wry@moz-479BF6B9.wireless.dyn.drei.com) (Quit: bb2m)
[14:45:32] <Yurume> rusti: struct r; impl Drop for r{fn drop(&self){print("drop")}} let x=r; let y=x;
[14:45:45] <Yurume> huh rusti is gone
[14:46:31] *** Joins: kelvin (kelvin@16666FB0.996F3747.DDE5D3F6.IP)
[14:48:11] <kelvin> Hey, so I'm trying to open up a new process and feed it a file on it's stdin using a  ProcessOptions struct. But I'm running into an issue where I'm not sure how to get the file descriptor. Is there a function somewhere in the rust library for that?
[14:49:04] <Amaranth> hmm
[14:49:39] <Amaranth> It seems pkg.rs only ever sees an "install" task even when you run `rustpkg build foo` and if you have a pkg.rs rustpkg disables all of its own logic for doing things
[14:50:01] *** Joins: maik (maik@moz-58B2DA03.dip0.t-ipconnect.de)
[14:50:12] <Amaranth> Oh, and the API does not have the ability to do the actual install task, install_pkg just makes it infinite loop
[14:50:23] <Amaranth> Oh well, make it is for now
[14:55:41] *** Quits: kelvin (kelvin@16666FB0.996F3747.DDE5D3F6.IP) (Ping timeout)
[14:57:11] *** Quits: maik (maik@moz-58B2DA03.dip0.t-ipconnect.de) (Ping timeout)
[14:58:16] *** Joins: kelvin (kelvin@16666FB0.996F3747.DDE5D3F6.IP)
[14:59:48] *** Parts: lex (lex@moz-12347B81.bootp.virginia.edu) ()
[15:00:55] *** Parts: kelvin (kelvin@16666FB0.996F3747.DDE5D3F6.IP) ()
[15:01:47] *** Joins: maik (maik@moz-58B2DA03.dip0.t-ipconnect.de)
[15:01:50] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[15:01:50] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[15:02:27] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[15:05:51] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Ping timeout)
[15:05:56] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[15:10:50] *** Quits: lazyden (lazyden@moz-4578A0B7.singnet.com.sg) (Quit: lazyden)
[15:12:48] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:14:29] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[15:20:40] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[15:20:51] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[15:20:51] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/vJKd9g
[15:20:51] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[15:20:52] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[15:20:52] <ghrust> 01[13rust01] 15bors pushed 8 new commits to 06auto: 02http://git.io/ynGzLg
[15:20:52] <ghrust> 13rust/06auto 14bf37de9 15Michael Woerister: debuginfo: Basic support for trait objects.
[15:20:52] <ghrust> 13rust/06auto 14206cc59 15Michael Woerister: debuginfo: Implement DI for ty_opaque_box.
[15:20:53] <ghrust> 13rust/06auto 14f85da50 15Michael Woerister: debuginfo: Support for recursive types.
[15:20:53] *** Quits: valenting (Thunderbir@moz-9C32009D.residential.rdsnet.ro) (Ping timeout)
[15:20:55] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[15:22:41] <olsonjeffery> ugh.. so we can't use format! in libstd, yet?
[15:23:16] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[15:23:51] <cmr> olsonjeffery: nope, not until a snapshot.
[15:24:09] <cmr> and we're not valgrind clean right now
[15:24:29] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:24:36] *** Joins: squiddy (squiddy@moz-42C748FE.adsl.alicedsl.de)
[15:24:37] <olsonjeffery> <valgrind> You are UNCLEAN, Rust.
[15:25:05] <strcat> pfft, rustc is just more clever than valgrind
[15:25:11] <olsonjeffery> pretty much
[15:25:19] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: WeeChat 0.4.1)
[15:25:42] <olsonjeffery> lots of false positives. although valgrind has helped me spot a few legit issues in working w/ libuv bindings.
[15:25:44] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[15:26:24] <olsonjeffery> <valgrind> bro, do you even use-after-free()?
[15:26:49] *** Joins: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net)
[15:27:25] <steveklabnik> when is 0.8 slated for?
[15:27:30] <cmr> next week I believe.
[15:27:34] <steveklabnik> cool
[15:28:18] <cmr> Except for runtime stuff and compiler bugs, I think we're in really good shape for a release.
[15:28:21] <olsonjeffery> brson said ~3 weeks at last tuesday's meeting
[15:28:30] <olsonjeffery> but it seems to have slid left about a week?
[15:28:40] <strcat> cmr: there are fewer compiler bugs than 2 months ago
[15:28:41] <cmr> It might be in two weeks then
[15:28:42] <strcat> ;p
[15:29:02] <olsonjeffery> i just want to land my current file io work
[15:29:11] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[15:29:11] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[15:29:12] <olsonjeffery> and un-ignore all of those file io tests on windows that were failing
[15:29:20] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[15:29:21] <olsonjeffery> assuming they're actually fixed, of course
[15:29:31] <olsonjeffery> supposedly the uv_buf_t-on-windows thing should've addressed it
[15:29:40] *** Quits: doomlord (doomlod@moz-2BA2D1DA.range86-184.btcentralplus.com) (Quit: Leaving)
[15:30:38] *** Joins: a_m0d|home (a_m0d@76689BD8.A0790978.6D7C4B99.IP)
[15:31:24] <olsonjeffery> anyways. good times. im pretty excited to land the api. lots of good stuff, in it. of course, it has to pass muster.
[15:31:35] <olsonjeffery> also the thing about implementing Select on rt::io::timer would be nice.
[15:31:44] <flaper87> olsonjeffery: +1
[15:32:00] <flaper87> I'd like to figure that out
[15:32:08] <flaper87> olsonjeffery: did you read my answer to acrichto's comment?
[15:32:08] <olsonjeffery> flaper87: ill probably do it. i know all of the machinery involved
[15:32:13] <olsonjeffery> and time is short for an 0.8 release
[15:32:19] *** Quits: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Ping timeout)
[15:32:59] <flaper87> olsonjeffery: I'd like to do it, If you can lead me through the internals I'm still missing, I can get to it right now
[15:33:31] <olsonjeffery> ok, so you'd want to find another type that impl's Select or SelectInner
[15:33:38] <olsonjeffery> like rt::comm::PortOne
[15:33:57] <olsonjeffery> and you have to look at how it implements the traits methods
[15:34:09] <olsonjeffery> because those are the details of how we interact with the scheduler
[15:34:35] <olsonjeffery> and a more general-purpose timer has to be exposed in the rt::uv::uvio::UvTimer type, whose API is spelled out in rt::io::rtio::RtioTimer
[15:34:54] <olsonjeffery> right now it basically just looks like the API in rt::io::timer (just has sleep, iirc)
[15:34:54] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (Connection reset by peer)
[15:35:00] <olsonjeffery> so that has to be reworked a bit.
[15:35:26] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[15:35:52] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[15:35:52] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14a3dbcb0 to 144ecb0a3: 02http://git.io/N3iJvQ
[15:35:52] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[15:35:54] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[15:35:54] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/0wKSbg
[15:35:54] <ghrust> 13rust/06auto 148522341 15blake2-ppc: Remove {uint,int,u64,i64,...}::from_str,from_str_radix...
[15:35:54] <ghrust> 13rust/06auto 14e0528a5 15bors: auto merge of #9209 : blake2-ppc/rust/from-str, r=thestinger...
[15:35:55] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[15:36:06] <strcat> silly ghrust bot highlighting me
[15:36:16] * strcat thinks he should filter it :|
[15:36:28] <olsonjeffery> you impl Select on both rt::io::timer::Timer and rt::uv::uvio::UvTimer , but UvTimer will actually contain the meat of the interaction.. rt::io::timer::Timer will just call the methods on the RtioTimer it holds
[15:36:49] <olsonjeffery> consider having them actually have different method names so you don't unintentionally create an infinite loop (speaking from experience)
[15:37:06] <strcat> or don't use newtype structs ;p
[15:37:15] <olsonjeffery> yeah, that too
[15:37:17] * strcat doesn't like how they're implemented
[15:37:20] <olsonjeffery> priv field in a struct
[15:37:25] <strcat> and you can't make the "field" private in a newtype struct :(
[15:37:51] <kimundi> Yeah, that should really be implemented for at least newtypes
[15:37:52] <olsonjeffery> flaper87: that's pretty much the broad outline of how it'll be done.
[15:38:01] <kimundi> struct Foo(priv Bar)
[15:38:27] <kimundi> Wouldn't work for tuple structs though
[15:38:31] <olsonjeffery> strcat: i wish the compiler would warn on calls to a method in self when a wrapped type has an identical signature
[15:38:47] <flaper87> olsonjeffery: sounds good, I'll start looking at how PortOne implements Select and SelectInner and add that to rt::uv::uvio::UvTimer
[15:39:03] <olsonjeffery> flaper87: good luck!
[15:39:04] <strcat> olsonjeffery: imo newtypes shouldn't have auto-deref, it's weird
[15:39:11] * flaper87 will need that
[15:39:13] <flaper87> :D
[15:39:14] <strcat> or at least it should be opt-in
[15:39:45] <strcat> hm where did rusti go
[15:40:02] <kimundi> (Something like: struct Foo(priv Bar, Baz) // ERROR: Can not mark members of a tuple struct as private. Use a regular struct instead.)
[15:40:03] <strcat> oh that's good, the irc lib deadlocked
[15:40:06] <strcat> thanks for nothing python
[15:40:10] <kimundi> haha
[15:40:11] <olsonjeffery> rusti: struct A; impl A { fn foo(&self) {} }; struct B(A); impl B { fn foo(&self) { self.foo(); } }
[15:40:12] <cmr> lol
[15:40:17] <strcat> pkill -9 for you
[15:40:29] <olsonjeffery> whoops.
[15:40:42] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:40:45] <strcat> rusti: version
[15:40:46] -rusti- "rustc 0.8-pre (524c190 2013-09-14 12:30:54 -0700)"
[15:40:55] *** Quits: maik (maik@moz-58B2DA03.dip0.t-ipconnect.de) (Ping timeout)
[15:40:58] * strcat kicks the build server over ssh
[15:41:17] <olsonjeffery> rusti: struct A; impl A { fn foo(&self) {} } struct B(A); impl B { fn foo(&self) { self.foo(); } }
[15:41:17] -rusti- ()
[15:41:38] <olsonjeffery> so that's ambigious, isn't it? is that an infinite loop or a call to the wrapped type's foo() method?
[15:41:51] <olsonjeffery> or is (**self).foo() the way to get the wrapped type?
[15:41:52] <kimundi> rusti: ::std::str::from_utf8(version.byte_iter().map(|b| b + 1).to_owned_vec())
[15:41:53] -rusti- ~"svtud!1/9.qsf!)635d2:1!3124.1:.25!23;41;65!.1811*"
[15:41:53] <strcat> olsonjeffery: not ambiguous
[15:42:04] <strcat> olsonjeffery: it only does auto-deref if the current way doesn't work
[15:42:13] <olsonjeffery> rusti: struct A; impl A { fn foo(&self) {} } struct B(A); impl B { fn bar(&self) { self.foo(); } }
[15:42:14] -rusti- ()
[15:42:16] <strcat> olsonjeffery: an example of when this is terrible (not with newtypes)
[15:42:29] <strcat> before Clone was impl'ed for ~T where T: Clone
[15:42:39] <strcat> (~5).clone() would give you 5
[15:42:45] * kimundi tries to think of ways to use that string constant as source for little rusti programs
[15:42:49] <strcat> so you end up committing to an API you didn't realize you made
[15:43:14] <strcat> kimundi: well it's easy to make more anyway ;p
[15:43:54] <strcat> rusti: static other_version: &'static str = include_str!("/proc/version"); other_version
[15:43:55] -rusti- "Linux version 3.11.0-1-ARCH (tobias@T-POWA-LX) (gcc version 4.8.1 20130725 (prerelease) (GCC) ) #1 SMP PREEMPT Tue Sep 3 08:58:01 CEST 2013\n"
[15:44:05] <kimundi> oooh
[15:44:28] <kimundi> So many possibilities for obfuscation
[15:44:48] <strcat> they like making kernel point releases every 2 weeks though :s
[15:46:49] <olsonjeffery> this is driving me up the wall. someone help me, here: https://gist.github.com/olsonjeffery/6571905
[15:46:52] <olsonjeffery> please. thank you.
[15:47:25] <olsonjeffery> and yes, it looks like garbage because im experimenting trying to find the way to get that to build
[15:47:58] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[15:48:05] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[15:48:27] <olsonjeffery> the compiler is unhappy about `p` not living long enough.. but its a ~str, so im stumped about what the issue is.. or is it complaining about the borrow from self, i guess?
[15:48:40] <olsonjeffery> get_path() returns a &'a Path
[15:48:59] <olsonjeffery> but Path.to_str() returns a ~str, so what's the problem.
[15:49:29] <strcat> olsonjeffery: try using a temporary
[15:49:35] <strcat> olsonjeffery: rvalues are not very forgiving atm
[15:49:46] <olsonjeffery> a temporary for the path?
[15:49:47] <strcat> although I'd expect that to work....
[15:49:52] <strcat> olsonjeffery: yeah
[15:50:05] <strcat> I think it's a bug
[15:50:10] <cmr> that seems very odd
[15:50:15] <cmr> especially where it's complaining
[15:51:27] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[15:53:03] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[15:57:40] <olsonjeffery> gonna see if i can get a test case
[15:59:25] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[16:00:39] *** Joins: kaveh (Own3R@6BF66632.F918F354.C8AD233B.IP)
[16:01:45] <kaveh> new chat program www.vipspeak.com with many option , voice chat in room and pm , you make your own room and control it with admin panel :)
[16:01:49] *** Parts: kaveh (Own3R@6BF66632.F918F354.C8AD233B.IP) ()
[16:02:36] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[16:04:10] *** Quits: a__ (a__@moz-25043B93.nycmny.fios.verizon.net) (Client exited)
[16:05:59] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[16:08:01] <Yurume> I have a bit strange cause, it seems like that `drop` is called twice in some cases
[16:09:26] <bjz> SingingBoyo: added some critique: http://www.reddit.com/r/rust/comments/1mfdxh/evict_a_bug_tracker_written_in_rust/cc8rbtt
[16:11:59] <strcat> Yurume: do you have an example?
[16:12:32] <Yurume> uh, the case is too complex to paste here (I'm trying to minimize them)
[16:13:08] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:14:48] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[16:14:59] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[16:16:02] <Yurume> strcat, well, it seems I can't easily minimize them, so I'll briefly explain the situation:
[16:16:47] <Yurume> a trait `Scene` contains a struct `Screen` (as a value), which in turn contains a struct `GLState` (as a value again), and `GLState` implements `Drop`.
[16:17:24] <Yurume> `Scene` contains `fn consume(~self) -> ~Scene` method, and one `Scene` consumes itself to make a new instance of `Scene`.
[16:18:46] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[16:19:05] <Yurume> well, my explanation is a bit sloppy, *instances* of `Scene` contains `Screen`, the trait itself is independent of it, anyway.
[16:19:10] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[16:20:21] <Yurume> so the problem is that, when one scene `A` contains `Screen` and `A::consume` creates a new scene `B`, temporarily destructured instance of `Screen` (and in turn `GLState`) seems to be destroyed somehow, and `GLState::drop` is called when `consume` returns.
[16:20:37] <Yurume> ...though the `Screen` instance has been moved to `B` then.
[16:23:07] *** Joins: jesseray (Mibbit@moz-EE907FB2.dhcp.insightbb.com)
[16:24:23] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[16:25:06] <Yurume> one notable observation of this problem is that: the problem does not disappear when we replace every `Screen` with an owned box (`~Screen`) or do the same thing for `GLState`.
[16:25:58] <Yurume> is/was there any issue regarding when `drop` is called on the incorrect occasion?
[16:27:40] <strcat> well there were issues with there being ways of copying non-copyable types
[16:27:45] <strcat> but I don't know of any that are still open
[16:31:30] <cmr> Yurume: Are you doing a functional update?
[16:31:39] <cmr> Ie, SomeStruct { ..other_struct }
[16:32:30] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[16:33:14] *** Joins: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[16:34:42] *** Joins: doomlord (doomlod@moz-2BA2D1DA.range86-184.btcentralplus.com)
[16:34:58] <jesseray> Please pardon the off-topic question. In Haskell, one can write "data Tanks = 0 | 1 | 2 | 3 | 4" to create a type called Tanks that accepts one of the possible values 0, 1, 2, 3, or 4. Is it possible to do the same in Rust? If so, what is the syntax for it?
[16:35:16] <acrichto> flaper87: pong
[16:35:37] <myname> don't see why that should be off-topic
[16:36:18] <jesseray> When I entered chat, I seen "Topic set by tjc on Mon Sep 02 2013 18:44:33 GMT-0400 (EDT)". I didn't know what the topic was, so I assumed it wasn't what I wanted to talk about =P
[16:36:25] <acrichto> jesseray: in rust we call those "enums", so that would be "enum Tanks { 0, 1, 2, 3, 4 }"
[16:36:44] <acrichto> jesseray: although I don't think the names 0, 1, 2, 3, 4 will work, so you'll need to maek them valid rust identifiers
[16:36:50] <acrichto> like T0, T1, etc.
[16:37:52] <jesseray> Yeah, I wanted something like an Enum that accepted the numeric literals themselves. The Rust manual doesn't make it clear what is acceptable.
[16:38:37] <acrichto> that's unfortunate... (about the rust manual being unclear), I believe that an enum variant must be a valid rust identifier, which can't be integers
[16:38:43] <kimundi> jesseray: Don't worry, everything that is related to rust is ontopic here :) And feel free to ask questions we are all aware that the docs are a bit useless for know
[16:39:06] <kimundi> correct, needs to be an identifier
[16:39:13] <acrichto> jesseray: you could to "struct Tank { priv n: uint }" and then that way you control what tanks can be made
[16:39:34] <acrichto> not as nice, but is kinda the same idea
[16:39:55] <kimundi> Or make a assoziated function for Tanks that converts from/to integers
[16:40:01] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[16:40:24] <jesseray> I wonder if Rust can be extended to support something like: "type Hearts = 0 | 1 | 2 | 3 | 4"?
[16:40:28] <Yurume> cmr, no.
[16:40:47] <Yurume> oh, and I think I finally have a (hardly) minimal example: http://ix.io/84T
[16:40:53] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[16:41:04] <jesseray> Think I should make an enhancement request in the Github issue tracker?
[16:41:19] <acrichto> jesseray: I'm curious how that works in haskell, it seems like it's ambiguous what an integer is then. Is it an integer, or is it a Heart?
[16:41:34] <acrichto> jesseray: you can feel free to open an issue though
[16:41:39] <cmr> jesseray: if you want to. won't happen until after 1.0, I imagine.
[16:41:41] <kimundi> jesseray: The current situation is unlikely to ever change in that regard
[16:42:19] <kimundi> At least, in the near future
[16:42:42] <jesseray> Hearts would be its own type which accepts a value of (the numeric literal) 0, or 1, or 2, or 3, or 4, nothing else.
[16:43:29] <Yurume> I think it would require something like OCaml polymorphic variants
[16:43:33] <acrichto> jesseray: I suppose it would be possible, I think that rust's type inference isn't as global as haskell's is, so it may be more difficult for rust specifically to implement that
[16:43:51] <Yurume> (i.e. types for "subset of variants" and "superset of variants")
[16:43:58] <jesseray> This lets the programmer work with a more restrictive type, which lets the compiler check for more potential problems and lets the programmer avoid checking for errors through additional code.
[16:45:05] <kimundi> jesseray: We already have enums that do exactly that.
[16:45:19] <jesseray> Yes, but enums require Rust identifiers.
[16:45:21] <kimundi> jesseray: Just not by using integer literals
[16:45:26] <jesseray> Which is avoidably ugly, imo.
[16:45:43] *** Joins: obk (Mibbit@56A7885C.6849BFB2.CB858787.IP)
[16:45:49] <kimundi> It's the way rusts syntax and grammar works, though
[16:45:52] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[16:45:52] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/0wKSbg
[16:45:52] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[16:46:19] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[16:46:43] *** Parts: canhtak (jeremy@moz-E9D07AD7.wl.t.ulaval.ca) ()
[16:46:50] <kimundi> we have two number literals: integer literals and float literals. Both result in an concrete value of the types uint, u8, u16, u32, u64, int, i8, i16, i32, i64 float, f32 or f64
[16:47:13] <obk> Is forbidding the two simultaneous burrows in http://mibpaste.com/XuTOD7 intentional? What is the reasoning behind it?
[16:47:14] *** Joins: canhtak (jeremy@moz-E9D07AD7.wl.t.ulaval.ca)
[16:47:29] <bjz> kimundi: well, you can add a suffix to be precise too
[16:47:43] <kimundi> There has been talk about somehow allowing generic number literals for custom number types.
[16:47:48] <cmr> obk: borrow, not burrow
[16:48:01] <obk> Ugh. Yes. Sorry.
[16:48:04] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[16:48:21] <cmr> obk: and it's because it breaks the aliasing rules. You can't have multiple pointers to something with a mutable loan.
[16:48:28] <acrichto> obk: you may want to update your rust locally, the borrow checker has since been taught how to allow patterns like that
[16:48:35] <Yurume> jesse98, what operations do you want to allow for `Hearts`, for example additions?
[16:48:36] <acrichto> obk: your example compiles on master
[16:48:38] <cmr> obk: in this case it's a bit over-restrictive, since you're modifying disjoint parts of the struct
[16:48:40] <cmr> Oh!
[16:48:50] <obk> Aha
[16:48:58] *** Quits: jpf (jan@moz-A8C26A15.org) (Ping timeout)
[16:49:02] *** Quits: a_m0d|home (a_m0d@76689BD8.A0790978.6D7C4B99.IP) (Quit: Leaving.)
[16:49:08] <obk> Ok, will upgrade (am using 0.80-pre right now, not chasing HEAD)
[16:49:12] <obk> Thanks!
[16:49:12] <Yurume> such ranged integers are harder to operate with, since almost every operation may cause an exception
[16:50:02] <Yurume> (and that's why floating point numbers, another ranged numeral types, have infinities and NaN)
[16:50:23] <bjz> Yurume: Is this what you mean? http://caml.inria.fr/pub/docs/manual-ocaml/lablexamples.html#sec46
[16:50:34] <Yurume> right.
[16:50:47] *** Joins: msch (msch@moz-DA0E34D4.clients.your-server.de)
[16:50:51] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[16:50:51] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/3IX9Wg
[16:50:51] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[16:51:32] <kimundi> let h1 = Hearts::from_num(2); let h2 = Hearts::from_num(1); let h3 = h1 + h2 ; // Perfectly possible without needing to changing the rust grammar
[16:52:37] <Yurume> kimundi, I assumed jesseray wants to have a compile time safety as well
[16:53:38] *** Quits: qmx (qmx@moz-B6DBCD05.qmx.me) (Ping timeout)
[16:53:55] *** Joins: tjc (tjc@moz-F3C1906.tmodns.net)
[16:53:56] *** ChanServ sets mode: +o tjc
[16:57:05] *** Joins: qmx (qmx@moz-B6DBCD05.qmx.me)
[16:58:03] *** Joins: a__ (a__@moz-25043B93.nycmny.fios.verizon.net)
[16:58:13] *** Joins: Palmik (palmik@moz-11EA685D.pks.muni.cz)
[16:58:16] <kimundi> Hm, I think I'm thinking about this the wrong way. jesseray does not want an enum with integer literal variants (which does not make sense), he/she want's an integer newtype with custom numeric limits,
[16:58:42] *** Joins: jpf (jan@moz-A8C26A15.org)
[16:59:07] <kimundi> That at least I can imagine how it could fit in rust :)
[16:59:19] <Yurume> does jesseray want a newtype? I didn't think so.
[16:59:48] <kimundi> Well, Heart and Tanks does not sound like the regular name :P
[17:00:11] <kimundi> Which, given how this would be a type with custom limit, probably wouldn't even exist
[17:00:13] *** Joins: maik (maik@moz-2DF9637C.dip0.t-ipconnect.de)
[17:03:28] <kimundi> Let's see, hypothetical syntax: struct Heart for uint(0..3, 100); // Allow the values 0,1,2,3,100
[17:03:34] <kimundi> Something like I guess
[17:03:39] <kimundi> like that*
[17:04:36] <jesseray> I want a type that I can use and pass around which accepts only the values that I specify. If code assigns a value that I did not specify, then that would trigger a compiler error.
[17:05:38] <strcat> rusti: range(0, 10).collect::<~[int]>()
[17:05:38] -rusti- ~[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
[17:05:42] <jesseray> type Hearts = 0 | 1 | 2 | 3 | 4; let x: Hearts = 5;  ----- error!
[17:05:56] <strcat> rusti: 2
[17:05:56] -rusti- 2
[17:05:59] <strcat> rusti: version
[17:06:00] -rusti- "rustc 0.8-pre (4ecb0a3 2013-09-15 01:50:50 -0700)"
[17:06:26] <cmr> jesseray: but what about
[17:06:33] <cmr> Hm
[17:06:41] <cmr> let x: Hearts = y;
[17:06:47] <cmr> Where y: int?
[17:07:02] <jesseray> If y is 0 or 1 or 2 or 3 or 4, okay. If not, error.
[17:07:03] <cmr> Would that just be disallowed?
[17:07:07] <cmr> At runtime?
[17:07:22] <jesseray> I don't know how Haskell does it, but I like it =P
[17:07:29] <strcat> language features shouldn't depend on unwinding
[17:07:45] <cmr> Oh, that's a ghc extension
[17:07:48] <cmr> not a haskell thing
[17:08:05] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[17:08:07] <jesseray> Ah right, GHC != Haskell.
[17:08:12] <jesseray> I keep forgetting that =P
[17:08:13] <strcat> in practical terms ghc == haskell, though
[17:08:21] <msch> hi, I just build the latest master (4ecb0a372d4b246f694bf780d50809dc0fb32018) on x64 linux and wanted to check out rusti, it crashes with segmentation fault after every valid expression (e.g. 5 is enough to crash it) should I just downgrade to a "known good" 0.8 version?
[17:08:38] <strcat> msch: rusti is known to not work
[17:08:56] <msch> strcat ah ok, thanks!
[17:09:02] <strcat> it didn't ever work properly, it just wasn't *as* broken
[17:09:06] <strcat> that's why it prints that warning header
[17:09:20] <strcat> the tests for it are disabled
[17:09:35] <msch> i see :)
[17:09:57] *** Joins: cdidd (cdidd@moz-D40E07FA.broadband.corbina.ru)
[17:11:05] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[17:12:40] *** Quits: maik (maik@moz-2DF9637C.dip0.t-ipconnect.de) (Ping timeout)
[17:13:28] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:13:56] *** Joins: maik (maik@moz-2DF9637C.dip0.t-ipconnect.de)
[17:14:37] <strcat> rusti: for x in std::iter::range_step(0u8, 200, 80) { println!("{}", x) }
[17:14:37] -rusti- 0
[17:14:37] -rusti- 80
[17:14:38] -rusti- 160
[17:14:38] -rusti- ()
[17:14:50] <strcat> rusti: for x in std::iter::range_step(0u8, 255, 80) { println!("{}", x) }
[17:14:51] -rusti- 0
[17:14:51] -rusti- 80
[17:14:51] -rusti- 160
[17:14:51] -rusti- 240
[17:14:51] -rusti- ()
[17:15:08] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[17:15:11] <cmr> strcat: not in the prelude?
[17:15:12] <strcat> rusti: [] + []
[17:15:12] -rusti- <anon>:7:9: 7:16 error: cannot determine a type for this bounded type parameter: unconstrained type
[17:15:12] -rusti- <anon>:7          [] + []
[17:15:12] -rusti-                   ^~~~~~~
[17:15:13] -rusti- application terminated with error code 101
[17:15:15] <strcat> cmr: no
[17:15:17] <strcat> only range is
[17:15:26] <strcat> not range_inclusive, range_step, range_step_inclusive and count
[17:16:02] <strcat> anyway those APIs are done now, beyond optimizations like size hints
[17:16:48] <cmr> strcat: nice job, thanks :)
[17:17:23] <strcat> rusti: std::iter::count(10, 5).take(20).to_owned_vec()
[17:17:23] -rusti- ~[10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95, 100, 105]
[17:18:01] <strcat> a lot of that module is ready to be marked stable ;p
[17:18:19] <cmr> rusti: for x in std::iter::range_step(0u8, 125, 300) { print!("{} ", x) }
[17:18:20] -rusti- 0 44 88 ()
[17:19:44] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[17:20:25] * strcat thinks it is perfect now
[17:21:55] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Ping timeout)
[17:22:38] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[17:25:26] *** Joins: ofeldt- (ofeldt@moz-DD06AF4F.dip0.t-ipconnect.de)
[17:25:50] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[17:25:50] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14cf8ba90 to 14e0528a5: 02http://git.io/N3iJvQ
[17:25:50] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[17:25:52] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[17:25:52] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/8fEcmQ
[17:25:52] <ghrust> 13rust/06auto 1484f2d33 15Tim Chevalier: rustpkg: Cleanup
[17:25:52] <ghrust> 13rust/06auto 14c8c3c3b 15bors: auto merge of #9150 : catamorphism/rust/rustpkg-cleanup, r=catamorphism...
[17:25:52] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[17:26:05] *** Quits: ofeldt (ofeldt@moz-769A9897.dip0.t-ipconnect.de) (Ping timeout)
[17:26:11] *** Quits: maik (maik@moz-2DF9637C.dip0.t-ipconnect.de) (Ping timeout)
[17:26:20] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[17:29:57] *** Quits: RMF (RMF@moz-7ED3CBC0.dsl.telepac.pt) (Quit: Textual IRC Client: www.textualapp.com)
[17:36:06] *** Joins: tclark (ctimothy@moz-1DB1FE6E.hsd1.wa.comcast.net)
[17:36:18] *** Joins: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net)
[17:36:24] *** Quits: tjc (tjc@moz-F3C1906.tmodns.net) (Quit: zzzzzzzzzz)
[17:38:10] <cmr> fhahn: thanks for taking up the grammar tests, there's not a lot of expertise in that area.
[17:43:44] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[17:55:51] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[17:58:30] *** Joins: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP)
[17:59:32] *** Quits: obk (Mibbit@56A7885C.6849BFB2.CB858787.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:02:18] <flaper87> acrichto: ping
[18:02:20] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[18:02:22] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[18:02:27] <acrichto> flaper87: pong
[18:02:34] <flaper87> acrichto: I just wanted to say that I agree with your comment.
[18:02:49] <flaper87> acrichto: I don't see the point on letting that implementation land with _poll 
[18:02:53] *** Quits: tefter (tefter@B5D119DC.B856A0A1.73804765.IP) (Ping timeout)
[18:03:03] <acrichto> flaper87: why not?
[18:03:04] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[18:03:06] <flaper87> acrichto: FWIW I started working on a SelectInner implementation for timer
[18:03:29] <flaper87> acrichto: I mean, I can add _poll very quickly and add docstring
[18:03:39] <olsonjeffery> i would've preferred to land something w/o polling
[18:03:44] <flaper87> but I already started working ont the SelectInner implementation
[18:03:48] <flaper87> olsonjeffery: +1
[18:03:51] <olsonjeffery> just a naive version that does a peek(), then sleeps for the whole timeout
[18:03:59] <olsonjeffery> if the port hasn't recv'd data yet
[18:04:10] <olsonjeffery> and then peeks again and returns NOne is data still hasn't arrived
[18:04:16] <acrichto> flaper87: if real timeouts are on the near horizon, then there's no need to add the polling one now?
[18:04:27] <flaper87> I don't like it to sleep the whole time
[18:04:36] <flaper87> acrichto: yup, that's what I mean
[18:04:36] <olsonjeffery> bottom line: even the poll'ing impl is progress, insofar as it adds API that we don't have
[18:04:44] <olsonjeffery> and its pretty much agreed that we can fix it in short order
[18:04:49] <acrichto> flaper87: cool, that's awesome!
[18:05:08] <flaper87> olsonjeffery: agree on it being progress
[18:05:22] <olsonjeffery> id rather have a stable API in master that we can fix the impl details of, as opposed to having nothing. don't let perfection be the enemy of progress.
[18:05:32] <cmr> olsonjeffery++
[18:05:34] <flaper87> so, lets do this, since 0.8 release is very close, we could let this land with _poll
[18:05:52] <flaper87> olsonjeffery: that was my thought when I submitted that patch
[18:06:01] <flaper87> lets first *have it* then improve it
[18:06:12] <olsonjeffery> flaper87: well, here we are. so just drive ahead w/ adding Select to Timer
[18:06:17] <acrichto> flaper87: do you have an eta estimate for a real timeout implementation?
[18:06:33] <olsonjeffery> but know that, if you can't make a PR basically this week (0.8 is in the next 1-2 weeks), then i think we should do something sooner
[18:06:43] <olsonjeffery> acrichto: he's doing this as a crash course intro to newrt
[18:06:52] <acrichto> fun times :)
[18:06:53] <olsonjeffery> its fairly straightforward
[18:06:54] <flaper87> acrichto: I'm hoping to have it ready before 0.8 release 
[18:07:01] <olsonjeffery> but he still has to grock uvio, basically
[18:07:05] <olsonjeffery> grok, even
[18:07:15] <flaper87> acrichto: what olsonjeffery just said :)
[18:07:29] <acrichto> flaper87: are you ok with putting the polling patch on-hold until right before the 0.8 release?
[18:07:37] <olsonjeffery> im all for letting flaper87 figure it out. just inopportune timing.
[18:07:56] <flaper87> acrichto: yup, I'm ok with that
[18:08:04] <flaper87> If the new patch is not ready before 0.8
[18:08:07] <flaper87> we can let it land
[18:08:12] <flaper87> acrichto: I'll add the docstring anyway
[18:08:14] <flaper87> that's for sure
[18:08:17] <flaper87> + a FIXME
[18:08:20] <flaper87> which I forgot to add
[18:08:31] <acrichto> flaper87: cool, thanks!
[18:08:57] <olsonjeffery> this is also a good oppotunity, as flaper87 knows, to expand the timer API instead of just exposing sleep
[18:09:24] <olsonjeffery> in terms of rust's api, i would see it as almost like a port that only recv's after the timeout has passed
[18:09:29] *** Quits: silotis (quassel@moz-4B8C4631.oc.oc.cox.net) (Client exited)
[18:09:37] <olsonjeffery> but that gets tricky if the task that starts the timer never yields after calling start()
[18:09:48] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[18:09:59] <olsonjeffery> so should there be a datetime comparison, in addition to waiting for the libuv timer to fire?
[18:10:37] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:11:15] <acrichto> I know that go's versions of timers are just channels with the wakeup-date sent over them at the appropriate time
[18:11:27] <acrichto> allows for easy selection among channels (not sure what we have planned in that respect)
[18:11:34] *** Joins: silotis (quassel@moz-4B8C4631.oc.oc.cox.net)
[18:11:34] <olsonjeffery> acrichto: but does Go push a timer into a background thread?
[18:11:47] <acrichto> olsonjeffery: not sure, lemme look
[18:12:08] <olsonjeffery> because im saying that, on a single threaded scheduler, libuv might never get a chance to fire the wakeup event if the task that started the timer doesn't yield..
[18:12:11] *** Joins: valenting (Thunderbir@moz-9C32009D.residential.rdsnet.ro)
[18:12:12] <acrichto> oh looks like they also have time.Sleep
[18:13:02] <acrichto> olsonjeffery: hm, looks to be some sort of ffi? going on?
[18:13:08] <acrichto> http://golang.org/src/pkg/time/sleep.go
[18:13:17] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:13:19] <olsonjeffery> iow magic
[18:13:21] <acrichto> I was unaware you could just write "func Foo()" in go without providing a body
[18:13:24] <acrichto> dunno what's going on there
[18:16:04] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:19:31] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:20:43] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[18:21:32] <klutzy> acrichto: I solved my `check-fail` failure on opening Path("?/?")
[18:21:43] <acrichto> klutzy: awesome! what was the problem
[18:21:54] <acrichto> klutzy: also, did you close 8817?
[18:22:31] <klutzy> acrichto: https://github.com/mozilla/rust/pull/9211
[18:22:40] <acrichto> ah yeah I guess I'll read it :P
[18:22:42] <klutzy> oops, I forgot to mention 8817
[18:22:46] <olsonjeffery> klutzy: just saw that.. awesome!
[18:22:52] <acrichto> klutzy: is uv_req_type different on windows than on unix?
[18:23:05] <klutzy> acrichto: yep. it was really obscure
[18:23:12] <acrichto> whoa
[18:23:15] <olsonjeffery> of course, merge conflicts. bleh.
[18:23:16] <klutzy> acrichto: https://github.com/joyent/libuv/blob/master/include/uv.h#L176
[18:23:18] <klutzy> "UV_REQ_TYPE_PRIVATE"
[18:23:29] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[18:23:31] <olsonjeffery> i restructured all of the tests in rt::io::file
[18:23:40] <olsonjeffery> so dealing with that is going to be !fun
[18:23:45] <acrichto> klutzy: wheeeeee
[18:23:46] <klutzy> this is like.. #define UV_REQ_TYPE_PRIVATE A, B, C
[18:25:47] <acrichto> klutzy: minor comments, otherwise lgtm
[18:26:03] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[18:26:03] *** ChanServ sets mode: +o pnkfelix
[18:26:25] *** Joins: e98 (e98@moz-1E636C97.dip0.t-ipconnect.de)
[18:27:40] <e98> anyone else fail to build rust on i686 with error: task <unnamed> failed at 'failure in fork: Cannot allocate memory'?
[18:27:56] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[18:28:06] <e98> it's a new errors that sprung up in the last two days or so
[18:28:13] <strcat> e98: you just don't have enough memory to build it
[18:28:31] *** Quits: squiddy (squiddy@moz-42C748FE.adsl.alicedsl.de) (Ping timeout)
[18:28:33] *** Joins: igl (igl@moz-E6D85451.adsl.alicedsl.de)
[18:28:37] <strcat> going to guess that you're on linux with maybe 2GiB of ram and no swap
[18:28:46] <strcat> and the default overcommit ratio
[18:29:19] <e98> e98: I can see that but this is new so there's a regression. 2GB RAM and I should have swap
[18:29:20] *** Quits: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP) (Ping timeout)
[18:29:38] <e98> but maybe a recent systemd update disabled giving me swap? what the spongebob is this
[18:30:57] <e98> for whatever reason systemd-208 thinks it should ignore my swap mount rule in fstab
[18:31:25] <e98> didn't realize rust used to swap. good revelation
[18:31:44] <strcat> e98: it might not actually swap, but the default overcommit ratio won't actually let you use all your memory
[18:31:59] <strcat> because it's meant for systems with swap >= the size of the memory
[18:32:26] <strcat> (in some cases it will, but not if there's a lot of VM)
[18:32:30] <e98> "it's" refers to 'overcommit'?
[18:32:37] <strcat> yes
[18:32:41] <e98> ok
[18:32:42] <strcat> I mean, the default ratio
[18:32:44] <strcat> 50%
[18:33:26] <strcat> When overcommit_memory is set to 2, the committed address
[18:33:27] <strcat> space is not permitted to exceed swap plus this percentage
[18:33:29] <strcat> of physical RAM.  See above.
[18:33:57] <strcat> well
[18:34:01] <strcat> I guess that's not the default
[18:34:03] * strcat shrugs
[18:34:09] *** Joins: maik (maik@moz-2DF9637C.dip0.t-ipconnect.de)
[18:34:13] <klutzy> acrichto: rebased!
[18:34:18] <e98> retrying now
[18:34:32] *** Quits: miza (miza@moz-908EA8DE.home.otenet.gr) (Input/output error)
[18:34:57] <Luqman> strcat: i didn't see a failure with your function branch on an x86 cross build
[18:35:15] <e98> strcat: but there's a mem regression in rustc because it had been using considerably for quite some time
[18:35:23] <e98> strcat: just saying
[18:35:41] <strcat> the memory usage fluctuates a lot
[18:35:54] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[18:35:54] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/8fEcmQ
[18:35:54] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[18:35:57] <strcat> the low point was ~1.2GiB while compiling librustc, now maybe it's 1.8GiB
[18:36:10] <e98> on 64-bit?
[18:36:16] <cmr> everywhere
[18:36:31] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[18:36:54] <e98> cmr: same amount on 32-bit and 64-bit. surprising. short explanation to learn from?
[18:37:15] <strcat> why would it use more on one or the other?
[18:37:23] <strcat> we use hash tables and vectors
[18:37:28] <strcat> so the ptr size doesn't really matter
[18:38:10] <e98> aka negligible in comparison?
[18:38:18] <cmr> yes
[18:38:21] <e98> ok
[18:38:32] <klutzy> acrichto: ah, not pushed yet. I forgot to `git rebase --continue`
[18:39:11] <klutzy> now donw
[18:40:51] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[18:40:51] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/-UxtPw
[18:40:51] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[18:40:51] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[18:40:52] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/sAB-FQ
[18:40:52] <ghrust> 13rust/06auto 145363413 15Alex Crichton: When declaring extern fns from external crates, use the correct abi...
[18:40:52] <ghrust> 13rust/06auto 14032d3c4 15bors: auto merge of #9196 : alexcrichton/rust/attempting-9055, r=cmr...
[18:40:52] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[18:41:00] <klutzy> there are some more `make check-fast` failure on my machine, I think it is also related to locale/language
[18:41:02] *** Joins: igl1 (igl@moz-32382212.adsl.alicedsl.de)
[18:41:03] *** Quits: igl (igl@moz-E6D85451.adsl.alicedsl.de) (Ping timeout)
[18:41:10] <klutzy> I'll fix it later
[18:42:10] <sinma> how the derivable trait works? Is it like inheritance on direct impl?
[18:42:28] <sinma> *derivable traits
[18:42:32] <cmr> sinma: what do you mean?
[18:42:37] <cmr> #[deriving(Clone)], for example?
[18:42:53] <kimundi> sinma: They are just regular trait implementations, but the compiler generates the code for you
[18:43:00] <e98> thanks strcat and cmr, I expect it should work again now
[18:43:11] *** Joins: igl (igl@moz-CA4872E4.adsl.alicedsl.de)
[18:43:18] <e98> now have to figure out why swap is not 'mounted' or swaponed
[18:43:32] *** Quits: igl1 (igl@moz-32382212.adsl.alicedsl.de) (Ping timeout)
[18:43:33] *** Joins: RMF (RMF@moz-7ED3CBC0.dsl.telepac.pt)
[18:44:22] <kimundi> #[deriving(Clone)] struct Foo { ... } ==> struct Foo { ... } impl Clone for Foo { ... }
[18:45:27] <engla> hashmaps could be smaller if Option<Bucket<K,V>> was redefined to be its own enum
[18:45:36] *** Joins: obk (Mibbit@56A7885C.6849BFB2.CB858787.IP)
[18:45:47] <engla> Then the nullable pointer optimization would be used whenever either K or V is a nullable pointer
[18:46:33] <sinma> kimundi: can I derivate trait impl of my code?
[18:46:52] <cmr> sinma: not yet, it's currently hardcoded into the compiler.
[18:47:10] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[18:47:24] *** Joins: orshem (orshem@F0A9EA9.588A166C.E3D28531.IP)
[18:47:31] <obk> Just updated to head, a macro stopped working. The macro assumes a variable with a name "foo" exists in the current scope and accesses it. After updating, I get a complaint that "foo" is unresolved. Is this intentional?
[18:47:40] *** Quits: e98 (e98@moz-1E636C97.dip0.t-ipconnect.de) (Quit: leaving)
[18:47:49] *** Joins: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net)
[18:47:53] <cmr> obk: yes, it's called hygiene.
[18:48:07] * engla will try that now
[18:48:24] *** Joins: glyc (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net)
[18:48:27] <obk> I thought hygiene only applies to variables the macro defines! Not to external variables the macro assumes are in scope...
[18:49:06] <cmr> oh, hm
[18:49:07] <glyc> what's the modern equivalent of   use dvec::DVec;   // I'm trying to catch up some rust 0.5 to the present
[18:50:17] * obk could work around this by using task local_data, but that's (1) less efficient and (2) less safe...
[18:50:32] <obk> Not to mention the "ugh" factor...
[18:50:44] <orshem> hi. does rust have a way to split a unique vector into two unique sub vectors without a copy?
[18:50:46] <pauls> obk: hygiene is about assuring that names in a macro don't interact with the outside world.
[18:51:17] <pauls> (and vice versa)
[18:51:39] <obk> Completely? I was under the impression that the problem was introducing known-to-be-unique new names, not being unable to access external ones. Though I can see that a strict view of macros could require boths.
[18:52:16] <obk> Well - maybe if I said what I'm trying to do rather than nit-picking the new macros...
[18:52:23] <pauls> obk: you can always have the user choose `foo` as an argument.
[18:52:33] <pauls> obk: there are essentially two sides to the problem.
[18:52:57] *** Joins: igl1 (igl@moz-7BB96A1F.adsl.alicedsl.de)
[18:53:12] *** Quits: igl (igl@moz-CA4872E4.adsl.alicedsl.de) (Ping timeout)
[18:53:14] *** Quits: igl1 (igl@moz-7BB96A1F.adsl.alicedsl.de) (Quit: Leaving.)
[18:53:15] *** Joins: igl (igl@moz-7BB96A1F.adsl.alicedsl.de)
[18:53:30] <pauls> The macro can provide definitions which change the meaning of user code. For this problem, just generating a fresh name is a solution.
[18:53:41] <pauls> (kind of, because it's a pain to do that manually)
[18:53:46] <obk> Right. So here's what I'm doing. I'm trying to build a complex structure. There's an intermediate (complex) state. Basically all the operations are of the form `state.operation(...)` and `do state.operation(...) { ... }`.
[18:53:46] *** Quits: igl (igl@moz-7BB96A1F.adsl.alicedsl.de) (Quit: Leaving.)
[18:54:07] <obk> Actually, I need to pass file!() and line!() to the operation (for advanced error messages and so on).
[18:54:19] <orshem> what's the equivalent trait of a comparer interface from java?
[18:54:46] <cmr> orshem: TotalOrd ?
[18:54:50] <obk> So, I used the convention that `state` needs to be in scope and defined operation!(...) to be `state.operation(file!(), line!(), ...)`. Basically.
[18:54:51] <pauls> The other side is that a macro can refer to something in its definition, which gets changed before the macro gets used. This is impossible to solve manually through fresh name generation, because the name in question has already been chosen.
[18:54:52] <cmr> It offers a `compare` method
[18:55:30] <obk> This created a reasonable eDSL... not perfect because I couldn't `do operation!(...) { ...}`, I had to do `operation!(..., { ... })`, but, OK.
[18:55:50] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[18:55:50] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14032d3c4 to 14c8c3c3b: 02http://git.io/N3iJvQ
[18:55:50] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[18:55:53] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[18:55:53] <ghrust> 01[13rust01] 15bors pushed 9 new commits to 06auto: 02http://git.io/Up3pWA
[18:55:53] <ghrust> 13rust/06auto 14bf37de9 15Michael Woerister: debuginfo: Basic support for trait objects.
[18:55:53] <ghrust> 13rust/06auto 14206cc59 15Michael Woerister: debuginfo: Implement DI for ty_opaque_box.
[18:55:53] <ghrust> 13rust/06auto 14f85da50 15Michael Woerister: debuginfo: Support for recursive types.
[18:55:55] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[18:55:58] <cyndis> isn't it so that a macro can directly use variables from the scope it was defined in?
[18:56:03] <cyndis> at least i recall reading that
[18:56:04] <pauls> obk: so, you can pass in `state` to each of these. But if that's too bulky...
[18:56:18] <pauls> cyndis: yes, if I understand your question correctly.
[18:56:45] <obk> pauls: You lost me. Refering to something in the macro definition? I thought the definition was re-expanded every time, so it _can't_ refer to anything at that point, just at the expansion point?
[18:56:53] <pauls> ...you can make one big macro that takes `state` once, and performs a bunch of operations.
[18:57:13] <cyndis> what i mean is e.g. defining it inside a method that also declares local variables
[18:57:33] <obk> Well, I have different operations... and I need to mix-and-match - that's the eDSL-ish part.
[18:57:40] <cyndis> and then the macro can use those locals without them being parameters to it
[18:57:44] <pauls> obk: that's precisely what hygiene is supposed to avoid. When a user uses a name, it should have the meaning that it has *at the moment it is written down*, and nothing should be able to change that.
[18:58:14] <obk> Sounds strange... I thought hygiene was about safety, not about reducing expressive power...
[18:58:44] <obk> cyndis: My macro is defined way outside the scope it is used at :-(
[18:59:10] <pauls> obk: yeah, but you can make a complex macro whose invocations describe a whole sequence of operations.
[18:59:29] <pauls> It'll need to be recursively-defined, but the macro tutorial should help explain how that works.
[18:59:34] <cyndis> obk: maybe it would be possible to make a simple wrapper macro that just calls the big macro with a parameter?
[18:59:42] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[18:59:50] * obk is missing something...
[19:01:01] <obk> Using what I have now, I get something like http://mibpaste.com/O1tpQK 
[19:01:53] <obk> I'm not sure I follow how I could get an equivalent with the new rules
[19:02:03] <obk> recursive macros or no recursive macros...
[19:02:03] <cyndis> you could define local wrappers for each of those external macros that simple use the local state variable and pass it to the external macro
[19:02:17] <pauls> cyndis: hygiene allows the macro definer to expand to, say `append($a,$b)`, without worrying that `append` might change meaning at a particular use site.
[19:02:30] <obk> Ugh, I have about a dozen "verbs" in my eDSL, redefining them each time - nah...
[19:02:43] <cyndis> obk: hmm, ok :/
[19:02:47] <cyndis> pauls: yeah
[19:03:01] <obk> pauls: Ah, I see. So any external name must have the same meaning it had at the time the macro was defined?
[19:03:18] <obk> I guess there's logic to this position.
[19:04:14] <cyndis> maybe you could create a macro the redefine the verbs in each place ;)
[19:04:27] <obk> (BTW, I wish I could write `do foo!(...) { ... }` - as things stands, one can't expand a macro to just the function part of `do function-part { ... }`, alas.)
[19:04:50] <obk> Defining macros that define macros - at some point, one needs to draw the line.
[19:05:17] <obk> Rust is pretty good about eDSLs (what with `do foo() { ... }` and so on). However... not as nice as, say, Ruby.
[19:05:36] <pauls> obk: `fn build() { st!(/*def. of state*/ -> foo(params); bar(params); }`
[19:05:43] *** Joins: joebobjoe (Mibbit@1EEF8F2.50A2C647.5A42B74E.IP)
[19:05:58] <joebobjoe> Do you think some day we will have an operating system written in Rust?
[19:06:03] <joebobjoe> Is it even possible?
[19:06:10] <cmr> joebobjoe: I'm working on one now.
[19:06:15] <obk> pauls: I don't follow.
[19:06:16] <cmr> Others already exist
[19:06:17] <orshem> cmr, thanks. do you know also if there is a way to split ~[1, 2, 3, 4, 5] into &mut[1,2,3] and &mut [4,5] at the same time?
[19:06:26] <pauls> Dealing with things like `baz!` there is going to require some creativity.
[19:06:29] <cmr> Although I think mine is the first serious project intended not as a tech-demo.
[19:06:32] <obk> How are `foo` and `bar` defined in this case?
[19:06:41] <obk> (Never mind baz for a second)
[19:06:46] <cmr> orshem: I don't know. I think there's a `partition` function somewhere that does that.
[19:07:53] <pauls> obk: the macro looks at each semicolon-separated chunk independently. If it's `foo`, it expands to `foo!(params)`
[19:07:55] <obk> Another way to skin my cat, so to speak - is there an equivalent of `caller()` in Rust? That is, know the file-and-line of the call to a function, from within a function?
[19:08:16] <obk> pauls: Ah! I see. More complex to define, but yes, I get it.
[19:08:33] <pauls> obk: in a macro `line!()` and `file!()` should refer to the outermost invocation.
[19:08:40] <pauls> (afk)
[19:09:24] <obk> Yes, in a macro - but if I could call `rt::caller_file()` and `rt::caller_line()` or some such, I could avoid using macros in many cases.
[19:09:42] <obk> (I need to collect the file and line of an eDSL verb to do proper error messages)
[19:10:21] <obk> So, regardless of the `state` problem, I end up defining a lot of macros mapping foo!(...) to foo(file!(), line!(), ...) - just for that.
[19:11:51] <strcat> Luqman: meh, I wonder why
[19:12:27] <joebobjoe> cmr: Some naysayer I was talking to told me that an OS written in Rust wouldn't be as performing as C...
[19:12:55] <cmr> joebobjoe: They don't know what they are talking about.
[19:13:16] <joebobjoe> cmr: I thought so.
[19:13:35] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:13:41] <obk> Well, Linus had some strong opinions about not using C++ for OS work. I wonder what he thinks of Rust. If you could get some Linux kernel modules written in it... you could move on to converting it all, in time :-)
[19:13:58] <obk> Presumably you wouldn't use GC at all.
[19:13:59] <cmr> obk: https://github.com/tsgates/rust.ko
[19:14:26] <obk> And the Linux powers-that-be are OK with rust-based modules?
[19:14:35] <cmr> In mainline?
[19:14:38] <cmr> Nobody has tried
[19:14:39] <obk> Yes
[19:14:50] <obk> I guess we'll find out at some point...
[19:14:51] <cmr> The linux kernel is written in C
[19:14:57] <cmr> All of the modules are written in C
[19:15:08] <cmr> It'd be ridiculous to use Rust in mainline
[19:15:13] *** Quits: Kauhsa (kauhsa@moz-A78B2D1A.fi) (Ping timeout)
[19:15:15] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[19:15:28] <obk> Now, maybe, but in principle? Why not?
[19:15:38] <obk> Assuming one used the minimal no-GC version
[19:15:39] <joebobjoe> Are there any newer/alternative theories/kinds of OS that are competing/better with/than Linux?
[19:15:47] <pauls> "as fast as C" is not very meaningful.
[19:15:57] *** Joins: Kauhsa (kauhsa@moz-A78B2D1A.fi)
[19:16:01] <strcat> pauls: you can write equivalent code to C in rust, is the point
[19:16:03] <cmr> obk: there's no reason not to, from a technical standpoint.
[19:16:08] <strcat> it just means using unsafe blocks now and then
[19:16:19] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[19:16:19] <obk> joebobjoe: Plenty. You can look up Plan9 ("what UNIX should have been"), and the latest MINIX, for starters.
[19:16:20] <pauls> You can just embed ASM in Rust, just like you can in C.
[19:16:36] <kimundi> And waiting a few years till most compiler bugs are sorted out :P
[19:16:51] <strcat> obk: linux takes a lot of stuff from plan9 and improves on it
[19:16:55] <strcat> for example, see namespaces
[19:17:53] <strcat> and that's where /proc came from
[19:18:16] <obk> strcat: Cheap plastic imitation; Plan9 text pipes, union directories that actually work without jumping through hoops, etc. - but yes, some ideas are filtering into Linux and this is good.
[19:18:45] <strcat> sure, there are things in plan9 not supported as well in linux
[19:18:57] <strcat> but there's much more missing in plan9
[19:19:04] <joebobjoe> Why do pipes use text streams... with the advent of OOP, why is not there a standard for "object" streaming?
[19:19:09] <pauls> If you have low-level control, and arbitrarily-much knowledge, you can write the fastest possible program in assembler, and then abstract out the bits that you know will compile the way you want into the higher-level language to cover your tracks.
[19:19:18] <cmr> joebobjoe: there is on windows, it's called powershell.
[19:19:32] <cmr> joebobjoe: dbus on unix, too.
[19:19:32] <joebobjoe> cmr: One thing Windows has right, lol
[19:19:33] <obk> Anyway, there are the safe-language-everything-is-in-one-address-space OS-es. Would be interesting actually in Rust content, a good fit for the owned and per-task pointers.
[19:20:12] <cmr> though dbus is a bit of a special snowflake..
[19:20:59] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Ping timeout)
[19:21:04] <strcat> dbus is cross-platform ;P
[19:21:22] <joebobjoe> Could you use borrowed closures in OS code?
[19:21:32] <joebobjoe> If you only had static allocation
[19:21:42] <strcat> the defacto standard dbus server/client are horrific, but it's a fine thing if you ignore the implementation
[19:21:43] <orshem> cmr, thanks. i found the partition method but it partition a vector based on a predicate. i'm looking for a way to split a vecot into two mutable slices 
[19:21:57] <orshem> that are safe.
[19:22:14] <strcat> mut_split
[19:22:16] <cmr> joebobjoe: &fn? Those are called stack closures. Yes.
[19:22:41] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[19:22:43] <strcat> rusti: let mut xs = [1, 2, 3, 4]; let (ys, zs) = xs.mut_split(2);
[19:22:46] -rusti- pastebinned 7 lines of output: http://ix.io/855
[19:22:54] * obk will go with local_data for now. Sigh.
[19:23:03] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[19:23:12] <joebobjoe> Do Rust hash tables use unsafe code in their implementation?
[19:23:22] <strcat> no
[19:23:36] <strcat> unless using language features and vectors counts
[19:23:48] <orshem> strcat, great! that's what i was looking for
[19:25:36] <joebobjoe> strcat: Interesting, so hashing something is safe, too?
[19:25:42] <joebobjoe> Er, has a safe implementation
[19:25:48] <strcat> joebobjoe: yes
[19:26:27] *** Quits: decoder (quassel@moz-D7023D7D.own-hero.net) (Ping timeout)
[19:26:28] <strcat> std::trie, extra::treemap are more complex containers without unsafe code
[19:26:53] *** Quits: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Ping timeout)
[19:27:44] <strcat> vectors have to use lots of unsafe code because they're the lowest level feature to allocate dynamically sized blocks of memory
[19:27:46] <joebobjoe> strcat: And that's not going to change?
[19:28:02] <joebobjoe> But vectors are implemented in teh language, right?
[19:28:08] *** Joins: decoder (quassel@moz-D7023D7D.own-hero.net)
[19:28:12] <strcat> joebobjoe: only a small bit of them is
[19:28:12] *** Joins: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[19:28:32] <strcat> push, reserve, capacity, etc. are all library features
[19:28:49] <strcat> and you could move destruction and initialization out of the compiler
[19:28:59] <joebobjoe> Oh really, but I thought push mutated the vector
[19:29:19] <strcat> it does, and it's implemented in std::vec
[19:29:37] <joebobjoe> Interesting
[19:29:45] <strcat> the compiler just has enough code to allocate a vector from an expression and destroy one
[19:30:00] <strcat> as much as possible gets done in the stdlib
[19:30:23] <strcat> allocating is done in the stdlib too
[19:30:30] <strcat> the compiler just generates calls to lang items defined by libstd
[19:30:34] <joebobjoe> Okay, but how are slices of the vector re used if the compiler doesn't offer code to mutate it
[19:30:38] *** Quits: decoder (quassel@moz-D7023D7D.own-hero.net) (Ping timeout)
[19:30:45] <cmr> joebobjoe: what do you mean reused?
[19:30:47] <Amaranth> Hmm, so it seems creating a vec of zeros is harder than I thought
[19:30:52] <joebobjoe> nvm
[19:30:56] <cmr> Amaranth: std::vec::from_elem(length, 0)
[19:30:58] <strcat> joebobjoe: it calls malloc/realloc
[19:31:25] <Amaranth> cmr: Oh, I thought that was another "take this existing vec I have" method, guess I missed the type being plain
[19:31:32] <strcat> let xs = ~[1, 2, 3]; generates a call to std::unstable::global_heap::exchange_malloc
[19:31:51] <joebobjoe> I guess I have to learn C first to understand the internals of Rust
[19:31:55] <strcat> the only code generation by the compiler is to loop/initialize from expressions like that
[19:32:06] <strcat> joebobjoe: not necessarily C
[19:32:35] <strcat> mmap/munmap/mremap are system calls, malloc/free/realloc are thin wrappers around them doing caching
[19:32:52] <strcat> 'thin' (30k lines of code ;p)
[19:32:56] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[19:33:07] *** Quits: Kauhsa (kauhsa@moz-A78B2D1A.fi) (Ping timeout)
[19:33:16] *** Joins: decoder (quassel@moz-D7023D7D.own-hero.net)
[19:33:25] <strcat> you could drop in mmap as a replacement for malloc, it'd just be really slow
[19:33:38] <strcat> and you could write a memory allocator in rust
[19:33:44] <strcat> no inherent dependency on C
[19:33:49] <olsonjeffery> rust: range(0, 4)
[19:33:52] <olsonjeffery> rusti: range(0, 4)
[19:33:53] -rusti- std::iter::Range<int>{state: 0, stop: 4, one: 1}
[19:34:21] <strcat> olsonjeffery: there's the complete family of those now btw
[19:34:24] <cmr> *cough* https://github.com/huonw/rust-malloc
[19:35:38] *** Quits: orshem (orshem@F0A9EA9.588A166C.E3D28531.IP) (Ping timeout)
[19:35:42] <joebobjoe> Why can't we have a type safe OS, lol
[19:36:11] *** Joins: Kauhsa (kauhsa@moz-A78B2D1A.fi)
[19:36:27] <strcat> at some point you need to interact with hardware/firmware
[19:36:37] *** Quits: maik (maik@moz-2DF9637C.dip0.t-ipconnect.de) (Ping timeout)
[19:37:15] *** Joins: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net)
[19:38:06] <joebobjoe> So everyone is happy with the current level of abstraction OSs provide?
[19:38:26] <cmr> What are you trying to get at?
[19:41:03] <olsonjeffery> strcat: where?
[19:41:11] <strcat> olsonjeffery: in std::iter
[19:41:18] <olsonjeffery> i know you've been working on it, but i haven't had much use for it as of yet
[19:41:22] <olsonjeffery> nice, thanks
[19:41:24] <strcat> count (infinite), range, range_inclusive, range_step, range_step_inclusive
[19:41:26] <strcat> is the full set
[19:41:31] <strcat> (no need for any more)
[19:42:03] <strcat> range/range_inclusive are also DoubleEndedIterator, which is why they have to be separate
[19:42:30] <strcat> olsonjeffery: tricky to handle overflow right ;p
[19:42:55] <strcat> rusti: std::iter::range_step(0u8, 250, 80).to_owned_vec()
[19:42:55] -rusti- ~[0u8, 80u8, 160u8, 240u8]
[19:43:09] <olsonjeffery> yeah, i just checked it out. very nice.
[19:44:23] *** Joins: krdln (Mibbit@moz-6F8A8560.dynamic.chello.pl)
[19:44:42] <strcat> and like most iterators you can clone them... so you can cycle them
[19:44:50] <strcat> rusti: range(0, 3).cycle()
[19:44:50] * flaper87 back
[19:44:54] -rusti- pastebinned 1 lines of output: http://ix.io/857
[19:44:55] *** Quits: sinma (sinma@moz-6A11C47C.fbx.proxad.net) (Quit: Konversation terminated!)
[19:45:21] <strcat> rusti: range(0, 3).cycle().take(50).to_owned_vec()
[19:45:24] *** Quits: joebobjoe (Mibbit@1EEF8F2.50A2C647.5A42B74E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:45:29] -rusti- pastebinned 1 lines of output: http://ix.io/858
[19:45:35] <olsonjeffery> strcat: you know what'd be cheeky? a counter that takes a fn that returns what the next `step` should be
[19:45:52] <olsonjeffery> although i guess you'd need the previous two values to roll a fib iterator, huh.
[19:46:30] <cmr> a fiberator needs its own state, yes.
[19:48:14] <engla> rusti: std::iter::Unfold::new((1,1), |t| { let (a, b) = *t; *t = (b, a+b); Some(a) }).take(20).to_owned_vec()
[19:48:15] -rusti- ~[1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610, 987, 1597, 2584, 4181, 6765]
[19:48:27] <engla> the fiberator
[19:48:40] <strcat> should probably just call that unfold as a free function too
[19:49:09] *** Quits: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net) (Client exited)
[19:50:07] <kimundi> yeah
[19:50:12] *** Joins: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net)
[19:51:39] <engla> Unfold could be used a lot for users that are too lazy to define a struct and impl Iterator
[19:51:48] <engla> or dont' need it
[19:53:10] <obk> About http://mibpaste.com/rL9P0B - yes, it compiles (in head as well as before), but at run-time it fails (`borrowed`). So the static borrow checker detects the access is to distinct fields, but the run-time doesn't?
[19:53:32] <strcat> obk: @mut/RcMut use dynamic borrow checking
[19:53:42] <strcat> and it's coarse
[19:53:47] <strcat> it's for the whole box
[19:54:05] *** Quits: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[19:54:11] <obk> I see - is this planned to change, or is this "it"?
[19:54:20] <strcat> obk: it will be removed as a language feature, in all likelihood
[19:54:27] *** Joins: orshem (orshem@F0A9EA9.588A166C.E3D28531.IP)
[19:55:09] <obk> I heard there are plans to do something to @ (we were talking about # at the time - atomically ref-counted pointers that can be shared between tasks)
[19:55:24] *** Joins: snadon (chatzilla@moz-2C07697A.mc.videotron.ca)
[19:55:29] <obk> Is there a descriptions of the plans for @ ?
[19:55:53] <kimundi> the plan is/was/might be to move @ and @mut from special sigils to library types Gc and GcMut
[19:56:20] <strcat> well that's a possibility, but I think it's a pretty sure thing that the dynamic freezing won't be a *language* feature
[19:56:27] <obk> So, basically, like using Arc and RWArc, one would use Gc and GcMut? Or RWGc, or whatever?
[19:56:44] <kimundi> yeah
[19:56:48] *** Joins: _Y_ (Mibbit@moz-C8A5C85C.dynamic.isp.telekom.rs)
[19:56:50] <strcat> obk: just Gc/GcMut to go along with Rc/RcMut
[19:56:55] <strcat> or, just Gc and Rc
[19:57:01] <strcat> with the dynamic borrow checking in a Mut type
[19:57:07] <strcat> Rc<Mut<T>>
[19:57:20] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:57:35] <strcat> (it will definitely be split out if only as an internal implementation detail)
[19:57:39] <kimundi> and if you can borrow from the mutable version, it would allways have runtime borrow checks, no way around that
[19:57:49] <obk> Not very syntax friendly...
[19:57:57] <strcat> obk: it's not idiomatic so it shouldn't be
[19:58:22] <strcat> by-value and by-reference should cover 99% of use cases
[19:58:41] <obk> Well, except for non-linear containers. Such as, say, graphs?
[19:58:42] <strcat> ~ should already be pretty rare, since you don't implement recursive data structures every day
[19:58:46] <kimundi> idiomatic is stack and &. Next ~. If those two are not enough, then you have to decide which of the N library types most closely does what you want.
[19:58:47] <olsonjeffery> behold the fiberator, destroyer of worlds
[19:58:56] * obk has a lot of graphs in his programs
[19:58:59] <strcat> obk: a graph is usually represented as an adjacency list
[19:59:11] <obk> That's pretty bad in my case
[19:59:16] <strcat> or a pair of them, if you need to remove nodes efficiently
[19:59:26] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[19:59:34] <strcat> obk: are they immutable or mutable graphs?
[19:59:53] <obk> Well... constructed incrementally, mutable data in the nodes and the edges
[20:00:06] <obk> Pretty immutable once fully constructed
[20:00:32] <obk> I guess I could look into doing it as adjacency lists, hmmm.
[20:00:41] <obk> Wouldn't be very natural though.
[20:00:51] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[20:00:51] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/Up3pWA
[20:00:51] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[20:00:58] <strcat> obk: it would be provided by a graph library though
[20:01:07] <obk> One day, I suppose...
[20:01:07] <strcat> just like vectors, or binary trees
[20:01:12] *** Joins: zenon (Mibbit@moz-C2B9B64C.hsd1.ca.comcast.net)
[20:01:26] <strcat> rustc already has an internal graph library
[20:01:38] <obk> It does?
[20:02:02] <strcat> it uses a lot of graphs for stuff like borrowck
[20:02:20] <strcat> I don't know if they are acyclic or not
[20:02:39] <obk> Mine are (should be, anyway)
[20:02:41] <strcat> obk: librustc/middle/graph.rs
[20:03:17] <strcat> needs to be updated to use iterators
[20:04:16] <strcat> just meant to be good enough to do what rustc needs internally though
[20:04:56] <obk> Hmmm. Not quite what I need...
[20:05:24] <obk> Anyway, so the idea is that Rust is all about linear types, and anything else is non-idiomatic?
[20:05:49] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[20:05:49] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/IpwDOA
[20:05:49] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[20:05:51] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[20:05:51] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/L6xcYQ
[20:05:51] <ghrust> 13rust/06auto 141da4488 15Alex Crichton: Guarantee that statics have unique names...
[20:05:51] <ghrust> 13rust/06auto 14e85a65f 15bors: auto merge of #9206 : alexcrichton/rust/issue-9188, r=catamorphism...
[20:05:52] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[20:05:54] <obk> It seems strange; if Gc is a library, does this mean that the whole GC is a library? Including the actual, well, collection?
[20:06:10] <strcat> obk: mutable, shared ownership data is non-idiomatic
[20:06:27] <obk> Would I be able to link in different GCs to different tasks? Or a global-across-tasks-GC?
[20:06:33] <strcat> owned mutable/immutable data structures and immutable shared data structures preserve all the static mutability guarantees
[20:06:44] <strcat> obk: it would still be implemented with compiler support
[20:06:46] <obk> If the GC is baked into the run-time, it is hard to make the case it is "just a library"?
[20:07:17] <strcat> moving it out of the language means not having syntax + special cases in the language for it
[20:07:27] <strcat> it doesn't mean it would be more pluggable
[20:07:34] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[20:07:47] <obk> Well, it isn't really moving it "out of the language" - it is only "out of the syntax".
[20:07:52] <strcat> precise GC requires compiler support
[20:07:59] <strcat> so there would just be lang items for the GC
[20:08:24] <strcat> so you could opt-out of libstd and replace whatever portion is defined in libstd
[20:08:31] <strcat> #[no_std] already exists
[20:08:35] <obk> Right - so it is "in the language" in a real sense
[20:08:43] <obk> Sure, no_std is a separate issue though.
[20:08:52] <strcat> it's in the language in the same way as extra::rc
[20:09:08] <obk> My original thread was that Rc should have better syntax :-)
[20:09:14] <strcat> obk: it will
[20:09:16] <strcat> RcMut won't
[20:09:36] <obk> Really? How so? Any tricks Rc can pull to be friendlier?
[20:09:36] <zenon> to pass a mut reference to an i32 via ffi, should I use to_unsafe_ptr?
[20:09:45] *** Quits: orshem (orshem@F0A9EA9.588A166C.E3D28531.IP) (Ping timeout)
[20:09:49] <strcat> obk: we will have a pointer trait in ops.rs
[20:09:51] <strcat> like how you can overload +
[20:10:00] <strcat> #[lang = "pointer"] trait Pointer<T> { fn borrow<'a>(&'a self) -> T; }
[20:10:02] <cmr> https://github.com/cmr/rust-examples
[20:10:05] <strcat> and make *x and &*x work
[20:10:13] <cmr> flaper87: ^
[20:10:22] <obk> Hmmm.
[20:10:23] <cmr> flaper87: feel free to jack those for rust-for-real
[20:10:39] *** Quits: snadon (chatzilla@moz-2C07697A.mc.videotron.ca) (Quit: ChatZilla 0.9.90.1 [Firefox 24.0/20130909203154])
[20:10:39] <strcat> obk: could also have MutablePointer, but it would only work for linear types
[20:10:51] <flaper87> cmr: awesome, will do!!!
[20:10:54] <flaper87> cmr: thanks
[20:10:55] <obk> So, basically, OwnedPointer?
[20:11:11] <strcat> obk: well, MutableOwnedPointer :), you could have an owned but immutable one
[20:11:20] <obk> Right.
[20:11:31] <strcat> anyway no use case for that yet
[20:11:38] *** Quits: Palmik (palmik@moz-11EA685D.pks.muni.cz) (Quit: Lost terminal)
[20:11:42] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Client exited)
[20:11:52] <obk> I guess there would be, once you start writing complex containers...
[20:12:00] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[20:12:08] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Client exited)
[20:13:19] *** Quits: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Client exited)
[20:14:00] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:14:15] <olsonjeffery> every once in a while it occurs to me to allow paren-less method invocation for parameterless methods, because of all of those errors i get about trying to take the value of a method (you should write an anonymous function)
[20:14:33] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[20:14:38] *** Quits: zenon (Mibbit@moz-C2B9B64C.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:14:44] *** Joins: maik (maik@moz-2DF9637C.dip0.t-ipconnect.de)
[20:14:44] <olsonjeffery> but its probably some kind of grammar ambiguity. also: ruby devil magicks.
[20:15:15] *** Joins: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[20:15:40] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[20:16:43] *** Joins: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se)
[20:17:41] *** Joins: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[20:22:09] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:22:09] *** ChanServ sets mode: +o pnkfelix
[20:23:11] *** Quits: maik (maik@moz-2DF9637C.dip0.t-ipconnect.de) (Ping timeout)
[20:23:19] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[20:28:50] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[20:29:33] *** Joins: Ferreus (daniel@moz-BB67AEB2.pools.arcor-ip.net)
[20:29:37] *** Quits: krdln (Mibbit@moz-6F8A8560.dynamic.chello.pl) (Quit: http://www.mibbit.com ajax IRC Client)
[20:30:22] *** Joins: mib_gn3xvx (Mibbit@moz-F881BA1A.lightspeed.sntcca.sbcglobal.net)
[20:32:19] *** Quits: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Client exited)
[20:35:36] *** Joins: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[20:35:44] *** Quits: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP) (Ping timeout)
[20:35:59] *** Joins: tjc (tjc@moz-7378683F.dhcp.mrba.ca.charter.com)
[20:35:59] *** ChanServ sets mode: +o tjc
[20:37:40] *** Quits: tjc (tjc@moz-7378683F.dhcp.mrba.ca.charter.com) (Ping timeout)
[20:37:49] *** Quits: canhtak (jeremy@moz-E9D07AD7.wl.t.ulaval.ca) (Quit: canhtak)
[20:37:51] *** Joins: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net)
[20:37:58] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Connection reset by peer)
[20:37:58] *** Joins: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP)
[20:38:04] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[20:39:21] <olsonjeffery> rusti: struct A; impl A { fn stuff(&self) -> ~[~str] { ~[] } } let f = A; for n in f.stuff().iter() { }
[20:39:38] -rusti- pastebinned 11 lines of output: http://ix.io/85c
[20:39:50] <olsonjeffery> strcat: ^
[20:42:34] *** Quits: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Client exited)
[20:42:37] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: leaving)
[20:42:39] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[20:43:08] *** Joins: tjc (tjc@moz-6015B7B3.dhcp.mrba.ca.charter.com)
[20:43:08] *** ChanServ sets mode: +o tjc
[20:43:11] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[20:43:33] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:44:23] *** Quits: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[20:45:18] *** Quits: mib_gn3xvx (Mibbit@moz-F881BA1A.lightspeed.sntcca.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:45:42] *** Joins: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[20:47:56] *** Joins: canhtak (jeremy@moz-E9D07AD7.wl.t.ulaval.ca)
[20:49:58] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[20:53:01] *** Joins: squiddy (squiddy@moz-42C748FE.adsl.alicedsl.de)
[20:53:12] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[20:53:34] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:53:50] <SingingBoyo> are there examples of rustpkg projects somewhere?
[20:54:12] <SingingBoyo> (or workspaces, I guess)
[20:54:38] <flaper87> SingingBoyo: not a huge project, not even working I gues but I do use rustpkg there: https://github.com/FlaPer87/rust-actors
[20:54:54] <flaper87> SingingBoyo: https://github.com/FlaPer87/rust-actors/blob/master/Makefile#L24
[20:55:21] <flaper87> I was having some issues w/ running tests using rustpkg though
[20:55:33] <flaper87> that part, AFAIK, is still a WIP
[20:56:13] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[20:57:26] *** Quits: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Client exited)
[20:58:43] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[20:59:04] <SingingBoyo> flaper87: well, I can't even get it to build anything
[21:00:39] *** Joins: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[21:00:54] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[21:00:54] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14e85a65f to 1429032cd: 02http://git.io/N3iJvQ
[21:00:54] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[21:00:56] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[21:00:56] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/jBTd3A
[21:00:56] <ghrust> 13rust/06auto 14c678841 15David Creswick: rust test: pass the remaining arguments through...
[21:00:56] <ghrust> 13rust/06auto 1472f62ab 15bors: auto merge of #9213 : dcrewi/rust/rust-test-arguments, r=catamorphism...
[21:00:57] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[21:00:59] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[21:02:43] <tjc> SingingBoyo: there are some examples in src/librustpkg/testsuite
[21:03:03] <tjc> of workspaces, that is; a few projects, like https://github.com/cmr/rustdoc_ng , have been rustpkg-ized
[21:04:08] <lkuper_> acrichto: ping
[21:04:33] *** Quits: SingingBoyo (brandon@DAC9C672.CE76D40F.4F048BDC.IP) (Ping timeout)
[21:05:11] *** Joins: SingingBoyo (brandon@DAC9C672.CE76D40F.4F048BDC.IP)
[21:06:07] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[21:06:15] *** Quits: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se) (Client exited)
[21:06:26] *** Quits: tjc (tjc@moz-6015B7B3.dhcp.mrba.ca.charter.com) (Quit: Places to go, people to annoy)
[21:08:40] *** Joins: miza (miza@moz-908EA8DE.home.otenet.gr)
[21:11:47] *** Quits: aeqwa (aeqwa@moz-FB3A19F6.dsl.tropolys.de) (Ping timeout)
[21:14:17] <Amaranth> I've got a ~HashMap<~ScanCode, bool> and when I try state.insert(IntConvertible::from_int(0), true); I get failed to find an implementation of trait std::to_bytes::IterBytes for scancode::ScanCode
[21:14:32] <Amaranth> ScanCode does implement IntConvertible
[21:14:51] <Amaranth> I use that in other places so I know that's fine
[21:14:55] <kimundi> #[deriving(IterBytes)] on Scancode
[21:15:11] <Amaranth> Why?
[21:15:29] <Amaranth> Also ScanCode is an enum, if that matters
[21:15:35] <kimundi> FOr a type to be used as hashmap key, the hasmap needs to know how to hash it
[21:15:40] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: leaving)
[21:15:45] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[21:15:46] *** Quits: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper_)
[21:15:50] *** Joins: tjc (tjc@moz-B8FA8F0.static.snlo.ca.charter.com)
[21:15:50] *** ChanServ sets mode: +o tjc
[21:15:57] <luisbg> what is the parameter a test function expects? (it used to be no arguments)
[21:15:59] <tjc> SingingBoyo: what errors are you getting with rustpkg?
[21:16:00] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[21:16:04] <kimundi> IterBytes is an trait that implements an interface for iterating over all bytes of a type
[21:16:07] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Input/output error)
[21:16:07] <tjc> luisbg: still no arguments, as far as I knowâ€¦ 
[21:16:24] *** Joins: steveo (Mibbit@moz-7A79E780.cdrr.qwest.net)
[21:16:32] <Amaranth> Alright, that makes sense, I guess I was expecting it to just figure out enums
[21:16:40] <luisbg> tjc, you are right! sorry, it was complaining about an other function
[21:16:41] <_Y_> Hi rusters :)
[21:16:49] <luisbg> I didn't read with enough attention
[21:16:50] <tjc> luisbg: No worries!
[21:16:54] <luisbg> _Y_, hi yourself
[21:16:57] <Amaranth> But it doesn't really figure out anything automatically so I don't know why I expected it here
[21:17:01] <luisbg> kimundi, o/
[21:17:30] <kimundi>  \o
[21:17:30] <_Y_> I have a question about pattern matching, is it possible to pattern match a vector? I haven't seen any examples
[21:17:35] <_Y_> other than tupples
[21:17:38] <SingingBoyo> tjc: task <unnamed> failed at 'assertion failed: os::mkdir_recursive(p, U_RWX)', /home/brandon/Documents/rust-docs/src/librustpkg/util.rs:236
[21:17:51] <SingingBoyo> tjc: followed by 'task <unnamed> failed at 'killed by linked failure', /home/brandon/Documents/rust-docs/src/libstd/rt/kill.rs:627'
[21:17:59] <luisbg> _Y_, I think so, I think there is an example in the Tutorial
[21:18:02] <luisbg> _Y_, one second
[21:18:14] <tjc> SingingBoyo: Do you have a RUST_PATH set in the environment, or not?
[21:18:31] <tjc> I'm wondering if it's trying to create a directory on your behalf someplace that requires root permission (or something)
[21:18:34] *** Quits: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Client exited)
[21:18:34] <luisbg> _Y_, http://static.rust-lang.org/doc/tutorial.html#vectors-and-strings
[21:18:45] <kimundi> rusti: match [1u8, 2, 3, 4] { [a, b .., _] => (a, b) }
[21:18:45] <SingingBoyo> tjc: no RUST_PATH.  tried with sudo, still didn't work
[21:18:46] -rusti- <anon>:7:40: 7:41 error: unexpected token: `,`
[21:18:46] -rusti- <anon>:7          match [1u8, 2, 3, 4] { [a, b .., _] => (a, b) }
[21:18:46] -rusti-                                                  ^
[21:18:46] -rusti- application terminated with error code 101
[21:18:52] <kimundi> rusti: match [1u8, 2, 3, 4] { [a, b ,.. _] => (a, b) }
[21:18:53] -rusti- (1u8, 2u8)
[21:18:54] <luisbg> _Y_, "A vector can be destructured using pattern matching: [...] ""
[21:19:02] <kimundi> rusti: match [1u8, 2, 3, 4] { [a, b ,.. c] => (a, b, c) }
[21:19:07] -rusti- pastebinned 15 lines of output: http://ix.io/85e
[21:19:14] <tjc> SingingBoyo: hmm, can you run the same command with RUST_LOG=rustpkg and gist the output?
[21:19:15] <kimundi> rusti: printf!(match [1u8, 2, 3, 4] { [a, b ,.. c] => (a, b, c) })
[21:19:18] -rusti- pastebinned 23 lines of output: http://ix.io/85f
[21:20:00] <kimundi> rusti: static v: [u8, ..4] = [1,2,3,4]; match v { [a, b ,.. c] => (a, b, c) }
[21:20:01] -rusti- (1u8, 2u8, &[3u8, 4u8])
[21:20:11] <kimundi> rusti: printf!(match [1u8, 2, 3, 4] { [a, b ,.. c, d] => (a, b, c) })
[21:20:14] -rusti- pastebinned 23 lines of output: http://ix.io/85g
[21:20:25] <Amaranth> Well dang
[21:20:26] <kimundi> rusti: printf!(match [1u8, 2, 3, 4] { [a, b ,.. c, d] => (a, b, c, d) })
[21:20:30] -rusti- pastebinned 23 lines of output: http://ix.io/85h
[21:20:40] <Amaranth> #[deriving(IterBytes)] complains it doesn't know the underlying int type for the enum
[21:20:42] <kimundi> well, whatever
[21:20:43] <kimundi> :P
[21:20:56] <Amaranth> But the only way I know to set one is pub enum ScanCode<uint> which leaks to my entire codebase
[21:21:02] <kimundi> Amaranth: hmm? Could you paste the error?
[21:21:22] <Amaranth> error: multiple applicable methods in scope
[21:21:22] <Amaranth> src/generated/scancode.rs:6 #[deriving(IterBytes)]
[21:21:32] <Amaranth> And then it lists all the int types
[21:22:00] *** Joins: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[21:22:07] <kimundi> Need mor context for that. That's either an bug in deriving, or in your code :P
[21:22:11] <SingingBoyo> tjc: seems to be the same, which makes me think I'm doing something wrong
[21:22:19] <Amaranth> I don't know how much more context is possible
[21:22:26] <tjc> SingingBoyo: did you build rust with ./configure --enable-debug?
[21:22:32] <Amaranth> Like I said, I'm putting that on a pub enum ScanCode {} that is a simple C enum
[21:22:46] <kimundi> Amaranth: Your type defnitions, your code, etc
[21:22:54] <Amaranth> Err, that is the type definition
[21:22:55] <kimundi> ah
[21:23:06] <engla> Amaranth: I think you need to type-annotate the literals, all of them. it's a bug
[21:23:08] <SingingBoyo> tjc: don't think so.  need that for RUST_LOG to work?
[21:23:13] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:23:14] <Amaranth> engla: Forget that
[21:23:26] <Amaranth> I'll just not let people do this in sdl2 right now
[21:23:27] <tjc> SingingBoyo: yeah, by default, rustc ignores log macros unless you configure with that option
[21:23:32] <kimundi> Amaranth: You can also just implement IterBytes manually
[21:23:40] <tjc> SingingBoyo: since it would take you a while to rebuild, what was the package you were trying to build (again)? I can try to reproduce it
[21:23:44] <engla> enum Foo { A = 1u, B = 2u } etc.
[21:23:56] <Amaranth> Oh, I'm doing _that_
[21:24:00] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[21:24:14] <Amaranth> Oh wait I'm not anymore
[21:24:31] <SingingBoyo> tjc: it's my own, trying to move it to rustpkg.  which makes me wonder if I've just got directory structure wrong somewhere...
[21:24:42] <SingingBoyo> tjc: give me a couple minutes and I'll update the git repo.
[21:24:52] <SingingBoyo> tjc: github repo*
[21:24:57] <tjc> SingingBoyo: maybe! if I try building it it could at least narrow down what the problem might be :-)
[21:24:57] <tjc> thanks
[21:27:40] *** Quits: miza (miza@moz-908EA8DE.home.otenet.gr) (Input/output error)
[21:27:40] <SingingBoyo> whoa. did chain get removed recently?
[21:27:46] <kimundi> SingingBoyo: Renamed
[21:27:49] <kimundi> SingingBoyo: and_then
[21:27:50] <SingingBoyo> Option.chain, that is
[21:28:12] <SingingBoyo> kimundi: ah okay thanks
[21:28:16] <Amaranth> Luckily this is all generated code so it was easy to annotate every entry in the enum with the type of int it is
[21:28:18] <kimundi> rusti: None::<uint>.and_then(|| Some(45u))
[21:28:19] * SingingBoyo has lots of calls to update
[21:28:20] <Amaranth> And that did in fact solve the problem
[21:28:22] -rusti- pastebinned 5 lines of output: http://ix.io/85i
[21:29:00] <kimundi> rusti: Some(20).and_then(|x| Some(x+45u))
[21:29:01] -rusti- Some(65u)
[21:31:05] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[21:33:02] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[21:33:35] *** Joins: maik (maik@moz-2DF9637C.dip0.t-ipconnect.de)
[21:35:30] *** Joins: Kruppe (user@CAB30FBD.8F96AEA7.2D179A7D.IP)
[21:37:43] <kimundi> Is there a performance difference between Rc and Arc aside from atomic refcounting on clone() ?
[21:38:52] *** Quits: heftig (heftig@moz-A5FDB274.dip0.t-ipconnect.de) (Ping timeout)
[21:38:55] <SingingBoyo> tjc: https://github.com/singingboyo/evict has the workspace.
[21:39:02] <tjc> SingingBoyo: Thanks, I'll try it
[21:39:54] <SingingBoyo> tjc: rustpkg build fsm is the command I've been using that fails
[21:40:15] <SingingBoyo> tjc: running in the root of that repo.
[21:40:20] <tjc> SingingBoyo: Thanks, I'll try that in a few minutes once I have a build again and get back to you :-)
[21:40:33] <SingingBoyo> tjc: great, thanks!
[21:44:54] <tjc> SingingBoyo: Hmm, I get the same error message, so that's good. I'll keep digging
[21:45:57] *** Quits: maik (maik@moz-2DF9637C.dip0.t-ipconnect.de) (Ping timeout)
[21:46:38] <tjc> SingingBoyo: Oh, I know. You have a file in the directory already called "build", but rustpkg wants to create a directory called "build" to put the output in
[21:46:43] <tjc> if I rename that file, it works :-)
[21:46:47] *** Joins: heftig (heftig@moz-3F32DD7A.dip0.t-ipconnect.de)
[21:46:49] <tjc> I should improve the error message, though
[21:47:26] <SingingBoyo> tjc: oh! heh.  my builds go into bin so I wasn't thinking of that
[21:47:32] <SingingBoyo> tjc: thanks!
[21:48:42] <tjc> SingingBoyo: You're welcome! It's a good bug to catch early
[21:49:43] *** Joins: mib_e8evki (Mibbit@moz-9F494B33.fa.protectedgroup.com)
[21:49:50] *** Quits: mib_e8evki (Mibbit@moz-9F494B33.fa.protectedgroup.com) (User has been banned from Mozilla (no spamming here))
[21:50:06] *** Joins: aatch (aatch@moz-B437F499.pocketrent.com)
[21:50:53] <SingingBoyo> tjc: still not working completely though.  'rustpkg build fsm' works, but then 'rustpkg build evict' fails (which is supposed to build the executable)
[21:51:07] <tjc> SingingBoyo: I'll try that now
[21:51:08] <SingingBoyo> tjc: says it failed to install dependency fsm
[21:53:07] <tjc> SingingBoyo: For me it does install fsm on its own, but then it fails with compile errors because int::from_str was removed...
[21:53:13] <tjc> I think my build is probably newer than yours
[21:53:30] <tjc> I just fixed some rustpkg dependency bugs between Thursday and Saturday, so you might need to pull changes
[21:54:17] <SingingBoyo> I started my build last night/this morning just before going to bed (4ecb0a3 2013-09-15) so that would seem odd
[21:54:21] <tjc> hmm
[21:54:26] <tjc> I'll take a peek
[21:54:38] <SingingBoyo> tjc: could be a RUST_PATH issue?
[21:54:48] <SingingBoyo> tjc: given that I don't have RUST_PATH set
[21:54:54] <tjc> SingingBoyo: I got the result I got with no RUST_PATH set
[21:55:28] <tjc> SingingBoyo: for fun, can you try rustpkg --version and paste the result?
[21:55:44] <SingingBoyo> rustpkg 0.8-pre (4ecb0a3 2013-09-15 01:50:50 -0700)
[21:55:48] <SingingBoyo> tjc: ^
[21:56:03] *** Joins: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net)
[21:56:45] *** Quits: Kruppe (user@CAB30FBD.8F96AEA7.2D179A7D.IP) (Client exited)
[21:56:47] <tjc> SingingBoyo: Hmm, that one should work
[21:56:48] * tjc thinks
[21:57:10] <SingingBoyo> tjc: though if int::from_str was removed, this is odd, cause my build scripts build it just fine
[21:57:13] *** Quits: sebcrozet (sebcrozet@moz-D8879CC3.w80-13.abo.wanadoo.fr) (Quit: Gone)
[21:57:26] <tjc> SingingBoyo: that was a commit after than the one you have, so that part makes sense
[21:57:51] <tjc> SingingBoyo: what directory are you in when issuing the `rustpkg build evict` command
[21:57:59] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[21:58:27] <SingingBoyo> tjc: ~/<...>/evict (the root of the repo)
[21:58:37] <tjc> SingingBoyo: Ok, that's as it should be...
[21:58:39] * tjc thinks more
[21:59:05] <cmr> firefox likes me a lot more when I open the weeks' PRs with a half second sleep between them.
[21:59:05] <SingingBoyo> tjc: where does rustpkg try to install things too?
[21:59:08] <SingingBoyo> to*
[21:59:12] <tjc> SingingBoyo: you shouldn't *need* to do this, but try removing evict/.rust/rustpkg_db.json and try the build command again
[21:59:38] <tjc> SingingBoyo: If the current directory is a workspace, it installs to that workspace -- otherwise, to the first workspace in your RUST_PATH, which by default is ./.rust
[22:00:22] <SingingBoyo> tjc: nope, still fails with 'task <unnamed> failed at 'rustpkg failed to install dependency fsm', /home/brandon/Documents/rust-docs/src/libstd/option.rs:351'
[22:01:46] <SingingBoyo> tjc: before failing it prints workcache: discovered input file <...>/fsm/lib.rs is fresh, and also workcache: discovered input binary:<...>/libstd-<...>.so is fresh
[22:02:36] <tjc> SingingBoyo: what are the contents of your ~/.rust directory?
[22:02:37] <tjc> er
[22:02:43] <tjc> sorry, not ~/.rust. evict/.rust
[22:03:17] <SingingBoyo> tjc: it's empty
[22:03:36] <tjc> SingingBoyo: Ok; what about evict/lib/<yourplatform/ ?
[22:04:44] <SingingBoyo> tjc: doesn't even seem to create a lib folder.  evict/build/<platform> has a sub-dir evict which is empty, and a sub-dir fsm which has the fsm library in it
[22:05:21] <tjc> SingingBoyo: Oh, I think I understand now
[22:05:30] <tjc> this is a rustpkg bug if so, but
[22:05:42] <cmr> tjc: Once my current stack of rust work is done, I'd like to help out with rustpkg.
[22:05:45] <tjc> I think because you manually built fsm, but didn't install it, it's considering fsm "fresh" and not installing it
[22:06:03] <tjc> SingingBoyo: So, to confirm/deny that, try rm -rf evict/build - and then just do `rustpkg build evict` and see what happens
[22:06:24] <tjc> cmr: Great! here's what I suggest - 
[22:06:50] <tjc> cmr: https://github.com/mozilla/rust/wiki/Rustpkg-schedule - the bugs listed under the headings "Community adoption I" and "Community adoption II" would be useful ones to work on
[22:07:12] <tjc> cmr: patches for the bugs under "Everything else" would also be very welcome, but are less urgent
[22:07:31] <SingingBoyo> tjc: same problem as before.
[22:07:32] <cmr> tjc: Ok, great
[22:07:36] <tjc> SingingBoyo: hmm...
[22:07:38] * SingingBoyo tries removing rustpkg_db
[22:08:07] <SingingBoyo> tjc: there we go
[22:08:16] <SingingBoyo> tjc: must've cached something
[22:08:47] <tjc> SingingBoyo: great -- so what's the result now?
[22:08:55] <SingingBoyo> tjc: also: my manual build built into evict/bin, not evict/build, though it definitely seems to have been the problem
[22:09:27] <tjc> SingingBoyo: You mean when you did `rustpkg build fsm`, it built into evict/bin?
[22:10:20] *** Quits: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com) (Ping timeout)
[22:10:21] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[22:10:25] <SingingBoyo> tjc: no, when I used my own build script.  rustpkg builds into evict/build, but it also seemed to find libraries in evict/bin, which seems odd to me.
[22:10:41] <tjc> SingingBoyo: btw, needing to remove the build directory is actually because of an existing bug -- https://github.com/mozilla/rust/issues/9112
[22:10:46] <tjc> I should have thought of that sooner
[22:10:52] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[22:10:53] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/jBTd3A
[22:10:53] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[22:12:17] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[22:12:27] <tjc> SingingBoyo: hmm, I can't reproduce that so farâ€¦ if I move the libfsm library into bin/, it rebuilds it and puts the result in lib/x86_64-apple-darwin
[22:12:47] *** Joins: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net)
[22:13:02] *** Quits: steveo (Mibbit@moz-7A79E780.cdrr.qwest.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:13:36] <SingingBoyo> tjc: it's possible the directory structure my build script created had something to do with it
[22:13:49] *** Quits: tclark (ctimothy@moz-1DB1FE6E.hsd1.wa.comcast.net) (Connection reset by peer)
[22:14:31] <tjc> SingingBoyo: Ah, I see you're passing -L./bin to rustc in the build script
[22:14:40] <tjc> I'm still not sure how that would affect a separate run of rustpkg, but that's possible
[22:14:44] *** Joins: Az (chatzilla@moz-CE0EFC1C.cpece700.dsl.brasiltelecom.net.br)
[22:15:16] <SingingBoyo> tjc: it's possible that I had a bin/test directory in there too from my test script
[22:16:44] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Ping timeout)
[22:18:01] *** Joins: Liothen (liothen@moz-1B8DE1FF.spkn.qwest.net)
[22:18:18] <SingingBoyo> tjc: also, is there any way to get rustpkg to install executables?  libfsm seems to install into ./lib during the build, but the executable doesn't get installed to ./bin using 'rustpkg install evict'
[22:18:33] <SingingBoyo> which, if I'm reading the docs right, is what should happen
[22:18:52] *** flaper87 is now known as flaper87|afk
[22:19:32] *** Joins: steveklabnik (steveklabn@D9EAE20B.7EC18AC6.AD23D000.IP)
[22:20:13] <tjc> SingingBoyo: I think that's part of the same bug (#9112) -- see what happens if you delete the cache and build and lib directories again and do `rustpkg install evict`
[22:21:00] <SingingBoyo> tjc: yup, that  worked.
[22:21:08] <tjc> SingingBoyo: Yeah, it's the same bug, then
[22:21:16] <SingingBoyo> tjc: that's one pervasive bug.  anyone working on it?
[22:21:44] <tjc> SingingBoyo: Only me, and I'm working on something related now ( https://github.com/mozilla/rust/issues/7879 )
[22:21:49] <tjc> once I'm done with that, I'll look at this one
[22:24:22] <SingingBoyo> tjc: are they too closely intertwined for me to poke at #9112 while you're working on 7879?
[22:24:52] <tjc> SingingBoyo: I would suggest waiting -- the way dependencies work right now is just wrong. 7879 is because rustpkg is considering a package to be the unit of dependencies, rather than a crate
[22:25:10] <tjc> so IMO, fixing 9112 on top of the wrong model will be wasted work, but I appreciate the offer!
[22:25:24] <kimundi> Hm, I have a simple owned traitobject that contains a RWArc. If I run the executable I get a segfault
[22:25:53] <cmr> kimundi: minimal testcase?
[22:26:42] <dbaupp> rusti: trait Foo { } impl Foo for uint {} extra::arc::RWArc::new(~1u as ~Foo)
[22:26:42] -rusti- <anon>:7:44: 7:66 error: instantiating a type parameter with an incompatible type `~main::Foo:Send`, which does not fulfill `Freeze`
[22:26:43] -rusti- <anon>:7          trait Foo { } impl Foo for uint {} extra::arc::RWArc::new(~1u as ~Foo)
[22:26:43] -rusti-                                                      ^~~~~~~~~~~~~~~~~~~~~~
[22:26:43] -rusti- error: aborting due to previous error
[22:26:43] -rusti- application terminated with error code 101
[22:26:53] <dbaupp> rusti: trait Foo { } impl Foo for uint {} extra::arc::RWArc::new(~1u as ~Foo:Send+Freeze)
[22:26:59] -rusti- pastebinned 1 lines of output: http://ix.io/85l
[22:27:10] *** Joins: patrick (chatzilla@moz-E1A22FDA.res.wpi.net)
[22:27:14] *** patrick is now known as byteitit101
[22:27:18] <dbaupp> drat, it's not that simple
[22:27:57] <kimundi> cmr: Actually, I'm not sure if this is a rust bug. dependenging on how I call the executable I get different results.
[22:28:20] <dbaupp> kimundi: are you using unsafe code at all?
[22:28:28] <kimundi> nope
[22:28:32] <kimundi> let me gist it...
[22:28:49] <dbaupp> is there infinite recursion?
[22:29:59] <kimundi> dbaupp, cmr: https://gist.github.com/Kimundi/6574860
[22:30:00] *** Joins: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com)
[22:30:46] *** Joins: kelvin (kelvin@916CE83F.D2312BC6.DDE5D3F6.IP)
[22:30:53] <kimundi> However, I also get the same error message if I don't use it as a trait object
[22:31:19] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: leaving)
[22:31:21] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[22:31:33] *** Quits: obk (Mibbit@56A7885C.6849BFB2.CB858787.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:31:40] <engla> is that FOR_PS static the problem?
[22:31:55] <byteitit101> hey, I was playing with rust (0.7) and trying to learn it by writing a pure-rust impl sha-2 256 in rust to see how lower-level algos work in rust,
[22:31:57] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Connection reset by peer)
[22:32:03] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[22:32:03] <byteitit101>  but I seem to have been thwarted by poor documetation and confusion. 
[22:32:07] <byteitit101> Is there an easy way to iterate by a multiple? ex: for each 64 u8 elements.
[22:32:25] <kimundi> engla: No idea, I just defined it for the <for Self> workaround :P
[22:32:38] <byteitit101> What about take the first amount of elements?
[22:32:40] <cmr> byteitit101: Do you need to use 0.7? It's really old at this point.
[22:32:51] <cmr> byteitit101: .iter().take(n) for the second
[22:32:54] <byteitit101> cmr: no, It was just the "most recent" thing I saw
[22:33:09] <byteitit101> cmr: what branch of git then? master?
[22:33:17] <cmr> byteitit101: always build from git master if you can. if you're using arch linux, strcat has a nightly repo
[22:33:18] <dbaupp> kimundi: gdb + debug-info says it's crashing on line 35, i.e. the use of FOR_PS
[22:33:23] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[22:33:26] <kimundi> engla: HM! Interesting, replacing the static with `None::<ProtoSpark>` makes it indeed go away...
[22:33:31] <engla> nice
[22:33:33] <byteitit101> cmr: ok, ubuntu though...
[22:33:43] <cmr> byteitit101: there's an ubuntu ppa somewhere, sec
[22:33:54] <strcat> cmr: there's a windowed/chunk iterator too
[22:33:55] <dbaupp> kimundi: file a bug \o/
[22:34:03] <engla> kimundi: https://github.com/mozilla/rust/issues/9056
[22:34:13] <engla> it's similar I think
[22:34:13] <cmr> byteitit101: https://launchpad.net/~hansjorg/+archive/rust
[22:34:21] <dbaupp> kimundi: don't file a bug \o/
[22:34:22] <dbaupp> :P
[22:34:27] <kimundi> haha
[22:34:37] <engla> kimundi: fix a bug! 
[22:34:50] <byteitit101> cmr: thanks!
[22:35:47] <cmr> byteitit101: we have a sha2 implementation in https://github.com/mozilla/rust/blob/master/src/libextra/crypto/sha2.rs if you want to "cheat" and see how it's implemented.
[22:36:21] <kimundi> anyway, that was quick, thanks :)
[22:36:52] <byteitit101> cmr: cool thanks!
[22:37:08] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: leaving)
[22:37:11] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[22:37:24] <dbaupp> kimundi: quick to fix, you mean?
[22:37:25] <dbaupp> :P
[22:37:59] *** Quits: victorporof (victorporo@6C2683EC.42B20A5F.6A4F8DA2.IP) (Quit: victorporof)
[22:38:16] <kimundi> dbaupp: I wouldn't even know where to start looking for the place where I should start looking for fixing this bug :P
[22:39:24] <dbaupp> kimundi: you may've heard of #rust on irc.mozilla.org, apparently there are a quite a few experienced rust hackers there; they can probably help. :P
[22:39:36] *** Quits: tjc (tjc@moz-B8FA8F0.static.snlo.ca.charter.com) (Quit: zzzzzzzzzz)
[22:39:39] <cmr> heh
[22:41:10] <SingingBoyo> whee, evict can use rustpkg now! \o/
[22:41:22] <dbaupp> SingingBoyo: \o/
[22:41:29] <kelvin> hey, so I have a quick question. I'm trying to open a process and redirect its stdin to a file, but I'm not sure how to get the file descriptor in rust. Is there a function somewhere that I'm missing?
[22:41:40] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: leaving)
[22:43:13] <cmr> kelvin: probably not! std::run still isn't fully baked yet.
[22:44:03] <SingingBoyo> kelvin:  I've had to do some digging in std::run and haven't found anything that will do that, so unfortunately I don't think it's possible at the moment.
[22:44:16] <kelvin> cmr: darn, so should I just default to reading the file into a buffer and then feeding it to stdin manually?
[22:44:30] <cmr> kelvin: it looks like all of the methods that would do what you want are private.
[22:44:54] <cmr> kelvin: yeah, probably the best way to do it right now :(
[22:45:36] <kelvin> cmr: haha alright, I figured as much. Thanks for the help! :)
[22:46:30] <dbaupp> kelvin: there's std::libc::open, which is just open(2)
[22:47:04] <kelvin> dbaupp: ooh, that could work. I forgot about libc
[22:47:38] <steveklabnik> if i'm wrapping a c library via ffi, what type maps to char **?
[22:47:38] <acrichto> lkuper: pong
[22:48:14] <steveklabnik> and what about weirdness like volatile?
[22:48:22] *** Quits: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[22:48:34] <cmr> steveklabnik: **libc::c_char
[22:48:39] <steveklabnik> cmr: ty
[22:48:43] <cmr> steveklabnik: no idea about volatile
[22:48:50] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[22:49:58] <steveklabnik> i'll just keep it as a regular int and we'll see what happens ;)
[22:50:24] <acrichto> lkuper: un-pong for a bit actually, will brb in a few hours
[22:50:36] <cmr> Does anyone want a project announced in TWiR? All I have marked down is flaper87|afk's rust-for-real.
[22:51:55] <SingingBoyo> cmr: https://github.com/singingboyo/evict  ?
[22:52:04] <cmr> SingingBoyo: Cool, thanks
[22:53:17] * SingingBoyo should really add comments to the Evict-BT code and make it follow rust naming conventions
[22:54:03] <steveklabnik> cmr: https://github.com/steveklabnik/escape_html is in its VERY VERY INFANCY
[22:54:07] <dbaupp> cmr: you could link to multibuilder but it's kinda an internal tool/wip, not really a show-off project yet
[22:55:18] <cmr> dbaupp: up to you.
[22:55:29] *** Quits: _Y_ (Mibbit@moz-C8A5C85C.dynamic.isp.telekom.rs) (Quit: http://www.mibbit.com ajax IRC Client)
[22:55:31] <cmr> (sorry I didn't get to that yet today :()
[22:56:22] <dbaupp> cmr: doesn't particularly matter; but getting it even just building loads of rustcs would be a useful use of your computer's time :P
[22:57:08] <SingingBoyo> dbaupp, cmr: wait, why are we building multiple rustcs?
[22:57:17] <cmr> SingingBoyo: benchmarking
[22:57:27] <cmr> For isrustfastyet
[22:57:34] <SingingBoyo> cmr: ahh okay
[22:57:48] * SingingBoyo only has a laptop so that would just be absurdly slow.
[22:58:31] <cmr> dbaupp: once we have remote building, I have a lab full of high-end i7 workstations I can run things on at night :)
[22:58:35] <dbaupp> SingingBoyo: so we can compile in parallel, because each rustc is single threaded so having more means more parallelism.
[22:58:50] *** Quits: squiddy (squiddy@moz-42C748FE.adsl.alicedsl.de) (Quit: Leaving)
[22:59:12] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[22:59:37] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[23:00:33] <dbaupp> cmr: yup; that'll be pretty cool, I imagine we'll only need to run it for a week or so to get all of the history possible and then keeping up will be easy
[23:00:45] <dbaupp> SingingBoyo: (i'm joking, btw.)
[23:01:05] *** Quits: Ferreus (daniel@moz-BB67AEB2.pools.arcor-ip.net) (Ping timeout)
[23:01:21] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[23:02:14] <cmr> I didn't make a single typo in twir this week!
[23:02:20] <cmr> At least according to vim...
[23:02:37] <dbaupp> \o/
[23:02:43] <SingingBoyo> dbaupp: couldn't figure out whether it was that, or something involving cross--compiling to multiple platforms and some underground rust distribution network :p
[23:03:46] <dbaupp> SingingBoyo: haha, nah, it's literally just building every single bors merge commit to plot at irfy/mem
[23:03:57] *** Joins: Diamond (dick@moz-9A33D9AB.cm.sunflower.com)
[23:04:11] <cmr> http://cmr.github.io/blog/2013/09/15/this-week-in-rust/
[23:05:12] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[23:05:48] <SingingBoyo> cmr: did flaper87|afk's rust-for-real get left out on purpose?
[23:05:52] <cmr> SingingBoyo: Nope
[23:05:55] <cmr> I just added it back in
[23:06:04] *** Quits: silotis (quassel@moz-4B8C4631.oc.oc.cox.net) (Client exited)
[23:06:35] <dbaupp> cmr: also, https://github.com/mozilla/rust/pull/9182
[23:06:40] <SingingBoyo> cmr: hehe.  looks good, can't wait for 0.8!
[23:06:45] <cmr> dbaupp: is that important?
[23:06:52] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[23:07:03] <cmr> It seemed like a really unimportant 1-line change
[23:07:03] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[23:07:06] <cmr> bjz: (no offense)
[23:07:09] <dbaupp> cmr: no, just it goes with the Clone/DeepClone bounds you mentinoed
[23:07:14] <cmr> oh
[23:07:48] <cmr> Added, thanks
[23:07:56] <dbaupp> cmr: also "A bunch of changes to Option and Result were made.", it might be worth mentioning chain -> and_then, unwrap_or_default -> unwrap_or since I guess these is the most common ones?
[23:08:04] <dbaupp> (mentioning them specifically.)
[23:09:22] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[23:09:35] *** Joins: silotis (quassel@moz-4B8C4631.oc.oc.cox.net)
[23:09:49] <bjz> cmr: np
[23:10:29] <bjz> cmr: doubt it would affect many folks
[23:10:37] *** Quits: a__ (a__@moz-25043B93.nycmny.fios.verizon.net) (Client exited)
[23:11:20] <bjz> Was just an oversight I discoved in my travels through generic land
[23:13:24] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[23:14:17] *** Joins: sammykim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[23:15:11] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[23:15:54] *** Joins: futurehosizons (Mibbit@moz-61717F7A.bitstream.orcon.net.nz)
[23:17:01] *** Joins: xarcus (Mibbit@moz-6C7F0F44.adsl.alicedsl.de)
[23:17:35] *** Quits: xarcus (Mibbit@moz-6C7F0F44.adsl.alicedsl.de) (Quit: http://www.mibbit.com ajax IRC Client)
[23:17:38] <futurehosizons> 4Rust Tutorial 17.3 A minimal example won't compile the library output on Windows Rust 0.7
[23:17:56] <Diamond> Hey guys, what attributes control name mangling options?
[23:18:10] <steveklabnik> okay, so i'm trying to use rustpkg to build a simple library and an example executable that uses it. i have a src/mylib/lib.rs which 'rustpkg build mylib' builds just fine
[23:18:10] <cmr> Diamond: #[no_mangle] and #[export_name="symbol_name"]
[23:18:19] <Diamond> cmr: Thanks
[23:18:20] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[23:18:28] <steveklabnik> but then making a src/example/main.rs and 'rustpkg build example' says it can't find 'mylib'
[23:18:37] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[23:18:57] <steveklabnik> ... is that normal? shouldn't it be able to find the other one, since it's in the right place? or am I misunderstanding the paths here
[23:19:00] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[23:19:17] <steveklabnik> my sample executable just has extern mod mylib;
[23:19:29] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[23:19:42] *** Joins: Ferreus (daniel@moz-BB67AEB2.pools.arcor-ip.net)
[23:19:47] <cmr> steveklabnik: looks like that should work to me
[23:19:55] <steveklabnik> bummer. :/
[23:20:04] <steveklabnik> at least i know i'm not being excedingly stupid
[23:20:10] <steveklabnik> :)
[23:20:12] <cmr> steveklabnik: tjc isn't around, he's probably the only one who knows why or how to fix it :p
[23:20:37] <steveklabnik> yeah, it's unfortunate that 'failed to install dependency' is the only error message right now. hmmm
[23:21:02] <SingingBoyo> steveklabnik: rustpkg was acting up on me earlier too.  try 'rm -rf build lib bin rustpkg_db.json' and then 'rustpkg build example'
[23:21:38] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[23:22:00] <steveklabnik> SingingBoyo: nope :/
[23:22:01] <steveklabnik> bummer
[23:22:16] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[23:22:35] <steveklabnik> oh wait
[23:22:36] <SingingBoyo> steveklabnik: hmm.  so you've got src/mylib/lib.rs and src/example/main.rs ?
[23:22:47] <steveklabnik> it's not rustpkg_db.json, i'ts .rust/rustpkg_db.json
[23:23:19] <SingingBoyo> steveklabnik: huh.  guess rustpkg doesn't like me, it put mine in rustpkg_db.json.  but yeah, that one
[23:23:30] <steveklabnik> same error :/
[23:23:44] <steveklabnik> yes, i have those two files
[23:23:49] <cmr> dbaupp: multibuilder is failing with "no such file or directory", and gdb isn't being useful. any idea what I need to have, before I insert printlns everywhere?
[23:23:51] *** Joins: Ralith (ralith@moz-A7071297.customer.broadstripe.net)
[23:24:01] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[23:24:21] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[23:25:16] <dbaupp> cmr: erm, do you have already_built.txt?
[23:25:30] <dbaupp> and config.json
[23:25:44] <dbaupp> cmr: (sorry about the wip-ness.)
[23:25:46] <SingingBoyo> steveklabnik: have you set your RUST_PATH to something?  mine's empty and my (larger) project works with that.  So unless it's a side effect of small single-file projects, that's my only thought.
[23:25:57] <steveklabnik> my RUST_PATH is empty
[23:26:04] <steveklabnik> :/
[23:26:21] <cmr> dbaupp: yup
[23:26:41] *** Quits: Ralith (ralith@moz-A7071297.customer.broadstripe.net) (Ping timeout)
[23:26:55] <mark_edward> bjz: ping
[23:27:00] <SingingBoyo> steveklabnik: :/ well then I'm at a loss.
[23:27:03] <dbaupp> cmr: hm, I don't think it opens any other files
[23:27:08] <bjz> mark_edward: yoho
[23:27:24] <steveklabnik> i have a build/mylib/mylib-ljweflhwelf-0.0.1.so too
[23:27:28] <dbaupp> cmr: are they in the directory which you're running it in?/have you specified the path with -a/-c?
[23:27:37] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[23:27:52] <steveklabnik> build/mylib/main.rs has 'extern mod mylib;' and a main that prints hello world
[23:27:53] <steveklabnik> darn :(
[23:28:12] <mark_edward> bjz: did you see the issue i made on your openAL port?
[23:28:23] <steveklabnik> i think i'm on the verge of something cool, if i can just get this to work...
[23:28:28] <cmr> Hm, well, it's dying on line let already_built_file = file::open(&already_built_path, Append, ReadWrite);
[23:28:52] *** Quits: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net) (Quit: echristo)
[23:29:07] <cmr> dbaupp: when specifying -a manually it works..
[23:29:16] <SingingBoyo> steveklabnik: did you run 'rustpkg build mylib' before 'rustpkg build example' ?  If you do that it seems to break something.  Don't think rustpkg does dependency version checking very well...
[23:29:30] <steveklabnik> i did, and rustpkg build mylib worked just fine
[23:29:31] <dbaupp> cmr: hm wait, the default is "already-built.txt"
[23:29:36] <cmr> Ah!
[23:29:47] <cmr> Here we go indeed
[23:29:47] * dbaupp isn't good at being consistent with - and _
[23:29:50] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[23:29:56] <bjz> mark_edward: nice! sorry it got so out of date
[23:30:05] *** Joins: Ralith (ralith@moz-A7071297.customer.broadstripe.net)
[23:30:34] <steveklabnik> oh strange
[23:30:35] <steveklabnik> that worked
[23:30:37] <steveklabnik> i think...
[23:30:49] <steveklabnik> awesome!
[23:30:50] <steveklabnik> it did
[23:30:57] <steveklabnik> thanks. that is a strange bug. i'll try to investigate
[23:31:07] <steveklabnik> got to run, but preview: i think i figured out how to embed ruby in rust
[23:31:10] *** Quits: steveklabnik (steveklabn@D9EAE20B.7EC18AC6.AD23D000.IP) (Quit: bai)
[23:31:32] <dbaupp> :( I was about to link https://github.com/mozilla/rust/issues/7879 to steve
[23:31:50] <SingingBoyo> steveklabnik: there's #9112 which covers it, but work on that is semi-blocked by #7879 which tjc is working on.
[23:32:01] <SingingBoyo> dbaupp: well, you tried!
[23:32:13] *** Joins: dandy (Dandy@moz-84CC8377.hsd1.co.comcast.net)
[23:32:48] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[23:32:52] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[23:33:10] <cmr> dbaupp: well, it's doing its thing
[23:33:21] <futurehosizons> 4what does a crate library output file look like on Windows is it still a lib*.so?
[23:33:27] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[23:34:01] <bjz> futurehosizons: why are you typing in red? :/
[23:35:45] <futurehosizons> bjz: only my second time on IRC
[23:36:45] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[23:37:20] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[23:37:28] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[23:38:14] *** Joins: mark_edward_ (quassel@moz-97E995A.hsd1.in.comcast.net)
[23:38:29] *** Joins: tjc (tjc@moz-879D556A.utilitytelephone.net)
[23:38:29] *** ChanServ sets mode: +o tjc
[23:39:13] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[23:39:48] <bjz> futurehosizons: np!
[23:39:56] <bjz> futurehosizons: it's not red now :)
[23:40:01] <cmr> futurehosizons: no, it's just cratename.dll
[23:40:04] <bjz> futurehosizons: and welcome!
[23:40:07] <cmr> Or, rather, cratename-hash.dll
[23:40:07] *** Quits: Az (chatzilla@moz-CE0EFC1C.cpece700.dsl.brasiltelecom.net.br) (Quit: ChatZilla 0.9.87 [Iceape 2.7.12/20130119143918])
[23:41:27] <futurehosizons> cmr: thanks. I don't know why examples copied from the Rust tutorial aren't generating any crate output.
[23:42:17] *** Quits: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Ping timeout)
[23:43:08] *** Joins: maik (maik@moz-2DF9637C.dip0.t-ipconnect.de)
[23:43:14] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[23:43:23] *** Joins: xales (xales@moz-7DEA692E.forevernothing.com)
[23:43:54] *** Quits: futurehosizons (Mibbit@moz-61717F7A.bitstream.orcon.net.nz) (Quit: http://www.mibbit.com ajax IRC Client)
[23:44:02] *** Quits: JesseH (JesseH@moz-2E766C3E.mc.at.cox.net) (Quit: github.com/jessehorne)
[23:45:27] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:45:50] <maik> what was the name of the lib that helps you to make a wrapper for c?
[23:46:09] <cmr> maik: rust-bindgen?
[23:46:15] <maik> ah bindgen
[23:46:21] <maik> cmr, yeah thanks :)
[23:46:30] *** Joins: miza (miza@moz-908EA8DE.home.otenet.gr)
[23:46:34] *** Quits: SingingBoyo (brandon@DAC9C672.CE76D40F.4F048BDC.IP) (Ping timeout)
[23:47:07] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[23:47:54] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[23:48:27] <dbaupp> cmr: not crashed yet? :)
[23:48:35] <cmr> dbaupp: nope
[23:48:37] *** Joins: ChrisMorgan (ChrisMorga@moz-6AC741CA.static.tpgi.com.au)
[23:49:13] * dbaupp is always surprised when his code seems to work
[23:49:23] *** Quits: mark_edward_ (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[23:50:35] * ChrisMorgan finds himself simply expecting Rust code to work if it compiles, a little more than with Python
[23:51:25] <dbaupp> ChrisMorgan: <3 strong static typing
[23:51:45] <mcpherrin> I'd hope more than python, since the barrier to compilation is significantly higher
[23:52:02] <mcpherrin> I'd expect C code to work if it compiles more than python...
[23:52:07] <cmr> I wouldn't
[23:52:14] <cmr> Having extensive experience with both :p
[23:52:27] <mcpherrin> I'm also a professional C developer :P
[23:54:29] <tiffany> my rust code usually works the first time yeah
[23:54:41] <mcpherrin> I suppose it depends on what you mean by "compile" with python too
[23:54:57] <kimundi> Hm, who wrote/has knowledge of std::unstable::dynamic_lib ?
[23:55:14] <cmr> kimundi: sstewartgallus, or steven_is_false
[23:55:20] <cmr> I have used it though
[23:55:37] *** Joins: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu)
[23:55:55] <kimundi> I wonder about this "needs to have 'self bound, not yet possible" business
[23:56:20] <kimundi> Why doesn't it just return Result<Option<&'self T>, > ?
[23:58:00] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[23:58:25] *** Quits: nkoep (nik@moz-E2FF5152.pool.mediaways.net) (Client exited)
[23:58:46] *** Quits: Ferreus (daniel@moz-BB67AEB2.pools.arcor-ip.net) (Quit: WeeChat 0.4.1)
