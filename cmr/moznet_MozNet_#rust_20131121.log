[00:02:52] *** Quits: KindOne (KindOne@moz-13E4294E.dynamic.ip.windstream.net) (Ping timeout)
[00:03:21] *** Joins: fabrice (fabrice@moz-6B7B431.hsd1.ca.comcast.net)
[00:03:34] *** Quits: nomadic (nomadic@moz-E01D5C49.hsd1.ga.comcast.net) (Quit: Leaving)
[00:03:54] *** Quits: fabrice (fabrice@moz-6B7B431.hsd1.ca.comcast.net) (Max SendQ exceeded)
[00:04:26] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[00:04:27] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Connection reset by peer)
[00:04:37] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[00:04:51] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Quit: Leaving...)
[00:05:06] *** Quits: Jesse (jruderman@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: Jesse)
[00:05:39] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Ping timeout)
[00:06:11] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[00:06:24] *** Joins: KindOne (KindOne@moz-13E4294E.dynamic.ip.windstream.net)
[00:07:05] *** Joins: brson (brson@moz-C07D5168.p2p.sfo1.mozilla.com)
[00:07:05] *** ChanServ sets mode: +ao brson brson
[00:07:13] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:07:20] <brson> is there any way to find all rust repos on github?
[00:08:40] <cmr> brson: there used to be github.com/languages/rust, but that doesn't work anymore for a fulllist
[00:09:02] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:09:42] <dbaupp> https://github.com/trending?l=rust&since=monthly does something
[00:10:25] <cmr> Almost the same as daily ;p
[00:11:15] <dbaupp> https://github.com/search?l=Rust&q=extension%3A.rs&ref=advsearch&type=Repositories
[00:11:17] * dbaupp shrugs
[00:11:21] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[00:11:39] <bstrie> brson: is there a specific reason that you wanted a spreadsheet of all /r/rust history? cuz I could use my newly-acquired beautifulsoup skills to whip up such a thing
[00:11:40] *** Quits: jvshahid (jvshahid@moz-53774307.nycm.ny.megapath.net) (Ping timeout)
[00:11:54] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:11:55] *** Joins: nkoep (nik@moz-6E0E6DBF.pool.mediaways.net)
[00:12:03] <dbaupp> bstrie: you know there's a json api, right? no need to html scrap :P
[00:12:15] <bstrie> I did not know this!
[00:12:25] *** Joins: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP)
[00:12:30] <bstrie> I figured there was some sorta api, but I was just gonna scrape the sites that use it :P
[00:12:31] <dbaupp> bstrie: http://www.reddit.com/r/rust/new.json
[00:13:01] *** Quits: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP) (Max SendQ exceeded)
[00:13:24] *** Joins: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP)
[00:13:56] *** Quits: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP) (Input/output error)
[00:14:42] *** Joins: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP)
[00:14:47] *** Quits: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP) (Input/output error)
[00:15:27] <brson> bstrie: i've already used the api to grab all the r/rust history
[00:15:31] <brson> what's beautifulsoup?
[00:15:46] <benh> robust html scraper/parser
[00:15:48] <cmr> robust python html 'parser"
[00:15:51] <cmr> benh: hah!
[00:15:54] <cmr> we used the same word
[00:16:07] <cmr> It handles very non-html html pages
[00:16:14] <brson> dbaupp: thanks, that query looks promising
[00:16:23] <benh> cmr: it's only two letters from rust, so it's only a few associations away when we're in this channel ;)
[00:16:24] *** Joins: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP)
[00:16:26] <cmr> brson: what are you putting together? sounds fun!
[00:17:08] *** Quits: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP) (Max SendQ exceeded)
[00:17:39] *** jorendorff is now known as jorendorff_away
[00:18:01] <brson> cmr: creating some graphs about community growth. i've got rust's commit history, r/rust's history, a comparison to other irc channels, going to try to do something with external rust repos
[00:18:10] *** jorendorff_away is now known as jorendorff
[00:18:14] <brson> looking for other ideas
[00:18:15] <bstrie> sounds cool
[00:18:23] <bstrie> brson: subscription to the mailing list
[00:18:33] <cmr> mm
[00:18:37] <brson> i have mailing list messages per month
[00:18:45] <tjc> brson: retweets and favs of @rustlang tweets :-D
[00:18:47] <brson> i don't have data on subscriptions per
[00:18:53] <brson> tjc: do you know how to get that data?
[00:18:56] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[00:18:58] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:19:07] <tjc> brson: well, favstar.fm tracks it, and I assume there's an API for it but I haven't tried
[00:19:17] <tjc> or maybe just the Twitter API
[00:19:27] *** jorendorff is now known as jorendorff_away
[00:19:37] <bstrie> brson: I can give you the uniques and pageviews of the subreddit over the past year
[00:19:46] <brson> bstrie: nice!
[00:19:48] <brson> i'll take it
[00:19:50] <tjc> yeah, rust-lang.org server statistics too
[00:19:52] <dbaupp> rust-lang.org page-views?
[00:20:00] <dbaupp> (especially the docs, I guess.)
[00:20:03] <tjc> yeah
[00:20:06] <brson> i don't actually know where that data is
[00:20:11] *** Joins: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP)
[00:20:12] <brson> i think we have analytics on
[00:20:16] <tjc> it would be interesting to count not just Rust downloads, but also what pages people go to and how that changed over time
[00:20:43] *** Quits: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP) (Max SendQ exceeded)
[00:20:45] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:20:58] *** Quits: smarter (smarter@moz-9C03B7C7.cust.bluewin.ch) (Ping timeout)
[00:21:05] <cmr> brson: I can give you the TWiR analytics, though it's only since ~0.6
[00:21:11] <tjc> statistics about issue reporting would be interesting too... I assume there's a github API for that
[00:21:21] *** Joins: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP)
[00:21:21] *** Quits: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP) (Input/output error)
[00:21:23] <tjc> e.g. the number of new people reporting issues per month
[00:21:42] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[00:22:00] <bstrie> brson: http://www.reddit.com/r/rust/about/traffic/
[00:22:16] *** Joins: smarter (smarter@moz-9C03B7C7.cust.bluewin.ch)
[00:22:21] <cmr> I doubt the github api does it, but it wouldn't behard to make graphs with the raw data frmo the API
[00:22:35] *** Joins: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP)
[00:23:09] *** Quits: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP) (Max SendQ exceeded)
[00:23:13] <brson> bstrie: awesome, thanks
[00:23:30] *** Joins: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP)
[00:23:52] <brson> i don't think i can get the issue statistics together in the next two hours
[00:24:04] *** Quits: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP) (Max SendQ exceeded)
[00:24:06] <cmr> I'll give it a spin
[00:24:53] *** Joins: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP)
[00:24:53] *** Quits: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP) (Input/output error)
[00:25:23] <brson> cmr: thanks :)
[00:25:43] *** Joins: Jesse (jruderman@moz-C07D5168.p2p.sfo1.mozilla.com)
[00:26:43] *** Joins: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP)
[00:26:43] *** Quits: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP) (Input/output error)
[00:27:05] *** Joins: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP)
[00:27:05] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[00:27:09] *** Quits: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP) (Input/output error)
[00:28:26] *** Joins: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP)
[00:29:00] *** Quits: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP) (Max SendQ exceeded)
[00:29:15] <bstrie> brson: those stats pages don't track the subscription rate of the subreddit, and I'm not sure if subscriptions actually make pageviews go down since it makes the stories show up in your main reddit feed
[00:29:47] <bstrie> brson: but it took 30 months for us to get our first 1,000 subscribers, and 6 months to get the next thousand
[00:30:54] <brson> ooh, we only need 11 more to hit 2000
[00:31:35] * cmr creates 11 dummy accounts
[00:31:38] <bstrie> though the subreddit only started taking off once I became a mod of it and started promoting it, a little over a year ago
[00:31:39] *** Joins: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP)
[00:31:51] * ssbr subscribes
[00:32:09] *** Quits: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP) (Input/output error)
[00:32:14] *** Joins: Sgeo (quassel@moz-D0F30617.dyn.optonline.net)
[00:32:25] <ssbr> You only need 10 now ;)
[00:32:53] <tjc> bstrie: who was the mod before?
[00:33:01] <cmr> And who is azth!?
[00:33:03] *** Joins: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP)
[00:33:15] <brson> anybody know how to use a spreadsheet? i have a bunch of dates (https://gist.github.com/brson/7573903) and need to count the number of each
[00:33:34] <bstrie> cmr: the person who first registered the subreddit
[00:33:35] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[00:33:35] *** Quits: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP) (Max SendQ exceeded)
[00:33:43] <bstrie> cmr: though I think they're really more of a scala person :P
[00:33:47] <bstrie> azth's not around much
[00:34:00] *** Joins: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP)
[00:34:00] *** Quits: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP) (Input/output error)
[00:34:04] <dbaupp> brson: `sort < dates.csv | uniq -c` ?
[00:34:20] <bstrie> tjc: before there was basically just a single person who wasn't really doing anything at all with the sub
[00:34:38] <bstrie> they're still the sub owner, so my position is theoretically tenuous
[00:34:39] <tjc> bstrie: ah ok
[00:34:56] <dbaupp> brson: http://ix.io/95M is the output of that
[00:34:58] <brson> dbaupp: lol, that works. screw spreadsheets
[00:35:04] <bstrie> haha
[00:37:09] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:37:23] *** nrc|lunch is now known as nrc
[00:37:28] <prudhvi> Hi, please forgive my ignorance. Is there a better reason to name (let x, let mut x) in rust as opposed to (val, var) in scala. The later looks much simpler and is easy on the eye.
[00:38:29] <tjc> prudhvi: unfortunately, it's a conversation that has been had many times and won't be reopened :-)
[00:38:48] *** jorendorff_away is now known as jorendorff
[00:38:59] <sam113101> I read "let x = 5;" as "let x be 5", is that weird?
[00:39:17] <tjc> prudhvi: https://github.com/mozilla/rust/issues/2643 if you're curious how the old conversations went
[00:39:23] <tjc> sam113101: No, that's not weird... it's what `let` means
[00:39:45] <dbaupp> prudhvi: also, we can now write `let (mut x, y) = (1, 2);`, i.e. the construct is `let <pattern> = <value>;` and <pattern> optionally includes the `mut`, *not* the `let`.
[00:40:24] <prudhvi> tjc: Thanks.
[00:41:39] <kimundi> rusti: let () = ();
[00:41:40] -rusti- ()
[00:41:46] <kimundi> ha!
[00:41:57] <benh> rusti: let mut () = ();
[00:41:58] -rusti- pastebinned 6 lines of output: http://sprunge.us/NdTG
[00:42:00] *** Quits: josh (josh@501D6691.D6F172E7.2A2F4638.IP) (Ping timeout)
[00:42:10] <benh> not what i expected ;)
[00:42:13] <kimundi> Didn'T expect that to work, despite it being a irrefutable pattern :P
[00:43:07] <dbaupp> the pattern with mut is `ref? mut? <ident>`, i.e. it needs an ident afterwards to be valid.
[00:43:37] <kimundi> rusti: let mut ref mut x = 5; x
[00:43:38] -rusti- pastebinned 16 lines of output: http://sprunge.us/DHFV
[00:43:40] <benh> dbaupp: but the error was about multiple mutable bindings :)
[00:44:04] <Luqman> kimundi: that's no longer possible in git ;P
[00:44:11] <kimundi> rusti: let mut ref mut x = 5; *x = 10; *x
[00:44:11] <benh> i suppose it's correct if multiple means n != 1
[00:44:11] -rusti- <anon>:9:17: 9:26 warning: variable does not need to be mutable [-W unused-mut (default)]
[00:44:12] -rusti- <anon>:9          let mut ref mut x = 5; *x = 10; *x
[00:44:12] -rusti-                           ^~~~~~~~~
[00:44:12] -rusti- 10
[00:44:22] <kimundi> Luqman: What of it?
[00:44:47] *** Joins: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net)
[00:44:50] <dbaupp> benh: yes, as in, it doesn't get parsed as that ident pattern, so it falls back to the obsolete syntax one
[00:44:58] <Luqman> you can't have `mut ref mut` or `mut ref`
[00:45:11] <kimundi> Luqman: ... Why?
[00:45:17] <dbaupp> benh: (and once that gets removed, it will just complain about expected ident)
[00:45:39] <kimundi> Luqman: I mean, it wouldn'T wonder me for it to break, that surely that's legal
[00:45:43] *** Quits: jstevans (Instantbir@moz-5C73B2B1.bootp.virginia.edu) (Ping timeout)
[00:45:49] <dbaupp> kimundi: hasn't been programmed to be legal :P
[00:46:40] <Luqman> because mut was removed from let and made part of the pattern, so it's just `ref? mut? ident`
[00:46:40] <kimundi> So, it's bug?, not intentional
[00:47:33] <kimundi> Man, I really need to go to bed, I make even more typos than usual. :P
[00:47:50] <dbaupp> we could adjust the pattern to be `mut? (ref mut?)? <ident>`, but is the complications worth it? :P
[00:48:07] <dbaupp> (complications == making things more complex)
[00:48:37] <kimundi> I'd view it as more complex if arbitrary combinations of patterns don'T work together :P
[00:48:58] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:49:26] <Luqman> i'm not sure if allowing `mut ref mut?` is really that useful
[00:49:26] <kimundi> I guess whether it should be legal depends on how to view the ref pattern.
[00:49:36] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[00:50:10] <kimundi> If ref means "construct a layer of &", then it makes sense to allow to put that into a mutable slot or not.
[00:50:25] *** Joins: jstevans (Instantbir@moz-5C73B2B1.bootp.virginia.edu)
[00:50:42] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[00:51:17] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Ping timeout)
[00:52:24] <kimundi> Possible use case: initializing a mutable variable with a reference to something, and then keep changing that reference in the code afterwards
[00:52:26] <cmr> brson: slurping down issues now. github's api is quite slow though, going to take a while
[00:53:33] *** Joins: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP)
[00:53:33] *** Quits: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP) (Input/output error)
[00:55:41] <dbaupp> kimundi: you should fix it :)
[01:00:23] *** Joins: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP)
[01:00:56] *** Quits: fabrice (fabrice@81A9E994.81F5FE16.DD630FEE.IP) (Max SendQ exceeded)
[01:03:59] *** Quits: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se) (Ping timeout)
[01:05:12] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[01:06:23] *** Joins: adu (ajr@4275DED1.1C3331CA.DA1C73DD.IP)
[01:06:32] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:06:33] *** Quits: nkoep (nik@moz-6E0E6DBF.pool.mediaways.net) (Client exited)
[01:06:55] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[01:07:11] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[01:10:52] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[01:12:40] *** Joins: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se)
[01:18:16] *** Joins: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net)
[01:18:27] *** Joins: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca)
[01:19:52] *** Joins: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net)
[01:20:23] *** Joins: azita (Azita@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[01:21:42] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[01:24:01] * benh never quite realized that "\xa0".len() == 2
[01:24:07] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[01:24:40] *** Parts: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) ()
[01:25:07] <Luqman> benh: there's also char_len() but it's O(n)
[01:25:57] <klutzy> "\xa0" confused me when I got mojibake string
[01:27:20] *** jorendorff is now known as jorendorff_away
[01:27:53] <benh> Luqman: I meant that \x didn't just insert a single byte with whatever value
[01:28:09] <benh> which of course makes sense!
[01:28:33] <klutzy> when I got "\xb4\xeb" from rustrt, I initially thought it is malformed str containing [0xb4, 0xeb]
[01:29:07] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[01:29:39] <klutzy> it took time to realize windows just returned such malformed string :p
[01:30:51] *** jorendorff_away is now known as jorendorff
[01:31:21] *** jorendorff is now known as jorendorff_away
[01:32:55] *** Quits: jstevans (Instantbir@moz-5C73B2B1.bootp.virginia.edu) (Ping timeout)
[01:33:40] *** jorendorff_away is now known as jorendorff
[01:34:22] *** jorendorff is now known as jorendorff_away
[01:34:42] *** Joins: fournm (Aria@moz-ABB60BA0.austin.res.rr.com)
[01:34:46] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[01:35:16] <brson> only 7 more subscribers needed on r/rust to hit 2000
[01:38:09] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[01:42:10] *** Quits: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo_)
[01:43:54] <bstrie> brson: can also take a page out of go's book and cite the google trends chart: http://www.google.com/trends/explore?q=rust+language#q=rust%20language&cmpt=q
[01:46:22] *** Joins: tjc (tjc@9DBA1D53.FD5C31A1.284344F5.IP)
[01:46:22] *** ChanServ sets mode: +o tjc
[01:51:08] *** Quits: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Quit: Leaving)
[01:51:46] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:52:06] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:53:48] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:55:06] *** Quits: tjc (tjc@9DBA1D53.FD5C31A1.284344F5.IP) (Ping timeout)
[01:55:25] <brson> bstrie: good call
[01:56:03] *** kimundi is now known as zz_kimundi
[01:58:05] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[01:58:45] *** Joins: tjc (tjc@9DBA1D53.FD5C31A1.284344F5.IP)
[01:58:46] *** ChanServ sets mode: +o tjc
[02:01:28] *** Quits: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net) (Quit: jeffdb_)
[02:03:14] *** Quits: Jesse (jruderman@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: Jesse)
[02:04:32] *** Quits: brson (brson@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: leaving)
[02:04:35] *** Joins: brson (brson@moz-C07D5168.p2p.sfo1.mozilla.com)
[02:04:35] *** ChanServ sets mode: +ao brson brson
[02:04:51] *** Quits: rofrol (rofrol@moz-8C55345C.static.ptr.magnet.ie) (Quit: WeeChat 0.4.2)
[02:05:57] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[02:07:41] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[02:07:41] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[02:07:44] *** Quits: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net) (Quit: carllerche)
[02:07:47] *** Joins: Jesse (jruderman@moz-C07D5168.p2p.sfo1.mozilla.com)
[02:08:46] <joelteon> what happened in april
[02:08:55] *** Joins: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net)
[02:09:05] *** Quits: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net) (Quit: jeffdb_)
[02:10:31] <dbaupp> 0.7 was released?
[02:10:46] *** Quits: Jesse (jruderman@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: Jesse)
[02:13:02] *** Quits: brson (brson@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[02:13:40] <tjc> I was going to guess the death of Margaret Thatcher
[02:14:39] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[02:14:56] *** Quits: azita (Azita@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: azita)
[02:16:55] *** Joins: azita (Azita@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[02:17:21] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[02:19:01] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[02:19:01] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[02:20:16] *** Quits: jdm (jdm@moz-ED0C7AC7.hinet-ip.hinet.net) (Quit: Lost terminal)
[02:21:12] <bstrie> tjc: we conjecture, via the application of chaos theory, that margaret thatcher's death is responsible for the spike in google searches for "rust language" in april 2013
[02:22:23] <tjc> bstrie: seems legit
[02:23:03] <tjc> I'm wondering if I should get off this train and take the bus to SF, arriving at 7:45 (maybe)...
[02:23:08] <tjc> or just turn around and go home :-(
[02:23:46] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[02:23:57] <Sharp> Is it still raining?
[02:24:16] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[02:24:35] <tjc> a little bit
[02:24:39] <tjc> I don't care about that, though
[02:25:20] <cmr> hm, did that start already?
[02:26:04] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:28:07] <tjc> it starts in half an hour
[02:28:14] <cmr> oh good
[02:28:18] <tjc> I have the choice of staying on the train and getting there in, maybe, 3.5 hours...
[02:28:23] <tjc> or getting off the train and *maybe* getting there an hour late
[02:28:25] <tjc> or just going home :P
[02:28:36] *** Joins: brson (brson@moz-C07D5168.p2p.sfo1.mozilla.com)
[02:28:36] *** ChanServ sets mode: +ao brson brson
[02:29:18] *** Quits: comex (comex@moz-80880E12.compute-1.amazonaws.com) (Ping timeout)
[02:33:00] *** Joins: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net)
[02:34:31] *** Joins: pepper_chico (pepper_chi@41ABFFD4.95F7EC9A.86AA4479.IP)
[02:35:00] *** Joins: erickt1 (Adium@moz-89F6D64E.public.wayport.net)
[02:35:24] *** Joins: erickt2 (Adium@moz-89F6D64E.public.wayport.net)
[02:35:24] *** Quits: erickt1 (Adium@moz-89F6D64E.public.wayport.net) (Connection reset by peer)
[02:38:08] *** Joins: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net)
[02:39:05] *** Joins: heftig (heftig@moz-D460AD18.dip0.t-ipconnect.de)
[02:42:15] *** Joins: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com)
[02:43:24] *** Quits: zatnosk (zatnosk@31AE4F7A.F285E7E8.9E52235C.IP) (Quit: Computer has gone to sleep)
[02:43:36] * erickt2 shakes fist at caltrain and it's downed powerline
[02:44:04] <tjc> in fairness, it's not caltrain's fault... blame PG&E :-)
[02:44:28] <erickt2> tjc: any luck organizing a san carlos rust meetup?
[02:44:34] <tjc> erickt2: nothing yet
[02:44:41] <indirect> tjc: 7-8 is just dinner
[02:44:42] <indirect> come anyway
[02:44:55] <tjc> indirect: but I want dinner :-(
[02:44:57] *** Quits: Jesin (Jesin@moz-C1EBF9B4.dept.lehigh.edu) (Quit: Leaving)
[02:45:05] <tjc> in all seriousness, they announced that the delay might be 2 hours
[02:45:05] <indirect> tjc: so you'll have 15 minutes for dinner!
[02:45:06] <indirect> :D
[02:45:09] <indirect> heh
[02:45:13] <tjc> so, it might be that the train won't start moving till 8:15
[02:45:19] <tjc> then it takes at least an hour to get to SF from there
[02:45:24] <erickt2> :(
[02:45:28] *** Quits: boredomist (ruqs@8186917.CC8FA3EE.E3401B6E.IP) (Ping timeout)
[02:45:33] <cmr> I hear there is a bus? :P
[02:45:54] <tjc> cmr: Yes, but if I take the bus I *might* get to SF at 8
[02:46:05] <tjc> and it's Samtrans we're talking about so, uh, I'd have better luck walking
[02:46:11] <cmr> Jeez
[02:46:17] <cmr> Mass transit over there sounds awful
[02:46:33] <tjc> for those playing along at home, it's a 24-mile walk (37 km)
[02:46:51] <cmr> Someone invent teleportation already
[02:47:05] *** Quits: brson (brson@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[02:47:11] <jeaye> tjc: Yeah, I just went home. :|
[02:47:12] *** Joins: tikue__ (tkuehn@C1D209E0.28336FB0.689607DE.IP)
[02:47:21] <tjc> jeaye: Yeah, I might go home too
[02:47:30] <jeaye> I think I'm closer than you, too.
[02:47:30] <cmr> It's going to be on AMO, right?
[02:47:32] <tjc> not sure how, though
[02:47:32] <jeaye> Burlingame
[02:47:36] <tjc> yeah, I'm in San Carlos
[02:47:45] <tjc> I'm not sure if the southbound trains are stopped too
[02:47:47] <jeaye> cmr: yeah
[02:47:55] <jeaye> tjc: They are
[02:48:12] <jeaye> tjc: There's a Southbound train in Burlingame right now that's been there since 6.
[02:48:43] <indirect> tjc: pool everyone stuck on that train for a taxi van? :P
[02:48:46] <tjc> heh
[02:49:01] <tjc> indirect: you're assuming it's possible to get a taxi...
[02:49:04] <tjc> Oh, they're making us all "de-train" here
[02:49:10] *** Quits: adu (ajr@4275DED1.1C3331CA.DA1C73DD.IP) (Quit: adu)
[02:49:12] <tjc> that's cool
[02:49:24] *** Quits: tjc (tjc@9DBA1D53.FD5C31A1.284344F5.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:49:28] <indirect> tjc: does uber go down that far :P
[02:49:42] <jeaye> Oh, man
[02:49:55] <erickt2> good luck everyone. I'm sorry you all probably won't be able to make it :( 
[02:49:55] <jeaye> They're making everyone offboard? It must be hopeless then.
[02:50:15] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[02:50:35] <jeaye> What about Patrick? He *needs* to make it. :P
[02:50:47] <cmr> He can fly
[02:50:54] <jeaye> Ah, yes.
[02:51:02] <jeaye> I've seen him do it before.
[02:51:03] *** Quits: erickt2 (Adium@moz-89F6D64E.public.wayport.net) (Quit: Leaving.)
[02:52:42] <tikue__> wait what's going on?!
[02:52:42] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[02:52:58] *** Quits: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP) (Ping timeout)
[02:53:01] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[02:53:02] *** Joins: Skif (emschwar@moz-4C5BB5A8.beyondbb.com)
[02:54:48] <bstrie> tikue__: apparently, san francisco has decided that the most effective form of public transportation is sidewalks
[02:54:49] <jeaye> tikue__: Caltrain is making it difficult for a number of people to attend the SF Rust meetup tonight.
[02:55:05] <tikue__> damn that's really annoying 
[02:55:52] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[02:56:03] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[02:56:31] *** Joins: GeneralMaximus (ankur@1FC1837.5B928161.D5D59AD9.IP)
[02:56:43] *** Quits: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:58:31] *** Quits: azita (Azita@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: azita)
[03:00:22] *** Joins: tjc (tjc@9DBA1D53.FD5C31A1.284344F5.IP)
[03:00:22] *** ChanServ sets mode: +o tjc
[03:00:24] *** Joins: adu (ajr@4275DED1.1C3331CA.DA1C73DD.IP)
[03:01:04] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[03:01:30] *** Joins: thewonderidiot1 (mike@moz-5506A033.hsd1.ca.comcast.net)
[03:02:35] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:04:27] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:05:27] *** Quits: tjc (tjc@9DBA1D53.FD5C31A1.284344F5.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:05:34] *** Joins: ChrisOei (chrisoei@moz-C07D5168.p2p.sfo1.mozilla.com)
[03:05:52] <dbaupp> are all the trains rusting or something?
[03:06:08] <jeaye> har har har har
[03:06:18] <aatch> ba dumb tsh
[03:06:29] <jeaye> There was just too much Rust today for the trains to handle.
[03:06:38] <jeaye> That's why this happens each Rust meetup, actually.
[03:06:41] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[03:06:42] <jeaye> Makes perfect sense now.
[03:07:23] <pepper_chico> hey, any estimative for the 1.0?
[03:07:42] <pepper_chico> want to have fun with a stable rust
[03:08:29] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[03:08:33] <pepper_chico> rust will have built in support for simd?
[03:11:39] *** Joins: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP)
[03:11:49] <dbaupp> pepper_chico: by "built-in" do you mean manual access to SIMD intrinsics? or the compiler will use SIMD instructions where possible?
[03:12:13] <pepper_chico> manual support
[03:12:19] <cmr> pepper_chico: My estimate is 6-9 months
[03:12:25] <pepper_chico> where I can put my fingers
[03:12:57] <pepper_chico> and just don't let it exclusively for optimization voodoo magic
[03:13:12] <pepper_chico> cmr, cool
[03:13:37] <klutzy> rusti: use std::unstable::simd; let a = simd::i32x4(1, 2, 3, 4); a + a
[03:13:38] -rusti- std::unstable::simd::i32x4(2i32, 4i32, 6i32, 8i32)
[03:14:20] <pepper_chico> nice
[03:14:55] <klutzy> although it contains basic ones for now
[03:14:57] <cmr> but yeah we already have simd, and llvm will vectorize stuff
[03:15:13] <klutzy> basic ones only*
[03:16:21] <pepper_chico> ok, hope it get expanded and well generalized
[03:16:32] <cmr> pepper_chico: it will only get that way if someone works on it
[03:16:35] <cmr> that someone could be you!
[03:17:10] <pepper_chico> =/
[03:17:22] <pepper_chico> I have other priorities by now
[03:17:49] <pepper_chico> but it would be fun if I could afford
[03:17:56] <pepper_chico> the time for that
[03:18:10] <dbaupp> there's always inline asm too, so you can write super-manual SIMD that way.
[03:20:07] <pepper_chico> blah, asm is too architecture specific... I'd like to leverage SIMD in a general sense, maybe not exactly through very low level general operations, but higher level vector ones that would for sure operate with SIMD
[03:20:42] *** Joins: tjc (tjc@9DBA1D53.FD5C31A1.284344F5.IP)
[03:20:42] *** ChanServ sets mode: +o tjc
[03:20:58] <dbaupp> yeah (there are others who are interested/pushing SIMD)
[03:20:58] <jeaye> tjc: what's the deal?
[03:21:16] <pepper_chico> grabbing the best the machine can deliver, in real-time
[03:21:18] <pepper_chico> =D
[03:21:22] *** Quits: ChrisOei (chrisoei@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[03:21:27] <tjc> jeaye: I'm having a burrito
[03:21:47] <jeaye> damn right
[03:22:03] *** Joins: ChrisOei (chrisoei@moz-C07D5168.p2p.sfo1.mozilla.com)
[03:22:15] <jeaye> now I want a burrito. these sour patch kids are no longer sufficient.
[03:22:17] <SingingBoyo> man, now I want a burrito
[03:22:35] <pepper_chico> me too
[03:22:43] <tjc> burrito >>>> sour patch kids
[03:22:45] <pepper_chico> I can only think of this now
[03:23:17] <jeaye> best burrito place I know is in the city. gah, caltrain!
[03:23:25] <jeaye> back to sour patch kids
[03:23:25] <pepper_chico> with chillibeans and hallapeno
[03:23:41] <pepper_chico> goood
[03:24:03] <tjc> now that I have a burrito, maybe I can find somebody to explain monads to
[03:24:03] <jeaye> yeah jalapeño
[03:24:26] <pepper_chico> yeap
[03:24:38] <SingingBoyo> ugh, lifetime parameters for values retrieved from a cache are hard
[03:24:48] <tjc> SingingBoyo: Is there a good solution to that yet?
[03:24:51] <tjc> I didn't think there was one
[03:24:59] <SingingBoyo> tjc: Not convinced there is
[03:25:21] <SingingBoyo> tjc: I mean, I can make it valid for the lifetime of the cache, but then I can't release unused values...
[03:25:22] <tjc> I was just using @
[03:25:26] <tjc> which, of course, seems unsatisfying
[03:25:27] <tjc> yeah
[03:25:40] *** Quits: pepper_chico (pepper_chi@41ABFFD4.95F7EC9A.86AA4479.IP) (Quit: Ex-Chat)
[03:26:20] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:26:46] <SingingBoyo> tjc: guess I could make a 'do-with-value' function but then storing values anywhere else is a pain
[03:26:57] <tjc> yup
[03:27:11] <tjc> I think this is an open question
[03:27:49] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[03:28:02] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:28:36] *** Quits: GeneralMaximus (ankur@1FC1837.5B928161.D5D59AD9.IP) (Quit: Textual IRC Client: www.textualapp.com)
[03:28:51] * SingingBoyo ponders a reference trait that stores some form of location info along with the key to make sure things haven't changed
[03:30:58] *** Quits: zz_kimundi (kimundi@moz-468E1F95.dip0.t-ipconnect.de) (Ping timeout)
[03:34:09] *** Joins: zz_kimundi (kimundi@moz-BD4238C4.dip0.t-ipconnect.de)
[03:34:39] *** zz_kimundi is now known as kimundi
[03:35:42] *** Joins: napoleon (Mibbit@moz-3213C615.wavecable.com)
[03:36:09] *** Joins: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP)
[03:38:07] <napoleon> Is there an ETR of version 1.0?
[03:38:17] *** Quits: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net) (Quit: ZZZzzz…)
[03:39:37] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Ping timeout)
[03:40:15] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:40:29] <cmr> gah, what do people constantly ask this :(
[03:40:33] <cmr> *why
[03:40:42] <napoleon> Oh, sorry. 
[03:40:51] <cmr> Ah, probably the phoronix article?
[03:40:59] <cmr> napoleon: my guess is 6-9 months, but "when it's ready"
[03:41:00] <napoleon> I guess it should've been obvious I wouldn't be the first one to ask.
[03:41:07] * napoleon nods
[03:41:22] <napoleon> Readiness is always the most important part.
[03:41:26] <SingingBoyo> cmr: cause they want to use the language!
[03:41:30] <tjc> phoronix?
[03:41:43] <cmr> tjc: http://www.phoronix.com/scan.php?page=news_item&px=MTUyMDE
[03:41:51] <napoleon> Cause I want to create things that won't break two months later?
[03:42:20] <ssbr> napoleon: the amount of breakage isn't that bad.
[03:42:33] <ssbr> I just got back to some code I wrote in rust 0.6
[03:42:45] <ssbr> if you want to write Rust code, I think you should.
[03:42:46] <napoleon> It was an uninformed exaggeration. Haven't used it yet. ;)
[03:42:46] <cmr> there are testcases in issues that have compiled for 4 months
[03:42:51] <SingingBoyo> napoleon: but that's the fun part!
[03:43:03] <aatch> If things aren't breaking, you're doing something wrong.
[03:43:14] <napoleon> lol
[03:43:19] * aatch lives on the bleeding edge for like 5 core technologies
[03:43:46] <SingingBoyo> My old CPSC prof said that the only kind of program that gets used is one that changes.  Rust program's HAVE to change, ergo, they will get used!
[03:43:46] <cmr> Rust's bleeding edge gives you tetanus though
[03:43:51] <napoleon> I do admit, as a programmer I do like a problem to solve every now and then. ^_^
[03:44:16] <cmr> napoleon: have you see http://reddit.com/r/dailyprogrammer ? :)
[03:44:35] *** Joins: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net)
[03:44:47] <tjc> cmr: Heh, I looked at that and wondered if you'd pasted the wrong link, because I didn't see the Rust part at first :-)
[03:44:48] *** Joins: brson (brson@moz-C07D5168.p2p.sfo1.mozilla.com)
[03:44:48] *** ChanServ sets mode: +ao brson brson
[03:44:49] <aatch> I will admit, I'm a bit odd. I'm the person that hunts out undocumented features, because they are undocumented.
[03:45:07] <napoleon> cmr: No, thank you.
[03:45:08] <cmr> tjc: :)
[03:45:31] * SingingBoyo now has Cache, ReferrableCache, ValueReference, and CachedValueReference traits.
[03:45:35] <SingingBoyo> Something tells me this isn't working
[03:46:01] <aatch> SingingBoyo, obviously. Clearly you need twice as many traits
[03:46:04] <aatch> :P
[03:46:30] <tjc> well, yeah, I see Cache, Referrable, and Value... 2^3 = 8
[03:46:47] *** Quits: brson (brson@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[03:46:54] <aatch> ReferrableCachedValueReferenceCache
[03:47:03] * aatch gets his Java on.
[03:47:08] <dbaupp> not enough beans
[03:47:11] <ssbr> I'm not sure how stupidly vague a question this is, but what do people do if they want to return in the middle of a do block?
[03:47:15] <SingingBoyo> aatch: This is not FizzBuzz Enterprise Edition
[03:47:18] <aatch> ReferrableCachedValueReferenceCacheBeanFactoryBean
[03:47:29] <dbaupp> ssbr: write a proper fn function :(
[03:47:43] * dbaupp wants 'return' in closures
[03:47:44] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[03:47:55] <SingingBoyo> ssbr, dbaupp: why not use an if?  :D
[03:47:58] <ssbr> dbaupp: I mean return from the function containing the do block, rather than return just inside the block
[03:48:13] <ssbr> Did this used to work before?
[03:48:18] <aatch> ssbr, nope.
[03:48:23] <ssbr> I know it worked with `for` blocks, but those are special
[03:48:40] <aatch> It kinda worked with for blocks, but now those are sugar for something without closures.
[03:48:52] <ssbr> it worked if your iterator was nice :p
[03:48:55] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[03:49:06] <aatch> ssbr, hence "kinda"
[03:49:52] <ssbr> I'm struck by how much I miss exceptions.
[03:50:30] *** Joins: erickt1 (Adium@moz-C07D5168.p2p.sfo1.mozilla.com)
[03:50:34] <dbaupp> SingingBoyo: because you might have something like `|foo| { for x in foo.iter() { if something() { return Some(x) } } None }`
[03:51:25] <dbaupp> ssbr: you can set a `let mut ret: Option<type> = None` to Some, break out of the do block and check that ret.
[03:51:37] <dbaupp> (i.e. manually do the transform that `for` used to do.)
[03:51:46] <isaacd> Is it possible to declare a tuple structure's fields private?  Or if I want to make an implementation-hiding wrapper type do I have to make it a struct with a named field?
[03:51:55] <ssbr> dbaupp: Actually, yes, I think that's the cleanest way to do this "in general".
[03:52:05] <ssbr> Obviously in many cases it's code that can be restructured to avoid the problem though.
[03:52:14] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:52:19] <aatch> isaacd, to hide the impl, you need a named field, yes
[03:52:24] <ssbr> Thanks for the suggestion! :>
[03:52:29] <isaacd> aatch: hm okay
[03:52:37] *** Joins: jdm (jdm@moz-99690620.hinet-ip.hinet.net)
[03:52:37] *** ChanServ sets mode: +o jdm
[03:52:38] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[03:52:38] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:53:05] <aatch> since otherwise you could get at the wrapped value using `*foo`
[03:53:31] <isaacd> aatch: I was hoping that `*foo` would be able to obey the privacy rules and only work where it's accessible
[03:53:45] <aatch> rusti: struct Foo(int); let a = Foo(1); let b = Foo(2); (a, *b)
[03:53:46] -rusti- (main::Foo(1), 2)
[03:53:49] *** Joins: suzak (suzak@moz-E955F956.gununu.org)
[03:54:26] <isaacd> in the modules where the field is accessible, that is
[03:54:47] <aatch> isaacd, well there isn't a way to mark fields of a tuple-like struct private.
[03:54:56] <isaacd> yeah I figured that out
[03:55:08] <isaacd> I tried `struct Foo(priv int)` and it didn't work :)
[03:55:16] *** Quits: jordyd (jordyd@moz-D494A55.seg37.ucf.edu) (Ping timeout)
[03:55:49] <isaacd> the manual doesn't actually say how to mark any fields priv, though, so I was not sure
[03:56:01] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[03:56:13] <aatch> isaacd, any at all? Not even ones in regular structs?
[03:56:15] <isaacd> well it gives an example in one place
[03:56:30] <isaacd> in 6.2 Visibility and Privacy
[03:56:58] <isaacd> but it doesn't mention it in 6.1.5 Structures
[03:57:29] <isaacd> and the uses in 6.2 are explicitly listed as "examples"
[03:57:54] <isaacd> (using http://static.rust-lang.org/doc/master/rust.html )
[03:58:02] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[03:58:09] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[04:00:41] <isaacd> and indeed the examples in that section are only examples, not comprehensive. For example `pub trait FooBar {}` is legal and `pub trait` isn't explicitly listed in the manual.
[04:03:48] *** Quits: erickt1 (Adium@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: Leaving.)
[04:05:34] *** Joins: brson (brson@moz-C07D5168.p2p.sfo1.mozilla.com)
[04:05:34] *** ChanServ sets mode: +ao brson brson
[04:06:13] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[04:07:25] <isaacd> The manual also doesn't list an example or formal syntax of type-synonyms in the section on them ( http://static.rust-lang.org/doc/master/rust.html#type-definitions )
[04:07:26] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[04:07:32] <napoleon> Man, compiling rust takes forever...
[04:07:44] * napoleon shakes fist at cpp.
[04:07:51] <SingingBoyo> napoleon: first time is the worst, has to compile LLVM.
[04:08:04] <napoleon> This is the second time.
[04:08:10] <tjc> ccache helps with that
[04:08:20] *** Quits: geoffhill (geoffhill@moz-738DC0DB.org) (Quit: )
[04:08:47] <isaacd> Is the Rust abstract syntax listed somewhere? (rustc's source code if no where else? :))
[04:09:07] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[04:09:16] <tjc> isaacd: libsyntax/ast.rs :-)
[04:09:21] <isaacd> :)
[04:11:03] *** Joins: tautologico (lymph@E0D804D3.CFE755C8.C27E1635.IP)
[04:13:08] *** Joins: nealla (nealla@moz-8609DA39.members.linode.com)
[04:14:07] <SingingBoyo> so what's the conceptual difference between proc() and ~fn()/&fn()?
[04:14:48] <tjc> SingingBoyo: proc() can only be called once
[04:15:21] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[04:15:37] <cmr> isaacd: if by  abstract syntax you mean ast, yes. if you mean the grammar, no
[04:16:36] <SingingBoyo> tjc: right... not sure I see the benefit of differentiating callable once from callable many times.  Something to do with closures?
[04:16:43] <SingingBoyo> Or am I just way off :O
[04:17:18] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[04:17:39] <tjc> SingingBoyo: if you know that a closure is only going to be called once, it's okay for it to consume the variables that it captures
[04:17:55] <tjc> on the other hand, if it could be called repeatedly (e.g. in a for loop), after the first iteration, it would find dangling pointers where its free variables once were, so to speak
[04:18:10] *** Joins: Kxepal (Miranda@moz-CC1FB375.pppoe.mtu-net.ru)
[04:19:21] <isaacd> cmr: well libsyntax/ast.rs does tell me what is possible to write.  But it doesn't tell the grammar, and libsyntax/parse/parser.rs didn't look particular approachable to glance casually at.
[04:19:40] <tjc> isaacd: We did have a formal specification at the grammar at one point, but it's not up to date
[04:19:40] <SingingBoyo> tjc: ah right, okay. Is it possible to use a ~fn as a parameter to a function that takes a proc?
[04:19:43] *** Quits: sam113101 (sam@moz-ADDDDFB1.mc.videotron.ca) (Ping timeout)
[04:19:47] <tjc> and you're right, the parser isn't a good (clear) specification of the grammar
[04:20:01] <tjc> SingingBoyo: I think the plan is to remove ~fns, but to be honest I'm not sure what the current plan is, since it has changed more than once :-)
[04:20:37] <ssbr> Does Rust have a debugger?
[04:21:19] <tjc> ssbr: yes, it's called gdb :-)
[04:21:25] <tjc> but no, there's no Rust-specific debugger that I know of
[04:21:45] <ssbr> Well, is gdb rust-aware?
[04:22:05] <ssbr> uhhh, I'm not familiar too much, but I know LLVM has some tooling to let arbitrary langauges provide enough information for gdb to run off of
[04:22:15] *** Joins: engla (engla@moz-F64E1B0F.cust.bredbandsbolaget.se)
[04:22:20] <tjc> ssbr: rust got debuginfo improvements over the summer, so things should work pretty well
[04:22:25] <tjc> I really only use gdb for stack traces
[04:22:37] <tjc> other people use it more thoroughly
[04:22:48] <ssbr> OK. That's all I need. I ddin't want a rust-specific debugger, just a debugger for rust. :P   Thanks!
[04:23:08] *** Joins: sam113101 (sam@moz-ADDDDFB1.mc.videotron.ca)
[04:23:09] <tjc> sure! report problems, etc.
[04:24:05] <tautologico> I thought ~fn was already gone
[04:24:17] <ssbr> Errr, how do you make rustc output debugging symbols?
[04:24:36] <klutzy> ssbr: -Z extra-debug-info?
[04:24:36] <ssbr> tautologico: it wasn't from master as of sunday.
[04:25:12] <tautologico> https://github.com/mozilla/rust/commit/f977bedafd657b52fb618cc788cc31f35336270d
[04:25:25] <ssbr> klutzy: ah, thanks! The way you say that -- is there someplace I should've read to find out about this, or was the question mark just to indicate you weren't sure?
[04:25:44] <tautologico> rustc -Z help
[04:26:04] <klutzy> ssbr: I usually remember names wrongly :p
[04:26:06] <ssbr> awesome, thanks
[04:27:09] *** Quits: brson (brson@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[04:27:38] <sammykim> Is there anyone using MAC OS? When I make check, I got fail with test_c_dependency_no_rebuilding.
[04:27:51] <ssbr> man, that worked so poorly that I'm pretty sure I did something wrong.
[04:28:18] <tautologico> I'm on OS X but I didn't compile rustc today
[04:28:35] <tjc> sammykim: probably because of https://github.com/mozilla/rust/issues/10461
[04:29:35] <sammykim> I am reading this. Will the make-check be fail until it's fixed? 
[04:29:45] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[04:29:51] <ssbr> if I have a test failure like `task 'vm::test_no_split' failed at 'assertion failed: start <= end', /usr/local/google/home/devinj/local_programming/rust/src/libstd/vec.rs:98`, how would you recommend I debug it?
[04:29:59] <tjc> well, it's passing on the bots...
[04:30:15] <tjc> you can mark the test #[ignore] locally and not check it in like that, if you like :-)
[04:31:31] <sammykim> tjc: Thanks. Is that PR #1292?
[04:33:28] *** Joins: recrack (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[04:33:43] <tjc> sammykim: Oh, I see. Well, that one disables parallel builds. 
[04:33:48] <tjc> Which might fix the problem 
[04:33:51] <tjc> well, work around it
[04:34:46] *** nrc is now known as nrc|afk
[04:35:00] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[04:37:37] *** Quits: Skif (emschwar@moz-4C5BB5A8.beyondbb.com) (Client exited)
[04:38:39] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[04:41:04] <sammykim> tjc: Thanks! I got it. The prallel build might make error.. That's interesting. 
[04:41:44] *** Joins: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP)
[04:42:14] <isaacd> This looks out-of-date in the manual: "Borrowed pointers are written &content, or in some cases &f/content for some lifetime-variable f" (should be &'f content).  Might I submit doc patches and/or bug-reports?
[04:42:17] *** Quits: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net) (Quit: ZZZzzz…)
[04:42:37] <tjc> isaacd: yes, but make sure you're reading the master version (and not the 0.8 version) of the manual
[04:44:19] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[04:45:27] *** Joins: Skif (emschwar@moz-4C5BB5A8.beyondbb.com)
[04:45:58] *** Quits: Skif (emschwar@moz-4C5BB5A8.beyondbb.com) (Client exited)
[04:46:57] <isaacd> tjc: yes, I am
[04:47:06] <isaacd> http://static.rust-lang.org/doc/master/rust.html
[04:47:10] <tjc> ok, then please do submit a doc patch. thanks!
[04:47:30] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[04:50:16] <cmr> we probably need to go over the manual with a fine comb
[04:50:28] <tjc> probably, yes
[04:50:33] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[04:51:27] *** Quits: adu (ajr@4275DED1.1C3331CA.DA1C73DD.IP) (Quit: adu)
[04:52:01] * sfackler shakes fist at CalTrain
[04:52:17] <cmr> What's the AMO link?
[04:52:38] *** Quits: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net) (Connection reset by peer)
[04:52:39] <isaacd> tjc: well hopefully I did my first Rust pull-request right! https://github.com/mozilla/rust/pull/10585
[04:52:51] *** Joins: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net)
[04:52:54] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Quit: Coyote finally caught me)
[04:53:00] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[04:53:12] <tjc> isaacd: looks good! now we'll see if bors still knows who I am...
[04:53:18] <isaacd> :)
[04:54:52] <sfackler> tjc: did you make it up to the meetup?
[04:55:00] <sammykim> When I build rust targetting arm on MAC, It is compile error. :( Anyone has an idea? http://pastebin.mozilla.org/3645293
[04:55:04] *** Joins: bungoman (bungoman@moz-F95B490C.tx.res.rr.com)
[04:55:10] <sammykim> Linux is fine.
[04:55:15] <tjc> sfackler: no, I only made it as far as San Carlos
[04:55:16] <sammykim> Just on OSX.
[04:55:21] <tjc> I decided to get a burrito instead
[04:55:25] <tjc> the burrito was okay
[04:55:26] <sfackler> tjc: haha, me too
[04:55:34] <sfackler> i ended up with tacos
[04:55:36] <tjc> sfackler: heh, which train were you on?
[04:55:42] <sfackler> the bullet
[04:55:50] *** Joins: erickt1 (Adium@moz-C07D5168.p2p.sfo1.mozilla.com)
[04:56:04] <sfackler> which is kind of a silly name for a normal train that skips most stops imo
[04:56:06] *** Quits: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:56:12] <tjc> haha
[04:56:15] <tjc> yes, it's ridiculous
[04:56:15] <sfackler> the 381
[04:56:16] <tjc> I was on the limited
[04:56:19] <tjc> so we weren't on the same train
[04:56:32] *** Joins: erickt2 (Adium@moz-C07D5168.p2p.sfo1.mozilla.com)
[04:56:33] <bungoman> For generic functions how do I tell the type to have more than one trait? Is it even possible? Is it even desirable? If I'm needing to do that is it a sign I shouldn't be using generics?
[04:56:34] *** Quits: erickt1 (Adium@moz-C07D5168.p2p.sfo1.mozilla.com) (Connection reset by peer)
[04:56:48] <tjc> bungoman: yes, you can separate multiple trait bounds with a  +
[04:56:52] <sfackler> bungoman: T:Foo+Bar
[04:56:55] <cmr> bungoman: fn foo<T: A+B>
[04:57:04] <bungoman> ahhh
[04:57:06] <bungoman> thanks!
[04:57:22] <bungoman> Is that documented somewhere?
[04:57:33] <cmr> bungoman: generics tutorial, manual.
[04:57:34] <tjc> possibly :P
[04:57:37] *** Quits: erickt2 (Adium@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: Leaving.)
[04:57:46] <dbaupp> cmr: there's a generics tutorial?
[04:58:20] <cmr> ... I thought there used to be
[04:58:22] <bungoman> All google found me was a mailing list discussion from over a year ago about possibilities for the syntax of multiple traits, heh.
[04:58:25] <cmr> If there was, it's gone now!
[04:59:00] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[04:59:16] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:59:52] <SingingBoyo> How do I convince the borrow checker that a borrow is finished? in an impl for a struct I'm using vecField.iter().find(), and then I want to use the vector mutably, but I can't :(
[05:00:38] <sfackler> you can put the iterator use in a block
[05:00:58] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:00:59] <sfackler> fn foo() { ... stuff... { vecField.iter.find() ... } ... more stuff ... }
[05:01:17] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:03:01] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:03:17] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:03:27] *** Joins: erickt1 (Adium@moz-C07D5168.p2p.sfo1.mozilla.com)
[05:04:29] *** Quits: erickt1 (Adium@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: Leaving.)
[05:05:02] *** Joins: Jesin (Jesin@moz-63C897DA.res.lehigh.edu)
[05:05:02] *** Quits: tjc (tjc@9DBA1D53.FD5C31A1.284344F5.IP) (Ping timeout)
[05:05:04] <isaacd> `for i in [1, 2].iter() {}` doesn't work but `let temp = [1, 2]; for i in temp.iter() {}` does.  I understand the lifetime reason, but it seems unfortunate that the temporary can't last for the whole for loop?
[05:05:25] <isaacd> Maybe I'm missing something.
[05:05:33] <cmr> isaacd: it is unfortunate. nmatsakis is looking to change it afaik
[05:05:38] <isaacd> okay! :)
[05:05:39] <myname> isaacd: why not range(1,2).iter?
[05:05:58] <myname> erm
[05:05:59] <myname> .each
[05:06:04] <isaacd> myname: because I was actually using my own custom data type and not lists
[05:06:06] *** Joins: GeneralMaximus (ankur@377BCDBB.2DC4D51C.BE90E62C.IP)
[05:06:13] <myname> okay
[05:06:24] <cmr> isaacd: (they're vectors in rust)
[05:06:28] <isaacd> whoops year
[05:06:35] <isaacd> *yeah
[05:06:37] <isaacd> wrong name :)
[05:06:57] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:07:18] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:08:11] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[05:08:23] *** Joins: erickt1 (Adium@moz-C07D5168.p2p.sfo1.mozilla.com)
[05:08:35] *** Quits: erickt1 (Adium@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: Leaving.)
[05:09:50] <bungoman> Okay, so I got my generic function working. But, really, is needing two (or more) traits a bad sign? Or is it just the reality of dealing with generics?
[05:09:58] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[05:10:28] <cmr> bungoman: just the reality of generics.
[05:10:30] <sfackler> I find it not that uncommon, especially if one of them is a built in trait like Freeze or something like Clone
[05:10:39] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Ping timeout)
[05:10:43] <bungoman> In my case it was Eq and Clone.
[05:10:59] <bungoman> So it seemed reasonable. But I have no clue what I'm doing.
[05:11:03] <sfackler> yeah, that kind of thing is pretty reasonable
[05:12:03] <bungoman> I'm still on the "tweak things until the compiler shuts up" part of the learning curve.
[05:13:01] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:13:19] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:13:25] <isaacd> myname: also because my values aren't in numeric sequence.  Is there something like `for x in iter_arguments(7, 1, 3, 4)` which would mean a similar thing to `for x in [7, 1, 3, 4].iter()` ?
[05:14:28] *** Joins: Jesse (jruderman@moz-C07D5168.p2p.sfo1.mozilla.com)
[05:14:30] <dbaupp> bungoman: random example of using multiple traits in the compiler https://github.com/mozilla/rust/blob/master/src/librustc/middle/typeck/infer/lattice.rs#L189-L190 (i.e. it's not at all weird to do so)
[05:14:35] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[05:15:16] *** Joins: tjc (tjc@9DBA1D53.FD5C31A1.284344F5.IP)
[05:15:16] *** ChanServ sets mode: +o tjc
[05:15:52] <bungoman> Here's what I ended up with: fn remove_first<T:Eq + Clone>(i: T, v: ~[T]) -> ~[T]
[05:16:43] <dbaupp> bungoman: looks fine (although, I'd write `i: &T`, since you are just checking for equality with it, right?)
[05:17:06] <myname> well, looking at haskell, i consider multiple traits pretty normal
[05:17:30] <bungoman> Here's what I'm doing with i: let index = v.iter().position(|x| *x == i); 
[05:18:25] <dbaupp> yeah, taking i by ref and writing `|x| *x == *i` is more idiomatic
[05:18:45] <dbaupp> (you don't need ownership, so there is no point in forcing the caller to copy the the value)
[05:19:13] <bungoman> Ah, good to know.
[05:21:28] <dbaupp> also, on first thought, I'd think that any cloning (and thus the Clone bound) is unnecessary, i.e. something like `fn remove_first<T: Eq>(i: &T, mut v: ~[T]) -> ~[T] { let idx = { v.iter().position(|x| *x == *i) }; v.remove(idx); v }` (not tested)
[05:22:02] *** Joins: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP)
[05:23:28] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Quit: Leaving...)
[05:24:02] <bungoman> What if I want to be able to do something like remove_first(3, ~[1, 2, 3, 4, 3]) ? I got this: "mismatched types: expected `&<V5>` but found `<VI10>` (expected &-ptr but found integral variable)" until I did osmething like let x = 3; remove_first(&x,....
[05:25:10] <dbaupp> remove_first(&3, ...)
[05:25:18] <bungoman> wait what
[05:25:36] *** Quits: Jesse (jruderman@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: Jesse)
[05:25:38] <dbaupp> address of a temporary is fine
[05:25:45] <bungoman> Woah
[05:26:39] <bungoman> Hah, it worked.
[05:26:53] <bungoman> That's good to know.
[05:27:20] <Luqman> ChrisMorgan: the reason why the latest builds  aren't working is becuase it seems like the debian package i was using was updated to glibc 2.17
[05:28:02] <ChrisMorgan> What's your intent? Will you downgrade it or should I see about setting up my own Debian VM for the purpose?
[05:35:26] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[05:35:31] <ssbr> What is a struct expression?
[05:35:45] *** Quits: tjc (tjc@9DBA1D53.FD5C31A1.284344F5.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:35:56] <ssbr> ( http://static.rust-lang.org/doc/master/rust.html#struct-expressions is a dead link)
[05:36:27] <ssbr> oh right, it's MyFoo{field: value, field2: value2}
[05:37:18] *** Joins: tjc (tjc@9DBA1D53.FD5C31A1.284344F5.IP)
[05:37:19] *** ChanServ sets mode: +o tjc
[05:38:12] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[05:39:21] *** Quits: ChrisOei (chrisoei@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[05:41:24] *** Quits: Jesin (Jesin@moz-63C897DA.res.lehigh.edu) (Quit: Leaving)
[05:41:37] *** Joins: mib_rb0pcg (Mibbit@345A1E0F.BDC6776B.6F5EC0C.IP)
[05:42:59] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Ping timeout)
[05:43:11] <sfackler> ooh, structs can have lifetime parameters without needing to store a reference now?
[05:43:12] *** Quits: mib_rb0pcg (Mibbit@345A1E0F.BDC6776B.6F5EC0C.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:43:23] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[05:43:27] <ChrisMorgan> Luqman?
[05:43:37] <napoleon> Why is there a rust executable in the release, but only rustc in master?
[05:43:53] <ChrisMorgan> napoleon: it got removed; it was buggy and there was no one maintaining it.
[05:44:02] <dbaupp> sfackler: can they?
[05:44:09] <sfackler> looks like
[05:44:11] <tjc> napoleon: the stand-alone `rust` tool was removed after 0.8
[05:44:14] <napoleon> Thanks.
[05:44:50] <sfackler> maybe it changed along with all of the stuff nmatsakis was doing with struct lifetimes
[05:44:56] * napoleon thinks having 1 exe is better design anyways.
[05:45:21] *** Quits: tjc (tjc@9DBA1D53.FD5C31A1.284344F5.IP) (Connection reset by peer)
[05:45:50] *** Joins: tjc (tjc@9DBA1D53.FD5C31A1.284344F5.IP)
[05:45:51] *** ChanServ sets mode: +o tjc
[05:47:45] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[05:49:00] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:49:10] *** Joins: Jesse (jruderman@moz-C07D5168.p2p.sfo1.mozilla.com)
[05:49:14] *** Joins: leefoster (Mibbit@C8F46AB8.E4759C6D.6F5EC0C.IP)
[05:49:28] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[05:50:50] <leefoster> Hey yall I just started learning Rust for a paper I'm writting at school and I was having a little bit of trouble with assigning a variable from an expression
[05:50:59] <leefoster> http://stackoverflow.com/questions/20113338/rust-not-all-control-paths-return-a-value-in-expression I posted this if someone wants to check it out :)
[05:51:48] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[05:52:07] <sfackler> leefoster: that compiles for me. what version of rust are you using?
[05:52:37] <leefoster> the code I posted complies but when I remove the return statement it won't work
[05:52:53] <dbaupp> leefoster: make sure you don't have the trailing semicolon when you write `fn less_or_greater() -> &'static str { if {} else if {} else {} }`
[05:52:54] *** Joins: Jesin (Jesin@moz-63C897DA.res.lehigh.edu)
[05:52:55] <leefoster> but according to the Rust 0.8 tutorial correct style is to not use returns right?
[05:53:01] <sfackler> oh, oops
[05:53:09] *** Joins: boaz3 (boaz3@moz-5C189D89.red.bezeqint.net)
[05:53:38] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:53:45] <klutzy> I feel Option.iter() is hack but I can't find better way except for match
[05:53:57] <sfackler> leefoster: replying now
[05:54:05] <leefoster> dbaupp do you mean don't include a semicolon on the end of my expression?
[05:54:11] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:54:22] <leefoster> I tried that and it also didn't work :*(
[05:55:54] *** Quits: boaz3 (boaz3@moz-5C189D89.red.bezeqint.net) (Quit: Leaving)
[05:56:31] <sfackler> just posted
[05:56:40] <leefoster> sweet Ill look at it thanks!
[05:57:16] <ChrisMorgan> napoleon: the `rust` tool is highly likely to come back in the future, but with no champion at present it was only a burden, so it got removed for now. Better to remove a broken tool than to have to maintain it and have a tool with significant bugs in it around, when all its functionality can be accessed other ways.
[05:57:37] *** Quits: thewonderidiot1 (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[05:57:45] <leefoster> woh! thanks sfackler!
[05:57:45] * napoleon nods
[05:57:49] <leefoster> that makes sense I think 
[05:58:27] <sfackler> dbaupp: do you know what actually happens when returning a &Foo? does the compiler interpret it as &'static Foo? It seems like it does, but that feels pretty sketchy
[05:58:50] <dbaupp> sfackler: no, it doesn't interpret it as 'static Foo
[05:58:58] <dbaupp> it gives it an anonymous lifetime
[05:59:03] *** Quits: Jesse (jruderman@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: Jesse)
[05:59:15] <dbaupp> but 'static can be used in place of any lifetime
[05:59:29] <dbaupp> so the &'static str literals can be returned
[05:59:32] *** Quits: tjc (tjc@9DBA1D53.FD5C31A1.284344F5.IP) (Ping timeout)
[05:59:40] <leefoster> thanks again sfackler I'm sure I'll be back with more questions lol
[05:59:45] *** Quits: leefoster (Mibbit@C8F46AB8.E4759C6D.6F5EC0C.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:59:49] <sfackler> but if it gives an anonymous lifetime, shouldn't the return value be unusable?
[05:59:54] <dbaupp> no
[05:59:58] *** Joins: Jesse (jruderman@moz-C07D5168.p2p.sfo1.mozilla.com)
[06:00:01] <sfackler> leefoster: glad to help :)
[06:00:10] <dbaupp> it's as if one wrote `fn foo<'a>() -> &'a str { "foo" }`
[06:00:15] <dbaupp> foo is &'static str
[06:00:40] <dbaupp> and 'a < 'static (because everything is < 'static) so that's valid
[06:00:44] <sfackler> oh, so the caller actually gets to pick what 'a ends up being
[06:01:02] <dbaupp> in that case, yes, but not in the &str case
[06:01:08] <dbaupp> I think.
[06:01:22] <dbaupp> (i.e. if it's anonymous, no choice)
[06:03:11] *** Joins: tjc (tjc@9DBA1D53.FD5C31A1.284344F5.IP)
[06:03:11] *** ChanServ sets mode: +o tjc
[06:03:17] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[06:03:25] <Heather> good morning
[06:03:49] <Heather> how can I call rust code from C# ? :D
[06:04:06] <Heather> ah... I already asked I think
[06:07:01] *** Quits: tjc (tjc@9DBA1D53.FD5C31A1.284344F5.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:08:56] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[06:09:34] *** Quits: fournm (Aria@moz-ABB60BA0.austin.res.rr.com) (Quit: Leaving)
[06:09:38] *** Joins: ChrisOei (chrisoei@moz-95D5B5D3.mycingular.net)
[06:10:15] *** Quits: napoleon (Mibbit@moz-3213C615.wavecable.com) (Quit: http://www.mibbit.com ajax IRC Client)
[06:10:43] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[06:10:48] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[06:13:54] *** Joins: Jackneill (Jackneill@moz-253E20FF.pool.digikabel.hu)
[06:14:23] *** Quits: ChrisOei (chrisoei@moz-95D5B5D3.mycingular.net) (Ping timeout)
[06:14:48] *** Joins: mindcat (mindcat@684D3E6.2AF6B358.291A146C.IP)
[06:19:47] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[06:21:43] *** Quits: bungoman (bungoman@moz-F95B490C.tx.res.rr.com) (Client exited)
[06:23:27] *** Quits: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net) (Quit: Textual IRC Client: www.textualapp.com)
[06:23:57] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[06:23:58] *** Joins: steveklabnik (steveklabn@moz-1BAF77C5.nyc.res.rr.com)
[06:24:14] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[06:24:29] *** Quits: rossm (rossm@moz-EE3BB1DC.br.br.cox.net) (Ping timeout)
[06:25:19] *** jdm is now known as jdm|busy
[06:26:23] *** Quits: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca) (Quit: canhtak)
[06:29:05] *** Joins: rossm (rossm@moz-EE3BB1DC.br.br.cox.net)
[06:30:02] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[06:33:24] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[06:34:55] *** Quits: Jesse (jruderman@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: Jesse)
[06:36:41] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[06:39:36] *** Joins: alonlevy (alon@moz-FED7051B.bb.netvision.net.il)
[06:39:55] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[06:41:18] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[06:41:35] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[06:41:55] *** Joins: ChrisOei (chrisoei@moz-30D80888.hsd1.ca.comcast.net)
[06:44:44] *** Quits: KindOne (KindOne@moz-13E4294E.dynamic.ip.windstream.net) (Ping timeout)
[06:46:30] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[06:49:14] *** Joins: KindOne (KindOne@moz-8F484926.dynamic.ip.windstream.net)
[06:50:20] *** Quits: tikue__ (tkuehn@C1D209E0.28336FB0.689607DE.IP) (Quit: tikue__)
[06:52:10] *** Quits: tautologico (lymph@E0D804D3.CFE755C8.C27E1635.IP) (Quit: tautologico)
[06:52:34] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[06:52:34] *** ChanServ sets mode: +o tjc
[06:53:34] *** Joins: nlminhtl (ignotus@moz-BA3DE7EF.volia.net)
[06:54:45] *** Joins: tikue__ (tkuehn@C1D209E0.28336FB0.689607DE.IP)
[06:56:57] *** Joins: pnathan1 (Adium@moz-5EBBDD83.tukw.qwest.net)
[06:58:57] *** Quits: Soft (soft@moz-EC8D39F.yok.fi) (Ping timeout)
[07:05:34] *** Quits: steveklabnik (steveklabn@moz-1BAF77C5.nyc.res.rr.com) (Ping timeout)
[07:08:15] *** Joins: Jesse (jruderman@moz-C07D5168.p2p.sfo1.mozilla.com)
[07:09:41] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[07:11:09] *** Quits: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Ping timeout)
[07:11:23] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[07:13:58] *** Quits: cubic (cubic@moz-80241A3A.mc.videotron.ca) (Quit: Leaving)
[07:17:31] *** Joins: lenstr (lenstr@2A2A2196.9DA5669E.3F2079FA.IP)
[07:21:29] *** Quits: Jesse (jruderman@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: Jesse)
[07:21:59] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[07:22:00] *** Joins: joelteon_ (bzzt@moz-948A3799.lightspeed.snvaca.sbcglobal.net)
[07:22:32] *** Quits: joelteon_ (bzzt@moz-948A3799.lightspeed.snvaca.sbcglobal.net) (Client exited)
[07:23:07] *** Quits: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:23:31] *** Joins: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP)
[07:24:07] *** jdm|busy is now known as jdm
[07:27:59] *** Quits: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP) (Quit: )
[07:32:35] *** Joins: ozkriff (Mibbit@6014F6.BC46A4C1.71211713.IP)
[07:32:35] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[07:33:22] *** Joins: GeorgeH (George@moz-FB5F2302.hsd1.nj.comcast.net)
[07:33:39] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[07:34:08] *** Quits: lenstr (lenstr@2A2A2196.9DA5669E.3F2079FA.IP) (Client exited)
[07:37:37] *** Quits: ozkriff (Mibbit@6014F6.BC46A4C1.71211713.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:37:55] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[07:40:49] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[07:41:34] <olsonjeffery> how are folks making their current src build of the compiler/libraries available in PATH?
[07:42:10] <olsonjeffery> ive been doing make install to my homedir as the prefix, but that is error'ing out
[07:42:59] <sfackler> olsonjeffery: "./configure --prefix=$HOME/.rust-local && make && make install" works for me
[07:43:12] <klutzy> ../configure --prefix=... or make install DESTDIR=...
[07:43:15] <sfackler> and then PATH=$HOME/.rust-local/bin:$PATH
[07:43:36] <klutzy> or when I forgot DESTDIR I just copy stage2 :)
[07:44:01] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[07:44:01] * strcat just has a daily build installed globally as a package and runs a specific build of rustc as needed
[07:44:25] <olsonjeffery> yeah i have prefix set
[07:44:28] <olsonjeffery> in the configure
[07:44:31] <olsonjeffery> to my homedir
[07:44:41] <klutzy> I used to do ../configure --prefix=$HOME/usr/rust-`git rev-parse --short HEAD`
[07:44:46] <Heather> Hi, do we have libgit2 binding?
[07:44:56] <klutzy> but when I realized my ~/usr takes 1GB I stopped it
[07:45:03] <dbaupp> Heather: not nice ones that i know of
[07:45:06] *** Joins: derek_c (derek@moz-B8433164.cit.cornell.edu)
[07:45:07] <strcat> klutzy: git describe is better
[07:45:10] <strcat> it's always-incrementing
[07:45:11] <dbaupp> klutzy: how many rustc's did you have?
[07:45:19] <Sharp> That was fun.  Sorry to everyone who couldn't make it.
[07:45:25] <strcat> klutzy: and it's a meaningful version string a human can understand ;p
[07:45:40] <dbaupp> Sharp: how many in the end?
[07:45:47] <strcat> last_tag-commits_since_last_tag-commit_id
[07:45:54] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[07:45:57] <Sharp> dbaupp: I'm not sure, exactly.  There was a pretty good turnout though.
[07:45:58] <tikue__> rusti: 3.div_mod_floor(2)
[07:45:59] <klutzy> dbaupp: 10~20 maybe
[07:45:59] -rusti- pastebinned 38 lines of output: http://sprunge.us/NcHJ
[07:46:08] <tikue__> rusti: 3i.div_mod_floor(2)
[07:46:08] -rusti- <anon>:9:26: 9:27 error: mismatched types: expected `&int` but found `<VI0>` (expected &-ptr but found integral variable)
[07:46:08] -rusti- <anon>:9          3i.div_mod_floor(2)
[07:46:09] -rusti-                                    ^
[07:46:09] -rusti- error: aborting due to previous error
[07:46:09] -rusti- application terminated with error code 101
[07:46:14] <tikue__> rusti: 3i.div_mod_floor(&2)
[07:46:15] -rusti- (1, 1)
[07:46:21] <dbaupp> klutzy: bah, that's nothing! cmr has 1600 :P
[07:46:23] <Sharp> klutzy: There were more than that.
[07:46:25] <tikue__> rusti: 5i.div_mod_floor(&2)
[07:46:25] -rusti- <anon>:9:8: 9:9 error: unknown start of token: \x1d
[07:46:25] -rusti- <anon>:9          5i.div_mod_floor(&2)
[07:46:25] -rusti-                  ^
[07:46:25] -rusti- application terminated with error code 101
[07:46:30] <klutzy> what I actually realized is that my ~/ was going to be full :p
[07:46:36] <tikue__> rusti: 5i.div_mod_floor(&2)
[07:46:36] -rusti- (2, 1)
[07:46:40] <dbaupp> Sharp: ( klutzy was answering a different question)
[07:46:46] <Sharp> Oh, hah.  Sorry.
[07:46:46] <dbaupp> tikue__: you can private message rusti
[07:47:03] <Heather> dbaupp as far I can discover there was issue about libgit imp and then it was added to rustpkg :S
[07:47:06] <Sharp> My apologies.
[07:47:06] <dbaupp> Sharp: who talked in the end? pcwalton and someone from opendns?
[07:47:09] <Heather> and then rustpkg was removed
[07:47:21] <Sharp> dbaupp: PCWalton, someone from OpenDNS, and Yehudah Katz.
[07:47:26] <tikue__> dbaupp: sorry i know -- i didn't expect something so simple to take me so long to get right
[07:47:29] <Sharp> And brson.
[07:47:43] <dbaupp> ah, what was Yehudah talking about?
[07:47:59] <dbaupp> (wycats_== yehudah, right?)
[07:48:06] <Sharp> Possibly?
[07:48:14] <ssbr> btw, http://bpaste.net/show/r86tfyNx5dlU1rAjy5iB/
[07:48:20] <ssbr> (yay)
[07:48:25] <Sharp> At his new company, he is writing performance critical monitoring code in Rust rather than C++ (through a C binding).
[07:48:32] <Sharp> Well, I shouldn't say "new."
[07:48:34] <dbaupp> ssbr: awesome!
[07:48:41] <Sharp> At his current company :P
[07:48:51] <strcat> dbaupp: did you end up testing how salsa20/chacha20 (or another eSTREAM cipher) compares vs. ISAAC?
[07:48:59] <klutzy> strcat: git describe looks cool. thanks!
[07:49:04] <dbaupp> ssbr: (`extern mod cratename;`, possibly with -Lpath/to/crate
[07:49:05] <dbaupp> )
[07:49:16] <klutzy> but it's unfortunate I'll never use it for installing rust :p
[07:49:17] <Heather> dbaupp https://github.com/mozilla/rust/pull/9732/files#diff-ac50789ac280f6819d8d10b65156ae85R24 <- is this thing still in rust repo?
[07:49:23] <dbaupp> strcat: not yet; finishing exams tomorrow (yay!) so I'll have more time then
[07:49:24] <strcat> klutzy: it's great :P, it's a perfect version to use for stuff like nightlies
[07:49:31] <ssbr> dbaupp: haha, thanks :)
[07:49:48] <dbaupp> Heather: I don't know, you'll have to check
[07:49:56] <strcat> klutzy: https://github.com/thestinger/packages/blob/master/rust-git/PKGBUILD#L20 magic!
[07:50:17] <strcat> and... it even works for stable releases
[07:50:25] <strcat> since it will just output 'tag' if it matches a tag directly
[07:50:31] <ssbr> I'll do all that tomorrow. It's way past bedtime now.
[07:51:26] <strcat> (and it's even always-incrementing in the face of non-linear history so.. yay ;p)
[07:51:36] <dbaupp> Sharp: were they recorded?
[07:51:58] <Sharp> I believe so.
[07:52:19] <strcat> I have a thing for linear history now though :(
[07:52:22] <Sharp> Someone was definitely recording, but I'm not sure if it was in an official capacity.
[07:52:33] <Heather> dbaupp I see there is run::process_output("git", [~"clone", :(
[07:52:47] <strcat> libgit2 <3
[07:52:49] <Heather> in source_control.rs
[07:53:08] <dbaupp> Sharp: we'll see, hopefully they'll be up on https://air.mozilla.org/ soon
[07:53:20] * strcat added Gc<T> so he can remove @ from the tutorial now ;p
[07:53:36] <Heather> strcat someone must provide bindings :(
[07:53:52] <strcat> it's still easier than calling out to git without premade bindings
[07:54:13] <dbaupp> strcat: you added a complete and efficient GC to implement Gc<T> too, right?
[07:54:17] <Sharp> Yeah, hopefully.  They were good talks.
[07:54:18] * dbaupp is hopeful...
[07:54:28] <strcat> dbaupp: well it uses @, but I'm tempted to make it just leak until the end of the task
[07:54:37] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[07:54:51] <dbaupp> strcat: yeah, avoid the reference counting sadness we currently have
[07:55:09] <strcat> well just so people don't depend on it being a refcounting implementation
[07:55:48] <strcat> rust-core needs more concurrent data structures :(
[07:56:16] <strcat> I really miss having a concurrent hashmap
[07:56:24] <strcat> message passing can be a real pain sometimes.
[07:56:26] <dbaupp> write one?
[07:56:38] <strcat> well the hard part is deciding on which kind to implement
[07:56:57] <strcat> that's why rust-core doesn't even have a hash table yet ;P
[07:56:58] <dbaupp> yup
[07:57:05] <strcat> SipHash 2-4 is honestly too slow to use everywhere
[07:57:26] *** Joins: paupau (paul@moz-F71C4F3E.public.monkeybrains.net)
[07:57:30] <strcat> although maybe if I write a non-streaming version special-cased for contiguous blocks of memory it won't be so slow...
[07:57:31] <strcat> doubt it though
[07:57:34] <Luqman> ChrisMorgan: i'm not sure, i tried downgrading but to no avail. I can just build on a different machine but it's much less beefier. What was the reason you're stuck on wheezy again?
[07:57:54] <dbaupp> strcat: we need hashmaps parameterised by hash and by allocator
[07:57:58] <dbaupp> *could have
[07:58:03] <strcat> right that's what C++ does
[07:58:07] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[07:58:15] <strcat> well, kind of ;p
[07:58:19] <paupau> hello :) good meetup
[07:58:22] <strcat> dbaupp: http://en.cppreference.com/w/cpp/container/unordered_map
[07:58:32] <strcat> C++ containers are more flexible though
[07:58:39] <strcat> because you can override the default "trait" it uses
[07:58:46] <strcat> for example a tree defaults to operator<
[07:58:56] <strcat> but you can use std::greater instead for reverse order
[07:59:06] <strcat> or just a different order for a specific container.
[07:59:11] * strcat wants that for rust
[07:59:27] <strcat> overriding traits used for a generic function? seems possible
[07:59:35] <strcat> generic function/type
[07:59:57] <wycats_>  dbaupp: yeah but it's spelled Yehuda
[08:00:05] <dbaupp> wycats_: oh, my apologies :)
[08:00:20] <wycats_> No problem :)
[08:00:27] <wycats_> I'm so glad that talk is over
[08:00:33] <dbaupp> strcat: yeah, that would be neat
[08:00:34] <wycats_> I was so nervous :p
[08:01:02] <dbaupp> wycats_: you've only been using Rust for a few weeks, right?
[08:01:02] <strcat> dbaupp: anyway rust's stdlib hashmap is faster than unordered_map... with the same hash
[08:01:12] <strcat> but SipHash makes it look bad by default
[08:01:19] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: Textual IRC Client: www.textualapp.com)
[08:01:19] <wycats_> 1.5 weeks :)
[08:01:27] <wycats_> I started last Monday
[08:01:28] <strcat> and for example.... I really doubt rustc needs to be secure against DoS
[08:01:31] <Sharp> wycats_: Oh, sorry.
[08:01:35] <Sharp> My bad.
[08:01:59] <strcat> it doesn't really matter if someone can figure out inputs that make rustc take ages
[08:02:03] <strcat> you could already *do that*
[08:02:09] <dbaupp> you're braver than me, talking to the foremost experts with less than 2 weeks of practice. :P
[08:02:15] <paupau> wycats_: your talk was great! cool to see all this prod rust usage
[08:02:41] <dbaupp> strcat: yeah, definitely
[08:02:53] *** Quits: nlminhtl (ignotus@moz-BA3DE7EF.volia.net) (Quit: Konversation terminated!)
[08:03:36] <Sharp> wycats_: BTW, I was talking about http://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Classes#Private (example two).  I agree it's not the same as C++'s syntax :)
[08:03:50] <derek_c> can you have generic struct?
[08:04:25] <wycats_> dbaupp: yeah it was terrifying 
[08:04:52] <wycats_> Ruby 2.1 returns a symbol from def so it would work
[08:05:07] <Sharp> Huh, really?
[08:05:18] <wycats_> private def foo() end
[08:05:22] <Sharp> That's cool.
[08:05:25] <pjenvey> I liked how wycats' talk had code from 3 diff langs on many slides
[08:05:26] <Sharp> I assume just to support that.
[08:05:27] <wycats_> I suspect for this precise reason
[08:05:50] <wycats_> pjenvey: heh... Kind of crazy
[08:05:52] <dbaupp> derek_c: yes, `struct Foo<T> { generic_field: Option<T> }` is valid
[08:06:07] <pjenvey> it was fun =]
[08:06:08] <derek_c> dbaupp: yeah just figured it out. thanks :)
[08:06:13] <wycats_> I elided a lot too, if you can believe it
[08:06:32] <derek_c> what's the easiest way to get a string representation of a struct that contains only printable fields?
[08:06:40] <wycats_> I was amazed at how helpful rust wws
[08:06:41] <derek_c> I have a struct that contains only ints
[08:06:42] <wycats_> Was
[08:06:55] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[08:06:56] <dbaupp> derek_c: `#[deriving(ToStr)] struct Foo { ... }`, my_foo.to_str()
[08:07:08] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[08:07:16] <dbaupp> derek_c: or, if it's purely debugging, `println!("{:?}", my_foo)`
[08:07:51] <wycats_> dbaupp: I was about to say the println one but I'm on my phone :p
[08:08:04] <Sharp> wycats_: I still think you are crazy to deploy Rust in production at this stage.  Awesome, but crazy.
[08:08:10] * dbaupp has the advantage of a full keyboard :P
[08:08:15] <strcat> Sharp: why is it crazy?
[08:08:21] <dbaupp> strcat: for https://github.com/mozilla/rust/issues/10586 , have you profiled it?
[08:08:30] <strcat> I would certainly trust a rust program/library more than a C/C++ one
[08:08:32] <dbaupp> (if so, what sort of numbers?)
[08:08:33] <wycats_> Would I be crazier to ask people to run my C++ code in their apps?
[08:08:36] <derek_c> dbaupp: thanks!  That's super useful to know
[08:08:45] <strcat> clang has plenty of compiler bugs too
[08:08:48] <derek_c> so much undocumented knowledge :(
[08:08:49] <Sharp> strcat: Syntax is still changing quite a bit, as is stdlib support.
[08:08:54] <strcat> Sharp: why does that matter?
[08:08:57] <dbaupp> derek_c: deriving is documented :P http://static.rust-lang.org/doc/master/rust.html#deriving
[08:09:10] <wycats_> (The answer is you should never run my c++ code in your apps :p)
[08:09:10] <strcat> it takes a minute to update from 0.x -> 0.(x+1)
[08:09:22] <wycats_> Worst case I still have a compiled binary
[08:09:27] <derek_c> dbaupp: my bad :)
[08:09:35] * strcat shrugs
[08:09:36] <Sharp> Depends on the size of your program, I suppose.
[08:09:45] <wycats_> YOU CAN PRY THE COMPILED BINARY FROM MY COLD DEAD HANDS
[08:09:54] <Sharp> Haha
[08:10:11] <derek_c> dbaupp: can you make an arbitrary trait derivable?
[08:10:13] *** Quits: ChrisOei (chrisoei@moz-30D80888.hsd1.ca.comcast.net) (Ping timeout)
[08:10:14] *** Joins: nkoep (nik@moz-AAC1F459.pool.mediaways.net)
[08:10:17] <wycats_> I can keep using an old version of rust etc
[08:10:26] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[08:10:27] <strcat> if you use C++ you'll end up using third party libs for lots of the functionality
[08:10:33] <strcat> and it's not like those are going to be very stable
[08:10:36] <wycats_> I'm honestly not too concerned
[08:10:37] <dbaupp> derek_c: no, they're hardcoded into the compiler (similar to format!() and fail!() and so on)
[08:10:46] <wycats_> It's karma for me making people use ember 
[08:10:46] <derek_c> kk thanks
[08:12:32] <Sharp> Hey, if you want to use Rust in production, more power to you :)  I personally would rather wait until it hits 1.0 just so I don't have to maintain code for an unsupported version, but I do see where you are coming from.
[08:13:10] <wycats_> I have heard people say that about ember so now I get to feel it from the other side
[08:13:18] <wycats_> I consider it a learning experience :p
[08:13:20] <Sharp> Is Ember not 1.0?
[08:13:37] <wycats_> It is now
[08:13:42] <wycats_> It took us 2.5 years
[08:13:48] <andrew-d> I like how the guy from OpenDNS mentioned they have a buildbot that repeatedly builds their code against Rust master, and then they can pinpoint which commit broke things.  I'd be happy running Rust in prod if I had that kind of infrastructure :)
[08:14:01] <Sharp> andrew-d: Rust CI!
[08:14:14] <andrew-d> Well, yeah, but non-public :P
[08:14:26] <derek_c> is it a common pattern to make an empty struct just for the sake of implementing some trait?
[08:14:36] <andrew-d> P.S. Thanks for the cool talk, wycats_ :-)
[08:15:05] <Sharp> wycats_: Neat!  I remember hearing about it quite a bit as the (spiritual) successor to SproutCore.
[08:15:05] <wycats_> Yeah I'll probably set that up soon
[08:15:18] <Sharp> Except vastly more popular, of course.
[08:15:23] <wycats_> Hahaha
[08:15:25] <wycats_> Yeeeep
[08:15:44] <strcat> derek_c: I wouldn't say common, but the use case for unit structs is implementing some trait and using them with generic code when you don't actually need any state
[08:15:45] <wycats_> I don't like working on unpopular software
[08:15:51] <tikue__> derek_c: yeah it'd be cool if modules could implement traits
[08:15:54] <wycats_> WHAT AM I DOING HERE
[08:15:55] <TeXitoi> derek_c: why do you ask that? I would say no, but I've done it once
[08:16:04] <Sharp> Making Rust popular? :)
[08:16:10] <strcat> tikue__: seems like that's what unit structs are for
[08:16:15] <wycats_> I will try to help :)
[08:16:30] <strcat> for example, rust-core will have allocator type parameter for containers and with_alloc ctors taking an allocator instance
[08:16:39] <derek_c> thanks for the answer :)
[08:16:43] <strcat> the default allocator is a unit struct using malloc/free/realloc
[08:17:01] <wycats_> module traits could be useful if you have several packages that implement variants of some interface
[08:17:04] <strcat> but you can have a stateful allocator like an arena, so the containers have to store it
[08:18:02] <strcat> modules aren't types ;\, I don't really see what's wrong with unit struct
[08:18:04] <strcat> s
[08:18:18] *** Quits: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP) (Ping timeout)
[08:18:28] <strcat> no point of having unit structs and () if we're not actually going to use them in generic code
[08:21:46] *** flaper87|afk is now known as flaper87
[08:22:39] *** Quits: paupau (paul@moz-F71C4F3E.public.monkeybrains.net) (Quit: night all)
[08:23:27] <tikue__> fair enough
[08:23:56] <tikue__> strcat: when you say "rust-core will have..." you mean once custom allocation is supported by rust right?
[08:24:04] <strcat> tikue__: no
[08:24:11] <strcat> once generic dtors work it will have allocators
[08:24:19] <strcat> https://github.com/thestinger/rust-core/blob/master/core/vec.rs
[08:24:26] <tikue__> yeah i'm looking at that right now actually
[08:24:29] <tikue__> i'm just confused because
[08:24:30] <strcat> you can see I already wrote it for vectors at least, but I can't use it in the dtor
[08:24:42] <strcat> so types wrapping vectors can't pretend to use it yet either :(
[08:24:46] *** Parts: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) ()
[08:24:55] <strcat> https://github.com/thestinger/rust-core/blob/master/core/concurrent.rs like, even these could have an allocator param
[08:25:05] <strcat> they'd just pass it along to Deque and PriorityQueue, which pass it along to Vec
[08:25:32] <strcat> tikue__: it's true that I'll need to define my own unique ptr too.
[08:25:40] <tikue__> ok that's what i'm wondering i suppose
[08:25:46] <tikue__> ok i understand now
[08:27:06] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:29:51] *** Joins: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP)
[08:32:54] *** Quits: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP) (Ping timeout)
[08:35:40] *** Joins: Ferreus (ferreus@moz-AB95F22C.dip0.t-ipconnect.de)
[08:38:45] *** Joins: ozkriff__ (Mibbit@6014F6.BC46A4C1.71211713.IP)
[08:39:01] <derek_c> how do you refer to a generic type inside a struct definition?
[08:39:02] *** Joins: ChrisOei (chrisoei@moz-30D80888.hsd1.ca.comcast.net)
[08:39:23] <derek_c> rustc is complaining about undeclared type name
[08:40:02] <strcat> rusti: struct Foo<T> { x: T }
[08:40:02] -rusti- ()
[08:40:04] <strcat> you mean like that?
[08:40:16] <strcat> rusti: struct Foo<'a, T> { x: T, y: &'a int }
[08:40:17] -rusti- <anon>:9:42: 9:45 error: Illegal lifetime 'a: only 'self is allowed as part of a type declaration
[08:40:17] -rusti- <anon>:9          struct Foo<'a, T> { x: T, y: &'a int }
[08:40:17] -rusti-                                                    ^~~
[08:40:17] -rusti- error: aborting due to previous error
[08:40:17] -rusti- application terminated with error code 101
[08:40:19] <strcat> er, 0.8
[08:40:22] <strcat> in master that works ;p
[08:41:12] <TeXitoi> rusti: struct Foo<'self, T> { x: T, y: &'self int }
[08:41:12] -rusti- ()
[08:41:28] *** Quits: ChrisOei (chrisoei@moz-30D80888.hsd1.ca.comcast.net) (Ping timeout)
[08:41:29] <derek_c> trait Foo<T> {fn whatever(x: T);}; struct Foo {x: ~Foo<T>}
[08:41:36] <derek_c> rusti: trait Foo<T> {fn whatever(x: T);}; struct Foo {x: ~Foo<T>}
[08:41:38] -rusti- pastebinned 8 lines of output: http://sprunge.us/FFGS
[08:41:47] <derek_c> rusti: trait Foo<T> {fn whatever(x: T);}; struct Bar {x: ~Foo<T>}
[08:41:48] -rusti- <anon>:9:64: 9:65 error: use of undeclared type name `T`
[08:41:48] -rusti- <anon>:9          trait Foo<T> {fn whatever(x: T);}; struct Bar {x: ~Foo<T>}
[08:41:48] -rusti-                                                                          ^
[08:41:48] -rusti- error: aborting due to previous error
[08:41:49] -rusti- application terminated with error code 101
[08:42:07] <wycats_> where is T coming from in that example?
[08:42:16] <strcat> wycats_: in which example? mine?
[08:42:21] <wycats_> no derek_c's
[08:42:30] <strcat> oh
[08:42:31] <wycats_> he has ~Foo<T> but T doesn't refer to anything
[08:42:40] <derek_c> I'm confused
[08:42:42] <strcat> derek_c: there's no T in scope in Bar
[08:42:51] <strcat> T is a type parameter used in the trait Foo
[08:42:54] <strcat> Bar isn't a generic struct
[08:42:55] <wycats_> does Rust have generic structs?
[08:42:58] <strcat> wycats_: yes
[08:43:04] <wycats_> then that's what he wants :)
[08:43:07] <strcat> rusti: struct Foo<A> { x: A }
[08:43:07] -rusti- ()
[08:43:14] <derek_c> rusti: trait Foo<T> {fn whatever(x: T);}; struct Bar<T> {x: ~Foo<T>}
[08:43:14] <strcat> rusti: struct Foo<A, B> { x: A, y: A, z: B }
[08:43:15] -rusti- ()
[08:43:15] -rusti- ()
[08:43:21] <strcat> derek_c: T isn't a special name or anything
[08:43:21] <derek_c> rusti: trait Foo<T> {fn whatever(x: T);}; struct Bar<T> {x: ~Foo<T>}
[08:43:22] -rusti- ()
[08:43:26] <strcat> it's just a naming convention
[08:43:35] <derek_c> yeah I know, I guess I was confused
[08:43:39] <strcat> A, B, C and T, U, V are the common generic type parameter naming conventions
[08:43:58] <wycats_> derek_c: the problem with your original example was that you used T as a type name when it wasn't in scope
[08:44:03] <wycats_> it was in scope in the trait
[08:44:11] <derek_c> I see
[08:44:11] <wycats_> but then you closed the trait definition and went on to define a separate struct
[08:44:47] <wycats_> so you were just defining a struct and trying to say "this struct contains Foos of type T"
[08:44:51] <wycats_> but you never said what type T was
[08:45:18] *** Quits: nkoep (nik@moz-AAC1F459.pool.mediaways.net) (Ping timeout)
[08:45:23] <derek_c> right, makes sense
[08:45:26] <derek_c> thanks!
[08:45:38] <wycats_> struct Bar<T> { x: ~Foo<T> } is saying: "I want a struct Bar for any kind of T, and then its x field will be made up of Foo<T>"
[08:47:53] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[08:47:56] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: nejucomo)
[08:48:24] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[08:48:47] <ozkriff__> Hello. I can`t build glfw-rs with latest rust-nightly - https://gist.github.com/ozkriff/7577614 :( Can anybody help me?
[08:49:36] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[08:49:57] <derek_c> I'm trying to write a mapreduce framework.  Here is what I've got: http://pastebin.com/EkE2KGdC
[08:50:16] <derek_c> this code compiles, but all those types hurt my eyes.  Is there a better way to do it?
[08:50:36] <wycats_> which types are bothering you?
[08:51:00] <strcat> derek_c: does it need to be a trait?
[08:51:13] <wycats_> it makes sense as a trait, no?
[08:51:20] <strcat> a job could be described by proc()
[08:51:24] <Sharp> Why are three key/value pairs hardcoded in?
[08:51:34] *** Joins: z0w0 (zack@moz-5E840EF3.lns3.woo.bigpond.net.au)
[08:51:34] <wycats_> strcat: meh
[08:51:46] <wycats_> derek_c: scratch that I see what you're unhappy with
[08:52:00] <derek_c> strcat: I'm not sure what you mean
[08:52:07] <strcat> a closure can describe a job
[08:52:23] <strcat> heap closures can be sent between tasks
[08:52:45] <derek_c> ah, that's an interesting idea
[08:53:15] <wycats_> good night folks :)
[08:53:23] <derek_c> good night
[08:53:39] *** Quits: alonlevy (alon@moz-FED7051B.bb.netvision.net.il) (Ping timeout)
[08:55:18] *** Quits: madmoose (Hat@moz-E1973371.nerp.net) (Ping timeout)
[08:55:21] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Ping timeout)
[08:55:52] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[08:56:40] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[08:56:50] *** Joins: alonlevy (alon@moz-C8A0236.bb.netvision.net.il)
[08:58:56] *** Quits: quasisphere (btw@DC685DC2.94302614.1D0D91FF.IP) (Ping timeout)
[09:00:10] *** Joins: nkoep (nik@moz-16EFBB02.vpn.rwth-aachen.de)
[09:01:23] *** Joins: madmoose (Hat@moz-E1973371.nerp.net)
[09:01:35] *** Joins: peterdn (chatzilla@moz-30BAAE88.as13285.net)
[09:01:35] <derek_c> is there a trait that has operations for converting to/from bytes?
[09:04:47] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[09:07:38] *** Joins: quasisphere (btw@DC685DC2.94302614.1D0D91FF.IP)
[09:08:12] <Yurume> derek_c, http://static.rust-lang.org/doc/master/std/to_bytes/trait.ToBytes.html
[09:08:38] <derek_c> just found that, now looking for from_bytes
[09:09:09] <Yurume> that'd be FromIterator<u8> I think.
[09:09:09] *** Quits: alonlevy (alon@moz-C8A0236.bb.netvision.net.il) (Ping timeout)
[09:09:10] <Yurume> http://static.rust-lang.org/doc/master/std/iter/trait.FromIterator.html
[09:09:45] <Yurume> so, ToBytes is a proxy to more primitive IterBytes (since you don't need to construct a vector of bytes to get a hash, for example)
[09:10:03] *** Joins: Soft (soft@moz-EC8D39F.yok.fi)
[09:10:16] *** Joins: moostik (Icedove@moz-63ED7231.w82-121.abo.wanadoo.fr)
[09:10:22] <Yurume> and bytes.iter().collect() is a proxy to more primitive Iterator + FromIterator<u8>.
[09:11:01] <derek_c> Yurume: I see.  I'm basically trying to write a function that takes a type that can be serialized/deserialzed.  What do you think is the best way to do it?
[09:11:53] <Yurume> http://static.rust-lang.org/doc/master/extra/serialize/index.html
[09:12:41] <Yurume> and you can use #[deriving(Decodable)] etc for automatically generating lots of boilerplate codes required for serialization.
[09:12:45] <Sharp> Encodeable / Decodable in particular.  Yeah.
[09:14:14] <Yurume> derek_c, see also Decoder/Encoder traits in extra::serialize, there are some serialization formats (namely: JSON and EBML) that use this interface.
[09:15:07] <Yurume> so you'd rather make a Decoder/Encoder that implements your favorite serialization format than making your own interface up.
[09:15:15] <Yurume> you'd better make*
[09:16:10] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[09:16:32] <derek_c> Thanks!  This is super helpful.  However I'm confused as why encode() doesn't return anything
[09:16:48] <ChrisMorgan> Luqman: my tablet is stuck on Ubuntu Precise as it's the latest available armel release and that's what I have installed; the earliest release of Ubuntu with glibc 2.17 is armhf only; I can't find any way to install such a later version as I need a preinstalled image, because it's running as a secondary OS under the Android kernel.
[09:16:48] <Yurume> (you are *forced* to use Decoder/Encoder interfaces since they contain methods that Decodable/Encodable calls, but I tried to make a point that making it internal might be not a good choice)
[09:16:50] <derek_c> shouldn't it return ~[u8] or something?
[09:17:37] <Yurume> encode() in what?
[09:17:51] <derek_c> in Encodable
[09:18:45] <derek_c> So, given something that is Encodable, how do I actually encode it to get a bunch of bytes?
[09:19:14] <Yurume> derek_c, make an Encoder that writes to its internal buffer, call `encode` with that encoder, and consume that Encoder to get the finished buffer
[09:19:26] <Luqman> ChrisMorgan: can you use debian instead? 
[09:19:33] *** Joins: doomlord_ (servitor@moz-4625DF14.range86-184.btcentralplus.com)
[09:20:25] <ChrisMorgan> Luqman: dunno, haven't tried. The main thing is that I need a preinstalled image; once I've got that, I should be able to nut out any incompatibilities.
[09:20:53] <strcat> ChrisMorgan: which platform is it?
[09:21:20] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Client exited)
[09:21:25] *** Quits: nrc|afk (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[09:21:34] <ChrisMorgan> strcat: base OS is Android, with 2.6.X kernel. It's then using debootstrap to run Ubuntu/Debian inside it.
[09:21:48] <strcat> ah
[09:22:10] <ChrisMorgan> http://sven-ola.dyndns.org/repo/debian-kit-en.html
[09:23:06] <strcat> yeah I had Arch ARM on my old phone before it killed itself
[09:23:09] <strcat> in a chroot
[09:23:22] * strcat has a dumb phone for now :(
[09:24:03] * ChrisMorgan didn't like the chroot approach because it made it difficult to share between the two conveniently
[09:24:15] <strcat> bind mount?
[09:24:30] <derek_c> Yurume: I will think about that.  Thanks a lot :)
[09:24:32] <strcat> you can mount a dir at multiple locations in the fs tree
[09:24:40] *** Quits: derek_c (derek@moz-B8433164.cit.cornell.edu) (Quit: Leaving)
[09:24:52] <strcat> a chroot can have a view of the actual root at /mnt/root, for example
[09:26:07] <Luqman> ChrisMorgan: http://linuxonandroid.org/downloads/ claims to have debian testing but no idea whether it's armel or armhf
[09:27:19] <ChrisMorgan> Luqman: interesting: Debian Wheezy is still down at glibc 2.13
[09:28:09] <Luqman> yea, debian stable is quite old
[09:28:19] <strcat> ChrisMorgan: arch arm! ;p
[09:28:29] <strcat> once you update it you'll have the latest stable of everything... ;)
[09:29:48] <strcat> sadly they don't build rust on their buildbots yet
[09:29:58] <ChrisMorgan> strcat: I'm not averse to experimentation, but it's a comparatively tricky balance here; would arch even run on a 2.6 (Android) kernel? Would it guzzle disk space like *everyone* has more than a 1GB disk?
[09:30:00] *** Quits: Kxepal (Miranda@moz-CC1FB375.pppoe.mtu-net.ru) (Ping timeout)
[09:30:23] *** Quits: nkoep (nik@moz-16EFBB02.vpn.rwth-aachen.de) (Ping timeout)
[09:30:45] *** Joins: eddyb_ (Mibbit@8E114AB7.DB164E75.F91450E5.IP)
[09:31:03] <strcat> depends on how old the kernel is
[09:31:15] *** Joins: ChrisOei (chrisoei@moz-30D80888.hsd1.ca.comcast.net)
[09:31:26] <strcat> the minimum supported version the official arch glibc uses is 2.6.32
[09:31:35] <strcat> I assume the arch arm binaries are the same
[09:31:54] *** Quits: eddyb_ (Mibbit@8E114AB7.DB164E75.F91450E5.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:32:02] *** Joins: eddyb_ (Mibbit@8E114AB7.DB164E75.F91450E5.IP)
[09:32:16] <strcat> it's just the oldest support longterm kernel release
[09:32:18] <eddyb_> does anyone know of a better SFTP client than WinSCP?
[09:32:33] <strcat> when they drop support for 2.6.32 it will go to 2.6.34 or something
[09:32:35] *** Joins: Kxepal (Miranda@moz-E7A71549.pppoe.mtu-net.ru)
[09:32:39] <eddyb_> my phone is dead, and I store my portable workspace on it (32GB of goodness)
[09:32:45] * strcat isn't sure how long they choose to support those
[09:32:50] <strcat> https://www.kernel.org/
[09:33:11] <eddyb_> 2.x must be painful to maintain
[09:33:19] *** Quits: ChrisOei (chrisoei@moz-30D80888.hsd1.ca.comcast.net) (Ping timeout)
[09:33:27] <strcat> eddyb_: 2.6.x -> 3.x was basically an arbitrary name change
[09:33:34] <strcat> 2.6.32 isn't *that* old
[09:33:46] <ChrisMorgan> My tablet's kernel is 2.6.39.4.
[09:33:57] <strcat> ChrisMorgan: I think that's more than new enough then
[09:34:01] <eddyb_> I mean, it only gets backports, security patches, right?
[09:34:07] <strcat> eddyb_: yes
[09:34:22] <ChrisMorgan> Well, the linuxonandroid stuff looks like it should work, though I'll need to strip it down further...
[09:35:06] <ChrisMorgan> I mean, seriously—including OpenBox in your "core" distribution? I don't need no window manager!
[09:35:14] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[09:35:21] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[09:35:34] <strcat> ChrisMorgan: don't know why they'd do that ;p
[09:36:26] <ChrisMorgan> Well, I'll see what happens when I get to it (wow, that was vague!).
[09:38:49] *** Joins: sigma (sigma@moz-D4F04D48.range86-174.btcentralplus.com)
[09:39:20] <ChrisMorgan> I wish the Transformer TF101 didn't have such an awful keyboard. It actually has genuine ghosting issues—I thought that had been a completely solved problem!
[09:39:37] *** Joins: ChrisOei (chrisoei@moz-30D80888.hsd1.ca.comcast.net)
[09:41:23] *** Quits: ChrisOei (chrisoei@moz-30D80888.hsd1.ca.comcast.net) (Ping timeout)
[09:41:54] *** Quits: skal (skal@D5C2D2DF.E4265FCD.E481B5B.IP) (Quit: leaving)
[09:44:31] *** Joins: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP)
[09:44:55] <cmr> ChrisMorgan: I've been thinking about buynig one of those
[09:46:52] <ChrisMorgan> cmr: I don't know what the later models are like, but the TF101's keyboard is singularly poor. Sure, I can type on it fine now, but it took significant adaptation, and it still involves things like lifting the finger off the shift key for pretty much anything other than a letter or it may "stick". (This wreaks havoc in various Vim things.)
[09:48:55] *** Quits: GeneralMaximus (ankur@377BCDBB.2DC4D51C.BE90E62C.IP) (Ping timeout)
[09:49:10] <ChrisMorgan> Putting the "disable wi-fi" key next to the back-key-in-the-place-of-the-escape-key-and-which-you-set-in-the-terminal-emulator-to-function-as-escape also causes a bit of trouble, but I haven't gone to the trouble of shifting it in the keybindings.
[09:49:19] *** Joins: nkoep (nik@moz-AAC1F459.pool.mediaways.net)
[09:49:47] *** Joins: fabiand (fabiand@moz-430018B7.adsl.alicedsl.de)
[09:49:51] <ChrisMorgan> (Modifying the keybindings in Android seems to require rooting the device, remounting the ro system partition as rw and then modifying a text file. I did so to change Caps Lock to BackSpace.)
[09:50:06] <cmr> ChrisMorgan: From what I've heard, the later ones are of very poor build qualty
[09:52:35] <ChrisMorgan> My TF101 is a very handy device to have but certainly not at all fast and possessing a poor keyboard. Oh, and its microphone is junk too, but I didn't get it new so I don't know if its lousiness is typical of the model—I don't think it could be or there would be serious outcry in reviews rather than no comment.
[09:55:21] <cmr> It'd be replacing my Acer Aspire One
[10:02:45] <ChrisMorgan> rust-http `time make all` (makes codegen, the libhttp crate and then five examples, all -O -Z debug-info) on my six-year-old Core 2 Duo: 50s. On my TF101: 7m21s.
[10:03:47] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[10:03:51] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Quit: Leaving...)
[10:05:40] <ChrisMorgan> Oh, and the Core 2 Duo machine was doing about 2.33 seconds more work as it has rustdoc, while on the tablet I just have a stub rustdoc binary (at the scale of 8x, that would be 20 seconds more on the tablet).
[10:06:23] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[10:06:24] <strcat> ChrisMorgan: what about --opt-level=1?
[10:06:54] <ChrisMorgan> strcat: that'll just be a very long time rather than an extremely long time :P
[10:07:06] *** Joins: andre (andre@CA528A4A.45A4338E.8EE27E6.IP)
[10:07:22] *** Quits: LimeBurst (me@247D1419.D73964AC.27A8748.IP) (Quit: leaving)
[10:07:23] *** Joins: GeneralMaximus (ankur@A6F89B8C.1D173DC.274D17D6.IP)
[10:12:22] *** Quits: KindOne (KindOne@moz-8F484926.dynamic.ip.windstream.net) (Ping timeout)
[10:15:59] *** Joins: LimeBurst (me@247D1419.D73964AC.27A8748.IP)
[10:16:13] *** Joins: KindOne (KindOne@moz-7FE569E0.dynamic.ip.windstream.net)
[10:21:21] *** Joins: alonlevy (alon@moz-CC9891F7.cable.012.net.il)
[10:23:23] *** Quits: Soft (soft@moz-EC8D39F.yok.fi) (Ping timeout)
[10:23:23] <eddyb_> enterprise needs to die
[10:23:26] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Quit: Leaving.)
[10:23:33] <eddyb_> microsoft, oracle, etc. pls. die already. burn in hell
[10:23:38] <eddyb_> oh, and java
[10:28:17] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[10:31:05] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Client exited)
[10:32:30] *** Joins: fyolnish (fyolnish@moz-44FFC4CF.uqwimax.jp)
[10:32:54] *** Quits: jdm (jdm@moz-99690620.hinet-ip.hinet.net) (Quit: Lost terminal)
[10:33:02] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[10:34:05] <cmr> klutzy: I have 1714, as of now
[10:34:26] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[10:36:05] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Client exited)
[10:39:10] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[10:40:01] *** Quits: eddyb_ (Mibbit@8E114AB7.DB164E75.F91450E5.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:41:17] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[10:41:19] *** Joins: eddyb_ (Mibbit@8E114AB7.DB164E75.F91450E5.IP)
[10:41:31] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[10:41:31] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[10:43:17] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[10:48:13] *** Quits: ozkriff__ (Mibbit@6014F6.BC46A4C1.71211713.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:54:12] *** Joins: Sorella_ (quildreen@2392D500.600E39D3.1ED99692.IP)
[10:54:44] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:57:46] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[10:57:51] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[10:58:03] *** Quits: alonlevy (alon@moz-CC9891F7.cable.012.net.il) (Ping timeout)
[10:58:43] *** Joins: alonlevy (alon@moz-88C79C44.inter.net.il)
[10:59:47] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[11:00:12] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[11:01:49] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[11:03:03] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[11:03:52] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[11:04:51] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[11:05:53] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[11:06:41] *** Quits: fyolnish (fyolnish@moz-44FFC4CF.uqwimax.jp) (Quit: Bye)
[11:07:39] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[11:07:55] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[11:08:10] *** Quits: abacus (snoonan_mo@moz-F95B9243.hsd1.wa.comcast.net) (Ping timeout)
[11:08:19] <strcat> bstrie: around?
[11:08:19] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[11:08:29] <strcat> bstrie: can you ban this stupid bot http://www.reddit.com/user/ComplimentingBot
[11:08:39] *** Joins: [a]bacus (snoonan_mo@moz-F95B9243.hsd1.wa.comcast.net)
[11:08:50] * strcat thought he had a message to reply to...
[11:08:57] *** [a]bacus is now known as abacus
[11:09:59] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[11:10:04] <dbaupp> strcat: you don't like knowing that you make circuits skip a beat?
[11:11:13] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[11:11:22] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[11:11:59] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131118212339])
[11:12:00] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[11:12:02] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[11:14:02] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[11:14:14] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[11:14:21] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[11:16:04] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[11:16:22] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[11:17:33] *** Quits: doomlord_ (servitor@moz-4625DF14.range86-184.btcentralplus.com) (Ping timeout)
[11:18:20] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[11:18:32] *** Quits: eddyb_ (Mibbit@8E114AB7.DB164E75.F91450E5.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:18:46] *** Quits: alonlevy (alon@moz-88C79C44.inter.net.il) (Ping timeout)
[11:20:36] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[11:20:48] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[11:20:58] *** Quits: arodier74 (Thunderbir@moz-D6235B0B.in-addr.btopenworld.com) (Quit: arodier74)
[11:21:25] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[11:27:34] *** Joins: arodier74 (Thunderbir@moz-D6235B0B.in-addr.btopenworld.com)
[11:29:12] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[11:30:49] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[11:32:07] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[11:32:59] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[11:33:12] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[11:33:32] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[11:34:08] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[11:34:12] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[11:35:10] *** Quits: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP) (Quit: bbl)
[11:36:10] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[11:36:18] *** Quits: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP) (Quit: Leaving.)
[11:36:18] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[11:38:18] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[11:38:27] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[11:40:22] *** Joins: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP)
[11:41:52] *** Joins: dredozubov (dredozubov@CB26D6DA.3D7A84D1.319662EE.IP)
[11:43:11] *** Joins: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP)
[11:43:39] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[11:48:11] *** Quits: Kxepal (Miranda@moz-E7A71549.pppoe.mtu-net.ru) (Quit: Kxepal)
[11:48:20] *** Joins: Kxepal (Miranda@moz-E7A71549.pppoe.mtu-net.ru)
[11:48:47] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Quit: Savago)
[11:51:15] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[11:52:02] *** Quits: qr42 (qr42@moz-A112B358.oc.oc.cox.net) (Ping timeout)
[11:52:17] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[11:52:21] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[11:52:31] *** Joins: qr42 (qr42@moz-A112B358.oc.oc.cox.net)
[11:53:55] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[11:54:05] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[11:55:11] *** Quits: nkoep (nik@moz-AAC1F459.pool.mediaways.net) (Ping timeout)
[11:55:59] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[11:57:05] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[11:59:42] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[12:00:12] *** Quits: dredozubov (dredozubov@CB26D6DA.3D7A84D1.319662EE.IP) (Connection reset by peer)
[12:00:24] *** Joins: dredozubov (dredozubov@CB26D6DA.3D7A84D1.319662EE.IP)
[12:00:31] *** Quits: Jesin (Jesin@moz-63C897DA.res.lehigh.edu) (Ping timeout)
[12:01:14] *** Joins: Jesin (Jesin@moz-63C897DA.res.lehigh.edu)
[12:01:52] *** Quits: dredozubov (dredozubov@CB26D6DA.3D7A84D1.319662EE.IP) (Client exited)
[12:01:52] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[12:04:01] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[12:04:06] *** Joins: dredozubov (dredozubov@CB26D6DA.3D7A84D1.319662EE.IP)
[12:05:54] *** Quits: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca) (Ping timeout)
[12:06:25] *** Quits: jj2baile (jon@moz-345B5EBA.csclub.uwaterloo.ca) (Ping timeout)
[12:09:36] *** Joins: nkoep (nik@moz-1A684709.vpn.rwth-aachen.de)
[12:10:53] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[12:10:57] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:11:40] *** Joins: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca)
[12:11:46] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[12:11:57] *** Joins: jj2baile (jon@moz-345B5EBA.csclub.uwaterloo.ca)
[12:15:42] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[12:16:35] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[12:17:42] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[12:17:58] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[12:17:58] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[12:19:02] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[12:19:28] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[12:19:44] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[12:19:59] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[12:21:45] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[12:23:09] *** Quits: dredozubov (dredozubov@CB26D6DA.3D7A84D1.319662EE.IP) (Client exited)
[12:23:36] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[12:23:40] *** Joins: dredozubov (dredozubov@CB26D6DA.3D7A84D1.319662EE.IP)
[12:23:47] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[12:23:51] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[12:25:31] *** Quits: dredozubov (dredozubov@CB26D6DA.3D7A84D1.319662EE.IP) (Ping timeout)
[12:25:47] *** Joins: ofeldt (ofeldt@moz-87D16EF2.dip0.t-ipconnect.de)
[12:25:48] *** Joins: jvshahid (jvshahid@EDB221F0.CF5FEE20.2A2F4638.IP)
[12:25:49] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[12:25:51] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[12:26:50] *** Quits: ofeldt- (ofeldt@moz-37B4A0D4.dip0.t-ipconnect.de) (Ping timeout)
[12:27:09] *** Joins: axitkhurana (Adium@58A6234C.3BBD30E1.6AA50C35.IP)
[12:27:50] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[12:27:51] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[12:28:03] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[12:28:39] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[12:29:02] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[12:29:03] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[12:29:59] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[12:30:50] <eddyb> cmr: I saw your comment - I will try to get something together this week or the next one https://github.com/mozilla/rust/issues/10124#issuecomment-28948885
[12:31:56] <eddyb> I'm at the breaking point, might just snap and quit school permanently. that should massively boost my contribution potential
[12:32:09] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[12:32:12] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[12:32:39] *** Joins: dredozubov (dredozubov@F638467C.75E9D765.B83C62DE.IP)
[12:33:07] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[12:33:20] *** Joins: Soft (soft@moz-EC8D39F.yok.fi)
[12:33:54] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[12:34:11] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[12:34:12] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[12:35:07] *** Joins: steveklabnik (steveklabn@moz-1BAF77C5.nyc.res.rr.com)
[12:35:50] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[12:35:52] *** Quits: axitkhurana (Adium@58A6234C.3BBD30E1.6AA50C35.IP) (Quit: Leaving.)
[12:36:41] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[12:36:51] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[12:38:43] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[12:38:51] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[12:40:54] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[12:41:01] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[12:41:30] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[12:42:56] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[12:44:00] *** Quits: Sgeo (quassel@moz-D0F30617.dyn.optonline.net) (Connection reset by peer)
[12:45:14] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[12:47:15] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[12:47:57] <Zor> eddyb: what, you don't like enterprise java + uml to describe ALL THE THINGS? ;)
[12:48:02] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[12:48:15] <eddyb> Zor: BURN
[12:48:29] *** Quits: tikue__ (tkuehn@C1D209E0.28336FB0.689607DE.IP) (Quit: tikue__)
[12:48:31] <Zor> I've been there
[12:48:34] <Zor> I just quit
[12:48:48] <Zor> too much bullshit for a sane human to handle
[12:49:45] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[12:51:05] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[12:52:35] <cmr> One of my friends has a whole class on XML at his uni
[12:52:57] <cmr> The professor is almost a prophet of XML, and you daren't speak down upon it in his presence
[12:53:12] <ChrisMorgan> I was reading #10124 (RFC: variadic generics) in perplexity about what it made possible and its purpose; third time through it finally twigged. Yes, I like the sound of that! (The example that springs to my mind is OpenGL bindings which could make a function work for a Vector2D, (f32, f32), Vector3D, (f32, f32, f32), &c. while still having a nice call syntax, `.vertex(Vector2d)`, `.vertex(f32, f32)`, &c.)
[12:53:19] <Zor> cmr: joy
[12:53:46] <strcat> ChrisMorgan: I don't think it works for that
[12:54:19] <strcat> I don't reallythink you can have a limit on the number of parameters you accept
[12:55:11] <ChrisMorgan> strcat: looks to me like it'd enable that, with `fn vertex<T>(&mut self, ..T)` for vertex::<Vertex2D> and vertex::<(f32, f32)>. Am I misreading it after all?
[12:55:34] <strcat> ChrisMorgan: that's not what they are in C++, at least
[12:55:34] <ChrisMorgan> (Very loose syntax there, sorry.)
[12:55:37] <strcat> you don't need ..T
[12:55:48] <strcat> you already have [T, ..n] and &[T]
[12:56:02] <strcat> what you need is the ability to pass any number of parameters *of different types*
[12:56:08] <strcat> for example, in C++ I can write
[12:56:12] <strcat> zip(a, b, c, d)
[12:56:20] <strcat> where it returns std::tuple<A, B, C, D>
[12:56:25] <strcat> and std::tuple is a variadic generic
[12:56:26] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[12:56:37] <strcat> zip is a variadic template function
[12:56:39] * strcat shrugs
[12:57:06] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[12:57:22] * ChrisMorgan isn't sure
[12:57:33] <strcat> we can already pass N parameters of the same type
[12:57:36] <strcat> use a slice
[12:57:45] <strcat> sum([a, b, c])
[12:57:55] <strcat> which happens to be how C++ does those anyway
[12:58:16] <ChrisMorgan> Yeah, Python too if you're counting *args (and **kwargs) as that sort of thing.
[12:58:17] <strcat> it uses sum({1, a, b}), not sum(1, a, b), because variadic generics are for different types
[12:58:20] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[12:58:50] <strcat> ChrisMorgan: python doesn't have a comparable feature to variadic templates, though
[12:58:53] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[12:59:18] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[12:59:21] <ChrisMorgan> Python just has general duck typing which is a broader solution.
[12:59:26] <strcat> it doesn't have function overloading at all. and variadic templates build on compile-time template pattern matching + overloading
[12:59:28] <strcat> ChrisMorgan: it's not
[12:59:36] <strcat> it's less powerful and more powerful, but it's not the same thing
[12:59:38] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[12:59:40] *** Joins: marcusti (marcusti@moz-1E999C34.ppp-bb.dion.ne.jp)
[12:59:42] *** Quits: steveklabnik (steveklabn@moz-1BAF77C5.nyc.res.rr.com) (Quit: Lost terminal)
[12:59:56] <strcat> C++ templates are compile-time duck typing *with compile-time recursive pattern matching based on types*
[13:00:01] <ChrisMorgan> (Of course, suitable for a dynamic language like Python, not for static languages like C++/Rust.)
[13:00:12] <strcat> C++ templates are already duck typing
[13:00:19] <strcat> they're more powerful than *just* duck typing though
[13:00:21] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:00:24] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[13:00:28] <strcat> because you can define multiple templates with the same name and it pattern matches
[13:01:09] <strcat> so you can write a base case (0 type parameters) and the n-ary case (1 + N parameters) and recursively pattern match the list
[13:01:41] *** Quits: marcusti (marcusti@moz-1E999C34.ppp-bb.dion.ne.jp) (Quit: Leaving)
[13:01:46] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[13:02:13] <strcat> void print() { print_one("\n"); } template<typename T, typename ...List> print(T item, ...items) { print_one(item); print(items...); }
[13:02:23] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:02:24] <strcat> print(1, 5.5, "foo")
[13:02:26] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[13:02:49] <strcat> and at compile-time that will select the 2nd case (<int, [double, const char*]>)
[13:02:59] *** Joins: g3orge (g3orge@moz-369F78A7.access.hol.gr)
[13:03:01] <strcat> then <double, [const char*]>
[13:03:04] <strcat> then <const char *>
[13:03:11] <strcat> then <> (a call to print())
[13:03:17] <ChrisMorgan> Of course, you can achieve the functionality of that in Python with things like *args, but perhaps not as elegantly; certainly not syntactically.
[13:03:38] *** Quits: StarLight (StarLight@moz-278A921A.dynamic.avangarddsl.ru) (Ping timeout)
[13:03:58] <strcat> you can implement a type-safe variant type in C++
[13:04:15] <strcat> if you devoted a lot of work to it, you can have pattern matching (but each type has to implement the required bits)
[13:04:25] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:04:29] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[13:04:46] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[13:04:47] <strcat> anyway it's a different world than rust's generics
[13:05:11] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[13:05:14] <strcat> you either have comprehensible requirements for generics + sane error messages or insane power ;p
[13:05:51] <strcat> (although C++ can use static_assert to enforce requirements on either generic structs/functions, or enable_if)
[13:06:06] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[13:06:36] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:07:03] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[13:07:06] *** Quits: moostik (Icedove@moz-63ED7231.w82-121.abo.wanadoo.fr) (Ping timeout)
[13:07:36] *** Joins: StarLight (StarLight@moz-EE605696.dynamic.avangarddsl.ru)
[13:08:21] <tiffany> can you not embed trait objects with deriving(Clone)?
[13:08:22] <tiffany> ugh...
[13:08:38] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:08:39] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[13:08:45] <tiffany> I'm having so many issues trying to add custom matching rules to my parser
[13:08:46] <ChrisMorgan> tiffany: have you implemented Clone for the trait object?
[13:08:50] <tiffany> I tried that
[13:09:01] <tiffany> /home/tiffany/Projects/frscript/src/frscript/parse.rs:9:11: 9:16 error: mismatched types: expected `~parse::Parser<<V5305>>:Send` but found `&~parse::Parser<T>:Send` (expected trait parse::Parser but found &-ptr)
[13:09:03] <tiffany> /home/tiffany/Projects/frscript/src/frscript/parse.rs:9 #[deriving(Clone)]
[13:09:32] <eddyb> tiffany: how did you implement Clone?
[13:09:42] <tiffany> er
[13:09:46] <tiffany> what?
[13:09:57] <tiffany> I just stuck deriving(Clone) on it
[13:10:06] <ChrisMorgan> tiffany: you can't put #[deriving(Clone)] on the trait, it'd need to be an `impl Clone for ~Trait`. Can't think at once if that'd be feasible or not.
[13:10:22] <eddyb> I would have Trait: Clone
[13:10:32] <eddyb> so cloning is virtual
[13:10:44] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:10:53] * ChrisMorgan had momentarily forgotten that requirement
[13:10:53] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[13:10:58] <tiffany> I can't do Parser:Clone<T> or Parser<T>:Clone
[13:11:15] <ChrisMorgan> strcat: for your template example, I presume it's just the lack of type safety that's wrong with `macro_rules! print(() => ( print_one("\n"); ); ($item:expr, $($items:expr),*) => ({ print_one($item); print!($($items),*) }))`? [Example incomplete, but it gets the idea across.]
[13:11:20] <eddyb> tiffany: the latter should work, what's the error?
[13:11:48] <tiffany> error: expected `,` but found `:`
[13:11:50] <eddyb> impl Clone for ~Trait should return self.clone() as ~Trait
[13:12:05] <eddyb> tiffany: trait Parser<T>: Clone {...
[13:12:45] <ChrisMorgan> Probably `trait Parser<T: Clone>: Clone` will be needed.
[13:12:46] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:12:51] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[13:12:56] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[13:13:00] <tiffany> error: cannot call a method whose type contains a self-type through an object
[13:13:13] <eddyb> tiffany: that's interesting
[13:13:26] <eddyb> tiffany: because .clone returns ~Self or something like that
[13:13:30] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[13:13:36] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[13:13:37] <bstrie> strcat: in the future if you click the report button on its comments, then I'll see it in the modqueue and you won't have to alert me via irc
[13:14:05] <eddyb> tiffany: you need to impl Clone for ~Trait to cast the result of (&*self).clone or so to ~Trait. I think
[13:14:14] <eddyb> I'm not really sure here >_>
[13:14:17] <ChrisMorgan> You can't dereference trait objects.
[13:14:44] <ChrisMorgan> I don't think this can actually be done because of clone() -> Self.
[13:14:49] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:14:51] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[13:15:09] <eddyb> so you need a clone_as_owned_trait method, in the trait
[13:15:19] <ChrisMorgan> Probably.
[13:15:51] <rootnode> argh...use and mod is driving me nuts
[13:16:03] <kimundi> rootnode: What's the issue?
[13:16:15] <eddyb> oh, I know. impl<T: Clone> Trait for T {fn clone_as_owned_trait(&self) -> ~Trait {~self.clone() as ~Trait}}
[13:16:24] <rootnode> kimundi: mismatched types: expected `&memory::rom::Rom` but found `&rom::Rom` (expected struct memory::rom::Rom but found struct rom::Rom)
[13:16:26] <rootnode> this
[13:16:59] <ChrisMorgan> eddyb: that'll do for a particular known Trait.
[13:17:01] <kimundi> rootnode: Let me guess: You have a "mod rom" in the ucrrent module and one in memory, right?
[13:17:03] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:17:09] <rootnode> yeah
[13:17:15] <eddyb> tiffany: and then impl Clone for ~Trait {fn clone(&self) -> ~Trait {self.clone_as_owned_trait()}}
[13:17:19] <kimundi> rootnode: That's wrong :P
[13:17:53] <rootnode> if I remove it in one of them, I get unresolved imports
[13:17:53] <kimundi> rootnode: There should only ever be one mod line in the whole crate. mod declares anew module, so if you have multible ones it's the same as copy pasting the same code at two different places
[13:17:58] <eddyb> mod adds the module (and you can do it multiple times. should lint against that IMO), use makes the contents accessible
[13:18:08] <eddyb> rootnode: you need "use" for imports
[13:18:14] <eddyb> ChrisMorgan: you can't be generic over traits, sadly :(
[13:18:26] <ChrisMorgan> We then need the general solution as a default method of Clone: fn clone_as_owned_trait<T: ???>(&self) -> ~T { ~self.clone() as ~T }
[13:18:35] <ChrisMorgan> Alas, the ??? can't be modelled just at present.
[13:18:35] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[13:18:37] <kimundi> rootnode: You need to decide where in your module tree you want to put the module 'rom', and then use 'use' to import from it everywhere else
[13:18:46] <ChrisMorgan> Perhaps some unsafe code might be able to do it...
[13:19:07] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:19:12] <eddyb> ChrisMorgan: I just said it, generic over traits. you can't have that atm
[13:19:12] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[13:19:32] <ChrisMorgan> Indeed. Actually I guess you'd want <T, Self: T>...
[13:19:51] <rootnode> ah, thanks
[13:19:53] <ChrisMorgan> What a pity it can't be done.
[13:20:03] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[13:20:06] <kimundi> rootnode: For example, put 'mod rom;' into your crate root, then everywhere else you can do 'use rom::Rom;'
[13:20:34] <eddyb> kimundi: being able to have the same file loaded as a module twice should be gated, too many people are tripping on this
[13:21:03] <kimundi> eddyb: I keep saying that since months, I just don't know enough about the compiler to implement it myself :P
[13:21:09] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:21:12] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[13:21:15] <eddyb> seems trivial to detect
[13:21:18] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[13:21:28] <eddyb> is #[feature(...)] still strict?
[13:21:37] <eddyb> i.e. error if it's an unknown feature
[13:21:45] <tiffany> adding that gives the same error?
[13:21:52] <ChrisMorgan> eddyb: no
[13:22:07] <ChrisMorgan> #[feature(foo)] is silently ignored.
[13:22:18] <eddyb> since when? I was hoping a warn
[13:22:19] <kimundi> I think it should be a error per default, but can be dailed back to a warning or silent agreement with an attribute
[13:22:32] <ChrisMorgan> eddyb: my build is a couple of days old
[13:22:51] <eddyb> ChrisMorgan: I remember it being an error when #[feature(asm)] was added
[13:23:10] <ChrisMorgan> I can think of cases where there *is* value in repeating a module; the two are not necessarily the same where macros are involved.
[13:23:11] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:23:12] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[13:23:21] <eddyb> tiffany: I might have been imprecise in my examples, can you make a gist of the relevant section? I'll try to make it work there
[13:23:55] <tiffany> https://gist.github.com/tiffany352/7581497
[13:24:09] *** Joins: tikue__ (tkuehn@moz-424BC304.hsd1.pa.comcast.net)
[13:25:21] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:25:24] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[13:27:32] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:27:35] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[13:28:10] *** Joins: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca)
[13:29:01] *** Joins: Ms2ger (Ms2ger@moz-59CF5C76.ugent.be)
[13:29:35] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:29:37] <eddyb> rusti: 5u.clone()
[13:29:40] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[13:29:41] -rusti- 5u
[13:29:45] <eddyb> rusti: ~5u.clone()
[13:29:47] -rusti- ~5u
[13:30:06] <eddyb> rusti: ((~5u).clone(), ~(5u.clone()))
[13:30:06] -rusti- (~5u, ~5u)
[13:30:21] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[13:30:46] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[13:31:36] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:31:40] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[13:31:43] <eddyb> rusti: fn foo(ref ~_x: ~uint) {}
[13:31:44] <tiffany> rusti: (~5u as ~Num).clone()
[13:31:44] -rusti- <anon>:9:16: 9:19 error: expected identifier, found path
[13:31:44] -rusti- <anon>:9          fn foo(ref ~_x: ~uint) {}
[13:31:44] -rusti-                          ^~~
[13:31:44] -rusti- application terminated with error code 101
[13:31:44] -rusti- <anon>:9:9: 10:5 error: type `~std::num::Num:Send` does not implement any method in scope named `clone`
[13:31:44] -rusti- <anon>:9          (~5u as ~Num).clone()
[13:31:46] -rusti- <anon>:10     };
[13:31:48] -rusti- error: aborting due to previous error
[13:31:50] -rusti- application terminated with error code 101
[13:32:42] <eddyb> is ~a.b() (~a).b() or ~(a.b()) ?
[13:33:12] *** Joins: vmx (vmx@moz-6DDF6D37.dip0.t-ipconnect.de)
[13:33:18] *** Joins: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP)
[13:33:24] <tiffany> rusti: ~5.sqrt()
[13:33:24] -rusti- <anon>:9:10: 10:5 error: type `<VI0>` does not implement any method in scope named `sqrt`
[13:33:24] -rusti- <anon>:9          ~5.sqrt()
[13:33:24] -rusti- <anon>:10     };
[13:33:24] -rusti- error: aborting due to previous error
[13:33:25] -rusti- application terminated with error code 101
[13:33:47] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:33:51] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[13:34:01] <eddyb> rusti: (~5).sqrt()
[13:34:02] -rusti- <anon>:9:9: 10:5 error: type `~<VI0>` does not implement any method in scope named `sqrt`
[13:34:02] -rusti- <anon>:9          (~5).sqrt()
[13:34:02] -rusti- <anon>:10     };
[13:34:02] -rusti- error: aborting due to previous error
[13:34:02] -rusti- application terminated with error code 101
[13:34:45] <eddyb> tiffany: does this work? https://gist.github.com/eddyb/7581519
[13:34:47] <tiffany> rusti: ~5f32.is_nan()
[13:34:48] -rusti- ~false
[13:35:03] <tiffany> rusti: ~(5f32.is_nan())
[13:35:04] -rusti- ~false
[13:35:04] *** Joins: ricepuddin (graham@moz-9B05E068.wlan.ic.ac.uk)
[13:35:11] <tiffany> rusti: (~5f32).is_nan()
[13:35:12] -rusti- false
[13:35:29] <eddyb> yeah, I figured already, from ~<VI0> :P
[13:35:38] <tiffany> it doesn't seem to work
[13:35:42] <eddyb> I'm hoping the default implementation will get picked up
[13:35:43] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[13:35:46] <tiffany> same error
[13:35:46] <eddyb> tiffany: what's the error?
[13:35:48] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:35:51] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[13:35:58] <tiffany> error: cannot call a method whose type contains a self-type through an object
[13:36:05] <tiffany> it's on a different line now though
[13:36:09] <tiffany> it's on the #[] for Pattern
[13:36:27] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[13:37:13] <eddyb> tiffany: it might be doing something stupid >_>
[13:37:50] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:37:51] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[13:39:02] *** Quits: jvshahid (jvshahid@EDB221F0.CF5FEE20.2A2F4638.IP) (Quit: Lost terminal)
[13:39:40] <eddyb> trait Trait: Clone {fn clone_as_owned_trait(&self) -> ~Trait {~self.clone() as ~Trait}} impl Clone for ~Trait { fn clone(&self) -> ~Trait { self.clone_as_owned_trait() } } impl Trait for uint {} (~5u as ~Trait).clone()
[13:39:49] <eddyb> rusti: trait Trait: Clone {fn clone_as_owned_trait(&self) -> ~Trait {~self.clone() as ~Trait}} impl Clone for ~Trait { fn clone(&self) -> ~Trait { self.clone_as_owned_trait() } } impl Trait for uint {} (~5u as ~Trait).clone()
[13:39:51] -rusti- pastebinned 5 lines of output: http://sprunge.us/SOQD
[13:39:53] <eddyb> hmm
[13:40:13] <eddyb> no span?
[13:40:18] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:40:33] <cmr> eddyb: where would the span go?
[13:40:48] <eddyb> cmr: the call which causes the error
[13:41:03] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[13:41:13] <cmr> Open a bug, cc @me
[13:41:38] <eddyb> rusti is 0.8 though
[13:41:41] <eddyb> rusti: trait Trait: Clone {fn clone_as_owned_trait(&self) -> ~Trait} impl Clone for ~Trait { fn clone(&self) -> ~Trait { self.clone_as_owned_trait() } } impl Trait for uint {fn clone_as_owned_trait(&self) -> ~Trait {~self.clone() as ~Trait}} (~5u as ~Trait).clone()
[13:41:42] -rusti- pastebinned 4 lines of output: http://sprunge.us/LSWd
[13:42:11] <eddyb> rusti: trait Trait: Clone {fn clone_as_owned_trait(&self) -> ~Trait;} impl Clone for ~Trait { fn clone(&self) -> ~Trait { self.clone_as_owned_trait() } } impl Trait for uint {fn clone_as_owned_trait(&self) -> ~Trait {~self.clone() as ~Trait}} (~5u as ~Trait).clone()
[13:42:12] -rusti- pastebinned 5 lines of output: http://sprunge.us/SPeY
[13:42:24] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:42:29] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[13:42:39] <eddyb> oh, I fucking know why
[13:43:07] <eddyb> it tries to do a virtual call :(
[13:43:21] <eddyb> rusti: trait Trait: Clone {fn clone_as_owned_trait(&self) -> ~Trait;} impl Clone for ~Trait { fn clone(&self) -> ~Trait { self.clone_as_owned_trait() } } impl Trait for uint {fn clone_as_owned_trait(&self) -> ~Trait {~self.clone() as ~Trait}} (&(~5u as ~Trait)).clone()
[13:43:22] -rusti- pastebinned 5 lines of output: http://sprunge.us/RCjY
[13:43:26] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[13:43:32] *** Joins: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk)
[13:44:08] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[13:44:28] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:44:35] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[13:45:47] *** Joins: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net)
[13:46:10] <eddyb> rusti: trait Trait {fn clone_as_owned_trait(&self) -> ~Trait;} impl Clone for ~Trait { fn clone(&self) -> ~Trait { self.clone_as_owned_trait() } } impl Trait for uint {fn clone_as_owned_trait(&self) -> ~Trait {~self.clone() as ~Trait}} (~5u as ~Trait).clone()
[13:46:11] -rusti- ~main::Trait:Send
[13:46:20] <eddyb> tiffany: haha, I figured it out
[13:46:39] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:47:19] *** Joins: cubic (cubic@moz-80241A3A.mc.videotron.ca)
[13:47:35] *** Quits: g3orge (g3orge@moz-369F78A7.access.hol.gr) (Ping timeout)
[13:48:26] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[13:48:41] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:49:02] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[13:49:05] <tiffany> how does that work?
[13:49:42] <kimundi> tiffany: How does what work?
[13:50:25] <tiffany> why is it that having the function as a part of the impl instead of as a default method working in that example?
[13:50:55] <eddyb> tiffany: no, that's not the trick
[13:51:00] *** Joins: doomlord_ (servitor@moz-4625DF14.range86-184.btcentralplus.com)
[13:51:07] <kimundi> dafault method vs impl does not make a difference
[13:51:29] <eddyb> tiffany: Trait including Clone made (~x as ~Trait).clone() a virtual call on Trait::clone. try this https://gist.github.com/eddyb/7581519
[13:51:33] *** Quits: doomlord_ (servitor@moz-4625DF14.range86-184.btcentralplus.com) (Quit: Leaving)
[13:51:36] *** Joins: doomlord_ (servitor@moz-4625DF14.range86-184.btcentralplus.com)
[13:51:52] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[13:52:06] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[13:52:11] <tiffany> error: illegal recursive type; insert an enum in the cycle, if this is desired
[13:52:12] <tiffany> hm
[13:52:23] <eddyb> tiffany: which type?
[13:52:34] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[13:52:42] <tiffany> pub trait Parser<T>: CloneAs<~Parser<T>> {
[13:52:42] <tiffany>                              ^~~~~~~~~
[13:53:03] <eddyb> that should be a bug :(
[13:54:35] *** Quits: dredozubov (dredozubov@F638467C.75E9D765.B83C62DE.IP) (Client exited)
[13:56:10] <eddyb> tiffany: there's.... nothing recursive about that >_>
[13:57:15] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[13:57:48] <eddyb> tiffany: maybe now? https://gist.github.com/eddyb/7581519
[13:58:25] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[13:59:39] <tiffany> it had a few issues that I tried to fix and caused rustc to abort()
[14:02:53] *** Quits: ricepuddin (graham@moz-9B05E068.wlan.ic.ac.uk) (Ping timeout)
[14:05:14] *** Joins: ricepuddin (graham@moz-9B05E068.wlan.ic.ac.uk)
[14:05:27] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[14:06:11] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[14:06:30] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[14:06:34] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[14:07:40] *** Joins: SiegeLord (sl@moz-1DF56822.twcny.res.rr.com)
[14:08:40] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[14:08:48] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[14:08:51] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[14:10:17] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[14:10:49] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[14:10:52] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[14:10:57] *** Quits: z0w0 (zack@moz-5E840EF3.lns3.woo.bigpond.net.au) (Client exited)
[14:12:51] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[14:13:05] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[14:14:46] *** Quits: ricepuddin (graham@moz-9B05E068.wlan.ic.ac.uk) (Ping timeout)
[14:14:56] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[14:14:57] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[14:15:45] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[14:15:50] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[14:17:07] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[14:17:17] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[14:17:31] <Leo`> strcat: ping
[14:17:37] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[14:18:28] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[14:18:59] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[14:19:09] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[14:19:20] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[14:19:20] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[14:19:48] <strcat> Leo`: pong
[14:20:44] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[14:21:02] <Leo`> strcat: i'm trying to use your rust-gmp binding
[14:21:14] <strcat> oh it's probably really broken
[14:21:22] <Leo`> I fixed the build for master
[14:21:22] <strcat> I haven't touched it for a while
[14:21:24] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[14:21:26] <Leo`> but that's not the problem
[14:21:27] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[14:21:31] <strcat> hm?
[14:21:40] <Leo`> Mpz have a custom destructor
[14:21:47] <strcat> yeah
[14:21:51] <Leo`> that prevent it for being moved ?
[14:21:55] <Leo`> +s
[14:21:56] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[14:21:58] <strcat> no
[14:22:01] <Leo`> mhhh
[14:22:13] <strcat> types with dtors move ownership when you shallow copy them
[14:22:33] <Leo`> I have an enum, one of the enum patterns contained an int. I replaced this int by a Mpz
[14:22:39] <Leo`> and I can't move this enum anymore
[14:22:43] <strcat> you can move it
[14:23:03] *** Joins: xexio (xexio@E0B6D10F.3DF1D9C2.E62F6450.IP)
[14:23:13] <strcat> I think what you're seeing is that when you add a dtor to something, it moves ownership
[14:23:20] <strcat> before, it likely didn't move ownership
[14:23:25] <strcat> it just did a shallow copy without moving
[14:23:36] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[14:23:38] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[14:23:56] <Leo`> yes
[14:23:59] <Leo`> but this is what I want
[14:24:08] <Leo`> I want to copy this enum
[14:24:20] <strcat> you want a second copy? without moving ownershi[p
[14:24:22] <strcat> need to clone it
[14:24:27] <Leo`> mh wait
[14:24:28] <strcat> it will have to do a heap allocation for the Mpz
[14:24:33] <Leo`> previously I did something like
[14:24:55] <Leo`> i've got a function that took a &enum
[14:25:05] <Leo`> and I copied by by doing other = *enum
[14:25:12] <strcat> well you can't do that
[14:25:14] <Leo`> now, Rustc tells my I cannot move out of an &-ptr
[14:25:17] <strcat> right
[14:25:24] <strcat> types with dtors move ownership on shallow copies
[14:25:25] <Leo`> I need to call clone explicitely ?
[14:25:38] <strcat> it would do a double-free if it let you do that
[14:25:40] <strcat> Leo`: yes
[14:25:44] *** Quits: xexio (xexio@E0B6D10F.3DF1D9C2.E62F6450.IP) (Quit: Konversation terminated!)
[14:25:47] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[14:25:47] <strcat> add #[deriving(Clone)] to the enum
[14:25:50] <Leo`> I see
[14:25:52] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[14:26:04] <Leo`> Clone is already implemented for this enum
[14:26:15] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[14:26:23] <strcat> Leo`: well you need an explicit clone call
[14:26:37] <Leo`> but previously (I mean  without the Mpz), when I did other = *eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeenum,
[14:26:39] <Leo`> WTF
[14:26:45] <Leo`> other = *enum
[14:26:51] <Leo`> it was copying, right ?
[14:27:02] <strcat> Leo`: it was doing a shallow copy
[14:27:07] <Leo`> ok
[14:27:12] <strcat> rust doesn't have copy constructors or any implicit heap allocations
[14:27:21] <strcat> it always just does a shallow copy with the built-in form
[14:27:24] <Leo`> I see
[14:27:29] <strcat> but if the type has a dtor, that requires moving ownership
[14:27:34] <strcat> and with &T, you don't own it
[14:27:38] <strcat> so you can't move from it
[14:27:56] <Leo`> yes that makes sense
[14:27:58] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[14:28:02] <Leo`> but I think I could still shallow-copy it
[14:28:05] <Leo`> even with a dtor
[14:28:07] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[14:28:11] <strcat> Leo`: then you would have 2
[14:28:12] *** Quits: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP) (Input/output error)
[14:28:15] <strcat> and it would do a double free
[14:28:15] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[14:28:16] *** Joins: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP)
[14:28:20] <strcat> 2 things pointing to the same heap memory
[14:28:27] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[14:28:30] <Leo`> but in the case of Mpz, the dtor doesn't free memory
[14:28:41] <Leo`> mh
[14:28:43] <Leo`> or does-it ?
[14:28:45] <strcat> Leo`: it does
[14:28:48] <Leo`> I don't know in fact
[14:28:48] <strcat> that's why it has a dtor
[14:28:55] <Leo`> s/-/ /
[14:29:01] <Leo`> okok.
[14:29:02] <strcat> Mpz does heap allocation, it's basically a dynamic array
[14:29:07] <Leo`> I see
[14:29:10] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[14:29:19] <Leo`> so shallow copy is differenet than clone
[14:29:23] <Leo`> I didn't know that
[14:29:25] *** Quits: nkoep (nik@moz-1A684709.vpn.rwth-aachen.de) (Ping timeout)
[14:29:28] <Leo`> different*
[14:29:35] <strcat> yeah
[14:29:35] *** Joins: bynaryshef (bynaryshef@moz-647E89A6.mem.bellsouth.net)
[14:29:41] <strcat> Clone is entirely a library feature
[14:29:55] <Leo`> so previously, my clone implementation for the enum was unused.
[14:29:58] <strcat> the built-in shallow copy always requires a move of ownership for types with dtors
[14:30:00] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[14:30:00] <Leo`> I only had shallow copy
[14:30:02] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[14:30:04] <strcat> Leo`: yeah
[14:30:10] <strcat> all types can be shallow copied
[14:30:11] <Leo`> and now I have to replace every shallow copy by a call to clone
[14:30:18] <strcat> Leo`: no
[14:30:26] <strcat> only ones where you don't want to move ownership
[14:30:31] *** Quits: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca) (Quit: canhtak)
[14:30:33] <Leo`> yeah yeah of course
[14:30:39] <strcat> ok yes then
[14:30:44] <Leo`> but in my case this is almost everytime :p
[14:31:07] <Leo`> when you pass by-value to a fn, this is shallow copy too ?
[14:31:12] <strcat> Leo`: yes
[14:31:18] <Leo`> no language feature will implictely require clone ?
[14:31:24] <Leo`> implicitely*
[14:31:30] <strcat> nope, entirely a library feature (except for deriving(Clone))
[14:31:45] <Leo`> so clone implementations are useless until you call them explicitely.
[14:31:50] <strcat> yes
[14:31:53] <Leo`> I think this is what confused my
[14:31:58] <Leo`> thx strcat 
[14:32:15] <Leo`> by the way does this look ok to you ? :d https://github.com/thestinger/rust-gmp/pull/1
[14:32:17] <eddyb> only library stuff (like, generics with Clone as a bound)
[14:32:26] <strcat> Leo`: for types without dtors, Clone should likely always be equivalent to a shallow copy
[14:32:36] <bstrie> strcat: a "shallow copy" in rust is always just copying a single pointer, yeah?
[14:32:38] <strcat> for types with dtors, Clone is the minimal work required to go from &T to a new T
[14:32:45] <eddyb> bstrie: no
[14:32:54] <strcat> bstrie: shallow copy as in memcpy whatever the size_of the type is
[14:32:58] <eddyb> bstrie: a memcpy
[14:33:00] <Leo`> strcat: I understrand. it's very clear now :D
[14:33:02] <bstrie> ok
[14:33:56] <eddyb> I think ~[T].push_all(&[U]) requires clone on U
[14:34:02] <strcat> Leo`: merged, thanks
[14:34:02] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[14:34:14] *** Parts: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net) ()
[14:34:20] <Leo`> strcat: :)
[14:34:41] <bstrie> looks like C++ has both memcpy and memmove, is the latter different from our move?
[14:34:57] <strcat> we have memcpy and memmove too
[14:35:04] <strcat> ptr::copy_nonoverlapping_memory is memcpy
[14:35:10] <strcat> ptr::copy_memory is memmove
[14:35:19] <bstrie> kk
[14:35:33] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[14:35:36] <strcat> (and yeah I realize the C naming is weird)
[14:35:52] <strcat> bstrie: memmove doesn't actually 'move' something, it's just called that because it's safe to use for overlapping copies
[14:35:59] <strcat> like shifting a block of memory to the left/right
[14:36:04] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[14:36:09] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[14:36:12] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[14:37:08] *** Quits: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[14:37:14] *** Joins: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca)
[14:38:11] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[14:38:13] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[14:38:24] *** Quits: recrack (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:38:53] *** Joins: g3orge (g3orge@moz-369F78A7.access.hol.gr)
[14:39:27] <eddyb> has anyone used the padding in a structure/enum to hide some tracing data? I'm curious how compiled Rust code copies values and which cases can retain padding noise
[14:40:04] <strcat> eddyb: you can't put data in padding
[14:40:12] <rootnode> how can I define global constants?
[14:40:13] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[14:40:21] <strcat> eddyb: the compiler doesn't have to generate copies of padding
[14:40:21] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[14:40:25] <eddyb> rootnode: static name: type = value;
[14:40:32] <rootnode> thanks
[14:40:37] <strcat> LLVM actually has to way to mark fields and then it will omit extra copying
[14:40:38] <eddyb> strcat: oh, I know, but I'm curious what happens in various cases
[14:40:46] <strcat> eddyb: well atm we likely always copy it
[14:40:49] <strcat> but it's a perf bug
[14:41:07] <eddyb> interesting :D
[14:41:18] <bstrie> rootnode: static data only, though. nothing heap-allocated, unless you're crazy like a fox. and if you need to mutate that global data, expect it to be unsafe
[14:41:44] <rootnode> yeah, just needed a way to give some constants a name
[14:42:01] <eddyb> bstrie: Option<~T> works :P
[14:42:05] <rootnode> throwing around values like 0xff41 is a bit ugly
[14:42:16] <strcat> rootnode: static x: T = foo;
[14:42:20] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[14:42:22] <strcat> oh eddyb said it already
[14:42:34] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[14:42:36] <eddyb> rootnode: you can also use an enum, depending on how you use it
[14:42:51] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[14:42:56] <bstrie> eddyb: does it really? heh, I ended up just casting the owned pointer to a uint, forgetting the original allocation, and then transmuting it back later :P
[14:42:57] <rootnode> have to pass it as an address (u16)
[14:43:14] <rootnode> a static will do fine in that case
[14:43:19] <eddyb> bstrie: also Cell, but you can't initialize it, I think
[14:43:40] *** Joins: rseys (rseys@moz-C20FDDDB.dedicated.allstream.net)
[14:44:07] *** Quits: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca) (Quit: canhtak)
[14:44:17] <eddyb> because you need a literal and the only field is priv so you can't use the literal
[14:44:33] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[14:44:39] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[14:45:44] *** Quits: g3orge (g3orge@moz-369F78A7.access.hol.gr) (Quit: leaving)
[14:46:34] *** pmoore|away is now known as pmoore
[14:46:47] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[14:47:04] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[14:47:57] *** Joins: nkoep (nik@moz-AAC1F459.pool.mediaways.net)
[14:48:03] *** Joins: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca)
[14:48:58] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[14:49:01] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[14:49:19] <eddyb> I want basic inference + CTFE, so static ptr = Cell::<T>::empty(); works
[14:49:28] *** Joins: comex (comex@moz-2484CD28.compute-1.amazonaws.com)
[14:49:30] <tikue__> CTFE would be nice
[14:49:33] <tikue__> what is basic inference?
[14:49:39] <eddyb> or is that ~T? I can't remember if Cell has Option<~T> inside
[14:50:00] <eddyb> tikue__: just using the type of the RHS. right now you always have to specify the type for statics
[14:50:05] <eddyb> even when it's unambiguous :(
[14:50:13] <tikue__> ah yeah, I think that's on purpose though no?
[14:50:34] <tikue__> since statics lack local context
[14:50:52] <eddyb> tikue__: that's why I said basic and RHS
[14:50:57] <tikue__> ah true
[14:51:00] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[14:51:05] *** Joins: bungoman (bungoman@778844A0.6C181F01.F74C56B8.IP)
[14:51:08] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[14:51:08] <tikue__> seems reasonable imo
[14:51:18] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[14:51:25] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[14:51:52] <eddyb> it's a pain with generics or values constructed by functions (need CTFE for that. right now we can cheat with macros), and worse with both
[14:52:58] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[14:54:26] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[14:55:34] <SiegeLord> You know, I still don't get what DST is all about... why don't other languages need this concept?
[14:55:41] *** jorendorff_away is now known as jorendorff
[14:56:30] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[14:56:33] <bstrie> SiegeLord: sounds like a question for nmatsakis 
[14:56:36] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[14:57:15] *** Joins: jdm (jdm@moz-ED0C7AC7.hinet-ip.hinet.net)
[14:57:15] *** ChanServ sets mode: +o jdm
[14:57:23] <kimundi> SiegeLord: Other languages either just always use double indirection, or require you to juggle around raw pointer into memory
[14:58:03] <strcat> C99 standardized dynamically sized types as flexible length structs and variable length arrays
[14:58:06] <olsonjeffery> /Users/jeff/src/rust/mk/install.mk:140: *** Aborting install because more than one library matching librustpkg-*.dylib is present in build tree x86_64-apple-darwin/stage2/lib: .  Stop.
[14:58:15] <strcat> sizeof can do work dynamically now
[14:58:19] <olsonjeffery> anyone know what's causing this/how to deal with it?
[14:58:26] <olsonjeffery> osx 10.8, fwiw
[14:58:28] <eddyb> strcat: o_O how?
[14:58:34] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[14:58:34] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[14:58:46] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[14:58:53] <strcat> eddyb: dunno, look at how sizeof works with VLAs
[14:59:01] <SiegeLord> The blog entries on DST always start out with ~T is not ~[T], which seems to me a backwards way of thinking about it... a suboptimal syntax requiring the introduction of new type theory
[14:59:02] <strcat> it doesn't have to be a compile-time constant anymore
[14:59:02] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[14:59:05] <eddyb> strcat: ah, VLAs
[14:59:43] <strcat> SiegeLord: ~Trait isn't ~T either even though it contains an ~T
[14:59:50] <kimundi> SiegeLord: It's not really new type theory
[14:59:58] <SiegeLord> Well, another instance of perhaps suboptimal syntax
[15:00:06] <eddyb> I'd like to see some dependent length thing, but that's unlikely
[15:00:27] <strcat> SiegeLord: so what do you suggest unique trait objects with an ~ pointer use?
[15:00:43] <eddyb> struct Slice<T> {len: uint, data: *[T, ..self.len]}
[15:00:47] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[15:00:52] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[15:01:06] <eddyb> or data: & ...
[15:01:21] <strcat> eddyb: no point of complex stuff that's not enforced
[15:01:27] <strcat> C99 added a bunch of it and no one uses it
[15:01:31] <eddyb> haha
[15:01:40] <strcat> int foo[static 5]
[15:01:42] <strcat> yay c99
[15:01:49] <eddyb> oh, yeah, that stuff
[15:02:03] <strcat> I am pretty sure clang/gcc just discard it
[15:02:05] <eddyb> I remember wondering wtf that is, when working on my cparse
[15:02:28] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[15:02:50] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[15:02:51] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[15:04:48] <SiegeLord> strcat, I never quite understood the analogy between ~[] and ~Trait
[15:05:00] <olsonjeffery> heh, nm. was from old install already present.
[15:05:05] <SiegeLord> Except for the '~' in front
[15:05:15] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[15:05:17] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[15:05:28] <strcat> SiegeLord: not talking about ~[T]
[15:05:32] <strcat> talking about ~Trait and ~T
[15:05:44] <strcat> 10:00:40       strcat | SiegeLord: so what do you suggest unique trait objects with an ~ pointer use?
[15:05:50] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[15:05:50] <SiegeLord> I'm saying that I can understand ~Trait and ~T being the same
[15:05:56] <eddyb> ~Trait is (&'static Trait<for T>::vtable, ~T), right?
[15:06:19] <SiegeLord> Is that where the double indirection would come in?
[15:06:19] <eddyb> SiegeLord: ~Trait can point to different allocation sizes
[15:06:28] <SiegeLord> eddyb, Why?
[15:06:40] <eddyb> SiegeLord: because it's cast from ~T, with T implementing Trait
[15:07:02] *** Joins: ricepuddin (graham@moz-571905C0.wlan.ic.ac.uk)
[15:07:06] <eddyb> T can be any size, but you get ~Trait
[15:07:16] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[15:07:19] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[15:08:05] <SiegeLord> Well... struct Foo<T> { a: ~T } can have T be any size too
[15:09:05] <eddyb> SiegeLord: Foo<uint> and Foo<(int, int)> are different types
[15:09:37] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[15:09:41] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[15:10:13] <eddyb> SiegeLord: ~5u as ~Trait and ~(0, 1) as ~Trait are two values of the same type and size
[15:10:28] <eddyb> SiegeLord: but they contain a pointer to a heap allocation that is different
[15:10:39] *** Joins: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP)
[15:11:18] *** Quits: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP) (Client exited)
[15:11:36] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[15:11:38] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[15:11:40] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[15:12:35] *** Quits: ricepuddin (graham@moz-571905C0.wlan.ic.ac.uk) (Ping timeout)
[15:12:54] <SiegeLord> Well, ok... but other languages manage this too
[15:12:55] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Ping timeout)
[15:13:02] *** Quits: pnathan1 (Adium@moz-5EBBDD83.tukw.qwest.net) (Quit: Leaving.)
[15:13:04] <SiegeLord> Where is the savings placed?
[15:13:40] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[15:13:49] *** Joins: pnathan1 (Adium@moz-5EBBDD83.tukw.qwest.net)
[15:14:08] <SiegeLord> ~Trait will become (&vtable, T) instead?
[15:14:18] <strcat> no
[15:14:18] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[15:14:46] <strcat> can't do that
[15:15:03] <strcat> unboxed types need to have a fixed size
[15:15:04] <eddyb> "savings"?
[15:15:28] <SiegeLord> Well, ~(&vtable, T) then
[15:15:35] <SiegeLord> That thing boxed in some way
[15:15:45] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[15:16:12] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[15:17:00] <eddyb> SiegeLord: T unboxed? that would require a copy for every cast
[15:17:47] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[15:17:52] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[15:18:30] <SiegeLord> kimundi said you lose double indirection with DST, I'm trying to see where
[15:18:34] <eddyb> strcat: is ~T as ~Trait right now (&'static Trait::<for T>::vtable, ~T)?
[15:18:50] <strcat> eddyb: yes (but maybe the order is the other way)
[15:18:56] *** Quits: Ms2ger (Ms2ger@moz-59CF5C76.ugent.be) (Ping timeout)
[15:18:56] <strcat> and a vtable is an array of ptrs iirc
[15:18:59] <strcat> the first one to the tydesc
[15:19:02] <strcat> the rest to methods
[15:19:10] *** Joins: ricepuddin (graham@moz-571905C0.wlan.ic.ac.uk)
[15:19:18] <eddyb> strcat: is it a fat pointer or a boxed two-word tuple?
[15:19:32] <strcat> hm? it's 16 bytes
[15:19:34] <strcat> (ptr, ptr)
[15:19:44] <eddyb> so a fat pointer, then
[15:19:47] <strcat> (er, 2 words*)
[15:19:49] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[15:19:52] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[15:19:58] *** Joins: mindcat_ (mindcat@E06816C0.B1E12A5D.57E3C596.IP)
[15:20:03] <eddyb> SiegeLord: didn't kimundi talk about other languages?
[15:20:18] <SiegeLord> Well, that's Rust today
[15:20:35] <SiegeLord> Rust doesn't have DST, so it must do one of the two things kimundi said other languages do
[15:20:37] <eddyb> I'm pretty sure we have DSTs today, just not properly defined
[15:20:39] *** Quits: mindcat (mindcat@684D3E6.2AF6B358.291A146C.IP) (Ping timeout)
[15:20:39] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[15:20:44] <strcat> SiegeLord: what do you mean?
[15:20:45] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[15:20:47] *** Quits: bungoman (bungoman@778844A0.6C181F01.F74C56B8.IP) (Ping timeout)
[15:20:52] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[15:20:58] <strcat> rust doesn't have DST so ~Trait doesn't count as ~T
[15:21:00] <strcat> that's all
[15:21:19] <SiegeLord> I want to know what DST buys you
[15:21:19] <strcat> Trait alone isn't a type, because rust doesn't have a concept of dynamically sized types
[15:21:25] <strcat> all types are fixed-size atm
[15:21:30] <strcat> you can call size_of on every type
[15:21:33] <strcat> it returns the size
[15:21:46] <SiegeLord> So far it seems it's a purely syntactical argument
[15:21:51] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[15:21:52] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[15:21:56] <strcat> SiegeLord: Trait isn't a type right now
[15:21:59] *** Quits: nkoep (nik@moz-AAC1F459.pool.mediaways.net) (Ping timeout)
[15:22:01] <strcat> with DST, it is a type
[15:22:09] <eddyb> SiegeLord: ~Trait won't change, but it will be properly defined, instead of being a special case
[15:22:11] <SiegeLord> What does having it a type allow us to do?
[15:22:25] <strcat> SiegeLord: it makes ~Trait into ~T
[15:22:33] <SiegeLord> Why is that a good thing?
[15:22:35] <strcat> you can pass ~Trait to a function taking ~T
[15:22:41] <eddyb> clean up some of the compiler. better formal description of a type system. future flexibility
[15:22:44] <strcat> you can pass &Trait to a function taking &T
[15:22:46] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[15:23:04] *** Quits: Blub\w (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[15:23:07] <eddyb> oh, and yeah, consistency
[15:23:22] *** Quits: msch (msch@moz-DA0E34D4.clients.your-server.de) (Ping timeout)
[15:23:24] *** Joins: msch (msch@moz-DA0E34D4.clients.your-server.de)
[15:23:31] *** Quits: jpf (jan@moz-A8C26A15.org) (Ping timeout)
[15:23:31] *** Quits: ptrr (ptrr@48799E9.1D1EB2D6.85889BB1.IP) (Ping timeout)
[15:23:33] *** Joins: ptrr (ptrr@48799E9.1D1EB2D6.85889BB1.IP)
[15:23:33] *** Joins: jpf (jan@moz-A8C26A15.org)
[15:23:53] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[15:23:59] <SiegeLord> Well, that's for traits... but what about other things? Matrix/MatrixView, FFIBitmap, FFISubBitmap... will this DST work for types like that?
[15:24:15] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[15:24:28] <strcat> SiegeLord: those don't sound dynamically sized?
[15:24:32] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[15:24:49] <SiegeLord> They are special cases of ~[] and &[]
[15:25:56] <SiegeLord> Or like with Vec<T>, will I be able to pass it to a function taking ~T?
[15:26:05] <strcat> SiegeLord: no
[15:26:07] *** Joins: bungoman_ (bungoman@moz-833E2510.ptr.richards.com)
[15:26:13] <strcat> Vec<T> isn't a DST
[15:26:19] <SiegeLord> But ~[] is?
[15:26:24] <eddyb> SiegeLord: they would contain pointers to DSTs, which wouldn't make them DSTs
[15:26:28] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[15:26:31] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[15:26:31] <strcat> SiegeLord: not as it is today
[15:26:36] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[15:26:36] <bungoman_> Does Rust have a reduce or fold left for vectors?
[15:26:42] <strcat> bungoman_: for iterators, yes
[15:26:51] <SiegeLord> And if it does become a DST, what will happen then?
[15:27:01] <strcat> bungoman_: http://static.rust-lang.org/doc/master/std/iter/trait.Iterator.html
[15:27:17] <bungoman_> Ah, thanks!
[15:27:18] <strcat> rusti: range(0, 10).map(|x| x * 2).fold(0, |a, b| a + b)
[15:27:19] -rusti- 90
[15:27:21] <olsonjeffery> in rustpkg projects, we should *not* check-in the ~/.rust dir, correct?
[15:27:43] <strcat> bungoman_: vectors have a bunch of iterators (immutable refs, mutable refs, consuming by-move, splitting, etc.)
[15:28:15] <SiegeLord> eddyb, I don't see how my examples don't fulfill the definition of a DST... it's the same type with a certain runtime size
[15:28:29] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[15:28:32] <strcat> olsonjeffery: yeah, that's local data
[15:28:37] <eddyb> SiegeLord: ~[T] isn't actually a DST
[15:28:49] <eddyb> SiegeLord: it's a ~ pointer to a DST
[15:28:49] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[15:28:57] <strcat> SiegeLord: ~[T] can be dynamically resized
[15:29:00] <strcat> as it is today
[15:29:12] <strcat> @mut [T] can't be dynamically resized
[15:29:21] <SiegeLord> So?
[15:29:43] <SiegeLord> So let's say [T] is the DST then, can I make Matrix a DST?
[15:29:48] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[15:29:51] <strcat> what is [T]?
[15:30:05] <SiegeLord> Ask eddyb :P
[15:30:05] <strcat> it's not going to work well for vectors as they are today
[15:30:08] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:30:18] <eddyb> SiegeLord: you would need unsafe code to allocate it
[15:30:31] <strcat> afaik the current push is for making the slice representation the vector DST form
[15:30:35] <eddyb> and change its shape or whatever
[15:30:35] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[15:30:35] <strcat> { ptr, element_length }
[15:30:37] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[15:30:49] <strcat> so the length will be fixed after allocation
[15:31:09] <eddyb> SiegeLord: but still, there would be no language support for making a DST struct
[15:31:10] <strcat> so [T] will be a 'slice', whether it's a view, unique slice, refcounted or gc'ed
[15:31:18] <SiegeLord> I don't find the argument that you can't pass &Trait to &T convincing, if you can't make your own DST types
[15:31:35] <SiegeLord> Because for most things you still won't be able to pass UserDST to &T
[15:31:50] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[15:31:58] <eddyb> ~Trait to ~T, I think, didn't strcat say &Trait to &T works today?
[15:32:09] <strcat> eddyb: neither works
[15:32:11] <strcat> today
[15:32:16] <eddyb> ah nvm, I got you wrong
[15:34:06] <eddyb> SiegeLord: how would you define a DST struct?
[15:34:32] <SiegeLord> I don't know, I don't think it'll be pretty
[15:35:00] <SiegeLord> Maybe there can be some special annotation to the last member
[15:35:05] <SiegeLord> Isn't that how C does it?
[15:36:25] *** Joins: nkoep (nik@moz-EC3CC0B0.vpn.rwth-aachen.de)
[15:37:36] <kimundi> SiegeLord: Once we have DST, I'll push for being able to define newtypes of DST too
[15:37:57] <kimundi> SiegeLord: like struct str { data: [u8] }
[15:38:06] <SiegeLord> I still can't imagine it working for all types
[15:38:17] <kimundi> WHich would allow us to implement string completly as a library feature
[15:38:32] <kimundi> SiegeLord: Where do you see problems?
[15:39:05] <eddyb> oh, I see, building on the vector DST
[15:39:06] <SiegeLord> Well, what about an foreign DST?
[15:39:08] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[15:39:11] *** Joins: ChrisOei (chrisoei@moz-30D80888.hsd1.ca.comcast.net)
[15:39:20] <kimundi> SiegeLord: "foreign" ?
[15:39:22] <eddyb> SiegeLord: traits, maybe?
[15:40:17] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[15:40:23] <eddyb> Rc<[T]> would work if Rc<T> always deals with pointers to T
[15:40:47] <eddyb> (right now you can't pass [T] as a type to a generic)
[15:41:06] *** Quits: ChrisOei (chrisoei@moz-30D80888.hsd1.ca.comcast.net) (Ping timeout)
[15:41:13] <eddyb> but then... instantiation would fail if Rc<T> has an unboxed T somewhere in its impl, right?
[15:41:43] <eddyb> nmatsakis: are we okay (sorry for not asking in #rust-internals) with making instantiations fail?
[15:41:46] <kimundi> As I undersatnd it, the most recent iteration of discussions would lead to there being two primitive kinds of unsized types: Trait and [T]. DST would allow to tread them like actual types, eg for implementing traits on them or borrowing by doing &* on them
[15:41:56] *** Joins: Ms2ger (Ms2ger@moz-A56517F.ugent.be)
[15:42:17] <nmatsakis> eddyb: sorry, what are we talking about?
[15:42:19] <nmatsakis> I haven't been following
[15:42:30] <SiegeLord> Well... let's take struct Matrix { f: *ForeignType }
[15:42:37] <SiegeLord> How would I make that a DST?
[15:42:44] <nmatsakis> what does that mean?
[15:42:48] <nmatsakis> "make that a DST"?
[15:43:06] <kimundi> For example, we can have impl<T> Container for [T] { fn size(&self) -> uint } instead of the impl<T, 'a> Container for &'a [T] { fn size(&self) -> uint } we need to do today
[15:43:23] *** Parts: rseys (rseys@moz-C20FDDDB.dedicated.allstream.net) ()
[15:43:29] *** Quits: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu) (Ping timeout)
[15:43:52] <kimundi> SiegeLord: What do you mean with foreign type there?
[15:43:56] *** Joins: ChrisOei (chrisoei@moz-30D80888.hsd1.ca.comcast.net)
[15:44:03] <eddyb> nmatsakis: failing to instantiate a generic. like fn foo<T>() {let _x: T;} would always typecheck, would instantiate for foo<int> but wouldn't for foo<[int]>
[15:44:08] <eddyb> kimundi: I think he means opaque
[15:44:23] <SiegeLord> Yeah, sure, opaque
[15:44:33] <nmatsakis> eddyb: that is not going to be permitted.
[15:44:42] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[15:44:44] <nmatsakis> eddyb: that's what bounds are for
[15:45:01] <nmatsakis> eddyb: in current thinking, we'll use defaults to ease the annotation burden,
[15:45:02] *** Quits: ricepuddin (graham@moz-571905C0.wlan.ic.ac.uk) (Ping timeout)
[15:45:10] <eddyb> nmatsakis: default bounds?
[15:45:23] *** Joins: jvshahid (jvshahid@EDB221F0.CF5FEE20.2A2F4638.IP)
[15:45:25] <nmatsakis> eddyb: which means that if you declare a function like fn foo<T>() { ... }, it doesn't matter what is in the fn body, T can never be instantiated with an "unsized" type
[15:45:26] <kimundi> SiegeLord: What you have there is a newtype of ~[T], with [T] being the foreign type
[15:45:53] <eddyb> nmatsakis: sure. what would be the bound for T being a DST?
[15:45:59] <nmatsakis> eddyb: if you wanted T to possibly be an unsized type, you must write "fn foo<unsized T>() { ... }"
[15:46:04] <kimundi> SiegeLord: Actual no, you just have a newtype of ~Void there :P
[15:46:08] <nmatsakis> eddyb: but if you did THAT, it'd be an error to write "let _x: T"
[15:46:08] <eddyb> nmatsakis: ugly :(
[15:46:11] <SiegeLord> Hmm, maybe foreign types are unnecessary...
[15:46:21] <strcat> eddyb: less ugly than lots of Sized bounds all over
[15:46:28] <SiegeLord> Erm, rather unimportant to my point
[15:46:43] <eddyb> nmatsakis: I'd go with T: Unsized
[15:46:57] <eddyb> instead of adding new syntax >_>
[15:46:57] *** Joins: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu)
[15:47:03] <strcat> eddyb: but no other bound makes a type parameter *less* restricted
[15:47:21] <SiegeLord> I guess I want to know if I will be able to implement Matrix and MatrixView in this DST framework
[15:47:43] <SiegeLord> It doesn't seem obvious that you can
[15:47:55] <eddyb> SiegeLord: where ~Matrix would be a ~DST?
[15:47:57] <kimundi> SiegeLord: Sure, but the point of DSt is that you don't need to have two diffferent types for that :P
[15:48:14] <eddyb> and you couldn't have Matrix on the heap?
[15:48:22] *** Quits: jvshahid (jvshahid@EDB221F0.CF5FEE20.2A2F4638.IP) (Ping timeout)
[15:48:24] <kimundi> struct Matrix { data: [u8] }
[15:48:33] <eddyb> kimundi: or rather, [T]
[15:48:41] <nmatsakis> eddyb: ok, input noted.
[15:48:53] <SiegeLord> Hmm, ok, I see how it could work
[15:49:13] <nmatsakis> I don't think that struct Matrix { data: [u8] } would be supported right now
[15:49:15] <nmatsakis> but someday maybe
[15:49:16] <SiegeLord> Dunno if you'd actually want to do that, because having the same type might be a bad idea...
[15:49:31] <nmatsakis> it is a common C trick, for sure
[15:49:35] <eddyb> struct Matrix<T>([T]);
[15:51:37] <SiegeLord> It seems that I'd rather go the other way and make it possible to write functions that take ~T and ~Trait without DST, as that seems more flexible in the long run
[15:51:51] <eddyb> more flexible?
[15:52:03] <eddyb> I really like this DST stuff now that I understand it
[15:52:13] <SiegeLord> Well, take Vec<T>... it has a capacity field
[15:52:27] <SiegeLord> Why should a view into that vector have to keep that useless capacity field?
[15:52:37] <strcat> it doesn't
[15:52:39] <strcat> Vec<T> would just be a container, under the current way things are going
[15:52:55] <strcat> ~[T] would be fixed-size after creation, but you could create a Vec<T> from a ~[T] by-move
[15:53:02] <strcat> it would just stick a capacity field at the end
[15:53:43] <SiegeLord> Ok, fine
[15:53:48] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[15:53:50] <strcat> &[T], ~[T] would just be (ptr, length)
[15:53:57] <strcat> Vec<T> could be (ptr, length, capacity)
[15:53:58] <SiegeLord> Take Matrix<T>, why should a view into Matrix<T> keep the capacity field?
[15:54:04] <strcat> huh?
[15:54:16] <strcat> I don't get it
[15:54:20] *** Joins: maxiepoo_ (Max@moz-13F4F196.nuwlan.northwestern.edu)
[15:54:21] <eddyb> SiegeLord: there's no capacity field
[15:54:28] <SiegeLord> Sure there is
[15:54:30] <strcat> ~[T] wouldn't have a capacity
[15:54:37] <eddyb> what repr would ~(int, [T], uint) have, btw?
[15:54:50] <SiegeLord> I have a matrix type and a type that's view into that matrix
[15:55:04] <SiegeLord> Those types potentially may have different representations
[15:55:12] <SiegeLord> And therefore, ineligible for DST
[15:55:18] <strcat> SiegeLord: so one wraps ~[T} and one wraps &[T]?
[15:55:21] <eddyb> nvm, you would use &[T] or ~[T] in containers, I was confused
[15:55:25] *** jorendorff is now known as jorendorff_away
[15:55:44] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[15:55:50] <bstrie> feature request: a [T} type
[15:55:54] <eddyb> haha
[15:56:02] <eddyb> strcat: he wants ~Matrix and &Matrix to behave like ~[T] and &[T], I think
[15:56:02] <bstrie> assuming that delimeters are always balanced, the grammar is unambiguous
[15:56:10] <bstrie> *delimiters
[15:56:18] <eddyb> SiegeLord: but with DSTs, ~[T] would be fixed length after creation
[15:56:20] <bstrie> a delimeter is a scale in a butcher's shop
[15:56:52] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:56:56] <eddyb> SiegeLord: a struct Matrix<T>{data: [T]} wouldn't have a capacity anywhere
[15:56:58] *** Quits: nkoep (nik@moz-EC3CC0B0.vpn.rwth-aachen.de) (Ping timeout)
[15:57:02] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[15:57:06] <SiegeLord> eddyb, My matrix type has a capacity
[15:57:17] <SiegeLord> I don't see why you're assuming it won't
[15:57:26] <SiegeLord> It's a dynamically sized matrix
[15:57:29] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[15:57:36] <eddyb> ~[T] won't have a capacity, from the looks of it
[15:57:48] <SiegeLord> That's fine, but my matrix type will
[15:58:23] <eddyb> then you can't use struct Matrix<T>{data: [T]} and have ~Matrix/&Matrix work like OwnedMatrix and MatrixView
[15:59:03] <SiegeLord> That's my point
[15:59:05] <eddyb> strcat: how bad would it be to allow removing the capacity of a Vec<T>, to turn it into ~[T]?
[15:59:15] <strcat> that could be allowed
[15:59:20] *** Quits: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net) (Quit: Leaving.)
[15:59:20] <eddyb> thawing and freezing a ~[T] :D
[15:59:32] *** Joins: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net)
[15:59:40] *** Quits: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net) (Input/output error)
[15:59:49] <SiegeLord> My point is that it won't be the case that every Container/View will be efficiently represented as pointers to the same DST
[15:59:53] *** Joins: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net)
[15:59:55] *** Quits: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net) (Input/output error)
[15:59:56] <strcat> eddyb: [T] would be a 'slice'
[16:00:07] *** Joins: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net)
[16:00:12] <SiegeLord> And thus generic algorithms are better off not require DST to remain being generic
[16:00:13] <eddyb> strcat: but that wouldn't make sense with DST, would it?
[16:00:20] <strcat> SiegeLord: it's not meant to solve every problem
[16:00:26] <strcat> it's meant to solve existing problems rust has
[16:00:31] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[16:00:48] <strcat> I don't know of another language with DST so I doubt there's any loss of expressiveness compared to them
[16:00:56] <eddyb> SiegeLord: with ~[T] thawing/freezing you could change its length without storing a capacity
[16:01:18] <SiegeLord> That... doesn't strike me as being efficient
[16:01:29] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[16:01:34] <eddyb> depends on how often you change the size of a *matrix*
[16:02:18] <strcat> the point is that you can build up a Vec<T> and turn it into ~[T] or turn ~[T] into Vec<T> to perform a bunch of pushes
[16:02:28] <eddyb> which has some constraints, since its vector length is the space used by its shape (area/volume/no idea what that is in 4D)
[16:02:34] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[16:02:35] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[16:02:57] <eddyb> strcat: as long as the growing is limited to rarely called functions, it would be decent, right?
[16:03:32] <eddyb> heck, the first grow can actually get the available length and use that for capacity
[16:03:40] <eddyb> (assuming the allocator isn't horrible)
[16:03:51] <strcat> it's not a big deal
[16:03:55] <strcat> we already expose a reserve function
[16:03:59] <strcat> easy to use that wrong too
[16:04:17] <bstrie> eddyb: 4D volume = hypervolume!
[16:04:23] <strcat> let mut xs = Vec::new(); for x in range(0, n) { xs.push(x) }
[16:04:28] <strcat> O(n)
[16:04:37] <strcat> let mut xs = Vec::new(); for x in range(0, n) { xs.reserve(xs.capacity() + 1); xs.push(x) }
[16:04:39] <strcat> O(n^2)
[16:04:43] *** Quits: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net) (Ping timeout)
[16:04:46] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[16:04:48] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[16:04:51] <strcat> but it's easy to do that by accident
[16:05:02] <eddyb> (amortized reallocs, right?)
[16:05:17] <strcat> eddyb: as a whole the first is O(n)
[16:05:31] <strcat> only the complexity of an individual allocation has to be amortized to say O(1)
[16:05:34] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:05:36] <strcat> er
[16:05:39] <strcat> s/allocation/push/
[16:05:46] <eddyb> I mean, the second one with a non-trivial realloc
[16:06:05] <strcat> the second one is performing a potentially O(n) reallocation n times
[16:06:15] *** Joins: zatnosk (zatnosk@31AE4F7A.F285E7E8.9E52235C.IP)
[16:06:48] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[16:07:29] <strcat> the allocator will find a place to fit it, then find another place to find it, and eventually start hitting mmap/munmap each time (if it's jemalloc)
[16:07:45] <strcat> some allocators might use mremap, so you *might* not be doing huge copies over and over
[16:07:57] <strcat> (but it could easily hit some reserved VM and need to move it)
[16:08:18] *** Quits: maxiepoo_ (Max@moz-13F4F196.nuwlan.northwestern.edu) (Quit: maxiepoo_)
[16:09:12] *** Joins: steveklabnik (steveklabn@moz-B7FC4CE6.nycmny.east.verizon.net)
[16:10:00] <strcat> eholk: heh I think you need to deal with me moving Container ;p
[16:10:07] <strcat> oh you did
[16:10:16] * strcat isn't sure why github sent him an email
[16:10:55] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[16:11:08] <strcat> I guess if someone uses your repo as a submodule or mentions your repo it emails you
[16:11:10] <strcat> weird.
[16:12:57] <eholk> strcat: Huh, that's weird
[16:14:18] <strcat> eholk: ah it might just because eddyb mentioned me in the bug so github subscribed me to it.
[16:14:24] <strcat> and then the commit closed the bug
[16:14:35] <eddyb> hehe
[16:14:45] <strcat> I never understand where all my github email comes from
[16:14:46] <SiegeLord> Hmm... externfn!'s are gone?
[16:14:52] <eholk> strcat: yeah, that'd make sense
[16:14:53] <strcat> SiegeLord: segmented stacks are gone
[16:15:07] <SiegeLord> So it's just extern "C" {fn blah()} ?
[16:15:25] <strcat> SiegeLord: yes
[16:15:27] <eholk> strcat: i expected using rust-core in my UEFI stuff to be a lot harder than it was
[16:15:33] *** Joins: nkoep (nik@moz-C5A4E8B1.vpn.rwth-aachen.de)
[16:15:48] <strcat> eholk: well I did a pretty coarse partition into libc and non-libc for now :)
[16:15:58] *** Joins: ricepuddin (graham@moz-D96E943E.wlan.ic.ac.uk)
[16:16:04] *** Quits: Ms2ger (Ms2ger@moz-A56517F.ugent.be) (Quit: bbl)
[16:16:05] <strcat> I eagerly await generic dtors working properly so the containers can all be available without libc
[16:16:09] <strcat> via allocators
[16:16:25] <strcat> (the non-blocking-concurrent containers at least)
[16:16:30] <eddyb> Vec<T, Alloc=Heap> pls
[16:17:46] <strcat> rust's killer freestanding feature is obviously platform-independent abort() ;p
[16:17:59] <strcat> invalid instructions for everyone!
[16:18:00] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[16:18:28] <strcat> anyway I had to add that to have any hope of exposing most stuff without libc ;p
[16:18:40] <strcat> bounds checks...
[16:18:56] *** Quits: ChrisOei (chrisoei@moz-30D80888.hsd1.ca.comcast.net) (Ping timeout)
[16:20:38] <kimundi> nmatsakis: Once we get DST, I'd really like to see struct Foo<T> { a: [T] } work
[16:22:38] <nmatsakis> kimundi: i'd like to see it too, but it won't be something that works in the first revision
[16:22:42] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[16:22:50] *** Joins: ChrisOei (chrisoei@moz-30D80888.hsd1.ca.comcast.net)
[16:23:02] <kimundi> nmatsakis: Oh, sure I didn'T expect it to
[16:23:31] <eddyb> hmpf
[16:23:40] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[16:23:41] <SiegeLord> Hmm... pub extern "C" doesn't do anything...
[16:23:48] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[16:24:08] *** Joins: brylie (quassel@moz-E27796EB.hsd1.or.comcast.net)
[16:24:16] <eddyb> nmatsakis: so if I add the ..T tuple type expansion, how should it interact with bounds?
[16:24:49] <nmatsakis> eddyb: I don't know.
[16:24:49] <eddyb> nmatsakis: I'm almost certain that the simplest implementation would work with generic types, but I'm afraid of functions
[16:25:24] <kimundi> eddyb: Hm... seems like the only sensible thing would be to allow to specify bounds on all those types at all
[16:25:26] <eddyb> type TupleWrap<T, U> = (U, ..T, U); would work, that is
[16:26:17] <eddyb> TupleWrap<int, int> would fail because int is not a tuple
[16:26:24] <kimundi> <T, ..U : Clone> -> <T, A, B, C> // A, B, C all need the clone bound
[16:26:27] <nmatsakis> eddyb: tbh I don't have a lot of bandwidth to think about this right now :) it seems like an idea with potential but also with lots of interactions
[16:26:46] <eddyb> nmatsakis: yeah, it's a mess when you think of implications :P
[16:26:58] <SiegeLord> It seems like a really bad idea compared to how Rust is done now
[16:27:21] <bstrie> what's the unicode term for a "character" that is composed of an arbitrary number of combining characters
[16:27:21] <eddyb> kimundi: ah, sure, but I'm thinking of something different. I'm only at the first step, ..T expanding a tuple type T into a list of types
[16:27:28] <eddyb> a grapheme?
[16:27:43] <SiegeLord> I'd expect there to be a bound for T in TupleWrap that forces it to be a tuple
[16:27:44] <eddyb> or a glyph?
[16:27:54] <bstrie> maybe it's "grapheme cluster"
[16:28:02] <kimundi> It's grapehem cluster
[16:28:06] <eddyb> rusti: struct Foo<T: Clone>(T);
[16:28:06] -rusti- <anon>:9:9: 9:33 error: trait bounds are not allowed in structure definitions
[16:28:06] -rusti- <anon>:9          struct Foo<T: Clone>(T);
[16:28:07] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~
[16:28:07] -rusti- error: aborting due to previous error
[16:28:07] -rusti- application terminated with error code 101
[16:28:24] <kimundi> Which is a terrible long name if we want to add it a s a type, which is why I would choose something like 'glyph' :P
[16:28:42] <eddyb> now, SiegeLord, the (theoretical) problem I have is with generic functions
[16:28:42] <bstrie> so then is a "rune" just another name for a codepoint?
[16:28:58] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[16:28:59] <kimundi> Anyway, I want to be able to define struct glyph { data: str } :P
[16:29:01] <Sharp> rusti: let version = "1.0"; version
[16:29:01] -rusti- <anon>:9:13: 9:20 error: only refutable patterns allowed here
[16:29:01] -rusti- <anon>:9          let version = "1.0"; version
[16:29:02] -rusti-                       ^~~~~~~
[16:29:02] -rusti- error: aborting due to previous error
[16:29:02] -rusti- application terminated with error code 101
[16:29:07] <Sharp> Boooo.
[16:29:19] <kimundi> bstrie: where do you get the name rune?
[16:29:28] <strcat> Sharp: it's just a really bad error message
[16:29:28] <bstrie> kimundi: go has it
[16:29:34] <strcat> Sharp: I have a global called version
[16:29:35] <Sharp> No, it makes sense.
[16:29:36] <bstrie> trying to map concepts
[16:29:38] <bstrie> in my brain
[16:29:42] <strcat> rusti: version
[16:29:43] -rusti- "rustc 0.8"
[16:29:56] <Sharp> The error message is actually fine, I think.
[16:30:01] <bstrie> I disagree
[16:30:01] <strcat> well it's weird
[16:30:13] <nmatsakis> the error message is rong
[16:30:14] <SiegeLord> eddyb, The fact that you can't do trait bounds on struct definitions suggests that you shouldn't be able to write TupleWRap at all
[16:30:14] <nmatsakis> *wrong
[16:30:19] <nmatsakis> for one thing, refutable patterns are NOT allowed there
[16:30:23] <bstrie> how the heck is a global variable a refutable pattern
[16:30:26] <Sharp> Is it?  It's not trying to unify the two versions?
[16:30:29] <Sharp> Oh, hah
[16:30:31] <Sharp> I see what you're saying.
[16:30:32] <Sharp> Irrefutable.
[16:30:49] <eddyb> SiegeLord: types are checked at instantiation
[16:30:51] <kimundi> bstrie: A go rune is a rust char is a unicode codepoint
[16:30:52] <nmatsakis> bstrie: a global varibale is a refutable pattern because it matches iff the value being matched has the same value as the global
[16:30:57] <strcat> "only irrefutable patterns allowed here' note: version defined on line blah blah'
[16:30:59] <nmatsakis> bstrie: in other words, matching can fail
[16:31:05] <nmatsakis> strcat: +1
[16:31:08] <kimundi> bstrie: except go's rune seems to just be an alias for something like u32
[16:31:18] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[16:31:23] <strcat> go's rune is a unicode code point
[16:31:25] <bstrie> kimundi: so just like our char then :P
[16:31:26] <strcat> not a glyph
[16:31:28] <Sharp> strcat: Ah, I see what you'r esaying.  Yeah, that might be slightly more useful.
[16:31:31] <Sharp> *you're
[16:31:37] *** Joins: jordyd (jordyd@moz-47358B08.seg49.ucf.edu)
[16:31:37] <bstrie> strcat: are you also using "glyph" to mean "grapheme cluster"
[16:31:41] <SiegeLord> eddyb, In C++ too, but Rust clearly does something different
[16:31:52] <eddyb> SiegeLord: it does something different for generic functions
[16:31:57] <strcat> bstrie: I'm using glyph to mean rendered character, rather than semantic character
[16:32:06] <bstrie> sigh
[16:32:21] <strcat> ;D
[16:32:26] <eddyb> SiegeLord: those are typechecked before instantiation, and I can make ..T where T is a generic type param, invalid in a generic function
[16:32:28] <bstrie> so then is semantic character == grapheme cluster ??!
[16:32:31] <strcat> yeah I suggest not reading those unicode documents
[16:32:32] <SiegeLord> eddyb, Can you make a Rust instantiation of a struct fail today?
[16:32:33] <strcat> bstrie: no
[16:32:38] * bstrie writhes
[16:32:45] <strcat> bstrie: so, in theory Unicode is an encoding of *semantic* characters
[16:32:47] <kimundi> bstrie: rendered character == grapheme cluster
[16:32:52] *** Quits: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP) (Input/output error)
[16:32:58] <strcat> bstrie: it's not an attempt to encode every *glyph*
[16:33:08] <strcat> it's an attempt to encode every meaningful *semantic character*, whatever that means
[16:33:15] <eddyb> SiegeLord: I don't think so
[16:33:23] <SiegeLord> Then it's best to keep it that way
[16:33:33] <strcat> so roughly, code points are supposed to correspond to semantic units
[16:33:34] <eddyb> SiegeLord: there is nothing before instantiation, for types
[16:33:39] <eddyb> *generic types
[16:33:44] <strcat> except the ones that are control characters
[16:33:47] <strcat> and the meaningful ones
[16:33:49] *** Quits: ChrisOei (chrisoei@moz-30D80888.hsd1.ca.comcast.net) (Ping timeout)
[16:33:51] <strcat> like zero-width spaces
[16:33:54] <strcat> er
[16:33:57] <strcat> meaningless*
[16:34:09] *** Joins: ChrisOei (chrisoei@moz-30D80888.hsd1.ca.comcast.net)
[16:34:23] <strcat> bstrie: http://www.unicode.org/reports/tr29/ just look at this and you'll cry
[16:34:27] <SiegeLord> eddyb, Then it should be added for your syntax
[16:34:37] <eddyb> >_>
[16:34:38] <strcat> It is important to recognize that what the user thinks of as a "character"—a basic unit of a writing system for a language—may not be just a single Unicode code point. Instead, that basic unit may be made up of multiple Unicode code points. To avoid ambiguity with the computer use of the term character, this is called a user-perceived character.
[16:34:39] <bstrie> strcat: yeah, that's where I got "grapheme cluster"
[16:34:56] <eddyb> SiegeLord: there would be no difference between instantiation failing because the bounds aren't satisfied and failing because you're doing ..T on a non-tuple T
[16:35:07] <strcat> (this could be the one place in the world saying 'user-perceived character' as if it's meaningful)
[16:35:24] <strcat> the user perceives characters differently based on the input method too
[16:35:32] <eddyb> SiegeLord: this is different in generic functions, for which I could deny ..T
[16:35:38] <strcat> it might compose *graphemes*, but more likely it makes you compose semantic characters
[16:35:51] *** Quits: ChrisOei (chrisoei@moz-30D80888.hsd1.ca.comcast.net) (Quit: Leaving)
[16:35:54] <bstrie> our user-perceived characters are MP3 recordings of people pronouncing them
[16:36:01] <strcat> so... if you hit backspace, do you expect to delete a grapheme (a single glyph/character) or a semantic unit
[16:36:06] <SiegeLord> There is a very big practical difference... it's not how it works for generic functions
[16:36:12] <strcat> where the latter could mean not making the text shorter
[16:36:17] *** Quits: bungoman_ (bungoman@moz-833E2510.ptr.richards.com) (Client exited)
[16:36:22] <strcat> anyway
[16:36:30] <strcat> usually backspace is supposed to delete a grapheme
[16:36:34] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[16:36:40] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[16:36:44] <bstrie> ...which is distinct from a grapheme cluster
[16:36:51] <eddyb> SiegeLord: what difference? bound or no bound, it will fail the same way
[16:36:52] <strcat> and with a monospace font, most graphemes fill 1 cell in the grid (but there are double-width graphemes!)
[16:37:01] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[16:37:07] <SiegeLord> eddyb, What's the point of bounds in functions then? It'll fail the same way there too
[16:37:11] <strcat> bstrie: grapheme == grapheme cluster as I'm using it here
[16:37:11] <eddyb> SiegeLord: no
[16:37:18] <eddyb> SiegeLord: functions are typechecked once
[16:37:45] <bstrie> let's shorten "grapheme cluster" to grapclus
[16:37:48] <SiegeLord> Anyway, one day there may be associated types and associated constants
[16:37:53] <bstrie> or maybe "gruster"
[16:38:09] <kimundi> bstrie: grcl !
[16:38:14] <SiegeLord> So you'll want to be able to write struct A<T:Foo> { static a = Foo::a; }
[16:38:23] <SiegeLord> Err... T::a
[16:38:27] <bstrie> "grcl" sounds like the noise you would make after being stabbed in the jugular
[16:38:38] <bstrie> so yes this sounds perfect for understanding unicode
[16:38:41] <eddyb> instantiation is done in trans, no typecheck required if it can be instantiated (if the bounds match)
[16:38:43] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[16:38:48] <eddyb> SiegeLord: sure, but it's not required for ..T
[16:38:48] <kimundi> bstrie: Which describes unicode pretty accurately
[16:39:55] <eddyb> SiegeLord: type instantiation is done in astconv, AFAIK
[16:40:02] <eddyb> only generic functions keep generics
[16:40:11] *** Joins: fabrice (fabrice@moz-7B0110AD.mv.mozilla.com)
[16:41:25] <SiegeLord> eddyb, Well, ok... but I'm questioning how useful it'll be when you dissallow them in generic functions :P
[16:41:34] <eddyb> s/generics/generic type params
[16:41:45] <eddyb> SiegeLord: this is just the first step
[16:41:47] *** Quits: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net) (Ping timeout)
[16:41:49] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[16:41:54] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[16:42:05] <SiegeLord> The first step needs to be taken with the journey in mind
[16:42:11] <eddyb> SiegeLord: its usability is limited to some tuple tricks (and maybe limited variadics)
[16:42:30] <SiegeLord> What's your plan for making it work in generic functions down the road?
[16:43:26] <eddyb> SiegeLord: generic functions will be able to use fn foo<..T>, making them variadicly (is that a word?) generic, and T will always be a tuple (similar to parameter packs from C++11 varidic templates)
[16:43:50] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[16:43:54] <SiegeLord> So why not do type TupleWrap(U, ..T) = (U, ..T, U) :P
[16:43:56] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[16:44:10] <eddyb> SiegeLord: because that's not a generic
[16:44:26] <eddyb> the first (two) step(s) shouldn't change the type system, at most some type representation in the compiler
[16:44:49] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[16:45:34] *** Joins: fabrice1 (fabrice@moz-BBE3ABD.mv.mozilla.com)
[16:45:38] <SiegeLord> Err... TupleWrap<U, ..T>
[16:45:39] *** Quits: pnathan1 (Adium@moz-5EBBDD83.tukw.qwest.net) (Quit: Leaving.)
[16:45:52] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[16:46:10] <SiegeLord> And you'd use it as TupleWrap::<int, ..(int, int)>
[16:46:16] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[16:46:21] <eddyb> no, that's not how you use types :)
[16:46:29] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[16:46:45] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[16:46:48] <eddyb> SiegeLord: and that's the last step, variadic generics, which would change the type system
[16:46:57] *** Quits: fabrice (fabrice@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[16:47:12] <olsonjeffery> can you pass linker args to rustpkg?
[16:47:15] <SiegeLord> Why not? type Foo<T> = Bar<T>; type FooInt = Foo::<int>;
[16:47:18] <SiegeLord> Or does that not work?
[16:47:25] <eddyb> SiegeLord: Foo<int>
[16:47:29] <eddyb> types don't need ::
[16:47:48] <SiegeLord> Ok, aside from that?
[16:47:50] <olsonjeffery> it appears not..
[16:47:53] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[16:48:02] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[16:48:10] <eddyb> and the variadic generics are the hardest part, as they will interact with all of typeck
[16:48:15] <olsonjeffery> what is the env var for rustc to look for libs?
[16:49:12] <SiegeLord> So what's wrong with my proposal? Unlike yours it doesn't randomly fail if you pass it a bad type
[16:49:29] <eddyb> SiegeLord: it's not "randomly failing"
[16:49:39] *** Quits: tikue__ (tkuehn@moz-424BC304.hsd1.pa.comcast.net) (Quit: tikue__)
[16:49:55] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[16:50:00] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[16:50:11] <SiegeLord> Mine isn't failing at all
[16:50:26] <eddyb> yours wouldn't compile without a shitton of work
[16:50:55] <eddyb> type TupleWrap<T, U> = (U, ..T, U); would compile with under 50 added lines, I think
[16:51:05] <SiegeLord> Not concerned about ease of implementation :P
[16:51:18] <eddyb> then do it yourself
[16:51:19] <SiegeLord> I'm concerned about ruining semantics
[16:51:28] <eddyb> there's no semantics I can ruin
[16:51:31] <olsonjeffery> LD_PATH or something like that?
[16:51:51] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[16:52:06] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[16:52:09] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[16:52:11] <SiegeLord> Yeah there are... you're chaning the semantics of type instantiation
[16:52:18] <SiegeLord> Which couldn't fail until your change
[16:52:43] <eddyb> adding bounds would have the same end result, with more work
[16:53:10] <SiegeLord> It's not the same, as my way can't fail instantiating
[16:53:26] <eddyb> your way is what it could look like after it's fully implemented
[16:53:27] <olsonjeffery> strcat: do you know what the env var is for the rust linker to look for libraries?
[16:53:57] <strcat> olsonjeffery: I don't think there is one
[16:53:58] <eddyb> (more work *and* a very long discussion about expressing "is a tuple" as a bound)
[16:54:00] <SiegeLord> It better be implemented before 1.0 then :P
[16:54:09] <SiegeLord> Otherwise your syntax will remain in Rust forever
[16:54:16] <strcat> olsonjeffery: /etc/ld.so.conf and /etc/ld.so.conf.d/
[16:54:19] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[16:54:22] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[16:54:23] <strcat> + ldconfig to generate the cache when they're changed
[16:54:31] <strcat> at least on linux.
[16:54:48] <strcat> olsonjeffery: well and rust has an -L switch
[16:55:02] <eddyb> SiegeLord: the syntax will remain, it's the building block for variadic generics
[16:55:15] <strcat> olsonjeffery: -L some_dir_to_look_in
[16:55:24] <SingingBoyo> I shouldn't need 'extern mod extra;' to import from libextra, right?
[16:55:44] <benh> you should
[16:55:45] <SingingBoyo> (Sorry to interrupt your... heated discussion.  :D)
[16:55:45] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[16:56:22] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[16:56:44] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[16:56:44] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[16:56:48] <eddyb> SiegeLord: but it has limited usability outside of T coming from a generic <..T>
[16:57:08] <olsonjeffery> rustpkg doesn't take an -L switch
[16:57:40] <SingingBoyo> odd.  doesn't work either way for me right now though.  wonder what I'm doing differently in this project from my other one.
[16:58:26] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[16:58:27] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[16:58:45] *** Joins: feng (Mibbit@32B41A.FA7FF645.C7DB8B78.IP)
[16:59:01] <eddyb> SiegeLord: if I deny it when T is a generic type param to a generic function, then I don't need to change librustc/middle's type system, just the AST and middle/typeck/astconv
[16:59:17] <SingingBoyo> and what's worse is it doesn't complain about the 'extern mod extra;' line, just can't find extra.  Anyone run into this?
[16:59:47] <benh> put the extern mod extra line into the crate root
[16:59:54] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[16:59:57] <olsonjeffery> strcat: i think its LD_LIBRARY_PATH
[17:00:03] <olsonjeffery> we shall see
[17:00:16] <olsonjeffery> who "owns" rustpkg now.. ?
[17:00:28] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[17:00:32] <SingingBoyo> benh: Ah. that's what it is.  you'd think I'd know that by now.  Thanks!
[17:00:32] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[17:00:41] *** jorendorff_away is now known as jorendorff
[17:01:34] <strcat> olsonjeffery: LD_LIBRARY_PATH is for looking in a dir for libraries at runtime afaik
[17:01:52] <strcat> maybe it looks there at build-time too...
[17:01:57] *** Quits: huseby (huseby@E6C3B35B.1D8BF1C3.9E74FAD6.IP) (Ping timeout)
[17:02:30] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[17:02:44] <olsonjeffery> strcat: looks like it didn't work
[17:02:44] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[17:02:49] *** Quits: mindcat_ (mindcat@E06816C0.B1E12A5D.57E3C596.IP) (Quit: leaving)
[17:02:59] <olsonjeffery> for this: LD_LIBRARY_PATH=./lib/osx rustpkg install github.com/JeremyLetang/rust-sfml
[17:03:08] <olsonjeffery> :/
[17:03:20] <olsonjeffery> don't want to edit ld.so.conf if i can help it
[17:03:25] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[17:04:34] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[17:04:48] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Quit: leaving)
[17:05:03] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[17:06:18] <olsonjeffery> also, if the build fails the first time w/ a github.com url fragment for a package, then subsequent calls with the same command fail with a different error msg :/
[17:06:36] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[17:06:36] <olsonjeffery> mumble mumble idempotency
[17:06:39] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[17:07:34] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[17:08:38] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[17:08:46] <bstrie> olsonjeffery: nuh uh, *you're* the idempotent
[17:09:06] <strcat> bblum: https://lwn.net/Articles/573424/ now *this* would be cool to have for rust.
[17:09:23] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[17:09:53] <strcat> sort of like the mutable world's variant of persistent concurrent data structures
[17:10:01] <bblum> strcat: i never quite understood RCU so i don't know how feasible it is but it seems possible
[17:10:30] *** Quits: jdm (jdm@moz-ED0C7AC7.hinet-ip.hinet.net) (Ping timeout)
[17:10:40] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[17:10:42] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[17:11:09] *** Joins: Ms2ger (Ms2ger@92EF86A7.A020F168.187A1082.IP)
[17:12:07] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[17:12:28] *** Quits: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[17:12:44] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[17:13:01] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[17:13:02] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[17:13:51] <SiegeLord> eddyb, I'd suggest feature gating it until the full variadics are made, so the failing instantiation can be removed at a future point
[17:15:03] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[17:15:08] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[17:15:16] <eholk> sigh... I tried to implement memset in Rust, and LLVM optimized it into a call to memset
[17:15:32] <eddyb> heehee
[17:15:43] <eddyb> eholk: strcat should know more about that
[17:15:59] <strcat> eholk: yeah, look in rust-core's README
[17:16:06] <strcat> eholk: freestanding section
[17:16:14] <eddyb> SiegeLord: how would you implement type TupleConcat<T, U> = (..T, ..U); without that?
[17:16:31] <strcat> eholk: it's because rust outputs an 'extern "C"' function as a C ABI function wrapping a rust ABI function
[17:16:33] <SiegeLord> TupleConcat<..T, ..U>
[17:16:40] <eddyb> SiegeLord: sure. think twice
[17:16:50] <strcat> eholk: and LLVM only special-cases a function called 'memset' (the C wrapper)
[17:16:56] <strcat> PITA :(
[17:17:00] <eddyb> what would TupleConcat<int, uint, char, bool> be?
[17:17:25] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[17:17:32] <eholk> strcat: oh.. i see. Yeah, that's annoying
[17:17:48] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[17:17:58] <strcat> eholk: inline actually gets added as a pass before loop-idiom (which does the replacement) but... it's smart enough to interleave inlining with the other passes, iteratively
[17:18:06] <strcat> I don't really understand how that works
[17:18:10] <SiegeLord> eddyb, Just <..T> then ;)
[17:18:25] <strcat> so... just have to run a separate compilation with only inline ;p
[17:18:30] <SiegeLord> But I guess next you'll shift their order :P
[17:18:38] *** Quits: cdidd (cdidd@moz-BD30B6.broadband.corbina.ru) (Ping timeout)
[17:18:49] <eddyb> nmatsakis: is it a problem that using this type with non-tuple type args will fail? type TupleConcat<T, U> = (..T, ..U);
[17:18:53] <marshall_law> has anyone seen linker errors with libuv when building the latest master in OS X?
[17:18:54] *** Quits: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk) (Ping timeout)
[17:19:25] <marshall_law> specifically, http://pastie.org/8498800
[17:19:27] <eddyb> nmatsakis: as in, fail type conversion from AST types to middle/type, with a nice error
[17:19:31] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[17:19:46] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[17:19:50] <eddyb> nmatsakis: SiegeLord is killing me with "generic type instantiation should never fail"
[17:20:44] <nmatsakis> eddyb: it's ok to fail during type checking, the same happens if you use illegal bounds, it's not ok to fail later, during monomorphization. the problems don't generally arise with type aliases but rather functions.
[17:20:59] <bstrie> marshall_law: hm, I don't use mac... could try a "make clean" and see if that has any effect
[17:21:00] <nmatsakis> eddyb: so short version is "no not a problem but probably a problem later"
[17:21:07] <marshall_law> bstrie: yeah, tried that a few times already
[17:21:09] <marshall_law> :(
[17:21:20] <nmatsakis> eddyb: e.g., fn foo<T>(x: T) { let x: (..T) = ..; }
[17:21:23] <eddyb> nmatsakis: I'll deny this in generic functions (might enable later, with proper bounds)
[17:21:32] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[17:21:35] <marshall_law> bstrie: there is a librustuv that gets downloaded as part of stage0, is that just bindings for libuv, or does it also include libuv?
[17:21:44] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[17:21:58] <marshall_law> seems like libuv install might be required for building, just not documented?
[17:22:00] <bstrie> marshall_law: I *think* that's just bindings, but the whole i/o situation moves too fast for me to keep up with
[17:22:23] *** Joins: Blub\w (wry@620605B3.71150E1A.237AE2BA.IP)
[17:22:23] <marshall_law> hrmm k
[17:22:29] <bstrie> marshall_law: it shouldn't require you to install libuv yourself, no. have you ever built before?
[17:22:35] <eddyb> SiegeLord: see? I didn't research the compilation model for nothing :P
[17:22:37] <marshall_law> I have, but it's been a good while
[17:22:45] <marshall_law> this is probably the first time in 3 or 4 months
[17:23:03] <marshall_law> which I realize is an eternity for a project like rust :)
[17:23:32] <eddyb> nmatsakis: generic functions would use either bounds (maybe, discussion to have) or variadic type params (coming, but later, this is just the first step). thanks btw, for clearing it up :)
[17:23:34] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[17:23:37] <SiegeLord> eddyb, I don't see anything... you still have to introduce bounds
[17:23:51] <SiegeLord> Which means there'll be a way to make TupleConcat never fail
[17:23:51] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[17:23:59] <SiegeLord> (except in a bounds failure)
[17:24:02] <eddyb> SiegeLord: read what nmatsaki wrote
[17:24:15] <SiegeLord> I did read it, but apparetly we came to opposite conclusions :P
[17:24:36] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[17:24:59] <eddyb> SiegeLord: the problem is monomorphization. which happens when instantiating generic functions. and I said I would deny ..T in that case
[17:25:35] <nmatsakis> eddyb: if you had fn foo<T,U>(...) { let x: TupleConcat<T,U> = ...; }, 
[17:25:36] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[17:25:40] <SiegeLord> E.g. how will this work: foo<T, U>(x: T, y: U) { let t = TypeConcat<T, U>
[17:25:43] <SiegeLord> Damn, too slow :P
[17:25:47] <nmatsakis> what SiegeLord said
[17:25:48] <eddyb> SiegeLord: it wouldn't right now
[17:26:05] <nmatsakis> it wouldn't what?
[17:26:06] <eddyb> I mean, with my step
[17:26:35] <eddyb> *first step, dammit brain
[17:26:53] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[17:26:56] <eddyb> TupleConcat would expand to (..T, ..U), and since T and U are generic type params to a function, they can't be expanded
[17:27:27] <eddyb> that function won't pass typeck, even without any instantiations
[17:27:34] *** Joins: mikezaby (mikezaby@moz-AA896205.home.otenet.gr)
[17:27:40] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[17:27:43] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[17:28:20] *** Parts: mikezaby (mikezaby@moz-AA896205.home.otenet.gr) ()
[17:29:27] <eddyb> SiegeLord: I am considering fn foo<(..T), (..U)> instead of bounds, but that's for the last step or later
[17:29:51] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[17:30:22] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[17:30:46] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[17:31:19] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[17:31:26] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Input/output error)
[17:32:02] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[17:32:05] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[17:34:04] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[17:34:06] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[17:34:13] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Quit: class)
[17:35:20] *** Joins: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP)
[17:35:56] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Quit: 랜덤은 쇠퇴했습니다.)
[17:36:06] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[17:36:22] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:37:39] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[17:38:01] *** Quits: themgt (themgt@moz-83F07CDA.cm.vtr.net) (Quit: themgt)
[17:38:02] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[17:38:17] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[17:38:41] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[17:38:58] <strcat> bblum: lol, rcu is patented by IBM with an exception for GPL/LGPL projects...
[17:39:05] * strcat sighs
[17:39:12] <strcat> not that I care about patents
[17:39:29] <strcat> but that sort of disqualifies it as a stdlib feature, for a decade
[17:39:48] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[17:39:55] <marshall_law> bstrie: thanks for your help. installing libuv w/ homebrew seems to have fixed that issue
[17:40:19] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[17:40:31] <marshall_law> that should definitely be documented :)
[17:40:31] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[17:40:31] <strcat> ah I guess it actually expires fairly soon..
[17:41:58] *** Joins: themgt (themgt@moz-83F07CDA.cm.vtr.net)
[17:42:21] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[17:42:22] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[17:43:50] *** Joins: mikezaby (mikezaby@moz-AA896205.home.otenet.gr)
[17:44:02] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:44:17] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[17:45:11] *** Quits: joone (joone@moz-C50DC051.jf.intel.com) (Ping timeout)
[17:45:30] *** Joins: joone (joone@2678A73.2160464A.A34EC3BB.IP)
[17:47:38] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[17:48:22] *** Joins: flowsnake_ (flowsnake@moz-E4E567EE.aztw.cable.virginm.net)
[17:48:47] *** Quits: flowsnake (flowsnake@moz-E4E567EE.aztw.cable.virginm.net) (Ping timeout)
[17:48:48] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[17:48:53] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[17:49:11] *** Joins: huseby (huseby@moz-29C2662F.torproxy-readme-arachnide-fr-35.fr)
[17:49:59] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[17:50:16] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:50:20] *** Quits: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca) (Quit: canhtak)
[17:53:12] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[17:54:53] *** Quits: JanC (janc@moz-4E9EE63A.dsl.scarlet.be) (Ping timeout)
[17:55:22] *** Quits: ricepuddin (graham@moz-D96E943E.wlan.ic.ac.uk) (Ping timeout)
[17:58:12] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[17:58:23] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[17:58:37] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[18:00:02] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Client exited)
[18:00:14] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[18:00:26] <olsonjeffery> strcat: fyi regarding the earlier questions about supplying -L to rustpkg.. turns out you can do it via putting paths in RUST_PATH
[18:01:21] *** Joins: boredomist (ruqs@8186917.CC8FA3EE.E3401B6E.IP)
[18:01:49] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[18:02:00] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:02:12] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[18:02:56] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[18:03:52] <eholk> strcat: i found a way to defeat the loop-idiom pass. I just add asm!("") in the loop. It's way less than ideal, but it keeps me from needing the two-stage compilation
[18:04:40] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:04:40] *** ChanServ sets mode: +ao brson brson
[18:05:08] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[18:05:18] <olsonjeffery> rustpkg is a cruel mistress, indeed
[18:05:32] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:05:38] *** Quits: Ferreus (ferreus@moz-AB95F22C.dip0.t-ipconnect.de) (Ping timeout)
[18:05:50] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[18:05:50] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:05:56] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[18:05:56] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:09:34] <bstrie> what's the iterator-y way to do range_step?
[18:09:43] <bstrie> it's not .skip, and it's not .take...
[18:10:17] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[18:10:35] *** Joins: JanC (janc@moz-F97D63D7.dsl.scarlet.be)
[18:11:04] *** Joins: cdidd (cdidd@moz-24EB5156.broadband.corbina.ru)
[18:11:12] <Ms2ger> .collect().window_iter().map(|(&x,& y, &z)| x)? :)
[18:11:43] <bstrie> I mean I have a vector
[18:11:50] <bstrie> not even sure what .window_iter does
[18:12:00] <bstrie> also that's terrible
[18:12:21] <Ms2ger> :D
[18:12:58] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[18:13:01] <yuriks> isn't window_iter referring to a sliding windows through the vector?
[18:13:11] <Ms2ger> Yeah, I meant chunk_iter
[18:13:31] <bstrie> isn't there a .step or something
[18:16:19] <kimundi> bstrie: What exactly do you want to do?
[18:16:36] *** Joins: alisdair (textual@moz-7BF0A28B.public.wayport.net)
[18:16:41] <bstrie> kimundi: I have a vector, and I want to get every other element in the vector
[18:16:56] <bstrie> or every third, say
[18:17:11] <kimundi> Ah. I'm not sure we have something that allows that directly
[18:17:27] *** Quits: steveklabnik (steveklabn@moz-B7FC4CE6.nycmny.east.verizon.net) (Quit: bai)
[18:18:08] <kimundi> Should be fairly trivial to implement yourself though
[18:18:28] *** Joins: abinader (abinader@D8B9C081.E820043D.D4C04133.IP)
[18:19:36] <bstrie> is there a reason that method doesn't exist, though?
[18:19:48] <kimundi> No one needed it till now?
[18:19:50] <bstrie> it seems exactly analogous to what python lets you do
[18:20:29] <bstrie> like, I'm asking if it's not feasible to implement for some reason that's beyond me
[18:21:02] <kimundi> bstrie: Ah, I know how to emulate :P
[18:21:15] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Quit: Konversation terminated!)
[18:21:44] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[18:21:53] *** Joins: ricepuddin (graham@moz-B151A6F4.wlan.ic.ac.uk)
[18:22:23] <kimundi> rusti: let v = ~[1, 2, 3, 4]; v.move_iter().enumerate().filter(|(i, v)| i % 2 == 0).to_owned_vec()
[18:22:24] -rusti- <anon>:9:66: 9:72 error: mismatched types: expected `&(uint,int)` but found tuple (types differ)
[18:22:24] -rusti- <anon>:9          let v = ~[1, 2, 3, 4]; v.move_iter().enumerate().filter(|(i, v)| i % 2 == 0).to_owned_vec()
[18:22:24] -rusti-                                                                            ^~~~~~
[18:22:24] -rusti- error: aborting due to previous error
[18:22:26] -rusti- application terminated with error code 101
[18:22:31] <kimundi> rusti: let v = ~[1, 2, 3, 4]; v.move_iter().enumerate().filter(|&(i, v)| i % 2 == 0).to_owned_vec()
[18:22:32] -rusti- <anon>:9:71: 9:72 warning: unused variable: `v` [-W unused-variable (default)]
[18:22:32] -rusti- <anon>:9          let v = ~[1, 2, 3, 4]; v.move_iter().enumerate().filter(|&(i, v)| i % 2 == 0).to_owned_vec()
[18:22:33] -rusti-                                                                                 ^
[18:22:36] -rusti- ~[(0u, 1), (2u, 3)]
[18:22:36] *** Joins: apoelstra (username@moz-C92A9641.sw.biz.rr.com)
[18:23:09] <kimundi> rusti: let v = ~[1, 2, 3, 4]; v.move_iter().enumerate().filter(|&(i, _)| i % 2 == 0).map(|(_, v)| v ).to_owned_vec()
[18:23:10] -rusti- ~[1, 3]
[18:23:15] <kimundi> There! :P
[18:23:24] <bstrie> you're a monster
[18:24:16] *** Joins: nrc|afk (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[18:26:54] <strcat> eholk: it likely makes it very slow that way though :)
[18:27:02] <kimundi> rusti: struct StepSkip<I> { iter: I, step: uint } impl<A, I: Iterator<A>> Iterator<A> for StepSkip<I> { fn next(&mut self) -> Option<A> { for _ in range(0, self.step) { self.iter.next(); } self.iter.next()} } StepSkip{ iter: range(0, 100), step: 5 }.to_owned_vec()
[18:27:03] -rusti- ~[5, 11, 17, 23, 29, 35, 41, 47, 53, 59, 65, 71, 77, 83, 89, 95]
[18:27:08] <strcat> eholk: with the two stage version, it can make nice SSE/AVX loops (depending on --target-cpu)
[18:27:13] <kimundi> bstrie: ^ Manual implementation :P
[18:27:22] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[18:27:27] <strcat> eholk: it outputs a semi-unrolled AVX loop for my CPU
[18:27:34] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: ZZZzzz…)
[18:27:34] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[18:27:35] <strcat> faster than glibc mem*
[18:27:37] <strcat> ;p
[18:28:00] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[18:28:28] <kimundi> strcat: Would there be a issue with adding something like that Iterator to the Iterator lib, or is it to restricted/specific?
[18:28:56] *** Joins: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca)
[18:29:20] <strcat> kimundi: enumerate + filter?
[18:29:27] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[18:29:29] <kimundi> rusti: let v = ~[1, 2, 3, 4]; v.move_iter().enumerate().filter(|&(i, _)| i % 2 == 0).map(|(_, v)| v ).to_owned_vec()
[18:29:31] -rusti- ~[1, 3]
[18:29:32] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[18:29:42] <kimundi> Kinda long 
[18:30:13] <bstrie> coming from python, I really did expect there to be something like a .step() adapter
[18:30:43] <strcat> python has step?
[18:30:58] <bstrie> for i in foo[::2]:
[18:31:01] <bstrie> strcat: ^
[18:31:03] <strcat> well that's not an iterator
[18:31:11] <bstrie> right, but rust is never gonna support step in slices
[18:31:27] <bstrie> and it *is* an iterator, because it works with for :P
[18:31:29] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[18:31:42] <eddyb> it's a RandomAccessIterator
[18:31:45] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[18:31:56] <eddyb> (do we have those?)
[18:32:04] <strcat> eddyb: not fleshed out
[18:32:10] <strcat> 'accumulate', 'chain', 'combinations', 'combinations_with_replacement', 'compress', 'count', 'cycle', 'dropwhile', 'filterfalse', 'groupby', 'islice', 'permutations', 'product', 'repeat', 'starmap', 'takewhile', 'tee', 'zip_longest'
[18:32:19] <strcat> + map, filter, enumerate, reduce, zip
[18:32:24] <strcat> is what python has
[18:32:34] *** Joins: tikue__ (tkuehn@97B597C6.D038900B.689607DE.IP)
[18:33:17] <bstrie> the only reason there's no `step` there is because it's useful enough to warrant inclusion in the slice syntax
[18:33:36] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[18:33:39] <bstrie> but slices are different in rust, so I don't expect a step parameter there
[18:33:42] <olsonjeffery> anyone know if the github user JeremyLetang is here in #rust?
[18:33:46] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[18:33:58] <strcat> bstrie: oh, islice does it
[18:34:04] <strcat> class islice(builtins.object)
[18:34:06] <strcat>  |  islice(iterable, [star
[18:34:07] <bstrie> never even heard of islice
[18:34:08] <strcat> er
[18:34:15] <strcat> bstrie: itertools module has that stuff
[18:34:34] <bstrie> I figured it was itertools, but I rarely use more than the basic stuff
[18:34:34] <strcat> http://docs.python.org/3.3/library/itertools.html
[18:35:05] <eddyb> [::2] should be sugar for either a StepIterator: RandomAccessIterator or VecView with a step
[18:35:16] *** Quits: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP) (Quit: moostik)
[18:35:38] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[18:35:52] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[18:37:39] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[18:37:53] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[18:39:46] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Ping timeout)
[18:39:46] <olsonjeffery> woo segfault initializing sfml window
[18:39:57] <brson> strcat: it would be really cool to see a blog post about all the unsound behaviour we've encountered in llvm trying to implement a sound behavior. it's pretty alarming how difficult it is to identify and squeeze out all the bogosity
[18:40:03] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[18:40:05] <brson> *a sound language
[18:40:23] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[18:40:49] *** Quits: mikezaby (mikezaby@moz-AA896205.home.otenet.gr) (Input/output error)
[18:41:08] <strcat> brson: I talked to chandler carruth about it
[18:41:37] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[18:41:41] <strcat> the reason they don't support platform-dependent/unspecified results is that they view it as leading to unsafe behaviour anyway
[18:42:03] *** Quits: vmx (vmx@moz-6DDF6D37.dip0.t-ipconnect.de) (Quit: Leaving)
[18:42:04] <strcat> because from the perspective of C++, if you can't test for it with stuff like valgrind/sanitizers + a fuzzer, it's not going to be found
[18:42:04] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[18:42:08] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[18:42:22] <strcat> you'll cast from a float and index and array unsafely, and on another platform it will break
[18:42:24] <strcat> etc.
[18:42:36] <strcat> so.... I don't really think it applies to the same extent in rust
[18:42:39] <strcat> because most code is safe
[18:43:02] <strcat> but we *could* just add all the necessary checks and expose unsafe functions that aren't checked, but have assertions in debug builds
[18:43:14] <strcat> (or something like the sanitizers)
[18:43:16] * strcat shrugs
[18:43:25] <strcat> there's not really a great solution.
[18:44:06] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[18:44:11] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[18:44:22] *** Joins: bascule (bascule@moz-3D395603.compute-1.amazonaws.com)
[18:44:36] <bascule> zomg
[18:45:45] *** Joins: jvshahid (jvshahid@8395768B.D6F172E7.2A2F4638.IP)
[18:45:50] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[18:45:50] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Ping timeout)
[18:46:08] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[18:46:09] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[18:46:27] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[18:46:34] <kimundi> bascule: Greetings :P
[18:47:07] *** Parts: kmapped (kmapped@moz-2489C24B.compute-1.amazonaws.com) ()
[18:47:10] <strcat> brson: I should make a blog though :P
[18:47:28] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[18:47:30] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[18:48:09] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[18:48:28] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[18:49:51] <olsonjeffery> brson: huh. sdl-demo barfs for me in OSX.. is there a workaround? i added code to launch main() on the main thread, as well
[18:50:30] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[18:50:32] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[18:51:47] * bascule trying to brew install rust
[18:51:56] <bascule> :O
[18:52:31] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[18:52:33] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[18:52:41] * olsonjeffery just wants to get some kind of 2D graphics app set up.. segfaults w/ both sfml and sdl bindings
[18:52:49] <olsonjeffery> much sadface
[18:53:49] <strcat> olsonjeffery: try the sdl2 bindings?
[18:53:55] <strcat> sdl1 is basically useless now anyway ;p
[18:53:58] <strcat> sdl2 is so much better
[18:54:12] <olsonjeffery> where are the sdl2 bindings?
[18:54:15] <strcat> night and day. actually fully hardware accelerated and works with window management
[18:54:25] <strcat> olsonjeffery: https://github.com/AngryLawyer/rust-sdl2
[18:54:30] <strcat> haven't used them though
[18:54:42] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[18:54:42] * strcat knows about sdl2 from a user perspective only :)
[18:54:47] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[18:55:04] <olsonjeffery> ill give them a whirl
[18:55:37] <Leo`> strcat: wtf
[18:55:54] <canhtak> olsonjeffery: sfml segfault for you on osx?
[18:55:58] <Leo`> I just noticed I have a problem with the code that I sent you in Rust-gmp
[18:56:16] <Leo`> oh
[18:56:19] <Leo`> no
[18:56:20] <Leo`> nothing
[18:56:22] <Leo`> fuck
[18:56:24] <Leo`> i'm stupid
[18:56:31] <Leo`> strcat: expect a fix as soon as possible
[18:56:53] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[18:56:55] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[18:56:57] <Leo`> and please don't laught at me :d
[18:57:02] <brson> olsonjeffery: on os x sdl requires some magic setup, not defining a main function. you can look at the sprocketnes source code to see what it does
[18:57:19] <brson> there may be some docs in the rust-sdl repo about this but I'm not actually familiar at all with it anymore
[18:57:29] <strcat> brson: sdl2 doesn't, though
[18:57:51] <strcat> they moved it to a normal init function
[18:58:06] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[18:58:56] <Leo`> strcat: can I do a pull request if I git commit --amend the previous commit ?
[18:59:03] *** Quits: fabiand (fabiand@moz-430018B7.adsl.alicedsl.de) (Quit: Verlassend)
[18:59:05] <strcat> Leo`: hm?
[18:59:07] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[18:59:10] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[18:59:19] <Leo`> strcat: well I made a very stupid mistake in my fix for Rust-gmp
[18:59:24] *** Quits: feng (Mibbit@32B41A.FA7FF645.C7DB8B78.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:59:35] <Leo`> and i'd like to modify the previous commit rather than doing a new one
[18:59:40] <Leo`> :d
[18:59:48] <strcat> Leo`: well it won't really work via a pull request
[18:59:49] *** Quits: alisdair (textual@moz-7BF0A28B.public.wayport.net) (Ping timeout)
[18:59:57] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:00:02] <Leo`> strcat: ok
[19:00:08] <Leo`> I'll do another PR
[19:00:09] <Leo`> :/
[19:00:14] <Leo`> mh
[19:00:15] <eddyb> Leo`: --amend would work if the pull request wasn't merged yet
[19:00:16] <Leo`> another commit
[19:00:27] *** Joins: alisdair (textual@moz-7BF0A28B.public.wayport.net)
[19:00:40] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[19:00:52] *** Quits: tikue__ (tkuehn@97B597C6.D038900B.689607DE.IP) (Quit: tikue__)
[19:00:56] *** Quits: heftig (heftig@moz-D460AD18.dip0.t-ipconnect.de) (Ping timeout)
[19:01:10] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[19:01:16] <strcat> the rust-gmp history is already a mess of 50 updates for various breaking changes in rust
[19:01:18] <strcat> ;p
[19:01:35] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[19:01:46] <strcat> if I cared about keeping it clean I wouldn't have clicked merge but would have applied it and pushed it
[19:01:55] <Leo`> strcat: but it's really a shame for me to have such a stupid fix in any history .____.
[19:02:15] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[19:02:17] <strcat> what's wrong with it?
[19:02:18] *** Quits: alisdair (textual@moz-7BF0A28B.public.wayport.net) (Ping timeout)
[19:02:28] <strcat> I don't mind amending it
[19:02:37] * strcat doubts anyone cloned it
[19:03:00] *** Joins: tikue__ (tkuehn@97B597C6.D038900B.689607DE.IP)
[19:03:11] <Leo`> strcat: passed size_of<u64> as the size in mpz_import
[19:03:16] <Leo`> instead of size_of<u64>()
[19:03:18] <Leo`> :|
[19:03:21] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[19:03:21] <Leo`> but sshhh
[19:03:39] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:03:39] *** ChanServ sets mode: +ao brson brson
[19:05:25] *** Joins: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP)
[19:05:32] <olsonjeffery> heh. can't even get rust-sdl2 to build.. even w/ Makefile hacking
[19:05:52] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:05:55] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[19:06:14] *** Joins: fabiand (fabiand@moz-430018B7.adsl.alicedsl.de)
[19:06:19] *** Joins: alisdair (textual@moz-7BF0A28B.public.wayport.net)
[19:06:19] <strcat> Leo`: https://github.com/thestinger/rust-gmp/commit/6bfcd4c612d0a07a92462f19adb33871ea76deeb
[19:06:26] <strcat> the tests need to be ported too
[19:06:30] <sbalmos> aside from reading the source, are there any docs or writeups on Rust's heap management, memory allocation, etc? Kind of getting the Rust kernel itch after reading about it on OSNews.
[19:06:43] <Leo`> strcat: oh thanks :D
[19:06:50] *** Quits: boredomist (ruqs@8186917.CC8FA3EE.E3401B6E.IP) (Quit: Leaving)
[19:06:52] *** Joins: kmapped (kmapped@moz-2489C24B.compute-1.amazonaws.com)
[19:06:52] *** Joins: boredomist (ruqs@8186917.CC8FA3EE.E3401B6E.IP)
[19:07:00] <strcat> sbalmos: well if you're writing a kernel you probably won't be using the stdlib
[19:07:13] <sbalmos> strcat: Correct, I know
[19:07:29] <strcat> so it's not really any different than C++, beyond having memory lightweight references and the language support needed to build safe iterators, memory allocation, etc.
[19:08:08] <strcat> sbalmos: https://github.com/thestinger/rust-core could poke around there
[19:08:11] *** Quits: bynaryshef (bynaryshef@moz-647E89A6.mem.bellsouth.net) (Quit: Leaving)
[19:08:15] <sbalmos> strcat: Wasn't sure if there were heap object headers that are transparently created during allocation that mark whether a slot is mutable, the current owner, etc
[19:08:32] <strcat> sbalmos: mutability is generally static (for anything owned)
[19:08:36] <strcat> ownership is static too
[19:08:47] <strcat> and borrowed pointers are just unchecked ptrs at runtime
[19:08:56] <strcat> sbalmos: https://github.com/thestinger/rust-core/blob/master/core/heap.rs#L27
[19:09:08] <strcat> those exchange_free/exchange_malloc lang items define what unique pointers (~) use
[19:09:15] *** Joins: heftig (heftig@moz-D9FCE6C3.dip0.t-ipconnect.de)
[19:09:21] *** Joins: brson (brson@moz-7B0110AD.mv.mozilla.com)
[19:09:22] *** ChanServ sets mode: +ao brson brson
[19:09:22] <strcat> ~5 just calls exchange_malloc and initializes it, with exchange_free at the end of scope
[19:09:22] <sbalmos> ah!
[19:09:46] <sbalmos> and of course the exchange_* calls are compiler-inserted
[19:09:50] <strcat> sbalmos: with types like Rc/Gc, if you want mutability inside, you do need dynamic checks since there's no owner to inherit from
[19:10:04] <strcat> but otherwise there's no overhead like that
[19:10:12] <sbalmos> Yeah, then we get into the multi-owner GC-related stuff
[19:10:36] <strcat> https://github.com/thestinger/rust-core/blob/master/core/rc.rs https://github.com/thestinger/rust-core/blob/master/core/arc.rs
[19:10:42] <strcat> pretty simple really
[19:10:45] <sbalmos> ya
[19:10:56] <strcat> I'll remove RcMut once Mut<T> lands in libstd (assuming it does)
[19:10:59] *** Quits: jvshahid (jvshahid@8395768B.D6F172E7.2A2F4638.IP) (Ping timeout)
[19:11:04] <strcat> and then it will just be Rc<Mut<T>>
[19:11:07] <sbalmos> okay, separately but related, is there a compiler switch, runtime switch, anything that will disallow unsafe {} blocks in a crate?
[19:11:15] <strcat> sbalmos: I don't think so
[19:11:23] <strcat> we could add a lint
[19:11:35] <strcat> (rustc -W help to see the existing ones)
[19:11:48] <sbalmos> Basically leaning towards any user-space code, or even any code outside of the microkernel, cannot use unsafe blocks.
[19:12:45] <o11c> sbalmos: so you're not allowing linking to any C libraries?
[19:13:04] <sbalmos> o11c: In the initial theory, no.
[19:13:32] <sbalmos> o11c: I'm actaully revisiting and adapting designs I originally had for a managed CLR-based kernel.
[19:16:45] <sbalmos> o11c: Trying to enforce the memory model through type/pointer safety. Don't know at this point whether C libs would be supported, because inherently no default pointer safety. Not even sure I'll have a POSIX layer honestly. :)
[19:16:52] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[19:17:22] *** Quits: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net) (Ping timeout)
[19:19:37] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[19:19:43] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[19:20:18] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[19:20:49] *** Quits: themgt (themgt@moz-83F07CDA.cm.vtr.net) (Quit: themgt)
[19:20:55] *** Joins: Ferreus (ferreus@moz-BC50A565.pools.arcor-ip.net)
[19:20:55] *** Joins: mib_0dac29 (Mibbit@moz-4C4BC873.cable.virginm.net)
[19:21:05] *** Joins: themgt (themgt@moz-83F07CDA.cm.vtr.net)
[19:21:37] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[19:21:40] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[19:21:42] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[19:22:00] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:22:53] *** Quits: brson (brson@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[19:23:41] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[19:23:46] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[19:24:38] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[19:25:02] *** Quits: logicalparadox (logicalpar@moz-C73156AE.dr01.wlbr.pa.frontiernet.net) (Client exited)
[19:25:49] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[19:25:50] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[19:26:53] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[19:27:10] <marshall_law> has anyone in OS X seen this error during stage1 build? error: Object file x86_64-apple-darwin/stage1/lib/rustc/x86_64-apple-darwin/lib/std.o is not writeable -- check its permissions.
[19:27:24] <marshall_law> the file is definitely writeable
[19:27:40] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:27:40] *** ChanServ sets mode: +ao brson brson
[19:28:26] <marshall_law> in fact it looks like it's created before that error. std.o is 6.7MB with rw-r--r--
[19:28:40] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[19:28:45] <marshall_law> (owner is the same user that is building)
[19:29:20] *** Joins: geoffhill (geoffhill@moz-738DC0DB.org)
[19:30:52] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[19:30:57] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:30:57] *** ChanServ sets mode: +ao brson brson
[19:34:06] *** pmoore is now known as pmoore|tea
[19:34:22] <Earnestly> The amount of "[-- Type: multipart/alternative, Encoding: 7bit, Size: 1.8K --]" in your ML is too damn high :p
[19:34:51] <olsonjeffery> so i have a rust library (libsdl2) that im trying to link against in a rustpkg project.. rust-sdl2 isn't in rustpkg.. and when i refer to it in my code via "extern mod sdl2", rustpkg keeps trying to look for a rustpkg project with that name
[19:34:54] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[19:34:58] <olsonjeffery> and im providing the path to the lib via RUST_PATH
[19:35:26] <olsonjeffery> anyone have any ideas/thoughts here.. am i supposed to supply an attribute to the `extern mod sdl2;` link to override the default rustpkg logic?
[19:39:58] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Ping timeout)
[19:41:43] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[19:41:57] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[19:43:10] *** Joins: ktt3ja (Mibbit@moz-D69B60E4.hsd1.va.comcast.net)
[19:43:39] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Client exited)
[19:43:57] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[19:43:57] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[19:44:09] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[19:44:30] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[19:45:19] *** Joins: g3xzh (g3xzh@moz-5C189D89.red.bezeqint.net)
[19:45:30] *** nrc|afk is now known as nrc
[19:46:10] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[19:46:11] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[19:46:59] *** Quits: matt-r (mattr@8B499E37.E81D922B.BECC6F7D.IP) (Ping timeout)
[19:47:34] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[19:47:37] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0.1/20131112160018])
[19:48:17] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[19:48:19] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[19:48:19] <sbalmos> strcat: For sake of completeness / morbidity, is there anything in rust-core that deals with the GC, or is that all buried down in the C++ runtime side?
[19:48:21] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[19:48:32] <strcat> sbalmos: there's no C++ runtime, for rust-core
[19:48:37] <strcat> it doesn't need libc either
[19:48:49] <strcat> (although libc is a cfg flag enabling a lot of functionality)
[19:48:52] *** pmoore|tea is now known as pmoore
[19:49:00] <strcat> sbalmos: and it won't have GC
[19:49:20] <strcat> just reference counted pointers, atomic reference counting, and I guess weak pointers
[19:50:14] <strcat> https://github.com/thestinger/rust-core/blob/master/support.rs all that's needed to work without libc
[19:50:22] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[19:50:29] <sbalmos> strcat: Right, rust-core is just the in-language perspective of the runtime.
[19:50:46] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[19:50:51] <strcat> sbalmos: there's no out of language perspective though
[19:51:21] <strcat> there's just compiler codegen and whatever is in rust-core
[19:52:06] <sbalmos> err... okay. Guess I was confusing things reading the docs, where a GC is implied that runs at some non-deterministic point after the last owned pointer goes out of scope
[19:52:24] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[19:52:41] <strcat> sbalmos: owned pointers are cleanup up by deterministic destructors
[19:52:45] *** Joins: meTaAU (admin@moz-3405E52F.lns20.per1.internode.on.net)
[19:52:47] *** Quits: meTaAU_ (admin@moz-4346BE77.lns20.per1.internode.on.net) (Ping timeout)
[19:53:19] <strcat> rust-core really doesn't have a GC or any kind of runtime beyond whatever the linker will add to every binary
[19:54:08] <strcat> (and by what the linker will add, I just mean the startup shim it adds for a C 'int main(int argc, char **argv) { return 0; }' program)
[19:55:02] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[19:55:08] <strcat> cleaned up by*
[19:56:33] <g3xzh> hi guys, just wondering - how long does it take to check a pull request?
[19:56:59] <sbalmos> strcat: So creating a @blah owned pointer gets converted into, I guess, an Arc<T> by the compiler, with ARC inc's and dec's for every additional owned pointer declared to the same box. And statically during compile, the compiler can work out when that count goes to 0?
[19:57:21] <strcat> sbalmos: there's no @ in rust-core, and it's being removed from the syntax anyway
[19:57:40] <strcat> sbalmos: owned pointers own their own memory allocation - they have value semantics
[19:57:56] <sbalmos> O_O. Oookay, my head hurts. :)
[19:58:16] *** Joins: steveklabnik (steveklabn@moz-74512D7C.nycmny.fios.verizon.net)
[19:58:30] <strcat> sbalmos: if a type has a dtor, the compiler calls the dtor at the end of the scope
[19:58:38] <strcat> if you move from the type, it cancels the dtor call
[19:58:39] <sbalmos> right
[19:59:13] *** Quits: Sorella_ (quildreen@2392D500.600E39D3.1ED99692.IP) (Quit: Ex-Chat)
[19:59:39] <strcat> sbalmos: Rc and Arc just bump the reference count when you call clone(), and decrease it in the destructor
[19:59:49] <strcat> and when the last one for that box goes out of scope, it destroys it and the contained value
[20:00:01] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[20:00:05] <strcat> if you just move them, there's no refcount though
[20:00:44] <strcat> there aren't any implicit refcounts (in rust-core) or heap allocations (in rust-core or the stdlib)
[20:01:08] *** Quits: alisdair (textual@moz-7BF0A28B.public.wayport.net) (Ping timeout)
[20:01:16] <strcat> it's somewhat closer to C in that way that C++, where assignments and so on can call copy/move constructors
[20:01:21] <strcat> than C++*
[20:02:02] <sbalmos> So managed boxes are going away? (re-reading the docs to get my names straight)
[20:02:11] *** Joins: matt-r (mattr@8B499E37.E81D922B.BECC6F7D.IP)
[20:02:14] <strcat> sbalmos: the syntax is, yes
[20:02:22] <strcat> the functionality will still be in the compiler/stdlib
[20:02:32] <strcat> rust-core won't support it though - just refcounting
[20:02:43] <sbalmos> strcat: k. So really, from a syntax perspective, we're down to ~ owned-boxes and borrowed pointers?
[20:02:53] <strcat> sbalmos: yeah
[20:02:59] <Ms2ger> And *?
[20:03:06] <strcat> and raw pointers, yeah, but they're for unsafe code
[20:03:07] <sbalmos> Ms2ger: * is a whole other mess. :D
[20:03:09] <Ms2ger> Even if we don't like to talk about it :)
[20:03:46] <strcat> sbalmos: I have a PR open atm updating the tutorial for this
[20:03:54] <Ms2ger> sbalmos, also, wait until you hear of the plan to do ~T -> Unique<T> :)
[20:04:09] <strcat> sbalmos: https://github.com/mozilla/rust/pull/10589
[20:04:28] <strcat> I'll do the manual later, and the feature gate on @ needs to have the wording updated
[20:04:44] <strcat> we still need deref sugar for Rc/Arc/Gc too.
[20:04:53] <sbalmos> strcat: Okay... So really, we'll have to clone() to local ~ pointers, pass those around, and apparently that would do ARC. So, presumably, the compiler (in the future, or already does now?) figures out when the refcount goes to 0, and free()s (C free) the box on the heap all those ~ pointers pointed to?
[20:05:25] <strcat> sbalmos: Rc/Arc just use destructors
[20:05:25] *** Joins: alisdair (textual@moz-7BF0A28B.public.wayport.net)
[20:05:35] <strcat> you don't need to clone to ~ pointers
[20:06:08] <strcat> { let x = ~5 /* calls malloc, checks for out-of-memory, sets the memory to 5 */ } /* free call at end of scope */
[20:06:15] *** Quits: matt-r (mattr@8B499E37.E81D922B.BECC6F7D.IP) (Ping timeout)
[20:06:17] <sbalmos> strcat: k. I *think* it makes sense. Just been a long while since I did C++. Too much time in Java/C# land. :D
[20:06:43] <strcat> { let x = Rc::new(5) /* calls malloc, checks for out-of-memory, sets the memory to 5, refcount to 1 */ } /* reduce refcount, it's 0, free the memory */
[20:07:10] <strcat> if you clone() that `x` variable, all it does is increase the refcount to 2
[20:07:23] <strcat> the destructors take care of reducing the reference count when it goes out of scope
[20:07:36] <strcat> atm, x.borrow() is how you get an &T ptr to the contained value
[20:08:06] <strcat> anyway the only overhead of Rc<T> over ~T is that the malloc() allocation needs room for an extra integer to hold the count
[20:08:09] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[20:08:13] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[20:08:30] <strcat> clone() with ~T allocates a new box and copies to it, clone() with Rc increases the reference count
[20:08:39] <sbalmos> So, naively, impl Drop for Rc<T> does a T.count--, if T.count == 0 free()
[20:08:43] <strcat> (but ~T can be freely mutated since it's owned, Rc can't)
[20:08:46] <strcat> sbalmos: yeah
[20:08:50] *** Joins: vmx (vmx@moz-2C4FC9DF.pools.arcor-ip.net)
[20:08:51] <strcat> sbalmos: and if the type has a dtor, it calls that before free
[20:09:00] <sbalmos> k.
[20:09:09] *** Joins: mihneadb (mihneadb@AF2D4005.FCA1F8A.FB866788.IP)
[20:09:11] *** Quits: mihneadb (mihneadb@AF2D4005.FCA1F8A.FB866788.IP) (Quit: mihneadb)
[20:09:18] <sbalmos> In a way, though I've never written in it, it's a bit like the Arc of Obj-C nowadays.
[20:09:33] <sbalmos> (I do a lot of language reading and comparing. :D)
[20:09:45] <strcat> sbalmos: yeah, it's a lot like that, just that the refcounts as explicit since the usual thing is to move the existing reference
[20:09:51] <strcat> for example
[20:10:08] *** Joins: matt-r (mattr@8B499E37.E81D922B.BECC6F7D.IP)
[20:10:10] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[20:10:13] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[20:10:16] <strcat> let x = Rc::new(5); foo(x /* by-value */);
[20:10:26] <strcat> in most languages, passing it would bump the refcount
[20:10:34] <strcat> and it wouldn't get freed until the call stack unwound all the way back up
[20:10:38] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[20:10:39] <strcat> and `x` went out of scope
[20:10:53] <strcat> but rust will move it into `foo`, without bumping the refcount
[20:11:03] <strcat> so... it's a bit more painful, but it frees much earlier and does less work
[20:11:49] <sbalmos> Though since it's moved, let x = Rc::new(5); foo(x); bar(x); the call to bar wouldn't compile, throwing a moved pointer error?
[20:11:56] *** Quits: abinader (abinader@D8B9C081.E820043D.D4C04133.IP) (Ping timeout)
[20:12:04] *** Joins: vadimcn_ (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[20:12:04] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0.1/20131112160018])
[20:12:07] *** vadimcn_ is now known as vadimcn
[20:12:10] <comex> strcat: is there a reason why rc doesn't provide an easy way to have weak references?
[20:12:12] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[20:12:13] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[20:12:30] *** Joins: vadimcn__ (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[20:12:34] <strcat> comex: weak references add more overhead, so it just doesn't do it atm
[20:12:54] *** Quits: vadimcn__ (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Client exited)
[20:12:54] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Client exited)
[20:13:11] <strcat> C++ shared_ptr has the issue of being incredibly slow due to having weak refs + atomic refcounting
[20:13:26] <o11c> weak refs alone are just a word of size
[20:13:29] <strcat> that's why rust has a separate Arc (it's really quite a lot slower in many cases)
[20:13:29] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[20:13:50] <sbalmos> strcat: Sorry for dominating the conversation. :)
[20:14:00] *** Quits: mib_0dac29 (Mibbit@moz-4C4BC873.cable.virginm.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:14:08] <strcat> sbalmos: yeah you would need to do foo(x.clone())
[20:14:11] <strcat> to let bar(x) work
[20:14:23] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[20:14:31] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[20:14:32] <sbalmos> strcat: Feels like it's heading a lot closer to Erlang
[20:14:38] <comex> i guess that with that and the inability to even have non-Send rc without unsafe, it feels limited as a replacement for @
[20:14:42] *** Joins: vadimcn_ (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[20:14:51] *** Quits: vadimcn_ (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0.1/20131112160018])
[20:14:53] <strcat> comex: @ isn't sendable, either
[20:14:56] <comex> but i haven't even written much rust code yet, so i guess i'll have to write more and see my impressions
[20:15:12] <strcat> Arc and Rc can have the same interface
[20:15:14] <comex> what i mean is putting @ on values that are not Send
[20:15:18] <strcat> Gc is the replacement for @
[20:15:18] <comex> types
[20:15:19] <comex> *yawn*
[20:15:26] <strcat> comex: well, Rc works for Freeze or Send types
[20:15:30] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[20:15:45] <strcat> Rc::new wants Freeze and Rc::from_send is there too
[20:15:51] <strcat> Gc::new has no bounds
[20:15:51] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[20:16:25] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[20:16:26] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[20:16:33] <apoelstra> is it possible to implement a linked list without * pointers?
[20:16:38] <strcat> apoelstra: sure
[20:16:47] <bstrie> maybe not doubly-linked, though :)
[20:16:53] <strcat> bstrie: doubly-linked too
[20:16:56] <apoelstra> hmm, i am trying to write a prime seive
[20:17:05] <bstrie> strcat: with ~ pointers, or just without * pointers?
[20:17:07] <strcat> just not doubly-linked without either gc or refcounting
[20:17:11] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[20:17:22] <comex> i'm skeptical of gc just because i guess it would make it harder to integrate a rust library into a non-rust program
[20:17:32] <apoelstra> ok, i'm trying to get away with neither..
[20:17:45] <apoelstra> but i cannot have two variables pointing to the same thing with ~ pointers, can i?
[20:17:51] <bstrie> apoelstra: unsafe pointers are ok to use, you just need to be careful
[20:17:59] <strcat> apoelstra: a singly or doubly linked list
[20:18:04] <o11c> comex: if gc is in the library, it won't be a problem
[20:18:05] <bstrie> apoelstra: rust doesn't seek to completely eliminate unsafety, only contain it
[20:18:09] <apoelstra> strcat: singly
[20:18:14] <strcat> apoelstra: no need for anything but ~ then
[20:18:15] <apoelstra> bstrie: ok
[20:18:27] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[20:18:31] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[20:18:36] <apoelstra> strcat: well, i want to iterate through the list, and on each item i iterate through the remainder of the list
[20:18:43] <comex> o11c: gc moves objects around, though, doesn't it? so it would be hard to integrate into an API
[20:18:44] <apoelstra> dropping everything which is a multiple
[20:18:45] <strcat> apoelstra: a list, balanced binary search tree, trie, and so on are all possible without unsafe code
[20:18:50] <apoelstra> so i think i'd need to use unsafe code
[20:18:53] <o11c> comex: depends on the gc
[20:18:57] <comex> rust's gc
[20:18:58] <strcat> apoelstra: you don't need unsafe code for that
[20:19:07] <apoelstra> strcat: i think you are right, but i'm not seeing how..
[20:19:13] <strcat> apoelstra: &mut, swaps
[20:19:17] <apoelstra> i'll keep at it, maybe i am just doing something syntactically stupd
[20:19:21] <strcat> apoelstra: util::swap
[20:19:29] <apoelstra> thx, i'll check it out
[20:19:40] <strcat> apoelstra: or look into the std::trie implementation
[20:20:04] *** Quits: andre (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[20:20:14] <apoelstra> cool, will also do that
[20:20:44] *** Quits: tikue__ (tkuehn@97B597C6.D038900B.689607DE.IP) (Ping timeout)
[20:20:48] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[20:20:53] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[20:21:03] <sbalmos> strcat: So, okay, even more bash-head-with-hammer, we've gone over Arc and how that works... What about Gc?
[20:21:24] <strcat> sbalmos: well, Gc will just use compiler hooks (lang items)
[20:21:40] <bstrie> sbalmos: easy, Gc doesn't work at all :)
[20:21:47] <strcat> bstrie: it exists
[20:21:54] <strcat> it currently uses @
[20:22:03] <sbalmos> strcat: So they're just similar intrinsics, like exchange_new, etc, that end up being hooked in somewhere?
[20:22:05] <bstrie> but that's still not a gc, eh
[20:22:09] *** Joins: abinader (abinader@496D17B0.2513D022.AD91B79.IP)
[20:22:10] <bstrie> just refcounting without cc
[20:22:16] <strcat> bstrie: a valid gc would be leaking until the end of a task
[20:22:32] <strcat> sbalmos: yeah but more complex. and it will require support elsewhere, in all likelihood
[20:22:50] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[20:22:56] <strcat> rust-core gets to live a happy life without the complexity of tracing gc ;p
[20:23:06] <sbalmos> see, now we're getting into the typical things / issues with implementing a GC that I'm "familiar" with. :)
[20:23:22] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[20:23:44] <strcat> sbalmos: a gc for rust has to cope with the fact that there are unmanaged ptrs into the gc'ed boxes
[20:23:54] <strcat> so it can't do much moving
[20:24:09] <strcat> and it will have to integrate with custom allocators and so on somehow...
[20:24:23] <strcat> anyway atm there is no actual gc.
[20:24:33] <strcat> a Gc<T> box looks like
[20:24:49] <sbalmos> right, yeah, now you're hitting familiar territory for me. :)
[20:24:52] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[20:25:11] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[20:25:20] <sbalmos> strcat: The compiler just inserts calls to some GC, somewhere, provided "externally" of sorts, that actually does the real GC'ing
[20:25:21] <strcat> Box<T> { { ref_count: uint, tydesc: *TyDesc, prev: *mut Box, next: *mut Box }, T }
[20:25:31] <strcat> sbalmos: well
[20:25:35] <strcat> atm @ does refcounting.
[20:25:39] <sbalmos> right
[20:25:44] <strcat> but it also builds an intrusive doubly linked list threaded through the allocations
[20:25:54] <strcat> and at the end of the task a poor man's cycle collector runs and cleans them up
[20:25:54] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[20:26:14] <sbalmos> heh, yeah k
[20:26:17] <strcat> using the tydesc to call a destructor ptr
[20:26:21] *** Quits: fabrice1 (fabrice@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:26:49] <strcat> (*box.tydesc).drop_glue(ptr_to_object) or whatever
[20:26:55] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[20:27:42] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[20:28:04] <sbalmos> Haven't even gotten to TyDesc yet
[20:28:45] <sbalmos> So, again naively, a kernel could/would use Arc internally, and then non-core kernel and userspace could use Gc, in theory using the same Arc services of the core kernel to provide the Gc functionality.
[20:28:45] *** Quits: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca) (Quit: canhtak)
[20:28:57] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[20:28:57] *** Joins: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca)
[20:29:02] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[20:29:05] *** Joins: fabrice (fabrice@moz-BBE3ABD.mv.mozilla.com)
[20:29:28] <strcat> sbalmos: well I don't think Gc would use refcounting
[20:29:41] *** Quits: fabrice (fabrice@moz-BBE3ABD.mv.mozilla.com) (Max SendQ exceeded)
[20:29:44] <sbalmos> true, what's the point of Gc over Arc then? :P
[20:29:48] <sbalmos> (just renaming it)
[20:30:03] <strcat> Rc is the standard refcounting btw
[20:30:08] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[20:30:09] <strcat> Arc is just atomic, so it can be sent between tasks
[20:30:23] <sbalmos> Doh. Keeping relating the A = automatic
[20:30:29] <strcat> they are basically the same beyond how the do counting
[20:30:34] <strcat> they do*
[20:30:36] <kimundi> Gc<T> will use tracing garbace collection but currently has the syntax @T and uses reference counting internally
[20:30:39] <bstrie> needs to be renamed
[20:30:39] *** Joins: fabrice (fabrice@moz-BBE3ABD.mv.mozilla.com)
[20:30:44] <bstrie> Arc = badname
[20:30:46] <strcat> bstrie: to what though?
[20:30:49] <strcat> SendRc?
[20:30:52] <bstrie> AnythingElseRc
[20:30:53] <Ms2ger> Ellipse
[20:30:57] <bstrie> Brc
[20:31:02] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[20:31:02] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[20:31:08] <sbalmos> Src? :P
[20:31:13] <kimundi> SyncRc?
[20:31:20] <strcat> SendRc, MutexSendRc, RWSendRc
[20:31:22] <strcat> ;p
[20:31:26] <bstrie> Shared<>
[20:31:26] <strcat> kimundi: it doesn't really sync though
[20:31:29] *** Joins: valenting (Thunderbir@808EE6B5.84D5EFD5.FB866788.IP)
[20:31:36] <strcat> sync usually means a mutex
[20:31:45] <kimundi> ah, okay
[20:32:35] *** Quits: abinader (abinader@496D17B0.2513D022.AD91B79.IP) (Ping timeout)
[20:33:01] *** Joins: abinader (abinader@496D17B0.2513D022.AD91B79.IP)
[20:33:06] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[20:33:20] <bstrie> the problem with "Arc" isn't just that it's a collision, it's that it's such a specific term in the first place that nobody expects an alternative meaning
[20:33:20] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[20:33:31] <strcat> AtomicRc?
[20:33:34] <bstrie> like, if rust had "const", then nobody would presume what it means because there's no one meaning
[20:33:34] <strcat> SendRc?
[20:33:40] <sbalmos> strcat: Rather like that
[20:33:54] <sbalmos> strcat: AtomicRc
[20:33:58] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[20:34:08] <bstrie> AtomRc
[20:34:28] * bstrie looking for a unicode nucleus symbol
[20:34:44] <sbalmos> bstrie: 'course you have to be careful there, as Atom has a specific meaning in other languages too :)
[20:34:52] <bstrie> does it?
[20:35:01] <bstrie> thought it was just a processor
[20:35:12] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[20:35:12] <sbalmos> No. I forget if it's Python, Ruby, or Erlang.
[20:35:13] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[20:35:23] <steveklabnik> not in ruby
[20:35:26] <sbalmos> One of them actually has an Atom type, sort of like an object
[20:35:34] <steveklabnik> probably erlang, iirc
[20:35:36] <sbalmos> I think it's Erlang
[20:35:37] <steveklabnik> mines'a  bit rusty
[20:35:38] <steveklabnik> ;)
[20:35:46] <sbalmos> steveklabnik: cute
[20:36:01] <bstrie> "An atom is a literal, a constant with name. An atom should be enclosed in single quotes (') if it does not begin with a lower-case letter or if it contains other characters than alphanumeric characters, underscore (_), or @."
[20:36:05] <bstrie> ^ erlang
[20:36:31] <Ms2ger> An atom in Gecko is an interned string
[20:36:44] <bstrie> so, I think an atom in erlang is a string literal?
[20:36:46] <sbalmos> directly relates to an enum value
[20:37:24] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[20:37:46] <strcat> bstrie: I wouldn't really mind calling it AtomicRc, but it gets really noisy for the mutable ones
[20:37:46] <bstrie> we just need to find synonyms of "atomic"
[20:37:54] <bstrie> "indivisible"
[20:37:55] <bstrie> Irc
[20:37:56] <bstrie> perfect
[20:37:59] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[20:37:59] *** ChanServ sets mode: +o tjc
[20:38:03] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Input/output error)
[20:38:03] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[20:38:09] <strcat> AtomicRc, MutexAtomicRc, RWAtomicRc
[20:38:12] <strcat> not so fun.
[20:38:27] <strcat> although perhaps read-write locks aren't really useful in reality ;p
[20:38:29] <kimundi> SendRc seems like the best fit imo
[20:38:37] *** Quits: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca) (Quit: canhtak)
[20:38:49] <bstrie> sigh
[20:39:09] <kimundi> "A Rc that can be send between tasks, and which needs to be threadsafe for that"
[20:39:09] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[20:39:10] <sbalmos> Language wankery, gotta love it
[20:39:21] <eholk> kimundi: I feel like Send implies giving up ownership, and the point of Arc is that two tasks can access it at the same time
[20:39:26] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[20:39:34] <sbalmos> eholk: Lend?
[20:39:36] <bstrie> I don't mind if we don't change it, but then I refuse to ever answer any question about them, and will instead complain loudly whenever they are mentioned
[20:39:36] <kimundi> Well, that is not what Send means
[20:39:46] <strcat> sbalmos: it's not really lending though, it's actually shared ownership
[20:39:59] <sbalmos> strcat: CreateLlc? :D
[20:40:01] *** Joins: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca)
[20:40:06] <kimundi> Send just means "This owns all it's memory, so can be safely send across tasks"
[20:40:14] <bstrie> not that I don't already complain loudly whenever they are mentioned
[20:40:18] <bstrie> or all the time, really
[20:40:22] <kimundi> Which is true for a Rc handle
[20:40:24] <strcat> AnarchoSyndicalistRc
[20:40:34] <sbalmos> O_O
[20:40:39] <bstrie> strcat: perfect, and the user can typedef it if they have a problem with it
[20:40:47] <sbalmos> strcat: ExistentialRc
[20:40:54] <bstrie> MonadRc
[20:41:00] <benh> Let's just go with Rc1, Rc2, etc
[20:41:10] <strcat> Rc, SlowerRc
[20:41:18] <bstrie> SlowestRc
[20:41:27] <strcat> hm
[20:41:32] <sbalmos> GlacialRc
[20:41:37] <isaacd> SharedRc
[20:42:12] <bstrie> if we only have one type for shared memory, I wonder if it's at all important to have "Rc" in the name
[20:42:18] *** Joins: tikue__ (tkuehn@97B597C6.D038900B.689607DE.IP)
[20:42:28] <strcat> bstrie: https://github.com/thestinger/rust-core/blob/master/core/concurrent.rs
[20:42:37] <strcat> soon to have vectors and hash tables with fine-grained locking too.
[20:42:45] <steveklabnik> strcat: lolol
[20:42:47] <bstrie> what are you calling them
[20:42:53] <steveklabnik> re: syndicalism
[20:42:54] <o11c> Rc is shorter than shared_ptr
[20:42:59] <strcat> steveklabnik: :)
[20:43:02] <strcat> bstrie: uhh, I don't know ;p
[20:43:04] <kimundi> Rc1 and RcA :P
[20:43:10] <strcat> concurrent::HashMap? ;p
[20:43:18] <strcat> atm I have...
[20:43:31] <kimundi> atomic::Rc
[20:43:43] <strcat> concurrent::Queue, concurrent::BlockingPriorityQueue, concurrent::BoundedQueue, concurrent::BoundedPriorityQueue ;p
[20:43:48] <strcat> (yeah I know the first 2 aren't consistent)
[20:43:48] <bstrie> concurrent::Rc
[20:43:51] <bstrie> Crc
[20:44:00] <strcat> bstrie: it's a bit of a pain to do it that way
[20:44:07] <strcat> concurrent is long so you're going to 'use' it
[20:44:09] <strcat> and they'll clash
[20:44:24] <bstrie> but is "Rc" in the prelude? or any of those, even?
[20:44:25] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[20:44:40] <sbalmos> strcat: Idiot me comes from Java and C# land, I'm assuming there are/will be traits for just Queue, List, etc, with multiple actual implementations?
[20:44:43] <bstrie> or am I writing `use std::hashmap::HashMap` for nothing
[20:45:04] <strcat> sbalmos: well, I only plan on making traits where there can be code reuse
[20:45:23] <strcat> I don't think it will be common to want to mix and match different kinds of concurrent queues
[20:45:23] <kimundi> hm... mod concurrent { pub struct HashMap; pub ConcurrentHashMap = self::HashMap }
[20:45:28] *** Quits: fabrice (fabrice@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:45:28] *** Quits: alisdair (textual@moz-7BF0A28B.public.wayport.net) (Ping timeout)
[20:45:32] <kimundi> Pick you poison :P
[20:45:57] <strcat> sbalmos: I do have a private queue trait in that module to reuse the synchronization code...
[20:45:59] <kimundi> pub type ConcurrentHashMap = self::HashMap even
[20:46:18] <strcat> priority queues and deques (wrapped into queues) need the same thing
[20:46:18] <sbalmos> strcat: Not even thinking concurrent, just different collection implementations in general
[20:46:29] <strcat> sbalmos: well the stdlib has Map and Set traits
[20:46:39] <strcat> and 3 implementations (trie, red-black tree, hashmap)
[20:46:43] <sbalmos> that's what I thought. Losing track of everything already. :D
[20:47:12] <sbalmos> strcat: Last thing before I have to go to a meeting. I know about 'static, is there a list elsewhere of what 'a and others is?
[20:47:23] <strcat> sbalmos: there aren't any other special ones
[20:47:24] *** Joins: fabrice (fabrice@moz-BBE3ABD.mv.mozilla.com)
[20:47:26] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:47:28] <kimundi> Only 'static and 'everythingelse
[20:47:42] <sbalmos> that's what I thought. So what's 'a?
[20:47:43] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Connection reset by peer)
[20:47:46] <strcat> sbalmos: the naming convention is just 'a, 'b, 'c
[20:47:51] <strcat> they're a named lifetime
[20:47:51] <kimundi> a named lifetime
[20:47:56] *** Quits: fabrice (fabrice@moz-BBE3ABD.mv.mozilla.com) (Max SendQ exceeded)
[20:47:57] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:47:57] <strcat> like
[20:48:14] *** Joins: fabrice (fabrice@moz-BBE3ABD.mv.mozilla.com)
[20:48:15] <strcat> fn foo<'a>(x: &'a Bar) -> &'a int { x.baz }
[20:48:18] <strcat> er
[20:48:19] <benh> also a loop label~
[20:48:20] <kimundi> They just exists to have a name to link two thinks together with
[20:48:22] <strcat> fn foo<'a>(x: &'a Bar) -> &'a int { &x.baz }
[20:48:25] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[20:48:36] <o11c> is there also 'self ?
[20:48:38] <strcat> says that the return value is linked to `x`
[20:48:42] <strcat> o11c: no longer special in master
[20:48:55] <strcat> just yet another arbitrary name now
[20:49:24] *** Joins: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[20:49:35] <sbalmos> my head hurts now. ;)
[20:50:46] <sbalmos> strcat: Thanks for putting up with me
[20:50:51] <strcat> np
[20:51:26] <strcat> bstrie: shared::{Rc, Queue, PriorityQueue, BoundedQueue, BoundedPriorityQueue, HashMap, Vec}
[20:51:28] <strcat> *shrug*
[20:51:58] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[20:52:01] <strcat> I have a feeling re-exports don't really work well if you make the other module private
[20:52:10] <strcat> I think rustdoc is just not going to make a link
[20:52:10] *** Joins: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net)
[20:53:16] *** Quits: Ms2ger (Ms2ger@92EF86A7.A020F168.187A1082.IP) (Quit: nn)
[20:53:28] *** pmoore is now known as pmoore|away
[20:53:45] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[20:53:48] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[20:54:02] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[20:55:31] *** Joins: SingingBoyo (brandon@moz-F5A6D5DF.ubcsecure.wireless.ubc.ca)
[20:57:14] *** Joins: puritylake (Mibbit@moz-FF993AD8.b-ras1.mlw.mallow.eircom.net)
[20:57:42] *** pmoore|away is now known as pmoore
[20:57:48] <puritylake> is there anything like curses for rust but for windows?
[20:57:49] *** Joins: Jesse (jruderman@moz-7B0110AD.mv.mozilla.com)
[20:58:04] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[20:58:29] <ssbr> puritylake: I used libtcod from rust and that worked OK.
[20:58:39] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:59:13] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[20:59:13] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:00:15] <puritylake> ssbr: interesting, thanks I'll check it out
[21:00:38] *** Quits: Jackneill (Jackneill@moz-253E20FF.pool.digikabel.hu) (Input/output error)
[21:01:27] *** Joins: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk)
[21:01:31] *** Joins: ianj (ianjneu@moz-7140CF01.ccs.neu.edu)
[21:01:50] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[21:01:58] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[21:01:58] *** ChanServ sets mode: +ao brson brson
[21:02:03] <ssbr> puritylake: I used rus-bindgen and http://bpaste.net/show/6KTxbfHAu28LHMcjlOqs/
[21:02:07] <ssbr> that's about all I can give you.
[21:02:18] <ssbr> (that's rust 0.6 code though. Oh well.)
[21:03:09] <puritylake> ssbr I can't choose to be picky on windows :P lol
[21:06:37] <puritylake> ssbr https://github.com/crabtw/rust-bindgen ? this bindgen?
[21:07:30] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:09:47] <ssbr> puritylake: yes
[21:10:07] <ssbr> it automatically generates a rust bindings using C types (raw pointers, c_int, etc.)
[21:13:44] <puritylake> seems to be having trouble building. saying too many args to fmt!
[21:14:16] <apoelstra> if you all aren't tired of me yet, could you take a look at this filter function?:
[21:14:18] <apoelstra> http://pastebin.com/fQq7x5e1
[21:14:27] <apoelstra> it bombs out on line 10 with "error: use of partially moved value: `seive"
[21:14:54] <SiegeLord> puritylake, You mean bindgen? It builds ok here (although my clang is too old, so I'm updating it)
[21:14:59] <apoelstra> i suspect if i can solve this, i'll have figured out how to interact with these crazy pointers
[21:15:39] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[21:16:09] <puritylake> SiegeLord may have something to do with clang so
[21:16:12] <steveklabnik> apoelstra: if you're struggling with pointers, may i suggest http://words.steveklabnik.com/pointers-in-rust-a-guide
[21:16:29] <steveklabnik> i think the current documentation is quite confusing, pointers are actually very simple
[21:16:31] <apoelstra> thx steveklabnik
[21:16:40] <aatch> apoelstra, I assume that seive.list is `Option<T>`?
[21:16:47] <SiegeLord> puritylake, Clang problems won't happen until link time. You probably aren't using the master rust
[21:16:54] <apoelstra> aatch: yes
[21:17:03] <puritylake> 0.8 i think
[21:17:12] <ssbr> puritylake: It's usually best to use master
[21:17:17] <ssbr> rather than a stable release
[21:17:21] <apoelstra> Option<~List>, where List is a struct { value: int, next: Option<~List> }
[21:17:28] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[21:17:35] *** Quits: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk) (Ping timeout)
[21:17:46] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[21:18:05] <aatch> apoelstra, ok, well what is happening is that you're moving the value out of the seive object. This means the seive object is no longer valid.
[21:18:42] <apoelstra> ok, but value is just an int, surely i can copy it?
[21:19:02] <aatch> This happens on line 9, so when you try to use seive on line 10, it fails.
[21:19:02] <puritylake> i need to move to a better system lol
[21:19:13] <apoelstra> right, understood
[21:19:48] *** Joins: echristo (echristo@24D1937F.D6CCE4AE.77834EAA.IP)
[21:19:49] <ssbr> puritylake: compiling rust from scratch takes forever no matter how awesome your system is :(
[21:20:15] <echristo> pcwalton?
[21:20:18] <kimundi> apoelstra: possible solution: let mut head = seive.list.take().unwrap(); // swap out list with a None, and then unwraps the value taken out of it
[21:20:38] <puritylake> ssbr indeed but everything would be that little bit easier on linux even linux can be a pain sometimes
[21:20:51] <ssbr> puritylake: I hope you aren't on windows
[21:20:52] <pcwalton> echristo: what's up?
[21:21:00] *** Quits: nkoep (nik@moz-C5A4E8B1.vpn.rwth-aachen.de) (Ping timeout)
[21:21:18] <echristo> pcwalton: curious about rust's garbage collection at the moment. do you have a document that can be passed around on it?
[21:21:24] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[21:21:32] <pcwalton> at the *moment* there is no GC
[21:21:34] <pcwalton> it's just RC
[21:21:41] <echristo> ok.
[21:21:54] <echristo> that makes sense.
[21:22:01] <strcat> echristo: there was once a precise gc in-tree, I have no idea if it ever worked
[21:22:12] <pcwalton> it worked on simple cases but spilled all roots to memory
[21:22:13] <echristo> strcat: interesting.
[21:22:17] <apoelstra> kimundi: hmm, that may work
[21:22:19] <pcwalton> with @llvm.gcroot
[21:22:23] <puritylake> ssbr: unfortunately at this moment yes, while i wait for my new hard drive for my tower i'm stuck with the dreaded windows 8.. kill me now :P lol
[21:22:28] <echristo> yep.
[21:22:37] <pcwalton> then there was a conservative-on-stack GC
[21:22:41] <echristo> that's what we were thinking, but not sure if you guys had a better way around it.
[21:22:43] <ssbr> puritylake: well, I never got it to compile on windows. Maybe you'll have better luck.
[21:22:48] <pcwalton> that was a lot closer to working
[21:22:59] <pcwalton> we had a lot better success with that
[21:23:00] <pcwalton> I'd just suggest conservative on stack
[21:23:02] <echristo> also, local type theorist and the guy in charge of llvm's thread sanitizer likes the look of rust. i pointed him at it earlier today.
[21:23:02] <puritylake> 0.8 compiles fine on mingw
[21:23:08] <pcwalton> cool :)
[21:23:09] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Connection reset by peer)
[21:23:12] <strcat> echristo: most modern rust just uses unique pointers and references so... that's why it hasn't gotten attention ;)
[21:23:23] <ssbr> puritylake: oh, okay, great.
[21:23:25] <strcat> it's a perf issue, but a perf issue for code that likely already wasn't written with perf in mind (most of rustc!)
[21:23:31] <pcwalton> long term we figured we'd do conservative on stack and look into mostly copying GC
[21:23:48] <pcwalton> until Apple solves the problem
[21:23:56] <pcwalton> or we run out of fires to fight in rustc and can look into it
[21:24:16] <echristo> i'd wait on apple. though the stack maps and patch points may not be what you need.
[21:24:27] <pcwalton> they aren't quite ideal
[21:24:29] * strcat likes how reference counted pointers work with move-by-default :P
[21:24:31] <pcwalton> because they don't support moving GC
[21:24:53] <pcwalton> strcat: yeah, it's nice to avoid already_AddRefed<T>
[21:25:19] <strcat> well I think in C++ when you use shared_ptr, you're going to miss std::move in most places
[21:25:29] <strcat> it's just too hard when it's not the default
[21:25:37] <strcat> I *love* not having copy constructors. no implicit heap allocs ftw
[21:26:19] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[21:26:55] <SingingBoyo> so what's this 'rust_path_hack' I'm seeing in the rustpkg source?  Apparently there's an option to turn it on, too :O
[21:27:32] <echristo> strcat: +1.
[21:28:22] *** Joins: tulloch_ (tulloch@moz-6809CC86.nat.csx.cam.ac.uk)
[21:28:28] <apoelstra> thx kimundi, i got the filter function to compile, we will see if it is logically correct :)
[21:28:31] *** Joins: tom0 (Mibbit@moz-32CF082D.siemens.com.au)
[21:28:38] <apoelstra> but taking out values and putting them back conditionally did the trick
[21:28:38] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[21:28:40] <doomlord_> anyone heard of Cyclone C... trying to explain RUst to someone, and they want to know what Rust does that cyclone doesn't
[21:28:43] <apoelstra> and is easy to understand
[21:28:55] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[21:29:00] <puritylake> what OS is the hardest to work with? Windows seems to be a tosser anyway
[21:29:04] <kimundi> apoelstra: Nice :)
[21:29:11] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[21:29:36] *** Joins: lenstr (lenstr@2A2A2196.9DA5669E.3F2079FA.IP)
[21:29:56] <ssbr> puritylake: 86-DOS
[21:30:13] <puritylake> how dare u diss DOS :O
[21:30:13] <ssbr> but for common desktop OSes, I've personally had the most problems with Windows. Mac OS isn't a party either, but it's workable.
[21:30:32] <puritylake> windows needs the most work arounds as i've noticed
[21:30:47] <ssbr> it's very common for projects that nominally compile on windows to not actually compile, because the build script hasn't been run in X months or what have you
[21:31:06] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[21:31:33] <puritylake> the sooner i'm free of windows the better
[21:32:07] <strcat> doomlord_: type classes, for one thing
[21:32:23] <strcat> pattern matching
[21:32:24] *** pmoore is now known as pmoore|away
[21:32:25] <doomlord_> i've hit the usual "rust sucks because it has 4 pointer types" from someone, lol
[21:32:41] <strcat> doomlord_: ~ and &
[21:32:54] <benh> petition to rename ~T into Box<T> and never call it a pointer again
[21:33:25] <SiegeLord> And rename & to Ref and * to Raw and then Rust will have no pointers anymore!
[21:33:46] <strcat> doomlord_: there's no @ in the stable language definition anymore
[21:34:04] <ssbr> it has way more than 4
[21:34:06] *** Quits: valenting (Thunderbir@808EE6B5.84D5EFD5.FB866788.IP) (Ping timeout)
[21:34:13] <ssbr> Jeez critics, get it right.
[21:34:25] <strcat> ssbr: only in the sense that python has 1 pointer type for every class ;p
[21:34:45] <strcat> what rust has that python doesn't is a value type.
[21:34:45] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[21:34:53] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[21:34:56] <strcat> as in.. not a pointer
[21:35:34] <strcat> (and pointers are value types so there! rust doesn't have 'first-class' reference types)
[21:35:46] <puritylake> did python ever fix its rounding error?
[21:35:50] <strcat> hm?
[21:35:54] <sbalmos> oy, out of my meeting, back in here. Back to brain-damage. :)
[21:36:07] <o11c> I really like no implicit copy, but I wish you could put a hook on move ...
[21:36:11] <puritylake> last i heard python had some sort of rounding error in certain cases
[21:36:41] <strcat> puritylake: people misunderstanding floats? ;p
[21:36:47] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[21:36:54] <o11c> I'm not aware of any rounding errors in python other than the ones that apply to 'float' in every language
[21:36:54] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[21:37:03] *** Joins: valenting (Thunderbir@808EE6B5.84D5EFD5.FB866788.IP)
[21:37:07] <puritylake> strcat possibly
[21:37:36] <dredozubov> python got very standard float and decimal implementations
[21:38:10] <SiegeLord> 1/2 used to be 0 in Python, changed to 0.5 in Python3... that's the only relevant thing I recall
[21:38:24] <dredozubov> 1.0/2 is 0.5 though
[21:38:35] <puritylake> wasn't '/' integer division by default in 2?
[21:38:43] <dredozubov> yeah
[21:38:49] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[21:38:51] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[21:38:57] <strcat> puritylake: well, if both sides were ints
[21:38:59] <strcat> like C
[21:39:16] <ssbr> strcat: hahaha, I didn't mean that, but that's a nice one too
[21:39:17] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[21:39:20] <SiegeLord> And Python rounds to negative infinity, unlike C... but that's a rather good choice if you are not C
[21:39:27] <SiegeLord> Not really something to fix either
[21:39:37] *** Joins: nkoep (nik@moz-DF24267B.vpn.rwth-aachen.de)
[21:39:44] <doomlord_> multiple pointer types is a feature not a hazard IMO
[21:39:46] <puritylake> strcat that's kinda what i meant
[21:39:48] <ssbr> strcat: I think it is totally reasonable and expected to count mut/non-mut pointers as different
[21:39:58] <strcat> ssbr: well those are going away
[21:40:04] <sbalmos> LOL
[21:40:04] <strcat> Rc<Mut<T>>
[21:40:07] <strcat> except for &mut/&
[21:40:08] <ssbr> strcat: wait, they are?
[21:40:10] <strcat> ssbr: yep
[21:40:13] <ssbr> well, &mut and & are important
[21:40:15] <sbalmos> Hell, half the damn language is being rewritten. :D
[21:40:16] <doomlord_> did i read that right, @T is definitely on the way out?  generalized smartpointers replace it?
[21:40:24] <ssbr> strcat: what about *mut? replaced with *?
[21:40:31] <strcat> doomlord_: it's out, it's feature gated and there's std::gc ;p
[21:40:50] <strcat> the feature gate needs to mention std::gc though
[21:40:51] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[21:41:04] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[21:41:17] <strcat> once there's Mut<T> you can have Rc<Mut<T>> and Gc<Mut<T>>
[21:41:26] <strcat> for now there's Cell
[21:42:29] <sbalmos> Cell replaces Option?
[21:42:44] <strcat> no
[21:42:53] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[21:42:53] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[21:43:02] <strcat> Cell/Mut provide mutability without the owner being mutable
[21:43:05] <strcat> via dynamic mutability checks
[21:43:18] <strcat> everywhere else, mutability is statically checked (no iterator invalidation possible, etc.)
[21:43:19] *** Quits: puritylake (Mibbit@moz-FF993AD8.b-ras1.mlw.mallow.eircom.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:43:28] <sbalmos> urgh
[21:43:39] <strcat> they're just library types
[21:43:45] <bblum> ? Mut<T> will have dynamic checks too??
[21:43:57] *** flaper87 is now known as flaper87|afk
[21:43:58] <sfackler> bblum: it has to do dynamic borrow checks
[21:44:01] <strcat> bblum: yes it will use RAII-based objects to do the checks @mut does atm
[21:44:09] *** Quits: fabiand (fabiand@moz-430018B7.adsl.alicedsl.de) (Quit: Verlassend)
[21:44:19] <bblum> but it doesn't have the same problems that @mut has
[21:44:25] <sfackler> bblum: https://github.com/mozilla/rust/pull/10514
[21:44:33] <strcat> bblum: well it will have the same problems but it won't be implicit
[21:44:48] <sbalmos> strcat: You're not helping my head trying to lay out a kernel with all these language changes. :D
[21:44:55] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[21:44:59] <strcat> sbalmos: library changes ;p
[21:45:02] <bblum> ok, i am wrong in my understanding that Mut<T> is the same as Cell<T> but without the ability to take?
[21:45:05] *** Quits: valenting (Thunderbir@808EE6B5.84D5EFD5.FB866788.IP) (Ping timeout)
[21:45:05] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[21:45:09] <sfackler> it should be less confusing if a task fails calling a method that is documented to say it fails rather than magically failing in @mut stuff
[21:45:28] <sfackler> bblum: yes, also with an raii based api
[21:45:49] <bblum> oh but the borrow functions might fail
[21:45:50] <sbalmos> strcat: I probably just have to start coding a kernel with #[no_std] or whatever, and see what breaks during compilation. :D
[21:45:53] <bblum> like if you call borrow() twice?
[21:46:00] <strcat> bblum: borrow twice works, like @mut
[21:46:04] <strcat> it has an enum with 3 states
[21:46:06] <sfackler> borrow twice is fine, but borrow_mut followed by another borrow afils
[21:46:06] <bblum> borrow_mut i mean
[21:46:08] <sfackler> *fails
[21:46:09] <sfackler> yeah
[21:46:12] <bblum> ugh :(
[21:46:17] <sfackler> there's also try_borrow_mut that returns an option
[21:46:20] <bblum> i liked it better when it was part of the language and could be checked statically
[21:46:21] <sfackler> and try_borrow
[21:46:37] <strcat> bblum: https://github.com/mozilla/rust/blob/master/src/libstd/rc.rs#L155
[21:46:37] <bblum> try_borrow feels like a lipstick/pig solution here
[21:46:49] <strcat> bblum: it just hoists that out
[21:46:50] *** Quits: abinader (abinader@496D17B0.2513D022.AD91B79.IP) (Quit: abinader)
[21:46:51] <bblum> like i am having a hard time imagining in what situation try_borrow would be useful
[21:46:52] <strcat> no more RcMut/GcMut
[21:46:59] <strcat> instead the ugliness is in a separate type
[21:47:06] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[21:47:10] <SingingBoyo> Is it possible to just build rustpkg?
[21:47:11] <sfackler> bblum: I can't imagine either, but I don't see any reason to not have those methods
[21:47:11] <strcat> bblum: you should be happy about it, it pushes it all into 1 module/type in the stdlib
[21:47:12] <SingingBoyo>  (have rust built, changed something in rustpkg, don't re
[21:47:18] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[21:47:18] <strcat> bblum: no more dynamic borrow fails as a language feature ;p
[21:47:21] <bblum> strcat: well maybe
[21:47:24] <SingingBoyo> don't really want to rebuild everything
[21:47:36] <bblum> to what extent is statically-checked mutable memory locations still supported
[21:47:37] <strcat> bblum: we could add another form of non-inherited mutability later
[21:47:43] <sfackler> SingingBoyo: running make should just rebuild rustpkg
[21:47:44] <strcat> Mut<T> doesn't prevent anything
[21:47:48] <bblum> do those only exist on the stack, in local variables?
[21:48:05] <sfackler> bblum: Mut is only used if you need to get a mutable reference out of an immutable slot
[21:48:11] <strcat> he knows
[21:48:19] <SingingBoyo> sfackler: huh.  Didn't think it was smart enough, guess it is.  Thanks!
[21:48:33] *** Quits: huseby (huseby@moz-29C2662F.torproxy-readme-arachnide-fr-35.fr) (Ping timeout)
[21:49:08] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[21:49:17] <bblum> i see
[21:49:17] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[21:49:20] <strcat> bblum: with RcMut it happens in a closure call
[21:49:31] <strcat> so Mut<T> is more flexible, since you can move around RAII objects
[21:49:38] <strcat> and more flexible I'm sure means harder to statically check
[21:49:50] <strcat> maybe not
[21:50:22] <strcat> anyway Mut<T> just gives you an object and then removes the freeze in the dtor of that object
[21:50:39] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[21:50:40] <strcat> it's awful, but we don't really have another choice atm ;p
[21:51:10] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[21:51:13] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[21:51:44] *** Joins: sprang (sprang@moz-920A95C4.hsd1.ca.comcast.net)
[21:53:04] <sbalmos> strcat: Can we call compiled Rust libraries "buckets"? :)
[21:53:12] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[21:53:17] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[21:53:20] *** Joins: moostik (Icedove@moz-63ED7231.w82-121.abo.wanadoo.fr)
[21:54:10] <SingingBoyo> there is some really odd hackery going on in rustpkg o.O
[21:54:13] <strcat> sbalmos: I think crate is already stuck ;p
[21:54:29] <sbalmos> strcat: Crate for the source libs, buckets for compiled
[21:54:37] <Amaranth> Considering how awesome rust buckets is how did we end up with crates? :P
[21:54:41] <sbalmos> strcat: Or maybe I'll just keep buckets for the OS packaging
[21:54:42] <sbalmos> heh
[21:54:46] <sfackler> SingingBoyo: rustpkg is still in the pretty early stages imo
[21:54:58] <doomlord_> the compiler sourcecode uses @ extensively, right..
[21:55:00] <sbalmos> Amaranth: Crates I think of rotting wood
[21:55:12] <doomlord_> major refactor i guess :)
[21:55:14] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[21:55:16] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[21:55:24] <SingingBoyo> sfackler: I know, but some of the hackery figuring out where things get installed is just odd.
[21:55:32] * SingingBoyo doesn't want to touch it anymore
[21:55:50] <sbalmos> strcat / Amaranth: And clearly the preferred development environment, when we get to that point, needs to be named OxIDE
[21:57:02] <SingingBoyo> sbalmos: I don't think anyone is going to top that one.  Well done!
[21:57:16] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[21:57:20] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[21:57:51] <sbalmos> I'm copyrighting it!
[21:58:13] <steveklabnik> you'd trademark that, not copyright it ;)
[21:58:21] <steveklabnik> also, copyright is automatic
[21:59:09] <sbalmos> meh, whatever. Implicit trolling sarcasm failure
[21:59:18] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[21:59:23] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[21:59:34] <SiegeLord> I don't think I is a valid hex digit :P
[21:59:40] <SiegeLord> Maybe 0x1DE
[21:59:50] <steveklabnik> :)
[22:01:12] *** Joins: fabrice1 (fabrice@moz-7B0110AD.mv.mozilla.com)
[22:01:21] *** Quits: fabrice (fabrice@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:01:24] <sbalmos> Hrm. Needs a trailing 0 to be a valid 16-bit header value
[22:01:27] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:01:32] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:01:56] <sbalmos> 0x1DE0 for the Rust-specific .so? :D
[22:02:02] <o11c> meh, implicit leading 0
[22:02:10] *** Joins: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[22:02:22] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[22:03:29] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:03:34] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:03:58] *** pmoore|away is now known as pmoore
[22:04:10] <g3xzh> hey guys -- is there any method in vector that checks that one vector is a sub-vector of the second one?
[22:04:22] <g3xzh> something like vec1.is_sub_vector(vec2)
[22:04:42] <g3xzh> for instance, vec1=[0,1,2,3] and vec2=[1,2] will return true
[22:05:00] <g3xzh> and vec1=[0,1,2,3], vec2=[0,3] will return false
[22:05:11] *** Quits: GeneralMaximus (ankur@A6F89B8C.1D173DC.274D17D6.IP) (Ping timeout)
[22:05:37] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:05:50] <sbalmos> o11c: 0x01DE just doesn't sound as cool. :)
[22:06:01] <o11c> I said implicit, not explicit
[22:06:26] <sbalmos> o11c: I know. But implicit doesn't work in a file bytestream.
[22:06:34] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:06:52] <o11c> why do we need it in a file bytestream?
[22:06:55] *** Quits: lenstr (lenstr@2A2A2196.9DA5669E.3F2079FA.IP) (Client exited)
[22:07:07] <o11c> and that would be omitting the 0x anyway
[22:07:39] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:08:12] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[22:08:14] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:08:51] *** Joins: GeneralMaximus (ankur@A6F89B8C.1D173DC.274D17D6.IP)
[22:09:10] *** Joins: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net)
[22:09:41] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:10:01] <g3xzh> anybody?
[22:10:01] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:11:21] <tikue__> is deque the best thing to use for a queue?
[22:11:43] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:11:55] <strcat> tikue__: yes, O(1) amortized push/pop and O(1) indexing
[22:12:01] <tikue__> thanks strcat 
[22:12:07] <strcat> (from both ends)
[22:12:10] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[22:12:30] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:12:38] <tikue__> strcat: ringbuf vs dlist?
[22:12:43] <strcat> ringbuf
[22:12:50] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[22:13:45] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:13:51] <strcat> tikue__: dlist has O(1) push/pop if you pretend allocation/deallocation is O(1), but it's a lot slower on average
[22:13:59] <strcat> it's useful if you need to remove from the middle
[22:14:03] <tikue__> ok, that's useful to know
[22:14:04] <strcat> or insert in the middle
[22:14:04] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:14:13] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[22:14:24] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:14:33] <strcat> I guess allocation is usually O(1) but deallocation is something like O(logn) - not sure.
[22:15:48] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:15:56] <comex> what do you call n?
[22:16:27] <comex> i'd say that costs of allocator + poor cache behavior far outweigh asymptotic efficiency in that comparison
[22:16:27] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:17:16] <strcat> comex: well they are small allocations so they come from a thread-local pool
[22:17:40] <strcat> it's possible both are logn
[22:17:48] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:17:53] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:17:57] <strcat> I know jemalloc has an (intrusive?) rbtree but not really how it uses it
[22:18:41] <comex> i think good allocators usually use an intrusive singly linked list for small allocations
[22:19:45] *** Quits: jordyd (jordyd@moz-47358B08.seg49.ucf.edu) (Ping timeout)
[22:19:46] *** Quits: sprang (sprang@moz-920A95C4.hsd1.ca.comcast.net) (Quit: sprang)
[22:19:50] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:19:52] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:20:50] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[22:20:50] *** ChanServ sets mode: +ao brson brson
[22:20:54] *** Quits: SingingBoyo (brandon@moz-F5A6D5DF.ubcsecure.wireless.ubc.ca) (Ping timeout)
[22:21:51] <sbalmos> strcat: Going to be leaving in a few. Any way I can throw my weight behind making an explicit switch in rustc to allow unsafe code, and/or some way to denote a crate or compiled .so has unsafe code? :P
[22:21:56] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:22:16] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:22:17] <strcat> sbalmos: I think there might already be an issue open for it
[22:22:21] <strcat> it would be easy to implement
[22:22:55] <sbalmos> ya. Just thinking through the mechanics of not allowing unsafe code in the non-kernel space. :)
[22:23:13] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:23:30] <cmr> #[forbid(unsafe)];
[22:23:43] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Connection reset by peer)
[22:23:54] <strcat> comex: so I think it just has one red-black tree per size class and uses that to find the pool
[22:23:59] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:24:02] <strcat> and I guess each pool has a free list...
[22:24:11] *** Joins: SingingBoyo (brandon@moz-7854372F.eng.wind.ca)
[22:24:13] <strcat> a pool is something like a 4MiB chunk
[22:24:21] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:24:35] *** Joins: abinader (abinader@496D17B0.2513D022.AD91B79.IP)
[22:24:39] <strcat> so you could say a search through one is O(1) ;p
[22:24:44] <g3xzh> rusti: for i in range(0,u 10u) { println(i.to_str()); }
[22:24:45] -rusti- <anon>:9:28: 9:31 error: expected `,` but found `10u`
[22:24:45] -rusti- <anon>:9          for i in range(0,u 10u) { println(i.to_str()); }
[22:24:45] -rusti-                                      ^~~
[22:24:45] -rusti- application terminated with error code 101
[22:24:53] <g3xzh> rusti: for i in range(0u, 10u) { println(i.to_str()); }
[22:24:54] -rusti- pastebinned 11 lines of output: http://sprunge.us/LXgG
[22:25:01] *** Quits: abinader (abinader@496D17B0.2513D022.AD91B79.IP) (Quit: Fui!)
[22:25:04] <o11c> sbalmos: there *is* going to be a significant about of unsafe code in the std/core crate
[22:25:21] <o11c> can't be avoided
[22:25:23] *** Joins: puritylake (Mibbit@moz-FF993AD8.b-ras1.mlw.mallow.eircom.net)
[22:25:30] <sbalmos> o11c: Not worried about std/core if I have to reimplement that anyway
[22:25:52] <puritylake> anyone got some interesting matieral on generics?
[22:26:01] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:26:26] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:26:28] <strcat> o11c: it's not that bad, rust-core is only 3700 lines of code so far and already has vectors, ring buffers, priority queues, reference counted boxes, atomic reference counted boxes, threads, and 4 concurrent queues
[22:26:30] <cmr> puritylake: in what way?
[22:26:53] <strcat> 700 lines of that is wrapping C99 math
[22:27:00] <puritylake> cmr: something that can teach slow people like me
[22:27:01] <strcat> because I can't use macros yet...
[22:27:25] <strcat> as long as you stick to KISS solutions to everything there's just not a lot of code ;p
[22:27:55] *** Joins: valenting (Thunderbir@808EE6B5.84D5EFD5.FB866788.IP)
[22:27:55] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Quit: Savago)
[22:27:58] <cmr> puritylake: there isn't much beyond the generics section of the tutorial.
[22:28:05] <strcat> (ring buffers, priority queues, trees, hashmaps, tries, etc. can all be done with fully safe code too)
[22:28:07] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:28:14] <sbalmos> strcat: heh
[22:28:17] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[22:28:17] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:28:21] <strcat> mostly just vectors are totally unsafe.
[22:28:53] *** Quits: tom0 (Mibbit@moz-32CF082D.siemens.com.au) (Quit: http://www.mibbit.com ajax IRC Client)
[22:28:57] <sbalmos> strcat: Ya, having crates link to std, and std has unsafe, is one thing. Allows crates to use unsafe themselves is another
[22:29:01] *** Quits: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Quit: Leaving.)
[22:29:24] <o11c> strcat: is there benefit in splitting rust-core into rust-unsafecore, rust-containercore, and rust-libccore ?
[22:30:05] <cmr> sbalmos: it'd probably be a 30 line lint, and most of it would be boilerplate :)
[22:30:09] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:30:09] <strcat> o11c: it's not a crate anyway because rust doesn't have static linking and LTO landed yet
[22:30:14] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:30:23] <g3xzh> rusti: [0,1,2,3,4].slice(1,3)
[22:30:24] -rusti- pastebinned 15 lines of output: http://sprunge.us/aOEK
[22:30:58] *** Quits: flowsnake_ (flowsnake@moz-E4E567EE.aztw.cable.virginm.net) (Ping timeout)
[22:31:10] <g3xzh> rusti: let v1: ~[uint] = ~[0,1,2,3,4]; v1.slice(1,3)
[22:31:11] -rusti- pastebinned 16 lines of output: http://sprunge.us/QbBU
[22:31:14] *** Joins: flowsnake (flowsnake@moz-E4E567EE.aztw.cable.virginm.net)
[22:31:55] <cmr> rusti: let s = [0,1,2,3,4].slice(1,3); println!("{:?}", s);
[22:31:56] *** Quits: vmx (vmx@moz-2C4FC9DF.pools.arcor-ip.net) (Quit: Leaving)
[22:31:56] -rusti- pastebinned 12 lines of output: http://sprunge.us/dQMD
[22:32:10] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:32:11] <g3xzh> cmr: thanks.
[22:32:14] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:32:18] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:32:33] <sbalmos> cmr: True enough. "Your code uses unsafe. You're not allowed. No soup for you!"
[22:32:45] <g3xzh> cmr: can u take a look @ https://github.com/mozilla/rust/pull/10582
[22:34:13] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:34:13] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:34:48] <strcat> sbalmos: implemented it
[22:35:01] <strcat> need a test
[22:36:10] *** Joins: derek_c (derek@moz-A8C94B29.cit.cornell.edu)
[22:36:51] <sbalmos> lol
[22:36:52] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:36:53] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:37:06] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:37:24] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[22:38:11] <cmr> We really need an effect system. We approximate one in very ad-hoc ways using lints.
[22:38:16] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:39:06] <apoelstra> can i delete pointers? so that if i've copied an owned pointer, the old variable will work again?
[22:39:08] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:39:10] *** Joins: gandalf (zbraniecki@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[22:39:15] <cmr> apoelstra: no
[22:39:15] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:39:18] <apoelstra> kk
[22:39:26] <strcat> apoelstra: you can reinitialize the old variable
[22:39:33] <apoelstra> ok, but i've lost the old value
[22:39:40] <strcat> well, no then
[22:39:44] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[22:39:48] <strcat> if you've lost the old value the memory was freed
[22:39:48] <apoelstra> because i copied a pointer, then iterated through pointer->next several times
[22:39:52] <apoelstra> oh
[22:39:54] <apoelstra> :P
[22:39:57] <strcat> if it goes out of scope it's gone
[22:39:59] <apoelstra> kk, i'll fix my code then
[22:40:10] <strcat> rusti: let mut x = ~5; let y = x; x = ~10; (x, y)
[22:40:13] -rusti- (~10, ~5)
[22:40:23] <strcat> rusti: let mut x = ~5; let y = x; x = y; x
[22:40:24] -rusti- ~5
[22:41:10] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:41:34] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:42:56] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[22:42:58] <puritylake> is there anyway to have a null value in rust?
[22:42:59] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: nejucomo)
[22:43:12] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:43:14] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:43:20] <tiffany> Option<T>
[22:43:40] <puritylake> tiffany: mind elaborating?
[22:43:56] <tiffany> pointers in rust are non-nullable
[22:44:04] *** Quits: ktt3ja (Mibbit@moz-D69B60E4.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:44:07] <tiffany> if you wish to have a pointer which might not have a value, you use an Option type
[22:44:19] <tiffany> an Option either has Some(some_value) or None
[22:44:21] <cmr> puritylake: http://static.rust-lang.org/doc/master/std/option/index.html
[22:44:25] *** Quits: Ferreus (ferreus@moz-BC50A565.pools.arcor-ip.net) (Quit: WeeChat 0.4.2)
[22:44:34] <steveklabnik> http://static.rust-lang.org/doc/master/std/option/index.html
[22:44:41] <steveklabnik> dammit cmr, I thought you had school :p
[22:44:41] <tiffany> this is far safer than having null pointers
[22:44:48] <cmr> steveklabnik: :D
[22:44:50] <steveklabnik> <3
[22:44:52] <tiffany> there are no null pointer exceptions in rust
[22:44:55] <sbalmos> steveklabnik: Yeah, and I'm supposed to be working. :o
[22:45:07] <steveklabnik> sbalmos: i'm supposed to be writing my book on rails
[22:45:12] <steveklabnik> sigh
[22:45:14] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:45:19] <cmr> Rust: The Ultimate Procrastination Sink
[22:45:22] *** Quits: SingingBoyo (brandon@moz-7854372F.eng.wind.ca) (Ping timeout)
[22:45:22] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:45:45] <puritylake> i see
[22:45:59] <strcat> puritylake: Option is just a plain old enum, too
[22:46:00] <sbalmos> tiffany: And it's a compilation error to do *(optionVal.Some).blah()?
[22:46:08] <strcat> enum Option<T> { Some(T), None }
[22:46:24] <tiffany> there's a .unwrap() function, but it will fail! if the value is None
[22:46:31] <sbalmos> that's what I thought
[22:46:36] <strcat> so you can have Option<int> or whatever, without a pointer
[22:46:48] <tiffany> what you want to do is always use match optionVal {Some(x) => x.blah(), None => something}
[22:47:00] <strcat> Option<&T> is optimized to a nullable ptr anyway, but you isolate nullability to where you want it
[22:47:06] <sbalmos> yup
[22:47:12] <tiffany> you only want ot use .unwrap() when you know that in this particular location the value cannot be None
[22:47:25] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:47:27] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:47:41] <strcat> rusti: std::sys::size_of::<~(int, int)>()
[22:47:42] -rusti- 8u
[22:47:43] <sbalmos> tiffany: What's the fun in using Option then? :P
[22:47:48] <strcat> rusti: std::sys::size_of::<Option<~(int, int)>>()
[22:47:49] -rusti- 8u
[22:48:11] * strcat wishes rusti could use master
[22:48:14] <cmr> sbalmos: failure is never implicit, and you can never have a pointer to an invalid value.
[22:48:14] *** Quits: heftig (heftig@moz-D9FCE6C3.dip0.t-ipconnect.de) (Quit: Quitting)
[22:48:25] <kimundi> Well, instead of matching its often even more concise to use the Option methods
[22:48:38] <strcat> sbalmos: the main point is that nullability is only where you ask for it
[22:48:49] <sbalmos> I know, late-day sarcasm
[22:48:52] <strcat> ;p
[22:48:58] <kimundi> rusti: Some(5u).map(|x| x + 10u)
[22:48:59] -rusti- Some(15u)
[22:49:04] <kimundi> rusti: None.map(|x| x + 10u)
[22:49:05] -rusti- <anon>:9:22: 9:23 error: the type of this value must be known in this context
[22:49:05] -rusti- <anon>:9          None.map(|x| x + 10u)
[22:49:05] -rusti-                                ^
[22:49:05] -rusti- error: aborting due to previous error
[22:49:05] -rusti- application terminated with error code 101
[22:49:11] <kimundi> rusti: None::<uint>.map(|x| x + 10u)
[22:49:11] <apoelstra> in my code, http://pastebin.com/6GTYi1GQ , on line 19 i try to return a new list
[22:49:12] -rusti- None
[22:49:15] <apoelstra> but i've lost its value
[22:49:27] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:49:28] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:49:30] *** Joins: heftig (heftig@moz-D9FCE6C3.dip0.t-ipconnect.de)
[22:49:39] <apoelstra> on line 13
[22:49:50] <apoelstra> so it gets freed, and i don't see how i can prevent this
[22:49:59] <strcat> apoelstra: you need to use &mut for appending
[22:50:01] <kimundi> apoelstra: hum?
[22:50:05] <strcat> apoelstra: ~T has value semantics
[22:50:10] <strcat> it acts exactly like T, but is pointer-size
[22:50:17] <cmr> apoelstra: it's not gone, it's right there
[22:50:51] <strcat> apoelstra: if a function takes ~T, it's by-value semantics, and since it has a destructor you hand over ownership
[22:51:07] <strcat> if you want to mutate something, you want to take &mut 
[22:51:15] <apoelstra> strcat: right, but if it takes &T then i can't return the new cell
[22:51:27] <apoelstra> i return "cell.next.unwrap()", but the compiler won't let me do that
[22:51:33] <apoelstra> because it doesn't trust cell to still exist
[22:51:38] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:51:42] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:51:48] <strcat> sure, you don't own it and it has a dtor - you can't return it by value
[22:52:05] <kimundi> apoelstra: you'Re appending a bunch of values to the old list there, but the list still exists, it'S just part of the list that starts with the step variable now
[22:52:19] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Quit: lmandel)
[22:52:47] <puritylake> http://pastebin.com/BxfSdAZv
[22:52:52] <puritylake> what value can i give next so its "null"
[22:52:59] <cmr> puritylake: None
[22:53:14] <puritylake> that it?
[22:53:17] <kimundi> yes
[22:53:17] <strcat> puritylake: Option<T> is just an enum of Some(T) or None
[22:53:31] <strcat> rusti: enum Maybe<T> { Just(T), Nothing } Just(5)
[22:53:32] -rusti- Just(5)
[22:53:36] <strcat> rusti: enum Maybe<T> { Just(T), Nothing } Nothing
[22:53:38] -rusti- pastebinned 10 lines of output: http://sprunge.us/eFfM
[22:53:42] <strcat> rusti: enum Maybe<T> { Just(T), Nothing } Nothing::<int>
[22:53:43] -rusti- Nothing
[22:53:51] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:53:54] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:54:01] <strcat> it's either one
[22:54:36] <strcat> rusti: enum Value { A(f64), B(f64), C(int), D(~[Value]) }  D(~[A(2.2), B(3.5)])
[22:54:37] -rusti- D(~[A(2.2f64), B(3.5f64)])
[22:54:41] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[22:54:48] <strcat> can think of enums as a little dynamic type system if you want. it's just a tagged union
[22:55:04] <apoelstra> kimundi: i'm not convinced that the list still exists, i think i lose every cell shortly after creating it
[22:55:22] <puritylake> thanks everyone
[22:55:31] <apoelstra> as my 'step' variable goes through the list, every value it is set to is destroyed after 'step' gets reassigned
[22:55:52] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:55:54] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:56:14] *** Joins: huseby (huseby@moz-29C2662F.torproxy-readme-arachnide-fr-35.fr)
[22:56:18] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[22:56:38] <kimundi> apoelstra: But you moved the old step value into the append_empty function before that
[22:57:11] <kimundi> apoelstra: However, append_empty might indeed then loose it... Its a bit unclear to me what you'Re trying to write there exactly :)
[22:57:18] <o11c> apoelstra: you probably want a &~T or something
[22:57:43] <apoelstra> o11c: i think so, i am just getting confused about how these things interact with Option
[22:57:46] <kimundi> Probably not
[22:58:03] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:58:13] <apoelstra> kimundi: append_empty shouldn't really be there :) but when i had all the code in create() it would not compile
[22:58:14] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[22:58:26] <kimundi> apoelstra: Ah, okay, then let'S reduce it :)
[22:58:35] <kimundi> apoelstra: What is create suppossed to do?
[22:58:46] *** Quits: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net) (Quit: Textual IRC Client: www.textualapp.com)
[22:58:47] <kimundi> apoelstra: create a list of number 1, 2, 3 ?
[22:58:52] <apoelstra> that's right
[22:59:06] <apoelstra> that's all it does for now
[22:59:24] <kimundi> list type is?
[22:59:26] *** Quits: tikue__ (tkuehn@97B597C6.D038900B.689607DE.IP) (Quit: tikue__)
[22:59:38] *** jld is now known as jld|meeting
[22:59:44] <apoelstra> struct List { value: int, next: Option<~List> }
[22:59:55] <kimundi> okay
[23:00:05] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[23:00:54] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[23:01:09] *** Quits: steveklabnik (steveklabn@moz-74512D7C.nycmny.fios.verizon.net) (Quit: bye!!!)
[23:01:23] <kimundi> I'D start with creating the head of the list like this: let mut head = List { value: 2, next: None }
[23:01:34] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[23:01:39] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: ZZZzzz…)
[23:01:44] <kimundi> Note the lack of a ~ in fron: thats unneccessary here
[23:02:07] *** Quits: ricepuddin (graham@moz-B151A6F4.wlan.ic.ac.uk) (Ping timeout)
[23:02:09] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[23:02:10] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[23:02:19] <apoelstra> ok
[23:02:27] *** Quits: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP) (Client exited)
[23:02:31] <apoelstra> i'm going to return this, why is ~ unnecssary?
[23:02:56] <kimundi> because you also shouldn't return something in a ~ box :)
[23:02:58] <strcat> Some(T) is one of the variants
[23:03:05] <strcat> T is ~List
[23:03:07] <apoelstra> oh, ok :P
[23:03:13] <kimundi> Just return the value directly - the caller can box it itself if he wants
[23:03:14] <strcat> None is unrelated to anything with ~ there
[23:03:15] *** pmoore is now known as pmoore|away
[23:03:53] <kimundi> apoelstra: And then something like for n in range_step (3, max, 2) { head = List{ value: n, next: Some(~head) } } 
[23:04:09] <kimundi> Which would just prepend the new values to the front of the list
[23:04:11] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[23:04:14] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[23:04:56] *** Quits: Soft (soft@moz-EC8D39F.yok.fi) (Ping timeout)
[23:05:06] <kimundi> After that loop, you can just return Seive { list: Some(head) } or so
[23:05:31] <apoelstra> ok, cool
[23:05:36] <apoelstra> but then my list is backward :)
[23:05:42] <strcat> rusti: enum List<T> { Cons(~List<T>, T), Nil } Cons(~Cons(~Nil, 2), 5) /* another way, if you want to allow empty lists */
[23:05:43] -rusti- Cons(~Cons(~Nil, 2), 5)
[23:05:51] <kimundi> Well, you can also build the list other way round
[23:05:51] <apoelstra> i suppose i could run range_step backward..
[23:05:55] <apoelstra> yeah
[23:06:10] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[23:06:13] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[23:06:23] <apoelstra> but then i need to check if max is odd or even
[23:06:36] *** Joins: shammancer (dannick@moz-532BF0EC.uws.ualberta.ca)
[23:06:36] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[23:07:07] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[23:07:19] <kimundi> apoelstra: Well, there is a way to write the loop so that it just builds the list inside out, which would reverse the order
[23:08:14] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[23:08:14] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[23:08:17] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[23:08:46] *** Quits: zatnosk (zatnosk@31AE4F7A.F285E7E8.9E52235C.IP) (Quit: Have a great life!)
[23:09:10] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[23:09:23] <kimundi> Or is it? Now thinking about...
[23:09:56] <kimundi> strcat: Is it possible in a single linked list to append at the end without iterating all the way from the front?
[23:10:05] <o11c> apoelstra: there's no need to build the list backwards ...
[23:10:12] <o11c> that's what the & is for
[23:10:13] <TeXitoi> kimundi: recursive call
[23:10:14] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[23:10:25] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[23:10:28] <apoelstra> TeXitoi: haha, that's what i was thinking
[23:10:28] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[23:10:31] <o11c> you declare the List owned somewhere, then use & everywhere else
[23:10:54] <o11c> actually it needs to be &mut I think
[23:11:00] <kimundi> o11c: But wouldn't & prevent mutation? :P
[23:11:08] <o11c> I know exactly how to do this in C++, but I'm only vaguely familiar with Rust
[23:11:14] <strcat> kimundi: well afaik the usual way to do a linked list is to prepend 
[23:11:23] <kimundi> strcat: well, yeah
[23:11:24] <strcat> that's what forward_list in the C++ stdlib does
[23:11:26] <o11c> append is not hard either
[23:11:32] <strcat> it's the only singly linked list in the C++ stdlib
[23:11:43] <o11c> look at Linus's rant about people not understanding pointers.
[23:11:55] <o11c> I wrote a little wrapper over <forward_list> to allow O(1) append
[23:12:00] <kimundi> o11c: It is if you can not safely aliased mutable pointers :P
[23:12:01] <apoelstra> o11c: yes, i understand how pointers work in C, that's why i'm trying to do it this way :)
[23:12:05] <kimundi> not have*Ü
[23:12:12] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[23:12:27] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[23:12:34] <apoelstra> strcat: yeah, i don't wanna prepend because i'm going to scan this in the forward direction
[23:12:44] <apoelstra> maybe the appropriate thing here is to just run range_step backward
[23:12:51] <apoelstra> and build the list by prepending
[23:13:11] <strcat> I think without prepending you're either going to have to walk to the end or use *T or Gc<T>
[23:13:14] <strcat> I could be wrong though.
[23:13:15] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[23:13:37] *** jld|meeting is now known as jld
[23:13:41] <apoelstra> strcat: that's my feeling too, but in principle i am not doing anything too weird..
[23:13:45] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[23:13:45] *** ChanServ sets mode: +ao pcwalton pcwalton
[23:13:47] <o11c> the aliasing might be a problem :/
[23:13:49] <apoelstra> and i was able to write filter() without GC
[23:13:54] *** Joins: sprang (sprang@moz-920A95C4.hsd1.ca.comcast.net)
[23:14:06] <apoelstra> using kimundi's take()-and-replace idea
[23:14:11] <strcat> apoelstra: sure, there's a whole iterator library without unsafe code or any allocations
[23:14:18] <strcat> http://static.rust-lang.org/doc/master/std/iter/trait.Iterator.html
[23:14:22] <strcat> it's not just filter, it's a lazy filter
[23:14:42] <puritylake> http://pastebin.com/uT7teLvN 
[23:14:50] <puritylake> why is int an unresolved name?
[23:14:55] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[23:15:01] <puritylake> in Init::create<int>(1)
[23:15:16] <benh> create::<int>
[23:15:16] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[23:15:16] <strcat> and you can't invalidate iterators in rust since it freezes (you can have N immutable iterators over something but only 1 mutable one)
[23:15:29] <benh> if you do create < int it will look for int in the value namespace or w/e it's called
[23:15:40] <apoelstra> is it a destructive filter?
[23:15:47] <strcat> apoelstra: no
[23:15:57] <apoelstra> ah
[23:16:29] <apoelstra> i'd rather use a destructive filter, i'm prolly gonna have a billion or so entries in this list
[23:16:33] <strcat> it's implemented on iterators so it can only modify elements and not the container (if it's an iterator of &mut)
[23:16:39] <apoelstra> makes sense
[23:16:56] <strcat> it doesn't return an container, but rather a Filter iterator
[23:16:57] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[23:17:04] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[23:17:18] <apoelstra> cool
[23:17:23] <apoelstra> i'm looking at the source now..
[23:17:44] *** Joins: lenstr (lenstr@2A2A2196.9DA5669E.3F2079FA.IP)
[23:18:07] <apoelstra> yeah, whenever you iterate it re-runs the predicate
[23:18:26] <apoelstra> can you apply filter() more than once this way?
[23:18:31] <strcat> hm?
[23:18:49] <apoelstra> itsm that if you make a filter iterator, it has some predicate attached to it
[23:18:56] <apoelstra> and if you filter again, the predicate would get replaced
[23:18:58] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[23:18:59] <strcat> iterators are consumed as you iterate
[23:19:02] <strcat> but you can clone iterators
[23:19:07] <strcat> they're small
[23:19:19] <apoelstra> ah, i see
[23:19:19] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[23:19:22] <strcat> rusti: for x in range(0, 10).filter(|x| *x > 5) { println!("{}", x) }
[23:19:23] -rusti- 6
[23:19:23] -rusti- 7
[23:19:23] -rusti- 8
[23:19:23] -rusti- 9
[23:19:23] -rusti- ()
[23:19:32] *** Quits: lenstr (lenstr@2A2A2196.9DA5669E.3F2079FA.IP) (Ping timeout)
[23:19:53] <strcat> well I think a &'static fn implementation of Clone is missing...
[23:20:08] <strcat> so filter/map/etc. probably can't be cloned atm but it will be possible
[23:20:09] <puritylake> benh: when i do `Init::create::<int>(1);` It can't determine a type
[23:20:30] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:20:57] *** Quits: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca) (Quit: canhtak)
[23:21:01] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[23:21:46] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[23:22:07] <olsonjeffery> woohoo. have a hello world in sdl2
[23:22:13] <kimundi> puritylake: Your not specifying the self type anywhere there
[23:22:17] <strcat> olsonjeffery: :)
[23:22:44] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[23:23:03] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[23:23:04] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[23:23:25] <pcwalton> so many pyramids of doom in rustdoc
[23:23:31] *** Joins: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca)
[23:23:33] <bascule> LOL @ Rust 0.3 hello world
[23:23:50] <kimundi> puritylake: Wait, what exactly does it give you for "let a: LinkedList<int> = Init::create::<int>(1);"
[23:23:55] <bascule> fn main(args: ~[str]) { io::println("hello world from '" + args[0] + "'!");
[23:23:56] <bascule> }
[23:23:58] <bascule> o_O
[23:23:58] <olsonjeffery> with angbandtk tiles, to boot
[23:24:44] <strcat> olsonjeffery: and hardware acceleration! ;p
[23:24:49] <puritylake> kimundi: http://pastebin.com/uT7teLvN
[23:25:01] <olsonjeffery> yep, yep.
[23:25:04] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[23:25:10] <apoelstra> thanxs for all your help guys, i imagine this channel gets a lot of trivial questions
[23:25:17] <apoelstra> one day i will learn the language and return the favor
[23:25:37] <ssbr> haha, you don't need to know the language to give help, don't worry ;)
[23:25:37] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[23:25:48] <ssbr> (You just need to know answers to common questions.)
[23:25:56] *** Joins: SingingBoyo (brandon@moz-5C373438.ubcsecure.wireless.ubc.ca)
[23:26:20] <kimundi> puritylake: As I said, what does it say for "let a: LinkedList<int> = Init::create::<int>(1);"?
[23:27:07] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[23:27:10] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[23:27:12] <puritylake> oh sorry i'm half asleep
[23:27:22] <kimundi> Eh, me too :P
[23:27:54] <puritylake> not Init::create is an unresolved name
[23:27:59] <puritylake> now*
[23:28:19] *** Quits: derek_c (derek@moz-A8C94B29.cit.cornell.edu) (Ping timeout)
[23:28:53] <kimundi> puritylake: What did you change?
[23:29:18] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[23:29:23] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[23:29:29] <puritylake> kimundi: nothing
[23:29:49] <puritylake> ugh i feel like an idiot :P lol
[23:29:55] <kimundi> puritylake: Hm, I think your problem is that you have to many type parameters
[23:30:16] <kimundi> remove either the <T> on trait Init<T> or on fn create<T>
[23:31:19] <kimundi> Depending on which you removed, either let a: LinkedList<int> = Init::create::<int>(1); or let a: LinkedList<int> = Init::<int>::create(1); should work
[23:31:20] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[23:31:48] <kimundi> And in both cases a: LinkedList<int> = Init::create(1); should work because of inference
[23:32:25] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[23:32:28] <kimundi> Oh, I know what the problem is there
[23:32:50] <puritylake> enlighten me
[23:32:56] *** Quits: engla (engla@moz-F64E1B0F.cust.bredbandsbolaget.se) (Ping timeout)
[23:33:07] *** Quits: shammancer (dannick@moz-532BF0EC.uws.ualberta.ca) (Quit: Leaving)
[23:33:09] *** Quits: nkoep (nik@moz-DF24267B.vpn.rwth-aachen.de) (Ping timeout)
[23:33:17] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[23:34:36] <kimundi> Okay, I know what the problem is (Youre defining a trait and implementing it on a type, but never make use of that) but not how to solve it directly
[23:34:45] <kimundi> puritylake: Does Init need to be a trait?
[23:35:06] <puritylake> No, i just don't know any other way
[23:35:15] <kimundi> Ah, then it gets muuuch easier :)
[23:35:34] <kimundi> just remove the trait and the impl completly
[23:36:16] <puritylake> done
[23:36:17] <kimundi> And replace it with: impl<T> LinkedList<T> { fn create(i: T) -> LinkedList<T> { LinkedList { size: 1u, item: i, next: None, } } }
[23:36:34] *** Quits: puritylake (Mibbit@moz-FF993AD8.b-ras1.mlw.mallow.eircom.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:36:38] *** Joins: josh (josh@moz-D1AC9EC2.hsd1.mn.comcast.net)
[23:36:43] <kimundi> Then you can do "let a = LinkedList::create(1);"
[23:37:23] *** Joins: puritylake (Mibbit@moz-FF993AD8.b-ras1.mlw.mallow.eircom.net)
[23:37:29] <kimundi> That implements the function on the type directly
[23:37:44] <puritylake> sorry mibbit kicked me out
[23:38:02] <kimundi> Ah, did you get the code?
[23:38:10] <puritylake> no
[23:38:16] <kimundi> And replace it with: impl<T> LinkedList<T> { fn create(i: T) -> LinkedList<T> { LinkedList { size: 1u, item: i, next: None, } } }
[23:38:19] <kimundi> Then you can do "let a = LinkedList::create(1);"
[23:38:25] <kimundi> That implements the function on the type directly
[23:38:35] <kimundi> Btw, the rust convention is to do exactly that, just using the name 'new' instead of 'create'
[23:38:59] *** Quits: SingingBoyo (brandon@moz-5C373438.ubcsecure.wireless.ubc.ca) (Ping timeout)
[23:40:00] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[23:40:04] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[23:40:04] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Client exited)
[23:40:56] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[23:41:04] <puritylake> thank u very much
[23:41:07] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[23:42:14] *** Quits: josh (josh@moz-D1AC9EC2.hsd1.mn.comcast.net) (Quit: josh)
[23:45:53] *** Quits: puritylake (Mibbit@moz-FF993AD8.b-ras1.mlw.mallow.eircom.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:45:59] *** Quits: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[23:46:30] *** Joins: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net)
[23:47:56] *** Joins: jdm (jdm@moz-ED0C7AC7.hinet-ip.hinet.net)
[23:47:56] *** ChanServ sets mode: +o jdm
[23:50:25] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[23:50:50] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[23:50:53] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[23:51:39] *** Joins: nkoep (nik@moz-AAC1F459.pool.mediaways.net)
[23:52:04] * pcwalton cannot wrap his brain around expressions that start with "do do"
[23:53:14] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[23:53:18] <kimundi> do do do do do foo { } { } { } { } :P
[23:53:34] * pcwalton is tempted to just remove "do" from the language entirely
[23:53:35] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[23:53:36] <pcwalton> but I won't
[23:53:56] <pcwalton> do spawn { … } is too sugary
[23:54:57] <kimundi> Eh, part of the reason I liked it was stack closure support :P
[23:55:32] <pcwalton> "do" with stack closures encourages pyramids of doom IMHO
[23:55:38] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:55:43] <pcwalton> there is a 6-level deep pyramid of with_c_str in debuginfo
[23:56:02] *** Joins: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net)
[23:56:17] *** Joins: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net)
[23:56:42] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[23:56:43] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[23:57:37] <kimundi> I'm not sure if it really _encourages_ it. If it'S the only way to express it because no RAII implentation existed, then it just the only doable thing. 
[23:57:58] *** Quits: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[23:58:19] <pcwalton> I think it encourages it in the same way old "for" encouraged internal iterators
[23:58:19] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[23:59:20] <pcwalton> I think probably 99% of the "do"s I'm removing have been RAIIable
[23:59:20] <ssbr> pcwalton: Do you not like nesting stack closures, or do you not like how it looks?
[23:59:28] <pcwalton> I don't like the pattern at all
[23:59:43] <pcwalton> it doesn't scale or optimize as well as RAII
[23:59:58] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[23:59:58] *** ChanServ sets mode: +ao brson brson
[23:59:58] <ssbr> pcwalton: what would you do instead of opt_foo.chain |value| { ... } ?
