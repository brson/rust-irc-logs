[00:03:33] *** Quits: ty (ty@moz-i6c4to.wa.comcast.net) (Quit: leaving)
[00:04:02] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[00:04:21] *** Joins: Boscop (me@moz-5ac.5rj.126.98.IP)
[00:05:09] *** Joins: dpc__ (dpc@moz-t6gr4b.ca.comcast.net)
[00:06:11] *** Quits: qrlpx_ (smuxi@moz-r2fsh5.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[00:11:11] *** Joins: qrlpx (smuxi@moz-n7t.3nb.211.95.IP)
[00:11:26] *** Joins: bdero (bran@moz-216hqv.oo5r.e4su.0006.2601.IP)
[00:16:33] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[00:22:09] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[00:48:00] *** Joins: lenstr (lenstr@moz-2e1.vju.25.171.IP)
[00:52:07] *** Quits: lenstr (lenstr@moz-2e1.vju.25.171.IP) (Ping timeout: 121 seconds)
[01:05:26] *** Quits: kkimdev (kkimdev@moz-2le2m8.6cjs.vk5s.0000.2620.IP) (Quit: Leaving)
[01:15:05] *** Joins: davebettin (davebettin@moz-acc.cl4.35.72.IP)
[01:22:15] *** Joins: brson (brson@moz-h4f.m43.48.37.IP)
[01:26:33] *** cMR is now known as cmr
[01:31:20] *** Quits: chc4 (chc4@moz-pdo0at.ma.comcast.net) (Quit: AHHHHH BEES)
[01:49:42] *** Joins: lenstr (lenstr@moz-2e1.vju.25.171.IP)
[01:50:38] *** Quits: lenstr (lenstr@moz-2e1.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[02:04:06] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[02:04:46] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[02:07:36] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[02:07:48] <kmcguire> hmm how in the world is build_glium implemented on glutin::WindowBuilder?
[02:10:27] *** Quits: kimundi (kimundi@moz-jta.503.188.87.IP) (Ping timeout: 121 seconds)
[02:13:11] *** Joins: kimundi (kimundi@moz-7st4bq.dip0.t-ipconnect.de)
[02:15:31] * kmcguire pulls hair out trying to remember how to initialize glium
[02:15:55] *** kimundi is now known as zz_kimundi
[02:18:51] <HeroesGrave> kmcguire: https://github.com/tomaka/glium/blob/master/src/backend/glutin_backend.rs#L234
[02:19:27] *** Joins: rAad (dave@moz-t7r.7k1.236.104.IP)
[02:22:37] *** zz_kimundi is now known as kimundi
[02:24:03] <kmcguire> hell with it.. i figure it out tomorrow lol
[02:28:44] *** Joins: Gamecubic (cubic@moz-qfrl13.mc.videotron.ca)
[02:30:23] *** Quits: Wild_Cat (Max@moz-na0tak.dsl.teksavvy.com) (Ping timeout: 121 seconds)
[02:31:06] *** Quits: kmcguire (kmcguire@moz-c955nf.res.rr.com) (Ping timeout: 121 seconds)
[02:32:59] *** Quits: brson (brson@moz-h4f.m43.48.37.IP) (Quit: leaving)
[02:38:49] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[02:46:52] *** Quits: dpc__ (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[02:48:51] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[02:51:26] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[02:51:32] *** Joins: lenstr (lenstr@moz-2e1.vju.25.171.IP)
[02:54:22] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[02:55:37] *** Quits: lenstr (lenstr@moz-2e1.vju.25.171.IP) (Ping timeout: 121 seconds)
[02:56:50] *** Joins: Wild_Cat (Max@moz-na0tak.dsl.teksavvy.com)
[03:02:46] *** Quits: ytain (ytain@moz-ge9fgi.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[03:09:01] *** Joins: genbattle (genbattle@moz-2qo6a1.xtra.co.nz)
[03:09:06] *** Joins: mindtree (Mitch@moz-rkogvk.iprimus.net.au)
[03:19:29] *** Quits: bdero (bran@moz-216hqv.oo5r.e4su.0006.2601.IP) (Connection closed)
[03:21:51] *** Joins: bdero (bran@moz-216hqv.oo5r.e4su.0006.2601.IP)
[03:24:44] *** Joins: p1start (p1start@moz-nftjhe.org)
[03:29:01] *** Quits: mark_edward (mark@moz-dg4mrp.in.comcast.net) (Ping timeout: 121 seconds)
[03:30:22] *** Quits: saml_ (saml@moz-rkfmct.res.rr.com) (Ping timeout: 121 seconds)
[03:30:39] *** Joins: mark_edward (mark@moz-dg4mrp.in.comcast.net)
[03:49:05] *** Joins: orangeshark (erik@moz-2br1pv.44tj.56ot.0306.2602.IP)
[03:52:44] *** Joins: lenstr (lenstr@moz-2e1.vju.25.171.IP)
[03:53:49] *** Quits: lenstr (lenstr@moz-2e1.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[03:54:35] *** Joins: dpc__ (dpc@moz-t6gr4b.ca.comcast.net)
[03:55:42] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[03:59:07] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Connection closed)
[04:01:49] *** Joins: Guest44 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[04:03:37] *** Joins: SHC (quassel@moz-855.qld.88.59.IP)
[04:04:41] *** Quits: Rusky (russell@moz-pob0l8.slkc.qwest.net) (Ping timeout: 121 seconds)
[04:05:00] *** Quits: SHC (quassel@moz-855.qld.88.59.IP) (Connection closed)
[04:05:10] *** Joins: SHC (quassel@moz-855.qld.88.59.IP)
[04:06:11] *** Quits: SHC (quassel@moz-855.qld.88.59.IP) (Connection closed)
[04:07:01] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[04:07:31] *** Quits: Wild_Cat (Max@moz-na0tak.dsl.teksavvy.com) (Ping timeout: 121 seconds)
[04:08:14] *** Quits: davebettin (davebettin@moz-acc.cl4.35.72.IP) (Ping timeout: 121 seconds)
[04:12:06] <Guest44> Hey guys, anyone wants to discuss ECS?
[04:15:04] <rsaarelm> Guest44: Possibly.
[04:15:18] <Guest44> awesome, let the discussion commence
[04:16:46] <rsaarelm> Did you have some questions about them or something?
[04:17:20] <Guest44> well, I have some concerns more like
[04:17:53] *** Quits: Thorn (Thorn@moz-gfo.20c.107.217.IP) (Quit: Quit)
[04:18:04] <Guest44> seems like there are a million articles on proper implementation, and they mostly oppose each other
[04:19:15] <Guest44> also, if I understand it correctly, systems that operate on multiple components would blow up cache coherence. Is there a general approach to solve that problem?
[04:20:25] <csherratt> Operate as in write?
[04:20:49] <niconii> Guest44: well, i think it's pretty natural for there to be opposing viewpoints
[04:21:09] <Guest44> niconii well not really, because if one is right, the other has to be wrong
[04:21:12] <niconii> Guest44: not all games are the same, so not all games need the same things out of an ecs
[04:21:30] <niconii> Guest44: so what is right for one game is not necessarily right for another
[04:21:36] *** Joins: Rusky (russell@moz-pob0l8.slkc.qwest.net)
[04:21:44] <rsaarelm> That part is tricky, I don't really know. I've been having a bit different problem where I'd like to have some type-level support for a multiple components present thing with entities (like mobs with physics, sprite, stats and AI), instead of just hoping the components are there and crashing and burning if they're not.
[04:22:05] <Guest44> niconii I've seen multiple implementations where the component is a member variable on an entity. I've seen multiple implementations where the components are all stored in a central ComponentManager storage, and the entity is just basically an ID. They can't both "be" an implementation of ECS
[04:22:21] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[04:22:27] <Guest44> and if they are, that means that "ECS" is basically as vague as "some sort of an OO system"
[04:22:58] <rsaarelm> I just went and rolled a custom ECS for my game specifically. One reason I didn't use any of the external crate ECSes currently for Rust is that they don't seem to generally support easy savegames with #derive(Encodable).
[04:23:58] <rsaarelm> The big idea IMO is that the behavior of the entity is entirely data-driven and defined and redefined at runtime.
[04:24:12] <rsaarelm> Also I think the latter version is the dominant these days.
[04:24:26] <rsaarelm> Well, in the C++, Rust space.
[04:24:42] <rsaarelm> Scripty languages like JavaScript might fit different models.
[04:25:26] <rsaarelm> Big idea as opposed to OO where the behavior and composition of behavior are fixed at compile time and once you create an object of some class it's stuck to that class.
[04:25:36] <niconii> Guest44: you've given two examples and now state that this makes "ECS" as vague as "some sort of an OO system", but i don't think that follows
[04:25:48] <niconii> Guest44: it just means there's two major categories of ECS
[04:26:26] <niconii> Guest44: that being said, i've only heard the term "entity-component system" used referring to the latter, where the entity is just an ID
[04:27:00] <niconii> Guest44: the former i've heard referred to as a "component pattern"
[04:27:19] <rsaarelm> I think I saw the former in some old Game Programming Gems book.
[04:27:46] <niconii> maybe so
[04:27:51] <rsaarelm> But you really want the latter because cache coherency.
[04:28:00] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[04:28:21] <niconii> Guest44: anyway, you seem to be making this out to be a black-and-white issue, but it's not
[04:28:46] <niconii> Guest44: this, like many other problems in programming, is a matter of tradeoffs
[04:29:36] *** Quits: Rusky (russell@moz-pob0l8.slkc.qwest.net) (Quit: Leaving.)
[04:30:25] <Guest44> rsaarelm but if a system operates on multiple different components (like a RenderSystem operating on Position and Renderable), doesn't that defeat cache coherence?
[04:30:56] *** Joins: Rusky (russell@moz-pob0l8.slkc.qwest.net)
[04:31:33] *** Quits: Gamecubic (cubic@moz-qfrl13.mc.videotron.ca) (Quit: Leaving)
[04:32:06] <niconii> Guest44: how many kinds of components do you need? are they complex or fairly simple? do they fit in a small amount of space? how many entities do you need at one time? do you need to add new kinds of components at runtime? do you need to dynamically add and remove components to entities?
[04:32:23] <niconii> Guest44: there are many different possible answers here, depending on your game
[04:32:29] *** Quits: bdero (bran@moz-216hqv.oo5r.e4su.0006.2601.IP) (Ping timeout: 121 seconds)
[04:32:35] <niconii> Guest44: and depending on your game, one approach may be better than the other
[04:33:54] <rsaarelm> There might be a one or two special cases that see really heavy processing compared to the rest of the components, probably related to rendering and physics, where you could just merge the relevant components into one and put them in one array as optimization.
[04:34:58] *** Joins: jaen (jaen@moz-ifmik2.copit.pl)
[04:35:01] *** Quits: jaen (jaen@moz-ifmik2.copit.pl) (Quit: WeeChat 1.1.1)
[04:36:19] *** Joins: AngelOfSol (AngelOfSol@moz-dj58kc.rh.rit.edu)
[04:40:34] <rsaarelm> But I don't know how people who do serious enough engines that they actually need to leverage the cache coherency thing in practice architect this stuff.
[04:40:48] *** Quits: orangeshark (erik@moz-2br1pv.44tj.56ot.0306.2602.IP) (Quit: Leaving)
[04:40:59] <rsaarelm> I just make modest enough stuff myself that naive implementations don't hurt significantly.
[04:44:03] *** Quits: m104ru (m104ru@moz-sje.6lq.205.109.IP) (Ping timeout: 121 seconds)
[04:53:00] <rsaarelm> Looks like my game is doing 200 fps on release build on my 5 year old cheapo laptop, not a lot of pressure for heavy optimization quite yet.
[04:53:32] <Guest44> rsaarelm fair enough, how many component instances are you processing with 200 fps?
[04:54:17] *** Joins: lenstr (lenstr@moz-2e1.vju.25.171.IP)
[04:54:46] <rsaarelm> I've got around 10 component types and on the order of 100 entities in play.
[04:55:00] *** Quits: lenstr (lenstr@moz-2e1.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[04:55:14] *** Joins: lenstr (lenstr@moz-2e1.vju.25.171.IP)
[04:55:45] <rsaarelm> Game's a turn-based roguelike, I don't expect the numbers to go up that much, most of the missing stuff to do is complex rule interactions.
[04:56:07] *** Quits: lenstr (lenstr@moz-2e1.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[05:06:19] <Guest44> rsaarelm did you struggle with inter-communication?
[05:09:53] <rsaarelm> Between the components?
[05:10:50] <Guest44> yes
[05:11:26] <rsaarelm> Basically I just have a big load of "drop in the ECS, do stuff with specific concrete component, pop back out" methods on my entity handle type. Coordination is just calling several of those. https://github.com/rsaarelm/magog/blob/master/world/src/entity.rs
[05:12:29] <rsaarelm> The looming problem is that there's no type assurances and a lot of the methods are panic-happy if the entity is missing an expected component and the method doesn't make sense without it.
[05:13:30] <rsaarelm> I'd like some kind of gating where you'd have "subsystem types" or something for entities guaranteed to have some family of components present, but I don't quite know how the subsystem type should be defined.
[05:13:33] *** Joins: bdero (bran@moz-216hqv.oo5r.e4su.0006.2601.IP)
[05:15:09] <FreeFull> rsaarelm: Did you look at the other ECS systems available for Rust?
[05:16:22] <Guest44> FreeFull the only one I've seen was https://github.com/HeroesGrave/ecs-rs
[05:16:42] <Guest44> are there more?
[05:16:53] <rsaarelm> There are a bunch.
[05:17:07] <rsaarelm> FreeFull: I did, and none of them seemed to have a story for save game support.
[05:17:39] <rsaarelm> They make themselves work as library components by mucking with the Any type, and that isn't Encodable-derivable,.
[05:17:59] <rsaarelm> I just use macros to hardcode my component set into struct fields for the ECS.
[05:18:19] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[05:18:55] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[05:19:34] <FreeFull> rsaarelm: HeroesGrave's one doesn't seem to use Any
[05:19:45] <FreeFull> No idea about saving though
[05:22:49] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[05:23:19] <rsaarelm> Taking a look...
[05:23:20] <OneSadCookie> hmm, rsaarelm my kitten just forked your game and changed the name of a file and I think he stopped before creating a pull request :/
[05:23:42] <OneSadCookie> just in case you spot some weird activity o_O
[05:25:13] <rsaarelm> I don't think I'll notice anything before a pull request actually comes in.
[05:25:21] *** Quits: guycook (quassel@moz-ircp2q.snap.net.nz) (Connection closed)
[05:25:57] <OneSadCookie> he's a more proficient github user than I am, that's for sure
[05:29:11] <Guest44> OneSadCookie if you take a video of that, that'll go viral for sure
[05:29:19] <Guest44> I can't comprehend a cat doing that
[05:31:03] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[05:32:29] *** Joins: SHC (quassel@moz-u89.q16.204.117.IP)
[05:32:38] <HeroesGrave> Heh. Came back to my computer to find I had been pinged on a channel that usually consists of leave/join messages.
[05:32:59] <FreeFull> HeroesGrave: Oh, hello there
[05:33:13] <FreeFull> How hard do you think it would be to save games with your ecs system?
[05:33:27] *** Quits: O01eg (o01eg@moz-i0qbdp.2u5i.3egh.2698.2a02.IP) (Client exited)
[05:33:27] <HeroesGrave> Not entirely sure
[05:34:00] <FreeFull> I suppose it's something that needs to be explored then
[05:34:02] <HeroesGrave> Assuming everything is POD, I could just dump it to a file
[05:34:10] <HeroesGrave> But I removed that assumption a while ago
[05:34:12] <Guest44> how hard can it be to just make everything serializable?
[05:34:25] <OneSadCookie> Guest44: I wish I had!
[05:34:44] <HeroesGrave> Mainly refererences between entities
[05:36:04] <HeroesGrave> Also, I don't want to impose an "everything must be serializable" restriction
[05:38:12] <HeroesGrave> Things will break if any components contain an Rc, because they lose information when serialised
[05:38:58] *** Joins: genbattle_ (genbattle@moz-8e8gau.xtra.co.nz)
[05:39:41] <FreeFull> Yeah, in that case you need to somehow save the graph structure
[05:39:44] *** Quits: genbattle (genbattle@moz-2qo6a1.xtra.co.nz) (Ping timeout: 121 seconds)
[05:41:02] <HeroesGrave> Maybe if I introduce a new trait that shows a trait is just data, although not necessarily Copy
[05:41:08] <HeroesGrave> *shows a type
[05:42:44] <HeroesGrave> There are a few cases of non-Copy data that should be allowed as components. (eg: Vec, String, etc.)
[05:43:49] <FreeFull> A custom save trait?
[05:44:23] <HeroesGrave> yeah
[05:47:05] <HeroesGrave> It would also be nice to compact all the entity IDs (eg: if ID 1 is free, move the highest ID into that slot)
[05:47:30] <HeroesGrave> But that wouldn't work when entities store another entity's ID
[05:47:44] <HeroesGrave> Wait. Yes it would work
[05:47:52] <HeroesGrave> I fixed that a while ago
[05:48:27] <SHC> Hi HeroesGrave
[05:48:28] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[05:48:45] *** Quits: genbattle_ (genbattle@moz-8e8gau.xtra.co.nz) (Ping timeout: 121 seconds)
[05:48:48] <HeroesGrave> Hi SHC. How are you going with Rust so far?
[05:49:03] <SHC> I just got my hello world working..
[05:49:21] <SHC> Having an issue with understanding structs and struct tuples.
[05:50:55] <HeroesGrave> They're the same thing but one doesn't have field names (uses field numbers instead).
[05:51:13] <SHC> what's with the match statement with it?
[05:51:22] <SHC> match(a, b, c) => ???
[05:51:54] <SHC> BTW, are there any plugins to Atom editor?
[05:52:01] <HeroesGrave> atom-language-rust I think
[05:52:24] <SHC> I mean, run the compiler from inside the editor.
[05:52:50] <HeroesGrave> Not that I know of. If someone finds one, please let me know too.
[05:54:08] <FreeFull> HeroesGrave: How did you fix it?
[05:54:59] <HeroesGrave> The entity ID struct doesn't know what index the data is stored at
[05:55:16] <HeroesGrave> You have to borrowed an 'IndexedEntity' from the world
[05:55:34] <HeroesGrave> Which basically stops you from accessing invalid data
[05:55:59] <FreeFull> Cool
[05:57:19] *** Quits: niconii (nicole@moz-5e9nqt.frgo.qwest.net) (Quit: leaving)
[05:57:25] *** Joins: lenstr (lenstr@moz-2e1.vju.25.171.IP)
[05:58:25] *** Quits: lenstr (lenstr@moz-2e1.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[06:01:02] *** Joins: squiddy (squiddy@moz-md4.pm3.19.178.IP)
[06:01:17] *** Joins: kkimdev (kkimdev@moz-k8t.rhv.135.104.IP)
[06:01:54] *** Joins: James (quassel@moz-9kp9p2.range86-148.btcentralplus.com)
[06:12:26] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[06:16:04] *** Joins: SneakySnake (nya@moz-i9is4u.pool.telekom.hu)
[06:16:58] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[06:19:48] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (Quit: Leaving)
[06:19:57] *** Joins: squiddy (squiddy@moz-md4.pm3.19.178.IP)
[06:20:48] *** Quits: kkimdev (kkimdev@moz-k8t.rhv.135.104.IP) (Ping timeout: 121 seconds)
[06:24:54] <Guest44> so this is more of a Rust question than a rust-gamedev question, but in my ComponentSystem I have     pub fn create<T: Component>() -> T { }, and I want it to add to a different pool of components depending on T. How would that be implemented in Rust? is there an equivalent of the C++ typeid?
[06:25:08] *** Quits: bdero (bran@moz-216hqv.oo5r.e4su.0006.2601.IP) (Quit: Leaving.)
[06:26:03] <rsaarelm> Guest44: There's a TypeId thing in the standard library.
[06:27:02] <rsaarelm> But the nice and generic approaches like that are the ones I dumped because I wanted the savegames with simple serialization, so not that much experience with it.
[06:28:01] <rsaarelm> Hm, wonder if you could use some kind of trait object referencing there to component pools that are still typed to the concrete component type in the actual struct...
[06:29:03] <rsaarelm> Selecting the pool based on typeid requires that you have a homogeneous list of references to the pools at some level, like something done with Any values, but maybe that doesn't need to be the primary container...
[06:29:07] <Guest44> rsaarelm so you just kept everything in a single pool, and then cast them to the correct types in the systems?
[06:30:16] *** Quits: Twinklebear (Twinklebear@moz-ttrcn3.ut.comcast.net) (Quit: Leaving)
[06:31:29] <rsaarelm> I have a struct that has concrete fields "drawables: HashMap<id, Drawable>, stats: HashMap<id, Stats>, physics: HashMap<id, Physics>" etc. and separate methods for accessing each spelled out.
[06:31:43] <rsaarelm> Basically macro-generated boilerplate.
[06:31:53] <rsaarelm> https://github.com/rsaarelm/magog/blob/master/world/src/ecs.rs
[06:32:53] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (Ping timeout: 121 seconds)
[06:32:54] <Guest44> I see
[06:33:04] *** Quits: Amaranth (travis@moz-1raqsl.cpe.cableone.net) (Ping timeout: 121 seconds)
[06:33:39] *** Joins: squiddy (squiddy@moz-md4.pm3.19.178.IP)
[06:35:03] *** Quits: Guest44 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[06:37:26] *** Quits: James (quassel@moz-9kp9p2.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[06:44:43] *** Joins: warmwaffles (warmwaffles@moz-6gpnl1.res.rr.com)
[06:45:28] <warmwaffles> Is there a 2d physics library similar to Box2d? I'm having some issues compiling nphysics on macosx
[06:45:48] <cmr> warmwaffles: not that I know of, and if I don't know of it, it probably doesn't exist.
[06:48:06] *** Joins: mib_4priat (Mibbit@moz-4ig.nqv.62.183.IP)
[06:48:19] <mib_4priat> anyone?
[06:48:21] <warmwaffles> I'm sure pulling together box2d bindings wouldn't be too difficult
[06:48:47] <tomaka> wasn't there bindings for chimpunk-2d?
[06:49:37] <tomaka> google finds https://github.com/TyOverby/chipmunk-sys
[06:49:48] <tomaka> but I think there were bindings older than that
[06:50:24] <warmwaffles> the hell is chipmunk2d?
[06:50:25] <warmwaffles> lol
[06:50:33] <warmwaffles> I'm coming from Java land and libgdx
[06:50:53] <cmr> You're just as capable of using search engines as the rest of us, I'm sure.
[06:51:27] <warmwaffles> hehehe
[06:51:29] <mib_4priat> is there any engine for game develop in rust? i mean,for business develop.
[06:51:51] <warmwaffles> lol hedging your business on beta software is a bad idea
[06:51:57] <warmwaffles> Piston is p. chill
[06:52:58] <tomaka> Does someone know how engines manage texture units?
[06:53:33] <tomaka> do they use some least-recently-used algorithm like kernels with memory pages?
[06:54:02] <tomaka> or do they just have an u32 containing the next texture unit to use?
[06:54:25] <cmr> tomaka: At least in the engines I've looked at that didn't use bindless textures, they have a fixed texture unit for every texture/type of texture.
[06:54:57] <tomaka> ok
[06:55:04] <tomaka> but texture units are not infinite
[06:55:31] <cmr> yes, but changing texture unit usage requires recompiling your shaders to use the new lookup
[06:56:02] <tomaka> huh, you just need to call glUniform1i
[06:56:10] <tomaka> or am I missing something?
[06:56:58] <cmr> oh yes, sorry.
[06:57:56] <cmr> anyway the engines I saw that used fixed texture unit mappings had something like, 2 units for diffuse, 1 for specular, etc, and it was just part of the material.
[06:58:21] <tomaka> hmmm
[06:58:34] <tomaka> obviously I can't know that in advance in glium
[06:58:37] <cmr> yeah
[06:58:45] *** Joins: lenstr (lenstr@moz-2e1.vju.25.171.IP)
[06:58:54] <tomaka> basically right now I'm caching the textures that are binded to each unit
[06:59:09] <tomaka> so when the user wants to use a tetxure, I can check if it's already binded somewhere
[06:59:21] *** Quits: mib_4priat (Mibbit@moz-4ig.nqv.62.183.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:59:25] <tomaka> however I need to know where to bind textures that are not binded yet
[06:59:31] *** Joins: debu (debu@moz-srkq66.dyn.telefonica.de)
[06:59:33] *** Joins: bugweiser (Mibbit@moz-4ig.nqv.62.183.IP)
[06:59:35] *** Quits: lenstr (lenstr@moz-2e1.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[06:59:40] *** Joins: lenstr (lenstr@moz-2e1.vju.25.171.IP)
[07:00:01] <tomaka> I guess I could just use a "next_texture_unit: u32" that is incremented every time I bind a new texture
[07:00:15] <tomaka> but there's maybe a more efficient solution
[07:00:43] *** Quits: lenstr (lenstr@moz-2e1.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[07:00:46] <tomaka> because if the counter reaches the last unit and goes back to 0, I will unbind textures all over the place
[07:01:23] *** Joins: genbattle (genbattle@moz-h2rr1j.xtra.co.nz)
[07:02:36] <tomaka> if the texture binded to unit 0 is used 1000 times per frame, and all other textures are used each once, it would be better to replace one of the other ones
[07:03:27] <cmr> Is it bad to leave unused textures bound?
[07:03:39] *** Joins: dmac (dmac@moz-2ig65r.ca.comcast.net)
[07:03:43] <tomaka> no
[07:03:46] <cmr> ok
[07:03:57] <cmr> it seems MAX_TEXTURE_IMAGE_UNITS is pretty universally 32, you could use a bitset.
[07:04:00] <tomaka> nothing's bad, it's just optimizations :)
[07:04:09] <cmr> (http://feedback.wildfiregames.com/report/opengl/)
[07:04:12] <cmr> well, sure.
[07:05:49] <cmr> (http://feedback.wildfiregames.com/report/opengl/feature/GL_MAX_TEXTURE_IMAGE_UNITS_ARB)
[07:05:50] *** Quits: warmwaffles (warmwaffles@moz-6gpnl1.res.rr.com) (Connection closed)
[07:06:36] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[07:06:51] *** Quits: genbattle (genbattle@moz-h2rr1j.xtra.co.nz) (Ping timeout: 121 seconds)
[07:09:48] *** Joins: skippydippy (Mibbit@moz-j4q.cic.181.94.IP)
[07:10:06] *** Quits: skippydippy (Mibbit@moz-j4q.cic.181.94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:11:06] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[07:11:24] *** Joins: Skyler (Skyler@moz-rv949t.sd.cox.net)
[07:11:52] <tomaka> playbot: 0u32.trailing_zeros()
[07:11:54] -playbot- 32
[07:14:27] *** Joins: Amaranth (travis@moz-1raqsl.cpe.cableone.net)
[07:14:50] <mra> playbot: -1u32.trailing_zeros()
[07:14:51] -playbot- <anon>:9:9: 9:31 error: unary negation of unsigned integers may be removed in the future
[07:14:51] -playbot- <anon>:9         -1u32.trailing_zeros()
[07:14:51] -playbot- output truncated; full output at: http://bit.ly/1KmBW0d
[07:15:50] <cmr> playbot: (!0).trailing_zeros()
[07:15:52] -playbot- output truncated; full output at: http://bit.ly/1HMOm38
[07:16:04] <cmr> well that's a bug.
[07:16:08] <cmr> playbot: (!0u32).trailing_zeros()
[07:16:10] -playbot- 0
[07:18:55] *** Parts: HeroesGrave (HeroesGrave@moz-6nfblg.vf.net.nz) ("Bye")
[07:20:57] *** Joins: m104ru (m104ru@moz-j4k.8g6.153.93.IP)
[07:21:16] *** Joins: genbattle (genbattle@moz-h2rr1j.xtra.co.nz)
[07:33:33] *** Quits: debu (debu@moz-srkq66.dyn.telefonica.de) (Ping timeout: 121 seconds)
[07:33:45] *** Quits: Amaranth (travis@moz-1raqsl.cpe.cableone.net) (Ping timeout: 121 seconds)
[07:34:32] *** Quits: SneakySnake (nya@moz-i9is4u.pool.telekom.hu) (Connection closed)
[07:34:41] *** Joins: bjz (bjz@moz-b43.1aa.161.202.IP)
[07:49:44] <tomaka> Yay I lost 15 FPS after my optimization :D
[07:49:48] <cmr> :D
[07:50:26] <tomaka> for some reason there are *more* textures changes than before
[07:50:31] <tomaka> I don't know what I did wrong
[07:53:28] *** Joins: lenstr (lenstr@moz-2e1.vju.25.171.IP)
[07:53:58] *** Joins: Amaranth (travis@moz-1raqsl.cpe.cableone.net)
[07:54:08] *** Quits: lenstr (lenstr@moz-2e1.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[07:54:22] *** Joins: lenstr (lenstr@moz-2e1.vju.25.171.IP)
[07:55:24] *** Quits: lenstr (lenstr@moz-2e1.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[07:56:28] *** Quits: dpc__ (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[07:57:07] *** Quits: bjz (bjz@moz-b43.1aa.161.202.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[07:57:34] *** Joins: Tobba (Tobba@moz-6oh.7ki.21.217.IP)
[07:58:16] *** Joins: bjz (bjz@moz-b43.1aa.161.202.IP)
[07:59:53] <tomaka> Ok I got my performances from before back
[07:59:53] *** Quits: bjz (bjz@moz-b43.1aa.161.202.IP) (Connection closed)
[08:00:26] <tomaka> but no gain with my test case because I'm using almost always the same program in the whole scene
[08:00:38] <tomaka> instead of calling glBindTexture it calls glUniform
[08:00:45] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[08:01:06] <tomaka> it should be a bit faster if you use multiple programs, as the call to glUniform won't be necessary
[08:03:38] <tomaka> I'm pretty satisfied with my stack trace here, there are 0 redundant state changes
[08:04:02] <tomaka> it's "glUniform", "glDrawElements", "glUniform", "glDrawElements", etc.
[08:04:15] <tomaka> the uniform changes every time as it's animated
[08:04:20] *** Quits: AngelOfSol (AngelOfSol@moz-dj58kc.rh.rit.edu) (Connection closed)
[08:04:49] *** Joins: Thorn (Thorn@moz-gfo.20c.107.217.IP)
[08:05:08] *** Quits: acharles (acharles@moz-ulbdcn.ca.comcast.net) (Client exited)
[08:05:15] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[08:06:36] <tomaka> It's too bad you can't use uniform buffers transparently (ie without changing the GLSL code) or I would totally do it
[08:14:51] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[08:19:10] *** Joins: aepsil0n (eduard@moz-8h7njb.hsi8.kabel-badenwuerttemberg.de)
[08:20:05] *** Joins: sillesta (sillesta@moz-501od2.business.telia.com)
[08:29:14] *** Joins: lenstr (lenstr@moz-2e1.vju.25.171.IP)
[08:31:16] *** Joins: gonzaloserrano (Adium@moz-1nv.3t7.97.62.IP)
[08:31:35] *** Quits: Tobba (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[08:31:45] *** Joins: erz (erz@moz-n2p94l.broadband.corbina.ru)
[08:36:03] *** Joins: Tobba (Tobba@moz-6oh.7ki.21.217.IP)
[08:36:05] *** Quits: Tobba (Tobba@moz-6oh.7ki.21.217.IP) (Connection closed)
[08:38:11] *** Joins: SneakySnake (nya@moz-i9is4u.pool.telekom.hu)
[08:42:47] <cmr> yeah.
[08:43:09] <sillesta> morning
[08:50:53] *** Joins: bjz (bjz@moz-4l6.mjm.52.113.IP)
[08:54:54] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[08:55:24] *** Quits: SHC (quassel@moz-u89.q16.204.117.IP) (Ping timeout: 121 seconds)
[08:56:12] *** Joins: SHC (quassel@moz-thg.h7g.93.59.IP)
[08:56:14] *** Joins: Tobba (Tobba@moz-6oh.7ki.21.217.IP)
[08:59:26] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[09:00:26] *** Joins: genbattle_ (genbattle@moz-1s739j.xtra.co.nz)
[09:02:46] *** Quits: genbattle (genbattle@moz-h2rr1j.xtra.co.nz) (Ping timeout: 121 seconds)
[09:05:08] *** Quits: bjz (bjz@moz-4l6.mjm.52.113.IP) (Ping timeout: 121 seconds)
[09:07:45] *** Joins: Tuba (Tobba@moz-6oh.7ki.21.217.IP)
[09:09:17] *** Quits: Tobba (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[09:10:23] *** Quits: lenstr (lenstr@moz-2e1.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[09:10:37] *** Joins: lenstr (lenstr@moz-2e1.vju.25.171.IP)
[09:11:42] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[09:12:13] *** Joins: Tobba_ (Tobba@moz-6oh.7ki.21.217.IP)
[09:12:57] *** Joins: Tobba (Tobba@moz-6oh.7ki.21.217.IP)
[09:15:48] *** Quits: Tuba (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[09:15:55] *** Joins: Tuba (Tobba@moz-6oh.7ki.21.217.IP)
[09:16:17] *** Quits: Tobba_ (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[09:17:11] *** Quits: Tobba (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[09:18:35] *** Quits: bugweiser (Mibbit@moz-4ig.nqv.62.183.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:19:13] <tomaka> Hum, there are 6 numbers that are printed to stdout when I start my game
[09:19:18] <tomaka> I have no idea where it comes from >_>
[09:19:21] <cmr> lol
[09:19:24] <tomaka> there's no println in my sourcecode whatsoever
[09:19:27] <cmr> the machine speaks!
[09:19:39] <cmr> gdb, break on write ;)
[09:19:47] <cmr> oh, windows probably?
[09:19:54] <tomaka> yeah
[09:19:57] <tomaka> but I have gdb
[09:20:01] <tomaka> I didn't know break on write existed
[09:20:12] <cmr> yeah you can break on libc functions
[09:20:18] <tomaka> oh right
[09:20:28] <cmr> but I'm not sure what the corresponding windows call would be.
[09:21:06] <tomaka> yeah breaking on "write" doesn't break
[09:21:36] <aatch> WriteToFileHandleBecauseWeHaveAMinimumCharacterLimit?
[09:23:48] *** Joins: Tobba (Tobba@moz-65g.7ki.21.217.IP)
[09:23:50] <tomaka> WriteFile and WriteFileEx don't break either
[09:24:08] <tomaka> well, they break from inside the gl driver but that's not what causes the print
[09:25:07] <tomaka> printf and WriteConsole don't work either >_>
[09:25:19] *** Quits: Tuba (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[09:25:32] <tomaka> come on
[09:26:43] <sillesta> maybe rollback to earlier commits and see when it appeared?
[09:28:28] *** Quits: Tobba (Tobba@moz-65g.7ki.21.217.IP) (Ping timeout: 121 seconds)
[09:30:32] *** Joins: jaen (jaen@moz-ifmik2.copit.pl)
[09:30:36] <tomaka> it would be funny if it came from rustc
[09:30:41] <tomaka> I mean from the stdlib
[09:33:09] *** Joins: Tobba (Tobba@moz-6oh.7ki.21.217.IP)
[09:33:18] <tomaka> or maybe it's really the driver doing it
[09:34:01] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[09:35:29] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[09:36:07] *** Joins: edlothiol (user@moz-chhfor.hsi02.unitymediagroup.de)
[09:36:13] <tomaka> Added to changelog: "Now printing 6 numbers at initialization"
[09:46:47] *** Joins: delma (aopkarja@moz-6l6mf3.cs.helsinki.fi)
[09:47:09] <WindowsBunny> tomaka: The only way to write to the console is WriteFile/WriteConsole
[09:47:16] <WindowsBunny> libc just wraps that
[09:47:25] <tomaka> Neither break in gdb
[09:47:34] <WindowsBunny> thats weird
[09:47:53] <WindowsBunny> tomaka: Try redirecting your program to a file
[09:48:03] <tomaka> and breaking on WriteFile?
[09:48:04] <WindowsBunny> See if the numbers get redirected, or still printed to the console
[09:48:11] <tomaka> oh ok
[09:48:25] <tomaka> yeah they are redirected
[09:49:04] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[09:49:30] <WindowsBunny> tomaka: Also, did you break on WriteConsoleW?
[09:49:58] <WindowsBunny> Remember that there's A/W versions of that
[09:50:00] <tomaka> oh, good point
[09:50:27] <tomaka> haha
[09:50:32] <tomaka> it comes from rustc-serialize
[09:50:39] <tomaka> WindowsBunny: thanks for helping me!
[09:51:27] <tomaka> https://github.com/rust-lang/rustc-serialize/blob/144d1dfe3265f0e635816073e6e8129d50b95dfe/src/json.rs#L1483
[09:51:29] <tomaka> seriously?
[09:52:32] <WindowsBunny> tomaka: I burst out laughing
[09:53:34] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[09:53:41] <cmr> loooooool
[09:53:52] <WindowsBunny> https://github.com/rust-lang/rustc-serialize/commit/af950f07b9da419d66124c5ffe8c85dd23e0ddac
[09:56:24] <tomaka> https://github.com/rust-lang/rustc-serialize/pull/102
[09:57:01] *** Joins: genbattle__ (genbattle@moz-dlitir.xtra.co.nz)
[09:57:48] <WindowsBunny> tomaka: I like that acrichto was assigned by rust-highfive
[09:59:04] *** Quits: genbattle_ (genbattle@moz-1s739j.xtra.co.nz) (Ping timeout: 121 seconds)
[09:59:46] *** nical is now known as nical|lunch
[10:19:49] *** Joins: Tuba (Tobba@moz-65g.7ki.21.217.IP)
[10:22:25] *** Quits: SHC (quassel@moz-thg.h7g.93.59.IP) (Connection closed)
[10:22:49] *** Joins: filsmick (filsmick@moz-ekfnpo.abo.wanadoo.fr)
[10:22:50] *** Quits: Tobba (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[10:24:25] *** Quits: genbattle__ (genbattle@moz-dlitir.xtra.co.nz) (Ping timeout: 121 seconds)
[10:25:41] *** Tuba is now known as Tobba
[10:26:10] *** Quits: Tobba (Tobba@moz-65g.7ki.21.217.IP) (Quit: Leaving)
[10:26:13] *** Joins: Tobba (Tobba@moz-65g.7ki.21.217.IP)
[10:26:19] *** Quits: Tobba (Tobba@moz-65g.7ki.21.217.IP) (Connection closed)
[10:26:24] *** Joins: Tuba (Tobba@moz-65g.7ki.21.217.IP)
[10:26:46] *** Tuba is now known as Tobba
[10:27:09] *** Joins: lenstr_ (lenstr@moz-njm.vju.25.171.IP)
[10:29:28] *** Quits: dmac (dmac@moz-2ig65r.ca.comcast.net) (Connection closed)
[10:29:40] *** Quits: lenstr (lenstr@moz-2e1.vju.25.171.IP) (Ping timeout: 121 seconds)
[10:31:46] *** Joins: SHC (quassel@moz-s31.cgn.88.59.IP)
[10:43:12] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[10:43:29] *** Joins: Torun (Torun@moz-iq0ndd.dip0.t-ipconnect.de)
[10:47:43] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[10:54:52] *** Joins: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se)
[11:00:42] *** Joins: jhasse (jhasse@moz-ff0nvq.dip0.t-ipconnect.de)
[11:03:27] *** Quits: gonzaloserrano (Adium@moz-1nv.3t7.97.62.IP) (Quit: Leaving.)
[11:04:50] *** Quits: filsmick (filsmick@moz-ekfnpo.abo.wanadoo.fr) (Quit: )
[11:05:19] *** Quits: Kingsquee (kingsley@moz-qq7ns6.bchsia.telus.net) (Quit: Konversation terminated!)
[11:20:40] *** Quits: SHC (quassel@moz-s31.cgn.88.59.IP) (Connection closed)
[11:24:39] *** nical|lunch is now known as nical
[11:24:59] *** Joins: SHC (quassel@moz-6je.qld.88.59.IP)
[11:34:20] *** Joins: ytain (ytain@moz-ge9fgi.dsl.teksavvy.com)
[11:36:27] *** Joins: Tuba (Tobba@moz-6oh.7ki.21.217.IP)
[11:37:21] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[11:38:55] *** Joins: Tobba_ (Tobba@moz-65g.7ki.21.217.IP)
[11:39:25] *** Quits: Tobba (Tobba@moz-65g.7ki.21.217.IP) (Ping timeout: 121 seconds)
[11:41:51] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[11:41:55] *** Quits: Tuba (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[11:42:35] *** Joins: filsmick (filsmick@moz-ekfnpo.abo.wanadoo.fr)
[11:44:45] *** Quits: filsmick (filsmick@moz-ekfnpo.abo.wanadoo.fr) (Quit: )
[11:59:01] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[11:59:02] *** Quits: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se) (Quit: bajs)
[11:59:46] *** Joins: Tobba (Tobba@moz-65g.7ki.21.217.IP)
[12:00:48] <sillesta> haha, nice catch tomaka
[12:03:21] *** Quits: Tobba_ (Tobba@moz-65g.7ki.21.217.IP) (Ping timeout: 121 seconds)
[12:12:42] *** Joins: gonzaloserrano (Adium@moz-1nv.3t7.97.62.IP)
[12:12:50] *** kimundi is now known as zz_kimundi
[12:22:50] *** Joins: Wild_Cat (Max@moz-na0tak.dsl.teksavvy.com)
[12:31:21] *** Quits: Tobba (Tobba@moz-65g.7ki.21.217.IP) (Ping timeout: 121 seconds)
[12:35:16] *** Joins: Tobba (Tobba@moz-65g.7ki.21.217.IP)
[12:35:22] *** Quits: Wild_Cat (Max@moz-na0tak.dsl.teksavvy.com) (Connection closed)
[12:36:59] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[12:38:04] *** Joins: twipeD (wipeD@moz-6uj1lm.dip0.t-ipconnect.de)
[12:42:04] *** Quits: Tobba (Tobba@moz-65g.7ki.21.217.IP) (Ping timeout: 121 seconds)
[12:42:32] *** Quits: flan3002 (flan3002@moz-6vhgm3.de) (Ping timeout: 121 seconds)
[12:43:44] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[12:45:22] *** Joins: flan3002 (flan3002@moz-6vhgm3.de)
[12:47:02] *** Quits: lenstr_ (lenstr@moz-njm.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[12:47:51] *** Joins: lenstr (lenstr@moz-njm.vju.25.171.IP)
[12:50:58] *** Joins: Eonil (Eonil@moz-05i.nh3.123.58.IP)
[12:51:54] *** Quits: lenstr (lenstr@moz-njm.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[12:55:48] *** Joins: lenstr (lenstr@moz-njm.vju.25.171.IP)
[12:57:38] *** Joins: palodequeso (quassel@moz-ebjt83.hfc.comcastbusiness.net)
[12:57:38] *** Quits: lenstr (lenstr@moz-njm.vju.25.171.IP) (Connection closed)
[12:57:56] *** Joins: lenstr (lenstr@moz-njm.vju.25.171.IP)
[13:05:27] *** Joins: bdero (bran@moz-mqs.7dh.189.18.IP)
[13:10:32] *** Joins: syrobee (smuxi@moz-0o36lq.as13285.net)
[13:21:37] *** Joins: kvark (Mibbit@moz-p3c.rcb.221.216.IP)
[13:22:49] <kvark> apparently, my /r/rust_gamedev revival worked. No posts in the previous 9 days, and now we got the third one in 24 hours :)
[13:24:10] <FreeFull> :D
[13:24:56] <kvark> I actually wonder if we should just move to users.rust-lang.org
[13:25:17] <kvark> if only it existed before, I'd never even register on reddit. Did it just to participate in rust-related threads
[13:26:29] <sillesta> aren't rust-lang.org forums a bit broad? (eg. /r/rust vs. /r/rust_gamedev)
[13:28:06] <kvark> sillesta: right... game-dev.rust-lang.org?
[13:28:23] <sillesta> isn't gamedev one word?
[13:28:30] <sillesta> or, it sounds like it should be
[13:29:34] <kvark> it is established as a single word, for the sake of human lazyness. Oh those humans... robots would be able to type game-dev just fine :)
[13:30:23] <tomaka> I don't think they would allow this
[13:30:42] *** Joins: KdotPNG (KdotJPG@moz-53k1g0.ncstate.net)
[13:30:43] <tomaka> having a gamedev subdomain I mean
[13:32:02] <kvark> tomaka: would you use it if the do allow it?
[13:32:44] <tomaka> no :D
[13:32:53] <tomaka> I don't like the look of these forums
[13:32:58] <tomaka> conversations are hard to follow
[13:33:19] *** Quits: KdotJPG (KdotJPG@moz-53k1g0.ncstate.net) (Ping timeout: 121 seconds)
[13:33:26] <kvark> I like the fact that it's an open platform, and it's logged in by github
[13:33:47] <tomaka> these forums are like a fandy editor a la Atom, while all I want is vim
[13:35:35] <kvark> tomaka: I don't mind the fancyness of Atom, my only concern is the performance/responsiveness due to the Node.JS usage.
[13:39:03] <sillesta> maybe it could be a category? http://users.rust-lang.org/categories
[13:42:24] <sillesta> tomaka: what is libcaca? ascii graphics?
[13:43:03] <kvark> sillesta: category sounds just right
[13:43:21] <kvark> even though, I don't understand why "Internals" is not a category then
[13:43:57] <kvark> cmr: do you have the access? Could you create a GameDev category?
[13:45:33] <nical> sillesta: libcaca takes images and turns them into ascii art (there's a vlc plugin if you fancy watching starwars or whatnot in ascii art)
[13:46:10] <sillesta> neat!
[13:46:41] <kvark> tomaka: next step - rewrite libcaca in Rust :D
[13:46:44] <tomaka> sillesta: basically glutin can now run in the terminal if libcaca is installed
[13:46:58] <nical> haha
[13:47:13] <tomaka> if libcaca and osmesa are installed
[13:47:56] <tomaka> libcaca doesn't do opengl, so glutin uses osmesa and then copies data from osmesa to libcaca when you call swap_buffers
[13:55:34] <tomaka> actually I wonder how hard it would be to rewrite libcaca's dithering algorithm
[13:55:40] * tomaka doesn't know anything about this
[13:56:07] *** Joins: alex-abreu (alex@moz-j54ho8.biz.rr.com)
[13:56:24] *** Quits: alex-abreu (alex@moz-j54ho8.biz.rr.com) (Quit: Leaving)
[13:56:53] *** Joins: alex-abreu (alex@moz-j54ho8.biz.rr.com)
[13:59:15] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[13:59:33] *** Joins: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com)
[13:59:39] *** Quits: jhasse (jhasse@moz-ff0nvq.dip0.t-ipconnect.de) (Quit: Leaving)
[14:03:18] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Ping timeout: 121 seconds)
[14:05:35] *** Joins: Gamecubic (cubic@moz-qfrl13.mc.videotron.ca)
[14:06:19] *** Quits: m104ru (m104ru@moz-j4k.8g6.153.93.IP) (Ping timeout: 121 seconds)
[14:06:27] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Connection closed)
[14:06:44] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[14:07:04] *** Joins: saml (saml@moz-0pt9vd.cst.lightpath.net)
[14:07:23] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (Quit: Leaving)
[14:08:05] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[14:08:57] <kvark> Is there any way to get this compiling without unsafe code? http://is.gd/VCX9qK
[14:10:45] <tomaka> http://is.gd/198Nkk :huh:
[14:11:12] <kvark> tomaka: right, but I want to re-use the allocated space
[14:11:25] <nical> kvark: I use this https://github.com/nical/vodk.rs/blob/master/geom/src/mem.rs#L26
[14:11:46] <nical> although it uses unsafe code as well internally
[14:11:47] <kvark> nical: this is brute
[14:12:52] <kvark> nical: I don't need to erase the type, since lifetimes don't affect any storage - they are just meta compiler hints
[14:13:11] <kvark> so I want to re-use the storage with a different lifetime parameter
[14:13:28] <kvark> which should be safe as long as I clear it, but there seem to be no way to communicate that to the borrow checker
[14:14:02] <nical> not that I know of
[14:15:18] <kvark> ok, this is what ended up with - http://is.gd/vDXX3N
[14:16:06] *** Joins: Paradiddle (Trevor@moz-en19tq.wireless.rit.edu)
[14:16:43] <nical> looks good
[14:17:29] *** Quits: Feyn (Feyn@moz-e06.k93.115.42.IP) (Quit: Leaving)
[14:18:10] <sillesta> what does transmute do?
[14:18:29] <kvark> fortunately, the other way works without unsafe - http://is.gd/3wkGsY
[14:19:05] *** Quits: tomaka (Pierre@moz-m1l3v0.abo.wanadoo.fr) (Connection closed)
[14:19:08] <nical> I wrote VecStorage because i needed to allocate a temporary Vec in a function and the vec's lifetime was restritced to the ody of the function. But the function itself is called a lot so I wanted to keep around the alloc. In my case I can't go from Foo<'a> to Foo<'b> so I had to go from Vec<&'T> to VecStorage with no lifetime constraint
[14:19:18] <kvark> sillesta: "Unsafely transforms a value of one type into a value of another type"
[14:19:35] <sillesta> aren't they the same type in this case?
[14:19:40] <sillesta> or does it transform lifetimes as well
[14:19:41] <nical> it's c++ reinterpret_cast pretty much
[14:19:56] <kvark> the lifetimes are different, so from the compilers point of view it's a different type
[14:20:27] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[14:21:20] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[14:21:36] <nical> a tad more violent than reinterpret_cast, since the later can't change constness
[14:22:00] <nical> (violent is probably a poor choice of word)
[14:22:15] <nical> latter*
[14:22:29] <nical> man I can't speak English these days
[14:22:41] <kvark> nical: where are you now with the experiments in vodk.rs? anything you could share?
[14:23:30] *** Joins: tomaka (Pierre@moz-m1l3v0.abo.wanadoo.fr)
[14:24:16] *** Joins: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se)
[14:27:45] <nical> kvark: unfortunately I haven't done much spare-time coding lately. Right now I can render convex 2d polygons with holes, but I don't support bezier curves yet
[14:28:12] <nical> although adding cubic bezier curves is not a lot of work to add
[14:28:16] <kvark> nical: what is the goal?
[14:28:44] <nical> I'd like to experiment with rendering arbitrary 2d content on the gpu
[14:29:02] <nical> right now firefox only does that through Direct2D
[14:29:56] <nical> I am pretty sure we can put the cpu to better use if we render everything from the gpu
[14:30:21] <kvark> I wonder if this could be added to piston/graphics
[14:30:21] <nical> and avoid the crap ton of bandwith wasted on uploading textures every time something is painted
[14:30:37] <nical> It certainly could
[14:31:25] <mtsr> kvark: I did a little work on the fibers thing, want to take a look? Two things that need dealing with, sort of related: How to resume parents after children are done? (Probably AtomicUsize like ND does, I guess) And how to notify whoever launched a Task that the Task (and it's children) are done? (Possibly the same thing, except maybe we allow Tasks to spawn more Tasks that aren't actually children?) Anyway, it's here github.com/mtsr/tasks
[14:31:42] <nical> right now I have mostly 2 functions: one that take a polygon and splits it into y-monotone polygons, and one that take the result of that and outputs and index buffer
[14:32:21] *** Joins: Guest74 (textual@moz-il1.n6s.204.65.IP)
[14:32:22] <kvark> mtsr: awesome, looking now!
[14:32:37] <nical> It'll be much more useful when I add support for bezier curves though
[14:32:41] <kvark> nical: y-monotone? never heard this term
[14:33:02] <mtsr> kvark: I used Coroutine as fiber, ScopedPool as basic threadpool.
[14:33:42] <mtsr> kvark: It's WIP so there's some FIXMEs in there
[14:34:46] <nical> kvark: this will explain y-monotone much better than I would: https://en.wikipedia.org/wiki/Monotone_polygon the idea is that it is rather easy to triangulate an y-monotone polygon, and it's rather easy to generate y-montone polygons from an arbitrary polygon (easier than getting convex polygons out of an arbitrary polygon)
[14:35:07] *** Quits: Paradiddle (Trevor@moz-en19tq.wireless.rit.edu) (Ping timeout: 121 seconds)
[14:35:41] <nical> the code that does all that is here: https://github.com/nical/vodk.rs/blob/master/geom/src/monotone.rs
[14:35:41] <kvark> nical: gotcha, thanks for the link
[14:37:14] <kvark> mtsr: would you recommend coroutine? I was actually considering it (https://github.com/kvark/fibe-rs/issues/4)
[14:38:14] <nical> the main difficulty with rust_graphics will probably be that there is an up-front cost for generating the triangulation, so you really want to cache it if you are going to draw the same path again. And rust_graphics's philosophy seems to be against keeping states around (but I may be mistaken I don't know much about rust_graphics)
[14:38:21] <mtsr> kvark: It's OK. Easy way to have the ND style fiber (saves registers and stack), but they're not good for pooling AFAICT, although they do pool their own stack allocations already (albeit as threadlocal)
[14:39:40] <kvark> mtsr: I think it would be nice to merge what you got with fibe-rs in some way
[14:39:44] <mtsr> kvark: I'm trying to stick close to what ND described for now, even though I really kinda like a queue per thread and stealing
[14:40:01] <mtsr> kvark: Sounds great
[14:40:42] <kvark> means we'd get real fibers + dependencies + lightning fast pulses to sync things around
[14:40:55] <kvark> that'd get us almost at the destination
[14:40:56] <mtsr> Although I think that pulse is more for many-threaded, where this is more strictly multi-threaded (ie, no actually blocking threads, except the one that launches the pool)
[14:41:48] <kvark> I wonder about this line actually https://github.com/mtsr/tasks/blob/master/src/main.rs#L65
[14:42:08] <kvark> aren't you supposed to match the state after resuming? What if a task wants to suspend again?
[14:42:36] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[14:43:38] <kvark> mtsr: do you mean you don't need to sync between threads? Only within each thread?
[14:44:13] <mtsr> I think anything on the main queue should be ready to run. There probably needs to be a waiting queue too, with just parent tasks that get resumed on the thread that has completed the last child task.
[14:44:59] <mtsr> kvark: Well, as it is, it's mostly suited for parent-child related tasks and unrelated tasks.
[14:45:32] <kvark> where ND's child tasks limited to use the same thread?
[14:45:36] <kvark> *were
[14:46:56] <mtsr> The threads here share a queue. But when waiting for another task to finish you actually yield the thread to another task (coroutine.sched()) and wait for something to resume the task (coroutine.resume())
[14:48:21] <mtsr> Hrmm I need to put my thoughts together to explain it better I think
[14:48:27] *** Joins: dpc__ (dpc@moz-t6gr4b.ca.comcast.net)
[14:48:39] <mtsr> Give me a minute to explain how this works and how I think it differs
[14:48:52] <kvark> mtsr: is all the dependency stuff implicit in your case? Like a task itself knows if it needs to wait for something, hence it yields until the dependency is fulfilled?
[14:49:19] <mtsr> Well, the dependency are internal to the tasks, yes
[14:49:23] <mtsr> *dependencies
[14:49:37] <kvark> so for this, pulses are great, but they will be up to the user to consider
[14:49:38] <mtsr> That's how I understood the ND slides, anyway
[14:50:09] <kvark> what concerns me a bit is that a task will generally wait longer for the dependencies than required
[14:50:34] <kvark> so even if it's high priority, it will have to wait for the lower-prio something to yield at some point
[14:51:44] <mtsr> So my problem with Pulse is that it actually blocks, instead of yielding. In my tasks a task yields while waiting. Also the last remaining dependency immediately resumes the dependent task (still working on that, but it will work, using AtomicUsize, similar to ND)
[14:51:47] <kvark> that's what explicit dependencies (currently in fibe-rs) are doing better, I think, at the cost of scheduler complexity
[14:52:11] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Ping timeout: 121 seconds)
[14:52:28] <kvark> mtsr: oh, so the waiting task will be resumed immediately?
[14:52:50] <kvark> pulse is actually just using an atomic counter. I believe it should be able to use it without blocking.
[14:52:52] *** Joins: Paradiddle (Trevor@moz-9dv.o0a.21.129.IP)
[14:53:06] <mtsr> Yeah, that's the idea. Since the fibers are independent from threads, whatever thread was working on the last dependency should resume the dependent task immediately.
[14:53:36] <kvark> Ah, I see. It's beautiful, in a way
[14:54:07] <mtsr> ahh, so if we could get pulse to yield, that would work. It's close to what I need for the parent/child thing
[14:54:32] <mtsr> let me see if I can finish that bit first and then let's see if we can use pulse for it
[14:55:17] * kvark is summoning csherratt
[14:55:52] <mtsr> Ok, yeah, pulse would definitely work for the main thread to wake when scheduled tasks are finished
[14:55:55] *** Quits: nical (nical@moz-jp38c1.lmuk.1rfi.0450.2001.IP) (Ping timeout: 121 seconds)
[14:56:03] <mtsr> since the main thread should block anyway
[14:56:17] <mtsr> But I'll finish the parent/child bit first
[14:58:09] <kvark> One thing is not entirely clear. A thread finishes a task, it needs to check if this was the last dependency for something. So 1) how does it check? Just sending a pulse will not give any answer 2) what does it do if multiple dependent tasks are now ready? 3) how does it steal a suspended task from another thread?
[15:00:35] *** Joins: nical (sid299@moz-kqqhp6.0j4i.jtu0.0101.2620.IP)
[15:02:01] <mtsr> kvark: 1) The dependency checking will probably be just an Atomic, decrement it, if it's zero, resume that task. 2) In the current design there's only parent/child dependencies, meaning there shouldn't be multiple dependent tasks. 3) Good question. It probably needs to take it from a shared list of waiting tasks.
[15:02:45] <mtsr> So I want to finish the simple design and then start thinking about more complicated dependencies than parent/child. But maybe you will come up with something in the meantime :)
[15:03:06] <kvark> mtsr: it seems limited, actually
[15:03:30] <kvark> mtsr: like, a rendering task depends on culling task and skinning task
[15:03:31] *** Joins: Gamecubic__ (cubic@moz-bglmk5.mc.videotron.ca)
[15:03:37] <mtsr> kvark: It is, but I wonder if it's not enough to express most usecases
[15:03:40] <kvark> but these don't quite seem to be children
[15:04:03] <mtsr> Well in this case you would launch the rendering task, that launches the tasks it depends on.
[15:04:32] <kvark> I need to look at this Destiny diagram again
[15:04:38] <mtsr> So there's room to launch unrelated tasks as well, if I can figure out how their progress is tracked
[15:06:17] <mtsr> The parent child relation is a requirement right now because I haven't yet figured out how the main thread is notified of all tasks being done otherwise
[15:06:27] <mtsr> But maybe there's a solution to that as well
[15:06:55] <kvark> mtsr: about the main thread... you think it's fine to block it?
[15:06:56] <mtsr> Something like an Atomic that's incremented when an unrelated task is launched, to track it and it's children
[15:07:06] *** Quits: Gamecubic (cubic@moz-qfrl13.mc.videotron.ca) (Ping timeout: 121 seconds)
[15:07:29] <mtsr> kvark: It's easier not to block it, but I want it to be possible to block it until all tasks have finished
[15:08:06] <mtsr> The current implementation it just blocks at the end of the function because of the ScopedThreads, but other than that it should be fine to continue doing stuff
[15:08:15] <kvark> mtsr: in fibe-rs I decided to create a separate thread for scheduling all the tasks/threads, so that the main thread keeps unblocked
[15:08:42] <mtsr> The main thread doesn't really do anything after launching the threads, but yeah, we could put it into a thread too
[15:08:46] <kvark> but really, with the philosophy of "everything is a task", there should be no work for the main thread to do :)
[15:08:54] <mtsr> launching the threads and the tasks I mean
[15:09:00] <mtsr> exactly, which is why I wanted it to block
[15:09:00] <mtsr> heh
[15:09:16] <mtsr> I guess a frame could be a task, or something like that
[15:09:49] <kvark> right, with a bunch of sub-tasks
[15:09:51] <mtsr> and it keeps a couple of frames in the queue at a time
[15:10:09] <kvark> man I'd love to integrate it into Claymore
[15:10:24] <mtsr> I guess priorities should then be two things: oldest frame first and within that actual priorities such as low/medium/high
[15:11:21] <kvark> I wonder if lifting the "oldest frame" priority will be sufficient still
[15:11:51] <kvark> ah, here comes the limitation!
[15:12:07] <kvark> the swap_buffers call for the next frame should have the swap_buffers of the previous frame as a dependency
[15:12:21] <kvark> which is not compatible with parent/child as is
[15:12:55] <mtsr> ah, interesting
[15:13:02] <mtsr> well, that could be the main thread
[15:13:05] <kvark> btw, one thing just stroke me
[15:13:22] <kvark> ECS systems are NOT generalized to tasks in a work queue
[15:13:23] <mtsr> so the main thread could wait on pulses from specific tasks to schedule new tasks
[15:13:42] <kvark> because ECS systems are permanent, while tasks are created and destroyed
[15:14:16] <mtsr> I never wanted ECS systems to just be running on a thread, though, I feel like a system update should be a task, spawning child tasks
[15:14:35] <mtsr> but yeah, figuring out how to build an ECS on top of this is another step
[15:14:42] <mtsr> but I feel like this is the right approach
[15:14:52] <mtsr> figure out a working multi-threading strategy first
[15:14:59] <mtsr> and then build the right data one on top
[15:15:12] <kvark> I'm just thinking about swap_buffers task still... it needs to own a window. Perhaps, it can just hold a Arc<RefCell> of it
[15:15:32] *** Quits: Paradiddle (Trevor@moz-9dv.o0a.21.129.IP) (Quit: Leaving)
[15:15:35] <mtsr> I think when we get to it we'll probably want things like thread-specific queues and stealing to maximize cache coherency (if all tasks just go into one queue, that would lead to lots of misses)
[15:16:16] <mtsr> kvark: I kinda see swap_buffers just sitting on the main thread and a pulse being send from the last task before it.
[15:16:32] <kvark> does it have to be stealing though? if something has already started on another thread, we've already payed the cache miss price. Would it make sense to steal it?
[15:17:12] <mtsr> kvark: Well, thread starvation is more costly still, I think.
[15:17:28] <kvark> mtsr: "so the main thread could wait on pulses from specific tasks to schedule new tasks" hmm... I wonder how this can be generalized
[15:17:44] <mtsr> Besides, if we can for example steal not a single task but say half a queue, there's a good chance that those are all tasks that share cache too
[15:17:47] <kvark> mtsr: right
[15:18:23] <mtsr> But this is all pretty speculative, I guess this kind of stuff only really becomes clear when benchmarking actual code :P
[15:20:20] <kvark> mtsr: so swap_buffers can be triggered by a pulse, but what about the actual execution of command buffers? They've got to be serialized
[15:21:29] <kvark> if a main thread owns the device (read: GPU execution queue), then it would need to have a channel accepting command buffers. Also, it will need to make sure they come in the frame order somehow...
[15:22:09] <kvark> for ECS, I'd actually expect there be a rendering system, which owns the GPU execution queue
[15:22:25] <kvark> which works nice since ECS systems are permanent, again
[15:24:49] <mtsr> Hrmm interesting complications. I guess we could pass in some data-structure or channel into a frame task that is used to build the command queue?
[15:25:27] <mtsr> Or the main thread schedules anything but the actual rendering task?
[15:25:40] <mtsr> I wonder how ND does it, since from their slides, this approach seems to be what they're doing.
[15:26:07] <kvark> yeah, maybe a closer look at their timeline shots will reveal something
[15:27:40] <mtsr> Need to spend some time with my family, be back later
[15:27:55] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[15:33:51] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[15:36:04] *** Joins: O01eg (o01eg@moz-vo3hvq.pku3.4n8f.2698.2a02.IP)
[15:37:50] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[15:39:09] *** Joins: Guest44 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[15:43:55] *** Quits: Eonil (Eonil@moz-05i.nh3.123.58.IP) (Quit: Leaving)
[15:45:12] *** Joins: Eonil (Eonil@moz-05i.nh3.123.58.IP)
[15:45:15] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[15:50:12] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[15:55:24] *** Joins: nil (nil@moz-153mse.p5sj.b1d9.0003.2601.IP)
[15:58:03] *** Quits: Guest44 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[15:58:29] *** Joins: niconii (nicole@moz-5e9nqt.frgo.qwest.net)
[16:06:27] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[16:13:45] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[16:14:34] *** Quits: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[16:15:14] *** Joins: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com)
[16:21:21] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Connection closed)
[16:23:46] *** Joins: stjahns (stjahns@moz-jaqi3k.uws.ualberta.ca)
[16:24:22] *** Quits: mindtree (Mitch@moz-rkogvk.iprimus.net.au) (Ping timeout: 121 seconds)
[16:24:26] *** Quits: Eonil (Eonil@moz-05i.nh3.123.58.IP) (Quit: This computer has gone to sleep)
[16:24:29] *** Quits: dpc__ (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[16:25:24] *** Quits: SHC (quassel@moz-6je.qld.88.59.IP) (Ping timeout: 121 seconds)
[16:25:36] <nical> do you guys have any idea what could change the current framebuffer binding outside of glBindFramebuffer?
[16:25:41] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[16:26:10] *** Joins: SHC (quassel@moz-6je.qld.88.59.IP)
[16:26:27] *** Joins: mindtree (Mitch@moz-n5ja80.iprimus.net.au)
[16:27:12] <kvark> nical: window context switch
[16:28:34] <nical> kvark: ah good one. Not the one I am running into but need to keep in mind
[16:32:06] *** Joins: dpc__ (dpc@moz-t6gr4b.ca.comcast.net)
[16:38:48] *** Joins: Gabriel_7 (Gabriel@moz-gdpin6.mtgr.92aj.0e35.2a01.IP)
[16:39:16] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[16:45:26] <kmcguire_> okay i copied the example \glium\examples\triangle.rs and it gives "type `glutin::window::Windowbuilder<'_>` does not implement any method in scope named `build_glium`" - what am i forgetting?
[16:47:22] <kvark> include the DisplayBuild trait?
[16:47:28] <kvark> https://github.com/tomaka/glium/blob/04c6bef9377f3b1650eb2df67a577b7d03af6acb/src/backend/glutin_backend.rs#L234
[16:47:30] <kmcguire_> "use glium::DisplayBuild;"
[16:47:39] <kmcguire_> its the example
[16:47:44] <kmcguire_> i didnt change anything :p
[16:47:50] <tomaka> kmcguire_: you're probably using glutin from github and glium from crates.io
[16:48:04] <tomaka> or just glutin from github, the source of glium doesn't matter
[16:48:07] <kmcguire_> [dependencies.glium] git = "https://github.com/tomaka/glium"
[16:48:16] <tomaka> and glutin?
[16:48:19] <kmcguire_> [dependencies.glutin] git = "https://github.com/tomaka/glutin"
[16:48:25] <tomaka> yeah, that's wrong
[16:48:36] <kmcguire_> ok excellent!!
[16:48:39] <kmcguire_> :))))
[16:48:45] <tomaka> replace that with `[dependencies.glutin] version = "0"`
[16:48:56] <tomaka> or just `[dependencies] glutin = "0"`
[16:48:59] *** Joins: filsmick (filsmick@moz-ekfnpo.abo.wanadoo.fr)
[16:49:13] <kmcguire_> so whats that doing exactly.. i mean whats the actual problem
[16:49:34] <kmcguire_> it compiled!
[16:49:37] <tomaka> cargo can't know that glutin from crates.io and glutin from github are compatible with each other
[16:49:43] <tomaka> so it just compiles it twice
[16:50:09] <tomaka> in your code, "glutin" means "glutin from github"
[16:50:16] <tomaka> and in glium's code, "glutin" means "glutin from crates.io"
[16:50:34] *** Quits: filsmick (filsmick@moz-ekfnpo.abo.wanadoo.fr) (Connection closed)
[16:50:51] <tomaka> I think I'm going to put a "pub use glutin;" inside glium and change all the tutorials to use "glium::glutin" or something similar
[16:50:56] *** Joins: filsmick (filsmick@moz-ekfnpo.abo.wanadoo.fr)
[16:51:03] <tomaka> that would also remove the necessity to add a dependency to glutin from inside your code
[16:52:04] <kmcguire_> ok i think i understand
[16:52:33] <kmcguire_> i am new to the impl This for that::in::another::crate
[16:52:49] <kmcguire_> thank you so much tomaka !
[16:53:03] *** Quits: filsmick (filsmick@moz-ekfnpo.abo.wanadoo.fr) (Connection closed)
[16:53:04] *** Joins: filsmick (filsmick@moz-ekfnpo.abo.wanadoo.fr)
[16:53:09] <kmcguire_> i wonder if people run into that problem and just give up and never use your crate sometimes
[16:53:39] <tomaka> well, nowhere in my docs I refer to the github version
[16:53:48] <tomaka> it's like it doesn't exist
[16:54:02] <kmcguire_> yeah i guess i deviated since i started from glutin
[16:54:28] <kmcguire_> i grabbed glutin, then i said oh crap, i need gluim, then i tried to use glium
[16:55:12] *** Joins: Guest44 (textual@moz-to0.eos.163.209.IP)
[16:55:26] *** Quits: palodequeso (quassel@moz-ebjt83.hfc.comcastbusiness.net) (A TLS packet with unexpected length was received.)
[16:56:18] *** Quits: dpc__ (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[16:58:57] *** Joins: Rym (y@moz-cfe.mso.205.31.IP)
[17:02:48] *** Joins: brson (brson@moz-dgk.73s.245.63.IP)
[17:04:26] <bvssvni> kvark: ping
[17:04:54] <kvark> bvssvni: pong
[17:05:53] <bvssvni> kvark: I want to talk about some stuff about Gfx
[17:05:56] *** Joins: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP)
[17:06:04] <kvark> bvssvni: fire up
[17:06:26] <bvssvni> kvark: have you thought something about Graphics?
[17:06:49] <kvark> bvssvni: not really, haven't touched this part in a while
[17:07:13] <bvssvni> kvark: I was wondering now that you prefer Stream, maybe it needs revisiting
[17:08:08] <kvark> bvssvni: surely. Mind if we just drop it? :)
[17:08:20] <bvssvni> kvark: hmm
[17:08:42] <bvssvni> kvark: can you explain me the motivation behind Stream?
[17:09:25] <bvssvni> kvark: I know it is keeping Renderer and Output together, but what effect has it besides making generic code better?
[17:10:09] <kvark> bvssvni: well, the motivation is clear - simplify the user code, since 99% of cases Renderer and Output stick together
[17:10:35] *** Joins: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net)
[17:10:39] <bvssvni> kvark: doesn’t that prevent you from changing the Renderer?
[17:10:48] <kvark> not at all, it's completely transparent
[17:11:07] <kvark> the contained renderer is accessible in `OwnedStream`
[17:11:54] <bvssvni> kvark: right, I forget that Stream is a trait
[17:12:39] <kvark> I liked how smoothly it got in - no one even noticed, because it is implemented for Canvas, and the trait is included in gfx:: traits
[17:13:11] <bvssvni> kvark: I think the reason nobody notice is that nobody can wrap their head around it
[17:13:50] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[17:14:02] <bvssvni> kvark: at least is the feeling I get when see all the traits and structs
[17:14:15] <kvark> bvssvni: it is very simple, it hides the command buffer type, renderer, and the output from you.
[17:14:41] *** zz_kimundi is now known as kimundi
[17:14:53] *** Quits: Gabriel_7 (Gabriel@moz-gdpin6.mtgr.92aj.0e35.2a01.IP) (Ping timeout: 121 seconds)
[17:14:59] <bvssvni> kvark: it is simple to you, because you wrote it!
[17:15:14] <kvark> bvssvni: I do understand the cost of adding new types, but this one allows others to NOT care about more stuff than it introduces
[17:15:33] <kvark> so with Stream, you only care about batches and streams - thats it
[17:16:00] <bvssvni> kvark: why not bake Output into Renderer?
[17:16:25] <kvark> because we support rendering to different outputs in a single command buffer
[17:16:33] <kvark> think about mipmap generation, for example
[17:17:07] <bvssvni> kvark: right
[17:17:22] <kvark> also, the own/reference question would be unclear. Stream allows both.
[17:17:47] <bvssvni> kvark: what is the difference between those?
[17:18:27] <kvark> if you want to own an Output, then there is a conflict with the window (like, Piston also wants to own it)
[17:18:44] <kvark> if you reference it, then you might get a bunch of lifetime problems
[17:19:48] <bvssvni> kvark: Rc can’t move to another thread, right?
[17:19:53] <kvark> right
[17:20:21] <bvssvni> kvark: so if we wanted to reduce it to a single struct, we would need Arc<Mutex>
[17:20:40] <kvark> which already looks scary
[17:22:23] <kvark> renderer is the lowest command buffer construction level we provide, it needs to support everything. Stream doesn't have to be that generic, but it's damn easy to use for most cases
[17:24:32] <bvssvni> kvark: every time I can’t figure out stuff with Gfx you have a perfectly reasonable answer for it
[17:24:36] *** Quits: mindtree (Mitch@moz-n5ja80.iprimus.net.au) (Ping timeout: 121 seconds)
[17:24:47] <bvssvni> kvark: :P
[17:24:54] *** Joins: mindtree (Mitch@moz-e9kolh.iprimus.net.au)
[17:25:04] <kvark> bvssvni: well, I hope we are on the same page now, are we?
[17:26:54] <bvssvni> kvark: have you considered other designs that fits better with Rust’s lowlevelness?
[17:26:56] <kvark> (I updated gfx_scene/gfx_pipeline/claymore code to use Stream, and it's a blessing. Looks like Stream is staying for a long term, unlike Graphics/Canvas, which are uncertain)
[17:27:27] <bvssvni> kvark: I really hope so :)
[17:27:33] <kvark> bvssvni: other designs for what exactly? Stream alternative?
[17:30:27] <bvssvni> kvark: it seems the general approach is wrapping stuff in traits and add structs that implement the trait
[17:30:46] <bvssvni> kvark: what about making Stream inherit Renderer and Output?
[17:31:54] <kvark> not going to work. 1) Renderer is not a trait (at least yet, and no plans for it), 2) the rendering needs &mut Renderer and &Output, so Stream implementation would not be possible to pass &mut self and &self there
[17:32:15] <bvssvni> kvark: I meant CommandBuffer + Output
[17:32:52] *** Quits: gonzaloserrano (Adium@moz-1nv.3t7.97.62.IP) (Quit: Leaving.)
[17:33:09] <bvssvni> kvark: ah
[17:34:39] <bvssvni> kvark: it seems to be a lot of inference to do to figure out why A is a trait, why there are structs B and C etc.
[17:34:40] *** Joins: dmac (dmac@moz-4kcd1c.ca.comcast.net)
[17:36:21] <bvssvni> kvark: perhaps we could come up with a signifier to help?
[17:36:52] *** Quits: SHC (quassel@moz-6je.qld.88.59.IP) (Connection closed)
[17:36:56] <bvssvni> kvark: a “signifier” is a concept from a talk by Don Norman about living with complexity
[17:37:49] <bvssvni> he uses an example with doors and key holes that people don't get up on the first try
[17:38:26] <bvssvni> so he puts up a sticker telling what to do
[17:38:35] *** Quits: alex-abreu (alex@moz-j54ho8.biz.rr.com) (Ping timeout: 121 seconds)
[17:39:13] <bvssvni> https://github.com/PistonDevelopers/piston/issues/628
[17:39:34] *** Quits: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP) (Client exited)
[17:40:18] *** Joins: debu (debu@moz-jgq30m.dyn.telefonica.de)
[17:44:58] *** Quits: filsmick (filsmick@moz-ekfnpo.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[17:46:33] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[17:49:56] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[17:52:00] <kvark> bvssvni: sorry, I'm back
[17:52:22] <kvark> where was this Love video?
[17:53:20] <bvssvni> kvark: I have something here https://github.com/PistonDevelopers/piston/issues/553
[17:53:36] <kvark> thanks, found it
[17:53:40] *** Joins: avikpal (avikpal@moz-7e5.2rc.232.117.IP)
[17:54:52] <kvark> was just talking to an artist, he was complaining about 3d tools and I figured Love toolset would make him eternally happy :)
[17:55:55] <kvark> bvssvni: I'll watch "Living With Complexity" to understand if a signifier has any use for us
[17:56:07] *** Joins: sargas (sargas@moz-863roc.hfc.comcastbusiness.net)
[18:02:33] *** Joins: Gabriel_7 (Gabriel@moz-gdpin6.mtgr.92aj.0e35.2a01.IP)
[18:05:00] *** Joins: davebettin (davebettin@moz-rnhkmd.bendcable.com)
[18:05:20] <ytain> link for love toolset?
[18:05:32] <ytain> the google search is inconclusive
[18:05:41] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[18:05:42] <kvark> https://www.youtube.com/watch?v=DPIA2g8T6Hw
[18:06:02] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[18:06:34] *** Quits: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net) (Quit: WeeChat 1.1.1)
[18:06:51] <ytain> thanks
[18:06:58] <kvark> I want to know what secret this guy has. Maybe it's a thousand monkeys in his basement? Maybe it's a mind link to extra-terrestial civilization?
[18:07:26] *** Joins: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net)
[18:08:57] <sillesta> i'd bet on time traveler
[18:09:04] *** Joins: alex-abreu (alex@moz-j54ho8.biz.rr.com)
[18:16:28] <bvssvni> he writes in C
[18:18:41] <bvssvni> kvark: would it be an idea to rename Stream to Canvas?
[18:19:12] <kvark> bvssvni: lol, I actually considered it, but it would cause confusion
[18:19:38] <kvark> you just don't like the stream name, I understand
[18:19:52] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[18:19:59] <bvssvni> kvark: the name “Stream” is like one of those doors you don’t know to push or pull
[18:20:22] <bvssvni> kvark: it doesn’t tell what it is for
[18:20:39] <kvark> think - command stream, or render stream
[18:21:09] <kvark> you pass batches into one end, and then connect it to the device on the other at some point
[18:21:55] *** Quits: alex-abreu (alex@moz-j54ho8.biz.rr.com) (Ping timeout: 121 seconds)
[18:22:12] <bvssvni> kvark: I like the name “Canvas”, because that what you paint on
[18:22:32] <kvark> right
[18:22:46] <kvark> we can't replace Canvas with Stream for as long as the old canvas is useful
[18:22:56] *** Quits: Gabriel_7 (Gabriel@moz-gdpin6.mtgr.92aj.0e35.2a01.IP) (Connection closed)
[18:23:07] <bvssvni> kvark: do you need the old Canvas?
[18:23:11] <kvark> maybe after the fences are done, we'll be able to remove the old Canvas, and then...
[18:23:35] <kvark> bvssvni: yeah, it's (successfully) used in the examples and claymore
[18:24:48] *** Joins: dpc__ (dpc@moz-t6gr4b.ca.comcast.net)
[18:25:27] <bvssvni> kvark: I hope those fences work
[18:26:21] <bvssvni> kvark: can I ask you something about Output?
[18:26:53] <kvark> bvssvni: are you blocked by Stream or fences at the moment? I'm not planning to work on them up until late May at least
[18:27:17] <kvark> bvssvni: AMA
[18:27:26] <bvssvni> kvark: no, the thing I’m blocked on is stencil buffer
[18:27:43] <kvark> bvssvni: ok, that thing I should be able to look tonight into
[18:28:06] <kvark> if you have it by hand, maybe you can paas me an apitrace dump
[18:28:36] <bvssvni> kvark: what does Output::get_stencil do?
[18:29:04] <bvssvni> kvark: you said it should return None, and that the back-end queries get_mask instead
[18:29:23] <kvark> returns a user-made stencil plane, if any
[18:29:46] <bvssvni> kvark: like a custom stencil buffer?
[18:29:50] <kvark> the main frame has implicit planes, since you can't mix and match them with user planes
[18:30:21] <kvark> yes, if you have an off-screen render target with a stencil frame, it will return Some(...)
[18:30:24] <kvark> otherwise, it's None
[18:31:13] <kvark> get_stencil is really of next to no use for the user
[18:31:21] <kvark> it's harmless though, so there is no need to hide it
[18:31:38] <kvark> it is exposed for the Renderer implementation, mainly
[18:31:50] <bvssvni> kvark: it’s confusing!
[18:32:23] <kvark> I dunno. Why do you need get_stencil?
[18:32:26] <bvssvni> kvark: maybe more docs would help
[18:32:37] <kvark> we could certainly document it better
[18:32:45] <sillesta> maybe hire steve :p
[18:33:03] <bvssvni> kvark: I can’t tell you why I would need it, if I don’t know what it does in the first place
[18:33:13] *** Quits: davebettin (davebettin@moz-rnhkmd.bendcable.com) (Ping timeout: 121 seconds)
[18:33:39] <kvark> sillesta: I'd hire bjz, if I had extra cash
[18:33:53] <sillesta> the cat?
[18:34:07] <kvark> yep, he used to be good at documenting things
[18:34:17] <kvark> (among other talents, of course)
[18:34:57] <bvssvni> kvark: thanks for the explanation
[18:35:17] <bvssvni> kvark: I’ll do the apitrace thing
[18:35:17] <kvark> bvssvni: glad we sorted it out :)
[18:35:23] <kvark> thanks!
[18:37:14] *** Joins: chc4 (chc4@moz-pdo0at.ma.comcast.net)
[18:39:59] <sillesta> tomaka: what were the additional structure changes you had in mind?
[18:41:20] <tomaka> sillesta: they are done :o
[18:41:26] <sillesta> o :p
[18:41:34] <tomaka> just splitting win32 needs to be done
[18:41:54] *** Quits: stjahns (stjahns@moz-jaqi3k.uws.ualberta.ca) (Connection closed)
[18:42:21] <bvssvni> tomaka: Glutin is no longer beeping on my osx :)
[18:42:43] <sillesta> i think it could get messy with joystick/gamepad stuff, since they can't really be put in src/api/
[18:42:57] <tomaka> I wasn't even aware before last week that glutin was beeping
[18:43:02] <tomaka> that must have been annoying as hell
[18:43:13] <sillesta> heh i got confused at first
[18:43:23] <sillesta> "what? where!?"
[18:45:48] <sillesta> i think src/<feature>/<platform> is cleaner imo
[18:46:08] <sillesta> eg. src/joystick/osx/
[18:46:40] *** Joins: Gabriel_7 (Gabriel@moz-follu5.mtgr.92aj.0e35.2a01.IP)
[18:47:32] *** Joins: Rym (y@moz-cfe.mso.205.31.IP)
[18:47:33] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[18:49:14] *** Joins: gonzaloserrano (Adium@moz-0os.6hf.231.77.IP)
[18:52:00] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[18:55:37] <Guest44> Uh implementing ECS in Rust is kicking my ass :(( I don't know the language good enough, and I constantly feel like I'm doing something wrong, or doing it the wrong way
[18:56:08] <Guest44> I've had minuscule progress over the course of 10 days...  this can't be right :(
[18:56:12] <kvark> Guest44: it ain't easy
[18:56:52] <Guest44> kvark :(
[18:57:01] <Guest44> I wish I had more brain horsepower
[18:57:11] *** Quits: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[18:57:13] *** Quits: Thorn (Thorn@moz-gfo.20c.107.217.IP) (Quit: Quit)
[18:57:18] <kvark> are you not satisfied with existing implementation? or just looking to get your hands dirty?
[18:57:28] <kvark> *implementations
[18:57:42] <Guest44> kvark well I'm using piston, and I don't think piston comes with an ECS implementation
[18:57:49] *** Joins: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com)
[18:57:50] <Guest44> the existing ones I'm not satisfied with because I don't understand them
[18:57:53] <Dabo> after working with rust for a while it does get easier to program alongside the borrow checker rather than against it
[18:57:57] <Guest44> I don't understand them because I don't know Rust good enough
[18:58:16] <kvark> piston doesn't say it can't work with ECS, it just doesn't have anything to do with it (yet?)
[18:58:41] <Guest44> yeah
[18:59:19] <Guest44> perhaps I'm just doing everything wrong. Perhaps trying to learn a language by implementing a game, and perhaps implementing a game by overengineering it, and perhaps overengineering it while coding everything myself is a dysfunctional idea
[18:59:20] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[18:59:21] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[18:59:49] <kvark> unless you have superpowers
[18:59:54] <mtsr> Guest44: Take a look at mine, even if not to your liking (likely) it is quite easy, since it doesn't use macros, etc. It may need updating to beta, though. Alternatively, you may want to look into one that does use macros, since that supposedly makes serialisation easier, but they tend to be less readable. Mine is at github.com/mtsr/entityx-ecs-rs.
[19:00:25] <mtsr> Guest44: Note that mine isn't exactly finished though. There's definitely some difficult parts
[19:00:29] <kvark> mtsr: what a shameless ad!
[19:00:32] <mtsr> haha
[19:00:41] <mtsr> Sorry, don't mean to say you should use it, though
[19:00:45] <mtsr> actually you shouldn't
[19:00:54] <mtsr> but it might be interesting to read since it's fairly simple
[19:01:09] <Guest44> kvark I'm afraid not only I have no superpowers, I'm probably below the intelligence possessed by the average earthling!
[19:01:33] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[19:01:37] <kvark> Guest44: it's easy to get this feeling while lurking Rust forums, really, I often get this too ;)
[19:01:42] <niconii> Guest44: it just takes time to learn these things
[19:02:01] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[19:02:49] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[19:04:07] *** Quits: gonzaloserrano (Adium@moz-0os.6hf.231.77.IP) (Quit: Leaving.)
[19:04:41] <kvark> mtsr: your ECS is pretty neat. There is quite some code (comparing to <unnamed> macro-based implementation), but the overall design is rather sound
[19:04:43] <ytain> better start with simpler things to get familiarized with the language
[19:05:28] <mtsr> kvark: Yes, some minor issues with serialisation (untested) and I hadn't settled on the best interface for mutation yet, but I kinda liked the closures as changesets in some ways anyway.
[19:05:33] <Guest44> ytain like what?
[19:05:45] *** Quits: mindtree (Mitch@moz-e9kolh.iprimus.net.au) (Ping timeout: 121 seconds)
[19:05:45] <ytain> data and algorithms
[19:10:55] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[19:10:57] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[19:11:32] <mtsr> Guest44: You're already writing and compiling Rust, I highly doubt your lack of intelligence. It's not an easy language to get started with, took me a couple of weeks to get comfortable with some of the changes in thinking forced upon you by ownership and borrowing too. And after spending a bit of time with it, I'm still not quite comfortable.
[19:16:45] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[19:17:15] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[19:17:55] *** Joins: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net)
[19:18:10] *** Quits: lenstr (lenstr@moz-njm.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[19:18:42] <kvark> bvssvni: thanks for the apitrace, I'm done analyzing it
[19:18:54] <bvssvni> kvark: trying Glutin now
[19:20:12] <ytain> in learning new programming languages you need to know how to deal with data and how to implement algorithms so that you get familiar with the language and use of it from an algorithmic perspective
[19:20:16] <bvssvni> sometimes Cargo hangs on “Updating registry `https://github.com/rust-lang/crates.io-index`”
[19:21:03] <ytain> that's why there are many books that contain "Data and algorithms" in their title for c/c++, java, javascript, python etc
[19:21:45] <kvark> bvssvni: I thought it's just because of the internet connection issues
[19:22:37] <bvssvni> kvark: IT WORKS!
[19:22:51] <kvark> haha, gooood
[19:22:57] <kvark> don't forget to clear the stencil though
[19:23:14] <bvssvni> already fixed that
[19:23:16] <kvark> we could easily patch sdl2_window too
[19:23:29] <bvssvni> I'm so happy now
[19:23:42] <kvark> glad you are not blocked any more
[19:24:03] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[19:24:45] *** Quits: dmac (dmac@moz-4kcd1c.ca.comcast.net) (Ping timeout: 121 seconds)
[19:24:58] <bvssvni> kvark: perhaps graphics::clear should set the stencil buffer to 0 in piston-graphics
[19:25:47] <kvark> bvssvni: not the worst idea, yeah. Check how Stream::clear looks btw
[19:30:45] <bvssvni> outside_draw_state works too
[19:32:59] <kvark> hooray
[19:34:15] <sillesta> siggraph papers if anyone's interested: http://kesen.realtimerendering.com/sig2015.html
[19:35:11] *** Joins: p1start (p1start@moz-nftjhe.org)
[19:36:00] <kvark> Pico sounds interesting
[19:36:16] <kvark> sorry, Piko
[19:36:17] *** Joins: dmac (dmac@moz-4kcd1c.ca.comcast.net)
[19:43:34] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[19:43:35] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[19:44:06] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[19:44:07] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[19:45:04] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[19:45:19] <cmr> sillesta: thanks!
[19:45:28] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[19:48:17] *** Joins: Rym (y@moz-cfe.mso.205.31.IP)
[19:49:12] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[19:49:34] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[19:52:46] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[20:00:17] *** Quits: dpc__ (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[20:00:19] *** Quits: bdero (bran@moz-mqs.7dh.189.18.IP) (Ping timeout: 121 seconds)
[20:03:37] *** Joins: davebettin (davebettin@moz-acc.cl4.35.72.IP)
[20:08:23] *** Quits: brson (brson@moz-dgk.73s.245.63.IP) (Ping timeout: 121 seconds)
[20:10:37] *** Joins: genbattle (genbattle@moz-4v0.gkd.16.182.IP)
[20:13:33] *** Joins: fyl2xp1 (fyl2xp1@moz-gcui46.netcologne.de)
[20:13:36] *** Joins: Codenator (Mibbit@moz-d18.qnr.198.81.IP)
[20:13:42] *** Parts: Codenator (Mibbit@moz-d18.qnr.198.81.IP) ()
[20:16:17] *** Joins: acharles (acharles@moz-ulbdcn.ca.comcast.net)
[20:21:15] *** Quits: twipeD (wipeD@moz-6uj1lm.dip0.t-ipconnect.de) (Connection closed)
[20:22:58] *** Quits: untitaker_ (untitaker@moz-d47ul3.highway.telekom.at) (Ping timeout: 121 seconds)
[20:23:12] *** Quits: syrobee (smuxi@moz-0o36lq.as13285.net) (Connection closed)
[20:25:21] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[20:25:59] *** Joins: untitaker (untitaker@moz-v5462d.highway.telekom.at)
[20:26:23] *** Joins: James (quassel@moz-9kp9p2.range86-148.btcentralplus.com)
[20:29:55] *** bvssvni is now known as bvssvni_
[20:33:06] *** Quits: Torun (Torun@moz-iq0ndd.dip0.t-ipconnect.de) (Quit: Leaving)
[20:34:18] *** Quits: Guest44 (textual@moz-to0.eos.163.209.IP) (Connection closed)
[20:35:25] *** Quits: James (quassel@moz-9kp9p2.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[20:37:38] *** Quits: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net) (Quit: WeeChat 1.1.1)
[20:41:38] *** Quits: avikpal (avikpal@moz-7e5.2rc.232.117.IP) (Ping timeout: 121 seconds)
[20:49:04] *** Joins: Rym (y@moz-cfe.mso.205.31.IP)
[20:49:44] *** Joins: avikpal (avikpal@moz-bbs.dv5.232.117.IP)
[20:51:31] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[20:53:30] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[20:55:57] <kmcguire_> hey once i add a value to the UniformStorage in order to pass it to Surface::draw, how do I easily manipulate that value - i only see `visit_values`, or can I pass something to draw besides a UniformStorage?
[20:56:55] *** kimundi is now known as zz_kimundi
[20:57:21] *** Quits: avikpal (avikpal@moz-bbs.dv5.232.117.IP) (Connection closed)
[20:57:24] <kmcguire_> ok i see in an example where the UniformStorage is just re-created for each rendering
[20:58:01] <XMPPwocky> kmcguire_: iirc it's cached internall
[20:58:51] <kmcguire_> thanks xmppwocky that helps a little
[20:58:58] *** Quits: genbattle (genbattle@moz-4v0.gkd.16.182.IP) (Connection closed)
[20:59:24] *** Joins: Layl (Layl@moz-65hqmf.direct-adsl.nl)
[21:03:14] *** Quits: aepsil0n (eduard@moz-8h7njb.hsi8.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[21:08:38] *** Quits: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[21:08:55] *** Joins: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com)
[21:09:21] <tomaka> Yeah this struct is only here to be passed to draw()
[21:09:34] <tomaka> it's not an object object or anything
[21:09:48] <tomaka> an opengl object*
[21:11:55] <sillesta> bvssvni_: with this https://github.com/tomaka/glutin/issues/260 do you mean to have horizontal scrolling as well?
[21:12:34] <bvssvni_> sillesta: yes
[21:13:24] *** Quits: akawaka (akawaka@moz-0bb8q8.irvnca.sbcglobal.net) (Ping timeout: 121 seconds)
[21:14:11] *** Quits: Gabriel_7 (Gabriel@moz-follu5.mtgr.92aj.0e35.2a01.IP) (Ping timeout: 121 seconds)
[21:14:27] *** Joins: akawaka (akawaka@moz-0bb8q8.irvnca.sbcglobal.net)
[21:14:44] *** Quits: debu (debu@moz-jgq30m.dyn.telefonica.de) (Ping timeout: 121 seconds)
[21:17:48] <Layl> this is quite curious, I've got a bug report that seems to say GLSL 1.20 isn't supported on this person's system
[21:17:52] <Layl> probably just lacking drivers
[21:18:45] <tomaka> core OpenGL only supports GLSL 1.40+
[21:18:50] <Layl> kvark, is there a nicer way to check for minimum GL requirements in gfx than to let the shader panic?
[21:19:29] <Layl> hm, so basically I'm best off just going for GLSL 1.40 to get the best range of supported devices?
[21:19:46] <tomaka> yeah
[21:20:13] <tomaka> if you provide GLSL 1.40, 1.10 and 1.00, you target everything that exists
[21:20:50] <Layl> would be literally the same file right now
[21:20:55] <Layl> just with a different #version
[21:21:29] <tomaka> well, 1.40 doesn't have gl_FragColor, and the "attribute" and "varying" keywords
[21:21:46] <tomaka> and "texture2D()" is replaced by "texture()"
[21:21:57] <Layl> you can add the gl_FragColor by just adding an out line for it though right?
[21:22:14] <Layl> eeeh would be nicer to just have separate code
[21:22:16] <tomaka> version 1.00 also requires you to add a precision in front of each type: "lowp float x = 0.0;"
[21:22:26] <Layl> don't want to go make an entire preprocessor language for GLSL right now
[21:23:34] *** Quits: davebettin (davebettin@moz-acc.cl4.35.72.IP) (Ping timeout: 121 seconds)
[21:26:50] *** Parts: fyl2xp1 (fyl2xp1@moz-gcui46.netcologne.de) ()
[21:27:20] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:29:27] *** Parts: axedcode (axion@moz-hp7lt7.members.linode.com) ("WeeChat 1.0")
[21:30:49] *** Joins: guycook (quassel@moz-ircp2q.snap.net.nz)
[21:32:06] *** Quits: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com) (Ping timeout: 121 seconds)
[21:33:49] *** zz_kimundi is now known as kimundi
[21:34:58] *** Joins: Kingsquee (kingsley@moz-qq7ns6.bchsia.telus.net)
[21:38:28] *** Quits: nil (nil@moz-153mse.p5sj.b1d9.0003.2601.IP) (Quit: Leaving)
[21:44:58] *** Joins: Rym (y@moz-cfe.mso.205.31.IP)
[21:49:54] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[21:51:04] *** Joins: Gabriel_7 (Gabriel@moz-follu5.mtgr.92aj.0e35.2a01.IP)
[21:53:17] <kvark> Layl: Device:: get_capabilities().shader_model
[21:53:32] <Layl> alright, thanks
[21:53:51] <kvark> Layl: if you call FactoryExt:: link_program_source, it will choose the shader version that is supported, given you provide multiple versions
[21:54:00] <kvark> Layl: our cube example does that, have a look
[21:54:04] <Layl> also, quick question, is there a PNG decoder for gfx_texture?
[21:54:25] <kvark> https://github.com/gfx-rs/gfx_examples/blob/master/src/cube/main.rs#L119-L132
[21:54:35] <kvark> gfx_texture is using piston/image, which supports PNG quite well
[21:55:02] <Layl> I'm getting an error that it doesn't have a decoder for png
[21:55:12] <kvark> huh
[21:55:27] <kvark> bvssvni: ^
[21:55:38] <Layl> doing the obligatory cargo update right now
[21:55:47] <kvark> how does the error look exactly?
[21:56:31] <Layl> http://i.imgur.com/n22Txsr.png
[21:56:41] *** Quits: jwilm (jwilm@moz-1rin99.hfc.comcastbusiness.net) (Connection closed)
[21:56:44] <Layl> whoops accidentally captured the mouse pointer as well
[21:56:44] *** Joins: kazimuth (james@moz-h7l.35b.189.18.IP)
[21:57:16] <kvark> https://github.com/PistonDevelopers/image/blob/4031c3cc678f22a3b5c4c7ccd79f8304c3f82cb5/src/dynimage.rs#L584
[21:57:30] <kvark> I think it just doesn't like the caps, try '.png' instead of '.PNG'
[21:57:45] <Layl> I am using ".png"
[21:57:48] <kvark> no wait
[21:57:50] <kvark> I'm wrong
[21:58:31] <kvark> looks like your piston/image is compiled without "png" feature
[21:58:51] <Layl> huh
[21:58:53] <kvark> https://github.com/PistonDevelopers/gfx_texture/blob/master/Cargo.toml#L32
[21:58:59] *** Joins: jwilm (jwilm@moz-1rin99.hfc.comcastbusiness.net)
[21:58:59] <kvark> dunno why it's there like that
[21:59:48] <Layl> so, nothing I can fix right now without forking?
[22:00:22] *** Joins: davebettin (davebettin@moz-acc.cl4.35.72.IP)
[22:00:24] <kvark> you can use piston/image yourself, and pass an image to gfx_texture
[22:01:15] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[22:01:32] <sillesta> lol https://github.com/PistonDevelopers/gfx_texture/commit/3a3dd28a9821e80534f52852d0b4a77199e7bf91
[22:01:33] <Layl> that's a bit of an irritating roundabout way to do it
[22:01:39] <kvark> https://github.com/PistonDevelopers/gfx_texture/issues/56
[22:02:01] <kvark> perhaps, I can just revert it from here
[22:02:13] <sillesta> maybe disable some specific features instead?
[22:02:21] <sillesta> webp for example
[22:02:40] <Layl> interesting way to reduce compile time
[22:02:44] <Layl> not compiling anything
[22:02:48] *** Joins: kmcguire (kmcguire@moz-c955nf.res.rr.com)
[22:02:53] <Layl> downside is, you can't do anything if nothing's compiled
[22:03:02] <sillesta> https://github.com/PistonDevelopers/image/pull/330
[22:03:07] <kvark> you can still pass images there (opposed to the paths)
[22:04:25] <Layl> I'll just wait a bit for this to be resolved before continuing on this code
[22:04:26] <kvark> Layl: merged, please cargo update and try again
[22:04:56] <Layl> building now
[22:05:16] *** Quits: erz (erz@moz-n2p94l.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:05:29] <Layl> noticably takes much longer to compile, yea, but it's only on a fresh build that it has to recompile so it doesn't matter that much
[22:06:02] <Layl> yep that works
[22:06:02] *** Quits: Gabriel_7 (Gabriel@moz-follu5.mtgr.92aj.0e35.2a01.IP) (Connection closed)
[22:07:40] *** Joins: bdero (bran@moz-216hqv.oo5r.e4su.0006.2601.IP)
[22:09:35] <sillesta> apple documentation is impossible to navigate..
[22:09:45] <cmr> I agree.
[22:09:48] <cmr> Seriously among the worst.
[22:11:09] <Layl> btw, kvark, got an example on how to use the new Stream?
[22:13:29] <Layl> also, I don't know if you've tried to push a new version yet, but the docs at http://rust-ci.org/gfx-rs/gfx-rs are still very out of date
[22:13:42] <Layl> no mention of Canvas or Output anywhere
[22:13:57] <cmr> I think rust-ci is almost completely broken at this point :(
[22:15:31] <Layl> no update to the rust-ci repo since 2014
[22:15:40] <Layl> seems it's safe to declare it as dead
[22:15:59] <Layl> since that's a century in rust time
[22:19:17] <kvark> Layl: sorry, back now
[22:20:40] <kvark> Layl: here is one example https://github.com/kvark/gfx_scene/blob/master/src/phase/phase.rs#L264
[22:22:05] <sillesta> goodnight
[22:26:19] <Layl> hm, kvark, how can I get a stream from a canvas?
[22:28:08] *** Quits: sillesta (sillesta@moz-501od2.business.telia.com) (Ping timeout: 121 seconds)
[22:28:23] <kvark> Layl: Stream is implemented for Canvas
[22:28:42] <Layl> ah I see so I can just directly pass it by reference
[22:28:51] <kvark> yeah, mutable reference
[22:30:59] <Layl> one of these days I hope to actually be able to make a game with my engine :P
[22:32:22] <kvark> Layl: sure thing. Perhaps, consider looking at claymore stuff.
[22:32:27] <kvark> also, gtg now
[22:32:31] *** Quits: kvark (Mibbit@moz-p3c.rcb.221.216.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:34:03] *** Joins: alex-abreu (alex@moz-j54ho8.biz.rr.com)
[22:39:32] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[22:40:02] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[22:40:03] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[22:41:10] <Layl> does conrod regenerate mesh data every frame it renders?
[22:42:01] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[22:42:26] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[22:44:19] <cmr> Layl: yes. 
[22:44:21] *** Joins: lenstr (lenstr@moz-njm.vju.25.171.IP)
[22:45:33] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[22:45:34] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[22:45:42] <Layl> then that will be an acceptable thing to do for phosphorus as well
[22:45:59] <cmr> I wouldn't go that far...
[22:46:12] <cmr> I think rust-graphics (which conrod uses) is the wrong way to go about it.
[22:46:48] <Layl> for me right now it's not really about performance
[22:47:00] <Layl> but about acceptable performance within the given time for implementation
[22:47:04] *** Quits: Guest74 (textual@moz-il1.n6s.204.65.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:48:33] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Quit: )
[22:49:16] <Layl> also I'm not using piston's 2D graphics library, but gfx instead
[22:49:28] <Layl> so I've got a tad more flexibility in things like re-using vertex buffers
[22:51:18] *** Quits: SneakySnake (nya@moz-i9is4u.pool.telekom.hu) (Connection closed)
[22:51:25] *** Joins: kalail (uid62296@moz-5ck9vu.charlton.irccloud.com)
[22:56:14] *** Quits: lenstr (lenstr@moz-njm.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[23:01:57] *** Joins: Wild_Cat (Max@moz-ijo.rq2.175.184.IP)
[23:06:44] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[23:11:19] *** Quits: alex-abreu (alex@moz-j54ho8.biz.rr.com) (Ping timeout: 121 seconds)
[23:18:28] *** Joins: warmwaffles (warmwaffles@moz-6gpnl1.res.rr.com)
[23:19:05] <warmwaffles> running in to issues with ld not finding freetype-6 on mingw in windows. I don't understand why
[23:19:18] <warmwaffles> ld -lfreetype works fine
[23:26:44] *** Quits: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net) (Client exited)
[23:29:53] *** Joins: erz (erz@moz-n2p94l.broadband.corbina.ru)
[23:33:06] *** Quits: KdotPNG (KdotJPG@moz-53k1g0.ncstate.net) (Ping timeout: 121 seconds)
[23:34:08] *** Quits: edlothiol (user@moz-chhfor.hsi02.unitymediagroup.de) (Ping timeout: 121 seconds)
[23:36:16] <kmcguire> im building a transformation like:   vec4(position2d, 0.0, 1.0) * Ortho * Iso3::look_at, im trying to get the look at to work for the `at` part but it seems no matter what `at` is it has no effect.. i must consult with the 3d experts :))
[23:36:39] <kmcguire> i really dont know what im doing.. but im trying to do it
[23:37:28] *** Quits: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se) (Quit: bajs)
[23:41:08] <kmcguire> wait.. iso :p
[23:41:11] <kmcguire> crap
[23:41:35] * kmcguire goes in search for a look at function for something other than iso
[23:42:23] *** Quits: erz (erz@moz-n2p94l.broadband.corbina.ru) (Connection closed)
[23:42:41] *** Joins: erz (erz@moz-n2p94l.broadband.corbina.ru)
[23:42:53] <ytain> https://github.com/SergeyMakeev/TaskScheduler   someone did experiments with multithreading/task scheduling aka naughty dog presentation paper
[23:45:50] *** Joins: kvark (Mibbit@moz-8egann.cpe.pppoe.ca)
[23:50:19] <Layl> I would give a lot for proper task-based threading in rust
[23:50:41] *** Joins: orangeshark (erik@moz-ljlpbn.44tj.56ot.0306.2602.IP)
[23:52:13] <kvark> Layl: several people are working on it, including me, csherratt, and mtsr
[23:55:07] <Layl> I should probably learn what a fiber is now that I've heard about it so many times
[23:55:09] *** Joins: dmac_ (dmac@moz-4kcd1c.ca.comcast.net)
[23:55:14] *** Quits: dmac (dmac@moz-4kcd1c.ca.comcast.net) (Ping timeout: 121 seconds)
[23:55:35] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[23:55:46] <kmcguire> i wouldnt mind user level scheduling even if I/O blocked it, i could implement things to work around that issue
[23:56:23] <kvark> Layl: worry not, it's just a buzzword for a lightweight resumable logical "thread"
[23:56:26] <kmcguire> i could spawn my own I/O thread(s) 
[23:56:42] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[23:56:45] *** Joins: lenstr (lenstr@moz-njm.vju.25.171.IP)
[23:56:47] <ytain> well ogre3d 2.1 engine has some examples that tries to use multithreading model
[23:57:21] *** Quits: bdero (bran@moz-216hqv.oo5r.e4su.0006.2601.IP) (Ping timeout: 121 seconds)
[23:57:23] *** Quits: lenstr (lenstr@moz-njm.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[23:57:31] <ytain> with the rendering core locked at 60fps and the physics core locked at 15fps or 30fps
[23:57:35] *** Joins: lenstr (lenstr@moz-njm.vju.25.171.IP)
[23:58:10] <Layl> the thing I've been experimenting with is have 2 loops running, one "world state" loop and one "render" loop
[23:58:29] <Layl> then any other threads get created through tasks exclusively
[23:58:29] *** Quits: lenstr (lenstr@moz-njm.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[23:58:58] <Layl> in my C# codebase, the world state and render loops were created as a long-term task, and if the engine had to close they were passed a cancelation token
