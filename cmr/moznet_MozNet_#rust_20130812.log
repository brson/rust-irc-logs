[00:00:49] *** Quits: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Client exited)
[00:02:10] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[00:06:06] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[00:09:00] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[00:09:16] *** Joins: reyre (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[00:12:10] *** Quits: lkuper (lkuper@63686BC7.F689A8C9.EB438161.IP) (Quit: lkuper)
[00:20:04] *** Quits: threecreepio (jdp@moz-43FB9668.cust.bredbandsbolaget.se) (Quit: threecreepio)
[00:20:12] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[00:20:13] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/MKG8Rw
[00:20:13] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[00:23:04] <brson> jack: how did icfp go?
[00:23:11] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[00:23:11] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/FGomCQ
[00:23:11] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[00:23:12] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[00:23:13] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/XDSTWw
[00:23:13] <ghrust> 13rust/06auto 1494b0b0e 15Alex Crichton: Forbid pub/priv where it has no effect...
[00:23:13] <ghrust> 13rust/06auto 142cfe86b 15bors: auto merge of #8423 : alexcrichton/rust/less-priv-again, r=bstrie...
[00:23:13] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[00:23:42] *** Quits: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com) (Quit: eatkinson)
[00:24:52] *** Joins: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com)
[00:25:34] <panzi> is there a way to stop a task?
[00:26:14] <panzi> by stop I mean kill
[00:26:16] *** Quits: true_droid (true_droid@moz-123FD9B8.beck.volia.net) (Client exited)
[00:28:22] <doomlord_> 'crate metadata'  does the job of a header file, right ? .. stuff to inline, equivalent info of fn prototypes ... struct fields and types - i'm, guessing it doesn't have source span information, but does it have enough to pretty-print something useful from a ast::def_id for an out-of-crate def
[00:28:39] <doomlord_> (just browsing through metadata/csearch etc...)
[00:30:01] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[00:31:00] *** Quits: pcwalton (pcwalton@E2F7352.56080C53.97BBD552.IP) (Quit: pcwalton)
[00:32:12] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[00:32:12] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 142cfe86b to 14b285f1e: 02http://git.io/N3iJvQ
[00:32:12] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[00:32:14] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[00:32:14] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/sbt-MQ
[00:32:14] <ghrust> 13rust/06auto 1498dc7b1 15Graydon Hoare: Try to fix mac valgrind bot by disabling thread-heavy activities.
[00:32:14] <ghrust> 13rust/06auto 14e3a5959 15bors: auto merge of #8424 : graydon/rust/mac-valgrind-thread-fixes, r=brson...
[00:32:15] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[00:35:37] *** Quits: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com) (Quit: eatkinson)
[00:35:53] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Ping timeout)
[00:35:54] <Luqman> r? https://github.com/mozilla/rust/pull/8410
[00:38:11] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[00:38:11] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14e3a5959 to 14b285f1e: 02http://git.io/N3iJvQ
[00:38:11] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[00:38:11] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[00:38:12] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/CAuTQg
[00:38:12] <ghrust> 13rust/06auto 14b473ce3 15Brian Anderson: rustc: Obey RUST_MIN_STACK env var...
[00:38:12] <ghrust> 13rust/06auto 140679436 15bors: auto merge of #8427 : brson/rust/rustc-stack, r=thestinger...
[00:38:12] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[00:41:13] *** Joins: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com)
[00:41:59] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[00:43:10] *** Quits: brendan (brendaneic@538BABFE.A073F3E.97BBD552.IP) (Quit: brendan)
[00:46:34] *** Quits: fyolnish (fyolnish@moz-1E2C1F00.uqwimax.jp) (Client exited)
[00:47:19] <brson> how do i make the indentation 4 spaces in the new emacs rust mode?
[00:48:27] *** Quits: reyre (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Client exited)
[00:49:01] <brson> ugh
[00:49:26] *** Joins: reyre (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[00:50:03] <brson> why is it not 4 by default?
[00:50:29] *** Quits: richard|s (mindginati@moz-9C555AF3.spmconsultants.co.nz) (Quit: zzZZZ)
[00:52:00] *** Quits: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com) (Quit: eatkinson)
[00:54:46] <brson> putting (setq default-tab-width) in .emacs seems to be the way
[00:55:30] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[00:57:57] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[00:58:40] *** Quits: victorporof (victorporo@D209AA7D.2203F6DA.D111398B.IP) (Quit: victorporof)
[00:58:54] <panzi> unsafe pointers don't fulfill Send? is there a way to share unsafe pointers of immutable things across tasks?
[00:59:26] *** Joins: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com)
[00:59:43] <strcat> afaik unsafe pointers are Send
[01:00:00] <panzi> ok, then something else in my type is not Send
[01:00:15] <panzi> "cannot capture variable of type `&[*Expr]`, which does not fulfill `Send`, in a bounded closure"
[01:00:31] <strcat> slices and borrowed pointers aren't Send
[01:00:40] <panzi> I see
[01:00:48] <strcat> the safe way to share immutable data would be an arc
[01:01:07] <panzi> I tried with an arc, it said the same
[01:01:23] <strcat> well you can't put a slice in one
[01:01:27] <strcat> I mean instead of *Expr
[01:01:34] *** Joins: mindginative (mindginati@moz-C1729134.dsl.clear.net.nz)
[01:01:41] <panzi> arc: instantiating a type parameter with an incompatible type `&[*Expr]`, which does not fulfill `Send`
[01:02:01] *** mindginative is now known as richard|s
[01:02:39] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[01:02:43] <strcat> the slice isn't Send
[01:02:46] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[01:02:47] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[01:03:04] *** Joins: samx (sami@moz-48EC0983.dyn.optonline.net)
[01:03:16] <panzi> I tried to use Arc<Expr> instead of *Expr, but that lead to extremely complicated code and I just gave up. I know that these things are immutable and aren't destroyed before the tasks end
[01:04:05] <panzi> because Expr itself has *Expr fields (or then Arc<Expr>) and it was all very cumbersome
[01:05:20] *** richard|s is now known as mindginative
[01:05:26] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten)
[01:07:36] *** Quits: samx (sami@moz-48EC0983.dyn.optonline.net) (Quit: This computer has gone to sleep)
[01:12:29] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Quit: Leaving)
[01:15:37] *** Quits: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu) (Input/output error)
[01:17:58] *** Joins: z0w0 (zack@moz-E12708D5.lns6.woo.bigpond.net.au)
[01:24:35] *** Quits: vk_ (chatzilla@moz-389FEE13.hsd1.ca.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 24.0/20130806170643])
[01:29:19] *** Joins: jensnockert (jensnocker@moz-C691D49D.mobileonline.telia.com)
[01:30:12] *** Quits: jensnockert (jensnocker@moz-C691D49D.mobileonline.telia.com) (Connection reset by peer)
[01:31:49] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[01:32:24] <panzi> is ther something like an anonymous struct? this does not work: let mut foo = { bar: 12 };
[01:32:32] *** Joins: ilyoan (ilyoan@B4104EBB.3CC170B1.1E14B209.IP)
[01:34:05] <strcat> panzi: not with named fields
[01:34:09] <strcat> there are tuples
[01:35:17] *** Joins: brendan (brendaneic@538BABFE.A073F3E.97BBD552.IP)
[01:37:03] *** Quits: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net) (Input/output error)
[01:37:29] *** Joins: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net)
[01:37:43] <panzi> I see, thanks (btw. C has this, with an awkward syntax though: struct { int a; int b; } foo = { 1, 2 };)
[01:38:15] *** Quits: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net) (Connection reset by peer)
[01:38:17] <panzi> (I think Java and C# also)
[01:38:25] *** Joins: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net)
[01:38:53] <cmr> We used to have them
[01:38:55] <cmr> records.
[01:39:12] <panzi> ah so I didn't imagine this
[01:39:31] *** Joins: rustyPipe (Mibbit@moz-5949C51B.dllstx.fios.verizon.net)
[01:39:55] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[01:41:25] <rustyPipe> Can the method to_base64 be used on any string, or do we have to convert it to a vector of bytes?
[01:41:56] <cmr> rustyPipe: you can convert it to a slice
[01:42:23] <rustyPipe> How do I do that?
[01:42:38] <cmr> rusti: printfln!("foooo".as_slice())
[01:42:41] -rusti- pastebinned 23 lines of output: http://ix.io/7dA
[01:43:06] <rustyPipe> Is fmt! gone?
[01:43:07] <cmr> rusti: println(fmt!("%?", "foooo".as_slice()))
[01:43:09] -rusti- pastebinned 17 lines of output: http://ix.io/7dB
[01:43:09] <cmr> no
[01:43:12] *** Quits: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net) (Input/output error)
[01:43:13] <panzi> rusti: printfln!(~"foooo".as_slice())
[01:43:18] -rusti- pastebinned 23 lines of output: http://ix.io/7dC
[01:43:30] <cmr> rusti: let x = ~"fooo"; printfln!(x.as_slice());
[01:43:32] -rusti- "fooo"
[01:43:32] -rusti- ()
[01:43:40] <cmr> that is a &str
[01:43:43] <cmr> rusti: let x = ~"fooo"; printfln!(x.as_bytes());
[01:43:45] -rusti- &[102, 111, 111, 111]
[01:43:45] -rusti- ()
[01:43:52] <engla> rustyPipe: to_base64 is defined for byte slices just like to_hex
[01:43:53] <cmr> rustyPipe: taking a slice is free.
[01:44:07] <rustyPipe> ok
[01:44:33] <panzi> what does as_slice() actually do?
[01:44:45] <rustyPipe> Yeah, I was wondering that
[01:45:20] <engla> it's a trait method. for slices it just returns the same slice. for ~[T], it returns &'a [T]
[01:45:25] <engla> which is a pointer into the vector
[01:45:39] <cmr> plus a length
[01:45:55] <engla> yeah, pointer + length. It covers a range of the vector
[01:46:15] <engla> as_slice makes it span the full range of the vector, and .slice(a, b) allows you to take a reference to a subrange
[01:46:32] <rustyPipe> So to use to_base64, we have to use as_slices on the string then use to_base64 with the Config parameter passed in?
[01:46:44] <cmr> http://seld.be/rustdoc/master/std/unstable/raw/struct.Slice.html
[01:46:51] <cmr> rustyPipe: as_bytes
[01:46:53] <cmr> yes
[01:47:19] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:47:41] <rustyPipe> Is this right: let x = "string".as_bytes.to_base64(Config {char_set: Standard, pad: true, line_length: None});
[01:48:01] *** Joins: tikue (tkuehn@moz-F4812C6E.hsd1.fl.comcast.net)
[01:48:21] <cmr> rustyPipe: use the STANDARD static
[01:48:31] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[01:48:39] <rustyPipe> Oh, it has to be in caps?
[01:49:00] <cmr> rusti: use extra::base64::ToBase64; use extra::base64::STANDARD; let x = ~"string"; printfln!(x.as_bytes().to_base64(STANDARD));
[01:49:02] -rusti- ~"c3RyaW5n"
[01:49:02] -rusti- ()
[01:49:53] <rustyPipe> Oh, thanks for clarifying that
[01:50:21] <rustyPipe> The compiler was yelling at me for trying to to_base64 on &static str
[01:50:57] *** Joins: pcwalton (pcwalton@E2F7352.56080C53.97BBD552.IP)
[01:50:57] *** ChanServ sets mode: +o pcwalton
[01:51:02] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[01:53:01] <rustyPipe> Why is "string" prefixed with a ~?
[01:53:14] <cmr> Makes it a ~str instead of a &'static str
[01:53:19] <cmr> ie, heap allocated.
[01:53:33] <cmr> rather than a slice into the rodata section
[01:53:41] <cmr> rusti: use extra::base64::ToBase64; use extra::base64::STANDARD; let x = "string"; printfln!(x.as_bytes().to_base64(STANDARD));
[01:53:42] -rusti- ~"c3RyaW5n"
[01:53:42] -rusti- ()
[01:55:08] <rustyPipe> Hmm. When I run the exectuable, and if I make the string a ~str, all that happens is the executable prints ~~"c3RyaW5n"
[01:59:53] *** Joins: Liothen (liothen@moz-80EF0CD7.spkn.qwest.net)
[02:01:08] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[02:01:57] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[02:02:10] *** Joins: samx (sami@moz-48EC0983.dyn.optonline.net)
[02:05:08] *** Quits: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com) (Quit: eatkinson)
[02:05:30] *** Quits: Daniel__S (Daniel_S@moz-5B58D8B7.dhcp.snlo.ca.charter.com) (Quit: Leaving)
[02:09:30] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[02:10:35] <tikue> regarding the for-else syntax, I think it makes sense in a language like python because python de-emphasizes more functional approaches with iterators
[02:10:47] <tikue> rust's iterators have enough methods that I doubt for-else would ever be the most idiomatic code to write
[02:10:56] <cmr> I don't even know what for-else means
[02:11:01] <tikue> it's very simple
[02:11:03] <cmr> I've used it exactly once in python and I can't remember where or when
[02:11:27] <tikue> it should be rewritten as ```elseifdidnotbreak:```
[02:11:48] <tikue> for instance
[02:12:05] <tikue> one may want to test a predicate against an iterator
[02:12:10] <tikue> each element in an iterator rather
[02:12:16] <tikue> and if any of them test true, then break 
[02:12:18] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[02:12:18] <tikue> and do other stuff
[02:12:30] <tikue> but if none of them test true, else do something special
[02:12:37] <cmr> if iter.any(predicate) { ... } else { ... }
[02:12:40] <tikue> in rust though, it's almost definitely better to do that, yes
[02:12:48] <tikue> which is the point i'm making
[02:12:51] <cmr> ok
[02:12:54] <cmr> yeah, makes sense
[02:13:04] <tikue> in python, any doesn't take a predicate
[02:13:06] <cmr> python's iterators don't implement fancy traits like IteratorUtil
[02:13:11] <tikue> so you'd have to do any(filter(iter))
[02:13:37] <tikue> and at that point there's a case for just doing 
[02:13:38] <engla> any is too simple compared to  for..else
[02:13:41] <tikue> for el in iter:
[02:13:45] <tikue>     if pred(el):
[02:13:47] <tikue>         break
[02:13:50] <tikue> else:
[02:13:52] <tikue>     stuff
[02:14:16] <tikue> anyway, i don't think rust needs it. rust is equally expressive with its functional iterator methods
[02:14:18] <tikue> imo
[02:14:29] <tikue> TOOWTDI etc.
[02:14:34] <cmr> I'm also wary of feature bloat
[02:15:43] *** Joins: bernard (Mibbit@moz-2DF83735.dyn.optonline.net)
[02:16:16] <tikue> having iterator methods makes it really easy to read chained iterators, as well
[02:16:33] <tikue> in python it's all functions so you have to write it backwards, which is another reason to prefer less functional approaches
[02:16:47] *** Quits: bernard (Mibbit@moz-2DF83735.dyn.optonline.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:21:43] <tikue> hm
[02:21:53] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[02:22:34] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[02:22:43] <engla> it's just syntax
[02:24:52] <tikue> it's not tho
[02:24:55] <tikue> not in python
[02:25:01] <miloshadzic> is there a better way to write for _ in range(0,4) ?
[02:25:03] <tikue> it's faster in many cases
[02:25:07] <tikue> for whatever reason
[02:25:11] <tikue> miloshadzic: yes
[02:25:27] <tikue> rusti: do 4.times { print("!"); }
[02:25:28] -rusti- !!!!()
[02:25:39] <strcat> although that's a closure, so it's not equivalent
[02:25:48] <engla> I think the range version is better
[02:26:11] <tikue> if you don't plan on breaking i think the do version is better
[02:26:23] <strcat> tikue: it won't let you do moves, or return
[02:26:41] <miloshadzic> I'm mutating a vector in the block
[02:27:17] <tikue> strcat: what kind of moves?
[02:27:39] <strcat> moving out of variables, using mutable variables, etc.
[02:27:45] <tikue> ah
[02:27:52] <tikue> yeah i suppose it's not that great : ]
[02:28:20] <tikue> for range(0, 4) { } doesn't read that well imo
[02:30:05] <miloshadzic> do 4.times {} does look better in this case, thanks everyone
[02:31:06] <tikue> strcat: i thought you can't mutate a vector in the do X.times { } block?
[02:32:01] <strcat> tikue: you can mutate it in some cases
[02:32:03] <tikue> rusti: let mut xs = ~[]; do 4.times { xs.push(4); } xs
[02:32:04] -rusti- ~[4, 4, 4, 4]
[02:32:15] <goffrie> tikue: you can since the do-block can capture variables by reference, sorta
[02:32:34] <tikue> mm
[02:32:43] <miloshadzic> if this is some undefined behaviour zone, maybe I should go with the range :)
[02:32:48] <strcat> tikue: not a good way to build a vector though ;p
[02:32:52] <tikue> haha
[02:32:58] <strcat> slow
[02:33:01] <tikue> yeah
[02:33:33] *** Quits: zz_kimundi (kimundi@moz-8EEA2413.dip0.t-ipconnect.de) (Ping timeout)
[02:33:38] <tikue> rusti: let mut xs = ::std::vec::from_element(4u, 3); xs
[02:33:38] -rusti- <anon>:5:22: 5:46 error: unresolved name `std::vec::from_element`.
[02:33:38] -rusti- <anon>:5          let mut xs = ::std::vec::from_element(4u, 3); xs
[02:33:39] -rusti-                                ^~~~~~~~~~~~~~~~~~~~~~~~
[02:33:39] -rusti- error: aborting due to previous error
[02:33:39] -rusti- application terminated with error code 101
[02:33:59] <tikue> rusti: let mut xs = ::std::vec::from_elem(4u, 3); xs
[02:34:00] -rusti- <anon>:5:17: 5:19 warning: variable does not need to be mutable [-W unused-mut (default)]
[02:34:00] -rusti- <anon>:5          let mut xs = ::std::vec::from_elem(4u, 3); xs
[02:34:00] -rusti-                           ^~
[02:34:00] -rusti- ~[3, 3, 3, 3]
[02:34:21] <strcat> rusti: ~[3, ..4]
[02:34:22] -rusti- ~[3, 3, 3, 3]
[02:34:26] <tikue> :O
[02:34:30] <tikue> did not know you could do that
[02:34:34] <miloshadzic> What i'm doing is this: I get a vector and i need to pad it with some elements. So far the fastest I've made it is by getting a mutable ref to it and then pushing elements in the for loop
[02:34:37] <strcat> from_elem is just when it's not implicitly copyable
[02:34:43] <strcat> (or a constant? not sure)
[02:34:56] <Luqman> strcat: when the repeat expression is not constant
[02:35:16] <strcat> Luqman: it doesn't use clone though, so if you had a constant with a destructor + Clone impl it wouldn't work either
[02:35:21] <strcat> I hope, at least
[02:35:39] <strcat> rusti: struct Foo; impl Drop for Foo { fn drop(&self) {} } [Foo, ..2]
[02:35:40] <Luqman> yea, so non-constant repeat expr or not-implicitly copyable
[02:35:42] -rusti- pastebinned 8 lines of output: http://ix.io/7dF
[02:36:07] <strcat> seems that it should allow non-constant to me
[02:37:09] *** Joins: zz_kimundi (kimundi@moz-FF584B9F.dip0.t-ipconnect.de)
[02:37:27] <Luqman> strcat: not in a static though
[02:37:28] *** Joins: feduser (feduser@1FCC8EE1.AAE9A62C.650F25DA.IP)
[02:37:29] *** zz_kimundi is now known as kimundi
[02:37:34] <strcat> right
[02:37:50] <strcat> but for example + works in statics, but still works with non-constants ofc
[02:38:37] <Luqman> true
[02:38:59] <tikue> it'd be nice to have slice assignment sugar
[02:39:06] <tikue> (not sure if that's the right way to put it)
[02:39:17] * strcat doesn't really want more container-specific sugar
[02:39:21] *** Quits: feduser (feduser@1FCC8EE1.AAE9A62C.650F25DA.IP) (Quit: Leaving)
[02:39:23] <strcat> unless it's generic
[02:39:39] <tikue> generic slice assignment sugar would be really nice
[02:40:15] <tikue> let mut xs = [3, 4, 5]; xs[:0] = [1, 2, 3];
[02:40:18] <tikue> for instance
[02:42:45] <miloshadzic> What i'm doing is this: I get a vector and i need to pad it with some elements. So far the fastest I've made it is by getting a mutable ref to it and then pushing elements in the for loop
[02:43:00] <miloshadzic> sorry didn't mean to post that again
[02:44:17] <tikue> i don't know any method to append to the beginning of a vector
[02:44:24] <tikue> there's push_all which does it for the back
[02:44:55] <miloshadzic> unshift afaik
[02:45:20] <tikue> miloshadzic: i meant for a vector
[02:45:25] <tikue> unshift prepends a single element
[02:45:28] <miloshadzic> ah sorry
[02:45:36] <tikue> like some kind of unshift_all
[02:46:17] <miloshadzic> but if you're doing that, can't you just go the other way and append to the end of the first vector?
[02:47:07] <tikue> sure but if it's a large vector and you're only prepending a small number of elements it wouldn't make much sense to copy the entire array
[02:49:35] <miloshadzic> sure
[02:53:18] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[02:57:54] *** Quits: mindginative (mindginati@moz-C1729134.dsl.clear.net.nz) (Quit: zzZZZ)
[02:58:43] *** Joins: mindginative (mindginati@moz-9C555AF3.spmconsultants.co.nz)
[02:59:44] *** Quits: mindginative (mindginati@moz-9C555AF3.spmconsultants.co.nz) (Quit: brb)
[03:03:28] *** Joins: mindginative (mindginati@moz-9C555AF3.spmconsultants.co.nz)
[03:05:00] *** Quits: mindginative (mindginati@moz-9C555AF3.spmconsultants.co.nz) (Quit: brb)
[03:05:30] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:05:37] *** Joins: richard|s (mindginati@moz-9C555AF3.spmconsultants.co.nz)
[03:06:13] *** Joins: tautologico (lymph@8ABDEDA.34CAB63A.7B974E06.IP)
[03:07:57] <tautologico> why rustc can't find std::char ? it's in the docs and source for libstd
[03:10:33] <engla> you can use a ringbuf that you can modify in both ends
[03:10:40] <engla> it's not that efficient I think though
[03:10:52] <engla> but more efficient than prepending to a ~[]
[03:10:57] <strcat> it's O(1) amortized at both ends
[03:11:08] <strcat> vectors are O(n) to add/remove from the start
[03:11:25] <strcat> still helps a ton for both to reserve space in advance
[03:15:17] *** Quits: samx (sami@moz-48EC0983.dyn.optonline.net) (Quit: This computer has gone to sleep)
[03:17:11] *** Joins: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net)
[03:17:12] *** ChanServ sets mode: +o dherman
[03:19:18] <tikue> strcat: how can you reserve space in advance?
[03:23:25] <strcat> tikue: .reserve
[03:23:45] <strcat> if you use iterators you generally don't have to do it yourself
[03:23:49] <strcat> they use size hints
[03:23:58] <strcat> rusti: let xs = [1, 2, 3]; xs.iter().size_hint()
[03:23:59] -rusti- (3, Some(3))
[03:24:06] <strcat> rusti: let xs = [1, 2, 3]; xs.iter().map(|&x| x * 2).size_hint()
[03:24:07] -rusti- (3, Some(3))
[03:24:10] <strcat> rusti: let xs = [1, 2, 3]; xs.iter().map(|&x| x * 2).skip(1).size_hint()
[03:24:11] -rusti- (2, Some(2))
[03:24:20] <strcat> rusti: let xs = [1, 2, 3]; xs.iter().map(|&x| x * 2).take(1).size_hint()
[03:24:21] -rusti- (1, Some(1))
[03:24:27] <strcat> and collect() uses it
[03:24:50] <engla> magic
[03:25:56] <enix> How frequently do new rust snapshots tend to land? I have a change to make use of the new CheckedAdd trait, but it doesn't really make sense to open a PR until a new snapshot is created.
[03:26:26] <strcat> enix: whenever someone feels like doing it
[03:26:32] <strcat> like say, right now ;p
[03:26:41] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[03:27:08] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[03:27:08] <ghrust> 01[13rust01] 15thestinger merged 06master into 06snap-stage3: 02http://git.io/nOP5Hg
[03:27:08] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[03:27:17] <strcat> enix: has to build and then land as a PR
[03:27:50] <enix> ah, ok, i'll just stay on the lookout for it then
[03:28:22] <enix> thanks
[03:29:33] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[03:30:21] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:30:30] <enix> Does building rustc as a cross compiler to ARM currently work? I'm doing: ./configure --target-triples=arm-linux-androideabi ...
[03:30:43] <enix> but I end up with: "fatal error: stdlib.h: No such file or directory" while building stage 2
[03:31:03] <enix> well, I guess, more accurately, cross compiler for android on ARM
[03:32:37] <doomlord> there was some guide i recall explaining how to configure it with links to the android ndk ?
[03:33:03] <doomlord> i haven'ttried it recently
[03:33:10] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[03:33:21] <enix> I thought I had it pointed at the NDK since it complained until I told it where it was
[03:33:27] <enix> hrm, i'll poke around some more
[03:33:38] <doublec> docs are here: https://github.com/mozilla/rust/wiki/Doc-building-for-android
[03:35:31] <enix> thanks!
[03:35:59] <strcat> weird it started two builds for that snapshot
[03:36:03] * strcat cancels one
[03:36:37] *** Quits: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Ping timeout)
[03:39:48] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[03:40:46] *** Quits: boredomist (user@moz-63CF9F31.res-cmts.sesp.ptd.net) (Ping timeout)
[03:42:31] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[03:42:31] *** ChanServ sets mode: +o brson
[03:44:06] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[03:46:47] *** Quits: tikue (tkuehn@moz-F4812C6E.hsd1.fl.comcast.net) (Quit: tikue)
[03:47:15] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[03:47:15] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/CAuTQg
[03:47:15] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[03:49:28] *** Joins: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[03:50:15] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[03:50:15] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/RcLGzQ
[03:50:15] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[03:50:16] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[03:50:16] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/hoINPg
[03:50:16] <ghrust> 13rust/06auto 14fcfd6e7 15Luqman Aden: rustc: Add --target-cpu flag to select a more specific processor instead of the default, 'generic'.
[03:50:16] <ghrust> 13rust/06auto 141785841 15bors: auto merge of #8410 : luqmana/rust/mcpu, r=sanxiyn...
[03:50:17] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[03:51:21] *** Quits: panzi (chatzilla@moz-2D219EAC.adsl.highway.telekom.at) (Quit: ChatZilla 0.9.90.1 [Firefox 23.0/20130807192336])
[03:52:05] <rustyPipe> I've got a question. I'm writing a function that returns a base64 string if a hex string is provided, and vice versa, but the compiler keeps saying that I have mismatched types. I don't see any mismatched types though. Here's a gist of the function: https://gist.github.com/anonymous/6208137
[03:54:42] <strcat> hm
[03:54:48] <strcat> I don't know how to force builds in the buildbot UI now
[03:54:55] <doublec> rustyPipe: lack of an else clause?
[03:55:15] <rustyPipe> Is an else clause needed?
[03:55:15] <doublec> rustyPipe: if the 'if' doesn't match then the type of the return valueis unit I expect
[03:55:23] <strcat> oh
[03:55:26] <strcat> there it is
[03:57:05] <doublec> rustyPipe: if you add something like 'else { ~"foo" }' it should compile
[03:57:17] <rustyPipe> Let me try that
[03:58:36] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[03:59:38] <rustyPipe> Okay, that worked. I didn't know that you needed an else clause when working with if's
[03:59:40] *** Quits: Earnestly (earnest@moz-55672F6A.range86-164.btcentralplus.com) (Ping timeout)
[04:00:15] <strcat> you don't always need one
[04:00:38] <strcat> if you're using it as an expression where it evaluates to a result, you need one - because there has to be a result of the right type
[04:02:06] <doublec> rustyPipe: for example, if you made the 'if' branch use "return" for the value, and added a "~foo" at the end of the function instead of an else it would still compile.
[04:02:33] <doublec> rustyPipe: basically you have two control paths, each returning a different type, in the original code
[04:02:54] *** Parts: z0w0 (zack@moz-E12708D5.lns6.woo.bigpond.net.au) ()
[04:03:02] <rustyPipe> Okay, thanks for that information.
[04:03:44] <doublec> np
[04:05:15] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[04:06:27] <rustyPipe> But I want to return a hex string if the passed string contains base64 characters, and the compiler is yelling at me. I've made a variable that converts a base64 string using the method from_base64, but the compiler is saying there is no implementation of a method to_hex for type std::result::Result<~[u8], ~str>
[04:07:09] <tedh> Luqman: will --target-cpu accept native?
[04:07:49] <rustyPipe> Here's a gist of the updated function: https://gist.github.com/anonymous/6208200
[04:08:24] <strcat> tedh: --target-cpu is mtune
[04:08:37] <strcat> --target-feature is what march does
[04:08:46] <strcat> and neither accepts native, because the logic is in libclang
[04:09:02] <tedh> ok, thanks
[04:09:23] <rustyPipe> Does to_hex not work on an owned vector of bytes, at least when from_base64 was previously called on a string (i.e. let x = "c3RyaW5n".from_base64; x.to_hex())?
[04:12:15] *** Quits: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net) (Quit: dherman)
[04:12:36] *** Quits: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[04:13:20] <rustyPipe> Does anyone know how to convert a string from base64 to hex? I've tried from_base64, but if I use the to_hex() method after calling that method, the compiler says no such method is implemented?
[04:14:52] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[04:15:04] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[04:15:18] <rustyPipe> Is anyone still chatting, or is everyone going to sleep?
[04:18:23] *** Joins: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net)
[04:18:23] *** ChanServ sets mode: +o dherman
[04:19:52] *** Quits: rustyPipe (Mibbit@moz-5949C51B.dllstx.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:23:10] *** Quits: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net) (Quit: dherman)
[04:35:02] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Connection reset by peer)
[04:36:04] *** Quits: DasIch (dasich@moz-5EDA591.de) (Ping timeout)
[04:36:45] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[04:38:33] *** Joins: alisdair (textual@moz-66A71AB3.eng.wind.ca)
[04:44:40] <pcwalton> I'm here
[04:46:26] *** Quits: alisdair (textual@moz-66A71AB3.eng.wind.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[04:49:16] *** Joins: alisdair (textual@moz-66A71AB3.eng.wind.ca)
[04:49:20] <oren> Is there a way to export macros from a module?
[04:50:31] <strcat> oren: there's #[macro_escape], but there's no way to do it cross-crate
[04:50:36] <strcat> just within a crate
[04:50:37] *** Quits: brendan (brendaneic@538BABFE.A073F3E.97BBD552.IP) (Quit: brendan)
[04:50:52] <oren> Hmmm. That's quite a restriction...
[04:51:08] <strcat> the standard macros are injected at the top of every crate as a workaround
[04:51:27] <oren> I assume that this will be fixed "eventually"...
[04:51:36] <oren> Thanks!
[04:51:52] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[04:51:52] *** Joins: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP)
[04:56:43] *** Joins: brendan (brendaneic@538BABFE.A073F3E.97BBD552.IP)
[04:57:40] *** Quits: brendan (brendaneic@538BABFE.A073F3E.97BBD552.IP) (Quit: brendan)
[04:59:07] <oren> Hmmm - Just adding `#[macro_escape];` inside a `mod` that contains macros, and then doing `use the::mod`, in the same crate, still doesn't give me the macros. Is there an additional trick to it?
[05:04:00] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:07:02] *** Joins: jaen (jaen@moz-917FCC51.play-internet.pl)
[05:07:03] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Quit: Leaving)
[05:08:53] <sfackler> rustyPipe: from_base64 returns a Result, since its possible for the conversion to fail if the string you call it on isn't actually a Base64 string. You need to pull the actual buffer out of the Result with a match or unwrap.
[05:09:09] <sfackler> e.g. foo.from_base64().unwrap().to_hex()
[05:10:13] *** Joins: brendan (brendaneic@E908EF74.6BAC3F3B.56A6FAA.IP)
[05:11:49] <sfackler> rusti:  use extra::base64::{FromBase64, ToBase64, STANDARD}; use extra::hex::ToHex; "foo".as_bytes().to_base64(STANDARD).from_base64().unwrap().to_hex()
[05:11:50] -rusti- ~"666f6f"
[05:13:06] *** Quits: jaen (jaen@moz-917FCC51.play-internet.pl) (Quit: WeeChat 0.4.1)
[05:17:25] <oren> hat am I doing wrong here: https://gist.github.com/orenbenkiki/6208391 ?
[05:17:32] *** Quits: mibitzi (mibitzi@659DAD1F.60DF3A09.8395810B.IP) (Ping timeout)
[05:22:23] *** Joins: ab (alex@BC9D99CC.37C1012D.FE617B51.IP)
[05:23:22] *** Quits: oren (oren@moz-B0F26027.red.bezeqint.net) (Client exited)
[05:23:48] *** Joins: oren (oren@moz-B0F26027.red.bezeqint.net)
[05:24:18] <oren> Damn, network problem. If someone responsed about https://gist.github.com/orenbenkiki/6208391 I missed it.
[05:24:26] *** Quits: KindOne (KindOne@moz-32B08B98.dynamic.ip.windstream.net) (Ping timeout)
[05:24:29] *** Quits: achin (Mibbit@moz-193F7FAD.ri.ri.cox.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:27:45] <oren> Not the best hour for this, I guess :-)
[05:27:54] *** Quits: oren (oren@moz-B0F26027.red.bezeqint.net) (Quit: leaving)
[05:28:43] *** Joins: KindOne (KindOne@moz-4C88E65.dynamic.ip.windstream.net)
[05:34:41] *** Joins: mibitzi (mibitzi@8E54F04D.AF6994D0.AB64B967.IP)
[05:35:24] *** Joins: Georgeta (geo@moz-1972B0C0.residential.rdsnet.ro)
[05:35:35] *** Parts: Georgeta (geo@moz-1972B0C0.residential.rdsnet.ro) ()
[05:38:19] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Quit: Konversation terminated!)
[05:38:23] *** Quits: mibitzi (mibitzi@8E54F04D.AF6994D0.AB64B967.IP) (Ping timeout)
[05:38:31] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[05:40:44] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Quit: Konversation terminated!)
[05:41:25] *** Joins: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu)
[05:45:10] *** Joins: vk_ (chatzilla@moz-389FEE13.hsd1.ca.comcast.net)
[05:49:19] *** Joins: tikue (tkuehn@moz-F4812C6E.hsd1.fl.comcast.net)
[05:49:53] *** Quits: brendan (brendaneic@E908EF74.6BAC3F3B.56A6FAA.IP) (Quit: brendan)
[05:53:29] *** Joins: brendan (brendaneic@E908EF74.6BAC3F3B.56A6FAA.IP)
[05:56:14] *** Joins: maik (maik___@moz-6E77C845.dip0.t-ipconnect.de)
[05:59:06] *** Joins: mibitzi (mibitzi@659DAD1F.60DF3A09.8395810B.IP)
[06:00:31] *** Joins: jensnockert (jensnocker@moz-C691D49D.mobileonline.telia.com)
[06:01:27] *** Quits: jensnockert (jensnocker@moz-C691D49D.mobileonline.telia.com) (Connection reset by peer)
[06:02:10] *** Quits: richard|s (mindginati@moz-9C555AF3.spmconsultants.co.nz) (Quit: zzZZZ)
[06:04:18] *** Quits: alisdair (textual@moz-66A71AB3.eng.wind.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[06:08:45] *** Joins: jaen (jaen@moz-DA4E5F8A.neoplus.adsl.tpnet.pl)
[06:09:20] *** Joins: alisdair (textual@moz-66A71AB3.eng.wind.ca)
[06:12:36] <klutzy> are #[cfg(windows)] and #[cfg(target_os = "win32")] different?
[06:14:14] *** Joins: fabiand (fabiand@moz-3CFA323F.adsl.alicedsl.de)
[06:15:35] <Luqman> klutzy: windows i think would be set only when building rustc and CFG_WINDOWSY_{target}=1  for the given target in ../mk/platform.mk
[06:16:32] *** Quits: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu) (Input/output error)
[06:18:54] <klutzy> Luqman: it sounds like that there is no difference in practice (at least for now)?
[06:18:57] *** Joins: froystig_ (froystig@5A39C99E.352137A1.BCED17D.IP)
[06:19:11] <Luqman> klutzy: well, right now yes
[06:19:12] *** Quits: froystig_ (froystig@5A39C99E.352137A1.BCED17D.IP) (Quit: leaving)
[06:20:34] <Luqman> klutzy: there's also target_family
[06:21:39] <Luqman> so, rust sets cfg(windows) if target_family = "windows", and cfg(unix) if target_family = "unix", etc
[06:22:04] <klutzy> wow
[06:23:00] *** Quits: pcwalton (pcwalton@E2F7352.56080C53.97BBD552.IP) (Quit: pcwalton)
[06:25:22] <klutzy> maybe they can be different if we support wine and bind wine-specific api :p
[06:25:52] *** Quits: brendan (brendaneic@E908EF74.6BAC3F3B.56A6FAA.IP) (Quit: brendan)
[06:26:22] <Luqman> klutzy: win64 too i'd imagine
[06:26:37] *** Joins: robertknight (robertknig@moz-85C86086.range81-151.btcentralplus.com)
[06:26:49] <strcat> I hope the snapshot assigns the same date to the builds finishing after day rollover :|
[06:27:23] *** Joins: sebcrozet (sebcrozet@moz-6DA639AF.w80-13.abo.wanadoo.fr)
[06:27:49] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[06:29:55] *** Quits: vk_ (chatzilla@moz-389FEE13.hsd1.ca.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 24.0/20130806170643])
[06:30:17] <klutzy> Luqman: I'm currently adding target_arch for win64 https://github.com/klutzy/rust/commits/mingw-w64
[06:30:48] <klutzy> maybe it'd better to exclude win64 from target_os="win32"
[06:32:08] <Luqman> klutzy: do you need to duplicate those? is just cfg(windows) not enough?
[06:32:26] <klutzy> Luqman: win64 uses fastcall not stdcall :'(
[06:32:43] <Luqman> ah, didn't notice that bit
[06:32:48] <klutzy> llvm emitted "CloseHandle@8" on win64 so linker complained
[06:33:00] *** Quits: alisdair (textual@moz-66A71AB3.eng.wind.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[06:33:25] <klutzy> maybe it'd better to trat "stdcall" as fastcall on win64, but i'm just trying to build for now
[06:34:32] <klutzy> windows bindings are always scary..
[06:34:59] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[06:35:21] <klutzy> my friend connected rust-opengles and ANGLE last month https://github.com/lifthrasiir/rust-opengles-angle
[06:35:45] <klutzy> but windows and non-windows require different abi, so he had to make "egl.rs.in" intermediate file
[06:36:45] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[06:36:45] <klutzy> where Makefile replaces "ABI" by real abi
[06:46:25] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[06:48:10] *** Joins: vk_ (chatzilla@moz-389FEE13.hsd1.ca.comcast.net)
[06:49:28] <vk_> Is there a way to have multiple version of rust installed? ubuntu would be the OS in use.
[06:50:40] <klutzy> i always set --prefix=$HOME/usr/rust-<revision> for configure
[06:51:24] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[06:51:34] <vk_> klutzy: that sounds like it should work, thanks.
[06:52:45] *** Quits: tautologico (lymph@8ABDEDA.34CAB63A.7B974E06.IP) (Quit: tautologico)
[06:53:16] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[06:53:22] *** Quits: froystig (froystig@moz-288D8DB1.hfc.comcastbusiness.net) (Quit: leaving)
[07:05:06] *** Quits: robertknight (robertknig@moz-85C86086.range81-151.btcentralplus.com) (Ping timeout)
[07:05:12] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[07:14:14] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[07:14:14] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/hoINPg
[07:14:14] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[07:17:13] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[07:17:13] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/ozUwlA
[07:17:13] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[07:17:14] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[07:17:14] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/xu2v8A
[07:17:14] <ghrust> 13rust/06auto 146016657 15Erick Tryzelaar: Deny warnings in stage1+ libsyntax/librustc/librustdoc/librusti/librust
[07:17:14] <ghrust> 13rust/06auto 14dc8f85a 15Erick Tryzelaar: Deny warnings in tests
[07:17:14] <ghrust> 13rust/06auto 14333fb4b 15bors: auto merge of #8441 : erickt/rust/deny-warnings, r=alexcrichton...
[07:17:15] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[07:17:53] *** Quits: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP) (Ping timeout)
[07:20:15] *** Joins: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP)
[07:20:42] *** Quits: vk_ (chatzilla@moz-389FEE13.hsd1.ca.comcast.net) (Ping timeout)
[07:20:48] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[07:20:54] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Ping timeout)
[07:21:54] *** Joins: vk_ (chatzilla@moz-389FEE13.hsd1.ca.comcast.net)
[07:29:54] *** Joins: Palmik (palmik@moz-CC484FDD.tmcz.cz)
[07:32:13] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[07:32:13] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14333fb4b to 141785841: 02http://git.io/N3iJvQ
[07:32:13] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[07:32:14] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[07:32:14] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/HaQTRA
[07:32:14] <ghrust> 13rust/06auto 14eee0447 15Felix S. Klock II: Add parse-error recovery for erroneous `struct_id { }` form....
[07:32:14] <ghrust> 13rust/06auto 14de48274 15bors: auto merge of #8418 : pnkfelix/rust/fsk-issue3192-improve-parse-error-for-empty-struct-init, r=pcwalton,me...
[07:32:15] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[07:34:55] *** Quits: maik (maik___@moz-6E77C845.dip0.t-ipconnect.de) (Ping timeout)
[07:46:26] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[07:46:39] *** Joins: jensnockert (jensnocker@moz-61E1062F.tbcn.telia.com)
[07:49:38] *** AutomatedTester is now known as AutomatedTester|PTO
[07:54:08] *** Joins: maik (maik___@moz-EF83D703.dip0.t-ipconnect.de)
[07:57:14] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[07:59:49] *** Quits: maik (maik___@moz-EF83D703.dip0.t-ipconnect.de) (Ping timeout)
[08:00:28] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[08:00:46] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[08:02:16] *** Joins: victorporof (victorporo@DBFC8886.2203F6DA.D111398B.IP)
[08:04:45] *** Joins: threecreepio (jdp@moz-1A9F0A3C.cust.bredband2.com)
[08:06:21] <dbaupp> rusti: let rep = std::iterator::Repeat::new(1i); (rep.size_hint(), rep.take(10).size_hint)
[08:06:23] -rusti- line longer than 150 columns, pastebinned 5 lines of output: http://ix.io/7dS
[08:06:33] <dbaupp> rusti: let rep = std::iterator::Repeat::new(1i); (rep.size_hint(), rep.take(10).size_hint())
[08:06:34] -rusti- ((18446744073709551615, None), (10, Some(10)))
[08:08:59] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[08:10:45] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[08:12:52] *** Quits: tikue (tkuehn@moz-F4812C6E.hsd1.fl.comcast.net) (Quit: tikue)
[08:16:28] *** Quits: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Ping timeout)
[08:16:43] *** Joins: orshem (orshem@C5E06B1E.A5B6B765.E3D28531.IP)
[08:18:33] *** Joins: mib_hmrxt7 (Mibbit@moz-2B18508A.kla-tencor.com)
[08:20:20] *** Joins: myname (myname@F6BC1CBC.2C5F047.A0197E77.IP)
[08:23:42] <myname> hey guys, are there any official statement in terms of api stability? i.e. as far as i looked there where 2 or 3 ncurses bindings (including mine) which broke horribly with 0.6 and at least two bindings for 0.6 which broke in 0.7
[08:24:09] <myname> i totally get that early adoper thing and stuff, but i'm really looking forward to actually do productive stuff with rust :)
[08:24:40] <dbaupp> yes; the statement is basically "no guarantees of api stability"
[08:24:55] <myname> without any dead line?
[08:25:09] <myname> like "okay, 1.0 will make api stability until 2.0"?
[08:25:15] <dbaupp> oh; there is that
[08:25:40] <dbaupp> but there's no time set for the various milestones (including the backwards compatible/api stable one.)
[08:26:42] <dbaupp> I believe the goal is for 1.0 in a year or so; hopefully earlier
[08:26:49] *** Joins: salladsfisk (Mibbit@moz-75021C1C.cse.chalmers.se)
[08:27:01] *** Joins: dim-an (ermolovd@moz-74FA7782.yandex.net)
[08:27:17] <myname> okay
[08:27:35] *** Joins: gits1225 (gits@46F1FBE9.BED99C53.301675BC.IP)
[08:27:46] <dbaupp> https://github.com/mozilla/rust/issues/milestones btw.
[08:28:04] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Ping timeout)
[08:28:56] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[08:29:11] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[08:29:30] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[08:30:24] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[08:30:55] <myname> thx
[08:31:51] <myname> i guess i should just play around with stuff like it is to get a better understanding of the ideas behind the language :)
[08:34:22] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[08:34:40] *** Joins: brendan (brendaneic@E908EF74.6BAC3F3B.56A6FAA.IP)
[08:35:10] *** Joins: Ms2ger (Ms2ger@moz-E9883900.access.telenet.be)
[08:37:04] *** Parts: dim-an (ermolovd@moz-74FA7782.yandex.net) ()
[08:37:28] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:37:36] *** Joins: tikue (tkuehn@moz-F4812C6E.hsd1.fl.comcast.net)
[08:40:29] <orshem> rusti: range(0, 2)
[08:40:30] -rusti- {state: 0, stop: 2, one: 1}
[08:40:38] <orshem> rusti: range(0, 2).iter()
[08:40:38] -rusti- <anon>:5:9: 6:5 error: type `std::iterator::Range<int>` does not implement any method in scope named `iter`
[08:40:39] -rusti- <anon>:5          range(0, 2).iter()
[08:40:39] -rusti- <anon>:6     };
[08:40:39] -rusti- error: aborting due to previous error
[08:40:39] -rusti- application terminated with error code 101
[08:40:58] <orshem> rusti: range(1, 3)
[08:40:59] -rusti- {state: 1, stop: 3, one: 1}
[08:41:24] <myname> what does that "one" mean?
[08:42:09] <orshem> rusti: range(1, 3).next()
[08:42:10] -rusti- Some(1)
[08:43:00] <Ms2ger> myname, that's the step
[08:43:18] <myname> oh, i would've named a step step
[08:49:57] <dbaupp> rusti: for i in range(1,3) { printfln!(i) }
[08:49:58] -rusti- 1
[08:49:58] -rusti- 2
[08:49:58] -rusti- ()
[08:51:45] <orshem> rusti: range(0,4).map(|x| x%2)
[08:51:46] -rusti- {iter: {state: 0, stop: 4, one: 1}, f: }
[08:51:59] <orshem> rusti: range(0,4).map(|x| x%2).collect()
[08:52:00] -rusti- <anon>:5:9: 6:5 error: cannot determine a type for this bounded type parameter: unconstrained type
[08:52:00] -rusti- <anon>:5          range(0,4).map(|x| x%2).collect()
[08:52:00] -rusti- <anon>:6     };
[08:52:00] -rusti- application terminated with error code 101
[08:52:11] <dbaupp> rusti: range(0,4).map(|x| x%2).to_owned_vec()
[08:52:12] -rusti- ~[0, 1, 0, 1]
[08:52:14] <orshem> rusti: range(0,4).map(|x| x%2).collect::<uint>()
[08:52:16] -rusti- line longer than 150 columns, pastebinned 4 lines of output: http://ix.io/7dT
[08:52:37] <orshem> dbaupp: thanks
[08:53:41] <orshem> dbaupp: is there an apply method? if i want map to run because of side effects but i don't care about the resulting vector
[08:54:09] *** Joins: alisdair (textual@E4A5A94A.4E22A069.3C16C231.IP)
[08:54:46] *** Joins: pcwalton (pcwalton@moz-4F2F08F2.datalock.co.nz)
[08:54:46] *** ChanServ sets mode: +o pcwalton
[08:55:41] *** Joins: maik (maik___@moz-6CCE041.dip0.t-ipconnect.de)
[08:55:55] *** Joins: flaper87_afk (flaper87@moz-107AD163.redhat.com)
[08:56:13] <Ms2ger> for ... in?
[08:56:56] *** Joins: flaper87 (Mibbit@moz-550CA7CC.retail.telecomitalia.it)
[08:57:12] <orshem> Ms2ger, yeah, but i want a cool one liner 
[08:57:22] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[08:57:34] <Ms2ger> A badly formatted for ... in? :)
[08:57:57] <dbaupp> orshem: `for _ in x {}` ?
[08:58:05] <orshem> rusti: range(0,4).map(|x| printfln!(x)).collect::<int>()
[08:58:07] -rusti- line longer than 150 columns, pastebinned 4 lines of output: http://ix.io/7dU
[08:58:18] <dbaupp> rusti: range(0,4).map(|x| printfln!(x)).collect::<~[()]>()
[08:58:19] -rusti- 0
[08:58:19] -rusti- 1
[08:58:19] -rusti- 2
[08:58:19] -rusti- 3
[08:58:19] -rusti- ~[(), (), (), ()]
[08:58:29] *** Quits: flaper87 (Mibbit@moz-550CA7CC.retail.telecomitalia.it) (Quit: http://www.mibbit.com ajax IRC Client)
[08:59:44] <tikue> orshem: use for â€¦ in iter for that
[08:59:48] <dbaupp> rusti: for _ in range(0,4).map(|x| printfln!(x)) {}
[08:59:49] -rusti- 0
[08:59:49] -rusti- 1
[08:59:50] -rusti- 2
[08:59:50] -rusti- 3
[08:59:50] -rusti- ()
[09:00:06] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[09:00:32] <dbaupp> orshem: (but, if you've got something that only has side effects, put it in the {} of a for; even if it's all on one line.)
[09:00:53] <orshem> tikue, dbaupp yep, that seem the cleanest
[09:00:58] <orshem> option
[09:02:46] *** Quits: flaper87_afk (flaper87@moz-107AD163.redhat.com) (Quit: Bye!)
[09:03:05] *** Joins: flaper87l (flaper87@moz-107AD163.redhat.com)
[09:03:59] <tikue> there are a lot of great builtin methods for iterators, but sometimes a simple for loop is still the best option :) that's probably why there isn't an apply method
[09:04:08] *** Quits: jensnockert (jensnocker@moz-61E1062F.tbcn.telia.com) (Input/output error)
[09:04:36] *** Joins: jensnockert (jensnocker@moz-61E1062F.tbcn.telia.com)
[09:06:14] <tikue> do range(0, 5).all |x| { printfln!(x); x < 3 }
[09:06:16] *** Quits: jensnockert (jensnocker@moz-61E1062F.tbcn.telia.com) (Ping timeout)
[09:06:19] <tikue> rusti: do range(0, 5).all |x| { printfln!(x); x < 3 }
[09:06:20] -rusti- 0
[09:06:20] -rusti- 1
[09:06:20] -rusti- 2
[09:06:20] -rusti- 3
[09:06:20] -rusti- false
[09:06:31] <tikue> rusti: do range(0, 10).all |x| { printfln!(x); x < 3 }
[09:06:32] -rusti- 0
[09:06:32] -rusti- 1
[09:06:32] -rusti- 2
[09:06:33] -rusti- 3
[09:06:33] -rusti- false
[09:06:39] *** flaper87l is now known as flaper87
[09:06:49] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[09:09:33] <tikue> rusti: do range(0, 10).map(|x| { printfln!(x); x }).all |x| { printfln!(x); x < 3 }
[09:09:36] -rusti- pastebinned 9 lines of output: http://ix.io/7dV
[09:10:03] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[09:12:20] <tikue> rusti: (~[2u]).consume_iter()
[09:12:21] -rusti- <anon>:5:9: 6:5 error: type `~[uint]` does not implement any method in scope named `consume_iter`
[09:12:21] -rusti- <anon>:5          (~[2u]).consume_iter()
[09:12:21] -rusti- <anon>:6     };
[09:12:21] -rusti- error: aborting due to previous error
[09:12:22] -rusti- application terminated with error code 101
[09:12:34] <tikue> rusti: (~[2u]).consume()
[09:12:35] -rusti- <anon>:5:9: 6:5 error: type `~[uint]` does not implement any method in scope named `consume`
[09:12:35] -rusti- <anon>:5          (~[2u]).consume()
[09:12:35] -rusti- <anon>:6     };
[09:12:35] -rusti- error: aborting due to previous error
[09:12:35] -rusti- application terminated with error code 101
[09:12:41] <tikue> rusti: (~[2u]).move_iter()
[09:12:42] -rusti- {v: ~[2], idx: 0}
[09:12:54] <tikue> why the change consume ==> move?
[09:13:24] <dbaupp> because the colour of the bikeshed was decided, I guess.
[09:13:28] <tikue> :)
[09:13:29] <tikue> fair 
[09:13:47] <Ms2ger> I think move was what people wanted in the first place, but there was a bug that didn't allow it?
[09:13:52] <tikue> ahh ok
[09:14:07] <tikue> makes sense anyway. move is the terminology rust uses
[09:14:12] <tikue> and it's shorter, as a bonus
[09:21:48] <orshem> tikue, that's not the problem :)
[09:22:00] <tikue> orshem: what isn't the problem?
[09:22:10] <orshem> the problem is that it will take bors 3 hours to merge this
[09:22:25] <orshem> look t the Q ;p
[09:22:26] <tikue> lol
[09:22:30] <tikue> merge what?
[09:22:39] <orshem> the change to move
[09:22:54] <tikue> it already landed no?
[09:23:03] <orshem> when i started following rust the pr q was under 10
[09:23:09] <orshem> oh it landed?
[09:23:13] <tikue> ya
[09:23:25] <tikue> rusti: (~[2]).move_iter()
[09:23:26] -rusti- {v: ~[2], idx: 0}
[09:23:33] <orshem> nice
[09:25:59] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[09:26:27] *** Quits: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[09:27:27] *** Quits: tikue (tkuehn@moz-F4812C6E.hsd1.fl.comcast.net) (Quit: tikue)
[09:29:53] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Ping timeout)
[09:31:46] *** Quits: maik (maik___@moz-6CCE041.dip0.t-ipconnect.de) (Ping timeout)
[09:37:45] *** Joins: maik (maik___@moz-F2052894.dip0.t-ipconnect.de)
[09:41:31] *** Quits: orshem (orshem@C5E06B1E.A5B6B765.E3D28531.IP) (Quit: Leaving)
[09:41:48] *** Quits: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu) (Quit: Leaving)
[09:42:01] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[09:45:08] *** Joins: richard|s (mindginati@moz-268511E5.dsl.dyn.ihug.co.nz)
[09:46:59] *** Joins: pcdummy (quassel@moz-CF4CA865.page4me.ch)
[09:48:51] *** Quits: kemurphy (kemurphy@3863AC20.C4E71399.9510F13D.IP) (Ping timeout)
[09:50:02] *** Quits: richard|s (mindginati@moz-268511E5.dsl.dyn.ihug.co.nz) (Quit: zzZZZ)
[09:50:07] *** Joins: kemurphy (kemurphy@3863AC20.C4E71399.9510F13D.IP)
[09:51:27] *** Joins: richard|s (mindginati@moz-268511E5.dsl.dyn.ihug.co.nz)
[09:52:37] *** Quits: ross (ross@moz-8A84103E.br.br.cox.net) (Quit: )
[09:55:18] *** Quits: brendan (brendaneic@E908EF74.6BAC3F3B.56A6FAA.IP) (Quit: brendan)
[09:56:32] *** Quits: pcwalton (pcwalton@moz-4F2F08F2.datalock.co.nz) (Quit: pcwalton)
[09:56:38] *** Quits: alisdair (textual@E4A5A94A.4E22A069.3C16C231.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[09:57:06] *** Joins: DasIch (dasich@moz-5EDA591.de)
[09:58:23] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[09:59:13] *** Quits: kdj (kyle@FA39BFBF.D27A4F86.8BEFA1E3.IP) (Ping timeout)
[10:00:37] *** Quits: flaper87 (flaper87@moz-107AD163.redhat.com) (Ping timeout)
[10:01:34] *** Quits: xymostech (xymostech@22A34502.AFC2BCFF.2CFD4520.IP) (Ping timeout)
[10:02:43] *** Joins: kdj (kyle@FA39BFBF.D27A4F86.8BEFA1E3.IP)
[10:03:21] *** Joins: flaper87|afk (flaper87@moz-107AD163.redhat.com)
[10:04:09] *** flaper87|afk is now known as flaper87
[10:05:00] *** Joins: xymostech (xymostech@22A34502.AFC2BCFF.2CFD4520.IP)
[10:06:22] *** Quits: maik (maik___@moz-F2052894.dip0.t-ipconnect.de) (Ping timeout)
[10:09:07] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[10:12:21] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[10:14:01] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[10:14:08] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[10:16:06] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[10:20:40] *** Quits: richard|s (mindginati@moz-268511E5.dsl.dyn.ihug.co.nz) (Quit: zzZZZ)
[10:21:31] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Client exited)
[10:21:52] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[10:23:32] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[10:28:33] *** Quits: ab (alex@BC9D99CC.37C1012D.FE617B51.IP) (Quit: Konversation terminated!)
[10:30:35] *** Joins: BitPuffin (quassel@moz-7BB00EC9.bredband.comhem.se)
[10:34:14] *** Quits: BitPuffin (quassel@moz-7BB00EC9.bredband.comhem.se) (Ping timeout)
[10:35:39] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[10:39:25] *** Joins: ab (alex@BC9D99CC.37C1012D.FE617B51.IP)
[10:50:36] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[10:53:00] *** Joins: BitPuffin (quassel@moz-7BB00EC9.bredband.comhem.se)
[10:56:26] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[10:59:03] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: ["Textual IRC Client: www.textualapp.com"])
[10:59:31] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[11:01:13] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[11:05:21] *** kimundi is now known as zz_kimundi
[11:05:35] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[11:09:07] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[11:09:08] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[11:13:02] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[11:14:16] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[11:14:16] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/HaQTRA
[11:14:16] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[11:17:13] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[11:17:13] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/wKQ4Ow
[11:17:13] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[11:17:15] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[11:17:15] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/kmGWXw
[11:17:15] <ghrust> 13rust/06auto 14b7b8940 15Alex Crichton: Forbid pub/priv where it has no effect...
[11:17:15] <ghrust> 13rust/06auto 14661642d 15bors: auto merge of #8423 : alexcrichton/rust/less-priv-again, r=bstrie...
[11:17:15] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[11:20:51] *** Joins: fyolnish (fyolnish@moz-6F428248.uqwimax.jp)
[11:22:41] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[11:23:34] *** zz_kimundi is now known as kimundi
[11:27:35] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[11:29:13] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[11:29:13] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14661642d to 14de48274: 02http://git.io/N3iJvQ
[11:29:13] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[11:29:13] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[11:29:13] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/lCHOWA
[11:29:13] <ghrust> 13rust/06auto 14b44f423 15blake2-ppc: std::iterator: Rename .peek() to .inspect()
[11:29:13] <ghrust> 13rust/06auto 14deb7b67 15Simon Sapin: Add a "peekable" iterator adaptor, with a peek() method that returns the next element.
[11:29:14] <ghrust> 13rust/06auto 140b35e3b 15blake2-ppc: extra::treemap: Use IteratorUtil::peekable...
[11:29:16] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[11:34:57] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[11:38:31] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Quit: Leaving)
[11:38:59] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[11:51:55] *** Joins: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu)
[11:52:29] *** Joins: true_droid (true_droid@moz-123FD9B8.beck.volia.net)
[11:56:31] *** Joins: gano (ganoo@4C362588.BAA98016.AEE39206.IP)
[11:56:38] *** Joins: Earnestly (earnest@B0BDF733.8FDE20A.5411983D.IP)
[11:56:53] *** gano is now known as ganoo
[11:58:36] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Client exited)
[11:58:57] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[12:00:38] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[12:09:26] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[12:13:05] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Quit: msingle)
[12:13:51] *** Quits: reyre (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Client exited)
[12:18:21] *** Quits: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu) (Input/output error)
[12:23:31] *** Joins: samx (sami@moz-48EC0983.dyn.optonline.net)
[12:24:08] *** Quits: samx (sami@moz-48EC0983.dyn.optonline.net) (Quit: This computer has gone to sleep)
[12:26:24] *** Joins: maik (maik___@moz-122881CA.dip0.t-ipconnect.de)
[12:34:47] *** Joins: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu)
[12:39:37] *** Quits: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu) (Input/output error)
[12:40:38] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[12:41:35] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[12:57:24] <bstrie> cmr: re: the Default trait, what other types do you expect to have it implemented upon? ints? bools?
[12:57:35] *** Quits: ab (alex@BC9D99CC.37C1012D.FE617B51.IP) (Ping timeout)
[12:59:29] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[13:02:10] *** Joins: maxli (maxli@13F2CEC5.7672369.D8E68FF6.IP)
[13:02:22] <dbaupp> bstrie: anything that has a sensible default; vecs, maps, sets, strings
[13:02:33] <dbaupp> tuples containing Default elements
[13:02:53] <kimundi> numbers would also fall under that, right?
[13:03:01] <dbaupp> (ints, bools etc would be *useful* to have as Default, otherwise #[deriving(Default)] would be less useful.)
[13:04:41] <bstrie> dbaupp: right, I'm thinking about the deriving story here
[13:04:57] <bstrie> can't reject a struct from deriving default just because it contains a bool
[13:05:34] <bstrie> because rather than write an implementation people will just change the bool to an int
[13:05:50] <dbaupp> yeah
[13:05:57] <dbaupp> and bools don't really have a sensible default
[13:06:03] <bstrie> right, it's gross
[13:06:15] <dbaupp> (although I guess bitpattern == 0 for POD types is semi-reasonable?)
[13:06:30] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[13:07:02] <bstrie> maybe we should also have #[deriving(New)] to implement our stock-standard Foo::new(1,2,3) methods
[13:07:25] <dbaupp> that just wraps the struct fields as args?
[13:07:35] <bstrie> could be nice for long structs
[13:07:52] <dbaupp> RFC it?
[13:07:56] <bstrie> maybe it's too enterprisey :P
[13:07:58] <bstrie> not sure
[13:08:16] * dbaupp needs to remember to implement #[bstrie] sometime
[13:08:19] <dbaupp> :P
[13:08:20] <bstrie> let me see how often we actually implement new methods that don't do anything interesting
[13:08:37] <ChrisMorgan> I'd tend to say that long structs are the sorts of things where you might actually not _want_ a new method, as the parameter names won't be obvious.
[13:08:55] <bstrie> good point
[13:09:01] <dbaupp> but, yeah, I think graydon actually suggested it before, but only weakly because he decided that there's normally custom logic required
[13:09:09] * ChrisMorgan wishes methods could have named arguments, vaguely like Python's kwargs
[13:09:19] <dbaupp> ChrisMorgan: it's proposed ;)
[13:09:41] <dbaupp> https://github.com/mozilla/rust/issues/6973
[13:10:08] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[13:10:13] <engla> Numerical types will need Default and Zero to do the same thing
[13:11:42] <engla> which is a bit annoying
[13:11:48] <dbaupp> woah, extra::getopts got all changed.
[13:12:01] * dbaupp takes this as a sign to go to bed
[13:12:23] <bstrie> engla: perhaps Default should inherit from Zero
[13:12:25] <ChrisMorgan> Bed? at 11:12pm?
[13:12:27] <dbaupp> engla: yeah, it'll be redundant
[13:12:30] *** Quits: fyolnish (fyolnish@moz-6F428248.uqwimax.jp) (Client exited)
[13:12:43] <dbaupp> ChrisMorgan: I slept for 4 hours last night :P
[13:12:52] *** Joins: fyolnish (fyolnish@moz-6F428248.uqwimax.jp)
[13:12:53] <ChrisMorgan> That was wise.
[13:13:02] <ChrisMorgan> The bit that was unwise was not sleeping for a few more :P
[13:13:11] * dbaupp was doing the ICFP contest
[13:13:21] <dbaupp> bstrie: that would be weird
[13:13:29] <dbaupp> bstrie: do you mean Zero from Default?
[13:13:40] <dbaupp> bstrie: but even that breaks the mathematical meaning of Zero
[13:14:32] *** Quits: fyolnish (fyolnish@moz-6F428248.uqwimax.jp) (Ping timeout)
[13:14:36] <engla> there just needs to be  impl<T: Zero> Default for T.  in a way that doesn't conflict
[13:15:01] <dbaupp> https://github.com/mozilla/rust/issues/7059
[13:15:11] * ChrisMorgan inserts ANSI escapes with a literal ESC into a string (just to be quick), and his diff gets coloured
[13:15:22] *** Joins: fyolnish (fyolnish@moz-6F428248.uqwimax.jp)
[13:16:26] <dbaupp> bstrie: (to be clear, it would be weird because then everything that was Default would have to also be Zero, and there'd be little point to even having the separation.)
[13:16:28] <engla> rusti is broken again right? I had a short good time with it
[13:16:37] <engla> when it was working right before the newrt landed
[13:17:20] <engla> (now it segfaults on everything again)
[13:17:38] <cmr> engla: No, you can't have an impl<T: Zero> Default for T
[13:17:44] <ruediger> anyone here with mailinglist moderation rights?  My email about rusti.el is stuck in the moderation queue.
[13:17:46] <cmr> Zero is not the default value, it's the numerical zero
[13:17:49] <dbaupp> cmr: it's proposed :)
[13:18:02] <doomlord> http://dobkeratops.github.io/rftest/librustc/rustc.rs.html#197 << got my cross crate links working mostly it seems
[13:18:04] <dbaupp> cmr: oh, you mean semantically?
[13:18:07] <cmr> dbaupp: yes
[13:18:18] <engla> cmr: why can't it be both?
[13:18:27] <cmr> There are types where zero and default are not the same
[13:18:34] <dbaupp> doomlord: first thing I click on: http://dobkeratops.github.io/rftest/%3Cquote%20expansion%3E.html#6 :(
[13:18:37] <dbaupp> cmr: such as?
[13:18:37] <cmr> an IP address has a useful zero, but the default would be localhost.
[13:18:45] <dbaupp> oh
[13:18:46] <cmr> Or a Uuid
[13:18:55] <engla> an IP address is not a numerical type
[13:18:55] <cmr> Default is a random one, zero is something else
[13:19:02] <doomlord> ah yes thats first broken one i found, not sure whatsgoin gon there, most others work
[13:19:05] <engla> why should it define zero
[13:19:05] <dbaupp> cmr: well, they don't have a numeric Zero
[13:19:22] <bstrie> but I'm not sure that Zero is useful on IP addresses and UUIDs :P
[13:19:27] <engla> no Zero if it doesn't define Add
[13:19:42] <cmr> well, neither am I, but I think it's wrong to derive Default from Zero
[13:19:50] <cmr> I'd expect the identity element to be the default tbh
[13:19:56] <cmr> (for numerics)
[13:19:59] <dbaupp> identity = 1?
[13:20:01] <cmr> yes
[13:20:03] <dbaupp> really?
[13:20:06] <engla> no
[13:20:11] <dbaupp> that's seems very peculiar
[13:20:25] <cmr> Using the default would mean it wouldn't change the result of your operations
[13:20:31] <dbaupp> 1 + x?
[13:20:31] <bstrie> cmr: but zero *is* the identity, for addition :P
[13:20:35] <cmr> well, it's the multiplicative identity
[13:20:37] <engla> check around how many constructors using 0 and how many using 1 you can find
[13:20:37] <cmr> grr
[13:20:50] <cmr> stupid numbers :p
[13:21:19] <engla> again, I'm against Add being used for concatenation
[13:21:21] * dbaupp deletes all the numbers so cmr can relax
[13:21:28] <engla> but if you can add ~[], it should have Zero too
[13:21:41] <engla> I think concat should have its own operator
[13:21:46] <cmr> ok now that I've straightened out all that in my head, I'm against numerics implementing Default
[13:21:48] <dbaupp> rusti: let x: ~[int] = std::num::Zero::zero(); x
[13:21:49] -rusti- ~[]
[13:21:53] <cmr> (I just woke up, haven't even had my tea yet)
[13:21:57] <dbaupp> cmr: that'd make deriving useless :(
[13:22:10] <engla> cmr: ah, so now you can't derive default for a struct with numeric types :)
[13:22:12] <doomlord> ++ is concat in haskell?
[13:22:18] <Ms2ger> Yes
[13:22:21] <dbaupp> doomlord: for lists specifically, yes
[13:22:22] <engla> ++ is list append
[13:22:26] <engla> <> is Monoid append
[13:23:02] <cmr> dbaupp: engla: I don't think that's a bad thing. You need to consider what number you want as the default, imo.
[13:23:36] <engla> zeros everywhere.
[13:23:40] <dbaupp> cmr: zero is normally a pretty good default
[13:24:02] <bstrie> not having Default implemented for all builtin types makes it pretty useless, imo
[13:24:26] <bstrie> unless there's some use for it besides deriving
[13:24:45] *** kimundi is now known as zz_kimundi
[13:25:17] <cmr> It seems the only Zero derivations in the codebase are the tests.
[13:27:05] <engla> std::hash could use Zero/Default for SipState
[13:27:24] <engla> its fn default_state returns a struct with all values zero
[13:27:42] <engla> but [T, ..8] probably has no default impl
[13:30:06] * cmr shrugs
[13:30:17] <cmr> go for it, see how it works out :p
[13:33:39] <engla> didn't you add Default?
[13:33:44] <cmr> yes
[13:34:06] <engla> ah it's not merged yet
[13:34:43] *** Joins: metasyntax (tvenable@moz-63D9B3D.med-web.com)
[13:36:17] *** Joins: reyre (reyre@B2D8AB09.33EE9F8A.1139E686.IP)
[13:44:30] *** Joins: dherman (dherman@7863A936.5761062E.DAF2E6B4.IP)
[13:44:30] *** ChanServ sets mode: +o dherman
[13:50:52] *** Parts: ganoo (ganoo@4C362588.BAA98016.AEE39206.IP) (Leaving)
[13:51:41] *** Quits: threecreepio (jdp@moz-1A9F0A3C.cust.bredband2.com) (Quit: threecreepio)
[13:53:58] *** Quits: Palmik (palmik@moz-CC484FDD.tmcz.cz) (Ping timeout)
[13:54:19] *** Joins: huanghongqiao (Mibbit@F3ADC85B.D9DB03AE.ABA4ADC1.IP)
[13:54:52] <huanghongqiao> where is the regex module??
[13:55:14] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[13:55:46] <huanghongqiao> how can i operation SQL with rust?
[13:55:55] <cmr> huanghongqiao: there is no regex module
[13:56:02] <cmr> only SQL is sqlite3
[13:56:08] <bstrie> huanghongqiao: regex module is not yet implemented
[13:56:19] <huanghongqiao> @cmr haha~!
[14:01:54] *** Joins: milinda (milinda@3CE69972.ED81CFCE.51B6877.IP)
[14:05:06] <huanghongqiao> I want to calculate Pi, however, there is no existing data struture which like Python. I am using Python
[14:05:35] *** Joins: lmandel-pto (lmandel@moz-57D3C086.dsl.bell.ca)
[14:06:13] <ChrisMorgan> huanghongqiao: Rust is at present a language not for the faint of heart; it's documented poorly as things are still changing fairly quickly.
[14:06:35] *** Joins: Palmik (palmik@moz-CC484FDD.tmcz.cz)
[14:08:45] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[14:10:43] *** lmandel-pto is now known as lmandel
[14:11:51] *** Joins: reyre_ (reyre@75F08BC5.C672A675.1139E686.IP)
[14:13:17] *** Joins: DoomBoom (DoomBoom@6B14631A.ACEC7723.5D1D3FEF.IP)
[14:13:33] *** Joins: orshem (orshem@C5E06B1E.A5B6B765.E3D28531.IP)
[14:13:36] <bstrie> huanghongqiao: let me see if I can write an example to calculate pi
[14:14:58] <huanghongqiao> ChrisMorgan, I found Rust is very like Go, but point in rust Complex than GO
[14:15:25] <cmr> huanghongqiao: it's not really like go, but it's more complex from the more sophisticated memory and type system, yes.
[14:15:31] <bstrie> huanghongqiao: there are many important differences between Rust and Go
[14:15:44] <ChrisMorgan> huanghongqiao: Go is a deliberately simple language. Rust is deliberately a much more complex language. Go is good for some things, but there are many things where Go would utterly fall flat where Rust will do very well.
[14:15:47] <doomlord> rust is better compared to C++..
[14:16:19] <cmr> also go isn't typesafe wrt interfaces
[14:16:46] <bstrie> does anyone know how I get exponentiation and sqrt in rust?
[14:16:58] <bstrie> rusti: 4.exp(2)
[14:16:59] -rusti- <anon>:5:9: 6:5 error: type `<VI0>` does not implement any method in scope named `exp`
[14:16:59] -rusti- <anon>:5          4.exp(2)
[14:16:59] -rusti- <anon>:6     };
[14:17:00] -rusti- error: aborting due to previous error
[14:17:00] -rusti- application terminated with error code 101
[14:17:04] <bstrie> rusti: 4.pow(2)
[14:17:04] -rusti- <anon>:5:9: 6:5 error: type `<VI0>` does not implement any method in scope named `pow`
[14:17:04] -rusti- <anon>:5          4.pow(2)
[14:17:05] -rusti- <anon>:6     };
[14:17:06] <cmr> rusti: 4.pow(&2)
[14:17:06] *** concrete.mozilla.org sets mode: +M 
[14:17:07] -rusti- error: aborting due to previous error
[14:17:09] -rusti- application terminated with error code 101
[14:17:10] -rusti- <anon>:5:9: 6:5 error: type `<VI0>` does not implement any method in scope named `pow`
[14:17:13] -rusti- <anon>:5          4.pow(&2)
[14:17:15] -rusti- <anon>:6     };
[14:17:17] -rusti- error: aborting due to previous error
[14:17:19] -rusti- application terminated with error code 101
[14:17:27] *** Quits: gits1225 (gits@46F1FBE9.BED99C53.301675BC.IP) (Ping timeout)
[14:17:50] <cmr> rusti: 4f.pow(&3f)
[14:17:51] -rusti- 64
[14:17:57] <cmr> rusti: 4f.sqrt()
[14:17:58] -rusti- 2
[14:18:16] <cmr> I guess the fixnums aren't considered worthy enough to implement Algebraic
[14:18:26] <bstrie> thanks
[14:19:20] <bstrie> seems strange that we require you to pass the exponent by reference
[14:19:37] <cmr> it's to enable more efficient bignums and such
[14:19:53] <cmr> they get inlined anyway
[14:20:35] *** Joins: gits1225 (gits@D6992350.FBBDFB7D.73686190.IP)
[14:20:48] *** Quits: gits1225 (gits@D6992350.FBBDFB7D.73686190.IP) (Quit: )
[14:22:04] *** concrete.mozilla.org sets mode: -M 
[14:22:08] <engla> I don't know if it will stay inconsistent, but the free functions are by-value
[14:22:22] <engla> rusti: std::num::pow(4f, 3f)
[14:22:23] -rusti- 64
[14:22:55] <engla> rusti: std::num::exp(1)
[14:22:56] -rusti- <anon>:5:9: 5:22 error: failed to find an implementation of trait std::num::Exponential for int
[14:22:56] -rusti- <anon>:5          std::num::exp(1)
[14:22:56] -rusti-                   ^~~~~~~~~~~~~
[14:22:56] -rusti- application terminated with error code 101
[14:22:57] <engla> rusti: std::num::exp(1f)
[14:22:58] -rusti- 2.71828183
[14:23:03] <engla> bstrie: this is the best way ^
[14:23:22] <cmr> what is that, e^x?
[14:23:45] <engla> yes, the exponential function
[14:24:21] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: bb2m)
[14:24:32] *** flaper87 is now known as flaper87|afk
[14:27:22] <klutzy> $ PATH=$PATH:/d/stone/rust/build-32/i686-pc-mingw32/stage2/bin/rustc/x86_64-w64-mingw32/bin ./smallest-hello-world.exe
[14:27:25] <klutzy> Hello mingw-w64!
[14:27:28] <klutzy> :D
[14:28:03] <klutzy> well programs using std are not working, but not bad so far
[14:29:13] *** Quits: milinda (milinda@3CE69972.ED81CFCE.51B6877.IP) (Input/output error)
[14:31:17] *** Quits: maik (maik___@moz-122881CA.dip0.t-ipconnect.de) (Ping timeout)
[14:36:12] <Seldaek> klutzy: what are you up to?
[14:36:44] <klutzy> cross-compiled :)
[14:36:53] <klutzy> host mingw32, target mingw-w64
[14:37:02] *** Joins: milinda (milinda@3CE69972.ED81CFCE.51B6877.IP)
[14:37:22] *** Quits: Palmik (palmik@moz-CC484FDD.tmcz.cz) (Quit: Lost terminal)
[14:37:27] <klutzy> with some patches https://github.com/klutzy/rust/commits/mingw-w64
[14:37:51] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[14:38:08] <klutzy> now investigating segfaults when std comes..
[14:38:10] *** flaper87|afk is now known as flaper87
[14:38:55] *** Quits: reyre_ (reyre@75F08BC5.C672A675.1139E686.IP) (Ping timeout)
[14:40:33] <bstrie> we have bigints, but do we have decimal bignums with arbitrary precision?
[14:40:41] <cmr> no
[14:40:50] <cmr> and the bigint is naively implemented
[14:40:51] *** Quits: milinda (milinda@3CE69972.ED81CFCE.51B6877.IP) (Input/output error)
[14:41:11] <bstrie> rusti: 1f128
[14:41:12] -rusti- <anon>:5:11: 5:14 error: expected `;` or `}` after expression but found `128`
[14:41:12] -rusti- <anon>:5          1f128
[14:41:12] -rusti-                     ^~~
[14:41:12] -rusti- application terminated with error code 101
[14:41:13] *** Joins: milinda (milinda@moz-A7272ABE.dhcp-bl.indiana.edu)
[14:41:30] *** Joins: boredomist (user@moz-63CF9F31.res-cmts.sesp.ptd.net)
[14:42:58] *** Joins: Palmik (palmik@moz-CC484FDD.tmcz.cz)
[14:44:39] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:44:45] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[14:48:57] <clonejo> Is rusti broken for others, too?
[14:49:07] <cmr> clonejo: rusti never really works
[14:49:17] <clonejo> It segfaults on any command.
[14:49:21] <cmr> The warning it prints on startup is fer real
[14:49:25] <engla> it did work previously
[14:49:32] <cmr> engla: for some things :)
[14:49:33] <engla> just a week ago or so it was fine
[14:49:41] <engla> for a lot of things
[14:49:46] <cmr> instability is down a lot, yea
[14:51:29] <klutzy> some extern fns needs to have different abi per platform, the only way I know is copy-pasting. is there any method? or any issue/discussion exists?
[14:52:02] <cmr> klutzy: afaik extern "C" should do the right thing, per-platform.
[14:53:00] <klutzy> cmr: win32 requires "stdcall" to link dlls, and win64 requires no args (or is equiv to C?) :-$
[14:53:23] <klutzy> cmr: I'm doing win64 stuff, and had to copy-paste all dll binding parts
[14:53:25] <bstrie> ugh, how do I use format strings to print a certain number of decimal places
[14:53:32] <bstrie> also, does this work on f64
[14:53:37] *** Quits: mib_hmrxt7 (Mibbit@moz-2B18508A.kla-tencor.com) (Quit: http://www.mibbit.com ajax IRC Client)
[14:53:59] *** Joins: mrordinaire (Mibbit@1A659656.A607747.FD383126.IP)
[14:54:11] <mrordinaire> rusti: ~[]
[14:54:14] -rusti- pastebinned 6 lines of output: http://ix.io/7e6
[14:54:48] <mrordinaire> rusti: let a = ~[];
[14:54:49] -rusti- <anon>:5:13: 5:20 error: cannot determine a type for this local variable: unconstrained type
[14:54:49] -rusti- <anon>:5          let a = ~[];
[14:54:49] -rusti-                       ^~~~~~~
[14:54:49] -rusti- error: aborting due to previous error
[14:54:49] -rusti- application terminated with error code 101
[14:55:02] *** Quits: mrordinaire (Mibbit@1A659656.A607747.FD383126.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:55:51] <klutzy> I think there should be some compact way to change only abis per platform, but don't know how to do elegantly
[14:56:21] <cmr> Well the achieve conditional compilatoin you use #[cfg], but that doesn't help with duplication.
[14:56:26] <cmr> s/the/to
[14:56:43] <klutzy> yep :'(
[14:56:52] <bstrie> uuuuuuuuugh
[14:57:02] <bstrie> %f only works on floats
[14:57:11] <bstrie> so I have to chop off all the precision to actually print the decimal places
[14:57:43] <klutzy> actually there is no "stdcall" in win64, but rustc puts the flag if given, then llvm mangles function name
[14:58:14] <klutzy> well in this case llvm is bad I think :p
[14:58:37] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[14:58:54] <klutzy> anyway similar issue occurs in opengl world, since linux wants cdecl but win32 wants stdcall
[14:59:33] <klutzy> my friend didn't wanted to copy, so solved it by "sed" in Makefile
[15:01:50] <cmr> dbaupp: I have begun the benchmarking
[15:01:57] <cmr> 322 commits
[15:02:16] <cmr> I'm going to do it in two passes, one memory, one time, so half the data will be available early
[15:02:21] <bstrie> huanghongqiao: I do not think it is possble to calculate pi in rust at the moment. we do not have arbitrary precision decimal numbers.
[15:02:36] <bstrie> or rather, calculate pi to more than 8 digits :P
[15:02:38] <cmr> should be... ~2-3 minutes per bench I think
[15:03:09] <engla> bstrie: you can print full precision with %f fine
[15:03:18] <bstrie> engla: I can't print a f64 though
[15:03:32] <bstrie> I'm trying to print to 24 decimal points of precision
[15:03:32] <engla> ah maybe not on 32-bit
[15:03:42] <bstrie> yes, this machine is 32-bit
[15:03:51] <cmr> %? to the rescue?
[15:03:59] <bstrie> %? only prints to 8 places :(
[15:04:02] <cmr> or calling strconv/to_str
[15:04:22] <bstrie> I'm not even mathematically certain that this algorithm works with f64
[15:04:26] <bstrie> it's all greek to me
[15:04:52] <bstrie> I mean, the numbers look accurate to at least 8 places
[15:05:06] <engla> num/strconv
[15:05:10] <bstrie> but they stop converging after the second iteration
[15:05:39] <bstrie> to_str also only goes to 8 places
[15:05:44] *** Quits: robarnold (rob@BD56354E.DB510C09.6E370BFC.IP) (Ping timeout)
[15:05:53] <bstrie> rusti: 4.12312323523423423f64.to_str()
[15:05:54] -rusti- ~"4.12312324"
[15:06:13] *** Joins: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com)
[15:06:13] *** ChanServ sets mode: +o nmatsakis
[15:08:26] *** Joins: timculver (Mibbit@moz-544FD825.bstnma.fios.verizon.net)
[15:12:12] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[15:12:36] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[15:13:29] <pnkfelix> nmatsakis: I'm trying to tie the end off of the long-overdue syntax::visitor refactoring today.  I realized this morning that I could explore both the <V:Visitor>(&V) and the @Visitor approaches in parallel (within separate clones of the repo)
[15:13:49] <nmatsakis> pnkfelix: true. Also, I just pushed a big fix to objects, in particular ~ and & Objects
[15:13:54] <nmatsakis> not sure if that's relevant
[15:14:05] <nmatsakis> it *should* be that &Visitor works---
[15:14:10] <nmatsakis> though as you know I favor the <V:Visitor> approach
[15:14:16] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[15:14:16] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/lCHOWA
[15:14:17] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[15:14:18] <pnkfelix> heh
[15:14:33] <pnkfelix> well, while I could explore &Visitor as a  third option
[15:14:41] <pnkfelix> I think I'd prefer to stick to these two tacks.
[15:15:19] <pnkfelix> (where the goal would be: @Visitor stays as close as possible to the current code base, which is tricky given some of the bugs in @Traits, while <V:Visitor>(&V) is much more aggressive.)
[15:15:51] <pnkfelix> Whichever one I can finish porting all the existing oldvisit.rs uses over to, wins the opportunity to get code reviewed.  :)
[15:17:16] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[15:17:16] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/gLSGBQ
[15:17:16] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[15:17:16] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[15:17:16] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/uCYjcg
[15:17:16] <ghrust> 13rust/06auto 144fb37ed 15Tim Chevalier: docs: In rustpkg manual, note future plans about versions
[15:17:16] <ghrust> 13rust/06auto 1459434a1 15bors: auto merge of #8429 : catamorphism/rust/rustpkg-docs, r=catamorphism
[15:17:17] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[15:17:42] <nmatsakis> pnkfelix: funny thing is that the new visitor isn't really how I tihnk it ought to be done either ;) have you looked into porting the new visitor as well?
[15:18:29] <pnkfelix> nmatsakis: by "new visitor", you mean syntax::visit, right?
[15:18:44] <pnkfelix> nmatsakis: I've been treating that as my staging area for whatever changes I'm making
[15:18:50] <pnkfelix> nmatsakis: since so little uses it
[15:19:10] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[15:19:11] <pnkfelix> nmatsakis: so in one repo clone, syntax::visit has been changed to use <V:Visitor>(&V)
[15:19:54] <pnkfelix> nmatsakis: in another, syntax::visit is continuing to use @Visitor objects, but now with default methods.
[15:20:16] <pnkfelix> nmatsakis: in both cases, the "remaining task" is to port all existing syntax::oldvisit uses over to syntax::visit
[15:20:30] <nmatsakis> pnkfelix: I see
[15:20:36] <pnkfelix> nmatsakis: and along the way, I'm trying to keep tabs on how the code overall should be overhauled
[15:20:58] <cmr> Whoa, IteratorUtil was removed
[15:21:00] <pnkfelix> nmatsakis: e.g. some of the things we spoke over earlier, like whether to get rid of visit_expr_post
[15:21:01] <cmr> that's awesome
[15:22:02] <nmatsakis> k
[15:22:09] <nmatsakis> pnkfelix: yes I think there is no reason for that particular method
[15:22:18] <Seldaek> cmr: awesome why?
[15:22:41] <cmr> Seldaek: because it means default methods are solid and that we don't need silly helper traits anymore :)
[15:22:56] <Seldaek> ah I see ;)
[15:23:14] *** Joins: mib_s5lnn7 (Mibbit@8E6C34C1.A3F9767A.1C37C358.IP)
[15:24:39] *** Joins: maik (maik___@moz-122881CA.dip0.t-ipconnect.de)
[15:24:48] *** Quits: vk_ (chatzilla@moz-389FEE13.hsd1.ca.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 24.0/20130806170643])
[15:30:15] *** Quits: mib_s5lnn7 (Mibbit@8E6C34C1.A3F9767A.1C37C358.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:32:27] *** Quits: goffrie (goffrie@moz-A6D377FA.dsl.ncf.ca) (Ping timeout)
[15:32:53] *** Joins: goffrie (goffrie@moz-6A957472.dsl.ncf.ca)
[15:34:14] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[15:40:09] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[15:44:51] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[15:45:45] *** Joins: alisdair (textual@moz-6C03EBB2.eng.wind.ca)
[15:46:26] *** Quits: dforsyth (dforsyth@A677A619.1C765EF.EE6E63A5.IP) (Quit: Lost terminal)
[15:47:15] *** Joins: dforsyth (dforsyth@A677A619.1C765EF.EE6E63A5.IP)
[15:48:34] *** Joins: threecreepio (jdp@moz-43FB9668.cust.bredbandsbolaget.se)
[15:49:10] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:49:12] *** Quits: salladsfisk (Mibbit@moz-75021C1C.cse.chalmers.se) (Quit: http://www.mibbit.com ajax IRC Client)
[15:49:36] <huanghongqiao> bstrie, i see
[15:50:58] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[15:51:09] *** Quits: dherman (dherman@7863A936.5761062E.DAF2E6B4.IP) (Quit: dherman)
[15:51:23] *** Joins: FDS (Mibbit@moz-CE4D5907.bdx.modulonet.fr)
[15:53:12] *** Quits: FDS (Mibbit@moz-CE4D5907.bdx.modulonet.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[15:53:14] <bstrie> huanghongqiao: sorry :( if you really want to learn a new language, might I suggest Julia? http://julialang.org/ I bet they have better numeric support right now
[15:55:41] <Seldaek> klutzy: ok cool, win64 is oft forgotten :)
[15:57:03] *** Quits: milinda (milinda@moz-A7272ABE.dhcp-bl.indiana.edu) (Input/output error)
[15:58:22] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[15:58:57] <bstrie> rusti: ifmt!("{foo} {1} {bar} {0}", 0, 1, foo=2, bar=3)
[15:58:58] -rusti- ~"2 1 3 0"
[15:59:01] <bstrie> still so cool
[15:59:14] <engla> nice
[16:00:25] <huanghongqiao> bstrie: it It does not matter
[16:02:16] *** Quits: fabiand (fabiand@moz-3CFA323F.adsl.alicedsl.de) (Quit: Verlassend)
[16:02:42] *** Joins: brianm (brianm@moz-9B7D279E.dsl.static.sonic.net)
[16:05:57] <engla> no comments on the PR for lexical order
[16:06:16] *** Quits: erick (erick@E1304535.2A7189BF.BE19388.IP) (Ping timeout)
[16:06:29] *** Quits: alisdair (textual@moz-6C03EBB2.eng.wind.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[16:07:07] *** Quits: maik (maik___@moz-122881CA.dip0.t-ipconnect.de) (Ping timeout)
[16:07:29] *** Joins: erick (erick@E1304535.2A7189BF.BE19388.IP)
[16:07:51] <engla> this one: https://github.com/mozilla/rust/pull/8400
[16:08:13] <bstrie> engla: are you blake-ppc?
[16:08:16] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[16:08:18] <engla> yes
[16:08:31] <bstrie> that's another correlation that I'll never remember :P
[16:08:47] * bstrie only just begun to remember that dbaupp=huonw
[16:08:59] <engla> yes, I'm sorry
[16:09:24] *** Quits: huanghongqiao (Mibbit@F3ADC85B.D9DB03AE.ABA4ADC1.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:09:27] <bstrie> and you should be! I'm terrible enough at names without people having dozens of them :P
[16:10:45] <bstrie> even worse, every time I see your github name I just feel like playing mechwarrior
[16:10:54] <bstrie> which is highly unproductive
[16:10:59] <engla> I don't have that problem
[16:12:13] <bstrie> let me see if I'm qualified to comment on this pr
[16:12:14] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[16:12:20] <engla> yay
[16:12:22] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Client exited)
[16:12:45] * bstrie googles "lexicographical"
[16:12:54] * bstrie googles "ordering"
[16:13:04] * cmr googles "sequences"
[16:13:05] <cmr> ;P
[16:13:10] * bstrie googles "of"
[16:13:19] * cmr looks
[16:13:24] <bstrie> where am I
[16:13:27] <Seldaek> bstrie: indeed there should be a central naming authority enforcing that everyone has a unique name and then you'd be forced to use that every where. I kinda use twitter for that (remembering people's twitter handle but not their real names..), but sadly some anarchists don't respect the rule :p
[16:13:47] <bstrie> those kooky anarchists
[16:14:00] <bstrie> you might even say they're
[16:14:07] <bstrie> polynomial 8|
[16:14:11] <Seldaek> haha
[16:14:16] <cmr> heh
[16:14:21] *** Joins: mib_6dh2hg (Mibbit@F3ADC85B.D9DB03AE.ABA4ADC1.IP)
[16:14:59] *** Quits: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net) (Quit: echristo)
[16:15:53] <mib_6dh2hg> i want to use the str module, and i put the "use str" in first line ,but i got the error:"error: unresolved import (maybe you meant `str::*`?)"
[16:16:02] <mib_6dh2hg> help me
[16:16:03] <cmr> mib_6dh2hg: `use std::str;`
[16:16:21] <bstrie> yep, you have to tell it that you're looking in the stdlib
[16:16:26] <bstrie> as opposed to a different external lib
[16:16:42] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[16:18:03] <mib_6dh2hg> yes , your are right, thanks you
[16:18:12] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[16:20:52] *** Quits: doomlord_ (servitor@moz-13E69BC8.range86-180.btcentralplus.com) (Quit: Leaving)
[16:21:13] *** Joins: doomlord_ (servitor@moz-13E69BC8.range86-180.btcentralplus.com)
[16:21:26] *** Joins: jorendorff (jorendorff@moz-1747FB68.hsd1.tn.comcast.net)
[16:21:34] *** Joins: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:22:13] *** Quits: jaen (jaen@moz-DA4E5F8A.neoplus.adsl.tpnet.pl) (Ping timeout)
[16:23:17] <mib_6dh2hg> i found some one write code @~str, who can explain this
[16:23:41] *** Joins: FDS (arnaud@moz-CE4D5907.bdx.modulonet.fr)
[16:24:17] <FDS> hello
[16:24:24] *** Quits: reyre (reyre@B2D8AB09.33EE9F8A.1139E686.IP) (Quit: Konversation terminated!)
[16:24:57] <cmr> mib_6dh2hg: http://static.rust-lang.org/doc/tutorial.html
[16:25:08] <bstrie> FDS: hello
[16:25:21] *** Joins: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com)
[16:25:32] <FDS> I'm in trouble with rust, is there the good place for help ?
[16:25:36] <bstrie> mib_6dh2hg: any code that uses @~str is probably terrible
[16:25:40] <cmr> FDS: you're in it!
[16:26:21] <FDS> I'm trying to make 2 pointer to the same array but not at the same index
[16:26:27] <FDS> and I fail
[16:26:38] <engla> cmr: ok thanks for your comment. I should underline maybe that it will require Eq + Ord (previously only Ord) for implementing Ord on tuples and [] etc
[16:27:07] <cmr> engla: that's fine to me
[16:27:08] <engla> haskell already does that (Ord inherits Eq)
[16:27:09] <mib_6dh2hg> cmr: i have seen this tutorial
[16:27:12] <cmr> maybe others will have more concern
[16:27:22] <engla> yeah. I don't think there is much we can do
[16:27:23] <cmr> FDS: you want to be using a slice.
[16:27:42] <FDS> errr
[16:27:54] <engla> cmr: as you pointed out, using  !(a < b) && !(b < a)  for  equal is not valid. We have to use == / !=
[16:27:55] <bstrie> FDS: this should work: https://gist.github.com/bstrie/6212518
[16:28:40] <FDS> hum *trying*
[16:28:41] <mib_6dh2hg> bstrie, i think so,  
[16:29:03] <bstrie> mib_6dh2hg: where is the code using it?
[16:29:33] <mib_6dh2hg> my friend's code
[16:30:01] <bstrie> mib_6dh2hg: well I apologize for calling your friend's code terrible :)
[16:30:14] <mib_6dh2hg> haha
[16:30:36] <mib_6dh2hg> i understand the c++  **, but i can't understand @~
[16:31:03] <FDS> @bstrie it works but I want to have mutable pointers 
[16:32:33] <bstrie> mib_6dh2hg: @~foo is a managed pointer (@) to a unique pointer (~) to foo
[16:33:07] <bstrie> mib_6dh2hg: I don't know C++ well, but it's vaguely something like shared_ptr<uniq_ptr<foo>>
[16:33:31] <mib_6dh2hg> bstrie: no mater, but i really can't understand @~, where place will it alloc
[16:33:50] <bstrie> mib_6dh2hg: @ always allocates in a task-local heap. ~ allocates in a global heap
[16:34:09] <bstrie> FDS: are you trying to fork/join some data?
[16:34:10] <nmatsakis> mib_6dh2hg: there will be 2 allocations
[16:35:07] <nmatsakis> FDS: what type is your array? `&mut [T]`? you might want to use the `split` method.
[16:35:12] <mib_6dh2hg> the first is managed heap, then point to exchange heap, right?
[16:35:18] <FDS> trying to do something like this : http://pastebin.com/kNLCz5Vt
[16:35:18] <bstrie> mib_6dh2hg: yep
[16:36:26] <FDS> errr... more http://pastebin.com/XX1g5pt6 than the previous
[16:36:32] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[16:36:41] <nmatsakis> FDS: right. try, "let (v1, v2) = tab.mut_split(1); let i0 = &mut v1[0]; let i1 = &mut v2[0];"
[16:36:50] *** Joins: Kruppe (user@moz-4DDA8AB8.uwaterloo.ca)
[16:36:52] <nmatsakis> FDS: it's a bit roundabout, but that's how the type system guarantees that the indices are disjoint.
[16:37:24] <nmatsakis> FDS: `mut_split` will give you two &mut slices, each to disjoint parts of the array (in this case, one from 0..1 and from from 1..)
[16:37:25] <FDS> humf... in fact in my real code, the indexes are more like i and i-1
[16:37:38] <nmatsakis> FDS: then `mut_split(i)`
[16:37:38] <FDS> in a for loop
[16:37:48] <FDS> *trying*
[16:37:50] *** Joins: mib_0u0a5u (Mibbit@AB27954A.310104CF.301675BC.IP)
[16:38:11] <mib_6dh2hg> thanks bstrie, thanks cmr, thanks nmatsakis
[16:38:42] <nmatsakis> FDS: you'll have to fiddle with the indices, but it should certainly be possible without much trouble. you can easily make a helper to fetch two arbitrary indices
[16:38:56] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[16:39:02] <mib_0u0a5u> what's the best way to find the docs for a given function? like "range"?
[16:39:33] <cmr> mib_0u0a5u: the search on http://seld.be/rustdoc/master/std/index.html works decently
[16:39:49] <nmatsakis> FDS: something like this https://gist.github.com/nikomatsakis/6212639
[16:39:59] <nmatsakis> FDS: then you can call "get2(my_array, i-1, i)
[16:40:07] <mib_0u0a5u> cmr: oh, that looks nice! thanks
[16:40:50] <mib_6dh2hg> good night , every body
[16:41:05] <FDS> nmatsakis : looks good, i'll try this
[16:41:08] <mib_6dh2hg>  everybody....
[16:42:10] <bstrie> good night!
[16:42:46] <nmatsakis> FDS: ok. heading out for a bit, hopefluly it works for you :) (I just updated gist btw, I had the return type wrong)
[16:43:18] <FDS> I saw ^^
[16:43:25] <bstrie> FDS: here's another example: https://gist.github.com/bstrie/6212681
[16:43:51] *** Joins: froystig (froystig@5A39C99E.352137A1.BCED17D.IP)
[16:43:58] <FDS> thanks
[16:44:54] *** Quits: mib_6dh2hg (Mibbit@F3ADC85B.D9DB03AE.ABA4ADC1.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:46:52] *** Quits: mib_0u0a5u (Mibbit@AB27954A.310104CF.301675BC.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:47:32] <FDS> seems to work, thanks a lot
[16:47:59] <FDS> but its a lot of work just for this little thing ^^"
[16:48:45] <bstrie> FDS: do you really need to have both pointers alive at the same time?
[16:49:23] <FDS> I think
[16:50:15] <FDS> It's for a back propagation algorithm for my neural network
[16:50:16] <bstrie> FDS: the problem is only because both pointers have the same scope
[16:50:48] <bstrie> FDS: if you introduce an artificial scope, the problem goes away
[16:51:21] <bstrie> FDS: see https://gist.github.com/bstrie/6212758 for an example
[16:51:54] <bstrie> braces delimit blocks, which have their own scopes
[16:52:11] <FDS> my real code : http://pastebin.com/K5hcmetG
[16:52:38] <FDS> It's a little complex
[16:52:49] *** Quits: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[16:53:27] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[16:53:39] *** Quits: threecreepio (jdp@moz-43FB9668.cust.bredbandsbolaget.se) (Ping timeout)
[16:54:31] <bstrie> FDS: I'll try and take a look at it after lunch :)
[16:54:38] <FDS> ^^
[16:55:59] *** Joins: threecreepio (jdp@moz-43FB9668.cust.bredbandsbolaget.se)
[16:58:05] *** Quits: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[16:58:08] *** Joins: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com)
[16:58:09] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[16:59:15] *** Quits: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com) (Quit: eatkinson)
[16:59:28] *** Joins: milinda (milinda@moz-A7272ABE.dhcp-bl.indiana.edu)
[17:00:16] *** Quits: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP) (Client exited)
[17:00:39] *** Joins: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com)
[17:01:08] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[17:01:34] *** Quits: StarLight (StarLight@moz-851AC4B3.dynamic.avangarddsl.ru) (Ping timeout)
[17:01:45] *** Joins: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com)
[17:02:31] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[17:02:41] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Quit: brb)
[17:02:55] *** Joins: ozten (ozten@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:04:36] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[17:05:17] *** Quits: ozten (ozten@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ozten)
[17:05:26] *** Joins: StarLight (StarLight@moz-F606CD03.dynamic.avangarddsl.ru)
[17:06:08] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:06:08] *** ChanServ sets mode: +o brson
[17:07:01] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[17:07:24] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[17:07:26] *** Joins: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:07:35] <olsonjeffery> brson: ping
[17:07:50] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[17:10:44] <brson> olsonjeffery: in a meeting for the next hour
[17:10:46] *** Quits: jorendorff (jorendorff@moz-1747FB68.hsd1.tn.comcast.net) (Quit: jorendorff)
[17:11:00] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[17:11:16] *** Joins: ozten (ozten@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:11:20] <olsonjeffery> here're our choices as far as file IO goes: 1) use uv_fs_* functions w/ callback (uses a libuv-controller threadpool), 2) use uv_fs_* w/ no callbacks (blocking/sync), 3) use uv_pipe_t+fd & uv_write/uv_read_start/stop api (doesn't always work on windows)
[17:11:27] <olsonjeffery> brson: something to think about. we can chat later.
[17:11:46] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[17:12:08] <cmr> olsonjeffery: my 2c: "doesn't always work on windows" isn't very nice
[17:12:16] *** Joins: graydon (Adium@A5087023.2354C43D.D8E68FF6.IP)
[17:12:16] *** ChanServ sets mode: +qo graydon graydon
[17:12:17] <brson> olsonjeffery: the first sounds the most promising. is there a downside besides paying for the threadpool?
[17:12:18] *** Joins: leonvv (leonvv@moz-7D83A5F1.ip.telfort.nl)
[17:12:37] <olsonjeffery> brson: currently 4 theads on *nix .. ~265 (?) on windows.. can be controlled via env var
[17:12:53] <olsonjeffery> libuv owns it, is totally out of the application's control
[17:12:56] <brson> olsonjeffery: do you know if it's a global pool or per-event loop?
[17:13:01] <olsonjeffery> per loop
[17:13:16] <toddaaro> does it initialize lazily?
[17:13:18] <olsonjeffery> and it's lazy
[17:13:24] <olsonjeffery> but there's no reaping
[17:13:29] <olsonjeffery> bnoordhuis wants to add reaping
[17:13:40] <olsonjeffery> he has a patch, but there're perf implications (some benches are faster, others slower)
[17:14:06] <brson> 256 extra threads per core is pretty awful :)
[17:14:22] <toddaaro> why the big *nix/windows split?
[17:14:22] <olsonjeffery> yeah i don't know if he was joking about that or what.
[17:14:55] <olsonjeffery> also his patch makes them "threadlets" w/ ultra small stacks whose lifetime is mostly spent sleeping in syscalls
[17:15:13] <olsonjeffery> anyways.. you have that meeting. we should reconvene at some point over in #libuv to ask more q's.
[17:16:05] *** Quits: brianm (brianm@moz-9B7D279E.dsl.static.sonic.net) (Quit: Leaving...)
[17:17:26] *** Joins: brianm (brianm@moz-9B7D279E.dsl.static.sonic.net)
[17:17:38] * graydon wandered in on a weird note I think. what's going on?
[17:17:53] <cmr> graydon: libuv file i/o
[17:18:00] *** Quits: brianm (brianm@moz-9B7D279E.dsl.static.sonic.net) (Quit: Leaving...)
[17:18:21] <cmr> rustdoc_ng is #4 on HN's frontpage
[17:18:37] <graydon> (guess: we're trying to figure out why our cycle time dropped by 1000s over the past week)
[17:18:38] <graydon> ah I see
[17:19:10] <cmr> graydon: I just started up my bencher again, on the 322 cached builds I have
[17:19:19] <cmr> hopefully any supermajor regression will show up
[17:19:58] <graydon> cmr: I think it's something odd about newrt. and maybe .. cumulative?
[17:20:02] * graydon scratches head
[17:20:05] <cmr> maybe
[17:20:30] *** Quits: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: Leaving)
[17:20:37] <cmr> Actually since nopt slowed down the most, maybe it's newrt just not running well without optimizations
[17:21:14] <cmr> and it was the testsuite that slowed down I think, irfy seems to show the build not causing problems
[17:21:22] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[17:22:50] <graydon> yes
[17:23:21] <graydon> something is seriously wrong though
[17:23:27] <graydon> I'm ssh'ed into the mac in question
[17:23:43] *** Joins: tchoma (tchoma@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:23:43] *** Quits: tchoma (tchoma@moz-BE33DA21.fw1.sfo1.mozilla.net) (Client exited)
[17:24:33] *** Joins: tchoma (tchoma@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:25:57] <brson> graydon: what build is slow?
[17:26:09] <cmr> mac-32-nopt is taking 3 hours
[17:26:11] <graydon> it's showing 4 running threads, 1 at max userspace, 3 at max _kernel_. I think. I'm unsure.
[17:26:20] <graydon> yeah, "stuff on mac4 in general"
[17:26:37] <bstrie> maybe we can just... not support 32-bit macs anymore :)
[17:26:43] <graydon> ugh
[17:26:54] <brson> 32-bit builds will be using much more stack now
[17:27:08] *** Joins: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP)
[17:27:16] <cmr> looks like mac-64-nopt passed it at 3hr31min
[17:27:39] <graydon> look, personal request: I need to not be the only person who regards performance issues as bugs rather than things to learn to live with / stuff to disable / workaround.
[17:27:42] <brson> there isn't a mac-32-nopt
[17:27:54] <graydon> it's really really tiring to play this role
[17:27:57] <graydon> morally
[17:28:00] <brson> graydon: um, sorry
[17:28:47] <graydon> brson: sorry, was responding to bstrie
[17:28:56] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:29:03] <cmr> brson: maybe I was confused, I recall seeing mac-32-nopt when looking into cycle time when writing TWiR
[17:29:07] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[17:29:13] <graydon> brson: I knew newrt was going to cause perf issues for a while, which is fine, but the thing to do about them is address them. they're just bugs. they will get fixed.
[17:29:14] <cmr> but it was like 1am, so who knows what I saw ;p
[17:29:59] <graydon> bstrie is not the only one who responds this way, and I didn't mean to call him out in particular. it's just a thing I find myself arguing too often in bugs and IRC
[17:30:04] <graydon> "it's too slow" means it's buggy
[17:30:19] <graydon> it does not mean "we should not have reasonable perf expectations for this task"
[17:30:39] <graydon> if we can't find the bug, it means our profilers are inadequate
[17:30:55] <graydon> that has to be the response sequence: perf => a bug => I can't find it => profilers are bad
[17:31:01] <graydon> _not_ perf => oh let's disable stuff
[17:31:35] <bstrie> graydon: my apologies, I didn't mean to imply that we should live with perf regressions. rather I was roundaboutly inquiring (as a non-mac user) whether or not anyone actually uses 32-bit macs anymore. I thought they all switched to x64 years ago
[17:31:37] *** Joins: mib_4p1svn (Mibbit@moz-79C8D45C.amazon.com)
[17:31:54] <graydon> they did
[17:32:14] <brson> linux-64-nopt went from 1h30 to 2h10
[17:32:18] <graydon> mac64-opt also regressed by almost the same amount
[17:32:19] <graydon> yeah
[17:32:29] <graydon> it's just a bug. we can find it and fix it.
[17:32:36] <cmr> (reboot the box?)
[17:32:37] <graydon> we can put in place temporary measures to relieve the pressure some also
[17:32:41] <graydon> but there's something wrong there
[17:32:45] <bblum> aaargh, check-stage0-std is broken again
[17:32:49] <mib_4p1svn> quick question...I just read that partial application isn't supported. Is it something that is not planned to be supported? 
[17:32:58] <graydon> mib_4p1svn: not planned
[17:33:06] <brson> linux-64-opt is still aroundu n45m
[17:33:11] <bblum> mib_4p1svn: just write |y| f(x,y)
[17:33:54] <graydon> bstrie: it's ok, I'm sorry this came out as directed-at-you, it's a much more general pattern
[17:34:08] <graydon> one I'm terrified we've taught ourselves as a community
[17:34:18] <graydon> we have a lot of good norms, as a group
[17:34:34] <graydon> but I'm worried "perf is not solvable" is something we've also internalized collectively
[17:34:45] <mib_4p1svn> bblum...as in fn(x){|y| my_fn(x,y) }
[17:34:58] <mib_4p1svn> sorry, I'm still in the exploration phase
[17:35:09] <toddaaro> brson: so the build time went from 90 to 130m? that is a huge difference!
[17:35:10] <brson> graydon: i don't see the mac64-opt regression. was around an hour and still is
[17:35:24] <sp3d> graydon: have you seen the paper about the Mio IO scheduler for GHC? they'd a very can-do attitude w/r/t perf there, was kinda refreshing
[17:35:42] <mib_4p1svn> I mean fn(y){|y| my_fun(x,y)}
[17:35:42] <cmr> brson: http://huonw.github.io/isrustfastyet/buildbot/all btw
[17:35:46] *** Joins: brendan (brendaneic@E908EF74.6BAC3F3B.56A6FAA.IP)
[17:35:51] <pnkfelix> graydon: I had thought it was more a matter of re-prioritizing performance work, at least among the internal devs.
[17:36:12] <bstrie> mib_4p1svn: if you have a function that's normally called like `bar(x, y)`, you can do something like `let foo = |y| bar(1, y); foo(2);`
[17:36:19] <pnkfelix> graydon: but admittedly the "community" is clearly broader than the core
[17:36:36] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[17:36:36] <brson> cmr: somehow removing C++ made perf worse? :-S
[17:36:42] <graydon> brson: test time went from 2200s => 2800s over the past week
[17:36:53] <graydon> in gradual steps
[17:37:02] <graydon> I actually think possibly mac4 has accumulated weird kernel state
[17:37:10] <graydon> and that as cmr suggested, rebooting it might help temporarily
[17:37:16] <graydon> but I want to figure out what's going on
[17:37:37] <mib_4p1svn> brstri thanks
[17:37:49] *** Joins: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:38:00] <bstrie> mib_4p1svn: you're the fourth person today to come in via mibbit :) are we linked from somewhere with lots of traffic?
[17:38:22] <mib_4p1svn> the rustlang homepage has a link which takes you mibbit
[17:38:24] <cmr> bstrie: the frontpage and wiki and reddit have mibbit links
[17:38:29] <bstrie> right
[17:38:38] <bstrie> I'm wondering how everyone's finding that link today
[17:38:39] <cmr> (also rustdoc_ng is #4 on HN right now)
[17:38:44] <bstrie> when I usually see like one mibbit person a week
[17:39:11] <brson> cmr: I'm having a hard time making out which graphs are which but it looks like the worst are mac-64-nopt, linux-64-nopt and linux-32-nopt?
[17:39:11] *** Joins: fabiand (fabiand@moz-3CFA323F.adsl.alicedsl.de)
[17:39:14] <mib_4p1svn> There was a post on HN today which made the front page about the new docgen...maybe that is where some of the traffic is coming from
[17:39:15] <toddaaro> brson: I'm planning on doing idle callback stuff today, are you free to discuss design with me after lunch?
[17:39:24] <cmr> brson: yup
[17:39:55] <brson> toddaaro: ok
[17:40:02] <toddaaro> brson: I have a few thoughts already, but I'm not intimately familiar with how they are implemented so they might be a bit off, I'll type up my thoughts on the issue
[17:40:04] <brson> I don't understand how removing C++ made perf worse ...
[17:40:14] <brson> it wasn't even used
[17:40:35] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[17:41:15] <mib_4p1svn> is partial application not planned because it belongs in a library? Breaks existing syntax/functionality? Or is there some other reason? 
[17:41:24] <graydon> brson: I don't think it did. I think each build has been more-or-less worse than the previous. I think it's accumulating state
[17:41:34] <graydon> brson: like OS-level
[17:41:50] <bstrie> mib_4p1svn: probably not planned because the workaround that I showed is fairly easy to perform
[17:42:02] <cmr> mib_4p1svn: How would partial application even be implemented? It's not something I can see being implemented with native code, not efficiently
[17:42:08] <graydon> mib_4p1svn: because it's inessential, there are other ways to accomplish the same thing, and it'd be Yet Another Thing.
[17:42:16] <brson> graydon: it looks pretty consistent to me. there was a big jump at that commit, especially on the 'compile' graph
[17:42:46] <mib_4p1svn> (btw cmr: rustdoc looks great)
[17:43:14] <graydon> brson: I'm not seeing that jump. which day / commit number?
[17:43:29] <cmr> graydon: e81e81f, pr #8387
[17:43:43] <cmr> It's the only huge jump on http://huonw.github.io/isrustfastyet/buildbot/all after the rt landed :p
[17:43:45] <graydon> mib_4p1svn: sorry, that's a big snappy; all I meant is that we're trying to limit scope at this point, not expand it.
[17:43:53] <cmr> (in the compile graphs, that is)
[17:44:42] <graydon> oh. I've not been looking at /all
[17:44:43] <graydon> sorry!
[17:45:06] <mib_4p1svn> no worries, I'm probably out of place as I'm still thinking of abstractions from other languages and wondering how I'd accomplish the same in rust. It'll probably take some time before I see things the "rust way", but I have to explore this to find out
[17:45:15] *** Joins: mschifer (Adium@moz-BBE3ABD.mv.mozilla.com)
[17:45:16] <graydon> I've been foolishly looking at the one that shows when I click the "buildbot" tab :)
[17:45:37] <cmr> graydon: yeah, that's the tab that makes us look good, as it doesn't show -all or -nopt builds
[17:45:47] <bstrie> mib_4p1svn: what languages are you familiar with? what about rust caught your attention?
[17:45:58] <graydon> mib_4p1svn: if "f(a,b,c)" is a function and you want the function that applies 10, 11 to the first two arguments, then "|x| f(10,11,x)" is the expression for that
[17:46:21] <graydon> mib_4p1svn: and "|x| f(10,x,11)" is the version that leaves the middle arg un-applied. etc.
[17:46:25] *** Joins: maik (maik___@moz-122881CA.dip0.t-ipconnect.de)
[17:46:28] <orshem> cmr: congrats on the new rustdoc!!
[17:46:29] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:46:36] <cmr> Congratulate Seldaek, not me!
[17:46:38] <orshem> can i give you a bot of feedback?
[17:46:43] <cmr> orshem: sure
[17:46:43] <orshem> *a bit
[17:46:56] <mib_4p1svn> bstrie: I've been wanting a close-to-the-metal language for a while, but I'm familiar with R, Clojure, Scala, and Haskell
[17:46:59] <kmc> perhaps partial application is confusing in a language with explicit memory management, because it hides even more the fact that you need to stash free variables somewhere
[17:47:04] <graydon> the language has lambda, and partial application is really just shorthand for a particular flavour of lambda
[17:47:15] *** abacus is now known as [a]bacus
[17:47:20] <strcat> graydon: can you clear the workspaces on the OS X snapshot bots?
[17:47:26] <brson> graydon: i'm going to try to figure out why removing c++ made perf worse instead of better
[17:47:41] *** Quits: fabiand (fabiand@moz-3CFA323F.adsl.alicedsl.de) (Quit: Verlassend)
[17:47:44] <strcat> graydon: tried to snapshot before but it failed twice :s
[17:47:48] <mib_4p1svn> thanks gradon, that clarifies a lot
[17:47:50] <graydon> strcat: sure
[17:47:56] <strcat> valgrind errors, but that's pretty odd
[17:48:08] <strcat> since nothing is wrong on auto
[17:48:16] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[17:48:48] *** Quits: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[17:48:49] <strcat> brson: did it actually switch anything to rust? the C++ was optimized whether or not it was a nopt build
[17:48:57] *** Joins: mihneadb (Mihnea@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:49:03] <cmr> strcat: no, that was an ealier pr
[17:49:25] <brson> strcat: that commit was supposed to do nothing but delete code. it should have made perf a little faster
[17:49:26] <cmr> or, should have been..
[17:49:47] <cmr> only the nopt builds jumped, so something weird happened
[17:50:07] <orshem> cmr: do the docs show private items? 
[17:50:11] *** Quits: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[17:50:32] <strcat> cmr: already sent an email about it, but something is iffy about the markdown rendering
[17:50:39] <strcat> maybe it's not pandoc like it's expected to be?
[17:50:47] <strcat> our doc comments are specifically pandoc markdown
[17:50:59] <cmr> orshem: they do for now, because resolve allows you to use private items (and that's dependended on for eg RWArc)
[17:51:02] <mib_4p1svn> brstri: I also like that rust has thought about concurrency from the beginning, and it looks like it will save me from some of the dumb mistakes I make in clojure
[17:51:06] <cmr> orshem: once that bug is fixed, we'll hide them again
[17:51:11] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[17:51:45] <cmr> strcat: yeah, it's using some nodejs markdown renderer right now
[17:51:46] <bstrie> mib_4p1svn: such as?
[17:51:50] <strcat> cmr: ah
[17:51:57] *** Quits: mihneadb (Mihnea@moz-BE33DA21.fw1.sfo1.mozilla.net) (Connection reset by peer)
[17:52:03] *** Joins: mihneadb (Mihnea@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:52:25] <kmc> mib_4p1svn: which ones?
[17:53:33] <orshem> cmr: also maybe it would be better not show full name of items like std::hash::Hash (and longer names) and instead on hover show the full name?
[17:53:34] *** Joins: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com)
[17:53:46] <cmr> orshem: that's probably better yeah
[17:55:08] *** Quits: milinda (milinda@moz-A7272ABE.dhcp-bl.indiana.edu) (Input/output error)
[17:55:47] <mib_4p1svn> I think it mostly has to do with the fact that it is an actor model of concurrency, which I find easier to understand. 
[17:56:35] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[17:59:31] <toddaaro> brson: github.com/mozilla/rust/issues/8340
[17:59:36] <toddaaro> brson: my design notes so far
[17:59:46] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[18:00:12] <toddaaro> brson: the tldr is that we use a single callback object in the scheduler struct, and use an atomic bool flag with CAS to figure out if we actually need to ping it
[18:00:20] *** Joins: reyre (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[18:00:52] <toddaaro> brson: so no extra allocation, no extra pings, and it should be memory safe despite the blatent cheating with SchedHandles each having a reference to a single callback object
[18:03:43] *** Quits: orshem (orshem@C5E06B1E.A5B6B765.E3D28531.IP) (Quit: Leaving)
[18:04:00] *** Parts: mib_4p1svn (Mibbit@moz-79C8D45C.amazon.com) ()
[18:04:04] <brson> toddaaro: this description seems to mix the idle and async callbacks, sugesting that the idle callback is registered from another thread, which can't happen. SchedHandles use async callbacks to wake up the scheduler remotely, for which you might use atomics to short-circuit, and idle callbacks are for running the scheduler locally
[18:04:31] *** Joins: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com)
[18:06:07] <brson> toddaaro: there are two distinct optimizations to make here: 1) stop running the idle callback so much and 2) stop firing async callbacks when they aren't needed
[18:08:51] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Quit: Leaving)
[18:09:44] *** Joins: milinda (milinda@DA212585.7CFC0820.51B6877.IP)
[18:10:32] *** Quits: mihneadb (Mihnea@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: Leaving)
[18:10:38] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[18:12:00] *** Joins: mihneadb (Mihnea@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:12:13] *** Joins: Home (chatzilla@moz-1D262194.dynamic.isp.telekom.rs)
[18:12:19] *** Joins: pcwalton (pcwalton@moz-4F2F08F2.datalock.co.nz)
[18:12:19] *** ChanServ sets mode: +o pcwalton
[18:13:58] *** Quits: ozten (ozten@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ozten)
[18:15:16] <bstrie> is `let ref x = 4;` the same as `let x = &4;` ?
[18:15:35] <bstrie> I've never before noticed that `ref` could be used in assignment
[18:16:01] <strcat> bstrie: yes
[18:16:10] <strcat> it's always just a pattern
[18:16:28] <bstrie> right, it just hadn't occurred to me
[18:16:42] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[18:16:42] <ghrust> 01[13rust01] 15thestinger merged 06master into 06snap-stage3: 02http://git.io/-Ug4vw
[18:16:42] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[18:17:26] <graydon> brson: here's where the mac is spending its time: https://gist.github.com/graydon/8b04420686a8b6ccce46
[18:18:18] <bstrie> FDS: did that code that you pasted earlier work? specifically I think `i+=1` should be `i-=1`
[18:18:23] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[18:18:35] <FDS> err... not yet tested
[18:18:38] *** Quits: BitPuffin (quassel@moz-7BB00EC9.bredband.comhem.se) (Ping timeout)
[18:19:02] <FDS> the project is here : https://github.com/FerarDuanSednan/RustNN
[18:19:35] <graydon> but: there are two out-of-control memchecks running there, and yes, they should have been killed long ago
[18:19:37] * graydon kills 'em
[18:20:04] <FDS> bstrie : you're right thanks
[18:20:21] *** Quits: maik (maik___@moz-122881CA.dip0.t-ipconnect.de) (Ping timeout)
[18:21:44] *** Quits: Home (chatzilla@moz-1D262194.dynamic.isp.telekom.rs) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0a2/20130812004004])
[18:22:00] *** Joins: Home (chatzilla@moz-1D262194.dynamic.isp.telekom.rs)
[18:22:36] *** Joins: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net)
[18:22:37] <bstrie> FDS: you can get rid of those while loops in favor of for loops, like https://gist.github.com/bstrie/6213509 but I think it might also be possible to use iterators directly rather than `range`
[18:22:51] <bstrie> mutability is a bit thorny in there, which is why I'm not sure
[18:23:11] *** Quits: pauls (pauls@moz-BFEF1F22.ccs.neu.edu) (Quit: Ignore me!!)
[18:23:38] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[18:24:00] <bstrie> FDS: also, sorry, I forgot to translate the comments back :P
[18:24:46] <FDS> bstrie: thank for the advises ^^
[18:25:01] *** Joins: ozten (ozten@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:25:03] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[18:29:29] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[18:29:56] <toddaaro> brson: ok, so idle and async are completely distinct?
[18:31:05] <toddaaro> brson: they seem to have the same purpose, is it just a different implementation?
[18:31:17] <nmatsakis> anybody started work on a snapshot recently? :)
[18:31:24] <cmr> nmatsakis: strcat just did
[18:31:42] <strcat> well I tried yesterday and hit valgrind errors on mac so...
[18:31:46] <strcat> don't expect much
[18:31:51] <toddaaro> brson: if so, it seems like both could share the flag and just work differently underneath
[18:33:39] *** Quits: Home (chatzilla@moz-1D262194.dynamic.isp.telekom.rs) (Ping timeout)
[18:34:14] <brson> toddaaro: they are distinct and they have different purpose: uv is single threaded and idle callbacks are for scheduling a callback from within the event loop to execute at a later time, every idle callback registered will be called. async callbacks are specifically for triggering the event loop to wake up from a different thread and multiple triggers of the same async callback may not necessarily end up firing multiple callbacks (they may be coalesce
[18:34:31] <brson> toddaaro: I'd prefer to optimize them seperately - there's no need to impose synchronization on idle callbacks
[18:35:03] *** Joins: Florob (Florob@moz-39532932.de)
[18:35:41] <toddaaro> brson: idle callbacks don't coalesce?
[18:36:07] <brson> toddaaro: they do serve a similar purpose within the scheduler in that they both trigger run_sched_once, that's true
[18:36:13] <brson> toddaaro: no idle callbacks don't have that behavior
[18:36:48] <toddaaro> brson: the thought is that there is only one thing that matters when making an idle or async callback, and that is if there is already one of either you don't need to register one at all because the scheduler will be "active" and notice the work
[18:36:58] <brson> understood
[18:37:04] <toddaaro> so if an idle callback is pending you can skip the async
[18:37:11] <bstrie> FDS: using iterators directly would look something like https://gist.github.com/bstrie/6213651 . Also I don't think that prec_layer actually needs to be mutable, but we still need to do the mut_split anyway
[18:37:29] <toddaaro> which could be a nice savings, but given that they are pretty different maybe we want a more complicated dance that poses less overhead for the idles
[18:37:52] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[18:38:23] <brson> toddaaro: yeah, it's not an obvious win because of the atomics needed for idles
[18:38:24] <FDS> bstrie: yes, it looks better, I've some difficulties with rust :D
[18:38:42] <bstrie> FDS: happy to help :)
[18:38:50] <brson> cmr: does rustdog_ng require upstream crates to already be built to work?
[18:39:32] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[18:39:43] <cmr> brson: yes, unfortunately.
[18:39:51] <cmr> no way to get around that and still have hyperlinking
[18:39:56] <cmr> because it needs to run resolve
[18:40:50] <cmr> I could add a "neutered" mode that doesn't do anything requiring rustc, just libsyntax, I think that'd work
[18:41:22] <toddaaro> brson: I'll ponder a better dance, there is very likely something that provides a similar effect with the async callbacks but doesn't impose overhead on idle callbacks
[18:41:35] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[18:41:47] <mitsuhiko> why can't I do for (&k, &v) in hashmap.iter() { â€¦ } but for (k, v) in hashmap.iter() { â€¦ } works?
[18:41:55] <mitsuhiko> the former gives me error: cannot move out of dereference of & pointer
[18:42:09] <cmr> mitsuhiko: exactly that: you can't move out of a borrowed reference
[18:42:24] <cmr> iterating over the hashmap like that yields references and doesn't consume the hashmap
[18:42:44] <bstrie> cmr: would move_iter() work, then?
[18:42:45] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[18:42:53] <cmr> if it's implemented, yes :p
[18:43:00] <mitsuhiko> cmr: i thought &foo just borrows?
[18:43:18] <cmr> mitsuhiko: no, in a pattern, &foo *removes* a layer of dereference
[18:43:23] <mitsuhiko> ah
[18:43:34] <cmr> (and ref adds a layer of indirection)
[18:43:44] <cmr> outside of patterns, yes.
[18:44:39] <mitsuhiko> oh, btw, the for loop does not check for the Iterator trait
[18:44:43] <mitsuhiko> is that intentional?
[18:44:58] <cmr> no, but it's not easy to fix
[18:45:03] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:45:12] <bstrie> right now it just calls .iter(), yeah?
[18:45:16] <kmc> so it just accepts anything with a .next() method?
[18:45:19] <cmr> kmc: yes
[18:45:21] <cmr> bstrie: no
[18:45:23] <bstrie> er, yeah
[18:45:23] <strcat> mitsuhiko: it's not intentional
[18:45:25] <bstrie> what kmc said
[18:45:35] <strcat> mitsuhiko: it was just implemented in the easiest way possible
[18:46:47] *** Quits: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[18:47:00] <mitsuhiko> I'm a huge fan of the new loops :)
[18:47:03] *** Joins: BitPuffin (quassel@moz-7BB00EC9.bredband.comhem.se)
[18:47:08] <sully> hn, so, I want to fix calling supertrait methods on packed objects
[18:47:12] <toddaaro> brson: do you know what the cost of firing an async callback is relative to a an atomic read+write?
[18:47:18] *** Joins: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net)
[18:47:19] <sully> and I need to decide what the best way to represent things are
[18:48:23] <nmatsakis> sully: "packed objects"? you just mean object types?
[18:48:38] <mitsuhiko> i suppose for i in [1, 2, 3, 4].iter() { â€¦ } will never work?
[18:48:49] <mitsuhiko> (value does not live long enough)
[18:48:50] <sully> yeah, object types
[18:49:00] <cmr> mitsuhiko: it should work eventually, I think
[18:49:13] <cmr> mitsuhiko: it's an rvalue lifetime thing, which is very vaguely defined atm
[18:49:22] <cmr> https://github.com/mozilla/rust/issues/3511
[18:49:56] <mitsuhiko> i'm absolutely impressed how well the type inference works with hashmaps btw
[18:50:10] <mitsuhiko> my mind does not yet comprehend how amazing that is :)
[18:50:13] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[18:50:13] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/uCYjcg
[18:50:13] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[18:51:04] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[18:51:12] <bstrie> mitsuhiko: how so?
[18:51:42] <mitsuhiko> i'm just impressed that i can do let mut h = HashMap::new(); h.insert(1, 2) and it works
[18:52:18] <brson> toddaaro: firing an async callback is a syscall to `write`
[18:52:21] <mitsuhiko> toying around with converting python patterns into rust and i barely ever have to add types :)
[18:52:31] <toddaaro> brson: ok, so avoiding those is really really good
[18:52:46] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[18:53:00] *** Quits: acrichto (acrichto@moz-69F2E428.ugrad.cs.cmu.edu) (Input/output error)
[18:53:01] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Connection reset by peer)
[18:53:15] <strcat> mitsuhiko: yep, mostly just in the function signatures until you run into a bug :)
[18:53:19] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[18:53:19] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rEnLig
[18:53:19] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[18:53:19] *** Joins: acrichto (acrichto@moz-17CABEB0.wv.cc.cmu.edu)
[18:53:22] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[18:53:22] <ghrust> 01[13rust01] 15bors pushed 10 new commits to 06auto: 02http://git.io/9yPsvw
[18:53:22] <ghrust> 13rust/06auto 145d9fd88 15blake2-ppc: Add std::iterator::order with lexical ordering functions for sequences...
[18:53:22] <ghrust> 13rust/06auto 14a2e3cdf 15blake2-ppc: extra::dlist: Use iterator::order for sequence ordering
[18:53:22] <ghrust> 13rust/06auto 14e0b0853 15blake2-ppc: std: Implement traits for the one-tuple...
[18:53:24] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[18:53:59] <mitsuhiko> error reporting is still weird though (expected x but found <VI1>) etc.
[18:54:52] <toddaaro> brson: I'm thinking something along the lines of "If the scheduler is "active" as checked by a check on a flag, async callback implementation becomes setting a different flag to DoAsync. Then when run_sched_once finishes, only in the case when it decides not to run an idle callback, it reads this flag and if it is set does an idle callback"
[18:55:05] <bstrie> mitsuhiko: isn't it obvious, the "I" in "VI1" means "integer" :P
[18:56:02] <toddaaro> brson: so there shouldn't be any overhead in the fast case when there otherwise would be an idle callback, as the atomic isn't checked just set in "relaxed" mode, but any async callbacks fired while the scheduler is active disappear in favor of an atomic write
[18:57:41] <toddaaro> brson: I'll have to talk with bblum to see if doing a relaxed set is zero cost like I think it is, and also confirm that it is safe to do relaxed
[18:58:12] <toddaaro> brson: the thought is that if you "miss" the scheduler running window it isn't a big deal at all, you just fire aysnc callback normally
[18:58:40] <bblum> toddaaro: sounds promising, though i don't grok the details yet
[18:58:42] <cmr> how often is the scheduler running that you *aren't* going to miss it?
[18:58:58] <toddaaro> bblum: I will have to write down psudeocode
[18:59:15] <cmr> (not saying it isn't a worthwhile optimization, just wondering how much of a benefit it will be)
[18:59:32] <cmr> I suppose it will help the benchmarks because they strain the scheduler
[18:59:55] <toddaaro> cmr: "scheduler running" is a bit wrong actually, it is both anytime the scheduler itself is going and anytime a task is being run by the scheduler
[19:00:01] <cmr> toddaaro: oh, ok
[19:00:13] <cmr> yeah that makes sense then :p
[19:00:13] <toddaaro> cmr: yea, we should come up with a useful word for this
[19:00:49] <toddaaro> there is the case of tasks running when executed by an IO callback, those wouldn't be in "scheduler active" mode
[19:01:54] *** Quits: tchoma (tchoma@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: tchoma)
[19:02:24] *** Quits: fzzzy (fzzzy@A5CBE5CF.A81CC6E.44FA8ED.IP) (Ping timeout)
[19:03:27] <brson> toddaaro: I am concerned that the scope here is getting pretty large. My immediate concern is to not run extra idle callbacks, and what you are proposing is to cut down on calls to 'write' on message sends
[19:03:40] *** Joins: Vert (quassel@moz-15870EF5.skybroadband.com)
[19:03:54] <brson> toddaaro: they seem like mostly seperate concerns to me
[19:04:52] *** Joins: brianm (brianm@moz-9D32AACD.hsd1.ca.comcast.net)
[19:05:42] *** Joins: fzzzy (fzzzy@A5CBE5CF.A81CC6E.44FA8ED.IP)
[19:06:17] *** Quits: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net) (Client exited)
[19:08:26] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[19:08:52] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[19:09:05] <brson> toddaaro: i'm not saying both aren't important concerns
[19:09:49] <graydon> brson: at least part of the problem is mac4 had 2 stale memchecks running on it soaking up kernel brains
[19:10:39] *** Quits: brianm (brianm@moz-9D32AACD.hsd1.ca.comcast.net) (Quit: Leaving...)
[19:10:45] <brson> "kernel brains" :)
[19:11:56] *** Joins: brianm (brianm@moz-9D32AACD.hsd1.ca.comcast.net)
[19:12:42] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[19:13:07] *** Quits: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[19:14:17] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[19:16:09] <strcat> mitsuhiko: btw, there's a FromIterator trait already (used by collect) so we're not that far from having generic literals
[19:16:58] <strcat> rusti: let map: std::hashmap::HashMap<int, int> = range(0, 10).zip(range(20, 30)).collect(); map.len()
[19:16:59] -rusti- 10
[19:17:17] <strcat> just missing a convenient way to write a generic literal
[19:17:49] <strcat> ~[] + consume_iter would be slower than necessary
[19:17:58] <cmr> "One of Rust's strengths compared to Python is that we can implement traits on adaptors and have generic methods." I should have put some more thought into the phrasing of that sentance before hitting send
[19:18:30] <bblum> brson: https://github.com/mozilla/rust/pull/8411 r again? The first 4 commits went stale, and I added a 5th one too.
[19:18:42] <strcat> more mail clients should have gmail's undo send ;P
[19:19:30] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[19:19:33] *** Joins: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com)
[19:20:29] <cmr> graydon: https://github.com/mozilla/rust/pull/8419 is hanging on the bots but I cannot reproduce at all.
[19:21:18] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[19:21:27] *** Joins: Florob (Florob@moz-39532932.de)
[19:22:25] <Florob> Is there a way to store a function (pointer) in a struct? And if so, how would one call it from within an impl?
[19:23:27] *** Quits: igl (igl@moz-B8CCB2D2.adsl.alicedsl.de) (Ping timeout)
[19:23:45] <strcat> (foo.bar)()
[19:23:56] <bblum> Florob: struct Foo { f: <closure type> }
[19:24:03] <bblum> and yeah you have to parenthesize like strcat says
[19:24:07] *** Joins: frogaincia (Mibbit@DD12015D.EBE2EE2B.C7CEC4ED.IP)
[19:24:35] *** Joins: igl (igl@moz-8916AB00.adsl.alicedsl.de)
[19:26:39] *** Joins: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[19:27:09] *** Quits: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com) (Quit: eatkinson)
[19:27:23] <Florob> That makes sense. Is #[deriving(Clone)] supposed to fail if I do that? It tells me Â«error: mismatched types: expected `&fn<no-bounds>(char, &fn<no-bounds>(char))` but found `&&'self fn<no-bounds>(char, &fn<no-bounds>(char))` (expected fn but found &-ptr)Â»
[19:27:31] * ecr spent 3 hours trying to debug an type error that turned out to be misspelling 'missile'
[19:27:35] <Florob> Which may just be me being to incompetent to specify <closure type>
[19:28:30] *** Quits: threecreepio (jdp@moz-43FB9668.cust.bredbandsbolaget.se) (Ping timeout)
[19:29:00] <bstrie> ecr: static type systems don't mess around
[19:29:32] <ecr> bstrie: I wrote 'missle' and never realized the 'i' was missing *facepalm*
[19:30:02] <ecr> and the typechecker just kept going on about "this method doesn't exist"
[19:30:10] <bstrie> not only do they demand that your programs be provably sound, they also demand that you have impeccable spelling
[19:30:34] <bstrie> if you use "it's" rather than "its" in a comment, it will also yell at you
[19:30:40] <bstrie> same for neglecting the oxford comma
[19:30:46] <ecr> that would be hilarious
[19:30:59] <ecr> if it required grammatically correct comments to compile
[19:31:02] *** Quits: brianm (brianm@moz-9D32AACD.hsd1.ca.comcast.net) (Quit: Leaving...)
[19:31:13] <ecr> we could power the world by the generated rage
[19:32:27] *** Joins: pauls (pauls@moz-BFEF1F22.ccs.neu.edu)
[19:32:43] <toddaaro> brson: they seem incredibly closely related to me - both are the mechanism to tell the scheduler to do something, and piggybacking async off of idle in some way would probably be the biggest perf improvement available
[19:32:57] <nmatsakis> Florob: actually I don't think it's possible to clone closure types,
[19:33:05] <toddaaro> brson: as right now we do a write() syscall on *every* message send over a pipe
[19:33:13] <toddaaro> well, no
[19:33:14] <nmatsakis> Florob: you may prefer `extern "Rust" fn` if you don't need closure data
[19:33:29] <toddaaro> we do a lot of the async callbacks
[19:33:54] <brson> toddaaro: they are closely related
[19:34:09] *** Quits: ozten (ozten@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[19:34:22] *** Joins: ozten (ozten@moz-BE33DA21.fw1.sfo1.mozilla.net)
[19:34:24] <nmatsakis> strcat: re: snapshot, I do need one, so let me know if you give up
[19:35:03] *** Joins: tchoma (tchoma@moz-BE33DA21.fw1.sfo1.mozilla.net)
[19:36:36] *** Quits: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[19:37:09] *** Quits: milinda (milinda@DA212585.7CFC0820.51B6877.IP) (Input/output error)
[19:37:11] <toddaaro> brson: what exactly is the "limited" idle callback only change you were thinking of?
[19:37:49] *** Joins: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com)
[19:38:01] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[19:38:45] <brson> graydon: part of the big work stealing regression is a huge bug in the rtdebug! macro, the fix for which hasn't landed yet
[19:38:48] <toddaaro> brson: it looks like we aren't making that many extra idle callbacks, we just need to remove the callbacks created when a task is resumed?
[19:38:51] <brson> graydon: https://github.com/mozilla/rust/pull/8419
[19:39:01] *** Quits: leonvv (leonvv@moz-7D83A5F1.ip.telfort.nl) (Client exited)
[19:39:21] <brson> graydon: the overhead from that bug is the top function in my profile
[19:39:53] <graydon> brson: yeah, cmr was asking about that
[19:39:58] *** Joins: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com)
[19:40:00] <graydon> it fails for some reason?
[19:40:04] <graydon> shall I try to diagnose?
[19:40:06] <brson> timeout :-/
[19:40:12] <brson> no, i'll try to build it here
[19:40:39] <graydon> which thing times out?
[19:41:30] <brson> alarmingly: compile_and_link: x86_64-unknown-linux-gnu/stage0/lib/rustc/x86_64-unknown-linux-gnu/lib/libsyntax.so
[19:41:35] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[19:41:35] *** ChanServ sets mode: +o tjc
[19:41:53] <brson> which seems kind of like nonsense
[19:42:11] <brson> maybe i should just retry
[19:42:38] <graydon> brson: maybe. or maybe just a macro definition weirdness. platform specific?
[19:43:14] <brson> the code in that patch *shouldn't* havy any effect on anything at that stage of compilation
[19:43:17] <brson> i'll try it here
[19:43:26] *** Quits: BitPuffin (quassel@moz-7BB00EC9.bredband.comhem.se) (Ping timeout)
[19:44:24] *** Joins: fabiand (fabiand@moz-3CFA323F.adsl.alicedsl.de)
[19:45:00] *** Joins: milinda (milinda@DA212585.7CFC0820.51B6877.IP)
[19:46:30] *** Quits: fabiand (fabiand@moz-3CFA323F.adsl.alicedsl.de) (Quit: Verlassend)
[19:46:56] *** Joins: robertknight (robertknig@moz-85C86086.range81-151.btcentralplus.com)
[19:47:00] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Quit: brb)
[19:47:09] *** Quits: DoomBoom (DoomBoom@6B14631A.ACEC7723.5D1D3FEF.IP) (Ping timeout)
[19:47:21] *** Joins: DoomBoom (DoomBoom@6B14631A.ACEC7723.5D1D3FEF.IP)
[19:47:23] <tjc> graydon: I'm probably late to the party, but did bug triage emails not go out today?
[19:47:41] <graydon> tjc: sigh no you're right I didn't see them either
[19:47:55] * graydon would love it if _one week_ would pass without half the automation falling over
[19:48:21] <graydon> at least this time it's just github's API failing again
[19:48:23] <graydon> nothing important!
[19:50:59] <kmc> did something change recently such that impl Ty { fn foo() { ... } }  (with no 'priv' or 'pub') would make foo private when it had been public?
[19:51:17] *** Joins: jviereck (Adium@moz-A034D4DA.dclient.hispeed.ch)
[19:51:50] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[19:52:01] *** Joins: xlq (ekselkiu@moz-DF73151C.net)
[19:52:16] <tjc> kmc: that should have been true for a while
[19:52:41] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[19:55:36] <xlq> I'm trying to translate a simple function from C to Rust: http://paste.debian.net/24437/  I suspect what I'm trying to do isn't possible.
[19:56:09] <nmatsakis> xlq: that is possible, you need Some(ref child)
[19:56:37] *** Quits: DoomBoom (DoomBoom@6B14631A.ACEC7723.5D1D3FEF.IP) (Quit: Leaving)
[19:56:42] <nmatsakis> xlq: and then the recursive step would be left_leaf(&**child) or, less explicitly, left_leaf(*ichld)
[19:56:51] *** Quits: ozten (ozten@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[19:57:10] <nmatsakis> xlq: without the `ref` keyword, the match will try to copy the data out of what you are matching,
[19:57:20] <nmatsakis> xlq: but in this case you want to create a pointer *into* the value being matched
[19:57:20] <xlq> Ooh, thank you so much! :D
[19:57:24] *** Joins: ozten (ozten@moz-BE33DA21.fw1.sfo1.mozilla.net)
[19:57:32] <nmatsakis> xlq: another option actually is Some(~ref child) => left_leaf(child)
[19:57:46] <nmatsakis> xlq: in that case, you are matching past the ~ pointer in the pattern itself. I prefer that myself.
[19:58:06] <nmatsakis> (but it's equivalent)
[19:58:33] <xlq> I have more reading to do then. :)  I tried that before but I think I didn't dereference, or something.
[20:00:04] <strcat> nmatsakis: so far so good, the mac test didn't fail where it did last time
[20:00:08] * strcat thinks it will work
[20:00:15] <kmc> it is surprising that you can dereference using ~ and &, in patterns.  it's correct, and makes sense with the general idea of pattern matching, but it's probably confusing coming from a C-ish background
[20:00:18] <brson> i do think that just  fixing rtdebug! is going to make a lot of this perf badness go away. it really is super bad
[20:00:30] <tjc> heh, I got the same bug for triage for the 3rd time :-)
[20:00:39] <strcat> kmc: pattern matching is surprising as a whole with a C background
[20:00:46] <brson> the trace i was just looking at does a bunch of exchange heap allocations for every local allocation
[20:00:59] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[20:01:27] <xlq> Dereferencing in a pattern is surprising to me because it's like a data destructor rather than a constructor.
[20:02:33] <strcat> that's what pattern matching is though, destructuring
[20:02:52] <strcat> it would be strange if it didn't have the same syntax as construction, since it's the reverse by definition
[20:03:46] <strcat> rusti: let x = (~5, 2); let (~y, z) = x; (y, z)
[20:03:47] -rusti- (5, 2)
[20:03:49] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[20:03:58] <strcat> our vector matching is a bit strange
[20:04:04] <strcat> since it's always via a slice
[20:04:45] <tjc> brson: how do I change the stack size?
[20:05:02] <bstrie> hm, I'm not sure how we're going to review the japanese-language translation PR
[20:05:09] <mcpherrin> Has anyone done dynamic loading of rust code?  I was considering doing a project in Rust but it'll need runtime loadable plugins.
[20:05:20] *** Quits: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[20:05:42] <brson> tjc: RUST_MIN_STACK
[20:05:47] <tjc> brson: thanks
[20:06:15] <brson> mcpherrin: there's some code for it in std::unstable::dynamic_lib
[20:06:34] <tjc> mcpherrin: I know dbaupp was working on that at one point
[20:06:45] <tjc> also, https://github.com/mozilla/rust/issues/458 is still open
[20:06:59] *** Quits: pcwalton (pcwalton@moz-4F2F08F2.datalock.co.nz) (Quit: pcwalton)
[20:07:35] <mcpherrin> Okay, thanks.  I'll take a look :)
[20:08:00] <mcpherrin> I have some silly ideas about writing a "script"able text editor
[20:08:17] <tjc> brson: what's the default minimum stack size?
[20:08:57] *** zz_kimundi is now known as kimundi
[20:09:01] <brson> tjc: 2MB, but 6MB in rustc
[20:09:07] <tjc> brson: Ok, cool
[20:09:37] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[20:09:39] <toddaaro> brson: looking at the IdleWatcher code, how come uvio.rs has the fn callback definition using it as "do idle_watcher.start |mut idle_watcher, status|" when the definition of IdleWatcher's .start only takes two arguments: fn start(&mut self, cb: IdleCallback)
[20:09:50] <toddaaro> brson: where does this "status" argument come from?
[20:10:06] <robertknight> If I have an '&mut T' where T is something implementing a trait, is it possible to call trait methods on it that are implemented for T (not &T)? (*var).method() works but tries to move the value.
[20:10:24] <tjc> robertknight: Yes, but the method would have to take a &mut self...
[20:10:34] <tjc> robertknight: or, you need to be able to move the value, as you saw
[20:10:48] <tjc> robertknight: if it takes a &mut self, then you can write var.method()
[20:11:00] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[20:11:12] <toddaaro> brson: oh, type def in mod.rs
[20:11:12] <olsonjeffery> brson: i misspoke about the libuv threadpool.. it's global to the process
[20:11:24] <robertknight> tjc: Thanks, context is https://gist.github.com/robertknight/29ac5af892dd7a379e4a - I'm trying to take N elements from an iterator in a method and then do something else with the rest.
[20:11:31] <strcat> brson: I'm wondering if it would help to special-case stack closures without an environment to take the extern fn code path
[20:11:37] <brson> olsonjeffery: nice!
[20:11:38] <strcat> it would take 4 words off the stack for each one
[20:11:52] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[20:11:52] <olsonjeffery> brson: yeah.. my original approach was using uv_fs_* + callbacks.. so ill keep on w/ that
[20:11:55] * strcat thinks that's one of the big causes of the stack bloat
[20:12:09] <strcat> ofc we still generate a ridiculous number of allocas in general
[20:12:38] <tjc> robertknight: Hmm, where does take_ come from?
[20:12:51] <strcat> it's called take now, btw
[20:12:58] <robertknight> This is rust from last week
[20:12:58] <strcat> thanks to default methods we can sidestep that method resolve bug
[20:12:59] <tjc> ah, I suspected that
[20:13:12] *** Quits: mihneadb (Mihnea@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: Leaving)
[20:13:15] <xlq> Stack bloat? :o
[20:13:17] <strcat> rusti: range(0, 10).map(|x| x * 2).take(3).to_owned_vec()
[20:13:18] -rusti- ~[0, 2, 4]
[20:13:20] <tjc> robertknight: Yeah, take is a method that takes its `self` argument by-value, so you have to own `iter` here
[20:13:27] *** Joins: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:13:32] <strcat> xlq: rust relies a lot on LLVM's optimization passes
[20:14:07] <strcat> with optimizations, you get the same performance as C++ with equivalent code (or in some cases 10-15% slower, when there are real perf bugs)
[20:14:10] <robertknight> tjc: Ah, it just dawned on me that take() moves the iter into the Take<Self>
[20:14:13] <strcat> but without, it's ridiculously slow
[20:14:28] <tjc> robertknight: exactly
[20:14:39] <strcat> the compiler generates convenient but wasteful LLVM bytecode
[20:14:59] <xlq> Ah, hmm.
[20:15:01] <tjc> robertknight: intuitively, take moves rather than copying; so it has to consume the iterator it's taking as an argument in order to move its elements out into the data structure it returns
[20:15:07] <tjc> (actually, I'm not sure if that was any more helpful :-)
[20:15:31] <Florob> "error: mismatched types: expected `[type error]` but found struct" â™¥
[20:15:44] <strcat> robertknight: yeah, we plan on adding something like by_ref
[20:15:46] <strcat> so you could do...
[20:15:47] <tjc> Florob: that's a typechecker bug, if you could paste the code or submit an issue, that would be great
[20:15:56] <strcat> it.by_ref().take(3)
[20:15:58] <tjc> strcat: yeah, I was surprised to not see a by-ref take
[20:16:02] <strcat> and then still use `it` when you're done
[20:16:13] <strcat> the problem with by-ref is that you can't chain it
[20:16:25] <strcat> you need a temporary between each adaptor
[20:16:39] *** Quits: FDS (arnaud@moz-CE4D5907.bdx.modulonet.fr) (Ping timeout)
[20:16:42] <robertknight> I suppose what I want is to 'get back' the iterator after Take is done with it
[20:16:55] <strcat> robertknight: well, a by_ref adaptor would do what you want
[20:16:58] <strcat> it's easy to write yourself
[20:17:00] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[20:17:00] *** ChanServ sets mode: +o dherman
[20:17:13] <strcat> have it take an iterator by &mut, and store it that way
[20:17:14] <strcat> and impl Iterator
[20:18:10] <strcat> 'expected type parameter but found type parameter' is the best error ;p
[20:18:43] <eatkinson> question: i have a trait in a module that requires a method add_child, and an object in another module that doesn't implement the trait, but has a method add_child
[20:18:56] <eatkinson> how can i use both the trait and struct in the same file?
[20:19:29] *** Joins: mihneadb_ (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:19:45] *** Quits: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Connection reset by peer)
[20:20:06] <Florob> tjc, http://q.zash.se/f315e810.txt
[20:20:11] *** Quits: Earnestly (earnest@B0BDF733.8FDE20A.5411983D.IP) (Ping timeout)
[20:20:30] <tjc> Florob: Thanks, I'll take a look
[20:20:37] *** Joins: Earnestly (earnest@B0BDF733.8FDE20A.5411983D.IP)
[20:21:09] *** Quits: robertknight (robertknig@moz-85C86086.range81-151.btcentralplus.com) (Ping timeout)
[20:23:02] *** Quits: Ms2ger (Ms2ger@moz-E9883900.access.telenet.be) (Quit: nn)
[20:26:12] <graydon> dbaupp: ping
[20:27:33] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Connection reset by peer)
[20:29:05] *** mihneadb_ is now known as mihneadb
[20:29:07] *** Joins: jgilbert_ (jgilbert@moz-7B0110AD.mv.mozilla.com)
[20:29:11] *** Quits: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:31:13] <graydon> brson: building that PR locally seems to work.
[20:31:22] <graydon> brson: did the PR or the merge-of-the-PR hang? which platform?
[20:31:31] <graydon> (cfg!(debug) rtdebug thing)
[20:31:47] <strcat> linux 64 nopt iirc
[20:31:59] <graydon> oic
[20:32:01] <graydon> nopt
[20:32:02] <graydon> hmmm
[20:33:00] *** Joins: tautologico (lymph@8ABDEDA.34CAB63A.7B974E06.IP)
[20:33:04] <brson> graydon: the merge hanged
[20:33:16] <graydon> restarted here. that'll take long enough to make getting lunch worthwhile. :)
[20:33:18] <brson> i told bors to retry it anyway
[20:33:20] <graydon> sure
[20:33:31] *** Joins: wilmoore (wilmoore@moz-1248C037.mystrotv.com)
[20:33:36] *** Joins: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net)
[20:37:17] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[20:37:59] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[20:39:59] *** Joins: brianm (brianm@moz-9B7D279E.dsl.static.sonic.net)
[20:40:38] *** jgilbert_ is now known as jgilbert
[20:40:57] *** Quits: milinda (milinda@DA212585.7CFC0820.51B6877.IP) (Input/output error)
[20:41:27] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[20:41:48] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[20:42:09] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[20:42:33] *** Joins: rustyPipe (Mibbit@moz-5949C51B.dllstx.fios.verizon.net)
[20:43:02] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:43:12] <gandalf> I hit internal compiler error while updating servo - http://pastebin.mozilla.org/2841556
[20:43:29] <gandalf> is there any more verbose log to attach to issue that I'm about to file?
[20:44:18] <toddaaro> http://pastebin.mozilla.org/2841557 I am getting build errors using master, anyone have ideas?
[20:44:27] <toddaaro> this pops up after make clean; make; make check-stage0-std
[20:44:38] <toddaaro> something about a duplicate entry for `str_eq` and it dies
[20:44:48] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:44:59] <toddaaro> last commit I have is something from catamorphism this morning
[20:45:24] <toddaaro> I think I've rebuilt llvm today
[20:46:04] <toddaaro> is there any local state not dealt with in a make clean?
[20:46:23] *** Joins: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu)
[20:47:16] *** Quits: maxli (maxli@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Leaving.)
[20:47:31] <strcat> toddaaro: it doesn't clean away LLVM
[20:47:33] <tjc> toddaaro: if you want to make really clean, you can delete the build directory
[20:47:34] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[20:47:38] <tjc> that will force you to rebuild LLVM, though
[20:47:41] <strcat> well you can also use git clean
[20:47:53] <toddaaro> what is git clean? that sounds more vc related
[20:47:56] <strcat> assuming you did it in-tree
[20:48:02] <strcat> toddaaro: clears anything that's not version controlled
[20:48:13] <toddaaro> hm
[20:48:51] *** Quits: victorporof (victorporo@DBFC8886.2203F6DA.D111398B.IP) (Quit: victorporof)
[20:48:55] <toddaaro> I'll give it another full go and hope fourth time is the charm, then I guess delete the build directory
[20:50:36] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[20:51:55] *** Quits: tchoma (tchoma@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: tchoma)
[20:53:40] *** Joins: pcwalton (pcwalton@E2F7352.56080C53.97BBD552.IP)
[20:53:40] *** ChanServ sets mode: +o pcwalton
[20:57:05] *** Quits: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu) (Quit: Leaving)
[20:58:06] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:00:43] *** Quits: ozten (ozten@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[21:01:29] *** Quits: rustyPipe (Mibbit@moz-5949C51B.dllstx.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:01:31] *** Joins: ozten (ozten@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:03:27] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[21:03:27] *** ChanServ sets mode: +o dherman
[21:07:24] *** Joins: rustyPipe (Mibbit@moz-5949C51B.dllstx.fios.verizon.net)
[21:08:14] *** Joins: tchoma (tchoma@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:08:17] <rustyPipe> Does anyone know how to convert the return type of the method from_base64 to a ~str?
[21:09:33] <Seldaek> rustyPipe: .to_owned() or .unwrap() I'd think, depending on what you call it
[21:09:53] <rustyPipe> Let me try that
[21:10:28] <rustyPipe> Where's .unwrap() defined in?
[21:10:40] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Ping timeout)
[21:10:49] <toddaaro> http://pastebin.mozilla.org/2841728 a paste with my crash, the same one, full output from "make clean; make; make check-stage0-std"
[21:10:56] <toddaaro> will delete my build dir now
[21:10:58] <Seldaek> rustyPipe: what's your code exactly? 
[21:12:25] <rustyPipe> Here's a gist of it: https://gist.github.com/anonymous/6215308
[21:13:22] <toddaaro> it is super weird as it looks like it builds stage2 without errors
[21:13:23] *** flaper87 is now known as flaper87|afk
[21:13:26] <toddaaro> then errors out on stage0
[21:13:46] *** Joins: Jesin (Jessin_@moz-1B1307FF.eecs.lehigh.edu)
[21:14:33] <rustyPipe> Does anyone know where the method .unwrap() is defined in?
[21:15:03] <strcat> for which type?
[21:15:06] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[21:15:11] <strcat> there are many unwrap methods
[21:15:34] <Seldaek> rustyPipe: it should be on Result/Option for str, but doesn't it work if you just add it to line 11 there after to_base64(STANDARD).unwrap() ?
[21:15:59] *** Quits: jviereck (Adium@moz-A034D4DA.dclient.hispeed.ch) (Quit: Leaving.)
[21:17:26] *** flaper87|afk is now known as flaper87
[21:17:44] <rustyPipe> Seldaek: What do you mean? If I add that method at the end of the line, the source won't compile, because ~str does not implement any method named unwrap
[21:18:42] <Seldaek> rustyPipe: oh, then you get a ~str already.. maybe I don't get your problem :)
[21:20:17] <brson> graydon: i can't reproduce the timeout on cmr's patch
[21:20:20] <Seldaek> rustyPipe: I mean the code seems to compile and run fine, so what's the matter?
[21:21:03] <rustyPipe> No, there's no matter with it now because you suggested that I add a .unwrap at the end of the expression within the else clause (btw, thanks for that)
[21:21:21] <Seldaek> ah ok :)
[21:21:34] <rustyPipe> I didn't know that you had to do that previously
[21:21:52] <rustyPipe> I tried type casting, but I got an error of trying to perform a non-scalar cast
[21:21:54] <Seldaek> yes, you should in theory check for error though
[21:22:15] <Seldaek> if you .unwrap() and the from_hex or from_base64 call failed because the input was invalid, you'll get a failure
[21:22:59] <rustyPipe> Yeah, now I have to check whether or not if the string contains hex or base64 characters, or just plain characters
[21:23:40] <rustyPipe> Then move the conversion of the input string to base64 within an else if clause
[21:24:57] *** Quits: ozten (ozten@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ozten)
[21:25:01] *** Joins: ozten (ozten@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:25:03] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[21:25:27] <rustyPipe> So std::char::is_digit_radix fails if passed in a radix greater than 36?
[21:26:57] <Seldaek> do you really need more?
[21:29:10] <engla> it wouldn't be appropriate for base64 anyway rustyPipe 
[21:29:12] * sully tries rewriting one of the closure based iterators in rustc as an external iterator
[21:29:31] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Quit: Ex-Chat)
[21:29:37] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[21:29:39] *** Quits: brendan (brendaneic@E908EF74.6BAC3F3B.56A6FAA.IP) (Quit: brendan)
[21:29:44] *** Quits: ozten (ozten@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[21:29:50] <rustyPipe> Yeah, I know, but I'm a beginner with this
[21:30:09] <graydon> brson: me either. works here.
[21:31:39] <brson> i really want to get that merged before digging too much deeper because it's going to change things a lot, but I am still digging into why removing C++ had such a bad effect - trying to get profiles to compare
[21:31:45] <toddaaro> bleh!
[21:32:02] <toddaaro> deleted my build directory and I still can't do make check-stage0-std
[21:32:03] *** Joins: ozten (ozten@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:32:06] <toddaaro> new checkout I guess
[21:32:12] *** Quits: ozten (ozten@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ozten)
[21:32:35] *** Joins: ozten (ozten@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:33:01] <strcat> mac snapshot is still going >.<, although at least I know it's not going to hit that failure now...
[21:33:47] <brson> toddaaro: check-stage0-std is broken for me too. it looks like it's due to change that involves #[cfg(stage0)]
[21:34:04] <brson> snapshot-requiring changes sometimes break things in stage0
[21:34:08] <toddaaro> brson: urgh
[21:34:15] <toddaaro> brson: so I just don't use check-stage0-std?
[21:34:18] <brson> perhaps the build for make check-stage0-std should actually be passing --cfg stage1
[21:35:48] <brson> actually i'm not quite sure why this is broken
[21:36:11] <brson> oh yeah, it's wrong
[21:36:12] <strcat> you can do 'rustc --cfg stage2 --test std.rs' instead of using make (as long as you have a recent one around)
[21:36:19] <strcat> we don't test stage0 tests
[21:36:23] <strcat> so they're nearly always broken
[21:36:40] <brson> it's declaring a lang item only when #[cfg(test, stage0)] which is bogus
[21:36:47] <brson> shouldn't be declaring lang items specifically for stdtest
[21:36:49] *** Quits: Kruppe (user@moz-4DDA8AB8.uwaterloo.ca) (Ping timeout)
[21:37:19] <strcat> snapshot finished \o/
[21:37:22] <bblum> brson: toddaaro: oh yeah i opened an issue about this
[21:37:32] <bblum> https://github.com/mozilla/rust/issues/8470
[21:38:41] <strcat> brson: https://github.com/mozilla/rust/pull/8476 r?
[21:39:15] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[21:39:40] <brson> this stage0 problem will be fixed by strcats pr
[21:40:38] *** Joins: Azdle (Azdle@moz-B334B496.hfc.comcastbusiness.net)
[21:42:42] <pcwalton> oh hey, someone translated the tutorial into Japanese
[21:42:57] <tjc> sully: r? https://github.com/mozilla/rust/pull/8477
[21:44:33] <pcwalton> hmm looks very incomplete
[21:44:58] <strcat> in my experience that's usually how i18n is ;P
[21:45:35] *** Quits: froystig (froystig@5A39C99E.352137A1.BCED17D.IP) (Quit: leaving)
[21:45:54] <sully> tjc: looking
[21:45:56] * strcat has dealt with a lot as part of being an administrator of the arch linux wiki
[21:46:39] <strcat> tbh it doesn't seem like a good idea to put the translations in the repo
[21:47:00] <strcat> it requires too much churn
[21:47:13] <strcat> 1 PR editing the tutorial -> 1 PR per language
[21:47:25] <strcat> needs something more wiki-like
[21:48:19] *** flaper87 is now known as flaper87|afk
[21:49:59] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[21:50:46] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[21:50:46] *** Quits: wilmoore (wilmoore@moz-1248C037.mystrotv.com) (Connection reset by peer)
[21:50:51] *** Joins: wilmoore (wilmoore@moz-1248C037.mystrotv.com)
[21:51:01] <ecr> do we have pattern guards?
[21:51:06] <bblum> yes
[21:51:11] <ecr> syntax?
[21:51:15] *** Quits: heftig_ (heftig@moz-2A65ED5.dip0.t-ipconnect.de) (Ping timeout)
[21:51:19] <bblum> take a guess, you'll be right
[21:51:32] <graydon> <pat> if <expr> => 
[21:51:54] <tjc> bblum: you won't be right if your guess is the Haskell syntax for them :-)
[21:52:04] <bblum> tjc: i suppose
[21:52:17] <ecr> <== Haskeller
[21:52:22] <ecr> thanks
[21:52:48] <graydon> more "where" clauses!
[21:52:54] *** Joins: froystig (froystig@5A39C99E.352137A1.BCED17D.IP)
[21:53:00] <bblum> wereclauses
[21:53:04] <strcat> and `otherwise`, ofc
[21:53:19] <tjc> it's <pat> | <expr> => in Haskell
[21:53:28] <strcat> rusti: fn otherwise() -> bool { true } // look, we're haskell now
[21:53:32] -rusti- ()
[21:53:32] <kmc> "pattern guards" in Haskell mean something different than just putting guards on patterns
[21:54:18] <graydon> (where "where" is defined as "maybe-do" in the category of hylomorphic endoopreopositions)
[21:54:35] <kmc> http://www.haskell.org/haskellwiki/Pattern_guard
[21:54:37] *** Joins: heftig_ (heftig@moz-223ED7A6.dip0.t-ipconnect.de)
[21:54:47] <graydon> trivial application of "beyond" over "within"
[21:55:31] <graydon> aw, this joke's gone stale. gosh I am in a foul mood today :(
[21:55:37] <strcat> kmc: you can use | within a pattern as OR
[21:55:40] <doomlord_> librustc session codemap.files including files named "<quote expansion>" ... is that something to do with inlining
[21:55:47] <strcat> kmc: is that the same thing? ;p
[21:55:49] <kmc> no
[21:55:55] <graydon> apologies to anyone I actually, y'know, have to have a conversation with
[21:56:03] *** Joins: brendan (brendaneic@538BABFE.A073F3E.97BBD552.IP)
[21:56:15] <tjc> yeah, Haskell pattern guards are more powerful because you can actually do further pattern-matching in the guards
[21:56:29] <kmc> yep, and further expression evaluation
[21:56:49] <strcat> graydon: well, it's too bad it's not a fowl food because I'm hungry
[21:56:54] <strcat> s/food/mood/
[21:56:57] <kmc> and if any pattern fails to match, you fall through to the next equation like a normal boolean guard
[21:57:05] <kmc> they're pretty cool, I don't think it's an essential feature though
[21:57:14] *** Joins: BitPuffin (quassel@moz-7BB00EC9.bredband.comhem.se)
[21:57:41] * tjc sends cookies via DCC
[21:57:54] *** Joins: victorporof (victorporo@DBFC8886.2203F6DA.D111398B.IP)
[21:58:10] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[22:00:10] <sully> hm
[22:00:14] <sully> this thing I want to do might not work
[22:02:04] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[22:02:17] <ecr> brson: I found a homing IO edge case with unclear semantics about what should happen
[22:02:50] <sully> kmc: I think I am running into the iterator thing you were complaining about
[22:03:03] <sully> kmc: I want to be returning an iterator that I produce with flat_map, but...
[22:03:15] <ecr> brson: specifically, if a task sends an IO handle to a another task pinned on a different scheduler and the pinned task tries to use the handle (or lets it fall out of scope to be destructed)
[22:03:38] <ecr> brson: then the IO handle needs to move the task to another scheduler to do the IO, but the task shouldn't be moved because it is pinned.
[22:04:11] <mitsuhiko> i suppose i can't do Iterator<T>::collect() with an unknown vec on the left, can i?
[22:05:04] <mitsuhiko> ah, there is to_owned_vec()
[22:05:40] <strcat> mitsuhiko: you can use ::collect::<~[T]>()
[22:05:53] <strcat> to_owned_vec is a convenience method providing the needed type hint
[22:06:03] <strcat> but in general, you need to give a hint for maps, sets, etc.
[22:06:09] <mitsuhiko> :(
[22:06:19] <brson> ecr: yes, that is messed up :)
[22:06:26] <strcat> unless you're passing it somewhere that *only* accepts a certain container, so it can get the hint from there
[22:06:40] <SimonSapin> strcat: donâ€™t maps and sets have from_iterator() or something similar?
[22:06:57] <strcat> yeah, but they'll almost always need you to give a type hint to collect
[22:07:11] <mitsuhiko> it's nice that to_owned_vec fills in the type automatically
[22:07:13] <SimonSapin> I mean instead of collect
[22:07:34] <strcat> from_iterator is a static method
[22:07:39] <brson> ecr: possibly it can go do i/o on the i/o scheduler, then, when it resumes, look to see if the task is pinned and reschedule if so.
[22:07:39] <mitsuhiko> collect calls into from_iterator
[22:07:44] <brson> ecr: pretty ugly
[22:07:46] *** Quits: Jesin (Jessin_@moz-1B1307FF.eecs.lehigh.edu) (Ping timeout)
[22:07:46] <strcat> and trait static methods don't resolve from the type's namespace
[22:08:10] <strcat> for example, if T implements FromFoo (a from_foo method)
[22:08:13] *** Quits: sebcrozet (sebcrozet@moz-6DA639AF.w80-13.abo.wanadoo.fr) (Quit: Gone)
[22:08:18] <strcat> FromFoo::from_foo::<T>() is how you have to call it
[22:08:23] <ecr> brson: that's what the current implementation will do (after IO finishes it puts the old home back into place).
[22:08:23] <strcat> atm, T::from_foo won't resolve
[22:08:38] <strcat> the magic resolve when traits are in scope only applies to .
[22:08:48] <strcat> open question whether it should apply to ::
[22:08:59] <ecr> brson: will moving tasks that shouldn't be moved horribly break things?
[22:09:01] *** Joins: mihneadb_ (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[22:09:09] *** Quits: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Connection reset by peer)
[22:09:29] <ecr> brson: the only other option I see is failing an rtassert, but I don't really want to do that.
[22:12:05] <brson> ecr: I can't think of a way that it would break offhand as long as it gets back before executing user code but it is a potential gotcha. task pinning is mostly used for two things: to call GUI code on the main thread, and to avoid blocking other schedulers when using blocking FFI calls
[22:13:17] <graydon> bors is turned off
[22:13:25] <graydon> this rtdebug! thing has to land
[22:13:33] <graydon> it's top of all the profiles I've looked at
[22:14:00] *** Quits: Palmik (palmik@moz-CC484FDD.tmcz.cz) (Quit: Lost terminal)
[22:15:08] <graydon> like .. not just top, but the entire green region of the profile in perf is all attributed to it, when I unfold the call stacks
[22:15:17] <ecr> brson: alright, then I'll keep the current semantics. It deschedules itself immediately after IO and resets home to the original scheduler and then sends it as TaskFromFriend to itself. A pinned task will get sent back to it's home thread. AnySched tasks will stay on the new thread.
[22:15:29] <cmr> graydon: yup, fmt ain't cheap
[22:15:42] <mitsuhiko> strcat: would it would if there was some sort of let x: MyType<auto> = foo.collect()?
[22:16:06] <mitsuhiko> eh, that's not english
[22:16:08] <brson> ecr: sounds reasonable
[22:17:31] <strcat> mitsuhiko: yeah I think we should have partial type hints
[22:17:42] <strcat> collect::<~[_]>(), for example
[22:18:01] <strcat> the annoying part is how you how to re-specify what it already knows
[22:18:43] <ecr> brson: I made some tests for the two main cases of homing (task moves schedulers & handle moves tasks [on different schedulers]) that just do UDP close() and everything is working fine. I'm going to replicate existing UDP tests with these variants of homing. If that all works, then it's on to TCP, timers, etc.
[22:19:15] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[22:20:04] <mitsuhiko> strcat: can you call foo.collect<~[int]>() actually?
[22:20:14] <strcat> mitsuhiko: yes
[22:20:26] <strcat> rusti: range(0, 10).collect::<~[int]>()
[22:20:30] -rusti- ~[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
[22:20:43] <strcat> to_owned_vec just passes the hint for you, by having an ~[T] return value and calling collect() itself
[22:20:52] <mitsuhiko> ah, ::
[22:20:59] <mitsuhiko> strcat: yeah, saw that in the code
[22:21:06] <strcat> not really necessary, but since we lack a way to do partial hints it's useful
[22:21:41] <strcat> rusti: let mut xs = ~[1, 2]; xs.extend(range(3, 10)); xs
[22:21:44] -rusti- pastebinned 7 lines of output: http://ix.io/7ez
[22:21:54] <strcat> rusti: let mut xs = ~[1, 2]; xs.extend(&mut range(3, 10)); xs
[22:21:55] -rusti- ~[1, 2, 3, 4, 5, 6, 7, 8, 9]
[22:21:57] <strcat> there's also that
[22:22:04] <strcat> Extendable trait
[22:22:46] <strcat> but you'd do 2 allocs instead of 1 if you replaced a usage of collect with it
[22:22:49] *** Joins: alisdair (textual@moz-2D2E4CCA.eng.wind.ca)
[22:23:47] <strcat> C++-style vectors are { len, capacity, *data } instead of *{ len, capacity, data }, so they don't have to do an allocation when you make an empty one
[22:24:01] *** Quits: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[22:24:01] <strcat> anyway in general I guess both traits are still needed
[22:24:51] <mitsuhiko> i wonder if rust will eventually have a Vec<T> type in addition to ~[T}
[22:25:03] <strcat> if we switched back to jemalloc, we could actually remove the capacity field from vectors
[22:25:08] <strcat> and use malloc_usable_size
[22:25:13] <strcat> or whatever it's called (forget)
[22:25:24] <mitsuhiko> yeah, that's the name i think
[22:25:32] *** Quits: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com) (Quit: eatkinson)
[22:26:39] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[22:26:39] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/9yPsvw
[22:26:39] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[22:26:53] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Client exited)
[22:27:32] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[22:28:09] <cmr> What would Vec<T> be?
[22:28:21] <cmr> Syntax has OptVec<T> to avoid the allocation in the case of empty vectors
[22:28:32] <cmr> (it's just Option<~[T]>
[22:28:42] <graydon> (did we turn off mac32-nopt recently?)
[22:28:51] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[22:28:51] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/6KdRfg
[22:28:51] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[22:28:51] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[22:28:52] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/yOjX4A
[22:28:52] <ghrust> 13rust/06auto 144be086b 15Corey Richardson: Remove rtdebug_! and make rtdebug! work properly....
[22:28:52] <ghrust> 13rust/06auto 1459da4e0 15bors: auto merge of #8419 : cmr/rust/fix-rtdebug, r=brson...
[22:28:52] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[22:29:03] <brson> graydon: i believe it's been off for a long time because it was running out of addrspace
[22:29:10] <graydon> oh, yeah. :(((
[22:29:37] <strcat> it might work now
[22:29:42] <strcat> we generate a lot less IR
[22:30:23] <mitsuhiko> cmr: no idea. i was just looking at my code and noticed that there is a weird disconnect of vectors being built in and having syntax, compared to stdlib provided containers
[22:30:25] <strcat> cmr: a small vector would be similar to OptVec
[22:30:59] <strcat> if you're already paying for the branch on each operation, it should probably just be a small vector
[22:31:05] <strcat> with the slow path inline(never)'ed
[22:33:12] <graydon> I wonder if there's some way we can avoid _ever_ generating "code" for transmute
[22:33:49] <toddaaro> graydon: huh? transmute makes code? I thought it was just an intrinsic that doesn't ever have code?
[22:33:51] <strcat> graydon: we should figure out how to make intrinsics generate code instead of functions
[22:34:03] <strcat> I think it'd be a *huge* speedup for nopt
[22:34:12] <graydon> mhm
[22:34:17] <strcat> maybe not optimized because it already does a ton of work ;]
[22:34:54] <graydon> pcwalton: ping
[22:35:04] <pcwalton> graydon: pong
[22:35:24] <graydon> pcwalton: you were concerned about https://github.com/mozilla/rust/pull/8450 -- do my comments address your concerns?
[22:35:56] <pcwalton> that's fine
[22:35:58] <graydon> I would like to land that and split the nopt bots into nopt-c (just bootstrap) and nopt-t (optimized compiler, test w/o optimizing) pairs (
[22:36:05] <graydon> ok
[22:36:13] <pcwalton> my main thing that I take issue with is strcat's assertion that compiler/runtime/stdlib are "ridiculously slow" :)
[22:36:22] <strcat> with nopt ;p
[22:36:22] <pcwalton> I don't think they're ridiculously slow, just kinda slow
[22:36:25] <pcwalton> oh, sure
[22:36:27] <pcwalton> that's true
[22:36:45] <graydon> yeah, it's like .. we're spending 3s in nopt versions of the metadata reader routines
[22:36:59] <graydon> then spitting out a 1k test, running it...
[22:36:59] <strcat> we rely on inlining and basic code elimination a lot, like C++ does
[22:37:04] <graydon> lather, rinse, repeat
[22:38:45] *** Joins: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com)
[22:39:07] <pcwalton> yeah
[22:39:13] <strcat> pcwalton: would it make sense to have '|x| x + 3' be an extern fn, since it doesn't do any captures? maybe too complex
[22:39:18] *** Joins: j3n (jen@moz-3388A3B.dip0.t-ipconnect.de)
[22:39:36] <pcwalton> I think || should certainly be able to infer to extern fns
[22:39:41] <bjz> where did str::raw::from_buf go?
[22:39:45] *** Quits: alisdair (textual@moz-2D2E4CCA.eng.wind.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[22:39:47] <pcwalton> I think so anyway -- nmatsakis may have other opinions?
[22:40:25] <strcat> bjz: erickt reshuffled it all when he removed the trailing \0 :)
[22:40:42] <bjz> strcat: where is it now?
[22:40:42] *** Quits: frogaincia (Mibbit@DD12015D.EBE2EE2B.C7CEC4ED.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:40:55] <strcat> I guess you want from_bytes? I don't know what from_buf did
[22:40:56] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[22:41:08] <strcat> bjz: from_buf_len still exists too
[22:41:24] <bjz> strcat: from a null terminated *char to a ~str
[22:41:45] <strcat> from_c_str
[22:42:06] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: Lost terminal)
[22:42:33] <bjz> wait, I think I actually have a c_uchar
[22:42:40] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[22:42:41] *** ChanServ sets mode: +o brson
[22:43:31] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[22:43:31] <bjz> strcat: ^
[22:44:57] <bjz> strcat: so I'm guessing it's *u8 -> ~str
[22:45:17] <strcat> bjz: well you could still use from_c_str afaik
[22:45:36] <strcat> c_char isn't defined as signed or unsigned, it's platform dependent
[22:45:57] <strcat> at least `char` is like that in C, maybe ours is defined as signed
[22:47:06] <bjz> xml/mod.rs:47:38: 47:42 error: mismatched types: expected `*i8` but found `*u8` (expected i8 but fround u8)
[22:47:23] <bjz> the chars I'm getting are utf
[22:47:27] <cmr> We have str::from_bytes for that
[22:47:49] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[22:47:59] *** vfetwnuncszu is now known as dcrewi
[22:48:19] <strcat> bjz: just cast it
[22:48:39] <bjz> cmr: does it take a null terminated *u8?
[22:49:13] <bjz> strcat: it's weird the fom_buf is gone when we still have from_buf_len
[22:49:30] <strcat> from_buf_len could be renamed to from_buf
[22:49:47] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[22:49:56] <bjz> strcat: but folks often want *u8 -> ~str
[22:50:05] <strcat> but you can't convert *u8 to ~str
[22:50:11] <strcat> only if you know it's \0-terminated
[22:50:15] <bjz> exactly
[22:50:23] <strcat> from_buf doesn't make sense as the name for that
[22:50:26] <strcat> from_c_str does
[22:50:29] <bjz> I know it's \0
[22:50:51] <bjz> but I want *u8? from_c_str takes *i8?
[22:51:01] <cmr> transmute it
[22:51:06] <strcat> don't need transmute
[22:51:19] <kmc> bjz: it takes *c_char
[22:51:27] <bjz> kmc: I know
[22:51:32] <kmc> which might be an alias for *i8 but it would be better to write *c_char
[22:51:36] <strcat> c_char is a typedef for u8 or i8 depending on the platform
[22:51:39] <bjz> kmc: c_char is type aliased
[22:51:47] <bjz> kmc: yes, I know
[22:51:51] <strcat> bjz: just cast 'as c_char'
[22:51:56] <strcat> er
[22:52:00] <strcat> as *c_char
[22:52:00] <kmc> signed chars in C are the worst
[22:52:20] *** Joins: steven_is_false (user@4728DAC8.6ECAE21.F39A8AA1.IP)
[22:52:27] <kmc> great security holes when you do like array[c]++ and it indexes backwards from the beginning o_O
[22:52:29] <strcat> well, I hate how uint8_t and int8_t are typedefs for unsigned/signed chars
[22:52:35] <strcat> so C++'s stupid iostreams print them as characters
[22:52:37] * strcat sighs
[22:52:49] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[22:52:50] *** vfetwnuncszu is now known as dcrewi
[22:53:21] <bjz> strcat: could we have a from_c_ustr that takes a c_uchar? that way folks can be explicit?
[22:53:26] <steven_is_false> I'm profiling my code, and I'm having trouble finding the same functions in the LLVM code that correspond to the names given from perf.
[22:54:01] <steven_is_false> For example, I have the name window::window::_58b6afd4dbdfea91::_0$x2e0$x2e0 but that appears nowhere in the LLVM code.
[22:54:32] <cmr> steven_is_false: it'd be mangled
[22:54:56] <cmr> search for the hash I guess. I don't know of an inverse of c++filt
[22:54:57] <steven_is_false> cmr: Hmm, is there way to get LLVM, or perf to mangle, or unmangle the names?
[22:55:20] <cmr> steven_is_false: c++filt < your_thing.ll | less
[22:55:30] <strcat> afaik rustc does all the name mangling
[22:55:39] *** Joins: _aclark (Mibbit@moz-1635B1E.cselabs.umn.edu)
[22:55:54] <cmr> I don't know about perf.
[22:55:54] <bjz> strcat:?
[22:55:55] <steven_is_false> cmr: Thanks! Searching for the hash was good enough. _ZN6window6window17_58b6afd4dbdfea9112_0$x2e0$x2e0E
[22:55:56] <strcat> and there's really no way to figure out what a generic impl is from beyond guessing
[22:56:12] <strcat> bjz: dunno, I think from_c_char is enough
[22:56:26] <strcat> bjz: it's fine to cast to it with 'as'
[22:56:32] <steven_is_false> Now to figure out how to read LLVM code.
[22:56:59] <strcat> er, from_c_str
[22:58:09] *** Joins: jensnockert (jensnocker@moz-61E1062F.tbcn.telia.com)
[22:58:28] <bjz> strcat: no transform any more?
[22:58:35] <cmr> transform -> map
[22:58:35] <strcat> bjz: called map now
[22:58:42] <bjz> yay!
[22:58:43] <bjz> :D
[22:58:47] <strcat> bug is still unfixed but they became default methods
[22:59:32] <bjz> strcat: also, as_c_str is gone
[22:59:45] <strcat> bjz: yep because they're never \0-terminated
[22:59:49] <cmr> .to_c_str().as_bytes()
[23:00:07] <strcat> or just push \0 if you want it to be efficient
[23:00:25] <toddaaro> sigh, when is stage0 coming back?
[23:00:34] <toddaaro> with newrt default stage1 is really not adequate for debugging
[23:00:51] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[23:00:55] <strcat> toddaaro: my snapshot is the next thing in the queue
[23:01:00] <toddaaro> strcat: yay
[23:01:12] <cmr> did stage0 go somewhere?
[23:01:17] <cmr> why isn't stage1 adequate?
[23:01:33] <strcat> he means when will it not be broken ;p
[23:01:44] <toddaaro> a) break runtime code changing it b) make check-stage1-std c) realize it is using defective runtime in stage1 compiler and failing
[23:01:51] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Quit: brb)
[23:01:58] <graydon> strcat: I bumped #8450 ahead of the snap if that's ok. it's necessary for trying to get cycle time under control.
[23:02:04] <strcat> graydon: yeah that's fine
[23:02:08] <graydon> (at least temporarily)
[23:02:11] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[23:02:29] <bjz> cmr: where is to_c_str?
[23:02:35] <brson> toddaaro: NO_REBUILD=1 should still be sufficient for check-stage1-std. you break the scheduler in stdtest in stage1 while using the working scheduler to run the test suite
[23:02:47] <strcat> I just want to be able to fix some bugs with checked_add and checked_mul and I didn't feel like adding stage0 duplicates with the bugs intact ;]
[23:02:48] <bjz> cmr: it says: xml/mod.rs:68:8: 73:9 error: this function takes 0 parameters but 1 parameter was supplied (i
[23:02:59] *** Quits: dew (Instantbir@moz-8A63B53.dhcp.stls.mo.charter.com) (Ping timeout)
[23:03:10] <bjz> do src.to_c_str().as_bytes |c_str| {
[23:03:31] <toddaaro> brson: really? ok, I tried without NO_REBUILD because I changed a struct def and I'm stuck at load average 10.5 maxing all the cores in kernel space doing the stage1 compile
[23:03:42] <steven_is_false> How can I tell if LLVM code like this is good, or bad? http://pastebin.mozilla.org/2842305
[23:03:48] <toddaaro> brson: though, I don't know how to go backwards?
[23:03:50] <cmr> bjz: as_bytes returns a slice, it doesn't take a closure.
[23:03:55] <bjz> oh ok
[23:04:47] <strcat> hm, I wonder if statically linking in compiler-rt would remove the gcc-libs dep completely
[23:04:50] <bjz> cmr: oh and then you do as *c_uchar?
[23:04:55] <toddaaro> brson: yea, I can't NO_REBUILD
[23:05:02] <strcat> (ofc we still need a linker and unwinding ;p)
[23:05:06] <_aclark> hey, is anybody having a problem passing args to the configure script?
[23:05:15] <bjz> cmr: woops, I mean *c_char
[23:05:21] <brson> toddaaro: it should be possible to, with a clean workspace, run `make check-stage1-std`, then make changes and run `make check-stage1-std NO_REBUILD=1`. that should operate the test runner using the working scheduler, while running the rt tests using the modified test runner. they key is to first build stage1 without making your changes
[23:05:44] <cmr> bjz: oh, it looks like CString has a `with_ref` method that takes a closure
[23:05:56] <steven_is_false> I need a 3 level debugger, Rust code, LLVM IR code, and assembly code.
[23:05:57] <bjz> wait, you need to tranmute :/
[23:06:11] <toddaaro> brson: ok, I guess I'll stash and try that, thanks
[23:06:21] *** Joins: dew (Instantbir@moz-8A63B53.dhcp.stls.mo.charter.com)
[23:06:22] <_aclark> it's finding --prefix and such invalid
[23:06:53] <strcat> rust's makefile handles PREFIX
[23:07:17] <bjz> this new api is kinda weird
[23:07:28] <strcat> er, actually no
[23:07:31] <strcat> the makefile has DESTDIR
[23:07:51] <strcat> _aclark: are you using a git clone or a release?
[23:08:05] <_aclark> a clone off of master
[23:08:06] *** Joins: leonvv (leonvv@moz-7D83A5F1.ip.telfort.nl)
[23:08:11] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[23:08:11] <strcat> bjz: you don't need to transmute to convert *T to *U
[23:08:15] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[23:08:15] <strcat> you can use 'as'
[23:08:19] <bjz> I know
[23:08:30] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[23:08:37] <cmr> bjz: don't transmute the &[u8] to a *u8, use with_ref or with_mut_ref
[23:08:38] <graydon> dbaupp: ping
[23:08:40] <bjz> I was talking about the as_buf
[23:08:44] <strcat> oh
[23:08:58] <bjz> cmr: yeah, that's what I did
[23:09:07] <bjz> cmr where is CString?
[23:09:12] <cmr> bjz: std::c_str
[23:09:32] <graydon> 32min -> 24min on the windows nopt builder
[23:09:32] <bjz> AHH
[23:09:43] <bjz> cmr: I didn't notice the new module
[23:10:03] <bjz> cmr: would have been helpful if there was a ML message
[23:10:13] <cmr> erickt: make an ML post :P
[23:10:20] <bjz> cmr: really?
[23:10:26] <cmr> bjz: what?
[23:10:30] * bjz feels dumb
[23:10:34] <bblum> i'm not really sure what to talk about in my presentation
[23:10:44] <toddaaro> bblum: you could talk about task killing
[23:10:54] <steven_is_false> Cool GDB errors out trying to debug my application with /build/buildd/gdb-7.4-2012.04/gdb/dwarf2read.c:6860: internal-error: dwarf2_record_block_ranges: Assertion `dwarf2_per_objfile->ranges.readin' failed.
[23:10:54] <bblum> like how it's implemented?
[23:10:56] <toddaaro> spend the whole time describing dangerous data races
[23:11:01] <bblum> uh
[23:11:06] <bjz> cmr: when was it
[23:11:09] <bblum> you mean the sort of data races we don't have
[23:11:16] <cmr> bjz: there wasn't one.
[23:11:20] <toddaaro> except the ones we do have in task killing right
[23:11:28] <bjz> cmr: oh
[23:11:30] <toddaaro> or not so much killing, but the environment thing
[23:11:51] <bjz> cmr: yeah, lots of folks rely on those methods/fns for bindings
[23:11:58] <bjz> anyway
[23:12:08] <bjz> at least I've figured it out
[23:12:16] <bjz> thankyou, sorry for the fuss
[23:12:46] <toddaaro> bblum: more seriously a 10-15m slot is probably a great amount for a basic overview of the task killing model
[23:12:58] <toddaaro> bblum: and maybe a handful of implementation factoids
[23:13:02] <bblum> i presented on that last year
[23:13:09] <bblum> there's just a different implementation now
[23:13:29] <toddaaro> compare and contrast!
[23:13:39] <toddaaro> that could be interesting
[23:13:39] <bblum> nobody will care 
[23:13:47] <bblum> maybe i will talk exclusively about traits
[23:13:52] <strcat> closure bounds! ;p
[23:13:56] <toddaaro> at least I would love a 40m slot for compare and contrast on the same stuff implemented in rust and c
[23:13:59] <bblum> yes, trait and closure bounds
[23:14:23] <sully> oh, I need to figure out what I am going to talk about
[23:14:28] <strcat> bblum: do closure bounds allow any kind? or are they special-cased?
[23:14:36] <bblum> strcat: builtin bounds only
[23:14:39] <sully> last summer I didn't have a single clear project, so I just talked about the thing I thought was coolest
[23:14:49] <cmr> graydon: it'd be nice to have an `iter_x` method on BenchHarness that passes a value to the closure, to defeat inlining and DCE, and also maybe an iter_len to get perf numbers for different lengths of things.. I just feel like the simple `iter` interface isn't a lot to work with
[23:14:50] <strcat> bblum: yeah but I mean, lets say I add a kind - will it be usable as a closure bound automatically?
[23:14:51] <sully> which was my 3rd order function interface for building vectors and stuff
[23:14:58] <bblum> strcat: a builtin kind? yeah, it will be
[23:15:08] <cmr> sully: would that be at_vec::build_sized that I'm currently writing benchmarks for?
[23:15:13] <sully> cmr: yeah
[23:15:17] <cmr> heh
[23:15:22] <bblum> strcat: allowing any trait would require generating vtables though, but this is something we kinda wanna do for Clone as a special case
[23:15:23] <strcat> maybe I'll try playing with TypeContents and making it work for data parallelism then
[23:15:31] <sully> this summer I actually had a long term project
[23:15:31] <bblum> strcat: yeah niko had a blog post about this
[23:15:39] <sully> I was much less of a random bug fixing hero this summer than last
[23:15:47] <sully> my goal last summer was to average one bug closed a day
[23:15:50] <sully> and I hit it
[23:15:55] <sully> I think I am way short of that this summer
[23:16:19] <graydon> cmr: concrete suggestions welcome!
[23:16:27] <graydon> sully: you did amazing anyways
[23:16:30] <graydon> everyone did
[23:16:40] <graydon> (is it .. it's not _over_ yet is it?)
[23:16:41] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[23:16:45] <strcat> cmr: build_sized is something I want to kill off ;p
[23:16:51] <strcat> all those build fns
[23:16:59] <sully> graydon: I have two weeks left but am also OOO for 2 of the days
[23:17:11] <sully> graydon: so I have like 7.2 days left at this point
[23:17:27] * bblum has 2 weeks left also
[23:17:30] <graydon> sully: anything tasty still on the list?
[23:17:33] <strcat> rusti: 5.2 as bool
[23:17:34] -rusti- true
[23:17:42] <strcat> rusti: (5.2 as bool) == true
[23:17:42] -rusti- false
[23:17:45] <tjc> heh
[23:17:45] <graydon> bblum: likewise, anything remaining?
[23:17:48] <strcat> rusti: (5.2 as bool) as int
[23:17:48] -rusti- 5
[23:17:59] <bblum> graydon: i hope to allow traits to inherit from the builtin bounds
[23:18:03] <sully> graydon: right now I am working on letting you call supertrait methods on objects
[23:18:07] <bblum> graydon: trait Foo : Send
[23:18:13] <strcat> rusti: (5.2 as *int) as int
[23:18:13] -rusti- error: internal compiler error: translating unsupported cast.
[23:18:13] -rusti- application terminated with error code 101
[23:18:38] <strcat> we need a fuzzer ;p
[23:18:39] <sully> I may also try to document/refactor some of _match, since I have a pretty good understanding of it now
[23:18:40] <graydon> bblum: sounds good
[23:19:16] <graydon> sully: docs on it would be ideal. I get the impression it's not doing terribly good things wrt. codegen.
[23:19:25] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[23:19:39] <bblum> graydon: it was gonna be optimizing moves so we don't need to zero out moved objects, but niko wants that to be a pass on the CFG rather than the AST, and if i did it now it would have to be on the AST and then it would get thrown out and reimplemented
[23:19:44] <graydon> sully: or refactoring if you have time. but if you're going to vanish with it in some state, documented is better than mid-refactoring-with-no-idea-what-you-were-doing :)
[23:19:53] <sully> graydon: heh, yeah
[23:19:55] * tjc agrees with graydon 
[23:20:12] <graydon> bblum: ah, yes. *whistful gaze at that feature*
[23:20:25] <bblum> graydon: yeah it'll do wonders for codegen i am sure
[23:20:38] <graydon> is it on the codegen metabug?
[23:20:49] <strcat> I reported it a while ago, so it's an open issue
[23:21:26] <bblum> graydon: it appears to be
[23:21:48] <graydon> in general: anything you have learned while up-to-elbows in trans this summer concerning its failure to generate reasonable or fast code, please tack on to #6819
[23:21:56] <graydon> yeah, I see #5016
[23:22:10] <bblum> i have never been more than up to my ankles in codegen to be honest
[23:22:18] <sully> hm, so, I have some ideas about when match might generate bad code
[23:22:22] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[23:22:38] <sully> but they are cases where I'm not really sure how often they would come up
[23:23:10] <cmr> sully: Almost every non-trivial use of match explodes in generated code.
[23:23:19] <cmr> sully: extra::terminfo::parm has a nice one
[23:23:35] <bblum> sigh, this failure determinstically never shows up in gdb
[23:23:58] <sully> cmr: explodes more than other language's matching?
[23:24:07] <sully> cmr: my understanding is that we implemented a fairly standard approach
[23:24:09] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[23:24:14] <cmr> sully: dunno, I haven't used another language with match before
[23:24:55] *** Quits: heftig_ (heftig@moz-223ED7A6.dip0.t-ipconnect.de) (Ping timeout)
[23:25:13] <cmr> sully: but it generates a ton of code, extra::terminfo::parm::expand is the single largest we generate, iirc
[23:25:25] <cmr> that may have changed, haven't seen one of graydon's nice codegen summaries for a bit
[23:25:59] <brson> my cpu has been running at 800Mhz all day :-/
[23:26:02] <sully> I mean, I don't see how it wouldn't
[23:26:07] <sully> that match is huge
[23:26:18] <sully> it also isn't a complicated match, it is just a lot of nested simple matches
[23:27:00] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (Ping timeout)
[23:27:01] <strcat> we should start using error enums
[23:27:10] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[23:27:11] <strcat> I bet a lot of that code bloat is from all that ~""
[23:27:55] *** Quits: jensnockert (jensnocker@moz-61E1062F.tbcn.telia.com) (Input/output error)
[23:28:23] <strcat> we generate kind of weird code for slices
[23:28:50] *** Joins: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu)
[23:29:42] <doomlord_> just to check .. i'm having trouble impl for a struct outside of its module, but within the same crate;
[23:30:20] <sully> strcat: for vector matching?
[23:30:25] <doomlord_> is that supposed to be possble ? .. or am i experiencing a compiler bug; when i change a function to a method, i get a seemingly unreleated error about it no longer being able to find the ::new
[23:30:29] <strcat> sully: no, I just mean slices in general
[23:30:33] <sully> oh, ok
[23:30:57] <strcat> we confuse LLVM's optimization pass with the GEP stuff but.... I don't understand why
[23:31:02] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[23:31:05] <strcat> they are simple inbounds GEPs
[23:31:33] <cmr> doomlord_: it should be possible, what is the code?
[23:31:59] <doomlord_> i'll try and paste some fragments.. its possible i've got a completely different error showing up wrong
[23:32:09] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[23:32:26] <kimundi> r? https://github.com/mozilla/rust/pull/8452
[23:32:49] <_aclark> _aclark
[23:33:18] *** Parts: _aclark (Mibbit@moz-1635B1E.cselabs.umn.edu) ()
[23:33:28] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[23:34:56] <steven_is_false> Can I get a new r+ again for this? https://github.com/mozilla/rust/pull/7866
[23:34:57] <doomlord_> oh i've got a glob import. Let me try removing that...
[23:35:06] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[23:36:09] *** Quits: wilmoore (wilmoore@moz-1248C037.mystrotv.com) (Client exited)
[23:36:31] *** Joins: wilmoore (wilmoore@moz-1248C037.mystrotv.com)
[23:36:38] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[23:36:38] *** ChanServ sets mode: +o tjc
[23:36:54] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Ping timeout)
[23:37:15] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[23:38:06] <doomlord_> http://pastebin.com/SpbRMzr3  .... but now i seem to remember there were problems with glob imports so i'm trynig to change that now and try again
[23:38:29] *** Joins: tcaud (Mibbit@moz-54D07745.lightspeed.cntmoh.sbcglobal.net)
[23:38:57] <tcaud> This language is majorly fucked up. You should quit dicking around and stick with Javascript.
[23:39:17] <graydon> tcaud: ??
[23:39:33] <doomlord_> compare it to C++ 
[23:39:40] <bblum> tcaud: maybe you can try giving some constructive feedback instead of swearing
[23:39:54] *** Quits: wilmoore (wilmoore@moz-1248C037.mystrotv.com) (Ping timeout)
[23:40:01] <bblum> (maybe.)
[23:40:17] <doomlord_> its for writing browsers not embedding in them :)
[23:40:31] *** tjc sets mode: +b *!*@*.lightspeed.cntmoh.sbc.global.net
[23:40:35] *** tcaud was kicked by tjc (conduct)
[23:40:47] <bblum> (maybe not.)
[23:40:50] <graydon> it _might_ have been some kind of unusual joke?
[23:40:50] <toddaaro> wut?
[23:40:59] <tjc> someone's not very creative idea of trolling
[23:41:02] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[23:41:02] <graydon> I was willing to wait one more sentence. but .. yeah.
[23:41:03] <tjc> I'm assuming
[23:41:38] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[23:41:39] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[23:41:40] *** ChanServ sets mode: +o brson
[23:41:52] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[23:42:47] *** Parts: steven_is_false (user@4728DAC8.6ECAE21.F39A8AA1.IP) (ERC Version 5.3 (IRC client for Emacs))
[23:42:59] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[23:43:31] <doomlord_> cmr - removing the glob import fixed my problem, it must be that same bug (i changed it to a duplicate mod in non crate root, "use self::...", and added qualifiers..)
[23:44:35] <tjc> Anyone up for reviewing a quick typechecker patch?
[23:44:36] <tjc> super quick
[23:44:48] <graydon> I can try but I don't really understand it well
[23:45:01] <tjc> graydon: super simple, I wasn't even sure whether this needed review
[23:45:05] <graydon> sure
[23:45:08] <tjc> will r? you when github stops being slow
[23:45:31] <toddaaro> brson ecr : can you stop a libuv IdleWatcher then start it again?
[23:45:33] <bblum> tjc: i'll r it
[23:45:39] <strcat> tjc: so, never? :)
[23:45:45] <toddaaro> the API allows it, but I'm not certain it is "allowed
[23:45:53] <tjc> strcat: it's unusually slow night now :-) unless it's just me
[23:45:58] <graydon> 54 => 48min on 32bit opt
[23:46:09] <strcat> graydon: what's this from?
[23:46:17] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:46:17] <graydon> strcat: rtdebug! fix
[23:46:19] <strcat> ah
[23:46:21] <tjc> r? graydon or bblum https://github.com/mozilla/rust/pull/8479 (whoever gets there first)
[23:46:30] <graydon> even opt gets a big bump
[23:46:46] *** Quits: goffrie (goffrie@moz-6A957472.dsl.ncf.ca) (Ping timeout)
[23:47:03] <bjz> rusti: struct A; impl *A {}
[23:47:05] -rusti- pastebinned 8 lines of output: http://ix.io/7eE
[23:47:17] <strcat> graydon: we eliminate the surely dead branches in the frontend now so that's likely why
[23:47:26] <strcat> LLVM likes to churn it a bit before doing any dead code elim
[23:47:35] <bblum> tjc: error what is this error
[23:47:40] <graydon> nopt seems to be much better too. 29min => 20min on the compile step.
[23:47:57] <tjc> bblum: oh, ack
[23:48:01] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[23:48:05] <strcat> although I guess it was *always* logging anyway ;p
[23:48:08] <tjc> have I really had so little caffeine today
[23:48:17] <cmr> strcat: it wasn't even logging
[23:48:24] *** Quits: BitPuffin (quassel@moz-7BB00EC9.bredband.comhem.se) (Ping timeout)
[23:48:26] <cmr> it was just doing a fmt!(), assigning it to a local, and then... nothing
[23:48:30] <strcat> ah
[23:48:44] <strcat> our string/vector ops are too opaque to the optimizer atm :(
[23:48:44] <cmr> it logs now, but only when --cfg rtdebug is passed to the libstd build
[23:49:04] *** Joins: goffrie (goffrie@moz-81CAF92F.dsl.ncf.ca)
[23:49:19] <bblum> tjc: otherwise it looks trustworthy to me but i don't really understand what the issue is
[23:49:28] <strcat> on the positive side I know exactly why loop-deletion doesn't work on vector iterators
[23:49:33] <tjc> bblum: I'll add some comments, found another issue in the meantime
[23:49:39] <strcat> the pattern is just a bit off what it looks for, so it thinks it's possibly infinite
[23:49:42] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[23:49:42] *** ChanServ sets mode: +o brson
[23:50:01] <cmr> graydon: so I'm looking at criterion (it's the only nice benchmarking thing I know of) and there's no precedent for this, but what I envision is an N-dimensional space, and the benchmarker iterates over this space, giving a tuple/vector of the current point in the space to the callback you pass to b.iter_nd (n-dimensional), and it can do all sorts of pretty graphing and pick out interesting points
[23:50:03] <cmr> or whatever
[23:50:13] <cmr> Mostly I see it being 1-dimensional, for example the case of "push N things to a vector"
[23:50:27] <cmr> The different values of N might be interesting to infer scaling or somesuch
[23:51:04] <graydon> cmr: have you seen what I did with the extra::container benchmarks?
[23:51:14] <cmr> graydon: no, I didn't even know we had an extra::container
[23:51:16] * cmr looks
[23:51:36] <graydon> cmr: I don't think automating benchmark-workload-scaling is going to be easy enough to generalize.
[23:51:40] <tjc> anyone remember the name of the function that iterates over all the idents in a pattern?
[23:52:14] *** Quits: boredomist (user@moz-63CF9F31.res-cmts.sesp.ptd.net) (Ping timeout)
[23:52:17] <graydon> cmr: even automating "get a clear signal on _just_ this fixed-duration loop" is, as it happens, annoyingly difficult.
[23:52:35] *** Joins: samx (sami@moz-48EC0983.dyn.optonline.net)
[23:53:07] *** Joins: boredomist (user@moz-63CF9F31.res-cmts.sesp.ptd.net)
[23:53:11] <cmr> graydon: ...are those benchmarks *run* anywhere?
[23:53:22] <graydon> cmr: yes.
[23:54:11] <graydon> see for example http://buildbot.rust-lang.org/builders/auto-linux-64-opt/builds/900/steps/test/logs/stdio
[23:54:24] <graydon> cmr: search find_seq_100, find_seq_10_000, etc.
[23:54:34] <cmr> Oh, you manually do it in the modules for the data structures
[23:54:35] <graydon> smallintmap and treemap call into them
[23:54:36] <cmr> yeah
[23:54:38] <cmr> right
[23:54:40] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[23:55:08] <cmr> graydon: I was just thinking the benchmarker could do all the hard work of picking a value, instead of having to do this foo_number madness
[23:55:17] <cmr> but I agree generalizing it isn't easy
[23:55:21] <cmr> just an idea that floated by
[23:55:31] <strcat> graydon: whoa, what happened to linux-32-nopt? the ETA is huge
[23:55:46] <strcat> maybe just a bug in the estimate
[23:55:48] <strcat> (hopefully?)
[23:56:01] <pcwalton> there's a big kerfluffle about CSPRNGs today
[23:56:17] <pcwalton> people are praising Go for using /dev/urandom directly with no CSPRNG on Linux
[23:56:21] <pcwalton> do we do that? perhaps we should?
[23:56:33] <cmr>  /dev/urandom is too slow
[23:56:34] <pcwalton> it's only relevant on Linux.
[23:56:41] *** Quits: tchoma (tchoma@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: tchoma)
[23:56:46] <cmr> Way too slow
[23:56:50] <pcwalton> cmr: every professional crypto person I have seen is saying the opposite
[23:56:55] <strcat> but /dev/urandom is a CSPRNG
[23:57:00] <pcwalton> except colin percival and the crypto community is shouting him down
[23:57:02] <cmr> Like, the rt benchmarks sped up 2x by not seeding from urandom all the time
[23:57:03] <strcat> it's only /dev/random that blocks
[23:57:08] <pcwalton> that's fine
[23:57:18] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[23:57:20] <pcwalton> maybe we shouldn't be using CSPRNGs for that?
[23:57:35] <cmr> we use xorshift now
[23:57:36] <strcat> if you use /dev/random directly you'll run out of entropy and block on a server
[23:57:44] <pcwalton> cmr: precisely
[23:57:47] <graydon> what I'm saying is that the "madness" isn't so bad. it's like .. a parameter, and mostly just there to eyeball-for-linearity. the benchmark 'bytes' counter is there to divide-out the scale factor so you can see if a thing is linear in input size.
[23:58:01] <pcwalton> so it's the fact that it was cryptographically secure at all which is the problem
[23:58:05] <doublec> is this fallout from the discovery that bitcoin's use of the csprng on android was flawed?
[23:58:09] <pcwalton> doublec: yes
[23:58:10] <pcwalton> it is
[23:58:12] <cmr> pcwalton: right.
[23:58:24] <pcwalton> that doesn't change the fact that it seems we should be using /dev/urandom directly
[23:58:30] <graydon> strcat: the estimate is in line with recent extreme lag on nopt. which is why that cset is landing.
[23:58:33] <pcwalton> https://code.google.com/p/go/source/browse/src/pkg/crypto/rand/rand_unix.go#23
[23:58:55] <bblum> i am being assigned triage bugs whose last triage visit was also by me a month ago
[23:58:56] <pcwalton> (the fact that people are praising this as genius when it wastes time on every app startup doing a string comparison against the string "plan9" is irking me a bit)
[23:59:05] <pcwalton> but in any case
[23:59:12] <toddaaro> the android CSPRNG was broken because it did something with urandom?
[23:59:43] <graydon> it's an absurd case
[23:59:48] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[23:59:50] <graydon> and not relevant to us
