[00:42:46] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[00:42:46] *** ChanServ sets mode: +o tjc
[00:55:10] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Connection reset by peer)
[00:56:30] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[00:56:30] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/3iqV9A
[00:56:30] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[01:01:41] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[01:01:41] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/WcAf8A
[01:01:41] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[01:01:44] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[01:01:44] <ghrust> 01[13rust01] 15bors pushed 8 new commits to 06auto: 02http://git.io/QHza-g
[01:01:44] <ghrust> 13rust/06auto 14c1e3e2d 15Alex Crichton: Fix leaking trait imports across modules...
[01:01:44] <ghrust> 13rust/06auto 14f117549 15Alex Crichton: rustc: De-indent portions of middle::resolve...
[01:01:44] <ghrust> 13rust/06auto 140655eda 15Alex Crichton: std: Fill in all missing imports...
[01:01:46] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[01:06:51] *** jdm is now known as jdm|away
[01:07:15] <cmr> is the `const` keyword used for anything?
[01:08:02] <sfackler> not anymore iirc
[01:08:28] <dbaupp> cmr: parser says no
[01:08:42] <cmr> alright
[01:08:54] <cmr> (I'm basically rewriting the pygments lexer)
[01:08:55] <dbaupp> have you got a devious use for it?
[01:08:57] <cmr> no
[01:09:02] <dbaupp> oh, drat :'(
[01:09:03] <cmr> but it's in the token list
[01:09:15] <cmr> rusti: let const = 5; const
[01:09:18] -rusti- pastebinned 10 lines of output: http://ix.io/9JR
[01:09:42] * cmr tosses it under reserved
[01:17:12] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[01:53:36] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[01:54:05] <pnkfelix> dbaupp: how far have you gotten on your GC?
[01:56:13] <pnkfelix> dbaupp: (oh wait, the question I was going to ask you is not relevant for a non-moving gc)
[01:56:34] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[01:56:35] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/dwK2ig
[01:56:35] <ghrust> 13rust/06auto 1490b3945 15Marvin LÃ¶bel: Renamed Option::map_default and mutate_default to map_or and mutate_or_set
[01:56:35] <ghrust> 13rust/06auto 14a121f7b 15bors: auto merge of #10854 : Kimundi/rust/result_compose_map_mutate_or, r=alexcrichton...
[01:56:35] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[01:57:33] <acrichto> match foo.get().get(&key) { ... } 
[01:57:35] <acrichto> wheeeee
[02:00:20] <dbaupp> pnkfelix: I've got something in libstd that is bootstrapping
[02:00:41] <dbaupp> pnkfelix: unfortunately it's wildly unsafe (~ and ~[] etc don't root it)
[02:00:44] <dbaupp> and some other problems too
[02:01:28] <dbaupp> pnkfelix: I'll be opening a PR for criticism (and, in all likelihood, rejection :P ) in a few minutes
[02:03:13] <pnkfelix> dbaupp: the phrase "don't root it" is unclear.  Do you never trace through ~-ptrs?  Or you don't trace ~-allocated objects that are solely stack referenced?  Or ...?  (I guess try to be clear when you describe the caveats in your PR.)
[02:03:51] <pnkfelix> dbaupp: (don't worry so much about explaining it to me here; more important to invest that time writing up a good description in a less transient medium, i.e. the PR)
[02:03:57] <dbaupp> pnkfelix: yes, never trace through ~
[02:06:27] <pnkfelix> dbaupp: yeah I think we're going to need to change some things about ~-allocations for any sort of GC support; I do not see a way to continue having that be a thin veneer over malloc in the general case.  (For ~[T] where T holds no references, malloc is fine, of course)
[02:06:36] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[02:06:36] *** ChanServ sets mode: +o tjc
[02:08:02] <dbaupp> pnkfelix: the main problem I'm finding is the difficult of adding any logic around ~ and ~[] etc. It would be *much* nicer for them to either be sugar for library types, or just library types with no sugar.
[02:17:29] *** Joins: shachaf (shachaf@moz-F37E0395.members.linode.com)
[02:20:07] *** kimundi is now known as zz_kimundi
[02:37:09] <nmatsakis> pcwalton: ps, not forgotten about those reviews :)
[02:37:26] <pcwalton> nmatsakis: no worries, take your time.
[02:38:18] <pcwalton> nmatsakis: why would method call receivers require that the receiver not outlive the method call?
[02:38:22] <pcwalton> I'm getting a confusing typeck error
[02:38:42] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[02:39:35] <nmatsakis> pcwalton: that is confusing, probably it's a side effect of invariance -- we express requirement that lifetimes be == as being both <= and >= 
[02:39:36] <pcwalton> oh never mind, figured it out I think
[02:39:42] <nmatsakis> ok
[02:39:53] <nmatsakis> also, the region error reporting heuristics need some help, though I don't know how to do better
[02:39:58] <nmatsakis> it would be helpful to accumulate confusing cases
[02:40:01] <nmatsakis> I try to be smart about it,
[02:40:07] <nmatsakis> walking the graph to find likely edges that conflict to report,
[02:40:30] <nmatsakis> but I've noticed sometimes it winds up reporting things that are red herrings
[02:43:37] <pcwalton> nmatsakis: oh, I found the problemâ€¦ heh, that was a total red herring
[02:43:41] <pcwalton> I had this
[02:44:11] <pcwalton> fn check_fn(ccx: &CrateCtxt) -> FnCtxt { let fox = FnCtxt { ccx: ccx â€¦ }; â€¦ methods on fox â€¦ return fox; }
[02:44:22] <pcwalton> darn autocorrect, fox = fcx
[02:44:30] <pcwalton> and the problem was that I didn
[02:44:39] <pcwalton> didn't link the lifetime of crate context and fn context
[02:44:47] <pcwalton> but it reported the error at some random method call
[02:45:45] <nmatsakis> we've got to write that lint for return types with unbound lifetime parameters
[02:46:39] <pcwalton> nmatsakis: I just had an idea
[02:46:47] <pcwalton> what if when we had a lifetime error
[02:47:01] <pcwalton> we enumerated all possibilities of lifetime parameterization in the arguments and return type
[02:47:16] <pcwalton> and then tried to solve with those possibilities if it's a reasonable number (obviously there is a combinatorial explosion hazard)
[02:47:21] <pcwalton> if we find one we suggest it to the user
[02:48:03] <pcwalton> that would be so sweet, the compiler would just tell me where to insert the lifetimes
[02:48:14] <pcwalton> and might actually go a *long* way toward making the language easier to use
[02:49:24] <nmatsakis> pcwalton: that's a nice idea, yeah -- be worth investigating
[02:49:34] <nmatsakis> pcwalton: might not be necessary to enumerate exactly,
[02:49:42] <nmatsakis> pcwalton: we might be able to just create fresh region variables or something
[02:51:32] <pcwalton> yeah
[02:51:36] *** Quits: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net) (Quit: Leaving.)
[02:56:02] *** Joins: jpoirier (jpoirier@moz-150F5176.dhcp.ftwo.tx.charter.com)
[02:58:01] <nmatsakis> brson: ping
[03:01:48] *** Quits: gwty (gwtypc@B8540510.B7CA1378.F44414AF.IP) (Ping timeout)
[03:02:42] *** Joins: gwty (gwtypc@B8540510.B7CA1378.F44414AF.IP)
[03:06:03] <cmr> Does anyone sling pygments? I've updated the lexer but am not sure if it's right: https://bitbucket.org/octayn/pygments-main/commits/835ddc78ec5676e88f721dfe32006bd42afa1970
[03:08:39] <brson> nmatsakis: pong
[03:11:39] <nmatsakis> brson: I wanted to ask your opinion about writing lengthy documentation for rustc; I've been shifting to a doc.rs file, since I find it annoying to wade through pages of docs at the top of a module in daily life, but I thought this might be something we should discuss as a group; occurs to me now I should bring i tup in a meeting or on the mailing list
[03:11:49] *** Joins: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca)
[03:12:03] <nmatsakis> (I still prefer to have the docs in a file in the source tree vs a wiki or something)
[03:12:20] <cmr> nmatsakis: I like the doc.rs convention
[03:12:25] <nmatsakis> I'm asking since I'm trying to document how the new trans cleanup system i'm working on works
[03:12:45] <dbaupp> having them in tree lets us use rustdoc to get everything scoped (etc) correctly too.
[03:12:55] <nmatsakis> yes, plus they are versioned etc
[03:13:00] <nmatsakis> and they are available when I'm not online
[03:13:01] <nmatsakis> which is frequently
[03:13:03] <cmr> Once we start using sphinx/reST, we could even have doc.rst in a directory included nicely in the module docs.
[03:13:33] <nmatsakis> s/once/if/?
[03:13:48] <cmr> depends on if you want to be a pessimist :P
[03:13:52] <nmatsakis> :)
[03:14:53] <brson> nmatsakis: I don't know if I have a strong opinion. I haven't worked enough in rustc lately to have much experience with doc.rs, so I'll defer to your judgement. The only worry I have about that is the lack of discoverability, but people hacking on rustc have a lot more to worry about than possibly not noticing doc.rs
[03:14:55] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[03:15:08] <nmatsakis> brson: :)
[03:15:09] <brson> istm that eventually we're going to want to generate rustdocs for syntax/rustc
[03:15:22] <cmr> we already do, make compiler-docs
[03:15:29] <dbaupp> do the bots run that?
[03:15:32] <cmr> not yet
[03:15:33] <nmatsakis> brson: my usual strategy has been to put "code comments" in the code itself, but longer essay-like docs in a doc.rs file
[03:15:37] <cmr> brson: I meant to bother you about that
[03:15:41] <brson> huh. i didn't know that
[03:15:46] <nmatsakis> brson: and then e.g. a small comment on the module like /*! trans: see doc.rs for details */
[03:15:59] <cmr> I added it in the past weekish. Can you have the bots run it? :)
[03:16:27] <nmatsakis> I'm prob the only one that tries to write essay-like docs so I guess it's just my convention :)
[03:16:30] <brson> cmr: maybe we should just make it part of the normal doc build. rustc and syntax comprise API's that we're distributing
[03:16:37] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[03:16:38] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/dwK2ig
[03:16:38] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[03:16:54] <dbaupp> brson: I think it's quite slow
[03:17:02] <dbaupp> especially librustc
[03:17:07] <cmr> brson: I initially did that but there were concerns about increasing compilation time (just using `make`), and that they aren't usually important.
[03:17:11] <brson> nmatsakis: everyone is very grateful for your essays
[03:17:23] <cmr> nmatsakis: I recently discovered them and they're super helpful :)
[03:17:42] <nmatsakis> brson: ;)
[03:19:00] <brson> cmr: what do you want the bots to do with the compiler docs? just make sure they build, or upload them?
[03:19:13] <cmr> brson: upload them
[03:19:25] <cmr> just on the doc builder, no need to make cycle time slower
[03:19:36] <cmr> the output regular crate docs like libstd etc
[03:20:11] <brson> cmr: yeah, I'll look into doing that right now
[03:21:35] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[03:21:35] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/7qkTug
[03:21:35] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[03:21:37] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[03:21:37] <ghrust> 01[13rust01] 15bors pushed 8 new commits to 06auto: 02http://git.io/tDJKaQ
[03:21:37] <ghrust> 13rust/06auto 14c1e3e2d 15Alex Crichton: Fix leaking trait imports across modules...
[03:21:37] <ghrust> 13rust/06auto 14f117549 15Alex Crichton: rustc: De-indent portions of middle::resolve...
[03:21:37] <ghrust> 13rust/06auto 140655eda 15Alex Crichton: std: Fill in all missing imports...
[03:21:39] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[03:24:27] *** Quits: zz_kimundi (kimundi@moz-AEB542AA.dip0.t-ipconnect.de) (Ping timeout)
[03:26:34] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:26:34] *** ChanServ sets mode: +ao dherman dherman
[03:27:44] * brson dinner
[03:28:07] *** Joins: zz_kimundi (kimundi@moz-87973BE2.dip0.t-ipconnect.de)
[03:28:09] *** zz_kimundi is now known as kimundi
[03:30:26] *** Quits: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca) (Quit: canhtak)
[03:33:10] <sfackler> cmr: while you're at it, could you add bool to the keyword list?
[03:33:26] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[03:33:28] <cmr> sfackler: in pygments?
[03:33:30] <dbaupp> sfackler: but... it's not a keyword?
[03:33:36] <dbaupp> rusti: let bool = 1; bool
[03:33:37] -rusti- 1
[03:33:43] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:33:52] <nmatsakis> I guess "catch throw" doesn't work anymore to break on fail
[03:33:56] <sfackler> yeah, but it looks silly when it's the only primitive type that isn't bolded :P
[03:33:57] <cmr> nmatsakis: break rust_fail
[03:34:06] <nmatsakis> cmr: thanks
[03:34:12] <sfackler> why isn't bool a keyword when e.g. int is?
[03:34:27] <dbaupp> sfackler: oh, maybe we should remove int from the keyword list then :P
[03:34:33] <cmr> rusti: let int = 5; int
[03:34:34] -rusti- 5
[03:35:23] <sfackler> I guess what I actually want to ask is to either make none of the primitive types bold, or make bool bold as well :P
[03:41:28] *** Quits: gwty (gwtypc@B8540510.B7CA1378.F44414AF.IP) (Ping timeout)
[03:42:48] <SiegeLord> I made them secondary keywords in my Geany syntax file
[03:43:38] <SiegeLord> I like how prophetic Graydon was about the non-regular syntax biting us when it came to syntax highlighting ;)
[03:44:11] <cmr> well everyone knew it was going to happen
[03:45:50] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:45:50] *** ChanServ sets mode: +ao dherman dherman
[03:46:32] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[03:49:24] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[03:58:05] <cmr> sfackler: added
[03:58:10] <cmr> bitbucket and hg seem really nice
[03:58:29] <cmr> I shouldn't have written them off when I was young and impressionable (ie, three years ago...)
[04:05:03] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[04:10:53] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[04:16:34] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[04:16:34] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14eace00a to 14a121f7b: 02http://git.io/N3iJvQ
[04:16:34] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[04:16:35] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[04:16:35] <ghrust> 01[13rust01] 15bors pushed 8 new commits to 06auto: 02http://git.io/s98BcA
[04:16:35] <ghrust> 13rust/06auto 14c1e3e2d 15Alex Crichton: Fix leaking trait imports across modules...
[04:16:35] <ghrust> 13rust/06auto 14f117549 15Alex Crichton: rustc: De-indent portions of middle::resolve...
[04:16:36] <ghrust> 13rust/06auto 140655eda 15Alex Crichton: std: Fill in all missing imports...
[04:16:38] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[04:25:34] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[04:34:51] *** Quits: jdm|away (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[04:35:22] *** Quits: tupshin_ (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Ping timeout)
[04:38:55] *** Quits: pnkfelix (pnkfelix@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[04:53:14] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: Leaving)
[04:56:56] <brson> restarting buildbot
[04:59:25] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[04:59:26] *** ChanServ sets mode: +ao pcwalton pcwalton
[04:59:33] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Client exited)
[05:10:49] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[05:10:50] *** ChanServ sets mode: +ao dherman dherman
[05:11:39] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[05:11:39] *** ChanServ sets mode: +o tjc
[05:14:38] <acrichto> brson: I've bound that "buildbot reconfig" normally picks up the configuration on the next build
[05:15:21] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: Textual IRC Client: www.textualapp.com)
[05:17:03] <brson> acrichto: good to know
[05:18:09] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[05:19:39] <dbaupp> brson: https://github.com/mozilla/rust/pull/11397 r?
[05:20:43] <brson> dbaupp: how does your pr compare to https://github.com/mozilla/rust/pull/11388
[05:21:08] <dbaupp> brson: that one is just spelling
[05:21:19] <brson> ok
[05:21:23] <dbaupp> mine is no spelling at all
[05:21:28] <dbaupp> (in theory they don't conflict.)
[05:22:47] <brson> dbaupp: I'm going to combine all the outstanding doc prs into one to get them through tonight without conflicts
[05:23:01] <dbaupp> brson: ok
[05:27:48] <brson> dbaupp: r? https://github.com/mozilla/rust/pull/11398 p=1
[05:28:52] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[05:30:26] <brson> pushed an update
[05:30:47] <brson> looks like i already got most of b1nd's changes
[05:32:16] <dbaupp> brson: looks good
[05:32:30] <brson> dbaupp: i pushed the typo fix
[05:32:53] <dbaupp> yup, r+'d that commit already :)
[05:32:53] <brson> thanks
[05:33:06] <brson> now to run the tests and verify it still passes..
[05:33:17] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[05:37:15] <cmr> is  $$(TLIB$(1)_T_$(2)_H_$(3)) where all libraries are built into?
[05:37:44] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[05:37:50] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[05:37:50] *** ChanServ sets mode: +qo brson brson
[05:37:53] <cmr> in particular I need to pull in rustrt...
[05:37:56] <brson> cmr: yes
[05:38:36] <cmr> acrichto: ping
[05:38:52] <acrichto> cmr: pong
[05:39:00] <cmr> # SNAP a5fa1d9 remove this after the stage0 snapshot from rules below
[05:39:06] <cmr> acrichto: does that mean LFLAGS is going away?
[05:39:09] <acrichto> yes
[05:39:13] <acrichto> that was just temporary
[05:39:32] <cmr> how does one link to librustrt, then?
[05:39:43] <acrichto> all the flags are there
[05:39:48] <acrichto> it was just a stage0 thing
[05:39:51] <acrichto> rustc => rustlib
[05:41:00] <brson> i really hope we get an rc tomorrow morning
[05:41:35] <cmr> acrichto: all the flags are where?
[05:42:41] <cmr> oh wait this is more dire than I thought
[05:42:44] <cmr> and unrelated to my changes
[05:42:59] <cmr> (I hope)
[05:43:12] <cmr> https://gist.github.com/cmr/3f63631147d852d2c2d0
[05:43:28] <cmr> ... running make again fixed it
[05:43:33] <cmr> known bug?
[05:43:34] <acrichto> cmr: are you making a new snap?
[05:43:44] <cmr> acrichto: no
[05:43:53] <acrichto> we need a new snap to remove those flags?
[05:44:04] <cmr> gah now I'm getting the lib.rlib.is_none() thing everyone else is getting too
[06:08:26] *** Joins: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP)
[06:10:45] <cmr> Someone said somewhere, either on reddit or the ML, "To be a successful systems language, you need to be a successful general purpose language"
[06:11:09] <cmr> That's been churning in my head quite a bit, and I'm afraid rust might not be appropriate for GP
[06:14:25] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[06:14:58] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[06:16:42] <brson> istm that there's basically only ever been one successful systems language
[06:18:47] <cmr> brson: C?
[06:18:53] <brson> i wonder what it means to be a general purpose language
[06:18:55] <brson> cmr: yes
[06:18:59] <cmr> me too.
[06:19:00] <brson> or C/C++
[06:19:27] <brson> like, python and C# seem 'general purpose' to me
[06:19:29] <bjz> I dunno if you need to be general purpose
[06:19:30] <brson> but not systems
[06:19:50] <brson> I don't know if I'd call C++ general purpose
[06:19:57] <bjz> if you want to be a 'good' systems lang, maybe it pays to sacrifice some things
[06:20:49] <brson> maybe in the 90's C++ was more general purpose
[06:21:04] <brson> when we didn't have better options
[06:21:12] <bjz> brson: I would also put Haskell, Clojure, D, Go, OCaml as general purpose
[06:21:53] <bjz> rust leans more towards a DSL imo
[06:22:26] <bjz> brson: why in the 90s?
[06:23:49] <brson> bjz: i just feel like C++ was more pervasive then (but maybe it's just when I was using it)
[06:24:13] <bjz> do you mean compared with other langs out at the time?
[06:24:49] <brson> yes. OO was super popular and there weren't nearly as many languages
[06:25:12] <brson> i think it was just C++ and perl, right?
[06:25:16] <bjz> I guess smalltalk was on the way out at that stage
[06:25:46] <bjz> early 90s
[06:25:58] <bjz> with the introduction of Java
[06:26:18] <brson> oh, yeah. java existed
[06:27:03] <bjz> I don't know how popular Wirth's langs were at that time
[06:28:11] <bjz> Pascal was probably considered general purpose a couple of decades before
[06:29:18] <cmr> I had to learn a bit of pascal for "let's build a compiler"
[06:29:22] <cmr> it seems like a super neat language
[06:29:27] <bjz> yeah
[06:29:35] <cmr> and it makes me wonder why C was popular when pascal was a thing
[06:30:13] <bjz> even more with modula
[06:30:24] <bjz> a guy on #yfl is a big fan of Modula, was sad it never took off over C
[06:30:27] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[06:32:04] <dbaupp> https://github.com/mozilla/rust/pull/11399
[06:33:01] * dbaupp disappears for a few hours
[06:33:06] <cmr> dbaupp: ah you do add #[managed]
[06:33:09] <cmr> that was going to be my first quesiton :)
[06:33:10] <bjz> dbaupp: \o/
[06:37:14] <bjz> dbaupp: http://youtu.be/aIHAEYyoTUc?t=29m27s
[06:37:52] <bjz> dbaupp: stepanov's great contribution to computer science (in his eyes) :P
[06:40:22] <acrichto> brson: in terms of a release soon, looks like cross compilation is broken (the snap failed)
[06:40:47] <brson> gluh
[06:40:58] <acrichto> it's this business with rustc => rustlib
[06:41:15] <acrichto> something may just not be getting cleaned out
[06:41:49] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[06:41:49] <ghrust> 01[13rust01] 15alexcrichton merged 06master into 06snap-stage3: 02http://git.io/FIA8-Q
[06:41:49] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[06:42:19] <klutzy> maybe `cp rustlib/... rustc/...` is not properly called?
[06:43:01] <acrichto> that shouldn't be happening
[06:43:04] <acrichto> that just corrupts everything
[06:43:07] <acrichto> it's using -L
[06:43:12] <acrichto> but it's having the smae directory twice
[06:43:15] <acrichto> and we're not deduping properly
[06:43:24] <acrichto> or rather it's showing up in rustc and rustlib
[06:43:32] <acrichto> where rustc should have been cleaned
[06:47:03] <brson> acrichto: are you going to investigate the fix?
[06:49:37] <acrichto> brson: gonna just try to custom make a snap
[06:49:46] <acrichto> as in ssh to the bots and clean manually
[06:49:51] <acrichto> once we have a snap this will not be a problem
[06:50:03] <cmr> Any opposition to removing @[]?
[06:51:27] *** Quits: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP) (Input/output error)
[06:51:37] <brson> cmr: not here. seems inevitable
[06:52:13] <acrichto> impl char { pub fn foo(&self); }
[06:52:15] <acrichto> that works!
[06:52:21] <acrichto> and even in a library!
[06:52:37] <cmr> looks like there were only three users, and a ton of tests.
[06:52:45] <brson> acrichto: that's surprising
[06:52:52] <cmr> I agree
[06:52:56] <cmr> I wouldn't expect it to work in a library
[06:52:56] <acrichto> brson: after lots of modifications
[06:53:02] <acrichto> I'm making it a lang item
[06:53:08] <acrichto> so you're guaranteed there's only one
[06:53:12] <brson> ah
[06:53:13] <cmr> I'd expact an #[owns_builtins] in a crate, and..
[06:53:16] <cmr> ok
[06:53:18] <cmr> makes sense
[06:53:23] <acrichto> cmr: yeah this was less janky
[06:53:27] <cmr> agree
[06:53:42] <acrichto> dunno how to do tuples/strings/vecs though
[06:53:46] <acrichto> I suppose strings would be *too* hard
[06:54:52] <acrichto> anyone opposed if I remove like all of the numeric traits now?
[06:55:00] <cmr> not me
[06:55:25] <cmr> bjz: ^
[06:55:31] <acrichto> hm, I gues only some can be removed
[06:55:34] <acrichto> others are legitimately used
[06:55:56] <acrichto> so... many... traits...
[06:56:06] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[06:56:27] <bjz> acrichto: yeah, I want to simplify them
[06:56:54] <brson> acrichto: I think this will require broader discussion
[06:56:54] <bjz> and also not export them in the prelude
[06:56:59] <brson> but I'm probably in favor
[06:57:10] <acrichto> yean no none of these are really one-off traits
[06:57:12] <acrichto> like Char/Bool
[06:57:18] <acrichto> they're all actually used throughout
[06:57:45] <bjz> https://github.com/mozilla/rust/issues/10387
[06:58:07] <bjz> nobody commented... :(
[06:58:22] <acrichto> Times, that trait can be removed
[06:58:27] <bjz> YES
[06:58:27] <acrichto> (the function stays)
[06:58:32] <acrichto> at least for now
[06:58:43] <acrichto> bjz: I am very much in favor of flattening
[06:58:49] <acrichto> our prelude should be much smaller
[06:58:53] *** Quits: dogweather (dogweather@moz-4EC23EE5.hsd1.or.comcast.net) (Client exited)
[06:59:08] <cmr> I had to type out all of the prelude for the pygments lexer and I was surprised at how large it is
[06:59:27] <bjz> acrichto: if we still have the wrapper funs, then we don't need the traits imported
[06:59:48] <bjz> acrichto: so num::min(1, 2)
[06:59:58] <acrichto> bjz: but those still need a trait bound of some sort
[07:00:13] <bjz> acrichto: well, it infers it
[07:00:24] <bjz> still means you don't need to export it
[07:00:29] <acrichto> ah yes
[07:01:10] <bjz> it's important to keep the namespace clear for more advanced numeric libs
[07:01:56] <bjz> but it would be sad to loose some genericity
[07:02:19] <bjz> ugh - tough issues
[07:02:59] <acrichto> ok so I'm not going to remove any just yet
[07:03:05] <acrichto> doesn't looks like it's so easy
[07:03:20] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[07:03:40] <bjz> acrichto: I definitely thing Algebraic/Trigonometric/Hyperobolic are way too crazy for the std
[07:04:08] <cmr> is there a lint for transmute::<T, T> ?
[07:04:14] <bjz> if we're not getting into Feilds and Groups in the std, then we should just dumb it all down
[07:04:53] <acrichto> ApproxEq :(
[07:05:16] <bjz> hum
[07:05:17] <klutzy> ugh, is it in use?
[07:05:40] <Yurume> klutzy: ApproxEq? I think one of assertion macros use it.
[07:05:57] <bjz> it is used in rust-geom I think, and cgmath, but I don't know if it deserves a trait
[07:06:36] <bjz> it used to be in extra, but I was the silly one who moved it in so it could be part of the numerics
[07:07:12] <bjz> I wonder if it would be better just to have methods on a Float trait instead
[07:08:01] * bjz finds traits hard
[07:08:17] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Client exited)
[07:10:19] *** Joins: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP)
[07:10:23] *** Quits: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP) (Quit: sanxiyn)
[07:11:17] <bjz> on the other hand, it might signify a huge failure of Rust's generic capabilities if the numerics can be used generically out of the box
[07:11:23] <bjz> I really don't know
[07:11:41] *** Joins: glaebhoerl (glaebhoerl@moz-3590251D.kabelnet.hu)
[07:12:04] <klutzy> providing trait for approx equality feels bad to me since "approx" usually depends on situation
[07:12:20] *** Joins: pnkfelix (pnkfelix@70A6E7A1.55ADD344.4C2245EF.IP)
[07:12:49] <bjz> klutzy: it is annoying because we a: don't have associated constants, and b: don't have default args
[07:14:06] <bjz> one question is: should complex numbers and rationals be in our our included libs?
[07:14:27] <bjz> and other things like big nums
[07:14:31] <acrichto> bjz: I don't think libstd should include it, but included by default, yet
[07:14:34] <acrichto> yes*
[07:15:11] <bjz> it's something that should be considered in terms of backwards compat, and how it fits with the current state of affairs
[07:16:24] <bjz> which could be a case for completely zapping all the numeric traits
[07:16:38] <bjz> :(
[07:16:43] <acrichto> in general libstd doesn't need fancy numerics, but in general lots of other crates do
[07:16:51] <bjz> yeah
[07:17:11] <cmr> well we need a robust numerics library
[07:17:19] <bjz> yes
[07:17:20] <cmr> until one exists...
[07:17:29] <bjz> the other issue is fragmentation
[07:17:51] <bjz> maybe fancy numerics could be moved to extra
[07:18:03] <bjz> well - fancyish numerics
[07:18:32] <cmr> until we decide what the "Right Thing" is regarding numerics I think fragmentation is strictly a good thing
[07:18:42] <acrichto> we need to have an easy "add a crate" method in mozilla/rust
[07:18:49] <acrichto> shoving things into libextra can only work for but so long
[07:19:02] <bjz> cmr: that is correct
[07:19:08] <bjz> acrichto: yep
[07:19:14] <cmr> acrichto: we need a package manager!
[07:19:20] <bjz> -_-
[07:19:39] <cmr> github.com/rust-lang/numeric#0.9
[07:19:40] * bjz would love to have the honour of killing his baby
[07:19:42] <acrichto> cmr: not for mozilla/rust, for everyone else, yes
[07:20:05] <acrichto> we need to get the ball rolling somehow
[07:20:10] <acrichto> may as well just give all the crates to everyone
[07:20:16] <cmr> yeah
[07:20:24] <acrichto> then when enough people complain about it taking up too much disk space we can write the package manager :P
[07:20:27] <acrichto> I want to make libio
[07:20:32] <acrichto> io::BufferedReader
[07:20:34] <acrichto> io::MemReader
[07:20:36] <acrichto> io::File
[07:20:37] <acrichto> etc
[07:20:46] <acrichto> io::open("tcp://127.0.0.1")
[07:20:48] <cmr> and libnet?
[07:20:49] <acrichto> io::Url
[07:20:49] <cmr> ah
[07:20:56] <bjz> ooh
[07:20:59] <acrichto> io::open does not belong in libstd at all
[07:21:06] <acrichto> most of io doesn't really need to be in libstd
[07:21:11] <bjz> comm?
[07:21:16] <acrichto> we need to break the habit of having huge crates
[07:21:24] <acrichto> bjz: interesting thought, depends how complicated it gets
[07:21:32] <acrichto> we're planning Chan/Port for now (and that's it)
[07:21:38] <acrichto> so that doesn't seem so bad for libst
[07:21:40] <cmr> the most important thing in std IMO is std::iter
[07:21:42] <acrichto> but perhaps yeah
[07:21:49] <acrichto> iter/option/str/vec
[07:21:49] <bjz> acrichto: one of the issues we have is the trait coherency issues
[07:21:56] <acrichto> bjz: how so?
[07:22:06] <acrichto> impl<T: Foo> Bar for T  ?
[07:22:37] <bjz> acrichto: might not be as large an issue for libstd, but other libs might be forced into being large... I dunno
[07:22:52] <acrichto> bjz: how so?
[07:23:11] <bjz> acrichto: as in you can't impl an external trait on an external type. which makes sense
[07:23:22] <bjz> but yeah, I'm just musing
[07:24:15] <bjz> acrichto: I think I moved to throw all of my cg numerics into cgmath because dependency management was too painful
[07:24:38] <acrichto> what's cg?
[07:24:43] <cmr> computer graphics
[07:24:44] <bjz> cgmath
[07:24:49] <bjz> yeah
[07:24:49] <acrichto> ah
[07:25:04] <acrichto> yeah it really isn't good that we have 0 dependency management among crates
[07:25:10] <acrichto> but that's where rustpkg comes in! (hopefully)
[07:25:16] <cmr> acrichto: have you put any thought into async io? is the plan to just spin up a task when one wants async ops, and select?
[07:25:25] <bjz> I used to have libnumeric, liblmath, libcgmath, libcollide etc
[07:25:45] <bjz> the numeric part moved into the std, the rest I merged
[07:25:54] <acrichto> cmr: not much thought, no, I don't think we need that for 1.0 at all
[07:25:59] <acrichto> too many other pressing things :(
[07:26:08] <cmr> agree
[07:26:28] <acrichto> urgh I lost the ability to write 4.times(|| {})
[07:26:41] * acrichto goes to explore typeck::check::method
[07:26:47] <cmr> Since times doesn't work with `do` anymore, can we just get rid of it?
[07:26:59] <cmr> it reeks of ruby, and it's not even sugary anymore.
[07:27:01] <bjz> acrichto: well its alot uglier now we don't have do
[07:27:02] <cmr> (no offense to ruby)
[07:27:11] <acrichto> sadly it's still a bug in my impls on primitive types
[07:27:19] <acrichto> an inferred int can't select an impl
[07:27:35] <acrichto> at least that's what I think is happening
[07:27:35] <cmr> oh that one will be fun!
[07:27:38] <bjz> ohh
[07:27:44] <acrichto> only 1400 lines!
[07:27:45] <pnkfelix> acrichto: what, so 4i.times(|| {}) works ?
[07:27:46] <bjz> are you testing it?
[07:28:08] <acrichto> pnkfelix: yeah but this is just my own patch, not on rustc master
[07:28:25] <acrichto> bjz: nah just trying to get libstd to compile
[07:29:01] <acrichto> pnkfelix: so if I added "impl uint { ... }" to typeck::check::method, you wouldn't happen to know what I'd need to change for inference on ints to work would you?
[07:30:06] <bjz> acrichto: could it be possible to have a libnum? or is it too intimately associated with libstd?
[07:30:30] <acrichto> bjz: nothing is too intimately associated if you try hard enough
[07:30:40] <acrichto> I extracted libgreen/libnative when many thought it impossible :P
[07:31:14] <bjz> acrichto: that way you could refer to the version numbers of libnum, if we ever decide to update it to something sexy in the future
[07:31:18] <bjz> heh
[07:31:51] <acrichto> but no totaly I would love that
[07:31:59] <klutzy> bjz: do you mind removing ApproxEq? I think it's better to use approx_eq functions only inside std, not outside of crate
[07:32:03] <acrichto> I *do* think that most of std::fmt should stay in std though
[07:32:27] <bjz> klutzy: can I zap it?
[07:33:03] <cmr> does extra::stats use it?
[07:33:47] <bjz> ooh, it does
[07:33:49] <klutzy> and some test/run-{pass,fail} (they can be moved into std tests)
[07:34:04] <klutzy> extra matters
[07:34:11] <bjz> cmr: we could put it back into libextra
[07:34:16] <bjz> cmr: for now
[07:35:27] <klutzy> bjz: btw it would be good to implement precisely-designed approx_eq function and provide it publicly in future
[07:35:48] <bjz> klutzy: would you want to do that?
[07:37:08] <klutzy> bjz: not now; feel free to do them :)
[07:37:12] <bjz> hmm, test/run-pass/const-binops.rs and test/run-pass/intrinsics-math.rs use approx_eq
[07:37:36] <bjz> as does libextra/num/complex.rs
[07:37:45] <bjz> but I could localise the functionality
[07:38:52] <pnkfelix> acrichto: (no sorry I don't have any answers off hand)
[07:39:11] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[07:40:14] <acrichto> hm, may have found it
[07:41:28] <klutzy> bjz: maybe test/ stuff can be ported to #[test]s at std::num?
[07:42:15] <bjz> yep, probably
[07:47:02] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[07:48:40] <acrichto> \o/ 4.times(||{}) works
[07:48:51] <acrichto> if you look at typeck code *really* closely, it's completely understandable
[07:56:34] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[07:56:34] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14387b3f9 to 14a121f7b: 02http://git.io/N3iJvQ
[07:56:34] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[07:56:36] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[07:56:36] <ghrust> 01[13rust01] 15bors pushed 8 new commits to 06auto: 02http://git.io/m2y10w
[07:56:36] <ghrust> 13rust/06auto 14e4804ac 15Alex Crichton: Fix leaking trait imports across modules...
[07:56:36] <ghrust> 13rust/06auto 145350ee7 15Alex Crichton: rustc: De-indent portions of middle::resolve...
[07:56:37] <ghrust> 13rust/06auto 147e0443d 15Alex Crichton: std: Fill in all missing imports...
[07:56:39] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[07:56:51] *** Joins: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP)
[07:57:00] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[08:02:52] *** Quits: blank_name (blank_name@78B04CD2.66204B68.6D228269.IP) (Ping timeout)
[08:16:52] *** Joins: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP)
[08:31:37] *** Quits: pnkfelix (pnkfelix@70A6E7A1.55ADD344.4C2245EF.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[08:37:41] *** Joins: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP)
[08:40:36] *** flaper87|afk is now known as flaper87
[08:45:35] *** Quits: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[08:46:19] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[08:48:22] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[08:56:40] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[08:56:40] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 146070a2e to 14a121f7b: 02http://git.io/N3iJvQ
[08:56:40] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[08:56:41] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[08:56:41] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/B5n8pw
[08:56:41] <ghrust> 13rust/06auto 143425901 15Alex Crichton: Inline reexports in rustdoc...
[08:56:41] <ghrust> 13rust/06auto 149da4eac 15bors: auto merge of #11391 : alexcrichton/rust/rustdoc-inline, r=brson...
[08:56:42] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[09:11:18] *** Quits: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP) (Quit: Leaving)
[09:33:44] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[09:34:58] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[09:43:11] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[09:47:08] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[09:49:08] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[09:53:47] <eddyb> oooh, that's what the lines of code at the start of parse_* are for, parsing the result of a macro expansion with interpolated "chunks"
[10:11:34] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[10:11:47] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[10:11:47] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/B5n8pw
[10:11:47] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[10:16:46] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[10:16:46] <ghrust> 01[13rust01] 15bors pushed 8 new commits to 06auto: 02http://git.io/dTYxrw
[10:16:46] <ghrust> 13rust/06auto 14e4804ac 15Alex Crichton: Fix leaking trait imports across modules...
[10:16:46] <ghrust> 13rust/06auto 145350ee7 15Alex Crichton: rustc: De-indent portions of middle::resolve...
[10:16:47] <ghrust> 13rust/06auto 147e0443d 15Alex Crichton: std: Fill in all missing imports...
[10:16:49] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[10:34:06] *** kimundi is now known as zz_kimundi
[10:42:59] *** Quits: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[11:11:19] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[11:13:40] *** Joins: tupshin_ (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[11:21:37] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[11:21:37] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14a3da2d0 to 149da4eac: 02http://git.io/N3iJvQ
[11:21:37] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[11:34:26] *** zz_kimundi is now known as kimundi
[11:39:08] <dbaupp> erm, the doc builder is failing: http://buildbot.rust-lang.org/builders/doc/builds/1807/steps/compile_1/logs/stdio
[11:40:30] <eddyb> oh, wait, I remember when keywords weren't auto-generated
[11:40:54] <eddyb> so the fancy macro business must be new
[11:41:34] <dbaupp> yes
[11:41:42] <bjz> ?
[11:41:47] <dbaupp> ChrisMorgan went on a bit of a macro rampage
[11:41:49] <dbaupp> <3 macros
[11:41:53] <bjz> :o
[11:42:02] <bjz> what did he do?
[11:42:06] <dbaupp> he made the keyword table and the lang_item table macro-generated
[11:42:15] <dbaupp> rather than repeating constants in 3 different places
[11:42:16] <dbaupp> sec
[11:42:21] <bjz> where is this?
[11:42:42] <bjz> when was this?
[11:42:47] <bjz> sounds cool
[11:42:58] <dbaupp> bjz: https://github.com/mozilla/rust/blob/master/src/libsyntax/parse/token.rs#L319-L480
[11:43:09] <dbaupp> https://github.com/mozilla/rust/blob/master/src/librustc/middle/lang_items.rs#L36
[11:44:04] <eddyb> https://github.com/mozilla/rust/blob/master/src/librustc/middle/lang_items.rs#L209-L210 isn't that a step too far :P?
[11:44:07] <dbaupp> bjz: https://github.com/mozilla/rust/commit/267ac45f410e29a8fa52843c9afa58e56cc33479 and https://github.com/mozilla/rust/commit/0b1bbc5fd6cf477011f5a56ca0d978658a527db9 respectively
[11:44:15] <dbaupp> eddyb: no
[11:44:26] <dbaupp> I wanted the macro to enforce a table layout
[11:44:35] <bjz> HA
[11:44:38] <dbaupp> with +'s and |'s and -'s and everything
[11:44:40] <dbaupp> :P
[11:44:46] <bjz> lets_do_this! {
[11:45:17] <eddyb> dbaupp: DSL much?
[11:45:18] * dbaupp gets back to a write up of his GC
[11:45:21] <dbaupp> eddyb: <3 macros
[11:46:46] <bjz> eddyb: gotta have some whimsy
[11:48:39] <bjz> eddyb: https://github.com/mozilla/rust/blob/master/src/libstd/util.rs#L87-L94
[11:49:32] <eddyb> dbaupp: I now want to write "27, fn malloc" and have it get MallocFnLangItem, "malloc" and malloc_fn from that
[11:49:58] <eddyb> we need concat_idents! to work and to add snake2camel/camel2snake
[11:50:46] <bjz> snakel! and camake!
[11:50:54] <eddyb> =)))
[11:51:32] <eddyb> bjz: I did name my last merged PR "Disowning Visitor" and I thought that was almost crossing the line
[11:51:41] <dbaupp> eddyb: preferably without the 27 too
[11:52:00] <bjz> what should I put down for the reasoning for removing ApproxEq?
[11:52:11] <dbaupp> It's idiosyncratic
[11:52:35] <eddyb> dbaupp: hmpf. maybe we should just have an easy way of grabbing the index in a sequence expansion
[11:52:59] <eddyb> https://github.com/mozilla/rust/blob/master/src/librustc/middle/lang_items.rs#L65
[11:53:00] <bjz> dbaupp: very descriptive
[11:53:17] <eddyb> $# there instead of $num
[11:53:24] <dbaupp> bjz: yup
[11:53:26] * dbaupp <- poet
[11:54:41] <dbaupp> eddyb: that'd be neat `($($foo:expr),*) => { $( $# + $foo ),* }` => `0, 10, 20` => `0 + 0, 1 + 10, 2 + 20`
[11:54:48] <eddyb> someone compared me to Shakespeare recently. I can't write the dumbest composition for school, but I turn into a drama king sometimes (eat a snickers!)
[11:55:35] <eddyb> dbaupp: sadly it still can't do ranges. such are the turing tarpits
[11:56:01] <Yurume> dbaupp: technically speaking it can be achieved with a recursive macro though...
[11:56:19] <eddyb> oh, yeah, I had a cool trick in mind
[11:56:45] <eddyb> range!(0, 1 0 0) could give you all numbers from 0 to 0x100
[11:56:53] <eddyb> much harder (impossible?) in base 10
[11:57:46] <eddyb> (you convert those nibbles to binary and then recursive with a simple binary addition. not sure if it works with the current macro expansion model, though)
[11:57:58] <eddyb> s/recursive/recurse
[12:01:04] <dbaupp> Yurume: starting with 0 and then `+ 1`'ing as you recur?
[12:01:32] <dbaupp> Yurume: I guess it works!
[12:02:33] <bjz> https://github.com/mozilla/rust/pull/11402
[12:02:37] *** Quits: sigma (sigma@moz-BFB7A653.range86-143.btcentralplus.com) (Client exited)
[12:04:18] <Yurume> dbaupp: yeah
[12:05:00] <Yurume> though there are some difficulties with pasting different macro invocations into the same level of AST
[12:05:21] <Yurume> I guess an AST for `[1, 2, 3]` etc. cannot be recursively constructed without a workaround
[12:05:48] <eddyb> ooh, typed arenas are something I wanted when I experimented with P<T>. they might even work with in-place folding or switching arenas after folding https://github.com/mozilla/rust/pull/11358
[12:06:49] <klutzy> bjz: great!
[12:07:06] <bjz> klutzy: was my description ok?
[12:08:52] <klutzy> bjz: I agree with your desc
[12:09:42] <klutzy> bjz: the pr will close this: https://github.com/mozilla/rust/issues/5316
[12:26:41] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[12:26:41] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14075a988 to 149da4eac: 02http://git.io/N3iJvQ
[12:26:41] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[12:26:44] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[12:26:44] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/-jM2iQ
[12:26:44] <ghrust> 13rust/06auto 14b7ff9c1 15Patrick Walton: libextra: Introduce typed arenas....
[12:26:44] <ghrust> 13rust/06auto 14fda71f2 15bors: auto merge of #11358 : pcwalton/rust/typed-arenas, r=alexcrichton...
[12:26:44] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[12:37:03] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Quit: Leaving...)
[12:38:06] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[12:44:30] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[12:49:03] <eddyb> I didn't understand what "CookedStr" was until I saw "RawStr"
[12:58:20] <bjz> hah
[12:58:35] <bjz> do we actually have that?
[12:58:43] <bjz> :o
[13:00:52] <dbaupp> bjz: yes, r"..." == Raw, "..." == Cooked
[13:01:00] <bjz> :P
[13:11:38] *** Joins: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca)
[13:25:31] <eddyb> dbaupp: down to 119. I'm hungry
[13:25:44] <dbaupp> eddyb: eat the compiler errors!
[13:25:48] <dbaupp> nomnomnom
[13:26:03] <eddyb> the errors are just the number of snakes I have left
[13:26:05] <dbaupp> eddyb: (are you doing the whole of libsyntax? :O )
[13:26:11] <eddyb> yeah, why not?
[13:26:50] <eddyb> I should mark the UPPER_CASE constants with #[allow], when they're in enums
[13:35:13] <benh> dbaupp: Does your GC do a right thing when running finalizers for two mutually referencing but otherwise unreferenced objects
[13:41:09] <dbaupp> benh: highly unlikely
[13:41:37] <dbaupp> benh: (as in, no)
[13:41:39] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[13:41:39] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/-jM2iQ
[13:41:39] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[13:44:39] *** Joins: nuts (tii@822A8E7E.6AD15BF5.75D3BBDB.IP)
[13:45:00] <eddyb> error: aborting due to 99 previous errors
[13:45:23] <eddyb> someone can make that joke for me, I forgot how it goes
[13:46:36] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[13:46:36] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/LlKOiA
[13:46:36] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[13:46:37] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[13:46:37] <ghrust> 01[13rust01] 15bors pushed 15 new commits to 06auto: 02http://git.io/FwwbQw
[13:46:37] <ghrust> 13rust/06auto 14a61d7d6 15Brian Anderson: doc: Syntax highlight the cheatsheet
[13:46:37] <ghrust> 13rust/06auto 143100bb4 15Brian Anderson: doc: Fix table format in cheatsheet
[13:46:37] <ghrust> 13rust/06auto 14c2ef4e5 15Brian Anderson: doc: Title guides consistently
[13:46:39] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[13:46:59] <dbaupp> eddyb: "I got 99 errors but memory corruption ain't one"
[13:52:50] <eddyb> great, there's ast::ty_char and middle::ty::ty_char and the former looks unused o_O
[13:54:20] <eddyb> what can create it?
[13:55:53] <eddyb> this is really messed up
[13:56:56] <eddyb> I can't really test it, but it looks like quote_*! does the wrong for character literals
[13:58:02] <eddyb> it calls LIT_CHAR('x', ty_char) though there isn't a second field
[13:59:24] <eddyb> oh, I see, resolve works directly on the AST, no ty::ctxt, and it puts ty_char in an interner
[13:59:39] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[14:06:04] <eddyb> some of these would look much better with enum mod :S
[14:38:38] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[14:43:33] <dbaupp> benh: hm, we already require #[unsafe_destructor] for impl'ing Drop on non-Send types, so it's not our problem if they have a destructor that crashes when their object contains cyclic references and some other part of it was destroyed first. (i.e. they were warned but ignored the warning by adding that attribute.)
[14:44:02] <dbaupp> benh: (hence, I'm not particularly worried about the pure run-the-destructor finaliser)
[14:44:42] <benh> Ah, I see
[14:49:09] <dbaupp> gah, whut
[14:49:13] <dbaupp> this failure makes no sense: http://buildbot.rust-lang.org/builders/auto-linux-32-nopt-t/builds/2555/steps/test/logs/stdio
[14:49:48] <dbaupp> as far as I can tell,  from_str_radix("deadbeef", 16) returns None on some platforms. 
[14:49:55] <dbaupp> :(
[14:51:50] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[14:51:50] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14798d436 to 14fda71f2: 02http://git.io/N3iJvQ
[14:51:50] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[14:51:50] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[14:51:51] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Yqyxtw
[14:51:51] <ghrust> 13rust/06auto 148317e88 15kvark: Fixed Gc::clone, implemented Gc::ptr_eq, fixed test-building warnings
[14:51:51] <ghrust> 13rust/06auto 14e02bbab 15bors: auto merge of #11369 : kvark/rust/master, r=alexcrichton...
[14:51:51] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[14:53:40] <eddyb> dbaupp: does it return int or uint?
[14:53:51] <dbaupp> eddyb: shouldn't matter?
[14:53:58] <dbaupp> in this case, int, thoguh
[14:54:03] <eddyb> deadbeef doesn't fit in i32 :)
[14:54:09] <dbaupp> oh!
[14:54:21] <dbaupp> eddyb wins!
[14:54:30] * dbaupp will fix that
[14:55:43] *** Joins: doomlord_ (servitor@moz-CA917A47.range86-184.btcentralplus.com)
[15:09:02] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[15:09:02] *** ChanServ sets mode: +ao dherman dherman
[15:12:58] <eddyb> and the lucky number is... 77!
[15:16:24] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[15:16:24] *** ChanServ sets mode: +qo brson brson
[15:26:42] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[15:26:42] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14e02bbab to 14fda71f2: 02http://git.io/N3iJvQ
[15:26:42] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[15:26:42] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[15:26:42] <ghrust> 01[13rust01] 15bors pushed 16 new commits to 06auto: 02http://git.io/PsQeGQ
[15:26:42] <ghrust> 13rust/06auto 14a61d7d6 15Brian Anderson: doc: Syntax highlight the cheatsheet
[15:26:42] <ghrust> 13rust/06auto 143100bb4 15Brian Anderson: doc: Fix table format in cheatsheet
[15:26:43] <ghrust> 13rust/06auto 14c2ef4e5 15Brian Anderson: doc: Title guides consistently
[15:26:45] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[15:28:13] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:28:36] *** kimundi is now known as zz_kimundi
[15:32:49] <eddyb> dbaupp: PPAnn or PpAnn?
[15:32:56] <dbaupp> what?
[15:33:15] <dbaupp> oh, naming enum variants?
[15:33:45] <eddyb> dbaupp: a trait. pp is for pretty printing
[15:34:29] <dbaupp> don't know
[15:34:37] <dbaupp> Both look kinda silly :P
[15:36:22] <eddyb> PrettyAnn?
[15:36:44] <eddyb> ann is for annotate, I think. it gets messier if I change that part
[15:37:00] <dbaupp> PpAnn is fine by me, I guess
[15:37:05] <brson> PpAnn
[15:38:55] <dbaupp> brson: https://github.com/mozilla/rust/pull/11405
[15:38:57] <eddyb> what's with contents: ()? remnants from the days of a rust without unit structs?
[15:41:25] *** Quits: Kxepal832 (Miranda@moz-CEB0DF31.pppoe.mtu-net.ru) (Ping timeout)
[15:42:16] <brson> dbaupp: thanks!
[15:45:46] <eddyb> dbaupp: I'm tempted to refactor pprust to not have a @Trait in the main state structure and use methods a little more
[15:52:22] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[15:52:22] <ghrust> 01[13rust01] 15brson fast-forwarded 06dist-snap from 14b6602cb to 149dc44c7: 02http://git.io/pVXa9Q
[15:52:22] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[15:53:10] <dbaupp> eddyb: don't let the refactoring get too big
[15:53:54] <eddyb> it's slightly hard to rename pprust::ps... but it's not referenced from outside code. how does "State" sound?
[15:54:04] <dbaupp> fine
[15:54:20] <eddyb> or I could go for Ctx, to keep the line breaks at a minimum
[15:55:17] <dbaupp> \o/ only 6.5x slower than plain malloc
[16:00:41] <eddyb> dbaupp: too big? you mean like  114 files changed, 2992 insertions(+), 3061 deletions(-)
[16:01:28] <dbaupp> yeah, like that
[16:02:53] <dbaupp> rebases will be fun
[16:03:08] <eddyb> doing one right now :D
[16:06:10] *** zz_kimundi is now known as kimundi
[16:26:48] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[16:32:44] *** Joins: ChristopherBurg (Christophe@moz-2C03E71B.hfc.comcastbusiness.net)
[16:36:28] <eddyb> dbaupp: so many unshaved pubs...
[16:36:37] * eddyb shows himself out
[16:38:54] *** dherman is now known as dherman_afk
[16:39:50] <dbaupp> brson: that doc PR is landing
[16:39:59] <dbaupp> (all tests pass, etc.)
[16:41:40] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[16:41:40] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/PsQeGQ
[16:41:40] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[16:42:12] <brson> \o/
[16:43:13] <brson> one more pr and we can have an rc
[16:43:22] <brson> well, as long as we don't need a snapshot first
[16:44:26] *** Joins: blank_name (blank_name@78B04CD2.66204B68.6D228269.IP)
[16:44:36] <eddyb> this is bad, a dead type exists just because it's public
[16:45:39] <dbaupp> eddyb: it's impossible for the compiler to tell if an exported type is semantically dead, unfortunately :(
[16:46:09] <eddyb> dbaupp: yeah, I know. I can only because I'm grepping all libraries at once
[16:46:36] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[16:46:36] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/ShKWNg
[16:46:36] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[16:46:36] <eddyb> (and I don't care for outside consumers. are there any? I don't even know)
[16:46:38] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[16:46:38] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/XCzq1Q
[16:46:38] <ghrust> 13rust/06auto 14004dae6 15Alex Crichton: Fix the snapshot and cross compilation...
[16:46:38] <ghrust> 13rust/06auto 14f3a8baa 15bors: auto merge of #11407 : alexcrichton/rust/fix-snap, r=brson...
[16:46:38] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[16:46:57] *** Quits: dherman_afk (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman_afk)
[16:47:34] *** Quits: glaebhoerl (glaebhoerl@moz-3590251D.kabelnet.hu) (Ping timeout)
[17:05:15] <eddyb> dbaupp: here's a nice command to find enum variants where a simple grep would have hundreds of false positives: egrep '[^.]\b(success|failure|error)\(' -r src/lib{rustc,rustdoc,rustpkg,syntax}
[17:06:40] <eddyb> why is Success highlighted? is/was it in libstd?
[17:07:38] * dbaupp doesn't know
[17:07:43] *** Joins: cmr|mibbit (Mibbit@moz-D849C3F6.sub-70-209-137.myvzw.com)
[17:08:42] *** Quits: cmr|mibbit (Mibbit@moz-D849C3F6.sub-70-209-137.myvzw.com) (Quit: http://www.mibbit.com ajax IRC Client)
[17:16:06] <eddyb> dbaupp: oooh, you can have two separate $(...)* lists and zip them if they have the same length
[17:16:37] <dbaupp> eddyb: what happens if they are different lengths?
[17:17:00] <eddyb> "Inconsistent lockstep iteration"
[17:17:38] *** Joins: Kxepal (Miranda@moz-4DFD725C.pppoe.mtu-net.ru)
[17:17:55] <dbaupp> weird error message
[17:18:04] <dbaupp> I guess it make sense
[17:28:04] *** Quits: blank_name (blank_name@78B04CD2.66204B68.6D228269.IP) (Ping timeout)
[17:28:26] <eddyb> why does the syntax::parse::attr::parser_attr trait exist? it's only implemented by Parser
[17:55:35] *** Joins: festive_pan (festive.pa@moz-4E4FA4FA.ece.cmu.edu)
[18:02:09] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[18:02:09] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/XCzq1Q
[18:02:09] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[18:03:33] <mrmonday> oh no, rc... looks like I'll have missed 0.9 for my raw socket stuff then :<
[18:03:57] <mrmonday> never mind
[18:06:49] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[18:06:49] <ghrust> 01[13rust01] 15bors pushed 8 new commits to 06auto: 02http://git.io/N0ru7Q
[18:06:49] <ghrust> 13rust/06auto 14e4804ac 15Alex Crichton: Fix leaking trait imports across modules...
[18:06:49] <ghrust> 13rust/06auto 145350ee7 15Alex Crichton: rustc: De-indent portions of middle::resolve...
[18:06:50] <ghrust> 13rust/06auto 147e0443d 15Alex Crichton: std: Fill in all missing imports...
[18:06:52] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[18:11:14] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[18:12:44] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[18:25:08] *** Quits: luz (lucy@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[18:27:59] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[18:36:53] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[18:36:53] <ghrust> 01[13rust01] 15alexcrichton merged 06master into 06snap-stage3: 02http://git.io/fgPQ2Q
[18:36:53] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[18:38:49] *** Joins: pnkfelix (pnkfelix@moz-7B0110AD.mv.mozilla.com)
[18:41:46] <cmr> dbaupp: bencher + builder finally caught up!
[18:43:01] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[18:43:01] *** ChanServ sets mode: +ao dherman dherman
[18:46:24] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[18:53:00] *** Joins: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[18:55:31] <eddyb> ooh, they're dropping like flies. down to 29
[18:55:48] <eddyb> most of them in ast::ty_
[18:56:10] <cmr> eddyb: whatcha working on this time?
[18:56:19] <cmr> proper-naming?
[18:56:43] <eddyb> cmr: mhmm. that number is the number of errors when compiling libsyntax with -D non-camel-case-types
[19:02:23] *** Joins: sms (Mibbit@moz-2202AB44.hsd1.ga.comcast.net)
[19:04:40] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[19:05:03] *** Joins: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[19:07:43] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[19:07:43] *** ChanServ sets mode: +ao dherman dherman
[19:08:18] *** Joins: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[19:09:20] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Connection reset by peer)
[19:09:21] *** Joins: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[19:09:57] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[19:09:57] <ghrust> 01[13rust01] 15brson merged 06master into 06dist-snap: 02http://git.io/wvD8rw
[19:09:57] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[19:15:56] <eddyb> dbaupp: I am an idiot not to use http://huonw.github.io/isrustfastyet/pull_requests/
[19:20:40] <cmr> indeed you are
[19:20:55] <cmr> it's probably the most understated yet useful feature of irfy :)
[19:21:36] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[19:21:36] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/N0ru7Q
[19:21:36] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[19:21:57] <eddyb> cmr: imagine me trying to find a PR in the graph :P
[19:26:33] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[19:26:33] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/I7VolA
[19:26:33] <ghrust> 13rust/06auto 14ad3a179 15Michael Woerister: Fix CodeMap issue in expand_include_str()
[19:26:33] <ghrust> 13rust/06auto 1497005c0 15bors: auto merge of #11401 : michaelwoerister/rust/issue11322, r=alexcrichton...
[19:26:33] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[19:26:34] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[19:26:34] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/QmZOkQ
[19:26:34] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[19:33:45] *** Quits: festive_pan (festive.pa@moz-4E4FA4FA.ece.cmu.edu) (Quit: festive_pan)
[19:44:47] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:46:23] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Quit: Leaving)
[19:46:29] *** Joins: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[19:49:00] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[19:51:51] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[19:52:17] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[19:53:08] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[19:53:08] *** ChanServ sets mode: +ao pcwalton pcwalton
[19:55:31] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:00:21] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[20:00:22] *** ChanServ sets mode: +o tjc
[20:10:55] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[20:11:15] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[20:22:54] <cmr> error: aborting due to 63 previous errors
[20:22:58] <cmr> that's how you know you're doing it right!
[20:25:47] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[20:27:31] <cmr> I think we have the best error messages, overall, of any language I've used.
[20:27:40] <cmr> clang *might* surpass us
[20:28:49] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[20:31:06] <tjc> cmr: I think GHC's error messages are in the same ballpark as ours, quality-wise
[20:31:26] <cmr> tjc: I was just using ghc which prompted the thought, actually
[20:31:31] <cmr> they are pretty good.
[20:31:45] <cmr> I figured if ghc wasn't drastically better than us, nothing is
[20:31:51] <tjc> they've definitely put a lot of work into it... over a period of *14 years*
[20:31:59] <tjc> so I think Rust has done a good job taking less time than that :-)
[20:33:24] * cmr has been learning haskell during travel/compiletime
[20:34:13] * tjc remembers when GHC compile times were slow enough that you could learn a different language during your Haskell compiles, and not vice versa ;-)
[20:34:27] <cmr> heh
[20:34:48] <cmr>  `t#0` moved here because ...
[20:34:51] <cmr> that's a new one.. hygiene?
[20:34:56] <cmr> shadowing?
[20:35:59] <cmr> I really hope none of libsyntax depended on reference equality of @str, because I'm adding clones all over the place.
[20:40:58] <tjc> I... don't *think* anything should depend on reference equality of @str
[20:41:01] <tjc> unless it's unsafe code
[20:41:27] <cmr> I'm worried about the interner, but I think it should be fine, iirc.
[20:42:38] <tjc> yeah, that's unsafe
[20:42:44] <tjc> so at least it's easy to find all the places that might be affected
[20:43:30] <cmr> \o/ yay rust
[20:46:37] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[20:46:37] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/I7VolA
[20:46:37] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[20:49:59] <eddyb> cmr: what are you touching?
[20:50:04] <cmr> eddyb: everything
[20:50:08] <eddyb> ouch
[20:50:13] <cmr> it shouldn't conflict with your patch, I don't think
[20:50:15] <cmr> or if it does it's minor
[20:50:22] <cmr> mostly just @str -> ~str / &str
[20:50:41] <eddyb> aha, try to keep the cloning to a minimum
[20:50:55] <cmr> I gave up on that about an hour ago
[20:51:07] <cmr> :p
[20:51:26] <cmr> I'm not interested in restructuring just to remove @str, that can come later.
[20:51:38] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[20:51:38] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/htR39w
[20:51:38] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[20:58:46] <mrmonday> yay, made a pull request ^_^
[20:59:01] <cmr> mrmonday: link? :)
[20:59:10] <cmr> ah there it is
[20:59:12] <cmr> bors is slow
[20:59:14] <mrmonday> https://github.com/mozilla/rust/pull/11410
[20:59:14] <cmr> ohh raw sockets
[20:59:52] <mrmonday> yah
[21:00:10] <mrmonday> I should have had a pull request months ago, I was overwhelmed with other stuff though
[21:00:18] <cmr> life happens.
[21:00:30] <mrmonday> which was particularly annoying given the massive refactorings of all the libuv/io stuff :p
[21:01:34] <cmr> mrmonday: we have varargs support now.
[21:01:46] <cmr> pub fn fcnttl(fd: c_int, cmd: c_int, ...) -> c_int;
[21:01:58] <mrmonday> oh, is that so? it wasn't there when I looked a week or so ago
[21:02:05] <vadimcn> Can somebody please explain why separate compilation is considered impossible for Rust?  :)
[21:02:33] <cmr> vadimcn: separate compilation as in compile-each-file-and-then-link-together?
[21:02:38] <mrmonday> cmr: how do I tell Rust to use the native backend? just for testing purposes
[21:02:44] <vadimcn> cmr: yes
[21:02:57] <cmr> mrmonday: https://gist.github.com/anonymous/8162357
[21:03:19] <cmr> vadimcn: so one problem is cyclical dependencies between modules.
[21:03:23] <cmr> I don't think it's impossible
[21:03:26] <cmr> it'd be hard, though.
[21:03:29] <cmr> (as in a lot of work)
[21:03:55] <cmr> and for probably no gain, esp compared to properly parallelizing rustc.
[21:03:59] <mrmonday> D can do separate compilation with cyclical dependencies, so it's definitely possible
[21:04:12] <mrmonday> it's a heck of a lot slower though
[21:04:35] <mrmonday> cmr: cool, thanks :)
[21:06:35] <SiegeLord> Rust modules are not separate compillation units... that's real all there is to it
[21:06:36] *** Joins: Edwards (MeltdownMo@moz-B62E1D6B.members.linode.com)
[21:06:55] <SiegeLord> *really
[21:07:14] <SiegeLord> D modules are separate compilation units, hence it's possible to parallelize
[21:08:58] <vadimcn> SiegeLord: Suppose rust emitted dependency graph between modules and suppose module object files contained metadata.   Then rustc could re-compile only stuff that needs re-compiling, no?
[21:09:55] <vadimcn> cmr: so we are waiting for LLVM to implement function-level parallel code generation?
[21:10:17] <SiegeLord> vadimcn, That seems to go against the compilation unit idea...
[21:10:20] <mrmonday> SiegeLord: aah, that'd do it actually
[21:10:23] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:10:28] <tjc> vadimcn: the crate is the unit of dependencies, not the module
[21:10:33] <tjc> think of modules in Rust as just for namespace control
[21:10:39] <tjc> the compiler back-end doesn't really care about modules
[21:10:50] <cmr> vadimcn: there are also things we can do within rustc itself; type checking can be parallelized, as can resolution afaik.
[21:11:00] <cmr> but if you look at -Z time-passes ... only so much to be gained.
[21:11:33] <vadimcn> okay, not modules but source files perhaps
[21:11:47] <cmr> I think we could achieve incremental compilation with some trickery.
[21:11:49] <eddyb> adjusting trans to output easier to optimize LLVM IR is a better goal
[21:12:04] <eddyb> cmr: I've thought about it and it's a mess
[21:12:05] <tjc> again, source files aren't a particularly useful unit of dependencies because there can be cyclic dependencies between source files within a crate
[21:12:16] <kimundi> vadimcn: source files _contain_ modules :P
[21:12:30] <vadimcn> cmr: yes, I should have said "incremental"  perhaps.   The first time you'd have to build everything of course.
[21:12:30] <tjc> putting things in separate files is purely for convenience -- at least right now, the compiler is designed so that it doesn't really matter whether or not you put everything in one file
[21:12:39] <tjc> changing that would be a pretty big redesign of the language.
[21:12:47] <tjc> not saying it's impossible, but it's unlikely at this point
[21:12:50] <kimundi> source files are an irrelevant unit of measurment - having more than one of them per crate is just convenience
[21:12:55] <cmr> eddyb: it is a mess. but if we disable inlining for incremental builds, I'm pretty sure we could achieve it.
[21:12:56] <tjc> right
[21:13:04] <eddyb> cmr: by parallelizing parts of the compilation process (like parsing), we'll find ways to deal with some of the issues, and then we have *a chance* at solving similar issues with incremental builds
[21:13:04] <cmr> hell, msvc even has incremental *linking*
[21:13:15] <SiegeLord> That doesn't sound very impressive
[21:14:00] <SiegeLord> It's one thing to parallelize an inherently parallel process... compilation of a compilation unit is not an inherently parallel task
[21:14:04] <cmr> rustc is a pretty damn good compiler considering how young it is..
[21:14:16] <SiegeLord> I say it can't be done. Split your code base into multiple crates
[21:14:31] <vadimcn> but you've gotta admit - build times are currently abysmal, so if we set ideology aside, would it be worth considering incremental compilation, if only for debug builds?
[21:14:35] <tjc> I think the most practical solution right now is for people to do what SiegeLord just suggested ^
[21:14:49] <tjc> vadimcn: I agree that build times are terrible. but it's not a matter of ideology to explain the constraints of a language
[21:15:08] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:15:10] <tjc> it's a practical thing -- I'm personally not in love with the whole crate-as-compilation-unit thing, but throwing that out would be a radical change and quite possibly take years
[21:15:24] *** Joins: tikue (tkuehn@moz-C55F9DFF.hsd1.pa.comcast.net)
[21:17:16] <tjc> when I was working on Rust full-time I wanted to spend a couple of months on this myself. I thought it could be done without changing the language...
[21:17:24] <tjc> but I don't think it actually could be.
[21:17:37] <vadimcn> tjc: so what are the roadblocks?
[21:17:38] <cmr> SiegeLord: I don't see any inherent difficulties in it. It'd just need some pretty intense restructuring to rustc.
[21:17:49] *** Quits: tikue (tkuehn@moz-C55F9DFF.hsd1.pa.comcast.net) (Quit: tikue)
[21:17:50] <tjc> vadimcn: they were explained above
[21:17:57] *** Joins: tikue (tkuehn@moz-C55F9DFF.hsd1.pa.comcast.net)
[21:17:59] <tjc> intra-crate cyclic dependencies
[21:18:23] <SiegeLord> cmr, There is no language in existence, afaik, that does it that way
[21:18:39] <SiegeLord> Every language I know parallelizes on the level of compilation units
[21:18:48] <cmr> sure, because that's the easy thing to do.
[21:18:51] <vadimcn> files that have cyclic dependencies would have to be rebuilt if any one of them changes
[21:19:09] <SiegeLord> And even it you do, what about distcc?
[21:19:18] <SiegeLord> You will you fling rustc across multiple computers?
[21:19:23] <tjc> if it's easier to think about it this way, vadimcn, imagine that rustc concatenates together all the files in a crate
[21:19:42] <tjc> which you could essentially do with any crate (except for, syntactically, moving all the `extern mod`s and `use`s to the top)
[21:19:49] <eddyb> vadimcn: I'm pretty sure that modifying any of libsyntax's files requires a full rebuild
[21:20:38] *** kimundi is now known as zz_kimundi
[21:20:42] <tjc> and also imagine that once the parser does this concatenation, there is no way to go back and recover the file structure
[21:20:47] <cmr> SiegeLord: no, I don't think distcc is a viable model.
[21:21:00] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[21:21:00] <ghrust> 01[13rust01] 15brson merged 06master into 06dist-snap: 02http://git.io/hey6rg
[21:21:00] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[21:21:08] <cmr> It would be multiple tasks each working on a particuar part of the item graph.
[21:21:28] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[21:21:28] *** ChanServ sets mode: +ao dherman dherman
[21:21:29] <SiegeLord> Well, there you go. I just don't think anything will beat multiple crate solution in general
[21:21:31] <vadimcn> I just got wondering if it could save intermediate data structures and just load them instead of re-doing all passes every time
[21:21:45] <cmr> No, likely not.
[21:21:56] <cmr> I don't think that means we should toss out the idea of parallelizing rustc at all.
[21:22:52] <eddyb> vadimcn: as long as you can't save LLVM function passes from being run, you're not doing much
[21:23:12] <eddyb> and that requires LLVM producing dependency information during optimization
[21:24:11] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Connection reset by peer)
[21:24:18] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[21:24:18] *** ChanServ sets mode: +o tjc
[21:26:03] <SiegeLord> cmr, I'd just focus on making multiple crates easy to use (i.e. focusing on metadata being efficient) and then just hope somebody parallizes LLVM
[21:26:30] <SiegeLord> Looking at pass timings tells me that not that much time is spent in rustc itself
[21:26:32] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[21:26:32] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 148cdf510 to 1497005c0: 02http://git.io/N3iJvQ
[21:26:32] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[21:26:36] <tjc> making metadata more efficient would be a win in any case
[21:26:37] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[21:26:37] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/y5sFOA
[21:26:37] <ghrust> 13rust/06auto 14a1f4670 15Alex Crichton: Remove eof() from io::Reader
[21:26:37] <ghrust> 13rust/06auto 145e2a3dc 15bors: auto merge of #11376 : alexcrichton/rust/remove-eof, r=pcwalton...
[21:26:37] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[21:26:53] <vadimcn> eddyb: I was thinking of saving .o file for each source file and re-using them if nothing inside could have changed
[21:27:04] <eddyb> vadimcn: it's much much more complicated than that
[21:27:09] <tjc> vadimcn: there is no one-to-one mapping from source files to .o files.
[21:27:20] <eddyb> vadimcn: .o is output after cross-function optimizations
[21:27:22] <tjc> again, imagine that rustc concatenates together all the source files and generates a single object file from them.
[21:27:27] <tjc> that's not exactly what happens, but close enough.
[21:27:53] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[21:27:57] <vadimcn> tjc: and if we disabled cross-function opts in debug builds?
[21:28:20] <eddyb> vadimcn: that means two source files can have a runtime dependency or not, depending on whether LLVM chose to inline a function from one of the files within a function from the other file
[21:28:34] <tjc> vadimcn: rustc doesn't work without cross-function transformations. it compiles polymorphism based on monomorphization
[21:28:53] <tjc> disabling any cross-function optimization would literally require rewriting the compiler. it's not just a matter of turning off an optimization pass.
[21:28:58] <tjc> rewriting the back-end, anyway.
[21:29:51] <vadimcn> ok, thanks for the explanation.
[21:29:54] <eddyb> vadimcn: also, don't expect Rust code to have any decent performance without optimizations
[21:30:23] <tjc> well, I personally might be willing to trade poor runtime performance in exchange for faster compiles, so I could have a faster write-debug-edit cycle
[21:30:26] <eddyb> especially cross-function optimizations
[21:30:27] <tjc> but it's more fundamental than that
[21:32:02] <vadimcn> I still think this is a pity, because Rust is going to lose to C in this regard.  Even if everything is perfectly parallelized, you can't speed it up by more than the number of CPUs you have.
[21:32:39] <cmr> vadimcn: on the plus side we don't have header hell, and we get LTO basically for free (inter-crate, at least)
[21:33:07] <vadimcn> cmr: well, C++ is going to have modules at some point
[21:33:14] <SiegeLord> Yeah, the LTO is the key word here
[21:33:21] <SiegeLord> We're no slower than LTO'd C
[21:33:28] <SiegeLord> (at least, algorithmically)
[21:33:41] <vadimcn> SiegeLord: sure, for release builds
[21:33:49] <tjc> I think that people who care about their code lacking the kinds of runtime errors that C compilers fail to prevent are potentially going to be willing to pay a certain price in compile times
[21:34:02] <tjc> I mean, I can't say for sure, and the success of a programming language largely has nothing to do with technical merit
[21:34:06] <vadimcn> but most of developer's time is spent in edit-compile-debug cycle
[21:34:12] <vadimcn> for me at least :)
[21:34:16] <tjc> But, serious systems programmers realize that there ain't no such thing as a free lunch
[21:34:35] <tjc> at least with the choices that are available, you can pay in developer time, or you can pay in security vulnerabilities in the field
[21:34:40] <tjc> one of those is cheaper than the other :-)
[21:34:45] <SiegeLord> I can't really name a programmer-visible benefit of crate=compillation unit...
[21:34:46] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:35:05] <SiegeLord> I'm sure there is, somewhere...
[21:35:11] <SiegeLord> Oh yeah, it's the trait coherence thingie
[21:35:24] <SiegeLord> That's a good reason
[21:35:35] *** Joins: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com)
[21:35:35] *** ChanServ sets mode: +ao nmatsakis nmatsakis
[21:35:47] <vadimcn> tjc: all those will count as a pro for Rust for sure, but lack of incremental compilation will be a con, for sure
[21:35:53] <tjc> I don't know for sure, but I think when Graydon first envisioned crates as code organization, he was assuming that a lot of crates would be small
[21:36:14] <SiegeLord> I think it's another case of "don't look at rustc for proper Rust use"
[21:36:17] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[21:36:17] *** ChanServ sets mode: +ao dherman dherman
[21:36:35] <tjc> vadimcn: Yeah, I'm not saying there's not a con, just pointing out that while it's a problem we're aware of, the ratio of effort involved to address it to likely payoff isn't good
[21:37:01] <tjc> I mean, again, I wanted to spend 6 months of my own time on this, but was talked out of it, so... I get the desire to fix it, I really do :-)
[21:37:25] <Luqman> hmmm, is the crate id stored in some target dependent way?
[21:37:28] <vadimcn> SiegeLord: in my experience, devs seldom have the foresight to modularize code :)    It just grows, and, at some point build times become unbearable.
[21:37:44] <SiegeLord> Well, C++ has PIMPL etc
[21:37:59] <SiegeLord> At some point you come up with idioms to keep the compile time in check
[21:38:19] <SiegeLord> It's not like keeping C/C++ compile times short is automatic
[21:38:21] <whitequark> I always thought pImpl was invented to provide ABI compatibility
[21:39:05] <vadimcn> SiegeLord: yes, template libraries have the same problem as Rust
[21:39:44] <vadimcn> many C++ compilers do have pre-compiled headers, though
[21:39:56] <cmr> and so do we! we call it metadata
[21:41:46] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:45:04] *** Quits: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP) (Ping timeout)
[21:47:42] <Eridius> ooh, github's 500 error page is neat (getting it right now for mozilla/rust)
[21:53:59] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Client exited)
[21:54:18] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[21:55:49] *** Quits: tikue (tkuehn@moz-C55F9DFF.hsd1.pa.comcast.net) (Quit: tikue)
[22:00:31] <pcwalton> SiegeLord: we should have broken rustc up into more crates.
[22:00:35] <pcwalton> sorry about that.
[22:00:43] <pcwalton> but I do think that increasingly C++ is moving to this module
[22:00:44] <pcwalton> model
[22:03:43] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[22:05:26] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:05:31] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:09:59] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[22:10:24] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[22:10:30] <cmr> Alright down to the last 3 errors...
[22:10:57] <cmr> Oh nevermind, I know how to solve this
[22:30:24] <cmr> nmatsakis: pcwalton: ping
[22:30:29] <pcwalton> cmr: pong
[22:31:04] <cmr> pcwalton: so I'm removing all uses of @str/@[] and removing it from the parser, but I don't have the know-how to remove it from trans etc. Could I convince one of you to do that, or does it fall naturally out of the eventual @T removal?
[22:31:12] <pcwalton> cmr: oh, I was doing that
[22:31:23] <pcwalton> but I'm not very far along
[22:31:26] <cmr> I'm almost done
[22:31:43] <pcwalton> what did you do about the interned strings?
[22:31:50] <pcwalton> I was converting them to be immortal and just removing the ref counting
[22:32:02] <cmr> I just put in clones to get it to bootstrap
[22:32:07] <cmr> that is what I planned on doing as well
[22:32:14] <pcwalton> cmr: you can submit a PR and we'll reconcile
[22:32:19] <pcwalton> don't worry about removing from trans yet
[22:32:37] *** Joins: jdm (jdm@CC0122E6.8F96AEA7.2D179A7D.IP)
[22:33:36] <cmr> ok
[22:34:19] <cmr> my changes are probably far too conservative. I basically did a s/@str/~str/g and added clones as needed, rather than doing anything tricky.
[22:35:31] *** Joins: blank_name (blank_name@78B04CD2.66204B68.6D228269.IP)
[22:36:17] *** flaper87 is now known as flaper87|afk
[22:50:12] <cmr> it always scares me when I find triple-digit-or-less fixmes still lingering
[22:53:57] *** Quits: ChristopherBurg (Christophe@moz-2C03E71B.hfc.comcastbusiness.net) (Ping timeout)
[22:54:12] *** Quits: sms (Mibbit@moz-2202AB44.hsd1.ga.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:56:07] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[23:06:26] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[23:08:04] *** Quits: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[23:08:06] *** Joins: glaebhoer1 (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[23:11:52] *** Quits: glaebhoer1 (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Ping timeout)
[23:12:55] *** Joins: glaebhoer1 (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[23:13:33] <cmr> pcmattman: I'm stopping this for the night, but my work is at https://github.com/cmr/rust/tree/issue-2243
[23:13:36] <cmr> oops he parted
[23:16:31] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[23:16:31] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/wpVq9g
[23:16:31] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[23:17:33] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[23:20:40] *** Quits: glaebhoer1 (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Ping timeout)
[23:21:34] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[23:21:34] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/oOcJqA
[23:21:34] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[23:21:35] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[23:21:35] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/SccKzg
[23:21:35] <ghrust> 13rust/06auto 141812a7b 15Raphael Catolino: Remove unnecessary substitution of type params when generating...
[23:21:35] <ghrust> 13rust/06auto 1493b4028 15bors: auto merge of #11386 : rcatolino/rust/ice-10955, r=pcwalton...
[23:21:35] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[23:22:25] <brson> it's 3::22 and we have no rc yet...
[23:22:47] <cmr> :(
[23:22:53] <cmr> is the bot chugging away?
[23:23:35] *** Joins: glaebhoer1 (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[23:24:51] *** Joins: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net)
[23:26:04] <brson> yeah
[23:27:56] *** Quits: glaebhoer1 (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[23:33:03] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[23:33:03] *** ChanServ sets mode: +o tjc
[23:33:34] <tjc> cmr: maybe it shouldn't scare you... if Rust survived so far, maybe the fixme isn't a real problem :-)
[23:33:50] <cmr> tjc: yeah but it's in metadata ;p
[23:33:52] <kmc> wonder how old is the oldest FIXME in the Linux kernel
[23:34:14] <kmc> there was an Econet bug which got a FIXME comment in 2003 and then was re-discovered as an exploitable security hole in 2010
[23:36:43] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[23:36:43] *** ChanServ sets mode: +ao pcwalton pcwalton
[23:37:01] <cmr> pcwalton: I'm stopping this for the night, but my work is at https://github.com/cmr/rust/tree/issue-2243
[23:37:27] <pcwalton> cmr: cool, thanks!
[23:46:45] <bjz> can I remove Times?
[23:48:43] <acrichto> bjz: I did that as part of https://github.com/mozilla/rust/pull/11409
[23:48:49] <acrichto> although I just moved it to a method
[23:48:55] <dbaupp> bjz: you won't survive bstrie's wrath
[23:49:02] <bjz> -_-
[23:49:22] <bjz> I can understand it if we had do
[23:49:30] <acrichto> but I'm ok w/ removing it
[23:50:14] <bjz> can I move num::{Algebraic, Trigonometric, Exponential, Hyperbolic} into Real for now?
[23:51:02] <acrichto> sure!
[23:53:28] *** Quits: tupshin_ (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Ping timeout)
