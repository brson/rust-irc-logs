[00:00:00] <Eridius> that's like asking if you can make a vector that only contains the number 3
[00:00:01] <kmc> (Circle is a value constructor)
[00:00:04] <kmc> dandy: right
[00:00:20] <kimundi> r? https://github.com/mozilla/rust/pull/9392 (cmr?)
[00:00:23] <heftig> ah, whoops, confused enums and traits
[00:00:24] <kmc> of course you could do   struct Circle { ... }; struct Rectangle { ... }; enum Shape { ShapeCircle(Circle), ShapeRectangle(Rectangle) };
[00:00:37] <kmc> Servo has a lot of code like this, unfortunately it's kinda ugly to work with :/
[00:00:55] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[00:00:55] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/2XqkQQ
[00:00:55] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[00:00:56] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[00:00:56] <ghrust> 01[13rust01] 15bors pushed 1 new commit to 06auto: 02http://git.io/xdzgmw
[00:00:56] <ghrust> 13rust/06auto 1410e1903 15bors: auto merge of #9499 : brson/rust/relnotes, r=cmr
[00:00:56] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[00:01:13] <dandy> ShapeCircle is a tuple struct wrapping Circle?
[00:01:54] <mcpherrin> ShapeCircle is an enum discriminant, not a type
[00:01:54] <dandy> I'm trying to figure out how best to implement types that have exactly the same storage but different meaning
[00:02:01] <dandy> Point vs Vector for example
[00:02:08] <strcat> kmc: if we had the refinement type stuff you wouldn't need Circle/Rectangle
[00:03:18] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Ping timeout)
[00:03:33] <kmc> note that in Rust, if a struct contains another struct by value, they will be stored in the same contiguous chunk of memory
[00:03:42] <kmc> this is like C++ but unlike almost every other language
[00:04:06] <Eridius> kmc: I believe Go does the same thing
[00:04:10] <sp3d> C, of course
[00:04:17] <dandy> yeah I get that, I'm just trying to avoid the storage for the discriminator and still share some impls between them
[00:04:22] <kmc> if a Java object has a field which is another Java object, it'll be a pointer to another heap box
[00:04:25] <kmc> dandy: i see
[00:04:30] <strcat> kmc: well, languages like haskell do let you do that too, but you have to ask for it
[00:04:34] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Quit: Lost terminal)
[00:04:38] <kmc> strcat: how so?
[00:04:39] <Eridius> dandy: why are you using an enum for Point vs Vector? Shouldn't those be separate types?
[00:04:40] *** Joins: ChrisMorgan (chris@moz-59B93F6B.its.monash.edu.au)
[00:04:43] <dandy> like Point and Vector can both support adding a "Coordinate"
[00:05:00] <kmc> Eridius: ah... how does that interact with Go having GC? can I take a reference to the inside of a struct without copying it
[00:05:07] <dandy> but Segment::new(p,v) means something different from Segment::new(pa,pb)
[00:05:14] <Eridius> kmc: Go handles interior pointers
[00:05:22] <kimundi> dandy: Sounds more like you want to implement thesame things seperatly for two different types
[00:05:25] <Eridius> kmc: your interior pointer will root the entire allocated block
[00:05:31] <dandy> kimundi, maybe?
[00:05:33] <kimundi> dandy: default methods might be useful for that
[00:05:37] <Eridius> kmc: it's the same way you can slice an array and the slice will root the entire array
[00:05:47] <doomlord_> dandy .. differnt types and a 'Coordinate' trait ?
[00:05:57] <strcat> kmc: http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/ghc-language-features.html I guess they are ghc extensions
[00:06:01] <dandy> doomlord_, maybe that is a better bet for me
[00:06:13] <kmc> strcat: unboxed types? yeah
[00:06:17] <kmc> also they aren't first-class types
[00:06:33] <kmc> you can't instantiate a polymorphic function or data structure at an unboxed type
[00:06:49] <kmc> because GHC compiles each polymorphic function once, and so assumes a uniform runtime representation of values
[00:06:57] <kmc> whereas we monomorphize so we can deal with whatever
[00:07:13] *** Quits: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca) (Quit: canhtak)
[00:07:26] <dandy> doomlord_, that won't introduce any vtable business will it?
[00:07:37] *** Joins: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca)
[00:08:10] *** Joins: eatkinson (eatkinson@moz-D86C5DB2.airbears2.berkeley.edu)
[00:08:55] *** ozten|afk is now known as ozten
[00:09:20] <Luqman> dandy: you can do static dispatch with traits in rust
[00:09:41] <Eridius> dandy: you don't get vtables unless you use trait objects (e.g. &Trait)
[00:10:01] <Luqman> dandy: something like fn foo<T: MyTrait>(bar: T) { ... } will take any type that impl's MyTrait
[00:10:04] <dandy> so only if I use it as a &Coordinate
[00:10:05] *** Quits: maik (maik@moz-46093746.dip0.t-ipconnect.de) (Ping timeout)
[00:10:12] <kimundi> right
[00:10:32] <kimundi> or ~Ciirdinate
[00:10:41] <tjc> steveklabnik: Sorry, was on the phone when you mentioned me, but what you said about imports sounds right
[00:11:17] <steveklabnik> cool. no worries
[00:11:24] *** Quits: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[00:11:38] <dandy> one more question... is there a way for a trait to enforce fields or do I need to make get_ set_ get_ set_... and mark them as inline?
[00:11:39] <steveklabnik> can you 'rustpkg install URL' and have the package name be different than the repo name?
[00:12:13] <kimundi> dandy: For that you need to write getter and setter, yeah. Sorry :|
[00:12:49] <dandy> well... I think I can do better with my library ported to Rust from C#, I think it will end up much improved
[00:12:57] <tjc> steveklabnik: good question
[00:13:02] <kimundi> dandy: Of course only if you need to access those values generically as trait methods
[00:13:14] <tjc> steveklabnik: not really (right now), but you can use extern mod foo = "â€¦"; to *refer* to it by a different name within your code
[00:13:17] <dandy> and anything defined genericly for Coordinate would need to do that
[00:13:26] <kmc> dandy: you could use a macro at least to define them
[00:13:28] <kimundi> yeah
[00:13:36] <tjc> brb
[00:13:43] <aatch> actually, you can't really.
[00:13:43] <steveklabnik> tjc: thanks
[00:13:46] <kmc> although... do we have a way for the ident foo to expand to get_foo or set_foo in a macro?
[00:13:59] <aatch> unless you use the macro to define the entire impl.
[00:14:08] <kimundi> kmc: nope. broken since ancient times
[00:14:11] <aatch> since macro's can't expand to methods.
[00:14:19] <kmc> :(
[00:14:37] <dandy> kmc something like my public string Name { get; protected set; } would be way sexy
[00:14:42] <aatch> methods are parsed weird, they aren't items, but they kinda are.
[00:14:53] *** Joins: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP)
[00:15:09] <dbaupp> and macros are weirdly restricted too
[00:15:24] *** Quits: tjc (tjc@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[00:15:26] <aatch> dbaupp, in what way?
[00:15:45] <aatch> I just thought it was that they expanded to either expressions or items.
[00:15:51] <dbaupp> aatch: they can only expand to 1 item/expression, can only occur in an item or expression position
[00:16:22] <dbaupp> (they parse their arguments weirdly too, but that's a different problem.)
[00:16:28] <aatch> dbaupp, I guess knowing the implementation screws with my perspective, but that doesn't seem like it's restricted.
[00:16:43] <kmc> dandy: yeah
[00:16:51] <aatch> limited, yes, but restricted implies that we deliberately stopped that.
[00:17:04] <kmc> dandy: otoh trying to provide sugar for fields in traits sort of goes against the idea that traits should be about behavior, not implementation
[00:17:19] *** Joins: jdm (jdm@C3C6F793.EF30B9DB.EB76137B.IP)
[00:17:19] *** ChanServ sets mode: +o jdm
[00:17:24] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[00:17:49] <aatch> dbaupp, though I agree on the parsing thing.
[00:18:00] <dandy> kmc, sure but I can't add two Coordinates without having the values
[00:18:01] <kmc> it's the usual "are we making it hard for people to do bad things, or are we just making it hard for them to use the language"
[00:18:11] <kmc> dandy: here Coordinate is a trait?
[00:18:24] *** Joins: CurlyBrace (Mibbit@776BF494.EEDD3B02.DDE5D3F6.IP)
[00:18:27] <dandy> kmc, if that makes sense? I don't know what is best yet.
[00:18:32] <kmc> dandy: the trait for things you can add already exists (it's called Add iirc and it has the + sugar too)
[00:18:54] <dandy> kmc, oh right, I forgot about that!
[00:18:56] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[00:18:56] *** ChanServ sets mode: +o tjc
[00:18:56] <kmc> i'm not sure it makes sense to have a trait for "things with exactly two fields, which I could add and such"
[00:19:03] <kmc> that's not really a description of a behavior or ability
[00:19:03] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[00:19:09] <SiegeLord> I don't think sugar for properties would go against what traits are... I mean, you can have properties in interfaces in other langauges
[00:19:12] <kmc> it's just struct Foo<T> { x: T, y: T }
[00:19:13] <kimundi> kmc: I guess if we ever add property support, it would still be visible as an method call
[00:19:31] <kmc> mm
[00:19:37] <aatch> SiegeLord, there's also the implementation issue.
[00:19:37] <dandy> kmc, no, the type is also context for how to treat it
[00:19:43] <dandy> kmc, vectors are not points
[00:19:50] <kimundi> let a = foo.bar(); a += 5; foo.bar() = a;
[00:19:51] <SiegeLord> I think the argument against properties would stem more from them obscuring what the code is doing
[00:19:54] <aatch> SiegeLord, trait objects are a pair of pointers.
[00:20:11] *** Quits: CurlyBrace (Mibbit@776BF494.EEDD3B02.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:20:14] <doomlord_> i was often finding myself wanting to make a trait of accessors for a struct, for default trait impl's i think?
[00:20:26] <dandy> kmc, I really only want that context at compile time though, not runtime
[00:20:36] <dandy> kmc, so I think enum is a bad choice
[00:20:40] <kmc> yeah
[00:20:54] <kmc> I think you want some generic TwoOf<T> struct, and then newtype structs to wrap it for each context
[00:20:55] <SiegeLord> aatch: Not sure how that's relevant. Property sugar just expands to method calls
[00:21:00] <aatch> I think allowing macros to expand to methods and to multiple "things" is the best solution.
[00:21:04] <dandy> kmc, also the code is so stupid simple I don't worry about having it be redundant
[00:21:17] <kmc> and maybe a combination of deriving and macros to promote operations on the TwoOf<T> struct to the newtypes
[00:21:35] <aatch> SiegeLord, true. if it *looked* like a method call, then I'd be ok with it.
[00:21:37] <kmc> we do have zero-overhead newtype right?
[00:21:42] <aatch> kmc, yep
[00:21:50] <aatch> struct (T)
[00:21:51] <dandy> I thought exporting newtypes was buggy right now?
[00:22:03] <kmc> I kind of like property sugar... seems like whether something is a direct field access or not is an implementation detail
[00:22:15] <kimundi> SiegeLord: Hm, I'd argue that of you want to model "set or get a value with possible side effects", it should be visible as a function call, but not require you to write boilerplatey and ugly nested code.
[00:22:16] <SiegeLord> Like... a.x += 1; would get turned to a.set_x(a.get_x() + 1) or something related
[00:22:17] <aatch> kmc, but it's a big deal a lot of the time.
[00:22:25] <kmc> like when you promote a simple field to have a cache or some stats behind it
[00:22:35] <kmc> or even just debugging code
[00:22:41] <aatch> especially when factoring in borrowing rules, ownership, partial moves
[00:22:50] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[00:22:52] <dbaupp> dandy: only generic ones like struct Foo<T>(T)
[00:22:54] <kmc> true
[00:23:07] <dandy> Properties make my day in C#, thats my opinion on it regardless of if it is rustic or not
[00:23:23] <kimundi> foo.bar() += 46; - Do you think this would be confusing as a property syntax?
[00:23:39] <aatch> it only seems simple if you look at it from the PoV of garbage-collected languages like Java or C#
[00:23:46] <dandy> dbaupp, you mean like Vector<T>(Coordinate<T)  :(((
[00:24:54] <dandy> on the other hand though properties are super awesome because of the Visual Studio debugger, which rust does not have, so that is not really in its favor, yet
[00:24:59] <dandy> also you can abuse properties
[00:25:10] <dandy> so that sugar can get rancid
[00:25:36] <aatch> I certainly see the appeal. I mean, I dislike a lot of that kind of magic in C++, but when it's done right it's amazing.
[00:25:48] *** Quits: jdm (jdm@C3C6F793.EF30B9DB.EB76137B.IP) (Quit: Lost terminal)
[00:26:31] *** jorendorff is now known as jorendorff_away
[00:26:31] <dandy> in C# it is not magic, it really just creates a backing field and some get set methods that may get inlined if the moon is right
[00:26:57] <dandy> I guess in rust you would have to do some copying to keep it safe
[00:27:42] <aatch> dandy, and therein lies the problem. Not all types are copyable, we move-by-default anyway.
[00:27:43] <kimundi> dandy: In Rust those would be inlined function calls as well
[00:28:05] <SiegeLord> kimundi: I think that syntax is already possible
[00:28:36] <kimundi> aatch, dandy: I don't see the problem with that. per-move or implict copyable, no difference between fields and function calls
[00:28:42] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:28:52] <kimundi> SiegeLord: If you return a &mut maybe, but that's not really the same
[00:29:06] <dandy> this disgusts me: foo.bar() += 46;
[00:29:19] <aatch> The issues with properies are pretty much the same as with the index operator.
[00:29:20] <kimundi> SiegeLord: Ah, wait. The return value would just get incremented.
[00:29:24] <dbaupp> dandy: what about `*foo.bar() += 42`
[00:29:33] <dandy> thats a bit better
[00:29:35] <kimundi> SiegeLord: Hm, that means that syntax can not be used for that
[00:29:40] <dandy> at least I get it with that example
[00:30:18] <dandy> the * is a warning that "hey, I'm doing some crazy shit because we don't have properties, WATCH OUT!"
[00:30:29] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[00:31:22] <SiegeLord> kimundi: https://gist.github.com/SiegeLord/6708208 is what I was going for
[00:31:28] <dandy> another thing to consider is that a good chunk of properties are basic
[00:31:35] <kimundi> I guess if bar() returns an temporary oject that has a &mut reference to the object, and for which the assignment operator is overloaed (which we can't do), then it could work too
[00:31:38] <SiegeLord> I don't know if you can overload '='
[00:31:45] <dandy> and given that rust has freezing and mutability covered I don't feel dirty exposing my fields
[00:32:08] <dandy> the only reason I even brought this up was because of a trait
[00:32:10] <dbaupp> SiegeLord: you can't (by design)
[00:32:27] <aatch> SiegeLord, you can't and graydon (although not project lead anymore) stated that he didn't want to
[00:32:28] <kimundi> SiegeLord: yeah, something likethat
[00:32:38] <SiegeLord> Well, so much for that idea :P
[00:32:43] *** Quits: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:32:43] <SiegeLord> Not that I mind, I hate properties
[00:32:55] <aatch> Basically he wanted users to have something to stand on.
[00:32:58] <SiegeLord> I can't read my code that uses them... I get confused at what the code does
[00:32:59] *** Quits: snerd (motk@moz-E535583C.nonstopcrunchy.net) (Quit: leaving)
[00:33:04] *** Joins: snerd (motk@moz-E535583C.nonstopcrunchy.net)
[00:33:20] <kimundi> Well, not being able to overload = in general does not mean there couldn't be syntactic sugar to transform a = into a function call
[00:33:26] <dandy> SiegeLord, thats a sign of property abuse
[00:33:33] <dandy> a properties should be stupid
[00:34:09] <SiegeLord> I don't like features that are easy to abuse
[00:34:21] <dandy> I can't argue with that
[00:34:23] <sp3d> I just don't understand how properties add any expressiveness
[00:34:40] <sp3d> or, rather, how overloading '=' to deal with them does
[00:34:45] <dandy> I guess they don't they simplify stuff for me though
[00:34:46] <SiegeLord> I tend to restrict myself to just using them for readonly fields
[00:34:50] <SiegeLord> these days
[00:34:51] <aatch> dandy, I'd support a syntax extension for property-like things. I'm more comfortable with having to use function calls for access.
[00:35:07] <aatch> what I see is people complaining at the boilerplate.
[00:35:08] <dandy> aatch, its definitely an opinion thing
[00:35:27] <doomlord_> i wonder if adding somethign like an "iter_val()" to pass T instead of &T would have made the .filter() exmaple i tried more intuitive. or maybe a 'filter_val()' .. whatever
[00:35:47] <kimundi> sp3d: It's more about ease of evolving your code, and not needing to nest new values in function calls to set them. Not very important reasons, I admit :P
[00:35:49] <aatch> which is the realm of syntax extensions.
[00:35:57] *** Quits: ChrisMorgan (chris@moz-59B93F6B.its.monash.edu.au) (Quit: Leaving.)
[00:35:58] *** Joins: ChrisMorgan (chris@moz-59B93F6B.its.monash.edu.au)
[00:36:01] <kimundi> doomlord_: move_iter()
[00:36:19] <kimundi> doomlord_: Alternatively, .map(clone)
[00:36:38] <dandy> I think there is less of a need for properties in rust anyway
[00:36:41] <doomlord_> in my examples i think i'd be taking an immmutable source                          
[00:36:41] <dandy> even if you do like them
[00:36:58] <strcat> doomlord_: you can move out of an immutable variable
[00:37:14] <kimundi> doomlord_: Filter val would not be very useful, as it would always filter out all values :P (Can't copy in generic functions without clone)
[00:37:17] <ChrisMorgan> Speaking of these things, += has been used... there's this matter of general augmented assignmentâ€”making x += y work generally. I had my not-quite-working patch for it at https://github.com/chris-morgan/rust/compare/augmented-assignment, more info https://github.com/mozilla/rust/issues/5992. Anyone interested in seeing if they can get it working?
[00:37:34] <SiegeLord> That said, *a.x() += 1; seems to work today, no?
[00:37:36] <doomlord_> perhaps i haveb't got the full picture of what that means... move out of immutable variable.. isn't that a change to the original
[00:37:36] <strcat> I don't think there are going to be many changes to how iterators work
[00:37:48] <amatus> am i going to have to write a macro because i can't use a function to initialize a constant?
[00:37:51] <strcat> doomlord_: implementation detail
[00:37:56] <dandy> I feel I spend too much time in C# worrying about mutability or making things to be freezable, that stuff in rust really is a huge deal for me
[00:37:57] <strcat> you can't use the original anymore
[00:38:02] <aatch> amatus, correct.
[00:38:04] <SiegeLord> It's super restricted to just modifying visibility of fields though
[00:38:06] <amatus> >.<
[00:38:14] <doomlord_> well in the example above i needed to do a filter() then a map |x|*x to turn it into a val
[00:38:33] <aatch> amatus, we don't have CTFE (though I would love it)
[00:38:37] <strcat> doomlord_: because allocating a whole new container is inefficient
[00:38:54] <strcat> iterators aren't going to hide that from you
[00:39:13] <strcat> if you want to call clone on every single element in a container and allocate a new container, you'll have to say so
[00:39:19] <kimundi> SiegeLord: FOr accessing a field through an method directly, yeah. You can also add behavior. You can't, however, set an non-field value that way. 
[00:39:29] <strcat> the majority of cases want the efficient ways of doing stuff
[00:39:33] *** Quits: mdup (mdup@moz-2989B319.rev.numericable.fr) (Quit: mdup)
[00:39:52] <kimundi> SiegeLord: Also, no way to tell if any mutation actually happend... Though I guess that'S not as important
[00:40:24] <doomlord_> well it seems there are many possible permutations
[00:40:32] <SiegeLord> I'd be content with a macro to speedify getter/setter implementation
[00:40:35] <kimundi> SiegeLord: And no way to get immutable references if you only read
[00:40:39] *** Quits: RMF (RMF@moz-A7EEA849.dsl.telepac.pt) (Quit: Textual IRC Client: www.textualapp.com)
[00:40:53] <strcat> doomlord_: and they support all of them via composition
[00:40:59] <strcat> with the efficient cases being the cleanest
[00:41:16] <strcat> no more iter methods are needed
[00:42:10] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[00:43:54] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[00:44:02] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten)
[00:44:18] *** Joins: RMF (RMF@moz-A7EEA849.dsl.telepac.pt)
[00:44:33] *** Quits: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca) (Quit: canhtak)
[00:45:01] *** Quits: rlbaker (rlbaker@moz-D05907D4.hfc.comcastbusiness.net) (Quit: rlbaker)
[00:45:03] <doomlord_> what happened was i saw a stack overflow question , 'does rust support fp with map /filter ...' ... i was trying to knock up an example but it quickly turned into a mess ;(
[00:45:14] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[00:45:32] <amatus> i can't use size_of() to initialize a constant either?! >.<
[00:45:50] <strcat> doomlord_: you are very, very rarely going to want to allocate a whole new container
[00:45:56] <kimundi> doomlord_: Yeah, but it won't turn into aless of a mess unless we remove all different pointer types :P
[00:46:06] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[00:46:20] <kimundi> doomlord_: And it's not even a huge mess to begin with
[00:46:42] <doomlord_> i guess i can layer my own ontop :)
[00:46:46] <strcat> rusti: for x in range(0, 10).map(|x| x * 2) { print!("{} ", x) }
[00:46:47] -rusti- 0 2 4 6 8 10 12 14 16 18 ()
[00:46:53] <strcat> I don't see a problem with it
[00:47:45] <doomlord_> i'm not criticizing the design, just wondering if a few extra helpers might clean up some cases
[00:47:46] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[00:48:08] <Eridius> doomlord_: there's been talk of having a generic function clone() in the prelude, so you can say .map(clone)
[00:48:23] <Eridius> although it's also been speculated that this would just clone the &-ptr
[00:48:26] <doomlord_> right, thats the sort of thing that would help
[00:48:28] <Eridius> rather than cloning the underlying object
[00:48:51] <kimundi> Eridius: Well, clone would be (&T) -> T
[00:48:59] <doomlord_> one of my suggestins would have been a .iter_val() or somethign like that .. i suppose there would be many ways of acheiving it
[00:49:01] <Eridius> kimundi: oh I suppose it would
[00:49:12] <strcat> doomlord_: and does it do clone, deep_clone?
[00:49:13] <kimundi> Eridius: So it would effectively dereference a layer of &
[00:49:19] <Eridius> doomlord_: I've suggested .iter_clone() in the past, but nobody's really a big fan
[00:49:26] <strcat> doomlord_: they aren't meant to be used that way in most cases
[00:49:29] <doomlord_> right so its not just me that wants it
[00:49:35] <bjz> tjc: will there be a way of adding args to the remote extern imports?
[00:49:47] <strcat> if you're writing code like that, your design is probably wrong
[00:49:57] <cmr> I'm getting to the point where if the code I write parses, it probably compiles too
[00:50:08] <doomlord_> can you predict all uses ?
[00:50:16] <tjc> bjz: args as inâ€¦ a tag for a specific revision?
[00:50:19] <amatus> i actually was asking a question, is there no way to use size_of() in a constant expression?
[00:50:19] <strcat> doomlord_: no, and that's why it provides efficient, composable tools
[00:50:22] <bjz> tjc: so if you had a custom build thingy, you could give it stuff. it would be useful for something like gl-rs
[00:50:26] <strcat> doomlord_: and doesn't special case inefficient, rare cases
[00:50:32] <strcat> it doesn't need to 'predict all uses'
[00:50:33] <tjc> bjz: Oh, I see
[00:50:34] <doomlord_> is there any harm in adding extra helpers
[00:50:35] <kimundi> cmr: r? https://github.com/mozilla/rust/pull/9392
[00:50:44] <doomlord_> like the map(clone) suggested above
[00:50:47] <kimundi> doomlord_: Maintanace burden
[00:50:51] <tjc> bjz: Yes, when I (or someone) gets around to improving the API for package scripts, there will be a way to add imports
[00:50:52] <Eridius> amatus: no
[00:50:54] <strcat> kimundi: not just that
[00:50:56] <kimundi> doomlord_: Ah, that shopuld be okay
[00:50:57] <strcat> bigger APIs are harder to learn
[00:51:03] <strcat> simple APIs are small and composable
[00:51:10] <amatus> Eridius: no and in no or no as in yes?
[00:51:12] <bjz> tjc: like: --spec gl --extensions ARB_FOO
[00:51:13] <strcat> and they guide you to writing code correctly
[00:51:21] <strcat> efficient code should look good, inefficient code should look bad
[00:51:28] <tjc> bjz: yup, there'll have to be a way to do that
[00:51:28] <Eridius> amatus: there's been discussion of having a sizeof keyword specifically for constant expressions. Alternatively, the ability to execute functions when calculating constant expressions
[00:51:42] <Eridius> amatus: no as in no. there's no sizeof you can use in a constant expression
[00:51:51] <bjz> tjc: coolies
[00:51:51] <strcat> I would essentially call iterators close to done at this point
[00:52:04] <strcat> beyond maybe removing product, sum and to_owned_vec
[00:52:13] <doomlord_> most of my use cases wouldn't consume an input datastructure
[00:52:16] <dandy> amatus, maybe a prevuild step that writes out a constants.rs?
[00:52:21] <dandy> prebuild*
[00:52:23] <tjc> bjz: https://github.com/mozilla/rust/issues/6403 and https://github.com/mozilla/rust/issues/7401 are relevant bugs if you want to write anything down
[00:52:28] <doomlord_> creating new temporary structures from immutable sources.
[00:52:34] <strcat> doomlord_: right, in most cases you iterate by-reference
[00:52:41] <strcat> creating temporary containers isn't rustic
[00:52:43] <doomlord_> the immutable sources are kept around between frames.
[00:52:51] <strcat> why do you need temporary containers?
[00:53:11] <doomlord_> in some cases you might need to randomly index them
[00:53:17] <strcat> you can randomly index iterators
[00:53:31] <kimundi> Well, RandomIndexIterator's
[00:53:32] <doomlord_> wouldn't that only be efficient if you dumped it into a vector first
[00:53:35] <strcat> doomlord_: no
[00:53:43] <strcat> iterators are not just a forward iteration over something
[00:53:59] <strcat> rusti: let xs = [1, 2, 3]; let ys = [4, 5, 6]; let it = xs.iter().chain(ys.iter()); it.idx(4)
[00:54:01] -rusti- pastebinned 30 lines of output: http://sprunge.us/MijQ
[00:54:12] <strcat> rusti: let xs = &[1, 2, 3]; let ys = &[4, 5, 6]; let it = xs.iter().chain(ys.iter()); it.idx(4)
[00:54:13] -rusti- Some(&5)
[00:54:20] <strcat> rusti: let xs = &[1, 2, 3]; let ys = &[4, 5, 6]; let it = xs.iter().chain(ys.iter()); (it.idx(4), it.idx(2))
[00:54:21] -rusti- (Some(&5), Some(&3))
[00:54:29] <aatch> doomlord_, iterators are an abstraction. random indexing is only inefficient if the underlying implementation is inefficient.
[00:55:02] <doomlord_> the word iterator to me suggests some sort of sequential access
[00:55:02] <strcat> you can consume in a forwards direction (Iterator), in the reverse direction (DoubleEndedIterator) and you can randomly index (RandomAccessIterator)
[00:55:07] <strcat> as long as the underlying iterators support it
[00:55:07] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[00:55:18] <strcat> doomlord_: C++ uses the word iterator this way
[00:55:24] *** Quits: Diamond (dick@moz-FEA87A60.ks.ks.cox.net) (Connection reset by peer)
[00:55:30] *** Quits: eatkinson (eatkinson@moz-D86C5DB2.airbears2.berkeley.edu) (Quit: eatkinson)
[00:55:39] <strcat> D calls them ranges, but the consensus was to call ours iterators
[00:55:47] <doomlord_> (i've never found c++ iterators particularly helpful)
[00:55:55] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[00:55:55] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1410e1903 to 1441826c4: 02http://git.io/N3iJvQ
[00:55:55] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[00:55:56] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[00:55:56] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/5Z6Jeg
[00:55:56] <ghrust> 13rust/06auto 14ee74ccb 15Felix S. Klock II: stop fighting with rust logo filetype.
[00:55:56] <ghrust> 13rust/06auto 14e82db13 15Brian Anderson: Fix the rust logo icon
[00:55:56] <ghrust> 13rust/06auto 1400db6f6 15bors: auto merge of #9502 : brson/rust/fix-logo-icon, r=brson
[00:55:57] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[00:56:11] <doomlord_> (since there i'd be dealing with vectors mostly anyway, and randomly indexing them most of the time)
[00:56:21] <strcat> C++ iterators have random access
[00:56:35] <strcat> Boost.Range makes them essentially as composable as in rust
[00:56:45] <strcat> not quite as nice ;p
[00:57:03] *** Joins: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net)
[00:57:24] <strcat> http://www.boost.org/doc/libs/1_54_0/libs/range/doc/html/range/concepts/single_pass_range.html same thing as rust's Iterator trait
[00:57:31] <strcat> http://www.boost.org/doc/libs/1_54_0/libs/range/doc/html/range/concepts/forward_range.html Iterator + Clone
[00:57:32] <doomlord_> <doomlord_> wouldn't that only be efficient if you dumped it into a vector first
[00:57:32] <doomlord_> <strcat> doomlord_: no <<<<< what if i know i want to evaluate something once, and index into it many timnes
[00:57:57] <strcat> doomlord_: what do you want to evaluate?
[00:58:18] *** Joins: eatkinson (eatkinson@moz-D86C5DB2.airbears2.berkeley.edu)
[00:58:40] <strcat> if you're actually doing a very expensive map operation and you're going to randomly index many times, calling collect makes sense
[00:58:50] <doomlord_> transforming a subset of joints in a skeleton then indexing into them perhaps.
[00:58:52] <strcat> it still supports that use case despite it not being the common one
[00:59:20] <strcat> doomlord_: chaining iterators and indexing into that will be *far* more efficient than allocating a temporary container
[00:59:30] <aatch> You could also implement an adaptor that uses a sparse array to cache it.
[00:59:40] <doomlord_> transforming joints, then indexing into them..
[01:00:31] <doomlord_> taking an optimized subset of an animation skeleton and passing it to the GPU .. a different subset of the joint table per draw call
[01:00:34] *** Quits: kimundi (kimundi@moz-F77364E2.dip0.t-ipconnect.de) (Ping timeout)
[01:00:41] *** Quits: heftig (heftig@moz-6F2AD80B.dip0.t-ipconnect.de) (Ping timeout)
[01:00:52] *** Quits: ofeldt (ofeldt@moz-2C983C49.dip0.t-ipconnect.de) (Ping timeout)
[01:00:59] <doomlord_> one situation int he past was a gpu only being able to handle a fixed number of joint matrices, wheras skeletons could have arbitrary numbers
[01:01:06] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[01:01:15] <doomlord_> so tools would split the mesh up, each subset of the mesh referencing a subset of the  joints.
[01:01:16] <doomlord_> now,
[01:01:23] *** Quits: eatkinson (eatkinson@moz-D86C5DB2.airbears2.berkeley.edu) (Quit: eatkinson)
[01:01:38] <doomlord_> do i want to recalcualte the animation cycles each time because strcat thinks he knows how i should be using his iterator library? NO
[01:01:44] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[01:02:00] <doomlord_> if i want to make a damn collection, its because i want to make a damn collection.
[01:02:00] *** Joins: heftig (heftig@moz-6F2AD80B.dip0.t-ipconnect.de)
[01:02:06] <doomlord_> i wasn't born yesterday.
[01:02:08] <strcat> and it lets you get one via collect
[01:02:37] <strcat> but it's not the common case
[01:02:39] <aatch> doomlord_, that's fine, but you're not a common case so it's *slightly* harder.
[01:02:40] <cmr> doomlord_: iterators support all of these usecases, and if they don't, you can implement Iterator etc yourself
[01:02:41] *** Joins: ofeldt (ofeldt@moz-2C983C49.dip0.t-ipconnect.de)
[01:02:51] <cmr> (if they don't to your satisfaction..)
[01:03:05] *** Joins: kimundi (kimundi@moz-F77364E2.dip0.t-ipconnect.de)
[01:03:11] <doomlord_> its the same problem i have with C++ standard libraries :)
[01:03:38] <doomlord_> i usually end up writing my own abstractions to make my inner loops pleasing (the bits i really need to focus on)
[01:04:01] <doomlord_> ok. its complex 'because its complex' :)
[01:04:21] <kimundi> Hm, this talk about itertion vs temporary allocation reminds me of earlier today
[01:04:34] <kimundi> Fast iterator:
[01:04:36] <kimundi> rusti: "yes, display the hex".byte_iter() .map(|b| {     let (a, b) = (b >> 4,b & 0xf);      let f = |c:uint| std::char::from_digit(c, 16).unwrap();     (f(a as uint), f(b as uint), ' ') }) .flat_map(|(a, b, c)| {     Some(a).move_iter().chain(         Some(b).move_iter().chain(             Some(c).move_iter()         )     ) }) .collect::<~str>()
[01:04:37] -rusti- ~"79 65 73 2c 20 64 69 73 70 6c 61 79 20 74 68 65 20 68 65 78 "
[01:04:51] <kimundi> slow temporary:
[01:04:54] <kimundi> rusti: "yes, display the hex".as_bytes().map(|s| s.to_str_radix(16)).connect(" ")
[01:04:54] -rusti- ~"79 65 73 2c 20 64 69 73 70 6c 61 79 20 74 68 65 20 68 65 78"
[01:05:45] <kimundi> There are certainly a feww things to add/solve to make them less cumbersome to use, imo :)
[01:05:49] <Eridius> kimundi: that's a lotta whitespace you got there
[01:06:02] <strcat> kimundi: doesn't look like a 1:1 comparison at all
[01:06:05] <strcat> rusti: "yes, display the hex".as_bytes().map(|s| s.to_str_radix(16)).connect(" ")
[01:06:05] -rusti- ~"79 65 73 2c 20 64 69 73 70 6c 61 79 20 74 68 65 20 68 65 78"
[01:06:14] <kimundi> Eridius: It's formated, but all '\n' replaced with ' '
[01:06:31] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[01:06:57] <kimundi> strcat: hm? what do you mean?
[01:07:01] <strcat> don't see why your iterator example has flat_map, chain and so on
[01:07:07] <strcat> you're doing it in a totally different way
[01:07:15] *** Joins: mcpherri1 (mimcpher@moz-345B5EBA.csclub.uwaterloo.ca)
[01:07:16] <kimundi> strcat: Might just be my own inability to write it better :P
[01:07:54] *** Quits: mcpherri1 (mimcpher@moz-345B5EBA.csclub.uwaterloo.ca) (Quit: leaving)
[01:08:11] <strcat> you're not comparing iterators to an alternative
[01:08:27] <kimundi> strcat: Anyway, this was not really meant as an example, your discusion just reminded me of earlier when I arrived at those two solutions
[01:08:27] <strcat> you're comparing two ways of doing things, one of which just happens to use iterators
[01:08:39] <Eridius> rusti: std::str::from_utf8_owned(std::rt::io::mem::with_mem_writer(|w| "yes, for b in display the hex".byte_iter() { write!(w, "{:x} ", b) }))
[01:08:40] -rusti- pastebinned 4 lines of output: http://sprunge.us/XdRD
[01:08:57] <Eridius> rusti: std::str::from_utf8_owned(std::rt::io::mem::with_mem_writer(|w| "yes, for b in "yes, display the hex".byte_iter() { write!(w, "{:x} ", b) }))
[01:08:58] -rusti- <anon>:9:16: 9:17 error: unknown start of token: ?
[01:08:58] -rusti- <anon>:9     println!("{:?}", r)
[01:08:58] -rusti-                          ^
[01:08:58] -rusti- application terminated with error code 101
[01:08:59] <kimundi> strcat: That is correct
[01:09:08] *** Joins: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca)
[01:09:10] <Eridius> rusti: std::str::from_utf8_owned(std::rt::io::mem::with_mem_writer(|w| for b in "yes, display the hex".byte_iter() { write!(w, "{:x} ", b) }))
[01:09:11] -rusti- pastebinned 9 lines of output: http://sprunge.us/EgiC
[01:09:15] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[01:09:22] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[01:09:25] <Eridius> rusti: use std::rt::io::Writer; std::str::from_utf8_owned(std::rt::io::mem::with_mem_writer(|w| for b in "yes, display the hex".byte_iter() { write!(w, "{:x} ", b) }))
[01:09:26] -rusti- pastebinned 9 lines of output: http://sprunge.us/cbCW
[01:09:42] <Eridius> rusti:std::str::from_utf8_owned(std::rt::io::mem::with_mem_writer(|w| for b in "yes, display the hex".byte_iter() { write!(&w as &std::rt::io::Writer, "{:x} ", b) }))
[01:09:43] -rusti- pastebinned 8 lines of output: http://sprunge.us/EfiD
[01:09:47] <kimundi> Eridius: "You can query rusti, you know?" :P
[01:10:05] <Eridius> kimundi: it's not like I'm expecting to keep getting errors >_<
[01:10:27] <SiegeLord> One can never be too confident when writing Rust code ;)
[01:10:37] <kimundi> Eridius: See, that's my argument too, but then the same thing happens to me
[01:10:44] <Eridius> it bugs me that write!() requires a trait object
[01:10:59] <kimundi> It does?
[01:11:03] <Eridius> yep
[01:11:08] <Eridius> it takes a &std::rt::io::Writer
[01:11:14] <dbaupp> &mut ...
[01:11:22] <Eridius> oh right
[01:11:47] <doomlord_> taking collections and clustering them in different ways is actually a very common use case for me
[01:11:54] <dbaupp> I think it should take a generic, since the mem_writer should be fast. but it probably doesn't make a huge difference.
[01:12:51] <doomlord_> just about everything i do is taking collections and making new collectionsm, which either need to be seialized or passed to some dedicated hardware
[01:12:55] <Eridius> dbaupp: at the very least, write!() should convert its argument to a trait object for me
[01:13:17] <amatus> where do i find the current for loop syntax?
[01:13:27] *** Joins: mcpherri1 (mimcpher@moz-345B5EBA.csclub.uwaterloo.ca)
[01:13:32] *** Quits: heftig (heftig@moz-6F2AD80B.dip0.t-ipconnect.de) (Ping timeout)
[01:13:50] <Eridius> amatus: http://static.rust-lang.org/doc/master/tutorial-container.html
[01:13:53] *** Quits: kimundi (kimundi@moz-F77364E2.dip0.t-ipconnect.de) (Ping timeout)
[01:14:06] *** Joins: kimundi (kimundi@moz-F77364E2.dip0.t-ipconnect.de)
[01:14:07] *** nrc is now known as nrc|afk
[01:14:07] *** Quits: mcpherri1 (mimcpher@moz-345B5EBA.csclub.uwaterloo.ca) (Quit: leaving)
[01:14:18] *** Joins: heftig (heftig@moz-6F2AD80B.dip0.t-ipconnect.de)
[01:14:18] <dbaupp> Eridius: then you get double indirection when you already have a trait object
[01:14:38] <aatch> LLVM should be able to devirtualize in some cases.
[01:14:53] <dbaupp> yes
[01:15:00] <amatus> Eridius: thanks, duck duck go for "rust for loop" did not return anything useful
[01:15:04] <strcat> it should be able to remove bounds checks from fixed-size arrays too, but doesn't ;p
[01:15:07] <aatch> Though I think we need to mark the vtables as immutable (if we don't already)
[01:15:19] <Eridius> dbaupp: `(foo as &Writer) as &Writer` can't tell that it's already a &Writer?
[01:15:19] <strcat> amatus: covered in the manual, iterator tutorial and std::iter docs
[01:15:25] <cmr> I'm pretty sure clang does devirtualization, not llvm.
[01:15:27] <cmr> Not sure.
[01:15:31] <cmr> I know that clang does some of it
[01:15:42] <amatus> can i ask rusti the type of an expression?
[01:15:46] <cmr> amatus: no
[01:15:49] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:15:50] <cmr> well, not rusti here
[01:16:03] <cmr> rusti the program can't do it yet.
[01:16:10] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:16:22] <aatch> cmr, clang does do some of it, but LLVM is able to SROA function pointers into regular function calls.
[01:16:28] * amatus sigh
[01:16:31] <aatch> it does it with our closures.
[01:16:33] <cmr> Generally you can do println!("{:?}", foo), which does a decentish job of printing types.
[01:16:37] <cmr> aatch: ah, ok
[01:16:56] <cmr> it's much better since strcat fixed it.
[01:17:27] *** Joins: maik (maik@moz-46093746.dip0.t-ipconnect.de)
[01:17:31] <strcat> cmr: I could teach rusti to do it
[01:17:36] <strcat> I added type names to the tydesc
[01:17:37] <aatch> cmr, I think that clang uses the extra type info to devirtualize in cases where LLVM can't
[01:17:49] <dbaupp> Eridius: I guess it can, but it's not necessarily what we want it to do (I don't know)
[01:17:54] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:17:56] <strcat> aatch: it will ofc only devirtualize if it inlines the functions all the way though
[01:18:10] <aatch> strcat, really?
[01:18:35] <strcat> aatch: the creation of the function pointer and the usage of it have to be in the same function
[01:18:38] <strcat> for it to optimize out
[01:18:52] <strcat> so it depends entirely on inlining
[01:19:13] <strcat> if you pass a function ptr to a function, *that function* (and anything it passes the fn ptr to) have to be inlined to make it direct
[01:19:15] <Eridius> dbaupp: I also kind of think that ~str and ~[u8] should be Writers instead of requiring std::rt::io::mem::MemWriter
[01:19:33] <aatch> strcat, oh right, that direction of inlining. I thought you meant inlining the pointed-to function
[01:19:44] <aatch> seemed a little strange.
[01:20:27] <aatch> In your case, that makes sense though since most optimizations are done per-function
[01:20:53] <dbaupp> Eridius: ~[u8] being a Writer would be neat, not so sure about ~str though. I guess it'd have to enforce the utf8 invariant on each write
[01:20:55] <dbaupp> .
[01:21:32] <Eridius> dbaupp: that's fine with me. I'd just be doing str::from_utf8_owned() on the ~[u8] anyway
[01:21:40] <Eridius> so may as well let me just write to a ~str directly
[01:22:28] *** Joins: Ralith (ralith@moz-36466B9F.customer.broadstripe.net)
[01:22:46] <dbaupp> yeah, it's just there's a single utf8 check writing to a ~[u8], but writing to a ~str requires doing one for every write (which is possibly slower, especially since LLVM doesn't like fail! very much)
[01:22:49] *** Joins: grover (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net)
[01:23:22] <grover> I'm confused by string comparison, apparently. let s = "me"; assert(s == "me"); fails with mismatched types: expected `~str` but found `&'static str`
[01:23:30] *** kimundi is now known as zz_kimundi
[01:23:32] <grover> what is the correct assert?
[01:23:48] <grover> should have written assert! there
[01:24:05] <grover> but still same compilation error
[01:24:05] <amatus> i am completely failing at this type system too
[01:24:11] <grover> heh
[01:24:22] <Jesse> *~"me" == "me" <-- apparently, not that
[01:24:33] <Jesse> because ~str cannot be dereferenced
[01:24:40] <strcat> there's no such thing as 'str'
[01:25:25] <grover> it works if I do assert!(m == ~"me"), but I don't want to do a malloc everytime!
[01:25:25] <dbaupp> grover: "me" == s would work
[01:25:30] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[01:25:40] <aatch> strcat, there is ipconstprop that might work.
[01:25:45] <dbaupp> as does `assert_eq!(s.as_slice(), s)`
[01:25:48] <dbaupp> *"me"
[01:25:58] <Luqman> rusti: let s =
[01:25:58] -rusti- <anon>:8:4: 8:5 error: unexpected token: `}`
[01:25:58] -rusti- <anon>:8     };
[01:25:58] -rusti-              ^
[01:25:58] -rusti- application terminated with error code 101
[01:26:06] <Luqman> rusti: let s = "me"; s == "me"
[01:26:07] -rusti- true
[01:26:14] <amatus> how do i write a static vector of strings?
[01:26:19] <dbaupp> rusti: let s = ~"me"; "me" == s
[01:26:19] -rusti- true
[01:26:23] <aatch> which is interprocedural constant propagation.
[01:26:27] <dbaupp> rusti: let s = ~"me"; s.as_slice() == "me"
[01:26:28] -rusti- true
[01:26:36] <aatch> Though obviously there are limits on that too.
[01:26:53] <grover> dbaupp: what does as_slice() do?
[01:26:57] <dbaupp> rusti: static strings: &'static [&'static str] = &["like", "this", "amatus"];
[01:26:58] -rusti- ()
[01:26:59] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[01:27:13] <aatch> grover, returns a &str
[01:27:14] <dbaupp> grover: it does an explicit borrow from ~str to &str
[01:27:27] <grover> dbaupp: exactly what I need, thanks
[01:28:02] *** Quits: heftig (heftig@moz-6F2AD80B.dip0.t-ipconnect.de) (Ping timeout)
[01:28:23] *** Quits: zz_kimundi (kimundi@moz-F77364E2.dip0.t-ipconnect.de) (Ping timeout)
[01:28:43] *** Quits: maik (maik@moz-46093746.dip0.t-ipconnect.de) (Ping timeout)
[01:28:45] *** Quits: ofeldt (ofeldt@moz-2C983C49.dip0.t-ipconnect.de) (Ping timeout)
[01:28:52] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[01:29:04] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[01:29:06] *** Quits: Fluky (Mibbit@moz-7B2B6018.kortex.jyu.fi) (Quit: http://www.mibbit.com ajax IRC Client)
[01:30:04] <Eridius> dbaupp: another thought: add a separate trait StrWriter that writes strings instead of &[u8]s, and impl it automatically for any Writer. Then make the std::fmt macros/functions use StrWriter instead (I mean, they always write strings, right?)
[01:30:19] <Eridius> dbaupp: that way ~str can be a StrWriter and you can just write!() to it without any unnecessary utf-8 checks
[01:30:48] *** Joins: maik (maik@moz-46093746.dip0.t-ipconnect.de)
[01:30:49] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[01:31:09] <dbaupp> Eridius: maybe... I don't know; I imagine that this will make more sense to look at when we have a nice encoding story
[01:31:29] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[01:31:38] <ChrisMorgan> I recall mention of waiting until encoding is done before looking at a StrWriter.
[01:31:44] <amatus> for loops only have break, no continue?
[01:32:12] <dbaupp> continue is currently `loop`, but is changing to continue
[01:32:22] <dbaupp> https://github.com/mozilla/rust/pull/9504
[01:32:37] *** Joins: zz_kimundi (kimundi@moz-F77364E2.dip0.t-ipconnect.de)
[01:32:37] <amatus> guess i won't use either then
[01:32:43] *** Joins: ofeldt (ofeldt@moz-2C983C49.dip0.t-ipconnect.de)
[01:32:55] *** zz_kimundi is now known as kimundi
[01:32:56] *** Joins: heftig (heftig@moz-6F2AD80B.dip0.t-ipconnect.de)
[01:32:56] <dbaupp> well, just use `loop` and change it to continue later?
[01:34:54] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[01:35:40] <mcpherrin> Other things will surely change in the langauge that will break your code, so just use "loop" and hop on the freight train of compatability fixing
[01:35:56] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[01:36:18] <amatus> it's no big deal, the loop's actually better without it
[01:36:20] <cmr> At least loop is a simple sed
[01:36:23] <Amaranth> hehe, if you don't want to have to update for rust changes you'd better for wait 1.0
[01:36:25] <cmr> s/loop;/continue;/
[01:36:41] <dbaupp> cmr: s/loop '/continue '/ too :P
[01:36:41] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[01:36:57] <dbaupp> (also, you can write loop without the trailing semi.)
[01:36:57] <cmr> dbaupp: eh?
[01:37:02] <grover> this isn't a joke, I'm wondering if goto label; will be available in rust
[01:37:03] <dbaupp> cmr: labelled loop
[01:37:07] <cmr> Oh, the '
[01:37:26] <dbaupp> grover: not fully general goto like C etc
[01:37:47] <grover> dbaupp: what's the thinking there?
[01:37:52] <dbaupp> but we have labelled break, so you've got a "forward" goto, `'label: loop { ... break 'label; ... }`
[01:37:56] <dbaupp> grover: goto is unsafe
[01:38:07] <grover> oh there's labelled break, nice
[01:38:08] <dbaupp> doesn't mesh with the borrow checker (etc)
[01:38:13] <grover> ah
[01:38:44] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[01:39:10] <grover> in that example:   'label: loop { ... break 'lable; ... }' ...isn't that more of a backwards jump than a foward one?
[01:39:42] <grover> oh I see, it lets you break out of two levels or more at once?
[01:39:45] <dbaupp> no, it jumps to the statement after the loop
[01:39:52] <grover> right
[01:40:01] *** Joins: pcwalton (pcwalton@moz-BE33DA21.fw1.sfo1.mozilla.net)
[01:40:01] *** ChanServ sets mode: +ao pcwalton pcwalton
[01:40:12] <dbaupp> but yeah, the main use-case is breaking out of nested loops
[01:40:19] <grover> that will work just fine in place of goto
[01:40:21] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[01:40:30] *** Joins: vk (chatzilla@F92596F.2DEF7520.EF7679FA.IP)
[01:40:43] <grover> the label starts with an apostrophe 'label ?
[01:40:56] <dbaupp> yep, same as lifetimes
[01:41:00] <grover> got it
[01:41:02] <grover> thx!
[01:41:02] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[01:41:14] <Luqman> grover: yes, presumably to somehow work with regions/lifetimes in the future
[01:41:54] <dbaupp> Luqman: also for parsing
[01:41:58] <dbaupp> (I guess)
[01:42:22] *** Joins: jmgrosen (jmgrosen@moz-F947D1B7.cs.ucsb.edu)
[01:43:47] <amatus> where's the documentation on file io?
[01:44:24] <steveklabnik> amatus: https://github.com/mozilla/rust/blob/master/src/libstd/rt/io/file.rs
[01:44:37] <amatus> thx
[01:44:56] <dbaupp> amatus: http://static.rust-lang.org/doc/master/std/rt/io/file/index.html too
[01:44:56] <ChrisMorgan> Hence http://static.rust-lang.org/doc/master/std/rt/io/file/index.html
[01:45:07] <Eridius> I think it might be http://static.rust-lang.org/doc/master/std/rt/io/file/index.html
[01:45:08] * dbaupp won the race \o/
[01:45:09] <steveklabnik> ChrisMorgan: you JUUUST beat me to it
[01:45:09] <dbaupp> :P
[01:45:11] <steveklabnik> http://static.rust-lang.org/doc/master/std/rt/io/index.html
[01:45:11] <steveklabnik> lol
[01:45:27] <ChrisMorgan> amatus: whose link did you click on?
[01:45:37] <amatus> dbaupp
[01:45:47] <amatus> and steveklabnik
[01:45:53] <dbaupp> \o/ haha
[01:45:56] *** Quits: grover (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:46:02] <ChrisMorgan> Aww... dbaupp did indeed win the race.
[01:46:05] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[01:46:28] <steveklabnik> yesssss
[01:46:29] <steveklabnik> :)_
[01:46:34] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[01:46:45] * dbaupp puts this on his CV
[01:47:17] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[01:47:22] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[01:48:56] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[01:50:12] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[01:51:52] <ChrisMorgan> dbaupp: I'm concerned about your employability if such a thing is significant enough to go on your CV.
[01:52:37] <SiegeLord> I'm sure he'll add plenty of buzzwords to make it carry its weight
[01:54:26] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[01:54:37] <tjc> technical support is a totally valid skill :-)
[01:54:46] <Eridius> "leveraged intimate knowledge about the platform to educate other developers about crucial aspects of the technology"
[01:54:54] <Eridius> synergistically
[01:55:54] <steveklabnik> lol
[01:56:29] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[01:56:57] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[01:58:11] <amatus> for some reason "use std::rt::io::{FileMode, FileAccess};" is not putting "Open" in scope
[01:58:42] <amatus> error: unresolved name `Open`.
[01:58:48] <Eridius> amatus: right. you have to use the individual variants too
[01:59:08] * Eridius thinks there should be some syntax to pull in an enum and all its variants, but isn't sure what it would be
[01:59:54] *** Quits: pcwalton (pcwalton@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[02:00:13] <cmr> strcat: is there any technical reason there's no `contains` on Iterator?
[02:00:19] <cmr> Or even on RandomAccessIterator
[02:01:07] *** Joins: Jesse_ (jruderman@moz-BBE3ABD.mv.mozilla.com)
[02:01:17] <Eridius> cmr: you can use .find().is_some() or .position().is_some(), although those take predicates instead of elements
[02:01:21] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[02:01:32] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[02:01:38] <strcat> use .any
[02:01:51] <Eridius> oh right, silly me. If you're using predicates, .any makes more sense
[02:01:52] <strcat> contains is painful in the same way as sum
[02:02:51] <cmr> yeah, the first thing I reached for was filter
[02:02:56] <dbaupp> strcat: it's not quite as bad, since <T:Eq> => Eq for &T
[02:03:07] <cmr> registry.rs:300:59: 300:60 error: obsolete syntax: obsolete argument mode
[02:03:09] <cmr> registry.rs:300                     if (&[end, one, two]).iter().filter(|&&x| x == name).next().is_some() {
[02:03:11] <cmr>                                                                            ^
[02:03:11] <dbaupp> strcat: so vec.iter().contains(& &1i) is ugly, but it'd work :P
[02:03:13] <cmr> note: replace `-` or `++` mode with `+`
[02:03:15] <cmr> Yikes!
[02:03:21] <dbaupp> cmr: s/&&/& &/
[02:03:26] <Eridius> cmr: that note seems wrong
[02:03:38] <cmr> Eridius: it is extremely wrong
[02:03:56] <cmr> recomending an obsolete argument mode with obsolete modes that have been gone for 6 months :p
[02:04:03] <dbaupp> syntax::parse::obselete needs to be cleaned out
[02:04:15] <Eridius> cmr: I don't think I've even seen -, +, or ++ modes
[02:04:46] *** Quits: jmgrosen (jmgrosen@moz-F947D1B7.cs.ucsb.edu) (Quit: jmgrosen)
[02:04:49] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 23.0.1/20130814063812])
[02:05:05] <cmr> So what I'm trying to do is check if this ~str I have is one of three &strs I have
[02:05:16] <cmr> I can't figure out a clean way to express it
[02:05:48] <dbaupp> x.iter().any(|s| *s == name)
[02:05:55] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[02:05:55] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/5Z6Jeg
[02:05:55] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[02:06:20] <dbaupp> or the good old end == name || one == name || two == name :P
[02:07:42] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[02:07:51] <amatus> Eridius: this fixes the documentation: https://github.com/mozilla/rust/pull/9505
[02:07:55] *** Joins: thewonderidiot1 (mike@moz-5506A033.hsd1.ca.comcast.net)
[02:08:37] *** Joins: jmgrosen (jmgrosen@moz-F947D1B7.cs.ucsb.edu)
[02:08:51] <Eridius> huh, the examples in that documentation aren't marked up with the example syntax, so they're not being compiled by `make check`. That seems wrong
[02:09:03] <Eridius> although I guess they elide a bunch of code
[02:09:05] *** jorendorff_away is now known as jorendorff
[02:10:31] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[02:10:56] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[02:10:56] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/S8GIyw
[02:10:56] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[02:10:59] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[02:10:59] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/02AyAA
[02:10:59] <ghrust> 13rust/06auto 14eb2b25d 15Alex Crichton: Refactor the logging system for fewer allocations...
[02:10:59] <ghrust> 13rust/06auto 1448fc715 15bors: auto merge of #9261 : alexcrichton/rust/logging, r=huonw...
[02:11:00] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[02:11:15] <strcat> Eridius: it doesn't extract examples from rust files
[02:11:28] * Jesse_ wonders if ghrust should move to the other channel
[02:12:19] <mcpherrin> Jesse_: it's a valid point
[02:12:24] <mcpherrin> not that it's too noisy a bot.
[02:12:33] *** Quits: fyolnish (fyolnish@moz-DE1C8B5C.uqwimax.jp) (Client exited)
[02:12:55] <doomlord_> http://static.rust-lang.org/doc/master/std/iter/trait.Iterator.html#fn.map <<< seems it was surprising because, map takes 'A' wheraes filter takes &A
[02:13:10] <Luqman> i like knowing when bors has picked up my pull, though i guess i could just lurk in whatever other channel it moved to
[02:13:14] <strcat> doomlord_: it shouldn't be surprising
[02:13:18] <strcat> map does A -> B
[02:13:23] <strcat> filter lets you view &A
[02:13:27] <strcat> it can't pass you ownership
[02:13:31] <strcat> it needs to continue passing it along
[02:13:43] <strcat> if it passed you A, it wouldn't have it anymore
[02:13:48] <mcpherrin> Luqman: Well presumably that would be #rust-internals where you already are
[02:15:24] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[02:15:37] <cmr> dbaupp: well, the thing about making x is that I'm getting lifetime mismatches... they're all function params, should I just give them lifetimes?
[02:15:39] * cmr tries
[02:15:51] *** Quits: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net) (Ping timeout)
[02:16:03] <cmr> Yup, that does it
[02:16:49] <cmr> Heh
[02:16:51] <cmr> task <unnamed> failed at 'Unexpected element', registry.rs:296
[02:16:53] <cmr> zsh: segmentation fault (core dumped)  ./generator gl
[02:16:57] <luisbg> what is a good way to debug Rust applications?
[02:17:04] <cmr> luisbg: println!()
[02:17:11] <luisbg> cmr, :)
[02:17:14] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[02:17:14] <luisbg> cmr, hello Corey
[02:17:17] <cmr> (Also gdb works pretty well if your program compiles with -Z extra-debug-info)
[02:17:32] <luisbg> no possible way of getting a printout of functions that are called
[02:17:43] <cmr> backtrace
[02:17:43] <luisbg> ?
[02:17:52] <luisbg> gdb and backtrace, ok
[02:17:54] <cmr> In gdb
[02:17:56] <cmr> the backtrace command
[02:17:59] <cmr> Oh *all* functions?
[02:18:04] <cmr> You'd want to use perf, on linux. It samples.
[02:19:05] <doomlord_> hopefully rust will handle bolt-ons to the standard iterators better than c++
[02:19:10] <luisbg> maybe I'm too used to the GStreamer debugging, were you have 5 levels
[02:19:12] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[02:19:23] <doomlord_> trait MyIter { .... whatever makes my code elegant .. }
[02:19:27] <cmr> luisbg: we have 4-level logging
[02:19:37] <luisbg> and you can run apps with what elements to get logging from and what level
[02:19:40] <strcat> doomlord_: you can easily take iterators as a parameter
[02:19:49] <luisbg> cmr, how do you use the 4-level logging?
[02:19:56] <strcat> fn foo<T: Iterator<int>>(iter: T) { }
[02:20:02] <strcat> fn foo<A, T: Iterator<A>>(iter: T) { }
[02:20:10] <strcat> fn foo<A: Add<T, T>, T: Iterator<A>>(iter: T) { }
[02:20:10] <cmr> luisbg: RUST_LOG=your_crate={1,2,3,4}
[02:20:17] <strcat> er
[02:20:21] <cmr> error, warn, info, debug, in that order
[02:20:21] <strcat> Add<A, A> ;p
[02:20:29] <luisbg> cmr, oh cool
[02:20:41] <luisbg> hopefully projects will make use of this
[02:20:48] <sfackler> you can also do stuff like RUST_LOG=your_crate=debug now
[02:20:59] <doomlord_> fair enough, but usually things i write are about transforming datastructures and being very clear about what i have at each stage - precalculating and formatting data
[02:22:09] <doomlord_> optimization usually centres on reasoning about the data layout (clustering, caching the right intermediate calculations)
[02:22:40] <luisbg> cmr, thanks for the help :)
[02:23:33] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Quit: Leaving)
[02:23:52] <doomlord_> i can see needing both to be convinient (filtering references and filtering values)
[02:24:08] <strcat> references are values
[02:24:50] <doomlord_> i need to be clear on whether something is a pointer or a pointer to a pointer. or an actual copy of a datastructure
[02:25:41] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:25:58] <strcat> the &A in filter in conceptual, if you already have a pointer it won't take a reference to it
[02:26:05] <strcat> it just means 'does not transfer ownership'
[02:27:08] *** Quits: vk (chatzilla@F92596F.2DEF7520.EF7679FA.IP) (Ping timeout)
[02:27:26] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[02:27:57] <strcat> the function will always be inlined, so there won't be a by-ref parameter if it's not large
[02:28:55] <doomlord_> to clarify - so you say 'map' takes A since it might need to pass ownership along the chain, wheras 'filter' never would so thats why its '&A'
[02:29:05] <strcat> filter can't take &A
[02:29:07] <strcat> er
[02:29:09] <strcat> filter can't take A
[02:29:13] <strcat> it wouldn't compile
[02:29:28] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[02:29:44] <strcat>             if (self.predicate)(&x) {
[02:29:45] <strcat>                 return Some(x);
[02:29:54] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[02:30:12] <strcat> if it passed x by-value to the predicate, it would no longer be able to return it
[02:30:12] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Connection reset by peer)
[02:30:20] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[02:30:30] <strcat> it doesn't have implications at runtime, LLVM is an optimizing compiler
[02:30:57] <myname> just curious, what would a 1-stream iterator do with something like "filter everything >1"?
[02:31:00] <strcat> it adds up the cost of instructions in a function, and if it's below the inline threshold it inlines it
[02:31:10] <myname> will a take(1) result in an endless loop?
[02:31:13] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[02:31:18] <strcat> take will take *at most* that many
[02:31:29] <strcat> skip will skip *at least* that many
[02:31:31] <strcat> etc.
[02:32:01] <strcat> rusti: std::iter::count(0, 1).take(10).collect::<~[int]>()
[02:32:02] <myname> strcat: but won't filter iterate long enough over the iterated objects to satisfy the take?
[02:32:05] -rusti- ~[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
[02:32:07] <Eridius> myname: yes. If you had an iterator that returned an infinite stream of 1's, and a filter applied to it for everything >1, then calling .next() would run indefinitely
[02:32:46] <strcat> myname: take is lazy
[02:32:46] <Eridius> rusti: std::iter::Repeat::new(1i).filter(|x| *x > 1i).next()
[02:32:52] -rusti- timeout triggered!
[02:33:07] <myname> strcat: i know
[02:33:08] * strcat misunderstood the question
[02:35:40] <Jesse_> i feel like there should be a collect_into_array so we don't have to type collect::<~[long::awkward::types]>
[02:36:19] *** Quits: kimundi (kimundi@moz-F77364E2.dip0.t-ipconnect.de) (Ping timeout)
[02:36:20] <myname> Jesse_: what should collect_into_array do?
[02:36:25] <strcat> Jesse_: or fix the language and allow partial type hints
[02:36:25] *** Quits: spud (spud@moz-8F8D4E52.lightspeed.bcvloh.sbcglobal.net) (Broken pipe)
[02:36:30] <strcat> there's more than one kind of vector
[02:36:55] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:37:34] <Jesse_> collect into an owned array of the iter type
[02:37:38] <doomlord_> is to_owned_vec() etc 'collect_into_array'
[02:37:51] <myname> are there plans to implement some kind of a "don't care"-strategy for methods of numbers?
[02:38:08] <strcat> doomlord_: but I want to replace that with being able to use _ in type hints
[02:38:21] <Jesse_> _ in type hints would be awesome
[02:38:29] <strcat> like
[02:38:36] <strcat> let xs: ~[_] = it.collect()
[02:38:38] <strcat> not
[02:38:48] <strcat> let xs: ~[foo::LongTypeName<K, V>] = it.collect()
[02:38:53] <myname> rusti: 5.pow(2)
[02:38:54] -rusti- <anon>:7:9: 8:5 error: type `<VI0>` does not implement any method in scope named `pow`
[02:38:54] -rusti- <anon>:7          5.pow(2)
[02:38:54] -rusti- <anon>:8     };
[02:38:54] -rusti- error: aborting due to previous error
[02:38:54] -rusti- application terminated with error code 101
[02:39:18] <strcat> I forget if I ever opened an issue for that
[02:39:23] <doomlord_> let xs:~[_] = it.collect()         vs        let xs:= it.to_owned_vec()    ?
[02:39:38] <doomlord_> leveraging the 2 way type-inference ?
[02:39:40] *** Joins: zz_kimundi (kimundi@moz-822AC7D.dip0.t-ipconnect.de)
[02:39:58] <Jesse_> or it.collect::<~[_]>
[02:40:10] *** zz_kimundi is now known as kimundi
[02:40:30] <strcat> doomlord_: all to_owned_vec does is call collect
[02:40:30] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[02:40:30] *** ChanServ sets mode: +ao brson brson
[02:40:40] <strcat> it's essentially just a workaround for not being able to say ~[_]
[02:40:41] <myname> :D
[02:40:53] <strcat>     fn to_owned_vec(&mut self) -> ~[A] {
[02:40:54] <strcat>         self.collect()
[02:40:56] <strcat>     }
[02:41:24] <myname> how does this make it possible to omit the type?
[02:41:34] *** Quits: maik (maik@moz-46093746.dip0.t-ipconnect.de) (Ping timeout)
[02:41:50] <strcat> because if the iterator type is known, it knows the inner type of the container
[02:41:56] <strcat> what collect doesn't know is the type of container you want
[02:42:09] <strcat> so you have to provide a type hint, and we don't have partial type hints
[02:42:27] <myname> huh?
[02:42:37] *** Joins: pcwalton (pcwalton@moz-BE33DA21.fw1.sfo1.mozilla.net)
[02:42:37] *** ChanServ sets mode: +ao pcwalton pcwalton
[02:42:44] <strcat> myname: collect returns a generic type
[02:42:46] <myname> you can't just make .collect()?
[02:42:54] <strcat> it exists
[02:42:57] <strcat> it returns a generic container
[02:43:09] <strcat> it can return a HashSet, a HashMap, a ~[T], a ~str
[02:43:14] <sfackler> r anyone? https://github.com/mozilla/rust/pull/9506
[02:43:26] <myname> how does to_owned_vec you pasted before fix that?
[02:43:26] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[02:43:39] <doomlord_> the result of .collect() comes from type inference (eg working back from the return value) ?
[02:43:42] <doomlord_> ^usually
[02:43:44] <strcat> myname: because it returns ~[A]
[02:43:53] <strcat> so the container type is known
[02:44:02] <strcat> collect needs a type hint for the container type
[02:44:11] <strcat> rustc likely already knows the element type
[02:44:12] <myname> strcat: so rust sees "oh, the function returns ~[A] so i'll cast it that way"?
[02:44:17] <strcat> myname: it doesn't cast it
[02:44:18] <cmr> ChrisMorgan: ping
[02:44:23] <ChrisMorgan> cmr: pong
[02:44:25] <aatch> sigh, transposed parenthesis... ((b1 & 0x07 << 18)) != ((b1 & 0x07) << 18)
[02:44:33] <cmr> ChrisMorgan: I'm seeing the vim highlighting die when I jump to a line sometimes.
[02:44:41] <strcat> myname: rust has type inference, it will infer types from a constraint later on
[02:44:42] <cmr> It requires going back up to a good highlighting and scrolling downards.
[02:44:49] <ChrisMorgan> Vim version?
[02:44:59] <cmr> VIM - Vi IMproved 7.4 (2013 Aug 10, compiled Sep  3 2013 19:58:40)
[02:45:00] <strcat> rusti: let mut xs = ~[]; xs.push(5); xs
[02:45:01] <cmr> Included patches: 1-16
[02:45:01] -rusti- ~[5]
[02:45:09] <cmr> (it's Arch's gvim)
[02:45:14] <cmr> (but I'm running it in the terminal)
[02:45:28] <aatch> cmr, ChrisMorgan, I'm assuming that the sync isn't set to a good place.
[02:45:28] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[02:45:31] <ChrisMorgan> cmr: ":syn sync"?
[02:45:55] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[02:46:04] <ChrisMorgan> I expect it to say "syncing starts 200 lines before top line".
[02:46:10] <cmr> ChrisMorgan: yup
[02:46:40] <ChrisMorgan> cmr: can you reproduce it consistently?
[02:46:41] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:46:51] <cmr> ChrisMorgan: let me try
[02:46:53] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Connection reset by peer)
[02:46:54] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:47:23] <strcat> myname: 
[02:47:30] <strcat> rusti: let mut xs = ~[]; xs.push(5); xs
[02:47:34] -rusti- ~[5]
[02:47:35] <strcat> that's the same thing
[02:47:45] <cmr> ChrisMorgan: seems not, wiht some simple things like jumping aroudn and going back
[02:47:48] <strcat> what's the type of xs? all rustc knows from the expression assigned to it is ~[A]
[02:47:51] <strcat> not what A is 
[02:47:56] <strcat> it learns what A is from push(5)
[02:48:00] <doomlord_> so 'move_iter().map() ' ... would consume values (through the map operation)  ?
[02:48:16] <strcat> move_iter on vectors?
[02:48:24] <strcat> if you have ~[A], it returns Iterator<A>
[02:48:27] <strcat> and map does A -> B
[02:48:53] <polyfractal> What's the preferred way to handle errors/exceptions in Rust at the moment?  For example, a parameter that is out of acceptable bounds.  Return values signifying error state vs success?
[02:48:56] <strcat> iter on &[A] returns Iterator<&A>
[02:48:57] <ChrisMorgan> cmr: I'm not aware of anything that would cause problems of this type. I haven't observed any myself. Ctrl+L may also fix it up (or may not, it depends on the cause of failure) if it gets tangled.
[02:49:16] <strcat> and if you have Iterator<&int>, map is going to take &int and return B
[02:49:16] *** Joins: elifrey (peripateti@moz-B5928FE2.hsd1.wa.comcast.net)
[02:49:26] <cmr> ChrisMorgan: it fixes it sometimes, other times not.
[02:49:44] <doomlord_> what might be setting my expectations with some misalignment is i've always perceived 'map' in a pure functional way, the original is a source, unchanged (moving a value seems to be a change)
[02:49:44] <cmr> polyfractal: for that one, you'd use fail!()
[02:49:59] *** Quits: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP) (Quit: Leaving)
[02:50:00] <cmr> polyfractal: although http://static.rust-lang.org/doc/master/tutorial-conditions.html 
[02:50:02] <strcat> doomlord_: map doesn't change anything
[02:50:09] <strcat> it takes a generic parameter A, by-value
[02:50:21] <polyfractal> cmr: ah nice, will read that.  Thanks :)
[02:50:22] <strcat> it doesn't care what it is or where it comes from
[02:50:57] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[02:50:57] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1448fc715 to 1400db6f6: 02http://git.io/N3iJvQ
[02:50:57] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[02:50:57] <strcat> rusti: fn map_one<A, B>(x: A, f: fn(A) -> B) -> B { f(x) }
[02:50:59] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[02:50:59] <ghrust> 01[13rust01] 15bors pushed 1 new commit to 06auto: 02http://git.io/ICfHLg
[02:50:59] <ghrust> 13rust/06auto 148a4f0fa 15bors: auto merge of #9499 : brson/rust/relnotes, r=cmr
[02:50:59] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[02:50:59] -rusti- pastebinned 6 lines of output: http://sprunge.us/bECf
[02:51:07] <strcat> rusti: fn map_one<A, B>(x: A, f: &fn(A) -> B) -> B { f(x) }
[02:51:08] -rusti- ()
[02:51:24] <strcat> doomlord_: that is how map is defined
[02:51:41] <strcat> rusti: fn map_one<A, B>(x: A, f: &fn(A) -> B) -> B { f(x) } map_one(1, |x| x * 2)
[02:51:42] -rusti- 2
[02:51:47] *** Quits: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP) (Ping timeout)
[02:51:47] <strcat> rusti: fn map_one<A, B>(x: A, f: &fn(A) -> B) -> B { f(x) } map_one(&1, |x| *x * 2)
[02:51:48] -rusti- 2
[02:52:03] <ChrisMorgan> cmr: BTW, what's the nature of the syntax highlighting failing?
[02:52:21] <strcat> doomlord_: it's exactly that, but defined lazily over a variable length iterator
[02:52:33] <strcat> that's just how passing parameters works in rust
[02:53:15] <cmr> ChrisMorgan: it thinks everything is a string
[02:53:24] <cmr> ie, it's all pale yellow (in my color scheme)
[02:53:27] <Amaranth> Whoa, suddenly release date change
[02:53:41] <ChrisMorgan> cmr: maybe you're in the middle of a long string around 200 lines above?
[02:53:50] <cmr> ChrisMorgan: perhaps!
[02:53:55] <cmr> Amaranth: to when?
[02:54:15] <Amaranth> cmr: Err, I mean the one from October to September
[02:54:33] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[02:54:35] <cmr> Amaranth: oh, yeah. Pretty sure that was a typo originally.
[02:54:41] <ChrisMorgan> The sync is certainly not perfect. syn sync fromstart is, of course, the most correct way, but it gets a little slow for large files.
[02:54:50] <elifrey> I am really enjoying the iter protocal, it makes really elegent code for building/transforming vectors. However, if I have a vector of some type I want "unboxed", I find myself doing `iterator.map(|&x| { x })` often. Has anyone else found some best practices for this situation?
[02:56:01] <strcat> elifrey: you don't need { }
[02:56:07] <strcat> x is an expression
[02:56:10] <myname> elifrey: you should be able to make something like "unbox = map(|&x| {x})", but i don't know the exact syntax to do so
[02:56:36] <elifrey> strcat: cool, well that certainly lowers the syntactic overhead :P
[02:57:19] <myname> i'm still quite unsure on how to implement iterator methods oneself
[02:57:23] <strcat> elifrey: iter() yields &A since vectors are generic, and not all types are implicitly copyable
[02:57:29] <strcat> myname: look in std::iter
[02:57:36] <strcat> you want to implement functions though
[02:57:56] <elifrey> I am specifically worried about performance. Is the iter protocal a good way to prototype, but I should hand-roll code if I don't want to keep chasing pointers?
[02:58:10] <doomlord_> some_collection<T>.iter().map(...)    seems to pastt &T to map, which made sense to me for sure.
[02:58:17] <strcat> elifrey: performance is equivalent to hand-written loops in C
[02:58:38] <strcat> elifrey: LLVM is an optimizing compiler, and iterators are a very low-level concept in LLVM's world
[02:58:48] <strcat> if you don't believe me you can look at the IR ;p
[02:58:52] <doomlord_> i think i probably have to try writing something myself and see it go wrong before i'm convinced that map() and filter() should take different levels of indirection
[02:59:05] <elifrey> strcat: so is `|&x| x` a nop?
[02:59:18] <strcat> elifrey: all of the iterator methods get inlined
[02:59:24] <elifrey> cool
[02:59:31] <strcat> elifrey: it will vectorize a loop too
[02:59:35] <strcat> here's a neat example
[03:00:03] <strcat> range(0, 100000).map(|x| x * 2).take_while(|x| x < 10000).fold(0, |a, b| a + b)
[03:00:06] <strcat> that is constant folded.
[03:00:17] <strcat> (with floats it isn't, LLVM is only clever to a certain point ;p)
[03:00:38] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[03:00:58] *** Quits: jmgrosen (jmgrosen@moz-F947D1B7.cs.ucsb.edu) (Quit: jmgrosen)
[03:01:28] <doomlord_> range(0,100) gets an iterator of *values*, wheras collection().iter() passes refferences.. ?
[03:01:44] <strcat> iter() has to pass references
[03:01:46] <strcat> how else?
[03:01:48] <strcat> collections are generic
[03:02:01] <strcat> not all types are implicitly copyable
[03:02:33] <strcat> it has no performance implications
[03:02:42] <strcat> -O -S --emit-llvm
[03:02:45] <doomlord_> well map taking 'pointeres'/'references' whatever you call them certainly makes sense to me.
[03:03:33] <strcat> it doesn't
[03:03:35] <strcat> it takes A
[03:03:37] <strcat> by-value
[03:03:40] <strcat> returns BV
[03:03:42] <strcat> B
[03:03:49] <strcat> rusti: fn map_one<A, B>(x: A, f: &fn(A) -> B) -> B { f(x) } map_one(1, |x| x * 2)
[03:03:49] -rusti- 2
[03:03:56] <strcat> doomlord_: that is *exactly* how it is implemented
[03:04:04] <doomlord_> i'm thinking relative to the colection , there is a .iter() in the middle :) 
[03:04:15] <strcat> not all iterators yield & ptrs
[03:04:18] <strcat> there is mut_iter, yields &mut
[03:04:22] <strcat> there is move_iter
[03:04:29] <strcat> there are ones generating values like range(), or I/O
[03:04:31] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[03:04:50] <doomlord_> tangential question which i might as well ask now, i gues the answer is above, is how to 'update' a collection.. 
[03:05:01] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[03:05:01] *** ChanServ sets mode: +ao brson brson
[03:05:10] <doomlord_> if there is a way to do that with iterators
[03:05:16] <strcat> yes
[03:05:18] <strcat> mut_iter
[03:05:54] <strcat> rusti: fn filter_one<A>(x: A, f: &fn(&A) -> bool) -> Option<A> { if f(&x) { Some(x) } else { None } } 
[03:05:54] -rusti- ()
[03:06:06] <strcat> rusti: fn filter_one<A>(x: A, f: &fn(&A) -> bool) -> Option<A> { if f(&x) { Some(x) } else { None } } filter_one(1, |x| *x < 2)
[03:06:07] -rusti- Some(1)
[03:06:09] <strcat> there's filter
[03:06:12] <strcat> now try not using &
[03:06:19] <strcat> rusti: fn filter_one<A>(x: A, f: &fn(A) -> bool) -> Option<A> { if f(x) { Some(x) } else { None } } filter_one(1, |x| *x < 2)
[03:06:20] -rusti- <anon>:7:120: 7:122 error: type <VI0> cannot be dereferenced
[03:06:20] -rusti- <anon>:7          fn filter_one<A>(x: A, f: &fn(A) -> bool) -> Option<A> { if f(x) { Some(x) } else { None } } filter_one(1, |x| *x < 2)
[03:06:20] -rusti-                                                                                                                                  ^~
[03:06:21] -rusti- error: aborting due to previous error
[03:06:21] -rusti- application terminated with error code 101
[03:06:26] <strcat> rusti: fn filter_one<A>(x: A, f: &fn(A) -> bool) -> Option<A> { if f(x) { Some(x) } else { None } } filter_one(1, |x| x < 2)
[03:06:27] -rusti- pastebinned 8 lines of output: http://sprunge.us/ZCSi
[03:06:34] <elifrey> I don't totally grock constant folding. In Haskell or with python generators, your loops get composed as one pass over the thing you are iterorating. I assumed rust iterators work the same way. I gather this constant folding is something more special.
[03:06:37] <strcat> not all types are implicitly copyable - can't be done
[03:06:57] <strcat> elifrey: rust iterators do work that way, but LLVM optimizes
[03:07:03] <strcat> a vector iterator takes a ptr to the start and a ptr one past the end
[03:07:10] <strcat> each iteration, it increments the ptr and returns Some(ptr)
[03:07:16] <strcat> when ptr == end, it returns None
[03:07:32] <strcat> Some(ptr) is compiled as a nullable ptr because rust knows it is non-nullable
[03:07:36] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[03:07:48] <strcat> so vector iterators *inherently* yield pointers, since that's the iterator over the vector
[03:08:07] <strcat> if you want, you can dereference (for implicitly-copyable types) or clone/deep_clone it
[03:08:14] <strcat> anyway g2g
[03:08:15] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[03:08:16] <doomlord_> C: for (i=0; i<xs.num; i++)  {   some_update(&xs.elem[i]); }   --->           xs.mut_iter(). ...?
[03:08:26] <elifrey> strcat: thnx
[03:10:19] <myname> doomlord_: i'd say map
[03:10:27] *** nrc|afk is now known as nrc
[03:10:51] <doomlord_> ^^^ now that would surprise me again - because i'd have thoguht map is a pure functional thing that never updates
[03:11:17] <doomlord_> now i remember why i never use std::algorithms :)
[03:11:38] <myname> well, if you get a mutable reference you can change the stuff there, can't you?
[03:11:55] <doomlord_> have i got the wrong definition of map in my head
[03:12:24] <doomlord_> my perception of map is from the world of pure functional programming
[03:12:54] <doomlord_> changing something inplace , without returning something - that would be a different function
[03:13:10] <myname> doomlord_: in pure functional programming, there is no such thing as change a variable, isn't it?
[03:13:31] <doomlord_> right which is why i wouldn't expect map to change anything :)
[03:14:23] <myname> you wouldn't expect some_update to change things, either ;)
[03:14:25] <doomlord_> so its possible part of whats throwing me here is having the wrong idea of what rust is in map
[03:14:42] <doomlord_> different words mean differnt things to different people...
[03:14:58] <doomlord_> ... "update" is the half of code that i've always worked on that *does* change things.
[03:15:04] <doomlord_> Update()  Render()
[03:15:31] <myname> doomlord_: well, map in rust still does what map in haskell does
[03:15:39] <myname> apply a function to every element
[03:16:02] *** Joins: sruggier (sruggier@B3C08253.4562CF68.6BEEAEBD.IP)
[03:16:05] <myname> of course you can apply functions that actuallychange the value
[03:16:45] <doomlord_> its a big conceptual difference:
[03:16:56] <doomlord_> if you are thinking about which parts of an 'update' you can parallelize..
[03:17:06] <doomlord_> you want it to really stand out, what doesn't mutate things
[03:17:27] <sruggier> Does Rust have any form of implementation inheritance at the moment? I was thinking it had at least the ability to define default methods in traits, but now I'm having trouble finding documentation that confirms this.
[03:17:29] *** Quits: Jesse_ (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse_)
[03:17:34] <myname> doomlord_: if i have "mut_iter" i expect that, too
[03:17:58] <doomlord_> ok the mut_iter() is the giveway fair enough.
[03:18:29] <cmr> sruggier: we do have default methods.
[03:18:31] <doomlord_> so my example above is   indeed xs.mut_iter().map( some_update )
[03:18:32] *** Quits: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP) (Ping timeout)
[03:18:39] <cmr> doomlord_: yes
[03:18:53] *** Joins: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP)
[03:19:07] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:19:54] *** Quits: Ferreus (ferreus@moz-AF602926.dyn.telefonica.de) (Ping timeout)
[03:20:02] <cmr> sruggier: https://github.com/mozilla/rust/blob/master/src/librustdoc/fold.rs#L15 as an example
[03:20:37] <aatch> We dont, however, have proper inheritance for default methods (I believe)
[03:20:37] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Connection reset by peer)
[03:20:48] <cmr> aatch: well, what do you mean?
[03:20:53] *** Quits: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP) (Ping timeout)
[03:21:11] <aatch> cmr, like overriding in a subtrait with another default method.
[03:21:15] <aatch> I could be wrong though.
[03:21:25] *** Joins: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP)
[03:21:28] <cmr> That *should* work
[03:21:29] <sruggier> fair enough, I just want some way of factoring out functionality
[03:24:04] <sruggier> actually, I guess even without default trait methods, one can kind of fall back on using common static methods
[03:24:10] <sruggier> static functions*
[03:26:03] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[03:29:15] *** Joins: aeqwa (aeqwa@moz-607ACAD7.dsl.tropolys.de)
[03:29:50] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[03:31:32] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[03:38:53] <doomlord_> 	let b=a.iter().filter(|&x|*x>3).map(|x|*x).to_owned_vec();  <<<< even if i was only going to write that once, i would probably be tempted to make a helper function 'filter_to_vec()' to make the site where its' used clearer.  (not saying that should go in the std libaries)
[03:39:14] <Eridius> doomlord_: just use map_filter?
[03:39:16] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[03:39:19] <Eridius> or is it filter_map
[03:39:27] <Eridius> doomlord_: also, |&x|*x>3 derefs twice
[03:39:35] <Eridius> which depends on what a is
[03:39:40] <Eridius> is a a VecIterator? If so, ok
[03:39:48] <Eridius> err a a vec
[03:40:08] <doomlord_> 'derefs twice' , it needed that , the way iter() and filter() works
[03:40:17] <Eridius> doomlord_: only the way .iter() works on vecs
[03:40:26] <doomlord_> this is the whole thing that started me here :)
[03:40:37] <Eridius> for example a ~str doesn't yield references via its iterator (since it yields bytes and chars, both of which are implicitly copyable)
[03:40:50] <doomlord_> well vecs' will be 90% of my cases probably :)
[03:42:34] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[03:43:11] *** Joins: juhp (Mibbit@moz-40F11E8A.cidr.odn.ne.jp)
[03:43:57] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[03:44:31] <doomlord_> wait so, a:~str   a.iter()...     does something differnt to a:~[u8]   a.iter() ?
[03:44:35] *** Joins: sankha93 (Instantbir@CAF6D3FF.9C875DCD.9105FBCF.IP)
[03:44:43] <doomlord_> ^^^ asside from char instead of u8
[03:45:05] <juhp> hi, I tried building from 0.7 and current 0.8 tarballs and get:
[03:45:10] <juhp> compile: x86_64-unknown-linux-gnu/rt/stage0/linenoise/utf8.o make: *** No rule to make target `x86_64-unknown-linux-gnu/rt/stage0/arch/x86_64/_context.o', needed by `x86_64-unknown-linux-gnu/rt/stage0/librustrt.so'.  Stop.
[03:45:22] <juhp> (erm that two lines)
[03:45:37] <juhp> (this is on Fedora 19)
[03:45:38] <cmr> juhp: can you try running make again?
[03:46:36] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[03:48:19] <Eridius> doomlord_: yes
[03:48:27] <Eridius> rusti: "foo".iter().to_owned_vec()
[03:48:28] -rusti- ~['f', 'o', 'o']
[03:48:30] <juhp> cmr: that gives the same make error
[03:48:37] <Eridius> rusti: "foo".byte_iter().to_owned_vec()
[03:48:37] -rusti- ~[102u8, 111u8, 111u8]
[03:48:49] *** Joins: maik (maik@moz-46093746.dip0.t-ipconnect.de)
[03:48:49] <Eridius> doomlord_: str.iter() yields an Iterator<char>. str.byte_iter() yields an Iterator<u8>
[03:48:59] <juhp> maybe I should paste the build log somewhere
[03:49:02] <Eridius> doomlord_: the reason why vec.iter() yields an Iterator<&A> is because it has to be generic over whatever the vector contains
[03:49:10] <cmr> juhp: try cloning from git..
[03:49:13] <dandy> speaking of yield, any talk of adding that to rust?
[03:49:16] <juhp> okay will do
[03:49:19] *** Quits: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP) (Ping timeout)
[03:49:26] <Eridius> dandy: the keyword is reserved, but I suspect generators, if they ever land, will be a post-1.0 feature
[03:49:32] <cmr> dandy: quite a bit of talk.
[03:49:33] *** Joins: jxv (jxv@moz-B6559D27.socal.res.rr.com)
[03:49:37] <dandy> I don't think C# ggot them till 2.0
[03:49:46] <cmr> dandy: http://michaelwoerister.github.io/2013/08/10/iterator-blocks-features.html is the most recent blog post about it
[03:49:49] <cmr> THere was an ML thread.
[03:49:52] <cmr> but yeah, post-1.0
[03:49:56] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[03:50:04] <doomlord_>  the reason why vec.iter() yields an Iterator<&A> am i remembering wrongly talk of vec.iter() above yielding Iterator<A>
[03:50:22] *** Joins: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP)
[03:50:46] <cmr> doomlord_: vec.iter() returns an iterator that returns pointer to the elements in the vector.
[03:50:51] <doomlord_> ( i was definitely seeing maps over vector getting &A , now i'm confused as to whether Iterator<A>.map gives you &A or ITerator<&A> ,map gives you &A :) 
[03:51:31] <doomlord_> 'that returns pointer to the elements...' thats Iterator<A> or Iterator<&A>
[03:51:44] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[03:51:49] <Eridius> doomlord_: Iterator<&A>
[03:51:50] <cmr> http://static.rust-lang.org/doc/master/std/vec/struct.VecIterator.html
[03:52:31] <cmr> and map is http://static.rust-lang.org/doc/master/std/iter/struct.Map.html
[03:52:53] <cmr> which takes an Iterator<A> and is an  Iterator<B>
[03:52:59] <cmr> so map is whatever you want it to be.
[03:55:07] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[03:55:41] <doomlord_> what it was that got me interested in an FP style in the first place..
[03:56:22] <doomlord_> a few specific patterns that were easy to write with for loops, but hard to optimize onthe xbox360
[03:56:48] <doomlord_> at that point i wanted anonymous functoins and HOFs.. sadly this was many years before C++11 was available
[03:57:02] <doomlord_> code had to be refactored to fit those cases
[03:57:34] <doomlord_> there were a few specific patterns for avoiding the "if"
[03:57:59] <doomlord_> turning it into branchless code that could then be unrolled 
[03:58:27] <doomlord_> (which was a ballpark 10x speedup, or rather without it code was ~10x slower than you expected it to be coming from a PC)
[04:00:20] <myname> how comes?
[04:00:35] <doomlord_> in-order processor stalled the maths pipeline
[04:00:47] <doomlord_> maths instructions had latencies of 12
[04:00:49] <Amaranth> I remember the talk about that at the start of the generation
[04:01:01] <doomlord_> the compiler could only rescehdule if you had no branches
[04:01:05] <Amaranth> Basically they said they were great graphics machines but were going to be terrible for AI and physics
[04:01:08] <myname> who needs math anyways
[04:01:11] <doomlord_> so for full speed, you needed to unroll loops 8x
[04:01:35] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[04:01:39] <doomlord_> although we dont have this situation now... some of the SIMD stuff today looks reminiscent, eg
[04:01:52] <doomlord_> what you might end up doing with the new gather instructions
[04:01:56] <myname> Amaranth: which was true for most game devices that time
[04:02:13] <doomlord_> (unroll 8x was a good number, you had 2 hyperthreads at least)
[04:02:16] <Amaranth> As far as I'm aware not really
[04:02:25] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[04:02:27] <Amaranth> The PS3 and 360 were especially bad here
[04:02:37] <Amaranth> Because they were in order with long pipelines
[04:02:42] <doomlord_> they were great for AI and physics, just not with code that looked sane
[04:02:53] <doomlord_> if i could take a c++11 compiler back to 2005 ...
[04:03:07] <myname> ah, long pipelines
[04:03:18] <doomlord_> long pipelines + in-order 
[04:03:19] <myname> they should've asked intel about the p4
[04:03:40] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: My lid went down)
[04:04:33] *** Quits: a__ (a__@moz-4CC03B10.nycmny.fios.verizon.net) (Ping timeout)
[04:04:34] <doomlord_> one of the patterns was to step through a collection using a branchless trick to conditionally update a pointer writing indices out, then go bakc over the collection and actually do what the original loop body did
[04:04:46] <doomlord_> (^^ usiong the indices)
[04:05:18] <doomlord_> i can't remember all the tricks off hand.. but i remember there were 5 different ways of handling a straightforawrd 'if'.
[04:05:31] <myname> lol
[04:05:31] <doomlord_> or rather of handling a boolean :)
[04:05:57] <doomlord_> depending on where the bool was generated, and what effect you needed from it
[04:06:01] *** Quits: maik (maik@moz-46093746.dip0.t-ipconnect.de) (Ping timeout)
[04:06:02] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[04:06:02] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/o2uAuA
[04:06:02] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[04:06:12] <myname> games like df need to hit mainstream in order to change such things
[04:06:23] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[04:06:33] *** Joins: a__ (a__@moz-4CC03B10.nycmny.fios.verizon.net)
[04:07:05] <doomlord_> so basically i'd been craving 2 things insanely since about then.. (2005..2006 whenever it was)
[04:07:27] <Amaranth> Is one of those things a well made CPU? :)
[04:07:35] <doomlord_> mostly lambdas... but also a load of other tweaks releated to immutability / contrl of side effects
[04:08:06] <doomlord_> heh 
[04:08:31] <doomlord_> oh and one more thing i've been craving...
[04:08:42] <doomlord_> given how complex all the patterns were, AST pattern matching.
[04:08:56] <Amaranth> Oh, you're one of those
[04:09:00] <doomlord_> instead of trying to document all the cases..
[04:09:15] <doomlord_> ... search code by writing what you want, then asking for the function that looks like that.
[04:09:16] <Amaranth> There is a group that really wishes C++ standardized such a feature
[04:09:18] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[04:09:25] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Client exited)
[04:09:35] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:09:46] <Amaranth> But ASTs aren't exactly portable and tend to not be stable
[04:09:48] <doomlord_> i actually wrote a crazy regex to search replace some of the loops, but as youcan imagine it wasn't 100%
[04:09:58] <Amaranth> And hell, MSVC doesn't even generate an AST
[04:10:17] <doomlord_> thats when i started to get frustrated that C++ is so hard to parse.
[04:10:19] *** jorendorff is now known as jorendorff_away
[04:10:24] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Quit: Leaving)
[04:10:46] <Amaranth> doomlord_: So what you really needed was libclang :D
[04:10:46] <strcat> rusti: char::is_lower
[04:10:48] -rusti- pastebinned 11 lines of output: http://sprunge.us/LYdO
[04:10:55] <strcat> rusti: std::char::is_lower
[04:10:55] -rusti- <anon>:7:9: 7:28 error: unresolved name `std::char::is_lower`.
[04:10:55] -rusti- <anon>:7          std::char::is_lower
[04:10:56] -rusti-                   ^~~~~~~~~~~~~~~~~~~
[04:10:56] -rusti- error: aborting due to previous error
[04:10:56] -rusti- application terminated with error code 101
[04:10:59] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[04:10:59] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/lhyrOw
[04:10:59] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[04:11:00] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[04:11:00] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/BhAy9w
[04:11:00] <ghrust> 13rust/06auto 14e94b3fa 15Marvin LÃ¶bel: Moved StrSlice doc comments from impl to trait....
[04:11:00] <ghrust> 13rust/06auto 1433fef99 15bors: auto merge of #9392 : Kimundi/rust/str_docs, r=cmr...
[04:11:01] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[04:11:11] <Eridius> is_lowercase
[04:11:34] * strcat just looked
[04:12:17] <doomlord_> (<myname> who needs math anyways <<< practically all game code was mixed maths and decisions :) )
[04:12:44] <doomlord_> 10 'non technical coders' writing loops with ifs and maths...
[04:12:57] <doomlord_> then some tehnical coders going back over those to optimize...
[04:13:13] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: G'night everynyan~!)
[04:16:41] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[04:16:41] <ghrust> 01[13rust01] 15brson merged 06master into 06dist-snap: 02http://git.io/nW6RVg
[04:16:41] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[04:20:50] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:24:20] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:24:50] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[04:25:38] <strcat> "foo".iter().next_back()
[04:25:42] <strcat> rusti: "foo".iter().next_back()
[04:25:43] -rusti- Some('o')
[04:26:09] * juhp tries building llvm...
[04:26:33] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[04:26:52] *** Quits: Azdle (patrick@moz-8C723B60.hsd1.mn.comcast.net) (Ping timeout)
[04:27:02] <juhp> cmr: I got the same with git (using ./configure --llvm-root=/usr) - guess I may report a bug later
[04:27:25] <juhp> trying now without --llvm-root
[04:27:32] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[04:27:41] *** Joins: adu (ajr@moz-BF2B1AE4.washdc.fios.verizon.net)
[04:28:38] <strcat> juhp: rust builds a patched LLVM
[04:29:49] *** Joins: Marshall (Marshall@moz-60878DF8.hsd1.va.comcast.net)
[04:30:13] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[04:30:49] *** Parts: Marshall (Marshall@moz-60878DF8.hsd1.va.comcast.net) ()
[04:32:01] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[04:33:34] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[04:35:36] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[04:35:39] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[04:38:58] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[04:39:28] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[04:41:15] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[04:41:30] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[04:45:25] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[04:45:41] *** Quits: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca) (Quit: canhtak)
[04:46:25] *** Joins: vk (chatzilla@moz-389FEE13.hsd1.ca.comcast.net)
[04:46:59] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[04:48:01] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[04:49:03] *** Quits: vk (chatzilla@moz-389FEE13.hsd1.ca.comcast.net) (Ping timeout)
[04:51:48] *** Joins: vk (chatzilla@moz-389FEE13.hsd1.ca.comcast.net)
[04:52:18] *** Quits: sankha93 (Instantbir@CAF6D3FF.9C875DCD.9105FBCF.IP) (Ping timeout)
[04:54:20] <Zor> does rust use a task-local gc at this point?
[04:54:55] <strcat> it doesn't use a gc yet
[04:55:02] *** Quits: dandy (Dandy@moz-84CC8377.hsd1.co.comcast.net) (Quit: Leaving)
[04:55:29] <strcat> @ is just a slower version of Rc from libextra right now
[04:55:42] <Zor> so @ is still collected with the cycle collector?
[04:55:49] <strcat> there's no cycle collector
[04:56:00] <strcat> it leaks cycles into the task ends
[04:56:04] <strcat> until the task ends*
[04:56:16] <kalenedrael> nice
[04:56:23] *** Quits: aeqwa (aeqwa@moz-607ACAD7.dsl.tropolys.de) (Quit: Lost terminal)
[04:56:32] <Zor> that doesn't sound healthy
[04:56:41] *** Quits: vk (chatzilla@moz-389FEE13.hsd1.ca.comcast.net) (Ping timeout)
[04:56:48] <Zor> in any case, is there a repo somewhere with an in-development gc?
[04:57:37] <strcat> graydon started writing a prototype of one but it probably doesn't build/merge anymore
[04:57:37] *** Quits: adu (ajr@moz-BF2B1AE4.washdc.fios.verizon.net) (Quit: adu)
[04:58:19] <strcat> atm it seems most likely that @ will be moved out of the language's syntax and done with compiler hooks in the stdlib
[04:58:33] <juhp> strcat: ah
[04:59:22] *** Joins: Shaladdle (anonymous@moz-424BC304.hsd1.pa.comcast.net)
[05:00:03] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[05:00:07] <juhp> strcat: are the llvm patches going upstream?
[05:00:12] <Shaladdle> I'm compiling rust on OS X, and I get "g++: error: unrecognized command line option '-rdynamic'" when I do make
[05:00:15] <strcat> juhp: eventually
[05:00:20] <strcat> afaik no one is actively working on it
[05:00:25] <juhp> ok thanks
[05:00:54] <strcat> Shaladdle: odd, rdynamic is a valid switch
[05:01:29] <Shaladdle> on :(
[05:01:30] <Shaladdle> :(*
[05:01:41] <Zor> gcc on os x is ancient
[05:01:50] <Zor> 4.2-ancient
[05:01:59] <Zor> so it's not surprising if it doesn't understand that switch
[05:02:05] <Shaladdle> when I do g++ --version I get 4.7.3
[05:02:34] <Shaladdle> oh because it's the one I installed through homebrew
[05:04:47] <Shaladdle> should 4.7 be ok?
[05:05:35] <Eridius> Shaladdle: use clang
[05:06:32] <Shaladdle> configure flag?
[05:06:41] <Eridius> --enable-clang
[05:06:50] <Shaladdle> thanks!
[05:07:23] <Jesse> maybe it should do that by default on mac? or if the installed gcc is ancient?
[05:09:05] *** Joins: adu (ajr@moz-BF2B1AE4.washdc.fios.verizon.net)
[05:10:41] <strcat> acrichto: around?
[05:11:38] *** Quits: jxv (jxv@moz-B6559D27.socal.res.rr.com) (Ping timeout)
[05:13:03] *** Joins: jaen (jaen@moz-28AFBCCE.play-internet.pl)
[05:13:12] *** Joins: ww (Mibbit@moz-DFAED48A.lightspeed.sntcca.sbcglobal.net)
[05:13:40] <ww> quick question: is hashmap going to be natively supported in the language syntax?
[05:13:51] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[05:14:06] *** Joins: sankha93 (Instantbir@CAF6D3FF.9C875DCD.9105FBCF.IP)
[05:14:06] <strcat> ww: if you mean special-cased, definitely no
[05:14:17] <strcat> if you mean will we have generic container literals, maybe one day
[05:14:31] <ww> generic container literals
[05:14:41] <strcat> it's not on the roadmap, but could happen
[05:14:52] <ww> like in javascript or ruby or python, map is a first class in syntax
[05:15:05] <ww> vec is in rust already, map should be too
[05:15:08] <strcat> python doesn't have generic container literals
[05:15:12] <strcat> ww: no, it shouldn't be
[05:15:16] <strcat> we need fewer special cases
[05:15:18] *** Joins: vk (chatzilla@moz-389FEE13.hsd1.ca.comcast.net)
[05:15:40] <ww> why not?  map, like vec, is so pervasive
[05:15:51] <strcat> because there are *many* possible implementations of maps
[05:16:07] <strcat> C++11 has generic initializer literals
[05:16:18] <strcat> they work for any container
[05:16:39] <strcat> fwiw, I implemented an alternate vector with 8x faster push than rust's standard vector
[05:16:45] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[05:16:46] <ww> ok, i'll wait to see how it looks like
[05:16:48] <strcat> thanks to it being in the language, it's nearly impossible to migrate to it
[05:16:57] <strcat> and there are alternate kinds of vectors
[05:17:05] <strcat> ww: C++11's syntax works like this
[05:17:17] <strcat> vector<int> {1, 2, 3, 4, 5}
[05:17:24] <strcat> map<int, int> {{1, 2}, {3, 4}}
[05:17:29] <ww> yeah, but the common case should be readily accessible.  the specialized fast hashmap can be in struct/class
[05:17:34] <strcat> and it works for *any* type - a third party container can implement it
[05:17:38] <strcat> ww: std::hashmap isn't fast
[05:17:42] <strcat> it places security over performance
[05:17:46] <ww> ok
[05:17:50] <Eridius> strcat: why is it 8x faster push?
[05:17:58] <ww> the c++ syntax is not too bad
[05:18:19] <strcat> Eridius: because it doesn't have to deal with the header, so the code is 1/3 the size
[05:18:34] <Eridius> strcat: then how does it know how large it is?
[05:18:42] <strcat> Eridius: https://github.com/mozilla/rust/issues/8981
[05:18:56] <strcat> implemented like std::vector in C++, the proven/accepted way to do it
[05:19:02] <strcat> I find rust's way really strange.
[05:19:08] <Eridius> ahh
[05:19:13] <Eridius> yeah rust's way is odd
[05:19:57] *** Quits: jaen (jaen@moz-28AFBCCE.play-internet.pl) (Ping timeout)
[05:20:05] <strcat> and we end up needing OptVec
[05:20:10] <strcat> which adds a branch to every operation
[05:20:20] <strcat> with the C++-style, that optimization is free
[05:20:21] <Eridius> what's OptVec?
[05:20:43] <Eridius> "compile with `-Z no-monomorphic-collapse` to avoid perf issue" wat
[05:20:43] *** Joins: jaen (jaen@moz-28AFBCCE.play-internet.pl)
[05:20:58] <strcat> Eridius: need no-monomorphic-collapse to benchmark rust, because it's broken
[05:21:11] <strcat> it stops stuff like transmute from being inlined
[05:21:19] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[05:21:27] * strcat realizes shrink_to_fit on std::vec is broken due to managed-unique
[05:21:30] <Eridius> and.. that's good?
[05:21:38] <Eridius> why would you not want to inline transmute?
[05:22:16] <strcat> Eridius: it's not a choice
[05:22:26] <strcat> Eridius: type_use (monomorphic collapse) causes invalid IR
[05:22:30] <strcat> resulting in inline not working
[05:22:42] <strcat> if it was implemented properly it would be fine
[05:23:05] <strcat> I want to replace it with LLVM's mergefunc, which is almost solid (being worked on upstream atm)
[05:23:16] <vk> Is there documentation on using the new rustdoc? I've added some doc comments to num.rs and don't know how to update the generated docs.
[05:23:46] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:23:48] *** Joins: yati (yati@FD13E7CB.48F02088.CA052C06.IP)
[05:24:16] <ww> another question about materializing generic type that has bugged me for a while.
[05:24:35] <ww> can the return type materialize the generic type parameter?
[05:24:39] <ww> see https://gist.github.com/williamw520/6710153
[05:25:11] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:25:16] <strcat> ww: I'm not sure what you mean, but that's not going to work
[05:25:32] <strcat> the signature needs to be correct
[05:25:35] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[05:25:41] <strcat> if it says Bar<T>, the caller chooses T
[05:25:54] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[05:25:54] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/BhAy9w
[05:25:54] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[05:26:04] <ww> yes, i'm hoping the callee can choose T too
[05:26:16] <strcat> it can't, it would make the signature incorrect
[05:26:22] <ww> because often time, the callee knows what type to return
[05:26:26] <strcat> the caller has to know what the type is from the signature
[05:26:30] <strcat> ww: return Bar<int> ?
[05:26:42] <nejucomo> I have the equivalent of: let mut thing = â€¦ ; thing.mutate(f(&thing.field)) ; // where f: fn (&T) -> K
[05:26:46] <ww> i've tried both syntax, they don't work
[05:26:48] <nejucomo> This leads to a borrow check error.
[05:26:51] <strcat> ww: it does
[05:27:10] <strcat> rusti: struct Foo<T> { x: T } fn foo() -> Foo<int> { Foo { x: 5 } }
[05:27:11] -rusti- ()
[05:27:14] <strcat> rusti: struct Foo<T> { x: T } fn foo() -> Foo<int> { Foo { x: 5 } } foo()
[05:27:15] -rusti- main::Foo<int>{x: 5}
[05:27:23] <nejucomo> Two questions: Why? -and how do I work around it?
[05:27:43] <strcat> nejucomo: host the part in mutate(...) outside of it
[05:27:48] <strcat> nejucomo: borrow checker isn't that smart yet
[05:27:52] <nejucomo> Ok.
[05:28:04] <strcat> it should be better, but it will never be perfect
[05:28:08] <nejucomo> So the answer to "why" is not "it's not possible" but rather "it's not implemented" ?
[05:28:33] <nejucomo> I couldn't tell if I had a conceptual problem or there's just a missing feature.
[05:28:43] <Boreeas> Question to those using Sublime Text: Is there a way to start a built rust program with arguments? The only solution I found so far is to write my own build system, but that appears to be a little overkill to do for every project.
[05:28:51] <strcat> nejucomo: yeah, you're correct that it should/could work
[05:28:57] <strcat> nejucomo: it's just less clever than you are :P
[05:29:03] <nejucomo> Ok.  Now off to work around...
[05:29:26] <nejucomo> strcat: The thing is, I often don't trust my cleverness with this region stuff.  It's still esoteric to me.
[05:29:40] <nejucomo> Sorry, I mean "lifetime".
[05:29:42] <nejucomo> ;-)
[05:29:46] <strcat> nejucomo: it actually used to work but stopped working when some holes were closed, but will work again one day
[05:30:19] <strcat> make a few clones of nmatsakis and it will go faster ;]
[05:30:21] *** Joins: mark_edward (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[05:30:37] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[05:30:46] <nejucomo> He implements the Copy trait?!
[05:30:54] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[05:30:54] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/UPSLDw
[05:30:54] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[05:30:57] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[05:30:57] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/9hObuQ
[05:30:57] <ghrust> 13rust/06auto 144cd3c5c 15blake2-ppc: std::result: Remove function `map_opt`...
[05:30:57] <ghrust> 13rust/06auto 145adfa10 15bors: auto merge of #9404 : blake2-ppc/rust/result-map-opt, r=cmr...
[05:30:57] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[05:30:57] <nejucomo> I thought he could only be moved.
[05:32:22] <nejucomo> Is the plan for the "standard" arithmetic operators to become the equivalent of: a.checked_sub(b).unwrap();  // ?
[05:32:23] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[05:32:31] <strcat> nejucomo: no
[05:32:39] <ww> strcat, fn foo() -> Foo<int> { Foo { x: 5 } } foo(), would hardcode the return type to Foo<int>, but I want to be flexible and let the return code to decide what type to return and leave the fn signature with Foo<T>
[05:32:47] <strcat> it is on the table but I can tell you that I have 99% certainty that it won't happen ;p
[05:33:32] <nejucomo> It's on the edge of the table.  So the standard operators will continue to be similar to C for the int types?
[05:33:37] <strcat> fwiw, using checked_mul twice in the vector push function is 2x as slow than two normal multiplications and one checked mul
[05:33:41] <ww> e.g. i pass in a parameter to new(dbtype: enum), it would create an OracleDB or MySQLDB type based on dbtype
[05:33:42] <strcat> nejucomo: they aren't similar to C
[05:33:46] <strcat> they are always defined as wrapping
[05:33:52] <strcat> C has undefined behaviour on signed int overflow
[05:34:08] <Eridius> wow, the `did you mean 'var'` suggestion was actually correct! Probably because the correct value was the only non-self variable in scope atm though
[05:34:08] <strcat> and there's no reason we can't have a big integer + a flexible integer type in libstd
[05:34:18] <nejucomo> Ahâ€¦ wellâ€¦ there's some of my C gaps poking through.
[05:34:31] <strcat> I don't really see the point of making it fail
[05:34:34] <strcat> it is still wrong
[05:34:43] <Eridius> strcat: I agree that failure on overflow/underflow is a bad idea
[05:34:46] <strcat> and will make rust slower than java for any task
[05:34:52] <strcat> we need a nice flexible int type
[05:34:58] *** Joins: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net)
[05:35:00] <strcat> start as a fixnum, expand to a bigint
[05:35:17] <strcat> and make that the most common type used by applications by *not defaulting to fixnums*
[05:35:33] <SiegeLord> How slow would that be?
[05:35:33] <strcat> rusti: let x = 5; /* compile error in my ideal world ;P */
[05:35:36] -rusti- <anon>:7:13: 7:14 warning: unused variable: `x` [-W unused-variable (default)]
[05:35:36] <nejucomo> How is that different than just bigint?  (-or enum I { Small(int), Big(bitint) }  )
[05:35:39] -rusti- <anon>:7          let x = 5; /* compile error in my ideal world ;P */
[05:35:41] -rusti-                       ^
[05:35:43] -rusti- ()
[05:35:48] <strcat> nejucomo: it would be exactly like your enum definition
[05:36:01] <strcat> would use the checked_foo methods and then expand to a bigint
[05:36:07] <Eridius> I love it when my test failure is due to the test itself being stupidly wrong :)
[05:36:12] <nejucomo> So if that enum definition is more efficient than bigint, why not just make bigint more efficient?
[05:36:29] <strcat> nejucomo: it is less efficient than bigint for large integers
[05:36:34] <strcat> it adds a branch to every operation
[05:36:44] <strcat> it is *often* more efficient than a big integer for small ones
[05:37:03] <strcat> you need to write BigInt to get it working, so why not expose both?
[05:37:11] <nejucomo> I guess my question is then: Why isn't bigint defined to be the equivalent of that enum?
[05:37:18] <strcat> nejucomo: adds a branch to every operation
[05:37:27] <nejucomo> ok.
[05:37:38] <strcat> if rust wants to fit C++'s niche, it has to embrace "pay for what you use"
[05:37:55] <strcat> doesn't mean it has to default to fixnums, it doesn't need a default
[05:38:17] <strcat> the developer knows best what they need, rust should let them choose
[05:38:30] <strcat> but not encourage fixnums even when they're wrong, like it does now
[05:38:43] <strcat> (that's my opinion at least :P)
[05:39:04] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[05:40:05] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[05:40:46] <nejucomo> Does this always require two words of storage?  enum T { a(u8), b(u8) } 
[05:40:58] <nejucomo> Is there a way to "pack" enums into single words for small variants?
[05:41:04] *** Quits: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net) (Quit: hoverbear)
[05:41:09] <strcat> it will require 2 bytes
[05:41:12] *** Quits: pcwalton (pcwalton@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: pcwalton)
[05:41:19] <nejucomo> Nice.
[05:41:22] <strcat> at the moment it requires 2 words due to the implementation being bad
[05:41:29] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[05:41:32] <strcat> but jld has a branch fixing it
[05:41:36] <nejucomo> Nice.
[05:41:39] <aatch> nejucomo, require != use
[05:42:08] <nejucomo> aatch: Good point.
[05:42:26] <nejucomo> Wellâ€¦  Off to sleep.
[05:42:30] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[05:43:12] *** Quits: jaen (jaen@moz-28AFBCCE.play-internet.pl) (Ping timeout)
[05:46:17] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[05:46:29] <strcat> Eridius: but yeah, everything gets simpler
[05:46:55] <strcat> indexing is cheaper (no header offset), shrink_to_fit is simpler (and better, can free on zero-length)
[05:49:20] <ChrisMorgan> cmr: whaddaya know... I'm just working with a 600 line TeX file and if I refresh the syntax highlighting in the wrong place, my math mode gets invertedâ€”I've got multi-line $...$ blocks. Same as your issue :-)
[05:49:38] *** Quits: sankha93 (Instantbir@CAF6D3FF.9C875DCD.9105FBCF.IP) (Ping timeout)
[05:51:08] <strcat> hm
[05:51:12] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[05:51:18] <strcat> jemalloc might actually free the ptr on realloc(ptr, 0)
[05:51:59] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: bye!)
[05:53:32] <SiegeLord> Isn't that the standard behavior?
[05:53:38] <SiegeLord> (for non-NULL ptr)
[05:54:56] <strcat> anyway no point of relying on it
[05:55:18] <strcat> have to distinguish between OOM and that
[05:55:45] <engla> SiegeLord: it's not consistent across implementations
[05:55:55] *** Quits: thewonderidiot1 (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[05:57:35] <SiegeLord> I guess you could read the C standard in a way that doesn't require that
[05:57:41] <SiegeLord> It's a very particular reading though...
[05:59:38] <Eridius> malloc() (and by extension realloc()) is allowed to return a non-NULL pointer for malloc(0)
[05:59:48] <Eridius> it's perfectly legal to return some special singleton value
[06:00:38] <SiegeLord> Sure, after free'ing the ptr though
[06:00:38] <Eridius> or, for example, to allocate the smallest bucket you can and return that even though 0 was requested (i.e. behave like you asked for 1)
[06:00:55] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[06:00:55] *** ChanServ sets mode: +o pnkfelix
[06:01:07] *** Joins: GeneralMaximus (ankur@60889107.85AE207.274D17D6.IP)
[06:01:12] <engla> "If the size of
[06:01:12] <engla> the space requested is zero, the behavior is implementation-defined: either a null pointer is returned, or the behavior is as if the size were some nonzero value, except that the
[06:01:15] <engla> returned pointer shall not be used to access an object.
[06:01:17] <SiegeLord> "The realloc function deallocates the old object pointed to by ptr and returns a pointer to a new object that has the size specified by size."
[06:01:21] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[06:02:04] <SiegeLord> Compare with: "The free function causes the space pointed to by ptr to be deallocated, that is, made available for further allocation."
[06:02:37] <SiegeLord> You have to use two different definitions for "deallocate" for realloc(ptr, 0) not to free ptr
[06:03:30] *** Quits: valenting (Thunderbir@C6866972.77435D89.FB866788.IP) (Ping timeout)
[06:04:25] *** Joins: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp)
[06:04:28] *** Quits: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[06:04:32] <Eridius> whee, 55% of my WindowsPath implementation is tests
[06:04:41] <Eridius> but once I fix these last few test failures, I think I'm done
[06:04:43] <engla> Eridius: I don't think a singleton value is valid, since it requires "each allocated object to be disjoint"
[06:04:45] <yati> Hi. Say I have a struct Point{ x: float, y: float} and I instantiate it like Point { x: 0f, y: 0f}, it all works, but shouldn't Point {x: 0, y: 0} also work? As in shouldn't the compiler figure out that `0` actually is `0.0`? I'm very new to the language, so might have missed some philosophy.
[06:04:49] *** Joins: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp)
[06:05:05] <Eridius> engla: I'd have to re-read the spec. I thought it was valid to return a singleton non-NULL value for the case of malloc(0), but I'm not 100% positive
[06:05:07] <SiegeLord> I can't wait for the legalese of the Rust spec 8)
[06:05:12] <Eridius> because I mean malloc(0) does _not_ return an allocated object
[06:05:15] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[06:05:19] <strcat> Eridius: it can
[06:05:27] <strcat> it's implementation defined
[06:05:29] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[06:05:31] *** Quits: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp) (Connection reset by peer)
[06:05:39] <strcat> jemalloc returns an allocated object on malloc(0)
[06:05:41] <strcat> iirc
[06:05:41] <Eridius> yati: 0 is an integral constant
[06:05:45] <Eridius> yati: try 0.0
[06:05:51] <Eridius> rusti: 0.
[06:05:52] -rusti- 0
[06:05:54] <Eridius> or that
[06:06:08] <strcat> I didn't make floats print properly because I think they are going to be removed
[06:06:13] <strcat> since they are always the same as f64
[06:06:13] <Eridius> strcat: ok sure, I mean it's not required to return an allocated object
[06:06:24] <engla> rusti: 0.f32
[06:06:25] -rusti- <anon>:7:9: 7:14 error: attempted access of field `f32` on type `<VI0>`, but no field with that name was found
[06:06:25] -rusti- <anon>:7          0.f32
[06:06:25] -rusti-                   ^~~~~
[06:06:25] -rusti- error: aborting due to previous error
[06:06:25] -rusti- application terminated with error code 101
[06:06:32] <Eridius> strcat: oh? why, there are no meaningful architectures where making float equal to f32 is useful?
[06:06:32] <engla> rusti: 0.0f32
[06:06:32] -rusti- 0f32
[06:06:47] <strcat> Eridius: it never makes sense to have a float type that's not a specified size
[06:06:52] <strcat> if you only need f32, use f32 everywhere
[06:07:07] <Eridius> strcat: meh. I use CGFloat in obj-c code all the time, which is a float on 32-bit platforms and a double on 64-bit
[06:07:41] <yati> Eridius, yeah 0.0 works, but I was thinking an implicit conversion would happen from 0 -> 0.0 when the compiler sees that a float is clearly expected where an int is passed
[06:07:50] <strcat> Eridius: in which case float should not be 64-bit on i686 Rust
[06:07:54] <strcat> it should be the native size
[06:07:58] <Eridius> yati: it could, but it doesn't, since 0 is considered an integral constant and therefore can only represent an integral type
[06:08:13] <yati> right
[06:08:31] <Eridius> yati: silent conversion between integral and floating values is typically a bad idea
[06:08:58] <strcat> 32-bit/64-bit are only native when you have SSE support
[06:09:03] <Eridius> rusti: 1234567890123456789.0f32
[06:09:04] -rusti- 1234567926202864048f32
[06:09:11] <strcat> which is assumed not to be there with the 32-bit baseline
[06:09:57] <Eridius> strcat: I don't know enough about floating point to know what the right answer is. I'm just saying there's a very popular platform right now that does use a floating-point type that changes size depending on architecture. So saying there's no point in doing so is ignoring the fact that it's being done a lot
[06:10:09] <strcat> but `float` doesn't depend on the architecture
[06:10:09] <Eridius> but again, I can't speak as to whether or not it's actually meaningful to do so
[06:10:17] <strcat> it's always 64-bit, whether or not that's the native float type
[06:10:33] <Eridius> strcat: in Rust? Yeah, I didn't know it did that. Why is it always 64-bit?
[06:10:36] <strcat> it is 64-bit on ARM, it is 64-bit on x86, it is 64-bit on MIPS
[06:10:37] <Eridius> I would have expected it to be architecture-dependent
[06:10:40] <strcat> Eridius: because it's defined that way
[06:10:54] <yati> Eridius, agreed
[06:10:55] <Eridius> if it's actually defined to be 64-bit, then there's no point in having that distinct from f64
[06:11:02] <strcat> anyway I don't see why you'd use 64-bit if you can get by with 32-bit
[06:11:16] <engla> I suppose float was meant to change to be native size
[06:11:18] *** Joins: sankha93 (Instantbir@CAF6D3FF.9C875DCD.9105FBCF.IP)
[06:11:19] <strcat> it will be faster even if it's being put in 64-bit registers
[06:11:35] <Eridius> my feeling is the point in having an architecture-dependent float is for when you don't care about precision beyond 32-bit, but would like to use the native float size when appropriate
[06:11:48] <strcat> i686 native size is 80-bit
[06:11:53] <Eridius> my assumption was always that float in rust was architecture-dependent. Do you know why it's defined to be 64-bit?
[06:12:25] <strcat> Eridius: because if 32-bit is enough, there's never a real architecture where f64 is faster afaik
[06:12:47] <strcat> and if it isn't enough, you use f64
[06:13:20] <Eridius> strcat: the point could be, to use 32-bit because it's enough precision, but use 64-bit on platforms where that's not slower, just in case the extra precision is useful?
[06:13:23] <Eridius> I dunno. I'm just speculating
[06:13:32] <strcat> doesn't make sense to me
[06:13:43] <strcat> if you need/want the precision, you use f64
[06:13:44] <Eridius> again, this all comes back to I have no idea why float would be defined to be 64-bit, as that makes it useless when we have f64 already
[06:13:46] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[06:13:51] <strcat> it doesn't make sense to produce different results on different archs
[06:13:53] <Eridius> strcat: ok, but what if you don't really care about precision?
[06:14:00] <strcat> Eridius: use f32, it's faster everywhere
[06:14:05] <Eridius> ok
[06:14:15] <strcat> arrays are half the size, double the data in cache
[06:14:32] <Eridius> woohoo tests all pass! \o/
[06:14:39] <strcat> SSE can do 4 float operations at a time
[06:14:43] <strcat> only 2 double operations
[06:14:44] <Eridius> just a few minor cleanups like renaming Path::new() to Path::from_vec() and implementing Equiv, and it'll be done!
[06:14:46] <SiegeLord> Maybe float should be f32 then?
[06:14:46] <ChrisMorgan> strcat: if that's the case, why have int and float in the first place? Just tell people to use (f(32|64)|i(8|16|32|64)) as appropriate?
[06:14:50] <Eridius> ..then I have to port all the existing path uses over
[06:14:58] <strcat> ChrisMorgan: int/uint exist for a very good reason
[06:15:01] <strcat> they are pointer size
[06:15:07] <strcat> perhaps they should be called intptr and uintptr
[06:15:13] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[06:15:14] <Eridius> strcat: that's annoyingly long though
[06:15:19] <strcat> to make it clear that they are not for application logic where you don't know bounds
[06:15:27] <strcat> Eridius: sure, and they are not for everyday usage
[06:15:37] <strcat> i32 is the same length as int
[06:15:38] <ChrisMorgan> So it's just float that ain't. Well then, sounds like there's no point in having float, just tell people to use f(32|64)?
[06:15:52] <strcat> ChrisMorgan: yes
[06:15:56] <strcat> that seems to be the consensus
[06:16:18] <strcat> int/uint exist because you need an integer that's pointer-sized
[06:16:33] <strcat> for sizes (uint) and pointer deltas (int)
[06:17:23] <Jesse> and array indexes
[06:17:25] <strcat> POSIX/C:
[06:17:33] <strcat> The following type designates a signed integer type with the property that any valid pointer to void can be converted to this type, then converted back to a pointer to void, and the result will compare equal to the original pointer: intptr_t
[06:17:33] <strcat> The following type designates an unsigned integer type with the property that any valid pointer to void can be converted to this type, then converted back to a pointer to void, and the result will compare equal to the original pointer: uintptr_t
[06:17:34] <strcat> Jesse: array indexes are sizes :)
[06:17:59] <strcat> but, it's fairly wrong to use them for an index where the maximum isn't bounded by the address space
[06:18:05] <strcat> like RandomAccessIterator does...
[06:18:32] <engla> RandomAccessIterator seems to not have found its role
[06:19:06] <strcat> because no one uses ringbufs ;p
[06:19:15] <strcat> if you want a slice of a ringbuf, you need it
[06:19:19] <strcat> it's not finished enough
[06:19:33] * strcat shrugs
[06:19:54] <strcat> widely used in D where it provides a rich set of functions
[06:20:04] <strcat> sort, binary search, etc.
[06:20:08] <Eridius> oh right damn, I need to impl the stat module too for path
[06:20:10] <engla> ok I'll check that out
[06:20:22] <strcat> engla: http://dlang.org/phobos/std_range.html
[06:20:52] <engla> so ringbuf would really benefit from an impl like your Smallvec
[06:24:38] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:28:10] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:30:59] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[06:31:44] <geomyidae> Has anyone considered maintaining a G+ community? Or is that something no one is interested in?
[06:32:11] <geomyidae> I really, really enjoy the G+ community and the news I get through it. A lot. It's even better than /r/golang. I think a rust one would be really cool.
[06:32:14] <pnkfelix> strcat: ping
[06:32:22] <strcat> pnkfelix: pong
[06:32:27] *** Joins: jaen (jaen@moz-74844A4F.neoplus.adsl.tpnet.pl)
[06:32:39] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[06:32:45] <pnkfelix> strcat: I'm traiging #2634, which is about user feedback on non-implicitly-copyable things
[06:32:52] <pnkfelix> *triaging
[06:33:20] *** Joins: bheylin_ (brianheyli@C709828D.E7BADBF1.B0C2132F.IP)
[06:33:26] <pnkfelix> strcat: and I'm trying to determine where these messages should come up at this point
[06:33:34] <pnkfelix> strcat: since e.g. we no longer have @fn
[06:33:42] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[06:33:49] <strcat> rusti: let x = &mut 5; let _y = x; let _z = x;
[06:33:50] -rusti- pastebinned 8 lines of output: http://sprunge.us/PPbM
[06:33:58] <strcat> hm
[06:34:09] <strcat> pnkfelix: we could close it
[06:34:30] <strcat> I interpreted it as being about providing an explanation for structs/enums
[06:34:33] <strcat> like
[06:34:53] <strcat> rusti: struct Foo; impl Drop for Foo; let x = Foo; let _y = x; let _z = x;
[06:34:54] -rusti- <anon>:7:26: 7:30 error: missing method `drop`
[06:34:54] -rusti- <anon>:7          struct Foo; impl Drop for Foo; let x = Foo; let _y = x; let _z = x;
[06:34:54] -rusti-                                    ^~~~
[06:34:54] -rusti- error: aborting due to previous error
[06:34:54] -rusti- application terminated with error code 101
[06:35:05] <strcat> rusti: struct Foo; impl Drop for Foo { fn drop(&mut self) {} } let x = Foo; let _y = x; let _z = x;
[06:35:06] -rusti- pastebinned 8 lines of output: http://sprunge.us/ceJh
[06:35:14] <strcat> it doesn't say *why* it is moved by default
[06:35:19] <strcat> but maybe making a new bug would be better.
[06:35:23] <pnkfelix> strcat: things like this, right: https://gist.github.com/pnkfelix/6710550
[06:35:43] <pnkfelix> strcat: (as prep for the bug I attempted to enumerate the cases where one gets non-implicitly copyable structs)
[06:36:09] <strcat> pnkfelix: yeah
[06:36:13] <strcat> pnkfelix: and &fn
[06:36:26] <pnkfelix> strcat: ah, let me add that
[06:38:12] <engla> it looks like  enum Void {}  is noncopyable as well
[06:38:27] <pnkfelix> strcat: interesting.  When I used a function call in my example, it used slightly different phrasing in the error message
[06:38:44] <strcat> engla: well, you can't ever have one :)
[06:39:09] <engla> well it would be crazy to copy a void I guess
[06:39:09] <strcat> does it actually make an enum non-copyable?
[06:39:13] <engla> yes
[06:39:17] <engla> rusti: enum Void {}; fn cpy(v: Void) -> (Void, Void) { (v, v) }; 1
[06:39:18] -rusti- pastebinned 8 lines of output: http://sprunge.us/HSNZ
[06:39:21] *** Quits: bheylin_ (brianheyli@C709828D.E7BADBF1.B0C2132F.IP) (Ping timeout)
[06:39:26] <strcat> I didn't mean that
[06:39:32] <strcat> hrm
[06:39:43] <engla> aha
[06:39:44] <strcat> rusti: enum Void {} let x: Option<Void> = None; x
[06:39:45] -rusti- None
[06:39:53] <strcat> rusti: enum Void {} let x: Option<Void> = None; let _y = x; let _z = x;
[06:39:54] -rusti- pastebinned 8 lines of output: http://sprunge.us/GRfT
[06:39:55] *** Quits: ChrisMorgan (chris@moz-59B93F6B.its.monash.edu.au) (Ping timeout)
[06:39:56] <strcat> huh
[06:39:58] <strcat> I guess it is
[06:40:01] <strcat> I don't understand why
[06:40:06] <strcat> seems like a bug
[06:41:32] <strcat> rusti: let float = 5;
[06:41:33] -rusti- <anon>:7:13: 7:18 warning: unused variable: `float` [-W unused-variable (default)]
[06:41:33] -rusti- <anon>:7          let float = 5;
[06:41:33] -rusti-                       ^~~~~
[06:41:33] -rusti- ()
[06:41:37] <strcat> hrm
[06:43:10] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[06:43:31] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[06:44:47] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Connection reset by peer)
[06:46:00] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[06:46:00] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/9hObuQ
[06:46:00] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[06:46:44] *** Quits: ww (Mibbit@moz-DFAED48A.lightspeed.sntcca.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:48:58] *** Joins: pcwalton (pcwalton@moz-481A040C.hsd1.ca.comcast.net)
[06:48:58] *** ChanServ sets mode: +ao pcwalton pcwalton
[06:49:23] *** Quits: pcwalton (pcwalton@moz-481A040C.hsd1.ca.comcast.net) (Input/output error)
[06:49:31] *** Quits: RMF (RMF@moz-A7EEA849.dsl.telepac.pt) (Ping timeout)
[06:50:11] *** Quits: sankha93 (Instantbir@CAF6D3FF.9C875DCD.9105FBCF.IP) (Quit: Gone to save the world!)
[06:50:58] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[06:50:58] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/JMKN6A
[06:50:58] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[06:51:05] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[06:51:05] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/dWCsLw
[06:51:05] <ghrust> 13rust/06auto 14e9dff1d 15Branimir:     fix for issue #9394...
[06:51:05] <ghrust> 13rust/06auto 146660233 15bors: auto merge of #9464 : bmaxa/rust/master, r=cmr...
[06:51:05] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[06:52:10] *** Joins: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net)
[06:52:30] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[06:54:09] *** Quits: gazoombo (uid6629@moz-E77DEB21.irccloud.com) (Ping timeout)
[06:54:44] *** Joins: gazoombo (uid6629@moz-E77DEB21.irccloud.com)
[06:54:48] *** Joins: maik (maik@moz-46093746.dip0.t-ipconnect.de)
[06:55:17] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[07:01:31] <strcat> rusti: printfln!("%3.3f\n", 5.5123211)
[07:01:31] -rusti- 5.512
[07:01:31] -rusti- ()
[07:01:44] *** Quits: a__ (a__@moz-4CC03B10.nycmny.fios.verizon.net) (Ping timeout)
[07:01:44] <strcat> rusti: println!("{3.3:f}\n", 5.5123211)
[07:01:45] -rusti- <anon>:7:18: 7:29 error: unterminated format string
[07:01:45] -rusti- <anon>:7          println!("{3.3:f}\n", 5.5123211)
[07:01:45] -rusti-                            ^~~~~~~~~~~
[07:01:45] -rusti- error: aborting due to previous error
[07:01:45] -rusti- application terminated with error code 101
[07:01:51] <strcat> rusti: println!("{.3:f}\n", 5.5123211)
[07:01:51] -rusti- <anon>:7:18: 7:28 error: unterminated format string
[07:01:51] -rusti- <anon>:7          println!("{.3:f}\n", 5.5123211)
[07:01:52] -rusti-                            ^~~~~~~~~~
[07:01:52] -rusti- error: aborting due to previous error
[07:01:53] -rusti- application terminated with error code 101
[07:01:57] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[07:02:19] <pnkfelix> strcat: do we no longer have any trait to represent types that are *implicitly* copyable?
[07:02:26] <strcat> pnkfelix: we never did
[07:02:30] <dbaupp> rusti: println!("{:3.3f}\n", 5.5123211)
[07:02:30] -rusti- 5.512
[07:02:31] -rusti- ()
[07:02:41] <strcat> pnkfelix: Copy included ~str/~[T: Copy]
[07:02:42] <dbaupp> rusti: println!("{foo:3.3f}\n", foo=5.5123211)
[07:02:43] -rusti- 5.512
[07:02:43] -rusti- ()
[07:02:48] <pnkfelix> strcat: oh I had assumed Copy had taken that role, but I guess one still had to use `copy` with that ?
[07:02:51] *** Joins: squiddy (squiddy@moz-FC727C13.adsl.alicedsl.de)
[07:02:59] <strcat> pnkfelix: once it was fixed, at least
[07:03:04] <dbaupp> strcat: before the : is for choosing which argument to print
[07:03:12] <strcat> pnkfelix: long ago, vectors/strings were implicitly copyable
[07:03:14] <strcat> dbaupp: ah
[07:03:42] *** Joins: a__ (a__@moz-4CC03B10.nycmny.fios.verizon.net)
[07:05:04] <pnkfelix> strcat: okay.  So when writing generic code, one has always had to write either `copy` or `.clone()` in cases like this:
[07:05:15] <pnkfelix> fn h<A>(a:A){ g(a); g(a); }
[07:05:18] <pnkfelix> is that right?
[07:05:37] <strcat> pnkfelix: you always needed a bound to copy them
[07:05:57] <pnkfelix> strcat: Right, so you've always needed to put *some* bound on the A
[07:06:04] <strcat> pnkfelix: originally, Copy did mean 'implicitly copyable' but that was when vectors/strings were implicitly copyable
[07:06:13] <pnkfelix> fn h<A:SomethingHere>(a:A) { g(a); g(a); }
[07:06:20] <strcat> pnkfelix: yeah
[07:06:25] <pnkfelix> okay, so at one time, the Copy bound allowed the above?
[07:06:32] <strcat> pnkfelix: yes
[07:06:45] <strcat> it was a bug, it made vectors/strings implicitly copyable even once they weren't
[07:06:51] <pnkfelix> okay.  but no longer.  (which I see no problem with.)
[07:06:56] <strcat> I don't think you need to worry about the history ;]
[07:07:00] <engla> it was like that just before summer pnkfelix 
[07:07:45] <pnkfelix> engla: I hadn't fully digested a number of these topics at that time
[07:08:26] <pnkfelix> strcat: I suppose what I meant was "at one time, the Copy bound *correctly* allowed the above."  Which it did, when vectors/strings were implicitly copyable
[07:08:40] <pnkfelix> strcat: which helps explain the way pcwalton's description is written
[07:08:45] <strcat> pnkfelix: ah :)
[07:08:47] <pnkfelix> strcat:  on that bug
[07:09:13] <strcat> rusti: format!("{:f}", 5.5f64)
[07:09:14] -rusti- error: internal compiler error: unexpected failure
[07:09:14] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[07:09:14] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[07:09:14] -rusti- ~"5.5"
[07:10:13] <strcat> well that's not good
[07:10:21] <strcat> rust no longer builds, again
[07:10:48] <strcat> in a clean chroot
[07:11:20] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[07:11:27] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[07:11:50] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[07:12:23] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[07:12:25] *** Quits: maik (maik@moz-46093746.dip0.t-ipconnect.de) (Ping timeout)
[07:12:59] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[07:13:22] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[07:14:17] <dbaupp> strcat: what's the problem/symptoms?
[07:14:29] <strcat> I told it to build again, will see if it reproduces
[07:14:32] <strcat> unable to link against rustrt
[07:14:50] <strcat> if it does reproduce... seems like another 0.8 blocker
[07:14:55] <strcat> funny how it was only working for a day
[07:15:10] <strcat> I think it only builds on my system because librustrt.so is in my library path
[07:15:24] <dbaupp> IIRC someone was complaining about an error like that a few hours ago
[07:16:59] <dbaupp> hm, maybe it's different: "compile: x86_64-unknown-linux-gnu/rt/stage0/linenoise/utf8.o make: *** No rule to make target `x86_64-unknown-linux-gnu/rt/stage0/arch/x86_64/_context.o', needed by `x86_64-unknown-linux-gnu/rt/stage0/librustrt.so'. Stop." https://botbot.me/mozilla/rust/msg/6362828/
[07:17:53] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[07:18:00] <strcat> dbaupp: I'll open a bug with the whole log if it happens again
[07:18:10] <strcat> it's going to build LLVM again though, will be a while
[07:19:01] <strcat> the reason for building packages in clean chroots is avoiding any contamination or missing deps, so it's possible it caught a real issue... also possible it was a makefile race 
[07:19:07] *** Quits: adu (ajr@moz-BF2B1AE4.washdc.fios.verizon.net) (Quit: adu)
[07:19:29] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[07:20:05] *** Quits: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net) (Quit: dbaupp)
[07:20:18] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:20:39] *** Joins: affixator (Mibbit@moz-A42CB5ED.ru)
[07:21:08] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[07:21:38] <pnkfelix> strcat: I suspect a lot of makefile races have crept in
[07:22:54] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[07:26:46] <Eridius> anyone know how Linux GUIs typically display files that have non-utf8 names?
[07:27:20] * Eridius wants to add a .display_name() func to his Path rewrite to provide a ~str that works for non-utf8 paths
[07:27:23] <engla> GLib has some kind of guessing process I think, guessing the encoding
[07:27:43] <Eridius> engla: I don't want to guess the encoding, I just want to know if there's any accepted way to represent files
[07:27:54] <Eridius> also, what if it's not a valid encoding at all?
[07:28:04] <engla> well that's what it does when it tries to produce a *display string* for a filename
[07:28:25] *** Joins: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net)
[07:28:51] *** Parts: Shaladdle (anonymous@moz-424BC304.hsd1.pa.comcast.net) ()
[07:29:23] *** Joins: adu (ajr@moz-BF2B1AE4.washdc.fios.verizon.net)
[07:29:38] <strcat> Eridius: afaik... glib assumes filenames are UTF-8 by default
[07:29:41] <strcat> https://developer.gnome.org/glib/2.36/glib-running.html
[07:30:05] <engla> I think GLib will produce a utf-8 decoding with replacement char in that case Eridius 
[07:30:09] <Eridius> ok well, do you have any suggestions for what to do? My Path.as_str() method returns Option<&str>
[07:30:12] *** Joins: schnozzle (Mibbit@moz-F3CA4A80.ks.ok.cox.net)
[07:30:16] <Eridius> engla: hrm, that's an idea
[07:30:40] *** Quits: wilkie (wilkie@moz-CEF5E490.pitbpa.fios.verizon.net) (Ping timeout)
[07:30:43] <engla> I have one file with a latin-1 name and it displays like that
[07:30:57] <engla> so it didn't actually guess!
[07:30:57] <Eridius> I don't suppose std::str has any pre-existing way to convert a &[u8] into a ~str that uses replacement chars?
[07:30:59] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[07:30:59] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 146660233 to 145adfa10: 02http://git.io/N3iJvQ
[07:30:59] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[07:31:00] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[07:31:00] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/pviTBg
[07:31:00] <ghrust> 13rust/06auto 14324418f 15Alex Crichton: Don't die in try_unsafe_borrow if tls isn't ready...
[07:31:00] <ghrust> 13rust/06auto 14a268a1c 15bors: auto merge of #9490 : alexcrichton/rust/issue-9487, r=cmr...
[07:31:00] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[07:31:08] <engla> Eridius: not yet, we've been working on that..
[07:31:11] <Eridius> darn
[07:31:22] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[07:31:33] * Eridius wishes he had his iterator-based encoding implementation right now
[07:31:37] *** Quits: affixator (Mibbit@moz-A42CB5ED.ru) (Quit: http://www.mibbit.com ajax IRC Client)
[07:31:40] <Eridius> getting an Iterator<char> using replacement chars would be nice
[07:31:46] <engla> I have an implementation like that
[07:31:58] <Eridius> although it used conditions to control whether it uses replacement chars, which isn't the fastest way to do this
[07:32:00] <engla> I could give it up
[07:32:03] <engla> .. for a price
[07:32:04] <engla> :)
[07:32:05] <Eridius> hah
[07:32:15] <Eridius> engla: I already have an implementation, it's just sitting in my private repo
[07:32:21] <Eridius> I can't very well include something like this just for path though
[07:32:34] *** Joins: sergi (textual@moz-DB55470C.upc-a.chello.nl)
[07:32:35] * Eridius hasn't had the time to deal with trying to benchmark it vs other encoding approaches
[07:33:00] <engla> I think the iterators really benefit from a static error selection
[07:33:05] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[07:33:39] <engla> well, the replacement char resolution does
[07:35:00] <Eridius> rusti: std::str::utf8_char_width(0xffu8)
[07:35:04] -rusti- 0u
[07:35:12] <Eridius> hrm, that error case should be documented
[07:35:36] *** Joins: sankha93 (Instantbir@CAF6D3FF.9C875DCD.9105FBCF.IP)
[07:35:58] <myname> huh
[07:36:15] <strcat> Eridius: or it should be made private
[07:36:16] <Eridius> I wonder if it's worth adding a UTF8DecodeIterator to std::str that processes a &[u8] and yields successive chars, using the replacement char, just for path?
[07:36:17] <engla> Eridius: it just returns 0 for invalid start bytes
[07:36:22] <strcat> why is that public?
[07:36:22] <Eridius> engla: well yeah
[07:36:30] <Eridius> strcat: because it's useful for anyone doing utf8 decoding manually?
[07:36:46] <strcat> Eridius: and why would they be doing that? ;p
[07:36:56] * strcat removed float
[07:36:57] <Eridius> exactly what I am? Which is decoding a &[u8] as utf-8 without failing?
[07:37:03] *** Quits: vk (chatzilla@moz-389FEE13.hsd1.ca.comcast.net) (Connection reset by peer)
[07:37:05] <myname> nobody wants to _work_ with utf8
[07:37:06] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[07:37:08] <engla> but we are going to add that API
[07:37:10] <strcat> Eridius: but you want that in the stdlib
[07:37:10] <Eridius> sadly, it's not #[inline]
[07:37:11] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[07:37:50] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[07:38:13] <Eridius> well I can't wait for a proper utf-8 decoder that uses replacement chars to land. I need something now, or I can't replace path
[07:38:32] * Eridius supposes he'll just use utf8_char_width to build a ~str manually, and will replace it when we eventually get better support
[07:38:55] <engla> Eridius: there are recommendations for how to insert replacement chars
[07:39:02] <Eridius> engla: what do you mean?
[07:39:32] * strcat is worried replacing the vector implementation will be incredibly hard...
[07:39:45] <engla> well there are multiple ways to deal with an invalid byte string, and the Unicode docs recommend a particular way to insert replacement chars if that's the error resolution
[07:40:06] <Eridius> engla: oh? It's more complicated than just replacing every bad byte?
[07:40:10] <engla> yes
[07:40:17] <engla> it's not overly complicated
[07:40:22] <engla> I'll show
[07:40:32] <Eridius> or I suppose if I had a sequence of <3-byte start><3-byte continue><invalid> then all 3 bytes should be replaced with a single replacement char
[07:41:04] <Eridius> though what if I have <3-byte start><invalid><3-byte end>? I suppose that should be a single replacement char too, but that's more complicated
[07:41:09] <Eridius> though not significantly so
[07:41:50] <engla> ok this isn't as easy to read as I thought
[07:41:51] <engla> https://gist.github.com/anonymous/a6ce015e7ae6cae20044
[07:42:36] <engla> <3-byte-start><0x41>  must not skip over the <0x41> byte, because it's a valid start byte. that's a requirement
[07:42:36] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[07:42:37] <Eridius> huh
[07:43:05] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[07:43:36] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[07:44:46] <strcat> bye float
[07:44:48] *** Quits: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP) (Quit: tikue_)
[07:44:53] <strcat> still need to deal with run-pass
[07:45:22] *** Quits: schnozzle (Mibbit@moz-F3CA4A80.ks.ok.cox.net) (Quit: http://www.mibbit.com ajax IRC Client)
[07:45:28] *** Joins: nkoep (nik@moz-F23F1945.pool.mediaways.net)
[07:45:39] <engla> 0xF0 0xC0 0x41 is two replacement chars and `A`, 0xF1 0x80 0x41 is one replacement char and `A`
[07:46:04] <engla> Eridius: now how much did you say you wanted to pay? ;-))
[07:47:15] <Eridius> engla: hah
[07:47:22] *** Quits: sruggier (sruggier@B3C08253.4562CF68.6BEEAEBD.IP) (Ping timeout)
[07:51:14] *** Joins: fabiand (fabiand@moz-3D3036FF.adsl.alicedsl.de)
[07:51:46] *** Quits: sergi (textual@moz-DB55470C.upc-a.chello.nl) (Quit: Computer has gone to sleep.)
[07:51:50] <engla> strcat: the hard part is bootstrapping I guess?
[07:52:01] <strcat> engla: nope, just changed everything to f64
[07:52:10] <strcat> float == f64, always, so it's easy ;p
[07:52:11] <engla> oh yeah that's great
[07:52:22] <engla> anyway, I was reading back and thinking of replacing vector
[07:52:33] <engla> that's what I meant
[07:52:40] <strcat> I'm not sure if the float thing should be brought up in a meeting
[07:52:49] <strcat> the RFC is 4 months old and no one has spoken in favour of keeping it
[07:53:25] <strcat> graydon was still on the fence
[07:53:40] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Connection reset by peer)
[07:53:44] * strcat shrugs
[07:55:37] <Eridius> I know that Equiv is mostly useful for containers so you can look up ~str keys using &str. Does it also make sense to use when two distinct values mean the same thing?
[07:55:45] <Eridius> i.e. windows paths \\?\C:\foo and C:\foo
[07:56:01] <strcat> Eridius: no
[07:56:07] <strcat> it's a hack for hash tables
[07:56:16] <strcat> maybe it should even be defined in std::hashmap
[07:56:18] <strcat> ;p
[07:56:19] <Eridius> darn, ok. So we have no good way of representing that, aside from bespoke functions
[07:56:31] <strcat> Eridius: to work for std::hashmap, the hash also has to be the same
[07:56:40] <Eridius> ah right
[07:57:11] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[07:57:15] <Eridius> although I haven't implemented IterBytes
[07:57:20] <Eridius> but maybe I should
[08:00:49] <engla> Eridius: as long as you meet the requirements for utf-8 decoding I guess you can implement it just fine and it can be fixed up later
[08:01:14] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[08:01:46] <Eridius> engla: It seems the simplest rule is: parse each sequence. If an invalid byte for the sequence is found, then: if the invalid byte is a valid sequence start, replace the previous sequence bytes. Else: replace the sequence bytes including the invalid byte
[08:02:06] <Eridius> which means <3-byte start><invalid><3-byte continue> would end up being 2 replacement chars
[08:02:20] <Eridius> engla: do you remember where the rules are actually written though?
[08:02:27] <engla> sure
[08:02:38] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[08:04:02] *** Quits: sankha93 (Instantbir@CAF6D3FF.9C875DCD.9105FBCF.IP) (Quit: Gone to save the world!)
[08:04:09] <engla> page 43 in the PDF for chap 3.9 here http://www.unicode.org/faq/utf_bom.html#utf8-1
[08:04:28] <Eridius> engla: oh good, that's the PDF I was just looking at
[08:04:32] <engla> well it says 96 on the page, but page 43 in the pdf reader
[08:04:47] *** Joins: sruggier (sruggier@B3C08253.4562CF68.6BEEAEBD.IP)
[08:06:36] <Eridius> although damn, I just realized all I have is utf8_char_width, which isn't enough to actually decode (obviously).
[08:06:46] * Eridius doesn't really relish re-implementing utf-8 decoding inside of path
[08:09:48] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:09:54] *** Quits: hansjorg (hansjorg@moz-41C5CE61.redpill-linpro.com) (Quit: Lost terminal)
[08:09:54] <strcat> rusti: 2a
[08:09:55] -rusti- <anon>:7:10: 7:11 error: expected one of `; }` but found `a`
[08:09:55] -rusti- <anon>:7          2a
[08:09:55] -rusti-                    ^
[08:09:55] -rusti- application terminated with error code 101
[08:09:57] <strcat> rusti: 2f
[08:09:59] -rusti- 2
[08:10:02] <strcat> hrm
[08:10:07] <strcat> rusti: 2fa
[08:10:07] -rusti- <anon>:7:11: 7:12 error: expected one of `; }` but found `a`
[08:10:07] -rusti- <anon>:7          2fa
[08:10:07] -rusti-                     ^
[08:10:08] -rusti- application terminated with error code 101
[08:10:09] <strcat> rusti: 2f2
[08:10:10] -rusti- pastebinned 7 lines of output: http://sprunge.us/ZTjF
[08:10:15] <engla> rusti: 2.0.noexist
[08:10:16] -rusti- <anon>:7:9: 7:20 error: attempted access of field `noexist` on type `<VF0>`, but no field with that name was found
[08:10:16] -rusti- <anon>:7          2.0.noexist
[08:10:16] -rusti-                   ^~~~~~~~~~~
[08:10:16] -rusti- error: aborting due to previous error
[08:10:16] -rusti- application terminated with error code 101
[08:10:31] <engla> ack, it didn't reveal the type
[08:10:40] <strcat> that is the type
[08:10:41] <strcat> it's generic
[08:10:46] <strcat> with a fallback to 'float'
[08:11:04] <engla> yeah ok
[08:11:21] <engla> I just wanted to see if you had a fresh rusti without float already ^^
[08:11:40] <strcat> I still need to make a PR ;p
[08:11:53] <strcat> I'm trying to find where the 'f' suffix is actually handled
[08:11:56] <Eridius> engla: since I don't see a relevant issue, I just filed https://github.com/mozilla/rust/issues/9516
[08:12:01] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[08:12:02] <strcat> I don't quite understand how it handles it
[08:12:25] <Eridius> strcat: in parse/lexer.rs func scan_number(), no?
[08:12:38] <engla> Eridius: ok, it's covered by the encoding work for sure
[08:12:44] <engla> Eridius: except not in iterator form
[08:12:49] <Eridius> engla: yeah but I needed an issue to reference in a FIXME
[08:12:51] <strcat> Eridius: yeah, I know where
[08:12:59] <strcat> but I don't quite understand the 'else' case
[08:13:02] <Eridius> engla: well, I don't want to allocate a ~str if I don't have to, although I dunno. Maybe I should
[08:13:09] <strcat> it checks if there's 'f'
[08:13:26] <strcat> and then if there's 32/64
[08:13:34] <Eridius> strcat: it checks if there's an 'f'. If it's not followed by 32/64, then it sets is_float and is_machine_float to true
[08:13:48] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[08:13:49] <strcat> Eridius: so am I just supposed to remove that branch?
[08:13:51] <Eridius> is_machine_float means it's just the f suffix. By the naming, this would indicate that it's expecting it to be an architecture-dependent floating-point size
[08:13:51] <strcat> I'm removing 'f'
[08:13:55] <Eridius> strcat: yes. And is_machine_float
[08:14:13] <engla> so what does 1.0 default to?
[08:14:19] <strcat> engla: generic
[08:14:21] <strcat> or else 'float'
[08:14:22] <Eridius> engla: LIT_FLOAT_UNSUFFIXED
[08:14:30] <strcat> I won't make a default
[08:14:57] <Eridius> 1.0 will be generic. 1.0f will be invalid. 1.0f32 and 1.0f64 will be valid.
[08:15:04] <engla> so  range(1., 10.) will need to pick up the type from somewhere
[08:15:05] <Eridius> so 1.0 is the floating-point equivalent of the generic integral 1
[08:15:17] <engla> rusti: range(1., 10.)
[08:15:17] -rusti- std::iter::Range<float>{state: 1, stop: 10, one: 1}
[08:15:25] <Eridius> I know generic integrals go to int if they can't decide. What will we do for floats?
[08:15:32] <Eridius> yelling at the user for typing range(1.0, 10.0) is kinda crappy
[08:15:37] <engla> Eridius: that was what I was trying to ask
[08:15:43] <strcat> Eridius: well what *do* they want?
[08:15:45] <Eridius> I'm inclined to say it should pick f64
[08:15:55] <strcat> Eridius: why not an arbitrary precision decimal, when we have them?
[08:15:58] <Eridius> the user should have to opt in to loewr precision
[08:16:03] <Eridius> *lower, even
[08:16:11] <Eridius> strcat: Because that would be a surprising performance hit?
[08:16:12] *** Joins: sergi (textual@E0F7E15F.F9DEA6D6.FB6F0902.IP)
[08:16:13] <jensnockert> Are we removing float?
[08:16:28] <strcat> jensnockert: seems to be the consensus on that RFC, so I am
[08:16:34] <jensnockert> Awesome.
[08:16:38] <Eridius> strcat: also, aren't there values that can be represented explicitly in floating-point but not in arbitrary-precision decimal?
[08:16:50] <strcat> Eridius: no
[08:16:53] <strcat> well
[08:17:02] <strcat> 2 is a factor of 10, so no - right?
[08:17:07] <jensnockert> Depends on the implementation.
[08:17:16] <Eridius> strcat: never been really sure. Binary floating-point stuff makes my brain hurt ;)
[08:17:40] <jensnockert> But all normals and denormals should be representable.
[08:17:42] <Eridius> strcat: it's plausible that there isn't any of that for base 2, but I'm not sure
[08:17:55] <strcat> Eridius: eventually int/float literals will be generic
[08:17:59] <strcat> as in, extensible
[08:18:08] <strcat> so they will be stored as strings
[08:18:13] *** Joins: hansjorg (hansjorg@moz-41C5CE61.redpill-linpro.com)
[08:18:23] <strcat> well
[08:18:28] <jensnockert> Yeah, strcat, that would be awesome. ObjC supports that, and it is boss.
[08:18:29] <strcat> you could store ints as bigints
[08:18:33] <strcat> so does haskell
[08:19:15] <strcat> Eridius: so, I think defaulting to fixed-size ints might be wrong - but reals are *always* screwed up
[08:19:18] <strcat> so I dunno
[08:19:38] <Eridius> jensnockert: Obj-C does not support generic int/float literals. What are you talking about?
[08:19:42] *** Quits: juhp (Mibbit@moz-40F11E8A.cidr.odn.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[08:19:48] <jensnockert> Eridius: It does.
[08:19:54] <dbaupp> Eridius: all numbers with finite base-2 representations (floating points are a subset) have finite base-10 representations
[08:19:57] <Eridius> jensnockert: as a Cocoa programmer for a decade, no it doesn't
[08:19:59] <jensnockert> Eridius: You can pass a compiler option.
[08:20:05] <Eridius> It has NSNumber, which represents one of a set of specific fixed-size numeric types
[08:20:11] <Eridius> and it has NSDecimalNumber, which is bigint
[08:20:16] <Eridius> but neither are generic integer literals
[08:20:29] <Eridius> jensnockert: I think you're referring to the ability to tell the compiler what class to use instead of NSNumber for @-literals
[08:20:32] <Eridius> which isn't the same thing
[08:20:42] <Eridius> dbaupp: ok that helps my brain not hurt, thanks
[08:21:04] <strcat> anyway, feel free to voice support/opposition at https://github.com/mozilla/rust/issues/6592
[08:21:24] <strcat> (no cookies if you're against it though)
[08:21:38] <strcat> not many people comment on RFCs ;s
[08:22:25] <dbaupp> maybe we need to be more forceful and have DFCs
[08:22:55] <jensnockert> DFC already means something else.
[08:23:03] <dbaupp> (demand for comment :P )
[08:23:05] <jensnockert> Which we probably don't want to get invovled with.
[08:23:37] <Eridius> strcat: one problem is it's hard to watch all the incoming issues. I only check the issue list occasionally
[08:23:53] <Eridius> it would be nice to have some sort of regular mailing list post with the active RFCs that need further discussion, to encourage people to participate
[08:23:54] <strcat> I'll leave the fallback to f64
[08:23:55] <strcat> for now
[08:24:28] <strcat>  39 files changed, 159 insertions(+), 1700 deletions(-)
[08:24:45] <dbaupp> why is there so much stuff for handling float o_O
[08:24:58] <strcat> dbaupp: std::float
[08:24:59] <jensnockert> Because it is a shit type?
[08:25:03] <strcat> lol
[08:25:08] <dbaupp> Eridius: there's https://github.com/mozilla/rust/issues?labels=B-RFC&page=1&state=open
[08:25:12] <jensnockert> Which just delegates _everything_ to f64.
[08:25:14] <strcat> +            fatal_span(rdr, start_bpos, rdr.last_pos, ~"expected `f32` or `f64`");
[08:25:16] <dbaupp> strcat: ah
[08:25:19] <strcat> I hope my error works..
[08:25:20] <engla> I have nothing to say on the RFC. just go for it
[08:26:01] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:26:08] <Eridius> dbaupp: yeah, but checking that regularly is annoying
[08:26:14] * Eridius wouldn't mind an RSS feed for it, but doesn't see one
[08:26:53] <dbaupp> Eridius: yup
[08:27:29] <Eridius> speaking of RFCs, I'd really like to see some sort of decision about raw string literals, so I can go ahead and implement them.
[08:27:31] <strcat> /home/strcat/projects/rust/src/libstd/num/num.rs:592:42: 592:45 error: expected `f32` or `f64`
[08:27:33] <strcat> /home/strcat/projects/rust/src/libstd/num/num.rs:592             assert_eq!(_20, NumCast::from(20f));
[08:27:35] <strcat> well
[08:27:47] <strcat> I'm unhappy that compilation failed.... but my error works ;p
[08:27:54] <strcat> (it has a proper span even!)
[08:27:56] <Eridius> woo
[08:28:56] <Eridius> hrm, is it legit to say `fn foo<S: Str>(&self, f: &fn(s: S))`?
[08:28:59] <jensnockert> I wish LLVM gave proper spansâ€¦ `invalid redefinition of function 'llvm_memcpy64'` and I have no idea what it means /o\
[08:29:00] <Eridius> or will that fail in mysterious ways?
[08:29:07] <jensnockert> I am not redefining it /o\
[08:29:09] *** Joins: sankha93 (Instantbir@CAF6D3FF.9C875DCD.9105FBCF.IP)
[08:29:20] <strcat> removing features is fun
[08:29:26] <strcat> changing features, now that's hard.
[08:29:52] <Eridius> rusti: use std::str::Str; fn foo<S: Str, T>(f: &fn(s: S) -> T) -> T { let s = ~"test"; f(s) } foo(|s| s.into_owned())
[08:29:53] -rusti- pastebinned 7 lines of output: http://sprunge.us/KGhA
[08:30:14] * strcat is glad rustdoc doesn't use pandoc
[08:30:18] <Eridius> rusti: fn foo<T>(f: &fn(s: &str) -> T) -> T { f("test") } foo(|s| s.to_owned())
[08:30:18] -rusti- ~"test"
[08:30:28] <strcat> I don't have to ever think about packaging it again!
[08:30:30] <Eridius> yeah, the need to constrain the closure is problematic
[08:30:47] <strcat> ugh, closures
[08:30:55] <strcat> rust's weakest feature :(
[08:31:07] <Eridius> which is unfortunate because if I allocate a string, and then provide it as a &str, and the caller wants to convert it to a ~str they're going to have to unnecessarily copy it
[08:31:25] <Eridius> I suppose I could have a .to_display_str() for when they know they want a ~str
[08:31:42] <strcat> aw
[08:31:45] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[08:31:51] *** Joins: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se)
[08:31:53] <strcat> my vector reimplementation is only 6.5x faster now
[08:31:58] <strcat> because I sped up the normal vectors :s
[08:32:04] <dbaupp> haha
[08:32:14] <Eridius> lol
[08:32:51] <engla> this is where you use an intern to slow down vec so that your case for replacing it gets stronger
[08:33:15] <dbaupp> have all the rust summer interns left yet?
[08:33:32] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[08:33:33] * dbaupp submits a PR that sneaks in a sleep(10) into vec.push
[08:34:06] * jensnockert hugs dbaupp.
[08:34:20] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:34:22] <strcat> I'll remove type_use soon too
[08:34:26] <strcat> that'll be a bunch of bugs fixed
[08:34:28] *** Joins: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[08:34:59] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[08:34:59] <Eridius> what is type_use?
[08:35:02] <strcat> it'd be nice if my still failing mergefunc test case wasn't 260k lines of IR, but bugpoint is broken on it
[08:35:09] <engla> your internal linkage change strcat, looks like it had a big effect on the test runner on mac.. but why only there?
[08:35:13] <strcat> Eridius: it tries to merge identical generics
[08:35:31] <Eridius> strcat: and is merging identical generics not a good thing?
[08:35:33] <strcat> engla: it makes all functions internal except main when building a binary
[08:35:38] <Eridius> or is this what you were talking about, LLVM should do it for us?
[08:35:47] <strcat> engla: all functions (even private ones) are still external in a library
[08:35:58] <engla> strcat: but the big speedup is only on mac. on irfy
[08:36:00] <strcat> Eridius: type_use is broken and causes a bunch of bugs
[08:36:06] <strcat> + makes undefined IR and causes inline to not work
[08:36:13] <strcat> and it never works if there are type bounds
[08:36:21] <strcat> and LLVM's mergefunc pass will merge all functions will identical IR
[08:36:25] <strcat> it's much better.
[08:36:44] <strcat> with identical IR*
[08:37:15] <dbaupp> engla: it looks like there's a speed up on linux-32, but it's disguised by some noise
[08:38:34] <Eridius> rusti: let xs = [1,2,3]; let mut it = xs.iter(); println!("{}", *it.idx(1)); println!("{}", *it.next()); println!("{}", *it.idx(1));
[08:38:35] -rusti- pastebinned 37 lines of output: http://sprunge.us/CBHh
[08:38:44] <engla> only bsd has no change
[08:38:47] <Eridius> rusti: let xs = [1i,2,3]; let mut it = xs.iter(); println!("{}", *it.idx(1)); println!("{}", *it.next()); println!("{}", *it.idx(1));
[08:38:48] -rusti- pastebinned 37 lines of output: http://sprunge.us/DBTF
[08:38:58] <Eridius> oh durr
[08:39:12] <Eridius> rusti: let xs = [1i,2,3]; let mut it = xs.iter(); println!("{}", *it.idx(1).unwrap()); println!("{}", *it.next().unwrap()); println!("{}", *it.idx(1).unwrap());
[08:39:13] -rusti- 2
[08:39:13] -rusti- 1
[08:39:13] -rusti- 3
[08:39:13] -rusti- ()
[08:39:18] <Eridius> ok good, that's what I thought
[08:39:33] <strcat> engla: it speeds up stuff written from scratch significantly
[08:39:34] <Eridius> rusti: let x = "foo"; x.byte_iter().idx(1)
[08:39:35] -rusti- Some(111u8)
[08:39:52] <strcat> engla: if you do it entirely in what rust considers a non-library
[08:40:03] <strcat> because it makes deadargelim/argpromotion kick in
[08:40:04] <engla> strcat: I'll test it now, finished my compile
[08:40:15] <engla> the effect looks to be much bigger on the mac test runner than on linux-64
[08:40:38] <jensnockert> Hmâ€¦ I wonder if IR and intrinsics interact in a bad way(tm)
[08:40:41] <strcat> engla: generics are already all marked internal since they get duplicated per crate though
[08:41:04] <engla> no.. unresolved import: found `ByteIterator` in `std::rt::io::extensions` but it is private
[08:41:10] <engla> here come all the forgotten "pub" bugs
[08:41:28] <strcat> engla: by internal I mean at an LLVM level
[08:41:55] <engla> yes
[08:42:17] <dbaupp> jensnockert: btw, I was thinking about defining things in std: it means that #[no_std] will be much less useful, since you don't get things like + on primitives automatically (am I understanding this correctly?)
[08:42:50] <jensnockert> dbaupp: Yes, that is correct.
[08:42:56] <jensnockert> And that is part of the point.
[08:43:24] <jensnockert> Someone might for example want SafeRust(tm) where overflow throws an error.
[08:43:56] <strcat> pfft, "safe" ;p
[08:43:57] <jensnockert> Or SpeedRust(tm) where floating point semantics are relaxed.
[08:44:19] <dbaupp> ah, that's pretty neat. (Although it means we'll need a zero.rs again for #[no_std] to be usable)
[08:44:53] * strcat would call it FailRust
[08:45:11] <Eridius> rusti: let s = "foo"; s.byte_iter().indexible9)
[08:45:12] -rusti- <anon>:7:48: 7:49 error: incorrect close delimiter: `)`
[08:45:12] -rusti- <anon>:7          let s = "foo"; s.byte_iter().indexible9)
[08:45:12] -rusti-                                                          ^
[08:45:12] -rusti- application terminated with error code 101
[08:45:13] <Eridius> cripes
[08:45:24] <Eridius> rusti: let s = "foo"; s.byte_iter().indexable()
[08:45:25] -rusti- 3u
[08:46:35] *** Joins: wilkie (wilkie@moz-A19F104D.pitbpa.fios.verizon.net)
[08:46:54] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[08:48:10] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[08:48:27] <jensnockert> dbaupp: I would prefer to ressurect libcore, with just stand-alone functions that implement the very, very basic stuff.
[08:48:38] <jensnockert> But I don't think that would be easy :(
[08:48:39] *** Joins: skade (skade@moz-DA43A266.hsi.kabel-badenwuerttemberg.de)
[08:49:09] <engla> don't you think there would be interest in putting *everything* that's rt-independent into libcore
[08:49:22] <jensnockert> Yeah, something like that.
[08:50:30] *** Joins: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP)
[08:51:04] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[08:51:04] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/UDxQCA
[08:51:04] <ghrust> 13rust/06auto 14f2222ae 15Alex Crichton: Ensure that skipped items aren't encoded...
[08:51:04] <ghrust> 13rust/06auto 14c751891 15bors: auto merge of #9484 : alexcrichton/rust/fix-cfg-inner-item, r=pcwalton...
[08:51:04] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[08:51:15] *** Quits: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com) (Connection reset by peer)
[08:52:28] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[08:53:18] <jensnockert> I never noticed before, but we're pushing almost all code onto #[fixed_stack_segment] since all intrinsic calls need that :S
[08:54:10] <strcat> jensnockert: the stdlib is very bad in general
[08:54:31] <strcat> vectors are slow, we have no dead store elimination due to how exchange_malloc/free are done, etc.
[08:54:31] <jensnockert> We should have a stdlib cleanup hackathon.
[08:55:03] <Eridius> ugh, trying to implement a quick-n-dirty utf-8 decoder that uses U+FFFD instead of failing is probably a really bad idea, as I don't really feel like writing a comprehensive test suite just for this
[08:55:04] <strcat> jensnockert: are all intrinsics really fixed-stack-segment?
[08:55:07] <strcat> or just some wrappers
[08:55:08] <Eridius> I really wish I had one already
[08:55:12] <jensnockert> strcat: All of them.
[08:55:20] <jensnockert> strcat: Some of the wrappers are not.
[08:55:22] <dbaupp> strcat: aren't exchange_malloc/free literally just calling malloc/free: can't we just put the lang-item on the extern fn declaration?
[08:55:24] <strcat> jensnockert: oh, so basically every function is fixed-stack-segment
[08:55:33] <jensnockert> strcat: Yeah.
[08:55:44] <strcat> dbaupp: they are inline(never) and our malloc/free definitions don't match LLVM's definition of them
[08:55:53] *** Joins: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com)
[08:55:59] <dbaupp> strcat: eurgh, why inline(never)??
[08:56:01] <strcat> inline(never) == no dead store elimination
[08:56:04] <strcat> dbaupp: fixed-stack-segment
[08:56:08] <strcat> yay segmented stacks?
[08:56:08] * dbaupp sighs
[08:56:44] <strcat> libstd is not incredibly useful until that stuff is fixed
[08:56:46] <strcat> too slow
[08:56:55] <strcat> makes rust as a language look bad
[08:56:59] <jensnockert> LLVM y u no document constantness /o\
[08:58:04] *** Joins: gretchen (Mibbit@C1075A32.21D9FE35.31DD7DE9.IP)
[08:58:22] <strcat> dbaupp: runtimeless rust is so much better ;p
[08:59:15] <strcat> dbaupp: http://ix.io/8fH example
[08:59:21] <strcat> dead store elimination removes the ~5 allocation
[08:59:58] <dbaupp> strcat: nice
[09:00:04] <Eridius> rusti: (~"foo").clone()
[09:00:05] -rusti- ~"foo"
[09:00:22] <strcat> define i64 @main(i64, i8** nocapture readnone) #0 {
[09:00:24] <strcat> top:
[09:00:26] <strcat>   ret i64 0
[09:00:28] <strcat> }
[09:00:30] <strcat> ;p
[09:01:06] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[09:01:06] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14c751891 to 14a268a1c: 02http://git.io/N3iJvQ
[09:01:06] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[09:01:07] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[09:01:07] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/FXXoUw
[09:01:07] <ghrust> 13rust/06auto 147e80981 15Felix S. Klock II: #7752: use fcnptr for glob errfunc.
[09:01:07] <ghrust> 13rust/06auto 1448b4b1f 15Felix S. Klock II: errfunc ptr is nullable, so use Option as part of interface to glob (#7752).
[09:01:08] <ghrust> 13rust/06auto 14eff1740 15bors: auto merge of #9497 : pnkfelix/rust/fsk-7752-use-fcnptr-for-glob-errfunc, r=cmr...
[09:01:10] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[09:07:46] *** Joins: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP)
[09:07:48] *** flaper87|afk is now known as flaper87
[09:09:40] *** Joins: RMF (RMF@4EAA63AE.44ED0B2A.7CFB50F9.IP)
[09:10:08] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[09:10:28] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:12:09] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:12:09] *** Quits: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru) (Connection reset by peer)
[09:12:26] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (Ping timeout)
[09:12:26] *** Quits: kimundi (kimundi@moz-822AC7D.dip0.t-ipconnect.de) (Ping timeout)
[09:12:26] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (Ping timeout)
[09:12:26] *** Quits: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP) (Ping timeout)
[09:12:29] *** Joins: zz_kimundi (kimundi@moz-822AC7D.dip0.t-ipconnect.de)
[09:12:33] <Jesse> strcat: but that changes the behavior of the program if you're out of memory!
[09:12:34] *** Quits: benh (ben@moz-4A0366D2.org) (Ping timeout)
[09:12:34] *** Quits: StarLight (StarLight@moz-BD8682CE.dynamic.avangarddsl.ru) (Ping timeout)
[09:12:36] *** Joins: StarLight (StarLight@moz-BD8682CE.dynamic.avangarddsl.ru)
[09:12:38] *** Joins: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP)
[09:12:42] *** Quits: PGGB (PGGB@BD9E64E0.2702580D.85889BB1.IP) (Ping timeout)
[09:12:42] *** Quits: Boreeas (Boreeas@moz-F35C832D.boreeas.net) (Ping timeout)
[09:12:42] *** Quits: zheng_li (zheng_li@moz-D6711E9E.xenplanet.org) (Ping timeout)
[09:12:44] *** Quits: dju (dju@moz-83BD5EC.dmz.me) (Ping timeout)
[09:12:44] *** Quits: indutny (indutny@moz-49D42D15.c.ircrelay.com) (Ping timeout)
[09:12:44] *** Quits: indirect (indirect@moz-49D42D15.c.ircrelay.com) (Ping timeout)
[09:12:44] *** Quits: jorendorff_away (jorendorff@moz-C5535E6C.compute-1.amazonaws.com) (Ping timeout)
[09:12:44] *** Quits: andrew-d (andrew-d@6C6C9B53.23518FA3.CE794808.IP) (Ping timeout)
[09:12:47] *** Joins: zheng_li (zheng_li@moz-D6711E9E.xenplanet.org)
[09:12:47] *** Quits: wilkie (wilkie@moz-A19F104D.pitbpa.fios.verizon.net) (Ping timeout)
[09:12:57] *** Quits: SimonSapin (simon@moz-9A1FE870.exyr.org) (Ping timeout)
[09:12:58] *** zz_kimundi is now known as kimundi
[09:12:58] *** Quits: jzelinskie (ubuntu@moz-C69D33B5.compute-1.amazonaws.com) (Ping timeout)
[09:13:00] <strcat> Jesse: so does eliminating unused variables
[09:13:02] *** Quits: zootm (calum@moz-DCC1F9C3.sgyl.cable.virginmedia.com) (Ping timeout)
[09:13:04] *** Joins: dju (dju@moz-83BD5EC.dmz.me)
[09:13:06] <strcat> or sibling call optimization
[09:13:08] <strcat> ;p
[09:13:10] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Ping timeout)
[09:13:13] <strcat> or really any optimization
[09:13:15] *** Quits: Zuchto (chat@moz-1FF744E2.members.linode.com) (Ping timeout)
[09:13:18] *** Quits: ofeldt (ofeldt@moz-2C983C49.dip0.t-ipconnect.de) (Ping timeout)
[09:13:18] *** Quits: jaen (jaen@moz-74844A4F.neoplus.adsl.tpnet.pl) (Ping timeout)
[09:13:33] <Jesse> true
[09:13:34] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[09:13:36] *** Quits: Deewiant (deewiant@moz-C015B7F8.iki.fi) (Ping timeout)
[09:13:40] <jensnockert> SAFERUST(TM) - Now without optimizations.
[09:13:45] *** Joins: jzelinskie (ubuntu@moz-C69D33B5.compute-1.amazonaws.com)
[09:13:58] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[09:14:07] *** Quits: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net) (Ping timeout)
[09:14:09] *** Joins: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru)
[09:14:12] *** Joins: SimonSapin (simon@moz-9A1FE870.exyr.org)
[09:14:23] *** Quits: wilfred (uid159@moz-5F4AA75A.irccloud.com) (Ping timeout)
[09:14:23] *** Quits: gazoombo (uid6629@moz-E77DEB21.irccloud.com) (Ping timeout)
[09:14:23] *** Quits: ggherdov_ (uid11402@moz-E77DEB21.irccloud.com) (Ping timeout)
[09:14:24] *** Quits: sawrubh (uid6719@moz-5F4AA75A.irccloud.com) (Ping timeout)
[09:14:24] *** Quits: dcolish (dcolish@1DB472A5.BE69FB10.416A0103.IP) (Ping timeout)
[09:14:24] *** Quits: geomyidae__ (uid214@moz-E77DEB21.irccloud.com) (Ping timeout)
[09:14:30] *** Quits: gretchen (Mibbit@C1075A32.21D9FE35.31DD7DE9.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:14:38] *** Quits: Siyo (Siyo@A89938F4.87DAA49F.F113998C.IP) (Ping timeout)
[09:14:40] *** Joins: Boreeas (Boreeas@moz-F35C832D.boreeas.net)
[09:14:43] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[09:14:43] *** Joins: Zuchto (chat@moz-1FF744E2.members.linode.com)
[09:14:45] *** Joins: zootm (calum@moz-DCC1F9C3.sgyl.cable.virginmedia.com)
[09:14:46] *** Joins: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org)
[09:14:47] <strcat> irc!  ;p
[09:14:47] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Ping timeout)
[09:15:09] *** Joins: benh (ben@moz-4A0366D2.org)
[09:15:09] *** Joins: ofeldt (ofeldt@moz-2C983C49.dip0.t-ipconnect.de)
[09:15:21] *** Quits: Tad (Tom@moz-C8B2B6F7.navalrp.co.uk) (Ping timeout)
[09:15:22] *** Joins: Deewiant (deewiant@moz-C015B7F8.iki.fi)
[09:15:23] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (Ping timeout)
[09:15:23] *** Quits: nathan7 (nathan@86F860FE.3CD03790.F113998C.IP) (Ping timeout)
[09:15:25] *** Quits: Seldaek (seld@moz-5DEA7688.ch) (Ping timeout)
[09:15:35] *** Quits: k4nar (quassel@moz-F5EFF779.kimsufi.com) (Ping timeout)
[09:15:38] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[09:15:39] *** Joins: k4nar (quassel@moz-F5EFF779.kimsufi.com)
[09:15:40] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[09:15:40] *** Joins: PGGB (PGGB@BD9E64E0.2702580D.85889BB1.IP)
[09:15:46] *** Joins: indirect (indirect@moz-49D42D15.c.ircrelay.com)
[09:15:55] *** Joins: jaen (jaen@moz-74844A4F.neoplus.adsl.tpnet.pl)
[09:16:06] *** Quits: glandium (glandium@moz-A09032B1.kimsufi.com) (Ping timeout)
[09:16:07] *** Joins: andrew-d (andrew-d@6C6C9B53.23518FA3.CE794808.IP)
[09:16:16] *** Joins: jorendorff_away (jorendorff@moz-C5535E6C.compute-1.amazonaws.com)
[09:16:24] *** Joins: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net)
[09:16:39] *** Joins: dcolish (dcolish@1DB472A5.BE69FB10.416A0103.IP)
[09:16:47] *** Joins: Seldaek (seld@moz-5DEA7688.ch)
[09:16:48] *** Joins: nathan7 (nathan@moz-60FC7746.nathan7.eu)
[09:16:54] *** Joins: indutny (indutny@moz-49D42D15.c.ircrelay.com)
[09:17:06] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[09:17:09] *** Joins: kaeso (kaeso@moz-F21FF626.unstable.it)
[09:17:21] *** Joins: Tad (Tom@moz-C8B2B6F7.navalrp.co.uk)
[09:17:59] *** Quits: sp3d (a@6361F3B1.19CD1E54.8354FB35.IP) (Ping timeout)
[09:18:22] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[09:19:03] *** Joins: Siyo (Siyo@A89938F4.87DAA49F.F113998C.IP)
[09:19:46] <flaper87> mmhh, I need to understand better this whole "not transfering ownership makes the scheduler drop the task" thing
[09:19:53] * flaper87 was thinking outloud
[09:19:56] *** Joins: wilkie (wilkie@moz-A19F104D.pitbpa.fios.verizon.net)
[09:20:21] *** Quits: sankha93 (Instantbir@CAF6D3FF.9C875DCD.9105FBCF.IP) (Ping timeout)
[09:21:31] *** Quits: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue_)
[09:22:36] *** Joins: glandium (glandium@moz-A09032B1.kimsufi.com)
[09:25:43] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[09:26:53] *** Joins: sk (sk@D904A3B4.50B2D8C.78DD174B.IP)
[09:27:17] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[09:31:33] *** Quits: adu (ajr@moz-BF2B1AE4.washdc.fios.verizon.net) (Quit: adu)
[09:32:08] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[09:33:21] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[09:33:53] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[09:34:07] *** Joins: wilfred (uid159@moz-5F4AA75A.irccloud.com)
[09:34:11] *** Joins: gazoombo (uid6629@moz-E77DEB21.irccloud.com)
[09:35:51] *** Joins: sankha93 (Instantbir@CAF6D3FF.9C875DCD.9105FBCF.IP)
[09:36:28] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Ping timeout)
[09:36:58] *** Joins: BitPuffin (isak@moz-49828767.cust.tele2.se)
[09:37:56] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[09:38:34] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[09:44:16] *** Joins: sawrubh (uid6719@moz-5F4AA75A.irccloud.com)
[09:44:22] <flaper87> dbaupp: ping
[09:48:21] *** Joins: pnkfelix (pnkfelix@A34AB32F.6B30872B.A515248C.IP)
[09:49:16] *** Joins: ggherdov_ (uid11402@moz-E77DEB21.irccloud.com)
[09:56:04] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[09:56:04] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14eff1740 to 14a268a1c: 02http://git.io/N3iJvQ
[09:56:04] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[09:56:08] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[09:56:08] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/xdX-Lw
[09:56:08] <ghrust> 13rust/06auto 1456d415a 15Branimir:     fix for issue #9394...
[09:56:08] <ghrust> 13rust/06auto 14a8a69ec 15bors: auto merge of #9464 : bmaxa/rust/master, r=cmr...
[09:56:08] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[09:56:10] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[10:02:06] *** Joins: five (five@moz-F45C65F8.v4.ngi.it)
[10:08:15] *** Joins: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp)
[10:08:15] *** Quits: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[10:09:21] *** Joins: geomyidae__ (uid214@moz-E77DEB21.irccloud.com)
[10:09:36] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[10:11:04] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:15:14] <engla> ok this PR is super simple, just add .swap() to ringbuf https://github.com/mozilla/rust/pull/9520
[10:15:17] <engla> r?
[10:15:31] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:16:26] *** Quits: RMF (RMF@4EAA63AE.44ED0B2A.7CFB50F9.IP) (Quit: Computer has gone to sleep.)
[10:17:40] <engla> strcat: brson was asking what RandomAccess added to iterator that could not be using the Index trait. I think he's right
[10:18:26] <strcat> indexable
[10:18:28] <engla> don't you think that both iterators and containers can implement the same indexing traits (when random access is possible)
[10:18:46] <strcat> what about swap, next_n, next_back_n?
[10:19:12] <strcat> I don't mind marking it as unstable until it's done
[10:19:24] <engla> swap is simple if you can index to &mut T
[10:19:31] <strcat> you can't
[10:19:38] <strcat> you'll only be allowed to get one &mut at a time
[10:19:44] <strcat> or you could ask for the same one twice
[10:19:46] <engla> hehe that's true
[10:19:58] <engla> anyway, the indexing method itself is misplaced
[10:21:10] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:22:12] <engla> well it should just be a generalization of the vector slice
[10:22:37] <engla> so where the &mut[T] implements IndexMut and .mut_split, the RAI can too
[10:22:43] <engla> same with .swap()
[10:22:51] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:23:00] <strcat> and what about jumping forwards by N from either end?
[10:23:10] <engla> that's what a slice does too
[10:23:13] <engla> .slice_to
[10:23:45] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[10:24:05] <strcat> it could be called RandomAccess and MutableRandomAccess
[10:24:08] <strcat> doesn't really matter
[10:24:18] <engla> yes
[10:24:26] <jensnockert> zol, engla, skÃ¥ningar: http://www.meetup.com/rust-skane/
[10:24:56] <engla> najs
[10:25:37] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Ping timeout)
[10:28:46] <engla> This day in history
[10:28:51] <engla> Rust SkÃ¥ne was born
[10:29:17] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[10:29:19] <geal> I'm getting "error: can't find crate for `std`" while building anything, and here is the debug log from rustc::metadata::loader http://paste2.org/IDA5ZPFD it seems rustc tries to link to version 0.8-pre, even though rustc and std are both in version 0.8
[10:29:29] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[10:29:33] <geal> is there a problem with my installation, or does that elicit for a compiler bug? :)
[10:31:06] <geal> BTW, should I submit a patch for the code I had to add to display the target meta and the hash differences in the debug log? It was useful for me to debug the issue, maybe it can help somebody else later on
[10:32:00] <engla> strcat: somewhere in there vec slices and iterator converge, like you've said before
[10:32:06] <engla> I mean all the same methods make sense
[10:32:08] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Ping timeout)
[10:32:30] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[10:32:39] <jensnockert> geal: Both, I think. It is a bug in some sense, but it is also something wrong with your installation.
[10:33:50] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[10:33:54] <geal> this appeared after a make uninstall, make clean and make install
[10:34:19] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[10:34:32] <geal> if I checkout e0528a50779f3608d7e623b938cdb239e3d94d51 it works again
[10:36:09] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[10:36:10] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Quit: Leaving)
[10:37:36] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Ping timeout)
[10:38:45] <flaper87> nmatsakis: ping
[10:38:51] <nmatsakis> flaper87: pong
[10:39:09] <flaper87> nmatsakis: hey, cdo you have 2 secs to take a look here? https://gist.github.com/FlaPer87/6703281
[10:39:18] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[10:39:37] <flaper87> I'm implementing Select for UvTImer
[10:39:51] <flaper87> but I'm running into troubles there.
[10:39:54] *** Joins: fyolnish (fyolnish@moz-53C38B14.uqwimax.jp)
[10:39:56] * flaper87 gets another link
[10:40:35] <flaper87> nmatsakis: basically, the scheduler drops the task after sleep_uv exits http://pastebin.mozilla.org/3150249
[10:40:37] <dbaupp> flaper87: pong
[10:40:43] <flaper87> dbaupp: ^^^^^
[10:40:49] <flaper87> I wanted to ask you the same thing
[10:40:51] <flaper87> :)
[10:41:55] <nmatsakis> flaper87: I'm afraid I don't know much about that subsystem at all!
[10:42:54] <dbaupp> I don't know anything much either
[10:43:09] <flaper87> :( :( :( :(
[10:43:12] * flaper87 digs more
[10:43:16] <flaper87> thanks guys
[10:43:32] <strcat> someone embedding python/bash with block comments using ###### as decorators is going to be driven insane :)
[10:44:15] <dbaupp> flaper87: I assume you've looked at other places that do something similar?
[10:44:25] <dbaupp> strcat: re raw strings?
[10:44:32] <flaper87> dbaupp: yup, https://github.com/mozilla/rust/blob/master/src/libstd/rt/comm.rs#L234
[10:44:34] <flaper87> :)
[10:44:39] <strcat> dbaupp: yes
[10:44:43] <strcat> got the channels mixed up ;p
[10:44:52] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[10:45:03] <dbaupp> strcat: it's only super-bad if they have `"###` anywhere
[10:45:32] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[10:46:44] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[10:47:39] *** Quits: sergi (textual@E0F7E15F.F9DEA6D6.FB6F0902.IP) (Quit: Computer has gone to sleep.)
[10:47:49] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[10:49:39] *** Joins: sergi (textual@E0F7E15F.F9DEA6D6.FB6F0902.IP)
[10:52:39] *** Quits: sankha93 (Instantbir@CAF6D3FF.9C875DCD.9105FBCF.IP) (Quit: Gone to save the world!)
[10:53:45] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[10:59:57] *** Joins: novabyte (Instantbir@7596A1FB.F41C9F0F.E7727734.IP)
[11:03:38] *** Quits: dew (Instantbir@moz-8A71886F.dhcp.stls.mo.charter.com) (Ping timeout)
[11:03:46] *** Joins: dew (Instantbir@moz-8A71886F.dhcp.stls.mo.charter.com)
[11:08:49] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[11:10:22] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[11:11:05] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[11:11:05] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/xdX-Lw
[11:11:05] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[11:14:18] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:16:03] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[11:16:03] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/vXU6nA
[11:16:03] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[11:16:05] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[11:16:05] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/j1pPDg
[11:16:05] <ghrust> 13rust/06auto 147e80981 15Felix S. Klock II: #7752: use fcnptr for glob errfunc.
[11:16:05] <ghrust> 13rust/06auto 1448b4b1f 15Felix S. Klock II: errfunc ptr is nullable, so use Option as part of interface to glob (#7752).
[11:16:05] <ghrust> 13rust/06auto 14930f779 15bors: auto merge of #9497 : pnkfelix/rust/fsk-7752-use-fcnptr-for-glob-errfunc, r=cmr...
[11:16:07] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[11:17:50] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:20:43] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[11:21:17] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[11:21:49] *** Joins: novabyte1 (novabyte@7596A1FB.F41C9F0F.E7727734.IP)
[11:25:20] *** Quits: five (five@moz-F45C65F8.v4.ngi.it) (Ping timeout)
[11:28:43] *** Quits: novabyte (Instantbir@7596A1FB.F41C9F0F.E7727734.IP) (Quit: bye bye)
[11:29:10] <dbaupp> engla: should't https://gist.github.com/anonymous/0363d92055cf4552dd1f#file-utf8deciter-rs-L52 be &[u8]?
[11:29:37] <dbaupp> *shouldn't
[11:30:55] <engla> I think that's impossible since it's a condition
[11:31:40] <engla> anyway the condition part can be ripped out
[11:31:47] <dbaupp> ok
[11:32:54] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[11:32:55] <dbaupp> rusti: condition!(foo: &'self int -> ())
[11:32:57] -rusti- <anon>:7:40: 7:41 error: Unexpected end of macro invocation
[11:32:57] -rusti- <anon>:7          condition!(foo: &'self int -> ())
[11:32:57] -rusti-                                                  ^
[11:32:57] -rusti- application terminated with error code 101
[11:33:11] <dbaupp> rusti: condition!( foo: &'self int -> (); )
[11:33:12] -rusti- <std-macros>:185:12: 185:15 error: found `mod` in ident position
[11:33:12] -rusti- <std-macros>:185             mod $c {
[11:33:12] -rusti-                              ^~~
[11:33:13] -rusti- error: aborting due to previous error
[11:33:13] -rusti- application terminated with error code 101
[11:33:27] <dbaupp> huh
[11:34:38] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[11:37:29] <kimundi> Eridius: Hm, fn foo<S: Str, T>(f: &fn(s: S) -> T) -> T { let s = ~"test"; f(s) } is an interesting case
[11:38:41] <engla> that's an inversion of generics
[11:38:55] *** Joins: acabrera (alcabrera@4B9B70ED.4D823036.F18532AE.IP)
[11:39:14] <dbaupp> \o/ nested quantification
[11:39:33] <engla> well &fn<S: Str>(s: S) is not legal
[11:39:48] <dbaupp> yeah
[11:40:04] <engla> also it would be something completely different..
[11:40:43] <engla> however,  &fn<'a>(..) -> ..  is allowed
[11:40:44] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Quit: WeeChat 0.4.2-rc1)
[11:40:52] <engla> at least in the ~fn<'a>() form
[11:41:07] <dbaupp> but it doesn't do the right thing, IIRC
[11:41:08] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[11:41:26] <dbaupp> i.e. it's the same as putting the lifetime on the outer function
[11:41:53] <engla> ok
[11:41:58] <engla> what about a struct field?
[11:42:01] <engla> parser: ~fn<'a>(State<'a, A>) -> Res<(State<'a, A>, R)>
[11:42:38] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[11:42:42] <dbaupp> probably broken too, but I don't know
[11:42:47] *** Quits: cdidd (cdidd@moz-4E94942D.broadband.corbina.ru) (Input/output error)
[11:42:56] <engla> well, it works
[11:42:57] * dbaupp doesn't know how to test
[11:43:05] <engla> don't know if it's broken
[11:43:14] <engla> I had enough with that thing to make it compile
[11:43:39] <engla> before it was  struct Parser<'self> {  parser: ~fn(State<'self, A>) ... } 
[11:43:47] <kimundi> strcat: Embedding ###### would not be a problem
[11:43:50] *** Quits: acabrera (alcabrera@4B9B70ED.4D823036.F18532AE.IP) (Quit: leaving)
[11:43:53] *** Joins: acabrera (alcabrera@4B9B70ED.4D823036.F18532AE.IP)
[11:43:54] <engla> now I managed to cram it into  the neat  struct Parser { ... } without lifetime
[11:44:06] <kimundi> strcat: Only embedding "###### would
[11:44:36] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[11:44:46] <kimundi> r#" foo "bar" ##baz # ####"#
[11:46:33] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[11:47:51] *** Joins: Guest (textual@moz-E06F46F0.corp.bitshelter.com)
[11:48:56] *** Guest is now known as exobit_
[11:51:04] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[11:51:22] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[11:57:26] *** jorendorff_away is now known as jorendorff
[11:58:22] *** jorendorff is now known as jorendorff_away
[11:58:38] *** Quits: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP) (Client exited)
[11:59:18] <steveklabnik> when i can't sleep, i just write docs, i guess. after this compiles, i'll be opening a PR to document all of std::ops
[11:59:21] *** Joins: Azdle (patrick@moz-8C723B60.hsd1.mn.comcast.net)
[12:00:46] <dbaupp> steveklabnik: \o/
[12:01:01] <kimundi> steveklabnik: Then you're more productive than I in those situations :)
[12:01:08] <dbaupp> steveklabnik: (are you including something like https://github.com/mozilla/rust/wiki/Note-operator-overloading in the main doc string?)
[12:01:16] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[12:01:33] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[12:01:46] *** Quits: sergi (textual@E0F7E15F.F9DEA6D6.FB6F0902.IP) (Quit: Computer has gone to sleep.)
[12:03:08] *** Joins: maik (maik@moz-46093746.dip0.t-ipconnect.de)
[12:05:05] <steveklabnik> dbaupp: i forgot about that page, i will incorporate what's good
[12:05:18] <steveklabnik> kimundi: i don't always, i don't know what's up with me today
[12:07:41] <steveklabnik> unfortunately i apparently triggered an llvm rebuild... or at least, something did since i compiled last week
[12:08:29] <dbaupp> yeah, there were some build system adjustments recently
[12:08:52] <dbaupp> (i.e. we were configuring LLVM incorrectly, or something like that.)
[12:09:02] <steveklabnik> glad it got fixed then
[12:09:13] <doomlord_> i had a bit of a rant yesterday about iterators -without restarting it there's a point i remember now i should mention
[12:09:25] <steveklabnik> ive been slacking on reading issues recently, next week i plan on starting to read them all as they come through
[12:09:33] <doomlord_> doubt was expressed that i ever actually need to 'make a new collection' .. 'its inneficient' i was told.
[12:09:42] <pnkfelix> dbaupp: i think we removed some unnecessary dependences from the llvm build
[12:09:43] <doomlord_> but
[12:09:48] *** Joins: kangz (kangz@moz-61F34019.kimsufi.com)
[12:09:52] <dbaupp> pnkfelix: ah ok
[12:10:07] <doomlord_> in optimization, we routinely had to break complex expressions up into multiple stages for i-cache efficiency
[12:11:12] <doomlord_> this required explicit knowledge of where you are computing and where you are writing out an intermediate to memory (the latter being part of an optimization, not a pessimization as assumed by strcat)
[12:11:54] <ChrisMorgan> *Sigh* std::ops, still without my augmented-assignment patch working, so no general += :-(
[12:12:05] <dbaupp> doomlord_: our iterators give you that, don't they?
[12:12:17] <dbaupp> ChrisMorgan: :(
[12:12:25] <doomlord_> yes, the part i took issue with was being told by strcat "you dont need to do that.."
[12:12:51] * ChrisMorgan wishes he had enough spare time to actually work out by main force what is wrong with his patch
[12:13:20] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[12:14:12] <doomlord_> well hopefully rust traits will make bolt ons more pleasant than in C++; i may well have less need for bolt ons, but the need wont be eliminated
[12:14:13] <kimundi> doomlord_: strcat can be a bit... passionate about things :P
[12:14:13] <dbaupp> ChrisMorgan: make some! drop a course! :P
[12:14:14] <steveklabnik> error: expected outer comment
[12:14:16] <steveklabnik> hmmmm
[12:14:32] <dbaupp> doomlord_, kimundi: he is very often correct though :P
[12:14:39] <doomlord_> bad combination when 2 such people are in the same conversation
[12:14:44] <ChrisMorgan> dbaupp: I don't think that would be quite productive. I think I'll just bear with it for the last couple of months...
[12:14:47] <kimundi> dbaupp: That's the problem
[12:14:50] <dbaupp> ChrisMorgan: haha :)
[12:15:12] <doomlord_> often , but one person should not assume they know anothers use case
[12:16:32] <kimundi> doomlord_: I think the underlying argument is simply "Iterators are designed they way they are because that covers the core semantic necessary, and tweaks on usage should only be based on actual optimization needs"
[12:16:39] *** jorendorff_away is now known as jorendorff
[12:17:22] <dbaupp> and, there are some parts of the iterator design that are like that because the type system forbids any other (sane) implementation
[12:17:25] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:18:19] *** Joins: five (five@moz-F45C65F8.v4.ngi.it)
[12:19:00] <kimundi> Eg, vec.iter().filer(...).map(...).collect(), per library and language definition it starts as Iterator<&T>, then filters with a bunch of fn(& &T) -> bool, then maps the Iterator<&A> to some other Iterator<B> and collects them in a new collection
[12:19:07] <doomlord_> one of the things that was repelling me from C++ was the number of people claiming "this is stdlib, this IS c++, coding a different way is 'wrong'"
[12:19:30] <doomlord_> yeah i'm happy with that
[12:19:35] *** Joins: jensnockert (jensnocker@moz-2B3A7EE9.mobileonline.telia.com)
[12:19:38] <kimundi> doomlord_: I agree. THe argument should not be "wrong", but "uneccessary" :P
[12:19:52] <doomlord_> its neither wrong not unnecasery
[12:20:21] <engla> the iterator module only implements things that are simple and efficient
[12:20:21] *** Joins: sergi (textual@E0F7E15F.F9DEA6D6.FB6F0902.IP)
[12:20:23] *** Quits: jensnockert (jensnocker@moz-2B3A7EE9.mobileonline.telia.com) (Connection reset by peer)
[12:20:37] <engla> you could say the hard issues are left
[12:20:37] <doomlord_> there were plenty of ommisions in stdlib that got rectified - because they were , with the benefit of hindsight, necessary
[12:20:43] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[12:20:53] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:20:54] <kimundi> doomlord_: And whether that Iterator pipeline does what you want once optimized as an completely separate from the way it is written.
[12:21:26] <doomlord_> one thing i am very used to is having to examine compiler output and code a slightly different way
[12:21:41] <doomlord_> in order to actually acheive sometime optimized
[12:22:39] <doomlord_> the drive to (what i call) functional style was to write code that is more maleable for that
[12:22:53] <doomlord_> predicates instead of ifs
[12:23:39] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[12:23:40] <doomlord_> so you can shuffle things around, manually dealing with *when* and *where* the different peices of the same calculation are performed until it is fast (icache, dcache issues)
[12:23:41] <kimundi> doomlord_: Sure, if you feel the need to add functionality because the default compositional operations don't do what you want, no one stops you from working around that. The argument yesterday was simply that is not the case for, eg, this clone_iter() you mentioned, I think.
[12:23:51] *** Joins: Florob (Florob@moz-39532932.de)
[12:23:59] *** Quits: maik (maik@moz-46093746.dip0.t-ipconnect.de) (Ping timeout)
[12:24:31] <doomlord_> hopefully 'trait MyIter { ... whatever makes my code pleasant...}" will make life more pleasant than in C++
[12:25:39] <kimundi> doomlord_: It should. The only things that could get annoying is that we handle generic impls a bit weird at the moment, but that literally just means you have to pack a name for the method that does not conflict with anything in scope
[12:26:04] <steveklabnik> okay, so, i'm almost done with this patch. but one thing...
[12:26:08] <steveklabnik>  */
[12:26:08] <steveklabnik> #[lang="drop"]
[12:26:08] <steveklabnik> pub trait Drop {
[12:26:14] <steveklabnik> oh wait
[12:26:15] <doomlord_> i'm not adverse to little prefixes that might even make autocompete easier :)
[12:26:17] <steveklabnik> that's fine i guess
[12:27:30] <engla> doomlord_: at least the new docs should I think make it easier to see the total set of methods implemented on each type
[12:27:49] <dbaupp> <3 the new docs
[12:27:55] <doomlord_> same, the new docs are fantastic
[12:27:55] <engla> yeah
[12:28:29] <kimundi> struct CloneIterator<T>{ ... } impl<T: Clone> Iterator<T> for CloneIterator<T> { ... } trait CloneIter<T> { fn clone_iter(&self) -> CloneIterator<T> } impl<T: Clone> CloneIter<T> for ~[T] { ... }   let v = ~[1 ,2 ,3, 4]; v.clone_iter().filter().map().collect()
[12:28:39] <doomlord_> best of both worlds. split the definitions .. and see a sumary in one place, doesn't get any better than that
[12:29:18] *** Quits: Azdle (patrick@moz-8C723B60.hsd1.mn.comcast.net) (Ping timeout)
[12:29:45] <Seldaek> I just hope it makes more people stick when the 0.8 release buzz brings in newcomers
[12:29:55] <engla> kimundi: I you have to use   impl<'self, A: Clone, T: Iterator<&'self A>> Iterator<A> for CloneIterator<T>
[12:30:01] * dbaupp would prefer `v.iter().clone_each()` to `v.clone_iter()`
[12:30:08] <steveklabnik> what's a good fmt! string for just printing a struct?
[12:30:14] <kimundi> engla: Ah, might be
[12:30:24] <dbaupp> (the former is generic and works for hashmap iterators etc.)
[12:30:26] <Seldaek> steveklabnik: fmt!('{}', struct) ?
[12:30:29] <steveklabnik> thanks
[12:30:37] <engla> that's the format! syntax
[12:30:39] <dbaupp> steveklabnik: `format!("{:?}", struct)` will print any struct
[12:30:50] <kimundi> rusti: struct Foo { data: uint }; format!("{:?}", Foo{data:5})
[12:30:50] <Seldaek> ah sorry, I lost track of all the macro renames
[12:30:53] -rusti- ~"main::Foo{data: 5u}"
[12:30:55] *** Joins: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca)
[12:30:56] <engla> heh
[12:31:00] <dbaupp> `{}` will only print ones that have implemented std::fmt::Default
[12:31:15] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[12:31:20] <Seldaek> so {:?} is "print me anything"
[12:32:04] <dbaupp> yup, it uses compile generated reflection to walk & print any value
[12:32:44] <dbaupp> *compiler
[12:33:17] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[12:35:01] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[12:35:48] *** jorendorff is now known as jorendorff_away
[12:36:03] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[12:36:03] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/XS8chg
[12:36:03] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[12:36:06] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[12:36:06] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/YHwpVg
[12:36:06] <ghrust> 13rust/06auto 1423a067d 15Florian Hahn: Rename from_utf8 to from_bytes again
[12:36:06] <ghrust> 13rust/06auto 140022f2b 15bors: auto merge of #9500 : fhahn/rust/rename-str_from_bytes-fix, r=alexcrichton...
[12:36:07] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[12:39:31] *** jorendorff_away is now known as jorendorff
[12:41:32] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Quit: Leaving...)
[12:41:33] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[12:42:17] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[12:46:01] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[12:48:36] <kimundi> r? https://github.com/mozilla/rust/pull/9521
[12:48:58] *** jorendorff is now known as jorendorff_away
[12:49:05] <doomlord_> heh.
[12:49:26] <doomlord_> i wonder if it would actually be possible to map xbox360 code onto rust iterators or not..
[12:49:28] <kimundi> doomlord_: Heard that map clone discussion one time to many ;)
[12:49:42] <doomlord_> map(clone) ?
[12:49:59] <kimundi> yeah. Not sure if you looked at the PR I linked there
[12:50:09] <doomlord_> i didn't sorry, but i should take alook
[12:50:30] <kimundi> I interpreted the 'heh' as an reaction to it, just bad timing I guess :P
[12:50:30] <doomlord_> rambling again, I wanted a langauge easier to parse than C++
[12:50:44] <doomlord_> i think its too difficult to lookup functions sometimes
[12:50:52] <doomlord_> they are just too complex and too numerous
[12:51:02] <kimundi> doomlord_: Well our parser is not turing complete, so there's that xD
[12:51:12] <dbaupp> doomlord_: every language is easier to parse than C++ :P
[12:51:28] <doomlord_> my 'perfect environment' would allow you to write a code snippet, then you search for matching AST's
[12:51:34] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[12:51:42] <doomlord_> to find what its actually called (if it already exists)
[12:52:17] <kimundi> doomlord_: Well, depending on how you write it and define AST, you might get consistently 0 to infinite results.
[12:52:42] <doomlord_> i'll recount another anecdotal from hell.
[12:52:45] <kimundi> Searching for function signatures is useful though
[12:53:19] <doomlord_> on our xbox360 project, the boss declared, "all programmers must use the same macros/templates to keep the code base consistent"
[12:53:24] <engla> Seldaek: the doc search cache has entries for struct fields that are dead links in search results. Should this be fixed in .js or in the generator?
[12:53:29] <doomlord_> now that sounds like a good idea, i'm sure.
[12:53:59] <doomlord_> the implementation of that idea was - Coders are BANNED from writing macros or templates.
[12:54:11] <doomlord_> the result was...
[12:54:13] <kimundi> Seldaek/cmr: Is being able to search for function signatures in the new rustdoc on the table? Like, "fn foo(uint, uint) -> uint" would also give you a list of matching signatures with different names or so
[12:54:16] *** Joins: cdidd (cdidd@moz-12257DFD.broadband.corbina.ru)
[12:54:20] <doomlord_> instead of 10 copies of the same macro in the code base,
[12:54:28] <dbaupp> kimundi: roogle \o/
[12:54:39] <kimundi> dbaupp: rustle :P
[12:54:45] <doomlord_> we had 100's of instances of the same pattern manually written, because coders could not look them up
[12:55:01] <kimundi> doomlord_: That sounds like a bad restriction then:P
[12:55:13] <doomlord_> 10 coders could have written 10 copies of the same macro, and i'd have 10 instances to optimize
[12:55:17] <doomlord_> instead i had 100s
[12:55:26] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[12:55:28] <kimundi> yeah
[12:55:41] <kimundi> Ideally we can solve that with importable macros
[12:55:49] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[12:55:55] <kimundi> Post 1.0 though, it seems
[12:56:01] <steveklabnik> r? https://github.com/mozilla/rust/pull/9522 :D
[12:56:47] <steveklabnik> i'm going to take a small nap
[12:56:57] <steveklabnik> let me know what you think of those docs, i'll fix them up as needed.
[12:57:13] * jensnockert is so happy that I have 6 rust users in our user group now <3.
[12:57:27] <engla> wow
[12:57:53] <doomlord_> kimundi, ok i've checked your issue - i really wish github had +1 issue voting :)
[12:57:58] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[12:58:06] * dbaupp hugs jensnockert
[12:58:15] * jensnockert hugs dbaupp.
[12:58:29] <steveklabnik> doomlord_: it did long ago but it wasn't actually useful so they removed it
[12:58:35] <doomlord_> :(
[12:58:38] <engla> lol I'm assistant organizer
[12:58:44] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[12:58:46] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[12:58:53] <engla> ok
[12:58:54] <kimundi> doomlord_: Well, you could just comment along the lines of "Yeah, that would make it more understandable for me" :P
[12:59:02] <jensnockert> That's the price you'll have to pay for being in the IRC channel engla.
[12:59:05] <doomlord_> instaed of clicking +1 and moving on, i have to ramble to register my opinion.. and when i start, i dont stop :)
[12:59:12] <kimundi> haha
[12:59:28] <doomlord_> i mean i could add one line, or i could cut paste the whole rant that led onto this issue
[13:00:26] <kimundi> doomlord_: Guess you need those essay-summarize skill from school after all.
[13:00:30] <dbaupp> steveklabnik: seems fine except for the nitpick with the comment starter
[13:00:36] <kimundi> Who would have though ;)
[13:00:42] <dbaupp> (std::ops will be 80% documentation \o/ )
[13:01:23] <engla> I have a question steveklabnik, because I'm not actually sure that `a + b` is sugar for `(&a).add(&b)`.
[13:01:39] <engla> I think it has to be a.add(&b)
[13:02:08] <dbaupp> engla: (&a).add(&b) would still work
[13:02:23] <engla> unless there is separate implementations on &T and T
[13:02:44] <dbaupp> rusti: struct Foo; impl Add<Foo, Foo> for &'self Foo { fn add(&self, _: &Foo) -> Foo { Foo } } Foo + Foo
[13:02:45] -rusti- <anon>:7:51: 7:54 error: Illegal lifetime 'self: the `self` lifetime must be declared
[13:02:45] -rusti- <anon>:7          struct Foo; impl Add<Foo, Foo> for &'self Foo { fn add(&self, _: &Foo) -> Foo { Foo } } Foo + Foo
[13:02:45] -rusti-                                                             ^~~
[13:02:45] -rusti- error: aborting due to previous error
[13:02:46] -rusti- application terminated with error code 101
[13:02:52] <dbaupp> rusti: struct Foo; impl<'self> Add<Foo, Foo> for &'self Foo { fn add(&self, _: &Foo) -> Foo { Foo } } Foo + Foo
[13:02:53] -rusti- <anon>:7:104: 7:113 error: binary operation + cannot be applied to type `main::Foo`
[13:02:53] -rusti- <anon>:7          struct Foo; impl<'self> Add<Foo, Foo> for &'self Foo { fn add(&self, _: &Foo) -> Foo { Foo } } Foo + Foo
[13:02:53] -rusti-                                                                                                                  ^~~~~~~~~
[13:02:56] -rusti- error: aborting due to previous error
[13:02:58] -rusti- application terminated with error code 101
[13:03:01] <dbaupp> rusti: struct Foo; impl<'self> Add<Foo, Foo> for &'self Foo { fn add(&self, _: &Foo) -> Foo { Foo } } &Foo + Foo
[13:03:02] -rusti- main::Foo
[13:03:15] <dbaupp> appears you are correct engla
[13:03:31] <engla> I'm thinking of clone
[13:03:46] <dbaupp> hm?
[13:04:19] <engla> rusti: static S: int = 3; let x = &S; (x.clone(), (&x).clone())
[13:04:20] -rusti- (3, &3)
[13:04:22] <engla> it's easier to see
[13:04:32] <engla> because it's implemented on both int and &int
[13:04:36] <dbaupp> right
[13:04:50] <engla> (with a &self param in the method)
[13:06:02] *** Quits: yati (yati@FD13E7CB.48F02088.CA052C06.IP) (Client exited)
[13:08:16] <dbaupp> (in this case the specific behaviour of the operation-desugaring was of interest, not just the general (&x).foo() vs. x.foo() behaviour.)
[13:10:15] <engla> I think my idea is wrong
[13:10:16] <engla> anyway
[13:11:13] <doomlord_> (ok kimundi, i've commented :) i've manged to condense my argument into less than one page!)
[13:11:38] <dbaupp> engla: which idea?
[13:12:07] <kimundi> doomlord_: Hu, I don't see a comment appear on https://github.com/mozilla/rust/pull/9521
[13:12:16] <kimundi> ah, ther it is
[13:13:22] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[13:14:18] <flaper87> olsonjeffery: ping
[13:14:20] <kimundi> doomlord_: God summary :)
[13:14:25] <kimundi> err, good#
[13:14:29] <kimundi> ... good
[13:14:35] <Seldaek> engla: not sure why dead links happen, but may be related to the private items, feel free to report an issue and cc @alexcrichton 
[13:15:01] <Seldaek> kimundi: not planned I think, maybe rustle whatever thingy can be integrated later?
[13:15:24] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[13:15:35] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[13:15:35] <kimundi> Seldaek: Yeah, not necessary at the moment, but I can imagine adding it at any time to imporve the docs
[13:15:37] <engla> Seldaek: I thought I could fix it, but yeah I don't know rustdoc. I might report it instead
[13:16:46] <engla> dbaupp: a.add(&b). I'm more confused after testing it
[13:17:17] <dbaupp> engla: oh?
[13:17:18] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[13:17:48] <kimundi> doomlord_: Btw, the actual solution would be for rustc to 1) allow treading methods as assoziated functions : Clone::clone(5) 2) Allow to import assoziated functions from traits: use Clone::clone; clone(5). At least, that would be what it takes to solve the situation in general.
[13:18:00] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[13:18:04] <dbaupp> kimundi++
[13:18:37] <doomlord_> ah i was about to ask, i seem to remember something related to 'uniform call syntax' being talked about
[13:20:16] <doomlord_> i'm so surpsied by github removing issue voting :(
[13:20:28] *** Quits: jaen (jaen@moz-74844A4F.neoplus.adsl.tpnet.pl) (Ping timeout)
[13:20:31] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[13:20:39] *** Joins: jaen (jaen@FB01674D.56B727FE.4B52F012.IP)
[13:20:43] <kimundi> doomlord_: Github likes to surprise with many things >:)
[13:21:17] <kimundi> (Like commits in pull request being sorted by date instead of order)
[13:22:27] <kimundi> Okay guys and gals, I really need to close my IRC window now. #rust is just to distracting :P
[13:22:40] <kimundi> bye
[13:23:06] <engla> dbaupp: I agree with your comment. I'm just confused still, no cure for that
[13:23:12] *** kimundi is now known as zz_kimundi
[13:23:18] *** Quits: tavmem (Mibbit@moz-299BD82F.static.optonline.net) (Quit: http://www.mibbit.com ajax IRC Client)
[13:23:20] <engla> dbaupp: sorry for spreading the confusion with short answers
[13:24:48] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[13:25:47] *** Joins: someone (Mibbit@7B41D193.357F2972.DDE5D3F6.IP)
[13:27:03] *** Quits: five (five@moz-F45C65F8.v4.ngi.it) (Ping timeout)
[13:27:42] <olsonjeffery> flaper87: pong
[13:27:53] <someone> Is there a something like a "file descriptor table" in rust? I'm trying to implement i/o redirection "<" ">" for my shell 
[13:27:57] <flaper87> olsonjeffery: goood morning, I guess :) 
[13:28:05] <flaper87> olsonjeffery: did you read my messages yday ?
[13:28:34] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[13:29:12] <someone> Anyone could help me?
[13:29:18] <flaper87> olsonjeffery: I'm struggling a bit the scheduler and the selectable UvTimer: This is what I've got so far: https://gist.github.com/FlaPer87/6703281/revisions
[13:30:09] <flaper87> or ish, I changed it a bit. My current issue is that I don't see block_on being called by the scheduler after the task blocks, which instead happens for the port implementation
[13:31:10] *** Quits: dew (Instantbir@moz-8A71886F.dhcp.stls.mo.charter.com) (Ping timeout)
[13:32:05] <dbaupp> someone: you should be able to use the FFI to get dup/dup2 etc into Rust
[13:32:36] *** Quits: huseby_ (huseby@moz-4E8C421A.husebyhome.com) (Quit: Leaving)
[13:33:35] <someone> dbaupp: Sry what's FFI and how do I use it?
[13:33:41] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[13:33:51] <dbaupp> someone: http://static.rust-lang.org/doc/master/tutorial-ffi.html
[13:34:11] <dbaupp> someone: there are a few posts on the piazza forum where people are using the FFI too
[13:34:39] <dbaupp> someone: actually, I guess http://static.rust-lang.org/doc/0.7/tutorial-ffi.html is more appropriate for v0.7
[13:35:16] <someone> dbaupp: Alright. Thanks!
[13:35:23] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[13:37:46] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[13:38:05] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[13:38:41] <dbaupp> someone: specifically, cmr (corey) has provided a link to an example in https://piazza.com/class/hiuvlqlyk4925d?cid=56
[13:38:55] <dbaupp> someone: (shortcut: https://github.com/cmr/rust-signal/blob/0.7/signal.rs :P )
[13:40:05] <dbaupp> someone: (um, I just assumed you were doing CS4414, apologies if you are not :) )
[13:40:42] <someone> dbaupp: Thanks. Yea, I'm still working on i/o redirection problem 3. Did you use FFI for this problem?
[13:41:17] <dbaupp> someone: I haven't done it. (I'm not in the class)
[13:44:10] *** Joins: mib_u290p7 (Mibbit@moz-1D021932.range86-166.btcentralplus.com)
[13:44:11] *** Quits: mib_u290p7 (Mibbit@moz-1D021932.range86-166.btcentralplus.com) (Quit: mib_u290p7)
[13:45:45] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[13:49:10] <bstrie> jensnockert: I kind of hate how you've sincerely used the word "rustafarians" in that meetup description :P
[13:50:09] <jensnockert> <3
[13:50:25] <jensnockert> Any other descriptions you prefer?
[13:50:48] <jensnockert> I wanted to make the name a pun of a well known Swedish kind of coffee as well.
[13:50:57] <jensnockert> SkÃ¥nerust vs. SkÃ¥nerost.
[13:51:04] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[13:51:04] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/YHwpVg
[13:51:04] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[13:51:12] <jensnockert> Where rost means rust in Swedish.
[13:51:21] <jensnockert> Hard to describe puns :(
[13:51:31] <jensnockert> It was fun, but the other people disagreed.
[13:51:34] <bstrie> haha
[13:52:00] <bstrie> I honestly don't have any better suggestions
[13:52:13] *** Quits: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca) (Quit: canhtak)
[13:52:39] <bstrie> is marijuana legal in sweden? maybe we could just take "rustafarian" to its natural conclusion
[13:53:14] <jensnockert> Nope.
[13:53:14] <Ke> sounds extremely unlikely
[13:54:45] *** Joins: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP)
[13:56:01] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[13:56:01] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/GcKB1Q
[13:56:01] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[13:56:42] <engla> jensnockert: Rust user group Frustration
[13:58:00] <bstrie> what other languages have names for their users
[13:58:02] <bstrie> pythonistas
[13:58:05] <bstrie> javascripters
[13:58:10] <bstrie> ruby rockstars
[13:58:32] <AutomatedTester> ruby people and their names...
[13:58:37] <Ke> haskeletors
[13:58:51] <doomlord_> lol
[13:59:38] <cyndis> the rails guys are "rockstars", there's are actually down-to-earth people too :) (rubyists)
[13:59:51] <bstrie> how about
[14:00:03] <bstrie> rustranglers
[14:00:13] <jensnockert> Rustilators.
[14:00:14] <bstrie> because we... strangle segfaults
[14:00:23] <jensnockert> Rusties.
[14:00:27] <jensnockert> Rustacular.
[14:00:29] <bstrie> rusties might be the best
[14:00:40] <pnkfelix> Arustocrats
[14:00:46] <bstrie> pnkfelix: that's just for the devs
[14:00:47] *** Quits: someone (Mibbit@7B41D193.357F2972.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:00:48] <jensnockert> I want to be an arustocrat.
[14:00:56] <engla> if someone ports nacl/libsodium to rust is has to be called FeCl3
[14:00:59] <bstrie> jensnockert: sorry you have to be born into it
[14:01:02] <jensnockert> :(
[14:01:20] <bstrie> Oxidizers
[14:01:43] <jensnockert> bstrie: Can I be part of the rusteoisie
[14:01:45] <jensnockert> ?
[14:01:51] <bstrie> jensnockert: is that a pokemon?
[14:02:06] <jensnockert> I wanted to join Bourgeoisie and Rust.
[14:02:08] <engla> while we are forcing it, I'll be an Arustronaut
[14:02:10] <jensnockert> But it failed.
[14:02:48] <jensnockert> I have to go, but I'll look up some good greek words related to rust in sound or meaning.
[14:02:53] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[14:07:15] *** Joins: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca)
[14:07:23] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0/20130917123208])
[14:08:36] <doomlord_> i suppose if your languages were C and Rust, you'd be crusties
[14:08:46] <bstrie> ugh
[14:09:12] <doomlord_> its a shame a word based on corrosion has so many negative images
[14:10:04] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[14:10:39] <bstrie> no it's just that nobody wants to be crusty
[14:10:59] <cmr> the ffi used to be called crust functions.
[14:11:01] <engla> The crust is the best part
[14:11:34] <doomlord_> i suppose if you have a core library,
[14:11:44] <doomlord_> the outer most layer by contrast is the crust.
[14:12:12] <doomlord_> libcore ->.. ... -> libcrust.
[14:12:25] <pnkfelix> I like "rusteoisie"
[14:12:41] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[14:12:47] <pnkfelix> "laissez fer"
[14:13:03] <doomlord_> laissez ferrite ?
[14:13:28] <bjz> ferrites?
[14:13:28] <cmr> heh
[14:13:28] <bstrie> haha
[14:13:34] * cmr stills favors rusties
[14:13:40] <bjz> (sounds like ferrets)
[14:13:48] <bstrie> rusties is the least bizarre
[14:13:48] <pnkfelix> ferrites is good
[14:14:01] *** Joins: maik (maik@moz-82B7232D.dip0.t-ipconnect.de)
[14:14:04] <cmr> ghrust should report in #rust-internals, not here.
[14:14:18] <bjz> cmr++
[14:14:29] <pnkfelix> cmr: ghrust missed that mtg.  It is pretty bad about attendence.
[14:15:03] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[14:15:05] <bjz> pnkfelix: it's bad enough it never hangs around for a chat
[14:15:14] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[14:17:57] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[14:19:33] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[14:20:01] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[14:21:46] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[14:22:03] <olsonjeffery> flaper87: hm. i don't have a good answer here. i need to dig into select and see how its used in the runtime and implemented elsewhere
[14:22:08] <olsonjeffery> sorry
[14:22:32] <flaper87> olsonjeffery: no worries, I'll dig more. Thanks! :)
[14:23:44] <bjz> how about 'codesmiths'?
[14:23:45] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:23:57] <bjz> bit of a mouthful
[14:24:10] <cmr> also a bit obscure
[14:24:21] <cmr> more iron related than rust related, you can't do much with rust :p
[14:25:06] *** Quits: nkoep (nik@moz-F23F1945.pool.mediaways.net) (Ping timeout)
[14:25:29] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[14:27:07] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:27:20] <bjz> cmr: powderpushers?
[14:27:47] <bjz> :p
[14:28:31] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[14:28:47] <ChrisMorgan> I'll be an oxidiser. Or an oxidising agent, as the fancy takes me.
[14:29:09] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:29:13] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[14:29:17] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:29:18] <bjz> ChrisMorgan: hah
[14:29:29] <bjz> ChrisMorgan: sounds dangerous
[14:29:51] * bjz will be corrosive
[14:30:14] <bjz> o wait
[14:30:35] * bjz had his chemistry muddled
[14:31:06] <cmr> rustlers would also be acceptable.
[14:34:03] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[14:35:02] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[14:35:47] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[14:37:36] *** Quits: maik (maik@moz-82B7232D.dip0.t-ipconnect.de) (Ping timeout)
[14:39:33] *** Joins: nkoep (nik@moz-48B03841.vpn.rwth-aachen.de)
[14:40:11] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[14:46:18] *** Joins: josh (Mibbit@moz-D0FAF29E.static.rvsd.ca.charter.com)
[14:47:18] *** josh is now known as IRCMonkey49918
[14:47:19] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[14:48:04] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (Ping timeout)
[14:48:11] *** Quits: IRCMonkey49918 (Mibbit@moz-D0FAF29E.static.rvsd.ca.charter.com) (Quit: http://www.mibbit.com ajax IRC Client)
[14:48:22] *** Joins: maik (maik@moz-82B7232D.dip0.t-ipconnect.de)
[14:49:45] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[14:49:45] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[14:50:14] <olsonjeffery> i like "rustafarians"
[14:50:26] <olsonjeffery> or rustlers
[14:51:04] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[14:51:21] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[14:52:40] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[14:54:36] <olsonjeffery> we can talk about Zion as the mythical promised land of performant, segfault-and-race-free programs
[14:55:06] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[14:55:07] <olsonjeffery> and Babylon as the decadant ocean of sin that is mandatory-GC and null-references
[14:55:34] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[14:55:50] *** Joins: Ferreus (ferreus@moz-DEC4442C.dyn.telefonica.de)
[14:57:20] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[14:59:39] <elly> who are C programmers in this metaphor?
[15:01:36] <olsonjeffery> only Jah can judge you for your stack discipline and use of pointer arithmetic
[15:04:56] <elly> heh :P
[15:05:15] *** Joins: Jesin (Jessin_@moz-E7311B2E.cc.lehigh.edu)
[15:11:07] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[15:11:08] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[15:11:09] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/yEQ_2A
[15:11:09] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[15:13:44] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[15:15:09] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[15:16:06] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[15:16:06] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/wnMJLQ
[15:16:06] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[15:16:08] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[15:16:08] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/ZO46vw
[15:16:08] <ghrust> 13rust/06auto 1439f55e9 15Brian Anderson: Add 'continue' as a synonym for 'loop'
[15:16:08] <ghrust> 13rust/06auto 14cc6ad95 15bors: auto merge of #9504 : brson/rust/continue, r=alexcrichton
[15:16:09] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[15:18:19] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[15:20:03] *** Quits: skade (skade@moz-DA43A266.hsi.kabel-badenwuerttemberg.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[15:21:12] *** Quits: maik (maik@moz-82B7232D.dip0.t-ipconnect.de) (Ping timeout)
[15:21:16] *** Joins: huseby (huseby@moz-487D34BE.tukw.qwest.net)
[15:22:13] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[15:23:52] *** Quits: Jesin (Jessin_@moz-E7311B2E.cc.lehigh.edu) (Ping timeout)
[15:24:29] *** Joins: jstevans (Instantbir@31D71468.EBD92228.DDE5D3F6.IP)
[15:25:11] <jstevans> msg rusti
[15:25:16] <jstevans> slashes are important...
[15:26:47] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:27:04] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[15:28:20] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[15:28:47] *** Joins: kokarez (Mibbit@510621FB.DF3CA0D0.BA2F4534.IP)
[15:29:26] *** Joins: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[15:29:51] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[15:30:20] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[15:30:24] <kokarez> Hi,
[15:30:52] <kokarez> How i can compile relocable rust object?
[15:31:03] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[15:31:13] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[15:31:13] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14cc6ad95 to 140f9bcaf: 02http://git.io/N3iJvQ
[15:31:13] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[15:31:14] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[15:31:14] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/17PiXg
[15:31:14] <ghrust> 13rust/06auto 14d8957e6 15Steven Fackler: Some struct visibility fixes
[15:31:14] <ghrust> 13rust/06auto 14b64219e 15bors: auto merge of #9506 : sfackler/rust/visibility, r=alexcrichton
[15:31:15] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[15:31:19] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[15:31:19] *** ChanServ sets mode: +o jdm
[15:31:52] <kokarez> I've search on the rust man page, but i found nothing on it. So i suppose i must compile with linker directly (or gcc and good option)
[15:32:02] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[15:33:36] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[15:34:26] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:34:34] *** Quits: StarLight (StarLight@moz-BD8682CE.dynamic.avangarddsl.ru) (Ping timeout)
[15:35:06] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[15:36:08] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[15:37:39] *** jorendorff_away is now known as jorendorff
[15:38:12] *** Joins: vodik (simon@moz-17D883D9.net.uwaterloo.ca)
[15:38:36] *** Joins: Jesin (Jessin_@moz-6EF909D6.cc.lehigh.edu)
[15:38:47] *** Joins: StarLight (StarLight@moz-5873EB8D.dynamic.avangarddsl.ru)
[15:39:01] *** Joins: jensnockert (jensnocker@moz-665BCADE.wireless.lu.se)
[15:40:18] *** Joins: obi_wan (Mibbit@moz-9C16D8A0.sub-70-197-10.myvzw.com)
[15:40:40] *** Quits: obi_wan (Mibbit@moz-9C16D8A0.sub-70-197-10.myvzw.com) (Quit: http://www.mibbit.com ajax IRC Client)
[15:41:05] *** Joins: Kruppe (user@moz-EFD7CA1D.net.uwaterloo.ca)
[15:41:06] *** Quits: jensnockert (jensnocker@moz-665BCADE.wireless.lu.se) (Connection reset by peer)
[15:41:23] *** Joins: jensnockert (jensnocker@moz-665BCADE.wireless.lu.se)
[15:43:16] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[15:45:05] *** Quits: jensnockert (jensnocker@moz-665BCADE.wireless.lu.se) (Connection reset by peer)
[15:45:27] *** Joins: maik (maik@moz-82B7232D.dip0.t-ipconnect.de)
[15:46:38] <kokarez> It's a dummy question or no body have reponse?
[15:47:26] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[15:47:52] <bstrie> kokarez: sorry, wasn't paying attention. what's the problem? can't compile?
[15:47:52] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[15:48:00] <pnkfelix> kokarez: did you mean "relocatable"?  What is it you want?
[15:48:02] <kokarez> No problem ^^
[15:48:09] <bstrie> ah I see
[15:48:16] <kokarez> i compile with (rustc -c)
[15:48:20] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[15:48:32] <kokarez> I want made my own backend language
[15:48:38] *** Quits: sk (sk@D904A3B4.50B2D8C.78DD174B.IP) (Quit: Leaving)
[15:49:02] <kokarez> so i need to do some 'c', but i'vnt found the way to link 'c' en 'rust'
[15:50:08] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[15:50:10] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[15:50:12] <kokarez> pnkfelix: Yes, sorry i fail my word (like lot of other)
[15:50:24] <bstrie> kokarez: are you just looking to call into Rust code from C code?
[15:50:35] <bstrie> kokarez: or are you looking to do the opposite?
[15:51:08] *** Joins: noam_ (noam@F6B530A7.720527A7.416762B.IP)
[15:51:20] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[15:51:25] <kokarez> The way to call code is already do. i read the code of standard library of rust to do it (extern etc..)
[15:51:28] *** Quits: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com) (Quit: exobit_)
[15:51:34] <bstrie> ok
[15:51:36] <kokarez> I wan't to call rust -> C
[15:51:46] <joelteon> wan't
[15:51:52] <kokarez> want
[15:51:54] <kokarez> Sorry
[15:52:03] <bstrie> joelteon: no need to make fun of non-native speakers
[15:52:09] <joelteon> oh
[15:52:10] *** Quits: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue_)
[15:52:21] <joelteon> sorry
[15:52:38] <bstrie> kokarez: just to be sure, have you read http://static.rust-lang.org/doc/master/tutorial-ffi.html ?
[15:53:07] <kokarez> Yes, but is possible that i've miss an information
[15:53:24] *** Quits: jaen (jaen@FB01674D.56B727FE.4B52F012.IP) (Ping timeout)
[15:54:02] <pnkfelix> To be fair, that tutorial-ffi.html does not provide any concrete examples of command line invocations...
[15:54:02] <kokarez> I've seen nothing on compilation between 'c' ans 'rust'
[15:54:29] <pnkfelix> kokarez: you can feed extra arguments to the linker via rustc
[15:54:39] *** Joins: TheDust (Stijn@moz-8C2076C2.upc-d.chello.nl)
[15:54:49] <bstrie> via --link-args
[15:55:36] <kokarez> Yes i know, but he refuse relacatable file 'error: src/main.o is not UTF-8'
[15:55:39] <bstrie> I am not an expert on rust -> c, so I can't be very helpful
[15:56:19] <bstrie> kokarez: if you have already done "rustc -c", then you need to take the .o files and link them manually, using "ld" or some other linker
[15:56:28] <kokarez> Ok
[15:56:33] <pnkfelix> kokarez: â€¦ you're probably going to need to cut-and-paste some small example files and command line invocations into a gist for us to see
[15:57:01] <kokarez> bstrie: yes i know :(
[15:57:08] <pnkfelix> kokarez: because the error message "error: src/main.o is not UTF-8" indicates to me that rustc thinks you are trying to treat main.o as if it were the Rust source code.
[15:57:26] <kokarez> bstrie: I already made it with 'gcc' (no ld for some raison)
[15:57:43] <pnkfelix> kokarez: ("UTF-8" means a certain kind of text file.)
[15:57:52] <kokarez> but the mahor problem is to find standart library to clink it
[15:57:58] <kokarez> i must also compile i?
[15:58:16] <kokarez> mahor/major
[15:59:46] <kokarez> When i compile i lots of symbole failed. And the symbol containt some char that can't be used in a function name is C
[15:59:54] <bstrie> kokarez: to see the arguments that "rustc" passes to the linker normally, try compiling a small program with "rustc -Z print-link-args"
[16:00:23] <kokarez> bstrie: Thx i try
[16:02:56] <kokarez> bstrie: very big thanx, i've miss this option on the man.
[16:03:20] <bstrie> kokarez: it is hidden behind the "-Z" flag, which are all experimental flags
[16:03:31] <bstrie> kokarez: you can use "rustc -Z help" to see the help for them
[16:03:55] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:04:52] <kokarez> An other question
[16:05:08] <kokarez> Can i remove all default flags for linker
[16:05:19] <kokarez> --link-args do not replace
[16:05:25] *** Quits: huseby (huseby@moz-487D34BE.tukw.qwest.net) (Quit: Leaving)
[16:05:30] <jack> Do we have a trait for =?
[16:05:41] <bstrie> jack: assignment? don't think so
[16:05:54] <engla> assignment, that would be terrible
[16:05:55] <bstrie> jack: augmented assignment, in the future
[16:06:29] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[16:06:30] *** Joins: mhoye (mhoye@moz-C14EAE67.vs.heavycomputing.ca)
[16:06:41] <bstrie> kokarez: good question...
[16:07:14] <pnkfelix> kokarez: afaik you cannot remove the existing option, I think you have to resort to a manual linker invocation for now.
[16:07:16] <jstevans> I'm on 0.7 (OS course), and when I try to do let fd = libc::open(pathcstr, 2i32, 256i32), I get back fd = -1
[16:07:21] <jstevans> What am I doing wrong?
[16:07:34] <bstrie> kokarez: that might be the case where you need to link manually
[16:07:45] *** Quits: Kruppe (user@moz-EFD7CA1D.net.uwaterloo.ca) (Ping timeout)
[16:07:48] *** Joins: hoverbear (andrew@EBFA78B5.F19E5E7B.E74D50F2.IP)
[16:07:53] <pnkfelix> jstevans: have you confirmed that the same arguments return 0 in a C program?
[16:08:08] *** Quits: hoverbear (andrew@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: hoverbear)
[16:08:10] <pnkfelix> jstevans: sorry, not 0.
[16:08:24] <cmr> jstevans: Check the errno to know what it thinks is wrong.
[16:08:36] <pnkfelix> jstevans: (I meant have you confirmed that you get a non-error result in C.)  And yeah, what cmr too.  :)
[16:09:20] <kokarez> bstrie: Ok, thx a lot, i will made the link manual
[16:09:26] <kokarez> manualy**
[16:09:31] *** Quits: sergi (textual@E0F7E15F.F9DEA6D6.FB6F0902.IP) (Quit: Computer has gone to sleep.)
[16:09:48] <bstrie> kokarez: ok, let us know if you have any more problems :)
[16:10:19] <kokarez> bstrie: with pleasure :D
[16:11:25] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[16:11:59] *** Joins: erickt (Adium@8C9ECD8F.3A598286.F12515B4.IP)
[16:13:53] *** Quits: maik (maik@moz-82B7232D.dip0.t-ipconnect.de) (Ping timeout)
[16:15:01] *** Quits: jstevans (Instantbir@31D71468.EBD92228.DDE5D3F6.IP) (Ping timeout)
[16:16:52] *** flaper87 is now known as flaper87|afk
[16:16:59] *** Joins: jstevans (Instantbir@31D71468.EBD92228.DDE5D3F6.IP)
[16:17:17] <kokarez> bstrie: 'src/main.o:(.rodata+0x0): multiple definition of `rust_abi_version''
[16:17:17] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[16:17:19] *** Joins: huseby (huseby@19BD73A1.5D8BCA3A.A0C1B52F.IP)
[16:17:47] <kokarez> bstrie: i think when you do the '.o' with '-c' some value is past on
[16:18:34] <bstrie> kokarez: I'm mostly a Javascript programmer, you will need to find someone who actually knows what they're doing :)
[16:18:49] <kokarez> bstrie: yes, i go on irssi ^^
[16:18:53] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[16:19:07] <kokarez> bstrie: fail reading >_<
[16:19:09] <kokarez> ok
[16:20:02] <kokarez> no problem, do you know somebody which can found response on my question?
[16:20:09] <pnkfelix> kokarez: can you make a minimal example and put it up on gist.github.com ?  It is hard to decode single line error messages in isolation.
[16:20:19] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Connection reset by peer)
[16:20:23] <kokarez> pnkfelix: yes
[16:20:30] <pnkfelix> kokarez: and it would give us a lot more to work with if you gave us the input files and the command line you are using
[16:20:45] *** Joins: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com)
[16:20:58] *** Joins: ozten (ozten@19BD73A1.5D8BCA3A.A0C1B52F.IP)
[16:21:09] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[16:21:09] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14b64219e to 140f9bcaf: 02http://git.io/N3iJvQ
[16:21:09] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[16:21:11] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[16:21:11] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/PIkpuQ
[16:21:11] <ghrust> 13rust/06auto 14d8957e6 15Steven Fackler: Some struct visibility fixes
[16:21:11] <ghrust> 13rust/06auto 146f991a2 15bors: auto merge of #9506 : sfackler/rust/visibility, r=alexcrichton
[16:21:12] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[16:21:53] *** Quits: noam_ (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[16:22:36] <kokarez> pnkfelix: i will past you man Makefile, and my rust file. 
[16:23:11] <pnkfelix> kokarez: please post them to a gist (gist.github.com) so other people can look too, since I may not be online for too many more minutes.
[16:24:04] *** Joins: valenting (Thunderbir@C6866972.77435D89.FB866788.IP)
[16:24:16] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[16:24:21] *** Joins: hoverbear (andrew@EBFA78B5.F19E5E7B.E74D50F2.IP)
[16:24:46] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[16:25:00] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[16:25:12] <kokarez> pnkfelix: yes i do it as sone as is possible
[16:25:19] *** Joins: maik (maik@moz-82B7232D.dip0.t-ipconnect.de)
[16:25:57] <pnkfelix> kokarez: okay, when you said "i will past you", I did not know if you meant you would private message me, or if you would post it, etc...
[16:26:20] *** Joins: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP)
[16:26:33] *** Quits: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0a2/20130912004004])
[16:27:22] <kokarez> pnkfelix: https://gist.github.com/anonymous/aa284ad01c7bb31b8fff
[16:27:32] <kokarez> pnkfelix: my fault, no problem
[16:27:32] *** Joins: jstevans1 (Instantbir@31D71468.EBD92228.DDE5D3F6.IP)
[16:27:52] <pnkfelix> kokarez: you need to put the C code up on this too, right?
[16:27:53] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[16:28:09] *** Quits: Jesin (Jessin_@moz-6EF909D6.cc.lehigh.edu) (Ping timeout)
[16:28:12] *** Joins: miza (miza@moz-908EA8DE.home.otenet.gr)
[16:28:23] <kokarez> No, here i try to compile without C code. 
[16:28:27] <kokarez> It fail
[16:28:31] *** Quits: jstevans (Instantbir@31D71468.EBD92228.DDE5D3F6.IP) (Ping timeout)
[16:28:57] <pnkfelix> kokarez: okay i see, let me looik
[16:29:30] *** Quits: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca) (Quit: canhtak)
[16:29:44] <kokarez> LDFALGS is the result of -Z, so is normal that all path is on my pc (/.../freebsd/.../). For the moment, i just try to compile en 'rs' without rust linking
[16:30:26] <kokarez> pnkfelix: I'm stupid, i don;t past the link error
[16:30:48] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:32:41] <kokarez> pnkfelix: https://gist.github.com/anonymous/ce7491d27ba40a96e9bf
[16:33:46] <pnkfelix> kokarez: and your `main.o` was generated via this same Makefile, from this same `main.rs` that you posted ?
[16:33:56] <kokarez> I do an for&seek with GDB  on the main.o, there are 'rust_abi_version' already set
[16:33:58] <kokarez> Yes
[16:34:00] <pnkfelix> kokarez: e.g. if you `rm main.o` and re-run `make`, you get the same thing?
[16:34:25] <kokarez> gmake clean; gmake
[16:34:28] <pnkfelix> kokarez: (because for me, when I run `make`, I get an error about how there's no rule to make `src/main.o`, needed by `println`
[16:34:28] <kokarez> same
[16:34:49] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:35:03] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[16:35:03] <kokarez> pnkfelix: rules '%.o: %.rs' is for rust file
[16:35:34] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[16:35:51] <pnkfelix> kokarez: but where does the `main.rs` live relative to the Makefile?  Do you have the Makefile in the root and the `main.rs` in a `src` subdirectory?
[16:36:03] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[16:36:31] <pnkfelix> kokarez: (that must be the case, I get further when I moved the main.rs into a src subdirectory)
[16:36:31] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Connection reset by peer)
[16:36:35] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[16:36:48] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[16:37:03] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[16:37:20] <kokarez> src/main.rs
[16:37:20] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[16:37:42] <kokarez> My makefile is before src
[16:37:47] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[16:37:56] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[16:37:58] <kokarez> ./Makefile  ./src/main.rs
[16:38:00] <pnkfelix> kokarez: okay, I've replcated the problem you describe
[16:38:34] *** Joins: jaen (jaen@moz-FFBE072.bs.katowice.pl)
[16:39:06] <pnkfelix> kokarez: aha
[16:39:22] *** Quits: Ralith (ralith@moz-36466B9F.customer.broadstripe.net) (Ping timeout)
[16:39:25] <pnkfelix> kokarez: you are passing `main.o` twice in the gcc (and thus the ld) invocation
[16:39:32] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[16:39:33] *** Joins: Ms2ger (Ms2ger@6D563B37.79B9AF0D.F15B0BB3.IP)
[16:39:38] <pnkfelix> kokarez: and so you get the duplicate symbol error.
[16:40:05] <pnkfelix> kokarez: the first occurrence of `main.o` is in the $(LDFLAGS).  The second is in the $(CC) invocation you have to $(TARGET): $(OBJS)
[16:40:08] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[16:40:17] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:41:05] <pnkfelix> kokarez: I recommend removing the `-o src/main` and `src/main.o` parts of your definition of LDFLAGS.  They were necessary for rustc to use when it made its own linker invocation, but in this Makefile, you want to be able to use LDFLAGS in contexts other than that for building main
[16:41:10] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:41:51] <kokarez> pnkfelix: ok i'm stupid
[16:41:55] <kokarez> :D
[16:43:24] <kokarez> pnkfelix: When i get LDFLAGS i miss this part,
[16:43:58] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[16:44:51] <kokarez> pnkfelix: I read it three times, I must be blind
[16:45:17] <pnkfelix> kokarez: eh, this things get pretty unreadable, its easy to miss.
[16:45:27] <kokarez> pnkfelix: this are so $ORIGIN in it
[16:45:30] <kokarez> _-_
[16:45:31] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[16:46:00] *** Joins: Jesin (Jessin_@moz-6EF909D6.cc.lehigh.edu)
[16:46:21] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[16:46:38] <pnkfelix> kokarez: yeah I do not know what that is.  It is not part of the -Z print-link-args output that I get on Mac OS X.
[16:47:04] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[16:47:04] *** ChanServ sets mode: +ao dherman dherman
[16:48:03] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Ping timeout)
[16:48:32] *** Quits: vodik (simon@moz-17D883D9.net.uwaterloo.ca) (Quit: class)
[16:48:58] *** Joins: Skif (emschwar@moz-D781D8AA.hsd1.co.comcast.net)
[16:50:03] *** Quits: elifrey (peripateti@moz-B5928FE2.hsd1.wa.comcast.net) (Quit: WeeChat 0.4.0)
[16:50:12] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[16:50:12] *** ChanServ sets mode: +o tjc
[16:50:36] <tjc> jack nmatsakis acrichto: I'll probably be a few minutes late for triage mtg but I'm on the way
[16:50:40] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: Places to go, people to annoy)
[16:50:59] <luisbg> is there some document out there with code examples of how Rust tasks work? (including do spawn, channels, sending/receiving messages, etc...)
[16:51:03] <kokarez> pnkfelix: I've replace it without probleme, so...
[16:51:04] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[16:51:25] <luisbg> trying to wrap my brain aound how Servo uses these tasks extensively
[16:51:31] <luisbg> s/aound/around
[16:52:11] *** Joins: riley (riley@8BA43816.9AA11D69.65DDFA89.IP)
[16:52:26] <mcpherrin> luisbg http://static.rust-lang.org/doc/master/tutorial-tasks.html would be the place to start
[16:53:17] <luisbg> mcpherrin, I should re-read the tutorial and all the other official documents now that the main concepts are solidified in my head :)
[16:53:18] <luisbg> mcpherrin, thanks
[16:54:54] *** Joins: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[16:55:05] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[16:57:46] *** Quits: Ms2ger (Ms2ger@6D563B37.79B9AF0D.F15B0BB3.IP) (Ping timeout)
[17:00:07] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[17:00:17] *** Quits: Skif (emschwar@moz-D781D8AA.hsd1.co.comcast.net) (Client exited)
[17:00:25] *** Quits: pnkfelix (pnkfelix@A34AB32F.6B30872B.A515248C.IP) (Quit: Leaving.)
[17:01:23] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:01:23] *** ChanServ sets mode: +ao brson brson
[17:01:50] *** Quits: maik (maik@moz-82B7232D.dip0.t-ipconnect.de) (Ping timeout)
[17:02:29] <olsonjeffery> ugh. c# and its inferior generic constraint syntax
[17:02:30] <doomlord_> what does servo do at the minute
[17:02:37] *** Joins: skade (skade@moz-F00266FA.dip0.t-ipconnect.de)
[17:03:21] <doomlord_> is it worth a rust enthusiast taking a look
[17:04:27] <olsonjeffery> doomlord_: it passes ACID1, i think
[17:04:38] <olsonjeffery> not much UI chrome.. not much of the usual stuff you expect from a browser
[17:05:05] <olsonjeffery> doomlord_: you could always inquire in #servo, as well
[17:06:31] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[17:06:31] *** ChanServ sets mode: +o tjc
[17:06:42] *** Joins: pnkfelix (pnkfelix@A34AB32F.6B30872B.A515248C.IP)
[17:07:02] *** Quits: jstevans1 (Instantbir@31D71468.EBD92228.DDE5D3F6.IP) (Ping timeout)
[17:07:26] <doomlord_> ok i will add to my lurk-list
[17:08:13] *** Joins: jstevans (Instantbir@31D71468.EBD92228.DDE5D3F6.IP)
[17:09:00] *** Joins: Skif (emschwar@moz-D781D8AA.hsd1.co.comcast.net)
[17:09:47] *** Joins: Jessin (Jessin_@moz-6EF909D6.cc.lehigh.edu)
[17:10:13] *** Quits: Jesin (Jessin_@moz-6EF909D6.cc.lehigh.edu) (Ping timeout)
[17:11:21] *** Quits: Jessin (Jessin_@moz-6EF909D6.cc.lehigh.edu) (Quit: Leaving)
[17:11:42] *** Joins: Jesin (Jessin_@moz-6EF909D6.cc.lehigh.edu)
[17:12:19] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[17:12:46] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[17:13:40] *** Joins: Ms2ger (Ms2ger@9D0A393.CB23CDC6.3773EA9F.IP)
[17:13:57] *** Quits: Skif (emschwar@moz-D781D8AA.hsd1.co.comcast.net) (Client exited)
[17:14:20] *** Joins: jensn (jensn@moz-2B3A7EE9.mobileonline.telia.com)
[17:23:15] *** Joins: aeqwa (aeqwa@moz-6BB82E64.dsl.tropolys.de)
[17:24:38] *** Joins: pcwalton (pcwalton@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:24:38] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:25:01] <pcwalton> I apologize for the chronic lateness to the triage
[17:27:28] *** Quits: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[17:27:37] <nejucomo> Is it possible / weird to have: let result = do myvec.iter().map |x| { â€¦ }
[17:27:48] *** Quits: jensn (jensn@moz-2B3A7EE9.mobileonline.telia.com) (Quit: jensn)
[17:28:00] <nejucomo> -rather than: let result = myvec.iter().map( |x| { â€¦ } )
[17:28:04] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[17:29:05] <Luqman> nejucomo: i usually only use the second way if the closure is something small i.e |x| x.foo()
[17:29:19] *** Joins: five (five@moz-F45C65F8.v4.ngi.it)
[17:30:14] *** Quits: erickt (Adium@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[17:30:47] *** Joins: jensnockert (jensnocker@moz-2B3A7EE9.mobileonline.telia.com)
[17:31:16] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[17:31:16] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/PIkpuQ
[17:31:16] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[17:31:35] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[17:31:44] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[17:31:51] *** Joins: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP)
[17:32:34] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[17:33:26] *** Joins: canhtak (jeremy@moz-76A9D6A7.wl.t.ulaval.ca)
[17:33:55] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[17:36:12] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[17:36:12] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Z-oGJw
[17:36:12] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[17:36:16] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[17:36:16] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/EYbJ7g
[17:36:16] <ghrust> 13rust/06auto 14f2222ae 15Alex Crichton: Ensure that skipped items aren't encoded...
[17:36:16] <ghrust> 13rust/06auto 140996cc3 15bors: auto merge of #9484 : alexcrichton/rust/fix-cfg-inner-item, r=pcwalton...
[17:36:17] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[17:37:33] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[17:38:02] <engla> nejucomo: yes it is possible
[17:38:12] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[17:38:55] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[17:39:41] *** Joins: jstevans1 (Instantbir@31D71468.EBD92228.DDE5D3F6.IP)
[17:39:53] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[17:40:17] *** Quits: jstevans (Instantbir@31D71468.EBD92228.DDE5D3F6.IP) (Ping timeout)
[17:41:43] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[17:44:14] *** Quits: jstevans1 (Instantbir@31D71468.EBD92228.DDE5D3F6.IP) (Ping timeout)
[17:44:15] *** Joins: jstevans (Instantbir@moz-C12C878C.bootp.virginia.edu)
[17:44:42] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[17:45:10] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[17:45:33] *** Joins: jstevans1 (Instantbir@73DD83A6.C325DF16.DDE5D3F6.IP)
[17:46:11] *** Quits: jstevans (Instantbir@moz-C12C878C.bootp.virginia.edu) (Ping timeout)
[17:46:16] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[17:46:16] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 140996cc3 to 146f991a2: 02http://git.io/N3iJvQ
[17:46:16] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[17:46:17] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[17:46:17] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/OUy76Q
[17:46:17] <ghrust> 13rust/06auto 14d209717 15Brian Anderson: std::rt: Implement task yielding. Fix a starvation problem
[17:46:17] <ghrust> 13rust/06auto 14c486634 15bors: auto merge of #9507 : brson/rust/sched, r=alexcrichton...
[17:46:18] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[17:46:33] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Client exited)
[17:46:55] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[17:47:00] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[17:47:16] <cmr> brson: can you make ghrust spew in #rust-internals instead of here?
[17:49:17] *** Quits: jstevans1 (Instantbir@73DD83A6.C325DF16.DDE5D3F6.IP) (Ping timeout)
[17:49:39] *** Joins: jstevans (Instantbir@moz-FD8508EE.bootp.virginia.edu)
[17:51:22] *** Quits: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP) (Ping timeout)
[17:51:56] *** Joins: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP)
[17:52:11] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Input/output error)
[17:52:18] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[17:55:51] *** Joins: sw17ch (sw17ch@moz-39D8564F.wndsny.tds.net)
[17:55:52] *** Joins: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com)
[17:57:24] *** Quits: five (five@moz-F45C65F8.v4.ngi.it) (Ping timeout)
[17:59:05] *** Quits: Jesin (Jessin_@moz-6EF909D6.cc.lehigh.edu) (Quit: Leaving)
[18:01:20] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Ping timeout)
[18:02:13] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[18:04:07] *** Quits: pnkfelix (pnkfelix@A34AB32F.6B30872B.A515248C.IP) (Quit: Leaving.)
[18:05:19] *** Quits: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP) (Ping timeout)
[18:05:52] *** Joins: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP)
[18:06:20] *** Quits: pcwalton (pcwalton@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: pcwalton)
[18:06:21] *** Quits: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Quit: Leaving.)
[18:07:54] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[18:08:10] <brson> cmr: ok
[18:08:11] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[18:08:52] *** Joins: tcsc (tcsc@E2FC0D91.3B4878EF.EFCBE50E.IP)
[18:09:21] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[18:09:21] <ghrust> 01[13rust01] 15none pushed 6 new commits to 06master: 02http://git.io/9d77Hw
[18:09:21] <ghrust> 13rust/06master 1423a067d 15Florian Hahn: Rename from_utf8 to from_bytes again
[18:09:21] <ghrust> 13rust/06master 14252c6db 15David Creswick: Fix visibility of digest implementations
[18:09:22] <ghrust> 13rust/06master 14d8957e6 15Steven Fackler: Some struct visibility fixes
[18:09:24] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[18:09:35] *** Quits: tcsc (tcsc@E2FC0D91.3B4878EF.EFCBE50E.IP) (Quit: bye!)
[18:09:43] *** Joins: tcsc (tcsc@E2FC0D91.3B4878EF.EFCBE50E.IP)
[18:10:32] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[18:11:28] <steveklabnik> woot, fixed up https://github.com/mozilla/rust/pull/9522
[18:13:06] <cmr> steveklabnik: typo in the PR message
[18:13:14] *** Quits: eevee (eevee@moz-59EA9CA5.evrt.wa.frontiernet.net) (Connection reset by peer)
[18:13:43] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[18:13:50] *** Joins: eevee (eevee@moz-59EA9CA5.evrt.wa.frontiernet.net)
[18:14:09] *** Quits: fabiand (fabiand@moz-3D3036FF.adsl.alicedsl.de) (Quit: Verlassend)
[18:14:09] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[18:14:28] <steveklabnik> cmr: dammit
[18:14:37] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[18:15:00] <steveklabnik> cmr: whats the typo?
[18:15:05] <cmr> steveklabnik: std::opts
[18:15:37] <steveklabnik> ohhhh
[18:15:39] <steveklabnik> lol
[18:16:04] <steveklabnik> so when I did a startup long ago, it was 3d printing related
[18:16:12] <steveklabnik> there's a company (not mine) called Objet
[18:16:28] <steveklabnik> it was so hard not to type 'object', imagine how many tens of thousands of times i've typed that word
[18:16:34] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[18:17:35] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[18:17:44] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[18:18:09] <steveklabnik> cmr: fixed
[18:18:22] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[18:19:55] <cmr> steveklabnik: thanks :)
[18:20:24] *** Joins: jviereck (Adium@moz-9219FCD.ethz.ch)
[18:20:52] <steveklabnik> thank my insomnia
[18:20:53] <steveklabnik> haha
[18:21:04] <brson> 0.8 rc https://gist.github.com/brson/6718346
[18:21:11] <Seldaek> steveklabnik: working for zeu french or quÃ©becois? :p 
[18:21:18] <brson> i'm going to test the installer on windows then make a mailing list post
[18:21:24] <steveklabnik> awesome
[18:21:29] <kmc> nice
[18:21:40] <steveklabnik> Seldaek: french. :) I'm a big fan of french philosophy...
[18:21:42] <jensnockert>  <3
[18:21:48] <Seldaek> brson: hurray! I'll test windows too
[18:21:59] <steveklabnik> also tenativley doing german too
[18:22:33] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[18:22:36] <Seldaek> steveklabnik: eh well, I guess that's like most people don't know the touristy stuff from where they live.. I am no french philosophy fan :p
[18:23:12] <tjc> philosophy is the #1 tourist attraction in France ;-)
[18:23:15] <steveklabnik> ha!
[18:23:30] <steveklabnik> i am a disciple of Deleuze currently, but this isn't #stevelovesphilosophy, so that's all I'll say
[18:23:33] <steveklabnik> also foucault etc
[18:24:40] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[18:24:53] <sw17ch> steveklabnik: thanks for the catch --> https://twitter.com/steveklabnik/status/383295034910461952
[18:25:05] <steveklabnik> no problem, i did it myself recently
[18:25:50] <tjc> well, people can start a #rust Freenode channel too if they want :-)
[18:25:56] <Seldaek> steveklabnik: hehe, alright.. I do speak french but in belgium we prefer beer to philosophy :P
[18:25:59] <steveklabnik> i went in there and there was nobody
[18:26:02] <kmc> there's #rust-lang or something
[18:26:04] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:26:10] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[18:26:16] <steveklabnik> Seldaek: ah! I've only spent 36 hours in Belgium but I realy liked it. and <3 the beer
[18:26:22] <bstrie> tjc: we've had one for a long time. mostly we just point people to here
[18:26:35] <tjc> bstrie: heh
[18:26:43] <kmc> I wish we wouldn't conflate "nice" with "helpful"
[18:26:50] <steveklabnik> kmc: +++
[18:27:06] <steveklabnik> a friend of mine wrote an entire graduate paper about how 'nice' in ruby land doesn't actually mean 'nice'
[18:27:09] <kmc> I like "nice" and it's definitely an underappreciated virtue in OSS
[18:27:13] <steveklabnik> i would prefer rust be helpful and not 'nice'
[18:27:18] <kmc> but it's not the same as helpful, and sometimes directly at odds
[18:27:21] <steveklabnik> but nice would be better than 'nice' :)
[18:27:26] <tjc> I would prefer it to be both
[18:27:36] <bstrie> I would rather just be nice and not helpful
[18:27:37] <tjc> and I think a sufficiently skilled person can always be helpful while also being nice
[18:27:38] <steveklabnik> yeah, i mean not fake nice, but real nice.
[18:27:42] <bstrie> but that shouldn't be a surprise to anyone
[18:27:57] <tjc> (not that we have to be nice to trolls, spambots, etc., obviously.)
[18:28:06] <indirect> steveklabnik: maybe you need a word that isn't 'nice' :)
[18:28:19] <Seldaek> brson: rustc --version - c:\Program Files (x86)\Rust\bin\rustc.exe 0.8 ! :)
[18:28:27] <kmc> tjc: I think it's more about the community than individual people... #haskell has lots of people who are nice and try to be helpful but they step all over each other trying to explain stuff, rather than working together
[18:28:35] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:28:38] <tjc> kmc: heh
[18:29:10] <kmc> #haskell gets dozens of the same newbie questions every day, and I was the only person with any interest in having a community edited consensus FAQ about these
[18:29:13] *** Joins: maik (maik@moz-82B7232D.dip0.t-ipconnect.de)
[18:29:19] <steveklabnik> :)
[18:29:26] <bstrie> kmc: I've solved that problem by adopting a policy of forcing strcat to answer every single question
[18:29:29] <steveklabnik> hahaha
[18:29:30] <tjc> kmc: interesting. I quit #haskell long before it got that big, but I'm surprised people didn't want to have a FAQ
[18:29:30] <kmc> haha
[18:29:46] <indirect> I am ++ on helpful being better than nice after experiencing lots of nice... as long as it's actually helpful over nice instead of rudeness being considered fine :P
[18:29:49] *** Joins: vodik (simon@CD6C8A37.F44F49AA.D02BABA9.IP)
[18:30:02] <tjc> (to me it's perfectly nice to link somebody to the FAQ if it answers their question, rather than explaining it again for them)
[18:30:03] <kmc> right
[18:30:12] <tjc> (without getting all "RTFM N00B")
[18:30:25] <kmc> it's a fine line for me because I don't want to come out on the side of the people who think that being a jerk is the key to OSS success
[18:30:38] <kmc> and there are a lot of those people too :/
[18:30:38] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[18:30:42] <Seldaek> brson: it compiles fn main () {}, ship ip :p
[18:30:43] *** Joins: slackito (slackito@moz-7779E4A6.dyn.user.ono.com)
[18:30:55] <brson> Seldaek: yay!
[18:31:05] <indirect> kmc: exactly... being a jerk needs to be actively not okay, and then I value helpfulness over niceness
[18:31:09] *** Joins: sergi (textual@moz-DB55470C.upc-a.chello.nl)
[18:31:34] <sw17ch> I, personally, believe that the interactive nature of IRC makes it more useful than a FAQ.
[18:31:47] <indirect> sw17ch: sure.. so ask your question after you read the faq
[18:31:49] <bstrie> sw17ch: the problem is that irc doesn't scale
[18:31:50] <tjc> "niceness" is indeed a vague word
[18:31:54] <sw17ch> Even if it's more work and noise for everyone involved.
[18:32:07] <tjc> when I use it I mean being genuine, and not, like, being a T-Mobile customer service rep reading off a script
[18:32:07] <bstrie> it's like generational garbage collection
[18:32:15] <bstrie> you send all users to the faq first
[18:32:16] <sw17ch> bstrie: it's true. #haskell and haskell-cafe both hit a noise level that made it unproductive to participate in after a while -- at least consistently.
[18:32:20] <bstrie> then the ones that survive you can answer manually :)
[18:32:22] <kmc> #haskell is weird too because the people who talk the most tend to be excited beginners and not actually the most skilled / experienced people
[18:32:36] <steveklabnik> sw17ch: i hit that with ruby-talk and rubyonrails-talk as well
[18:32:46] <kmc> and they give a lot of wrong / unhelpful answers
[18:32:47] <bstrie> <-- excited beginner and not skilled / experienced
[18:33:05] *** Joins: judder (maradukewa@1BB87CE.111872A8.950D3BB5.IP)
[18:33:06] <kmc> I don't think we have that problem at all
[18:33:09] <bstrie> or rather, excited beginner who has been in this channel for two years :P
[18:33:12] <kmc> new language vs. old
[18:33:14] <olsonjeffery> its interesting to encounter the people who are deep into rust projects and have never been on irc
[18:33:18] <olsonjeffery> they pop up on reddit a bit
[18:33:22] <olsonjeffery> and/or the ML
[18:33:24] <sw17ch> It's a hard problem. I really enjoy helping people, but yeah -- once one hits the 'proficient' level, participating in the less experienced community can get hard.
[18:33:25] <cmr> olsonjeffery: yeah
[18:33:40] <bstrie> we also need to clean up the web resources
[18:33:43] <bstrie> stack overflow especialy
[18:33:46] <indirect> I think that is a consistent problem... I've had to ask people to stop answering people's questions on IRC after they have consistently given factually wrong answers in an authoritative voice over and over :(
[18:33:46] <bstrie> once we get to 1.0
[18:33:51] <steveklabnik> bstrie: SO: yes!
[18:33:58] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Client exited)
[18:34:09] <sw17ch> I've thought about trolling through IRC logs in different places, picking up key themes, and blogging about them.
[18:34:22] <kmc> indirect: and that's not allowed in channels which value niceness over helpfulness in all cases
[18:34:40] <bstrie> you people have a very strange definition of niceness
[18:34:50] <steveklabnik> sw17ch: i've been thinking about blogging a lot. having a very active blog community helped rails a lot in the beginning, but also caused it to have bad docs
[18:34:56] <steveklabnik> because everything was on random blogs rather than in the docs
[18:35:15] <bstrie> "please stop giving incorrect answers to questions" <-- nice
[18:35:16] <cmr> steveklabnik: well we had/have that problem too
[18:35:18] <indirect> bstrie: it's more like "never create conflict", which is... nice, I guess. but frustrating sometimes :P
[18:35:20] <sw17ch> steveklabnik: good point. i've *also* considered making my 'blog' a website that tries to be a reference manual more than a blog.
[18:35:24] <steveklabnik> cmr: yeah. it's not that bad yet.
[18:35:32] <cmr> steveklabnik: it's not that bad *anymore*, you mean :P
[18:35:36] <steveklabnik> sw17ch: i actually started building http://wiki.steveklabnik.com/ for that purpose
[18:35:37] <indirect> lol
[18:35:41] <cmr> It was awful when I was getting started.
[18:35:41] <sw17ch> ooo, good idea
[18:35:47] <bstrie> indirect: that's not what nice means! that's passiveness!
[18:35:48] <steveklabnik> cmr: haha! truth
[18:35:55] <kmc> "never create conflict" is such a terrible rule; it just entrenches whoever's currently in power
[18:35:59] <steveklabnik> sw17ch: i will be sharing my setup soon, it's just markdown files
[18:36:05] <steveklabnik> sw17ch: markdown, pandoc, and make
[18:36:20] <cmr> steveklabnik: I'm almost done adding syntax highlighting blocks to RfR
[18:36:21] <tjc> kmc++
[18:36:26] <sw17ch> that's actually very nearly what i want
[18:36:29] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Client exited)
[18:36:31] <sw17ch> if not precisely
[18:36:32] *** Quits: jstevans (Instantbir@moz-FD8508EE.bootp.virginia.edu) (Ping timeout)
[18:36:39] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[18:36:42] <steveklabnik> sw17ch: cool. i'll do that later today and ping you, then
[18:36:55] <steveklabnik> i have it for 'rust for rubyists', I just haven't migrated anything public over yet
[18:37:00] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[18:37:18] <kmc> I wonder if some of the people studying OSS community structure & development in an academic context are involved or would want to be involved in the development of the Rust community
[18:37:51] <bstrie> just today I told someone in here to not mock the spelling errors of a non-native speaker. I was nice about it, and the person apologized on their own accord
[18:37:52] <steveklabnik> kmc: i actually literally JUST got off the phone with one of them
[18:38:05] *** Joins: Archer (Archer@moz-69689716.bb.online.no)
[18:38:07] <steveklabnik> kmc: to talk about rails. i did mention rust, maybe they'll end up checking it ou.
[18:38:12] <kmc> cool
[18:38:13] <bstrie> so don't conflate "don't create conflict" with "being a decent human being", please :)
[18:38:24] *** Quits: huseby (huseby@19BD73A1.5D8BCA3A.A0C1B52F.IP) (Quit: Leaving)
[18:38:27] <steveklabnik> bstrie: +1
[18:38:33] <tjc> bstrie: Yes; to me, "nice" includes asking people in a way that assumes good faith to uphold the code of conduct, but then making sure they're excluded if they express unwillingness to play by the same rules as everyone else
[18:38:39] <kmc> yep
[18:38:41] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[18:39:02] *** Parts: mhoye (mhoye@moz-C14EAE67.vs.heavycomputing.ca) ()
[18:39:02] *** Quits: ozten (ozten@19BD73A1.5D8BCA3A.A0C1B52F.IP) (Quit: ozten)
[18:39:03] <tjc> To paraphrase a certain historical figure, the absence of tension isn't the same thing as the presence of learning and productive discussion
[18:39:03] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Quit: Leaving)
[18:39:05] <sw17ch> tjc: that sort of good faith is also inclusive which I think is a key component of being 'nice'
[18:39:19] <kmc> the fact that we have a code of conduct at all means we are not terminally averse to conflict
[18:39:24] <tjc> sw17ch: Well, I believe in excluding people based on behaviors rather than on traits
[18:39:41] <tjc> I want anybody who's willing to follow the code of conduct to be included
[18:39:49] <tjc> but if they don't want to do that, I don't feel like excluding them is a terrible thing
[18:39:50] <steveklabnik> tjc: +++++++++++
[18:39:55] <tjc> Fortunately, this hasn't come up as an issue very often.
[18:39:56] <tjc> (So far.)
[18:39:58] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[18:39:59] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[18:40:05] <sw17ch> tjc: excellent distinction
[18:40:17] <sw17ch> and agreed
[18:41:06] <kmc> anyway a PL which has community-building experts involved from the beginning would be a really interesting experiment
[18:41:13] <tjc> that would be really interesting, yeah
[18:41:24] <kmc> cause I don't generally expect programmers and PL designers to be experts at that
[18:41:29] <tjc> No
[18:41:35] <tjc> They might *think* they're experts in it ;-)
[18:41:35] <kmc> i definitely don't know much about it :)
[18:41:46] <tjc> I know enough to know I don't know much
[18:41:52] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[18:41:54] <kmc> tjc: programmers are experts at *everything* right? ;)
[18:41:55] <tjc> and I've taken at least one graduate class just on that, soâ€¦ still
[18:41:57] <tjc> kmc: but of course
[18:42:11] <cmr> I didn't even know community-building was a thing one could be an expert in
[18:42:13] <steveklabnik> heh
[18:42:16] <steveklabnik> it can be.
[18:42:21] <cmr> I thought communities were grown, not built.
[18:42:30] <kmc> "that might explain why so many of them suck"
[18:42:37] <steveklabnik> cmr: a garden still has a gardener
[18:42:39] <SiegeLord> Just because they are grown, doesn't mean there isn't a grover ;)
[18:42:44] <SiegeLord> *grower
[18:42:48] <cmr> this is true
[18:42:58] <bstrie> dammit, turns out this really was #stevelovesphilosophy this whole time
[18:43:08] <cmr> heh
[18:43:38] <jdm> ooo, fun backscroll to read through
[18:44:05] <sw17ch> Speaking to the FAQ stuff from earlier, maybe something like a FAQ bot that can be invoked?
[18:44:21] <cmr> I wouldn't mind an infobot
[18:44:22] <sw17ch> faqbot: owned pointers, [user needing help]
[18:44:41] *** Quits: sergi (textual@moz-DB55470C.upc-a.chello.nl) (Quit: Computer has gone to sleep.)
[18:44:50] <tjc> sw17ch: we do have a FAQ on the wiki, but it's not very up-to-date
[18:44:55] <tjc> edits are very encouraged :-)
[18:44:59] <steveklabnik> bstrie: ;)
[18:45:02] <cmr> freenode/#javascript has one to great effect
[18:45:03] <kmc> I think we're at too early a stage and moving to fast to focus on a FAQ
[18:45:11] <kmc> just something to keep in mind
[18:45:12] <steveklabnik> kmc: ++
[18:45:18] <sw17ch> "hi, I'm faqbot, you've asked a question that's pretty common in this channel. In the interest of keeping things relevant and useful for everyone involved, [sw17ch] has asked that I point you at the following documentation. If you still have questions after referencing this, please feel free to continue the discussion in channel."
[18:45:34] <steveklabnik> ... WE COULD WRITE FAQBOT IN RUST
[18:45:36] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[18:45:36] <steveklabnik> :D
[18:45:46] <sw17ch> I'm a fan. :)
[18:45:48] <sw17ch> RustBot
[18:45:48] <tjc> as far as people studying community-building, there's this class at my former graduate program - http://www.ischool.berkeley.edu/courses/i290m-ocpp
[18:45:50] <bstrie> steveklabnik: start with an irc lib :)
[18:45:53] <sw17ch> like lambdabot
[18:45:56] <steveklabnik> bstrie: yup, seems good
[18:45:56] <kmc> many of the bits of Haskell that confuse beginners haven't changed in like 20 years
[18:46:01] <tjc> I could always drop one of the profs a line and suggest Rust as a project for students to drop in on
[18:46:01] <brson> hm, not sure I actually posses the rust signing key ...
[18:46:06] <steveklabnik> bstrie: i was already playing around with tcp for redis...
[18:46:07] <bstrie> haha
[18:46:34] <cmr> tjc: sounds really interesting
[18:46:41] <sw17ch> steveklabnik: I was thinking about writing bindings to libdnet as my first foray into a largish rust project.
[18:46:46] <strcat> brson: is there actually a Rust key? I always assumed graydon signed them with his own
[18:46:49] <steveklabnik> sw17ch: libdnet?
[18:46:55] <brson> strcat: there's a rust key
[18:46:57] <sw17ch> http://libdnet.sourceforge.net/
[18:46:59] <bstrie> tjc: that looks like a very interesting class
[18:47:01] <steveklabnik> neat
[18:47:02] <sw17ch> http://libdnet.sourceforge.net/dnet.3.txt
[18:47:07] <brson> strcat: that I'm supposed to possess
[18:47:07] *** Joins: fabiand (fabiand@moz-3D3036FF.adsl.alicedsl.de)
[18:47:15] <tjc> bstrie: I took a class that was similar, though not exactly the same.
[18:47:18] <sw17ch> what socket.h should have been, IMHO
[18:47:37] <tjc> bstrie: my project wasn't all that ambitious, though, a classmate and I interviewed the guy who started MusicBrainz and wrote a paper
[18:47:41] <steveklabnik> sw17ch: https://github.com/steveklabnik/redis/blob/master/src/example/main.rs <- as far as i got so far
[18:48:05] * sw17ch looking at dnet again realizes it's missing some things...
[18:48:55] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[18:49:04] <strcat> rust has enough tcp support to write an irc client
[18:49:17] <strcat> it's just an evil line-based protocol with 200 corner cases ;p
[18:49:44] <sw17ch> strcat: what do you feel is missing?
[18:49:48] <tjc> sounds like fun!
[18:50:58] <Ms2ger> strcat, just 200? Must be pretty simple
[18:51:10] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[18:51:22] <cmr> Ms2ger: you must work with the web. ;P
[18:51:26] <steveklabnik> http://tools.ietf.org/html/rfc1459.html
[18:51:28] <steveklabnik> only 65 pages!
[18:51:44] <bstrie> can I just draw some ascii art to implement this protocol
[18:51:49] <bstrie> someone start working on that macro
[18:51:55] <Ms2ger> cmr, D
[18:51:57] <steveklabnik> bstrie: have you heard of VIPR?
[18:52:00] <jdm> bstrie: :D
[18:52:00] <Ms2ger> cmr, :D*
[18:52:06] <bstrie> steveklabnik: nop
[18:52:38] <steveklabnik> bstrie: it's what... alan kay is doing these days? basically, they want an OS, userland + tooling in 10KLOC, so it's all DSL based. It actually takes in the TCP RFC and generates all the networking code...
[18:52:44] <sw17ch> steveklabnik: i believe that an IRC client is simpler than the server by an order of magnitude
[18:52:52] <steveklabnik> sw17ch: probably true
[18:53:01] <steveklabnik> sw17ch: especially for an infobot
[18:53:52] <bstrie> steveklabnik: ah, maybe I had heard of that but had forgotten the name. it sounds very hilarious
[18:53:59] <cmr> steveklabnik: link?
[18:55:06] <bstrie> I could do linux in less than 10kloc
[18:55:27] <steveklabnik> whoops, it's VPRI
[18:55:27] <bstrie> grep-and-replace s/\n//
[18:55:29] <steveklabnik> http://www.vpri.org/vp_wiki/index.php/Main_Page
[18:55:35] <cmr> Ahh
[18:55:45] <steveklabnik> main site is http://www.vpri.org/index.html
[18:55:45] <cmr> That explains why my googling was fruitless
[18:56:10] <steveklabnik> http://www.vpri.org/html/work/ifnct.htm is the specificness
[18:57:15] <cmr> steveklabnik: uhh, does the makefile generate HTML for the chapters? I'm only seeing it makes the ebooks.
[18:57:26] <steveklabnik> cmr: it does. there's a macro...
[18:57:28] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[18:57:48] <steveklabnik> https://github.com/steveklabnik/rust_for_rubyists/blob/master/Makefile#L35-L36
[18:57:54] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[18:57:57] *** Quits: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[18:58:06] *** Joins: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP)
[18:58:17] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[18:58:25] *** Quits: Tad (Tom@moz-C8B2B6F7.navalrp.co.uk) (Ping timeout)
[18:58:40] <cmr> steveklabnik: ok, making the html per-chapter works.
[18:58:43] <cmr> but it doesn't run itself
[18:58:50] <steveklabnik> 'run itself'?
[18:58:58] <cmr> `make` doesn't do it
[18:59:07] <cmr> I need to do make book/chapter-XX.html
[18:59:13] <steveklabnik> hmmm. yeah, I guess it's a dependency of the pdf and epub and such
[18:59:32] *** Joins: Tad (Tom@moz-C8B2B6F7.navalrp.co.uk)
[19:00:22] *** Quits: kkris (kkris@moz-CB70009.yourvserver.net) (Ping timeout)
[19:00:36] <steveklabnik> cmr: i expected 'all' to build 'site' which depends on CHAPTERS
[19:00:38] <cmr> http://i.imgur.com/eviiM8H.png \o/
[19:00:50] <steveklabnik> awesome!!!
[19:01:22] <steveklabnik> btw if anyone in here cares about access for rust for rubyists /msg me and i'll give you collaborator
[19:01:31] *** Parts: miza (miza@moz-908EA8DE.home.otenet.gr) ()
[19:01:40] <steveklabnik> i will fully open source it sometime
[19:01:48] *** Quits: k4nar (quassel@moz-F5EFF779.kimsufi.com) (Ping timeout)
[19:01:52] *** Joins: miza (miza@moz-908EA8DE.home.otenet.gr)
[19:01:54] *** Joins: k4nar (quassel@moz-F5EFF779.kimsufi.com)
[19:01:59] *** Quits: miza (miza@moz-908EA8DE.home.otenet.gr) (Quit: miza)
[19:02:02] <steveklabnik> maybe i'll do that for the 0.8 release...
[19:02:02] *** Quits: nkoep (nik@moz-48B03841.vpn.rwth-aachen.de) (Ping timeout)
[19:02:13] *** Joins: nkoep (nik@moz-48B03841.vpn.rwth-aachen.de)
[19:02:14] <steveklabnik> just gotta make sure the s3 keys aren't 
[19:02:17] <steveklabnik> in the history somewhere
[19:02:28] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[19:02:51] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Quit: Leaving)
[19:02:54] <cmr> steveklabnik: the only thing I noticed that needs updating is println(fmt!()) -> println!()
[19:03:00] <cmr> (with the new format! syntax)
[19:03:02] *** Joins: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr)
[19:03:26] <steveklabnik> cmr: ah! when did fmt! -> format! change, btw?
[19:03:26] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[19:03:34] <steveklabnik> i thought i tested the code with a compiler from a week ago
[19:03:50] <bstrie> has fmt! actually been removed, or is it still sticking around?
[19:04:00] <acrichto> it's a work in progress :)
[19:04:02] <mcpherrin> rusti: fmt!("hi")
[19:04:03] -rusti- ~"hi"
[19:04:06] *** Joins: Skif (emschwar@moz-D781D8AA.hsd1.co.comcast.net)
[19:04:12] <acrichto> there are still bugs blocking full-on usage of format!
[19:04:47] <steveklabnik> cmr: let me know if you're fixing them or if i should, i'm gonna check the history about my keys
[19:04:54] <steveklabnik> i dont THINK i did that but i want to be safe
[19:05:00] *** Quits: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[19:05:02] *** Joins: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP)
[19:05:18] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[19:05:24] <cmr> steveklabnik: a while ago
[19:05:28] <cmr> steveklabnik: but yeah, fmt is still around.
[19:05:45] <steveklabnik> ahh that'd be why then
[19:05:52] <cmr> It actually has docs now though! http://static.rust-lang.org/doc/master/std/fmt/index.html
[19:05:53] <acrichto> I have a patch to remove printf{,ln}, but I was waiting until after 0.8
[19:06:23] *** Quits: jaen (jaen@moz-FFBE072.bs.katowice.pl) (Ping timeout)
[19:06:34] <steveklabnik> woot
[19:06:45] *** Joins: kkris (kkris@moz-CB70009.yourvserver.net)
[19:06:56] *** Quits: Tad (Tom@moz-C8B2B6F7.navalrp.co.uk) (Ping timeout)
[19:07:30] *** Joins: Tad (Tom@moz-C8B2B6F7.navalrp.co.uk)
[19:10:04] *** Quits: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP) (Quit: tikue_)
[19:11:01] <steveklabnik> awesome, i checked the history, nothing that actually NEEDS to be private
[19:11:09] <steveklabnik> so yeah, i'll open that today for the 0.8 release :)
[19:11:15] <cmr> awesome!
[19:11:41] <steveklabnik> i wonder if it should support HEAD too....
[19:11:53] <strcat> quick, steveklabnik's credit card info is used in the sample on page 4
[19:11:53] *** Quits: Skif (emschwar@moz-D781D8AA.hsd1.co.comcast.net) (Connection reset by peer)
[19:11:58] <steveklabnik> lol
[19:12:02] *** Joins: Skif (emschwar@moz-D781D8AA.hsd1.co.comcast.net)
[19:12:06] *** Joins: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP)
[19:12:58] *** Quits: kkris (kkris@moz-CB70009.yourvserver.net) (Ping timeout)
[19:13:01] *** Joins: kkris (kkris@moz-CB70009.yourvserver.net)
[19:13:27] *** Quits: xales (xales@moz-7DEA692E.forevernothing.com) (Ping timeout)
[19:13:27] *** Quits: kokarez (Mibbit@510621FB.DF3CA0D0.BA2F4534.IP) (Ping timeout)
[19:13:40] *** Joins: xales (xales@moz-7DEA692E.forevernothing.com)
[19:13:57] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[19:14:49] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[19:14:52] *** Quits: vodik (simon@CD6C8A37.F44F49AA.D02BABA9.IP) (Quit: quick test)
[19:15:17] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[19:15:22] <steveklabnik> cmr: why did you use the ~~~ form when now in the rust docs we use ```rust?
[19:15:24] <steveklabnik> just curious
[19:15:41] <cmr> steveklabnik: we don't use pandoc in the rust docs anymore
[19:15:43] <strcat> we use ``` because ~~~ probably doesn't exist with sundown
[19:15:46] <steveklabnik> ahhh yeah
[19:15:47] <steveklabnik> right
[19:15:49] <strcat> pandoc has both
[19:15:51] <steveklabnik> :+1:
[19:15:55] <olsonjeffery> huh
[19:15:57] <olsonjeffery> i used ~~~
[19:16:35] *** Quits: Archer (Archer@moz-69689716.bb.online.no) (Ping timeout)
[19:16:55] *** Quits: charmander (charmander@8B522D39.982343C0.37A78CD5.IP) (Quit: leaving)
[19:17:05] *** Quits: Seldaek (seld@moz-5DEA7688.ch) (Ping timeout)
[19:17:08] *** Quits: reed (reed@tech.monkey) (Ping timeout)
[19:17:44] *** Joins: Seld (seld@moz-5DEA7688.ch)
[19:17:46] *** Quits: Skif (emschwar@moz-D781D8AA.hsd1.co.comcast.net) (Client exited)
[19:17:50] *** Joins: reed (reed@tech.monkey)
[19:18:22] *** Joins: Archer (Archer@moz-69689716.bb.online.no)
[19:19:03] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[19:19:17] <mikezaby> i think this article should be in tutorial
[19:19:19] <mikezaby> http://pcwalton.github.io/blog/2013/03/09/which-pointer-should-i-use/
[19:19:23] *** Joins: Skif (emschwar@moz-D781D8AA.hsd1.co.comcast.net)
[19:19:51] <mikezaby> i hadn't understand the concept of boxes in rust
[19:19:54] <mikezaby> until now
[19:19:54] <mikezaby> :p
[19:20:13] <strcat> the tutorial attempts to explain that ~ is only needed when making a recursive data structure
[19:21:06] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[19:21:18] <SiegeLord> So... in C/C++ you could hold multiple references to mutable data
[19:21:26] <SiegeLord> What's the way to emulate the feature in Rust?
[19:21:27] <mikezaby> at tutorial i think this isnt't clean
[19:21:34] <steveklabnik> mikezaby: nothing is ;)_
[19:21:45] *** Quits: reed (reed@tech.monkey) (Ping timeout)
[19:21:45] <steveklabnik> SiegeLord: arc is only immutable data, ya?
[19:21:46] <strcat> the tutorial also explains the full semantics
[19:21:53] <strcat> it doesn't gloss over details
[19:21:56] *** Joins: reed (reed@tech.monkey)
[19:22:01] <strcat> if it does, people will complain about that instead
[19:22:17] <cmr> SiegeLord: @mut and maybe RcMut or similar are the only way to have multiple references to mutable data, and be able to mutate through them.
[19:22:34] <strcat> if covering only common stuff is okay, the tutorial doesn't need to cover ~ and @
[19:22:41] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Quit: Leaving)
[19:22:43] <strcat> because usually you just use plain old values
[19:22:43] <SiegeLord> cmr: How about without the second part? Like read-only references to mutable data?
[19:22:58] <cmr> SiegeLord: for that you can just use a borrowed pointer
[19:22:59] <strcat> you *only* end up needing ~ when you have something recursive, to stop it from being infinite size
[19:23:05] <cmr> But you can't mutate while it's borrowed
[19:23:15] <SiegeLord> Yeah, I still want to be able to mutate
[19:23:22] <SiegeLord> Just not necessarily through those references
[19:23:24] <cmr> Ah
[19:23:29] <cmr> Well, &const used to be that.
[19:23:29] <strcat> read-only references to mutable data were removed because no one demonstrated use cases
[19:23:34] <steveklabnik> strcat: sounds like you should blog about it. ;)
[19:23:50] <strcat> steveklabnik: well I wrote those sections in the tutorial ;p
[19:24:03] <SiegeLord> I'm not really asking for a language feature, but how to get it via the library features etc
[19:24:14] <strcat> no one has edited them since then...
[19:24:27] <strcat> 4-5 months?
[19:24:32] *** Quits: Skif (emschwar@moz-D781D8AA.hsd1.co.comcast.net) (Client exited)
[19:24:40] <cmr> SiegeLord: it's not possible to express without raw pointers or @mut
[19:24:51] <strcat> or RcMut
[19:24:59] <SiegeLord> It sounds like it might be tricky to implement
[19:25:00] *** Quits: Caseus (bacon@moz-9F046088.members.linode.com) (Ping timeout)
[19:25:11] *** Joins: Caseus (bacon@moz-9F046088.members.linode.com)
[19:25:21] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[19:25:21] *** Quits: tcsc (tcsc@E2FC0D91.3B4878EF.EFCBE50E.IP) (Quit: computer sleeping)
[19:25:28] <SiegeLord> With all the Send/Freeze etc stuff... I guess RcMut might be the best
[19:25:28] <strcat> &const was next to impossible to use anywhere due to the necessary restrictions
[19:25:39] <strcat> RcMut is broken in regards to Freeze
[19:25:49] *** Joins: Skif (emschwar@moz-D781D8AA.hsd1.co.comcast.net)
[19:25:55] <strcat> I'm going to have to switch it to always requiring Freeze
[19:25:55] *** Joins: vodik (simon@moz-9745F68B.net.uwaterloo.ca)
[19:26:14] <strcat> because you can't make Send/Freeze pass through * ptrs
[19:26:15] <engla> Isn't it Rc that's broken w.r.t Freeze?
[19:26:25] <strcat> engla: oh right, just Rc
[19:26:33] <strcat> RcMut is never Freeze
[19:26:35] *** Quits: maik (maik@moz-82B7232D.dip0.t-ipconnect.de) (Ping timeout)
[19:26:37] <strcat> so it doesn't matter
[19:26:38] *** Quits: Archer (Archer@moz-69689716.bb.online.no) (Ping timeout)
[19:26:59] *** Quits: Seld (seld@moz-5DEA7688.ch) (Ping timeout)
[19:27:04] *** Joins: Seld (seld@moz-5DEA7688.ch)
[19:27:23] *** Joins: haxney (dan@moz-424CB7EB.cs.brown.edu)
[19:27:47] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[19:28:12] *** Quits: dolphinling (andrew@moz-80A1E448.uvm.edu) (Quit: leaving)
[19:28:28] <haxney> I'm writing benchmarks using rustpkg which need to read some test files. What is a good place to put the files and how do I reference them within "bench.rs"?
[19:28:40] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Ping timeout)
[19:29:15] *** Joins: ozten (ozten@19BD73A1.5D8BCA3A.A0C1B52F.IP)
[19:29:29] *** Joins: Lovot_ (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[19:29:35] <cmr> haxney: afaik rustpkg won't run benchmarks?
[19:30:08] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[19:30:33] <cmr> I'd put the files either next to or as a subdirectory of the source and use a relative path.
[19:30:36] <haxney> cmr: no? One of its errors is "Try naming a crate `main.rs`, `lib.rs`, `test.rs`, or `bench.rs`."
[19:30:40] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[19:30:47] *** Joins: Jesin (Jessin_@moz-394702A3.cc.lehigh.edu)
[19:31:04] *** Quits: valenting (Thunderbir@C6866972.77435D89.FB866788.IP) (Ping timeout)
[19:31:21] *** Joins: huseby (huseby@19BD73A1.5D8BCA3A.A0C1B52F.IP)
[19:31:29] *** Joins: valenting (Thunderbir@C6866972.77435D89.FB866788.IP)
[19:32:13] <haxney> cmr: So put the files in "ROOT/src/proj/samples" or "ROOT/samples" and use relative paths? Don't the compiled files get put somewhere different from the source files?
[19:32:17] *** Quits: fabiand (fabiand@moz-3D3036FF.adsl.alicedsl.de) (Quit: Verlassend)
[19:32:27] <cmr> haxney: looks like it will build them, but it won't run them yet.
[19:32:49] <mikezaby> i heard that exist a debian/ubuntu repo for daily build of rust?
[19:32:52] <mikezaby> is this true?
[19:32:53] *** Joins: darkf (darkf@moz-F9058B8A.net)
[19:33:00] <tjc> haxney: actually running the benchmarks is a to-do item, but you can put the test files anywhere in your package directory
[19:33:10] <tjc> (right now you can use rustpkg to build the bench executable and then run it manually)
[19:33:14] <tjc> mikezaby: Yes, I think strcat maintains that
[19:33:15] <haxney> cmr: got it. How would I refer to the test files? I'm new with the std lib
[19:33:21] <cmr> haxney: compiled files get put into $workspace/build/$arch/$pkgid/foobench
[19:33:23] <strcat> tjc: no, I have an arch linux repo ;p
[19:33:30] <mikezaby> :(
[19:33:32] <cmr> haxney: well, what do you mea by test files?
[19:33:32] <strcat> there's also an ubuntu repo maintained by someone else
[19:33:35] <tjc> strcat: Ah ok, I lose track of all those Linux distros, they're all the same to me ;-)
[19:33:37] * tjc runs away
[19:33:44] <tjc> -> lunch
[19:33:59] <strcat> although my packages will technically *run* on probably any linux distro with a somewhat modern glibc/libstdc++
[19:34:12] <strcat> and a non-ancient kernel
[19:34:38] <haxney> cmr: I'm benchmarking the CSS parser, and need to feed it some files.
[19:35:08] <cmr> haxney: right. there's no unified way of doing that, you just need to do io as normal and give it a normal path
[19:35:08] <mikezaby> i ll prefer aptitude package if exist :p
[19:35:20] <mikezaby> if someone knows the repo
[19:35:24] <mikezaby> tell me plz
[19:35:28] <cmr> mikezaby: https://launchpad.net/~hansjorg/+archive/rust
[19:35:56] <strcat> although rust did stop building in a clean chroot again... sadly
[19:35:58] <haxney> cmr: And is there a preferred way to get the path to the project root?
[19:35:59] <SiegeLord> Is 0.8 being released today?
[19:36:08] <steveklabnik> SiegeLord: probably
[19:36:14] <steveklabnik> SiegeLord: depends if there's any big issues with the rc
[19:36:16] <SiegeLord> I like the sound of that
[19:36:19] <cmr> dbaupp: I figured out why only some of the data was being uploaded... gzip was prompting for input, in a tmux session I almost never look at :(
[19:36:20] *** Joins: novabyte (novabyte@7596A1FB.F41C9F0F.E7727734.IP)
[19:36:25] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[19:36:25] *** ChanServ sets mode: +o pnkfelix
[19:36:32] *** Quits: Seld (seld@moz-5DEA7688.ch) (Ping timeout)
[19:36:32] *** Quits: novabyte1 (novabyte@7596A1FB.F41C9F0F.E7727734.IP) (Ping timeout)
[19:36:38] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (Ping timeout)
[19:36:42] <cmr> haxney: I don't know if there's any way to do that, unfortunately.
[19:36:51] *** Joins: kaeso (kaeso@moz-F21FF626.unstable.it)
[19:37:04] *** Quits: luisbg (luisbg@moz-E7587DBE.collabora.co.uk) (Ping timeout)
[19:37:04] *** Quits: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr) (Ping timeout)
[19:37:06] *** Joins: luisbg (luisbg@moz-E7587DBE.collabora.co.uk)
[19:37:20] *** Joins: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr)
[19:38:10] *** Joins: Seld (seld@moz-5DEA7688.ch)
[19:38:26] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[19:38:35] <tikue_> hey guys, is there a reason that streams have a cap on the number of messages that can be sent without being received (before things just blow up)
[19:39:01] <tikue_> the number is < a million for Chan<int>
[19:39:05] <tikue_> which seems pretty low
[19:39:11] *** Quits: hoverbear (andrew@EBFA78B5.F19E5E7B.E74D50F2.IP) (Ping timeout)
[19:39:32] <tikue_> is it just the fact that there'd never be a practical use for higher than that?
[19:39:54] <bstrie> tikue_: brson might be the one to ask there
[19:40:09] <cmr> tikue_: a million ints is a 8MB buffer
[19:40:22] <tikue_> cmr: yes
[19:40:27] <cmr> that's huge
[19:40:48] <tikue_> cmr: is it a linked list or a contiguous chunk of memory?
[19:41:03] <haxney> cmr: so if I have "ROOT/src/bench.rs" and "ROOT/sample-data/*.css", how would I tell "bench.rs" about the "sample-data" dir?
[19:41:29] <tikue_> cmr: it seems that at the very least it cause runtime failure rather than a bus error
[19:41:36] <tikue_> it should** cause
[19:41:55] <strcat> a bus error or segmentation fault isn't by rust's choice
[19:42:00] <strcat> you're probably just overflowing the stack
[19:42:07] <strcat> there isn't stack safety atm
[19:42:10] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[19:42:13] <tikue_> strcat: ah, gotcha
[19:42:30] <tikue_> strcat: if there were stack safety, presumably it'd fail more gracefully?
[19:42:32] <cmr> haxney: I think it'd be ../../../sample-data. not positive.
[19:42:34] *** Quits: jez0990 (quassel@moz-3BA8545E.kimsufi.com) (Ping timeout)
[19:42:41] <strcat> tikue_: yes it would call abort() ;p
[19:42:44] <tikue_> great
[19:42:46] *** Joins: CurlyBrace (Mibbit@6312E718.1E68D00F.DDE5D3F6.IP)
[19:42:48] <tikue_> thanks :) that's all i wanted to know!
[19:42:50] <haxney> cmr: I'll try that out.
[19:42:58] <strcat> when segmented stacks are reimplemented it could grow the stack
[19:43:21] <tikue_> gotcha
[19:44:18] *** Joins: jez0990 (quassel@moz-3BA8545E.kimsufi.com)
[19:44:29] *** Joins: fabiand (fabiand@moz-3D3036FF.adsl.alicedsl.de)
[19:45:34] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[19:46:02] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[19:46:27] *** Quits: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP) (Quit: tikue_)
[19:46:58] *** Quits: jez0990 (quassel@moz-3BA8545E.kimsufi.com) (Ping timeout)
[19:46:59] *** Joins: jez0990 (quassel@moz-3BA8545E.kimsufi.com)
[19:47:08] *** Quits: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[19:47:34] *** Joins: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP)
[19:48:06] <CurlyBrace> strcat, you have an interesting name
[19:48:15] <CurlyBrace> what made you choose it?
[19:48:24] * strcat shrugs
[19:48:39] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:49:09] <CurlyBrace> I'm imaging a kitten, tangling together pieces of yarn...
[19:49:12] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[19:49:23] <haxney> cmr: looks like it looks for files relative to the pwd from which the command is executed
[19:49:26] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[19:49:33] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[19:49:38] <bjz_> CurlyBrace: at first I thought it was to do with string concatenation
[19:49:48] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[19:49:49] <SiegeLord> Prone to buffer overflows too...
[19:50:00] <SiegeLord> I believe the Reddit version is safer
[19:50:19] <CurlyBrace> bjz_, it IS about string concatenation - the cat is tying the strings together
[19:50:25] <CurlyBrace> :P
[19:50:30] <strcat> bjz_: it depends on whether the person I'm talking to is a programmer or not ;p
[19:50:40] <bjz_> CurlyBrace: oh ok, makes sense
[19:50:53] * bstrie wonders if CurlyBrace is secretly pcwalton's alt
[19:51:09] <bjz_> bstrie: why?
[19:51:18] <cmr> haxney: ah, hm. I wouldn't bother with rustpkg for that atm then, and rather build the bench with rustc --test
[19:51:21] *** Joins: derboi_c (derboi_c@510621FB.DF3CA0D0.BA2F4534.IP)
[19:51:23] * bjz_ waits for the punch line
[19:51:23] <cmr> and just run it from your source directory.
[19:51:30] <bstrie> bjz_: because pcwalton's website is http://mimiga.net/
[19:51:32] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[19:51:35] <CurlyBrace> Haha
[19:51:45] <CurlyBrace> No, just another Cave Story fan
[19:51:50] *** Quits: petantik (oz@moz-20EC2160.net) (Ping timeout)
[19:51:53] *** Quits: myname (myname@F6BC1CBC.2C5F047.A0197E77.IP) (Ping timeout)
[19:51:56] *** Joins: myname (myname@F6BC1CBC.2C5F047.A0197E77.IP)
[19:51:59] <bjz_> HAHAHA
[19:52:01] *** Joins: petantik (oz@moz-20EC2160.net)
[19:52:01] <cmr> <3 cave story
[19:52:08] <bjz_> <3 <3
[19:52:17] *** Joins: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[19:52:34] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[19:52:52] <haxney> cmr: Looks like it is the same with "rustc --test". This is good enough for me for now.
[19:54:20] *** Quits: Skif (emschwar@moz-D781D8AA.hsd1.co.comcast.net) (Client exited)
[19:54:57] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[19:55:14] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[19:55:20] *** Joins: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP)
[19:55:21] <CurlyBrace> http://mimiga.net/ looks cool, but I think I broke it :(
[19:55:28] <Ms2ger> Cave Story \o/
[19:55:44] <bstrie> haha
[19:55:47] <bstrie> we did break the site
[19:55:59] *** Joins: maik (maik@moz-82B7232D.dip0.t-ipconnect.de)
[19:56:08] <bstrie> must have an absurdly low quota
[19:56:17] *** Joins: Skif (emschwar@moz-D781D8AA.hsd1.co.comcast.net)
[19:56:27] *** Quits: Skif (emschwar@moz-D781D8AA.hsd1.co.comcast.net) (Client exited)
[19:56:39] *** Quits: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP) (Quit: tikue_)
[19:56:46] *** Quits: fabiand (fabiand@moz-3D3036FF.adsl.alicedsl.de) (Quit: Verlassend)
[19:57:07] <acrichto> brson: ping
[19:57:25] <strcat> pnkfelix: so you think that's just a race?
[19:57:28] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Ping timeout)
[19:57:30] *** Joins: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP)
[19:57:33] <strcat> strange that I can only make it happen in a chroot ;]
[19:57:40] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[19:57:47] <strcat> also maybe it's because the build dir is totally clean
[19:58:10] <haxney> How do I load an external library in rusti? "extern mod" doesn't work and I can't get ":load" to succeed.
[19:58:24] <strcat> haxney: maybe you can't
[19:58:29] * strcat shrugs
[19:58:36] *** Quits: eagen (eagen@8737942B.7A99C13A.B7961A98.IP) (Client exited)
[19:58:37] <strcat> haxney: there's :load
[19:58:53] <strcat> rusti doesn't work at all though ;p
[19:59:11] <haxney> strcat: I have the library "rust-cssparser" in a directory and am trying to load the library
[19:59:47] *** Quits: valenting (Thunderbir@C6866972.77435D89.FB866788.IP) (Ping timeout)
[19:59:48] <haxney> strcat: cd-ing into the directory, running rusti and then ":load cssparser" gives "task <unnamed> failed at 'called `Option::unwrap()` on a `None` value', /build/dir/rust/src/libstd/option.rs:301"
[19:59:53] <pnkfelix> strcat: yeah I think so
[20:00:18] <pnkfelix> strcat: I had seen things like it in the past.  To be honest I thought I already squashed this one.
[20:00:40] *** Quits: canhtak (jeremy@moz-76A9D6A7.wl.t.ulaval.ca) (Quit: canhtak)
[20:00:46] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:00:47] <strcat> pnkfelix: my repo builder catches things like this since it starts with a totally clean new root each time
[20:01:01] *** Quits: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP) (Quit: tikue_)
[20:01:07] <strcat> somewhat annoying that it means rebuilding LLVM each time, but hey, it's not on my computer
[20:01:23] <strcat> unless I split out rust-llvm
[20:01:32] <strcat> which I don't care enough to do ;p
[20:01:39] *** Quits: nkoep (nik@moz-48B03841.vpn.rwth-aachen.de) (Ping timeout)
[20:01:53] <derboi_c> I've question on rust backend, on lib 'morestack'. If i correctly understood it, it is called before each function to contruct its environment. So this function is not bypassable? (currently reimplementing the ABI)
[20:01:57] <pnkfelix> strcat: yeah, I often try to test by building from a clean build dir too, which I think often exposes similar issues as your starting from a clean root
[20:02:11] <strcat> derboi_c: morestack is for implementing segmented stacks
[20:02:19] *** Joins: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP)
[20:02:21] <strcat> and just to provide stack safety
[20:02:31] <strcat> it's 100% required, until we have alternate stack safety options
[20:02:41] <strcat> although it's not currently implemented with the new runtime anyway
[20:03:01] <derboi_c> strcat: the 0.8 runtime?
[20:03:05] <strcat> yes
[20:03:11] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[20:03:17] <strcat> segmented stacks aren't currently implemented
[20:03:21] <derboi_c> there are realy big modification (syntaxe/abi)
[20:03:27] <strcat> neither is basic stack safety by calling abort
[20:03:37] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[20:03:47] *** Joins: res (Mibbit@48962603.1A99F5FD.DDE5D3F6.IP)
[20:03:48] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[20:03:50] <strcat> derboi_c: much smaller than previous releases
[20:03:55] <strcat> in terms of language changes
[20:04:07] <strcat> the ABI won't be stable for a long time, maybe not ever realistically
[20:04:12] <derboi_c> strcat: ok thx :)
[20:04:12] <strcat> you can use 'extern "C" fn foo() {}'
[20:04:19] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[20:04:30] <derboi_c> strcat: me?
[20:04:43] <strcat> derboi_c: yes, if you need to expose a stable ABI
[20:04:55] *** Joins: Skif (emschwar@moz-D781D8AA.hsd1.co.comcast.net)
[20:05:07] <strcat> extern "C" fn foo(x: u64) -> u64 will have a stable ABI
[20:05:18] <strcat> just the same as the platform's C ABI
[20:05:26] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[20:05:28] *** Quits: Skif (emschwar@moz-D781D8AA.hsd1.co.comcast.net) (Connection reset by peer)
[20:05:31] *** Joins: pnkfelix1 (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[20:05:35] *** Joins: Skif (emschwar@moz-D781D8AA.hsd1.co.comcast.net)
[20:05:46] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Quit: Lost terminal)
[20:05:47] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[20:07:48] *** Quits: vodik (simon@moz-9745F68B.net.uwaterloo.ca) (Ping timeout)
[20:07:48] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[20:07:51] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[20:08:37] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:08:42] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[20:08:46] <derboi_c> strcat: ok, but i will recode the ABI, so i'm only interested in calls to it being "stable".
[20:08:49] *** Joins: canhtak (jeremy@moz-76A9D6A7.wl.t.ulaval.ca)
[20:10:57] <strcat> derboi_c: rust's ABI is going to keep changing though
[20:11:06] <strcat> how we pass by-value will definitely change
[20:11:15] <strcat> the env ptr slot might be removed
[20:11:17] <strcat> etc.
[20:11:27] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[20:11:36] *** Quits: pnkfelix1 (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[20:12:59] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[20:13:47] *** Quits: Skif (emschwar@moz-D781D8AA.hsd1.co.comcast.net) (Client exited)
[20:14:34] *** Joins: Skif (emschwar@moz-D781D8AA.hsd1.co.comcast.net)
[20:14:34] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[20:15:07] <derboi_c> strcat: ok i understand, i will follow these changes and fix my code accordingly.
[20:15:20] <derboi_c> strcat: thanks
[20:16:22] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[20:17:03] <tikue_> from the ML thread, I'd totally be down with an assign! macro for tuple updating. assign!(x, y, z = f())
[20:17:25] *** Quits: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP) (Quit: tikue_)
[20:19:59] *** Joins: nejucomo (Adium@moz-AC868E2D.hfc.comcastbusiness.net)
[20:20:12] *** Joins: nkoep (nik@moz-F23F1945.pool.mediaways.net)
[20:20:32] *** Joins: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP)
[20:20:37] <haxney> having a problem with benchmarking using the #[bench] attribute. My file is https://gist.github.com/haxney/6719953
[20:21:06] <haxney> It says that it took zero ns, even though the inner code is definintely run (it prints out the line numbers)
[20:21:44] *** Quits: nejucomo (Adium@moz-AC868E2D.hfc.comcastbusiness.net) (Ping timeout)
[20:22:04] <engla> if the bench test runs for too long it will print as 0 ns
[20:22:09] <haxney> If I comment out the `for` loop, then it gives an answer
[20:22:09] *** Quits: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:22:13] <Eridius> engla: o_O
[20:22:20] <engla> something like 0.5 seconds per iteration or so
[20:22:29] <Eridius> haxney: you shouldn't be mixing unnecessary I/O in your benchmark anyway
[20:22:32] <haxney> engla: thats... weird
[20:22:38] <Eridius> surely you're not trying to benchmark the printing to stdout
[20:22:56] <haxney> Eridius: The printing was just to verify that the code was actually being run
[20:23:14] *** Quits: Ferreus (ferreus@moz-DEC4442C.dyn.telefonica.de) (Quit: WeeChat 0.4.1)
[20:23:16] *** Quits: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP) (Quit: tikue_)
[20:23:35] <haxney> Eridius: removing the println doesn't change things
[20:23:44] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[20:24:27] <haxney> Weird... If I comment out the for loop, it sometimes gives me a result
[20:25:23] <haxney> If I run the same command a few times, it either returns zero ns or around 1400
[20:25:27] <engla> haxney: ok in my test here it seems it prints 0ns if I go over around 1e6 ns, that's just a millisec. so try to bench something that's quicker?
[20:25:29] *** Joins: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP)
[20:26:02] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[20:26:23] <CurlyBrace> I've been looking at the std::run::Process and std::run::ProcessOptions, and I'm having a hard time getting a process to link to another
[20:26:24] <haxney> engla: it only takes around 1300-1400 ns/iter, and 4.6 seconds wall time for the whole command
[20:26:27] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[20:26:33] <Eridius> from reading the code, if an iteration takes more than 0.001 seconds, it's going to come up with a bad value for the number of iterations to do
[20:26:53] <CurlyBrace> I tried to set the input from one process to the output of another, but it doesn't seem to work
[20:26:55] <haxney> Eridius: so this is only suitable for very micro benchmarks
[20:26:55] *** Joins: jviereck1 (Adium@moz-D03659.dip0.t-ipconnect.de)
[20:26:57] <CurlyBrace> Any advice?
[20:27:14] <Eridius> haxney: try using RUST_LOG=extra::test. it should print out how many iterations it's doing
[20:27:49] <haxney> Eridius: "warning: got 1 RUST_LOG specs but only matched 0 of them."
[20:28:01] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[20:28:04] <Eridius> haxney: oh, you need to compile rust with --enable-debug :/
[20:28:10] <Eridius> (as a ./configure flag)
[20:28:24] <adridu59> I made an "improved" logo for the website, it's circled and uses the full 128px width http://adrientetar.legtux.org/cached/misc/rust_logo_v2.png
[20:28:32] *** Quits: jviereck (Adium@moz-9219FCD.ethz.ch) (Ping timeout)
[20:28:33] <haxney> Eridius: ugh. that could take a while :/
[20:29:06] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[20:29:18] <haxney> Eridius: is there a way to increase the iteration timeout? I'm hoping to benchmark slightly longer-running things
[20:29:39] <Eridius> haxney: I don't see any timeout here
[20:29:54] *** Joins: valenting (Thunderbir@C6866972.77435D89.FB866788.IP)
[20:29:58] <Eridius> the only problematic area I see is that it tries to calibrate the number of iterations to take 1ms
[20:30:09] <Eridius> and it doesn't take into account one iteration taking >1ms
[20:30:17] *** Quits: novabyte (novabyte@7596A1FB.F41C9F0F.E7727734.IP) (Quit: Leaving.)
[20:30:24] <Eridius> well, it does eventually bail out if the benchmark takes >3 seconds
[20:30:32] <haxney> Eridius: So is there a way to increase those times?
[20:30:40] <Eridius> so I'm guessing it's running 0 iterations over and over until it goes past 3s and bails
[20:30:53] <Eridius> haxney: edit extra/test.rs func auto_bench. See the first if condition? Fix it ;)
[20:31:18] <Eridius> I'm going to file an issue on this
[20:32:26] <brson> acrichto: pong
[20:32:28] *** Joins: spott (spott@moz-AF3B474F.colorado.edu)
[20:32:52] <acrichto> brson: I think I broke builds with --disable-debug, and I was thinking that perhaps we should have a builder doing just that
[20:32:55] *** Quits: aeqwa (aeqwa@moz-6BB82E64.dsl.tropolys.de) (Quit: Lost terminal)
[20:33:11] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[20:33:11] *** ChanServ sets mode: +o tjc
[20:33:49] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[20:34:01] <pnkfelix> acrichto: we don't have a builder that runs â€”disable-debug?   Just empty string or â€”enable-debug ?
[20:34:08] *** Joins: kermi (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net)
[20:34:13] <acrichto> pnkfelix: as far as I know they're all empty string
[20:34:15] *** Quits: spott (spott@moz-AF3B474F.colorado.edu) (Ping timeout)
[20:34:23] <brson> acrichto: ok. there are a lot of automation issues in the pipeline. make an issue
[20:34:28] *** Quits: kermi (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:34:32] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[20:34:33] <acrichto> brson: will do
[20:34:41] <haxney> Eridius: So I guess I can't use #[bench] for benchmarks which run longer than a few ms
[20:35:01] *** Joins: kermi (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net)
[20:35:07] *** Quits: kermi (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net) (Quit: kermi)
[20:35:17] <Eridius> Filed as #9532
[20:35:23] *** Joins: kermi (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net)
[20:35:26] <CurlyBrace> Anyone have any advice?
[20:35:38] <kermi> does anyone know how to output a sound, like an mp3 file, in rust 0.7?
[20:36:00] <haxney> Eridius: any recommendation on how to workaround? Is there some other way to measure the running time of a piece of code?
[20:36:11] *** Joins: spott (spott@moz-AF3B474F.colorado.edu)
[20:36:31] <Eridius> haxney: well you could read the code from extra::test::auto_bench and just reimplement it yourself
[20:36:54] <strcat> kermi: use an existing C library for it, like sdl
[20:37:06] <strcat> there are rust sdl bindings, maybe they include mixer stuff
[20:37:51] *** Quits: maik (maik@moz-82B7232D.dip0.t-ipconnect.de) (Ping timeout)
[20:38:03] *** Quits: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP) (Ping timeout)
[20:38:45] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:38:59] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[20:39:22] <kermi> I'm super new to rust, is there some sort of help on importing a C library?
[20:39:22] *** Joins: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP)
[20:39:47] <strcat> kermi: there is an ffi tutorial
[20:39:49] <Eridius> kermi: rust 0.7, or rust master?
[20:39:54] <strcat> but you can just use the existing sdl binding
[20:39:59] <Eridius> 0.7: http://static.rust-lang.org/doc/0.7/tutorial-ffi.html
[20:40:03] <Eridius> master: http://static.rust-lang.org/doc/master/tutorial-ffi.html
[20:40:38] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[20:41:50] <kermi> strcat Eridius thanks guys I'll check that out
[20:42:26] <strcat> acrichto: https://github.com/mozilla/rust/pull/9534 r?
[20:43:54] *** Joins: dew (Instantbir@moz-A7596059.dhcp.wstv.il.charter.com)
[20:44:04] *** Quits: Ms2ger (Ms2ger@9D0A393.CB23CDC6.3773EA9F.IP) (Quit: nn)
[20:44:21] <tikue_> what are the tuple indexing methods?
[20:44:52] <strcat> you mean
[20:44:57] <strcat> rusti: (1, 2).n1()
[20:44:57] -rusti- 2
[20:44:57] *** Quits: valenting (Thunderbir@C6866972.77435D89.FB866788.IP) (Ping timeout)
[20:45:06] <Luqman> well, my patch to make session.building_library just bool instead of @mut bool has quickly spun out of control...
[20:45:24] <strcat> Luqman: ha
[20:45:29] *** Quits: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr) (Input/output error)
[20:45:37] <tikue_> actually, what I really want is to do is `let (first, rest) = (tuple.first(), tuple.n2+());`
[20:45:51] <Luqman> strcat: everyone wants a @Session :(
[20:45:54] <Eridius> tikue_: you can't shrink a tuple like that :/
[20:45:57] *** Quits: res (Mibbit@48962603.1A99F5FD.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:46:06] <tikue_> Eridius: i don't want to shrink it i want a new tuple
[20:46:17] <Eridius> tikue_: right I mean, you can't slice a tuple like that
[20:46:34] <Eridius> you'd have to write code for a tuple of every size (like the n# methods do ,which go up to tuples of size 11 I think)
[20:46:48] <tikue_> what's so bad about that :)
[20:46:58] <joelteon> because tuples don't work that way
[20:47:01] <Eridius> I could certainly imagine code that splits a tuple (a,b,c) into (a,(b,c))
[20:47:03] *** Joins: sergi (textual@moz-DB55470C.upc-a.chello.nl)
[20:47:04] <tikue_> joelteon: they could
[20:47:07] <joelteon> that's what lists are for
[20:47:08] <Eridius> but you can't do it at arbitrary indices without a horrible explosion of methods
[20:47:11] <bstrie> I don't like the .n methods on tuples
[20:47:11] <tikue_> joelteon: no it's not
[20:47:14] <bstrie> might as well just match
[20:47:20] <strcat> and it's inefficient in general
[20:47:24] <tikue_> joelteon: lists are when they're all the same type
[20:47:26] <Eridius> bstrie: the .n methods I feel are primarily for when you have a large tuple and only want one field
[20:47:35] *** Joins: jonathanmarvens (jonathanma@moz-F055AF76.hsd1.ma.comcast.net)
[20:47:38] <Eridius> so writing a match with (_,_,_,x,_,_,_) => x is bad
[20:47:42] <bstrie> Eridius: a large tuple would be better off as a struct, no?
[20:47:48] <acrichto> strcat: your turn, r? https://github.com/mozilla/rust/pull/9535
[20:47:56] <Eridius> bstrie: probably, but you don't always control the types you're working with
[20:47:57] <bstrie> having large tuples is a code smell to me
[20:48:18] <strcat> acrichto: what was that used for? error  reporting?
[20:48:22] <bstrie> Eridius: then define a struct and unsafely cast the tuple to it :)
[20:48:24] <acrichto> https://github.com/mozilla/rust/issues/9456
[20:48:25] <strcat> oh
[20:48:39] <acrichto> rusti: format!("{0} {0:?}", "test")
[20:48:39] -rusti- ~"\"test\" \"test\""
[20:48:45] <acrichto> rusti: println!("{0} {0:?}", "test")
[20:48:46] -rusti- "test" "test"
[20:48:46] -rusti- ()
[20:48:51] <acrichto> strcat: that's not what you'd expect
[20:48:56] <tikue_> since everyone's interested :) my use case is writing a macro for (a, b) = tup;
[20:48:59] <acrichto> you expect `test "test"`
[20:49:00] <tikue_> where you're assigning to variables
[20:49:02] <strcat> acrichto: yeah
[20:49:13] <Eridius> acrichto: whoa that's crazy
[20:49:26] <strcat> I'm going to turn off type_use
[20:49:28] <acrichto> Eridius: yeah when I first wrote format! I didn't intend on using {} so liberally
[20:49:33] <strcat> it's such a bad performance hit
[20:49:33] <derboi_c> It's normal if i want an 'relocatable' object without main, i must add '--lib'? ('rustc --lib -c file.rs' instead of 'rustc -c file.rs'). I undestund that if i want an lib i put '--lib', but '-c' don't say 'lib' for me. The error is (error: main function not found)
[20:49:41] <strcat> we can just enable mergefunc later when it's ready
[20:49:47] *** Joins: riley_ (riley@8BA43816.9AA11D69.65DDFA89.IP)
[20:50:07] <Eridius> erick isn't Erick Tryzelaer, right? That's erickt?
[20:50:22] *** Quits: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Ping timeout)
[20:51:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:51:19] <tikue_> it'd be nice if `match` could do with tuples what it does with lists, i.e. [hd, ..tl]
[20:51:45] <Eridius> tikue_: that would require the ability to slice a tuple
[20:51:48] <Eridius> which is kind of nonsensical
[20:51:52] <Eridius> that's like asking to slice a structure
[20:51:53] <strcat> tikue_: it uses slices
[20:51:55] <Eridius> s/ure//
[20:51:56] <tikue_> Eridius: it makes sense in macros :P
[20:51:57] <acrichto> strcat: argh I can't complie in my vm b/c I ran out of memory :(
[20:51:57] <strcat> tuple slices don't exist
[20:52:00] <bstrie> nope! big tuples are an anti-pattern!
[20:52:01] <strcat> could not be efficiently implemented
[20:52:02] <bstrie> fight the urge
[20:52:16] <bstrie> use a struct
[20:52:19] <tikue_> bstrie: not trying to make a big tuple trying to make a macro
[20:52:23] <tikue_> i explained that above :P
[20:52:31] <bstrie> I don't read backscrolllllll
[20:52:35] * bstrie dashes away
[20:53:02] <tikue_> bstrie: the ML showed interest in being able, for example, to do `let mut a = 1; let mut b = 2; (a, b) = (b, a);`
[20:53:08] <tikue_> i'm trying to write a macro for that
[20:53:15] <tikue_> not sure if it's possible though
[20:53:18] <haxney> Is there documentation for the fmt!() macro?
[20:53:24] *** Quits: TheDust (Stijn@moz-8C2076C2.upc-d.chello.nl) (Quit: Leaving)
[20:53:39] *** Quits: acabrera (alcabrera@4B9B70ED.4D823036.F18532AE.IP) (Quit: leaving)
[20:53:46] *** Joins: valenting (Thunderbir@C6866972.77435D89.FB866788.IP)
[20:53:54] <acrichto> haxney: not a lot, but there is a lot for the format!() macro!
[20:54:10] <haxney> acrichto: where can I find that?
[20:54:22] <acrichto> haxney: http://static.rust-lang.org/doc/master/std/fmt/index.html
[20:54:24] <Eridius> haxney: are you on 0.7 or master?
[20:54:28] <Eridius> you should be on master
[20:54:30] <acrichto> oh that's a good question
[20:54:34] <bstrie> tikue_: a macro seems like overkill there, when the workaround is literally two extra lines of code :P
[20:54:49] <haxney> Eridius: I'm on master. Should I be using format!() instead of fmt!()?
[20:54:52] <Eridius> bstrie: plus 2 extra variable bindings. And it gets worse with larger tuple returns
[20:54:53] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: nn)
[20:54:56] <Eridius> haxney: yes
[20:55:01] <bstrie> Eridius: variable bindings that get optimized out
[20:55:13] <tikue_> bstrie: it'd look nice to do assign!(a, b = b, a);
[20:55:15] <Eridius> only reason to use fmt! on master is if you're using one of the other macros that uses it, e.g. debug!() or assert!()
[20:55:27] <Eridius> tikue_: I actually think that doesn't look very good
[20:55:27] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[20:55:35] <acrichto> haxney: fmt! will be phased out soon (hopefully)
[20:55:36] <Eridius> bstrie: yes but it's a lot of noise in the code that looks ugly
[20:55:44] <tikue_> Eridius: how would you do that?
[20:55:47] <haxney> Eridius: got it
[20:55:52] *** Joins: guacamole (Mibbit@moz-71FAC30.hsd1.va.comcast.net)
[20:55:58] <Eridius> tikue_: I think using a macro to do this, period, looks bad :P
[20:56:00] <bstrie> Eridius: in any case, 1) it's contrived and 2) any tuple larger than, oh, four deserves a public shaming
[20:56:16] <bstrie> RFC: forbid tuples of arity > 4
[20:56:31] <tikue_> Eridius: i don't expect there'd be much support in additional syntax support
[20:56:33] <benh> but my generic programming :(
[20:56:42] *** Quits: jviereck1 (Adium@moz-D03659.dip0.t-ipconnect.de) (Quit: Leaving.)
[20:56:42] <bstrie> tuples aren't generic!
[20:56:52] <bstrie> you can polymorph over their sizes
[20:56:55] <Eridius> tikue_: I think people in general wouldn't mind being able to say `(a, b) = (b, a)`, except for the problem of actually parsing the damn thing
[20:56:58] <bstrie> *can't
[20:57:06] *** Quits: Skif (emschwar@moz-D781D8AA.hsd1.co.comcast.net) (Ping timeout)
[20:57:13] <benh> it's a shame we're so far behind C++ in the department of tuple size polymorphism
[20:57:25] <bstrie> not really! it's a feature :)
[20:57:26] <Eridius> benh: oh god, C++11's polymorphic tuples are horribly gross
[20:57:30] *** Joins: Skif (emschwar@moz-D781D8AA.hsd1.co.comcast.net)
[20:57:31] <Eridius> have you ever looked at how it's implemented?
[20:57:41] <tikue_> Eridius: right, i assumed it wouldn't be possible to parse that, hence the additional syntax, something like assign a, b = b, a; i don't know
[20:57:57] *** Quits: guacamole (Mibbit@moz-71FAC30.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:58:13] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[20:58:20] <tikue_> i honestly don't think assign!(a, b, c = c, a, b); looks bad
[20:58:27] <tikue_> but i also don't know if it's possible to write that macro :P
[20:58:48] <benh> Eridius: variadic templates!
[20:58:59] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[20:58:59] <Eridius> benh: layers and layers of variadic templates
[20:59:01] *** Quits: jensnockert (jensnocker@moz-2B3A7EE9.mobileonline.telia.com) (Input/output error)
[21:00:08] *** Quits: sw17ch (sw17ch@moz-39D8564F.wndsny.tds.net) (Quit: sw17ch)
[21:00:22] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[21:00:24] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[21:01:49] *** Quits: valenting (Thunderbir@C6866972.77435D89.FB866788.IP) (Ping timeout)
[21:02:03] *** Quits: Skif (emschwar@moz-D781D8AA.hsd1.co.comcast.net) (Connection reset by peer)
[21:02:09] <haxney> Eridius: is it possible to use format!() to insert commas into a large number?
[21:02:11] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[21:02:31] *** Joins: Skif (emschwar@moz-D781D8AA.hsd1.co.comcast.net)
[21:02:35] *** Joins: jensnockert (jensnocker@moz-2B3A7EE9.mobileonline.telia.com)
[21:03:10] *** Joins: vodik (simon@moz-2D668626.cpe.net.cable.rogers.com)
[21:03:19] <Eridius> haxney: I don't know. Documentation is at http://static.rust-lang.org/doc/master/std/fmt/index.html
[21:03:31] *** Quits: Skif (emschwar@moz-D781D8AA.hsd1.co.comcast.net) (Client exited)
[21:03:39] <Eridius> my assumption is no, since that's typically something done by a dedicated number formatter rather than a generic formatter
[21:03:59] *** Quits: kermi (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:04:09] *** Joins: jkarlson (jkarlson@moz-785A3407.org.aalto.fi)
[21:05:04] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[21:05:09] <haxney> Eridius: makes sense.
[21:05:16] <acrichto> haxney: you could do that
[21:05:22] <acrichto> it's not done by default
[21:05:41] <acrichto> haxney: you'd create a wrapper struct like 'struct CommaInserter(uint)' which would then implement fmt::Default
[21:05:52] <engla> that's the kind of thing that the locale also specifies. but that's an unloved feature
[21:08:28] <haxney> Got it. Not that important, but I figured I'd see if it already implemented
[21:08:33] *** Joins: gandi (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:08:36] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Connection reset by peer)
[21:10:12] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[21:11:33] *** Quits: CurlyBrace (Mibbit@6312E718.1E68D00F.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:11:36] *** Joins: steveklabnik (steveklabn@moz-389D91E.public.wayport.net)
[21:11:43] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:11:55] *** Quits: sergi (textual@moz-DB55470C.upc-a.chello.nl) (Quit: Computer has gone to sleep.)
[21:17:27] *** Quits: canhtak (jeremy@moz-76A9D6A7.wl.t.ulaval.ca) (Quit: canhtak)
[21:19:34] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Ping timeout)
[21:20:20] *** Quits: riley_ (riley@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[21:20:41] *** Joins: riley (riley@8BA43816.9AA11D69.65DDFA89.IP)
[21:21:02] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[21:21:09] *** Quits: jensnockert (jensnocker@moz-2B3A7EE9.mobileonline.telia.com) (Connection reset by peer)
[21:21:21] *** Quits: jonathanmarvens (jonathanma@moz-F055AF76.hsd1.ma.comcast.net) (Input/output error)
[21:21:48] *** Joins: jonathanmarvens (jonathanma@moz-F055AF76.hsd1.ma.comcast.net)
[21:22:13] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:22:20] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Ping timeout)
[21:23:05] *** gandi is now known as gandalf
[21:23:43] *** Quits: jonathanmarvens (jonathanma@moz-F055AF76.hsd1.ma.comcast.net) (Ping timeout)
[21:23:49] *** Joins: eatkinson (eatkinson@moz-D86C5DB2.airbears2.berkeley.edu)
[21:25:45] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[21:25:59] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[21:27:17] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[21:27:30] *** Quits: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP) (Input/output error)
[21:29:23] *** Joins: Liothen (liothen@moz-266BCA86.spkn.qwest.net)
[21:31:41] <nejucomo> Looking at the macro tutorial I don't see any way to do identifier interpolation.  Is this possible?
[21:31:48] <Eridius> cmr: in the trait listing for a type in rustdoc_ng, it doesn't show the default methods. I have to click into the trait to see them. That's kind of confusing
[21:31:52] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[21:32:34] <strcat> Eridius: http://static.rust-lang.org/doc/master/ng/std/iter/trait.Iterator.html hm?
[21:32:47] <Eridius> strcat: http://static.rust-lang.org/doc/master/std/trie/struct.TrieMap.html
[21:32:57] <Eridius> I'm talking about when it lists the traits that a type implements
[21:33:11] <cmr> Eridius: yes, that's because it only lists the methods that the impl actually implements.
[21:33:17] <Eridius> cmr: yes, and that's confusing
[21:33:21] <cmr> I agree
[21:33:36] *** Joins: mib_lhksfx (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net)
[21:33:40] <Eridius> cmr: I had to read the whole page 3 times, looking for .insert(), before I decided to click on MutableMap
[21:36:24] *** Quits: fyolnish (fyolnish@moz-53C38B14.uqwimax.jp) (Client exited)
[21:37:24] *** Joins: victorporof (victorporo@77FE7E86.477C3F8E.79933D60.IP)
[21:37:32] *** Joins: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[21:38:05] *** Quits: victorporof_ (victorporo@77FE7E86.477C3F8E.79933D60.IP) (Ping timeout)
[21:38:29] <engla> showing all default methods would be too much on iterators though
[21:38:44] <haxney> How do I use an external mod with a "-" in the name? I'm trying to do "extern mod servo-style;", but that's apparently a parse error.
[21:39:00] <haxney> Adding (name = "servo-style") gives "nonexistent package"
[21:39:08] <acrichto> haha I was just about to suggest that
[21:39:20] <acrichto> haxney: make sure it's in the path via -L
[21:39:28] <acrichto> or RUST_PATH, but I'm not entirely sure how that works
[21:39:47] *** Quits: heftig (heftig@moz-6F2AD80B.dip0.t-ipconnect.de) (Ping timeout)
[21:41:04] <haxney> acrichto: It works fine with non-hyphenated names (i.e. "cssparser") without any -L
[21:41:13] <haxney> acrichto: I'm using rustpkg, btw
[21:41:31] *** Quits: mib_lhksfx (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:41:34] <acrichto> weird
[21:41:41] <acrichto> tjc may know more
[21:41:48] <acrichto> (doesn't seem to be here)
[21:42:47] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[21:42:47] *** ChanServ sets mode: +o tjc
[21:44:23] *** Joins: maik (maik@moz-82B7232D.dip0.t-ipconnect.de)
[21:45:37] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:45:50] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:46:01] *** Joins: olivier (chatzilla@moz-2811C56F.fbx.proxad.net)
[21:47:50] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:48:10] <haxney> servo-style uses #[link(name = "servo-style", vers = "0.1")] in its crate.
[21:48:54] *** Joins: heftig (heftig@moz-4B3AF61E.dip0.t-ipconnect.de)
[21:50:28] *** Joins: ercx__ (ercan@moz-7CFF3469.dyn.optonline.net)
[21:52:06] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[21:53:27] *** Joins: Ferreus (ferreus@moz-DEC4442C.dyn.telefonica.de)
[21:53:28] <haxney> SimonSapin: how do I use servo-style in an "extern mod" statement?
[21:55:10] *** Joins: RMF (RMF@moz-A7EEA849.dsl.telepac.pt)
[21:55:40] <SimonSapin> haxney: the tutorial says: extern mod my_farm(name = "farm", vers = "2.5");
[21:55:49] <SimonSapin> or just change servo-style to servo_style or something
[21:56:10] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[21:56:12] <haxney> SimonSapin: I have extern mod servo_style (name = "servo-style"); but the compiler can't find the module
[21:56:23] <SimonSapin> with the right -L ?
[21:56:23] <steveklabnik> rustpkg infers names from the package name, yeah
[21:56:35] <steveklabnik> https://github.com/mozilla/rust/issues/8523
[21:56:43] <SimonSapin> change the #[link]
[21:56:46] <haxney> and "extern mod cssparser" works just fine
[21:56:47] <steveklabnik> name and version dont count
[21:57:25] <SimonSapin> oh, are you building servo-style with rustpkg?
[21:57:38] <haxney> SimonSapin: trying to, yeah :)
[21:57:57] <SimonSapin> never used it
[21:58:06] <SimonSapin> but feel free to change stuff in servo-style
[21:58:24] <tjc> haxney: with rustpkg, it would be `extern mod style = "servo-style"`
[21:58:37] <tjc> haxney: and, either servo-style has to be in your RUST_PATH, or else you can give a full path to it
[21:58:52] <tjc> the name "style" can be anything, too; it's just an alias to refer to it within your code
[21:58:55] <haxney> I changed both the directory name and #link to servo_style and it seems to work now
[22:00:40] <haxney> using extern mod style = "servo-style"; says "error: can't find crate for `style`"
[22:01:00] <tjc> haxney: where do you have the sources installed?
[22:01:02] <tjc> for servo-style, I mean
[22:01:14] <haxney> tjc: in ROOT/src/servo_style
[22:01:32] <tjc> haxney: and the package that uses it that you're building is also in ROOT/src?
[22:01:52] *** Joins: canhtak (jeremy@moz-76A9D6A7.wl.t.ulaval.ca)
[22:01:53] <haxney> tjc: yup
[22:02:03] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[22:02:03] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[22:02:05] <tjc> haxney: oh -- servo_style and servo-style are different names
[22:02:10] *** Joins: docbrown (docbrown@5CE9D448.F0B9EFB2.7F8758CE.IP)
[22:02:17] <tjc> either you have to change the extern mod to be = "servo_style" or rename the directory to servo-style
[22:02:39] <haxney> tjc: Well, I just moved everything to "servo_style" and created a "lib.rs" symlink to "servo-sytle.rc"
[22:03:19] <tjc> haxney: Ok, then if you change the extern mod directive to say `extern mod style = "servo_style"`, it should work
[22:03:22] <tjc> with rustpkg, I mean
[22:04:08] *** Quits: eatkinson (eatkinson@moz-D86C5DB2.airbears2.berkeley.edu) (Quit: eatkinson)
[22:04:22] <haxney> tjc: hmm, it works with extern mod servo_style; but not extern mod style = "servo_style";
[22:04:56] <tjc> haxney: Hmm, I'll make a note to test that myself; don't have time right now, but I will
[22:05:01] <tjc> thanks for being patient :-)
[22:05:51] <haxney> tjc: no problem. I got it to work by renaming the "servo-style" folder to "servo_style" and using extern mod servo_style;
[22:05:54] <tjc> cool
[22:06:15] <haxney> tjc: nothing else seemed to work, including adding (name="servo-style")
[22:06:54] <tjc> haxney: It's possible that it doesn't work when a single directory name is given in quotation marks. The tests I have for that feature only have packages with IDs that look like github.com/foo/bar/baz
[22:08:05] <haxney> tjc: is there a difference between extern mod servo_style = "servo-style"; and extern mod servo_style (name="servo-style");
[22:08:37] <tjc> haxney: yes, if you use the second syntax, it won't search the RUST_PATH
[22:08:49] <tjc> however, the second form should probably be removed. historical accident that there are two
[22:09:43] <haxney> Got it, thanks
[22:09:51] <tjc> yw
[22:10:08] *** Joins: pnkfelix1 (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[22:10:27] *** Quits: docbrown (docbrown@5CE9D448.F0B9EFB2.7F8758CE.IP) (Client exited)
[22:10:44] *** Quits: pnkfelix1 (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Max SendQ exceeded)
[22:12:38] *** Quits: canhtak (jeremy@moz-76A9D6A7.wl.t.ulaval.ca) (Quit: canhtak)
[22:15:43] *** Quits: squiddy (squiddy@moz-FC727C13.adsl.alicedsl.de) (Quit: Leaving)
[22:15:58] *** Quits: maik (maik@moz-82B7232D.dip0.t-ipconnect.de) (Ping timeout)
[22:16:32] *** Quits: olivier (chatzilla@moz-2811C56F.fbx.proxad.net) (Quit: ChatZilla 0.9.90.1 [SeaMonkey 2.20/20130803203006])
[22:21:46] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[22:28:09] *** jorendorff is now known as jorendorff_away
[22:28:37] *** Joins: canhtak (jeremy@moz-76A9D6A7.wl.t.ulaval.ca)
[22:29:42] *** jorendorff_away is now known as jorendorff
[22:33:01] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Quit: Lost terminal)
[22:33:33] <brson> well, I'm not sure whether we should release without signing bins and tags or not
[22:34:19] <zxcdw> better safe than sorry!
[22:34:24] <steveklabnik> yeah, seems good to wait
[22:34:26] <steveklabnik> whats the holdup?
[22:34:29] <tjc> brson: I think you get to decide unilaterally whether it's ok to release without signing
[22:34:32] <steveklabnik> or rather
[22:34:35] <steveklabnik> who has the key?
[22:34:54] <steveklabnik> tjc: i can get behind that
[22:35:01] *** Joins: pcwalton (pcwalton@moz-BE33DA21.fw1.sfo1.mozilla.net)
[22:35:01] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:36:54] <Eridius> brson: just make new keys!
[22:37:04] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[22:38:03] <brson> steveklabnik: the signing key i have from graydon is password protected and I don't know the password
[22:38:23] <brson> I could make yet another new key. that would be the third
[22:38:33] <brson> we already lost one!
[22:38:43] <steveklabnik> brson: ahhh, this makes sense.
[22:38:59] <mcpherrin> brson: go look for postits on graydon's desk :)
[22:39:14] <steveklabnik> hehehe
[22:39:39] <tjc> mcpherrin: looking on graydon's desk would require a very long train ride :-)
[22:40:24] *** bent is now known as bent|mtg
[22:40:38] <mcpherrin> tjc: If people are in the offices I think they are, it's a lovely train ride at least! ;)
[22:40:46] <tjc> mcpherrin: indeed, it is
[22:41:05] *** Quits: spott (spott@moz-AF3B474F.colorado.edu) (Client exited)
[22:41:55] <steveklabnik> yeah, id probably just make a new key
[22:42:02] <steveklabnik> it even makes sense, given the handoff
[22:42:10] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[22:42:27] <haxney> How can a pass a Path into a task::try? I keep getting erros about "does not fulfill `Send`, in a bounded closure"
[22:42:36] <Eridius> tjc: I see you add .is_parent_of() to path. Is there a particular reason you decided relative paths can't be ancestors?
[22:42:47] *** Quits: reyre (reyre@moz-89E9865B.com) (Quit: ZNC - http://znc.in)
[22:42:56] <tjc> Eridius: Not particularly. It was good enough for what I was doing
[22:42:59] <tjc> patches welcome, though :-)
[22:43:07] <Eridius> tjc: I'm asking, because I'm just about ready to port everything over to my path rewrite, and my big concern atm is the old .is_ancestor_of and now your new .is_parent_of
[22:43:21] <Eridius> tjc: https://github.com/kballard/rust/tree/path-rewrite
[22:43:45] <Eridius> my .is_ancestor_of() actually tries to behave correctly in all circumstances, meaning relative paths can be ancestors of other relative paths
[22:43:49] <haxney> I'm getting a list of files from std::os::list_dir_path and I want to send them to their own tasks with task::try
[22:43:51] <Eridius> (and windows paths are a nightmare)
[22:44:10] <tjc> Eridius: Yeah, that needs cleanup. I'm not wedded to anything that I added to Path, so please feel free to take a hatchet to it given that you're redesigning the whole thing
[22:44:21] <Eridius> tjc: just today I finished putting the last touches on my rewrite
[22:44:32] <haxney> otherwise, my program gets killed by an assert!
[22:44:34] <Eridius> tjc: I'd actually appreciate it if you have the tim to look over std::path2 in the link I just gave you
[22:44:41] <Eridius> time, even ;)
[22:44:51] <tjc> Eridius: Sure, I have to go in a few minutes but I'll look it over now
[22:45:01] *** Joins: reyre (reyre@moz-89E9865B.com)
[22:45:04] *** jorendorff is now known as jorendorff_away
[22:48:07] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:48:37] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[22:48:43] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[22:48:43] *** ChanServ sets mode: +o pnkfelix
[22:48:59] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[22:49:49] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[22:50:23] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[22:50:25] <tjc> Eridius: At a glance, it looks great. it's good to see rewriting things using default methods, as well as methods that don't allocate
[22:50:50] <tjc> one nit is that you have an anonymous `impl Path â€¦` for one method (get_birthtime) that not all platforms support, and maybe it would be better to have a HasBirthtime trait (or something)...
[22:50:55] <tjc> that only has an impl on FreeBSD and Mac
[22:51:10] <tjc> It'll need an actual review, of course, but I don't see anything objectionable
[22:51:12] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[22:51:32] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[22:52:39] *** Quits: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP) (Ping timeout)
[22:52:47] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[22:52:51] <Eridius> tjc: the stat stuff came directly from the existing path
[22:53:10] <Eridius> everything else is a rewrite. But I'm not sure what to do with stat so I just copied it over
[22:53:20] <tjc> Eridius: Yeah, I'm sure :-) it's just another thing that would be good to improve
[22:53:34] <tjc> it should be an easy change to make, and then I think it would be more obvious to programmers that they're relying on a non-portable interface
[22:53:40] *** Joins: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP)
[22:53:51] <Eridius> yeah, I figure the stat stuff can be re-done separately
[22:54:07] <Eridius> but by leaving it alone for the moment it makes it slightly easier to port everything over, because the stat methods will behave the same
[22:54:18] <Eridius> tjc: thanks for taking a look
[22:54:35] <tjc> Eridius: makes sense
[22:55:03] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[22:55:04] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[22:55:34] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[22:56:20] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[22:57:01] <brson> i wonder if we've intentionally stopped generating a pdf manual. I don't have one for 0.8
[22:57:53] <brson> seems like there's still code for it in the makefiles :-/ this is getting frustrating
[22:58:12] <jeaye> :|
[22:58:20] *** Quits: skade (skade@moz-F00266FA.dip0.t-ipconnect.de) (Quit: Textual IRC Client: www.textualapp.com)
[22:59:51] <steveklabnik> brson: what is?
[23:00:06] <steveklabnik> brson: i am feeling very frustrated by software today, as well.
[23:00:28] <brson> steveklabnik: a lot of little obstacles to getting 0.8 out
[23:01:18] *** Quits: huseby (huseby@19BD73A1.5D8BCA3A.A0C1B52F.IP) (Quit: Leaving)
[23:01:37] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[23:01:40] <steveklabnik> if it makes you feel any better apparently i released a rubygem that has 30,000 active users that's just broken because the test framework required a dependency that the real code didnt
[23:01:54] <tjc> :-(
[23:01:56] <steveklabnik> so my tests passed, and the person who was doing the actual prerelease testing apparently just didn't do it and didn't tell me
[23:02:02] <steveklabnik> so i assumed that it was working for him for the past month
[23:02:22] <steveklabnik> tomorrow will be better.
[23:02:49] <tjc> and the day after tomorrow? even better :-)
[23:03:01] *** Quits: canhtak (jeremy@moz-76A9D6A7.wl.t.ulaval.ca) (Quit: canhtak)
[23:04:45] *** Quits: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[23:05:32] *** Quits: ozten (ozten@19BD73A1.5D8BCA3A.A0C1B52F.IP) (Quit: ozten)
[23:06:49] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[23:08:10] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[23:09:03] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[23:09:16] *** Quits: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP) (Quit: tikue_)
[23:11:36] *** Joins: snerd_ (motk@moz-E535583C.nonstopcrunchy.net)
[23:11:38] *** Quits: snerd_ (motk@moz-E535583C.nonstopcrunchy.net) (Quit: snerd_)
[23:12:21] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[23:15:19] *** Joins: canhtak (jeremy@moz-76A9D6A7.wl.t.ulaval.ca)
[23:16:09] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[23:16:26] *** Joins: Seryogah (Seryogah@moz-9E1A4F71.dip0.t-ipconnect.de)
[23:16:49] *** Quits: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se) (Ping timeout)
[23:17:50] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[23:18:53] *** Joins: lenstr_ (lenstr@AF8EB999.6049B16A.85938D85.IP)
[23:18:58] *** Quits: lenstr_ (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[23:19:25] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[23:19:46] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[23:20:04] *** Joins: ofeldt- (ofeldt@moz-539A02CF.dip0.t-ipconnect.de)
[23:20:18] *** Quits: Seryogah (Seryogah@moz-9E1A4F71.dip0.t-ipconnect.de) (Client exited)
[23:20:29] *** Joins: eatkinson (eatkinson@moz-9550586.airbears2.berkeley.edu)
[23:20:55] *** Quits: ofeldt (ofeldt@moz-2C983C49.dip0.t-ipconnect.de) (Ping timeout)
[23:20:57] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[23:21:35] *** Joins: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net)
[23:22:33] *** Quits: haxney (dan@moz-424CB7EB.cs.brown.edu) (Client exited)
[23:23:32] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[23:24:03] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[23:24:18] *** Joins: seryogah (holoirc@moz-9E1A4F71.dip0.t-ipconnect.de)
[23:25:45] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[23:26:15] <derboi_c> Why my final object, compile with rustc, is dynamicly link with KVM even though only libuv used KVM?
[23:26:24] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[23:27:23] <strcat> derboi_c: try -Wl,--as-needed
[23:27:47] <strcat> rust statically links in libuv by default though, if you're not disabling the runtime
[23:27:55] <strcat> hrm
[23:28:02] <strcat> well it statically links it to librustrt
[23:28:07] <strcat> and maybe it inlines some of that
[23:28:23] <strcat> nvm it can't inline that
[23:28:40] <derboi_c> statically? with ldd i see librustrt
[23:28:55] <strcat> derboi_c: I mean it puts libuv inside librustrt
[23:29:10] <derboi_c> ok :/
[23:29:10] <strcat> so without -Wl,--as-needed it will probably pick it up
[23:29:28] <strcat> ld is very over-eager without being patched like ubuntu/debian do
[23:29:43] <strcat> links to all of a dep's deps
[23:30:22] <derboi_c> Is not realy a probleme because no symbole link need a link to libkvm, so i will not get error on this, but i found it strange ^^
[23:30:53] <cmr> derboi_c: what platform are you on?
[23:31:02] <derboi_c> freebsd
[23:31:15] <derboi_c> (if is it the question)
[23:31:21] <cmr> yes, thank you
[23:31:26] * cmr was curious what libkvm was
[23:31:27] <strcat> depending on what you're doing, you might what to use #[no_std] to omit the stdlib and define lang items yourself too
[23:31:49] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[23:32:09] <strcat> like http://ix.io/8fH , if you want zero external deps by default
[23:32:14] *** Quits: canhtak (jeremy@moz-76A9D6A7.wl.t.ulaval.ca) (Quit: canhtak)
[23:32:18] *** Quits: slackito (slackito@moz-7779E4A6.dyn.user.ono.com) (Quit: leaving)
[23:32:23] <derboi_c> I already use it on my rust lib, but no on my code source. When i compile, juste "start" and "__morestack" is export
[23:32:52] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[23:32:54] <derboi_c> strcat: thx :D
[23:33:01] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[23:33:17] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[23:33:50] *** Quits: victorporof (victorporo@77FE7E86.477C3F8E.79933D60.IP) (Quit: victorporof)
[23:34:06] <derboi_c> cmr: libkvm is a lib which gave some function to create and manage VM independanting on your ARCH (cpu)
[23:34:25] <derboi_c> you can do a kernel with 'zero' materiel depends
[23:34:36] *** Joins: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP)
[23:34:36] <derboi_c> theoricaly :D
[23:34:52] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[23:36:51] *** Quits: sruggier (sruggier@B3C08253.4562CF68.6BEEAEBD.IP) (Quit: Leaving.)
[23:37:41] *** Quits: eatkinson (eatkinson@moz-9550586.airbears2.berkeley.edu) (Ping timeout)
[23:38:48] *** Joins: eatkinson (eatkinson@moz-9550586.airbears2.berkeley.edu)
[23:38:52] *** Joins: mib_kc1q6v (Mibbit@moz-F4E0C91D.dsl.bell.ca)
[23:39:01] *** Quits: mib_kc1q6v (Mibbit@moz-F4E0C91D.dsl.bell.ca) (Quit: http://www.mibbit.com ajax IRC Client)
[23:39:05] <acrichto> ChrisMorgan: ping
[23:39:13] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[23:39:13] <ChrisMorgan> acrichto: pong
[23:39:46] <acrichto> ChrisMorgan: so I realized the other day that vim auto-inserting comments worked if the comment was to the far-left, but if the comment was tabbed over at all it wouldn't auto-insert comments beneath
[23:40:01] <acrichto> I was wondering if you knew whether our vim file did anything that might cause that
[23:40:19] <ChrisMorgan> *Sigh* each time someone pings me I hope it'll be about rust-http, but noâ€”Vim each time... :P
[23:40:25] <acrichto> :(
[23:40:33] <acrichto> ChrisMorgan: ping
[23:40:38] <acrichto> ChrisMorgan: rust-http sux
[23:40:40] <steveklabnik> ChrisMorgan: i really really really want to start using rust-http
[23:40:40] <acrichto> :D
[23:40:43] <acrichto> jk, jk
[23:40:45] <steveklabnik> i haven't had the time yet
[23:40:48] <steveklabnik> very soon though
[23:40:50] <steveklabnik> like, within the month
[23:40:53] *** Quits: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP) (Ping timeout)
[23:40:57] <ChrisMorgan> acrichto: that's your fault, you haven't worked on it enough yet. Get cracking! :-)
[23:41:07] <acrichto> it's true :(
[23:41:33] <ChrisMorgan> acrichto: Vim version?
[23:41:45] <acrichto> ChrisMorgan: 7.3
[23:42:05] <ChrisMorgan> Patch level under 584?
[23:42:09] *** Joins: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP)
[23:43:05] *** Quits: mark_edward (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Client exited)
[23:43:13] <ChrisMorgan> (With Vim 7.4, it works as expected from any column.)
[23:43:19] <acrichto> no patch level shows up
[23:43:23] <acrichto> so I assume yeah
[23:43:33] <brson> can somebody verify these hashes and signatures (2 hashes, 2 signatures): https://gist.github.com/brson/6722182
[23:45:01] <acrichto> brson: you swapped the hashes
[23:45:31] *** Joins: Azdle (patrick@moz-8C723B60.hsd1.mn.comcast.net)
[23:45:56] <steveklabnik> brson: on it
[23:46:15] <derboi_c> strcat: your code paste in http://ix.io/8fH is for 0.7 version? i get https://gist.github.com/anonymous/6722216
[23:46:18] <brson> acrichto: glad i asked for confirmation!
[23:46:22] <strcat> derboi_c: for master/0.8
[23:46:24] <brson> updated thi gist
[23:46:42] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[23:46:43] <strcat> derboi_c: 0.7 required that you define every lang item, now you only have to define the ones you use
[23:46:44] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[23:46:57] <derboi_c> strcat: ok =/
[23:47:22] <derboi_c> i hesite to change my port to your git directly :D
[23:47:24] <acrichto> brson: the signatures spit out: "gpg: WARNING: This key is not certified with a trusted signature!"
[23:47:36] <brson> this is the blurb i'm going to use for the announce https://gist.github.com/brson/6722223
[23:47:40] <acrichto> brson: otherwise the signatures check out (although someone else should confirm this, I use gpg very little)
[23:47:48] <strcat> derboi_c: well, 0.7 was just a tag on master
[23:48:03] <acrichto> goo blurb
[23:48:03] <acrichto> good*
[23:48:09] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[23:48:09] <strcat> derboi_c: it's less robust than master, because every pull request runs through an ever-improving test suite before landing
[23:48:14] <brson> acrichto: i think that's ok and just means that you haven't confirmed that you trust that key
[23:48:32] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:48:34] <strcat> 0.8 will be out soon anyway ;p
[23:48:56] <acrichto> brson: looks like the updated gist all checks out
[23:49:03] <steveklabnik> starbuck's wifi is NOT Happy
[23:49:04] <steveklabnik> lol
[23:49:11] <brson> now to learn how to git tag
[23:49:20] <strcat> brson: make sure to use -a :)
[23:49:26] <acrichto> never done a signed git tag
[23:49:34] <strcat> brson: and can we just have a '0.8' one this time? rather than two (one with release-)
[23:49:46] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[23:49:49] <strcat> it's annoying to have 2 because git doesn't really know which is meant to be used
[23:49:54] <engla> it's git tag -s  for a signed tag
[23:49:58] <strcat> oh right
[23:50:00] <derboi_c> strcat: ok, 0.8 (master) done
[23:50:00] <strcat> ;p
[23:50:12] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[23:50:52] *** bent|mtg is now known as bent
[23:50:53] <eevee> "minor adjustments to the language" ... "runtime was rewritten" ...  :)
[23:50:53] <brson> strcat: ok
[23:51:02] <steveklabnik> brson: commented
[23:51:12] <strcat> we could delete the old release- ones but one non-prefixed one is missing
[23:51:26] <strcat> a 0.x.1 one
[23:51:48] <amatus>  error: type `&std::path::PosixPath` does not implement any method in scope named `open_reader`
[23:51:54] <strcat> I only care about 'git describe' working well *now* though, not historically :)
[23:53:16] <steveklabnik> brson: tarball is good, downloading exe now
[23:54:22] <brson> steveklabnik: thanks
[23:54:41] *** Joins: wil (wil@C31F2091.387BC77F.DDE5D3F6.IP)
[23:54:46] <steveklabnik> HOW DO I KNOW THIS IS THE REAL BRSON
[23:54:51] <brson> steveklabnik: i think i prefer a non-bulletted form here. the announcement is also accompanied by a hugely detailed bulleted list
[23:54:53] <steveklabnik> WHAT IF YOU MADE A NEW KEY AND ITS NOT YOU
[23:54:53] <steveklabnik> :)
[23:54:56] <steveklabnik> ahh, fair enough
[23:55:02] <steveklabnik> the copy edits were 'library -> 'standard library'
[23:55:07] <brson> ok, i'll make that change
[23:55:08] <steveklabnik> and.... something else, i forget. maybe not
[23:55:10] <steveklabnik> that was the big one
[23:55:22] <ChrisMorgan> acrichto: Vim 7.3 is old enough that deficient behaviour with the formatoptions is not unexpected.
[23:55:29] <steveklabnik> does the announcement have # of contributors to this release? that's always a fun stat
[23:55:34] <acrichto> ChrisMorgan: :(, but this used to work...
[23:55:42] <acrichto> I suppose I should just update anyway
[23:55:47] <ChrisMorgan> acrichto: :set fo?
[23:55:49] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[23:55:55] *** Quits: nkoep (nik@moz-F23F1945.pool.mediaways.net) (Client exited)
[23:55:57] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[23:55:58] *** Parts: judder (maradukewa@1BB87CE.111872A8.950D3BB5.IP) ()
[23:56:01] <acrichto> ChrisMorgan: croqnl
[23:56:33] <brson> steveklabnik: that's a fair point. there's no real security guarantee here
[23:56:44] *** Joins: sp3d (a@6361F3B1.19CD1E54.8354FB35.IP)
[23:56:49] <ChrisMorgan> As it should be... it's possible that there's some other option set somewhere in your config that changes the behaviour for it all.
[23:56:49] <steveklabnik> it does prove that it downloaded without corruption
[23:56:55] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[23:56:58] <steveklabnik> which is reasonable
[23:57:07] <steveklabnik> but yes, ideally, the key gets signed.
[23:57:15] <steveklabnik> i dont think it's a big deal for a language nobody should be using in production yet ;)
[23:57:26] <steveklabnik> i may be a bit of a security nut but even I"M not that big of one
[23:57:28] <brson> strcat: what is an 'unsigned annotated tag object' (-a)?
[23:58:00] <strcat> brson: you actually want -s
[23:58:02] <strcat> forgot
[23:58:08] <engla> git tag -a  makes a "real" git tag. git tag -s is the same but with a signature
[23:58:26] <strcat> you just never want to push regular annotated tags
[23:58:30] <strcat> er
[23:58:30] <engla> and the default git tag is just a sticker like a branch, and these should never be transmitted
[23:58:35] <strcat> you just never want to push regular non-annotated tags*
[23:59:28] *** Quits: wil (wil@C31F2091.387BC77F.DDE5D3F6.IP) (Ping timeout)
[23:59:32] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[23:59:50] <acrichto> ChrisMorgan: perhaps it's b/c I'm using vundle? I stripped everything out of my vimrc except for vundle and it's got the same behavior
[23:59:51] <strcat> annotated means it gets a commit msg, author, etc.
