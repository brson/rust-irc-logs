[00:06:57] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[00:14:53] *** Joins: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP)
[00:15:24] *** Quits: tjc (tjc@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[00:17:19] *** Joins: jdm (jdm@C3C6F793.EF30B9DB.EB76137B.IP)
[00:18:56] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[00:18:56] *** ChanServ sets mode: +o tjc
[00:25:48] *** Quits: jdm (jdm@C3C6F793.EF30B9DB.EB76137B.IP) (Quit: Lost terminal)
[00:43:56] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[00:45:01] *** Quits: rlbaker (rlbaker@moz-D05907D4.hfc.comcastbusiness.net) (Quit: rlbaker)
[01:00:34] *** Quits: kimundi (kimundi@moz-F77364E2.dip0.t-ipconnect.de) (Ping timeout)
[01:03:35] *** Joins: kimundi (kimundi@moz-F77364E2.dip0.t-ipconnect.de)
[01:06:31] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[01:09:15] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[01:09:24] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[01:13:53] *** Quits: kimundi (kimundi@moz-F77364E2.dip0.t-ipconnect.de) (Ping timeout)
[01:14:06] *** Joins: kimundi (kimundi@moz-F77364E2.dip0.t-ipconnect.de)
[01:14:07] *** nrc is now known as nrc|afk
[01:23:30] *** kimundi is now known as zz_kimundi
[01:28:23] *** Quits: zz_kimundi (kimundi@moz-F77364E2.dip0.t-ipconnect.de) (Ping timeout)
[01:31:29] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[01:32:37] *** Joins: zz_kimundi (kimundi@moz-F77364E2.dip0.t-ipconnect.de)
[01:32:55] *** zz_kimundi is now known as kimundi
[01:56:57] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[02:01:32] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[02:01:43] *** Joins: Jesse_ (jruderman@moz-BBE3ABD.mv.mozilla.com)
[02:04:49] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 23.0.1/20130814063812])
[02:07:42] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[02:11:31] *** Joins: jack (jack@moz-DF5A9AA3.members.linode.com)
[02:15:51] *** Quits: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net) (Ping timeout)
[02:23:17] <Eridius> I see raw strings were discussed during yesterday's meeting. But of course we still need to nail down the syntax. What's the process for determining consensus?
[02:23:34] * Eridius was hoping that someone from Mozilla would just declare by fiat which of the current discussed syntaxes would be used
[02:23:58] <Eridius> i.e. C++11 vs the various other variants using # or user-defined strings
[02:36:19] *** Quits: kimundi (kimundi@moz-F77364E2.dip0.t-ipconnect.de) (Ping timeout)
[02:36:55] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:40:08] *** Joins: zz_kimundi (kimundi@moz-822AC7D.dip0.t-ipconnect.de)
[02:40:10] *** zz_kimundi is now known as kimundi
[02:40:30] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[02:40:30] *** ChanServ sets mode: +qo brson brson
[02:45:28] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[02:46:41] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:46:53] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Connection reset by peer)
[02:46:54] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:00:38] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[03:05:01] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[03:05:01] *** ChanServ sets mode: +qo brson brson
[03:07:36] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[03:08:15] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[03:10:27] *** nrc|afk is now known as nrc
[03:17:29] *** Quits: Jesse_ (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse_)
[03:18:32] *** Quits: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP) (Ping timeout)
[03:18:53] *** Joins: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP)
[03:20:53] *** Quits: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP) (Ping timeout)
[03:21:25] *** Joins: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP)
[03:43:08] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[03:49:19] *** Quits: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP) (Ping timeout)
[03:49:56] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[03:50:22] *** Joins: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP)
[04:09:35] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:26:33] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[04:41:15] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[05:21:19] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[06:00:56] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[06:00:56] *** ChanServ sets mode: +o pnkfelix
[06:52:10] *** Joins: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net)
[07:20:05] *** Quits: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net) (Quit: dbaupp)
[07:28:25] *** Joins: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net)
[07:44:48] *** Quits: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP) (Quit: tikue_)
[08:01:14] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[08:02:38] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[08:09:48] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:09:54] *** Quits: hansjorg (hansjorg@moz-41C5CE61.redpill-linpro.com) (Quit: Lost terminal)
[08:12:01] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[08:34:28] *** Joins: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[08:34:59] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[09:07:48] *** flaper87|afk is now known as flaper87
[09:12:26] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (Ping timeout)
[09:12:26] *** Quits: kimundi (kimundi@moz-822AC7D.dip0.t-ipconnect.de) (Ping timeout)
[09:12:34] *** Quits: benh (ben@moz-4A0366D2.org) (Ping timeout)
[09:12:44] *** Quits: andrew-d (andrew-d@6C6C9B53.23518FA3.CE794808.IP) (Ping timeout)
[09:12:46] *** Joins: zz_kimundi (kimundi@moz-822AC7D.dip0.t-ipconnect.de)
[09:12:58] *** zz_kimundi is now known as kimundi
[09:13:34] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[09:14:07] *** Quits: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net) (Ping timeout)
[09:15:09] *** Joins: benh (ben@moz-4A0366D2.org)
[09:15:23] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (Ping timeout)
[09:15:25] *** Quits: Seldaek (seld@moz-5DEA7688.ch) (Ping timeout)
[09:15:34] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[09:16:07] *** Joins: andrew-d (andrew-d@6C6C9B53.23518FA3.CE794808.IP)
[09:16:24] *** Joins: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net)
[09:16:47] *** Joins: Seldaek (seld@moz-5DEA7688.ch)
[09:17:09] *** Joins: kaeso (kaeso@moz-F21FF626.unstable.it)
[09:20:07] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[09:21:31] *** Quits: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue_)
[09:25:42] *** Joins: hansjorg (hansjorg@moz-41C5CE61.redpill-linpro.com)
[09:25:43] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[09:33:21] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[09:36:28] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Ping timeout)
[09:37:57] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[09:48:21] *** Joins: pnkfelix (pnkfelix@A34AB32F.6B30872B.A515248C.IP)
[10:09:59] <pnkfelix> Eridius: I figured I'd wait for the topic of raw-strings to settle down a little more, it seemed like there was still active discussion a few days prior to the mtg on Tuesday
[10:11:33] <pnkfelix> Eridius: At this point I'm thinking of pushing for something similar to Kimundi's proposed r"<raw>" + r#delimited#"<raw>"#delimited# syntax.
[10:12:07] <pnkfelix> (that, or C++11).
[10:14:13] <kimundi> Eridius: Best of all combinations, imo: r"hello", r###""##"###
[10:17:56] <pnkfelix> kimundi: I guess that subset syntax does have the advantage of being forward compatible with what I said.  That would make it more likely to land in the short term I suspect.
[10:23:03] <kimundi> pnkfelix: You mean onlly allowing # for now, with arbitrary strings as a possible extension in the future?
[10:23:56] <pnkfelix> kimundi: (yeah.  probably "arbitrary strings" in the sense of being free of " and whitespace.)
[10:24:26] <kimundi> yeah. I'm personally think you don't need to allow anything more than '#' anyway.
[10:25:00] <kimundi> less variations == good
[10:25:59] <kimundi> can always add a regular comment if you want to document the end of a long raw string literal
[10:29:17] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[10:38:29] <nmatsakis> is the #delimited# needed for any raw string that may embed a quote?
[10:39:21] <pnkfelix> nmatsakis: no.   r#" this has a quote here "  and here " but ends here "#
[10:40:20] <pnkfelix> nmatsakis: the #delimited# is for those who find r#end#" this is more readable or at least explicit"#end#
[10:40:20] <nmatsakis> I see.
[10:40:24] <nmatsakis> I guess that's not too ugly
[10:41:10] <pnkfelix> nmatsakis: but kimundi is arguing to restrict the alphabet of #delimiter# to a singleton set: { # }
[10:41:21] <nmatsakis> yes I see
[10:41:42] <nmatsakis> ok, I have no strong opinion, though I tend to think kimundi's right
[10:45:47] <pnkfelix> nmatsakis: I admit, I do not have much of a counter argument beyond it offering the option of self-documentation.
[10:47:13] <pnkfelix> nmatsakis: I keep thinking that languages like Markdown and Shell with their use of "####" are counter-examples, but even there, one rarely sees a leading double-quote before the hash-series.
[10:47:49] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[10:48:14] <dbaupp> would r#/*comment*/#"foo"## be valid?
[10:48:41] <pnkfelix> dbaupp: i would not think so
[10:49:06] <strcat> rusti: 1.0f64
[10:49:09] -rusti- 1f64
[10:49:18] <dbaupp> pnkfelix: ok
[10:49:43] <dbaupp> (Hm, I guess that was a stupid question 1.2/*comment*/3 isn't valid, and this isn't particularly different.)
[10:50:10] <pnkfelix> dbaupp: no stupid questions, only stupid syntaxes.
[10:53:45] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[10:58:39] *** Joins: cyndis (cyndis@moz-C4357EA7.kapsi.fi)
[11:46:33] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[12:19:35] *** Joins: jensnockert (jensnocker@moz-2B3A7EE9.mobileonline.telia.com)
[12:20:23] *** Quits: jensnockert (jensnocker@moz-2B3A7EE9.mobileonline.telia.com) (Connection reset by peer)
[12:20:43] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[12:23:39] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[12:55:26] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[13:12:53] *** Joins: SimonSapin (simon@moz-9A1FE870.exyr.org)
[13:13:19] <SimonSapin> Hi. Is this channel only for the compiler, or also the standard library?
[13:17:18] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[13:18:12] <jensnockert> Is there any way to `make check` without it running the formatting checks?
[13:19:16] <dbaupp> jensnockert: you mean tidy?
[13:19:25] <jensnockert> dbaupp: I probably do.
[13:20:02] <dbaupp> you can run `make check-stage2-{rpass,cfail,std,extra}` (etc) to run specific targets
[13:20:56] <dbaupp> https://github.com/mozilla/rust/wiki/Note-testsuite doesn't mention anything about tidy, so I don't know any more :P
[13:20:57] <jensnockert> Ok, that's what I have been doing, but I felt lazy :S
[13:21:01] <dbaupp> pnkfelix: ^
[13:21:52] <dbaupp> SimonSapin: I'd interpreted it as things related to the github.com/mozilla/rust repo, but it could easily be more specific
[13:22:34] <pnkfelix> jensnockert: no, to my knowledge there's no easy way to bypass `make tidy` when doing `make check`.  (We didn't used to include `tidy` as part of `check` at all, and that was bad.)
[13:23:02] <jensnockert> Yeah, but the issue is that I made a new snapshot, and it says a lot of unrelated code is bad :(
[13:23:12] *** kimundi is now known as zz_kimundi
[13:23:34] <jensnockert> Like `/Users/Jens/Code/Git/rust/src/libsyntax/ext/expand.rs:897: NOTE(acrichto): start removing this after the next snapshot`
[13:23:44] <pnkfelix> jensnockert: oh, hmm.
[13:25:36] <pnkfelix> jensnockert: oh wait
[13:25:43] <pnkfelix> jensnockert: there's a `check-notidy` target
[13:25:47] <jensnockert> \o/
[13:25:54] * jensnockert hugs pnkfelix
[13:26:21] <jensnockert> You're the bestest!
[13:26:51] <pnkfelix> jensnockert: np, I got lucky that time.
[13:28:08] <dbaupp> pnkfelix: weirdly `remake --targets | grep tidy` doesn't show either check-tidy or check-notidy; is this a known interaction between remake and our makefiles?
[13:28:10] <pnkfelix> jensnockert: I don't understand though ‚Äî those, NOTE's, they don't cause `make tidy` to fail, do they?  I thought they just cause a warning to be issued to the output device
[13:28:22] <jensnockert> pnkfelix: Makes it fail.
[13:28:35] <pnkfelix> jensnockert: weird, I must not know how to read Python anymore
[13:28:58] <pnkfelix> dbaupp: `‚Äîtargets` is not an option I know for remake ...
[13:29:44] <dbaupp> pnkfelix: `--targets                   Give list of explicitly-named targets.` what do you normally use? (assuming I remembered correctly that you use remake?)
[13:30:11] <dbaupp> jensnockert: are you sure there isn't a trailing whitespace/too-long-line error hiding in there somewhere?
[13:30:19] <pnkfelix> dbaupp: I do, but I don't see that option on my version ‚Ä¶ GNU Make 3.82+dbg-0.6
[13:30:21] *** Parts: SimonSapin (simon@moz-9A1FE870.exyr.org) (WeeChat 0.3.8)
[13:30:43] <dbaupp> $ remake -v
[13:30:43] <dbaupp> GNU Make 3.82+dbg0.9
[13:30:44] <dbaupp> weird
[13:30:49] <jensnockert> dbaupp: https://gist.github.com/jensnockert/6714180 <- Logs.
[13:30:59] <pnkfelix> dbaupp: maybe they added it in the last 0.3 updates
[13:31:10] <dbaupp> jensnockert: https://gist.github.com/jensnockert/6714180#file-gistfile1-txt-L14-L15
[13:31:14] <pnkfelix> (time to upgrade!)
[13:31:29] <jensnockert> dbaupp: Yes, but it still isn't in my code.
[13:31:37] <dbaupp> oh! weird
[13:32:04] <jensnockert> Oh well.
[13:32:11] <jensnockert> I learned something new today at least.
[13:34:28] <pnkfelix> dbaupp: where did you get 0.9 from?  I only see 0.6 on the online repo...
[13:35:01] <dbaupp> pnkfelix: it's what's in debian's package manager
[13:36:03] <pnkfelix> ah, wait, i see something else now marked as 0.9
[13:36:19] <pnkfelix> the download package from sourceforge is 0.6
[13:54:24] <pnkfelix> dbaupp: Okay, so now i've upgraded to 0.9, and have a `‚Äîtargets` option.  And of course, you are correct; once again, our crazy Makefile infrastructure with its dynamically-generated set of targets gets in our way here.
[13:55:24] <pnkfelix> % remake --targets | grep tidy
[13:55:24] <pnkfelix> % remake tidy --targets | grep tidy
[13:55:24] <pnkfelix> 	check-notidy
[13:55:24] <pnkfelix> 	tidy
[13:55:24] <pnkfelix> % 
[13:55:34] <pnkfelix> dbaupp: ^
[13:59:52] <jensnockert> Lol, tests pass <3.
[13:59:57] <jensnockert> Removing all intrinsics.
[14:00:04] <jensnockert> Non-memcpy intrinsics.
[14:02:53] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[14:07:23] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0/20130917123208])
[14:10:54] <nmatsakis> pnkfelix: don't speak ill of our makefiles. they are a work of art. a study in complexity. something to be admired and feared.
[14:11:00] <nmatsakis> mostly feared.
[14:11:04] <pnkfelix> and tamedc
[14:11:17] <pnkfelix> like a wilderness
[14:49:45] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[14:49:46] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[15:04:08] <olsonjeffery> only the dead can know the end of build-related tech-burden.
[15:29:26] *** Joins: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[15:31:19] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[15:39:01] *** Joins: jensnockert (jensnocker@moz-665BCADE.wireless.lu.se)
[15:41:06] *** Quits: jensnockert (jensnocker@moz-665BCADE.wireless.lu.se) (Connection reset by peer)
[15:41:23] *** Joins: jensnockert (jensnocker@moz-665BCADE.wireless.lu.se)
[15:45:05] *** Quits: jensnockert (jensnocker@moz-665BCADE.wireless.lu.se) (Connection reset by peer)
[15:52:10] *** Quits: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue_)
[16:16:52] *** flaper87 is now known as flaper87|afk
[16:30:48] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:34:22] <acrichto> what in the world is this error http://buildbot.rust-lang.org/builders/auto-linux-64-nopt-c/builds/805/steps/compile/logs/stdio
[16:35:10] <cmr> acrichto: very good question
[16:35:32] <acrichto> that's really weird b/c it bootstrapped on osx
[16:41:10] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:52:15] <acrichto> nmatsakis: ping
[16:55:15] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[16:56:54] <nmatsakis> acrichto: pong
[16:57:15] <acrichto> nmatsakis: so I was messing around with privacy, and "pub all the way down" doesn't work for a few patterns we have in libstd
[16:57:27] <acrichto> we have a top-level 'mod unicode', but nothing can access it because it's not pub
[16:57:36] <acrichto> I was curiuos what your thoughts were on that
[16:57:56] <acrichto> it's kinda the idea of a "crate helper module" which you don't wnat to export, but you want more than one module inside your crate to be able to access it
[16:58:23] <acrichto> do you think this is indicative of a need for a reorganization of modules in libstd, or that the privacy rules may need to change?
[16:58:33] <nmatsakis> acrichto: the rule I envisioned would make unicode available to all
[16:58:46] <nmatsakis> acrichto: in particular, you could always access any member of yourself or an ancestor
[16:58:57] <nmatsakis> acrichto: but you cannot access X::Y if Y is not pub
[16:58:58] <acrichto> nmatsakis: whoa
[16:59:15] <acrichto> so I can access any private member of my ancestors?
[16:59:19] <nmatsakis> acrichto: as I understood it, that was the rule we originally discussed way back when.
[16:59:26] <nmatsakis> acrichto: yes, because sub-modules are part of you.
[16:59:35] <acrichto> interesting...
[16:59:38] <nmatsakis> acrichto: if you want to hide it from your submodules, it should be in a submodule itself
[16:59:44] <nmatsakis> that was the idea,
[16:59:46] <nmatsakis> it's not perfect.
[17:00:02] <acrichto> you're the first person I've talked to who has a concrete idea of what it's supposed to be though :)
[17:00:18] <acrichto> it sounds reasonable enough to me
[17:00:20] <acrichto> I shall implement that
[17:00:25] *** Quits: pnkfelix (pnkfelix@A34AB32F.6B30872B.A515248C.IP) (Quit: Leaving.)
[17:01:23] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:01:23] *** ChanServ sets mode: +qo brson brson
[17:01:24] <nmatsakis> acrichto: ok. there is precendent. it's e.g. the scoping rules of nested java objects 
[17:01:41] <acrichto> yay precedent!
[17:02:16] <nmatsakis> not sure if that situation is precisely analogous
[17:02:46] <acrichto> it "makes logical sense" to me
[17:04:15] <engla> acrichto: right now the rules must be different for traits and structs I think
[17:04:44] <engla> acrichto: std::rt::io::extensions is non-pub, and ByteIterator is not accessible because of that
[17:05:28] <acrichto> engla: I think that means that it should be pub
[17:06:31] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[17:06:31] *** ChanServ sets mode: +o tjc
[17:06:43] *** Joins: pnkfelix (pnkfelix@A34AB32F.6B30872B.A515248C.IP)
[17:07:53] <engla> my first try at exporting ByteIterator without making extensions pub didn't compile
[17:08:08] <engla> just adding a pub use  in std::rt::io/mod.rs just like for ReaderUtil
[17:08:57] <engla> I'm looking at this and maybe it didn't compile because it was in --disable-debug mode
[17:28:26] *** Joins: pcwalton (pcwalton@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:28:26] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:28:39] <pcwalton> I think that almost nobody will ever hit this
[17:29:09] <cmr> hit what?
[17:29:14] <pcwalton> tjc: brson: ^
[17:29:30] <pcwalton> you have to be like over 1e350
[17:29:33] <pcwalton> for it to matter
[17:29:42] <pcwalton> yeah, it's 1e10000
[17:29:45] <pcwalton> that people are talking about
[17:30:08] <pcwalton> this is technically a backwards compatibility issue
[17:30:13] <pcwalton> but I don't think anybody will ever hit it
[17:30:22] <pcwalton> so I'd be fine with making it post 1.0
[17:30:47] *** Joins: jensnockert (jensnocker@moz-2B3A7EE9.mobileonline.telia.com)
[17:31:19] <engla> acrichto: the compile failure is unrelated to the change I did. :/
[17:31:51] *** Joins: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP)
[17:32:20] <acrichto> engla: on a pull?
[17:36:43] <engla> on master. I have to try with a clean build
[17:36:45] <engla> "error: internal compiler error: encode_symbol: id not found 321677"
[17:37:06] <engla> when compiling librustc
[17:37:33] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[17:39:09] <pcwalton> I think this isn't really an actionable bug
[17:39:15] <pcwalton> it's kind of a metabug
[17:39:18] <pcwalton> let's not block on metabugs
[17:39:47] <pnkfelix> pcwalton: FYI we are in #rust-triage, might be better to put your notes there
[17:39:57] <pcwalton> ok
[17:41:43] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[17:49:58] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[17:51:22] *** Quits: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP) (Ping timeout)
[17:51:53] *** Joins: StarLight (StarLight@moz-5873EB8D.dynamic.avangarddsl.ru)
[17:51:56] *** Joins: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP)
[18:04:07] *** Quits: pnkfelix (pnkfelix@A34AB32F.6B30872B.A515248C.IP) (Quit: Leaving.)
[18:05:19] *** Quits: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP) (Ping timeout)
[18:05:52] *** Joins: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP)
[18:06:20] *** Quits: pcwalton (pcwalton@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: pcwalton)
[18:09:45] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[18:09:45] <ghrust> 01[13rust01] 15none pushed 6 new commits to 06master: 02http://git.io/9d77Hw
[18:09:45] <ghrust> 13rust/06master 1423a067d 15Florian Hahn: Rename from_utf8 to from_bytes again
[18:09:45] <ghrust> 13rust/06master 14252c6db 15David Creswick: Fix visibility of digest implementations
[18:09:45] <ghrust> 13rust/06master 14d8957e6 15Steven Fackler: Some struct visibility fixes
[18:09:47] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[18:16:36] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[18:18:15] <kmc> "Rename from_utf8 to from_bytes again"   (‚ïØ¬∞‚ñ°¬∞Ôºâ‚ïØÔ∏µ ‚îª‚îÅ‚îª
[18:18:29] <engla> look at the PR
[18:18:31] <cmr> Wait why did that get approved
[18:18:43] <cmr> Oh extra::bitf
[18:18:45] <cmr> Oh extra::bitv
[18:18:59] <kmc> oh ;P
[18:23:54] <acrichto> yeah it scared me as well
[18:26:04] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:26:24] <strcat> brson: rust doesn't compile anymore in a clean chroot :(
[18:27:16] <strcat> note: /usr/bin/ld: cannot find -lrustrt
[18:27:19] <strcat> strange
[18:28:35] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:31:42] <strcat> it compiles for me outside of one.... lets see if I don't have rust installed globally
[18:56:38] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[18:56:38] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/OUy76Q
[18:56:38] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[19:01:30] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[19:01:30] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/3xt8CA
[19:01:30] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[19:01:36] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[19:01:36] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/jwC5rA
[19:01:36] <ghrust> 13rust/06auto 1432911f6 15Felix S. Klock II: Regression test for ICE.  Fix #5153.
[19:01:36] <ghrust> 13rust/06auto 1447f2e80 15bors: auto merge of #9515 : pnkfelix/rust/fsk-test-for-issue-5153, r=alexcrichton...
[19:01:37] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[19:02:28] <strcat> brson: well on the positive side the 0.8 tarball you posted does still build in a chroot
[19:02:35] <strcat> which commit is it from?
[19:03:09] <cmr> a4f0fa6c518eb634687abe9659601d9d2a61899
[19:10:04] *** Quits: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP) (Quit: tikue_)
[19:12:06] *** Joins: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP)
[19:14:48] <strcat> making I'll try making an LLVM pass
[19:15:14] <strcat> to mark pointer parameters as non-null
[19:17:05] *** Quits: Seldaek (seld@moz-5DEA7688.ch) (Ping timeout)
[19:17:44] *** Joins: Seld (seld@moz-5DEA7688.ch)
[19:26:59] *** Quits: Seld (seld@moz-5DEA7688.ch) (Ping timeout)
[19:27:04] *** Joins: Seld (seld@moz-5DEA7688.ch)
[19:36:26] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[19:36:26] *** ChanServ sets mode: +o pnkfelix
[19:36:32] *** Quits: Seld (seld@moz-5DEA7688.ch) (Ping timeout)
[19:36:38] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (Ping timeout)
[19:36:51] *** Joins: kaeso (kaeso@moz-F21FF626.unstable.it)
[19:38:10] *** Joins: Seld (seld@moz-5DEA7688.ch)
[19:45:34] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[19:46:27] *** Quits: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP) (Quit: tikue_)
[19:55:20] *** Joins: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP)
[19:56:39] *** Quits: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP) (Quit: tikue_)
[19:57:30] *** Joins: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP)
[20:01:01] *** Quits: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP) (Quit: tikue_)
[20:02:19] *** Joins: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP)
[20:05:31] *** Joins: pnkfelix1 (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[20:11:36] *** Quits: pnkfelix1 (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[20:16:13] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[20:16:13] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/jwC5rA
[20:16:13] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[20:16:22] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[20:17:25] *** Quits: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP) (Quit: tikue_)
[20:20:32] *** Joins: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP)
[20:21:08] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[20:21:08] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/61bvdQ
[20:21:08] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[20:21:11] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[20:21:11] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/kgtq1Q
[20:21:11] <ghrust> 13rust/06auto 1457757a8 15blake2-ppc: extra::ringbuf: Implement method `.swap(uint, uint)` just like vector...
[20:21:11] <ghrust> 13rust/06auto 14f210a16 15bors: auto merge of #9520 : blake2-ppc/rust/ringbuf-swap, r=thestinger...
[20:21:11] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[20:23:16] *** Quits: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP) (Quit: tikue_)
[20:25:29] *** Joins: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP)
[20:33:11] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[20:33:11] *** ChanServ sets mode: +o tjc
[20:38:03] *** Quits: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP) (Ping timeout)
[20:39:22] *** Joins: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP)
[20:51:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:54:14] <acrichto> pnkfelix: is there a larger reason for making the context of all visitors () ?
[20:54:53] <pnkfelix> acrichto: beyond having Context arguments actually reflect things that are changing with the context?
[20:55:15] <pnkfelix> acrichto: its largely code cleanup at this point
[20:55:17] <acrichto> I suppose, are there plans to remove it entirely?
[20:55:31] <pnkfelix> acrichto: no, I don't think so.  There are still a couple cases where its used.
[20:55:39] <acrichto> ok cool
[20:55:43] <acrichto> I thought we had bad snapshots
[20:55:43] <pnkfelix> acrichto: I considered that, and we certainly *could*
[20:55:46] <acrichto> then I realized I should rebase
[20:56:01] <acrichto> pnkfelix: it kinda makes sense to me to remove it
[20:56:06] <pnkfelix> acrichto: but you'd end up emulating contextual by manually pushing/poppy onto the &mut Visitor
[20:56:20] <acrichto> that part I guess isn't so great
[20:56:29] <acrichto> although I've been doing that a lot with rustdoc visitors
[20:57:45] <pnkfelix> acrichto: I don't think there's a benefit to getting rid of the Context argument.
[20:58:06] <pnkfelix> acrichto: but I won't fight to keep it either.
[20:58:07] <acrichto> pnkfelix: I'm cool w/ that
[20:59:01] *** Quits: jensnockert (jensnocker@moz-2B3A7EE9.mobileonline.telia.com) (Input/output error)
[20:59:17] <acrichto> argh my linux vm has 3GB of ram and that still wasn't enough
[21:00:04] <bstrie> brson: before you release, https://github.com/mozilla/rust/wiki/Doc-detailed-release-notes looks like it's at least missing stuff about the new runtime
[21:00:13] <bstrie> slash i/o rewrite, if any of that is visible yet
[21:00:59] <bstrie> for "detailed" release notes the page seems quite sparse
[21:01:22] <bstrie> could maybe use a few more people to look for things to add, surely there's more that's worth mentioning
[21:02:35] *** Joins: jensnockert (jensnocker@moz-2B3A7EE9.mobileonline.telia.com)
[21:02:42] <tikue_> the example under for loop should use map().collect() :P
[21:03:29] <engla> removal of @fn!!
[21:03:54] <engla> hehe emphasis is mine^^
[21:05:41] <brson> bstrie: Agree it's a little light - I've been pretty uninspired to write stuff. I couldn't think of anything interesting to say about the new runtime. rt::io is not fully-baked
[21:05:51] <brson> I'll try to come up with something
[21:06:15] <brson> bstrie: anything else you think could be explained in detail?
[21:06:34] <brson> acrichto: I've been ooming regularly lately too
[21:06:41] <tikue_> brson: self hostedness seems worth a mention
[21:06:54] <acrichto> brson: http://huonw.github.io/isrustfastyet/mem/
[21:07:03] <acrichto> doesn't look like we've had a *major* regression
[21:07:07] <acrichto> in the past month
[21:07:17] <acrichto> we're still insanely high from the time that we has 1.2 GB
[21:07:58] <acrichto> we never fixed that regression of turning ~Ty back into @Ty
[21:09:06] *** Joins: mib_5y5ocl (Mibbit@moz-936B6A91.ias.bredband.telia.com)
[21:09:36] <acrichto> there was another 400MB regression we never figured out
[21:09:52] <acrichto> back in early august
[21:11:36] *** Joins: steveklabnik (steveklabn@moz-389D91E.public.wayport.net)
[21:11:39] <acrichto> strcat: lol removing perl scripts
[21:11:43] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:12:02] <strcat> acrichto: well it's a script for debugging this broken junk ;p
[21:12:24] <acrichto> strcat: does this fix the error for unsafe_destructor on types that are generic?
[21:12:26] <strcat> yes
[21:12:34] <strcat> and it fixes performance of a bunch of things
[21:12:45] <strcat> anyway pcwalton agreed we should just remove it - but we can't quite enable mergefunc yet
[21:12:53] <strcat> they fixed one of the problems I found
[21:12:59] <strcat> but they need to fix casts of aggregates
[21:13:04] <strcat> then we need to bump LLVM again
[21:13:12] <strcat> regardless, this thing hurts more than it helps
[21:13:13] <acrichto> so if I write imp
[21:13:19] <acrichto> "impl Drop for Foo<T>"
[21:13:22] <acrichto> I won't get an error?
[21:13:26] <acrichto> just making sure, can't find it in the code
[21:13:40] <strcat> acrichto: no the problem is that this thing merges all generic destructors
[21:13:52] <strcat> even if the destructor varies per type
[21:13:55] <acrichto> yeah but if we're removing it that's no longer a source of troubles, right?
[21:13:58] <strcat> right
[21:14:10] <acrichto> so this removes the compiler error for drop on Foo<T>?
[21:14:13] <strcat> no
[21:14:17] <acrichto> why not?
[21:14:33] <strcat> because it's still not safe without making sure there's no @ in the type
[21:14:52] <strcat> acrichto: the unsafe_destructor thing is unrelated to this
[21:15:03] <strcat> it just so happens that to write a generic one you need it
[21:15:24] <acrichto> hm I think nmatsakis was dealing with destructors recently so he may take care of those restrictions
[21:15:35] <nmatsakis> not yet, working on int
[21:15:36] <nmatsakis> *it
[21:15:48] <acrichto> cool :)
[21:16:16] <strcat> this also fixes trait objects in generics but we don't have a bug for it
[21:16:24] <acrichto> strcat: I am cool with 9538 and the planned course of action, although it deserves more than my rubber stamp b/c I still barely know what type_use was/is
[21:16:35] <strcat> acrichto: yeah pcwalton is the person to r+ is
[21:16:56] <strcat> acrichto: type_use is weird.
[21:17:06] <strcat> it tries (incorrectly) to keep track of requirements of generics
[21:17:16] <strcat> mostly tries to identify when only the size/representation matters
[21:17:37] <strcat> consider repr though - requires no bounds, yet can do unique stuff per type
[21:17:56] <strcat> LLVM's mergefunc is so much better at merging + doesn't ever make mistakes like that
[21:18:02] <acrichto> yeah I can imagine
[21:18:13] <acrichto> I like the idea of making transmutes happier
[21:18:24] <strcat> that problem is from mergefunc bitcasting functions
[21:18:27] <strcat> rather than bitcasting parameters
[21:18:30] <strcat> breaks inline
[21:18:31] <strcat> :D
[21:18:37] <strcat> anyway it's all really hard to fix properly
[21:18:53] <strcat> mergefunc works on libextra now, could make statistics comparing it
[21:19:01] <acrichto> that'd be a cool comparison
[21:19:09] <acrichto> nothing vs mergefunc vs type_use
[21:20:05] <acrichto> sometimes I wish we had a "fast forward" button for bors
[21:20:16] <acrichto> "I assume the responsibility of making sure this works, just merge it"
[21:20:34] <strcat> there's someone putting hard work into mergefunc upstream atm
[21:20:43] <acrichto> woo!
[21:20:44] <strcat> so it's going to get quite good.
[21:20:47] <acrichto> <3 llvm
[21:20:57] <pnkfelix> acrichto: isn't the fast-forward just hitting merge on the PR in github?
[21:21:02] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[21:21:07] <pnkfelix> acrichto: (not that I would ever do that ...)
[21:21:09] *** Quits: jensnockert (jensnocker@moz-2B3A7EE9.mobileonline.telia.com) (Connection reset by peer)
[21:21:11] <acrichto> pnkfelix: I supose, it's scary though :(
[21:21:17] <strcat> acrichto: well, it works on libextra *if I backport the LLVM patch* ;p
[21:21:21] <acrichto> I *think* that bors would work
[21:21:40] <strcat> he fixed mergefunc's wrappers in regards to ptr casts
[21:21:43] <acrichto> strcat: our stack of patches on top of LLVM keeps getting larger :(
[21:21:49] <strcat> acrichto: yeah but this is upstream
[21:21:55] <strcat> we'd just have to upgrade again
[21:21:57] <strcat> ;p
[21:22:08] <acrichto> 9 patches :(
[21:22:13] <strcat> anyway I can apply it myself to get statistics
[21:22:13] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:22:26] <strcat> acrichto: I think we should not accept patches that aren't specific to rust
[21:22:36] <acrichto> to llvm?
[21:22:36] <cmr> I can try to upstream the patches.
[21:22:37] <strcat> if it does something like fixing a windows/android problem it should go upstream
[21:22:40] <strcat> acrichto: yes
[21:22:46] <acrichto> https://github.com/alexcrichton/llvm/commits/rust-llvm-2013-09-15
[21:22:51] <acrichto> they should all be upstreamed
[21:22:58] <acrichto> none of the are "rust-specific"
[21:23:02] <acrichto> except for that one workaround I guess
[21:23:25] <strcat> acrichto: by rust-specific I mean stuff like fixed-stack-segment, because it's a new feature and they might not even want it without seeing the use case first
[21:23:31] <cmr> Does upstream actually care about segmented stacks?
[21:23:47] <acrichto> strcat: oh huh I suppose so
[21:23:48] <strcat> they support them so they want bug fixes
[21:24:02] <strcat> they don't necessarily want new features
[21:24:04] <acrichto> we don't really have bug fixes for segmented stacks, just support on more platforms
[21:24:23] <strcat> acrichto: well, those count as bug fixes to me ;]
[21:24:43] <acrichto> I wonder what the upstream process is
[21:24:51] <strcat> you post a patch to llvm-commits
[21:24:51] <acrichto> we're mainly just missing tests which is disappointing
[21:24:59] <strcat> yeah, they will expect tests
[21:25:01] <strcat> + really good code
[21:25:06] <brson> i still haven't acquired the rust signing key
[21:25:06] <strcat> that's why accepting them ourselves is bad
[21:25:15] <acrichto> brson: :(
[21:25:16] <strcat> someone is going to have to do a bunch of work to get these upstream, including writing tests
[21:25:43] <cmr> I'm willing to spend the time doing it, but it's not exactly something I have experience with.
[21:25:47] <steveklabnik> brson: :'(
[21:26:01] <strcat> you have to be very proactive to get LLVM patches in
[21:26:11] <strcat> since it's not like they have a list of open pull requests ;p
[21:26:59] <acrichto> I got one in awhile ago :P
[21:27:04] <acrichto> it was super simple though
[21:28:35] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[21:30:57] <acrichto> bors, go!
[21:31:08] <strcat> bors is really great
[21:31:13] <strcat> ;p
[21:31:34] <acrichto> 5 mins btwn runs is a loong time :P
[21:33:05] <strcat> acrichto: brson: http://static.rust-lang.org/doc/master/ng/std/iter/trait.Iterator.html
[21:33:11] <strcat> old urls still exist
[21:33:18] <strcat> it became http://static.rust-lang.org/doc/master/std/iter/trait.Iterator.html
[21:33:40] <acrichto> maybe s3cmd's sync feature isn't as smart as it's advertising
[21:34:16] <acrichto> might just be directories?
[21:34:24] <acrichto> oh wait, it's still on the bots
[21:34:33] <acrichto> doc/ng just needs to get removed on the bots
[21:34:40] <acrichto> hmm...
[21:34:49] <strcat> acrichto: can we just add something clearing that in make clean?
[21:34:51] <strcat> the whole dir
[21:34:56] <acrichto> yeah looking into that
[21:35:29] <acrichto> looks like the doc builder doesn't run 'make clean' first
[21:35:39] <strcat> acrichto: ah
[21:35:56] <acrichto> although on the other hand it doesn't use doc/
[21:36:07] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[21:36:07] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/kgtq1Q
[21:36:07] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[21:36:09] <acrichto> wait I'm confused...
[21:36:33] <pnkfelix> strcat: you going to be awake for a little while longer?  I might have a patch for you to test out soon
[21:36:41] <strcat> pnkfelix: yes, it's 5pm here :)
[21:39:52] <acrichto> strcat: hm I'm not sure why it's not getting deleted
[21:39:58] <acrichto> unelss s3cmd doesn't delete directories
[21:40:14] <acrichto> or well actually
[21:40:21] <acrichto> it looks like the doc builders upload from tmp/doc
[21:40:30] <acrichto> but it's not clear when tmp/doc is written to
[21:40:33] <strcat> we remove tmp/*
[21:40:36] <strcat> but not dirs
[21:40:37] <strcat> afaik
[21:40:45] <acrichto> but if we cp -r doc tmp/doc doesn't really matter
[21:40:50] <acrichto> doc needs to be cleaned out first
[21:41:00] <strcat> if it does cp -rf it wouldn't
[21:41:02] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[21:41:03] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/gZY2XQ
[21:41:03] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[21:41:06] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[21:41:07] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/gg3kuA
[21:41:07] <ghrust> 13rust/06auto 14daee1b4 15Alex Crichton: Ensure that skipped items aren't encoded...
[21:41:07] <ghrust> 13rust/06auto 14086a9fd 15bors: auto merge of #9484 : alexcrichton/rust/fix-cfg-inner-item, r=pcwalton...
[21:41:07] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[21:41:21] <strcat> or well... I think cp will clobber by default
[21:41:26] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[21:41:26] <ghrust> 01[13rust01] 15alexcrichton merged 06auto into 06snap-stage3: 02http://git.io/sYqcmg
[21:41:26] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[21:42:05] * acrichto crosses fingers for a snap
[21:42:07] <brson> strcat acrichto: master does a rm -r tmp/doc/* before uploading the docs from the slave to master
[21:42:23] <acrichto> brson: how do does go from doc/ to tmp/doc/ ?
[21:42:36] <acrichto> brson: b/c if doc/ isn't cleaned out beforehand it'll still upload old files
[21:42:39] <brson> acrichto: the slave uploads from doc to tmp/doc on the master
[21:42:47] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[21:42:47] *** ChanServ sets mode: +o tjc
[21:42:52] <brson> acrichto: the slave may not be cleaning out its doc directory
[21:42:54] <acrichto> ah, looks like we need a cleaning of doc then
[21:43:02] <acrichto> I'm not entirely certain that 'make clean' suffices
[21:43:32] <acrichto> $ make clean ... ... "let me reconfigure everything for you!"
[21:44:14] <acrichto> brson: I need to fix 'make clean', then we can add a clean step to the doc builder I imagine
[21:44:51] <brson> ok
[21:45:55] <strcat> I hate how github puts a link to each rebase of a commit with a mention of an issue in the issue
[21:46:10] <cmr> yeah
[21:46:23] <cmr> but *never* mentions rebases anywhere else
[21:46:33] <acrichto> "it destroyes histories"
[21:46:49] <strcat> https://github.com/mozilla/rust/issues/9536 like, look at that mess
[21:46:50] <strcat> *sigh*
[21:47:06] <strcat> I've never looked back to see what happens to it when gc cleans those out in 30 days
[21:47:15] <strcat> github runs gc on every action you do
[21:50:13] <Eridius> also https://github.com/mozilla/rust/issues/7225
[21:51:31] <Luqman> *sigh* middle::resolve::Resolve has a field that's of type @Session but Session = @Session_ :(
[21:51:40] <strcat> sounds like rustc
[21:53:38] <cmr> I really don't think that segmented stacks are a good idea. They taint everything :\
[21:54:40] <strcat> the perf issue caused by forcing non-inline can sort of be worked around but requires a lot of work to manually bubble up fixed_stack_segment
[21:55:48] <cmr> Do we allow variable-length stack allocation or do all rust functions have an upper bound of the stack they use (ignoring the stack that callers might use)?
[21:56:05] <strcat> no variable-length stack allocation
[21:56:11] <strcat> although it's possible to allow
[21:57:32] <pnkfelix> strcat:  you're going to love how stupid this bug was
[21:58:26] <pnkfelix> strcat: https://github.com/mozilla/rust/pull/9542
[21:59:02] <strcat> hm
[21:59:05] <strcat> I don't get it
[21:59:37] <strcat> was that just not defined when it was required?
[21:59:42] <strcat> so it evaluated as blank
[21:59:48] <pnkfelix> strcat: there are occurrences of SNAPSHOT_RUSTC_POST_CLEANUP in target.mk and host.ml
[22:00:01] <pnkfelix> strcat: exactly, it evaluted as blank.  Gotta love make.  :(
[22:00:16] <pnkfelix> strcat: (I wonder if there's anyway to make it error on evaluation of undefined variables‚Ä¶)
[22:00:21] <strcat> does make have something like 'set -o nounset'
[22:00:59] <strcat> pnkfelix: well, works in POSIX sh ;p
[22:01:04] <strcat> and bash/zsh ofc.
[22:01:36] <pnkfelix> strcat: but the usage here is in a make recipe
[22:01:42] <strcat> yeah I know
[22:02:16] <pnkfelix> there is a ‚Äîwarn-undefined-variables
[22:02:58] <strcat> pnkfelix: better than nothing ;p, but can it be set from the makefile itself?
[22:03:12] <cmr> pnkfelix: your --'s get merged into an em dash
[22:03:25] <strcat> I guess our makefile could run make >:)
[22:03:28] <pnkfelix> cmr: yeah I've got to figure out how to make Adium stop doing that
[22:04:29] <strcat> pnkfelix: just use weechat :P
[22:06:55] <strcat> https://paste.xinu.at/1ypXO/ irc as it was meant to be - text!
[22:07:29] <Eridius> I use irssi, but I've been thinking about switching to weechat
[22:07:54] <pnkfelix> cmr: problem --solved !
[22:08:10] <brson> somebody on the ml reported the snapshot not working on linux
[22:08:24] <brson> oh they only replied to me
[22:08:33] <strcat> Eridius: they're quite similar, but weechat is well-maintained + isn't just for perl lovers ;p
[22:08:53] <brson> here's their error https://gist.github.com/brson/6721275
[22:08:58] <brson> they didn't say what distro
[22:09:12] * strcat likes having sasl, ssl, nice built-in script package manager, etc.
[22:10:06] <Eridius> irssi has ssl
[22:10:07] <brson> they are on redhat 5.5 :-/
[22:10:09] *** Joins: pnkfelix1 (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[22:10:09] <strcat> brson: I'd guess that means their distro is truly ancient, and has an older glibc than the snapshot builder
[22:10:11] <strcat> brson: yeah, it won't work
[22:10:17] <strcat> glibc is only forwards compatible
[22:10:19] <brson> our snapshot builder is centos 6
[22:10:24] <strcat> you have to build on the oldest target you want to support
[22:10:26] <brson> they said 0.7 worked though
[22:10:30] <strcat> brson: luck
[22:10:39] * strcat shrugs
[22:10:44] *** Quits: pnkfelix1 (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Max SendQ exceeded)
[22:10:55] <strcat> brson: I'm pretty sure if you don't use newer symbols, it knows
[22:13:00] <strcat> ew.... why did they extend RHEL5 support to 2020
[22:13:02] <strcat> wat...
[22:14:01] <kmc> you have to pay extra for Extended Life Cycle support
[22:14:24] <strcat> means silly people will still be using it though
[22:14:48] <kmc> fsvo "silly"
[22:14:54] <kmc> anyway we don't have to support it unless they pay us extra, too ;)
[22:14:56] <bstrie> brson: I think a paragraph regarding the new formatting language in format!() would be interesting in the detailed patch notes. just mention what languages inspired it and what future plans for extending it are, etc
[22:15:22] <bstrie> right now we just say that the new formatter is trait-based, without any mention of the new grammar
[22:15:36] <acrichto> bstrie: oh I mean to write those up
[22:20:25] <strcat> kmc: well, I can't really see much overlap between old RHEL versions and rust in use cases
[22:20:47] <strcat> if they're really using RHEL5, they aren't going to be deploying rust applications
[22:21:06] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[22:21:07] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14086a9fd to 14f210a16: 02http://git.io/N3iJvQ
[22:21:07] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[22:21:08] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[22:21:08] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/z6MtjA
[22:21:08] <ghrust> 13rust/06auto 14eb2b25d 15Alex Crichton: Refactor the logging system for fewer allocations...
[22:21:08] <ghrust> 13rust/06auto 14d1e37f1 15bors: auto merge of #9261 : alexcrichton/rust/logging, r=huonw...
[22:21:09] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[22:22:12] <Luqman> strcat: yea, i've run into building rust on one machine and getting GLIBC_2.14/5 not found errors when trying to run on another 
[22:22:22] <strcat> yep, same thing with C
[22:22:30] <strcat> and glibc can't do full static linking thanks to drepper
[22:23:13] <strcat> red hat is very anti-static-linking in general
[22:23:52] <strcat> they want to be able to fix security issues in libs for proprietary applications, etc.
[22:23:57] <strcat> so they're happy if it sucks
[22:24:58] <mcpherrin> strcat: woah, RHEL5 to 2020?  I know some people who will be happy about that (migrating is hard, etc)
[22:25:09] <strcat> mcpherrin: migrating gets harder the longer you wait
[22:25:22] <strcat> ;p
[22:25:30] <mcpherrin> strcat: heh, believe me I know (currently trying to migrate some stuff from fedora 14)
[22:25:43] <mcpherrin> and previously I had to deal with a RHEL3 migration :P
[22:26:03] <strcat> part of the reason I love Arch - I get to deal with little breakages over time, so I can narrow down any driver regressions
[22:26:31] <strcat> point release of kernel causes gfx regression -> tiny bisect, report bug, fixed
[22:26:37] <mcpherrin> Part of the reason I hate arch is that my system would break in strange new ways I wasn't expecting ;)
[22:26:49] <strcat> can't imagine how you migrate forwards a decade or more
[22:27:23] *** Quits: mib_5y5ocl (Mibbit@moz-936B6A91.ias.bredband.telia.com) (Quit: http://www.mibbit.com ajax IRC Client)
[22:27:25] <strcat> rewrite your whole software stack? ;p
[22:27:49] <strcat> mcpherrin: well, you're forced to use software with unit tests + good release models :)
[22:28:10] *** Parts: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) ()
[22:28:18] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[22:28:57] <mcpherrin> Debian has about the right release frequency for my taste :P
[22:30:02] <mcpherrin> If I care to debug it, I'll install from source myself.  Otherwise it ain't gonna break.
[22:30:34] <strcat> except all the old bugs that are still there ;]
[22:30:51] <strcat> you just have (most of) the security fixes
[22:31:12] <strcat> software like firefox or the linux kernel definitely gets more stable over time
[22:31:19] <strcat> kde or gnome on the other hand....
[22:31:21] <brson> acrichto: so will you update the format! info in https://github.com/mozilla/rust/wiki/Doc-detailed-release-notes?
[22:31:33] <acrichto> brson: yeah working on it right now
[22:31:46] <acrichto> "Someone has edited the wiki since you started. Please reload this page and re-apply your changes"
[22:31:48] <acrichto> oh no!
[22:32:05] <brson> that was me :-D
[22:32:11] <engla> no support for merges in the backend? :)
[22:32:11] <kmc> naturally, the enterprises that are still using RHEL5 don't value "helping track down driver regressions" very highly compared to "keeping everything working"
[22:32:12] <acrichto> whoa
[22:32:17] <acrichto> i refreshed and my changes were still there
[22:33:01] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Quit: Lost terminal)
[22:33:53] <strcat> kmc: well they're silly, I really couldn't imagine using an ancient kernel full of ext4 corruption bugs for example.... they really don't backport most fixes
[22:34:34] <strcat> I prefer a steady stream of a few new bugs to many old bugs ;p
[22:34:36] <kmc> they do backport data corruption fixes
[22:35:10] *** Joins: pcwalton (pcwalton@moz-BE33DA21.fw1.sfo1.mozilla.net)
[22:35:10] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:35:25] <kmc> maybe not all of them, but I do have some firsthand knowledge of this
[22:35:25] <acrichto> brson: notes have been added
[22:35:30] <strcat> pcwalton: https://github.com/mozilla/rust/pull/9538 r?
[22:35:34] <strcat> kmc: yeah, they backport a lot
[22:35:55] <strcat> but sometimes fixing a bug means changing the architecture
[22:35:57] <kmc> they'll backport stuff for you if you ask
[22:35:59] <kmc> if you pay enough
[22:36:02] <strcat> sure
[22:36:11] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[22:36:11] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14d1e37f1 to 14f210a16: 02http://git.io/N3iJvQ
[22:36:11] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[22:36:12] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[22:36:12] <ghrust> 01[13rust01] 15bors pushed 1 new commit to 06auto: 02http://git.io/fFnffw
[22:36:12] <ghrust> 13rust/06auto 1448499c7 15bors: auto merge of #9484 : alexcrichton/rust/fix-cfg-inner-item, r=pcwalton...
[22:36:12] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[22:36:38] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[22:36:38] <ghrust> 01[13rust01] 15alexcrichton 04force-pushed 06snap-stage3 from 14086a9fd to 1448499c7: 02http://git.io/f3Qwfg
[22:36:39] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[22:38:20] <strcat> kmc: and debian stable is different than RHEL - they really don't backport many bug fixes
[22:38:34] <kmc> yep
[22:45:17] <strcat> acrichto: https://github.com/mozilla/rust/pull/9548 r?
[22:45:48] <strcat> it'll be so great if we decide addresses of them aren't significant by default ;p
[22:46:07] <acrichto> strcat: so I wrote r+
[22:46:14] <acrichto> then I realized there's like 10 other places we create globlas
[22:46:18] <strcat> acrichto: I know
[22:46:30] <strcat> those places should be changed to use mk_global
[22:46:36] <acrichto> mk_global isn't even used in executables
[22:46:43] <strcat> huh, really?
[22:46:52] <acrichto> it's only used for rust_abi_version I think right now
[22:46:55] <strcat> heh we use it once...
[22:46:56] <acrichto> which I thought was only libraries
[22:46:58] * strcat sighs
[22:47:06] <strcat> acrichto: nope, that's used in binaries too
[22:47:07] <acrichto> one would *think* that mk_global was used to make globals
[22:47:12] <acrichto> ah oh well
[22:47:19] * strcat sighs ;[
[22:47:21] <acrichto> I don't think we'll get much of a gain with only one global though :P
[22:47:27] <strcat> yeah
[22:47:32] <strcat> let me go track down some more
[22:47:56] <acrichto> strcat: search for LLVMAddGlobal
[22:48:06] <strcat> ugh
[22:48:16] <acrichto> only a few are actually used
[22:48:19] <acrichto> most of them are one-off things
[22:48:37] <strcat> and we don't name most...
[22:48:37] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[22:48:44] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[22:48:44] *** ChanServ sets mode: +o pnkfelix
[22:48:46] <strcat> yet they still get exported
[22:48:52] <acrichto> trans/base.rs:2544 is the only one that I know that matters
[22:49:06] <acrichto> that's where all item_static(*)s are translated
[22:49:10] <acrichto> or declared rather
[22:50:05] <strcat> I'm not sure if the rust abi thing should even exist separately from metadata
[22:50:16] <acrichto> I don't even know what that is...
[22:50:20] <strcat> it's 1
[22:50:21] <strcat> ;D
[22:50:25] <Luqman> acrichto: cratemap stuff uses LLVMAddGlobal
[22:50:27] <acrichto> lol
[22:50:38] <acrichto> Luqman: indeed, I don't think they should be internal
[22:50:46] <strcat> why not?
[22:50:58] <acrichto> I guess executable ones can
[22:50:59] <strcat> internal things can still be passed by-ptr to another crate
[22:51:56] <Luqman> strcat: the toplevel cratemap at least definitely needs to be (DLL)Export
[22:52:03] <strcat> ah
[22:52:06] <strcat> I won't touch it then
[22:52:16] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[22:52:21] <strcat> I don't understand why we need that weird stuff
[22:52:39] *** Quits: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP) (Ping timeout)
[22:53:00] <cmr> weird stuff being the crate map?
[22:53:10] <strcat> no, why we need the crate map
[22:53:17] <strcat> why logging necessitates a weird hack like that
[22:53:40] *** Joins: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP)
[22:53:44] <acrichto> for logging to be performant is has to load a static word and test whether it's 0/1
[22:53:52] <acrichto> the crate map stores where all these statics are
[22:53:53] <strcat> acrichto: alright everything else in base at least is external decls or the crate map stuff
[22:54:04] <acrichto> strcat: yeah :(
[22:54:09] <strcat> acrichto: so how does it find the crate map?
[22:54:35] <acrichto> strcat: I'm not 100% certain on this, but I think that an executable's crate_map contains an array which points to all the library crate_maps
[22:54:46] <acrichto> and the metadata says what the name of the symbols is
[22:54:49] <acrichto> *i think*
[22:54:51] <strcat> but what actually finds the top-level crate map?
[22:54:51] <acrichto> don't quote me on that
[22:54:58] <Luqman> strcat: on unix-y systems the linker resolves the toplevel cratemap in the exectuable such that libstd sees it
[22:54:59] <strcat> I don't get why it has to be external in binaries
[22:55:00] <acrichto> it used to be passed to fn main
[22:55:04] <strcat> Luqman: ah
[22:55:05] <acrichto> now it's a symbols
[22:55:37] <acrichto> there's a fucntion get_crate_map() which returns basically that symbol
[22:55:38] <Luqman> strcat: at resolves it at runtime that is, since libstd doesn't know which other crates each executable will be using
[22:55:54] <Luqman> on windows it gets it with GetProcAddress
[22:56:02] <strcat> Luqman: but can't the regular entry point take the address of the global, and pass it to rt::start?
[22:56:14] <strcat> it's really annoying to have big symbols like that in runtimeless rust
[22:56:15] <Luqman> strcat: that's what it used to do
[22:56:50] <acrichto> strcat: runtimeless rust wouldn't even compile rt/crate_map.rs
[22:57:22] <Luqman> in which case you could just not emit those symbols
[22:57:47] <strcat> acrichto: I'll just play whack-a-mole with these and r=you
[22:57:54] <strcat> doesn't seem easy to centralize
[22:58:14] <strcat> I guess I could wrap LLVMAddGlobal -> AddGlobal taking ccx and checking if it's building a lib
[22:58:21] <strcat> add_global*
[22:58:24] <acrichto> strcat: get_item_val() is the main one
[22:58:34] <strcat> that's done
[22:58:36] <strcat> exprs seem to make them too
[22:58:41] <acrichto> haha
[23:01:37] <strcat> acrichto: and we don't tag them as constants?
[23:01:47] <acrichto> which ones?
[23:01:55] <strcat> get_item_val
[23:02:15] <strcat> we don't seem to check if they're constant and SetGlobalConstant
[23:02:24] <acrichto> you'll love this
[23:02:34] <acrichto> so there's like 3 spots that the constant is threaded through
[23:02:43] <acrichto> and I think that the constant flag is set somewhere in trans::consts
[23:02:46] <strcat> ok I see why no one uses mk_global
[23:02:49] <acrichto> which call get_item_val
[23:02:50] <strcat> it assumes everything is a constant
[23:02:52] <strcat> ;p
[23:02:56] <acrichto> static mut isn't constant
[23:03:00] <strcat> yeah
[23:03:02] <acrichto> but that may be the only one
[23:03:17] * strcat renames it to mk_global_const to save someone a day of debugging
[23:04:38] <strcat> common.rs, consts.rs, expr.rs, glue.rs, meth.rs (??!?!, vtables?) all call it too
[23:05:11] <acrichto> wheeeeeee
[23:05:35] <strcat> look in expr.rs
[23:05:37] <strcat> it has get_val
[23:05:44] * strcat sighs
[23:06:41] <strcat> meh
[23:06:47] <strcat> I'm not sure if I should mark it internal here
[23:07:13] <strcat> oh good
[23:07:18] <strcat> the consts ones are private already
[23:07:47] <strcat> glue is internal already
[23:07:59] <strcat> as is the meth one
[23:08:02] <strcat> \o/
[23:08:10] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[23:08:14] <strcat> and common
[23:08:18] <strcat> so there's only expr to worry about.
[23:09:04] <acrichto> that's what I thought
[23:09:16] <acrichto> do we flag all instantiations of generic functions as internal?
[23:09:16] *** Quits: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP) (Quit: tikue_)
[23:09:17] <acrichto> because we should
[23:09:26] <strcat> yes
[23:09:40] <strcat> acrichto: I'm not sure exactly what this expr.rs get_val is doing
[23:09:47] <strcat> I'll just add the same building_library check
[23:10:09] <acrichto> strcat: that's not internal
[23:10:16] <strcat> oh
[23:10:17] <strcat> it's a decl
[23:10:19] <strcat> okay
[23:10:22] <acrichto> strcat: it's declaring an extern symbol and loading it from there
[23:10:26] <strcat> yep
[23:10:31] <acrichto> trans is so readable
[23:10:34] <acrichto> and understandable
[23:10:41] <strcat> libsyntax is worse
[23:10:43] <strcat> :D
[23:10:49] <acrichto> one of those pieces of code you look at and you're like "I understand this"
[23:10:59] <strcat> look at the quasi quoter
[23:11:01] <strcat> in libsyntax
[23:11:06] <strcat> quote.rs
[23:11:21] <acrichto> plz no :(
[23:11:28] <Luqman> when i was working on the building_library thing last night, the more recently written parts were so much nicer
[23:11:30] <strcat> I've yet to figure out why it turns all integers in i64
[23:11:36] <Luqman> whereas some it's like @ everywhere!
[23:11:38] <strcat> I don't really understand what it exists for
[23:11:45] <strcat> I somehow edited it without breaking stuff though
[23:11:51] <strcat> when I added char as a literal
[23:11:58] <strcat> instead of being an int 
[23:12:32] <strcat> acrichto: https://github.com/thestinger/rust/commit/f3e98cc030edd137f0606a1ba6f75592f6b39cdb#commitcomment-4193326 seems to be 100% of them
[23:12:36] <strcat> excluding crate_map
[23:12:59] <acrichto> I would believe that
[23:13:06] <acrichto> I'm a little hesitant about rust_abi_version
[23:13:17] <acrichto> can you omit that for now?
[23:13:18] <strcat> how about we just remove it
[23:13:19] <strcat> it's always 1
[23:13:22] <strcat> ;p
[23:13:27] <acrichto> don't mark it as internal
[23:13:30] <strcat> acrichto: oh
[23:13:59] <strcat> acrichto: I really don't think runtimeless rust wants it though
[23:14:04] <strcat> it's a non-mangled symbol
[23:14:11] <acrichto> runtimeless rust wants a lot of things
[23:14:16] <acrichto> we're nowhere near there yet :()
[23:14:17] <acrichto> :(*
[23:16:09] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[23:16:51] <acrichto> man if you make a snapshot every week there's so little stage0 stuff to remove
[23:17:07] <strcat> acrichto: I'll just remove mk_global_const then
[23:17:16] <strcat> and inline it into write_abi_version
[23:17:17] <acrichto> I'm ok with that
[23:19:22] <engla> acrichto: I still see "error: internal compiler error: encode_symbol: id not found 321719" when trying to compile your current PR the auto branch
[23:19:28] <engla> with --disable-debug
[23:19:32] <acrichto> engla: nooooo
[23:19:46] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[23:20:13] <acrichto> engla: I'll investigate once I get a snapshot in
[23:20:25] <acrichto> well, *if* I get a snapshot in
[23:20:31] <engla> ok
[23:21:03] <acrichto> rust has has 218 snapshots
[23:21:50] <acrichto> a few days had 3 snapshots
[23:22:10] <strcat> could remove the ones not in the snapshots file
[23:22:16] <strcat> carefully!
[23:22:26] <strcat> not that it matters
[23:22:28] <acrichto> haha
[23:22:36] <acrichto> put it in that amazon glacier thing
[23:23:22] <strcat> alright after 30 rebases I think this is right
[23:23:23] <strcat> ;p
[23:23:33] <acrichto> lgtm
[23:23:43] * strcat can't resist doing an amend + push while tidy runs
[23:24:03] <acrichto> that's why I don't like how github shows *every* commit in issues
[23:24:11] <acrichto> but you want to put references to issues in commits to close them
[23:24:20] <strcat> https://github.com/mozilla/rust/issues/9494 ;p
[23:24:36] <acrichto> jeez
[23:24:54] <strcat> missing unsafe block, unused variable, forgot it doesn't return anything, etc. ;p
[23:25:13] <strcat> if only rust compiled quicker
[23:25:36] <strcat> acrichto: you should see my reflog - I have git amend bound to something short in vim
[23:25:47] <strcat> can never have too many points to backtrack to...
[23:25:50] <acrichto> haha
[23:25:56] <acrichto> reflog has saved my ass so many times
[23:26:13] <strcat> I have persistent undo trees enabled too but it loses them if you edit the file externally
[23:26:31] <strcat> since it uses deltas
[23:28:17] *** Quits: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net) (Quit: Leaving.)
[23:32:03] <cmr> So FreeBSD 10 uses an LLVM toolchain with no GNU toolchain in sight by default.
[23:32:31] <cmr> The FreeBSD people I was talking to recommended I make the Rust compiler always target FreeBSD 10, rather than having compatability with both.
[23:32:52] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[23:33:19] <cmr> Not really sure how I feel about that; thoughts?
[23:33:34] <steveklabnik> when in FreeBSD land....
[23:33:39] <cmr> (It matters only in back/link.rs, afaik)
[23:34:36] *** Joins: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP)
[23:34:37] <acrichto> cmr: what would the change entail?
[23:34:47] <cmr> acrichto: changing the linker args
[23:35:22] <acrichto> I guess having a freebsd10 target would be bad...
[23:36:33] <cmr> :w
[23:36:37] <cmr> oops
[23:38:52] <steveklabnik> :)
[23:40:53] *** Quits: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP) (Ping timeout)
[23:42:09] *** Joins: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP)
[23:44:14] <strcat> cmr: I wouldn't worry about it yet
[23:44:23] <strcat> I really want us to just use LLVM's toolchain everywhere ;p
[23:44:52] <strcat> i.e. use libclang as our linker driver, not gcc
[23:56:15] <cmr> strcat: it still matters then too.
[23:56:29] <cmr> we need to link to libc++ instead of libstdc++
[23:56:38] <strcat> hm?
[23:56:53] <strcat> well, we'd drop the C++ and link against libc++abi
[23:56:54] <strcat> don't need a C++ stdlib
[23:56:54] <strcat> we can ship libc++abi ourselves
[23:57:12] <strcat> it's 351KiB
[23:57:53] <strcat> would just go in librustrt (statically) and with runtimeless rust you pick an exception ABI as you wish (if any)
[23:59:58] <cmr> hm
