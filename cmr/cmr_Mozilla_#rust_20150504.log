[09:57:41] *** Joins: cmr (cmr@moz-35s2fm.members.linode.com)
[09:57:42] *** ChanServ sets mode: +o cmr
[09:57:59] <bstrie> ChrisMorgan: foo[i as usize] won't panic for negative numbers if foo is large enough, or if i is negative enough :P
[09:58:19] *** Joins: eligreen (eli@moz-l60e55.dynamic.jazztel.es)
[09:58:21] <ChrisMorgan> bstrie: not on a release build, but on a debug build it will.
[09:59:51] <bstrie> ChrisMorgan: just be careful not to oversell our bounds checking, the specified behavior of overflow is to return an unspecified value
[09:59:52] *** Joins: vks (quassel@moz-b54qc9.fias.uni-frankfurt.de)
[09:59:57] <bstrie> panicking is technically non-compliant
[10:00:08] <cmr> that's not true.
[10:00:10] <ChrisMorgan> bstrie: I thought it was defined as panicking on debug builds?
[10:00:11] <cmr> overflow is well-defined.
[10:00:14] <ChrisMorgan> It certainly *does*.
[10:00:15] <huon> bstrie: that's not the specified behaviour
[10:00:18] <bstrie> no?
[10:00:30] <huon> initially the plan was to have panic or unspecified value
[10:00:32] *** Quits: zyphrus (David@moz-nhi.pas.98.101.IP) (Ping timeout: 121 seconds)
[10:00:34] <huon> but it changed to panic or wrap
[10:00:40] <mindcat> Now, How do I implement the enum correctly? http://is.gd/VeqKkm
[10:00:47] <bstrie> huon: I wasn't aware it had changed
[10:01:01] <cmr> mindcat: http://is.gd/p2ePwD
[10:01:15] *** Joins: choplin (choplin@moz-b1oa9n.zaq.ne.jp)
[10:01:52] *** Quits: basicdays (basicdays@moz-vreeoj.cable.rcn.com) (Ping timeout: 121 seconds)
[10:02:02] *** Joins: gonzaloserrano1 (Adium@moz-1nv.3t7.97.62.IP)
[10:02:13] <mindcat> cmr: err, sorry.. let me explain a bit
[10:03:13] *** Quits: gonzaloserrano (Adium@moz-1nv.3t7.97.62.IP) (Ping timeout: 121 seconds)
[10:03:14] <ChrisMorgan> mindcat: if you want it to work for an arbitrary T, you can’t use generics. You’ll need to using something like Any.
[10:03:49] <ChrisMorgan> s/using/use/
[10:04:03] *** Quits: eligreen (eli@moz-l60e55.dynamic.jazztel.es) (Quit: Konversation terminated!)
[10:04:27] *** darkowlzz is now known as darkowlzz|afk
[10:04:38] *** Quits: kaeluka (kaeluka@moz-0smfde.eduroam.uu.se) (Client exited)
[10:04:45] <mindcat> http://is.gd/LWLjRF
[10:05:09] <mindcat> I don't want List(Vec<NbtValue>), I want List(Vec<T>)
[10:05:24] *** Joins: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net)
[10:05:25] <ChrisMorgan> But what is T?
[10:06:00] <mindcat> ChrisMorgan: a type in NbtValue
[10:06:18] <ChrisMorgan> … huh? But that’s what NbtValue is for.
[10:06:24] *** Joins: kieran (kieran@moz-c5gk5j.ihug.co.nz)
[10:06:34] <mindcat> ChrisMorgan: no...
[10:06:39] <ChrisMorgan> Is the vec supposed to be homogeneous?
[10:06:57] <mindcat> ChrisMorgan: yes
[10:07:04] <cmr> You can't do that in Rust right now.
[10:07:06] <ChrisMorgan> Then I guess you can add a variety of variants, one for each case.
[10:07:09] <cmr> Enum variants are not types.
[10:07:13] <ChrisMorgan> Generics are at the type level, not the variant level. 
[10:07:29] *** Quits: choplin (choplin@moz-b1oa9n.zaq.ne.jp) (Connection closed)
[10:08:04] *** Quits: aravindavk (aravinda@moz-so4.f0d.244.121.IP) (Ping timeout: 121 seconds)
[10:08:10] *** Quits: andreyv (andrey@moz-m13.7c1.234.85.IP) (Ping timeout: 121 seconds)
[10:08:32] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[10:08:51] <ChrisMorgan> mindcat: it’s going to need to end up something like http://is.gd/RXmSMS
[10:09:20] <ChrisMorgan> Perhaps not as neat as you might like, but it’s the only way to represent it.
[10:09:36] <mindcat> ChrisMorgan: Oh...
[10:10:17] *** Quits: luks (luks@moz-970ftt.de) (Ping timeout: 121 seconds)
[10:10:33] *** Quits: kieran (kieran@moz-c5gk5j.ihug.co.nz) (Ping timeout: 121 seconds)
[10:10:40] *** Quits: xilec (Mibbit@moz-g6k.oht.161.46.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:11:09] *** Quits: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch) (Quit: Leaving.)
[10:11:39] <mindcat> ChrisMorgan: http://is.gd/dli3a5 I was tried to did that, but it doesn't work
[10:12:39] *** Joins: luks (luks@moz-970ftt.de)
[10:20:11] <kalail> is there a way to get rustbeta to build hashring with feaures collections
[10:20:29] <kalail> what is this unstable feaure anyway?
[10:20:35] <untitaker> This used to work: http://is.gd/2jQlp7 Why doesn't it nowadays?
[10:20:48] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[10:21:01] <filsmick> what's the difference between to_owned() and to_string()?
[10:21:14] <ChrisMorgan> kalail: features cannot be enabled on beta or stable.
[10:21:26] <kalail> hmmm
[10:21:29] <bstrie> filsmick: on &str values? the former just heap allocates the string, the latter runs through the string formatting machinery
[10:21:31] <ChrisMorgan> filsmick: to_string goes through the std::fmt infrastructure and so is, at present at least, less efficient.
[10:21:42] <ChrisMorgan> It will be less efficient for the indefinite future, too.
[10:21:54] <bstrie> ChrisMorgan: specialization should let us fix that, right?
[10:22:21] <filsmick> why does to_string() need to use the fmt infrastructure?
[10:22:33] <ChrisMorgan> bstrie: theoretically. It depends on how we go about implementing that, too. For the indefinite future it’ll be true that it’s less efficient, anyway.
[10:22:33] <cmr> filsmick: that's what it's meant to do.
[10:22:34] <filsmick> I mean, you're not passing it format strings and the data is already utf8
[10:22:39] <ChrisMorgan> filsmick: 3.to_string()
[10:22:46] <cmr> it's the equivalent of format!("{}", self)
[10:22:46] <filsmick> oh
[10:23:00] <filsmick> I see
[10:23:03] <filsmick> thanks!
[10:23:12] *** Joins: pavelpenev (quassel@moz-usk.6ao.247.92.IP)
[10:23:19] <ChrisMorgan> So if you have a string already, use String::from(s) or s.into_owned() over s.to_string().
[10:23:27] <filsmick> so we should always use to_owned() on &str's 
[10:23:32] <bstrie> that's what I do
[10:23:44] * bstrie firmly in the .to_owned camp
[10:24:14] <ChrisMorgan> Sorry, yeah, to_owned, not into_owned. I’ve just been using Cow, please forgive me.
[10:24:24] <filsmick> is there any difference between String::from(s) and s.to_owned()? I saw the former simply copies the bytes of the &str, but I can't find the implementation of the latter
[10:24:35] * filsmick forgives ChrisMorgan
[10:24:53] *** Quits: vks (quassel@moz-b54qc9.fias.uni-frankfurt.de) (Ping timeout: 121 seconds)
[10:24:58] <bstrie> ChrisMorgan: udderly unforgivable
[10:25:06] <bstrie> burn him at the steak!
[10:25:09] <sin8h> Hi folks, sorry if I'm interrupting ongoing conversations. Had quick question on features exposed in beta release
[10:25:18] *** darkowlzz|afk is now known as darkowlzz
[10:25:22] <bstrie> sin8h: ask away!
[10:25:23] <sin8h> ➜  rustbyex  rustc --test -O bench.rs
[10:25:24] <sin8h> bench.rs:1:1: 1:18 error: unstable feature
[10:25:24] <sin8h> bench.rs:1 #![feature(test)]
[10:25:24] <sin8h>            ^~~~~~~~~~~~~~~~~
[10:25:24] *** sin8h was kicked by fripp.mozilla.org (Channel flood triggered (limit is 5 lines in 3 secs))
[10:25:24] <ChrisMorgan> filsmick: to_owned comes from the ToOwned implementation for str, which is this: unsafe { String::from_utf8_unchecked(self.as_bytes().to_owned()) }
[10:25:40] *** Joins: panicbit (panicbit@moz-me73jj.itmc.tu-dortmund.de)
[10:26:11] *** Joins: sin8h (Adium@moz-4gl.cvv.51.106.IP)
[10:26:15] <bstrie> sin8h: you're back!
[10:26:28] <filsmick> ChrisMorgan: got it https://github.com/rust-lang/rust/blob/c0eb9384af9f623563df59a9ae454ffedea1f4f8/src/libcollections/str.rs#L406
[10:26:33] <untitaker> anybody know the answer to my problem above?
[10:26:36] *** Joins: pnkfelix (pnkfelix@moz-6v5.3nd.202.89.IP)
[10:26:36] *** ChanServ sets mode: +o pnkfelix
[10:26:38] <bstrie> sin8h: you cannot use unstable features in the beta
[10:26:52] <sin8h> these feature will be available in 1.0 GA?
[10:26:53] <untitaker> I'd like to avoid any type annotations
[10:27:11] <bstrie> sin8h: no, they will arrive in subsequent releases
[10:27:22] <bstrie> sin8h: rust is on a six-week release schedule, so 1.1 will come july 1
[10:27:55] <sin8h> okay, in that case I think it will make sense to take out examples from rustbyexample.com that use these unstable features
[10:28:13] <bstrie> sin8h: agreed
[10:28:56] <bstrie> steveklabnik: do you need help preparing rustbyexample for 1.0?
[10:29:26] *** Joins: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se)
[10:30:09] <Lilly> Hello!
[10:30:13] <bstrie> Lilly: hello!
[10:30:41] <Lilly> I'm trying to make an old library work (obj-rs on cargo), and it uses std::num::cast, which I think is removed
[10:30:46] <Lilly> What do you use nowadays?
[10:30:52] <Lilly> x as y?
[10:31:33] <ChrisMorgan> Lilly: it depends on what the types are.
[10:31:41] <ChrisMorgan> Lilly: for primitive types, `as`.
[10:31:44] <bstrie> Lilly: `x as y` works, but it can potentially lose information
[10:32:00] <bstrie> Lilly: num::cast will presumably return an Option or something
[10:32:09] <cmr> num::cast was generic.
[10:32:16] <cmr> Lilly: use the `num` crate in crates.io
[10:32:24] <Lilly> cmr: gotcha, thanks!
[10:33:10] *** Joins: ghmlee (sid33671@moz-p3l5sb.brockwell.irccloud.com)
[10:33:33] *** Quits: pnkfelix (pnkfelix@moz-6v5.3nd.202.89.IP) (Ping timeout: 121 seconds)
[10:33:35] *** Quits: skade (skade@moz-4eh.d50.201.212.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[10:34:06] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Quit: )
[10:34:17] <bjz> Can anyone figure out how to get this iterator object thing to compile? http://is.gd/3t10lc
[10:34:28] <ChrisMorgan> untitaker: it should work; the regression is undesirable. In the meantime, sum::<usize>() will work.
[10:34:42] <Lilly> cmr: hang on, num on crates doesn't have a cast either?
[10:34:48] <untitaker> ChrisMorgan: thanks, should I report a bug?
[10:34:57] *** Quits: dawehner (quassel@moz-tobu60.hsi4.kabel-badenwuerttemberg.de) (Quit: No Ping reply in 180 seconds.)
[10:35:13] <ChrisMorgan> untitaker: there may be one already; look around a little first but don’t be afraid of filing a new one!
[10:35:13] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[10:35:25] <Lilly> oh it's in num::traits
[10:35:43] <ChrisMorgan> bjz: you want Parts to be Clone, I take it.
[10:36:08] *** Joins: dawehner (quassel@moz-tobu60.hsi4.kabel-badenwuerttemberg.de)
[10:37:19] <darkfox> IS there any way to alias a module to another?
[10:37:29] <Lilly> uh another quick question, how do you tell cargo that you want to use a local clone of a git repo?
[10:37:43] <bjz> ChrisMorgan: Well, I want Doc to be Clone - that is the goal: http://is.gd/FsKfhm
[10:38:26] *** Joins: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch)
[10:39:00] *** Joins: pnkfelix (pnkfelix@moz-6v5.3nd.202.89.IP)
[10:39:00] *** ChanServ sets mode: +o pnkfelix
[10:39:02] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[10:39:04] <bjz> ChrisMorgan: trying to figure out how to implement Wadler's pretty printer without loading everything into memory at once... not sure if it is possible though... :/
[10:39:25] <untitaker> ChrisMorgan: I couldn't find any issues so I filed https://github.com/rust-lang/rust/issues/25094
[10:39:47] *** Joins: }ls{ (uhelp@moz-1jf80k.dip0.t-ipconnect.de)
[10:39:59] <darkfox> Something like ... pub mod X as Y; would be very useful for usecases where #[cfg(not(feature = "X"))]
[10:40:05] *** Quits: areski (areski@moz-aehvq9.user.ono.com) (Ping timeout: 121 seconds)
[10:40:10] <darkfox> Anyone else have any view for such?
[10:40:32] *** Joins: dawehner-afk (quassel@moz-manmml.mullvad.net)
[10:41:08] *** Joins: napoleon (Mibbit@moz-hva2qp.tpgi.com.au)
[10:41:09] *** darkowlzz is now known as darkowlzz|afk
[10:41:21] <napoleon> hey guys
[10:41:24] <ChrisMorgan> darkfox: `pub use x as y;` not doing it?
[10:42:05] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[10:42:17] <darkfox> ChrisMorgan: Ah
[10:42:25] <darkfox> ChrisMorgan: pub use self::x as y; :D
[10:42:31] <darkfox> Thanks
[10:42:38] *** Joins: ptalbot (ptalbot@moz-1gn7gb.eu0n.jcdj.0660.2001.IP)
[10:42:48] <napoleon> I need help with generics. What does the T in "struct Pair<T>" mean??
[10:43:06] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[10:43:06] *** Quits: sin8h (Adium@moz-4gl.cvv.51.106.IP) (Quit: Leaving.)
[10:43:08] * darkfox will now move that to a dummy module; indeed cleaner.
[10:43:09] *** Quits: dawehner (quassel@moz-tobu60.hsi4.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[10:43:09] <saati> napoleon: any other type
[10:43:24] <napoleon> so it means anything?
[10:44:08] <saati> whatever someone instantiates it with
[10:44:10] <cmr> it's a type parameter, it can be substituted with any type.
[10:44:17] <napoleon> ok thanks!
[10:45:36] <bjz> cmr: any idea about http://is.gd/FsKfhm ?
[10:45:38] *** Joins: aravindavk (aravinda@moz-m6j.f0d.244.121.IP)
[10:46:08] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[10:46:20] *** Quits: nico_rikken (nico@moz-0t18rd.6ulu.d2lj.0981.2001.IP) (Quit: Leaving)
[10:47:42] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[10:48:03] <cmr> bjz: not sure it's possible, would need to "downcast" to Clone
[10:48:22] <cmr> (and there's no way of downcasting to other trait objects right now I think)
[10:49:17] *** Joins: sin8h (Adium@moz-4gl.cvv.51.106.IP)
[10:49:21] <napoleon> also guys, enum or struct? they both seem to do the same thing
[10:49:50] <mindtree> napoleon: they are very different - would recommend reading the docs on both :)
[10:50:08] <bjz> cmr: hmm, ok
[10:50:38] *** Quits: James (quassel@moz-225vcm.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[10:50:38] <napoleon> yeah, ok I will. I'm still reading rustbyexample 'tutorial' :)
[10:50:41] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[10:51:44] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[10:52:05] <napoleon> ok wait I see the difference now oops lol
[10:52:19] <ChrisMorgan> bjz: ready for some convolution?
[10:52:26] <ChrisMorgan> bjz: http://is.gd/qDhCHI
[10:52:27] <saati> napoleon: a struct is a composite type where all members have a value at the same time, an enum has variants and an enum value is is only one variant at a time
[10:52:50] <cmr> ChrisMorgan: eep
[10:52:53] <bjz> ChrisMorgan: woaaah
[10:52:53] *** Joins: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com)
[10:53:24] <ChrisMorgan> I had to solve this very problem (though in a somewhat simpler form, for Any has no associated types and is 'static) quite some time ago when I made AnyMap Clone for blaenk.
[10:53:46] <napoleon> yeah ok. I was still thinking an enum was c-like
[10:53:47] *** Quits: panicbit (panicbit@moz-me73jj.itmc.tu-dortmund.de) (Ping timeout: 121 seconds)
[10:54:03] <ChrisMorgan> But yeah, that will allow you to box any Iterator<Item = Part> + Clone in it.
[10:54:11] *** Quits: genbattle (genbattle@moz-ikj3l8.xtra.co.nz) (Ping timeout: 121 seconds)
[10:54:11] *** Joins: eligreen (eli@moz-l60e55.dynamic.jazztel.es)
[10:54:12] *** Quits: eligreen (eli@moz-l60e55.dynamic.jazztel.es) (Quit: Konversation terminated!)
[10:54:17] *** Joins: nbg (nbg@moz-gen.aeo.146.5.IP)
[10:54:20] <saati> napoleon: an enum is like a safe tagged union
[10:54:24] *** Joins: dzhulk (Adium@moz-hnu.hki.140.95.IP)
[10:55:09] <napoleon> yeah, I'm just stupid. enums in rust are different than what I'm used to
[10:55:12] <bjz> ChrisMorgan: hopefully this kind of thing might be improved in the future :/
[10:55:21] *** Quits: fmtq (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[10:55:26] <bjz> ChrisMorgan: might be tricky though
[10:55:32] <bjz> thanks for the help!
[10:55:35] * ChrisMorgan reckons he’s doing fairly well with an “eep” from cmr and a “woaaah” from bjz ☺
[10:55:49] <bjz> I do wonder if I think I should rethink this
[10:56:14] <ChrisMorgan> bjz: have you thought about doing anything for Rust 1.0.0 in Melbourne?
[10:56:18] <bjz> ChrisMorgan: trying to look into a pretty printing lib http://homepages.inf.ed.ac.uk/wadler/papers/prettier/prettier.pdf
[10:57:01] <bjz> ChrisMorgan: we were trying to organise something http://www.meetup.com/Rust-Melbourne/events/222119312/
[10:57:15] <napoleon> So the generic T can be anything, but what about U? Is it the same as T?
[10:57:43] <cmr> napoleon: they're just names.
[10:57:48] <cmr> you can name them whatever you want
[10:57:49] <ChrisMorgan> bjz: “Joyce Kilmer and most computer scientists agree: there is no poem as lovely asa tree.” My interpretation of that: “… so stop cutting down trees to print poems on paper”
[10:57:58] <napoleon> yeah, ok thanks!
[10:58:05] <ChrisMorgan> bjz: wasn’t aware of that group.
[10:58:10] <Havvy> napoleon:  `enum` in Rust just means `tagged union`.
[10:58:36] <bjz> ChrisMorgan: heh, wadler is funny
[10:58:40] <Havvy> ChrisMorgan:  There are trees less lovely than a poem. Should we cut them down instead?
[10:58:54] <napoleon> Havvy thanks :)
[10:58:55] *** Joins: jophish (jophish@moz-epocft.broadband.tesco.net)
[10:59:06] *** Joins: lenstr (lenstr@moz-l28.vju.25.171.IP)
[10:59:14] <mindtree> bjz: do you know if the meetup is going ahead at FastMail?
[10:59:23] *** Quits: sin8h (Adium@moz-4gl.cvv.51.106.IP) (Quit: Leaving.)
[10:59:24] <bjz> mindtree: no idea :/
[10:59:29] <Lilly> What's the alternative to std::io::timer::sleep?
[10:59:34] <mindcat> enum A<Name> { Mail<Name>, None};
[10:59:55] <Havvy> !enum
[11:00:00] <bjz> mindtree: I wonder if we should just go to a pub or something :P
[11:00:10] *** Joins: fmtq (fmtq@moz-d08itp.tpgi.com.au)
[11:00:27] *** Quits: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se) (Quit: bajs)
[11:00:59] <mindtree> bjz: anywhere we can bring laptops and geek out about rust is fine w/ me :)
[11:01:05] <bjz> heh
[11:01:15] <ChrisMorgan> Havvy: “there is no poem as lovely as a tree” implies ∀ tree, not ∃ tree
[11:01:16] <Havvy> !learn enum = https://doc.rust-lang.org/book/enums.html
[11:01:16] <rustbot> Learned factoid 'enum'.
[11:01:29] <ChrisMorgan> Sure, English is sloppy.
[11:01:56] <napoleon> !enum
[11:01:56] <rustbot> https://doc.rust-lang.org/book/enums.html
[11:02:11] <Havvy> !learn enums @= enum
[11:02:11] <rustbot> Learned alias 'enums' => 'enum'.
[11:02:14] *** Quits: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net) (Quit: Konversation terminated!)
[11:02:19] <ChrisMorgan> Havvy: ∀ tree . ∄ poem . poem > tree
[11:02:57] <Havvy> ChrisMorgan:  Fair enough. We're going offtopic though.
[11:03:07] *** Quits: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[11:03:13] *** Joins: larhat1 (Adium@moz-egv.ld6.128.213.IP)
[11:03:26] *** Joins: panicbit (panicbit@moz-me73jj.itmc.tu-dortmund.de)
[11:03:27] *** Quits: larhat1 (Adium@moz-egv.ld6.128.213.IP) (Quit: Leaving.)
[11:03:41] *** Quits: Lunatrius (Lunatrius@moz-mkv.hcu.38.77.IP) (Ping timeout: 121 seconds)
[11:04:04] *** Quits: dickturnip (dt@moz-buhocu.cable.virginm.net) (Ping timeout: 121 seconds)
[11:04:16] * ChrisMorgan just likes using his Compose key too much
[11:04:21] <bjz> mindtree: posted again on the event page with your quote :P
[11:05:00] <mindtree> bjz: :)
[11:05:23] *** Quits: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch) (Quit: Leaving.)
[11:05:23] *** Joins: kaeluka (kaeluka@moz-csmuto.eduroam.uu.se)
[11:05:48] <frankmcsherry> can't recall who was here when we were talking about Abomonation, but post is up at: http://www.frankmcsherry.org/
[11:06:27] <napoleon> so every time the code leaves the scope; that variable is freed? does that mean I shouldn't bother freeing the memory manually?
[11:07:25] <mindtree> napoleon: you should never have to free memory manually in rust code (unless perhaps you're doing some unsafe / FFI stuff)
[11:07:31] *** Joins: edbond (edbond@moz-8st.7gv.108.109.IP)
[11:07:48] *** Joins: choplin (choplin@moz-b1oa9n.zaq.ne.jp)
[11:08:40] <cmr> frankmcsherry: note that reading padding from a struct is undefined behavior, so the statement "and every byte is a valid u8" is false.
[11:08:43] *** Joins: areski (areski@moz-erfa2b.dynamicIP.rima-tde.net)
[11:08:47] <mindtree> napoleon: use scopes as your tool for controlling all your little vars' lives/deaths
[11:09:04] * mindtree sinisterly chuckles
[11:09:20] <frankmcsherry> cmr: cool, I'll update that. it was something that the locals thought was ok.
[11:09:24] <napoleon> hahaha ok :3
[11:09:33] <casey> bjz: Didn't know anyone else from Melbourne was here! Hello!
[11:09:38] *** Joins: envi_u (envi@moz-ih5.olo.169.121.IP)
[11:09:43] <bjz> casey: o/
[11:09:44] <ChrisMorgan> casey: there are a few of us.
[11:09:46] <napoleon> !help
[11:09:47] <rustbot> Help is what I like to do! Everyone, welcome to #rust! Please read topics first. On bot usages, I've also sent private messages.
[11:09:54] <mindtree> casey: there are *millions* of us!
[11:09:58] <mindtree> maybe..
[11:10:09] <bjz> casey: do you work in Melbourne?
[11:10:11] <napoleon> nah I'm from sydney
[11:10:16] *** Quits: ogham (rally@moz-91e3hp.cable.virginm.net) (Ping timeout: 121 seconds)
[11:10:24] <napoleon> sorry to disappoint you guys :/
[11:10:25] <casey> bjz: Yep, in Richmond.
[11:10:54] <casey> bjz: We've got some space that can be used for meetups if needed.
[11:11:01] <ChrisMorgan> napoleon: I did notice you were a TPG customer from your IP mask but figured as you hadn’t commented you probably weren’t from Melbourne
[11:11:02] <frankmcsherry> cmr: what is the motivation in making it ub; is there something hard about letting it be a u8?
[11:11:37] <napoleon> waittt. how did you find out my ip mask?
[11:11:39] <huon> napoleon: http://www.meetup.com/Rust-Sydney/events/221946886/ (if you didn't know about it already... :) )
[11:11:42] <bjz> casey: Inspire9? or somewhere else?
[11:11:50] *** Quits: choplin (choplin@moz-b1oa9n.zaq.ne.jp) (Ping timeout: 121 seconds)
[11:11:50] <cmr> napoleon: /whois
[11:12:01] *** Joins: Lunatrius (Lunatrius@moz-mkv.hcu.38.77.IP)
[11:12:04] <casey> bjz: REA (folks behind realestate.com.au)
[11:12:15] <cmr> frankmcsherry: it's more efficient; the padding is never initialized.
[11:12:35] <bjz> casey: ah neat
[11:12:35] <cmr> and llvm considers it undef iirc.
[11:12:46] <napoleon> nice lol cmr . you looked me up <3
[11:12:49] <casey> bjz: You?
[11:12:54] <cmr> napoleon: you asked
[11:13:03] <bjz> casey: interning at Zendesk
[11:14:53] *** Quits: kvsari (kvsari@moz-fgsnv9.bbtec.net) (Connection closed)
[11:15:05] *** Quits: kaeluka (kaeluka@moz-csmuto.eduroam.uu.se) (Client exited)
[11:15:28] *** Joins: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net)
[11:16:41] *** Joins: andreyv (andrey@moz-m13.7c1.234.85.IP)
[11:17:03] *** Joins: qwerty_nor (Thunderbird@moz-vuo.d5a.248.5.IP)
[11:17:55] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[11:18:52] <ChrisMorgan> Controversial and fairly ridiculous suggestion: trait objects don’t mesh well with quite a few other features in Rust, so let’s abolish them and see what happens!
[11:19:01] <cmr> ChrisMorgan: I pretty much agree.
[11:19:21] <ChrisMorgan> They do lead to a surprising number of surprising behaviours.
[11:19:22] <mindtree> ChrisMorgan: I also basically agree
[11:19:42] <cmr> I complain about it quite vocally in #rust-internals ;)
[11:20:32] *** Joins: TheLemonMan (lemonboy@moz-0909e0.50-151.net24.it)
[11:20:39] *** Joins: Roxxik (Mibbit@moz-i105qa.dyn.telefonica.de)
[11:20:47] *** Joins: thor (thor@moz-n7n1a4.res.rr.com)
[11:21:09] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Quit: )
[11:21:15] *** Joins: Kynes (Kynes@moz-j2us35.mit.edu)
[11:21:16] <mindtree> as long as we can get something like anonymous return types too heh
[11:22:40] *** Joins: logan_e (logan_e@moz-ltn.qg3.218.73.IP)
[11:23:27] <bjz> cmr: they are the only reason we have the weirdness of Self right?
[11:23:35] <napoleon> wait to store memory you don't need to use Box right? 
[11:23:56] *** Joins: kaeluka (kaeluka@moz-csmuto.eduroam.uu.se)
[11:23:57] <napoleon> all these examples use Box to store memory
[11:24:09] <mindtree> napoleon: Box is used for dynamically allocating
[11:24:43] *** Quits: logan_e (logan_e@moz-ltn.qg3.218.73.IP) (Client exited)
[11:24:45] <mindtree> napoleon: i.e. if you don't know the size of something at compile time, you'll probably need to dynamically allocate it
[11:24:50] <ChrisMorgan> I guess so long as Any could still be represented in some way I wouldn’t actually mind trait objects being gone at all.
[11:25:15] *** Quits: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net) (Ping timeout: 121 seconds)
[11:25:43] *** Joins: nico_rikken (nico@moz-0t18rd.6ulu.d2lj.0981.2001.IP)
[11:27:21] *** Quits: frankmcsherry (frankmcsher@moz-jna.j5l.19.178.IP) (Connection closed)
[11:27:35] <napoleon> thanks mindtree !
[11:28:17] *** Joins: skade (skade@moz-4eh.d50.201.212.IP)
[11:28:28] *** Joins: sin8h (Adium@moz-f0u.cn5.51.106.IP)
[11:29:24] <huon> bjz: which weirdness?
[11:29:41] <bjz> huon: ah dw
[11:29:59] <bjz> huon: we still need it for (.) I guess
[11:30:14] *** Quits: edbond (edbond@moz-8st.7gv.108.109.IP) (Ping timeout: 121 seconds)
[11:30:32] <huon> (the DST/?Sized stuff is still useful for [] and str, even if we didn't have trait objects)
[11:31:01] <bjz> Ah, does that rely on Self?
[11:31:26] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[11:31:34] <huon> well, Self is ?Sized by default, but other than that, [] and str are not related to "Self"
[11:31:51] *** Quits: Roxxik (Mibbit@moz-i105qa.dyn.telefonica.de) (Quit: http://www.mibbit.com ajax IRC Client)
[11:32:03] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[11:32:43] <ChrisMorgan> bjz: the whole concept of object safety is a part of trait objects, if that’s what you mean.
[11:33:17] *** Joins: petras (Mibbit@moz-lqajpp.ysoft.cz)
[11:33:49] <bjz> I mean: impl Add<T> for U { ... }, vs instance Add<T, U> { ... } (ala Haskell)
[11:33:52] <bjz> I guess the separation of Self also links in with the semantics of not being able to implement it outside of crates
[11:34:08] <bjz> anyway, don't mind me
[11:34:14] *** Joins: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net)
[11:34:21] <bjz> just brain farting
[11:34:23] <ChrisMorgan> I wonder if something like trait objects could be implemented as a library feature.
[11:34:31] <huon> I don't think Self relates to coherence particularly
[11:34:51] <huon> (at least, even if we wrote traits with Haskell-like syntax we'd still presumably have the same/similar coherence restrictiosn)
[11:34:58] <bjz> yup
[11:35:11] <cmr> ChrisMorgan: I mean, explicit vtables are a thing.
[11:35:16] *** Joins: vmx (vmx@moz-8g5bu2.pools.vodafone-ip.de)
[11:35:24] <napoleon> bai
[11:35:27] <bjz> huon: but we will never, because 1.0 :)
[11:35:29] *** Quits: napoleon (Mibbit@moz-hva2qp.tpgi.com.au) (Quit: http://www.mibbit.com ajax IRC Client)
[11:35:37] *** kimundi is now known as zz_kimundi
[11:35:43] *** Joins: errordeveloper (ilya@moz-rbv.o6q.208.90.IP)
[11:35:54] <mindtree> 1.0 = :( / :)
[11:35:54] <huon> bjz: right, but still basically just a syntactic thing
[11:35:54] *** Joins: vks (quassel@moz-b54qc9.fias.uni-frankfurt.de)
[11:35:58] *** Joins: edbond (edbond@moz-8st.7gv.108.109.IP)
[11:36:03] <huon> (in terms of coherence etc. anyway)
[11:36:28] <ChrisMorgan> cmr: and I guess a syntax extension of some form could ease the library implementation of it.
[11:37:08] <bjz> oh yes, by 'linked in' I mean, the syntax makes it seem like the Self parameter is 'different'
[11:37:27] <bjz> ie. has distinct semantics from the other parameters
[11:37:34] <ChrisMorgan> That’d be a pretty cool Rust X.0.0 feature: “removed trait objects; this simplified the language loads and we figured out that they actually weren’t necessary to the language proper after all”.
[11:37:38] *** Joins: andre_ (andre@moz-rnd.3qv.76.201.IP)
[11:37:47] *** Joins: esgeh (sg@moz-02033s.dyn.telefonica.de)
[11:38:12] *** Joins: duncan (paul@moz-dst.ms6.225.173.IP)
[11:38:13] * ChrisMorgan doubts it will ever happen, of course
[11:38:13] *** Joins: qrlpx (quassel@moz-n7t.3nb.211.95.IP)
[11:38:43] *** Quits: forgottenone (forgottenon@moz-pde.j99.45.92.IP) (Ping timeout: 121 seconds)
[11:39:22] <bjz> trait objects are pretty ancient, right? circa @marijnh?
[11:39:31] *** Joins: aatch (james@moz-is4j4r.cable.telstraclear.net)
[11:39:34] <cmr> yeah.
[11:39:35] *** Quits: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net) (Ping timeout: 121 seconds)
[11:39:35] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[11:39:57] *** Quits: errordeveloper (ilya@moz-rbv.o6q.208.90.IP) (Ping timeout: 121 seconds)
[11:40:17] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[11:40:42] *** Quits: larhat (Adium@moz-64mvae.outplay.com) (Quit: Leaving.)
[11:40:56] *** Quits: montefleury (Mibbit@moz-89l0mv.anonymizer.ccc.de) (Quit: http://www.mibbit.com ajax IRC Client)
[11:41:52] *** darkowlzz|afk is now known as darkowlzz
[11:43:57] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[11:44:24] <bluss> bstrie: (from backlog) C _Bool is only a byte too
[11:44:51] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[11:46:36] * ChrisMorgan heads to bed uncommonly early
[11:46:57] *** Quits: esgeh (sg@moz-02033s.dyn.telefonica.de) (Ping timeout: 121 seconds)
[11:47:10] *** Joins: larhat (Adium@moz-64mvae.outplay.com)
[11:48:11] *** Joins: nott (nott@moz-6e7.1a0.172.178.IP)
[11:48:23] *** Joins: tmerr1 (tmerr@moz-ibd.fpp.198.193.IP)
[11:49:26] *** Quits: vadimcn (uid46608@moz-o7asbu.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[11:50:59] <FreeFull> bluss: I don't think that's guaranteed though, is it?
[11:51:27] *** Joins: petras_m (petras@moz-lqajpp.ysoft.cz)
[11:51:33] *** Joins: mytrile (mytrile@moz-jkn.up2.40.84.IP)
[11:54:46] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[11:54:53] *** Joins: green_sky (bzlandfill@moz-r50mch.ip.telfort.nl)
[11:55:11] *** Joins: kieran (kieran@moz-c5gk5j.ihug.co.nz)
[11:55:23] <bluss> well, no. it must be a byte but it could be larger I suppose
[11:55:50] <bjz> cmr: well it looks like I probably need GADTs for this :P
[11:55:54] <bluss> but Rust already assumes much more from its platform than C does, so assuming _Bool is one byte is probably doable
[11:57:42] <green_sky> I'm currently using pkg-config to find a library, but how should this be done on Windows?
[11:57:59] *** Joins: Bira (Bira@moz-sq6.nc4.106.187.IP)
[11:59:19] *** Quits: kieran (kieran@moz-c5gk5j.ihug.co.nz) (Ping timeout: 121 seconds)
[11:59:50] *** Quits: nott (nott@moz-6e7.1a0.172.178.IP) (Ping timeout: 121 seconds)
[11:59:58] <FreeFull> bluss: At least the allowed values for bool and _Bool overlap fully (only 0 or 1)
[12:00:02] *** Quits: bharadwaj (bharadwaj@moz-sd6.35d.72.182.IP) (Quit: Leaving...)
[12:01:09] *** Joins: meh (meh@moz-p5gc2m.42-151.net24.it)
[12:01:25] <green_sky> Or does Rust have no reliable way of finding libraries on Windows?
[12:01:57] *** Joins: esgeh (sg@moz-a7j.cns.76.134.IP)
[12:03:09] *** Joins: rootnode (rootnode@moz-go1ut4.ip1.george24.com)
[12:04:31] *** Quits: dawehner-afk (quassel@moz-manmml.mullvad.net) (Quit: No Ping reply in 180 seconds.)
[12:04:41] *** Joins: DerisiveLogic (smuxi@moz-g93io6.res.rr.com)
[12:05:20] *** Quits: skade (skade@moz-4eh.d50.201.212.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[12:05:45] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[12:05:53] *** Joins: dawehner (quassel@moz-manmml.mullvad.net)
[12:07:05] *** Quits: Dylan16807 (dylan@moz-62uibl.cntmoh.sbcglobal.net) (Ping timeout: 121 seconds)
[12:07:16] *** Joins: febeling (febeling@moz-pmj7iq.dip0.t-ipconnect.de)
[12:07:47] *** Quits: lenstr (lenstr@moz-l28.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[12:08:09] *** Joins: choplin (choplin@moz-b1oa9n.zaq.ne.jp)
[12:08:48] *** Joins: {AS} (uid45026@moz-srvrrh.uxbridge.irccloud.com)
[12:09:02] *** Quits: DerisiveLogic (smuxi@moz-g93io6.res.rr.com) (Ping timeout: 121 seconds)
[12:09:06] *** Joins: Dylan16807 (dylan@moz-62uibl.cntmoh.sbcglobal.net)
[12:09:21] *** Quits: loyd (loyd@moz-uft.32f.108.213.IP) (Connection closed)
[12:09:31] *** Quits: popow (Thunderbird@moz-03f.kd0.252.223.IP) (Connection closed)
[12:09:41] *** Joins: loyd (loyd@moz-uft.32f.108.213.IP)
[12:10:36] *** zz_kimundi is now known as kimundi
[12:11:55] *** Joins: errordeveloper (ilya@moz-rbv.o6q.208.90.IP)
[12:12:12] *** Quits: choplin (choplin@moz-b1oa9n.zaq.ne.jp) (Ping timeout: 121 seconds)
[12:13:59] *** Quits: green_sky (bzlandfill@moz-r50mch.ip.telfort.nl) (Quit: CGI:IRC)
[12:15:02] *** Quits: turtil (turtil@moz-8am.857.98.121.IP) (Ping timeout: 121 seconds)
[12:15:44] *** Quits: mytrile (mytrile@moz-jkn.up2.40.84.IP) (Quit: )
[12:15:47] *** Quits: sonder (chatzilla@moz-nt8r49.idi.ntnu.no) (Connection closed)
[12:17:40] *** Joins: dstrbad (dstrbad@moz-fmj719.net.t-com.hr)
[12:18:01] *** Quits: dstrbad (dstrbad@moz-fmj719.net.t-com.hr) (A TLS packet with unexpected length was received.)
[12:18:47] *** Joins: _ixti_ (ixti@moz-i3d.dae.119.188.IP)
[12:19:23] *** Quits: larhat (Adium@moz-64mvae.outplay.com) (Quit: Leaving.)
[12:20:14] *** Quits: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[12:20:23] *** Quits: quibbit (Mibbit@moz-frq.0ag.199.27.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:21:13] <js> bluss: nope, _Bool is not necessarily a byte. It is, in fact, sizeof(int) bytes on many platforms.
[12:22:15] <bluss> ok, that's kind of a strange choice
[12:22:16] *** Joins: dstrbad (dstrbad@moz-fmj719.net.t-com.hr)
[12:22:35] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[12:23:08] *** darkowlzz is now known as darkowlzz|afk
[12:24:14] *** Joins: untitaker_ (untitaker@moz-l628jn.highway.telekom.at)
[12:26:44] *** Joins: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net)
[12:27:09] *** Quits: untitaker (untitaker@moz-0lslvg.highway.telekom.at) (Ping timeout: 121 seconds)
[12:27:10] *** Quits: wei2912 (wei2912@moz-m4r.q8f.156.175.IP) (Quit: Lost terminal)
[12:27:15] *** Joins: skade (skade@moz-4eh.d50.201.212.IP)
[12:27:53] *** Quits: dstrbad (dstrbad@moz-fmj719.net.t-com.hr) (A TLS packet with unexpected length was received.)
[12:28:13] *** Joins: lenstr (lenstr@moz-l28.vju.25.171.IP)
[12:28:43] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[12:29:15] *** Joins: vmeson (rmacleod@moz-hq5.1km.224.128.IP)
[12:30:05] *** Joins: erz (erz@moz-efrhus.broadband.corbina.ru)
[12:31:09] <bstrie> ChrisMorgan cmr: how would you do closures without trait objects?
[12:31:53] *** Quits: dmac (dmac@moz-2ig65r.ca.comcast.net) (Connection closed)
[12:31:58] *** Quits: scepticulous (Mibbit@moz-v16bbp.adsl.alicedsl.de) (Quit: http://www.mibbit.com ajax IRC Client)
[12:32:23] *** Quits: yuja (yuja@moz-07pdo8.pikara.ne.jp) (Ping timeout: 121 seconds)
[12:32:44] <huon> bstrie: closures work fine without trait objects
[12:32:47] <bstrie> bjz: trait objects date back to marijn implementing monomorphization, yes
[12:32:53] <bstrie> huon: explain
[12:32:58] <huon> fn foo<F: Fn()>(f: F) {}
[12:33:00] <huon> no trait objects
[12:33:12] <bjz> but returning/storing one?
[12:33:31] <huon> right, anonymous return types
[12:33:32] <mindtree> anon types?
[12:33:32] *** Quits: febeling (febeling@moz-pmj7iq.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[12:34:04] <bjz> huon: so you could describe an ADT with anon return types in it?
[12:34:05] <bstrie> huon: anonymous return types can be stored?
[12:34:30] <bstrie> struct Foo { x: impl Fn() } ?
[12:34:45] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[12:35:34] <huon> unclear
[12:35:51] <huon> but there's lots of things that are (very) hard to do with some sort of type erasure
[12:35:58] <bluss> boxing is nice! You can hide stuff behind a common type
[12:36:10] <bluss> huon: with or without?
[12:36:16] <huon> without*
[12:36:16] <huon> :)
[12:36:24] *** Joins: twipeD (wipeD@moz-1o67f3.dip0.t-ipconnect.de)
[12:36:35] *** Joins: adjivas (adjivas@moz-t655t6.abo.wanadoo.fr)
[12:36:36] <Ms2ger> So how are we going to deal with heterogeneous arrays?
[12:36:36] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Connection closed)
[12:36:44] <bluss> what did everyone do to become so trait object negative today?
[12:36:53] <bstrie> I say, if trait objects are so unimportant then put your money where your mouth is and convert to using explicit vtables in your own code :P
[12:37:11] * huon has no interest in removing trait objects
[12:37:15] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[12:37:44] *** Joins: Kirth (Kirth@moz-s870ul.k4vt.f0b6.06a8.2001.IP)
[12:38:38] *** Joins: Hannibal_Smith (nico@moz-l9aupr.retail.telecomitalia.it)
[12:39:02] <aatch> bstrie, we used to do that!
[12:39:07] <bluss> sometimes trait objects use no allocation right?
[12:39:08] <mindtree> bluss: it's an ongoing hypothetical :)
[12:39:18] <bluss> aha, that's cool
[12:39:21] *** Quits: dawehner (quassel@moz-manmml.mullvad.net) (Quit: No Ping reply in 210 seconds.)
[12:39:22] *** Joins: dstrbad (dstrbad@moz-vkmg27.cable.xnet.hr)
[12:39:46] <huon> bluss: a & or &mut trait object doesn't allocate, and theoretically boxing a zero sized type does no allocation too
[12:39:53] <aatch> No hypotheticals at all, &Trait is a trait object, and it doesn't have to be on the heap.
[12:39:54] <bluss> so we need to bring that to the fore so rusties understand what they pay
[12:40:18] *** Joins: Kirth_ (Kirth@moz-s870ul.k4vt.f0b6.06a8.2001.IP)
[12:40:21] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[12:40:28] <bluss> huon: what about Box<FnMut> of a function pointer? that one is zero alloc too
[12:40:33] <bluss> at least theoretically
[12:40:40] <bluss> fn item
[12:40:45] *** Joins: dawehner (quassel@moz-manmml.mullvad.net)
[12:40:49] <huon> I don't think so in practice now, but it should be in future
[12:41:17] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[12:41:19] <huon> fn items are meant to have a zero-sized unique type... we're missing the zero-sized bit now
[12:41:53] <aatch> playbot, std:;mem::size_of::<fn()>()
[12:41:54] -playbot- <anon>:9:12: 9:13 error: expected one of `!`, `.`, `::`, `;`, `{`, `}`, or an operator, found `:`
[12:41:54] -playbot- <anon>:9         std:;mem::size_of::<fn()>()
[12:41:54] -playbot- output truncated; full output at: http://bit.ly/1Ia9S20
[12:42:00] <bstrie> huon: how can it be zero-sized? even if you close over nothing, where's the function pointer?
[12:42:33] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[12:42:34] <bluss> you put that in the vtable
[12:42:39] <Mutabah> huon: vtable, which is static
[12:43:15] *** Quits: Kirth (Kirth@moz-s870ul.k4vt.f0b6.06a8.2001.IP) (Ping timeout: 121 seconds)
[12:43:20] <aatch> bstrie, fn items can be zero-sized by being a unique type. No pointer needed because we already know which one to call. boxed closures from fn items will still be 2 words big, but the "data" word can be empty.
[12:43:39] <aatch> And therefore not actually allocate anything.
[12:43:59] *** Quits: jfredett (Adium@moz-a9ilmn.fios.verizon.net) (Quit: Leaving.)
[12:44:07] <bluss> they'll use the 0x1 pointer to be nonnull
[12:44:27] *** Joins: jfredett (Adium@moz-a9ilmn.fios.verizon.net)
[12:44:42] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[12:44:44] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Connection closed)
[12:46:21] *** Joins: Kirth__ (Kirth@moz-s870ul.k4vt.f0b6.06a8.2001.IP)
[12:46:47] <huon> playbot: fn foo() {} std::mem::size_of_val(&foo)
[12:46:48] -playbot- 8
[12:46:53] *** Quits: tristanseifert (tristanseif@moz-r0t7ns.res.rr.com) (Ping timeout: 121 seconds)
[12:47:04] *** Joins: maugzoide (maugzoide@moz-ua3.1qv.43.177.IP)
[12:47:28] <aatch> playbot: fn foo() {} std::mem::size_of_val(foo)
[12:47:29] -playbot- <anon>:9:43: 9:46 error: mismatched types:
[12:47:29] -playbot-  expected `&_`,
[12:47:29] -playbot- output truncated; full output at: http://bit.ly/1bW0IZf
[12:47:51] <steveklabnik> bstrie: rustbyexample can always use help ;)
[12:48:27] *** Joins: kieran (kieran@moz-c5gk5j.ihug.co.nz)
[12:48:51] *** Quits: mindtree (Mitch@moz-l32.ei8.240.116.IP) (Ping timeout: 121 seconds)
[12:48:56] <bstrie> steveklabnik: *I* might be busy, but you should stage a call for help perhaps... someone was mentioning how rbe is using gated features
[12:49:18] *** Quits: Kirth_ (Kirth@moz-s870ul.k4vt.f0b6.06a8.2001.IP) (Ping timeout: 121 seconds)
[12:49:46] *** Quits: SneakySnake (nya@moz-i9is4u.pool.telekom.hu) (Connection closed)
[12:50:47] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[12:51:43] *** Quits: fabiand (fabiand@moz-lbcrfc.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[12:54:20] *** Joins: El_Picador (quassel@moz-lhljbu.schermesser.com)
[12:54:21] *** Quits: lyc (lyc@moz-voq.ko9.36.101.IP) (Connection closed)
[12:54:36] *** Joins: wei2912 (wei2912@moz-m4r.q8f.156.175.IP)
[12:54:59] <El_Picador> hi, i'm trying to play with Rust, but I'm kind of stuck on transforming a String -> str (beta3, macos) : https://gist.github.com/ElPicador/772f920a755c2cf38535
[12:55:05] <El_Picador> can anyone help me ? thanks !
[12:56:20] <Mutabah> El_Picador: &arg_1 doesn't work?
[12:56:30] <Mutabah> What about &*arg_1
[12:56:40] <steveklabnik> bstrie: yeah, it tracks nightly. it's not really possible to have it on beta without removing a bunch of content and upgrading a bunch of code
[12:56:40] <El_Picador> &arg_1 does not
[12:56:57] <Mutabah> (or &arg_1[..] for a more erganomic one)
[12:57:10] *** Quits: sin8h (Adium@moz-f0u.cn5.51.106.IP) (Quit: Leaving.)
[12:57:11] <El_Picador> Mutabah: thanks ! &*arg_1 does work
[12:57:13] <aatch> El_Picador, ah, known bug unfortunately.
[12:57:20] <El_Picador> aatch: ah ok :)
[12:57:58] <Mutabah> aatch: The &'a T impl of ToSocketAddrs catches the &String?
[12:58:32] *** Joins: lyc_ (lyc@moz-jft.nr8.226.207.IP)
[12:58:33] *** Quits: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[12:59:06] <bstrie> steveklabnik: I don't want people to be learning rust by unstable examples...
[12:59:11] <aatch> Mutabah, I think it's more that it finds that &String matches &T and /then/ does `String : ToSocketAddrs`?
[12:59:20] <Mutabah> aatch: Yeah
[12:59:39] *** Joins: proc (proc@moz-lggecs.dip0.t-ipconnect.de)
[12:59:59] *** Joins: sin8h (Adium@moz-f0u.cn5.51.106.IP)
[13:02:12] *** Joins: joel1 (joel@moz-6ampnk.gtri.gatech.edu)
[13:02:20] *** Joins: minot (minot@moz-r0m4ta.minotstateu.edu)
[13:03:25] <terpstra> the new closure-based thread::scoped will also mean that propagation of panic! from child to parent does not involve the destructor (and an abort), right?
[13:03:39] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[13:04:32] *** Quits: minot_afk (minot@moz-r0m4ta.minotstateu.edu) (Ping timeout: 121 seconds)
[13:05:05] *** Joins: colinsurprenant (colin@moz-rmn4e2.169.electronicbox.net)
[13:05:06] *** Joins: griffindy (textual@moz-e2t.qpb.133.192.IP)
[13:05:08] *** Quits: colinsurprenant (colin@moz-rmn4e2.169.electronicbox.net) (Client exited)
[13:05:12] *** Joins: idegen (greg@moz-9c4nle.or.frontiernet.net)
[13:05:50] *** Joins: fabiand (fabiand@moz-fo4vhj.dip0.t-ipconnect.de)
[13:06:12] <bstrie> terpstra: the new thread::scoped API won't involve a destructor at all afaik
[13:06:16] *** Quits: dstrbad (dstrbad@moz-vkmg27.cable.xnet.hr) (A TLS packet with unexpected length was received.)
[13:06:19] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[13:06:19] *** ChanServ sets mode: +o jdm
[13:06:32] <proc> was there a cmd to install older nightly version ? (from 2 weeks ago ) all my dependencies are broken & not migrated to beta.3 ;(
[13:06:35] * darkfox wonders why channel isn't struct Channel<T>(Sender<T>, Reciever<T>);
[13:07:02] <darkfox> Only slightly more complex to deconstruct... (The length of it's name)
[13:07:25] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Quit: Leaving)
[13:07:41] <terpstra> bstrie, well, it must. otherwise if your main thread panics, you have no way to make a landing pad whereby you kill any still-running child threads
[13:08:13] <terpstra> bstrie, but when you join the child threads, that won't be in the destructor that is used to kill them on parent panic
[13:08:18] <terpstra> i think... ?
[13:09:10] <steveklabnik> proc: you can pass a --date to rustup, iirc
[13:09:29] <bstrie> darkfox: I believe the rationale is that you basically *have* to deconstruct it to make any use of it, so it's overkill to have a struct solely that you want to pluck things out of
[13:09:31] *** Quits: petras (Mibbit@moz-lqajpp.ysoft.cz) (Quit: http://www.mibbit.com ajax IRC Client)
[13:09:39] *** Joins: envi_un (envi@moz-ih5.olo.169.121.IP)
[13:09:42] <proc> steveklabnik: oh, thanks! yeah there was something..
[13:09:54] *** Joins: dzyp (hiatt@moz-ofiasr.static.qwest.net)
[13:10:04] <darkfox> bstrie: Maybe so; and I should probably not be including a tuple of both in my structs anyway... :D
[13:10:18] <darkfox> Debugging \o/
[13:11:09] *** Quits: futile (felix@moz-cmcd12.unity-media.net) (Ping timeout: 121 seconds)
[13:11:27] *** Joins: thiblahute (tsaunier@moz-1jgbr0.a2a6.5q4v.0e35.2a01.IP)
[13:11:28] <darkfox> bstrie: I agree with your description for the potential rationale, however, I find it more natural to type Channel::new (Which I've done too many times..)
[13:12:14] *** Joins: larhat (Adium@moz-64mvae.outplay.com)
[13:12:32] *** Quits: envi_u (envi@moz-ih5.olo.169.121.IP) (Ping timeout: 121 seconds)
[13:12:52] *** Quits: raph (raph@moz-o75.fg7.77.192.IP) (Quit: Leaving.)
[13:13:02] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[13:13:52] *** Joins: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net)
[13:14:14] <proc> steveklabnik saved my day :)
[13:14:40] *** Joins: tadh (quassel@moz-iq6hhs.biz.rr.com)
[13:15:01] <steveklabnik> :)
[13:15:20] *** Quits: panicbit (panicbit@moz-me73jj.itmc.tu-dortmund.de) (Ping timeout: 121 seconds)
[13:15:51] *** Joins: ismaelga (ismaelga@moz-lmk.cu2.251.188.IP)
[13:16:00] *** Quits: kieran (kieran@moz-c5gk5j.ihug.co.nz) (Ping timeout: 121 seconds)
[13:16:33] <bstrie> darkfox: we actually used to have Channel::new, I think...
[13:16:41] <bstrie> I remember a debate over what the api for a channel should be :P
[13:17:16] <darkfox> steveklabnik, proc: For the slight chance that you're running gentoo - you might need to take a look at eselect (chose which one you want at any point in time!)
[13:17:33] <darkfox> bstrie: Sounds expected considering
[13:17:58] * darkfox wonders why not go towards the ever so slightly more bloaty method of both? :D 
[13:18:05] <steveklabnik> bstrie: we did have Channel::new, iirc it went away when the struct did
[13:18:14] <darkfox> Right
[13:18:18] <bstrie> I guess it actually was a struct at some point, then :P
[13:18:28] <bstrie> I must have been in hibernation for that period
[13:18:45] <darkfox> :)
[13:18:45] <proc> darkfox: thanks, but looking into the rustup docs & using the right cmd was fixing it all :) [too many stable-declarations in byteorder ;) ]
[13:19:09] *** Quits: ProCreator (Mibbit@moz-esqvuq.ny.charter.com) (Quit: http://www.mibbit.com ajax IRC Client)
[13:19:24] <darkfox> proc: Indeed; I can select between beta2 and a pre-beta. Just swaps which I'll use
[13:20:05] <darkfox> Which would be very ideal for developers who need many versions (Not that rust should have any issue with versions; and chroots might do a better job with isolated copies of all dependencies etc)
[13:20:23] <bstrie> darkfox: multirust!
[13:20:31] <proc> darkfox: I was sticking to the nightly till now, and I knew from the chat that I would break my installation, but tried to work around a compiler error through this, screw me
[13:20:39] *** Joins: Sawbones (Sawbones@moz-9m512j.ctsfla.com)
[13:20:43] <bstrie> proc: multirust!
[13:20:46] <darkfox> bstrie: You sound either happy about the multiple options or as if that is a thing?
[13:20:47] <proc> yeah
[13:20:50] <proc> lazy!
[13:20:58] <proc> [too]
[13:21:06] <darkfox> [toml[
[13:21:08] <darkfox> [toml]
[13:21:11] *** Joins: Sawbones_ (Sawbones@moz-9m512j.ctsfla.com)
[13:21:19] <bstrie> darkfox: https://github.com/brson/multirust !
[13:21:53] <darkfox> bstrie: :)
[13:22:22] <darkfox> proc: You might be better off with multirust than the install script ;)
[13:22:45] <darkfox> bstrie: Nice to see a more rusty version of what eselect does for free on gentoo :P
[13:22:53] <darkfox> portable rusty version*
[13:23:08] <proc> darkfox: I'm hardly ignoring it till know out of laziness 
[13:23:15] <proc> don't destroy my world ;)
[13:23:47] <darkfox> bstrie: Sadly; rvm was already taken ;) (Ruby version manager; that I only know about because metasploit depends on ruby ... displike ruby :P) 
[13:23:51] <darkfox> dislike *
[13:23:52] *** Joins: heatmeiser (heatmeiser@moz-usev34.res.rr.com)
[13:24:19] * darkfox packs away his destroyer.
[13:24:26] <bstrie> how about... hm... Rust-Based ENVironments
[13:24:41] *** Quits: Sawbones (Sawbones@moz-9m512j.ctsfla.com) (Ping timeout: 121 seconds)
[13:24:41] <steveklabnik> lol
[13:24:42] <proc> "where's my RENV ?"
[13:24:43] <darkfox> bstrie: #rust-osdev build env? :D
[13:25:00] <FreeFull> I'm still using multirust 0.2
[13:25:15] <FreeFull> 0.0.2*
[13:25:18] <darkfox> RustOS -> Now capable of bootstrapping itself :D (I'm waiting for this...)
[13:25:43] <proc> bootstrap-deadlock
[13:25:46] * darkfox spots a FreeFull 
[13:25:52] *** Joins: mnemnion (mnemnion@moz-kf3boi.ca.comcast.net)
[13:25:55] <FreeFull> Hi darkfox
[13:26:02] *** Quits: fmtq (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[13:26:02] <darkfox> Hey :P
[13:27:00] *** Joins: pieman (Mibbit@moz-r9s.v53.167.208.IP)
[13:27:13] *** Quits: pieman (Mibbit@moz-r9s.v53.167.208.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:27:23] <FreeFull> bstrie: Does 0.0.6 still notify when there is a new nightly/beta?
[13:27:28] <steveklabnik> no
[13:27:30] <steveklabnik> that was removed
[13:27:36] <steveklabnik> i liked it, but many didn't
[13:27:41] <bstrie> FreeFull: I'm still using a version of rustup that I wrote myself because rustup hadn't been written yet...
[13:28:16] *** Joins: logan_e (logan_e@moz-mpr4r7.lsrhs.net)
[13:28:26] *** Joins: fmtq (fmtq@moz-d08itp.tpgi.com.au)
[13:28:28] <FreeFull> steveklabnik: Well, the readme still says otherwise too
[13:28:45] * darkfox just using gentoo with unofficial overlay for rust (and related) packages to compile because one command that is system wide wins when lazy and can wait while code compiles and I go to school or sleep :P
[13:28:47] <steveklabnik> huh
[13:28:49] *** Quits: tmerr1 (tmerr@moz-ibd.fpp.198.193.IP) (Connection closed)
[13:28:57] * darkfox needs better CPU for compiling... Single core atom </3 </3
[13:29:55] *** Joins: dstrbad (dstrbad@moz-8d7dvf.dsl.iskon.hr)
[13:31:32] *** Joins: dzhulk1 (Adium@moz-hnu.hki.140.95.IP)
[13:31:43] *** Joins: Kirth_ (Kirth@moz-s870ul.k4vt.f0b6.06a8.2001.IP)
[13:31:43] *** Joins: frankmcsherry (frankmcsher@moz-vo76ol.dyn.telefonica.de)
[13:32:36] *** Joins: minot2 (kkus@moz-baj4jj.74.srtnet.com)
[13:32:53] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[13:32:58] <terpstra> when rust gets garbage collection back, what is the plan for cleaning up cycles there? are we going to forbid objects which implement Drop from being used with GC?
[13:33:35] <Ms2ger> Rust isn't getting a GC in the standard library
[13:33:40] *** Quits: dzhulk (Adium@moz-hnu.hki.140.95.IP) (Ping timeout: 121 seconds)
[13:34:17] <terpstra> well, it can't be completely in a library. there has to be some compiler support for marking roots. but, my question stands regardless of whether GC is in std or an external crate.
[13:34:27] *** Joins: Nextra (Nextra@moz-gfb419.osnanet.de)
[13:34:40] *** Quits: Kirth__ (Kirth@moz-s870ul.k4vt.f0b6.06a8.2001.IP) (Ping timeout: 121 seconds)
[13:35:01] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[13:35:17] <proc> darkfox: you're from twenty years ago ? even my system has more then one core ;)
[13:35:31] <bluss> terpstra: forbidding drop is unlikely
[13:35:45] <bluss> terpstra: how to drop a cycle though, no idea
[13:36:01] <proc> darkfox: how long does it take to compile rust on it ?
[13:36:12] <terpstra> bluss, but if you have a cycle -- who gets dropped first? the other guys might still have a reference used in their drop => unsafety
[13:36:28] <terpstra> it's like the Rc-cycle problem, but far worse
[13:36:36] *** Joins: erikj (erikj@moz-dsm7da.skybroadband.com)
[13:36:45] *** Quits: dawehner (quassel@moz-manmml.mullvad.net) (Quit: No Ping reply in 180 seconds.)
[13:36:50] <terpstra> i think it's pretty settled at this point that the solution to cycles in Rc is to let them leak and never run Drop. a GC cannot do this.
[13:37:20] <cmr> I don't agree that that is settled.
[13:37:30] <FreeFull> Perhaps just a rule that using a GC pointer during Drop can panic?
[13:37:32] <bluss> It's not settled?
[13:37:44] <cmr> in https://github.com/cmr/rust-cc I explcitly require objects to have the ability to break off their references.
[13:37:58] *** Joins: dawehner (quassel@moz-manmml.mullvad.net)
[13:38:09] <FreeFull> That'd be the simplest solution, but it'd forbid some useful Drop impls
[13:38:34] <cmr> It doesn't forbid them, they just need to be able to handle the case where they are part of a cycle and they've been chosen to sever it.
[13:38:42] <FreeFull> For more power you'd need something to indicate what gets dropped first
[13:38:50] *** Joins: Guest74 (textual@moz-il1.n6s.204.65.IP)
[13:39:06] *** Joins: new_one (new_one@moz-fsb.g8k.42.128.IP)
[13:39:09] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[13:39:16] <terpstra> cmr, i don't mean custom Rc types. i mean the Rc in std.
[13:39:22] <terpstra> that's the one which is 'setlled' ;)
[13:39:30] <FreeFull> GC pointers could be nullable
[13:39:33] <cmr> terpstra: rust-cc works with Rc.
[13:39:42] <cmr> (in fact, that's how I use it)
[13:39:55] <cmr> FreeFull: yeah, that's what I end up doing with Option
[13:40:01] *** Quits: gioele (gioele@moz-e7repq.cceh.uni-koeln.de) (Quit: )
[13:40:15] <Ms2ger> So basically you add unlink()
[13:40:17] <FreeFull> And of course null deref -> panic!
[13:40:29] <FreeFull> And there'd be a safe deref method
[13:40:44] <FreeFull> That returns Option<T>
[13:41:21] <darkfox> proc: Took me 10 hours; but that was while also compiling the linux kernel for 5 hours and a few other things - all simutainusly (terrible performance, but I was afk :P)
[13:41:28] <cmr> it's not very rustic, but that's what you get when using a GC.
[13:41:30] *** Joins: futile (felix@moz-cmcd12.unity-media.net)
[13:41:36] <FreeFull> Yeah
[13:41:42] *** Quits: Sawbones_ (Sawbones@moz-9m512j.ctsfla.com) (Quit: Leaving...)
[13:41:45] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[13:41:49] <proc> darkfox: that's the spirit :)
[13:41:56] *** Quits: dawehner (quassel@moz-manmml.mullvad.net) (Quit: No Ping reply in 210 seconds.)
[13:42:09] <FreeFull> Difficult to come up with something better
[13:42:09] <darkfox> One does not leave one thing compiling ... queue all the things then go afk :P
[13:42:16] *** Joins: tcard (tcard@moz-5eb1g3.staticIP.rima-tde.net)
[13:42:20] <terpstra> cmr, your CyclicReference is still a special type as far as i can see? only cycles that implement that trait get collected..?
[13:42:35] <FreeFull> I think a lot of languages with built in GC don't have destructors, or have destructors with limitations
[13:42:42] <cmr> terpstra: yes, that's true, you do need to manually write a trace hook.
[13:42:59] *** Joins: jjthrash (jjthrash@moz-gsigbq.res.rr.com)
[13:43:08] <cmr> terpstra: the idea is that the things that can actually form reference cycles are very few :)
[13:43:17] *** Joins: dawehner (quassel@moz-manmml.mullvad.net)
[13:43:49] *** Joins: bombless (_@moz-5bmlmk.0v2u.0v40.0da8.2001.IP)
[13:44:14] *** Quits: heatmeiser (heatmeiser@moz-usev34.res.rr.com) (Quit: Leaving...)
[13:44:24] *** Joins: _bart (bart@moz-hu0dqu.irf.se)
[13:44:25] * darkfox wonders if there would ever be an option in the future to tell rustc to do or skip it's type checks for performance purposes - I.e. do and cache; then skip when unchanged or skip when build process is known safe - eg exact versions and packaged sources...
[13:44:43] <darkfox> I think I'd rather have a cache of the checks.. Skip when known good.
[13:45:00] <terpstra> cmr, your approach puts the cycle breakage squarely in the users face with the 'break_references' function. so i guess that's "a" solution
[13:45:09] <bluss> hehe hopefully we can improve the compiler's performance so that's not an issue darkfox 
[13:45:11] <steveklabnik> darkfox: nope, we've generally rejected that kind of thing
[13:45:14] <darkfox> Sadly that has a dependency issue; inheritly a dependency changing would redo that.
[13:45:24] <steveklabnik> but also, typechecking is _not_ a significant amount of compilation time
[13:45:30] <steveklabnik> so it wouldn't even really improve
[13:45:38] <terpstra> i don't think this would be very nice to have to do this in order to use a GC'd container, though
[13:45:46] *** Quits: aravindavk (aravinda@moz-m6j.f0d.244.121.IP) (Ping timeout: 121 seconds)
[13:45:52] <bluss> steveklabnik: there's a pathological case on the issue tracker where it is
[13:46:00] <cmr> terpstra: well, of course. if you want to actually free cycles, I don't know of a better way to do it without losing flexibility.
[13:46:03] <steveklabnik> sure, there are always pathological cases
[13:46:12] <steveklabnik> but in non-pathological cases, it's not.
[13:46:22] <darkfox> steveklabnik: Maybe on more decent hardware than what I have... but I've noticed quite a big difference with speed on my atom compared to c (without all such checks)
[13:46:29] <cmr> besides just making it nullable as mentioned before.
[13:46:33] <darkfox> Much more noticable than on my i5
[13:46:39] <steveklabnik> darkfox: have you done -Z time-passes to verify that it's typechecking?
[13:46:45] *** Joins: gandalf (zbraniecki@moz-q46bkg.hr.cox.net)
[13:46:49] <darkfox> Nope
[13:46:53] <bluss> steveklabnik: it's about 30% of the time of compiling itertools
[13:46:56] <FreeFull> AFAIK codegen takes most of the time
[13:47:00] <darkfox> steveklabnik: I shall try this
[13:47:11] <FreeFull> And type checking is rather fast
[13:47:35] <erikj> Hmm, so panics. Is there a way to either assert that a bunch of code *can't* panic, or to catch a panic at a high level? I'm thinking in terms of writing a server that handles multiple connections per process/thread, I really don't want a stray panic in the logic of handling a particular connection to take out other connections.
[13:47:41] *** Quits: Hannibal_Smith (nico@moz-l9aupr.retail.telecomitalia.it) (Quit: Leaving)
[13:47:46] <steveklabnik> erikj: there's no way to assert something can't panic
[13:48:01] <steveklabnik> as far as catching goes, you have to spin up a sub-thread, and then you can check on the handle to see if it's failed
[13:48:25] *** Quits: shahn (Sebastian@moz-qmgakf.sebastianhahn.net) (Quit: dinge)
[13:49:05] *** Quits: vks (quassel@moz-b54qc9.fias.uni-frankfurt.de) (A TLS packet with unexpected length was received.)
[13:49:12] *** Joins: vks (quassel@moz-b54qc9.fias.uni-frankfurt.de)
[13:49:31] <_bart> Hi, I'm trying to run the example listed here: https://doc.rust-lang.org/std/fs/struct.File.html#examples but it results in an error: https://gist.github.com/bartolsthoorn/60a653fcc30ce00c4c84 Is the example outdated?
[13:50:10] <steveklabnik> _bart: you're missing something
[13:50:18] <steveklabnik> if you click the arrow in the top-right
[13:50:25] <steveklabnik> you'll see that the example is wrapped in a function
[13:50:38] <steveklabnik> try! needs to be inside of something that retuns a Result, which main() is not
[13:51:12] *** Joins: SneakySnake (nya@moz-i9is4u.pool.telekom.hu)
[13:51:20] <_bart> steveklabnik: ah thank you, that's it
[13:51:55] *** Joins: Hannibal_Smith (nico@moz-l9aupr.retail.telecomitalia.it)
[13:52:02] <steveklabnik> yeah. this is a semi-regular confusion, maybe we should consider changing it. the options are: include the function in the text, which just adds noise to the example, or, leave it off, which is more clear, but has this hidden thing
[13:52:15] <steveklabnik> we've gone with #2, because it's a one-time thing oyu learn, but maybe that's the wrong tradeoff
[13:53:23] *** Joins: mindtree (Mitch@moz-l32.ei8.240.116.IP)
[13:53:37] <darkfox> steveklabnik: How do you recommend running with -Z time-passes? cargo doesn't yet allow such flags to passthrough and cargo run --example <bin> --verbose provides a command that doesn't appear to work with "normal" env/shell setup?
[13:54:16] *** Quits: logan_e (logan_e@moz-mpr4r7.lsrhs.net) (Client exited)
[13:54:59] <tomaka> does someone know what are the URLs of the nightly builds?
[13:55:10] <steveklabnik> darkfox: run cargo -v, copy/paste output, add the flag
[13:55:14] <tomaka> I'm searching through various repos
[13:55:16] <huon> tomaka: static.rust-lang.org/dist/
[13:55:26] <tomaka> ahh there's an index, thanks
[13:55:27] <steveklabnik> cargo build -v
[13:55:30] <darkfox> I did; read the last part of my message.
[13:55:32] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[13:55:35] <steveklabnik> it should work
[13:55:40] <steveklabnik> that'd be very strange
[13:55:41] <huon> tomaka: there's the aliased-to-latest ones at the bottom
[13:55:53] <darkfox> steveklabnik: First complains about cfg feature; then when is removed; about outdir.
[13:55:57] <darkfox> I didn't go further
[13:56:34] *** Quits: gandalf (zbraniecki@moz-q46bkg.hr.cox.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[13:56:44] <tomaka> huon: no cargo?
[13:56:44] <steveklabnik> very odd
[13:56:52] <darkfox> steveklabnik: Odd indeed
[13:56:58] *** Joins: abique (abique@moz-alq0r9.ko9f.54u1.0e35.2a01.IP)
[13:57:02] <huon> tomaka: they may be inside the packages
[13:57:06] <huon> *it
[13:57:08] <steveklabnik> those should map to the same things it runs
[13:57:08] <huon> tomaka: unsure
[13:57:10] <steveklabnik> so that's confusing
[13:57:12] *** Quits: mkedlaya (mkedlaya@moz-orqmh5.cs.ucsb.edu) (Ping timeout: 121 seconds)
[13:57:45] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[13:58:02] <darkfox> steveklabnik: Indeed; and hence what I said above; doesn't appear to work with the normal env/shell setup - implying that maybe it is using it's own non-standard environment setup.
[13:58:08] <_bart> steveklabnik: ok I understand, tough call to make
[13:58:13] *** kimundi is now known as zz_kimundi
[13:58:36] *** Joins: PudgePacket (Mibbit@moz-obu378.tpgi.com.au)
[13:58:42] <steveklabnik> darkfox: are you sure you're not the one with the non-standard setup? ;) i kid, i kid.
[13:58:49] <steveklabnik> it's always worked for me
[13:58:54] <steveklabnik> if it doesn't, that's a bug in cargo
[13:58:59] <steveklabnik> can you maybe post this project somewhere?
[13:59:04] <steveklabnik> _bart: yeah :/
[13:59:12] <darkfox> steveklabnik: Hehe; project - not yet :P
[13:59:45] <darkfox> steveklabnik: My secret for now 72K of rust code :P
[13:59:50] <darkfox> Mostly comments :D
[13:59:54] *** Joins: w4ffles (w4ffles_@moz-34v1r4.res.rr.com)
[14:00:06] <darkfox> Morning world
[14:00:08] <darkfox> Tue May  5 00:00:08 AEST 2015
[14:00:27] *** Joins: Kirth__ (Kirth@moz-s870ul.k4vt.f0b6.06a8.2001.IP)
[14:00:53] <darkfox> steveklabnik: BTW: I've tried the copy/paste add flag method a few times - namely on archlinux, and now gentoo; same issue.
[14:01:09] <steveklabnik> well, if you can reproduce, you should file a bug
[14:01:21] <darkfox> steveklabnik: The most that I'm compiling against is sodiumoxide - which brings in libsodium.
[14:01:48] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[14:01:58] *** Joins: w4ffles_ (textual@moz-34v1r4.res.rr.com)
[14:01:59] <_bart> steveklabnik: my thought process was that try! would probably raise an exception (and error out) instead of returning a value, but I just started out with Rust. So it's probably fine to leave it as it is, unless it's hordes of people that get confused.
[14:02:03] *** Quits: w4ffles (w4ffles_@moz-34v1r4.res.rr.com) (Quit: Leaving)
[14:02:21] *** Joins: mkedlaya (mkedlaya@moz-orqmh5.cs.ucsb.edu)
[14:02:28] <steveklabnik> rust doesn't have exceptions
[14:02:36] <steveklabnik> so you know :)
[14:02:43] <steveklabnik> but yeah. it happens JUST often enough
[14:02:43] <_bart> yes now I know :)
[14:02:43] * darkfox should probably make a version of try that does option instead of result...
[14:03:04] *** Joins: ker-- (Mibbit@moz-7bq.0sb.52.141.IP)
[14:03:22] *** Quits: Kirth_ (Kirth@moz-s870ul.k4vt.f0b6.06a8.2001.IP) (Ping timeout: 121 seconds)
[14:03:29] <darkfox> result requires handling errors... D:
[14:03:31] <bluss> call it supertry!() Every error is smashed into pieces and turned into None
[14:03:35] *** Quits: idegen (greg@moz-9c4nle.or.frontiernet.net) (Quit: Leaving.)
[14:03:39] *** Joins: idegen (greg@moz-9c4nle.or.frontiernet.net)
[14:03:44] <darkfox> :P
[14:03:55] *** Joins: Kirth_ (Kirth@moz-s870ul.k4vt.f0b6.06a8.2001.IP)
[14:04:15] * darkfox loves how easy macros are to re-write; just change a few words and that would be so.
[14:04:22] <bluss> did you finish parsing that file? No! Why not? Um.. no!
[14:04:39] *** Joins: borromakot (Adium@moz-d7t.h3t.104.38.IP)
[14:04:44] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[14:04:44] *** ChanServ sets mode: +o erickt
[14:04:48] *** Quits: atomic_ (atomic@moz-q7r08l.contabo.host) (Ping timeout: 121 seconds)
[14:04:59] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[14:05:00] *** Joins: atomic_ (atomic@moz-1qu2sg.inaddr.ip-pool.com)
[14:05:06] *** Joins: chmanchester (Chris@moz-5va5sv.ckpj.s0pt.0450.2001.IP)
[14:05:46] *** Quits: joel1 (joel@moz-6ampnk.gtri.gatech.edu) (Connection closed)
[14:05:50] <darkfox> bluss: :D
[14:05:57] *** Quits: errordeveloper (ilya@moz-rbv.o6q.208.90.IP) (Ping timeout: 121 seconds)
[14:06:54] *** Quits: Kirth__ (Kirth@moz-s870ul.k4vt.f0b6.06a8.2001.IP) (Ping timeout: 121 seconds)
[14:07:29] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[14:07:44] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[14:07:49] * darkfox must call night; good night world. Happy hacking. o/
[14:08:05] *** Quits: akiss (akiss@moz-kij.q96.114.160.IP) (Ping timeout: 121 seconds)
[14:08:19] <proc> darkfox: into the dark with you ;) 
[14:08:22] *** Joins: jshs (jshs@moz-t44k5s.dip0.t-ipconnect.de)
[14:08:25] <darkfox> Heh
[14:08:29] <darkfox> That's a 'new' one.
[14:08:36] *** Quits: chmanchester (Chris@moz-5va5sv.ckpj.s0pt.0450.2001.IP) (Quit: Leaving)
[14:08:39] <darkfox> Honestly haven't heard this ^ :D
[14:08:50] *** Quits: munksgaard (munksgaard@moz-1f0.hq0.225.130.IP) (Ping timeout: 121 seconds)
[14:08:52] <proc> :)
[14:08:59] <darkfox> Nini. :P I might have to use that some time..
[14:09:02] * darkfox goes into the dark
[14:09:16] <darkfox> Thanks :P
[14:09:19] *** Joins: choplin (choplin@moz-b1oa9n.zaq.ne.jp)
[14:09:22] <proc> np
[14:09:26] <proc> I've my own :P
[14:09:29] <proc> proc!
[14:09:34] <proc> !proc
[14:09:35] <rustbot> deprecated
[14:09:47] *** Joins: tomprogrammer (thomas@moz-v7ibln.tr5r.qept.4dd0.2001.IP)
[14:10:00] *** Joins: Kirth__ (Kirth@moz-s870ul.k4vt.f0b6.06a8.2001.IP)
[14:10:10] *** Quits: Riastradh (riastradh@moz-fug.874.207.104.IP) (Ping timeout: 121 seconds)
[14:10:18] *** Quits: gonzaloserrano1 (Adium@moz-1nv.3t7.97.62.IP) (Quit: Leaving.)
[14:10:27] *** Joins: gonzaloserrano (Adium@moz-1nv.3t7.97.62.IP)
[14:10:38] *** Joins: woowe (holoirc@moz-fvg.cfn.181.166.IP)
[14:10:55] *** Joins: chmanchester (sid313@moz-6igabj.0j4i.jtu0.0101.2620.IP)
[14:12:57] *** Quits: Kirth_ (Kirth@moz-s870ul.k4vt.f0b6.06a8.2001.IP) (Ping timeout: 121 seconds)
[14:12:59] <tomaka> !rustbot
[14:13:00] * rustbot is not actually written in Rust!
[14:13:04] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[14:13:08] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Connection closed)
[14:13:21] *** Quits: choplin (choplin@moz-b1oa9n.zaq.ne.jp) (Ping timeout: 121 seconds)
[14:13:45] <terpstra> !9
[14:13:48] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[14:13:51] *** Quits: fmtq (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[14:14:06] <terpstra> !help
[14:14:06] <rustbot> Help is what I like to do! Everyone, welcome to #rust! Please read topics first. On bot usages, I've also sent private messages.
[14:14:27] *** Quits: psy (psy@moz-ous.ntd.6.103.IP) (Ping timeout: 121 seconds)
[14:14:44] *** Joins: krdln (krdln@moz-ohe9vg.dynamic.chello.pl)
[14:15:02] <proc> it seems to stick with the declaration I've given him 2 weeks ago ;)
[14:15:05] *** Joins: gandalf (zbraniecki@moz-q46bkg.hr.cox.net)
[14:15:07] <proc> (about proc )
[14:15:26] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Connection closed)
[14:15:31] *** Joins: Diggsey (diggsey@moz-nq516s.dsl.pipex.com)
[14:15:44] *** Quits: gandalf (zbraniecki@moz-q46bkg.hr.cox.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[14:15:50] *** Quits: vks (quassel@moz-b54qc9.fias.uni-frankfurt.de) (A TLS packet with unexpected length was received.)
[14:15:59] *** Joins: vks (quassel@moz-b54qc9.fias.uni-frankfurt.de)
[14:16:03] *** Quits: lyc_ (lyc@moz-jft.nr8.226.207.IP) (Connection closed)
[14:16:07] *** Joins: saml (saml@moz-0pt9vd.cst.lightpath.net)
[14:16:31] *** Quits: kaeluka (kaeluka@moz-csmuto.eduroam.uu.se) (Client exited)
[14:16:36] *** Joins: fmtq (fmtq@moz-d08itp.tpgi.com.au)
[14:17:44] *** Joins: claudiop (claudiop@moz-sqo2tm.cpe.netcabo.pt)
[14:17:47] *** Joins: bombless_ (_@moz-odk.piv.41.59.IP)
[14:18:54] *** Joins: panicbit (panicbit@moz-r4ks4s.dip0.t-ipconnect.de)
[14:19:03] *** Parts: krdln (krdln@moz-ohe9vg.dynamic.chello.pl) ()
[14:19:03] *** Joins: aravindavk (aravinda@moz-c0q.pv0.172.122.IP)
[14:19:10] *** Joins: logan_e (logan_e@moz-mpr4r7.lsrhs.net)
[14:19:12] *** Quits: vks (quassel@moz-b54qc9.fias.uni-frankfurt.de) (A TLS packet with unexpected length was received.)
[14:19:26] *** Quits: bombless (_@moz-5bmlmk.0v2u.0v40.0da8.2001.IP) (Ping timeout: 121 seconds)
[14:19:32] *** Quits: Ms2ger (Ms2ger@moz-6s1d7b.isp.belgacom.be) (Quit: bbl)
[14:19:46] *** Joins: vks (quassel@moz-b54qc9.fias.uni-frankfurt.de)
[14:19:49] *** Quits: vks (quassel@moz-b54qc9.fias.uni-frankfurt.de) (A TLS packet with unexpected length was received.)
[14:19:55] *** Joins: vks (quassel@moz-b54qc9.fias.uni-frankfurt.de)
[14:20:08] *** Joins: smerft (Mibbit@moz-nv2.6ic.91.212.IP)
[14:20:13] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Connection closed)
[14:20:58] *** Quits: smerft (Mibbit@moz-nv2.6ic.91.212.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:21:05] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[14:21:05] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[14:21:52] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Ping timeout: 121 seconds)
[14:22:31] *** Quits: Hannibal_Smith (nico@moz-l9aupr.retail.telecomitalia.it) (Connection closed)
[14:22:54] *** Joins: shahn (Sebastian@moz-usvpet.clients.your-server.de)
[14:23:25] *** Joins: annodomini (lambda@moz-o15.d8k.142.32.IP)
[14:23:34] *** Quits: borromakot (Adium@moz-d7t.h3t.104.38.IP) (Quit: Leaving.)
[14:24:05] *** Joins: vks_ (quassel@moz-b54qc9.fias.uni-frankfurt.de)
[14:24:55] *** Quits: vks (quassel@moz-b54qc9.fias.uni-frankfurt.de) (Ping timeout: 121 seconds)
[14:25:24] *** Joins: gonzaloserrano1 (Adium@moz-1nv.3t7.97.62.IP)
[14:25:24] *** Quits: gonzaloserrano (Adium@moz-1nv.3t7.97.62.IP) (Connection closed)
[14:25:40] *** Quits: shahn (Sebastian@moz-usvpet.clients.your-server.de) (A TLS packet with unexpected length was received.)
[14:27:26] *** Joins: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net)
[14:28:10] *** Joins: srh (User@moz-19lh79.q9f2.utp8.0306.2602.IP)
[14:28:28] *** Joins: shahn (Sebastian@moz-usvpet.clients.your-server.de)
[14:29:55] *** Quits: mindcat (mindcat@moz-dph.tp2.136.119.IP) (Ping timeout: 121 seconds)
[14:30:02] *** Quits: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[14:30:08] *** Quits: ryanxcharles (ryan@moz-kmeje6.bac4.d045.0009.2601.IP) (Ping timeout: 121 seconds)
[14:30:57] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[14:31:40] *** Joins: Kirth_ (Kirth@moz-s870ul.k4vt.f0b6.06a8.2001.IP)
[14:32:02] *** Joins: mindcat (mindcat@moz-0h1.tnp.13.183.IP)
[14:32:37] *** Quits: Kirth_ (Kirth@moz-s870ul.k4vt.f0b6.06a8.2001.IP) (Quit: Leaving)
[14:32:52] *** Joins: Fenhl (sid30770@moz-oh0hem.charlton.irccloud.com)
[14:33:26] *** Joins: sayan (sayan@moz-ip8.595.51.106.IP)
[14:34:37] *** Quits: Kirth__ (Kirth@moz-s870ul.k4vt.f0b6.06a8.2001.IP) (Ping timeout: 121 seconds)
[14:35:23] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[14:36:08] *** Quits: mindcat (mindcat@moz-0h1.tnp.13.183.IP) (Ping timeout: 121 seconds)
[14:36:18] *** Joins: robertknight_ic (sid15951@moz-qs7057.uxbridge.irccloud.com)
[14:36:40] *** Joins: lenstr_ (lenstr@moz-rrh.vju.25.171.IP)
[14:36:54] *** Quits: dawehner (quassel@moz-manmml.mullvad.net) (Ping timeout: 121 seconds)
[14:37:38] *** Joins: dawehner (quassel@moz-tobu60.hsi4.kabel-badenwuerttemberg.de)
[14:37:43] *** Quits: annodomini (lambda@moz-o15.d8k.142.32.IP) (Client exited)
[14:37:56] *** Parts: gonzaloserrano1 (Adium@moz-1nv.3t7.97.62.IP) ()
[14:37:58] *** Joins: davebettin (davebettin@moz-acc.cl4.35.72.IP)
[14:38:10] <robertknight_ic> What's a more idiomatic way to represent vector<shared_ptr<SomeInterface>>  than Vec<Rc<RefCell<Box<SomeInterface>>>> in Rust? In this case the 'SomeInterface' represents a node in a graph. 
[14:38:11] <bombless_> No way... syntax::diagnostic::FatalError doesn't impl Debug?
[14:38:15] *** bombless_ is now known as bombless
[14:38:17] *** Joins: mindcat (mindcat@moz-0h1.tnp.13.183.IP)
[14:38:42] *** Quits: pavelpenev (quassel@moz-usk.6ao.247.92.IP) (Ping timeout: 121 seconds)
[14:38:53] *** Joins: ytain (ytain@moz-pr2.aip.175.108.IP)
[14:39:04] <robertknight_ic> https://www.reddit.com/r/rust/comments/33jv62/vecrcrefcellboxtrait_is_there_a_better_way/ has some suggestions but it apparently refers to some WIP improvements in rustc
[14:39:07] <bombless> Okay I'll simply ok().unwrap() ...
[14:39:17] *** Quits: lenstr (lenstr@moz-l28.vju.25.171.IP) (Ping timeout: 121 seconds)
[14:39:30] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[14:39:37] <steveklabnik> robertknight_ic: well, shared_ptr is more close to Arc than Rc. but, if you're not planning on sharing across threads, Rc is better and faster
[14:40:08] <steveklabnik> robertknight_ic: but basically, at the moment, your way is most accurate. the Box will be able to go away at some point very soon, that PR is almost landed, if it hasn't already
[14:40:25] <mindtree> robertknight_ic: what are you doing with that out of curiousity?
[14:40:25] *** Quits: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[14:40:31] *** Quits: bkircher (bkircher@moz-hrr86t.otris.de) (Quit: Session terminated!)
[14:40:32] *** Joins: annodomini (lambda@moz-o15.d8k.142.32.IP)
[14:40:45] *** Joins: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com)
[14:41:02] *** Quits: _bart (bart@moz-hu0dqu.irf.se) (Ping timeout: 121 seconds)
[14:41:26] <bombless> Hmm struct Rc<T: ?Sized>(T); ?
[14:41:35] *** Joins: agarie (agarie@moz-coa.g2h.32.177.IP)
[14:42:14] <bombless> Hmm that would be a pointer and a counter, lol.
[14:42:19] *** Quits: Gabriel_7 (Gabriel@moz-po3t0n.loria.fr) (Connection closed)
[14:42:20] *** Quits: vks_ (quassel@moz-b54qc9.fias.uni-frankfurt.de) (A TLS packet with unexpected length was received.)
[14:42:28] *** Joins: vks (quassel@moz-b54qc9.fias.uni-frankfurt.de)
[14:42:37] *** Quits: dawehner (quassel@moz-tobu60.hsi4.kabel-badenwuerttemberg.de) (Quit: No Ping reply in 210 seconds.)
[14:42:51] <bombless> Maybe `*Drop`
[14:43:00] <bombless> `*mut Drop`
[14:43:16] *** Joins: cholcombe (chris@moz-eaa6lk.fios.verizon.net)
[14:43:34] <Mutabah> steveklabnik: Wait, what, box disappearing?
[14:43:39] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[14:43:40] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[14:43:49] *** Joins: dawehner (quassel@moz-tobu60.hsi4.kabel-badenwuerttemberg.de)
[14:44:03] <bombless> Mutabah: He means you doesn't need box when you already use Rc etc.
[14:44:04] <Mutabah> steveklabnik: Oh, "the box" (I assume thtat means some internals)
[14:44:12] *** Joins: vmx_ (vmx@moz-94h9c1.pools.vodafone-ip.de)
[14:44:14] <cmr> Mutabah: no, but you'll be able to Rc<Trait> for example
[14:44:19] <Mutabah> *nod*
[14:44:25] <robertknight_ic> mindtree: Sorting a graph of tasks with dependencies, so 'SomeInterface' is 'trait Task { fn run(&mut self); fn dependencies() -> Vec<...> }'
[14:45:07] *** Quits: bkearns (Adium@moz-2l9j31.ca.comcast.net) (Quit: Leaving.)
[14:45:39] <steveklabnik> yeah, what cmr said :)
[14:45:46] <steveklabnik> Rc already uses a box internally
[14:45:50] <steveklabnik> so right now, double box
[14:45:51] *** Joins: hjr3 (hradtke@moz-e235ok.fios.verizon.net)
[14:47:13] *** Quits: vmx (vmx@moz-8g5bu2.pools.vodafone-ip.de) (Ping timeout: 121 seconds)
[14:47:23] *** Quits: mindcat (mindcat@moz-0h1.tnp.13.183.IP) (Ping timeout: 121 seconds)
[14:48:06] *** Parts: esgeh (sg@moz-a7j.cns.76.134.IP) ()
[14:49:33] *** Quits: wei2912 (wei2912@moz-m4r.q8f.156.175.IP) (Quit: Lost terminal)
[14:50:12] *** Joins: joel1 (joel@moz-6ampnk.gtri.gatech.edu)
[14:50:49] <bombless> Will box_syntax feature-gate get removed at May?
[14:51:09] <bluss> it is May, and no, it's not likely
[14:51:35] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[14:51:47] <bombless> Hmm I like the new placement syntax. We are waiting for new DST RFCs?
[14:52:07] <cmr> bombless: no new features will be added for 1.0
[14:52:08] <bluss> and the placement new rfc
[14:52:16] <robertknight_ic> cmr: Given that we're at 1.0 and this hasn't been done before, I guess that kind of pattern isn't common in rustc or Servo for example?
[14:52:17] <cmr> everything new is 1.1 now.
[14:52:28] <bluss> there's a preview available of Rust 1.0. It's called beta :)
[14:52:31] <robertknight_ic> Rc<Trait> that is
[14:52:32] *** Joins: dschatzberg (dschatz@moz-nk1clf.bu.edu)
[14:52:33] <cmr> robertknight_ic: Rc<Trait>?
[14:52:34] <bombless> cmr: I see, but I'm willing to use box syntax at 1.1-beta.
[14:52:35] <bluss> and the beta is updated regularly
[14:52:37] <cmr> It's somewhat common.
[14:52:53] <robertknight_ic> What does existing code do?
[14:53:05] <cmr> just puts up with the extra Box.
[14:53:20] <cmr> it's not like there's anything you legitimately *cannot do* without it, it's just inefficient.
[14:53:28] *** Joins: mindcat (mindcat@moz-0h1.tnp.13.183.IP)
[14:54:03] *** Quits: andreyv (andrey@moz-m13.7c1.234.85.IP) (Client exited)
[14:55:02] *** Joins: djcb (user@moz-nqdj21.elisa-laajakaista.fi)
[14:55:08] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[14:55:09] <bombless> Ah I guess it's good time to ask my old question, will we make 1.0.1 by cherry-picking 1.1.0-nightly?
[14:55:22] <mindtree> robertknight_ic: rather than having all the "task"s directly owning eachother, could you separate the "dependencies" (edges) into a separate Vec?
[14:55:25] <cmr> bombless: there won't be a 1.0.1 I think
[14:55:30] *** Joins: mib_zilw1v (Mibbit@moz-dc8.dj1.114.78.IP)
[14:55:34] <bombless> cmr: Thanks :)
[14:55:45] *** Quits: laumann (thomas@moz-vj4.hq0.225.130.IP) (Quit: leaving)
[14:55:45] <steveklabnik> there genreally wont' be z releases, in x.y.z
[14:55:47] <cmr> bombless: I suspect patch releases will be only for very serious bugfixes
[14:56:24] *** Quits: PudgePacket (Mibbit@moz-obu378.tpgi.com.au) (Quit: http://www.mibbit.com ajax IRC Client)
[14:56:25] <mindtree> robertknight_ic: say for example, something like petgraph? http://bluss.github.io/petulant-avenger-graphlibrary/target/doc/petgraph/graph/index.html
[14:56:28] * mindtree winks at bluss
[14:56:33] <bombless> cmr: So 1.0.1 will for very special case which is unlikely to happen.
[14:56:35] <steveklabnik> bombless: https://internals.rust-lang.org/t/reminder-the-trains-are-running/1959 <-
[14:56:49] <steveklabnik> bombless: make sure to read the 'branching thread' whic his linked too
[14:56:52] <bombless> steveklabnik thanks
[14:57:10] *** Joins: kagami (kagami@moz-mof.5r5.61.185.IP)
[14:57:31] <kagami> Hi guys. Is it possible to allocate buffer of specified size without unsafe? I tried Vec::with_capacity, but I can't pull out allocated slice: http://is.gd/ZRIOhG
[14:57:58] <kagami> (on heap)
[14:58:02] <bluss> robertknight_ic: petgraph is an example of a completely different way to represent a graph. You could even keep the graph info and the actual traits separated
[14:58:04] <cmr> kagami: you can do vec![0; desired_capacity] if you do not want unsafe.
[14:58:28] <steveklabnik> kagami: the issue with your code is that the memory was _allocated_, but not initialized
[14:58:40] <Manishearth> kagami: capacity and length are not the same
[14:58:49] <robertknight_ic> mindtree: bluss : Thanks. That does seem like it would be much easier to work with.
[14:58:53] <steveklabnik> cmr's example also initializes to all zeroes
[14:59:02] <bluss> kagami: it won't allow you to access uninitialized data without an unsafe block either
[14:59:53] *** Joins: ifuckkids (Mibbit@moz-jdk.gg5.142.79.IP)
[15:00:00] <mindtree> robertknight_ic: graphs (and data structures that require cross-ownership in general) are renowned to be a bit tricky to implement in safe rust
[15:00:05] *** Joins: agile (mike@moz-m71dqt.rcsntx.sbcglobal.net)
[15:00:06] <ifuckkids> I grabbed the little bitch fter surprising her in her sleep
[15:00:10] <ifuckkids> I was supposed to be babysitting
[15:00:14] <ifuckkids> but I grabbed her
[15:00:15] *** Quits: logan_e (logan_e@moz-mpr4r7.lsrhs.net) (Client exited)
[15:00:17] <Mutabah> steveklabnik: ^
[15:00:19] <ifuckkids> and fucked her sweet 7 year old cunt
[15:00:22] <ifuckkids> using lotino
[15:00:22] *** Joins: _queue (queue@moz-k2g.0bf.2.129.IP)
[15:00:26] <ifuckkids> greased upp[ her
[15:00:30] *** cmr sets mode: +b ifuckkids!*@*
[15:00:32] *** ifuckkids was kicked by cmr (cmr)
[15:00:49] <cmr> that's thoroughly unpleasant.
[15:00:50] <steveklabnik> ugh
[15:00:57] <Mutabah> most definitely
[15:01:54] *** Quits: TheLemonMan (lemonboy@moz-0909e0.50-151.net24.it) (Quit: "It's now safe to turn off your computer.")
[15:03:07] *** Joins: borromakot (Adium@moz-d7t.h3t.104.38.IP)
[15:03:36] <kagami> cmr: thanks, it works. Btw, what's the best way to do it with unsafe? alloc::heap::allocate? Does it mean I need to manually deallocate() it later?
[15:04:26] *** Quits: larhat (Adium@moz-64mvae.outplay.com) (Quit: Leaving.)
[15:04:27] <cmr> kagami: if you are fine with unstable features, std::rt::heap is good.
[15:04:35] <cmr> otherwise you can use Vec::with_capacity and set_len
[15:04:36] <bluss> yes of course, one free for every count of malloc, as it would be in other languages
[15:04:42] *** Quits: kalail (uid62296@moz-5ck9vu.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[15:04:47] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (A TLS packet with unexpected length was received.)
[15:05:25] *** Quits: borromakot (Adium@moz-d7t.h3t.104.38.IP) (Quit: Leaving.)
[15:05:30] *** Quits: }ls{ (uhelp@moz-1jf80k.dip0.t-ipconnect.de) (Quit: User terminated by real life interrupt)
[15:05:52] *** Joins: _bart (bart@moz-jl97l5.priv.bahnhof.se)
[15:06:20] <bombless> Too shame I didn't notice that beta branch... so it makes sense how 1.0.1 would be made.. just backport to beta branch.
[15:06:31] *** Quits: _queue (queue@moz-k2g.0bf.2.129.IP) (Connection closed)
[15:06:48] *** Joins: zzing (textual@moz-jucm1n.cpe.distributel.net)
[15:06:48] *** Joins: logan_e (logan_e@moz-mpr4r7.lsrhs.net)
[15:06:55] <steveklabnik> well, beta is pre 1.0
[15:07:01] <steveklabnik> so backport to beta means backport to the eventaul 1.0
[15:07:20] *** Joins: Lurkin (Mibbit@moz-p4efgs.mpls.qwest.net)
[15:07:47] <bombless> Yes that's good explaination.
[15:08:13] *** Joins: larhat (Adium@moz-64mvae.outplay.com)
[15:08:50] <Lurkin> Manishearth: ty for http://manishearth.github.io/blog/2015/05/03/where-rust-really-shines/
[15:09:16] *** Joins: mkpankov (mkpankov@moz-avu.k4a.16.195.IP)
[15:09:40] *** Joins: bstrle (Mibbit@moz-ums8mr.tor-exit.network)
[15:09:42] *** Joins: envi_u (envi@moz-ih5.olo.169.121.IP)
[15:10:00] <Manishearth> :)
[15:10:09] *** Quits: skade (skade@moz-4eh.d50.201.212.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:10:34] *** Joins: choplin (choplin@moz-b1oa9n.zaq.ne.jp)
[15:10:35] *** Joins: borromakot (Adium@moz-d7t.h3t.104.38.IP)
[15:10:50] <kagami> cmr: bluss: thanks, I think with_capacity&set_len are more convinient for my needs. Don't want to lose auto memory management. Would be great if e.g. Box will allow to specify the size of allocated area.
[15:11:05] *** Joins: frankmcs_ (frankmcsher@moz-uivq2j.dyn.telefonica.de)
[15:11:19] <cmr> kagami: eh, Box is intended as a typesafe malloc for a single value, I think it's doing the right thing.
[15:11:19] <steveklabnik> well, if you want an arena, use an arena :)
[15:11:51] *** Joins: martin (martin@moz-bmp33l.u0v6.gff7.1608.2001.IP)
[15:12:02] <bstrle> Jolding a kid down and fucking her, yeah, fucking that sweet little cunt of hers as she rages, tearing, her face is red and she struggeles in anger, but she isn't strong enough to resist you, you force her to hate men now, fucking her cunt against her will
[15:12:10] *** cmr sets mode: +b bstrle!*@*
[15:12:13] *** bstrle was kicked by cmr (cmr)
[15:12:16] <Dr-Emann> You _kinda_ can, with boxing arrays
[15:12:59] *** cmr sets mode: +b *!*@*.tor-exit.network
[15:13:10] <borromakot> hmm…
[15:13:28] *** Quits: envi_un (envi@moz-ih5.olo.169.121.IP) (Ping timeout: 121 seconds)
[15:13:28] * cmr is curious if that wildcard actually works
[15:13:36] <Lurkin> Wow, I could have gone all morning without that.
[15:13:45] <borromakot> so…what happened ^ there?
[15:13:46] *** Joins: mike_wagg (mike_wagg@moz-hst3d7.cable.virginm.net)
[15:13:54] <Lurkin> Trolls
[15:13:55] *** Quits: frankmcsherry (frankmcsher@moz-vo76ol.dyn.telefonica.de) (Ping timeout: 121 seconds)
[15:14:07] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[15:14:11] <borromakot> oh, I see, it is not bstrie it is bstrle
[15:14:19] <borromakot> clever.
[15:14:27] *** zz_kimundi is now known as kimundi
[15:14:28] *** Quits: Bira (Bira@moz-sq6.nc4.106.187.IP) (A TLS packet with unexpected length was received.)
[15:14:36] *** Quits: choplin (choplin@moz-b1oa9n.zaq.ne.jp) (Ping timeout: 121 seconds)
[15:14:49] <borromakot> '/clear's
[15:15:12] <Lurkin> Does anybody know how to figure out how the cpu talks to the serial port?
[15:15:30] <Lurkin> Like where the address is/how to find it/ it's name in the documentation.
[15:15:36] <cmr> Lurkin: do you want a software interface, or are you interested in the hardware?
[15:15:51] <Lurkin> Both really cmr.
[15:16:00] <cmr> Probably a better question for #rust-osdev or #rust-offtopic :)
[15:16:20] <Lurkin> Thanks cmr.
[15:16:29] *** Joins: lyc (lyc@moz-aut.rvo.25.175.IP)
[15:17:02] *** Joins: Riastradh (riastradh@moz-8d1pcg.torservers.net)
[15:17:51] *** Joins: kaeluka (kaeluka@moz-tn3lqd.cust.bredbandsbolaget.se)
[15:18:20] <kagami> cmr: yea, you are right. It's just strange there is no simple structure similar to Vec that keeps pointer to memory underneath and allows to allocate arbitrary number of bytes. Probably it's possible to do with Drop trait, right?
[15:18:48] *** Quits: davebettin (davebettin@moz-acc.cl4.35.72.IP) (Ping timeout: 121 seconds)
[15:19:28] <Manishearth> kagami: the issue is partially with the default
[15:19:46] <Manishearth> what do you do if someone creates such a buffer,m uninitialized, and tries to access a value?
[15:19:54] *** Quits: woboats (tatterdemal@moz-a0dnkb.ca.comcast.net) (Ping timeout: 121 seconds)
[15:19:56] <Manishearth> eg what if it was Vec<*const u8>?
[15:20:13] <Manishearth> each pointer would be random or null or something, and cause segfaults
[15:20:48] *** Joins: JosiahOne|Work1 (Thunderbird@moz-f2hp7h.biz.rr.com)
[15:21:03] <bluss> kagami: Box<[u8]> is something like that
[15:21:03] <kagami> I mean it's just structure similar to Vec but with a differrent name. So you shouldn't normally cast it to other type.
[15:21:12] <ker--> Manishearth: bad example, *const can only be accessed through unsafe
[15:21:16] <bluss> kagami: which is easy to create.. from a Vec :)
[15:21:27] <kagami> bluss: yea. But how do I allocate array with size unknown at compile time?
[15:21:55] <ker--> kagami: vec![Default::default(), n]
[15:22:03] <bluss> let n = 15; let mut data = vec![0; n].into_boxed_slice(); data[0] = 1; data
[15:22:07] <bluss> playbot: let n = 15; let mut data = vec![0; n].into_boxed_slice(); data[0] = 1; data
[15:22:08] -playbot- [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[15:23:11] <Dr-Emann> Oh hey, into boxed slice, hadn't seen that one before. Cool
[15:23:13] <kagami> Yes, it works. I just thought there should be a slightly elegant way (because I don't want autogrow features, etc). Nevermind, just subjective opinion.
[15:23:19] *** Joins: esawin (esawin@moz-gob.6k5.214.85.IP)
[15:23:20] *** darkowlzz|afk is now known as darkowlzz
[15:23:21] <bluss> since it's created from a Vec (the only difference is that Box<[T]> has no capacity, it's like a vec that is always "full)
[15:23:38] <bluss> kagami: well you don't have those features anymore after .into_boxed_slice()
[15:23:46] <bluss> but you have all the other slice methods still
[15:24:15] <ker--> kagami: what's wrong with simply using a Vec?
[15:24:28] <kagami> ker--: nothing :)
[15:24:33] *** Joins: paupau (grrrr@moz-esf6lv.cable.rcn.com)
[15:24:51] <Diggsey> playbot: Box::new([0; 16])
[15:24:51] <ker--> then I'm confused what feature you are looking for ;)
[15:24:52] -playbot- [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[15:25:11] *** Quits: nico_rikken (nico@moz-0t18rd.6ulu.d2lj.0981.2001.IP) (Quit: Leaving)
[15:25:18] <paupau> Is there a fast way to `make docs` for rust?
[15:25:18] <Dr-Emann> Diggsey: not runtime sized. 
[15:25:22] <JosiahOne|Work1> When I run |cargo test| on a product with only main.rs and lib.rs, I get two executables with my crate name as the prefix. I'm assuming one is the lib and the other the main executable, but is there a way I can get them to output with different names?
[15:25:29] *** JosiahOne|Work1 is now known as JosiahOne
[15:25:32] *** nsm|away is now known as nsm
[15:25:35] <bluss> paupau: no. You can download docs separately though
[15:25:56] <paupau> bluss: Oh, great
[15:26:12] <steveklabnik> paupau: you also get them installed by default
[15:26:16] <bluss> paupau: they are in here http://static.rust-lang.org/dist/
[15:26:28] <paupau> steveklabnik: oh, with rustup? cool
[15:26:52] <steveklabnik> JosiahOne: http://doc.crates.io/manifest.html#configuring-a-target
[15:26:52] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[15:26:56] <steveklabnik> paupau: yup!
[15:27:05] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[15:27:12] <JosiahOne> steveklabnik: Ah, thanks!
[15:27:21] *** Joins: jviereck (Adium@moz-tde1p4.ethz.ch)
[15:27:42] <paupau> /usr/local/share/doc/rust/html for me, awesome
[15:27:54] *** darkowlzz is now known as darkowlzz|afk
[15:28:14] *** Quits: larhat (Adium@moz-64mvae.outplay.com) (Quit: Leaving.)
[15:28:15] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[15:28:26] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[15:28:47] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Connection closed)
[15:29:28] *** Quits: envi_u (envi@moz-ih5.olo.169.121.IP) (Connection closed)
[15:29:35] *** Joins: JosiahOne1 (Thunderbird@moz-ub5.sco.30.4.IP)
[15:30:46] *** Quits: killercup (killercup@moz-4udt1b.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[15:30:48] *** Joins: shroomhead (Mibbit@moz-7i4ghi.snydernet.net)
[15:31:14] *** Quits: JosiahOne (Thunderbird@moz-f2hp7h.biz.rr.com) (Ping timeout: 121 seconds)
[15:31:40] <shroomhead> I couldn't help but cum feeep inside of her tight snatch, she didn't know how much I .hated her, for being so cute all of the time, for being a girl,. for just being so young, I wanted to make her pay, so I made sure her rape was painful as I jackhammered her cunt into painful bliss'
[15:31:46] <shroomhead> I couldn't take a second more
[15:31:51] <shroomhead> so I unloaded deep inside of her
[15:32:00] <shroomhead> so cum cum was gushing out
[15:32:11] * paupau coughs awkwardly
[15:32:15] *** shroomhead was kicked by steveklabnik ()
[15:32:24] <frankmcs_> steveklabnik: I am writing documentation!
[15:32:25] <ker--> O_o they are logging in through mibbit?
[15:32:30] *** Quits: cjs2 (cjs2@moz-h9ah3d.lsn.wtnet.de) (Connection closed)
[15:32:39] *** Parts: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) ()
[15:33:11] *** Quits: TheMystic (kbullock@moz-ejc.pls.246.204.IP) (Ping timeout: 121 seconds)
[15:33:24] *** Quits: ker-- (Mibbit@moz-7bq.0sb.52.141.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:33:34] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[15:33:44] <companion_cube> this is really sick
[15:33:47] <Lurkin> Maybe set the room to voice only.
[15:33:48] *** Joins: larhat (Adium@moz-64mvae.outplay.com)
[15:34:04] <Lurkin> Get PMs for the regulars.
[15:34:05] <steveklabnik> Lurkin: yeah, if this keeps happening we'll have to do that
[15:34:26] *** Joins: JosiahOne (Thunderbird@moz-f2hp7h.biz.rr.com)
[15:34:46] *** Joins: joel2 (joel@moz-6ampnk.gtri.gatech.edu)
[15:34:50] *** Quits: annodomini (lambda@moz-o15.d8k.142.32.IP) (Ping timeout: 121 seconds)
[15:35:31] <tOkeshu> isn't it possible to filter out mibbit clients ?
[15:35:32] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[15:35:32] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[15:35:33] *** Joins: raph (raph@moz-k540c5.3v27.vk5s.0000.2620.IP)
[15:35:38] *** Quits: JosiahOne1 (Thunderbird@moz-ub5.sco.30.4.IP) (Ping timeout: 121 seconds)
[15:35:54] *** Joins: envi_u (envi@moz-ih5.olo.169.121.IP)
[15:35:56] <fmtq> oh I have ignored all mibbit clients 
[15:35:56] <fmtq> haha
[15:35:57] <steveklabnik> yes, but we link to mibbit from the homepage
[15:36:04] <steveklabnik> because IRC can be hard for people sometimes
[15:36:10] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[15:36:26] <Tiffany> does mozilla not have an iris instance setup?
[15:36:40] <fmtq> oh steveklabnik, that's the same IP that trolled last time
[15:36:44] <fmtq> with the random flooding.
[15:36:47] <fmtq> just ban it.
[15:36:54] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[15:37:05] <fmtq> my ignore list isn't mibbit, it's just *!*@moz-i1j.uun.135.66.IP :D
[15:37:14] *** Quits: joel1 (joel@moz-6ampnk.gtri.gatech.edu) (Ping timeout: 121 seconds)
[15:37:22] <Tiffany> I've found that there is some kind of huge troll base on mibbit
[15:37:42] <fmtq> oh, the IP actually varies from that >_>
[15:37:51] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[15:37:59] <fmtq> I was wrong, my list does include a generic mibbit ban 
[15:37:59] * fmtq sighs
[15:39:07] *** Joins: amitp (amitp@moz-plc8ig.ca.comcast.net)
[15:39:30] <mkpankov> I sometimes use mibbit when my usual setup is not available
[15:39:32] *** Joins: DerisiveLogic (smuxi@moz-g93io6.res.rr.com)
[15:40:01] <fmtq> this is why I wish for a mode that requires a registered nickname only for certain IP ranges or hostmasks
[15:40:17] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[15:41:16] *** Quits: tcard (tcard@moz-5eb1g3.staticIP.rima-tde.net) (Connection closed)
[15:41:39] <frankmcs_> steveklabnik: not sure we are voting, but the whole mibbit thing was a) nice at first, then b) really weird and sketchy when I started looking at the ads it was showing.
[15:41:39] *** Quits: paupau (grrrr@moz-esf6lv.cable.rcn.com) (Ping timeout: 121 seconds)
[15:41:39] <kagami> ker: btw, vec![0;n] uses from_elem underneath, so it will be slower. set_len should be ok though.
[15:41:46] <zofrex> bayesian filtering can work extremely effectively
[15:42:11] <Lurkin> I'm actually getting off mibbit now, installing a suitable client
[15:42:13] <steveklabnik> kagami: it should use N as a size hint, unless that changed.
[15:42:23] <fmtq> Quassel is good
[15:42:33] *** Joins: tcard (tcard@moz-5eb1g3.staticIP.rima-tde.net)
[15:42:35] <zofrex> Athemenet implemented some kinda classifier when they had a really bad spam problem. Good way to keep out spammers while not requiring anything from decent members
[15:42:51] <fmtq> or if you prefer webbased, https://github.com/erming/shout
[15:43:12] *** Joins: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net)
[15:43:37] *** Quits: Lurkin (Mibbit@moz-p4efgs.mpls.qwest.net) (Quit: http://www.mibbit.com ajax IRC Client)
[15:43:46] *** Joins: Lurkin (Lurkin@moz-p4efgs.mpls.qwest.net)
[15:43:46] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[15:44:47] *** Joins: Guest58 (textual@moz-70hlaj.austtx.sbcglobal.net)
[15:45:15] *** Joins: ParahSailin (parahsailin@moz-q7i.ghg.61.168.IP)
[15:46:00] *** Joins: jbcurtin (jbcurtin@moz-lskisb.LosAngeles1.Level3.net)
[15:46:07] *** Quits: dschatzberg (dschatz@moz-nk1clf.bu.edu) (Ping timeout: 121 seconds)
[15:46:15] *** Lurkin is now known as Lurkin2
[15:46:55] <Lurkin2> Actually a really simple way to take care of spam is to make it so accounts have to be registered via nickserv to chat.
[15:47:13] <fmtq> but it's annoying when some people just drop in to ask a legitimate question.
[15:47:27] <steveklabnik> Lurkin2: yeah, that's what i'm investigating now
[15:47:37] <fmtq> +R?
[15:47:38] *** Quits: raph (raph@moz-k540c5.3v27.vk5s.0000.2620.IP) (Quit: Leaving.)
[15:47:38] *** Lurkin2 is now known as Lurkin
[15:48:07] *** Joins: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se)
[15:48:15] *** Joins: bkearns (Adium@moz-rudtng.static.wiline.com)
[15:48:19] *** Quits: kaeluka (kaeluka@moz-tn3lqd.cust.bredbandsbolaget.se) (Client exited)
[15:48:23] <meh> where can I find examples of implementing iterators?
[15:48:32] <adjivas> Hello! I try to understand the type of a Iterator http://is.gd/sujrkY, someone can help me?
[15:48:32] <Lurkin> If you run a support channel, please consider using something like:
[15:48:33] *** Quits: glglwty (textual@moz-dl2kbl.members.linode.com) (Ping timeout: 121 seconds)
[15:48:33] *** Joins: dmp (dennis@moz-tjonjm.d75.net)
[15:48:38] <zofrex> Lurkin: that does work but it is a burden on people not familiar with IRC, or one-off questions
[15:48:47] <Lurkin> Send them to a support channel.
[15:48:48] <Lurkin> Like this
[15:48:50] *** Quits: mkpankov (mkpankov@moz-avu.k4a.16.195.IP) (Quit: Bye)
[15:48:51] <adjivas> meh: Maybe here: http://www.cs.brandeis.edu/~cs146a/rust/doc-02-21-2015/core/iter/index.html
[15:48:55] <Lurkin> ../mode #channel +rf #channel-unregistered
[15:49:01] <flan3002> steveklabnik - Some channels have a version for unregistered nicks, including redirects from the main channel.
[15:49:09] <flan3002> Oh, yeah, what Lurkin said.
[15:49:10] <steveklabnik> ah yeah, that'd be nice.
[15:49:10] *** Joins: mkpankov (user@moz-avu.k4a.16.195.IP)
[15:49:13] <steveklabnik> i'll do that
[15:49:13] *** Joins: Gamecubic (cubic@moz-bglmk5.mc.videotron.ca)
[15:49:58] *** Joins: zeebo (zeebo@moz-qtpltq.ut.vivintwireless.net)
[15:50:05] *** Joins: Racquetball (namestolenw@moz-dnlovt.cpe.twtelecom.net)
[15:50:07] *** Quits: thiblahute (tsaunier@moz-1jgbr0.a2a6.5q4v.0e35.2a01.IP) (Ping timeout: 121 seconds)
[15:50:31] *** Quits: zzing (textual@moz-jucm1n.cpe.distributel.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[15:50:41] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[15:50:42] *** Joins: nico (nico@moz-n8jedu.dip0.t-ipconnect.de)
[15:50:43] <steveklabnik> okay
[15:50:46] <Havvy> +r = registered channel.
[15:50:49] <steveklabnik> set up, with the unregistered channel
[15:50:51] <Havvy> +R = registered nicknames only.
[15:51:35] <terpstra> surely the troll will just get tired of being kicked. why restrict the channel?
[15:51:48] <Lurkin> Bots
[15:51:57] <Lurkin> IRC flooding is trivial.
[15:52:00] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[15:52:00] *** Joins: davebettin (davebettin@moz-rnhkmd.bendcable.com)
[15:52:09] <terpstra> someone wrote a bot to spew random crap into #rust?!
[15:52:09] * Lurkin is a recovering internet asshat.
[15:52:12] *** dmp is now known as [dmp]
[15:52:23] <flan3002> Because there /will be/ more trolls, and, as we have seen, there have been name-mentioning bots that were hard to ban.
[15:52:24] <Lurkin> It's a generic script.
[15:52:24] *** Joins: amyers (amyers@moz-f2k.1cm.177.128.IP)
[15:52:36] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[15:52:37] *** Quits: Guest58 (textual@moz-70hlaj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[15:52:56] *** Quits: amyers (amyers@moz-f2k.1cm.177.128.IP) (Connection closed)
[15:52:58] <Lurkin> Seems to be fixed now, at least we  have active operators.
[15:52:59] <flan3002> terpstra - Yes, and it mentioned all nicks. Took far too long to fix.
[15:53:03] *** Joins: wooowe (holoirc@moz-56i.ll8.181.166.IP)
[15:53:05] <steveklabnik> !ops
[15:53:06] * rustbot summons aturon, brson, bstrie, cmr, erickt, flaper87, huon, lkuper, pnkfelix and steveklabnik
[15:53:06] *** Joins: amyers (amyers@moz-f2k.1cm.177.128.IP)
[15:53:30] *** Joins: JosiahOne1 (Thunderbird@moz-ub5.sco.30.4.IP)
[15:53:49] <steveklabnik> ops, see above please, and PM me with any questions
[15:54:04] *** Quits: JosiahOne (Thunderbird@moz-f2hp7h.biz.rr.com) (Ping timeout: 121 seconds)
[15:54:45] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[15:54:45] *** Quits: wooowe (holoirc@moz-56i.ll8.181.166.IP) (Connection closed)
[15:54:47] *** Quits: hjr3 (hradtke@moz-e235ok.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[15:55:05] <meh> how can I return a struct B from a struct A method that needs to have the same lifetime as A?
[15:55:14] *** Joins: robyoung (uid12953@moz-mj1ko8.charlton.irccloud.com)
[15:55:28] *** Quits: zmack (zmack@moz-htpein.home.aster.pl) (Connection closed)
[15:55:32] <aturon> thanks steveklabnik!
[15:55:35] *** Joins: btobolaski (btobolaski@moz-ltbh80.va.comcast.net)
[15:55:36] <robertknight_ic> General opinions on Gitter or Slack as alternatives?
[15:55:40] *** Quits: woowe (holoirc@moz-fvg.cfn.181.166.IP) (Ping timeout: 121 seconds)
[15:55:46] <steveklabnik> closed source
[15:55:50] <robyoung> hi, could anyone point me to how I can load python dicts in rust?
[15:55:52] <cmr> robertknight_ic: that's a #rust-offtopic thing.
[15:56:00] *** Joins: veqz (veqz@moz-nvr8g6.209.getinternet.no)
[15:56:09] <cmr> robyoung: like from a pickle file, or something else?
[15:56:50] <robyoung> cmr: through the ffi, I'd like to call a rust function with a dictionary and return a dictionary
[15:57:04] *** Joins: JosiahOne (Thunderbird@moz-f2hp7h.biz.rr.com)
[15:57:27] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[15:57:27] *** ChanServ sets mode: +o erickt
[15:58:10] <cmr> robyoung: I'm not sure about the details of the CPython FFI, but http://doc.rust-lang.org/book/ffi.html should help you with the Rust side of it.
[15:58:20] *** bentley|away is now known as bentley
[15:58:26] *** Joins: ryanxcharles (ryan@moz-lcf.eq6.124.64.IP)
[15:58:44] *** Quits: JosiahOne1 (Thunderbird@moz-ub5.sco.30.4.IP) (Ping timeout: 121 seconds)
[15:58:46] <erickt> frankmcs_: are you frankmcsherry?
[15:58:47] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Ping timeout: 121 seconds)
[15:58:53] *** Joins: bombless_ (_@moz-odk.piv.41.59.IP)
[15:58:56] <frankmcs_> erickt: hi ho!
[15:59:06] <frankmcs_> erickt: has you seen the new deranged post? :D
[15:59:12] <erickt> hello there!
[15:59:18] <robyoung> I've got the ffi part working for things like numbers and strings but I'm a bit lost on how to pass things like dicts and lists in
[15:59:22] *** Joins: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP)
[15:59:22] *** ChanServ sets mode: +ao pcwalton pcwalton
[15:59:22] <erickt> frankmcs_: nope! what's your blog again?
[15:59:55] *** Joins: pavelpenev (quassel@moz-8vs4j7.btc-net.bg)
[16:00:00] *** Quits: logan_e (logan_e@moz-mpr4r7.lsrhs.net) (Client exited)
[16:00:05] <frankmcs_> erickt: http://www.frankmcsherry.org top post.
[16:00:16] *** Quits: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP) (Connection closed)
[16:00:18] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[16:00:24] *** Quits: borromakot (Adium@moz-d7t.h3t.104.38.IP) (Quit: Leaving.)
[16:00:30] *** Joins: dschatzberg (dschatz@moz-1j10ud.bu.edu)
[16:00:40] *** Quits: nicoch (nicoch@moz-g02d7k.be) (Ping timeout: 121 seconds)
[16:00:53] <frankmcs_> erickt: it is a bit like a 100 line CapnProto implementation.
[16:00:57] *** Joins: jimb (user@moz-09a.i8g.126.207.IP)
[16:00:57] <erickt> frankmcs_: hehe awesome
[16:00:58] *** Joins: krdln (krdln@moz-ohe9vg.dynamic.chello.pl)
[16:01:01] *** Joins: borromakot (Adium@moz-d7t.h3t.104.38.IP)
[16:01:06] *** Quits: laparca (laparca@moz-rgcs06.mgob.kh00.0488.2a01.IP) (Quit: Leaving.)
[16:01:09] *** Quits: bombless (_@moz-odk.piv.41.59.IP) (Ping timeout: 121 seconds)
[16:01:35] *** Joins: kieran (kieran@moz-c5gk5j.ihug.co.nz)
[16:01:43] *** Joins: harrisonclarke (harrisoncla@moz-fsj.smq.68.142.IP)
[16:02:39] <erickt> frankmcs_: submitted it to reddit :) https://www.reddit.com/r/rust/comments/34u40n/abomonation_terrifying_serialization/
[16:02:53] *** Joins: nicoch (nicoch@moz-g02d7k.be)
[16:03:05] *** Quits: GBGamer (npm@moz-92sbjt.wa.comcast.net) (Ping timeout: 121 seconds)
[16:03:07] <frankmcs_> let me ... vote. that. up.
[16:03:27] <cmr> The name really sums up everything I could say about it.
[16:03:36] <erickt> frankmcs_: oh my, after the intro I'm already starting to feel a little nervous...
[16:03:37] *** Quits: moa (Cedric@moz-ltq9j8.rev.numericable.fr) (Ping timeout: 121 seconds)
[16:03:44] <cmr> (I read it earlier)
[16:03:47] <erickt> a vague sense of dread
[16:03:53] <Mutabah> cmr: It's what I called it last night
[16:03:58] <cmr> it will become very concrete very shortly.
[16:04:39] <frankmcs_> Mutabah: I fixed the code so that it doesn't reveal the structure of the serializer's memory any more!
[16:04:58] *** Joins: jtdowney (jtdowney@moz-gh1isj.static.twtelecom.net)
[16:05:00] <erickt> frankmcs_: does typed_to_bytes account for alignment?
[16:05:09] <frankmcs_> erickt: nope!
[16:05:09] *** suvash is now known as suvash_away
[16:05:12] <erickt> haha
[16:05:17] *** Quits: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP) (Ping timeout: 121 seconds)
[16:05:28] *** Quits: mnemnion (mnemnion@moz-kf3boi.ca.comcast.net) (Connection closed)
[16:05:30] <erickt> love it
[16:05:42] <frankmcs_> erickt: it could be fancied up in a bunch of ways. I think I'd rather make it columnar than how it is now, but ... we'll see.
[16:05:43] *** Quits: dstrbad (dstrbad@moz-8d7dvf.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[16:05:51] *** Quits: kieran (kieran@moz-c5gk5j.ihug.co.nz) (Ping timeout: 121 seconds)
[16:06:21] *** Joins: gandalf (zbraniecki@moz-q46bkg.hr.cox.net)
[16:06:23] <frankmcs_> cmr: it's weird and creepy on the one hand, but on the other if you want zero-allocation serialization, you sort of need to do something like it.
[16:06:24] *** Quits: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net) (Client exited)
[16:06:33] <frankmcs_> deserialization*
[16:06:55] *** Quits: harrisonclarke (harrisoncla@moz-fsj.smq.68.142.IP) (Connection closed)
[16:06:57] *** Joins: GGist (Mibbit@moz-kl9hvd.seattleu.edu)
[16:07:35] *** Joins: mnemnion (mnemnion@moz-kf3boi.ca.comcast.net)
[16:07:36] *** Joins: monowerker (monowerker@moz-lao0j9.corp.bahnhof.se)
[16:07:41] *** Quits: monowerker (monowerker@moz-lao0j9.corp.bahnhof.se) (Quit: Lingo: www.lingoirc.com)
[16:08:08] <erickt> haha I don't think I've giggled so much reading about serialization. Abomination::entomb and exhume?
[16:08:22] <bluss> *Abomonation
[16:08:40] *** Joins: dstrbad (dstrbad@moz-8d7dvf.dsl.iskon.hr)
[16:08:59] *** Quits: {AS} (uid45026@moz-srvrrh.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[16:09:02] *** bombless_ is now known as bombless
[16:09:31] *** Joins: zmack (zmack@moz-htpein.home.aster.pl)
[16:09:37] <erickt> bluss: right!
[16:10:04] *** Quits: eternaleye (eternaleye@moz-7ps.ehi.245.50.IP) (Ping timeout: 121 seconds)
[16:10:07] <Manishearth> erickt: we need a fun name for the borrow checker
[16:10:30] <meh> http://sprunge.us/hBdg?rust I have this, how can I tell the compiler I want `Streams` and the `Stream`s returned by it to live as long as `Context`?
[16:10:33] * erickt summons bstrie as the official rust Fun Namer
[16:10:44] *** Joins: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net)
[16:11:36] <ParahSailin> so is this abomonation thing something we should use? i can't tell from this blog post
[16:11:37] *** Quits: mnemnion (mnemnion@moz-kf3boi.ca.comcast.net) (Ping timeout: 121 seconds)
[16:11:48] *** Quits: zmack (zmack@moz-htpein.home.aster.pl) (Connection closed)
[16:11:56] <erickt> frankmcs_: omg: "// 4. overwrite *self w/o dropping it." then "std::ptr::write(self, vector);"
[16:12:09] <frankmcs_> erickt: wut. is that wrong?
[16:12:22] <frankmcs_> erickt: wait, you haven't read it all yet, have you? :D
[16:12:23] <erickt> he says innocently
[16:12:23] *** Joins: eternaleye (eternaleye@moz-7ps.ehi.245.50.IP)
[16:12:36] <erickt> I'm at "GRAAAAAAAAARRRRR"
[16:12:57] <cmr> meh: you'd want to add a lifetime parameter to Stream and Streams, and have impl<'a> Iterator for Streams<'a> { type Item = Stream<'a>; ... }
[16:13:08] <frankmcs_> Mutabah isn't wrong. It is really a horrible shambles of a thing that might actually kinda work.
[16:13:26] <meh> cmr, I did get that far, but then I couldn't figure out how to link the &self lifetime with the one on Streams
[16:13:28] <cmr> Then lifetime elision will take care of the rest for you, but explicitly it'd be fn streams<'a>(&'a self) -> Streams<'a> { ... }
[16:13:40] <Mutabah> ParahSailin: It's an example of something very evil that shouldn'y really be used in production
[16:13:45] <meh> cmr, yeah, I did that and it was saying it couldn't find the 'a, wait I'm a retard
[16:13:48] <meh> cmr, I forgot the <'a>
[16:13:49] <meh> thanks
[16:13:52] <frankmcs_> ParahSailin: I wouldn't use it. Or, not yet. I'd love to get other people looking at it and either saying "nope. you are wrong" or "... no comment"
[16:13:54] <zofrex> Manishearth: Experian
[16:14:14] *** Joins: happy-dude_ (uid62780@moz-jt3517.charlton.irccloud.com)
[16:14:32] <frankmcs_> ParahSailin: documenting it at the moment, will throw it up on github and let folks poke at it before doing any crates.io submission.
[16:14:46] *** Quits: jesse99 (jjones@moz-iu7.is7.137.67.IP) (Quit: Leaving.)
[16:15:02] *** Joins: UberLambda (uber@moz-24qg64.clienti.tiscali.it)
[16:15:14] <meh> cmr, do I also have to use PhantomData?
[16:15:17] <erickt> frankmcs_: you should make sure to either return the "decode" result in _bench_dec, or pass it test::black_box
[16:15:27] <cmr> meh: yeah
[16:15:35] <meh> I always forget how that works
[16:15:40] <frankmcs_> erickt: ah, doesn't the assert!() make sure it gets used?
[16:15:49] <erickt> frankmcs_: I think the assert does
[16:15:55] *** Quits: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP) (Client exited)
[16:15:55] <cmr> you should be able to just say _marker: PhantomData<&'a Context>
[16:15:59] <erickt> frankmcs_: I'm more talking about the assertless versions
[16:16:03] *** Joins: bfops (uid58242@moz-e5u6m0.charlton.irccloud.com)
[16:16:29] <erickt> frankmcs_: it looks like work is being done, otherwise it'd probably be around ~2ns
[16:16:34] <erickt> but just to be safe :)
[16:16:39] *** Joins: presidentJFK (Mibbit@moz-3ob.7kg.192.66.IP)
[16:16:57] <bfops> I could've sworn I saw a project to auto-generate a C API from a C++ library. Does that ring bells for anybody, or am I crazy again?
[16:16:57] <erickt> frankmcs_: but 4TB/s is pretty impressive. you're trashing capnproto there :)
[16:17:05] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[16:17:12] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:17:22] *** Joins: ascarter_ (ascarter@moz-705hf8.wa.comcast.net)
[16:17:41] <cmr> bfops: I haven't seen something like that before, but I imagine if it exists that it's very limited.
[16:17:44] <frankmcs_> erickt: in that particular case it should just be a usize::eq check.
[16:17:52] <cmr> bfops: maybe you were thinking SWIG?
[16:18:01] <meh> cmr, thanks a bunch
[16:18:05] <cmr> meh: np.
[16:18:09] <frankmcs_> erickt: the length field is already sitting there, it gets cast to a Vec<u64> and .len() is checked.
[16:18:23] *** Joins: nano (nano@moz-00j6et.dynamic.kabel-deutschland.de)
[16:18:26] *** Joins: Brochacho (alberto@moz-qmt.q5h.156.131.IP)
[16:18:27] *** Quits: daschl (Adium@moz-oirn1i.vie.surfer.at) (Quit: Leaving.)
[16:18:54] *** Quits: lenstr_ (lenstr@moz-rrh.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[16:19:14] *** Joins: andresv (textual@moz-l382a3.cable.starman.ee)
[16:19:17] <bfops> cmr: Hm yeah, I probably just saw SWIG in passing. Thanks.
[16:19:27] *** Quits: dstrbad (dstrbad@moz-8d7dvf.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[16:19:50] <Brochacho> How does one export a macro in a lib to a binary within the same project?
[16:19:54] <erickt> frankmcs_: either way, it's possible that llvm could be clever and only do the work necessary to set the length. with those benchmark times I'm guessing it's doing everything it needs to do
[16:20:15] <dwrensha> frankmcs_: I guess your `decode()` implementation relies on the layouts of `&[T]`  and `Vec<T>` being compatible, i.e. the former being a prefix of the latter?
[16:20:26] *** Joins: dstrbad (dstrbad@moz-8d7dvf.dsl.iskon.hr)
[16:20:35] <frankmcs_> dwrensha: actually, I don't think it does. maybe I'm wrong though.
[16:20:38] *** Joins: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net)
[16:20:43] <frankmcs_> dwrensha: that sounds like a fun thing to exploit, though.
[16:21:14] <dwrensha> I'm trying to make sense of `let result: &mut Vec<T> = unsafe { mem::transmute(split1.get_unchecked_mut(0)) };`
[16:21:39] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[16:21:44] <frankmcs_> dwrensha: oh geez, that mess. split1 is a &[u8] with length = mem::size_of::<Vec<T>>()
[16:22:01] <frankmcs_> dwrensha: so it is minting a &Vec<T> from those bytes.
[16:22:16] <frankmcs_> dwrensha: or, &mut Vec<T> rather.
[16:22:20] *** Quits: bombless (_@moz-odk.piv.41.59.IP) (Ping timeout: 121 seconds)
[16:22:31] <zofrex> what is this sorcery
[16:22:31] <erickt> frankmcs_: it might be slightly safer if you had an interface like `fn decode<T: Abomonation, U, F: Fn(|&T|) -> U>(bytes: &[u8], f: F) -> U`
[16:23:05] <frankmcs_> erickt: that's an interesting point. I *think* the lifetimes in decode make sure that the &Vec<T> can't escape, but ... never clear.
[16:23:24] *** Quits: pavelpenev (quassel@moz-8vs4j7.btc-net.bg) (Quit: No Ping reply in 180 seconds.)
[16:23:26] <kagami> I want to use big buffer with BufReader and that code http://doc.rust-lang.org/1.0.0-beta.3/src/std/io/buffered.rs.html#50 is... strange. It takes about 1 minute to just create BufReader with 100M buffer.
[16:23:35] * mbrubeck is reading the start of the Abomonation post, hopes it involves abusing the unicode BOM in some way. :P
[16:23:37] *** Joins: nham (nham@moz-755.bu3.214.98.IP)
[16:24:02] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Quit: )
[16:24:12] <erickt> frankmcs_: or at least make sure that you explicitly tie the lifetimes together with `fn decode<'a, ...>(bytes: &'a mut [u8]) -> &'a Vec<T>`
[16:24:32] <dwrensha> frankmcs_: it seems to me that result.len() and result.capacity() will hit invalid memory
[16:24:32] <erickt> frankmcs_: it's possible that rustc might not unify the two lifetimes together
[16:24:35] *** Joins: pavelpenev (quassel@moz-8vs4j7.btc-net.bg)
[16:24:35] <frankmcs_> erickt: yup. that used to be there, but I deleted it because I was "pretty sure" elision did that.
[16:24:36] *** Joins: naerbnic (naerbnic@moz-i9o.rs4.199.12.IP)
[16:24:43] <frankmcs_> erickt: used to be a 'bytes lifetime.
[16:24:49] *** Quits: marc_ (uid5324@moz-t3einu.ealing.irccloud.com) (Quit: Connection closed for inactivity)
[16:24:54] *** Joins: GaryOak_ (GaryOak_@moz-etoj16.hfc.comcastbusiness.net)
[16:25:08] *** Quits: jviereck (Adium@moz-tde1p4.ethz.ch) (Quit: Leaving.)
[16:25:44] <erickt> frankmcs_: yeah. I know I tried doing some hacks like this in zmq for zero-copy, but I forgot the explicit lifetime and was accidentally leaking memory
[16:25:56] <frankmcs_> dwrensha: hrm. I hope not. They don't seem to in the experiments, at least. If bytes.split_at_mut(mem::size_of::<Vec<T>>()) comes back without panicking, it seems like it should have enough valid memory.
[16:26:00] *** Quits: mike_wagg (mike_wagg@moz-hst3d7.cable.virginm.net) (Ping timeout: 121 seconds)
[16:26:18] <erickt> that was many rusts ago though, and I think before we had lifetime elision, so it might be different now
[16:26:44] <dwrensha> lifetime elision is evil!
[16:27:14] <frankmcs_> erickt: so, this is using some cool property of Rust that I haven't seen exploited like this: because *ownership*, and a little restriction on the types, we can guarantee that nothing backing the &Vec<T> escapes, other than through .clone() or the like.
[16:27:53] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[16:27:54] *** Quits: Murarth (Murarth@moz-mpmr8r.phnx.qwest.net) (Quit: Alfador is the Entity!)
[16:27:58] <frankmcs_> erickt: this totally wouldn't work if impl Abomonation for &[T], for example, because then you could Copy it and it would be a disaster.
[16:28:20] *** Joins: Murarth (Murarth@moz-tkj.b85.166.46.IP)
[16:28:22] *** Quits: naerbnic (naerbnic@moz-i9o.rs4.199.12.IP) (Client exited)
[16:28:28] *** Quits: jtdowney (jtdowney@moz-gh1isj.static.twtelecom.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:29:20] *** Joins: jtdowney (jtdowney@moz-gh1isj.static.twtelecom.net)
[16:29:40] <bluss> I don't understand
[16:29:49] <bluss> You can copy a &Vec ref too
[16:29:54] *** Quits: mindcat (mindcat@moz-0h1.tnp.13.183.IP) (Quit: Lost terminal)
[16:30:00] <frankmcs_> bluss: it has a lifetime built in, though.
[16:30:09] *** Quits: timonv1 (timonv@moz-7btgcn.dynamic.ziggo.nl) (Ping timeout: 121 seconds)
[16:30:25] <frankmcs_> bluss: the highest level return value has a lifetime, and everything else under it is owned, so although you can see and touch it, you can't keep it.
[16:30:26] *** Quits: vks (quassel@moz-b54qc9.fias.uni-frankfurt.de) (A TLS packet with unexpected length was received.)
[16:30:34] *** Joins: vks (quassel@moz-b54qc9.fias.uni-frankfurt.de)
[16:30:43] <frankmcs_> bluss: and, that's good because none of them actually exist.
[16:30:45] *** Quits: vks (quassel@moz-b54qc9.fias.uni-frankfurt.de) (A TLS packet with unexpected length was received.)
[16:30:50] <bluss> &Vec<T> or &[T] shouldn't make a difference
[16:30:52] *** Joins: vks (quassel@moz-b54qc9.fias.uni-frankfurt.de)
[16:31:29] <erickt> bluss ++ I was just about to ask that as well :)
[16:31:36] <frankmcs_> bluss: you are right that the result of decode could be a &[T], but internally it shouldn't be able to work with, e.g., &[(u64, &[u32])]
[16:31:42] *** Joins: bombless (_@moz-odk.piv.41.59.IP)
[16:32:07] <frankmcs_> bluss: I used Vec at the root level just because I had already written the code to splat that data in and out.
[16:32:08] *** Joins: naerbnic (naerbnic@moz-i9o.rs4.199.12.IP)
[16:32:27] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[16:32:43] <bluss> I confess your blog post hurt the head too much so I couldn't finish it
[16:32:54] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[16:33:19] *** Joins: mike_wagg (mike_wagg@moz-hst3d7.cable.virginm.net)
[16:33:20] <bluss> &[T] should give you more flexibility regardless, you return a bigger value after all, length and pointer
[16:33:35] <bluss> no need to construct a fake vec or space to store it
[16:33:58] <frankmcs_> bluss: if we are talking about decode, then probably right. If we are talking about types that can implement Abomonation, I think it needs to be Vec.
[16:34:14] *** Joins: killercup (killercup@moz-gpufip.dip0.t-ipconnect.de)
[16:34:36] *** Quits: espadrine (tyl@moz-qfr4fg.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[16:34:41] <frankmcs_> bluss: maybe a different way: I could totally be using Box<[T]> instead of / as well as Vec<T>, but I think it needs to be owned data, rather than borrowed.
[16:34:52] *** Quits: erikj (erikj@moz-dsm7da.skybroadband.com) (Quit: Leaving)
[16:35:05] *** Joins: dougt (sid7064@moz-k57vje.ealing.irccloud.com)
[16:35:20] <bluss> &Vec<T> data isn't more owned than &[T]
[16:35:28] <dougt> who owns https://doc.crates.io/
[16:35:44] <frankmcs_> bluss: but &Vec<T> doesn't implement Abomonation. Only Vec<T> does.
[16:36:01] <mbrubeck> dougt: Not sure who manages the hosting, but the source code is in https://github.com/rust-lang/cargo/tree/master/src/doc
[16:36:07] <frankmcs_> bluss: it might be that [T] could implement Abomonation, but ... I don't understand DST.
[16:36:18] *** Quits: gandalf (zbraniecki@moz-q46bkg.hr.cox.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[16:36:28] <dougt> it has a bad cert.
[16:36:36] <dougt> (uses github)
[16:36:55] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[16:36:57] *** Quits: smohan (smohan@moz-m6j.f0d.244.121.IP) (Connection closed)
[16:36:59] *** Joins: smohan (smohan@moz-m6j.f0d.244.121.IP)
[16:37:12] <Diggsey> is there a safe way to convert a &T to a &[T] or &[T;1] ?
[16:37:25] <mbrubeck> dougt: Yeah, I think the same is true of an GitHub Pages site with its own domain, e.g. https://blog.servo.org/
[16:37:39] *** Joins: AngelOfSol (AngelOfSol@moz-dj58kc.rh.rit.edu)
[16:37:40] <dougt> can we fix that
[16:37:41] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[16:37:45] <dougt> it's really bad form.
[16:37:56] <bluss> Diggsey: yes, there's a function for that somewhere. To &[T]
[16:38:06] *** Joins: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP)
[16:38:18] <dwrensha> frankmcs_: I retract what I was saying. I see what's going on now.
[16:38:21] *** darkowlzz|afk is now known as darkowlzz
[16:38:22] *** Quits: vks (quassel@moz-b54qc9.fias.uni-frankfurt.de) (Ping timeout: 121 seconds)
[16:38:27] *** Quits: ptalbot (ptalbot@moz-1gn7gb.eu0n.jcdj.0660.2001.IP) (Ping timeout: 121 seconds)
[16:38:31] <frankmcs_> dwrensha: sweet! :D
[16:38:36] <Lurkin> It's not really bad form, it'd be bad form if the trust model wasn't inherently broken though dougt
[16:38:41] <Diggsey> bluss: oh I see it's just unstable
[16:38:42] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[16:38:59] <erickt> Diggsey: there's the unstable slice::ref_slice
[16:39:10] <dougt> Lurkin: disagree.
[16:39:23] <Lurkin> It's not less secure than any other cert.
[16:39:23] *** Joins: niconii (nicole@moz-5gqgia.frgo.qwest.net)
[16:39:31] <dougt> Lurkin: disagree.
[16:39:36] *** Joins: JosiahOne1 (Thunderbird@moz-ub5.sco.30.4.IP)
[16:39:46] *** Quits: nicoch (nicoch@moz-g02d7k.be) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:39:51] *** Quits: JosiahOne (Thunderbird@moz-f2hp7h.biz.rr.com) (Ping timeout: 121 seconds)
[16:40:04] *** Quits: larhat (Adium@moz-64mvae.outplay.com) (Quit: Leaving.)
[16:40:08] *** Joins: james4k (james@moz-fm2a4v.consolidated.net)
[16:40:17] <bluss> frankmcs_: I still think using Vec here is making it more complicated than needed.
[16:40:27] <erickt> frankmcs_: my spidey-senses tells me that the Vec<T> in exhume is unnecessary, but I'm not quite sure why
[16:40:30] <mbrubeck> dougt: Looks like we'd need to move them off GitHub, or change the domain to *.github.io. https://github.com/isaacs/github/issues/156
[16:40:53] *** Joins: dinfuehr (dinfuehr@moz-j5sgb8.highway.telekom.at)
[16:41:03] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[16:41:10] <frankmcs_> erickt: it just gets blatted in to *self with the ptr::write; is that the one you mean?
[16:41:17] <erickt> yeah
[16:41:24] *** Quits: krdln (krdln@moz-ohe9vg.dynamic.chello.pl) (Ping timeout: 121 seconds)
[16:41:38] <dougt> mbrubeck: thanks!
[16:41:42] <frankmcs_> bluss: it's possible. there are two places Vec is used, and I think one of them is important and one (`encode` and `decode`) is not.
[16:41:45] *** Quits: Guest74 (textual@moz-il1.n6s.204.65.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:42:11] *** Joins: kgrandon (Adium@moz-6m7tqk.2rkg.9kg1.0101.2620.IP)
[16:42:14] <frankmcs_> erickt: I broke it out just so that it was easier to read; you do want to assemble a vec from parts, because you need that ptr, but you don't do anything with it other than assign it to *self.
[16:42:29] <mbrubeck> dougt: For now, https://rust-lang.github.io/cargo/ works
[16:42:54] <erickt> I wonder if it'd be possible to change it into something like `fn exhume<'a>(bytes: &'a mut [u8]) -> Option<(&'a Self, &'a mut [u8])>`
[16:42:54] *** Joins: JosiahOne (Thunderbird@moz-f2hp7h.biz.rr.com)
[16:43:23] <frankmcs_> erickt: in the failure case?
[16:43:30] *** Quits: _bart (bart@moz-jl97l5.priv.bahnhof.se) (Ping timeout: 121 seconds)
[16:43:38] *** Quits: JosiahOne1 (Thunderbird@moz-ub5.sco.30.4.IP) (Ping timeout: 121 seconds)
[16:43:38] <frankmcs_> erickt: oh, no, I see.
[16:43:40] <erickt> no that wouldn't quite work since you need to recursively exhume through the values
[16:44:13] <frankmcs_> erickt: yeah, it was hard getting the mutability right. Mutabah came up with the solution of "just use &[u8] and transmute to mutable", which is the only thing I could get to work.
[16:45:22] *** Joins: lenstr (lenstr@moz-rrh.vju.25.171.IP)
[16:45:30] *** Quits: kgrandon (Adium@moz-6m7tqk.2rkg.9kg1.0101.2620.IP) (Quit: Leaving.)
[16:45:36] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[16:46:19] <nwin> frankmcs_ isn’t that ub?
[16:46:34] <frankmcs_> nwin: this thing has ub all over it. >.<
[16:47:06] <nwin> I wonder if it is ok if you don’t have any other &mut references…
[16:47:21] <frankmcs_> nwin: I learned that transmuting &[(u32, u64)] to &[u8] is ub because reading padding bytes is ub. T.T 
[16:47:32] *** Joins: kgrandon (Adium@moz-u4vm9c.2rkg.9kg1.0101.2620.IP)
[16:47:50] <frankmcs_> nwin: it does happen that all of the &[u8] that are transmuted are disjoint, and the &[u8] comes in as a &mut [u8], so exclusive access.
[16:47:58] *** Quits: CustosLimen (CustosLimen@moz-43o.etd.160.41.IP) (Ping timeout: 121 seconds)
[16:48:19] <frankmcs_> nwin: but ub is ub. rustc is free to look at that and say lollololloo panic!
[16:48:34] *** Joins: jviereck (Adium@moz-ggirh3.97ug.g469.067c.2001.IP)
[16:48:43] *** Quits: dschatzberg (dschatz@moz-1j10ud.bu.edu) (Ping timeout: 121 seconds)
[16:49:10] <bluss> oh so about what I said when I tried to read it :P
[16:49:19] <nwin> :D
[16:49:37] <nwin> probably it’s less likely to trigger UB with raw pointers I guess…
[16:49:40] *** Quits: jviereck (Adium@moz-ggirh3.97ug.g469.067c.2001.IP) (Quit: Leaving.)
[16:51:11] *** Quits: maugzoide (maugzoide@moz-ua3.1qv.43.177.IP) (Quit: (null))
[16:51:58] *** Quits: giucam (giucam@moz-u9jnsc.c665.0nib.2060.2001.IP) (Ping timeout: 121 seconds)
[16:52:30] *** Joins: agjacome (agjacome@moz-luc376.dynamic.jazztel.es)
[16:52:31] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[16:52:47] <Diggsey> reading padding bytes is UB? I thought it was just that the bytes themselves were undefined :/
[16:52:48] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[16:53:10] <erickt> frankmcs_: btw in exhume you could use slice::split_at_mut
[16:53:34] *** Quits: ray1 (ray@moz-0hj.t3f.66.59.IP) (Connection closed)
[16:53:50] *** Quits: dinfuehr (dinfuehr@moz-j5sgb8.highway.telekom.at) (Connection closed)
[16:54:12] <frankmcs_> erickt: in step 1? just split_at, even! I wanted to go slow, because I want to re-assign to *bytes.
[16:54:53] <erickt> hm, right
[16:55:03] *** Quits: jophish (jophish@moz-epocft.broadband.tesco.net) (Connection closed)
[16:55:14] <Diggsey> frankmcs_: do you have a link to where it's documented that reading padding bytes is UB?
[16:55:23] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[16:55:26] <frankmcs_> cmr said so.
[16:55:50] <frankmcs_> (( so, no, but cmr might! ))
[16:55:51] <cmr> Diggsey: it produces an undef at the llvm level.
[16:56:32] *** Joins: HollyRain (HollyRain@moz-lnracf.user.ono.com)
[16:56:37] <frankmcs_> ^--- and undef at compiler level can be really bad news, because they are jerks about optimizing your code. they do lots of hilarious things with undef. =/
[16:56:40] *** Quits: jtdowney (jtdowney@moz-gh1isj.static.twtelecom.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:56:58] *** Quits: dalarmmst (dalarmmst@moz-mb21j4.bredband.comhem.se) (Ping timeout: 121 seconds)
[16:57:12] *** Joins: krdln (krdln@moz-ohe9vg.dynamic.chello.pl)
[16:57:22] <HollyRain> I declare a variable whith the type of a struct but I cann't use its method: http://is.gd/K5CMvd
[16:57:41] *** Joins: jtdowney (jtdowney@moz-gh1isj.static.twtelecom.net)
[16:57:57] <mbrubeck> HollyRain: You need to initialize it: `let f: foo = foo { ... };`
[16:58:17] <Tobba> error: the trait `core::hash::Hash` is not implemented for the type `f32` [E0277]
[16:58:18] <Tobba> :/
[16:58:22] <HollyRain> mbrubeck, do I need to initialize every struct field?
[16:58:33] *** Quits: nico (nico@moz-n8jedu.dip0.t-ipconnect.de) (Connection closed)
[16:58:40] *** Quits: davebettin (davebettin@moz-rnhkmd.bendcable.com) (Ping timeout: 121 seconds)
[16:58:51] *** Joins: skade (skade@moz-0djl38.boh1-r2.syseleven.net)
[16:58:56] <Diggsey> undef just means the compiler can assume it has any value and optimise accordingly - as long as you don't depend on the values of padding bytes being consistent then the code itself shouldn't exhibit undefined behaviour?
[16:58:56] <Tobba> I can't see any justification for f32 not implementing Hash
[16:59:06] <Tobba> things like NaNs should work fine with it
[16:59:12] <mbrubeck> HollyRain: Yes, or you can write a function that does it for you, or you can derive Default: http://is.gd/uDw3Hd
[16:59:12] *** Quits: joelteon (joelteon@moz-0gljna.n3ik.opad.5300.2607.IP) (A TLS packet with unexpected length was received.)
[16:59:17] *** Joins: vosen (vosen@moz-mtm1g4.dynamic.chello.pl)
[16:59:25] <HollyRain> ok, thanks
[16:59:25] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Ping timeout: 121 seconds)
[16:59:29] *** Joins: joelteon (joelteon@moz-0gljna.n3ik.opad.5300.2607.IP)
[16:59:58] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[16:59:58] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:00:51] <frankmcs_> Diggsey: they occasionally do hilarious things. http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html is a good start.
[17:01:07] *** Joins: dschatzberg (dschatz@moz-nk1clf.bu.edu)
[17:01:11] <frankmcs_> Diggsey: it might be that byte padding fields are pretty harmless, but there are a bunch of other harmless things that 
[17:01:23] <frankmcs_> Diggsey: end up biting you for very weird reasons.
[17:01:42] *** Joins: Torkable (Torkable@moz-pe6b7t.5lf3.8saf.0001.2601.IP)
[17:02:27] *** Joins: errordeveloper (ilya@moz-rbv.o6q.208.90.IP)
[17:02:29] *** Quits: scientes (scientes@moz-l6hdmu.wa.comcast.net) (Ping timeout: 121 seconds)
[17:03:15] <Diggsey> frankmcs_: Right, but "undef" in LLVM doesn't imply undefined behaviour
[17:03:59] <frankmcs_> Diggsey: ah sorry. if llvm has meaningful guarantees about what it does in these cases, sweet. I don't know enough about its spec to know.
[17:04:35] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[17:04:51] <Diggsey> frankmcs_: LLVM has a separate "poison" value which will make anything that depends on it UB, whereas "undef" is a lot more leniant
[17:05:28] <Torkable> why is the range format `..` in a loop, but `...` in a pattern?
[17:05:33] <XMPPwocky> poison afaik is more like C's undefined
[17:05:52] *** Quits: mindtree (Mitch@moz-l32.ei8.240.116.IP) (Ping timeout: 121 seconds)
[17:06:01] *** Joins: Savago (Savago@moz-k613vv.ca.comcast.net)
[17:06:02] <niconii> Torkable: .. is exclusive, ... is inclusive
[17:06:08] *** Quits: qwerty_nor (Thunderbird@moz-vuo.d5a.248.5.IP) (Ping timeout: 121 seconds)
[17:06:12] *** Joins: iamtyler (Adium@moz-gu5.i3g.162.66.IP)
[17:06:13] <niconii> Torkable: eventually it's planned to be able to use both .. and ... everywhere
[17:06:30] <Torkable> niconii: but why does .. fail to compile when used in a pattern
[17:06:41] *** Quits: errordeveloper (ilya@moz-rbv.o6q.208.90.IP) (Ping timeout: 121 seconds)
[17:06:41] *** Joins: mindtree (Mitch@moz-p8kk6g.iprimus.net.au)
[17:06:52] *** Quits: GGist (Mibbit@moz-kl9hvd.seattleu.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[17:06:55] <Torkable> also I think I tried to use ... in a loop and that failed as well
[17:06:56] <niconii> Torkable: because patterns aren't normal expressions, and .. isn't implemented for patterns yet
[17:07:10] <niconii> Torkable: and because ... isn't implemented outside of patterns yet
[17:07:16] <Torkable> ok 
[17:07:18] <Torkable> thanks
[17:07:28] *** Quits: naerbnic (naerbnic@moz-i9o.rs4.199.12.IP) (Client exited)
[17:07:59] *** Joins: jdm (jdm@moz-6c2k86.ckpj.s0pt.0450.2001.IP)
[17:07:59] *** ChanServ sets mode: +o jdm
[17:09:48] *** Joins: naerbnic (naerbnic@moz-i9o.rs4.199.12.IP)
[17:10:21] *** Quits: Savago (Savago@moz-k613vv.ca.comcast.net) (Client exited)
[17:10:31] *** Joins: jadbaires (jadrian@moz-6u6inc.dsl.telepac.pt)
[17:10:37] *** Quits: pnkfelix (pnkfelix@moz-6v5.3nd.202.89.IP) (Ping timeout: 121 seconds)
[17:10:39] *** Joins: eibwen (eibwen@moz-v4qg3e.dip0.t-ipconnect.de)
[17:10:48] *** Joins: arunmk (arun@moz-vfv9bl.ca.comcast.net)
[17:11:32] *** Joins: achanda (achanda@moz-fr1.spq.217.162.IP)
[17:11:36] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[17:11:36] *** Quits: arunmk (arun@moz-vfv9bl.ca.comcast.net) (Client exited)
[17:11:44] *** Joins: choplin (choplin@moz-b1oa9n.zaq.ne.jp)
[17:11:55] *** Joins: arunmk (arun@moz-vfv9bl.ca.comcast.net)
[17:12:18] *** Joins: hichaelmart (hichaelmart@moz-12j80j.h40n.2c52.2000.2604.IP)
[17:12:19] *** Quits: hichaelmart (hichaelmart@moz-12j80j.h40n.2c52.2000.2604.IP) (Quit: Leaving...)
[17:12:24] *** Joins: giucam (giucam@moz-iv0nnc.bb.dnainternet.fi)
[17:12:28] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[17:12:49] *** Quits: jackz (jackz@moz-lcmhfp.19gv.i62q.0008.2601.IP) (Quit: )
[17:13:25] <kagami> UPD. I recompiled code that uses BufReader with big buffer with release flag and it's fast now. Huh. Still 100 ms delay for a 100 MiB buffer though. I'm wondering, why does it fill buffer with zeroes on initialization.
[17:13:28] *** Joins: wldcordeiro (wldcordeiro@moz-mpr8k1.hmj8.a2nn.0007.2601.IP)
[17:13:52] *** Quits: claudiop (claudiop@moz-sqo2tm.cpe.netcabo.pt) (Ping timeout: 121 seconds)
[17:14:59] *** Quits: futile (felix@moz-cmcd12.unity-media.net) (Quit: WeeChat 1.2-rc1)
[17:15:04] *** Joins: solreaper (Mibbit@moz-mfpu5o.wa.comcast.net)
[17:15:33] *** Joins: Guest74 (textual@moz-il1.n6s.204.65.IP)
[17:15:46] *** Quits: choplin (choplin@moz-b1oa9n.zaq.ne.jp) (Ping timeout: 121 seconds)
[17:15:54] *** Joins: duesenfranz_ (jona@moz-711djm.tirol.surfer.at)
[17:16:35] <dwrensha> kagami: https://internals.rust-lang.org/t/uninitialized-memory/1652/7
[17:16:43] *** Quits: naerbnic (naerbnic@moz-i9o.rs4.199.12.IP) (Client exited)
[17:17:06] <dwrensha> https://internals.rust-lang.org/t/uninitialized-memory/1652
[17:17:32] <dwrensha> (oops, didn't mean to link to a specific comment, as I did in the initial link)
[17:18:03] <Tobba> okay
[17:18:09] <Tobba> I really can't find any reasoning behind f32 lacking Hash
[17:18:11] <Tobba> this is really strange
[17:18:17] *** Joins: kaeluka (kaeluka@moz-tn3lqd.cust.bredbandsbolaget.se)
[17:19:45] <dwrensha> Tobba: I also don't think there's a way to get the bits of an f32 other than by transmuting.
[17:20:07] *** Joins: Guest_ (textual@moz-rtn.fg7.77.192.IP)
[17:20:15] <Tobba> ~~fun~~
[17:21:55] *** Joins: dawidc__ (dpc@moz-52v2l7.nvidia.com)
[17:22:00] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[17:22:14] *** Quits: arunmk (arun@moz-vfv9bl.ca.comcast.net) (Client exited)
[17:22:31] *** Quits: fmtq (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[17:22:34] *** Joins: sin8h1 (Adium@moz-f0u.cn5.51.106.IP)
[17:22:42] *** Quits: sin8h (Adium@moz-f0u.cn5.51.106.IP) (Connection closed)
[17:22:49] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[17:23:30] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[17:24:45] <Diggsey> Tobba: you can use "integer_decode"
[17:24:50] <kagami> dwrensha: interesting, thanks. Also, it's a pity bufread.seek always clear the buffer. It makes seeking backwards in a file non-optimal... Also, I don't understand that comment: http://doc.rust-lang.org/1.0.0-beta.3/src/std/io/buffered.rs.html#131-134
[17:25:05] *** Quits: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP) (Client exited)
[17:25:06] *** Joins: hjr3 (hradtke@moz-dmp.av4.169.69.IP)
[17:25:07] <AeroNotix> Noob here. I want to return an immutable version of a local mutable. Do I need to do anything special?
[17:25:09] <Tobba> Diggsey: good lord
[17:25:15] <Tobba> I'm just gonna transmute it
[17:25:17] <Tobba> fuck it all
[17:25:24] <Diggsey> well there's one problem
[17:25:32] <Diggsey> +0 == -0
[17:25:38] *** Joins: fmtq (fmtq@moz-d08itp.tpgi.com.au)
[17:25:40] <Tobba> it doesn't matter here
[17:25:58] <Tobba> it's straight up about the raw value
[17:26:07] <XMPPwocky> AeroNotix: mutability is tied to *bindings*, not values
[17:26:18] <Diggsey> well you'll have to make sure to not use the built in float equality then
[17:26:21] <XMPPwocky> (ignoring interior mutability, you'll know that if you see it)
[17:26:44] *** Quits: matp (matp@moz-rvt9hl.matp.at) (Connection closed)
[17:26:57] *** Joins: Anupkumar (uid16774@moz-cf8smb.uxbridge.irccloud.com)
[17:27:04] *** Quits: bombless (_@moz-odk.piv.41.59.IP) (Ping timeout: 121 seconds)
[17:27:33] *** Joins: woboats (tatterdemal@moz-a0dnkb.ca.comcast.net)
[17:27:42] *** Joins: arunmk (arun@moz-vfv9bl.ca.comcast.net)
[17:28:53] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[17:29:20] <AeroNotix> XMPPwocky: I don't follow entirely. Are you saying it shouldn't matter?
[17:29:25] *** Quits: Brochacho (alberto@moz-qmt.q5h.156.131.IP) (Ping timeout: 121 seconds)
[17:30:13] <XMPPwocky> AeroNotix: almost all types have "inherited mutability"; they're mutable if they are in a mutable binding, or if they're in something else (like a struct) that's in a mutable binding
[17:30:28] *** Quits: jtdowney (jtdowney@moz-gh1isj.static.twtelecom.net) (Connection closed)
[17:30:33] <XMPPwocky> there's not a "mutable i32", there's an "i32 in a mutable location"
[17:30:36] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[17:30:46] <AeroNotix> got it
[17:30:47] *** Joins: jtdowney (jtdowney@moz-gh1isj.static.twtelecom.net)
[17:31:12] *** Joins: ajtulloch (ajtulloch@moz-ga0.9o0.201.199.IP)
[17:31:47] <AeroNotix> https://gist.github.com/AeroNotix/a8bb63218e9c45028285 can I not do this? I get "the impl does not reference any types from this crate"
[17:32:15] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[17:32:19] *** Quits: kgrandon (Adium@moz-u4vm9c.2rkg.9kg1.0101.2620.IP) (Quit: Leaving.)
[17:32:20] *** Joins: kgrandon (Adium@moz-u3dg2t.sfo1.mozilla.com)
[17:32:25] <XMPPwocky> AeroNotix: no, you cannot implement traits on types not declared in your crate
[17:32:37] <AeroNotix> hmm
[17:32:39] *** Joins: husker (husker@moz-jnp.nkc.211.82.IP)
[17:32:46] *** Quits: husker (husker@moz-jnp.nkc.211.82.IP) (Quit: leaving)
[17:32:49] <steveklabnik> AeroNotix: http://doc.rust-lang.org/nightly/book/mutability.html <-
[17:32:54] *** Quits: areski (areski@moz-erfa2b.dynamicIP.rima-tde.net) (Ping timeout: 121 seconds)
[17:32:56] <AeroNotix> cheers steveklabnik 
[17:32:59] <steveklabnik> :)
[17:33:13] <steveklabnik> it's why i write it. lemme know if something about that isn't clear
[17:33:27] <AeroNotix> XMPPwocky: so how would I do this? I want to implement Default for a struct which contains [u8; 16] but it complains that [u8; 16] doesn't implement Default.
[17:33:53] <XMPPwocky> AeroNotix: you'd have to implement it by hand. fixed-size arrays are pretty awful atm
[17:34:12] <AeroNotix> What does that mean?
[17:34:17] <AeroNotix> "implement it by hand"?
[17:34:23] <XMPPwocky> AeroNotix: impl Default for MyStruct
[17:34:29] <XMPPwocky> not just #[derive(Default)]
[17:34:30] <AeroNotix> got it, instead of the field
[17:34:37] <AeroNotix> cool, ok
[17:35:03] *** Joins: gopar (gopar@moz-5039uj.ca.comcast.net)
[17:35:13] *** Parts: sin8h1 (Adium@moz-f0u.cn5.51.106.IP) ()
[17:35:16] *** Quits: griffindy (textual@moz-e2t.qpb.133.192.IP) (Connection closed)
[17:35:47] <AeroNotix> is there anything in the works for coroutines/green threads?
[17:36:34] <mbrubeck> AeroNotix: There's https://github.com/rustcc/coroutine-rs/ which I think is based on part of the old libgreen runtime.
[17:36:35] *** Joins: jarrednicholls (uid19542@moz-s0evcl.uxbridge.irccloud.com)
[17:36:37] *** Joins: sinistersnare (Mibbit@moz-vj2.mkr.2.129.IP)
[17:37:01] *** Quits: Murarth (Murarth@moz-tkj.b85.166.46.IP) (Quit: brb, washing the cat)
[17:37:17] *** Joins: Murarth (Murarth@moz-mpmr8r.phnx.qwest.net)
[17:37:28] <AeroNotix> yikes that API is horrible
[17:37:42] *** Joins: matp (matp@moz-rvt9hl.matp.at)
[17:37:50] *** Quits: matp (matp@moz-rvt9hl.matp.at) (Connection closed)
[17:37:54] <jarrednicholls> carllerche: It's not readily apparent to me how I would (or if I can successfully) integrate the openssl crate's SslStream<S> with Mio and std::net::TcpStream.  Do you know if this would work? Thanks in advance.
[17:38:34] <HollyRain> I'm trying to learning about the handling of strings but I can not get it: http://is.gd/CLD7Rj
[17:38:56] *** Joins: spider-mario (spidermario@moz-coblcf.fbx.proxad.net)
[17:39:05] *** Quits: jtdowney (jtdowney@moz-gh1isj.static.twtelecom.net) (Quit: Textual IRC Client: www.textualapp.com)
[17:39:16] *** Quits: lenstr (lenstr@moz-rrh.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[17:39:24] <HollyRain> I get error: missing lifetime specifier [E0106]
[17:39:39] *** Joins: CustosLimen (CustosLimen@moz-nb664a.mtnbusiness.co.za)
[17:39:49] *** Joins: matp (matp@moz-rvt9hl.matp.at)
[17:39:52] *** Joins: tamird (textual@moz-lje.m54.130.157.IP)
[17:40:32] *** Joins: abhi-bit (Adium@moz-f0u.cn5.51.106.IP)
[17:40:32] <duncan> HollyRain: &str is a borrowed string slice. it needs to know how long you intend the borrow to last
[17:40:51] *** Quits: hjr3 (hradtke@moz-dmp.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[17:40:53] *** Parts: abhi-bit (Adium@moz-f0u.cn5.51.106.IP) ()
[17:41:06] <duncan> HollyRain: this works: http://is.gd/On0iZb
[17:41:30] *** Quits: iamtyler (Adium@moz-gu5.i3g.162.66.IP) (Quit: Leaving.)
[17:41:48] *** Joins: dmac_ (dmac@moz-h4nvlf.ca.comcast.net)
[17:41:58] <HollyRain> thanks duncan 
[17:42:41] *** Quits: tcard (tcard@moz-5eb1g3.staticIP.rima-tde.net) (Client exited)
[17:42:58] <HollyRain> duncan, which type should be better used: &str or String? To handle strings in struct fields
[17:44:01] *** Quits: DerisiveLogic (smuxi@moz-g93io6.res.rr.com) (Ping timeout: 121 seconds)
[17:44:46] <duncan> if you can get away with &str, it is probably more efficient, but you get ownership with String, which means less having to think about lifetimes, so it is a tradeoff
[17:44:53] <bluss> both types have their uses (of course, it's why they both exist! :)
[17:44:59] <duncan> does the struct "own" the data? if so, probably String
[17:45:12] <bluss> And it's not always a tradeoff -- sometimes the use case just can't use &str
[17:46:38] *** Quits: Kynes (Kynes@moz-j2us35.mit.edu) (Quit: Leaving)
[17:47:22] *** Joins: lenstr (lenstr@moz-rrh.vju.25.171.IP)
[17:47:29] *** Joins: scientes (scientes@moz-l6hdmu.wa.comcast.net)
[17:48:22] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[17:48:35] *** Joins: vadimcn (uid46608@moz-o7asbu.uxbridge.irccloud.com)
[17:48:53] *** Quits: ajtulloch (ajtulloch@moz-ga0.9o0.201.199.IP) (A TLS packet with unexpected length was received.)
[17:49:06] *** Joins: mib_b143jq (Mibbit@moz-m96i8r.lut.ac.uk)
[17:49:14] *** Joins: ajtulloch (ajtulloch@moz-ga0.9o0.201.199.IP)
[17:49:19] *** Quits: mib_b143jq (Mibbit@moz-m96i8r.lut.ac.uk) (Quit: http://www.mibbit.com ajax IRC Client)
[17:50:31] *** Joins: kieran (kieran@moz-c5gk5j.ihug.co.nz)
[17:50:48] *** Joins: abhi (Adium@moz-f0u.cn5.51.106.IP)
[17:51:14] *** Quits: zettablade (zettablade@moz-58u.jiv.125.50.IP) (Ping timeout: 121 seconds)
[17:51:17] *** Quits: abhi (Adium@moz-f0u.cn5.51.106.IP) (Quit: Leaving.)
[17:51:18] <flan3002> If I call feature-dependent functions, is it enough to guard them in 3`if cfg!(feature_x) { function_that_depends_on_x() }`? (Or I'm doing something wrong)
[17:51:33] *** Joins: abhi (Adium@moz-f0u.cn5.51.106.IP)
[17:51:33] *** Quits: abhi (Adium@moz-f0u.cn5.51.106.IP) (Connection closed)
[17:51:35] *** Joins: abhi (Adium@moz-f0u.cn5.51.106.IP)
[17:52:00] *** nsm is now known as nsm|away
[17:52:16] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[17:52:36] <jarrednicholls> Has anyone integrated Mio w/ SslTream<S>?
[17:53:16] *** Quits: ajtulloch (ajtulloch@moz-ga0.9o0.201.199.IP) (Ping timeout: 121 seconds)
[17:53:46] *** Joins: stjahns (stjahns@moz-g9cif9.uws.ualberta.ca)
[17:54:11] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[17:54:11] <niconii> flan3002: no, function_that_depends_on_x() still needs to exist or you'll get an error about the function not being found when you try to compile without that feature
[17:54:17] <flan3002> jarrednicholls - SslStream is impl'd for anything with Read + Write, and mio::tcp::TcpStream has implementations of those, so... what're you having problems with specifically?
[17:54:30] *** Quits: agjacome (agjacome@moz-luc376.dynamic.jazztel.es) (Connection closed)
[17:54:41] *** Quits: kieran (kieran@moz-c5gk5j.ihug.co.nz) (Ping timeout: 121 seconds)
[17:54:41] <flan3002> niconii - Yes, that's what I'm seeing. Should I stub the function, or use it conditionally?
[17:54:48] *** Joins: agjacome (agjacome@moz-5d00gg.dynamic.jazztel.es)
[17:55:09] *** Quits: nham (nham@moz-755.bu3.214.98.IP) (Ping timeout: 121 seconds)
[17:55:34] *** Joins: jophish (jophish@moz-epocft.broadband.tesco.net)
[17:56:05] <niconii> flan3002: depends on what's easiest, i guess -- if you're using that `if cfg!` pattern a lot within a function like main(), you might just want to make two versions of main() or whatever
[17:56:05] *** Quits: ryanxcharles (ryan@moz-lcf.eq6.124.64.IP) (Quit: Leaving)
[17:56:09] *** Quits: Guest_ (textual@moz-rtn.fg7.77.192.IP) (Connection closed)
[17:56:09] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[17:56:25] *** Joins: Guest_ (textual@moz-rtn.fg7.77.192.IP)
[17:56:44] <flan3002> I suppose that works here, but certainly not if I had more features, right? I'm going to stub this for now.
[17:56:58] *** Joins: GBGamer (npm@moz-urd.pod.125.50.IP)
[17:57:02] <flan3002> (Although that will make it fail at runtime, which is eww)
[17:57:08] *** Quits: jbcurtin (jbcurtin@moz-lskisb.LosAngeles1.Level3.net) (Ping timeout: 121 seconds)
[17:57:21] <GBGamer> anyone know a good way to print out the linker args that rustc uses?
[17:57:29] <niconii> flan3002: well, you could make two versions of function_that_depends_on_x(), with one that does nothing
[17:57:57] <flan3002> niconii - That's what I mean by stubbing the function, except that I panic when it's used.
[17:58:13] <niconii> flan3002: ahh
[17:58:26] *** Quits: spider-mario (spidermario@moz-coblcf.fbx.proxad.net) (Ping timeout: 121 seconds)
[17:58:40] <terpstra> where can i find the RFC for "impl Trait" ? i've seen it mentioned in several places
[17:59:24] <mbrubeck> GBGamer: rustc -Z print-link-args
[17:59:38] <mbrubeck> GBGamer: Also, I sometimes find it useful to replace the linker with a wrapper script.
[17:59:41] *** Joins: newbiz (newbiz@moz-9m0cr9.fbxo.proxad.net)
[17:59:56] *** Joins: agjacome_ (agjacome@moz-k3frpn.dynamic.jazztel.es)
[18:00:01] *** Quits: agjacome (agjacome@moz-5d00gg.dynamic.jazztel.es) (Ping timeout: 121 seconds)
[18:00:11] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Ping timeout: 121 seconds)
[18:00:13] <GBGamer> mbrubeck: thanks, I'm currently doing that
[18:00:14] <mbrubeck> terpstra: The `-> impl Trait` return type syntax?
[18:00:23] <GBGamer> (well, I'm replacing it with make, anyways)
[18:00:27] *** Quits: aravindavk (aravinda@moz-c0q.pv0.172.122.IP) (Quit: Konversation terminated!)
[18:00:29] *** Joins: Savago (Savago@moz-8hd.3b6.246.162.IP)
[18:00:41] *** dmac_ is now known as dmac
[18:00:45] <terpstra> mbrubeck, i think that's what people are referring to, yes
[18:01:11] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[18:01:14] *** Joins: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net)
[18:01:16] <AeroNotix> rustbyexample has totally fubar'd their SEO
[18:01:24] *** Joins: jbcurtin (jbcurtin@moz-lskisb.LosAngeles1.Level3.net)
[18:01:26] *** Quits: dawehner (quassel@moz-tobu60.hsi4.kabel-badenwuerttemberg.de) (Connection closed)
[18:01:48] <mbrubeck> terpstra: https://github.com/rust-lang/rfcs/pull/105
[18:01:59] <terpstra> mbrubeck, great. thanks!
[18:02:31] <AeroNotix> Why doesn't Rust automatically derive things like Debug? You can override and then not have to have the derive on trivial things?
[18:02:33] <AeroNotix> I don't get it.
[18:02:42] <terpstra> mbrubeck, oooh. now i see what the fuss is all about. i want this feature too!
[18:02:53] <flan3002> AeroNotix - Lots of overhead and bloated executables maybe?
[18:02:54] *** Joins: dalarmmst (dalarmmst@moz-mb21j4.bredband.comhem.se)
[18:03:01] <mbrubeck> AeroNotix: deriving actually generates code, which then gets compiled
[18:03:02] *** Joins: zaeleus (zaeleus@moz-r5abra.cpe.cableone.net)
[18:03:03] *** Quits: dalarmmst (dalarmmst@moz-mb21j4.bredband.comhem.se) (Quit: Leaving)
[18:03:05] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[18:03:06] *** Joins: dalarmmst (dalarmmst@moz-mb21j4.bredband.comhem.se)
[18:03:17] <flan3002> AeroNotix - And some stuff may intentionally miss those.
[18:03:22] <jarrednicholls> flan3002: Haven't attempted anything, just analyzing before diving in.  I suppose it would work without any problems.
[18:03:24] <mbrubeck> and my compile times are already too damn high. :D
[18:03:26] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Connection closed)
[18:03:28] *** Joins: acrichto (acrichto@moz-u3dg2t.sfo1.mozilla.com)
[18:03:29] *** ChanServ sets mode: +o acrichto
[18:03:29] *** Quits: andresv (textual@moz-l382a3.cable.starman.ee) (Quit: My Mac has gone to sleep. ZZZzzz…)
[18:03:32] <AeroNotix> flan3002: mbrubeck ACK, makes sense.
[18:03:37] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[18:03:55] <flan3002> How do I actually branch on the presence of features?
[18:04:02] *** Joins: zettablade (zettablade@moz-ch1.8gp.39.134.IP)
[18:04:04] *** Quits: scientes (scientes@moz-l6hdmu.wa.comcast.net) (Ping timeout: 121 seconds)
[18:04:09] *** Joins: errordeveloper (ilya@moz-rbv.o6q.208.90.IP)
[18:04:21] *** Joins: dinfuehr (dinfuehr@moz-j5sgb8.highway.telekom.at)
[18:04:25] *** Quits: abhi (Adium@moz-f0u.cn5.51.106.IP) (Quit: Leaving.)
[18:04:26] <mbrubeck> flan3002: cfg!(feature="foo")
[18:04:26] <flan3002> Because what I'm doing executes the same branch regardless of what features I'm using...
[18:04:50] *** darkowlzz is now known as darkowlzz|afk
[18:05:01] <mbrubeck> (assuming you are talking about Cargo features)
[18:05:17] *** Joins: rbranson (rbranson@moz-i7m.9o0.201.199.IP)
[18:05:23] *** Joins: misheska (misheska@moz-p5lb3k.6pqu.c3mb.0149.2620.IP)
[18:05:24] <flan3002> mbrubeck - Oh, I was using cfg!(features = "ssl") :)
[18:05:29] <flan3002> Thanks! :)
[18:05:56] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[18:06:54] *** Joins: hjr3 (hradtke@moz-dmp.av4.169.69.IP)
[18:06:56] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[18:06:58] *** Quits: ascarter_ (ascarter@moz-705hf8.wa.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[18:07:23] *** Quits: borromakot (Adium@moz-d7t.h3t.104.38.IP) (Quit: Leaving.)
[18:08:25] *** Quits: dinfuehr (dinfuehr@moz-j5sgb8.highway.telekom.at) (Ping timeout: 121 seconds)
[18:08:51] *** Joins: kazimuth (james@moz-8t3.4c1.189.18.IP)
[18:09:13] *** Joins: Hannibal_Smith (nico@moz-l9aupr.retail.telecomitalia.it)
[18:09:37] *** Quits: kazimuth (james@moz-8t3.4c1.189.18.IP) (Connection closed)
[18:10:07] *** Joins: Shackra (Jorge@moz-7bh.ng6.177.186.IP)
[18:10:32] *** Joins: agjacome (agjacome@moz-k3frpn.dynamic.jazztel.es)
[18:10:56] <terpstra> wow. returning unboxed traits would reduce the line count of my BWT code by 33%. that's some serious convenience.
[18:11:15] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[18:11:48] <terpstra> i have to make named structs with explicit state that impl Iterator + new + next... the 6 line variation to return an Iterator directly would be so fine.
[18:12:01] <nwin> I’m always amazed by how slow unoptimized Rust can be…
[18:12:13] *** Quits: mkpankov (user@moz-avu.k4a.16.195.IP) (Ping timeout: 121 seconds)
[18:12:29] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[18:12:30] *** Joins: mkpankov (mkpankov@moz-avu.k4a.16.195.IP)
[18:12:31] *** Joins: iamtyler (Adium@moz-gu5.i3g.162.66.IP)
[18:12:38] *** darkowlzz|afk is now known as darkowlzz
[18:12:41] *** Joins: esgeh (sg@moz-a7j.cns.76.134.IP)
[18:12:45] *** Quits: marsel (user@moz-rh7.06n.234.188.IP) (Ping timeout: 121 seconds)
[18:12:46] *** Quits: tamird (textual@moz-lje.m54.130.157.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[18:12:46] *** Quits: iamtyler (Adium@moz-gu5.i3g.162.66.IP) (Quit: Leaving.)
[18:12:59] *** Joins: choplin (choplin@moz-b1oa9n.zaq.ne.jp)
[18:13:09] *** Joins: areski (areski@moz-aehvq9.user.ono.com)
[18:13:14] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[18:13:20] *** Quits: agjacome_ (agjacome@moz-k3frpn.dynamic.jazztel.es) (Ping timeout: 121 seconds)
[18:14:41] *** Quits: frankmcs_ (frankmcsher@moz-uivq2j.dyn.telefonica.de) (Connection closed)
[18:15:07] *** Quits: dalarmmst (dalarmmst@moz-mb21j4.bredband.comhem.se) (Ping timeout: 121 seconds)
[18:15:25] *** Joins: Gabriel_7 (Gabriel@moz-s16huc.mtgr.92aj.0e35.2a01.IP)
[18:15:51] *** Joins: Fiveside (fiveside@moz-t2eatg.vsp.com)
[18:17:01] *** Quits: choplin (choplin@moz-b1oa9n.zaq.ne.jp) (Ping timeout: 121 seconds)
[18:17:09] *** Quits: rovar (rovar@moz-96effg.dyn.optonline.net) (NickServ (RECOVER command used by rovar_))
[18:17:09] *** rovar_ is now known as rovar
[18:17:21] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Connection closed)
[18:17:22] *** Joins: rovar_ (rovar@moz-96effg.dyn.optonline.net)
[18:18:23] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[18:19:19] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Connection closed)
[18:19:19] *** Joins: borromakot (Adium@moz-rdo.h3t.104.38.IP)
[18:20:24] *** Joins: andresv (textual@moz-l382a3.cable.starman.ee)
[18:20:59] *** Quits: zettablade (zettablade@moz-ch1.8gp.39.134.IP) (Connection closed)
[18:21:15] *** Joins: frankmcsherry (frankmcsher@moz-uivq2j.dyn.telefonica.de)
[18:21:22] *** Joins: zettablade (zettablade@moz-0ed.glr.56.172.IP)
[18:21:47] *** Joins: qwerty_nor (Thunderbird@moz-vuo.d5a.248.5.IP)
[18:21:50] <posix4e> Man nim's gc is soo cool
[18:21:58] <posix4e> they totally did it in a great way
[18:22:04] <posix4e> Still am glad that rust doesn't gc everything
[18:22:20] <posix4e> But if we want an explicit one, there's a lot to learn/steal there
[18:22:21] *** Quits: zettablade (zettablade@moz-0ed.glr.56.172.IP) (Connection closed)
[18:22:24] *** Joins: zettablade (zettablade@moz-ch1.8gp.39.134.IP)
[18:23:03] <Hannibal_Smith> posix4e, pcwalton has a really different view on that topic
[18:23:21] *** Joins: brson (brson@moz-l8ebtf.sfo1.mozilla.com)
[18:23:21] *** ChanServ sets mode: +ao brson brson
[18:23:22] <posix4e> Ooh... wow ! Love to hear it
[18:23:35] <posix4e> I cna tell you that the fact they have some realtime-ish collecting behavior is welcome
[18:23:44] <pcwalton> it's not real-time
[18:23:48] <pcwalton> and it's not thread-safe
[18:24:02] * borromakot grabs his popcorn
[18:24:04] <posix4e> The realtime gc-ness comes from not scanning and leaking a ton
[18:24:07] <posix4e> right?
[18:24:14] <pcwalton> the real-time-GC-ness comes from not being thread-safe
[18:24:23] <pcwalton> back in Java's day "not thread safe" was called "broken" :)
[18:25:27] <pcwalton> also, deferred reference counting when compiling to C means you're forced to use conservative GC, which is just bad
[18:25:39] <pcwalton> I would have just used the Boehm GC, it's better
[18:26:03] *** Joins: mkpankov` (mkpankov@moz-es9.u5t.23.84.IP)
[18:26:10] *** Joins: agjacome_ (agjacome@moz-s962bi.dynamic.jazztel.es)
[18:26:12] *** darkowlzz is now known as darkowlzz|afk
[18:26:21] *** Quits: frankmcsherry (frankmcsher@moz-uivq2j.dyn.telefonica.de) (Connection closed)
[18:26:44] *** Joins: akiss (akiss@moz-6jk4dr.pool.digikabel.hu)
[18:27:11] *** Joins: nham (nham@moz-755.bu3.214.98.IP)
[18:28:02] <HollyRain> can I have a generic which only allows some data types. I have a struct field to store the default field for data types like String, u*, i*
[18:28:11] *** Joins: carllerche_ (carllerche@moz-8h4.7g2.246.98.IP)
[18:28:14] *** Quits: carllerche_ (carllerche@moz-8h4.7g2.246.98.IP) (Client exited)
[18:28:18] <HollyRain> s/the default field/the default value
[18:28:58] *** Quits: agjacome (agjacome@moz-k3frpn.dynamic.jazztel.es) (Ping timeout: 121 seconds)
[18:29:21] *** Quits: mkpankov (mkpankov@moz-avu.k4a.16.195.IP) (Ping timeout: 121 seconds)
[18:29:23] <mbrubeck> HollyRain: Yes, by using <T: MyTrait> and then implementing MyTrait for just those types.
[18:29:30] <mbrubeck> (Or use an existing trait if there's a suitable one.)
[18:29:35] *** Joins: Stebalien (Stebalien@moz-pqe.qkj.56.172.IP)
[18:29:37] <HollyRain> ok, thx
[18:29:41] <posix4e> ooh wow, that's right they aren't tracing so it's conservative
[18:29:54] <posix4e> I guess those are better now that it isn't 64bit but then it must leak like a sieve
[18:29:59] <posix4e> err
[18:30:01] <posix4e> it is 64bit
[18:30:18] *** Joins: brendanc (brendan@moz-760v6s.cs.ubc.ca)
[18:30:18] *** Joins: marsel (user@moz-rh7.06n.234.188.IP)
[18:30:27] <posix4e> pcwalton: ever look at how the azul gc gets its magic done?
[18:30:43] <pcwalton> yes… with a kernel extension :)
[18:31:31] *** Parts: jarrednicholls (uid19542@moz-s0evcl.uxbridge.irccloud.com) ("")
[18:31:37] *** Quits: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net) (Client exited)
[18:32:00] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Connection closed)
[18:32:06] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[18:32:58] *** Joins: kazagistar (kazagistar@moz-1jum1i.client.bresnan.net)
[18:32:59] *** darkowlzz|afk is now known as darkowlzz
[18:33:04] <posix4e> pcwalton: I think it's in mainline linux now though
[18:33:16] <posix4e> pcwalton: and it's not for what you expect, and I am not convinced it's totally required
[18:33:21] <posix4e> anymore
[18:33:35] *** Quits: ismaelga (ismaelga@moz-lmk.cu2.251.188.IP) (Connection closed)
[18:33:45] <pcwalton> anyway, it also has lower throughput than the standard HotSpot collector
[18:33:55] <pcwalton> there's no silver bullet when it comes to GC
[18:34:03] *** Quits: brendanc (brendan@moz-760v6s.cs.ubc.ca) (Connection closed)
[18:34:16] <posix4e> That's for sure true, pcwalton, but the tradeoff is configurable 
[18:34:33] *** Joins: dalarmmst (dalarmmst@moz-mb21j4.bredband.comhem.se)
[18:34:34] <posix4e> The big problem isn't just throughput but also just memory use
[18:34:49] <posix4e> I can tell you there's not a java server shop that wouldn't make the trade if it was free
[18:34:50] *** Joins: brendanc (brendan@moz-v9b.spj.162.198.IP)
[18:34:55] *** Joins: daschl (Adium@moz-oirn1i.vie.surfer.at)
[18:34:59] *** Joins: agjacome (agjacome@moz-gj7nc0.dynamic.jazztel.es)
[18:35:11] <posix4e> Not trying to push for GC in rust, but I can tell you long GC pauses are just ..... uhgh 
[18:35:29] <posix4e> I wonder when GC is explicit how things change though
[18:35:50] <pcwalton> I'm not opposed to GC in Rust… I mean, we already have it in Servo
[18:35:51] <posix4e> No silver bullet, but can we reframe the problem now that everything isn't gc. What do we really want GC for?
[18:35:59] <posix4e> interesting tell me more
[18:36:02] <pcwalton> but I do think that we should almost make the exact opposite decision that Nim did on every turn
[18:36:09] <posix4e> nice
[18:36:20] *** Joins: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net)
[18:36:24] <posix4e> You just made me laugh spit my coffee
[18:36:39] <pcwalton> e.g. precise GC instead of conservative, thread-safe GC, pure tracing instead of reference counting
[18:36:43] *** Joins: eerie (Mibbit@moz-rll6i6.red.bezeqint.net)
[18:36:54] <pcwalton> generational, incremental, and concurrent
[18:37:16] *** Quits: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[18:37:26] <pcwalton> whereas Nim's is conservative, thread-unsafe, reference counting, non-generational, non-incremental, and single-threaded
[18:37:29] *** Quits: smohan (smohan@moz-m6j.f0d.244.121.IP) (Connection closed)
[18:37:30] *** Joins: smohan (smohan@moz-m6j.f0d.244.121.IP)
[18:37:30] <posix4e> So what do you think about the hypothesis that the stop the world events are only going to get worse for Java/Go style colelctors?
[18:37:35] *** Quits: agjacome_ (agjacome@moz-s962bi.dynamic.jazztel.es) (Ping timeout: 121 seconds)
[18:37:57] <posix4e> pcwalton: ooh i know all of that stuff. I never studied gc theory in college but I had to learn it all because I did real stuff with Java and go. Which is kinda the problem
[18:38:20] <pcwalton> might be true, obviously Azul's GC is very nice if you care a lot about that in a many-CPU scenario
[18:38:21] <posix4e> Leaking is bad, Latency is bad, but everyone assumes everything is going to have a bit of overhead
[18:38:30] <seanmonstar> shucks, i was working on a mime! macro, but i cant have mime!(*/*) since it parses as a block comment
[18:38:41] <posix4e> I think predictability is the big deal
[18:39:54] <eerie> question: what are the use cases of default method impl's in traits?
[18:40:01] *** Joins: Jesse (jruderman@moz-7dv97b.ujol.1ibb.0101.2620.IP)
[18:40:03] *** Joins: agjacome_ (agjacome@moz-3rmd6o.dynamic.jazztel.es)
[18:40:03] <GBGamer> seanmonstar: what are you attempting to do?
[18:40:12] *** Quits: agjacome (agjacome@moz-gj7nc0.dynamic.jazztel.es) (Ping timeout: 121 seconds)
[18:40:16] <GBGamer> eerie: for example, neq
[18:40:26] <GBGamer> Usually, it's just !eq(a, b)
[18:40:27] <seanmonstar> GBGamer: i just showed
[18:40:28] <posix4e> pcwalton: what's the deal with servo's gc? Did you just keep the old one from rust?
[18:40:35] <pcwalton> it uses the SpiderMonkey GC
[18:40:48] <pcwalton> and some RAII hacks to achieve precise collection
[18:40:50] <seanmonstar> pcwalton: servo only have a GC with stuff coming from the dom
[18:40:51] <posix4e> wow didn't expect that!
[18:40:52] <GBGamer> eerie: although sometimes: it's not that
[18:41:04] <posix4e> that's bloody clever
[18:41:06] <GBGamer> seanmonstar: wait, what? what would that do?
[18:41:12] *** Quits: brson (brson@moz-l8ebtf.sfo1.mozilla.com) (Ping timeout: 121 seconds)
[18:41:24] <seanmonstar> GBGamer: make a Mime representing "*/*"
[18:41:24] *** Joins: forgottenone (forgottenon@moz-d2p.26m.45.92.IP)
[18:41:40] <GBGamer> seanmonstar: is there something I'm missing here?
[18:41:47] <GBGamer> What is a mime?
[18:41:51] <terpstra> without using dynamic dispatch, is there any way to improve this code? <http://is.gd/CqZjE4>
[18:41:53] <seanmonstar> media type?
[18:42:02] <GBGamer> oh, right, cool
[18:42:08] <seanmonstar> GBGamer: text/html, application/json, image/*
[18:42:10] <GBGamer> there was something I was missing
[18:42:25] <GBGamer> could you make it a string?
[18:42:34] <seanmonstar> not really :(
[18:42:40] <GBGamer> why not?
[18:42:53] <GBGamer> (or are you matching on it?)
[18:42:59] <seanmonstar> cause the macro also works with mime!(Application/Json)
[18:43:06] <seanmonstar> and friends
[18:43:12] <GBGamer> Couldn't you make it all a string?
[18:43:22] <mbrubeck> eerie: If you know languages in the C++ or Java "family" -- any time you might have a virtual method that can be overridden in a subclass.
[18:43:54] <seanmonstar> GBGamer: not without parsing the string, which would prevent the macro from being able to create consts
[18:44:31] <seanmonstar> i'll have to do something like mime!(Star/Star), which isnt horrible, but i'd rather */*
[18:44:40] <GBGamer> ah; what about either 1) a compiler plugin, or 2) that^?
[18:45:09] *** Quits: shahn (Sebastian@moz-usvpet.clients.your-server.de) (Quit: hopefully back soon....)
[18:45:13] *** Joins: bcasiello (Thunderbird@moz-tq6.nsv.22.72.IP)
[18:45:29] <seanmonstar> 1) mime is a crate that builds on beta, cant take that away :) 2) it works, just uglier
[18:45:37] <GBGamer> ah, okay
[18:45:38] *** Quits: bkearns (Adium@moz-rudtng.static.wiline.com) (Connection closed)
[18:45:43] <GBGamer> well, sorry :/
[18:46:00] <eerie> GBGamer: in case of neq, you must implement at least one of the methods, otherwise you get into an endless loop. but nothing prevents you from implementing them both... 
[18:46:06] *** Joins: Mtorp (Mibbit@moz-t1t.2tu.114.188.IP)
[18:46:12] <GBGamer> eerie: exactly
[18:46:19] <duncan> seanmonstar: i know that '*' is the convention with mimetypes, but rustaceans are used to `_` as the 'match anything' operator, right? Why not `mime!(_/_)` :)
[18:46:30] <GBGamer> So you implement eq, then you can choose to, or not to, implement neq
[18:46:32] *** Joins: tcard (tcard@moz-jdrdbk.ddns.jazztel.es)
[18:46:40] <eerie> GBGamer: seems that something is missing, in this case. you should be forced to implement only 1 of them
[18:46:47] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[18:46:48] <seanmonstar> duncan: kinda looks like a butt :)
[18:46:55] *** Joins: nico (nico@moz-n8jedu.dip0.t-ipconnect.de)
[18:46:58] <GBGamer> why?
[18:47:00] *** Quits: skade (skade@moz-0djl38.boh1-r2.syseleven.net) (Connection closed)
[18:47:03] *** Joins: JosiahOne1 (Thunderbird@moz-ub5.sco.30.4.IP)
[18:47:05] *** suvash_away is now known as suvash
[18:47:06] <duncan> drats...ok, `mime![_/_]` :)
[18:47:22] <Mtorp> Noob here: What primtives can i use to index a vector, and why can i not use for example u32?
[18:47:22] *** Quits: dstrbad (dstrbad@moz-8d7dvf.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[18:47:22] <GBGamer> why not allow that power?
[18:47:31] <eerie> mbrubeck: but in C++/Java, you can inherit struct fields too, no?
[18:47:35] *** Joins: spider-mario (spidermario@moz-coblcf.fbx.proxad.net)
[18:47:37] <seanmonstar> Mtorp: you want usize
[18:47:39] *** Joins: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr)
[18:47:41] *** Quits: terpstra (terpstra@moz-290p6a.gsi.de) (Quit: Leaving)
[18:47:47] *** Quits: JosiahOne (Thunderbird@moz-f2hp7h.biz.rr.com) (Ping timeout: 121 seconds)
[18:47:52] <filsmick> is it possible to use logical operators in an if let?
[18:47:58] <Mtorp> Okay thanks
[18:48:00] *** Joins: frankmcsherry (frankmcsher@moz-uivq2j.dyn.telefonica.de)
[18:48:08] *** Joins: skade (skade@moz-0djl38.boh1-r2.syseleven.net)
[18:48:11] *** Joins: yorickpeterse (yorickpeter@moz-kpg9ml.compute.amazonaws.com)
[18:48:33] <seanmonstar> Mtorp: on 64bit machines, a u32 cant represent indices big enough for possible vector sizes
[18:48:43] <filsmick> I'd like to do something like "if lines.next() exists and is not equal to """ (empty string)
[18:49:04] <filsmick> but I can't seem to do that without nesting if statements or using match
[18:49:08] <seanmonstar> Mtorp: tho if you're certain that your number is smallish, you can likely do `x as usize` safely
[18:49:27] *** bentley is now known as bentley|away
[18:49:39] *** Joins: JosiahOne (Thunderbird@moz-f2hp7h.biz.rr.com)
[18:49:48] <mbrubeck> eerie: Yeah, there's no perfect analog of subclassing in Rust. But I find many of the use cases are similar.
[18:49:56] <Mtorp> Okay i see, thank you for the explanation
[18:50:30] <mbrubeck> filsmick: No, it's not possible.  You can use a `match` instead.
[18:50:39] *** Quits: arunmk (arun@moz-vfv9bl.ca.comcast.net) (Client exited)
[18:50:42] <filsmick> mbrubeck: I did it using a match but it's very ugly
[18:50:57] *** Quits: nico (nico@moz-n8jedu.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[18:50:57] <filsmick> mbrubeck: https://gist.github.com/anonymous/ec7a7f2332f13a0d02d7
[18:51:04] <duncan> i wrote some go code this weekend, and the inability to have default methods for interfaces really irked me
[18:51:05] *** Quits: JosiahOne1 (Thunderbird@moz-ub5.sco.30.4.IP) (Ping timeout: 121 seconds)
[18:51:13] *** Joins: asQuirre_ (asQuirreL@moz-ro1qqu.ox.ac.uk)
[18:51:37] <filsmick> mbrubeck: oh, found a way, it's possible to drop the {} around the match
[18:51:38] <meh> how do I convert an &[u8] to an &str?
[18:51:47] <talchas> filsmick: I think match foo { Some(x) if x != "" => whatever, None => () } works
[18:51:55] <duncan> and you can't have an interface type be the receiver for a method, so it was even more irksome
[18:52:10] <meh> ah there we go, std::str::from_utf8
[18:52:28] <filsmick> talchas: how about https://gist.github.com/anonymous/fbae825ad7ef3bf459dc ?
[18:53:00] <AeroNotix> anyone know how I'd read 128 bits using https://github.com/BurntSushi/byteorder ?
[18:53:09] *** Quits: khades (Thunderbird@moz-u45.3vk.74.212.IP) (Client exited)
[18:53:12] <talchas> filsmick: I mean, I think that works too?
[18:53:20] *** Joins: khades (Thunderbird@moz-u45.3vk.74.212.IP)
[18:53:26] <filsmick> talchas: yeah it probably works, I'll use your solution and drop the else if, using just else
[18:53:27] <talchas> but if match { true / false} seems ugly
[18:53:30] <AeroNotix> The API suggests it has a https://github.com/BurntSushi/byteorder/blob/master/src/new.rs#L150-L154
[18:53:34] <filsmick> talchas: you're 100% right
[18:53:48] <AeroNotix> but it returns a Result(u64) not the underlying bytes, any ideas?
[18:53:54] <yorickpeterse> Suppose I have code similar to this: http://is.gd/jInniZ (link to play.rust-lang.org), this currently produces an error such as "cannot borrow immutable local variable `something` as mutable". How could I best work around this? The idea is to have one method return a reference and another method use said reference
[18:54:04] *** Quits: agjacome_ (agjacome@moz-3rmd6o.dynamic.jazztel.es) (Quit: leaving)
[18:54:05] *** Quits: asQuirreL (asQuirreL@moz-ro1qqu.ox.ac.uk) (Ping timeout: 121 seconds)
[18:54:14] <yorickpeterse> (this would allow the caller to first do something with said reference before passing it to the 2nd method)
[18:54:34] *** Quits: marcusklaas (marcus@moz-0ol9oe.chello.nl) (Ping timeout: 121 seconds)
[18:54:39] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[18:54:50] *** Joins: marcusklaas (marcus@moz-0ol9oe.chello.nl)
[18:54:50] <mbrubeck> filsmick: I'd probably write something like https://gist.github.com/mbrubeck/a36b5198e7e7b9046802
[18:54:52] <yorickpeterse> Making "something" mutable in turn spits out another range of errors, so probably I'm missing something
[18:54:55] <talchas> AeroNotix: I think you'd have to to it by hand like the various implementations
[18:55:07] *** Joins: cjwelborn (cjwelborn@moz-np6hed.al.charter.com)
[18:55:14] *** Quits: giucam (giucam@moz-iv0nnc.bb.dnainternet.fi) (Connection closed)
[18:55:28] *** Joins: giucam (giucam@moz-iv0nnc.bb.dnainternet.fi)
[18:55:29] <talchas> it doesn't implement read_u128
[18:55:32] <filsmick> mbrubeck: that's exactly what I did based on talchas's suggestion :p thanks to you two
[18:55:42] <talchas> (because there's no u128 type)
[18:55:53] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Connection closed)
[18:56:05] <AeroNotix> cool, I'll try something manual then
[18:56:15] *** Joins: espadrine (tyl@moz-l019mn.fbx.proxad.net)
[18:56:21] *** Quits: mib_zilw1v (Mibbit@moz-dc8.dj1.114.78.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:56:32] <panicbit> How can I improve the type casting situation here? I want to avoid casting the usize x and y to isize and back to usize. In practice this is obviously not a problem but I can imagine a case where I'd want to cast from e.g. a u8 to i8 and back (which could very well be probelmatic). http://is.gd/KJhfym
[18:57:06] <mbrubeck> yorickpeterse: So, this is unsafe because `bar` could modify `something.some_vector`, which could make `foo` a dangling pointer.
[18:57:11] <panicbit> (Though, in the case of u8 and i8 I could just cast to bigger types)
[18:57:13] <AeroNotix> talchas: what about: https://doc.rust-lang.org/std/io/trait.Read.html#method.take
[18:57:33] <yorickpeterse> mbrubeck: but "bar" never receives a mutable reference
[18:57:58] <yorickpeterse> or does the explicit mutable reference in "foo" make "something" (in main()) also mutable?
[18:58:03] <mbrubeck> oh wait, I mixed up which one was mutable
[18:58:03] <panicbit> I'm probably just caring too much
[18:58:35] <yorickpeterse> basically what I'm trying to do is: 1) create an instance of some struct 2) push a value in a vector and return a reference 3) use said reference in another method
[18:58:44] <yorickpeterse> (all in the same struct)
[18:59:08] <yorickpeterse> one solution would be to not use references, but that would lead to copying
[18:59:17] <mbrubeck> yorickpeterse: Your value needs to be mutable, but `fn foo` as written does not need to be: http://is.gd/zEXdfy
[18:59:30] <mbrubeck> yorickpeterse: But if you want it to mutate *and* return a reference, then it does...
[18:59:43] <yorickpeterse> mbrubeck: errrr my bad, in my actual code I push something into the vector as well
[18:59:51] <yorickpeterse> lemme update the link for that
[19:00:02] *** Joins: nott (nott@moz-to4.06o.57.86.IP)
[19:00:16] <talchas> AeroNotix: you could use that, or just loop around read, or whatever
[19:00:28] <AeroNotix> cool, I'll give it a go
[19:00:44] <yorickpeterse> http://is.gd/bIurE6 basically this
[19:01:00] *** Quits: rbranson (rbranson@moz-i7m.9o0.201.199.IP) (Quit: Computer has gone to sleep.)
[19:01:35] *** Joins: dstrbad (dstrbad@moz-8d7dvf.dsl.iskon.hr)
[19:01:41] <filsmick> how would you use a mutex on self from a method?
[19:02:02] *** Quits: robyoung (uid12953@moz-mj1ko8.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[19:02:06] <filsmick> I mean, you have a struct, and you want to access it from different threads from the inside (its methods) and the outside (its public fields)
[19:02:26] <filsmick> are you forced to use plain functions which take a mutex, instead of methods?
[19:02:37] <bluss> filsmick: no, you're not forced to that
[19:02:41] <mbrubeck> yorickpeterse: The easiest solution might be to split `foo` into two methods, one that mutates and one that returns a reference: http://is.gd/Fascr9
[19:02:48] <filsmick> bluss: meh :(
[19:02:54] <filsmick> bluss: thanks
[19:03:36] <phaylon> filsmick: you can always wrap the mutex in another type and provide an explicit interface
[19:03:50] *** Quits: cdidd (cdidd@moz-llmnnu.broadband.corbina.ru) (A TLS packet with unexpected length was received.)
[19:03:51] <yorickpeterse> mbrubeck: hmmm interesting, how come the compiler _does_ allow this?
[19:04:02] <phaylon> I like that because I then have a nice place for blocking/panicing/option-returning variants
[19:04:02] <filsmick> phaylon: it's a bit cumbersome, but glad to know it's possible, good idea
[19:04:06] *** Parts: duncan (paul@moz-dst.ms6.225.173.IP) ()
[19:04:31] *** Joins: agjacome (agjacome@moz-3rmd6o.dynamic.jazztel.es)
[19:04:36] <mbrubeck> yorickpeterse: Because the mutable borrow from `self.foo1` no longer has its lifetime tied to the reference stored in the local variable `foo`
[19:04:38] *** Quits: agjacome (agjacome@moz-3rmd6o.dynamic.jazztel.es) (Quit: leaving)
[19:04:58] <yorickpeterse> hmmm
[19:05:37] *** Joins: Matthias247 (Miranda@moz-49li60.hsi14.kabel-badenwuerttemberg.de)
[19:05:40] *** Quits: skade (skade@moz-0djl38.boh1-r2.syseleven.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:05:43] *** Quits: presidentJFK (Mibbit@moz-3ob.7kg.192.66.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:05:57] *** Joins: tamird (textual@moz-69r.lnk.116.63.IP)
[19:05:57] <yorickpeterse> granted this particular pattern feels a bit icky in the first place, but I'll probably bump into this again in the future
[19:06:05] *** Quits: Guest74 (textual@moz-il1.n6s.204.65.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[19:06:10] <mbrubeck> Yeah, I'm trying to think if there's any more elegant fix.
[19:06:14] *** Quits: zettablade (zettablade@moz-ch1.8gp.39.134.IP) (Connection closed)
[19:06:18] *** Joins: jviereck (Adium@moz-rslgsr.dclient.hispeed.ch)
[19:06:18] *** Joins: zettablade (zettablade@moz-ch1.8gp.39.134.IP)
[19:06:26] *** Quits: zettablade (zettablade@moz-ch1.8gp.39.134.IP) (Quit: AndroIRC - Android IRC Client ( http://www.androirc.com ))
[19:06:32] *** Joins: zettablade (zettablade@moz-ch1.8gp.39.134.IP)
[19:06:40] <yorickpeterse> The context is that I'm writing a VM (for MyFirstProgrammingLanguage). There's a VM struct/impl which has a method to start a thread. The idea is to create a thread, store it in a vector (in the VM struct) and return a reference so the caller can do some stuff with it 
[19:06:46] <yorickpeterse> (e.g. run some actual code in said thread)
[19:07:14] <yorickpeterse> Granted it's probably nicer to pass a closure to the method that starts a thread so that the caller doesn't need a reference in the first place
[19:07:14] <Mtorp> Are there some kind of type_of operator in Rust?
[19:07:23] <yorickpeterse> so you
[19:07:25] <yorickpeterse> darn it
[19:07:31] *** Joins: schnozzle (Mibbit@moz-i7cb3r.fios.verizon.net)
[19:07:41] <yorickpeterse> * so you'd get something like vm.start_thread() || { ... run code here in a thread ... }
[19:07:45] <filsmick> Mtorp: what would you use it for?
[19:07:52] <flan3002> Mtorp - Not an operator, but http://doc.rust-lang.org/nightly/std/any/struct.TypeId.html#method.of .
[19:08:01] *** Joins: cdidd (cdidd@moz-7sa7fj.broadband.corbina.ru)
[19:08:27] <Mtorp> I was just messing around with some tests
[19:08:28] <filsmick> there's also http://doc.rust-lang.org/std/mem/fn.size_of.html for different purposes, but still useful to know
[19:08:42] <filsmick> found it by accident recently, it's nice to have that as a library
[19:09:06] *** Quits: bfops (uid58242@moz-e5u6m0.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[19:09:29] <filsmick> is it bad practice to use a Mutex in a field of a struct?
[19:09:40] *** Joins: warmwaffles (warmwaffles@moz-6gpnl1.res.rr.com)
[19:10:03] *** Quits: andresv (textual@moz-l382a3.cable.starman.ee) (Quit: My Mac has gone to sleep. ZZZzzz…)
[19:10:04] *** Joins: basicdays (basicdays@moz-vreeoj.cable.rcn.com)
[19:10:32] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[19:10:32] <yorickpeterse> mbrubeck: thanks for the help, I have some thinking to do to see if this is even how I'd want things
[19:10:48] *** Quits: dmac (dmac@moz-h4nvlf.ca.comcast.net) (Ping timeout: 121 seconds)
[19:11:01] *** Joins: ascarter (ascarter@moz-705hf8.wa.comcast.net)
[19:11:22] *** Joins: geri (Mibbit@moz-f1mmt1.highway.telekom.at)
[19:11:29] *** Joins: maximih (maximih@moz-0r2bjb.bredband.telia.com)
[19:11:37] <geri> hi how can i get a mut iterator? http://is.gd/fpVKFg
[19:11:52] <mbrubeck> geri: for i in &mut nums
[19:12:02] <filsmick> is it possible to pretty print a struct on several lines when using println!("{:?}", my_struct)?
[19:12:18] <bluss> filsmick: yes, {:#?}
[19:12:22] *** Quits: edbond (edbond@moz-8st.7gv.108.109.IP) (Quit: Leaving)
[19:12:26] <filsmick> bluss: yay! thanks
[19:12:28] <bluss> at least if it's a derive(Debug)
[19:12:36] <filsmick> it is
[19:12:48] <filsmick> where is this stuff documented? I remember seeing {:#?} once but can't recall where
[19:12:50] <bluss> # is "alternate version"
[19:12:57] *** Joins: Guest74 (textual@moz-il1.n6s.204.65.IP)
[19:13:01] <bluss> filsmick: std::fmt would be the place if it's documented
[19:13:08] *** Joins: Deffe (Mibbit@moz-tj3.1jn.66.77.IP)
[19:13:17] <filsmick> bluss: okay :)
[19:13:19] <bluss> filsmick: the derive thing uses the new (unstable) debug builder API
[19:13:24] *** Quits: maximih (maximih@moz-0r2bjb.bredband.telia.com) (Quit: Leaving...)
[19:13:26] <emilk> need help with Some-matching vs mutation: http://is.gd/OdhDIL
[19:13:38] *** Quits: Douman (Douman@moz-fsgfhk.dynamic.mts-nn.ru) (Connection closed)
[19:13:48] *** Joins: dmac (dmac@moz-4kcd1c.ca.comcast.net)
[19:13:56] <bluss> filsmick: being this http://doc.rust-lang.org/std/fmt/struct.Formatter.html#method.debug_struct
[19:14:06] <krdln> emilk: You should match on Some(ref mut value)
[19:14:16] <filsmick> bluss: I'll remember this next time
[19:14:17] *** Joins: larhat (Adium@moz-tb1ulb.cable.virginm.net)
[19:14:21] <geri> mbrubeck: cool! what is the & for?
[19:14:33] *** Joins: Douman (Douman@moz-fsgfhk.dynamic.mts-nn.ru)
[19:15:17] <Deffe> Hi all. I working whith realization fibonacci heap on rust. And i need to write test for this, give me advice what to use for test my solution?
[19:15:28] <filsmick> mbrubeck: it means it's a mutable reference
[19:15:40] <geri> Deffe: golden testset :)
[19:15:40] <filsmick> mbrubeck: you're modifying the original collection, not a copy of it
[19:15:47] *** Quits: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr) (Connection closed)
[19:15:55] *** Quits: stjahns (stjahns@moz-g9cif9.uws.ualberta.ca) (Connection closed)
[19:16:08] <bluss> Deffe: quickcheck is nice if you want fuzz testing
[19:16:09] *** Joins: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr)
[19:16:10] <geri> mbrubeck: do you talk to me?
[19:16:16] *** Joins: stjahns (stjahns@moz-g9cif9.uws.ualberta.ca)
[19:16:27] <geri> firemole: ?
[19:16:30] *** Quits: eevee (eevee@moz-snfe52.qot6.ifqp.0470.2001.IP) (Ping timeout: 121 seconds)
[19:16:42] *** Quits: CustosLimen (CustosLimen@moz-nb664a.mtnbusiness.co.za) (Ping timeout: 121 seconds)
[19:16:50] *** Quits: Rusky (russell@moz-4ggjij.slkc.qwest.net) (Quit: Leaving.)
[19:17:11] *** Joins: Slava_I (slava@moz-a7c.n0g.135.88.IP)
[19:17:22] <emilk> krdln: oh thanks... but that gives me a weird warning: http://is.gd/tk8DMo
[19:17:33] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[19:18:04] *** Joins: Rusky (russell@moz-4ggjij.slkc.qwest.net)
[19:18:08] <krdln> emilk: The warning is about "None" you assign it first
[19:18:33] <geri> emilk: i have a let mut nums.... cant you assue that the iterator will be mutable?
[19:18:46] <emilk> krdln: oh ofc
[19:18:50] <geri> let mut nums = vec![1, 2, 3]; for num in &mut nums {
[19:18:57] *** Quits: stjahns (stjahns@moz-g9cif9.uws.ualberta.ca) (Connection closed)
[19:19:04] <geri> why will i need to declare the iterator with mutable?
[19:19:04] *** Joins: stjahns (stjahns@moz-g9cif9.uws.ualberta.ca)
[19:19:15] <geri> shouldnt that be implicite?
[19:19:18] <bluss> geri: if you want to mutate through the element num
[19:19:28] *** Quits: Rusky (russell@moz-4ggjij.slkc.qwest.net) (Quit: Leaving.)
[19:19:32] <geri> but the num is already mut
[19:19:36] *** Joins: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net)
[19:19:39] *** Quits: eerie (Mibbit@moz-rll6i6.red.bezeqint.net) (Quit: http://www.mibbit.com ajax IRC Client)
[19:19:39] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[19:19:41] <bluss> geri: no. Read access is shared in Rust and mutable access is exclusive
[19:20:01] <bluss> geri: well I guess we could have rules for how to guess but Rust unfortunately requires you to be explicit
[19:20:23] *** Quits: hjr3 (hradtke@moz-dmp.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:20:31] <bluss> it makes a bit of sense since mutable access is checked differently, so might as well be explicit
[19:21:09] *** Quits: Mtorp (Mibbit@moz-t1t.2tu.114.188.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:21:39] *** Joins: sargas (sargas@moz-863roc.hfc.comcastbusiness.net)
[19:22:07] *** Quits: zettablade (zettablade@moz-ch1.8gp.39.134.IP) (Ping timeout: 121 seconds)
[19:22:14] *** Quits: warmwaffles (warmwaffles@moz-6gpnl1.res.rr.com) (Quit: welp)
[19:22:18] *** Joins: Rusky (Russell@moz-4ggjij.slkc.qwest.net)
[19:22:33] *** Joins: ajtulloch (ajtulloch@moz-cee.9o0.201.199.IP)
[19:23:10] *** Quits: proc (proc@moz-lggecs.dip0.t-ipconnect.de) (Quit: Gotta eat my pizza)
[19:23:41] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[19:24:14] *** Joins: zettablade (zettablade@moz-ch1.8gp.39.134.IP)
[19:24:38] *** Joins: eevee (eevee@moz-snfe52.qot6.ifqp.0470.2001.IP)
[19:25:24] *** Quits: kjanosz (kjanosz@moz-1ugcf5.eee8.gm72.41d0.2001.IP) (Ping timeout: 121 seconds)
[19:25:29] *** Joins: arunmk (arun@moz-vfv9bl.ca.comcast.net)
[19:25:34] *** Quits: Rusky (Russell@moz-4ggjij.slkc.qwest.net) (Connection closed)
[19:25:46] *** Quits: dstrbad (dstrbad@moz-8d7dvf.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[19:25:58] *** Joins: Rusky (Russell@moz-4ggjij.slkc.qwest.net)
[19:26:13] <Torkable> I'm going through the tutorial (http://doc.rust-lang.org/0.11.0/tutorial.html)
[19:26:22] *** Joins: TheLemonMan (lemonboy@moz-0909e0.50-151.net24.it)
[19:26:22] <Torkable> most of the examples do not compile
[19:26:31] <Torkable> is there a better tutorial out there somewhere
[19:26:32] <flan3002> Yeah. "0.11.0".
[19:26:36] <Murarth> Torkable: 0.11.0 is very, very old.
[19:26:47] <flan3002> http://doc.rust-lang.org/book/getting-started.html
[19:26:51] *** Joins: hjr3 (hradtke@moz-dmp.av4.169.69.IP)
[19:26:51] <Torkable> oh, that's the one linked on the site
[19:27:10] <Torkable> that book is very incomplete
[19:27:27] <Torkable> everything is coming soon
[19:27:45] <Murarth> Yes, but the core stuff is in the book and it's better up-to-date.
[19:27:59] <Diggsey> Torkable: where is the tutorial linked from?
[19:28:30] *** Quits: Rusky (Russell@moz-4ggjij.slkc.qwest.net) (Connection closed)
[19:28:43] *** Joins: logan_e (logan_e@moz-ltn.qg3.218.73.IP)
[19:28:52] <geri> bluss: http://is.gd/7fIdWN
[19:29:13] *** Joins: Brochacho (alberto@moz-q02.q5h.156.131.IP)
[19:29:31] *** Joins: tamird_ (textual@moz-69r.lnk.116.63.IP)
[19:29:35] *** Quits: tamird (textual@moz-69r.lnk.116.63.IP) (Quit: Textual IRC Client: www.textualapp.com)
[19:29:57] <bluss> geri: yes, that gives you two different iterators
[19:30:22] <bluss> geri: that's sugar for: for num in nums.iter_mut()  in the first and  for num in nums.into_iter() in the second
[19:30:36] *** suvash is now known as suvash_away
[19:30:39] <geri> does mut come with some performance decrease?
[19:31:16] <Torkable> ok so the book is the recommended way to learn?
[19:31:22] *** Quits: yorickpeterse (yorickpeter@moz-kpg9ml.compute.amazonaws.com) (Quit: WeeChat 1.0.1)
[19:31:23] <bluss> I don't think so. The &[T] and &mut [T] iterators are basically identical
[19:31:43] *** Joins: lov2cod (Adium@moz-13h1je.u583.gjp6.0119.2620.IP)
[19:32:09] <geri> but EVERYTHING is readable by default
[19:32:31] *** Joins: Rusky (russell@moz-4ggjij.slkc.qwest.net)
[19:32:32] *** Quits: stjahns (stjahns@moz-g9cif9.uws.ualberta.ca) (Connection closed)
[19:32:36] <flan3002> Is there any way to set/influence the local IP address of a std::net::TcpStream?
[19:32:47] *** Joins: sw17ch (sw17ch@moz-h64l8d.wa.comcast.net)
[19:32:53] *** Joins: stjahns (stjahns@moz-g9cif9.uws.ualberta.ca)
[19:32:55] *** Joins: rbranson (rbranson@moz-i7m.9o0.201.199.IP)
[19:33:16] <Murarth> Torkable: The book is good, maybe recent blog posts if you like to look for that kind of thing, and we on IRC are always here to help if you have questions. :D
[19:34:28] *** Quits: Stebalien (Stebalien@moz-pqe.qkj.56.172.IP) (Quit: leaving)
[19:34:29] <Torkable> Murarth: do you have any good blog posts, especially ones that involve small projects?
[19:34:39] *** Joins: scientes (scientes@moz-l6hdmu.wa.comcast.net)
[19:34:43] *** Quits: borromakot (Adium@moz-rdo.h3t.104.38.IP) (Quit: Leaving.)
[19:34:46] <Torkable> I saw a blog series a while back about building a toy web browser in rust
[19:34:56] <Torkable> might be good to work on while I learn
[19:35:04] <Murarth> Torkable: I would say blog posts are good for specific subjects. You should start with the book for the basics of the Rust language.
[19:35:12] <Torkable> k
[19:36:18] <geri> bluss: iter_mut() ... into_iter()  <--- i would name that iter()
[19:36:33] <mitsuhiko> does the regex crate not provide a way to find with offset?
[19:36:35] <bluss> geri: it has its reasons
[19:36:53] <bluss> geri: into_* is for methods that consume something by value and returns something different
[19:36:55] *** Quits: stjahns (stjahns@moz-g9cif9.uws.ualberta.ca) (Ping timeout: 121 seconds)
[19:37:01] <bluss> geri: .iter() and .iter_mut() on a vec only borrow it
[19:37:17] <bluss> geri: into_iter() takes the vec by value (takes ownership) and returns an iterator
[19:37:18] *** Quits: giucam (giucam@moz-iv0nnc.bb.dnainternet.fi) (Ping timeout: 121 seconds)
[19:37:33] <geri> bluss: so many rules :D
[19:37:34] *** Quits: GBGamer (npm@moz-urd.pod.125.50.IP) (Quit: Lost terminal)
[19:37:38] *** Joins: aisrael_ (aisrael@moz-f6q.anf.108.114.IP)
[19:38:06] <bluss> well the for loop tries to hide it. &vec -> iter(), &mut vec -> iter_mut(), vec -> into_iter()
[19:38:19] <kwantam> flan3002: Is it the case that you have a machine for which multiple network interfaces can route to the same destination address, and you want to force one interface to be selected?
[19:38:28] <bluss> because *all* go through the trait IntoIterator and its method IntoIterator::into_iter()
[19:38:33] *** Joins: borromakot (Adium@moz-rdo.h3t.104.38.IP)
[19:38:35] <bluss> when you give it to a for loop
[19:38:58] *** Quits: aisrael (aisrael@moz-f6q.anf.108.114.IP) (Ping timeout: 121 seconds)
[19:38:58] *** aisrael_ is now known as aisrael
[19:39:11] *** Joins: kieran (kieran@moz-c5gk5j.ihug.co.nz)
[19:39:29] <mitsuhiko> by find with offset i mean something like re.find(text, pos_of_last_match)
[19:40:10] *** Quits: mindtree (Mitch@moz-p8kk6g.iprimus.net.au) (Quit: leaving)
[19:40:10] <flan3002> kwantam - I'm having trouble finding the right vocabulary here. I want something similar to "source_address" in socket.create_connection of Python [ https://docs.python.org/2/library/socket.html#socket.create_connection ]. mio also does this [ http://carllerche.github.io/mio/mio/tcp/struct.TcpSocket.html#method.bind ], but the std::net::TcpStream doesn't seem to.
[19:40:50] *** Quits: Fiveside (fiveside@moz-t2eatg.vsp.com) (Ping timeout: 121 seconds)
[19:41:15] <Murarth> flan3002: Binding to a local address is usually what it's called. TcpStream doesn't appear to do it for outgoing connections. File an issue?
[19:41:46] <flan3002> Murarth - Glad I didn't overlook it, will file an issue.
[19:42:02] *** Joins: DerisiveLogic (smuxi@moz-g93io6.res.rr.com)
[19:42:17] <HollyRain> I'm trying to implement a generic function which only allows some data types, but I can not: http://is.gd/S3psOF
[19:42:24] <kwantam> As Murarth said, tt looks like there's no explicit call to bind()
[19:42:31] <Murarth> I've noticed the absence of that function, too, but I'm using mio now, which is able to bind outgoing connections.
[19:43:02] <kwantam> arguably it's a slightly unusual use case
[19:43:23] *** Quits: kieran (kieran@moz-c5gk5j.ihug.co.nz) (Ping timeout: 121 seconds)
[19:43:42] <Murarth> Yeah, it is. Only used in specific server software, I imagine. In which case, you'd probably want something like mio, anyway.
[19:43:55] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[19:44:21] *** Quits: ascarter (ascarter@moz-705hf8.wa.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[19:44:30] *** Quits: nham (nham@moz-755.bu3.214.98.IP) (Ping timeout: 121 seconds)
[19:44:41] <kwantam> probably the right thing would be to have a TcpBuilder type thing
[19:45:00] *** Quits: akiss (akiss@moz-6jk4dr.pool.digikabel.hu) (Ping timeout: 121 seconds)
[19:45:17] *** Joins: moa (Cedric@moz-h3f7lu.abo.wanadoo.fr)
[19:45:22] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[19:45:22] *** ChanServ sets mode: +ao pcwalton pcwalton
[19:45:24] *** Quits: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr) (Connection closed)
[19:45:25] *** Joins: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr)
[19:46:24] <AeroNotix> is there a way for me to use an enums values without the enum name prefix?
[19:46:25] <Murarth> I think the Rust TCP API has the goal of being simple and useful for general uses. It's explicitly not its goal to be something like what mio aims for. That said, simply binding an outgoing connection could be done with an additional constructor. It seems to me like an acceptable addition.
[19:46:30] <AeroNotix> I am using them from the same module I define them
[19:46:45] <Murarth> AeroNotix: `use Enum::*;`
[19:46:54] *** Quits: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr) (Connection closed)
[19:47:21] *** Joins: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr)
[19:47:23] <AeroNotix> ok
[19:47:33] <kwantam> sure, it *could* be done easily (assuming it's portable; I don't know how you do it on Windows), but I'm guessing that it's enough of an edge case that there'll be resistance to including it
[19:47:38] *** Quits: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net) (Ping timeout: 121 seconds)
[19:47:46] *** Joins: Fiveside (fiveside@moz-t2eatg.vsp.com)
[19:48:02] *** Joins: mattico (Matthew@moz-pdo9d0.o7r8.dm5j.ea00.2607.IP)
[19:48:58] *** Joins: JagaJaga (JagaJaga@moz-gd9.blu.205.109.IP)
[19:49:34] *** Joins: Brochacho_ (alberto@moz-q02.q5h.156.131.IP)
[19:49:36] *** Quits: Brochacho (alberto@moz-q02.q5h.156.131.IP) (Client exited)
[19:49:36] *** Brochacho_ is now known as Brochacho
[19:50:02] <UberLambda> Are the LLVM C++ bindings much powerful than writing IR by hand?
[19:50:25] *** Joins: JosiahOne1 (Thunderbird@moz-ub5.sco.30.4.IP)
[19:50:27] <UberLambda> E.g, can they perform tasks that .ir files + llc/lli can't?
[19:50:32] *** Joins: brson (brson@moz-l8ebtf.sfo1.mozilla.com)
[19:50:32] *** ChanServ sets mode: +ao brson brson
[19:50:49] <flan3002> Murarth - It doesn't add much complexity IMO, because there's no need to call it. mio doesn't Windows AFAICT, and I don't want to drop Windows just for binding to local IPs.
[19:51:01] *** Quits: tamird_ (textual@moz-69r.lnk.116.63.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[19:51:44] *** Joins: QuadTan (Tan@moz-r5oa06.student.uu.se)
[19:51:51] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Connection closed)
[19:51:58] *** Quits: JosiahOne (Thunderbird@moz-f2hp7h.biz.rr.com) (Ping timeout: 121 seconds)
[19:52:17] <talchas> UberLambda: you can write additional passes and such, and I'm not sure the analysis info available to you there is directly available in the bytecode
[19:53:03] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[19:53:04] <kwantam> flan3002: the way TcpStream is implemented now, there's a single constructor that allocates the socket and connects it. Calling bind() would happen between socket() and connect(), which means you'd either need an entirely separate constructor or you'd have to be able to create an unconnected TcpStream, call bind() on it, and then call connect() on it. It's obviously not heinous, but it definitely
[19:53:06] <kwantam> adds complexity to the API.
[19:53:12] <UberLambda> talchas: hm, but - say - if you were to rewrite rustc in a way that it outputted .ir instead of using the LLVM apis, could it do the same things it can do now?
[19:53:13] *** Joins: skip (user@moz-k00.7ho.53.50.IP)
[19:53:19] <UberLambda> I don't think I'll ever need custom passes
[19:53:25] <flan3002> Murarth, kwantam - My issue was closed already. :D
[19:53:26] *** Joins: JosiahOne (Thunderbird@moz-f2hp7h.biz.rr.com)
[19:53:36] <kwantam> d'oh!
[19:53:51] <flan3002> Apparently solved by https://github.com/rust-lang/rfcs/issues/957
[19:53:58] <Murarth> Ah, yes. I've seen the std::net wishlist before.
[19:54:05] <kwantam> Interesting.
[19:54:15] <Murarth> Not sure when that will happen, but it looks promising.
[19:54:27] *** Quits: JosiahOne1 (Thunderbird@moz-ub5.sco.30.4.IP) (Ping timeout: 121 seconds)
[19:54:34] *** Quits: dzhulk1 (Adium@moz-hnu.hki.140.95.IP) (Quit: Leaving.)
[19:54:35] *** Quits: hjr3 (hradtke@moz-dmp.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:54:40] *** Joins: skade (skade@moz-6g5dak.pools.vodafone-ip.de)
[19:54:42] *** Joins: nham (nham@moz-755.bu3.214.98.IP)
[19:55:01] <flan3002> acrichto - ping
[19:55:22] *** Quits: Deffe (Mibbit@moz-tj3.1jn.66.77.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:55:36] <kwantam> flan3002: probably worth adding a comment in there since I don't see bind() for TcpStream explicitly mentioned.
[19:55:53] <talchas> UberLambda: I don't know how much infastructure rustc happens to use. You could certainly do the final output by hand, that would just involve rewriting a bunch of code
[19:55:54] <flan3002> kwantam - Exactly, that's what I'm trying to ask acrichto about.
[19:56:42] <acrichto> flan3002: pong
[19:56:48] <talchas> (if you're writing your own compiler or such, you can probably get away with just writing IR and calling llvm's compiler if you don't want to deal with FFI)
[19:56:57] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[19:57:09] <panicbit> Check out my game of life implementation :). Rustbox already profited by gaining mouse event support ;) https://github.com/panicbit/game_of_life
[19:57:38] <UberLambda> talchas: ty
[19:57:43] *** Joins: hjr3 (hradtke@moz-dmp.av4.169.69.IP)
[19:57:50] <panicbit> (Controls: Click to toggle cells, 'space' to start simulating, 'c' to clear the field)
[19:58:39] <flan3002> acrichto - In the issue you just closed [ https://github.com/rust-lang/rust/issues/25102 ], I was talking about setting the local IP address of a TcpStream, not a TcpListener, which isn't mentioned in the linked wishlist. Am I just not seeing it, or would I just comment the issue text on the wishlist?
[19:59:02] * flan3002 uses "just" too often.
[19:59:08] <skip> this mio thing is weird... you can't call methods in an implementation that has type parameters (and no default types), without specifying the parameters, right?
[19:59:24] <talchas> panicbit: now it's time to do one of the complicated implementations! :P
[19:59:36] <panicbit> talchas: Huh? What do you mean? =D
[19:59:47] <panicbit> talchas: Like wrapping fields or like what?
[20:00:06] <talchas> panicbit: http://en.wikipedia.org/wiki/Hashlife
[20:00:12] *** Joins: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net)
[20:00:17] <skip> I see impl<H: Handler> EventLoop<H>, then fn new() -> Result<EventLoop<H>> .... then the example given is let mut event_loop = EventLoop::new()
[20:00:19] <panicbit> Wut
[20:00:34] *** Quits: forgottenone (forgottenon@moz-d2p.26m.45.92.IP) (Quit: Konversation terminated!)
[20:00:41] *** Joins: forgottenone (forgottenon@moz-d2p.26m.45.92.IP)
[20:01:03] <talchas> panicbit: yeah, hashlife is pretty crazy
[20:01:11] *** Joins: nstoddard (nstoddard@moz-urhoua.resnet.purdue.edu)
[20:01:20] <panicbit> talchas: Amazing, thanks for mentioning hashlife =D
[20:01:30] <acrichto> flan3002: oh oops, I skimmed it a little quickly and thought I saw it, I'll add it though as it should definitley be in there
[20:01:38] <Murarth> skip: That's type inference. EventLoop<T> has a method that takes &mut T. The compiler later sees that method being called and is able to infer the type parameter based on that.
[20:01:48] *** Joins: gonzaloserrano (Adium@moz-0os.6hf.231.77.IP)
[20:01:55] <flan3002> acrichto - Thank you! :)
[20:02:13] *** Quits: daschl (Adium@moz-oirn1i.vie.surfer.at) (Quit: Leaving.)
[20:02:19] *** Joins: Dartanjan (Tan@moz-r5oa06.student.uu.se)
[20:02:34] <skip> Murarth: yeah, but it's weird that it infers it lexically after the call to new(), which is before the call to new() since it's in the compile phase.
[20:03:53] <panicbit> talchas: After implementing hangman, a bouncing ball and game of life I think the next step is tetris os something :P
[20:03:56] <panicbit> or*
[20:03:56] *** Quits: cjwelborn (cjwelborn@moz-np6hed.al.charter.com) (Quit: sys.exit(1))
[20:04:05] <flan3002> kwantam - "net::NetOptions.new()" <-- looks weird-ish. c.c
[20:04:37] <flan3002> ("net::NetOptions::new()". Sorry for nitpicking)
[20:04:44] *** Quits: QuadTan (Tan@moz-r5oa06.student.uu.se) (Ping timeout: 121 seconds)
[20:04:50] <Murarth> skip: I'm not sure what you mean. The compile phase looks over all the code and performs inference. Lexically, there is no difference between `fn new()` and `fn new<T>()`. The compiler accepts `new` being called without type parameters and looks for inference opportunities. If inference were not possible, an error would be emitted and the user would be prompted to give the type explicitly when calling new.
[20:04:56] <kwantam> flan3002: Fair enough, it's just a strawman name.
[20:05:02] *** Quits: forgottenone (forgottenon@moz-d2p.26m.45.92.IP) (Ping timeout: 121 seconds)
[20:05:08] *** Quits: Hannibal_Smith (nico@moz-l9aupr.retail.telecomitalia.it) (Quit: Leaving)
[20:05:57] *** Quits: nott (nott@moz-to4.06o.57.86.IP) (Ping timeout: 121 seconds)
[20:06:08] <flan3002> kwantam - Otherwise, looks good, albeit arguably more complex. :/
[20:06:09] *** Joins: yota_ (Sebastien@moz-8b55g4.3iqc.r856.0e35.2a01.IP)
[20:06:11] *** Quits: yota_ (Sebastien@moz-8b55g4.3iqc.r856.0e35.2a01.IP) (Quit: Leaving)
[20:06:16] *** Joins: d-rezzr (chatzilla@moz-q9t.4l8.207.104.IP)
[20:06:44] <kwantam> Oh, absolutely more complex
[20:07:20] <kwantam> but one nice thing about it is that you can provide shortcut methods just like File::open() and File::create() wrap OpenOptions::new().foo().bar().baz()
[20:07:33] *** Joins: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net)
[20:07:57] <skip> Murarth: well, for instance if you have a struct A<T>, and a struct B, can a member of B be a value of A<B>?
[20:08:08] *** d-rezzr is now known as d_rezzer
[20:08:40] *** Joins: zyphrus (David@moz-nhi.pas.98.101.IP)
[20:08:42] *** Quits: hjr3 (hradtke@moz-dmp.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:08:47] <skip> And then if impl B creates struct C instances, can struct C have a member of type A<B>?
[20:09:22] *** Quits: sayan (sayan@moz-ip8.595.51.106.IP) (Ping timeout: 121 seconds)
[20:09:25] <flan3002> "Some changes need to be made before 1.0, because they are not backward compatible."... Yeah, good luck with that. :(
[20:09:43] *** Quits: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr) (Connection closed)
[20:09:44] *** Joins: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr)
[20:09:51] <skip> I can't see how to define struct C without putting it before the definition of struct B, even though it's after the definition of the generic struct A<T>, so I don't think C { loop: A<B> } would make sense...
[20:10:27] <Murarth> skip: That depends on whether the type A<T> contains a field of type T. If A<T> contains a reference to T, it certainly could be possible. But I don't see what this has to do with the mio example.
[20:11:05] *** Joins: danilo (danilo@moz-qhkkt5.yourvserver.net)
[20:11:20] <danilo> I'm having trouble with redis-rs again :) this is the error I'm getting: "<std macros>:6:1: 6:32 error: the trait `core::convert::From<redis::types::RedisError>` is not implemented for the type `E` [E0277]" I'm trying to abstract away a generic data store, with a redis implementation: https://gist.github.com/anonymous/c5c0508df12498bf2c14
[20:11:22] <Murarth> mio's EventLoop<T> doesn't contain a field of type T. It accepts a &mut T in the methods that run its loop. Also, generally, the order of declarations of types doesn't matter in Rust.
[20:11:45] *** Joins: Brochacho_ (alberto@moz-q02.q5h.156.131.IP)
[20:11:47] <danilo> shouldn't that work because RedisError implements Error?
[20:12:05] <talchas> skip: order also doesn't matter for struct definitions, you can do struct A(B); struct B;
[20:12:23] *** Joins: ismaelga (ismaelga@moz-jie1ud.rev.vodafone.pt)
[20:12:24] *** Quits: fabiand (fabiand@moz-fo4vhj.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[20:12:31] *** Quits: mou (donwilliam@moz-lq9kg8.cpe.webspeed.dk) (Ping timeout: 121 seconds)
[20:12:32] *** Quits: Brochacho (alberto@moz-q02.q5h.156.131.IP) (Ping timeout: 121 seconds)
[20:12:34] *** Quits: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net) (Ping timeout: 121 seconds)
[20:12:36] <talchas> skip: if you try to do something like struct A(B); struct B(A); you'll get an error for the recursion
[20:12:43] *** Quits: djcb (user@moz-nqdj21.elisa-laajakaista.fi) (Connection closed)
[20:12:46] *** Joins: djcb (user@moz-nqdj21.elisa-laajakaista.fi)
[20:12:57] *** Quits: JagaJaga (JagaJaga@moz-gd9.blu.205.109.IP) (Ping timeout: 121 seconds)
[20:13:02] <skip> Oh, that makes it easier.
[20:13:16] *** Quits: borromakot (Adium@moz-rdo.h3t.104.38.IP) (Quit: Leaving.)
[20:13:18] *** Joins: yota_ (sdouche@moz-8b55g4.3iqc.r856.0e35.2a01.IP)
[20:13:26] *** Quits: ismaelga (ismaelga@moz-jie1ud.rev.vodafone.pt) (Connection closed)
[20:13:47] <skip> so even if B instantiates A and A goes first, A can still contain fields of type B, or of type EventLoop<B>. Long as B doesn't contain fields of type A, that is.
[20:14:01] *** Quits: yota_ (sdouche@moz-8b55g4.3iqc.r856.0e35.2a01.IP) (Quit: WeeChat 1.1.1)
[20:14:10] *** Joins: choplin (choplin@moz-b1oa9n.zaq.ne.jp)
[20:14:21] <talchas> and if you do something like struct A<T>(B<T>); struct B<T>(T); then you can do something like A<B<A<int>>> but you have to terminate eventually. If you try to construct an infinite chain using the inference engine, you'll get another error
[20:14:29] *** Quits: yota (Sebastien@moz-qi4m1b.3iqc.r856.0e35.2a01.IP) (Quit: Leaving)
[20:14:53] *** Joins: yota (sdouche@moz-8b55g4.3iqc.r856.0e35.2a01.IP)
[20:15:06] <mbrubeck> danilo: Instead of a generic <E: Error> you could return Box<Error>
[20:15:11] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[20:15:20] <niconii> skip: pretty much order doesn't matter at all for functions, structs, impls, modules, etc.
[20:15:22] <talchas> skip: yeah, any reference to B there would need to be on the other side of some sort of optional pointer
[20:15:59] <niconii> skip: the compiler parses all the code first, *then* checks to make sure everything's defined and all that
[20:16:19] *** Quits: yota (sdouche@moz-8b55g4.3iqc.r856.0e35.2a01.IP) (Quit: WeeChat 1.1.1)
[20:16:48] *** Quits: jviereck (Adium@moz-rslgsr.dclient.hispeed.ch) (Quit: Leaving.)
[20:16:52] <danilo> mbrubeck: what are the effects of that change?
[20:17:00] *** Joins: genbattle (genbattle@moz-4v0.gkd.16.182.IP)
[20:17:03] <FreeFull> playbot: struct A(B); struct B(A);
[20:17:04] -playbot- <anon>:9:9: 9:21 error: illegal recursive struct type; wrap the inner value in a box to make it representable [E0072]
[20:17:04] -playbot- <anon>:9         struct A(B); struct B(A);
[20:17:04] -playbot- output truncated; full output at: http://bit.ly/1K9Rkfx
[20:17:07] *** Quits: logan_e (logan_e@moz-ltn.qg3.218.73.IP) (Client exited)
[20:17:14] <FreeFull> playbot: struct A(B); struct B(&A);
[20:17:14] -playbot- <anon>:9:31: 9:33 error: missing lifetime specifier [E0106]
[20:17:15] -playbot- <anon>:9         struct A(B); struct B(&A);
[20:17:15] -playbot- output truncated; full output at: http://bit.ly/1zIFxF2
[20:17:19] <FreeFull> playbot: struct A(B); struct B<'a>(&'a A);
[20:17:20] -playbot- <anon>:9:18: 9:19 error: wrong number of lifetime parameters: expected 1, found 0 [E0107]
[20:17:20] -playbot- <anon>:9         struct A(B); struct B<'a>(&'a A);
[20:17:20] -playbot- output truncated; full output at: http://bit.ly/1K9RnIj
[20:17:32] <FreeFull> playbot: struct A<'a>(B<'a>); struct B<'a>(&'a A);
[20:17:33] -playbot- <anon>:9:47: 9:48 error: wrong number of lifetime parameters: expected 1, found 0 [E0107]
[20:17:34] -playbot- <anon>:9         struct A<'a>(B<'a>); struct B<'a>(&'a A);
[20:17:34] -playbot- output truncated; full output at: http://bit.ly/1zIFw47
[20:17:37] <FreeFull> playbot: struct A<'a>(B<'a>); struct B<'a>(&'a A<'a>);
[20:17:37] *** Joins: yota (sdouche@moz-8b55g4.3iqc.r856.0e35.2a01.IP)
[20:17:38] -playbot- <anon>:9:9: 9:29 error: this type cannot be instantiated without an instance of itself [E0073]
[20:17:38] -playbot- <anon>:9         struct A<'a>(B<'a>); struct B<'a>(&'a A<'a>);
[20:17:38] -playbot- output truncated; full output at: http://bit.ly/1K9Rx2o
[20:17:40] <mbrubeck> danilo: It should fix your compile error, because there's a blanket `impl From<E: Error> for Box<Error>
[20:17:42] <FreeFull> Ok
[20:17:45] <FreeFull> It does error properly
[20:17:52] <danilo> mbrubeck: ah, thanks.
[20:17:55] <FreeFull> playbot: struct A<'a>(B<'a>); struct B<'a>(Option<&'a A<'a>>);
[20:17:56] -playbot- ()
[20:18:09] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[20:18:09] *** ChanServ sets mode: +o pnkfelix
[20:18:11] *** Joins: borromakot (Adium@moz-rdo.h3t.104.38.IP)
[20:18:12] *** Quits: choplin (choplin@moz-b1oa9n.zaq.ne.jp) (Ping timeout: 121 seconds)
[20:18:16] *** Joins: FallingAlways (FallingTime@moz-ruksei.cable.rogers.com)
[20:18:23] <danilo> btw, does someone know how to configure irssi so that it does not highlight the channel for each playbot output? :)
[20:18:26] <FreeFull> playbot: enum Foo<T> { Foo(T) } (struct A<'a>(B<'a>); struct B<'a>(Foo<&'a A<'a>>);
[20:18:27] -playbot- <anon>:9:32: 9:33 note: unclosed delimiter
[20:18:27] -playbot- <anon>:9         enum Foo<T> { Foo(T) } (struct A<'a>(B<'a>); struct B<'a>(Foo<&'a A<'a>>);
[20:18:27] -playbot- output truncated; full output at: http://bit.ly/1K9RL9K
[20:18:41] <FreeFull> playbot: enum Foo<T> { Foo(T) } struct A<'a>(B<'a>); struct B<'a>(Foo<&'a A<'a>>);
[20:18:42] -playbot- <anon>:9:32: 9:52 error: this type cannot be instantiated without an instance of itself [E0073]
[20:18:42] -playbot- <anon>:9         enum Foo<T> { Foo(T) } struct A<'a>(B<'a>); struct B<'a>(Foo<&'a A<'a>>);
[20:18:42] -playbot- output truncated; full output at: http://bit.ly/1zIFARt
[20:18:44] <talchas> playbot: struct A(B); struct B(std::boxed::Box<A>);
[20:18:46] -playbot- <anon>:9:9: 9:21 error: this type cannot be instantiated without an instance of itself [E0073]
[20:18:46] *** playbot was kicked by belew.mozilla.org (Channel flood triggered (limit is 5 lines in 3 secs))
[20:18:46] *** Joins: playbot (playbot@moz-1vk5qd.compute.amazonaws.com)
[20:18:52] <FreeFull> Good, it seems to be exhaustive
[20:18:56] <niconii> oh.
[20:18:57] <talchas> ok, good, it doesn't see the *ptr
[20:19:03] <talchas> (otoh, playbot kick: not so good)
[20:19:15] *** Quits: scientes (scientes@moz-l6hdmu.wa.comcast.net) (Ping timeout: 121 seconds)
[20:19:21] <skip> I have no idea what that code meant.
[20:19:28] <niconii> at least it came back...
[20:19:50] *** Quits: amyers (amyers@moz-f2k.1cm.177.128.IP) (Ping timeout: 121 seconds)
[20:20:18] *** Quits: andre_ (andre@moz-rnd.3qv.76.201.IP) (Quit: leaving)
[20:20:45] *** Joins: slurps-mad-rips (slurps-mad-@moz-o2c.uaj.44.17.IP)
[20:21:01] <talchas> skip: various ways of writing struct A(B); struct B(A); with a pointer indirection to fix the size issue, but no fix to the "need A to make a B, need a B to make an A" issue
[20:21:12] *** Quits: Altazimuth_ (Altazimuth@moz-rb7u6p.skybroadband.com) (Ping timeout: 121 seconds)
[20:21:43] <Murarth> The full output suggests Option<T>, which (in addition to Box) does solve the issue of recursion.
[20:21:49] <talchas> which while it could be allowed (since enum Void {} is), is an error since it's basically guaranteed to be an error
[20:22:00] *** Joins: naerbnic (naerbnic@moz-i9o.rs4.199.12.IP)
[20:22:16] *** Joins: dinfuehr (dinfuehr@moz-j5sgb8.highway.telekom.at)
[20:22:39] <HollyRain> could be created a trait to modify a struct's generic field?
[20:23:26] <frankmcsherry> I have a method that may fail, and I'm trying to robustify it. Right now, it returns nothing. Appropriate return type is Result<(),()>? Just looks weird...
[20:23:52] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[20:24:02] *** Quits: mattico (Matthew@moz-pdo9d0.o7r8.dm5j.ea00.2607.IP) (Ping timeout: 121 seconds)
[20:24:16] <flan3002> frankmcsherry - Is there nothing more specific you can return in case of an error?
[20:24:21] <talchas> frankmcsherry: well, there are various stdlib functions returning Result<(), Error>
[20:24:32] *** Quits: twipeD (wipeD@moz-1o67f3.dip0.t-ipconnect.de) (Connection closed)
[20:24:36] *** Joins: dlc (dlc@moz-ijetde.res.rr.com)
[20:24:42] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[20:24:44] *** Quits: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP) (Connection closed)
[20:24:45] <frankmcsherry> I mean, it suggests the input was malformed, and a supplied int was larger than allowed for.
[20:25:23] <flan3002> I would panic on that.
[20:25:31] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[20:25:31] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:25:38] *** Quits: JosiahOne (Thunderbird@moz-f2hp7h.biz.rr.com) (Client exited)
[20:25:49] *** Joins: akiss (akiss@moz-6jk4dr.pool.digikabel.hu)
[20:25:54] <flan3002> It hints at a misuse of the API, and probably should be fixed.
[20:25:55] <frankmcsherry> flan3002: it's in a deserialization routine, so it's mostly there to protect you if you got bad data off the wire, or maybe if you aren't sure you got all of it.
[20:26:03] <flan3002> Oh, that thing...
[20:26:07] <kriben> I am trying to benchmark my first rust program on linux using time(1), and are seeing more time spent in kernel mode ("sys" in the time output) than expected. 
[20:26:24] <flan3002> frankmcsherry - Yes, I was going to say something about that earlier. It's about the Vec len, right?
[20:26:39] *** Joins: JagaJaga (JagaJaga@moz-ua8.hhl.62.178.IP)
[20:26:46] *** Joins: ascarter (ascarter@moz-705hf8.wa.comcast.net)
[20:26:46] <frankmcsherry> right, so you pop that out, and it might reach past the bytes you have, either bad data or someone being naughty.
[20:27:05] <frankmcsherry> at the moment: panic, but I thought Result<(),_> might be more responsible.
[20:27:28] <flan3002> frankmcsherry - The way I solved that was by using a configuration object, with configurable maximum memory allocation size...
[20:28:15] <kriben> Where expectations come from running the original C++ program. user time is pretty much the same. Anyone else seen this?
[20:28:19] <frankmcsherry> flan3002: hrm. not sure it needs this; since it is zero copy, you either have the memory or you don't. if you don't, you just don't get your data.
[20:28:41] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[20:28:46] *** Joins: hjr3 (hradtke@moz-dmp.av4.169.69.IP)
[20:29:32] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[20:29:32] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:29:52] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[20:30:01] <flan3002> frankmcsherry - Have an enum with a variant e.g. WouldOOM, so that the caller can handle that case specifically.
[20:30:06] *** Joins: mattico (Matthew@moz-h3n4m4.o7r8.dm5j.ea00.2607.IP)
[20:30:45] <frankmcsherry> flan3002: no, there's no OOM issue here, I don't think. If you say "I have len 1 << 64", I'll say "oh yeah, I hope that &[u8] has 1 << 64 more bytes in it, mister".
[20:30:50] *** Joins: fabianvf_ (fabianvf@moz-j12.dim.197.216.IP)
[20:30:51] <talchas> kriben: the sys/user split as returned by time is kinda sketchy iirc, but you might look at strace or perf to see what it's doing differently
[20:31:01] *** Quits: hjr3 (hradtke@moz-dmp.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:31:04] *** Quits: larhat (Adium@moz-tb1ulb.cable.virginm.net) (Quit: Leaving.)
[20:31:51] *** Joins: fabianv__ (fabianvf@moz-j12.dim.197.216.IP)
[20:31:51] *** Quits: fabianvf_ (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[20:32:17] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Ping timeout: 121 seconds)
[20:32:18] *** Quits: vmeson (rmacleod@moz-hq5.1km.224.128.IP) (Ping timeout: 121 seconds)
[20:32:31] *** Joins: cjwelborn (cjwelborn@moz-np6hed.al.charter.com)
[20:32:42] *** Quits: slomo (slomo@moz-p8m0g2.net) (Quit: Ex-Chat)
[20:32:48] *** Joins: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net)
[20:33:25] *** Quits: lu324 (lu324___@moz-3v8ljg.dhcp.embarqhsd.net) (Ping timeout: 121 seconds)
[20:33:34] *** Quits: lenstr (lenstr@moz-rrh.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[20:33:59] <flan3002> frankmcsherry - I'm not sure where that &[u8] came from. In any case, you probably should return a more specific error, e.g. as an enum variant.
[20:35:17] *** darkowlzz is now known as darkowlzz|afk
[20:35:17] *** Joins: nott (nott@moz-to4.06o.57.86.IP)
[20:36:16] *** Joins: nico (nico@moz-n8jedu.dip0.t-ipconnect.de)
[20:36:27] *** Quits: Guest_ (textual@moz-rtn.fg7.77.192.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:36:49] <mbrubeck> HollyRain: Something like this? http://is.gd/cgi1Eg
[20:37:05] <kriben> talchas: Thanks, I will dig into it!
[20:37:20] <geri> why does this need unsafe? :D http://is.gd/Qo523A
[20:37:36] <mbrubeck> HollyRain: You can also do something similar without a trait: http://is.gd/X7JYmQ
[20:38:09] <tomaka> geri: raw pointers are unsafe
[20:38:24] <tomaka> geri: only references (`&` or `&mut`) are checked by the rust compiler
[20:38:29] *** Quits: nham (nham@moz-755.bu3.214.98.IP) (Ping timeout: 121 seconds)
[20:38:40] *** darkowlzz|afk is now known as darkowlzz
[20:38:51] *** Parts: rbrs (rbrs@moz-m5thmg.static.zebra.lt) ()
[20:38:53] <tomaka> geri: You can easily pass 0 for example: http://is.gd/uCT3Su
[20:39:27] <HollyRain> mbrubeck, thanks but I get error at run on those pages
[20:39:46] <mbrubeck> HollyRain: What error?
[20:40:04] *** Quits: schnozzle (Mibbit@moz-i7cb3r.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:40:05] *** Quits: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr) (Connection closed)
[20:40:09] *** Joins: kieran (kieran@moz-c5gk5j.ihug.co.nz)
[20:40:18] *** Quits: nico (nico@moz-n8jedu.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[20:40:22] <HollyRain> mbrubeck, struct Foo T> 
[20:40:46] *** Joins: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr)
[20:40:50] *** Quits: arunmk (arun@moz-vfv9bl.ca.comcast.net) (Client exited)
[20:40:50] <mbrubeck> HollyRain: Do you have an extension like NoScript that does XSS protection? It might be breaking the playpen URLs.
[20:40:52] <geri> tomaka: so all pointers are unsafe? :D
[20:41:12] <HollyRain> mbrubeck, yes, I've it :(
[20:41:19] <mbrubeck> geri: safe version: http://is.gd/dVn3bg
[20:41:39] *** Joins: mib_07qpgq (Mibbit@moz-o3p27g.bb.dnainternet.fi)
[20:41:53] <mbrubeck> HollyRain: you can disable XSS protection for play.rust-lang.org to fix it
[20:41:56] <HollyRain> mbrubeck, I solved it, thank you very much
[20:42:01] <geri> HollyRain: thats not a pointer :)
[20:42:02] <HollyRain> yes, I did it
[20:42:18] *** Quits: killercup (killercup@moz-gpufip.dip0.t-ipconnect.de) (Quit: My Mac has gone to sleep. ZZZzzz…)
[20:42:25] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[20:42:35] *** Joins: lenstr (lenstr@moz-rrh.vju.25.171.IP)
[20:42:35] <mbrubeck> geri: In Rust it is.  We used to have four kinds of pointers!  ~T, &T, *T, and @T
[20:42:43] <mbrubeck> (am I forgetting any?)
[20:43:04] <mbrubeck> geri: Now there are `&T` and `*const T` pointers, and their mutable variants.
[20:43:06] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[20:43:15] *** Quits: mib_07qpgq (Mibbit@moz-o3p27g.bb.dnainternet.fi) (Quit: http://www.mibbit.com ajax IRC Client)
[20:43:17] *** Quits: dellavg (dellavg@moz-t682jd.retail.telecomitalia.it) (Ping timeout: 121 seconds)
[20:43:47] <talchas> now those are spelled(ish) Box<T>, &T, *const T, Rc<T>
[20:43:54] <mbrubeck> geri: http://doc.rust-lang.org/reference.html#pointer-types
[20:44:01] *** Joins: Hannibal_Smith (nico@moz-l9aupr.retail.telecomitalia.it)
[20:44:07] *** Quits: duesenfranz_ (jona@moz-711djm.tirol.surfer.at) (Client exited)
[20:44:07] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[20:44:11] <talchas> (Rc isn't exactly @, but whatever, we still have ALL THE POINTERS)
[20:44:11] *** Quits: fabianv__ (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[20:44:18] *** Quits: kieran (kieran@moz-c5gk5j.ihug.co.nz) (Ping timeout: 121 seconds)
[20:45:06] <bluss> mbrubeck: @mut ?
[20:45:15] *** Quits: UberLambda (uber@moz-24qg64.clienti.tiscali.it) (Quit: Leaving)
[20:45:20] <geri> what is ~T and @T ?
[20:45:21] <bluss> @ and @mut (and @const ??)
[20:45:25] <XMPPwocky> bluss: we do not speak of @mut here
[20:45:34] <tomaka> @_@
[20:45:53] <bluss> geri: old rust syntax, it's gone now
[20:45:56] <geri> @-o-@
[20:46:25] <geri> so you just have *T, &T ?
[20:46:29] *** Quits: happy-dude_ (uid62780@moz-jt3517.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[20:46:37] *** Quits: dinfuehr (dinfuehr@moz-j5sgb8.highway.telekom.at) (Connection closed)
[20:46:43] <Diggsey> *const *mut & and &mut
[20:46:47] *** Quits: lenstr (lenstr@moz-rrh.vju.25.171.IP) (Ping timeout: 121 seconds)
[20:47:21] *** Joins: Brochacho (alberto@moz-p39.q5h.156.131.IP)
[20:48:14] *** Joins: lu324 (lu324___@moz-3v8ljg.dhcp.embarqhsd.net)
[20:48:19] *** Quits: ascarter (ascarter@moz-705hf8.wa.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[20:48:38] *** Joins: larhat (Adium@moz-tb1ulb.cable.virginm.net)
[20:48:49] *** Joins: insaneinside (user@moz-dgv9mb.customer.broadstripe.net)
[20:48:57] *** Joins: arunmk (arun@moz-vfv9bl.ca.comcast.net)
[20:49:03] *** Joins: lenstr (lenstr@moz-rrh.vju.25.171.IP)
[20:49:15] *** Quits: dsantiago (santiago@moz-ro2mm9.res.rr.com) (Quit: Computer has gone to sleep.)
[20:49:15] <talchas> geri: things like Box and Rc/Arc are in many ways pointers, but they're built on top of *const/mut T
[20:49:47] *** Joins: hjr3 (hradtke@moz-dmp.av4.169.69.IP)
[20:49:48] *** Quits: arBmind (Andreas@moz-it2ovr.adsl.alicedsl.de) (Quit: Leaving.)
[20:49:54] <insaneinside> Anyone know of a good channel (on FreeNode, probably) to ask algorithm-related questions in?
[20:50:11] *** Quits: hjr3 (hradtke@moz-dmp.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:50:27] <flan3002> insaneinside - Freenode/#algorithms has 174 users.
[20:50:49] <insaneinside> flan3002: oh, thanks!
[20:50:57] *** Joins: tamird (textual@moz-lje.m54.130.157.IP)
[20:51:00] *** Joins: dinfuehr (dinfuehr@moz-j5sgb8.highway.telekom.at)
[20:51:08] <flan3002> insaneinside - On Freenode, /msg alis list *algo*
[20:51:09] *** Joins: ismaelga (ismaelga@moz-lmk.cu2.251.188.IP)
[20:51:14] *** Quits: dinfuehr (dinfuehr@moz-j5sgb8.highway.telekom.at) (Connection closed)
[20:51:18] *** Joins: kieran (kieran@moz-c5gk5j.ihug.co.nz)
[20:51:19] *** Joins: joelteon- (joelteon@moz-phb.vhd.202.64.IP)
[20:51:27] *** Quits: kgrandon (Adium@moz-u3dg2t.sfo1.mozilla.com) (Connection closed)
[20:51:33] *** Quits: joelteon- (joelteon@moz-phb.vhd.202.64.IP) (A TLS packet with unexpected length was received.)
[20:51:55] *** Joins: kalail (uid62296@moz-5ck9vu.charlton.irccloud.com)
[20:52:06] *** Quits: kamilc__ (kamil@moz-u843uu.play-internet.pl) (Quit: Linkinus - http://linkinus.com)
[20:52:11] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (G-Lined: spam)
[20:52:29] <insaneinside> flan3002: Now I know. :)
[20:54:10] *** Quits: lenstr (lenstr@moz-rrh.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[20:54:39] *** Joins: laumann (Mibbit@moz-n9e72h.0.fullrate.dk)
[20:55:03] *** Joins: mastax (Matthew@moz-5uac5e.o7r8.dm5j.ea00.2607.IP)
[20:55:16] <Torkable> what's the difference between let x: f64 = 5; and let x = 5f64;
[20:55:27] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Connection closed)
[20:55:29] *** Quits: kieran (kieran@moz-c5gk5j.ihug.co.nz) (Ping timeout: 121 seconds)
[20:55:43] <flan3002> No semantic difference.
[20:55:53] *** Quits: mattico (Matthew@moz-h3n4m4.o7r8.dm5j.ea00.2607.IP) (Ping timeout: 121 seconds)
[20:55:59] <Torkable> they are both valid?
[20:56:06] <flan3002> It's just a different way of specifying the type.
[20:56:08] <Torkable> the first example does not compile locally
[20:56:12] <flan3002> Ehh.
[20:56:13] <XMPPwocky> oh, 5.0
[20:56:17] *** Quits: tcard (tcard@moz-jdrdbk.ddns.jazztel.es) (Client exited)
[20:56:22] <kagami> Domes somebody know why rust requires to write self::libc instead of libc if extern crate inside the submodule? http://is.gd/WOUpa2
[20:56:23] <flan3002> playbot: let x: f64 = 5.0;
[20:56:24] -playbot- ()
[20:56:25] *** Quits: laumann (Mibbit@moz-n9e72h.0.fullrate.dk) (Quit: http://www.mibbit.com ajax IRC Client)
[20:56:26] <Torkable> but it works on the playpen thing
[20:56:29] *** Joins: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net)
[20:56:33] <flan3002> playbot: let x = 5.0f64;
[20:56:34] -playbot- ()
[20:56:37] <XMPPwocky> 5.0 != 5
[20:56:54] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[20:56:56] <Torkable> huh?
[20:56:59] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[20:57:01] *** Quits: playbot-mini (playbot-min@moz-1vk5qd.compute.amazonaws.com) (G-Lined: spam)
[20:57:01] *** Quits: playbot (playbot@moz-1vk5qd.compute.amazonaws.com) (G-Lined: spam)
[20:57:07] *** Quits: zettablade (zettablade@moz-ch1.8gp.39.134.IP) (Ping timeout: 121 seconds)
[20:57:12] <apoelstra> has anyone felt a need to have access to a namespace when writing syntax exts?
[20:57:13] <mbrubeck> Torkable: `5` is an integer literal. `5.0` is a floating point literal.
[20:57:16] <adjivas> Hi @all! I try to resolve this example http://is.gd/zlgPcE, someone can you help me?
[20:57:27] <mbrubeck> Torkable: Also, f64 is the default for floating point, so `let x = 5.0;` is also equivalent.
[20:57:30] <apoelstra> i'm thinking about hammering out a lib today but i'd like some design guidance..
[20:57:30] <Torkable> mbrubeck: ok, maybe I don't understand what f64 is
[20:57:36] *** Joins: zettablade (zettablade@moz-t75mi5.tmodns.net)
[20:57:41] <mbrubeck> Torkable: f64 is a 64-bit floating point number.
[20:57:42] *** Quits: Ke (jkarlson@moz-nd3gcv.org.aalto.fi) (Ping timeout: 121 seconds)
[20:57:52] <Torkable> mbrubeck: ok so x: f64 = 5, two different types
[20:57:53] *** Quits: marsel (user@moz-rh7.06n.234.188.IP) (Ping timeout: 121 seconds)
[20:58:00] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:58:04] *** Quits: delma (aopkarja@moz-6l6mf3.cs.helsinki.fi) (Ping timeout: 121 seconds)
[20:58:05] <mbrubeck> yeah
[20:58:05] *** Quits: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net) (Quit: Ex-Chat)
[20:58:07] *** Quits: VoxWave (bavi@moz-6l6mf3.cs.helsinki.fi) (Ping timeout: 121 seconds)
[20:58:08] *** Quits: mra (mrannanj@moz-6l6mf3.cs.helsinki.fi) (Ping timeout: 121 seconds)
[20:58:08] *** Joins: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net)
[20:58:08] *** Joins: expr (koponel1@moz-8nubhi.org.aalto.fi)
[20:58:08] <Torkable> gotcha, thanks
[20:58:10] *** Quits: fzzy (fzzy@moz-u36pr1.cs.helsinki.fi) (Ping timeout: 121 seconds)
[20:58:12] <bluss> adjivas: Vec<u8> is the type
[20:58:13] *** Joins: Tuna-Fish (quassel@moz-5djkv5.kortex.jyu.fi)
[20:58:27] <bluss> adjivas: vec![1,2,3] produces a Vec
[20:58:38] <Torkable> ok x: f64 = 5.0 compiles
[20:58:39] <insaneinside> apoelstra: yep!  Macro system needs some lovve.
[20:58:40] <Torkable> :)
[20:58:42] *** Joins: Ke (jkarlson@moz-nd3gcv.org.aalto.fi)
[20:58:45] *** Quits: DerisiveLogic (smuxi@moz-g93io6.res.rr.com) (Ping timeout: 121 seconds)
[20:58:48] *** Joins: VoxWave (bavi@moz-6l6mf3.cs.helsinki.fi)
[20:58:48] *** Quits: joel2 (joel@moz-6ampnk.gtri.gatech.edu) (Ping timeout: 121 seconds)
[20:59:05] *** Quits: qwerty_nor (Thunderbird@moz-vuo.d5a.248.5.IP) (Ping timeout: 121 seconds)
[20:59:05] *** Joins: delma (aopkarja@moz-6l6mf3.cs.helsinki.fi)
[20:59:10] <adjivas> bluss: Right, it's just that I try to found the type of Iterator::Vec<u8>
[20:59:17] *** Joins: mra (mrannanj@moz-6l6mf3.cs.helsinki.fi)
[20:59:21] *** Joins: fzzy (fzzy@moz-u36pr1.cs.helsinki.fi)
[20:59:39] <jshs> kagami: `use` takes an absolute path unless self or super is prefixed. the libc root is hooked into the test module, so its full path is ::test::libc
[20:59:48] <adjivas> bluss: And vec!]
[21:00:00] <bluss> adjivas: The return type of .iter() ?
[21:00:12] *** Parts: arunmk (arun@moz-vfv9bl.ca.comcast.net) ()
[21:00:18] *** Joins: arunmk (arun@moz-vfv9bl.ca.comcast.net)
[21:00:25] <adjivas> bluss: 
[21:00:30] <mbrubeck> adjivas: Like this? http://is.gd/tBnYkI
[21:00:30] <jshs> kagami: within test, self::libc also works because `self` refers to test in that context
[21:00:44] *** Joins: tcard (tcard@moz-jdrdbk.ddns.jazztel.es)
[21:01:00] <adjivas> mbrubeck: Thank's =D! It's this!
[21:01:15] *** Joins: lov2cod1 (Adium@moz-psldhp.sdt7.vfco.0306.2602.IP)
[21:01:20] <mbrubeck> adjivas: You can find that by looking at the docs for http://doc.rust-lang.org/std/vec/struct.Vec.html#method.iter
[21:01:31] <mbrubeck> adjivas: and then click the return type to get its full name
[21:01:42] *** Quits: lov2cod (Adium@moz-13h1je.u583.gjp6.0119.2620.IP) (Ping timeout: 121 seconds)
[21:02:06] *** Joins: Tobba (Tobba@moz-qun.0oa.226.188.IP)
[21:02:40] *** Joins: lov2cod (Adium@moz-dtash4.u583.gjp6.0119.2620.IP)
[21:02:40] *** Quits: lov2cod (Adium@moz-dtash4.u583.gjp6.0119.2620.IP) (Connection closed)
[21:02:45] <adjivas> mbrubeck: Right :-)
[21:03:55] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[21:04:06] <kagami> jshs: ah, I see, thanks. Similar question: if we defined crate in main module, but trying to use it inside the submodule, it doesn't work without redeclaration with "use": http://is.gd/p5zhnR
[21:04:40] *** Quits: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net) (Client exited)
[21:04:52] *** Joins: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net)
[21:05:09] <mbrubeck> kagami: You can use `::libc` or `super::libc` to refer to the crate from within a submodule.
[21:05:10] <jshs> kagami: that's because item paths are relative outside of `use`
[21:05:17] *** Quits: lov2cod1 (Adium@moz-psldhp.sdt7.vfco.0306.2602.IP) (Ping timeout: 121 seconds)
[21:05:19] *** WindowsBunny is now known as cunt
[21:05:32] *** cunt is now known as WindowsBunny
[21:05:33] *** Joins: kgrandon (Adium@moz-9usa4g.2rkg.9kg1.0101.2620.IP)
[21:05:36] <kagami> thanks
[21:06:32] *** Joins: gandalf (zbraniecki@moz-l2c.vj1.31.12.IP)
[21:07:04] *** Joins: playbot-mini (playbot-min@moz-1vk5qd.compute.amazonaws.com)
[21:07:04] *** Joins: playbot (playbot@moz-1vk5qd.compute.amazonaws.com)
[21:07:16] <cjwelborn> Does the `std` crate publicly export everything `core`? I found that I was using core::default::Default and core::ops::Add (which needs !#[feature(core)]) for no reason. Switching to std::ops and std::default works, and I was wondering if it worked for everything.
[21:07:35] <XMPPwocky> cjwelborn: yes, std re-exports everything from core
[21:07:40] *** Quits: playbot (playbot@moz-1vk5qd.compute.amazonaws.com) (G-Lined: spam)
[21:07:40] *** Quits: playbot-mini (playbot-min@moz-1vk5qd.compute.amazonaws.com) (G-Lined: spam)
[21:07:44] *** Quits: Brochacho_ (alberto@moz-q02.q5h.156.131.IP) (Ping timeout: 121 seconds)
[21:07:47] <XMPPwocky> most of std is just re-exports
[21:07:49] <bluss> not everything
[21:07:57] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[21:08:04] <XMPPwocky> thus "most" :P
[21:08:09] <cjwelborn> XMPPwocky: Thanks. Good to know for the future. Only core was showing up in my docs (not showing a 'default' or 'ops' member for std).
[21:08:19] *** WindowsBunny is now known as WindowsBunnyIsSorry
[21:08:26] <zamabe> niconii: /b 10
[21:08:27] <bluss> XMPPwocky: it doesn't export everything
[21:08:30] <XMPPwocky> oh
[21:08:33] <zamabe> niconii: whoops. sorry.
[21:08:37] <bluss> there are a few like core::nonzero
[21:08:39] *** fmtq is now known as fmtqIsInnocentOfAllCrimes
[21:08:49] <bluss> I'm sure you can find mor
[21:08:51] <bluss> e
[21:08:51] *** Tobba is now known as TobbaDidNothingWrong
[21:08:59] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[21:09:19] *** Quits: spider-mario (spidermario@moz-coblcf.fbx.proxad.net) (Connection closed)
[21:10:08] *** Quits: nano (nano@moz-00j6et.dynamic.kabel-deutschland.de) (Connection closed)
[21:10:15] <cjwelborn> The doc viewer i was using (zeal) omitted the std versions. http://doc.rust-lang.org/ shows them though. 
[21:10:26] <XMPPwocky> zeal?
[21:10:55] <cjwelborn> XMPPwocky: based on Dash.
[21:11:05] *** Joins: spider-mario (spidermario@moz-coblcf.fbx.proxad.net)
[21:11:12] <XMPPwocky> oh
[21:11:16] <XMPPwocky> neat
[21:11:31] <cmr> zeal is pretty neat if you're into that sort of thing. I found myself not using it as much as I would have hoped...
[21:12:36] *** Quits: TobbaDidNothingWrong (Tobba@moz-qun.0oa.226.188.IP) (G-Lined: spam)
[21:12:47] <HollyRain> is there a primitive type to indicate a null value?
[21:12:56] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[21:12:59] <XMPPwocky> HollyRain: () ?
[21:13:01] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[21:13:03] *** Quits: jevin (jevin@moz-sra.ovp.12.72.IP) (Quit: Textual IRC Client: www.textualapp.com)
[21:13:07] *** Joins: housl (housl@moz-qnjt4k.ut.comcast.net)
[21:13:20] <FreeFull> You wrap the pointer you want to be nullable in Option<T>
[21:13:28] <XMPPwocky> HollyRain: if you mean like a null pointer, no; use Option
[21:13:48] <cjwelborn> cmr: and now i see that it's omitting important info (re-exports) for some reason. I should've just used rust-lang, straight from the horses mouth :)
[21:14:18] *** Quits: jaen (jaen@moz-ifmik2.copit.pl) (Connection closed)
[21:14:28] *** Quits: mike_wagg (mike_wagg@moz-hst3d7.cable.virginm.net) (Connection closed)
[21:14:39] <mbrubeck> cjwelborn: re-exports are tricky. rustdoc has had a bunch of re-export-related bugs too.
[21:14:47] *** Quits: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr) (Connection closed)
[21:14:48] *** Joins: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr)
[21:14:52] *** Quits: vmx_ (vmx@moz-94h9c1.pools.vodafone-ip.de) (Quit: Leaving)
[21:14:58] *** Quits: naerbnic (naerbnic@moz-i9o.rs4.199.12.IP) (Client exited)
[21:15:17] *** Quits: gandalf (zbraniecki@moz-l2c.vj1.31.12.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:15:24] *** Joins: choplin (choplin@moz-b1oa9n.zaq.ne.jp)
[21:15:45] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[21:16:08] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[21:16:08] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:16:14] *** Joins: [o__o] ([o__o]@moz-4s2t5k.compute-1.amazonaws.com)
[21:16:36] *** Quits: agarie (agarie@moz-coa.g2h.32.177.IP) (Quit: Leaving...)
[21:16:43] *** Joins: gandalf (zbraniecki@moz-l2c.vj1.31.12.IP)
[21:16:52] *** darkowlzz is now known as darkowlzz|afk
[21:17:02] *** Quits: gandalf (zbraniecki@moz-l2c.vj1.31.12.IP) (Connection closed)
[21:17:17] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[21:17:42] *** fmtqIsInnocentOfAllCrimes is now known as fmtq
[21:17:46] *** Joins: playbot-mini (playbot-min@moz-1vk5qd.compute.amazonaws.com)
[21:17:46] *** Joins: playbot (playbot@moz-1vk5qd.compute.amazonaws.com)
[21:18:33] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[21:18:37] <Torkable> why do functions with no return type return () and what is the purpose of divergent functions
[21:18:46] <Torkable> other than making me think of that terrible terrible movie
[21:18:49] *** Joins: PorCuNot (Mibbit@moz-jom.4h8.25.188.IP)
[21:18:53] <PorCuNot> hi
[21:19:14] *** Quits: dlc (dlc@moz-ijetde.res.rr.com) (Quit: Leaving)
[21:19:17] *** Joins: gandalf (zbraniecki@moz-l2c.vj1.31.12.IP)
[21:19:20] <Diggsey> Torkable: () is the equivalent of "void" in C-like languages
[21:19:26] *** Quits: choplin (choplin@moz-b1oa9n.zaq.ne.jp) (Ping timeout: 121 seconds)
[21:19:39] <Diggsey> it's an empty tuple, otherwise known as "unit"
[21:19:50] *** Tobba is now known as Scunthrope
[21:20:04] *** Scunthrope is now known as Tobba
[21:20:06] <Torkable> k
[21:20:19] <Torkable> what is a basic use case for diverging functions
[21:20:30] <bluss> abort() -> ! I guess
[21:20:40] <XMPPwocky> Torkable: abort, the actual entry point for panic
[21:20:40] <Diggsey> any functions which don't return are divergent, eg. panic!
[21:20:42] <Torkable> error handling stuff?
[21:20:49] <XMPPwocky> things which, say, print nice things out and *then* panic
[21:20:51] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Ping timeout: 121 seconds)
[21:20:53] <XMPPwocky> things that loop forever
[21:20:54] *** Quits: flaub (flaub@moz-p42j78.customer.broadstripe.net) (Ping timeout: 121 seconds)
[21:21:23] *** Quits: erz (erz@moz-efrhus.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:21:41] <bluss> Torkable: you can write your own divergent expression with just loop { }
[21:21:42] *** Quits: PorCuNot (Mibbit@moz-jom.4h8.25.188.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:21:49] <Diggsey> the need to write divergent functions is somewhat rare though
[21:21:59] *** Quits: playbot (playbot@moz-1vk5qd.compute.amazonaws.com) (G-Lined: spam)
[21:21:59] *** Quits: playbot-mini (playbot-min@moz-1vk5qd.compute.amazonaws.com) (G-Lined: spam)
[21:22:01] *** Joins: PorCuNot (Mibbit@moz-jom.4h8.25.188.IP)
[21:22:09] <Diggsey> no playbot!
[21:22:11] *** Joins: santiago (santiago@moz-8th.j2e.167.12.IP)
[21:22:11] <Torkable> why panic! though
[21:22:14] <WindowsBunnyIsSorry> and there goes playbot again
[21:22:14] <PorCuNot> hi, can anyone see what I'm writing?
[21:22:22] <PorCuNot> how does this mibbit thing work?
[21:22:24] <JustAPerson> yes
[21:22:26] <JustAPerson> I see
[21:22:33] *** Joins: saterus (saterus@moz-o0ug28.res.rr.com)
[21:22:35] *** Quits: saterus (saterus@moz-o0ug28.res.rr.com) (Connection closed)
[21:22:41] <Diggsey> Torkable: are you asking why "panic!" is divergent?
[21:22:44] <PorCuNot> JustAPerson: thanks
[21:22:51] <Tobba> PorCuNot: I'm pretty sure it wont work in that form
[21:22:52] <Torkable> no, why use panic! :)
[21:22:57] <Tobba> (rekt)
[21:23:05] <PorCuNot> Tobba: q_q
[21:23:07] *** Tobba is now known as Scunthrope
[21:23:07] <fmtq> cmr: this is not ideal
[21:23:28] *** Quits: zettablade (zettablade@moz-t75mi5.tmodns.net) (Ping timeout: 121 seconds)
[21:23:30] <Diggsey> oh, it's used for errors for which there might not be a good way to handle them
[21:23:41] <PorCuNot> I should've tested it first
[21:23:42] *** Joins: Gentlefox (David@moz-57905a.res.rr.com)
[21:23:49] *** Quits: PorCuNot (Mibbit@moz-jom.4h8.25.188.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:24:00] *** Joins: mermi (Mibbit@moz-5ev.5pk.144.213.IP)
[21:24:09] *** Joins: zettablade (zettablade@moz-58u.jiv.125.50.IP)
[21:24:20] <Torkable> Diggsey: ok
[21:24:26] <gsingh93> has anyone here use Rust from python? can I get a Rust object into python and pass it to another Rust function?
[21:24:36] <gsingh93> what would the function signature be, pass by reference?
[21:24:55] <Diggsey> for example, indexing out of bounds of an array: unless you made all indexing return an "Option<T>" there's no possible return value that would be valid, so instead it just calls panic! and avoids returning altogether
[21:25:07] <Hannibal_Smith> gsingh93, you an expose a C api, so yes
[21:25:16] *** Joins: mercuntope (Mibbit@moz-jom.4h8.25.188.IP)
[21:25:30] *** Quits: bcasiello (Thunderbird@moz-tq6.nsv.22.72.IP) (Client exited)
[21:25:34] <Gentlefox> I've been going through Rust by Example, and I'm very confused by one of the lines. The page is http://rustbyexample.com/custom_types/structs.html and the line is ' let Point { x: my_x, y: my_y } = point; '
[21:25:41] <Hannibal_Smith> gsingh93, recetly a person wrote a nice blog post how to expose a Rust code as php module
[21:25:42] <mercuntope> fmtq: so where did you guys go?
[21:25:46] <Hannibal_Smith> For Python is will be similar
[21:25:50] *** Quits: smtudor (smtudor@moz-ijq.d3e.55.45.IP) (Quit: ZNC - http://znc.in)
[21:26:14] <Gentlefox> What does that line do? It looks like it's creating a non-named Point structure that would have no reference to it
[21:26:18] <talchas> gsingh93: see https://avacariu.me/articles/calling-rust-from-python.html perhaps
[21:26:20] *** Quits: [o__o] ([o__o]@moz-4s2t5k.compute-1.amazonaws.com) (G-Lined: spam)
[21:26:32] <Diggsey> Gentlefox: That's known as destructuring, it's equivalent to declaring two variables, my_x and my_y, and initialising them from the 'x' and 'y' fields of 'point'
[21:26:55] *** Joins: claudiop (claudiop@moz-sqo2tm.cpe.netcabo.pt)
[21:26:55] *** Quits: skade (skade@moz-6g5dak.pools.vodafone-ip.de) (Connection closed)
[21:27:05] <fmtq> merсuntope: ?
[21:27:08] *** Joins: skade (skade@moz-6g5dak.pools.vodafone-ip.de)
[21:27:12] <mercuntope> fmtq: you lied!
[21:27:16] <Hannibal_Smith> talchas, nice aritcle
[21:27:26] <Scunthrope> fmtq: I'm assuming theres a zero width char in there
[21:27:27] *** Joins: ascarter_ (ascarter@moz-705hf8.wa.comcast.net)
[21:27:36] *** Quits: mastax (Matthew@moz-5uac5e.o7r8.dm5j.ea00.2607.IP) (Ping timeout: 121 seconds)
[21:27:39] <WindowsBunnyIsSorry> fmtq: Lol, nice usage of a different c
[21:27:40] <Gentlefox> Diggsey: Thanks. That's a really weird syntax though. Could have used something other than the exact syntax used to initiate a struct
[21:27:41] <fmtq> Sсunthrope: maybe
[21:27:47] <mercuntope> WindowsBunnyIsSorry: oh, okay
[21:27:50] <Scunthrope> motherfucker
[21:28:04] <WindowsBunnyIsSorry> please no incest
[21:28:07] <mercuntope> be nice, Tobba
[21:28:15] <Scunthrope> hey
[21:28:17] <Scunthrope> this is my name now
[21:28:21] <Scunthrope> for the next hour while this remains funny anyways
[21:28:40] * insaneinside doesn't get it anymore.
[21:28:40] <niconii> maybe taking this out of #rust-offtopic wasn't the best idea...
[21:28:41] <mermi> I am getting a "cannot move out of borrowed content" error when I try to write a desugared for loop. I don't understand what's going on: http://pastebin.com/0iQEhuxt
[21:28:50] <Diggsey> Gentlefox: It's intentionally the same, it makes more sense when you're familiar with other functional languages
[21:28:52] <Scunthrope> niconii: it definitely wasn't
[21:28:58] <mermi> The compiler complains about line 40
[21:29:04] *** Joins: gandalf_ (zbraniecki@moz-63jjsk.tmodns.net)
[21:29:14] <mercuntope> Gentlefox: the pattern syntax is as close as it can be to the construction syntax
[21:29:22] <mermi> If I comment that line out and write the for-loop everything works.
[21:29:38] <mermi> But according to the docs, the for-loop is just sugar.
[21:29:42] *** Joins: dzhulk (Adium@moz-hnu.hki.140.95.IP)
[21:29:47] <mercuntope> Gentlefox: it's supposed to mirror it (`ref` is special to patterns, for example)
[21:29:59] <mbrubeck> mermi: You can call `iter()` instead of `into_iter()`
[21:30:10] *** Quits: lerxst (lerxst@21st.century.schizoid.man) (Quit: bye)
[21:30:19] <mermi> Is that what the for syntax does under the hood?
[21:30:23] *** Joins: lerxst (lerxst@21st.century.schizoid.man)
[21:30:28] <mercuntope> the for syntax calls into_iter()
[21:30:28] <Gentlefox> Hmm. In any case, I think the site needs a better explanation of it. It's shown in zero context with zero explanation
[21:30:31] <WindowsBunnyIsSorry> niconii: attempts to silence discussion on an exploit don't stop abuse of the exploit, it just makes it harder to keep track of it
[21:30:36] *** Quits: mbrubeck (sid61@moz-2pjnuf.0j4i.jtu0.0101.2620.IP) (G-Lined: spam)
[21:30:41] <mercuntope> >:)
[21:30:48] *** Joins: shachaf (shachaf@moz-evr8ss.members.linode.com)
[21:30:52] *** Joins: zyphrus_ (David@moz-nhi.pas.98.101.IP)
[21:30:54] <mermi> So then why does the for-syntax not create an error as well>
[21:30:59] *** Quits: TheLemonMan (lemonboy@moz-0909e0.50-151.net24.it) (Quit: "It's now safe to turn off your computer.")
[21:31:07] <mercuntope> mermi: I'm not seeing where you invoke iter
[21:31:11] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[21:31:15] <WindowsBunnyIsSorry> Where are ircops when you need them
[21:31:18] *** Joins: mbrubeck (sid61@moz-dpj2bo.scl3.mozilla.com)
[21:31:29] *** Quits: kgrandon (Adium@moz-9usa4g.2rkg.9kg1.0101.2620.IP) (Quit: Leaving.)
[21:31:33] <fmtq> why is it so easy for everyone to ban evade
[21:31:35] <mermi> I don't invoke iter. Just invoke_iter
[21:31:38] <fmtq> that's the real question 
[21:31:43] <mercuntope> mermi: aaaah, I see
[21:31:46] <mermi> Because I wanted to write a desugared for loop
[21:31:47] *** Scunthrope is now known as Scunthorpe
[21:31:52] <Scunthorpe> apparently that was misspelled
[21:31:55] <mermi> I mean into_iter
[21:31:57] <bluss> mermi: for loop does IntoIterator::into_iter(....)
[21:31:58] <fmtq> sure was.
[21:31:59] *** Quits: mercuntope (Mibbit@moz-jom.4h8.25.188.IP) (G-Lined: spam)
[21:32:02] *** Joins: playbot-mini (playbot-min@moz-1vk5qd.compute.amazonaws.com)
[21:32:02] *** Joins: playbot (playbot@moz-1vk5qd.compute.amazonaws.com)
[21:32:03] <Scunthorpe> hah
[21:32:07] <fmtq> oh the timing
[21:32:19] <Scunthorpe> he G-lined himself
[21:32:23] <Scunthorpe> I wonder he was trying to reply to me
[21:32:23] *** Quits: fmtq (fmtq@moz-d08itp.tpgi.com.au) (G-Lined: spam)
[21:32:31] <WindowsBunnyIsSorry> xD
[21:32:32] <panicbit> What is going on? oO
[21:32:34] *** Quits: gandalf (zbraniecki@moz-l2c.vj1.31.12.IP) (Ping timeout: 121 seconds)
[21:32:35] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:32:38] <Scunthorpe> I'm assuming he faked that one actually
[21:32:42] <Scunthorpe> because fucking fmtq
[21:32:46] <bluss> tobba, that's basically trolling
[21:32:47] <panicbit> Why the heck is everyone G-Lined =D
[21:32:49] *** Joins: mercuntope (Mibbit@moz-3lt.hlc.26.188.IP)
[21:32:53] <mercuntope> huh
[21:32:54] <niconii> panicbit: saying the c word bans you from the server
[21:33:06] <mercuntope> mermi: it should be (&self.components).into_iter();
[21:33:07] <panicbit> niconii: Like C++? ;)
[21:33:10] *** Quits: nott (nott@moz-to4.06o.57.86.IP) (Ping timeout: 121 seconds)
[21:33:10] <Scunthorpe> panicbit: because reasons, and spammers
[21:33:18] <niconii> panicbit: after this discovery, they went on to break playbot.
[21:33:19] <bluss> hearing the word g-lined feels so.. 90s?
[21:33:21] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[21:33:21] *** ChanServ sets mode: +o erickt
[21:33:29] *** Quits: Slava_I (slava@moz-a7c.n0g.135.88.IP) (Ping timeout: 121 seconds)
[21:33:32] <mercuntope> erickt: hi!
[21:33:38] <mbrubeck> mermi: The problem is that IntoIterator is implemented for both Vec and &Vec, and your code ends up using the Vec impl.  But `let it = IntoIterator::into_iter(&self.components);` should work.
[21:33:41] <niconii> oh god, don't go there
[21:33:59] <Scunthorpe> if it happens I'll laugh my ass off
[21:34:05] <niconii> erickt is too young to die
[21:34:07] <mercuntope> mermi: you had the & on the outside, where it doesn't do anything, basically
[21:34:09] *** Quits: zyphrus (David@moz-nhi.pas.98.101.IP) (Ping timeout: 121 seconds)
[21:34:20] <mercuntope> niconii: didn't you see mbrubeck earlier?
[21:34:29] <erickt> niconii: eep
[21:34:34] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (G-Lined: spam)
[21:34:36] *** cmr sets mode: +b mercuntope!*@*
[21:34:37] *** mercuntope was kicked by cmr (cmr)
[21:34:38] *** Joins: mkpankov (mkpankov@moz-efb.dee.149.83.IP)
[21:34:38] <Scunthorpe> SIDES
[21:34:39] *** cmr sets mode: +b Scunthorpe!*@*
[21:34:40] *** Quits: mkpankov` (mkpankov@moz-es9.u5t.23.84.IP) (Connection closed)
[21:34:40] <bluss> kick'em trolls
[21:34:41] *** Scunthorpe was kicked by cmr (cmr)
[21:34:51] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[21:34:53] <Tobba> okay enough of that
[21:35:01] *** Joins: eddyb (Mibbit@moz-3lt.hlc.26.188.IP)
[21:35:03] *** Joins: mattico (Matthew@moz-1pfa4i.q6jb.dm5j.ea00.2607.IP)
[21:35:11] <eddyb> cmr: one second too late, lol
[21:35:11] *** Quits: mkpankov (mkpankov@moz-efb.dee.149.83.IP) (Connection closed)
[21:35:13] *** Joins: lov2cod (Adium@moz-9of.is2.39.8.IP)
[21:35:16] <WindowsBunnyIsSorry> cmr:  Do a ban on *word*!*@* where word is... ya know
[21:35:25] *** cmr sets mode: +b *cunt*!*@*
[21:35:28] <eddyb> WindowsBunnyIsSorry: why do you have to be smart?
[21:35:34] <mermi> Use of undeclared type or module `IntoIterator`
[21:35:36] <insaneinside> ...cmr?!
[21:35:45] <mermi> What did I forget to import? ;)
[21:35:51] * insaneinside really doesn't get it.
[21:35:52] <nstoddard> Why is it an error to have an unused lifetime on a struct? Why not just a warning?
[21:35:56] <bluss> mermi: IntoIterator, I guess
[21:35:57] <niconii> (anyway, i filter join/quit messages in #rust so no, i didn't see)
[21:35:58] *** Quits: zettablade (zettablade@moz-58u.jiv.125.50.IP) (Ping timeout: 121 seconds)
[21:36:04] *** Joins: zettablade (zettablade@moz-h8a.t7p.56.172.IP)
[21:36:17] <eddyb> niconii: erickt ded
[21:36:18] <bluss> nstoddard: I guess to enforce that it has an effect
[21:36:20] *** Joins: mkpankov (mkpankov@moz-es9.u5t.23.84.IP)
[21:36:20] *** Joins: incident (Mibbit@moz-ad3ga8.vpn.ipredator.se)
[21:36:29] <bluss> nstoddard: you'll have to use std::marker::PhantomType to use it
[21:36:34] <niconii> eddyb: goddammit
[21:36:43] <mbrubeck> mermi: It should be in the prelude in the latest Rust beta or nightly
[21:36:50] <eddyb> niconii: just before cmr banned that evil guy
[21:36:54] *** Joins: gandalf (zbraniecki@moz-l2c.vj1.31.12.IP)
[21:37:00] *** Quits: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP) (Connection closed)
[21:37:02] <niconii> well... we'll always remember you, erickt
[21:37:06] <insaneinside> #rust-offtopic, plz
[21:37:11] *** Joins: [o__o] ([o__o]@moz-4s2t5k.compute-1.amazonaws.com)
[21:37:22] <Tobba> offtopic got muted
[21:37:23] <WindowsBunnyIsSorry> insaneinside: We can't!
[21:37:25] <WindowsBunnyIsSorry> cmr muted it :(
[21:37:36] <WindowsBunnyIsSorry> cmr forced this channel into offtopic mode
[21:37:37] <WindowsBunnyIsSorry> bad cmr
[21:37:43] <Tiffany> I thought you would give up on it by now
[21:37:55] <Tiffany> has anyone tried contacting an ircop fix it yet?
[21:37:59] <cmr> yes.
[21:38:01] <Tobba> Tiffany: yes
[21:38:03] <Tiffany> okay
[21:38:04] <Tobba> he got G-lined
[21:38:17] <WindowsBunnyIsSorry> >ircop got g-lined, wat?
[21:38:23] <mermi> Hmm, I have the 1.0.0-beta
[21:38:29] <Tobba> I think erickt was an ircop anyways?
[21:38:32] <niconii> Tobba: are... are you serious
[21:38:34] <cmr> he is not.
[21:38:42] <Tobba> awww
[21:38:43] <mermi> But it doesn't like `let it = std::iter::IntoIterator::into_iter(&self.components);`
[21:38:44] <Tobba> that would have been way funnier
[21:38:56] <bluss> mermi: oh, why not?
[21:39:02] <eddyb> mermi: (&self.compomenets).into_iter() should just work
[21:39:08] <eddyb> componenets, even
[21:39:48] *** Quits: djcb (user@moz-nqdj21.elisa-laajakaista.fi) (Connection closed)
[21:39:53] *** Quits: gandalf (zbraniecki@moz-l2c.vj1.31.12.IP) (Quit: Textual IRC Client: www.textualapp.com)
[21:39:57] *** Quits: gandalf_ (zbraniecki@moz-63jjsk.tmodns.net) (Ping timeout: 121 seconds)
[21:39:59] *** Joins: tyrion-mx (tyrion@moz-d6ctul.dfri.se)
[21:40:02] *** Joins: brendan (brendaneich@moz-9poln0.public.wayport.net)
[21:40:04] <mermi> That doesn't work
[21:40:13] <eddyb> mermi: why?
[21:40:16] <mermi> It gives "cannot move out of borrowed content"
[21:40:29] <eddyb> mermi: you sure?
[21:40:39] <mermi> 		pub fn labels(&self) {
[21:40:39] <eddyb> mermi: like, did you put the & in the right spot?
[21:40:45] <mermi> 			let it = (&self.components).into_iter();
[21:40:50] <mermi> ...
[21:41:01] <eddyb> how are you using `it`?
[21:41:11] <mermi> So far, not at all
[21:41:11] *** Joins: brennie (barret@moz-to1.pp6.236.104.IP)
[21:41:14] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[21:41:17] *** Joins: shawnadelic (shawn@moz-u5o3kk.res.rr.com)
[21:41:18] <eddyb> since you didn't paste the relevant part of the error, which is *what* was moved out of
[21:41:20] <eddyb> mermi: huh
[21:41:30] *** Quits: larhat (Adium@moz-tb1ulb.cable.virginm.net) (Quit: Leaving.)
[21:41:31] <mermi> Let me paste the whole thing to pastie
[21:41:38] *** Joins: SingingTree (SingingTree@moz-sh9.0dv.37.202.IP)
[21:41:41] *** Quits: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net) (Ping timeout: 121 seconds)
[21:41:41] <mermi> And thank you for you help/patience!
[21:41:51] *** Quits: zettablade (zettablade@moz-h8a.t7p.56.172.IP) (Connection closed)
[21:42:07] <eddyb> playbot: (&vec![1, 2, 3]).into_iter();
[21:42:09] -playbot- ()
[21:42:16] <eddyb> yeah, that should work
[21:42:34] *** Joins: kgrandon (Adium@moz-h54ira.2rkg.9kg1.0101.2620.IP)
[21:42:42] <shawnadelic> playbot: 1;
[21:42:43] *** Joins: fmtq (fmtq@moz-d08itp.tpgi.com.au)
[21:42:43] -playbot- ()
[21:42:47] <cjwelborn>  /j #rust-offtopic
[21:42:50] <mbrubeck> eddyb: The problem is that it's calling Vec::into_iter instead of <&Vec>::into_iter
[21:42:50] <cjwelborn> woops
[21:42:52] <eddyb> playbot: let a = vec![1, 2, 3]; (&a).into_iter(); a
[21:42:53] -playbot- [1, 2, 3]
[21:43:05] <eddyb> mbrubeck: ^^
[21:43:05] <mermi> http://pastebin.com/CkY3wFJG
[21:43:09] <shawnadelic> playbot: 2
[21:43:10] -playbot- 2
[21:43:18] <mermi> > rustc kruskal.rs; and ./kruskal
[21:43:22] <mermi> kruskal.rs:41:13: 41:32 error: cannot move out of borrowed content
[21:43:26] *** Joins: davebettin (davebettin@moz-vc98n0.bhak.dqhm.0007.2601.IP)
[21:43:27] <mermi> kruskal.rs:41 			let it = (&self.components).into_iter();
[21:43:33] <mermi>               			         ^~~~~~~~~~~~~~~~~~~
[21:43:37] <mermi> error: aborting due to previous error
[21:43:49] * eddyb scratches head
[21:43:54] <bluss> WindowsBunnyIsSorry: does cargo work on windows?
[21:44:03] *** Joins: hjr3 (hradtke@moz-dmp.av4.169.69.IP)
[21:44:05] <SingingTree> It should
[21:44:16] *** Quits: reed (reed@tech.monkey) (RecvQ exceeded)
[21:44:17] <srjek> I'm using it right now, so it probably works
[21:44:17] <Tobba> it kinda-ish does
[21:44:20] <SingingTree> I use it fairly often on Windows envs
[21:44:22] <bluss> oh
[21:44:25] <Tobba> Ctrl+C with cargo run fails miserably
[21:44:27] *** Quits: tomprogrammer (thomas@moz-v7ibln.tr5r.qept.4dd0.2001.IP) (Quit: WeeChat 1.1.1)
[21:44:35] *** Joins: reed (reed@tech.monkey)
[21:44:40] <geri> is that the way to construct a class in rust? http://is.gd/0eBbnF
[21:44:41] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[21:44:41] *** ChanServ sets mode: +o erickt
[21:44:45] *** Quits: playbot-mini (playbot-min@moz-1vk5qd.compute.amazonaws.com) (G-Lined: spam)
[21:44:45] *** Quits: playbot (playbot@moz-1vk5qd.compute.amazonaws.com) (G-Lined: spam)
[21:44:45] <bluss> I'm fixing an issue with shell escaping command lines output in --verbose
[21:44:46] <talchas> mermi: hmm, that works on the playpen
[21:44:50] <eddyb> Tobba: works for me
[21:45:03] <Tobba> eddyb: for me it continues running
[21:45:05] <Tobba> on windows that is
[21:45:15] <fmtq> well that was unpleasant.
[21:45:15] <Tobba> well, the thing it was running just keeps on going
[21:45:18] <eddyb> I did try it in windows
[21:45:21] <srjek> Ctrl+C failing terribly on windows seems to be normal for something that has launches other processes. :(
[21:45:27] <niconii> you broke playbot again
[21:45:28] <niconii> why
[21:45:31] <eddyb> or I thought I've tried it
[21:45:33] <bluss> for example printing  --feature=\"unstable\"  in the verbose outpu so you can copy&paste it.  What should shell escaping look like on Windows?
[21:45:53] <fmtq> you
[21:45:58] <mermi> I tried it on the playpen and it worked there.
[21:45:59] <talchas> mermi: http://is.gd/vQyvM5
[21:46:06] <panicbit> geri: There are no classes in Rust so the answer to your question is a little bit undefined.
[21:46:28] <WindowsBunnyIsSorry> bluss: Cargo does work on Windows
[21:46:30] <mermi> @talchas: cheers
[21:46:32] <WindowsBunnyIsSorry> bluss: I use it all the time
[21:46:34] <Tobba> hm
[21:46:38] *** Joins: davebettin_ (davebettin@moz-ip635p.or.comcast.net)
[21:46:39] <Tobba> I wonder if this still does anything
[21:46:42] <mermi> Does the playpen run the nightly?
[21:46:43] <bluss> WindowsBunnyIsSorry: what kind of shell do you use?
[21:46:50] *** Joins: zettablade (zettablade@moz-h8a.t7p.56.172.IP)
[21:46:50] *** Quits: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr) (Quit: )
[21:46:51] <Tobba> apparently not a lot
[21:46:52] <bluss> WindowsBunnyIsSorry: I'm terribly incompetent at windows sorry
[21:47:04] *** Quits: srh (User@moz-19lh79.q9f2.utp8.0306.2602.IP) (Quit: Leaving)
[21:47:05] <bluss> mermi: yes
[21:47:06] *** Quits: ascarter_ (ascarter@moz-705hf8.wa.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:47:22] <talchas> it can also run beta though, which also works
[21:47:22] <bluss> mermi: well, it has a dropdown for beta vs nightly
[21:47:22] <mermi> Ok. Maybe I should also install that...
[21:47:29] <geri> panicbit: have you seen my example?
[21:47:33] *** Joins: DemonOne (Avi@moz-ecekj8.red.bezeqint.net)
[21:47:36] <geri> what i try to achive?
[21:47:37] *** Quits: tigrou3tac (fabien@moz-gdonfo.fbx.proxad.net) (Ping timeout: 121 seconds)
[21:47:37] <bluss> talchas: beta is the default?
[21:47:38] <mermi> Ah, just saw it
[21:47:50] <mermi> So something must be screwed up with my system
[21:48:11] <WindowsBunnyIsSorry> bluss: I use msys2, from mingw64_shell.bat, but I disabled mintty because I dislike it
[21:48:16] <talchas> bluss: probably? iirc it remembers what you last chose so I have no idea what the default is
[21:48:21] *** Joins: Guest_ (textual@moz-i0id0o.ca.comcast.net)
[21:48:24] <WindowsBunnyIsSorry> bluss: And I use a Rust + Cargo that I built myself locally
[21:48:45] <geri> test
[21:48:46] <panicbit> geri: Yeah
[21:48:51] <brson> anybody have content or links for twir?
[21:48:59] <geri> panicbit: i added a struct...
[21:49:00] *** Quits: nstoddard (nstoddard@moz-urhoua.resnet.purdue.edu) (Quit: ChatZilla 0.9.91.1 [Firefox 37.0.2/20150415140819])
[21:49:19] <mermi> Just to make sure I understand what's going on:
[21:49:31] <mermi> If I omit the & (or put it into the same place)
[21:49:32] <mbrubeck> mermi: It looks like the difference between your original pastebin and talchas's link is `&(self.components)` versus `(&self.components)`
[21:50:04] *** Joins: sambotron (sambotron@moz-lgc.bdf.247.173.IP)
[21:50:05] *** Quits: sambotron (sambotron@moz-lgc.bdf.247.173.IP) (Connection closed)
[21:50:15] *** Quits: davebettin (davebettin@moz-vc98n0.bhak.dqhm.0007.2601.IP) (Ping timeout: 121 seconds)
[21:50:18] <panicbit> geri: Structs are the way to go Rust
[21:50:28] <bluss> WindowsBunnyIsSorry: do you know what kind of shell escaping is needed to be able to put a command line from  cargo build --verbose, to copy & paste it back into the terminal?
[21:50:38] <talchas> mbrubeck: yeah, but there was also a paste with it broken as (&self.), which was weird
[21:50:46] *** Quits: asQuirre_ (asQuirreL@moz-ro1qqu.ox.ac.uk) (Connection closed)
[21:50:48] <WindowsBunnyIsSorry> bluss: If you're using cmd.exe it should just work
[21:50:56] <mermi> then it tries to pass ownership to into_iter(). But I cannot do that since I only borrowed it.
[21:50:59] *** Joins: asQuirreL (asQuirreL@moz-ro1qqu.ox.ac.uk)
[21:51:00] <WindowsBunnyIsSorry> bluss: But if you're using any sort of mingw or msys shell then you need to replace all \ with /
[21:51:01] <bluss> WindowsBunnyIsSorry: for example on linux we want to \-escape spaces, quotes etc
[21:51:04] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[21:51:05] <talchas> mermi: yeah
[21:51:16] *** Quits: kgrandon (Adium@moz-h54ira.2rkg.9kg1.0101.2620.IP) (Quit: Leaving.)
[21:51:25] <WindowsBunnyIsSorry> bluss: All you need to do is replace \ with / so msys/mingw can handle it
[21:51:28] <mermi> Luckily into_iter is also implemented on references to vec (<- this is probably not the way you call these things in rust?)
[21:51:31] <WindowsBunnyIsSorry> otherwise the commands should be correct
[21:51:33] *** Quits: asQuirreL (asQuirreL@moz-ro1qqu.ox.ac.uk) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:51:48] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:51:52] <mermi> And since I have ownership of the reference, I can pass that
[21:51:55] <talchas> "borrowed pointer", but reference isn't unreasonable
[21:51:55] <bluss> WindowsBunnyIsSorry: for example cargo would output --features="foo"  which you can't give back
[21:52:06] <bluss> WindowsBunnyIsSorry: because the shell strips the ""'s
[21:52:12] *** Joins: kieran (kieran@moz-c5gk5j.ihug.co.nz)
[21:52:16] <eddyb> mermi: we call them "references" all the time
[21:52:28] <panicbit> geri: Everything in your code looks fine so far
[21:52:31] <bluss> WindowsBunnyIsSorry:  or it would output  linker=gcc -L/foo  which needs to quote the space
[21:52:34] *** Quits: incident (Mibbit@moz-ad3ga8.vpn.ipredator.se) (G-Lined: spam)
[21:52:40] <bluss> because it was all one argument
[21:52:41] <mermi> @mrbrubeck: I fixed the & issue as it still doesn't work on my machine with the beta
[21:52:45] *** Quits: gonzaloserrano (Adium@moz-0os.6hf.231.77.IP) (Quit: Leaving.)
[21:53:10] <WindowsBunnyIsSorry> bluss: Weird, I've never had any issues like that
[21:53:14] *** Joins: asQuirreL (asQuirreL@moz-ro1qqu.ox.ac.uk)
[21:53:21] <WindowsBunnyIsSorry> bluss: What shell are you using? plain cmd? mingw? msys? cygwin?
[21:53:36] <mermi> Can you have a borrowed pointer to a borrowed pointer?
[21:53:45] <XMPPwocky> mermi: yep
[21:53:57] <mermi> Is that something you'd ever want in rust?
[21:54:01] <WindowsBunnyIsSorry> mermi: You can arbitrarily nest pointers
[21:54:04] <bluss> WindowsBunnyIsSorry: I'm not using windows, hence I need to know how this bugfix impactst windows shells
[21:54:07] <mermi> Or more of a theoretical curiosity
[21:54:10] <XMPPwocky> i much prefer "reference" to "borrowed pointer" personally
[21:54:15] *** Quits: d_rezzer (chatzilla@moz-q9t.4l8.207.104.IP) (Ping timeout: 121 seconds)
[21:54:25] <XMPPwocky> mermi: you can have a reference to any type, and a reference to a type is itself a type
[21:54:31] *** Joins: lenstr (lenstr@moz-rrh.vju.25.171.IP)
[21:54:39] <talchas> mermi: yeah, you see some use in things like &mut &[T]
[21:54:41] <WindowsBunnyIsSorry> bluss: Well, all I know is that I could always copy pasta cargo command lines just fine, I just had to replace \ with / for msys/mingw
[21:54:49] *** Joins: playbot (playbot@moz-1vk5qd.compute.amazonaws.com)
[21:54:49] *** Joins: playbot-mini (playbot-min@moz-1vk5qd.compute.amazonaws.com)
[21:54:57] <bluss> WindowsBunnyIsSorry: we should fix all of that
[21:54:58] <talchas> where you can move the &[T] along as you read
[21:55:07] <mermi> What is &[T]
[21:55:08] <bluss> WindowsBunnyIsSorry: and we need to know if the --features="foo" bug applies
[21:55:10] <mermi> I don't know that syntax
[21:55:26] <mermi> (the [ ] confuse me)
[21:55:30] <insaneinside> mermi: reference (pointer) to an array of T.
[21:55:32] <bluss> WindowsBunnyIsSorry: fwiw, bors just rejected my cargo PR due to not passing on Windows
[21:55:32] <WindowsBunnyIsSorry> bluss: And really, \ is correct, its just that mingw interprets it as an escape instead of a path separator
[21:55:43] *** Joins: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net)
[21:55:48] <mermi> Ah, there is arrays, not just vecs?
[21:56:05] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[21:56:05] <insaneinside> mermi: anything in C, is (mostly) in Rust. ;)
[21:56:07] <frankmcsherry> is byteorder the right place for "to little endian" and "from little endian" functionality?
[21:56:14] <mermi> sweet
[21:56:15] <frankmcsherry> right place to find*
[21:56:21] *** Quits: kieran (kieran@moz-c5gk5j.ihug.co.nz) (Ping timeout: 121 seconds)
[21:56:36] *** Joins: d_rezzer (chatzilla@moz-t0fmuj.hfc.comcastbusiness.net)
[21:56:53] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[21:56:53] *** ChanServ sets mode: +o erickt
[21:56:59] <WindowsBunnyIsSorry> bluss: Can you give me an example rust project using cargo that I can build using --verbose and then copy lines to test?
[21:57:01] <Murarth> frankmcsherry: .to_be() and .to_le() are in the standard library. byteorder is useful if you're converting to and from series-of-bytes representations.
[21:57:08] <WindowsBunnyIsSorry> bluss: I'll test all the lines you need using both cmd and mingw
[21:57:21] <frankmcsherry> Murarth: ah, thanks. I couldn't find them with a google search and assumed they were crated.
[21:57:35] <bob> no_std yolo
[21:57:45] *** Joins: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net)
[21:57:51] *** Joins: renderfu_ (renderful@moz-atg40s.co.comcast.net)
[21:57:52] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Connection closed)
[21:58:01] *** Quits: SneakySnake (nya@moz-i9is4u.pool.telekom.hu) (Quit: Leaving)
[21:58:41] *** Quits: kmicu (kmicu@moz-uga.edn.218.91.IP) (Client exited)
[21:58:49] <mermi> Is there something like yield in c#? To make implementing custom iterators easy?
[21:58:52] <insaneinside> bob: You Obviously Love Owls?
[21:59:00] <insaneinside> mermi: nope.
[21:59:04] <talchas> mermi: it's a bit more complicated than that - [u8; 10] is basically the fixed-size array char[10], but [u8] has a size and bounds checking along with it stored in the pointer
[21:59:05] * insaneinside would love it.
[21:59:09] <talchas> mermi: no
[21:59:12] <erickt> niconii: was there something you wanted? I fell off the network
[21:59:34] *** Quits: lenstr (lenstr@moz-rrh.vju.25.171.IP) (Ping timeout: 121 seconds)
[21:59:38] <bob> correct
[21:59:40] <fmtq> erickt: how?
[21:59:53] <erickt> fmtq: computer went to sleep :)
[21:59:55] <talchas> (if someone comes up with a good way to implement it, I expect they'd take it, but it's harder in a lower-level language like rust)
[21:59:56] <bluss> WindowsBunnyIsSorry: ok you can test itertools using cargo build --verbose --features="unstable"
[22:00:02] *** Joins: skeuomorf (skeuomorf@moz-h8l.u8d.32.197.IP)
[22:00:04] <geri> panicbit: using the struct as i do is fine and preferred?
[22:00:11] *** Quits: errordeveloper (ilya@moz-rbv.o6q.208.90.IP) (Ping timeout: 121 seconds)
[22:00:12] <bluss> WindowsBunnyIsSorry: the features option triggers the problematic feature argument to rustc
[22:00:20] *** Quits: Racquetball (namestolenw@moz-dnlovt.cpe.twtelecom.net) (Quit: leaving)
[22:00:21] *** Quits: btobolaski (btobolaski@moz-ltbh80.va.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[22:00:25] <insaneinside> talchas: I reject your argument -- there's that one coroutines library for C++
[22:00:29] <WindowsBunnyIsSorry> bluss: link to itertools repo pls
[22:00:34] <panicbit> mermi: Actually &[T] is not an array but a slice (a view of an array) http://doc.rust-lang.org/book/primitive-types.html#slices
[22:00:41] <talchas> insaneinside: I didn't say /impossible/, just harder :P
[22:00:43] <bluss> WindowsBunnyIsSorry: https://github.com/bluss/rust-itertools
[22:00:49] *** Joins: kgrandon (Adium@moz-vsuv6t.2rkg.9kg1.0101.2620.IP)
[22:01:05] *** Joins: wldcordeiro_ (wldcordeiro@moz-pvsror.ut.comcast.net)
[22:01:08] <talchas> insaneinside: also, link/name? I'd like to see what it does
[22:01:14] *** bentley|away is now known as bentley
[22:01:23] <panicbit> geri: Yes
[22:01:34] <WindowsBunnyIsSorry> bluss: okay, running the build
[22:01:49] <geri> panicbit: how can i remove the warning?
[22:01:53] *** Quits: renderfu_ (renderful@moz-atg40s.co.comcast.net) (Ping timeout: 121 seconds)
[22:01:57] *** Joins: dinfuehr (dinfuehr@moz-j5sgb8.highway.telekom.at)
[22:02:00] <insaneinside> talchas: Boost.Coroutine.  The first part of the name is apparently... controversial. :/
[22:02:10] <talchas> ah, of course it's boost :P
[22:02:15] *** Quits: zyphrus_ (David@moz-nhi.pas.98.101.IP) (Ping timeout: 121 seconds)
[22:02:29] <panicbit> geri: Either start using a HashMap or remove the import
[22:02:58] *** Quits: dschatzberg (dschatz@moz-nk1clf.bu.edu) (Quit: Leaving)
[22:03:04] <frankmcsherry> Well, I can confirm that .from_le() and .to_le() don't get optimized out on my computer. =/
[22:03:06] <WindowsBunnyIsSorry> bluss: yessss, that does cause issues
[22:03:16] *** Quits: wldcordeiro (wldcordeiro@moz-mpr8k1.hmj8.a2nn.0007.2601.IP) (Ping timeout: 121 seconds)
[22:03:30] <bluss> the same error, error: unexpected token: `unstable` ?
[22:03:35] *** Quits: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net) (Ping timeout: 121 seconds)
[22:03:53] *** Quits: nwin (textual@moz-ben623.pools.vodafone-ip.de) (Quit: Textual IRC Client: www.textualapp.com)
[22:04:40] *** Quits: basicdays (basicdays@moz-vreeoj.cable.rcn.com) (Quit: I'm out)
[22:04:47] <WindowsBunnyIsSorry> yep
[22:04:53] <geofft> insaneinside: "These are preprocessor macros, and are implemented in terms of a switch statement using a technique similar to Duff's Device." uhhhh 
[22:05:01] <fmtq> cmr: unmute offtopic please, this is silly.
[22:05:14] <bluss> WindowsBunnyIsSorry: What shell is that? Thanks a lot for testing this!
[22:05:14] <geofft> I guess that's boost::asio::coroutine, which might be different? 
[22:05:28] <insaneinside> geofft: not as far as I know.
[22:05:31] <WindowsBunnyIsSorry> bluss: All you have to do is add a backslash before the quotes
[22:05:32] <talchas> geofft: that coroutine implementation is the most hilariously terrible
[22:05:34] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[22:05:35] <WindowsBunnyIsSorry> and that fixes it in cmd
[22:05:35] *** Joins: mkpankov` (user@moz-es9.u5t.23.84.IP)
[22:05:45] <insaneinside> geofft: but in any case I've used it and it *works*.
[22:05:56] <insaneinside> Which is better than I can say for Rust's coroutines. :P
[22:06:00] *** Quits: dinfuehr (dinfuehr@moz-j5sgb8.highway.telekom.at) (Ping timeout: 121 seconds)
[22:06:09] <bluss> WindowsBunnyIsSorry: yeah that's what my PR is trying to do. But in the first iteration I was escaping other special chars too
[22:06:14] <WindowsBunnyIsSorry> bluss: for mingw replace backslashes with forward slashes and then add backslashes before quotes
[22:06:20] <bluss> WindowsBunnyIsSorry: including \, which kills windowspaths
[22:06:24] <geofft> Boost.Coroutine seems to use Boost.Context, which is basically setcontext() 
[22:06:24] <bluss> WindowsBunnyIsSorry: ok
[22:06:26] *** Quits: wtw (wtw@moz-tpvltk.org) (Ping timeout: 121 seconds)
[22:06:27] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[22:06:29] <WindowsBunnyIsSorry> bluss: escape nothing else
[22:06:32] <bluss> WindowsBunnyIsSorry: I'll quote you
[22:06:34] <WindowsBunnyIsSorry> Just quotes
[22:06:37] *** Joins: basicdays (basicdays@moz-vreeoj.cable.rcn.com)
[22:06:42] <bluss> ok hehe
[22:06:45] <WindowsBunnyIsSorry> bluss: here are the official rules https://msdn.microsoft.com/en-us/library/17w5ykft%28v=vs.85%29.aspx
[22:06:51] <geofft> which it seems like you ought to be able to implement in Rust just fine 
[22:07:17] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[22:07:17] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:07:53] <niconii> erickt: oh, nah
[22:07:59] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[22:08:09] <talchas> insaneinside: ok, it's not clear, it sounds like it's stackcopying
[22:08:28] *** Quits: mkpankov (mkpankov@moz-es9.u5t.23.84.IP) (Quit: Bye)
[22:08:42] <insaneinside> ehh, that doesn't sound very efficient, does it?
[22:08:47] *** Joins: Porkepix (Porkepix@moz-e1bv2v.rev.sfr.net)
[22:08:56] *** Joins: mkpankov (user@moz-es9.u5t.23.84.IP)
[22:09:01] <talchas> insaneinside: exactly :P
[22:09:10] *** Quits: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net) (Client exited)
[22:09:13] <talchas> though as geofft says, it might be setcontext instead
[22:09:24] <talchas> which is just a userspace-implemented context switch
[22:09:45] <WindowsBunnyIsSorry> bluss: oh, and if things have spaces in them, then you wrap it in quotes
[22:09:46] *** Joins: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net)
[22:09:47] *** Parts: cmtptr (corey@moz-csd.obd.59.71.IP) ()
[22:10:02] <bluss> WindowsBunnyIsSorry: or backslash escape?
[22:10:04] <talchas> in either case there are some benefits over just using threads, but less than you might think
[22:10:05] <WindowsBunnyIsSorry> no
[22:10:09] <WindowsBunnyIsSorry> not backslash escape
[22:10:14] <bluss> WindowsBunnyIsSorry: ok
[22:10:15] <WindowsBunnyIsSorry> you can only backslash escape double quotes
[22:10:19] <WindowsBunnyIsSorry> nothing else
[22:10:32] <bluss> ahh tricky
[22:10:38] <insaneinside> talchas: ergonomics, though?
[22:10:43] <bluss> thanks a lot for the help though
[22:12:10] <WindowsBunnyIsSorry> bluss: 1. For the sake of mingw replace \ with / 2. escape existing double quotes 3. add double quotes around arguments with spaces
[22:12:20] *** Quits: borromakot (Adium@moz-rdo.h3t.104.38.IP) (Ping timeout: 121 seconds)
[22:12:44] *** Joins: tristanseifert (tristanseif@moz-r0t7ns.res.rr.com)
[22:12:44] <bluss> WindowsBunnyIsSorry: ok so 2 and 3 apply to both cmd and mingw?
[22:12:50] <WindowsBunnyIsSorry> yes
[22:12:56] <bluss> ok
[22:13:10] <talchas> insaneinside: I mean, you can currently do it with an actual thread
[22:13:28] <talchas> and you'll probably get some perf using setcontext/getcontext, but it's basically the same thing
[22:13:30] *** Joins: cptroot (Mibbit@moz-n169l8.caltech.edu)
[22:13:40] <insaneinside> talchas: well, yes, but the ergonomics are why i like it.  :)
[22:13:56] *** Joins: zzing (textual@moz-jucm1n.cpe.distributel.net)
[22:14:08] *** Joins: naerbnic (naerbnic@moz-i9o.rs4.199.12.IP)
[22:14:15] <talchas> (and you'd probably really want thread::scoped, and the proposed fix would be less useful for things like iter impls)
[22:14:48] <naerbnic> If you destruct a struct by move (e.g. let Foo{a: a, b: b, c: c} = v), is the drop for that value discarded, if there is one?
[22:15:02] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:15:03] <naerbnic> Err, that is that the drop is not called?
[22:15:16] <bluss> naerbnic: You can't deconstruct it if it has a Drop
[22:15:20] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[22:16:06] *** Quits: Guest_ (textual@moz-i0id0o.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:16:23] <srjek> Is there a provided way to convert from i64 to usize and check that the number didn't change? (in the context of array indexing)
[22:16:25] <bluss> naerbnic: maybe this has changed?
[22:16:35] <insaneinside> bluss says, "you can't deconstruct something with a deconstructor"??
[22:16:42] *** Joins: James (quassel@moz-225vcm.range86-148.btcentralplus.com)
[22:16:53] *** Quits: tadh (quassel@moz-iq6hhs.biz.rr.com) (Connection closed)
[22:16:55] <Diggsey> destructor, not deconstructor :P
[22:17:04] <talchas> "error: cannot move out of type `Foo`, which defines the `Drop` trait"
[22:17:14] <insaneinside> Diggsey: yes, but abused for clarity.
[22:17:29] *** Joins: Guest58 (textual@moz-70hlaj.austtx.sbcglobal.net)
[22:17:34] <talchas> if the members are all Copy, it'll work and call the Drop, if not, error
[22:17:39] <talchas> (compile error)
[22:18:00] <naerbnic> Okay, good to know
[22:18:03] <Diggsey> unlress you destructure via "ref"?
[22:18:06] *** Joins: nstoddard (nstoddard@moz-urhoua.resnet.purdue.edu)
[22:19:00] <bluss> that's how it is. It's only moving out that is illegal
[22:19:01] <talchas> Diggsey: yeah, in which case you're just borrowing the struct
[22:19:02] <naerbnic> Well, then a related question: Can you destructure self in a drop method?
[22:19:02] *** Quits: cjwelborn (cjwelborn@moz-np6hed.al.charter.com) (Quit: sys.exit(1))
[22:19:07] <bluss> so copying out or reffing is ok
[22:19:33] <naerbnic> Since I’m guessing there’s special handling for the drop checks in there
[22:19:41] *** Joins: smtudor (smtudor@moz-ijq.d3e.55.45.IP)
[22:19:54] *** Joins: lenstr (lenstr@moz-rrh.vju.25.171.IP)
[22:20:17] *** Quits: Guest58 (textual@moz-70hlaj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:20:20] <bluss> naerbnic: experiment will tell. Though gut has already said no
[22:20:21] <talchas> naerbnic: I'm not sure, note that drop takes &mut self
[22:20:43] <naerbnic> talchas: Did it used to take a static self?
[22:21:04] <WindowsBunnyIsSorry> It took &mut self for as long as I can remember
[22:21:15] *** Quits: vosen (vosen@moz-mtm1g4.dynamic.chello.pl) (Connection closed)
[22:21:22] <bluss> drop useed to take &self
[22:21:25] <bluss> in fact
[22:21:50] <bluss> transmute to mut was popular with that
[22:22:07] <bluss> see, Rust is better today :)
[22:22:15] <naerbnic> Heh, fair enough
[22:22:23] *** Quits: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se) (Quit: bajs)
[22:22:24] <XMPPwocky> trans-mut, if you will
[22:22:45] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[22:22:49] <bluss> I'll just trans-mut that, the rustie said
[22:22:56] *** Quits: Douman (Douman@moz-fsgfhk.dynamic.mts-nn.ru) (Quit: )
[22:23:01] <naerbnic> Clever
[22:23:23] *** Quits: lenstr (lenstr@moz-rrh.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[22:23:51] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[22:24:29] *** Quits: brson (brson@moz-l8ebtf.sfo1.mozilla.com) (Quit: leaving)
[22:24:37] <insaneinside> `libc::types::os::arch::c95::size_t`?? Really?
[22:24:43] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[22:24:51] <insaneinside> In C it's just `size_t`.
[22:25:06] <pingveno> insaneinside: I believe it's reimported
[22:25:08] *** Quits: tormoz (geov@moz-3q6.afp.124.178.IP) (Ping timeout: 121 seconds)
[22:25:12] <pingveno> libc::size_t
[22:25:18] *** Quits: eibwen (eibwen@moz-v4qg3e.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[22:25:19] <pingveno> Or something of that sort
[22:25:28] <bluss> insaneinside: yeah don't use those long paths
[22:25:53] *** Quits: esgeh (sg@moz-a7j.cns.76.134.IP) (Ping timeout: 121 seconds)
[22:26:43] <mkpankov> oh I actually use something like the above...
[22:26:46] *** Joins: erz (erz@moz-efrhus.broadband.corbina.ru)
[22:26:57] <mkpankov> didn't notice it's reexported
[22:27:00] <insaneinside> searching the documentation didn't find the reexport :O
[22:27:26] *** Quits: loyd (loyd@moz-uft.32f.108.213.IP) (Ping timeout: 121 seconds)
[22:27:45] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[22:28:18] <mkpankov> it's because it's via pub use types::common::c95::*;
[22:28:20] *** Joins: tormoz (geov@moz-3q6.afp.124.178.IP)
[22:28:33] <geri> excuse me what is 'a? pub struct DijkstraGraph<'a> {     pub graph: &'a Graph,
[22:28:54] <mkpankov> geri: lifetime specifier
[22:29:04] <geri> omh
[22:29:05] <geri> g
[22:29:14] <bluss> geri: lifetime parameter something like a type parameter
[22:29:27] <bluss> geri: dijkstragraph is generic over the lifetime 'a
[22:30:07] <bluss> geri: that is to say it has a lifetime parameter because it contains something that's borrowed (the &Graph reference)
[22:30:08] <geri> what does generic mean in that context?
[22:30:15] <geri> oh
[22:30:32] *** Joins: njn (chatzilla@moz-390.dhg.170.124.IP)
[22:30:36] <geri> dont use a reference :)
[22:30:46] <bluss> generic means that for every lifetime 'foo you can make a type DijkstraGraph<'foo>
[22:31:11] *** Quits: dzyp (hiatt@moz-ofiasr.static.qwest.net) (Ping timeout: 121 seconds)
[22:31:17] <bluss> for every type T you can make a Vec<T> because the vector is generic in the element type
[22:32:06] *** Quits: brendan (brendaneich@moz-9poln0.public.wayport.net) (Client exited)
[22:32:17] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[22:32:34] *** Quits: new_one (new_one@moz-fsb.g8k.42.128.IP) (Quit: WeeChat 1.1.1)
[22:32:50] <mermi> Is there a way to find out what type an expression has?
[22:32:55] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[22:33:00] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:33:00] *** Quits: jshs (jshs@moz-t44k5s.dip0.t-ipconnect.de) (Client exited)
[22:33:13] *** Quits: hjr3 (hradtke@moz-dmp.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:33:32] <panicbit> mermi: Just do something like "let _: () = expr;"
[22:33:45] *** Quits: frankmcsherry (frankmcsher@moz-uivq2j.dyn.telefonica.de) (Connection closed)
[22:34:04] <panicbit> mermi: Basically let the compiler fail with the wrong type and the compiler will tell you the correct type
[22:34:20] <geri> bluss: http://is.gd/LzjHNd
[22:34:25] <geri> is that bad use of pointers?
[22:34:34] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[22:34:37] *** Quits: eddyb (Mibbit@moz-3lt.hlc.26.188.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:35:12] *** Quits: areski (areski@moz-aehvq9.user.ono.com) (Ping timeout: 121 seconds)
[22:36:24] *** Quits: akiss (akiss@moz-6jk4dr.pool.digikabel.hu) (Ping timeout: 121 seconds)
[22:36:51] <panicbit> geri: This is the encouraged way: http://is.gd/A8ETif
[22:37:04] *** Quits: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net) (Client exited)
[22:37:12] <geri> panicbit: i saw that...i just play!
[22:37:14] <bluss> geri: it's not bad to use raw pointers, it's just harder to make sure it's correct
[22:37:17] *** Quits: Fiveside (fiveside@moz-t2eatg.vsp.com) (Ping timeout: 121 seconds)
[22:37:20] *** Joins: frankmcsherry (frankmcsher@moz-uivq2j.dyn.telefonica.de)
[22:37:21] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[22:38:07] <panicbit> geri: Don't use raw pointers ("*mut" and "*const") or unsafe blocks unless you absolutely have to (mostly when playing with ffi or when implementing special data structures)
[22:38:09] <geri> bluss: in both ways the programer needs to think about
[22:38:33] *** Quits: tyrion-mx (tyrion@moz-d6ctul.dfri.se) (Quit: Leaving)
[22:38:36] <bluss> geri: rustc can't help you as well with an unsafe block
[22:38:58] <geri> i see
[22:39:03] <panicbit> geri: What you did in your code may work perfectly fine there but may easily break in other cases because it's basically just C
[22:39:04] <bluss> geri: think about what?
[22:39:09] *** Joins: kodomulo (Thunderbird@moz-2tuel4.or.comcast.net)
[22:39:19] <geri> the most difficult about rust is to understand lifetimes!
[22:39:34] *** Quits: smtudor (smtudor@moz-ijq.d3e.55.45.IP) (Connection closed)
[22:40:07] <kodomulo> https://crates.io/crates/ecc doesn't want to compile because num version is failing to compile [too old], what is the best way around that?
[22:40:11] *** Joins: smtudor (smtudor@moz-ijq.d3e.55.45.IP)
[22:40:35] *** Joins: Wild_Cat (Max@moz-na0tak.dsl.teksavvy.com)
[22:40:50] *** Quits: tamird (textual@moz-lje.m54.130.157.IP) (Connection closed)
[22:41:00] *** Joins: tekacs (sid17636@moz-43fj8g.uxbridge.irccloud.com)
[22:41:04] <geri>  let ref_to_box: &'c i32 = &*boxed_integer; // interesting syntax :D
[22:41:05] *** Joins: tamird (textual@moz-lje.m54.130.157.IP)
[22:41:35] *** Quits: frankmcsherry (frankmcsher@moz-uivq2j.dyn.telefonica.de) (Connection closed)
[22:41:38] <bluss> kodomulo: that crate is so old so it probably needs updates in general
[22:41:41] *** Quits: naerbnic (naerbnic@moz-i9o.rs4.199.12.IP) (Client exited)
[22:41:53] <kodomulo> ah
[22:42:02] <bluss> kodomulo: fix the dependency in the Cargo.toml file, cargo update & cargo build and start fixing if you want to
[22:42:34] <kodomulo> bluss: how do I use a different version of the ecc lib?
[22:42:36] *** Quits: fkaa (tundmatu@moz-501od2.business.telia.com) (Quit: )
[22:42:47] <kodomulo> can i fork it and put in in some local folder in my project?
[22:43:23] * kodomulo isa rust newb
[22:43:23] <bluss> yes you can or you can use some facility cargo has for overrides
[22:43:29] <kodomulo> ah
[22:43:38] * kodomulo googles cargo overrides
[22:43:46] <bluss> find it in their docs
[22:43:47] *** bentley is now known as bentley|away
[22:44:22] <kodomulo> bluss: thanks
[22:44:53] *** Quits: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net) (Ping timeout: 121 seconds)
[22:45:09] *** Quits: Guest74 (textual@moz-il1.n6s.204.65.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:45:47] *** Quits: newbiz (newbiz@moz-9m0cr9.fbxo.proxad.net) (Ping timeout: 121 seconds)
[22:45:51] *** Joins: brendan (brendaneich@moz-7gjf1i.public.wayport.net)
[22:46:22] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[22:46:41] *** Quits: viktor (viktor@moz-704qgr.cust6.csbnet.se) (Connection closed)
[22:46:42] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[22:47:19] *** Quits: skade (skade@moz-6g5dak.pools.vodafone-ip.de) (Connection closed)
[22:47:21] *** Joins: skade (skade@moz-6g5dak.pools.vodafone-ip.de)
[22:48:15] *** Joins: orangeshark (erik@moz-0t6ggj.44tj.56ot.0306.2602.IP)
[22:49:22] *** Quits: claudiop (claudiop@moz-sqo2tm.cpe.netcabo.pt) (Quit: Leaving)
[22:49:38] *** Joins: FSDAFSADF (Mibbit@moz-g72.n3l.171.107.IP)
[22:49:40] <mermi> It compiled! :) http://is.gd/0EGGCT But this seems very cumbersome. Do any 
[22:49:55] <mermi> experienced Rusters have suggestions for how I could have done it better?
[22:49:59] *** Quits: tormoz (geov@moz-3q6.afp.124.178.IP) (Ping timeout: 121 seconds)
[22:50:10] <mermi> (The UnionFindRootIterator bit)
[22:51:13] *** Joins: tormoz (geov@moz-3q6.afp.124.178.IP)
[22:51:14] *** Quits: Matthias247 (Miranda@moz-49li60.hsi14.kabel-badenwuerttemberg.de) (Connection closed)
[22:51:26] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:51:39] *** Joins: Fiveside (fiveside@moz-t2eatg.vsp.com)
[22:51:42] *** Joins: turtil (turtil@moz-8am.857.98.121.IP)
[22:52:37] <talchas> mermi: remove the extern crate core and just do ::std::slice::Iter
[22:52:43] *** FSDAFSADF is now known as longname
[22:52:50] *** Joins: Thiez (thiez@moz-300k3d.student.utwente.nl)
[22:53:06] *** Quits: longname (Mibbit@moz-g72.n3l.171.107.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:53:20] <talchas> (std::slice doesn't work because it resolves as ::uf::std::slice. you can also do use std::slice::Iter; and then just do Iter<> in the struct)
[22:53:54] <mermi> <anon>:15:7: 15:32 error: failed to resolve. Use of undeclared type or module `std::slice` <anon>:15 		it: std::slice::Iter<'a, u32>,
[22:54:42] *** Joins: Guest_ (textual@moz-rtn.fg7.77.192.IP)
[22:54:55] *** Joins: kkimdev (kkimdev@moz-t9g2on.6cjs.vk5s.0000.2620.IP)
[22:55:00] *** Quits: kkimdev (kkimdev@moz-t9g2on.6cjs.vk5s.0000.2620.IP) (A TLS packet with unexpected length was received.)
[22:55:02] <mermi> Ah
[22:55:08] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[22:55:24] <mermi> Does it always do name resolution relative to the current module?
[22:55:27] *** Joins: kkimdev (kkimdev@moz-t9g2on.6cjs.vk5s.0000.2620.IP)
[22:55:34] *** Quits: kkimdev (kkimdev@moz-t9g2on.6cjs.vk5s.0000.2620.IP) (A TLS packet with unexpected length was received.)
[22:55:42] <talchas> also http://is.gd/kjhcNb is a bit nicer for the next() I think, though it's arguable
[22:56:00] <cmr> mermi: yes, paths are always module-relative.
[22:56:01] <talchas> yeah, use is absolute, but actual name resolution is relative
[22:56:04] <cmr> (imports are always absolute)
[22:56:10] <talchas> with ::foo being root
[22:56:19] <insaneinside> mermi: you may need `use std;`
[22:56:46] <mermi> ok
[22:56:46] <insaneinside> so uh.
[22:56:47] <insaneinside> playbot: extern crate libc; use libc;
[22:56:47] -playbot- <anon>:9:32: 9:36 error: unresolved import `libc`. There is no `libc` in `???`
[22:56:48] -playbot- <anon>:9         extern crate libc; use libc;
[22:56:48] -playbot- output truncated; full output at: http://bit.ly/1IHoh4S
[22:56:51] <insaneinside> ^^^ ?
[22:57:00] *** Quits: Riastradh (riastradh@moz-8d1pcg.torservers.net) (Ping timeout: 121 seconds)
[22:57:02] <mermi> And if I prepend `::` I get an absolute path 
[22:57:10] <talchas> or hmm, I think that self.count is in the wrong place and it needs to be self.count - 1 == *k, but whatever
[22:57:19] <talchas> yeah
[22:57:26] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[22:57:26] <mermi> @talchas: Yeah, I just noticed that. ;)
[22:58:19] <mermi> But it seemd the way I solved it isn't super cumbersome and unidiomatic. Like there is no two liner that does the same thing...
[22:58:23] <kodomulo>  /Users/t/.cargo/registry/src/github.com-1ecc6299db9ec823/url-0.2.32/src/form_urlencoded.rs:94:10: 94:22 error: use of undeclared trait name `IntoIterator`
[22:58:23] <kodomulo>  /Users/t/.cargo/registry/src/github.com-1ecc6299db9ec823/url-0.2.32/src/form_urlencoded.rs:94 where I: IntoIterator, I::Item: Borrow<(K, V)>, K: AsRef<str>, V: AsRef<str> {
[22:58:32] <kodomulo> is this because I need to upgrade rust?
[22:58:39] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[22:58:39] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:58:42] <kodomulo> It looks like url lib version came out today
[22:59:22] <talchas> mermi: also it looks like for k in &mut self.it works, so you can use that rather than while let
[23:00:37] *** Quits: minot2 (kkus@moz-baj4jj.74.srtnet.com) (Connection closed)
[23:01:02] *** Joins: jxcl (abliskovsky@moz-o4k.t5t.173.207.IP)
[23:01:16] <talchas> mermi: you could probably do like self.components.iter().enumerate() rather than maintaining count yourself if you wanted
[23:01:25] *** Joins: ajtulloc_ (ajtulloch@moz-v4lug4.r0v0.kp93.010d.2620.IP)
[23:01:35] *** Quits: jxcl (abliskovsky@moz-o4k.t5t.173.207.IP) (Quit: Leaving)
[23:01:40] <talchas> (of course, then the type gets less pleasant)
[23:02:09] <bluss> kodomulo: well find out if url supports beta or nightly
[23:02:21] <bluss> kodomulo: which version do you have? 1.0.0-beta.4 is the latest beta 
[23:02:44] *** Joins: jxcl (abliskovsky@moz-o4k.t5t.173.207.IP)
[23:02:48] <kodomulo> bluss: beta2
[23:02:52] <talchas> I suppose you can actually replace the whole thing with self.components.iter().enumerate().filter(|(i, &k) i == k).map(|(i, _) i)
[23:03:09] <bluss> kodomulo: there are a few very small changes between the betas actually
[23:03:45] <mermi> Ah, that makes sense
[23:03:50] *** Quits: thor (thor@moz-n7n1a4.res.rr.com) (Ping timeout: 121 seconds)
[23:03:56] <talchas> but then you get closures in your return type, which you can't give a name to
[23:04:14] <mermi> So impossible after all?
[23:04:14] *** Quits: shawnadelic (shawn@moz-u5o3kk.res.rr.com) (Quit: leaving)
[23:04:28] <mermi> I tried your for-idea. It works perfectly :)
[23:04:31] <talchas> and if you make them fns instead, it's still a horrible looking type
[23:04:32] <genbattle> I've found it be far more stable during the beta/RC period than it was in the alpha period
[23:04:34] *** Quits: ajtulloch (ajtulloch@moz-cee.9o0.201.199.IP) (Ping timeout: 121 seconds)
[23:04:41] <genbattle> which has been good actually
[23:04:56] <talchas> well, you could return Box<Iterator>, which works but is an unnecessary box
[23:05:01] *** Joins: yuja (yuja@moz-07pdo8.pikara.ne.jp)
[23:05:19] <genbattle> now I just have to catch up with all the breakages that happened in the last 6 months since I last seriously dived into Rust!
[23:05:41] <bluss> genbattle: it will be the last time you'll have to resolve such major changes
[23:05:42] *** Joins: ryanhiebert (ryanhiebert@moz-imd.l7c.90.208.IP)
[23:05:42] <talchas> mermi: basically returning trait implementations where you really just want to return an unboxed trait object is not great atm
[23:05:47] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[23:06:02] *** Quits: ryanhiebert (ryanhiebert@moz-imd.l7c.90.208.IP) (Quit: Leaving...)
[23:06:05] *** Joins: willem (willem@moz-facs2s.dynamic.upc.nl)
[23:06:32] <mermi> @talchas: Could you elaborate a bit. I'm not sure I get what you mean
[23:06:33] <talchas> and you particularly see this with Iterator, because you do iterator chaining and build up horrible types with tons of brackets even if you don't have closure types that can't be given a name
[23:06:47] *** Quits: geri (Mibbit@moz-f1mmt1.highway.telekom.at) (Quit: http://www.mibbit.com ajax IRC Client)
[23:07:00] <reem> mermi: You want to be able to tell rustc “infer the return type here, but ensure it implements Iterator”
[23:07:09] *** Quits: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com) (Ping timeout: 121 seconds)
[23:07:13] <reem> but you can’t, you have to write out the whole return type explicitly, and sometimes you can’t for various reasons
[23:07:14] <talchas> mermi: so you don't really want to return Map<Filter<Enumerate<slice::Iter>>>, you want to return "Iterator"
[23:07:15] <mermi> Yes :)
[23:07:16] <reem> or it is extremely long and ugly
[23:07:28] <talchas> but you can't do that atm
[23:07:31] <mermi> Ok
[23:07:51] <mermi> Because you always have to give fully explicit method sigs?
[23:07:52] <reem> You actually do *not* want to return Iterator, which would be a trait object implying all the overhead that come with it, you want to return Map<Filter<Enumerate<…>>> but you want the compiler to infer it for you.
[23:07:56] <talchas> so you wind up hiding it in a struct and calling it WhateverIter, or exposing unnecessary implementation details
[23:08:03] <bluss> that particular iterator line could be written out if you used fn() pointers though
[23:08:10] <talchas> reem: yeah
[23:08:20] <reem> unfortunately it would be less efficient using fn pointers
[23:08:26] <mermi> Why do trait objects give you overhead?
[23:08:39] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[23:08:39] <mermi> Because you need to figure out which exact method to call etc. at runtime?
[23:08:41] <reem> trait objects (and fn pointers) use virtual calls
[23:08:49] <bluss> mermi: yes
[23:08:49] <cmr> mermi: need to do virtual calls, can kill inlining etc, causing crappy codegen. not always, though.
[23:09:02] <mermi> Ok
[23:09:03] <talchas> yeah, "Iterator" would basically be (vtable, somedata), and might have worse code
[23:09:10] <mermi> What is the syntax for a traitobject?
[23:09:16] <cmr> &Trait, Box<Trait>
[23:09:16] *** Quits: dzhulk (Adium@moz-hnu.hki.140.95.IP) (Quit: Leaving.)
[23:09:19] <bluss> sometimes I think you can just use boxing. It's not always so critical
[23:09:24] <talchas> you can do Box<Iterator> atm, but that has an unnecessary malloc and the vtable downside
[23:09:29] <reem> mermi: if you have trait Trait, then you can use Trait as a type and it is a trait object
[23:10:03] <mermi> So I could return a ref to my UnionFindIterator
[23:10:04] <reem> mermi: however, since the size is not known at compile time you must put it behind a pointer, so either &Trait, &mut Trait, or Box<Trait> for now, with user-defined smart pointers coming a bit later
[23:10:15] <mermi> and give my method roots() return type &Iterator ?
[23:10:27] *** Joins: dzhulk (Adium@moz-hnu.hki.140.95.IP)
[23:10:31] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[23:10:43] *** Joins: borromakot (Adium@moz-j6pi1a.il.comcast.net)
[23:10:48] *** Parts: Gentlefox (David@moz-57905a.res.rr.com) ()
[23:10:53] *** Quits: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net) (Client exited)
[23:10:55] *** Quits: borromakot (Adium@moz-j6pi1a.il.comcast.net) (Quit: Leaving.)
[23:10:58] <talchas> mermi: no, because there would be no memory for the UnionFindIterator to live
[23:11:08] <talchas> you could return Box<Iterator>
[23:11:10] <mermi> Ah, makes sense
[23:11:40] <talchas> if you're writing UnionFindIterator yourself anyway, there's not any reason to return a trait object
[23:11:42] <mermi> I can never return a ref, can I?
[23:11:45] <reem> mermi: the fn pointer solution is more flexible though
[23:12:10] <talchas> it's only when you're doing the iterator-adapter chaining that it's useful
[23:12:11] *** Quits: jxcl (abliskovsky@moz-o4k.t5t.173.207.IP) (Quit: Leaving)
[23:12:19] <reem> mermi: You can only return a reference into something you got as an argument, that’s what the whole lifetime annotations thing is about, so you can say I got this &’a T pointer in, so I can give this &’a X pointer into it out with the same lifetime.
[23:13:23] <kodomulo> bluss: compiled with newer rust beta thanks
[23:13:30] <mermi> So, let me rephrase to make sure I got it: I can only returns ref with a lifetime 'a where 'a is the lifetime of some input of my function.
[23:14:50] <bluss> kodomulo: great
[23:14:52] <mermi> Which makes sure I don't put some thing on the stack, return a pointer to it, and then when I free the thing (when my function returns) I have a dangling pointer
[23:15:22] <bob> how do i cast an address into a &[u8]
[23:15:31] *** Joins: mib_kkx459 (Mibbit@moz-g72.n3l.171.107.IP)
[23:15:39] <bob> it's my first day
[23:16:06] <mbrubeck> bob: By "address" you mean something like a usize (integer), or a `*const T` (for some T)?
[23:16:17] <talchas> mermi: yeah
[23:16:38] <mermi> I have one more question:
[23:16:48] <talchas> (though you can break all these rules with unsafe and transmute, but that can also cast X to Y, for any X and Y, soooo)
[23:16:53] <mbrubeck> bob: http://doc.rust-lang.org/std/slice/fn.from_raw_parts.html is one way
[23:16:55] *** Quits: Nextra (Nextra@moz-gfb419.osnanet.de) (Connection closed)
[23:16:55] <bluss> bob: there's a function called std::slice::from_raw_parts that can make a &[u8] (u8 slice) from a pointer and the length
[23:17:08] <mermi> I tried to implement a generic version of UnionFindRootIterator
[23:17:17] <mermi> which is generic in the underlying iterator type
[23:17:36] <mermi> so that I could (for example) replace the components-vec by some other datastructure
[23:17:42] *** Quits: mib_kkx459 (Mibbit@moz-g72.n3l.171.107.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:17:49] <mermi> for that I need something like that:
[23:18:10] <mermi> struct UnionFindIterator<T> where T : Iterator AND T::Item == u32
[23:18:13] *** Quits: Torkable (Torkable@moz-pe6b7t.5lf3.8saf.0001.2601.IP) (Ping timeout: 121 seconds)
[23:18:19] <mermi> But the compiler is unhappy
[23:18:48] <bluss> mermi: T: Iterator<Item=u32>  would be the way to write that
[23:19:09] *** Joins: thor (thor@moz-n7n1a4.res.rr.com)
[23:19:23] <mermi> Thanks, I'll try that
[23:19:24] <bluss> that said, I'm not sure where you are going with that :)
[23:19:28] *** Joins: jdsanders (Adium@moz-t2ud2f.co.comcast.net)
[23:19:39] *** Quits: kaeluka (kaeluka@moz-tn3lqd.cust.bredbandsbolaget.se) (Client exited)
[23:19:40] <mermi> @bluss: how so?
[23:19:57] <bob> um
[23:20:07] <bob> i need to make a string from an address basically
[23:20:20] <mbrubeck> bob: Where did you get the address? What is its type?
[23:20:27] <woboats> Is it possible to transform &[u8] -> &TraitFoo in an open-ended way (e.g. not matching and constructing specific impls of the trait), or would that require dependent types or HKTs or something?
[23:20:40] <bob> it's a u32
[23:21:07] <mbrubeck> bob: Do you want to interpret that as a memory address?
[23:21:11] <bob> yes
[23:21:48] *** Quits: Guest_ (textual@moz-rtn.fg7.77.192.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:22:51] <mbrubeck> bob: http://is.gd/4y0Qqb
[23:23:11] <bob> mbrubeck: it is a string
[23:23:17] <bob> i dont know the length.
[23:23:22] <mbrubeck> bob: ah
[23:23:25] *** Joins: kaeluka (kaeluka@moz-tn3lqd.cust.bredbandsbolaget.se)
[23:23:29] <bob> by string i mean C string, it's nil terminates
[23:23:30] <mbrubeck> bob: Check out the CString type...
[23:23:35] <jdsanders> hi folks -- I'm a bit confused by an error message I'm getting from cargo. I've specified `url = "= 0.2.31"`, and the error message I'm getting is "version 0.2.32 in use by url v0.2.32" -- does that mean some other dependency is requiring that version of `url` earlier?
[23:23:38] <mbrubeck> and also CStr
[23:23:38] <bob> no_std
[23:24:12] *** Joins: lenstr (lenstr@moz-rrh.vju.25.171.IP)
[23:24:34] *** Quits: lenstr (lenstr@moz-rrh.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[23:24:44] <mbrubeck> bob: Well, if you can't use CStr directly, you can look at how its from_ptr method is implemented: http://doc.rust-lang.org/src/std/ffi/c_str.rs.html#286-289
[23:24:48] <mbrubeck> and do something similar in your own code.
[23:24:51] *** Joins: lenstr (lenstr@moz-rrh.vju.25.171.IP)
[23:24:57] *** Quits: kaeluka (kaeluka@moz-tn3lqd.cust.bredbandsbolaget.se) (Client exited)
[23:25:15] <bob> doo.
[23:25:31] <mbrubeck> bob: You'll need to get the length somehow, because `&[u8]` is a fat pointer (length, address).
[23:25:42] *** Quits: lenstr (lenstr@moz-rrh.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[23:25:42] <bluss> mermi: nah it sounds ok, you'll just have to use a concrete type when you return UnionFindIterator
[23:26:00] *** Quits: asQuirreL (asQuirreL@moz-ro1qqu.ox.ac.uk) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:26:23] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[23:26:25] *** Joins: fengshaun (fengshaun@moz-rf0qk5.cable.teksavvy.com)
[23:27:06] *** Quits: spider-mario (spidermario@moz-coblcf.fbx.proxad.net) (A TLS packet with unexpected length was received.)
[23:27:23] <mermi> Can't I make the method returning it generic?
[23:29:18] <mermi> Hmm, I seem to be missing something: http://is.gd/a0EmGq
[23:30:02] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[23:30:17] *** Quits: ai (ai@moz-pqofrl.sunline.net.ua) (Quit: Leaving.)
[23:30:25] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Ping timeout: 121 seconds)
[23:31:23] <bluss> mermi: I suspected you were going that way, and you can't
[23:31:50] *** Joins: cjwelborn (cjwelborn@moz-np6hed.al.charter.com)
[23:31:57] <bluss> mermi: the return type promises something generic in T, but you return something of fixed type
[23:32:04] <bluss> you'll need to write out the concrete type
[23:32:22] <bluss> this is sort of the same problem you talked about with closures and iterators before
[23:32:34] <mermi> Ah, of course...
[23:33:36] <mermi> What I really want is for the compiler to do the heavy lifting of figuring out the types. But I guess that's impossible.
[23:34:10] <mbrubeck> mermi: Also note that `slice::Iter<u32>::Item` = `&u32`
[23:34:39] *** Quits: woboats (tatterdemal@moz-a0dnkb.ca.comcast.net) (Ping timeout: 121 seconds)
[23:34:59] <mermi> Ok
[23:35:06] <bluss> mermi: it can do that, it'll tell you in error messages :)
[23:35:18] *** Quits: HollyRain (HollyRain@moz-lnracf.user.ono.com) (Quit: bye, bye)
[23:35:46] *** bvssvni is now known as bvssvni_
[23:36:38] <mbrubeck> mermi: Various forms of type inference for return types have been proposed, and seem likely to be implemented in a future version of the language.
[23:36:46] <mbrubeck> e.g. https://github.com/rust-lang/rust/issues/10448
[23:36:47] <bob> mbrubeck: so * means bare pointer and [<sometype>] means a array + size?
[23:37:13] <mbrubeck> bob: yes, * means bare pointer
[23:37:42] <mbrubeck> bob: &[T] means a pointer plus size -- it's a borrowed view onto an array
[23:37:59] <bob> neat
[23:38:07] <mbrubeck> [T; N] is a fixed-size array where the size is known at compile time
[23:38:10] <bob> i come from go and c. &[T] sounds like a slice
[23:38:13] <bob> (go slice)
[23:38:24] <mbrubeck> Yes, `&[T]` is pronounced "slice" in Rust too. :)
[23:38:25] <bluss> &[T] is called a slice
[23:38:29] <bob> sweet
[23:38:32] <mbrubeck> http://doc.rust-lang.org/std/primitive.slice.html
[23:39:54] <mermi> Ok, I am off to bed...
[23:40:00] <mermi> Thank you all very much!
[23:40:24] <bob> this is getting nuts
[23:40:30] <mermi> I wish I could buy you guys a beer ;)
[23:41:01] *** Joins: kieran (kieran@moz-c5gk5j.ihug.co.nz)
[23:41:20] <bob>         Some(::core::mem::transmute(::core::raw::Slice{data: c_str, len: ptr as usize - c_str as usize}))
[23:41:41] *** Joins: Guest58 (textual@moz-70hlaj.austtx.sbcglobal.net)
[23:41:43] *** Joins: tunnuz (tunnuz@moz-meb4uj.net)
[23:41:51] *** Joins: frankmcsherry (frankmcsher@moz-uivq2j.dyn.telefonica.de)
[23:42:58] *** Quits: mermi (Mibbit@moz-5ev.5pk.144.213.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:43:41] <SingingTree> I'm implementing a trait and am finding that I'm having conflicting implementations when I would not have expected: "impl<II : IntoIterator<Item = u8>> SingleByteXorDecodable for II" is clasing with "impl<'a, II : Copy + IntoIterator<Item = &'a u8>> SingleByteXorDecodable for II". I would have thought the associated type binding would differentiate the implementations, but naw?
[23:45:03] <bob> hooray, i can print c string from rust made from a raw pointer :)
[23:45:10] *** Quits: kieran (kieran@moz-c5gk5j.ihug.co.nz) (Ping timeout: 121 seconds)
[23:45:18] *** Quits: abique (abique@moz-alq0r9.ko9f.54u1.0e35.2a01.IP) (Quit: Leaving)
[23:45:21] *** Quits: ytain (ytain@moz-pr2.aip.175.108.IP) (Quit: Textual IRC Client: www.textualapp.com)
[23:45:23] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[23:45:27] *** Quits: davebettin_ (davebettin@moz-ip635p.or.comcast.net) (Quit: Leaving)
[23:45:32] *** Joins: jtdowney (jtdowney@moz-gh1isj.static.twtelecom.net)
[23:45:36] *** Quits: jtdowney (jtdowney@moz-gh1isj.static.twtelecom.net) (Quit: Textual IRC Client: www.textualapp.com)
[23:45:44] *** Quits: Guest58 (textual@moz-70hlaj.austtx.sbcglobal.net) (Ping timeout: 121 seconds)
[23:46:53] *** Quits: skade (skade@moz-6g5dak.pools.vodafone-ip.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:47:00] *** Quits: frankmcsherry (frankmcsher@moz-uivq2j.dyn.telefonica.de) (Ping timeout: 121 seconds)
[23:47:03] *** Quits: veqz (veqz@moz-nvr8g6.209.getinternet.no) (Ping timeout: 121 seconds)
[23:47:20] <bluss> SingingTree: you're right I think, it should differentiate them
[23:48:22] *** Joins: hjr3 (hradtke@moz-dmp.av4.169.69.IP)
[23:49:10] *** Quits: jml (jml@moz-mqpurn.178.in-addr.arpa) (Ping timeout: 121 seconds)
[23:49:17] *** Joins: mnemnion (mnemnion@moz-kf3boi.ca.comcast.net)
[23:49:26] <SingingTree> bluss: Cool cheers. It's not causing me any issue, I don't need both implementations, but I didn't understand why it wasn't happy
[23:49:41] *** Joins: cpjreynolds (Mibbit@moz-ublf9j.ma.charter.com)
[23:49:51] *** Quits: orangeshark (erik@moz-0t6ggj.44tj.56ot.0306.2602.IP) (Quit: Leaving)
[23:50:15] *** Joins: logan_e (logan_e@moz-ltn.qg3.218.73.IP)
[23:50:22] *** Quits: Gabriel_7 (Gabriel@moz-s16huc.mtgr.92aj.0e35.2a01.IP) (Ping timeout: 121 seconds)
[23:50:45] *** Joins: jml (jml@moz-mqpurn.178.in-addr.arpa)
[23:51:42] *** Quits: James (quassel@moz-225vcm.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[23:52:41] *** Quits: espadrine (tyl@moz-l019mn.fbx.proxad.net) (Ping timeout: 121 seconds)
[23:53:39] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:54:18] *** Joins: orangeshark (erik@moz-0t6ggj.44tj.56ot.0306.2602.IP)
[23:54:43] *** Joins: jtdowney (jtdowney@moz-gh1isj.static.twtelecom.net)
[23:54:45] *** Joins: ELD (textual@moz-mqboa7.co.comcast.net)
[23:56:35] *** Joins: Gabriel_7 (Gabriel@moz-s16huc.mtgr.92aj.0e35.2a01.IP)
[23:58:16] *** Joins: chc4 (chc4@moz-pdo0at.ma.comcast.net)
[23:58:26] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[23:59:24] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[23:59:25] *** Quits: orangeshark (erik@moz-0t6ggj.44tj.56ot.0306.2602.IP) (Quit: Leaving)
[23:59:25] *** Quits: arunmk (arun@moz-vfv9bl.ca.comcast.net) (Client exited)
[23:59:45] *** Quits: rbranson (rbranson@moz-i7m.9o0.201.199.IP) (Quit: Computer has gone to sleep.)
[23:59:57] *** Joins: arunmk (arun@moz-vfv9bl.ca.comcast.net)
