[00:00:06] <patrickkim> <span style="border:1px">asdf</span>
[00:00:27] <patrickkim> can not draw border
[00:00:56] <jack> i think it can draw left and right borders.
[00:01:16] <patrickkim> :(
[00:01:35] <patrickkim> it doesn't have border,margin,padding
[00:02:41] <patrickkim> in servo
[00:03:47] <patrickkim> if i put in compute border in inline flow, "Bar" has border too. because it has style of border
[00:08:09] <patrickkim> https://github.com/mozilla/servo/blob/master/src/components/main/layout/box.rs#L232
[00:21:23] <jack> patrickkim: each inline element will create an inline flow which contains boxes (the text nodes)
[00:21:38] <jack> you'll want to try looking at the flow tree for various DOMs
[00:21:44] <jack> and get a feel for how it is constructed
[00:21:53] <jack> then you can figure out where the right styles should go
[00:22:29] <patrickkim> ok jack
[00:22:31] <patrickkim> thank you
[00:28:37] *** Quits: maxli (Instantbir@moz-78AD779D.hsd1.ca.comcast.net) (Quit: maxli)
[00:28:41] *** Joins: maxli (Instantbir@moz-78AD779D.hsd1.ca.comcast.net)
[00:29:01] *** Quits: qlkzy (qlkzy@moz-A97B5CE9.members.linode.com) (Quit: ZNC - http://znc.sourceforge.net)
[00:29:23] *** Joins: qlkzy (qlkzy@moz-A97B5CE9.members.linode.com)
[00:42:53] *** Quits: maxli (Instantbir@moz-78AD779D.hsd1.ca.comcast.net) (Ping timeout)
[00:43:11] *** kimundi is now known as zz_kimundi
[01:00:26] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[01:00:32] *** Quits: vodik_ (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[01:12:57] *** Quits: Jayflux (Jason@moz-5D9408E2.as13285.net) (Connection reset by peer)
[01:14:22] *** Quits: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net) (Ping timeout)
[01:17:50] *** Joins: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net)
[01:32:00] *** Quits: ramitos (ramitos@moz-60679625.socal.res.rr.com) (Connection reset by peer)
[01:36:47] *** Joins: ramitos (ramitos@moz-60679625.socal.res.rr.com)
[01:37:46] *** Parts: boredomist (erik@moz-E73505F3.us-west-2.compute.amazonaws.com) (Leaving)
[01:44:07] *** Quits: brson (brson@6A848D32.C1B840DD.76F66111.IP) (Quit: leaving)
[01:48:30] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[01:57:08] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[01:59:53] *** Joins: maxli (Instantbir@moz-78AD779D.hsd1.ca.comcast.net)
[02:15:25] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[02:47:36] *** Quits: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp) (Ping timeout)
[02:49:01] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[03:04:31] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[03:08:38] *** Quits: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp) (Ping timeout)
[03:09:11] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[03:34:14] *** Quits: zz_kimundi (kimundi@moz-64655121.dip0.t-ipconnect.de) (Ping timeout)
[03:37:47] *** Joins: zz_kimundi (kimundi@moz-9DB60884.dip0.t-ipconnect.de)
[03:37:48] *** zz_kimundi is now known as kimundi
[03:45:18] *** Quits: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca) (Quit: canhtak)
[03:49:33] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[04:07:52] *** Joins: kanru (kanru@moz-99690620.hinet-ip.hinet.net)
[04:26:19] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[04:29:45] *** Quits: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp) (Ping timeout)
[04:30:02] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[04:50:37] *** Quits: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp) (Ping timeout)
[04:51:02] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[05:19:42] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[05:29:07] *** Quits: maxli (Instantbir@moz-78AD779D.hsd1.ca.comcast.net) (Ping timeout)
[05:55:18] *** Quits: philix (philix@moz-4689D536.user.veloxzone.com.br) (Quit: philix)
[06:00:21] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[06:10:37] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[06:22:41] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[06:25:05] *** Joins: Debloper (debloper@moz-88FF8AE8.redhat.com)
[06:37:27] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[06:41:12] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[06:50:22] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[07:05:40] *** Quits: june0cho (june0.cho@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[07:15:25] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Connection reset by peer)
[07:15:26] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[07:40:47] *** Quits: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp) (Ping timeout)
[07:40:51] *** Joins: Ms2ger (Ms2ger@125CFB8C.2C129564.3773EA9F.IP)
[07:41:10] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[07:51:19] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[07:54:16] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[07:54:16] *** ChanServ sets mode: +o pcwalton
[07:55:57] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[07:56:36] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[08:07:53] *** Quits: deokjinkim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:09:17] *** Joins: deokjinkim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[08:16:24] *** Joins: quibbit (Mibbit@6E81F367.385B0319.C2C1D78.IP)
[08:17:54] *** Quits: quibbit (Mibbit@6E81F367.385B0319.C2C1D78.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:20:08] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[08:48:50] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[08:54:10] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[08:56:39] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[08:56:39] <ghservo> [13servo] 15ksh8281 opened pull request #1461: fix for anonymous block boxes (06master...06block_black_boxes) 02http://git.io/6ArotQ
[08:56:39] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[09:12:25] *** Quits: heather (heather@moz-42412102.hsd1.ca.comcast.net) (Client exited)
[09:13:46] *** Joins: heather (heather@moz-42412102.hsd1.ca.comcast.net)
[09:15:28] *** Quits: heather (heather@moz-42412102.hsd1.ca.comcast.net) (Ping timeout)
[09:17:12] *** Joins: jackneill (jackneill@moz-E93E25D8.pool.digikabel.hu)
[09:18:31] <patrickkim> Ms2ger : ping
[09:19:10] * Ms2ger appears
[09:19:36] <patrickkim> can i have question?
[09:20:17] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[09:20:38] <Ms2ger> Sure
[09:23:07] <patrickkim> i impl anonymous block boxes.
[09:23:17] <patrickkim> but i am not sure it is correct
[09:24:37] <Ms2ger> Hrm, that's not something I know much about
[09:25:07] <patrickkim> ok. thank you Ms2ger!
[09:25:21] <Ms2ger> SimonSapin, maybe?
[09:45:38] *** Quits: Debloper (debloper@moz-88FF8AE8.redhat.com) (Ping timeout)
[09:46:50] <SimonSapin> patrickkim, jack: anonymous boxes should not have the same style as their parent, only inherit from it
[09:47:23] <patrickkim> yes. so i changed style clone.
[09:47:36] <patrickkim> could you see my pr?
[09:47:46] <patrickkim> #1461
[09:49:34] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[09:51:24] <patrickkim> SimonSapin : ping
[09:51:36] <SimonSapin> patrickkim: Iâ€™m looking at it
[09:51:52] <patrickkim> should i remove "if nearest_ancestor_element.style().get().Box.display == display::block" this statment?
[09:51:53] <patrickkim> yes.
[09:52:02] <SimonSapin> Iâ€™m not sure
[09:52:13] <SimonSapin> why did you add it?
[09:52:30] <patrickkim> if element is span <span style="border:blue">asdf</span>
[09:52:36] <patrickkim> asdf has border
[09:52:38] <patrickkim> right?
[09:52:53] <patrickkim> so i add that line.
[09:53:22] <patrickkim> every textnode use that statment
[09:53:47] <SimonSapin> doesnâ€™t that fall in the |node.is_element()| case?
[09:54:15] <SimonSapin> the box generated by the span element has borders, the text nodes inside donâ€™t
[09:54:48] <patrickkim> servo replace <span> with just textbox
[09:55:25] <patrickkim> asdf<span>111</span> -> textbox,textbox
[09:55:40] <patrickkim> that's why i add that line.
[09:56:00] <SimonSapin> well, thatâ€™s a bug IMO
[09:56:23] <patrickkim> i agree.
[09:56:28] <patrickkim> do you have any idea?
[09:56:31] *** Joins: Debloper (debloper@moz-88FF8AE8.redhat.com)
[09:56:43] *** Quits: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp) (Ping timeout)
[09:57:00] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[09:59:26] <SimonSapin> patrickkim: so right now what happens if you just leave out the if?
[10:00:05] <patrickkim> wait a minute..
[10:01:48] <patrickkim> i think, there is not thing now, because
[10:02:08] <patrickkim> servo not use border,padding,margin in textbox.
[10:02:52] <patrickkim> but we need to <span style="border:1px;padding:10px;margin:10px">asdf</span>
[10:03:00] <patrickkim> in future
[10:04:22] <SimonSapin> ok, so Iâ€™d say update your PR to remove the if (just push a new commit without rebasing so Critic doesnâ€™t freak out)
[10:04:30] <SimonSapin> and file another bug for the inline element case
[10:04:35] <SimonSapin> if there isnâ€™t one already
[10:04:52] <SimonSapin> then, if you feel like it, fix that bug :)
[10:06:41] <SimonSapin> See also https://critic.hoppipolla.co.uk/r/524 about fixing/adding comments
[10:06:45] <patrickkim> ok i remove that line.
[10:09:16] <patrickkim> and we already have issue about inline element border,margin,padding
[10:10:27] <patrickkim> can i get r+?
[10:11:16] <patrickkim> i removed that line.
[10:14:36] <SimonSapin> patrickkim: please also fix https://critic.hoppipolla.co.uk/showcomment?chain=1038 and https://critic.hoppipolla.co.uk/showcomment?chain=1037
[10:15:25] <patrickkim> ok, wait a minute
[10:17:10] <patrickkim> SimonSapin : i add comment you addressed
[10:18:37] <SimonSapin> I wish reviewers could just do one-line fixes like thisâ€¦
[10:19:29] <patrickkim> :)
[10:19:55] <Ms2ger> If you still wish for that, your review load isn't high enough :)
[10:22:50] <jgraham> SimonSapin: Blame github :)
[10:25:53] *** Joins: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP)
[10:27:33] <SimonSapin> Ms2ger: even when the review feedback is "please add this comment: <comment spelled out entirely>" ?
[10:39:10] <patrickkim> SimonSapin : i resolve all of issue you mentioned
[10:39:55] <SimonSapin> yes, the one thing left is Does |node.is_element()| always correspond to "is not anonymous"?
[10:44:08] <patrickkim> i replied 
[10:44:14] <patrickkim> "yes, i think only textnode can  be box without element, every textnode can be anomymous. do you have any idea?"
[10:46:24] <patrickkim> ah.. i didnt click submit button
[10:49:31] <jgraham> Don't ::before and similar things appear in the layout tree?
[10:49:55] <SimonSapin> they should (except for the fact that we donâ€™t implement them yet)
[10:50:15] <SimonSapin> but theyâ€™re a special case anyway in terms of what style they get
[10:50:48] <jgraham> Right, so I thought you were wondering whether is_element() would return true for pseudo-elements
[10:51:03] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[10:51:26] *** Quits: Ms2ger (Ms2ger@125CFB8C.2C129564.3773EA9F.IP) (Quit: Leaving)
[10:51:34] <jgraham> If they aren't implemented at all I guess it doesn't (and it seems confusing if is_element in Layout does something differernt to the same method in DOM)
[10:51:54] *** Joins: Ms2ger (Ms2ger@125CFB8C.2C129564.3773EA9F.IP)
[10:51:55] <patrickkim> ok i check is_element return when  pseudo-elements
[10:54:05] <patrickkim> how about add is_text() statement?
[10:54:37] <patrickkim> if text -> anomymous else just copy parent node style
[10:56:05] <SimonSapin> text nodes are not the only anonymous ones
[10:56:23] <SimonSapin> your initial test case has an anonymous block
[10:56:35] <patrickkim> so?
[10:57:28] <patrickkim> humm..
[10:59:19] <patrickkim> is any pseudo-elements thing parse now?
[10:59:30] <SimonSapin> no, theyâ€™re not supported yet
[11:01:13] *** Joins: heather (heather@moz-42412102.hsd1.ca.comcast.net)
[11:02:30] <patrickkim>         let node_style = if node.is_element() {             node.style().clone()         } else {             let mut nearest_ancestor_element = node;             while !nearest_ancestor_element.is_element() {                 nearest_ancestor_element =                     nearest_ancestor_element.parent_node().expect("no nearest element?!");             }    
[11:03:02] *** Quits: heather (heather@moz-42412102.hsd1.ca.comcast.net) (Ping timeout)
[11:03:36] <patrickkim> could you see my reply on critic?
[11:04:47] <patrickkim> https://critic.hoppipolla.co.uk/showcomment?chain=1039
[11:08:23] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[11:10:56] <patrickkim> i have question
[11:11:35] <patrickkim> why is_text() excludes anonymous text?
[11:12:12] <SimonSapin> not anonymous text, anonymous blocks
[11:12:33] <SimonSapin> like the one that wraps bar in <div><p>foo</p> bar</div>
[11:12:43] <SimonSapin> all text nodes are anonymous
[11:13:06] <patrickkim> is bar has div style(inherited)?
[11:14:00] <SimonSapin> bar is an an anonymous block that inherits from <div> and is a sibling of the block generated by <p>
[11:15:41] <patrickkim> with my source, 1. find parent of bar 2. get cacade style from div
[11:16:21] <SimonSapin> with what you have in the pull request yes
[11:16:42] <SimonSapin> but your last comment has |if node.is_text()|, which is not what you want here
[11:16:47] *** ToBeFree is now known as ToBeFree2
[11:16:47] *** ToBeFree2 is now known as ToBeFree
[11:17:27] <patrickkim> is type of bar #text?
[11:18:14] <Ms2ger> Sure
[11:18:32] <SimonSapin> in this case you have a text node inside an anonymous block node
[11:19:25] <SimonSapin> you also want the latter to inherit from but not copy the style of its parent
[11:19:44] *** Joins: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP)
[11:20:02] <sammykim> Is there anyone who is working in Mozilla?
[11:20:13] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[11:20:18] <SimonSapin> sammykim: what do you mean?
[11:20:51] <patrickkim> i think is_text works, because "bar" is #text
[11:21:16] <SimonSapin> patrickkim: yes, there is a text node for "bar"
[11:21:23] <SimonSapin> but there is also an anonymous block
[11:21:30] <SimonSapin> they are two different things
[11:21:37] <SimonSapin> the former is inside the latter
[11:21:53] <SimonSapin> at least it should
[11:22:04] *** Quits: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[11:23:23] <SimonSapin> patrickkim: I have to go, Iâ€™ll look at this later
[11:23:37] <patrickkim> ok thank you SimonSapin
[11:23:42] <patrickkim> :)
[11:23:47] *** Quits: ToBeFree (tobefree@moz-EA367A59.de) (Ping timeout)
[11:28:09] *** Joins: ToBeFree (tobefree@moz-EA367A59.de)
[11:55:31] *** Joins: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca)
[12:20:37] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[12:24:10] *** Joins: khodzha (khodzha@AF0E54DB.EF9FA30D.CA6E2165.IP)
[12:36:12] *** Joins: philix (philix@moz-4689D536.user.veloxzone.com.br)
[12:49:58] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[12:54:45] *** Quits: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca) (Quit: canhtak)
[12:54:54] *** Quits: deokjinkim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:02:08] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[13:05:00] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[13:05:22] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[13:07:09] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[13:15:47] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[13:17:19] *** Quits: ToBeFree (tobefree@moz-EA367A59.de) (Quit: Ping timeout: 1337 seconds)
[13:20:49] *** Joins: abinader (sid21713@moz-A42E5B7B.irccloud.com)
[13:21:05] *** Joins: ToBeFree (tobefree@moz-EA367A59.de)
[13:44:26] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[13:44:31] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[13:53:52] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[13:54:19] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[14:03:30] *** Joins: ahal (ahal@moz-7DE89BF0.cable.teksavvy.com)
[14:07:10] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[14:37:17] *** Quits: Debloper (debloper@moz-88FF8AE8.redhat.com) (Quit: Leaving.)
[14:52:06] *** Joins: maxli (Instantbir@moz-78AD779D.hsd1.ca.comcast.net)
[15:01:33] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[15:01:34] *** ChanServ sets mode: +o jdm
[15:01:49] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[15:02:30] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[15:06:20] *** Quits: ivan (ivan@moz-531C3EC9.members.linode.com) (Ping timeout)
[15:06:32] *** Quits: wchen (wchen@2D12D1F7.7CA4D702.F7A44A1B.IP) (Ping timeout)
[15:06:41] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Input/output error)
[15:06:45] *** Quits: alex_abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[15:06:45] *** Quits: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk) (Ping timeout)
[15:06:59] *** Joins: jdm_ (jdm@moz-AC9499B2.cable.teksavvy.com)
[15:07:11] *** Quits: fzzzy (fzzzy@A5CBE5CF.A81CC6E.44FA8ED.IP) (Ping timeout)
[15:07:13] *** Joins: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk)
[15:07:22] *** Quits: khodzha (khodzha@AF0E54DB.EF9FA30D.CA6E2165.IP) (Ping timeout)
[15:07:25] *** Quits: maxli (Instantbir@moz-78AD779D.hsd1.ca.comcast.net) (Ping timeout)
[15:07:35] *** Quits: reyre (reyre@moz-89E9865B.com) (Ping timeout)
[15:07:40] *** Quits: secretrobotron (secretrobo@moz-E9501591.members.linode.com) (Ping timeout)
[15:07:40] *** Quits: philix (philix@moz-4689D536.user.veloxzone.com.br) (Ping timeout)
[15:08:04] *** Quits: rhodesd (none@3646D136.4C5731DA.F395EA5B.IP) (Ping timeout)
[15:08:08] *** Quits: jdm_ (jdm@moz-AC9499B2.cable.teksavvy.com) (Input/output error)
[15:08:19] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[15:08:30] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (Ping timeout)
[15:08:33] *** Joins: khodzha (khodzha@AF0E54DB.EF9FA30D.CA6E2165.IP)
[15:09:11] *** Quits: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk) (Ping timeout)
[15:09:29] *** Quits: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se) (Ping timeout)
[15:09:33] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[15:09:46] *** Quits: ahal (ahal@moz-7DE89BF0.cable.teksavvy.com) (Ping timeout)
[15:09:55] *** Quits: ekiara (emk@moz-9B1940E9.tech.co.ke) (Ping timeout)
[15:10:22] *** Quits: khodzha (khodzha@AF0E54DB.EF9FA30D.CA6E2165.IP) (Ping timeout)
[15:10:36] *** Quits: bhearsum (bhearsum@moz-FBAE94.members.linode.com) (Ping timeout)
[15:10:53] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[15:11:26] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[15:11:27] *** ChanServ sets mode: +o jdm
[15:11:57] *** Joins: fzzzy (fzzzy@A5CBE5CF.A81CC6E.44FA8ED.IP)
[15:12:38] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Input/output error)
[15:12:39] *** Joins: bhearsum (bhearsum@moz-FBAE94.members.linode.com)
[15:12:46] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[15:12:46] *** ChanServ sets mode: +o jdm
[15:12:56] *** Joins: wchen (wchen@2D12D1F7.7CA4D702.F7A44A1B.IP)
[15:13:20] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[15:13:30] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[15:13:52] *** Joins: reyre (reyre@moz-89E9865B.com)
[15:13:56] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[15:14:41] *** Quits: wchen (wchen@2D12D1F7.7CA4D702.F7A44A1B.IP) (Ping timeout)
[15:14:51] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Ping timeout)
[15:15:46] *** Quits: bhearsum (bhearsum@moz-FBAE94.members.linode.com) (Ping timeout)
[15:15:56] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[15:15:56] *** ChanServ sets mode: +o jdm
[15:16:33] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Input/output error)
[15:17:31] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[15:18:27] *** Joins: khodzha (khodzha@AF0E54DB.EF9FA30D.CA6E2165.IP)
[15:19:14] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[15:19:14] *** ChanServ sets mode: +o jdm
[15:19:22] *** Quits: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca) (Ping timeout)
[15:19:22] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[15:20:02] *** Quits: reyre (reyre@moz-89E9865B.com) (Ping timeout)
[15:20:17] *** Quits: khodzha (khodzha@AF0E54DB.EF9FA30D.CA6E2165.IP) (Ping timeout)
[15:20:20] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Input/output error)
[15:21:41] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[15:21:41] *** ChanServ sets mode: +o jdm
[15:21:59] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[15:22:36] *** Joins: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca)
[15:22:40] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[15:23:29] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Ping timeout)
[15:23:39] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (Ping timeout)
[15:24:13] *** Joins: rhodesd (none@3646D136.4C5731DA.F395EA5B.IP)
[15:25:27] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[15:25:27] *** ChanServ sets mode: +o jdm
[15:25:30] *** Joins: reyre (reyre@moz-89E9865B.com)
[15:25:32] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[15:25:53] *** Joins: bhearsum (bhearsum@moz-FBAE94.members.linode.com)
[15:25:54] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[15:25:55] *** Quits: rhodesd (none@3646D136.4C5731DA.F395EA5B.IP) (Ping timeout)
[15:25:59] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[15:26:05] *** Joins: maxli (Instantbir@moz-78AD779D.hsd1.ca.comcast.net)
[15:26:36] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Input/output error)
[15:26:43] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[15:27:33] *** Quits: bhearsum (bhearsum@moz-FBAE94.members.linode.com) (Ping timeout)
[15:27:36] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[15:27:49] *** Quits: reyre (reyre@moz-89E9865B.com) (Ping timeout)
[15:28:09] *** Joins: bhearsum (bhearsum@moz-FBAE94.members.linode.com)
[15:28:29] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (Ping timeout)
[15:28:40] *** Quits: maxli (Instantbir@moz-78AD779D.hsd1.ca.comcast.net) (Ping timeout)
[15:28:52] *** Joins: jmatthews (jmatthews@moz-DB4A9C19.scl3.mozilla.com)
[15:29:07] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[15:30:07] *** Joins: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk)
[15:30:09] *** Joins: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca)
[15:30:39] *** Quits: jmatthews (jmatthews@moz-DB4A9C19.scl3.mozilla.com) (Connection reset by peer)
[15:30:50] <jack> do we have any debug function to dump the DOM?
[15:30:50] *** Joins: wchen (wchen@2D12D1F7.7CA4D702.F7A44A1B.IP)
[15:30:57] *** Joins: ekiara (emk@moz-9B1940E9.tech.co.ke)
[15:30:59] *** Joins: khodzha (khodzha@AF0E54DB.EF9FA30D.CA6E2165.IP)
[15:30:59] *** Joins: ahal (ahal@moz-7DE89BF0.cable.teksavvy.com)
[15:31:20] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[15:31:24] *** Joins: reyre (reyre@moz-89E9865B.com)
[15:31:35] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[15:31:39] *** Joins: jdm (jdm@moz-DB4A9C19.scl3.mozilla.com)
[15:31:39] *** ChanServ sets mode: +o jdm
[15:31:54] *** Joins: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se)
[15:32:49] *** Joins: secretrobotron (secretrobo@moz-E9501591.members.linode.com)
[15:33:00] <jgraham> Ms2ger: Thanks
[15:34:30] *** Joins: rhodesd (none@3646D136.4C5731DA.F395EA5B.IP)
[15:35:37] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[15:35:45] <jgraham> Does rust have any concept of functions with default parameters? (the equivalent of def foo(a=1) in python)
[15:38:27] <eddyb> jgraham: nope, but we want it. you can use Option<T> for now
[15:39:17] <jgraham> eddyb: OK, good to know it's on the radar at least :)
[15:39:17] <eddyb> (some people are against it, for similar reasons to why they're against function overloading by argument types - and specialization in general)
[15:43:34] <Ms2ger> jgraham, I haven't done a spec cross-check yet, but I'll try to do that tomorrow
[15:46:32] <jgraham> Ms2ger: No problem, I need to write more tests anyway
[15:46:48] * Ms2ger approves of more tests
[15:46:49] <jgraham> May as well take this oppertunity to get a proper innerHTML testsuite
[15:47:22] *** Joins: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com)
[15:47:59] <Ms2ger> That would be nice to have, certainly
[15:49:13] <larsberg> jack: the quadtree has some uncalled debugging code to turn the loaded HTML into a string for debug printing, though I don't know if it still works
[15:49:30] <larsberg> it's the source of half those 'unused code' warnings in your Rust upgrade branch :_)
[15:51:11] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[15:53:56] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[15:54:03] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: hoverbear)
[15:54:46] *** Joins: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP)
[15:56:13] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[15:57:54] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[15:57:58] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[15:59:40] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[16:05:15] *** Quits: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca) (Quit: eatkinson)
[16:11:50] <jack> larsberg: that prints out the quad tree in HTML form for debugging
[16:13:21] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[16:13:30] <larsberg> jack: yeah, I couldn't find anything that dumps the DOM tree directly either
[16:15:02] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[16:16:59] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[16:25:40] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[16:25:40] *** ChanServ sets mode: +o pcwalton
[16:29:22] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[16:29:22] *** ChanServ sets mode: +qo dherman dherman
[16:30:21] *** Quits: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP) (Client exited)
[16:30:39] *** Joins: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP)
[16:38:32] *** Joins: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca)
[16:39:38] <jack> pcwalton: ping
[16:43:59] <pcwalton> jack: pong
[16:44:19] <jack> pcwalton: servo is crashing in arc glue_drop post rust upgrade
[16:44:28] <jack> it appears to be in all this unsafe layout manipulation code
[16:44:37] <jack> but lars and i don't quite understand what's happening
[16:45:14] <pcwalton> hmm ok. do you have a branch I can pull? I'll look into it once I get into the office.
[16:45:28] <jack> yes. metajack/rustup-20131219
[16:45:37] <pcwalton> ok, thanks. I'll take a look.
[16:45:40] <jack> it segfaults basically 100% of the time on OS X
[16:45:44] <jack> and about 30% of the time on Linux
[16:45:50] <jack> with similar backtraces.
[16:45:55] <jack> What is MutSlotRef?
[16:46:12] <pcwalton> it's what a Slot hands back to you in order to reset the borrow flags.
[16:46:35] <jack> is it the same thing as RefCell?
[16:46:38] <pcwalton> no
[16:46:40] <pcwalton> well
[16:46:43] <pcwalton> Slot is the same thing as RefCell
[16:46:48] <pcwalton> and RefCell has a similar thing
[16:47:11] <jack> Should i change Slot to RefCell?
[16:47:19] <jack> and remove util::Slot
[16:47:29] <pcwalton> yup, if your Rust version is recent enough to have RefCell
[16:47:57] <jack> ok. I'll do that while I wait for you to poke at it
[16:49:12] <larsberg> pcwalton: you'll also need a bunch of his submodule updates - I have a cheesy script for them all: https://gist.github.com/larsbergstrom/8285665
[16:49:17] <pcwalton> ok
[16:55:06] <jack> pcwalton: node has .borrow and .borrow_unchecked etc that just delegate to node.data.borrow etc. but it uses transmute, why?
[16:55:22] <pcwalton> not sure off the top of my head
[16:55:25] <pcwalton> try removing them :)
[16:56:14] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[16:57:11] <jack> RefCell has no borrow_unchecked
[16:57:39] <Ms2ger> Yay, transmute
[16:58:31] <jack> the comments say unchecked is threadsafe
[16:58:35] <jack> that makes no sense to me
[16:58:47] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[16:58:47] <ghservo> [13rust-azure] 15zmike opened pull request #68: depend on skia (06master...06master) 02http://git.io/ajauGA
[16:58:47] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[17:05:22] <jack> transmute is because RefCell<Option<*()>> and we want to return RefMut<'a,()>
[17:05:46] <jack> so it's transmute RefMut<'a,Option<*()>> to RefMut<'a,()>
[17:05:51] <jack> that seems... iffy
[17:06:00] *** ahal is now known as ahal|lunch
[17:08:38] *** Joins: pauls (pauls@moz-7140CF01.ccs.neu.edu)
[17:10:04] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[17:12:50] <jack> jdm: are you going to FOSDEM?
[17:13:21] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[17:14:03] <jdm> jack: the talk selection should happen today, but if I'm selected then yes
[17:14:25] *** Quits: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP) (Client exited)
[17:14:27] <jack> jdm: well i just got a message that my talk was accepted.
[17:14:30] <jack> but i never submitted one.
[17:14:40] *** Quits: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp) (Ping timeout)
[17:14:50] <jack> So I was curious if I got your talk acceptance or something
[17:14:58] <jdm> haha
[17:14:59] <jdm> ok
[17:15:08] <jdm> so your name was first in the potential speakers that I put down
[17:15:12] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[17:15:36] <jdm> jack: are you planning to attend?
[17:15:38] <larsberg> jack: lol! that sounds like the mail I get from conferences in China, "you has been accepted to present at First Conference In Computing Publicationmoneyscam"
[17:15:41] <SimonSapin> jdm: what was your proposal?
[17:16:03] <jdm> SimonSapin: https://pastebin.mozilla.org/3952372
[17:16:30] <larsberg> jdm: that looks great!
[17:16:32] <jack> jdm: I wasn't since I traveled so much in fall
[17:17:07] <jdm> more for me, then :)
[17:17:16] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[17:17:17] <Ms2ger> jdm, I understand that you're in, fwiw
[17:18:10] <SimonSapin> jdm: fwiw, Iâ€™ll be taking eurostar from London on Fri. 18:04, staying at Hotel Astrid, and back Sun. 19:52
[17:18:25] <jgraham> Well that solves the "getting chocolate to Ms2ger" problem, I hope
[17:18:40] <jdm> oh right, hotel
[17:18:44] * jdm feels very disoragnized
[17:19:05] <Ms2ger> That reminds me, I should get chocolate for people
[17:19:32] * Ms2ger has an exam until Friday 5:30 \o/
[17:19:43] *** Joins: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP)
[17:19:47] <jack> jdm: was your talk a servo talk?
[17:19:53] *** Quits: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp) (Ping timeout)
[17:20:01] <Ms2ger> Yeah
[17:20:02] <jdm> jack: yes, see pastebin above
[17:20:47] <jack> SimonSapin: node_util's have_css_select_results calls unwrap() on a borrowed value
[17:20:50] <jack> that seems bad.
[17:21:43] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[17:23:10] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[17:24:43] <SimonSapin> jack: what file is that in?
[17:25:03] <jack> SimonSapin: node_util.rs i see that it's using as_ref().unwrap() which should be ok.
[17:36:35] *** ahal|lunch is now known as ahal
[17:37:51] *** Quits: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca) (Quit: eatkinson)
[17:37:58] <jack> pcwalton: not sure how to convert the unchecked() stuff from Slot.
[17:38:04] <jack> Did you do that just for speed?
[17:38:06] <SimonSapin> jack: yes, it looks like itâ€™s only unwrapping a ref
[17:39:36] <SimonSapin> Anyone has an opinion on whether |node.is_element()| is a good test for "is not an anonymous box" ? https://github.com/mozilla/servo/pull/1461
[17:39:53] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[17:41:39] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:42:40] <Ms2ger> Doesn't sound like one :)
[17:42:45] <Ms2ger> Ask bz?
[17:43:19] <SimonSapin> I mean in our implementation
[17:44:12] <jgraham> It feels bizzare if that *isn't* a good test. Why would the layout tree give anonymous boxes the element id type?
[17:44:29] * jgraham doesn't actually know anything about the layout tree
[17:45:11] <jack> why would we be testing nodes if they are boxes?
[17:45:15] <jack> that should be called on flows no?
[17:45:36] *** Joins: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca)
[17:47:32] <SimonSapin> I have no idea :/
[17:48:59] *** Quits: kanru (kanru@moz-99690620.hinet-ip.hinet.net) (Ping timeout)
[17:55:32] <jdm> jack: could you reply to that message and tell them that I'll be giving the talk in your stead?
[17:55:47] <jack> jdm: sure
[17:57:00] <jack> borrowed value does not live long enough
[17:57:01] <jack> ugh
[17:57:15] <jdm> disable the borrow checker
[17:57:18] <jack> RefCell's stuff is going to need more temporaries than the old stuff.
[17:57:44] *** Joins: dbaron (dbaron@moz-A9D01D68.dsl.dynamic.sonic.net)
[18:10:43] *** Quits: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp) (Ping timeout)
[18:13:13] *** Joins: bholley (bholley@moz-BBE3ABD.mv.mozilla.com)
[18:13:21] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[18:15:06] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[18:15:06] *** Joins: Jayflux (Jason@moz-5D9408E2.as13285.net)
[18:15:15] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[18:40:22] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[18:40:22] *** ChanServ sets mode: +o pcwalton
[18:42:30] <jack> pcwalton: what was the borrow_unchecked method on slot for? Speed?
[18:43:22] <pcwalton> IIRC it was just an expedient workaround for the unsafe thing
[18:43:35] <pcwalton> to do the unsafe thing
[18:43:38] <pcwalton> until we get the safe thing working
[18:44:54] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[18:44:54] *** ChanServ sets mode: +qo dherman dherman
[18:45:28] <jack> Ok. So no issue just moving it to borrow_mut then
[18:45:54] <jack> Or borrow depending. Sometimes it was being used to mutate
[18:48:07] <jack> bhearsum: if I file a bug for converting a few of the Linux builders to android cross compiles, would that be something you could work on soon? I think it just needs the ndk tools and a different configure invocation and no make check
[18:50:37] <bhearsum> jack: i'm not sure if it'll be me, but i think someone can probably take a look in the next few weeks
[18:50:41] <kmc> android builders \o/
[18:53:04] <larsberg> do we usually run them with the android emulator or on a Real Device (TM)?
[18:53:25] <larsberg> I've been fiddling with rust arm builds and the tests seem to run OK on the emulator (though it's a little finicky)
[18:57:32] <kmc> nice
[18:58:10] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[18:59:07] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Ping timeout)
[19:04:55] <jack> larsberg: first step is just to keep it building.  Running tests is harder
[19:08:57] <pcwalton> building LLVM at the moment
[19:09:07] <pcwalton> once that's done I'll investigate that bug
[19:10:34] *** Quits: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca) (Quit: eatkinson)
[19:12:43] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:12:44] *** ChanServ sets mode: +o brson
[19:13:20] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[19:13:31] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[19:13:31] *** ChanServ sets mode: +qo dherman dherman
[19:15:03] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[19:16:37] *** Joins: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca)
[19:41:12] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[19:41:12] <ghservo> [13servo] 15jdm closed issue #522: don't let configure nuke uncommitted state 02http://git.io/9dV2VQ
[19:41:12] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[19:45:52] <zmike> jdm: I updated my task-naming pr again
[19:46:00] <zmike> let me know if there's any other changes I should make
[19:47:50] <pcwalton> jack: error: -O and --opt-level both provided
[19:47:53] <pcwalton> when building libpng
[19:47:55] <pcwalton> have you seen that?
[19:48:17] <jack> --disable-optimize for now
[19:48:20] <jack> i'll fix that bug
[19:53:18] *** Quits: victorporof (victorporo@5EC92F85.71368607.9B1E38F4.IP) (Quit: victorporof)
[19:55:42] *** Joins: heather (heather@moz-42412102.hsd1.ca.comcast.net)
[19:57:15] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (Client exited)
[19:58:08] *** Quits: heather (heather@moz-42412102.hsd1.ca.comcast.net) (Connection reset by peer)
[19:58:26] *** Joins: heather (heather@moz-42412102.hsd1.ca.comcast.net)
[20:00:52] <jack> task '<unnamed>' failed at 'assertion failed: self.parent.borrow == WRITING', /Users/jack/src/servo/src/compiler/rust/src/libstd/cell.rs:269
[20:00:57] *** Quits: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca) (Quit: eatkinson)
[20:00:57] <jack> after my Slot -> RefCell conversion
[20:01:50] <eddyb> jack: it's most likely an extra block scope you have to use somewhere
[20:02:13] <pcwalton> yeah
[20:02:40] <jack> i wonder why Slot didn't get this. probably where unchecked was used :)
[20:04:36] *** Joins: jet (jet@moz-79F891EE.hsd1.ca.comcast.net)
[20:10:31] * jack builds on linux so he can get a backtrace.
[20:12:29] *** jet is now known as jet|pto
[20:13:20] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[20:15:06] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[20:20:24] *** Joins: eatkinson (eatkinson@C0A89863.ED78EA15.5FF071F1.IP)
[20:21:55] <jack> hm.. i can't see the problem.
[20:22:04] <jack> it's getting that in the initialization phase
[20:22:09] <jack> initialize_layout_data
[20:22:20] *** Quits: eatkinson (eatkinson@C0A89863.ED78EA15.5FF071F1.IP) (Quit: eatkinson)
[20:25:31] *** Quits: dbaron (dbaron@moz-A9D01D68.dsl.dynamic.sonic.net) (Ping timeout)
[20:27:35] <jack> i wish RefCell could tell me where the other borrow was
[20:28:26] <jdm> that is something we've lost
[20:29:37] <larsberg> yeah, when fiddling with this port I've been dying for at least some kind of tracehook. e.g. having calls to send print out the file, line number, and channel address 
[20:29:44] <larsberg> guess we could do it with gdb breakpoint automation
[20:29:55] <larsberg> set a breakpoint on the borrow method, dump the caller
[20:30:20] <larsberg> (assuming this is the dynamic borrow stuff from slot and not borrow checker stuff)
[20:32:32] <jack> we borrow a lot, so i'm not sure that would work.
[20:32:48] <jack> I thought the borrows were supposed to end when RefMut was dropped
[20:33:03] <jack> i can't figure out why this is happening
[20:35:11] <larsberg> could also print the address of the underlying atomic so you can filter the output for it. no GC so it should be stable :-)
[20:37:44] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Ping timeout)
[20:39:13] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[20:39:13] *** ChanServ sets mode: +qo dherman dherman
[20:41:43] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Ping timeout)
[20:41:51] <jack> oh nice. the assert failure is in Drop
[20:42:47] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[20:42:47] *** ChanServ sets mode: +qo dherman dherman
[20:44:21] * jdm commences reviews
[20:44:34] * jdm is also not sure that he can make it to the meeting tonight
[20:44:48] <jack> layout data is a RefCell<*()>. mutate() returns a RefCell<()>, mutate_layout_data returns a RefCell<Option<~LayoutData>>
[20:45:09] <jack> that lack of *() looks like a bug.
[20:45:13] <Ms2ger> jdm, wdyt about RemoveAttribute/remove_attribute?
[20:45:38] <jdm> I'll need to take a look at that
[20:45:44] <jack> but i guess it doesn't matter since it's transmuted twice
[20:46:29] <jack> i guess somewhere i'm transmuting Ref into RefCell?
[20:46:34] <jack> er, Ref into RefMut
[20:48:50] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[20:49:45] *** Joins: eholk (eholk@moz-799DA9F.lsanca.fios.verizon.net)
[20:49:50] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[20:49:52] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[20:50:03] <jack> AbstractNode::set_parent_node is unused
[20:50:05] <jack> that seems weird.
[20:50:32] <jack> also set_first set_last, etc
[20:51:37] <Ms2ger> Kill them! Please!
[20:52:24] <eddyb> jack: I wish dead code analysis could take a few crates and check reachability through the whole
[20:52:44] <jack> eddyb: to find pubs that are unused too?
[20:52:49] <eddyb> mhmm
[20:55:33] *** Joins: khodzha1 (khodzha@155D5F78.2AEE264E.CA6E2165.IP)
[20:55:51] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[20:55:58] *** Quits: khodzha (khodzha@AF0E54DB.EF9FA30D.CA6E2165.IP) (Ping timeout)
[20:56:12] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[20:57:57] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[20:58:57] <jack> how do i disable all parallelism in layout?
[20:59:01] <jack> i wonder if this is a data race
[21:02:42] *** Joins: valenting (Thunderbir@C23D205E.FDB3AFA7.FB866788.IP)
[21:03:16] <larsberg> jack: I thought that the only parallelism we have enabled right now is CSS matching (which you can edit out of css/matching.rs). I've disabled that locally, to no avail.
[21:03:49] <kmc> you can also try RUST_THREADS=1
[21:04:00] <larsberg> RUST_THREADS=1 makes us *always* crash on startup :-)
[21:04:35] <larsberg> (in this Rust port, not master)
[21:04:52] <jack> this is failing before match_subtree
[21:05:02] <jack> in initialize_style_for_subtree
[21:05:18] <jack> so that is not running parallel
[21:05:19] * jack is stumped
[21:05:38] <kmc> larsberg: odd, do you know why?
[21:06:41] <jack> larsberg: you can try metajack/rustup-20131219-refcell if you want to take a look
[21:06:45] <larsberg> kmc: no idea. I've been looking into a crash where we're dropping PropertyDeclarations for no good reason I can see https://gist.github.com/larsbergstrom/8271341
[21:06:46] <jack> maybe i'm misisng something stupid
[21:07:05] <jack> pcwalton: have you had any luck?
[21:07:45] <larsberg> jack: will do, I'm getting nowhere with the Arcs, though it'll probably be a missing set of curlies or somethingÂ similar :-)
[21:10:12] <jack> value is the first thing in RefCell
[21:10:17] <jack> i wonder if the trasnmute is just clobbering it.
[21:10:41] <jack> maybe Option<*()> and Option<~LayoutData> aren't the same representation
[21:12:14] <kmc> do you know about hexdump<T>(obj: &T)?  https://github.com/mozilla/servo/blob/master/src/components/util/debug.rs#L27-L33
[21:15:17] *** Quits: jackneill (jackneill@moz-E93E25D8.pool.digikabel.hu) (Ping timeout)
[21:15:38] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Ping timeout)
[21:15:49] <larsberg> kmc: that's cool!
[21:16:14] <jack> i did not know about that :)
[21:19:06] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[21:19:06] *** ChanServ sets mode: +qo dherman dherman
[21:20:23] <pcwalton> jack: acrichto had an idea. did you use trait coercion?
[21:20:36] <pcwalton> there is a known crash bug with it
[21:20:39] <pcwalton> if you don't use `as`
[21:21:05] <jack> not that i know of.
[21:21:12] <pcwalton> 62
[21:21:52] <pcwalton> oops
[21:22:20] <jack> i don't think i removed any `as`
[21:22:25] <jack> i'll check in a sec
[21:22:43] <pcwalton> grrr, don't reproduce in gdb
[21:22:50] <jack> transmute has a check for being called on types of different sizes.
[21:23:06] <jack> so i'm probably barking up the wrong tree.
[21:24:58] <jack> error: transmute called on types with different sizes: std::cell::RefMut<,std::option::Option<*()>> (128 bits) to &layout::util::LayoutDataAccess$LayoutNode::mutate_layout_data::MyRefCell<std::option::Option<*()>> (64 bits)
[21:25:06] <jack> RefMut is not 128 bits
[21:25:22] <jack> what is going on!
[21:25:35] *** Joins: dbaron (dbaron@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[21:25:54] <jack> it's a struct with a single borrowed pointer
[21:27:11] <pcwalton> jack: I think Option<*()> is not optimized to null
[21:27:19] <kmc> if it has a destructor then there will be a drop flag, right?
[21:27:33] <pcwalton> because *T can be null itself
[21:27:33] <Ms2ger> pcwalton, can't be... *() can be null already
[21:27:39] <pcwalton> right
[21:27:48] <jack> why does that matter here?
[21:28:09] <jack> struct RefMut { priv parent: &'b mut RefCell<T> }
[21:28:15] <pcwalton> ah
[21:28:16] <pcwalton> it's the drop flag
[21:28:23] <pcwalton> this will be removed by niko in due time :)
[21:28:25] <kmc> it's relevant to the previous question of whether Option<*()> and Option<~LayoutData> have the same repr (they don't)
[21:28:35] <kmc> what's the replacement for the drop flag?
[21:28:49] <jack> oh, so there is an exgtra uint before the struct data?
[21:28:53] <pcwalton> kmc: the compiler will just know in all circumstances with certainty at each program point whether something is to be destroyed
[21:28:55] <pcwalton> an extra bool
[21:28:56] <pcwalton> yeah
[21:29:47] <pcwalton> btw, investigating the crash now
[21:30:42] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[21:31:19] *** Joins: sms (Mibbit@moz-A3C5D209.hsd1.ga.comcast.net)
[21:31:22] <jack> can I do Option<~()>?
[21:31:41] <pcwalton> I'd just do *() without the option if that's possible
[21:31:47] <pcwalton> but yes in a pinch you can Option<~()>
[21:31:54] <jack> it is if we allow ptr::nul() as the initializer :0
[21:34:30] <kmc> if it's ~() then you have to be careful not to drop it... but it won't be copyable either so that should make it relatively easy
[21:35:38] <jack> only downside is is_present() is not self.data.is_not_null()
[21:35:45] <jack> s/not/now/
[21:36:24] *** Joins: eatkinson (eatkinson@C0A89863.ED78EA15.5FF071F1.IP)
[21:36:57] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[21:37:17] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[21:37:40] <jack> ok. that fixed the assert fail in drop
[21:39:00] *** Quits: valenting (Thunderbir@C23D205E.FDB3AFA7.FB866788.IP) (Quit: valenting)
[21:39:02] <jack> and now about-mozilla.html works
[21:39:02] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[21:39:13] <jack> so apparently there was a subtle change in the Slot representations
[21:39:31] <pcwalton> jack: oh, you fixed the crash?
[21:39:32] <jack> so the transmutes were hosing the layout data
[21:39:36] <jack> it appears so
[21:39:37] <larsberg> that also got rid of all the other Arc & stuff-related bugs? nice!
[21:39:40] <pcwalton> ahh, ok
[21:39:40] <jack> will test on OSX shortly
[21:39:41] <larsberg> fantastic
[21:39:42] <pcwalton> that makes sense
[21:39:53] * pcwalton goes back to de-@ing rust
[21:42:33] *** Quits: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP) (Ping timeout)
[21:43:22] <jack> acid1 works on osx.
[21:43:27] <pcwalton> \o/
[21:43:30] <pcwalton> thanks so much for getting this working!
[21:43:44] <jack> oh man. i am almost done. now there is a light at the end of the tunnel
[21:43:55] <pcwalton> feels good, doesn't it? :)
[21:44:01] <Ms2ger> pcwalton, could de-@ servo :)
[21:44:04] <jack> submodule PRs incoming shortly
[21:44:07] <pcwalton> gotta de-@ rust first
[21:44:09] <pcwalton> but gladly
[21:44:16] <jdm> woo
[21:44:28] <Ms2ger> jdm, what's up with jsmanaged, btw?
[21:44:40] <jdm> Ms2ger: haven't had time to get back to it
[21:44:52] <jdm> but it sounds like we have solutions for the concerns we had
[21:45:08] <Ms2ger> Excellent
[21:45:18] <jdm> 1) use Rc<RefCell<T>>, 2) use Encodable and derive trace hooks automatically
[21:45:41] <pcwalton> I apologize in advance for the verbosity of ref cells, we're working on it
[21:45:48] <pcwalton> niko has a PR hopefully this week to fix most of it
[21:45:48] <jdm> 1) allows us to sidestep the problem of JSManaged<T> sitting around on the stack
[21:46:31] <jdm> derived trace hooks will be so punk rock
[21:46:42] <Ms2ger> pcwalton, good to hear
[21:47:09] <Ms2ger> jdm, how will 2 work?
[21:47:23] <Ms2ger> If you have time, I'm just idly interested :)
[21:47:44] <jdm> Ms2ger: we make a tracer object that implements Encoder
[21:47:55] <jdm> then we add #[deriving(Encodable)] to every DOM object
[21:48:08] <jdm> and it yells for any fields that don't implement Encodable
[21:48:10] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Ping timeout)
[21:48:34] <jdm> we make the encode method be our trace hook for every type
[21:48:40] <jdm> implement empty ones for primitive types
[21:49:04] <jack> pcwalton: did your codemap Pod fix not land?
[21:49:13] <pcwalton> hmm, maybe not
[21:49:16] <cmr> I thought it did..
[21:49:19] <pcwalton> which one is that?
[21:49:33] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[21:49:34] *** ChanServ sets mode: +qo dherman dherman
[21:49:42] <jack> that one did
[21:49:48] <jack> maybe this is something else:
[21:49:55] <jack> task 'rustc' failed at 'index out of bounds: the len is 0 but the index is 0', /Users/jack/src/servo/src/compiler/rust/src/libsyntax/codemap.rs:437
[21:49:56] <cmr> https://github.com/mozilla/rust/pull/11060
[21:50:07] <cmr> Are you using debug-info?
[21:50:07] <jack> oh, maybe this is the issue i wanted jdm to look at
[21:50:08] <Ms2ger> Does that not imply that anything else using encodable things would stomp on it?
[21:50:15] <jack> cmr: of course :0
[21:50:16] <jdm> jack: I saw an issue filed about that recently
[21:50:21] <cmr> I found one of those debuginfo bugs, reported it yesterday.
[21:50:27] <jack> cmr: link?
[21:50:29] <pcwalton> I don't think Encodable is the long term solution, we want a real Traceable
[21:50:34] <cmr> https://github.com/mozilla/rust/issues/11322
[21:50:35] <pcwalton> but it'll probably do in a pinch
[21:51:24] <jack> oddly, for us it only happen compiling rust-cssparser in test mode
[21:51:33] <cmr> oh that's good!
[21:51:39] <cmr> that narrows it down quite a bit I imagine
[21:51:51] <SimonSapin> there is a if cfg!(test) somewhere
[21:51:56] <SimonSapin> in rust-cssparser
[21:52:11] <jdm> http://mxr.mozilla.org/servo/source/src/components/style/selectors.rs#550
[21:52:17] <jdm> oh, different module
[21:52:37] <SimonSapin> I mean not in the tests
[21:52:48] <jack> so it's basically rust-cssparser/tests.rs that fails.
[21:52:54] <jack> that's the only difference in the compile that i can see
[21:52:59] <jack> it includes that module in cfg(test)
[21:53:25] <SimonSapin> https://github.com/mozilla-servo/rust-cssparser/blob/6e3fbbe265582d55b0ef24bc2c9336aabc6522e2/tokenizer.rs#L103
[21:53:46] <SimonSapin> and #L85
[21:54:29] <jack> why assert only in cfg(test)/
[21:54:30] <jack> ?
[21:54:49] <SimonSapin> because I didnâ€™t know about debug_assert!()
[21:55:17] <SimonSapin> it should be changed
[21:55:25] <Ms2ger> debug_assert!?
[21:55:30] <jack> it's not that. removing those doesn't fix it.
[21:55:50] <jack> woah, this error happens at runtime!
[21:56:00] <jack> no sorry. misread the output
[21:58:17] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[21:59:12] <jack> commented out some tests and get a different error :0
[21:59:37] <jack> or rather, i get a no io in std::rt followed by the same assert failure with different numberes.
[22:00:21] <SimonSapin> hum, did I imagine debug_assert?
[22:00:27] <cmr> I recall it too..
[22:00:41] <cmr> cfg! was invented to support it
[22:00:57] <SimonSapin> I recall someone telling me about it, maybe it was you :)
[22:02:00] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Quit: Savago)
[22:02:45] <SimonSapin> oh, it was never merged: https://github.com/mozilla/rust/pull/7869
[22:03:04] *** bhearsum is now known as bhearsum|afk
[22:03:47] <cmr> ah
[22:04:19] <SimonSapin> anyway, if cfg!(debug) { assert!(â€¦) } would work, too
[22:07:33] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[22:09:23] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[22:09:29] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[22:10:05] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[22:10:06] <ghservo> [13servo] 15kmcallister closed issue #1346: Replace linked task failure with task::try 02http://git.io/UDLP2A
[22:10:06] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[22:11:17] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[22:11:24] *** Quits: dbaron (dbaron@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: 8403864 bytes have been tenured, next gc will be global.)
[22:14:31] *** Quits: eatkinson (eatkinson@C0A89863.ED78EA15.5FF071F1.IP) (Quit: eatkinson)
[22:15:05] *** Joins: dbaron (dbaron@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[22:17:37] *** jdm is now known as jdm|busy
[22:22:58] *** Quits: ahal (ahal@moz-7DE89BF0.cable.teksavvy.com) (Input/output error)
[22:25:58] <jack> so basically any compiler error it fails tyring to find the codemap
[22:26:10] <jack> i dont' think it has to do with the tests at all
[22:27:47] <jack> maybe it's include_str!?
[22:28:45] <jack> it does look like include_str! is partly responsible. cmr, does rustdoc use include_str!?
[22:29:04] <cmr> I thought it was that too, but we don't.
[22:29:13] <cmr> oh nevermind I lied
[22:29:16] <cmr> I was looking for include_bin
[22:29:18] <cmr> and in servo
[22:29:20] <cmr> and was unrelated
[22:29:29] <cmr> jack: yes that is probably it.
[22:29:37] <cmr> This bug has happened before, now that I think of it!
[22:29:50] <SimonSapin> jack: canâ€™t you get a stack trace ?
[22:30:05] <jack> SimonSapin: there is one from rustdoc in cmr's bug report
[22:30:06] <cmr> SimonSapin: the stack trace I got was some 500-odd frames long, and not-very-useful
[22:32:52] <jack> it's kind of hard ot narrow down becuase if i comment out stuff then dead_code or unused_import will trigger the bug
[22:36:06] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[22:36:06] <ghservo> [13servo] 15brunoabinader opened pull request #1462: Implement Node::replaceChild() (06master...06node-replace-child) 02http://git.io/-H8GRQ
[22:36:06] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[22:36:11] <jack> cmr: updated the bug. it appears the work around it just to eliminate all warnings and errors.
[22:36:22] <cmr> >_<
[22:37:09] <cmr> jack: rustdoc doesn't have any though.
[22:40:40] <Ms2ger> jdm|busy, I claim #1462 ;)
[22:40:40] <crowbot> Issue #1462: Implement Node::replaceChild() - https://github.com/mozilla/servo/pull/1462
[22:45:39] <jdm|busy> Ms2ger: it's too difficult, try something easier
[22:45:49] * Ms2ger pouts
[22:46:00] <jdm|busy> oh, wow
[22:46:05] <jdm|busy> it's a lot bigger than I expected
[22:46:07] <jdm|busy> have at it!
[22:46:51] *** Ms2ger is now known as pMs2ger
[22:47:17] <jdm|busy> pMs2ger: trying out hungarian notiation?
[22:47:34] <pMs2ger> Yep, p for pest
[22:51:15] <abinader> hey guys :-)
[22:51:16] <abinader> I
[22:51:25] <abinader> I'll be out for now, but back later
[22:51:40] <abinader> btw: happy (late) new year!
[23:00:00] *** Quits: dbaron (dbaron@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: 8403864 bytes have been tenured, next gc will be global.)
[23:00:22] *** Joins: dbaron (dbaron@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[23:06:02] *** Quits: pMs2ger (Ms2ger@125CFB8C.2C129564.3773EA9F.IP) (Quit: nn)
[23:06:54] *** Joins: deokjinkim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[23:09:50] *** Quits: bholley (bholley@moz-BBE3ABD.mv.mozilla.com) (Quit: bholley)
[23:10:31] *** Quits: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com) (Quit: )
[23:20:21] *** Quits: sms (Mibbit@moz-A3C5D209.hsd1.ga.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:21:58] *** Joins: bholley (bholley@moz-BBE3ABD.mv.mozilla.com)
[23:22:23] <jack> jdm: does michael woerister use irc?
[23:23:31] *** Quits: jet|pto (jet@moz-79F891EE.hsd1.ca.comcast.net) (Quit: jet|pto)
[23:23:33] <jdm|busy> jack: not regularly
[23:23:48] <jdm|busy> he does respond to email and github
[23:23:50] *** jdm|busy is now known as jdm
[23:24:09] *** Quits: bholley (bholley@moz-BBE3ABD.mv.mozilla.com) (Quit: bholley)
[23:25:09] <jack> ok. it apparently will compile fine if there are no warnings/errors and you use include_str! only once
[23:25:16] <jack> if you use it twice, it crashes anyway
[23:25:21] <jdm> haha
[23:26:04] * jack tries for a minimal test case.
[23:28:28] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:28:37] <jack> wow.. .i got it pretty small: https://github.com/mozilla/rust/issues/11322#issuecomment-31698910
[23:29:02] <jdm> nice
[23:29:20] <jdm> I predict there will be a PR to fix that within 24 hours
[23:29:35] <jdm> mw is really responsive to minimized testcases
[23:29:52] *** Joins: bholley (bholley@moz-BBE3ABD.mv.mozilla.com)
[23:30:40] <jack> i can't seem to reproduce the other behavior in a minimal way
[23:32:45] <jack> rust-encoding test_readme_whatwg fails on OS X :(
[23:33:50] <SimonSapin> jack: dbaron reminded me that Jan. 20 is a US holiday
[23:34:07] <jack> SimonSapin: yes, which is why 1/21-1/24 is the workweek :)
[23:34:27] <SimonSapin> oh, right
[23:34:34] <SimonSapin> the cvent thing still says 20
[23:34:53] <jack> SimonSapin: hopefully she'll change that. i told her about it.
[23:35:09] <jack> SimonSapin: any idea why this encoding test would fail?
[23:35:11] *** Quits: bholley (bholley@moz-BBE3ABD.mv.mozilla.com) (Quit: bholley)
[23:35:15] <jack> label::encoding_from_whatwg_label("euc-kr").unwrap();
[23:35:21] <jack> appears to be the failing line
[23:35:33] <SimonSapin> jack: any output?
[23:35:56] <jack> called option.unwrap() on a None value
[23:36:01] <jack> no output other than that
[23:36:10] *** Joins: bholley (bholley@moz-BBE3ABD.mv.mozilla.com)
[23:36:19] <jack> if i run it with RUST_LOG will that help?
[23:37:20] <SimonSapin> https://github.com/lifthrasiir/rust-encoding/blob/f71f674297782c6a4b5d9456ab185bfa9477b359/src/label.rs#L14
[23:38:03] <SimonSapin> didnâ€™t we have an issue where the work around was to have the thing before .as_slice() in a variable to keep it alive?
[23:38:44] *** Quits: bholley (bholley@moz-BBE3ABD.mv.mozilla.com) (Quit: bholley)
[23:39:02] <jack> must be a compiler bug.
[23:39:17] <jack> i got a "does not live long enough" when i tried to put in debugging
[23:39:48] <SimonSapin> https://github.com/mozilla/rust/issues/10683
[23:39:50] *** Joins: bholley (bholley@moz-BBE3ABD.mv.mozilla.com)
[23:40:53] <jack> apparently that didn't fix it.
[23:41:00] <SimonSapin> supposedly fixed in https://github.com/mozilla/servo/pull/1388
[23:41:50] *** Parts: wchen (wchen@2D12D1F7.7CA4D702.F7A44A1B.IP) ()
[23:42:00] <SimonSapin> is your rustc older than Thu, 12 Dec 2013 13:14:37 +0900 ?
[23:43:08] *** Quits: bholley (bholley@moz-BBE3ABD.mv.mozilla.com) (Quit: bholley)
[23:43:21] *** Joins: bholley (bholley@moz-BBE3ABD.mv.mozilla.com)
[23:43:50] <jack> SimonSapin: it's from Friday.
[23:45:28] <SimonSapin> so if you have |label.trim_chars(& &[' ', '\n', '\r', '\t', '\x0C']).to_ascii_lower()| in a variable, does it contain "euc-kr" when printed?
[23:48:41] <jack> hmm. gdb is now useful on OS X again
[23:48:49] <jack> i guess getting rid of the unwinding c++ stuff or whatever fixed it
[23:49:05] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Quit: dherman)
[23:49:10] <jack> SimonSapin: yes.
[23:49:17] <jack> it's got something to do with the as_slice() part
[23:50:51] <kmc> could it be something similar to https://github.com/mozilla/rust/issues/10683
[23:51:39] <jack> kmc: yes, Simon pasted that already and i added more stuff to that bug
[23:51:53] <jack> now i'm tracking down a rust-http test failure
[23:51:59] <jack> which is failing in BufferedReader.read
[23:52:41] <kmc> ah i see now
[23:54:52] <SimonSapin> jack: is there a grouped hotel booking planned?
[23:55:03] <jdm> the 20th is a holiday :o
[23:55:15] <jdm> SimonSapin: looks like the event puts people in the hotel vitale
[23:55:20] <jdm> I'm already booked for the griffin
[23:55:29] <jdm> or however it's spelled
[23:56:33] <SimonSapin> Itâ€™s spelled in French :)
[23:57:52] <SimonSapin> well Vitale seems full now
[23:58:11] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[23:58:40] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[23:58:40] *** ChanServ sets mode: +o pcwalton
