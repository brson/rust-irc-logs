[00:00:07] <kimundi> so, the vtable pointer would become invalid if the lifetime ends, and hence no conflict?
[00:00:48] <eddyb> kmc: ooooh I got confused
[00:01:16] <eddyb> kmc: it's because *JSON* \u escapes are 16-bit only, right?
[00:01:20] <huon> eddyb: I'd assume it has to be `intersection` rather than `min`
[00:01:22] <kmc> yes
[00:01:23] <eddyb> kimundi: yeah
[00:01:28] <eddyb> huon: mmaybe
[00:01:32] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[00:01:39] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[00:01:40] <eddyb> rusti: "\"\\ud83d\\udca9\""
[00:01:41] <kmc> this is about the decoding of escape sequences in JSON strings
[00:01:42] -rusti- "\ud83d\udca9"
[00:02:04] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[00:02:07] <eddyb> kmc: hmm, yeah, I don't think we do surrogate collapse at all
[00:02:09] *** flaper87 is now known as flaper87|afk
[00:02:12] <kimundi> impl CrateHandle { fn symbol<'a, T:'a>(&'a self, &str) -> T { ... } }
[00:02:16] <kimundi> eddyb: ^ ?
[00:02:22] <kmc> yeah, and so decoding the first one fails because it's not a Unicode codepoint
[00:02:24] <eddyb> kmc: can't JSON hold utf8 without escaping it?
[00:02:33] <eddyb> kimundi: yupp
[00:02:33] <kmc> yes, I believe so
[00:02:39] <kmc> but I have to read JSON files that somebody else wrote
[00:02:45] <eddyb> right, makes sense
[00:02:47] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[00:03:08] <kimundi> eddyb: If that works, this becomes surprisingly easy, unless... Does it work transitivly?
[00:03:16] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[00:03:30] *** Joins: philix_ (felipe@moz-1141E736.user.veloxzone.com.br)
[00:03:43] *** Joins: jmmk (jmmk@moz-588F65EA.c3-0.smr-ubr1.sbo-smr.ma.cable.rcn.com)
[00:03:47] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[00:03:57] *** Quits: philix (felipe@moz-D140DE32.user.veloxzone.com.br) (Ping timeout)
[00:04:08] <kimundi> the T == fn(A) -> B, does the 'a restriction apply to B as well? If B has a method that returns ~Trait, does the restriction apply for that as well?
[00:04:53] <eddyb> kimundi: try it out with 'static
[00:05:12] *** Quits: philix_ (felipe@moz-1141E736.user.veloxzone.com.br) (Ping timeout)
[00:05:30] <eddyb> rusti: fn check<T: 'static>(){} check::<fn(int) -> ~Clone>()
[00:05:31] -rusti- ()
[00:05:36] <eddyb> rusti: fn check<T: 'static>(){} check::<~Clone>()
[00:05:37] -rusti- ()
[00:05:45] <kimundi> Not sure how to test it with 'static. All those codesegment pointers are already 'static in a sense :P
[00:05:49] <eddyb> :/
[00:05:58] <eddyb> rusti: fn check<T: 'static>(){} check::<&Clone>()
[00:05:59] -rusti- pastebinned 5 lines of output: http://sprunge.us/WHBj
[00:06:10] <eddyb> trait objects are broken, ofc
[00:06:15] <eddyb> rusti: fn check<T: 'static>(){} check::<fn(int) -> &Clone>()
[00:06:16] -rusti- ()
[00:06:23] *** Quits: erickt_ (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[00:06:39] <eddyb> kimundi: ^^ that shouldn't work.... maybe?
[00:06:44] <Manishearth> How did rusti get that strange formatting (dashes instead of carets)
[00:06:48] <Manishearth> in IRC?
[00:07:16] <eddyb> Manishearth: where?
[00:07:19] <kimundi> Manishearth: what do you mean?
[00:07:46] <Manishearth> eddyb: "-rusti:#rust-" vs "< Manishearth>"
[00:07:58] <eddyb> Manishearth: that's a NOTICE
[00:07:58] <kimundi> Manishearth: Do you mean the nickname itslef, which depending on IRC client has a completely different formatting? ;)
[00:08:10] <eddyb> [02:06] [Notice] -rusti to #rust- ()
[00:08:16] <eddyb> vs [02:07] <eddyb> Manishearth: where?
[00:08:31] -Manishearth- test
[00:08:31] *** Joins: philix (felipe@moz-957F279F.user.veloxzone.com.br)
[00:08:36] <Manishearth> hm, nice
[00:08:38] <eddyb> oh dear that's scary
[00:08:44] <eddyb> like a ghost talking
[00:08:59] <Armavica> I can define a trait to ensure that some functions are implemented on my objects.  But can I also ensure that some traits are implemented on them?
[00:09:01] <eddyb> transcedental notices
[00:09:06] <kmc> IRC supports different kind of messages, the usual is PRIVMSG, but bots are supposed to send NOTICE and only respond to PRIVMSG, to avoid botloops
[00:09:10] <kmc> this rule is mostly ignored
[00:09:21] <eddyb> Armavica: you can inherit other traits from your trait
[00:09:23] <kmc> because some clients have annoying handling of NOTICE (mIRC would open a pop-up window or some shit)
[00:09:54] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[00:10:00] <eddyb> kmc: actually, switching rusti to PRIVMSG should be nice
[00:10:17] <eddyb> slightly harder to distinguish, but less cluttery
[00:10:53] <kimundi> eddyb: It got changed to the current system because the IRC thingy says use notices for it, and because someone in another channel got rusti in a loop with another bot :P
[00:10:54] *** Quits: Manishearth (manisheart@moz-F9058B8A.net) (Quit: leaving)
[00:10:58] *** Quits: parcha (quassel@moz-1A772EE6.hsd1.ma.comcast.net) (Client exited)
[00:11:06] <eddyb> kimundi: lol
[00:11:22] <eddyb> I guess... you can do that here with rusti and rustilite
[00:11:28] *** Joins: manishearth (manisheart@moz-F9058B8A.net)
[00:11:29] <kimundi> nope
[00:11:38] <eddyb> (if it were using PRIVMSG)
[00:11:38] *** manishearth is now known as Manishearth
[00:11:47] <kimundi> then yes
[00:11:51] <eddyb> kimundi: maybe it should just prepend something to its output
[00:12:05] <eddyb> a space at the start of each line or something
[00:12:07] <kimundi> rusti: println!("rustilite: fn main() {}"); if true {return}
[00:12:08] -rusti- <anon>:16:18: 16:43 error: invalid reference to argument `0` (there are 0 arguments)
[00:12:08] -rusti- <anon>:16         println!("rustilite: fn main() {}"); if true {return}
[00:12:08] -rusti-                            ^~~~~~~~~~~~~~~~~~~~~~~~~
[00:12:08] -rusti- error: aborting due to previous error
[00:12:08] -rusti- application terminated with error code 101
[00:12:16] <kimundi> rusti: println!("rustilite: fn main() \\{\\}"); if true {return}
[00:12:16] -rusti- rustilite: fn main() {}
[00:12:17] <eddyb>  rusti: "foo"
[00:12:24] <Armavica> eddyb: thanks
[00:12:28] *** Joins: parcha (quassel@moz-1A772EE6.hsd1.ma.comcast.net)
[00:12:34] <eddyb> the "error: aborting due to blah blah" and "application terminated with code 101" lines should be dropped, allowing more errors to be seen in IRC
[00:12:42] <eddyb> there's also coloring oportunities
[00:12:57] <eddyb> (I wish there was a way to force monospace)
[00:13:10] <eddyb> waaait maybe I can make notices monospaced :D
[00:13:27] *** Quits: jmmk (jmmk@moz-588F65EA.c3-0.smr-ubr1.sbo-smr.ma.cable.rcn.com) (Quit: leaving)
[00:13:41] <kimundi> eddyb: If rusti could separate error/warning message and actual output of the program, and tread them separately for its "show maximum 5 lines" behavior, that would be cool too.
[00:14:09] <Havvy> The maximum 5 lines is there for a reason.
[00:14:27] <eddyb> aww I can only do monospaced for MOTD
[00:14:43] <Havvy> File a bug?
[00:14:44] *** Quits: fournm (Aria@moz-ABB60BA0.austin.res.rr.com) (Quit: Leaving)
[00:14:55] <eddyb> Havvy: you mean a feature request?
[00:15:02] <Havvy> Same difference?
[00:15:14] <eddyb> the MOTD thing is a checkbox of its own
[00:15:18] <kimundi> rusti: println!("There are 20 lines of warning at foo.org\n145u"); if true {return}
[00:15:18] -rusti- There are 20 lines of warning at foo.org
[00:15:19] -rusti- 145u
[00:15:24] <kimundi> something like this
[00:15:38] <seanmonstar> drowning in TraitDef and MethodDef, anyone want to help? :D
[00:15:40] <kimundi> shows the result if any
[00:16:33] <mib_b5mvd5> is there any way to get a stack trace?
[00:17:00] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[00:17:16] <Manishearth> mib_b5mvd5: gdb
[00:17:26] <eddyb> Manishearth: not just gdb anymore ;)
[00:17:29] <Manishearth> break at fail
[00:17:31] <Manishearth> eddyb: ?
[00:17:36] <seanmonstar> wasn't there a new libbacktrace?
[00:17:39] <eddyb> Manishearth: y u no keep up
[00:17:47] <eddyb> mib_b5mvd5: RUST_LOG=backtrace I think
[00:17:53] *** Quits: Doppp (Doppp@ED5E5331.58AB7B93.EE633EE.IP) (Ping timeout)
[00:17:53] <eddyb> rusti: "\u00031\u00033\u00033\u00037"
[00:17:53] -rusti- 1337
[00:17:57] <Manishearth> eddyb: Hey, I'm knew :)
[00:17:59] <eddyb> huh...
[00:18:07] <Manishearth> *new
[00:18:07] <mib_b5mvd5> sweet thanks
[00:18:17] <eddyb> aaaah those are color codes
[00:18:19] <Manishearth> also sleepy, as is evident from my spelling
[00:18:24] <eddyb> rusti: "\u00031\u00033\u00033\u00037foobar"
[00:18:24] -rusti- 1337foobar
[00:18:39] <eddyb> why do I have a highlight for color codes?
[00:18:41] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[00:18:41] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[00:18:43] <Manishearth> rusti: "a"
[00:18:44] -rusti- a
[00:19:03] *** Joins: Doppp (Doppp@ED5E5331.58AB7B93.EE633EE.IP)
[00:19:05] <seanmonstar> so, with https://gist.github.com/seanmonstar/77dff180db56447e6fd4, why would i be getting __E is not a trait
[00:19:22] <eddyb> I think I was trying to see whether I can use it as a magic thing
[00:19:40] *** Joins: Rusky (russell@moz-173BA32C.slkc.qwest.net)
[00:19:58] <eddyb> seanmonstar: this is wrong https://gist.github.com/seanmonstar/77dff180db56447e6fd4#file-decodable-rs-L18
[00:20:06] <eddyb> seanmonstar: you basically have __E: __E
[00:20:18] <seanmonstar> orly
[00:20:33] <seanmonstar> so, just the tuple ("__E")?
[00:21:01] <eddyb> ("__E", vec!())
[00:21:07] <eddyb> or Vec::new() instead of vec!()
[00:21:09] <Manishearth> rusti: "1a2b3c"
[00:21:10] -rusti- 1a2b3c
[00:21:13] <Manishearth> nice :)
[00:21:45] <Manishearth> rusti: ~"a"
[00:21:46] -rusti- a
[00:21:51] <Manishearth> rusti: ~"a"=="b"
[00:21:52] -rusti- <anon>:16:15: 16:18 error: mismatched types: expected `~str` but found `&'static str` (str storage differs: expected `~` but found `&'static `)
[00:21:52] -rusti- <anon>:16         ~"a"=="b"
[00:21:52] -rusti-                         ^~~
[00:21:53] -rusti- error: aborting due to previous error
[00:21:53] -rusti- application terminated with error code 101
[00:22:05] <seanmonstar> eddyb: vec!() expands to Vec::new()?
[00:22:09] <Manishearth> rusti: "a"==~"b"
[00:22:09] -rusti- <anon>:16:14: 16:18 warning: unnecessary allocation, the sigil can be removed, #[warn(unnecessary_allocation)] on by default
[00:22:09] -rusti- <anon>:16         "a"==~"b"
[00:22:09] -rusti-                        ^~~~
[00:22:09] -rusti- false
[00:22:12] <eddyb> seanmonstar: I guess
[00:22:24] <Manishearth> why does that happen? (the difference in operator order)
[00:22:24] <eddyb> seanmonstar: __E as in Error? doesn't feel right, considering it's also used for Encodable
[00:22:34] <eddyb> Manishearth: biased to the left
[00:22:39] <kimundi> rusti: #[allow(deprecated_owned_vector)]fn m(s:&str){let mut i=0u8;for l in s.lines(){println!("{}",l.chars().map(|x|{let s="\x03"+(i+50).to_str()+x.to_str();i=(i+1)%14;s}).to_owned_vec().concat())}}m("Pick one of the rainbow, eddyb");if true{return}
[00:22:40] -rusti- 50P51i52c53k54 55o56n57e58 59o60f61 62t63h50e51 52r53a54i55n56b57o58w59,60 61e62d63d50y51b
[00:22:41] <Manishearth> as in?
[00:22:44] <huon> seanmonstar: you're modifying deriving , right?
[00:22:49] <seanmonstar> eddyb: yea E for Error. in most all other places, S is used
[00:22:52] <seanmonstar> huon: yes
[00:23:01] <seanmonstar> eddyb: S is used to Encoder
[00:23:04] *** Joins: fiedzia (Mibbit@moz-F0155277.cable.virginm.net)
[00:23:04] <seanmonstar> i couldn't tell why
[00:23:18] <huon> seanmonstar: I wrote most of the current infrastructure, so if you have any questions, feel free to ask
[00:23:29] <eddyb> kimundi: doesn't look like it's working for me
[00:23:39] <eddyb> kimundi: oh that's because you highlighted me, silly :P
[00:23:51] <seanmonstar> huon: thanks! i'm close to having Encodable/Decodable use Results. just working on the deriving part
[00:23:51] <eddyb> rusti: #[allow(deprecated_owned_vector)]fn m(s:&str){let mut i=0u8;for l in s.lines(){println!("{}",l.chars().map(|x|{let s="\x03"+(i+50).to_str()+x.to_str();i=(i+1)%14;s}).to_owned_vec().concat())}}m("Pick one of the rainbow, kimundi");if true{return}
[00:23:51] -rusti- 50P51i52c53k54 55o56n57e58 59o60f61 62t63h50e51 52r53a54i55n56b57o58w59,60 61k62i63m50u51n52d53i
[00:23:55] <Manishearth> rusti: "ooooo"
[00:23:56] -rusti- ooooo
[00:23:58] <eddyb> kimundi: hmm, still doesn't work
[00:24:31] <eddyb> seanmonstar: maybe you should ask further questions in #rust-internals
[00:24:38] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[00:24:38] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Client exited)
[00:24:46] <eddyb> seanmonstar: seeing how this channels is for testing IRC formatting with rusti :P
[00:24:49] <eddyb> *channel
[00:24:52] <seanmonstar> ha
[00:24:54] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[00:25:17] <seanmonstar> huon: one question was, is it possible for me insert `try!` in the MethodDef?
[00:25:18] <kimundi> rusti: #[allow(deprecated_owned_vector)]fn m(s:&str){let mut i=0u8;for l in s.lines(){println!("{}",l.chars().map(|x|{let s="\x03"+(i+50).to_str()+x.to_str();i=(i+1)%12;s}).to_owned_vec().concat())}}m("########################");if true{return}
[00:25:18] -rusti- 50#51#52#53#54#55#56#57#58#59#60#61#50#51#52#53#54#55#56#57#58#59#60#61#
[00:25:43] <huon> seanmonstar: if you expand to a ExprMacInvoc (or something), yes
[00:25:46] <eddyb> kimundi: derp, guess why
[00:25:46] * huon checks the details
[00:25:49] <eddyb> kimundi: i + 50
[00:25:56] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[00:25:57] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Client exited)
[00:26:02] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[00:26:10] <eddyb> kimundi: most clients support only 16 colors
[00:26:10] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[00:26:15] <Rym> Are variadic functions supported? Can't seem to find it in the manual?
[00:26:20] <huon> seanmonstar: (but I would recommend coming into #rust-internals; will make the dicussion easier to follow)
[00:26:23] <huon> Rym: nope
[00:26:26] <Havvy> How do I get a stack trace when a task fails?
[00:26:28] <kimundi> eddyb: Thsi does only select between 16 colors
[00:26:31] <huon> (eddyb mentions VG....)
[00:26:38] <eddyb> Rym: I should open a petition just for people like you ;)
[00:26:38] <kimundi> 12 in fact
[00:26:46] <kimundi> rusti: #[allow(deprecated_owned_vector)]fn m(s:&str){let mut i=0u8;for l in s.lines(){println!("{}",l.chars().map(|x|{let s="\x03"+(i+50).to_str()+x.to_str();i=(i+1)%16;s}).to_owned_vec().concat())}}m("########################");if true{return}
[00:26:46] -rusti- 50#51#52#53#54#55#56#57#58#59#60#61#62#63#64#65#50#51#52#53#54#55#56#57#
[00:26:48] <eddyb> kimundi: i + 50
[00:27:01] <Rym> :P
[00:27:01] <eddyb> kimundi: you're adding 50 to one of 16 colors
[00:27:10] *** Joins: bmccallister (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[00:27:12] *** Joins: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[00:27:14] <eddyb> kimundi: 50 is not a valid colors out of 16 colors in my client
[00:27:14] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Ping timeout)
[00:27:16] <eddyb> *color
[00:27:21] <kimundi> rusti: #[allow(deprecated_owned_vector)]fn m(s:&str){let mut i=0u8;for l in s.lines(){println!("{}",l.chars().map(|x|{let s="\x03"+(i).to_str()+x.to_str();i=(i+1)%16;s}).to_owned_vec().concat())}}m("########################");if true{return}
[00:27:22] -rusti- 0#1#2#3#4#5#6#7#8#9#10#11#12#13#14#15#0#1#2#3#4#5#6#7#
[00:27:25] *** Quits: bmccallister (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Quit: Leaving...)
[00:27:31] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[00:27:41] <eddyb> now that's a link with no colors :P
[00:27:44] <kmc> it must be friday after 5pm
[00:27:45] <kimundi> hm, no idea where I got that range originally
[00:28:05] <eddyb> (though my konsole supports 2^24 RGB colors... but not my IRC clients)
[00:28:15] <eddyb> *client (what's up with me at 3am and plurals?)
[00:28:33] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[00:28:46] * Havvy notes that mIRC color codes modulo the color code by 16 to determine which color should be shown.
[00:28:58] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Ping timeout)
[00:29:15] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[00:29:16] <Havvy> So 50 === 2 modulo 16.
[00:29:35] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[00:29:35] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[00:30:36] <eddyb> Havvy: hah, mIRC user detection
[00:30:46] <eddyb> make it invisible for everyone else
[00:30:59] <eddyb> and whoever can read it gets kicked
[00:31:13] <Havvy> If it's invisible for your client, your client isn't up to spec.
[00:31:28] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[00:31:34] <eddyb> not invisible, just not colored
[00:31:41] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:31:43] <Havvy> Same.
[00:32:06] <eddyb> 0055foobar
[00:32:11] <eddyb> hmpf
[00:32:13] <Havvy> Shows up as orange to me.
[00:32:17] <Havvy> (XChat)
[00:32:18] <eddyb> 0,055foobar
[00:32:27] <Havvy> orange on gray
[00:32:29] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[00:32:31] * eddyb experiments in private
[00:32:35] <kimundi> using hexchat, that looks more like brown to me
[00:33:08] <kimundi> rusti: println!("\x03\x02\x03")
[00:33:08] -rusti- 
[00:33:08] -rusti- ()
[00:33:15] <kimundi> rusti: println!("\x03\x02foo\x03")
[00:33:15] -rusti- foo
[00:33:15] -rusti- ()
[00:33:43] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[00:33:52] <Havvy> kimundi:  Might be one of the colors that has multiple accepted representations, like purple/pink is.
[00:34:32] <eddyb> 18,01I think this should work nicely :P
[00:34:40] <eddyb> can someone read that without selecting it?
[00:35:15] <TimAbraldes> with difficulty
[00:35:36] <eddyb> because 01 is not the default for everyone, of course
[00:35:43] <kimundi> rusti: println!("\x035foo")
[00:35:44] -rusti- 5foo
[00:35:44] -rusti- ()
[00:36:02] <kimundi> eddyb: Now I remember why I had that +50 there
[00:36:23] <eddyb> was +5?
[00:36:40] <kimundi> eddyb: going ascii value -> visible char, and then a few refactoring later I forgot about it.
[00:36:55] <kimundi> rusti: println!("\x030foo")
[00:36:56] -rusti- 0foo
[00:36:56] -rusti- ()
[00:37:06] <kimundi> rusti: println!("\x031foo") if true {return}
[00:37:06] -rusti- 1foo
[00:37:10] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[00:37:33] <eddyb> _____________
[00:37:38] <eddyb> how many lines do you see?
[00:37:45] <kimundi> 1
[00:37:59] <kimundi> starting with something my fonts don'T know :)
[00:38:09] <TimAbraldes> I see a bunch of underscores, but the first character looks like unicode that isn't displaying properly
[00:38:11] <eddyb> why is ^S (for strike-through) not supported by more clients? :(
[00:38:16] <kimundi> yeah, that
[00:38:19] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[00:38:21] *** Joins: shyoso (Mibbit@moz-8EBA3569.hsd1.ca.comcast.net)
[00:38:37] <kimundi> rusti: println!("\x039foo") if true {return}
[00:38:38] -rusti- 9foo
[00:38:43] <kimundi> rusti: println!("\x0310foo") if true {return}
[00:38:43] -rusti- 10foo
[00:38:54] <Manishearth> rusti: "\x0310foo"
[00:38:55] -rusti- 10foo
[00:39:25] <Manishearth> rusti: "\x0310,15foo"
[00:39:26] -rusti- 10,15foo
[00:39:32] <Manishearth> rusti: "\x0310,30foo"
[00:39:33] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:39:33] -rusti- 10,30foo
[00:39:41] <kimundi> wait, does that meant color code parsing can combine badly with following numbers?
[00:39:50] <Manishearth> kimundi: commas, yes
[00:40:00] *** Quits: io2 (io2@moz-EE406A5.home.otenet.gr) (Quit: )
[00:40:15] <kimundi> rusti: "\x031" + "007"
[00:40:15] -rusti- 1007
[00:40:19] <tiffany> colour codes are a bit hacky
[00:40:24] <kimundi> urg
[00:40:38] <kimundi> couldn't they have picked hex or something :P
[00:41:07] <kimundi> Now I need to add detecting for that into my rusti oneliners ;)
[00:41:41] <kimundi> wait
[00:41:44] <kimundi> haha
[00:42:00] *** Quits: k4nar (quassel@moz-EE8DAF45.ip-91-121-75.eu) (Client exited)
[00:42:01] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:42:04] <Manishearth> rusti: #[allow(deprecated_owned_vector)]fn m(s:&str){let mut i=0u8;for l in        s.lines(){println!("{}",l.chars().map(|x|{let 
[00:42:05] -rusti- pastebinned 7 lines of output: http://sprunge.us/QVcT
[00:42:07] <Manishearth> s="\x03"+(i).to_str()+","+((i+20)%16).to_str()+x.to_str();i=(i+1)%16;s}).to_owned_vec().concat())}}m("########################");if true{return}
[00:42:16] <mrmonday> so in the master docs, section 8.1.8 it says that copying an owned box performs a deep copy, but in 9.1.4 it says it's a shallow copy... which is correct?
[00:42:24] <kimundi> rusti: "\x031\u200B007"
[00:42:25] -rusti- 1​007
[00:42:48] <Manishearth> rusti: #[allow(deprecated_owned_vector)]fn m(s:&str){let mut i=0u8;for l in s.lines(){println!("{}",l.chars().map(|x|{let s="\x03"+(i).to_str()+","+((i+20)%16).to_str()+x.to_str();i=(i+1)%16;s}).to_owned_vec().concat())}}m("########################");if true{return}
[00:42:49] -rusti- 0,4#1,5#2,6#3,7#4,8#5,9#6,10#7,11#8,12#9,13#10,14#11,15#12,0#13,1#14,2#15,3#0,4#1,5#2,6#3,7#4,8#5,9#6,10#7,11#
[00:42:54] <kimundi> Now THAT is a useful application for zero width space
[00:42:56] <sp3d> kimundi: 0-pad the color codes to 2 digits
[00:43:03] <Manishearth> rusti: #[allow(deprecated_owned_vector)]fn m(s:&str){let mut i=0u8;for l in s.lines(){println!("{}",l.chars().map(|x|{let s="\x03"+(i).to_str()+","+((i+20)%16).to_str()+x.to_str();i=(i+1)%16;s}).to_owned_vec().concat())}}m("MY EYES!!!!!!");if true{return}
[00:43:04] -rusti- 0,4M1,5Y2,6 3,7E4,8Y5,9E6,10S7,11!8,12!9,13!10,14!11,15!12,0!
[00:43:14] <Manishearth> :o
[00:43:22] <kimundi> rusti: "\x0301007"
[00:43:23] -rusti- 01007
[00:43:33] <kimundi> sp3d: Eh, boring but practical
[00:43:34] <Manishearth> what hath we wrought :o
[00:43:57] <sp3d> it's what mIRC et al have done since mIRC brought the monstrosity down upon us all
[00:43:58] <sp3d> :(
[00:44:33] <Havvy> There's a chanmode to strip color codes.
[00:44:51] <Earnestly> Sadly all text attributes get nuked by that
[00:45:00] *** Joins: gimpf (gimpf@moz-DB9DDBEF.adsl.highway.telekom.at)
[00:45:37] <sp3d> Havvy: does it block messages containing, or strip them from messages?
[00:46:37] <Havvy> There's one mode for each.
[00:47:12] <Manishearth> #firefox tends to get a lot of colorfu spam
[00:47:15] <Manishearth> *ful
[00:48:42] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[00:49:33] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[00:49:33] *** Quits: alkino_ (alkino@moz-61F150EC.w92-151.abo.wanadoo.fr) (Ping timeout)
[00:49:38] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[00:49:38] *** ChanServ sets mode: +ao pcwalton pcwalton
[00:50:54] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[00:50:57] <Tobba> hm
[00:51:04] <Tobba> is there any reason you cant equal enums?
[00:51:22] <Tobba> even when theres no data attached
[00:51:45] *** Quits: paraze (paraze@moz-DAFFEE79.w90-27.abo.wanadoo.fr) (Client exited)
[00:51:57] <kimundi> Tobba: yes
[00:52:03] <kmc> what do you mean by "equal"?
[00:52:09] <eddyb> #[deriving(Eq)]
[00:52:16] <kimundi> Tobba: equals is a trait implementation, and we don't implement traits implicitly
[00:52:40] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[00:53:40] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[00:54:58] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[00:55:38] <Earnestly> Havvy: Well, at least Charybdis doesn't have one which selectively disables text attributes :/
[00:55:47] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:56:04] *** Quits: eibwen (kvirc@moz-D733931B.dip0.t-ipconnect.de) (Ping timeout)
[00:57:39] *** Joins: cschneid (cschneid@moz-621ACC77.hlrn.qwest.net)
[00:58:18] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[00:58:20] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Client exited)
[00:59:51] *** Quits: Rym (y@72FB9FA1.6FEC6D87.51C6DE68.IP) (Ping timeout)
[01:00:11] <shyoso> hi i'm new, just tried compiling rust code
[01:00:21] <shyoso> use std::io::buffered::BufferedReader;
[01:00:36] <shyoso> and this gives me some error "struct BufferedReader is private"
[01:00:55] <shyoso> rustc version 0.10-pre
[01:00:58] <shyoso> anyone know?
[01:01:31] <kmc> mrmonday: .clone() copies an ownership tree
[01:01:52] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:02:04] <huon> shyoso: it's now just `std::io::BufferedReader`
[01:03:06] *** Quits: not_gavin (gavin@gavinsharp.com) (Input/output error)
[01:03:23] *** Joins: not_gavin (gavin@gavinsharp.com)
[01:03:29] <shyoso> ah ok just saw an old log that said that. thanks!
[01:03:40] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:04:11] <kmc> mrmonday: the wording is confusing, but I think that 8.1.8 is talking about explicitly copying with .clone(), whereas 9.1.4 is talking about moving an owned box, which is implemented by a shallow copy of the pointer (but then the variable holding the old pointer is considered unusable after)
[01:04:47] <Tobba> is there any way to append to an ~str?
[01:04:50] <Tobba> I cant seem to find anything in the docs
[01:04:58] <kmc> look at OwnedStr trait
[01:05:06] <Tobba> ah
[01:05:28] <kmc> mrmonday: .clone() will copy through fields of type ~T; after all, you can't have two structs with ~T fields pointing to the same T
[01:05:31] <huon> shyoso: (I opened https://github.com/mozilla/rust/issues/13065 about making the error message more helpful, fwiw)
[01:05:35] <kmc> but it will stop at things that establish an ownership root, like Rc<T>
[01:05:51] <kmc> cloning Rc<T> just bumps the refcount on a box holding the T
[01:06:21] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Ping timeout)
[01:06:29] <kmc> mrmonday: it may be helpful to think of ~T not as a pointer to T, but just as a T that is magically shrunk to the size of a pointer... in most respects T and ~T have the same semantics
[01:07:05] <Tobba> is there any Seek+Reader trait in std?
[01:07:14] <Tobba> or will I have to make one and just implement it for all I need it on
[01:07:36] <shyoso> huon: yeah that message seems a little more friendly
[01:08:17] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[01:09:33] <mrmonday> kmc: thanks for clarifying. I thought it might be something like that with the former sounding like what .clone() does
[01:10:02] *** Quits: gimpf (gimpf@moz-DB9DDBEF.adsl.highway.telekom.at) (Ping timeout)
[01:10:06] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[01:11:23] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[01:11:59] <Havvy> Earnestly:  Yeah, the modes I'm thinking of are at least on Unreal. Not sure about the others.
[01:12:48] <kmc> I guess another difference is that ~int is not implicitly copyable even though int is.
[01:12:51] <Tari> Tobba: you can specify Foo<T: Seek + Reader> if T must be both
[01:13:19] <Tobba> I could use a generic, good idea
[01:13:55] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[01:15:16] *** Quits: ChrisOei (ChrisOei@moz-53A9266A.blurb.com) (Client exited)
[01:15:20] *** Joins: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net)
[01:15:24] *** Joins: Rym (y@8CA41726.525EBBF0.51C6DE68.IP)
[01:15:35] <Tobba> sadly no bounds in struct definitions
[01:15:42] <Tobba> dunno where else I should put them, the impl doesnt make sense
[01:16:14] *** Quits: tom1 (tom@F616D77.77D422C6.AA74B5DB.IP) (Quit: WeeChat 0.4.1)
[01:16:28] *** Joins: jviereck (Adium@moz-3B5248BD.dclient.hispeed.ch)
[01:16:32] <Tari> impl<T: Seek + Reader> MyStruct<T> ?
[01:16:32] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[01:18:13] *** Quits: onelson (owen@moz-DD666EC5.laika.com) (Quit: Leaving)
[01:18:23] <bbloom> is there a "last known good" > 0.9 version noted somewhere, or is master considered stable?
[01:18:35] <huon> bbloom: master is stable
[01:18:51] *** Quits: harish (harish@moz-A9E56CFE.hfc.comcastbusiness.net) (Ping timeout)
[01:18:55] <huon> every pull request runs the full testsuite on a variety of platforms (and a cut down version on others)
[01:18:58] <kmc> stable in the sense that the test suite passes
[01:19:00] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Input/output error)
[01:19:03] <bbloom> huon: cool, thanks
[01:19:05] <kmc> not in the sense that your code from yesterday will still compile :)
[01:19:09] <bbloom> kmc: heh, sure
[01:19:14] <huon> it's probably more stable than 0.9 ;P (i.e. fewer bugs, crashes, etc.)
[01:19:24] *** Joins: harish (harish@moz-A9E56CFE.hfc.comcastbusiness.net)
[01:19:43] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[01:19:53] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[01:20:09] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[01:20:56] *** Joins: jesse99 (jesse99@moz-D8DE13A5.hsd1.wa.comcast.net)
[01:22:21] *** Quits: fiedzia (Mibbit@moz-F0155277.cable.virginm.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:23:25] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:23:29] *** Quits: jviereck (Adium@moz-3B5248BD.dclient.hispeed.ch) (Quit: Leaving.)
[01:24:15] *** Quits: shyoso (Mibbit@moz-8EBA3569.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:25:23] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:25:25] <Armavica> in what cases can the automatic derivation of a trait fail?
[01:26:06] <Armavica> and can it fail without letting me know?
[01:26:49] <Armavica> for example Eq: for what structures can #[deriving(Eq)] fail to compile, and can it compile without doing what I want?
[01:26:54] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[01:27:56] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[01:28:47] <kmc> if what you want is other than structural equality, sure
[01:29:02] <kmc> for example derived Eq on a rational number struct won't consider 4/6 == 2/3
[01:29:08] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[01:29:12] <Armavica> sure
[01:29:14] *** Quits: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Quit: Leaving.)
[01:29:18] *** Joins: tcsc (tcsc@moz-5E71BAD9.hsd1.ma.comcast.net)
[01:29:27] <kmc> it'll fail to compile if one of the fields doesn't implement Eq
[01:29:28] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:29:51] <kmc> or one of the type variables, even if unused (https://github.com/mozilla/rust/issues/7671)
[01:29:54] <Manishearth> silly question: how do I lowercase a string literal in Rust?
[01:30:03] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[01:30:13] <Manishearth> It tells me that &'static str doesn't have the method to_ascii_lower
[01:30:24] <kmc> Manishearth: you don't, because Unicode case folding is locale-dependent and otherwise horribly complicated
[01:30:26] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[01:30:26] *** ChanServ sets mode: +ao brson brson
[01:30:30] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[01:30:36] <kmc> to get that method you need to use std::ascii::StrAsciiExt
[01:30:58] <Manishearth> hmm
[01:31:24] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[01:31:32] <kmc> Armavica: one tricky case is that there's no == on [T, ..n]... it usually works because they auto-convert to slices, but deriving(Eq) chokes on it iirc
[01:32:03] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[01:32:19] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[01:32:27] *** Joins: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca)
[01:32:28] <Armavica> concretely, I am trying to derive Eq on a structure which contains a HashSet<T> and which compiles fines otherwise
[01:32:32] *** kimundi is now known as zz_kimundi
[01:33:01] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[01:33:01] <Armavica> but rustc seems unaware that then, T needs to have Hash
[01:33:10] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[01:33:13] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[01:33:20] <Armavica> and it complains about it
[01:33:22] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[01:34:08] <kmc> struct Foo<T: Hash> { ... }  doesn't work does it?
[01:34:26] <kmc> or struct<T: Hash> Foo<T>
[01:34:28] <Armavica> error: trait bounds are not allowed in structure definitions
[01:34:31] <Armavica> oh
[01:34:32] * kmc nods
[01:34:43] <kmc> I don't think you can do it then :/
[01:34:44] <Armavica> nope
[01:34:53] <kmc> you'll need to write your own impl<T: Hash> Eq for Foo<T>
[01:35:09] <Armavica> ok, that's what I thought
[01:35:26] <Manishearth> kmc: If I'm going to use this in a macro, then do I need to `use` the trait everywhere or just where the module is defined?
[01:35:27] *** Quits: tyna (liadon@moz-BB1BAD9A.dynamic.chello.pl) (Ping timeout)
[01:35:36] <Armavica> thanks anyway
[01:35:46] <kmc> Manishearth: hm, not sure
[01:35:53] * kmc -> afk
[01:35:58] *** Quits: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[01:36:03] <Manishearth> Basically, I need to lowercase a stringify!
[01:36:08] <huon> Manishearth: you can put the use inside the macro
[01:36:12] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[01:36:23] <huon> => { { use std::ascii::...; ... } }
[01:36:35] <Manishearth> hm, that would work
[01:36:49] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[01:36:49] <Manishearth> it would be icky though, this macro is going to be used all over the dom crate
[01:36:50] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[01:37:08] <huon> why does that make it icky?
[01:37:11] <Manishearth> *script
[01:37:31] <Manishearth> huon: I guess it's a personal preference, I don't like including too many dependancies
[01:37:36] *** Quits: claudiu_ (claudiu@moz-FB94486E.thefacebook.com) (Input/output error)
[01:38:06] <Manishearth> anyway, first testing if I really need it
[01:38:39] <Manishearth> there is a cleaner way to do it, but it requires an extra GH issue :p
[01:39:49] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[01:42:17] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[01:43:10] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[01:45:05] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[01:45:07] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:47:00] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:48:55] <Armavica> what does « in arbitrary order » mean in the description of HashSet::iter()? Can I count on a deterministic order?
[01:49:10] <huon> no
[01:49:16] <huon> it's random
[01:49:20] *** Quits: gwty (gwtypc@980E6763.65D8992A.137C914F.IP) (Ping timeout)
[01:49:54] <Armavica> ok, clear enough
[01:50:08] <huon> rusti: let mut s = vec!(1, 2, 3, 4).move_iter().collect::<collections::HashSet<int>>(); s.move_iter().collect::<~[int]>()
[01:50:09] -rusti- pastebinned 18 lines of output: http://sprunge.us/TMKV
[01:50:22] <huon> rusti: let mut s = vec!(1, 2, 3, 4).move_iter().collect::<collections::HashSet<int>>(); s.move_iter().collect::<Vec<int>>()
[01:50:22] -rusti- <anon>:16:114: 16:122 error: use of undeclared type name `Vec`
[01:50:22] -rusti- <anon>:16         let mut s = vec!(1, 2, 3, 4).move_iter().collect::<collections::HashSet<int>>(); s.move_iter().collect::<Vec<int>>()
[01:50:22] -rusti-                                                                                                                            ^~~~~~~~
[01:50:22] -rusti- error: aborting due to previous error
[01:50:23] -rusti- application terminated with error code 101
[01:50:56] <huon> rusti: let s = vec!(1, 2, 3, 4).move_iter().collect::<collections::HashSet<int>>(); s.move_iter().collect::<std::vec_ng::Vec<int>>()
[01:50:56] -rusti- [2, 4, 3, 1]
[01:50:58] <huon> rusti: let s = vec!(1, 2, 3, 4).move_iter().collect::<collections::HashSet<int>>(); s.move_iter().collect::<std::vec_ng::Vec<int>>()
[01:50:58] -rusti- [2, 4, 3, 1]
[01:51:06] *** Joins: gwty (gwtypc@980E6763.65D8992A.137C914F.IP)
[01:51:08] <huon> bleh, rusti's not very good at randomness, apparently
[01:51:37] <huon> but the hashmap/hashset are keyed randomly to reduce the risk of hashdos attacks
[01:51:39] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[01:52:23] <Armavica> ok, thank you
[01:52:58] <Havvy> rusti: let s = vec!(1, 2, 3, 4).move_iter().collect::<collections::HashSet<int>>(); s.move_iter().collect::<std::vec_ng::Vec<int>>()
[01:52:58] -rusti- [2, 4, 3, 1]
[01:53:09] <Havvy> Nope. Not at all.
[01:53:21] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[01:53:22] *** Joins: tom1 (tom@moz-74E93BE8.public.wayport.net)
[01:54:30] *** Quits: twi (Adium@CF16816F.E0BD96E5.9ECBD630.IP) (Ping timeout)
[01:54:30] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[01:55:09] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[01:55:55] *** Joins: twi (Adium@CF16816F.E0BD96E5.9ECBD630.IP)
[01:56:45] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[01:57:22] *** Joins: jdm (jdm@2B5CD89E.ED0C8.AE2B2F80.IP)
[01:57:22] *** ChanServ sets mode: +o jdm
[01:59:00] *** Quits: mye (mye@moz-A8B75C5E.dip0.t-ipconnect.de) (Quit: sleep message)
[02:00:30] *** Joins: onelson (owen@18CF7301.95770028.5B6BFE7D.IP)
[02:03:16] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[02:05:19] *** Quits: drawoc (mike@moz-BAC1D3AB.res-cmts.sesh.ptd.net) (Quit: WeeChat 0.4.3)
[02:05:31] *** Quits: twi (Adium@CF16816F.E0BD96E5.9ECBD630.IP) (Ping timeout)
[02:05:41] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Ping timeout)
[02:05:44] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[02:06:35] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:07:47] *** Joins: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net)
[02:07:51] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[02:08:40] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:08:56] *** Joins: rootnode_ (rootnode@moz-B08A0C4D.pools.arcor-ip.net)
[02:08:59] *** Quits: rootnode (rootnode@moz-4349A9F.pools.arcor-ip.net) (Ping timeout)
[02:10:29] *** Joins: onelson_ (owen@18CF7301.95770028.5B6BFE7D.IP)
[02:11:03] *** Quits: matp (matp@moz-16FE1E05.matp.at) (Quit: ZZZzzz…)
[02:11:07] <brson> i still don't know the difference betwen '=' and ':=' in make, even though it makes a significant difference which one you use
[02:11:07] *** Joins: matp (matp@moz-16FE1E05.matp.at)
[02:12:15] <jdm> brson: FOO := means assign unless FOO has a value already
[02:12:24] <jdm> so it's good for assigning defaults
[02:12:49] <andrewd18> https://www.gnu.org/software/make/manual/make.html#Setting
[02:14:13] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[02:14:15] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:14:57] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[02:15:19] <brson> jdm: thanks
[02:16:52] <Havvy> Is there a way to make Rust show stack traces on fail!()?
[02:18:26] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[02:19:03] <mcpherrin> I kinda hate how much stuff ./configure does
[02:19:06] *** Quits: gwty (gwtypc@980E6763.65D8992A.137C914F.IP) (Ping timeout)
[02:19:17] <mcpherrin> in particular it clones llvm and whatever
[02:20:05] *** Joins: ChrisOei (ChrisOei@moz-30D80888.hsd1.ca.comcast.net)
[02:20:15] <mcpherrin> which is a pain since you semi-need to watch ./configure to see if you're missing dependencies
[02:20:39] <huon> Havvy: iirc RUST_LOG=std::rt::backtrace
[02:20:43] *** Quits: tom1 (tom@moz-74E93BE8.public.wayport.net) (Ping timeout)
[02:20:48] *** Joins: gwty (gwtypc@980E6763.65D8992A.137C914F.IP)
[02:20:58] <huon> or possibly RUST_BACKTRACE=1, depending on how recent your compiler is
[02:21:44] <Havvy> Where do I put that?  Just in the rustc command?
[02:21:56] <Havvy> Before `rustc`?
[02:21:58] <mcpherrin> before it, it's an environment variable
[02:22:06] <mcpherrin> RUST_BACKTRACE=1 rustc foo.rs
[02:22:25] <mcpherrin> uh wait, before compiling or executing?
[02:22:48] <Havvy> Either or.
[02:23:18] *** Quits: IanCormac84 (User@DD10B2F0.64D641E5.67DFF8B4.IP) (Ping timeout)
[02:23:32] <huon> for exceuting, just RUST_BACKTRACE=1 ./foo
[02:24:18] <Havvy> Ah. Yay.
[02:24:24] <mcpherrin> So if you put the environment when compiling, you don't need it at exec time?
[02:24:38] <mcpherrin> (I suppose I could just go try this out..)
[02:24:44] <Havvy> Adding it as an environment variable to rustc does nothing.
[02:24:52] *** Joins: IanCormac84 (User@49B981BE.2A8D8854.67DFF8B4.IP)
[02:25:06] <Havvy> Adding it as an execution variable does.
[02:25:29] <Havvy> *environment variable to the executable
[02:25:40] <huon> yes, env var to rustc will just catch rustc's failures
[02:25:40] *** Joins: tom1 (tom@moz-74E93BE8.public.wayport.net)
[02:25:53] *** Joins: dotmr (Mibbit@8D8F45FE.829DBEF3.40E092AA.IP)
[02:25:55] <huon> mcpherrin: nope
[02:26:45] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[02:26:49] <Havvy> huon:  Which makes sense.
[02:27:05] <Havvy> Do I need -g for the stacktrace?
[02:27:56] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:30:18] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:31:41] *** Quits: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Ping timeout)
[02:33:20] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[02:33:30] *** Quits: dotmr (Mibbit@8D8F45FE.829DBEF3.40E092AA.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:35:07] *** Quits: soumyaC (uid15286@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[02:36:49] *** Quits: japaric (japaric@29430DD7.551A521E.212E9B57.IP) (Client exited)
[02:41:40] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[02:42:42] <brson> rustc memory usage feels better lately. i've been running two builds and haven't oomed yet
[02:42:52] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (No route to host)
[02:43:21] <huon> brson: https://github.com/mozilla/rust/pull/13013
[02:43:30] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[02:43:38] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[02:43:44] <huon> (saves about 150MB for librustc)
[02:43:51] <huon> and eddyb's done some really good work too
[02:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:44:53] <huon> (and there's https://github.com/mozilla/rust/pull/12809 and https://github.com/mozilla/rust/pull/13016 to look forward to)
[02:44:54] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[02:45:01] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[02:46:34] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:47:37] *** Quits: tcsc (tcsc@moz-5E71BAD9.hsd1.ma.comcast.net) (Quit: bye!)
[02:49:37] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:50:04] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[02:51:58] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:52:27] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[02:54:10] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[02:55:19] *** Quits: tom1 (tom@moz-74E93BE8.public.wayport.net) (Quit: WeeChat 0.4.1)
[02:57:55] <brson> huon++
[02:57:55] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[02:59:17] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[02:59:17] *** ChanServ sets mode: +ao dherman dherman
[03:02:24] *** jorendorff_away is now known as jorendorff
[03:02:35] *** Joins: tom1 (tom@F616D77.77D422C6.AA74B5DB.IP)
[03:04:14] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[03:04:17] *** jorendorff is now known as jorendorff_away
[03:09:05] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[03:10:03] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[03:10:53] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[03:11:43] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:13:46] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:14:51] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:15:33] <bbloom> do fixed-size arrays have a guaranteed layout? if so, what is it?
[03:16:30] *** Quits: rootnode_ (rootnode@moz-B08A0C4D.pools.arcor-ip.net) (Ping timeout)
[03:16:31] *** Joins: rootnode (rootnode@moz-F28659C4.pools.arcor-ip.net)
[03:16:41] *** Quits: brson (brson@6A848D32.C1B840DD.76F66111.IP) (Ping timeout)
[03:18:19] <huon> bbloom: yes
[03:18:31] <huon> elem, elem, elem, ..., in memory
[03:18:45] <bbloom> cool, no count field, right?
[03:18:55] <huon> for fixed-size, nope
[03:19:01] <bbloom> huon: perfect, thanks
[03:23:44] *** Quits: espindol_ (espindola@563D60BB.4B7A7726.A2E931B1.IP) (Input/output error)
[03:23:59] *** Quits: onelson_ (owen@18CF7301.95770028.5B6BFE7D.IP) (Quit: Leaving)
[03:27:31] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[03:27:52] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[03:27:52] *** ChanServ sets mode: +ao brson brson
[03:28:38] <o11c> bbloom: any padding is *internal*
[03:29:11] <bbloom> o11c: makes sense, thanks
[03:29:45] *** Quits: not_gavin (gavin@gavinsharp.com) (Input/output error)
[03:30:02] *** Joins: not_gavin (gavin@gavinsharp.com)
[03:31:44] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[03:32:08] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[03:33:11] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:33:14] *** Quits: untitaker (untitaker@moz-A642299A.adsl.highway.telekom.at) (Ping timeout)
[03:33:32] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[03:35:29] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:35:47] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[03:36:28] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (Ping timeout)
[03:38:30] *** Joins: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[03:39:05] *** Quits: gwty (gwtypc@980E6763.65D8992A.137C914F.IP) (Ping timeout)
[03:40:43] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[03:40:51] *** Quits: tiffany (kawaii@moz-7AF84602.dhcp.embarqhsd.net) (Ping timeout)
[03:41:15] *** Joins: untitaker (untitaker@moz-84178CC6.adsl.highway.telekom.at)
[03:41:50] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[03:42:50] *** Joins: tiffany (kawaii@moz-7AF84602.dhcp.embarqhsd.net)
[03:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:45:40] *** Quits: untitaker (untitaker@moz-84178CC6.adsl.highway.telekom.at) (Ping timeout)
[03:46:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:46:51] *** tom1 is now known as dsrx
[03:48:19] *** Quits: dsrx (tom@F616D77.77D422C6.AA74B5DB.IP) (Quit: WeeChat 0.4.1)
[03:48:59] *** Joins: dsrx (tom@F616D77.77D422C6.AA74B5DB.IP)
[03:49:15] *** Joins: untitaker (untitaker@moz-84178CC6.adsl.highway.telekom.at)
[03:53:13] *** Quits: zz_kimundi (kimundi@moz-D07AE760.dip0.t-ipconnect.de) (Ping timeout)
[03:53:14] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[03:54:36] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:54:54] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[03:55:28] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[03:55:33] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[03:56:35] *** Joins: zz_kimundi (kimundi@moz-5822FC56.dip0.t-ipconnect.de)
[03:56:57] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:57:02] *** Quits: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP) (Ping timeout)
[03:57:04] *** zz_kimundi is now known as kimundi
[03:57:13] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[03:59:03] *** Quits: reverend_paco (chatzilla@moz-FDBE15EC.hsd1.ma.comcast.net) (Ping timeout)
[03:59:18] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[03:59:54] *** Joins: gwty (gwtypc@35E4C51E.7EC07F9E.27560D6E.IP)
[04:01:16] *** Joins: koderok (Thunderbir@275887EC.11253281.50E99975.IP)
[04:01:55] *** Quits: gwty (gwtypc@35E4C51E.7EC07F9E.27560D6E.IP) (Ping timeout)
[04:02:16] *** Quits: koderok (Thunderbir@275887EC.11253281.50E99975.IP) (Quit: koderok)
[04:02:28] *** Joins: koderok (Thunderbir@275887EC.11253281.50E99975.IP)
[04:03:18] *** jorendorff_away is now known as jorendorff
[04:03:35] *** Joins: gwty (gwtypc@980E6763.65D8992A.137C914F.IP)
[04:08:10] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[04:08:31] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[04:16:43] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:18:47] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:21:30] *** Joins: gwty_ (gwtypc@980E6763.65D8992A.137C914F.IP)
[04:23:28] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[04:23:28] *** ChanServ sets mode: +ao pcwalton pcwalton
[04:24:26] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[04:26:15] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[04:27:45] *** Quits: not_gavin (gavin@gavinsharp.com) (Ping timeout)
[04:27:50] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[04:28:03] *** Joins: not_gavin (gavin@gavinsharp.com)
[04:33:01] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[04:34:30] *** Quits: brson (brson@6A848D32.C1B840DD.76F66111.IP) (Ping timeout)
[04:34:44] *** Quits: not_gavin (gavin@gavinsharp.com) (Input/output error)
[04:35:00] *** Joins: not_gavin (gavin@gavinsharp.com)
[04:35:05] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[04:35:05] *** ChanServ sets mode: +ao brson brson
[04:37:10] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:39:54] *** Joins: brson_ (brson@moz-62518563.mtv2.mozilla.com)
[04:39:56] *** Quits: brson (brson@6A848D32.C1B840DD.76F66111.IP) (Ping timeout)
[04:40:14] *** brson_ is now known as brson
[04:40:53] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[04:42:12] *** Quits: matp (matp@moz-16FE1E05.matp.at) (Ping timeout)
[04:43:03] *** Joins: nik_ (nik@moz-A96E33F3.pool.mediaways.net)
[04:43:45] *** Joins: Mathieu (cicak@7B7B7C8D.8F79F0B0.9900354A.IP)
[04:44:02] *** Quits: nkoep (nik@moz-CCDD9EE3.pool.mediaways.net) (Ping timeout)
[04:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:44:41] *** Quits: photex (photex@399640B9.24E301D6.9510F13D.IP) (Quit: ZNC - http://znc.in)
[04:46:10] *** Joins: photex (photex@399640B9.24E301D6.9510F13D.IP)
[04:46:36] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:46:43] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[04:49:50] *** Joins: canhtak (canhtak@moz-805AE185.wl.t.ulaval.ca)
[04:53:06] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[04:53:11] *** Joins: enix_ (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[04:53:58] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[04:55:49] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[04:56:54] *** Quits: enix_ (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[04:57:35] *** Quits: copumpkin (copumpkin@B1BD1E0F.D360D990.9850EA4D.IP) (Ping timeout)
[04:57:59] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[04:58:20] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[04:58:23] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[04:58:42] *** Joins: copumpkin (copumpkin@B1BD1E0F.D360D990.9850EA4D.IP)
[04:59:00] *** Joins: enix_ (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[04:59:35] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:01:59] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:03:02] *** Quits: heftig (heftig@moz-B0C9DC6C.dip0.t-ipconnect.de) (Ping timeout)
[05:05:13] *** Quits: tiffany (kawaii@moz-7AF84602.dhcp.embarqhsd.net) (Ping timeout)
[05:05:23] *** Quits: Mathieu (cicak@7B7B7C8D.8F79F0B0.9900354A.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:09:53] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[05:11:41] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[05:11:51] *** Joins: mib_h8ot0i (Mibbit@moz-7E8AAD2E.res.gatech.edu)
[05:12:28] *** Quits: Rym (y@8CA41726.525EBBF0.51C6DE68.IP) (Ping timeout)
[05:13:43] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:14:15] *** Joins: IanCormac841 (User@251BB4CA.64D641E5.67DFF8B4.IP)
[05:14:38] *** Quits: IanCormac84 (User@49B981BE.2A8D8854.67DFF8B4.IP) (Ping timeout)
[05:15:01] *** Joins: heftig (heftig@moz-8FC19561.dip0.t-ipconnect.de)
[05:15:30] *** Quits: philix (felipe@moz-957F279F.user.veloxzone.com.br) (Ping timeout)
[05:16:58] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[05:16:59] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[05:17:16] *** Joins: pongad (pongad@moz-7E8AAD2E.res.gatech.edu)
[05:19:18] *** Quits: mcpherrin (mcpherrin@moz-464166A4.hsd1.ca.comcast.net) (Client exited)
[05:19:21] *** Quits: pongad (pongad@moz-7E8AAD2E.res.gatech.edu) (Quit: Leaving)
[05:19:31] *** Quits: mib_h8ot0i (Mibbit@moz-7E8AAD2E.res.gatech.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[05:19:38] *** Quits: klaus (koz@moz-4486E876.hsd1.wa.comcast.net) (Quit: klaus)
[05:21:41] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:23:46] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:24:55] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[05:25:18] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[05:27:29] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[05:29:15] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:31:27] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[05:31:55] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[05:33:02] *** Joins: themgt (themgt@moz-4B8D98ED.hsd1.va.comcast.net)
[05:34:48] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[05:35:21] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[05:40:30] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[05:40:31] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[05:43:09] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:43:31] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[05:43:36] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:43:42] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:46:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:47:26] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[05:47:31] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[05:47:56] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[05:48:13] *** Joins: mcpherrin (mcpherrin@moz-464166A4.hsd1.ca.comcast.net)
[05:49:02] *** Joins: philix (felipe@moz-957F279F.user.veloxzone.com.br)
[05:49:33] *** Joins: edwardw (Mibbit@B5386878.16F55560.50B134B9.IP)
[05:49:53] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[05:51:02] *** Quits: philix (felipe@moz-957F279F.user.veloxzone.com.br) (Ping timeout)
[05:52:03] *** jorendorff is now known as jorendorff_away
[05:53:01] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[05:53:01] *** ChanServ sets mode: +ao brson brson
[05:54:58] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[05:56:39] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[05:57:00] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[05:57:38] *** Quits: enix_ (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:58:23] *** Quits: mib_b5mvd5 (Mibbit@moz-7002DE99.lns20.adl2.internode.on.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:58:46] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[05:59:08] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[06:00:13] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[06:03:28] *** Quits: edwardw (Mibbit@B5386878.16F55560.50B134B9.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:05:43] *** Joins: edwardw (Mibbit@B5386878.16F55560.50B134B9.IP)
[06:06:07] *** Quits: kanru (kanru@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[06:08:33] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[06:10:32] *** Quits: judder (maradukewa@75FA4DEE.A989D80C.78E362FE.IP) (Ping timeout)
[06:10:41] *** Parts: edwardw (Mibbit@B5386878.16F55560.50B134B9.IP) ()
[06:17:59] *** Quits: canhtak (canhtak@moz-805AE185.wl.t.ulaval.ca) (Quit: canhtak)
[06:19:53] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[06:19:55] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[06:19:55] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[06:21:58] *** Joins: derek_c (derek@moz-110B4E4F.cit.cornell.edu)
[06:26:15] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:28:40] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:29:14] *** Quits: harish (harish@moz-A9E56CFE.hfc.comcastbusiness.net) (Ping timeout)
[06:31:45] *** Joins: akhosrav (akhosrav@moz-75023AE8.tukw.qwest.net)
[06:32:38] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[06:33:03] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[06:35:25] *** Joins: mojoB_ (mojoB@moz-A4312114.static.exetel.com.au)
[06:35:25] *** Quits: mojoB (mojoB@moz-A4312114.static.exetel.com.au) (Connection reset by peer)
[06:36:03] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[06:36:04] *** ChanServ sets mode: +ao pcwalton pcwalton
[06:40:58] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[06:41:07] *** Joins: ofeldt (ofeldt@moz-940AFC76.dip0.t-ipconnect.de)
[06:41:19] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:42:11] *** Quits: ofeldt- (ofeldt@moz-766162C8.dip0.t-ipconnect.de) (Ping timeout)
[06:43:06] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:44:43] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:46:20] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[06:46:30] <alan_andrade> Hey guys, I have a Vec<T>, where T is a string. How can I make that explicit so that whet I do vec.get(0) I can call string methods such as `chars()`
[06:46:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:46:55] <huon> Vec<~str> ?
[06:47:04] <huon> vec.get(0).chars() ?
[06:47:07] * huon doesn't quite understand the question
[06:47:41] *** Quits: derek_c (derek@moz-110B4E4F.cit.cornell.edu) (Quit: Leaving)
[06:47:56] <alan_andrade> Hm, let me try to rephrase
[06:48:26] <alan_andrade> I have this method: get_pw_from_args<T>(free: &Vec<T>)
[06:48:53] <alan_andrade> It's suppose to receive a borrowed vector that contains... strings on this case
[06:49:11] <sfackler> then define it to say that: get_pw_from_args(free: &Vec<~str>)
[06:49:15] <alan_andrade> I can do free.get(0).clone()
[06:49:20] <alan_andrade> oh
[06:49:28] <alan_andrade> let me try that
[06:49:38] <alan_andrade> I tried, but didn't do the ~
[06:49:51] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[06:49:53] <alan_andrade> str is not a type... 
[06:50:07] <alan_andrade> magic!
[06:50:16] <alan_andrade> You're right sfackler
[06:50:52] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:51:02] <alan_andrade> hey sfackler, remember a dude when you presented macros in the meetup that thanked you when you where leaving?
[06:51:14] <alan_andrade> that was me. I reiterate my appreciation of your help.
[06:51:17] <alan_andrade> thanks :)
[06:52:29] <sfackler> np :D
[06:53:09] *** Joins: Oli` (Olivier@moz-CDDD9305.clta.globetrotter.net)
[06:53:38] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[06:54:58] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[06:55:31] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[06:56:14] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[06:56:45] <Havvy> https://gist.github.com/Havvy/d7a26549c1588aac98cb  Can rustc see into symbolic links?
[06:57:19] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[06:57:45] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[06:58:19] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[06:59:04] <huon> Havvy: shouldn't the librusttower.rlib file have a hash and version in the filename?
[06:59:39] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[07:00:13] <Havvy> Is it required to?  I used the -o flag to strip them.
[07:00:23] *** Joins: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP)
[07:00:39] <pczarn> it is required.
[07:01:27] <Havvy> Oh. But then how can I update the symbolic link to it?  :/
[07:02:33] <sfackler> Havvy: rustc --crate-file-name will give you the filename
[07:05:31] *** Quits: nik_ (nik@moz-A96E33F3.pool.mediaways.net) (Client exited)
[07:06:48] *** Joins: nkoep (nik@moz-A96E33F3.pool.mediaways.net)
[07:07:33] *** Joins: ztomo (ztomo@moz-7D901BCF.lnse2.woo.bigpond.net.au)
[07:07:58] <pczarn> what's the best extension for raw deflated bytecode? IMO .bc.deflate
[07:08:09] <pczarn> *bitcode
[07:08:32] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[07:08:54] *** Quits: ztomo (ztomo@moz-7D901BCF.lnse2.woo.bigpond.net.au) (Quit: )
[07:09:00] *** Joins: ztomo (ztomo@moz-7D901BCF.lnse2.woo.bigpond.net.au)
[07:09:33] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:10:41] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[07:11:35] <Havvy> Hmm, I can't set makefile variables inside of a target. :(
[07:11:37] *** Joins: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de)
[07:11:53] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:12:27] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[07:13:58] *** Quits: jdm (jdm@2B5CD89E.ED0C8.AE2B2F80.IP) (Ping timeout)
[07:18:12] <Havvy> https://gist.github.com/Havvy/d7a26549c1588aac98cb updated.  Still cannot find the crate.
[07:18:33] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[07:18:54] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[07:20:38] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[07:22:08] <pczarn> Havvy: extern crate rusttower;
[07:23:08] <Havvy> pczarn:  Ah. That worked. Thanks.
[07:24:11] *** Joins: alkino_ (alkino@moz-61F150EC.w92-151.abo.wanadoo.fr)
[07:24:39] <pczarn> Havvy: you have weird permissions within /home
[07:26:35] <Oli`> hello, i'm new to rust and I have a problem: http://paste.awesom.eu/k2U2&ln
[07:26:44] <Oli`> i'm trying to get a kind of dependency injection
[07:27:00] <eddyb> that's a pastebin I haven't seen before
[07:27:20] <eddyb> oh, and it uses something that has Rust highlighting. good job, Oli`
[07:27:33] <Oli`> yes, thats why I use it :)
[07:27:44] *** Quits: themgt (themgt@moz-4B8D98ED.hsd1.va.comcast.net) (Quit: Pogoapp - http://www.pogoapp.com)
[07:28:28] <huon> eddyb: even ix has rust highlighting ;P
[07:28:39] <Havvy> pczarn:  It's because /home/havvy/code is a shared directory with virtualbox.
[07:29:59] <pczarn> Oli`: impl behaviour for ~bot_behaviour
[07:30:19] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[07:30:19] <pczarn> no.
[07:30:45] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:30:45] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[07:30:53] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:30:59] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:31:36] <Oli`> pczarn, hmm I get the same error message
[07:31:40] <pczarn> Oli`: fn do_something() is not a method. write fn do_something(&self)
[07:31:53] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:32:27] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[07:32:27] *** Joins: matp (matp@moz-16FE1E05.matp.at)
[07:33:08] <Oli`> oh yes, you're right, thank you
[07:33:45] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:33:47] <pczarn> a method must take for example a reference to self. Otherwise it is a standalone method
[07:35:34] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[07:36:24] *** Joins: nfroidure (nfroidure@moz-C115682E.w90-34.abo.wanadoo.fr)
[07:36:35] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[07:37:46] <Oli`> ok, i understand
[07:38:07] <Havvy> Is that what we are calling them?
[07:39:24] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[07:39:39] <sfackler> I've heard "static method" most commonly, but once associated types/values are a thing "associated function" will probably be a better term
[07:39:54] *** Quits: gwty (gwtypc@980E6763.65D8992A.137C914F.IP) (Ping timeout)
[07:39:54] *** Quits: gwty_ (gwtypc@980E6763.65D8992A.137C914F.IP) (Ping timeout)
[07:39:56] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[07:40:10] <eddyb> aww I had to leave for a few minutes and someone answered already
[07:40:21] <pczarn> standalone ("static") methods are mentioned in the tutorial 16. Methods
[07:40:23] <eddyb> Oli`: the preferred naming for traits and types is UpperCamelCase, btw, makes code easier to read, if nothing else :P
[07:41:46] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[07:42:08] *** Quits: Doppp (Doppp@ED5E5331.58AB7B93.EE633EE.IP) (Ping timeout)
[07:42:24] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[07:42:27] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[07:42:27] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[07:44:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:44:10] <Oli`> eddyb, fixed :) 
[07:46:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:46:58] *** Joins: Doppp (Doppp@ED5E5331.58AB7B93.EE633EE.IP)
[07:47:21] *** Quits: dsrx (tom@F616D77.77D422C6.AA74B5DB.IP) (Quit: WeeChat 0.4.1)
[07:48:59] <listboss> I understand the first part of error message in https://gist.github.com/gistub/9702790 about moving but I am not sure about the suggestion to use `ref` to override! 
[07:49:03] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[07:49:22] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:49:27] <listboss> When I declare the fn as fn mv(ref x: Foo) I get "cannot move out of dereference of `&`-pointer" 
[07:49:53] <listboss> so how I am supposed to use ref?
[07:49:56] *** Joins: philix (felipe@moz-957F279F.user.veloxzone.com.br)
[07:50:26] <huon> I'd guess it's basically suggesting `let ref mut bar = x.id;`
[07:50:35] <huon> which is the same as `let bar = &mut x.id;`
[07:50:40] <huon> but that won't work either
[07:51:01] <huon> because then you'll have an &mut borrow of x and so x can no longer be used (until that borrow goes out of scope)
[07:51:05] <Havvy> Is there an example of a task that runs forever waiting for input, doing stuff with it, giving output, and then repeat while holding onto mutable state?
[07:51:07] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[07:51:53] <huon> `let mut x = 0; loop { let input = wait(); output(do_thing(input, &mut x)) }` ?
[07:51:54] *** Quits: philix (felipe@moz-957F279F.user.veloxzone.com.br) (Ping timeout)
[07:52:48] <listboss> huon: so it won't work why the suggestion?
[07:52:52] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:52:59] <eddyb> because the compiler isn't omniscient?
[07:53:40] <eddyb> it can't know what you *wanted* to write, only what you *wrote*
[07:53:56] <huon> listboss: I think that suggestion is actually pretty bogus in that instance
[07:54:06] <listboss> right :) but there should be a case that the suggestion will work, right?
[07:54:24] <huon> if it were just `let ref bar = x.id;` it would work
[07:54:33] <eddyb> most simple sources for that error can be solved by using references instead of moving
[07:54:33] <huon> but then you don't get to mutate bar
[07:54:45] <huon> (well, you don't get to mutate the data that bar points at)
[07:55:15] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:55:53] <alan_andrade> How would you convert an iterator to a Vec ? Is that even a sound question ?
[07:56:00] <eddyb> .collect()
[07:56:08] <alan_andrade> ah, instead of map ?
[07:56:12] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[07:56:17] <eddyb> huh?
[07:56:19] *** Quits: IanCormac841 (User@251BB4CA.64D641E5.67DFF8B4.IP) (Ping timeout)
[07:56:29] <Havvy> .map() is lazy and takes a closure.
[07:56:30] <eddyb> alan_andrade: .collect() on an iterator produces a concrete collection
[07:56:38] <Havvy> .collect() is eager and doesn't.
[07:56:50] <eddyb> they're... not even related :/
[07:57:29] <alan_andrade> I can see that now. In ruby they are synonyms. Poor assumption from my part
[07:57:31] *** Joins: IanCormac84 (User@852ACC30.64D641E5.67DFF8B4.IP)
[07:57:57] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[07:57:59] <huon> eddyb: they are related: they both do things on iterators
[07:58:04] *** Quits: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net) (Quit: bleibig)
[07:58:07] <alan_andrade> well, you guys are magicians. collect() did the work
[07:58:20] <huon> eddyb: please be a little less derisive of beginners
[07:59:06] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[07:59:08] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[07:59:35] <eddyb> huon: well, I wanted to know why someone would think they are related, and I found an answer
[07:59:56] <Havvy> eddyb:  I had the same reasoning that .map() would give me a Vec at first.
[08:00:27] <eddyb> huon: but I shouldn't bother with my efficient methods and leave heuristic humans to help other humans
[08:00:38] <huon> eddyb: the `:/` doesn't help :)
[08:00:39] <eddyb> (needs quotes around "efficient")
[08:01:03] *** Joins: harish (harish@moz-24DD2596.hsd1.ca.comcast.net)
[08:01:04] <huon> makes you seem annoyed that someone would even be so silly to ask such a question
[08:01:42] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[08:01:49] *** Joins: pingu (christian@moz-26B332AC.ponies.io)
[08:01:54] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:01:58] *** Quits: hobinjk (hobinjk@moz-3C889771.mit.edu) (Ping timeout)
[08:02:06] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:02:11] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:02:51] *** Quits: pauls (pauls@moz-BFEF1F22.ccs.neu.edu) (Ping timeout)
[08:04:16] *** Joins: pauls (pauls@moz-BFEF1F22.ccs.neu.edu)
[08:04:21] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[08:04:24] *** Joins: andrew-d_w (andrew-d_w@moz-17320F4E.hsd1.ca.comcast.net)
[08:04:36] *** Quits: andrew-d_w (andrew-d_w@moz-17320F4E.hsd1.ca.comcast.net) (Input/output error)
[08:05:06] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[08:05:22] <eddyb> alan_andrade: okay, so it turns out Ruby made an... interesting design decision and added "collect" as an alias for "map"
[08:06:01] *** Joins: Rym (y@A7E0FF7F.AFC03BA8.51C6DE68.IP)
[08:06:19] <huon> that's weird
[08:06:28] <eddyb> apparently that comes from Smalltalk... yay legacy cruft
[08:07:09] <eddyb> huon: and confusing. maybe steveklabnik can mention how Rust's "collect" has nothing to do with Ruby's "collect" which is needlessly confusing alias for "map"
[08:07:25] <pczarn> `inject` as an alias for reduce (fold) comes from Smalltalk as well
[08:07:34] <eddyb> ....
[08:07:34] <alan_andrade> So just because smalltalk had it like that,  ruby went with it ? hmm. 
[08:07:37] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:07:39] <huon> alias all the names \o/
[08:07:44] <alan_andrade> pczarn: true, that's another alias
[08:08:00] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:08:16] <huon> but they don't alias `fold` as well? what a peculiar choice :P
[08:08:34] <Havvy> What about foldl?
[08:08:34] <alan_andrade> fold doesn't exist in Ruby afaik
[08:08:51] <eddyb> alan_andrade: you've probably figured out by now, but Rust's "collect" method on iterators "collects" the iterator (to exhaustion) into a concrete collection, be it Vec, List, (Tree|Hash)Set, (Tree|Hash)Map, etc.
[08:09:12] <huon> alan_andrade: yeah, that's my point; they have the names inject and reduce for the same operation, but not fold
[08:09:30] <aatch> dammit, I fix my warnings before I can type check because libgreen isn't built until stage2
[08:09:40] <aatch> Before I can bench mark, sorry
[08:09:49] * aatch has spent too much time in typeck
[08:10:02] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[08:10:30] <alan_andrade> eddyb: Well that consolidates the knowledge. I was actually interested in Vec, but I was oblivious of the other options
[08:11:29] <pczarn> In Rust, collect takes an iterator and returns a collection. In Ruby, collect takes an `Array` and returns `Enumerator`
[08:11:42] <eddyb> not really
[08:11:59] <alan_andrade> collect doesn't take anything no ?
[08:12:04] <eddyb> pczarn: only if you don't provide a closure *which is the same thing map does in the same circumstance*
[08:12:06] <alan_andrade> map does
[08:12:17] <eddyb> in Ruby, collect and map are equivalent
[08:12:33] <eddyb> they both take an optional closure
[08:12:45] <eddyb> huon: "inject: startValue into: binaryBlock" at least that *kinda* makes sense... reminds me of my for loop folds - which need a starting value that I don't know how to "inject" :))
[08:13:15] *** Quits: nlminhtl (ignotus@moz-393BCEC.la.net.ua) (Quit: Konversation terminated!)
[08:13:27] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[08:13:32] <brson> are there any rust xml parsers?
[08:14:32] <strcat> brson: I doubt there's a pure rust one, it's actually really complicated to do right
[08:14:34] <brson> the answer is, 'yes'
[08:14:47] <brson> there are 3 here! https://github.com/mozilla/rust/wiki/Community-libraries
[08:14:59] <brson> two in Rust :-D
[08:15:01] <strcat> is any complete? ;)
[08:15:02] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:15:07] <eddyb> strcat: well, kmc is working on a pure HTML5 parser....
[08:15:11] <brson> one that is even passing tests
[08:15:39] <strcat> ah right I remember bjz making those bindings
[08:15:51] <brson> the pure rust xml parser doesn't look ready to use
[08:16:23] <brson> i'll try sax-rs
[08:16:57] <eddyb> strcat: a subset of that could be reused for an XML parser - especially if the specs have similar wording
[08:17:04] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:17:18] <eddyb> strcat: (kmc's code looks like a translation of the spec)
[08:17:34] <huon> aatch: update to master, native is now the default for libraries as well as rustc
[08:17:36] <eddyb> <3 macro-based DSLs
[08:18:08] <aatch> huon, since when, cause I rebased this morning.
[08:18:28] <huon> brson: http://www.rust-ci.org/projects/#xml too
[08:18:38] *** Joins: gwty (gwtypc@980E6763.65D8992A.137C914F.IP)
[08:18:44] *** Joins: gwty_ (gwtypc@980E6763.65D8992A.137C914F.IP)
[08:18:44] <huon> aatch: UTC 01:51
[08:18:46] <mcpherrin> aatch: I seem to recall seeing it this afternoon
[08:18:59] <huon> aatch: https://github.com/mozilla/rust/pull/12833
[08:19:09] <brson> rust-ci is so nice
[08:19:09] <huon> brson: (I guess they're the same libraries)
[08:19:13] <aatch> So I probably rebased a few hours before it landed...
[08:19:43] <huon> brson: yeah, hansjorg has done a really nice job of it
[08:19:51] <strcat> eddyb: xml has weird things like namespaces though
[08:20:14] <aatch> Woo, no conflicts this time
[08:20:23] <huon> strcat: doesn't html have them too (<svg:...> etc.?)
[08:20:32] *** Quits: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net) (Ping timeout)
[08:20:32] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[08:20:34] <huon> aatch: you got the vec changes last time? :P
[08:20:37] <strcat> huon: specifically hardcoded ones
[08:21:05] *** Quits: ztomo (ztomo@moz-7D901BCF.lnse2.woo.bigpond.net.au) (Quit: )
[08:21:08] <strcat> in xhtml5 you can use them though
[08:21:16] <aatch> huon, that wasn't too bad, it was the tiny changes from T -> &T all through trans that got me
[08:21:19] <strcat> and <script src="foo"/> ;p
[08:21:57] <aatch> since I missed them when fixing conflicts because I couldn't see the difference
[08:23:01] <mcpherrin> XML dom parsers are surprisingly difficult to get right
[08:23:36] <huon> aatch: ah, yes
[08:23:43] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:23:47] <huon> those ones are really annoying
[08:23:50] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:23:56] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:24:01] <aatch> I blame eddyb 
[08:24:31] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:24:42] <bjz> brson: sax-rs has a kind of weird API
[08:24:47] <bjz> :P
[08:25:02] <bjz> brson: not sure if it is fully complete either
[08:25:03] *** Joins: oberstet (quassel@moz-F190EF4.dynamic.mnet-online.de)
[08:25:27] <bjz> brson: depends on how complex your xml doc is
[08:25:30] *** Joins: dsrx (tom@moz-EEA4C0D9.lsanca.fios.verizon.net)
[08:25:40] <bjz> brson: it is enough for gl-rs though
[08:26:28] *** Joins: soumyaC (uid15286@moz-E77DEB21.irccloud.com)
[08:26:52] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[08:27:10] <brson> bjz: my case looks pretty simple
[08:27:31] <bjz> yay xml
[08:27:36] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[08:27:36] <bjz> don't we love you
[08:27:42] <bjz> :)
[08:28:38] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[08:32:33] *** Joins: Ferio (Mibbit@645ABD36.43760000.47249C24.IP)
[08:32:34] <aatch> sigh, benchmarking this is going to be hard...
[08:33:35] *** Joins: mgottschlag (quassel@moz-CD246736.hsi7.kabel-badenwuerttemberg.de)
[08:33:40] <Havvy> Can you do Erlang style actors in Rust, and if so, can I see an example of it?
[08:36:28] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:37:15] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[08:37:46] <Havvy> Actually, cancel that question.
[08:38:27] <mcpherrin> I don't know a lot of details on how erlang works, but my general understanding is you can do something like that
[08:38:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:38:46] <Havvy> I'll do some research in the morning.
[08:38:58] *** Joins: jackneill (jackneill@moz-4EE57515.pool.digikabel.hu)
[08:39:25] <mcpherrin> I've implemented a few message passey programs in rust
[08:39:31] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[08:39:50] <mcpherrin> generally spawning a bunch of threads that sit in a loop Receiving
[08:40:07] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[08:40:45] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:40:45] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:41:56] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[08:42:39] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[08:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:46:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:47:30] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Quit: leaving)
[08:47:47] *** Joins: skade (skade@B4A5FE21.505237C9.CAE22B62.IP)
[08:48:59] *** Quits: onelson (owen@18CF7301.95770028.5B6BFE7D.IP) (Ping timeout)
[08:49:52] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:49:53] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Connection reset by peer)
[08:50:11] <eddyb> aatch: hehe
[08:51:12] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[08:51:13] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[08:51:14] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[08:51:34] *** Joins: Mathieu (cicak@7B7B7C8D.8F79F0B0.9900354A.IP)
[08:51:43] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:55:32] *** Quits: Mathieu (cicak@7B7B7C8D.8F79F0B0.9900354A.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:56:09] <listboss> I read `fn mv(x: &mut Foo)` as "x is a mutable reference to type Foo", how about `fn mv(ref mut x: Foo)`? Is it the same as `fn mv(y: Foo) { let x = &mut y}` ? 
[08:56:57] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[08:57:07] <eddyb> listboss: pretty much
[08:57:40] <eddyb> ref is more useful when used in interior patterns
[08:57:51] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:58:39] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[08:58:43] <eddyb> like match counter {Some(ref mut x) => x += 1, ref mut x => x = Some(0)}
[08:58:54] *** Joins: philix (felipe@moz-957F279F.user.veloxzone.com.br)
[08:58:55] <listboss> eddyb: thanks. I was just getting comfortable with & when compiler suggested ref and confused me.
[08:59:18] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[08:59:20] <eddyb> I guess ref mut x @ None (or is it None @ ref mut x?) would be better in that case
[08:59:57] <listboss> ???
[09:00:03] *** Quits: Doppp (Doppp@ED5E5331.58AB7B93.EE633EE.IP) (Ping timeout)
[09:00:10] <eddyb> listboss: @ is pattern chaining
[09:00:12] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:00:22] <eddyb> aww rusti isn't here so I can't demonstrate
[09:00:27] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[09:00:47] <eddyb> let x @ y @ z @ w = 0; will create 4 locals from one value
[09:01:08] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[09:02:07] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[09:02:16] *** Quits: Ferio (Mibbit@645ABD36.43760000.47249C24.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:03:05] <listboss> I just learned pattern matching because of Rust so I am not sure what pattern chaining is used for
[09:03:41] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[09:03:59] <eddyb> listboss: well, the point of @ is to match a pattern and have a binding to it
[09:04:33] <eddyb> listboss: in the case above, if I do ref mut x @ None (I think that's the right order :P), I can have that as the first match arm as well
[09:04:51] <eddyb> listboss: or the enum could have a few different C-like variants
[09:05:03] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[09:07:27] <listboss> can you rewrite the above using the `match val { pat1: arm1, ...} ? 
[09:07:33] *** Joins: gimpf (gimpf@moz-DB865D66.adsl.highway.telekom.at)
[09:08:26] <eddyb> well, it's => not :...
[09:09:36] <eddyb> listboss: and which snippet are you referring to by "the above"?
[09:10:12] <listboss> ref mut x @ None  just wanna see it in context of a simple example
[09:10:40] *** Quits: oberstet (quassel@moz-F190EF4.dynamic.mnet-online.de) (Client exited)
[09:10:52] *** Joins: oberstet (quassel@moz-F190EF4.dynamic.mnet-online.de)
[09:10:59] <eddyb> match counter {ref mut x @ None => *x = Some(0), Some(ref mut x) => *x += 1}
[09:11:24] <eddyb> listboss: you check that the value is None *and* you get a mutable reference to it
[09:11:27] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[09:11:40] <alan_andrade> eddyb, huon thanks guys. I'm happy because you enabled me to create a P.R. https://github.com/uutils/coreutils/pull/142
[09:11:46] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[09:12:42] <alan_andrade> good night! (morning or whatever adjusts better to your TZ)
[09:13:12] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[09:13:31] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[09:14:44] <eddyb> alan_andrade: this is wrong :P https://github.com/uutils/coreutils/pull/142/files#diff-22ec5af47f25e40085616d0a71c7df7dL79
[09:14:48] *** Quits: mgottschlag (quassel@moz-CD246736.hsi7.kabel-badenwuerttemberg.de) (Ping timeout)
[09:14:52] *** Joins: twi (Adium@CF16816F.E0BD96E5.9ECBD630.IP)
[09:14:52] <eddyb> alan_andrade: the first .get(0) shouldn't be there
[09:15:23] <alan_andrade> just call matches.free.is_empty() ?
[09:15:30] <kimundi> listboss: let tuple @ (a, b) = (1, 2) // you get three local variables: tuple = (1, 2), a = 1, b = 2
[09:15:31] <alan_andrade> oh, yeah, that makes sense
[09:15:34] <kimundi> alan_andrade: I lterally just woke up ;)
[09:15:54] <listboss> eddyb: I see. That's neat. 
[09:15:59] <alan_andrade> I'm finishing my day : )
[09:16:18] <alan_andrade> And what a nice way to finish by doing some rust
[09:16:53] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[09:18:23] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[09:18:40] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[09:19:04] *** Joins: q66 (q66@moz-F9A4BCC3.range109-154.btcentralplus.com)
[09:20:01] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:20:41] *** Joins: Ferreus (ferreus@moz-B2609E89.lsn.wtnet.de)
[09:21:56] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:22:27] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[09:22:30] *** Joins: Ms2ger (Ms2ger@moz-CE3CEBEE.access.telenet.be)
[09:27:41] *** Joins: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca)
[09:29:22] <listboss> last question of night :) any specific reason there is no std::path::into_str_owned(). The only other method that returns an owned vector seems to consume `self` . I am guessing there would be reasonable use cases where you want to pass a string copy of the path to other libraries/functions
[09:29:25] *** Quits: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[09:30:13] <eddyb> listboss: "into" would have to consume self
[09:30:25] <eddyb> listboss: maybe you want to_str_owned()?
[09:30:43] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[09:30:50] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[09:31:05] <eddyb> (which may not exist, in which case, if it's not something undesirable to have, you could open an issue requesting it be implemented)
[09:31:23] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[09:31:23] <eddyb> listboss: but I would think something like path.clone().into_str() would work
[09:31:42] <kimundi> listboss: In general Paths are not convertible to a string
[09:32:03] *** Quits: xitology (xi@85437D54.5AFA3E4.CEDFC552.IP) (Ping timeout)
[09:32:14] <eddyb> well, yeah, that too
[09:32:23] *** Quits: twi (Adium@CF16816F.E0BD96E5.9ECBD630.IP) (Quit: Leaving.)
[09:32:24] <kimundi> Any to_str() functionality there is can only be used as a lossy user display :P
[09:34:43] <listboss> I see
[09:34:47] <listboss> right now I do data_dir.as_str().clone().unwrap().into_owned()
[09:35:19] <kimundi> heh
[09:35:22] <eddyb> listboss: why .clone()?
[09:35:41] <kimundi> the unwrap() is for the option I assume, that will be None if the strings is not convertible
[09:36:07] <eddyb> and why "into", we just happen to have into_owned implemented for &str, doesn't mean that's what you should use
[09:36:07] <kimundi> data_dir.as_str().map(|s| s.to_owned()) to get a Option<~str>
[09:36:10] *** Joins: gizmo (Mibbit@CCBD105C.F076A358.E5977C21.IP)
[09:36:23] <gizmo> hello
[09:36:23] <kimundi> eddyb: Now there, the docs don't really say that
[09:36:39] <eddyb> maybe we should remove into_* methods that don't consume self
[09:36:58] <pczarn> how to enable time_passes()?
[09:37:01] <kimundi> eddyb: If you mean in gneral, thats going to remove a lot of functionality
[09:37:08] <eddyb> pczarn: -Z time-passes
[09:37:24] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[09:37:26] <gizmo> i have a question about trait composition
[09:37:38] <eddyb> kimundi: the same functionality is provided by to_* and as_*
[09:37:48] <kimundi> eddyb: We'd need a new functionality prefix - or do what strcat wanted originally, and just have into_ functions be called to_
[09:38:00] <eddyb> kimundi: I didn't say "remove into"
[09:38:07] <eddyb> I said "remove misleading uses of into"
[09:38:12] <gizmo> Imagine we have                      trait Composited: Base {}
[09:38:31] <eddyb> kimundi: it's that MaybeOwned thing that can hold either a &'static str or a ~str, that's the only reason we have into_owned *sigh*
[09:38:34] <kimundi> eddyb: "maybe we should remove into_* methods that don't consume self" -  that did sound pretty universal to me, sorry :)
[09:38:47] <gizmo> Can I implement Composited so Base is also implemented
[09:38:48] <gizmo> ?
[09:38:48] <eddyb> kimundi: into is supposed to consume self
[09:39:03] <kimundi> eddyb: Not exactly
[09:39:09] <eddyb> gizmo: you have to implement Base *and* Composited for each type
[09:39:17] <kimundi> eddyb: into means it takes self by value, which _might_ consume self
[09:39:20] <listboss> well maybe I am misunderstanding the docs but http://static.rust-lang.org/doc/master/src/std/home/rustbuild/src/rust-buildbot/slave/doc/build/src/libstd/path/mod.rs.html#179 returns Option&<&str> and if I want my own copy I ahve to clone it
[09:39:35] <eddyb> kimundi: if it doesn't consume self, then it's as_ and not into_
[09:39:38] <kimundi> which arguable makes the "into" prefix itself wrong
[09:40:01] <eddyb> listboss: you can link to the doc itself
[09:40:04] <gizmo> eddyb: Thanks.  Then i have question about design :)
[09:40:06] <kimundi> eddyb: With generic code you can't draw that distinction
[09:40:29] <eddyb> kimundi: hence my comment about MaybeOwned - that's why the Str trait has into_owned
[09:40:41] <eddyb> but it doesn't mean people should use it for &str -> ~str
[09:40:45] <gizmo> imagine we have                      trait Solver {}
[09:40:53] <eddyb> listboss: Option<&T> is copyable
[09:41:27] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:41:33] <gizmo> and    we have                               trait SolverWithAlgo1: Solver {}                          trait       SolverWithAlgo2: Solver {}                                     and so on
[09:41:44] *** Quits: Rym (y@A7E0FF7F.AFC03BA8.51C6DE68.IP) (Ping timeout)
[09:42:09] <gizmo> and we have                          struct Data {many fields} 
[09:42:09] <eddyb> gizmo: you have very long spaces in your messages, for some reason, btw
[09:42:20] <eddyb> (I'm guessing you're copying from a text file)
[09:42:40] <gizmo> eddyb i try to disconnect code from text
[09:42:49] <eddyb> gizmo: `...`
[09:43:10] <kimundi> eddyb: The pattern I know of is "to_" does unnecessary work because it takes &self, and clones or whatever it. "as_" takes &self, but does a light conversion/cast. "into_" takes self by value, which means either can happen.
[09:43:14] <eddyb> very long lines wrap and are harder to follow, otherwise I wouldn't mind
[09:43:30] <gizmo> ok
[09:43:33] <eddyb> kimundi: it's not either, it's a different thing
[09:43:41] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:44:02] *** Joins: twi (Adium@moz-465A90AB.dip0.t-ipconnect.de)
[09:44:08] <kimundi> eddyb: The name implies it should be a different thing, but its actual usage in the code matches more up with my description.
[09:44:20] <eddyb> kimundi: that's MaybeOwned's into_owned
[09:44:27] <gizmo> so in some point of our code we choose what algo to use with a solver.  
[09:44:34] <kimundi> eddyb: Also other types into_ things
[09:44:56] <eddyb> kimundi: show me one other example
[09:45:00] <eddyb> that isn't an anti-pattern
[09:45:29] <gizmo> Now i want to do it that way: ...  let solver = &Data as &SolverWithAlgo1 as &Solver 
[09:45:48] <eddyb> gizmo: you can't have multiple implementations of Solve for the same type
[09:45:50] *** Joins: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP)
[09:45:55] <eddyb> *Solver
[09:46:05] <gizmo> eddyb: exactly!
[09:46:07] <eddyb> gizmo: that's set in stone pretty much
[09:46:23] <eddyb> gizmo: and you can't cast trait objects like that (right now, I hope it will get implemented after DST)
[09:46:39] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[09:46:43] <brandonson> gizmo, eddyb: newtypes?  i.e. struct DataVersion1(Data); struct DataVersion2(Data); etc.
[09:46:53] <eddyb> yupp, that's what I was going to suggest
[09:47:04] <eddyb> they don't even have to be specific
[09:47:16] <gizmo> brandonson: ok, but it will need some boilerplate.
[09:47:29] <eddyb> struct SolveWithAlgo1<T>(T);
[09:47:30] <kimundi> eddyb: http://static.rust-lang.org/doc/master/std/iter/enum.MinMaxResult.html#method.into_option
[09:48:31] <eddyb> kimundi: that consumes self, and *may* make one copy
[09:48:46] <eddyb> hmm, I guess you were right on the definition being less restrictive
[09:48:53] <kimundi> eddyb: But anyway I'm not arguing that the Maybe... usage is intuitive - things that do either a light move or a deep copy should definitely get another name.
[09:49:32] <eddyb> yeah, and Str/MaybeOwned should be refactored
[09:49:34] <kimundi> eddyb: Exactly, generic that take self can't define a API on that distinction, because it is unknown at the point where you choose the name
[09:49:41] <kimundi> That, they should
[09:49:48] <eddyb> especially since we won't be able to have a trait named Str :P
[09:50:37] <Ms2ger> eddyb, so for that deref error from yesterday
[09:50:40] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:50:45] <Ms2ger> eddyb, I'd just comment out `use`s?
[09:50:51] <kimundi> eddyb: However, going by the "into_" == "self" logic, even those methods are not strictly wrong.
[09:50:58] *** Quits: koderok (Thunderbir@275887EC.11253281.50E99975.IP) (Ping timeout)
[09:51:10] <kimundi> eddyb: I think we just need to codify what the three prefixes are supposed to express.
[09:51:16] <kimundi> err, write down
[09:51:54] <eddyb> Ms2ger: huh?
[09:52:25] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:53:13] <Ms2ger> eddyb, error: internal compiler error: deref invoked on expr of illegal type std::rc::Rc<layers::layers::ContainerLayer>, remember?
[09:54:05] <kimundi> eddyb: maybe we should just merge "into" and "to" into a "to" that only takes `self`, and can be used in combination with "as" to make a copy. Then there could be more precises methods like "clone_to_owned()" for doing that directly...
[09:54:08] <eddyb> Ms2ger: right. you have to find a generic function/method using autoderef on that type
[09:54:23] <eddyb> Ms2ger: (in a different crate)
[09:54:25] *** Joins: wzsk (wzsk@4F7252F2.CEBBE496.E48CFF63.IP)
[09:54:45] *** Joins: koderok (Thunderbir@5C9FA4A.28874083.85BF2EFC.IP)
[09:54:46] <eddyb> kimundi: so to_owned() on ~str becomes noop?
[09:55:06] <kimundi> yes, what todays into_owned() on ~str does
[09:55:54] *** Quits: alkino_ (alkino@moz-61F150EC.w92-151.abo.wanadoo.fr) (Ping timeout)
[09:56:05] <Ms2ger> eddyb, and this different crate is one that's `use`d in the file that errors?
[09:56:16] <eddyb> and .clone() is what you'd want if you had a ~str anyway
[09:56:28] <eddyb> Ms2ger: not sure why you're thinking of "use" :S
[09:56:54] <eddyb> maybe you mean "mod"?
[09:57:32] <Ms2ger> I don't know what I mean
[09:57:45] <Ms2ger> Surely you don't mean I need to check all of Servo's crates?
[09:58:06] <Ms2ger> Because in that case, I'm abandoning this updute
[09:58:09] *** Quits: ktt3ja (ktt3ja@moz-54586A12.washdc.fios.verizon.net) (Quit: Leaving)
[09:58:09] <Ms2ger> update
[09:58:44] <eddyb> Ms2ger: I may get this fixed tonight
[09:59:05] <eddyb> so unless you want it to be ready by Monday, it's easier to wait/do something else
[09:59:19] <Ms2ger> Okay
[09:59:45] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Client exited)
[10:00:12] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[10:00:15] *** Quits: rcxdude (rcxdude@moz-394D851.nat.csx.cam.ac.uk) (Quit: Konversation terminated!)
[10:00:23] <eddyb> *sorry*
[10:00:51] *** Quits: wzsk (wzsk@4F7252F2.CEBBE496.E48CFF63.IP) (Quit: WeeChat 0.4.3)
[10:00:56] *** Joins: wzsk (wzsk@4F7252F2.CEBBE496.E48CFF63.IP)
[10:01:19] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[10:01:30] <brandonson> eddyb, kimundi: I'm not sure having "to_xxx" methods take only `self` will really make sense.  For example, what happens with ToJson::to_json?  Doesn't really make sense to consume a value when creating its json representation.
[10:02:22] <kimundi> brandonson: hm, true
[10:02:29] <eddyb> brandonson: I knew it was too easy :P
[10:02:49] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:02:56] *** Quits: wzsk (wzsk@4F7252F2.CEBBE496.E48CFF63.IP) (Quit: WeeChat 0.4.3)
[10:03:01] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[10:03:12] *** Joins: nical (nico@DA4ABEAF.1DE10CA8.D8E68FF6.IP)
[10:03:21] *** Joins: ahunt (ahunt@moz-1C60F995.range31-53.btcentralplus.com)
[10:03:23] *** Joins: mgottschlag (quassel@moz-CD246736.hsi7.kabel-badenwuerttemberg.de)
[10:04:44] <kimundi> Okay, either define "to_" as "the least work necessary to get a new independent value, with as less ownership as necessary", which would mean define it as &self for some, and self for others. Or just keep the current system with a fixed mapping of "new depended value: as_ and &self. new independence value: &self and to_, or self and into_"
[10:05:10] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:05:21] *** Joins: wzsk (wzsk@4F7252F2.CEBBE496.E48CFF63.IP)
[10:05:40] <brandonson> kimundi, eddyb: My intuition on to_ is that it allocates something with a different internal format from whatever it started in, and into_ keeps the same internal format but stores the original value inside a struct of a different type that provides more information.
[10:06:38] *** Joins: eibwen (kvirc@moz-6D827A33.dip0.t-ipconnect.de)
[10:07:08] <kimundi> brandonson: yeah, thats been my intuition as well when I introduced the into/to distinction originally. But there are to many variation to make everything fit that exact pattern, so I think a more general definition needs to be taken.
[10:08:22] *** Joins: FrozenCow_ (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[10:08:22] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Connection reset by peer)
[10:08:50] *** Quits: wzsk (wzsk@4F7252F2.CEBBE496.E48CFF63.IP) (Quit: WeeChat 0.4.3)
[10:09:15] *** Quits: q66 (q66@moz-F9A4BCC3.range109-154.btcentralplus.com) (Quit: Leaving)
[10:09:46] *** Quits: FrozenCow_ (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Connection reset by peer)
[10:10:06] *** Joins: bollu (bollu@31CCE710.7065DDB9.6D6A344F.IP)
[10:10:12] <bollu> How do I use an Rc<RefCell<View>>
[10:10:13] <bollu> ?
[10:10:16] <brandonson> kimundi: well I feel like most things so far are managing to stick with the intuition.  At least that I've seen. What variations are showing up that makes it not work so well now?
[10:11:33] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[10:11:33] <kimundi> brandonson: Any generic trait that defines a into_ or to_ method can be implemented either way, depending on the type it gets implemented for.
[10:12:11] <eddyb> kimundi: we should... define bounds for them
[10:12:23] *** Joins: maedoc (Mibbit@13049942.1326A79E.1EE957FF.IP)
[10:12:23] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Connection reset by peer)
[10:12:27] <eddyb> like C has short/int/long
[10:12:31] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[10:12:52] <eddyb> bollu: which operations?
[10:13:04] *** Joins: wzsk (wzsk@4F7252F2.CEBBE496.E48CFF63.IP)
[10:13:23] *** Quits: khodzha (khodzha@86326CC6.3E410295.CA6E2165.IP) (Ping timeout)
[10:13:34] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Client exited)
[10:13:40] <kimundi> eddyb: Do you mean trait bounds, or guidelines how to use them?
[10:13:49] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[10:13:52] <bollu> eddyb: as in? 
[10:14:01] <bollu> I want to pass it along to a function
[10:14:02] *** flaper87|afk is now known as flaper87
[10:14:14] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[10:14:14] <bollu> should I store it as a member in my struct or should I create it in-place?
[10:14:17] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Input/output error)
[10:14:23] <eddyb> bollu: with shared ownership? .clone()
[10:14:33] <eddyb> kimundi: s/guidelines/rules
[10:14:54] <bollu> eddyb: http://rust-sfml.org/doc/rsfml/graphics/struct.RenderWindow.html#method.set_view <- I'm actually not sure why it needs a shared:ptr<>
[10:15:10] *** Joins: jviereck (Adium@moz-9C6EA76.dynamic.hispeed.ch)
[10:15:31] <eddyb> bollu: I would think it saves the view internally
[10:15:44] <eddyb> bollu: well, yeah, it does, see get_view below
[10:16:03] <bollu> eddyb: ah. 
[10:16:07] <brandonson> kimundi: could there be another prefix for methods that might be implemented either way?  i.e. make_xxx?  though I suppose there's still the problem of deciding between `self` and `&self`.
[10:17:00] <kimundi> I think you can't really restrict it.
[10:17:09] <bollu> eddyb: so should I create the Rc<RefCell<>> in-place? or should I store the Rc<RefCell<>> as a member?
[10:17:14] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[10:17:30] <bollu> eddyb: does it act like a C++ shared_ptr?
[10:17:47] <eddyb> bollu: well, yeah
[10:17:48] <kimundi> Like, you can write a impl for a type where a by-value memcopy is more expensive than a allocation for example.
[10:18:19] <eddyb> bollu: if you want it to point at the same object, you need to keep a Rc<RefCell<T>> handle yourself
[10:18:34] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 31.0a1/20140320030203])
[10:19:04] <bollu> eddyb: okay, so it's similiar to normal shared pointers then. got it :) why isn't Rc<RefCell<>> typedef'd to something?
[10:19:13] <bollu> it seems to be a really common pattern
[10:20:00] <eddyb> we used to have an RcMut<T> type, maybe we can have a typedef for it
[10:20:12] <eddyb> bollu: the thing is, sometimes you can get away with restricted interior mutability
[10:20:19] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[10:20:31] <eddyb> consider Rc<S> where S has a few Cell<int> fields
[10:20:39] <eddyb> now that's *free* interior mutability
[10:22:48] <bollu> eddyb: hm, so you're saying that the typedef is of limited value?
[10:23:18] <eddyb> yeah
[10:23:36] *** Joins: q66 (q66@moz-F9A4BCC3.range109-154.btcentralplus.com)
[10:23:37] <eddyb> this kind of thing is more useful in concurrent environments
[10:23:49] <eddyb> where you have Arc<Mutex<T>> and Arc<RWLock<T>>
[10:24:12] <bollu> eddyb: so, Rc = shared_ptr; RefCell = &mut <memory> is my understanding of it. Is this correct?
[10:24:34] <eddyb> it's more complicated than that
[10:24:46] <eddyb> RefCell<T> holds T and a borrow refcount
[10:25:14] <eddyb> allowing you to get as many &T as you want *or* just one &mut T
[10:25:32] <bollu> eddyb: so it's closer to ~ ?
[10:25:44] <eddyb> it's close to nothing
[10:25:55] <eddyb> RefCell<T> is (uint, T)
[10:25:56] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[10:26:08] *** Quits: maedoc (Mibbit@13049942.1326A79E.1EE957FF.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:26:22] <bollu> so when the count drops to zero it frees T correct?
[10:26:23] *** Quits: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP) (Input/output error)
[10:26:44] *** Joins: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP)
[10:27:00] <eddyb> bollu: nope
[10:27:03] <eddyb> bollu: Rc does that
[10:27:23] <bollu> eddyb: so RefCell is useless on it's own?
[10:27:26] <eddyb> don't confuse Rc and RefCell, I was trying to be explicit
[10:27:29] <eddyb> bollu: no it's not
[10:27:44] <eddyb> &RefCell<T> gives you interior mutability
[10:28:12] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[10:28:25] *** Quits: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP) (Ping timeout)
[10:28:27] <bollu> eddyb: RefCell holds the borrow count right? but it does *not* free when the count drops to zero corect?
[10:28:28] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[10:28:44] <eddyb> bollu: it doesn't care about freeing
[10:28:57] *** Joins: alkino_ (alkino@moz-61F150EC.w92-151.abo.wanadoo.fr)
[10:29:10] <eddyb> bollu: it counts borrows so you can't have more than one &mut T or a &mut T and a &T at the same time
[10:29:12] <bollu> eddyb: ah, it's responsiblity is the borrow semantics?
[10:29:19] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[10:29:21] <eddyb> hence "borrow"
[10:29:34] <eddyb> it's dynamic borrowck, basically
[10:29:50] <aatch> RefCell is essentially @mut
[10:30:05] <eddyb> but with explicit borrow/borrow_mut
[10:30:10] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[10:30:10] <aatch> So it inherently frightens me
[10:30:29] <eddyb> @RefCell<T> is @mut T :P
[10:30:35] *** Joins: khodzha (khodzha@4D2BECD3.71D0B9BF.E8ACC090.IP)
[10:30:36] <bollu> eddyb: hm, I see. so Rc has it's /own/ count for reference counting then?. and I wasn't around during the @ phase of the language :)
[10:30:43] * aatch has dynamic borrow failure PTSD
[10:30:52] *** Quits: alkino_ (alkino@moz-61F150EC.w92-151.abo.wanadoo.fr) (Ping timeout)
[10:30:54] <eddyb> @ is a very bad Rc that pretends to be GC
[10:31:02] <eddyb> bollu: of course it does
[10:31:10] <brandonson> kimundi: The more I think about it the more I think the most efficient implementation would become somewhat ugly.  I mean you could provide both to_xxx(&self) and into_xxx(self), but then the user might call the inefficient one.
[10:31:16] <eddyb> Rc is *(weak_rc, strong_rc, T)
[10:31:44] <bollu> eddyb: ah. 
[10:31:54] <aatch> eddyb, has it been changed to that now?
[10:31:56] <doomlord_> if one creates a Vec::<()> with an actual size... will that perform allocations , or will size_of::() be zero, and the allocator will return nothing
[10:32:07] <eddyb> brandonson: maybe we should lint against calling x.to_foo() and then dropping x?
[10:32:30] <eddyb> doomlord_: you can actually test it
[10:32:41] <kimundi> doomlord_: Good question. I think for allocations zero sized types are artificially made size 1
[10:33:16] <eddyb> rusti: print!("{:?} ", vec!((), (), (), ()));
[10:33:17] <aatch> alloc_size_of
[10:33:17] -rusti- std::vec::Vec<()>{len: 4u, cap: 4u, ptr: (0x0 as *mut ())} ()
[10:33:33] *** Joins: FrozenCow_ (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[10:33:40] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Connection reset by peer)
[10:33:46] <aatch> it's done so each element has a unique memory location
[10:33:56] <eddyb> doomlord_: so technically the DST ~[()] will be a number and a constant pointer
[10:34:20] *** Quits: jviereck (Adium@moz-9C6EA76.dynamic.hispeed.ch) (Ping timeout)
[10:34:22] <eddyb> aatch: look at the output, the pointer is 0
[10:34:29] <doomlord_> ptr:0 as *mut .... i was about to say
[10:34:49] <brandonson> eddyb: runs into the json problem again - it really doesn't matter whether it's an into_, or a to_, because it's creating something entirely new.  Linting to_xxx then dropping x will warn when there's really no reason to.
[10:34:54] <eddyb> doomlord_: is this property useful to you in any way?
[10:34:57] <doomlord_> yes
[10:34:57] <kimundi> brandonson: I think the only sane way is to expect the user to look at the types themself to judge how expensive something is, and give him the general idea "try as_ first, then into_, and to_ as last resort"
[10:35:05] <bollu> doomlord_: how? :)
[10:35:07] <eddyb> brandonson: into_json?
[10:35:19] <eddyb> brandonson: that could reuse things like ~str
[10:35:55] <eddyb> or ~[T] or HashMap
[10:36:00] <doomlord_> i was about to make something that visits a datastruture, i kind of wanted it to return a vector of return values ... but if passing a return value of () .. with the behaviour i observe above, it wont do a useless allocation
[10:36:19] *** Quits: FrozenCow_ (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Client exited)
[10:36:45] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[10:36:46] <doomlord_> bspheader.visit_triangles(  |...|->R ) -> Vec<R>   .. ok its like a cross between visit and map..
[10:36:52] * kimundi still likes that our Sets are Maps with () as value type
[10:37:08] <eddyb> doomlord_: looks like fold to me
[10:37:13] <eddyb> doomlord_: (the ast kind of fold)
[10:37:26] *** Joins: FrozenCow_ (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[10:37:27] *** Parts: krdln (krdln@moz-C271714F.dynamic.chello.pl) ()
[10:37:40] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Connection reset by peer)
[10:37:45] <eddyb> kimundi: HashSet wastes an word. thankfully it doesn't allocate anything on the heap
[10:37:51] <doomlord_> i realize visitors usually do a 'fold' : without making it return something, the closure could accumulate internally
[10:37:59] <brandonson> eddyb: true, there's a few things that can be reused, but at least with the stuff I've done I haven't seen much use reusing.  Though that may be more because there's no into_json function at the moment.
[10:38:10] *** Quits: FrozenCow_ (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Client exited)
[10:38:22] <doomlord_> however by just making it return a vector of results *aswell*, that cuts out a little user boilerplate for a common case.
[10:38:38] <eddyb> brandonson: yeah and we don't have an Encodable method that can consume the original
[10:38:42] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[10:39:05] <doomlord_> perhaps i should just call it .map_triangles() .. 
[10:39:17] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Connection reset by peer)
[10:39:19] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[10:39:27] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Client exited)
[10:39:51] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[10:40:17] *** Quits: silven (quassel@moz-F81D3961.a328.priv.bahnhof.se) (Ping timeout)
[10:40:51] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[10:42:01] <kimundi> eddyb: We could define one as a default method
[10:42:59] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[10:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:44:21] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[10:45:14] <brandonson> kimundi: Maybe traits should just provide both into_ and to_, and suggest using x.to_ if you want to reuse the value and x.into_ if you don't.  as_ might be a problem though, because the convention's been that as_ functions don't allocate, but then you can't really have as_ on a trait because you can't be sure that the conversion won't need allocation.
[10:45:29] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[10:45:51] <kimundi> brandonson: well it depends on the return value
[10:46:20] <kimundi> fn as_slice(&'a self) -> &'a [T] _has_ to be efficient, or you can't write it :P
[10:46:44] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[10:47:13] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[10:47:34] <kimundi> (there could of course still be useless allocations internally, but thats true for any function)
[10:48:13] *** Joins: io2 (io2@moz-EE406A5.home.otenet.gr)
[10:48:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:49:09] <brandonson> kimundi: good point.  Maybe it's not a problem at all :p
[10:49:12] <brandonson> Are there any as_ functions that don't return an &-ptr?  Can't think of any myself.
[10:49:35] <kimundi> well, option.as_ref returns a Option<&T>
[10:49:41] <kimundi> which is cheap
[10:50:50] <kimundi> I think this just needs to be encoded as a "don't do stupid things" guideline. as_ is not expected to allocate, and is expected to be at most a few shallow copies.
[10:51:33] <kimundi> More importantly, as_ has a lifetime dependency on self
[10:51:48] <kimundi> Though that might not be the case verywhere
[10:52:34] <brandonson> kimundi: well if there's no lifetime dependency on self, shouldn't it probably be `to_` instead of `as_`?
[10:52:56] <kimundi> yes
[10:53:06] <kimundi> That probably true
[10:53:09] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[10:53:32] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[10:53:49] *** Joins: k4nar (quassel@moz-EE8DAF45.ip-91-121-75.eu)
[10:54:31] <kimundi> "as_" for views/slices/references into thing, that are bound to the object with a &'a self lifetime. "to_" For conversions that don't take ownership. "into_" for conversions that take ownership.
[10:55:15] <kimundi> Explicitly not "need ownership", but just "take ownership". That is, their signature defines their name.
[10:55:21] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[10:55:47] <kimundi> Then each method should in general be as efficient as possible in order to produce its return value.
[10:56:37] <brandonson> kimundi: yup, makes sense to me.
[10:57:13] <kimundi> so for vectors as_slice() can just do a shallow copy of self, to_owned() needs to clone the content to get a new independent ~[T], into_owned() might do either depending on wether it is implemented on &[T] or  ~[T]
[10:58:37] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Connection reset by peer)
[10:59:06] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[10:59:10] <kimundi> eddyb: Does this distinction make sense?
[10:59:28] <kimundi> (My last 4 messages)
[10:59:37] *** Joins: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[10:59:46] <eddyb> kimundi: I guess
[11:02:06] *** Joins: tiffany (kawaii@moz-7AF84602.dhcp.embarqhsd.net)
[11:02:27] <huon> kimundi: it might be better to phrase it as '.as_slice() creates a new &[] view into the vector from the data pointer and length (and for &[] vectors themselves, this ends up being a shallow copy)"
[11:02:36] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[11:03:46] <brandonson> I do think we might want to have traits provide both into_ and to_, with users calling whichever makes sense... and then we might actually be able to have that lint against foo.to_xxx where foo never gets used again, too.  Not sure how that lint might be done though.
[11:03:55] <skade> hm, is dead code detection recursive? e.g. I have a function that takes a struct as a parameter - but that function is never called. it seems like the struct is then marked as dead code as well.
[11:04:06] <kimundi> huon: vectors are just an example. Its about the three to, as, into prefixes and &self, &'A self and self in general
[11:04:25] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[11:04:31] <kimundi> brandonson: Yeah, but only for traits where there is a reasonable chanche that reuse can happen of course.
[11:05:26] <huon> kimundi: I was just debating the use of "shallow copy"
[11:05:29] <huon> skade: yes
[11:06:27] <skade> huon: thats incredibly noisy if you are writing a lib, as all functions and structs meant for external usage are marked dead outside of the test code :(
[11:06:39] <Ms2ger> eddyb, do you have an issue you can point at?
[11:07:01] <brandonson> kimundi: if there's no reuse, the into_xxx could just be fn into_t(self) -> T {self.to_xxx()}, so even if it's a very slim chance that reuse would work, it might be worth including.
[11:07:01] <skade> so the only option would be to go nuclear and basically switch dead code detection off :(
[11:07:11] *** Quits: twi (Adium@moz-465A90AB.dip0.t-ipconnect.de) (Quit: Leaving.)
[11:07:14] <kimundi> huon: ah, sorry, didn't tread that part to carefully, and I slipped in a "shallow copy" by instinct. :D
[11:07:23] <kimundi> err, habit
[11:07:28] <huon> skade: you mean when you're building with --test, a lot of functions are completely unused/untested?
[11:07:53] <skade> huon: no, when building without (because the tests are not built and thus the functions are not used)
[11:08:05] <huon> skade: that means the functions are not publically visible
[11:08:14] <huon> i.e. it's picking up a bug
[11:08:54] <brandonson> skade: Are your modules public?  i.e. pub mod mymod; vs mod mymod;
[11:08:57] <huon> you need `pub` in front of functions and modules
[11:09:06] <huon> yeah what brandonson says
[11:09:08] <skade> yes, they are
[11:09:11] <skade> they all are :(
[11:09:30] <skade> pub fn new() -> Options { -> warning: code is never used: `new`,
[11:09:40] <huon> dead_code is pretty reliable... so I'd guess you've got a mistake somewhere
[11:09:43] <huon> is the struct public?
[11:10:12] <Ms2ger> huon, you said the transmutes we talked about yesterday were wrong?
[11:10:16] <kimundi> and every module up to the crate root?
[11:10:39] <huon> Ms2ger: yeah
[11:10:48] <huon> the sort -0.0 smaller than everything else
[11:10:57] <Ms2ger> Mm, fun
[11:10:57] <huon> s/sort/order/
[11:11:10] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[11:11:39] <eddyb> Ms2ger: this? https://github.com/mozilla/rust/issues/13066
[11:11:56] <huon> eddyb: transmuting a f64 to i64 for sorting
[11:12:04] <skade> huon: ah, that was it - okay, I can now explain most of the warnings to me - I'll ask again once I trimmed everything down (most are sane)
[11:12:05] <huon> Ms2ger: it's almost right; I found an article about it
[11:12:14] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[11:12:17] <huon> skade: :)
[11:12:47] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[11:12:51] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[11:12:54] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[11:12:57] <huon> Ms2ger: http://www.randydillon.org/Papers/2007/everfast.htm
[11:13:09] <huon> seems kinda overkill :(
[11:13:15] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[11:13:31] <Ms2ger> eddyb, hm, that doesn't sound like it's related to the ICE?
[11:13:47] *** Joins: alkino_ (alkino@moz-AAF51602.w92-151.abo.wanadoo.fr)
[11:13:58] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[11:14:28] <Ms2ger> https://github.com/mozilla/rust/issues/13044?
[11:15:01] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[11:16:15] *** Joins: paraze (paraze@moz-96380A71.w86-209.abo.wanadoo.fr)
[11:16:40] <eddyb> Ms2ger: oh dear there's 3 new issues
[11:16:45] <eddyb> yeah, you found the ICE one
[11:17:04] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Quit: Leaving.)
[11:17:06] <Ms2ger> Thanks :)
[11:17:19] *** Quits: thesnowdog (doug@E8718008.CDB23781.6F17036B.IP) (Connection reset by peer)
[11:17:38] <Ms2ger> error: instantiating a type parameter with an incompatible type `display_list::DisplayListCollection<T>`, which does not fulfill `Share`
[11:17:44] * Ms2ger wonders what the hell that is about
[11:17:48] <huon> in an Arc?
[11:18:57] *** Joins: tyna (liadon@moz-BB1BAD9A.dynamic.chello.pl)
[11:19:07] <Ms2ger> Maybe, yes
[11:19:15] <Ms2ger> display_list_collection: Arc<DisplayListCollection<T>>
[11:19:24] <Ms2ger> render_layer.display_list_collection.get().draw_lists_into_context(&mut ctx);
[11:20:02] <Ms2ger> huon, in that case, can you explain? :)
[11:20:03] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[11:20:24] <eddyb> Ms2ger: you probably have Send bounds
[11:20:27] *** Joins: bourbaki (chatzilla@moz-3F414947.dip0.t-ipconnect.de)
[11:20:28] <eddyb> Ms2ger: replace them with Share
[11:20:31] <bourbaki> Greetings gentlemen
[11:20:44] <huon> bourbaki: and gentlewomen
[11:21:00] <bourbaki> If there happen to be some i hereby appologize.
[11:21:34] <Ms2ger> You can assume there are
[11:21:35] <rmt> What if they're british-english speaking women?  Will you apologise? :)
[11:21:36] <huon> you should apologize even if there aren't some :)
[11:21:48] <bourbaki> :)
[11:21:55] <eddyb> bourbaki: channel logs are archived
[11:22:03] <bourbaki> Oh noes
[11:22:06] <huon> anyway, hi bourbaki
[11:22:06] <eddyb> you can't exclude non-present individuals
[11:22:11] <bourbaki> :)
[11:22:23] <Ms2ger> Anyway, I think bourbaki got the point :)
[11:22:29] <rmt> There might also be people of indeterminate sex present.  Please address them appropriately. ;-)
[11:22:31] <bourbaki> Does anyone of you happen to know what the fastest way to merge trees is?
[11:22:38] <Ms2ger> Gentlefolk?
[11:22:44] <huon> Ms2ger: (does eddyb's explanation make sense?)
[11:22:48] <rmt> I object to "gentle"
[11:22:54] <huon> what about people who are particularly harsh and spiteful
[11:23:03] <huon> yeah, rmt knows what's up
[11:23:11] <bourbaki> I will stick to greetings earthlings from now on then :)
[11:23:19] *** Joins: paraze_ (paraze@moz-96380A71.w86-209.abo.wanadoo.fr)
[11:23:19] <bourbaki> Assuming there are no aliens here.
[11:23:22] <Ms2ger> I made some Send+Share bounds instead, that didn't help...
[11:23:24] <rmt> That's a bold assumption indeed.
[11:23:24] *** Quits: paraze_ (paraze@moz-96380A71.w86-209.abo.wanadoo.fr) (Connection reset by peer)
[11:23:26] * huon is on the moon
[11:23:26] <Ms2ger> Maybe the wrong bounds
[11:23:41] <huon> Ms2ger: as in, the error message didn't change?
[11:23:47] <kimundi> bourbaki: For Sets there is a union method. For Maps I guess turning one into a move iter and extending the other with it is the fastest way.
[11:23:51] <huon> bourbaki: merge what sort of trees?
[11:23:53] <rmt> But some assumptions have to be made to establish effective communications. :)
[11:24:13] <Ms2ger> huon, indeed
[11:24:23] <bourbaki> I thought about merging something like directory trees.
[11:24:27] <Ms2ger> Okay, I think I got it now
[11:24:33] <bourbaki> And when two files are matching i append them
[11:24:43] <huon> Ms2ger: what's the definition of DisplayListCollection?
[11:24:44] <Ms2ger> Or not
[11:24:53] *** Joins: twi (Adium@moz-F9DC68B8.pools.arcor-ip.net)
[11:25:02] *** Quits: twi (Adium@moz-F9DC68B8.pools.arcor-ip.net) (Max SendQ exceeded)
[11:25:09] *** Joins: twi (Adium@moz-F9DC68B8.pools.arcor-ip.net)
[11:25:19] *** Quits: twi (Adium@moz-F9DC68B8.pools.arcor-ip.net) (Max SendQ exceeded)
[11:25:29] <huon> oh, I know
[11:25:37] * huon can look at the source himself
[11:25:47] *** Joins: twi (Adium@moz-F9DC68B8.pools.arcor-ip.net)
[11:25:49] <Ms2ger> src/components/gfx/display_list.rs
[11:25:52] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[11:26:01] <kimundi> bourbaki: That sounds like a more high level question then. :
[11:26:10] <bourbaki> It does i guess :)
[11:26:22] <bourbaki> I just thought that someone might have a pointer
[11:26:24] *** Quits: khodzha (khodzha@4D2BECD3.71D0B9BF.E8ACC090.IP) (Ping timeout)
[11:26:26] <huon> Ms2ger: does T have a Share bound?
[11:26:29] <Ms2ger> error: instantiating a type parameter with an incompatible type `compositing::CompositorChan`, which does not fulfill `Share`
[11:26:31] <Ms2ger> Dammit
[11:26:46] <pczarn> r? https://github.com/mozilla/rust/pull/13074
[11:26:50] *** Quits: twi (Adium@moz-F9DC68B8.pools.arcor-ip.net) (Max SendQ exceeded)
[11:26:54] <eddyb> Ms2ger: rinse and repeat
[11:27:08] *** Joins: twi (Adium@moz-F9DC68B8.pools.arcor-ip.net)
[11:27:14] <Ms2ger> pub struct CompositorChan {
[11:27:15] <Ms2ger>     chan: Sender<Msg>,
[11:27:17] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[11:27:19] <Ms2ger> What's not Share?
[11:27:27] *** Quits: twi (Adium@moz-F9DC68B8.pools.arcor-ip.net) (Max SendQ exceeded)
[11:27:54] <huon> I don't think its safe to have multiple threads sending on one Sender handle
[11:27:58] *** Joins: twi (Adium@moz-F9DC68B8.pools.arcor-ip.net)
[11:28:13] <huon> (it is safe to have multiple sender handles sending at once, though.)
[11:28:38] <huon> and so one can't have aliasable/shared access to a Sender, and so Sender can't be Share
[11:28:59] *** Joins: reverend_paco (chatzilla@moz-FDBE15EC.hsd1.ma.comcast.net)
[11:29:27] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:29:35] <Ms2ger> Okay, looks like I'm back to eddyb's error, excellent :)
[11:31:51] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:32:12] <bourbaki> huon: Btw nice raytracer implementation :)
[11:32:30] *** Joins: thesnowdog (doug@E8718008.CDB23781.6F17036B.IP)
[11:32:42] <Ms2ger> eddyb, huon, thanks
[11:32:43] <huon> bourbaki: hm?
[11:32:59] *** Quits: ahunt (ahunt@moz-1C60F995.range31-53.btcentralplus.com) (Ping timeout)
[11:33:08] <bourbaki> huon: Havent you implemented that mini raytracer thingy?
[11:33:17] *** Joins: Rym (y@39BAE987.19F07A52.8772DA20.IP)
[11:33:20] <huon> bourbaki: oh! this https://github.com/huonw/card-trace ?
[11:33:25] <bourbaki> yep
[11:33:38] <huon> yeah, I ported it from someones C++ code
[11:33:41] <huon> thanks :)
[11:33:51] * huon considers updating it
[11:33:54] <bourbaki> I was thinking about writing a small tracer also, since i thought its a good benchmark
[11:34:19] <bourbaki> A nice language will have a concise mathy look and nice mem behaviour.
[11:34:24] <huon> woah, I wrote that when we had the new for loops?
[11:34:29] <bourbaki> :)
[11:34:30] * huon thought it was older
[11:35:41] <bourbaki> Storing a directory in a hashmap would resemble something like a FAT?
[11:35:57] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[11:36:22] <bourbaki> Filelocations as keys and nodes as whatever
[11:37:13] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Client exited)
[11:37:38] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[11:39:05] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Connection reset by peer)
[11:39:07] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[11:39:18] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[11:39:47] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Connection reset by peer)
[11:39:48] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[11:40:27] *** Joins: FrozenCow_ (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[11:40:31] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Connection reset by peer)
[11:40:48] <pczarn> what's rust.metadata.bin for?
[11:41:32] <huon> avoiding the need for header files
[11:41:59] <huon> it stores definitions of functions and so on, so the compiler can look them up in the compiled crates for cross crate name resolution/use
[11:42:29] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Quit: Leaving.)
[11:42:54] *** Quits: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP) (Quit: Leaving.)
[11:44:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:44:15] *** Quits: Ms2ger (Ms2ger@moz-CE3CEBEE.access.telenet.be) (Quit: bbl)
[11:44:30] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[11:45:20] *** Quits: FrozenCow_ (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Connection reset by peer)
[11:45:22] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[11:46:16] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[11:46:18] *** Quits: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net) (Quit: sw17ch)
[11:46:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:47:39] *** Joins: leowoe (Leo@moz-72D47201.dclient.hispeed.ch)
[11:48:03] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[11:49:28] *** Quits: leowoe (Leo@moz-72D47201.dclient.hispeed.ch) (Ping timeout)
[11:50:05] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Ping timeout)
[11:50:05] *** Joins: leowoe (Leo@moz-72D47201.dclient.hispeed.ch)
[11:51:07] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:53:21] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[11:53:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:54:33] *** Quits: tyna (liadon@moz-BB1BAD9A.dynamic.chello.pl) (Ping timeout)
[11:55:40] *** Quits: mindcat (mindcat@B0EE5D6D.BDFDA69D.857BDFA9.IP) (Ping timeout)
[11:56:16] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[11:56:17] *** Quits: skade (skade@B4A5FE21.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[12:00:08] *** Joins: mindcat (mindcat@C7D9CC0E.E1ABDF54.E47F7BFE.IP)
[12:00:51] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[12:03:20] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[12:03:52] <nical> is there a way to break in gdb when a task fail?
[12:04:05] <huon> nical: break on rust_fail
[12:04:34] <nical> huon: excellent, thanks!
[12:05:03] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[12:06:11] <huon> nical: btw (assuming you're the same nical rewriting json), large rewrites are pretty ok, lots of things needs lots of work
[12:06:28] <huon> and we have bugs everywhere anyway, so introducing new ones isn't really a problem
[12:06:41] <huon> (at least they'ere interesting :P )
[12:07:20] <nical> huon: yes it's me :) ok cool, that will let me clean things up, I was trying to favor small changes over cleaner end result
[12:08:21] * huon <3s cleaner end result
[12:08:33] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[12:08:59] <huon> even fundamentally changing the API is fine, as long as it's an improvement (or will lead to one in future)
[12:09:34] *** Quits: Anathema (anathema@moz-2F6DE08B.cable.virginm.net) (Client exited)
[12:10:44] <huon> nical: also, btw, are you editing json in-tree, and using `make` to build and test?
[12:11:23] <huon> if so, you can use `make check-stage2-serialize NO_REBUILD=1 TESTNAME=json` to just build and test the json tests in libserialize without a bootstrap
[12:11:28] <nical> huon: I am editing in tree, builing with 'rustc src/libserialize/lib.rs -g -L x86_64-unknown-linux-gnu/rt/stage0/ --test --out-dir=.
[12:11:30] <nical> '
[12:11:42] <huon> oh, that works too
[12:11:51] <Tobba> hm
[12:11:53] <huon> anything to avoid a bootstrap
[12:12:10] <nical> yeah :)
[12:12:21] *** Quits: thesnowdog (doug@E8718008.CDB23781.6F17036B.IP) (Quit: WeeChat 0.4.1)
[12:12:58] <nical> the make version looks much cleaner though
[12:13:06] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[12:13:12] <huon> yeah, it manages build flags etc.
[12:13:13] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:13:19] <nical> I don't even remember why I hand picked the rustc binary in stage0
[12:13:28] <huon> although, it doesn't pass -g, and does pass -O
[12:13:37] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[12:13:42] <huon> so is much slower to build and has no debuginfo
[12:13:56] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[12:14:05] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[12:14:08] <huon> (fixed by adding `RUSTFLAGS='-g -Z no-opt'` to that invocation...)
[12:14:11] <Tobba> whats the most sane way to store an UTF8 string that can also include special control codes which are completely invalid UTF8?
[12:14:17] <Tobba> I dont have any real choice here
[12:14:31] <huon> Tobba: store it as bytes [u8]
[12:14:37] <Tobba> hm, suspected I had to do as such
[12:14:45] <Tobba> as soon as I'll try to get a string from it it'll break sadly
[12:14:45] <huon> storing it in a &str is undefined behaviour
[12:14:59] <Tobba> so I guess only formatted strings can get proper behaviour
[12:15:10] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:15:31] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Connection reset by peer)
[12:15:42] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[12:17:24] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[12:20:31] *** Joins: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net)
[12:21:55] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Ping timeout)
[12:22:11] *** Quits: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net) (Ping timeout)
[12:22:30] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Ping timeout)
[12:22:43] *** Joins: tetsuhar_ (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[12:22:48] <Tobba> for some reason this part of my macro gives me "unexpected token 0" $($opcode => Some(&$name),)*
[12:23:06] <Tobba> not sure why though, it parses past that and --pretty expanded gives output if I replace $opcode with $name
[12:23:18] <huon> `$opcode: pat`?
[12:23:20] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[12:23:21] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[12:23:48] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Connection reset by peer)
[12:24:03] <Tobba> pattern itself for the macro is ($($opcode:expr, $name:ident, $asmname:expr, $operands:expr;)*) 
[12:24:06] <huon> (I'll need to see the whole definition to be any help :) )
[12:24:13] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[12:24:13] <huon> oh, taht's the problem
[12:24:33] <huon> opcode needs to be a pattern (`: pat`) to be used on the LHS of => in a match
[12:24:43] <huon> do you use opcode elsewhere?
[12:24:44] <Tobba> oh, huh
[12:24:48] <Tobba> nah pat should be fine
[12:25:02] <Tobba> although, I do
[12:25:06] <Tobba> so yeah that doesnt work right
[12:25:14] <Tobba> opcode: $opcode previously in the code
[12:25:18] <huon> file a bug about the confusing error message, if you feel like it
[12:25:38] <Tobba> bit short on time atm but I'll do it later today if I can remember to
[12:25:55] <huon> there's a work around: take $opcode: tt, and then pass that twice to a second macro, which take $opcode_pat: pat and $opcode_expr: expr
[12:26:05] <Tobba> oh dear
[12:26:17] <huon> yup :(
[12:26:46] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[12:26:53] *** Joins: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl)
[12:27:30] <huon> Tobba: https://gist.github.com/huonw/6acc69f9202caf47430e
[12:27:46] <Tobba> yeah
[12:27:59] <Tobba> also turns out you cant have macros in the LHS of matches
[12:28:00] <Tobba> lame
[12:28:13] <huon> yep
[12:29:08] *** Joins: thesnowdog (doug@E8B162D2.CDB23781.6F17036B.IP)
[12:29:16] <eddyb> Tobba: turns out you need an AST variant containing a macro invocation, for each node you want to allow macros in
[12:29:28] <Tobba> ew
[12:29:44] <eddyb> we could make this less painful with HKT, so that pre-expansion AST has a different shape than post-expansion
[12:29:52] <eddyb> that would allow ident macros
[12:29:56] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[12:30:16] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[12:31:44] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[12:32:26] *** Quits: IanCormac84 (User@852ACC30.64D641E5.67DFF8B4.IP) (Ping timeout)
[12:32:43] *** Joins: IanCormac84 (User@2AE54836.64D641E5.67DFF8B4.IP)
[12:34:31] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[12:34:31] *** Joins: drawoc (drawoc@moz-BAC1D3AB.res-cmts.sesh.ptd.net)
[12:34:44] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:34:52] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[12:35:07] *** Quits: soumyaC (uid15286@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[12:36:52] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:37:24] *** Quits: twi (Adium@moz-F9DC68B8.pools.arcor-ip.net) (Quit: Leaving.)
[12:39:55] *** Joins: philix_ (felipe@moz-7695080F.user.veloxzone.com.br)
[12:39:57] *** Joins: ganitsu (ganitsu@moz-5E73A260.dialup.adsl.anteldata.net.uy)
[12:40:29] *** Quits: philix (felipe@moz-957F279F.user.veloxzone.com.br) (Ping timeout)
[12:40:43] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[12:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:44:16] <Tobba> hm
[12:44:25] <Tobba> how do I temporarily move a value into a function
[12:44:32] <Tobba> at the moment it gets moved in and then just kinda stays there
[12:45:02] <Tobba> not sure which lifetime I should give it
[12:46:01] <eibwen> Tobba: just a & pointer doesn't work?
[12:46:02] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Client exited)
[12:46:07] <Tobba> nope
[12:46:13] <Tobba> it stays moved into the function
[12:46:24] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:46:38] *** Joins: Guest_ (textual@3E0487DF.D8252BC.9532F1CE.IP)
[12:46:44] <Tobba> I'll opt for a shittier solution for now
[12:46:55] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[12:47:00] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[12:47:05] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[12:48:55] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[12:48:59] *** Quits: Guest_ (textual@3E0487DF.D8252BC.9532F1CE.IP) (Quit: Textual IRC Client: www.textualapp.com)
[12:50:00] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[12:50:25] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[12:51:41] *** Joins: mye (mye@moz-52E25131.dip0.t-ipconnect.de)
[12:56:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:57:00] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[12:57:16] *** Quits: tiffany (kawaii@moz-7AF84602.dhcp.embarqhsd.net) (Ping timeout)
[12:58:29] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:58:33] *** Joins: xitology (xi@85437D54.5AFA3E4.CEDFC552.IP)
[12:59:14] *** Joins: tiffany (kawaii@moz-7AF84602.dhcp.embarqhsd.net)
[12:59:23] *** Joins: silven (quassel@moz-F81D3961.a328.priv.bahnhof.se)
[12:59:50] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[13:00:01] *** Joins: judder (maradukewa@75FA4DEE.A989D80C.78E362FE.IP)
[13:00:19] *** Parts: judder (maradukewa@75FA4DEE.A989D80C.78E362FE.IP) ()
[13:01:32] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[13:03:03] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[13:04:05] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[13:05:08] *** Joins: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP)
[13:05:10] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[13:05:18] *** Joins: mgax (mgax@moz-B9399889.grep.ro)
[13:05:57] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[13:06:03] *** Joins: saml_ (saml@moz-AFAADF83.nycmny.east.verizon.net)
[13:06:48] *** Quits: nical (nico@DA4ABEAF.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[13:08:14] *** Quits: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Connection reset by peer)
[13:08:22] *** Joins: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[13:08:42] <mgax> Hi! I'm having trouble understanding references. I'm trying to create an interator, that keeps a reference to an array, and returns items from it.
[13:09:22] <mgax> I've got the code to work using owning pointers, but I don't want to pass ownership of the array when creating the iterator
[13:09:29] <mgax> https://gist.github.com/mgax/6786fbde90eb1609b661
[13:09:37] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[13:09:40] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[13:09:55] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[13:09:58] <mgax> the compilation currently fails at line 37 because test_slice_iterator no longer owns the array
[13:10:16] <mgax> how do i write the iterator to only keep a reference to the array?
[13:11:20] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[13:11:46] *** Quits: tiffany (kawaii@moz-7AF84602.dhcp.embarqhsd.net) (Ping timeout)
[13:12:11] <eddyb> mgax: SliceIterator<'a> { source: &'a [u8], ... }
[13:12:47] *** Quits: not_gavin (gavin@gavinsharp.com) (Input/output error)
[13:13:01] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[13:13:04] *** Joins: not_gavin (gavin@gavinsharp.com)
[13:13:09] <bourbaki> Can you have more complex slices?
[13:13:19] <eddyb> like, multidimensional?
[13:13:20] <bourbaki> Like sampling a z curve?
[13:13:22] <bourbaki> Yes
[13:13:30] <bourbaki> Multidimensional with patterns
[13:13:49] *** Joins: tiffany (kawaii@moz-7AF84602.dhcp.embarqhsd.net)
[13:14:01] <eddyb> DST will allow (but maybe not implement) [[T]] as a rectangle in contiguous memory
[13:14:08] <mgax> eddyb, i modified the gist, now it's complaining at line 23, "borrowed value does not live long enough"
[13:14:11] <eddyb> multidimensional *views* would have to live in a library
[13:14:33] <eddyb> mgax: yeah, you need to take &'a [u8] and return SliceIterator<'a>
[13:14:46] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[13:15:15] <huon> bourbaki: a [] is always contiguous in memory
[13:15:15] *** Joins: jviereck1 (Adium@moz-7859BAFE.dclient.hispeed.ch)
[13:15:20] *** Quits: gwty (gwtypc@980E6763.65D8992A.137C914F.IP) (Ping timeout)
[13:15:36] *** Quits: gwty_ (gwtypc@980E6763.65D8992A.137C914F.IP) (Ping timeout)
[13:15:36] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Ping timeout)
[13:15:49] <eddyb> mgax: though what you have can be expressed in terms of chunks and filter_map, I think
[13:16:07] <mgax> eddyb, i think it works, i updated the gist, does it look sane?
[13:16:09] <eddyb> mgax: you can also use collect() instead of probing next() each time
[13:16:12] *** Quits: not_gavin (gavin@gavinsharp.com) (Input/output error)
[13:16:27] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[13:16:28] *** Joins: not_gavin (gavin@gavinsharp.com)
[13:16:31] <mgax> eddyb, thanks for the extra pointers, will look into them :)
[13:16:32] <eddyb> mgax: you can now remove the ~ from line https://gist.github.com/mgax/6786fbde90eb1609b661#file-iterator-rs-L29
[13:16:37] <bourbaki> huon: I know
[13:16:56] <bourbaki> https://en.wikipedia.org/wiki/Z-order_curve
[13:17:09] <mgax> eddyb, what did removing ~ achieve?
[13:17:19] <bourbaki> Sometimes you want to sample with a space filling curve though
[13:17:24] <bourbaki> Eg image processing
[13:17:40] <bourbaki> And it would be cool if you could do that with the iterators
[13:18:02] <eddyb> mgax: now it lives on the stack
[13:18:04] <huon> you can encode a space filling curve in a contiguous sequence of memory, right?
[13:18:08] <mgax> ahh ok
[13:18:12] <huon> and you can even define a custom iterator
[13:18:12] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[13:18:13] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:18:17] <mgax> eddyb, thanks a bunch, you got me unstuck :)
[13:18:19] <bourbaki> huon: well kind of
[13:18:31] <huon> if you don't wish to do the peculiar encoding
[13:18:34] <eddyb> huon: you can define random access, I think
[13:18:53] <huon> eddyb: presumably
[13:18:56] <eddyb> Z order looks new to me. I know about hilbert curves
[13:19:09] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[13:19:10] <bourbaki> There is a bunch of space filling curves.
[13:19:21] <bourbaki> Do not ask me what their respective gain is though.
[13:19:41] <huon> eddyb: random access for Z order is just some bit twiddling
[13:20:06] <bourbaki> Imagine if you want to filter a voxel scan.
[13:20:14] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:20:18] <eddyb> huon: oh yeah, it should be pretty efficient
[13:20:20] <bourbaki> Then you have to sample in several directions.
[13:20:36] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[13:20:46] <eddyb> looks more efficient to address than hilbert curve, but less localized
[13:20:52] <bourbaki> But maybe (im not sure) ordering the data in the vector differently might be more efficient.
[13:20:53] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Ping timeout)
[13:21:03] *** Quits: Rym (y@39BAE987.19F07A52.8772DA20.IP) (Ping timeout)
[13:21:13] <bourbaki> Like you said huon 
[13:23:03] *** Quits: jviereck1 (Adium@moz-7859BAFE.dclient.hispeed.ch) (Quit: Leaving.)
[13:23:22] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[13:23:34] <eddyb> bourbaki: with the upcoming index traits, you could have slick DST ZOrder adapters (on unsized slices) and crazier views
[13:23:47] <bourbaki> Cool
[13:23:48] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Quit: Leaving.)
[13:23:52] <eddyb> huon: how much do you know about fortran?
[13:24:01] <huon> eddyb: http://www.jjj.de/bitwizardry/bitwizardrypage.html
[13:24:08] *** Quits: not_gavin (gavin@gavinsharp.com) (Input/output error)
[13:24:25] *** Joins: not_gavin (gavin@gavinsharp.com)
[13:24:25] <huon> eddyb: I know some theoretical stuff about it, but I've enver actually used it, and barely read any of it
[13:24:33] *** Joins: marianoguerra (marianogue@moz-91FBE4FE.dip0.t-ipconnect.de)
[13:24:36] <huon> (that page has some Z indexing stuff)
[13:24:42] <eddyb> what I hear is that people are still (painfully) using it because there's no viable replacement
[13:24:44] <huon> erm, z ordering
[13:25:38] <eddyb> and that it has powerful multidimensional arrays with very flexible views, built in the language
[13:25:41] <huon> eddyb: (and bitzip.h gives the "bit_unzip" function, which is what you need for Z order)
[13:25:48] <bourbaki> eddyb: Is that really the case? I thought it was strong in the math field
[13:26:00] <eddyb> "strong"?
[13:26:10] <huon> and it has strong aliasing guarantees, allowing it to optimise hardcore vector stuff well
[13:26:13] <bourbaki> Well used a lot
[13:26:13] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[13:26:31] <bourbaki> Like BLAS and LAPACK and the lot
[13:26:41] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[13:26:41] <eddyb> huon: right, but are they stronger than Rust's?
[13:26:51] <huon> eddyb: not sure
[13:27:06] <bourbaki> Is that not cause its a stack based language?
[13:27:15] <huon> they're certainly stronger than C/C++'s :P
[13:27:20] <eddyb> of course :)
[13:27:20] <bourbaki> :)
[13:27:37] *** Quits: mgottschlag (quassel@moz-CD246736.hsi7.kabel-badenwuerttemberg.de) (Ping timeout)
[13:27:38] <bourbaki> Could you not add something like total in rust?
[13:27:41] <huon> eddyb: http://scicomp.stackexchange.com/questions/203/what-makes-fortran-fast
[13:27:42] <bourbaki> Like in idris
[13:27:56] <bourbaki> To optimize better
[13:28:02] <eddyb> bourbaki: total what?
[13:28:09] <bourbaki> total functions
[13:28:11] <eddyb> I'd like, for the sake of all the poor souls, to at least allow similar efficient patterns in Rust code, even if not as compact
[13:28:22] <eddyb> bourbaki: is that like a purity thing?
[13:28:25] <bourbaki> yes
[13:28:38] <bourbaki> no side effect and will always yield
[13:28:45] <bourbaki> im not 100% sure what else it does
[13:28:47] <eddyb> huon: thanks, what I find was good, but not this good
[13:28:58] <eddyb> bourbaki: sounds like pure + noexcept
[13:29:02] <bourbaki> yes
[13:29:13] <eddyb> LLVM can kinda model that
[13:29:15] <bourbaki> and it guarantees that it will not run forever
[13:29:17] <huon> "The word "total" invokes the totality checker which will report an error if the marked function doesn't cover all possible cases."
[13:29:32] *** Quits: IanCormac84 (User@2AE54836.64D641E5.67DFF8B4.IP) (Ping timeout)
[13:29:34] <sp3d> strictly speaking, total functions should also never fail, which implies no allocations either?
[13:29:36] <huon> that doesn't really seem like a precise explanation of it
[13:29:41] <bourbaki> yes its tied to totality ill chek the manual later
[13:29:43] <bourbaki> and point you to it
[13:29:55] <eddyb> sp3d: how else would they not be total?
[13:30:04] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[13:30:08] <eddyb> sp3d: as in, failure is the only non-total case, right?
[13:30:18] <bourbaki> http://eb.host.cs.st-andrews.ac.uk/writings/idris-tutorial.pdf
[13:30:26] <sp3d> infinite recursion/loops
[13:30:32] <eddyb> bourbaki: we already optimize better where we don't have exception paths
[13:30:33] <huon> section 8.5
[13:30:35] <eddyb> sp3d: oh ok
[13:30:36] <bourbaki> totality checking is what i mean
[13:30:37] <sp3d> https://en.wikipedia.org/wiki/Total_functional_programming is the context I have for the notion of totality
[13:30:39] <huon> page 33
[13:30:41] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[13:30:42] <bourbaki> neither had idris
[13:30:45] <bourbaki> has
[13:30:50] <bourbaki> bbl
[13:30:51] <sp3d> so I don't know how fortran's consideration differs
[13:31:15] <huon> sp3d: i think this was an idris thing, not a fortran thing
[13:31:16] *** Joins: IanCormac84 (User@49B981BE.2A8D8854.67DFF8B4.IP)
[13:31:20] <sp3d> oh
[13:31:53] <eddyb> sp3d: well, a deterministic infinite loop is "noreturn"
[13:32:05] *** Quits: not_gavin (gavin@gavinsharp.com) (Input/output error)
[13:32:21] *** Joins: not_gavin (gavin@gavinsharp.com)
[13:32:22] <sp3d> totality requires it to be provably non-infinite, not just not-provably-infinite
[13:32:23] <eddyb> maybe we could add LLVM attributes for maybe_never_returns or something like that. it doesn't sound *that* useful for optimizations though
[13:32:31] <huon> eddyb: "deterministic" == "always infinite"
[13:32:33] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[13:32:33] <huon> ?
[13:32:38] <eddyb> huon: yupp
[13:32:44] <huon> maybe never returns?
[13:32:51] <huon> but still returns sometimes?
[13:33:08] <eddyb> maybe-it-enters-and-never-returns
[13:33:14] <eddyb> still sounds funky
[13:33:26] <sp3d> e.g. a collatz conjecture loop
[13:33:28] <huon> surely every function that invokes abort() (directly, or transitively) gets that attribute
[13:34:22] <eddyb> yupp
[13:34:33] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[13:34:37] <eddyb> I don't see how it could be useful to anything but a checker
[13:35:30] <huon> that means that anything that allocates via ~ gets the attribute
[13:35:44] <huon> and anything that uses an iterator (which expand to include a `loop`)
[13:36:01] <huon> and anything that does integer division (fail!() on divide by zero)
[13:36:20] <huon> .. and, strictly speaking, anything that uses stack space (due to stack overflow)
[13:36:20] <sp3d> huon: total programs aren't even turing-complete
[13:36:35] <huon> sp3d: yep
[13:36:42] <eddyb> huon: all of those examples have counter-examples ;)
[13:36:59] <huon> eddyb: counter-examples to what?
[13:37:02] <bourbaki> I guess it is good for a lot of corner cases though
[13:37:08] <bourbaki> For optimizing stuff right?
[13:37:26] *** Joins: Anupkumar (uid16774@moz-A42E5B7B.irccloud.com)
[13:37:38] <huon> I'm just saying "set of all functions" and "set of maybe_never_returns functions" are really really close to equal
[13:37:55] <huon> so the attribute (or lack thereof) doesn't provide much information
[13:38:13] <huon> well, I guess the lack does, but it's so rare as to be useless
[13:38:18] <eddyb> dead store, a fixed range iterator, a checked (or non-zero constant) divisor, well, actually, your wording on the last one is pretty tight
[13:38:38] *** Joins: canhtak (canhtak@moz-805AE185.wl.t.ulaval.ca)
[13:38:53] <huon> eddyb: the compiler would have to infer that some insrtance of a `loop { }` statement does actually finish
[13:39:04] <huon> i.e. prove theorems about the code
[13:39:19] <bourbaki> Thats what you get with total in idris afaik
[13:39:19] <huon> possible for specific cases, but impossible in general
[13:39:29] <eddyb> huon: for optimizations? yeah it would be useless. I don't know, better stack handling and checked allocations could make it slightly more useful
[13:39:33] <bourbaki> And in Agda in general cause totality is forced
[13:39:44] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:40:01] <huon> bourbaki: yeh, but they're not trying to use totality for optimisation purposes, but rather it's other nice theoretical properties
[13:40:29] <bourbaki> But maybe you can use it there also
[13:40:37] <pczarn> could vellvm prove theorems about code?
[13:40:48] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[13:41:37] *** Quits: marianoguerra (marianogue@moz-91FBE4FE.dip0.t-ipconnect.de) (Ping timeout)
[13:41:56] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:42:24] <huon> pczarn: for some value of "theorem" yes
[13:43:30] <eddyb> huon: okay, so reading that stuff... pretty sure the only thing we're missing is first class multidimensional slice support
[13:43:35] <huon> (but, any serious code analysis is equivalent to the halting problem, i.e. can only be done for special cases/restricted power, not in full generality)
[13:43:44] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[13:44:22] <eddyb> huon: it would be nice to prove that, say, the borrow checker never goes into an infinite loop :P
[13:44:45] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:44:59] *** Joins: TobiasFar (tm@moz-A929D162.flosoft-servers.net)
[13:45:13] <huon> eddyb: that counts as a special case
[13:45:46] <huon> i.e. someone with a big brain (or multiple people doing a mind-meld) can sit down and think about it for a while
[13:45:46] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[13:45:47] <eddyb> with safe Rust code, you're further away from turing completeness, so we might be able to do better analysis in general, than you could on C code
[13:45:59] <huon> you're still turing complete
[13:46:11] <huon> so halting problem still applies
[13:46:31] <huon> but yeah, we can start from a slightly different level
[13:46:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:46:34] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[13:46:44] <eddyb> I was actually thinking of libsyntax
[13:47:01] <eddyb> huon: *sigh* macros are turing complete
[13:47:32] <eddyb> rusti: macro_rules! foo(() => (foo!())) foo!();
[13:47:32] -rusti- task 'rustc' has overflowed its stack
[13:47:32] -rusti- Illegal instruction
[13:47:33] -rusti- application terminated with error code 132
[13:47:36] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[13:48:19] <huon> eddyb: https://github.com/mozilla/rust/issues/9765 btw
[13:48:32] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Connection reset by peer)
[13:48:50] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[13:49:26] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[13:50:53] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[13:51:04] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: Textual IRC Client: www.textualapp.com)
[13:51:12] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[13:53:38] *** Joins: skade (skade@B4A5FE21.505237C9.CAE22B62.IP)
[13:56:03] *** Joins: marianoguerra (marianogue@moz-2B5AEB8A.dip0.t-ipconnect.de)
[13:56:41] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[13:56:50] *** Joins: nical (nico@DA4ABEAF.1DE10CA8.D8E68FF6.IP)
[13:57:10] *** Joins: NiccosSystem_ (NiccosSyst@moz-CF331A7F.nextgentel.com)
[13:59:29] *** Joins: khodzha (khodzha@86326CC6.3E410295.CA6E2165.IP)
[14:01:03] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:02:25] *** Quits: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[14:02:27] *** Joins: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[14:03:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:03:43] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[14:04:50] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[14:05:47] *** Joins: thilp (thilp@moz-5DFE9AA4.net)
[14:06:36] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[14:08:47] *** Joins: edwardw (edwardw@4299445D.BF90DB87.492F1EB9.IP)
[14:09:37] *** Quits: leowoe (Leo@moz-72D47201.dclient.hispeed.ch) (Quit: Leaving.)
[14:10:13] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[14:10:29] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[14:10:36] *** Joins: Rym (y@A6501019.7136637D.51C6DE68.IP)
[14:17:08] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[14:17:45] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Ping timeout)
[14:18:51] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[14:19:10] *** Quits: marianoguerra (marianogue@moz-2B5AEB8A.dip0.t-ipconnect.de) (Ping timeout)
[14:19:49] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[14:20:40] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[14:21:33] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Ping timeout)
[14:23:15] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:25:07] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:25:11] *** Joins: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net)
[14:26:01] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Connection reset by peer)
[14:26:13] *** Joins: jensnock_ (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[14:26:24] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[14:30:08] *** Joins: marianoguerra (marianogue@moz-75C9ECC6.hsi14.kabel-badenwuerttemberg.de)
[14:30:13] *** Joins: Mathieu (cicak@7B7B7C8D.8F79F0B0.9900354A.IP)
[14:30:31] *** Quits: jensnock_ (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[14:30:48] <skade> I have a problem calling into leveldb and would appreciate if someone could have look at what I am doing wrong: https://gist.github.com/skade/4db0b98dd43d508dd3a5
[14:31:15] <pczarn> rusti: macro_rules! foo(() => (0); ( $x:ident $($i:ident)* ) => ( foo!( $($i)* ) ) ) foo!(a b c);
[14:31:16] -rusti- ()
[14:31:25] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[14:31:48] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[14:31:52] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[14:32:47] <pczarn> rusti: macro_rules! foo(() => (123); ( $x:ident $($i:ident)* ) => ( foo!( $($i)* ) ); ( $($i:ident)* ) => (456) ) foo!(a b c)
[14:32:48] -rusti- 123
[14:33:08] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[14:33:25] <doomlord_> do any other languages have  a macro system as nice as rust? i know lisp is more powerful, right. is rust a unique point between what you can do with C and what you can do with Lisp
[14:33:38] <doomlord_> ah, template haskell perhaps..
[14:33:47] <doomlord_> (which i never tried)
[14:34:04] <benh> nemerle :)
[14:34:11] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[14:34:31] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Input/output error)
[14:34:33] <eddyb> Julia has hygienic macros, hygiene escape hatches, and powerful quasi quoting (though it's pretty much LISP)
[14:34:54] <thilp> doomlord_: perl6's macros work on the AST too
[14:35:01] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[14:35:01] <pczarn> doomlord_: Nimrod
[14:35:40] *** Quits: IanCormac84 (User@49B981BE.2A8D8854.67DFF8B4.IP) (Ping timeout)
[14:35:57] <doomlord_> this definitely comes as a shock to a c++ programmer. "macros are good, macros are worth using". 
[14:36:49] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Ping timeout)
[14:37:01] *** Joins: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net)
[14:37:06] <doomlord_> now i can see why a lot of the feature enhancement suggestions aren't met with such enthusiasm, given how much you can fix with macros
[14:37:31] <pczarn> rusti: macro_rules! foo(() => ( foo!(a b) ); ( $x:ident $($i:ident)* ) => ( foo!( $($i)* ) ) ) foo!(a b c)
[14:37:32] -rusti- task 'rustc' has overflowed its stack
[14:37:32] -rusti- Illegal instruction
[14:37:32] -rusti- application terminated with error code 132
[14:37:54] <pczarn> you can overflow stacks with macros!
[14:38:44] *** Joins: nomadic (nomadic@moz-E01D5C49.hsd1.ga.comcast.net)
[14:40:55] *** Quits: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de) (Input/output error)
[14:42:03] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[14:42:25] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[14:45:53] *** Joins: jdm (jdm@2B5CD89E.ED0C8.AE2B2F80.IP)
[14:45:53] *** ChanServ sets mode: +o jdm
[14:46:17] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Ping timeout)
[14:46:19] *** Quits: bourbaki (chatzilla@moz-3F414947.dip0.t-ipconnect.de) (Quit: ChatZilla 0.9.90.1 [Firefox 27.0.1/20140212131424])
[14:46:25] *** Joins: IanCormac84 (User@54DC338C.2A8D8854.67DFF8B4.IP)
[14:47:16] *** Joins: shubhaml (shubham@102712D1.C15BC1FD.249488B6.IP)
[14:48:13] *** Quits: goffrie (goffrie@moz-CEDBC6D9.dsl.ncf.ca) (Ping timeout)
[14:48:17] *** Joins: goffrie (goffrie@moz-8FCD10C8.dsl.ncf.ca)
[14:48:20] *** Quits: IanCormac84 (User@54DC338C.2A8D8854.67DFF8B4.IP) (Ping timeout)
[14:48:32] *** Quits: alkino_ (alkino@moz-AAF51602.w92-151.abo.wanadoo.fr) (Ping timeout)
[14:49:20] *** Joins: IanCormac84 (User@54DC338C.2A8D8854.67DFF8B4.IP)
[14:50:24] *** Quits: tiffany (kawaii@moz-7AF84602.dhcp.embarqhsd.net) (Quit: tiffany)
[14:50:27] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[14:50:32] *** Joins: tiffnya (lymia@moz-9AFBAEEB.lymia.me.uk)
[14:50:38] *** tiffnya is now known as tiffany
[14:52:09] *** Quits: Mathieu (cicak@7B7B7C8D.8F79F0B0.9900354A.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[14:52:25] *** Joins: japaric (japaric@F981A487.D1A0B378.5C7588CA.IP)
[14:53:09] *** Joins: judder (maradukewa@75FA4DEE.A989D80C.78E362FE.IP)
[14:54:27] *** Joins: tyna (liadon@moz-BB1BAD9A.dynamic.chello.pl)
[14:54:38] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[14:56:26] *** Quits: marianoguerra (marianogue@moz-75C9ECC6.hsi14.kabel-badenwuerttemberg.de) (Quit: leaving)
[14:57:29] *** Quits: ChrisOei (ChrisOei@moz-30D80888.hsd1.ca.comcast.net) (Client exited)
[14:58:27] *** Joins: Ferreus_ (ferreus@moz-7AAE4876.lsn.wtnet.de)
[14:58:53] *** Quits: Ferreus (ferreus@moz-B2609E89.lsn.wtnet.de) (Ping timeout)
[15:00:09] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[15:00:53] *** Quits: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP) (Ping timeout)
[15:01:29] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[15:03:39] *** Joins: lpy_ (lpy@E44EE2C4.F09091A8.1348A864.IP)
[15:04:50] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[15:05:12] *** Quits: IanCormac84 (User@54DC338C.2A8D8854.67DFF8B4.IP) (Ping timeout)
[15:05:25] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[15:05:31] *** Quits: lpy_ (lpy@E44EE2C4.F09091A8.1348A864.IP) (Ping timeout)
[15:06:04] *** Joins: IanCormac84 (User@F7CE68A0.64D641E5.67DFF8B4.IP)
[15:06:05] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:06:22] *** Joins: jensnockert (jensnocker@moz-A383D2B9.mobileonline.telia.com)
[15:06:31] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[15:06:58] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Quit: Leaving...)
[15:07:06] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[15:07:19] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:08:21] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[15:08:31] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:10:40] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[15:11:01] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[15:11:09] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:11:37] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[15:13:26] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Ping timeout)
[15:13:48] *** Joins: jensnock_ (jensnocker@moz-33279404.customers.ownit.se)
[15:15:35] *** Quits: jensnock_ (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[15:16:53] *** Joins: Zorbtar (e@4E08B4BB.E6DBD463.72ECBEEF.IP)
[15:17:58] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[15:19:46] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[15:20:33] *** Joins: Doppp (Doppp@ED5E5331.58AB7B93.EE633EE.IP)
[15:20:37] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[15:20:59] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[15:22:11] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[15:22:20] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Ping timeout)
[15:22:32] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:23:47] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[15:24:18] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[15:28:13] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:30:13] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:33:19] *** Quits: edwardw (edwardw@4299445D.BF90DB87.492F1EB9.IP) (Ping timeout)
[15:33:42] *** Joins: edwardw (edwardw@861842BE.B4F65FC7.A0A36CCE.IP)
[15:33:46] <eibwen> eddyb: macros are turing-complete? :o
[15:34:04] *** Joins: arielb1 (eran@moz-9CB2889B.red.bezeqint.net)
[15:34:36] <eddyb> eibwen: you can do lambda calculus in them
[15:34:40] <whitequark> I think you can encode lambda calculus in them
[15:35:03] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[15:35:08] <eddyb> eibwen: when not used for AST processing, they are a turing tarpit :P
[15:35:18] <eibwen> :)
[15:35:24] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[15:37:32] *** Quits: arielb1 (eran@moz-9CB2889B.red.bezeqint.net) (Ping timeout)
[15:38:00] *** Quits: q66 (q66@moz-F9A4BCC3.range109-154.btcentralplus.com) (Ping timeout)
[15:38:13] *** Quits: not_gavin (gavin@gavinsharp.com) (Ping timeout)
[15:38:29] *** Joins: not_gavin (gavin@gavinsharp.com)
[15:39:07] *** Quits: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl) (Quit: Bye)
[15:39:48] *** Quits: franckverrot (Franck_Ver@C3033BF6.B86F1645.C91367C6.IP) (Ping timeout)
[15:40:06] *** Joins: franckverrot (Franck_Ver@C3033BF6.B86F1645.C91367C6.IP)
[15:41:22] *** Joins: nszceta (nszceta@moz-E6CA8D6.hsd1.pa.comcast.net)
[15:41:58] *** Quits: saml_ (saml@moz-AFAADF83.nycmny.east.verizon.net) (Quit: Leaving)
[15:44:00] *** Joins: khodzha1 (khodzha@BE81805F.A859D9FD.CA6E2165.IP)
[15:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:44:21] *** Quits: khodzha (khodzha@86326CC6.3E410295.CA6E2165.IP) (Ping timeout)
[15:45:52] *** Joins: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de)
[15:46:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:47:05] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[15:47:14] *** Joins: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP)
[15:48:00] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[15:49:01] *** Joins: q66 (q66@moz-F9A4BCC3.range109-154.btcentralplus.com)
[15:49:04] *** Quits: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[15:49:21] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[15:49:22] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:49:50] *** Joins: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP)
[15:49:57] *** Joins: gwty_ (gwtypc@3CAC4C72.A9D442CE.49FF672.IP)
[15:50:39] *** Quits: koderok (Thunderbir@5C9FA4A.28874083.85BF2EFC.IP) (Ping timeout)
[15:51:05] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[15:51:09] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[15:51:45] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:54:47] *** Joins: koderok (Thunderbir@5C9FA4A.28874083.85BF2EFC.IP)
[15:56:18] *** Quits: nszceta (nszceta@moz-E6CA8D6.hsd1.pa.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:57:36] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[16:00:48] *** Quits: IanCormac84 (User@F7CE68A0.64D641E5.67DFF8B4.IP) (Ping timeout)
[16:01:16] *** Joins: earlz (earlz@moz-483E1E31.neo.res.rr.com)
[16:01:21] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[16:01:23] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[16:01:34] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[16:01:58] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[16:04:15] *** Joins: leowoe (Leo@moz-72D47201.dclient.hispeed.ch)
[16:06:10] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[16:06:35] *** Quits: Rym (y@A6501019.7136637D.51C6DE68.IP) (Ping timeout)
[16:08:00] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[16:11:36] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:11:44] *** Quits: dpanth3r (dinofelis@228444B8.6B06001A.BB6F225C.IP) (Quit: No Ping reply in 180 seconds.)
[16:12:02] *** Joins: dpanth3r (dinofelis@228444B8.6B06001A.BB6F225C.IP)
[16:12:13] *** Quits: koderok (Thunderbir@5C9FA4A.28874083.85BF2EFC.IP) (Ping timeout)
[16:13:36] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:14:50] *** Quits: leowoe (Leo@moz-72D47201.dclient.hispeed.ch) (Ping timeout)
[16:15:17] *** Joins: leowoe (Leo@moz-8D289FD3.vpn5-pool.uni-konstanz.de)
[16:16:12] *** Quits: jdm (jdm@2B5CD89E.ED0C8.AE2B2F80.IP) (Quit: Lost terminal)
[16:18:50] *** Quits: ganitsu (ganitsu@moz-5E73A260.dialup.adsl.anteldata.net.uy) (Connection reset by peer)
[16:19:10] *** Joins: ganitsu (ganitsu@moz-AF9A3990.dialup.adsl.anteldata.net.uy)
[16:19:13] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[16:20:56] *** Quits: nkoep (nik@moz-A96E33F3.pool.mediaways.net) (Quit: Leaving)
[16:21:03] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[16:21:10] *** Joins: nkoep (nik@moz-A96E33F3.pool.mediaways.net)
[16:22:07] *** Quits: nkoep (nik@moz-A96E33F3.pool.mediaways.net) (Client exited)
[16:22:43] *** Quits: jensnockert (jensnocker@moz-A383D2B9.mobileonline.telia.com) (Ping timeout)
[16:22:46] <Boreeas> I'm trying to compile rustc from windows, but configure fails with "configure: error: need file" - where does that come from?
[16:23:01] *** Joins: nkoep (nik@moz-A96E33F3.pool.mediaways.net)
[16:23:18] *** Joins: jensnockert (jensnocker@moz-A383D2B9.mobileonline.telia.com)
[16:23:25] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[16:25:47] *** Quits: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de) (Input/output error)
[16:26:36] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[16:28:41] *** Joins: janra (Janus@1CDC5701.A48867D7.52E4E107.IP)
[16:29:15] <bollu> if I have a Rc<RefCell<T>>, does clone created a new Rc<RefCell<>> pointing to the *same* object or to a *different* object?
[16:29:26] *** Joins: IanCormac84 (User@BF330DFD.2A8D8854.67DFF8B4.IP)
[16:29:41] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[16:29:43] <edwardw> clone only increase a reference count
[16:30:09] *** Quits: khodzha1 (khodzha@BE81805F.A859D9FD.CA6E2165.IP) (Quit: Leaving.)
[16:30:14] *** Joins: khodzha (khodzha@BE81805F.A859D9FD.CA6E2165.IP)
[16:30:21] <bollu> edwardw: it seems to be cloning the stored object too. guess I'm doing something wrong.
[16:30:34] <bollu> edwardw: it seems to be cloning the stored object too. guess I'm doing something wrong.
[16:30:36] *** Quits: nkoep (nik@moz-A96E33F3.pool.mediaways.net) (Client exited)
[16:30:48] <eddyb> bollu: are you doing (*x).clone() or x.clone()?
[16:31:35] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Input/output error)
[16:31:43] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Quit: zztr)
[16:31:44] *** Joins: nlminhtl (ignotus@moz-393BCEC.la.net.ua)
[16:32:01] <bollu> eddyb: x.clone() I think
[16:32:01] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[16:32:21] <bollu> eddyb: yep, x.clone()
[16:32:23] <bollu> fn get_view(&self) -> Rc<RefCell<View>> 
[16:33:14] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:33:29] *** Joins: tcsc (tcsc@moz-5E71BAD9.hsd1.ma.comcast.net)
[16:33:53] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Ping timeout)
[16:34:38] <bollu> eddyb: so it's my fault?
[16:34:50] <eddyb> mmaybe? I sitll don't know what you're doing
[16:35:07] *** Quits: q66 (q66@moz-F9A4BCC3.range109-154.btcentralplus.com) (Ping timeout)
[16:35:07] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:35:28] <bollu> eddyb: you're supposed to access the underlying object with <object>.borrow_mut().get().<method> right?
[16:35:43] <eddyb> bollu: nope
[16:35:48] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[16:35:50] <eddyb> bollu: I mean, without the .get()
[16:36:02] <eddyb> bollu: and borrow_mut only if you need mutable access. borrow otherwise
[16:36:09] <bollu> eddyb: yeah, I need mutability
[16:36:11] <eddyb> bollu: are you cloning the result of *that*?
[16:36:19] <bollu> eddyb: nope
[16:36:29] <eddyb> then I can't tell without code
[16:36:32] <bollu> eddyb: I'm clone the Rc<RefCell<View>>
[16:36:44] <bollu> eddyb: one sec
[16:37:01] <bollu> eddyb: the entire file or just the required part?
[16:37:17] <eddyb> the entire file, and use a line range to point the interesting bits
[16:37:22] <eddyb> *to point to
[16:37:30] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[16:38:48] *** Quits: drbawb (drbawb@moz-444F91EA.wi.res.rr.com) (Ping timeout)
[16:39:09] *** Quits: oberstet (quassel@moz-F190EF4.dynamic.mnet-online.de) (Client exited)
[16:39:43] <bollu> eddyb: how do I create 2 different selections?
[16:39:49] <bollu> in a gist?
[16:40:00] <bollu> ctrl doesn't work :/
[16:40:56] *** Joins: drbawb (drbawb@moz-444F91EA.wi.res.rr.com)
[16:41:09] <earlz> Does anyone know of a bson library that works for modern Rust? 
[16:41:20] <earlz> Everything I've seen is over 9 months old
[16:41:23] <eddyb> bollu: not two, just one
[16:41:38] <bollu> eddyb: yeah, it seems limited 
[16:41:41] <bollu> anyway: https://gist.github.com/bollu/af122aa155cf1fd8fc0f#file-rendering-rs-L82-L107
[16:44:02] <eddyb> bollu: why do you clone the view?
[16:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:44:08] *** Joins: nszceta (nszceta@moz-E6CA8D6.hsd1.pa.comcast.net)
[16:44:31] <eddyb> bollu: oh, I see. the rusty way is to clone the first sent
[16:44:42] <eddyb> window.get_render_window().set_view(view.clone()); and then use view later
[16:45:46] <eddyb> bollu: your Rc usage looks... fine. maybe you're misusing the rsfml APIs
[16:46:04] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[16:46:20] *** Quits: jensnockert (jensnocker@moz-A383D2B9.mobileonline.telia.com) (Connection reset by peer)
[16:46:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:46:56] *** Joins: jensnockert (jensnocker@moz-A383D2B9.mobileonline.telia.com)
[16:46:57] *** Quits: bbloom (bbloom@moz-6728B89F.nyc.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[16:47:13] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[16:47:26] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[16:49:55] *** Joins: kris (kris@moz-13371453.dk.customer.tdc.net)
[16:51:36] *** Quits: kris (kris@moz-13371453.dk.customer.tdc.net) (Connection reset by peer)
[16:54:19] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:55:11] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[16:55:48] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[16:56:36] *** Quits: Kxepal (Miranda@moz-DC6FDBB9.pppoe.mtu-net.ru) (Ping timeout)
[16:56:46] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:58:47] <doomlord_> is there a helper function to turn any object into a *c_void .. i've as_ptr() for vectors, that's handy.  elsewhere when i did a load of unsafe code i made a helper function void_ptr(...) .. i fear going to end up carrying this around as one of those helpers that seperates 'my' code from 'everyone elses'
[16:59:48] <doomlord_> if you make unsafe code awkward to write people might just link back to C for that.. i'm getting tempted :)
[16:59:49] *** Joins: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net)
[17:00:05] <doomlord_> it would be a shame because rust is completely capable
[17:00:17] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[17:00:17] <kimundi> doomlord_: std::raw contains definitions for trait objects that you can use to build partial wrappers for this stuff
[17:00:57] *** Joins: Kxepal (Miranda@moz-D0E0B353.pppoe.mtu-net.ru)
[17:01:03] <kimundi> doomlord_: Did you mean trait objects with "any object", or just "any value"?
[17:01:09] <doomlord_> ( I would suggest making void* work like in C .. something you can co-erce to freely - but only in unsafe blocks)
[17:01:15] <doomlord_> ^ any &T
[17:01:38] <doomlord_> this could just be force of habit from 15 years of C but unsafe code seems harder to write than it should be
[17:01:38] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[17:01:45] <kimundi> well, you can cast any &T to a *T, and you can cast and *T to any other *U
[17:01:49] <doomlord_> heh not 15, more like 20
[17:02:11] <doomlord_> i can get things done.. it just seems to take 4x the effort :)
[17:02:13] <kimundi> rusti: &5u as *uint as *std::any::Void
[17:02:14] -rusti- 0x7fff9b6947c8
[17:02:43] <doomlord_> 2x maybe, 4x is probably an exageration
[17:02:49] <fredy> Hello, probably I miss sth but this looks like a bug, http://pastebin.mozilla.org/4654451 Can somebody reproduce? I use master branch.
[17:03:18] <fredy> hm... not an updated master branch... :)
[17:04:07] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Input/output error)
[17:04:15] <kimundi> fredy: Heh, definitly file that bug
[17:04:17] *** Quits: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru) (Quit: Leaving.)
[17:04:39] <doomlord_> one is only going to get things working by visual feedback/tests anyway... the compiler isn't really helping me
[17:04:39] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[17:05:18] <fredy> kimundi: ok I am updating now to the latest master... and if it is still there I'll file it
[17:05:25] <doomlord_> (someone said "in unsafe code you want the compiler helping you as much as possible.." .. having to write a cast twice just gets in the way , IMO
[17:05:36] <kimundi> fredy: I guarantee you that its still there
[17:05:53] <kimundi> fredy: Thats a parsing ambiguity, the parser hasn'T really changed for a long time
[17:06:23] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Ping timeout)
[17:06:31] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[17:06:52] <fredy> kimundi: I see, then I'll file the issue :)
[17:07:00] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Connection reset by peer)
[17:07:05] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[17:07:10] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[17:07:17] <kimundi> `value as type < other_value` is being parsed as `value as (type < other_value)`, because type<foo> would be a valid type
[17:07:58] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[17:08:18] *** Quits: leowoe (Leo@moz-8D289FD3.vpn5-pool.uni-konstanz.de) (Ping timeout)
[17:08:33] *** Quits: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP) (Ping timeout)
[17:08:45] *** Quits: gwty_ (gwtypc@3CAC4C72.A9D442CE.49FF672.IP) (Ping timeout)
[17:08:57] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[17:09:07] <kimundi> Only way around it that I can see is explicit parenthesis `(value as type) < other_value`, or removing `as` from the language, which is kinda desired but not possible atm :)
[17:10:49] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[17:10:56] *** Quits: dsrx (tom@moz-EEA4C0D9.lsanca.fios.verizon.net) (Ping timeout)
[17:13:31] *** Quits: gimpf (gimpf@moz-DB865D66.adsl.highway.telekom.at) (Connection reset by peer)
[17:13:55] *** Joins: mgottschlag (quassel@moz-CD246736.hsi7.kabel-badenwuerttemberg.de)
[17:14:33] *** Joins: jensnock_ (jensnocker@moz-33279404.customers.ownit.se)
[17:15:59] *** Quits: mgottschlag (quassel@moz-CD246736.hsi7.kabel-badenwuerttemberg.de) (Ping timeout)
[17:16:12] <doomlord_> on reddit i was surprised to see people saying they actually liked the &*( as *T as U*) ..  but i dont see how that can possibly make things any safer :)
[17:16:20] *** Quits: jensnock_ (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[17:16:24] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:16:56] <o11c> parser error
[17:17:42] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[17:18:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:18:28] *** Quits: shubhaml (shubham@102712D1.C15BC1FD.249488B6.IP) (Input/output error)
[17:20:16] *** Quits: japaric (japaric@F981A487.D1A0B378.5C7588CA.IP) (Ping timeout)
[17:20:24] *** Joins: kris (kris@moz-13371453.dk.customer.tdc.net)
[17:20:58] *** Quits: kris (kris@moz-13371453.dk.customer.tdc.net) (Client exited)
[17:21:03] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[17:21:12] *** Quits: jensnockert (jensnocker@moz-A383D2B9.mobileonline.telia.com) (Input/output error)
[17:21:37] *** Joins: leowoe (Leo@moz-72D47201.dclient.hispeed.ch)
[17:21:45] *** Joins: jensnockert (jensnocker@moz-A383D2B9.mobileonline.telia.com)
[17:21:50] *** Joins: japaric (japaric@208B24D4.A23A5F6C.E5B504CC.IP)
[17:23:16] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[17:23:21] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[17:23:31] *** Quits: jensnockert (jensnocker@moz-A383D2B9.mobileonline.telia.com) (Ping timeout)
[17:23:58] <doomlord_> do you think they'd accept a helper function in the stdlib to create a void* and a u8* from anything in one step, that might ease the pain
[17:24:36] <eddyb> doomlord_: why are you doing things like that anyway?
[17:24:46] <eddyb> it would have to be unsafe anyways
[17:24:53] <doomlord_> dealing with pixel formats . and yes, this is for unsafe.
[17:25:01] <doomlord_> rust is capable of replacing C
[17:25:17] <eddyb> but not by using tons of unsafe
[17:25:28] *** Joins: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP)
[17:26:08] <doomlord_> there are parts where you need to drop down to unsafe. dealing with DMA, dealing with compressed image formats
[17:26:22] <doomlord_> one job a recruiter came to me with was a new video compression algorithm
[17:26:55] <eddyb> my PNG decoder is almost fully safe
[17:27:02] <doomlord_> 'replacing C' doesn't mean getting rid of unsafe - it means being as good as C for unsafe code
[17:27:08] *** Joins: Rym (y@5EB54095.57AE353C.8772DA20.IP)
[17:27:30] <doomlord_> you are right the vast majority of software can be safe
[17:27:43] <eddyb> there's some issues with LLVM's optimizations (which we might need a superoptimizer for, sadly), and a few safe patterns hardcoded as unsafe code, but it can technically all be safe
[17:27:53] <doomlord_> but C continues to be used in niches where unsafe is essential ... dealing with hardware .. DMA that doesn't speak your language
[17:27:53] *** Quits: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP) (Ping timeout)
[17:28:09] <eddyb> you can abstract over DMA
[17:28:27] <doomlord_> yes, but actually writing that in the first place.. someone's got to do it
[17:28:35] <doomlord_> once you have the abstractions, great :)
[17:28:46] <eddyb> hence, you should only write unsafe code once
[17:28:58] <eddyb> and as such, you don't need to make it simple
[17:29:03] <kimundi> doomlord_: The problem is that even if you cast a &T to a *Void, the restrictions of the original &T still need to apply to the *Void to remain memory safe. So you don't win anything, on the contrary you now need to manually upholds these invariants. So, you should use &T itself as deeply as possible, even in unsafe code.
[17:29:04] <eddyb> you just need to make it hard to get wrong
[17:29:18] <doomlord_> but the cast gets done...
[17:29:29] <doomlord_> you're making it harder to write the tests and debug code
[17:30:05] <eddyb> that implies you have a larger unsafe footprint than you should
[17:30:09] <kimundi> doomlord_: But easier to reason about the source
[17:30:32] <doomlord_> i dont see how padding things out so far does that :)
[17:30:43] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[17:31:35] <eddyb> nmatsakis: maybe we should add a Pod kind after we rename Pod to Copy
[17:32:04] <eddyb> nmatsakis: POD could mean "access to byte representation is safe"
[17:32:05] <edwardw> Pod -> Copy? Where does that come from?
[17:32:16] <eddyb> edwardw: I've seen it thrown around
[17:32:17] *** Joins: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP)
[17:32:22] <o11c> eww
[17:32:24] *** Joins: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP)
[17:32:24] <eibwen> eddyb: like allowing Pod be safely initialized with zeroes then?
[17:32:29] <eddyb> my bad if it's not official
[17:32:32] <eddyb> eibwen: yupp
[17:32:37] <eibwen> that would be nice
[17:32:44] <eddyb> also reinterpreting
[17:33:08] <kimundi> `&T as *T as *U` should be verbose, because you're explicitly breaking two different aspects of the typesystem.
[17:33:11] <eibwen> that would allow some optimizations for vectors, as pages from the OS are zeroed when given out to the program
[17:33:22] <doomlord_> but you're going to do it anyway
[17:33:34] <fredy> kimundi: FYI https://github.com/mozilla/rust/issues/13081
[17:33:42] <eddyb> struct RGB(u8, u8, u8); is POD by the definition I'm toying with
[17:33:43] <kimundi> So, requiring each break to have a separate cast makes you think more about it, and trying to minimze such cases.
[17:33:59] <doomlord_> i dont have a choice when i'm using C libraries
[17:34:09] <doomlord_> i can't minimize it
[17:34:10] *** Quits: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP) (Ping timeout)
[17:34:13] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[17:34:13] <kimundi> fredy: Its not precedence
[17:34:42] <fredy> kimundi: it looks like that... I mean if you use parenthesis works fine :S
[17:34:48] *** Quits: janra (Janus@1CDC5701.A48867D7.52E4E107.IP) (Connection reset by peer)
[17:34:52] <eddyb> fredy: it's just eager parsing
[17:34:56] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[17:35:00] <doomlord_> sony aren't going to port libgxm libgcm to rust any time soon :)
[17:35:03] <eddyb> fredy: `as` parses a type after it
[17:35:15] <eddyb> fredy: you can't backtrack
[17:35:37] <kimundi> fredy: Its a grammar mismatch, not precedence. Precedence would be if it parses correctly, but has a unexpected result.
[17:35:44] *** Parts: leowoe (Leo@moz-72D47201.dclient.hispeed.ch) (PONG :concrete.mozilla.org)
[17:35:55] <fredy> I see... any suggestion for the title?
[17:36:03] <eddyb> it's not a bug, and we already have an issue for the error
[17:36:15] <eddyb> kimundi: I suggest we close as a dupe of #11962
[17:36:46] <eddyb> that is, if you have the powers
[17:36:54] <kimundi> I have no power
[17:36:59] <eddyb> aww :(
[17:37:36] <eddyb> then fredy will have to close it :P
[17:37:52] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:38:19] <kimundi> doomlord_: I understand where you're coming from, but I don't think making it easier to break the typesystem even in unsafe code is the solution... :(
[17:38:22] <fredy> eddyb: np... but the solution will be just a better msg from the compiler as 11962 suggests or a change in the compiler?
[17:38:58] <eddyb> fredy: better error message *or* (as kimundi mentioned) removing as (which might happen at one point, but unlikely before CTFE)
[17:39:00] *** Quits: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net) (Ping timeout)
[17:39:13] <eddyb> fredy: the Rust parser will never backtrace
[17:39:57] <kimundi> fredy: The only change in the compiler that would make that message not happen would be removing, or changing as to always require parenthesis (Which would make doomlord_ even sadder about it ;))
[17:40:01] *** Joins: pepp (Mibbit@moz-A17B47F9.net.upcbroadband.cz)
[17:40:07] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:40:12] <eddyb> haha
[17:40:55] *** Joins: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP)
[17:41:10] *** Joins: gwty_ (gwtypc@3CAC4C72.A9D442CE.49FF672.IP)
[17:41:14] <pepp> hello, how can I get length of &[u8] ?
[17:41:25] <eddyb> .len()
[17:41:36] *** Quits: StarLight (StarLight@1BEE9A32.4B616D14.F1EF1E39.IP) (Ping timeout)
[17:41:38] <pepp> thanks
[17:41:43] <kimundi> doomlord_: I think where its more leading to is a specified layout and semantic of rust types, so that you could for example declare a ffi function that takes a *T as taking &T and it would be correct if the function itself is correct.
[17:42:19] *** Joins: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net)
[17:42:25] <Boreeas> That is one hell of a confusing error message
[17:42:46] <kimundi> doomlord_: And abstractions about techniques using void pointers that can be used instead of manually managing them.
[17:43:13] <fredy> I see, unfortunately I have no way to close the issue I opened... the only thing I can do it to change the title...
[17:43:23] <Boreeas> "configure: error: need file" doesn't mean that a file is missing, but that the program "file" is missing. That took way too long to figure out
[17:43:37] <eddyb> fredy: is there no close button at the bottom?
[17:44:02] <eddyb> fredy: oh, weird, I didn't realize taht was the case
[17:44:02] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[17:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:44:14] *** Joins: Blub\0 (wry@620605B3.71150E1A.237AE2BA.IP)
[17:44:22] <eddyb> Boreeas: maybe because it never happened on an unix system :P
[17:44:38] <Boreeas> eddyb: The joys of compiling on mingw
[17:44:39] *** Quits: Blub\w (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[17:44:49] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[17:44:49] <eddyb> Boreeas: you should open an issue so it gets fixed
[17:44:50] <fredy> eddyb: oops I didn't notice it :/
[17:45:39] <eddyb> fredy: does it work? I see a "Close" button, but I thought it wasn't the right thing. maybe it is :D?
[17:45:57] *** Joins: StarLight (StarLight@moz-79597C94.dynamic.avangarddsl.ru)
[17:46:26] <fredy> eddyb: done :D
[17:46:36] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:46:54] *** Quits: gwty_ (gwtypc@3CAC4C72.A9D442CE.49FF672.IP) (Client exited)
[17:47:00] <eddyb> fredy: thanks. feel free to comment on the original or subscribe to it
[17:47:29] <Boreeas> eddyb: An issue for what? Clearer error messages?
[17:47:46] <eddyb> Boreeas: yeah. I think brson was fiddling with the configure today
[17:47:47] <fredy> eddyb: kimundi thanks for you help :)
[17:47:49] <fredy> your*
[17:48:14] <eddyb> fredy: we could probably pass some context along in type parsing so we can tell we're in the RHS of as
[17:49:19] * o11c mumbles that this wouldn't happen of [] were used for templates
[17:49:50] <eddyb> o11c: the errors would be different, not non-existent
[17:50:01] <eddyb> and you'd still need extra :: in paths
[17:50:18] <eddyb> fredy: and show a note on the as expression (starting from the LHS of as, up until - but not including - the unexpected token) when there's such an error
[17:50:18] *** Quits: Zorbtar (e@4E08B4BB.E6DBD463.72ECBEEF.IP) (Quit: leaving)
[17:50:47] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[17:50:54] <eddyb> rusti: foo as int < a
[17:50:54] -rusti- <anon>:17:5: 17:6 error: expected `,` but found `}`
[17:50:54] -rusti- <anon>:17     };
[17:50:54] -rusti-               ^
[17:50:54] -rusti- application terminated with error code 101
[17:50:59] <eddyb> rusti: foo as int < a > b
[17:50:59] -rusti- <anon>:16:26: 16:27 error: expected one of `;`, `}` but found `b`
[17:51:00] -rusti- <anon>:16         foo as int < a > b
[17:51:00] -rusti-                                    ^
[17:51:00] -rusti- application terminated with error code 101
[17:51:23] <eddyb> fredy: ^^
[17:51:32] <eddyb> rusti: let x: Foo<int><bool>;
[17:51:33] -rusti- <anon>:16:24: 16:25 error: expected `;` but found `<`
[17:51:33] -rusti- <anon>:16         let x: Foo<int><bool>;
[17:51:33] -rusti-                                  ^
[17:51:33] -rusti- application terminated with error code 101
[17:51:54] <o11c> eddyb: no, because [ is not a binary operator
[17:52:20] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[17:52:25] <eddyb> o11c: that's not the main issue though, just a minor annoyance
[17:52:39] <o11c> people *expect* [ to have the tightest bounds of anything
[17:52:44] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[17:52:51] <o11c> < has loose bounds
[17:52:58] <eddyb> rusti: let Vec = [0]; let int = 0; Vec[int]
[17:52:59] -rusti- <anon>:16:13: 16:16 warning: variable names should start with a lowercase character, #[warn(uppercase_variables)] on by default
[17:52:59] -rusti- <anon>:16         let Vec = [0]; let int = 0; Vec[int]
[17:52:59] -rusti-                       ^~~
[17:52:59] -rusti- 0
[17:53:10] <eddyb> that's a valid expression right now
[17:53:26] *** Joins: samx (sami@moz-D9F3E0AE.pp.htv.fi)
[17:53:40] <eddyb> rusti: let foo = [||]; let int = 0; foo[int]()
[17:53:41] -rusti- <anon>:16:22: 16:23 error: unexpected token: `]`
[17:53:41] -rusti- <anon>:16         let foo = [||]; let int = 0; foo[int]()
[17:53:41] -rusti-                                ^
[17:53:41] -rusti- application terminated with error code 101
[17:53:43] *** Quits: samx (sami@moz-D9F3E0AE.pp.htv.fi) (Quit: This computer has gone to sleep)
[17:53:47] <eddyb> rusti: let foo = [||{}]; let int = 0; foo[int]()
[17:53:48] -rusti- ()
[17:54:16] <eddyb> how can you tell between that and generic type params on a foo function?
[17:54:32] <o11c> yes, you still need the :: in cases you currently need it
[17:54:44] <eddyb> which solves exactly 1 (one) parser error
[17:54:59] <o11c> but [] is *so* much nicer when it comes to *expectations*
[17:55:00] <eddyb> without shorthening any Rust code that compiles today
[17:55:17] <kimundi> o11c: Whose expectations?
[17:55:22] <eddyb> o11c: [] would work in C++, not in Rust
[17:55:29] <o11c> programmer expectations
[17:55:34] <eddyb> there it would actually solve the ridiculous <> issues
[17:55:46] <eddyb> they have it tough, "typename" instead of "::"
[17:55:53] *** Joins: kori (kori@moz-1B20C491.dynamic.adsl.gvt.net.br)
[17:55:59] <kimundi> o11c: I reject your universal quantification. :P
[17:56:13] <o11c> it's existential
[17:56:19] <kori> Any progress on Rust for FreeBSD?
[17:56:53] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[17:57:01] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[17:57:04] <o11c> (but a significant existence)
[17:58:13] <o11c> honestly, whenever I write Rust, it is just so much of a *relief* to go back to C++ - even though it has problems, it doesn't try to enforce purity and take away usefulness
[17:58:55] <Leo`> Hum, the MRItem variant of MacResult represents a single Item. is there a way to make the result of the expansion of a syntax extension several items ? Other than using MRAny, which allows the syntax extension to be invoked anywhere :/
[17:59:17] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:59:22] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[17:59:26] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Ping timeout)
[17:59:26] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[17:59:44] <eddyb> Leo`: isn't it SmallVec<@Item>?
[17:59:54] <Leo`> no it's @Item
[17:59:58] <eddyb> :/
[18:00:08] <eddyb> then we only used SmallVec for Stmt?
[18:00:28] *** Joins: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no)
[18:00:28] <Leo`> MRAny is a AnyMacro, which can implement a make_items() function returning a SmallVec<@Item>
[18:00:38] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[18:00:39] <Leo`> but MRItem is just an @Item
[18:00:54] <eddyb> Leo`: is MRStmt SmallVec<@Stmt>?
[18:01:01] <Leo`> huummm
[18:01:07] <eddyb> if it exists
[18:01:19] <Leo`> no, it doesn't
[18:01:21] <Leo`> unfortunately
[18:01:25] <Leo`> xD
[18:01:26] *** Quits: tyna (liadon@moz-BB1BAD9A.dynamic.chello.pl) (Ping timeout)
[18:01:37] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:01:43] <bvssvni> the chain macro now supports implicit else https://gist.github.com/bvssvni/9674632
[18:01:55] <eddyb> still, you can probably make MRItem have SmallVec<@Item>, as long as the refactoring required to make that work isn't ridiculous
[18:02:39] <eddyb> bvssvni: Default::default() or what?
[18:03:02] <bvssvni> eddyb: it uses the failed matching per arm
[18:03:14] <bvssvni> eddyb: in case of Result, it's usually the Err part
[18:03:33] <eddyb> ah okay
[18:05:18] *** Joins: wting (wting@E31B3884.E538DA90.20F09BA6.IP)
[18:05:19] <Leo`> eddyb: hm
[18:05:30] <Leo`> I think i'll use MRAny ><
[18:06:07] <eddyb> Leo`: I may make that the only way to write macros
[18:06:11] <eddyb> well, in a different way
[18:06:26] <Leo`> ?
[18:06:30] <Leo`> anyway
[18:06:31] <eddyb> instead of a function producing a MacroResult, you'd have a trait with various methods
[18:07:08] *** Quits: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru) (Quit: Leaving.)
[18:07:10] <eddyb> so you could have a macro that does different things in different contexts without having to deal with something like MRAny and its temporary allocation
[18:07:14] <Leo`> why does libsyntax only invokes make_stmt() when the macro is invoked in a stmt context, for example in a function ?
[18:07:23] <Leo`> it could also produce items
[18:07:29] <Leo`> some items are allowed inside a function
[18:07:36] <eddyb> s/some/all
[18:07:40] <Leo`> yes
[18:07:41] <eddyb> Leo`: those are StmtItem *AFAIK*
[18:07:48] <Leo`> oh
[18:07:49] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[18:07:50] <Leo`> ok
[18:08:04] <Leo`> maybe i'll do that then
[18:08:06] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[18:08:26] <Leo`> since my macro could be invoked either in Item or "StmtItem" position
[18:09:21] <eddyb> the macro's default expand_into_stmt method should try first expand_into_expr, if the returns Err, it can try expand_into_item. the expr/item methods would error by default
[18:09:37] *** Joins: leowoe (Leo@moz-72D47201.dclient.hispeed.ch)
[18:09:40] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[18:09:46] <eddyb> you should be able to get much better patterns with that
[18:09:49] *** Quits: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru) (Ping timeout)
[18:09:59] <eddyb> and it can easily be expanded to allow type macros
[18:10:07] <eddyb> aatch would love to use that for simd!
[18:12:42] <Leo`> yeah
[18:12:52] <Leo`> that would be cool
[18:12:54] <Leo`> what's simd ?
[18:13:10] <Leo`> simd!*
[18:13:14] <eddyb> Leo`: single instruction multiple data
[18:13:24] <eddyb> https://en.wikipedia.org/wiki/SIMD
[18:13:38] <eddyb> Leo`: the macro would construct special types and expressions
[18:14:02] <eddyb> simd![f64, ..4] (type) and simd![0, 1, 0] (expr)
[18:14:03] <Leo`> huh yes I know SIMD but
[18:14:08] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[18:14:13] <Leo`> hum
[18:14:28] <eddyb> aatch actually implemented shuffling and it optimizes very well
[18:14:30] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[18:14:37] <Leo`> cool
[18:14:54] <eddyb> cross product: u.yzx * v.zxy - u.zxy * v.yzx
[18:16:18] <doomlord_> can the compiler figure out that shuffle ?
[18:16:50] <eddyb> doomlord_: hmm?
[18:17:33] <doomlord_> just curious what this refers to seeing some buzzwords that caught my interest above :)
[18:18:08] <eddyb> each of those "field accesses" is a shuffle
[18:18:46] <eddyb> and each shuffle results in a single LLVM instruction working on LLVM SIMD vectors (and not arrays)
[18:19:19] <doomlord_> so basically are you saying it will actually generate shuffle instructions from appropriate code that just references those componnets that way
[18:19:46] <eddyb> yes
[18:19:58] <eddyb> like in OpenCL
[18:20:30] *** Joins: RustProof (Mibbit@moz-DD7424AD.w83-202.abo.wanadoo.fr)
[18:21:04] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[18:21:06] <RustProof> What's the meaning of "cannot call a method whose type contain a self-type through an object" ?
[18:21:23] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:21:29] <eddyb> RustProof: what do you want to call?
[18:21:50] <RustProof> I have a struct containing a struct and i want to clone it
[18:22:00] <RustProof> (the struct contained)
[18:22:08] <eddyb> (Self in a trait refers to the type that implements the trait. when you have a trait object, you *can't know* what type implements the trait)
[18:22:17] <eddyb> RustProof: why do you use a trait object?
[18:22:24] <eddyb> as in, do you have a reason, or could it be generic?
[18:22:27] <kimundi> Hm, how can I easily shrink a lifetime?
[18:22:39] <eddyb> kimundi: by passing it to a function?
[18:22:50] <kimundi> Get a local reference to a static value to be only valid locally
[18:23:10] <kimundi> right, if I make a function.. yeah
[18:23:20] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[18:23:20] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:23:22] <eddyb> kimundi: like TaskLocal<T> {priv r: &'static T} and impl Deref?
[18:23:27] <RustProof> I want the object to implement functions and i don't care how
[18:23:44] <eddyb> RustProof: can you use a generic instead?
[18:23:52] <eddyb> as in, can the type be known at compile time?
[18:24:06] <kimundi> eddyb: Heh, now thats a elaborate solution ;)
[18:24:24] <RustProof> Not easily but i can try
[18:24:24] <eddyb> Deref will restrict it to its own lifetime
[18:24:54] <eddyb> kimundi: the only way to get a 'static from that is to put it into a static mut, which is unsafe (so a transmute would also work)
[18:25:19] <eddyb> kimundi: TaskLocal would also not be Send/Share (which &'static is by default)
[18:25:29] <eddyb> kimundi: keep in mind that returning a value doesn't perform coercions
[18:25:39] <eddyb> kimundi: (so you might have to do &*x to reborrow)
[18:25:58] <eddyb> kimundi: and putting a value in a structure also doesn't perform any kind of shortening)
[18:26:01] <RustProof> maybe I can add a clone() function in the trait to call the good clone() ??
[18:26:02] <eddyb> s/)$//
[18:26:04] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Quit: Leaving.)
[18:26:12] *** Joins: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[18:26:13] <eddyb> RustProof: generic >> trait object
[18:26:19] *** Quits: Doppp (Doppp@ED5E5331.58AB7B93.EE633EE.IP) (Ping timeout)
[18:26:27] <eddyb> RustProof: you should only use a trait object if you really need dynamic types
[18:26:27] <kimundi> aarg
[18:26:57] <kimundi> Could someone please remove this error?  error: obsolete syntax: closure type
[18:27:05] <kimundi> &'a fn(uint) -> uint
[18:27:23] <kimundi> rustc, I actually mean a reference to a function ptr, thank you very much :|
[18:27:41] <eddyb> hehe
[18:27:50] <eddyb> we should make that actually work
[18:27:57] <eddyb> i.e. the unsized thing
[18:28:23] <kimundi> eddyb: Please do/write a rfc
[18:28:40] * eddyb grows a few hands
[18:29:05] <kimundi> eddyb: I might have found a solution for making dynamically loadable crates safely unloadable, but it requires function pointers that can be chained to a non-static lifetime ;)
[18:29:19] <eddyb> oh yeah I think I solved that
[18:29:29] <kimundi> how?
[18:29:40] <eddyb> but it's probably just returning &'crate_handle_lifetime T
[18:29:48] <eddyb> kimundi: oh, wait, I know :D
[18:29:54] <kimundi> wait, before the who, what?
[18:30:09] <eddyb> kimundi: it requires serializing type information *with lifetimes*
[18:30:38] <eddyb> why? because it will always be valid to return a &'static from a loaded function if it's from the outer crate etc. etc.
[18:31:00] <eddyb> kimundi: though... this might not work at all. if I remember something useful, I'll tell you
[18:31:13] *** Quits: gizmo (Mibbit@CCBD105C.F076A358.E5977C21.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:31:30] <eddyb> kimundi: but &'a fn is a prerequisite
[18:31:43] <eddyb> (the unsized one)
[18:31:49] <kimundi> eddyb: I think I have found a way to deeply wrap function pointers and all input/output types into handlesm which can be made safe to use.
[18:34:11] <kimundi> fn symbol<'a, fn(..A) -> R>(&'a self) would return a SdoFn<'a, ..A, R> which in turn has a call() method (or later Fn trait impl) that also takes and returns safe wrappers.
[18:34:42] <eddyb> aaaah, the &'static T wrapper trick
[18:34:50] <eddyb> kimundi: yeah, well, get VG
[18:35:02] <kimundi> basically a poster child for associated types: each type has a safely dynamically handle type associated to it.
[18:35:02] <eddyb> VeGetables are good for your health (TM)
[18:36:28] <kimundi> For types like uint the safe handle would just be the self type, but everything that contains functions pointers would contain a refcount that keeps the crate handle alive/or is chained with a lifetime.
[18:38:21] <cmr> Any announcements for TWiR?
[18:39:16] *** Quits: nlminhtl (ignotus@moz-393BCEC.la.net.ua) (Quit: Konversation terminated!)
[18:40:20] <Havvy> The first code block on http://static.rust-lang.org/doc/master/guide-tasks.html has every line but the first indented by 1 more than it needs to be.
[18:40:31] *** Quits: RustProof (Mibbit@moz-DD7424AD.w83-202.abo.wanadoo.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[18:40:54] <cmr> at http://static.rust-lang.org/doc/master/guide-tasks.html#basics ?
[18:40:56] <Havvy> Err, section 3.1
[18:41:09] <Havvy> First code block on section 3.1 at that URL
[18:41:29] <cmr> you can click on section headers to get a link to them :)
[18:41:42] <Havvy> http://static.rust-lang.org/doc/master/guide-tasks.html#creating-a-task-with-a-bi-directional-communication-path
[18:42:09] *** Joins: Doppp (Doppp@ED5E5331.58AB7B93.EE633EE.IP)
[18:42:26] <Havvy> I'll send a PR fixing it, but which repo is it in?  mozilla/rust or a different one?
[18:42:44] <eddyb> cmr: announcements? like "I shipped Deref with bugs"?
[18:43:33] <cmr> that's not an announcement :P
[18:43:37] <cmr> Havvy: everything is in mozilla/rust
[18:43:40] <cmr> Havvy: src/doc/guide-tasks.md
[18:44:18] <Havvy> Alright. Time for my second trivial PR.
[18:44:26] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:46:03] *** Quits: Doppp (Doppp@ED5E5331.58AB7B93.EE633EE.IP) (Ping timeout)
[18:46:13] <kimundi> eddyb: do you know of any trick to fake arbitrary lifetime bounds like fn<'a, T: 'a> ?
[18:46:36] <eddyb> fake? no. they should just be implemented
[18:46:41] *** Joins: q66 (q66@moz-F9A4BCC3.range109-154.btcentralplus.com)
[18:46:46] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:47:12] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[18:47:14] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[18:47:59] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[18:49:21] <eddyb> cmr: wow, just 1.6GB used RAM in the LLVM flatline with jemalloc
[18:49:25] <kimundi> eddyb: Hm, I have the feeling that my sketch has quite a few variance problems:https://gist.github.com/Kimundi/9712300
[18:49:34] <pepp> how can I fix unresolved name std::vec::append ?  (tried use std::vec; use std::vec::append; )
[18:50:05] <kimundi> pepp: Did you update recently?
[18:50:07] <eddyb> it may be Vec::append
[18:50:18] <cmr> don't use append.
[18:50:20] <cmr> use extend
[18:50:21] <kimundi> the vec module got renamed to the slice module
[18:50:22] <cmr> or anything better
[18:50:24] <pepp> installed nightly today
[18:50:32] <kimundi> yeah, that explains it
[18:50:36] <eddyb> rusti: ::std::vec::Vec::append
[18:50:37] -rusti- <anon>:16:9: 16:32 error: unresolved name `std::vec::Vec::append`.
[18:50:37] -rusti- <anon>:16         ::std::vec::Vec::append
[18:50:37] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~
[18:50:37] -rusti- error: aborting due to previous error
[18:50:37] -rusti- application terminated with error code 101
[18:50:40] <eddyb> rusti: ::std::vec::append
[18:50:41] -rusti- <anon>:16:9: 16:27 error: cannot determine a type for this bounded type parameter: unconstrained type
[18:50:41] -rusti- <anon>:16         ::std::vec::append
[18:50:41] -rusti-                   ^~~~~~~~~~~~~~~~~~
[18:50:41] *** concrete.mozilla.org sets mode: +M 
[18:50:43] -rusti- application terminated with error code 101
[18:50:47] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[18:50:52] <eddyb> was it removed or something?
[18:50:57] <eddyb> rusti: ::std::vec::Vec::new::<int>
[18:50:58] <cmr> rusti: date
[18:50:58] -rusti- pastebinned 11 lines of output: http://sprunge.us/jJaV
[18:50:59] -rusti- <anon>:16:9: 16:13 error: unresolved name `date`.
[18:50:59] -rusti- <anon>:16         date
[18:50:59] -rusti-                   ^~~~
[18:50:59] -rusti- error: aborting due to previous error
[18:50:59] -rusti- application terminated with error code 101
[18:51:03] <eddyb> rusti: version
[18:51:04] -rusti- rustc 0.10-pre (3e3a3cf 2014-03-21 16:41:48 -0700)
[18:51:22] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[18:51:35] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Client exited)
[18:51:46] <Havvy> Actually, looking at the source for that script, there's a commented out level of indentation.
[18:52:01] <eddyb> a wrapper?
[18:52:02] <Havvy> (The main function)
[18:52:15] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[18:52:18] <eddyb> hehe, yeah, not sure what we're supposed to do with that
[18:52:18] <Havvy> Yeah.
[18:52:23] <eddyb> kimundi: you have to use markers
[18:52:32] <eddyb> kimundi: ContravariantLifetime<'a>
[18:52:39] <eddyb> kimundi: (which is what &'a has)
[18:52:59] <cmr> Havvy: just remove the indentation for the part that's visible.
[18:52:59] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[18:53:05] <cmr> it needs to look good in the docs, not the source
[18:53:12] <Havvy> cmr:  Kk.
[18:53:56] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[18:54:24] *** Joins: alkino_ (alkino@moz-AAF51602.w92-151.abo.wanadoo.fr)
[18:55:02] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[18:55:44] *** concrete.mozilla.org sets mode: -M 
[18:56:04] <kimundi> eddyb: Just adding one marker doesn'T fix it: https://gist.github.com/Kimundi/9712300
[18:56:17] <Havvy> https://github.com/mozilla/rust/pull/13084
[18:56:45] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[18:56:55] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[18:57:07] <eddyb> kimundi: you don't have 'a in the output
[18:57:24] <pepp> according to reference for master, std::vec::append is what I want ... I have Vec<u8> and I want to append items from &[u8]
[18:57:33] <kimundi> eddyb: what do you mean with output?
[18:57:35] <cmr> pepp: use extend.
[18:57:36] <eddyb> kimundi: H
[18:57:42] <cmr> v.extend(u.iter())
[18:57:52] <kimundi> ah, wait
[18:57:56] <kimundi> how did this...
[18:57:59] <cmr> append reallocates everything
[18:58:08] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[18:58:08] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Quit: james4k)
[18:58:13] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[18:58:20] <pepp> cmr: I tried it ... it says mismatched types
[18:58:26] <eddyb> pepp: &mut u.iter()
[18:59:01] <eddyb> kimundi: pretty sure you have to implement the trait on H
[18:59:10] *** Quits: Rym (y@5EB54095.57AE353C.8772DA20.IP) (Ping timeout)
[18:59:11] <pepp> works, thank you
[18:59:49] <kimundi> eddyb: No, the way it is is correct. The trait means I get H as fake-assoziated type of the trait impl for T
[18:59:59] *** Quits: skade (skade@B4A5FE21.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:00:05] <kimundi> eddyb: However, how to make it use a lifetime....
[19:00:20] *** Joins: Rym (y@5EB54095.57AE353C.8772DA20.IP)
[19:00:29] <pepp> I am curious - shouldn't be append more efficient than extend? it knows how many items will be inserted
[19:00:39] <eddyb> pepp: so does extend
[19:01:00] <eddyb> pepp: iterators have a size hint
[19:01:31] <pepp> ok, thanks
[19:01:47] <eddyb> kimundi: you may be able to debug this by taking the crate in a function (with a borrowed lifetime)
[19:02:30] <eddyb> kimundi: actually, it's as simple as fn test<'foo>(krate: &'a Crate) -> SdoFn<'static, A, R> {...}
[19:02:39] <eddyb> kimundi: and 'foo instead of 'a, obviously
[19:02:52] *** Joins: Florob (Florob@moz-39532932.de)
[19:03:10] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[19:03:22] <eddyb> kimundi: the thing with 'foo is that you can trigger a borrowck error (I think. or a regionck one) to get a type error, so you can see whether the lifetime shows up
[19:03:58] <eddyb> kimundi: hmm, I know :D
[19:04:14] <eddyb> kimundi: take a &'a Crate in Sdo::wrap
[19:04:54] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:05:10] *** Quits: Anupkumar (uid16774@moz-A42E5B7B.irccloud.com) (Quit: Connection closed for inactivity)
[19:06:41] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:07:22] <kimundi> eddyb: Hm, I'm trying but now I don't know how to impl call...
[19:07:30] *** Joins: seich_ (seich@E0DBF039.6AE14CEC.624CE61B.IP)
[19:07:39] <eddyb> kimundi: call doesn't need anything special
[19:07:54] *** Quits: Ferreus_ (ferreus@moz-7AAE4876.lsn.wtnet.de) (Ping timeout)
[19:07:55] <eddyb> kimundi: the m = f; assignment is what would trigger the error
[19:08:11] <eddyb> rusti: let m; {let x = 0; m = &x;} *m
[19:08:12] -rusti- pastebinned 12 lines of output: http://sprunge.us/VIHJ
[19:08:21] *** Joins: onelson (owen@18CF7301.95770028.5B6BFE7D.IP)
[19:08:23] <kimundi> eddyb: No, I mean with an additional argument to wrap() I can can not implement the call() method for SdoFn
[19:08:25] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[19:08:39] <eddyb> kimundi: oh I see :/
[19:08:49] <kimundi> Unless I store the the &'a Crate inside it... which is probably what you wanted
[19:08:53] <eddyb> kimundi: you just... need to restrict that lifetime dammit
[19:08:54] *** Quits: seich_ (seich@E0DBF039.6AE14CEC.624CE61B.IP) (Quit: Lingo - http://www.lingoirc.com)
[19:08:56] <eddyb> nope, I didn't want that
[19:09:03] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[19:09:18] <eddyb> kimundi: haha I just realized you have a Monad
[19:09:30] <kimundi> eddyb: Realized that half an hour ago ;)
[19:09:30] *** Joins: tca (sid17279@moz-A42E5B7B.irccloud.com)
[19:09:41] <kimundi> eddyb: would passing ContravariantLifetime<'a> instead of &'a Crate work?
[19:09:51] <eddyb> try it out
[19:10:08] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[19:10:23] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[19:13:13] <Havvy> Hmm, according to Ohlol, more man years have been put into Rust than NixOS.
[19:13:30] <eddyb> what is Nix written in?
[19:14:38] <kimundi> eddyb: Success! https://gist.github.com/Kimundi/9712300
[19:14:56] <bvssvni> are somebody working on PNG library in pure Rust?
[19:14:57] <eddyb> kimundi: what's the error?
[19:14:58] <Havvy> Nix is its own language.
[19:15:07] <kimundi> At least, it now gives a lifetime error that disappears if I remove the code that I think causes it (the spans are very vague)
[19:15:11] <Havvy> So probably C or C++.
[19:15:15] <eddyb> bvssvni: I am. kinda
[19:15:20] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[19:15:32] <bvssvni> eddyb: cool!
[19:16:06] <bvssvni> eddyb: link?
[19:16:15] <kimundi> eddyb: Updated the gist with the exact error output of rustc
[19:16:19] <eddyb> bvssvni: search for cmr and TEMP on github
[19:16:32] <eddyb> Havvy: found it https://github.com/NixOS/nix
[19:17:07] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[19:17:14] <eddyb> Havvy: a clean flavor of C++
[19:17:15] *** Quits: mye (mye@moz-52E25131.dip0.t-ipconnect.de) (Quit: sleep message)
[19:17:27] <eddyb> Havvy: it almost looks machine translatable to Rust
[19:17:55] <kimundi> I wish I could write compile-fail tests inline with the crate code...
[19:18:56] <Havvy> eddyb:  But would they be willing to switch?
[19:18:57] <o11c> what's a clean flavor of C++ ?
[19:19:18] <Havvy> o11c:  Apparently this:  https://github.com/NixOS/nix/blob/master/src/libexpr/common-opts.cc
[19:21:04] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[19:22:13] <eddyb> o11c: it looks well formed
[19:23:17] <bvssvni> eddyb: is it usable?
[19:23:27] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[19:23:47] <eddyb> bvssvni: what would you need it for?
[19:24:04] <bvssvni> eddyb: generating PNG from arrays
[19:24:07] *** Joins: mib_niaiwi (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[19:24:29] <bvssvni> eddyb: just for fun
[19:24:40] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[19:24:55] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[19:25:02] <eddyb> bvssvni: oh, you'd have to use mozilla-servo/rust-png for that
[19:25:08] <eddyb> bvssvni: mine is only a decoder
[19:25:13] <bvssvni> ah
[19:25:30] <bvssvni> I was thinking about writing a raw PNG encoder if that is possible
[19:25:39] <eddyb> it's pretty easy
[19:25:55] <eddyb> just use the noop filter (a 0 byte before each row) 
[19:26:06] <eddyb> and "compress" using the uncompressed DEFLATE block
[19:26:07] *** Quits: mib_niaiwi (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:26:27] * bvssvni writing this down
[19:26:49] <eddyb> I still have to clean it up, but I've been working on other things until servo is all updated (and I can actually compile it with rust master)
[19:27:11] <eddyb> bvssvni: you can take a look at the decoder to figure out what you need to write around the actual data
[19:27:53] <eddyb> I have a structure for the IHDR block
[19:28:00] <bvssvni> I have looked at the RFC spec and translated some CRC code
[19:28:10] <eddyb> why CRC, of all things?
[19:28:19] *** Joins: Ferreus_ (ferreus@moz-7F844611.lsn.wtnet.de)
[19:28:20] <eddyb> ahh, yeah, you have to do that when you encode :(
[19:28:23] <burntsushi> does anyone know why read_seq/read_seq_elt are used instead of read_tuple in the tuple implementations for the Decodable trait?
[19:28:30] <bvssvni> it's the chunk thing
[19:28:54] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[19:28:55] <eddyb> bvssvni: yeah, you don't actually need to care for that when you decode :P
[19:28:56] *** Joins: pongad (pongad@moz-7E8AAD2E.res.gatech.edu)
[19:29:10] <bvssvni> eddyb: is rest of it straight forward?
[19:29:23] <eddyb> the DEFLATE/zlib stuff is a bit tricky
[19:29:27] *** Parts: kori (kori@moz-1B20C491.dynamic.adsl.gvt.net.br) (WeeChat 0.4.3)
[19:29:30] <eddyb> but there's no algorithms, just a data structure
[19:29:40] <eddyb> (if you do it completely uncompressed)
[19:29:52] <bvssvni> eddyb: I'll see how far I get :)
[19:29:57] *** Joins: m-r-r (m-r-r@DA163170.3FD22A6B.CF651168.IP)
[19:30:19] <burntsushi> actually, it doesn't look like read_tuple is used at all...
[19:30:47] *** Quits: pongad (pongad@moz-7E8AAD2E.res.gatech.edu) (Quit: Leaving)
[19:30:54] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[19:30:59] *** Joins: pongad (pongad@moz-7E8AAD2E.res.gatech.edu)
[19:33:01] *** Joins: tyna (liadon@moz-BB1BAD9A.dynamic.chello.pl)
[19:34:57] *** Quits: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[19:36:06] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[19:36:09] <kimundi> eddyb: Unless I find any other holes, this dynamic loadable lib interface excites me. :) - it means every trait object you want to use it with needs a custom wrapper, but at its safe (At least, I hope its safe)
[19:37:05] <kimundi> hm... but I wonder if I need to make all wrappers contain the marker type...
[19:39:42] *** Quits: not_gavin (gavin@gavinsharp.com) (Input/output error)
[19:40:00] *** Joins: not_gavin (gavin@gavinsharp.com)
[19:41:26] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[19:42:10] *** Quits: cschneid (cschneid@moz-621ACC77.hlrn.qwest.net) (Client exited)
[19:44:24] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:45:47] *** Quits: murph (murph@moz-769F6638.oracle.com) (Broken pipe)
[19:45:58] *** Joins: murph (murph@moz-769F6638.oracle.com)
[19:46:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:46:40] *** Quits: not_gavin (gavin@gavinsharp.com) (Input/output error)
[19:46:59] *** Joins: not_gavin (gavin@gavinsharp.com)
[19:48:15] <edwardw> we probably should name the new package manager "true detective"
[19:48:32] *** Joins: jroweboy (jrowe7@moz-B0B6A670.provo.static.broadweavenetworks.net)
[19:48:39] *** Joins: tyoverby (tyoverby@1390DFB8.FBC7597F.11F8506F.IP)
[19:48:55] <edwardw> it'll be fun
[19:49:10] *** Joins: dapz (textual@moz-F958911.hsd1.ca.comcast.net)
[19:49:14] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[19:49:19] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[19:49:31] <earlz> What is somethign that implements Map and can be used for most tasks? 
[19:49:46] <earlz> Apparently there use to be TreeMap, but that doesn't seem to exist anymore
[19:50:02] <edwardw> earlz: in collections crate
[19:50:09] <jroweboy> TreeMap is in the collections crate :)
[19:50:18] <cmr> earlz: there's also HashMap ...
[19:50:23] <edwardw> earlz: http://static.rust-lang.org/doc/master/collections/index.html
[19:50:39] <tyoverby> How can I get a mutable view into a vec?
[19:51:00] <cmr> tyoverby: .mut_slice()
[19:51:09] *** Quits: wting (wting@E31B3884.E538DA90.20F09BA6.IP) (Quit: leaving)
[19:51:24] <cmr> as_mut_slice sorry
[19:51:38] *** Quits: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca) (Ping timeout)
[19:51:50] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[19:51:50] <tyoverby> cmr: that's requiring the elements to implement the Clone trait
[19:52:10] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[19:52:33] *** Joins: wting (wting@E31B3884.E538DA90.20F09BA6.IP)
[19:52:41] <cmr> tyoverby: eh? http://static.rust-lang.org/doc/master/std/vec/struct.Vec.html#method.as_mut_slice
[19:52:43] <tyoverby> I want to be able to modify the original vec through the view
[19:52:58] <cmr> yes, you want as_mut_slice
[19:53:02] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[19:53:27] <pepp> hi, I have problem with the vec::extend once more  ... expected std::iter::Iterator<u8>, but found std::iter::Iterator<&u8>
[19:53:38] *** Quits: earlz (earlz@moz-483E1E31.neo.res.rr.com) (Client exited)
[19:53:38] <pepp> the code is quite short    http://pastebin.com/mLPJkwvh
[19:53:53] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[19:53:56] *** Joins: skade (skade@moz-1EC0F118.pools.arcor-ip.net)
[19:54:16] <jroweboy> tyoverby: you could try get_mut(index) to just change that one index as well. If you are trying to edit all of them there is also mut_iter
[19:54:21] *** Quits: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:54:28] *** Quits: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Ping timeout)
[19:54:38] *** Quits: not_gavin (gavin@gavinsharp.com) (Input/output error)
[19:54:45] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[19:54:56] *** Joins: not_gavin (gavin@gavinsharp.com)
[19:55:01] *** Quits: m-r-r (m-r-r@DA163170.3FD22A6B.CF651168.IP) (Quit: Hi, I'm a quit message virus. Please replace your old line with this line and help me take over the world of IRC.)
[19:55:24] <tyoverby> cmr: still needs Clone `failed to find an implementation of trait std::clone::Clone for Color`
[19:55:59] <cmr> tyoverby: that has to be a different issue.
[19:56:05] <cmr> gist your code and the error message.
[19:56:17] <tyoverby> ok
[19:57:13] <pepp> why would .iter() on &[u8] return std::iter::Iterator<&u8>?
[19:57:37] <cmr> pepp: it doesn't, bue the type it returns implements Iterator<&u8>
[19:57:42] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Quit: 전 이만 갑니다.)
[19:58:11] <tyoverby> cmr: thanks for looking at this - https://gist.github.com/TyOverby/9713305
[19:58:49] <pepp> how can I make it match std::iter::Iterator<u8>?
[19:59:05] <cmr> pepp: .map(|x| *x)
[19:59:09] <kimundi> pepp: Need to map over the iterator to deref each element
[19:59:17] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[19:59:38] <kimundi> In the future you might have a .values() iterator generically implemented that does this automatically.
[19:59:58] <pepp> that sounds like too much magic to just append slice of u8 to a vec of u8 :-(
[20:00:24] <kimundi> pepp: Don'T worry, it'll optimize out :P
[20:00:56] <kimundi> pepp: But anyway, the problem is that .iter() is generically implemented on all &[T], so it can not give you T, only &T, because it doesn't own the elements
[20:01:27] <pepp> that does not worry me, but it's not intuitive so it hurts productivity, therefore adoption and so on
[20:01:45] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[20:02:12] <kimundi> pepp: Actually, .iter() always returns only references in the whole Rust codebase atm.
[20:02:13] *** Quits: not_gavin (gavin@gavinsharp.com) (Input/output error)
[20:02:29] *** Joins: not_gavin (gavin@gavinsharp.com)
[20:02:40] <cmr> tyoverby: yeah it's a different issue.
[20:02:59] <cmr> tyoverby: you're trying to implement DirectView for all types which implement Image<Color>
[20:03:04] <kimundi> The intuitiveness is just a sideffect of Rusts ownership semantic allowing for nothing nicer. :(
[20:03:30] <cmr> tyoverby: and DirectView inherits from View<Color>
[20:03:33] <pepp> the .values would be nice ;-)
[20:03:46] <tyoverby> cmr: ah, yes I see that now.
[20:03:48] <cmr> tyoverby: but View<Color> is only implemented where Color: Clone
[20:03:58] <pepp> now I am going to make the map() work
[20:04:08] <kimundi> pepp: If you want the values directly, you'' need move_iter() atm. Which will consume the datastructure it is defined on in the process.
[20:04:36] <jroweboy> pepp: did you try to use std::vec::append though? It looks like you wanted something to append a slice to a vec http://static.rust-lang.org/doc/master/std/vec/fn.append.html
[20:04:37] <kimundi> Basically, it transforms a container that holds values into a iterator that returns those values one after another
[20:05:04] <kimundi> jroweboy: Wee're trying to remove append and discourage its use, so hush ;)
[20:05:11] <pepp> jroweboy: I tried, I asked, I was told extend is better way :-)
[20:05:26] * jroweboy goes back into hiding
[20:05:31] <jroweboy> oops I didn't know that hahaha
[20:05:48] <kimundi> If the Iterable RFC comes through, it will be `vec.extend(slice.values())`
[20:06:01] <cmr> we don't need Iterable for values
[20:06:01] *** Joins: Guest (textual@3E0487DF.D8252BC.9532F1CE.IP)
[20:06:07] <cmr> just implement it for Vec<T: Pod>
[20:06:22] <kimundi> cmr: Well sure, we can manually implement it atm.
[20:06:53] *** Quits: edwardw (edwardw@861842BE.B4F65FC7.A0A36CCE.IP) (Quit: Leaving...)
[20:07:03] <cmr> tyoverby: https://gist.github.com/cmr/9713430 one that works (on master, at least)
[20:08:57] *** Quits: tcsc (tcsc@moz-5E71BAD9.hsd1.ma.comcast.net) (Quit: bye!)
[20:09:07] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[20:09:15] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:09:31] <tyoverby> cmr: thanks!  I guess I haven't gotten to the tutorial that covers that
[20:09:53] <tyoverby> what is 'a?  
[20:10:09] <cmr> it's a named lifetime parameter.
[20:10:31] <cmr> http://static.rust-lang.org/doc/master/guide-lifetimes.html
[20:10:49] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[20:11:24] <jroweboy> I really wanna define variables in a Trait, but I know I can't. What options do I have if I want to have a struct that the user of my library can extend?
[20:11:36] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:11:55] <cmr> jroweboy: struct ExtendMe<T> { my_field: int, rest: T } perhaps?
[20:12:05] <cmr> and then methods to return &T and &mut T
[20:12:23] *** Joins: chris_st (chris@moz-78317ED0.dc.dc.cox.net)
[20:12:58] <jroweboy> cmr: I've never thought about doing it that way before. Hmm... that just might work :) THanks!
[20:13:46] *** Joins: Ms2ger (Ms2ger@moz-CE3CEBEE.access.telenet.be)
[20:14:14] <chris_st> Hi — trying to learn Rust, but I hit a wall in the tutorial… in section 18.7, it says to “extern crate num;” which won’t compile with the 0.9 version of the compiler… am I out of date?
[20:14:28] <Ms2ger> Yes
[20:14:32] <bjz> yes!
[20:14:32] <o11c> chris_st: use master, not 0.9
[20:14:42] <chris_st> o11c: Thanks!
[20:14:49] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:15:05] <o11c> (that said, there is a separate tutorial for 0.9)
[20:15:12] <o11c> (but *all* the tutorials are wrong)
[20:15:14] *** Quits: tyoverby (tyoverby@1390DFB8.FBC7597F.11F8506F.IP) (Quit: leaving)
[20:15:24] <chris_st> Well I guess that just adds to the challenge :-)
[20:15:55] *** Joins: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP)
[20:16:01] <Havvy> chris_st:  Well, you don't need to rebuild Rust everyday...just once a week or so.
[20:16:11] <Havvy> TWiR will tell you what's changed.
[20:16:20] <chris_st> TWiR?
[20:16:24] <jroweboy> and if you are on ubuntu, there is a PPA you can add to make updating much simpler
[20:16:30] <cmr> (or debian)
[20:16:31] <Havvy> This Week in Rust
[20:16:36] <chris_st> Ah, thanks.
[20:16:43] <cmr> https://github.com/mozilla/rust/wiki/Doc-packages,-editors,-and-other-tools
[20:17:06] <Havvy> Oh yes. You Ubuntu and Debian people have it so easy. >_>
[20:17:39] *** Quits: jdavis (jdavis@moz-1BE8A6A1.hsd1.ca.comcast.net) (Quit: Leaving)
[20:17:44] *** Quits: chris_st (chris@moz-78317ED0.dc.dc.cox.net) (Quit: chris_st)
[20:17:55] <o11c> I use Debian so that I have it easy - it's not a coincidence
[20:18:01] <kimundi> chris_st: Which OS do you use? There are nightlies for ubuntu, arch and windows
[20:18:17] <kimundi> Oh, people said that already
[20:18:47] <o11c> also he left already
[20:18:52] <kimundi> darn
[20:19:14] *** Quits: pongad (pongad@moz-7E8AAD2E.res.gatech.edu) (Quit: Leaving)
[20:21:05] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[20:23:30] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[20:23:45] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[20:24:35] *** Joins: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de)
[20:28:15] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[20:29:14] *** Joins: twi (Adium@23C89A3C.3F466A9D.7562401D.IP)
[20:30:19] <Ms2ger> eddyb, hi :)
[20:31:26] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[20:31:33] *** Quits: leowoe (Leo@moz-72D47201.dclient.hispeed.ch) (Ping timeout)
[20:31:33] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:32:52] *** Joins: EastByte (EastByte@moz-B828DF5B.ewe-ip-backbone.de)
[20:33:03] *** Joins: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net)
[20:33:16] *** Joins: klaus (koz@moz-4486E876.hsd1.wa.comcast.net)
[20:33:23] *** Quits: EastByte_ (EastByte@moz-4D708C0C.ewe-ip-backbone.de) (Ping timeout)
[20:33:23] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:38:45] *** Joins: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca)
[20:38:46] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[20:39:54] *** Quits: jackneill (jackneill@moz-4EE57515.pool.digikabel.hu) (Ping timeout)
[20:40:50] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[20:41:46] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[20:43:00] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[20:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:46:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:49:23] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[20:52:35] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:52:43] *** Quits: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP) (Quit: WeeChat 0.4.1)
[20:53:47] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[20:54:57] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:55:41] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[21:01:03] *** Quits: Rym (y@5EB54095.57AE353C.8772DA20.IP) (Ping timeout)
[21:01:35] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[21:02:10] *** Quits: zootm (calum@moz-150DDDC2.sgyl.cable.virginm.net) (Ping timeout)
[21:03:37] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[21:03:56] *** Quits: Siosm (quassel@moz-9911B053.fr) (Ping timeout)
[21:04:16] *** Quits: Armavica (virgile@moz-AD428ED7.ens.fr) (Quit: Lost terminal)
[21:04:51] *** Joins: Armavica (virgile@moz-AD428ED7.ens.fr)
[21:06:12] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[21:08:31] *** Joins: nlminhtl (ignotus@moz-393BCEC.la.net.ua)
[21:08:35] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[21:08:51] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[21:09:10] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[21:09:53] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[21:10:10] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:10:35] <jmgrosen> unboxed closures would allow us to have heap-owned closures that can be called more than once, right?
[21:10:53] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[21:11:16] <jmgrosen> as opposed to || which can't be put on the heap and proc() that can only be called once
[21:11:27] <cmr> jmgrosen: yes
[21:11:38] <tiffany> I tried posing this question before and didn't get a very useful answer
[21:11:56] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[21:13:02] *** Quits: Ms2ger (Ms2ger@moz-CE3CEBEE.access.telenet.be) (Quit: nn)
[21:13:08] <strcat> jmgrosen: not unboxed closures themselves
[21:13:09] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[21:13:43] <strcat> unboxed closures alone wouldn't added new types to the user-visible type system
[21:14:09] <jmgrosen> strcat: yeah, but it would change today's || to &|| and allow ~||, right?
[21:14:14] <strcat> well, the user-speakable type system ;)
[21:14:18] <strcat> jmgrosen: no
[21:14:42] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:15:02] <strcat> nothing about the current types would change
[21:15:15] <strcat> the only thing that needs to change is the capture semantics of closure literals
[21:15:30] <strcat> needs to be be by-value, not by-ref
[21:15:38] *** Joins: cgaebel (clark@moz-F9D89110.nyc.res.rr.com)
[21:15:47] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[21:16:04] <cgaebel> Is there any way for me to communicate to the rust compiler that I want the lifetime of one variable to be a subset (inclusive) of another lifetime?
[21:16:09] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[21:16:37] <o11c> cgaebel: well, you can do it for *types*
[21:16:39] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[21:16:47] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:16:51] <cgaebel> I want it for lifetimes for fancier arenas.
[21:16:58] <o11c> the second variable has a type that includes the lifetime of the first variable
[21:17:33] <cgaebel> I want to be able to say "anything allocated out of this arena needs be to be destroyed before the arena is destroyed"
[21:17:57] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[21:17:58] <cgaebel> now that I think about it, I think that's a strict subset..
[21:18:25] <jmgrosen> strcat: so how would the user do heap-owned closures, then?
[21:18:42] <strcat> jmgrosen: not part of unboxed closures
[21:18:49] <o11c> cgaebel: just rewrite every rust library out there to add a lifetime for its allocator
[21:19:29] <strcat> jmgrosen: if there was a trait for callables, you'd use that
[21:19:31] *** Joins: Siosm (quassel@moz-9911B053.fr)
[21:19:46] <cgaebel> o11c: I'm afraid I don't understand..
[21:20:28] <strcat> jmgrosen: and DST needs to land
[21:20:42] <strcat> DST + unboxed closures + function trait -> you can make heap closures
[21:20:50] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[21:21:11] *** Joins: ChrisOei (ChrisOei@moz-30D80888.hsd1.ca.comcast.net)
[21:21:14] <strcat> ~UnspeakableUnboxedClosureType as ~Fn<...>
[21:21:31] <jmgrosen> strcat: hm, alright
[21:24:33] *** Quits: tyna (liadon@moz-BB1BAD9A.dynamic.chello.pl) (Quit: Leaving.)
[21:27:17] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[21:28:46] *** Quits: canhtak (canhtak@moz-805AE185.wl.t.ulaval.ca) (Quit: canhtak)
[21:29:21] *** Quits: glandium (glandium@moz-A09032B1.kimsufi.com) (Ping timeout)
[21:29:23] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[21:29:33] *** Quits: dapz (textual@moz-F958911.hsd1.ca.comcast.net) (Ping timeout)
[21:33:27] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[21:33:56] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Client exited)
[21:35:01] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[21:37:04] *** Joins: orospakr (orospakr@E5F02728.3C7B6A44.86CC3CCD.IP)
[21:37:23] *** Quits: orospakr (orospakr@E5F02728.3C7B6A44.86CC3CCD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:37:42] *** Joins: jroweboy1 (jrowe7@moz-18814A6B.provo.static.broadweavenetworks.net)
[21:37:51] *** Joins: mib_az7q5v (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[21:38:53] *** Quits: jroweboy (jrowe7@moz-B0B6A670.provo.static.broadweavenetworks.net) (Ping timeout)
[21:40:04] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Client exited)
[21:42:14] *** Quits: mib_az7q5v (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:42:27] *** Joins: dmillerw (Dylan@moz-97CCE599.eugn.qwest.net)
[21:42:32] *** Quits: dmillerw (Dylan@moz-97CCE599.eugn.qwest.net) (Quit: dmillerw)
[21:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:46:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:46:46] <johnsoft> is it possible yet to do full-duplex socket communication? (referencing http://www.reddit.com/r/rust/comments/1v2ptr/is_nonblocking_io_possible_in_rust/ )
[21:47:01] <eddyb> you can clone sockets
[21:48:07] <johnsoft> that sounds like it would work
[21:48:12] <johnsoft> thanks
[21:50:33] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[21:52:17] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[21:52:25] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[21:52:29] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[21:52:38] *** Quits: twi (Adium@23C89A3C.3F466A9D.7562401D.IP) (Quit: Leaving.)
[21:53:03] *** Quits: luz (lu.cy@moz-CD18B14B.customer.cdi.no) (Input/output error)
[21:53:11] *** Joins: luz (lu.cy@moz-CD18B14B.customer.cdi.no)
[21:53:38] *** Quits: Guest (textual@3E0487DF.D8252BC.9532F1CE.IP) (Ping timeout)
[21:56:23] *** Quits: IanCormac84 (User@BF330DFD.2A8D8854.67DFF8B4.IP) (Connection reset by peer)
[21:57:35] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:59:36] *** Joins: IanCormac84 (User@C9D75F95.2A8D8854.67DFF8B4.IP)
[21:59:42] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:00:01] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:03:07] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[22:03:15] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[22:03:19] <doomlord_> finally works :) but my mood is damaged by this experience :(
[22:03:39] <doomlord_> if its harder to use something like gl in rust than C, its going to be a complete mess for a sony platform
[22:04:07] <doomlord_> it would make writing parts of an engine on a console more unpleasant
[22:04:19] *** Quits: cgaebel (clark@moz-F9D89110.nyc.res.rr.com) (Ping timeout)
[22:04:26] <doomlord_> you'd want to split between rust and C 
[22:04:58] <doomlord_> i'd risk looking stupid if i recomended this to someone else
[22:05:23] <strcat> doomlord_: you wouldn't be using it directly via C APIs
[22:05:28] *** Joins: usterfoo (Mibbit@moz-F8B381B4.hm.shawcable.net)
[22:05:34] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[22:05:40] <doomlord_> the job of 'engine programmer' means doing that work
[22:05:53] <strcat> doomlord_: no
[22:06:01] <strcat> the job of whoever writes a gl library would do that work
[22:06:11] <strcat> it doesn't need to be safe
[22:06:11] <doomlord_> you dont use gl on consoles
[22:06:19] *** Quits: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net) (Ping timeout)
[22:06:25] <strcat> you were just talking about gl
[22:06:28] <strcat> I'm responding to that
[22:06:29] <doomlord_> the engine programmer overlaps with work traditionally done by a driver writer
[22:06:32] <doomlord_> yes, thats right
[22:06:34] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[22:06:50] <doomlord_> 'real' engines run on many platforms including ones that dont run opengl
[22:07:15] <doomlord_> if you want to make a 'real' engine, you have to deal with that
[22:07:57] *** Joins: cgaebel (clark@moz-F9D89110.nyc.res.rr.com)
[22:08:12] <doomlord_> you have to deal with everything.. concurrency  multi core generation of command lists, and sync with the GPU consuming that..
[22:08:19] <usterfoo> \whoami
[22:08:51] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[22:09:11] *** Parts: usterfoo (Mibbit@moz-F8B381B4.hm.shawcable.net) ()
[22:09:15] *** Joins: mye (mye@moz-52E25131.dip0.t-ipconnect.de)
[22:10:45] <doomlord_> well i suppose you can always use C as the ultimate unsafe blocks , its not going away
[22:10:50] *** Quits: nical (nico@DA4ABEAF.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[22:10:55] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:11:38] <strcat> doomlord_: I don't know why you've determined that rust isn't capable of replacing C for that
[22:11:47] <cmr> rusti: stringify!(#ifdef)
[22:11:48] -rusti- # ifdef
[22:11:49] <doomlord_> it is but its less pleasant to use in that role
[22:12:09] <doomlord_> safe code rust >>> c++.  unsafe code , C > rust
[22:12:27] <cmr> I'm pretty we could have inline C via syntax extension
[22:12:31] <strcat> if we add sugar for pointer arithmetic, etc. why wouldn't it be nicer?
[22:12:32] <cmr> not  that it's a good idea...
[22:12:38] <strcat> cmr: please no
[22:12:42] <zwarich> writing something that generates GPU command buffers isn't really that hard
[22:12:44] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:12:51] <strcat> I don't see why using rust isn't acceptable
[22:12:54] <zwarich> and seems like the kind of thing Rust would be good at
[22:13:08] <strcat> there's no reason to think that rust isn't going to improve from where it is today
[22:13:26] <strcat> we can have unsafe pointer arithmetic operators for raw ptrs, etc...
[22:13:32] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[22:13:39] <doomlord_> ok that'll help certainly
[22:14:13] <eddyb> strcat: shouldn't we force users to reach for the safe patterns?
[22:14:23] <doomlord_> its probably just everything adding up ... a lot of extra casting, the 'vocabulary' for some basic operations, and just the fact i've dealt with c/c++ for nearly 20 years
[22:14:32] <Florob> strcat, weren't those actually once available and removed?
[22:14:36] <strcat> Florob: no
[22:14:41] <cmr> that's not true
[22:14:45] <strcat> Florob: there were never unsafe pointer arithmetic operators
[22:14:48] <strcat> they were safe
[22:14:50] <cmr> oh
[22:14:51] <cmr> yes
[22:14:54] <cmr> they were
[22:14:56] <strcat> so they had to use non-inbounds GEP
[22:14:58] <cmr> for like a week :P
[22:15:00] <strcat> which was removed
[22:15:08] <strcat> cmr: they weren't implemented in librustc, ever
[22:15:11] <cmr> nope
[22:15:17] <strcat> they were done via Add
[22:15:20] <cmr> they were just overloads of Add
[22:15:23] <strcat> which is wrong with inbounds GEP
[22:15:29] <strcat> and not equivalent to C
[22:15:47] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Input/output error)
[22:16:11] *** Joins: clusterfoo (Mibbit@moz-F8B381B4.hm.shawcable.net)
[22:16:12] *** Quits: drawoc (drawoc@moz-BAC1D3AB.res-cmts.sesh.ptd.net) (Ping timeout)
[22:18:34] *** Quits: Ferreus_ (ferreus@moz-7F844611.lsn.wtnet.de) (Quit: WeeChat 0.4.4-dev)
[22:18:39] <doomlord_> i hope it will improve for me with familiarity, because i really like the language most of the time
[22:19:24] <doomlord_> i've even become ok with snake_case :)
[22:19:41] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:19:52] <strcat> C and C++ use snake_case everywhere in the stdlib
[22:19:58] <doomlord_> yeah i hate that
[22:20:03] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[22:20:06] <strcat> why? ;p
[22:20:39] <doomlord_> well not hate, but i traditionally liked snake_case for low level and camel-case for higher level functions;    (originally snake_case in rust really put me off, it doesn't now)
[22:20:56] *** Quits: zwarich (zwarich@A89ECEB1.A86FC3A7.DE9B45B6.IP) (Input/output error)
[22:21:04] <doomlord_> i've never really liked the C++stdlib at all. 
[22:21:23] <johnsoft> rust should switch to lisp-hyphens
[22:21:24] *** Joins: zwarich (zwarich@A89ECEB1.A86FC3A7.DE9B45B6.IP)
[22:21:32] <johnsoft> 1.0 isn't out, it's not too late
[22:21:39] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:21:41] *** Joins: Rym (y@83FA2518.3DA4EAA.51C6DE68.IP)
[22:21:53] <doomlord_> for a while i did swap my _ and  - on the keylayout :) .. to make snake-case easier for me to type
[22:22:25] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[22:22:57] *** Quits: paraze (paraze@moz-96380A71.w86-209.abo.wanadoo.fr) (Quit: Quitte)
[22:23:00] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Client exited)
[22:23:01] *** Joins: paraze (paraze@moz-96380A71.w86-209.abo.wanadoo.fr)
[22:23:08] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[22:23:39] <doomlord_> maybe it'll just get more natural with experience, i reduced some of the casting by rolling that into an offset helper, but i was iffy about having different versions of offset... ofs_u8_ptr .. ofs_void_ptr etc 
[22:24:11] <doomlord_> if the collections had a method to return a void_ptr that would be nice
[22:24:29] <o11c> hyphens *are* a lot easier to type
[22:24:58] <doomlord_> :) i figured just swapping the key would do that for me
[22:25:12] <o11c> and ... not having whitespace between your tokens is bad style anyway
[22:25:15] <strcat> doomlord_: why do you need more than one? the offset method already works like C ptr arith
[22:25:54] <doomlord_> its the extra casting that rust has i was eliminating with that; & <-> *
[22:26:02] <Havvy> Woot. My docfix PR is merged.
[22:26:15] *** Joins: mib_5ojkw8 (Mibbit@A54702E.4B947797.97F07BE5.IP)
[22:26:21] <doomlord_> and similarly having one step that can return a void* made it easier to throw things at gl
[22:26:38] *** Quits: mib_5ojkw8 (Mibbit@A54702E.4B947797.97F07BE5.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:27:44] <doomlord_> on the plus side , the macro system is really helpful, its another thing lke 'enums' , not what i came to the language for , but they might count alot to keeping me.
[22:27:59] <bjz> doomlord_: you are meant to get out of unsafe {} and into trusted code as soon as you can
[22:28:28] <bjz> doomlord_: it's ergonomically more difficult, because you shouldn't be using it everyday
[22:28:47] <doomlord_> but its going to be someones' job, and traditiionally that was mine :)
[22:29:09] <eddyb> doomlord_: you have to minimize footprint
[22:29:44] <doomlord_> i should take a look if you've actually tried to make safe rustic gl wrappers i guess
[22:29:44] <eddyb> focus on safe design, find the smallest abstraction that first most of your code
[22:29:47] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Client exited)
[22:29:52] <doomlord_> i know about safe design
[22:30:00] <doomlord_> and i've seen it completely kill projects :) 
[22:30:12] <bjz> doomlord_: why did it kill them?
[22:30:18] <doomlord_> it tends to be allocation & indirection heavy
[22:30:24] *** Joins: mgottschlag (quassel@moz-CD246736.hsi7.kabel-badenwuerttemberg.de)
[22:30:33] <doomlord_> we made games that did everything we need without a dynamic memory allocator
[22:30:36] <eddyb> doomlord_: cmr has hgl which kinda tries to do nice wrappers, but it's not there yet (still good to peek at)
[22:30:39] <bjz> why does it have to be the same with rust?
[22:31:04] <eddyb> you can do things on the stack with Rust that you can't sanely expect to work in C/C++
[22:31:12] <doomlord_> ok thats a big plus
[22:31:16] <bjz> plus we know it's safe
[22:31:33] <cmr> hgl is mostly-safe and hopefully rustic
[22:31:59] *** Quits: clusterfoo (Mibbit@moz-F8B381B4.hm.shawcable.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:32:06] <cmr> it's a bit hard though, since gl is very stateful and actually making it safe is inefficient.
[22:32:18] <bjz> cmr: do you have a link to your presentation?
[22:32:23] <cmr> bjz: which?
[22:32:28] <doomlord_> its got weird things like a void* argument that might be a pointer or an integer offset ;)
[22:32:29] <bjz> cmr: doomlord_ might find it interesting
[22:32:38] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[22:32:45] <cmr> the concurrency primitives one?
[22:32:49] <bjz> cmr: yup
[22:33:03] <doomlord_> ok on the plus side, macros were *really* helpful for interfacing constants & vertex layouts
[22:33:41] <eddyb> doomlord_: you can wrap things like that with two types, one for each possible situation
[22:33:59] <eddyb> and those types provide the combinations of safe-ish values to give to gl
[22:34:13] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Quit: Leaving...)
[22:34:16] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[22:34:46] *** Joins: Guest (textual@3E0487DF.D8252BC.9532F1CE.IP)
[22:34:54] <cmr> I don't know of any modern gl functions which actually use the same void* as either a pointer or an  integer
[22:35:00] <cmr> usually it's one or the other, because of legacy
[22:35:03] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[22:35:22] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Max SendQ exceeded)
[22:35:46] <bjz> doomlord_: it is important to hear your feedback, especially since you are in the industry
[22:36:14] <bjz> doomlord_: but yeah, remember that we are still working out how best to use the tools that are available to us
[22:36:28] <bjz> doomlord_: the servo team is doing some great stuff
[22:36:39] <bjz> doomlord_: like pcwalton's work queues
[22:36:52] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[22:37:27] *** Quits: Rym (y@83FA2518.3DA4EAA.51C6DE68.IP) (Ping timeout)
[22:37:57] *** Joins: jviereck (Adium@moz-7D34B37E.dclient.hispeed.ch)
[22:38:04] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[22:38:08] <bjz> cmr: plus you can always just make two functions if that is the case
[22:38:19] <cmr> yup
[22:38:36] <cmr> hgl's texture handling is super ugly
[22:38:45] <cmr> but not much way around that
[22:38:54] <bjz> heh
[22:38:54] <doomlord_> its possible my frustration today could be significantly reduced with just a few helper methods for voids
[22:39:06] <cmr> it could be more efficient if it was using gl extensions, but I'm trying to limit to gl 3.1 :(
[22:39:41] <bjz> cmr: it would be great if gl-rs could have aliases
[22:39:57] <bjz> cmr: ie. to the various extensions, if they are available
[22:40:14] <bjz> dunno how that would work though
[22:40:32] *** Joins: Rym (y@83FA2518.3DA4EAA.51C6DE68.IP)
[22:40:49] <bjz> ok, bbl - bakery and coffeeee
[22:40:52] <bjz> :D
[22:41:24] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:45:01] *** Quits: mgottschlag (quassel@moz-CD246736.hsi7.kabel-badenwuerttemberg.de) (Connection reset by peer)
[22:46:44] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:47:26] *** Joins: vodik_ (simon@moz-FD4ADBC6.cable.teksavvy.com)
[22:48:00] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[22:48:13] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[22:48:13] *** ChanServ sets mode: +ao brson brson
[22:50:01] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[22:50:35] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[22:50:55] *** Joins: zootm (calum@moz-150DDDC2.sgyl.cable.virginm.net)
[22:52:08] <Leo`> is the quote!() macro or something like that available yet ?
[22:53:05] <eddyb> Leo`: are you outside of libsyntax?
[22:53:33] <Leo`> ja
[22:53:38] <sfackler> Leo`: quote_item!, quote_expr!, quote_pat!, quote_tokens!, quote_ty!, quote_stmt!,
[22:53:38] *** Joins: twi (Adium@moz-ED056769.cust.vodafonedsl.it)
[22:53:48] <Leo`> sfackler: oh cool
[22:55:17] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[22:55:55] <Leo`> sfackler: how does it work ?
[22:56:33] *** Quits: Rym (y@83FA2518.3DA4EAA.51C6DE68.IP) (Ping timeout)
[22:57:08] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[22:57:34] <sfackler> basically: let ctx: ExtCtxt = ...; let e: @ast::Item = quote_item!(cx, struct Foo { x: int, y: ~str });
[22:58:02] <sfackler> er, s/ctx/cx/
[22:58:19] <Leo`> oh
[22:58:22] <Leo`> it takes a ExtCtxt
[22:58:24] <Leo`> ok
[22:58:39] <Leo`> and is there something like... quasiquotation ?
[22:58:41] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[22:58:46] <sfackler> ?
[22:58:47] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[22:59:12] *** Joins: dsrx (tom@moz-EEA4C0D9.lsanca.fios.verizon.net)
[22:59:15] <Leo`> i.e. quote_item!(cx, static foo: uint = X) // where X is not hard-coded
[22:59:51] <eddyb> $x
[22:59:58] <Leo`> ha
[23:00:05] <Leo`> simply
[23:00:21] <eddyb> x refers to a variable in scope
[23:00:43] <Leo`> 'k
[23:00:54] <eddyb> that can be converted to an AST node. in that case, an @Expr, or probably an uint
[23:00:59] *** Quits: Guest (textual@3E0487DF.D8252BC.9532F1CE.IP) (Ping timeout)
[23:01:04] <eddyb> it should be ${x} IMO
[23:01:47] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[23:02:01] <Leo`> mhh
[23:04:54] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[23:05:15] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[23:06:03] <Tobba> hm
[23:06:12] <Tobba> I dont remember the C++ version of this code being this awfully slow
[23:06:41] <eddyb> haha
[23:06:52] <Tobba> its loading like 6MB of text
[23:06:58] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[23:07:02] <Tobba> byte for byte
[23:07:08] <Tobba> maybe this is the issue, heh
[23:07:22] *** Joins: glandium (glandium@moz-A09032B1.kimsufi.com)
[23:08:26] *** Joins: Rym (y@83FA2518.3DA4EAA.51C6DE68.IP)
[23:10:23] <Tobba> though trying to use a BufferedReader fails with a nonsensical error
[23:10:31] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 27.0.1/20140212131424])
[23:10:50] <Tobba> 	pub fn load<T: Reader+Seek>(data: &mut T) -> Result<World, &'static str> {
[23:10:50] <Tobba> 		let mut reader = BufferedReader::new(data);
[23:10:55] <Tobba> gives me a error: failed to find an implementation of trait std::io::Reader for &mut T on the reader line
[23:11:24] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[23:11:28] <sfackler> A reference to a reader isn't a reader. Try BufferedReader::new(data.by_ref()) instead
[23:11:30] <Tobba> wait... oh hell
[23:11:32] <Tobba> yep
[23:11:43] <sfackler> (that is a bad error message)
[23:12:04] <Tobba> ah right, the age-old annoyance with BufferedReader
[23:12:08] <Tobba> it passthrough Tell
[23:12:09] *** Joins: Guest (textual@3E0487DF.D8252BC.9532F1CE.IP)
[23:12:13] <Tobba> or uh, Seek, rather
[23:12:33] <Tobba> and tell is actually really important for the code that is being slow so uhhhhh
[23:13:12] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[23:13:53] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[23:14:23] <sfackler> Tobba: rdr.get_ref().tell()
[23:15:01] <Tobba> wont that possibly kinda get out of sync with the reader though
[23:15:04] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[23:15:06] <sfackler> BufferedReader could implement Seek for R: Seek but it seems like the implementation would be a little tricky
[23:15:22] <Tobba> I have an idea
[23:15:30] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[23:15:30] *** ChanServ sets mode: +ao brson brson
[23:16:55] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[23:18:01] <Tobba> there we go
[23:18:11] <Tobba> got it implemented for the slow section only keeping track of the position myself
[23:18:15] <Tobba> although it doesnt actually work but OH WELL
[23:18:41] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[23:18:59] <sfackler> you should be able to write a quick Reader+tell adapter that you can wrap the BufferedReader in
[23:19:04] <eddyb> bjz: type in the title https://github.com/mozilla/rust/pull/13072
[23:19:09] *** Quits: skade (skade@moz-1EC0F118.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:19:25] <eddyb> also, that cat is gorgeous :D
[23:19:53] <bjz> eddyb: she is my cat!
[23:19:56] *** Joins: leowoe (Leo@moz-72D47201.dclient.hispeed.ch)
[23:20:04] <bjz> eddyb: back in brisbane though :(
[23:20:09] <bjz> eddyb: I miss here
[23:20:12] <bjz> *her
[23:20:44] <bjz> eddyb: I probably have that weird parasite in my brain :P
[23:20:56] <bjz> eddyb: the title?
[23:21:06] <eddyb> *typo
[23:21:15] <eddyb> https://avatars3.githubusercontent.com/u/695077 awwwwwww
[23:21:29] <o11c> *itle
[23:21:31] <bjz> ohhh
[23:21:34] <bjz> fixed
[23:21:36] <eddyb> so big. much furry. I think I need to go to bed nao
[23:21:50] <bjz> heh
[23:21:56] <bjz> she's actually really small
[23:22:06] <bjz> well, not that big at least
[23:22:17] <o11c> bjz: should also derive Default IMO
[23:22:34] <o11c> (lots of things don't impl Default, it's sad)
[23:22:53] * bjz is not really a fan of Deafault
[23:22:57] <bjz> :P
[23:23:04] *** Quits: NiccosSystem_ (NiccosSyst@moz-CF331A7F.nextgentel.com) (Quit: Leaving)
[23:23:23] <bjz> no real emantic meaning. ties lots of things together that shouldn't be
[23:23:31] <bjz> *semantic
[23:23:36] <o11c> I'd rather have it builtin to the language
[23:23:50] <o11c> since there's no easy way to initialize a struct with a bunch of fields
[23:23:53] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[23:23:58] <bjz> make a method
[23:24:06] <o11c> I'm talking about *in* the method
[23:24:15] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:24:15] <bjz> that
[23:24:19] <bjz> i mean
[23:24:39] <bjz> it's unclear what deriving(Default) will do
[23:25:08] <sfackler> it recursively default initializes all fields
[23:25:19] <sfackler> what else *could* it do? :P
[23:25:31] <bjz> I know, but semantically, and you can't document it
[23:25:54] <bjz> better to have something like Flags::empty()
[23:25:56] <o11c> deriving default says "it makes sense to use the default values of my fields for my own default"
[23:26:10] <o11c> bjz: that gets *really* annoying to type after a while
[23:26:37] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:27:00] <bjz> That's kind of a case where I'd rather verbosity in exchange for for clarity
[23:27:22] *** Quits: mye (mye@moz-52E25131.dip0.t-ipconnect.de) (Quit: So long, and thanks for all the fish!)
[23:27:26] <o11c> unnecessary verbosity is evil
[23:27:46] <o11c> there's nothing less clear about Default::default()
[23:27:58] <o11c> for that matter, most of the time with bitflags, you don't even care about the type!
[23:28:00] <strcat> o11c: T::default() should work too
[23:28:06] <o11c> you only care about the values
[23:28:17] <strcat> I hate resolve for static methods on traits
[23:28:18] <strcat> ;s
[23:28:21] <o11c> strcat: same problem as T::empty()
[23:28:27] <bjz> what does: let time = Time::default(); do?
[23:28:35] <bjz> or Flags::default()?
[23:28:37] *** Joins: rntz (rntz@moz-E7065CE4.cmdnnj.fios.verizon.net)
[23:28:53] <bjz> or HashMap::default()?
[23:28:54] <o11c> it's *obviously* whatever that class declared as the default value
[23:29:00] *** Joins: canhtak (canhtak@moz-805AE185.wl.t.ulaval.ca)
[23:29:09] <o11c> which is usually zero for a lot of things, but sometimes might have some flags set
[23:29:31] <bjz> then they can implement a new static method
[23:29:35] <o11c> basically the only thing that *doesn't* have an obvious default is something that contains pointers, since there is no NULL
[23:29:52] *** Quits: Guest (textual@3E0487DF.D8252BC.9532F1CE.IP) (Quit: Textual IRC Client: www.textualapp.com)
[23:30:06] <o11c> I feel like giving up on Rust
[23:30:15] <bjz> why?
[23:30:16] <o11c> it promised to make programming fun and safe
[23:30:26] <o11c> but all it does is put unnecessary restrictions
[23:30:33] <Leo`> why does quote!() returns an option ?
[23:30:42] <o11c> it's more painful than C++, and that's saying something
[23:30:49] <sfackler> Leo`: which one?
[23:30:49] <bjz> o11c: why do you think they are unneccsary?
[23:31:23] <o11c> bjz: the argument we just had is a great example
[23:31:31] <Leo`> sfackler: quote_item!
[23:31:49] <o11c> most things *have* a valid default - in C++ you'd call it {} - but you're arguing for verbosity
[23:32:11] *** Quits: vodik_ (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[23:32:22] <bjz> o11c: I tried to explain to you my reasoning, but of course I am not the sole person in charge of Rust, so don't take my position as being that of everyone
[23:32:24] <o11c> if you want more examples, just grep your logs for what I wrote, it feels like I do nothing but complain
[23:32:32] <o11c> it's far from isolated
[23:32:32] <sfackler> Leo`: I think it's just because parse_item was changed to return an Option<@Item> 
[23:33:03] <bjz> o11c: do you not pay for C++'s lack of restrictions in the long run?
[23:33:13] <Leo`> sfackler: mhh
[23:33:17] <rntz> o11c: I don't know all of what you've complained about, but I certainly don't think not having default values is a big problem for Rust. Python doesn't have default values for things and that has never been something that bugged me about python.
[23:33:30] <bjz> o11c: It's like working with dynamic languages
[23:33:33] <Leo`> sfackler: but can quote_item!() expands into None ? or can I safely unwrap ?
[23:33:34] <o11c> bjz: I win with C++'s lack of restrictions, because I have enough discipline
[23:33:44] <o11c> rntz: python has default arguments, which are much the same
[23:33:57] <bjz> o11c: Rust might get default args
[23:34:00] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[23:34:06] <rntz> ... I, uh, don't see how those are the same at all.
[23:34:09] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[23:34:12] <o11c> bjz: yeah, I hear a lot of "might"s
[23:34:17] *** Joins: mgottschlag (quassel@moz-CD246736.hsi7.kabel-badenwuerttemberg.de)
[23:34:19] <bjz> o11c: it's a backwards compatible fix, but it is not a priority
[23:34:22] <o11c> rntz: use case: want to call a function that requires flags
[23:34:33] <strcat> bjz: I'll fight long and hard against it getting optional/keyword arguments ;p
[23:34:34] <o11c> bjz: it *should* be a priority, because it's all about pain
[23:34:43] <o11c> bjz: we can deal with broken syntax
[23:34:51] <bjz> o11c: the 'might' is because we are still pre-1.0, and we don't want to close things off
[23:34:52] <sfackler> Leo`: I'm not totally sure. I'd assume it'd return None if you call it on something that isn't an Item. It's probably fine to call unwrap here since preseumably you *are* giving quote_item a valid item
[23:35:09] <rntz> IMO flags are usually the wrong way to do things. but when they're the best, I don't see much difficult about passing 0.
[23:35:23] <Leo`> sfackler: ok
[23:35:23] <o11c> rntz: because 0 is not of the right type
[23:35:24] <strcat> bjz: unboxed closures would allow sane partial function application with _
[23:35:33] <bjz> strcat: yeah, I am open to the debate, hence the 'might'
[23:35:38] <o11c> rntz: https://github.com/mozilla/rust/pull/13072
[23:35:39] <Leo`> sfackler: oh, and oO quote_item!(cx, ...) causes a move on cx ?
[23:35:49] <strcat> bjz: then you can just write 'static foo: fn(int) = bar(5, _);'
[23:35:54] <rntz> o11c: ... what do you mean by "flags"?
[23:35:57] <rntz> ah, I see.
[23:35:58] <bjz> o11c: sorry if I was off-putting before
[23:36:06] <sfackler> Leo`: oh, yeah, you'll want to pass an &mut ExtCtxt to it
[23:36:08] <o11c> bjz: it's nothing personal
[23:36:10] <strcat> bjz: or `let x = bar(a, _);
[23:36:13] <sfackler> (the quasiquoter is pretty hacky)
[23:36:17] <strcat> bjz: or w/e
[23:36:18] <o11c> bjz: it's just that I think Rust in general is doomed
[23:36:26] <Leo`> hum
[23:36:33] <Leo`> my cx is already an &mut ExtCtxt<'a>
[23:36:35] <aatch> o11c, that's pretty bold
[23:36:38] <sfackler> you also ahve to manually reborrow an &mut ExtCtxt for reasons that I haven't looked into
[23:36:44] <bjz> o11c: I guess it's ok if you don't agree with the rust philosophy - it's not for everyone, or every use case
[23:36:52] <Leo`> sfackler: how ?
[23:36:53] <sfackler> do quote_item!(*&cx, <stuff>)
[23:36:56] <sfackler> er, 
[23:36:58] <sfackler> other way
[23:36:59] <o11c> it's sad, because the basic bits I *do* agree with
[23:37:02] <sfackler> *&cx
[23:37:05] <sfackler> gah
[23:37:09] <sfackler> &*cx
[23:37:09] <bjz> o11c: that's fine!
[23:37:10] <sfackler> there
[23:37:10] <sfackler> that one
[23:37:12] <aatch> You said yourself that you're ok with C++ because you have discipline. That's specific to you
[23:37:29] <EKK> So is being ok with C++, isn't it?
[23:37:33] *** Joins: mib_uz8ut6 (Mibbit@moz-7002DE99.lns20.adl2.internode.on.net)
[23:37:39] <Leo`> sfackler: oh ok
[23:37:43] <Leo`> sfackler: thanks
[23:37:48] <bjz> o11c: make another language! I would love to see more languages in the world. Don't take that as dismissive though
[23:37:50] <aatch> declaring Rust doomed in general because you PERSONALLY don't get as much benefit is a bit too far
[23:38:04] <o11c> bjz: it's on my todo list
[23:38:12] <bjz> o11c: but saying "Rust is doomed" isn't really constructive to the conversation
[23:38:13] <o11c> aatch: it's the mindset
[23:38:33] <o11c> Rust enshrines a certain subset of features as absolutely essential, while dismissing others as unimportant
[23:38:43] <Leo`> sfackler: it's pretty hacky yes but i's fun :P
[23:38:45] <aatch> o11c, and?
[23:38:50] <bjz> o11c: bear in mind that we are still 1.0
[23:38:57] <strcat> default/keyword parameters are harmful imo
[23:39:03] <aatch> so does every other language in existence.
[23:39:05] <aatch> C++ included.
[23:39:09] <bjz> o11c: there needs to be room to move around with the syntax in the future
[23:39:10] *** Joins: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net)
[23:39:24] <o11c> bjz: from what I hear, 1.0 is happening soon for political reasons
[23:39:43] <bjz> o11c: languages are political
[23:39:49] <strcat> they replace more readable/usable APIs (naming) and composable option types for the sake of sugar
[23:39:50] <o11c> aatch: not saying other languages don't - but Rust is contradicting the languages it's intended to replace more than is helpful
[23:39:53] <bjz> o11c: they don't exist in a vacuum
[23:39:58] <strcat> imo partial function application sugar would kill 90% of the use case
[23:40:06] <strcat> and unboxed closures would allow that to work well
[23:40:16] <strcat> in fact I should open an rfc about it
[23:40:21] <o11c> bjz: and yet, the most successful languages are the ones with a dictator - perl, python, ...
[23:40:42] <bjz> o11c: I agree, and that is a danger that must not be understated
[23:40:48] <Havvy> *cough* JS.
[23:40:57] <Havvy> *cough* PHP (as much as I loathe it.)
[23:41:03] <bjz> o11c: so far I think the core devs are handling it well
[23:41:28] <Havvy> (And that's just in the scripting languages.)
[23:41:34] <bjz> o11c: you might disagree though, and that's fine.
[23:41:51] <o11c> I suppose I might just be disagreeing with their vision, and there's no politics involved
[23:42:01] <o11c> but I was promised a C++ replacement, and I'm not getting one
[23:42:24] <aatch> o11c, you're not getting the C++ replacement you want, because as far as I can tell, you don't want a C++ replacement.
[23:42:26] <Leo`> sfackler: last thing (sorry)
[23:42:34] <bjz> o11c: who promised a C++ replacement?
[23:42:37] <strcat> o11c: because it doesn't have default constructor sugar? or more than that
[23:42:47] <Leo`> sfackler: I want to do something like quote_item!(cx, static $cond: uint = ...)
[23:42:51] <aatch> You seem happy with C++
[23:43:03] <o11c> aatch: happier than with anything else. I still want a replacement
[23:43:09] <Leo`> declare a static var whose name is in the cond variable
[23:43:23] <Leo`> of which type must cond be ?
[23:43:33] <sfackler> an ast::Ident will definitely work
[23:43:44] <Leo`> if it's a str, I got static "foo": uint = ... which is obviously wrong
[23:43:48] <Leo`> sfackler: ok
[23:43:51] <bjz> o11c: C++ is a fine language despite some deep flaws. if you can stomach those, then that's great
[23:43:58] <o11c> bjz: being a C++ replacement is definitely Rust's main selling point these days
[23:44:04] * eddyb looks at the backlog
[23:44:07] <eddyb> whoa this is long
[23:44:08] <Leo`> thanks
[23:44:15] <eddyb> o11c: well, we don't have HKT yet :P
[23:44:19] <sfackler> np
[23:44:24] <o11c> strcat: it's no one thing - any one thing would be workaroundable
[23:44:24] <Havvy> HKT?
[23:44:26] <bjz> o11c: I would say being a C++ *alternative* is rust's strength
[23:44:28] *** jorendorff_away is now known as jorendorff
[23:44:41] <aatch> o11c, being a complete "C++ replacement" would pretty much require being C++
[23:44:44] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:44:54] <SiegeLord> Can't replace C++ without being C++... somebody will always find a hack in that language that is useful
[23:45:01] <bjz> o11c: if you want a C++ replacement I would suggest looking at D
[23:45:06] <o11c> bjz: hell no
[23:45:07] <strcat> o11c: there are certainly areas where rust isn't as good as C++ but imo most can/will be fixed
[23:45:09] <bjz> o11c: which is a nice language too
[23:45:20] <bjz> strcat: ++
[23:45:21] <strcat> o11c: for example, unboxed closures + function trait
[23:45:21] <SiegeLord> Or Nimrod
[23:45:31] <bjz> SiegeLord: yes!
[23:45:33] <SiegeLord> Nimrod seems more into the direction of C++ than Rust is
[23:45:34] <o11c> I should look at Clay again
[23:45:38] <strcat> SiegeLord: not really
[23:45:39] <bjz> SiegeLord: agreed
[23:45:43] <SiegeLord> XD
[23:45:44] <strcat> SiegeLord: uses gc, no RAII
[23:45:51] <strcat> not RAII*
[23:45:58] <bjz> strcat: yeah, those are key differences
[23:46:17] * Havvy likes that he has a working program without using GC.
[23:46:17] <bjz> strcat: the metaprogramming is far closer though
[23:46:24] <strcat> bjz: I don't find that to be true either
[23:46:31] <strcat> C++ doesn't have macros or rewrite rules
[23:46:37] <o11c> Clay is probably more like C++ than Rust is, but I gave up at the time because no separate compilation ... but Rust probably will never have that anyway.
[23:46:42] <strcat> nimrod doesn't have C++ template-like metaprogramming afaik
[23:46:55] <bjz> strcat: I might be mistaken then
[23:47:46] <strcat> imo destructors and value semantics are what defines C++
[23:47:51] <bjz> o11c: anyway, point is, Rust is not going to satisfy all of your desires. It doesn't satisfy all of mine.
[23:47:54] <strcat> and nimrod doesn't work that way
[23:47:54] <nszceta> what is this nimrod/clay talk doing here on #rust
[23:47:58] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:48:09] <nszceta> so much arguing over semantics and not enough code
[23:48:10] <bjz> nszceta: it is fine to talk about other langs here
[23:48:13] <strcat> and templates/SFINAE are pretty important too
[23:48:21] <strcat> which rust (and afaik, nimrod) don't have
[23:48:26] <bjz> nszceta: just not to trash talk other people's hard work
[23:48:38] <o11c> nszceta: it started because I said "this code should exist in Rust"
[23:48:45] <nszceta> "might as well write everything in haskell since that is the ultimate language"
[23:48:55] <o11c> nah, haskell has GC
[23:48:56] <bjz> nszceta: heh :)
[23:49:06] * eddyb slaps nszceta around a bit with a large trout
[23:49:23] <bjz> nszceta: Haskell is another incredibly fine language, but not without its flaws either
[23:49:45] <eddyb> oh, right, I had some thoughts earlier and nobody answered
[23:49:47] *** Quits: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net) (Input/output error)
[23:49:49] <nszceta> http://i.imgur.com/GIa1uVy.png
[23:50:03] <eddyb> does Haskell have something like a map or a fold for types?
[23:50:05] <bjz> nszceta: nor is it appropriate for everything
[23:50:05] <o11c> (despite the GC, Haskell is on my list of languages to learn someday)
[23:50:19] <bjz> nszceta: eh, that comic is a straw man
[23:50:21] *** Joins: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net)
[23:50:24] <nszceta> of course
[23:50:27] <bjz> :)
[23:50:35] <strcat> nszceta: spinning the CPU fan to 100%, heating up the room and triggering the OOM killer isn't very pure ;)
[23:50:56] <bjz> nszceta: might have been true in the early nineties
[23:50:58] <nszceta> sounds like 
[23:50:59] <nszceta> jJava
[23:51:00] <eddyb> strcat: functionally pure, thermodynamically explosive
[23:51:16] <strcat> nszceta: but haskell doesn't claim to have pure functions ;)
[23:51:16] <nszceta> haskell caused global warming
[23:51:18] <strcat> er
[23:51:20] <strcat> java*
[23:51:23] <bjz> nszceta: haha
[23:51:24] <eddyb> cmr: ^^ there's your quote of the week
[23:52:08] <nszceta> I am partial to Erlang
[23:52:13] <eddyb> the terminology is a bit... wonky
[23:52:33] <eddyb> Haskell *code* is pure. but it's an oracle
[23:52:38] <Havvy> nszceta:  If you are partial to Erlang, take a look at Elixir.
[23:53:14] <eddyb> Haskell *programs* are impure and they use the pure oracle to know what impure operations to perform
[23:53:26] <eddyb> you could argue that the IO monad is a syscall gate
[23:53:40] <eddyb> (and maybe even optimize it as such)
[23:53:43] <nszceta> I don't see a point to Elixir in production
[23:54:07] <bjz> anyway, I agree we might be diverging a *tad* off-topic
[23:54:12] <eddyb> strcat: how close am I?
[23:54:17] <bjz> might pay to take this to #rust-offtopic
[23:54:26] <bjz> if you want to continue it
[23:54:27] <Havvy> nszceta:  Maybe once it hits stable syntax?
[23:54:49] <nszceta> I'll consider it once I am proficient in Erlang
[23:55:44] <eddyb> I'd rather spend that time writing a Rust library and being proficient in it :P
[23:56:25] * Havvy notes that its the same exact semantics (of the ErlangVM), just better syntax and good macros.
[23:56:39] <bjz> eddyb: its worth the investment in time to learn other langs
[23:57:02] <doomlord_> http://pastebin.com/Wzicbe8s << these helpers cleaned up my casting, i'm not sure if its the minimum set that would do it, or if there's a better way.. Its the combined 'get a void result' and 'coerce integer offsets' that helps. its very common to have offets that aren't 'int'. offsets are used for compression
[23:57:08] <nszceta> Havvy good point
[23:58:08] <eddyb> I guess... an interesting exercise would be to try to implement syntax and even semantics for a language that is token-compatible with Rust, in either a rule macro or a syntax extension
[23:58:10] *** Quits: Oli` (Olivier@moz-CDDD9305.clta.globetrotter.net) (Quit: Leaving)
[23:58:26] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[23:58:42] *** Joins: Blub\1 (wry@620605B3.71150E1A.237AE2BA.IP)
[23:58:53] <bjz> nszceta Havvy: please consider taking the cross-language talk to #rust-offtopic if you are not relating it back to the language. it's still a great subject though
[23:59:01] *** Quits: Blub\0 (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[23:59:11] <doomlord_> https://gist.github.com/dobkeratops/9716302  <<< as a gist
[23:59:29] <nszceta> funny how the two guys that talked about erlang were singled out
[23:59:34] <nszceta> discrimination!
[23:59:40] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[23:59:40] *** ChanServ sets mode: +ao brson brson
[23:59:45] <bjz> heh, Erlang is great!
[23:59:47] <nszceta> (I kid, I kid) great to hear from you guys
[23:59:55] <bjz> just you were the last two :)
[23:59:57] * nszceta goes out for now
