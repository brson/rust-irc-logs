[00:00:03] *** Joins: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net)
[00:02:23] *** Quits: KindOne (KindOne@moz-F09DDAAC.dynamic.ip.windstream.net) (Ping timeout)
[00:03:03] *** Quits: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net) (Ping timeout)
[00:03:24] *** Joins: echristo (echristo@60A74940.D6CCE4AE.77834EAA.IP)
[00:04:37] *** Quits: hacker_sam (hacker_sam@moz-64791626.dsl.bngr.epix.net) (Connection reset by peer)
[00:04:46] *** Joins: hacker_sam (hacker_sam@moz-64791626.dsl.bngr.epix.net)
[00:05:24] <cmr> eddyb: http://en.wikipedia.org/wiki/Core_War
[00:05:50] <strcat> frau: no, there's exciting memory allocation and scheduler stuff but no movement on google upstreaming that
[00:05:59] *** Joins: bobthenameless (bobthename@moz-6069EE20.dhcp.leds.al.charter.com)
[00:06:00] *** Joins: KindOne (KindOne@moz-D14E65AE.dynamic.ip.windstream.net)
[00:06:48] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Ping timeout)
[00:07:11] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[00:07:12] <frau> strcat: exciting eh? do link
[00:07:28] <strcat> frau: vrange syscall
[00:07:32] <strcat> sec
[00:07:45] <frau> thanks!
[00:08:42] <strcat> frau: https://lkml.org/lkml/2013/6/12/6 might not be the newest one
[00:08:51] *** Quits: valenting (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP) (Ping timeout)
[00:08:57] *** Quits: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP) (Input/output error)
[00:09:02] <strcat> not really directly related... but exciting for languages like rust/C++ using malloc/free
[00:09:04] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[00:09:41] *** Joins: bkircher (bkircher@moz-5C9284AB.dip0.t-ipconnect.de)
[00:10:16] <cmr> that patch has been bumping around for over a year
[00:10:26] <strcat> frau: http://thread.gmane.org/gmane.linux.kernel.mm/95966 numbers! ;p
[00:10:34] <cmr> I see one from october
[00:10:40] *** Joins: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP)
[00:10:41] <strcat> cmr: that's how linux works ;p
[00:10:47] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[00:10:54] <strcat> the real-time stuff has been in the process of landing for years, for example
[00:11:09] <alexanderkyte> That's really cool. Kinda like a STM for malloc
[00:11:10] <strcat> one the user-mode scheduling stuff is actually proposed it will take a while to land...
[00:11:20] <cmr> yeah that's true
[00:11:47] <strcat> vrange basically means allocators never have to free memory
[00:11:48] <strcat> ever.
[00:11:56] <strcat> when there's memory pressure, the kernel frees the unused blocks for them
[00:12:16] <strcat> so in low memory conditions you end up with a lot more usable memory
[00:12:20] <strcat> + more speed in regular conditions
[00:12:22] <strcat> pretty cool.
[00:12:54] <cmr> "ever"? what if you need that memory? unless by never you mean never releasing it back to the kernel
[00:13:35] <strcat> cmr: as in releasing it back to the kernel
[00:15:46] <frau> strcat: oh! that's really cool
[00:16:19] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Ping timeout)
[00:16:28] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[00:16:46] <frau> and you get a SIGBUS if you accidentally use a freed page, I see
[00:16:47] *** Quits: johnrkd (johnrkd@3A09C2F6.815752B7.B05A4819.IP) (Quit: )
[00:17:18] *** Quits: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP) (Input/output error)
[00:17:24] <cmr> yeah this is really cool
[00:17:25] <bkircher> Hey there. I have a small question: How would you print the contents of a vec to stdout? rust-idiomatic and generic? Would you implement to_str trait?
[00:17:32] * cmr skanks the idea for cmoss
[00:17:43] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[00:17:43] <cmr> bkircher: with a for loop
[00:17:46] *** Joins: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP)
[00:18:08] <eddyb> maybe implement std::fmt::Default
[00:18:38] <frau> what does "skanking an idea" imply? :)
[00:19:46] <cmr> frau: 'round here it means steal unceremoniously
[00:20:24] <frau> ah I see, mozilla lingo?
[00:20:36] <cmr> no
[00:20:39] <strcat> cmr: cmoss?
[00:20:43] *** Quits: echristo (echristo@60A74940.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[00:20:52] <cmr> strcat: my silly OS project
[00:20:59] <strcat> ah
[00:21:10] <strcat> cmr: just put everything in ring0 ;p
[00:21:54] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Ping timeout)
[00:22:20] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[00:24:09] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[00:26:25] *** Quits: frau (frau@A432E5CC.191304CB.C579BC3E.IP) (Quit: out)
[00:26:47] <strcat> acrichto: when channels block, are they blocking in a cond var call?
[00:27:00] <acrichto> strcat: yes, but libgreen still matters
[00:27:15] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[00:27:42] *** Quits: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP) (Ping timeout)
[00:27:46] <strcat> acrichto: well, we could do whatever timers do now there - can't we?
[00:27:54] *** Quits: maikklein (maik@moz-2F166E55.dip0.t-ipconnect.de) (Ping timeout)
[00:28:06] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Ping timeout)
[00:28:19] <acrichto> perhaps, I haven't given it much though
[00:28:23] <acrichto> thought*
[00:28:29] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[00:30:54] *** Joins: andreypopp (andreypopp@moz-31BA715C.pools.arcor-ip.net)
[00:30:57] *** Quits: andreypopp (andreypopp@moz-31BA715C.pools.arcor-ip.net) (Quit: andreypopp)
[00:31:13] <strcat> I find it's a much nicer API to have recv + recv_timeout(Time::from_seconds(5))
[00:31:26] <strcat> where the timeout one returns Option<T> instead of T
[00:31:41] <strcat> since that seems to be the only place timers can be used, beyond sleeping
[00:32:26] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Quit: Leaving.)
[00:33:26] <strcat> if we actually had an I/O-based select dropping down to epoll maybe it'd make sense to have timers to use timerfd, but afaik libuv doesn't use timerfd anyway
[00:33:28] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[00:33:28] *** ChanServ sets mode: +ao brson brson
[00:34:02] *** Quits: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net) (Quit: Leaving.)
[00:35:32] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[00:37:20] *** Joins: z0w0 (zack@moz-356923D4.lnse4.woo.bigpond.net.au)
[00:40:23] <FreeFull> strcat: Timeout of 0 would be polling, and recv would be blocking?
[00:45:20] *** Quits: bkircher (bkircher@moz-5C9284AB.dip0.t-ipconnect.de) (Connection reset by peer)
[00:45:34] *** Joins: bkircher (bkircher@moz-5C9284AB.dip0.t-ipconnect.de)
[00:46:06] *** Quits: moostik (Icedove@moz-40E6ACEF.w2-2.abo.wanadoo.fr) (Quit: moostik)
[00:47:21] *** Quits: bkircher (bkircher@moz-5C9284AB.dip0.t-ipconnect.de) (Ping timeout)
[00:47:28] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[00:48:02] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[00:48:12] *** Quits: kori (kori@277F74F6.F9CCD00F.EF49E5F2.IP) (Quit: WeeChat 0.4.2)
[00:48:28] *** Joins: kori (kori@277F74F6.F9CCD00F.EF49E5F2.IP)
[00:48:44] <luisbg> how much time does it usually take between a r+ in github and bors picking the PR up?
[00:48:45] <strcat> FreeFull: well, you'd probably still want a try_recv for efficiency, not sure
[00:49:05] <strcat> FreeFull: but yes, timeout of 0 or at least a tiny number would be polling
[00:49:27] <strcat> FreeFull: https://github.com/thestinger/rust-core/blob/master/core/concurrent.rs#L275
[00:49:52] <klutzy> luisbg: depending on bors queue http://buildbot.rust-lang.org/bors/bors.html
[00:50:05] <luisbg> klutzy, thanks! let me check
[00:50:19] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Ping timeout)
[00:50:27] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[00:50:38] <strcat> FreeFull: although these are multiple-consumer, multiple-producer queues
[00:50:39] <luisbg> klutzy, awesome! that is a super useful link, thanks
[00:51:01] <strcat> so the API isn't really the same as rust's stdlib
[00:51:49] <luisbg> what machine is behind bors? my beefy workstation (which I ssh from my laptop) is pretty good and still takes an hour to build, and 20 minutes to make check
[00:52:22] <FreeFull> Ideally a timeout of 0 would be optimised/rewritten into a try_recv
[00:52:23] <strcat> luisbg: takes me 12 minutes to build
[00:52:31] <luisbg> strcat, wow! how?
[00:52:34] <strcat> are you counting LLVM? ;\
[00:52:40] <strcat> you only need to rebuild LLVM infrequently
[00:53:10] *** Joins: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au)
[00:53:17] *** Quits: jhasse (jhasse@moz-F3702E2C.ewe-ip-backbone.de) (Quit: Verlassend)
[00:53:22] <luisbg> strcat, 1 hour with llvm, around 35~40 without
[00:53:28] *** Joins: speckle (speckle@moz-AD109A29.hsd1.md.comcast.net)
[00:53:34] <strcat> luisbg: how much memory do you have?
[00:53:46] <luisbg> strcat, 8gb
[00:53:51] * strcat shrugs
[00:54:19] <luisbg> hahahaha, I am patient
[00:54:31] *** Quits: bvssvni (Mibbit@moz-CBD76C21.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[00:54:58] *** Quits: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au) (Ping timeout)
[00:55:19] <benh> i actually can't build llvm anymore, i hope i don't need to rebuild it anytime soon
[00:56:28] <FreeFull> Why not?
[00:58:34] <luisbg> benh, :( why not?
[01:00:55] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:02:44] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[01:02:52] *** Joins: twi1 (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[01:02:53] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Connection reset by peer)
[01:02:58] <luisbg> twi, o/
[01:02:59] <luisbg> oooh
[01:03:01] <luisbg> twi1, o.
[01:04:19] <cmr> luisbg: the buildbots are a mix of VMs and servers and mac minis.
[01:04:31] <luisbg> cmr, o/ hey!
[01:04:31] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[01:04:36] <cmr> luisbg: it really takes you 40 minutes to build? can you time a clean build? (after `make clean`).
[01:04:39] <luisbg> twi, trying again o/
[01:04:39] *** Quits: twi1 (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Ping timeout)
[01:04:47] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[01:04:57] <luisbg> cmr, want me to "time make"? 
[01:05:02] <cmr> yeah
[01:05:51] *** Quits: nkoep (nik@moz-86B3FBAD.pool.mediaways.net) (Quit: Leaving)
[01:05:53] <luisbg> ok, gonna do that
[01:06:07] <luisbg> running git clean -dfx
[01:06:12] <luisbg> to be extremely clean :)
[01:06:21] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Ping timeout)
[01:06:40] *** Quits: heftig (heftig@moz-62CD741C.dip0.t-ipconnect.de) (Ping timeout)
[01:07:21] <cmr> ahh no
[01:07:26] <cmr> you don't want to rebuild llvm!
[01:07:44] <luisbg> sure, let me rebuild llvm and time only the non-llvm
[01:09:22] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[01:09:32] *** Joins: heftig (heftig@moz-FB34F68F.dip0.t-ipconnect.de)
[01:10:54] *** Quits: canhtak (canhtak@moz-59105D0.wl.t.ulaval.ca) (Quit: canhtak)
[01:11:06] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[01:13:24] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:14:16] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[01:14:39] *** Quits: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP) (Ping timeout)
[01:14:55] *** Joins: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP)
[01:15:03] *** Quits: klutzy (th@BA61F396.8E859986.ECA1BB11.IP) (Ping timeout)
[01:15:07] *** Joins: klutzy (th@BA61F396.8E859986.ECA1BB11.IP)
[01:17:30] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[01:17:31] *** Quits: hacker_sam (hacker_sam@moz-64791626.dsl.bngr.epix.net) (Client exited)
[01:17:52] *** Joins: hacker_sam (hacker_sam@moz-64791626.dsl.bngr.epix.net)
[01:18:45] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[01:22:44] <pyon> Why do "use" declarations have to come before in-crate "mod" imports?
[01:23:01] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[01:23:01] *** ChanServ sets mode: +ao brson brson
[01:23:03] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[01:23:15] <strcat> pyon: arbitrary rule dating from back when the order mattered
[01:23:21] <strcat> it could be relaxed now imo
[01:23:23] <cmr> pyon: because `mod` statements always shadow `use`.
[01:23:27] <cmr> strcat: hm?
[01:23:43] <strcat> cmr: they shadow use, but you can use stuff in mod statements before they're declared
[01:23:50] <strcat> so either way it's disconcerting.
[01:23:58] <cmr> yeah
[01:24:53] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Ping timeout)
[01:26:10] *** Quits: benh (ben@moz-4A0366D2.org) (Ping timeout)
[01:26:36] *** Joins: maikklein (maik@moz-2F166E55.dip0.t-ipconnect.de)
[01:29:31] *** Joins: benh (ben@moz-4A0366D2.org)
[01:31:26] <pyon> Structs that have borrowed pointer members must have their own lifetimes as generic parameters, right?
[01:31:40] <sfackler> yep
[01:31:49] <sfackler> struct Foo<'a> { thing: &'a Blah }
[01:32:25] <luisbg> cmr, real    20m49.889s
[01:32:26] <luisbg> user    20m20.001s
[01:32:38] <luisbg> cmr, clearly I was counting llvm in my previous estimates
[01:32:42] <cmr> that's more like it.
[01:32:54] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[01:33:29] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[01:37:28] *** Quits: Ferreus (ferreus@moz-559CD583.pools.arcor-ip.net) (Quit: WeeChat 0.4.2)
[01:39:12] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[01:40:19] *** Quits: KindOne (KindOne@moz-D14E65AE.dynamic.ip.windstream.net) (Ping timeout)
[01:41:25] <luisbg> cmr, :)
[01:41:34] *** Quits: hacker_sam (hacker_sam@moz-64791626.dsl.bngr.epix.net) (Client exited)
[01:41:35] *** Joins: hacker_sam (hacker_sam@moz-64791626.dsl.bngr.epix.net)
[01:44:05] *** Joins: KindOne (KindOne@moz-540ACFC6.dynamic.ip.windstream.net)
[01:46:28] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[01:49:38] *** Quits: gwty (gwtypc@90BFEAA9.8A45D967.F44414AF.IP) (Ping timeout)
[01:50:24] *** Joins: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net)
[01:52:09] *** Quits: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net) (Ping timeout)
[01:52:19] *** Joins: echristo (echristo@60A74940.D6CCE4AE.77834EAA.IP)
[01:53:11] *** Joins: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au)
[01:55:01] *** Quits: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au) (Ping timeout)
[01:58:25] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[01:58:46] *** kimundi is now known as zz_kimundi
[01:59:53] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[02:00:11] *** Joins: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au)
[02:01:13] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[02:02:07] *** Quits: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au) (Ping timeout)
[02:06:01] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: This bear's gotta fly.)
[02:06:26] *** Parts: kori (kori@277F74F6.F9CCD00F.EF49E5F2.IP) (WeeChat 0.4.2)
[02:06:43] <brianm> can rustc (on mac) statically compile in std and rt?
[02:06:53] <brianm> so as not needing to have rust runtime preinstalled
[02:07:42] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[02:09:26] *** Joins: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP)
[02:09:40] <steven_is_false> Hello. I have a matter I wish to discuss relating to Rust which should be not talked about in a public forum and am having trouble finding an appropriate contact email. Can anyone help me with this?
[02:09:56] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[02:10:34] <strcat> steven_is_false: well you could email brson, not sure exactly what you're looking for
[02:11:14] <ChrisMorgan> steven_is_false: are you able to provide any further detail?
[02:11:21] <steven_is_false> strcat: Thank you. I was thinking about emailing brson but was not sure if that would be appropriate.
[02:11:39] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[02:12:01] <strcat> steven_is_false: he won't mind, he accepted responsibility of being the official target of blame and nuclear warheads after all ;)
[02:12:45] <steven_is_false> I think this is more just related to Mozilla Research than Rust specifically but I came here because I know you people.
[02:13:15] <cmr> brianm: it does so by default.
[02:13:27] <pyon> What is the syntax for calling an anonymous function that is a member of a struct?
[02:13:29] <Yurume> hmm, is there a type of discussions about Rust which cannot be talked about in public?
[02:13:32] <brianm> [o__o]kite:~/src/rust-play<master *#%>$ otool -L ./hello
[02:13:32] <brianm> ./hello:
[02:13:32] <brianm> 	/usr/local/lib/rustc/x86_64-apple-darwin/lib/libstd-6c65cf4b443341b1-0.8.dylib (compatibility version 0.0.0, current version 0.0.0)
[02:13:32] <brianm> 	/usr/local/lib/rustc/x86_64-apple-darwin/lib/librustrt.dylib (compatibility version 0.0.0, current version 0.0.0)
[02:13:32] <brianm> 	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1197.1.1)
[02:13:38] <cmr> pyon: (x.y)()
[02:13:42] <brianm> kite:~/src/rust-play<master *#%>$
[02:13:49] <cmr> brianm: well you're using 0.8, that's your problem.
[02:13:49] <pyon> cmr: Ah, that was subtle! Thanks!
[02:13:51] <brianm> doesn't seem to in rust 0.8 for me
[02:13:58] <Yurume> for example, vulnerability?
[02:14:00] <brianm> cmr thought 0.8 was most rcent
[02:14:03] *** Parts: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP) (ERC Version 5.3 (IRC client for Emacs))
[02:14:10] <brianm> what should I be using?
[02:14:13] <ChrisMorgan> brianm: 0.8 it a long time ago. master is where it's at.
[02:14:17] <brianm> ack
[02:14:18] <cmr> brianm: of course not, HEAD isthe most recent. Releases are unsupported snapshots.
[02:14:42] <ChrisMorgan> Three months of Rust development is a lot of improvement.
[02:14:53] <Yurume> brianm: 0.9 will be out soon, so if you don't want to compile things you can use it.
[02:15:00] <brianm> I don't mind building :-)
[02:15:07] <Yurume> though most people here would suggest using master ;)
[02:16:20] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[02:16:56] <ChrisMorgan> Yeah. For a week or two after a release it's acceptable to use that release, but master tends to get sufficiently better after that that master is definitely the place to be.
[02:17:36] <Yurume> I haven't tried the (unofficial) Windows snapshot yet but it seems a good thing to have
[02:17:40] <pyon> I have a function that returns a tuple. Is there any way to project the first member into an immutable variable and the second one into a mutable variable?
[02:17:54] <cmr> pyon: let (x, mut y) = some_function();\
[02:18:03] <pyon> cmr: Thanks!
[02:18:23] <sfackler> unless you're on 0.8, in which case you have to do "let (x, y) = some_function(); let mut x = x;"
[02:18:58] *** Joins: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au)
[02:21:58] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Quit: Linkinus - http://linkinus.com)
[02:22:32] *** Quits: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP) (Ping timeout)
[02:24:32] <SiegeLord> Hmm... the fact that rustdoc ignores lines starting with # is kind of awkward with attributes
[02:24:46] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[02:25:16] <cmr> SiegeLord: I don't remember if you're supposed to add a space or double the ## ...
[02:25:29] <SiegeLord> Thing is, # [deriving..] is valid Rust code
[02:25:58] <Yurume> two #s seem to avoid that problem
[02:26:08] <SiegeLord> What does ## mean?
[02:26:12] <strcat> Yurume: at this point I don't really think so, there are lots of vulnerabilities found + fixed
[02:26:13] <Yurume> nope, which is my point
[02:26:15] <ChrisMorgan> https://github.com/mozilla/rust/pull/11185
[02:26:21] <ChrisMorgan> (rustdoc: only filter lines starting with '# ' from the shown code.)
[02:26:33] <SiegeLord> Yep, and that doesn't work with # [deriving
[02:26:35] <Yurume> ah, raw strings, I forgot it
[02:27:21] <SiegeLord> It should have been a different character... like ?
[02:27:46] <Yurume> @?
[02:28:03] <SiegeLord> I just picked an invalid rust source character
[02:28:18] *** Quits: derby (dirby@moz-D5AEE09B.torservers.net) (Input/output error)
[02:28:22] <SiegeLord> ? happens to be one I can think of off the top of my head
[02:28:33] <ercxx> is rustpkg supposed to install the final binary in the $RUST_PATH/bin/ ?
[02:28:44] <Yurume> or Unicode box drawing characters.
[02:29:47] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[02:29:56] <SiegeLord> I guess the solution is not to do # [deriving] lol
[02:30:41] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[02:31:57] <ChrisMorgan> Certainly.
[02:34:18] <SiegeLord> I note that the number of PR's is balooning... is something wrong with bors/bots?
[02:35:01] *** Quits: short (Mibbit@moz-DEF859BF.hsd1.wa.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:35:07] <cmr> well, I did a bunch of review today, and the LLVM upgrade is taking quite a few tries to get through.
[02:35:13] <cmr> Also a bug in the scheduler.
[02:35:55] <cmr> (that caused deadlocks; currently #2 in the queue)
[02:36:01] <cmr> a few PRs bounced due to that
[02:36:34] *** Joins: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net)
[02:37:10] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[02:37:21] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[02:37:23] *** vfetwnuncszu is now known as dcrewi
[02:37:56] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[02:38:05] *** Joins: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net)
[02:38:26] *** Quits: nathan7 (nathan@moz-60FC7746.nathan7.eu) (Ping timeout)
[02:38:47] *** Joins: nathan7 (nathan@moz-60FC7746.nathan7.eu)
[02:39:24] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[02:43:12] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[02:48:44] *** Joins: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net)
[02:49:10] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[02:51:38] *** Joins: bvssvni (Mibbit@moz-CBD76C21.bb.online.no)
[02:51:42] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[02:52:51] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:56:38] *** Joins: mib_lokllh (Mibbit@moz-6EFED2D1.pao.googlefiber.net)
[02:57:20] *** Quits: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:59:43] *** Quits: maikklein (maik@moz-2F166E55.dip0.t-ipconnect.de) (Ping timeout)
[03:00:24] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[03:01:02] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[03:06:01] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[03:07:35] *** Quits: mib_lokllh (Mibbit@moz-6EFED2D1.pao.googlefiber.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:07:50] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Ping timeout)
[03:08:04] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[03:09:46] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[03:09:49] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[03:10:04] *** vfetwnuncszu is now known as dcrewi
[03:10:14] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[03:11:12] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Connection reset by peer)
[03:12:03] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[03:12:49] *** Quits: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au) (Ping timeout)
[03:13:17] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[03:17:11] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:18:59] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[03:22:55] *** Joins: pepper_chico (pepper_chi@E4B89D8C.3C9EA51F.F546FA5F.IP)
[03:24:12] *** Quits: ecl3ctic1 (Mibbit@578C64B6.F0F44EFA.76AE55C1.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:25:03] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[03:28:02] <cmr> ""We're like Rust in that we want to maximize safety and performance, and we're willing to add fancy type system features to get there," Bromfield said. "We're like Go in that we want to be simple and approachable, in much the same way that .Net attempted to simplify programming. We're like D in that we want the language to feel very familiar to devs using an existing language (C# for us, C++ for
[03:28:05] <cmr> them) -- just better.""
[03:28:07] <cmr> http://www.zdnet.com/microsofts-midori-the-m-connection-7000024664/
[03:28:24] <cmr> I'm very excited to see them try and tackle this design space.
[03:28:38] <cmr> But also curious to see how simple/approachable they can make it.
[03:29:48] <FreeFull> I think they're just making things up
[03:30:38] *** Quits: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:30:51] <klutzy> cmr: one relevant paper http://research.microsoft.com/pubs/170528/msr-tr-2012-79.pdf
[03:30:58] <cmr> klutzy: thanks!
[03:30:59] <klutzy> (16p contains some example code)
[03:31:39] <cmr> "Uniqueness and Reference Immutability for Safe Parallelism"
[03:31:42] <cmr> That sure sounds familiar
[03:32:51] <cmr> I really hope that's not what they plan on releasing
[03:35:49] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[03:35:55] <sfackler> what's the minimum required setup if I want to use #[no_std]?
[03:36:32] <sfackler> I don't need to actually be able to run anything, I just need to get it to compile a lib to try to figure out something in the compiler
[03:36:51] <cmr> there's a minimal no_std "hello world" somewhere
[03:38:05] <cmr> src/test/run-pass/smallest-hello-world.rs
[03:38:34] <cmr> doesn't need linkhack.
[03:38:37] <cmr> but that's how it's done.
[03:38:53] *** Quits: ofeldt (ofeldt@moz-B7E2366D.dip0.t-ipconnect.de) (Ping timeout)
[03:39:25] <sfackler> I'm getting an undefined reference error for _rust_stack_exhausted
[03:39:25] *** Joins: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net)
[03:40:06] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[03:40:56] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[03:41:11] <cmr> might need to stub it
[03:42:13] *** Joins: ofeldt (ofeldt@moz-B7E2366D.dip0.t-ipconnect.de)
[03:42:30] *** Quits: zz_kimundi (kimundi@moz-DB1AF90B.dip0.t-ipconnect.de) (Ping timeout)
[03:45:53] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[03:45:56] *** Joins: zz_kimundi (kimundi@moz-6166D3C8.dip0.t-ipconnect.de)
[03:46:25] *** zz_kimundi is now known as kimundi
[03:46:49] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[03:47:52] <Edwards> Is there any sort of long-term roadmap for Rust? General ideas for future direction, that sort of thing?
[03:48:19] <Edwards> Like, well past 1.0
[03:48:33] <cmr> Edwards: not really.
[03:48:40] <cmr> (afaik)
[03:49:12] <cmr> there used to be a far-future milestone on github for things we'd like, looking forward.
[03:49:49] <Edwards> Ah. Yeah, I'm thinking bigger ideas than even what'd you'd put in an Issue.
[03:51:24] *** Joins: Blub\1 (wry@620605B3.71150E1A.237AE2BA.IP)
[03:51:56] *** Quits: Blub\0 (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[03:54:43] *** Quits: pepper_chico (pepper_chi@E4B89D8C.3C9EA51F.F546FA5F.IP) (Quit: Ex-Chat)
[03:55:01] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[03:56:52] *** Joins: iilicshi (user@FD96B176.1359A1DB.BEC48A72.IP)
[03:59:22] *** Joins: itang (Mibbit@B8C19186.4EFDA353.6BD9A7F5.IP)
[03:59:53] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Ping timeout)
[04:04:48] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[04:06:46] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[04:08:35] <brianm> so, on master
[04:08:37] <brianm>     fn foo(&self) -> ~str {
[04:08:37] <brianm>         return format!("foo %?", *self);
[04:08:37] <brianm>     }
[04:08:40] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Ping timeout)
[04:08:46] <brianm> gives
[04:08:47] <brianm> hello.rs:9:33: 9:37 error: argument never used
[04:08:47] <brianm> hello.rs:9         return format!("foo %?", self);
[04:09:04] <brianm> ?
[04:09:23] <brianm> it is certainly being used :-(
[04:09:46] <Luqman> brianm: {:?} instead of %?
[04:09:54] <brianm> oh?
[04:10:08] <brianm> hah, cool
[04:10:10] <brianm> new syntax
[04:10:13] <Luqman> yes, formatting changed
[04:10:32] <Luqman> http://static.rust-lang.org/doc/master/std/fmt/index.html
[04:10:33] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[04:10:37] <brianm> schweet, and statically linked now
[04:10:48] <brianm> thanks!
[04:12:22] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[04:13:07] *** Quits: iilicshi (user@FD96B176.1359A1DB.BEC48A72.IP) (Client exited)
[04:16:12] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[04:17:49] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:19:58] *** Quits: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com) (Ping timeout)
[04:20:07] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[04:21:41] *** Joins: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au)
[04:23:26] *** Quits: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au) (Ping timeout)
[04:27:30] *** Quits: itang (Mibbit@B8C19186.4EFDA353.6BD9A7F5.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:29:52] <SiegeLord> I wonder... if I forked an editor to provide Rust support, would that count for its inclusion in the editors wiki?
[04:30:36] <Edwards> SiegeLord: What editor?
[04:30:41] <SiegeLord> Geany
[04:31:06] <Edwards> Ah
[04:31:45] <Edwards> Well I can't speak to the wiki. But I know I'd love to see an IntelliJ plugin for Rust. :)
[04:32:02] <Edwards> http://confluence.jetbrains.com/display/IDEADEV/Developing+Custom+Language+Plugins+for+IntelliJ+IDEA
[04:32:38] <Edwards> IMO a solid IntelliJ plugin, with code completion and error highlighting and stuff like that, would be way more valuable than a forked editor.
[04:34:13] <SiegeLord> Well, it's an editor I use ;)
[04:34:18] <SiegeLord> Gotta scratch one's own back sometimes
[04:34:31] <Edwards> Understandable. Same reason I want an IntelliJ plugin. :)
[04:34:37] <SiegeLord> I've a pull request, but they aren't speedy about merging it
[04:42:12] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[04:44:01] *** Quits: zslayton (Mibbit@moz-4806B979.nyc.res.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[04:50:35] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[04:51:14] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[04:55:28] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[04:56:11] *** Joins: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au)
[04:56:20] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[05:03:18] *** Quits: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au) (Ping timeout)
[05:05:47] *** Joins: james4k (james@moz-1FE2B9B1.tyrdcmta03.hnsntx.tl.dh.suddenlink.net)
[05:05:50] <cmr> Edwards: hm, that doesn't look too hard...
[05:06:52] <Edwards> cmr: It's a really awesome API. My biggest hangup is that I'd really like to use the actual rustc AST, type info, etc, rather than rewriting the parser in Antlr or something (and possibly having inconsistencies)
[05:07:11] *** Joins: derek_c (derek@44A302DC.727D7A21.EB673A25.IP)
[05:07:31] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[05:07:41] <cmr> Edwards: https://github.com/jbclements/rust-antlr is the closest we have to an official grammar atm.
[05:07:48] <cmr> it *was* validated against rustc at the time.
[05:08:35] <Edwards> It's more than just the grammar though. Access to the type information is a huge step toward code completion and error highlighting and stuff.
[05:08:36] <cmr> Edwards: have you looked at rustdoc's json output? I think it would be usable for completion of external crates.
[05:08:44] <cmr> Yeah
[05:08:51] <Edwards> I haven't
[05:09:18] *** Joins: twi1 (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[05:09:22] <cmr> libsyntax/librustc isn't at the point where it's usable for code completion of the crate being compiled, not quite yet.
[05:09:22] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Ping timeout)
[05:09:42] <cmr> for error highlighting there is rustc --parse-only
[05:09:56] <cmr> can call into librustc using a custom span handler to get around forking
[05:10:23] <cmr> I have a rotting branch somewhere that makes that easier, I'll have to revive it sometime.
[05:10:38] <ChrisMorgan> Or for complete error highlighting, --no-trans
[05:10:52] <Edwards> I'm also pretty new to Rust, so I'm probably not the best person for this project anyway. :)
[05:10:55] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[05:11:02] <Edwards> I've been learning it for maybe a week or so.
[05:11:03] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[05:11:03] *** Quits: twi1 (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Ping timeout)
[05:12:18] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[05:12:28] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[05:12:31] *** vfetwnuncszu is now known as dcrewi
[05:12:50] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[05:13:41] <derek_c> Is this the most efficient way to create a 64-byte array
[05:13:48] <derek_c> rusti: let buffer: ~[u8] = with_capacity(64u);for _ in range(0, 64) {buffer.unshift(0);}
[05:13:51] -rusti- pastebinned 7 lines of output: http://ix.io/9zr
[05:14:11] <derek_c> rusti: let buffer: ~[u8] = vec::with_capacity(64u);for _ in range(0, 64) {buffer.unshift(0);}
[05:14:11] <cmr> derek_c: std::vec::from_elem(64, 0u8);
[05:14:13] <Yurume> derek_c: how do you use that? are you creating bunches of them?
[05:14:13] -rusti- pastebinned 13 lines of output: http://ix.io/9zs
[05:14:20] <derek_c> Yurume: yes
[05:14:33] *** Quits: apoelstra (username@moz-B7040E82.vs.shawcable.net) (Ping timeout)
[05:14:35] <cmr> derek_c: or, if you can use a fixed-sized vector, [0u8, ..64]
[05:14:39] <Yurume> is the size (64) fixed eternally?
[05:14:46] <derek_c> Yurume: yes
[05:14:57] <Yurume> then I think cmr's second suggestion is fine (a fixed-size vector)
[05:15:07] <Edwards> Argh. Inference by return type always throws me for a loop. @_@
[05:15:10] <derek_c> cmr: thanks, both look better
[05:15:16] <Yurume> rusti: fn f(x: ||||) {} f
[05:15:17] <derek_c> Yurume: thanks
[05:15:20] -rusti- pastebinned 6 lines of output: http://ix.io/9zt
[05:15:26] <Yurume> ...that does not parse. :(
[05:15:47] <Yurume> rusti: version
[05:15:48] -rusti- "rustc 0.9-pre (61f8c05 2013-10-24 13:01:18 -0700)"
[05:15:53] <Yurume> hm! :)
[05:16:03] <Yurume> but I think the recent rustc still does not parse that either
[05:17:30] *** Joins: apoelstra (username@moz-B7040E82.vs.shawcable.net)
[05:19:47] <dbaupp> derek_c: btw, using .push will be infinitely faster than .unshift
[05:20:23] <dbaupp> derek_c: (using .unshift requires memcpying the whole vector every time, while .push only requires a full copy occasionally.)
[05:21:05] *** Joins: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com)
[05:21:35] <derek_c> dbaupp: that sounds terrible. maybe that should be in the docs
[05:22:01] <cmr> derek_c: well you're pushing to the front of a vector, it's kinda implied by the type.
[05:22:01] <derek_c> how do I feed something of the type &[u8, ..64] to a function that accepts &[u8]?
[05:22:09] <cmr> it shouldd be in the docs though.
[05:23:24] <Yurume> I feel there should be a limited-size vector type which is backed by a built-in fixed-size vector
[05:23:51] <Yurume> I have seen some uses of it
[05:24:05] *** Quits: elux (peter@moz-6B45ADE5.dsl.bell.ca) (Quit: Bye!)
[05:24:11] <derek_c> how do I feed something of the type &[u8, ..64] to a function that accepts &[u8]?  casting doesn't work
[05:24:39] <Yurume> I think [u8, ..64] (note a missing &) will coerce to &[u8]
[05:25:21] <derek_c> Yurume: doesn't look like so
[05:25:22] <cmr> Yurume: I wrote half of one hte other day before deciding it's not really useful; what value do you see in it?
[05:25:43] <derek_c> rusti: let buffer: [u8, ..64] = [0u8, ..64]; buffer as &[u8]
[05:25:45] -rusti- pastebinned 7 lines of output: http://ix.io/9zu
[05:25:49] <Yurume> cmr: well, rust-encoding needed them.
[05:25:58] <cmr> derek_c: `as` isn't coercion, that's casting.
[05:26:03] <Yurume> (though my strategy for writing rust-encoding is ultimately not scalable at all)
[05:26:06] *** Quits: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net) (Quit: dogurness)
[05:26:28] <cmr> rusti: let buffer = [0u8, ..64]; let x: &[u8] = buffer; println!("{:?}", x);
[05:26:31] -rusti- pastebinned 2 lines of output: http://ix.io/9zv
[05:27:19] <cmr> Yurume: I decided it wasn't useful because it wasn't any better than just doing a with_capacity and pushing when needed.
[05:27:28] <dbaupp> derek_c: you can call .as_slice() to be explicit about the coercion
[05:27:40] <dbaupp> cmr: saves an allocation
[05:27:44] <derek_c> cmr: I see
[05:27:46] <cmr> Though I suppose forcing it to never be longer than X helps.
[05:27:55] <derek_c> Yurume: yeah coercion works
[05:28:05] <Edwards> rusti: let buffer = [0u8, 0u8, ..64]; println!("{:?}", buffer);
[05:28:05] <derek_c> is there any performance penalty for coercion?
[05:28:07] -rusti- pastebinned 6 lines of output: http://ix.io/9zw
[05:28:16] <Edwards> (Just curious)
[05:28:26] <cmr> derek_c: no
[05:28:27] <Yurume> other than it gives some additional fields, no
[05:28:45] <cmr> dbaupp: where does .as_slice come from? does it coerce the LHS to &[T] to find the methods?
[05:28:50] <dbaupp> cmr: yes
[05:28:54] <cmr> ok, makes sense.
[05:29:01] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[05:29:05] <dbaupp> cmr: for fixed sized vectors .as_slice() doesn't actually do the coercion internally
[05:29:26] <dbaupp> it coerces the LHS to &[T] and then uses the .as_slice on that (which is the identity)
[05:29:30] <dbaupp> yay for magic
[05:29:41] <cmr> Edwards: so reading this document and some of the classes more, are you sure it's actually possible to use an external tools' AST etc?
[05:30:07] <Yurume> rusti: let a: [uint, ..3] = [1,2,3]; a.permutations().collect::<~[uint]>()
[05:30:10] -rusti- pastebinned 7 lines of output: http://ix.io/9zx
[05:30:20] <Yurume> I always hated this problem.
[05:30:25] <Yurume> rusti: let a: [uint, ..3] = [1,2,3]; a.as_slice().permutations().collect::<~[uint]>()
[05:30:27] -rusti- pastebinned 7 lines of output: http://ix.io/9zy
[05:30:41] <Yurume> uh, wait, what?
[05:31:07] <Yurume> ah got it
[05:32:02] <Edwards> cmr: IntelliJ's ASTNode is just an interface. https://github.com/JetBrains/intellij-community/blob/master/platform/core-api/src/com/intellij/lang/ASTNode.java
[05:32:12] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:32:58] <Edwards> cmr: If the external tool has all of the right information, the interface could be implemented on the marshalled (for lack of a better term) type
[05:33:37] <Edwards> I mean, it's not a simple plug-and-go job
[05:35:19] <Edwards> (I'm also not an expert on IntelliJ plugins either. I just did a little bit of research into it when I was first picking up Rust, and it seemed feasible.)
[05:35:26] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[05:35:52] *** Joins: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au)
[05:35:56] *** Joins: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net)
[05:36:38] <cmr> Hm, the AST interface they have wants parent pointers and mutability, which is something our AST does not provide. The interaction between the two is going to be very messy.
[05:37:02] <Edwards> Oh I see
[05:37:28] *** Joins: elux (peter@moz-6B45ADE5.dsl.bell.ca)
[05:37:28] *** Joins: nimish (Mibbit@moz-6085C4EC.hsd1.ma.comcast.net)
[05:37:51] <elux> how is rust for parsing poorly formed html..?
[05:38:06] <cmr> elux: there are no pure-Rust HTML parsers.
[05:38:17] <elux> thats fine with me.. a libxml2 binding would do the trick
[05:38:29] <cmr> ok, see bjz's sax-rs
[05:39:02] <elux> beautiful
[05:39:04] <elux> thank you!
[05:40:08] <wycats_> how do I get gdb to stop on a rust task failure?
[05:40:50] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[05:41:31] *** Quits: elux (peter@moz-6B45ADE5.dsl.bell.ca) (Quit: Leaving...)
[05:41:38] <dbaupp> wycats_: either `catch throw` for a rustc a week or so old, or `break _Begin_Unwind` or something for newer rust
[05:41:58] <wycats_> I'm compiling master now
[05:42:03] <wycats_> so break _Begin_Unwind it is
[05:42:13] <wycats_> too bad that test failures don't give a full stack
[05:42:25] <wycats_> or is there something I can do to correct that
[05:42:52] <cmr> _Unwind_RaiseException
[05:42:54] <cmr> close, though :p
[05:43:18] <cmr> wycats_: they should be giving a full stack frame? are you using -Z extra-debug-info ?
[05:43:26] *** Quits: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net) (Quit: Leaving.)
[05:43:57] *** Quits: Mindless` (mindless@moz-9C38D3B4.net) (Ping timeout)
[05:44:14] <wycats_> cmr: should I be?
[05:44:34] <dbaupp> if you're debugging, yes
[05:44:34] *** Quits: nimish (Mibbit@moz-6085C4EC.hsd1.ma.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:44:38] <cmr> wycats_: if you want usable stack frames, yes :P
[05:44:47] <wycats_> I am now
[05:44:51] *** Joins: Mindless` (mindless@moz-9C38D3B4.net)
[05:44:53] <wycats_> and I just get a single frame
[05:45:03] <wycats_> https://www.irccloud.com/pastebin/GXmym5D1
[05:45:33] <klutzy> seems like they are saying about gdb backtrace
[05:45:41] <wycats_> ah ok
[05:45:43] <dbaupp> oh, yes, we are talking about gdb backtraces
[05:45:48] <cmr> yeah that's not a backtrace at all
[05:45:56] <cmr> that's just an error message :p
[05:46:01] <wycats_> would be nice if there was a backtrace :P
[05:46:33] * dbaupp agrees
[05:46:56] <cmr> it's a lot of work to get useful backtraces at runtime.
[05:47:17] <cmr> beyond the crappy stuff glibc's backtrace() can print.
[05:47:42] <cmr> (example: http://blog.hartwork.org/?p=1359)
[05:48:15] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[05:48:25] * dbaupp nominates cmr as someone who likes a lot of work
[05:48:39] <cmr> there is no way I'm writing a dwarfv2 stack
[05:48:58] <klutzy> cmr: the article suggests to use `-rdynamic`, but it didn't work when I made https://gist.github.com/klutzy/7999247
[05:49:00] <dbaupp> drat
[05:49:06] *** Joins: skrylar_ (skrylar@moz-F692F728.austin.res.rr.com)
[05:49:13] <cmr> and I've been lazy with my rust duties these past two weeks :P reading lots of books and relaxing.
[05:49:13] * skrylar_ appears
[05:49:20] <klutzy> (to be clear, some link option equivalent to -rdynamic
[05:49:22] *** Quits: skrylar_ (skrylar@moz-F692F728.austin.res.rr.com) (Quit: leaving)
[05:49:27] * dbaupp should be more persuasive
[05:49:29] <skrylar> oh, already had an open irrsi, derp
[05:49:43] <sfackler> what did oldrt's ::backtrace logger do?
[05:49:55] <wycats_> is there any assert! for tests or just if ... { fail! }?
[05:50:09] <cmr> wycats_: assert!(condition, "message")
[05:50:16] <cmr> message optional
[05:50:24] <sfackler> also assert_eq!(a, b, "message")
[05:50:27] <derek_c> can coercion happen at function return?
[05:50:30] *** Joins: sigma1 (sigma@moz-BFB7A653.range86-143.btcentralplus.com)
[05:50:39] <cmr> sfackler: assert_eq doesn't take a message :(
[05:50:43] <dbaupp> sfackler: I thought assert_eq couldn't have a message
[05:50:46] <dbaupp> easy fix though
[05:50:50] <klutzy> assert_eq! is good since it shows better message
[05:50:52] <brianm> is there a most-commonly-used http library for rust yet?
[05:50:55] <dbaupp> derek_c: in theory, but I don't think it works
[05:50:58] <dbaupp> brianm: rust-http
[05:51:00] <cmr> brianm: the one and only rust-http
[05:51:00] <derek_c> fn foo() -> &[u8] {[0u8, ..64]}
[05:51:08] <derek_c> rusti: fn foo() -> &[u8] {[0u8, ..64]}
[05:51:11] -rusti- pastebinned 7 lines of output: http://ix.io/9zz
[05:51:12] <cmr> derek_c: no, and that's memory unsafe anyway.
[05:51:15] <dbaupp> derek_c: yeah... that can't work
[05:51:22] <brianm> https://github.com/chris-morgan/rust-http ?
[05:51:26] *** Quits: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com) (Ping timeout)
[05:51:32] <klutzy> right
[05:51:33] <derek_c> yeah that's memory unsafe for sure... just a thought
[05:51:35] <dbaupp> [0u8, .. 64] is in foo's stack frame, so it gets "deallocated" when foo returns
[05:51:40] <brianm> "Neither is complete nor yet compliant in any way." fills me ith glee :-D
[05:51:58] <derek_c> but my question is can this happen when memory safety is kept
[05:52:06] <cmr> brianm: yep. it's a pretty decent lib, though ChrisMorgan will be redesigning it.
[05:52:12] <brianm> hah
[05:52:16] <Edwards> rusti: fn foo() -> ~[u8] { ~[0u8, ..64] }
[05:52:17] -rusti- ()
[05:52:19] <brianm> seems to be the story of rust
[05:52:33] <cmr> well it was a prototype.
[05:52:34] <brianm> "library x will be completely different next week"
[05:52:51] <brianm> :-)
[05:53:09] <Edwards> It's a young, pre-1.0 language under active development. :)
[05:53:13] <brianm> yep
[05:53:37] <brianm> which happens to look like 99% of what I want, and a bunch of things I didn't know I wanted, so am eager
[05:53:51] <brianm> :-)
[05:53:55] <cmr> brianm: heh, I had a similar experience :)
[05:54:08] <Edwards> I'm writing a wishlist right now of my own remaining 1%
[05:54:38] <Edwards> most of which is "Scala does this, and if Rust did it too, it'd be perfect."
[05:54:43] <brianm> I am thrilled to sacrifice 1%, had already thought I was sacrificing about 37% with Go
[05:55:32] <pyon> Is there any function as_mut_slice?
[05:55:45] <cmr> pyon: no, one in the queue though.
[05:55:58] <pyon> Oh.
[05:56:01] <pyon> ty
[05:57:07] *** Joins: lenstr (lenstr@1C3C8DC.ED45D46B.DFEAE789.IP)
[05:58:37] *** Quits: derek_c (derek@44A302DC.727D7A21.EB673A25.IP) (Quit: Leaving)
[05:58:53] *** Quits: lenstr (lenstr@1C3C8DC.ED45D46B.DFEAE789.IP) (Ping timeout)
[06:00:49] *** Joins: jdm (jdm@moz-3FFA85CA.dsl.teksavvy.com)
[06:00:50] *** ChanServ sets mode: +o jdm
[06:01:08] <skrylar> back to the 'fun' times of.. writing bindings. *nods*
[06:01:59] <cmr> skrylar: have you seen rust-bindgen?
[06:02:11] <skrylar> i think i looked at it once, cmr 
[06:02:29] <skrylar> i'm very peculiar about how i prefer bindings; i usually prefer they feel like they belong in the language they're for
[06:02:45] <cmr> that's not a binding then, that's a wrapper.
[06:02:59] <cmr> rust-bindgen will still write the binding part for you.
[06:04:18] <wycats_> brianm: it will eventually stabilize
[06:04:24] <wycats_> I speak from experience, as this was "the story of Ember"
[06:04:35] <wycats_> and now Ember is stable and Angular is talking about "being semver someday"
[06:05:09] <brianm> oh, I understand :-)
[06:05:41] <brianm> everything goes this way, and the transition from playground to mature is... often awkward
[06:05:48] <brianm> if the playground gets really big and long lived
[06:05:50] <brianm> but fun as hell
[06:06:40] <brianm> part of my querying is just to find things I am good at which I can work on -- language bits are voudou to me, but networking libs :-D
[06:07:30] <brianm> question, on master
[06:07:42] <brianm> I have rustc etc, but no rust command anymore
[06:07:42] <cmr> brianm: mind looking over https://github.com/mozilla/rust/pull/11186, if you're familiar with networking?
[06:07:48] <cmr> rust was removed 
[06:07:48] *** Quits: hacker_sam (hacker_sam@moz-64791626.dsl.bngr.epix.net) (Client exited)
[06:07:49] <skrylar> brianm: it was retired
[06:07:55] <cmr> retired! a good word.
[06:08:05] <brianm> ok
[06:08:09] *** Joins: hacker_sam (hacker_sam@moz-64791626.dsl.bngr.epix.net)
[06:08:39] <brianm> cmr, happy to
[06:10:04] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[06:10:24] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[06:11:32] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[06:11:53] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Ping timeout)
[06:12:18] <brianm> UdpStream ?
[06:12:24] <cmr> yup
[06:12:29] <brianm> is there a convention of representing buffers as streams?
[06:12:31] <cmr> kinda.. silly
[06:12:40] <cmr> should probably be renamed.
[06:13:17] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[06:13:32] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[06:13:48] <cmr> feel free to leave line comments on the PR :)
[06:14:04] <brianm> shall do
[06:17:04] *** Joins: zeittunnel (benjamin@moz-1946C812.dip0.t-ipconnect.de)
[06:17:09] <brianm> are there any tests exercising this code?
[06:17:21] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[06:17:58] <cmr> yeah, in std::io::net::udp
[06:18:01] <acrichto> brianm: all of the std::io::net::udp tests were converted to run under green and native threads
[06:18:18] <brianm> ah, this is code for running under native?
[06:18:29] <brianm> thought it was "native udp" was unsure what non-native UDP would be
[06:18:31] <acrichto> that's the iotest! macro
[06:18:41] <acrichto> just provided by libgreen/librustuv
[06:19:05] <brianm> bummer, whole networking suite needs reimpl for different threading model?
[06:19:23] <acrichto> well, makes sense when you look at what happens under the hood
[06:19:28] <brianm> (getting around blocking?)
[06:19:30] <acrichto> you can't make libc blocking calls on a green thread
[06:19:30] <cmr> brianm: well it's not really a reimpl, since the other stuff is just calling into libuv
[06:19:35] *** Joins: gkostyanikov (gkostyanik@54EEF6DD.A859D9FD.CA6E2165.IP)
[06:19:47] <acrichto> user facing code is the exact same, it's just different fiddly bits under the hood
[06:19:52] <brianm> hmm
[06:20:02] <acrichto> ah UdpSocket
[06:20:04] <acrichto> that's a much better name
[06:20:10] <acrichto> stolen from RtioUdpSocket
[06:23:01] <skrylar> hrm
[06:23:04] *** Joins: telotortium (rmi1@moz-46F0EE50.hsd1.ca.comcast.net)
[06:23:10] <skrylar> Can you invoke a macro in the middle of an enum{}? I know you can't inside an impl
[06:23:16] <dbaupp> no
[06:23:36] <skrylar> they really should fix it so macros work inside of blocks :/
[06:23:36] <dbaupp> well, maybe if it's enum Foo { A = 1, B = macro!(), C = 3 }
[06:23:42] <cmr> skrylar: macros can only expand to items, expressions, and statements.
[06:23:52] <cmr> nothing else
[06:23:52] <skrylar> yeah, i wanted to replace SDL_BLAH(ENUM) which is a #define 
[06:24:00] <dbaupp> they do work inside of blocks :P
[06:24:10] *** Quits: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net) (Quit: dogurness)
[06:24:13] <dbaupp> they don't work inside of enums or structs or anything like that.
[06:24:23] <bjz> :(
[06:24:25] <cmr> (and those aren't blocks)
[06:24:35] <bjz> what about impls?
[06:24:36] <skrylar> the github has it mentioned that "oh well just construct the macro so it makes the struct" 
[06:24:41] <skrylar> nope, macros don't work in impls
[06:24:42] <bjz> or traits?
[06:24:48] <bjz> dang
[06:24:56] <cmr> skrylar: what do you mean in impls, exactly?
[06:25:03] <skrylar> i should probably add to my tip gist that macros have really.. weird requirements
[06:25:07] <cmr> expanding into methods? getting the trait name?
[06:25:11] <skrylar> cmr: impl { blah, blah, macro!(), blah } <- nope
[06:25:23] <dbaupp> skrylar: there are at least two solutions for that
[06:25:39] <skrylar> dbaupp: I'm already aware of making a macro which brings its own impl block, i *did* read the github ticket about it
[06:25:39] <cmr> It's not weird when you consider what they actually do: transform tokens into AST, using user-provided rules.
[06:25:53] <dbaupp> skrylar: ok, then it's not such a problem?
[06:25:54] <cmr> You can't expand a macro into *part* of an AST node
[06:26:06] <dbaupp> cmr: in theory, we could
[06:26:09] <dbaupp> kinda
[06:26:11] <skrylar> dbaupp: its more 'it would feel more natural if they worked like X'
[06:26:25] <skrylar> yes I can work around it by making a macro which accepts a recursive list and then a bunch of special cases
[06:26:28] <skrylar> no that doesn't feel right
[06:26:28] <dbaupp> skrylar: yes
[06:26:51] <dbaupp> we all agree that macros expanding to methods would be nice
[06:26:55] <skrylar> usually when you mention macros people think LISP, which means "inserts whatever comes out from it"
[06:27:02] <cmr> skrylar: as the macro tutorial states: not for the faint of heart :p
[06:27:05] <dbaupp> it's just low priority because of how easy it is to work around
[06:27:07] <skrylar> actually a macro can expand to a method, dbaupp 
[06:27:11] *** brianm is now known as zz_brianm
[06:27:19] *** zz_brianm is now known as brianm
[06:27:23] <skrylar> it just can't be used within certain areas, because the lexer/parser don't check it
[06:27:30] <brianm> gotta run, kids waking me too soon
[06:27:33] *** brianm is now known as zz_brianm
[06:27:35] <skrylar> glfw-rs definitely has macros produce callable methods
[06:27:47] <dbaupp> not via `impl Foo { macro!() }`
[06:27:50] <dbaupp> I can guarantee it
[06:28:10] <skrylar> no, glfw-rs puts them at the top level and they just produce top level functions
[06:28:22] <skrylar> the github said you can have the macro produce a dozen impl Foo { macro method here } though
[06:28:55] <bjz> yeah
[06:28:59] <Edwards> That's how the Int traits work too
[06:29:12] <bjz> you could also generate an entire impl in a macro
[06:29:25] <bjz> but that causes some hairy problems
[06:29:48] <dbaupp> skrylar: yes, I don't understand why this is a problem other than being slightly uglier than one might like?
[06:29:55] <bjz> when trying to parse other methods embedded in it
[06:30:33] <bjz> but you could also just have multiple other separate impls (but that doesn't solve trait impls, only type impls)
[06:33:18] *** Quits: lessless (lessless@moz-F3755E99.emplot.net) (Ping timeout)
[06:40:07] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[06:41:17] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[06:42:25] <wycats_> how do I specify "any closure" as a type
[06:42:30] <wycats_> I tried || but nada
[06:42:35] <wycats_> Option<||> got angry
[06:43:13] <cmr> wycats_: can't, you need to specify the arguments and return types. || just means "no arguments, no return value", not any closure
[06:43:21] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[06:43:22] <cmr> || *should* work
[06:43:25] <wycats_> I want no arguments no return type
[06:43:26] <cmr> what about || -> () ?
[06:43:30] <Edwards> rusti: let x : Option<||> = None;
[06:43:32] -rusti- pastebinned 6 lines of output: http://ix.io/9zB
[06:43:41] <dbaupp> Edwards: rusti is too old
[06:43:46] <Edwards> Ah
[06:43:55] <wycats_> https://www.irccloud.com/pastebin/cAxwXYDS
[06:43:58] <wycats_> that's what I get
[06:44:05] <wycats_> pointing at the first |
[06:44:09] <dbaupp> 'a ||
[06:44:31] <cmr> oh it's in a struct
[06:44:41] <wycats_> struct State<'a> { ... }
[06:44:42] <wycats_> ?
[06:44:45] <dbaupp> yeah
[06:44:55] <dbaupp> and then Option< <'a>||>
[06:44:59] <dbaupp> the space is requierd
[06:45:01] * dbaupp files a bug
[06:45:58] <dbaupp> wait
[06:46:01] <wycats_> nfa.rs:32:19: 32:26 error: missing lifetime specifiernfa.rs:32   handler: Option< <'a> ||>,
[06:46:03] <dbaupp> that doesn't seem to work :/
[06:46:11] <wycats_> and now it wants me to always instantiate State with a lifetime
[06:46:12] <Edwards> There. Project #2 for tonight finished. Wrote some long-term (post-1.0) ideas that I want to see in Rust. http://tilmonedwards.com/2013/12/30/rust-ideas.html
[06:46:14] <wycats_> this seems... wrong?
[06:46:21] <dbaupp> wat
[06:46:26] <dbaupp> this seems impossible
[06:46:37] <wycats_> dbaupp: surely I am allowed to just specify "closure" as a type?
[06:46:42] <wycats_> without jumping through lifetime hoops?
[06:46:53] <dbaupp> no, it captures things
[06:46:55] <dbaupp> by ref
[06:46:59] <dbaupp> so they need lifetimes
[06:47:09] <cmr> wycats_: well you need the lifetime for the same reason you need lifetimes on stored borrowed pointers in structs
[06:47:11] <wycats_> can I use a proc?
[06:47:18] <dbaupp> if you only need to call it once
[06:47:24] <wycats_> hmmm
[06:47:25] <wycats_> no
[06:47:36] <cmr> Edwards: did you see the single inheritance proposal?
[06:47:37] <wycats_> can I take a method on an object?
[06:47:39] *** Quits: telotortium (rmi1@moz-46F0EE50.hsd1.ca.comcast.net) (Quit: telotortium)
[06:47:48] <wycats_> some_obj.some_meth ?
[06:47:52] <Edwards> cmr: I didn't.
[06:48:17] <wycats_> dbaupp: anyway, I can't figure out how to give it a lifetime
[06:48:28] <wycats_> what's the type of a method?
[06:48:38] <cmr> Edwards: http://smallcultfollowing.com/babysteps/blog/2013/10/24/single-inheritance/
[06:48:43] * Edwards reads.
[06:49:30] <dbaupp> wat wat wat
[06:49:38] * dbaupp has a feeling this is completely broken
[06:49:40] <cmr> Edwards: there's also some some vague long-term plans to have a Fn<..Args, ReturnType> trait, with variadic type parameters..
[06:50:05] <wycats_> dbaupp: what's the type of some_obj.some_meth?
[06:50:16] <Edwards> Nice
[06:50:18] <skrylar> Can't the DOM be modeled as an enum of sorts?
[06:50:36] <skrylar> I sorta thought Rust favored composition over inheritance
[06:50:59] <wycats_> skrylar: the entire DOM?
[06:51:10] <cmr> skrylar: it does, but the DOM? no.
[06:51:18] <wycats_> I would think the DOM would be a good fit for traits
[06:51:28] <wycats_> impl Node for DivElement
[06:51:28] <olsonjeffery> sinec the closure type specification syntax went all bloo-ey ive just taken to using more bare functions as first-class fn params
[06:51:35] <wycats_> impl Element for DivElement
[06:51:42] <olsonjeffery> a rose by another name
[06:51:43] <skrylar> though that does get back to something i said before, about having an overloadable operator for 'forwarding'
[06:51:50] <wycats_> olsonjeffery: what is the type of a bare function?
[06:51:56] <skrylar> like D had, which you could fake inheritance with, or use it for smart pointers
[06:52:02] <sfackler> wycats_: methods aren't first classs
[06:52:03] <dbaupp> https://github.com/mozilla/rust/issues/11209
[06:52:05] <dbaupp> is one issue
[06:52:09] <wycats_> sfackler: :/
[06:52:20] <sfackler> wycats_: a bare function has type "fn(arg1, arg2) -> ret"
[06:52:21] <olsonjeffery> wycats_: `cb: fn(int, ...) -> Bar`
[06:52:21] <wycats_> so there's no way to give an object/method as a thing to call
[06:52:24] <cmr> wycats_: fn()
[06:52:30] *** Quits: z0w0 (zack@moz-356923D4.lnse4.woo.bigpond.net.au) (Quit: z0w0)
[06:52:39] <skrylar> wycats_: are you trying to do event callbacks?
[06:52:47] <olsonjeffery> use references where you'd be capturing stuff
[06:52:51] <cmr> `|| some_obj.some_method()` is the workaround
[06:52:53] <wycats_> skrylar: I'm trying to add handlers to an NFA impl I wrote
[06:52:55] <olsonjeffery> and you can handle the lifetimes that way
[06:52:58] <sfackler> wycats_: some_obj.some_method is the same as || some_obj.some_method()
[06:53:03] <skrylar> wycats_: Cocoa style delegates still work
[06:53:09] <wycats_> skrylar: how?
[06:53:12] <skrylar> Make a trait, put "x_did_explode" in it
[06:53:15] <olsonjeffery> it's less weird, imo, than how its laid out in closures. ive gotten stuff to work that way that i was battling the compiler and just gave up on on
[06:53:26] <olsonjeffery> also: yeah.. listen to the counsel against cb-style stuff, in general
[06:53:26] <wycats_> ugh fn() doesn't have Eq
[06:53:29] <skrylar> you can make unit structs that implement the delegate trait, and assign it
[06:53:47] <skrylar> which is basically C++ functors at that point
[06:53:59] <wycats_> olsonjeffery: I guess I can just do Java style Callback::new().run()
[06:54:02] <dbaupp> https://github.com/mozilla/rust/issues/11210 is another
[06:54:15] <olsonjeffery> strategy pattern up in this place
[06:54:17] <skrylar> wycats_: no need; you can store a trait type or a reference to one
[06:54:26] <skrylar> blah.unpack().x_did_explode()
[06:54:27] <wycats_> skrylar: say more
[06:54:38] <wycats_> hm
[06:54:39] <skrylar> i should write a tip about that and shove it on the gist
[06:54:42] <cmr> Edwards: so except for partial functions, I think all of your wants will be addressed, if not sooner than later :)
[06:54:51] <Edwards> cmr: Awesome.
[06:54:56] <wycats_> so in my case I guess I can have some_trait_object.entered(state: State)
[06:54:56] <Edwards> (Partial functions would be rad though.)
[06:55:11] <cmr> I don't know if they're on anyones radar
[06:55:23] <olsonjeffery> i feel like HKT is the one pie-in-the-sky feature we're missing
[06:55:32] <olsonjeffery> ignore the people who want effect systems, we already tried that!
[06:55:46] <wycats_> same issue with Eq
[06:55:55] <cmr> well an effect system like bblum proposed would still be super nice.
[06:56:04] <olsonjeffery> granted.
[06:56:06] <cmr> though not without its problems :(
[06:56:09] <olsonjeffery> pure was pretty limited
[06:56:14] <wycats_> I'm just gonna impl my own Eq
[06:56:17] <wycats_> instead of deriving
[06:56:38] <olsonjeffery> wycats_: so i guess im missing some background.. why are you comparing fn handles?
[06:56:47] <cmr> wycats_: iirc you can specify which fields it willl use, #[deriving(Eq(field_a, field_b))]
[06:56:50] <wycats_> I'm comparing states
[06:56:53] <cmr> Maybe I'm hallucinating that PR though
[06:56:57] <wycats_> tl;dr each state has n child states
[06:56:59] * olsonjeffery wonders if this would matter if/when all closure/first-class-functions become thunks
[06:57:02] <cmr> dbaupp: was that a thing?
[06:57:03] <wycats_> when I go to insert a child state
[06:57:08] <wycats_> I first check to see whether it's already there
[06:57:09] *** Quits: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au) (Ping timeout)
[06:57:12] <skrylar> is the callback issue a big enough thing i should write up a tip for it?
[06:57:25] <cmr> skrylar: I think so, it's a fairly common pattern that emerges.
[06:57:40] <skrylar> alright, i'll make a note of it
[06:57:45] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[06:57:46] <olsonjeffery> wycats_: so i think, in that case, your dig about "i could go java style" is kind of unwarranted
[06:58:07] <olsonjeffery> because you're hoping that a random edge case (impl random traits for fn types) would be there so you could shortcut having to make a type to represent that state
[06:58:15] <skrylar> cmr: i always figured that the Obj-C style of callbacks was what we were supposed to do, when they are done
[06:58:23] <skrylar> though i'm not sure what the overheads are on making chan's
[06:58:33] <dbaupp> cmr: the PR was r-'d
[06:58:40] <cmr> dbaupp: shame
[06:59:11] <dbaupp> wycats_, cmr: https://github.com/mozilla/rust/issues/11211 
[06:59:15] <wycats_> olsonjeffery: calm yourself
[06:59:15] <skrylar> e.g. if one Chan per GUI control is appropriate or not
[06:59:46] <wycats_> olsonjeffery: I made a type to represent the state :)
[06:59:46] * olsonjeffery is thusly chastened.
[06:59:56] <wycats_> I was hoping to be able to use a closure to represent a handler
[06:59:58] <olsonjeffery> wycats_: well im just saying: your rubyist is showing :P
[06:59:58] <wycats_> but I can't
[06:59:59] <wycats_> so be it
[07:00:06] <olsonjeffery> quit trying to cheat The Man
[07:00:06] <wycats_> olsonjeffery: I really, really don't think so
[07:00:12] <wycats_> definitely do not think so
[07:00:23] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[07:00:25] <cmr> wycats_: those two bugs are super unfortunate
[07:00:30] <cmr> I'm surprised we don't have tests for them.
[07:01:02] <olsonjeffery> can you still represent a fn type as a *u8?
[07:01:15] <wycats_> olsonjeffery: I was just trying to model a handler for when you enter a state
[07:01:15] <cmr> not safely
[07:01:18] <olsonjeffery> wycats_: that's probably your last resort (referential comparison)
[07:01:28] <wycats_> I do not feel like wanting to model a handler as a closure == zomg ruby
[07:01:43] <olsonjeffery> wycats_: im giving you a hard time, but ok. point yielded.
[07:01:55] * wycats_ stops being a crank
[07:02:10] <wycats_> it's ok... I am always told my rubyist is showing
[07:02:16] <skrylar> yay ruby
[07:02:20] <wycats_> when I asked for TCP-friendly closures in JS
[07:02:22] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[07:02:25] <skrylar> that's okay, my Obj-C'ist was showing by recommending delegates :P
[07:02:28] <wycats_> someone wrote something similar in the HN comments
[07:02:38] <wycats_> skrylar: delegates are actually reasonable in this situation
[07:02:43] <cmr> TCP isn't an unreasonable request.
[07:02:55] <skrylar> yes but nobody outside of Apple says "eventDidHappen"
[07:02:57] <wycats_> cmr: indeed it is not
[07:03:00] <olsonjeffery> wycats_: well, you're [more of] a known quantity. you have a corpus of work. so really i can understand not wanting to be tarred w/ that brush constantly.
[07:03:02] <wycats_> skrylar: and Ember ;)
[07:03:08] <skrylar> I haven't heard of Ember
[07:03:08] <wycats_> olsonjeffery: cooonfirm
[07:03:08] <olsonjeffery> we affirm you
[07:03:13] <wycats_> olsonjeffery: :P
[07:03:13] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[07:03:29] <skrylar> I did like the naming of NS libs though; there was a very good degree of consistency as to what "didX" meant 
[07:03:36] <wycats_> skrylar: yeah
[07:03:40] <wycats_> Ember basically copied that naming
[07:03:43] <wycats_> in a lot of places
[07:03:50] <wycats_> at the moment I'm just writing the base NFA library for a simple routing librayr
[07:03:52] <skrylar> I should keep that when I make my GUI lib
[07:04:03] <wycats_> https://gist.github.com/8178771
[07:04:51] <cmr> wycats_: router? as in URL router?
[07:04:59] <wycats_> right
[07:05:20] <cmr> hopefully usable with rust-http? I'll love you forever if so, and you release it :)
[07:05:29] <wycats_> cmr: yes the goal is usable with rust-http
[07:05:44] * skrylar ponders
[07:05:48] <wycats_> so the base NFA is just a character chomper
[07:05:50] <skrylar> all this talk about http in rust
[07:05:56] <skrylar> it makes me think we need a Sinatra port, lol
[07:06:02] <cmr> skrylar: we have one!
[07:06:11] <cmr> https://github.com/skade/widmann
[07:06:13] <wycats_> the thing on top converts ":foo" into a state that loops back on itself with "/" as the only invalid character
[07:06:38] <wycats_> man that is one ugly sinatra clone
[07:06:42] <cmr> yup
[07:07:05] <wycats_> what's he doing with ~"/foo/(?<id>.*)"
[07:07:09] <wycats_> there's no regex in rust
[07:07:16] <wycats_> rust-pcre
[07:07:18] <wycats_> makes sense
[07:07:33] <wycats_> I'm just not bothering and writing the subset of the engine I need in Rust
[07:07:37] <wycats_> basically did the same in JS
[07:07:42] <dbaupp> bstrie_mojitos: ping
[07:07:53] <olsonjeffery> i feel like rust doesn't "deserve" something as nice as sinatra. we should be happy with WSGI.
[07:07:55] <wycats_> the win of that is efficiency and ability to sort solutions that include "/new" and "/:id"
[07:08:00] <wycats_> if someone goes to /new
[07:08:07] <wycats_> you want /new to win and not "/:id"
[07:08:11] <wycats_> olsonjeffery: lololol
[07:08:12] <olsonjeffery> let us wear our pragmatic syntax like a badge of honor
[07:08:19] <wycats_> olsonjeffery: my doubts are increasing
[07:08:20] <skrylar> wycats_: you could just do a glob or PEG engine instead of regex
[07:08:43] <skrylar> it works for lua most of the time
[07:08:58] <olsonjeffery> wycats_: doubt is the foundation of faith.
[07:09:02] *** Quits: sigma1 (sigma@moz-BFB7A653.range86-143.btcentralplus.com) (Ping timeout)
[07:09:03] <cmr> skrylar: I'm going to implement lua patterns in the next 9 days.
[07:09:05] <wycats_> O'
[07:09:18] <wycats_> I'm writing a very simple version of the Russ Cox NFA simulator
[07:09:27] <skrylar> cmr: any idea how expensive chans are to make?
[07:09:36] <skrylar> I'm not sure whether to recommend their use liberally or not
[07:09:36] <cmr> skrylar: not super cheap.
[07:09:46] <cmr> but not all that expensive either
[07:09:46] <skrylar> yeah, so each Button having a chan is bad
[07:09:57] <dbaupp> no
[07:10:08] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[07:10:10] <wycats_> I'm probably not doing myself any favors by making so many owned vectors as intermediaries
[07:10:11] <dbaupp> as long as you don't have tens of thousands of buttons
[07:10:20] <cmr> being created every second :P
[07:10:40] <skrylar> well there's a lot of actionable objects in the GUI for some pro tools :/
[07:10:40] <wycats_> lolol
[07:10:45] *** Joins: valenting (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP)
[07:10:48] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[07:10:52] <skrylar> i think 3DS max has a few hundred menu buttons just there
[07:11:05] <wycats_> btw: It kind of sucks that HashMap isn't itself IterBytes/Hash
[07:11:09] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[07:11:25] <wycats_> can't build abstractions using HashMaps that are themselves used in a set
[07:11:26] <olsonjeffery> wycats_: you could submit a patch!
[07:11:28] <olsonjeffery> it's totally doable
[07:11:31] <wycats_> olsonjeffery: I could!
[07:11:34] <wycats_> I should!
[07:11:41] <skrylar> though I guess there's the option of using a mix between Obj-C delegates for event types, and then using Option<Delegate> so there's only a port there if you request it to
[07:11:45] <cmr> wycats_: TreeMap can be nested I think... it's how extra::json works afaik
[07:11:51] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[07:11:55] <olsonjeffery> IterBytes is pretty straightforward to do.
[07:11:59] <wycats_> cmr: hm... I think I checked
[07:12:40] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Ping timeout)
[07:12:45] <wycats_> I thought TreeMap didn't implement TotalOrd
[07:12:54] <cmr> It might not
[07:13:18] <wycats_> JSON doesn't need maps as keys
[07:13:37] <wycats_> in my case I want to store CharacterClasses in a Set
[07:13:41] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[07:13:48] <dbaupp> skrylar: `fn main() { let _v = std::vec::from_fn(1_000_000, |_| Chan::<int>::new()); }` takes 0.5 seconds on my computer
[07:13:51] <olsonjeffery> wycats_: im starting to grow this gnarly data structure that is a bunch of HashMaps at the top level, all of which have int/uuid keys and Pod values.. and using weak refs of the keys w/i them
[07:13:52] <cmr> oh as keys
[07:13:55] <cmr> duh
[07:13:57] <cmr> sorr
[07:13:59] <cmr> y
[07:14:00] <olsonjeffery> which is kind of meh. but i don't think there's a better way.
[07:14:04] <dbaupp> skrylar: I don't think you'll need a million chans?
[07:14:08] <olsonjeffery> i want to see how strcat's Weak/Strong stuff shakes out
[07:14:13] <olsonjeffery> that might be a solution
[07:14:21] <olsonjeffery> but i want to keep serialization in mind,  as well
[07:14:41] <wycats_> olsonjeffery: I guess I could implement Hash manually
[07:14:46] <wycats_> but the problem is order
[07:14:57] <wycats_> I started to mess around with implementing IterBytes
[07:14:59] <wycats_> it got gnarly
[07:15:05] <olsonjeffery> i would iterbytes
[07:15:15] <olsonjeffery> you get a callback that you can call as many times as you want with byte slices
[07:15:22] <wycats_> yeah I looked at the API
[07:15:23] <olsonjeffery> you can deterministically walk the buckets
[07:15:28] <wycats_> how?
[07:15:39] <wycats_> ah I guess using the private data
[07:15:46] <olsonjeffery> yeah. you have access to the interior.
[07:15:48] <wycats_> yeah I was trying to do it using the public API only
[07:15:59] *** Joins: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP)
[07:16:01] <olsonjeffery> nah. i think you would have to do it in std::hashmap
[07:16:05] <wycats_> yeah
[07:16:18] <skrylar> dbaupp: no but a thousand might not be out of hand, for really complex UIs
[07:16:37] <skrylar> (e.g. Blender level UIs)
[07:16:38] <cmr> skrylar: a thousand shouldn't be a problem
[07:16:40] <wycats_> it seems problematic for a thousand chans to be the limit of what Rust an do
[07:16:41] <dbaupp> skrylar: well, you're fine then
[07:16:41] <wycats_> can*
[07:16:46] <wycats_> acrichto: ^^
[07:16:50] <dbaupp> skrylar: that'll take about 1ms to create them all :)
[07:16:59] <dbaupp> easy as pie
[07:17:06] <skrylar> dbaupp: just wanted to check, because i was going to write a callback tip based on wycats_ problem earlier
[07:17:14] <skrylar> i wasn't familiar with the overhead for chans to recommend those
[07:17:27] <acrichto> wycats_: do we have something limiting us to 1k chans?
[07:17:33] <olsonjeffery> i think the real question here is "do you want to grow an unbounded collection of communication primitives?"
[07:17:36] <olsonjeffery> not "can i?"
[07:17:38] <skrylar> acrichto: no, its a response to me asking about chan overhead
[07:17:39] <wycats_> acrichto: people were saying that more than 1,000 seems dangerous
[07:17:47] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[07:17:51] <wycats_> I would not have expected that
[07:17:52] <acrichto> 1k should be totally reasonable
[07:17:57] <dbaupp> wycats_: we weren't, and it's not :)
[07:18:17] <skrylar> acrichto: its mostly a question of, "is it Rust-y to make a chan/port slot for each GUI widget?" or possibly more depending on the event types
[07:18:26] <dbaupp> (fwiw, creating a channel is about the same cost as sending 5 messages, based on a tiny micro benchmark.)
[07:18:40] <wycats_> dbaupp: oh I misread :)
[07:18:41] <skrylar> i thought about having a single port and a bit mask for an event filter, to prevent widgets sending events you don't care about
[07:18:51] <acrichto> skrylar: kinda depends on the constraints, allocating a channel isn't super cheap, so if the benchmark is creating/destroying rapidly then probably not
[07:19:01] <acrichto> skrylar: if it's just having channels idle then sure, that seems totally reasonable
[07:19:09] <wycats_> "<dbaupp> as long as you don't have tens of thousands of buttons"
[07:19:11] <skrylar> acrichto: its not a benchmark scenario; its based on a GUI system
[07:19:14] <wycats_> sorry the number he used was 10s of thousands
[07:19:14] <dbaupp> well, maybe sending 10
[07:19:19] <wycats_> which also doesn't seem that high
[07:19:25] <skrylar> so, lots of ports/channels which are largely doing very little
[07:19:30] <dbaupp> wycats_: yup, that was just a top-of-my-head estimate
[07:19:33] <skrylar> since mouse movement events are handled through a call chain instead of ports
[07:19:38] <acrichto> skrylar: that's totally reasonable, an idle channel has no overhead
[07:19:49] <dbaupp> wycats_: I did some testing above too... creating 1 million only took 0.5 seconds
[07:19:55] <skrylar> acrichto: still has RAM overhead
[07:19:55] <wycats_> sweet
[07:20:17] <wycats_> honestly, a good GUI system uses the Cocoa approach of rendering only the items in a list that are on screen
[07:20:18] <skrylar> i should set up a blog on my website instead of storing all these tips on a gist. xD
[07:20:26] <wycats_> so having 10k widgets that actually need to be active at a time
[07:20:34] *** Quits: james4k (james@moz-1FE2B9B1.tyrdcmta03.hnsntx.tl.dh.suddenlink.net) (Ping timeout)
[07:20:36] <wycats_> means your GUI framework is depressingly naive
[07:20:45] *** Joins: pao (pao@moz-AF905E87.fbx.proxad.net)
[07:20:46] <skrylar> wycats_: render != in memory
[07:20:57] <skrylar> IIRC blender doesn't destroy widgets on inactive tabs, but it doesn't render them
[07:21:07] <wycats_> skrylar: cocoa actually destroys them
[07:21:11] <olsonjeffery> what replaced #[link] ?
[07:21:14] <wycats_> it only keeps 10 rows around period
[07:21:21] <wycats_> and replaces them with new content as you scroll
[07:21:21] <acrichto> 1M channels takes me 0.77s to create/destroy and 387MB of memory
[07:21:24] <skrylar> wycats_: thats also a list control though
[07:21:36] <sfackler> olsonjeffery: at the crate level? crate_id
[07:21:45] <wycats_> outside of a list it's very very hard to get more than a few hundred widgets on the screen at a time
[07:21:54] <skrylar> wycats_: sometimes you get toolbar palettes, especially in workstation apps
[07:22:19] *** Quits: pao (pao@moz-AF905E87.fbx.proxad.net) (Quit: pao)
[07:22:22] <skrylar> but it sounds like making a chan for each widget is the correct thing to do (and I wouldn't make list items a widget, they usually aren't in scroll lists)
[07:22:28] <olsonjeffery> sfackler: so no more uuid/url ?
[07:22:31] *** Joins: pao (pao@moz-AF905E87.fbx.proxad.net)
[07:22:37] <olsonjeffery> or are those attributes on crate_id as they were on link before?
[07:22:41] <skrylar> usually they are a virtual object or something unique to the list component, and not a full widget
[07:23:08] *** Quits: pao (pao@moz-AF905E87.fbx.proxad.net) (Quit: pao)
[07:23:49] <dbaupp> Edwards: fwiw, I like the `match x y` idea, but not the partial function one... having complete pattern matches makes refactoring much much easier
[07:24:05] <dbaupp> add a variant to an enum => compiler error on all the `match`s that need updating
[07:24:14] <dbaupp> (assuming there's no use of `_` of course.)
[07:24:46] <dbaupp> olsonjeffery: it's of the form `#[crate_id="url.com/foo/bar#0.1]` aiui
[07:25:12] <dbaupp> olsonjeffery: or #[crate_id="url#crate_name:0.1"] if it differs from the basename of the url
[07:25:28] *** Joins: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au)
[07:26:04] <dbaupp> Edwards: also `S { a: 3, .. other }` for the last one
[07:26:27] *** Quits: ofeldt (ofeldt@moz-B7E2366D.dip0.t-ipconnect.de) (Ping timeout)
[07:26:39] <olsonjeffery> so no more uuid?
[07:26:49] <dbaupp> don't think so
[07:26:55] <wycats_> uuid is removed?
[07:27:07] <wycats_> extra::uuid?
[07:27:08] <dbaupp> replaced by the url being a unique identifier, I believe
[07:27:14] <wycats_> ah no
[07:27:14] <acrichto> just from the #[link] attributes of crates, not the library
[07:27:17] *** Quits: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au) (Ping timeout)
[07:27:22] <wycats_> you're talking about something else
[07:27:23] <wycats_> phew
[07:27:38] * dbaupp removes extra::uuid just to annoy wycats_ ;P
[07:27:45] <wycats_> nooooo
[07:27:55] <wycats_> I had a comment in my production code // add uuid
[07:27:56] <acrichto> r+
[07:27:59] <wycats_> and I was like
[07:28:03] <wycats_> zomg this will be easy
[07:28:05] <wycats_> use extra::uuid
[07:28:09] *** Joins: mib_d60uoi (Mibbit@moz-1095CD08.kanagawa.ocn.ne.jp)
[07:28:10] * wycats_ looks at sky
[07:28:13] <wycats_> NOOOOOOOOOOOOOOO
[07:28:20] <wycats_> DBAUUUUUUUUUUUPP
[07:28:25] <olsonjeffery> hah. the url being a unique id, you say?
[07:28:41] <dbaupp> olsonjeffery: in theory :P
[07:28:42] <olsonjeffery> so if you have multiple crates in a single workspace in a github repo?
[07:28:58] <dbaupp> url + the crate name after the #
[07:29:06] * dbaupp shrugs
[07:29:17] <dbaupp> I haven't really tried any of this at all.
[07:29:23] <olsonjeffery> i'm not trying to be a downer, really.
[07:29:26] <acrichto> ladies and gentlement, prepare your ccaches!
[07:29:30] <olsonjeffery> well ill report back. i built rust this morning.
[07:29:34] <olsonjeffery> ah, c'mon.
[07:29:40] <dbaupp> acrichto: *ladiest
[07:29:46] <wycats_> don't worry... it will probably change from crate_id at least 3-4 more times
[07:29:47] <acrichto> an llvm upgrade looms!
[07:29:52] <wycats_> oh noes
[07:29:54] <sfackler> olsonjeffery: the multi-crate per repo configuration hasn't really been worked out yet
[07:30:06] <wycats_> side benefit of llvm upgrade: I don't have to pay for heat in my office that day
[07:30:11] <olsonjeffery> i hear rustpkg will be redesigned, which makes me sad.
[07:30:11] * skrylar takes a moment to recommend tim pope's vim scripts when writing rust and c ._.
[07:30:15] <olsonjeffery> i just figured out how it works!
[07:30:23] <wycats_> olsonjeffery: I'm planning on doing some work on it
[07:30:24] <olsonjeffery> (i don't think it's bad. just hard to document, heh)
[07:30:26] <wycats_> in 2014
[07:30:30] <wycats_> olsonjeffery: it's pretty bad :P
[07:30:33] *** Joins: ofeldt (ofeldt@moz-B7E2366D.dip0.t-ipconnect.de)
[07:30:50] <wycats_> olsonjeffery: it could be doing a lot more
[07:30:52] <skrylar> one of them lets you toggle between snake_case and MixedCase which is really useful if you need to convert C code :3
[07:30:54] <wycats_> especially to help the ecosystem build
[07:32:03] <olsonjeffery> well, given your experience and insight into this problem domain, im excited to see what you propose.
[07:33:17] *** Quits: ofeldt (ofeldt@moz-B7E2366D.dip0.t-ipconnect.de) (Ping timeout)
[07:33:20] <wycats_> olsonjeffery: :D
[07:33:38] <wycats_> olsonjeffery: I'm glad I have at least a little credibility on this front
[07:33:58] <wycats_> olsonjeffery: maybe the Rust community will finally be the "takes software seriously" community I've been looking for
[07:35:16] <olsonjeffery> acrichto: so i know start_on_main_thread went away.. what are we supposed to do, now? apologies if i missed something in the announcement.
[07:35:35] <acrichto> olsonjeffery: the main thread is essentially a 1:1 task now with libnative
[07:36:06] <olsonjeffery> so #[start] is in a 1:1 Runtime already?
[07:36:14] <olsonjeffery> or what..
[07:36:31] <olsonjeffery> i currently have a #[start]fn start() { std::start_on_main_thread(); }
[07:36:33] <acrichto> #[start] => native::start => 1:1 task => green::SchedPool
[07:36:34] *** Joins: ofeldt (ofeldt@moz-B7E2366D.dip0.t-ipconnect.de)
[07:36:35] <olsonjeffery> and then my main() { .. }
[07:37:03] <olsonjeffery> this is the ol' "i have to run main() on the main thread because OSX gui blah blah"
[07:37:22] <acrichto> olsonjeffery: https://gist.github.com/anonymous/8162399
[07:37:45] <acrichto> olsonjeffery: also https://mail.mozilla.org/pipermail/rust-dev/2013-December/007565.html 
[07:37:51] <acrichto> we need better official documentation on this
[07:38:04] <skrylar> hrm, i wonder if this would work in rust: i've pondered about adapting the way nanoc works and using it as a build system for code
[07:38:07] <olsonjeffery> time enough for good docs in the grave!
[07:38:28] <skrylar> nanoc basically just takes a content folder and a set of URL routing rules, and runs filters on it
[07:38:28] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[07:39:38] <sfackler> wow, rpass tests run way faster on my laptop's ssd than on a virtual disk on top of a slow spinny disk on my desktop :D
[07:40:06] <sfackler> uh, is there any reason make check generates a message.txt file in the root of the rust tree?
[07:40:31] <acrichto> sfackler: oh lol it's the doc-std tests
[07:40:38] <acrichto> let mut file = File::create(&Path::new("message.txt"));
[07:40:40] <sfackler> oh yeah, haha
[07:40:45] <olsonjeffery> acrichto: this is nice, thanks! i guess ill try out 1:1 in my project and see how far it takes me.
[07:41:00] <acrichto> olsonjeffery: if you run into snags, do tell!
[07:41:08] <olsonjeffery> can do
[07:42:44] *** Quits: ofeldt (ofeldt@moz-B7E2366D.dip0.t-ipconnect.de) (Ping timeout)
[07:43:20] *** Quits: mib_d60uoi (Mibbit@moz-1095CD08.kanagawa.ocn.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[07:44:46] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[07:45:15] <olsonjeffery> error: Package client depends on native, but I don't know how to find it
[07:45:25] <olsonjeffery> it isn't "just there", ala extra?
[07:45:36] <acrichto> should be
[07:45:40] <olsonjeffery> hm.
[07:45:42] <acrichto> on recent compilers
[07:45:47] <olsonjeffery> yeah i built this morning.
[07:46:06] <olsonjeffery> rustc 0.9-pre (aa5d779 2013-12-29 08:22:04 -0800)
[07:46:10] <acrichto> hm...
[07:46:14] <acrichto> look inside the target lib dirs
[07:46:17] <acrichto> libnative should be in there
[07:46:33] <olsonjeffery> huh! it isn't
[07:46:35] <olsonjeffery> libgreen is
[07:46:35] *** Joins: ofeldt (ofeldt@moz-B7E2366D.dip0.t-ipconnect.de)
[07:46:44] <acrichto> look deeper
[07:46:49] <acrichto> lib/$target/lib
[07:46:52] <acrichto> rustc/$target/lib
[07:46:57] <olsonjeffery> oh wait.. well i looked in ~/lib
[07:47:03] <olsonjeffery> so maybe its missing form make install?
[07:47:09] <olsonjeffery> ill look in my build dir
[07:47:17] <acrichto> the ones directly in ~/lib aren't linked against by the compiler
[07:47:26] <acrichto> the compilers uses the ones in ~/lib/rustc/$target/lib
[07:48:28] <olsonjeffery> ok its there
[07:48:36] *** Joins: derek_c (derek@5D95999B.727D7A21.EB673A25.IP)
[07:48:40] <olsonjeffery> in ~/lib/rustc/$target/lib
[07:48:51] <acrichto> hm, that should be found then
[07:49:12] <wycats_> is there a char.to_str()?
[07:49:21] *** Quits: ofeldt (ofeldt@moz-B7E2366D.dip0.t-ipconnect.de) (Ping timeout)
[07:49:28] <dbaupp> rusti: 'a'.to_str()
[07:49:29] -rusti- ~"a"
[07:50:41] <olsonjeffery> acrichto: maybe its rustpkg?
[07:50:50] <olsonjeffery> i can compile the pool.rs example w/ rustc
[07:50:52] <derek_c> I'm looking for a way to *combine* several traits.  Say I have this `trait Logable: ToStr + TotalOrd {}`.  Now, I have a function that accepts Logable objects.  However, I can't pass an object that implements both ToStr and TotalOrd to the function.  How do I get around this?
[07:51:23] <Yurume> derek_c: there is a workaround: trait Logable {} impl<T:ToStr+TotalOrd> Logable for T {}
[07:51:28] <acrichto> olsonjeffery: ah yes I think rustpkg doesn't look inside target libs, it only looks at the host rustc libs
[07:51:47] <olsonjeffery> acrichto: well it obviously has a whitelist, e.g. extern mod extra
[07:52:04] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[07:52:04] <olsonjeffery> well. s/obviously/perhaps/
[07:52:14] <derek_c> Yurume: ah! that's smart
[07:52:17] <derek_c> Yurume: thanks
[07:52:36] *** Joins: ofeldt (ofeldt@moz-B7E2366D.dip0.t-ipconnect.de)
[07:52:39] <Yurume> (technically speaking it's not a "workaround" per se, but I think that would work for your use case)
[07:53:04] <olsonjeffery> or is it just that libnative isn't going into ~/lib and that's the issue?
[07:53:10] <olsonjeffery> i guess i can find out..
[07:53:36] <acrichto> olsonjeffery: the issue with rustpkg is that it's searching the wrong set of libraries
[07:53:44] <acrichto> as a consequence rustpkg will never build a static lib right now
[07:53:46] <acrichto> static binary*
[07:54:39] <olsonjeffery> ok yeah i copied libnative into ~/lib and rustpkg isn't choking now.
[07:55:02] <derek_c> Yurume: could you take a look at this? http://upl.io/0pm0di
[07:55:06] <derek_c> it wouldn't compile
[07:55:27] *** Joins: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au)
[07:56:00] *** Quits: valenting (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP) (Ping timeout)
[07:56:17] <dbaupp> derek_c: what's the error?
[07:56:31] <derek_c> error: type `T` does not implement any method in scope named `to_str`
[07:56:32] <Yurume> derek_c: aargh, I now understand your use case,
[07:56:46] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Ping timeout)
[07:57:08] <Yurume> dbaupp: derek_c was trying to define a sum trait of ToStr plus TotalOrd
[07:57:17] <derek_c> yes
[07:57:18] <Yurume> sum? product*
[07:57:24] <Yurume> ...no wait
[07:57:28] <Yurume> an intersection trait*
[07:57:45] *** Joins: valenting (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP)
[07:57:45] <dbaupp> derek_c: write Loggable: ToStr + TotalOrd
[07:57:47] *** Quits: ofeldt (ofeldt@moz-B7E2366D.dip0.t-ipconnect.de) (Ping timeout)
[07:57:57] <dbaupp> rather than just `trait Loggable {}`
[07:58:29] <Yurume> derek_c: in that case
[07:58:46] <Yurume> trait Logable: ToStr + TotalOrd {} impl <T:ToStr+TotalOrd> Logable for T {}
[07:58:47] <Yurume> would work
[07:58:52] <Yurume> albeit it's a bit verbose
[07:58:57] <derek_c> it works
[07:59:01] <derek_c> thanks :)
[07:59:49] <Yurume> derek_c: so that, Logable trait by default provides every other methods from ToStr and TotalOrd, but it has to be implemented somehow, which the impl fulfills
[08:00:10] <derek_c> Yurume: yep I see
[08:00:22] *** Joins: Guest__ (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[08:00:49] <Yurume> hmm, is there any possibility for Logable to be extended in this case?
[08:01:00] <Yurume> I don't think so but I may miss something
[08:01:06] *** Joins: ofeldt (ofeldt@moz-B7E2366D.dip0.t-ipconnect.de)
[08:01:48] <derek_c> Yurume: I'm not trying to extend it
[08:02:03] <derek_c> I just don't want to write ToStr + TotalOrd for everything
[08:02:41] <Yurume> derek_c: I understand your intention by now, but I wonder whether it can be idiomified
[08:03:21] *** Quits: valenting (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP) (Quit: valenting)
[08:03:30] <derek_c> Yurume: how?
[08:03:33] *** Joins: valenting (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP)
[08:04:17] <Yurume> derek_c: that is, is that the only answer to the question "how can I define an intersection trait?".
[08:04:43] *** Joins: Ms2ger (Ms2ger@moz-268A540A.access.telenet.be)
[08:04:54] <derek_c> Yurume: I see. Yeah I wonder why `trait LogIndex: ToStr + TotalOrd {}` can't just suffice
[08:05:39] <Yurume> an impl-less trait is useless (other than a phantom type)
[08:06:06] <dbaupp> derek_c: because it's not guaranteed that everything that implements ToStr and TotalOrd is also a LogIndex in general (although for this use case it is true)
[08:06:21] *** Quits: ofeldt (ofeldt@moz-B7E2366D.dip0.t-ipconnect.de) (Ping timeout)
[08:07:22] <Ms2ger> https://twitter.com/avibryant/status/417517906864271360
[08:07:44] *** flaper87|afk is now known as flaper87
[08:09:12] *** Quits: hacker_sam (hacker_sam@moz-64791626.dsl.bngr.epix.net) (Client exited)
[08:09:13] *** Joins: hacker_sam (hacker_sam@moz-64791626.dsl.bngr.epix.net)
[08:09:21] *** Quits: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[08:09:52] *** Joins: Ms2ger` (Ms2ger@moz-AD843210.ugent.be)
[08:09:54] <wycats_> a wild passing test appears: https://gist.github.com/wycats/8179218#file-lib-rs-L50-L61
[08:09:56] <wycats_> cmr :)
[08:10:06] *** Joins: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP)
[08:10:07] *** Joins: ofeldt (ofeldt@moz-B7E2366D.dip0.t-ipconnect.de)
[08:10:30] *** Quits: Ms2ger (Ms2ger@moz-268A540A.access.telenet.be) (Ping timeout)
[08:10:41] <Yurume> wycats_: Non-deterministic Finite Automaton? :)
[08:11:32] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[08:12:09] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[08:13:24] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Ping timeout)
[08:13:28] <wycats_> Yurume: something like that
[08:13:36] *** Quits: ofeldt (ofeldt@moz-B7E2366D.dip0.t-ipconnect.de) (Ping timeout)
[08:13:57] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[08:14:12] *** Joins: jackneill (jackneill@moz-46453951.pool.digikabel.hu)
[08:14:52] <Yurume> though it looks much like a trie at this stage
[08:15:34] *** flaper87 is now known as flaper87|afk
[08:16:04] <wycats_> Yurume: yeah... it gets more interesting when you support :foo
[08:16:11] <wycats_> which is basically [^\/]*
[08:16:13] <wycats_> well
[08:16:19] <wycats_> [^\/]+
[08:16:39] <wycats_> which is basically a state with CharacterClass::invalid_char('/') that feeds back on itself
[08:17:19] <wycats_> ultimately, instead of just blindly picking the first, pick the most specific
[08:17:26] <wycats_> so /foo beats /:foo which beats /*foo
[08:17:31] <Yurume> wycats_: I think :foo still does not make the automaton a non-trie, you would need some kind of validation or restriction
[08:17:37] *** Joins: ofeldt (ofeldt@moz-B7E2366D.dip0.t-ipconnect.de)
[08:17:45] <wycats_> Yurume: look at the State
[08:17:56] <wycats_> it has restrictions
[08:18:11] <wycats_> a set of valid or invalid chars
[08:18:12] <Yurume> is that this file? https://gist.github.com/wycats/8178771
[08:18:21] <wycats_> yeah
[08:18:33] <wycats_> look at the tests on the bottom
[08:18:34] <Yurume> indeed
[08:21:14] *** Quits: ofeldt (ofeldt@moz-B7E2366D.dip0.t-ipconnect.de) (Ping timeout)
[08:24:10] <wycats_> bedtime bros
[08:24:38] *** Joins: ofeldt (ofeldt@moz-B7E2366D.dip0.t-ipconnect.de)
[08:26:26] *** Quits: ofeldt (ofeldt@moz-B7E2366D.dip0.t-ipconnect.de) (Ping timeout)
[08:26:27] *** Joins: mentero (mentero@moz-D61C6F02.proxnet.pl)
[08:26:50] *** Quits: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au) (Ping timeout)
[08:28:31] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[08:29:18] <derek_c> can someone tell me why this doesn't work?
[08:29:18] <derek_c> http://upl.io/8m7x0t
[08:29:34] <derek_c> error is: http://upl.io/jn4s2w
[08:30:08] *** Joins: ofeldt (ofeldt@moz-B7E2366D.dip0.t-ipconnect.de)
[08:30:25] *** Joins: benjamin_ (benjamin@moz-9DA121B7.dip0.t-ipconnect.de)
[08:30:50] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:31:17] <santiago> I see some people in reddit comments saying that pointer sigils are being removed, but I can't seem to find anything on the mailing list archives in recent months... is there anything written about how that is going to happen? 
[08:31:21] *** Quits: zeittunnel (benjamin@moz-1946C812.dip0.t-ipconnect.de) (Ping timeout)
[08:31:41] <Ms2ger`> I've heard suggestions of Unique<T>
[08:33:47] <wycats_> @ is being removed but not ~
[08:34:02] <wycats_> At least as far as I've heard
[08:34:34] <santiago> Huh. 
[08:34:46] <wycats_> I'd be pretty sad to see ~T replaced syntactically with Unique<T>
[08:34:53] *** Joins: nrc (ncameron@moz-A76F1825.cable.virginm.net)
[08:35:17] *** Quits: ofeldt (ofeldt@moz-B7E2366D.dip0.t-ipconnect.de) (Ping timeout)
[08:36:06] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[08:36:16] <Yurume> wycats_: it may remain as a syntactic sugar though
[08:36:57] <wycats_> I think it really needs to
[08:38:22] *** Joins: Ferio (Mibbit@moz-E7D1C548.pools.arcor-ip.net)
[08:39:09] *** Joins: ofeldt (ofeldt@moz-B7E2366D.dip0.t-ipconnect.de)
[08:41:44] *** Joins: jviereck (Adium@moz-A42B7BD5.dip0.t-ipconnect.de)
[08:42:25] *** Quits: jviereck (Adium@moz-A42B7BD5.dip0.t-ipconnect.de) (Quit: Leaving.)
[08:44:54] *** Joins: jviereck (Adium@moz-A42B7BD5.dip0.t-ipconnect.de)
[08:45:29] *** Quits: Guest__ (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Ping timeout)
[08:46:49] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:48:38] *** Joins: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au)
[08:48:59] <dbaupp> wycats_: how often do you use ~?
[08:49:09] <dbaupp> (for things other than vectors and strings)
[08:50:30] *** Quits: Mindless` (mindless@moz-9C38D3B4.net) (Ping timeout)
[08:50:34] *** Joins: Mindless` (mindless@moz-9C38D3B4.net)
[08:50:37] <Ms2ger`> dbaupp, I use it pretty rarely... All the code I work on uses @mut :)
[08:50:51] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[08:51:18] <Yurume> ~Trait is a good example of non-vec/str unique pointers
[08:52:17] <dbaupp> Ms2ger`: there's your problem
[08:52:17] *** Quits: benjamin_ (benjamin@moz-9DA121B7.dip0.t-ipconnect.de) (Connection reset by peer)
[08:52:49] *** Joins: z0w0 (zack@moz-356923D4.lnse4.woo.bigpond.net.au)
[08:52:50] *** Joins: benjamin_ (benjamin@moz-9DA121B7.dip0.t-ipconnect.de)
[08:53:07] <dbaupp> Ms2ger`: (does servo really use a lot of @mut? isn't it meant to be parallel?)
[08:53:29] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[08:54:02] <Ms2ger`> dbaupp, for the DOM, yes
[08:54:29] <Ms2ger`> And parallel JS... No :)
[08:55:41] <dbaupp> parallel tree traversals etc etc.
[08:55:47] <Ms2ger`> (Keeping stuff alive across three languages is hard)
[08:56:04] <dbaupp> three?
[08:56:08] <dbaupp> JS, Rust and C++?
[08:56:20] <Ms2ger`> Yep
[08:56:57] <dbaupp> just delete the first and last, who needs anything but Rust anyway?
[08:57:09] <Ms2ger`> Webdevs :)
[08:57:31] <Ms2ger`> And dropping C++ implies reimplementing JS in rust first
[08:58:12] <dbaupp> sounds pretty easy :P
[08:59:01] <Ms2ger`> Only 270 pages for the 5.1 spec :)
[08:59:47] <Yurume> reimplementing a performing JS impl in Rust
[08:59:51] <Yurume> is hard
[08:59:52] *** Quits: benjamin_ (benjamin@moz-9DA121B7.dip0.t-ipconnect.de) (Connection reset by peer)
[09:00:20] * dbaupp can implement a JS with his hands tied behind his back.
[09:00:21] *** Joins: benjamin_ (benjamin@moz-9DA121B7.dip0.t-ipconnect.de)
[09:00:31] * dbaupp stops joking around and goes to make dinner.
[09:00:34] <Yurume> via eval?
[09:00:35] <Yurume> :)
[09:01:29] <skrylar> Yurume: by performing you mean a fast one?
[09:01:37] *** Quits: sigma (sigma@moz-BFB7A653.range86-143.btcentralplus.com) (Client exited)
[09:01:52] <Yurume> skrylar: yeah
[09:01:57] <skrylar> one that just works is.. well, you just need a good tokenizer and some parsing
[09:02:04] <skrylar> i imagine the parsing is probably easier with rust's match too
[09:02:09] <Yurume> right, in fact I've done that
[09:02:38] <Yurume> getting every gory detail correct is time-consuming but not particularly hard to do
[09:02:51] <skrylar> i poked with scripting engine design for a little while and, yeah
[09:02:52] <skrylar> its.. meh
[09:03:13] <skrylar> I love Io as a scripting language, but its heinously slow
[09:03:41] <Ms2ger`> skrylar, a good tokenizer, some parsing, and an extensive standard library :)
[09:03:53] <skrylar> Ms2ger`: the librarys not always necessary :P
[09:04:01] <Yurume> when you have a working gc implementing JavaScript is just getting things (parser, ast, eval, stdlib) in one place
[09:04:06] <Ms2ger`> It is if you want web sites to work!
[09:04:12] <Ms2ger`> And yes, gc
[09:04:21] <Yurume> WebIDL is a bit harder but not infeasible
[09:04:23] <skrylar> You could cheat and make it refcounted
[09:04:37] <skrylar> Ms2ger`: well, for JS specifically yeah. For scripting languages in general, depends on the use
[09:04:39] <Ms2ger`> How fast do you want to oom? :)
[09:04:41] <Yurume> you at least need a cycle detector
[09:05:01] <skrylar> Lua has a pretty small lib because its meant to be bolted on to an engine, not run websites on its own
[09:05:04] <Yurume> for stdlib, you can delegate surprisingly large portion of stdlib into JavaScript code
[09:05:15] <Ms2ger`> That's true
[09:05:18] <skrylar> Small/Pawn has even less because its meant to drive motion tweening in animations and microcontrollers
[09:07:00] <skrylar> all though there are people who wrote small MMOs in Pawn, because it was used by amxscript (half life 1) and SAMP
[09:07:08] <skrylar> horrible use of the language though
[09:07:18] *** Quits: jviereck (Adium@moz-A42B7BD5.dip0.t-ipconnect.de) (Quit: Leaving.)
[09:07:45] <skrylar> oh, good news
[09:07:54] <skrylar> enum X { T = foo!(Something) } does work
[09:08:51] <skrylar> is it bad when you go to try out a tool/library and you decide you don't like it within the first ten minutes of barely using it? ._.
[09:08:51] *** Quits: derek_c (derek@5D95999B.727D7A21.EB673A25.IP) (Ping timeout)
[09:09:02] <Yurume> Ms2ger`: for me, JS coercion rule was the hardest thing to do correct
[09:09:24] <Yurume> I heartily hated it and after implementing it I religiously hate it :(
[09:10:02] <skrylar> Yurume: to be fair, JS was just a reskinned hypertalk
[09:10:07] <skrylar> thats why its so... weird
[09:10:41] <Yurume> AFAIK there is a way to introduce an infinite loop during the coercion
[09:10:48] *** Joins: derek_c (derek@5D95999B.727D7A21.EB673A25.IP)
[09:10:54] <skrylar> IIRC the guy at netscape said he would have made it after the hypercard language from the old mac System #'s, but Netscape wanted it to be "java-y"
[09:11:14] <Yurume> (though this possibility is much more obvious since it may call either valueOf or toString)
[09:11:50] <Yurume> I think many production JS impls do avoid such infinite loop
[09:12:17] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[09:12:28] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[09:12:49] <skrylar> also for fun, make a performant smalltalk :P
[09:12:51] <skrylar> thats even worse
[09:13:13] <Yurume> aargh XD
[09:13:39] <skrylar> i hypothesized there was a way to make smalltalk/io fast, with a decent kernel and having a JIT on hand
[09:13:59] <skrylar> mostly because smalltalk and io are obsessed with doing method calls by malloc'ing a message object
[09:14:00] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Ping timeout)
[09:14:10] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[09:14:35] <Ms2ger`> Yurume, sure, { toString: () => { while (true) {} } } == ""
[09:14:38] <skrylar> i figured with a JIT you could use annotations to tell it "i don't really need a message" and it could just inline it as a function call :<
[09:15:05] *** Quits: Ferio (Mibbit@moz-E7D1C548.pools.arcor-ip.net) (Quit: http://www.mibbit.com ajax IRC Client)
[09:16:15] *** Joins: sigma (sigma@moz-BFB7A653.range86-143.btcentralplus.com)
[09:16:31] *** Joins: jviereck (Adium@moz-A42B7BD5.dip0.t-ipconnect.de)
[09:17:46] *** Quits: z0w0 (zack@moz-356923D4.lnse4.woo.bigpond.net.au) (Quit: z0w0)
[09:17:57] <Yurume> Ms2ger`: even when toString does no such malicious things, one thing that ECMA-262 and many browsers disagree each other is: var a = []; a.push(a); a.toString().
[09:18:30] <Ms2ger`> Ah, yes
[09:18:51] <skrylar> the horrors of undefined behavior :(
[09:19:00] <Ms2ger`> I spend a lot of time writing test cases... Most of my toStrings are malicious :)
[09:19:03] <Yurume> (many browsers simply return an empty string, but ECMA-262 does not have anything special for such case so it should loop infinitely)
[09:19:47] <Yurume> I'm not sure that this behavior is documented in some other specifications
[09:20:08] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[09:20:28] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[09:21:07] <skrylar> actually
[09:21:18] <skrylar> yeah, it should loop shouldn't it
[09:21:25] <skrylar> i thought i was going to say something smart for a minute
[09:21:33] <twi> luisbg ohai :)
[09:21:33] <nrc> what is the preferred way to write a string to a file? The docs only have |file.write(bytes!("hello, file!\n"));| which only works for a constant string
[09:21:49] <skrylar> nrc: see std::str
[09:21:56] <skrylar> There you will find the string->bytes conversion routines
[09:22:30] <skrylar> let me see if i can find the exact link
[09:23:01] <Ms2ger`> to_bytes?
[09:23:07] <skrylar> nrc: http://static.rust-lang.org/doc/master/std/str/trait.OwnedStr.html 'into_bytes' is one option
[09:23:30] <skrylar> i think theres a with_bytes but i don't recall
[09:23:47] <nrc> cool, thanks skrylar!
[09:24:19] <skrylar> Ms2ger`'s to_bytes should also work, but I think that copies the string
[09:24:28] <skrylar> into_bytes kills the string and gives you the bytes
[09:24:34] <skrylar> so, depends what you want
[09:25:09] <Ms2ger`> I think to_ gives you an &[u8] without copying
[09:25:22] * Ms2ger` looks
[09:25:25] <skrylar> http://static.rust-lang.org/doc/master/std/to_bytes/trait.ToBytes.html "Converts the current value to a list of bytes. This is equivalent to invoking iter_bytes on a type and collecting all yielded values in an array"
[09:25:39] <Ms2ger`> Or not
[09:25:41] <skrylar> Sounds like a copy
[09:25:54] <Yurume> I think simply `write!(file, "{}", string);` would work
[09:25:57] <Ms2ger`> as_bytes does what I thought
[09:26:03] <Yurume> which does not copy
[09:26:12] <skrylar> bleh, i really need to collect the list of simple things people want to do
[09:26:26] <skrylar> "here's how to do really basic stuff with strings"
[09:26:28] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[09:26:40] *** Joins: bjz (bjz@moz-77BEEF1E.static.tpgi.com.au)
[09:26:41] <Yurume> skrylar: add to https://gist.github.com/Skrylar/8142997 ;)
[09:26:47] <skrylar> hehe
[09:26:53] <skrylar> I might end up turning that in to a website if it keeps growing
[09:27:04] <Yurume> make a Jekyll-powered website
[09:27:16] <Yurume> and receive PRs
[09:27:30] * skrylar sads that they use jekyll :(
[09:27:53] <Yurume> ah, asciidoc, yeah.
[09:28:06] <skrylar> Oh, github supports asciidoc now because of asciidoctor.rb
[09:28:25] <Yurume> is that an independent reimplementation?
[09:28:28] <skrylar> yes
[09:28:38] <skrylar> 25x faster, in ruby, than the original python 2.7
[09:28:50] <skrylar> *and* integrated ruby API
[09:29:14] <Yurume> 25x? :o
[09:29:21] <skrylar> the original was really badly written :(
[09:29:52] <skrylar> I don't really hate Jekyll, but. Jekyll is meant basically for Blogs
[09:30:07] <Yurume> I seriously agree
[09:30:11] <skrylar> I tend to use nanoc, which is way way more documented than Jekyll and isn't constrained at all
[09:30:19] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Connection reset by peer)
[09:30:24] <skrylar> You do a little bit more work to get a wordpress-style blog going, but you can make it do anything you want
[09:30:28] <Yurume> I have wedged my own website building tool years ago (basically a mix of Pandoc and Mako)
[09:30:36] <skrylar> mako?
[09:30:42] <Yurume> http://www.makotemplates.org/
[09:30:46] <skrylar> ah, templates
[09:30:58] <nrc> Yurume: write! wants a writer, not a file - I assume there is an easy way to get the former from the latter though
[09:31:06] <skrylar> apparently people are now recommending slim instead of haml
[09:31:18] <Yurume> nrc: wait, did you open the file (to get a `&mut Writer`)?
[09:31:21] *** flaper87|afk is now known as flaper87
[09:31:36] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[09:31:41] <nrc> no, I used File::create to get a file
[09:32:42] <Yurume> nrc: a `File` is already an `Writer`, I think there is nothing prevents you from simply passing `file` into `write!`
[09:33:19] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Ping timeout)
[09:33:31] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[09:33:42] <Yurume> I'm not sure that `write!` receives anything implements the `Writer` trait or just a generic reference; for the latter you need to coerce `&mut File` using `... as &mut Writer`
[09:34:05] <nrc> I got the error: error: mismatched types: expected `&mut std::io::Writer<no-bounds>` but found `std::io::fs::File` (expected trait std::io::Writer but found struct std::io::fs::File)
[09:34:05] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Connection reset by peer)
[09:34:10] <Yurume> looking at the documentation it seems the latter is the case
[09:34:13] * skrylar curses Linux's lack of a good structured document editor :(
[09:34:14] <nrc> ok
[09:34:29] <Yurume> nrc: let mut file = ...; write!(&mut file as &mut Writer, "{}", ...);
[09:34:55] <Yurume> if you are using very recent master, `as &mut Writer` part is redundant.
[09:35:08] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[09:35:40] <nrc> cool, thanks!
[09:35:44] <skrylar> actually theres that one python-based Leo
[09:36:15] <skrylar> i thought about trying to make a CLI-based single pane outliner in rust, because for some reason only mac users get to have single pane outliners o_O
[09:36:28] <Yurume> anyway, my tool was based on Makefiles and it was very hard to customize
[09:36:38] *** Quits: Kxepal (Miranda@moz-2C828513.pppoe.mtu-net.ru) (Quit: Kxepal)
[09:36:53] *** Joins: Kxepal (Miranda@moz-2C828513.pppoe.mtu-net.ru)
[09:37:52] *** Joins: yota (sdouche@moz-7D878FB8.securactive.net)
[09:37:54] *** Joins: z0w0 (zack@moz-356923D4.lnse4.woo.bigpond.net.au)
[09:38:23] <skrylar> Yurume: ought to look at nanoc if you do ruby
[09:38:31] <skrylar> its very easy to get working
[09:40:18] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[09:40:18] *** Quits: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au) (Ping timeout)
[09:41:31] <Yurume> skrylar: does it support a posterous dependency insertion (e.g. making an image thumbnail *after* the main content parsing)?
[09:41:37] <skrylar> so far i've just been writing the tips in FocusWriter, which was really meant for prose and not code :B
[09:41:40] <skrylar> Yurume: if you tell it to
[09:42:02] <skrylar> IIRC you can tap in to the hooks and put in whatever ruby you want to run there
[09:42:14] <skrylar> there's a preprocess that can tinker with the attributes for documents before they run through also
[09:42:15] <Yurume> no, running an arbitrary command is not an issue
[09:42:19] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[09:42:38] <Yurume> the static website generation at the large scale is mostly a problem of dependency tracking
[09:42:56] <skrylar> i remember they talked about that with pagination
[09:43:05] <Yurume> sometimes dependencies are added after some other dependencies are resolved
[09:43:13] <skrylar> you can scan files in preprocess and insert new documents there if you need to; they did that to make the page indexes
[09:43:26] <Yurume> (Makefiles suck at it so they resort to the ad-hoc solution)
[09:43:32] <Yurume> (or configures)
[09:43:47] <skrylar> you could alternatively look in to using Rake+Ninjabuild
[09:44:07] <skrylar> Ninjabuild is *very* fast at building nested dependency chains
[09:44:34] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[09:45:03] <skrylar> On occasion I use Rake and ERB (templating) to assemble the ninja.build definition (a very simplified form of Makefile, which lacks all of the overhead and logic of gnu make) and then run ninja afterwards 
[09:45:12] <skrylar> it'll auto-detect what tasks can be done in parallel and run them separately
[09:45:38] <Yurume> isn't that a sort of meta-Makefile?
[09:45:50] <skrylar> kinda
[09:46:02] <skrylar> the guy who made ninja did so because make is pretty saddeningly slow
[09:46:17] <Yurume> reasonable, but not my use case :S
[09:46:23] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[09:46:28] <Yurume> in fact, I also ran into the problem with Pandoc
[09:46:42] <skrylar> i like it because it scans the dependency tree and will run simultaneous steps wherever possible, which is something make is horrible at
[09:46:47] <Yurume> since Markdown is not a particularly good markup language for exact HTML outputs
[09:47:04] <Yurume> (and customizations)
[09:47:17] <skrylar> might be worth looking in to asciidoctor then
[09:47:23] <Yurume> I have a number of postprocessing after the Pandoc process
[09:48:01] <Yurume> and sometimes Pandoc... simply breaks things. (e.g. --section-divs, which was added silently and then separated into its own option)
[09:48:40] <skrylar> yeaah I.. hrm. I like pandoc, but there are things I want it to do that it won't
[09:49:08] <Yurume> a customizable and reasonable markup language will have its niche!
[09:49:18] <skrylar> Amusingly, pandoc doesn't support admonition blocks
[09:49:24] <skrylar> it DOES support citations via bibtex
[09:49:34] <Yurume> I have reviewed reST for that reason, and it is seriously unusable for CJK environments
[09:49:46] <skrylar> hmm there's a tool that does that actually
[09:50:03] <skrylar> http://www.ulyssesapp.com/
[09:50:31] <skrylar> I remember them having a markup engine where you configured the syntax
[09:51:30] <Yurume> some language-independent macro systems have them
[09:51:37] <Yurume> and most importantly, TeX (\catcode) ;)
[09:51:44] <skrylar> it looks like they changed it to markdown, but i'm not sure. my mac broke so i haven't been up to date on all that
[09:51:59] <Ms2ger`> Mm, TeX
[09:52:11] <Ms2ger`> Speaking of terrible markup languages :)
[09:52:14] <Yurume> I love the TRIP test
[09:52:42] <skrylar> I tend not to have issues with markup, I have issues with the lack of outliners >:|
[09:54:27] <Yurume> for me I needed both
[09:54:46] <skrylar> i tend to see people talk about org-mode... orgmode is a joke
[09:55:04] <Yurume> I'm not religious about how the bold is marked up (*bold*? **bold**? @b{bold}? etc.)
[09:55:34] <Yurume> but it should not coincide with the typical case (Markdown has a notable problem in this case: __init__, what?)
[09:55:51] <skrylar> surround it in graves?
[09:55:52] <Yurume> and when it does coincide for the unfortunate reason, it should be easier to recover from it
[09:55:58] <skrylar> i think `__init__` will be properly monospaced
[09:56:25] <Yurume> skrylar: for `__init__`, right. but Markdown also stylizes mid-word underscores
[09:56:33] <skrylar> if i recall, asciidoc has something like inserting a backslash to prevent tripping the markup
[09:56:45] <skrylar> Yurume: markdown or pandoc?
[09:56:52] <Yurume> and I have literaly thousand documents that have to be reviewed for that
[09:57:10] <skrylar> I don't remember if the official markdown spec says anything about mid-word
[09:57:12] <Yurume> skrylar: Markdown. Pandoc has an option to turn that "feature" off
[09:57:17] *** Quits: gkostyanikov (gkostyanik@54EEF6DD.A859D9FD.CA6E2165.IP) (Ping timeout)
[09:57:27] * skrylar doesn't remember if maruku or the *cloth's do it
[09:57:37] <Yurume> so does Github-flavored Markdown
[09:57:48] <skrylar> well theres always textile... which nobody liked :(
[09:58:00] <Ms2ger`> {\bf bold}
[09:58:10] <skrylar> {\prison Ms2ger` }
[09:58:10] <Yurume> skrylar: there is no such thing like the official Markdown "spec", it is just an informal guide to the format.
[09:58:18] <Ms2ger`> :D
[09:58:30] <Yurume> isn't it \`?
[09:58:34] <skrylar> Yurume: continued reasons I like using asciidoc{tor} xD
[09:58:38] <Yurume> hmm not.
[09:58:42] <skrylar> There *is* a spec sheet for it
[09:58:47] <Yurume> that's good
[09:58:51] <skrylar> which is written in itself
[09:59:07] <skrylar> the ruby rewrite used the manual/specsheet as the litmus test for the implementation
[10:00:07] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Connection reset by peer)
[10:00:12] <skrylar> here's a fun one: grandview (dos), ecco pro and ... orgmode. xD
[10:00:29] *** Joins: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch)
[10:00:29] *** Quits: benjamin_ (benjamin@moz-9DA121B7.dip0.t-ipconnect.de) (Connection reset by peer)
[10:00:51] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[10:00:57] *** Joins: benjamin_ (benjamin@moz-9DA121B7.dip0.t-ipconnect.de)
[10:01:12] *** Joins: gkostyanikov (gkostyanik@D97B45BA.3E410295.CA6E2165.IP)
[10:01:23] *** Joins: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP)
[10:02:26] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[10:02:33] *** Joins: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com)
[10:03:00] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[10:03:21] <adridu59> is ~ going away in favor of box or will the two stay alongside?
[10:07:05] <Yurume> skrylar: AsciiDoc does not look bad, its macro syntaxes are a bit strange but I can keep with that
[10:07:35] *** Joins: andre (andre@CA528A4A.45A4338E.8EE27E6.IP)
[10:09:36] *** Quits: nrc (ncameron@moz-A76F1825.cable.virginm.net) (Ping timeout)
[10:10:51] *** Joins: nkoep (nik@moz-614D7A24.pool.mediaways.net)
[10:10:55] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Quit: 랜덤은 쇠퇴했습니다.)
[10:11:06] *** Joins: victorporof (victorporo@773D35C8.FAB6DAB7.79933D60.IP)
[10:12:03] *** Joins: Kiko (Mibbit@moz-818475B1.bredband.comhem.se)
[10:13:02] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[10:14:36] <Kiko> hi there! I was wondering if any of you could help me. I have just installed rust and I can compile programs using the rustc, but I cannot find the rust executable in order to be able to run "rust run" or "rust test".
[10:14:55] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[10:15:08] <Kiko> if I run: ls /usr/local/bin/ | grep rust rustc rustdoc rustpkg
[10:15:40] <Kiko> sorry, if I run "ls /usr/local/bin/ | grep rust"  what I get is the following list: rustc rustdoc rustpkg
[10:15:42] <Yurume> Kiko: rust tool was removed due to the lack of maintainership.
[10:16:04] <Yurume> use rustc foo.rs && ./foo for rust run, and rustc --test foo.rs && ./foo for rust test.
[10:17:08] <Kiko> ok, thanks yurume, then I guess the tutorial called rust for rubyist is a bit out of date. Do you know if someone is contributing to the doc in Spanish?
[10:17:51] *** Quits: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP) (Ping timeout)
[10:18:06] <Yurume> I don't know, as I don't speak Spanish :)
[10:18:14] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[10:18:21] <Yurume> (was there a translation in Spanish btw?)
[10:18:26] <Kiko> I would like to help the community but since I have just started, I think that understanding the docs is a good starting point.
[10:18:54] <Kiko> no, no translation in Spanish that I know of, but it would help to other people, ;)
[10:18:57] <Yurume> docs are a good starting point but have some missing pieces and/or outdated contents
[10:19:35] <Yurume> I think the translation would be great, but it may be hard to get it synchronized to the most recent version
[10:19:42] <Kiko> yep, that's why if I am going to start learning the language, I might as well try to update the missing / refactored parts
[10:19:54] <skrylar> Yurume: okay, first part of the string tips are up https://gist.github.com/Skrylar/8142997
[10:20:15] <Yurume> feedbacks are always welcomed, I think everyone here agrees that the docs should be improved ;)
[10:21:04] <Yurume> skrylar: great!
[10:21:31] <Kiko> ok thanks, I'll see what I can do. Thank you Yurume!
[10:23:39] <Blei> Kiko: there is already a Japanese translation (or at least a start of one) in the repos. I guess you could copy what it does and fill in Spanish
[10:23:53] <Blei> That would be really helpful!
[10:25:19] <wtw> could someone enlighten me what these 'a in some templates mean (e.g. "struct BitsNStrings<'a>" in the reference manual)
[10:25:26] <ChrisMorgan> Kiko: I would very strongly advise that you not bother translating the manual and tutorials yet. It's going to be largely completely redone and your work would be likely to be completely worthless within three months.
[10:25:35] <ChrisMorgan> wtw: it's lifetime syntax
[10:25:36] <Yurume> wtw: it's a lifetime, which is used to safely reason about borrowed pointers.
[10:26:03] <wtw> ok thanks, kinda ugly though :D
[10:26:04] <Yurume> you may find more informations in the "borrowed pointer" tutorial.
[10:26:16] <ChrisMorgan> wtw: http://static.rust-lang.org/doc/master/tutorial-borrowed-ptr.html#named-lifetimes
[10:26:28] <wtw> thank you
[10:26:30] *** Quits: nkoep (nik@moz-614D7A24.pool.mediaways.net) (Quit: Leaving)
[10:27:03] <ChrisMorgan> wtw: you might think it's ugly at present, but after working with them for a while I found that they really don't feel ugly at all.
[10:27:15] *** Quits: hacker_sam (hacker_sam@moz-64791626.dsl.bngr.epix.net) (Ping timeout)
[10:27:51] <Kiko> Biel Ok, I do that if they are more or less up-to-date. Otherwise, I can wait as ChrisMorgan suggested, just until the API is stable enough
[10:27:55] <Blei> (stockholm syndrome)
[10:28:16] <ChrisMorgan> Blei: the very *idea* of suggesting that!
[10:28:20] <Yurume> wtw: lifetimes are the main selling point of Rust ("memory safety via types") ;)
[10:28:24] <Kiko> *Blei
[10:28:27] <eddyb> Blei: hehe. that happened with me and :: in C++
[10:29:09] <ChrisMorgan> Seriously, come up with a better way of doing it. the 'single_quote is not at all ugly, provided your syntax highlighter can cope (Vim! Use Vim!)
[10:29:12] <Blei> no, but mostly I agree, you get used to it quickly
[10:29:22] <Yurume> Kiko: I think there are po4a-translated po files for docs, you can start from it
[10:29:23] <Yurume> them*
[10:29:27] <eddyb> ChrisMorgan: the kate syntax file handles it nicely ;)
[10:29:35] <eddyb> ChrisMorgan: yay XML state machines :P
[10:29:39] <Blei> and in the end, i feel that syntax is something you get used to, as long as the underlying semantics are good
[10:29:43] <Blei> which they are in rust
[10:29:50] *** Joins: io2 (io2@moz-34E8FDD4.home.otenet.gr)
[10:29:51] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Connection reset by peer)
[10:29:56] <ChrisMorgan> Yurume: please don't suggest that people start translating the docs at present. It's a waste of effort.
[10:30:30] <ChrisMorgan> Yeah, the semantics are the most important part in Rust and they're getting to be pretty good.
[10:30:41] <eddyb> I found ~ to be beautiful in a way, but as long as it doesn't uglify code like @mut => Rc<RefMut<T>>, I'm fine with removing it
[10:30:52] <Yurume> ChrisMorgan: unless the docs are going to be rewritten from the scratch, the effort itself does not seem to be wasted.
[10:30:59] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[10:31:10] <ChrisMorgan> Yurume: and that's probably what's going to happen.
[10:31:11] <Yurume> that is, if the translator can keep synchronizing, it's fine.
[10:31:28] <Yurume> will the document restructuring happen?
[10:31:47] <ChrisMorgan> I expect the significant majority of the documentation to be completely rewritten.
[10:32:03] <Yurume> is there any due date or milestone?
[10:32:25] <ChrisMorgan> I do not know; brson is still figuring that stuff out.
[10:32:28] <adridu59> Yurume: Rust is still in Alpha state
[10:32:51] <Yurume> adridu59: Alpha state did not prevent, say, "Rust for Rubyists". ;)
[10:33:02] <adridu59> the tutorial/manual is itself outdated in a number of places
[10:33:02] *** Quits: benjamin_ (benjamin@moz-9DA121B7.dip0.t-ipconnect.de) (Connection reset by peer)
[10:33:06] <Yurume> it's not a matter of instability, it's a matter of wasted efforts
[10:33:19] <adridu59> Yurume: of course, I'm writing a tutorial too
[10:33:28] <Yurume> good to hear that
[10:33:30] *** Joins: benjamin_ (benjamin@moz-9DA121B7.dip0.t-ipconnect.de)
[10:33:41] <skrylar> i just maintain a list of tips at the moment xD
[10:33:43] <Yurume> what audience are you targeting to?
[10:34:05] <adridu59> I personally have some C and Python background
[10:34:45] <adridu59> I do not target beginners like rust for rubyists but I explain system concepts shortly and so people can do their research if they have to
[10:35:56] *** Quits: bjz (bjz@moz-77BEEF1E.static.tpgi.com.au) (Ping timeout)
[10:36:32] *** Joins: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se)
[10:36:34] <adridu59> but maintaining official docs... it's probably going away
[10:36:50] <adridu59> the consensus is that the tutorial is not really a tutorial but a list of features
[10:37:38] *** flaper87 is now known as flaper87|afk
[10:37:40] <Yurume> which does not necessarily mean that the current tutorial should be abandoned (can be salvaged as a feature guide, for example)
[10:37:51] <adridu59> of course
[10:38:40] <adridu59> the problem is that even when devs change api, docs are often unchanged or half-changed
[10:38:46] <adridu59> so it bitrots easily
[10:39:10] <ChrisMorgan> The tutorials/manual largely needs a *complete* restructuring, with significant rewrites of the significant majority of it.
[10:39:12] <Yurume> I explicitly mentioned that, it's fine to translate things, but it's the translator's responsibility to keep up with it
[10:39:31] *** Quits: derek_c (derek@5D95999B.727D7A21.EB673A25.IP) (Ping timeout)
[10:39:40] <adridu59> yes, noticeably you will see that tutorial/manual are sometimes redundant (tutorial looks too much like a manual sometimes)
[10:39:58] <adridu59> if you want to translate that go ahead but
[10:40:15] <adridu59> if I were you I would study what's available and write my own tutorial
[10:40:36] <ChrisMorgan> I hold the position of strongly advising people not to translate at present because I believe it will be an almost complete waste of effort (or potentially even a more than complete waste), effort which could be expended better elsewhere.
[10:40:37] *** Joins: hacker_sam (hacker_sam@moz-64791626.dsl.bngr.epix.net)
[10:41:42] *** Joins: johnrkd (johnrkd@3A09C2F6.815752B7.B05A4819.IP)
[10:42:52] *** Quits: valenting (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP) (Ping timeout)
[10:42:55] <adridu59> another problem of the current docs is that there has been an original writeup a long time ago
[10:43:14] <adridu59> then over time with the changes it has been updated by various people
[10:43:48] <skrylar> pushed an update about `into_bytes`
[10:44:01] <skrylar> i think thats about all the docwriting i feel like for now
[10:45:32] <adridu59> docs need a maintainer, someone who keep things structured and consistent writing style, etc.
[10:45:42] <Yurume> adridu59: will we hire (or at least get support of) a professional technical writer? I think I have seen such plan.
[10:45:42] *** Joins: bkircher (bkircher@moz-C0320469.dip0.t-ipconnect.de)
[10:46:05] <adridu59> yes brson wanted to hire someone
[10:46:16] <skrylar> adridu59: yeah but in the world of open source, maintaining docs isn't glamorous
[10:47:19] <adridu59> skrylar: if you have a maintainer that sets the heading, it's okay
[10:47:35] <ChrisMorgan> adridu59: the plan that has been disclosed thus far is to get a contractor in for the initial rewriting/maintenance of the documentation. Further details are not yet clear.
[10:47:45] *** Joins: bjz (bjz@moz-77BEEF1E.static.tpgi.com.au)
[10:47:46] <adridu59> skrylar: just like Torvalds takes the decisions Linux Kernel has to take sometimes
[10:47:50] <dbaupp> skrylar: this community does give (some degree of) glamour for maintaining docs
[10:48:15] <adridu59> skrylar: open source does not mean mess as long as you have someone who manages the thing
[10:48:33] <skrylar> i'm just speaking from experience with a lot of oss use
[10:48:58] <dbaupp> skrylar: it's definitely worth mentioning .as_bytes in https://gist.github.com/Skrylar/8142997#zero-copy-sending
[10:49:11] <skrylar> doesn't as_bytes do copying?
[10:49:26] <dbaupp> no
[10:49:37] <dbaupp> https://github.com/mozilla/rust/wiki/Doc-detailed-release-notes#cast-naming-conventions
[10:49:38] *** Joins: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au)
[10:49:48] <skrylar> ah, borrowed pointer
[10:49:53] <Yurume> skrylar: as_bytes do not copy, with_c_str will copy.
[10:50:00] <skrylar> i'll earmark it
[10:50:32] <skrylar> i also need to poke around with the IO code so i can write a coherent example of it
[10:51:34] *** Quits: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au) (Ping timeout)
[10:53:12] <skrylar> i found out the termbox library doesn't support windows :|
[10:53:28] <adridu59> cast::transmute is only for C types?
[10:53:35] <skrylar> no
[10:53:36] <Yurume> no
[10:53:45] <skrylar> its basically reinterpret_cast<>
[10:53:46] <adridu59> what's its point vs. as?
[10:54:06] <Yurume> `as` is very limited form of explicit casting
[10:54:10] <skrylar> `as` won't allow typecasts that can't be done (e.g. i think it stops '4 as ~str')
[10:54:23] *** Quits: jdm (jdm@moz-3FFA85CA.dsl.teksavvy.com) (Quit: Lost terminal)
[10:54:59] <Yurume> `as` always does the safe casting, and is limited to integer casting (u8 as i8), floating point casting (f32 to f64), and generic pointers (&uint as &ToStr)
[10:55:20] <skrylar> Yurume: hm, you know what would be really useful for organizing those?
[10:55:25] <skrylar> a rust version of notational velocity
[10:55:29] <adridu59> transmute is unsafe?
[10:55:33] <Yurume> yes.
[10:55:42] <skrylar> adridu59: yes, transmute completely ignores the typesystem
[10:55:48] <skrylar> it only checks that two types have the same bit-length
[10:56:12] <Yurume> adridu59: for example, when you cast u32 to f32 you get the conversion, when you transmute u32 to f32 you get the garbage at best
[10:56:17] <skrylar> e.g. if you transmute an Rc in to a *c_void, it shoves that reference in to a C pointer
[10:56:29] <skrylar> interestingly enough this does actually hold the reference until you take it back out later
[10:57:09] <adridu59> I see
[10:57:11] <Yurume> skrylar: technically speaking, it's because the ownership goes into `transmute` and `transmute` does not do it with any finalization.
[10:57:23] <Yurume> does not do any finalization with it*
[10:57:23] <skrylar> transmute is also necessary for dealing with C unions
[10:57:33] <skrylar> Yurume: i thought it was neat nontheless
[10:57:40] <Yurume> ;)
[10:57:42] <adridu59> Yurume: what do you mean I'd get garbage from u32 -> f32 transmute?
[10:57:45] <skrylar> it does let you count objects over in C-land as "still in use"
[10:58:05] <skrylar> because when you transmute it back to Rust, it does start decrementing again
[10:58:17] <Yurume> rusti: let x: u32 = unsafe {std::cast::transmute(1.0f32)}; x
[10:58:18] <skrylar> i also noticed you can psychotically do weak references by transmuting a borrowed pointer
[10:58:18] -rusti- 1065353216u32
[10:58:23] <Yurume> adridu59: like this.
[10:58:39] *** Joins: derek_c (derek@BE524653.727D7A21.EB673A25.IP)
[10:58:45] <adridu59> why does it have such behavior?
[10:58:53] <Yurume> it's 0x3f800000, the representation of IEEE 754 binary32 format.
[10:59:03] *** Joins: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk)
[10:59:23] <adridu59> wow, so transmute is a deep s*** cast?
[10:59:35] <Yurume> yeah, hence unsafe
[10:59:36] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Connection reset by peer)
[10:59:49] <skrylar> yerp, transmute simply says 'i am something else' without changing it
[10:59:57] <adridu59> that's insane
[11:00:03] <skrylar> its mostly for C 
[11:00:18] <skrylar> e.g. transmuting a C union to a struct, because rust can't otherwise read them
[11:00:30] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[11:00:32] <adridu59> I see
[11:00:41] <adridu59> probably not worth talking about that in a tutorial then
[11:00:46] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[11:00:50] <skrylar> i need to poke around more with the borrowed-pointer-Rc's to see how badly those explode
[11:01:16] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[11:01:36] <skrylar> I don't recall if each Rc clone is the same Rc or a different object technically
[11:01:38] <skrylar> I thought they were the same
[11:03:27] *** Joins: valenting (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP)
[11:05:08] *** Joins: derby (dirby@moz-A965956C.torservers.net)
[11:07:16] *** Quits: bjz (bjz@moz-77BEEF1E.static.tpgi.com.au) (Ping timeout)
[11:08:20] <dbaupp> skrylar: they are different objects of the form struct Rc<T> { ptr: *T } (basically), and the `ptr` is pointing to the same value in all the clones
[11:08:43] *** Quits: gkostyanikov (gkostyanik@D97B45BA.3E410295.CA6E2165.IP) (Ping timeout)
[11:09:17] *** Joins: bjz (bjz@moz-77BEEF1E.static.tpgi.com.au)
[11:09:25] <dbaupp> i.e. `let x = Rc::new(1); let y = x.clone();` &x and &y are different (i.e. different address and so different objects), but x.borrow() and y.borrow() are identical
[11:09:32] *** Quits: Kiko (Mibbit@moz-818475B1.bredband.comhem.se) (Quit: http://www.mibbit.com ajax IRC Client)
[11:12:15] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[11:12:52] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[11:13:02] *** kimundi is now known as zz_kimundi
[11:13:32] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[11:15:14] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[11:17:00] *** Quits: bjz (bjz@moz-77BEEF1E.static.tpgi.com.au) (Ping timeout)
[11:19:42] *** Quits: FreeFull (freefull@moz-EFEF3DB5.as13285.net) (Quit: Rebooting into new kernel)
[11:20:06] *** Quits: ercxx (ercan@moz-5B55241D.dyn.optonline.net) (Quit: WeeChat 0.4.2)
[11:21:18] *** Joins: bjz (bjz@moz-77BEEF1E.static.tpgi.com.au)
[11:23:20] *** Joins: FreeFull (freefull@moz-EFEF3DB5.as13285.net)
[11:24:10] *** Quits: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se) (Ping timeout)
[11:24:32] *** Quits: bjz (bjz@moz-77BEEF1E.static.tpgi.com.au) (Ping timeout)
[11:24:53] *** Quits: valenting (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP) (Ping timeout)
[11:25:02] *** Quits: derby (dirby@moz-A965956C.torservers.net) (Input/output error)
[11:25:17] *** Joins: derby (dirby@moz-1319847A.countshockula.com)
[11:25:27] *** Quits: hacker_sam (hacker_sam@moz-64791626.dsl.bngr.epix.net) (Client exited)
[11:25:33] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[11:25:48] *** Joins: hacker_sam (hacker_sam@moz-64791626.dsl.bngr.epix.net)
[11:25:49] *** Quits: derby (dirby@moz-1319847A.countshockula.com) (Input/output error)
[11:26:05] *** Quits: benjamin_ (benjamin@moz-9DA121B7.dip0.t-ipconnect.de) (Ping timeout)
[11:26:07] *** Joins: derby (dirby@3D8C1C98.E1C79604.6907F5B3.IP)
[11:28:33] *** Quits: jviereck (Adium@moz-A42B7BD5.dip0.t-ipconnect.de) (Quit: Leaving.)
[11:28:43] *** Joins: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se)
[11:29:24] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Connection reset by peer)
[11:30:45] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[11:32:54] *** Quits: ofeldt (ofeldt@moz-B7E2366D.dip0.t-ipconnect.de) (Ping timeout)
[11:33:50] *** Quits: hacker_sam (hacker_sam@moz-64791626.dsl.bngr.epix.net) (Ping timeout)
[11:35:31] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[11:35:43] *** zz_kimundi is now known as kimundi
[11:36:23] *** Joins: ofeldt (ofeldt@moz-52BA9541.dip0.t-ipconnect.de)
[11:40:44] *** Quits: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se) (Ping timeout)
[11:42:47] *** Quits: io2 (io2@moz-34E8FDD4.home.otenet.gr) (Ping timeout)
[11:43:48] *** Joins: ueki (Mibbit@moz-1095CD08.kanagawa.ocn.ne.jp)
[11:45:14] <johnrkd> i'm under the impression that rustc.exe spawns gcc.exe outside the ENV rustc.exe was called
[11:45:33] *** Joins: dredozubov (dredozubov@2F14E2C1.F70E5FA9.F63E14E8.IP)
[11:48:46] *** Joins: gwty (gwtypc@F42DD637.5A446153.E7DAB6F9.IP)
[11:49:23] *** Joins: reedlepee (Mibbit@moz-A06909E4.glbb.ne.jp)
[11:50:10] <skrylar> johnrkd: why?
[11:50:26] <reedlepee> Any reason why I might be getting linker errors for undefined references to '__cxa_begin_catch' and its kin after updating to latest?
[11:50:44] <skrylar> At least on linux, it works just fine. I have to use LIBRARY_PATH=... to get it to find SDL2, which means its definitely passing the ENV through to GCC
[11:51:02] <kimundi> reedlepee: outdated llvm? need to rerun configure?
[11:51:09] <skrylar> that sounds about right
[11:51:15] <reedlepee> I'll give it a go, thanks
[11:51:18] <dbaupp> reedlepee: `make clean` fixed that for me
[11:51:28] <skrylar> reedlepee: windows?
[11:51:34] <johnrkd> skrylar: because gcc was not paying attention to my changes to %PATH%; i just tested with rustc .. --linker "echo %PATH%" and confirmed i was wrong; i don't know what GCC does
[11:51:35] <reedlepee> ubuntu
[11:51:38] <skrylar> oh
[11:52:05] <reedlepee> I know when I just rebuilt I reran configure... I'll try it again now after a make clean, thanks
[11:52:08] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[11:52:09] <skrylar> reedlepee: on my ubuntu machine, I have it install to a local directory (~/Local, though some prefer /opt/xxx) and I find thats the best place to keep it
[11:52:11] *** Joins: fabiand (fabiand@moz-D54E23F.adsl.alicedsl.de)
[11:52:12] <johnrkd> setting PATH system-wide works for gcc, and I did that anyway so all is fine
[11:52:46] <skrylar> johnrkd: are you trying to get gcc to find a lib, or to find itself?
[11:52:56] <johnrkd> find a lib
[11:53:03] <skrylar> you want LIBRARY_PATH
[11:53:15] <skrylar> that is the ENV variable that is used by the gcc toolchain
[11:53:28] <johnrkd> yeah but if path wasn't enough, it shouldn't be working now
[11:53:31] <johnrkd> but you're right
[11:53:45] <skrylar> are you linking to a dll or a lib?
[11:53:49] <johnrkd> dll
[11:53:51] <skrylar> thats why
[11:54:00] <skrylar> dlls are technically binaries so it short circuited
[11:54:12] <johnrkd> oh.. nice :)
[11:54:22] <johnrkd> that explains it
[11:54:48] <skrylar> i use a rakefile that has ENV['LIBRARY_PATH'] = <blah> right before calling rustc
[11:55:23] <johnrkd> you're under linux though, right ?
[11:55:32] <skrylar> i use the same rakefile in msys on windows
[11:55:32] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Connection reset by peer)
[11:55:52] <johnrkd> got it
[11:56:14] <skrylar> its probably possible to do the same with regular makefiles, but i don't tend to write those by hand
[11:56:53] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[11:57:36] *** Quits: bkircher (bkircher@moz-C0320469.dip0.t-ipconnect.de) (Client exited)
[11:59:44] <skrylar> sweet, keyboard events from SDL
[12:00:40] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[12:02:11] *** Quits: sigma (sigma@moz-BFB7A653.range86-143.btcentralplus.com) (Client exited)
[12:03:40] *** Quits: mentero (mentero@moz-D61C6F02.proxnet.pl) (Ping timeout)
[12:04:14] *** Joins: sigma (sigma@moz-BFB7A653.range86-143.btcentralplus.com)
[12:08:52] *** Joins: nrc (ncameron@moz-AD2938E.hari.cable.virginm.net)
[12:09:26] *** Quits: sigma (sigma@moz-BFB7A653.range86-143.btcentralplus.com) (Client exited)
[12:11:11] *** Joins: sigma (sigma@moz-BFB7A653.range86-143.btcentralplus.com)
[12:11:28] *** Quits: nrc (ncameron@moz-AD2938E.hari.cable.virginm.net) (Ping timeout)
[12:12:15] <skrylar> oh dear, someones old post on the tab v. space argument
[12:13:08] * skrylar tends not to be sympathetic to the "my editor screws up tab spacing" argument, because that means your editor is terrible and this is not someone else's fault
[12:13:23] <johnrkd> oh so you support tab alignment ?
[12:13:29] <skrylar> i use tabindents
[12:13:51] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[12:14:03] <skrylar> they didn't make the tab key this huge button on keyboards and give it a dedicated ANSI code, so that people could forsake it and never use it
[12:14:40] <johnrkd> well
[12:14:45] <ChrisMorgan> skrylar: Scroll Lock? SysRq? Caps Lock?
[12:14:54] <johnrkd> scroll lock is what i thought
[12:14:58] <sigma> I've never found that whole debate very interesting, if you're starting a project use your preferred one, if you're joining a project use the existing one. not exactly a big debate
[12:15:34] <johnrkd> the debate happens because supposedly there is a correct one to use, as in 2+2 = 4
[12:15:40] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[12:15:45] <skrylar> ChrisMorgan: i use caps lock a lot, its rebound to be control. :P
[12:15:55] * ChrisMorgan is not interested in starting or continuing a debate on the topic here; he just couldn't let skrylar's last line pass unchallenged because of its factual inaccuracy
[12:16:13] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[12:16:16] *** Quits: z0w0 (zack@moz-356923D4.lnse4.woo.bigpond.net.au) (Client exited)
[12:16:56] *** Quits: Mindless` (mindless@moz-9C38D3B4.net) (Ping timeout)
[12:17:05] *** Joins: Mindless` (mindless@moz-9C38D3B4.net)
[12:17:16] *** Joins: Ferreus (ferreus@88C29B29.FE9B9CED.7B8A71D0.IP)
[12:17:20] <skrylar> PrtScr/SysReq is used a lot on windows for screenshots, and scrollock is used on nixes.. So.
[12:17:27] <skrylar> Less commonly used by most users maybe, but they're not useless
[12:18:32] <Ms2ger`> Anyway
[12:18:41] <johnrkd> oh so cute this compiler, tells me of unresolved name and asks if i meant some other name that actually makes sense to be suggested
[12:18:43] <skrylar> I'm not sure why most keyboard manufacturers still put capslock on the home row though; it makes more sense for Control to be there, as it was on the Symbolics lisp machines (which is why emacs uses ctrl a lot)
[12:18:51] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[12:19:25] <Ms2ger`> johnrkd, I don't think that ever happened :)
[12:20:24] <johnrkd> t1.rs:11:38: 11:39 error: unresolved name `x`. Did you mean `_i`?
[12:21:32] *** Joins: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se)
[12:21:45] <skrylar> how stable is libsyntax?
[12:22:01] *** Joins: jviereck (Adium@moz-A42B7BD5.dip0.t-ipconnect.de)
[12:22:05] *** Quits: jviereck (Adium@moz-A42B7BD5.dip0.t-ipconnect.de) (Client exited)
[12:24:45] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[12:24:49] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[12:25:04] <ChrisMorgan> skrylar: its stability is by no means guaranteed.
[12:25:10] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[12:25:12] <kimundi> skrylar: Keyboard manufactors probably try to use an existing layout :P
[12:25:12] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Connection reset by peer)
[12:25:40] <skrylar> kimundi: i think they do it because thats just the ibm/pc spec and they always did it that way
[12:25:40] *** Joins: bkircher (bkircher@moz-C0320469.dip0.t-ipconnect.de)
[12:25:44] <skrylar> so.. basically yeah
[12:26:00] <reedlepee> dbaupp: update - good to go after a make clean. thanks
[12:26:01] <skrylar> though some keyboard makers ignore that F-keys are supposed to be grouped in to fours
[12:26:23] *** Quits: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se) (Ping timeout)
[12:26:31] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[12:26:56] *** Quits: bkircher (bkircher@moz-C0320469.dip0.t-ipconnect.de) (Quit: Leaving...)
[12:27:23] *** Quits: rsaarelm (rsaarelm@moz-D1CB7158.dhcp.inet.fi) (Connection reset by peer)
[12:28:01] <johnrkd> error: bare `str` is not a type
[12:28:08] <johnrkd> is a funny message when you are new to the language
[12:28:17] <skrylar> yeah.. i made a tip about that
[12:28:27] <skrylar> there was also a bug where it was doing something like
[12:28:28] <FreeFull> skrylar: Well, you can always ignore the keycaps and bind the keys to be whatever you want
[12:28:32] <skrylar> "X is not a type, try Y."
[12:28:36] <skrylar> "Y is not a type, try X."
[12:28:51] <johnrkd> niec
[12:34:21] <johnrkd> println!("price is {} and literal is {}", price, r#"uh "literal test"#);
[12:34:26] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Connection reset by peer)
[12:35:01] <johnrkd> and syntax highlighting explodes; i imagine most highlighting engines are not prepared to deal with this literal scheme
[12:35:30] <skrylar> most syntax highlighting engines are kind of sad, they just run a regex
[12:35:49] <skrylar> it sounds like the one you are using just doesn't have r#..# set up in it
[12:36:38] <skrylar> a fun one is seeing how many engines handle recursive block comments (most don't)
[12:37:10] <skrylar> though TextMate and Sublime use stateful highlighters, so you can tell them to handle rust literals (and other crazy things) just fine
[12:37:22] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[12:37:59] <johnrkd> i'm on sublime so the config is just not 100% then
[12:38:28] <skrylar> i'd have to go check it; i don't have it on this box
[12:41:00] <johnrkd> i'm on sublime so the config is just not 100% then
[12:41:06] <johnrkd> oops
[12:44:41] <skrylar> http://nickgravgaard.com/elastictabstops/ that sounds pretty neat actually
[12:49:03] <johnrkd> this reminds a feature the Delphi7 code editor had, i hated it; a colleague of mine loved it
[12:49:39] <johnrkd> type Position = (uint, uint); // how good it feels to be able to do this
[12:52:20] *** Joins: sk (sk@F9A3A16F.3DDD1ABD.33B96495.IP)
[12:55:00] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Connection reset by peer)
[12:55:03] *** Quits: sigma (sigma@moz-BFB7A653.range86-143.btcentralplus.com) (Client exited)
[12:55:39] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[12:56:54] *** flaper87|afk is now known as flaper87
[13:02:56] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[13:14:10] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[13:14:36] *** Joins: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP)
[13:15:04] <adridu59> I recall there used to be .finally() in Rust, is that gone?
[13:15:56] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[13:16:47] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[13:17:18] <eddyb> johnrkd: you might want struct Position(uint, uint);
[13:17:23] *** Joins: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[13:18:37] <johnrkd> yeah that'd make more sense; i'm just going trough the tutorial
[13:20:09] <ueki> I'm trying to build this example gist that's going around with `rustpkg install`: https://gist.github.com/anonymous/8162399 but I get "error: Package pool depends on native, but I don't know how to find it"... I read somewhere that it's probably a bug in rustpkg but can't find that reference anymore and not sure if there's already a bug filed.
[13:20:21] <eddyb> johnrkd: the difference is that "type" is just an alias (typedef from C/C++ though it's a bit different from that, too)
[13:20:40] <eddyb> johnrkd: while struct gives you a new type that you own and can implement things on etc.
[13:21:17] <johnrkd> got that
[13:22:07] <johnrkd> i didn't get why after "enum Type { A, B }", "Type" doesn't exist and to access the enum "Type" is not a prefix
[13:23:53] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[13:25:29] <pyon> https://gist.github.com/eduardoleon/8182059 -- Could anybody please explain to me why the borrow checker complains about the lifetime at line 51?
[13:25:31] <johnrkd> nevermind, the code was lacking "::" before <Type> after size_of
[13:27:06] <eddyb> heh, seemingly unrelated issues
[13:27:45] <eddyb> johnrkd: there 3 namespaces (that I know of): modules, types and... well... "items"
[13:28:03] <eddyb> the last one is made of statics, functions, local variables, etc
[13:28:19] <eddyb> johnrkd: you can have a type P, a module P and a function P
[13:28:20] <johnrkd> my enum did become a "thing" as expected, in the sense that i can size_of it
[13:28:35] <eddyb> the enum is just a type there
[13:29:12] <eddyb> johnrkd: type P...; fn P(...) -> P...; and mod P {fn foo() {}} can coexist
[13:29:21] <johnrkd> got it
[13:29:45] <eddyb> though I'm not sure if an impl and a mod can coexist
[13:29:52] <eddyb> they both allow you to do P::foo()
[13:29:57] <johnrkd> the way that to use Enum.Option i can't prefix with "Enum." still disturbs me
[13:30:25] <eddyb> "Enum."? that reminds me of some language but I'm not sure which
[13:30:32] <eddyb> rusti: struct P; mod P {fn foo(){}} P::foo();
[13:30:35] -rusti- pastebinned 7 lines of output: http://ix.io/9zW
[13:30:39] <johnrkd> like, enum Color { Red, Blue }; // Red gets thrown in "the namespace"
[13:31:00] <johnrkd> i'd expect it to be required to access Red through a prefix -> Color.Red
[13:31:07] <eddyb> there was a proposal for an "enum mod" construct that would let you do Color::Red
[13:31:32] <eddyb> but it didn't go through and the discussion is dying out I think
[13:31:47] <eddyb> johnrkd: that model is useful but it's not natural to ADTs
[13:32:09] <eddyb> you don't want to write Option::Some(foo)
[13:32:20] <eddyb> rusti: struct P; mod P {pub fn foo(){}} P::foo();
[13:32:20] -rusti- ()
[13:32:30] <johnrkd> ah that i don't
[13:32:49] <eddyb> rusti: struct P; mod P {pub fn foo(){}} impl P {fn bar(){}} P::foo(); P::bar();
[13:32:51] *** Quits: derby (dirby@3D8C1C98.E1C79604.6907F5B3.IP) (Quit: Leaving)
[13:32:52] -rusti- pastebinned 10 lines of output: http://ix.io/9zX
[13:33:05] <eddyb> hehehe the impl is actually a module
[13:33:13] <eddyb> rusti: struct P; mod P {pub fn foo(){}} impl P {fn bar(self){}} P::foo(); P.bar();
[13:33:15] -rusti- pastebinned 10 lines of output: http://ix.io/9zY
[13:33:55] <eddyb> (even if it doesn't include static fns. that's a little weird. maybe lazy)
[13:35:26] <johnrkd> uh, on an unrelated note, i got the compiler to throw the same error twice
[13:36:21] <johnrkd> rusti: let price: uint = 1; println!("size: {}", std::mem::size_of::<price>()); // i know this shouldn't work
[13:36:23] -rusti- pastebinned 18 lines of output: http://ix.io/9zZ
[13:36:31] <wilkie> rusti: fn main() { for i in std::iter::range_step(0, 2, 1) { println(format!("{}", i)); } } enum Foo { None }
[13:36:33] -rusti- pastebinned 7 lines of output: http://ix.io/9A0
[13:36:43] <wilkie> enums can do weird things sometimes
[13:37:20] <wilkie> like that enum definition broke a std lib function
[13:37:20] *** Quits: Ms2ger` (Ms2ger@moz-AD843210.ugent.be) (Connection reset by peer)
[13:38:37] <johnrkd> so there's reason for me to feel bothered by the lack of prefix thing
[13:39:00] <wilkie> it's a way to argue for it, certainly
[13:41:05] <johnrkd> about the 2 times error, i don't know there is something wrong or not
[13:41:22] <eddyb> johnrkd: prince is a local not a type
[13:41:31] <johnrkd> yeah, i don't expect it to work
[13:41:42] <johnrkd> however, the error was printed twice
[13:41:59] <johnrkd> i intentionally wanted to see the error message
[13:42:07] <eddyb> johnrkd: ah, that's because println! is a macro
[13:42:35] <eddyb> who knows what goes on inside
[13:42:43] <adridu59> is #[test] only for functions? like, can I preappend it to a module and have all its functions tested?
[13:43:44] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[13:43:47] <eddyb> rusti: let price: uint = 1; fn size_of<T>(_: T) -> uint {::std::mem::size_of::<T>()} size_of(price)
[13:43:48] -rusti- 8u
[13:43:52] <eddyb> johnrkd: ^^
[13:44:11] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[13:44:26] *** vfetwnuncszu is now known as dcrewi
[13:44:58] <johnrkd> oh, so that's how that works
[13:45:57] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[13:46:54] <ueki> rustc can compile https://gist.github.com/anonymous/8162399 fine, but rustpkg errors with "error: Package pool depends on native, but I don't know how to find it". Is this the same bug as: https://github.com/mozilla/rust/issues/10430 ?
[13:46:58] *** Joins: derby (dirby@moz-DAEFD4E7.piratenpartei-nrw.de)
[13:47:13] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[13:47:48] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[13:48:55] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[13:50:28] <eddyb> rusti: let v = ~[1, 2, 3]; v.slice_from(3)
[13:50:31] -rusti- pastebinned 18 lines of output: http://ix.io/9A1
[13:50:42] <eddyb> rusti: let v = ~[1, 2, 3]; v.slice_from(3).to_owned()
[13:50:43] -rusti- ~[]
[13:50:46] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[13:54:31] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Connection reset by peer)
[13:54:50] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[13:54:51] <pyon> The members of a struct always have the same lifetime as the whole struct, right?
[13:58:32] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Connection reset by peer)
[13:58:58] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[14:01:15] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Connection reset by peer)
[14:02:06] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[14:03:11] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[14:03:27] *** Quits: ueki (Mibbit@moz-1095CD08.kanagawa.ocn.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[14:04:12] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[14:04:20] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[14:04:53] <eddyb> http://www.reddit.com/r/rust/comments/1u02qz/the_m_error_model/ced8deb that's what I would imagine early rust discussions to sound like :)
[14:05:27] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[14:06:49] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[14:07:34] *** Joins: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net)
[14:07:36] *** Joins: maikklein (maik@moz-502609D4.dip0.t-ipconnect.de)
[14:07:38] <bjz> pyon: yes, unless you use generic lifetime parameters
[14:07:47] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[14:07:50] <bjz> (with borrowed pointers)
[14:08:20] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[14:08:35] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Client exited)
[14:09:21] <bjz> struct Thingy<'a, 'b, T> { haar: &'a T, hawr: &'b T, hyiia: T }
[14:10:03] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[14:10:10] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[14:11:28] *** Quits: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net) (Quit: Leaving.)
[14:11:58] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[14:12:26] *** Joins: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au)
[14:13:52] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[14:14:43] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[14:15:35] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[14:16:06] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[14:16:18] <eddyb> bjz: what do you think about struct Thingy<'a, 'b = 'a, T, U = T>(&'a T, &'b U);?
[14:16:28] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[14:16:43] <bjz> waugh?
[14:17:00] <eddyb> I didn't actually implement lifetimes yet, but it's not hard by any means
[14:17:23] <bjz> why would you need that?
[14:17:24] <bjz> :/
[14:17:52] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[14:17:55] <eddyb> I won't beat the "allow return in closures" PR in terms of features per changes, but it's still close to trivial
[14:18:12] <eddyb> bjz: Vec<T, A = DefaultHeap>
[14:18:12] *** Joins: sigma (sigma@moz-BFB7A653.range86-143.btcentralplus.com)
[14:18:28] <eddyb> same thing for Uniq
[14:21:17] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[14:22:27] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[14:24:20] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[14:26:03] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[14:26:27] <adridu59> is there a script available for automated testing of rust files?
[14:26:41] <cmr> adridu59: https://github.com/mozilla/rust/wiki/Doc-unit-testing ?
[14:26:58] <cmr> I mean, there's no script, but it's a two-command process...
[14:27:18] <adridu59> I was writing a shell script
[14:27:26] <adridu59> to compile and run all available files
[14:27:48] <eddyb> adridu59: like src/test/run-pass & friends in rust?
[14:28:16] *** Quits: dredozubov (dredozubov@2F14E2C1.F70E5FA9.F63E14E8.IP) (Input/output error)
[14:28:31] <adridu59> eddyb: it's ran from rust code right? I was more thinking of a script
[14:28:41] *** Quits: Ferreus (ferreus@88C29B29.FE9B9CED.7B8A71D0.IP) (Ping timeout)
[14:28:56] <eddyb> it's ran from the makefiles, not sure which scripts it goes through
[14:29:15] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[14:29:22] <eddyb> adridu59: it's different from #[test] though. I'm not sure what you want/need
[14:29:38] <adridu59> well I wrote my functions with #[test]
[14:29:49] *** Joins: ExceptionRaised (Mibbit@moz-A338.hsd1.ga.comcast.net)
[14:30:41] <ExceptionRaised> can someone help me with some string manipulation?
[14:30:47] <cmr> ExceptionRaised: sure
[14:30:52] <ExceptionRaised> specifically tokenizing stuff
[14:30:52] <ExceptionRaised> thanks
[14:30:53] *** Joins: gbulut (Mibbit@5DEF878.E3812DA5.1826D296.IP)
[14:31:15] <cmr> we don't have any sort of tokenizer interface yet, unfortunately.
[14:31:19] <gbulut> hi all!
[14:31:38] <cmr> anything more complex than the methods on http://static.rust-lang.org/doc/master/std/str/trait.StrSlice.html you'll need to do yourself.
[14:31:41] <ExceptionRaised> So i all want right now is to split a line into words, and store them in a struct
[14:31:55] <ExceptionRaised> im having difficulty with the storing not the parsing
[14:32:02] <eddyb> .words() gives you an iterator
[14:32:08] <cmr> Easy way is to store ~[~str], foo.words().collect()
[14:32:11] *** Joins: awidegreen (awidegreen@F1B0B4FE.4B116690.7B8A71D0.IP)
[14:32:21] <cmr> or maybe foo.words().map(|x| x.to_owned()).collect()
[14:32:27] <ExceptionRaised> yeah yeah so thats what im using is a ~[~str]
[14:32:44] <adridu59> why would you use a struct
[14:32:47] <eddyb> if you can use the iterator instead of collecting it, that's a bonus
[14:33:09] *** Quits: gbulut (Mibbit@5DEF878.E3812DA5.1826D296.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:33:16] <ExceptionRaised> but when i try to use it i keep getting a "use of partially moved value error"
[14:33:33] <cmr> ExceptionRaised: can you paste your code somewhere?
[14:33:55] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[14:34:37] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[14:34:40] <ExceptionRaised> https://gist.github.com/mwillsey/8182735
[14:37:12] *** Quits: awidegreen (awidegreen@F1B0B4FE.4B116690.7B8A71D0.IP) (Ping timeout)
[14:38:08] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[14:38:21] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[14:39:34] <cmr> ExceptionRaised: so the problem is you're moving out of the struct to match on the string.
[14:39:59] <cmr> ExceptionRaised: match on info.prog.as_slice()
[14:41:06] <eddyb> haha, are libnative/libgreen & friends built in parallel?
[14:41:14] <eddyb> -j starts being useful, finally
[14:41:27] *** Joins: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se)
[14:41:34] <ExceptionRaised> oh ok thank you
[14:41:42] <ExceptionRaised> im just getting used to the move semantics
[14:42:45] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[14:44:32] *** Joins: Ferreus (ferreus@88C29B29.FE9B9CED.7B8A71D0.IP)
[14:45:03] <pyon> What exactly is the difference between "&mut self" and "&'a mut self"?
[14:45:52] <eddyb> an explicit lifetime instead of an anonymous one
[14:45:57] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[14:46:18] <pyon> I want to make a custom iterator whose "next" method has signature "fn next(&'a mut self) -> Option<Row<'a>>".
[14:46:29] <cmr> not possible, sorry.
[14:46:53] <pyon> Mmm... So an iterator is forced to return something that may outlive the iterator itself?
[14:47:10] *** Quits: derby (dirby@moz-DAEFD4E7.piratenpartei-nrw.de) (Ping timeout)
[14:47:25] *** Quits: Ferreus (ferreus@88C29B29.FE9B9CED.7B8A71D0.IP) (Ping timeout)
[14:47:34] <cmr> Well.
[14:47:37] <cmr> Yes
[14:47:55] <eddyb> we need HKTs
[14:48:03] <pyon> Dang. This is what I have been struggling against since yesterday.
[14:48:08] <cmr> you can return a poitner with a lifetime, you just can't put a lifetime on self.
[14:50:16] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[14:51:08] *** Quits: ExceptionRaised (Mibbit@moz-A338.hsd1.ga.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[14:51:13] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Connection reset by peer)
[14:51:43] <pyon> I am making a custom iterator that iterates a disk-based data structure. The iterator internally keeps a TrieMap<File> of all the open files, in order to avoid needlessly opening/closing the same files over and over. However, when the iterator goes out of scope, the Files get destroyed and of course the user should be unable to use the values returned by the iterator. :-|
[14:51:53] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[14:52:19] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[14:52:40] <cmr> I would look at how the iterators in std::vec are implemented for inspiration.
[14:53:28] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[14:53:29] <pyon> gonna have a look, ty
[14:56:03] <eddyb> you can throw Rc at it, btw :P
[14:56:37] <pyon> What for, exactly?
[14:56:39] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[14:56:54] <eddyb> pyon: to return shared references
[14:57:08] <eddyb> and then the Files get destroyed when they aren't required
[14:57:34] *** Quits: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se) (Ping timeout)
[15:00:38] <pyon> eddyb: Then, the iterator does not uniquely own the Files, but, rather, ownership is shared between the iterator and the values returned by the iterator's "next" right?
[15:01:19] <eddyb> yes
[15:01:24] *** Joins: derby (dirby@96E3B715.245319D5.A60D23CA.IP)
[15:02:30] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:02:40] <pyon> This is a nice solution! :-) I had not thought about that. :-P
[15:03:00] <strcat> hm
[15:03:21] <strcat> it'd be nice if you could have private methods on traits, usable only by default methods in the trait
[15:03:25] <strcat> something like that anyway... ;p
[15:03:43] <strcat> well, just regular module-level/crate-level privacy would work
[15:03:44] <pyon> strcat: Yep!
[15:04:09] <pyon> strcat: Yep to both. :-P
[15:04:17] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[15:06:22] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[15:06:34] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[15:07:18] *** Quits: fabiand (fabiand@moz-D54E23F.adsl.alicedsl.de) (Quit: Verlassend)
[15:08:10] <eddyb> impl Trait. requires DST AFAIK
[15:09:31] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[15:10:05] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[15:10:23] *** Joins: fabiand (fabiand@moz-D54E23F.adsl.alicedsl.de)
[15:11:20] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[15:12:11] *** Joins: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP)
[15:12:18] *** Quits: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au) (Ping timeout)
[15:15:16] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[15:17:00] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[15:17:11] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[15:19:09] <eddyb> don't get your bones get rusty :P https://www.youtube.com/watch?v=HfzXb2q37N0
[15:19:19] <eddyb> s/get/let/
[15:19:39] <sbalmos> I wish I could disappear again for another week of vacation
[15:21:02] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Connection reset by peer)
[15:21:40] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[15:21:47] *** Quits: maikklein (maik@moz-502609D4.dip0.t-ipconnect.de) (Ping timeout)
[15:25:01] *** Joins: elux (peter@B6F21F4B.1F20BC31.2170E5F.IP)
[15:28:04] *** Joins: rca (rcatolino@moz-9311B86D.adsl.proxad.net)
[15:28:35] *** Quits: rca (rcatolino@moz-9311B86D.adsl.proxad.net) (Quit: Lost terminal)
[15:28:40] *** Joins: rca (rcatolino@moz-9311B86D.adsl.proxad.net)
[15:28:49] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[15:31:27] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:34:35] *** Quits: erick (erick@E1304535.2A7189BF.BE19388.IP) (Ping timeout)
[15:35:25] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[15:35:46] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[15:41:18] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Quit: Leaving.)
[15:42:12] *** Quits: derby (dirby@96E3B715.245319D5.A60D23CA.IP) (Input/output error)
[15:42:37] *** Joins: derby (dirby@moz-2D5D59EE.de)
[15:43:00] <johnrkd> so, are there plans to make the language even less verbose ?
[15:43:13] <johnrkd> (flamable question)
[15:43:33] <johnrkd> i guess verbose is not what i'm trying to say
[15:43:45] <johnrkd> it's some other word i'm not sure of
[15:43:53] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[15:44:15] <FreeFull> More concise?
[15:44:40] <strcat> johnrkd: there aren't plans to make major syntax/semantic changes beyond certain subsets of the language
[15:45:22] <pyon> Perhaps some of (perhaps most of?) "that which you do not have a word for yet" is due to having to juggle with lifetimes and mutability?
[15:45:28] <pyon> johnrkd: ^
[15:45:53] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[15:47:10] <johnrkd> uh, not really b/c i haven't got there yet, i'm learning rust because i can't stand Go
[15:47:16] <johnrkd> even though i'd like to
[15:47:30] <johnrkd> i barely got the basics
[15:47:37] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[15:47:51] <johnrkd> my feeling that lead to the question comes from looking around rust code
[15:48:09] <SiegeLord> The rule is that you can't complain about Rust's syntax until you finished the tutorial
[15:48:12] <johnrkd> the stdlib and com libs
[15:48:17] <johnrkd> hahah, all right!
[15:48:22] <johnrkd> some libs *
[15:48:28] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[15:48:51] *** Quits: limeburst (me@247D1419.D73964AC.27A8748.IP) (Ping timeout)
[15:49:29] *** Quits: decoder (quassel@moz-D7023D7D.own-hero.net) (Ping timeout)
[15:49:38] *** Quits: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP) (Ping timeout)
[15:50:10] *** Joins: decoder (quassel@moz-D7023D7D.own-hero.net)
[15:50:43] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Connection reset by peer)
[15:51:07] *** Joins: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP)
[15:51:25] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[15:51:26] <eddyb> johnrkd: there's moves in both directions - I just opened this last night, would make some generics less verbose https://github.com/mozilla/rust/issues/11196
[15:51:55] *** Joins: limeburst (me@247D1419.D73964AC.27A8748.IP)
[15:51:56] *** Joins: rce (henryhei@moz-4C25427B.cs.helsinki.fi)
[15:51:57] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[15:52:15] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[15:52:33] <johnrkd> omg that 2nd fn from the first snippet
[15:52:53] <johnrkd> insta-reminded of some C++ code, the scary type
[15:53:06] <johnrkd> kind*
[15:53:18] <eddyb> johnrkd: that's what I'm trying to avoid ;)
[15:54:25] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[15:54:30] <sbalmos> That is just disturbing looking
[15:54:48] <sbalmos> Reminds me of trying to re-whitespace minified and obfuscated JS
[15:55:05] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[15:56:10] <eddyb> the "optimization" for trait references looks like a low-hanging fruit to me, I wonder why nobody thought of it before?
[15:56:50] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[15:57:02] <SiegeLord> I don't see what purpose it serves
[15:57:17] <SiegeLord> That whole proposal seems to interact very poorly with current Rust
[15:57:34] *** Joins: jhasse (jhass_000@moz-FFC47FF9.ewe-ip-backbone.de)
[15:57:47] <cmr> http://cmr.github.io/blog/2013/12/30/this-week-in-rust/
[15:58:19] *** Joins: maikklein (maik@moz-502609D4.dip0.t-ipconnect.de)
[15:59:01] <sbalmos> cmr: My head's had a bit too much caffeine. I read "This Week In Rust" with some echoing announcer voice, and at the end, always end up with "tune in next week for another edition of... This Week In Rust"
[15:59:46] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[16:00:15] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[16:00:23] <rce> Can Rust currently be used to create a shared lib (dll) on Windows? I can't seem to find anything about it by googling.
[16:00:39] <jhasse> rce, yes.
[16:00:45] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: WeeChat 0.4.2)
[16:00:47] <eddyb> rce: creating a library on windows should produce a DLL
[16:00:48] <jhasse> shared libraries are standard
[16:00:57] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[16:00:57] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: jaen)
[16:01:07] <jhasse> it's hard to create a static library (if even at all possible atm)
[16:01:15] <cmr> it's not hard, it's trivial
[16:01:17] <cmr> rustc --rlib
[16:01:25] <johnrkd> there are some blog posts about that, i don't remember where though
[16:01:27] <cmr> as opposed to rustc --lib, for dll's
[16:01:31] <eddyb> the only rust-specific format is the LTO-enabled static library
[16:01:35] <johnrkd> but iirc i've seen more than one
[16:02:01] <rce> Great, thanks!
[16:02:57] <jhasse> ups sry, thought I read somewhere that creating static libraries has some issues.
[16:03:42] <kimundi> It had, but afaik its resolved now
[16:04:53] *** Quits: zz_brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Quit: Linkinus - http://linkinus.com)
[16:04:59] <eddyb> and static linking for executables is the default now
[16:05:00] <luisbg> I got an email about bitcoin tip when my latest commits were merged in Rust's master?
[16:05:06] <rce> And I can use 'extern "C"' to make sure exported names are unmangled, right?
[16:05:09] <luisbg> is this happening to other people? it looks fishy
[16:05:23] <sbalmos> o_O
[16:05:33] <cmr> luisbg: it's legit.
[16:05:44] <sigma> you received a bitcoin tip? that's legit
[16:05:49] <jhasse> luisbg, got it too
[16:05:59] <eddyb> xmas presents?
[16:06:03] * eddyb needs to check his email :P
[16:06:05] <jhasse> but the amount is about nothing
[16:06:10] <eddyb> rce: #[no_mangle]
[16:06:31] <eddyb> rce: extern "C" just ensures the right ABI
[16:06:33] <luisbg> jhasse, I don't have a bitcoin wallet, worth creating one just to collect this "about nothing"?
[16:06:36] <luisbg> who is sending this?
[16:06:37] <cmr> http://tip4commit.com/projects/149
[16:06:41] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[16:06:46] <cmr> luisbg: it's anonymous
[16:07:01] <jhasse> luisbg, no I wont. Theres a withdraw limit. 0.0001 iirc
[16:07:05] *** Joins: bkircher (bkircher@moz-C0320469.dip0.t-ipconnect.de)
[16:07:08] <sbalmos> weird, never even heard of that
[16:07:19] <luisbg> jhasse, hahaha
[16:08:05] <luisbg> the idea of anonymous funding of open source is cool though, it has been tried several times and never sticked
[16:08:17] <johnrkd> rce: google "#[no_mangle] rust" to find the blog post i mentioned; it's not about DLL's though, it seems
[16:08:21] <strcat> luisbg: https://www.gittip.com/
[16:08:25] <rce> eddyb: Thanks
[16:08:27] <strcat> seems to work there.
[16:08:37] <eddyb> hahahaha
[16:08:38] <luisbg> strcat, :)
[16:08:41] <eddyb> bors was tipped =)))
[16:08:46] <strcat> although the people at the top aren't programmers, they seem to be bloggers ;\
[16:09:29] <eddyb> apparently I got tipped on 14 Dec 01:07
[16:09:39] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[16:09:45] <sbalmos> eddyb: Don't spend it all in one place
[16:09:47] *** Joins: Kruppe (user@moz-EE1E894A.home3.cgocable.net)
[16:10:07] *** Joins: lpy (lpy@12172131.F09091A8.1348A864.IP)
[16:10:30] <luisbg> sbalmos, hahahaa
[16:10:41] <luisbg> eddyb, bors is going to hit the limit pretty fast :P
[16:11:01] <sigma> bors can pay for the cake when 1.0 is finalised
[16:11:08] <eddyb> haha that's what I was thinking :D
[16:12:46] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[16:13:01] *** vfetwnuncszu is now known as dcrewi
[16:13:39] <strcat> luisbg: anyway I really don't get the idea of tipping evenly across commits automatically ;p
[16:14:04] *** Joins: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net)
[16:14:22] *** Joins: vmx (vmx@moz-2197A4B5.pools.arcor-ip.net)
[16:14:49] <luisbg> strcat, yeah, but something non-automatic is going to be left behind at some point
[16:15:05] <strcat> luisbg: gittip lets you fund people
[16:15:07] <luisbg> and well, software engineering metrics are always bad, no matter which system you use
[16:15:11] *** Quits: jesse99 (jesse99@moz-8B1E0C5D.hsd1.wa.comcast.net) (Ping timeout)
[16:15:32] <luisbg> strcat, but wouldn't funding specific people mean there is a bias towards "popular" work?
[16:15:48] <strcat> luisbg: sure, and that's the point
[16:15:57] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[16:16:22] <strcat> afaik it's meant to encourage volunteer contributors
[16:16:22] <luisbg> like how that cloud-based video editor got 25k in kickstarter
[16:16:31] <luisbg> strcat, I see your point
[16:16:41] <strcat> if you're just automatically tipping some red hat employee who contributes the most to the project, why bother? they get paid a lot anyway
[16:16:55] <jhasse> strcat, +1
[16:16:58] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[16:17:01] <eddyb> wait, what?
[16:17:01] <luisbg> sure, though "a lot" is debatable :P
[16:17:12] <eddyb> are bitcoins SEVEN hundreds of dollars now?
[16:17:15] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[16:17:23] <eddyb> but... that's.... after the bubble
[16:17:27] <sigma> they were up over a grand for a bit were they not?
[16:17:27] <strcat> eddyb: well, they go back up
[16:17:29] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[16:17:31] <sbalmos> eddyb: New bubble
[16:17:40] <eddyb> pfffft. should've been watching
[16:17:41] <sbalmos> eddyb: Mt.Gox needs to take some GasX
[16:17:41] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[16:17:43] <strcat> eddyb: there's no bubble bursting, just volatility 
[16:17:50] <eddyb> third time's the charm?
[16:17:55] <sbalmos> hardly
[16:17:55] <strcat> it'll drop again
[16:17:57] <strcat> buy some ;p
[16:17:58] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[16:18:05] <strcat> (when it drops obviously)
[16:18:14] <sbalmos> join the lemming rush!
[16:18:18] <luisbg> volatile currency
[16:18:40] <eddyb> needs unsafe code to access
[16:18:43] <strcat> s/currency/commodity for speculative investments/
[16:18:58] *** Joins: mib_tilx9g (Mibbit@moz-1095CD08.kanagawa.ocn.ne.jp)
[16:19:00] <luisbg> strcat, true
[16:19:10] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[16:19:12] <luisbg> eddyb, I usually ignore the bitcoin related articles in HN, unsafe code?
[16:19:13] <sigma> the price needs to be a few orders of magnitude larger before there is enough money in the system to support the amount of transactions it needs to stabilise, so it'll keep doing what it's doing for a while yet
[16:19:27] <eddyb> luisbg: volatile. it was a rusty joke :P
[16:19:35] <eddyb> so what I have is a cent
[16:19:38] <luisbg> eddyb, oooooh! gotcha
[16:19:39] <eddyb> not even two. just one
[16:19:48] <luisbg> penny for your commits :P
[16:19:55] <kimundi> eddyb: Spend it wisely!
[16:20:20] <eddyb> luisbg: hah
[16:20:25] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Connection reset by peer)
[16:20:48] <strcat> well, it won't let you withdraw, anyway
[16:20:51] <strcat> and they probably take a cut
[16:21:04] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[16:21:27] *** Joins: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au)
[16:21:51] <eddyb> http://tip4commit.com/projects/223
[16:22:25] <mib_tilx9g> I was reading lib extra as study material... can someone tell me why the impls of the ToBase64 trait need a named lifetime? it's never referenced by the impl body. 
[16:22:25] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[16:22:27] <eddyb> strcat: I have a better chance of getting hired by Mozilla than earning a dollar using such things
[16:22:27] * strcat finds that to be a really dumb idea ;p
[16:22:35] <strcat> you could give that thing 10 dollars and 90% will be lost
[16:22:41] <strcat> because it'll be divided up and never withdrawn
[16:22:41] <pyon> How can I take a mutable slice of a owned vector?
[16:22:53] <eddyb> .as_mut_slice()
[16:22:57] <pyon> ty
[16:23:19] <eddyb> it should coerce automatically. I'm not sure, actually
[16:23:22] *** Quits: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au) (Ping timeout)
[16:23:54] <mib_tilx9g> sorry I tried to paste the git hublink but accessing irc from android chrome and nearly impossible to type
[16:24:48] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[16:25:19] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[16:25:34] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[16:25:36] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[16:26:23] <vmx> can someone help me with that comment on one of my pull requests: does "r=me when done" mean that i should add a comment containing "r=huonw" when i did the squash? https://github.com/mozilla/rust/pull/11125#issuecomment-31210820
[16:26:55] <pyon> eddyb: http://static.rust-lang.org/doc/master/std/vec/trait.MutableVector.html -- according to this, owned vectors do not implement MutableVector (which owns as_mut_slice)
[16:27:09] <eddyb> that's because they should coerce
[16:27:12] <strcat> pyon: they will coerce to a slice
[16:27:19] <pyon> Ah.
[16:28:00] <pyon> v.as_mut_slice is the same as v.mut_slice_from(0), right?
[16:28:01] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[16:28:55] <eddyb> o11c: the other way around, but yeah
[16:29:04] <eddyb> err, pyon^^
[16:29:06] *** Joins: bynaryshef (bynaryshef@moz-DCC9E7CE.mem.bellsouth.net)
[16:29:09] <pyon> Ah
[16:29:49] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[16:30:00] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[16:30:07] <mib_tilx9g> https://github.com/mozilla/rust/blob/master/src/libextra/base64.rs ^ the file for which I had the lifetime question above. 
[16:31:21] <eddyb> mib_tilx9g: this? impl<'a> ToBase64 for &'a [u8] {
[16:32:05] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Client exited)
[16:32:13] *** Joins: Kxepal832 (Miranda@moz-1E4F2404.pppoe.mtu-net.ru)
[16:32:36] *** Quits: Kxepal (Miranda@moz-2C828513.pppoe.mtu-net.ru) (Ping timeout)
[16:32:38] <eddyb> mib_tilx9g: could be cruft left behind. extra doesn't get updated as often
[16:33:21] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[16:34:00] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[16:34:15] <cmr> that's not cruft
[16:34:44] <cmr> slices/borrowed pointers can't be in an impl without a lifetime.
[16:37:10] *** Quits: lpy (lpy@12172131.F09091A8.1348A864.IP) (Client exited)
[16:37:44] <eddyb> cmr: yeah, I wasn't sure. I guess I could've tried a simple example
[16:38:19] *** Joins: alan_andrade (alan_andra@2D866054.D1EB06A3.B7838CA6.IP)
[16:39:34] <adridu59> how can I catch the output of rustc? surprisingly "> output" seems to have no effect
[16:40:11] <adridu59> I mean it produces a blank file
[16:40:17] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[16:40:18] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[16:40:21] <adridu59> and output still display on the console
[16:40:23] <adridu59> s
[16:40:28] *** vfetwnuncszu is now known as dcrewi
[16:41:25] <Blei> adridu59: 2>
[16:41:40] <adridu59> Blei: thanks, what's this 2 for?
[16:42:07] <Blei> fd of stderr, i guess. 2> is used to capture stderr to a file
[16:42:27] *** Joins: james4k (james@moz-1FE2B9B1.tyrdcmta03.hnsntx.tl.dh.suddenlink.net)
[16:44:09] *** Quits: james4k (james@moz-1FE2B9B1.tyrdcmta03.hnsntx.tl.dh.suddenlink.net) (Ping timeout)
[16:44:55] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[16:45:05] *** Quits: mib_tilx9g (Mibbit@moz-1095CD08.kanagawa.ocn.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[16:48:11] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[16:48:51] *** Joins: jesse99 (jesse99@moz-8B1E0C5D.hsd1.wa.comcast.net)
[16:49:53] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[16:50:12] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Connection reset by peer)
[16:50:36] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[16:51:11] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[16:54:58] *** Joins: Scruff (Scruff@moz-3D819DF8.hsd1.fl.comcast.net)
[16:58:54] *** Joins: bkircher_ (bkircher@moz-C0320469.dip0.t-ipconnect.de)
[16:58:54] *** Quits: bkircher (bkircher@moz-C0320469.dip0.t-ipconnect.de) (Connection reset by peer)
[16:59:30] *** Quits: derek_c (derek@BE524653.727D7A21.EB673A25.IP) (Ping timeout)
[17:00:53] *** Joins: jviereck (Adium@moz-9CCF231E.dip0.t-ipconnect.de)
[17:01:27] *** Joins: flammi (smuxi@moz-A5241BD6.dip0.t-ipconnect.de)
[17:01:57] *** Quits: alan_andrade (alan_andra@2D866054.D1EB06A3.B7838CA6.IP) (Input/output error)
[17:02:18] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[17:07:39] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[17:09:21] *** Quits: bkircher_ (bkircher@moz-C0320469.dip0.t-ipconnect.de) (Client exited)
[17:10:53] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[17:10:56] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[17:10:57] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[17:11:13] *** vfetwnuncszu is now known as dcrewi
[17:16:10] <pyon> A mutable slice "&mut [u8]" can have its contents, but cannot be resized (other than by taking a subslice), right?
[17:16:15] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[17:16:15] <pyon> have its contents modified*
[17:16:45] *** Joins: kzzch (kzzch@moz-991A24E8.hsd1.va.comcast.net)
[17:17:59] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[17:18:45] *** Joins: derek_c (derek@3540654D.6D979348.291A146C.IP)
[17:19:05] <cmr> pyon: correct.
[17:19:10] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[17:20:00] <pyon> Lovely. :-)
[17:20:34] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[17:23:00] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[17:23:46] <adridu59> does someone have a simple test unit example? something with an assert_eq!
[17:23:55] *** Joins: nrc (ncameron@moz-AD2938E.hari.cable.virginm.net)
[17:24:33] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[17:26:18] <strcat> adridu59: #[test] fn test_sanity() { assert_eq!(1, 1) }
[17:27:43] <adridu59> strcat: oh right, thanks! that one didn't come to my mind tbh, I must be insane
[17:27:59] <eddyb> run the test ASAP
[17:28:41] <adridu59> I had written something with to_lowercase() previously but I found out it needed the type ASCII (thought it would be possible on str with an Option, oh well)
[17:28:55] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[17:30:39] <adridu59> well it's to_lower()
[17:32:27] *** Quits: jviereck (Adium@moz-9CCF231E.dip0.t-ipconnect.de) (Quit: Leaving.)
[17:32:30] *** Joins: jviereck (Adium@moz-9CCF231E.dip0.t-ipconnect.de)
[17:33:07] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[17:33:43] <adridu59> hopefully I can push soon my new content
[17:34:58] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[17:36:56] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[17:37:41] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[17:38:36] *** Quits: Scruff (Scruff@moz-3D819DF8.hsd1.fl.comcast.net) (Quit: )
[17:40:05] *** Joins: bkircher (bkircher@moz-C0320469.dip0.t-ipconnect.de)
[17:43:02] <kimundi> adridu59: Well, you can chain the Ascii stuff to get An Option<~str>
[17:44:55] *** Joins: Y (chatzilla@moz-4398AD88.dynamic.isp.telekom.rs)
[17:45:32] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[17:46:08] *** Joins: Scruff (Scruff@moz-3D819DF8.hsd1.fl.comcast.net)
[17:47:06] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[17:47:20] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[17:48:43] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[17:50:27] <adridu59> kimundi: chain? could you elaborate on that?
[17:51:18] <kimundi> adridu59: Something like "foo".as_ascii_opt().map(|s| s.to_lower().to_str_ascii())
[17:51:18] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[17:51:48] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[17:52:04] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[17:52:07] <adridu59> kimundi: thank you, I'll have a look at that
[17:52:17] *** vfetwnuncszu is now known as dcrewi
[17:53:56] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[17:53:56] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:54:19] *** pcwalton sets mode: -b *Yeahh*!*@*
[17:54:21] *** pcwalton sets mode: -b *!*@749480A4.6740EB7B.E084BF44.IP
[17:54:23] *** pcwalton sets mode: -b *!*@47E3E64E.ADA8B503.1B699333.IP
[17:54:25] *** pcwalton sets mode: -b oYeahh*!*@*
[17:54:27] *** pcwalton sets mode: -b *!*@1D8F7AC1.B4C4F7C2.F00C612C.IP
[17:55:03] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[17:58:55] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[18:00:44] *** Quits: Scruff (Scruff@moz-3D819DF8.hsd1.fl.comcast.net) (Quit: )
[18:01:06] * pcwalton is the mailing list grump today
[18:01:29] <SiegeLord> \o/
[18:02:19] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[18:02:27] <wycats_> cmr: https://github.com/wycats/route-recognizer.rs/blob/master/src/lib.rs#L50
[18:02:30] <wycats_> it's coming
[18:02:33] <wycats_> give me a few days
[18:02:37] <wycats_> I have to do captures
[18:03:04] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[18:03:39] *** Quits: maikklein (maik@moz-502609D4.dip0.t-ipconnect.de) (Ping timeout)
[18:04:50] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:04:53] <Blei> Quick off topic question: are there any good gui irc clients for linux?
[18:05:09] <Blei> i love weechat, but its inability to make long links clickable is just so annoying
[18:05:56] <FreeFull> You could try using a different terminal
[18:06:26] <Blei> FreeFull: the problem is links that are broken over multiple lines, i don't think a different terminal would help
[18:06:34] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[18:08:27] <FreeFull> Ah, weechat probably inserts a newline. There should be a configuration option to make it not do that
[18:08:42] <benh> in irssi(+screen+mosh+urxvt), i can select links that are broken over multiple lines in one doubleclick
[18:08:52] <strcat> benh: weechat aligns text by default though
[18:08:54] <kimundi> Blei: I'm using hexchat, but I never tried much else, so I have no idea if you would rate it as "good" ;)
[18:08:58] <strcat> benh: can turn it off
[18:09:14] *** Joins: Scruff (Scruff@moz-3D819DF8.hsd1.fl.comcast.net)
[18:09:15] <strcat> aligned text + terminal -> broken links
[18:09:17] <Blei> strcat: oh, really? how?
[18:09:19] <jhasse> sfackler, What does AST mean? (in this context https://github.com/mozilla/rust/issues/9416)
[18:09:20] <SiegeLord> I'm using a url script thingie
[18:09:23] <SiegeLord> For weechat
[18:09:28] * benh wonders if someone can't make a gui irc client where the gui mostly looks like a terminal window
[18:09:31] <FreeFull> Hexchat would probably be the standard GUI IRC client nowadays
[18:09:35] <SiegeLord> So it's /url 1 for me
[18:09:35] <Blei> kimundi: hmm, i might try that, thanks
[18:09:54] <strcat> benh: sure, weechat is intended to have gtk/qt frontends
[18:10:00] <strcat> it just doesn't work yet
[18:10:01] <FreeFull> benh: I'd rather just use an IRC client that runs in a terminal
[18:10:01] <strcat> ;p
[18:10:09] <strcat> FreeFull: why?
[18:10:24] <FreeFull> strcat: Can put it in tmux and such
[18:10:35] <benh> i like the transparency of just reconnecting a screen and finding irssi with a full backlog just like i left it
[18:10:41] <strcat> FreeFull: just use an irc bouncer
[18:11:08] <FreeFull> That's not why I have it in tmux
[18:11:16] <strcat> FreeFull: then why?
[18:11:30] <benh> multiplexing on different machines?
[18:11:42] <FreeFull> I only really have one machine
[18:11:42] <strcat> the irc bouncer accomplishes that
[18:12:06] *** Quits: derek_c (derek@3540654D.6D979348.291A146C.IP) (Ping timeout)
[18:12:09] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[18:12:15] <strcat> I have a good window manager so split/tabbing in applications is unnecessary if they don't provide something compelling like context-aware search through them
[18:12:21] <FreeFull> I like being able to press C-a-c to make a new terminal appear, and such
[18:12:32] <FreeFull> And have it all switchable easily, separately from the WM
[18:12:33] <sfackler> jhasse: abstract syntax tree
[18:12:48] <strcat> super+enter makes a new terminal appear here, and I can have splits/tabs/stacks wherever I want ;p
[18:12:52] <sfackler> jhasse: though now rustpkg can use the same machinery that --dep-info uses to find all of the files it needs
[18:12:57] <strcat> tmux would be pretty pointless for me
[18:13:13] <strcat> I might want to tab a wireshark window with a specific terminal window
[18:13:26] *** Joins: short (Mibbit@moz-E1532C88.amazon.com)
[18:13:32] <jhasse> sfackler, thx. Is someone working on this bug? Makes rustpkg pretty useless for me :/
[18:14:02] *** Quits: jviereck (Adium@moz-9CCF231E.dip0.t-ipconnect.de) (Quit: Leaving.)
[18:14:03] <FreeFull> I can use my IRC client without X11 running
[18:14:51] <strcat> FreeFull: and why would that be the case?
[18:14:57] <strcat> seems pretty silly
[18:15:24] <FreeFull> What, I need to have a GUI running all the time?
[18:15:27] <strcat> if you have a virtual console you can have weston/X11
[18:15:32] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[18:15:39] <strcat> FreeFull: how about for nice window management? instead of crappy tmux/screen/vim splits/tabs
[18:15:49] <strcat> maybe you actually want to use a proper web browser
[18:16:17] <FreeFull> If I want to browse the web with javascript and other niceties I can start X11 up
[18:16:28] <strcat> so, why not just have it started in the first place?
[18:16:39] <FreeFull> 99.999% I have everything fullscreened
[18:16:42] *** Joins: moostik (Icedove@moz-40E6ACEF.w2-2.abo.wanadoo.fr)
[18:16:49] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[18:16:51] <strcat> FreeFull: so again, why not have X started in the first place?
[18:16:53] <acrichto> bjz: ping
[18:17:12] <sfackler> jhasse: not that I know of
[18:17:15] <FreeFull> So when I have X11 running (which is admitably most of the time) when I want to switch between things, I just switch between workspaces
[18:17:56] <strcat> FreeFull: but you can use better applications (sxiv, better mpv than the frame buffer version, sane browsers, better frontends for stuff like wireshark/vim)
[18:17:59] * strcat shrugs
[18:18:16] <strcat> anyway have to go
[18:18:18] <strcat> will argue more later
[18:18:20] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[18:18:29] *** Joins: jdm (jdm@moz-3FFA85CA.dsl.teksavvy.com)
[18:18:29] *** ChanServ sets mode: +o jdm
[18:18:31] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[18:18:32] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[18:18:32] *** Quits: moostik (Icedove@moz-40E6ACEF.w2-2.abo.wanadoo.fr) (Quit: moostik)
[18:18:41] <SiegeLord> lol
[18:18:45] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[18:19:01] *** Joins: moostik (Icedove@moz-40E6ACEF.w2-2.abo.wanadoo.fr)
[18:19:15] *** Quits: Scruff (Scruff@moz-3D819DF8.hsd1.fl.comcast.net) (Quit: )
[18:20:38] *** Joins: jviereck (Adium@moz-9CCF231E.dip0.t-ipconnect.de)
[18:20:40] *** Quits: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch) (Quit: WeeChat 0.4.2)
[18:20:43] *** Joins: Blei (Philipp@moz-B2F9E4BD.cust.bluewin.ch)
[18:20:50] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[18:22:44] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[18:25:30] *** Quits: flammi (smuxi@moz-A5241BD6.dip0.t-ipconnect.de) (Ping timeout)
[18:26:02] *** Joins: ziad (ziad@B20586FB.BDB3D91.6E370BFC.IP)
[18:26:07] <eddyb> SiegeLord: what do you achieve by moving the bounds and making it *more* verbose?
[18:26:29] *** Quits: Y (chatzilla@moz-4398AD88.dynamic.isp.telekom.rs) (Client exited)
[18:26:31] <SiegeLord> You get to the arguments quicker
[18:26:38] <eddyb> that wasn't my point
[18:26:39] *** Quits: Blei (Philipp@moz-B2F9E4BD.cust.bluewin.ch) (Quit: Blei)
[18:26:43] *** Joins: derek_c (derek@461081A4.727D7A21.EB673A25.IP)
[18:26:44] *** Joins: Blei (Philipp@moz-B2F9E4BD.cust.bluewin.ch)
[18:26:44] <SiegeLord> And don't have to read pages of boiler-plate
[18:29:37] <SiegeLord> Well, I don't know what your point was :P
[18:30:56] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[18:30:56] <eddyb> SiegeLord: unboxing closures without changing the syntax, for one
[18:31:36] <eddyb> now that we have trait object coercion, we also don't want virtual overusage, but the &Trait form is nicer
[18:35:01] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[18:35:42] *** Quits: Kruppe (user@moz-EE1E894A.home3.cgocable.net) (Ping timeout)
[18:35:44] *** Quits: bynaryshef (bynaryshef@moz-DCC9E7CE.mem.bellsouth.net) (Quit: Leaving)
[18:35:53] *** Joins: Scruff (Scruff@moz-3D819DF8.hsd1.fl.comcast.net)
[18:37:56] <SiegeLord> Then change the trait object syntax to something else
[18:38:21] *** Quits: fabiand (fabiand@moz-D54E23F.adsl.alicedsl.de) (Quit: Verlassend)
[18:38:23] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[18:40:51] *** Quits: jdm (jdm@moz-3FFA85CA.dsl.teksavvy.com) (Ping timeout)
[18:42:28] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[18:42:45] <SiegeLord> I don't even get how you're supposed to pass boxed closures in your proposal
[18:42:45] <kimundi> eddyb: Isn't the problem with making generic paramters implicitly declared that you losse the link between different arguments with the same generic type?
[18:43:30] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[18:43:39] *** Quits: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP) (Ping timeout)
[18:44:17] *** Joins: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP)
[18:44:20] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[18:46:35] *** Quits: Scruff (Scruff@moz-3D819DF8.hsd1.fl.comcast.net) (Quit: )
[18:47:02] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[18:48:25] *** Joins: jdm (jdm@moz-3FFA85CA.dsl.teksavvy.com)
[18:48:26] *** ChanServ sets mode: +o jdm
[18:50:57] *** Joins: nif (nif@moz-88771D92.oberlin.net)
[18:51:01] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[18:51:38] *** Quits: derek_c (derek@461081A4.727D7A21.EB673A25.IP) (Ping timeout)
[18:51:38] *** Joins: alan_andrade (alan_andra@2D866054.D1EB06A3.B7838CA6.IP)
[18:54:42] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[18:57:30] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[18:58:41] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[18:59:19] *** Joins: maikklein (maik@moz-502609D4.dip0.t-ipconnect.de)
[19:01:29] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[19:01:38] *** alan_andrade is now known as tacosWithSalsa
[19:02:08] *** Joins: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP)
[19:04:47] *** Quits: heftig (heftig@moz-FB34F68F.dip0.t-ipconnect.de) (Ping timeout)
[19:06:14] *** Quits: gkostyanikov (gkostyanik@969EE5A2.EF9FA30D.CA6E2165.IP) (Ping timeout)
[19:06:57] *** Joins: io2 (io2@moz-34E8FDD4.home.otenet.gr)
[19:07:07] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[19:09:22] *** Quits: maikklein (maik@moz-502609D4.dip0.t-ipconnect.de) (Ping timeout)
[19:10:44] *** Quits: andre (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[19:10:51] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[19:11:14] <tacosWithSalsa> I
[19:12:35] <tacosWithSalsa> I'm working on a small improvement for the getopts documentation code but I'm stuck because I don't know where to put the `[feature()]` command 
[19:12:37] <tacosWithSalsa> https://github.com/mozilla/rust/pull/11142/files
[19:12:58] <tacosWithSalsa> The intention of this pr is that the examples go with the compiler recomentations
[19:13:36] *** Joins: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[19:14:06] <tacosWithSalsa> In libstd/str.rs is the example that fails. I added the `feature` directive there but is not working.
[19:14:15] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[19:14:37] <tacosWithSalsa> I'm not sure If I have to add the feautre directive in librustdoc/test.rs since that would apply for every example
[19:15:05] *** Quits: engla (engla@moz-F64E1B0F.cust.bredbandsbolaget.se) (Ping timeout)
[19:15:35] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[19:17:01] <sfackler> tacosWithSalsa: it has to go at the crate root so you'll need to have the example define its own main function and put the #[feature()]; at the very top of the doc block
[19:17:20] <sfackler> i.e. "#[feature(whatever)]; fn main() { stuff here }"
[19:17:23] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[19:17:38] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[19:19:01] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Connection reset by peer)
[19:19:11] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[19:19:19] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[19:19:24] *** Joins: james4k (james@moz-1FE2B9B1.tyrdcmta03.hnsntx.tl.dh.suddenlink.net)
[19:19:47] *** Quits: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[19:20:08] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[19:21:01] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Quit: Leaving...)
[19:21:06] *** Quits: james4k (james@moz-1FE2B9B1.tyrdcmta03.hnsntx.tl.dh.suddenlink.net) (Ping timeout)
[19:22:04] *** Joins: Ferreus (ferreus@moz-89CF2F76.pools.arcor-ip.net)
[19:23:31] *** Joins: posco (sid14832@moz-5F4AA75A.irccloud.com)
[19:23:43] <posco>  Can owned closures, which I read are of kind Send, be sent across the network? I'm interested in applications to distributed systems (similar to Hadoop)
[19:24:07] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[19:24:20] <sfackler> Send means they can be sent from one task to another, not from one process to another
[19:24:27] *** Quits: StarLight (StarLight@moz-B7C96095.dynamic.avangarddsl.ru) (Ping timeout)
[19:25:27] <posco> so is there any approach for sending closures to other machines
[19:25:50] <posco> http://research.microsoft.com/en-us/um/people/simonpj/papers/parallel/remote.pdf
[19:26:16] <posco> there is a take in haskell. I have been feeling this pain A LOT with scala+jvm
[19:27:16] <posco> I'm hoping that rust has a mechanism for serializing closures and sending them to remote machines.
[19:27:29] <sfackler> not currently. it can absolutely be done on a JVM language, but doing it on something that doesn't run on a VM is hard
[19:27:43] <SiegeLord> The way I'm reading it, Send does seem to imply that you might be able to safely deep clone a closure, no?
[19:27:52] <sfackler> I guess you'd have to send the AST over and JIT it on the other end
[19:28:10] <posco> sfackler: it is not easy on JVM at all, because there is no easy compile time way to verify the closure can be serialized.
[19:28:47] <sfackler> sure, but if everything being closed over is serializable it just works
[19:28:51] *** Joins: StarLight (StarLight@moz-A3D56A9D.pppoe.avangarddsl.ru)
[19:29:14] <posco> that is not verifiable at compile time.
[19:29:23] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[19:29:28] <posco> so users mess it up all the time.
[19:29:38] <sfackler> yeah
[19:29:47] *** Quits: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net) (Quit: Textual IRC Client: www.textualapp.com)
[19:30:05] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Ping timeout)
[19:30:27] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[19:30:37] <sfackler> to make it work in Rust, you'd probably need to extend the compiler to make certain kinds of closures Encodable and get the JIT working again
[19:30:55] <sfackler> you might be able to do the serialization step with a syntax extension actually
[19:31:02] <posco> why not have the restriction of the same architecture and just send the compiled code?
[19:31:35] <sfackler> you could do that too, but you'd have to be careful to make sure it's position independent
[19:31:47] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:31:54] <sfackler> but it isn't a great solution in general since a SIGILL isn't very user friendly either :P
[19:32:21] <sfackler> you'd also have to be careful to make sure all of the types match up on both sides
[19:32:24] *** Joins: heftig (heftig@B77CAD3A.CE5D84C0.172227A7.IP)
[19:32:29] *** tacosWithSalsa is now known as alan_andrade
[19:32:32] <sfackler> especially wrt generic monomorphisation
[19:32:33] *** Quits: sk (sk@F9A3A16F.3DDD1ABD.33B96495.IP) (Quit: Leaving)
[19:32:33] <SiegeLord> Is this beyond just sending messages between processes? I sort of thought that both sender and receiver would have the type already
[19:34:17] <sfackler> it seems to me like you'd probably be okay in most cases, but I'm not super confident, especially if you send generic types over
[19:34:46] <posco> it would be great if this could be a pre-1.0 thing.
[19:34:50] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[19:35:12] *** Joins: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net)
[19:39:00] *** Quits: kzzch (kzzch@moz-991A24E8.hsd1.va.comcast.net) (Quit: WeeChat 0.4.1)
[19:40:47] *** Quits: nif (nif@moz-88771D92.oberlin.net) (Ping timeout)
[19:41:00] <whitequark> sfackler: there is a simple way to send closures, which ocaml uses
[19:41:18] <whitequark> first, you include sha1 of the entire process image. second, you send a pointer to code and serialized environment
[19:43:16] *** Joins: maikklein (maik@moz-502609D4.dip0.t-ipconnect.de)
[19:43:45] *** Joins: nif (nif@moz-C672189A.wireless.oberlin.edu)
[19:43:45] *** Quits: bkircher (bkircher@moz-C0320469.dip0.t-ipconnect.de) (Quit: Leaving...)
[19:45:57] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[19:46:29] *** Quits: nif (nif@moz-C672189A.wireless.oberlin.edu) (Ping timeout)
[19:46:41] *** Quits: moostik (Icedove@moz-40E6ACEF.w2-2.abo.wanadoo.fr) (Quit: moostik)
[19:47:17] *** flaper87 is now known as flaper87|afk
[19:47:46] *** Joins: astropirate (astropirat@moz-E6201624.hsd1.co.comcast.net)
[19:47:50] <cmr> wycats_: <3
[19:47:57] <astropirate> Hello friends
[19:48:27] <sfackler> whitequark: and then it only loads if the target binary is identical to the source?
[19:50:00] <whitequark> sfackler: yes
[19:50:03] *** Quits: gwty (gwtypc@F42DD637.5A446153.E7DAB6F9.IP) (Ping timeout)
[19:50:51] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:51:59] *** Quits: maikklein (maik@moz-502609D4.dip0.t-ipconnect.de) (Ping timeout)
[19:52:19] <sfackler> at that point it's more of syntactic sugar for traditional RPC then, right? since you can't send arbitrary code over the wire anymore
[19:52:31] *** Joins: gwty (gwtypc@6ECBB0C9.8165D294.25B273F5.IP)
[19:53:14] * pcwalton goes on a quest to remove @ from the parser
[19:53:18] <whitequark> sfackler: sort of
[19:54:07] <cmr> pcwalton: wee! have fun
[19:54:15] <posco> sfackler: that is probably okay. You can still send one of a set of pre-defined closures.
[19:54:21] <whitequark> sfackler: I find it pretty hard to find a case where you can safely send arbitrary code over a wire
[19:54:23] * cmr mumbles some quote about take this, it's dangerous
[19:55:03] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[19:55:20] <pcwalton> down to only 110 borrow check errors!
[19:55:55] <jdm> rockin'
[19:56:23] <jhasse> "extern mod native;" doesn't work for me (rustc is unable to find it). How do I use libnative properly?
[19:58:48] <alan_andrade> @sfackler :'( How can I run only the doc examples that live in libstd/str.rs ?
[19:58:49] *** Joins: sigma1 (sigma@moz-BFB7A653.range86-143.btcentralplus.com)
[19:59:14] <sfackler> TEST_NAME=str maybe?
[20:02:21] *** Quits: sigma1 (sigma@moz-BFB7A653.range86-143.btcentralplus.com) (Ping timeout)
[20:02:40] <whitequark> is it possible to make a newtype which cannot be constructed outside of its crate?
[20:04:23] <sfackler> no, if you want to do that you'll need to use a struct with a private field
[20:04:24] <olsonjeffery> i truly have grown weary of the weird concern-trolling cropping up on the list and reddit, along the lines of "it would really be a SHAME if rust FAILED because it doesn't DO THIS THING I WANT"
[20:04:48] <pcwalton> olsonjeffery++
[20:04:49] <olsonjeffery> cousin to "lots of people have complained about THING I DON'T WANT; the devs are IGNORING it"
[20:05:11] <olsonjeffery> anyways. this isn't constructive, so i'll pipe down. apologies.
[20:05:25] <whitequark> sfackler: that'll work, thanks
[20:06:06] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[20:06:19] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Quit: Leaving...)
[20:06:39] <pcwalton> re the mailing list, I understand the concern about rust's references being hard to understand but IMHO we're at the limits of what can be done while remaining safe, a systems language, and practical with the current state of PL knowledge
[20:06:46] <pcwalton> rust isn't a platonic ideal
[20:06:50] <pcwalton> it's a product
[20:06:54] <pcwalton> there will be more languages in the future
[20:07:09] <pcwalton> can't keep holding out hope for the perfect rust of the future
[20:07:27] <pcwalton> and I think rust references are pretty usable as is and not doomed to failure in any case
[20:08:00] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[20:08:45] <pcwalton> need to be better documented of course but stability is good for documentation, not bad
[20:08:48] *** Joins: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[20:09:29] <cmr> are people really concerned about references? they're the nicest part of rust, and really the only reason one would use rust.
[20:09:35] <cmr> they're not that hard to understand.
[20:09:41] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[20:09:47] <eddyb> SiegeLord: why would you want boxed closures :)?
[20:09:59] <SiegeLord> Put them into an array
[20:10:20] <pcwalton> cmr: yeah, I think they're pretty nice post-INHTWAMA
[20:10:22] <SiegeLord> And why not... dynamic dispatch is a valid strategy at times
[20:10:40] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[20:10:49] <SiegeLord> That's the whole reason trait object coercion was introduced, because sometimes they are useful
[20:10:53] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[20:11:00] <eddyb> SiegeLord: if you have more than one type, it could default back to trait objects
[20:11:04] * pcwalton wants to unify closures with traits post-1.0
[20:11:13] <pcwalton> so we get unboxed closures and once functions and other nice things
[20:11:17] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[20:11:24] <SiegeLord> I don't see why this magic is necessary
[20:11:25] <pcwalton> or pre-1.0 if someone submits a patch with a detailed design
[20:11:37] <olsonjeffery> i think strcat's point about anyone who understands how to do disciplined c++ wrt lifetime management should be able to understand lifetimes with little problems
[20:11:47] <eddyb> pcwalton: my crazy idea would enable compatibility with the current closure syntax :P
[20:11:57] <pcwalton> eddyb: we were thinking along similar lines.
[20:11:58] <olsonjeffery> it's so hard to have these conversation because they happen in the scope of a few grafs of text
[20:12:06] <pcwalton> eddyb: a detailed proposal would be *great*
[20:12:08] <olsonjeffery> and there are *so* *many* loaded assumptions coming in
[20:12:16] <pcwalton> send to the mailing list! I'd be very glad to hear and discuss it
[20:12:23] *** Quits: johnrkd (johnrkd@3A09C2F6.815752B7.B05A4819.IP) (Quit: )
[20:12:28] <eddyb> pcwalton: talking about this https://github.com/mozilla/rust/issues/11196
[20:12:28] <pcwalton> this is one of the remaining design areas where community input would be very valuable
[20:12:46] <eddyb> though it is a bit sketchy
[20:12:55] <SiegeLord> The current state has two syntaxes, one for static dispatch and one for dynamic dispatch... I don't see what is gained by introducing a third syntax that magically chooses static or dynamic
[20:13:22] <cmr> I think we're probably going to want to do it pre-1.0, at least work out the design... strcat has pointed out that it will require changing a lot of type signatures esp around iterators, which isn't back-compat. Maybe that's just how it will be, but it should at least be thought about.
[20:13:40] * cmr doesn't particularly care how closures shake out, doesn't really want to get involved.
[20:13:41] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[20:13:45] <pcwalton> cmr: how does it require changing the signatures? we need to design it of course
[20:13:48] <pcwalton> to make sure it is back compat
[20:13:53] <pcwalton> eddyb: keep in mind that the current syntax |T|->U is actually sugar for &mut Fn<T,U>
[20:14:00] <pcwalton> notice the &mut, that's crucial
[20:14:10] <cmr> pcwalton: I don't remember exactly.
[20:14:12] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[20:14:23] <pcwalton> that's why we're going to keep the |T|->U syntax because writing `&mut |T|->U` would be too ugly for words
[20:14:41] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:15:33] <eddyb> pcwalton: just make call take &mut self. that should work even with the crazy shadow generics
[20:15:50] <eddyb> or implicit (terminology is complicated)
[20:16:39] *** Joins: maikklein (maik@moz-502609D4.dip0.t-ipconnect.de)
[20:16:48] <pcwalton> mmm, ok, I sorta get the proposal, but I'm pretty nervous about implicit generics. keep in mind that generics are not first class in Rust
[20:17:03] <pcwalton> in that we have an ML-style Value Restriction
[20:17:14] <pcwalton> so for example let f = some_generic_fn; does not work
[20:17:25] <eddyb> that would require HKT AFAIK
[20:17:31] <pcwalton> no, it's different
[20:17:32] *** Joins: geoffhill (geoffhill@moz-738DC0DB.org)
[20:17:36] <pcwalton> that's the monotype/polytype restriction
[20:17:50] <pcwalton> I like the fact that everything that doesn't have generics is a monotype
[20:17:54] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[20:18:01] <eddyb> right, generic function not type
[20:18:06] <pcwalton> brb, lunch.
[20:18:21] <pcwalton> just before I go, what I was thinking of for unboxed closures was more of
[20:18:36] *** Joins: sigma1 (sigma@C91C7F36.70518F41.9D18269F.IP)
[20:18:47] <pcwalton> fn map<T,U,F:|T|->U>(t: &[T], f: F) -> ~[U]
[20:18:50] <eddyb> pcwalton: leave your thoughts on the RFC, if you can
[20:19:05] <pcwalton> where |T|->U is sugar for Fn<T,U> or whatever
[20:19:08] *** Quits: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[20:19:08] <eddyb> pcwalton: ah, I see. that doesn't look bad :)
[20:19:29] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[20:19:42] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[20:19:49] <wycats_> sfackler: keep this sucker rebased: https://github.com/mozilla/rust/pull/11151
[20:20:03] <wycats_> it makes me so excited
[20:20:04] *** Quits: gwty (gwtypc@6ECBB0C9.8165D294.25B273F5.IP) (Ping timeout)
[20:20:07] <wycats_> much excite
[20:21:29] <whitequark> that is truly interesting
[20:21:44] *** Joins: gwty (gwtypc@6ECBB0C9.8165D294.25B273F5.IP)
[20:22:01] <wycats_> sfackler: have you given any thought to loadable #[deriving]?
[20:22:16] <sfackler> wycats_: it should be up to date
[20:22:35] <sfackler> right now, you can't extend deriving itself but you can make a new extension like #[deriving_MyTrait]
[20:22:35] <wycats_> sfackler: sweet
[20:22:41] <cmr> wycats_: https://github.com/mozilla/rust/pull/11151#issuecomment-31342449
[20:22:42] <wycats_> sfackler: how?
[20:22:43] <wycats_> gist?
[20:22:45] *** Quits: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP) (Ping timeout)
[20:22:47] <sfackler> but it shouldn't be thard to allow you to register other stuff too
[20:23:05] <sfackler> wycats_: you should just need to write an ItemDecorator extension
[20:23:11] <sfackler> and it should Just Work
[20:23:15] <wycats_> sfackler: sweet
[20:23:23] <sfackler> you might even be able to use some of the deriving internals to make it eaier
[20:23:25] <sfackler> *easier
[20:23:28] <wycats_> sfackler: I've been messing around with some ideas for a resourcey web thingy
[20:23:33] *** Quits: gwty (gwtypc@6ECBB0C9.8165D294.25B273F5.IP) (Ping timeout)
[20:23:38] <wycats_> https://gist.github.com/wycats/f7c07cce7a012f7a2727
[20:23:46] <wycats_> this is the hello world: https://gist.github.com/wycats/02fb8f68bd70e4f8b8ca
[20:24:12] <sfackler> -> lunch, i'll take a look when I get back
[20:24:32] <wycats_> sfackler: tl;dr #[deriving(Postgres)]
[20:24:37] <wycats_> #[deriving(FromParams)]
[20:24:50] <eddyb> sfackler: can't wait to see all the std macros implemented outside the compiler :D
[20:24:50] <wycats_> auto-generating traits for models based on their fields
[20:24:58] *** Joins: Y (chatzilla@moz-4398AD88.dynamic.isp.telekom.rs)
[20:25:04] <wycats_> eddyb: wheee
[20:25:11] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[20:25:31] *** Joins: gwty (gwtypc@6ECBB0C9.8165D294.25B273F5.IP)
[20:25:32] <eddyb> a few years ago, I was dreaming of a language...
[20:25:39] <eddyb> good job, Rust :)
[20:26:06] *** Quits: maikklein (maik@moz-502609D4.dip0.t-ipconnect.de) (Ping timeout)
[20:26:32] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[20:27:11] *** Quits: gwty (gwtypc@6ECBB0C9.8165D294.25B273F5.IP) (Ping timeout)
[20:28:33] *** Joins: maikklein (maik@moz-502609D4.dip0.t-ipconnect.de)
[20:29:55] *** Quits: sigma1 (sigma@C91C7F36.70518F41.9D18269F.IP) (Ping timeout)
[20:30:42] *** Joins: nif (nif@moz-8181E2AC.oberlin.net)
[20:30:59] *** Quits: maikklein (maik@moz-502609D4.dip0.t-ipconnect.de) (Ping timeout)
[20:33:28] <whitequark> is it possible to concatenate tokens in macros? e.g. macro_rules! foo ( ($ident) => (bar_$ident) )
[20:33:44] <whitequark> foo!(baz) should expand to bar_baz
[20:34:28] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[20:34:50] <eddyb> whitequark: there's concat_idents! or something like that
[20:35:32] <Blei> it doesn't work though afaik
[20:35:34] <whitequark> concat_idents!, yes
[20:36:09] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[20:36:19] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[20:36:32] * ldlework wishes he had time to learn rust again
[20:38:48] *** Joins: creationix (creationix@moz-2FD6AA77.cpe.cableone.net)
[20:39:25] <whitequark> hm
[20:40:06] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[20:40:33] *** Joins: Benvie (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP)
[20:40:40] *** Quits: Benvie (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP) (Client exited)
[20:40:45] *** Joins: flammi (smuxi@moz-4559A8EC.dip0.t-ipconnect.de)
[20:41:38] <whitequark> yeah, doesn't work :/
[20:42:19] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[20:42:51] *** Quits: jhasse (jhass_000@moz-FFC47FF9.ewe-ip-backbone.de) (Quit: Verlassend)
[20:43:31] <carter> whitequark: hello! :)
[20:43:36] <whitequark> carter: hi
[20:43:42] *** Joins: pepper_chico (pepper_chi@E4B89D8C.3C9EA51F.F546FA5F.IP)
[20:43:42] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[20:44:22] <carter> has anyone done a blas binding for rust yet? i may tackle that later this week
[20:46:05] *** Joins: mentero (mentero@moz-D61C6F02.proxnet.pl)
[20:47:08] *** kimundi is now known as zz_kimundi
[20:47:13] *** Joins: gwty (gwtypc@6ECBB0C9.8165D294.25B273F5.IP)
[20:47:26] <pepper_chico> guys... I'm barely following Rust, so, I don't follow the news frequently, but I toyed with the language some months ago, and now pulling and compiling the repo for testing and looking at new, I just discovered key people has left the project, which is kind of sad, I rarely see this in any successful language...
[20:47:57] <pepper_chico> https://twitter.com/graydon_moz, http://catamorphism.org, this are the one that I noticed
[20:48:20] <pepper_chico> s/at new/at news/
[20:48:26] <strcat> pepper_chico: tim went to work somewhere else, he didn't leave the project
[20:48:31] <strcat> still contributes
[20:49:00] <pepper_chico> hmm...
[20:49:00] *** Quits: gwty (gwtypc@6ECBB0C9.8165D294.25B273F5.IP) (Ping timeout)
[20:49:10] <Taneb> How hard is it to submit library documentation?
[20:49:40] <Taneb> I'm stumbling through the language and that feels like the thing I'd be best at
[20:49:53] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[20:50:38] <pepper_chico> bjarne is still there, putting stuff into c++, as rob in go, as the designers of c#, as matz in ruby... I dunno about java, I think none of the original heads are still designing the language
[20:50:55] *** Joins: gwty (gwtypc@6ECBB0C9.8165D294.25B273F5.IP)
[20:51:09] <carter> and thats healthy!
[20:51:14] <cmr> Taneb: super easy.
[20:51:21] <carter> bdfl stuff makes evolving harder
[20:51:33] <pepper_chico> but they where for quit some time, shaping 1.0
[20:51:37] <pepper_chico> at last...
[20:51:44] <cmr> carter: no blas bindings as of yet.
[20:51:48] <carter> ok
[20:51:55] <carter> cmr: i may do blas and blis as a learning exercise
[20:52:12] <creationix> I still want to write a JS vm in rust, but I have no idea where I'll find the time
[20:52:13] <carter> also decent openblas bindings set a good bar for "heres how much faster you can be"
[20:52:20] * whitequark ponders whether functions working with I/O memory should be marked unsafe
[20:52:35] <creationix> probably a subset of js though
[20:52:40] <cmr> whitequark: in embedded?
[20:52:50] <whitequark> cmr: yep
[20:52:55] <carter> creationix: you probably want to have an IR / mini language you can translate the js into
[20:52:59] *** Quits: gwty (gwtypc@6ECBB0C9.8165D294.25B273F5.IP) (Ping timeout)
[20:53:02] <carter> and only execute that core lang
[20:53:14] <pepper_chico> s/where/were/ s/quit/quite/
[20:53:15] <carter> creationix: full js…. is not a light  undertaking
[20:53:24] <creationix> oh, I'm aware
[20:54:11] <creationix> having an IR in the middle sure makes a lot of stuff easier
[20:54:17] <carter> yup
[20:54:20] <carter> creationix: oooo,
[20:54:26] <carter> do the ecma script that never was
[20:54:36] <creationix> carter, have you seen my "jack" language
[20:54:42] <carter> no 
[20:54:46] <creationix> (not to be confused with jack to helps with rust)
[20:54:48] <carter> i don't even know who you ear
[20:54:50] <whitequark> carter: flash did implement full ES5
[20:55:10] <whitequark> AS3 is actually rather tolerable to use
[20:55:16] <carter> whitequark: creationix  ecma4 i think..
[20:55:18] <carter> http://en.wikipedia.org/wiki/ECMAScript
[20:55:30] <creationix> carter, I'll take that as a no then ;) https://github.com/creationix/jack/blob/master/samples/dragon.jk
[20:55:43] <creationix> Dart is a pretty good ES4 I think, I have no interest in making that again
[20:55:59] <whitequark> hm, maybe not
[20:56:00] <creationix> I want something that more functional style.  Closures, but no inheritance
[20:56:11] <carter> creationix: ooo
[20:56:21] <carter> a decent scheme or mini ml
[20:56:29] *** Quits: jviereck (Adium@moz-9CCF231E.dip0.t-ipconnect.de) (Quit: Leaving.)
[20:56:32] <creationix> right, scheme-like, but C style syntax
[20:56:55] <creationix> in my "jack" language you can even move between ast and live code https://github.com/creationix/jack/blob/master/samples/call.jk
[20:57:02] *** Joins: gwty (gwtypc@6ECBB0C9.8165D294.25B273F5.IP)
[20:57:37] <carter> creationix: ooo, a new c-- implementation 
[20:57:39] <ldlework> creationix: you should change your language to support 'foo' var 'bar' concatenation
[20:58:04] <creationix> ldlework, not sure what you mean
[20:58:10] <carter> http://www.cs.tufts.edu/~nr/c--/
[20:58:12] <ldlework> creationix: omitting the +'s
[20:58:28] <carter> c-- is like a human readable / writeable direct style version of llvm ir
[20:58:41] <whitequark> carter: who says you can't write IR by hand? :]
[20:58:45] <creationix> my target audience is kids learning programming
[20:58:50] <creationix> and myself
[20:58:51] <carter> oh ignorem e then
[20:58:51] *** Quits: gwty (gwtypc@6ECBB0C9.8165D294.25B273F5.IP) (Ping timeout)
[20:58:51] <creationix> :P
[20:58:58] <whitequark> carter: https://gist.github.com/whitequark/3ef60c06d4b19707cca2
[20:59:20] <creationix> I have dreams of writing a OS that boots straight to my language using rust
[20:59:47] <whitequark> creationix: have you seen PICOBIT?
[20:59:49] <ldlework> creationix: I like it
[20:59:53] <creationix> but there is a large gap between what UEFI provides and what typical scripting languages expect
[21:00:16] <creationix> whitequark, oh, that's cool
[21:00:18] <whitequark> it's a tiny scheme which can work even on ARM8
[21:00:32] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[21:00:35] <whitequark> *AVR8
[21:00:36] <whitequark> of course
[21:00:47] <whitequark> you can take a look at my fork, https://github.com/whitequark/picobit, or the original one (linked by github)
[21:01:10] <creationix> whitequark, arm8 is a lot more powerful than PIC right?
[21:01:39] *** Joins: jviereck (Adium@moz-9CCF231E.dip0.t-ipconnect.de)
[21:01:41] <eddyb> *avr8
[21:01:44] <creationix> I met a BYU professor at StrangeLoop that works on racket.  Neat language
[21:01:44] <whitequark> full TCP stack in less than 1500 lines!
[21:01:48] <carter> whitequark: agree, otoh, many people find the SSA way you need to handle ifs a bit confusing
[21:01:55] <whitequark> creationix: it depends on which PIC are you comparing it with
[21:02:13] <whitequark> there's PIC8, vastly inferior to AVR8. there's also PIC24 which is basically MIPS
[21:02:23] <whitequark> and I *think* they have some other product lines
[21:02:53] <creationix> right, I think I was also confusing cortex-a8
[21:02:58] * whitequark still has nightmares about PIC8 sometimes. manual memory bank switching, ugh
[21:03:45] <carter> creationix: yup,  racket is pretty neat
[21:04:15] <carter> creationix: if ghc / haskell weren't a think, i'd probably be a racketeer for my HL language choice
[21:04:16] <creationix> so I was thinking about targeting UEFI laptops and booting my environment from a USB stick
[21:04:19] <carter> *thing
[21:05:56] <creationix> I saw this: http://blog.theincredibleholk.org/blog/2013/11/18/booting-to-rust/
[21:06:12] *** Quits: Y (chatzilla@moz-4398AD88.dynamic.isp.telekom.rs) (Client exited)
[21:07:48] <creationix> Is rust generally a good language for implementing script VMs?
[21:08:08] <pcwalton> I would hope so!
[21:08:33] <creationix> pcwalton, hey, how's it going
[21:08:42] <pcwalton> not bad :)
[21:08:56] *** Joins: gwty (gwtypc@6ECBB0C9.8165D294.25B273F5.IP)
[21:09:14] * creationix really needs to schedule time to play with rust
[21:09:51] <creationix> pcwalton, what do you think about my crazy idea to implement a vm for a toy language that boots directly from uefi implemented in rust?
[21:09:55] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[21:09:58] <pcwalton> try it out
[21:10:00] <pcwalton> :)
[21:10:14] <creationix> I guess basic console I/O shouldn't be too hard in uefi
[21:10:32] <whitequark> creationix: I'd recommend making it configurable: have an UEFI mode and a hosted mode
[21:10:36] <whitequark> like usermodelinux
[21:10:36] *** Quits: gwty (gwtypc@6ECBB0C9.8165D294.25B273F5.IP) (Ping timeout)
[21:10:37] <creationix> though implementing the GC for my scripting language might be tricky
[21:10:50] <creationix> whitequark, right, to make development a lot easier
[21:10:55] * whitequark nods
[21:11:13] <whitequark> also, it isn't strictly necessary to use UEFI, you could use Grub2
[21:11:17] <creationix> people joke about boot-to-node, but the idea isn't that crazy
[21:11:33] <whitequark> it'll also provide you with a 32-bit environment, but as a bonus you can boot in Qemu and use gdb to debug your OS
[21:11:37] <eddyb> I considered moving v8 into kernel space
[21:11:40] <creationix> my background is high-level stuff.  I'm not super aware of what's available at this level
[21:11:41] <whitequark> I don't think you can boot into UEFI from Qemu
[21:11:51] <eddyb> and then having inline asm in JS
[21:11:58] <pcwalton> does UEFI have any threading routines?
[21:12:03] <pcwalton> I was wondering this the other day
[21:12:03] <eddyb> but Rust beats it
[21:12:08] <whitequark> pcwalton: I don't think so
[21:12:10] <pcwalton> it didn't seem to from what I saw but I didn't look too closely
[21:12:41] <whitequark> and that's for the best. it is too complex as it is!
[21:12:58] <creationix> I mean, with enough work, you *can* implement anything on top of UEFI right? or do real OSes do some magic switch when booting?
[21:13:08] <cmr> creationix: switch
[21:13:17] <pcwalton> one of these days I've been meaning to port Rust to the Wii
[21:13:19] <cmr> because the UEFI runtime is huge and buggy.
[21:13:20] <pcwalton> but I don't have any time
[21:13:32] <pcwalton> needs a PowerPC port then it should be pretty straightforward
[21:13:47] <creationix> cmr, so they just replace uefi with their own assembly code then?
[21:14:03] <cmr> creationix: most device drivers aren't assembly
[21:14:06] *** Joins: gwty (gwtypc@6ECBB0C9.8165D294.25B273F5.IP)
[21:14:07] <cmr> (in most OSes)
[21:15:03] <creationix> I'm fine with going b2g style and living as PID 1 on top of the linux kernel
[21:15:09] <strcat> did the volatile load/store support land yet?
[21:15:16] <creationix> but I'm really in love with the idea of a C++ free OS
[21:15:44] *** Quits: blank_name (blank_name@78B04CD2.66204B68.6D228269.IP) (Ping timeout)
[21:15:49] <whitequark> strcat: I'm fixing the tests right now
[21:15:53] *** Quits: gwty (gwtypc@6ECBB0C9.8165D294.25B273F5.IP) (Ping timeout)
[21:15:54] <whitequark> after that it should be ok to merge
[21:16:21] *** Quits: pepper_chico (pepper_chi@E4B89D8C.3C9EA51F.F546FA5F.IP) (Quit: Ex-Chat)
[21:16:21] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Connection reset by peer)
[21:16:35] <benh> What does 'unboxed closure' mean?
[21:16:38] <benh> (in the future?)
[21:16:43] <strcat> do you think there's any point in exposing memset/memcpy/memmove too? I'm assuming LLVM can't just replace stores with multi-word stores
[21:16:49] <strcat> (as in the volatile versions)
[21:16:51] <benh> unspeakable type, like c++ closure?
[21:17:05] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[21:17:17] <strcat> benh: yes, instead of being type erased
[21:17:20] <strcat> (boxed)
[21:17:49] *** Joins: nkoep (nik@moz-614D7A24.pool.mediaways.net)
[21:17:54] <whitequark> strcat: I have yet to encounter a single case where volatile mem* operations would be useful
[21:18:28] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[21:18:28] <strcat> I guess since there's stuff like DMA
[21:18:47] *** Joins: maikklein (maik@moz-502609D4.dip0.t-ipconnect.de)
[21:19:40] <whitequark> strcat: hm, interesting. I don't think C exposes volatile mem* operations, though.
[21:20:02] *** Joins: gperetin (Mibbit@F800BEB0.339C6455.52991848.IP)
[21:20:09] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[21:20:54] *** Quits: jackneill (jackneill@moz-46453951.pool.digikabel.hu) (Ping timeout)
[21:21:47] *** Quits: eco (eco@moz-87840B9D.net) (Ping timeout)
[21:22:03] <strcat> whitequark: meh, C doesn't expose packed structures, SIMD, and lots of other stuff ;p
[21:22:07] *** Joins: gwty (gwtypc@6ECBB0C9.8165D294.25B273F5.IP)
[21:22:13] *** Quits: ofeldt (ofeldt@moz-52BA9541.dip0.t-ipconnect.de) (Ping timeout)
[21:22:45] <whitequark> strcat: what I mean is that there's about a zillion OSes written in C which DMA just fine without volatile memcpy
[21:23:14] *** Joins: vodik (simon@moz-42DA1A76.range86-149.btcentralplus.com)
[21:23:15] <whitequark> it's not really a motivation for inclusion/exclusion for those functions, just something to think about
[21:23:19] <strcat> whitequark: I actually meant that DMA probably means a volatile memcpy isn't required
[21:23:28] <whitequark> ah
[21:23:36] <strcat> because the hardware probably knows how to do it for most cases
[21:23:48] *** Quits: gwty (gwtypc@6ECBB0C9.8165D294.25B273F5.IP) (Ping timeout)
[21:23:59] <olsonjeffery> strcat: is Strong/Weak in rust-core? im curious about checking them out
[21:24:06] <strcat> olsonjeffery: yes
[21:24:16] <strcat> I have a PR open for rust
[21:24:19] <olsonjeffery> im in this situation where i have this data structure consisting of a bunch of HashMaps at the top level, using either uint or uuid as the key and Pod values
[21:24:24] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[21:24:32] <whitequark> strcat: I was thinking the other way around: DMA updates the buffer without any writes being done to it by the program
[21:24:38] <olsonjeffery> and all of the structures refer to other items by PK.. so i have these ugly weak refs all over the place
[21:24:42] <olsonjeffery> wonder if it can be done better
[21:25:03] <olsonjeffery> also i have to think about serialization.. because of the hashmaps, im already resigned to having to use an intermediate type for translation to/from serialized format, though...
[21:25:18] <olsonjeffery> strcat: yeah i know about the PR.. im keen to see how the next weekly meeting goes on this topic
[21:25:33] <strcat> olsonjeffery: well, strong/weak pointers can represent any cyclic data structure with acyclic ownership without leaking
[21:25:37] <strcat> and without unsafe code
[21:25:55] <olsonjeffery> mostly i have this growing graph of objects under a single root and i really want to see how this sort of solution shakes out.. because my weak refs-all-over-the-place seems kind of ugly and hackish to avoid pointer/cycle hell
[21:26:08] <olsonjeffery> in terms of perf, elegance. but i can make it rational and locked-down.. just want to explore if there's a better way, i guess.
[21:26:09] *** Quits: Blei (Philipp@moz-B2F9E4BD.cust.bluewin.ch) (Quit: Blei)
[21:26:13] *** Joins: ofeldt (ofeldt@moz-52BA9541.dip0.t-ipconnect.de)
[21:26:30] <strcat> olsonjeffery: so it's a tree with parent pointers?
[21:26:35] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[21:27:12] <olsonjeffery> well, i guess the easiest way to do it to describe the domain. it's a World, consisting at the top-level of a hashmaps of Zones and Agents, with uint and uuid keys, respectively..
[21:27:35] <olsonjeffery> Zones contain a vecs of Tiles.. the tiles may contain an Option<uuid>, that points to an agent occupying that tile
[21:27:42] <olsonjeffery> and enforce consistency through methods on the World
[21:27:53] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[21:27:56] <olsonjeffery> also Portals connecting Zones
[21:28:25] <strcat> olsonjeffery: ah okay, so you have a clear ownership tree from the world, but you want a lot of interlinking between stuff
[21:28:33] <olsonjeffery> yeah.
[21:28:39] <strcat> yeah, Strong/Weak is nearly perfect for that
[21:28:43] <olsonjeffery> right now im using weak refs via the primary keys of the respective objects..
[21:28:46] *** Quits: flammi (smuxi@moz-4559A8EC.dip0.t-ipconnect.de) (Ping timeout)
[21:28:46] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[21:28:48] <strcat> if you have a single owner you could technically do better
[21:29:00] *** Quits: maikklein (maik@moz-502609D4.dip0.t-ipconnect.de) (Ping timeout)
[21:29:02] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[21:29:03] <strcat> since you only need a refcount for weak ptrs... but it's just a word per object
[21:29:04] <olsonjeffery> strcat: im just curious how passing it around will work in terms of avoiding lifetime hell and stuff
[21:29:12] *** Quits: gperetin (Mibbit@F800BEB0.339C6455.52991848.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:29:13] <olsonjeffery> because at least with my pkey weak refs i can sidestep all of that
[21:29:17] <strcat> olsonjeffery: well, Strong is identical to Rc
[21:29:25] <strcat> except... it has a downgrade method, to get a Weak ptr
[21:29:36] <olsonjeffery> ok.
[21:29:38] <strcat> and you can upgrade Weak to a Strong ptr (all you can do with it)
[21:29:48] <olsonjeffery> so is the Strong the root box i keep the actual value in?
[21:29:50] <strcat> so compared to Rc, you'll have some upgrade calls
[21:29:55] <olsonjeffery> and then just propagate Weak's from it?
[21:30:04] <strcat> olsonjeffery: yep, you just want to only store acyclic Strong ptrs
[21:30:13] <strcat> Weak ones won't stop the object from being destroyed
[21:30:20] <strcat> if it is destroyed, the upgrade will return None
[21:30:30] *** Joins: eco (eco@moz-87840B9D.net)
[21:30:37] <strcat> same as C++'s shared_ptr
[21:30:56] <strcat> olsonjeffery: for example you could have...
[21:31:05] <dbaupp> vmx: ping
[21:31:23] <strcat> struct Node { parent: Weak<Node>, children: ~[Strong<Node>] }
[21:31:26] <vmx> dbaupp: pong
[21:31:40] <whitequark> strcat: ah. volatile intrinsics are required to handle volatile loads/stores of structs
[21:32:03] <strcat> olsonjeffery: or struct Node { parents: ~[Weak<Node>], children: ~[Strong<Node>] }
[21:32:04] <whitequark> strcat: since the rust instrinsics are generic and you could pass a struct there, we effectively expose them already
[21:32:39] <nif> can anyone give me some git help?  I seem to have messed things up very badly (again).
[21:32:39] <strcat> olsonjeffery: technically we could just have an Rc type with a Weak ptr... it's not a huge overhead
[21:32:40] <dbaupp> vmx: you were asking about what "r=me" means before, weren't you?
[21:32:55] <olsonjeffery> strcat: cool. yeah i'm not really using a tree of homogenous types, though. i want to keep Agents in the root of the world to ease search and whatnot.
[21:33:04] <nrc> If I call this method, I would expect to get a uint. Why on earth do I get an Option<uint> ? |fn to_uint(&self) -> uint { **self }|
[21:33:06] <vmx> dbaupp: yes. i was about to as again (as i did the squash now)
[21:33:11] <vmx> *ask
[21:33:35] <olsonjeffery> depending on whether im coming top-down (doing AI actions on agents) or bottom-up (what's in nearby Tiles)
[21:33:35] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Connection reset by peer)
[21:33:38] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[21:33:39] <cmr> nrc: from the ToPrimitive trait?
[21:33:41] <strcat> olsonjeffery: that's fine too, you just end up putting a type in Strong<Foo> and then you can make as many weak refs as you want
[21:33:49] * olsonjeffery nods
[21:34:00] <nrc> cmr: no, Pos trait in syntax::codemap
[21:34:09] <dbaupp> vmx: it just means someone else can come along and give an r+ in my name when you've squashed them
[21:34:33] <olsonjeffery> strcat: awesome. thanks for answering my questions. hopefully something good comes out of this.. as you said, hopefully at least Weak makes it into master
[21:34:48] <olsonjeffery> its not clear to me, besides perf differences, what the diff is between Rc and Strong
[21:35:05] <strcat> olsonjeffery: well, look at the implementation :) https://github.com/thestinger/rust-core/blob/master/core/weak.rs
[21:35:06] <dbaupp> vmx: (i.e. they don't need to re-review in detail, just glance over it and then type `r=huonw` on the last commit, instead of just `r+`.)
[21:35:10] <nrc> cmr: so perhaps there are two versions of to_uint - the Pos version and the ToPrimitive one, but I would expect the compiler to warn about that
[21:35:12] <strcat> olsonjeffery: instead of 1 count, it has 2 count fields
[21:35:28] <strcat> olsonjeffery: and in the destructor for Strong, it has to have an extra branch checking if the weak count is 0
[21:35:32] <vmx> dbaupp: oh ic (and i guess you are huonw :)
[21:35:37] <dbaupp> vmx: yes
[21:35:44] <strcat> not much overhead, but it may be significant if you have a data structure with small nodes built on Rc
[21:35:47] <olsonjeffery> haha you got rust's header in your file :P
[21:35:57] <strcat> olsonjeffery: I put them in all the files ;p
[21:36:07] *** Joins: ecl3ctic1 (Mibbit@578C64B6.F0F44EFA.76AE55C1.IP)
[21:36:08] <olsonjeffery> ah, yeah. that's right. my bad.
[21:36:08] <strcat> the intent being that I can take code from libstd and submit code to libstd
[21:36:09] <whitequark> how do I run a single test with make check ?
[21:36:10] * olsonjeffery nods
[21:36:19] <vmx> dbaupp: still the need for another comment. as i got your attention this way? (btw: sorry for the delay, i was on holidays)
[21:36:22] <cmr> whitequark: make check TESTNAME=foo
[21:36:27] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[21:36:33] <whitequark> cmr: thanks
[21:36:49] *** Joins: flammi (smuxi@moz-4559A8EC.dip0.t-ipconnect.de)
[21:36:49] <olsonjeffery> whitequark: probably want to narrow the make job down to the stage/library you want to test as well
[21:36:50] <dbaupp> vmx: (don't worry, I was away too) ok, looking now
[21:36:58] <vmx> dbaupp: cheers
[21:37:07] <olsonjeffery> e.g. make check-stage1-std TESTNAME=some_foo_test
[21:37:34] <whitequark> right
[21:37:41] <strcat> olsonjeffery: C++11 only standardized one refcounted ptr type (std::shared_ptr + std::weak_ptr) and it's *really* slow, due to atomic refcounting, weak ptr support, and the fact that it can be created by passing an existing `new` allocation so by default it uses 2 allocations
[21:38:04] <strcat> so I want rust to be careful about including too much in one type.... because Rc is ridiculously fast compared to shared_ptr
[21:38:17] <dbaupp> vmx: thanks :) (that ended up dragging on rather a while, sorry about that.)
[21:38:20] <strcat> but it makes it more complex.
[21:38:30] <nrc> hmm, I guess this is an issue because I have a value, not a pointer. This seems sub-optimal
[21:38:58] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[21:40:42] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[21:41:20] *** Quits: jviereck (Adium@moz-9CCF231E.dip0.t-ipconnect.de) (Quit: Leaving.)
[21:42:33] <dbaupp> cmr: ping
[21:42:40] <cmr> dbaupp: pong
[21:42:50] <cmr> (but semibusy)
[21:43:05] *** Joins: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net)
[21:43:41] <dbaupp> cmr: you have "We love contributions.." in the first paragraph of TWIR
[21:43:44] <nrc> Anyone know what happened to HashMap::find?
[21:44:06] <dbaupp> nrc: nothing?
[21:44:14] <olsonjeffery> yeah.. it's still there
[21:44:14] <cmr> dbaupp: fixed, thanks
[21:44:20] <dbaupp> map.find(&key) should work ok?
[21:44:40] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[21:45:02] <nrc> I get a compiler error where I didn't use to - error: type `@std::cell::RefCell<std::hashmap::HashMap<u32,syntax::ast::Def>>` does not implement any method in scope named `find`
[21:45:20] <cmr> nrc: that's not a HashMap, that's a @RefCell
[21:45:20] <nrc> oh, d'oh
[21:45:38] <nrc> I guess it didn't use to me wrapped in a RefCell
[21:45:52] <sfackler> wycats_: #[deriving(Postgres)] is actually the reason I started working on this PR :)
[21:45:52] <nrc> rebasing fun...
[21:46:20] *** Joins: gwty (gwtypc@6ECBB0C9.8165D294.25B273F5.IP)
[21:46:20] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Connection reset by peer)
[21:46:54] <whitequark> hm, weird. $ make check-stage1-std TESTNAME=run-make/volatile-intrinsics reports that 0 tests were run
[21:47:01] <dbaupp> nrc: oh, yes, that would've been recently changed from @mut, and .find does work on that
[21:47:13] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[21:47:27] <whitequark> but the test is definitely there
[21:47:31] <cmr> whitequark: omit run-make/
[21:47:40] <dbaupp> whitequark: `make check-stage1-rmake`
[21:47:46] <whitequark> cmr: same thing
[21:48:25] <olsonjeffery> strcat: so i guess the choice is between duplicate Rc/Strong types or slowing down the perf of Rc?
[21:48:27] *** Quits: gwty (gwtypc@6ECBB0C9.8165D294.25B273F5.IP) (Ping timeout)
[21:48:34] <olsonjeffery> what about a way to move between Rc/Strong ?
[21:48:45] <strcat> olsonjeffery: well, the allocations are a different size
[21:48:49] <olsonjeffery> moving from strong to Rc would invalidate weak refs?
[21:48:58] <strcat> olsonjeffery: it'd invalidate the strong refs too
[21:48:59] <dbaupp> whitequark: `check-stage1-std` only runs tests from src/libstd, not the tests in src/test
[21:49:03] <strcat> olsonjeffery: doesn't really work
[21:49:08] <whitequark> dbaupp: got it
[21:49:23] <strcat> olsonjeffery: it's similar to how Arc is separate
[21:49:40] <strcat> the same question comes up with Arc - weak refs built-in, or separate?
[21:49:41] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Connection reset by peer)
[21:50:10] <nrc> :-( lots more boilerplate
[21:50:13] <olsonjeffery> can we get safe/usable weak refs on Rc w/o modifying Rc ?
[21:50:28] <strcat> olsonjeffery: no, need a field in the box
[21:50:37] <strcat> for a weak count or a linked list of weak ptrs
[21:50:38] <dbaupp> whitequark: also, https://github.com/mozilla/rust/issues/11222 fwiw.
[21:50:40] *** Joins: moostik (Icedove@moz-40E6ACEF.w2-2.abo.wanadoo.fr)
[21:50:44] * olsonjeffery nods
[21:50:48] <strcat> olsonjeffery: because when the Rc is destroyed, it needs to tell the weak ptrs somehow
[21:50:50] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[21:50:51] <strcat> that the object is gone
[21:50:52] *** Quits: lerc (quassel@moz-289EFA2.telstraclear.net) (Connection reset by peer)
[21:51:33] <nif> I can't believe it.  Just as I thought I was doing things right in git, I managed to screw up literally everything.
[21:51:44] <eddyb> rm -rf /?
[21:51:47] <cmr> sounds about right!
[21:52:14] <nif> eddyb: I'm just about that frustrated.
[21:52:23] <olsonjeffery> it took me several years to stop occasionally wedging my git repos
[21:52:29] <nif> >:(
[21:52:31] <olsonjeffery> git is a harsh mistress
[21:52:37] <nif> it is, indeed
[21:52:40] <benh> Did you lose work?
[21:52:43] <nif> no
[21:52:45] <nif> thankfully
[21:52:52] <strcat> if you do think you've lost work, it's still there in the reflog
[21:52:56] *** Joins: awidegreen (awidegreen@moz-43381F01.pppoe.wtnet.de)
[21:52:58] <strcat> unless you went out of your way to destroy the reflog ;p
[21:53:07] <nif> lol, I think I'm okay on that front
[21:53:20] <nif> I just keep messing up my pull request very publicly
[21:53:27] <nif> I am embarrassed.
[21:54:07] <benh> Ah, worse than losing work. Losing github street cred. <:D
[21:54:13] <nif> you know it!
[21:54:25] <nif> I'm exposing myself for the total amateur that I am.
[21:55:51] *** Quits: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru) (Ping timeout)
[21:55:51] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Connection reset by peer)
[21:56:19] <olsonjeffery> the best (or worst!) thing about github PRs is that you can do a force push and sweep it all under the rug
[21:56:23] <benh> Hasn't stopped me from getting my PRs merged :)
[21:56:27] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[21:56:51] *** Joins: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru)
[21:56:52] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Connection reset by peer)
[21:57:09] <nif> hah, well, hopefully I'll figure out what to do and get my act together.
[21:57:17] <nif> I just gave up and closed the PR for now.
[21:57:36] <nif> this way I won't get comments on it telling me what I already know.
[21:57:48] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[21:57:59] <whitequark> dbaupp: actually, TESTNAME= worked for me
[21:58:07] <whitequark> believe it or not!
[21:58:25] <dbaupp> whitequark: whu?
[21:58:51] <dbaupp> ... there's no logic for handling it in the makefiles
[21:59:03] <vmx> dbaupp: yes that took a while. thanks for your patience
[21:59:03] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[21:59:04] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[21:59:15] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[21:59:19] <whitequark> dbaupp: https://gist.github.com/whitequark/693868fae3f1e04ee2a6 *shrug*
[22:00:17] <benh> strcat: offtopic, but what happened there? "A close call on non-Linux platforms also has to do this, but must not loop on Linux (thanks for nothing POSIX!)."
[22:00:19] <tomdale> hey, we're getting this dead code warning:
[22:00:25] <tomdale> https://www.irccloud.com/pastebin/HcidYRpb
[22:00:33] <tomdale> but we're very definitely using the code
[22:00:44] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[22:01:08] *** Quits: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP) (Ping timeout)
[22:01:09] <tomdale> https://www.irccloud.com/pastebin/xMtS991X
[22:01:29] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Connection reset by peer)
[22:01:36] <dbaupp> whitequark: oh, I guess that's actually because the other ones have been run previously and so have been detected to not need rerunning
[22:01:51] <cmr> tomdale: but is write_tag_and_wire_type ever used?
[22:02:08] <tomdale> cmr: we're not receiving a dead code warning about any other methods
[22:02:10] <tomdale> so presumably
[22:02:31] <tomdale> as far as we can tell it is since it's core to the code actually working, and it appears to work :P
[22:02:43] <cmr> quite mysterious! open a bug?
[22:02:46] <dbaupp> tomdale: using a recent compiler?
[22:02:49] <strcat> benh: FreeBSD/Linux close the file on EINTR, other OSes don't necessarily
[22:02:52] *** Joins: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it)
[22:02:54] <tomdale> dbaupp: just pulled master about an hour ago
[22:03:11] <sfackler> tomdale: dead_code is pretty new. it may just be missing it somehow
[22:03:27] <tomdale> cmr: sounds like it. we'll file a bug.
[22:03:42] <strcat> benh: it doesn't really make sense to me why it can even be interrupted but oh well
[22:03:50] <benh> heh
[22:04:22] <strcat> afaik close doesn't have to flush anything - it's not like it guarantees an fsync
[22:04:34] * strcat shrugs
[22:04:58] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[22:05:45] <whitequark> strcat: maybe something related to NFS?
[22:05:55] <strcat> oh, file locks maybe
[22:06:00] <strcat> yeah. that mess.
[22:06:15] <strcat> file locking is so ridiculously broken
[22:06:22] *** Quits: twi (Adium@moz-A61BD2D7.cust.dsl.vodafone.it) (Ping timeout)
[22:06:59] *** Quits: alan_andrade (alan_andra@2D866054.D1EB06A3.B7838CA6.IP) (Input/output error)
[22:07:11] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[22:07:17] *** Joins: maikklein (maik@moz-502609D4.dip0.t-ipconnect.de)
[22:08:03] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Connection reset by peer)
[22:08:48] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[22:13:07] <tomdale> https://github.com/mozilla/rust/issues/11224 <-- dead code issue filed
[22:14:06] *** Quits: awidegreen (awidegreen@moz-43381F01.pppoe.wtnet.de) (Ping timeout)
[22:15:36] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Connection reset by peer)
[22:15:38] *** Quits: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net) (Quit: dogurness)
[22:16:26] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[22:18:31] *** Joins: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP)
[22:18:48] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[22:20:05] *** Joins: Kruppe (user@moz-EE1E894A.home3.cgocable.net)
[22:20:30] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[22:21:13] *** Quits: nif (nif@moz-8181E2AC.oberlin.net) (Quit: Konversation terminated!)
[22:21:35] *** Quits: flammi (smuxi@moz-4559A8EC.dip0.t-ipconnect.de) (Ping timeout)
[22:21:49] <ChrisMorgan> acrichto: at some time, I'd love to see a basic comparison of green vs. native for I/O, especially TCP (both client and server)—performance characteristics, notable differences in behaviour, anything else that could be interesting. Could make a good blog post if you wanted.
[22:22:30] <pcwalton> ChrisMorgan: it may be a little early, we have some optimizations to do yet
[22:22:35] <pcwalton> in libgreen
[22:22:39] <pcwalton> for example, not hitting epoll so much
[22:23:08] * ChrisMorgan likes optimisation happening
[22:23:10] <tomdale> what is going on:
[22:23:15] <tomdale> https://www.irccloud.com/pastebin/eh5CWOUU
[22:23:28] <tomdale> just got that after making some changes and running rustc again
[22:23:38] *** Quits: rca (rcatolino@moz-9311B86D.adsl.proxad.net) (Ping timeout)
[22:23:43] <cmr> tomdale: so remember those dead code warnings?
[22:23:51] <tomdale> tellme
[22:24:07] <pcwalton> oh, did rustc start stripping stuff out? :(
[22:24:12] <pcwalton> that it thought was dead
[22:24:14] <pcwalton> nooooooo
[22:24:16] <cmr> it's not emitting the symbols for it because it's not ever reachable.
[22:24:33] <tomdale> we added #[allow(dead_code)]
[22:24:42] <cmr> yeah, it's a shared but with reachability
[22:24:48] <cmr> *bug
[22:24:49] <pcwalton> that doesn't stop rustc from performing optimizations based on code it thinks is dead
[22:24:59] <pcwalton> in this case
[22:25:05] <tomdale> it was working 10 minutes ago O_O
[22:25:08] <pcwalton> the optimization exploded in your face :)
[22:25:18] *** Quits: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net) (Quit: Leaving.)
[22:25:24] <tomdale> only cheat if you don't get caught <- rule #1 of compiler optimizations :P
[22:25:32] <tomdale> ^^ wycats, we're sharing a machine
[22:25:36] <pcwalton> well, that optimization is less than a month old
[22:25:44] <pcwalton> it clearly needs some more time to bake...
[22:25:46] <tomdale> I'm thinking that we can just replace all of our monads with semicolons and that should do the trick
[22:26:00] <tomdale> pcwalton: I'm just confused about why it suddenly changed
[22:26:10] <pcwalton> not knowing what the bug is I can't say
[22:26:13] <cmr> tomdale: did you add or remove a `pub` somewhere?
[22:26:26] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[22:26:32] <cmr> It could also be that bug where we don't know how we're going to define visibility yet.
[22:26:33] *** Joins: lerc (quassel@moz-289EFA2.telstraclear.net)
[22:26:33] <tomdale> we moved something into a trait
[22:26:34] * cmr looks
[22:26:43] <pcwalton> that's probably it
[22:26:58] <pcwalton> man, C++ compiles so slow
[22:27:01] <pcwalton> and rust compiles so fast
[22:27:05] *** Quits: elux (peter@B6F21F4B.1F20BC31.2170E5F.IP) (Quit: Bye!)
[22:27:10] <tomdale> so... is there a workaround...?
[22:27:19] <cmr> tomdale: try making it a pub fn
[22:27:20] <pcwalton> well, first I've seen the bug so I don't know of one
[22:27:30] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[22:27:33] <pcwalton> try to add stuff to make it more obvious to rustc that it's exported I guess.
[22:27:43] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[22:27:56] <acrichto> exhaustiveness checking doesn't recognize that I listed out all 256 cases of a u8 :(
[22:28:01] <cmr> tomdale: https://github.com/mozilla/rust/issues/10573
[22:28:13] <pcwalton> acrichto: nope. I hit that in sprocketnes too, haha
[22:29:08] <acrichto> tomdale: so if I'm reading this correctly, some code was moved into a trait and then the code used by the moved code was marked as unused?
[22:29:35] <wycats_> acrichto: nah
[22:29:44] <vmx> dbaupp: this failure looks unrelated to my change (i also did a full "make check" from a checkout from yesterday) http://buildbot.rust-lang.org/builders/auto-linux-32-nopt-t/builds/2372
[22:29:49] <wycats_> it was marked as unused before
[22:29:53] <wycats_> and it still compiles
[22:30:00] <acrichto> linker errors are *very bad*
[22:30:06] <wycats_> pcwalton: it's a pub fn and I just made the module itself pub
[22:30:07] <acrichto> so how'd you get the linker error?
[22:30:17] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Connection reset by peer)
[22:30:22] <wycats_> acrichto: I can push the code that generates it to a branch
[22:30:25] <wycats_> uno momento por favor
[22:30:30] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[22:30:31] <pcwalton> hmm :\
[22:31:35] <vmx> acrichto: thanks for the retrigger
[22:31:40] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[22:31:42] <acrichto> vmx: np
[22:31:46] <wycats_> it's pushed to the linker-error branch
[22:32:01] <wycats_> this is the repo: https://github.com/tildeio/buffoon
[22:32:24] <acrichto> oh dear, debugging more than 20 lines is always fun...
[22:32:50] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Connection reset by peer)
[22:32:52] <wycats_> acrichto: at least it's OSS!
[22:32:53] *** Joins: kngl1 (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[22:33:01] <wycats_> acrichto: it's a pretty trivial example honestly
[22:33:08] <wycats_> I have no idea how this is happening
[22:33:10] <wycats_> it seems insane
[22:33:21] *** Joins: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net)
[22:33:23] <wycats_> I went so far as to make the module a pub mod 
[22:33:27] *** Quits: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net) (Quit: erickt1)
[22:35:33] *** Quits: maikklein (maik@moz-502609D4.dip0.t-ipconnect.de) (Ping timeout)
[22:36:31] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[22:36:33] <whitequark> ha, TESTNAME conflicts with something in LLVM buildscripts
[22:36:43] <whitequark> so if your invocation with TESTNAME goes on to build llvm... boom
[22:37:02] *** Joins: flammi (smuxi@moz-4559A8EC.dip0.t-ipconnect.de)
[22:37:05] <acrichto> wycats_: you may have picked up some old library, I'm getting no link errors on my ened
[22:37:13] <wycats_> acrichto: WAT
[22:37:20] <wycats_> how do I clear things out?
[22:37:21] *** Joins: alan_andrade (alan_andra@2D866054.D1EB06A3.B7838CA6.IP)
[22:37:29] <wycats_> acrichto: do you get the dead code warning?
[22:37:34] <acrichto> find / -name 'libbuffon*' -exec rm '{}' ';'
[22:37:34] <wycats_> if you remove allow(dead_code)?
[22:37:40] <acrichto> lemme try
[22:37:56] *** Quits: flammi (smuxi@moz-4559A8EC.dip0.t-ipconnect.de) (Client exited)
[22:38:23] <wycats_> shit Tom's machine stopped responding... gotta wait for him to wake up from his nap :P
[22:38:31] <acrichto> wycats_: yeah, I get the dead code lint, btw you should #[crate_type = "rlib"] this guy so I don't have to type --lib all the time
[22:38:32] <wycats_> find ... slash!?
[22:38:39] <acrichto> don't actually run that :P
[22:38:51] <strcat> acrichto: find has -delete ;p
[22:39:11] *** Quits: geoffhill (geoffhill@moz-738DC0DB.org) (Ping timeout)
[22:39:11] <wycats_> acrichto: surely the fact that the dead code warning exists is related here
[22:39:11] <acrichto> find has so many options, and I know like 3 of them
[22:39:13] <strcat> and + is better than ; :)
[22:39:18] <strcat> passes more than 1 at a time
[22:39:22] <strcat> you want to ruin your root quickly!
[22:39:32] <acrichto> wycats_: the dead code is unrelated I think, if you have a clean slate you should not get a linker error
[22:39:41] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[22:39:47] <benh> strcat: more potential to delete things one /bin/rm shows up in its own argument too!
[22:39:50] <benh> once*
[22:40:03] <whitequark> haha
[22:40:16] <wycats_> acrichto: just a mega coincidence that it's the same method?
[22:40:20] <wycats_> s/method/function/?
[22:40:43] <acrichto> wycats_: I would think so, but I only say that b/c it works locally for me
[22:40:55] <wycats_> if you look at it the linker error is that it can't find the function that the dead code warning thinks is dead
[22:41:14] <wycats_> acrichto: if not /, then what?
[22:41:37] <acrichto> wycats_: the local workspace probably
[22:41:43] <acrichto> find . -name 'libbuffon*'
[22:41:45] <acrichto> just see what that prints
[22:43:22] *** Quits: alan_andrade (alan_andra@2D866054.D1EB06A3.B7838CA6.IP) (Ping timeout)
[22:43:59] <tomdale> nada
[22:44:18] <tomdale> wait I see it
[22:44:33] <acrichto> alternatively RUST_LOG=rustc::metadata::loader rustc foo.rs
[22:44:43] <acrichto> that should print out what's loaded somewhere in the output
[22:44:56] <tomdale> nope I cleared it out
[22:44:58] <tomdale> and nada
[22:44:59] <tomdale> still hosed
[22:45:23] <acrichto> can you pste a session with taht RUST_LOG variable set?
[22:45:38] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[22:45:43] <tomdale> https://www.irccloud.com/pastebin/nlGuZetH
[22:47:20] <acrichto> tomdale: and this error is happening at 42377a88cb415034e91b2629086ff56f2bd95b7b
[22:47:38] <tomdale> no
[22:47:43] <tomdale> I pushed a change
[22:47:47] <tomdale> 9a384
[22:47:53] <acrichto> wait hm no something is wrong
[22:47:53] <tomdale> linker-error branch
[22:47:55] <acrichto> it found an rlib
[22:47:58] <acrichto> but it's passing -Lbuffoon
[22:48:11] <tomdale> you need to get the linker-error branch bro
[22:49:33] <acrichto> ah I see, ok I, too, am getting the error
[22:49:53] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Connection reset by peer)
[22:50:00] <pcwalton> yay, got it compiling
[22:50:18] <pcwalton> now to remove one level of @mut indirection every time the parser looks at the next token
[22:50:23] <pcwalton> this might speed up parsing, who knows
[22:50:49] <acrichto> tomdale: cool, thanks for dogfooding extreme cases of privacy manipulation :P
[22:51:05] <tomdale> acrichto: what is extreme about it?
[22:51:07] *** Quits: Kruppe (user@moz-EE1E894A.home3.cgocable.net) (Ping timeout)
[22:51:15] <acrichto> just not-normal
[22:51:16] <tomdale> btw it was not originally a pub mod
[22:51:17] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[22:51:19] <acrichto> as in not run across before
[22:51:27] <tomdale> I added pub mob to try to convince the compiler not to remove it
[22:51:38] <tomdale> acrichto: hm... what's particularly strange about it?
[22:51:39] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Connection reset by peer)
[22:51:46] <acrichto> looking into it now
[22:52:06] *** Quits: heftig (heftig@B77CAD3A.CE5D84C0.172227A7.IP) (Quit: Quitting)
[22:52:36] <tomdale> acrichto: it's a pub fn in a mod, used in an fn in a pub Trait
[22:52:39] <tomdale> seems... normal?
[22:52:51] <acrichto> something must be different
[22:52:52] *** Joins: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net)
[22:52:53] <tomdale> possibly a bug related to default trait functions?
[22:53:15] <acrichto> that may be it
[22:53:22] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[22:53:53] <acrichto> wait hm
[22:56:12] <acrichto> whee reproduction
[22:56:17] <acrichto> I think default methods are borked
[22:56:43] *** Joins: heftig (heftig@B77CAD3A.CE5D84C0.172227A7.IP)
[22:57:15] <adridu59> what does "expected outer comment" mean? blocks on my `//!`
[22:57:58] *** Quits: jdm (jdm@moz-3FFA85CA.dsl.teksavvy.com) (Quit: Lost terminal)
[22:58:15] <SiegeLord> I had it happen when I tried to add a comment in a non-library crate
[22:58:21] *** Joins: Bewilderforce (Bewilderfo@moz-EA5D4D40.ed.shawcable.net)
[22:58:24] <acrichto> tomdale: https://github.com/mozilla/rust/issues/11225
[22:58:24] <tomdale> acrichto: ewot
[22:58:41] <acrichto> still a little unsure of what's goin on
[22:58:42] <tomdale> is there a workaround?
[22:58:48] <acrichto> just make the mod 'pub'
[22:59:14] <tomdale> we did that
[22:59:15] <tomdale> nada
[22:59:31] <acrichto> hm, this is a little different than your error
[22:59:46] <acrichto> b/c this one doesn't have the trait methods as the undefined references
[22:59:59] <adridu59> SiegeLord: has to be a lib? well, makes sense I guess
[23:00:07] <tomdale> we made everything pub
[23:00:09] <tomdale> and it fixed it
[23:00:12] <tomdale> :shipit:
[23:00:15] <SiegeLord> adridu59, No, I think it's a bug
[23:00:20] <SiegeLord> I just haven't submitted it yet
[23:00:35] <SiegeLord> There's no reason why you shouldn't be able to write documentation for an executable
[23:00:48] <acrichto> tomdale: 'pub mod output_stream'; fixes it for me
[23:00:48] <adridu59> acrichto: have you encountered that?
[23:01:08] <acrichto> adridu59: code?
[23:01:24] <acrichto> tomdale: oh wait, hm
[23:01:39] <tomdale> acrichto: we just pub'ed everything and it seems to work
[23:01:43] <tomdale> so that seems good
[23:01:49] <adridu59> acrichto: `//!` comments on an exec crate fail to compile with "expected outer comment"
[23:01:50] <tomdale> for various values of good
[23:02:17] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[23:02:30] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[23:02:30] *** ChanServ sets mode: +ao brson brson
[23:02:35] <acrichto> adridu59: echo "//! comment\nfn main() {}" | rustc -
[23:02:37] <acrichto> that works for me
[23:02:37] <wycats_> acrichto: thanks for your help :)
[23:02:46] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[23:02:46] <wycats_> we really appreciate you taking the time to investigate
[23:02:55] <acrichto> tomdale: wycats_: np, I'll work on minimizing this and repording this as well
[23:03:14] <wycats_> acrichto: :D
[23:03:16] <wycats_> acrichto: thanks
[23:03:33] <wycats_> acrichto: we can move forward now that we have a workaround :)
[23:03:49] <acrichto> pub *all* the things!
[23:04:58] *** Quits: heftig (heftig@B77CAD3A.CE5D84C0.172227A7.IP) (Ping timeout)
[23:04:58] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[23:05:46] <pcwalton> is it just me or is parsing faster with the recent change?
[23:06:03] <cmr> pcwalton: which change? I can tell you for sure if it is or not.
[23:06:21] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Connection reset by peer)
[23:06:33] <pcwalton> dc830345e8
[23:06:43] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[23:06:46] <pcwalton> librustc parsed in 0.631 s
[23:07:13] *** Joins: heftig (heftig@moz-FB34F68F.dip0.t-ipconnect.de)
[23:07:14] <acrichto> pcwalton: 0.793 for me (without that change I thnk)
[23:07:22] <pcwalton> hmm, different machines though
[23:07:30] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[23:07:37] <acrichto> oh nope, it's exactly that change
[23:08:11] *** Quits: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net) (Quit: Leaving.)
[23:08:48] <cmr> 603ms after that change, 610ms before.
[23:08:50] <cmr> sorry :(
[23:09:19] *** Joins: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net)
[23:09:20] <pcwalton> ok
[23:09:22] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[23:09:49] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[23:10:20] *** Quits: astropirate (astropirat@moz-E6201624.hsd1.co.comcast.net) (Connection reset by peer)
[23:10:27] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:10:39] <whitequark> I can import macros with #[escape_macros] and "mod macros;" item
[23:10:46] <whitequark> but can I do the same if the file is elsewhere?
[23:10:58] <whitequark> mod macros = "../libfoo/macros.rs" doesn't seem to work
[23:11:17] <strcat> whitequark: #[path = "..."]
[23:11:22] <cmr> whitequark: #[path="../libfoo/macros.rs"] mod macros;
[23:11:29] <whitequark> thanks!
[23:12:29] *** Quits: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net) (Quit: Leaving.)
[23:12:35] *** Joins: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net)
[23:14:00] *** Quits: creationix (creationix@moz-2FD6AA77.cpe.cableone.net) (Ping timeout)
[23:15:36] *** Joins: hacker_s_ (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[23:15:51] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[23:16:15] *** Quits: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net) (Connection reset by peer)
[23:16:22] *** Joins: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net)
[23:16:28] *** Joins: creationix (creationix@moz-2FD6AA77.cpe.cableone.net)
[23:17:40] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[23:19:18] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[23:19:37] <pcwalton> acrichto: what's the recommended function to break on for failure now?
[23:19:41] <pcwalton> rust_begin_unwind no longer works
[23:19:42] *** Joins: mib_jxp43x (Mibbit@A460D360.9B80AA7B.3464FAC3.IP)
[23:19:45] *** Quits: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net) (Quit: Leaving.)
[23:19:51] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[23:19:55] <ChrisMorgan> pcwalton: _Unwind_RaiseException
[23:19:59] <pcwalton> ok
[23:20:27] <mib_jxp43x> Hi everyone!
[23:20:44] <acrichto> pcwalton: yeah and brson has a good point that rust_begin_unwind is much more easy to remember
[23:20:56] <pcwalton> acrichto: maybe we should throw something in there with #[no_mangle]?
[23:20:59] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[23:21:02] <acrichto> yeah that's the idea
[23:21:04] <pcwalton> #[inline(never)] and #[no_mangle]
[23:21:10] <acrichto> or that's what I would expect
[23:21:14] <ChrisMorgan> My solution is `rustc --help-debug` showing it.
[23:21:33] <pcwalton> Mac syslibs have a "malloc_error_break"
[23:21:37] <pcwalton> for this purpose
[23:21:50] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[23:21:52] <mib_jxp43x> Is there a way to enforce a timeout on UDPSocket's recv()? Or a way to kill a task?
[23:22:29] <ChrisMorgan> Is there any other information that would be particularly useful for debugging that would fit well in a --help-debug page of information?
[23:22:30] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[23:22:44] <strcat> mib_jxp43x: killing a task wouldn't be a very clean thing to do
[23:23:00] <strcat> it'd cause deadlocks often at a minimum
[23:23:22] *** Joins: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net)
[23:23:38] *** Joins: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au)
[23:23:53] <ChrisMorgan> mib_jxp43x: when you write UDPSocket's recv(), do you mean UdpSocket.recvfrom? http://static.rust-lang.org/doc/master/std/io/net/udp/struct.UdpSocket.html#method.recvfrom
[23:24:07] *** Quits: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP) (Client exited)
[23:26:13] <mib_jxp43x> ChrisMorgan: yes, I meant recvfrom
[23:26:23] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[23:26:51] <ChrisMorgan> mib_jxp43x: it doesn't look to support timeouts at all.
[23:27:14] <adridu59> SiegeLord: my problem was that I had compiler attrs before my top-level comment
[23:27:27] <SiegeLord> Oh really
[23:27:32] <SiegeLord> That may have been the case for me too
[23:27:46] <mib_jxp43x> So a task can be blocked on recvfrom() forever?
[23:27:50] *** Quits: mentero (mentero@moz-D61C6F02.proxnet.pl) (Ping timeout)
[23:28:10] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[23:28:19] <ChrisMorgan> mib_jxp43x: yes, that looks to be the case
[23:29:15] <ChrisMorgan> mib_jxp43x: through the use of a separate task for that purpose and possibly combining it with a Port/Chan from std::comm, you may be able to produce a alternative design which is quite satisfactory
[23:29:18] <mib_jxp43x> So it's pretty much impossible to write UDP clients in Rust? If a single packet is lost, the whole app will be blocked?
[23:29:50] <mib_jxp43x> Is there a way to build a Port/Chan out of a UDPSocket?
[23:29:57] <strcat> you don't have to use the stdlib's version of everything
[23:30:08] *** Quits: creationix (creationix@moz-2FD6AA77.cpe.cableone.net) (Ping timeout)
[23:30:27] <cmr> mib_jxp43x: all the C interfaces are in std::libc, roll what you must
[23:31:29] <mib_jxp43x> ok :( That kind of defeat the purpose of using Rust
[23:31:54] <cmr> well open an issue too :p cc @alexcrichton
[23:31:55] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:32:31] <adridu59> is there a `range_type!` out there?
[23:32:33] <strcat> mib_jxp43x: because one thing you want isn't implemented yet? not going to have much fun with a pre-1.0 language then
[23:32:39] <strcat> adridu59: doing what? ;p
[23:33:22] <adridu59> oh not in std
[23:33:38] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[23:33:41] <strcat> what do you want it to do?
[23:33:45] <adridu59> bjz
[23:33:54] <cmr> wut
[23:34:32] <adridu59> well it's there https://gist.github.com/bjz/5992668
[23:34:36] *** Quits: tulloch (tulloch@moz-F362C074.lnse2.pie.bigpond.net.au) (Ping timeout)
[23:34:38] <adridu59> definitely not in libstd
[23:36:25] *** Quits: apoelstra (username@moz-B7040E82.vs.shawcable.net) (Quit: WeeChat 0.4.2)
[23:39:05] *** Quits: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net) (Quit: Leaving.)
[23:40:42] <adridu59> does a `check!` macro exist?
[23:41:01] <dbaupp> adridu59: what would it do?
[23:41:36] <adridu59> dbaupp: no idea, I've just seen `check` somewhere in an article
[23:41:57] <dbaupp> not in the set of macros injected by the compiler
[23:42:05] *** Joins: alan_andrade (alan_andra@2D866054.D1EB06A3.B7838CA6.IP)
[23:42:20] <adridu59> I see
[23:43:53] *** Quits: alan_andrade (alan_andra@2D866054.D1EB06A3.B7838CA6.IP) (Ping timeout)
[23:44:08] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[23:45:58] *** Quits: mib_jxp43x (Mibbit@A460D360.9B80AA7B.3464FAC3.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:45:59] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Connection reset by peer)
[23:46:09] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[23:47:07] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[23:52:23] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[23:55:18] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[23:56:54] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Quit: Leaving.)
[23:57:05] *** Joins: mib_h7le9f (Mibbit@moz-84A7864F.hsd1.ga.comcast.net)
[23:59:50] <whitequark> how is @ implemented today?
[23:59:58] <skrylar> supposedly it isn't
