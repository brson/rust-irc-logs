[00:00:02] <strcat> huon: based on type, aren't they?
[00:00:02] <ChrisMorgan> Here's my comparison of current and what I think I'd like: https://pastebin.mozilla.org/4578541
[00:00:29] <strcat> huon: it seem the linker only hashes a bit of the symbol from the end, so having the version there doesn't help
[00:00:43] * strcat shrugs
[00:00:55] <strcat> maybe they're more unique than I think and it's slow for another reason (like us exporting too much)
[00:01:04] <huon> strcat: type of the function, yeah
[00:01:06] <acrichto> ChrisMorgan: feel free to open an issue, those are good suggestions, primarily putting the crate name in the front may be a good idea
[00:01:14] <strcat> huon: a lot of those would be the same, wouldn't they?
[00:01:19] <huon> crate name, crate hash, type
[00:01:21] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[00:01:23] <huon> strcat: presumably
[00:01:36] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[00:01:36] <ghrust> [13rust] 15bors 04force-pushed 06auto from 145cd630b to 14b4d3243: 02http://git.io/N3iJvQ
[00:01:36] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[00:01:36] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[00:01:37] <ghrust> [13rust] 15bors pushed 5 new commits to 06auto: 02http://git.io/L8YfIg
[00:01:37] <ghrust> 13rust/06auto 14ebbd543 15Alex Crichton: log: Introduce liblog, the old std::logging...
[00:01:37] <ghrust> 13rust/06auto 14f6a15af 15Alex Crichton: rustc: Remove compiler support for __log_level()...
[00:01:37] <ghrust> 13rust/06auto 14ed4190b 15Alex Crichton: rustc: Tweak where -lmorestack is on link commands...
[00:01:39] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[00:01:51] <huon> btw, what's the purpose of the crate hash?
[00:02:00] <acrichto> the one in the filename?
[00:02:03] <acrichto> or the SVH one?
[00:02:04] <strcat> huon: it's based on the version + the version of the deps
[00:02:09] <huon> acrichto: file name
[00:02:19] <huon> it's literally just rephrasing the name + version of the crate
[00:02:22] <acrichto> disambiguation on the filesystem of crates with the same name but different crate id
[00:02:27] <strcat> huon: so you can have different versions side-by-side, where version might be a dep version is differen
[00:02:27] <huon> i.e. the info is in the filename
[00:02:31] <acrichto> it's basically a way to put the crate path into the filename
[00:02:35] <acrichto> crate id's path*
[00:02:43] <strcat> huon: for example lets say libbar depends on libfoo
[00:02:43] <huon> 's.input_str(crate_id.short_name_with_version());"
[00:02:47] <strcat> it uses an inline function from libfoo
[00:02:51] <strcat> inside an inline function
[00:02:53] <huon> strcat: no
[00:02:57] <huon> it's not doing that
[00:03:02] <strcat> that means the libfoo version is part of the libbar ABI
[00:03:04] <strcat> huon: hm?
[00:03:06] <huon> the filename hash is literally just the crate id
[00:03:10] <strcat> oh, weird
[00:03:27] <acrichto> huon: oh argh, that should be something like crate_id.to_str()
[00:03:27] <huon> that^ line of code is the whole input to the hash
[00:03:48] <acrichto> that comment in that code is also wrong
[00:03:56] <acrichto> I think I intended to put that somewhere else
[00:04:23] <huon> strcat: I guess the SVH hash includes all that dependency info
[00:04:43] <strcat> I thought that was the hash in the crate name ;s
[00:05:29] <huon> apparently not
[00:09:52] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:13:54] *** kimundi is now known as zz_kimundi
[00:13:56] <huon> 'load average: 12.13, 7.09, 4.72' <3 `make check -j10`
[00:14:21] *** zz_kimundi is now known as kimundi
[00:14:24] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[00:14:24] *** ChanServ sets mode: +qo brson brson
[00:15:44] <ChrisMorgan> make check -j 65536
[00:16:03] <aatch> make check -j
[00:16:08] * ChrisMorgan imagines a machine that can actually make meaningful use of thatâ€¦
[00:16:52] <strcat> huon: chrt -b make check -j10
[00:17:25] <aatch> strcat, oooh, interesting
[00:20:48] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[00:20:48] *** ChanServ sets mode: +ao dherman dherman
[00:21:42] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[00:26:32] *** Quits: gimpf (gimpf@moz-BBD748EE.adsl.highway.telekom.at) (Quit: Leaving.)
[00:28:08] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[00:32:58] <cmr> hm
[00:33:02] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[00:33:02] *** ChanServ sets mode: +ao pcwalton pcwalton
[00:33:15] <cmr> debug-info/limited-debuginfo.rs is failing for me
[00:33:21] <cmr> it expects static void [...]main();
[00:33:27] <cmr> but is finding static void limited-debuginfo::main(void);
[00:33:32] <cmr> perhaps because my terminal is too wide.
[00:34:15] <kimundi> cmr: I had the same error for two days now
[00:34:31] <cmr> ok, I won't worry about it then.
[00:34:45] <cmr> maybe just gdb version differences.
[00:35:11] <kimundi> well, I worry because it prevents make check from completing, :P
[00:35:17] <cmr> yes, well :P
[00:36:20] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[00:36:20] <ghrust> [13rust] 15cmr 04force-pushed 06try from 14a96f2b4 to 14bdbc2b0: 02http://git.io/k471pw
[00:36:20] <ghrust> 13rust/06try 1479af3b1 15Corey Richardson: Remove libc from std...
[00:36:20] <ghrust> 13rust/06try 14d685152 15Corey Richardson: fix fallout from std::libc separation
[00:36:21] <ghrust> 13rust/06try 14eed5765 15Corey Richardson: rt: remove opendir/readdir hack
[00:36:23] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[00:36:36] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[00:36:36] <ghrust> [13rust] 15bors 04force-pushed 06auto from 141dd0225 to 14b4d3243: 02http://git.io/N3iJvQ
[00:36:36] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[00:36:43] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[00:36:43] <ghrust> [13rust] 15cmr pushed 1 new commit to 06try: 02http://git.io/8H_kmA
[00:36:43] <ghrust> 13rust/06try 144bfc2fa 15Corey Richardson: fix more fallout
[00:36:43] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[00:36:51] <cmr> (missed one)
[00:37:25] *** Joins: luziie (luziie@moz-CD18B14B.customer.cdi.no)
[00:37:33] *** Quits: luziiie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[00:39:08] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:39:13] *** Quits: canhtak (canhtak@moz-9F5D2CD3.wl.t.ulaval.ca) (Quit: canhtak)
[00:40:55] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:47:45] *** kimundi is now known as zz_kimundi
[00:59:55] <brson> acrichto: cp: cannot stat â€˜x86_64-unknown-linux-gnu/rt/libbacktrace/.libs/libbacktrace.aâ€™: No such file or directory
[01:00:00] <brson> fyi
[01:00:09] <brson> that was after a 'make clean'
[01:07:16] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[01:18:31] *** Quits: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net) (Ping timeout)
[01:21:17] *** Joins: cgaebel (clark@moz-F9D89110.nyc.res.rr.com)
[01:26:15] *** Quits: carter (carter@moz-58F59B3A.members.linode.com) (Quit: ZNC - http://znc.in)
[01:26:45] *** Joins: carter (carter@moz-58F59B3A.members.linode.com)
[01:28:04] <brson> why is Hash's default typaram SipHash but all the implementations are for Writer?
[01:29:29] *** Quits: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: Jesse)
[01:33:21] *** Quits: carter (carter@moz-58F59B3A.members.linode.com) (Quit: ZNC - http://znc.in)
[01:33:37] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[01:37:10] *** Joins: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[01:37:25] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[01:41:14] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[01:41:37] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[01:41:38] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/xHAUTA
[01:41:38] <ghrust> 13rust/06auto 142a1bd2f 15Piotr Czarnecki: Fix and improve inline assembly....
[01:41:38] <ghrust> 13rust/06auto 1498fa0f8 15bors: auto merge of #12798 : pczarn/rust/inline-asm, r=alexcrichton...
[01:41:38] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[01:41:58] *** Joins: carter (carter@moz-58F59B3A.members.linode.com)
[01:42:00] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[01:42:00] *** ChanServ sets mode: +ao pcwalton pcwalton
[01:43:26] *** Joins: erickt (etryzelaar@moz-C07D5168.p2p.sfo1.mozilla.com)
[01:46:35] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[01:48:11] *** Quits: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: Jesse)
[01:49:58] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[01:52:36] *** Quits: sunfish (chatzilla@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[01:54:18] *** Quits: carter (carter@moz-58F59B3A.members.linode.com) (Quit: ZNC - http://znc.in)
[01:55:49] *** Joins: carter (carter@moz-58F59B3A.members.linode.com)
[01:58:16] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[02:00:08] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[02:05:50] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[02:05:58] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[02:06:08] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[02:10:10] *** Quits: erickt (etryzelaar@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[02:12:40] *** Quits: luziie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[02:13:01] *** Joins: luziie (luziie@moz-CD18B14B.customer.cdi.no)
[02:19:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:21:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:23:52] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[02:31:54] *** Joins: huon (Thunderbir@7DB26CEE.D5A1DCF.37681C44.IP)
[02:31:54] *** ChanServ sets mode: +o huon
[02:32:08] *** Quits: huon (Thunderbir@7DB26CEE.D5A1DCF.37681C44.IP) (Connection reset by peer)
[02:34:35] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[02:37:59] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[02:37:59] *** ChanServ sets mode: +ao pcwalton pcwalton
[02:39:35] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[02:50:28] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[02:51:23] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[02:51:40] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[02:51:40] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/xHAUTA
[02:51:40] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[02:51:44] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[02:53:14] *** Joins: huon (Thunderbir@7DB26CEE.D5A1DCF.37681C44.IP)
[02:53:14] *** ChanServ sets mode: +o huon
[02:53:31] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[02:56:33] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[02:56:33] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/KaCKPw
[02:56:33] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[02:56:36] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[02:56:36] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/uIqInQ
[02:56:36] <ghrust> 13rust/06auto 1476b19f8 15Marvin LÃ¶bel: Added support for type placeholders (explicit requested type...
[02:56:36] <ghrust> 13rust/06auto 14c8c9693 15bors: auto merge of #12764 : Kimundi/rust/partial_typehint, r=nikomatsakis...
[02:56:37] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[03:00:38] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[03:00:38] *** ChanServ sets mode: +ao pcwalton pcwalton
[03:02:25] *** Joins: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[03:02:51] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[03:04:56] *** Joins: erickt (etryzelaar@moz-C07D5168.p2p.sfo1.mozilla.com)
[03:08:00] *** Joins: luziiie (luziie@moz-CD18B14B.customer.cdi.no)
[03:08:38] *** Quits: luziie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[03:13:55] *** Quits: eibwen (kvirc@moz-FBADA4B7.dip0.t-ipconnect.de) (Ping timeout)
[03:19:08] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:21:30] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:34:53] <bstrie> nmatsakis: how about we avoid the keyword bikeshedding by using ? for unsized types :P fn foo<T?>()
[03:35:33] <huon> bstrie: now we get to do symbol bikeshedding
[03:35:39] <mcpherrin> bstrie: hmm ? is weird, we should use #
[03:35:40] <aatch> bstrie, to the symbol bikeshed!
[03:35:57] <aatch> I propose '%', we aren't using it nearly enough
[03:36:25] <huon> we could use @ now
[03:36:30] *** Quits: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: Jesse)
[03:36:55] <huon> and ! would make generics more exciting
[03:37:20] *** Joins: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[03:39:18] *** Quits: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[03:39:47] <aatch> fn foo<@T?!>()
[03:40:24] <aatch> fn foo<Tâ€½>()
[03:40:48] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[03:40:49] *** ChanServ sets mode: +ao pcwalton pcwalton
[03:40:55] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[03:42:13] <cgaebel> why not ~~?
[03:43:06] <huon> foo<~T~>
[03:43:53] *** Joins: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[03:44:13] <cgaebel> lgtm. +r.
[03:44:16] <cgaebel> err, r+
[03:45:53] *** Quits: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[03:46:33] *** Quits: zz_kimundi (kimundi@moz-F815AD2B.dip0.t-ipconnect.de) (Ping timeout)
[03:46:34] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[03:46:34] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14c8c9693 to 1498fa0f8: 02http://git.io/N3iJvQ
[03:46:34] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[03:46:37] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[03:46:37] <ghrust> [13rust] 15bors pushed 6 new commits to 06auto: 02http://git.io/_X3swA
[03:46:37] <ghrust> 13rust/06auto 14ebbd543 15Alex Crichton: log: Introduce liblog, the old std::logging...
[03:46:37] <ghrust> 13rust/06auto 14f6a15af 15Alex Crichton: rustc: Remove compiler support for __log_level()...
[03:46:37] <ghrust> 13rust/06auto 14ed4190b 15Alex Crichton: rustc: Tweak where -lmorestack is on link commands...
[03:46:39] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[03:47:49] <bstrie> let's compromise
[03:48:07] <bstrie> ANY parse error in the trait bounds is condsidered to indicate an unsize bound
[03:48:26] <bstrie> invent any syntax you please!
[03:48:46] <bstrie> it's legal as long as it isn't already legal
[03:49:03] <huon> bstrie++
[03:49:16] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[03:50:15] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[03:50:21] *** Joins: zz_kimundi (kimundi@moz-262F3D8F.dip0.t-ipconnect.de)
[03:50:22] <cgaebel> that's a good compromise. very fair.
[03:50:22] *** zz_kimundi is now known as kimundi
[03:53:45] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[03:59:16] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[04:01:12] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[04:03:00] <aatch> I say that a lexing error should indicate an unsized bound. We need more coupling!
[04:06:34] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[04:06:34] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14d7b7f68 to 1498fa0f8: 02http://git.io/N3iJvQ
[04:06:34] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[04:06:35] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[04:06:35] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/NbxqiA
[04:06:35] <ghrust> 13rust/06auto 14a63deeb 15Alex Crichton: io: Bind to shutdown() for TCP streams...
[04:06:35] <ghrust> 13rust/06auto 144443fb3 15bors: auto merge of #12855 : alexcrichton/rust/shutdown, r=brson...
[04:06:36] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[04:07:11] *** Joins: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[04:07:27] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[04:09:41] *** Quits: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[04:24:58] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[04:27:37] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[04:32:08] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Quit: Leaving)
[04:32:16] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[04:33:39] *** Quits: cgaebel (clark@moz-F9D89110.nyc.res.rr.com) (Ping timeout)
[04:49:17] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[04:51:23] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[04:58:23] *** Quits: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net) (Ping timeout)
[04:58:31] *** Joins: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net)
[05:00:03] *** Quits: jack (sid19593@moz-A42E5B7B.irccloud.com) (Ping timeout)
[05:01:35] *** Joins: jack (sid19593@moz-A42E5B7B.irccloud.com)
[05:19:08] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:21:36] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:21:44] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[05:21:44] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/NbxqiA
[05:21:44] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[05:22:03] *** Quits: erickt (etryzelaar@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[05:26:35] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[05:26:35] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/Ndwq7Q
[05:26:35] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[05:26:37] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[05:26:37] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/fJ0JGA
[05:26:37] <ghrust> 13rust/06auto 1462792f0 15Huon Wilson: lint: add lint for use of a `~[T]`....
[05:26:37] <ghrust> 13rust/06auto 14adc357a 15Huon Wilson: std: render the vec_ng docs....
[05:26:37] <ghrust> 13rust/06auto 14b35e8fb 15bors: auto merge of #12861 : huonw/rust/lint-owned-vecs, r=thestinger...
[05:26:39] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[05:38:28] *** Quits: bvssvni (Mibbit@moz-E289BB64.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[05:41:39] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[05:50:41] *** Joins: erickt (etryzelaar@moz-C07D5168.p2p.sfo1.mozilla.com)
[05:52:56] *** Quits: erickt (etryzelaar@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[05:58:20] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[06:00:09] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[06:02:01] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[06:08:11] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Input/output error)
[06:18:11] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[06:18:27] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[06:19:42] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:20:11] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[06:21:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:21:40] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[06:25:29] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[06:34:14] *** Joins: edwardw (edwardw@CBC31673.351D1665.B9C6B12A.IP)
[06:36:34] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[06:36:34] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/fJ0JGA
[06:36:34] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[06:41:37] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[06:41:38] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/HFxpOA
[06:41:38] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[06:41:39] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[06:41:39] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/h5ajoQ
[06:41:39] <ghrust> 13rust/06auto 14d062669 15Huon Wilson: collections: move hashmap's example to the struct....
[06:41:39] <ghrust> 13rust/06auto 1491d4af9 15bors: auto merge of #12864 : huonw/rust/hash-docs, r=alexcrichton...
[06:41:39] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[06:47:20] *** Quits: huon (Thunderbir@7DB26CEE.D5A1DCF.37681C44.IP) (Quit: huon)
[06:53:20] *** Joins: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[07:13:03] *** Quits: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[07:16:28] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[07:19:31] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:21:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:41:40] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[07:41:40] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/cgQECg
[07:41:40] <ghrust> 13rust/06auto 14d062669 15Huon Wilson: collections: move hashmap's example to the struct....
[07:41:40] <ghrust> 13rust/06auto 146c895d1 15bors: auto merge of #12864 : huonw/rust/hash-docs, r=alexcrichton...
[07:41:41] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[07:43:15] *** flaper87|afk is now known as flaper87
[07:48:32] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[07:48:36] <flaper87> o/
[07:49:56] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[07:50:33] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[07:52:03] <eddyb> r? https://github.com/mozilla/rust/pull/12735 (I had Core instead of core somewhere in rustdoc)
[07:58:07] <eddyb> actually, nevermind ^^ I'll keep adding commits to it
[08:02:25] *** Joins: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net)
[08:02:25] *** ChanServ sets mode: +o huon
[08:07:28] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[08:11:02] *** Joins: luz1 (luziie@moz-CD18B14B.customer.cdi.no)
[08:11:27] *** Quits: edwardw (edwardw@CBC31673.351D1665.B9C6B12A.IP) (Ping timeout)
[08:11:47] *** Quits: luziiie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[08:19:22] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:21:36] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:22:29] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[08:23:55] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[08:24:57] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:35:04] *** Quits: c74d (c74d@moz-E2EAC718.oc.oc.cox.net) (Ping timeout)
[08:38:05] *** Joins: c74d (c74d@moz-E2EAC718.oc.oc.cox.net)
[08:39:57] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:41:59] <eddyb> -use std::cell::RefCell;
[08:53:57] <eddyb> huon: this is what playing whack-a-mole must feel like
[08:56:39] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[08:56:39] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/cgQECg
[08:56:39] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[08:59:53] <eddyb> "Set of variable node-ids that are moved."
[09:00:52] <eddyb> that sounds like it would allow trans to easily know whether an lvalue should be cleaned up
[09:01:28] <eddyb> however, if it's not enforced that all paths have the same effect, then a trivial solution is wrong
[09:01:34] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[09:01:34] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/WkqjeQ
[09:01:34] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[09:01:39] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[09:01:39] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/Xyha8Q
[09:01:39] <ghrust> 13rust/06auto 1405c991c 15Alex Crichton: collections: Don't recurse in hashmap robin_hood...
[09:01:39] <ghrust> 13rust/06auto 1429756a3 15bors: auto merge of #12867 : alexcrichton/rust/issue-12860, r=thestinger...
[09:01:39] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[09:14:21] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.50.1)
[09:17:48] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[09:19:43] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:21:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:35:12] *** Quits: c74d (c74d@moz-E2EAC718.oc.oc.cox.net) (Ping timeout)
[09:35:59] *** Joins: gimpf (gimpf@moz-8B1B352C.adsl.highway.telekom.at)
[09:37:42] *** Joins: c74d (c74d@moz-E2EAC718.oc.oc.cox.net)
[09:39:45] <eddyb> haha all the greens https://github.com/mozilla/rust/pull/12735
[09:42:39] <huon> âœ“âœ“âœ“
[09:44:29] <huon> eddyb: travis approves
[09:44:42] <huon> eddyb: is that PR waiting for something, or is it r-able?
[09:45:29] <eddyb> one more commit :P
[09:46:00] <eddyb> well, I think technically too if I haven't pushed recently
[09:47:15] <eddyb> *two
[09:56:44] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[09:57:03] <Yurume> hmm, what does #{...} do in the pre-0.5 Rust?
[09:57:07] <Yurume> did*
[09:57:21] <kimundi> uhm
[09:57:25] <kimundi> I have no idea
[09:57:52] <huon> Yurume: checkout release-0.4 and check the parser?
[09:57:56] <Yurume> I do know #<> marks a quoted type and #<ident>[] is an invocation syntax, but I don't have any clue about that
[09:58:16] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[09:58:17] <Yurume> I already did but it has changed rapidly that only 0.1 was usable for this purpose
[09:59:03] <Yurume> to be exact, #<> and #{} is gone by 0.4
[09:59:32] <huon> heh
[09:59:35] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[09:59:36] <huon> ancient history
[10:03:36] <Yurume> okay, if I guessed correctly, #<> and #{} is a typed *unquote* (and not *quote*)
[10:04:52] <Yurume> so that `#macro[[#foo[#<x>, #{y}], ...]]` would be `macro_rules! foo(($x:ty, $y:expr) => (...))` nowadays
[10:05:18] <eddyb> lol reminds me of Scala type lambdas
[10:05:37] <eddyb> huon: I don't think I'll fit in this slot, which means I get to remove more @ =))
[10:05:56] * huon wonders why eddyb is trying to fit in slots
[10:06:09] <eddyb> efficiency
[10:06:36] * huon doesn't know what "slot" eddyb is referring to
[10:06:42] <eddyb> bors
[10:06:53] <eddyb> gj github, timing out again
[10:07:12] <huon> oh
[10:07:30] <eddyb> aaand I have to use an Option dance because we don't have stack once closures
[10:08:15] <eddyb> is there by any chance an issue to which I can stick a FIXME remove this option dance?
[10:10:42] <eddyb> gotta love XP getting taken to the stakes #12842
[10:11:16] <huon> we can (almost) have static Vec initialisers
[10:11:38] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[10:11:38] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/Xyha8Q
[10:11:38] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[10:11:47] <eddyb> and there goes the slot :P
[10:12:33] *** Quits: kimundi (kimundi@moz-262F3D8F.dip0.t-ipconnect.de) (Ping timeout)
[10:13:29] <eddyb> hmm, move tcx into ccx or borrow it?
[10:13:51] <eddyb> there's enough indirection as it is, might be worth something
[10:15:32] <huon> borrow it?
[10:16:32] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[10:16:32] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/vc9kOQ
[10:16:32] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[10:16:33] <eddyb> I like ownership. why? because we can move to &mut at some point if we don't have &T everywhere
[10:16:33] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[10:16:33] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/HAmo9Q
[10:16:33] <ghrust> 13rust/06auto 14d95c59a 15Daniel Micay: cmp: switch `min` and `max` to `TotalOrd`...
[10:16:33] <ghrust> 13rust/06auto 145073a88 15bors: auto merge of #12869 : thestinger/rust/cmp, r=brson...
[10:16:33] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[10:16:44] <eddyb> and get rid of more RefCell's :)
[10:17:07] <eddyb> for example, I'm pretty sure FunctionContext can hold a &mut CrateContext
[10:18:37] *** Joins: kimundi (kimundi@moz-61CF2AFF.dip0.t-ipconnect.de)
[10:18:59] <eddyb> and maybe if we can make Block a bit more linear, so you can only hold one a &mut Block at any time... but I'm not sure that will be easy to implement
[10:19:40] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:21:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:27:19] <eddyb> error: aborting due to 236 previous errors
[10:27:22] <eddyb> what have I done?
[10:28:14] <huon> caused 236 errors
[10:28:32] <eddyb> s/huon/captain_obvious/
[10:29:01] <eddyb> all these stupid macro expansion error bloat
[10:29:56] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[10:34:26] *** kimundi is now known as zz_kimundi
[10:36:02] *** zz_kimundi is now known as kimundi
[10:42:40] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:44:55] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[10:45:16] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[10:46:58] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[11:00:06] *** Joins: felixzilla (felixzilla@84D9BDFC.9853E308.DE15C958.IP)
[11:01:50] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[11:03:48] *** Quits: japaric (japaric@AF44BDDE.31BF4ADA.BFC118EE.IP) (Ping timeout)
[11:05:06] *** Quits: felixzilla (felixzilla@84D9BDFC.9853E308.DE15C958.IP) (Quit: )
[11:05:42] *** Joins: japaric (japaric@C45EB916.55B992BD.5C7588CA.IP)
[11:06:32] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[11:06:32] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/kkoQEw
[11:06:32] <ghrust> 13rust/06auto 146ff207b 15aochagavia: Refactored while_some (libstd/option.rs)...
[11:06:32] <ghrust> 13rust/06auto 14d367482 15bors: auto merge of #12871 : aochagavia/rust/Optimize-while_some, r=alexcrichton...
[11:06:33] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[11:07:49] *** Joins: angdev (uid7041@moz-E77DEB21.irccloud.com)
[11:10:59] *** Quits: doomlord_ (servitor@moz-99BE89EC.range86-184.btcentralplus.com) (Ping timeout)
[11:11:02] *** Joins: doomlord_ (servitor@moz-99BE89EC.range86-184.btcentralplus.com)
[11:14:44] *** Joins: eibwen (kvirc@moz-AC96660A.dip0.t-ipconnect.de)
[11:19:26] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:21:40] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:29:33] *** Joins: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[11:59:14] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[12:19:26] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:21:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:21:32] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[12:21:32] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/kkoQEw
[12:21:32] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[12:26:30] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[12:26:30] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/hS7Kdg
[12:26:30] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[12:26:31] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[12:26:31] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/-jZgCg
[12:26:31] <ghrust> 13rust/06auto 14edb6b02 15Huon Wilson: rustc: make stack traces print for .span_bug/.bug....
[12:26:31] <ghrust> 13rust/06auto 14a1c7ebe 15bors: auto merge of #12874 : huonw/rust/printier-rustc, r=alexcrichton...
[12:26:31] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[12:27:21] *** Quits: japaric (japaric@C45EB916.55B992BD.5C7588CA.IP) (Ping timeout)
[12:27:54] *** Joins: japaric (japaric@D71AE9C7.FD3D1332.95AFB88D.IP)
[12:42:18] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[12:42:49] *** Joins: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[12:59:37] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[13:00:03] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:02:15] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[13:18:44] *** Quits: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Connection reset by peer)
[13:18:47] *** Joins: glaebhoer1 (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[13:24:55] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[13:26:51] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[13:27:29] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[13:27:31] <cmr> try-win is still utterly broken.
[13:28:02] <eddyb> broken windows
[13:28:12] <eddyb> so childish :P
[13:30:15] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[13:30:15] <ghrust> [13rust] 15cmr pushed 1 new commit to 06try: 02http://git.io/T7D1pQ
[13:30:15] <ghrust> 13rust/06try 14f579812 15Corey Richardson: libc crate ignore-fast fallout
[13:30:15] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[13:31:08] <eddyb> "error: cannot move out of type `middle::trans::context::CrateContext`, which defines the `Drop` trait'
[13:31:30] <eddyb> good thing I saw the Drop impl and I know I can restrict it
[13:32:41] *** Quits: angdev (uid7041@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[13:36:34] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[13:36:34] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/-jZgCg
[13:36:34] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[13:38:20] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[13:41:01] *** Joins: luziie (luziie@moz-CD18B14B.customer.cdi.no)
[13:41:02] *** Quits: luz1 (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[13:41:27] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[13:41:27] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/2ePgdQ
[13:41:27] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[13:41:28] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[13:41:28] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/wTj6yg
[13:41:28] <ghrust> 13rust/06auto 146298900 15Alex Crichton: std: Demangle more escapes in backtraces...
[13:41:28] <ghrust> 13rust/06auto 14a07149b 15Alex Crichton: rustc: Prevent collisions in names of closures...
[13:41:28] <ghrust> 13rust/06auto 14339f816 15bors: auto merge of #12875 : alexcrichton/rust/demangle-more-things, r=brson...
[13:41:30] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[13:44:44] <kimundi> Okay, I'm blocked on https://github.com/mozilla/rust/issues/12787 . Is there any way for me to fake the successful completion of the debuginfo tests?
[13:46:29] <eddyb> nmatsakis: I just (accidentally) killed task_llcx :D
[13:46:29] <huon> kimundi: `make check-stage2-debuginfo TESTNAME=foobarbaz` maybe
[13:46:45] * nmatsakis doesn't know what task_llcx is :)
[13:46:47] <eddyb> and now a million errors because a few things are expecting a ccx
[13:47:22] <eddyb> nmatsakis: basically some things were being lazy and instead of using ccx.llcx, they were grabbing the llcx from TLD
[13:47:28] <huon> kimundi: or, if you just need to run some specific test: `make check-stage2-pretty TESTNAME=placeholder` ;)
[13:47:29] <eddyb> which... hmm, there might be a speedup there
[13:47:39] <nmatsakis> oh
[13:47:45] <nmatsakis> neat
[13:47:58] <eddyb> I had to remove it because unsetting that from TLD was what Drop for CrateContext did
[13:48:05] <eddyb> and I need to move out of CrateContext
[13:48:16] <eddyb> error: aborting due to 424 previous errors
[13:48:29] <eddyb> "easier than dwarf fortress"
[13:48:42] *** Quits: luziie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[13:49:11] <eddyb> Type::i8() is now Type::i8(ccx) - maybe it should be ccx.i8()?
[13:49:26] <eddyb> uglification :/
[13:50:34] <eddyb> nmatsakis: I am confident now that I can get the tcx arena PR cleaned up after we get a snapshot (so I can have lifetimes in traits)
[13:51:10] <kimundi> huon: Heh, TESTNAME=foobarbaz to make a successful empty testrun successfully worked :)
[13:52:16] *** Joins: edwardw (edwardw@655F78EA.BF27AFA4.B9C6B12A.IP)
[13:52:21] *** Joins: luziie (luziie@moz-CD18B14B.customer.cdi.no)
[13:56:55] <eddyb> nmatsakis, cmr, huon: spot the bug pub fn C_uint(ccx: &CrateContext, i: uint) -> ValueRef {
[13:57:58] * nmatsakis needs context
[13:58:13] <eddyb> creates a LLVM constant from the given value
[13:58:25] <eddyb> context-less, just found a bug
[14:00:33] <kimundi> nmatsakis: Can I get a re-r+? https://github.com/mozilla/rust/pull/12764
[14:01:47] <eddyb> nmatsakis: this should be reopened IMO https://github.com/mozilla/rust/issues/5172#issuecomment-37649621
[14:02:36] <eddyb> static X: uint = 0x1_0000_0000u; would be a test-case... but I don't have such a cross-compiling setup
[14:02:56] <eddyb> I guess we can make a library-less test (IR), just need someone with 32bit rustc
[14:03:07] <eddyb> (or the 32bit linux rust snapshot?)
[14:03:41] <cmr> if you're just doing IR, a no-std can cross-compile
[14:04:10] <eddyb> yupp, but I don't have a 32bit compiler
[14:04:41] <eddyb> and I'd rather not this take even longer
[14:08:51] <nmatsakis> kimundi: ok
[14:08:52] <huon> eddyb: eh?
[14:09:17] <huon> oh, I see
[14:09:40] <huon> eddyb: are you sure they're not meant to be ptr-sized constants?
[14:10:02] <eddyb> ptr-sized == 32bit when cross-compiling to 64bit?
[14:10:04] <nmatsakis> eddyb: oh I wondered if that's what you were getting at. 
[14:10:20] <nmatsakis> eddyb: when you said spot the bug. it does seem likely to be error-prone, though I'm not sure if in actual usage it's buggy
[14:10:31] <nmatsakis> eddyb: but why not just open a new bug?
[14:10:50] <huon> eddyb: oh, i see
[14:11:00] <eddyb> because... I searched for an issue first and that seemed like what should track this but got closed prematurely
[14:11:05] <eddyb> and maybe there's even more
[14:11:07] <nmatsakis> ok
[14:11:13] <eddyb> nmatsakis: pretty sure it's what statics use
[14:12:44] *** Quits: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP) (Ping timeout)
[14:13:08] <eddyb> so much dead code...
[14:13:24] *** Quits: klutzy (th@BA61F396.8E859986.ECA1BB11.IP) (Ping timeout)
[14:13:35] <eddyb> I should modify the dead code pass so it can find things that I manually look for
[14:16:22] *** Joins: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP)
[14:16:49] *** Joins: klutzy (th@BA61F396.8E859986.ECA1BB11.IP)
[14:19:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:21:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:51:40] <cmr> eddyb: compile librustc as an executable :)
[14:52:21] <eddyb> cmr: that wouldn't work because it doesn't have a main calling into... hmm maybe we should do that
[14:52:39] <cmr> eddyb: look at src/driver/driver.rs
[14:52:43] <cmr> it's not complex.
[14:52:44] <eddyb> basically copy the rustc main into librustc under #[cfg(executable)]
[14:52:59] <eddyb> but you need to keep that out of sync
[14:53:12] <eddyb> maybe we should have a default_main? and rustc just calls that?
[14:53:25] <cmr> acrichto: r? https://github.com/mozilla/rust/pull/12526
[14:53:28] <cmr> acrichto: it passed try-bsd
[14:53:35] <cmr> (and try-linux)
[14:53:55] <cmr> acrichto: might want to wait for the mac slaves to come back online though
[14:54:03] <cmr> I'm still wary of the readdir hack
[14:54:21] <cmr> acrichto: (we don't have a try config that would catch it breaking)
[14:55:04] <darnuria> Just by curiosity why rust doesn't support tail-rec?
[14:55:15] <cmr> darnuria: it does, it's just not a guaranteed optimization.
[14:55:29] <eddyb> it's that practical to guarantee TCO
[14:55:31] <cmr> darnuria: in short, because it'd make all other code too slow.
[14:55:34] <eddyb> *it's not that
[14:55:45] <eddyb> you need TCO when you only have recursion
[14:55:53] <eddyb> (Haskell?)
[14:56:08] <darnuria> Ok I understand. :)
[14:56:19] <pnkfelix> also
[14:56:26] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[14:56:26] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/wTj6yg
[14:56:26] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[14:56:29] <pnkfelix> the presence of destructors
[14:56:49] <pnkfelix> makes the TCO not apply in many cases where you would expect it if you were used to a language like Haskell/Scheme/etc
[14:57:36] <pnkfelix> (that was the reason that made me buy into the standard party line here)
[14:57:49] <pnkfelix> (let me go find the original email from graydon on it, I remember that being pretty cogent)
[14:57:54] <eddyb> those rely on GC, so yeah
[14:58:24] <pnkfelix> link: https://mail.mozilla.org/pipermail/rust-dev/2013-April/003557.html
[14:58:27] <pnkfelix> darnuria: ^
[14:59:16] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[15:00:07] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[15:00:11] <darnuria> Nice thanks I see. :)
[15:01:21] <eddyb> so, no reopening https://github.com/mozilla/rust/issues/5172#issuecomment-37649621?
[15:01:32] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[15:01:32] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/Wtl0Cw
[15:01:33] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[15:01:45] <darnuria> eddyb: I asked just for curiosity.
[15:01:59] <eddyb> darnuria: issue unrelated to your question
[15:02:14] <eddyb> unless you were replaying to something else
[15:02:17] <eddyb> cmr, huon: ^^
[15:02:38] <darnuria> sorry I confused with this : 
[15:02:40] <darnuria> https://github.com/mozilla/rust/issues/217
[15:04:08] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[15:04:29] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:06:19] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[15:19:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:21:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:22:51] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Quit: leaving)
[15:26:59] <eddyb> huon: can you convert ($($x:expr),*) to [$($x),*] in macros?
[15:27:04] <eddyb> so I know whether I should bother
[15:27:44] <kimundi> eddyb: that ought to work
[15:27:59] *** Joins: canhtak (canhtak@moz-9F5D2CD3.wl.t.ulaval.ca)
[15:28:02] <eddyb> I'm asking because I know there are corner cases
[15:28:54] <kimundi> rusti: macro_rules! test_(($($x:expr),*) => ([$($x),*])) test_!(1u, 2u, 3u)
[15:28:55] -rusti- pastebinned 8 lines of output: http://sprunge.us/OPWE
[15:29:12] <kimundi> rusti: macro_rules! test_(($($x:expr),*) => ([$($x),*])) (test_!(1u, 2u, 3u)).to_owned()
[15:29:14] -rusti- [1, 2, 3]
[15:29:41] <eddyb> kimundi: thanks :D
[15:32:42] <eddyb> rusti: macro_rules! test_(($x:expr, $y:expr) => (format!("{} {}", stringify!($x), $y)) test_!(foo.bar.baz, "boo")
[15:32:42] -rusti- pastebinned 7 lines of output: http://sprunge.us/ZNNj
[15:32:53] <eddyb> rusti: macro_rules! test_(($x:expr, $y:expr) => (format!("{} {}", stringify!($x), $y))) test_!(foo.bar.baz, "boo")
[15:32:54] -rusti- foo.bar.baz boo
[15:32:57] <eddyb> sweet :D
[15:38:38] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[15:44:02] <eddyb> rusti: macro_rules! struct(($x:expr, $y:expr) => (format!("{} {}", stringify!($x), $y))) struct!(foo.bar.baz, "boo")
[15:44:03] -rusti- pastebinned 7 lines of output: http://sprunge.us/ccZL
[15:44:14] <eddyb> why don't we allow that?
[15:44:34] <eddyb> rusti: macro_rules! struct(($x:expr, $y:expr) => (format!("{} {}", stringify!($x), $y))) mk_struct!{foo.bar.baz, "boo"}
[15:44:34] -rusti- <anon>:11:22: 11:28 error: found `struct` in ident position
[15:44:35] -rusti- <anon>:11         macro_rules! struct(($x:expr, $y:expr) => (format!("{} {}", stringify!($x), $y))) mk_struct!{foo.bar.baz, "boo"}
[15:44:35] -rusti-                                ^~~~~~
[15:44:35] -rusti- error: aborting due to previous error
[15:44:35] -rusti- application terminated with error code 101
[15:44:40] <eddyb> rusti: macro_rules! mk_struct(($x:expr, $y:expr) => (format!("{} {}", stringify!($x), $y))) mk_struct!{foo.bar.baz, "boo"}
[15:44:41] -rusti- foo.bar.baz boo
[15:49:33] <eddyb> ifn!(llvm.memset.p0i8.i32([i8p, t_i8, t_i32, t_i32, i1) -> void);
[15:49:43] <eddyb> wait, no, extra [
[15:49:46] <eddyb> ifn!(llvm.memset.p0i8.i32(i8p, t_i8, t_i32, t_i32, i1) -> void);
[15:49:53] <eddyb> that looks much nicer than what was there previously
[15:52:58] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[15:52:58] <eddyb> ifn!(llvm.smul.with.overflow.i8(t_i8, t_i8) -> mk_struct!{t_i8, i1});
[15:56:24] <eddyb> error: no rules expected the token `->` // is it that broken?
[15:56:35] <eddyb> rusti: macro_rules! mk_struct(($x:expr -> $y:expr) => (format!("{} {}", stringify!($x), $y))) mk_struct!{foo.bar.baz -> "boo"}
[15:56:35] -rusti- foo.bar.baz boo
[15:56:43] <eddyb> hmm...
[15:56:49] <eddyb> oh I see
[16:00:46] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:06:57] *** Quits: glaebhoer1 (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Ping timeout)
[16:08:08] *** kimundi is now known as zz_kimundi
[16:08:12] *** Joins: glaebhoer1 (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[16:09:38] <doomlord_> what is 'LanguageItems' in the compiler source
[16:09:43] *** zz_kimundi is now known as kimundi
[16:10:42] <cmr> doomlord_: it's a map for stuff like #[lang="exchange_malloc"] etc
[16:11:12] <cmr> (essentially)
[16:11:36] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[16:11:36] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/G8fpWg
[16:11:36] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[16:11:46] <doomlord_> ok; do you know off hand where i can iterate project wide 'Idents' (symbol defintions) from resolve.rs: Resolver methods
[16:11:55] <doomlord_> i see it has a 'Session'
[16:12:09] <cmr> well...
[16:12:15] <cmr> I think you'd need an AST visitor.
[16:12:56] <cmr> I don't think resolve actually keeps around every ident, not 100% sure how it works.
[16:13:21] <cmr> but resolve is 5k loc of magic, to me.
[16:13:29] <doomlord_> yeah i'm getting the impression its got local information r.e. the current 'Module' .. but, how does it actually get the other Modules..
[16:13:39] <doomlord_> (at some point it must fix them up to search them)
[16:14:02] <cmr> pcwalton is likely the only person alive who understands the mysteries of resolve.
[16:14:09] <doomlord_> heh bus factor
[16:14:31] <cmr> yeah.
[16:14:47] <cmr> it's best not to linger on that thought :)
[16:15:06] <doomlord_> ok, Module has a 'ParentLink', so i assume i can get to the 'crate root' at least..
[16:15:49] *** kimundi is now known as zz_kimundi
[16:15:51] <doomlord_> right it does look like 'Modules' have enough information to scan everything, but...
[16:16:36] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[16:16:36] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/mVFVOg
[16:16:36] <ghrust> 13rust/06auto 14e9bd121 15Ted Horst: fix a test that was missed in the chan/port renaming (PR #12815)
[16:16:36] <ghrust> 13rust/06auto 14e99d523 15bors: auto merge of #12880 : tedhorst/rust/master, r=alexcrichton...
[16:16:37] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[16:16:38] <doomlord_> Module itself only seems to describe the Modules graph..
[16:16:40] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[16:16:40] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/kl1ddg
[16:16:40] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[16:17:31] *** zz_kimundi is now known as kimundi
[16:18:55] <doomlord_> its possible 'ImportResolution' is it, but that name looks like it might just refer to 'use ...' stuff
[16:19:05] <eddyb> error: aborting due to 89 previous errors
[16:19:32] *** kimundi is now known as zz_kimundi
[16:19:42] <eddyb> cmr: I don't think I'll be able to finish the latest commit in the @ PR :(
[16:20:11] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[16:20:11] *** ChanServ sets mode: +ao dherman dherman
[16:21:14] *** zz_kimundi is now known as kimundi
[16:21:30] <doomlord_> ok resolver has a 'DefMap', perhaps that is accumulating everything..
[16:21:59] <cmr> doomlord_: that maps nodeid to definition, iirc.
[16:22:07] *** Joins: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net)
[16:23:20] <eddyb> for things like ExprPath
[16:23:39] <doomlord_> iterating the whole ast would do it i think, if i can find that..
[16:24:13] <doomlord_> am i right in thinking the AST had to be built before you can 'resolve'
[16:25:03] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[16:26:02] <doomlord_> so DefMap gets me .. NodeIds-> DefId{ crate,nodeid} or something
[16:27:17] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (No route to host)
[16:27:53] <doomlord_> the ast is a tree of ast::Expr_ i guess,
[16:29:15] <doomlord_> or rather ast::Item_  (in turn containing Exprs...)
[16:30:08] <cmr> acrichto: thanks
[16:30:22] <acrichto> cmr: yeah I figured we can fix the breakage on OSX when we get there
[16:32:06] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[16:32:52] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:40:02] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[16:45:36] <doomlord_> ok it seems at the exact point i would want it, the AST isn't available, its a param not propogated inward ; 
[16:46:16] <doomlord_> I would have to cache it in 'Resolver' ... but i'd worry there's a good reason its not available there already..
[16:47:05] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[16:50:26] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (No route to host)
[16:54:07] *** Quits: Kxepal832 (Miranda@moz-7AD032F4.pppoe.mtu-net.ru) (Ping timeout)
[16:56:01] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:58:46] *** Joins: Kxepal (Miranda@moz-6EBC5369.pppoe.mtu-net.ru)
[17:00:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:04:06] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[17:07:42] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[17:17:23] *** jdm is now known as jdm|meeting
[17:23:45] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[17:26:34] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[17:26:34] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/mVFVOg
[17:26:34] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[17:30:42] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:31:32] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[17:31:32] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/Nbf32g
[17:31:32] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[17:31:34] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[17:31:34] <ghrust> [13rust] 15bors pushed 7 new commits to 06auto: 02http://git.io/LcFW_w
[17:31:34] <ghrust> 13rust/06auto 14ea2d8c1 15Brian Anderson: Remove check-fast. Closes #4193, #8844, #6330, #7416
[17:31:34] <ghrust> 13rust/06auto 1433afafe 15Brian Anderson: test: Ignore compile-fail/issue-5806.rs...
[17:31:34] <ghrust> 13rust/06auto 146b8b25d 15Brian Anderson: mk: Pass the name of the make command to maketest.py...
[17:31:36] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[17:47:00] *** jdm|meeting is now known as jdm
[17:58:38] *** Quits: esummers____ (esummers@moz-3B015C90.wi.res.rr.com) (Client exited)
[17:59:55] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[18:01:10] <doomlord_> managed to get a krate visitor where i needed it :) now how to find item paths for comparison..
[18:02:35] <kimundi> acrichto: Is the office still moving? Cause I really could use a snapshot right now. :)
[18:03:04] <acrichto> kimundi: yeah we're not gonna get a snapshot for awhile
[18:03:10] <acrichto> sadly :(
[18:04:23] <kimundi> define a while
[18:04:44] <acrichto> wednesday maybe?
[18:04:49] <acrichto> depeneds when all the bots come back online
[18:04:53] <kimundi> hm...
[18:04:54] <acrichto> brson may know more about the timeline
[18:05:06] * kimundi needs to look up what day today is
[18:11:19] *** Joins: dherman_ (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[18:11:31] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Ping timeout)
[18:11:32] *** dherman_ is now known as dherman
[18:26:30] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[18:26:30] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14d8d827d to 14e99d523: 02http://git.io/N3iJvQ
[18:26:30] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[18:26:31] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[18:26:31] <ghrust> [13rust] 15bors pushed 6 new commits to 06auto: 02http://git.io/l11YYg
[18:26:31] <ghrust> 13rust/06auto 143311fd8 15Corey Richardson: Remove libc from std...
[18:26:31] <ghrust> 13rust/06auto 14854a01b 15Corey Richardson: fix fallout from std::libc separation
[18:26:31] <ghrust> 13rust/06auto 1448a9057 15Corey Richardson: rt: remove opendir/readdir hack
[18:26:33] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[18:28:55] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[18:30:30] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[18:31:15] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:31:15] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[18:36:34] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[18:36:34] <ghrust> [13rust] 15bors 04force-pushed 06auto from 142a78ce7 to 14e99d523: 02http://git.io/N3iJvQ
[18:36:34] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[18:36:36] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[18:36:36] <ghrust> [13rust] 15bors pushed 6 new commits to 06auto: 02https://github.com/mozilla/rust/compare/e99d523707c8...79ef06ae1059
[18:36:36] <ghrust> 13rust/06auto 14c77a314 15Alex Crichton: log: Introduce liblog, the old std::logging...
[18:36:36] <ghrust> 13rust/06auto 147944430 15Alex Crichton: rustc: Remove compiler support for __log_level()...
[18:36:36] <ghrust> 13rust/06auto 14509ec16 15Alex Crichton: rustc: Tweak where -lmorestack is on link commands...
[18:36:38] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[18:52:36] *** Joins: vadimcn (chatzilla@moz-E841EA3A.hsd1.wa.comcast.net)
[18:54:22] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[18:54:22] *** ChanServ sets mode: +o tjc
[18:56:02] *** Joins: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP)
[19:00:29] <doomlord_> is it possible to get the ident of a Mod in the ast visitor
[19:00:39] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:04:19] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:06:30] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[19:06:30] <ghrust> [13rust] 15bors pushed 6 new commits to 06auto: 02http://git.io/kwp0gg
[19:06:30] <ghrust> 13rust/06auto 140079bd0 15Alex Crichton: log: Introduce liblog, the old std::logging...
[19:06:30] <ghrust> 13rust/06auto 14b99bc3e 15Alex Crichton: rustc: Remove compiler support for __log_level()...
[19:06:31] <ghrust> 13rust/06auto 1457f0a2f 15Alex Crichton: rustc: Tweak where -lmorestack is on link commands...
[19:06:33] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[19:11:31] *** glaebhoer1 is now known as glaebhoerl
[19:12:11] <sfackler> doomlord_: it's attached to the Item its wrapped in
[19:13:21] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[19:13:21] *** ChanServ sets mode: +ao pcwalton pcwalton
[19:13:36] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[19:17:09] <doomlord_> thanks.
[19:21:31] <doomlord_> (ok the visitor gets it ..)
[19:25:52] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[19:27:39] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[19:28:05] <edwardw> What's the best to debug an assertion failure in the translation pass? Saw some cryptic LLVM assertion failures
[19:28:57] <eddyb> edwardw: RUST_LOG=rustc::middle::trans
[19:29:04] <edwardw> eddyb: ty
[19:29:08] <eddyb> figure out where it is and guess what triggers it
[19:29:16] <edwardw> k
[19:29:17] <eddyb> it's not easy
[19:29:40] <edwardw> this is actually the second time it happened to me
[19:29:41] <eddyb> (I've had to debug dozens when I was messing with trans and self)
[19:29:49] <edwardw> I forgot how I did the first time :)
[19:30:03] <eddyb> I was actually just thinking of machine translating LLVM to Rust
[19:30:57] <eddyb> because that's our biggest non-Rust chunk. if Rust wasn't a revolution before that, it sure would be after (and maybe write an entire OS in it)
[19:31:11] <eddyb> in any case, I found a bug related to P
[19:31:26] <edwardw> P? the @?
[19:31:28] <eddyb> rusti: let mut x = 0; (&mut x, &mut x);
[19:31:29] -rusti- ()
[19:31:39] <eddyb> *sigh*
[19:31:45] <eddyb> rusti: let mut x = 0; let y = (&mut x, &mut x);
[19:31:46] -rusti- pastebinned 13 lines of output: http://sprunge.us/GWAC
[19:32:12] <eddyb> rusti: let mut x = 0; let y = (({&mut x}), ({&mut x}));
[19:32:13] -rusti- pastebinned 13 lines of output: http://sprunge.us/SKHN
[19:32:15] <edwardw> interesting
[19:32:20] <eddyb> that's not the bug ;)
[19:32:45] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:33:08] <eddyb> rusti: macro_rules! dup(($x:expr) => (($x, $x))) let mut x = 0; let y = dup!(({&mut x}));
[19:33:09] -rusti- pastebinned 17 lines of output: http://sprunge.us/WUYS
[19:33:33] <eddyb> hmpf, maybe that's not the best example
[19:33:44] <eddyb> (borrowck is smarter than this)
[19:33:56] <edwardw> you bet
[19:34:10] <eddyb> no, I mean, it doesn't care about identity. which is rare
[19:35:22] <edwardw> LLVM is really verbose, isn't it
[19:35:35] *** Quits: [o__o] (~o__o@604A2740.DB688352.F4ADE383.IP) (Ping timeout)
[19:36:04] <edwardw> the debug message, that is
[19:36:27] <eddyb> rusti: macro_rules! dup(($x:expr) => ({let foo: ~[int] = $x; let bar: ~[uint] = $x;))) dup!(({Some(0).iter().collect()}));
[19:36:27] -rusti- pastebinned 7 lines of output: http://sprunge.us/Dafi
[19:36:43] <eddyb> rusti: macro_rules! dup(($x:expr) => ({let foo: ~[int] = $x; let bar: ~[uint] = $x;}))) dup!(({Some(0).iter().collect()}));
[19:36:43] -rusti- pastebinned 7 lines of output: http://sprunge.us/eQRV
[19:37:05] <eddyb> rusti: macro_rules! dup(($x:expr) => ({let foo: ~[int] = $x; let bar: ~[uint] = $x;})) dup!(({Some(0).iter().collect()}));
[19:37:05] -rusti- pastebinned 22 lines of output: http://sprunge.us/EfaI
[19:37:31] <eddyb> *sigh*
[19:37:34] <eddyb> rusti: macro_rules! dup(($x:expr) => ({let foo: ~[int] = $x; let bar: ~[uint] = $x;})) dup!(({Some(0).move_iter().collect()}));
[19:37:34] -rusti- pastebinned 21 lines of output: http://sprunge.us/BRTL
[19:37:59] <eddyb> nonono. how does that work?
[19:38:22] <eddyb> /facepalm: folding
[19:39:38] <eddyb> cmr, huon, nmatsakis: so made myself look like a fool. we do have an issue with macro expansion (reusing non-terminals - i.e. $x - instead of deep cloning them), but the first folding pass after that hides the issue
[19:39:46] <eddyb> *so I
[19:40:14] <strcat> acrichto: do you know the reason for not marking static mut as unnamed_addr? just because it's potentially useful to be able to use the addr?
[19:40:35] <eddyb> cross-crate duplication
[19:41:02] <eddyb> or is unnamed_addr not related to that?
[19:41:14] <strcat> unnamed_addr says the address itself isn't important
[19:41:40] * flaper87 didn't know we were that close to completely removing libextra
[19:41:40] <strcat> it can't merge them if you actually use them as two different globals
[19:41:45] <sfackler> Aren't task local data keys addresses of statics?
[19:41:53] <strcat> yes but they could use type_id
[19:41:54] <acrichto> strcat: static mut is specifically *not* unnamed_addr because if you have two mutable things they should probably not get coalesced
[19:42:07] <strcat> acrichto: it won't coalesce simply because they are unnamed_addr
[19:42:18] <acrichto> then it would barely coalesce anything?
[19:43:07] <strcat> acrichto: well it depends on the program - it might be able to optimize out the reads/writes to them, but it still uses it as the original read location
[19:43:10] * strcat shrugs
[19:43:25] *** Joins: [o__o] (~o__o@604A2740.DB688352.F4ADE383.IP)
[19:43:56] <eddyb> new RFC idea (I'm accumulating these :/): `use crate_name for some_type;` to pick one of two (or more) conflicting orphan implementations
[19:44:09] <eddyb> well, one of them isn't going to be orphan, but you get the idea
[19:44:30] <strcat> acrichto: it's not really important, just wondering if taking the addr is viewed as useful
[19:44:47] <acrichto> that's how atomics/mutexes/once primitives all work
[19:44:50] <acrichto> by taking the address
[19:44:55] <acrichto> also how TLS works
[19:44:58] <strcat> acrichto: taking the address is fine
[19:45:15] <strcat> unnamed_addr won't change program behaviour if you don't treat the address location as significant
[19:45:17] <eddyb> are there no xcrate issues with this?
[19:45:25] <strcat> it won't merge two variables you take addresses to and read/write to
[19:45:27] <strcat> eddyb: no
[19:45:38] <eddyb> that feels suspiciously easy
[19:45:45] <strcat> acrichto: TLS would need to define a type and use type_id
[19:45:46] <eddyb> I've been bitten by smaller things
[19:46:07] <strcat> eddyb: any xcrate issues are already there with or without unnamed_addr
[19:46:29] <eddyb> I like TypeId more, because it's a hash and not a kinda-deterministic address
[19:46:34] <strcat> LLVM isn't allowed to break anything relying on comparisons of addresses
[19:46:46] <eddyb> so it should work better in a HashMap
[19:46:56] <eddyb> (with a noop hash)
[19:47:39] <eddyb> strcat: oh, right, I remember now
[19:48:09] <eddyb> strcat: we instantiate statics in each crate instead of importing the original when the address is not significant
[19:48:36] <strcat> acrichto: anyway really not very important, just don't want anyone to think tagging to globals as unnamed_addr would merge them if you were actually writing/reading from both
[19:48:39] <eddyb> strcat: but I think that's based on Rust attributes so it doesn't have to coincide with unnamed_addr
[19:48:46] <strcat> I also doubt it would merge a significant amount
[19:49:33] <eddyb> in any case, the earlier issue... *sigh* why did we remove DeepClone?
[19:49:39] <eddyb> I kinda need it big time now
[19:50:20] <eddyb> I'll have to make Clone do this, and have something like ".lend()" for refcounting
[19:50:37] <eddyb> at least it's a good reason to keep away from .clone()
[19:51:05] <eddyb> (eventually P<T> will only have a bit of a refcount or stop being an Rc completely)
[19:58:56] <eddyb> acrichto: I don't realy like how you used gensym :(
[19:59:05] <eddyb> acrichto: pretty sure that breaks cross-crate
[19:59:06] <strcat> Clone shouldn't do a deep clone
[19:59:09] <strcat> it's not how it's defined
[19:59:20] <eddyb> yeah but I need something that works on the entire AST
[19:59:23] <strcat> it's the minimal work to go &T -> T, doing otherwise is violating the rules we came up with
[19:59:27] <strcat> eddyb: well it shouldn't use Clone
[19:59:36] <eddyb> go give us back DeepClone
[19:59:52] <strcat> if you actually *need* it, then add it back
[20:00:10] <acrichto> eddyb: example?
[20:00:13] <strcat> I didn't really want it to be removed, but I'll admit that it wasn't designed in a way where it can handle Gc<T>
[20:00:16] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[20:00:26] <eddyb> acrichto: gensym is a fragile thing I kinda wanted to get rid of
[20:00:26] <strcat> because Gc<T> needs you to keep a dictionary of where you've visited
[20:00:34] <strcat> and that makes it very hard to do it properly in rust
[20:00:56] <strcat> you could teach them all to pass through a map
[20:00:57] <eddyb> acrichto: and the result is not deterministic
[20:01:06] <strcat> hm
[20:01:08] <acrichto> eddyb: indeed, but being able to demangle symbols is also something I want, and duplicating the same symbol and relying on llvm to disambiguate is unacceptable
[20:01:30] <acrichto> eddyb: no, it's deterministic *now*, it wasn't deterministic before
[20:01:30] <eddyb> why did you not use the NodeId thing?
[20:01:36] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[20:01:36] <ghrust> [13rust] 15bors pushed 6 new commits to 06auto: 02http://git.io/efzmNg
[20:01:36] <ghrust> 13rust/06auto 140079bd0 15Alex Crichton: log: Introduce liblog, the old std::logging...
[20:01:36] <ghrust> 13rust/06auto 14b99bc3e 15Alex Crichton: rustc: Remove compiler support for __log_level()...
[20:01:36] <ghrust> 13rust/06auto 1457f0a2f 15Alex Crichton: rustc: Tweak where -lmorestack is on link commands...
[20:01:38] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[20:01:42] <eddyb> gensym isn't deterministic
[20:01:48] <acrichto> this is what it used to be
[20:01:56] <strcat> eddyb: we could add back DeepClone but modified to be sane
[20:02:07] <eddyb> strcat: with a context?
[20:02:13] <eddyb> acrichto: I know the bug, I have caused it
[20:02:16] <strcat> yes some kind of context
[20:02:26] <strcat> it's annoying though
[20:02:28] <strcat> only Gc<T> needs it
[20:03:05] <strcat> making (strong) cycles of Rc is already wrong so it's okay for it to infinitely recurse
[20:03:11] <eddyb> acrichto: IMO gensym is abused and it only creates garbage in the token interner (though dropping that didn't seem to have much effect on the memory, so I don't know)
[20:03:34] *** Joins: bvssvni (Mibbit@moz-E289BB64.bb.online.no)
[20:03:36] <acrichto> eddyb: patches welcome
[20:03:40] <eddyb> acrichto: the fix I've used for statics isn't applied to closures because they go through a different path
[20:03:52] <acrichto> like I'm not disagreeing that it's not a great solution, but it's better than where we were at
[20:04:15] <eddyb> yeah I know if I wasn't blocked on the Deref stuff and now shoveling @, I would've fixed it myself
[20:04:36] <strcat> eddyb: the context would be Option<&mut HashSet<uint>>
[20:04:47] <eddyb> strcat: why not generic over the context?
[20:04:52] <eddyb> for future proof
[20:05:13] <strcat> I guess...
[20:05:22] <strcat> it's not future proof
[20:05:33] <strcat> it requires the caller to pass a context if they care about not infinite recursing on Gc<T> cycles
[20:05:47] <strcat> if another form of cycle becomes possible (in correct code), then it will all break
[20:06:01] <strcat> so I don't really see a benefit in making it generic
[20:06:21] <eddyb> deriving and other implementations should be generic, while Gc only implements DeepClone<GcDeepCloneContext>
[20:06:35] <strcat> so why does it need to be generic?
[20:06:35] <eddyb> or I don't know
[20:06:44] <strcat> if Gc only accepts that, it's barely generic
[20:06:45] <rdgawdzi> So say I build rust using make. Is the stage2 binary supposed to have a different version from the original make I did when I forked it? It should, right?
[20:06:53] <rdgawdzi> Is there any reason for a stage2 binary not to be updated if a make build was successful? I am working on the libsyntax portion of rustc.
[20:07:11] <eddyb> don't bother with stage2, I'd say
[20:07:16] <eddyb> make rustc-stage1 is where it's at
[20:07:20] <strcat> eddyb: meh, I don't really want to add it back yet
[20:07:26] <strcat> until we know a good way of doing it
[20:07:34] <eddyb> right, that sounds reasonable
[20:07:49] <strcat> we lost useful functionality for Rc<T> but since it didn't work for Gc<T> that wasn't T: Send it was problematic
[20:08:07] <eddyb> acrichto: gensym is there to give you an unique Name with the same string, that's why I'm a little bugged by this
[20:08:23] <eddyb> acrichto: I like how you have pretty much the same demangling set as rustfilt ;)
[20:08:32] <eddyb> acrichto: but you used RP twice :P
[20:08:38] <rdgawdzi> eddyb: So then the new binaries would be in the stage1 bin right?\
[20:08:40] *** Joins: huseby (huseby@moz-9D57B0ED.dhcp.embarqhsd.net)
[20:08:42] <eddyb> rdgawdzi: yes
[20:08:53] <eddyb> acrichto: the problem originates in mangling, ofc
[20:09:59] <rdgawdzi> eddyb: Alright eddy, I will try that. I had this strange problem for the last few days where I could not update my binaries, even after a new fork, or make clean, or a ./configure. Hopefully this works.
[20:10:09] *** Quits: edwardw (edwardw@655F78EA.BF27AFA4.B9C6B12A.IP) (Quit: Leaving...)
[20:10:34] <eddyb> acrichto: I'm wondering if you need closures to keep their symbol names cross-crate
[20:11:03] <acrichto> eddyb: not that I know of
[20:11:25] <eddyb> so it's simpler than statics. but still, NodeId > pushing *twice* to the interner
[20:12:02] <eddyb> (and leaking that string even if there is something identical in the interner)
[20:12:50] <eddyb> ah, yeah, that's why I wanted to remove gensym, nothing needs RcStr reference inequality
[20:13:19] <eddyb> but using reference equality everywhere should help
[20:14:57] <strcat> rusti: use std::vec_ng::Vec; range(0, 5).collect::<Vec<_>>()
[20:14:58] -rusti- <anon>:11:57: 11:58 error: expected type, found token UNDERSCORE
[20:14:58] -rusti- <anon>:11         use std::vec_ng::Vec; range(0, 5).collect::<Vec<_>>()
[20:14:59] -rusti-                                                                   ^
[20:14:59] -rusti- application terminated with error code 101
[20:15:36] <eddyb> rusti: ::std::rc::Rc::new(40).add(&2)
[20:15:37] -rusti- pastebinned 35 lines of output: http://sprunge.us/cMHe
[20:15:43] <eddyb> hmpf
[20:15:46] <eddyb> rusti: ::std::rc::Rc::new(40u).add(&2)
[20:15:48] -rusti- 42
[20:15:55] <eddyb> strcat: >:D<
[20:16:26] <strcat> why ::std
[20:19:37] <flaper87> one more step forward. Next step, get rid of the `Freeze` restriction on statics
[20:20:41] <eddyb> strcat: I've had issues without it
[20:20:42] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[20:21:37] <strcat> goodbye to_owned_vec
[20:21:40] <strcat> it was nice hating you
[20:21:56] <strcat> it has no tests ;)
[20:22:01] *** Quits: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com) (Input/output error)
[20:22:08] <strcat> well it's trivial anyway
[20:22:18] *** Joins: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com)
[20:22:19] *** ChanServ sets mode: +ao nmatsakis nmatsakis
[20:22:50] * strcat sends git ls-files | xargs sed -i ... off to fix them
[20:22:50] <eddyb> strcat: :D:D:D
[20:22:57] <eddyb> this is spring cleanup
[20:23:21] <eddyb> strcat: we don't have a snapshot yet, do we?
[20:23:32] <strcat> that's easy enough
[20:23:32] <eddyb> Vec<_> ain't gonna work in the compiler
[20:23:38] *** Quits: jack (sid19593@moz-A42E5B7B.irccloud.com) (Ping timeout)
[20:24:11] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[20:24:11] <ghrust> [13rust] 15thestinger merged 06master into 06snap-stage3: 02http://git.io/W-H8Ow
[20:24:11] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[20:24:16] *** Quits: tedh_ (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[20:24:18] *** Quits: mrmonday (mrmonday@moz-C7DC1A73.lin.openzula.org) (Ping timeout)
[20:24:22] <strcat> now just wait 5 hours
[20:24:33] <strcat> since it's bound to fail once ;p
[20:24:35] *** Joins: mrmonday (mrmonday@moz-C7DC1A73.lin.openzula.org)
[20:24:43] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[20:24:47] <eddyb> strcat: are mac bots back online?
[20:24:57] *** Quits: Yurume (Yurume@A826BD81.8A0DEF81.38747683.IP) (Ping timeout)
[20:25:04] <strcat> meh, maybe not
[20:25:07] <eddyb> strcat: linux is also dead
[20:25:12] <eddyb> so good luck getting that :P
[20:25:15] * strcat shrugs
[20:25:23] <acrichto> strcat: cancelling the snap buids, the builders are offline and it'll just slow down the auto builds
[20:25:41] <strcat> ah
[20:25:47] *** Quits: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com) (Input/output error)
[20:25:52] *** Joins: nmatsaki1 (nmatsakis@moz-DB4A9C19.scl3.mozilla.com)
[20:26:02] <eddyb> nmatsaki1: you've cloned!!!
[20:26:15] <eddyb> now if only the original didn't die
[20:26:59] <eddyb> (there must be something wrong here, nmatsakis isn't supposed to ever part/rejoin)
[20:27:09] *** Quits: vadimcn (chatzilla@moz-E841EA3A.hsd1.wa.comcast.net) (Ping timeout)
[20:27:21] *** Joins: jack (sid19593@moz-A42E5B7B.irccloud.com)
[20:27:56] *** Joins: vadimcn (chatzilla@moz-E841EA3A.hsd1.wa.comcast.net)
[20:28:09] *** Joins: Yurume (Yurume@A826BD81.8A0DEF81.38747683.IP)
[20:28:16] <eddyb> kmc: ^^ about your comment in #rust
[20:28:52] <eddyb> someone at mozcorp, please blow into those network cables to the IRC server. thanks
[20:30:20] <rdgawdzi> eddyb: So I did make rustc-stage1, which built successfully, but both stage1 and stage2 have the same versions -_-.
[20:30:34] <rdgawdzi> ./rustc 0.10-pre (4443fb3 2014-03-13 21:06:34 -0700)
[20:31:11] <eddyb> are you looking in the right place?
[20:31:23] <sfackler> rdgawdzi: they should have the same versions. THe version number is based off of HEAD
[20:31:37] <eddyb> if it said oxidize: ..../librustc, then it should have changed
[20:31:47] <eddyb> sfackler: the date seems to be in the past
[20:31:59] <eddyb> by a day or so
[20:32:35] <sfackler> it's the commit time of the HEAD commit
[20:32:39] <eddyb> rdgawdzi: what does ls -l ./x*/stage1/bin/rustc give you?
[20:32:48] <eddyb> sfackler: ohh that probably explains it
[20:33:48] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[20:33:48] *** ChanServ sets mode: +o tjc
[20:37:13] <rdgawdzi> eddyb: -rwxr-xr-x 1 rdgawdzi rdgawdzi 11304 Mar 14 16:22 rustc
[20:37:29] <eddyb> yeah it's fine, see what sfackler said
[20:38:00] <rdgawdzi> sfackler: So then it's actually built?
[20:38:10] <rdgawdzi> and --version is really irrelevant?
[20:38:34] <sfackler> yep
[20:39:57] <rdgawdzi> sfackler: Thanks, makes sense :P
[20:40:40] <rdgawdzi> Another question....say I do some debug!'s...I know the output will be created during tests....but what if I want the debug output to occur when I simply do rustc file.rs?
[20:41:15] <sfackler> you'll need to use the RUST_LOG environment variable
[20:41:25] <sfackler> RUST_LOG=my::module::path=debug rustc file.rs
[20:41:37] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[20:41:37] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14ce175c3 to 14e99d523: 02http://git.io/N3iJvQ
[20:41:37] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[20:41:37] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[20:41:37] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/XBu82w
[20:41:37] <ghrust> 13rust/06auto 144e1c215 15Daniel Micay: cmp: switch `min` and `max` to `TotalOrd`...
[20:41:37] <ghrust> 13rust/06auto 1442fc32f 15bors: auto merge of #12869 : thestinger/rust/cmp, r=brson...
[20:41:38] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[20:46:19] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[20:51:51] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[20:51:51] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:52:37] <huseby> does rustc use segmented stacks or not?
[20:52:43] <huseby> I saw this thread: http://mzl.la/1kRP9ob
[20:52:48] <huseby> that suggests that it isn't used
[20:53:02] <huseby> but I'm bootstrapping for i386-unknown-openbsd on a FreeBSD machine
[20:53:33] <eddyb> it uses the LLVM feature to do stack bounds checking
[20:53:34] <huseby> and it got to stage2 compiling libstd/lib.rs when LLVM died with "ERROR: Segmented stacks not supported on this platform."
[20:58:59] *** Quits: intuxicated (intuxicate@5BA9DB47.F2F0EDE4.DA0107E2.IP) (Quit: Leaving)
[21:13:05] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[21:13:05] *** ChanServ sets mode: +qo brson brson
[21:23:50] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Quit: dherman)
[21:37:03] <doomlord_> is it possible to iterate the AST's of extern (library) crates from Session_ & 'CStore' 
[21:37:17] <eddyb> what info do you want?
[21:37:33] <doomlord_> i'd like to get the full paths of item definitions
[21:37:34] <eddyb> there's bits and pieces
[21:37:34] <flaper87> acrichto: one of the idea was to make Atomics use Unsafe too, right? 
[21:37:43] <eddyb> doomlord_: use ast_map for that
[21:39:04] <doomlord_> i see ast_map::Map  ..  MapEntry , looks promising,
[21:39:15] <eddyb> *sigh* not that
[21:39:19] <eddyb> doomlord_: the paths iterator
[21:39:19] <doomlord_> heh
[21:39:40] <eddyb> you start with a node or an inlined item, and you can get its full path
[21:39:59] <doomlord_> in particular, i dont have the node.
[21:40:08] <eddyb> doomlord_: not sure what exactly you need though
[21:40:12] <acrichto> flaper87: yes, but that may not work quite yet
[21:40:16] <eddyb> what you have and what you need, basically
[21:40:20] <flaper87> acrichto: indeed it doesn't :D
[21:40:20] <acrichto> flaper87: they need static constructors, which Unsafe doesn't provide :(
[21:40:33] <flaper87> acrichto: no wait, so, Unsafe provides a static ctor now
[21:40:37] <doomlord_> the idea is, given an incorrect fragment of a path, find suggestions
[21:40:38] <flaper87> I talked about this with niko
[21:40:47] <flaper87> and we agreed that the best thing to do was to provide one
[21:40:59] <acrichto> how?
[21:41:08] <doomlord_> so basically i need to iterate nodes and check how close they match (give them a score , based on the current scope , how much is matched already..)
[21:41:12] <eddyb> by having it visible
[21:41:20] <eddyb> doomlord_: oh dear
[21:41:28] <flaper87> acrichto: I meant, to allow static initialization (making the fields public, basically)
[21:41:30] <eddyb> heuristic errors...
[21:41:35] <flaper87> acrichto: however, we've another issue
[21:41:37] <acrichto> flaper87: that seems very bad
[21:41:41] <doomlord_> its' for a "did you mean ..." error message - i have it working for the local crate ok (minus the tweak of scoring relative to current scope..)
[21:41:53] <eddyb> flaper87, acrichto: obviously, defined Unsafe and atomics in the same module
[21:41:55] <doomlord_> http://www.reddit.com/r/rust/comments/20fi8h/1st_attempt_did_you_mean_module_path_searching/
[21:41:57] <eddyb> *define
[21:42:18] <acrichto> flaper87: hm, maybe it's not that bad actually
[21:42:24] <flaper87> eddyb: you'll have the same issue for other statics in other places
[21:42:28] <acrichto> flaper87: if you  have &mut Unsafe<T> why shouldn't you be able to get &mut T?
[21:42:40] <acrichto> and if you have &Unsafe<T> you could only safely get &T
[21:42:42] <acrichto> if you could see the inner field
[21:43:16] <eddyb> doomlord_: there isn't anything total *that I know of*
[21:43:36] <eddyb> doomlord_: you'd have to look at metadata decoding and cross-crate resolution itself
[21:43:46] <flaper87> the other reasoning behind making the fields public is that if you're using `Unsafe<T>` you should probably know what you're doing and if you access those fields directly instead of using `get` then it's your fault
[21:43:52] <eddyb> doomlord_: I guess... resolve is as good as any place to start
[21:44:04] <flaper87> acrichto: not a very nice excuse but...
[21:44:17] <eddyb> I think acrichto has a point
[21:44:29] <acrichto> flaper87: I think I'm ok with having a pub field, in which case atomics should definitely use Unsafe<T>
[21:44:45] <doomlord_> heh . ok.
[21:44:58] <flaper87> acrichto: so, the other issue we have is that if we forbid taking the address from static items with unsafe interior then things like EXIT_STATUS.load(...) will fail
[21:45:00] <doomlord_> i've seen something called 'DefId's ... which are node id's in 'other crates'..   
[21:45:06] <flaper87> acrichto: FWIW, I already did it :P
[21:45:21] <acrichto> flaper87: we're only forbidding taking the adddress of static items, not 'static mut'?
[21:46:25] <flaper87> acrichto: that's where I wanted to get. As the proposal stands it should be from any static but if we relax the rule to just imm static items then we can have static mut for atomics
[21:46:46] <doomlord_> struct ctxt{ def_map: resolve::DefMap ....    DefMap= @RefCel<NodeMap<Def> >  --> Def = some enum containing DefIds ... i think thats what I need
[21:47:08] <acrichto> flaper87: why would we forbid taking the address of a 'static mut', even if it has an unsafe interior?
[21:47:14] <doomlord_> yes .. DefId { krate: CrateNum, node: NodeId }  ...   so i need to turn *those* node Id's into paths.
[21:47:20] <acrichto> "unsafe interior" == "not freeze"
[21:47:22] <eddyb> doomlord_: no
[21:47:23] <acrichto> kinda
[21:47:50] <eddyb> doomlord_: DefMap contains resolutions from things like ExprPath to what they point at
[21:48:14] <doomlord_> ah.
[21:48:21] <flaper87> acrichto: exactly, that's what I wanted to say. I think we should just forbid it for imm static. 
[21:48:22] <doomlord_> the result of resolve i guess.
[21:48:29] <flaper87> acrichto: anyway, I see we're on the same page
[21:48:33] <flaper87> I'll write a comment here https://github.com/mozilla/rust/issues/12577
[21:48:47] <flaper87> since the bug report doesn't say that explicitly
[21:49:17] <acrichto> flaper87: oh the second bullet of niko's list only applies to immutable statics I think
[21:49:25] <acrichto> but clarification is always welcome of course!
[21:49:58] <doomlord_> you say its not 'ast_map::Map' that i need to scan?    ( struct ctxt_ { .... map: ast_map::Map ...  ----> Map { .. Vec<MapEntry> ... ----> MapEntry...  }
[21:51:40] <fhahn> nmatsaki1: hi! I'm working on using mk_sub_trait_refs for #2687. I'd like to use it to check wether the type in the bound is a subtype of the type in the implementation (https://github.com/fhahn/rust/commit/a1bedb7521361c578fa5dc71eecbb566e7094e35#diff-31c6a728eb925b9f6b0124e93948d270R875)
[21:53:09] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:54:37] <eddyb> doomlord_: the map only contains crate-local nodes
[21:54:39] <eddyb> doomlord_: and inlined nodes
[21:55:16] <doomlord_> ok; so i need to find what its' refering to when its simply resolving paths from library calls
[21:55:45] <doomlord_> hmm the code that actually does that should be here in resolve.rs 
[21:55:57] <doomlord_> (if i've understood correctly..)
[21:57:33] <doomlord_> duh i should just be able to work backwards from the error message, afet ' self.resolve_path'
[21:57:41] <eddyb> hehe
[21:59:28] <flaper87> acrichto: now all pieces fit together! :)
[22:00:11] <eddyb> speaking of pieces fitting together... https://gist.github.com/pcwalton/9557836
[22:00:19] <eddyb> flaper87: you should've made that comment in #rust *sigh*
[22:00:50] <doomlord_> (perhaps i could even adapt 'resolve_path' to do it, but i'd feel less comfortable modifying the actual code used,to generate output rather than bolting on extra code for error messages)
[22:01:01] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[22:01:16] <flaper87> eddyb: the one that says everything fits together?
[22:01:21] * flaper87 sneaks into #rust
[22:01:23] <eddyb> yupp
[22:02:26] <doomlord_> 'path.global' - is that set if you started with ::  ?
[22:02:39] <eddyb> yupp
[22:04:17] <flaper87> brson: you'll soon be able to complete https://github.com/mozilla/rust/pull/12430 ;) 
[22:05:18] <brson> flaper87: awesome. are you fixing the rules for statics?
[22:05:24] <brson> flaper87: are you removing Freeze?
[22:05:42] *** Quits: bvssvni (Mibbit@moz-E289BB64.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[22:06:43] <flaper87> brson: Yes, sir! Already made Atomics use Unsafe and removed the rule about Freeze on statics. After this, I'll get rid of Freeze completely
[22:06:59] <eddyb> I still want ShallowFreeze
[22:07:06] <eddyb> or maybe Unsafe will be the only way to get that?
[22:07:06] <brson> flaper87: wow
[22:07:38] <brson> eddyb: the intent is not to surface it in the language, I think - where the compiler needs that analysis it just looks for types that don't contain Unsafe
[22:07:48] <brson> although istm we still may need the NoFreeze marker
[22:08:03] <strcat> is it deep or shallow though?
[22:08:06] <brson> shallow
[22:08:17] <eddyb> Unsafe<()> ;)
[22:08:32] <eddyb> (yay hacks)
[22:09:40] <brson> flaper87: is Share in?
[22:10:08] <eddyb> strcat: hmm, do we have a nice stack-based child task abstraction?
[22:10:16] <strcat> hm?
[22:10:19] <strcat> no
[22:10:26] <eddyb> or I guess we could use Arc's
[22:10:38] <eddyb> Arc<NotFreezeButShare>
[22:11:26] <eddyb> ("not Freeze" by the old definition, like Atomic)
[22:11:28] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[22:11:28] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/XBu82w
[22:11:28] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[22:11:47] <flaper87> brson: it is in
[22:12:05] <eddyb> with opt-in Share, you should be safe from accidentally sharing something with, say, two atomic fields that need to be in sync somehow
[22:12:20] <eddyb> flaper87: you're a hero :D
[22:12:36] <strcat> eddyb: rust can't prevent that anyway, you could have two channels that need to be in sync or w/re
[22:12:37] <eddyb> and I just wasted 2 weeks doing nothing on Deref. yay me
[22:12:48] <flaper87> brson: after this tests I'm running, I think we're good to review and let this in. Once it lands and the snapshot is done, I'll get rid of freeze compeltely and spread Share all around
[22:12:48] <strcat> it only stops data races, not higher level race conditions
[22:12:55] <flaper87> and then opt-in kinds FTW !!!!
[22:13:11] <eddyb> strcat: I mean, opt-in makes it harder to shoot yourself
[22:13:34] <flaper87> eddyb: not harder, just obvious 
[22:13:36] <flaper87> :D
[22:13:43] <strcat> so 'struct Foo { x: int, y: int }' won't be Pod?
[22:13:55] <eddyb> no idea about that. feels a bit bad
[22:14:02] <strcat> yes, lots more boilerplate
[22:14:17] <eddyb> things like Send and Share is what I agree on
[22:14:31] <strcat> nearly everything with Send fields should be Send
[22:14:40] <strcat> I can't think of a case where that shouldn't be true without unsafe code
[22:15:03] <eddyb> strcat: unsafe pointers
[22:15:21] <strcat> eddyb: safe to share them between tasks, without specific unsafe code doing something wrong
[22:15:34] <eddyb> that's a bad assumption IMO
[22:15:48] <strcat> it is safe to share *T between tasks, you can't deref it in the normal subset of rust
[22:15:50] <strcat> it's an integer
[22:15:50] <eddyb> I have yet to see a C binding put NoSend in their wrapper structures
[22:16:14] <strcat> eddyb: that code is likely already broken
[22:16:32] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[22:16:32] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/u8uaUA
[22:16:32] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[22:16:32] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[22:16:33] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/oF8rcg
[22:16:33] <ghrust> 13rust/06auto 146d7e86d 15Jyun-Yan You: fix MIPS target...
[22:16:33] <ghrust> 13rust/06auto 1426fdfa1 15bors: auto merge of #12878 : crabtw/rust/mips, r=alexcrichton...
[22:16:33] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[22:16:40] <strcat> unsafe code isn't easy to write either way and it shouldn't be something most people write
[22:16:45] <eddyb> strcat: but, I mean, opt-in Send iff you use *T sounds better than both opt-out and opt-in
[22:16:55] <strcat> optimizing for unsafe code rather than safe code feels a lot like C
[22:17:01] <strcat> eddyb: I disagree
[22:17:22] <eddyb> I'd rather have something like Vec<T> be Uniq<[T]> + capacity
[22:17:44] <strcat> regardless, there will be boilerplate everywhere
[22:17:52] <eddyb> myeah :/
[22:18:02] <strcat> and rust's whole argument is that most code can be safe
[22:18:07] <eddyb> at least it's a bit better at the API level
[22:19:31] <strcat> anyway w/e, I'll just file a few hundred bugs for missing traits
[22:19:43] <strcat> we already have 1500, why not 1800? ;p
[22:19:50] <eddyb> hahaha
[22:20:25] <strcat> we'll end up making a lint to warn when there's missing and silencing it when the code is unsafe and actually wants to leave it out - so even more boilerplate
[22:20:29] <strcat> at least imo that's what will happen
[22:20:39] <strcat> they're missing*
[22:21:11] <eddyb> opt-in-out
[22:21:15] <strcat> so you'll need #[deriving(Pod, Send, Share, Eq, Ord, TotalEq, TotalOrd, Clone)] on most types
[22:21:24] <eddyb> i.e. Data
[22:21:30] <strcat> (and eventually DeepClone because we're going to need it again)
[22:21:31] <eddyb> reminds me of a world without &mut T
[22:21:46] <eddyb> and &move out T performs the same function
[22:22:13] <eddyb> strcat: should I feel bad for laughing at that deriving list?
[22:22:39] <eddyb> give me all the traits!
[22:22:40] <strcat> I forgot Hash
[22:22:46] <eddyb> and Show
[22:22:50] <strcat> right
[22:23:04] <SiegeLord> I wonder how that magical #[deriving(Data)] will work if you don't fulfill one of those bounds :P
[22:23:23] <eddyb> SiegeLord: it's not a trait Data: ... {}
[22:23:31] <SiegeLord> I know
[22:23:34] <eddyb> SiegeLord: it just does the separate deriving for each of the traits
[22:23:38] <strcat> the magical deriving(Data) will be some awful script I write + report reports ;p
[22:23:44] <strcat> er, issue reports
[22:23:58] <flaper87> SiegeLord: that's exactly why it's still not being implemented
[22:24:05] <flaper87> it's not clear what those bounds ought to be
[22:24:05] <eddyb> strcat: if it doesn't fit in the 100 line length limit... that is probably the best counter-argument
[22:24:06] <SiegeLord> But what if one of those deriving's fails?
[22:24:08] <strcat> find public type -> warn if any of those are missing
[22:24:12] <strcat> 99% of the time it will be right
[22:24:20] <strcat> can blacklist ones where it's not
[22:24:36] <flaper87> unless we have some way to say #[deriving(Data, not(Clone))]
[22:24:46] <flaper87> (assuming that Data implies Clone)
[22:24:52] <eddyb> #[deriving(Pod, Send, Share, Eq, Ord, TotalEq, TotalOrd, Clone, DeepClone, Hash, Show)]
[22:24:57] <eddyb> aww that's only 88 characters
[22:25:10] <strcat> eddyb: well it will become PartialEq, PartialOrd, Eq, Ord
[22:25:32] <eddyb> so 92?
[22:25:37] <strcat> still fits on a line
[22:25:42] <eddyb> ident by 4, 96
[22:25:46] <eddyb> are we missing a trait?
[22:25:51] <strcat> doubt it
[22:26:11] <eddyb> Encodable, Decodable
[22:26:13] <eddyb> =))))))
[22:26:16] <strcat> ah right
[22:26:17] <eddyb> BAM
[22:26:38] *** Joins: mawuli (mawuli@moz-EF4254B1.com.gh)
[22:26:38] <eddyb> there's also Default
[22:26:50] <strcat> I don't think you'd derive that most of the time
[22:26:53] <strcat> depends
[22:26:58] <strcat> if it's really just a blob of data you would
[22:27:09] <eddyb> right. still, the AST needs most of those other ones
[22:27:14] <eddyb> (including DeepClone)
[22:27:25] <strcat> does the AST still use @?
[22:27:28] <strcat> or Gc
[22:27:31] <eddyb> @
[22:27:33] <strcat> meh
[22:27:35] <eddyb> (well, it doesn't need Send/Share)
[22:27:40] <eddyb> (or rather, it couldn't have it)
[22:27:47] <eddyb> strcat: need Deref snapshot for that
[22:27:54] <eddyb> I have plans for P
[22:28:03] <eddyb> my Pet Project :P
[22:28:03] <strcat> it should just use Rc
[22:28:13] <eddyb> I don't want Rc because I need special semantics
[22:28:17] <eddyb> strcat: sharing is bad
[22:28:37] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[22:28:37] *** ChanServ sets mode: +ao dherman dherman
[22:28:39] <strcat> why?
[22:28:43] <eddyb> if we didn't have such wasteful folding, I could show you why
[22:28:45] <rdgawdzi> Does anyone know what a token::AT is? Abstract Tree?
[22:28:47] <strcat> use Rc + add copy-on-write methods to Rc
[22:28:52] <strcat> and stop using RefCell
[22:28:53] <eddyb> but folding obscures... ahh CoW
[22:28:59] <eddyb> strcat: the AST doesn't use RefCell
[22:29:02] <strcat> Cell
[22:29:02] <eddyb> it's Freeze
[22:29:05] <strcat> w/e it uses
[22:29:07] <strcat> oh
[22:29:09] <strcat> so why is sharing bad?
[22:29:17] <eddyb> because identity
[22:29:28] <eddyb> I was going to show you a double mutable borrow
[22:29:39] <eddyb> macro arguments are shared
[22:29:50] <eddyb> but they get deduplicated by the first folding pass so that saves us
[22:29:51] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Connection reset by peer)
[22:30:01] <eddyb> strcat: this is what I need DeepClone for
[22:30:37] <sfackler> rdgawdzi: the @ character
[22:31:20] <eddyb> strcat: because I want in-place folding (CoW basically)... but if I remove that macro sharing... there is no sharing
[22:31:40] <eddyb> only ast_map which can be like a weak
[22:31:54] <eddyb> strcat: this is all a bit complicated
[22:32:21] <eddyb> we could have the ast_map owning the Crate
[22:32:38] <eddyb> or using & references to it
[22:32:46] <eddyb> strcat: hmm a thought is shaping
[22:33:01] <eddyb> can we really just use ~ in the AST?
[22:33:19] <eddyb> that gives us the deep clone behavior we (actually) need for non-terminals
[22:35:24] <eddyb> how come I didn't think of it like this before? maybe there was something else in ast_map previously?
[22:35:27] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:35:57] <eddyb> I guess I couldn't extract the references until now
[22:36:26] <strcat> ~ isn't CoW, you won't be able to share substructures at all
[22:36:38] <strcat> I thought that was important?
[22:37:02] <eddyb> sharing is bad because things like borrowck will screw up
[22:37:41] <eddyb> (we couldn't have a Visitor<'a, Env> until now)
[22:37:47] <strcat> what if it's CoW?
[22:37:52] <strcat> it can be shared and still immutable
[22:37:57] <strcat> I don't really understand the problem
[22:38:02] <eddyb> the problem is node IDs
[22:38:20] <eddyb> you either not share at all, or share node IDs (which is bad)
[22:38:38] <eddyb> (&mut x) given to a macro must be deep cloned
[22:38:46] <eddyb> (if used more than once)
[22:39:01] <eddyb> otherwise borrowck is free to treat it as a single entity
[22:48:31] <flaper87> brson: FYI https://github.com/mozilla/rust/pull/12686
[22:55:51] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (No route to host)
[22:57:01] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:03:59] <brson> flaper87: that looks fantastic. thanks
[23:10:20] <flaper87> brson: my pleasure :)
[23:14:27] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[23:15:54] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[23:15:54] *** ChanServ sets mode: +qo brson brson
[23:17:22] <eddyb> strcat: pfffft
[23:17:37] <eddyb> we import all versions of memset and only use the one appropriate for the arch
[23:18:00] <eddyb> and look it in a hashmap
[23:18:09] <strcat> we do that for all intrinsics
[23:18:11] <eddyb> can we start being, I don't know... smart?
[23:18:26] <strcat> eddyb: we should lazily declare LLVM intrinsics
[23:18:39] <strcat> eddyb: you can see there's a place that declares 50 of them always
[23:18:40] <eddyb> and on a per-case basis
[23:18:43] <strcat> yes
[23:18:48] <eddyb> strcat: did you see how pretty I made that?
[23:18:52] <strcat> no
[23:19:12] <eddyb> ifn!(llvm.memmove.p0i8.p0i8.i32(i8p, i8p, t_i32, t_i32, i1) -> void);
[23:19:23] <eddyb> ifn!(llvm.uadd.with.overflow.i8(t_i8, t_i8) -> mk_struct!{t_i8, i1});
[23:19:35] <strcat> mmm
[23:20:05] <eddyb> I would've written a DSL to just use {T, U} as a LLVM type there
[23:20:25] <eddyb> but I can't just have it everywhere because of hygiene :(
[23:20:31] <strcat> so I just reduced this git directory from 50MiB to 224K with gc/prune
[23:20:33] <strcat> ;s
[23:20:38] * strcat rebases a lot
[23:20:38] <eddyb> haha
[23:20:43] * eddyb too
[23:20:55] <eddyb> git gui's GC message doesn't really do much
[23:21:08] <eddyb> and I never figured how to get more garbage out
[23:21:28] <eddyb> strcat: and it's not worth doing it just for intrinsics. but it's very appealing to use LLVM syntax to get LLVM types :D
[23:25:46] *** Joins: cgaebel (clark@moz-F9D89110.nyc.res.rr.com)
[23:27:42] *** flaper87 is now known as flaper87|afk
[23:33:20] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[23:34:12] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:35:10] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[23:36:39] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[23:36:51] *** Joins: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[23:39:45] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[23:42:41] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[23:43:43] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[23:46:34] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[23:46:34] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/oF8rcg
[23:46:34] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[23:51:26] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[23:51:26] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/it61tg
[23:51:26] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[23:51:27] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[23:51:27] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/8gGTEQ
[23:51:27] <ghrust> 13rust/06auto 14dcf320a 15aochagavia: Fixed comment of as_mut_slice (libstd/option.rs)...
[23:51:27] <ghrust> 13rust/06auto 14a7d3637 15aochagavia: Refactored iter and mut_iter...
[23:51:28] <ghrust> 13rust/06auto 1476e0e26 15bors: auto merge of #12888 : aochagavia/rust/Fix-comment, r=alexcrichton...
[23:51:30] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[23:58:58] *** Joins: Sharp (Sharp@moz-3301C7AB.static-ip.telepacific.net)
[23:59:30] *** kimundi is now known as zz_kimundi
