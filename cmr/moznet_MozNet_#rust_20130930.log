[00:00:31] <dandy> odd, does not seem to work with rust run, only rustc
[00:00:55] <cmr> The `rust` tool is essentially unmaintained.
[00:01:42] *** Joins: zws3mb (Mibbit@moz-5C4D9E04.bootp.virginia.edu)
[00:02:13] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Quit: Leaving...)
[00:02:31] *** Joins: mohawk (Mibbit@328C90E6.471081A5.DDE5D3F6.IP)
[00:03:38] *** Joins: Ralith (ralith@moz-36466B9F.customer.broadstripe.net)
[00:04:20] *** Joins: Jesin (Jessin_@moz-E6B69119.cc.lehigh.edu)
[00:05:08] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Bye!)
[00:05:19] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[00:06:32] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[00:07:46] <myname> lol
[00:07:56] <mohawk> can someone help me with vectors? I'm looking to make a vector, add elements to that vector, and then print out. My main issue is I keep getting a compiler error saying "does not implement 'push' "
[00:08:09] <cmr> mohawk: what's your code?
[00:08:45] <dbaupp> rusti: let mut v = &[1,2,3]; v.push(4)
[00:08:47] -rusti- pastebinned 8 lines of output: http://sprunge.us/hGdj
[00:09:03] <myname> why &[]?
[00:09:26] <dbaupp> rusti: let mut v = ~[1,2,3]; v.push(4)
[00:09:28] -rusti- ()
[00:09:46] <dbaupp> rusti: let mut v = &[1,2,3]; v.push(4); v
[00:09:47] -rusti- <anon>:7:31: 7:41 error: type `&[<VI2>]` does not implement any method in scope named `push`
[00:09:47] -rusti- <anon>:7          let mut v = &[1,2,3]; v.push(4); v
[00:09:47] -rusti-                                         ^~~~~~~~~~
[00:09:47] -rusti- error: aborting due to previous error
[00:09:47] -rusti- application terminated with error code 101
[00:09:56] <dbaupp> rusti: let mut v = ~[1,2,3]; v.push(4); v
[00:09:58] -rusti- ~[1, 2, 3, 4]
[00:10:17] <dbaupp> myname: demonstrating a possible cause of that error message
[00:10:22] <myname> rusti: i see
[00:10:24] <mohawk> http://mibpaste.com/xxvEVg 
[00:10:25] <myname> erm
[00:10:27] <myname> dbaupp: i see
[00:10:35] <jason_> let mut v = @[1, 2, 3]; v.push(4); v
[00:10:38] *** Joins: Erdex (Aspen@48F4515E.3B38BA72.1E7C11E5.IP)
[00:10:44] <jason_> rusti: let mut v = @[1, 2, 3]; v.push(4); v
[00:10:57] <cmr> mohawk: [] isn't what you want. It's an empty fixed-length vector. You want ~[]
[00:11:04] -rusti- <anon>:7:11: 7:14 error: expected one of `; }` but found `see`
[00:11:04] -rusti- <anon>:7          i see
[00:11:04] -rusti-                     ^~~
[00:11:04] -rusti- application terminated with error code 101
[00:11:04] -rusti- <anon>:7:33: 7:43 error: type `@[<VI2>]` does not implement any method in scope named `push`
[00:11:05] -rusti- <anon>:7          let mut v = @[1, 2, 3]; v.push(4); v
[00:11:06] -rusti-                                           ^~~~~~~~~~
[00:11:08] -rusti- error: aborting due to previous error
[00:11:10] -rusti- application terminated with error code 101
[00:11:43] <mohawk> "cannot borrow immutable local variable as mutable"
[00:11:51] <mohawk> with hist.push
[00:11:55] <jason_> rusti: let mut v = [1, 2, 3]; v.push(4); v
[00:12:07] -rusti- <anon>:7:32: 7:42 error: type `[<VI2>, .. 3]` does not implement any method in scope named `push`
[00:12:07] -rusti- <anon>:7          let mut v = [1, 2, 3]; v.push(4); v
[00:12:07] -rusti-                                          ^~~~~~~~~~
[00:12:07] -rusti- error: aborting due to previous error
[00:12:07] -rusti- application terminated with error code 101
[00:12:16] <jason_> rusti: let v = [1, 2, 3]; v.push(4); v
[00:12:17] -rusti- <anon>:7:28: 7:38 error: type `[<VI2>, .. 3]` does not implement any method in scope named `push`
[00:12:17] -rusti- <anon>:7          let v = [1, 2, 3]; v.push(4); v
[00:12:17] -rusti-                                      ^~~~~~~~~~
[00:12:17] -rusti- error: aborting due to previous error
[00:12:18] -rusti- application terminated with error code 101
[00:12:34] <mohawk> i'm trying to make a vector of strings, unknown length. if that helps
[00:12:48] <dbaupp> mohawk: do you have `let mut hist = ~[]`?
[00:12:49] <myname> that is ~[]
[00:12:59] <cmr> rusti: let mut hist = ~[]; hist.push(~"abcdefg"); hist
[00:13:01] -rusti- ~[~"abcdefg"]
[00:13:09] <mohawk> now i do
[00:13:11] <cmr> myname: vector constructor.
[00:13:20] <dbaupp> jason_: btw, you can private message rusti, if you're just experimenting for yourself :)
[00:13:30] <cmr> myname: oh you didn't ask what :)
[00:14:02] <myname> cmr: i know some basics already ;)
[00:19:43] <mohawk> thank you
[00:29:35] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[00:31:32] *** Joins: ChrisMorgan (chris@moz-2C7FE4BF.its.monash.edu.au)
[00:35:00] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[00:36:04] *** Quits: Erdex (Aspen@48F4515E.3B38BA72.1E7C11E5.IP) (Quit: )
[00:36:34] *** Quits: nkoep (nik@moz-9D188047.pool.mediaways.net) (Client exited)
[00:36:38] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[00:36:50] *** Quits: Jesin (Jessin_@moz-E6B69119.cc.lehigh.edu) (Ping timeout)
[00:38:30] <zws3mb> Is there an explicit way to make fields in a struct mutable? I thought as of 0.6 you had to do it with the instantiation of the object, but I keep getting  "cannot assign to immutable field"
[00:39:00] <cmr> zws3mb: no
[00:39:10] <dbaupp> zws3mb: you can't make individual fields mutable
[00:39:13] <cmr> "cannot assign to immutable field" is a bit misleading since there are no mutable fields.
[00:40:11] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[00:40:15] *** Quits: devin909 (Mibbit@AC28E72A.17A0D1EC.B7830B68.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:40:29] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[00:41:19] *** Quits: six600110 (six600110@moz-3C5CCD60.neo.res.rr.com) (Ping timeout)
[00:41:23] <zws3mb> okay, thanks...
[00:41:37] *** Joins: aatch (James@moz-B437F499.pocketrent.com)
[00:41:53] *** Joins: Jesin (Jessin_@moz-6EF909D6.cc.lehigh.edu)
[00:42:10] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[00:42:34] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[00:43:21] *** Quits: GeneralMaximus (ankur@98B9F57.BE5187B7.274D17D6.IP) (Ping timeout)
[00:43:22] *** Joins: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP)
[00:44:53] *** Joins: six600110 (six600110@moz-3C5CCD60.neo.res.rr.com)
[00:45:34] <sfackler> is there a way to cross reference in rustdoc-ng yet?
[00:45:35] *** Joins: mork (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net)
[00:46:06] <cmr> sfackler: in doc comments?
[00:46:08] <SiegeLord> Don't think so, although markdown links should still work
[00:46:57] *** Quits: six600110 (six600110@moz-3C5CCD60.neo.res.rr.com) (Ping timeout)
[00:47:40] <sfackler> yeah, where you can say something like "just like `SomeStruct::some_method`, but..." and the SomeStruct::some_method ends up as a link to the appropriate thing
[00:47:59] <cmr> Not going to happen.
[00:48:02] <cmr> Sorry :(
[00:48:06] <sfackler> :(
[00:48:36] <cmr> It's extremely impractical, and would require massive overhauls to resolve to work correctly.
[00:49:02] <sfackler> bummer
[00:49:29] *** Quits: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[00:49:29] *** Quits: BitPuffin (isak@moz-49828767.cust.tele2.se) (Ping timeout)
[00:50:28] *** Quits: ldunn (username@moz-94CB0FA.cyberius.net) (Quit: leaving)
[00:51:29] <SiegeLord> Not quite sure why it's impractical...
[00:51:42] <cmr> it's impractical to overhaul resolve for this single usecase
[00:51:43] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:51:45] <cmr> (sorry, was ambiguous)
[00:51:47] <jeaye> It's not impractical and it's not even entirely uncommon.
[00:51:56] <jeaye> It's not an unheard of feature.
[00:52:34] <jeaye> I believe Doxygen does just that.
[00:52:49] <cmr> Yeah, but doxygen doesn't invade another compiler for it :p
[00:52:56] <sfackler> you could get a hacky version working without touching resolve by just turning `SomeStruct::some_method` into a link to where `some_method` would be in the docs if it existed
[00:53:20] *** Joins: haxney (dan@moz-424CB7EB.cs.brown.edu)
[00:53:25] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[00:53:42] <cmr> sfackler: but what's SomeStruct? Is it something from an import? Something in the local scope? A typedef?
[00:53:47] *** Quits: Mowah (Mowah@moz-436C35C5.cust.bredbandsbolaget.se) (Ping timeout)
[00:54:15] <haxney> What is the recommended way to read a file? This tutorial https://github.com/mozilla/rust/wiki/Doc-reading-and-writing-files sais it is outdated
[00:54:22] <sfackler> you could force full qualification
[00:55:14] <sfackler> and then rustdoc would internally keep track of a fully qualified name -> location mapping
[00:55:33] <dluna> can you do more than one thing after a successful pattern match? like for example if I get Some(x) I want to add x to the total and increase count by 1
[00:55:43] *** Quits: mohawk (Mibbit@328C90E6.471081A5.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:55:55] <sfackler> dluna: you can have a block after a match with whatever you want in it
[00:56:03] <cmr> dluna: match foo { Some(x) => { .... anything .... }, ... }
[00:56:10] <dluna> ooo nice thanks
[00:56:12] <sfackler> like match foo { Foo => { x += 1; Some(x) }}
[00:56:15] <ChrisMorgan> With Sphinx (reStructuredText), you'd have things like :trait:`~vec::VectorVector` in the std docs; the ~ would make it show only the end part.
[00:56:56] <cmr> Requiring full qualification could work.
[00:57:08] <haxney> and how can I pass a Path to be read within a task::try block? I keep getting errors about not being able to capture a variable.
[00:57:09] *** Joins: Mowah (Mowah@moz-436C35C5.cust.bredbandsbolaget.se)
[00:58:06] <sfackler> haxney: https://github.com/mozilla/rust/wiki/Doc-under-construction-FAQ#once-functions
[00:58:13] *** Quits: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[00:58:13] * ChrisMorgan still prefers the clearly specified reStructuredText to the horribly badly specified and even-more-fragmented-than-Android Markdown
[00:58:24] *** Joins: Amaranth (travis@moz-8F661B2.cpe.cableone.net)
[00:58:48] <aatch> dluna, more generically, anywhere that expects an expression can have a block, since blocks themselves are expressions.
[00:59:07] <aatch> rusti: let a = { let b =1; b+1}; a
[00:59:10] -rusti- 2
[00:59:55] <zws3mb> Just going to suggest to any other cs4414 students, we use the #cs4414 channel rather than bug the devs too much
[01:00:04] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[01:00:21] <aatch> zws3mb, it's fine, we have #rust-internals for shop-talk
[01:00:34] <tjc> zws3mb: feel free to talk amongst yourselves, but also feel free to ask a question here if one of the other students can't answer it :-)
[01:01:30] <zws3mb> thanks, yall.
[01:01:31] *** Joins: timot (timot@moz-B930B13F.bredband.tre.se)
[01:01:33] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[01:03:25] <jeaye> val.to_ascii().to_lower().to_str_ascii()
[01:03:31] <jeaye> Any cleaner way than that? :(
[01:04:04] <cmr> jeaye: If you don't care about unicode, .to_ascii_lower() also exists.
[01:04:13] <mork> any idea why rt::stdio isn't implemented yet?
[01:04:26] <cmr> mork: because no one has done it yet.
[01:04:28] <jeaye> cmr: Perfect
[01:04:31] <mork> (not trying to be rude, but wondering if there's any caveats that are holding it up)
[01:05:12] <mork> oh, ok
[01:05:12] <jeaye> rusti: let s = ~"FOO"; s.to_ascii_lower()
[01:05:13] -rusti- <anon>:7:25: 8:5 error: type `~str` does not implement any method in scope named `to_ascii_lower`
[01:05:13] -rusti- <anon>:7          let s = ~"FOO"; s.to_ascii_lower()
[01:05:13] -rusti- <anon>:8     };
[01:05:13] -rusti- error: aborting due to previous error
[01:05:14] -rusti- application terminated with error code 101
[01:05:23] <cmr> jeaye: there's a trait you need in std::ascii
[01:05:33] <cmr> OwnedAsciiStrExt or something
[01:05:46] <ChrisMorgan> That provides into_ascii_lower
[01:06:05] <ChrisMorgan> There's also AsciiStrExt.to_ascii_lower().
[01:06:11] <cmr> Ah
[01:06:15] <jeaye> OwnedStrAciiExt
[01:06:18] *** Quits: timot (timot@moz-B930B13F.bredband.tre.se) (Quit: Konversation terminated!)
[01:06:21] <haxney> sfackler: is there any way to do this without needing a compiler option? I can't see how to get rustpkg to pass "-Z once-fns" to rustc
[01:06:36] <cmr> haxney: use a Cell (see std::cell)
[01:06:45] *** Joins: timot (timot@moz-B930B13F.bredband.tre.se)
[01:06:56] <ChrisMorgan> rusti: use std::ascii::OwnedStrAsciiExt; let s = ~"FOO"; s.into_ascii_lower()
[01:06:59] -rusti- ~"foo"
[01:07:14] <jeaye> Yup, thanks
[01:07:35] <dbaupp> haxney: use std::cell
[01:07:45] <haxney> thanks, I'll give it a shot
[01:08:09] <jeaye> rusti: use std::ascii::OwnedStrAsciiExt; let s = &"FOO"; s.into_ascii_lower()
[01:08:10] -rusti- <anon>:7:59: 8:5 error: type `&str` does not implement any method in scope named `into_ascii_lower`
[01:08:10] -rusti- <anon>:7          use std::ascii::OwnedStrAsciiExt; let s = &"FOO"; s.into_ascii_lower()
[01:08:10] -rusti- <anon>:8     };
[01:08:10] -rusti- error: aborting due to previous error
[01:08:11] -rusti- application terminated with error code 101
[01:08:17] <jeaye> ChrisMorgan: What about that?
[01:08:35] <tjc> haxney: `rustpkg -Z once-fns build whatever` should work
[01:08:41] <tjc> and if it doesn't, I'm interested to hear back :-)
[01:09:10] <haxney> tjc: error: Unrecognized option: 'Z'.
[01:09:24] <tjc> haxney: what does `rustpkg --version` say?
[01:09:25] <haxney> but I'm on the servo version of Rust, so it may be fixed in a later version
[01:09:39] <haxney> rustpkg 0.8-pre (d39cec6 2013-09-06 05:05:59 -0700)
[01:09:39] <haxney> host: x86_64-unknown-linux-gnu
[01:09:40] <ChrisMorgan> jeaye: You need to use StrAsciiExt.to_ascii_lower() for that
[01:09:50] <ChrisMorgan> rusti: use std::ascii::StrAsciiExt; let s = "FOO"; s.to_ascii_lower()
[01:09:52] -rusti- ~"foo"
[01:09:57] <tjc> haxney: Oh yeah, in rustpkg years that's really old :-)
[01:10:05] *** Joins: Larry (larryfox@26EE99DC.88C61CC9.ECED8BE3.IP)
[01:10:12] *** Joins: six600110 (six600110@moz-3C5CCD60.neo.res.rr.com)
[01:10:14] <haxney> tjc: yeah, I hear it's been moving at warp speed
[01:10:38] <jeaye> ChrisMorgan: Much appreciated.
[01:11:14] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[01:11:20] <haxney> dbaupp: hmm, using std::cell didn't help. I get "error: cannot capture variable of type `std::cell::Cell<@std::io::Reader:'static>`, which does not fulfill `Send`, in a bounded closure"
[01:11:51] <dbaupp> haxney: aah, I don't think it is possible to send a @ object like that
[01:12:33] <dbaupp> haxney: (task::try creates a new task, and @ is strictly task local, i.e. can't transfer across task boundaries, like that introduced by task::try)
[01:12:34] <haxney> dbaupp: Is there a way to send a @ object?
[01:12:54] <dbaupp> haxney: not without unsafe code; can you post your cod?
[01:12:59] <dbaupp> *code
[01:13:07] * dbaupp isn't so interested in fish
[01:13:18] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[01:13:41] <haxney> dbaupp: http://bit.ly/1aaAFHo
[01:14:18] <haxney> dbaupp: Or maybe you might want https://gist.github.com/haxney/6719953
[01:14:36] <haxney> dbaupp: it's in bench_lex_one_file()
[01:15:33] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[01:16:01] <haxney> dbaupp: I have a working, but ugly, version of pretty much the same thing in bench_parse_one_file()
[01:16:07] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[01:16:32] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[01:16:59] *** Quits: santiago (santiago@moz-8ADE82B4.socal.res.rr.com) (Quit: Computer has gone to sleep.)
[01:17:23] *** Joins: mowhawk (Mibbit@moz-EECABA0A.hsd1.va.comcast.net)
[01:17:50] <dbaupp> haxney: you could have bench_lex_on_file take Path rather than &Path, and then put the path in the cell and open the file inside the task::try
[01:17:52] *** Joins: santiago (santiago@moz-8ADE82B4.socal.res.rr.com)
[01:18:29] *** Parts: gweg (Mibbit@moz-97FD188C.cpe.net.cable.rogers.com) ()
[01:19:26] *** Joins: ryeguy (ryeguy@9C569A0.5D1143CD.E8644521.IP)
[01:19:28] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[01:20:14] <haxney> dbaupp: and how would I call bench_lex_one_file() when std::os::list_dir_path() returns ~[Path]?
[01:20:45] <ryeguy> is it just me or is vec.len() not documented anywhere in the api docs?
[01:21:11] <dbaupp> haxney: `for file in files.move_iter()` would be one way
[01:21:25] <dbaupp> haxney: bench_lex_one_file(file.clone()) would be another
[01:22:00] <aatch> ryeguy, it's part of the Collection trait
[01:22:24] <haxney> dbaupp: great, that works! Isn't this making a whole bunch of copies of the Path, though?
[01:22:30] <dbaupp> haxney: (bench_parse_one_file is pretty much how i'd write bench_lex_one_file, except I'd move the clone up a level: i.e. have them taking path: Path, rather than path: &Path)
[01:22:43] <haxney> This part is definitely not performance-critical, but just for my understanding :)
[01:22:45] <ryeguy> aatch: hm, is that some compiler magic then? Collection isn't on vec's api doc page either
[01:22:46] <dbaupp> haxney: yeah, it is, but that's not so bad
[01:23:40] <aatch> ryeguy, it's an issue with the fact that ~[] isn't in the source, so rustdoc can't display a type page for it.
[01:23:51] <dbaupp> ryeguy: the built-in types are a bit strange with documentation, but you can see it here http://static.rust-lang.org/doc/master/std/container/trait.Container.html
[01:24:13] <ryeguy> ah, there it is. thanks
[01:25:09] <haxney> dbaupp: I updated https://gist.github.com/haxney/6719953 with the latest version and it works now. Thanks a lot
[01:25:45] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[01:26:38] <dbaupp> haxney: np :)
[01:27:12] *** Joins: ldunn (username@moz-94CB0FA.cyberius.net)
[01:28:54] *** Quits: Amaranth (travis@moz-8F661B2.cpe.cableone.net) (Ping timeout)
[01:29:05] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[01:29:26] *** Joins: steveklabnik (steveklabn@moz-F736A796.lsanca.dsl-w.verizon.net)
[01:30:57] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:31:19] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:32:17] <jeaye> Where're the docs for generating Rust libs based on C headers?
[01:32:23] <jeaye> (Are there any?)
[01:32:44] <SiegeLord> Isn't that the FFI tutorial?
[01:32:58] <jeaye> hmm, could be
[01:33:08] <cmr> Yeah, it is.
[01:33:09] <klutzy> auto-generating?
[01:33:10] <cmr> Also see bindgen.
[01:33:42] <jeaye> Yeah, bindgen is what I'm looking for.
[01:38:25] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[01:38:50] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[01:39:38] <jeaye> cmr: Where can I find bindgen docs? I don't see them on the rust-lang site.
[01:39:47] *** Joins: pksu (pksu@moz-2051CC54.fi)
[01:39:52] *** Joins: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com)
[01:39:54] <cmr> jeaye: it's an external project: https://github.com/crabtw/rust-bindgen
[01:40:14] <jeaye> Ah, thank you.
[01:40:26] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[01:45:57] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[01:47:11] *** Quits: Ralith (ralith@moz-36466B9F.customer.broadstripe.net) (Ping timeout)
[01:47:57] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[01:49:19] <jeaye> cmr: Have you ever used it before?
[01:49:23] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[01:49:31] <cmr> jeaye: Not successfully, unfortunately :(
[01:49:40] <jeaye> Same here. :|
[01:49:41] <jeaye> /usr/include/stdio.h:33:11: fatal error: 'stddef.h' file not found
[01:49:45] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[01:49:48] <cmr> Yeah, I ran into that exact same hell.
[01:50:00] <cmr> The glibc header rabbit hole.
[01:50:22] *** Parts: slack1256 (slack@moz-B110B203.baf.movistar.cl) (Konversation terminated!)
[01:50:50] <cmr> ChrisMorgan: ping
[01:50:55] <ChrisMorgan> cmr: pong
[01:51:08] <cmr> ChrisMorgan: I'm updating rust-http to master. MemReader.buf is now private.
[01:51:30] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[01:51:31] *** Joins: Ralith (ralith@moz-36466B9F.customer.broadstripe.net)
[01:51:32] *** Quits: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com) (Ping timeout)
[01:51:34] <cmr> Or hm, looks like it should be using the Decorator trait
[01:51:43] <ChrisMorgan> #18 covers that (just haven't merged it)
[01:51:47] <cmr> Oh
[01:51:51] * cmr looks on the github.
[01:51:58] *** Joins: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com)
[01:52:05] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[01:52:19] <ChrisMorgan> cmr: merged
[01:52:36] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Input/output error)
[01:52:58] <dbaupp> jeaye: I believe bindgen takes some args like --include to help with that
[01:53:14] <steveklabnik> look what someone just tweeted me: https://github.com/skade/widmann/
[01:53:40] <dbaupp> jeaye: (I don't actually know how to use them though: I only successfully ran bindgen on libgit2 by editing the includes by hand)
[01:53:45] <cmr> woo!
[01:53:54] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[01:54:30] *** Joins: mug (Mibbit@EFF6495E.DE17E44B.940551A0.IP)
[01:54:31] <klutzy> bindgen accepts header files to be included, and header file which you want to export only
[01:54:39] <steveklabnik> so pumped about that
[01:54:42] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[01:55:08] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[01:55:14] <myname> what is sinatra?
[01:55:20] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Input/output error)
[01:55:20] <cmr> A ruby web framework
[01:55:26] <klutzy> so if a.h includes b.h and c.h, you indicate bindgen to read a.h then export c.h. it is great if c.h needs some definitions from a.h or b.h
[01:55:27] <steveklabnik> myname: a really simple ruby web framework
[01:55:37] <cmr> I've never used sinatra, but I've used endless clones of it, so it must be great :P
[01:55:39] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[01:55:43] *** Quits: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com) (Ping timeout)
[01:56:11] <steveklabnik> i'm friends with the maintainer, he's awesome
[01:56:27] <jeaye>  dbaupp So you just removed the includes it couldn't find?
[01:56:29] *** Joins: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com)
[01:56:30] <steveklabnik> i don't build things in it anymore because i got too invested in rails, i always end up re-building it anyway
[01:56:35] <steveklabnik> but it's pretty sweet
[01:56:53] <steveklabnik> it'd be a good thing to write services in in rust
[01:57:03] <jeaye> klutzy: For me, it's just not finding system headers. I'm giving it more search paths, but it's odd I should have to.
[01:57:03] <steveklabnik> i think sinatra is a way more appropriate model
[01:57:06] <dbaupp> jeaye: basically, and edited the #include "foo/bar.h" to be a path that bindgen could find (i.e. the intra-library ones)
[01:57:51] <jeaye> mmk, I'll fuck with it.
[02:00:13] *** Quits: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com) (Ping timeout)
[02:01:02] *** Joins: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com)
[02:01:31] *** Quits: mug (Mibbit@EFF6495E.DE17E44B.940551A0.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:01:35] *** Joins: mib_t5razk (Mibbit@moz-F2E42C9D.hsd1.va.comcast.net)
[02:02:02] <mib_t5razk> how do i convert an owned string to a c_str?
[02:02:21] <cmr> mib_t5razk: .to_c_str() (and it's CString, not c_str)
[02:04:56] <ChrisMorgan> steveklabnik: how come I wasn't told about widmann?
[02:05:11] <mib_t5razk> awesome tanks
[02:05:37] <myname> i prefer healer
[02:06:02] <mib_t5razk> is that in .7 as well?
[02:06:03] *** Quits: timot (timot@moz-B930B13F.bredband.tre.se) (Connection reset by peer)
[02:06:13] <cmr> No, CString didn't exist in 0.7
[02:06:20] <Eridius> mib_t5razk: why 0.7? 0.8 is out now
[02:06:28] <mib_t5razk> how would one convert to a cstring in .7?
[02:06:36] <mib_t5razk> almost done with something in .7
[02:06:39] <cmr> mib_t5razk: .as_c_str()
[02:06:40] <mib_t5razk> switching to .8 after this
[02:06:43] <cmr> Eridius: the OS class I imagine
[02:06:48] *** Quits: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com) (Ping timeout)
[02:07:06] *** Joins: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com)
[02:07:30] <Eridius> ah right
[02:07:32] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[02:07:33] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[02:08:14] <mib_t5razk> what about vectors to c arrays?
[02:08:25] <dbaupp> .as_imm_buf
[02:08:35] <dbaupp> (or .as_mut_buf)
[02:09:57] *** Quits: ChrisMorgan (chris@moz-2C7FE4BF.its.monash.edu.au) (Quit: Leaving.)
[02:10:00] *** Joins: ChrisMorgan (chris@moz-2C7FE4BF.its.monash.edu.au)
[02:10:39] <cmr> guh I hate it when I do `git create` using hub, and it's not actually a fork so I can't open PRs >_<
[02:10:45] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[02:10:47] *** Quits: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com) (Ping timeout)
[02:11:31] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:11:38] *** Joins: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com)
[02:12:29] *** Joins: stevekla1nik (steveklabn@moz-F736A796.lsanca.dsl-w.verizon.net)
[02:13:15] <mib_t5razk> type `~[~str]` does not implement any method in scope named `as_imm_buf`
[02:13:33] *** Joins: Astana11 (Astana11@48F4515E.3B38BA72.1E7C11E5.IP)
[02:13:47] *** Quits: Larry (larryfox@26EE99DC.88C61CC9.ECED8BE3.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:14:09] <Eridius> mib_t5razk: .as_imm_buf is on ~str, not ~[~str]
[02:14:13] <dbaupp> rusti: let v = ~[~"foo"]; v.as_imm_buf(|buf, len| println!("{} {}", buf, len))
[02:14:15] <engla> mib_t5razk: it's in the ImmutableVector trait, so it should be there
[02:14:19] -rusti- timeout triggered!
[02:14:24] <dbaupp> rusti: let v = ~[~"foo"]; v.as_imm_buf(|buf, len| println!("{} {}", buf, len))
[02:14:26] -rusti- 0x7fb5284200b0 1
[02:14:26] -rusti- ()
[02:14:27] <Eridius> oh I suppose ~[] has it too, but it's not giong to do what you want
[02:14:33] <Eridius> because you don't really want a *~str
[02:14:43] <engla> that's right
[02:14:58] <dbaupp> mib_t5razk: are you trying to get a **char?
[02:15:15] <dbaupp> (well, char** in C)
[02:15:24] <mib_t5razk> yeah
[02:15:26] <mib_t5razk> for execv
[02:15:32] <dbaupp> mib_t5razk: https://github.com/mozilla/rust/issues/9564
[02:15:39] <jeaye> Got bindgen to work. :D
[02:15:44] <Eridius> mib_t5razk: maybe check how std::run does it?
[02:15:46] <cmr> jeaye: How!?
[02:15:50] <dbaupp> jeaye: \o/
[02:16:40] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[02:16:43] <jeaye> cmr: Futzing with the header include paths until it found everything it needed. Once it build the rs file, I still had to make a few modifications (removing va_list shit), but the lib builds now.
[02:16:50] *** Quits: mork (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:16:50] <dbaupp> mib_t5razk: why are you calling execv directly, btw?
[02:16:52] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[02:17:16] <mib_t5razk> dbaupp: trying to run programs in the background so the original program can keep running
[02:17:20] *** Quits: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com) (Ping timeout)
[02:17:25] <dbaupp> mib_t5razk: ah
[02:17:35] <mib_t5razk> dbaupp: calling fork then execv
[02:17:45] *** Joins: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com)
[02:17:58] <dbaupp> mib_t5razk: a "correct" way to do it is: https://github.com/huonw/multibuilder/blob/master/task_worker.rs#L25
[02:18:51] <dbaupp> spawning a sched like that creates a new OS thread, so it won't be at the mercy of the Rust scheduler to get concurrency
[02:19:32] <mib_t5razk> will that work in .7?
[02:19:44] <dbaupp> I think so
[02:19:58] *** IRCMonkey46673 is now known as rhelmer
[02:20:20] <dbaupp> mib_t5razk: well, the docs include it http://static.rust-lang.org/doc/0.7/std/task.html#function-spawn_sched
[02:20:21] *** Quits: steveklabnik (steveklabn@moz-F736A796.lsanca.dsl-w.verizon.net) (Ping timeout)
[02:20:42] *** Quits: stevekla1nik (steveklabn@moz-F736A796.lsanca.dsl-w.verizon.net) (Ping timeout)
[02:21:29] *** Quits: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com) (Ping timeout)
[02:21:47] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[02:22:15] *** Joins: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com)
[02:24:26] *** Quits: ldunn (username@moz-94CB0FA.cyberius.net) (Quit: leaving)
[02:24:35] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[02:25:58] <cmr> ChrisMorgan: I've given up on overhauling extra::url, because it's a lot of work. I'm changing AuthorityPath(~str) to AuthorityPath(Urlish), where Urlish is a ~[~str], Option<~str>, Option<~str> for resource, querystring, fragment. Is that ok?
[02:26:02] *** Quits: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com) (Ping timeout)
[02:26:47] *** Joins: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com)
[02:26:54] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[02:27:00] <ChrisMorgan> cmr: you mean AbsolutePath?
[02:27:10] <cmr> ChrisMorgan: yeah, that
[02:31:12] <ChrisMorgan> cmr: RFC 2396, abs_path = "/" path_segments. path_segments = segment *( "/" segment ). segment = *pchar *( ";" param ).
[02:32:06] *** Quits: haxney (dan@moz-424CB7EB.cs.brown.edu) (Quit: sleep)
[02:32:37] <ChrisMorgan> Hang on... that all indicates that you can't have a querystring there.
[02:33:03] <cmr> ChrisMorgan: ... RFC3986?
[02:33:07] <Astana11> which of the open issues would be good for a first-time contributor?
[02:33:40] <tjc> Astana11: https://github.com/mozilla/rust/issues?direction=asc&labels=E-easy&sort=updated&state=open are the ones that somebody at some point thought were "easy" :-)
[02:33:47] *** Quits: kimundi (kimundi@moz-AAC1E158.dip0.t-ipconnect.de) (Ping timeout)
[02:34:38] <tjc> Astana11: https://github.com/mozilla/rust/issues/3965 could be a good one to start with. it just means looking in the test suite for tests that are marked "xfail" (expected to fail), checking whether or not they work, and possibly updating them to reflect syntax changes
[02:34:52] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[02:35:07] <dbaupp> Astana11: (if you do decide on one, be sure to comment on it saying that you're working on it so that we don't have people stepping on others' toes :) )
[02:35:27] *** Quits: joshua_ (joshua@moz-45967CBE.emarhavil.com) (Quit: User disconnected)
[02:35:45] <sfackler> There are also plenty of things to be done that don't have issues. I got started by using Rust until I found something that was broken/bad and fixed it :)
[02:36:40] <Astana11> will take a look, thank you!
[02:37:02] <ChrisMorgan> cmr: OK, looks like using abs_path there was a bug in HTTP/1.1. Pretty severe one :-/
[02:37:14] <ChrisMorgan> http://trac.tools.ietf.org/wg/httpbis/trac/ticket/11
[02:37:17] *** Joins: zz_kimundi (kimundi@moz-FECF1514.dip0.t-ipconnect.de)
[02:37:36] *** zz_kimundi is now known as kimundi
[02:37:41] *** Joins: jdsanders (Adium@moz-F45527D6.hlrn.qwest.net)
[02:38:11] <cmr> Oh right, and we don't need to handle fragments
[02:39:55] <ChrisMorgan> Correct.
[02:40:22] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[02:40:24] <cmr> ChrisMorgan: http://www.rfc-editor.org/errata_search.php?rfc=2616&eid=3056
[02:40:30] *** Quits: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com) (Ping timeout)
[02:40:45] <cmr> I have no idea why that errata was rejected
[02:40:53] *** Quits: mowhawk (Mibbit@moz-EECABA0A.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:40:53] *** Joins: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com)
[02:41:07] <ChrisMorgan> "Already done"
[02:41:25] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[02:41:42] <cmr> I'm not seeing it..
[02:41:51] <ChrisMorgan> "This issue has been fixed in the revisions to RFC 2616, see http://trac.tools.ietf.org/wg/httpbis/trac/changeset/76"
[02:42:21] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[02:42:49] <cmr> They didn't issue an update for the RFC
[02:42:56] <ChrisMorgan> Not sure why I'd forgotten that erratum; I read through all the errata earlier.
[02:43:04] <ChrisMorgan> The process is a mess.
[02:43:08] <cmr> Unless there's somewhere else they issue updates?
[02:43:11] <cmr> Yeah :\
[02:43:18] <ChrisMorgan> It's designed to make it hard for you to figure out what's canonical.
[02:44:00] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[02:46:30] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:46:42] *** Quits: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com) (Ping timeout)
[02:46:52] <cmr> Really?
[02:46:58] *** Joins: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com)
[02:47:06] <ChrisMorgan> Anyway, it ends up as (absolute path, Option<query string>)
[02:47:14] *** Joins: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net)
[02:47:28] <cmr> Yeah
[02:47:37] <cmr> Do you mind the path being parsed into a ~[~str] ?
[02:47:47] <cmr> It'd make my life easier, at least.
[02:48:01] <cmr> But it does require potentially unnecessary allocations.
[02:48:14] *** Joins: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP)
[02:48:55] <cmr> Although it could be a (~[&'self str], Option<&'self str>) if the path string is stored in the struct I think
[02:50:00] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[02:50:30] *** Joins: ldunn (username@moz-94CB0FA.cyberius.net)
[02:50:39] *** Quits: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com) (Ping timeout)
[02:50:59] *** Joins: doomlord__ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[02:51:30] *** Joins: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com)
[02:52:28] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[02:52:35] <ChrisMorgan> Either technique would be valid; I think having it as one string is probably more generally applicable, whether correct or not.
[02:52:59] <cmr> You're the project owner, make a decision :p
[02:53:00] <ChrisMorgan> I don't think we need to support the ";" params part. That never saw much traction at all, however good an idea it was.
[02:54:11] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[02:54:11] *** Quits: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[02:54:35] *** Quits: mib_t5razk (Mibbit@moz-F2E42C9D.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:54:36] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[02:54:42] <ChrisMorgan> OK: no ";" params part.
[02:54:48] <ChrisMorgan> (That wasn't the part you meant, was it? :P)
[02:54:49] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[02:55:41] <cmr> (nope :p)
[02:56:04] <ChrisMorgan> Problem is, it *is* data, so ~[~str] could be more "correct", but the question is whether it's harder to work with or not.
[02:56:29] <cmr> (I don't think RFC3986 kept the ";" params thing anyway)
[02:57:36] *** Quits: SteveMcQwark (steven099@moz-7CFCF343.cpe.net.cable.rogers.com) (Ping timeout)
[02:57:46] <ChrisMorgan> It seems to say "some will do it this way, some will do it that way" (mostly ; and ,)
[02:57:55] <ChrisMorgan> It does remove it.
[02:57:58] *** Joins: SteveMcQwark (steven099@moz-7CFCF343.cpe.net.cable.rogers.com)
[02:59:33] *** Joins: GeneralMaximus (ankur@4D942124.3DACFE1F.BE90E62C.IP)
[02:59:40] <ryeguy> is vec.len() a constant time operation?
[02:59:45] <cmr> ryeguy: yes
[02:59:50] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[03:00:00] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[03:00:39] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[03:00:51] *** Quits: SteveMcQwark (steven099@moz-7CFCF343.cpe.net.cable.rogers.com) (Ping timeout)
[03:01:10] *** Quits: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com) (Ping timeout)
[03:01:38] *** Joins: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com)
[03:02:59] *** Joins: SteveMcQwark (steven099@moz-7CFCF343.cpe.net.cable.rogers.com)
[03:03:42] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[03:03:50] <ChrisMorgan> cmr: what do you reckon on the matter of splitting the abs_path up or passing it whole?
[03:05:32] <cmr> ChrisMorgan: splitting the abs_path up would be easier for me since I'd be doing vector matching on it, but the more I think about it the more I think it might not be a great idea.
[03:06:06] <ChrisMorgan> How do we deal with paths? Are they split up or all joined?
[03:06:21] <cmr> Now or in general?
[03:06:25] *** Quits: ryeguy (ryeguy@9C569A0.5D1143CD.E8644521.IP) (Quit: )
[03:06:29] <ChrisMorgan> All three.
[03:07:24] *** Quits: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com) (Ping timeout)
[03:07:27] * cmr sees two options there
[03:07:33] <cmr> extra::url keeps it joined.
[03:07:45] *** Joins: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com)
[03:07:47] <ChrisMorgan> But we don't care about what extra::Url does.
[03:08:22] <cmr> extra::url is the only place they're parsed and could be split.
[03:08:37] <cmr> afaict
[03:08:47] <ChrisMorgan> New path stuff splits it?
[03:08:57] <cmr> What new path stuff?
[03:09:20] <ChrisMorgan> std::path, I guess
[03:09:31] <ChrisMorgan> For extra::url, I mean that it is old and we don't need to be bound by what it does. I presume it'll be being thrown away and replaced at some point.
[03:09:35] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: Leaving)
[03:10:01] <ChrisMorgan> And it does ``components: ~[~str]``. I guess that sets precedent for us :-)
[03:10:18] <cmr> Eridius is working with that code
[03:10:31] <cmr> Eridius: what's the new new path stuff do?
[03:11:16] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[03:11:36] <ChrisMorgan> Eridius: where do you see Url fitting in with your new path stuff? Should Url impl GenericPath and work the same ways as the others?
[03:11:36] *** Quits: canhtak (jeremy@877D54DD.7A8E554D.FC900DAF.IP) (Quit: canhtak)
[03:13:22] *** Quits: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com) (Ping timeout)
[03:13:50] *** Joins: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com)
[03:16:11] *** Quits: jonathan_ (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[03:16:39] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[03:17:00] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[03:17:37] *** Quits: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com) (Ping timeout)
[03:18:21] *** Joins: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com)
[03:18:29] *** Quits: Azdle (patrick@moz-8C723B60.hsd1.mn.comcast.net) (Ping timeout)
[03:18:29] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[03:21:42] *** Quits: Astana11 (Astana11@48F4515E.3B38BA72.1E7C11E5.IP) (Client exited)
[03:23:00] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[03:23:18] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[03:23:22] *** Quits: zws3mb (Mibbit@moz-5C4D9E04.bootp.virginia.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[03:24:01] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[03:24:31] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[03:25:04] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Connection reset by peer)
[03:25:11] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[03:25:42] *** Joins: exia (Mibbit@AC28E72A.17A0D1EC.B7830B68.IP)
[03:26:01] *** Quits: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net) (Ping timeout)
[03:27:06] <exia> if you were to change the stdin of a process, how would you do it? would you initialize a new process by run::Process:new() and then get wrter from run::Process::input()?
[03:28:40] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[03:28:43] <Eridius> ChrisMorgan, cmr: the new path impl keeps a ~[u8] for PosixPath and a ~str for WindowsPath
[03:29:02] <Eridius> ChrisMorgan: Url could indeed impl GenericPath if there's a utility in doing so. I'm not sure what the pros/cons are right now
[03:29:17] <tjc> exia: there's an example in std::run::test_finish_with_output_redirected
[03:29:34] <Eridius> The primary motivating factor for using ~[u8]/~str instead of splitting into components like the old path is that they can vend .as_vec() and .as_str() that returns borrowed pointers without allocation
[03:30:45] *** Joins: Ferreus_ (ferreus@moz-8A4B42D4.dyn.telefonica.de)
[03:31:17] *** Quits: Ferreus (ferreus@moz-F0869777.dyn.telefonica.de) (Ping timeout)
[03:31:19] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[03:33:08] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[03:33:38] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:35:22] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:36:59] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[03:37:23] *** Quits: Ferreus_ (ferreus@moz-8A4B42D4.dyn.telefonica.de) (Quit: WeeChat 0.4.1)
[03:37:25] *** Joins: Ferreus (ferreus@moz-8A4B42D4.dyn.telefonica.de)
[03:37:35] *** Quits: GeneralMaximus (ankur@4D942124.3DACFE1F.BE90E62C.IP) (Quit: Computer has gone to sleep.)
[03:37:59] *** Quits: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com) (Ping timeout)
[03:38:27] *** Joins: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com)
[03:39:17] *** Joins: CurlyBrace (Mibbit@moz-8914EA71.washdc.fios.verizon.net)
[03:40:27] *** Joins: aeqwa (aeqwa@moz-E0502FA3.dsl.tropolys.de)
[03:40:57] <CurlyBrace> Hellooo
[03:41:44] <Luqman> hi CurlyBrace 
[03:42:49] <CurlyBrace> Quiet sunday night/monday morning, huh?
[03:43:03] *** Quits: dluna (Mibbit@80CC1C4F.809247E8.F7D14508.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:44:15] <cmr> As usual
[03:45:27] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[03:47:30] <ChrisMorgan> Monday afternoon.
[03:47:48] <Eridius> is there a working way of getting current rust building under latest MingW?
[03:47:50] <ChrisMorgan> Eridius: aww... I guess we'd better go for not splitting it too, then, cmr
[03:48:15] <Eridius> ChrisMorgan: I think being able to vend a &[u8] or &str is extremely useful
[03:48:16] <ChrisMorgan> cmr: this still leaves the question of where decoding happens
[03:48:33] <ChrisMorgan> Eridius: "... without allocation"
[03:48:35] <Eridius> btw, the new Path always normalizes (unlike the old which had an explicit normalize() method)
[03:48:43] <cmr> ChrisMorgan: Decoding what?
[03:48:49] <Eridius> ChrisMorgan: vending a borrowed pointer I think implies "without allocation", unless you're taking a closure ;)
[03:49:02] <ChrisMorgan> cmr: %20 etc.
[03:49:09] <cmr> Oh
[03:49:19] <cmr> Yeah
[03:49:28] <cmr> I would have done it when creating the Urlish
[03:49:31] <Eridius> ChrisMorgan: if I were you I'd take a good look at Cocoa's implementation of NSURL and the brand new NSURLComponents
[03:49:39] <cmr> Break into segments, urldecode each.
[03:49:45] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[03:49:49] <cmr> or, percent decode.
[03:50:10] *** Quits: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com) (Ping timeout)
[03:50:20] <ChrisMorgan> URL encoding is tricky because decoding is irreversible.
[03:50:33] *** Joins: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com)
[03:50:51] <cmr> Why?
[03:51:49] <ChrisMorgan> http://example.com/example%3fexample is *not* equivalent to http://example.com/example?example, for example.
[03:52:04] <dandy> depends on context
[03:52:06] <cmr> Yes, but you wouldn't decode the whole URL, you'd decode each segment of the path separately.
[03:52:11] <ChrisMorgan> http://example.com/example%2fexample is *not* equivalent to http://example.com/example/example.
[03:52:31] <cmr> url.spec.whatwg.org is very specific about what gets decoded when during parsing.
[03:52:36] <exia> great, so i found how to change stdin of process with tjc's help, but what does in_fd: Option<c_int>, represent? specifically, it seems to have a Some(int) multiplexing, but i don't know what each option represents...
[03:52:44] <ChrisMorgan> Indeed; splitting needs to be done first.
[03:52:51] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[03:53:11] <exia> this is a part of run::ProcessOptions
[03:53:48] <cmr> exia: it's the fd to redirect
[03:54:32] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[03:56:12] *** Quits: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com) (Ping timeout)
[03:56:23] <cmr> exia: you'd do well to look at the implementation of std::run
[03:56:38] *** Joins: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com)
[03:58:50] *** Quits: CurlyBrace (Mibbit@moz-8914EA71.washdc.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:59:03] <exia> cmr: hmm thanks, i need to learn more about the difference between pipe and file descriptor...
[03:59:56] *** Quits: tjc (tjc@moz-D91BA12F.sfba.hfc.comcastbusiness.net) (Quit: zzzzzzzzzz)
[04:00:34] *** Joins: mr_pants (Mibbit@moz-D362382.cp.telus.net)
[04:02:27] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[04:03:37] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[04:04:04] *** Quits: mr_pants (Mibbit@moz-D362382.cp.telus.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:04:42] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[04:07:41] <Eridius> I still can't get rust to build properly on Windows
[04:07:43] <sfackler> does anyone have any idea what's going on here? for whatever reason, normalize.css isn't loading remotely, but is locally... http://sfackler.com/doc/postgres/index.html
[04:08:50] *** Joins: ab (alex@BC9D99CC.37C1012D.FE617B51.IP)
[04:09:13] <cmr> [00:09:02.768] The stylesheet http://sfackler.com/doc/postgres/main.css was not loaded because its MIME type, "text/plain", is not "text/css". @ http://sfackler.com/doc/postgres/index.html
[04:09:34] <sfackler> ah, thanks
[04:10:28] <Eridius> odd, Safari isn't even showing a request for normalize.css
[04:10:44] <cmr> Eridius: it's @import'd in main.css
[04:10:57] <sfackler> yeah, chrome doesn't show any errors, it just doesn't load it
[04:10:58] <Eridius> cmr: yes, but I don't see the request in the network logger
[04:11:03] <Eridius> though it says main.css is text/plain
[04:11:19] <Eridius> oh that's what you said. I thought you were talking about normalize.css
[04:11:46] *** Joins: CurlyBrace (Mibbit@moz-8914EA71.washdc.fios.verizon.net)
[04:13:15] <sfackler> yay working docs!
[04:13:52] *** Joins: ksev (DrunkenPan@moz-71F7E457.cable.teksavvy.com)
[04:14:41] <CurlyBrace> Can anyone help me with an OS question?
[04:14:53] <cmr> CurlyBrace: shoot
[04:15:12] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Quit: Leaving)
[04:15:37] <CurlyBrace> I'm working on that problem where we are implementing a rust shell, trying to figure out how to do '<' and '>'
[04:16:05] <CurlyBrace> I thought that the way to do it was to change fd_in or fd_out in the processoptions struct to a file descriptor
[04:16:07] <CurlyBrace> is this correct?
[04:17:12] *** Quits: Ferreus (ferreus@moz-8A4B42D4.dyn.telefonica.de) (Ping timeout)
[04:17:27] *** Quits: six600110 (six600110@moz-3C5CCD60.neo.res.rr.com) (Ping timeout)
[04:17:48] <exia> so how does one map a io::reader's output as a file descriptor integer that i can pipe into a process?
[04:18:45] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[04:20:51] <dbaupp> exia: you can't
[04:21:00] <dbaupp> CurlyBrace: that sounds correct yes
[04:21:16] <cmr> Well, couldn't you create a pipe, give the fd the read, and write the reader into the pipe?
[04:21:22] <cmr> *read end
[04:21:45] <dbaupp> cmr: does Rust have fd-able pipes?
[04:21:57] <cmr> I mean a posix pipe
[04:22:03] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[04:22:15] <cmr> I don't know if Rust has a wrapper yet
[04:22:45] <dbaupp> yep
[04:23:25] <CurlyBrace> NOT run::processOutput?
[04:26:43] *** Quits: dandy (Dandy@moz-84CC8377.hsd1.co.comcast.net) (Quit: Leaving)
[04:27:02] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[04:27:08] <exia> well i'm trying to implement "<" redirection, so if were to do sort < aaa.txt, i need the content of the aaa.txt passed as stdin of sort, which i will run as a process
[04:27:24] <exia> so i guess one could do process_output...
[04:27:39] <CurlyBrace> exia, are you asking the same question, or are you trying to answer my question?
[04:28:21] <cmr> You should probably be using std::libc::open, not std::io or anything else.
[04:28:26] <dbaupp> exia: you probably want std::libc::open
[04:28:31] <dbaupp> heh
[04:28:44] <dbaupp> CurlyBrace: (you also want that, I guess)
[04:29:29] <exia> yeah, i'm just trying to figure out where in_fd fits into all of this, but thank you. i will try libc::open for now!
[04:29:47] <dbaupp> and yes, you'll need to use `ProcessOptions { fd_in: Some(x), fd_out: Some(x), .. ProcessOptions::new() }` (or something like that) + Process::new
[04:30:15] <CurlyBrace> thanks, dbaupp
[04:30:38] <CurlyBrace> I get that last part, but I am still stuck on how to get libc::open connected to the ProcessOptions struct
[04:30:48] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:30:55] <cmr> libc::open returns an fd. ProcessOptions takes fds.
[04:31:02] <CurlyBrace> I'm pretty sure I am just very lost on the syntax at this stage, and I hate to bother you guys about that
[04:31:03] <dbaupp> libc::open returns a c_int which is the file descriptior you need to pass to ProcessOptions
[04:31:14] <CurlyBrace> oh, duh
[04:31:20] <CurlyBrace> Thanks, I will try that shortly...
[04:33:04] *** Quits: ksev (DrunkenPan@moz-71F7E457.cable.teksavvy.com) (Ping timeout)
[04:34:09] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:34:59] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[04:35:50] <dbaupp> rusti: #[fixed_stack_segment] fn go() { use std::{libc, run}; unsafe { let fd = do "/etc/passwd".with_c_str |cstr| { libc::open(cstr, libc::O_RDONLY, 0) }; let output = run::Process::new("cat", [], run::ProcessOptions { in_fd: Some(fd), .. run::ProcessOptions::new() }).finish_with_output(); print(std::str::from_utf8_owned(output.output)) } } go()
[04:35:51] -rusti- pastebinned 11 lines of output: http://sprunge.us/KITM
[04:36:01] *** Quits: ziad (ziad@moz-5003F925.members.linode.com) (Quit: WeeChat 0.3.8)
[04:36:01] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[04:36:12] <dbaupp> CurlyBrace, exia: if you can decypher that^ ...
[04:36:29] <CurlyBrace> That, or something similar, has been posted before
[04:36:45] <CurlyBrace> but I have no idea how the fixed stack segment fits in syntatically
[04:36:45] * dbaupp posted something like that yesterday
[04:36:51] <CurlyBrace> ^
[04:36:52] <cmr> CurlyBrace: It's an attribute.
[04:36:59] <cmr> It adds metadata to an item.
[04:37:01] <CurlyBrace> Yeah, thanks again for answering our redundant questions
[04:37:23] <dbaupp> http://static.rust-lang.org/doc/master/rust.html#attributes
[04:37:24] <exia> thank you!
[04:37:38] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:38:04] <dbaupp> http://static.rust-lang.org/doc/master/tutorial-ffi.html describes fixed_stack_segment itself in more detail
[04:40:06] <Eridius> well damn, linux killed the rust compiler on my linode (not surprising)
[04:40:18] *** Joins: GeneralMaximus (ankur@BA07138C.9925E880.493B1C0B.IP)
[04:41:22] *** Quits: jdsanders (Adium@moz-F45527D6.hlrn.qwest.net) (Quit: Leaving.)
[04:41:32] *** Joins: jdsanders (Adium@moz-F45527D6.hlrn.qwest.net)
[04:44:34] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[04:44:42] <CurlyBrace> I can't get that segment of code to work, the compiler is expecting a ':' instead of a '::'???
[04:44:43] <CurlyBrace> http://paste.ubuntu.com/6174181/
[04:45:15] *** Joins: binroot (Mibbit@moz-60878DF8.hsd1.va.comcast.net)
[04:45:29] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:45:34] <binroot> How do I convert a ~str to &'static?
[04:45:48] <strcat> you can't
[04:45:56] <CurlyBrace> make a non-mut copy, maybe?
[04:46:00] <CurlyBrace> Or does that not work?
[04:46:21] <dbaupp> CurlyBrace: where?
[04:46:21] <binroot> I have a static mut that I want to update
[04:46:45] <strcat> binroot: you can't write to string constants
[04:46:52] <binroot> oh
[04:46:56] <strcat> even in a static mut
[04:46:59] <dbaupp> CurlyBrace: oh, it's the run::ProcessOptions::new()
[04:47:05] <CurlyBrace> Yeah ^
[04:47:19] *** Quits: aeqwa (aeqwa@moz-E0502FA3.dsl.tropolys.de) (Ping timeout)
[04:47:35] *** Joins: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP)
[04:47:41] <binroot> strcat: do you suggest I pass the str in via a method instead?
[04:47:50] <dbaupp> CurlyBrace: you can write Struct { foo: bar, baz, qux, .. original } with the `..` which will copy the fields not explcitily set from `original`
[04:48:14] <strcat> binroot: don't know what your use case is
[04:48:41] <dbaupp> CurlyBrace: so `ProcessOptions [ in_fd: Some(fd), .. run::ProcessOptions::new() }` will set in_fd to something specific and let the other fields be their default value
[04:49:07] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[04:49:11] <CurlyBrace> Hah, I thought I had to fill it in manually
[04:50:26] <CurlyBrace> It now doesn't recognize 'from_utf8_owned' - is this new to 0.8?  I'm still on 0.7
[04:51:21] <dbaupp> it was probably from_bytes_owned then
[04:51:39] <cmr> or even just from_bytes, if it didn't have the _owned optimization
[04:51:44] *** Joins: aeqwa (aeqwa@moz-5EB2D7BB.dsl.tropolys.de)
[04:51:53] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[04:52:19] *** Quits: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com) (Ping timeout)
[04:52:44] *** Joins: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com)
[04:53:02] *** Joins: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP)
[04:53:14] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[04:53:27] <CurlyBrace> any suggestions?  Should I upgrade to 0.8? =\
[04:53:41] <cmr> use from_bytes
[04:53:45] *** Joins: mudpit (Mibbit@moz-AD1BD40D.moldtelecom.md)
[04:53:50] *** Quits: KindOne (KindOne@moz-EB454250.dynamic.ip.windstream.net) (Ping timeout)
[04:53:58] *** Quits: mudpit (Mibbit@moz-AD1BD40D.moldtelecom.md) (Quit: http://www.mibbit.com ajax IRC Client)
[04:54:47] *** Joins: KindOne (KindOne@moz-EB454250.dynamic.ip.windstream.net)
[04:54:59] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[04:55:22] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[04:56:03] <CurlyBrace> Thanks...now its having a hard time getting a method from the string
[04:56:22] <CurlyBrace> that is, the "/etc/passwd".with_c_str - it can't see the with_c_str method
[04:56:31] <cmr> .as_c_str in 0.7
[04:56:31] <dbaupp> ah, as_c_str
[04:57:04] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[04:57:13] <CurlyBrace> I saw it referenced earlier this month, so I assumed it was 0.7, forgot 0.8 was already out by then!
[04:57:20] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten)
[04:57:28] <cmr> well, 0.8 was released like 4 days ago
[04:57:49] *** Quits: GeneralMaximus (ankur@BA07138C.9925E880.493B1C0B.IP) (Quit: Textual IRC Client: www.textualapp.com)
[04:58:18] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[04:58:56] <CurlyBrace> Officially, yeah...thanks again!
[04:59:08] *** Quits: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[05:00:59] *** Quits: aeqwa (aeqwa@moz-5EB2D7BB.dsl.tropolys.de) (Quit: Lost terminal)
[05:02:03] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[05:02:04] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[05:02:29] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[05:04:39] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[05:05:58] <cmr> dbaupp: Hah, I beat to that response on piazza :D
[05:06:20] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[05:07:59] <myname> what's the reason as_c_str was replaced with with_c_str?
[05:08:19] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[05:08:23] <dbaupp> cmr: mine is now more detailed :P
[05:08:25] <CurlyBrace> which response?
[05:08:56] <cmr> Dammit!
[05:09:03] <cmr> CurlyBrace: https://piazza.com/class/hiuvlqlyk4925d?cid=67
[05:09:05] <Eridius> myname: as_* implies no allocation. with_c_str allocates
[05:09:08] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[05:09:10] <Eridius> myname: because ~str no longer is nul-terminated
[05:09:25] <Eridius> the old as_c_str would sometimes allocate too, depending on if it was called on a ~str or on a slice that didn't include the nul terminator
[05:09:28] <myname> i see
[05:09:34] <CurlyBrace> oooh, thought you meant the redirect part
[05:09:44] <dbaupp> myname: (it's just a convention)
[05:10:03] <myname> yeah, i expected something like a cast
[05:10:12] <myname> like (~"foo" as c_str)
[05:10:24] *** Joins: smerft (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net)
[05:11:41] <smerft> hey, trying to use gdb to debug rustc -Z extra-debug-info -Z no-opt code, but I still often get no local variables for many stack frames.  Is there any way to improve the situation?
[05:11:57] <cmr> smerft: no
[05:12:07] <smerft> sad face
[05:12:12] <cmr> (besides actually submitting a patch for debuginfo)
[05:12:23] <smerft> heh
[05:12:23] *** Quits: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com) (Ping timeout)
[05:12:37] <smerft> its lack of debuginfo in places then?
[05:12:47] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[05:12:50] *** Joins: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com)
[05:13:36] <dbaupp> smerft: what version of rust are you using?
[05:14:40] <Luqman> also, we can't build the libstd/extra with debuginfo yet
[05:15:09] <smerft> 0.8
[05:15:18] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[05:15:47] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[05:15:57] <dbaupp> smerft: if you've got a small(ish) example of it, you could/should file a bug :)
[05:16:37] <cmr> I love the new docs so much
[05:17:39] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[05:18:23] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[05:18:55] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[05:20:03] *** Joins: nrc (nrc@69827E11.2BFB5F16.7D44F35.IP)
[05:20:10] <smerft> dbaupp: ok
[05:20:37] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[05:24:14] <smerft> dbaupp: I'm just surprised that debuginfo isn't done
[05:24:38] <cmr> smerft: done? it was started this summer as a GSoC project
[05:24:43] <dbaupp> smerft: 3 months ago it was *entirely* broken, so don't be so surprised :P
[05:24:54] <smerft> lol, didn't realize
[05:25:05] <dbaupp> haha :)
[05:25:13] <cmr> The amount of progress mw made astounds me.
[05:25:44] <smerft> in 3 months??... truly astounding 
[05:26:37] <smerft> did somebody take over after the summer?
[05:26:44] <cmr> No
[05:26:51] *** Joins: victorporof (victorporo@16E89FDD.B0D0881A.79933D60.IP)
[05:26:52] <cmr> Though I think mw might continue contributing? Not sure.
[05:26:58] <smerft> ok
[05:27:36] <dbaupp> cmr: what he's said on reddit/the issue tracker seems to imply he'll still be around
[05:27:42] <smerft> an strace like facility .... would go a long ways
[05:27:52] <smerft> in lieu of debuginfo
[05:28:00] <cmr> smerft: ltrace? :P
[05:28:02] *** Quits: victorporof_ (victorporo@16E89FDD.B0D0881A.79933D60.IP) (Ping timeout)
[05:28:40] *** Quits: jdsanders (Adium@moz-F45527D6.hlrn.qwest.net) (Quit: Leaving.)
[05:28:55] <smerft> hmm... didn't know about ltrace ?!  does it work on rust ?
[05:29:35] <cmr> Yeah, works everywhere.
[05:29:41] <smerft> dang
[05:29:43] <smerft> nice
[05:30:10] <cmr> Although it probably doesn't work for internal function calls (since they don't happen across a library boundary)
[05:30:26] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:30:46] <cmr> I don't remember how exactly ltrace works, but I think it does unholy things to the PLT
[05:31:15] <dbaupp> smerft: there's always good old println!("{:?}", foo) for debugging too
[05:31:21] <CurlyBrace> ^
[05:31:36] <CurlyBrace> classics exist for a reason
[05:31:37] <cmr> Or debug2!, since you can leave those in ;p
[05:36:24] *** Joins: Ferreus (ferreus@moz-8A4B42D4.dyn.telefonica.de)
[05:36:51] <CurlyBrace> Ferreus
[05:36:55] <CurlyBrace> good rust name
[05:37:19] <Ferreus> haha
[05:37:33] <exia> how does one convert ~str to pure str so that with_c_str works without "attempted to take value of method `as_c_str` on type `~str`" error?
[05:37:51] <cmr> exia: there's no such thing as "pure str"
[05:38:19] <cmr> exia: paste your code somewhere, that error usually means you're trying to do `let foo = some_type.method` (ie, forgetting the parens)
[05:39:48] <exia> oh wait...thank. let me try putting parens 
[05:41:48] *** Joins: ksev (DrunkenPan@moz-71F7E457.cable.teksavvy.com)
[05:43:40] *** Quits: ksev (DrunkenPan@moz-71F7E457.cable.teksavvy.com) (Ping timeout)
[05:44:53] <smerft> darn, ltrace is only showing me the first call to unstable::lang::start
[05:46:00] *** Quits: nrc (nrc@69827E11.2BFB5F16.7D44F35.IP) (Ping timeout)
[05:46:16] <smerft> maybe I need to make everything pub to get tracing/
[05:46:17] <smerft> ?
[05:46:29] *** Quits: ged (deveiant@moz-610E9711.org) (Ping timeout)
[05:50:13] *** Joins: ged (deveiant@moz-610E9711.org)
[05:53:38] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[05:55:18] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[05:55:20] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:55:33] *** Quits: smerft (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:56:17] *** Quits: ged (deveiant@moz-610E9711.org) (Ping timeout)
[05:58:26] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:01:35] *** Joins: ged (deveiant@moz-610E9711.org)
[06:04:12] <CurlyBrace> ping rust.irc
[06:05:02] <Luqman> hi CurlyBrace 
[06:05:12] <sam113101> pong
[06:05:14] *** Quits: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP) (Quit: z0w0)
[06:05:41] <CurlyBrace> I was expecting latency statistics, but that works too :P
[06:06:08] <dbaupp> 132 ms
[06:06:11] <sam113101> 61 273 ms
[06:07:02] <CurlyBrace> sam, your ping is over a minute.  wat.
[06:07:04] <sam113101> 71 273 ms*
[06:07:17] <sam113101> wait no
[06:07:21] <sam113101> 61 273 ms*
[06:07:28] *** Quits: binroot (Mibbit@moz-60878DF8.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:07:34] <sam113101> i-it was
[06:08:14] <CurlyBrace> ???
[06:08:40] <sam113101> our mutual ping, man, not the ping to the actual server
[06:09:05] <sam113101> took me 61 seconds to pong you back
[06:09:07] *** Quits: ged (deveiant@moz-610E9711.org) (Ping timeout)
[06:09:16] <sam113101> whatever
[06:09:30] <sam113101> SEE? THAT'S WHAT HAPPENS WHEN YOU DON'T PONG BACK
[06:10:10] *** Joins: dandy (dandy@moz-84CC8377.hsd1.co.comcast.net)
[06:10:10] *** Joins: fabiand (fabiand@moz-80F22D21.adsl.alicedsl.de)
[06:10:29] *** Joins: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu)
[06:10:58] <dbaupp> can a windows user help on this https://github.com/mozilla/rust/issues/9618 ?
[06:11:04] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[06:11:06] *** Joins: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP)
[06:11:18] <dandy> why is let a = Point{x:1,y:2} OK for struct Point but let b = Point<int>{x:1,y:2} not OK for Point<T> ? What is the correct way to make a generic point?
[06:11:28] <dbaupp> I'm guessing it may be because something in the environement is not utf8 but I don't know how to check that.
[06:12:14] <dbaupp> dandy: rely on type inference, give type annotations to the literals (e.g. 1i), or one to b (e.g. b: Point<int> = Point ...)
[06:12:21] *** Joins: squiddy (squiddy@moz-5FBA6F70.adsl.alicedsl.de)
[06:12:47] <dbaupp> rusti: struct Point<T> { x: T, y: T } let b = Point::<u8> { x: 1, y: 2 }; b
[06:12:48] -rusti- main::Point<int>{x: 1, y: 2}
[06:12:58] <dbaupp> dandy: or that^
[06:13:08] * dbaupp doesn't understand the <int> :S
[06:13:09] <dandy> dbaupp, Point::<u8> ... wtf is that???
[06:13:28] <dbaupp> dandy: same as what you wrote, but with the correct syntax :P
[06:13:39] <jason_> u8 is apparently an int.
[06:13:51] <dandy> I have not seen that ::<T> anywhere yet
[06:13:59] <jason_> rusti is running on an 8 bit micro
[06:14:33] <dbaupp> oh, I think it mgiht be being ignored
[06:14:46] <jason_> that'd make more sense
[06:15:07] <dbaupp> rusti: struct Point<T> { x: T, y: T } let b: Point<i64> = Point::<u8> { x: 1, y: 2 }; b
[06:15:07] -rusti- main::Point<i64>{x: 1i64, y: 2i64}
[06:15:10] *** Quits: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu) (Ping timeout)
[06:15:27] <jason_> rusti: struct Point<T> { x: T, y: T } let b : Point<u8> = Point{ x: 1, y: 2 }; b
[06:15:28] -rusti- main::Point<u8>{x: 1u8, y: 2u8}
[06:15:41] <dbaupp> dandy: it's how one can specific the concrete types of generics in an expression context
[06:16:06] <dbaupp> it avoids the problems C++ has with being impossible to parse because of the ambiguity of comparisons and templates
[06:16:12] <dandy> let thing : Point<int> = Point{x:1,y:2}; works, is there a shorter way to say that?
[06:16:41] <jason_> rusti: struct Point<T> { x: T, y: T } let b = Point{ x: 1u8, y: 2u8 }; b
[06:16:41] <dbaupp> isn't `let thing = Point { x: 1, y: 2 }` working?
[06:16:41] -rusti- main::Point<u8>{x: 1u8, y: 2u8}
[06:16:48] <Luqman> maybe let thing = Point { x: 1i, y:2i };
[06:16:48] <dandy> dbaupp, thanks for the info
[06:16:51] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[06:17:10] <dandy> no
[06:17:14] <dbaupp> jason_: only need the u8 suffix on one of the fields, Rust will infer the other one
[06:17:27] <dbaupp> (fwiw)
[06:17:28] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[06:17:35] <dandy> because when I try to do thing.y.to_str() I get a bunch of errors, ambiguity I guess
[06:17:39] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[06:17:50] <jason_> rusti: struct Point<T> { x: T, y: T } let b = Point{ x: 1, y: 2u8 }; b
[06:17:55] -rusti- main::Point<u8>{x: 1u8, y: 2u8}
[06:18:07] <jason_> neat
[06:18:13] <dbaupp> (btw, https://github.com/mozilla/rust/issues/9620)
[06:18:35] <dandy> rusti: struct P<T> { x: T, y: T} let b = Point{x:1,y:2};x.to_str();
[06:18:50] <dandy> did I kill it?
[06:19:06] -rusti- pastebinned 8 lines of output: http://sprunge.us/YDRQ
[06:19:10] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[06:19:17] <dbaupp> rusti: struct P<T> { x: T, y: T} let b = Point{x:1,y:2}; b.x.to_str();
[06:19:27] -rusti- <anon>:7:43: 7:48 error: `Point` does not name a structure
[06:19:31] <dandy> aaand I'm dumb
[06:19:34] -rusti- <anon>:7          struct P<T> { x: T, y: T} let b = Point{x:1,y:2}; b.x.to_str();
[06:19:34] -rusti-                                                     ^~~~~
[06:19:34] -rusti- error: aborting due to previous error
[06:19:34] -rusti- application terminated with error code 101
[06:19:39] <jason_> rusti: struct Point<T> { x: T, y: T } let b = Point{ x: 1, y: 2u8 }; b.x.to_str()
[06:19:39] <dbaupp> rusti: struct Point<T> { x: T, y: T} let b = Point{x:1,y:2}; b.x.to_str()
[06:19:41] -rusti- ~"1"
[06:19:48] -rusti- pastebinned 35 lines of output: http://sprunge.us/LdEM
[06:20:02] <dandy> yeah that is not what I expected
[06:20:05] <dbaupp> hah, those errors are so much fun
[06:20:20] * dbaupp loves the huge spew of "candidates"
[06:20:22] <dandy> Because it really should be like "aye yo thats a Point<int> over there
[06:20:45] <jason_> rusti: struct Point<T> { x: T, y: T } let b = Point{ x: 1, y: 2i }; b.x.to_str()
[06:20:55] -rusti- ~"1"
[06:21:06] <dandy> oh
[06:21:20] <jason_> the i makes all the difference :)
[06:22:06] <jason_> otherwise its left guessing what 1 and 2 could be and it gives you all the candidates
[06:22:07] <CurlyBrace> rusti automagically pastebins?  Woah.
[06:22:11] *** Joins: eatkinson (eatkinson@moz-C2126207.airbears2.berkeley.edu)
[06:22:37] <CurlyBrace> rusti: std::io::println("I'm a good bot");
[06:22:38] <jason_> odd that it works until you try to use b.x
[06:22:40] -rusti- I'm a good bot
[06:22:44] -rusti- ()
[06:23:04] <dandy> jason_, that was part of my confusion
[06:23:40] <dandy> After dealing with rust for 2 weeks I instantiated my first type YAY
[06:23:52] <CurlyBrace> How...dandy.
[06:24:01] <dandy> with the = operator!
[06:24:14] <dandy> rust makes me feel so stupid...
[06:24:24] <dandy> I still like it though
[06:24:59] <dandy> the first week was spent getting it to build
[06:25:42] <dandy> thanks for the help people
[06:26:29] *** Quits: eatkinson (eatkinson@moz-C2126207.airbears2.berkeley.edu) (Ping timeout)
[06:27:05] <CurlyBrace> Hmm, I'm having an issue with asynchronous processes
[06:27:07] <CurlyBrace> I
[06:27:24] <CurlyBrace> I;m trying spawn, but I'm still getting locked out
[06:27:34] <dbaupp> https://github.com/huonw/multibuilder/blob/master/task_worker.rs#L25
[06:27:35] <dbaupp> spawn_sched
[06:27:43] *** Quits: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP) (Ping timeout)
[06:27:57] <dbaupp> (assuming you're std::run-ning something)
[06:28:58] <strcat>  src/libsyntax/syntax                  | Bin 0 -> 8435744 bytes
[06:28:58] <strcat> ;\
[06:29:24] <Eridius> o_O
[06:30:23] <dbaupp> strcat: haha, any test-case binaries too?
[06:30:39] <dandy> rusti: let (x,y) = (1_f64,2_f64); let p = Point{x:x,y:y}; p.y.to_str() // a real use case, looks good here
[06:31:13] -rusti- <anon>:7:44: 7:49 error: `Point` does not name a structure
[06:31:27] <strcat> the git repo is getting really huge from all these binaries
[06:31:45] -rusti- <anon>:7          let (x,y) = (1_f64,2_f64); let p = Point{x:x,y:y}; p.y.to_str() // a real use case, looks good here
[06:31:45] -rusti-                                                      ^~~~~
[06:31:45] -rusti- error: aborting due to previous error
[06:31:45] -rusti- application terminated with error code 101
[06:31:50] <strcat> one day we're going to have to rebase them out
[06:31:58] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[06:31:59] <Eridius> why are there binaries in there?
[06:32:04] <dandy> Literals will probably only be common in tests.
[06:33:28] <strcat> Eridius: because they get added and slip past review and then get removed in a follow-up commit (but it's too late, at that point)
[06:33:33] <Eridius> :/
[06:33:43] <Eridius> review is sometimes a bit too lax
[06:33:46] <olsonjeffery> strcat: bins of what? build artifacts?
[06:33:49] <strcat> every time you git clone rust, you download a bunch of huge binaries
[06:34:07] <dbaupp> test/run-pass/issue-3559 test/run-pass/issue-3702 test/run-pass/issue-4016 test/run-pass/issue-4092, apparently too :(
[06:34:15] <Eridius> people also need to stop using `git add -A` unless they really want to add new files
[06:34:25] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[06:34:39] <strcat> olsonjeffery: accidentally added binaries in the history
[06:34:39] <strcat> there are a lot
[06:34:39] <strcat> dbaupp: yeah, but there are hundreds throughout the history
[06:34:52] <dbaupp> strcat: I know :/
[06:34:54] <strcat> you can have git list them
[06:35:02] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[06:35:13] * dbaupp has submitted more than one PR removing accidental binaries
[06:35:22] <jason_> git add -A and git push --tags should have never been done
[06:35:41] *** Joins: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp)
[06:35:51] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[06:35:52] * ChrisMorgan has submitted only one PR removing an accidental binary
[06:36:01] *** Quits: Ralith (ralith@moz-36466B9F.customer.broadstripe.net) (Ping timeout)
[06:36:32] <olsonjeffery> nobody wants to take credit for adding the bins!
[06:37:20] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[06:37:22] <olsonjeffery> pretty sure im such a pedestrian that ive never worked on anything that would allow an accidental bin checkin
[06:37:25] *** Joins: threecreepio (jdp@moz-9C11F46E.cust.bredbandsbolaget.se)
[06:37:30] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[06:38:02] <olsonjeffery> also i think im the only person i know willing to admit to using git gui for checkins
[06:38:10] *** Quits: exia (Mibbit@AC28E72A.17A0D1EC.B7830B68.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:39:11] * strcat just uses git commit -a or git commit -p 90% of the time
[06:39:12] <olsonjeffery> commits, whatever.
[06:39:56] <olsonjeffery> yeah i use -a a bit.. i also like to squirrel stuff away by amending the previous commit, too.
[06:40:16] <olsonjeffery> but the convenience of being able to visually review whats files are changed/added/removed, plus diffs, in one place. is nice.
[06:40:22] *** Joins: Ralith (ralith@moz-36466B9F.customer.broadstripe.net)
[06:40:48] <strcat> olsonjeffery: well I end up doing a lot of amend/rebase too
[06:40:51] <olsonjeffery> if there's a cli command for that, i missed it
[06:41:07] *** Quits: dandy (dandy@moz-84CC8377.hsd1.co.comcast.net) (Quit: Leaving)
[06:41:24] *** Joins: pyrac (pyrac@moz-D335AC7D.math.u-bordeaux1.fr)
[06:41:45] <olsonjeffery> the one thing i missed.. i *really* miss from hg
[06:41:48] <olsonjeffery> is definitely patch queues
[06:41:59] <olsonjeffery> but amend + stash + rebase gets you pretty close.
[06:42:12] <olsonjeffery> there aren't currently maintained patch-queue plugins for git, last i checked :/
[06:42:30] <olsonjeffery> also that git has a real rebase, heh.
[06:42:41] <ChrisMorgan> hg has real rebase.
[06:42:45] <olsonjeffery> i borked a few local repos with hg rebases that went sideways (i guess that's why they aren't enabled by default)
[06:42:59] <olsonjeffery> ChrisMorgan: ive had bad experiences with them
[06:43:04] * ChrisMorgan doesn't use mq often, but still much prefers hg to git
[06:43:05] <olsonjeffery> probably pebkac
[06:43:15] <olsonjeffery> but ive never put a local repo sideways with a bad git rebase
[06:43:27] *** Quits: threecreepio (jdp@moz-9C11F46E.cust.bredbandsbolaget.se) (Quit: threecreepio)
[06:44:13] *** Quits: tautologico (lymph@7A53DAF8.92451A23.6EB699AE.IP) (Quit: tautologico)
[06:44:14] *** Parts: dLog (anonymous@moz-8FAE8709.eastlink.ca) (Leaving)
[06:44:41] <strcat> there are a lot942ee88bd0e36715f8f61ef69bbc26b7ccfbd83e 8435744 src/libsyntax/syntax
[06:44:42] <strcat> er
[06:44:45] <strcat> 942ee88bd0e36715f8f61ef69bbc26b7ccfbd83e 8435744 src/libsyntax/syntax
[06:44:48] <strcat> 790c07db685e3464ca485f2b30084f1c2d68ce15 9455580 src/libcore/core
[06:44:50] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[06:44:51] <strcat> are the two worst
[06:46:33] <strcat> the syntax one was just merged 4 hrs ago
[06:46:37] <strcat> maybe we should remove it
[06:46:41] <strcat> for real, I mean
[06:47:37] <klutzy> rebase-and-pull-force?
[06:48:02] <olsonjeffery> rogue contributor detected. alpha team, move in. brave team, stay back! i repeat: STAY BACK!
[06:48:44] <dbaupp> gah, oops. I reviewed the one that added src/libsyntax/syntax :'(
[06:48:56] *** Joins: mindcat (mindcat@6154B326.DC005319.857BDFA9.IP)
[06:49:07] <olsonjeffery> i have nothing but snark. im going to bed. night everyone.
[06:49:11] <olsonjeffery> *sad code review trombone*
[06:49:15] * strcat wonders if it's worth breaking everyone's clone from the last 4 hours to remove it
[06:49:24] <jason_> why does std::io::BytesWriter use pos: @mut uint instead of just pos: mut uint ?
[06:49:29] <olsonjeffery> strcat: the buildbots would certainly appreciate it!
[06:49:41] <dbaupp> jason_: because badness :(
[06:49:41] <olsonjeffery> srsly, tho: tell brson in the morning.
[06:49:46] <strcat> well, it's gone
[06:49:48] <strcat> just 4 hours.
[06:49:49] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[06:50:17] <strcat> stupid git... ;\
[06:50:18] <jason_> dbaupp: i'll clean that up too i guess
[06:50:40] <dbaupp> strcat: did you kill the merge commits too?
[06:50:55] <strcat> dbaupp: no, they go away when you rebase afaik
[06:51:05] <dbaupp> strcat: oh, ok
[06:51:49] *** Quits: mindcat (mindcat@6154B326.DC005319.857BDFA9.IP) (Ping timeout)
[06:52:20] <strcat> anyway we can never fix the old ones because it would break everyone's branches + break the tags
[06:52:38] <strcat> but there's no point in adding 9MiB for all eternity to save 4 hours ;p
[06:52:45] <strcat> 4 hours worth*
[06:52:59] <dbaupp> how much space are the old ones using atm?
[06:53:24] <strcat> 790c07db685e3464ca485f2b30084f1c2d68ce15 9455580 src/libcore/core
[06:53:30] <strcat> 11f7119c95d76ac8e2557a659fc9ceb1b23f0fad 1518455 src/rustdoc/rustdoc
[06:53:35] <strcat> 50ff84ee0bcfc2359b36d0a4471a0f3f9a955aa7 294724 src/serializer/serializer
[06:54:00] <Eridius> origin/master no longer seems to be the commit it used to be
[06:54:00] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[06:54:02] <strcat> the test ones are mostly small
[06:54:07] <Eridius> seems like everything after 'Remove all usage' is gone
[06:54:25] <strcat> Eridius: yes, I decided to break the last 4 hours worth to remove the libsyntax binary
[06:54:32] <Eridius> strcat: yes, but you didn't restore the subsequent history
[06:54:43] * strcat shrugs
[06:54:46] <strcat> I'll reset it to how it was then
[06:54:47] *** Joins: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu)
[06:54:47] <Eridius> in fact, origin/master now points in the middle of acrichto's branch
[06:55:42] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[06:55:49] * strcat won't try to fix it
[06:56:02] <Eridius> strcat: if you want to fix it, git-filter-branch is your friend
[06:56:18] <strcat> don't really care
[06:56:24] <strcat> just 9MiB
[06:57:04] <strcat> I wish you could make pre-commit hooks mandatory
[06:57:31] <Eridius> strcat: if you have control over the server you can use a pre-receive hook, but I know github doesn't really give you much in the way of hooks
[06:57:45] <strcat> could put it on the buildbots
[06:57:52] *** Joins: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP)
[06:57:52] <ChrisMorgan> True!
[06:58:11] <Eridius> maybe just add a pass to `make check` that verifies that binaries aren't checked in
[06:58:33] <Eridius> though I'm not quite sure what form that would take, aside from just a negative test on libstd/std, libextra/extra, etc
[06:58:33] <dbaupp> `tidy` would be a good start, I guess.
[06:59:04] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[06:59:19] <Eridius> ok, I verified that I can set up an AWS EC2 instance, install git/gcc/gcc-c++, and ./configure rust. Dare I buy a m1.medium and try and build my path rewrite?
[06:59:20] <dbaupp> finding files that contain `\0` with a whitelist of allowed ones?
[06:59:39] <strcat> Eridius: https://github.com/mozilla/rust/issues/9621
[07:00:04] <Eridius> strcat: yay, now that it's filed we can promptly ignore it ;)
[07:00:17] <Eridius> dbaupp: or just check filesize?
[07:00:24] <Eridius> anything over 1MB needs to be whitelisted?
[07:00:24] *** Quits: ChrisMorgan (chris@moz-2C7FE4BF.its.monash.edu.au) (Ping timeout)
[07:00:38] *** Joins: five (five@moz-B8267EA4.v4.ngi.it)
[07:00:58] <Eridius> but honestly, review should catch this sort of thing. I know not everyone is very exhaustive in their reviewing though
[07:01:07] <Eridius> I forget who but someone told me that they mostly just check to make sure there's tests
[07:01:25] <dbaupp> $ du test/run-pass/issue-4016  test/run-pass/issue-3702 test/run-pass/issue-3559 test/run-pass/issue-4092
[07:01:25] <dbaupp> 12      test/run-pass/issue-4016
[07:01:25] <dbaupp> 16      test/run-pass/issue-3702
[07:01:25] <dbaupp> 12      test/run-pass/issue-355996      test/run-pass/issue-4092
[07:01:37] <dbaupp> erm, s/5996/59\n96/
[07:01:41] <strcat> dbaupp: yeah but there are a *ton* in a history
[07:01:52] <strcat> they take the same size if you delete them
[07:01:56] <dbaupp> strcat: just deomnstating that > 1MB isn't a filter
[07:02:02] <dbaupp> (for binary files)
[07:02:11] <klutzy> checking '.' in filename? :p
[07:02:14] <strcat> well it'd mean no more syntax/std/extra/rustc binaries
[07:02:43] *** Joins: threecreepio (jdp@moz-1A9F0A3C.cust.bredband2.com)
[07:02:44] <Eridius> dbaupp: bah
[07:02:53] <dbaupp> Eridius: github displays the binary files very very thin, so it's hard to pick up in the long repetitive PRs :(
[07:03:34] *** Joins: sergi (textual@moz-DB55470C.upc-a.chello.nl)
[07:03:45] *** Joins: mindcat (root@6154B326.DC005319.857BDFA9.IP)
[07:03:49] <klutzy> I sometimes think they should show random octonions for unknown binaries
[07:03:52] *** Quits: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[07:04:05] <klutzy> they are really unnoticable
[07:04:25] <Amaranth> Sounds like a job for a userscript or style
[07:04:49] <dbaupp> rusti: use r = std::rand::random; println!("{} + {}i + {}j + {}k", r::<f64>(),r::<f64>(),r::<f64>(),r::<f64>())
[07:04:50] -rusti- 0.897174 + 0.155765i + 0.391317j + 0.05625k
[07:04:50] -rusti- ()
[07:05:00] <dbaupp> random octonion ^
[07:05:16] <dbaupp> hm I possibly missed 4 dimensions, haha
[07:07:10] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[07:07:34] *** Quits: five (five@moz-B8267EA4.v4.ngi.it) (Ping timeout)
[07:07:35] <klutzy> oops, it meant octicons :p
[07:07:46] <dbaupp> octocats? :P
[07:07:56] *** Joins: five (five@moz-B8267EA4.v4.ngi.it)
[07:08:01] <Eridius> btw, is the try-linux bot 32- or 64-bit?
[07:08:14] <Eridius> and any idea what OS it's running?
[07:08:18] <jason_> how do i do this? struct Foo { x: mut ~[u8] }
[07:08:33] <Eridius> jason_: you don't. mutability of your x field is inherited from mutability of the entire struct
[07:08:38] <dbaupp> Eridius: configure: CFG_BUILD_TRIPLE     := x86_64-unknown-linux-gnu 
[07:08:40] <Eridius> jason_: so if you store your Foo struct in a mutable slot, then x is mutable
[07:08:50] *** Quits: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[07:08:57] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[07:09:03] <Eridius> dbaupp: ok that answers the bit question. unknown-linux is unfortunate
[07:09:09] <jason_> i see
[07:09:34] <dbaupp> Eridius: http://buildbot.rust-lang.org/builders/try-linux/builds/571 you can try (heh) digging throw the configure output of that
[07:09:45] <Eridius> dbaupp: that's my failed build! ;)
[07:09:46] <dbaupp> *through
[07:10:04] <dbaupp> Eridius: how about http://buildbot.rust-lang.org/builders/try-linux/builds/565 then :P
[07:10:09] * Eridius figures using the same OS would be a good idea since he's trying to replicate the ICE
[07:10:11] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[07:10:37] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[07:11:08] <dbaupp> rusti: struct Foo { x: ~[u8] } let mut b  = Foo { x: ~[1,2,3] }; b.x.push(4); b // jason_
[07:11:08] -rusti- error: internal compiler error: unexpected failure
[07:11:09] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[07:11:09] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[07:11:09] -rusti- main::Foo{x: ~[1u8, 2u8, 3u8, 4u8]}
[07:11:20] <dbaupp> (that ICE isn't related to that code)
[07:11:46] *** Joins: sankha93 (Instantbir@CAF6D3FF.9C875DCD.9105FBCF.IP)
[07:12:02] <jason_> so the funky BytesWriter { bytes: @mut ~[u8], pos: @mut uint, } is working around the inherited mutability of the struct
[07:12:14] <dbaupp> yeah
[07:12:37] <dbaupp> because old-io uses @Writer BytesWriter has to create it's own mutable slots
[07:12:41] <jason_> because Writer trait defines fn write(&self...) instead of write(&mut self) ?
[07:12:56] <dbaupp> that's part of it, yeah
[07:13:06] *** flaper87|afk is now known as flaper87
[07:13:17] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:14:08] *** Quits: mindcat (root@6154B326.DC005319.857BDFA9.IP) (Quit: Lost terminal)
[07:14:36] <jason_> so to clean this up i should start by trying to change Reader and Writer traits to take (&mut self) where the pos would need to be modified?
[07:16:38] <dbaupp> nope, std::rt::io is the upcoming replacement, and fixes all that
[07:16:57] <dbaupp> (so don't waste your energy fixing std::io)
[07:17:23] <dbaupp> (but, that would be the correct approach, in theory)
[07:17:54] <jason_> ahh ok
[07:18:43] <jason_> ok this makes what i originally wanted to do much easier
[07:20:10] <jason_> i just wanted to make a MemoryMapWriter, looks like std::rt::io::mem might be the right place to add that
[07:20:37] *** Quits: jdm (jdm@7F255D02.1B9223B5.AE2B2F80.IP) (Quit: Lost terminal)
[07:22:13] *** Joins: mib_me67es (Mibbit@moz-E9123974.hfc.dyn.abo.bbox.fr)
[07:22:19] <mib_me67es> hi
[07:22:36] *** Quits: mib_me67es (Mibbit@moz-E9123974.hfc.dyn.abo.bbox.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[07:22:51] <dbaupp> bye
[07:26:22] *** Quits: jaeman (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:31:06] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Connection reset by peer)
[07:31:06] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Connection reset by peer)
[07:31:23] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:32:57] *** Quits: sankha93 (Instantbir@CAF6D3FF.9C875DCD.9105FBCF.IP) (Quit: Gone to save the world!)
[07:34:57] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[07:35:27] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:35:40] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[07:36:27] *** Quits: CurlyBrace (Mibbit@moz-8914EA71.washdc.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[07:37:09] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[07:42:43] *** Quits: pyrac (pyrac@moz-D335AC7D.math.u-bordeaux1.fr) (Quit: pyrac)
[07:43:57] <SimonSapin> cmr: what about encodings?
[07:52:49] *** Joins: pyrac (pyrac@moz-D335AC7D.math.u-bordeaux1.fr)
[07:54:23] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[07:56:08] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[07:57:45] *** Joins: nkoep (nik@moz-2176A709.pool.mediaways.net)
[08:02:17] *** Joins: six600110 (six600110@moz-3C5CCD60.neo.res.rr.com)
[08:03:51] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[08:08:06] *** Joins: ged (deveiant@moz-610E9711.org)
[08:09:03] *** Quits: Jesin (Jessin_@moz-6EF909D6.cc.lehigh.edu) (Ping timeout)
[08:14:34] *** flaper87 is now known as flaper87|afk
[08:17:37] *** Quits: pyrac (pyrac@moz-D335AC7D.math.u-bordeaux1.fr) (Quit: pyrac)
[08:17:59] <dbaupp> cmr: is there a TWiR?
[08:20:30] *** Quits: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP) (Quit: z0w0)
[08:20:34] *** Quits: five (five@moz-B8267EA4.v4.ngi.it) (Quit: leaving)
[08:21:53] *** flaper87|afk is now known as flaper87
[08:22:30] *** Joins: tgummerer (tgummerer@moz-E367AFC5.kthopen.kth.se)
[08:25:19] *** Joins: pyrac (pyrac@moz-D335AC7D.math.u-bordeaux1.fr)
[08:29:21] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:31:16] *** Quits: tgummerer (tgummerer@moz-E367AFC5.kthopen.kth.se) (Ping timeout)
[08:31:30] *** Joins: tgummerer (tgummerer@moz-E367AFC5.kthopen.kth.se)
[08:34:52] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[08:35:03] *** Joins: arodier74 (Thunderbir@moz-25EB015.in-addr.btopenworld.com)
[08:35:06] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[08:35:55] *** Joins: skade (skade@moz-62C07CE7.dip0.t-ipconnect.de)
[08:36:54] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[08:41:20] *** Quits: tgummerer (tgummerer@moz-E367AFC5.kthopen.kth.se) (Ping timeout)
[08:41:41] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:42:24] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[08:47:32] *** Joins: tgummerer (tgummerer@moz-E367AFC5.kthopen.kth.se)
[08:49:46] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[08:50:44] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[08:50:50] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[08:50:50] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: nejucomo)
[08:54:45] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[08:55:15] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[08:55:25] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[08:56:27] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[08:58:07] *** Quits: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu) (Ping timeout)
[08:58:58] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[08:59:29] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[09:00:07] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[09:02:36] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[09:02:59] *** Joins: sankha93 (Instantbir@CAF6D3FF.9C875DCD.9105FBCF.IP)
[09:08:34] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[09:18:30] *** Quits: KindOne (KindOne@moz-EB454250.dynamic.ip.windstream.net) (Ping timeout)
[09:22:01] *** Joins: KindOne (KindOne@moz-E4A908AA.dynamic.ip.windstream.net)
[09:24:53] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Ping timeout)
[09:25:09] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[09:28:20] *** Quits: KindOne (KindOne@moz-E4A908AA.dynamic.ip.windstream.net) (Ping timeout)
[09:28:47] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[09:29:55] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[09:30:48] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Connection reset by peer)
[09:30:49] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[09:32:38] *** Joins: KindOne (KindOne@moz-8BF3E2EA.dynamic.ip.windstream.net)
[09:33:04] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[09:35:26] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[09:35:34] <Heather> does someone use rust-bindgen
[09:35:51] <Heather> it generates extern "C" { } for me and nothing goes there
[09:36:03] <Heather> I just can't get why
[09:37:00] <klutzy> could you paste the args you've used?
[09:38:14] <Heather> klutzy -l ctodo -o ctodo.rs ctodo.h
[09:38:44] <Heather> klutzy from what I understand it should work but it doesn't
[09:39:17] <Heather> klutzy I've got ctodo.dll there, and ctodo.h is externs listed in dll
[09:40:14] <Heather> klutzy I was trying to pass various files there, ctodo.c and even sqlite.h for test, but result is same { } nothing
[09:40:22] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[09:40:38] <Heather> klutzy what is it's logic?
[09:41:47] *** Quits: ofeldt (ofeldt@moz-DC6B58CF.dip0.t-ipconnect.de) (Ping timeout)
[09:42:03] <Heather> klutzy seriously it's so silent so I can't understand what it makes and when it fails
[09:43:48] <skade> is anyone aware of recent nightly builds floating around somewhere? linux-x86_64 would suffice.
[09:44:27] *** Quits: pyrac (pyrac@moz-D335AC7D.math.u-bordeaux1.fr) (Quit: pyrac)
[09:46:05] *** Joins: ofeldt (ofeldt@moz-DC6B58CF.dip0.t-ipconnect.de)
[09:46:48] <Heather> klutzy I just opened issue there
[09:47:34] *** Joins: andor (andor@moz-708868D.neferty.me)
[09:48:54] <andor> i'm probably doing something horribly wrong, but why do i get
[09:48:57] <andor> test.rs:20:14: 20:108 error: type `&std::rt::io::Listener<std::rt::io::net::tcp::TcpStream,std::rt::io::net::tcp::TcpAcceptor><no-bounds>` does not implement any method in scope named `listen`
[09:49:19] <andor> that doesn't make much sense, since Listener is the trait that defines it?
[09:50:53] <skade> andor: I had a similar problem here that somehow fixed itself by moving code into another crate :( https://github.com/skade/widmann/issues/1
[09:52:52] <andor> skade: eh, weird, but i'm just trying the new IO system 
[09:53:01] <andor> so i don't really want to mess around with crates
[09:53:45] <andor> maybe someone knows what's going on, or maybe i should open an issue
[09:54:19] <skade> Just wanted to indicate that it's probably a bug. I just couldn't reduce it properly.
[09:54:24] <andor> yeah
[09:54:37] <Heather> remind me how to run shell execute?
[09:55:08] <CarpNet> skade: there are nightly builds for Ubuntu and Arch Linux at the moment as far as i know: https://launchpad.net/~hansjorg/+archive/rust (Ubuntu) and https://mail.mozilla.org/pipermail/rust-dev/2013-May/004061.html (Arch)
[09:55:09] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[09:55:24] <andor> skade: even weirder though is that the tests from the standard library don't even work since they're written for non-Option<T> types
[09:55:32] <andor> but i guess that may be different in master by now
[09:56:55] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[09:58:11] <skade> CarpNet: Thanks, i didn't find the PPA. APT packages are fine.
[09:58:17] <Heather> btw what means error: k.rs is not UTF-8
[09:59:23] <Heather> ah I see
[09:59:30] <Heather> but still output is wrong -_-'
[10:03:30] *** Joins: SealedSun (Mibbit@moz-CD16210D.cust.bluewin.ch)
[10:12:09] *** Joins: xorcon (Mibbit@4A8C362F.1F8D2044.631472FF.IP)
[10:12:22] <Heather> Rust rust rust :( all the examples I see, all doesn't work
[10:13:11] <xorcon> 。。
[10:14:01] *** Quits: xorcon (Mibbit@4A8C362F.1F8D2044.631472FF.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:19:14] <andor> skade: i was just reading widmann's readme, why is 0.8 not good enough for it?
[10:21:14] <skade> andor: this fix is missing https://github.com/mozilla/rust/pull/9526
[10:21:55] <skade> so, basically, I couldn't get rust-http to build with it
[10:23:13] <andor> skade: oh, i thought it might have had something to do with the bug we both seem to have
[10:29:15] *** Joins: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp)
[10:30:10] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[10:31:01] *** Quits: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[10:31:28] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[10:37:14] *** Quits: tav (tav@moz-A6F69BA5.range86-185.btcentralplus.com) (Quit: tav)
[10:42:04] <Heather> https://github.com/mozilla/rust/blob/master/src/test/run-pass/syntax-extension-shell.rs - what is shell! ?
[10:46:58] <dbaupp> Heather: doesn't exist
[10:47:11] <dbaupp> (the test is marked "xfail-test", so isn't ever run)
[10:47:13] <Heather> dbaupp how to shell exec ?
[10:47:25] <Heather> dbaupp I remember there was something about run
[10:47:38] <Heather> dbaupp but hard googling reveals nothing
[10:48:25] <dbaupp> rusti: println(std::str::from_utf8_owned(std::run::process_output("echo", [~"hi", ~"Heather"]).output))
[10:48:26] -rusti- hi Heather
[10:48:26] -rusti- ()
[10:48:47] <dbaupp> rusti: println(std::str::from_utf8_owned(std::run::process_output("uname", [~"-a"]).output))
[10:48:48] -rusti- Linux playpen 3.11.2-1-ARCH #1 SMP PREEMPT Fri Sep 27 07:35:36 CEST 2013 x86_64 GNU/Linux
[10:48:49] -rusti- ()
[10:48:57] <Heather> dbaupp thanks )
[10:49:03] <Heather> dbaupp how to parse config files ? :)
[10:49:59] <dbaupp> what type of config files?
[10:50:44] <Heather> dbaupp ini-like
[10:50:55] *** Joins: timot (timot@moz-E599A11C.in-addr.nilings.se)
[10:51:06] <Heather> dbaupp but other types are also fine, yaml for example
[10:51:48] <Heather> dbaupp I think yaml even got advantage
[10:52:21] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[10:52:32] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[10:54:46] <dbaupp> Heather: well, there's extra::json for JSON, but nothing else
[10:54:58] <Heather> dbaupp is there something alike python os.chdir
[10:55:14] <dbaupp> yeah, std::os::change_dir or something like that
[10:55:32] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[10:55:55] <Heather> dbaupp is there place where all std::os , extra:: listed and explained so I can use search by keywords there
[10:56:10] <dbaupp> http://static.rust-lang.org/doc/master/std/index.html
[10:56:22] <dbaupp> http://static.rust-lang.org/doc/master/extra/index.html
[10:56:27] <Heather> dbaupp thank you
[10:57:14] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[10:59:26] *** Quits: sergi (textual@moz-DB55470C.upc-a.chello.nl) (Quit: Computer has gone to sleep.)
[10:59:33] <Heather> dbaupp change_dir force me to use Path which is posixPath or WindowsPath, what if I want crossplatform? write different code after match os?
[11:00:03] <dbaupp> rusti: Path("/this/is/cross/platform")
[11:00:04] -rusti- std::path::PosixPath{is_absolute: true, components: ~[~"this", ~"is", ~"cross", ~"platform"]}
[11:00:20] <Heather> dbaupp thanks
[11:00:33] <dbaupp> it adjusts to be the appropriate Path for the platform it is being compiled for.
[11:01:26] <Heather> change_dir( & Path( r.loc ) ); -> this way works
[11:02:02] *** Joins: siavashserver (siavash@97239824.EDE7E544.82A25C10.IP)
[11:04:00] *** Quits: dew (Instantbir@moz-EEE6B2F8.dhcp.stls.mo.charter.com) (Ping timeout)
[11:04:19] <Heather> dbaupp how to write PIPE stdout from 01process_outpu01t ?
[11:04:24] *** Joins: dew (Instantbir@moz-EEE6B2F8.dhcp.stls.mo.charter.com)
[11:04:24] <Heather> dbaupp read*
[11:05:04] <dbaupp> it returns a struct where the .output field contains the output of stdout
[11:05:46] *** Quits: dcolish (dcolish@1DB472A5.BE69FB10.416A0103.IP) (Ping timeout)
[11:07:24] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[11:09:12] <Heather> dbaupp what means error: use of partially moved value: `out` ?
[11:09:21] <Heather> dbaupp in     let out = process_output(cmd, args);     println(from_utf8_owned(out.output));
[11:09:39] *** Joins: dcolish (dcolish@1DB472A5.BE69FB10.416A0103.IP)
[11:10:05] <Heather> dbaupp `out.output` moved here because it has type `~[u8]`, which is non-copyable (perhaps you meant to use clone()?)
[11:10:34] <Heather> println(from_utf8_owned(out.output.clone())); works
[11:10:37] <Heather> sorry )))
[11:10:54] *** Joins: fyolnish (fyolnish@moz-EF9D86D5.uqwimax.jp)
[11:13:34] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[11:15:40] *** Quits: nkoep (nik@moz-2176A709.pool.mediaways.net) (Ping timeout)
[11:18:31] *** Quits: siavashserver (siavash@97239824.EDE7E544.82A25C10.IP) (Quit: Konversation terminated!)
[11:26:22] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[11:29:36] *** Joins: pyrac (pyrac@moz-D335AC7D.math.u-bordeaux1.fr)
[11:30:07] *** Joins: nkoep (nik@moz-9B94095F.vpn.rwth-aachen.de)
[11:30:31] *** Joins: sergi (textual@moz-DB55470C.upc-a.chello.nl)
[11:30:41] *** Quits: sergi (textual@moz-DB55470C.upc-a.chello.nl) (Client exited)
[11:31:43] *** Joins: canhtak (jeremy@moz-FC3C2F63.wl.t.ulaval.ca)
[11:33:39] <Heather> dbaupp - extern mod extra;  <- what it makes?
[11:44:02] <xandy> Heather http://static.rust-lang.org/doc/0.8/tutorial.html#the-extra-library
[11:44:55] <xandy> btw: is there a function to calculate the power of 2 bignums from extra?
[11:46:44] *** Joins: victorporof_ (victorporo@16E89FDD.B0D0881A.79933D60.IP)
[11:47:58] *** Quits: victorporof (victorporo@16E89FDD.B0D0881A.79933D60.IP) (Ping timeout)
[11:51:50] <Heather> dbaupp xandy does .rc files applieng automatically when I run rustc?
[11:53:50] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[11:54:39] *** Quits: pyrac (pyrac@moz-D335AC7D.math.u-bordeaux1.fr) (Quit: pyrac)
[11:55:55] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[11:56:42] <Heather> std io filereader or std rt io file_reader?
[11:57:46] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[11:58:12] <dbaupp> Heather: I don't quite understand the .rc question, but .rc is actually deprecated now. .rs is the only official Rust file extension
[11:58:49] <dbaupp> and you should use std::rt::io::file_reader if you can, but it's missing many of the convenience methods that std::io has (e.g. each_line, read_line, etc.)
[11:59:24] <Heather> dbaupp I just need serialize / deserialize my json config with it
[12:00:23] <dbaupp> Heather: ah, yes, std::io will work much better
[12:00:42] <Heather> dbaupp :S why ?
[12:00:53] <dbaupp> extra::json still uses std::io
[12:00:59] *** Quits: xitology (xi@85437D54.5AFA3E4.CEDFC552.IP) (Quit: Ex-Chat)
[12:01:12] <Heather> dbaupp so it has build-in stuff to work with files?
[12:01:25] <dbaupp> yeah
[12:01:44] <dbaupp> http://static.rust-lang.org/doc/master/extra/json/fn.from_reader.html
[12:02:02] <Heather> dbaupp I only found encode based on TreeMap that will return str ...
[12:02:06] <Heather> iiuc
[12:02:31] <dbaupp> rusti: std::io::with_str_reader("[1,2,3,4]", |rdr| { extra::json::from_reader(rdr) })
[12:02:32] -rusti- Ok(List(~[Number(1), Number(2), Number(3), Number(4)]))
[12:02:51] *** Quits: tgummerer (tgummerer@moz-E367AFC5.kthopen.kth.se) (Ping timeout)
[12:03:35] <Heather> :S
[12:03:53] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[12:04:07] <Heather> dbaupp and does it work with file?
[12:05:00] <dbaupp> Heather: yes, a file reader and a string reader work the same
[12:05:43] <dbaupp> rusti: extra::json::from_reader(std::io::file_reader(&Path("/etc/passwd")).unwrap())
[12:05:44] -rusti- Err(extra::json::Error{line: 1u, col: 1u, msg: @~"invalid syntax"})
[12:05:53] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[12:05:57] <Heather> aha, I see now
[12:06:32] <Heather> dbaupp same with writer?
[12:07:11] *** Joins: Azdle (patrick@moz-8C723B60.hsd1.mn.comcast.net)
[12:07:49] *** Joins: mindcat (mindcat@6154B326.DC005319.857BDFA9.IP)
[12:08:40] <dbaupp> what do you mean?
[12:09:32] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[12:10:48] <Heather> dbaupp like if I want encode struct to file ...
[12:12:30] *** Quits: SealedSun (Mibbit@moz-CD16210D.cust.bluewin.ch) (Quit: http://www.mibbit.com ajax IRC Client)
[12:12:37] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[12:13:14] *** Quits: joelteon (joel@moz-317E8D0C.io) (Ping timeout)
[12:14:15] <Heather> dbaupp there is io::with_str_writer, and extra::json::from_writer and I'm still being confusing between them all )
[12:14:16] *** Joins: joelteon (joel@moz-317E8D0C.io)
[12:14:26] <dbaupp> Heather: here's one I prepared earlier https://github.com/huonw/isrustfastyet/blob/649ed1fd84ee785a1b35cf93214806e249976752/mem/process.rs#L214-L215
[12:14:31] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[12:14:47] <dbaupp> (that's encoding, it uses #[deriving]: https://github.com/huonw/isrustfastyet/blob/649ed1fd84ee785a1b35cf93214806e249976752/mem/process.rs#L51)
[12:15:08] <dbaupp> and decoding: https://github.com/huonw/isrustfastyet/blob/649ed1fd84ee785a1b35cf93214806e249976752/mem/process.rs#L67
[12:16:57] <ChrisMorgan> dbaupp: you actually take care to make a link that will last?
[12:17:24] <dbaupp> ChrisMorgan: no, just /master/ is no longer such a good example
[12:17:43] * dbaupp is encoding to strings to be able to add newlines to make smaller diffs
[12:18:02] <ChrisMorgan> Oh. Here was me hoping there was someone else there that cared about link maintenance. :-(
[12:18:17] <dbaupp> https://github.com/huonw/isrustfastyet/blob/gh-pages/mem/process.rs#L214 fwiw
[12:18:39] <ChrisMorgan> Matter of fact, I'm finishing off a blog post about that very topic with GitHub as the focus of the article at this very moment...
[12:18:49] * dbaupp does make an effort to link to commits by hash on reddit/emails/bug trackers/anything that isn't as transient as IRC
[12:18:58] <dbaupp> ChrisMorgan: you have a blog?
[12:19:00] <ChrisMorgan> Yay!
[12:19:22] <ChrisMorgan> dbaupp: well, I have the one I started preparing three years ago but never finished off. I'm finishing that off now.
[12:19:32] <dbaupp> haha, well, is it served by rust-http yet? :P 
[12:19:49] <ChrisMorgan> It will not be; that would slow me down and I'd like to release this today.
[12:20:08] <dbaupp> why so sensible? :'(
[12:20:33] *** Joins: Ms2ger (Ms2ger@moz-2F2A356D.adsl-dyn.isp.belgacom.be)
[12:21:01] <dbaupp> anyone on OSX who can assist with https://github.com/mozilla/rust/issues/9625 ?
[12:21:25] <Heather> serialization works )
[12:21:48] <ChrisMorgan> dbaupp: because I'm trying to get an audience to sell a product to, with this particular blog post, and I want a bit of time before I have to report on the success of the experiment to my classmates in the IT-Based Entrepreneurship unit next Monday.
[12:22:14] <dbaupp> ChrisMorgan: aha, make sense :)
[12:22:18] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[12:25:43] *** Quits: sankha93 (Instantbir@CAF6D3FF.9C875DCD.9105FBCF.IP) (Quit: Gone to save the world!)
[12:26:14] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[12:27:10] <Heather> how to return null?
[12:27:11] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[12:27:16] <Heather> null struct? :S
[12:27:24] <Heather> use some and none?
[12:27:25] <ChrisMorgan> Null? What's null?
[12:27:37] <ChrisMorgan> Option is the type typically used to represent that.
[12:28:08] *** Quits: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP) (Ping timeout)
[12:28:51] <ChrisMorgan> But to give an idea of what Rust's type system achieves, there's nothing special about ``enum Option<T> { Some(T), None }``; that is actually all it is (plus some methods for convenience).
[12:30:01] <Heather> ChrisMorgan thanks, I think it should be used instead of null
[12:30:21] <ChrisMorgan> Indeed, Rust does not have the concept of null.
[12:31:25] <Heather> dbaupp ChrisMorgan may you explain me this error handling syntax : https://github.com/huonw/isrustfastyet/blob/649ed1fd84ee785a1b35cf93214806e249976752/mem/process.rs#L67
[12:31:26] <dbaupp> (in safe code)
[12:31:44] <Heather> this  } { ... } is very .... new for me
[12:31:51] <Heather> or should I say fancy
[12:31:54] <dbaupp> haha, it's a combination of two things
[12:32:04] * dbaupp is a bad person for writing code like that
[12:32:13] *** Joins: maik (maik@moz-41A4E36A.dip0.t-ipconnect.de)
[12:32:26] <Heather> how does it works?
[12:32:30] <ChrisMorgan> ``do a { b }`` == ``a(|| { b })``
[12:32:48] <dbaupp> it's the same as `let r = do io::file_reader(p).map |rdr| { .. }; match r { Err(_) => .. , Ok(json) => .. }`
[12:32:52] <Heather> so it's || die ?
[12:33:13] <ChrisMorgan> And the do part becomes ``io::file_reader(p).map(|rdr| { json::from_reader(*rdr).expect("summary is invalid") })``
[12:33:14] <dbaupp> in that context || constructs a closure that takes no args
[12:33:32] <Heather> I see it's match + do trick
[12:33:46] <Heather> it matches do result for error
[12:33:50] <dbaupp> yup
[12:33:52] <dbaupp> exactly
[12:34:11] <ChrisMorgan> That was actually a bad idea, my saying that. It's really ``do a b`` == ``a(b)`` or ``do a(b) c`` == ``a(b, c)``.
[12:35:03] <ChrisMorgan> i.e. put the latter part as an extra argument to the first part.
[12:35:08] <Heather> )
[12:35:15] <dbaupp> ChrisMorgan: well, not quite, since the || can be dropped in `do f { .. }` (assuming you're doing a purely syntactic transformation)
[12:35:44] <ChrisMorgan> dbaupp: I know, that's why I put the first example there... I'm not doing a good job of explaining it.
[12:35:55] <ChrisMorgan> Heather: see the reference manual. It covers it.
[12:35:55] <dbaupp> ChrisMorgan: haha :)
[12:36:58] *** Quits: mindcat (mindcat@6154B326.DC005319.857BDFA9.IP) (Quit: Lost terminal)
[12:37:56] *** Quits: LimeBurst (me@247D1419.D73964AC.27A8748.IP) (Quit: leaving)
[12:38:28] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[12:38:31] *** Joins: sergi (textual@moz-DB55470C.upc-a.chello.nl)
[12:42:50] *** Joins: LimeBurst (me@247D1419.D73964AC.27A8748.IP)
[12:43:01] *** Quits: Azdle (patrick@moz-8C723B60.hsd1.mn.comcast.net) (Ping timeout)
[12:43:11] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[12:43:42] *** Joins: acabrera (alcabrera@4B9B70ED.4D823036.F18532AE.IP)
[12:45:51] <Heather> dbaupp ChrisMorgan how to check if file exists?
[12:47:34] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[12:48:10] <dbaupp> Heather: std::os::path_exists iirc
[12:49:00] <dbaupp> Heather: yeah, http://static.rust-lang.org/doc/master/std/os/fn.path_exists.html (I found that by using the search box with "exists", btw)
[12:50:08] *** Joins: masondesu (masondesu@4C6883F2.DAD756E1.466EF61A.IP)
[12:50:21] <Heather> dbaupp thanks )
[12:50:42] *** Quits: Liothen (liothen@moz-266BCA86.spkn.qwest.net) (Quit: Textual IRC Client: www.textualapp.com)
[12:55:57] *** Quits: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) (Quit: ~ Trillian - www.trillian.im ~)
[12:56:18] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[12:57:55] *** Quits: masondesu (masondesu@4C6883F2.DAD756E1.466EF61A.IP) (Quit: Textual IRC Client: www.textualapp.com)
[12:58:01] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[12:58:41] *** Quits: timot (timot@moz-E599A11C.in-addr.nilings.se) (Ping timeout)
[13:00:07] *** Joins: timot (timot@moz-E599A11C.in-addr.nilings.se)
[13:01:09] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[13:01:24] *** Quits: a__ (a__@moz-4CC03B10.nycmny.fios.verizon.net) (Client exited)
[13:01:52] *** Quits: timot (timot@moz-E599A11C.in-addr.nilings.se) (Connection reset by peer)
[13:04:05] *** Joins: timot_ (timot@moz-E599A11C.in-addr.nilings.se)
[13:05:15] *** Joins: a__ (a__@moz-4CC03B10.nycmny.fios.verizon.net)
[13:06:36] *** Quits: maik (maik@moz-41A4E36A.dip0.t-ipconnect.de) (Ping timeout)
[13:08:32] *** Quits: a__ (a__@moz-4CC03B10.nycmny.fios.verizon.net) (Client exited)
[13:12:02] *** Quits: timot_ (timot@moz-E599A11C.in-addr.nilings.se) (Ping timeout)
[13:12:10] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[13:12:55] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[13:14:36] *** Joins: timot_ (timot@1C5B7AF5.87C6DE19.CBC7865F.IP)
[13:18:08] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[13:20:36] *** Joins: a__ (a__@moz-4CC03B10.nycmny.fios.verizon.net)
[13:21:31] *** Joins: maik (maik@moz-6A162886.dip0.t-ipconnect.de)
[13:22:36] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[13:22:42] *** Quits: heftig (heftig@moz-41907BDD.dip0.t-ipconnect.de) (Quit: Quitting)
[13:23:33] *** Joins: heftig (heftig@moz-41907BDD.dip0.t-ipconnect.de)
[13:27:04] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[13:29:47] <skade> is rustpkg in any way in a usable state? It never picks up packages properly for me :(
[13:31:15] *** Quits: victorporof_ (victorporo@16E89FDD.B0D0881A.79933D60.IP) (Quit: victorporof_)
[13:32:59] *** Joins: RMF (RMF@74223BAA.93D545F0.8D19547B.IP)
[13:35:03] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[13:38:18] <myname> so, how do i make c-compatible structs?
[13:40:01] <dbaupp> myname: with the `struct` keyword ;)
[13:40:11] <dbaupp> (they're all C-compatible by default)
[13:40:30] <dbaupp> (ignoring the size differences of int/uint)
[13:40:30] <luisbg> morning
[13:40:43] *** Quits: fabiand (fabiand@moz-80F22D21.adsl.alicedsl.de) (Ping timeout)
[13:40:48] <myname> interesting
[13:41:05] <myname> so i just have to make the data inside the struct c-compatible?
[13:41:29] <ChrisMorgan> skade: you've read the rustpkg tutorial, I presume?
[13:42:41] <dbaupp> myname: if you mean "make sure the types correspond to C types" then yes
[13:43:17] <myname> well, if i want to use structs as parameters to c functions, they should correspond, shouldn't they?
[13:43:35] <myname> at least if i don't want to make wrapper functions that transform the structs everytime
[13:43:46] <dbaupp> yeah
[13:44:06] <myname> which is the prefered way?
[13:44:12] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[13:45:15] <myname> i'd say an interface to c functions should be as much rusty as possible
[13:45:26] <dbaupp> myname: using C structs
[13:45:39] <myname> but i don't know if it's this clever to make 2 struct definitions and build new ones everytime
[13:46:30] *** Joins: ahal (ahal@FCCEA34F.7672369.D8E68FF6.IP)
[13:46:50] <dbaupp> there's no other way atm
[13:47:03] <dbaupp> although, https://github.com/crabtw/rust-bindgen helps
[13:47:19] <myname> but bindgen has to make one of these ways
[13:48:46] *** Joins: fabiand (fabiand@moz-80F22D21.adsl.alicedsl.de)
[13:49:01] <dbaupp> there's only one way? C-compatible structs.
[13:49:12] <skade> ChrisMorgan yes
[13:49:24] *** Quits: RMF (RMF@74223BAA.93D545F0.8D19547B.IP) (Ping timeout)
[13:49:43] <dbaupp> myname: you either have "Rusty" version fo the structs *and* C-compatible rust structs and convert between them, or you just have the C-compatible rust structs
[13:49:46] <ChrisMorgan> skade: well, that's the extent of my knowledge on the topic :P
[13:49:57] <myname> dbaupp: yeah, that's what i said
[13:50:32] <dbaupp> myname: so I don't see what the purpose of the question is: bindgen creates C-compatible rust structs.
[13:50:44] <skade> ChrisMorgan: I also managed to transform rust-pcre so that it installs, but its never picked up on build :(
[13:50:46] <skade> https://github.com/skade/rust-pcre
[13:51:10] <skade> well, back to research ;)
[13:51:16] <myname> dbaupp: i don't like how you have to handle everything stringish special :/
[13:51:50] <myname> it just feels wrong
[13:52:11] <dbaupp> myname: that's just because C-strings are horrible (and libraries using them rather than uint8_t* + length are horrible too :P )
[13:52:50] *** Joins: clusterfoo (computer@moz-A81F9872.cable.teksavvy.com)
[13:52:54] <dbaupp> skade: what does "never picked up on build" mean? have you specified it with `extern mod foo = "url";`?
[13:53:18] <myname> dbaupp: there is some kind of haskells "either" in rust, isn't it?
[13:53:28] <skade> dbaupp: yes
[13:53:58] <tiffany> there is an Either type in rust
[13:53:58] *** jorendorff_away is now known as jorendorff
[13:54:12] <ChrisMorgan> There is at present, but it may or may not stay around.
[13:54:28] <dbaupp> myname: http://static.rust-lang.org/doc/master/std/either/index.html, http://static.rust-lang.org/doc/master/std/result/index.html
[13:54:36] <tiffany> it's more descriptive to define your own enum with two values
[13:54:43] <tiffany> Left and Right don't tell you about their contents
[13:55:02] <myname> question is: what does it look like in momory?
[13:55:23] *** flaper87 is now known as flaper87|afk
[13:55:25] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: gtg)
[13:55:48] <dbaupp> Either<T, S> == (discriminant, [u8, .. max(sizeof T, sizeof S))
[13:56:10] <nmatsakis> (modulo alignment)
[13:56:41] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[13:56:42] <dbaupp> discriminant is currently u64 on all platforms always, but will be reduced to the minimum size that can store all the number of variants soon (hopefully)
[13:56:52] *** Joins: tautologico (lymph@7A53DAF8.92451A23.6EB699AE.IP)
[13:57:08] <pnkfelix> acrichto: ping
[13:57:25] <tiffany> dbaupp: what about alignment?
[13:57:51] <tiffany> a u8 disciminant isn't very useful if the next thing in memory is a u64 aligned to 64 bits
[13:57:58] <skade> dbaupp: so, I have this https://github.com/skade/widmann/tree/rustpkg
[13:58:22] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[13:58:39] *** Joins: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP)
[13:58:56] <skade> i run `rustpkg install github.com/skade/rust-pcre` and then I don't know how to set up the build process so that it gets picked up
[13:59:21] <skade> it installs fine though, so -L .rust/path/to/platform/dependent/lib.dylib works
[13:59:34] <dbaupp> tiffany: don't know, and I agree
[13:59:41] *** Joins: RMF (RMF@74223BAA.93D545F0.8D19547B.IP)
[14:00:28] <dbaupp> tiffany: https://github.com/mozilla/rust/pull/9613 starts doing the discrimant size reduction, so you can look at that if you want an answer
[14:01:15] <myname> ~str aren't just pointers anymore?
[14:01:16] <dbaupp> tiffany: (in any case, the biggest benefit will be for things like `Option<u8>`, which is currently 2 or 3 words (for 64 and 32 bit computers respecitively)
[14:02:00] <dbaupp> myname: no, they are, but they aren't pointers straight to the data (and never were). what prompted the question?
[14:02:00] <myname> like, i couldn't make struct.data += "\0" to force it to be c-stringish
[14:02:06] <myname> oh
[14:03:06] <dbaupp> skade: in theory you don't need to install rust-pcre separately, rustpkg build libwidmann will "Just Work"
[14:03:09] <dbaupp> *in theory*
[14:03:24] * dbaupp hasn't every used rustpkg to managed external deps
[14:04:20] <dbaupp> *ever
[14:06:00] *** Quits: penguin_dan (dan_johnsi@6902762D.11B071D.FB9A45AF.IP) (Connection reset by peer)
[14:06:40] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[14:07:02] *** Quits: RMF (RMF@74223BAA.93D545F0.8D19547B.IP) (Client exited)
[14:07:19] *** Joins: RMF (RMF@74223BAA.93D545F0.8D19547B.IP)
[14:07:34] *** Joins: penguin_dan (dan_johnsi@6902762D.11B071D.FB9A45AF.IP)
[14:07:56] * ChrisMorgan has only been doing in-tree things with rust-http
[14:08:46] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[14:09:18] <skade> well, i am going to investigate a bit. at least it logs alog :)
[14:09:23] <skade> alot
[14:10:15] <dbaupp> skade: there's a pile of bugs about rustpkg https://github.com/mozilla/rust/issues?labels=A-pkg&page=1&state=open
[14:10:22] <myname> how do i see what packages are available for rustpkg?
[14:10:48] <ChrisMorgan> skade: http://hyperboleandahalf.blogspot.com.au/2010/04/alot-is-better-than-you-at-everything.html :D
[14:11:25] *** Quits: sergi (textual@moz-DB55470C.upc-a.chello.nl) (Quit: Computer has gone to sleep.)
[14:11:37] <dbaupp> myname: there's no central repository (yet)
[14:11:47] <skade> ChrisMorgan I enjoy the liberty of a foreign speaker :D
[14:11:52] <myname> so how do i install anything at all?
[14:12:08] <ChrisMorgan> skade: an excuse, not a reason!
[14:12:27] <dbaupp> myname: `rustpkg install foo`
[14:12:33] <skade> ChrisMorgan touche
[14:12:42] <dbaupp> myname: you just need to work out foo "by hand"
[14:12:52] <myname> dbaupp: that means?
[14:13:46] <ChrisMorgan> Figure out what the path is to what you want to install.
[14:14:15] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[14:14:21] <myname> what does "path" means
[14:14:52] <ChrisMorgan> Wow, it's rather windy here. http://www.bom.gov.au/products/IDR02I.loop.shtml
[14:15:39] <dbaupp> myname: http://static.rust-lang.org/doc/master/tutorial-rustpkg.html
[14:15:51] <dbaupp> rustpkg install github.com/steveklabnik/hello
[14:16:02] * dbaupp is getting an error whenever he runs that though
[14:16:42] <dbaupp> ChrisMorgan: o_O
[14:18:03] <ChrisMorgan> As much fun as it could be (if behind me), I will *not* ride in such wind!
[14:18:49] <dbaupp> ChrisMorgan: imagine how fast you could go
[14:19:05] <dbaupp> you could attach a sail to your bike (and/or horse)
[14:19:30] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[14:19:55] * ChrisMorgan is one who likes to ride as fast as he can, having to be careful not to go over 60km/h speed limit in a couple of places on his way to Uni, but 100km/h winds are not something he will reckon with
[14:20:02] <skade> okay: its definitely a bug. https://gist.github.com/skade/6764516#file-gistfile1-txt-L723-L739
[14:20:22] <skade> it doesn't search the src subdirectory for the downloaded lib
[14:20:34] <skade> although it does it on `install`
[14:21:39] *** Joins: doomlord___ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[14:21:43] <ChrisMorgan> dbaupp: I think I'm going to give up on my goal of releasing this blog post today... ah well. Tomorrow.
[14:21:56] *** Quits: doomlord___ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Client exited)
[14:22:49] *** Joins: slackito (slackito@moz-7779E4A6.dyn.user.ono.com)
[14:24:35] *** Quits: RMF (RMF@74223BAA.93D545F0.8D19547B.IP) (Ping timeout)
[14:25:26] *** Joins: aeqwa (aeqwa@moz-677D0A0D.dsl.tropolys.de)
[14:27:21] *** Quits: fyolnish (fyolnish@moz-EF9D86D5.uqwimax.jp) (Client exited)
[14:27:52] *** Joins: fyolnish (fyolnish@moz-EF9D86D5.uqwimax.jp)
[14:28:00] *** Joins: RMF (RMF@74223BAA.93D545F0.8D19547B.IP)
[14:29:04] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[14:29:43] *** Quits: RMF (RMF@74223BAA.93D545F0.8D19547B.IP) (Ping timeout)
[14:32:43] *** Joins: Palmik (palmik@moz-11EA685D.pks.muni.cz)
[14:33:10] <dbaupp> is there an easy way with which I can check the value of #defines from windows.h on linux? (just installing mingw, right?)
[14:34:30] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[14:35:54] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:37:28] *** Joins: jdsanders (Adium@moz-F45527D6.hlrn.qwest.net)
[14:38:16] *** Quits: tefter (tefter@B5D119DC.B856A0A1.73804765.IP) (Client exited)
[14:42:30] *** Joins: sergi (textual@moz-DB55470C.upc-a.chello.nl)
[14:43:36] *** Joins: jordyd (jordyd@moz-790E2988.seg43.ucf.edu)
[14:44:27] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[14:47:46] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[14:48:37] <cmr> dbaupp: there will be a twir, toda
[14:50:11] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[14:50:12] <dbaupp> cmr: y
[14:50:16] <dbaupp> (you dropped it)
[14:50:24] <dbaupp> but ok, cool :)
[14:50:26] <cmr> thanks
[14:50:48] *** Quits: threecreepio (jdp@moz-1A9F0A3C.cust.bredband2.com) (Quit: threecreepio)
[14:50:50] <dbaupp> cmr: did you see https://github.com/skade/widmann/ ?
[14:50:54] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[14:52:24] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[14:53:12] <cmr> dbaupp: yep, thanks
[14:53:18] *** Joins: jdm (jdm@7F255D02.1B9223B5.AE2B2F80.IP)
[14:53:18] *** ChanServ sets mode: +o jdm
[14:53:43] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[14:57:03] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[14:57:24] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[14:58:49] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[14:59:35] *** Quits: maik (maik@moz-6A162886.dip0.t-ipconnect.de) (Ping timeout)
[15:02:18] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[15:02:29] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[15:02:48] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[15:04:52] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[15:05:37] *** Joins: RMF (RMF@74223BAA.93D545F0.8D19547B.IP)
[15:07:10] *** Quits: fabiand (fabiand@moz-80F22D21.adsl.alicedsl.de) (Client exited)
[15:07:21] *** Quits: RMF (RMF@74223BAA.93D545F0.8D19547B.IP) (Ping timeout)
[15:10:22] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[15:10:49] *** Joins: fabiand (fabiand@moz-80F22D21.adsl.alicedsl.de)
[15:11:33] *** Joins: RMF (RMF@74223BAA.93D545F0.8D19547B.IP)
[15:13:31] <andor> can anyone shed some light on how i'M supposed to use the new tcp sockets for listening?
[15:14:06] <andor> i'm trying to follow the test code from the runtime source, but it doesn't really seem to work
[15:14:25] <andor> more specifically, no matter what i try to do, i can't call listen() on TcpListener
[15:14:34] <cmr> andor: https://github.com/cmr/rust-examples/blob/master/echo_server.rs
[15:15:03] *** Joins: pedantech (quassel@moz-C70D19FD.msl-mt.client.bresnan.net)
[15:16:43] <andor> cmr: what the... i just tried that again, and now it compiles
[15:16:54] <andor> i was doing pretty much the same but it wouldn't work for some reason
[15:16:56] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[15:17:18] <cmr> You probably didn't have the traits in scope.
[15:18:12] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[15:18:21] <andor> thanks anyhow
[15:18:40] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[15:18:46] *** Quits: sammykim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Ping timeout)
[15:20:28] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[15:21:52] *** Quits: lahwran (lahwran@lahwran.net) (Ping timeout)
[15:21:59] *** Quits: JanC_ (janc@moz-12DFBB97.dsl.scarlet.be) (Ping timeout)
[15:22:20] *** Joins: sfuerst (sfuerst@moz-5BD1BFEA.tukw.qwest.net)
[15:23:10] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[15:24:19] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[15:24:48] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[15:25:15] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Connection reset by peer)
[15:25:28] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[15:26:02] <sfuerst> Silly question...  whats the "best" way to read from a file in rust?
[15:26:30] <cmr> sfuerst: the best way is to use newrt file io, in std::rt::io::file
[15:26:38] <cmr> But using the old code in std::io is also workable.
[15:26:46] <sfuerst> I'm trying to use std::rt::io::file and open_reader... but it isn't working. :-(
[15:27:03] <cmr> sfuerst: https://github.com/cmr/rust-examples/blob/master/file.rs
[15:27:03] <sfuerst> I get the error message "failed to find an implementation of trait std::io::Reader for std::rt::io::file::FileReader"
[15:27:21] <cmr> Yep, you're trying to  mix the old code with the new.
[15:27:23] <sfuerst> Cool... I'll have a look.   Thanks. :-)
[15:27:41] <sfuerst> Gotcha.  I guess many of the examples lying about still use some of the old code.
[15:28:01] <cmr> Probably all of them, mine is the only newrt file io example I know of :p
[15:28:06] <sfuerst> Cool.
[15:28:12] <sfuerst> Now another silly question...
[15:28:25] <sfuerst> Is there anything like "fscanf" existing yet?
[15:28:38] <cmr> No
[15:28:38] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:28:42] <sfuerst> Thanks
[15:28:55] <sfuerst> Whipping one up should be fun.
[15:29:14] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[15:31:58] *** Joins: lahwran (lahwran@lahwran.net)
[15:32:07] *** Quits: SteveMcQwark (steven099@moz-7CFCF343.cpe.net.cable.rogers.com) (Ping timeout)
[15:32:08] <ChrisMorgan> cmr: you should try writing a file-serving web server!
[15:33:07] *** Quits: RMF (RMF@74223BAA.93D545F0.8D19547B.IP) (Ping timeout)
[15:34:31] *** Joins: threecreepio (jdp@moz-9C11F46E.cust.bredbandsbolaget.se)
[15:34:38] <sfuerst> Hmmm... I've just tried your example, and get a segfault on exit.  Looks like it's in jemalloc
[15:35:06] <sfuerst> Well... your example, but without the "stream.write()" line.
[15:35:07] *** Quits: StarLight (StarLight@moz-3B2C1A39.dynamic.avangarddsl.ru) (Ping timeout)
[15:35:48] *** Joins: BitPuffin (isak@moz-49828767.cust.tele2.se)
[15:35:53] <dbaupp> sfuerst: o_O that's not supposed to happen
[15:36:02] <sfuerst> oh... I also changed the open line to "let mut stream = file::open(&p, Open, Read);"
[15:36:05] <dbaupp> does it look like there's deep recursion?
[15:36:09] <sfuerst> Yeah, I guessed.
[15:36:28] <sfuerst> Nope
[15:36:36] <sfuerst> https://github.com/cmr/rust-examples/blob/master/file.rs
[15:37:17] <sfuerst> Here is the stack trace.  [Flood warning]
[15:37:24] <cmr> sfuerst: paste it to gist.github.com
[15:37:26] <sfuerst> #0  __GI___pthread_mutex_lock (mutex=0x1) at pthread_mutex_lock.c:50
[15:37:26] <sfuerst> #1  0x00007ffff7462ad7 in malloc_mutex_lock (mutex=0x120)
[15:37:26] <sfuerst>     at /mnt/raid/home/sfuerst/rust/src/rt/jemalloc/include/jemalloc/internal/mutex.h:77
[15:37:26] <sfuerst> #2  tcache_bin_flush_small (tbin=tbin@entry=0x7ffff6006028, 
[15:37:26] <sfuerst>     binind=binind@entry=0, rem=rem@entry=0, tcache=tcache@entry=0x7ffff6006000)
[15:37:26] <sfuerst>     at /mnt/raid/home/sfuerst/rust/src/rt/jemalloc/src/tcache.c:105
[15:37:33] *** Joins: SteveMcQwark (steven099@moz-7CFCF343.cpe.net.cable.rogers.com)
[15:38:00] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[15:38:09] *** Joins: JanC_ (janc@moz-67BC1AF8.dsl.scarlet.be)
[15:38:21] *** Joins: mindcat (root@6154B326.DC005319.857BDFA9.IP)
[15:38:30] <sfuerst> https://gist.github.com/anonymous/2f82618762036c66986d
[15:38:51] <andor> https://github.com/mozilla/rust/blob/master/src/libstd/rt/io/stdio.rs what's the deal with these? why are they all explicitly failed?
[15:39:04] <cmr> andor: because they're unimplemented.
[15:39:05] <ChrisMorgan> Not implemented yet.
[15:39:32] *** Joins: StarLight (StarLight@moz-21100A01.dynamic.avangarddsl.ru)
[15:39:37] <andor> quite annoying when i do use std::rt::io::*; and suddenly i have no idea why it doesn't compile anymore :\
[15:40:08] <engla> it's better to not use glob imports
[15:40:46] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[15:40:47] <andor> i was trying cmr's example, and i had no idea what trait tcpstream implements so it has read_to_end
[15:40:51] <sfuerst> Oh yeah... using "use std::*;" causes things to not compile...
[15:40:56] *** Quits: jordyd (jordyd@moz-790E2988.seg43.ucf.edu) (Quit: Leaving)
[15:41:08] <cmr> andor: read_to_end was a mistake, I've updated the code.
[15:41:12] *** Joins: RMF (RMF@74223BAA.93D545F0.8D19547B.IP)
[15:41:21] <cmr> But, it's http://static.rust-lang.org/doc/master/std/rt/io/extensions/trait.ReaderUtil.html#tymethod.read_to_end
[15:41:31] <andor> yeah, i figured by now
[15:41:33] <sfuerst> What's annoying is that some error messages suggest that you should add "use std;".  But that doesn't work either.  (Syntax error)
[15:41:45] <dbaupp> andor: the search on http://static.rust-lang.org/doc/master/std/index.html allows you to find that stuff now
[15:41:55] <dbaupp> sfuerst: it should work
[15:42:08] <dbaupp> sfuerst: is it telling you that use need to before items?
[15:42:20] <dbaupp> rusti: fn foo() {} use std::int;
[15:42:20] -rusti- <anon>:7:21: 7:34 error: `use` and `extern mod` declarations must precede items
[15:42:20] -rusti- <anon>:7          fn foo() {} use std::int;
[15:42:21] -rusti-                               ^~~~~~~~~~~~~
[15:42:21] -rusti- error: aborting due to previous error
[15:42:21] -rusti- application terminated with error code 101
[15:42:37] <dbaupp> sfuerst: that^ one?
[15:42:53] <sfuerst> test.rs:1:4: 1:7 error: unresolved import (maybe you meant `std::*`?)
[15:42:53] <sfuerst> test.rs:1 use std;
[15:42:59] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[15:43:14] <dbaupp> oh
[15:43:36] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[15:43:44] <cmr> Yeah, that suggestion is still quite brute force.
[15:43:55] <cmr> Although in this case it'd still give it.
[15:44:11] <dbaupp> sfuerst: ah, if that's you're crate file (i.e. you are calling rustc test.rs) then `use std` is (a) unecessary and (b) will break things
[15:44:23] <dbaupp> *your
[15:44:29] <sfuerst> I noticed. :-)
[15:45:28] <sfuerst> I'm just fiddling around with things, trying to get a simple test progam to do file io as an exercise for myself. :-)
[15:45:31] *** Quits: BitPuffin (isak@moz-49828767.cust.tele2.se) (Ping timeout)
[15:45:42] *** Quits: RMF (RMF@74223BAA.93D545F0.8D19547B.IP) (Connection reset by peer)
[15:46:10] *** Joins: RMF (RMF@74223BAA.93D545F0.8D19547B.IP)
[15:46:16] <cmr> sfuerst: I don't get a segfault :(
[15:46:52] <sfuerst> Ah...  I bet I know what it is...
[15:47:21] <sfuerst> Found it.
[15:47:26] <cmr> What was it?
[15:47:37] <sfuerst> I was using LD_PRELOAD to add another memory allocator.
[15:47:45] <sfuerst> It didn't play nice with jemalloc.
[15:49:15] *** Joins: jstevans (Instantbir@39438E20.EBD92228.DDE5D3F6.IP)
[15:49:25] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[15:49:25] *** ChanServ sets mode: +ao dherman dherman
[15:49:35] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[15:49:47] <jstevans> In 0.7, tuple elements cannot be mutable -- is there actually no way to get around that?
[15:50:09] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[15:51:14] <engla> if the tuple is mutable, the elements inherit that
[15:51:22] <engla> you can pattern match to get a mut ref to an element
[15:52:13] *** Quits: KindOne (KindOne@moz-8BF3E2EA.dynamic.ip.windstream.net) (Ping timeout)
[15:52:30] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[15:53:35] <dbaupp> rusti: let mut x = (1,2); match x { (ref mut first, _) => *first += 1 }; x
[15:53:35] -rusti- (2, 2)
[15:53:39] *** Joins: KindOne (KindOne@moz-8BF3E2EA.dynamic.ip.windstream.net)
[15:54:17] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[15:54:51] *** Joins: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com)
[15:54:55] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[15:55:04] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[15:55:08] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[15:55:17] *** Quits: sergi (textual@moz-DB55470C.upc-a.chello.nl) (Quit: Computer has gone to sleep.)
[15:55:36] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[15:55:43] *** Quits: fireglow (fireglow@1D843F6D.FFAA71EC.37339E3A.IP) (Ping timeout)
[15:56:29] <engla> dbaupp: do you know what happened to my @mut Block PR?
[15:56:44] <luisbg> this is going to sound like a silly question but...
[15:56:45] <engla> for some reason it failed twice on a win-32 bot
[15:57:02] <luisbg> if  x: [uint] is an array of ints
[15:57:11] <cmr> luisbg: it isn't
[15:57:15] <cmr> [uint] doesn't exist
[15:57:17] <luisbg> how do I define an two-dimension array of uints?
[15:57:25] <luisbg> cmr, doesn't exist?
[15:57:27] *** Joins: sergi (textual@moz-DB55470C.upc-a.chello.nl)
[15:57:27] <dbaupp> engla: did it?
[15:57:32] <cmr> luisbg: it's not a valid type.
[15:57:37] <cmr> rusti: let x: [uint];
[15:57:37] -rusti- <anon>:7:16: 7:22 error: bare `[]` is not a type
[15:57:37] -rusti- <anon>:7          let x: [uint];
[15:57:37] -rusti-                          ^~~~~~
[15:57:37] -rusti- error: aborting due to previous error
[15:57:38] -rusti- application terminated with error code 101
[15:57:51] <engla> dbaupp: I think so. http://buildbot.rust-lang.org/console?branch=auto&refresh=15
[15:58:08] <luisbg> rusti: let x: [int];
[15:58:09] -rusti- <anon>:7:16: 7:21 error: bare `[]` is not a type
[15:58:09] -rusti- <anon>:7          let x: [int];
[15:58:09] -rusti-                          ^~~~~
[15:58:09] -rusti- error: aborting due to previous error
[15:58:09] -rusti- application terminated with error code 101
[15:58:16] <engla> the bors log on the PR looks messy though, no idea why
[15:58:20] <luisbg> cmr, so how do you define an array of integers?
[15:58:26] <cmr> luisbg: ~[int]
[15:58:27] *** sankha93 is now known as sankha93|afk
[15:58:34] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:58:35] <luisbg> cmr, why the need for the ~ ?
[15:58:43] <luisbg> rusti: let x: ~[uint];
[15:58:43] -rusti- <anon>:7:13: 7:14 warning: unused variable: `x` [-W unused-variable (default)]
[15:58:43] -rusti- <anon>:7          let x: ~[uint];
[15:58:43] -rusti-                       ^
[15:58:43] -rusti- ()
[15:58:52] <dbaupp> engla: oh! strcat was fiddling with master ( :S ) so bors got a bit confused and you look like you've got a spurious failure there.
[15:59:03] <cmr> luisbg: vectors are unsized. You need a pointer to one to have a sized type.
[15:59:17] <luisbg> cmr, ahhh yes! that is true
[15:59:21] <engla> if strcat has an issue with my PR he should just say it outright :)
[15:59:22] *** Joins: fireglow (fireglow@1D843F6D.FFAA71EC.37339E3A.IP)
[15:59:32] <dbaupp> engla: not your PR
[15:59:34] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:59:40] <luisbg> cmr, how about a two-dimensional array?
[15:59:50] <cmr> luisbg: ~[~[int]]
[15:59:53] <luisbg> rusti: let x: ~[~[uint}, ~[uint]];
[15:59:53] -rusti- <anon>:7:24: 7:25 error: incorrect close delimiter: `}`
[15:59:53] -rusti- <anon>:7          let x: ~[~[uint}, ~[uint]];
[15:59:53] -rusti-                                  ^
[15:59:53] -rusti- application terminated with error code 101
[15:59:57] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[16:00:04] <cmr> A vector of vectors
[16:00:06] <luisbg> cmr, I see, yes
[16:00:27] <dbaupp> engla: acrichto accidentally commited the 9MB src/libsyntax/syntax binary, so strcat was (force) removing it to stop it being in the history forever and ever
[16:00:45] <engla> ok
[16:01:06] *** Quits: fireglow (fireglow@1D843F6D.FFAA71EC.37339E3A.IP) (Ping timeout)
[16:01:07] *** Joins: ksev (DrunkenPan@moz-71F7E457.cable.teksavvy.com)
[16:01:10] <dbaupp> engla: retried your pr, btw
[16:01:17] <engla> thanks
[16:01:31] <engla> it still showed up on irfy
[16:01:37] <engla> must have been because of the reset
[16:01:37] *** Joins: fireglow (fireglow@1D843F6D.FFAA71EC.37339E3A.IP)
[16:01:41] <dbaupp> hm?
[16:01:48] *** Quits: jdsanders (Adium@moz-F45527D6.hlrn.qwest.net) (Quit: Leaving.)
[16:01:55] <dbaupp> http://huonw.github.io/isrustfastyet/pull_requests/ no it didn't?
[16:02:10] <dbaupp> oh, so it did
[16:02:14] <dbaupp> weird weird weird
[16:03:25] *** Quits: fireglow (fireglow@1D843F6D.FFAA71EC.37339E3A.IP) (Ping timeout)
[16:03:28] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:03:49] <slackito> hi! does anyone have an example of a rustpkg-friendly repo for a library? i'm trying to write a library and i'm not sure about how should i do it to make it easy to use for others
[16:04:01] *** Joins: victorporof_ (victorporo@35F65A40.E0F96B01.D111398B.IP)
[16:04:03] <cmr> slackito: https://github.com/linuxfood/rustsqlite
[16:04:12] <slackito> thanks!
[16:04:25] <nejucomo> slackito: I have the same issue.  I've written a library but I didn't use rustpkg, now I want to organize it to fit the conventions...
[16:04:37] *** Quits: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP) (Ping timeout)
[16:05:00] <cmr> There's another convention, https://github.com/steveklabnik/hello
[16:05:10] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:05:29] *** Joins: yonran (yonran@moz-962F33EB.acuitus.com)
[16:05:41] <luisbg> cmr, why does this not work? http://pastie.org/8367246
[16:05:48] <nejucomo> One of the changelogs / this week in rusts mentioned that rustpkg would have a command to initialize a project skeleton.
[16:05:53] <luisbg> cmr, trying to create a table of numbers to use
[16:06:01] <cmr> luisbg: you can't have a static ~[]
[16:06:06] <cmr> ~[] requires a runtime allocation.
[16:06:26] <luisbg> cmr, which is why vector != array
[16:06:39] <cmr> Well we don't have arrays :P
[16:06:44] <engla> there is a fixed-size vector
[16:07:01] <engla> rusti: [1i, ..5]
[16:07:02] -rusti- [1, 1, 1, 1, 1]
[16:07:02] <cmr> luisbg: you can use &'static [&'static [uint]] though. Change the type to that and slap & in front of the ['s in the declaration
[16:07:16] <luisbg> what if I want to do the equivalent of C's: const unsigned short int _x[2][5] = [ ... ]
[16:07:33] <cmr> [[int, ..2], ..5], I believe.
[16:07:45] <cmr> But fixed length vectors are almost never what you want.
[16:07:45] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Ping timeout)
[16:07:50] <luisbg> let me check
[16:07:55] <engla> why not for a static?
[16:07:57] <dbaupp> nejucomo: rustpkg init` in a directory will create the appropriate subdirectories to make that a workspace.
[16:08:05] <luisbg> cmr, ehhh... glibc uses them extensively
[16:08:06] <engla> I think nested dynamic size vectors are almost never what you want
[16:08:16] <dbaupp> cmr: why are fixed length vectors undesirable?
[16:08:30] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[16:08:30] *** ChanServ sets mode: +o pnkfelix
[16:08:45] <luisbg> using a static table of numbers is pretty common and desirable
[16:09:02] <luisbg> numbers that can't be generated
[16:09:13] <cmr> dbaupp: if you're always going to be coercing to a slice, why not use a slice in the first place?
[16:09:13] <engla> rusti: [[1,2,3], [2,3,4]]
[16:09:14] -rusti- [[1, 2, 3], [2, 3, 4]]
[16:09:40] <dbaupp> cmr: because you might not be coercing to a slice?
[16:09:42] <luisbg> cmr,  what is the type to declare the static as?
[16:09:58] *** Quits: ofeldt (ofeldt@moz-DC6B58CF.dip0.t-ipconnect.de) (Ping timeout)
[16:10:00] <luisbg> [[int, ..2], ..5] ?
[16:10:03] <cmr> dbaupp: but then you can't do anything with your fixed-length vec besides indexing it :\
[16:10:08] <engla> cmr: the static size information should in theory lead to better code (removing bounds checks)
[16:10:28] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[16:11:08] <cmr> engla: iirc llvm doesn't do that optimization, and even if it did, I'm pretty sure we always emit bounds checks
[16:11:17] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[16:11:23] <engla> llvm could do it
[16:11:28] <engla> but yes it's not done now
[16:11:38] <cmr> luisbg: that would correspond to [[1, 2], [3, 4], [5, 6], [7, 8], [9, 10]]
[16:12:12] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[16:12:18] <engla> you can have rusti tell you the type
[16:12:22] <engla> rusti: let v = [[1, 2], [3, 4], [5, 6], [7, 8], [9, 10i]]; v.noexist
[16:12:23] -rusti- <anon>:7:61: 7:70 error: attempted access of field `noexist` on type `[[int, .. 2], .. 5]`, but no field with that name was found
[16:12:23] -rusti- <anon>:7          let v = [[1, 2], [3, 4], [5, 6], [7, 8], [9, 10i]]; v.noexist
[16:12:23] -rusti-                                                                       ^~~~~~~~~
[16:12:23] -rusti- error: aborting due to previous error
[16:12:24] -rusti- application terminated with error code 101
[16:12:39] <cmr> heh
[16:13:28] <dbaupp> fwiw, I've seen LLVM remove the bounds checks on [x, .. 256] and indexing with a u8
[16:13:37] *** Joins: ofeldt (ofeldt@moz-DC6B58CF.dip0.t-ipconnect.de)
[16:13:37] <dbaupp> (at least, I think I've seen that.)
[16:13:59] <luisbg> cmr, got it :)
[16:14:19] *** flaper87|afk is now known as flaper87
[16:14:22] * dbaupp prefers the `let () = <expr>` inference question :P
[16:14:34] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[16:16:02] *** Quits: clusterfoo (computer@moz-A81F9872.cable.teksavvy.com) (Ping timeout)
[16:16:21] <cmr> dbaupp: are you still working on the std::rand overhaul?
[16:16:31] <cmr> (https://github.com/mozilla/rust/wiki/Lib-rand)
[16:16:42] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Ping timeout)
[16:17:40] <jstevans> Why is let (x, y)... deprecated in 0.8?
[16:17:51] <cmr> jstevans: it's not?
[16:17:58] <dbaupp> cmr: *literally* cleaning up the next lot now
[16:18:00] <engla> it's not. but  let mut (x,y) is removed
[16:18:10] <benh> rip, let mut (x, y)
[16:18:10] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[16:18:10] <jstevans> cmr: what engla said, sorry
[16:18:10] <nejucomo> engla: That reminds me, it'd be nice to have a rusti command to query for the type of an expression (a la ghci's :t <expr> )
[16:18:11] <cmr> rusti: let (x, y) = (42, 24); (x, y)
[16:18:12] -rusti- (42, 24)
[16:18:27] <jstevans> rusti: let mut (x, y) = (1, 2); (x, y)
[16:18:27] -rusti- pastebinned 6 lines of output: http://sprunge.us/LMNi
[16:18:30] <engla> nejucomo: yes
[16:18:30] <jstevans> ^ that's what I meant, sorry
[16:18:30] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[16:18:48] <erickt> rusti: let (mut x, mut y) = (1, 2); (x, y)
[16:18:49] -rusti- pastebinned 7 lines of output: http://sprunge.us/LRRf
[16:18:52] <dbaupp> cmr: (https://github.com/mozilla/rust/pull/9362 was the first part)
[16:18:57] <erickt> hrm
[16:19:02] <engla> jstevans: erickt's syntax will be supported in the future
[16:19:19] * dbaupp doesnt think it would be very hard to add
[16:19:25] <engla> jstevans: it's in transition, with a gap in the road
[16:19:28] <jstevans> engla: beautiful. Thanks, guys!
[16:19:54] *** Quits: doomlord__ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Quit: Leaving)
[16:20:19] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[16:20:26] *** Joins: zlin (Mibbit@moz-97ADC4B6.bootp.virginia.edu)
[16:20:32] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:21:48] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[16:22:37] <erickt> I wonder if it'd be worthwhile having a 'gaps' metabug, for these things that are temporarily broken. Another one is #8888 to add support for Foo::<for T>::bar(). Do we have more?
[16:23:05] <erickt> Or maybe a label?
[16:23:35] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[16:23:53] <dbaupp> "buildmaster reconfigured: bot disconnecting"?
[16:24:25] <dbaupp> engla: looks like everyone is conspiring against your @mut PR :P
[16:24:33] <engla> indeed
[16:24:36] <acrichto> one sec, restarting buildbot
[16:24:40] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[16:24:42] <acrichto> sorry didn't look like it made much progress yet
[16:24:45] <acrichto> should be back in a sec
[16:24:52] <acrichto> taking care of #9623
[16:24:55] <acrichto> (hopefully)
[16:25:16] <engla> "slave lost"
[16:25:26] <acrichto> it should come back, may take a second
[16:25:36] <engla> no problem
[16:25:46] *** Quits: Ralith (ralith@moz-36466B9F.customer.broadstripe.net) (Ping timeout)
[16:26:07] *** Joins: maik (maik@moz-6A162886.dip0.t-ipconnect.de)
[16:26:16] *** Quits: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:26:33] <cmr> rusti: '''
[16:26:33] -rusti- <anon>:7:10: 7:11 error: character constant must be escaped: \'
[16:26:34] -rusti- <anon>:7          '''
[16:26:34] -rusti-                    ^
[16:26:34] -rusti- application terminated with error code 101
[16:26:42] <cmr> How does that even parse :p
[16:26:55] <acrichto> it used to be accepted...
[16:27:02] <cmr> I know, I'm looking at https://github.com/mozilla/rust/pull/9335
[16:27:12] <SiegeLord> It checks for the character after the first ' and goes from there
[16:27:47] <zxcdw> rusti: '\''
[16:27:48] -rusti- '\''
[16:28:46] <cmr> It looks like we accreted ~50 more contributors since 0.7, nice!
[16:29:01] <SiegeLord> Are you saying Rust is like a black hole? :P
[16:29:05] <cmr> 66
[16:29:23] <nejucomo> cmr: How did you determine that number?
[16:29:32] <cmr> nejucomo: https://github.com/mozilla/rust/pull/9478/files
[16:30:25] <nejucomo> Nice.
[16:30:47] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[16:31:10] <eevee> SiegeLord: it's a newly-forming star!
[16:31:58] *** Joins: fireglow (fireglow@1D843F6D.FFAA71EC.37339E3A.IP)
[16:32:09] *** Quits: RMF (RMF@74223BAA.93D545F0.8D19547B.IP) (Ping timeout)
[16:32:27] <olsonjeffery> more like a series of asteroids and space dust
[16:32:32] <olsonjeffery> the rust-belt, if you will
[16:32:35] <cmr> space... rust?
[16:32:40] *** Joins: riley (riley@8BA43816.9AA11D69.65DDFA89.IP)
[16:32:50] <olsonjeffery> quit trying to crowd in my pun action
[16:32:57] <olsonjeffery> on my*
[16:32:59] <cmr> :p
[16:33:37] <olsonjeffery> cmr: so any thoughts (beyond "we accept patches!") on when/if/how rustdoc[_ng] will build code examples in docstrings?
[16:33:54] <cmr> olsonjeffery: it's not one of my priorities.
[16:34:16] <cmr> It *should* be fairly easy, though.
[16:34:42] *** Joins: RMF (RMF@74223BAA.93D545F0.8D19547B.IP)
[16:34:49] <cmr> After comment stripping, pull out ```rust blocks, write them to their own files in some directory, run `rust test` on them.
[16:35:00] <cmr> Or even just rustc, and not run them.
[16:35:21] *** Joins: kelvin (kelvin@37464A4.8FFBE666.DDE5D3F6.IP)
[16:36:16] *** Quits: mindcat (root@6154B326.DC005319.857BDFA9.IP) (Ping timeout)
[16:36:26] <dbaupp> https://github.com/mozilla/rust/issues/9403 is probably relevant to how the rustdoc-test-runner works too
[16:36:30] *** Quits: RMF (RMF@74223BAA.93D545F0.8D19547B.IP) (Ping timeout)
[16:36:58] <kelvin> So I have a quick question. I'm spawning a new task with task::spawn_sched(task::SingleThreaded) and I was wondering what the easiest way to get the stdout from that new task to the parent task's stdout is
[16:37:15] <cmr> kelvin: they share the same stdout
[16:37:22] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[16:37:31] <cmr> it just spawns a new thread, threads share file descriptors.
[16:37:43] <kelvin> really? interesting. when I print to stdout in the new task it won't show up in the terminal
[16:38:07] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[16:38:17] <kelvin> mayhaps I have other issues then
[16:38:37] *** Joins: RMF (RMF@74223BAA.93D545F0.8D19547B.IP)
[16:38:46] <cmr> You could strace it and see if there are write()'s where you expect them, and which fd they're to.
[16:39:17] <kelvin> I know that if I use println() in the new task it does show up in the terminal, but using the writer from io::stdout() doesn't work
[16:39:45] <cmr> Ah, std::io
[16:39:58] *** Quits: zlin (Mibbit@moz-97ADC4B6.bootp.virginia.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[16:40:02] <dbaupp> that's pretty weird, println just calls stdout().write_line() internally, iirc.
[16:40:19] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[16:40:50] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[16:41:15] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[16:41:32] *** Quits: RMF (RMF@74223BAA.93D545F0.8D19547B.IP) (Quit: Textual IRC Client: www.textualapp.com)
[16:41:55] <benh> error: mismatched types: expected `std::option::Option<&int>` but found `std::option::Option<~int>` (expected &-ptr but found ~-ptr)
[16:41:58] <benh> boo, why isn't it borrowing
[16:42:25] <cmr> benh: nested types don't get autoborrowed.
[16:42:33] <cmr> It won't turn a Some(~T) into a Some(&T)
[16:42:53] *** Joins: clusterfoo (computer@moz-A81F9872.cable.teksavvy.com)
[16:42:59] <benh> It's ~clearly~ supposed to realize I need Some(&T) and coerce the ~T before even constructing the Option! 
[16:43:02] *** Joins: steveh (Mibbit@moz-7A900440.fda.gov)
[16:43:06] <cmr> heh
[16:44:27] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[16:44:56] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[16:45:39] *** Quits: fireglow (fireglow@1D843F6D.FFAA71EC.37339E3A.IP) (Ping timeout)
[16:45:45] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[16:46:14] *** Quits: jstevans (Instantbir@39438E20.EBD92228.DDE5D3F6.IP) (Ping timeout)
[16:46:44] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[16:46:44] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[16:47:17] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[16:48:03] <kelvin> found the issue, I was looking to see if output was redirected before printing to stdout and it was :P
[16:49:17] <Yurume> is there a trait for implicitly copyable types (i.e. no explicit `clone()` and still does not move)?
[16:49:38] <dbaupp> Yurume: no
[16:50:10] <steveh> Yurume: sometimes I wish for it
[16:50:47] <Yurume> hah, rust-sdl's `Color` is not `Clone`able, and my 0.7-based code is screaming with rustc :S
[16:53:40] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[16:54:23] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[16:54:35] *** Joins: stevekla1nik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[16:55:48] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[16:59:04] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[17:00:08] *** Quits: fyolnish (fyolnish@moz-EF9D86D5.uqwimax.jp) (Client exited)
[17:00:56] *** Quits: arodier74 (Thunderbir@moz-25EB015.in-addr.btopenworld.com) (Quit: arodier74)
[17:01:53] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[17:02:44] *** Joins: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[17:02:59] *** Quits: maik (maik@moz-6A162886.dip0.t-ipconnect.de) (Ping timeout)
[17:03:37] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[17:03:50] *** Joins: fireglow (fireglow@1D843F6D.FFAA71EC.37339E3A.IP)
[17:03:55] <kelvin> okay, so if I do task::spawn_sched and create a run::Process in that new task, assigning 1 as the out_fd, shouldn't that print to the stdout of the parent task?
[17:03:56] <nejucomo> benh: Can you Option.map to a borrow?  I'm curious how you're solving that issue.
[17:05:50] *** Joins: jstevans (Instantbir@706A3B59.EEDD3B02.DDE5D3F6.IP)
[17:05:56] <jstevans> Is it possible to get a segfault in Rust?
[17:06:29] <cmr> jstevans: excluding unsafe code and compiler bugs, no.
[17:08:04] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[17:08:16] *** Quits: canhtak (jeremy@moz-FC3C2F63.wl.t.ulaval.ca) (Quit: canhtak)
[17:09:07] <benh> nejucomo: Some(&*ptr)
[17:09:54] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:09:54] *** ChanServ sets mode: +ao brson brson
[17:10:14] *** Joins: andrew-__ (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net)
[17:10:17] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Connection reset by peer)
[17:10:29] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[17:10:53] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[17:11:01] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[17:11:27] *** Joins: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr)
[17:11:31] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[17:11:38] <steveh> [Anyone]: When iterating vectors with "value" types like numbers, I'm having  to do a lot of .map(|&x|x) so I can do things like sum, prod, etc.  Is that the best way currently?
[17:12:22] <cmr> steveh: there's move_iter too
[17:12:43] *** Quits: ahal (ahal@FCCEA34F.7672369.D8E68FF6.IP) (Ping timeout)
[17:14:05] <steveh> cmr: I didn't think of that - is a "move" of a value type like a number just a copy?  What if the type is only known through a type class, can it do a .clone() automatically?  Seems like I've been bittern by that but can't remember.
[17:14:21] <steveh> I mean trait :)
[17:14:42] *** Joins: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com)
[17:14:51] *** Joins: Kruppe (user@47D9A12A.80DA567B.66C78069.IP)
[17:15:31] <cmr> steveh: no, it will consume the vector.
[17:15:39] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[17:15:54] <steveh> cmr: ok still useful sometimes, thanks
[17:16:08] <cmr> sum, prod, etc are awkward and are seriously being considered for removal.
[17:16:13] *** Joins: ahal (ahal@FCCEA34F.7672369.D8E68FF6.IP)
[17:16:28] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[17:17:25] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[17:17:43] <steveh> cmr: seems to me they have their uses, it's just that they would be a lot more convenient with something like clone_iter() if it existed.
[17:19:04] *** Joins: dolphinling (andrew@moz-80A1E448.uvm.edu)
[17:21:39] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[17:21:48] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[17:23:06] *** Quits: andrew-__ (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net) (Input/output error)
[17:23:27] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[17:24:25] <Luqman> hmmm anyone encountered librustrt.so: error: undefined reference to 'pthread_barrier_{init,destroy,wait}' when targetting android?
[17:26:11] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[17:28:51] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[17:29:02] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Quit: Leaving)
[17:30:17] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[17:30:25] *** Quits: ksev (DrunkenPan@moz-71F7E457.cable.teksavvy.com) (Ping timeout)
[17:31:07] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[17:31:17] *** Quits: steveh (Mibbit@moz-7A900440.fda.gov) (Quit: http://www.mibbit.com ajax IRC Client)
[17:32:55] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[17:34:26] *** Joins: maik (maik@moz-6A162886.dip0.t-ipconnect.de)
[17:34:41] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[17:34:41] *** ChanServ sets mode: +o pnkfelix
[17:34:41] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[17:37:14] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[17:37:46] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:39:29] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:40:50] <jason_> struct Foo { data: ~[int] } let mut foo = Foo{data: ~[1, 2, 3]}; std::vec::raw::set_len(foo.data, 0);
[17:41:32] <jason_> how do i get that to work? i expected foo.data to inherit mutability from foo, but it doesn't
[17:41:38] *** Quits: maik (maik@moz-6A162886.dip0.t-ipconnect.de) (Ping timeout)
[17:42:39] <jason_> rusti: struct Foo { data: ~[int] } let mut foo = Foo{data: ~[1, 2, 3]}; std::vec::raw::set_len(foo.data, 0);
[17:42:40] -rusti- <anon>:7:97: 7:105 error: mismatched types: expected `&mut ~[<V9>]` but found `~[int]` (expected &-ptr but found vector)
[17:42:40] -rusti- <anon>:7          struct Foo { data: ~[int] } let mut foo = Foo{data: ~[1, 2, 3]}; std::vec::raw::set_len(foo.data, 0);
[17:42:40] -rusti-                                                                                                           ^~~~~~~~
[17:42:40] -rusti- error: aborting due to previous error
[17:42:42] -rusti- application terminated with error code 101
[17:43:01] <cmr> jason_: that's not a mutability problem, that's a type problem.
[17:43:08] <cmr> rusti: struct Foo { data: ~[int] } let mut foo = Foo{data: ~[1, 2, 3]}; std::vec::raw::set_len(&mut *foo.data, 0);
[17:43:09] -rusti- <anon>:7:102: 7:111 error: type ~[int] cannot be dereferenced
[17:43:09] -rusti- <anon>:7          struct Foo { data: ~[int] } let mut foo = Foo{data: ~[1, 2, 3]}; std::vec::raw::set_len(&mut *foo.data, 0);
[17:43:09] -rusti-                                                                                                                ^~~~~~~~~
[17:43:09] -rusti- error: aborting due to previous error
[17:43:10] -rusti- application terminated with error code 101
[17:43:13] <cmr> feh
[17:43:29] <cmr> rusti: struct Foo { data: ~[int] } let mut foo = Foo{data: ~[1, 2, 3]}; std::vec::raw::set_len(foo.data.as_mut_slice(), 0);
[17:43:30] -rusti- <anon>:7:97: 7:121 error: type `~[int]` does not implement any method in scope named `as_mut_slice`
[17:43:30] -rusti- <anon>:7          struct Foo { data: ~[int] } let mut foo = Foo{data: ~[1, 2, 3]}; std::vec::raw::set_len(foo.data.as_mut_slice(), 0);
[17:43:30] -rusti-                                                                                                           ^~~~~~~~~~~~~~~~~~~~~~~~
[17:43:31] -rusti- error: aborting due to previous error
[17:43:32] -rusti- application terminated with error code 101
[17:44:16] <cmr> Yeah I have no idea
[17:45:21] *** Quits: kelvin (kelvin@37464A4.8FFBE666.DDE5D3F6.IP) (Ping timeout)
[17:46:03] <jason_> :(
[17:46:46] <andor> is there any way to pass extra libraries to be passed to g++/ld? 
[17:46:57] <cmr> andor: --link-args
[17:47:06] *** Joins: alk (alk@moz-32A9FF6A.fbxo.proxad.net)
[17:47:19] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[17:47:22] <jason_> cmr: oh, you almost had it
[17:47:36] <jason_> rusti: struct Foo { data: ~[int] } let mut foo = Foo{data: ~[1, 2, 3]}; unsafe { std::vec::raw::set_len(&mut foo.data, 0); }
[17:47:37] -rusti- ()
[17:48:10] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[17:48:19] *** Quits: Kruppe (user@47D9A12A.80DA567B.66C78069.IP) (Ping timeout)
[17:48:58] *** flaper87 is now known as flaper87|afk
[17:49:23] <nejucomo> What's the literal for a nul character?  '\0' did not work.
[17:49:35] <andor> and in relation to my previous question, if i have some library dll (yes, windows, sob) from rust code, where am i supposed to put it so that rustc can see it?
[17:49:35] <jason_> i was really trying to implement Mutability trait which has fn clear(&mut self) and i expected self.data to be mutable without having to do &mut self.data
[17:49:41] <bstrie> nejucomo: that should work
[17:49:45] <cmr> nejucomo: what version are you on?
[17:49:48] <cmr> rusti: '\0'
[17:49:48] *** Joins: Jesin (Jessin_@moz-A11FEBC.cc.lehigh.edu)
[17:49:49] -rusti- '\x00'
[17:49:49] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[17:50:02] <nejucomo> Ah, I am invoking and old rust...
[17:50:04] <cmr> jason_: it is mutable. but it's a ~[], not a &mut []
[17:50:11] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[17:50:33] <cmr> andor: wherever, just pass -L path/to/dir/containing/that_dll
[17:50:54] <andor> cmr: but it's in the directory my .rs file is and it doesn't seem to pick it up...
[17:50:58] <cmr> andor: -L .
[17:51:09] <andor> why is that necessary though? 
[17:51:11] <andor> oh wait
[17:51:22] <andor> i guess ld automatically does taht, whereas rustc does not?
[17:51:32] <cmr> Yep
[17:51:52] <cmr> We resolve deps with rustpkg. If you are doing something else, you need to specify the -L manually.
[17:52:29] <andor> also, does exter mod x = "some git repo url"; work on windows?
[17:52:49] <cmr> Well it doesn't work anywhere atm, but yes, if it were working, it should work on windows too.
[17:52:57] <andor> oh, heh, okay
[17:53:14] <andor> will it require a working git binary on my PATH?
[17:53:19] <cmr> yes
[17:53:20] *** Joins: tjc (tjc@moz-7B0110AD.mv.mozilla.com)
[17:53:20] *** ChanServ sets mode: +o tjc
[17:53:26] *** Joins: kelvin (kelvin@moz-28F04CF1.bootp.virginia.edu)
[17:53:56] <jason_> cmr: hmm, the error message confuses me then because it doesn't say what it found is mutable. expected `&mut ~[<V9>]` but found `~[int]`
[17:53:57] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[17:54:06] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[17:54:13] <cmr> jason_: Yes, it's a type mismatch. Mutability doesn't play into it at all.
[17:54:17] <cmr> ~[] is always mutable.
[17:55:04] *** Quits: jstevans (Instantbir@706A3B59.EEDD3B02.DDE5D3F6.IP) (Ping timeout)
[17:55:04] *** Quits: tjc (tjc@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[17:56:05] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[17:56:05] *** ChanServ sets mode: +o tjc
[17:56:16] *** Joins: jstevans (Instantbir@706A3B59.EEDD3B02.DDE5D3F6.IP)
[17:57:05] *** Quits: ahal (ahal@FCCEA34F.7672369.D8E68FF6.IP) (Input/output error)
[17:57:20] *** Joins: doomlord__ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[17:57:56] *** Quits: jstevans (Instantbir@706A3B59.EEDD3B02.DDE5D3F6.IP) (Ping timeout)
[17:58:50] *** Joins: bt3ze (bt3ze@D3302792.C8A19C38.DDE5D3F6.IP)
[17:59:52] *** Parts: bt3ze (bt3ze@D3302792.C8A19C38.DDE5D3F6.IP) (Leaving)
[18:00:23] *** Joins: fyolnish (fyolnish@moz-6FB6FE8D.uqwimax.jp)
[18:00:36] *** Joins: bt3ze (bt3ze@D3302792.C8A19C38.DDE5D3F6.IP)
[18:00:58] *** Joins: mib_m8iz3f (Mibbit@90B3242C.E8B6FA7D.DDE5D3F6.IP)
[18:00:58] <luisbg> if I want to use time.h from C, how do I do it?
[18:01:15] <luisbg> how do Rust libraries that depend on C libraries do it?
[18:01:30] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[18:01:37] <cmr> rust-bindgen, although std::libc should have stuff for it.
[18:01:41] <bt3ze> how do I redirect stdin and stdout using Process?
[18:02:04] *** Quits: fyolnish (fyolnish@moz-6FB6FE8D.uqwimax.jp) (Ping timeout)
[18:02:34] *** Quits: Jesin (Jessin_@moz-A11FEBC.cc.lehigh.edu) (Quit: Leaving)
[18:03:18] <cmr> bt3ze: look in the logs, https://botbot.me/mozilla/rust
[18:03:31] <tjc> bt3ze: there's an example in std::run::test_finish_with_output_redirected
[18:03:33] <luisbg> cmr, cool! got it
[18:03:37] <cmr> that question has been answered like 4 times this weekend :p
[18:03:59] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[18:03:59] <bt3ze> thanks :) I can imagine why so many people are asking
[18:04:03] <tjc> cmr: I have the slightest hunch it might be a homework problem :-)
[18:04:22] <bt3ze> you'll stop hearing the question by tomorrow
[18:05:06] <Ms2ger> From tomorrow, we can answer "you should start working on your homework earlier"? :)
[18:05:14] <cmr> heh
[18:05:19] <bt3ze> he gave us two weeks
[18:05:32] <Ms2ger> And you're here today? ;)
[18:05:54] <bt3ze> the beginning of the assignment was just as easy ;)
[18:06:02] <bt3ze> lesson learned: easier to not be shy
[18:06:33] <bt3ze> (also lesson learned: start when he gives the assignment)
[18:06:36] <bt3ze> thank you for your help
[18:06:37] <bt3ze> !
[18:07:05] <tjc> starting homework early is a good thing
[18:07:13] <Ms2ger> (If this were me... I'd say "time well arranged")
[18:07:13] <tjc> a lesson I learned a few days before I stopped having homework to do :-)
[18:07:35] <bt3ze> one professor once told me it's not procrastination if you plan to put it off
[18:07:35] <Ms2ger> tjc, it's a lesson I often learned, but never heed :)
[18:07:40] <Ms2ger> Hza
[18:07:41] <jason_> cmr: I think I get it now. I was expected ~[int] to magically turn into a &mut ~[int] because `self` does that when you have a mut struct and call some fn foo(&mut self) method on it.
[18:07:42] <Ms2ger> Ha, even
[18:07:56] <tjc> Ms2ger: haha, I have a lot of lessons like that
[18:08:03] <tjc> I'm great at giving advice because I've made so many bad decisions
[18:08:07] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[18:08:13] <tjc> and I can point out to people the things they shouldn't do, because I've done them
[18:08:45] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Ping timeout)
[18:08:57] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[18:09:11] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[18:10:36] *** Joins: fyolnish (fyolnish@moz-6FB6FE8D.uqwimax.jp)
[18:11:05] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[18:11:18] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:11:20] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[18:12:17] *** Quits: fyolnish (fyolnish@moz-6FB6FE8D.uqwimax.jp) (Ping timeout)
[18:12:39] *** Joins: judder (maradukewa@1BB87CE.111872A8.950D3BB5.IP)
[18:13:04] <engla> I have a question about accessing a &mut  struct field in a &self pointer. https://github.com/mozilla/rust/issues/9629
[18:13:09] <engla> could this ever be allowed
[18:13:24] *** Quits: KindOne (KindOne@moz-8BF3E2EA.dynamic.ip.windstream.net) (Ping timeout)
[18:14:02] <cmr> Hm, *immutable* access of the &mut should be fine I would think...
[18:14:48] <engla> well obviously someone has thought much better and longer about this than me (and then written the borrowck)
[18:15:08] <cmr> nmatsakis: ^^^
[18:16:49] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[18:16:58] *** Joins: maik (maik@moz-6A162886.dip0.t-ipconnect.de)
[18:18:37] *** Joins: KindTwo (KindOne@moz-590C0860.dynamic.ip.windstream.net)
[18:19:53] *** KindTwo is now known as KindOne
[18:20:23] *** Joins: jdsanders (Adium@moz-F45527D6.hlrn.qwest.net)
[18:21:13] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[18:22:24] <nmatsakis> cmr engla : I've debated about this. I think it should be ok to permit immutable access, but I am wary. I feel like I had a reason to disallow that.
[18:22:48] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[18:22:49] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[18:22:52] <nmatsakis> cmr engla : I see in my doc for the borrowck, however, that I list this as a possible future extension
[18:24:11] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[18:24:28] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[18:24:29] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[18:24:42] <myname> sooo... rust-bindgen doesn't work with rustpkg?
[18:24:58] <cmr> myname: what do you mean?
[18:25:01] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[18:25:01] <Amaranth> "work with"? Oh you mean to compile it?
[18:25:01] <tjc> myname: I haven't tested it with rustpkg, so that wouldn't surprise me =)
[18:25:16] <myname> rustpkg install github.com/crabtw/rust-bindgen
[18:25:22] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[18:25:23] <tjc> oh, I see
[18:25:24] <myname> package does not exist
[18:25:29] <cmr> tjc: btw, rustpkg work keeps getting pushed further down on my priority list :(
[18:25:35] <cmr> myname: remote packages are currently broken.
[18:25:39] *** Joins: ahal (ahal@FCCEA34F.7672369.D8E68FF6.IP)
[18:25:54] <myname> great
[18:25:57] <Amaranth> cmr: bindgen isn't setup for it anyway
[18:25:58] <tjc> myname: yeah, all remote packages are broken right now -- if you manually `git clone` it and try to `rustpkg install` it, that should work
[18:26:03] *** Joins: eatkinson (eatkinson@E5442022.772DB3ED.90B17E8F.IP)
[18:26:07] <tjc> Amaranth: it looks like bindgen has a main.rs file -- idk if that's a coincidence though
[18:26:24] <Amaranth> tjc: I thought it needed the code in src/bindgen/
[18:26:27] *** Joins: RMF (RMF@74223BAA.93D545F0.8D19547B.IP)
[18:26:48] <olsonjeffery> brson: ping
[18:27:10] <engla> nmatsakis: ok! I'm not sure it is even necessary, but possibly, if @mut T is used less, &mut T could be useful in this way indicated in the usecase in that issue
[18:27:42] *** Joins: obk (Mibbit@moz-E977B938.red.bezeqint.net)
[18:27:56] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[18:28:27] <tjc> Amaranth: No, although I've said confusing things about that in the past. rustpkg -- when remotes work again -- will put the code in the src/bindgen subdirectory of a workspace
[18:28:51] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[18:29:23] <brson> olsonjeffery: pong
[18:30:09] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten)
[18:30:13] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[18:30:55] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Quit: class)
[18:31:36] <olsonjeffery> brson: so, you i've been woring on BasicEventLoop.. i also did my rust talk on saturday.. and i had an extended discussion, afterwards with two plumbers (one RT embedded dev and another driver dev).. i ended up having to put down in writing the crazy that came out of it.. it's an RFC, linked here: https://gist.github.com/olsonjeffery/6767132
[18:31:57] <olsonjeffery> brson: i think proposal itself is probably too hardcore and possibly very mistaken.. but curious if thats a reasonable grasp of the holistic problem, at all..
[18:32:17] <olsonjeffery> you know i've been working on*
[18:33:18] <olsonjeffery> brson: i'm bringing it to you because, AFAIK, you're the only person i know of who knows all of these systems, over all. but it sounds like actually doing anything like this would touch a lot more than just "the runtime"
[18:34:36] *** Quits: mib_m8iz3f (Mibbit@90B3242C.E8B6FA7D.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:34:36] *** Quits: bt3ze (bt3ze@D3302792.C8A19C38.DDE5D3F6.IP) (Quit: Leaving)
[18:35:50] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[18:36:10] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:36:22] *** Joins: cstrahan (cstrahan@1809CFF1.BCF4F96A.CE96D5E4.IP)
[18:36:32] *** Quits: Ms2ger (Ms2ger@moz-2F2A356D.adsl-dyn.isp.belgacom.be) (Ping timeout)
[18:36:32] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:36:47] *** Quits: nkoep (nik@moz-9B94095F.vpn.rwth-aachen.de) (Ping timeout)
[18:37:54] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:38:11] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[18:38:11] *** ChanServ sets mode: +o pnkfelix
[18:38:19] <nejucomo> nmatsakis: Is this comment https://github.com/mozilla/rust/issues/5527#issuecomment-17809177 about an analog to this haskell issue http://stackoverflow.com/questions/3213490/how-do-i-write-if-typeclass-a-then-a-is-also-an-instance-of-b-by-this-definit/3216937#3216937 ?
[18:38:42] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:38:55] *** Joins: Ms2ger (Ms2ger@moz-2F2A356D.adsl-dyn.isp.belgacom.be)
[18:38:56] <nejucomo> Anecdotally this is something haskell programmers, and from the ML, rust programmers will often run into, so I'm hoping for a good canonical explanation of the issue.
[18:39:00] *** Joins: ksev (DrunkenPan@moz-71F7E457.cable.teksavvy.com)
[18:40:31] *** Joins: jstevans (Instantbir@20B12275.6925E1D4.DDE5D3F6.IP)
[18:40:33] <jstevans> In 0.7, when I do let prog = Process::new(...); let o = prog.output(); println(fmt!("READER=%?",o)); I get "READER=" and nothing else
[18:40:51] *** Quits: RMF (RMF@74223BAA.93D545F0.8D19547B.IP) (Connection reset by peer)
[18:40:52] *** Quits: ksev (DrunkenPan@moz-71F7E457.cable.teksavvy.com) (Ping timeout)
[18:40:59] * obk is trying to switch to using format! - how can one define Str as_slice for some type that needs to print as a string but doesn't contain one to return as a slice?
[18:41:15] <brson> olsonjeffery: factoring the runtime better is a good goal. I believe that all the local state that rustc requires is encapsulated in the Task type, which is intended to not require green thread scheduling.
[18:41:16] <jstevans> I also get memory errors using o
[18:41:52] <brson> olsonjeffery: the last time I thought about it though I didn't think it was very practical to subdivide std into additional crates though because the interdependencies are very complex, particularly around logging
[18:42:17] <tjc> brson: You mentioned a couple of weeks ago that you were going to add some more people to the bors whitelist so they could push to try -- did you have a chance to do that?
[18:42:17] <obk> Say, struct Foo { foo: uint }; impl Str for Foo { fn as_slice<'a>(&self) -> &'s str { ... what can one put here? ... } }
[18:42:19] <brson> though things could probably be redesigned with enough dynamism to make it work
[18:42:27] *** Joins: lex (lex@A2D8AC61.87CA334A.DDE5D3F6.IP)
[18:42:32] <olsonjeffery> brson: indeed. and i don't have a good answer here. the best i had was "put all the interfaces in a libkernel crate and let the compiler sort it out at build time"
[18:42:37] <nejucomo> Hey brson, do you know where I can get a rust sticker for my laptop?
[18:42:54] <olsonjeffery> with some heuristic for multiple impls of a given trait that the compiler knows about at build time
[18:43:09] <brson> tjc: no
[18:43:25] <tjc> brson: Ok, it came up again yesterday
[18:43:33] <brson> nejucomo: email me your address
[18:43:37] <olsonjeffery> there is risk, as pointed out, for situations with a binary package ecosystem (where all the non-stdlib dependencies aren't built at one time...)
[18:44:39] <nejucomo> brson: So you just hand them out like that?  I don't need to close tickets first?  ;-)
[18:44:52] <tjc> the squeaky wheel gets the stickers :-)
[18:44:54] <olsonjeffery> brson: anyways.. this all sort of fell out when answering questions about writing rust with "no runtime" .. and pulling on that thread sort of lead to the whole sweater unravelling all the down into the zero.rs
[18:44:58] <olsonjeffery> really seems like it's all connected
[18:45:02] *** Joins: xarcus (Mibbit@moz-50577648.red-83-38-56.dynamicip.rima-tde.net)
[18:45:11] <xarcus> Hi
[18:45:13] * nejucomo imagines shoulder patches with rank markers for bugs fixed.
[18:45:46] <tjc> shoulder patches? Hmm, that's a good idea too. *cancels appointment to get a github impact tattoo*
[18:46:25] <nmatsakis> nejucomo: yes
[18:46:42] <olsonjeffery> i wish i had some stickers to give out
[18:46:42] <xarcus> Do you think that there are gonna be jobs for rust programmers in the future?(I mean 2 years o more)
[18:46:44] <olsonjeffery> next time!
[18:47:14] <brson> olsonjeffery: I don't think a rust with 'no runtime' makes sense really, just different configurations of runtime. we'll never be able to make all runtime functionality work correctly in every environment though, but we can over time make rust without green threads more practical
[18:47:17] *** Joins: jordyd (jordyd@moz-790E2988.seg43.ucf.edu)
[18:47:48] *** Quits: maik (maik@moz-6A162886.dip0.t-ipconnect.de) (Ping timeout)
[18:47:54] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:47:54] <xarcus> ?
[18:48:14] <erickt> xarcus: there's already been one job opening in Mozilla research :)
[18:48:17] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[18:48:27] <strcat> olsonjeffery: fwiw zero.rs is obsolete now
[18:48:34] *** Joins: vLK (vLK@moz-2D4B6366.bredband.comhem.se)
[18:48:50] <xarcus> I saw one, but I mean jobsssss, like other languages like scala
[18:48:54] <olsonjeffery> strcat: oh yeah? how so?
[18:48:57] <strcat> #[no_std]; #[start] fn main(_: int, _: **u8) -> int { 0 }
[18:49:07] <strcat> it will just ask you to define lang items as you use them
[18:49:14] <tjc> xarcus: if Rust is as successful as we hope, then there will be Rust jobs outside Mozilla, but probably not for a few years :-)
[18:49:16] <strcat> easy enough, and that way you actually get to define your own runtime as you need it
[18:49:24] <olsonjeffery> interesting!
[18:49:54] <myname> rust-bindgen seem to completely ignore #defines
[18:50:05] <myname> as if constant's aren't that important
[18:50:05] <jstevans> In 0.7, when I do let prog = Process::new(...); let o = prog.output(); println(fmt!("READER=%?",o)); I get "READER=" and nothing else... I also get memory errors when trying to use o. What's happening?
[18:50:08] <xarcus> Do you think that other companies will want to use it?
[18:50:15] <erickt> xarcus: I hope so. Samsung's doing some exploration of rust, and if you hop in #rust-gamedev, you can chat with some game devs that are exploring rust for that market. There's a chance a job may fall out of there
[18:50:32] <tjc> myname: as far as I know, there isn't any interfacing with C preprocessor macros in Rust
[18:50:40] <jason_> i'm exploring it for a search engine company
[18:50:45] <olsonjeffery> strcat: does an ultra simple hello world (with no IO), as pointed out above, run in only a single thread?
[18:50:51] <cmr> myname: bindgen should make them into statics.
[18:51:05] <strcat> olsonjeffery: yes, 
[18:51:08] <strcat> look at that IR :)
[18:51:08] <myname> cmr: i agree, but it didn't
[18:51:18] <strcat> olsonjeffery: well, where above?
[18:51:22] <strcat> do you mean my snippet?
[18:51:25] <olsonjeffery> yes
[18:51:39] <strcat> olsonjeffery: yes, it becomes a minimal main function
[18:51:41] <strcat> like C
[18:51:53] *** Joins: Jesin (Jessin_@moz-A11FEBC.cc.lehigh.edu)
[18:51:59] <strcat> define i64 @main(i64, i8** nocapture readnone) #0 {
[18:52:01] <strcat> top:
[18:52:03] <strcat>   ret i64 0
[18:52:05] <strcat> }
[18:52:13] *** Quits: xarcus (Mibbit@moz-50577648.red-83-38-56.dynamicip.rima-tde.net) (Quit: http://www.mibbit.com ajax IRC Client)
[18:52:16] <olsonjeffery> that was something come up during the talk.. the unstated thread overhead of just an un-annotated main() fn. 
[18:52:32] <olsonjeffery> i guess if the gaps between an undecorated main() and the one in your snippet are filed down
[18:52:38] <olsonjeffery> that's pretty much 95%
[18:52:43] <olsonjeffery> along with an easy way to start runtimes
[18:52:53] <vLK> RUST FOREVER !!!!
[18:52:54] *** Parts: vLK (vLK@moz-2D4B6366.bredband.comhem.se) ()
[18:52:55] <olsonjeffery> scheduler/task, i mean
[18:53:02] <olsonjeffery> yes. rust forever, indeed.
[18:53:48] <olsonjeffery> separate, but related, was a question about exporting a rust library for use from C code
[18:53:52] <strcat> olsonjeffery: yeah, 'fn main() {}' alone defines a function that's passed to rt::start
[18:54:10] <strcat> olsonjeffery: if you use #[no_std] you are writing something without even a dependency on libc
[18:54:23] <strcat> you just need the entry point shims
[18:54:56] *** Joins: ksev (DrunkenPan@moz-71F7E457.cable.teksavvy.com)
[18:55:12] *** Joins: nkoep (nik@moz-2176A709.pool.mediaways.net)
[18:56:03] *** Quits: timot_ (timot@1C5B7AF5.87C6DE19.CBC7865F.IP) (Ping timeout)
[18:56:20] *** Joins: timot_ (timot@moz-E599A11C.in-addr.nilings.se)
[18:57:53] *** Parts: lex (lex@A2D8AC61.87CA334A.DDE5D3F6.IP) ()
[18:57:54] *** Joins: lex (lex@A2D8AC61.87CA334A.DDE5D3F6.IP)
[18:57:59] *** Quits: eatkinson (eatkinson@E5442022.772DB3ED.90B17E8F.IP) (Quit: eatkinson)
[18:58:06] *** Joins: yoshi (Mibbit@moz-646815A6.zen.co.uk)
[19:00:06] *** Quits: fireglow (fireglow@1D843F6D.FFAA71EC.37339E3A.IP) (Quit: fireglow)
[19:01:28] <nejucomo> When I make check I get many [debug-info] failures: http://sebsauvage.net/paste/?9d87cc67b53355ef#q/4z8M4x0XDe+rUSV/BZIAlKNvYR5mVEBPDVV0DCKSo=
[19:01:32] <nejucomo> Is that expected
[19:01:33] <nejucomo> ?
[19:01:35] <jeaye> What's the proper was to go from int -> char now?
[19:01:42] <jeaye> I only see char::from_u32
[19:02:18] <strcat> use from_u32
[19:02:30] <jeaye> And then a cast from int to u32?
[19:02:40] <jeaye> Hmm, do you think it'll stay like that for a while?
[19:03:08] <strcat> I don't see a reason it would change
[19:03:22] <cmr> nejucomo: platform?
[19:03:26] <strcat> needing to convert should be rare
[19:03:29] <cmr> nejucomo: is this on master?
[19:03:32] *** Joins: Liothen (liothen@moz-266BCA86.spkn.qwest.net)
[19:04:06] <jeaye> That's fair. I just imagined there'd be something like FromStr. Maybe char::from_integral
[19:04:09] <nejucomo> cmr: Yes, on master.  My platform is amd64 linux with old tools (I'm on debian 6.0.7).
[19:04:23] *** Quits: yoshi (Mibbit@moz-646815A6.zen.co.uk) (Quit: http://www.mibbit.com ajax IRC Client)
[19:04:53] <strcat> jeaye: where are you getting an int that you want to convert to a char? just seems odd
[19:05:07] <jeaye> strcat: ncurses' getch. :P
[19:05:07] *** Joins: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP)
[19:05:13] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[19:06:00] <devbug> Wherefor art thou without unsafe enum?
[19:06:03] *** Quits: ksev (DrunkenPan@moz-71F7E457.cable.teksavvy.com) (Ping timeout)
[19:06:16] <cmr> devbug: what would it do?
[19:07:08] <jdm> nejucomo: wow.
[19:07:27] <jdm> nejucomo: what version of gdb?
[19:08:37] <devbug> cmr: C-like union
[19:09:07] <devbug> https://github.com/mozilla/rust/issues/5492
[19:09:32] <cmr> Oh jeez, I even commented on that issue.
[19:09:34] <cmr> How embarassing
[19:09:42] <devbug> It unfortunately means I need to use a C-shim to get my multiboot info
[19:09:45] <devbug> cmr: lol
[19:09:46] *** Joins: yeri (yeri@20E4ADF2.99753D62.A15D986E.IP)
[19:09:49] *** Joins: Azdle (patrick@moz-8C723B60.hsd1.mn.comcast.net)
[19:09:57] <cmr> devbug: note how bindgen doe sit.
[19:09:58] <cmr> *does it
[19:10:08] <devbug> cmr: hmm?
[19:10:18] <cmr> devbug: https://github.com/crabtw/rust-bindgen
[19:10:18] <devbug> inb4 alignof and sizeof hacks
[19:10:27] <cmr> it's not even hacks, really.
[19:10:34] *** Joins: snadon (chatzilla@F19E8D24.818311E0.47C41102.IP)
[19:10:43] <devbug> It's not that bad actually; I've done it before in C++.
[19:10:58] *** Joins: fyolnish (fyolnish@moz-CF0655BA.uqwimax.jp)
[19:10:58] <cmr> it creates a [u8, ..size_of_union] and transmutes exactly how clang would
[19:11:36] *** Quits: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Ping timeout)
[19:12:34] <strcat> cmr: so, you need a different one per platform
[19:12:41] *** Quits: fyolnish (fyolnish@moz-CF0655BA.uqwimax.jp) (Ping timeout)
[19:13:17] *** Joins: Kruppe (user@47D9A12A.80DA567B.66C78069.IP)
[19:13:24] <devbug> cmr: ugh
[19:13:31] <devbug> I'll just stick w/ a c-shim
[19:13:45] *** Quits: snadon (chatzilla@F19E8D24.818311E0.47C41102.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0/20130926170421])
[19:14:45] *** Joins: LowPotential (user@566AF39.3B4A6B80.689607DE.IP)
[19:16:48] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[19:17:13] <myname> is it possible to implement "as" for structs?
[19:17:18] <cmr> myname: no
[19:17:22] *** Quits: kelvin (kelvin@moz-28F04CF1.bootp.virginia.edu) (Ping timeout)
[19:17:23] *** Joins: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[19:17:30] <cmr> `as` is only for conversions in constant expressions.
[19:17:32] <LowPotential> I have a question in the form of a conveniently-structured gist: https://gist.github.com/anonymous/6768703 :)
[19:18:07] <cmr> LowPotential: the Cell magically fixes things by using unsafe code, and explicitly failing when trying to `take` from it twice.
[19:18:56] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[19:20:02] <nejucomo> rustpkg —help does not show "init".
[19:20:20] *** Joins: maik (maik@moz-6A162886.dip0.t-ipconnect.de)
[19:20:25] <nejucomo> Does init create a skeleton for a "workspace" containing multiple sources, or just one "package" ?
[19:20:28] <stevekla1nik> nejucomo: oh no!
[19:20:43] <stevekla1nik> nejucomo: basically, init does `mkdir {src,build,lib,bin}`
[19:20:45] <stevekla1nik> at this time
[19:21:10] <engla> LowPotential: Cell adds code that guards from moving out more than once
[19:21:19] <stevekla1nik> ugh.
[19:21:23] <stevekla1nik> brb
[19:21:26] *** Quits: stevekla1nik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Quit: lol usernames)
[19:21:47] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Input/output error)
[19:21:53] <nejucomo> Hrm…  This workspace idea doesn't play well with my concept of source code management...
[19:22:09] *** Joins: stevekla1nik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[19:22:14] <cmr> nejucomo: Your repo isn't supposed to be a workspace.
[19:22:26] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[19:22:31] <devbug> cmr: hmm?
[19:22:31] <nejucomo> cmr: Ok, that's good.
[19:22:42] <stevekla1nik> ... wow
[19:22:42] <devbug> seperate tree?
[19:22:43] <stevekla1nik> this sucks
[19:22:45] <stevekla1nik> nejucomo: https://github.com/mozilla/rust/blob/master/src/librustpkg/rustpkg.rs#L635-L640
[19:22:46] <jeaye> IDE users. -_-
[19:23:04] <stevekla1nik> can someone with ops kick 'steveklabnik' please'
[19:23:06] <nejucomo> The install help makes it sound like installing a local source expects that source to be in a workspace.
[19:23:15] <cmr> nejucomo: oh, it does.
[19:23:17] <benh> kicking doesn't free the nick
[19:23:18] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[19:23:21] <stevekla1nik> dammit :(
[19:23:23] <cmr> But that's a limitation of rustpkg, that needs to be fixed.
[19:23:31] <LowPotential> engla cmr: Hm... So the compiler knows that in the special case of 'Cell', the code will have a runtime failure if it's used improperly. As apposed to normal rust code which has to satisfy those conditions based on adhering to the standard ownership rules? Did I get that right?
[19:23:37] <jeaye> stevekla1nik: Is it registered?
[19:23:42] <jeaye> The nick
[19:23:44] <stevekla1nik> jeaye: yes, to me. i have the password.
[19:23:51] <jeaye> Then ghost it with chanserv
[19:23:51] <stevekla1nik> i let my laptop sit sleeping for a while
[19:24:02] <benh> say /msg nickserv ghost steveklabnik passwordgoeshere
[19:24:04] <stevekla1nik> ahhh yes. sorry, it's been a while since i used irc a ton
[19:24:09] <cmr> LowPotential: the compiler knows nothing about Cell. It uses normal unsafe code.
[19:24:14] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (NickServ (GHOST command used by stevekla1nik))
[19:24:15] <jeaye> nickserv
[19:24:17] <jeaye> rather
[19:24:19] *** stevekla1nik is now known as steveklabnik
[19:24:30] *** Joins: stevekla1nik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[19:24:30] <steveklabnik> bam
[19:24:31] <steveklabnik> thank you
[19:24:41] <nejucomo> Basically I want to keep a clear distinction between directories of "source code" which I edit, optionally use vcs, etc… versus a directory for "distribution" which a tool modifies in order to install or upgrade dependencies.
[19:25:05] <cmr> nejucomo: yeah. if you want to be using `rustpkg build` instead of `rustc`, your repo needs to be a workspace atm.
[19:25:15] <LowPotential> cmr: Why does the compiler accept the use of 'Cell' though without complaining? Wouldn't it complain if I tried to move in an 'Option'? 
[19:25:20] <steveklabnik> and it infers dependencies, so you can just gitgnore them
[19:25:44] <steveklabnik> it will handle installing them
[19:26:22] <nejucomo> cmr: I think what I want is: rustpkg install —source-dir=. —workspace=/my/rust/workspace
[19:26:30] <cmr> LowPotential: http://static.rust-lang.org/doc/master/src/std/home/rustbuild/src/rust-buildbot/slave/doc/build/src/libstd/cell.rs.html#28
[19:26:31] <nejucomo> stevekla1nik: Are you working on rustpkg?
[19:26:34] *** Joins: kelvin (kelvin@A4314F81.63B79338.DDE5D3F6.IP)
[19:26:44] <cmr> nejucomo: put your workspace in the first entry of RUST_PATH
[19:26:49] <steveklabnik> nejucomo: yes
[19:27:11] <steveklabnik> tjc knows all, but i've been helping / documenting
[19:28:47] *** Joins: CurlyBrace (Mibbit@794413A4.B8CF995A.DDE5D3F6.IP)
[19:28:51] <nejucomo> For now I'm tempted to do: mkdir workspace; cd workspace; rustpkg init; git clone /path/to/my/actual/project-repo; cd project-repo; rust install .
[19:28:57] <nejucomo> Does this seem sane or weird?
[19:29:07] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[19:29:13] <nejucomo> If I want to upgrade the workspace installation I pull from that clone.
[19:29:16] <tjc> nejucomo: That looks almost right. After rustpkg init, you should `cd src`
[19:29:21] <steveklabnik> yes
[19:29:23] <nejucomo> Oh yeah.
[19:29:24] <steveklabnik> what tjc said
[19:29:37] <nejucomo> Ok.  Good, if that's an expected use case, then my concerns are a bit assuaged.
[19:29:37] <steveklabnik> does the . work?
[19:29:40] <LowPotential> cmr: I appreciate the reference, but I'm afraid I'm still lost.
[19:29:45] <steveklabnik> or do you need to be in the root and type 'project-repo'
[19:29:53] <nejucomo> Sorry, I shouldn't say ".".  (That's a python pip-ism.)
[19:30:08] <tjc> oh
[19:30:11] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[19:30:14] <tjc> No, I don't think that will work
[19:30:26] <tjc> instead: `rust install project-repo` (while you're in `workspace`)
[19:30:30] <steveklabnik> right.
[19:30:30] <nejucomo> stevekla1nik: That's an example of how the workspace ux confuses me.  I want to be clear about when I'm giving a URL versus a local path.
[19:30:44] <steveklabnik> you always give it a 'package id'
[19:30:48] <steveklabnik> never a local path
[19:31:03] <steveklabnik> package ids can be url fragments
[19:31:06] <steveklabnik> or they can be names
[19:31:31] <Boreeas> Heh. I like the new doc style.
[19:31:33] <tjc> To put it a different way...
[19:31:38] <tjc> a package ID is a relative path
[19:31:49] <tjc> if the path doesn't exist locally, rustpkg will try interpreting that path as a URL fragment
[19:31:53] <LowPotential> cmr: I mean, doesn't 'Option' also fail if one tries to 'unwrap' 'None'? I'm not seeing the connection.
[19:32:27] <nejucomo> tjc: So this doesn't support use cases like: "Please install the source code in directory blah" or "please install the source code in this tarball", right?
[19:32:28] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[19:33:00] <nejucomo> It means those use cases need an extra step of preparation to massage the source into the workspace regime.
[19:33:01] *** Parts: acabrera (alcabrera@4B9B70ED.4D823036.F18532AE.IP) ()
[19:33:22] <steveklabnik> the second one should be supported in the future, right now it's just git, iirc
[19:33:29] <tjc> nejucomo: Both of those are supported
[19:33:33] <tjc> well, in principle
[19:33:37] <tjc> the second one isn't implemented yet
[19:33:46] <tjc> the first one is implemented, so long as the directory is the CWD or in your RUST_PATH
[19:33:57] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[19:34:07] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[19:34:15] <jordyd> What does "cannot move out of dereference of & pointer" mean?
[19:34:27] <nejucomo> I guess I'll play with it a while before getting too yak-shavy.
[19:34:40] <steveklabnik> it works best if you don't try to modify what it expects too much
[19:34:52] <steveklabnik> if you want a super custom build process, you're better off with make and rustc at the moment
[19:35:07] *** Quits: vadimcn (chatzilla@A2267643.76F9E272.DA40C4B3.IP) (Client exited)
[19:35:40] <steveklabnik> at least until some extras are implemented and there's more thorough docs and examples; theoretically you can make a ... pkg.rs? that's a custom build script, but that's entirely wild west at the moment
[19:37:20] *** Quits: sankha93|afk (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[19:37:27] <strcat> jordyd: an & ptr doesn't own what it points at, and moving requires ownership over the source
[19:37:30] <nejucomo> jordyd: It means you've borrowed a pointer to something and your code is attempting to move the referent of that pointer somewhere else, but that would make all other pointers to the referent invalid.
[19:37:38] <myname> maybe a stupid question, but how do i make a function that returns a *struct
[19:37:42] <strcat> jordyd: http://static.rust-lang.org/doc/master/tutorial.html#move-semantics
[19:37:54] <LowPotential> jordyd: You have a reference to something, and you're trying to move the thing that you're referencing somewhere else. But you have no ownership over the thing being pointed to.
[19:38:04] <steveklabnik> myname: do you mean just a struct? or some kind of pointer to a struct?
[19:38:05] <LowPotential> Just a reference to it.
[19:38:25] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[19:38:44] <myname> steveklabnik: a ponter to a struct generated inside the function
[19:38:56] <engla> LowPotential: Cell encapsulates a mutable slot, so you can modify its value regardless of how the cell itself is stored. That's the gist of Cell
[19:38:57] <myname> i guess i have to start that lifetime stuff
[19:38:57] <steveklabnik> myname: the short answer is, don't. always just return the struct
[19:39:11] <steveklabnik> myname: let the caller decide if they want a pointer
[19:39:19] <myname> sounds fair
[19:39:25] <steveklabnik> it won't do a copy
[19:39:28] <nejucomo> myname: Are you coming from C?
[19:39:30] <engla> LowPotential: compared to other types like say Option<int>, which inherits mutability from its owner
[19:39:30] <cmr> myname: but why did you want a raw pointer?
[19:39:34] <steveklabnik> if you let x = ~foo(whatever);
[19:39:46] <myname> cmr: good question
[19:39:55] <myname> nejucomo: a little
[19:39:59] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[19:40:24] <benh> Can't really share an object with multiple other guaranteed-to-be-of-shorter-lifetime objects otherwise, without that pesky immutability~
[19:40:27] *** Joins: vadimcn (chatzilla@A2267643.76F9E272.DA40C4B3.IP)
[19:40:56] <nejucomo> My not-accurate-C-ish mental model *used to be* that: let x = ~foo(whatever); // would allocate space for the result of foo, then call foo which would create the result on the stack, then copy from the stack to the newly allocated heap area...
[19:41:28] <nejucomo> -but that's not actually the case: instead the allocation happens, then foo is passed a "return location" pointer and it initializes the result directly into that memory.
[19:41:37] <strcat> if it's large
[19:41:53] <nejucomo> So that flexibility means you should typically "directly return" things, because then the caller can choose where to place it ahead of time.
[19:42:01] <strcat> or in rust's case, if it meets the arbitrary rules of being immediate because we don't have a proper check
[19:42:08] * strcat should fix that
[19:42:18] <steveklabnik> yup, exactly what nejucomo said
[19:42:23] <strcat> of not being immediate*
[19:42:27] <nejucomo> strcat: So does: fn four() { 4 } ; let x = ~four() ; // copy a 4 from the stack into the heap?
[19:42:41] <strcat> no, it doesn't work that way
[19:42:45] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[19:43:01] <strcat> on x86, it's definitely going to put 4 in a register and then write it into the allocation
[19:43:06] <benh> Maybe it copies directly from the code section of the process image!
[19:43:08] <LowPotential> engla: So the Cell can be captured by the closure because the compiler thinks it's being captured immutably? But internally, it's using unsafe casts to access mutable data?
[19:43:23] *** Quits: nkoep (nik@moz-2176A709.pool.mediaways.net) (Ping timeout)
[19:43:41] <nejucomo> Ah yes… registers.  I really need to learn about the generated IR and asm so I can have a clear mental model.
[19:43:53] <CurlyBrace> Hello, everyone
[19:43:57] <benh> hi
[19:44:14] <CurlyBrace> Anyone familiar with spawn?
[19:44:21] <Boreeas> Hmm, why can a &str not outlive a fmt-call with itself as argument?
[19:44:23] <CurlyBrace> I'm having trouble with the channels getting things over
[19:44:33] <nejucomo> For now I'll just stick with the heuristic: "Return newly computed structures directly, most of the time, unless it's impossible or there's a well known reason not to."
[19:44:40] <strcat> Boreeas: example?
[19:44:43] <steveklabnik> CurlyBrace: in general, it's better to ask a question than to 'ask to ask', if that makes snese
[19:44:47] <steveklabnik> CurlyBrace: can you share some code?
[19:45:10] <CurlyBrace> Okay, I'm looking at this guide: http://leapchasm.com/blog/2013/03/18/concurrency-challenge-in-rust/
[19:45:20] <nejucomo> biab.
[19:45:24] <CurlyBrace> But instead of moving ints to my spawn, I need to move three different objects
[19:45:39] <strcat> ints don't move
[19:45:52] <skade> curl rust-test.herokuapp.com/foo/bar
[19:46:28] <Boreeas> strcat: http://pastebin.com/xSrmY1HQ
[19:46:34] <skade> I'll start cleaning up the yak hair...
[19:46:35] <steveklabnik> skade: niiiiiiiiice
[19:46:37] <Boreeas> strcat: The &str in question being tag
[19:46:40] <steveklabnik> skade: :D
[19:46:43] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[19:46:45] <engla> LowPotential: yes. It also uses a compiler annotation called #[no_freeze] to indicate it is not immutable
[19:46:56] <strcat> Boreeas: returning & ptrs without lifetimes never makes sense
[19:47:02] *** Quits: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Ping timeout)
[19:47:04] <strcat> so the signature itself won't work
[19:47:09] <CurlyBrace> I am trying to move a string, and an array of strings
[19:47:20] *** Joins: lkuper (lkuper@moz-C4C820C6.dhcp-bl.indiana.edu)
[19:47:53] <Boreeas> strcat: So, seeing as tag is derived from data, should the first value in the return-tuple be "&'data str"?
[19:48:06] <CurlyBrace> or, barring that, just move an array of strings
[19:48:48] <steveklabnik> CurlyBrace: gotcha
[19:49:05] *** Joins: mowhawk (Mibbit@9E9B49EF.9EA65473.DDE5D3F6.IP)
[19:49:06] <strcat> Boreeas: yes
[19:49:14] <Boreeas> alright, thanks
[19:49:15] <strcat> well
[19:49:25] <strcat> Boreeas: you need data: &'a [u8]
[19:49:27] <CurlyBrace> The example there uses lots of ints, and I am having a hard time telling which ones are, say, channel numbers, and which ones refer to the actual data being sent
[19:49:31] *** Quits: jdsanders (Adium@moz-F45527D6.hlrn.qwest.net) (Quit: Leaving.)
[19:49:35] <strcat> Boreeas: and then reuse it on the return
[19:50:00] <LowPotential> engla: As a complete outsider with a very cursurary (and probably incorrect) understanding of how all this works, the idea of one-shot closures makes a lot more sense to me than something like Cell.
[19:50:04] *** Joins: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[19:50:09] <LowPotential> engla: But I think I understand how 'Cell' works, so thanks. :)
[19:50:24] <Boreeas> lifetimes are confusing
[19:50:25] <engla> LowPotential: great! it's indeed annoying that Cell has to be used for this
[19:51:17] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[19:52:00] <myname> hmm
[19:52:05] <myname> pub struct foo { ch: u32 }; pub struct c_foo { ch: uint32_t }
[19:52:06] <myname> pub fn to_foo(c: *c_foo) -> foo { foo { ch: c.ch as u32 } } 
[19:52:46] <myname> error: attempted access of field `ch` on type `*c_foo`, but no field with that name was found
[19:53:05] <myname> i don't get it
[19:53:31] <steveklabnik> CurlyBrace: you might like http://static.rust-lang.org/doc/master/tutorial-tasks.html#communication
[19:53:48] <steveklabnik> but
[19:54:00] <steveklabnik> the channels don't have 'numbers' in that blog example
[19:54:11] <steveklabnik> in and out are the two ends
[19:54:12] <Boreeas> strcat: Huh, "data: &'a [u8]" gives me "Illegal lifetime 'a: this lifetime must be declared". Where do I declare it, if not in argument list?
[19:54:32] <steveklabnik> CurlyBrace: and 'in1' 'in2' and 'in3'
[19:54:34] *** Quits: jdm (jdm@7F255D02.1B9223B5.AE2B2F80.IP) (Quit: Lost terminal)
[19:54:36] <myname> Boreeas: fn foo<'a>
[19:54:38] <cmr> Boreeas: fn foo<'a>
[19:54:38] <steveklabnik> CurlyBrace: the numbers are all just data
[19:54:44] <myname> cmr: *5*
[19:54:47] <CurlyBrace> Hmmm
[19:55:16] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[19:56:27] *** Quits: maik (maik@moz-6A162886.dip0.t-ipconnect.de) (Ping timeout)
[19:56:55] <jstevans> How do you catch signals in Rust?
[19:56:59] <jstevans> e.g. CTRL+Z
[19:57:10] <strcat> manually use signalfd
[19:57:11] <CurlyBrace> jstevans, are you in OS?
[19:57:32] <jeaye> Can bindgen write safe wrappers for foreign functions, or is that all done by hand?
[19:57:39] <strcat> jeaye: by hand
[19:57:45] <Boreeas> myname: Thanks
[19:57:50] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[19:57:55] <jeaye> Damn.
[19:57:57] *** Joins: questionplz (Mibbit@moz-587EA397.bootp.virginia.edu)
[19:57:57] <myname> jeaye: i am enjoying it right now
[19:58:01] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[19:58:03] <strcat> jeaye: making safe APIs is a creative process
[19:58:07] *** Joins: nkoep (nik@moz-23D35B28.vpn.rwth-aachen.de)
[19:58:09] <jeaye> strcat: haha
[19:58:12] <strcat> you need to know all the details about the C API
[19:58:19] <lex> Hi, does Rust 0.7 support signal catching?
[19:58:21] <strcat> and figure out how to expose a safe API on top of it
[19:58:28] <strcat> lex: via FFI, sure
[19:58:33] <strcat> need to call signalfd yourself
[19:58:36] <lex> strcat: FFI?
[19:58:44] <Boreeas> Foreign function interface
[19:58:49] <questionplz> hello, can someone point me to somewhere with info on splitting strings?
[19:58:50] <lex> Boreeas: thanks
[19:59:00] <strcat> you can call C APIs from rust (or vice versa)
[19:59:05] <cmr> questionplz: http://static.rust-lang.org/doc/master/std/str/trait.StrSlice.html#tymethod.split_iter
[19:59:12] <strcat> rust does weird stuff to the stack so you need signalfd
[19:59:24] <strcat> if the OS doesn't have it.... there are weird hacks
[19:59:25] <questionplz> thank you
[19:59:35] <strcat> (it's Linux-only)
[19:59:36] <lex> strcat: Thanks
[19:59:51] <strcat> anyway it will be a pain because you'll need to make your own event loop...
[19:59:52] <myname> someone any idea about my error? :)
[20:00:10] <strcat> we should really just have a generic select + support for select on signals
[20:00:12] <strcat> via libuv
[20:00:23] <strcat> but it isn't implemented yet ;p
[20:01:20] <CurlyBrace> I'm getting an 'unresolved import. maybe a missing `extern mod core`?'
[20:01:29] <CurlyBrace> Where exactly am I to put the extern mod core?
[20:01:32] <strcat> no such thing as libcore anymore
[20:01:39] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[20:02:22] <skade> soo… 30 req per second, hope we go up from there ;) https://gist.github.com/skade/6769306
[20:02:34] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[20:03:27] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[20:03:59] <steveklabnik> Kruppe: ahaha :D
[20:04:07] <steveklabnik> sorry, Kruppe , meant skade 
[20:04:11] *** Joins: mdup (mdup@moz-2989B319.rev.numericable.fr)
[20:04:22] <benh> skade: Who's the name Widmann in reference to?
[20:04:24] <steveklabnik> skade: how did you get the buildpack to work? I tried that long ago
[20:04:37] <skade> steveklabnik lots of violence :)
[20:04:41] <steveklabnik> :)
[20:05:04] <skade> benh http://de.wikipedia.org/wiki/G%C3%B6tz_Widmann, german singer/songwriter from my home region
[20:05:12] *** Quits: victorporof_ (victorporo@35F65A40.E0F96B01.D111398B.IP) (Quit: victorporof_)
[20:05:13] <benh> okay :)
[20:05:15] *** Quits: sergi (textual@moz-DB55470C.upc-a.chello.nl) (Quit: Computer has gone to sleep.)
[20:05:41] <Kruppe> steveklabnik: no worries :)
[20:06:02] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:07:49] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[20:08:15] <skade> steveklabnik: its a version of https://github.com/skade/heroku-buildpack-apt/ that allows for PPA (with --force-yes :( ) and https://github.com/skade/heroku-buildpack-apt/ that hardcodes a few paths, glued together using https://github.com/ddollar/heroku-buildpack-multi (without changes)
[20:08:32] <skade> sorry https://github.com/skade/heroku-buildpack-c/ is the second
[20:08:36] <steveklabnik> ahhhh nice
[20:08:42] *** Quits: jyasskin_w (jyasskin@DAF66858.C60FE7DC.4065847B.IP) (Quit: Ex-Chat)
[20:09:28] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[20:09:39] <skade> also, i found out that you can copy PPAs from unsupported platforms into your own PPA and rebuild them: https://launchpad.net/~florian-gilcher for Ubuntu 10.04 support
[20:10:35] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[20:10:49] *** Joins: eatkinson (eatkinson@E5442022.772DB3ED.90B17E8F.IP)
[20:11:17] *** Joins: fyolnish (fyolnish@moz-16364A04.uqwimax.jp)
[20:11:22] *** Joins: TMaster (quassel@moz-D7771805.upc-h.chello.nl)
[20:12:04] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[20:12:20] <kelvin> so I'm still having issues with spawning new tasks from earlier. I'm spawning a new task with task::spawn_sched() and then I create a process inside that task. I'm giving that process a ProcessOptions with out_fd set to '1' for stdout, but for some reason the process output won't show on the terminal of the parent process. Does anyone have any ideas what might be the issue?
[20:12:56] <CurlyBrace> I had that issue kelvin
[20:13:00] *** Quits: fyolnish (fyolnish@moz-16364A04.uqwimax.jp) (Ping timeout)
[20:13:06] <CurlyBrace> but with the regular spawn
[20:13:30] <CurlyBrace> I'm actually stuck on that same problem.
[20:13:52] *** Quits: questionplz (Mibbit@moz-587EA397.bootp.virginia.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[20:13:59] <jstevans>  What does [c_ulong, ..16] do in Rust 0.7?
[20:14:10] <kelvin> CurlyBrace: So you don't have a work around yet?
[20:14:13] <strcat> jstevans: it doesn't do anything, it's a type
[20:14:23] <strcat> declares a fixed-size array of 16 c_ulong
[20:14:43] *** Quits: eatkinson (eatkinson@E5442022.772DB3ED.90B17E8F.IP) (Quit: eatkinson)
[20:14:56] *** Joins: ksev (DrunkenPan@moz-71F7E457.cable.teksavvy.com)
[20:15:02] <strcat> type_is_immediate is a real pain, this doesn't belong in ty.rs :s
[20:15:10] * strcat can see why it's so messed up now
[20:15:12] <jstevans> strcat: what are the dots for?
[20:15:26] <CurlyBrace> I didn't even get to that issue with spawn_sched yet =\
[20:15:26] <strcat> jstevans: it's the syntax, [type, ..length]
[20:15:36] <CurlyBrace> I'm still trying to get the channels/ports working
[20:16:09] <jstevans> strcat: is there a reason for the ..? Why not [type, length]?
[20:16:12] <bblum> CurlyBrace: is your name a typography reference or a cave story reference
[20:16:40] <strcat> jstevans: because it mirrors the initialization syntax
[20:16:45] *** Quits: ksev (DrunkenPan@moz-71F7E457.cable.teksavvy.com) (Ping timeout)
[20:16:45] <strcat> [value, ..length]
[20:16:46] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[20:17:02] <strcat> [2, ..5] and [2, 5] aren't the same thing
[20:17:33] <CurlyBrace> Cave story
[20:17:41] <CurlyBrace> and, by extension, topography
[20:17:42] <bblum> CurlyBrace: awesome, you are my favourite
[20:17:46] <CurlyBrace> typography*
[20:17:48] <CurlyBrace> :P thanks
[20:17:55] *** Quits: fabiand (fabiand@moz-80F22D21.adsl.alicedsl.de) (Quit: Verlassend)
[20:18:01] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[20:18:46] *** Joins: jyasskin_w (jyasskin@DAF66858.C60FE7DC.4065847B.IP)
[20:18:53] <engla> Eridius: what is it you want to do with the capacity from something like as_mut_buf?
[20:19:04] *** Joins: canhtak (jeremy@moz-82E9E6D2.wl.t.ulaval.ca)
[20:19:08] <strcat> nmatsakis: do you know why we distinguish RvalueDatumExpr from RvalueDpsExpr? seems like trans details leaking into ty.rs
[20:19:31] <strcat> nmatsakis: http://ix.io/8i3 specifically, this
[20:19:46] <Eridius> engla: pass it to a C FFI function, and then set_len on the resulting vec
[20:19:51] * strcat would like to make "immediate" just be a trans decision on how to pass/return
[20:19:54] <strcat> based on size
[20:20:07] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[20:20:40] <engla> Eridius: hm ok, but you can't do much if you have too little capacity
[20:20:56] <Eridius> engla: err, so?
[20:20:58] <strcat> Eridius: just use len, to_ptr, capacity
[20:21:06] <strcat> I'd consider as_{mut,imm}_buf deprecated
[20:21:10] <strcat> not really useful
[20:21:26] <CurlyBrace> kelvin, you still having trouble on that part?
[20:21:31] <strcat> they give you a raw ptr so they're no safer than to_ptr
[20:21:34] <kelvin> yeah
[20:21:53] <engla> strcat: the closures provide a nice reminder to (in most cases) not leak the raw pointer outside the scope it's valid in
[20:22:01] <Eridius> strcat: I suppose
[20:22:25] <strcat> engla: using them everywhere makes the big mistake of thinking closures are free
[20:22:46] <strcat> as implemented, they're far for free
[20:23:10] <strcat> from free*
[20:23:30] <engla> the closure disappears in most cases I hope
[20:23:33] <strcat> no
[20:23:40] <kelvin> CurlyBrace: at one point I had an error in my code where I would try to redirect the output of the process to a file, but I would overwrite the fd for the file with the fd for stdout by accident and that caused it to output to the terminal, but I have no idea why that caused it to work
[20:24:03] <strcat> engla: it's a big hit to compile-time and run time
[20:24:16] <strcat> closures are not implemented in a way that they are a cost-free abstraction
[20:24:21] <strcat> they could be, but they aren't
[20:24:24] <engla> I know it is a hit to compile time
[20:24:29] <strcat> a closure is as expensive as a trait object
[20:24:35] <brson> strcat: why?
[20:25:08] <strcat> brson: because unlike C++11 lambdas they are always indirect, and they use a tydesc in their 4-word header to handle the env
[20:25:22] <strcat> so they make a lot of code bloat and put a huge amount of stuff on the stack
[20:25:36] <engla> strcat: but the closure call can disappear right? otherwise the uses of .as_mut_buf in the vec/str implementation in libstd are pretty bogusly slow
[20:25:55] <indirect> starting to feel like I need to pick a hobby language that only has direct pointers
[20:26:05] <cmr> indirect: heh
[20:26:08] <steveklabnik> indirect: ha!
[20:26:11] <strcat> if it inlines the function taking a closure, it can go through a long process of breaking it down
[20:26:17] <strcat> but by then it blocked many other optimizations
[20:26:35] <nmatsakis> strcat: that function is intended for use by trans, really.
[20:26:38] <strcat> it's not an iterative optimization process like normal direct calls - it wastes passes
[20:26:57] <strcat> SROA won't run again
[20:27:16] * strcat shrugs
[20:27:24] <strcat> it's why removing the old for loop sped up compiles by 15-20%
[20:27:35] <engla> hm I'll fix vec::bytes::push_bytes to not use .as_mut_buf  then I guess
[20:27:40] <strcat> just because it removed many closures
[20:27:45] <strcat> engla: so
[20:27:48] <strcat> for each vector type
[20:27:52] <brson> strcat: do closures get inlined or not?
[20:28:02] <strcat> brson: often
[20:28:04] <Amaranth> So what I'm hearing is "never use closures" :)
[20:28:09] <strcat> brson: but actually removing the indirect call happens later
[20:28:23] <strcat> brson: and by then, lots of optimization passes are done
[20:28:35] <engla> ok push_bytes isn't that important, that's just for str. I see that removing .as_mut_buf in generic cases is more important
[20:28:57] <tjc> Amaranth: Not necessarily, except possibly when you know they're going to be in a performance hot spot :-)
[20:29:03] <strcat> brson: it essentially has to happen like this
[20:29:26] <strcat> function you pass closure to is inlined -> SROA can now break the closure apart -> it can now figure out the indirect call is constant, and make it direct, it can now inline the closure
[20:29:44] <strcat> the inlining is sort of iterative with other passes
[20:29:50] <strcat> but most passes don't work that way
[20:30:32] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[20:30:40] <strcat> brson: I think the problem will fix itself when we make closures more expressive though
[20:31:01] *** Quits: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr) (Input/output error)
[20:31:03] <strcat> if you could take a generic parameter of a *callable* type (any closure type)
[20:31:25] <strcat> for example
[20:31:32] <strcat> rusti: range(1, 2).map(|x| x * 2)
[20:31:34] -rusti- std::iter::Map<,int,int,std::iter::Range<int>>{iter: std::iter::Range<int>{state: 1, stop: 2, one: 1}, f: fn(int) -> int}
[20:31:43] <strcat> that takes &fn, so it can't outlive the stack frame with a stack closure
[20:31:52] <engla> I would propose removing closure use int  vector methods .len() and .slice() then since they are used everywhere
[20:31:59] <engla> *in the
[20:31:59] <strcat> if we had a way to take a generic closure, we could have it take a stack closure + store it
[20:32:09] <strcat> and you'd be able to return it, + the calls would be direct from the start
[20:32:15] <strcat> + no header/tydesc
[20:32:44] *** Quits: aeqwa (aeqwa@moz-677D0A0D.dsl.tropolys.de) (Quit: Lost terminal)
[20:33:11] <strcat> atm you'd have to write an alternate version of every iterator method taking extern fn, and another version taking ~fn
[20:33:32] <strcat> and it still wouldn't let you use a stack closure + return it
[20:33:52] <strcat> so... I'm really hoping we get an overhaul of closures
[20:33:55] <jason_> rusti: struct Foo { data: ~[int] } impl Foo { fn add_one(&mut self) { self.data = std::vec::append_one(self.data, 1); } }
[20:33:56] -rusti- <anon>:7:105: 7:114 error: cannot move out of dereference of & pointer
[20:33:56] -rusti- <anon>:7          struct Foo { data: ~[int] } impl Foo { fn add_one(&mut self) { self.data = std::vec::append_one(self.data, 1); } }
[20:33:56] -rusti-                                                                                                                   ^~~~~~~~~
[20:33:56] -rusti- error: aborting due to previous error
[20:33:56] -rusti- application terminated with error code 101
[20:34:04] <strcat> feels like the weakest point of the language to me, everything else is awesome ;p
[20:34:21] <jason_> do i need to use a managed box to make that work? ^^
[20:34:24] <CurlyBrace> I'm having trouble getting a concurrent process to output to the same shell
[20:34:41] <CurlyBrace> If I use Default Scheduler, it doesn't output to the shell at all, but if I use single threaded, it blocks
[20:35:04] <CurlyBrace> Any advice?  I can show my code, but its kind of a mes
[20:35:29] <erickt> hey #rust! I finally made my Bay Area meetup group! You all should sign up: http://www.meetup.com/Rust-Bay-Area
[20:35:39] <steveklabnik> nice
[20:36:40] <CurlyBrace> Nevermind, I might have it.
[20:36:50] <strcat> brson: https://github.com/mozilla/rust/issues/8622 I opened a bug about this a while ago, but since then I decided there are probably much simpler ways to do it
[20:37:16] <strcat> like just having a bare function type with a type parameter
[20:37:20] <jstevans> How do I initialize an empty, global, mutable array of Processes?
[20:37:27] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[20:37:34] <jstevans> static mut proc: ~[~std::run::Process] = ~[]; gives me an error
[20:37:54] *** Joins: CarpNet (Alasdair@moz-EF831A5E.cable.virginmedia.com)
[20:38:05] *** Quits: Ms2ger (Ms2ger@moz-2F2A356D.adsl-dyn.isp.belgacom.be) (Quit: nn)
[20:38:20] <strcat> although it'd be really nice if you could write 1 version of a function and have it work for any fn type without limitations
[20:38:22] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:38:22] *** ChanServ sets mode: +o pnkfelix
[20:39:32] <strcat> hrm
[20:41:10] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[20:41:24] <steveklabnik> skade: btw, meant to link you to this earlier: http://www.reddit.com/r/rust/comments/1neu74/the_start_of_a_sinatra_clone/cci0ej5
[20:41:35] <acrichto> jstevans: globals have to be constant values, which means that heap allocations (~) aren't allowed
[20:42:00] <strcat> acrichto: technically we could probably allow ~ in constants if we decided they didn't *necessarily* point at a heap allocation
[20:42:12] <strcat> but since you can swap out of static mut...
[20:42:29] <acrichto> strcat: also &mut ~[T] from a constant wanting to get re-allocated to get interesting
[20:42:34] <strcat> you'd have to explicitly state that swapping out of a static mut wasn't allowed
[20:42:40] <strcat> if it has ~
[20:42:49] <acrichto> or just say mut can't have ~
[20:44:03] <jstevans> acrichto: Is my only alternative just to have it as a local variable in main() and pass a mutable reference to my vector to every function I want to modify the vector in?
[20:44:13] <mcpherrin> erickt: Nice!  Joined :)
[20:44:26] <strcat> jstevans: well, 'static mut' wouldn't be safe anyway
[20:44:29] <acrichto> jstevans: static mut is unsafe because of race conditions, but if you don't want to pass it around you could also use TLS (local_data)
[20:44:32] <erickt> mcpherrin: woot!
[20:44:57] <jstevans> acrichto: TLS?
[20:45:06] <steveklabnik> thread local storage
[20:45:10] <strcat> nmatsakis: it looks like I could fairly easily remove the difference, going to try
[20:45:10] <acrichto> jstevans: oh sorry, task local storage
[20:45:11] <steveklabnik> (got it right today ;) )
[20:45:26] <strcat> nmatsakis: seems that the only reason it distinguishes between them is so it knows if it should call the destructor
[20:45:27] <acrichto> jstevans: http://static.rust-lang.org/doc/master/std/local_data/index.html
[20:45:37] <strcat> nmatsakis: and the place it makes the call knows the types anyway...
[20:45:52] <nmatsakis> strcat: that's not why
[20:45:58] <strcat> nmatsakis: hm, why then?
[20:46:23] <nmatsakis> strcat: RvalueDatumExpr vs RvalueDpsExpr is a question of what's the most natural way to generate the result
[20:46:46] <strcat> nmatsakis: as in via a pointer or not?
[20:46:47] <nmatsakis> strcat: RvalueDatumExpr is preferred for expressions like ~T
[20:47:04] <strcat> nmatsakis: ~T is immediate though, so it uses dps
[20:47:04] <nmatsakis> strcat: vs RvalueDpsExpr is for things like struct literals that always produce an indirect result
[20:47:15] <strcat> afaict at least
[20:47:18] <nmatsakis> strcat: let me double check
[20:47:21] <jstevans> Oh, this looks wonderful! Thanks, strcat, acrichto, steveklabnik :)
[20:47:22] <nmatsakis> strcat: maybe i'm misremembering
[20:47:59] <strcat> nmatsakis: it seems that regardless of why, the check for immediate can be moved into expr::trans_info, solving my real issue
[20:48:21] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[20:48:30] <strcat> and then I can make the immediate check use llsizeof + ask llvm for the target's preferred max size for direct passing/return like clang does
[20:48:42] <nmatsakis> strcat: ~T is an RvalueDatumExpr
[20:48:57] *** Joins: Alasdair_ (Alasdair@moz-EF831A5E.cable.virginmedia.com)
[20:49:05] *** Quits: Alasdair_ (Alasdair@moz-EF831A5E.cable.virginmedia.com) (Connection reset by peer)
[20:49:11] <strcat> hm
[20:49:25] *** Joins: sprog (Mibbit@moz-B6AE5C3A.cable.virginmedia.com)
[20:49:26] <nmatsakis> strcat: that is expr_unary()
[20:49:48] <strcat> nmatsakis: ah sorry, it's only for casts that ty distinguishes via immediate
[20:50:05] *** Quits: CarpNet (Alasdair@moz-EF831A5E.cable.virginmedia.com) (Ping timeout)
[20:51:54] <skade> steveklabnik: thanks
[20:53:43] *** Quits: skade (skade@moz-62C07CE7.dip0.t-ipconnect.de) (Ping timeout)
[20:53:48] *** Joins: skade (skade@moz-62C07CE7.dip0.t-ipconnect.de)
[20:53:53] <strcat> nmatsakis: hm, so why are trait casts 'dps' and non-trait casts are 'datum'?
[20:54:21] *** Quits: jstevans (Instantbir@20B12275.6925E1D4.DDE5D3F6.IP) (Ping timeout)
[20:55:09] *** Joins: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[20:55:56] <nmatsakis> strcat: because trait casts generate two-word results
[20:56:44] <nmatsakis> strcat: that's the basic difference, is the result guaranteed to be a single word or not. the goal is to avoid generating temporaries on the stack
[20:57:06] <nmatsakis> strcat: though in some cases (e.g., ExprIf, ExprBlock) we just call it DPS regardless for simplicity
[20:57:26] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[20:57:28] <strcat> nmatsakis: it seems like an incorrect assumption that LLVM registers translate to temporaries
[20:57:34] <jason_> can someone help me with this? https://gist.github.com/toffaletti/6770126 i think i understand what is going on, but it seems like a possible short coming of the borrow checker
[20:57:41] <strcat> clang actually goes out of the way to generate insertvalue/extractvalue instead of using GEP
[20:57:49] <strcat> like
[20:58:04] <strcat> let x = foo{1, 2, 3}; x.one = 5; x.two = 10;
[20:58:07] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[20:58:08] <strcat> it will make a 'temporary' for each op
[20:58:28] *** Quits: sprog (Mibbit@moz-B6AE5C3A.cable.virginmedia.com) (Quit: http://www.mibbit.com ajax IRC Client)
[20:58:43] <nmatsakis> strcat: well, the goal was to avoid creating unnecessary allocas, basically. If you just used DPS, then something like 1+3 generates a bunch of allocas
[20:58:52] <acrichto> jason_: that's actually a known limitation of the compiler right now, you'll have to force `result` to go out of scope before you take another mutable loan on `self`
[20:59:09] <nmatsakis> strcat: not sure quite what kind of temporaries you are referring to
[20:59:16] <acrichto> jason_: I believe that the relevant issue is https://github.com/mozilla/rust/issues/6393
[20:59:31] <acrichto> jason_: feel free to comment on the issue with your use case
[20:59:33] <jason_> acrichto: ok, thanks. that is what i thought was going on
[20:59:58] *** Parts: lex (lex@A2D8AC61.87CA334A.DDE5D3F6.IP) ()
[21:00:05] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[21:00:12] <nmatsakis> strcat: but basically the motivation was to have, for each kind of expression, one "preferred mode" of generating the code, and then adapt from that preferred mode as needed
[21:00:20] <nmatsakis> strcat: ps, I'm reconsidering some of this while trying to fix #3511
[21:00:46] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[21:01:32] *** Quits: Kruppe (user@47D9A12A.80DA567B.66C78069.IP) (Ping timeout)
[21:02:20] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[21:02:51] <nmatsakis> strcat: but not so much that basic categorization idea as the way to manage when values are destructed etc
[21:03:10] <nmatsakis> strcat: e.g. I've completely torn out the existing cleanups stuff, which was ill-suited to the job and introduced a lot of unneeded basic blocks
[21:04:29] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[21:04:59] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Quit: WeeChat 0.4.1)
[21:05:27] *** Quits: mdup (mdup@moz-2989B319.rev.numericable.fr) (Quit: mdup)
[21:06:18] <jason_> acrichto: i think i'm in a catch-22 here. if i force the result of find_mut to go out of scope before trying to push((k,v)) then it won't let me use v because it might have been moved by the Some(replace(val, v)) branch
[21:06:19] *** Joins: jstevans (Instantbir@E7987399.1A99F5FD.DDE5D3F6.IP)
[21:06:29] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[21:07:54] <TMaster> Hello everyone. Does anybody know if I can work comfortably in Rust with high-precision numbers, e.g. 310-digit ints and their square roots with an error of <=1? Or should I just try to use C++/GMP?
[21:07:57] <TMaster> I've seen http://static.rust-lang.org/doc/master/extra/bigint/struct.BigUint.html but I'm not sure if it meets my needs, nor have I managed to even reference extra::bigint::BigUint successfully yet.
[21:08:01] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[21:08:02] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[21:08:12] *** Quits: yeri (yeri@20E4ADF2.99753D62.A15D986E.IP) (Quit: Colloquy for iPhone - http://colloquy.mobi)
[21:08:42] <tjc> TMaster: I don't think Rust's bigint library is incredibly well-tested, but if you're willing to find and report bugs, you can try it...
[21:08:47] <tjc> what problem are you having referencing it?
[21:08:50] <Amaranth> TMaster: You need to put extern mod extra; on top of your file to reference it
[21:09:06] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Ping timeout)
[21:09:10] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[21:09:13] <TMaster> Amaranth: thanks, will try.
[21:09:55] <strcat> TMaster: you can use gmp in rust
[21:10:06] <TMaster> tjc: good to know, I think I saw some changes in the past regarding how to use it. Even then it seems kind of limited, does it even support regular operators? Having at least a power function would be convenient.
[21:10:06] <strcat> although my rust-gmp binding hasn't been updated for a while
[21:10:29] <strcat> TMaster: it has basic operator overloading, but may be buggy and is definitely very slow
[21:11:14] <TMaster> strcat: then I'd probably have to embed C/C++ code or something, right? I'm actually a fairly novice programmer, esp. when it comes to both the C family and Rust. 
[21:11:14] <TMaster> Seems easier to go with C++ directly in that case.
[21:11:22] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[21:11:37] *** Joins: fyolnish (fyolnish@moz-C48341BA.uqwimax.jp)
[21:11:38] <strcat> TMaster: you can use C libraries from rust, as you can from C++, and there's an existing gmp binding
[21:11:51] <strcat> https://github.com/thestinger/rust-gmp needs an update to work on master
[21:12:10] <acrichto> jason_: oh hm that's unfortunate, in the meantime you may be able to patch over it with cast::transmute_copy on self
[21:12:11] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[21:12:14] <kelvin> does str::zero() clear a string?
[21:12:15] *** Joins: timot (timot@1C5B7AF5.87C6DE19.CBC7865F.IP)
[21:12:19] <TMaster> I've got 0.8 installed already, so if it works with that, that would be good...
[21:12:30] <strcat> TMaster: doesn't work with 0.8 yet
[21:12:36] <strcat> I didn't update it since before 0.7
[21:12:45] *** Joins: mdup (mdup@moz-2989B319.rev.numericable.fr)
[21:12:46] <engla> kelvin: what do you mean by str::zero?
[21:13:13] <TMaster> Sounds like it would be easier just trying to work in C++ then, and get started with Rust on some smaller projects, even though I'm not exactly fond of C++.
[21:13:18] *** Quits: fyolnish (fyolnish@moz-C48341BA.uqwimax.jp) (Ping timeout)
[21:13:18] <TMaster> Think I'll go with that.
[21:13:28] <kelvin> engla: there is a method called zero in std::str
[21:13:29] *** Joins: eatkinson (eatkinson@E5442022.772DB3ED.90B17E8F.IP)
[21:13:41] *** Quits: timot_ (timot@moz-E599A11C.in-addr.nilings.se) (Ping timeout)
[21:13:45] <strcat> TMaster: fwiw rust-gmp is more extensive than the C++ gmpxx bindings ;p
[21:14:00] <engla> kelvin: there used to be, for the Zero trait I think.
[21:14:01] *** Joins: sw17ch (sw17ch@moz-39D8564F.wndsny.tds.net)
[21:14:32] <strcat> kelvin: there's not a method/function called zero in there in 0.8/master
[21:14:39] *** Quits: timot (timot@1C5B7AF5.87C6DE19.CBC7865F.IP) (Ping timeout)
[21:15:01] <engla> kelvin: in master you would use the Default trait. and the default string is empty
[21:15:14] <engla> kelvin: to clear a ~str, use .clear().
[21:15:21] <TMaster> I don't know what the Rust version would be missing though. I probably don't need a lot of functionality. It's for an optional homework exercise in a non-programming course.
[21:16:05] <kelvin> engla: okay, something was weird when I tried that earlier, but I think I figured it out
[21:16:16] <TMaster> Er, *C++ version. Not Rust version.
[21:17:41] *** Joins: timot (timot@1C5B7AF5.87C6DE19.CBC7865F.IP)
[21:18:26] *** Quits: LowPotential (user@566AF39.3B4A6B80.689607DE.IP) (Ping timeout)
[21:18:35] <TMaster> strcat, Amaranth, tjc: thank you for your help, I'll try to figure out what would be easiest for me right now =)
[21:18:49] <cmr> Anyone have updates for TWiR?
[21:19:06] <strcat> cmr: give me a few minutes and you can say rust-gmp was updated for 0.8/master ;p
[21:19:13] <cmr> strcat: alright
[21:19:19] <steveklabnik> cmr: what do you have so far?
[21:19:35] <jason_> acrichto: thanks, i'll look into cast::transmute_copy. i found another work-around that just requires scanning for the key twice :(. i added my code and work arounds to that bug you linked.
[21:19:39] <cmr> steveklabnik: wxrust, sinatra clone, gl-rs, mw's debugging post, 0.8 release, rustdoc merging
[21:19:53] <acrichto> jason_: ok, thanks!
[21:20:11] *** Joins: jmgrosen (jmgrosen@moz-BF80C818.sbcc.edu)
[21:20:59] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[21:21:00] <steveklabnik> cmr: r4r update?
[21:21:00] *** ChanServ sets mode: +ao dherman dherman
[21:21:07] <steveklabnik> and open sourcing
[21:21:22] <cmr> steveklabnik: Ah, sure!
[21:21:28] <steveklabnik> poninter clarification in the tutorial is probably a good idea
[21:21:34] <steveklabnik> since we're trying to combat over-usage
[21:23:58] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:26:11] <acrichto> hmm I wonder if that sinatra port could be used for something like a rustdoc srver
[21:27:45] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[21:28:11] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[21:29:33] <strcat> cmr: rust-gmp lives again
[21:29:48] *** Quits: Palmik (palmik@moz-11EA685D.pks.muni.cz) (Quit: Lost terminal)
[21:29:48] <strcat> although it needs a bunch of 'pub' annotations now
[21:29:52] * strcat fixes that
[21:30:16] *** Joins: quiggle (Mibbit@1BF6F491.1D53A164.B7830B68.IP)
[21:30:21] *** Quits: quiggle (Mibbit@1BF6F491.1D53A164.B7830B68.IP) (Quit: quiggle)
[21:30:33] <SiegeLord> acrichto: Are you dealing with the privacy stuff? Could you comment on my ML message that deals with privacy in non-trait impls?
[21:30:34] *** Joins: zlin (Mibbit@1BF6F491.1D53A164.B7830B68.IP)
[21:30:48] <acrichto> SiegeLord: oh I keep meaning to reaad over that, will do now
[21:31:03] <SiegeLord> Thanks
[21:31:23] <cmr> strcat: awesome, thanks.
[21:31:31] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[21:31:37] <strcat> although I still need to port all my stuff to the new rustpkg
[21:31:40] <strcat> it uses the very early pkg.rs
[21:31:56] <strcat> maybe I'll just wait more ;p
[21:32:10] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[21:32:14] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[21:32:14] *** ChanServ sets mode: +o pnkfelix
[21:32:25] <tjc> strcat: No time like the present. Unless you have C dependencies -- I'm working on that right now
[21:33:00] <strcat> https://github.com/thestinger/rust-gmp/blob/master/gmp.rs so much there, yet it's only like 30% of the gmp API
[21:33:19] <strcat> and we're missing in-place operation traits so I left that stuff out
[21:33:33] *** Quits: timot (timot@1C5B7AF5.87C6DE19.CBC7865F.IP) (Ping timeout)
[21:33:39] <strcat> + it needs even more functions allowing you to choose the output rather than return a new one
[21:33:42] <strcat> ;p
[21:34:23] <strcat> and the 20 kinds of division...
[21:34:25] *** Quits: mdup (mdup@moz-2989B319.rev.numericable.fr) (Ping timeout)
[21:34:39] * strcat could probably make it heavily use macros
[21:34:42] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:34:55] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[21:35:11] *** Joins: timot (timot@1C5B7AF5.87C6DE19.CBC7865F.IP)
[21:35:42] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:36:15] <acrichto> SiegeLord: replied, basically I think this is doable but we shouldn't add new keywords or rules
[21:37:19] *** Quits: canhtak (jeremy@moz-82E9E6D2.wl.t.ulaval.ca) (Quit: canhtak)
[21:38:18] <jorendorff> strcat: that is pretty rad
[21:38:50] <strcat> that was one some of the first rust I wrote ;P, before I started contributing to rust itself
[21:38:51] <SiegeLord> acrichto: I think what I want follows from the proposed rules in the github issue, you just have to treat methods and assoc functions just the same as items
[21:38:55] * strcat used it for crypto puzzles
[21:39:22] <acrichto> SiegeLord: that's what I would want, although I'd want to make sure that the current implementation wasn't on purpose before doing so
[21:39:31] <SiegeLord> Right, ok... thanks
[21:39:37] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[21:39:41] <acrichto> sorry it took me awhile to look at it :(
[21:40:10] *** Quits: heftig (heftig@moz-41907BDD.dip0.t-ipconnect.de) (Ping timeout)
[21:40:19] <SiegeLord> Hah, I wasn't trying to rush you... thanks
[21:41:28] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Quit: lmandel)
[21:43:24] *** Joins: mdup (mdup@moz-2989B319.rev.numericable.fr)
[21:44:55] *** Quits: sw17ch (sw17ch@moz-39D8564F.wndsny.tds.net) (Ping timeout)
[21:45:06] <strcat> rusti: enum Foo { A(int, int) } match Foo { A(*) => () }
[21:45:07] -rusti- <anon>:7:40: 7:43 error: unresolved name `Foo`.
[21:45:07] -rusti- <anon>:7          enum Foo { A(int, int) } match Foo { A(*) => () }
[21:45:07] -rusti-                                                  ^~~
[21:45:07] -rusti- error: aborting due to previous error
[21:45:07] -rusti- application terminated with error code 101
[21:45:13] <strcat> rusti: enum Foo { A(int, int) } match A(2, 2) { A(*) => () }
[21:45:13] -rusti- ()
[21:45:24] *** Joins: canhtak (jeremy@moz-82E9E6D2.wl.t.ulaval.ca)
[21:45:32] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[21:46:40] *** Joins: heftig (heftig@moz-67C1D84E.dip0.t-ipconnect.de)
[21:47:53] <jstevans> When doing signal handling (a la https://github.com/cmr/rust-signal/blob/0.7/signal.rs), how can I pass an additional parameter to handle(...)?
[21:48:13] <strcat> jstevans: you can't really safely handle signals that way
[21:48:25] <strcat> you need to use a modern API like signalfd
[21:48:33] <strcat> or the pselect thing
[21:48:52] <cmr> Yeah, my sigaction thing is a proof-of-concept hack to check if it would even work properly.
[21:49:13] <strcat> signal handlers are inherently broken in multi-threaded programs - you basically have to mask the signal in all but 1 thread
[21:49:28] <strcat> and you can't do that without runtimeless rust
[21:49:36] *** Quits: jordyd (jordyd@moz-790E2988.seg43.ucf.edu) (Quit: Leaving)
[21:49:43] * strcat would be surprised if it worked consistently just without state
[21:50:06] <jstevans> strcat: suppose I'm using it only one one thread? Is there a way to pass a parameter?
[21:50:18] <strcat> jstevans: you're not using one thread if you're not using runtimeless rust
[21:50:39] <strcat> you can't pass parameters to signal handlers, they're a terrible design from the 1970s ;p, need globals
[21:50:46] <jstevans> strcat: :/ out of curiosity, what's unsafe about signal handlers
[21:50:49] <jstevans> ?
[21:50:58] <strcat> jstevans: can't mix them with threads
[21:51:08] <strcat> and they don't take a user data param
[21:51:23] <jstevans> strcat: Ah. Is there an example using signalfd?
[21:51:32] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[21:51:34] <strcat> and syscalls being interrupted by signals was a terrible design idea
[21:51:46] <strcat> jstevans: well, it's basically the same thing as sigaction but it gives you a file handle
[21:52:00] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[21:52:03] <strcat> and then you have to epoll (or select) on the file handle
[21:52:13] <strcat> it belongs in rust's runtime, wrapping libuv's platform independent handling
[21:52:20] <strcat> but you can still do signalfd/epoll by hand
[21:52:28] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[21:52:51] <strcat> jstevans: https://github.com/thestinger/playpen/blob/master/playpen.c#L272 an example in C, but it's a real-world not very simple one ;p
[21:52:52] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Connection reset by peer)
[21:52:59] <strcat> rusti: 2
[21:53:00] -rusti- 2
[21:53:02] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[21:53:05] <strcat> it's the guts of the bot here
[21:53:20] <strcat> rusti: fn foo() { loop {} } foo()
[21:53:26] -rusti- timeout triggered!
[21:53:30] <strcat> that's from timerfd
[21:53:35] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[21:53:43] <strcat> rusti: let _xs = ~[0, ..100000000]
[21:53:44] -rusti- <anon>:8:4: 8:5 error: expected `;` but found `}`
[21:53:44] -rusti- <anon>:8     };
[21:53:44] -rusti-              ^
[21:53:44] -rusti- application terminated with error code 101
[21:53:46] <strcat> rusti: let _xs = ~[0, ..100000000];
[21:53:51] -rusti- timeout triggered!
[21:54:03] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[21:54:18] <strcat> rusti: extern { fn abort(); } unsafe { abort() }
[21:54:18] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Connection reset by peer)
[21:54:19] -rusti- <anon>:7:41: 7:46 error: invoking non-Rust fn in fn without #[fixed_stack_segment] [-D cstack (default)]
[21:54:19] -rusti- <anon>:7          extern { fn abort(); } unsafe { abort() }
[21:54:19] -rusti-                                                   ^~~~~
[21:54:19] -rusti- error: aborting due to previous error
[21:54:19] -rusti- application terminated with error code 101
[21:54:40] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[21:54:42] <strcat> rusti: #[allow(cstack)] fn foo() { extern { fn abort(); } unsafe { abort() } } foo()
[21:54:43] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[21:54:53] <strcat> (I am not sure why that doesn't say signal 6)
[21:55:09] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[21:55:33] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[21:55:37] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[21:55:49] <strcat> anyway signal handlers just aren't going to work in rust
[21:55:49] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Connection reset by peer)
[21:55:57] <strcat> since they rely on interrupting syscalls
[21:56:12] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[21:56:28] <strcat> in fact... rust needs to mask signals if it doesn't already
[21:56:43] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[21:57:12] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[21:57:50] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Connection reset by peer)
[21:57:51] *** Joins: jonathan_ (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[21:58:20] *** Quits: jonathan_ (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[21:58:48] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[21:59:02] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Connection reset by peer)
[21:59:22] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[21:59:55] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[22:00:05] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[22:00:23] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[22:00:34] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Connection reset by peer)
[22:00:54] *** Quits: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP) (Ping timeout)
[22:00:59] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[22:01:24] <strcat> jstevans: what you're doing is spawning a process and also wanting to listen for a signal, so that's inherently async
[22:01:30] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[22:01:58] <cmr> http://cmr.github.io/blog/2013/09/30/this-week-in-rust/
[22:01:59] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[22:02:02] <strcat> the proper way would be for rust's stdlib to expose timers, processes, file handling, signals as selectable things
[22:02:10] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Connection reset by peer)
[22:02:26] <strcat> so you could select on either the process ending (SIGCHLD) or another signal
[22:02:32] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[22:02:35] <strcat> and react with whatever happens first
[22:03:04] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[22:03:20] <strcat> atm I don't think you could really do something like time out after N secs on I/O with an actual timer :s
[22:03:32] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[22:03:47] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Connection reset by peer)
[22:03:55] <kmc> the Right Way to handle signals would hook into libuv and arrive as any other IO event
[22:04:03] <kmc> I don't know how far we are from being able to implement that
[22:04:06] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[22:04:19] <kmc> jonathanmarvens: please fix your client, you are producing lots of join/quit spam
[22:04:21] <acrichto> cmr: "was put in this wee."
[22:04:24] <strcat> kmc: we don't have generic select for I/O events yet though
[22:04:38] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[22:04:40] <strcat> so you still couldn't really use signals/timers for real world scenarios
[22:04:47] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[22:05:03] <acrichto> cmr: and as always, twir is awesome :)
[22:05:07] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[22:05:19] <strcat> the irc bot is a good example of one of those scenarios - it needs to react to I/O events until it gets a signal or the timer runs out
[22:05:19] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[22:05:19] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Connection reset by peer)
[22:05:42] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[22:05:45] <strcat> can't do that in rust atm (even ignoring signals, you can't use a timer that way)
[22:06:05] <strcat> you can put the I/O handling in a task, and the timer in a task, and select on pipes
[22:06:13] <strcat> but the I/O will keep going
[22:06:28] *** Quits: mowhawk (Mibbit@9E9B49EF.9EA65473.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:06:29] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[22:06:34] <strcat> (I/O here being waiting for a process to output stuff)
[22:06:56] *** Quits: squiddy (squiddy@moz-5FBA6F70.adsl.alicedsl.de) (Quit: Leaving)
[22:07:00] <strcat> and you can't exit until the timer ends
[22:07:36] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[22:08:04] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[22:08:17] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Connection reset by peer)
[22:08:19] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:08:40] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[22:08:51] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Ping timeout)
[22:08:54] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:09:11] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[22:09:30] <sam113101> why so many macbook pros
[22:09:39] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[22:10:01] *** jonathanmarvens was kicked by kmc (sorry, come back when you fix your client / connection)
[22:10:14] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[22:10:27] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[22:10:46] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[22:11:14] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[22:11:20] *** Joins: jstevans1 (Instantbir@E7987399.1A99F5FD.DDE5D3F6.IP)
[22:11:30] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Connection reset by peer)
[22:11:49] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[22:11:51] <sam113101> just ban him and tell him to pm you when he's back
[22:11:55] *** kmc sets mode: +b *!jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net
[22:11:58] *** Joins: fyolnish (fyolnish@moz-7498E52A.uqwimax.jp)
[22:12:05] *** Quits: jstevans (Instantbir@E7987399.1A99F5FD.DDE5D3F6.IP) (Ping timeout)
[22:12:17] *** jonathanmarvens was kicked by kmc (PM me to get back in when it's fixed)
[22:12:33] *** Joins: ksev (DrunkenPan@moz-71F7E457.cable.teksavvy.com)
[22:12:38] <kmc> MacBook Pro is a popular computer ;P
[22:12:48] <kmc> plus some of us are mozilla employees and it's one of the models Mozilla gives people
[22:12:53] <doomlord_> i miss mine :)
[22:13:09] <strcat> kmc: you can do redirect bans, at least on freenode ;p
[22:13:14] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Ping timeout)
[22:13:21] *** Joins: maik (maik@moz-6A162886.dip0.t-ipconnect.de)
[22:13:25] <doomlord_> macbook pros are awesome computers, but they're not waterproof :(
[22:13:41] <sam113101> yeah they're good
[22:13:42] *** Quits: fyolnish (fyolnish@moz-7498E52A.uqwimax.jp) (Ping timeout)
[22:14:03] <sam113101> they must be using the default irc client, because they all have the same leave message
[22:14:27] <kmc> strcat: yeah, I looked at the Unreal ircd manual but it doesn't seem to support those
[22:15:12] <sfackler> cmr: wee -> week in the first bullet of "Everything else"
[22:15:37] <strcat> kmc: and then there's a scary channel of 10000 people with intermittent connections :)
[22:16:07] <cmr> sfackler: already fixed, thanks!
[22:16:54] *** Quits: cstrahan (cstrahan@1809CFF1.BCF4F96A.CE96D5E4.IP) (Quit: leaving)
[22:17:00] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[22:17:34] *** Quits: eatkinson (eatkinson@E5442022.772DB3ED.90B17E8F.IP) (Quit: eatkinson)
[22:21:06] *** Joins: jstevans (Instantbir@61255FF1.75B49943.DDE5D3F6.IP)
[22:21:45] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[22:22:23] *** Quits: jstevans1 (Instantbir@E7987399.1A99F5FD.DDE5D3F6.IP) (Ping timeout)
[22:23:28] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:23:30] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[22:24:35] *** Joins: jstevans1 (Instantbir@E7987399.1A99F5FD.DDE5D3F6.IP)
[22:25:43] *** Quits: jstevans (Instantbir@61255FF1.75B49943.DDE5D3F6.IP) (Ping timeout)
[22:25:53] *** Quits: timot (timot@1C5B7AF5.87C6DE19.CBC7865F.IP) (Ping timeout)
[22:25:53] *** Joins: jstevans (Instantbir@61255FF1.75B49943.DDE5D3F6.IP)
[22:26:48] *** Quits: Luqman (laden@moz-DCEF6040.csclub.uwaterloo.ca) (Ping timeout)
[22:26:53] *** Quits: jj2baile (jon@moz-DCEF6040.csclub.uwaterloo.ca) (Ping timeout)
[22:27:07] *** Quits: jstevans1 (Instantbir@E7987399.1A99F5FD.DDE5D3F6.IP) (Ping timeout)
[22:27:33] *** Quits: jstevans (Instantbir@61255FF1.75B49943.DDE5D3F6.IP) (Ping timeout)
[22:28:03] *** Joins: sglez (sglez@E19C1D7A.4B605195.A208C5.IP)
[22:28:04] <maik> is it possible that structs are priv by default now?
[22:28:15] <maik> instead of pub?
[22:28:19] <strcat> they were always priv by default
[22:28:28] <strcat> or do you mean fields?
[22:28:48] *** Joins: jj2baile (jon@moz-21D6B3DE.csclub.uwaterloo.ca)
[22:28:49] <maik> no structs.. hm weird 
[22:28:54] <engla> maik: privacy/visibility wasn't properly enforced before
[22:29:02] * strcat remembers export lists
[22:29:19] <maik> engla, ah okay
[22:29:39] *** Joins: Luqman (laden@moz-345B5EBA.csclub.uwaterloo.ca)
[22:29:59] <engla> maik: lots of things like enums, statics etc would be accessible cross-crate if not marked pub. It's better now
[22:30:08] <engla> *even if not
[22:30:22] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:30:26] <kmc> and it's now a compiler error to put "pub" or "priv" on something which is already pub (respectively priv) by default
[22:31:36] * strcat hopes this will be a nice performance increase
[22:32:12] *** Quits: jj2baile (jon@moz-21D6B3DE.csclub.uwaterloo.ca) (Quit: leaving)
[22:32:36] <strcat> compile-time at least ;]
[22:32:50] *** Joins: jj2baile (jon@moz-21D6B3DE.csclub.uwaterloo.ca)
[22:33:35] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[22:33:35] *** ChanServ sets mode: +o tjc
[22:34:10] *** Quits: Luqman (laden@moz-345B5EBA.csclub.uwaterloo.ca) (Quit: leaving)
[22:34:19] *** Joins: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca)
[22:36:51] *** Quits: maik (maik@moz-6A162886.dip0.t-ipconnect.de) (Ping timeout)
[22:37:24] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[22:37:25] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[22:38:19] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[22:39:36] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[22:39:47] *** Quits: stevekla1nik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[22:39:49] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[22:40:28] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:42:21] <strcat> um
[22:42:31] <strcat> type_of uses &mut CrateContext >.<
[22:42:45] <strcat> I guess it outputs a type
[22:43:16] *** Quits: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Quit: Leaving.)
[22:43:28] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:44:43] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:46:40] *** Joins: [squiddy] (squiddy@moz-5FBA6F70.adsl.alicedsl.de)
[22:49:45] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:50:45] <erickt> Anyone interested in giving a presentation at the bay area rust meetup?
[22:51:24] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:51:25] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[22:51:52] <Eridius> erickt: I'm not interested in presenting, but I am interested in having it be somewhere in SF ;)
[22:51:53] <riley> erickt: where is it held? not interested in giving a talk but I'd like to go.
[22:52:21] <erickt> riley: dunno! Did you sign up to http://www.meetup.com/Rust-Bay-Area?
[22:52:40] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:52:47] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[22:52:52] <riley> erickt: nope! was that just created? I looked for it on meetup.com last week.
[22:53:19] <erickt> Eridius: Heh. Maybe Mozilla would be willing to host us. Know of any other venues?
[22:53:26] <erickt> riley: just made it today :)
[22:53:52] <Eridius> erickt: there's a few other companies in the area that have space, if they can be convinced to host. I know Twitter has a decent area
[22:55:00] *** Quits: Jesin (Jessin_@moz-A11FEBC.cc.lehigh.edu) (Input/output error)
[22:55:02] <pnkfelix> sfackler: it still says "in this wee" for me ...
[22:55:06] <pnkfelix> cmr: ^
[22:55:21] <tiffany> howcome @fn was removed?
[22:55:28] <Eridius> pnkfelix: I see it too
[22:55:34] <cmr> tiffany: @ removal
[22:55:47] <tiffany> @ is being removed?
[22:55:49] <strcat> so, expanding the definition of immediate works
[22:55:52] <strcat> but....
[22:55:59] <cmr> tiffany: yes, becoming a library type.
[22:56:00] <strcat> there are broken code paths that were previously unused
[22:56:07] * strcat sighs
[22:56:38] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[22:56:43] <strcat> enum related myabe
[22:56:46] <strcat> maybe*
[22:56:51] <engla> tiffany: btw, .connect_vec() improved because you asked if it was efficient. https://github.com/mozilla/rust/pull/9583  it's a bit better now at least, it was ridiculous before..
[22:57:02] *** Joins: jstevans (Instantbir@1BD17CBF.4C91BF6B.DDE5D3F6.IP)
[22:57:02] <kmc> if @ goes away, will there be a library type for refcounting that allows cycles?
[22:57:07] <Eridius> cmr: "Debugging Rust in Eclipse" is also damaged
[22:57:15] <kmc> Rc<T> statically disallows cycles, in a way that is sometimes too conservative
[22:57:28] <strcat> kmc: Rc has a constructor without type bounds
[22:57:35] <kmc> oh; is that new?
[22:57:38] <tiffany> nice
[22:57:39] <erickt> Eridius: Hrm, I don't think I have any contacts there.
[22:57:48] <strcat> kmc: don't remember, it's marked unsafe to encourage using the others
[22:57:49] <brson> erickt: we may be able to host a meetup, and our sf office is pretty nice
[22:57:52] <engla> kmc: yes the constructor is `new` :-)
[22:58:01] <Eridius> brson: that would be neat
[22:58:02] <strcat> kmc: we really need a StrongRc/WeakRc pair as an alternative
[22:58:04] <erickt> brson: that'd be awesome! I do like that office
[22:58:11] <strcat> kmc: and @ will still exist in a library
[22:58:15] <Eridius> brson: recently you talked about expanding who can push to try. Has there been any progress on that?
[22:58:21] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[22:58:26] <kmc> strcat: yeah, weak refs would be good
[22:58:35] <kmc> i'm thinking about e.g. trees with parent pointers
[22:58:50] <strcat> kmc: I think the plan is to have Gc and Rc, and then maybe we can have StrongRc/WeakRc
[22:58:52] <erickt> cmr: shucks! I was hoping I'd get my meetup group established before twir
[22:59:06] <strcat> kmc: I'd like to get rid of the Mut variants and make it a more flexible wrapper instead
[22:59:11] <kmc> yeah
[22:59:30] <strcat> like the good old Mut type that existed for a week and was never memory safe
[22:59:32] <strcat> ;p
[22:59:40] <brson> Eridius: no, sorry. at one point we decided to add a way to tell bors to push to try (which i have not done yet). if you want to push to try directly then we can do that too, but you need to file a committer's agreement with mozilla
[22:59:48] <strcat> (but a proper one this time!)
[23:00:10] <tiffany> does/will rust have an optional tracing GC?
[23:00:16] <kmc> will, doesn't
[23:00:20] <brson> Eridius: well, I'll look at bors' script now. shouldn't be too hard
[23:00:30] <cmr> tiffany: it won't be optional if you're using Gc/@
[23:00:38] <strcat> tiffany: there will be a Gc type, removing @ from the *language* just means replacing it with lang item hooks
[23:00:39] <kmc> also for RcMut to be a usable replacement I think the CPS-based accessors should be replaced with methods that return smart pointers
[23:00:44] <tiffany> ah, alright
[23:00:45] <Eridius> brson: I have no objecting to filing a committer's agreement. Being able to push to try would be nice. I keep having to ask others to do it so I can test my path work on windows
[23:00:48] <strcat> kmc: going to delete RcMut
[23:00:53] <strcat> kmc: and have an RAII-based Mut thing
[23:00:54] *** Joins: tjc (tjc@moz-7B0110AD.mv.mozilla.com)
[23:00:54] *** ChanServ sets mode: +o tjc
[23:00:56] <kmc> well Rc<Mut<T>> or whatever
[23:00:57] <kmc> sure
[23:00:57] <brson> I guess we can let people push to try indirectly through bors without the committer's agreement?
[23:00:58] <strcat> kmc: engla has a prototype
[23:01:02] *** Quits: joone_ (joone@moz-C50DC051.jf.intel.com) (Ping timeout)
[23:01:03] <strcat> I think it's an open PR
[23:01:04] <brson> since they won't be able to commit to master
[23:01:19] <kmc> I'm just saying it'll be too painful to refactor all existing uses of @ into CPS, plus the result is less nice imo
[23:01:29] <Eridius> brson: presumably that would require having a PR open though, which I don't want to do until I'm satisfied that this is ready. I know people don't really like having long-lived PRs lying around
[23:01:30] <kmc> I kind of wish Rust would more fully embrace RAII
[23:01:30] <strcat> kmc: yeah I don't plan on leaving it that way
[23:02:03] <strcat> ha
[23:02:10] <brson> Eridius: here's the info about comitter's agreements https://github.com/mozilla/rust/wiki/Note-development-policy#contributions-and-commit-access
[23:02:13] <strcat> rust treats even C-like enums as non-immediate atm
[23:02:21] *** Joins: joone_ (joone@moz-C50DC051.jf.intel.com)
[23:02:27] <strcat> I bet I'm hitting a broken enum code path
[23:02:55] <Eridius> "If your contribution is nontrivial" hmm maybe I should fill this out regardless
[23:03:02] <brson> I'll try to add `@bors: try` or something anyway
[23:03:02] *** Quits: jmgrosen (jmgrosen@moz-BF80C818.sbcc.edu) (Quit: jmgrosen)
[23:03:16] <strcat> yep, broken enum code paths!
[23:04:12] <dbaupp> cmr: btw, a few of the "announcements" links are broken (rustenstein, debugging rust in eclipse)
[23:04:35] <brson> Eridius: it's still not really clear when exactly we need them. definitely anybody who has direct control over what code goes into master needs one, and generally we like them from people who have created large subsystems
[23:04:55] <cmr> brson: I don't think I signed one, I probably should.
[23:05:07] <brson> cmr: yes, please do
[23:05:08] <Eridius> brson: I'm replacing the entire std::path module ;)
[23:05:20] <cmr> dbaupp: sfackler: Eridius: it's just github pages being slow.
[23:05:25] <cmr> brson: where do I find it?
[23:05:55] <brson> cmr: there's a link here https://github.com/mozilla/rust/wiki/Note-development-policy#contributions-and-commit-access
[23:05:59] <dbaupp> cmr: github pages is always slowest at the worst time :(
[23:06:06] <brson> cmr: fill out a form, open an issue on bugzilla, cc me
[23:06:17] <brson> i think that's how it works
[23:06:25] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:07:05] <brson> anybody else have review authority that hasn't filled out a committer agreement?
[23:07:08] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[23:07:33] *** Quits: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:09:04] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[23:09:53] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[23:11:26] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:12:18] *** Joins: fyolnish (fyolnish@moz-2569F2B9.uqwimax.jp)
[23:12:50] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[23:13:12] *** Quits: ahal (ahal@FCCEA34F.7672369.D8E68FF6.IP) (Input/output error)
[23:14:02] *** Quits: fyolnish (fyolnish@moz-2569F2B9.uqwimax.jp) (Ping timeout)
[23:17:11] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[23:17:14] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Quit: WeeChat 0.4.1)
[23:17:21] <cmr> brson: It seems a lot of this process is for firefox things. Would it be level 1 committer?
[23:17:42] *** Quits: clusterfoo (computer@moz-A81F9872.cable.teksavvy.com) (Client exited)
[23:18:04] *** Quits: slackito (slackito@moz-7779E4A6.dyn.user.ono.com) (Quit: leaving)
[23:18:07] *** Quits: pedantech (quassel@moz-C70D19FD.msl-mt.client.bresnan.net) (Client exited)
[23:18:21] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:18:47] *** Joins: tikue_ (tkuehn@B46F4FD2.21C37D63.689607DE.IP)
[23:18:49] <Eridius> brson: btw, the link to create the email for S/MIME has a stray > after the email
[23:19:57] * Eridius just sent the signed email off
[23:20:42] <brson> cmr Eridius: don't even mention the 'level' I think - it's not relevant to rust. we just need an agreement on file
[23:20:43] *** Joins: maik (maik@moz-6A162886.dip0.t-ipconnect.de)
[23:20:51] *** Quits: ofeldt (ofeldt@moz-DC6B58CF.dip0.t-ipconnect.de) (Ping timeout)
[23:20:57] *** Joins: voxpopuli (fanservice@4A886597.7254D4BA.689607DE.IP)
[23:21:19] <Eridius> I just filled out the email as given. I don't think it specified level
[23:22:20] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[23:24:50] *** Quits: jj2baile (jon@moz-21D6B3DE.csclub.uwaterloo.ca) (Quit: leaving)
[23:25:10] *** Joins: ofeldt (ofeldt@moz-C2965E0E.dip0.t-ipconnect.de)
[23:25:28] <brson> making bors handle try builds is not as easy as I thought
[23:26:23] *** Joins: jj2baile (jon@moz-AB7945E9.csclub.uwaterloo.ca)
[23:27:45] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Quit: Coyote finally caught me)
[23:27:54] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[23:28:50] *** Joins: mowhawk (Mibbit@9AD1CFEE.AA9008B0.DDE5D3F6.IP)
[23:29:21] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[23:29:31] *** Quits: mowhawk (Mibbit@9AD1CFEE.AA9008B0.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:32:38] <brson> andreasgal and BrendanEich have r+ power for rust
[23:33:17] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:38:08] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[23:38:55] <jason_> i'm trying to add a file to libstd, is there some faster way to iterate on changes than running a full stage-2 make check?
[23:39:11] <cmr> jason_: make check-stage1-std
[23:39:21] <jason_> ty
[23:39:34] <acrichto> jason_: also NO_REBUILD=1
[23:39:41] <acrichto> if you're just running tests
[23:40:05] <dbaupp> (or changing something not used in the bootstrap at all, which presumably adding a file satisfies)
[23:45:37] <brson> Eridius: what's your github nick again?
[23:45:45] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[23:45:48] <brson> nvm
[23:45:59] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[23:47:40] *** Parts: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) ()
[23:48:34] *** Quits: [squiddy] (squiddy@moz-5FBA6F70.adsl.alicedsl.de) (Input/output error)
[23:48:40] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[23:48:42] <brson> Eridius: https://bugzilla.mozilla.org/show_bug.cgi?id=922413
[23:48:51] *** Quits: alk (alk@moz-32A9FF6A.fbxo.proxad.net) (Ping timeout)
[23:51:26] *** Quits: jstevans (Instantbir@1BD17CBF.4C91BF6B.DDE5D3F6.IP) (Ping timeout)
[23:52:47] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[23:53:21] <Eridius> brson: thanks
[23:53:26] <xandy> btw: is there a function to calculate the power of 2 bignums from extra?
[23:54:50] *** Joins: jdm (jdm@7F255D02.1B9223B5.AE2B2F80.IP)
[23:54:51] *** ChanServ sets mode: +o jdm
[23:56:34] *** Quits: kelvin (kelvin@A4314F81.63B79338.DDE5D3F6.IP) (Ping timeout)
[23:56:41] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:58:08] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[23:58:36] <erickt> xandy: a it doesn't look like it. There is multiplication, so you could do a poor man's pow
[23:59:06] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[23:59:13] <xandy> erick yes but i was hoping for a more elegant way
[23:59:35] *** Quits: SteveMcQwark (steven099@moz-7CFCF343.cpe.net.cable.rogers.com) (Ping timeout)
