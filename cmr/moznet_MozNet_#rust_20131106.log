[00:00:00] <jdm> jdm :)
[00:00:04] <steven_is_false> Thanks.
[00:01:47] *** Joins: Jesin (Jessin_@moz-25306B28.cc.lehigh.edu)
[00:03:47] *** Quits: kovakam (kovakam@66D37263.97266834.58E30771.IP) (Quit: )
[00:05:44] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[00:05:57] *** Quits: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP) (Client exited)
[00:08:35] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:10:45] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (Client exited)
[00:11:10] *** Joins: xexio (xexio@C09C96B1.3A1C6308.FFDF157.IP)
[00:11:31] *** Joins: brylie (quassel@moz-E27796EB.hsd1.or.comcast.net)
[00:11:46] *** Quits: xexio (xexio@C09C96B1.3A1C6308.FFDF157.IP) (Quit: Konversation terminated!)
[00:12:25] *** Quits: alan (alan@moz-FE02DD30.sat6.rackspace.com) (Ping timeout)
[00:12:50] *** Quits: kellogh (timkellogg@moz-68DF7EF7.teliax.com) (Quit: kellogh)
[00:12:58] *** Quits: jgilbert (jgilbert@B695AAFA.E820043D.D4C04133.IP) (Ping timeout)
[00:14:09] *** Quits: tikue (tikue_star@1BE4CCA6.CD72397.689607DE.IP) (Ping timeout)
[00:15:39] *** Quits: jvshahid (jvshahid@moz-53774307.nycm.ny.megapath.net) (Ping timeout)
[00:15:45] *** Quits: freezerburnv (freezerbur@moz-C5EF929C.washdc.fios.verizon.net) (Quit: freezerburnv)
[00:15:48] *** Joins: brendan (brendaneic@8DFE0F5E.F1D38B1F.1D6E592A.IP)
[00:16:13] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[00:16:38] *** Joins: jgilbert (jgilbert@B695AAFA.E820043D.D4C04133.IP)
[00:18:19] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[00:20:15] *** Joins: notmatt (notmatt@CC62CF7E.1E7FDFDB.A82DBDDB.IP)
[00:22:57] *** Quits: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo)
[00:24:00] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[00:24:12] *** Joins: devbug_ (quassel@23AC5F12.9D950176.3655BBF5.IP)
[00:25:15] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Input/output error)
[00:27:16] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:27:36] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:29:26] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[00:29:46] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[00:30:10] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[00:30:21] *** Quits: blank_name (blank_name@FAB53C88.7071B2C8.31EC03F3.IP) (Ping timeout)
[00:31:18] *** Joins: blank_name (blank_name@FAB53C88.7071B2C8.31EC03F3.IP)
[00:31:35] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[00:31:54] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[00:33:25] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[00:33:48] *** Joins: tikue (tikue_star@1BE4CCA6.CD72397.689607DE.IP)
[00:35:05] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Ping timeout)
[00:35:11] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Client exited)
[00:35:45] *** Quits: tikue (tikue_star@1BE4CCA6.CD72397.689607DE.IP) (Ping timeout)
[00:35:55] *** Quits: jgilbert (jgilbert@B695AAFA.E820043D.D4C04133.IP) (Ping timeout)
[00:38:09] *** Joins: adu (ajr@61210CE3.1C3331CA.DA1C73DD.IP)
[00:39:43] *** Quits: notmatt (notmatt@CC62CF7E.1E7FDFDB.A82DBDDB.IP) (Quit: Leaving...)
[00:41:09] *** Joins: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net)
[00:43:59] *** jorendorff is now known as jorendorff_away
[00:45:37] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[00:47:00] *** Quits: bubbles (Mibbit@19B4F7A4.716DD980.59D37A3.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:47:07] *** Quits: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP) (Quit: WeeChat 0.4.2)
[00:48:20] *** Joins: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP)
[00:48:34] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[00:51:29] <mletterle> eh.. think I had a deadlock with that atomics locking code... :/
[00:53:13] *** Quits: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP) (Quit: WeeChat 0.4.2)
[00:53:51] *** Joins: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP)
[00:54:05] *** Quits: skeet70 (skeet70@moz-697F48F2.bzm-mt.client.bresnan.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:54:32] *** Joins: Liothen (liothen@moz-266BCA86.spkn.qwest.net)
[00:55:13] *** Quits: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP) (Quit: WeeChat 0.4.2)
[00:56:01] *** Joins: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP)
[00:56:08] *** Joins: freezerburnv (freezerbur@moz-C5EF929C.washdc.fios.verizon.net)
[00:56:52] *** Quits: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[00:57:49] *** Quits: Jesin (Jessin_@moz-25306B28.cc.lehigh.edu) (Ping timeout)
[00:59:00] *** Quits: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP) (Quit: WeeChat 0.4.2)
[00:59:37] *** Joins: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP)
[00:59:46] *** Quits: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP) (Quit: WeeChat 0.4.2)
[01:00:01] *** Quits: brendan (brendaneic@8DFE0F5E.F1D38B1F.1D6E592A.IP) (Quit: brendan)
[01:00:22] *** Joins: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP)
[01:00:39] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[01:01:34] *** Joins: bynaryshef (bynaryshef@5E0A6D2D.B4EF5999.1C814B46.IP)
[01:05:54] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[01:06:52] *** Quits: nkoep (nik@moz-926253ED.pool.mediaways.net) (Client exited)
[01:09:01] *** Quits: canhtak (canhtak@moz-24F61E55.wl.t.ulaval.ca) (Quit: canhtak)
[01:10:52] *** Joins: canhtak (canhtak@moz-24F61E55.wl.t.ulaval.ca)
[01:11:27] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[01:11:48] *** Joins: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net)
[01:11:48] *** ChanServ sets mode: +ao pcwalton pcwalton
[01:12:19] <pcwalton> acrichto: I take it there's no way to select on multiple I/O streams?
[01:13:49] <sfackler> pcwalton: there's an unfinished sketch of select support in std::select that bblum was working on
[01:13:57] <pcwalton> we need it for 1.0
[01:13:58] <mletterle> somebody write a rust xmpp library for me.
[01:13:58] <pcwalton> it's blocking servo
[01:14:06] <dbaupp> pcwalton: you can put each one in a task, dump to a port/chan stream and select on them in another task (I think)
[01:14:12] <pcwalton> dbaupp: doesn't work
[01:14:19] <pcwalton> I need other tasks to be able to send
[01:14:19] <dbaupp> oh? :(
[01:14:25] <pcwalton> in my use case there is no way to do it
[01:14:33] <pcwalton> other than putting the I/O stream in an RWarc
[01:14:35] <pcwalton> which is what I'll have to do
[01:14:38] <dbaupp> ah, right. :/
[01:15:15] *** Joins: Jesin (Jessin_@moz-25306B28.cc.lehigh.edu)
[01:16:35] <cmr> mletterle: how much you paying?
[01:16:51] <mletterle> depends on the currency...
[01:17:00] *** Joins: dew1 (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[01:17:42] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[01:17:44] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[01:19:16] <mletterle> woah... something broke...
[01:19:19] <mletterle> for me
[01:20:09] *** Quits: echristo (echristo@2C6BFF53.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[01:20:47] <mletterle> ah.. yes, recompile ALL THE THINGS
[01:21:03] *** Quits: adu (ajr@61210CE3.1C3331CA.DA1C73DD.IP) (Quit: adu)
[01:21:20] <mletterle> ugh.. this is deadlocking too often.
[01:24:04] <cmr> isn't "ever" too often?
[01:24:32] *** Parts: nif (Mibbit@F773C385.3B36E0FD.F275000D.IP) ()
[01:24:54] <mletterle> yes
[01:24:59] <mletterle> but this is repeatable, which is worse
[01:25:22] *** Quits: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo)
[01:25:25] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[01:25:33] <dbaupp> strcat: you should definitely not be amending/force-pushing to a public master :P
[01:26:34] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[01:26:56] <mletterle> yeah, I guess task::deschedule was a good idea
[01:29:13] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:29:34] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:29:50] <strcat> dbaupp: pfft ;p
[01:30:15] <strcat> rust-core is just a devel branch to be merged into rust later! >:)
[01:30:52] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[01:31:19] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:32:04] *** Quits: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[01:32:28] <dbaupp> strcat: at this rate you'll be force pushing to mozilla/master :P
[01:32:29] *** Quits: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[01:33:08] *** Joins: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP)
[01:33:31] *** Joins: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP)
[01:34:10] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[01:34:19] *** Joins: jgilbert (jgilbert@moz-4C088FCE.hsd1.ca.comcast.net)
[01:34:35] *** Quits: bjz_ (Mibbit@E428DE71.E5FDABE2.886B98E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:35:05] *** Quits: gandalf (zbraniecki@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: My lid went down)
[01:35:36] *** Joins: alisdair (textual@moz-7657F365.vc.shawcable.net)
[01:35:41] <mletterle> current test technique: up arrow + return, over and over and over again
[01:35:54] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Ping timeout)
[01:36:31] <McPherrin> mletterle: gotta bind a keyboard macro for that
[01:37:17] <cmr> while ./cmd; do echo; done
[01:37:31] <Amaranth> On the contrary, repeatable deadlocking is the best kind
[01:37:50] <dbaupp> cmr: while :; ./cmd; done?
[01:37:57] <dbaupp> *do ./cmd
[01:38:12] <cmr> dbaupp: you want to bail when the tests fail though
[01:38:24] <cmr> unless `while :` is not a typo, and is magic I don't know of
[01:38:32] <mletterle> I hate spurious errors... especially in libraries I don't control...
[01:38:37] * benh always wonders what the 'do' is for
[01:38:54] <cmr> benh: it makes the shell not complain
[01:38:57] <cmr> :P
[01:38:57] <McPherrin> mletterle: It's just code; go look at it :P
[01:39:02] * McPherrin hates sh-shells
[01:39:18] <McPherrin> scheme shell for life
[01:39:43] <dbaupp> cmr: : isn't a typo, but it's just a nicer `true` :P (and yeah, stopping on fail is nice.)
[01:39:57] <McPherrin> dbaupp: damn I've been typing "while true; do ./foo; done for nothing?!
[01:40:04] *** Joins: bjz_ (Mibbit@E428DE71.E5FDABE2.886B98E.IP)
[01:41:10] <dbaupp> McPherrin: you'll never get those seconds back!
[01:41:18] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[01:41:38] <McPherrin> I should write a shell based on Rust, obviously
[01:41:39] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[01:41:48] <McPherrin> need to get that jit working again
[01:41:48] <benh> rusht
[01:42:01] <McPherrin> benh: I'm stealing that name if I ever do this :)
[01:42:07] <benh> yay
[01:42:35] <McPherrin> (I don't have quite enough interest in writing a shell to ever hope of doing this though :P)
[01:42:57] <McPherrin> Not unless I get fired and stranded on a desert island with only busybox and rustc
[01:43:24] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[01:55:16] * mletterle crosses his fingers and eggs Travis on.
[01:55:17] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[01:57:33] *** Quits: boredomist (ruqs@8186917.CC8FA3EE.E3401B6E.IP) (Ping timeout)
[02:00:26] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[02:00:42] *** Joins: adu (ajr@61210CE3.1C3331CA.DA1C73DD.IP)
[02:01:51] <pcwalton> acrichto: streams don't fulfill freeze? :(
[02:01:57] <pcwalton> this blocks Servo hard :(
[02:02:33] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[02:02:42] <acrichto> isn't Freeze just not mutable unless the parent is mutable?
[02:02:49] <acrichto> they're all ~Trait objects
[02:03:19] *** Quits: adu (ajr@61210CE3.1C3331CA.DA1C73DD.IP) (Quit: adu)
[02:03:26] <pcwalton> I wonder if ~Trait objects are not Freeze because they don't know whether their upvars are Freeze
[02:03:27] <pcwalton> or something
[02:03:51] <pcwalton> well, I'm going to transmute to (uint,uint) I guess.
[02:04:02] <dbaupp> does `~Writer:Freeze` work?
[02:04:49] <pcwalton> it's a UnixStream
[02:04:57] *** Joins: strobegen (Adium@A75B6238.EACE1F8D.A133900E.IP)
[02:04:59] <pcwalton> so it encapsulates a ~RtioPipe
[02:05:02] <pcwalton> without the Freeze bound :(
[02:06:10] <pcwalton> I guess I can use a MutexArc
[02:06:25] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[02:06:45] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[02:07:09] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[02:07:22] <pcwalton> mutexarc worked
[02:08:10] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[02:08:25] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[02:12:01] *** jorendorff_away is now known as jorendorff
[02:13:25] *** Joins: ksf (ksf@moz-360F4400.adsl.hansenet.de)
[02:13:37] *** Quits: canhtak (canhtak@moz-24F61E55.wl.t.ulaval.ca) (Quit: canhtak)
[02:17:28] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[02:17:34] *** Quits: heftig (heftig@moz-4F67CF97.dip0.t-ipconnect.de) (Ping timeout)
[02:18:11] *** Quits: alisdair (textual@moz-7657F365.vc.shawcable.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:18:40] *** Joins: heftig (heftig@moz-F6E3121.dip0.t-ipconnect.de)
[02:18:50] *** Quits: freezerburnv (freezerbur@moz-C5EF929C.washdc.fios.verizon.net) (Quit: freezerburnv)
[02:20:11] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[02:22:41] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[02:22:43] <jdavis> what does impl<'self> mean? 
[02:23:05] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[02:23:40] <strcat> jdavis: it doesn't mean much in isolation, it declares a lifetime parameter
[02:23:46] <strcat> impl<T> declares a type parameter
[02:23:56] <strcat> for example you might have
[02:24:05] <strcat> impl<'self, T> Foo for &'self [T] { }
[02:24:07] <jdavis> OK. Here's the code I'm looking at: https://github.com/sfackler/rust-postgres/blob/master/types/mod.rs
[02:24:21] *** Quits: midewitt (midewitt@1C2D8ADF.6E91F788.2CFD4520.IP) (Client exited)
[02:24:26] *** Joins: midewitt (midewitt@1C2D8ADF.6E91F788.2CFD4520.IP)
[02:24:37] <jdavis> line 379
[02:24:58] <strcat> jdavis: it declares a lifetime variable, for use in the type
[02:25:02] *** Quits: midewitt (midewitt@1C2D8ADF.6E91F788.2CFD4520.IP) (Client exited)
[02:25:07] <strcat> it would be clearer if you looked at one that's not using macro expansion
[02:25:14] <strcat> https://github.com/sfackler/rust-postgres/blob/master/types/mod.rs#L449 like that
[02:25:24] *** Joins: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net)
[02:25:47] <jdavis> is it connected to the "&self" at all?
[02:26:15] <jdavis> on line 450?
[02:27:14] <strcat> jdavis: no
[02:27:28] <strcat> jdavis: do you know about named lifetimes already, for example in a function signature?
[02:27:29] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[02:27:31] <jdavis> OK, then where is the 'self lifetime variable used?
[02:27:42] <jdavis> strcat, well, I kind of do. I thought I did.
[02:27:47] <strcat> fn foo<'a>(&'a Foo) -> &'a int {}, for example
[02:27:57] <jdavis> It makes sense in a function signature to me.
[02:27:58] <strcat> the returned reference is tied the lifetime of the passed in parameter
[02:28:02] <strcat> jdavis: ok so
[02:28:07] <strcat> an impl is implemented for a specified type
[02:28:15] <strcat> 'self allows you to associate a lifetime with the type
[02:28:23] <strcat> a named lifetime*
[02:28:52] *** Quits: Jesin (Jessin_@moz-25306B28.cc.lehigh.edu) (Ping timeout)
[02:28:52] <strcat> impl &'self Foo { fn foo(self) -> &'a int { ... } }
[02:29:08] <jdavis> But where did 'a come from?
[02:29:21] <strcat> jdavis: it's declared as a lifetime parameter
[02:29:23] <strcat> <'a.
[02:29:25] <strcat> er
[02:29:27] <strcat> <'a>
[02:29:29] <strcat> just like
[02:29:31] <strcat> fn foo<T>(a: T)
[02:29:34] <jdavis> OK
[02:29:48] <jdavis> But in the example code I showed, I don't think it used the lifetime variable anywhere, right?
[02:29:51] *** Quits: bynaryshef (bynaryshef@5E0A6D2D.B4EF5999.1C814B46.IP) (Quit: This computer has gone to sleep)
[02:30:05] *** Joins: DAddYE (DAddYE@moz-F758DCCF.snfc.ca.megapath.net)
[02:30:38] <strcat> jdavis: if you do an impl for a type with a lifetime bound or a type parameter, it needs to be fully described
[02:30:47] <strcat> whether or not you use the type parameter or the lifetime in the code
[02:30:51] <jdavis> Oh.
[02:31:03] <strcat> impl<T> Foo<T> {}
[02:31:23] <strcat> impl<'a, T> Foo<'a, T> {} (the 'self naming restriction will be gone when one of the current pull requests lands)
[02:31:40] *** Joins: canhtak (canhtak@moz-24F61E55.wl.t.ulaval.ca)
[02:31:51] *** Quits: DAddYE (DAddYE@moz-F758DCCF.snfc.ca.megapath.net) (Ping timeout)
[02:31:55] <jdavis> So that means if you want to, say, have a FromStr trait, you need to have two implementations?
[02:32:02] <strcat> where the first Foo could be something like 'struct Foo<A> { x: A }' and the second 'struct Foo<'a, A> { x: &'a A }'
[02:32:10] <strcat> jdavis: why two implementations?
[02:32:19] <strcat> I'm just showing two examples of impls
[02:32:48] <strcat> struct Foo<T> { x: T } impl<T> Foo<T> { ... }
[02:33:07] <strcat> struct Foo<'a, T> { x: &'a T } impl<'a, T> Foo<'a, T> { ... } (currently has to be called 'self)
[02:33:22] <jdavis> Well, I see what looks like two implementations for the same type, one on 367 and one on 379
[02:34:06] *** Quits: brylie (quassel@moz-E27796EB.hsd1.or.comcast.net) (Input/output error)
[02:34:22] <jdavis> (maybe I'm getting confused by macros)
[02:34:37] *** Joins: adu (ajr@61210CE3.1C3331CA.DA1C73DD.IP)
[02:34:38] <strcat> jdavis: you're looking at two cases in a macro
[02:34:48] <strcat> one is for types with a lifetime parameter, one for types without
[02:34:55] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[02:35:45] <jdavis> An owned pointer doesn't have a lifetime, right? 
[02:36:13] <strcat> it doesn't have a lifetime parameter
[02:36:19] <strcat> all objects have a semantic 'lifetime'
[02:36:39] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Ping timeout)
[02:36:44] <jdavis> right, OK.
[02:36:46] <strcat> lifetime parameters are on borrowed closures/pointers/slices and anything containing them
[02:37:07] <jdavis> OK, a better way of asking the question: lines 442 and 449
[02:37:18] <strcat> they don't own what they point at, so it puts an upper bound on how long they can stay around
[02:37:20] *** Joins: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net)
[02:37:25] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:38:11] <pcwalton> argh, RWarc won't even work
[02:38:11] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[02:38:14] <pcwalton> because it'll just hang
[02:38:17] <strcat> jdavis: type/lifetime parameters have to be specified on the type in the impl
[02:38:18] <pcwalton> deadlock on the mutex :(
[02:38:21] <strcat> pcwalton: hm?
[02:38:22] <pcwalton> we gotta have select
[02:38:27] <strcat> oh, yeah
[02:38:30] <pcwalton> I'm trying to hack around the lack of select on I/O
[02:38:34] <strcat> there's no way to do certain patterns without select
[02:38:37] <pcwalton> with worse and worse hacks
[02:38:40] <strcat> especially mixing timers and I/O
[02:38:42] <pcwalton> and hitting walls
[02:39:40] <jdavis> strcat, so if you want "to_sql" to work on both "abc" and ~"abc", you need two implementations?
[02:40:07] <strcat> jdavis: ~"foo" will coerce to a slice
[02:40:39] <strcat> let xs = ~[1, 2, 3]; xs.iter() works
[02:40:46] <strcat> even though ~[T] doesn't implement an iter method
[02:41:36] <jdavis> so why does the author use two implementations there? I asked a related question and got this answer which I'm still trying to understand: https://github.com/sfackler/rust-postgres/issues/21#issuecomment-27180210
[02:42:23] <jdavis> (I don't really know what a slice is, by the way, looking now)
[02:42:40] <strcat> you only need a duplicate implementation for ~[T] or ~str if you're writing functions that are generic across containers and there's something ~[T] can do there that a slice can't
[02:42:50] <strcat> so, I don't think in 95% of cases you would want to duplicate the methods
[02:43:02] <strcat> if it does the same thing on both &[T] and ~[T], you can pass &[T] to the function
[02:43:15] <strcat> jdavis: &[T]/&str are a slice
[02:43:31] <strcat> they're a ptr and a length (a view of a block of memory, and they don't own it)
[02:43:49] *** Quits: geoffhill (geoffhill@moz-244CF33A.amazon.com) (Ping timeout)
[02:43:52] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:45:00] <strcat> I don't think it's useful to declare it for both
[02:45:21] <jdavis> In this case, what can ~[T] do that a slice can't? Or do you think the author is mistaken to do it?
[02:45:33] <strcat> in this case, I don't see a reason to do it
[02:45:49] <jdavis> OK.
[02:45:49] <strcat> ~[T] is a dynamic array, it can be resized
[02:46:00] <strcat> &mut [T] and &[T] can't be resized, they're a view
[02:46:11] <strcat> (you can take a slice into them, so you can make the view smaller)
[02:46:23] *** Quits: adu (ajr@61210CE3.1C3331CA.DA1C73DD.IP) (Quit: adu)
[02:46:27] <jdavis> OK
[02:46:54] <jdavis> I have a lot to learn about rust, but it looks pretty powerful. I'm slowly absorbing it... thank you.
[02:47:04] <jdavis> I will prod the author a little more on the subject.
[02:47:09] <bblum> pcwalton: what is the requirement for your select use case?
[02:47:23] <bblum> readers, writers, nature of set of streams?
[02:47:24] <pcwalton> select on an I/O stream and a port
[02:47:37] <pcwalton> because messages of the same time can come both from in-process or out of process
[02:47:39] <pcwalton> of
[02:47:42] <pcwalton> of the same type rather
[02:47:50] * strcat always wants select(timer, io, io, io)
[02:48:10] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[02:48:12] <jdavis> strcat: one more question: if only one implementation is needed, which one would it be? The one with the lifetime parameter or the one on ~str?
[02:48:18] <strcat> jdavis: on &str
[02:48:31] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[02:48:34] <strcat> you can *always* coerce ~str -> &str and ~[T] -> &T
[02:48:41] <jdavis> OK. Actually, I think I know why the author did it then.
[02:49:18] <strcat> I can't really think of a good reason to duplicate methods on ~[T]
[02:49:33] *** Joins: lfox (lfox@1A50ED00.AE625458.ECED8BE3.IP)
[02:49:38] <jdavis> The FromSql trait must be on a ~str, right?
[02:49:43] <strcat> yes
[02:49:52] <strcat> but if you have a ~str, you can call any &str methods on it
[02:50:02] <strcat> since it will happily coerce
[02:51:03] <strcat> it's only in the body of a generic function where there would be a distinction, but in that case you could pass in &[T] to the function or coerce ~[T] to it
[02:51:13] <strcat> if it actually needs to be able to push into a container... &[T] won't work
[02:51:15] <jdavis> OK. But maybe that explains why he made two separate traits for ToSql and FromSql, rather than combining them.
[02:51:45] <strcat> you could have FromSql returning &str if whatever the Sql type is stores a string internally
[02:52:08] <pcwalton> acrichto: condition newbie here. how do I ignore errors in a block?
[02:53:00] <Luqman> just don't handle the condititions?
[02:53:11] *** Quits: bjz_ (Mibbit@E428DE71.E5FDABE2.886B98E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:53:15] <strcat> pcwalton: do condition.trap(...).inside { }
[02:53:16] <Luqman> conditions*
[02:53:24] <strcat> pcwalton: or better, port the interface to not use conditions, imo ;p
[02:53:31] <pcwalton> can't change rust
[02:53:39] *** Joins: ksf_ (ksf@moz-C19D9723.adsl.hansenet.de)
[02:53:47] <jdavis> strcat, thanks again. I'll work on it for a while and ask the author a few more questions.
[02:53:48] <bblum> pcwalton: is it not sufficient to send your i/o stream handle into a sub-task, set up a pipe with that task, and select on that pipe and your other one?
[02:54:12] <pcwalton> bblum: I need other tasks to be able to send on that stream too
[02:54:18] <pcwalton> I need full duplex access from all tasks
[02:54:24] <strcat> jdavis: there aren't really clear guidelines on how to write idiomatic rust yet
[02:54:25] <pcwalton> that was what I tried first :(
[02:54:30] <strcat> jdavis: and this mostly falls into that
[02:54:47] <bblum> pcwalton: if one task has a handle which it needs to select-receive from, how do other tasks access it? do they have their own handles?
[02:55:04] *** Quits: ksf (ksf@moz-360F4400.adsl.hansenet.de) (Ping timeout)
[02:55:06] <pcwalton> yeah, I need to be able to hand out clones of the handdle
[02:55:08] <pcwalton> handle*
[02:55:13] <strcat> the stdlib has lots of anti-patterns imo, like trait overuse, a lot of it due to the inability to define impls on built-ins but it's not all that
[02:55:18] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[02:55:18] *** ChanServ sets mode: +ao dherman dherman
[02:55:35] <acrichto> pcwalton: do io::ignore_errors_in { .. }
[02:55:40] <bblum> pcwalton: having clones of the handle seems compatible with sending one of the handles into a dedicated select-notification task
[02:55:43] <strcat> it uses traits for everything *because* there's a prelude they can be shoved to hide the ugliness (but not in the docs)
[02:55:55] *** Quits: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net) (Quit: jeffdb_)
[02:55:57] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[02:55:57] <acrichto> pcwalton: match io::result(|| something_which_can_raise) { ... }
[02:56:01] <strcat> rust-core doesn't have a prelude so I am probably not going to define any traits that are not actually needed for code reuse...
[02:56:03] <pcwalton> so the problem is I can't clone I/O handles
[02:56:17] * strcat would really like to fix that stdlib/rustc bug
[02:56:19] <pcwalton> strcat: so there are two distinct schools of thought
[02:56:23] <strcat> I guess #[this_is_really_libstd]
[02:56:29] <strcat> and lang items on types
[02:56:33] <pcwalton> one is to have few traits and one is to have lots of traits, like Ring and AbelianGroup and whatever
[02:56:39] <pcwalton> we haven't really decided which camp we're ino
[02:56:40] <pcwalton> in
[02:56:47] <bblum> pcwalton: that seems like it would prevent you from having full duplex access even without select; or is there a current solution?
[02:56:49] <pcwalton> I knew this day would come though
[02:56:56] <strcat> pcwalton: well, it's really really difficult if you want a stable API
[02:56:59] <pcwalton> bblum: there isn't a current solution :(
[02:57:04] <strcat> if you don't care, you just define them as needed ;p
[02:57:04] <bblum> i see
[02:57:20] <bblum> pcwalton: what is the representation of an io stream handle currently?
[02:57:27] <strcat> there aren't many traits in libstd that actually lead to code reuse
[02:57:29] <pcwalton> I'm not sure, I think it's a trait object.
[02:57:39] *** Quits: ksf_ (ksf@moz-C19D9723.adsl.hansenet.de) (Ping timeout)
[02:57:41] *** Joins: ksf__ (ksf@moz-3E68FC18.adsl.hansenet.de)
[02:57:44] <strcat> the operator traits are obviously required
[02:57:57] <strcat> and Send/Freeze (+ any we need for data parallelism)
[02:58:04] <strcat> Iterator leads to a lot of code reuse
[02:58:18] <bblum> any idea what is existentially captured in the trait?
[02:58:20] <strcat> and Hash!
[02:58:25] <bblum> or can it be, like, anything
[02:58:27] <pcwalton> bblum: acrichto or brson would know
[02:58:42] <pcwalton> strcat: I am inclined to be in favor of fewer traits
[02:58:42] <bblum> i'm wondering if there might be a special way to make it concurrency-safe
[02:58:46] <bblum> and use the Freeze bound
[02:58:48] <strcat> bblum: pretty sure those traits can be 'anything' because the event loop will be pluggable
[02:58:49] <pcwalton> you and bjz will have to fight it out though :)
[02:58:56] <pcwalton> biz wants Ring, Field, etc
[02:59:04] <strcat> pcwalton: well I am fine with a really well thought out trait hierarchy
[02:59:08] <strcat> but... all I can say is good luck
[02:59:15] <bblum> strcat: or maybe there could be a sub-trait that adds the "concurrency-safe" access mechanism or something
[02:59:17] <strcat> we don't have well thought out trait hierarchies anywhere atm
[02:59:31] <bblum> trait LockfreeIOStream : IOStream + Freeze { ... }
[03:00:09] <strcat> Iterator essentially provides two kinds of code reuse: adaptors, and consumers of generic iterators
[03:00:16] <pcwalton> yeah, I think it would be good to make this stuff concurrency-safe
[03:00:18] <strcat> I don't think Container/Set/Map are currently reused anywhere
[03:00:25] <strcat> I could see a graph library using them
[03:00:38] <strcat> (although they do provide some default methods)
[03:01:00] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[03:01:21] <strcat> pcwalton: I think floats are screwed up enough that traits aren't very useful for them
[03:01:35] <strcat> pcwalton: imo... it would be best to say Eq/Ord have strict requirements (total ordering) and not define them for floats
[03:01:39] <strcat> the operators will still work on floats
[03:01:43] <strcat> but not generic functions
[03:01:58] <pcwalton> works for me
[03:01:59] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:02:05] *** Joins: willingc (willingc@moz-30CDDE76.mycingular.net)
[03:02:23] <strcat> floats are pretty much totally undef behaviour atm :(
[03:02:45] <strcat> LLVM doesn't implement signalling NaNs - as in it considers them undefined behaviour
[03:02:48] <strcat> (they will eventually)
[03:03:33] <strcat> pcwalton: did you see https://github.com/mozilla/rust/issues/10183#issuecomment-27452298 ?
[03:03:51] <strcat> pcwalton: I think we'll end up having to teach the LLVM intrinsics to understand "unspecified result" as not being "undefined"
[03:04:06] <pcwalton> bleh, that's lame
[03:04:26] <strcat> float <-> int casts that overflow are undef too
[03:04:58] <strcat> I actually ran into this by writing a really, really silly benchmark for bounds checking
[03:05:15] <strcat> and it removed some bounds checks because a bit shift overflowed
[03:05:55] <strcat> (I only noticed when I ran it in valgrind as a lazy way of counting bytes allocated)
[03:07:22] *** Joins: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net)
[03:07:56] <dbaupp> that's only for constant shifts, right? i.e. `let x = 100; 1 << x` is not undef behaviour (at least, assuming no constant folding)
[03:08:06] <strcat> dbaupp: it is undef if it overflows
[03:08:22] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[03:08:31] <strcat> (as in overlong shifts)
[03:08:50] <strcat> it just usually won't be clever enough to do any optimizations taking advantage of it if the shift isn't constant
[03:08:52] <strcat> *usually* ;p
[03:09:00] <strcat> and the shift could become constant after inlining and so on
[03:09:21] <strcat> dbaupp: http://llvm.org/docs/LangRef.html#shl-instruction
[03:09:35] <strcat> 'If op2 is (statically or dynamically) negative or equal to or larger than the number of bits in op1, the result is undefined.'
[03:09:52] * pcwalton rages at struct alignment
[03:09:53] <strcat> so, I always thought that meant "the result is unspecified", rather than "undefined behaviour"
[03:09:57] <strcat> but it really means something in between
[03:10:11] *** Parts: strobegen (Adium@A75B6238.EACE1F8D.A133900E.IP) ()
[03:10:14] <strcat> "the result is undefined" (it won't necessarily consider it 'live' so each read can be a different value)
[03:10:15] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[03:10:56] *** Joins: bjz_ (Mibbit@moz-70C04AF6.rmit.edu.au)
[03:10:59] <strcat> they'll happily improve these intrinsics to allow memory safety without branches everywhere, it's just that C/C++ doesn't need it and a language like Haskell doesn't care
[03:11:29] <dbaupp> strcat: ah, right.
[03:12:07] <strcat> anything clang doesn't output is likely poorly optimized...
[03:13:02] <strcat> when they finally merge my lower-expect fix I'll move on to fixing something else...
[03:13:35] <dbaupp> that's still unmerged?
[03:13:43] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[03:14:07] <strcat> someone reviewed it but they didn't feel comfortable merging it themselves ;p
[03:14:33] * strcat hasn't gotten a great impression of LLVM's dev process from this little tiny patch
[03:14:51] <strcat> feels like the only way to get something merged is to repetitively nag people on irc
[03:14:58] <strcat> and I don't know them so I don't feel right doing that...
[03:15:45] <strcat> I guess the trick is to submit enough patches that you end up with commit access and don't have to deal with it ;p
[03:16:22] *** Joins: nitivermagupta (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net)
[03:16:49] *** Quits: bjz_ (Mibbit@moz-70C04AF6.rmit.edu.au) (Quit: http://www.mibbit.com ajax IRC Client)
[03:16:58] *** Quits: nitivermagupta (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net) (Quit: )
[03:17:04] <dbaupp> or so that you get to know them, so feel right pestering them constantly :P
[03:17:04] *** Joins: nitivermagupta (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net)
[03:17:25] *** nitivermagupta is now known as niti
[03:18:46] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[03:19:06] <strcat> dbaupp: the patch also has no relevance to C/C++ so there's that too ;p
[03:19:19] <strcat> if I fixed mergefunc I'd hope someone would merge it ASAP
[03:19:35] * strcat fixed the same bug that's in mergefunc in rust's transmute intrinsic...
[03:19:59] <dbaupp> is that the only mergefunc bug you know of?
[03:20:29] <strcat> yes
[03:20:33] <strcat> http://llvm.org/bugs/show_bug.cgi?id=17326
[03:20:45] <strcat> also the only reported issue with it that's a bug
[03:21:49] <dbaupp> heh, sanxiyn pops up :)
[03:21:59] <strcat> dbaupp: just do rustc --passes mergefunc on libstd and you'll hit a cast assert
[03:22:00] *** Quits: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP) (Ping timeout)
[03:22:06] <strcat> I hope it's that issue ;p
[03:22:13] <strcat> bugpoint failed to narrow it down when I tried before
[03:22:47] <dbaupp> oh :( that's not very helpful; so, yeah, I guess fixing it is the easiest way to check that that's the bug affecting libstd :P
[03:23:13] <strcat> that's my plan, if the guy who said he was going to fix it doesn't show up soon ;p
[03:23:31] <strcat> I'd prefer not having to do anything...
[03:23:43] <dbaupp> that's always easiest, yeah.
[03:24:13] * strcat isn't really surprised it is unfixed
[03:24:46] <strcat> I don't think google uses templates heavily and most apple stuff is probably C, low-level C++ or ObjC...
[03:24:49] *** Joins: tautologico_ (shung@703660AA.CFE755C8.C27E1635.IP)
[03:25:00] *** Quits: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:25:15] <strcat> dbaupp: did I tell you what mergefunc did before LLVM 3.3?
[03:25:32] <strcat> it assumed no hash collisions were possible :), with a pretty weak hash
[03:26:56] <dbaupp> yeah, I think i'd seen you say that.
[03:27:16] <dbaupp> ... why would that've ever been a reasonable implementation? :S
[03:27:39] <strcat> only tested on small programs? *shrug*
[03:27:50] <strcat> if it's not on by default and well tested, it's going to break
[03:28:02] <tautologico_> compiling rust now generates error messages from xcrun on OSX, is this because my Xcode is outdated?
[03:28:32] * strcat ponders how to expose pthread TLS...
[03:29:24] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[03:29:39] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:30:46] <strcat> oh it's simpler than I thought
[03:30:53] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:30:58] <strcat> for some reason I thought it was undef behaviour to look up a non-existent key
[03:31:35] <strcat> The effect of calling pthread_getspecific() or pthread_setspecific() with a key value not obtained from pthread_key_create() or after key has been deleted with pthread_key_delete() is undefined.
[03:31:37] <strcat> :|
[03:33:01] <strcat> why POSIX, why!
[03:33:55] <strcat> I guess.... I could just disallow deleting keys
[03:34:11] *** Quits: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net) (Quit: jeffdb_)
[03:34:14] *** Joins: bjz_ (Mibbit@10C60936.E5FDABE2.886B98E.IP)
[03:34:45] <sp3d> return a once fn on adding that will delete that particular key?
[03:35:08] *** jorendorff is now known as jorendorff_away
[03:35:17] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:35:40] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[03:36:22] <sp3d> I guess that wouldn't be enough, nvm
[03:36:35] <strcat> sp3d: it has to be possible to share the key, without it being possible for it to be deleted and then read
[03:36:36] *** Quits: willingc (willingc@moz-30CDDE76.mycingular.net) (Client exited)
[03:36:48] <sp3d> yeah
[03:36:55] *** Quits: niti (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net) (Client exited)
[03:36:57] *** Joins: willingc (willingc@moz-30CDDE76.mycingular.net)
[03:36:58] <strcat> I guess it only makes sense to have statics that correspond to thread-local data but...
[03:37:09] <strcat> I don't really see how to do it without static constructor functions
[03:37:24] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Ping timeout)
[03:37:27] *** Joins: niti (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net)
[03:37:39] *** Quits: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo)
[03:38:11] <strcat> maybe TLS should be a language feature supported by lang items
[03:38:38] *** Quits: willingc (willingc@moz-30CDDE76.mycingular.net) (Ping timeout)
[03:38:58] *** Joins: willingc (willingc@moz-30CDDE76.mycingular.net)
[03:39:09] *** Quits: niti (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net) (Ping timeout)
[03:40:33] *** Joins: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP)
[03:43:59] *** Quits: jrw (jrw@moz-25ACAE0D.net) (Ping timeout)
[03:45:02] *** Joins: jrw (jrw@moz-25ACAE0D.net)
[03:45:23] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Ping timeout)
[03:48:04] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[03:48:30] *** Joins: StarLight (StarLight@moz-93E2906B.dynamic.avangarddsl.ru)
[03:49:19] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[03:49:34] *** Quits: willingc (willingc@moz-30CDDE76.mycingular.net) (Client exited)
[03:49:55] *** Joins: willingc (willingc@moz-30CDDE76.mycingular.net)
[03:50:11] *** Quits: zz_kimundi (kimundi@moz-A0D07E3E.dip0.t-ipconnect.de) (Ping timeout)
[03:50:15] *** Quits: willingc (willingc@moz-30CDDE76.mycingular.net) (Connection reset by peer)
[03:50:30] *** Joins: willingc (willingc@moz-30CDDE76.mycingular.net)
[03:53:05] <strcat> haha
[03:53:08] *** Joins: zz_kimundi (kimundi@moz-4392BF18.dip0.t-ipconnect.de)
[03:53:09] <strcat> LLVM has a thread_local feature
[03:53:11] * strcat sighs
[03:53:11] *** Quits: bjz_ (Mibbit@10C60936.E5FDABE2.886B98E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:53:35] *** zz_kimundi is now known as kimundi
[03:53:37] <pcmattman> strcat: for __thread or for something else?
[03:53:53] <strcat> as in there's actually 'thread_local' in the LLVM IR
[03:54:00] <strcat> for thread_local in C11/C++11
[03:54:14] <pcmattman> that's what I was getting at
[03:54:27] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[03:54:43] <strcat> so I can just make my life easy and add #[thread_local], make it safe for static mut and only expose it for #[no_std]
[03:54:50] <strcat> or maybe it doesn't matter at all
[03:55:07] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[03:55:27] *** Joins: bjz_ (Mibbit@8516E8EB.E5FDABE2.886B98E.IP)
[03:55:41] <pcmattman> (it turns out __thread is not the storage duration specifier and my life is a lie)
[03:56:32] <pcmattman> (it turns out __thread does exist but is non-standard)
[03:56:57] <pcmattman> strcat: this is for rust-core or in general?
[03:56:59] <strcat> or maybe it's part of the ELF standard? vaguely part of it at least
[03:57:01] <strcat> pcmattman: rust-core
[03:57:26] <strcat> tasks are N:M scheduled so they can't just use ELF (and whatever windows does) for thread_local data
[03:57:33] <strcat> since they want task-local ;p
[03:57:40] <pcmattman> mm
[03:57:50] <strcat> I think I'll just make it a feature flag
[03:58:05] <pcmattman> surely on Linux say __thread/thread_local just turns it into a TLS segment lookup (%gs or whatever)
[03:58:17] <strcat> yeah
[03:58:25] <Eridius> eh, #[thread_local] still seems hypothetically useful in a task-based scenario, if you're using resources that are somehow tied to an OS thread
[03:58:33] <Eridius> just not sure what that might be in practice
[03:58:37] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:58:58] <pcmattman> Eridius, what happens if a task isn't specifically an OS thread though?
[03:59:10] <strcat> well it would still be safe because you couldn't access it in parallel
[03:59:12] <Eridius> pcmattman: what do you mean? Tasks run on top of OS threads
[03:59:17] <strcat> it would just make little to no sense in most cases ;p
[03:59:27] <Eridius> strcat: yeah, which is why I said "hypothetically" ;)
[03:59:46] <pcmattman> a bunch of co-operative tasks could theoretically run on one thread
[03:59:54] <Eridius> pcmattman: nothing theoretical about it
[04:00:08] <pcmattman> (the "theoretically" is "I don't know if rust does this" :) )
[04:00:14] <strcat> hm
[04:00:20] <strcat> how does thread_local handle dtors/constructors?
[04:00:23] <strcat> in C++11
[04:00:34] <strcat> apparently it's why MSVC++/gcc don't implement it yet
[04:00:39] <pcmattman> but yes, the fact it's co-operative makes it at least slightly sane, until you do I/O and expect your thread-local variable to not change during that
[04:00:56] <strcat> there's already errno
[04:01:08] <pcmattman> true
[04:01:45] *** Quits: ilyoan (ilyoan@B4104EBB.3CC170B1.1E14B209.IP) (Input/output error)
[04:01:49] <Eridius> strcat: I have been wondering how errno is handled in rust (and I don't mean "call os::last_os_error()"). Is it just assumed that the task won't yield in between the FFI call and your querying of errno?
[04:02:02] <Eridius> or does the task scheduler preserve errno on task switches?
[04:02:02] <strcat> Eridius: yes, tasks are defined as having cooperative scheduling
[04:02:04] <strcat> on the OS thread
[04:02:18] <strcat> Eridius: it can't really preserve it
[04:02:28] <Eridius> strcat: I thought tasks were merely implemented as cooperative scheduling. It's actually officially defined that way?
[04:02:35] <strcat> Eridius: it has to be defined that way
[04:02:37] <Eridius> as in, a future version of rust can't switch it?
[04:02:47] <strcat> can't switch it, but I don't think there would be a reason to
[04:02:53] <strcat> if you want pre-emptive scheduling, OS threads are fine
[04:03:05] <strcat> cooperative scheduling reduces scheduling overhead, that seems to be the only reason to use it
[04:03:15] <strcat> you get the 'thread pool' effect globally, for free
[04:04:07] <Eridius> strcat: on the subject of thread_local dtors, here's what glibc has to say: http://sourceware.org/glibc/wiki/Destructor%20support%20for%20thread_local%20variables
[04:04:49] <strcat> rust doesn't have dtors for statics so this won't matter, but it is a curious thing ;]
[04:05:54] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[04:05:56] <strcat> hm, I wonder what the safety implications are for static mut...
[04:06:03] * Eridius heads out to dinner
[04:06:46] *** Quits: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net) (Quit: pcwalton)
[04:07:40] <pcmattman> strcat: personally I'd be inclined towards disallowing the thread-local attribute for complex types that require dtors/constructors
[04:07:54] <strcat> yeah, that would happen by default
[04:07:57] <strcat> since I plan on using 'static'
[04:08:15] <strcat> '#[thread_local] static mut: int = 5;' still seems like it would have to be unsafe to access too
[04:08:17] <pcmattman> mm
[04:08:39] <strcat> because of the same things that apply to @mut
[04:08:40] <strcat> and RcMut
[04:08:43] <strcat> and TLS 
[04:08:52] *** Quits: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP) (Ping timeout)
[04:09:00] *** Joins: nomadic (nomadic@moz-E01D5C49.hsd1.ga.comcast.net)
[04:09:42] *** Joins: adu (ajr@61210CE3.1C3331CA.DA1C73DD.IP)
[04:09:46] *** Joins: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net)
[04:10:14] *** Joins: notmatt (notmatt@moz-152F21B7.vc.shawcable.net)
[04:11:04] *** Quits: notmatt (notmatt@moz-152F21B7.vc.shawcable.net) (Connection reset by peer)
[04:11:21] *** Joins: notmatt (notmatt@moz-152F21B7.vc.shawcable.net)
[04:11:37] <strcat> pcmattman: hm
[04:11:47] <strcat> I'm not really sure if it would have to be unsafe :)
[04:11:56] <strcat> if you gave the borrows short lifetimes maybe it wouldn't... ?
[04:12:24] <strcat> regardless, it's easy enough to wrap it in macros :)
[04:15:07] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Ping timeout)
[04:15:10] *** Joins: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP)
[04:17:45] <dbaupp> strcat: foo(&mut static_mut, &mut static_mut) would be invalid, and there's no (general) way to disallow that, right?
[04:18:08] <pcmattman> strcat: I think the distinction between, say, 'task-local' and 'thread-local' is important, which is something that people who use rust-core should probably understand anyway
[04:18:09] <strcat> dbaupp: doesn't seem like it, because you could take the &mut *anywhere*
[04:18:23] <strcat> pcmattman: well, people using rust-core don't/won't have tasks
[04:18:43] <strcat> just threads, and thread-pool abstractions
[04:18:44] *** Joins: arxanas (Waleed@BB958D53.FBD7E042.A09C06ED.IP)
[04:19:33] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[04:19:34] <pcmattman> strcat: fair point. No way to provide for that at all?
[04:19:44] <strcat> well at that point you might as well use libstd
[04:19:57] <pcmattman> true.
[04:20:08] <strcat> rust-core just aims to be analogous to C11/C++11
[04:20:33] *** Quits: arxanas (Waleed@BB958D53.FBD7E042.A09C06ED.IP) (Quit: leaving)
[04:21:07] <dbaupp> strcat: I don't understand why being able to take the &mut anywhere means that you're allowed to have aliasing &mut pointers?
[04:21:11] <dbaupp> (in safe code)
[04:21:23] <strcat> dbaupp: because it won't be able to freeze it
[04:21:36] <Amaranth> The stdlib split again?
[04:21:59] <strcat> hm?
[04:22:24] <Amaranth> libstd to libstd and libextra to rust-core, libstd, and libextra?
[04:22:35] <dbaupp> strcat: ... so swap(&mut x, &mut x) would be legal, even though it's  only works with non-overlapping pointers?
[04:22:44] <strcat> Amaranth: rust-core is an unofficial project at this point
[04:22:48] <Amaranth> Ah
[04:22:50] <strcat> and libextra is going away
[04:22:59] <strcat> stuff will be removed (to other repos) or moved to libstd
[04:23:11] <strcat> dbaupp: I'm not sure what you mean
[04:23:28] <strcat> I just pointed out that thread-local 'static mut' wouldn't be safe
[04:23:34] <dbaupp> oh, I agree
[04:23:35] <strcat> even though at first I thought it might be possible
[04:23:44] <strcat> if you disallow borrows ;p
[04:24:01] <dbaupp> I misinterpreted/missed what you said :P
[04:24:07] *** Quits: lfox (lfox@1A50ED00.AE625458.ECED8BE3.IP) (Quit: ZZZzzz…)
[04:24:24] <strcat> Amaranth: https://github.com/thestinger/rust-core
[04:24:37] *** Joins: Jesin (Jessin_@moz-25306B28.cc.lehigh.edu)
[04:24:41] <strcat> pcmattman: and likely no non-blocking I/O (poll, epoll, SOCK_NONBLOCK) and no async I/O (IOCP, POSIX aio)
[04:24:57] <strcat> because... it's only useful for socket servers
[04:25:27] <strcat> linux basically only has non-blocking sockets
[04:25:28] <tautologico_> how do I make rustc print/log debug! messages? -Z debug-info ?
[04:25:43] <strcat> the POSIX AIO implementation in glibc is just done for standards compliance (it makes a thread for each request)
[04:25:50] <jeaye> RUST_LOG
[04:25:55] <strcat> why? because you just write/read from the disk and let the cache deal with it ;p
[04:26:04] <strcat> with an SSD, it's barely different than memory
[04:26:10] <tautologico_> jeaye: RUST_LOG=file ?
[04:26:11] *** Quits: adu (ajr@61210CE3.1C3331CA.DA1C73DD.IP) (Quit: adu)
[04:26:19] <jeaye> tautologico_: s/file/module
[04:26:22] <strcat> just a different (but with a reasonable worst-case, unlike an HDD) latency
[04:26:22] <jeaye> /
[04:26:44] *** Quits: bjz_ (Mibbit@8516E8EB.E5FDABE2.886B98E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:26:53] <jeaye> tautologico_: RUST_LOG=::help (or something like that) will give you a list of the modules.
[04:27:19] <jeaye> tautologico_: You can likely just use RUST_LOG=rustc
[04:27:27] <tautologico_> jeaye: thanks
[04:27:36] <jeaye> cheers
[04:28:22] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[04:29:13] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[04:29:42] *** Joins: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net)
[04:30:03] <strcat> pcmattman: I expect non-blocking I/O to be obsolete in a few years ;p
[04:30:23] <pcmattman> strcat: hmm, I don't but fair enough :)
[04:30:27] *** McPherrin is now known as mm
[04:30:40] <strcat> pcmattman: 1 thread per client is perfectly viable on 64-bit linux
[04:30:54] <strcat> sure, it's not as good atm, but it will get there
[04:31:39] <strcat> you have ~8K memory per socket, but that's not very much considering that memory will keep expanding
[04:32:23] <pcmattman> OSX is 64-bit and still has a hard thread limit of 2048 threads per process
[04:32:32] <strcat> no one runs servers on OS X ;p
[04:32:40] * pcmattman has hit that doing thread-per-client
[04:32:58] <strcat> pcmattman: but you'd even be fine with linux in a VM on OS X :P
[04:32:58] <Luqman> pcmattman: os x's limits are too low :(
[04:33:08] <pcmattman> oh yeah, the limits are silly
[04:33:13] <strcat> pcmattman: anyway, multiprocessing is fine too...
[04:33:45] <pcmattman> yeah, multiprocessing is (imo) a better option than 1:1 thread:client
[04:33:58] <strcat> pcmattman: you can do both
[04:34:05] <pcmattman> unless somebody figures out how to make threads and signals play nice
[04:34:09] <strcat> linux allows multiple processes to bind the same port finally
[04:34:19] <strcat> pcmattman: signals are pretty useless ;p
[04:34:21] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:34:27] <strcat> should just use pipes or domain sockets
[04:34:42] <pcmattman> strcat: sure, but when they hit your 1:1 thread:client application, that's a big deal
[04:34:51] <strcat> pcmattman: you can ignore signals
[04:35:01] <strcat> the modern way to deal with signals is to mask them ;p
[04:35:02] * pcmattman would rather not ignore SIGSEGV
[04:35:09] <strcat> pcmattman: you have to die then anyway
[04:35:15] <pcmattman> (perhaps caused by a bad plugin)
[04:35:28] <pcmattman> sure, but if I'm using multiple processes, one client goes down, not every single connected one
[04:35:30] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Ping timeout)
[04:35:43] *** Joins: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP)
[04:35:58] *** Joins: skeet70 (skeet70@moz-697F48F2.bzm-mt.client.bresnan.net)
[04:36:07] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:36:21] <strcat> pcmattman: *shrug*, doesn't seem like an issue for rust
[04:36:24] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[04:36:31] <pcmattman> but that's a separate issue to non-blocking I/O anyway
[04:36:50] <pcmattman> and yes, that is true
[04:36:54] <strcat> pcmattman: does OS X have SO_REUSEPORT?
[04:36:59] <pcmattman> yup
[04:37:13] <strcat> you could easily use a mix of processes/threads as a workaround ;p
[04:37:19] <pcmattman> had so well before linux
[04:37:22] * strcat is glad linux finally got it
[04:37:27] <strcat> pcmattman: yeah freebsd had it for ages
[04:37:44] <pcmattman> there's certainly ways to mitigate the issue
[04:37:48] <strcat> it's just not how linux servers are written atm, but it will be nice in the future
[04:37:55] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[04:37:55] *** ChanServ sets mode: +ao dherman dherman
[04:38:09] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Ping timeout)
[04:38:20] <strcat> epoll is a necessary evil for now ;p
[04:38:50] *** Joins: bynaryshef (bynaryshef@moz-7B18684.mem.bellsouth.net)
[04:39:15] <pcmattman> indeed
[04:40:52] <strcat> rust can have threads without data races, so the ease of programming is definitely on the thread side of the ring
[04:41:16] <pcmattman> indeed, writing a server in rust seems to be a lot simpler
[04:43:06] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Quit: Leaving)
[04:46:24] *** Joins: eddyb (eddy@2C8F2179.17CB6122.FCAAE698.IP)
[04:47:16] *** Joins: eddyb9 (eddy@2C8F2179.17CB6122.FCAAE698.IP)
[04:50:21] *** Quits: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net) (Quit: jeffdb_)
[04:51:10] <strcat> pcmattman: the other pthread types look 'fun' to bind
[04:51:29] <strcat> yay unions everywhere? ;p
[04:52:24] <pcmattman> strcat: the fun of an opaque type :)
[04:52:31] <strcat> they aren't really opaque
[04:52:41] <strcat> FILE is really opaque
[04:53:17] <sfackler> jdavis: I actually have no idea why I had separate ToSql implementations for ~str and &str and ~[u8] and &[u8]. I just removed the ~ ones
[04:54:00] <strcat> pcmattman: maybe I should just make locks myself with atomics anyway...
[04:54:57] <strcat> but... futex!
[04:55:00] <pcmattman> strcat: well, true, but they're defined as opaque types in the spec
[04:55:13] <pcmattman> and locks with atomics as in pthread_mutex_* etc?
[04:55:40] *** Joins: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP)
[04:56:08] <strcat> pcmattman: well, some use cases of locks can be replaced, at least the ones I've had so far
[04:56:36] <strcat> I had the POSIX APIs :(
[04:56:40] <pcmattman> (the problem with pure userspace impls of mutexes and such that I find is that you really want to suspend a thread until another thread unlocks the lock, and that's not trivial to do)
[04:56:40] <strcat> they seem to all just call futex anyway
[04:57:00] <pcmattman> right
[04:57:09] <strcat> pcmattman: keep calling sched_yield and hope for the best? ;p
[04:57:13] <pcmattman> eww :)
[04:57:31] <strcat> but yeah, having access to the fast locking is important
[04:57:35] <strcat> it's just.... POSIX sucks
[04:57:52] <pcmattman> but yes, that is a solution that is viable if you want to be completely syscall-free
[04:57:56] <pcmattman> err
[04:58:00] <pcmattman> almost syscall-free
[04:58:03] <strcat> pcmattman: http://stackoverflow.com/questions/5167604/what-is-the-pthread-rwlock-behaviour-in-these-circumstances :(
[04:58:36] <pcmattman> hurrah starvation
[04:59:07] <pcmattman> (solveable by blocking readers entering if a writer is waiting)
[04:59:19] <pcmattman> isn't posix fun!?
[04:59:36] <strcat> heh
[04:59:41] <strcat> pcmattman: I really despite the POSIX APIs
[04:59:49] <strcat> they don't specify enough
[05:00:08] * pcmattman wrote/is writing a POSIX subsystem, of this I am very aware
[05:00:11] <strcat> lets make it so that every single function can return an error, but not really specify which errors
[05:00:22] <strcat> or how they can be handled
[05:00:36] <strcat> pcmattman: the C standard is worse though...
[05:00:42] <pcmattman> mm
[05:00:55] <strcat> pcmattman: have you looked at C11 threads? they defined them in a way where you can have a compliant implementation without shared memory
[05:01:03] <eevee> wasn't this written back in the day of abort, retry, fail
[05:01:26] <pcmattman> I would probably be easy to convince to part with money for a posix testsuite that didn't depend on all of POSIX (ie, would only test what's present and available)
[05:01:33] <strcat> eevee: POSIX is very.... thorough in working for almost any use case
[05:02:06] <strcat> they like underspecification ;p
[05:02:59] <strcat> pcmattman: my life would be easy if I could just call futex directly and call it done
[05:03:09] *** Joins: enix_ (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[05:03:18] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Connection reset by peer)
[05:03:19] <strcat> it's so beautiful after looking at these POSIX things
[05:03:31] <pcmattman> mm
[05:03:59] *** Quits: willingc (willingc@moz-30CDDE76.mycingular.net) (Client exited)
[05:04:20] *** Joins: willingc (willingc@moz-30CDDE76.mycingular.net)
[05:04:39] *** Quits: bynaryshef (bynaryshef@moz-7B18684.mem.bellsouth.net) (Quit: Leaving)
[05:05:16] <strcat> it seems that with LLVM's atomic support you could use futex without any platform dependent asm...
[05:05:29] * strcat would probably get it wrong anyway
[05:05:46] *** Joins: pcwalton (pcwalton@moz-5B4F0F15.dsl.dynamic.sonic.net)
[05:05:46] *** ChanServ sets mode: +ao pcwalton pcwalton
[05:05:52] *** Quits: pcwalton (pcwalton@moz-5B4F0F15.dsl.dynamic.sonic.net) (Quit: pcwalton)
[05:06:06] *** Quits: willingc (willingc@moz-30CDDE76.mycingular.net) (Ping timeout)
[05:06:37] <mm> pcmattman
[05:07:26] *** Quits: sigma (sigma@moz-3ED0C66E.range86-143.btcentralplus.com) (Ping timeout)
[05:09:16] *** Joins: niti (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net)
[05:11:07] *** Joins: sigma (sigma@moz-1945A3E5.range86-130.btcentralplus.com)
[05:12:25] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[05:17:08] *** Quits: eddyb9 (eddy@2C8F2179.17CB6122.FCAAE698.IP) (Ping timeout)
[05:22:54] *** Joins: alonlevy (alon@moz-B0E66DB7.static.bezeqint.net)
[05:23:22] *** Quits: enix_ (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:25:14] <jyyou> i fixed the union alignment issue of bindgen
[05:25:19] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[05:26:26] <strcat> jyyou: by using multiples of u16/u32/u64?
[05:27:24] <jyyou> strcat: use the max aligned type with some paddings
[05:33:45] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[05:33:54] *** Quits: skeet70 (skeet70@moz-697F48F2.bzm-mt.client.bresnan.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:35:10] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:35:55] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[05:35:59] *** Quits: notmatt (notmatt@moz-152F21B7.vc.shawcable.net) (Client exited)
[05:36:42] *** Joins: geoffhill (geoffhill@moz-32C21DC2.amazon.com)
[05:36:51] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[05:37:09] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[05:38:56] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Ping timeout)
[05:40:24] *** Quits: canhtak (canhtak@moz-24F61E55.wl.t.ulaval.ca) (Quit: canhtak)
[05:43:55] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:44:59] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[05:44:59] *** ChanServ sets mode: +ao dherman dherman
[05:47:37] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[05:49:54] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[05:51:54] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[05:51:56] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[05:53:02] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[05:54:06] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[05:54:21] <Heather> Is rust really better than c++ . . .
[05:55:25] *** Joins: skade (skade@moz-A89F791B.pools.arcor-ip.net)
[05:57:11] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[05:58:01] *** Joins: melo (Mibbit@moz-4338B73E.lightspeed.sntcca.sbcglobal.net)
[05:58:27] *** Quits: melo (Mibbit@moz-4338B73E.lightspeed.sntcca.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:58:44] *** Quits: Jesin (Jessin_@moz-25306B28.cc.lehigh.edu) (Ping timeout)
[06:00:12] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[06:00:24] *** Joins: z0w0 (zack@moz-238C2341.lnse3.cha.bigpond.net.au)
[06:01:56] <doomlord_> "Is rust really better than c++ . . "  << highly subjective :)
[06:02:40] *** Quits: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net) (Quit: Leaving)
[06:03:00] <Heather> doomlord_ yes I know :S
[06:04:09] <doomlord_> its much less mature of course. it certainly fixes key gripes i have with C++ (the way header files & classes interact), its got stronger compile-time checks for correct code,  but i miss overloading
[06:04:30] <Heather> doomlord_ key gripes?
[06:05:14] <doomlord_> my biggest gripe with C++ is: the way classes and header files interact. you have to put too much information in the headers,
[06:05:36] <doomlord_> .. and classes encourage coupling if you want to use a.foo(b) syntax .. you have to mix methods and functions to avoid that
[06:06:36] *** Joins: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP)
[06:06:46] <Heather> doomlord_ well that's not that big problem
[06:07:06] <doomlord_> it caused absolute hell on projects i've worked on
[06:07:12] *** Quits: josh (josh@moz-E6247462.meeting.ietf.org) (Quit: josh)
[06:07:40] *** Quits: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[06:07:47] *** Joins: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP)
[06:08:15] <Heather> doomlord_ by the way can I do manual garbage collection in rust?
[06:09:07] <doomlord_> "manual garbage collection" ... rust has similar deterministic memory management to C++ raii .. equivalent of unique_ptr and vector<T> are built into the language
[06:09:39] <strcat> it has destructors, there's not really anything special about ~T and ~[T]
[06:09:49] <strcat> the semantics are the same as other types with destructors
[06:10:12] <Heather> I see
[06:12:27] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[06:14:13] *** Quits: niti (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net) (Client exited)
[06:14:33] *** Joins: niti (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net)
[06:15:11] *** Quits: victorporof_ (victorporo@5F4BA45F.4C68CD1.3EA6AAD8.IP) (Quit: victorporof_)
[06:16:15] *** Quits: niti (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net) (Ping timeout)
[06:16:31] *** Joins: Jesin (Jessin_@moz-25306B28.cc.lehigh.edu)
[06:17:28] <ChrisMorgan> doomlord_: you miss overloading? My feeling has been that overloading by trait implementation is a much *better* way than the C++ style of overloading.
[06:18:03] <Yurume> ChrisMorgan, doomlord_ probably meant the multiple dispatch.
[06:18:18] <Yurume> multiple dispatch on a single method name*
[06:18:25] <doomlord_> just personal preference.. i've used it for so long, thats how i think- and certainly the multiply dispatch
[06:18:50] <doomlord_> i know its a double edge sword and some consider it a bug, not a feature :)
[06:19:23] * ChrisMorgan isn't certain what's being meant here
[06:20:22] <doomlord_> in c++ you can overload functions or methods based on any of the arguments, not just the receiver; also you dont need a trait;
[06:21:03] <Yurume> ChrisMorgan, overloading by trait implementation can replace some multiple dispatch, as in: fn double(x:int) {x*2} fn double(x:f32) {x*2.0f32} -> trait Double{fn double(&self);} impl Double for int{fn double(&self){*self*2}} impl Double for f32{fn double(&self){*self*2.0f32}}
[06:21:12] <doomlord_> i know the tradeoff.. traits have the benefit of making generic code more manageable .. better errors
[06:21:21] <strcat> ad-hoc function/method overloading is just a way to save naming stuff, it wouldn't make code more generic for rust
[06:21:48] <strcat> just lets the creator of the API have methods/functions that *do different things* with *the same name*
[06:22:08] <Yurume> but not trivial for some cases: fn pow(x:int, y:int); fn pow(x:f32, y:f32); fn pow(x:f32, y:int);
[06:22:13] <ChrisMorgan> ... which may well not be a good idea.
[06:22:22] <strcat> http://en.cppreference.com/w/cpp/container/vector/vector I'm not sure how anyone would ever remember all these overloads
[06:22:24] *** Parts: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) ()
[06:22:31] <Yurume> and impossible for other cases: fn pow(x:int, y:int, modulo:int); etc.
[06:22:42] <strcat> + it uses enable_if to set the priority for initializer lists higher than normal constructors
[06:23:00] <ChrisMorgan> Yurume: trait Pow<T1, T2, T3> { fn pow(x: T1, y: T2) -> T3 }
[06:23:37] <ChrisMorgan> (Well, you'd probably want a Self in there somewhere, so you can use it.)
[06:23:57] <Yurume> ChrisMorgan, well, Rust does not have an implicit conversion between numbers so it is not quite complicated actually, but in C++ not trivial.
[06:24:27] <Yurume> (my original intention was that a "specialization" of multiple dispatch is harder to replace with traits)
[06:24:31] * strcat really hopes #[thread_local] will work
[06:24:33] <ChrisMorgan> Yurume: I've found generic number things to need quite a bit of wrapping in cast().
[06:24:38] <strcat> can remove a nice chunk of the runtime
[06:24:52] <strcat> ChrisMorgan: they do in C++ too, it doesn't have generic literals
[06:24:53] <Yurume> strcat, in static mut?
[06:25:03] <strcat> Yurume: yes, #[thread_local] static mut: int = 5;
[06:25:12] <strcat> it doesn't make it safe, but it does make it thread-local ;p
[06:25:16] <strcat> it was 1 line of code
[06:25:20] <strcat> LLVM has it as a feature
[06:25:27] <strcat> lets just hope it works on windows
[06:26:05] * strcat is testing it for replacing rust's low-level TLS support atm
[06:26:55] <Yurume> ChrisMorgan, anyway, a good use case of multiple dispatch that cannot be replaced with traits is a reuse of names.
[06:27:24] <strcat> reusing names is a silly way of making an API hard to learn ;p
[06:27:35] <Yurume> in some C++ coding conventions it is used as a getter/setter idiom...
[06:28:21] <Yurume> strcat, I only partially agree on that, Objective-C had a different take on that and IMHO it was terrible
[06:28:42] *** Quits: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP) (Connection reset by peer)
[06:28:44] *** Joins: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP)
[06:28:44] <strcat> Yurume: I'm not saying to put the type names in the function name like ObjC
[06:29:56] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:30:12] <ChrisMorgan> Qt's getter and setter, foo() being a getter and foo(Foo) being a setter, works well. But how about if it had something like Python/C# properties instead?
[06:30:22] <Yurume> it didn't put type names to the function name, it put argument names (if you can say that) to the function name.
[06:30:32] <strcat> Yurume: well, that too
[06:30:33] * ChrisMorgan has seen a little Objective-C and it looks awful to write in
[06:31:01] <strcat> C has a nice way of covering most common cases - flag types
[06:31:03] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[06:31:06] <Yurume> ChrisMorgan, yes, property is better than getter/setter, but at least it can emulate that
[06:31:16] <strcat> using a slice of options covers almost all the rest of the usual cases
[06:31:47] *** Joins: niti (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net)
[06:32:12] * ChrisMorgan wants Rust to have something like C# properties
[06:32:26] <Amaranth> glVertex3fv and friends can get annoying, while we're on the overloading point
[06:33:01] <Yurume> let me quote a practical example: blitting one texture to other texture. you have two arguments for textures (mandatory) and two arguments for source/destination rectangles (optional).
[06:33:25] <Yurume> in many cases two rectangles have the same dimension only with a differing offset.
[06:33:35] *** kimundi is now known as zz_kimundi
[06:33:51] <Yurume> in some cases both rectangles are assumed to have the same size as the texture's intrinsic dimension.
[06:34:13] <Yurume> how many similar-looking functions with related names are required in this case?
[06:34:30] <doomlord_> IMO its often obvius what should happen looking at the arguments  - overloading is preferable to naming lots of variants
[06:34:32] <Amaranth> On the other hand have 25 glVertex* methods means you can't accidentally use the wrong one
[06:34:54] <strcat> Yurume: just use Option?
[06:34:57] <Yurume> glVertex* is another story, the main source of such verbosity is a lack of traits in C ;)
[06:35:28] <Yurume> strcat, four Option may work, quite hairy though
[06:35:33] <Yurume> four `Option`s*
[06:35:50] <strcat> I thought 2 were mandatory
[06:36:19] <Yurume> rectangles have a left-top offset and size, and sizes can be often inferred
[06:36:29] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:36:29] <Yurume> so two offsets and two sizes.
[06:37:02] <strcat> I don't really understand how C++ overloading would fix this, because you are only going to be able to drop parameters off the end? without ending up in ambiguous land
[06:37:54] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[06:38:02] <Yurume> I think offsets and sizes can be made into different types, so making things unambiguous. 
[06:38:10] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:38:13] <doomlord_> +1
[06:38:21] <Yurume> (this approach was actually what I have done in Rust, via hairy traits...)
[06:39:38] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Ping timeout)
[06:39:50] *** Quits: dew1 (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[06:40:01] *** Quits: eevee (eevee@moz-7B6C48E3.evrt.wa.frontiernet.net) (Ping timeout)
[06:40:51] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[06:41:31] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[06:42:12] *** Quits: niti (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net) (Quit: )
[06:47:16] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: ZZZzzz…)
[06:48:32] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[06:48:43] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[06:49:40] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[06:50:25] <ChrisMorgan> Why do CFG_SRC_DIR include a trailing slash (by definition), and then we get ${CFG_SRC_DIR}/... used all over the place? (End result, double slash.)
[06:51:12] <Yurume> aren't double slashes silently converted to a single slash in most cases? (not quite in Windows)
[06:51:25] <strcat> ChrisMorgan: well, we'd need someone willing to go through that Makefile gobbledygook to fix it
[06:51:42] <ChrisMorgan> Yurume: it makes for ugly output, though.
[06:51:47] <ChrisMorgan> strcat: OK, I'll do it.
[06:52:26] * ChrisMorgan dislikes the Makefile system's magickness, only loading files it detects it needs based on the commands the user has specified, with the result that tab completion doesn't work
[06:52:34] <strcat> Yurume: POSIX apparently allows treating 2 slashes at the start in an 'implementation defined manner'
[06:52:38] <strcat> but linux doesn't do that ;p
[06:52:58] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[06:53:00] <ChrisMorgan> strcat: this is /foo/bar/rust//src/...
[06:53:07] <strcat> ChrisMorgan: yeah, I know
[06:53:13] <strcat> I see it in the logs from my nightly pkg build ;p
[06:53:24] <ChrisMorgan> Hey! I could probably fix completion, I think an environment variable is set while it's calling it for completion...
[06:53:38] *** Quits: alonlevy (alon@moz-B0E66DB7.static.bezeqint.net) (Ping timeout)
[06:53:49] <Yurume> strcat, ha, really? I knew Windows does distinguish starting double slashes, but I didn't know POSIX does the same thing
[06:53:50] * ChrisMorgan now wants to fix those two things, but must do some other things away from his computer first
[06:54:14] <Yurume> (and then we have \\?\ business...)
[06:54:27] <strcat> ChrisMorgan: http://sprunge.us/ZOYK it's kind of funny because progress bars get mangled ;p
[06:54:43] <ChrisMorgan> Yurume: and \\.\, also
[06:54:51] <Yurume> aargh!
[06:55:29] <ChrisMorgan> strcat: ah, everyone's favourite \r trick gone wrong :-)
[06:55:58] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[06:58:24] *** Quits: geoffhill (geoffhill@moz-32C21DC2.amazon.com) (Ping timeout)
[07:00:03] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: ZZZzzz…)
[07:02:04] *** Quits: tautologico (lymph@703660AA.CFE755C8.C27E1635.IP) (Quit: tautologico)
[07:02:05] *** tautologico_ is now known as tautologico
[07:02:17] *** Quits: tautologico (shung@703660AA.CFE755C8.C27E1635.IP) (Quit: tautologico)
[07:03:02] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[07:03:15] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[07:03:41] *** Joins: eevee (eevee@moz-7B6C48E3.evrt.wa.frontiernet.net)
[07:13:10] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[07:13:13] <ChrisMorgan> How should I get a slice of a certain element in a ~[~str]?
[07:13:45] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[07:14:08] <dbaupp> ChrisMorgan: foo[idx].as_slice() if coercion doesn't work
[07:14:09] <dbaupp> ?
[07:14:56] <ChrisMorgan> OK, so why does that work? Why is that not a partially moved value?
[07:15:11] *** Joins: ilyoan (ilyoan@B4104EBB.3CC170B1.1E14B209.IP)
[07:15:43] *** Quits: ilyoan (ilyoan@B4104EBB.3CC170B1.1E14B209.IP) (Quit: leaving)
[07:15:54] <dbaupp> because it's effectively `let tmp = &foo[idx]; tmp.as_slice()`, since .as_slice takes &self.
[07:15:56] <Yurume> ChrisMorgan, since as_slice has &self argument?
[07:15:58] *** Joins: ilyoan (ilyoan@B4104EBB.3CC170B1.1E14B209.IP)
[07:16:00] <Yurume> yeah
[07:16:17] <Yurume> if you write let x = foo[idx]; then it would be certainly moved
[07:16:18] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[07:16:29] <ChrisMorgan> Ah. So that's the value of using the value as an immediate rather than assigning it.
[07:17:05] <dbaupp> or take a reference if you want to use it a few times
[07:17:21] *** Quits: skade (skade@moz-A89F791B.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:17:26] <Yurume> A.f() is not quite same as A with respect to movement, A+1 either (since it's A.add(&1)).
[07:17:58] <ChrisMorgan> The result there being that the behaviour of &foo[idx] is quite different from foo[idx].
[07:18:24] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[07:18:37] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[07:19:46] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[07:24:59] *** Quits: cubic (cubic@moz-80241A3A.mc.videotron.ca) (Quit: Leaving)
[07:26:34] *** Joins: fabiand (fabiand@moz-4319220B.adsl.alicedsl.de)
[07:27:34] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[07:27:37] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[07:29:26] *** Joins: pyrac (pyrac@moz-8A554332.math.u-bordeaux1.fr)
[07:30:08] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[07:30:09] *** Joins: dew1 (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[07:31:57] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[07:37:17] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:38:39] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[07:39:01] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[07:40:27] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Ping timeout)
[07:41:01] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:41:56] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[07:42:35] *** Joins: ptrr (ptrr@48799E9.1D1EB2D6.85889BB1.IP)
[07:43:18] *** Joins: skade (skade@moz-A89F791B.pools.arcor-ip.net)
[07:45:08] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[07:45:41] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[07:47:25] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[07:50:03] *** Quits: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP) (Quit: Leaving.)
[07:51:23] *** Joins: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP)
[07:51:38] *** Joins: ofeldt- (ofeldt@moz-A6B50DE0.dip0.t-ipconnect.de)
[07:52:32] *** Quits: ofeldt (ofeldt@moz-1222C781.dip0.t-ipconnect.de) (Ping timeout)
[07:53:10] *** Joins: victorporof (victorporo@7CC1F655.26884B2C.79933D60.IP)
[07:53:51] *** Joins: sweet_kid (Upasana@B60CA501.C5CE8A19.388CF16F.IP)
[07:54:33] *** Quits: dew1 (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[07:55:37] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[07:56:37] *** Quits: pyrac (pyrac@moz-8A554332.math.u-bordeaux1.fr) (Quit: pyrac)
[07:58:12] *** Quits: skade (skade@moz-A89F791B.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:58:26] *** Joins: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP)
[07:58:34] *** Quits: dbaupp (Thunderbir@moz-9879E359.lns20.syd6.internode.on.net) (Ping timeout)
[07:59:45] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[07:59:52] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[08:01:25] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[08:02:09] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[08:02:14] *** Joins: dbaupp (Thunderbir@moz-DDA7CEB8.lns20.syd6.internode.on.net)
[08:02:19] *** Quits: sweet_kid (Upasana@B60CA501.C5CE8A19.388CF16F.IP) (Ping timeout)
[08:02:57] *** Quits: DasIch (dasich@moz-5EDA591.de) (Ping timeout)
[08:08:01] <nuts> Hi,
[08:08:06] <nuts> http://static.rust-lang.org/doc/master/std/rt/io/net/tcp/struct.TcpStream.html
[08:08:18] <nuts> TcpStream implements all methods from Reader?
[08:08:35] <nuts> I've this error:  error: type `std::rt::io::net::tcp::TcpStream` does not implement any method in scope named `read_byte`
[08:10:00] <cmr> nuts: `use std::rt::io::Reader`
[08:10:02] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[08:10:04] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[08:10:22] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[08:10:30] <cmr> actually wait thsoe should be in the prelude now
[08:10:33] <ChrisMorgan> nuts: a trait must be in scope for you to be able to call methods on it.
[08:10:38] <ChrisMorgan> cmr: they're not
[08:10:55] <cmr> ChrisMorgan: http://static.rust-lang.org/doc/master/std/prelude/index.html says otherwise!
[08:10:57] <ChrisMorgan> Or weren't a couple of days ago, anyway.
[08:11:16] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[08:11:18] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[08:11:25] * ChrisMorgan should get round to sending that post to the mailing list asking people to update the syntax files when they change the prelude
[08:12:00] <ChrisMorgan> std::rt::io needs to start being split away from std::rt (where appropriate).
[08:12:35] <nuts> cmr: std::rt::io::Reader is a trait, so I can't use it directly, no?
[08:12:55] <cmr> nuts: you can import traits like you would import anything else.
[08:15:09] *** Joins: ozten (ozten@moz-BC0C74E2.range86-174.btcentralplus.com)
[08:17:04] <nuts> Hum ok, so If I've a TcpStream, how I can use directly his Reader?the documention doen't explain that
[08:17:48] <cmr> nuts: you call the methods like read() directly, it implements the trait so it has those methods.
[08:18:19] <nuts> ok
[08:18:38] <nuts> and where I can get a list of method implemented?
[08:18:47] <cmr> they're all on http://static.rust-lang.org/doc/master/std/rt/io/net/tcp/struct.TcpStream.html
[08:19:48] *** Quits: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP) (Input/output error)
[08:20:22] <nuts> Hum, but I already saw this page
[08:20:30] <nuts> For an example
[08:20:39] <utkarsh> how do I pass "r+" as the second param to fdopen? http://static.rust-lang.org/doc/master/std/libc/funcs/posix88/stdio/ffi.fdopen.html <-
[08:20:49] <nuts> I'm looking to use 'fn read_to_end(&mut self) -> ~[u8]"
[08:20:58] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[08:21:07] <nuts> And rustc sayd to me: error: type `std::rt::io::net::tcp::TcpStream` does not implement any method in scope named `read_to_end`
[08:21:07] <utkarsh> it needs a *c_char
[08:21:29] <cmr> utkarsh: you can use with_c_str, http://static.rust-lang.org/doc/master/std/c_str/trait.ToCStr.html
[08:21:31] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Ping timeout)
[08:21:49] <cmr> nuts: whatis rustc --version ?
[08:21:51] <Yurume> do "r+".with_c_str |mode| { fdopen(..., mode); }
[08:22:06] <utkarsh> cmr, Yurume, thanks :)
[08:22:08] <nuts> I import std::rt::io::{Writer, Reader, Listener, Acceptor} and other things needed by TcpStream
[08:22:20] <nuts> cmr: rustc 0.8
[08:22:29] <cmr> nuts: That's the problem.
[08:22:36] <cmr> nuts: you're looking at the docs for master, not 0.8
[08:22:41] <nuts> oh
[08:22:45] <cmr> nuts: in 0.8 those methods were on ReaderUtil
[08:23:04] *** pmoore|away is now known as pmoore
[08:23:32] <nuts> cmr: oki, thanks
[08:23:44] *** Joins: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP)
[08:23:54] <nuts> my bad
[08:24:30] <nuts> cmr: I use ReaderUtil, and that works fine now
[08:24:58] <nuts> cmr: but you think, it's better to use rust from the master or rust 0.8?
[08:25:05] <strcat> master
[08:25:11] <cmr> How can I implement an iterator which yields a slice to each inner vector here: https://github.com/cmr/linalg/blob/wip/matrix.rs#L16 ? My attempt gives https://gist.github.com/cmr/010606b9b7533fc2df54, which is quite confusing.
[08:25:16] <cmr> nuts: master for sure
[08:25:51] <nuts> this one https://github.com/mozilla/rust ?
[08:25:53] *** Joins: bholley (anonymous@moz-4ECD4F52.wifihubtelecom.net)
[08:25:59] <cmr> yup
[08:27:05] <nuts> thanks
[08:27:30] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[08:27:36] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[08:28:06] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[08:28:33] <Heather> rust 0.8 is another language )
[08:28:46] <Heather> very different one
[08:28:48] <strcat> not really much difference
[08:28:55] <Heather> strcat well...
[08:29:01] <strcat> the rate of change isn't very high anymore, especially at a language level
[08:29:13] <Heather> strcat I was trying to port some old projects, it's really hard for me
[08:29:22] <strcat> are you sure they weren't older than 0.8?
[08:29:34] <Heather> strcat some of them was )
[08:30:11] <Heather> strcat but well I think there are really lots of changes since 0.8 ....
[08:30:25] * strcat can't think of many backwards incompatible language changes since 0.8
[08:30:31] <cmr> lots of library changes, not many language changes
[08:30:57] <cmr> yet, at least.
[08:31:00] <Heather> cmr well but std library is part of language )
[08:31:05] <cmr> Heather: no it isn't.
[08:31:07] <strcat> @/@mut were feature gated
[08:31:18] <strcat> but they can still be used
[08:31:24] <Heather> cmr ok... you win but docs use std
[08:32:00] <strcat> acrichto: fun
[08:32:07] <strcat> acrichto: it made a separate TLS key for the test harness
[08:32:09] <strcat> wtf.
[08:32:14] <strcat> seems to be okay now...
[08:32:34] *** Joins: nkoep (nik@moz-34276308.pool.mediaways.net)
[08:32:36] <strcat> because it compiles the whole crate again :(
[08:32:45] <strcat> so the part it was testing had a different TLS key than the runtime
[08:32:53] <strcat> (the one that was started earlier)
[08:33:53] *** Joins: [squiddy] (squiddy@moz-A806EAE9.adsl.alicedsl.de)
[08:35:01] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Client exited)
[08:35:55] *** Joins: alonlevy (alon@moz-B0E66DB7.static.bezeqint.net)
[08:39:12] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:39:24] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[08:40:58] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:41:05] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Ping timeout)
[08:41:07] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[08:42:34] *** pmoore is now known as pmoore|away
[08:45:22] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:46:29] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[08:47:50] *** Quits: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP) (Ping timeout)
[08:54:08] <dbaupp> cmr: you can't do &'self mut self, because .next doesn't have that in the trait defn
[08:55:31] *** pmoore|away is now known as pmoore
[08:56:25] *** Quits: bholley (anonymous@moz-4ECD4F52.wifihubtelecom.net) (Ping timeout)
[08:56:45] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Ping timeout)
[08:59:59] <cmr> dbaupp: ok, that makes the error make sense.
[09:00:22] <cmr> Doesn't that make it impossible to yield a reference to self, though?
[09:00:27] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[09:01:52] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[09:04:20] <dbaupp> cmr: yeah, something like that.
[09:04:52] <dbaupp> cmr: hm, wait, no. it is possible, e.g. the vector iterators do it.
[09:05:17] <cmr> dbaupp: well they use unsafe ptrs and transmutes, last I looked
[09:05:26] <strcat> cmr: they don't have to
[09:05:29] <strcat> they could use slices
[09:05:55] <strcat> they use unsafe code so they don't have to update the pointer *and* the length with every iteration
[09:10:45] *** Joins: quiggle (Mibbit@moz-E841EA3A.hsd1.wa.comcast.net)
[09:11:18] *** Quits: quiggle (Mibbit@moz-E841EA3A.hsd1.wa.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[09:12:18] *** Quits: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[09:17:35] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[09:19:36] *** Quits: FreeFull (freefull@D89A5B80.2CE4D4F4.159B5998.IP) (Quit: )
[09:20:55] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[09:22:05] *** Quits: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net) (Ping timeout)
[09:22:50] *** Joins: DasIch (dasich@moz-5EDA591.de)
[09:24:20] *** Quits: sigma (sigma@moz-1945A3E5.range86-130.btcentralplus.com) (Client exited)
[09:26:10] *** Joins: xAndy (xandy@moz-215274A4.unity-media.net)
[09:26:25] *** Joins: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net)
[09:26:35] *** Quits: cdidd (cdidd@moz-DCE39D3C.broadband.corbina.ru) (Ping timeout)
[09:28:43] *** Joins: sigma (sigma@moz-1945A3E5.range86-130.btcentralplus.com)
[09:30:39] *** Quits: xAndy (xandy@moz-215274A4.unity-media.net) (Ping timeout)
[09:32:35] *** Joins: arodier74 (Thunderbir@moz-25EB015.in-addr.btopenworld.com)
[09:32:46] *** Quits: arodier74 (Thunderbir@moz-25EB015.in-addr.btopenworld.com) (Quit: arodier74)
[09:34:04] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[09:34:27] *** Joins: arodier74 (Thunderbir@moz-25EB015.in-addr.btopenworld.com)
[09:35:36] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[09:35:46] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[09:38:12] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[09:38:32] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[09:39:06] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Ping timeout)
[09:39:56] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:40:09] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[09:40:18] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[09:41:55] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Ping timeout)
[09:42:28] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:45:45] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[09:47:09] *** Joins: pyrac (pyrac@moz-8A554332.math.u-bordeaux1.fr)
[09:48:13] *** Quits: jgilbert (jgilbert@moz-4C088FCE.hsd1.ca.comcast.net) (Ping timeout)
[09:50:23] <Heather> hi again
[09:50:27] <Heather> how can I write  matches.opt_present("b") || matches.opt_present("branch")
[09:50:42] <Heather> if I have b and branch in &[&str] ?
[09:51:09] <dbaupp> vector.any(|opt| matches.opt_present(*opt))
[09:51:19] <Heather> dbaupp wow...
[09:51:28] <dbaupp> (where vector = ["b", "branch"])
[09:51:39] * dbaupp hasn't tested that
[09:52:42] <Heather> dbaupp I will test
[09:53:13] <Heather> dbaupp error: unresolved name `matches`
[09:54:00] <Yurume> what is matches?
[09:54:30] <Heather> Yurume found it in extra stuff for parsing options
[09:54:48] <Heather> e.g. CLI arguments
[09:55:17] <sigma> Heather: What are you actually trying to do?
[09:55:25] <Heather> ah...
[09:55:26] <Heather> sorry
[09:55:30] <Heather> it's defined by myself
[09:55:56] <Heather> sigma make functions to get option
[09:57:57] *** Quits: [squiddy] (squiddy@moz-A806EAE9.adsl.alicedsl.de) (Quit: Leaving)
[09:58:07] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Quit: Leaving...)
[09:58:18] <dbaupp> Heather: are you using extra::getopts? ( http://static.rust-lang.org/doc/master/extra/getopts/index.html )
[09:59:21] <Heather> dbaupp yes
[09:59:31] <Heather> dbaupp what's matches type
[09:59:48] <dbaupp> Heather: I don't know, how are you creating it? look at the return type of that function?
[10:00:02] <dbaupp> it *should* be http://static.rust-lang.org/doc/master/extra/getopts/struct.Matches.html
[10:00:13] <Heather> dbaupp yes, I see, thanks
[10:00:21] *** Joins: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp)
[10:00:28] *** zz_kimundi is now known as kimundi
[10:00:59] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[10:01:35] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[10:01:47] <Heather> dbaupp  type `&[&str]` does not implement any method in scope named `any` :S
[10:02:06] *** Quits: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[10:02:16] <cmr> Heather: v.iter().any
[10:02:25] <Heather> ah sure, thanks
[10:02:47] <Heather> works
[10:03:04] *** Quits: pyrac (pyrac@moz-8A554332.math.u-bordeaux1.fr) (Quit: pyrac)
[10:07:09] <Heather> dbaupp cmr : any ideas how can I optimize it : https://gist.github.com/Heather/7333700
[10:07:55] <Heather> I think first of all I double check if opt_present :S
[10:08:26] <dbaupp> Heather: compile with --opt-level=3 :P
[10:08:32] <Heather> maybe I just should remove this any.... or there another lazy evalution
[10:08:40] <dbaupp> yes, remove the any
[10:08:44] <dbaupp> just run the for loop
[10:09:08] <Heather> ok...
[10:09:42] <dbaupp> you could even replace the whole function with `opts.iter().filter_map(|opt| matches.opt_str(*opt)).next()`
[10:09:46] <dbaupp> (again untested)
[10:10:03] <Heather> filter_map
[10:10:04] <Heather> wow
[10:10:19] <dbaupp> http://static.rust-lang.org/doc/master/std/iter/trait.Iterator.html#method.filter_map fwiw
[10:10:48] <Heather> dbaupp do you think it will not be removed?
[10:10:57] *** Quits: devbug_ (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[10:10:59] <dbaupp> (that gets the first option for which opt_str return Some(), which isn't quite the same as what you have there; which returns the first option that exists, whether or not it's a string)
[10:11:04] <dbaupp> filter_map won't be removed.
[10:12:12] <Heather> dbaupp but your snippet have no opt_present
[10:12:14] <Heather> check
[10:12:39] <dbaupp> yes, I think .opt_str returns None when the option isn't present.
[10:13:07] <Heather> dbaupp ah then this check even was not needed
[10:13:36] <Heather> or maybe, okay... anyways I will try to stick with filter_map
[10:13:37] *** Joins: andre (andre@CA528A4A.45A4338E.8EE27E6.IP)
[10:13:47] <dbaupp> I'm not 100% sure about that, btw. the documentation isn't clear.
[10:18:34] *** Joins: ircloggr (nodebot@moz-218B8E8E.compute-1.amazonaws.com)
[10:18:47] <Heather> dbaupp but I need to clone matches for it :(
[10:19:34] <Heather> dbaupp let maybe_shade = getOption(matches.clone(), ["s", "shade"]);
[10:21:35] <dbaupp> Heather: pass a reference
[10:21:43] <Heather> dbaupp can't (
[10:21:46] <dbaupp> getOption(&matches, ...)
[10:21:48] *** Joins: pyrac (pyrac@moz-8A554332.math.u-bordeaux1.fr)
[10:22:06] <dbaupp> change the type of getOption to take `matches: &Matches`
[10:22:19] *** Joins: vmx (vmx@moz-9822714B.dip0.t-ipconnect.de)
[10:22:28] <dbaupp> (taking a reference should be the "default", unless you need ownership.)
[10:22:33] *** Joins: cdidd (cdidd@moz-BE01600D.broadband.corbina.ru)
[10:23:04] <Heather> dbaupp Main.rs:53:33: 53:56 error: can only dereference enums with a single variant which has a single argu ment
[10:23:29] <Heather> dbaupp so I can't :(
[10:23:50] *** Joins: moostik (Icedove@moz-3E868786.w90-2.abo.wanadoo.fr)
[10:26:17] <dbaupp> Heather: ... you can, but there is some other problem
[10:26:30] <Heather> dbaupp how?
[10:26:41] <dbaupp> I don't know, you'll have to work out what the error is coming from
[10:26:52] <Heather> :(
[10:26:54] <dbaupp> it's probably `*foo` where foo isn't a pointer
[10:27:00] * dbaupp can't solve all your problems ;)
[10:28:26] *** Quits: vmx (vmx@moz-9822714B.dip0.t-ipconnect.de) (Ping timeout)
[10:29:27] <Heather> dbaupp if I try let maybe_shade = getOption(*matches, ["s", "shade"]);
[10:29:36] <Heather> dbaupp I get can only dereference structs with one anonymous field
[10:29:50] <dbaupp> Heather: that's *de*referencing matches, not passing a reference
[10:29:58] <dbaupp> getOption(&matches, ["s", "shade"])
[10:30:08] *** Joins: vmx (vmx@moz-9822714B.dip0.t-ipconnect.de)
[10:30:41] <Heather> dbaupp oh, right.... thanks
[10:34:58] *** Joins: g3orge (g3orge@moz-CE3A1669.access.hol.gr)
[10:39:17] *** Joins: mib_1id0mn (Mibbit@16DDE091.711498CD.A80CE0F9.IP)
[10:40:23] *** Quits: mib_1id0mn (Mibbit@16DDE091.711498CD.A80CE0F9.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:40:58] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[10:42:33] *** Quits: pyrac (pyrac@moz-8A554332.math.u-bordeaux1.fr) (Ping timeout)
[10:42:39] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Ping timeout)
[10:42:41] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:44:21] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:46:35] *** Quits: cdidd (cdidd@moz-BE01600D.broadband.corbina.ru) (Ping timeout)
[10:47:31] *** Quits: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net) (Ping timeout)
[10:50:24] *** Joins: hhhhhhhhhh (mike@moz-D7871636.stcatz.ox.ac.uk)
[10:51:34] *** Quits: Voomer (Voomer@moz-CC05FF5E.hsd1.wa.comcast.net) (Ping timeout)
[10:51:48] <hhhhhhhhhh> when i try to compile glfw-rs i get http://ix.io/8Vn. i'm running 0.8 and this is a fresh clone
[10:51:55] <hhhhhhhhhh> what am i missing
[10:52:54] *** Joins: Voomer (Voomer@moz-CC05FF5E.hsd1.wa.comcast.net)
[10:53:28] *** Joins: Voomer_ (Voomer@moz-CC05FF5E.hsd1.wa.comcast.net)
[10:53:45] <cmr> hhhhhhhhhh: the fact that glfw-rs master doesn't support rust 0.8
[10:54:14] <hhhhhhhhhh> cmr that would do it. thanks
[10:54:45] *** Quits: Voomer (Voomer@moz-CC05FF5E.hsd1.wa.comcast.net) (Ping timeout)
[10:55:31] * dbaupp is slightly surprised that the syntax hasn't changed enough since 0.8 to stop it parsing.
[10:56:04] <cmr> dbaupp: I found an example on an issue from 4 months ago that still compiled!
[10:56:52] <dbaupp> cmr: that can't possibly be true :P
[10:57:50] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[10:58:00] *** kimundi is now known as zz_kimundi
[10:58:05] * dbaupp goes and renames `fn` to `fun` and `unsafe fn` to `sad` to fix the "old programs still compiling" bug
[10:58:15] <Heather> dbaupp cmr can I do multiline println?
[10:58:21] <cmr> dbaupp: https://github.com/mozilla/rust/issues/7713 :P
[10:58:26] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[10:58:31] <cmr> Heather: sure, just add newlines to the string
[10:58:54] <Heather> cmr I mean in code
[10:59:22] <Heather> cmr and without \ ....
[10:59:26] <dbaupp> Heather: println("foo\nbar");
[10:59:38] <cmr> Heather: so you want to add newlines without adding newlines? :S
[10:59:42] <dbaupp> where \n is either the characters \ and n, or an actual newline
[10:59:50] <Heather> dbaupp yes
[11:00:01] <pcmattman> println("foo
[11:00:05] <pcmattman> bar");
[11:00:14] <Heather> pcmattman will it work ?
[11:00:34] * pcmattman hopes not, \n aversion is probably not healthy
[11:00:36] <dbaupp> Heather: he would not have said it if it didn't work.
[11:00:43] <dbaupp> (as in, yes, it works.)
[11:00:48] <pcmattman> (but yes, it does)
[11:00:57] *** Joins: fyolnish (fyolnish@moz-CB01345A.uqwimax.jp)
[11:01:10] *** Joins: cdidd (cdidd@moz-E44E96DC.broadband.corbina.ru)
[11:01:11] <pcmattman> (use "foo \..." to do a join, IIRC)
[11:01:34] <pcmattman> IRC is a horrible medium to explain anything involving more than one line
[11:01:36] <dbaupp> cmr: oh, that clearly only still compiles because *I* wrote it :P
[11:02:16] <dbaupp> cmr: also, the mention of `fmt!` doesn't compile any more :P
[11:02:41] *** Quits: fyolnish (fyolnish@moz-CB01345A.uqwimax.jp) (Ping timeout)
[11:03:09] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (No route to host)
[11:03:29] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[11:04:04] <Heather> pcmattman dbaupp yes it works, I wonder that it works also )
[11:06:43] <Heather> dbaupp I don't spam println anymore \o/ https://github.com/Heather/Mirana/blob/master/src/Main.rs
[11:07:04] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[11:07:59] <Yurume> Heather, woah, what's that?
[11:08:31] <Yurume> is it a mr replacement?
[11:09:02] *** Joins: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net)
[11:09:19] *** Joins: fyolnish (fyolnish@moz-CB01345A.uqwimax.jp)
[11:11:29] <Heather> mr?
[11:12:19] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[11:12:43] <dbaupp> Heather: cool :)
[11:13:04] <dbaupp> Heather: wait... what about https://github.com/Heather/Mirana/blob/master/src/Main.rs#L270-L274 ? :P
[11:14:13] <Heather> dbaupp yep )
[11:14:23] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[11:14:40] *** Quits: fyolnish (fyolnish@moz-CB01345A.uqwimax.jp) (Client exited)
[11:17:18] *** Joins: fyolnish (fyolnish@moz-CB01345A.uqwimax.jp)
[11:18:15] <Heather> dbaupp fixed
[11:18:42] *** Quits: fyolnish (fyolnish@moz-CB01345A.uqwimax.jp) (Client exited)
[11:21:57] *** Joins: q66__ (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[11:22:03] <Heather> Yurume so what's mr?
[11:22:56] *** Quits: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[11:24:50] *** Joins: Sorella (quildreen@2392D500.600E39D3.1ED99692.IP)
[11:25:10] *** Joins: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP)
[11:26:14] *** Quits: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net) (Ping timeout)
[11:27:14] *** Joins: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP)
[11:29:15] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[11:30:41] <Heather> dbaupp cmr there must be some nosql db in rust...
[11:31:01] <Heather> this or we're not hipsters...
[11:32:16] <Heather> like this http://influxdb.org/ )
[11:34:03] <dbaupp> Heather: hahaha, you mean written in Rust?
[11:38:34] *** Joins: canhtak (canhtak@moz-24F61E55.wl.t.ulaval.ca)
[11:39:52] <Heather> dbaupp yea, every hipster language should have hipster db )
[11:40:17] <Yurume> Heather, http://myrepos.branchable.com/
[11:40:20] <Yurume> (sorry for late reply)
[11:40:38] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[11:41:06] <Heather> Yurume he stealed my idea
[11:41:12] <Heather> Yurume really
[11:41:42] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[11:42:17] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[11:42:17] <Heather> Yurume look https://github.com/Heather/sync/commit/cba6d7dcee881648e0daf18780cb913237798cb5 I've created idea year ago
[11:43:22] <dbaupp> Heather: it's fine, yours is written in Rust \o/
[11:43:24] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Ping timeout)
[11:43:44] <Heather> dbaupp well rust one is just rust version of python one XD
[11:43:48] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[11:43:59] <Heather> dbaupp but it's already better >_<
[11:44:06] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:44:10] *** Quits: hhhhhhhhhh (mike@moz-D7871636.stcatz.ox.ac.uk) (Quit: WeeChat 0.4.2)
[11:44:19] <dbaupp> Heather: also, joeyh started mr 6 years ago https://github.com/joeyh/myrepos/commit/4cda4e5c360d4cd0cd33ef8b3bd2cd55eb50b583 :P
[11:44:43] <Heather> dbaupp damn...
[11:45:33] <Heather> perl...
[11:45:49] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:46:47] <Heather> dbaupp anyways ideas are different...
[11:47:27] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[11:47:46] <dbaupp> Heather: and your one is yours, so you have it tuned exactly how you want it :)
[11:48:18] <Heather> dbaupp ))) and now I think I will steal his idea %D
[11:49:08] <Heather> dbaupp some of them
[11:49:27] <Heather> dbaupp I think mirana is to long name for tool....
[11:49:45] <Heather> dbaupp what do you think... ? should I rename it to something alike potm?
[11:50:20] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[11:50:35] <Heather> dbaupp or maybe just "m"
[11:51:03] <dbaupp> Heather: call it ' ' (i.e. a single space :P )
[11:51:20] <dbaupp> (because it's the biggest key on the keyboard.)
[11:51:20] <Heather> dbaupp windows will not allow me to
[11:51:26] <dbaupp> haha drat!
[11:51:42] <Heather> dbaupp drat?
[11:52:19] <dbaupp> Heather: == "damn", that windows doesn't let it be called space.
[11:52:38] <Heather> dbaupp ))
[11:53:23] <Heather> dbaupp I'm not sure if it even possible in linux, I doubt
[11:55:06] <Boreeas> Do I understand that right, 'mut x = @[]' means that I can assign other stuff to x, and 'x = @mut []' means that I can push elements to x, but not assign something different to x?
[11:55:37] <Heather> :S
[11:56:08] <Heather> Boreeas I doubt...
[11:56:13] <dbaupp> Heather: I just checked, and calling an executable space works fine
[11:56:20] <dbaupp> $ ./\    => hello world
[11:56:27] <Heather> dbaupp )
[11:56:39] <dbaupp> (' ' has `echo hello world` in it)
[11:56:46] <Heather> dbaupp but how people will spell it? space?
[11:56:51] <dbaupp> Boreeas: basically
[11:56:59] <dbaupp> Heather: like `./\ `
[11:57:03] <dbaupp> it's a mountain
[11:57:09] <Heather> )))
[11:57:29] <dbaupp> (and, if it's in ones PATH, then `\ ` works fine too)
[11:57:57] <dbaupp> Boreeas: however, @mut [] doesn't allow you to push elements, just modify the elements already there (i.e. you can't change the length
[11:58:00] <Heather> dbaupp but still ... it will cause users to press \
[11:58:01] *** Joins: pyrac (pyrac@moz-8356B7F.w90-5.abo.wanadoo.fr)
[11:58:09] <dbaupp> Heather: they could type `' '` too
[11:58:25] <Heather> dbaupp then ' ' )
[11:58:28] <dbaupp> Heather: (i'm joking btw; space would be a stupid name. :P )
[11:58:53] <Heather> dbaupp I think I will keep it called mirana...
[11:59:30] <dbaupp> Boreeas: if one could change the length, you might cause a reallocation, which would require all the other references to that vector to be updated to point to the new block of memory (which is not possible... with the current implementation of @, maybe later; but that seems unlikely.)
[11:59:35] <dbaupp> Heather: sounds good :)
[11:59:50] <Heather> dbaupp to implement idea from mr I need to know how to use interfaces in rust
[12:00:02] <dbaupp> Heather: you mean traits?
[12:00:10] <Heather> what )
[12:00:16] <Boreeas> dbaupp: So, if I want to build an @[], create it as ~[] and then cast to @?
[12:00:43] <Heather> dbaupp traits works same as interfaces?
[12:00:52] <Heather> dbaupp or alike abstract classes?
[12:01:00] <doomlord_> trait-objects are like interfaces
[12:01:20] <Heather> doomlord_ is there some example
[12:02:03] <doomlord_> (pointer to a datastruture and pointer to a vtable, passed around together)
[12:02:22] <dbaupp> Boreeas: kinda, but that doesn't really work; @[] has basically no modern library support. the best plan is to use @(~[]) (i.e. move the whole ~[] into a @), and/or @mut ~[] (which does allow resizing, since it's got double indirection)
[12:02:45] *** Joins: fyolnish (fyolnish@moz-CB01345A.uqwimax.jp)
[12:03:17] <dbaupp> Boreeas: however... I'd encourage you to avoid @ as much as possible, and @mut even more so ("don't @mut-ilate your code!"); they're slow and poorly implemented.
[12:03:43] *** Joins: skade (skade@moz-A89F791B.pools.arcor-ip.net)
[12:03:45] <dbaupp> Heather: they're a little bit like both, but different too
[12:03:58] <dbaupp> Heather: mostly like inferfaces (from what I understand of either of those :P 
[12:04:00] <dbaupp> )
[12:04:26] <dbaupp> Heather: in general, you would avoid using the trait-objects that doomlord_ mentions; using true generics is better.
[12:05:05] <Boreeas> I wanted to avoid them, but I've got a struct which contains an Option<vec>, and moving the vec out of the struct appears to only work for @~[], not ~[] or &[]
[12:05:43] <Boreeas> (As in http://pastebin.com/EDAASkUk)
[12:05:47] *** Quits: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP) (Quit: Leaving.)
[12:07:35] <Heather> dbaupp I see...
[12:09:37] <dbaupp> Boreeas: https://gist.github.com/huonw/2f860f4c321257134ace
[12:09:43] *** Joins: Shikotan (kvirc@432BD068.DB8C1228.E9D0DC51.IP)
[12:11:37] <dbaupp> Boreeas: the problem with ~[] is it moves ownership when passed by value (which matching on `Some(vec)` does), and so if you matched on `self.data` and moved the `vec` out, you've now got a "hole" in `self` where the ownership was stolen.
[12:12:19] <Boreeas> So ref vec just borrows it instead
[12:12:29] <dbaupp> if the method was get_data(self) (i.e. pass by value), then it would be ok, because then you can move the ownership of the whole `self` object when you "steal" `vec`
[12:12:30] <dbaupp> yes
[12:13:03] <dbaupp> (and when you've borrowed a reference to `self`, i.e. `&mut self` or `&self`, then stealing ownership is bad, as you can't take ownership of `self` itself.)
[12:13:37] *** Quits: pyrac (pyrac@moz-8356B7F.w90-5.abo.wanadoo.fr) (Quit: pyrac)
[12:13:52] <Boreeas> If I used self instead of &mut self, the caller would use ownership of mystruct, when calling mystruct.get_data(), so it couldn't be used anymore, right?
[12:14:06] <Boreeas> s/use/lose/
[12:15:00] <dbaupp> yes, exactly
[12:15:05] <Boreeas> Alright, thanks
[12:17:17] <dbaupp> so where @ fits into this is it doesn't move ownership when passed by value (same as primitives like `int`, and immutable references like &T and &[T])
[12:17:42] *** Joins: Jackneill (Jackneill@moz-9DFDBEFF.pool.digikabel.hu)
[12:17:42] *** Joins: Jackneilll (Jackneill@moz-9DFDBEFF.pool.digikabel.hu)
[12:17:47] *** Quits: Jackneill (Jackneill@moz-9DFDBEFF.pool.digikabel.hu) (Connection reset by peer)
[12:20:54] <dbaupp> bstrie: /r/rust looks so empty without @ ;P
[12:21:20] *** Quits: skade (skade@moz-A89F791B.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[12:23:22] *** Quits: fyolnish (fyolnish@moz-CB01345A.uqwimax.jp) (Client exited)
[12:23:28] *** Joins: fyolnish (fyolnish@moz-CB01345A.uqwimax.jp)
[12:25:16] *** Quits: fyolnish (fyolnish@moz-CB01345A.uqwimax.jp) (Client exited)
[12:25:38] *** Joins: fyolnish (fyolnish@moz-CB01345A.uqwimax.jp)
[12:26:43] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[12:26:54] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[12:27:09] <ChrisMorgan> bstrie: instead of removing @, you should change it to Rc<...>!
[12:27:22] *** Joins: fyolnish_ (fyolnish@moz-CB01345A.uqwimax.jp)
[12:27:25] *** Quits: fyolnish (fyolnish@moz-CB01345A.uqwimax.jp) (No route to host)
[12:36:19] *** Quits: canhtak (canhtak@moz-24F61E55.wl.t.ulaval.ca) (Quit: canhtak)
[12:38:14] *** Joins: freezerburnv (freezerbur@moz-F0DFB280.hfc.comcastbusiness.net)
[12:40:45] *** Joins: canhtak (canhtak@moz-24F61E55.wl.t.ulaval.ca)
[12:42:27] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[12:42:56] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Connection reset by peer)
[12:43:21] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[12:44:14] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Ping timeout)
[12:45:24] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:47:57] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:49:21] *** Quits: moostik (Icedove@moz-3E868786.w90-2.abo.wanadoo.fr) (Ping timeout)
[12:49:30] *** Quits: canhtak (canhtak@moz-24F61E55.wl.t.ulaval.ca) (Quit: canhtak)
[12:50:49] *** Joins: canhtak (canhtak@moz-24F61E55.wl.t.ulaval.ca)
[12:56:31] *** Quits: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) (Quit: ~ Trillian - www.trillian.im ~)
[12:57:03] *** Joins: brendan (brendaneic@9E9221B0.60D98710.CE12DF22.IP)
[12:57:23] *** Joins: GeneralMaximus (ankur@9BEBED44.E772AAF5.D2D1FAF0.IP)
[12:57:41] *** Quits: an0nymous (an0nymous@moz-F04BA440.tx.res.rr.com) (Quit: Leaving)
[12:58:18] *** Joins: DeTeam (DeTeam@3F8887A3.6883A39.F5F3AF2.IP)
[12:58:58] *** Quits: DeTeam (DeTeam@3F8887A3.6883A39.F5F3AF2.IP) (Quit: DeTeam)
[13:01:56] *** Quits: canhtak (canhtak@moz-24F61E55.wl.t.ulaval.ca) (Quit: canhtak)
[13:02:57] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[13:04:30] *** Joins: hack (chatzilla@moz-859AB48F.rev.onenet.an)
[13:05:57] *** Quits: Sorella (quildreen@2392D500.600E39D3.1ED99692.IP) (Quit: Ex-Chat)
[13:09:57] *** Joins: skade (skade@moz-A89F791B.pools.arcor-ip.net)
[13:10:08] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[13:11:32] *** Quits: nomadic (nomadic@moz-E01D5C49.hsd1.ga.comcast.net) (Client exited)
[13:11:58] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[13:14:05] *** Joins: Sorella (quildreen@2392D500.600E39D3.1ED99692.IP)
[13:16:26] *** Joins: moostik (Icedove@moz-2E0A4DA6.minet.net)
[13:17:39] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[13:18:16] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[13:18:33] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[13:21:29] *** Joins: canhtak (canhtak@moz-24F61E55.wl.t.ulaval.ca)
[13:24:57] *** Quits: z0w0 (zack@moz-238C2341.lnse3.cha.bigpond.net.au) (Ping timeout)
[13:25:50] *** Quits: moostik (Icedove@moz-2E0A4DA6.minet.net) (Ping timeout)
[13:29:24] *** Quits: brendan (brendaneic@9E9221B0.60D98710.CE12DF22.IP) (Quit: brendan)
[13:32:16] <mletterle> Hail rustitonians
[13:37:19] <hack> Hi
[13:38:05] <hack> im new to rust, Dum question: where do you handle the error messages generated by the compiler?
[13:38:30] <hack> Im trying to find out in the documentation but I dint see anything related to it
[13:38:44] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[13:39:40] <ChrisMorgan> hack: what do you mean?
[13:40:00] <ChrisMorgan> If you're just a normal Rust user, you look at them and fix them. Are you wanting to work on rustc?
[13:40:13] <hack> yes
[13:40:21] <hack> Chris: yes
[13:40:58] <hack> well, my problem is undertsnading how to fix them :-P
[13:40:58] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Connection reset by peer)
[13:41:03] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[13:41:05] <ChrisMorgan> I have not worked much at all in rustc yet and I can't answer your question. I would offer the suggestion that you try doing something else in Rust first, though, to get a good feel for the language.
[13:41:12] <hack> I mean issues like this : https://github.com/mozilla/rust/issues/8767
[13:41:38] <hack> I'm trying to understand where in the code do you implement the proper error messages etc...
[13:42:08] *** Quits: Sorella (quildreen@2392D500.600E39D3.1ED99692.IP) (Quit: Ex-Chat)
[13:43:26] <ChrisMorgan> hack: I can't conveniently help you with that, but I would suggest that you try something easier first.
[13:44:00] *** Quits: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[13:44:03] <hack> Chris: that issue was supposed to be easy :-P, btw isnt this a developer irc for rust developers?
[13:44:43] <ChrisMorgan> Yes, that's right. It's fairly quiet just at present.
[13:45:50] <ChrisMorgan> (There's also #rust-internals which deals with what it suggests, where that's the *only* topic of the room, while this channel deals somewhat with such things but also with general usage of Rust.)
[13:46:05] <hack> Chris: you develop apps using Rust or are you working to help improve the Rust compiler?
[13:47:43] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[13:48:11] <ChrisMorgan> hack: I've done a little on Rust itself, but mostly I've been working on libraries; rust-http is my main project.
[13:49:26] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[13:57:32] <mletterle> I would also recommend trying to write something non-trivial in rust before trying to jump into rust itself. But don't let that stop you anyway :)
[14:00:05] <hack> mletterle:thx for the tip
[14:00:26] *** Quits: g3orge (g3orge@moz-CE3A1669.access.hol.gr) (Quit: leaving)
[14:07:04] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[14:07:04] *** ChanServ sets mode: +o jdm
[14:07:09] *** Joins: axitkhurana (Adium@B0025550.10B6194D.6AA50C35.IP)
[14:07:40] *** Quits: sigma (sigma@moz-1945A3E5.range86-130.btcentralplus.com) (Ping timeout)
[14:07:56] *** Quits: Jesin (Jessin_@moz-25306B28.cc.lehigh.edu) (Ping timeout)
[14:09:02] <ChrisMorgan> Using an HTTP request concurrency of 2 instead of 1 more than doubles a Go web server's performance. Rust (now faster than Go for concurrency of 1)? Only 5-20% improvement. :-(
[14:09:22] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[14:15:21] <bstrie> ChrisMorgan: why so?
[14:15:37] <ChrisMorgan> bstrie: maybe the scheduler isn't good enough yet?
[14:15:55] <bstrie> make sure you tell brson :)
[14:16:04] <bstrie> maybe even file a bug
[14:16:26] <bstrie> damn you, amdahl!
[14:17:00] <ChrisMorgan> bstrie: the code I'm running is p, not s.
[14:17:11] <bstrie> ostensibly
[14:17:15] <bstrie> the runtime is still s :P
[14:17:29] <ChrisMorgan> The Go server actually demonstrates a performance improvement of slightly greater than 2.
[14:17:35] <bstrie> haha
[14:17:47] <bstrie> science can't explain this
[14:17:51] <ChrisMorgan> And there's (hopefully) no reason why we can't get there.
[14:18:14] *** Joins: FreeFull (freefull@D89A5B80.2CE4D4F4.159B5998.IP)
[14:18:23] <ChrisMorgan> Oh, there will be reasons, doubtless; but I haven't bothered thinking about where the extra performance is coming from with that.
[14:18:45] *** Joins: refold (gman@moz-42D68426.a258.priv.bahnhof.se)
[14:20:20] * ChrisMorgan is pleased that rust-http is now approximately on par with or better than both Go and Node for his apache_fake example server
[14:20:43] <bstrie> for a concurrency of 1, you mean
[14:20:48] <ChrisMorgan> Yeah.
[14:21:14] <ChrisMorgan> But Node demonstrates even worse scaling characteristics than Rust, so we're still beating it.
[14:21:18] <bstrie> being on par isn't good enough! start hitting some birdies
[14:21:35] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[14:21:35] <mletterle> My next step is to add ssl support to the server side of rust-http and start using it in my tests...
[14:21:40] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[14:21:50] <bstrie> how does go do ssl?
[14:22:00] <bstrie> surely the didn't rewrite tls in go
[14:22:09] <mletterle> good question actually
[14:22:17] <ChrisMorgan> I believe I heard someone saying OpenSSL. I don't know, though.
[14:22:20] <Yoric> Ok, I might have a little time to get back to writing a little Rust code.
[14:22:37] <Yoric> Do we have something built-in for doing http?
[14:22:43] <ChrisMorgan> Using multiple processes and load balancing is the logical intermediate step for getting a Rust HTTP server to scale across cores.
[14:22:46] <Yoric> (as a http client, that is)
[14:22:50] <mletterle> http://golang.org/pkg/crypto/tls/
[14:22:52] <ChrisMorgan> Yoric: https://github.com/chris-morgan/rust-http
[14:22:54] <bstrie> Yoric: nobody here knows anything about http
[14:23:01] <bstrie> :P
[14:23:05] <ChrisMorgan> Yoric: it's got both client and server
[14:23:13] <bstrie> Yoric are you even paying attention we are talking about http right now!!
[14:23:26] <Yoric> bstrie: Yes, http server. I'm interested in http client.
[14:23:26] * bstrie throws yoric into servitude at the feet of chrismorgan
[14:23:37] <Yoric> Generally speaking, I can tell the difference.
[14:23:53] <bstrie> we have to have the world's best http everything
[14:23:54] <Yoric> ChrisMorgan: Good to know, thanks.
[14:23:59] <bstrie> all the webs
[14:24:04] <bstrie> are belong to rust
[14:24:17] <Yoric> bstrie: Well, for all I know, everything http-client-ish was built into Servo.
[14:24:18] <mletterle> I think they are implmenting their crypto in go...
[14:24:30] <bstrie> Yoric: servo actually uses ChrisMorgan's http code :)
[14:24:40] <Yoric> You now, just like we are supposed to have a great library called Necko, but nobody knows where it's lost inside Gecko :)
[14:24:52] <bstrie> mletterle: some crypto, yeah, but surely they aren't rewriting *everything*
[14:25:38] *** Joins: Jesin (Jessin_@moz-25306B28.cc.lehigh.edu)
[14:26:22] <mletterle> https://code.google.com/p/go/source/browse/src/pkg/crypto/
[14:26:25] <ChrisMorgan> Yoric: rust-http was originally just a server (that's the part that I wanted, so that's what I started by writing), but Servo needed to switch to something newrt and so I quickly implemented http::client
[14:26:31] <bstrie> I will just go ask in the go channel how they do ssl
[14:26:45] <mletterle> that's crazy talk!
[14:26:55] <mletterle> Who justs goes and ASKS people who would know?
[14:27:02] <ChrisMorgan> bstrie
[14:27:14] <mletterle> oh, alright then.
[14:27:14] <bstrie> it's just crazy enough to work
[14:27:25] <bstrie> wish me luck
[14:27:39] * ChrisMorgan doesn't believe in luck
[14:27:52] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[14:29:00] <ChrisMorgan> Hmm... RUST_THREADS=3 (mine is a dual-core machine) improves the ab tests with concurrency 2 from showing 5% perf improvement to 20-30%.
[14:29:32] <Yoric> ChrisMorgan: Thanks.
[14:29:45] *** Joins: samnardoni (Mibbit@F889EF52.38924046.A86B7D63.IP)
[14:29:52] <mletterle> Interesting.. leaves a free thread for rust internals? (WAG)
[14:30:11] <ChrisMorgan> Dunno. Worth reporting, anyhow.
[14:30:31] *** Parts: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) ()
[14:30:35] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[14:30:56] *** Joins: Ms2ger (Ms2ger@moz-A2F64C88.ugent.be)
[14:31:52] <ChrisMorgan> Anyway, rust-http performance is extremely promising, seeing as there are still quite a few comparatively easy perf wins in the scheduler and writer interface to be had (fewer allocations, mostly).
[14:33:33] *** Joins: Blub\w (wry@moz-32B459F5.wireless.dyn.drei.com)
[14:35:23] *** Quits: dumitru (dgherman@moz-7C253BEB.getcadre.com) (Ping timeout)
[14:35:41] *** Joins: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net)
[14:35:44] *** Quits: reed (reed@tech.monkey) (Ping timeout)
[14:37:15] *** Joins: ahal (ahal@FCCEA34F.7672369.D8E68FF6.IP)
[14:38:01] *** Quits: Ms2ger (Ms2ger@moz-A2F64C88.ugent.be) (Ping timeout)
[14:38:49] *** Joins: Ms2ger (Ms2ger@moz-A2F64C88.ugent.be)
[14:40:41] *** Joins: tautologico (shung@703660AA.CFE755C8.C27E1635.IP)
[14:40:59] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[14:41:03] *** Joins: sigma (sigma@moz-CA0A5A47.range86-163.btcentralplus.com)
[14:41:40] *** Quits: nkoep (nik@moz-34276308.pool.mediaways.net) (Ping timeout)
[14:44:17] *** Joins: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com)
[14:44:57] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[14:45:01] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[14:45:40] *** Quits: skade (skade@moz-A89F791B.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[14:45:57] *** Quits: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo)
[14:49:03] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:50:50] *** Joins: reed (reed@tech.monkey)
[14:50:51] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:51:01] *** Joins: dumitru (dgherman@moz-7C253BEB.getcadre.com)
[14:51:33] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Client exited)
[14:56:09] *** Joins: brianoh (Mibbit@F1BF3189.8EE44498.72E70D0F.IP)
[14:56:48] *** Quits: brianoh (Mibbit@F1BF3189.8EE44498.72E70D0F.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:58:03] *** Joins: nkoep (nik@moz-17754CEC.vpn.rwth-aachen.de)
[14:58:33] *** Quits: ahal (ahal@FCCEA34F.7672369.D8E68FF6.IP) (Ping timeout)
[14:58:36] *** Joins: ianj (ianjneu@moz-7140CF01.ccs.neu.edu)
[14:59:04] *** Joins: ahal (ahal@FCCEA34F.7672369.D8E68FF6.IP)
[14:59:13] *** Joins: skade (skade@moz-A89F791B.pools.arcor-ip.net)
[15:00:50] *** Joins: mib_5sfc07 (Mibbit@moz-DC77EB66.red-2-139-150.staticip.rima-tde.net)
[15:01:22] *** Quits: mib_5sfc07 (Mibbit@moz-DC77EB66.red-2-139-150.staticip.rima-tde.net) (Quit: http://www.mibbit.com ajax IRC Client)
[15:04:02] * ChrisMorgan has decided he wants a tool that generates Exuberant Ctags-compatible tags file from librustdoc output.
[15:04:25] <ChrisMorgan> Now, someone, go do it! I want it tomorrow morning when I get up! :-)
[15:04:40] *** Joins: brendan (brendaneic@323D4905.A5FB4ABA.FE58E87C.IP)
[15:04:55] <ChrisMorgan> (I believe it'd actually be a pretty easy thing to do with librustdoc's capabilities, now.)
[15:05:07] <ChrisMorgan> Probably build it into librustdoc, actually.
[15:05:25] *** Joins: pyrac (pyrac@moz-8356B7F.w90-5.abo.wanadoo.fr)
[15:07:18] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[15:07:45] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[15:12:54] *** Joins: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net)
[15:13:05] <ChrisMorgan> There, now I get to see what happens to the newly-filed-on-this-very-topic https://github.com/mozilla/rust/issues/10317
[15:13:34] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[15:13:49] *** jorendorff_away is now known as jorendorff
[15:16:55] <hack> I'm using sublime text as editor, but how can debug rust as I test?
[15:17:36] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[15:17:40] *** Quits: brendan (brendaneic@323D4905.A5FB4ABA.FE58E87C.IP) (Quit: brendan)
[15:18:06] *** Quits: btipling (btipling@moz-D51E0AEB.xen.prgmr.com) (Ping timeout)
[15:18:24] <ChrisMorgan> hack: question is too vague; can you be more specific?
[15:18:48] *** Joins: pnathan (Adium@moz-E72012D3.tukw.qwest.net)
[15:18:52] <hack> example , java and c# have an IDE such as Visual Studio or Eclipse
[15:19:02] <bstrie> mletterle ChrisMorgan: according to the channel, go does implement its own TLS. it's a partial implementation of TLS 1.0, apparently
[15:19:10] *** Quits: novabyte (novabyte@B9CA259.95E6295D.CE8CB534.IP) (Quit: Leaving.)
[15:19:20] <ChrisMorgan> bstrie: scary.
[15:19:36] <bstrie> ChrisMorgan: well they're leveraging an openssl developer who also works for google
[15:19:40] <bstrie> but yeah, still scary
[15:19:43] <bstrie> a little bit
[15:20:08] <tiffany> there are no IDEs for rust, hack
[15:20:18] <tiffany> most of the people here use vim/emacs/sublime-text with gdb/lldb
[15:20:24] *** Quits: vmx (vmx@moz-9822714B.dip0.t-ipconnect.de) (Quit: Leaving)
[15:20:46] <tiffany> there's probably plugins to embed your debugger session within your text editor available
[15:20:50] <ChrisMorgan> bstrie: scary in such a language. So many opportunities for things like subtle timing attacks where an optimisation does something you didn't expect which stops something being constant time, for example.
[15:21:15] <ChrisMorgan> hack: any tool you'd use to debug C or C++ should be able to be used to debug Rust.
[15:21:23] <hack> tiiffany: thats what I though , so how can you find out best (your strategy) where the code is giving problems?
[15:21:39] *** Joins: btipling (btipling@moz-D51E0AEB.xen.prgmr.com)
[15:21:40] <samnardoni> i'm confused. what's the difference between `ref x` and `&x`?
[15:21:49] <ChrisMorgan> hack: for example, http://michaelwoerister.github.io/2013/09/27/what-you-call-the-present.html gives a demo of using Eclipse to debug Rust code.
[15:22:10] <hack> Chris: right now Im using the shell  terminal : 'rust run ...'
[15:22:12] <ChrisMorgan> samnardoni: in a pattern, they're opposites.
[15:22:14] <bstrie> samnardoni: `&x` is a pattern that matches a reference to x. `ref x` matches `x`, and then gives you a reference to it
[15:22:19] <bstrie> samnardoni: it's a subtle distinction
[15:22:42] <tiffany> are you not familiar with how to use a debugger?
[15:23:00] <tiffany> I usually keep my changes atomic enough that I know that it was directly or indirectly the source of a crash or incorrect computation
[15:23:35] <hack> tiff:  so how do you test your changes ? just using unit tests?
[15:23:36] *** Joins: brendan (brendaneic@323D4905.A5FB4ABA.FE58E87C.IP)
[15:23:40] <tiffany> the source of a crash is the first place to look, and an incorrect computation needs to be traced backwards from the first place you see it
[15:23:54] <tiffany> unit tests work, I've not needed them much thus far 
[15:23:55] *** Quits: victorporof (victorporo@7CC1F655.26884B2C.79933D60.IP) (Quit: victorporof)
[15:23:59] <ChrisMorgan> samnardoni: match Some(&42) { Some(&x) => /* x is 42 */ }, match Some(42) { Some(ref x) => /* x is &42 */ }
[15:24:16] <hack> tiff: tracing backwards...
[15:24:37] <tiffany> you see that the result of foo() is incorrect, and so you examine foo() and find that bar() is incorrect, ...
[15:24:56] <hack> tiff: lets say the error is due to a mistake in the rust compiler itsself...
[15:25:11] <ChrisMorgan> hack: if you're not already comfortable working with debugging C/C++, working on rustc is really not a good idea. Get some experience working with it on a smaller (but non-trivial) thing that you wrote entirely yourself first.
[15:25:12] *** Joins: feduser (feduser@DBDDF1EC.46326E73.650F25DA.IP)
[15:25:26] *** Quits: canhtak (canhtak@moz-24F61E55.wl.t.ulaval.ca) (Quit: canhtak)
[15:25:28] <tiffany> I have yet to find any sort of error in rust's codegen, they've all been ICEs
[15:25:37] <tiffany> oh, that's what you mean isn't it
[15:25:39] *** jorendorff is now known as jorendorff_away
[15:25:52] <hack> tiff: yes,
[15:26:01] <tiffany> I usually just either fiddle my way around them or report them and hope someone knows a solution
[15:26:15] <tiffany> it usually happens when you make the type checker do weird things
[15:26:39] <tiffany> especially lifetimes, those are like my #1 source of ICEs
[15:26:40] <samnardoni> ChrisMorgan: so, &x is "pattern match and extracting x" and `ref x` is "just give me the actual value passed in"?
[15:26:41] <ChrisMorgan> tiffany: he's meaning with https://github.com/mozilla/rust/issues/8767, I believe.
[15:27:13] <hack> tiff & Chris: yes, its about helping to solve issues in the rust compiler, not writing your own code
[15:27:24] <hack> apps
[15:27:50] <ChrisMorgan> samnardoni: we're talking about it inside a pattern, that is, the Some(&x) bit and *not* the Some(&42) bit, where & means "a reference to 42".
[15:27:55] *** Quits: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net) (Quit: Leaving)
[15:28:41] <samnardoni> ChrisMorgan: yes, I understand that
[15:28:58] <ChrisMorgan> samnardoni: `&x` is meaning "match &T and get the T out of it", while `ref x` is meaning "match T and take a reference (i.e. of type &T) to it"
[15:29:18] *** Quits: nkoep (nik@moz-17754CEC.vpn.rwth-aachen.de) (Ping timeout)
[15:29:21] <samnardoni> ChrisMorgan: okay, thanks, I get it now
[15:29:32] <hack> tiff: what kind of app r you building using Rust code?
[15:29:47] <tiffany> I have a few small projects
[15:29:59] <samnardoni> ChrisMorgan: why is it `ref x` rather than just `x` though?
[15:30:25] <ChrisMorgan> samnardoni: that would mean moving the object, of type T.
[15:30:35] <bstrie> samnardoni: because you can say `x` if you want to refer to it by-value later on in the match statement
[15:30:44] <hack> tiff: what kind of apps can you build? I think is because of better security?
[15:30:46] <bstrie> but that will move the value, as usual
[15:30:46] *** Joins: alan (alan@moz-FE02DD30.sat6.rackspace.com)
[15:30:59] *** Quits: smvv (smvv@moz-A397289C.xlshosting.net) (Ping timeout)
[15:31:04] *** Joins: moostik (Icedove@moz-3E868786.w90-2.abo.wanadoo.fr)
[15:31:10] <bstrie> which can cause complications, depending on what you want to do with it
[15:31:27] <tiffany> rust is intended to be a system's language, it is a good choice for anything you would use C/C++ for: games, operating systems, servers, etc.
[15:31:34] <samnardoni> so ref is like a borrowed pointer? are they even called borrowed pointers anymore?
[15:31:48] *** Joins: smvv (smvv@moz-A397289C.xlshosting.net)
[15:31:48] <ChrisMorgan> If, for example, you have an Option<~str>, matching Some(s) would mean you can't access the original Option<~str> after that at all, because it's moved it out of it. Matching Some(ref s) only takes a reference to it (type &~str), so you can access the original object later.
[15:31:50] <bstrie> samnardoni: just call them references, or borrowed references if you want :)
[15:32:00] <ChrisMorgan> `ref` makes a borrowed pointer.
[15:32:50] <samnardoni> so `ref x` makes a reference, and &x matches a borrowed pointer and extracts x?
[15:32:54] <bstrie> at some point I intend to do a massive find/replace of "s/borrowed pointer/borrowed reference" for the entire codebase
[15:32:55] <ChrisMorgan> Yes.
[15:33:08] <ChrisMorgan> There's a general feeling that I've detected in favour of renaming the concept of "borrowed pointers" to "references" (with such things as the `ref` keyword and `ref` in method names setting precedent), but it hasn't happened yet.
[15:33:50] <ChrisMorgan> bstrie: just calling them references is what I've observed being done/preferred, rather than borrowed references.
[15:34:08] <bstrie> I'm fine with either
[15:34:10] <tiffany> they're still borrowed, though
[15:34:19] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[15:34:20] *** ChanServ sets mode: +ao dherman dherman
[15:34:29] <bstrie> tiffany: true, but to some degree it's just an implementation detail...
[15:34:34] <tiffany> aren't there many cases in C++ where references are used as an owned pointer?
[15:34:35] <ChrisMorgan> tiffany: sure, but "reference" indicates that it doesn't own it, and that's exactly what it is.
[15:34:38] *** Quits: smvv (smvv@moz-A397289C.xlshosting.net) (Ping timeout)
[15:34:49] * ChrisMorgan can't speak for C++ and so will go to bed instead
[15:35:04] <ChrisMorgan> Like my logic?
[15:35:06] <bstrie> I too cannot speak for C++
[15:35:10] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[15:35:37] *** Quits: Ms2ger (Ms2ger@moz-A2F64C88.ugent.be) (Ping timeout)
[15:35:40] <samnardoni> so, does that mean `ref x` in a pattern is more like `&x` for a fn argument?
[15:35:45] <bstrie> ChrisMorgan: it's too late to go to bed, might as well just stay up all night working on rust-http
[15:35:50] * bstrie cracks the sleep whip
[15:35:59] <ChrisMorgan> samnardoni: correct
[15:36:00] <tiffany> using the same name as C++ may confuse people coming from C++
[15:36:10] <bstrie> samnardoni: careful, fn arguments are also patterns!
[15:36:20] <bstrie> samnardoni: `ref x` is more like `x: &T`
[15:36:27] <bstrie> rather than `&x: T`
[15:36:41] <samnardoni> bstrie: ah, right, i think that's where I'm getting confused
[15:36:48] *** Joins: smvv (smvv@moz-A397289C.xlshosting.net)
[15:36:52] <ChrisMorgan> Whoops, indeed. &T as the type, not &x as the pattern
[15:37:05] <samnardoni> `&x: T` and `x: &T`
[15:37:25] <bstrie> though I can't think of any instance where saying `&x: T` would be useful?
[15:37:26] <ChrisMorgan> I don't think you'll ever actually come across anyone writing `fn foo(ref x: T)`, but I believe it compiles to the same thing as `fn foo(x: &T)`.
[15:37:40] <bstrie> does that allow you to call the function without manually borrowing the value?
[15:37:43] <bstrie> that would be crazy
[15:37:52] *** Quits: ahal (ahal@FCCEA34F.7672369.D8E68FF6.IP) (Ping timeout)
[15:38:07] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[15:38:25] <ChrisMorgan> bstrie: no, I really am going to bed. "It's now or never ... tomorrow will be too late!"
[15:38:52] <samnardoni> anyway, cheers for your help bstrie and ChrisMorgan 
[15:38:56] *** Joins: Kxepal832 (Miranda@moz-37B13CF.pppoe.mtu-net.ru)
[15:39:03] <ChrisMorgan> You're welcome. Helping out is fun, anyway :-)
[15:39:27] <ChrisMorgan> And it helps me to solidify my own understanding of it all, especially if ever I make a mistake and get corrected.
[15:39:28] *** Quits: Kxepal (Miranda@moz-CB85EBA8.pppoe.mtu-net.ru) (Ping timeout)
[15:39:36] <hack> thanks to all for the tips & help
[15:40:33] *** Quits: smvv (smvv@moz-A397289C.xlshosting.net) (Ping timeout)
[15:41:13] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[15:41:37] *** Joins: Ms2ger (Ms2ger@moz-9F888311.ugent.be)
[15:42:35] <samnardoni> ChrisMorgan: yes, definitely. if I try and explain anything computer related to my girlfriend, i always feel i understand better after (even if she doesn't)
[15:43:51] *** Joins: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP)
[15:43:52] <samnardoni> forces all those wavey, gooey thoughts into something concrete
[15:43:58] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[15:44:12] *** Quits: Jesin (Jessin_@moz-25306B28.cc.lehigh.edu) (Quit: Leaving)
[15:44:25] <bstrie> samnardoni: https://en.wikipedia.org/wiki/Rubber_duck_debugging
[15:44:56] *** Quits: pyrac (pyrac@moz-8356B7F.w90-5.abo.wanadoo.fr) (Ping timeout)
[15:45:40] <samnardoni> bstrie: exactly
[15:45:43] *** Joins: jvshahid (jvshahid@moz-53774307.nycm.ny.megapath.net)
[15:45:52] *** Quits: brendan (brendaneic@323D4905.A5FB4ABA.FE58E87C.IP) (Quit: brendan)
[15:47:29] *** Joins: canhtak (canhtak@moz-24F61E55.wl.t.ulaval.ca)
[15:49:08] <samnardoni> anyway, gotta shoot, but just wanted to chime in about how excited i am about rust. and i probably check /r/rust and the github rust commits way too often than i should
[15:49:53] *** Joins: smvv (smvv@moz-A397289C.xlshosting.net)
[15:50:40] *** zz_kimundi is now known as kimundi
[15:50:45] <samnardoni> and at work I'm current profiling our app that needs to run each time step consistently under 0.5ms for days at a time, so I really appreciate a modern language without mandatory GC
[15:51:07] <bstrie> samnardoni: rewrite it in rust, what could possibly go wrong?!
[15:51:09] *** Quits: heftig (heftig@moz-F6E3121.dip0.t-ipconnect.de) (Quit: Quitting)
[15:51:16] <bstrie> just make sure you don't tell anybody
[15:52:49] *** Joins: pyrac (pyrac@moz-8356B7F.w90-5.abo.wanadoo.fr)
[15:53:09] *** Joins: cubic (cubic@moz-80241A3A.mc.videotron.ca)
[15:53:38] *** Joins: nkoep (nik@moz-34276308.pool.mediaways.net)
[15:54:17] *** Joins: skeet70 (skeet70@moz-156ACA63.msu.montana.edu)
[15:55:14] *** Joins: kellogh (timkellogg@moz-68DF7EF7.teliax.com)
[15:56:59] *** Quits: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP) (Input/output error)
[15:57:24] *** Quits: tautologico (shung@703660AA.CFE755C8.C27E1635.IP) (Quit: tautologico)
[15:57:48] <sigma> bstrie: That's actually my plan or a lot of our non-customer facing tools...
[15:58:36] *** Joins: tautologico (shung@703660AA.CFE755C8.C27E1635.IP)
[15:58:38] *** Quits: nuts (tii@822A8E7E.6AD15BF5.75D3BBDB.IP) (Connection reset by peer)
[15:59:22] *** Quits: GeneralMaximus (ankur@9BEBED44.E772AAF5.D2D1FAF0.IP) (Ping timeout)
[16:00:19] *** Quits: ksf__ (ksf@moz-3E68FC18.adsl.hansenet.de) (Quit: Leaving)
[16:00:19] <bstrie> haha
[16:00:33] <bstrie> sigma: well, good luck then! let us know if you need any help
[16:00:54] <bstrie> including finding a new job once your boss realizes what you're doing :P
[16:01:24] *** jorendorff_away is now known as jorendorff
[16:02:09] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Ping timeout)
[16:02:47] *** Joins: GeneralMaximus (ankur@9BEBED44.E772AAF5.D2D1FAF0.IP)
[16:02:50] <sigma> I'll pass it off as "investigating emerging technologies" it'll be grand
[16:03:26] <bstrie> sigma: tack " to provide our company a secret competitive advantage" onto the end of that
[16:03:59] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[16:04:12] *** Quits: hack (chatzilla@moz-859AB48F.rev.onenet.an) (Quit: ChatZilla 0.9.90.1 [Firefox 24.0/20130910160258])
[16:04:15] <bstrie> I'm reminded of how paul graham wrote viaweb in lisp, but then put all their pages in a /cgi-bin/ directory to make people think they were using perl
[16:04:28] *** Quits: Blub\w (wry@moz-32B459F5.wireless.dyn.drei.com) (Quit: back in a few hours I guess)
[16:07:19] *** Joins: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[16:09:09] <sigma> our cpp sdk actually uses an actor library and various wannabe rust features, it might not be that hard a sell in a year or 2
[16:09:48] <bstrie> especially once you come out and reveal that the system has actually been entirely implemented in rust for the past six months and nobody noticed
[16:09:57] <kimundi> haha
[16:10:20] <kimundi> "Hu. I wondered why we get less bug reports these days."
[16:10:39] *** Quits: samnardoni (Mibbit@F889EF52.38924046.A86B7D63.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:10:42] <sigma> stop encouraging me
[16:10:53] <bstrie> "our logs keep saying something about ICE, though. are our servers overheating?"
[16:11:31] *** Quits: Ms2ger (Ms2ger@moz-9F888311.ugent.be) (Ping timeout)
[16:12:07] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[16:12:33] <kimundi> "And why are there so many rusty cogs in the server room?!"
[16:13:56] *** Quits: tautologico (shung@703660AA.CFE755C8.C27E1635.IP) (Quit: tautologico)
[16:20:08] <mletterle> go is reimplementing TLS? o_O 
[16:22:01] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[16:22:27] <bstrie> mletterle: they're google, who's going to tell them not to :P
[16:23:06] <mletterle> I guess. You'd expect them to link to openssl or nss to begin with though and reimplement pieces along the way.
[16:23:08] <mletterle> at the least.
[16:23:18] <kimundi> Sorry for being off-topic, but does anyone know if it's possible to remap individual keys of individual physical keyboards under linux?
[16:23:55] <bstrie> kimundi: you mean such that you can plug in different keyboards and have the same keys mean different things?
[16:24:15] <kimundi> for example yes.
[16:25:06] <bstrie> ah, crap
[16:25:09] <bstrie> I just realized
[16:25:24] <bstrie> that the lack of variadic functions means that we really can't do nice dynamic string interpolation
[16:25:25] *** pmoore is now known as pmoore|tea
[16:26:13] <kimundi> bstrie: Hm? What is dynamic string interpolation, and why does the lack of variadic functions make them impossible? :)
[16:26:23] <mletterle> You might be able to do sometying funky with lspci.. but pretty sure there's no built in way...
[16:26:57] *** Joins: Ms2ger (Ms2ger@moz-A2F64C88.ugent.be)
[16:27:07] <bstrie> kimundi: so like in python, you can do `"ab{1}d{0}".format("e", "c")` to create a string "abcde"
[16:27:13] <bstrie> we use format! for this
[16:27:14] <bstrie> but
[16:27:26] <bstrie> format! only takes *string literals*
[16:27:30] <kimundi> It's not dynamic
[16:27:32] <bstrie> you can't even do something like this:
[16:27:35] <kimundi> Yeah
[16:27:48] <bstrie> `let s = "ab{1}d{0}"; format!(s, "e", "c");`
[16:28:01] <bstrie> hence the need for something more dynamic
[16:28:12] *** Joins: dr_bibble (Mibbit@moz-EBC22FBC.bloomberg.com)
[16:28:13] <bstrie> but we can't provide an arbitrary number of arguments to a method
[16:28:18] <bstrie> or to any other function for that matter
[16:28:32] <bstrie> so thus dies the dream of the minimal quine
[16:28:35] *** Quits: Benvie_ (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP) (Quit: )
[16:28:56] <kimundi> "ab{1}d{0}".dyn_format().push("e").push("c").to_str()
[16:29:18] <kimundi> Might work :P
[16:29:24] <bstrie> kimundi: ok, implement it pls :)
[16:29:27] <pauls> bstrie: you can  write a macro that calls a function with  the args assembled into an array.
[16:30:05] <bstrie> pauls: but I'll have to invoke it like `"ab{1}d{0}".format(["e" as ~ToStr, "c" as ~ToStr]);` or something
[16:30:38] *** Quits: alonlevy (alon@moz-B0E66DB7.static.bezeqint.net) (Ping timeout)
[16:30:40] <bstrie> which looks worse than kimundi's solution
[16:30:49] *** Joins: lfox (lfox@moz-861E573F.nyc.biz.rr.com)
[16:31:03] <kimundi> bstrie: With generics and stuff you can still get down to .push("e").push("c")
[16:31:06] <pauls> bstrie: you can just do `dynformat!("ab{1}d{0}, "c", "e")`, and have it expand to that or whatever.
[16:31:06] <bstrie> right
[16:31:47] <kimundi> fn push<T: Any>(&mut self, x: T) { self.vec.push(~x as ~Any) }
[16:31:59] *** Quits: dr_bibble (Mibbit@moz-EBC22FBC.bloomberg.com) (Quit: http://www.mibbit.com ajax IRC Client)
[16:33:23] <pauls> There's no syntactic problem that can't be solved with a sufficiently powerful macro system, other than "too many macros".
[16:34:23] <kimundi> Don't stop until rustc runs completly in a a macro expansion!
[16:34:51] <pauls> ("too many macros" is secretly the same as "not enough macros in other languages")
[16:35:26] *** Joins: alonlevy (alon@moz-B0E66DB7.static.bezeqint.net)
[16:37:55] *** Quits: skeet70 (skeet70@moz-156ACA63.msu.montana.edu) (Ping timeout)
[16:39:19] <bstrie> pauls: if we had method macros, we could just write `foo.format!("c", "e")` and have it automatically expand to `foo.format!(["c" as ~ToStr, "e" as ~ToStr])` :P
[16:39:35] <bstrie> uh oh
[16:39:39] <bstrie> recursive macro typ
[16:39:40] <bstrie> o
[16:39:46] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[16:39:52] <bstrie> does it also count as recursive that I misspelled typo
[16:40:00] <bstrie> so meta
[16:40:53] *** Quits: ianj (ianjneu@moz-7140CF01.ccs.neu.edu) (Ping timeout)
[16:41:52] *** Joins: sweet_kid (Upasana@71060754.BBD8719.388CF16F.IP)
[16:42:04] *** Quits: sigma (sigma@moz-CA0A5A47.range86-163.btcentralplus.com) (Client exited)
[16:42:46] *** Joins: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net)
[16:44:03] *** Joins: hongminhee (sid295@moz-5F4AA75A.irccloud.com)
[16:46:41] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[16:46:58] <kimundi> pauls: Hm, have I talked with you about my idea to make the macro invokation syntax more flexible before?
[16:47:09] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[16:48:26] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[16:49:28] *** Joins: ianj (ianjneu@moz-7140CF01.ccs.neu.edu)
[16:51:00] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[16:54:59] <cmr> bstrie: how would method macros work? we'd need to run typeck to know what `foo` is.
[16:55:13] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[16:55:32] *** Quits: pyrac (pyrac@moz-8356B7F.w90-5.abo.wanadoo.fr) (Quit: pyrac)
[16:55:36] *** jorendorff is now known as jorendorff_away
[16:57:30] *** jorendorff_away is now known as jorendorff
[16:57:45] <bstrie> cmr: yeah, I know
[16:57:58] <cmr> darn, I thought you had a clever idea :(
[16:58:33] *** Quits: pnathan (Adium@moz-E72012D3.tukw.qwest.net) (Quit: Leaving.)
[16:58:55] <bstrie> cmr: well, I do... you'd have to restrict all `foo!` to expanding to a method named exactly `foo`, and then prevent any arguments inside the macro from referring to the self type :P
[16:59:29] <bstrie> though I haven't quite thought about it very much
[16:59:36] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[16:59:36] *** ChanServ sets mode: +ao dherman dherman
[16:59:39] <kimundi> I wonder if this syntactic sugar could work: (x)!.foo(a, b, c, d...) == foo!((x).(a, b, c, d...))
[17:00:37] *** Quits: Shikotan (kvirc@432BD068.DB8C1228.E9D0DC51.IP) (Ping timeout)
[17:00:50] <cmr> Why not x!foo(...) ?
[17:02:50] <kimundi> The rule could be (<TOKEN_TREE>)!<TOKEN_TREE><IDENT>(<TOKEN_TREE>) :P
[17:03:08] <cmr> ...oh
[17:03:39] * kimundi has no idea what he is doing though
[17:04:07] <cmr> me either!
[17:04:21] *** pmoore|tea is now known as pmoore
[17:05:31] <Seldaek> cmr: btw glad to read you still enjoy newdocs :)
[17:05:51] <Seldaek> I haven't had much chance to use them lately unfortunately too busy to play with rust
[17:12:24] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[17:13:13] <sfackler> method like macros would be great
[17:14:27] <nmatsakis> I've never used it, but scala's approach seems tempting
[17:14:33] <nmatsakis> but I think it might not fit into Rust very well
[17:14:48] <bstrie> nmatsakis: scala has macros?
[17:15:20] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[17:15:28] <nmatsakis> bstrie: yes. you can define "macro methods" -- when they are "called", they in fact run at compile time, combining the ASTs for their arguments into a resulting AST
[17:15:31] * nmatsakis waves his hands like mad
[17:15:33] <nmatsakis> as I said I never used them
[17:15:44] <nmatsakis> I think C# has something similar?
[17:16:21] <cmr> Surely not? I didn't think C# had any syntactic abstraction.
[17:18:43] *** Quits: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP) (Quit: WeeChat 0.4.2)
[17:19:16] <nmatsakis> I'm thinking of this http://msdn.microsoft.com/en-us/library/bb335710.aspx
[17:19:28] <nmatsakis> Represents a strongly typed lambda expression as a data structure in the form of an expression tree. This class cannot be inherited.
[17:19:35] <cmr> ahh
[17:19:38] *** Joins: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP)
[17:19:39] <nmatsakis> I don't know to what extent you can manipulate this stuff, not the same thing as a macro nayhow
[17:19:42] <nmatsakis> *anyhow
[17:20:05] <bstrie> nmatsakis: or maybe we could just avoid all the hassle and implement variadic functions :)
[17:20:18] <bstrie> you know, I've never seen an argument against them in rust
[17:20:23] <bstrie> just always "eh, we don't have them"
[17:20:26] <nmatsakis> bstrie: depends on the flavor, I guess
[17:20:30] <bstrie> is there a technical reason?
[17:20:56] <bstrie> like... I know go requires you to have all variadic parameters be the same type
[17:20:57] <nmatsakis> if by variadic function you mean something like Java, i.e., fn foo(x: uint, y: int, ..z: int)
[17:20:58] *** Joins: mikezaby (mikezaby@moz-B26868E.home.otenet.gr)
[17:21:01] <bstrie> so it's just an implicit array
[17:21:03] <cmr> I don't like variadic functions because they complicate the ABI and are hard to do typesafe in a way that's better thanjust &[SomeEnum]
[17:21:08] <bstrie> wait, java has variadic functions??
[17:21:10] <nmatsakis> which is kind of desugared into
[17:21:14] <nmatsakis> z: &[int]
[17:21:25] <nmatsakis> and a call like foo(a, b, c, d) => foo(a, b, [c, d])
[17:21:28] <nmatsakis> I guess we could do that easily enough
[17:21:30] <nmatsakis> bstrie: yes.
[17:21:45] <cmr> bstrie: java also has type bounds on generics!
[17:21:45] <bstrie> never knew
[17:21:54] <bstrie> something something, type erasure
[17:22:03] <nmatsakis> cmr: was this in doubt?
[17:22:27] <cmr> nmatsakis: no, just another little-known javafact
[17:22:37] * nmatsakis didn't realize this was little known
[17:22:39] <nmatsakis> ok
[17:22:50] <bstrie> I was a very timid programmer in my java days
[17:22:53] <bstrie> new features scared me
[17:22:54] <nmatsakis> but then I'm one of the few people who actually like java generics
[17:23:11] <bstrie> generics were one of those "new features" :P
[17:23:16] <nmatsakis> :)
[17:23:27] <nmatsakis> presumably variadic fns and auto-boxed scalars too
[17:23:32] <nmatsakis> though together they make a nice printf
[17:23:42] <nmatsakis> even if it's not as nice as `format!`!
[17:23:43] *** pmoore is now known as pmoore|being-killed
[17:23:55] <nmatsakis> (but what is?)
[17:24:02] <bstrie> I don't think that they cared about having a nice printf, with something like `System.out.println`
[17:24:30] <nmatsakis> well, ther eis now System.out.printf(), so somebody cared
[17:24:32] <bstrie> though I guess you can import class methods? that's also something I never did
[17:24:56] <nmatsakis> e.g., System.out.printf("Foo %s Bar %d", "hi", 22); 
[17:24:59] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:25:29] *** pmoore|being-killed is now known as pmoore|away
[17:26:51] *** Joins: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de)
[17:28:56] *** Joins: pyrac (pyrac@moz-8356B7F.w90-5.abo.wanadoo.fr)
[17:29:59] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[17:30:38] * nmatsakis ildly wishes we used [] or () instead of <> for type arguments... GC(T) vs GC<T>. So readable.
[17:30:56] <cmr> I'm getting `cannot pack type `~std::vec::VecIterator<'a,~[T]>`, which does not fulfill `Send`, as a trait bounded by Send` when trying to turn a vec iter into a ~Iterator<&'a ~[T]>. Where is the Send bound coming from?
[17:30:59] <Ms2ger> Not sure about that :)
[17:31:01] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[17:31:06] * nmatsakis chastises himself for thinking of such a massive and gratuitous syntax change.
[17:31:22] <nmatsakis> cmr: try ~Iterator:<&'a ~[T]>
[17:31:24] <bstrie> nmatsakis: you'll have to fork the language!
[17:31:46] <cmr> nmatsakis: hm, that did it
[17:31:53] <nmatsakis> cmr: see https://github.com/mozilla/rust/issues/10296
[17:31:55] <cmr> nmatsakis: is Send a "default" bound?
[17:32:11] <cmr> aha
[17:32:12] <nmatsakis> cmr: currently, yes, on ~ objects. I want to change it (hence the issue)
[17:32:16] <cmr> I had no idea these existed
[17:32:42] <nmatsakis> I'm finding that ~ objects are really useful in lots of contexts, many of which don't involve sending
[17:32:43] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[17:32:47] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[17:32:48] <nmatsakis> not a good default imo
[17:32:52] <nmatsakis> plus confusing as all get out
[17:32:57] <cmr> yeah
[17:33:05] <nmatsakis> feel free to chime in on the issue if you agree
[17:33:26] <cmr> already  did :)
[17:33:48] <nmatsakis> bstrie: time for an emacs minor mode to replace 'identifier<...>' with 'identifier(...)'
[17:34:18] <nmatsakis> bstrie: except that probably `if a < b` would become `if a ( b` :)
[17:34:23] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[17:34:23] *** ChanServ sets mode: +o pnkfelix
[17:35:28] <bstrie> nmatsakis: well, I *did* propose that we remove `<` as an infix operator, to remove the ambiguity with `foo<int>()` :)
[17:35:43] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[17:35:46] <bstrie> nmatsakis: you can achieve the same result with `>=`! who would even miss it!!
[17:35:56] <bstrie> wait
[17:36:00] <bstrie> !>=
[17:36:03] <bstrie> perfect
[17:36:08] <bstrie> this is how we type <
[17:36:38] * bstrie defenestrates bstrie
[17:36:44] <cmr> Is there a place for read-only struct members? Like priv, but just deny modification. Having to write one-line accessors is a bit silly.
[17:37:44] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[17:38:01] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[17:38:17] <nmatsakis> cmr: possibly, yes.
[17:38:54] <nmatsakis> cmr: we removed them because we wanted to emphasize inherited mutability and keep things simple
[17:39:02] <nmatsakis> but it might be we didn't hit correct balance
[17:40:11] <cmr> To be fair I've only hit it once (just now), but I also haven't been writing a lot of "real-world" rust until now
[17:40:16] <cmr> s/a lot/any/
[17:40:27] <jeaye> A property system similar to that of C# would be handy.
[17:40:57] <cmr> jeaye: ehh, it'd be handy, but I'm not sure I'm a fan of implicit method call.
[17:41:13] <bstrie> me neither
[17:41:21] <jeaye> Wouldn't that be pretty damn easy to inline?
[17:41:33] <cmr> Depends on what the property is doing :)
[17:41:49] <jeaye> "Having to write one-line accessors is a bit silly."
[17:42:07] <jeaye> In the common case, I think it would just fine.
[17:42:20] <bstrie> but if `foo.bar` is actually `foo.bar()`, that could be doing anything. I'm not worried about perf, I'm worried about understanding
[17:42:45] <cmr> *Just* something ala { get; set; } would be nice, not sure I'd be fine with having an arbitrary body
[17:42:46] <jeaye> In the uncommon case, where extra work is being done on access or mutation, a function would be needed (or duplicate code) anyway.
[17:43:02] * bstrie throws cmr off the burj dubai
[17:43:08] <bstrie> no automatic getters and setters!
[17:43:19] *** Joins: boredomist (ruqs@8186917.CC8FA3EE.E3401B6E.IP)
[17:43:22] <cmr> bstrie: it's... not a getter or setter though?
[17:43:30] <cmr> bstrie: it's just access control, in this case.
[17:43:37] <bstrie> oh ok then
[17:43:43] <bstrie> sorry about throwing you off the burj dubai
[17:43:48] <jeaye> bstrie: { get; }
[17:43:51] <cmr> it's ok, only a flesh wound.
[17:43:58] <jeaye> He's had worse.
[17:44:22] *** Quits: Ms2ger (Ms2ger@moz-A2F64C88.ugent.be) (Quit: bbl)
[17:45:02] <cmr> nmatsakis: For my usecase right now, I'm writing a 2d matrix type. I want to expose the dimensions, but if they're modified it becomes incorrect.
[17:45:38] <nmatsakis> cmr: sure, that is easy to imagine, another use case is more of a lint:
[17:45:50] <nmatsakis> cmr: often there are fields that you don't *intend* to mutate after the object as a whole is created
[17:46:00] <cmr> yup
[17:46:45] <nmatsakis> cmr: put another way, brson mentioned wanting to maintain the invariant that a group of fields are modified as a unit
[17:46:51] *** Joins: ferminter (Mibbit@F4EB3C7F.59E74B64.D609CF0D.IP)
[17:47:02] *** Quits: ferminter (Mibbit@F4EB3C7F.59E74B64.D609CF0D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:48:50] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[17:50:17] *** Joins: bkircher (bkircher@moz-B215847F.adsl.alicedsl.de)
[17:50:28] *** Quits: pcdummy (pcdummy@moz-CF4CA865.page4me.ch) (Client exited)
[17:50:36] *** Joins: pcdummy (pcdummy@moz-CF4CA865.page4me.ch)
[17:50:39] *** Quits: freezerburnv (freezerbur@moz-F0DFB280.hfc.comcastbusiness.net) (Ping timeout)
[17:50:50] *** Joins: josh (josh@moz-22FFA53C.meeting.ietf.org)
[17:51:09] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[17:51:22] *** Quits: bkircher (bkircher@moz-B215847F.adsl.alicedsl.de) (Client exited)
[17:51:25] *** Joins: bkircher (bkircher@moz-B215847F.adsl.alicedsl.de)
[17:52:15] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:52:21] *** Quits: bkircher (bkircher@moz-B215847F.adsl.alicedsl.de) (Client exited)
[17:52:42] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[17:52:56] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:53:26] <bstrie> nmatsakis: btw, I like that the new intermingled parameter lists proposal no longer features order-sensitivty :)
[17:53:57] *** Joins: Palmik (palmik@moz-DEC2AB.pks.muni.cz)
[17:55:49] <nmatsakis> bstrie: I'm starting to reverse my opinion on that though :) but I dunno. I've been thinking through how higher-kinded types might work in Rust, and they introduce a lot of order sensitivity, so it seems to "fit" in my mind though the two concepts are really somewhat sparate
[17:55:53] <nmatsakis> *separate
[17:56:05] <nmatsakis> still either proposal basically works out ok
[17:56:42] <nmatsakis> "re-reverse" my opionion, I guess
[17:56:53] *** Quits: pyrac (pyrac@moz-8356B7F.w90-5.abo.wanadoo.fr) (Quit: pyrac)
[17:59:02] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[17:59:02] *** ChanServ sets mode: +o tjc
[17:59:13] *** Joins: andrew-__ (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net)
[17:59:20] *** Quits: andrew-__ (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net) (Input/output error)
[17:59:33] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Ping timeout)
[17:59:43] *** Joins: andrew-__ (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[18:00:11] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[18:00:26] *** Quits: josh (josh@moz-22FFA53C.meeting.ietf.org) (Quit: josh)
[18:00:42] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[18:00:55] *** Joins: skeet70 (skeet70@moz-156ACA63.msu.montana.edu)
[18:02:14] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:03:24] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Client exited)
[18:05:26] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[18:06:43] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:08:46] *** Quits: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP) (Ping timeout)
[18:14:51] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[18:16:08] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: ZZZzzz…)
[18:16:27] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[18:17:20] *** Joins: pyrac (pyrac@moz-8356B7F.w90-5.abo.wanadoo.fr)
[18:19:59] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[18:20:26] *** Joins: jgilbert (jgilbert@moz-4C088FCE.hsd1.ca.comcast.net)
[18:21:02] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[18:21:32] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[18:22:25] *** Quits: jeyraof_ (uid6796@moz-31ABA2C0.irccloud.com) (Input/output error)
[18:22:25] *** Quits: Aetherspawn_BNC (uid6924@moz-31ABA2C0.irccloud.com) (Input/output error)
[18:25:05] *** Quits: hongminhee (sid295@moz-5F4AA75A.irccloud.com) (Input/output error)
[18:25:05] *** Quits: wilfred (sid159@moz-5F4AA75A.irccloud.com) (Input/output error)
[18:25:05] *** Quits: etrepum (sid763@moz-5F4AA75A.irccloud.com) (Input/output error)
[18:25:05] *** Quits: sawrubh (uid6719@moz-5F4AA75A.irccloud.com) (Client exited)
[18:25:05] *** Quits: revls (uid14245@moz-5F4AA75A.irccloud.com) (Broken pipe)
[18:27:21] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[18:28:14] *** Joins: wilfred (sid159@moz-5F4AA75A.irccloud.com)
[18:28:29] *** Quits: netoarmando (uid10138@moz-E77DEB21.irccloud.com) (Input/output error)
[18:28:29] *** Quits: ggherdov_ (sid11402@moz-E77DEB21.irccloud.com) (Input/output error)
[18:28:29] *** Quits: geomyidae__ (uid214@moz-E77DEB21.irccloud.com) (Input/output error)
[18:28:29] *** Quits: gazoombo (sid6629@moz-E77DEB21.irccloud.com) (Input/output error)
[18:28:56] *** Joins: hongminhee (sid295@moz-5F4AA75A.irccloud.com)
[18:30:21] <nmatsakis> ChrisMorgan: ping
[18:31:19] *** Joins: etrepum (sid763@moz-5F4AA75A.irccloud.com)
[18:31:42] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[18:32:13] *** Joins: geomyidae__ (uid214@moz-E77DEB21.irccloud.com)
[18:32:25] *** Joins: SiegeLord (sl@moz-1DF56822.twcny.res.rr.com)
[18:33:57] *** Quits: brendanc (brendan@moz-CA4BEC19.cs.ubc.ca) (Ping timeout)
[18:33:58] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Ping timeout)
[18:33:58] *** Joins: brendanc (brendan@moz-CA4BEC19.cs.ubc.ca)
[18:33:59] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[18:34:26] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[18:35:38] *** Quits: pyrac (pyrac@moz-8356B7F.w90-5.abo.wanadoo.fr) (Quit: pyrac)
[18:35:44] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:36:05] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:37:32] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[18:37:35] <bstrie> nmatsakis: I think he is asleep right now
[18:37:48] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[18:39:15] <Amanieu> jason_: Another issue in your chase-lev deque: the members of Array<T> don't need to be atomic since they are constant once the array has been created
[18:39:45] *** Joins: pyrac (pyrac@moz-8356B7F.w90-5.abo.wanadoo.fr)
[18:40:25] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[18:43:52] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[18:44:03] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[18:44:48] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[18:45:21] *** Quits: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de) (Quit: Quitting)
[18:45:39] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:46:39] *** Joins: simlay (simlay@moz-F7483596.hsd1.ca.comcast.net)
[18:47:20] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[18:48:59] *** Quits: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP) (Quit: WeeChat 0.4.2)
[18:49:31] *** Joins: bynaryshef (bynaryshef@moz-EA9AD1CC.mem.bellsouth.net)
[18:50:46] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[18:50:46] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:51:27] *** Quits: skeet70 (skeet70@moz-156ACA63.msu.montana.edu) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:51:58] *** Joins: bgiohiuhu89hh (kuyhbg8790@7B9F673F.C02B35F4.D623D704.IP)
[18:52:09] *** Joins: DasIch_ (dasich@moz-5EDA591.de)
[18:52:12] *** Quits: DasIch_ (dasich@moz-5EDA591.de) (Quit: DasIch_)
[18:52:48] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[18:52:58] *** Quits: bgiohiuhu89hh (kuyhbg8790@7B9F673F.C02B35F4.D623D704.IP) (User has been banned from Mozilla (abuse))
[18:53:24] *** Quits: DasIch (dasich@moz-5EDA591.de) (Quit: leaving)
[18:54:02] <pcwalton> acrichto: are there plans for select on I/O and pipes?
[18:54:12] <pcwalton> I have to rip all the uv out of servo because I can't select :(
[18:54:13] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[18:54:25] <acrichto> pcwalton: not in my head, no, but I know that it's something that would be very desirable
[18:54:31] <pcwalton> I think we need it before 1.0
[18:54:38] <pcwalton> there's little point in working on uv if we can't use it in servo
[18:55:03] <acrichto> hm, I'd have to think about this, I'm still not entirely sure what it would really mean to select over I/O events
[18:55:47] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[18:55:53] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[18:57:28] *** Joins: Blub\w (wry@moz-32B459F5.wireless.dyn.drei.com)
[18:57:38] <pcwalton> I think we need some sort of Selectable trait
[18:57:53] <pcwalton> and you can gather up Selectable things and it'll tell you which you can read from without blocking
[18:58:13] *** Joins: sawrubh (uid6719@moz-5F4AA75A.irccloud.com)
[18:58:41] *** Joins: gazoombo (sid6629@moz-E77DEB21.irccloud.com)
[18:58:56] <acrichto> I'd have to see what uv does when we cancel a read when there's definitely data pending for the red
[18:59:03] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[18:59:09] <acrichto> b/c what if you have two sockets that are both getting read and they both get data
[18:59:15] <acrichto> where's the second one get buffered?
[18:59:19] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[18:59:26] <acrichto> uv may "just handle this" though
[18:59:42] *** Joins: jeyraof_ (uid6796@moz-31ABA2C0.irccloud.com)
[18:59:52] *** Joins: Aetherspawn_BNC (uid6924@moz-31ABA2C0.irccloud.com)
[19:00:30] *** Quits: andre (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[19:01:04] *** Quits: lfox (lfox@moz-861E573F.nyc.biz.rr.com) (Quit: ZZZzzz…)
[19:01:32] *** Joins: netoarmando (uid10138@moz-E77DEB21.irccloud.com)
[19:01:56] *** Quits: alan (alan@moz-FE02DD30.sat6.rackspace.com) (Ping timeout)
[19:02:54] *** Quits: pyrac (pyrac@moz-8356B7F.w90-5.abo.wanadoo.fr) (Quit: pyrac)
[19:03:33] *** Joins: DasIch (dasich@moz-5EDA591.de)
[19:03:38] *** Quits: DasIch (dasich@moz-5EDA591.de) (Quit: DasIch)
[19:03:38] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[19:04:16] *** Joins: alan (alan@21F75203.1983C9D0.839F6EC0.IP)
[19:04:24] *** Joins: ggherdov_ (sid11402@moz-E77DEB21.irccloud.com)
[19:04:27] *** jorendorff is now known as jorendorff_away
[19:05:17] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Ping timeout)
[19:05:43] *** Joins: DasIch (dasich@moz-5EDA591.de)
[19:05:59] *** Quits: DasIch (dasich@moz-5EDA591.de) (Quit: leaving)
[19:06:23] *** Joins: DasIch (dasich@moz-5EDA591.de)
[19:06:30] *** Joins: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de)
[19:06:42] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[19:09:27] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: ZZZzzz…)
[19:09:43] *** Joins: revls (uid14245@moz-5F4AA75A.irccloud.com)
[19:09:58] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[19:10:44] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[19:11:07] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Ping timeout)
[19:14:51] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:18:26] *** Joins: Zoey (Mibbit@89490AA3.EED084F5.B37D5E54.IP)
[19:18:51] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[19:19:08] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[19:20:03] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[19:20:11] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[19:21:46] *** Quits: bynaryshef (bynaryshef@moz-EA9AD1CC.mem.bellsouth.net) (Quit: This computer has gone to sleep)
[19:22:25] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[19:22:36] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[19:24:36] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[19:24:39] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[19:25:33] *** Parts: mikezaby (mikezaby@moz-B26868E.home.otenet.gr) ()
[19:26:04] *** Quits: alonlevy (alon@moz-B0E66DB7.static.bezeqint.net) (Ping timeout)
[19:26:59] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:27:00] *** ChanServ sets mode: +ao brson brson
[19:27:29] *** Quits: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de) (Quit: Leaving.)
[19:27:38] *** Joins: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de)
[19:28:05] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[19:29:13] *** Quits: andrew-__ (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[19:30:50] *** Joins: mib_11gm0b (Mibbit@19B4F7A4.716DD980.59D37A3.IP)
[19:30:56] *** Quits: mib_11gm0b (Mibbit@19B4F7A4.716DD980.59D37A3.IP) (Quit: mib_11gm0b)
[19:31:04] *** Joins: yoshi (Mibbit@19B4F7A4.716DD980.59D37A3.IP)
[19:31:34] <Zoey> hi! i am interested in contributing as a part of OPW . i am particularly interested in working on bugs 7312 and 8763.
[19:32:16] <Zoey> So, can someone please explain me what i need to do in these bugs?
[19:32:40] *** Quits: eevee (eevee@moz-7B6C48E3.evrt.wa.frontiernet.net) (Ping timeout)
[19:32:41] *** Quits: axitkhurana (Adium@B0025550.10B6194D.6AA50C35.IP) (Quit: Leaving.)
[19:33:56] <tjc> Zoey: Great!
[19:34:05] <tjc> I have to refresh my memory as to what those bugs are
[19:34:45] *** Quits: jgilbert (jgilbert@moz-4C088FCE.hsd1.ca.comcast.net) (Ping timeout)
[19:35:04] <tjc> Zoey: I think 8763 is the easier one of the two
[19:35:39] <tjc> Zoey: If you wanted to work on 8763, the first step would be writing a test case that shows the behavior that's wrong and that you want to fix. Test cases for this kind of thing are in rust/src/test/compile-fail
[19:36:00] <tjc> so create a new one that contains the code that jdm pasted on the bug, run rustc, and make sure you get the same (wrong) behavior the bug describes
[19:36:02] <tjc> That's the first step
[19:36:25] <Zoey> tjc: ok.can this coding me done in c also?
[19:36:26] <tjc> The second step, of course, is fixing it. First you want to find the code that's printing the "Found value name used as a type" error message; it'll be somewhere in src/librustc/middle/typeck
[19:36:38] <tjc> Zoey: No, the Rust compiler is written in Rust, so anything you do for the Rust project will be in Rust
[19:36:43] <tjc> (with a few exceptions that aren't worth mentioning)
[19:36:54] <tjc> but if you have programmed in C, that will make it easier for you to learn Rust
[19:37:24] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[19:38:01] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[19:38:39] *** Quits: kellogh (timkellogg@moz-68DF7EF7.teliax.com) (Quit: kellogh)
[19:43:32] *** Quits: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de) (Quit: Leaving.)
[19:44:53] <Zoey> tjc: i searched the bug in bugzilla but the bug it shows doesn't fit the bug description shown on the site
[19:45:20] <tjc> Zoey: We don't use Bugzilla for Rust -- where are you looking?
[19:45:21] *** Joins: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de)
[19:45:22] <tjc> as in, what URL?
[19:45:37] *** Joins: kellogh (timkellogg@moz-68DF7EF7.teliax.com)
[19:46:29] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[19:46:59] *** jdm is now known as jdm|f00ding
[19:47:15] <Zoey> tjc: https://bugzilla.mozilla.org/show_bug.cgi?id=8763
[19:50:07] <tjc> Zoey: Yeah, we don't use Bugzilla for Rust. It's a good idea to read over the instructions at https://wiki.mozilla.org/GNOME_Outreach_December2013
[19:50:12] <tjc> They have everything you need to get started :-)
[19:54:47] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[19:55:00] *** Joins: alonlevy (alon@moz-B0E66DB7.static.bezeqint.net)
[20:00:52] *** Quits: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net) (Quit: Leaving)
[20:01:18] *** Joins: eevee (eevee@moz-7B6C48E3.evrt.wa.frontiernet.net)
[20:01:32] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[20:04:16] *** Joins: heftig (heftig@moz-F6E3121.dip0.t-ipconnect.de)
[20:04:39] *** Joins: skeet70 (skeet70@moz-697F48F2.bzm-mt.client.bresnan.net)
[20:06:05] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[20:06:09] *** jdm|f00ding is now known as jdm
[20:06:16] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[20:06:53] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[20:07:07] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[20:08:08] <Liam`> I'm in the middle of my third read of the Rust tutorial (the first two on 0.8, this one on master), and I always become lost on section 9, "Boxes." They look a lot like pointers... but not quite. How do they differ?
[20:08:10] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: ZZZzzz…)
[20:08:31] <benh> They're pretty much pointers
[20:09:00] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[20:09:11] <benh> ~ is pretty much syntax sugar for malloc, with guaranteed free() at the end of the lifetime
[20:09:38] <SiegeLord> I think of a box as a type that has fixed size, but can store things of arbitrary size
[20:09:56] <Liam`> so... a pointer
[20:09:58] <SiegeLord> Sort of a more abstract concept than a pointer
[20:10:03] *** Joins: Ms2ger (Ms2ger@57ACE628.C60A97A6.F9FB0584.IP)
[20:10:08] <benh> ... we used to have another box type, but we're a bit embarassed of it / it's gonna change / it's flagged as unstable right now and I guess someone deleted the relevant bis from the tutorial
[20:10:17] <Liam`> the @?
[20:10:20] <benh> yeah.
[20:10:25] <Liam`> yeah, i never quite understood the difference
[20:10:27] <SiegeLord> You wouldn't call & a box, for example
[20:10:29] <benh> ~ is pretty much unique_ptr in C++
[20:10:36] <SiegeLord> Even though & is just as much a pointer as ~ is
[20:10:49] <benh> or, well, a pointer with the static constraint that free() is called when it falls out of scope
[20:11:02] <Liam`> benh: yeah, i read https://github.com/mozilla/rust/wiki/Rust-for-CXX-programmers - except i'm not a C++ programmer :|
[20:11:08] <benh> ok well
[20:11:20] <benh> it's basically about the guarantee that you can't duplicate the variable holding the ~
[20:11:29] <benh> without also duplicating the thing inside the box
[20:11:37] <benh> so there's always a single owner of the allocation
[20:11:41] *** Joins: geoffhill (geoffhill@moz-244CF33A.amazon.com)
[20:11:52] <benh> it's built on top of pointers, sure, but so are lots of things ;)
[20:12:35] <Liam`> do you have one of those "Rust for X programmers" pages for Golang?
[20:12:47] <benh> mhmmm doubt it
[20:13:01] <Liam`> aw
[20:13:07] <benh> A lot of the concepts (at least used to?) map to C++ concepts fairly closely
[20:13:33] <benh> so maybe that's why there's that page
[20:14:01] <benh> Liam`: but you can pretty much pretend that ~SomeType works just like SomeType, except that you're allowed to use it recursively
[20:14:21] *** Joins: pyrac (pyrac@moz-8356B7F.w90-5.abo.wanadoo.fr)
[20:14:35] <Liam`> "use it recursively" - like in the example, wherein the struct refers to itself?
[20:14:42] <benh> yeah
[20:15:03] *** sam113101 is now known as sam113101_afk
[20:15:09] *** Joins: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[20:15:38] <simlay> Huh.  That would make linked lists easily freeable.
[20:16:18] *** sam113101_afk is now known as sam113101
[20:16:30] <simlay> For that matter, any data structure involving pointers is just easier to use in some cases.
[20:16:52] <strcat> Liam`: ~T and T both have value semantics, it doesn't really act like a pointer
[20:17:00] <strcat> it exists because it's always pointer-size, not the size of an unboxed object
[20:17:29] <strcat> (the docs in master explain why it exists, don't read the 0.8 ones)
[20:17:37] <Liam`> already reading the master ones
[20:17:54] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[20:19:30] *** Quits: eevee (eevee@moz-7B6C48E3.evrt.wa.frontiernet.net) (Ping timeout)
[20:20:18] *** mm is now known as mm^
[20:22:20] *** Quits: canhtak (canhtak@moz-24F61E55.wl.t.ulaval.ca) (Quit: canhtak)
[20:23:50] <Liam`> >the dot operator applies automatic pointer dereferencing - nice
[20:23:52] *** Joins: eevee (eevee@moz-7B6C48E3.evrt.wa.frontiernet.net)
[20:24:55] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Ping timeout)
[20:26:02] *** Quits: ozten (ozten@moz-BC0C74E2.range86-174.btcentralplus.com) (Quit: ozten)
[20:26:49] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[20:27:41] <kmc> Rust and Go are pretty different... Go uses a single garbage-collected heap for everything, like Java or such
[20:28:15] <Liam`> I've come to notice. The rust-lang.org homepage makes it sound just like go, but it's not really
[20:28:15] <kimundi> Go also doesn't have generics
[20:28:19] <kmc> Liam`, benh: I think it's useful to distinguish the pointer from the box it points to
[20:28:25] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[20:28:30] <kmc> so I wouldn't say "boxes are basically pointers" or something like that
[20:28:57] <kmc> a box is a chunk of memory allocated somewhere, a pointer is a value that refers to a box
[20:29:03] <kmc> boxes themselves aren't values
[20:29:30] <benh> kmc: I meant to express that the concept in that chapter of the tutorial was heavily overlapping with some idea of pointers/indirection, and that noticing that shouldn't confuse the reader, really
[20:29:30] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Connection reset by peer)
[20:29:31] <kmc> but we're not consistent about using the terms this way :/
[20:30:02] <benh> agreeing, otherwise, of course :)
[20:31:33] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[20:32:31] <SiegeLord> So... what is ~Foo then
[20:32:39] <SiegeLord> Is it a pointer to a box, or a box?
[20:32:45] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Ping timeout)
[20:32:47] <kmc> a value of type ~Foo is an owning pointer to an owned box containing a Foo
[20:32:58] <kmc> but that's a bit verbose
[20:33:15] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[20:33:35] <kmc> since an owned box is owned by a single pointer, you can kind of think of the box itself as a value, but there can still be other pointers to the box (borrowed pointers, or what I would like to call "references")
[20:34:43] <kmc> anyway, distinguishing values from the boxes they live in is vital if you have mutation in your language (which we do) and want to talk about it with precision
[20:34:49] <kmc> unfortunately most languages mangle this terribly...
[20:35:03] *** Joins: canhtak (canhtak@moz-24F61E55.wl.t.ulaval.ca)
[20:35:38] <strcat> kmc: I don't think it makes sense to describe ~ that way
[20:35:46] <strcat> it doesn't have to allocate memory if the type is no larger than a pointer
[20:36:17] <kmc> hm, interesting point
[20:36:18] <strcat> ~T and T have value semantics, ~T maintains an invariant that it is pointer-size (usually via an allocation and indirection, but not necessarily)
[20:36:39] <strcat> and it always has a dtor (unlike T, which may not)
[20:36:55] *** jorendorff_away is now known as jorendorff
[20:37:10] <strcat> there's potentially a use case for making ~T *always* allocate but I don't see what it would be :)
[20:37:29] <kmc> are there cases today where it doesn't?
[20:37:30] <strcat> ~() is already implementation defined since it's a call to malloc (it may be null)
[20:37:43] <strcat> malloc(0) can return NULL
[20:37:47] <strcat> because free(NULL) is valid
[20:37:51] <kmc> right
[20:38:17] <LU324> http://pastebin.com/NBg1yrdk <- how to fix this error? as i understood you can use anything in std without somehow explicitly importing it
[20:38:25] <strcat> zero-size types also mean not every global has a unique address, even if we don't use unnamed_addr on them
[20:38:26] <strcat> and so on ;p
[20:38:39] <strcat> they are a good excuse for implementing other optimizations
[20:38:47] <strcat> (thank you, zero size types!) ;p
[20:38:51] *** Quits: mixi (mixi@moz-DBD8904A.org) (Ping timeout)
[20:40:10] *** jorendorff is now known as jorendorff_away
[20:41:31] *** Quits: Jackneilll (Jackneill@moz-9DFDBEFF.pool.digikabel.hu) (Input/output error)
[20:41:36] *** jorendorff_away is now known as jorendorff
[20:43:36] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[20:46:30] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[20:48:24] *** Quits: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: Ex-Chat)
[20:52:57] *** Joins: earlz2 (earlz@3BA8656D.F04AFED0.49B48A1E.IP)
[20:53:23] *** Quits: moostik (Icedove@moz-3E868786.w90-2.abo.wanadoo.fr) (Ping timeout)
[20:53:25] <earlz2> So, with segmented stacks being gone, what else is stopping rust from using vanilla LLVM? 
[20:53:55] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[20:54:23] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[20:54:24] <jason_> Amaranth: i've updated the chase-lev code a bit. i still don't think it is entirely correct, but getting there
[20:54:40] <Amaranth> I think you might be looking for pcwalton
[20:54:57] <jason_> oh, tab complete messed me up
[20:55:03] <jason_> Amanieu: ^
[20:57:01] <kimundi> LU324: Not everything in std is automatically in scope, only those exports in  std::prelude are
[20:57:34] *** Joins: jeffcutsinger (Mibbit@moz-7E34AC5D.dhcp.roch.mn.charter.com)
[20:58:10] <strcat> earlz2: https://github.com/alexcrichton/llvm/commit/03f3afd17b415956c7ea0e437061218296cd6a79
[20:58:17] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[20:58:31] <strcat> and... likely nothing else
[20:58:51] <strcat> that bug might be fixed by now though
[20:59:05] *** Quits: Zoey (Mibbit@89490AA3.EED084F5.B37D5E54.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:59:40] <earlz2> and after that's done, Rust will run everywhere LLVM does? :) 
[21:00:23] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[21:00:27] <LU324> kimundi: i know, i'm still prefixing them with the std::... namespace
[21:00:33] <LU324> if that's what you meant
[21:01:24] *** Quits: eddyb (eddy@2C8F2179.17CB6122.FCAAE698.IP) (Ping timeout)
[21:01:50] <kimundi> Hm, not sure if this is the issue then, but prefixing with std:: only works in your crate root, because it is local path lookup. prefixing with ::std:: should work everywhere though
[21:02:07] *** Joins: CarpNet (Alasdair@moz-25C796BC.cable.virginm.net)
[21:02:26] <kimundi> AS ::std:: is global path lookup starting from your crate root
[21:02:55] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[21:03:42] <acrichto> earlz2: we're still going to be tied to LLVM's segmented stacks while we use them to detect stack overflow
[21:03:52] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[21:03:52] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:04:05] *** Joins: a_m0d (dschoof@moz-A861BB8.coyotecorp.com)
[21:05:58] <earlz2> I'm just ready to be able to use Rust on non-x86 platforms :) I'm sure stuff in std might be non-portable, but I'm really interested in using the core compiler for low level programming
[21:07:05] <strcat> earlz2: you can use rust on low-level platforms via cross-compilation
[21:07:16] <strcat> you don't have to use segmented stacks
[21:08:30] <earlz2> that's possible today? I thought the non-vanilla llvm kept that from working because Rust's llvm didn't work on other platforms
[21:09:26] <strcat> earlz2: you can compile with rustc --emit-llvm and then compile the output with clang
[21:10:14] <mm^> earlz2: what non-x86 platforms? We have ARM support
[21:10:30] <mm^> I think somebody might have hacked up atmega support at some point too
[21:10:55] <earlz2> I thought the thing was that rust used custom bytecodes or some such, at least before segmented stacks were dropped
[21:10:58] <strcat> rust as a language has support for anything clang does
[21:11:03] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[21:11:03] *** ChanServ sets mode: +o tjc
[21:11:06] <strcat> the standard library doesn't
[21:11:53] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[21:12:26] <earlz2> ah. ok then
[21:12:41] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[21:13:16] <earlz2> Yea, it'd be cool to use Rust on AVR. Searching for avr on llvm just gives me some github page that's 5 years old with some patches heh
[21:13:58] *** Joins: idog98 (idog98@moz-221584FD.torservers.net)
[21:15:57] *** Quits: pyrac (pyrac@moz-8356B7F.w90-5.abo.wanadoo.fr) (Quit: pyrac)
[21:16:35] *** Quits: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de) (Quit: Leaving.)
[21:16:59] *** Quits: heftig (heftig@moz-F6E3121.dip0.t-ipconnect.de) (Quit: Quitting)
[21:17:31] *** Quits: kellogh (timkellogg@moz-68DF7EF7.teliax.com) (Quit: kellogh)
[21:17:56] *** Joins: heftig (heftig@moz-F6E3121.dip0.t-ipconnect.de)
[21:20:36] *** Joins: jeffdb (jeffbelg@moz-ABCAA64B.efi.com)
[21:21:10] *** Joins: kellogh (timkellogg@moz-68DF7EF7.teliax.com)
[21:22:05] *** Joins: eddyb9 (eddy@2C8F2179.17CB6122.FCAAE698.IP)
[21:25:24] *** Joins: josh (josh@moz-E6247462.meeting.ietf.org)
[21:26:24] <LU324> kimundi: ok, but is it really right that i should use different syntax to use the stdlib depending on what file the code is in?
[21:26:51] <LU324> even f64 seems to be giving me errors unless i write ::f64
[21:26:51] *** Joins: mib_lfkoe8 (Mibbit@moz-A5A5745.libero.it)
[21:27:28] <strcat> LU324: that's not necessary for f64
[21:28:06] *** Parts: mib_lfkoe8 (Mibbit@moz-A5A5745.libero.it) ()
[21:28:12] *** Quits: canhtak (canhtak@moz-24F61E55.wl.t.ulaval.ca) (Quit: canhtak)
[21:28:25] <LU324> actually nevermind about te f64, it's still saying it's unresolved even with the ::
[21:29:32] <kimundi> LU324: Its not different per file, its just two distinct ways to reach items in your module hierachy - the rules are identical everywhere
[21:29:54] <kimundi> LU324: Did you read the module part of the tutorial?
[21:30:06] *** Quits: jesse98 (jjones@6251EDC2.15651213.B46B86FA.IP) (Ping timeout)
[21:30:43] *** Joins: jesse98 (jjones@6251EDC2.15651213.B46B86FA.IP)
[21:31:02] *** Joins: g3orge (g3orge@moz-CE3A1669.access.hol.gr)
[21:33:56] *** Quits: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[21:35:10] *** Joins: brendan (brendaneic@323D4905.A5FB4ABA.FE58E87C.IP)
[21:36:30] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[21:37:28] *** Joins: moostik (Icedove@moz-3E868786.w90-2.abo.wanadoo.fr)
[21:47:36] *** Quits: boredomist (ruqs@8186917.CC8FA3EE.E3401B6E.IP) (Client exited)
[21:47:44] *** Joins: boredomist (ruqs@8186917.CC8FA3EE.E3401B6E.IP)
[21:48:14] *** Joins: ozten (ozten@moz-BC0C74E2.range86-174.btcentralplus.com)
[21:48:38] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[21:49:59] *** Quits: g3orge (g3orge@moz-CE3A1669.access.hol.gr) (Quit: leaving)
[21:52:21] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[21:53:39] *** Joins: tautologico (shung@703660AA.CFE755C8.C27E1635.IP)
[21:53:39] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[21:54:47] *** Quits: alonlevy (alon@moz-B0E66DB7.static.bezeqint.net) (Ping timeout)
[21:57:15] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[21:57:29] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[21:57:41] *** Quits: geoffhill (geoffhill@moz-244CF33A.amazon.com) (Quit: geoffhill)
[21:58:09] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[21:58:12] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[21:58:19] *** Quits: Blub\w (wry@moz-32B459F5.wireless.dyn.drei.com) (Quit: back tomorrow :<)
[21:59:43] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[22:00:27] *** Quits: feduser (feduser@DBDDF1EC.46326E73.650F25DA.IP) (Ping timeout)
[22:02:02] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:02:30] *** Quits: kellogh (timkellogg@moz-68DF7EF7.teliax.com) (Quit: kellogh)
[22:02:46] *** Quits: Palmik (palmik@moz-DEC2AB.pks.muni.cz) (Quit: Lost terminal)
[22:02:50] *** Parts: idog98 (idog98@moz-221584FD.torservers.net) ()
[22:03:09] *** Quits: yoshi (Mibbit@19B4F7A4.716DD980.59D37A3.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:04:01] *** Quits: fabiand (fabiand@moz-4319220B.adsl.alicedsl.de) (Quit: Verlassend)
[22:04:19] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[22:04:32] *** Joins: geoffhill (geoffhill@moz-738DC0DB.org)
[22:04:55] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[22:04:55] *** ChanServ sets mode: +ao brson brson
[22:05:10] <LU324> kimundi: just looked at it again. so to use stdlib functions i should use either write `::std::...` or have a `use std::...` to make the name shorter, correct?
[22:06:57] <dbaupp> ChrisMorgan: https://github.com/mozilla/rust/pull/10321 "In just a simple benchmark of reading/writing 4k of 0s at a time between a tcp client/server in separate processes on the same system, I have witnessed the throughput increase from ~750MB/s to ~1200MB/s with this change applied."
[22:08:48] *** Quits: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP) (Input/output error)
[22:10:20] *** Joins: kellogh (timkellogg@moz-68DF7EF7.teliax.com)
[22:10:29] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[22:11:16] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:11:37] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:12:20] *** Joins: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[22:13:20] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[22:18:42] <sfackler> wow!
[22:19:25] <mm^> yeah 1200MB/s is more like what I'd expect
[22:19:26] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:19:53] <mm^> Depends how fast the computer is I guess
[22:21:09] <kimundi> LU324: yes
[22:21:19] *** Joins: canhtak (canhtak@moz-44AEB22E.wl.t.ulaval.ca)
[22:22:06] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[22:22:30] *** Quits: earlz2 (earlz@3BA8656D.F04AFED0.49B48A1E.IP) (Quit: Leaving.)
[22:23:24] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[22:23:38] <LU324> kimundi: ok, thanks
[22:23:38] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[22:23:45] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[22:24:29] *** Quits: kellogh (timkellogg@moz-68DF7EF7.teliax.com) (Quit: kellogh)
[22:25:32] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[22:26:55] <pcwalton> BufReader::new(my_buffer).read_le_32() is a pretty slick way to convert an array of bytes to an integer
[22:27:03] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[22:27:21] *** Quits: canhtak (canhtak@moz-44AEB22E.wl.t.ulaval.ca) (Quit: canhtak)
[22:30:04] *** Quits: nkoep (nik@moz-34276308.pool.mediaways.net) (Ping timeout)
[22:30:16] *** Joins: nkoep (nik@moz-34276308.pool.mediaways.net)
[22:30:44] <jeffdb> how do I swap two values within the same vector?
[22:31:21] <jeaye> jeffdb: There is std::util::swap
[22:31:26] <jeaye> http://static.rust-lang.org/doc/master/std/util/fn.swap.html
[22:32:06] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[22:32:36] <kimundi> in a vactor you need to use the swap method though
[22:32:44] <kimundi> on a vector
[22:33:01] *** Parts: willingc (willingc@moz-B4760708.san.res.rr.com) ()
[22:33:24] <kimundi> util::swap doesn't work, because it would need two mutable references to the same value, in this case the vector itself
[22:33:36] <jeffdb> kimundi: thanks! that's what i needed
[22:36:09] <jeffdb> the way the documentation is structured makes it a bit hard to find that kind of thing. you have to look at every trait something implements to find all it's methods
[22:38:04] *** Joins: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP)
[22:38:04] *** ChanServ sets mode: +o jdm
[22:38:50] *** Joins: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[22:38:51] *** Quits: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[22:38:52] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Connection reset by peer)
[22:39:02] *** Quits: CarpNet (Alasdair@moz-25C796BC.cable.virginm.net) (Quit: Leaving)
[22:39:16] *** Joins: mixi (mixi@moz-DBD8904A.org)
[22:39:21] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[22:39:34] <aatch> jeffdb, it's way better than it used to be.
[22:40:12] *** Joins: canhtak (canhtak@moz-44AEB22E.wl.t.ulaval.ca)
[22:41:25] *** Quits: canhtak (canhtak@moz-44AEB22E.wl.t.ulaval.ca) (Quit: canhtak)
[22:42:21] <jeffdb> aatch: It's still very helpful. I've just noticed that the one thing I consistently wish it had was like a tree view on the side, or something so you could see how all the traits related to a given struct or module
[22:43:05] <tautologico> I manage to find what's calling the linking issue with extern mod foo(name="bar") versus extern mod foo = "bar"
[22:43:07] <tautologico> https://github.com/mozilla/rust/issues/10265
[22:43:30] <tautologico> *what's causing
[22:43:50] <tautologico> I don't know if the package_id should be mandatory
[22:44:03] *** Quits: josh (josh@moz-E6247462.meeting.ietf.org) (Quit: josh)
[22:45:49] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[22:47:08] *** Quits: nkoep (nik@moz-34276308.pool.mediaways.net) (Ping timeout)
[22:48:18] *** Joins: nkoep (nik@moz-34276308.pool.mediaways.net)
[22:50:39] *** Joins: gareth0 (gareth0@7B67FAFD.7B34A6AE.2653C6EC.IP)
[22:51:41] <kmc> tjc et al: I'm running rustpkg --rust-path-hack install rust-alert, and it seems to be looking at test.rs rather than lib.rs inside the rust-alert directory
[22:51:49] <kmc> do you know why? also what's --rust-path-hack do anyway
[22:52:14] <tjc> kmc: hmm
[22:52:33] <tjc> kmc: is this in the same servo repo as before with the same RUST_PATH?
[22:52:35] <tjc> or a separate thing?
[22:52:56] <kmc> it is, but I have some local changes
[22:53:11] <tjc> ok
[22:53:23] <kmc> if I just rm test.rs it seems to do the right thing
[22:53:25] <tjc> --rust-path-hack means it will accept source dirs being in the RUST_PATH
[22:53:27] <tjc> that aren't workspaces
[22:53:28] <tjc> so like
[22:53:38] <tjc> normally you would have to set your RUST_PATH to some_workspace
[22:53:47] <tjc> with --rust-path-hack you can also set it to some_workspace/src/rust-alert
[22:53:51] <tjc> and it will understand what that means
[22:53:55] <kmc> i see
[22:54:26] *** Quits: nkoep (nik@moz-34276308.pool.mediaways.net) (Ping timeout)
[22:54:48] <kmc> is there some RUST_LOG output I can look at to determine why it's looking at test.rs?
[22:54:57] *** Joins: nkoep (nik@moz-34276308.pool.mediaways.net)
[22:55:06] <tjc> kmc: yeah, RUST_LOG=rustpkg
[22:55:15] <tjc> if you can pastebin the output and also pastebin the command, we can both look at it :-)
[22:55:41] <kmc> okay
[22:57:18] <simlay> What's the difference between `spawn_with!` and `spawn_with`?  It's possible I simply don't undestrand how bangs change functions.
[22:58:04] <kmc> spawn_with! is a macro I defined
[22:58:11] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[22:58:17] <pcwalton> brson: acrichto: I actually think that flat pipes are perhaps best implemented with a MsgReader and MsgWriter trait
[22:58:20] <pcwalton> that can write serialized things
[22:58:24] <kmc> names with bangs at the end are macros or built-in special syntax, not ordinary functions
[22:58:27] *** Quits: nkoep (nik@moz-34276308.pool.mediaways.net) (Ping timeout)
[22:58:32] <pcwalton> and then an impl<R:Reader> MsgReader for R
[22:58:36] <pcwalton> and likewise for MsgWriter
[22:58:45] <kmc> simlay: https://github.com/mozilla/servo/blob/master/src/components/main/macros.rs#L14-L24
[22:58:51] *** Joins: diegoyam_ (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[22:58:54] <pcwalton> they contain read_msg and write_msg functions that read and write serialized messages
[22:58:55] <kmc> simlay: http://static.rust-lang.org/doc/master/tutorial-macros.html
[22:59:07] <acrichto> pcwalton: what would you call the methods and how do you specify the serialization format?
[22:59:20] <pcwalton> acrichto: read_msg and write_msg, and they'd be polymorphic over the serialization format
[22:59:33] <pcwalton> we have the capability to do that, Encodable<Format> and Decodable<Format>
[22:59:58] *** Joins: nkoep (nik@moz-34276308.pool.mediaways.net)
[23:00:07] <acrichto> pcwalton: hm would it be fn read_msg<D>(&mut self, deserializer: &mut D) ?
[23:00:12] <acrichto> -> T
[23:00:15] <pcwalton> something like that yeah
[23:00:23] <kmc> simlay: spawn_with!(task, [a,b], { ... code ... }) expands to  do task.spawn_with((a,b)) |(a,b)| { ... code ... }
[23:00:28] <pcwalton> we could make a convenience method that just uses EBML
[23:00:35] <pcwalton> and uses a length method
[23:01:01] <pcwalton> I've implemented something similar in Servo hardwired to EBML
[23:01:22] <pcwalton> and it's literally less than 40 lines of code with comments
[23:01:31] <kmc> tjc: I guess if you have a test.rs then rustpkg will build it even if it's not mentioned from the crate root
[23:02:25] <tjc> kmc: Oh… yes, that's the current behavior. I'm not sure if it's right or not. See https://github.com/mozilla/rust/issues/7240
[23:02:27] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (Connection reset by peer)
[23:04:28] <pcwalton> acrichto: I'm writing this Servo stuff so that it can be basically copy and pasted into the Rust stdlib
[23:04:34] <pcwalton> as rt::io::native::unix
[23:04:35] <pcwalton> or whatever
[23:04:53] <pcwalton> and then the Servo bits can be nuked :)
[23:05:12] <pcwalton> let's just move Servo into the rust stdlib
[23:05:28] <acrichto> pcwalton: nice (native::unix)
[23:05:29] <pcwalton> use std::browser::Browser; fn main() { Browser::new() }
[23:05:37] <acrichto> "batteries included"
[23:05:41] <pcwalton> yes
[23:05:52] <acrichto> "jetpack included"
[23:06:16] * aatch lugs in diesel generator
[23:06:16] <pcwalton> native client included!
[23:06:23] <pcwalton> ActiveX included!
[23:06:25] *** Quits: eddyb9 (eddy@2C8F2179.17CB6122.FCAAE698.IP) (Ping timeout)
[23:06:32] *** Quits: nkoep (nik@moz-34276308.pool.mediaways.net) (Ping timeout)
[23:06:34] <mletterle> I just threw up in my mouth.. a little bit.
[23:06:39] <pcwalton> :)
[23:07:05] <kmc> maybe we can recompile ActiveX plugins to comply with the NaCl sandbox :D
[23:07:15] <tjc> kmc: Hmm, ok, my rust-alert doesn't seem to have a lib.rs -- just a test.rs; I guess I still havenb't managed to recreate the revisions you have
[23:07:20] * pcwalton resists the urge to snark "but I repeat myself"
[23:07:24] <kmc> tjc: it's ok, I think I got everything sorted out
[23:07:29] <tjc> kmc: oh, cool
[23:07:37] <tjc> now I'll just go back to trying to recreate the same revisions you have :-)
[23:07:46] *** Quits: Ms2ger (Ms2ger@57ACE628.C60A97A6.F9FB0584.IP) (Quit: nn)
[23:10:22] *** Joins: nkoep (nik@moz-DCF87473.pool.mediaways.net)
[23:11:09] <jack> tjc: it's all revisions from my repo
[23:11:21] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Connection reset by peer)
[23:11:25] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[23:11:26] *** ChanServ sets mode: +ao pcwalton pcwalton
[23:11:31] <jack> so unelss you have fetched from metajack/rust-alert you probably won't have the rustpkg branch
[23:13:20] <tjc> jack: hmmm...
[23:14:47] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[23:17:20] *** Joins: mark_edward (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[23:17:33] <mark_edward> ChrisMorgan: ping
[23:18:04] <kmc> I pushed them to my branches yesterday but tjc ended up with different commits despite the same hash and git status showing a clean tree
[23:18:07] <kmc> very confusing
[23:18:19] *** Joins: lfox (lfox@moz-861E573F.nyc.biz.rr.com)
[23:18:23] <tjc> jack: so last night, I asked kmc if he could pastebin his .gitmodules and .git/config files...
[23:18:32] <tjc> and from those files it looks like he is using the mozilla-servo repos
[23:18:36] <tjc> but he seems to have the changes from his own repo
[23:18:40] <tjc> I just don't understand git
[23:18:56] <tjc> I want to be seeing the exact same source tree that kmc is, and somehow this seems impossibly difficult
[23:24:20] *** Joins: eddyb9 (eddy@717B0165.D51DAF03.FB866788.IP)
[23:26:14] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[23:26:52] <tjc> kmc: okay, progress, I checked out a clean copy from scratch and I seem to be seeing your revisions now
[23:26:57] <tjc> (in submodules, that is)
[23:29:10] *** Quits: lfox (lfox@moz-861E573F.nyc.biz.rr.com) (Quit: ZZZzzz…)
[23:30:27] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[23:31:13] *** Quits: ianj (ianjneu@moz-7140CF01.ccs.neu.edu) (Quit: leaving)
[23:33:37] *** Joins: askalski (akuda@325F8E42.CC7751E8.6712E96B.IP)
[23:33:52] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[23:34:15] *** Quits: askalski (akuda@325F8E42.CC7751E8.6712E96B.IP) (Quit: Wychodzi)
[23:35:36] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[23:37:39] *** Quits: simlay (simlay@moz-F7483596.hsd1.ca.comcast.net) (Ping timeout)
[23:45:00] *** Quits: xales (xales@moz-7DEA692E.forevernothing.com) (Quit: Upgrades.)
[23:46:18] *** Joins: xales (xales@moz-7DEA692E.forevernothing.com)
[23:47:21] <pcwalton> acrichto: brson: how do I spawn a task into another OS thread?
[23:47:30] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[23:47:34] <acrichto> pcwalton: std::unstable::run_in_bare_thread
[23:47:50] <acrichto> oh wait not, task::spawn_mode(task::SingleThreaded) or something like that
[23:47:54] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[23:48:15] <Luqman> spawn_sched
[23:48:22] <acrichto> ah that's it ^
[23:48:50] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[23:48:50] <strcat> spawn_sched doesn't seem like it necessarily reserves a thread though
[23:49:17] <strcat> if you spawn_sched and then do an I/O operation, doesn't it steal work from elsewhere?
[23:49:43] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[23:50:33] *** Joins: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net)
[23:51:41] <Luqman> strcat: no, if you make a new scheduler with SingleThreaded it doesn't participate in the work stealing afaik
[23:52:19] * pcwalton idly wonders whether MSG_WAITALL is atomic
[23:53:41] <pcwalton> http://stackoverflow.com/questions/1981372/are-parallel-calls-to-send-recv-on-the-same-socket-valid seems to imply it is
[23:55:26] *** kimundi is now known as zz_kimundi
[23:55:29] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[23:56:32] *** Joins: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net)
[23:58:09] *** Joins: simlay_ (simlay@moz-1C72F8DD.hsd1.ca.comcast.net)
[23:58:39] *** Quits: alan (alan@21F75203.1983C9D0.839F6EC0.IP) (Quit: alan)
[23:59:03] <kmc> tjc: cool, just in time for me to update them again =)
[23:59:11] <tjc> kmc: it's what keeps us in business :-)
[23:59:28] <tjc> kmc: actually, though, I got an error...
[23:59:40] <tjc> kmc: This is on your rustpkg branch, with a fresh checkout, changing nothing locally...
