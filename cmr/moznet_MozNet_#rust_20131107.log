[00:00:07] <tjc> kmc: This -- https://pastebin.mozilla.org/3441296
[00:00:11] <brson> acrichto: kmc: I'm having a very hard time evaluating the correctness of this pull request that is trying to fix a parallel queue https://github.com/mozilla/rust/pull/10258
[00:00:12] <tjc> It's complaining about revisions that don't exist again
[00:00:24] <tjc> before, searching/replacing mozilla-servo with kmacallister worked
[00:00:26] <brson> if anybody wants a stab at it ...
[00:00:27] <tjc> but caused other problems
[00:00:59] <tjc> kmc: do the hashes it's complaining about at least look like your revisions for those submodules?
[00:01:03] <kmc> tjc: maybe you can just add remotes for me
[00:01:04] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Quit: leaving)
[00:01:24] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[00:01:33] <kmc> tjc: yeah, you can check at e.g. https://github.com/kmcallister/servo/tree/rustpkg/src/platform/linux
[00:01:35] <kmc> they do match
[00:01:56] <tjc> kmc: ok. about adding the remotes… I already have origin as git@github.com:kmcallister/servo.git in my .git/config
[00:02:01] <tjc> is there something else you had in mind?
[00:02:13] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[00:02:32] *** Quits: skade (skade@moz-A89F791B.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:03:00] <mletterle> holy rustpkg tmp directories batman!
[00:03:07] *** Joins: skade (skade@moz-A89F791B.pools.arcor-ip.net)
[00:03:12] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[00:03:33] <kmc> I meant adding remotes to the submodules, something like https://pastebin.mozilla.org/3441321
[00:03:50] <acrichto> brson: hm I haven't taken much time to understand those queues, but I'll see if i can take a look at it tonight to try to understand what's going on
[00:03:58] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[00:03:59] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[00:04:21] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Quit: Leaving...)
[00:04:23] <tjc> mletterle: the tmp directories should be removed automatically now. either you have ones from an old version of rust, or you have to upgrade rust :-)
[00:04:31] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[00:04:44] <tjc> kmc: ah, ok, I'll try that
[00:04:51] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Quit: Leaving...)
[00:05:08] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[00:06:08] *** Quits: themgt (themgt@moz-83F07CDA.cm.vtr.net) (Quit: themgt)
[00:06:45] *** Joins: themgt (themgt@moz-83F07CDA.cm.vtr.net)
[00:07:00] <mletterle> tjc: Probably because rustpkg is failing
[00:07:13] <tjc> mletterle: hmm, it should still run the destructors on unwinding, though
[00:07:14] <mletterle> trying to figure out why my extern mod isn't working...
[00:07:37] *** Quits: themgt (themgt@moz-83F07CDA.cm.vtr.net) (Quit: Pogoapp - http://www.pogoapp.com)
[00:09:12] <simlay> kmc: That makes sense now (on the topic of with_spawn!).  I should have done an grep on the codebase to find it.  But so as a follow up, I'm confused how the spawn_with! macro is visible to pipeline.rs.  Is it because servo.rc has `pub mod macro;` and `pub mod pipeline;` and `mod foo;` is sugar for `mod foo { contents of foo.rs or foo/mod.rs };` ?
[00:09:18] *** Joins: canhtak (canhtak@moz-44AEB22E.wl.t.ulaval.ca)
[00:09:37] *** Joins: tikue (tikue_star@61D9B7A5.CD72397.689607DE.IP)
[00:09:53] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[00:10:06] <tikue> is there a way to implement a trait on a module :]
[00:10:15] <tikue> or have a trait with static methods
[00:10:18] <sfackler> simlay: there's a hacky attribute #[macro_escape]; that makes macros visible everywhere in the crate
[00:10:34] <sfackler> tikue: you can have a trait with static methods. Just don't have a self param
[00:11:13] <tikue> sfackler: I figured that's how to do it, but I'm getting strange errors...have you seen this?
[00:11:14] <tikue> !!! (resolving module in lexical scope) module wasn't actually a module!
[00:11:41] <sfackler> what's the line that it's erroring on?
[00:11:46] <mletterle> assertion failed: pkg_src.start_dir.join(p).exists()'
[00:12:18] <sfackler> mletterle: https://github.com/mozilla/rust/issues/10253 maybe?
[00:12:56] <tikue> sfackler: https://gist.github.com/tikue/b9619e847c3ee65e39c4
[00:12:57] *** Quits: darkf (darkf@moz-F9058B8A.net) (Ping timeout)
[00:13:24] <sfackler> tikue: You can't call static trait methods like that yet
[00:13:32] <tikue> sfackler: ah. how do you call them?
[00:13:36] <sfackler> it's actually impossible to call your foo method currently
[00:13:42] <tikue> oh
[00:13:47] <sfackler> add some reference to Self to the method signature
[00:13:49] <sfackler> like
[00:13:56] <mletterle> sfackler: that's it.
[00:13:57] <sfackler> fn foo(_: Option<Self>) -> uint;
[00:14:09] <sfackler> and then call with Foo::foo(None::<Baz>)
[00:14:31] <mletterle> going to see if I can fix it.. because I'm annoyed now.
[00:14:31] <simlay> sfackler: ty. That explains the magic.
[00:14:33] <kmc> simlay: yeah, what sfackler said... macro scoping is weirdly different from other things
[00:14:57] <tikue> sfackler: do you know if there's a relevant issue about this?
[00:14:59] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[00:15:09] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[00:15:43] <kmc> I think they're either private to a module or (with #[macro_escape];) they're visible throughout the whole crate
[00:16:04] *** Quits: brendan (brendaneic@323D4905.A5FB4ABA.FE58E87C.IP) (Quit: brendan)
[00:16:04] <dbaupp> kmc: no, they're just visible one level up with #[macro_escape]
[00:16:08] <kmc> oh
[00:16:14] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[00:16:25] <kmc> could that module have #[macro_escape] too?
[00:16:27] <dbaupp> yes
[00:16:35] <kmc> i see
[00:16:42] <kmc> this resolves some confusion I had on another project, thanks :)
[00:17:27] <sfackler> tikue: not sure. pcwalton was working on this iirc, and there was a bit of discussion about the Self issue earlier today
[00:17:30] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[00:17:30] *** ChanServ sets mode: +o tjc
[00:17:55] <tikue> sfackler: ok, thanks :)
[00:18:44] <tjc> kmc: well, now it got all the way through ../configure
[00:18:57] <tjc> mletterle: that assertion failure is a bug I've fixed but not checked in yet. it means a dependency doesn't exist, though
[00:19:44] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[00:20:48] *** Joins: brendan (brendaneic@323D4905.A5FB4ABA.FE58E87C.IP)
[00:21:03] <mletterle> LIES
[00:21:21] <mletterle> the dependency I'm trying to install has no dependencies of its own.
[00:21:34] <mletterle> and rustpkg builds it.
[00:22:23] *** Parts: simlay_ (simlay@moz-1C72F8DD.hsd1.ca.comcast.net) ()
[00:23:06] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[00:23:07] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[00:23:10] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[00:23:11] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[00:23:31] *** Joins: nif (Mibbit@moz-B6DFA19D.wireless.oberlin.edu)
[00:24:41] *** Joins: tikue_ (tikue@61D9B7A5.CD72397.689607DE.IP)
[00:25:08] *** Quits: tikue_ (tikue@61D9B7A5.CD72397.689607DE.IP) (Client exited)
[00:25:32] *** Quits: sweet_kid (Upasana@71060754.BBD8719.388CF16F.IP) (Quit: Leaving)
[00:26:03] *** Quits: jvshahid (jvshahid@moz-53774307.nycm.ny.megapath.net) (Ping timeout)
[00:26:57] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[00:26:58] <tjc> mletterle: can you pastebin the output of doing RUST_LOG=rustpkg followed by your command?
[00:26:59] <tjc> Thanks
[00:27:36] *** Quits: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP) (Ping timeout)
[00:28:17] *** Quits: mrshankly (mrshankly@3EE34383.CE0EEBAE.806C54C8.IP) (Input/output error)
[00:28:32] <mletterle> tjc: https://gist.github.com/mletterle/f278c874c8449c5704ab
[00:28:40] *** Quits: ozten (ozten@moz-BC0C74E2.range86-174.btcentralplus.com) (Quit: ozten)
[00:28:45] <mletterle> not sure what you're looking for by my command... it's just rustpkg build
[00:28:53] <tjc> mletterle: That's what I meant..
[00:29:01] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:29:21] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:29:26] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[00:29:34] *** Joins: ozten (ozten@moz-BC0C74E2.range86-174.btcentralplus.com)
[00:29:41] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[00:29:41] <tjc> mletterle: Oh, I see. I think you found a slightly different, but related bug...
[00:29:46] <mletterle> i think it's because the repo has a "-" in it
[00:29:51] <mletterle> maybe?
[00:29:59] <tjc> no
[00:30:03] <tjc> mletterle: as a workaround, try "rustpkg build nss"
[00:30:03] *** Joins: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net)
[00:30:09] <tjc> just naming the package explicitly instead of implicitly
[00:30:36] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[00:31:03] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[00:32:22] <mletterle> supplied path for package dir does not exist, and couldn't interpret it as a URL fragment"
[00:32:24] *** Quits: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net) (Ping timeout)
[00:33:22] <tjc> what directory are you in?
[00:34:00] <mletterle> the package root, one level up from src
[00:35:50] *** Joins: a_m0d|home (a_m0d@E82DA438.8C17457B.6D7C4B99.IP)
[00:36:06] *** Joins: bholley (anonymous@moz-A2189431.hsd1.ca.comcast.net)
[00:36:16] <tjc> mletterle: the problem is the "extern mod nspr;" in your lib.rs
[00:36:20] <tjc> it doesn't have any idea where to find nspr
[00:36:27] <tjc> you need to use the extern mod nspr = "…"; syntax
[00:36:28] *** Quits: skade (skade@moz-A89F791B.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:36:37] <tjc> where the … looks like github.com/mletterle/rust-nspr, I'm assuming
[00:36:41] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[00:36:44] <mletterle> the local file I'm using has that:
[00:36:45] <mletterle> extern mod nspr = "github.com/mletterle/rust-nspr";
[00:36:58] <tjc> oh, I see
[00:36:59] <tjc> hmm
[00:38:12] <tjc> mletterle: ok, I think I understand what the problem actually is
[00:38:22] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[00:38:29] <tjc> this isn't terribly well-documented, but there was some confusion because at one point some people made example packages where the repository was a workspace itself
[00:38:31] <tjc> if you see what I mean
[00:38:40] <tjc> So basically, your rust-nspr repo should have a lib.rs file at the top level
[00:39:18] <tjc> as opposed to having it in src/nspr
[00:39:24] <mletterle> but.. how does that work...
[00:39:36] <mletterle> oh.
[00:39:37] <mletterle> ugh.
[00:39:39] *** Joins: garthk (garth@moz-B118B14A.static.internode.on.net)
[00:39:40] <mletterle> I think i see
[00:40:03] <tjc> Yeah, sorry for the confusion
[00:40:07] <dbaupp> tjc: would it be possible for rustpkg to look for src/lib.rs, so that we aren't forced to have the code mixed with, e.g., the README?
[00:40:08] <tjc> a lot of people have bumped into this one
[00:40:27] <dbaupp> (look for src/lib.rs as well as ./lib.rs, that is.)
[00:40:30] <tjc> dbaupp: maybe. I'm not sure, though… to me it seems like it's confusing to have a src/ directory that has package directories in it, each with its own package directory
[00:40:42] <tjc> dbaupp: if you think it should change, though, file an issue and we'll consider it :-)
[00:41:00] <mletterle> how would one depend on a package you have no control over...
[00:41:03] <dbaupp> tjc: I don't meant src/<package>/lib.rs, just so that the actual code of a single is grouped in one subdirectory
[00:41:27] <tjc> mletterle: the package would have to follow the rustpkg conventions, but that said, there is sort of a "back door" --
[00:41:38] <dbaupp> i.r. <workspace>/src/<package>/src/lib.rs (and <package> is the git repo)
[00:41:42] <tjc> If you pass the --rust-path-hack flag to rustpkg, then you can put any directory that has crates in it in your RUST_PATH
[00:41:47] *** Quits: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net) (Quit: Leaving.)
[00:41:51] <tjc> mletterle: that would let you make your current repo work without changing your directory structure
[00:41:56] <tjc> we may get rid of that at some point, though
[00:42:40] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[00:42:42] <tjc> dbaupp: Sure, I think that's what I understood you to mean the first time -- personally I just find it confusing to have src/foo/src if the package is named foo, though
[00:43:28] <dbaupp> tjc: ah, ok :) (I'll file an issue at some point.)
[00:44:41] <SiegeLord> But... a repository with src/<package>/ is still a thing though, right? For multiple packages per repository?
[00:44:59] <tjc> SiegeLord: in general we expect that a package will have its own repository
[00:45:36] <SiegeLord> That's very inconvenient...
[00:45:39] <tjc> SiegeLord: in this case, though, it didn't work because I checked out a package in one workspace, but by default, rustpkg stores fetched dependencies in another workspace
[00:48:24] <tjc> kmc: Oh, hey, `make` succeeds for me now :-)
[00:48:47] <tjc> kmc: oh, wait, no, I take it back. I ran make -j8 and it failed but looked like it succeeded
[00:49:11] <kmc> yeah, I think we don't always propagate the error codes :/
[00:49:22] <kmc> I just pushed an updated branch which builds for me in one go
[00:49:28] <tjc> cool
[00:49:34] <tjc> I'll try it
[00:49:36] *** Quits: fyolnish_ (fyolnish@moz-CB01345A.uqwimax.jp) (Client exited)
[00:54:01] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[00:54:17] *** Joins: simlay_ (simlay@moz-1C72F8DD.hsd1.ca.comcast.net)
[00:55:15] <SiegeLord> It seems plenty of projects contain multiple libraries and multiple binaries... I just don't understand how that fits with the rustpkg mentality
[00:55:26] <SiegeLord> *multiple executables
[00:55:54] <tjc> kmc: after pulling changes, I'm still getting a compile error...
[00:56:01] <tjc> SiegeLord: We're not sure yet either (see #7240 )
[00:56:21] <tjc> kmc: is 6eed4b the revision for rust-azure that I should be seeing?
[00:58:21] <tjc> kmc: Never mind. I changed two mac-specific `extern mod`s and it at least got further
[00:58:25] <tjc> I guess you use Linux :-)
[00:58:31] <kmc> i have cad49e5844d9e9958a0ef44961dfa191dd60aa77
[00:58:52] <kmc> I do, but jack started this work on Mac so some of that's already done
[00:59:00] *** Quits: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[00:59:02] <kmc> but definitely send me your patches once you get it working :)
[00:59:16] <kmc> I have a Macbook on order but I won't get it until late this month :)
[00:59:22] <tjc> Heh, cool
[00:59:32] <SiegeLord> I'll be looking forward to seeing how it'll be solved... because I'm not liking any of the proposed solutions so far
[00:59:35] <tjc> it's generating bindings now
[00:59:40] <tjc> SiegeLord: I think it needs more discussion
[00:59:55] <mletterle> is there a reason why attributes aren't used for rustpkg things?
[00:59:57] <tjc> but you're welcome to weigh in by commenting on https://github.com/mozilla/rust/issues/7240
[01:00:07] <tjc> mletterle: like which things do you mean?
[01:00:07] *** Quits: tautologico (shung@703660AA.CFE755C8.C27E1635.IP) (Quit: tautologico)
[01:00:23] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[01:00:30] <mletterle> having #[rustpkg.modpath("http://www.someurl.com")] would be nice because then it doesn't alter the compilable code
[01:00:39] <mletterle> above an extern mod
[01:01:00] <tjc> oh, I see
[01:01:02] *** Quits: ozten (ozten@moz-BC0C74E2.range86-174.btcentralplus.com) (Quit: ozten)
[01:01:07] *** jorendorff is now known as jorendorff_away
[01:01:10] <tjc> hmm
[01:01:16] <tjc> I'm trying to remember whether we considered doing that
[01:01:30] *** Joins: tautologico (shung@703660AA.CFE755C8.C27E1635.IP)
[01:02:25] <tautologico> tjc: I found the cause of the difference between extern mod foo(name="bar") and extern mod foo = "bar", but I see many ways to fix it, don't know which would be the best
[01:02:36] <tautologico> tjc: https://github.com/mozilla/rust/issues/10265
[01:03:03] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[01:03:39] <tjc> tautologico: Sorry, I saw the email for that bug but I didn't look at it till now
[01:03:59] <tjc> tautologico: Your reasoning seems completely correct. Part of the work of getting rid of the (name = "bar") syntax will be making sure there's always a package_id attribute
[01:04:07] <tjc> rustpkg automatically inserts the package_id attribute
[01:04:13] <tautologico> ok
[01:04:14] <tjc> but I guess a non-rustpkg package wouldn't have one
[01:04:20] <tautologico> so any module should have it
[01:04:27] <tjc> well, not quite
[01:04:33] <tjc> any crate that is going to be imported should have one
[01:04:39] <dbaupp> so... `extern mod foo(package_id="...");` works now?
[01:04:54] <tautologico> I saw rustic already inserts name and ver if the crate don't specify them
[01:05:06] <tjc> yeah, it could also insert the package ID
[01:05:30] <tautologico> tjc: ok, I'll take a look at it, I think it shouldn't be hard to fix
[01:05:42] <tjc> tautologico: yeah, I don't think so either. thanks for taking this on!
[01:05:55] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[01:06:04] <tautologico> tjc: np :)
[01:06:45] <SiegeLord> I'd be simplest if repositories were workspaces, and not packages
[01:06:48] <SiegeLord> *It'd
[01:07:29] *** Quits: nkoep (nik@moz-DCF87473.pool.mediaways.net) (Client exited)
[01:07:37] <SiegeLord> I guess that still doesn't address the multiple artifacts issue... oh well
[01:07:59] *** Quits: tikue (tikue_star@61D9B7A5.CD72397.689607DE.IP) (Ping timeout)
[01:08:28] *** Joins: josh (josh@moz-E6247462.meeting.ietf.org)
[01:08:39] *** Quits: josh (josh@moz-E6247462.meeting.ietf.org) (Quit: josh)
[01:09:00] <tjc> SiegeLord: the idea is that you (as a developer) maintain a workspace and you check out all the packages you want to work on into it
[01:09:14] <tjc> repositories aren't workspaces because repos only contain sources, not build/ or bin/ or lib/ dirs
[01:09:23] <kmc> tjc: was it in src/support/azure/rust-azure/scaled_font.rs?  i'm grepping now for extern mods that i missed
[01:09:37] <tjc> kmc: yes, there were two in a row there, near the beginning
[01:09:40] <tjc> core_graphics and core_text
[01:09:41] <tjc> I think
[01:09:43] <SiegeLord> They could, in principle
[01:09:50] <kmc> cool
[01:10:03] <SiegeLord> One project I'm maintaining serves some pre-compiled binaries in its repository
[01:12:14] <kmc> tjc: would I ever need 'extern mod sharegl = "sharegl"' or is that the same as not giving a name?
[01:12:18] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Quit: probably going to bed)
[01:12:32] <tjc> kmc: it should be the same as not giving a name. if it's not, that's probably a bug
[01:12:32] <tautologico> it's the same
[01:13:01] <kmc> okay
[01:13:06] <brson> my build keeps failing to link libuv https://gist.github.com/brson/7347233
[01:13:50] <brson> oh maybe check-stage1 is broken until a snapshot
[01:13:57] <acrichto> brson: it's a snapshot thing
[01:14:06] <acrichto> you can just copy libuv around
[01:14:13] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[01:14:18] <SiegeLord> Well, anyway... it seems if I use pkg.rs to create multiple binaries/etc I want it to work well with the extern mod = "" syntax too
[01:14:20] <acrichto> we have ltos of -L flags so you can just choose your favorite
[01:14:37] <SiegeLord> So hopefully, whatever the solution, at least that invariant is preserved
[01:16:39] <tjc> SiegeLord: Sorry, didn't quite follow -- which invariant do you mean?
[01:17:16] <SiegeLord> Well, not invariant... symmetry is a better word. If rustpkg can create an artifact, it can also link it in
[01:17:34] <SiegeLord> It'd be nice if you could specify crate separately from the package
[01:18:18] <SiegeLord> Like... #[pkg="github.com/foo/foo"] extern mod came_from_foo;
[01:18:45] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[01:19:15] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[01:19:39] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[01:19:52] <SiegeLord> Unless that's exactly what dbaupp mentioned a few moments ago, in which case I'm as happy as pie
[01:20:58] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[01:21:38] <tjc> SiegeLord: Hmm, I think that's different from what dbaupp suggested
[01:22:11] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Quit: Leaving...)
[01:22:51] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[01:24:21] *** Joins: z0w0 (zack@moz-238C2341.lnse3.cha.bigpond.net.au)
[01:25:00] *** Quits: canhtak (canhtak@moz-44AEB22E.wl.t.ulaval.ca) (Quit: canhtak)
[01:25:14] <mletterle> If I had my druthers, pkg.rs could contain attributes that direct rustpkg on what to do and where to go to find things.
[01:26:47] <SiegeLord> I think there is some... beauty to just doing extern mod foo = "elsewhere"; all in one place... it just needs to be flexible enough to be useful
[01:27:35] <SiegeLord> *to be as useful as possible
[01:28:10] <mletterle> that usage just screams attributes to me.
[01:28:16] <mletterle> *shrugs*
[01:28:57] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[01:29:57] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[01:31:15] <tjc> kmc: woot, I built the whole thing too :-)
[01:31:33] <tjc> kmc: is there anything else you need right now, rustpkg-wise, or are you just making pull requests now?
[01:32:06] *** Joins: tikue (tikue_star@61D9B7A5.CD72397.689607DE.IP)
[01:32:38] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:33:16] <SiegeLord> mletterle, I'd prefer the attribute syntax too
[01:33:27] <SiegeLord> Not a big deal though
[01:33:29] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[01:33:33] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[01:33:33] <kmc> I think I'm all set. thanks, you've been super helpful :)
[01:33:38] *** Quits: z0w0 (zack@moz-238C2341.lnse3.cha.bigpond.net.au) (Quit: z0w0)
[01:33:47] <kmc> I need to figure out whether we're keeping Makefile.in for these submodules, and if so, fix them up
[01:33:58] <kmc> I'd rather not support two build systems...
[01:35:13] *** Quits: a_m0d|home (a_m0d@E82DA438.8C17457B.6D7C4B99.IP) (Ping timeout)
[01:35:32] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:36:22] *** Joins: a_m0d|home (a_m0d@E82DA438.8C17457B.6D7C4B99.IP)
[01:36:23] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[01:36:35] <SiegeLord> #[pkg="..."] extern mod local_name = name_of_crate_in_pkg; for renames
[01:36:38] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[01:36:57] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[01:36:57] *** ChanServ sets mode: +ao brson brson
[01:36:58] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[01:37:59] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[01:38:19] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[01:38:42] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[01:38:43] <tjc> kmc: kill all the Makefiles :-D
[01:39:28] <kmc> perhaps git rm will fix my makefile :)
[01:41:03] *** Joins: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net)
[01:43:06] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:43:26] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:43:48] <tjc> git rm and fire...
[01:43:57] <tjc> if those two things don't solve your problem, you've got no hope
[01:44:43] *** Joins: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:45:08] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:46:30] *** Quits: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:46:38] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[01:48:14] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[01:49:40] *** Joins: canhtak (canhtak@moz-44AEB22E.wl.t.ulaval.ca)
[01:50:12] *** Quits: GeneralMaximus (ankur@9BEBED44.E772AAF5.D2D1FAF0.IP) (Ping timeout)
[01:51:20] *** Joins: nomadic (nomadic@moz-E01D5C49.hsd1.ga.comcast.net)
[01:51:21] <bodie> anyone played with http service in Rust?
[01:51:32] *** Joins: futurehorizons (Mibbit@moz-61717F7A.bitstream.orcon.net.nz)
[01:53:15] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[01:53:39] <futurehorizons> C# .ElementAt  for Rust withouth iterator hastle. ie vec[count] = ?
[01:54:04] <kmc> you can index vectors like that, yes
[01:55:20] <futurehorizons> kmc: I don't seem to be able to. Can you give a simple example?
[01:55:47] <dbaupp> let v = ~[1,2,3]; v[1] == 2 // true
[01:55:50] <kmc> let v = ~[1,2,3]; println!("{:d}", v[1]);
[01:55:55] <kmc> dang dbaupp ;)
[01:56:17] <kmc> futurehorizons: if you tell us the error message you get, maybe we can help better
[01:56:30] <dbaupp> bodie: have you seen https://github.com/chris-morgan/rust-http ?
[01:57:06] <bodie> was just taking a look at https://github.com/schaars/simple-web-server
[01:57:24] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:57:32] <dbaupp> rusti: "hi"
[01:57:38] -rusti- timeout triggered!
[01:57:40] <futurehorizons> Thanks. 165:16 error: expected `;` but found `[` shortened_args[1] = path.to_str(); // path of the file added to command line
[01:57:41] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[01:57:51] <klutzy> rusti: println("timeout triggered!");
[01:57:52] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:58:01] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[01:58:10] <dbaupp> bodie: ah that's quite old (4 months for the Rust version), so it's not going to work
[01:58:21] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:58:23] <strcat> rusti: 2
[01:58:23] -rusti- /usr/local/bin/irc.sh: 22: /usr/local/bin/irc.sh: cannot create /dev/null: Read-only file system
[01:58:23] -rusti- application terminated with error code 2
[01:58:26] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[01:58:28] *** Quits: qrada (ad@1FF1D5D4.3F1C4048.973C8D27.IP) (Quit: leaving)
[01:58:33] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:58:34] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[01:58:41] <dbaupp> bodie: and... since 0.7, the networking parts of rust have been dramatically improved.
[01:59:17] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:59:42] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[02:00:23] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:00:25] <strcat> rusti: 2
[02:00:25] -rusti- /usr/local/bin/irc.sh: 22: /usr/local/bin/irc.sh: cannot create /dev/null: Operation not permitted
[02:00:25] -rusti- /usr/local/bin/irc.sh: 0: /usr/local/bin/irc.sh: application terminated with error code 2
[02:00:27] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[02:00:51] <kmc> futurehorizons: sounds like a syntax error on the previous line.  can you pastebin your code?
[02:00:56] <kmc> missing semicolon on previous line maybe
[02:01:02] *** Quits: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:01:09] <bodie> dbaupp, awesome :)
[02:01:26] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:01:27] <strcat> rusti: 2
[02:01:27] -rusti- /usr/local/bin/irc.sh: 22: /usr/local/bin/irc.sh: cannot create /dev/null: Operation not permitted
[02:01:27] -rusti- application terminated with error code 2
[02:01:34] * strcat shrugs
[02:01:35] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[02:01:35] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[02:04:17] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:04:19] <strcat> rusti: 2
[02:04:19] -rusti- /usr/local/bin/irc.sh: 22: /usr/local/bin/irc.sh: cannot create /dev/null: Operation not permitted
[02:04:19] -rusti- application terminated with error code 2
[02:04:22] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[02:04:33] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:04:34] <strcat> rusti: 2
[02:04:40] -rusti- timeout triggered!
[02:04:42] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[02:04:51] *** Joins: Diamond (dick@moz-80556682.ks.ks.cox.net)
[02:05:11] <futurehorizons> http://mibpaste.com/7vNROJ 
[02:05:40] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[02:05:52] <strcat> futurehorizons: 'let' is to declare a new variable
[02:06:01] <strcat> and the slice you're taking as a parameter is immutable
[02:07:24] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[02:07:47] <tikue> futurehorizons: make it &mut [~str] and remove the let
[02:08:07] <futurehorizons> Thanks all. I thought indexing was done a different way as I have never managed to get it working with all my previous efforts. Thanks. Going for coffee now.
[02:08:20] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Ping timeout)
[02:08:40] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Quit: Leaving...)
[02:11:01] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[02:14:09] *** Quits: brendan (brendaneic@323D4905.A5FB4ABA.FE58E87C.IP) (Quit: brendan)
[02:15:40] *** Joins: brendan (brendaneic@323D4905.A5FB4ABA.FE58E87C.IP)
[02:17:08] *** Quits: heftig (heftig@moz-F6E3121.dip0.t-ipconnect.de) (Ping timeout)
[02:20:33] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[02:20:37] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Quit: Leaving)
[02:21:47] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[02:22:07] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[02:22:48] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Client exited)
[02:25:52] *** Quits: tikue (tikue_star@61D9B7A5.CD72397.689607DE.IP) (Ping timeout)
[02:26:56] *** Joins: heftig (heftig@moz-B2FDBD25.dip0.t-ipconnect.de)
[02:31:09] *** Quits: skeet70 (skeet70@moz-697F48F2.bzm-mt.client.bresnan.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:34:16] *** Parts: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) ()
[02:34:48] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[02:37:19] <ChrisMorgan> mark_edward: pong
[02:37:22] <ChrisMorgan> nmatsakis: pong
[02:38:18] *** Joins: axitkhurana (Adium@B0025550.10B6194D.6AA50C35.IP)
[02:39:26] *** Quits: ab (alex@BC9D99CC.37C1012D.FE617B51.IP) (Ping timeout)
[02:41:49] *** Quits: axitkhurana (Adium@B0025550.10B6194D.6AA50C35.IP) (Quit: Leaving.)
[02:42:18] *** Joins: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP)
[02:43:11] *** Joins: ab (alex@BC9D99CC.37C1012D.FE617B51.IP)
[02:45:35] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:46:52] *** Joins: an0nymous (an0nymous@moz-F04BA440.tx.res.rr.com)
[02:47:17] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[02:48:53] *** Quits: bholley (anonymous@moz-A2189431.hsd1.ca.comcast.net) (Ping timeout)
[02:53:03] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:54:24] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[02:56:14] *** Quits: blank_name (blank_name@FAB53C88.7071B2C8.31EC03F3.IP) (Ping timeout)
[02:56:20] *** Quits: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo)
[02:58:51] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[03:00:21] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[03:04:50] *** Quits: futurehorizons (Mibbit@moz-61717F7A.bitstream.orcon.net.nz) (Quit: http://www.mibbit.com ajax IRC Client)
[03:06:16] *** Joins: blank_name (blank_name@FAB53C88.7071B2C8.31EC03F3.IP)
[03:06:30] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[03:07:08] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[03:08:51] *** Joins: bholley (anonymous@moz-A2189431.hsd1.ca.comcast.net)
[03:09:21] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[03:11:03] *** Joins: tikue (tikue_star@61D9B7A5.CD72397.689607DE.IP)
[03:14:40] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[03:15:41] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[03:19:05] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[03:19:10] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[03:19:35] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Quit: Linkinus - http://linkinus.com)
[03:22:54] *** Quits: boredomist (ruqs@8186917.CC8FA3EE.E3401B6E.IP) (Ping timeout)
[03:23:37] *** Joins: telotortium (Mibbit@moz-90BFA359.dhcp.mdsn.wi.charter.com)
[03:24:53] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[03:26:45] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:26:45] *** ChanServ sets mode: +ao dherman dherman
[03:28:35] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:29:03] *** Quits: brson (brson@6A848D32.C1B840DD.76F66111.IP) (Ping timeout)
[03:29:47] *** Quits: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:31:35] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[03:32:06] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[03:32:31] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[03:32:36] *** Parts: nif (Mibbit@moz-B6DFA19D.wireless.oberlin.edu) ()
[03:33:35] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[03:35:18] *** Quits: tikue (tikue_star@61D9B7A5.CD72397.689607DE.IP) (Ping timeout)
[03:35:43] <telotortium> I'd like to ask a question about using the sum method on iterators.
[03:35:57] <telotortium> How do you get it to compile?
[03:36:30] <telotortium> For example, this code fails to compile: `let v = ~[1, 2, 3]; println!("{}", v.iter().sum());`
[03:36:40] *** Joins: skeet70 (skeet70@moz-697F48F2.bzm-mt.client.bresnan.net)
[03:37:08] <telotortium> But the equivalent code with `fold` works: `let v = ~[1, 2, 3]; println!("{}", v.iter().fold(0, |a, &b| a + b));`
[03:37:20] <strcat> telotortium: because that iterator yields references, not integers
[03:37:23] <strcat> https://github.com/mozilla/rust/issues/9496
[03:38:01] *** jorendorff_away is now known as jorendorff
[03:39:40] <telotortium> Ah, I see. As it says in the issue, you can copy the numbers in the vector using `map`.
[03:39:52] *** Joins: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP)
[03:39:59] <telotortium> Should I even bother using sum at this point?
[03:40:02] *** Quits: simlay_ (simlay@moz-1C72F8DD.hsd1.ca.comcast.net) (Ping timeout)
[03:40:05] <strcat> no, it will likely be removed
[03:40:25] <telotortium> Okay, thanks.
[03:44:12] *** Joins: chet (Mibbit@moz-E161E9B9.dsl.pltn13.sbcglobal.net)
[03:44:17] *** Quits: chet (Mibbit@moz-E161E9B9.dsl.pltn13.sbcglobal.net) (Quit: chet)
[03:45:42] <benh> ugh, I hate writing the ruby equivalent of .fold(0, |a,&b|a+b) every week ;)
[03:46:23] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:48:03] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:48:22] *** Quits: zz_kimundi (kimundi@moz-4392BF18.dip0.t-ipconnect.de) (Ping timeout)
[03:48:49] *** Quits: StarLight (StarLight@moz-93E2906B.dynamic.avangarddsl.ru) (Connection reset by peer)
[03:51:39] *** Joins: zz_kimundi (kimundi@moz-C83B8CEE.dip0.t-ipconnect.de)
[03:52:03] *** zz_kimundi is now known as kimundi
[03:52:20] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:52:53] *** Quits: bholley (anonymous@moz-A2189431.hsd1.ca.comcast.net) (Quit: bholley)
[03:53:49] *** Joins: StarLight (StarLight@moz-8EAA71F9.dynamic.avangarddsl.ru)
[03:55:55] *** Joins: fyolnish (fyolnish@moz-CEED2D75.panda-world.ne.jp)
[03:56:56] *** Joins: simlay_ (simlay@moz-1C72F8DD.hsd1.ca.comcast.net)
[03:58:53] *** Quits: tautologico (shung@703660AA.CFE755C8.C27E1635.IP) (Quit: tautologico)
[03:59:11] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[03:59:51] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[03:59:55] *** Joins: tikue (tikue_star@61D9B7A5.CD72397.689607DE.IP)
[04:00:08] *** Joins: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP)
[04:00:32] *** Joins: future_horizons (Mibbit@moz-61717F7A.bitstream.orcon.net.nz)
[04:00:53] *** Quits: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP) (Quit: #exherbo)
[04:01:14] *** Quits: brendan (brendaneic@323D4905.A5FB4ABA.FE58E87C.IP) (Quit: brendan)
[04:03:18] *** Quits: skeet70 (skeet70@moz-697F48F2.bzm-mt.client.bresnan.net) (Ping timeout)
[04:04:19] *** Quits: tikue (tikue_star@61D9B7A5.CD72397.689607DE.IP) (Ping timeout)
[04:04:45] *** Parts: a_m0d|home (a_m0d@E82DA438.8C17457B.6D7C4B99.IP) ()
[04:05:12] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[04:05:15] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Ping timeout)
[04:05:45] <future_horizons> http://mibpaste.com/W9ekxz 
[04:06:38] <future_horizons> Can someone help with the above PastBin for passing a mut vec
[04:07:10] <dbaupp> future_horizons: could you use https://gist.github.com/ instead? mibpaste is very poorly formatted :(
[04:07:11] <Yurume> formatting seems to be messed up, can you post your code via http://codepad.org/ ?
[04:07:12] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[04:07:13] <Yurume> yeah
[04:07:23] <ChrisMorgan> args is ~[~str] (from os::args()), I presume?
[04:07:42] <future_horizons> ChrisMorgan: true
[04:07:48] <strcat> future_horizons: the for loop syntax is wrong
[04:07:50] <strcat> it's
[04:07:55] <strcat> for pattern in iterator { ... }
[04:08:03] <strcat> you have |count| there
[04:08:13] *** Joins: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net)
[04:08:13] *** ChanServ sets mode: +ao pcwalton pcwalton
[04:08:30] <ChrisMorgan> `args.slice(2, args.len())` is more neatly written `args.slice_from(2)`, BTW.
[04:08:34] <aatch> weird. It's like both syntaxes combined...
[04:08:45] <future_horizons> strcat: how do I get the loop count
[04:08:45] <pcwalton> how do I suppress the "task failed" message on console?
[04:08:52] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Quit: Leaving...)
[04:08:53] <pcwalton> acrichto: ^
[04:09:27] <aatch> future_horizons, you need to use enumerate.
[04:09:37] <Yurume> ChrisMorgan, did vec get slice_{from,to} in master? (I think in 0.8 str had them but vec hadn't)
[04:09:56] <pcwalton> argh, there's no way to prevent it, reading the source
[04:09:58] <pcwalton> we have to fix that before 1.0
[04:10:06] <strcat> pcwalton: should use debug logging
[04:10:13] <pcwalton> it uses rterrln
[04:10:17] <strcat> hrm
[04:10:21] <pcwalton> well, can I make "weak tasks" as a workaround?
[04:10:21] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[04:10:30] <pcwalton> there's a big XXX in a comment
[04:10:31] <ChrisMorgan> Yurume: no, it's there - http://static.rust-lang.org/doc/0.8/std/vec/trait.ImmutableVector.html#fn.slice_from
[04:10:49] <pcwalton> what happened to our concept of weak tasks?
[04:10:56] <pcwalton> I need a task that doesn't stay alive
[04:11:00] <pcwalton> err, that doesn't keep the process alive
[04:11:10] <ChrisMorgan> daemon, I think?
[04:11:25] *** Joins: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP)
[04:11:30] <pcwalton> no matches for "daemon" in libstd
[04:11:30] *** Quits: fyolnish (fyolnish@moz-CEED2D75.panda-world.ne.jp) (Connection reset by peer)
[04:11:37] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[04:11:40] <ChrisMorgan> Hmm... my memory is clearly faulty on that point.
[04:11:43] <Yurume> ChrisMorgan, huh? hmm, I should have missed something...
[04:11:51] <pcwalton> it was called weak tasks a year ago
[04:12:00] <strcat> pcwalton: I don't think it should print at all
[04:12:08] <pcwalton> "watched"?
[04:12:27] <pcwalton> not watched 
[04:12:27] <pcwalton> :(
[04:12:28] <ChrisMorgan> watched = false is probably it.
[04:12:29] <strcat> there's task::try to catch failures already, otherwise if you don't catch it all the way up it makes sense to print on exit
[04:12:42] <strcat> but it shouldn't print at the failure site. it's weird
[04:12:59] *** Joins: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net)
[04:13:02] <pcwalton> it's not watched
[04:13:12] <ChrisMorgan> Yeah, that doesn't look to be all.
[04:13:19] <pcwalton> I guess there's no way to do it
[04:13:34] <pcwalton> well, servo is going to be noisy until this is fixed.
[04:13:42] <pcwalton> on shutdown
[04:14:42] *** Quits: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP) (Quit: WeeChat 0.4.2)
[04:15:12] *** Joins: tikue (tikue_star@61D9B7A5.CD72397.689607DE.IP)
[04:15:30] *** Joins: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP)
[04:15:43] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[04:15:53] *** Joins: fyolnish (fyolnish@moz-CEED2D75.panda-world.ne.jp)
[04:17:53] *** Quits: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP) (Quit: WeeChat 0.4.2)
[04:18:53] *** Joins: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP)
[04:19:07] <ChrisMorgan> future_horizons: you are wanting &[~str] out of your ~[~str], I believe. Taking a slice of it will actually be producing &~[~str], as I recall it. I can't help further as I need to go immediately. Hopefully someone else will tell you what you need.
[04:19:12] *** Quits: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP) (Quit: WeeChat 0.4.2)
[04:19:16] *** Joins: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP)
[04:24:22] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[04:25:24] *** Quits: SiegeLord (sl@moz-1DF56822.twcny.res.rr.com) (Quit: Leaving)
[04:27:39] *** Quits: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP) (Ping timeout)
[04:33:45] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[04:35:53] *** Joins: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net)
[04:41:29] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[04:44:05] <cmr> pcwalton: fwiw I haven't seen any such thing as a weak task for as long as I've been using rust
[04:44:15] <pcwalton> it was an old runtime thing
[04:44:18] <pcwalton> trust me, it existed :)
[04:44:26] <pcwalton> maybe 3 years ago
[04:44:48] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[04:44:50] <cmr> I believe you, just saying, I haven't seen it since 0.6
[04:45:55] *** Quits: fyolnish (fyolnish@moz-CEED2D75.panda-world.ne.jp) (Ping timeout)
[04:47:03] *** Quits: nomadic (nomadic@moz-E01D5C49.hsd1.ga.comcast.net) (Client exited)
[04:47:21] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:48:42] *** Joins: jdm (jdm@moz-36808BF3.dsl.teksavvy.com)
[04:48:42] *** ChanServ sets mode: +o jdm
[04:48:55] *** Quits: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP) (Quit: WeeChat 0.4.2)
[04:49:02] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:49:05] *** Quits: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net) (Quit: ZZZzzz…)
[04:49:57] *** Joins: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP)
[04:50:02] *** Quits: JanC (janc@moz-123DBD80.dsl.scarlet.be) (Ping timeout)
[04:51:19] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[04:51:40] *** Quits: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP) (Quit: WeeChat 0.4.2)
[04:52:09] <Luqman> cmr: no TWiR?
[04:52:30] *** Joins: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP)
[04:52:58] *** Joins: z0w0 (zack@moz-238C2341.lnse3.cha.bigpond.net.au)
[04:53:06] <cmr> Luqman: not this week, sorry :(
[04:53:09] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[04:53:16] <cmr> There will be a big one this weekend
[04:53:18] *** Quits: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP) (Quit: WeeChat 0.4.2)
[04:54:37] *** Quits: maxiepoo_ (mnew@moz-6F50ADE.hsd1.il.comcast.net) (Ping timeout)
[04:55:02] *** Joins: fyolnish (fyolnish@moz-CEED2D75.panda-world.ne.jp)
[04:55:09] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[04:55:09] *** ChanServ sets mode: +ao dherman dherman
[04:55:33] *** Joins: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP)
[04:56:12] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[04:56:31] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[04:56:36] <Heather> hi
[04:56:48] <mm^> Hi
[04:56:49] <Heather> to imp trait I need to attach it to some type?
[04:56:56] *** Quits: tikue (tikue_star@61D9B7A5.CD72397.689607DE.IP) (Ping timeout)
[04:57:16] <Heather> I don't have special type, I just want to have special interface implementation
[04:57:29] <Heather> not for something, just different
[04:57:46] *** Joins: pnathan (Adium@moz-E72012D3.tukw.qwest.net)
[04:57:47] <cmr> Heather: You can only implement traits on types, of course.
[04:57:54] <cmr> But you can have default implementations.
[04:58:21] *** Quits: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net) (Quit: jeffdb_)
[04:58:22] *** Joins: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP)
[04:59:27] <Heather> cmr well I don't want to create type just to have different impl...
[04:59:53] <Heather> cmr maybe I need something else... not traits...
[05:00:13] <cmr> Heather: Yeah. If you don't want methods on types... you don't want traits.
[05:01:19] <Heather> Heather well... I need to think more about it, a bit comfused now )
[05:02:29] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[05:04:03] *** jorendorff is now known as jorendorff_away
[05:04:49] *** Joins: JanC (janc@moz-DA91F4D.dsl.scarlet.be)
[05:05:06] <Heather> cmr I want it based on class.. with no fields...
[05:05:12] <Sharp> Why not just make a module?
[05:05:20] <Heather> Sharp hm?
[05:05:27] *** Quits: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP) (Quit: WeeChat 0.4.2)
[05:05:28] *** Joins: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP)
[05:06:07] <Heather> for example I've got an arguent and I desire to create class A or class B but they are based on interface X
[05:06:22] <Heather> then I want to call X.z() X.y() ... etc
[05:06:30] *** Quits: telotortium (Mibbit@moz-90BFA359.dhcp.mdsn.wi.charter.com) (Quit: http://www.mibbit.com ajax IRC Client)
[05:06:46] *** Joins: MrOrdinaire (Mibbit@5C68C0A1.6BCC7DAD.FD383126.IP)
[05:07:19] <Heather> cmr based on what in this case I can use Impl / trait ? or is there thing for it?
[05:07:22] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[05:08:11] <Heather> brb.... rebooting
[05:08:32] *** Joins: bholley (anonymous@moz-A2189431.hsd1.ca.comcast.net)
[05:08:53] *** Quits: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) (Quit: ~ Trillian - www.trillian.im ~)
[05:12:01] *** Quits: MrOrdinaire (Mibbit@5C68C0A1.6BCC7DAD.FD383126.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:12:07] *** Quits: canhtak (canhtak@moz-44AEB22E.wl.t.ulaval.ca) (Quit: canhtak)
[05:13:42] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[05:13:47] <Heather> here
[05:13:51] <Sharp> Heather: Why not just create one function and branch on an enum?  enum X { A, B}; fn foo<T>(x : X) -> bool { match (x) { A => true, B => false}}
[05:14:51] <dbaupp> Sharp: no need for parens on `match x  { ... }` :P
[05:15:09] <Sharp> I've been doing nothing but Java the last few days :(
[05:16:09] <Heather> Sharp huh?
[05:16:36] *** Quits: eddyb9 (eddy@717B0165.D51DAF03.FB866788.IP) (Quit: Leaving)
[05:16:52] <Sharp> Doesn't that solve what you were trying to do?  A and B have no fields, but are distinguishable types.  So x is an "interface" implemented by A and B.
[05:17:11] <Heather> Sharp you mean if A -> A.x else if B -> B.x .. ?
[05:17:15] *** Joins: eddyb (eddy@717B0165.D51DAF03.FB866788.IP)
[05:17:25] <Heather> Sharp that's exactly what I want to avoid
[05:17:37] <Sharp> Why?
[05:17:47] <Sharp> (I thought A and B didn't have any fields anyway).
[05:18:11] <mm^> Just make an empty struct and impl it
[05:18:19] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[05:18:20] <mm^> Or something.
[05:18:21] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[05:18:23] <Heather> mm^ that's weird
[05:18:24] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[05:18:35] <Heather> Sharp because it's WRONG syntax
[05:18:52] <Heather> mm^ for now I see it as the only case :S
[05:18:58] <Sharp> mm^: That's effectively what you're doing when you make enum constants, isn't it?
[05:19:04] <Sharp> Why is it wrong?
[05:19:48] <ChrisMorgan> Heather: I do not understand what it is that you are wanting. Can you explain the situation further?
[05:21:47] *** Quits: cubic (cubic@moz-80241A3A.mc.videotron.ca) (Connection reset by peer)
[05:22:11] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[05:23:06] <ChrisMorgan> I'm finding myself wanting anonymous enum types, like `struct Foo(Bar | Baz)` as equivalent to `struct Foo(BarOrBaz); enum BarOrBaz { Bar(Bar), Baz(Baz) }`, or types like `~[Bar | Baz]`; then you could match it with the patterns `Bar(bar)` and `Baz(baz)`. I haven't considered the implications of it on the grammar or functionality, but it sounds nice to me.
[05:24:04] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[05:24:19] *** Quits: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP) (Ping timeout)
[05:24:19] *** Quits: fyolnish (fyolnish@moz-CEED2D75.panda-world.ne.jp) (Connection reset by peer)
[05:24:52] <strcat> ChrisMorgan: I don't really understand
[05:25:16] *** Joins: fyolnish (fyolnish@moz-CEED2D75.panda-world.ne.jp)
[05:25:17] <strcat> so you want a variant of N types, rather than a sum type where the variants are not just based on what type they are?
[05:26:07] * Eridius wrote a state machine in obj-c today. Really missed having algebraic datatypes
[05:26:25] <strcat> for example, http://www.boost.org/doc/libs/1_54_0/doc/html/variant.html
[05:26:27] <Heather> Sharp it's wrong when you live in 2013 and don't use interfaces
[05:26:46] <Heather> Sharp that's only reason )
[05:27:08] <ChrisMorgan> strcat: put slightly differently, what I want is implicit anonymous enums, so that the type `Bar | Baz` would be a type effectively equivalent to `enum { Bar(Bar), Baz(Baz) }`.
[05:27:21] <cmr> ChrisMorgan: What is Bar(Bar) ?
[05:27:25] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[05:27:30] <Sharp> Other than the fact that the variants are defined in one place, how is what I described functionally not an interface?
[05:27:37] <cmr> Variant same name as type it wraps?
[05:27:48] <Sharp> The functionality is still abstracted from caller, which is the purpose of an interface.
[05:27:48] <ChrisMorgan> Yeah, for convenience of matching.
[05:27:58] <cmr> Heather: trait objects provide "interfaces"
[05:27:59] <Heather> ChrisMorgan situation ( in abstraction ) : let b = if a == 1 { A } else { B }; b.x()
[05:28:15] <Heather> cmr but it's based on some type
[05:28:29] <Heather> cmr but check example I don't have any type to base on
[05:28:31] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[05:28:34] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Quit: probably going to bed)
[05:28:42] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[05:28:48] <cmr> Heather: ok? they are in every language.
[05:28:50] <ChrisMorgan> Heather: and `if a == 1 { A.x() } else { B.x() }` won't cut it?
[05:29:30] <cmr> Heather: what are A and B if they don't have types?
[05:29:32] <Heather> ChrisMorgan not, because later in code I will active use all the things in b
[05:29:36] <jdavis> In declaring a trait, what does "&self" mean? 
[05:29:58] <cmr> jdavis: the method takes a borrowed pointer to the object it was called on.
[05:30:02] <ChrisMorgan> jdavis: that means it's an instance method taking a borrowed pointer to the caller.
[05:30:05] <Heather> cmr I don't know what they are ) but ideally they should be intterface implementations
[05:30:07] <Sharp> Or you could literally do that exact syntax, Heather, if you were willing to make A and B variants of an enum type and define x as a match.
[05:30:08] <strcat> jdavis: if you don't have a self parameter, a method is a static method (i.e. just associated with the type, doesn't receive an instance of it)
[05:30:15] <ChrisMorgan> s/caller/object called on/
[05:30:34] *** Quits: geoffhill (geoffhill@moz-738DC0DB.org) (Ping timeout)
[05:30:45] <jdavis> OK. Here is some code I'm working on, can someone tell me where I'm going wrong?
[05:30:47] <cmr> Heather: What language has these "interface implementations"?
[05:30:56] <Heather> cmr C++
[05:31:08] <jdavis> http://pastebin.com/9VihLhms
[05:31:10] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[05:31:11] <ChrisMorgan> `self` means it consumes the object, `&self` means you get a reference (&T), `&mut self` means you get a mutable reference (&mut T), `~self` means you consume an owned pointer (~T; used extremely rarely)
[05:31:12] <cmr> Heather: Example?
[05:31:30] <Heather> cmr http://stackoverflow.com/questions/318064/how-do-you-declare-an-interface-in-c
[05:31:48] <ChrisMorgan> jdavis: ~self isn't valid as a return type, it'd need to be ~Self.
[05:31:49] <cmr> jdavis: the type declarations for `deserialize` are different.
[05:31:52] <strcat> Heather: there's more than one way to do code reuse and generics
[05:32:00] <Sharp> Heather: How is that different from a struct with no fields?  Except that it requires virtual method calls for no good reason...
[05:32:04] <strcat> Rust doesn't do it that way
[05:32:15] <ChrisMorgan> jdavis: in a trait, Self is the type it's being implemented on, while self a variable, not a type.
[05:32:30] <cmr> Heather: uh, Child is the type that implements the interface.
[05:32:32] <jdavis> Hmm... absorbing that.
[05:32:51] <Heather> Sharp it has no struct with no fields, that's how it differnt, I think
[05:33:19] <Sharp> None of the three classes have any fields, do they?  Am I missing something?
[05:33:20] <Heather> cmr Child?
[05:33:31] <cmr> Heather: the Child class in that example. It has 0 fields.
[05:33:35] <Heather> Sharp yes, no fields
[05:33:36] <ChrisMorgan> So, for `trait Default { fn default() -> Self }`, for example, you would have `impl Default for uint { fn default() -> uint { 0u } }`.
[05:33:42] <cmr> And "implements" IDemo
[05:34:04] <Heather> cmr rught
[05:34:07] <Sharp> So is the hangup the fact that in C++ the word is "class" and in Rust "struct"?  I'm very confused about how this is different.
[05:34:09] <Heather> right
[05:34:19] <cmr> Heather: so what's the problem?
[05:34:27] <jdavis> http://pastebin.com/dpJXK8Zy is that any closer to sanity?
[05:34:41] <Heather> Sharp well I think struct is definitely not a class )
[05:34:45] <cmr> jdavis: nope, the types still don't match up
[05:34:52] <Heather> Sharp or is ti
[05:34:55] <Heather> *it
[05:35:09] <cmr> jdavis: in the trait, deserialze takes a ~[u8], in the impl, a &[u8]
[05:35:18] <Heather> cmr the problem is how to make Child in rust
[05:35:18] <Sharp> A struct is class state and an impl on a class is class methods
[05:35:19] *** Quits: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP) (Connection reset by peer)
[05:35:22] <Sharp> Since there are no fields
[05:35:25] *** Joins: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP)
[05:35:28] <Sharp> Impl on a struct is pretty much the same
[05:35:36] <cmr> Heather: `struct Child; impl Demo for Child { ... }`
[05:36:05] <strcat> Sharp: class/struct in C++ are the same thing anyway, class defaults to private and struct to public
[05:36:09] <Heather> cmr I will try
[05:36:10] <cmr> Heather: then you can use trait objects (&Demo/~Demo) for uniform representation
[05:36:10] <jdavis> cmr: OK, I fixed that but I get a different error now.
[05:36:14] <Sharp> strcat: Yeah, was about to mention that :)
[05:37:09] <jdavis> hello.rs:11:3: 13:4 error: method `deserialize` has an incompatible type: expected ~-ptr but found ~str
[05:37:23] <cmr> jdavis: ah, ~Self  for &'self str would be ~&'self str
[05:37:32] <ChrisMorgan> Correct.
[05:37:41] <ChrisMorgan> jdavis: BTW, are you aware of extra::serialize?
[05:37:47] <cmr> jdavis: you probably want Serializable<T>, and return T from deserialize
[05:37:58] <Heather> cmr yes it works
[05:38:08] *** Joins: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com)
[05:38:15] <Heather> cmr but I still think there must be special keyword for things like that )
[05:38:22] <cmr> Heather: why should there be?
[05:38:37] <jdavis> ChrisMorgan: I am just trying to understand for now, but maybe I should look at that definition to see what they do.
[05:39:03] <Heather> cmr because struct A; imp x for A { is strange syntax... Do you really like it?
[05:39:04] <cmr> jdavis: I suggest not looking at extra::serialize if you want to retain your sanity.
[05:39:14] <jdavis> OK, hah.
[05:39:17] <ChrisMorgan> jdavis: extra::serialize uses separate traits for Encodable and Decodable. If you do the two together, you can't implement serializable for &str, because it's impossible to deserialize it (becaue of the type ~&str).
[05:39:36] <cmr> jdavis: it's not bad, it's just rather complex and confusing.
[05:39:39] <Heather> cmr maybe it's strange only for me.... I will try to deal with it.
[05:40:15] <jdavis> ChrisMorgan: OK, that gets closer to the thing I'm really trying to understand, which is why rust-postgres is using two traits for FromSql and ToSql.
[05:40:19] <cmr> Heather: It's not really that strange, unless you look at it like it's supposed to be a class, which it isn't. Rust does things entirely different than classical OOP
[05:40:32] <ChrisMorgan> jdavis: in general, you shouldn't be needing to use ~T; prefer stack over heap allocations in general.
[05:40:41] <ChrisMorgan> Yep, that'll be the reason.
[05:40:57] <jdavis> ChrisMorgan: I still don't really have a full understanding. On the surface, it seems like if you can't do both serialize and deserialize in one trait, that may indicate a weakness in the type system.
[05:41:42] <Heather> cmr well I look at it once more and I think I can live with it.... just define empty struct and write impl-s for it is not that hard it even looks better than in cpp
[05:41:57] <ChrisMorgan> jdavis: you can still do it on ~str, but what's the point of making a completely new allocation for encoding if you can encode a slice? Decoding into a new slice is clearly impossible, though; it needs to be to a completely new string.
[05:42:37] *** Parts: simlay_ (simlay@moz-1C72F8DD.hsd1.ca.comcast.net) ()
[05:42:40] <cmr> jdavis: there's no reason Encodable/Decodable couldn't be merged afaictg
[05:42:54] <cmr> but yeah, you can't impl it for slices at all.
[05:42:56] <ChrisMorgan> (Decoding to a mutable string slice isn't possible either, as the decoded length is uncertain and a mutable string can't have its length changed as that might involve reallocating if it goes beyond the capacity currently reserved.)
[05:43:16] <cmr> Slices point into an existing array, they don't exist on their own.
[05:43:26] *** Joins: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net)
[05:43:27] *** Quits: future_horizons (Mibbit@moz-61717F7A.bitstream.orcon.net.nz) (Quit: http://www.mibbit.com ajax IRC Client)
[05:43:56] <ChrisMorgan> I would expect that they are split for two reasons: (a) for slices, which can't implement decode, and (b) for precision (small traits) so that you are only depending on what you actually care about.
[05:44:04] <cmr> Or actually there is a reason, which is what you can't decode to a slice, but you *can* encode a slice. So you lose flexibility by joining them
[05:44:35] <jdavis> OK.
[05:45:51] <jdavis> That makes sense now, though it still seems like there should be a way to express that as a single trait where the functions always return an owned pointer, and it might come up a lot.
[05:46:34] <cmr> jdavis: you could do it, but you'd have to have Serialize<T>, (where T is the result value) rather than returning Self.
[05:46:59] <jdavis> Oh, OK. Let me try with that a little.
[05:48:04] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:48:46] *** Joins: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net)
[05:49:10] <jdavis> ChrisMorgan, you mentioned stack allocations over heap allocations. Does that make sense in the context of a DB driver like rust-postgres? The only way I can think of to use stack allocations is if using a functional style where you have to pass in all the work you intend to do as callbacks or something.
[05:49:50] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[05:50:00] * ChrisMorgan does not feel particularly qualified to answer that question
[05:50:04] <cmr> jdavis: he really means values rather than boxes. you can return values.
[05:50:14] <jdavis> Oh, of course.
[05:50:19] <cmr> ie, they get moved into hte callers' stack frame
[05:50:36] * jdavis sometimes overlooks the simple answer
[05:50:51] <ChrisMorgan> It just means preferring T to ~T.
[05:52:47] <sfackler> thanks for pointing out the duplicate ToSql definitions for str and [u8] yesterday, btw
[05:52:59] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[05:53:03] *** Quits: z0w0 (zack@moz-238C2341.lnse3.cha.bigpond.net.au) (Client exited)
[05:53:37] <jdavis> sfackler: thank you for all your work on rust-postgres. I am trying to catch up.
[05:54:16] *** Joins: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk)
[05:54:24] *** Quits: bholley (anonymous@moz-A2189431.hsd1.ca.comcast.net) (Quit: bholley)
[05:55:04] <jdavis> I took an interest in rust because I think it will be nice as a DB application language in many ways. I may be doing a talk on it at a user group if I can do something cool with it in the next couple months.
[05:55:42] <cmr> jdavis: Why do you think that? (I don't disagree, just curious)
[05:55:52] *** Quits: fyolnish (fyolnish@moz-CEED2D75.panda-world.ne.jp) (Connection reset by peer)
[05:56:29] <strcat> the bar for that is sqlalchemy/sequel/LINQ so that's a hard goal to reach
[05:56:36] <jdavis> Well, it may seem fairly minor, but the fact that you can have a union type to represent NULL values is actually a pretty big help.
[05:56:58] <jdavis> As far as typechecking and program correctness goes.
[05:57:05] <cmr> strcat: all of which depend very heavily on dynamicism!
[05:57:25] <strcat> cmr: LINQ doesn't really
[05:58:16] <jdavis> I know there are other languages that can do that, like haskell/ocaml, but there are other reasons that people don't use those.
[05:58:32] <strcat> cmr: it's basically an overloadable DSL
[05:58:33] <cmr> strcat: http://msdn.microsoft.com/en-us/library/system.linq.expressions.expression%28v=vs.110%29.aspx etc?
[05:58:43] <ChrisMorgan> jdavis: people don't use Rust much either :P
[05:58:50] <ChrisMorgan> But that's hopefully only because it's not mature yet.
[05:58:57] <Sharp> LINQ's biggest sin is that it hews *too* closely to SQL syntax, IMO.
[05:59:15] <strcat> cmr: they can be compiled
[05:59:34] <strcat> cmr: think print!("{} {}", 2, 3) but with the *ability* to do it dynamically
[05:59:42] <cmr> strcat: ok, sure.
[05:59:55] <cmr> Available but not required
[06:01:28] <jdavis> ChrisMorgan, true, but it seems to have (potentially) a nice mix of design choices, and I think it might find a nice following. I don't know, of course, but I'd like to learn some new language, and rust seems like one that I might actually use someday.
[06:02:18] * ChrisMorgan is in Rust because it's the only language he's come across that is really suitable for his dream web framework
[06:02:22] <Sharp> jdavis: IMO the high bar for relational programming languages is probably something like Prolog, TBH.
[06:02:29] <Sharp> Or one of the billion variants.
[06:02:49] *** Joins: fyolnish (fyolnish@moz-CEED2D75.panda-world.ne.jp)
[06:03:29] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[06:03:30] <jdavis> I'm not talking about having a DSL inside rust, although that could be interesting. I just mean everyday application programming against a database. And I don't want to deal with null/nil/none exceptions.
[06:03:31] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[06:03:36] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[06:03:37] <pcwalton> here's a sandbox https://github.com/pcwalton/rust-sandbox
[06:03:40] <pcwalton> feel free to use it :)
[06:03:52] <pcwalton> and/or send PRs for Windows/Linux :)
[06:04:02] <Sharp> Whoa.
[06:04:47] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[06:04:49] <strcat> pcwalton: well, I've started on https://github.com/thestinger/rust-seccomp but haven't done much :P
[06:05:02] <Sharp> jdavis: The best way to not deal with NULL is not to have it in their in the first place :)
[06:05:03] <pcwalton> oh nice
[06:05:06] <Sharp> *there
[06:05:36] <jdavis> Sharp, agreed, but rust will be on version 12.7 before that happens.
[06:05:41] <pcwalton> yeah, rust-sandbox is designed to be restrictive and not customizable in the interest of being cross-platform, since on Windows at least the sandbox support is very "exactly what IE needs"
[06:05:45] <pcwalton> and not customizable
[06:06:04] <jdavis> Sharp, unless datomic takes over or something.
[06:06:16] <Sharp> jdavis: Heh.  Yeah, legacy databases suck :P
[06:06:53] <strcat> pcwalton: are the sandboxed processes going to be using the rust runtime?
[06:07:22] <pcwalton> you can do what Chrome does and run on a null token/alternate desktop which is basically like old Linux seccomp (i.e. turns off everything)
[06:07:25] <pcwalton> strcat: yeah
[06:07:40] <strcat> chromium's sandbox has to talk over a pipe to make almost any syscall that's not read/write/close/exit
[06:07:58] <pcwalton> oh, I was figuring servo is going to assume seccomp BPF support.
[06:08:02] <jdavis> Sharp: Although I have an affinity for new approaches based on sound principles (like datomic) there's a lot of gaps they need to figure out, even from a theoretical standpoint.
[06:08:03] <pcwalton> old seccomp is so useless
[06:08:23] <strcat> pcwalton: yeah, but once you allow many syscalls seccomp isn't helping much
[06:08:46] <Sharp> jdavis: Yeah, I still haven't seen a really satisfactory solution for representing missing data.
[06:09:02] <cmr> Sharp: easy! just don't collect incomplete data
[06:09:08] <Sharp> Right, of course!  It's so simple!
[06:09:16] <pcwalton> strcat: with bpf you can specify filters on the arguments to those syscalls
[06:09:21] <pcwalton> it's not like you're like "hey, write everything"
[06:09:25] <strcat> pcwalton: but it can only do integer comparisons
[06:09:37] <strcat> pcwalton: https://github.com/thestinger/rust-seccomp/blob/master/seccomp.rs#L11
[06:09:55] <strcat> namespaces are basically an alternate world (a virtual machine with the same kernel)
[06:09:56] <pcwalton> do you see anything specific in the rust runtime
[06:09:59] <Sharp> Unfortunately, there are tricky semantic issues around joins :(
[06:10:01] <pcwalton> that will cause problems
[06:10:17] *** Joins: skade (skade@moz-A89F791B.pools.arcor-ip.net)
[06:11:09] <strcat> pcwalton: well, it needs so many syscalls (many of which take file paths) that it will help reduce the attack vector on kernel exploits but won't really be a sandbox
[06:11:17] <pcwalton> like what
[06:11:20] <pcwalton> name specifically
[06:11:22] <strcat> like 'open'
[06:11:28] <pcwalton> for what
[06:11:31] <strcat> /dev/urandom
[06:11:37] <pcwalton> ok, we can open that foirst
[06:11:38] <pcwalton> first
[06:11:42] <pcwalton> I'm not switching to rust-core for servo
[06:11:47] <strcat> I don't mean that
[06:11:53] <strcat> I just mean you should start with namespaces
[06:12:12] <pcwalton> ok, sure
[06:12:20] <pcwalton> if that's easier
[06:12:31] <pcwalton> I didn't realize that BPF didn't let you lock down to specific paths
[06:12:53] <strcat> pcwalton: you could compare against a string pointer to read-only memory, I guess
[06:13:11] <pcwalton> hmm, yeah
[06:13:36] <Heather> I still need help with traits :( when I init my empty struct then how can I call trait fn impl ?
[06:13:58] <cmr> Heather: let x = SomeStruct; x.foo()
[06:14:16] <dbaupp> or SomeStruct.foo()
[06:14:29] <cmr> dbaupp: that works?
[06:14:35] * cmr misses rusti
[06:14:39] <pcwalton> strcat: that's handy to know, thanks
[06:15:28] <Heather> cmr dbaupp I was tried it:  does not implement any method in scope named foo
[06:15:28] <dbaupp> cmr: well, it's an expression, so yes.
[06:15:37] <dbaupp> Heather: is the trait in scope?
[06:15:53] <Heather> dbaupp what means in scope?
[06:15:56] <cmr> jdavis: I have a simple CRUDdy project that I need to finish: https://github.com/cmr/queuebotv2
[06:15:56] <dbaupp> Heather: i.e. you need `use path::to::your::Trait;` in that module
[06:16:27] <Heather> dbaupp yes I have use to trait, to struct and to impl of trait also
[06:17:18] <dbaupp> Heather: you can't use an impl of a trait... :S
[06:17:18] *** Quits: fyolnish (fyolnish@moz-CEED2D75.panda-world.ne.jp) (Connection reset by peer)
[06:17:23] <pcwalton> the Mac sandbox files written in Scheme are awesome
[06:17:31] <pcwalton> pity that Apple is making it a private API :(
[06:17:32] <Heather> dbaupp ?
[06:17:36] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[06:17:38] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[06:17:40] <cmr> pcwalton: that's a full scheme? that's pretty cool
[06:17:50] <pcwalton> cmr: I'm not actually sure how much it supports
[06:17:57] <cmr> I assumed it was just a basic sexpr format
[06:18:02] <pcwalton> I hear it's Scheme based but they might have ripped everything out
[06:18:06] <dbaupp> Heather: there's no way to actually write something that explicitly imports an impl, so I don't know what you have done.
[06:18:10] <cmr> mm
[06:18:40] <Heather> dbaupp let me post gist
[06:19:15] <pcwalton> I think it'd be great for security if Rust servers and such began with "sandbox::enter(ServerMode);" or such
[06:19:25] <pcwalton> Rust can bring sandboxes to the masses
[06:19:48] <jdavis> cmr: I'll check it out.
[06:20:48] <Heather> dbaupp https://gist.github.com/Heather/7349929
[06:21:43] * Sharp wishes Apple would switch to sexprs for plists :(
[06:21:56] <pcwalton> cmr: http://www.reddit.com/r/apple/comments/sht8r/os_x_lion_using_scheme_to_define_sandbox/
[06:21:58] <pcwalton> it's TinyScheme
[06:21:58] <dbaupp> Heather: why not replace the match with `if Path::new(".git").exists() { Git.pull("master") } else { println(...) }`
[06:22:02] *** Quits: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com) (Ping timeout)
[06:22:31] <dbaupp> Heather: is there something called `Star` in Stars::Git? (other than the impl?)
[06:22:56] <Heather> dbaupp no
[06:23:23] <dbaupp> Heather: can you remove the `use Stars::Git::Star` line?
[06:23:28] *** Joins: fyolnish (fyolnish@moz-CEED2D75.panda-world.ne.jp)
[06:23:37] <Heather> dbaupp I want have many other modules and first init empty struct then work with impl-s provided
[06:24:00] <ChrisMorgan> pcwalton: but what will the sandbox do for the server? Surely it would tend to either cripple the server or offer no benefit?
[06:24:03] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[06:24:10] <Heather> dbaupp yes, same after removing
[06:24:10] *** Joins: kk6 (kk6@moz-D508FDD8.ppp-bb.dion.ne.jp)
[06:24:30] <pcwalton> ChrisMorgan: well, it means that if somebody owns your server you can prevent them from accessing system files
[06:24:43] <pcwalton> although I guess if you run your server under a restricted user that won't matter too much
[06:24:58] <dbaupp> Heather: weird, I don't know. (I need to concentrate on other things for a bit now, sorry :( )
[06:25:00] <cmr> pcwalton: isn't that what OS-level stuff like selinux or apparmor are for?
[06:25:02] <ChrisMorgan> Indeed, that's the general recommendation that I've seen.
[06:25:03] <pcwalton> you could prevent people from reading configuration files in /etc though
[06:25:12] <pcwalton> or things like that
[06:25:14] <cmr> that too
[06:25:22] <Heather> dbaupp I see, thanks anyways
[06:25:24] <pcwalton> cmr: selinux and app armor are basically sandboxing systems, no?
[06:25:24] <ChrisMorgan> cmr: that was my understanding
[06:25:41] <pcwalton> this would be an interface to the native sandboxing system, so conceivably it could work with SELinux and AppArmor too
[06:25:42] <cmr> pcwalton: that's exactly what they are, but policy exists outside of the program.
[06:25:47] <pcwalton> although I think seccomp bpf works too
[06:25:59] <Heather> cmr may you check what could be wrong in trait usage here https://gist.github.com/Heather/7349929  please ?
[06:26:00] <pcwalton> and is more commonly enabled if you have a new kernel
[06:26:22] <ChrisMorgan> My main experience with AppArmor is actually negative—that it prevents evince from opening links with custom URL schemes inside PDF files, like the textedit protocol Lilypond uses for links from the engraved sheet music back to the source code...
[06:26:32] <strcat> pcwalton: sadly an issue with namespaces is that lots of kernels don't have the all important user ns yet
[06:26:43] <strcat> because if you enable a FS that's not ported for namespaces (like XFS) it disables it
[06:26:44] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:26:48] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[06:26:48] <pcwalton> :(
[06:27:04] <pcwalton> might not matter on B2G but would matter on the linux desktop I guess
[06:27:35] <strcat> the user namespace is a separate UID/GID space
[06:27:46] <strcat> so you can be root in the ns, but have no root capabilities outside
[06:27:47] <ChrisMorgan> pcwalton: I'm afraid that thus far I don't see what sandboxing is going to get me as a writer of HTTP servers. If I care about security, I should already be using things like selinux/apparmor.
[06:27:58] <strcat> and you need that to set up a good sandbox as non-root
[06:28:01] <Heather> cmr maybe it's a bug? :S
[06:28:09] <strcat> because setting up a sandbox takes root (real or not) privs :)
[06:28:28] <nielsle> Heater: I think that you need fn pull(&self, branch: &str) {
[06:28:32] <pcwalton> ChrisMorgan: you're probably right
[06:28:39] <nielsle> -> Heather
[06:28:46] <Heather> nielsle I will try
[06:29:01] <ChrisMorgan> Still, come up with a good argument and I'd love to be able to use it as a selling point in the web framework I make.
[06:29:07] *** Quits: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP) (Quit: Leaving.)
[06:29:08] <strcat> pcwalton: chromium uses namespaces too fwiw
[06:29:21] * strcat noticed that it complains USER_NS isn't available
[06:29:23] <pcwalton> I was mostly thinking that it would be good for web apps that people distribute as source and install on their servers (e.g. forums), where the server may not be well configured
[06:29:30] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[06:29:34] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[06:29:35] *** Quits: fyolnish (fyolnish@moz-CEED2D75.panda-world.ne.jp) (Connection reset by peer)
[06:29:50] <strcat> ChrisMorgan: a container is better than selinux/apparmor, at least alone
[06:29:58] <ChrisMorgan> True.
[06:30:02] <strcat> namespaces are VM-level isolation, except for exploits in the kernel
[06:30:15] <Heather> nielsle thanks it helpled
[06:30:26] <strcat> and seccomp helps you reduce that attack area, even if you just 'profile' automatically and enable everything it needs
[06:30:31] <ChrisMorgan> pcwalton: yeah, perhaps. It could certainly feature as a nice bonus for "security by default".
[06:30:40] <nielsle> The syntax for the match also looks non-standard   match always  goes with "=>"   http://static.rust-lang.org/doc/0.7/tutorial.html#control-structures
[06:30:53] <cmr> nielsle: yikes, 0.7 link!
[06:30:58] <nielsle> Ooops
[06:31:26] <pcwalton> I don't plan to spend much time sandboxing servo except to move things into the right processes
[06:31:47] <cmr> pcwalton: that should be the hard part anyway.
[06:31:51] <pcwalton> we can figure that out later, it's not that interesting
[06:31:53] <pcwalton> yup
[06:31:56] <strcat> pcwalton: https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=d6970d4b726cea6d7a9bc4120814f95c09571fc3 oh, I guess they fixed it
[06:31:57] <pcwalton> and half of it is done
[06:31:57] <strcat> hrm
[06:32:00] * strcat wonders why he doesn't have it
[06:32:01] <cmr> sandboxing individual processes then becomes easy
[06:32:09] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[06:32:21] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[06:32:45] <pcwalton> I just need to (a) fix graphics metadata (b) move the resource task into the chrome process
[06:33:00] <cmr> someone should write a thing that scrapes rust-ci and displays the oldest commit that still builds, to track stability :p
[06:33:04] <pcwalton> which involves reshuffling some APIs and I'll probably land what I have first to avoid bitrot
[06:33:11] * cmr notices nalgebra is 17 days old and still building
[06:33:37] *** Joins: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP)
[06:33:42] * strcat probably just needs to file an Arch bug about this
[06:34:57] <pcwalton> servo sandboxing is mostly a "why not?" thing, if it's a multi-task browser it might as well be a multi-process browser, as Rust has #[deriving(Decodable, Encodable)]
[06:35:06] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[06:35:45] <pcwalton> and it protects against JS exploits, image/video decoder exploits, unsafe code mistakes, and rust bugs
[06:36:04] <pcwalton> although not perfectly, contrary to as is claimed you can't really assume that the renderer processes are compromised and have the web security model still hold up
[06:36:35] <pcwalton> because of iframes and cross domain images and such
[06:37:32] <pcwalton> OS level sandboxing does nothing against posting an image that exploits people's image decoders to your forum and stealing people's account info through that evil image, for example
[06:37:43] <ChrisMorgan> rust-ci board is showing chris-morgan/rust-http as failing, but the details page shows it as passing, which it has been for a few hours... curious.
[06:38:13] <mm^> Are there restrictions around aliasing/type punning in Rust?
[06:38:30] * ChrisMorgan feels sandboxes as used in Chrome/IE/whatnot are overrated
[06:38:35] <strcat> mm^: it's not completely specified/decided
[06:38:40] <mm^> I have a u8* that I get from a C function, and I want to get & pointers of various types into it
[06:38:47] <strcat> ChrisMorgan: they really aren't, you can make a secure sandbox
[06:38:49] <dbaupp> ChrisMorgan: yeah, I've noticed that too... I think travis might get confused by running several builds on one commit (?)
[06:38:58] <strcat> chromium is just such a huge project that that's a hard thing to do
[06:39:11] <mm^> They're IP packets, so like an &IpHeader, &UdpHeader type things
[06:39:13] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[06:39:24] <strcat> it's really trivial to write a super secure sandbox where you can run untrusted code for say, a programming competition
[06:39:40] <dbaupp> (or for an IRC bot)
[06:40:37] <pcwalton> sandboxing is good and that's why servo is doing it
[06:40:50] <pcwalton> it just isn't good enough to enforce the web security model
[06:40:55] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[06:41:00] <strcat> ChrisMorgan: https://github.com/thestinger/rust-seccomp/blob/master/example.rs that drops permissions to make any syscall that's not a write to stdout or exiting
[06:41:25] <strcat> if you added read, you'd essentially have the 'programming competition' thing covered, at least for C ;p
[06:41:49] <strcat> once it needs filesystem access, it gets more complicated
[06:42:35] <cmr> The prog comps I've participated in all used stdio
[06:42:35] <ChrisMorgan> Oh, I'll agree it's a good thing, but when Firefox gets massive penalties in a comparison between browsers just because it doesn't have sandboxing—regardless of the fact that in the same time period Chrome's sandbox has been bypassed and Chrome may have had one more critical security vulnerability than Firefox—it's overrated.
[06:42:45] <cmr> but they're undergrad stuff
[06:42:58] <ChrisMorgan> strcat: can't we restrict the valid instruction set to {}? That'll be more secure!
[06:43:16] <strcat> ChrisMorgan: chromium is huge
[06:43:26] <strcat> the sandbox *does* work, the issue is that it needs to provide so much functionality
[06:43:30] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[06:43:37] <strcat> there's a huge protocol for talking to the sandbox
[06:43:45] <strcat> the exploits are in code outside of the sandbox
[06:44:27] <strcat> you can get remote code execution inside the sandbox, but you need an exploit through the pipe protocols to get out
[06:44:39] <strcat> at least on linux. that's where chrome is most secure
[06:45:18] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[06:45:22] <pcwalton> depending on what "get out" means… you can still do some damage by violating web security restrictions (e.g. embedding yourbank.com in an iframe)
[06:45:32] <pcwalton> they're going to fix that but just for banks and google properties
[06:45:53] *** Quits: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net) (Quit: jeffdb_)
[06:46:08] <cmr> wait, how can they fix that only for certain sites? is that a political or technical action?
[06:46:11] <pcwalton> but yeah, the IPC is just so complex that it's hard
[06:46:18] <strcat> especially in C++ ;p
[06:46:25] <strcat> crippled google C++
[06:46:33] <pcwalton> #[deriving(Encodable, Decodable)] are the best thing :)
[06:46:38] <pcwalton> cmr: technical, you can't have too many processes
[06:47:12] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[06:47:17] <cmr> ah
[06:47:42] <ChrisMorgan> How does Servo's memory footprint compare with Chrome/Blink and Firefox/Gecko at present?
[06:47:45] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[06:47:52] <pcwalton> I haven't measured. It's probably awful :P
[06:48:05] <pcwalton> but fixable
[06:48:29] <pcwalton> nobody has really worked on it except from a design POV to make sure we don't do things that will be hard to fix in the future, we're more concerned about speed atm
[06:48:32] <strcat> pcwalton: would it be okay for servo's linux sandboxing to depend on a really recent linux kernel?
[06:48:33] <Heather> nielsle can I make something alike let a = A as IA, where IA is trait ?
[06:48:39] <pcwalton> strcat: I am fully in favor of this :)
[06:48:54] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:49:01] <ChrisMorgan> GitHub's memory footprint is pretty bad... just open 25 GitHub tabs and boom! it's using over 1GB of memory more.
[06:49:09] <pcwalton> (1) linux users tend to upgrade fast; (2) we control B2G; (3) servo is multiple years from shipping
[06:49:22] <pcwalton> for example, I have no intention of supporting Windows XP
[06:49:29] <cmr> Heather: Yes, but you need to put it behind a pointer.
[06:49:36] <cmr> Heather: so ~A as ~IA, or &A as &IA
[06:49:51] <Heather> cmr thanks, I will try
[06:50:09] <myname> i didn't get ~Trait yet
[06:50:14] <dbaupp> Heather: ... you probably don't need that (trait objects can/should normally be an enum)
[06:50:17] <pcwalton> by ditching XP we can focus on Direct2D, which is awesome
[06:50:19] <strcat> pcwalton: filesystem access can be limited to stuff like /proc and urandom, right? whatever the runtime needs, and communicate outside for real access
[06:50:27] <strcat> can do a really good sandbox that way
[06:50:28] <pcwalton> yeah
[06:50:36] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:50:38] <pcwalton> it would be nice if the runtime had a way to open its file descriptors early and just reuse them
[06:50:46] <pcwalton> so we could open the FDs, drop into the sandbox, and not open stuff in the future
[06:51:05] <Heather> dbaupp what do you mean? in example I showed you Git struct is not Star thing....
[06:51:10] <strcat> pcwalton: I think you can pass fds over unix domain sockets ;p
[06:51:16] <pcwalton> oh yeah, you can
[06:51:31] <Heather> cmr seems like it works )
[06:51:35] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[06:51:40] <pcwalton> I'm more concerned about the X connection on Linux
[06:51:40] <dbaupp> Heather: as in, if you think you need a trait object, you can almost certainly use an enum instead.
[06:51:50] <pcwalton> I like the X connection because we can get super fast rendering, but… X :(
[06:51:55] <pcwalton> we may have to drop it for security's sake
[06:51:58] *** Joins: josh (josh@moz-E6247462.meeting.ietf.org)
[06:52:07] *** Quits: josh (josh@moz-E6247462.meeting.ietf.org) (Quit: josh)
[06:52:07] <Heather> dbaupp how?
[06:52:22] <ChrisMorgan> pcwalton: ditching Vista too, I hope?
[06:52:37] <strcat> pcwalton: hm. it seems like you could just use direct rendering to a buffer though?
[06:52:44] <strcat> that's how DRI2 works afaik
[06:52:46] <pcwalton> I don't see a large reason to ditch Vista but I probably wouldn't be sad to if we needed
[06:52:50] <dbaupp> Heather: I don't know how in your specific case, but possibly something like `enum VersionControl { Git, Hg }`
[06:52:56] <pcwalton> strcat: ideally we would use XRender
[06:52:59] <strcat> pcwalton: nooo
[06:53:03] <strcat> xrender is really bad :(
[06:53:03] <pcwalton> which can be fast
[06:53:07] <pcwalton> it's good on some cards
[06:53:13] <pcwalton> and drivers
[06:53:17] <ChrisMorgan> Microsoft have indicated they don't care about Vista. New IE releases don't come for Vista.
[06:53:23] <Heather> dbaupp let me push what I got and then you will suggest me if it possible to make it better
[06:53:35] <cmr> ChrisMorgan: I don't blame them; *everyone* would rather forget that Vista happened.
[06:53:52] *** Quits: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net) (Ping timeout)
[06:53:55] <pcwalton> strcat: mostly I just want to do texture upload as fast as possible
[06:54:02] <ChrisMorgan> XP is used enormously more than Vista, to be sure.
[06:54:15] *** Joins: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net)
[06:55:28] <mm^> strcat: passing fds over unix domain sockets + ld preloading open() is a great trick
[06:55:30] <sfackler> Is there any way to declare a function with a parameter T or implement a trait for T where, say Option<T>: Foo?
[06:55:48] <strcat> mm^: why LD_PRELOAD open?
[06:56:18] <Heather> dbaupp can I pass struct type in function?
[06:56:22] <mm^> strcat: so when your process tries to open something, you can proxy that out to another process that opens it, and passes back in the fd over a domain socket
[06:56:44] <Heather> dbaupp or only with < >
[06:57:06] *** Joins: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net)
[06:57:49] *** Quits: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net) (Quit: pcwalton)
[06:59:09] <benh> mm^: that's neat
[07:01:33] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[07:01:33] *** ChanServ sets mode: +ao dherman dherman
[07:01:59] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[07:03:03] *** Quits: mark_edward (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[07:04:25] <strcat> https://bugs.archlinux.org/task/36969 ;(
[07:04:28] <strcat> building a kernel it is
[07:09:37] <dbaupp> Heather: what do you mean by "pass a struct type"?
[07:10:07] *** Joins: brendan (brendaneic@323D4905.A5FB4ABA.FE58E87C.IP)
[07:11:59] *** Quits: brendan (brendaneic@323D4905.A5FB4ABA.FE58E87C.IP) (Quit: brendan)
[07:12:59] *** Joins: brendan (brendaneic@323D4905.A5FB4ABA.FE58E87C.IP)
[07:13:13] <Heather> dbaupp I mean as argument, but I can do it with <>
[07:15:12] <Sharp> By the way, can anyone explain to me why idiomatic Java routinely leaves off generic type parameters?  Does it not matter because they don't monomorphize?
[07:15:27] *** Joins: pyrac (pyrac@moz-8A554332.math.u-bordeaux1.fr)
[07:15:35] <Heather> dbaupp I lost link to docs :(
[07:15:41] <strcat> Sharp: whether you not you monomorphize doesn't seem related
[07:15:54] <dbaupp> Heather: I still don't understand...
[07:15:57] <Heather> found
[07:15:58] <Sharp> strcat: Well, I'm talking about the situations where the type can't be inferred.
[07:16:12] <strcat> Sharp: java doesn't do type inference
[07:16:35] <Sharp> Isn't ? a limited form of inference?
[07:16:39] <Sharp> Or not really?
[07:16:48] *** Joins: fyolnish (fyolnish@moz-CEED2D75.panda-world.ne.jp)
[07:17:25] <strcat> Sharp: isn't that just used as a glob basically?
[07:17:37] <Sharp> Basically.
[07:17:42] <Sharp> Well
[07:17:49] <Sharp> I think there are a few situations where it's not a glob.
[07:17:59] <Sharp> Anyway, I meant "if Java monomorphized it would actually have to know the types at compile time so it wouldn't be optional to provide them in those places."
[07:18:04] <Sharp> Or so I'd expect.
[07:18:25] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[07:18:46] <strcat> Sharp: I don't really think monomorphization applies
[07:19:03] <Sharp> In Java?
[07:19:06] <Sharp> Or in general to this situation?
[07:19:09] <strcat> in java
[07:19:11] <Sharp> Ah
[07:19:19] <Sharp> That was what I was asking, thanks.
[07:19:45] <strcat> Sharp: trait objects in rust are essentially how any kind of polymorphism works in java, you can only get the concrete type via reflection afaik
[07:19:53] <Sharp> So all Java generics are less efficient than writing a specific implementation of the function?
[07:20:02] <sfackler> sharp: rawtypes (e.g. Map instead of Map<Foo, Bar>) are not idiomatic java
[07:20:16] <Sharp> They show up in lots of popular repositories
[07:20:18] <Sharp> E.g. storm.
[07:20:36] <sfackler> lots of code is old I guess
[07:20:47] <strcat> Sharp: java uses interfaces (dynamic dispatch) and inheritance (dynamic dispatch) and generics are just sugar
[07:21:02] <Sharp> All Java functions are virtual?
[07:21:03] <strcat> so yes, if you assume no optimizing compiler specialized instances would be faster
[07:21:03] *** Quits: fyolnish (fyolnish@moz-CEED2D75.panda-world.ne.jp) (Connection reset by peer)
[07:21:04] <sfackler> generic use shouldn't have any impact on performance in most cases since the parameters are erased at compile time
[07:21:09] <strcat> Sharp: if they're not 'final'
[07:21:11] <sfackler> unless it forces you to box a primitive type
[07:21:20] <Sharp> Ugh.
[07:21:47] <strcat> Sharp: so... all non-primitives in java are already boxed, and the methods are already virtual
[07:22:01] <strcat> so generics aren't adding overhead *to that*
[07:22:18] <Sharp> Right, yes, I think I am getting it
[07:22:20] <strcat> but if you consider that the code is generic *because* types are boxed and the methods are virtual, then it has a ton of overhead
[07:22:27] <Sharp> Java is already slow, so why not use reflection? :P
[07:22:36] <strcat> reflection is beyond that
[07:22:51] <sfackler> java is pretty fast
[07:23:28] <strcat> sfackler: java using primitives is pretty fast, abstracted java isn't
[07:23:48] <Sharp> What strcat said.  Anyway, I'm just trying to figure out the performance profile of what I"m writing
[07:23:50] <strcat> using primitives, sure, you're within 20% of C in numeric code ;p
[07:23:53] <Sharp> It's frustratingly difficult t
[07:23:55] <Sharp> o tell
[07:24:00] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[07:25:21] *** Quits: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net) (Quit: Leaving)
[07:25:27] *** Quits: skade (skade@moz-A89F791B.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:25:48] <sfackler> hotspot does a pretty good job in a lot of cases
[07:26:13] <sfackler> it's not going to pull you down to C-like runtimes, but it's still okay
[07:26:51] *** Quits: FreeFull (freefull@D89A5B80.2CE4D4F4.159B5998.IP) (Quit: )
[07:27:32] <strcat> real-world programs use a ton of abstraction and java's reputation as slow and memory hungry is well deserved imo ;p
[07:28:00] <strcat> Go has a compiler that doesn't really optimize and it's already faster than the JVM
[07:28:10] <strcat> on trivial numerics benchmarks ;s
[07:28:58] <sfackler> there's a lot about java that's pretty sad
[07:29:02] <strcat> go's compiler seriously just does a pass over the code, generating reasonable assembly from the instructions as it goes, and inlining functions that are very, very small (1 expression basically)
[07:29:04] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[07:29:20] *** Joins: nkoep (nik@moz-CC1EFD15.pool.mediaways.net)
[07:29:27] <strcat> they only do static linking so it can cross-package inline anything, but it only does really small things
[07:30:37] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[07:30:38] *** ChanServ sets mode: +ao dherman dherman
[07:32:12] <Heather> how to filter an &[Option<&Star>] to unwrap all options
[07:33:11] <Sharp> strcat: Is that just because Go doesn't require boxed everything?  Obviously it still has GC.
[07:33:32] <strcat> Sharp: so... it allocates on the stack until you take an address
[07:33:44] <strcat> and then it allocates on the heap instead
[07:33:48] <Sharp> Go?
[07:33:50] <strcat> yes
[07:33:52] * sfackler hopes that Rust is less conservative with deprecating standard library stuff than Java is
[07:34:09] <Sharp> Well, that's the most trivial implementation of variable escape I can think of :)
[07:34:11] <sfackler> Go also performs some very basic escape analysis iirc
[07:34:11] <strcat> Sharp: the JVM has escape analysis too, the major difference would be that Go is non-virtual by default
[07:34:33] <Sharp> Yeah, I'm sure
[07:34:54] <Sharp> Oh, so it's the interface abstraction that's the culprit
[07:34:59] <Sharp> Not object access
[07:35:11] <strcat> Sharp: Go doesn't have generics ;p
[07:35:19] <strcat> it has interfaces, and they are slower than java
[07:35:19] <Sharp> Haha, right :P
[07:35:22] <strcat> often slower than python
[07:35:39] <Sharp> Pypy, or regular Python?
[07:35:43] <strcat> python
[07:35:44] <strcat> as in cpython
[07:35:53] <Sharp> I don't understand how you can be slower than cpython.
[07:36:06] <Sharp> (As a compiled language).
[07:36:10] *** Quits: pnathan (Adium@moz-E72012D3.tukw.qwest.net) (Quit: Leaving.)
[07:36:47] <Sharp> Doesn't Python do basically everything as message passing?  I know Ruby does.
[07:36:59] <strcat> Sharp: hm?
[07:37:02] <strcat> Sharp: Go is essentially treated as portable ASM by the compiler, it barely optimizes
[07:37:12] <Sharp> strcat: Oh, hah.
[07:37:17] <strcat> python is interpreted, sure, but the stdlib stuff is optimized C
[07:37:27] <Sharp> "Message passing" as in every function is dynamic dispatch by name
[07:37:36] <Sharp> (Literally, as a string, in the case of Ruby, as nearly as I can tell)
[07:37:56] <strcat> Sharp: so
[07:38:00] <strcat> lets say you have a function with 3 locals
[07:38:08] <strcat> python optimizes it to storing the locals statically
[07:38:19] <strcat> it's like JS var hoisting
[07:38:25] <Sharp> Oh, cool.
[07:38:26] <strcat> any local you use is in scope for the whole function
[07:38:28] <strcat> it's terrible
[07:38:30] <strcat> ;p
[07:38:42] <Sharp> Haha
[07:38:48] <Sharp> Wait, that actually affects the implementation?
[07:38:48] <strcat> Sharp: a method lookup is a dict (hash table) lookup
[07:38:53] <strcat> a namespace lookup is a dict lookup
[07:38:57] <strcat> the global namespace is a dict
[07:39:04] <strcat> foo.bar.baz() is 2 hash table lookups
[07:39:08] <strcat> if you really cared...
[07:39:20] <strcat> you can do 'bar = foo.bar' and avoid it in a loop ;p
[07:39:21] <Sharp> Wait hold on, I'm still confused about the local static storage, does Python not do register coloring?
[07:39:31] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:39:44] <Sharp> I guess since it's interpreted that would be too slow?
[07:40:15] <strcat> Sharp: I doubt it does really anything you'd consider an optimization at runtime
[07:40:36] <Sharp> As far as microoptimizations like what you described: every time I find myself using even one of those in a language like RubyMRI or CPython
[07:40:46] <Sharp> I just switch to C (hopefully Rust soon)
[07:41:09] <Sharp> Because if speed matters I shouldn't be using either.
[07:41:25] <strcat> Sharp: http://sprunge.us/bjLV global lookup (hash table lookup)
[07:41:36] *** Joins: Ferreus (ferreus@moz-1CF9FE6D.dip0.t-ipconnect.de)
[07:41:53] <strcat> Sharp: http://sprunge.us/ORUS var hoisting in action
[07:41:58] <Sharp> So wait… how big is the hash table? :)
[07:42:13] <Luqman> i want select on 2 TcpStream's :(
[07:42:15] <strcat> Sharp: *everything* in the global scope, so... not much, because namespaces are other scopes
[07:42:24] <strcat> import foo
[07:42:26] <strcat> foo.bar()
[07:42:42] <strcat> that does a global lookup for foo, then looks up bar in foo
[07:42:44] <strcat> 2 hash table lookups
[07:42:51] <strcat> it's never optimized out by cpython, you pay every time
[07:42:56] <jason_> LOAD_FAST 0 <-- is 0 an array index?
[07:42:57] <Sharp> Again, I ask: how can Go interfaces really be slower?
[07:42:59] <strcat> jason_: yes
[07:43:05] <strcat> jason_: it statically allocates the locals basically
[07:43:15] <jason_> so not really hash lookup
[07:43:22] <strcat> jason_: global scopes are hash lookups
[07:43:30] <strcat> jason_: you missed the first paste ;p
[07:43:37] * Sharp can't access the sprung page.
[07:43:44] <strcat> jason_: http://sprunge.us/bjLV http://sprunge.us/ORUS
[07:43:45] <Sharp> Oh wait, it's working now.
[07:44:05] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[07:44:20] <strcat> namespaces (including the global namespace) and classes not using __slots__ use dict lookups
[07:44:58] <strcat> Sharp: I'm not sure, it's just really terrible ;p
[07:45:04] <Sharp> Haha.
[07:45:27] <Sharp> Linear search? :D
[07:45:29] <strcat> maybe because people generally use reflection with them
[07:45:36] <Sharp> Or that.
[07:45:42] <Sharp> Wait, Go has reflection but not generics?
[07:45:59] <strcat> right
[07:46:12] <Sharp> Why on earth would you do that?
[07:46:37] <strcat> Sharp: http://golang.org/pkg/reflect/ reflection is a big part of Go
[07:46:39] <strcat> I don't know
[07:46:53] <Sharp> If you're going for simplicity / easy to read code / nonabusable syntax
[07:46:56] <strcat> Sharp: they like to compare 'interface{}' to 'void *' in C
[07:46:57] <Sharp> Generics win *handily*.
[07:47:10] <strcat> but... it's basically an opaque box for a type, and the only way to get something out is reflection
[07:47:20] <strcat> now, consider that specific interfaces have this same reflection capability
[07:47:26] <strcat> but without reflection, expose some methods you can call
[07:47:57] <Sharp> In C if I wanted to use void * in most cases I'd have to tag it with an enum (and then I'd rather use a union), which is why I'm glad Rust just does what I actually want and gives me ADTs :P
[07:47:59] <strcat> interfaces are just implemented implicitly if a type has methods matching the names/types, and then it can be boxed as one, but often the stdlib uses reflection to get at the real type
[07:48:01] <strcat> so
[07:48:03] <strcat> it'll take a Reader
[07:48:05] <strcat> and then reflect on it
[07:48:15] <Heather> borrowed value does not live long enough
[07:48:16] <strcat> and say, on look, you expose this stuff too!
[07:48:19] <strcat> oh look*
[07:48:24] <Sharp> Wait, interfaces use duck typing?
[07:48:28] <strcat> Sharp: yes
[07:48:36] <Sharp> Go seems weird.
[07:48:39] <strcat> Sharp: they're implicitly implemented (structural typing) based on name/types matching
[07:48:52] <strcat> and you can reflect the real type back out
[07:49:05] <strcat> or reflect that it implements some other interface
[07:49:08] * strcat shrugs
[07:49:25] <Sharp> I just don't understand *why* you'd want these things in a compiled language.
[07:50:02] <strcat> Sharp: http://golang.org/ref/spec#Interface_types
[07:50:32] <strcat> this doesn't cover reflection since it's in the stdlib
[07:50:50] <strcat> Sharp: also, you can "tag" structs
[07:50:52] <strcat> and reflect on the tags
[07:51:03] <strcat> anyway Go is *all about* reflection
[07:51:08] <Sharp> From the way you're talking about it reflection:Go like objects:Java
[07:51:13] <strcat> if you don't like reflection, you don't like Go.
[07:51:16] <strcat> ;p
[07:51:21] <Sharp> Then I don't like Go, I guess.
[07:52:04] <strcat> Sharp: http://golang.org/pkg/encoding/json/ for example
[07:52:07] <strcat> this uses reflection
[07:52:08] <Sharp> Reminds me of how AngularJS does everything through dependency injection :(
[07:52:11] <strcat>  Struct values encode as JSON objects. Each exported struct field becomes a member of the object unless 
[07:52:16] <strcat> - the field's tag is "-", or
[07:52:18] *** Joins: ofeldt (ofeldt@moz-5E0330E8.dip0.t-ipconnect.de)
[07:52:18] <strcat> - the field is empty and its tag specifies the "omitempty" option.
[07:52:24] <strcat> it walks the fields, and it can reflect on these field tag things
[07:52:40] <strcat> so obviously there is a lot of heap allocation and indirection going on in all these interfaces, and it doesn't optimize so...
[07:53:00] *** Quits: ofeldt- (ofeldt@moz-A6B50DE0.dip0.t-ipconnect.de) (Ping timeout)
[07:53:03] <Sharp> Yeah… I think I am starting to understand it
[07:53:08] <Sharp> So now the question becomes, how on earth is the JVM slower? :D
[07:53:24] <Sharp> (Yes, I know, for non interface code).
[07:53:33] <Sharp> (But still).
[07:53:47] <strcat> Go is C with lots of reflection, dynamic dispatch and GC
[07:53:50] <Sharp> Wait I just reread that.  Struct values encode as JSON?
[07:53:51] <Sharp> As in
[07:53:59] <Sharp> At runtime, there's constantly de/encoding from JSON going on?
[07:54:00] <strcat> Sharp: it uses reflection to turn them into json objects
[07:54:02] <strcat> Sharp: no
[07:54:05] <strcat> I mean the json module, lol
[07:54:09] <Sharp> Oh hah, okay.
[07:54:14] <strcat> it was just an example of how reflection is used
[07:54:15] <Sharp> I was going to be like… that's too much.
[07:54:18] <Sharp> Okay.
[07:54:22] <strcat> you put string tags on fields to communicate information
[07:54:30] <strcat> it annoyed the hell out of me
[07:54:38] <Sharp> "Go is C with the three features C programmers don't want."
[07:55:25] <Sharp> (I guess to be fair Objective C kinda sorta has dynamic dispatch?)
[07:55:38] <strcat> Sharp: Go is from the worst is better school of thought, so that's what it shares with C
[07:55:43] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[07:55:50] <Heather> how to make borrowed values to live long enough :S
[07:55:55] <strcat> they value a simple compiler implementation more than anything
[07:55:59] <strcat> and after that, a simple language spec
[07:56:14] <strcat> and then as much performance and expressiveness you can get with those are your first 2 goals
[07:56:17] <strcat> as your*
[07:56:27] <strcat> I don't really understand why they started off marketing it as a C++ replacement
[07:56:38] <Sharp> I don't understand what niche it even fills
[07:56:48] <elij> ssh
[07:57:00] <Sharp> SSH?
[07:57:13] <strcat> Sharp: it fills the Java niche
[07:57:17] <strcat> it's simple. simpler than Java
[07:57:40] <strcat> it's a good language to use for teaching, because the language is tiny
[07:57:48] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[07:57:51] <Sharp> Having programmed in the Java the past couple of days I don't know what niche Java fills either :(
[07:57:58] <Sharp> The "has lots of libraries" niche maybe.
[07:58:07] <Eridius> strcat: they started off marketing it as a "systems language", not specifically a C++ replacement
[07:58:20] <strcat> it's way faster than scripting languages, has great tooling, has a tiny language spec, has an awesome standard library (at least, as far as you can get without the ability to define generic functions/containers)
[07:59:02] <strcat> really the only reason someone would use it is that the stdlib is easy to use, and comparable to python's in breadth
[07:59:12] <Sharp> I don't know… I can't envision a situation where I'd rather use Go than Rust (reservations about stdlib aside).
[07:59:29] <Sharp> I understand that they're quite different languages though.
[07:59:43] <strcat> Sharp: because you can learn Go in 5 minutes
[07:59:57] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:00:05] <sfackler> also, Rust isn't done yet :P
[08:00:10] <Sharp> Haha
[08:00:12] <Sharp> Well, there is that.
[08:00:37] <sfackler> Go also makes it easy to write really scalable web servers
[08:00:40] *** Joins: nuts (tii@822A8E7E.6AD15BF5.75D3BBDB.IP)
[08:00:49] <Sharp> Moreso than Node?
[08:00:52] <strcat> Sharp: yes
[08:00:57] <Sharp> Hm.
[08:00:59] <sfackler> green threads mean you can avoid callback hell
[08:00:59] <Sharp> Cool.
[08:01:04] <strcat> it's much better than node at writing servers
[08:01:15] <Ralith> cite?
[08:01:20] <strcat> Sharp: in Go, you spawn 1 goroutine per client
[08:01:24] <strcat> you write plain old blocking code
[08:01:31] <Sharp> Right, that was the big thing I was hearing about Go a couple of years ago
[08:01:31] <strcat> in each goroutine
[08:01:36] <Sharp> Green threads
[08:01:41] <Sharp> Not weird reflection obsession
[08:01:50] <Ralith> what's your basis for claiming it's much better?
[08:01:52] <strcat> goroutines start off with an 8K large stack, and a context switch in Go swaps 3 registers
[08:02:01] <Sharp> Ooh.
[08:02:04] <strcat> Ralith: vastly higher-level than async programming by hand?
[08:02:10] <strcat> and faster
[08:02:18] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[08:02:23] <Ralith> strcat: cite your source for that, please
[08:02:26] <sfackler> ChrisMorgan has some benchmarks of Go vs Node vs Rust with rust-http and Go's server has something like twice the throughput in some cases
[08:02:29] <sfackler> https://github.com/chris-morgan/rust-http/tree/master/comparisons
[08:02:45] *** Joins: Ms2ger (Ms2ger@57ACE628.C60A97A6.F9FB0584.IP)
[08:02:59] <Sharp> Hm, Rust uses green threads, right?   Similar implementation to Go's?
[08:03:18] <sfackler> yep
[08:03:30] <strcat> Sharp: but rust isn't going to be using segmented stacks
[08:03:35] <Sharp> Ah right.
[08:03:42] <myname> why not?
[08:04:04] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[08:04:06] <strcat> Go has a mostly-precise GC and when it's fully precise they are maybe switching to contiguous stacks that can be pre-allocated
[08:04:06] <dbaupp> myname: https://mail.mozilla.org/pipermail/rust-dev/2013-November/006314.html
[08:04:21] <strcat> rust isn't a DSL for writing socket servers
[08:04:26] <Sharp> strcat: That's actually what's interesting, a few years back all I heard about Go was how garbage its GC was
[08:04:31] <strcat> and socket servers are the only use case for segmented stacks
[08:04:32] <Sharp> From what you're saying it's now extremely good
[08:04:41] <strcat> Sharp: it's not extremely good
[08:04:57] <strcat> haskell and erlang both do I/O just as well or better ;p
[08:05:01] <Sharp> Haha
[08:05:09] * Sharp <3 Erlang
[08:05:17] <Sharp> But I wouldn't call it easy to pick up :P
[08:05:36] <dbaupp> (haskell can apparently do IO so well that it breaks the kernel. :P )
[08:05:49] <Sharp> (What does that mean?)
[08:06:08] <strcat> Sharp: if you want to write an entirely I/O bound socket server, Go is an incredible language, I'd agree with that
[08:06:26] <Ralith> haskell still hasn't settled on an approach to IO
[08:06:29] *** Joins: victorporof (victorporo@18E21E24.67B94DB5.4A6B528C.IP)
[08:06:33] <strcat> it has possibly the best networking library out there, and you get to write a really performant server with plain old blocking code
[08:06:35] <dbaupp> Sharp: http://haskell.cs.yale.edu/wp-content/uploads/2013/08/hask035-voellmy.pdf "After removing various bottlenecks in our system, SimpleServer scaled to 20 cores and serves nearly 700,000 requests per second. This workload places an unusual burden on the Linux kernel and triggers a bug in Linux;"
[08:06:55] <Sharp> Haha, that's awesome
[08:07:14] <Sharp> strcat: Sounds like it does have its niche then.
[08:07:18] <strcat> imo though, Go is absolutely terrible for anything that's not a socket server
[08:07:20] <strcat> I hate it ;p
[08:07:21] <Sharp> Just not as a general purpose language.
[08:07:31] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[08:07:47] <strcat> and... in 5 years, non-blocking sockets may no longer be important
[08:07:51] <Sharp> Also: 700,000 requests per second?
[08:08:23] <Sharp> Concurrent?
[08:08:29] <strcat> Sharp: yes
[08:08:31] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[08:08:34] <Sharp> Haha
[08:08:41] <Sharp> What 10k problem :P
[08:08:48] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[08:09:02] <strcat> Sharp: as soon as you do anything it will drop to 20k
[08:09:09] <strcat> parse http headers -> back to reality ;p
[08:09:37] <Sharp> Still… 20k is pretty good :)
[08:09:38] <dbaupp> strcat: but who bothers to parse http headers anyway? :P
[08:09:52] *** Quits: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net) (Quit: jeffdb_)
[08:09:57] <strcat> Sharp: so... the way I would describe Go is that it's a terrible language, but a wonderful standard library + runtime
[08:09:58] <Luqman> dbaupp: just those pesky browsers, but who needs em
[08:10:15] <strcat> (as wonderful as you can get in a terrible language!)
[08:10:34] <Sharp> Haha.
[08:10:38] <Sharp> Seems justifiable.
[08:11:00] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[08:12:06] <Sharp> dbaupp: This article is awesome.
[08:12:51] <dbaupp> Luqman: exactly!
[08:13:07] * dbaupp deletes his firefox, and removes his servo fork.
[08:13:23] <strcat> Sharp: http://golang.org/pkg/net/http/#ListenAndServe example, it spawns a goroutine per client... so you just have to write a simple sequence of blocking reads/writes
[08:13:52] *** Quits: brendan (brendaneic@323D4905.A5FB4ABA.FE58E87C.IP) (Quit: brendan)
[08:14:03] <Sharp> Wow...
[08:14:08] <Sharp> It does almost seem like a server DSL :D
[08:14:39] *** Joins: brendan (brendaneic@323D4905.A5FB4ABA.FE58E87C.IP)
[08:15:02] <strcat> and it'll happily spawn 300k of these on 32-bit, so that's a non-issue
[08:15:22] <strcat> and you'll get pretty consistent performance (1/2 the speed of nginx maybe?)
[08:15:28] * strcat shrugs
[08:15:35] <strcat> it does that job very well
[08:15:46] <Ralith> sfackler: how is node doing concurrency in those benchmarks?
[08:15:54] <Ralith> SMP, that is
[08:16:20] <strcat> Ralith: node has a thread pool it uses for writes
[08:16:22] <strcat> well, libuv
[08:16:44] *** Quits: jdm (jdm@moz-36808BF3.dsl.teksavvy.com) (Ping timeout)
[08:16:46] <sfackler> and IIRC Go still uses a single thread by default
[08:17:03] <sfackler> ah, but that's overriden in the benchmark
[08:17:14] <strcat> sfackler: it doesn't really speed up as much as you'd expect from adding threads
[08:17:23] <strcat> after about 3 you get close to nothing
[08:17:26] <Ralith> strcat: I don't see where writing is involved in that benchmark.
[08:17:54] <ChrisMorgan> strcat: well, you'd expect as many as you have cores, optimally, surely?
[08:17:56] <Sharp> Ralith: Good luck getitng objective data on that, for any language :P
[08:17:56] *** Quits: kk6 (kk6@moz-D508FDD8.ppp-bb.dion.ne.jp) (Quit: Leaving...)
[08:18:04] <Ralith> Sharp: objective data on what?
[08:18:07] <strcat> ChrisMorgan: well, it can get worse after 2-3
[08:18:11] <Sharp> How long it takes to write a server.
[08:18:15] <Ralith> I didn't ask that.
[08:18:15] <ChrisMorgan> Mine is a dual-core machine, so you get a speed-up of about 2x. On a quad-core machine, I'd expect to get to 4x.
[08:18:23] <strcat> ChrisMorgan: it doesn't scale that well :)
[08:18:40] <Sharp> Hm, sorry, maybe I was misinterpreting.
[08:18:45] <strcat> ChrisMorgan: the event loop is 1 thread, it dispatches to the other threads
[08:18:46] <ChrisMorgan> Sure, you may start getting bottlenecks in other parts of the stack.
[08:18:52] <Ralith> sfackler: do you know how node was using the multiple CPUs in that benchmark?
[08:20:14] <Ralith> if at all?
[08:20:17] <strcat> Go doesn't get to full CPU usage in an http benchmark like that, it's bottlenecked by the limitations of the I/O design iirc at least...
[08:20:25] <jason_> i thought node.js forked
[08:20:28] <Sharp> One of the few times I see all four cores working is when I run make check :)
[08:20:47] <Ralith> Sharp: that's funny, that should only do one thing at a time
[08:21:10] <Sharp> It seems like there's a test running per core
[08:21:12] <jason_> make check runs in parallel
[08:21:16] *** Quits: nuts (tii@822A8E7E.6AD15BF5.75D3BBDB.IP) (Ping timeout)
[08:21:17] <Ralith> by default? neat
[08:21:21] <Sharp> Yep!
[08:21:42] <Ralith> usually people leave that to make's -j option
[08:22:02] <Sharp> Rust is too hip for those people.
[08:22:13] *** pmoore|away is now known as pmoore
[08:22:22] <Ralith> but not so hip as to discard make, it would seem
[08:22:32] <Sharp> Make is retro :P
[08:22:47] <Ralith> right up until you start passing flags to it?
[08:23:04] <Sharp> Flags are soooo 1993
[08:23:11] <Ralith> truth
[08:25:05] <dbaupp> Heather: I found how to read a line: http://static.rust-lang.org/doc/master/std/rt/io/buffered/struct.BufferedReader.html
[08:25:24] *** Quits: victorporof (victorporo@18E21E24.67B94DB5.4A6B528C.IP) (Client exited)
[08:25:52] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[08:26:07] <dbaupp> Heather: except, for stdin, you'll want the buffer to be very small (i.e. use with_capacity with size 1).
[08:26:19] <Heather> dbaupp Awesome ! Thanks
[08:26:36] <ChrisMorgan> Why exactly would read_line be only on a buffered reader?
[08:26:59] <dbaupp> ChrisMorgan: https://github.com/mozilla/rust/issues/10334
[08:27:10] <Heather> dbaupp I need your help with borrowed value
[08:27:14] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[08:27:28] <Heather> dbaupp getting borrowed value does not live long enough
[08:27:36] <dbaupp> Heather: replace foo.bar().baz() with let tmp = foo.bar(); tmp.baz()
[08:27:47] <ChrisMorgan> Good. Thanks, sfackler.
[08:27:52] <dbaupp> Heather: (assuming your error is pointing to a chain of method calls like that)
[08:28:05] <Heather> dbaupp it's in fn ifV<T : Star>(rc : &str, star: T) -> Option<&Star> {
[08:28:19] <Heather> dbaupp I've got &star as &Star there
[08:28:25] <ChrisMorgan> BufferedStream was the immediate thing that came to mind for me with read_line.
[08:28:37] *** Joins: victorporof (victorporo@9B024C76.73B1E539.9B1E38F4.IP)
[08:29:04] *** Quits: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP) (Ping timeout)
[08:29:15] <dbaupp> Heather: ah, you need to use lifetimes
[08:29:36] <dbaupp> Heather: ... but I still think it's fairly unlikely that you need a trait object there.
[08:29:36] *** Joins: sigma (sigma@moz-654650A0.range86-160.btcentralplus.com)
[08:29:50] *** Quits: brendan (brendaneic@323D4905.A5FB4ABA.FE58E87C.IP) (Quit: brendan)
[08:30:25] <dbaupp> Heather: (actually, using lifetimes won't work straight away, because `star` is passed by value, you'll need to pass a reference, and write `ifV<'a, T: Star>(rc: &str, star: &'a T) -> Option<&'a T> { ... }`)
[08:30:33] *** Joins: brendan (brendaneic@323D4905.A5FB4ABA.FE58E87C.IP)
[08:30:35] <dbaupp> (or Option<&'a Star>)
[08:30:56] <Heather> dbaupp 'a ?
[08:31:28] <Sharp> Regions!
[08:32:19] <dbaupp> Heather: http://static.rust-lang.org/doc/master/tutorial-borrowed-ptr.html#named-lifetimes
[08:34:36] <Heather> dbaupp  cannot infer an appropriate lifetime due to conflicting requirements
[08:35:21] *** Joins: skade (skade@30BBD5E6.505237C9.CAE22B62.IP)
[08:36:44] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Client exited)
[08:39:02] *** Joins: HollyRain (HollyRain@moz-50A83091.dyn.user.ono.com)
[08:40:03] <Heather> dbaupp what means  add `'static` bound
[08:40:05] <HollyRain> I've seen in reddit about sandboxing support: http://www.reddit.com/r/rust/comments/1q3370/sandboxing_support_for_rust_using_the_native_os/
[08:40:14] <dbaupp> Heather: can I see your code?
[08:40:28] <HollyRain> for what could be used?
[08:40:36] <Heather> dbaupp https://gist.github.com/Heather/7351205
[08:41:15] <strcat> HollyRain: for isolating a process
[08:41:25] <dbaupp> Heather: you need `T: Star + 'static`
[08:41:52] <Heather> dbaupp oh wow ...
[08:42:18] <dbaupp> Heather: ... why can't you just return Option<T>
[08:42:23] <dbaupp> Heather: e.g. https://gist.github.com/huonw/7351219
[08:42:27] <Heather> Assertion failed
[08:42:39] <dbaupp> Heather: (since the `Star` trait isn't used in that function, you don't need it as a bound.)
[08:42:40] <Heather> dbaupp T is different to Star
[08:43:05] <dbaupp> Heather: yes, but you can still call methods from Star on T, if T implements Star.
[08:43:51] <Heather> dbaupp but I can't use let x = if a { foo(x) } else {foo(z) }; x.call
[08:44:12] <Heather> dbaupp because foo(x) and foo(z) will return different things and not Star
[08:44:20] <dbaupp> Heather: oh... this is for different version control systems, yeah?
[08:44:29] <Heather> dbaupp yes
[08:44:37] <dbaupp> Heather: can't you have an enum of all the different ones you support, instead of using a trait object?
[08:44:57] <Heather> dbaupp https://gist.github.com/Heather/7351246
[08:45:21] <Heather> dbaupp after that call I can just use vcs.pull()
[08:45:42] <Heather> dbaupp that was idea...
[08:45:43] <Sharp> Heather: You seem resistant to using enums in Rust…
[08:45:56] *** Quits: brendan (brendaneic@323D4905.A5FB4ABA.FE58E87C.IP) (Quit: brendan)
[08:46:17] <Heather> dbaupp I use enums but I can't understand how can it be done with enums
[08:47:19] <dbaupp> Heather: `enum VCS { Git, Hg } impl VCS { fn pull(&self) { ... } }` etc
[08:48:00] <dbaupp> and then in pull, you'd have `match *self { Git => { /* run git pull */ } Hg => { /* run hg pull (or whatever it is) */ } }`
[08:48:14] <Sharp> I've realized lately that a lot of OOP is about trying to avoid anything that looks like switch… I don't know why.
[08:48:39] <Yurume> dbaupp, I think Heather envisions something extensible, not limited to the enum
[08:48:50] <Yurume> (enum cannot change once fixed)
[08:49:10] <Sharp> Yurume: In practice, they can always be wrapped, though (often quite easily).
[08:49:14] <Yurume> still, I don't think ifV etc. is a good solution
[08:49:19] <Ms2ger> Sharp, so you can add new cases without touching all the switches
[08:49:20] <dbaupp> Yurume: it's all in the source... so adding a new VCS involves adding either a type, or a enum variant.
[08:49:25] <Heather> dbaupp I get it but then you write switch for every function
[08:49:36] <Heather> dbaupp I prefer write function for every vcs instead
[08:49:47] <dbaupp> Heather: only the ones that need to know the difference between the vcs
[08:49:52] <Yurume> dbaupp, I haven't read actual source (only a snippet) so I didn't know
[08:50:01] <Sharp> Ms2ger: If _ isn't handling it correctly already, a default method is not going to handle them correctly when you use inheritance instead.
[08:50:22] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[08:50:22] <Yurume> but I think, if the goal is extensibility from outside, then you can make a generic constructor function to deal with it
[08:50:39] <Sharp> Sure, I'm not saying there are *no* instances where traits make sense :)
[08:50:53] <Sharp> Just that enums should probably be the default in most of those cases.
[08:51:17] <Yurume> a generic constructor entry, i.e., of type `(~str, fn (...) -> ~VCS)`
[08:51:35] *** Joins: fyolnish (fyolnish@moz-4E5DCC58.uqwimax.jp)
[08:51:44] <Heather> dbaupp well... I like the way when I will have standard interface and will call it's methods  for different implementations
[08:51:58] <Heather> dbaupp then if I will want to add new implementation I will add new module
[08:52:03] <dbaupp> Heather: ok, then trait objects are fine :) (but it's not very idiomatic Rust)
[08:52:04] <Sharp> Heather: But you would.  The *only* difference is that you do less writing to define the abstraction.
[08:52:12] <Heather> dbaupp I will not edit all the places where it needs to be added
[08:52:18] *** Quits: HollyRain (HollyRain@moz-50A83091.dyn.user.ono.com) (Quit: bye, bye)
[08:52:19] <Sharp> Because the function headers don't have to be redefined each time
[08:53:38] <Heather> dbaupp by the way what's that: Assertion failed: (i >= FTy->getNumParams() || FTy->getParamType(i) == Args[i]->getType()) && "Calli ng a function with a bad signature!", file rust/src/llvm/lib/IR/Instructions.cp p, line 281
[08:53:51] <Heather> I break compiler ?
[08:54:46] <Heather> well it still compiles with it....
[08:58:45] <Heather> ah no
[08:58:50] <Heather> it doesn't comiles
[08:58:57] <dbaupp> Heather: search the rust issues
[08:59:27] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[09:00:07] <Heather> dbaupp can't find something like that
[09:00:15] <Yurume> Heather, I think something like this will work: http://codepad.org/rilPxmEw
[09:00:23] <Yurume> (not tested nor compiled)
[09:00:26] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[09:00:51] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[09:02:44] <Heather> Yurume ...
[09:03:08] <Sharp> Why do you want Rust to look like Java? :(
[09:03:14] <Yurume> uh... pardon?
[09:03:22] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[09:04:52] <Heather> dbaupp Yurume Sharp my try : https://github.com/Heather/Mirana/blob/master/src/Main.rs#L125
[09:05:06] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[09:07:08] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[09:07:19] <Heather> Yurume I think register idea is also valid
[09:07:43] <Yurume> ...and will fare better when more VCSes have been added.
[09:07:48] <Heather> but not sure
[09:08:06] <Yurume> ifV looks like a template metaprogramming in C++ ;)
[09:08:28] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[09:08:28] *** ChanServ sets mode: +ao dherman dherman
[09:08:41] <Yurume> (in C++, that is a valid approach, in Rust, we have much more tools at our disposal)
[09:08:42] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[09:08:53] <Sharp> Paging strcat, paging strcat
[09:09:41] *** Quits: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP) (Ping timeout)
[09:09:51] <Yurume> Heather, try writing a code that only targets one VCS first (say, git). you can always refactor later to get the extensibility.
[09:10:00] <dbaupp> Heather: you almost certainly don't need the `::<Git>`, Rust can work out the type from the use of `&Git`.
[09:10:09] <Heather> Yurume templates are cool ....
[09:10:35] *** Quits: nkoep (nik@moz-CC1EFD15.pool.mediaways.net) (Ping timeout)
[09:10:55] *** Joins: ozten (ozten@moz-BC0C74E2.range86-174.btcentralplus.com)
[09:11:03] <Heather> dbaupp well it not always detects type
[09:11:07] <Yurume> you wouldn't want to use something like boost::variant when you have enums at your disposal though
[09:11:28] * Sharp opines that you should use an enum and if you want you can leave an optional "out" as one of the enum variants for extensibility.
[09:11:42] <Sharp> Simplest solution.
[09:11:50] <dbaupp> Sharp: "out"?
[09:12:04] <dbaupp> Heather: it will in that situation. (if it doesn't then something is broken)
[09:12:04] <Yurume> OtherVCS(...) variant?
[09:12:06] <Heather> dbaupp I have same ::< > calls but not commented in Config.rs, there was errors if I try without it
[09:12:13] <Sharp> dbaupp: enum VCS { Git, Svn, Perforce, OtherVcs<T>(T) }
[09:12:13] <Sharp> Yeah
[09:12:25] <dbaupp> Sharp: trait object?
[09:12:30] <Sharp> Sure, why not?
[09:12:48] <Sharp> (I don't think it should be *necessary*, but hey)
[09:12:55] <Sharp> Point is, it needn't be invoked every time.
[09:13:10] <Yurume> Sharp, wait, would OtherVCS<T>(T) work?
[09:13:15] <dbaupp> Heather: I think that only this one is necessary: https://github.com/Heather/Mirana/blob/master/src/Config.rs#L65
[09:13:19] *** Joins: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP)
[09:13:24] <dbaupp> Heather: all the other ones can be inferred.
[09:13:25] <Yurume> (not nitpicking but I thought a trait was necessary)
[09:13:46] <dbaupp> Sharp: yeah, if you want arbitrary polymorphism like that, then a trait object is necessary.
[09:13:52] <Sharp> Yurume: It's possible, I haven't thought about it too carefully.
[09:13:59] <Heather> dbaupp let me try
[09:14:32] <Heather> dbaupp you're right, thanks
[09:14:36] <Sharp> Whether you use a trait object there or no, I think it's much more straightforward (and, in the general case, probably efficient).
[09:15:07] <Yurume> Sharp, how will you implement that (in the lower level) then?
[09:15:39] <Sharp> Write the same abstractions you would normally, just use a single function with a match instead of a bunch of impls of different traits
[09:15:45] <Yurume> for example, you would certainly want some methods (like `pull`) to work on T
[09:15:54] *** Quits: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP) (Ping timeout)
[09:15:56] <Sharp> Subtypes couldn't handle that?
[09:16:17] <Yurume> I meant you cannot put an arbitrary generic parameter to enum "variants"
[09:16:19] * Ms2ger read Subtubes
[09:16:27] <Yurume> as long as I know, please correct me if not
[09:16:28] <Sharp> e<T : GitMethods>
[09:16:30] <Sharp> Done
[09:16:39] <Sharp> Er, ignore the e
[09:16:53] <Sharp> I'm pretty sure you can do that while defining the variant
[09:16:56] <Yurume> enum VCS { Git, Svn, Perforce, OtherVcs<T:GitMethods>(T) } ?
[09:17:01] <dbaupp> that's essentially exactly what a trait object is...
[09:17:13] <Yurume> yeah..
[09:17:14] <Sharp> Except that trait objects get implemented as virtual functions
[09:17:18] <dbaupp> enum TraitObject { EraseTheType<T: Trait>(T) }
[09:17:24] <Heather> enum is fixsized thing
[09:17:38] <Heather> I mean it's just enum ....
[09:17:43] <dbaupp> ... this will have to be virtual as well, the compiler can't know exactly what T is at each point
[09:18:03] <Yurume> I understand Heather's concern, the extensible enum as said by Sharp does not work currently
[09:18:32] <Sharp> Yurume: To be honest, I think the idea that it needs to be extensible is suspect to begin with :P
[09:18:43] <Sharp> dbaupp: Oh?  I was under the impression that everything got monomorphized unless you explicitly referenced a trait object.
[09:18:45] <dbaupp> `foo() -> VCS { OtherVcs(Hg) } fn bar() -> VCS { OtherVcs(Cvs) }` then in  `if random() { foo() } else { bar() }` there's no way to tell whether the internal type is Hg or Cvs at run time
[09:18:48] <dbaupp> *compile time
[09:18:49] <Sharp> And you could compile time check.
[09:19:07] *** Joins: nkoep (nik@moz-CC1EFD15.pool.mediaways.net)
[09:19:20] *** Joins: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP)
[09:19:20] <dbaupp> (i.e. the compiler only sees `VCS`, even though the internals differ.)
[09:19:46] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Ping timeout)
[09:20:12] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[09:20:16] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[09:20:17] <Sharp> dbaupp: Hrm, maybe.
[09:20:39] <dbaupp> also, all the T's have to have the same size or VCS will differ
[09:21:17] <Sharp> More complex enum variants are boxed though, aren't they?  Or maybe that was your point :P
[09:21:22] <dbaupp> you could get around this by boxing them, i.e., OtherVcs<T: GitMethods>(~T), and then you essentially have a trait object
[09:21:25] <Yurume> Sharp, similar example being rust-encoding's Encoder/DecoderTrap ;)
[09:21:42] <dbaupp> no, nothing is boxed automatically. need an explicit pointer.
[09:21:51] <Yurume> it's now an enum due to some problems related to the genericity, but it was originally a trait
[09:22:06] *** Quits: skade (skade@30BBD5E6.505237C9.CAE22B62.IP) (Ping timeout)
[09:22:09] <Sharp> dbaupp: Then how do variant cases work at all?
[09:22:17] <Sharp> Even without subtypes you would think that would be problematic.
[09:22:29] <Heather> not sure if I still understand you already...
[09:22:32] <dbaupp> Sharp: "variant cases"?
[09:22:37] <Sharp> Er, matches.
[09:22:38] <Sharp> Patterns.
[09:22:52] <dbaupp> Sharp: oh, you mean like `enum FOo { Bar, Baz(int) }` having different sizes?
[09:22:59] <Sharp> Yeah.  I mean, they clearly do
[09:23:06] <Yurume> variant cases are just a plain switch on a discriminant value in the enum that is type-checked.
[09:23:07] <dbaupp> they're all padded to the largest variant
[09:23:12] <Sharp> Ah, okay
[09:23:21] <Sharp> Then in practice it's not really a problem without generics I guess
[09:23:38] <Sharp> Er, subtypes, rather
[09:25:13] <Sharp> Or, wait a second, dbaupp, can't you do something similar with C++ templates?  Or no?
[09:25:32] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[09:25:57] <Sharp> Or right, I guess pure interfaces are virtual.
[09:26:19] *** Joins: skade (skade@30BBD5E6.505237C9.CAE22B62.IP)
[09:26:53] <strcat> Sharp: enum is just like a C union with a tag
[09:27:13] <Sharp> strcat: So the different sizes issue isn't really an issue then.
[09:27:25] <strcat> Sharp: you mean something similar to enum with C++ templates? yes, in C++11
[09:27:31] <Heather> let vcs = ifV(".git", &Git).unwrap(); <- doesn't work :(
[09:27:57] <strcat> they added alignof, and you can write a variadic template finding the right align/size for arbitrary types (std::aligned_union does it for you) and then magic to do the type switch/tag
[09:28:13] <dbaupp> Heather: error about lifetimes?
[09:28:14] <strcat> PITA and not fun to use without pattern matching ;p
[09:28:26] <Heather> dbaupp no, c++ error
[09:28:31] <Sharp> strcat: Good, that's always been my biggest issue with unions in C
[09:28:34] <Sharp> They are so close to being useful :P
[09:28:42] *** Joins: nuts (tii@822A8E7E.6AD15BF5.75D3BBDB.IP)
[09:28:43] <dbaupp> strcat: just let the boost authors write the ugly stuff, right? :P
[09:28:51] *** mm^ is now known as [mm]
[09:28:55] <strcat> dbaupp: well, boost's version isn't how you'd write it in C++11
[09:28:59] <Heather> Assertion failed: (i >= FTy->getNumParams() || FTy->getParamType(i) == Args[i]->getType()) && "Calli ng a function with a bad signature!", file /llvm/lib/IR/Instructions.cp p, line 281
[09:29:01] <strcat> it used platform specific hacks
[09:29:14] <strcat> Heather: that's rust doing something bad and LLVM asserting
[09:29:17] <strcat> rustc*
[09:29:18] <Yurume> Heather, it's an LLVM assertion, meaning that rustc has broken some promises ;)
[09:29:27] <Sharp> strcat: IAnyway,  meant "similar to subtyped generics" since that's the part that apparently is equivalent to using trait objects
[09:29:32] <strcat> (or a broken LLVM pass... but much more likely rustc ;p)
[09:29:33] <Yurume> could you extract a code that causes that error?
[09:30:06] <Heather> Yurume easier to get whole project
[09:30:15] <dbaupp> https://github.com/mozilla/rust/search?q=%28i+%3E%3D+FTy-%3EgetNumParams%28%29+||+FTy-%3EgetParamType%28i%29+%3D%3D+Args[i]-%3EgetType%28%29&ref=cmdform&state=open&type=Issues
[09:30:20] <Yurume> okay, wait a min
[09:30:25] <dbaupp> https://github.com/mozilla/rust/issues/9719
[09:30:46] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[09:31:51] <Yurume> uugh, what rustc version do you use? a recent master? 0.8?
[09:32:13] <Yurume> (I have both rust-nightly-20131104 and rust-0.8 and both don't work)
[09:33:27] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[09:33:31] <Heather> Yurume today master
[09:33:55] *** Quits: skade (skade@30BBD5E6.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[09:33:57] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:33:59] <Yurume> it must have changed somehow this week, I don't have a master built
[09:34:33] <Heather> Yurume maybe some.... you can try https://github.com/Heather/streetwalker to build it >_<
[09:34:41] <Heather> okay... joking
[09:35:09] <Yurume> a-ha, so are you rewriting Haskell to Rust? :)
[09:35:33] <Sharp> rhc - the ultimate hipster compiler
[09:35:38] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:35:50] *** Joins: mrshankly (mrshankly@3EE34383.CE0EEBAE.806C54C8.IP)
[09:36:01] <Heather> Yurume it's haskell script to build rust
[09:36:10] <Sharp> Oh, sorry--I misread that as "rewriting Haskell in Rust"
[09:36:37] <Yurume> ah I misread the source, the similarity on the names made me mistaken
[09:37:15] <Heather> Yurume similarity?
[09:37:24] <Yurume> module names etc.
[09:37:59] <Yurume> ha, back to work
[09:42:01] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[09:42:32] *** Quits: KindOne (KindOne@moz-5DB05EFE.dynamic.ip.windstream.net) (Ping timeout)
[09:46:01] *** Joins: KindOne (KindOne@moz-77F4DC09.dynamic.ip.windstream.net)
[09:46:08] *** Quits: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[09:46:50] *** Quits: nuts (tii@822A8E7E.6AD15BF5.75D3BBDB.IP) (Connection reset by peer)
[09:49:25] *** Joins: skade (skade@30BBD5E6.505237C9.CAE22B62.IP)
[09:54:38] *** Quits: skade (skade@30BBD5E6.505237C9.CAE22B62.IP) (Quit: Textual IRC Client: www.textualapp.com)
[10:01:05] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Quit: Leaving...)
[10:03:47] *** Quits: jyasskin_w (jyasskin@DAF66858.C60FE7DC.4065847B.IP) (Ping timeout)
[10:07:48] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[10:08:00] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[10:10:24] *** Joins: andre (andre@CA528A4A.45A4338E.8EE27E6.IP)
[10:14:42] *** Joins: brendan (brendaneic@9E9221B0.60D98710.CE12DF22.IP)
[10:15:03] *** Joins: nuts (tii@822A8E7E.6AD15BF5.75D3BBDB.IP)
[10:17:22] *** Joins: fabiand (fabiand@moz-4319220B.adsl.alicedsl.de)
[10:19:05] *** Joins: jyasskin_w (jyasskin@5CA6DC39.C60FE7DC.4065847B.IP)
[10:22:12] <Heather> Yurume come join my broadcast o_O http://grooveshark.com/#!/cynede/broadcast
[10:22:33] *** Quits: brendan (brendaneic@9E9221B0.60D98710.CE12DF22.IP) (Quit: brendan)
[10:22:57] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[10:27:21] *** Joins: Sorella (quildreen@D2D1E5DD.81EFC25A.A95FAE2B.IP)
[10:28:05] *** Quits: moostik (Icedove@moz-3E868786.w90-2.abo.wanadoo.fr) (Ping timeout)
[10:29:42] *** Joins: moostik (Icedove@moz-3E868786.w90-2.abo.wanadoo.fr)
[10:32:21] *** Quits: fyolnish (fyolnish@moz-4E5DCC58.uqwimax.jp) (Client exited)
[10:34:30] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:34:44] *** kimundi is now known as zz_kimundi
[10:36:01] *** Quits: Sorella (quildreen@D2D1E5DD.81EFC25A.A95FAE2B.IP) (Ping timeout)
[10:36:12] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:36:14] *** Joins: Sorella (quildreen@2392D500.600E39D3.1ED99692.IP)
[10:40:25] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Ping timeout)
[10:45:05] *** Joins: fyolnish (fyolnish@moz-DBFD1229.tokyo.ocn.ne.jp)
[10:48:05] *** Quits: Sorella (quildreen@2392D500.600E39D3.1ED99692.IP) (Ping timeout)
[10:50:45] *** Joins: sweet_kid (Upasana@4E8A8432.CFA042E.1228A288.IP)
[10:52:00] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[10:52:28] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:53:50] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[10:59:21] *** Quits: pauls (pauls@moz-7140CF01.ccs.neu.edu) (Ping timeout)
[10:59:31] *** Quits: arodier74 (Thunderbir@moz-25EB015.in-addr.btopenworld.com) (Quit: arodier74)
[11:00:41] *** Quits: sweet_kid (Upasana@4E8A8432.CFA042E.1228A288.IP) (Quit: Leaving)
[11:04:08] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[11:05:12] *** Joins: Sorella (quildreen@2392D500.600E39D3.1ED99692.IP)
[11:06:37] *** Joins: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP)
[11:10:30] *** Joins: z0w0 (zack@moz-238C2341.lnse3.cha.bigpond.net.au)
[11:10:32] *** zz_kimundi is now known as kimundi
[11:15:12] <dbaupp> kimundi: fwiw, I don't think it's helpful to say "Don't worry, our pointers _are_ more confusing compared to many other languages after all" to a beginner
[11:15:56] <dbaupp> kimundi: the different pointer types are just making the ownership relationship of pointers explicit, rather than implicit like in (essentially) every other mainstream language.
[11:18:43] <dbaupp> kimundi: (and in particular, saying it to a beginner runs the risk of discouraging them, even though the fundamental concepts are very simple "does this pointer own its data? yes == ~, no == &.")
[11:18:59] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[11:19:15] *** Quits: Ms2ger (Ms2ger@57ACE628.C60A97A6.F9FB0584.IP) (Ping timeout)
[11:20:19] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[11:22:22] *** Joins: Palmik (palmik@moz-DEC2AB.pks.muni.cz)
[11:23:07] *** pmoore is now known as pmoore|lunch
[11:34:57] *** Quits: nkoep (nik@moz-CC1EFD15.pool.mediaways.net) (Client exited)
[11:35:18] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:36:30] *** Joins: Ms2ger (Ms2ger@57ACE628.C60A97A6.F9FB0584.IP)
[11:37:01] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:39:44] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131028225529])
[11:39:47] *** Quits: Ms2ger (Ms2ger@57ACE628.C60A97A6.F9FB0584.IP) (Ping timeout)
[11:43:17] *** Quits: z0w0 (zack@moz-238C2341.lnse3.cha.bigpond.net.au) (Quit: z0w0)
[11:53:02] *** Quits: victorporof (victorporo@9B024C76.73B1E539.9B1E38F4.IP) (Quit: victorporof)
[11:54:46] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[11:54:46] *** Quits: fyolnish (fyolnish@moz-DBFD1229.tokyo.ocn.ne.jp) (Client exited)
[12:04:38] *** Joins: Daniel_S (Daniel_S@moz-5B58D8B7.dhcp.snlo.ca.charter.com)
[12:07:26] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[12:08:24] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[12:08:29] <KokaKiwi> Hi, is there a way to get crate version in Rust code? (For example, to put it for "--version" argument)
[12:08:59] *** Parts: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) ()
[12:10:07] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[12:10:12] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[12:11:38] *** Quits: sigma (sigma@moz-654650A0.range86-160.btcentralplus.com) (Client exited)
[12:12:28] *** Joins: mark_edward (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[12:13:37] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[12:13:41] *** Joins: sigma (sigma@moz-654650A0.range86-160.btcentralplus.com)
[12:15:28] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[12:16:18] *** Quits: sigma (sigma@moz-654650A0.range86-160.btcentralplus.com) (Client exited)
[12:16:30] *** Joins: sigma (sigma@moz-654650A0.range86-160.btcentralplus.com)
[12:17:23] *** Quits: sigma (sigma@moz-654650A0.range86-160.btcentralplus.com) (Client exited)
[12:18:24] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[12:19:47] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[12:20:10] *** Joins: sigma (sigma@moz-654650A0.range86-160.btcentralplus.com)
[12:20:30] *** Joins: Blub\w (wry@moz-32B459F5.wireless.dyn.drei.com)
[12:23:31] *** Joins: refold (gman@moz-42D68426.a258.priv.bahnhof.se)
[12:25:51] *** Joins: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net)
[12:28:07] <ChrisMorgan> KokaKiwi: it'll be stored in the metadata, but there may well not be a convenient way of handling it yet.
[12:28:20] *** Quits: sigma (sigma@moz-654650A0.range86-160.btcentralplus.com) (Client exited)
[12:28:57] <KokaKiwi> ChrisMorgan: Oh :( It could be great if there was a way to accessing crate metadat from a Rust :o
[12:29:04] <KokaKiwi> metadata*
[12:29:22] <ChrisMorgan> I can't say with any degree of certainty whatsoever that there isn't such a way.
[12:29:40] <ChrisMorgan> There must be a way of doing it in rustc, clearly.
[12:30:15] *** Quits: andre (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[12:30:29] *** Joins: sigma (sigma@moz-654650A0.range86-160.btcentralplus.com)
[12:31:29] *** Quits: Daniel_S (Daniel_S@moz-5B58D8B7.dhcp.snlo.ca.charter.com) (Quit: Leaving)
[12:32:06] *** Joins: victorporof (victorporo@7CC1F655.26884B2C.79933D60.IP)
[12:32:21] *** Joins: andre (andre@CA528A4A.45A4338E.8EE27E6.IP)
[12:33:34] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[12:34:11] *** Quits: sigma (sigma@moz-654650A0.range86-160.btcentralplus.com) (Client exited)
[12:34:37] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[12:36:06] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:36:14] *** Quits: elij (elij@E6C4342E.9D386EAF.AF7F4FE0.IP) (Ping timeout)
[12:36:17] *** Joins: sigma (sigma@moz-654650A0.range86-160.btcentralplus.com)
[12:36:50] *** Quits: jyasskin_w (jyasskin@5CA6DC39.C60FE7DC.4065847B.IP) (Ping timeout)
[12:37:03] *** Joins: elij (elij@E6C4342E.9D386EAF.AF7F4FE0.IP)
[12:37:25] *** Joins: jyasskin_w (jyasskin@DAF66858.C60FE7DC.4065847B.IP)
[12:37:51] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:39:27] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[12:39:56] *** Quits: sigma (sigma@moz-654650A0.range86-160.btcentralplus.com) (Client exited)
[12:40:13] *** jorendorff_away is now known as jorendorff
[12:41:11] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[12:41:57] *** Joins: sigma (sigma@moz-654650A0.range86-160.btcentralplus.com)
[12:42:17] *** Quits: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP) (Quit: Leaving.)
[12:42:43] *** Quits: sigma (sigma@moz-654650A0.range86-160.btcentralplus.com) (Client exited)
[12:44:40] *** Joins: sigma (sigma@moz-654650A0.range86-160.btcentralplus.com)
[12:46:17] *** pmoore|lunch is now known as pmoore
[12:47:16] *** Joins: Jackneill (Jackneill@moz-EFBCBB8F.pool.digikabel.hu)
[12:51:42] *** Quits: Blub\w (wry@moz-32B459F5.wireless.dyn.drei.com) (Ping timeout)
[12:54:46] *** Quits: nuts (tii@822A8E7E.6AD15BF5.75D3BBDB.IP) (Ping timeout)
[12:56:02] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[12:56:07] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[12:56:41] *** Joins: vertexclique (vertexcliq@D3C60FC5.BF7DD56B.1826D296.IP)
[12:58:11] *** kimundi is now known as zz_kimundi
[12:59:07] *** Joins: nuts (tii@822A8E7E.6AD15BF5.75D3BBDB.IP)
[13:00:00] *** Joins: pauls (pauls@moz-7140CF01.ccs.neu.edu)
[13:03:51] *** Joins: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP)
[13:05:27] *** Joins: fyolnish (fyolnish@moz-58AD84EC.uqwimax.jp)
[13:05:56] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[13:06:09] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:07:49] *** Joins: Blub\w (wry@moz-31D4003E.wireless.dyn.drei.com)
[13:08:06] *** Quits: fyolnish (fyolnish@moz-58AD84EC.uqwimax.jp) (Ping timeout)
[13:11:51] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[13:11:54] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:15:15] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[13:16:55] *** Joins: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net)
[13:25:04] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[13:26:57] <mletterle> Morning oh rusty ones.
[13:29:02] *** Quits: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net) (Ping timeout)
[13:29:21] *** Joins: squiddy (squiddy@moz-727698D.adsl.alicedsl.de)
[13:32:26] *** Joins: idog98 (idog98@moz-FF0B8E6D.ipredator.se)
[13:32:50] *** Joins: Ms2ger (Ms2ger@moz-8600299A.ugent.be)
[13:34:17] *** Quits: Blub\w (wry@moz-31D4003E.wireless.dyn.drei.com) (Quit: back in a few hours)
[13:35:16] *** Joins: SiegeLord (sl@moz-1DF56822.twcny.res.rr.com)
[13:37:09] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[13:38:50] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[13:39:56] *** Quits: idog98 (idog98@moz-FF0B8E6D.ipredator.se) (Connection reset by peer)
[13:40:15] *** Joins: idog98 (idog98@moz-3ECBAB41.dfri.se)
[13:40:25] *** Joins: z0w0 (zack@moz-238C2341.lnse3.cha.bigpond.net.au)
[13:40:34] *** zz_kimundi is now known as kimundi
[13:42:04] *** jorendorff is now known as jorendorff_away
[13:42:41] <kimundi> dbaupp: Oh, yeah I guess you are right. Sorry, that email answer has been written in a hurry with the sole intent to be friendly :(
[13:43:46] *** Joins: axitkhurana (Adium@F38FE5DE.29C63407.A26A30FD.IP)
[13:46:37] *** Joins: askalski (akuda@moz-137D1D7A.mimuw.edu.pl)
[13:47:41] <kimundi> dbaupp: To be fair, our pointers _are_ more confusing than the pointers in other languages because we have multiple of them, and because you explicitly need to learn and know about ownership semantics to start using them, even though the end result is that working with them gets easier once you learned all that.
[13:48:57] <sigma> I find c++ pointers confusing because I'm never exactly sure what I'm safely allowed to do with them, though I've only been using it at work for a couple of months now
[13:49:21] <kimundi> I guess I should've worded the email something like "confusing and complex at first, but so much easier to use afterwards"
[13:49:44] *** Joins: AngryLawyer (Mibbit@moz-BB2126F4.range109-157.btcentralplus.com)
[13:50:14] *** Quits: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com) (Ping timeout)
[13:50:15] *** Joins: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP)
[13:50:29] <AngryLawyer> Anybody know anything about the recent Enum size changes? Need a spot of advice.
[13:50:38] <dbaupp> kimundi: yeah, that sounds better
[13:50:40] <kimundi> sigma: Yeah, I'd say there are different layers of understanding involved here. If you're at the "what is a pointer?" phase then C is easier than Rust. Once you are at the "How do I use a pointer correctly" phase that swaps though ;)
[13:50:46] <dbaupp> AngryLawyer: I know bits and pieces
[13:50:52] <AngryLawyer> Cool
[13:51:35] <AngryLawyer> So, my library calls a C interface. It passes enums into it for ease of understandability. However, since the Enum shrinking thing, I now get the following warning
[13:51:39] <AngryLawyer> "warning: found enum type without foreign-function-safe representation annotation in foreign module"
[13:51:55] <AngryLawyer> I can't find any information about what annotation I'm supposed to be providing, and where
[13:52:03] <dbaupp> #[repr(C)] enum Foo { Bar = 1, Baz = 2 }
[13:52:09] *** Quits: askalski (akuda@moz-137D1D7A.mimuw.edu.pl) (Quit: Wychodzi)
[13:52:47] <kimundi> AngryLawyer: You can now explicitly choose how the enum discriminant should be represented. For C interop you probably want to put a #[repr(C)] or #[repr(uint)] on the enum definition to choose the size
[13:52:59] <dbaupp> AngryLawyer: (assuming it's an enum on the C side... #[repr(u32)] #[repr(u64)] etc. work too)
[13:53:14] <AngryLawyer> Ah hah
[13:53:34] <AngryLawyer> So, that goes on the definition of the Enum, rather than the function?
[13:53:38] <dbaupp> yes
[13:53:45] <AngryLawyer> You are a star, thank you both
[13:53:49] * dbaupp wonders if jld documented this anywhere...
[13:53:52] <SiegeLord> I wonder how it determines repr(C)...
[13:54:21] <dbaupp> SiegeLord: black magic
[13:54:36] <dbaupp> (#[repr] appears to be undocumented :/ )
[13:55:20] <kimundi> We really need a central system for attributes and documenting them
[13:55:33] *** Quits: Ms2ger (Ms2ger@moz-8600299A.ugent.be) (Ping timeout)
[13:55:46] * kimundi wonders if you can put an attribute on an attribute
[13:55:54] <dbaupp> SiegeLord: https://github.com/mozilla/rust/blob/master/src/librustc/middle/trans/adt.rs#L315-L323
[13:55:55] <dbaupp> kimundi: no
[13:56:47] <SiegeLord> I like the warning, that's exactly what I was thinking of
[13:56:49] <dbaupp> kimundi: there's https://github.com/mozilla/rust/issues/6444 and https://github.com/mozilla/rust/wiki/Note-defined-attributes
[13:56:58] *** Joins: jdm (jdm@moz-36808BF3.dsl.teksavvy.com)
[13:56:58] *** ChanServ sets mode: +o jdm
[13:57:24] <SiegeLord> The manual is somewhat incomplete... hopefully it'll get some attention before 1.0 release
[13:57:42] <SiegeLord> I'd expect all those things to be present there
[13:58:02] *** Joins: canhtak (canhtak@moz-44AEB22E.wl.t.ulaval.ca)
[13:59:44] <kimundi> dbaupp: Re that Ascii comment from me: I realize that half the stuff I talked about there is not something you actually touched in that PR, I just noticed the issue there
[14:00:11] <dbaupp> kimundi: ... you could've been clearer about that :P
[14:00:20] <kimundi> dbaupp: Sorry :(
[14:00:45] <kimundi> dbaupp: I seem to be especially bad at communicating today :|
[14:00:46] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[14:00:51] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[14:01:06] <dbaupp> kimundi: heh :)
[14:01:58] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[14:02:32] <kimundi> dbaupp: Anyway, my point is basically that .to_str() and .into_str() should work the same, and only differ in taking &self and self
[14:03:10] <kimundi> Which apparently is not the case for a &[Ascii] as of right now
[14:07:00] *** Quits: axitkhurana (Adium@F38FE5DE.29C63407.A26A30FD.IP) (Quit: Leaving.)
[14:07:32] <sam113101> what does rust use libuv for?
[14:07:40] <kimundi> io and sheduling
[14:08:00] <sam113101> can I use it at runtime?
[14:08:05] <kimundi> IT's the reference implementation of the event loop
[14:08:14] <kimundi> No idea ;)
[14:08:44] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[14:08:48] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[14:08:54] <klutzy> you already use uv when you write `fn main() {}`
[14:09:54] <dbaupp> sam113101: all io goes through libuv (when using the vanilla standard library)
[14:10:18] <dbaupp> kimundi: yeah, I understand, it is a bit peculiar, but whatever :P
[14:11:05] *** Joins: Ms2ger (Ms2ger@moz-954192F2.ugent.be)
[14:12:29] <dbaupp> kimundi: maybe we need to do what haskell does and have a method on ToStr that's `fn to_str_vec(v: &[Self]) -> ~str { ... }`, with a default implementation that gives the "[elem, elem, elem]" syntax, and the ToStr impl for &'self [A] just calls A's impl of ToStr.to_str_vec
[14:12:55] <dbaupp> kimundi: not that we should be encouraging the use of to_str, though.
[14:13:52] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[14:13:59] <kimundi> dbaupp: Hu... That's interesting, but I'm not sure if it's really worth it if the proper fix (str_ascii) would fix it with what we have today
[14:14:29] <kimundi> dbaupp: Yeah, my arguments about ToStr are pretty much interchangeably with fmt::Default though ;)
[14:14:44] <sp3d> when would you ever want the "[elem, elem, elem]" syntax? I don't know of anything which takes that as input
[14:14:54] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Ping timeout)
[14:15:26] <SiegeLord> I use it to pass optional arguments to my functions
[14:15:32] <kimundi> dbaupp: Anyway, I think your Ascii patch is fine, but I'll add a final summarizing what I actually meant under it. :)
[14:15:52] <sp3d> SiegeLord: can you explain?
[14:15:52] <kimundi> sp3d: It's about human readable output of an array
[14:15:54] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[14:16:19] *** Joins: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP)
[14:16:25] <SiegeLord> Oh, is this output format? nvm then
[14:18:18] *** Joins: axitkhurana (Adium@F38FE5DE.29C63407.A26A30FD.IP)
[14:18:50] *** Joins: brendan (brendaneic@5FC4E4D8.4EE99619.E46D6E17.IP)
[14:20:40] *** Joins: jvshahid (jvshahid@moz-C1BC0CE4.nyc.res.rr.com)
[14:21:23] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[14:21:23] *** ChanServ sets mode: +ao dherman dherman
[14:23:23] *** Quits: brendan (brendaneic@5FC4E4D8.4EE99619.E46D6E17.IP) (Quit: brendan)
[14:24:47] *** Quits: victorporof (victorporo@7CC1F655.26884B2C.79933D60.IP) (Quit: victorporof)
[14:25:38] *** jorendorff_away is now known as jorendorff
[14:27:09] *** Joins: brendan (brendaneic@5FC4E4D8.4EE99619.E46D6E17.IP)
[14:27:33] *** Quits: brendan (brendaneic@5FC4E4D8.4EE99619.E46D6E17.IP) (Quit: brendan)
[14:32:14] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[14:35:07] *** Quits: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net) (Client exited)
[14:36:36] *** Quits: vertexclique (vertexcliq@D3C60FC5.BF7DD56B.1826D296.IP) (Client exited)
[14:36:38] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[14:36:46] *** Quits: pyrac (pyrac@moz-8A554332.math.u-bordeaux1.fr) (Ping timeout)
[14:36:57] *** Joins: vertexclique (vertexcliq@D3C60FC5.BF7DD56B.1826D296.IP)
[14:37:42] *** Parts: idog98 (idog98@moz-3ECBAB41.dfri.se) ()
[14:38:23] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:40:07] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:41:31] *** Joins: brendan (brendaneic@355BB431.4EA043EC.B62AF9C3.IP)
[14:41:39] *** Quits: axitkhurana (Adium@F38FE5DE.29C63407.A26A30FD.IP) (Quit: Leaving.)
[14:41:57] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[14:42:47] *** Quits: z0w0 (zack@moz-238C2341.lnse3.cha.bigpond.net.au) (Client exited)
[14:43:03] *** Quits: vertexclique (vertexcliq@D3C60FC5.BF7DD56B.1826D296.IP) (Ping timeout)
[14:44:02] *** Joins: ahal (ahal@FCCEA34F.7672369.D8E68FF6.IP)
[14:47:22] *** Joins: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net)
[14:48:43] *** Quits: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net) (Quit: kellogh)
[14:48:44] *** Joins: tautologico (lymph@703660AA.CFE755C8.C27E1635.IP)
[14:51:52] <nmatsakis> ChrisMorgan: re-ping
[14:52:07] <ChrisMorgan> nmatsakis: ah, good, you just caught me :-)
[14:54:15] <nmatsakis> ChrisMorgan: so how far along is your branch, not complete, right?
[14:54:32] <nmatsakis> ChrisMorgan: apart from some DRY violations, the code that I've read so far looks pretty good
[14:54:44] <nmatsakis> ChrisMorgan: but I realized I feel like I haven't seen the *meat*, so I have to go re-read
[14:55:02] <nmatsakis> ChrisMorgan: I'm excited to see progress on this 
[14:55:03] <ChrisMorgan> What's there is there. I've done the library parts, but as far as the compiler parts are concerned I was working in the dark and so I'm not surprised that it doesn't work.
[14:55:42] <nmatsakis> :)
[14:55:53] <nmatsakis> ChrisMorgan: did you want some advice on next steps?
[14:55:57] <ChrisMorgan> I'm not sure if more is needed, but I believe that it's basically desugaring to a method call and thus the diff on the actual compilation code is comparatively small.
[14:56:03] *** Quits: rfw (rfw@moz-7D453A5B.rfw.name) (Ping timeout)
[14:56:13] <nmatsakis> ChrisMorgan: does it run? I haven't tried building it yet
[14:56:17] *** Joins: fyolnish (fyolnish@moz-58AD84EC.uqwimax.jp)
[14:56:50] <ChrisMorgan> I put some notes in https://github.com/mozilla/rust/issues/5992#issuecomment-22258296 on the functional state of it.
[14:57:04] *** Quits: Ms2ger (Ms2ger@moz-954192F2.ugent.be) (Ping timeout)
[14:57:09] <nmatsakis> ChrisMorgan: ok
[14:57:13] <ChrisMorgan> The fact that I haven't "learned" LLVM will, of course, contribute to its not working.
[14:57:25] *** Quits: brendan (brendaneic@355BB431.4EA043EC.B62AF9C3.IP) (Quit: brendan)
[14:57:38] *** Joins: rfw (rfw@moz-7D453A5B.rfw.name)
[14:58:01] *** Quits: fyolnish (fyolnish@moz-58AD84EC.uqwimax.jp) (Ping timeout)
[14:58:07] <ChrisMorgan> Re. advice on next step: yes, please; or if you decide it'll be easier for you to finish it off than to give advice I'd be just as happy with that, I can then check out precisely what was done to finish it off.
[14:58:16] <nmatsakis> ChrisMorgan: ok let me clone your branch and try building it, that's easiest thing to do
[14:58:29] <nmatsakis> I wonder if Add and AddAssign should just be the same trait
[14:58:35] <nmatsakis> by which I mean: two methods of the same trit
[14:58:37] <nmatsakis> *trait
[14:58:37] *** Joins: vertexclique (vertexcliq@D3C60FC5.BF7DD56B.1826D296.IP)
[14:58:49] <nmatsakis> perhaps even defined with respect to one another; you must overload one of them, but whichever is fine :)
[14:58:50] <ChrisMorgan> Hmm, could be, I guess, now that we've got default methods.
[14:59:02] <nmatsakis> though I don't know if you can do that without requiring Clone
[14:59:07] <nmatsakis> I imagine not
[14:59:12] <ChrisMorgan> True, I forgot that :-(
[14:59:24] <nmatsakis> not sure htat's a showstopper
[14:59:33] <nmatsakis> arguably anything addable ought to be cloneable
[14:59:37] <nmatsakis> or let me put it another way,
[14:59:38] <ChrisMorgan> Yes, we really need default-method-with-type-constraints :-(
[14:59:43] <sp3d> maybe += and Zero would suffice
[14:59:47] <nmatsakis> if AddAssign requires Add,
[15:00:00] <ChrisMorgan> AddAssign requiring Add is dubious, actually.
[15:00:06] <nmatsakis> then it effectively requires clone
[15:00:13] <nmatsakis> I guess I'd rather they be independent
[15:00:14] <nmatsakis> or truly linked
[15:00:27] <nmatsakis> I don't know that I care much about having a default implt
[15:00:32] <nmatsakis> overloading operators is not that common
[15:01:08] <nmatsakis> well, it's a minor detail in any case
[15:01:09] *** Joins: brendan (brendaneic@355BB431.4EA043EC.B62AF9C3.IP)
[15:01:15] *** Joins: cubic (cubic@moz-80241A3A.mc.videotron.ca)
[15:01:27] *** Joins: Ms2ger (Ms2ger@moz-954192F2.ugent.be)
[15:01:52] <nmatsakis> I was also thinking (only semi-related) that we should maybe expand the set of operators. I see Python is adding "matrix operators", for example
[15:02:05] <nmatsakis> this would be a middle ground between the smalltalk/scala/haskell approach of "you can use anything"
[15:02:24] <ChrisMorgan> Matrix operators?
[15:02:32] <sp3d> is there any documentation on how to write a "lib.rs"?
[15:02:35] <nmatsakis> yes, they're adding variants on + .. I think they chose ~+
[15:02:45] <nmatsakis> to distinguish adding matrix to matrix from adding matrix to scalar
[15:02:46] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[15:02:46] <nmatsakis> etc
[15:02:58] <bstrie> nmatsakis: haha, python is actually adding those? I thought guido said a long time ago that was never going to happen :P
[15:03:01] <nmatsakis> sp3d: I'm not sure, if it's not in the rustpkg tutorial...?
[15:03:20] <nmatsakis> bstrie: actually I don't know, now that I think about it, I saw a PIP and some similar suggestions on es-discuss (JS mailing list), but I'm not sure the PIP was approved :)
[15:03:43] * ChrisMorgan is getting flashbacks of Matlab's operator situation for matricies and cringing slightly
[15:04:01] <sp3d> it only describes one w/ #[license], #[desc], and a single pub fn
[15:04:03] <nmatsakis> in any case Julia / R have similar things...
[15:04:08] *** Joins: feduser (feduser@B51E0A6C.AAE9A62C.650F25DA.IP)
[15:04:55] <nmatsakis> er, not pip, pep
[15:05:09] <nmatsakis> I guess the status is merely "deferred": http://www.python.org/dev/peps/pep-0225/
[15:05:10] <Ms2ger> ChrisMorgan, well, matlab :)
[15:05:25] <nmatsakis> for 13 years :)
[15:05:38] <bstrie> any day now
[15:05:40] <nmatsakis> bstrie: nm, I think you are correct, never gonna happen then
[15:05:52] * nmatsakis shrugs
[15:05:59] <ChrisMorgan> Whew.
[15:06:29] <nmatsakis> in any case, adding matrices to scalars/matrices is the only major use case I've encountered for supporting true multiparam type classes :)
[15:06:47] * ChrisMorgan hates Matlab's type system with a vehemence he cannot think of a parallel to at present
[15:06:51] <nmatsakis> meaning allowing you to do things like: impl Add<Scalar,Matrix> for Matrix and also impl Add<Matrix,Matrix> for Matrix
[15:06:59] <Ms2ger> ChrisMorgan, it has a type system?
[15:07:06] <nmatsakis> so I was wondering if we could simplify our lives by avoiding that need (for now anyway)
[15:07:17] <ChrisMorgan> Ms2ger: almost as much as Perl
[15:07:21] <Ms2ger> Heh
[15:07:30] <Ms2ger> That says enough :)
[15:07:58] *** Quits: vertexclique (vertexcliq@D3C60FC5.BF7DD56B.1826D296.IP) (Client exited)
[15:08:01] <kimundi> sp3d: Don't add any attribute, compile, and then add the attributes it warns about I'd say :)
[15:08:19] *** Joins: vertexclique (vertexcliq@D3C60FC5.BF7DD56B.1826D296.IP)
[15:08:30] <sp3d> kimundi: I'm just trying to get 'extern mod' stuff right
[15:08:47] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[15:08:48] *** ChanServ sets mode: +ao dherman dherman
[15:08:52] * ChrisMorgan is looking forward to having things like EnumSet implementing BitOrAssign and BitAndAssign so you can have foo |= FLAG, foo &= FLAGS, then EnumSet will be truly complete and able to replace integer flags and C's days will be numbered
[15:09:03] <sp3d> ultimately I might not end up using rustpkg as it seems more intended for projects which have their own repos
[15:09:10] <nmatsakis> ChrisMorgan: that's all it takes
[15:09:40] <sp3d> (I'm just working on binding generation)
[15:10:00] * ChrisMorgan hates dealing with libraries with lots of flags all over the place where they're all integers, like the Java OpenGL bindings he had to use a few weeks ago
[15:10:10] *** Quits: vertexclique (vertexcliq@D3C60FC5.BF7DD56B.1826D296.IP) (Ping timeout)
[15:10:49] <SiegeLord> I wonder how well it can possibly work... as you won't be able to do foo |= (FLAG1 & FLAG2)
[15:11:01] <ChrisMorgan> What do you mean, you won't?
[15:11:13] <SiegeLord> Well, what is FLAG1?
[15:11:24] <kimundi> nmatsakis: I think there are more use cases for multiparam type classes than that.
[15:11:35] <ChrisMorgan> Assuming FLAG1 and FLAG2 to be disjoint, that would not make sense (did you mean | instead of &?), but it's quite feasible.
[15:11:37] <nmatsakis> kimundi: not saying there aren't more, jsut the only one I've run into personally
[15:11:45] <Ms2ger> kimundi, make him encounter more of them ;)
[15:11:48] <SiegeLord> A global static? Can't initialize it safely... an enum variant? Can't overload &
[15:11:52] <SiegeLord> Yeah, I meant |
[15:12:29] <nmatsakis> kimundi: there are others described in the SPJ/MJ paper, for example  :)
[15:12:45] <ChrisMorgan> OK, so global statics might be a problem. That means we need improvements in that realm so that we *can* do this.
[15:12:58] <SiegeLord> Needs CTFE
[15:13:17] <Ms2ger> Sounds like ChrisMorgan is going to implement ctfe!
[15:13:30] <SiegeLord> What I ended up doing is making a macro that created a fresh type in a module, which can be initialized safely
[15:13:39] <ChrisMorgan> Ms2ger: what, don't you want rust-http to be finished?
[15:13:40] *** Joins: mib_p7ghk5 (Mibbit@moz-E5BB1D56.bloomberg.com)
[15:13:46] <Ms2ger> ChrisMorgan, eh ;)
[15:14:02] *** Quits: brendan (brendaneic@355BB431.4EA043EC.B62AF9C3.IP) (Quit: brendan)
[15:14:10] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[15:14:39] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[15:14:51] <kimundi> nmatsakis: I think it's useful in general for situations where you want to define N to M conversions, like numeric casting or converting one encoding into another without going through an [u8] in between. AT least that are the cases I remember where I wanted them. :)
[15:15:31] <sp3d> is there a way to explain to rustc about crates having files whose filenames contain dashes?
[15:15:56] <ChrisMorgan> SiegeLord: I guess for the moment we'd need to make it a literal of some sort instead of using the friendly FOO | BAR definition for constants.
[15:16:03] <kimundi> sp3d: #[path = "src/foo-bar/bar-foo----.rs"] mod foo;
[15:16:12] <sp3d> cool!
[15:16:27] <ChrisMorgan> But should you use such a thing? Probably not.
[15:16:37] <kimundi> sp3d: Of course, the recommended way is to not have such files :)
[15:16:58] <sp3d> yeah, but in general it's nice that inferred filenames are not the only option
[15:17:12] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[15:17:31] <SiegeLord> ChrisMorgan, Maybe this syntax might work foo &= [FLAG1, FLAG2]
[15:17:43] <nmatsakis> kimundi: makthat makes sense
[15:17:51] <SiegeLord> Although I'm not 100% sure foo &= FLAG is even possible... not sure
[15:18:05] <ChrisMorgan> SiegeLord: that's what's being implemented in augmented-assignment.
[15:18:06] <kimundi> sp3d: Yeah, you have free control over how to structure the files, if you diverge from the recommended way you just have to specify it all manually in path attributes
[15:18:06] <SiegeLord> Sorry, just & not &=
[15:18:13] <ChrisMorgan> Sure, that's BitOr.
[15:18:17] <sp3d> seems reasonable :)
[15:18:19] <ChrisMorgan> s/BitOr/BitAnd/
[15:18:35] <SiegeLord> Does BitOr have disjoint argument type and return type?
[15:18:39] <ChrisMorgan> Yes.
[15:18:43] <SiegeLord> Should be ok then
[15:19:00] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[15:19:08] <ChrisMorgan> pub trait BitAnd<RHS, Result>
[15:21:04] *** Joins: kvark (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com)
[15:21:22] <SiegeLord> Oh, also... I like doing foo(FLAG1 | FLAG2)
[15:21:29] <SiegeLord> So that really screams for statics
[15:22:21] <kvark> How do I provide binary attachments for Rust issues?
[15:22:48] *** Joins: ianj (ianjneu@moz-7140CF01.ccs.neu.edu)
[15:23:04] <ChrisMorgan> kvark: I don't think GitHub lets you do that.
[15:23:21] <ChrisMorgan> The closest you'll get to it is putting it in a Gist, probably.
[15:23:52] <kvark> does gist support binaries?
[15:24:25] <ChrisMorgan> Well, they're Git repositories, so they should.
[15:25:06] *** Parts: _vincent (vincent@1D262228.CB8B31D8.A0197E77.IP) (WeeChat 0.3.8)
[15:25:17] <ChrisMorgan> Perhaps not exactly what you would call easy, though.
[15:25:48] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[15:26:23] *** Joins: pyrac (pyrac@moz-8356B7F.w90-5.abo.wanadoo.fr)
[15:27:13] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[15:27:14] <sp3d> is there a way to see what types a compiled library crate exports?
[15:27:36] <kvark> I don't see how gist interface allows binaries... there is only a text field to paste to
[15:28:12] <ChrisMorgan> kvark: you'd need to clone the Git repository it creates and add the binary that way.
[15:28:42] <kvark> oh I see
[15:28:47] *** Joins: sweet_kid (Upasana@4E8A8432.CFA042E.1228A288.IP)
[15:30:43] <kvark> thanks ChrisMorgan
[15:30:47] <sp3d> I guess running rustdoc should work...
[15:31:04] <ChrisMorgan> Does it operate on a compiled binary, or only on source code?
[15:31:49] <sp3d> source I suppose, but I'm just trying to see what effect the source has so it should agree fine with the binary
[15:32:14] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Ping timeout)
[15:32:14] *** pmoore is now known as pmoore|back-at-1830-cet
[15:33:12] *** Joins: maxiepoo (Max@moz-13F4F196.nuwlan.northwestern.edu)
[15:36:02] *** Quits: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[15:36:18] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[15:37:03] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[15:37:09] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[15:37:29] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[15:38:03] *** Joins: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net)
[15:38:56] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:39:49] *** Quits: Kxepal832 (Miranda@moz-37B13CF.pppoe.mtu-net.ru) (Ping timeout)
[15:40:20] *** Quits: nfroidure (nfroidure@moz-186EBCA3.w90-18.abo.wanadoo.fr) (Quit: Ex-Chat)
[15:40:45] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[15:41:36] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[15:41:57] *** Joins: mohawk (Mibbit@moz-25CAE55E.zoral.com.ua)
[15:42:02] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[15:42:47] *** Quits: mohawk (Mibbit@moz-25CAE55E.zoral.com.ua) (Quit: http://www.mibbit.com ajax IRC Client)
[15:43:08] *** Joins: Kxepal (Miranda@moz-95B10DEC.pppoe.mtu-net.ru)
[15:47:54] <sp3d> hmm, what am I missing in re-exporting this type? http://pastebin.com/S0gEx4GW
[15:49:23] *** Quits: kvark (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com) (Quit: http://www.mibbit.com ajax IRC Client)
[15:50:34] *** Quits: decoder (quassel@moz-D7023D7D.own-hero.net) (Quit: No Ping reply in 180 seconds.)
[15:50:54] *** Joins: decoder (quassel@moz-D7023D7D.own-hero.net)
[15:51:50] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[15:51:50] *** ChanServ sets mode: +ao dherman dherman
[15:52:43] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Ping timeout)
[15:54:02] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[15:54:45] <ChrisMorgan> nmatsakis: I'm off to bed now, I'll collect any comments you have to make tomorrow.
[15:55:06] <Boreeas> Did the documentation for std::io go missing?
[15:55:54] <nmatsakis> ChrisMorgan: k
[15:56:02] <ChrisMorgan> Boreeas: std::io is gone
[15:56:13] <ChrisMorgan> Deleted. Defunct. It is an ex-module!
[15:56:19] <Boreeas> ChrisMorgan: The header for http://static.rust-lang.org/doc/master/std/index.html should be updated then
[15:56:27] <Boreeas> What's replacing it?
[15:56:28] *** Joins: bytbox (s@moz-D0FC83B4.wireless.umd.edu)
[15:57:04] <ChrisMorgan> What is at present std::rt::io.
[15:57:10] *** Joins: refold (gman@moz-42D68426.a258.priv.bahnhof.se)
[15:57:18] *** Joins: bholley (anonymous@moz-A2189431.hsd1.ca.comcast.net)
[15:57:44] <ChrisMorgan> You're right, that comment does need updating. (Pertinent bit in case someone wants to fix it and submit a PR: "basic I/O abstractions (`io`)".)
[15:58:31] <Boreeas> Ah, thanks
[15:59:22] <willingc> ChrisMorgan: Happy to edit it and submit a PR. Do you want it deleted or replaced with something else?
[15:59:38] <ChrisMorgan> willingc: Probably change `io` to `rt::io`
[16:00:07] *** Joins: kellogh (timkellogg@moz-68DF7EF7.teliax.com)
[16:00:34] <willingc> ChrisMorgan: Will update tonight and send a PR.
[16:00:40] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[16:01:21] *** Joins: novabyte (novabyte@moz-CD387CBD.as13285.net)
[16:03:17] *** Quits: AngryLawyer (Mibbit@moz-BB2126F4.range109-157.btcentralplus.com) (Quit: http://www.mibbit.com ajax IRC Client)
[16:04:36] *** Joins: brendan (brendaneic@355BB431.4EA043EC.B62AF9C3.IP)
[16:06:34] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[16:06:42] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[16:07:04] *** Joins: pnathan (Adium@moz-E72012D3.tukw.qwest.net)
[16:07:10] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[16:08:51] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[16:09:34] *** Quits: brendan (brendaneic@355BB431.4EA043EC.B62AF9C3.IP) (Quit: brendan)
[16:11:59] *** Quits: Ms2ger (Ms2ger@moz-954192F2.ugent.be) (Quit: bbl)
[16:12:31] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[16:13:24] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[16:14:41] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[16:16:22] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[16:18:08] *** Joins: nfroidure (nfroidure@moz-186EBCA3.w90-18.abo.wanadoo.fr)
[16:18:09] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[16:19:42] *** Quits: ahal (ahal@FCCEA34F.7672369.D8E68FF6.IP) (Ping timeout)
[16:19:48] *** Quits: SiegeLord (sl@moz-1DF56822.twcny.res.rr.com) (Quit: Leaving)
[16:20:09] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Client exited)
[16:22:12] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[16:23:04] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[16:25:22] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:25:23] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Client exited)
[16:25:39] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[16:26:34] *** Quits: bytbox (s@moz-D0FC83B4.wireless.umd.edu) (Ping timeout)
[16:26:35] *** Quits: nfroidure (nfroidure@moz-186EBCA3.w90-18.abo.wanadoo.fr) (Quit: Ex-Chat)
[16:27:32] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[16:30:54] *** Joins: novabyte1 (novabyte@moz-CD387CBD.as13285.net)
[16:31:28] *** Quits: novabyte (novabyte@moz-CD387CBD.as13285.net) (Ping timeout)
[16:33:55] *** Joins: victorporof (victorporo@9B024C76.73B1E539.9B1E38F4.IP)
[16:34:59] *** Quits: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net) (Quit: Leaving)
[16:36:33] *** Joins: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net)
[16:36:52] *** Joins: bcc (shibe@6E8FFA64.5F528A99.6CC19A90.IP)
[16:36:55] *** Joins: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP)
[16:38:04] *** Quits: maxiepoo (Max@moz-13F4F196.nuwlan.northwestern.edu) (Quit: maxiepoo)
[16:38:42] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[16:39:22] *** Quits: kellogh (timkellogg@moz-68DF7EF7.teliax.com) (Quit: kellogh)
[16:39:39] *** Quits: pnathan (Adium@moz-E72012D3.tukw.qwest.net) (Quit: Leaving.)
[16:40:00] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[16:41:45] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[16:42:00] *** Joins: kellogh (timkellogg@moz-68DF7EF7.teliax.com)
[16:45:29] *** Quits: pyrac (pyrac@moz-8356B7F.w90-5.abo.wanadoo.fr) (Quit: pyrac)
[16:46:37] *** Joins: brendan (brendaneic@5FC4E4D8.4EE99619.E46D6E17.IP)
[16:46:47] *** Quits: JanC (janc@moz-DA91F4D.dsl.scarlet.be) (Ping timeout)
[16:48:06] *** Quits: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net) (Client exited)
[16:51:51] *** fredy is now known as williamq__
[16:51:55] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[16:51:57] *** williamq__ is now known as fredy
[16:53:20] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[16:54:17] *** Quits: Ferreus (ferreus@moz-1CF9FE6D.dip0.t-ipconnect.de) (Ping timeout)
[16:54:41] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[16:58:50] *** Joins: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net)
[16:59:11] *** Joins: lkuper (lkuper@moz-54129201.dhcp-bl.indiana.edu)
[16:59:55] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[17:00:23] *** Joins: pyrac (pyrac@moz-8356B7F.w90-5.abo.wanadoo.fr)
[17:01:17] *** Joins: osa1 (omer@moz-63168A82.hsd1.in.comcast.net)
[17:01:37] <osa1> what is "The lexical identifier rule of Python." mentioned in Rust manual?
[17:01:45] *** Quits: novabyte1 (novabyte@moz-CD387CBD.as13285.net) (Ping timeout)
[17:01:46] *** Joins: novabyte (novabyte@moz-CD387CBD.as13285.net)
[17:03:00] *** Joins: JanC (janc@moz-A2D0AF14.dsl.scarlet.be)
[17:03:57] *** Quits: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP) (Quit: Leaving)
[17:04:15] *** Joins: alan (alan@moz-FE02DD30.sat6.rackspace.com)
[17:06:06] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[17:06:27] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[17:06:31] *** pmoore|back-at-1830-cet is now known as pmoore
[17:08:12] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[17:10:49] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Quit: leaving)
[17:14:06] <osa1> how can I write to process's input stream http://static.rust-lang.org/doc/0.8/std/run/index.html ?
[17:15:30] *** Quits: brendan (brendaneic@5FC4E4D8.4EE99619.E46D6E17.IP) (Quit: brendan)
[17:16:02] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[17:18:32] *** Joins: brendan (brendaneic@5FC4E4D8.4EE99619.E46D6E17.IP)
[17:19:01] *** Quits: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Ping timeout)
[17:19:04] *** Quits: brendan (brendaneic@5FC4E4D8.4EE99619.E46D6E17.IP) (Client exited)
[17:19:37] *** Joins: brendan (brendaneic@5FC4E4D8.4EE99619.E46D6E17.IP)
[17:20:08] *** Joins: Ms2ger (Ms2ger@moz-EA6EE9F3.adsl-dyn.isp.belgacom.be)
[17:21:21] *** Quits: feduser (feduser@B51E0A6C.AAE9A62C.650F25DA.IP) (Ping timeout)
[17:21:27] *** Quits: brendan (brendaneic@5FC4E4D8.4EE99619.E46D6E17.IP) (Quit: brendan)
[17:23:47] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[17:24:15] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:24:19] *** Quits: pyrac (pyrac@moz-8356B7F.w90-5.abo.wanadoo.fr) (Quit: pyrac)
[17:25:17] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[17:26:33] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[17:27:38] *** Quits: jvshahid (jvshahid@moz-C1BC0CE4.nyc.res.rr.com) (Quit: Lost terminal)
[17:29:33] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[17:29:54] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[17:30:35] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[17:30:55] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[17:32:34] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[17:32:45] *** Joins: flowsnake (flowsnake@moz-E4E567EE.aztw.cable.virginm.net)
[17:32:55] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[17:33:03] *** Quits: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Ping timeout)
[17:33:24] *** Quits: novabyte (novabyte@moz-CD387CBD.as13285.net) (Ping timeout)
[17:34:06] *** Joins: mib_imqx6o (Mibbit@moz-81BD9A1F.dynamic.qsc.de)
[17:34:07] *** Joins: pyrac (pyrac@moz-8356B7F.w90-5.abo.wanadoo.fr)
[17:34:08] *** Joins: notmatt (notmatt@9EE269E.F9CD85DB.47C41102.IP)
[17:34:36] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[17:35:48] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[17:36:08] <jdm> so I have a ~str field
[17:36:16] <jdm> and I want to get an &str from it
[17:36:22] <jdm> but &field is giving me &~str :(
[17:37:06] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[17:38:15] *** cade is now known as cade_away
[17:38:34] *** Joins: mib_odilku (Mibbit@CD261AB0.59E74B64.D609CF0D.IP)
[17:38:41] *** Quits: mib_odilku (Mibbit@CD261AB0.59E74B64.D609CF0D.IP) (Quit: mib_odilku)
[17:39:30] *** Joins: FreeFull (freefull@D89A5B80.2CE4D4F4.159B5998.IP)
[17:39:30] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[17:39:33] *** Quits: mib_p7ghk5 (Mibbit@moz-E5BB1D56.bloomberg.com) (Quit: http://www.mibbit.com ajax IRC Client)
[17:39:40] <bstrie> jdm: &*field ?
[17:39:51] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[17:39:53] <jdm> bstrie: can't dereference ~str
[17:40:07] *** Quits: osa1 (omer@moz-63168A82.hsd1.in.comcast.net) (Ping timeout)
[17:40:12] <bstrie> ah right
[17:40:14] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Connection reset by peer)
[17:40:26] <bstrie> is there a .to_borrowed() method? :P
[17:40:29] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[17:40:48] <jdm> maybe I need as_slice
[17:41:08] <jdm> huh, that worked
[17:46:56] *** Quits: notmatt (notmatt@9EE269E.F9CD85DB.47C41102.IP) (Ping timeout)
[17:47:00] *** Quits: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net) (Quit: Leaving)
[17:47:18] *** Joins: notmatt (notmatt@9EE269E.F9CD85DB.47C41102.IP)
[17:47:21] *** Quits: eddyb (eddy@717B0165.D51DAF03.FB866788.IP) (Ping timeout)
[17:47:22] *** Joins: _eddyb_ (eddy@336E3A7F.D51DAF03.FB866788.IP)
[17:49:05] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:49:16] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[17:49:16] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:49:26] *** Quits: pyrac (pyrac@moz-8356B7F.w90-5.abo.wanadoo.fr) (Quit: pyrac)
[17:52:12] <kimundi> jdm: coercing a ~str to &str actually only works on function and method call, and I think in case of something like `let x: &str = ~"foo"`
[17:52:29] <jdm> yes, that is the conclusion I've come to
[17:52:31] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:52:35] <jdm> it is frustratingly counterintuitive
[17:53:02] <kimundi> yeah
[17:53:41] <kimundi> I think the desire of the devs is to just make &*blah work in such cases
[17:53:53] *** Joins: brendan (brendaneic@58BEDD1.F2D06294.2185DF69.IP)
[17:54:22] *** Joins: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net)
[17:54:31] *** Quits: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net) (Quit: Leaving)
[17:56:40] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[17:56:57] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[17:57:05] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[17:57:09] *** Joins: pyrac (pyrac@moz-8356B7F.w90-5.abo.wanadoo.fr)
[17:57:17] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[17:58:57] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[18:00:48] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[18:01:05] *** Quits: jason_ (jason@moz-EC85D533.members.linode.com) (Ping timeout)
[18:01:56] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[18:02:24] *** Joins: AndroUser (androirc@8785A2CF.3D1742B6.8FB52CB8.IP)
[18:02:33] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[18:02:33] *** ChanServ sets mode: +o tjc
[18:02:42] *** Quits: notmatt (notmatt@9EE269E.F9CD85DB.47C41102.IP) (Client exited)
[18:03:25] *** Quits: AndroUser (androirc@8785A2CF.3D1742B6.8FB52CB8.IP) (Quit: AndroIRC - Android IRC Client ( http://www.androirc.com ))
[18:04:27] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:04:28] *** ChanServ sets mode: +ao brson brson
[18:10:28] *** Quits: pyrac (pyrac@moz-8356B7F.w90-5.abo.wanadoo.fr) (Quit: pyrac)
[18:10:46] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[18:13:11] *** Joins: pyrac (pyrac@moz-8356B7F.w90-5.abo.wanadoo.fr)
[18:13:42] <jdm> who wants to help with my lifetime woes :(
[18:13:43] <jdm> https://github.com/mozilla/rust/wiki/Notes
[18:13:45] <jdm> whoops
[18:13:47] <jdm> https://pastebin.mozilla.org/3447692
[18:15:35] <kimundi> jdm: You can't return the slice like that because it is based on the temporary value 'attr'
[18:15:57] <jdm> kimundi: that seems counterintuitive to me, since attr is just a reference to an element in a vector
[18:16:08] *** Joins: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net)
[18:16:11] <jdm> in my head, at least
[18:16:39] <kimundi> what type is attr.value ?
[18:16:42] <jdm> ~str
[18:16:48] <jdm> attr is @mut Attr
[18:16:57] <jdm> attrs is ~[@mut Attr]
[18:17:12] <jdm> well, maybe &[@mut Attr] in this case
[18:17:24] <kimundi> jdm: Okay, thie issue is this:
[18:18:09] <kimundi> Because attr is a @mut Attr, it is not owned somewhere on the stack above, but exists somewhere in the heap
[18:18:22] <jdm> yeah, I was worried about that
[18:18:40] <jdm> I assumed that its lifetime could be related to the owner of attrs, since that holds it alive
[18:18:51] <kimundi> To keep a borrowed pointer into it alive, the compiler has to add a hidden `let tmp = attr;` variable
[18:18:57] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[18:19:19] <kimundi> which ensures that no matter what happens, for as long as you have the slice into it the managed box will stay alive
[18:19:34] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[18:19:42] <kimundi> however, you get a fresh @mut Attr each iteration, and throw it away at the end of each iteration
[18:20:12] *** Quits: brendan (brendaneic@58BEDD1.F2D06294.2185DF69.IP) (Quit: brendan)
[18:20:15] <kimundi> The compiler has nowhere to put the temporary root of the managed value outside of the iteration loop
[18:20:30] <kimundi> You could return the attr itself though
[18:20:45] <kimundi> And after you have it, _then_ slice into it
[18:21:03] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[18:21:10] <jdm> good idea
[18:21:26] <kimundi> So, value becomes Option<@mut Attr> or so
[18:21:56] *** Joins: boredomist (ruqs@8186917.CC8FA3EE.E3401B6E.IP)
[18:22:20] <kimundi> And then you can add a new let value2 = value.map(|x| x.value.as_slice());
[18:22:28] <kimundi> to get a Option<&str>
[18:22:29] <jdm> pfft, temporary values
[18:22:31] <jdm> chain everything
[18:22:36] <kimundi> THat won't work
[18:22:42] <kimundi> I think
[18:22:45] *** Quits: pyrac (pyrac@moz-8356B7F.w90-5.abo.wanadoo.fr) (Quit: pyrac)
[18:22:47] <jdm> you are correct
[18:23:13] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[18:23:22] <kimundi> the first value would be your root for the second value2 then :)
[18:23:53] <jdm> darn, still lifetime errors
[18:24:00] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[18:24:02] <kimundi> New ones I hope :)
[18:24:12] <jdm> same
[18:24:21] <kimundi> hu, can you post a updated gist?
[18:24:52] <jdm> kimundi: https://pastebin.mozilla.org/3447808
[18:25:56] <kimundi> oh, right, map would use a temporary value too, I think
[18:26:10] <kimundi> But the return sliced would not work anyway
[18:26:23] <kimundi> For the same reasons as the error before
[18:26:26] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[18:27:08] <jdm> I wonder if this would be any easier if my hashmap was ~str -> @mut Attr
[18:28:00] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[18:29:00] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[18:29:22] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[18:30:19] *** Joins: vertexclique (vertexcliq@D3C60FC5.BF7DD56B.1826D296.IP)
[18:30:21] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[18:30:45] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[18:31:16] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[18:31:17] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[18:31:41] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[18:31:55] *** Joins: nif (Mibbit@moz-B6DFA19D.wireless.oberlin.edu)
[18:33:37] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[18:34:13] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[18:34:13] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:35:31] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[18:37:11] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[18:38:53] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[18:39:12] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[18:39:37] <mib_imqx6o> Someone hat an idea of a compilt-time constant string class. 
[18:40:04] <mib_imqx6o> with such an string class could sql statements be much saver
[18:41:03] <mib_imqx6o> such that "SQL_statement("select * from table");" would compile
[18:41:04] <FreeFull> Rather than doing that, you can not expose SQL strings at all, and instead build queries programatically
[18:41:09] <kimundi> mib_imqx6o: We don't have classes, an string literals are already stored as compiletime constants, what do you mean?
[18:41:47] <mib_imqx6o> but would "SQL_statement("select * from table where name='" + userinput + "'"); " be a compile time error?
[18:42:22] <sfackler> wouldn't that just be setting type type of the parameter to &'static str? or can you not do that?
[18:42:46] <kimundi> Also, syntax extensions would allow both sql!("select * from table") and sql!(select * from table) to compile to some static definition
[18:43:09] <kimundi> And would allow for syntax checking
[18:43:48] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[18:44:02] <mib_imqx6o> sfackler: ok, thanks, ill read the manual again
[18:44:06] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[18:44:15] <mib_imqx6o> kimundi: sounds interesting, thanks
[18:44:38] *** cade_away is now known as cade
[18:45:08] *** Joins: jordyd (jordyd@moz-E83171EC.seg59.ucf.edu)
[18:45:34] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[18:46:16] *** Joins: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net)
[18:48:51] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Client exited)
[18:49:16] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[18:50:45] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[18:51:13] *** Joins: enomado (nomad@DB5C5EEB.5ED34291.AB610CFE.IP)
[18:53:18] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[18:53:54] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[18:54:14] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[18:56:00] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[18:56:22] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:57:35] *** Joins: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de)
[18:57:37] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[18:57:41] *** Joins: jviereck1 (Adium@moz-CF8216D6.dip0.t-ipconnect.de)
[18:57:42] *** Quits: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de) (Connection reset by peer)
[18:57:53] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[18:58:46] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[19:02:25] *** Quits: kellogh (timkellogg@moz-68DF7EF7.teliax.com) (Quit: kellogh)
[19:02:41] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[19:07:09] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Ping timeout)
[19:07:11] *** Quits: rfw (rfw@moz-7D453A5B.rfw.name) (Connection reset by peer)
[19:07:52] *** Joins: rfw (rfw@moz-7D453A5B.rfw.name)
[19:08:27] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[19:08:52] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[19:09:13] *** Joins: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[19:10:27] *** Quits: vertexclique (vertexcliq@D3C60FC5.BF7DD56B.1826D296.IP) (Client exited)
[19:10:35] *** Joins: pepper_chico (pepper_chi@552215C7.BBE04DBB.F546FA5F.IP)
[19:10:49] *** Joins: vertexclique (vertexcliq@D3C60FC5.BF7DD56B.1826D296.IP)
[19:11:59] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[19:15:02] *** Joins: brianm (brianm@moz-C11D8A73.ptr.us.xo.net)
[19:15:03] *** jorendorff is now known as jorendorff_away
[19:15:29] *** Joins: alisdair (textual@E1CEBB1A.D061F0C9.AA6AEE7B.IP)
[19:17:27] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[19:18:00] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[19:18:09] *** Quits: penguin_dan (dan_johnsi@6902762D.11B071D.FB9A45AF.IP) (Quit: Leaving)
[19:18:13] *** Quits: alisdair (textual@E1CEBB1A.D061F0C9.AA6AEE7B.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:18:32] <pcwalton> conditions are so hard to use :(
[19:18:40] * pcwalton really wants to remove them
[19:19:02] <tiffany> I've seen snippets that show that they're really verbose
[19:19:14] <tiffany> is there any reason why they're used over option and result?
[19:20:16] *** _eddyb_ is now known as eddyb
[19:20:30] *** Joins: nkoep (nik@moz-CC1EFD15.pool.mediaways.net)
[19:24:02] *** Quits: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net) (Quit: Textual IRC Client: www.textualapp.com)
[19:24:44] <myname> is there an easy way to read from stdin?
[19:26:44] *** Quits: houzi (houzi@moz-4F6A1E26.getinternet.no) (Ping timeout)
[19:26:56] *** Joins: houzi (houzi@moz-4F6A1E26.getinternet.no)
[19:27:51] <brson> tiffany: no good ones, I think, but they were used in the I/O library for dogfooding purposes. it was an experiment that i think hasn't worked out; they aren't a suitable substitute for catchable exceptions.
[19:28:25] <brson> myname: std::rt::io::stdin() will give you a Reader of some sort
[19:28:50] <tiffany> I don't like when exceptions are used in place of program totality
[19:29:02] *** Quits: squiddy (squiddy@moz-727698D.adsl.alicedsl.de) (Ping timeout)
[19:30:27] *** jorendorff_away is now known as jorendorff
[19:32:05] *** Quits: andre (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[19:33:29] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[19:35:43] <myname> oh, http://static.rust-lang.org/doc/0.8/std/rt/io/index.html has an example with old for syntax
[19:37:06] *** Quits: bholley (anonymous@moz-A2189431.hsd1.ca.comcast.net) (Quit: bholley)
[19:40:09] <myname> i'm realizing that i am trying to do something atoi-ish in rust for the first time
[19:41:10] <Ms2ger> Did you mean: let x: Option<int> = from_str("7")?
[19:41:50] *** Quits: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP) (Ping timeout)
[19:41:53] <myname> if it's that easy, great
[19:42:39] *** Quits: brianm (brianm@moz-C11D8A73.ptr.us.xo.net) (Quit: Leaving...)
[19:42:45] *** Joins: valenting (Thunderbir@938C8A6D.7D559184.E16F0CF5.IP)
[19:43:12] *** Joins: kellogh (timkellogg@moz-68DF7EF7.teliax.com)
[19:43:27] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[19:43:32] *** Quits: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net) (Quit: carllerche)
[19:44:16] *** Joins: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net)
[19:44:57] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[19:45:09] <tjc> tiffany: it's ok to use Result / Option instead of conditions at this point. hopefully we will have some syntactic sugar at some point that will help, too
[19:45:30] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[19:45:51] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[19:47:35] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[19:48:19] *** Parts: nif (Mibbit@moz-B6DFA19D.wireless.oberlin.edu) ()
[19:48:33] <sfackler> is there an open issue for method-like macros? i.e. foo.thingy!(). It'd make Result/Option based APIs way nicer if you could do something like TcpStream::connect(s).or_return!()
[19:48:49] <bstrie> haha
[19:49:03] <pauls> sfackler: I don't believe so.
[19:49:03] <bstrie> I pester pauls for method-like macros all the time!
[19:49:14] <sfackler> it'd just be syntactic sugar for or_return!(TcpStream::connect(s)) but a little nicer to look at
[19:49:16] *** Joins: vodik_ (simon@moz-FD4ADBC6.cable.teksavvy.com)
[19:49:45] <bstrie> pauls: clearly there is demand here. write your phd thesis on formalizing method-like macros
[19:49:47] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[19:49:51] <pauls> I don't think they're too likely; `foo.thingy!()` is much like `thingy!(foo)`, but with confusing issues about resolution.
[19:50:25] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[19:50:40] <bstrie> foo!thingy()
[19:50:55] <bstrie> ! is like . except more emphatic
[19:51:02] <pauls> (or, I guess, one issue, anyhow: it looks like it's dynamically resolvable, or at least can pay attention to the type of `foo`, but it'd be just another ordinary argument)
[19:51:21] <Ms2ger> foothingy()
[19:51:51] <myname> f.rs:6:13: 6:32 error: failed to find an implementation of trait std::io::Reader for std::rt::io::stdio::StdReader
[19:51:54] <myname> interesting
[19:52:06] <bstrie> std::io doesn't exist any more
[19:52:09] <bstrie> or so I hear
[19:52:13] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[19:52:27] <myname> why does it looks for that
[19:52:43] <cmr> myname: rust version?
[19:52:46] <myname> 0.8
[19:52:47] <bstrie> do you have some really old version of rust secretly installed somewhere?
[19:52:50] <bstrie> oh
[19:52:52] <bstrie> 0.8
[19:52:56] * bstrie throws myname to the wolves
[19:53:04] <bstrie> myname will be missed
[19:53:20] <myname> :(
[19:53:26] <bstrie> let us remember them fondly
[19:54:02] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[19:54:32] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[19:54:39] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[19:54:42] <myname> fine, i will use rust-git
[19:54:46] <bstrie> hooray!
[19:54:47] <myname> ARE YOU HAPPY NOW?
[19:54:52] <bstrie> very! :)
[19:56:12] <jeffdb> what's a rust-git?
[19:56:25] <bstrie> jeffdb: a really grumpy rust developer
[19:56:43] *** Quits: Sorella (quildreen@2392D500.600E39D3.1ED99692.IP) (Quit: Ex-Chat)
[19:56:47] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[19:56:54] <jeffdb> O_o
[19:57:09] <bstrie> jeffdb: it just means to use the in-development version of rust, rather than the snapshot releases
[19:58:05] <jeffdb> psh... who would ever use a snapshot?!
[19:58:22] <bstrie> only rust-gits
[19:58:25] *** Joins: Florob (Florob@moz-39532932.de)
[19:58:44] <myname> great, now it only complains about not having read_line
[19:58:52] <Florob> What am I doing wrong if rustpkg tells me «task '<unnamed>' failed at 'assertion failed: !outputs_disc.is_empty()'». Or is that a known bug?
[19:58:59] <cmr> myname: read_line is on BufferedReader
[19:59:00] <bstrie> myname: isn't living in the future wonderful!
[19:59:10] <myname> cmr: so...?
[19:59:18] <myname> i just want lines from stdin
[19:59:29] <cmr> myname: so... you need to create a BufferedReader
[19:59:44] <bstrie> io is sooo painful right now
[19:59:45] <cmr> Florob: known bug
[19:59:45] <myname> i need to create a buffered reader out of the stdreader?
[19:59:45] * bstrie writhes
[19:59:48] <cmr> bstrie: not really
[20:00:00] <bstrie> ok, how do I read a file line-by-line
[20:00:10] <Florob> cmr, any way around it, or basically "don't use rustpkg right now"?
[20:00:45] *** Joins: CarpNet (Alasdair@moz-25C796BC.cable.virginm.net)
[20:01:21] <myname> i don't quite get it
[20:01:51] <sfackler> bstrie: open the file, but the stream you get into a BufferedStream and call read_line
[20:01:53] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[20:01:54] <sfackler> *put
[20:02:01] <bstrie> sfackler: show me the code!!
[20:02:05] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[20:02:06] <cmr> bstrie: let mut f = BufferedReader::new(File::open(Path::new("filename"))); while true { match f.read_line() { Some(line) => {...}, None => break } }
[20:02:13] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[20:02:26] <bstrie> grossss
[20:02:31] <bstrie> I want an iterator-based solution
[20:02:35] <cmr> So write one
[20:02:37] <cmr> :P
[20:02:50] <bstrie> no I am writing my lua bindings
[20:03:03] <bstrie> make someone else be productive
[20:03:09] <cmr> it'd be super trivial. literally just a struct holding a BufferedReader and next returns read_line
[20:03:53] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[20:04:02] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[20:04:03] *** Joins: smoo (Mibbit@moz-FBB3AA6C.hsd1.ma.comcast.net)
[20:04:29] <tikue__> what would the constructor take
[20:04:43] <tikue__> FileIt::from_str
[20:04:55] *** Quits: alan (alan@moz-FE02DD30.sat6.rackspace.com) (Quit: alan)
[20:05:04] *** Joins: alan (alan@32702EE8.939109B2.FB082A98.IP)
[20:05:31] <tikue__> imo Files should be iterable
[20:05:52] <tikue__> it should just buffer underneath the hood
[20:06:10] <tikue__> let f = File::open("filename"); for line in f.it() { .. }
[20:06:12] <tikue__> it should be that simple
[20:06:15] <bstrie> indeed
[20:06:18] <bstrie> that's exactly what I want
[20:06:33] <cmr> I'm very against a Reader doing any buffering
[20:06:39] <tikue__> cmr: why?
[20:06:45] *** Quits: valenting (Thunderbir@938C8A6D.7D559184.E16F0CF5.IP) (Ping timeout)
[20:06:45] *** Quits: alan (alan@32702EE8.939109B2.FB082A98.IP) (Ping timeout)
[20:07:01] *** Quits: pepper_chico (pepper_chi@552215C7.BBE04DBB.F546FA5F.IP) (Quit: Ex-Chat)
[20:07:03] <cmr> tikue__: Because I want to know when there's going to be buffering.
[20:07:28] <sfackler> == cmr
[20:07:37] <tikue__> ok then how about `let mut f = BufferedFile::open("filename"); for line in f.it() { .. }`
[20:07:40] <bstrie> let f = File::open("filename"); for line in f.bufferd_iter() { .. }
[20:07:43] <cmr> Yes, I'm fine with that :p
[20:07:56] <bstrie> listen, I'm a python programmer, I don't even know what file buffering is!
[20:08:02] <tikue__> bstrie++ :P
[20:08:09] <tikue__> buffered_iter() is a good idea imo
[20:08:13] *** Joins: alan (alan@32702EE8.939109B2.FB082A98.IP)
[20:09:59] <cmr> I think a line_iter would be fine
[20:10:08] <cmr> it's pretty obvious that it would have to buffer
[20:10:44] *** Joins: tikue (tikue_star@moz-FEADCD38.hsd1.pa.comcast.net)
[20:10:55] <tikue__> what's always nonobvious to me is what kind of api to expose
[20:11:04] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[20:11:07] <tikue__> is there even File::open(&str)
[20:11:11] <Ms2ger> cmr, split on LF? CR? CRLF? U+2028? U+2029? :)
[20:11:12] <tikue__> and if not, why not?
[20:11:16] <myname> where to look for program arguments?
[20:11:27] <tikue__> myname: os::args() i believe
[20:11:27] <cmr> myname: std::os::args()
[20:11:34] <benh> better hope they're utf-8!
[20:12:05] <cmr> tikue__: rust doesn't have overloading, so no. and because paths aren't strings.
[20:12:06] <myname> any plans on making something like fn main(args)?
[20:12:07] <bstrie> File::open could take a str. I know we're gung-ho about using Paths rather than stringly-typed programming, but just opening a file based on a string is no worse than opening a file based on a path based on a string
[20:12:15] <cmr> myname: we used to do that. we don't anymore.
[20:12:20] *** Quits: jviereck1 (Adium@moz-CF8216D6.dip0.t-ipconnect.de) (Quit: Leaving.)
[20:12:22] <myname> why?
[20:12:34] <tikue__> cmr: there should be `fn from_str(s: &str) -> Option<File>`
[20:13:12] <cmr> tikue__: Well I was thinking open_str
[20:13:14] <benh> cmr: We don't have overloading, yet you can call Path::new with a vector of bytes or a string! Magic!
[20:13:42] <bstrie> we don't need overloading to have File::open take either a Path or a str. that's what we have bounded generics for!
[20:13:46] <cmr> But then you also need open_str_mode
[20:14:01] <cmr> bstrie: ToPath?
[20:14:02] *** Quits: vodik_ (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[20:14:04] <bstrie> sure
[20:14:34] <tikue__> cmr: yeah...sure would be nice to have overloading or optional args. 
[20:16:40] *** Joins: alisdair (textual@E1CEBB1A.D061F0C9.AA6AEE7B.IP)
[20:16:49] *** Quits: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net) (Client exited)
[20:17:05] *** Joins: andrew-__ (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net)
[20:17:11] *** Quits: andrew-__ (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net) (Input/output error)
[20:17:31] *** Joins: andrew-__ (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[20:17:50] *** tikue__ is now known as tikue_
[20:17:57] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[20:18:04] *** Joins: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de)
[20:18:29] *** pmoore is now known as pmoore|away
[20:19:29] <myname> huh
[20:19:53] <myname> core dumps
[20:21:02] <Ms2ger> &mut ~[@mut Attr]
[20:21:14] <Ms2ger> Look like someone's been playing pointer bingo
[20:21:46] <myname> needs a *
[20:22:22] <myname> okay
[20:22:31] <myname> so i have this match from_str(line)
[20:22:40] <myname> how to tell rustc the type?
[20:23:37] <cmr> from_str::<SomeType>(line)
[20:23:53] <myname> look like buffered reader of stdin won't work for me :(
[20:23:54] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Quit: lmandel)
[20:23:59] *** Quits: tikue (tikue_star@moz-FEADCD38.hsd1.pa.comcast.net) (Ping timeout)
[20:24:10] *** Quits: alisdair (textual@E1CEBB1A.D061F0C9.AA6AEE7B.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:27:49] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[20:28:17] <myname> let mut reader = BufferedReader::new(std::rt::io::stdin()); match reader.read_line() { None => break, Some(line) => println(line) }
[20:28:21] <myname> core dumped
[20:28:57] <cmr> acrichto: ^
[20:29:18] *** Joins: andrew-d_w (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net)
[20:30:02] <acrichto> myname: what rust version are you using?
[20:30:18] <myname> rustc 0.9-pre (dda67df 2013-11-06 00:56:08 -0800)
[20:30:28] *** Quits: andrew-__ (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[20:30:29] <acrichto> hm, are you on linux?
[20:30:32] <myname> i am
[20:30:41] <myname> i am using thestingers builds
[20:31:06] *** Quits: Jackneill (Jackneill@moz-EFBCBB8F.pool.digikabel.hu) (Input/output error)
[20:31:28] *** Quits: andrew-d_w (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net) (Input/output error)
[20:31:30] <cmr> cannot reproduce on linux with rustc 0.9-pre (fdc830d 2013-11-06 11:51:09 -0800)
[20:31:48] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[20:32:05] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Quit: msingle)
[20:32:06] <acrichto> myname: can you get a stack trace from gdb?
[20:32:22] *** Joins: vodik_ (simon@moz-FD4ADBC6.cable.teksavvy.com)
[20:33:08] <myname> cmr: wait, i'll gist
[20:34:48] *** Quits: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP) (Ping timeout)
[20:34:58] <myname> cmr: https://gist.github.com/mynery/7361421
[20:35:33] <acrichto> myname: can you run that in gdb, and then gist the stack trace on the coredump?
[20:36:06] <myname> just let me check on how to do that :D
[20:36:31] <acrichto> you should just be able to do 'gdb ./myprogram', hit 'r', then type a line 
[20:36:37] <acrichto> gdb will stop automatically on a segfault
[20:39:22] *** Joins: andrew-__ (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[20:39:56] <myname> https://gist.github.com/mynery/7361480
[20:40:29] <acrichto> looks like you need to give it an argument
[20:40:29] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[20:40:33] <acrichto> your program
[20:40:45] <myname> i did actually
[20:40:55] <acrichto> task '<main>' failed at 'index out of bounds: the len is 1 but the index is 1', f.rs:17
[20:41:02] <acrichto> that's what's happening
[20:41:49] <myname> https://gist.github.com/mynery/7361511
[20:42:04] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:42:12] <acrichto> can you type 'bt' in gdb to get the backtrace?
[20:42:25] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[20:42:25] *** ChanServ sets mode: +o tjc
[20:42:28] <acrichto> also, what are the contents of 'test' ?
[20:43:05] <myname> i made a comment
[20:43:17] <myname> test is just 123\n456\n789
[20:44:08] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:44:10] *** Joins: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net)
[20:44:42] <smoo> Random question: Is ToStr expected to exist in its current form through 1.0? It forces at least one ~str allocation, and one very rarely actually wants one in of itself. Most uses of it that I saw just passed the result to some io function, used it in an arg to format!, or concatenated it with another string.
[20:44:54] <acrichto> myname: cool thanks, I've reproduced it
[20:45:18] <myname> congratulation
[20:45:24] <myname> so it's actually a thing?
[20:45:57] <acrichto> yeah, it's weird though
[20:46:08] *** Joins: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP)
[20:46:18] <myname> i agree at that
[20:47:05] <steven_is_false> Hello. I'm getting the error task '<unnamed>' failed at 'assertion failed: bpos == mbc.pos || bpos.to_uint() >= mbc.pos.to_uint() + mbc.bytes', /home/sstewartgallus/others/src/rust/src/libsyntax/codemap.rs:466 . I think Rust has a glitch with multibyte characters. How can I search for multibyte characters in a document on a Linux platform?
[20:48:15] *** Quits: vertexclique (vertexcliq@D3C60FC5.BF7DD56B.1826D296.IP) (Quit: )
[20:48:24] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[20:48:24] *** ChanServ sets mode: +o tjc
[20:50:00] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[20:50:41] <steven_is_false> Nevermind, I don't have any mulitbyte characters in my sources.
[20:53:04] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[20:56:47] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[20:57:06] *** Quits: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP) (Input/output error)
[21:00:25] <cmr> steven_is_false: rust version?
[21:00:34] <cmr> (ie, sha of hte commit)
[21:01:53] *** Quits: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP) (Quit: WeeChat 0.4.2)
[21:01:55] *** Joins: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP)
[21:02:23] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[21:03:29] <steven_is_false> cmr: 5 seconds
[21:03:46] <steven_is_false> /home/sstewartgallus/local/bin/rustc 0.9-pre (03f3051 2013-11-07 02:41:10 -0800)
[21:03:47] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[21:04:11] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[21:05:00] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[21:08:23] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:09:07] <acrichto> myname: https://github.com/joyent/libuv/issues/988
[21:10:21] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[21:10:53] *** Quits: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de) (Quit: Leaving.)
[21:11:08] <myname> it's strange that it works with pipes
[21:11:44] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[21:12:30] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[21:12:51] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[21:13:18] *** Joins: mikezaby (mikezaby@moz-B26868E.home.otenet.gr)
[21:13:24] <cmr> steven_is_false: hm, very very strange
[21:13:47] <cmr> steven_is_false: can you track down which file/line is triggering this?
[21:14:08] <steven_is_false> cmr: Yeah, I'm reducing the test case now.
[21:14:13] <cmr> cool, thanks
[21:14:38] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[21:15:21] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[21:17:39] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[21:17:39] *** ChanServ sets mode: +o tjc
[21:19:48] *** Quits: victorporof (victorporo@9B024C76.73B1E539.9B1E38F4.IP) (Quit: victorporof)
[21:20:40] *** Joins: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP)
[21:20:44] *** Joins: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de)
[21:21:30] *** Quits: mib_imqx6o (Mibbit@moz-81BD9A1F.dynamic.qsc.de) (Quit: http://www.mibbit.com ajax IRC Client)
[21:22:26] *** Quits: an0nymous (an0nymous@moz-F04BA440.tx.res.rr.com) (Ping timeout)
[21:22:36] *** Joins: Blub\w (wry@moz-2847AB4.wireless.dyn.drei.com)
[21:22:57] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:23:18] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:23:24] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[21:24:23] *** Quits: smoo (Mibbit@moz-FBB3AA6C.hsd1.ma.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:25:03] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[21:29:11] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[21:29:13] <pcwalton> acrichto: out of curiosity what's the status on de-~fn-from-io?
[21:29:32] <acrichto> pcwalton: all done, wrapping up and getting tests to pass
[21:29:36] <pcwalton> \o/
[21:29:43] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[21:29:45] <acrichto> it may take awhile though
[21:29:47] <acrichto> the testing phase
[21:30:06] <cmr> 30 bors runs later
[21:30:08] <pcwalton> how do I make a stream of ChanOne/PortOne?
[21:30:22] <pcwalton> never mind, found it
[21:30:46] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[21:31:26] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[21:31:52] *** Joins: tav (tav@moz-40D7C5F6.range109-154.btcentralplus.com)
[21:32:25] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[21:32:47] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:34:26] *** Joins: domy32 (domy32@moz-609E576.net24.it)
[21:34:36] *** Parts: domy32 (domy32@moz-609E576.net24.it) ()
[21:36:07] *** Quits: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de) (Quit: Leaving.)
[21:36:34] *** Joins: g3orge (g3orge@moz-CE3A1669.access.hol.gr)
[21:37:33] *** Quits: tav (tav@moz-40D7C5F6.range109-154.btcentralplus.com) (Ping timeout)
[21:37:40] *** Joins: an0nymous (an0nymous@moz-F04BA440.tx.res.rr.com)
[21:37:49] *** Joins: gandalf (zbraniecki@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[21:38:43] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[21:38:53] *** Quits: joone_ (joone@moz-C50DC051.jf.intel.com) (Ping timeout)
[21:39:08] *** bjustin is now known as reg
[21:39:11] *** reg is now known as register
[21:39:57] *** Quits: g3orge (g3orge@moz-CE3A1669.access.hol.gr) (Quit: leaving)
[21:40:04] *** Joins: joone_ (joone@moz-C50DC051.jf.intel.com)
[21:40:15] *** Quits: fabiand (fabiand@moz-4319220B.adsl.alicedsl.de) (Quit: Verlassend)
[21:42:35] *** Joins: gareth0_ (gareth0@7B67FAFD.7B34A6AE.2653C6EC.IP)
[21:42:42] *** Quits: gareth0_ (gareth0@7B67FAFD.7B34A6AE.2653C6EC.IP) (Connection reset by peer)
[21:43:34] *** Quits: register (bjustin@moz-8FC28563.sierrabravo.net) (Quit: Textual IRC Client: www.textualapp.com)
[21:43:39] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[21:43:49] * Ms2ger wonders where Result::map_move went
[21:44:17] *** Joins: lfox (lfox@moz-861E573F.nyc.biz.rr.com)
[21:44:33] <Ms2ger> Ah, removed in a commit "Reordered the methods in std::Option and std::Result"
[21:45:23] <sfackler> Ms2ger: map now moves
[21:45:30] *** Quits: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP) (Quit: WeeChat 0.4.2)
[21:45:48] <sfackler> foo.map_move() is now foo.map() and foo.map() is now foo.as_ref().map()
[21:45:57] *** Joins: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP)
[21:45:58] <Ms2ger> Well, now... Not yet in servo ;)
[21:46:58] <strcat> sfackler: well, it doesn't necessarily move
[21:47:00] <strcat> it's just by-value
[21:47:05] <sfackler> sure
[21:47:29] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[21:48:35] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[21:48:50] *** Quits: Blub\w (wry@moz-2847AB4.wireless.dyn.drei.com) (Quit: nn)
[21:48:53] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[21:49:12] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:49:20] <strcat> rusti: 1
[21:49:20] -rusti- playpen: execvpe: No such file or directory
[21:49:21] -rusti- application terminated with error code 1
[21:49:24] <strcat> hehe
[21:49:25] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[21:49:50] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:49:53] <strcat> rusti: version
[21:49:53] -rusti- playpen: execvpe: Permission denied
[21:49:53] -rusti- application terminated with error code 1
[21:49:57] * strcat sighs
[21:49:58] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[21:50:04] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:50:05] <strcat> rusti: version
[21:50:08] -rusti- "rustc 0.8"
[21:50:17] <strcat> oh well
[21:50:20] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[21:50:20] *** ChanServ sets mode: +ao dherman dherman
[21:50:32] * strcat can just make a second rusti when master works again
[21:51:22] <sfackler> is it broken because of the pipe eof issue?
[21:52:28] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[21:52:49] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[21:54:40] <brson> strcat: what needs to be fixed?
[21:54:55] <strcat> brson: I'm not quite sure :(, the libuv I/O causes a deadlock
[21:55:18] <strcat> I can't really understand what's going on in the strace output
[21:55:45] *** Joins: bholley (anonymous@moz-A2189431.hsd1.ca.comcast.net)
[21:56:13] *** Quits: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP) (Quit: WeeChat 0.4.2)
[21:56:19] *** Joins: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP)
[21:56:32] <brson> strcat: can it be reproduced outside your sandbox?
[21:56:42] <strcat> brson: no
[21:56:48] <strcat> there's a related bug report though
[21:57:10] <strcat> brson: https://github.com/mozilla/rust/issues/10237
[21:58:14] *** sam113101 is now known as sam113101_afk
[21:58:32] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[21:58:49] <acrichto> strcat: brson: https://github.com/joyent/libuv/issues/982
[21:58:54] <acrichto> that's what's blocking rusti I believe
[21:59:06] <strcat> I'm not really sure if it is
[21:59:17] <strcat> it still deadlocks if I just do 'rustc foo.rs' and don't read from stdin
[21:59:18] <acrichto> you're seeing timeouts, right?
[21:59:20] <strcat> yes
[21:59:24] <acrichto> that's b/c it never hits eof
[21:59:28] <acrichto> we sit there reading for forever
[21:59:35] <acrichto> does it also eat 100% cpu?
[21:59:45] <strcat> dunno
[21:59:51] <strcat> can check
[22:00:10] <brson> whe do we use 100% cpu when reading forever?
[22:00:22] <acrichto> brson: b/c of that uv bug
[22:01:17] <brson> do you know what libuv is doing in a busy loop?
[22:01:27] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[22:01:39] <acrichto> I straced it awhile back and it looked like it was just spinning in odd epoll calls
[22:01:42] <acrichto> I didn't quite understand it
[22:01:43] <steven_is_false> Guys, How can I run stuff run under rust pkg under valgrind?
[22:01:54] <steven_is_false> I appear to have found a memory corruption bug.
[22:02:09] <acrichto> steven_is_false: what's the failure you're seeing?
[22:02:31] <steven_is_false> task '<unnamed>' failed at 'assertion failed: bpos == mbc.pos || bpos.to_uint() >= mbc.pos.to_uint() + mbc.bytes', /home/sstewartgallus/others/src/rust/src/libsyntax/codemap.rs:466 
[22:03:01] <acrichto> ah, nevermind, different error
[22:03:19] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[22:04:46] <acrichto> strcat: I think I know of a fix for the stdin bug
[22:04:55] <acrichto> I may just land it with the rest of these uv changes
[22:05:41] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[22:06:03] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Ping timeout)
[22:06:06] <jeaye> Where did `file` go? (from `std::rt::io`
[22:06:08] <jeaye> )
[22:06:17] <cmr> jeaye: renamed to fs
[22:06:20] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[22:06:36] <jeaye> ah
[22:07:05] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[22:08:06] *** Quits: enomado (nomad@DB5C5EEB.5ED34291.AB610CFE.IP) (Quit: Leaving)
[22:08:53] *** Parts: a_m0d (dschoof@moz-A861BB8.coyotecorp.com) ()
[22:09:55] <jeaye> But it's not just that. FileInfo is gone.
[22:10:04] <jeaye> Man, we need "Today in Rust"
[22:12:11] *** Joins: tiffnya (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[22:13:04] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[22:13:35] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[22:15:07] <cmr> jeaye: renamed to FileStat it seems
[22:15:07] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[22:17:22] *** Parts: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP) (ERC Version 5.3 (IRC client for Emacs))
[22:18:12] *** Joins: jason_ (jason@moz-EC85D533.members.linode.com)
[22:18:42] <jeaye> cmr: Which PR did you see that in?
[22:18:56] <jeaye> FileReader is gone as well. All the ios have been moved around!
[22:18:58] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[22:24:26] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[22:24:28] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[22:24:59] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[22:25:36] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[22:25:56] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[22:26:24] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[22:27:41] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[22:28:53] *** Quits: moostik (Icedove@moz-3E868786.w90-2.abo.wanadoo.fr) (Ping timeout)
[22:28:54] *** jorendorff is now known as jorendorff_away
[22:30:14] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[22:30:19] *** Quits: Ms2ger (Ms2ger@moz-EA6EE9F3.adsl-dyn.isp.belgacom.be) (Quit: nn)
[22:31:07] <tjc> jld: ping
[22:32:00] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[22:32:31] *** Joins: moostik (Icedove@moz-3E868786.w90-2.abo.wanadoo.fr)
[22:34:20] <dbaupp> jeaye: https://github.com/mozilla/rust/pull/10179
[22:34:35] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[22:34:42] <jld> tjc: pong
[22:35:04] <tjc> jld: I'm looking at https://github.com/mozilla/rust/issues/10104
[22:35:22] <tjc> I'm wondering if it's adequate to wrap a rustc::monitor call around the body of rustpkg's main function...
[22:35:29] <tjc> or if each separate task also has to call rustc::monitor
[22:35:47] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[22:36:16] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[22:36:26] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:36:30] <jeaye> dbaupp: Hmm, I don't see FileReader referenced there.
[22:36:47] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:36:59] <jld> tjc: I'm not sure?  I don't know much about rustpkg or rustc::monitor that isn't already in that issue.
[22:37:19] <tjc> jld: Ok, I'd assumed that you knew more about it because you filed the issue :-)
[22:37:27] *** Quits: alan (alan@32702EE8.939109B2.FB082A98.IP) (Quit: alan)
[22:37:38] <jld> tjc: Sadly, no.  I ran into it trying to run tests on my enum discriminant size change.
[22:37:43] *** Quits: ianj (ianjneu@moz-7140CF01.ccs.neu.edu) (Quit: leaving)
[22:38:30] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[22:39:47] *** Joins: josh (josh@moz-22FFA53C.meeting.ietf.org)
[22:41:20] <dbaupp> jeaye: oh, maybe that was removed earlier
[22:41:59] <dbaupp> jeaye: in any case, it's now std::rt::io::File::{open, create, open_mode} for opening different file readers/writers
[22:43:21] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[22:43:34] *** Quits: josh (josh@moz-22FFA53C.meeting.ietf.org) (Quit: josh)
[22:43:37] *** Joins: josh (josh@moz-22FFA53C.meeting.ietf.org)
[22:43:55] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[22:45:27] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:45:50] *** Quits: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net) (Ping timeout)
[22:46:19] *** Joins: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net)
[22:47:10] *** Quits: moostik (Icedove@moz-3E868786.w90-2.abo.wanadoo.fr) (Ping timeout)
[22:48:01] *** Joins: moostik (Icedove@moz-3E868786.w90-2.abo.wanadoo.fr)
[22:48:07] <jeaye> dbaupp: Ah, thanks.
[22:48:18] *** Joins: sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[22:48:24] *** Quits: gandalf (zbraniecki@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: I feel so disconnected now	)
[22:49:43] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[22:50:28] *** Quits: jdm (jdm@moz-36808BF3.dsl.teksavvy.com) (Quit: Lost terminal)
[22:50:54] *** Joins: ksf (ksf@moz-1919582C.adsl.hansenet.de)
[22:52:20] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[22:52:29] *** Quits: mikezaby (mikezaby@moz-B26868E.home.otenet.gr) (Input/output error)
[22:52:56] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[22:52:56] *** ChanServ sets mode: +ao dherman dherman
[22:53:54] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[22:54:13] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[22:54:26] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[22:54:30] *** Quits: lerc (quassel@moz-2A8CFEEE.telstraclear.net) (Connection reset by peer)
[22:54:53] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[22:56:18] *** Quits: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net) (Ping timeout)
[22:56:18] *** jorendorff_away is now known as jorendorff
[22:56:37] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[22:56:42] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[22:56:58] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[22:58:33] *** Joins: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net)
[22:58:41] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[23:00:58] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[23:01:52] *** Quits: lfox (lfox@moz-861E573F.nyc.biz.rr.com) (Quit: ZZZzzz…)
[23:01:57] *** Joins: fyolnish (fyolnish@moz-36D3ED9E.uqwimax.jp)
[23:02:57] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[23:03:41] *** Quits: fyolnish (fyolnish@moz-36D3ED9E.uqwimax.jp) (Ping timeout)
[23:04:18] *** Quits: bcc (shibe@6E8FFA64.5F528A99.6CC19A90.IP) (Ping timeout)
[23:04:33] *** Quits: josh (josh@moz-22FFA53C.meeting.ietf.org) (Quit: josh)
[23:08:21] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[23:09:29] *** Joins: brianm (brianm@moz-9B7D279E.dsl.static.sonic.net)
[23:09:36] *** Joins: lerc (quassel@moz-2A8CFEEE.telstraclear.net)
[23:09:54] *** Joins: maxiepoo (Max@moz-13F4F196.nuwlan.northwestern.edu)
[23:10:21] *** Quits: CarpNet (Alasdair@moz-25C796BC.cable.virginm.net) (Quit: Leaving)
[23:14:28] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[23:14:53] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[23:18:56] *** Quits: maxiepoo (Max@moz-13F4F196.nuwlan.northwestern.edu) (Quit: maxiepoo)
[23:19:38] *** Joins: josh (josh@moz-22FFA53C.meeting.ietf.org)
[23:20:16] *** Quits: jeffcutsinger (Mibbit@moz-7E34AC5D.dhcp.roch.mn.charter.com) (Quit: http://www.mibbit.com ajax IRC Client)
[23:21:01] *** Quits: jordyd (jordyd@moz-E83171EC.seg59.ucf.edu) (Quit: Leaving)
[23:22:19] *** Quits: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com) (Quit: )
[23:22:54] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[23:23:54] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[23:23:56] *** Joins: lmandel1 (uid15702@moz-E77DEB21.irccloud.com)
[23:24:40] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[23:29:27] *** Joins: themgt (themgt@moz-83F07CDA.cm.vtr.net)
[23:29:28] *** Quits: themgt (themgt@moz-83F07CDA.cm.vtr.net) (Client exited)
[23:31:37] *** Joins: nomadic (nomadic@moz-E01D5C49.hsd1.ga.comcast.net)
[23:32:15] <cmr> I've seen "cover grammar" bandied about, but what does it actually mean?
[23:32:27] *** Quits: Palmik (palmik@moz-DEC2AB.pks.muni.cz) (Quit: Lost terminal)
[23:33:07] *** Quits: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[23:35:15] *** kimundi is now known as zz_kimundi
[23:35:21] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[23:36:31] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[23:36:42] <pcwalton> nmatsakis: were vectors going to be DSTs?
[23:36:54] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[23:37:03] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[23:37:28] *** Joins: Kruppe (user@moz-9A6FCE9E.cable.teksavvy.com)
[23:37:31] <aatch> cmr, I don't know, but if I had to guess, I'd say that its a production that exists purely to resolve some ambiguity.
[23:37:54] *** Joins: alan (alan@moz-FE02DD30.sat6.rackspace.com)
[23:38:30] *** Quits: brianm (brianm@moz-9B7D279E.dsl.static.sonic.net) (Quit: Leaving...)
[23:40:06] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[23:40:49] *** Quits: sweet_kid (Upasana@4E8A8432.CFA042E.1228A288.IP) (Quit: Leaving)
[23:41:15] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[23:42:32] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[23:45:59] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Quit: ZNC - http://znc.in)
[23:46:59] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[23:47:34] *** sam113101_afk is now known as sam113101
[23:48:23] <aatch> cmr, I found this thesis that mentions cover grammar: http://www.isi.edu/~chiang/papers/thesis.pdf
[23:48:32] <aatch> Not that I've figured out what it is...
[23:50:30] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[23:53:56] *** Quits: josh (josh@moz-22FFA53C.meeting.ietf.org) (Quit: josh)
[23:55:29] *** Quits: joelteon (joel@moz-317E8D0C.io) (Quit: bye)
[23:55:50] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[23:55:55] *** Joins: joelteon (bzzt@moz-317E8D0C.io)
[23:56:08] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[23:56:28] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[23:57:54] <mletterle> 10 files changed, 65 insertions(+), 192 deletions(-) <-- SOMEONE CRACK THE WHIP!
[23:58:10] <mletterle> coders be slacking.
[23:59:31] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[23:59:51] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[23:59:56] <dbaupp> mletterle: https://github.com/mozilla/rust/pull/10321 will make up for it :P
