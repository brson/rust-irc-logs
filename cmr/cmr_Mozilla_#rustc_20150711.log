[00:07:05] *** Joins: Rym (uid91135@moz-n2i7qm.charlton.irccloud.com)
[00:14:28] *** Quits: brson_ (brson@moz-bro.mg6.56.172.IP) (Ping timeout: 121 seconds)
[00:32:42] *** Quits: nagisa (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[01:08:09] <jroesch> eddyb: do you have feelings about `mt` arielb1 wanted to remove it, but it results in a little bit of code duplication trying to see if I should put the effort in 
[01:12:55] *** Joins: blank_na1e (blank_name@moz-ms6nj1.mi.frontiernet.net)
[01:15:04] *** Quits: blank_name (blank_name@moz-ttfeua.mi.frontiernet.net) (Ping timeout: 121 seconds)
[01:15:10] <nrc> jroesch: what would you replace it with?
[01:16:12] <jroesch> nrc: I don't really have any opinions, arielb1 commented on my renaming PR with the suggestion that we nix it
[01:16:21] <jroesch> nrc: https://github.com/rust-lang/rust/pull/26895
[01:17:32] <nrc> Oh man, that's an awesome PR!
[01:17:34] <jroesch> I started down the path but I don't feel that removing it is actually an improvement 
[01:17:37] <nrc> jroesch++
[01:17:56] <nrc> I might be wrong, but I thought we used it in quite a few places
[01:18:09] <jroesch> there approx. 120 uses if memory serves
[01:18:14] <jroesch> there are*
[01:18:43] <nrc> Passing a (Type, Mutability) might be OK, I'm not sure if that is better or worse, really
[01:19:20] <jroesch> yeah I'm kind of the opinion its not better, plus we then have to duplicate debug printing and serialization code 
[01:20:03] <nrc> https://dxr.allizom.org/rust/search?q=%2Btype-ref%3Arustc%3A%3Amiddle%3A%3Aty%3A%3Amt&offset=78
[01:20:13] <nrc> (but misses uses in macros)
[01:20:59] <nrc> I'd leave it, personally - it doesn't seem like there is a better solution
[01:21:01] <jroesch> yeah my local ack for TypeWithMutability (its rename) is 114
[01:21:06] <nrc> *strongly better
[01:21:21] <jroesch> okay what do you think about a more concise name?
[01:21:44] <nrc> TypeAndMut?
[01:21:54] <jroesch> I personally like descriptive over terse, but want to make sure other people are happy 
[01:21:55] <jroesch> yeah that works
[01:22:10] <nrc> I think Mut for Mutability is OK, given we use `mut` in the language
[01:22:38] <nrc> I agree about descriptive, but it's often a tradeoff
[01:22:47] <jroesch> the last remaining snake case name is ctxt, eddyb is going to take care of it soon which makes me excited 
[01:23:03] <nrc> especially when you're basically just describing fields of a struct :-s
[01:23:14] <jroesch> yeah I like your suggestion +1 
[01:52:32] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[02:12:51] *** Quits: kimundi (kimundi@moz-l9v88u.dtlu.8ps3.57bc.2002.IP) (Ping timeout: 121 seconds)
[02:19:34] *** Joins: kimundi (kimundi@moz-v038uj.nbov.7sqf.4fe2.2002.IP)
[02:41:30] <eddyb> nrc: doing more to ty::ctxt is blocked on '_. the changes are all there, waiting to be applied. or re-done, in like 5 minutes of automatic replaces + some minor retouching
[02:42:49] *** Quits: Rym (uid91135@moz-n2i7qm.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[02:43:34] <eddyb> oh, even this doesn't work. perfect http://is.gd/cqA9k7
[02:52:51] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[02:57:07] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Ping timeout: 121 seconds)
[03:03:35] *** Joins: brson (brson@moz-3ki2he.tmodns.net)
[03:03:35] *** ChanServ sets mode: +qo brson brson
[03:48:07] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[03:53:10] *** Quits: brson (brson@moz-3ki2he.tmodns.net) (Ping timeout: 121 seconds)
[03:54:32] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[03:59:20] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Ping timeout: 121 seconds)
[06:11:24] *** Joins: barosl (barosl@moz-tmp.qma.67.220.IP)
[06:32:56] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[07:16:19] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[07:48:54] <eddyb> pnkfelix: do you remember I tried to fix your annotation requirement for the new box desugaring? the one resulting from an expected Box<Trait> type
[07:51:29] <eddyb> pnkfelix: this error, more or less http://is.gd/yb011s
[07:52:24] <eddyb> pnkfelix: this is the solution http://is.gd/fqtNdM
[07:53:01] <eddyb> the coherence error should be easy to fix because Unsize<U> will never be implemented for U: Sized
[07:54:42] <eddyb> i.e. T: Sized + Unsize<T> should return "unimplemented" instead of "ambiguous" from selection. and I'm hoping that's enough for coherence too accept these two impls
[08:11:05] *** Joins: Tobba (Tobba@moz-oecqnu.plus.com)
[08:57:12] *** Joins: manishea1th (manishearth@moz-uc30rq.anapnea.net)
[08:58:10] *** Quits: Manishearth (manishearth@moz-uc30rq.anapnea.net) (NickServ (RECOVER command used by manishea1th))
[08:58:10] *** manishea1th is now known as Manishearth
[08:58:11] *** ChanServ sets mode: +ao Manishearth Manishearth
[09:14:46] *** Quits: Tobba (Tobba@moz-oecqnu.plus.com) (A TLS packet with unexpected length was received.)
[09:14:55] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[09:47:51] <eddyb> pnkfelix: the simple fix in traits::select is not working, will need to investigate coherence further
[10:05:47] *** Joins: nagisa (nagisa@moz-8t068g.static.zebra.lt)
[10:08:37] <eddyb> DEBUG:rustc_typeck::coherence::overlap: check_if_impls_overlap(DefId { krate: 0, node: 6 }BoxMe, DefId { krate: 0, node: 15 }T.BoxMe<Box<T>>, DefId { krate: 0, node: 33 }T.BoxMe<Box<U>>)
[10:11:39] <eddyb> traits::coherence::overlapping_impls should return false
[10:23:31] *** Joins: arielb1 (Ariel@moz-jqrrgl.red.bezeqint.net)
[10:35:31] *** Joins: Tobba (Tobba@moz-4l45on.skybroadband.com)
[10:39:46] <eddyb> nmatsakis: why would checking `T: Sized` result in ambiguity during coherence::overlap checking of `impl<T>`?
[10:41:07] <eddyb> DEBUG:rustc::middle::traits::select: evaluate_stack(Binder(<FreshTy(1) as core::marker::Sized>)) --> unbound argument, recursion -->  ambiguous
[10:41:58] <eddyb> oh, "intercrate" mode
[11:02:47] <eddyb> DEBUG:rustc::middle::traits::coherence: trait_ref_is_knowable: trait is neither local nor fundamental
[11:06:19] <eddyb> nmatsakis: I can't find anything talking about #[fundamental] and all of its implications
[11:15:12] *** Quits: stl (stl@moz-stg.7dk.15.176.IP) (Ping timeout: 121 seconds)
[11:30:17] <arielb1> eddyb: what's the problem?
[11:30:39] *** Quits: Tobba (Tobba@moz-4l45on.skybroadband.com) (A TLS packet with unexpected length was received.)
[11:30:51] <arielb1> that's evaluate_predicates_recursively giving up, by the way
[11:32:23] <arielb1> eddyb: for #[fundamental], rfc1023
[11:33:10] *** Joins: stl (stl@moz-fdc.b44.15.176.IP)
[11:38:13] *** Quits: stl (stl@moz-fdc.b44.15.176.IP) (Ping timeout: 121 seconds)
[11:51:04] <eddyb> arielb1: T: Unsize<U> should be Err(Unumplemented) not Ok(None) if U is known to be Sized, but it's not even trying to check it
[11:51:19] <eddyb> I made Unsized #[fundamental] but I need more plumbing
[11:51:20] <arielb1> eddyb: why should it be?
[11:51:59] <arielb1> do you mean $0: Unsize<$1>?
[11:52:17] <arielb1> in intercrate mode?
[11:55:48] <arielb1> eddyb: recursion --> ambiguous is just a bad log message
[11:56:51] <arielb1> eddyb: what are you trying to do?
[11:58:40] *** Joins: stl (stl@moz-al5.8pf.15.176.IP)
[12:38:02] *** Quits: arielb1 (Ariel@moz-jqrrgl.red.bezeqint.net) (Connection closed)
[14:16:26] <eddyb> DEBUG:rustc::middle::traits: type_known_to_meet_builtin_bound: ty=_ bound=Sized errors=[FulfillmentError(Obligation(predicate=Binder(TraitPredicate(<_ as core::marker::Sized>)),depth=0),Ambiguity)]
[14:16:28] <eddyb> DEBUG:rustc::middle::traits::select: assemble_candidates_for_unsizing: ambiguous
[14:16:42] <eddyb> only now it actually ran the code I added when I started this
[14:19:36] <eddyb> nmatsakis: I don't understand, why are type parameters of the impl turned into inference variables during the coherence check?
[14:20:26] <eddyb> nmatsakis: how can some predicates depend on others? I need to know if the U in <T as Unsize<U>> is Sized or not
[14:20:57] <eddyb> nmatsakis: in the impl it definitely is. or maybe I'm not seeing the right perspective here
[14:24:34] *** Quits: huon (huon@moz-hj272o.8rnv.rggd.6180.2400.IP) (Ping timeout: 121 seconds)
[14:27:06] *** Joins: huon (huon@moz-hj272o.8rnv.rggd.6180.2400.IP)
[14:27:06] *** ChanServ sets mode: +qo huon huon
[14:54:51] *** Joins: manishea1th (manishearth@moz-uc30rq.anapnea.net)
[17:33:54] *** Joins: arielb1 (Ariel@moz-jqrrgl.red.bezeqint.net)
[17:50:04] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[18:17:28] <eddyb> uh oh pub struct GenericPredicates<'tcx> { pub predicates: VecPerParamSpace<Predicate<'tcx>> }
[18:17:45] <eddyb> how does that work, one predicate per parameter?
[18:19:32] <eddyb> ahhh no, it's just using each space to store a vector of predicates, the index within a space doesn't matter
[18:27:04] *** Joins: laumann (thomas@moz-anc.lag.199.62.IP)
[18:35:12] *** Quits: doener (doener@moz-fnh.n4j.147.5.IP) (Quit: leaving)
[19:34:54] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[20:16:12] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[20:29:13] *** Quits: quantheory (quantheory@moz-pjo3s1.36gq.r6rv.0280.2601.IP) (Quit: Leaving)
[20:46:11] *** Quits: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[21:01:01] *** Quits: laumann (thomas@moz-anc.lag.199.62.IP) (Ping timeout: 121 seconds)
[21:15:56] *** Quits: arielb1 (Ariel@moz-jqrrgl.red.bezeqint.net) (Connection closed)
[21:22:27] *** Joins: laumann (thomas@moz-anc.lag.199.62.IP)
[21:26:40] *** Quits: laumann (thomas@moz-anc.lag.199.62.IP) (Ping timeout: 121 seconds)
[21:33:06] *** Parts: JustAPerson (JustAPerson@moz-un628q.moe) ("WeeChat 1.2-dev")
[21:44:10] *** Manishearth is now known as Guest1111
[21:44:10] *** manishea1th is now known as Manishearth
[23:35:46] *** Quits: barosl (barosl@moz-tmp.qma.67.220.IP) (Connection closed)
[23:36:04] *** Joins: barosl (barosl@moz-tmp.qma.67.220.IP)
[23:58:29] *** Quits: nagisa (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
