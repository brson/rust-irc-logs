[00:19:22] *** Joins: aatch (james@moz-8r6eer.orns.ubhm.e000.2406.IP)
[00:58:28] *** Quits: arielb1 (Ariel@moz-9he9ta.red.bezeqint.net) (Connection closed)
[01:41:42] *** Quits: stl (stl@moz-o9aiua.broadband.corbina.ru) (Ping timeout: 121 seconds)
[01:44:25] *** Joins: c74d3 (c74d3a4ebb6@moz-v3r8ri.mggc.hibn.4404.2002.IP)
[01:45:37] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Ping timeout: 121 seconds)
[01:46:02] *** c74d3 is now known as c74d
[01:53:11] *** Joins: stl (stl@moz-6r1bf1.broadband.corbina.ru)
[02:22:18] <nrc> how do closures get inlined?
[02:22:42] <nrc> as in fn foo(f: F) where F: ... { f();  }
[02:23:28] <nrc> when I look at the ir, f is not a variable, foo gets monomorphised to call the actual value of f, i.e., the closure def
[02:23:43] <nrc> this seems like magic, and I can't find any code that actually does this inlining
[02:55:00] *** Quits: zz_kimundi (kimundi@moz-siarqd.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:56:45] *** Joins: zz_kimundi (kimundi@moz-ch362e.dip0.t-ipconnect.de)
[02:56:46] *** zz_kimundi is now known as kimundi
[03:08:42] *** Joins: c74d3 (c74d3a4ebb6@moz-dc55cs.mggc.hibn.4404.2002.IP)
[03:09:10] *** Quits: c74d (c74d3a4ebb6@moz-v3r8ri.mggc.hibn.4404.2002.IP) (Ping timeout: 121 seconds)
[03:09:48] *** c74d3 is now known as c74d
[03:10:34] *** Quits: c74d (c74d3a4ebb6@moz-dc55cs.mggc.hibn.4404.2002.IP) (Connection closed)
[03:10:48] *** Joins: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[03:30:31] <huon> nrc: a closure call is just a call to the relevant trait method
[03:30:35] <huon> i.e. purely syntactic sugar
[03:30:43] <huon> so it gets handled just like any other trait/generic
[03:30:51] <huon> (well, modulo the calling convention stuff)
[03:31:52] <nrc> so I would expect to see ir for something like f.call or whatever the call method is called, but there is just a call to f
[03:35:32] <huon> post optimisation?
[03:36:08] <huon> (oh, maybe the autogenerated trait things may be marked inline-always?)
[03:36:16] <huon> s/may be/are/
[03:37:17] <nrc> I'm looking at the ir, not asm. Do we inline them ourselves?
[03:42:35] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[03:44:04] <huon> the IR is printed after optimisations
[03:44:34] <huon> (I believe inline-always is one of the few optimisations to run even with opt-level=0)
[03:45:02] <klutzy> yep, inline-always runs on O0
[03:45:03] <huon> I think you can use -C save-temps (iirc) to get the raw pre-optimisation IR
[03:45:20] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[03:45:26] <huon> maybe -C no-prepopulate-passes works too
[03:55:07] <nrc> cool, I'll give it a go, thanks
[04:11:53] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[04:16:09] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[04:24:12] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[04:28:27] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[05:18:21] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[05:22:37] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[06:12:29] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[06:16:47] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[06:44:33] *** Joins: quantheory (quantheory@moz-djv2du.o956.jtvf.0001.2601.IP)
[07:06:49] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[07:10:55] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[07:16:39] *** Quits: quantheory (quantheory@moz-djv2du.o956.jtvf.0001.2601.IP) (Quit: Leaving)
[07:28:43] *** Joins: Tobba (Tobba@moz-6oh.7ki.21.217.IP)
[07:46:10] *** Quits: aatch (james@moz-8r6eer.orns.ubhm.e000.2406.IP) (Connection closed)
[08:00:48] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[08:06:13] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[08:27:33] *** Joins: aatch (james@moz-is4j4r.cable.telstraclear.net)
[08:56:45] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[08:59:08] *** Joins: laumann (thomas@moz-gqpfnm.science.ku.dk)
[09:01:03] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[09:50:56] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[09:55:12] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[10:24:47] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[10:32:00] *** Quits: Tobba (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[10:45:06] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[10:49:22] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[10:52:35] *** Quits: nrc (nrc@moz-14pjgj.xtra.co.nz) (Ping timeout: 121 seconds)
[10:58:43] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Ping timeout: 121 seconds)
[11:01:01] *** Quits: JustAPerson (JustAPerson@moz-un628q.moe) (Ping timeout: 121 seconds)
[11:01:40] *** Joins: JustAPerson (JustAPerson@moz-un628q.moe)
[11:39:16] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[11:40:07] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[11:43:32] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[11:49:20] *** Quits: laumann (thomas@moz-gqpfnm.science.ku.dk) (Ping timeout: 121 seconds)
[11:51:22] *** Joins: laumann (thomas@moz-33d.hq0.225.130.IP)
[11:54:08] *** kimundi is now known as zz_kimundi
[11:59:48] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[12:21:59] *** zz_kimundi is now known as kimundi
[12:34:08] *** kimundi is now known as zz_kimundi
[12:45:24] *** zz_kimundi is now known as kimundi
[13:20:54] *** Joins: killercup (killercup@moz-723bo4.dip0.t-ipconnect.de)
[13:56:32] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[14:25:50] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[14:46:13] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[15:01:05] *** Joins: bombless (_@moz-ovk.piv.41.59.IP)
[15:11:41] *** Quits: bombless (_@moz-ovk.piv.41.59.IP) (Quit: Leaving)
[15:12:45] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[15:17:05] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[15:43:34] *** kimundi is now known as zz_kimundi
[15:44:58] <eddyb> nmatsakis: nooo
[15:45:12] <eddyb> nmatsakis: [T] is a semi-easy case. str isn't :(
[15:45:45] <eddyb> nmatsakis: also, I could see copying unsized values into new allocations being possible
[15:45:56] <eddyb> easier than clones or moves, anyways
[15:46:08] <eddyb> box *"foo" should just work
[15:46:36] *** Joins: brson (brson@moz-d18.tb2.56.172.IP)
[15:46:36] *** ChanServ sets mode: +qo brson brson
[15:47:19] <eddyb> nmatsakis: but I'm more bummed by the fact that we made it so easy to break backwards compat when removing a Sized bound from a trait
[15:47:59] <eddyb> I guess it's not limited to functions being generic over types though, default methods in subtraits are probably also affected
[15:49:04] *** Quits: laumann (thomas@moz-33d.hq0.225.130.IP) (Quit: leaving)
[15:49:38] <eddyb> nmatsakis: it's not a battle that I can afford to fight though, just another quick change I can't make
[15:54:11] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[16:04:58] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[16:05:34] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[16:10:16] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[16:14:18] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[16:34:50] *** Quits: blank_na1e (blank_name@moz-etm8up.mi.frontiernet.net) (Ping timeout: 121 seconds)
[16:41:15] *** Joins: blank_name (blank_name@moz-tmq.fli.183.192.IP)
[16:42:11] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[17:12:05] *** Quits: brson (brson@moz-d18.tb2.56.172.IP) (Connection closed)
[17:13:42] *** zz_kimundi is now known as kimundi
[17:57:34] *** Joins: arielb1 (Ariel@moz-9he9ta.red.bezeqint.net)
[18:17:36] *** Quits: blank_name (blank_name@moz-tmq.fli.183.192.IP) (Ping timeout: 121 seconds)
[18:23:58] *** Joins: blank_name (blank_name@moz-fc8n1s.mi.frontiernet.net)
[18:31:27] *** Joins: brson (brson@moz-48fqub.res.rr.com)
[18:31:28] *** ChanServ sets mode: +qo brson brson
[18:55:09] *** Quits: brson (brson@moz-48fqub.res.rr.com) (Quit: leaving)
[19:57:41] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[20:32:49] *** Quits: blank_name (blank_name@moz-fc8n1s.mi.frontiernet.net) (Ping timeout: 121 seconds)
[20:39:11] *** Joins: blank_name (blank_name@moz-7j6.fli.183.192.IP)
[21:13:40] *** Quits: arielb1 (Ariel@moz-9he9ta.red.bezeqint.net) (Ping timeout: 121 seconds)
[21:14:52] *** Joins: arielb1 (Ariel@moz-9he9ta.red.bezeqint.net)
[21:39:17] *** Quits: killercup (killercup@moz-723bo4.dip0.t-ipconnect.de) (Quit: Bye)
[22:08:33] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[22:17:17] *** Quits: doener (doener@moz-929cn9.unity-media.net) (Ping timeout: 121 seconds)
[22:24:59] *** Joins: doener (doener@moz-929cn9.unity-media.net)
[22:28:32] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[23:30:45] *** Quits: blank_name (blank_name@moz-7j6.fli.183.192.IP) (Ping timeout: 121 seconds)
[23:42:26] *** Joins: blank_name (blank_name@moz-f80.i34.36.50.IP)
[23:54:46] *** Quits: arielb1 (Ariel@moz-9he9ta.red.bezeqint.net) (Quit: Ex-Chat)
