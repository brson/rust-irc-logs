[00:00:46] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[00:01:16] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[00:02:39] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[00:02:55] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[00:02:59] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[00:02:59] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[00:03:44] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[00:05:02] *** Joins: dandy (Dandy@moz-84CC8377.hsd1.co.comcast.net)
[00:06:22] <steveklabnik> bam: https://github.com/mozilla/rust/pull/9579
[00:06:37] <steveklabnik> please go check that out everyone and bikeshed the hell out of it ;)
[00:07:08] *** Joins: erickt1 (Adium@moz-8DB1E76B.hfc.comcastbusiness.net)
[00:07:11] *** Joins: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net)
[00:08:10] <dbaupp> steveklabnik: there's no "bam" in this channel
[00:08:11] <dbaupp> :P
[00:08:14] <steveklabnik> :)
[00:09:42] <ldunn> "That's all you need to know. Your co-worker that they should have written the function like this:" - accidentally a word or two? :D
[00:09:44] <steveklabnik> there is a BUUUNCH of stuff i'm in there
[00:09:50] <steveklabnik> dammit
[00:09:53] <steveklabnik> i'm not 100% sure of
[00:09:57] <steveklabnik> ldunn: ha! good catch...
[00:10:03] <steveklabnik> i wasn't sure about that 'joke'
[00:10:13] <steveklabnik> i write like that, but I'm not 100% sure it's good
[00:10:29] *** Quits: yonran (yonran@moz-962F33EB.acuitus.com) (Ping timeout)
[00:11:02] <tiffany> cmr: it was using memory during rendering nebulas though, not just stars
[00:11:05] *** Joins: canhtak (jeremy@moz-3FFB5CDA.wl.t.ulaval.ca)
[00:11:10] <steveklabnik> fixed, thanks, ldunn 
[00:11:12] <cmr> tiffany: I didn't see that behavior.
[00:11:17] * cmr compiles with -O
[00:11:26] <tiffany> I'm compiling with --opt-level 3
[00:11:58] <cmr> Holy crap, it's like 20x faster with optimizations
[00:12:08] <tiffany> yeah it's kind of crazy
[00:12:25] <tiffany> the best part is how even with --opt-level 3, generating a 2048x2048 image takes like 5 minutes
[00:12:28] <cmr> tiffany: I didn't see it go over 50K of res.
[00:12:38] <cmr> 512x512 under valgrind with noopt took like 8 :p
[00:12:42] <tiffany> I got it to like 300mb resident
[00:12:52] <tiffany> I went afk while leaving it running and I think my system ran out of memory
[00:12:54] * cmr tries 2048
[00:12:59] <tiffany> firefox started whining that scripts weren't responding
[00:13:05] *** Joins: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net)
[00:13:06] <steveklabnik> cmr: thanks for the comments, those are on the old tutorial, but while i'm at it....
[00:13:10] <steveklabnik> might as well fix that one up right!
[00:13:29] <cmr> steveklabnik: I just went through top-bottom.
[00:13:50] <steveklabnik> yeah totoally
[00:13:53] <steveklabnik> it's 100% valid
[00:13:58] <steveklabnik> i was just confused
[00:14:05] <steveklabnik> "Why can't i find this stuff in the text?"
[00:14:13] <steveklabnik> I'm editing it all now, thanks a ton
[00:14:30] <tiffany> my system definitely ran out of memory or something, the result is all corrupted
[00:14:36] *** Quits: jstevans1 (Instantbir@moz-735D8260.washdc.fios.verizon.net) (Ping timeout)
[00:14:50] <cmr> Ok, I'm seeing it up to 128M res right now
[00:14:59] <cmr> 2 minutes in
[00:15:11] <cmr> tiffany: is this recursive?
[00:15:20] <tiffany> I don't think there's any recursion
[00:15:28] <tiffany> and it should be allocating the image buffers ahead of time
[00:15:32] <tiffany> and there's not that many of them
[00:16:26] <cmr> The max I saw it reach was ~200MB, in 177s (2048x2048)
[00:17:03] <tiffany> hm.. running this again, I think you were right about the tars
[00:17:05] <tiffany> stars*
[00:19:20] *** Joins: cdidd (cdidd@moz-C6B38DF.broadband.corbina.ru)
[00:22:21] <cmr> tiffany: is the color representing a third dimension?
[00:22:22] *** Quits: cdidd (cdidd@moz-C6B38DF.broadband.corbina.ru) (Ping timeout)
[00:22:36] *** Joins: cdidd (cdidd@moz-F09ED9F6.broadband.corbina.ru)
[00:22:43] <tiffany> alright this is eating a lot of memory
[00:23:01] <tiffany> in the middle of nebula gen
[00:23:03] <tiffany> which is odd
[00:23:05] <cmr> I'm not seeing any leaks, and memory usage is almost constant in nebula.
[00:23:09] <tiffany> oh.. could it be vec::concat()
[00:23:12] <cmr> So something weird is happening either here or there :p
[00:23:23] <tiffany> uhh..
[00:23:32] <tiffany> what do you mean colour as a third dimension?
[00:24:08] <cmr> color in the output png representing height or somesuch
[00:24:14] *** Joins: Lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net)
[00:24:20] <tiffany> no?
[00:24:22] <cmr> ok
[00:24:27] <tiffany> it's just a colour png file
[00:24:36] <tiffany> this program generates starry skyboxes
[00:25:38] <cmr> right, I've never seen a nebula with quite those colors, just wondering :p
[00:26:05] <tiffany> heh
[00:26:09] <tiffany> it looks pretty though
[00:26:18] <cmr> fsvo pretty ;)
[00:26:55] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[00:27:18] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Ping timeout)
[00:27:25] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[00:27:56] <tiffany> http://i.imgur.com/bEdFIFT.png the skybox in use
[00:28:07] <cmr> Ah, that's not so bad
[00:28:08] <steveklabnik> niiiice
[00:28:30] <SiegeLord> Aww... empty implementations are gone
[00:28:42] <cmr> SiegeLord: shouldn't be?
[00:28:49] <SiegeLord> Well... the error is... weird
[00:28:50] <cmr> should just be impl Foo for T {}; now
[00:29:04] <SiegeLord> Yes, that's what I am lamenting
[00:29:12] <dbaupp> tiffany: is that program pure rust?
[00:29:15] <SiegeLord> Although the error message speaks of just an impl A;
[00:29:18] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[00:29:21] <tiffany> no
[00:29:34] <tiffany> the program to generate the skybox is pure rust
[00:29:42] <SiegeLord> Maybe disallowing impl Foo for T; was a mistake?
[00:29:49] <tiffany> I am going to be rewriting a good portion of my engine in rust someday though
[00:29:55] <dbaupp> tiffany: ah, pretty cool nonetheless :)
[00:30:05] <dbaupp> SiegeLord: why?
[00:30:06] <tiffany> I've partially implemented its plugin loader in rust
[00:30:47] <SiegeLord> dbaupp, Because the error message doesn't match what the code is doing
[00:31:16] <tiffany> rust's C ffi is really painful to work with, unfortunately
[00:31:18] <dbaupp> SiegeLord: well, then the error message is a mistake, not necessarily disabling it.
[00:31:46] <dbaupp> tiffany: oh, really? in what way? (I've found it to be pretty nice for the few things I've used it for)
[00:32:06] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[00:32:11] <tiffany> turning rust types into * pointers is pretty painful
[00:32:19] <tiffany> a way to automatically do it would be nice
[00:32:27] <SiegeLord> dbaupp, You never know with Rust... but I can see that it was intentional from the associated issue
[00:32:42] <dbaupp> tiffany: &Foo -> *Foo is automatic I believe
[00:33:00] <dbaupp> SiegeLord: presumably one could reword the message to fix the issues?
[00:33:05] <tiffany> there's a lot of types that aren't though
[00:33:13] <tiffany> fortunately, my engine does use a lot of &-style pointers
[00:33:29] <acrichto> tiffany: passing ownership via @ and ~ to ffi * pointer is dangerous
[00:33:37] <acrichto> with ~ you have to let rust free it at some point
[00:33:42] <tiffany> yeah
[00:33:44] <acrichto> and with @ you can't properly root it with a gc
[00:34:23] <tiffany> I've upheld a policy pretty much identical to using & for parameters and returning ~s
[00:34:45] <acrichto> ffi returning ~ pointers?
[00:34:52] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[00:35:02] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[00:35:22] <tiffany> I mean, my C functions don't "keep" data after they exit, and they always rely on the caller to free things they return
[00:37:13] <acrichto> hmm, that seems ok but there is a reason that rust makes it difficult to get * from ~
[00:40:29] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[00:41:08] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[00:41:09] *** Quits: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Quit: Leaving.)
[00:41:36] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[00:42:28] <engla> tiffany: can't you let it just take the borrowed pointer from the ~?
[00:43:12] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:43:23] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[00:43:26] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:44:36] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[00:45:32] <tiffany> is there automatic casting of vectors to *?
[00:45:49] <tiffany> as_imm_buf is kind of awkward
[00:46:08] <steveklabnik> strcat: https://github.com/mozilla/rust/pull/9579 <3
[00:46:14] <steveklabnik> please give that a THOROUGH once over
[00:46:18] <engla> there is as_ptr I think?
[00:46:33] <strcat> steveklabnik: I'll look over it a bit later
[00:46:37] <Eridius> vec::raw::to_ptr()
[00:46:38] <steveklabnik> strcat: i'm pretty sure it's 99% what you told me today, but i'd love a harsh review when you have time
[00:46:38] <tiffany> no results for as_ptr
[00:46:43] <Eridius> tiffany: ^
[00:46:46] <steveklabnik> yeah take your time, it can sit there
[00:46:51] <steveklabnik> we have 3 months till 0.9 ;)
[00:47:03] <tiffany> ah
[00:47:04] <engla> Eridius: ah, that's it
[00:47:27] <jstevans> What is the "cleanup" flag on io::file_reader in 0.7?
[00:47:59] <tiffany> I guess the ffi isn't so bad then, I just was using it wrong
[00:48:06] <cmr> jstevans: FILE_reader, you mean?
[00:48:20] <jstevans> cmr: Yes
[00:48:36] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[00:49:07] <cmr> jstevans: looks like it wraps the stream in a struct that closes it on destruction.
[00:50:07] *** Quits: erickt1 (Adium@moz-8DB1E76B.hfc.comcastbusiness.net) (Quit: Leaving.)
[00:53:09] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[00:55:24] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[00:55:25] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:55:57] *** Joins: Ralith (ralith@moz-36466B9F.customer.broadstripe.net)
[00:57:09] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[00:57:42] *** Parts: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) ()
[00:57:50] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[00:58:25] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[00:59:17] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Client exited)
[00:59:43] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[01:00:59] *** Quits: steveklabnik (steveklabn@moz-A6B56C6E.lsan.ca.megapath.net) (Ping timeout)
[01:01:40] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[01:02:30] *** Joins: vk (chatzilla@F92596F.2DEF7520.EF7679FA.IP)
[01:03:03] *** Joins: msingle (Thunderbir@moz-1A29E89B.nrflva.fios.verizon.net)
[01:05:01] <cmr> dbaupp: any progress with the bencher?
[01:05:14] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[01:05:44] <dbaupp> cmr: yeah, just looking now
[01:05:52] <mcpherrin> Does converting ~[u8] to str enforce utf-8 using the shortest encoding?
[01:06:03] <cmr> mcpherrin: what do you mean shortest encoding?
[01:06:14] <Eridius> mcpherrin: I believe the answer is yes, now
[01:06:15] <dbaupp> cmr: (as in, i literally just sat down an ssh'd into the computer)
[01:06:17] <Eridius> I don't think it used to
[01:06:23] <cmr> heh
[01:06:26] <mcpherrin> cmr: You can encode a unicode codepoint in utf-8 multiple ways. Only the shortest should be valid
[01:06:28] <Eridius> cmr: it's possible to have overlong encodings of codepoints in utf-8
[01:06:32] *** Joins: ryeguy (ryeguy@9C569A0.5D1143CD.E8644521.IP)
[01:06:35] <cmr> overlong encoding are denied now.
[01:06:36] <dbaupp> cmr: "rust: task failed at 'time is formatted wrong: missing user', /home/huon/rust/src/libstd/option.rs:350" there's the problem :P
[01:06:38] <SiegeLord> Hmm... is it possible to have an empty struct that cannot be constructed outside its crate?
[01:06:47] <SiegeLord> Or am I going to have to add a dummy private field?
[01:06:55] <Eridius> SiegeLord: what if the struct is private?
[01:06:55] <dbaupp> SiegeLord: dummy private field
[01:07:08] <cmr> SiegeLord: priv struct works, you can still return it.
[01:07:08] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[01:07:12] <SiegeLord> Eridius, Then I won't be able to name it
[01:07:15] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Connection reset by peer)
[01:07:16] *** Joins: nejucomo1 (Adium@moz-434492BB.dsl.static.sonic.net)
[01:07:23] * dbaupp uses `Foo { priv make_this_nonconstructable: () }`
[01:07:35] <mcpherrin> rusti: let overlong_euro = ~[0xF0, 0x82, 0x82 0xAC]; overlong_euro.to_str()
[01:07:36] <SiegeLord> Oh, () is 0 size right?
[01:07:37] -rusti- <anon>:7:48: 7:52 error: expected `,` but found `172`
[01:07:38] -rusti- <anon>:7          let overlong_euro = ~[0xF0, 0x82, 0x82 0xAC]; overlong_euro.to_str()
[01:07:38] -rusti-                                                          ^~~~
[01:07:38] -rusti- application terminated with error code 101
[01:07:42] <Eridius> rusti: mod foo{ struct Bar; fn bar() -> Bar { Bar } } let f = foo::bar(); f
[01:07:43] -rusti- <anon>:7:64: 7:72 error: unresolved name `foo::bar`.
[01:07:43] -rusti- <anon>:7          mod foo{ struct Bar; fn bar() -> Bar { Bar } } let f = foo::bar(); f
[01:07:43] -rusti-                                                                          ^~~~~~~~
[01:07:43] <strcat> SiegeLord: yes, as are unit structs
[01:07:44] -rusti- error: aborting due to previous error
[01:07:46] -rusti- application terminated with error code 101
[01:07:49] <Eridius> rusti: mod foo{ struct Bar; pub fn bar() -> Bar { Bar } } let f = foo::bar(); f
[01:07:52] -rusti- main::foo::Bar
[01:08:14] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Client exited)
[01:08:24] <strcat> rusti: pub struct Foo { priv private: () } std::sys::size_of::<Foo>()
[01:08:25] -rusti- 0u
[01:08:38] <dbaupp> cmr: ha, $ cat time.txt ==> <html><head><title>404 Not Found</title></head>...
[01:08:40] <Eridius> rusti: mod foo{ struct Bar; pub fn bar() -> Bar { Bar } } fn baz(f: foo::Bar) { printfln!(f) } baz(foo::bar())
[01:08:40] <strcat> rusti: std::sys::size_of::<[(), ..10000]>()
[01:08:41] -rusti- <anon>:7:70: 7:78 error: use of undeclared type name `foo::Bar`
[01:08:41] -rusti- <anon>:7          mod foo{ struct Bar; pub fn bar() -> Bar { Bar } } fn baz(f: foo::Bar) { printfln!(f) } baz(foo::bar())
[01:08:44] -rusti-                                                                                ^~~~~~~~
[01:08:47] -rusti- error: aborting due to previous error
[01:08:49] -rusti- application terminated with error code 101
[01:08:50] -rusti- error: internal compiler error: unexpected failure
[01:08:52] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[01:08:54] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[01:08:57] -rusti- 0u
[01:08:59] <dbaupp> cmr: (I clearly need to handle this whole thing better :P )
[01:09:01] <SiegeLord> XD
[01:09:11] <strcat> rusti: std::sys::size_of::<[(), ..10000]>()
[01:09:12] -rusti- 0u
[01:09:12] *** Joins: MrOrdinaire (Mibbit@6BA65136.A607747.FD383126.IP)
[01:09:33] <SiegeLord> Now that's a lot of nothing
[01:09:45] <mcpherrin> rusti: let overlong_euro = ~[0xF0, 0x82, 0x82, 0xAC]; std::str::from_bytes(overlong_euro)
[01:09:46] -rusti- <anon>:7:56: 7:76 error: unresolved name `std::str::from_bytes`.
[01:09:46] -rusti- <anon>:7          let overlong_euro = ~[0xF0, 0x82, 0x82, 0xAC]; std::str::from_bytes(overlong_euro)
[01:09:46] -rusti-                                                                  ^~~~~~~~~~~~~~~~~~~~
[01:09:46] -rusti- error: aborting due to previous error
[01:09:47] -rusti- application terminated with error code 101
[01:09:54] <mcpherrin> eh, did from_bytes go somewhere ?
[01:10:05] <strcat> from_utf8
[01:10:08] <cmr> mcpherrin: from_utf8
[01:10:31] *** Joins: bd (bd@moz-255B7184.cm-5-3c.dynamic.ziggo.nl)
[01:10:42] <mcpherrin> okay, thanks.  And yes, rust rejects that encoding
[01:10:43] <mcpherrin> thanks
[01:10:53] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[01:10:57] <engla> yeah we fixed that
[01:10:59] <engla> :)
[01:11:21] <vk> Hey, I've added some documentation to std::num, anything I should do before making a pull request?
[01:11:21] <strcat> rejects surrogates too now
[01:11:41] <cmr> vk: run `make tidy`, at the very least.
[01:11:44] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[01:11:57] <dbaupp> vk: and run `make docs` and look at the output to make sure it's sane :)
[01:11:57] <vk> cmr: ah, thanks.
[01:12:15] <dbaupp> (it gets put into doc/{std,extra} iirc)
[01:12:26] *** Joins: steveklabnik (steveklabn@90E4D93F.93EC364C.1C63AAF3.IP)
[01:12:35] <mcpherrin> strcat: when using rusti in private message mode, could it maybe allow more lines of output before pastebinning?  "pastebinned 2 lines of output" seems silly when it prints 5 lines for an error
[01:12:58] <vk> dbaupp: aye, did that. is there a way to update docs for a single file instead of generating docs for everything?
[01:13:04] <Eridius> well crud. mismatched types: expected `&str` but found `&str` (lifetime mismatch)
[01:13:14] <strcat> mcpherrin: yeah I could alter that
[01:13:20] <dbaupp> vk: probably not
[01:13:23] <Eridius> when constructing ["foo", some_str_slice, some_str.as_slice()]
[01:13:27] <vk> dbaupp: :(
[01:13:34] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[01:13:48] <MrOrdinaire> hi, in rt tests, I cannot `use libc;` to use functions like `libc::kill` or values like `libc::SIGTERM`. It says cannot find `kill` in libc. Could someone please point me to a fix?
[01:14:54] <Eridius> MrOrdinaire: what platform are you own?
[01:14:56] <Eridius> err on
[01:15:49] <MrOrdinaire> Eridius: linux x64
[01:17:22] <tiffany> hm.. is vec::concat expensive for 2^24 elements?
[01:17:24] <Eridius> hrm it should be there
[01:17:30] <tiffany> er, 2^22
[01:17:35] <Eridius> tiffany: that's a lot of elements...
[01:17:38] <MrOrdinaire> Eridius: the error is reported when I do `make check`
[01:17:51] *** Quits: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[01:18:03] <engla> tiffany: I think it's inefficient
[01:18:10] <tiffany> the reason I have so many is because I have a function that creates an image by-pixel, and I use concat() to flatten the pixels
[01:18:28] <engla> tiffany: as in, you can implement a better version of concat in 2 minutes
[01:18:28] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[01:18:37] *** Quits: steveklabnik (steveklabn@90E4D93F.93EC364C.1C63AAF3.IP) (Ping timeout)
[01:18:44] <cmr> doomlord_: there's a question in #rust-gamedev you might be able to help with: https://botbot.me/mozilla/rust-gamedev/msg/6428368/
[01:19:02] <dbaupp> engla: in what way? (does concat still check and reserve the appropriate amount?)
[01:19:10] <tiffany> ah.. I just realized, I can use flat_map
[01:19:27] <tiffany> oh, right
[01:19:30] <tiffany> it's not a map, it's a from_fn
[01:19:32] <engla> it looks like vec concat does not check the size beforehand, and it clones each subvector separately before concating
[01:19:44] <dbaupp> really o_O
[01:20:04] <Eridius> engla: eww
[01:20:28] <engla> ok I can try to fix that
[01:20:29] <dbaupp> err, what o_O  fn concat_vec(&self) -> ~[T] {        self.flat_map(|inner| (*inner).clone())    }
[01:20:44] <tiffany> that is probably what was eating 300mb of memory before
[01:20:45] * dbaupp is 100% sure this was pessimised recently
[01:20:47] <engla> it only requires naive code to be ebtter than the current impl
[01:20:53] <cmr> hahah
[01:21:03] *** Joins: steveklabnik (steveklabn@90E4D93F.93EC364C.1C63AAF3.IP)
[01:21:05] <steveklabnik> just curious
[01:21:18] <tiffany> I'm surprised I didn't notice that a 2048x2048 texture would use 2^24 4-element vectors
[01:21:23] <tiffany> 3-element*
[01:21:25] <steveklabnik> ... oh, apparently I got disconnected. did my comment about PEPs come througH?
[01:21:32] <dbaupp> steveklabnik: nop
[01:21:33] <dbaupp> e
[01:21:37] <cmr> steveklabnik: no
[01:21:44] <steveklabnik> did anything ever happen about the governance model discussion?
[01:21:47] <steveklabnik> like PEPs?
[01:21:51] <cmr> not to my knowledge.
[01:22:06] <steveklabnik> just thinking about it today, that's all.
[01:22:40] *** Quits: nejucomo1 (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[01:23:07] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[01:23:26] <dbaupp> cmr: eurgh, you're making my life hard with this lack of time.txt :P
[01:23:48] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[01:23:49] <cmr> dbaupp: can't you just... comment out every mention of it?
[01:24:14] <dbaupp> cmr: well, kinda-maybe
[01:24:17] <Eridius> time.txt?
[01:24:22] <cmr> Eridius: data for irfy
[01:24:23] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[01:24:28] <cmr> http://octayn.net/benches
[01:24:32] <dbaupp> cmr: but then I have to conjure up timing info for the top graph
[01:24:49] <cmr> dbaupp: use the time from the json?
[01:25:03] <dbaupp> cmr: yeah, working on it
[01:26:16] <cmr> dbaupp: also, one easy way to fix the lining-up of the passes is to make the first pass start where the memory usage becomes  > 0
[01:26:55] <dbaupp> cmr: will that work?
[01:27:04] <dbaupp> (i.e. is that the problem?)
[01:27:22] <cmr> dbaupp: it's not the full problem, but it'd help
[01:27:48] <mcpherrin> strcat: much love
[01:27:53] <dbaupp> cmr: ok, I'll experiment (at some point)
[01:28:51] *** Quits: bd (bd@moz-255B7184.cm-5-3c.dynamic.ziggo.nl) (Quit: Leaving)
[01:28:54] *** Quits: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[01:29:15] *** Quits: msingle (Thunderbir@moz-1A29E89B.nrflva.fios.verizon.net) (Ping timeout)
[01:29:15] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[01:31:18] <acrichto> steveklabnik: I'd be up for helping to make a mutability tutorial for sure
[01:31:56] <steveklabnik> acrichto: awesome
[01:32:08] <steveklabnik> basically, if you can give me a TL;DR of what you said in that ticket, i can turn it into something bigger
[01:32:24] <acrichto> about mutability?
[01:32:25] <steveklabnik> i am a machine that asks simpleminded questions and turns them into docs. :)
[01:32:28] <steveklabnik> yes.
[01:32:49] <acrichto> basically @mut needs to be mentioned and its existence must be justified
[01:32:51] <acrichto> along with &mut
[01:32:53] <steveklabnik> why the certain combinations don't exist, when to use mutable stuff before not
[01:32:57] <acrichto> and then an explanation of why ~mut doesn't exist
[01:33:13] <acrichto> oh well ~mut doesn't exist because it inherits mutability
[01:33:27] <acrichto> @mut exists to create mutable gc boxes (no one owns them so you can't inherit)
[01:33:35] <acrichto> and &mut exists to indicate a mutable borrowed pointer
[01:33:44] <acrichto> you can create  &mut from @mut or ~ in a mutable location
[01:33:51] <Luqman> acrichto: speaking of which, i don't think we'll be able to make phase_3 take the session by ref instead of value :(
[01:33:54] <acrichto> mutability is inherited through a structure and stops at & and @ boundaries
[01:34:00] <strcat> acrichto: I think the tutorial should cover it
[01:34:02] <strcat> it already does
[01:34:04] * steveklabnik types 'git checkout master; git checkout -b mutability_tutorial' ;)
[01:34:09] <strcat> if something is wrong with it we should fix it
[01:34:16] <acrichto> oh I just wnated to make sure it was there
[01:34:18] <dbaupp> acrichto: (or mut stack variable)
[01:34:21] <acrichto> I haven't read the tutorials in awhile
[01:34:24] <acrichto> Luqman: how come?
[01:34:35] <strcat> I think the tutorial and manual eventually need to cover every detail of the language
[01:34:46] <steveklabnik> i am 50% on board
[01:34:48] <strcat> with only library features having separate tutorials (tasks, iterators)
[01:34:53] <steveklabnik> i think the tutorial should teach you how to program in rust.
[01:35:04] <steveklabnik> it shouldn't focus on every last detail
[01:35:09] <Luqman> acrichto: because the type context wants a session and we can't really give it & cause it's @
[01:35:25] <SiegeLord> Hmm... something changed with resolving of private modules
[01:35:34] <acrichto> Luqman: hmm that's a good point
[01:35:38] <steveklabnik> topic guides can explain a topic in particular detail, and then we have a formalish semantics document that has EVERYTHING
[01:35:46] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Quit: Leaving.)
[01:35:47] <acrichto> Luqman: that would be an absolutely massive change to not require tcx to be @
[01:35:55] <Luqman> and changing ty::ctxt to using & involes also getting rid of @mut Block which i don't think is possibly without a massive rewrite
[01:35:59] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[01:36:01] <SiegeLord> rusti: pub mod A { mod B { fn foo(){} } } use A::B;
[01:36:02] -rusti- <anon>:7:44: 7:53 error: `use` and `extern mod` declarations must precede items
[01:36:02] -rusti- <anon>:7          pub mod A { mod B { fn foo(){} } } use A::B;
[01:36:02] -rusti-                                                      ^~~~~~~~~
[01:36:02] -rusti- error: aborting due to previous error
[01:36:02] -rusti- application terminated with error code 101
[01:36:16] <SiegeLord> rusti: use A::B; pub mod A { mod B { fn foo(){} } }
[01:36:17] -rusti- pastebinned 8 lines of output: http://sprunge.us/MVcY
[01:36:22] <acrichto> steveklabnik: if this stuff is already in the tutorial, then it's probably not too necessary, or perhaps it could be extracted in its own tutorial and have more explained?
[01:37:13] <strcat> mutability is simple and core enough for the tutorial to cover it
[01:37:15] <strcat> imo
[01:37:24] *** Quits: steveklabnik (steveklabn@90E4D93F.93EC364C.1C63AAF3.IP) (Ping timeout)
[01:37:39] *** Joins: steveklabnik (steveklabn@90E4D93F.93EC364C.1C63AAF3.IP)
[01:37:41] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[01:37:53] <steveklabnik> ... wow, apparently this wifi is bad
[01:37:58] <strcat> all wifi is
[01:37:59] <steveklabnik> i dont think it should come OUT of the tutorial
[01:38:07] <steveklabnik> the tutorial provides the basics, its own covers everything
[01:38:23] <strcat> but what advantage mutability stuff is there?
[01:38:25] <strcat> er
[01:38:29] <strcat> advanced*
[01:38:33] <steveklabnik> mutability is really important to rust; immutable by default and no mutable state across task boundaries (without the few exceptions) are key
[01:38:35] <strcat> it explains ownership, etc.
[01:38:39] <steveklabnik> how and when to use what kind of mutability
[01:39:05] <strcat> I think it's too intertwined with everything else to be a tutorial
[01:39:10] <strcat> it's not a separate topic from ownership
[01:39:15] <strcat> ownership == control over mutability
[01:39:19] <cmr> yeah
[01:39:50] <SiegeLord> Does this look like a bug: https://gist.github.com/SiegeLord/6737479 ?
[01:40:19] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[01:40:36] <cmr> SiegeLord: it is a bug, yes.
[01:40:56] <cmr> well
[01:41:03] <cmr> currently awaiting definition of our privacy rules.
[01:41:12] <cmr> but for the current consensus, yes :p
[01:41:26] <acrichto> I need to work more on that patch
[01:41:33] <acrichto> hopefull I can get something together for the meeting
[01:41:44] *** Quits: tefter (tefter@B5D119DC.B856A0A1.73804765.IP) (Ping timeout)
[01:42:31] <SiegeLord> Ok... I guess I'll just import the items I need from within those modules
[01:44:28] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:45:33] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[01:46:18] <cmr> So, IDNA's ToASCII operation takes a sequence of code points as input. Should I use &[char], or &str?
[01:47:18] *** Quits: vk (chatzilla@F92596F.2DEF7520.EF7679FA.IP) (Connection reset by peer)
[01:48:42] <Jesse> Iterator<char>
[01:48:51] <dbaupp> cmr: does it handle utf8, or pure code points?
[01:48:58] <cmr> dbaupp: pure code points
[01:50:00] <Eridius> it should take Iterator<char> and return an Iterator<char>
[01:50:08] <Jesse> although you might be able to optimize str->str better by hand
[01:51:03] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Quit: Leaving)
[01:51:29] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:51:54] <Jesse> meh, do it Iterator<char> -> Iterator<char> and teach the optimizer how to optimize that kind of thing in general
[01:51:58] <cmr> heh
[01:52:22] <cmr> I'm not sure I really want to be implementing punycode with an iterator...
[01:52:56] <dbaupp> well the &[char]
[01:52:58] <dbaupp> *then
[01:53:00] <strcat> LLVM isn't going to optimize out unicode decoding and encoding no matter what you do
[01:53:17] <strcat> unless you don't use the result...
[01:53:26] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[01:54:05] <Jesse> can you give LLVM hints? like plz fastpath c<128
[01:54:21] <steveklabnik> Jesse: yes, I believe llvm does support the plz directive. ;) :)
[01:54:23] <steveklabnik> that'd be hilarious
[01:54:28] *** Joins: peloverde (uid11279@moz-5F4AA75A.irccloud.com)
[01:54:29] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten)
[01:54:40] <steveklabnik> plz fastppath c<128 kthanxbai
[01:54:47] <engla> the str -> char iterator could be much more efficient
[01:55:11] *** Quits: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[01:55:19] <strcat> the iterators themselves will get optimized out
[01:55:29] <engla> well I'm thinking of the decoding
[01:55:43] <engla> that's actually in char_range_at in the current implementation
[01:55:45] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[01:55:45] *** ChanServ sets mode: +ao brson brson
[01:55:53] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[01:57:11] <dbaupp> steveklabnik, Jesse: it does have an `expect` directive (http://llvm.org/docs/BranchWeightMetadata.html#built-in-expect-instructions), but it's easy to abuse
[01:57:25] <steveklabnik> llvm is so awesome
[01:57:34] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[01:57:39] <strcat> you really don't want to use branch hints
[01:57:42] <cmr> It's not branch prediction though
[01:58:19] <strcat> it's useful if the case *never* happens except in an error condition where you're bailing out anyway
[01:59:06] <strcat> otherwise it will probably over-pessimize it
[01:59:07] <dbaupp> do we mark the assert branch like that?
[01:59:13] <dbaupp> (do we need to?)
[01:59:27] <strcat> fast paths don't have asserts, or at least they shouldn't
[01:59:30] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[01:59:31] *** Joins: froydnj (nfroyd@moz-DB4A9C19.scl3.mozilla.com)
[01:59:39] <strcat> fail!() can't be in a fast path
[01:59:45] <strcat> or in the same function
[02:00:17] <dbaupp> doesn't mean that we can't make assert as fast as possible (assuming that expect would make a different at all)
[02:00:50] <strcat> as fast as possible means not macros
[02:00:55] <strcat> so they don't bloat the call site
[02:01:05] <Jesse> fn what_now(j: bool) { if j { fail!() } else { fail!() } }
[02:01:40] <strcat> the failure functions could be marked as cold
[02:01:48] <strcat> the problem is really the code bloat
[02:02:04] <strcat> + if a function may fail, it's not going to be optimized well anymore all the way up
[02:02:32] <engla> so many functions in libstd can fail though
[02:02:38] <ryeguy> say you have "fn foo() -> Obj" and then you have "let foo = ~foo()" - is Obj copied, ever?
[02:02:45] <strcat> engla: yeah and libstd is really slow
[02:02:48] <engla> including vector bounds check
[02:03:02] <steveklabnik> ryeguy: no
[02:03:03] <strcat> vectors should have methods returning Option as an alternative
[02:03:14] <dbaupp> ryeguy: it may be copied inside foo, but it should be placed into the ~ box without a copy
[02:03:27] <steveklabnik> at least, according to what strcat told me earlier ;)
[02:03:36] <strcat> I posted the IR
[02:03:43] <ryeguy> i actually saw strcat's post, thats why i was asking :D
[02:03:45] <ryeguy> on reddit
[02:03:47] <strcat> #[inline(never)]
[02:03:49] <strcat> fn foo() -> (int, int, int, int) {
[02:03:51] <strcat>     (5, 5, 5, 5)
[02:03:53] <strcat> }
[02:03:55] <strcat>     let xs = ~foo();
[02:04:08] <strcat> http://ix.io/8gf
[02:04:08] *** Joins: vk (chatzilla@F92596F.2DEF7520.EF7679FA.IP)
[02:04:11] <strcat> writes it directly into it
[02:04:13] <engla> ryeguy: so you came here to have strcat confirm it?
[02:04:14] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[02:04:16] <engla> ^^
[02:04:18] <strcat> ;p
[02:04:22] <steveklabnik> ahha
[02:04:22] <ryeguy> no, i just wanted clarification
[02:04:52] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:04:57] <ryeguy> the post said "Returning a large value is done with an output pointer" which makes it sound like "sometimes"
[02:05:09] <strcat> it's always done with an output pointer if it's large
[02:05:16] <strcat> there's not a practical alternative way to return it
[02:05:18] <ryeguy> so small ones can still be copied?
[02:05:25] <strcat> yes, because it's faster
[02:05:26] *** Quits: vk (chatzilla@F92596F.2DEF7520.EF7679FA.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 24.0/20130911164256])
[02:05:33] <strcat> clang draws the boundary on x86_64 as 2 words
[02:05:35] <engla> strcat: "returning Option as an alternative" -> RandomAccess trait for vector and iterators?
[02:05:48] <ryeguy> gotcha - i was more trying to figure out if this is how it always behaves, or if its an optimization
[02:06:00] <strcat> ryeguy: it uses an output ptr as part of the ABI
[02:06:03] <strcat> just out of necessity
[02:06:05] <strcat> C does too
[02:06:59] <strcat> and it allocates the ~ ptr before initializing it
[02:07:01] <strcat> so if you do ~foo()
[02:07:09] *** Joins: msingle (Thunderbir@moz-1A29E89B.nrflva.fios.verizon.net)
[02:07:10] <strcat> ~ is allocated, then it passes the output ptr is
[02:07:14] <strcat> er
[02:07:16] <strcat> s/is/in/
[02:07:47] *** Quits: MauricioC (mauricioc@moz-2CFCD404.impa.br) (Ping timeout)
[02:08:01] <ryeguy> so is the threshold for when to use an output pointer smarter then i am? is it ever worth it to return a pointer instead of the value itself
[02:08:10] <strcat> no, you never want to return ~
[02:08:19] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[02:08:24] <cmr> ryeguy: never ever return a pointer: it reduces flexibility in the caller.
[02:08:27] <strcat> use ~ when you have a recursive data structure, or want to actually use dynamic dispatch via ~Trait rather than generics
[02:08:33] <ryeguy> i can see that now
[02:08:54] <ryeguy> thanks
[02:09:06] *** Quits: MrOrdinaire (Mibbit@6BA65136.A607747.FD383126.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:09:54] *** Quits: mark_edward (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Client exited)
[02:10:18] *** Quits: steveklabnik (steveklabn@90E4D93F.93EC364C.1C63AAF3.IP) (Ping timeout)
[02:12:14] <strcat> ryeguy: C++'s problem before C++11 is that it used the copy constructor by default (rust doesn't have those), and even now it has to call the move constructor in the worst case
[02:12:21] <strcat> so that taught people to not return by-value
[02:12:50] <tiffany> okay... this seems to be slower using a with_capacity vector and pushing elements instead of concat()
[02:13:09] <tiffany> I'm not sure what the best way to do this is
[02:13:10] <strcat> tiffany: the vector impl is not very good atm
[02:13:22] <strcat> I have a saner one posted on the bug tracker that will probably replace it
[02:14:01] <dbaupp> tiffany: code?
[02:14:16] <strcat> concat probably cheats and uses copy_memory internally to avoid the slow push fn :s
[02:14:42] <dbaupp> strcat: it doesn't
[02:14:55] <dbaupp> fn concat_vec(&self) -> ~[T] {        self.flat_map(|&inner| inner.to_owned())    }
[02:14:55] <tiffany> https://github.com/tiffany352/skybox-gen/blob/master/skybox.rs#L60 original
[02:15:14] <dbaupp> strcat: it used to do that and was pretty fast, but now it's horrible. :(
[02:15:22] <strcat> from_fn cheats.
[02:15:30] <tiffany> the one I tried: http://pastebin.ca/2459314
[02:15:46] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[02:16:02] <tiffany> I heard concat was really slow
[02:16:06] <tiffany> it seems to use a lot of memory
[02:16:14] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[02:16:25] <engla> here is a new concat_vec https://gist.github.com/anonymous/e8459e384e1e378c2dea
[02:16:29] <strcat> tiffany: the current vectors are really slow
[02:16:29] <tiffany> I haven't tested to make sure this is the case, but the part of the program where concat() runs uses 300mb of memory
[02:16:31] <strcat> as a whole ;p
[02:17:03] <dbaupp> engla: PR!
[02:17:14] <tiffany> whatever it is, I can't imagine concatenating 2^22 vectors is very efficient
[02:17:38] <SiegeLord> Is there any way I could get this to work: https://gist.github.com/SiegeLord/6737708 ?
[02:17:44] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (No route to host)
[02:17:51] <engla> dbaupp: do you think it's good enough?
[02:18:04] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[02:18:05] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[02:18:42] *** Joins: doomrobo (doomrobo@moz-C0E21A2B.nyc.res.rr.com)
[02:18:50] <strcat> test bench::push_preallocated ... bench: 8645 ns/iter (+/- 1916)
[02:18:52] <strcat> test bench::push_preallocated_std ... bench: 85728 ns/iter (+/- 21092)
[02:19:02] <strcat> 1st is a fresh implementation
[02:19:04] <strcat> 2nd is the stdlib
[02:19:13] <strcat> pushing 10k elements to a preallocated vector
[02:19:15] <strcat> so yeah.
[02:19:20] <doomrobo> Hey peeps. Can someone please explain what the first section in this doc is saying? I don't understand what anything has to do with something being called more than once: https://github.com/mozilla/rust/wiki/Doc-under-construction-FAQ
[02:20:09] <dbaupp> engla: it's a million* times better than the current implementation (*terms and conditions apply)
[02:21:01] <engla> right. simple code worked fine for the corresponding methods for str..
[02:21:03] <dbaupp> engla: you could put in a `if sep.is_empty() { self.concat_vec() }` optimisation too.
[02:21:13] <dbaupp> (for connect)
[02:21:13] <engla> oh yeah right
[02:21:23] <engla> no wait, the sep is just an element
[02:21:34] <engla> for the vector case
[02:21:37] <dbaupp> oh, different to str
[02:21:43] <SiegeLord> I kind of wish there was a separate 'crate' visibility
[02:22:03] <SiegeLord> That'd simplify all these hoops I'm jumping through...
[02:22:03] <dbaupp> SiegeLord: it's changing https://github.com/mozilla/rust/issues/8215
[02:22:14] <Eridius> doomrobo: what don't you understand?
[02:22:29] <Eridius> doomrobo: if the closure moves a value out of its environment, and the closure is called twice, then it will be accessing an already-moved value, which is invalid
[02:23:16] <doomrobo> Eridius: once the closure terminates, though, why can't it give ownership back to the calling function?
[02:23:45] <Eridius> doomrobo: what do you mean? the value has already been moved out of the environment. There's nothing to give back
[02:23:55] <dandy> are there any frequent windows builds?
[02:24:09] <dbaupp> dandy: not ones that are easily accessible
[02:24:21] <doomrobo> Eridius: I just can't wrap my head around this...
[02:24:56] <noct> hmm
[02:25:02] <noct> "error: Couldn't find package std", anyone?
[02:25:33] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: My lid went down)
[02:25:34] <dandy> noct: recently yet
[02:25:38] <dandy> yes*
[02:25:46] <doomrobo> Eridius: would you say that chan.send is given ownership of ~message in the closure?
[02:25:48] <dandy> I needed to have everythig in the bin folder for it to work
[02:25:58] <SiegeLord> dbaupp, Won't really fix the hoops... might fix the bug in my gist though
[02:26:12] <Eridius> doomrobo: yes
[02:26:25] <dandy> ex: /folder/orange/rustc.exe ... nope .... /folder/bin/rustc.exe ... yup
[02:26:34] <Eridius> doomrobo: the problem is the closure tries to move the value of `message` out of its environment in order to pass it to `chan.send()`, but it can't
[02:26:43] <dbaupp> SiegeLord: ok (I don't really know more, I can just link to bugs :P )
[02:27:17] <Eridius> doomrobo: the fact that it's using chan.send() isn't important. The important fact is it has to move message out of its environment
[02:27:20] <noct> dandy: hmm, so you copy rustc into /projectname/bin?
[02:27:24] <doomrobo> Eridius: I think I see it now. I'm imagining MOVING message into the function. Once it's moved, it's gone. Only unless I make it shared or make copies of it would I be able to do such a thing more than once
[02:27:25] <dandy> no
[02:27:27] <doomrobo> is that about right?
[02:27:42] <Eridius> doomrobo: that's an acceptable summary
[02:27:52] <SiegeLord> dbaupp, Have you ever seen the specific bug I'm hitting? I'm thinking of whether or not to submit an issue...
[02:27:56] <doomrobo> great, now I have to figure out how to make my code work :P
[02:28:01] <doomrobo> thanks Eridius
[02:28:02] <dandy> for me C:\program files\rust\bin .  C:\program files\rust won't work, it seems as if it must be in a folder (any folder) named bin to find std
[02:28:29] <dandy> as if it finds bin using ../bin/std
[02:28:36] <dandy> err, finds std
[02:28:39] <noct> ah
[02:28:46] <noct> weird
[02:28:49] <dandy> YES
[02:28:52] <noct> I have it in C:\rust\bin
[02:28:53] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[02:29:17] <dandy> I also used that same directoy C:\rust\bin and it worked for me
[02:29:22] <dandy> but C:\rust did not :)
[02:29:56] <dandy> so if thats not your problem then I havn't run into it yet
[02:29:58] <engla> dbaupp: https://github.com/mozilla/rust/pull/9583 r?
[02:30:05] <dbaupp> SiegeLord: this one https://gist.github.com/SiegeLord/6737708 ?
[02:30:20] <SiegeLord> dbaupp, Yeah
[02:30:22] <dandy> noct: where did you get your rust from?
[02:30:30] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[02:30:49] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[02:30:50] <noct> dandy: latest installer
[02:30:54] <dbaupp> SiegeLord: yeah, I don't think you can do a plain `impl` in a different module (e.g. it causes https://github.com/mozilla/rust/issues/9052 too)
[02:31:02] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[02:31:04] <dbaupp> SiegeLord: possibly worth filing a bug
[02:31:06] <dbaupp> engla: looking
[02:31:18] <noct> I had problems building 0.7 on my box; couldn't get it to ./configure w/ the recommended gcc
[02:31:18] <cmr> I can setup a windows 8 vm to build rust nightlies, would people like that?
[02:31:26] <noct> cmr: OMG YES
[02:31:55] <cmr> k'
[02:32:01] <dandy> cmr please! it takes me ~2 ours to build + I have to do the DLL copy because i have gcc4.8
[02:32:25] <strcat> how does it take 2 hours to build? :s
[02:32:27] <dbaupp> engla: benchmarks, btw?
[02:32:29] <SiegeLord> dbaupp, That's something else... that particular bug has a workabout, luckily
[02:32:36] <dandy> strcat, I have no ide
[02:32:38] <dbaupp> strcat: llvm + no ccache?
[02:32:46] <SiegeLord> Although as soon as you go beyond that code, you'll hit my bug next
[02:32:49] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[02:32:55] <SiegeLord> I'll comment and make a new bug
[02:32:55] <dandy> definitely lots of LLVM though
[02:33:00] <strcat> dbaupp: my repo does that every day and it does an i686 and x86_64 package in an hour afaict
[02:33:06] <strcat> serially
[02:33:17] <dbaupp> SiegeLord: I know it's something else, I was just pointing out that the impls like that are buggy
[02:33:25] <SiegeLord> dbaupp, Yep
[02:33:33] <dbaupp> strcat: oh, ok. (and I guess the buildbots do something similar)
[02:34:03] <strcat> the rust part takes ~15 mins?
[02:34:13] <strcat> if you don't have the rt stuff built already
[02:34:45] <dandy> I think its mostly LLVM
[02:35:01] <dbaupp> dandy: how much memory do you have?
[02:35:05] <dandy> 6
[02:35:33] <dandy> on an intel ssd, ~180GB
[02:35:50] <dandy> I just did a pull, configure, and make and it seems to have skipped LLVM
[02:35:58] *** Quits: kimundi (kimundi@moz-221F72D2.dip0.t-ipconnect.de) (Ping timeout)
[02:35:59] <dandy> so I guess I am up to date there
[02:36:14] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[02:36:58] <doomrobo> oh hai dbaupp
[02:37:02] <dandy> anybody hear any recent news about LLVM being "native" on windows?
[02:37:19] <dandy> Is that the only reason for MinGW?
[02:37:51] <cmr> We also needa  linker, but if someone spent a day messing with lld I imagine we could remove that dep.
[02:37:59] <dbaupp> doomrobo: hey
[02:38:17] <dbaupp> cmr: does it support dynamic linking yet?
[02:38:52] *** Joins: zz_kimundi (kimundi@moz-E17678C9.dip0.t-ipconnect.de)
[02:39:02] *** Quits: ryeguy (ryeguy@9C569A0.5D1143CD.E8644521.IP) (Quit: )
[02:39:21] *** zz_kimundi is now known as kimundi
[02:41:21] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[02:41:33] <acrichto> cmr: do you still have the ability to generate a memory graph for a particular commit like on a pull request?
[02:41:49] <engla> dbaupp: I can add benchmarks. Is the goal to have one for each method?
[02:42:24] <engla> I mean overall in rust
[02:43:29] *** Quits: Ralith (ralith@moz-36466B9F.customer.broadstripe.net) (Ping timeout)
[02:43:53] <strcat> if they're measuring something useful
[02:44:11] *** Joins: vk (chatzilla@F92596F.2DEF7520.EF7679FA.IP)
[02:44:14] <strcat> we have lots of ones that don't really do anything
[02:45:11] <engla> right, I don't think I'm very good at writing benchmarks
[02:45:23] <dbaupp> engla: it'd be good to at least get a comparison between the old and new, even if it's not checked into the repo
[02:45:33] <cmr> engla: the goal is to have a complete snapshot of rust's perfomance
[02:45:39] <cmr> acrichto: yes
[02:46:11] <engla> strcat: it's only nice if we add all these benchmarks so that your rewrite makes a bigger splash  ;-)
[02:46:30] <acrichto> cmr: could I get a graph for https://github.com/alexcrichton/rust/tree/rc-crate ?
[02:46:53] *** Joins: Ralith (ralith@moz-36466B9F.customer.broadstripe.net)
[02:47:37] <jmgrosen> is there any way to "start" the runtime so that you can do things like task::spawn from a extern "C" fn?
[02:48:18] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[02:51:25] <cmr> dbaupp: I think it does
[02:51:51] <jmgrosen> and what are the rules for what can and can't go in an extern "C" fn?
[02:51:54] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[02:51:54] <cmr> acrichto: yes, but not... soon
[02:52:03] <cmr> like, in an hour or twoish
[02:52:25] <acrichto> cmr: yeah no worries
[02:52:30] <acrichto> trying to reduce that huge spike in the graphs
[02:52:37] <acrichto> thanks btw
[02:52:53] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[02:54:42] *** Joins: jericho (Mibbit@moz-A5B4DE6D.washdc.fios.verizon.net)
[02:54:49] <jmgrosen> is there any progress on calling Rust libraries from non-Rust languages?
[02:54:55] <dbaupp> jmgrosen: std::rt::{start, start_on_main_thread}
[02:55:21] *** Joins: jordyd (jordyd@moz-BC588982.seg38.ucf.edu)
[02:55:22] <dbaupp> jmgrosen: and yes, people have been doing it, I thknk steveklabnik had ruby calling into Rust
[02:56:16] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[02:57:09] <jmgrosen> dbaupp, the problem with std::rt::start is that I don't want to run a `main` per se, but instead have a sort of runtime running in the background while a different language can call into publicly-exposed rust functions
[02:57:59] <jmgrosen> dbaupp, I see steveklabnik's ruby.rs, but that's rust bindings for ruby (that is, call ruby code from rust)
[02:58:03] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[02:58:07] <jericho> what's the best way to convert ~str to c_str in rust 0.7? I've seen a lot of conflicting documentation and I'm not sure what's current
[02:58:09] <dbaupp> jmgrosen: oh, I see
[02:58:23] <dbaupp> jericho: there's .as_c_str() I think
[02:58:28] <cmr> jericho: 0.7 isn't current :p
[02:58:37] <cmr> as_c_str is what it was then
[02:58:41] <dbaupp> jmgrosen: I don't know the answer for either
[02:58:48] <jmgrosen> dbaupp: alright
[02:58:56] *** Quits: Ralith (ralith@moz-36466B9F.customer.broadstripe.net) (Ping timeout)
[02:59:06] <dbaupp> jericho: http://static.rust-lang.org/doc/0.7/std/str.html#method-as_c_str
[02:59:24] <jericho> ah, much appreciated (sadly 0.7 is mandated for this project. already too far in)
[03:00:09] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:00:10] *** ChanServ sets mode: +ao dherman dherman
[03:02:00] <dbaupp> Poll: "inverse tangent" or "arctangent" in docs?
[03:02:12] <jmgrosen> ooh, that's hard
[03:04:04] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz)
[03:04:10] <jmgrosen> there's sometimes a slight difference, but not much of one: http://mathworld.wolfram.com/InverseTangent.html
[03:04:54] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[03:05:34] <SiegeLord> arctangent for C/C++ compatibility
[03:05:42] *** Quits: tikue_ (tkuehn@885B1A5.2ACBBF24.689607DE.IP) (Quit: tikue_)
[03:05:54] <SiegeLord> I've never really heard anything but arc* in math classes either
[03:06:14] <SiegeLord> And inverse tangent is not really a function either... let's check if that's what the mathworld is getting at...
[03:06:21] <engla> inverse tangent is good. it's the documentation text right?
[03:06:32] <dbaupp> https://github.com/mozilla/rust/pull/9585/files#L0R205
[03:06:45] <cmr> I've only ever heard inverse tangent, not arctan
[03:07:03] <cmr> I had to look it up when I heard it this year
[03:07:17] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[03:07:25] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:08:02] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:11:31] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:11:32] *** Quits: eevee (eevee@moz-59EA9CA5.evrt.wa.frontiernet.net) (Quit: kernel upgrade)
[03:11:58] <doomrobo> hey, can someone please explain why this code is failing? http://kib2.free.fr/pastebin/view_paste.php?id=124
[03:12:30] <cmr> doomrobo: needs to be @mut
[03:12:43] <cmr> doomrobo: since @ doesn't have ownership, mutability is part of the type (like & and &mut)
[03:13:26] <engla> doomrobo: someone will soon ask you.. do you really need to use @?  why not just  HashMap without pointer
[03:13:28] <doomrobo> let @mut special: @HashMap<~str, int> = @HashMap::new();
[03:13:46] <doomrobo> this doesn't work, says "found mut in ident position"
[03:13:56] <cmr> ... let special: @mut HashMap<~str, int> = @mut HashMap::new();
[03:14:06] <doomrobo> engla: I'd personally prefer a global hashmap lookup table but that's not quite possible
[03:14:33] <engla> well you have TLS
[03:15:01] <doomrobo> cmr works, thanks
[03:15:05] <doomrobo> engla TLS?
[03:15:20] <cmr> doomrobo: what do you mean by global hashmap lookup table?
[03:15:40] <tiffany> like the one in erlang, maybe?
[03:15:44] <doomrobo> I just want an immutable hashmap I can query from various functions
[03:15:46] <tiffany> the process dictionary is what I believe it's called
[03:15:51] <engla> doomrobo: task-local storage as in std::local_data
[03:15:55] <cmr> @mut is not immutable.
[03:15:57] *** Joins: Ralith (ralith@moz-36466B9F.customer.broadstripe.net)
[03:16:22] <strcat> doomrobo: why not just pass it to them as &?
[03:16:26] <doomrobo> cmr It only needs to be mutable when I initialize it
[03:16:35] <cmr> doomrobo: it doesn't need to be @mut when you initialize it
[03:16:41] <doomrobo> huwat?
[03:17:06] <doomrobo> strcat: and have it as just a HashMap instead of ~ or @?
[03:17:15] <strcat> putting it in ~ definitely doesn't make sense
[03:17:26] <strcat> there's never going to be a benefit from doing that
[03:17:42] <doomrobo> strcat: what's a potential use for @?
[03:18:00] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Ping timeout)
[03:18:14] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:18:25] <strcat> use plain values, until values aren't enough, then use borrows
[03:18:34] <strcat> you should rarely need ~/@
[03:19:37] <strcat> a function should definitely not box something just to return it
[03:19:44] *** Joins: eevee (eevee@moz-59EA9CA5.evrt.wa.frontiernet.net)
[03:19:50] <strcat> the caller can put it where they want
[03:20:54] *** Quits: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[03:21:04] * dbaupp wonders if we could have a lint for `-> ~Type`
[03:22:03] <strcat> need to make the docs better
[03:22:05] *** Quits: Azdle (patrick@moz-8C723B60.hsd1.mn.comcast.net) (Ping timeout)
[03:22:05] *** Joins: maik (maik@moz-DD39128A.dip0.t-ipconnect.de)
[03:22:11] <thewonderidiot> so I saw somebody say earlier that ~T and ~[T] mean very different things. What exactly is the difference there? And on a related note, what is the reason for most string literals being prefixed by ~?
[03:22:21] *** Joins: moby (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net)
[03:22:33] <strcat> thewonderidiot: ~[T] and ~str are dynamic arrays
[03:22:51] <moby> is there a macro in rust like __FUNCTION__ that returns a string containing the name of the function that the macro is operating in?
[03:22:55] <strcat> they are just containers with value semantics
[03:23:05] <strcat> like HashMap, HashSet, TreeMap, etc.
[03:23:05] <acrichto> moby: file!()
[03:23:06] <thewonderidiot> oh, versus &[T] and &str being fixed size?
[03:23:08] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[03:23:13] <acrichto> moby: wait, no nvmd
[03:23:14] <strcat> thewonderidiot: no, &[T] and &str are slices
[03:23:18] *** Quits: vk (chatzilla@F92596F.2DEF7520.EF7679FA.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 24.0/20130911164256])
[03:23:18] <strcat> they are views into existing arrays
[03:23:20] <acrichto> moby: not right now there isn't
[03:23:24] <moby> acrichto: yes, I see file, but I have a ton of functions within the file.
[03:23:25] <strcat> [T, ..n] is fixed-size
[03:23:37] <thewonderidiot> ahhh, okay
[03:23:43] <moby> acrichto: ouch, how hard would it be to add?
[03:23:45] <strcat> ~T is a unique pointer, it exists to make a type pointer-size via indirection
[03:23:59] <dbaupp> rusti: (file!(), line!(), col!())
[03:24:00] -rusti- ("<anon>", 7u, 28u)
[03:24:02] <acrichto> moby: hmm... probably not trivial
[03:24:12] <moby> acrichto: ok
[03:24:13] <engla> dbaupp: should I include the bench tests in the PR?
[03:24:42] <thewonderidiot> okay, thanks strcat!
[03:24:44] <strcat> pointer-size -> can make recursive data structures (not infinite size), and do dynamic dispatch via ~Trait
[03:24:46] <dbaupp> engla: if you've got them you might as well
[03:24:58] <engla> ok
[03:25:10] <thewonderidiot> yeah, I think I've got the ~T understood now. Was just curious about the difference between that and ~[T]
[03:25:18] <dbaupp> rusti: module!()
[03:25:19] -rusti- <anon>:7:9: 7:15 error: macro undefined: 'module'
[03:25:20] -rusti- <anon>:7          module!()
[03:25:20] -rusti-                   ^~~~~~
[03:25:20] -rusti- application terminated with error code 101
[03:25:23] <dbaupp> :(
[03:25:47] <dbaupp> engla: nice speed up :)
[03:26:23] <dbaupp> rusti: module_path!()
[03:26:24] -rusti- ""
[03:26:32] *** Quits: maik (maik@moz-DD39128A.dip0.t-ipconnect.de) (Ping timeout)
[03:26:43] <dbaupp> rusti: mod foo { pub static path: &'static str = module_path!(); } foo::path
[03:26:44] -rusti- "foo"
[03:27:00] <dbaupp> rusti: mod foo { pub mod bar { pub static path: &'static str = module_path!(); } } foo::bar::path
[03:27:01] -rusti- "foo::bar"
[03:27:03] <moby> but doesn't fail! know the function name?
[03:27:06] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[03:27:06] <engla> dbaupp: pushed and done
[03:27:11] *** Joins: wakandan (Mibbit@3ACC418E.8FF05F7.4605F140.IP)
[03:27:22] <dbaupp> acrichto, moby: it should be possible to add function!() using something similar to module_path, yeah
[03:27:23] *** Quits: peloverde (uid11279@moz-5F4AA75A.irccloud.com) (Quit: )
[03:27:48] <moby> dbaupp: module_path gives the function name at the end then?
[03:27:56] <moby> that would be perfect
[03:28:04] <dbaupp> moby: no it does
[03:28:05] <dbaupp> n't
[03:28:17] <moby> shucks!
[03:28:21] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[03:28:38] <dbaupp> rusti: fail!()
[03:28:39] -rusti- pastebinned 13 lines of output: http://sprunge.us/PSIB
[03:29:11] <dbaupp> (also, fail currently doesn't give the name of the function)
[03:29:30] <polyfractal> What does std::cell do?  It looks like you just put things into it, and usually to take things right back out inside of a closure?
[03:29:31] <moby> oh, I was thinkg it did because rustc --test prints out function names, right
[03:30:13] <cmr> polyfractal: correct.
[03:30:21] <cmr> polyfractal: it lets you evade the borrow checker, but introduces runtime failure.
[03:31:19] <dbaupp> (introduces the possibility of runtime failure)
[03:31:27] <cmr> it's used to move things into a closure
[03:31:29] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[03:31:29] *** ChanServ sets mode: +ao brson brson
[03:31:34] <engla> 95% of all uses of cell are just to move things into a closure
[03:31:45] <polyfractal> cmr: hm, interesting.  Why couldn't you let the closure just capture the variable in question?
[03:32:21] <cmr> polyfractal: because it needs to take ownership, and our type system can't express closures that take ownership, because we can't assert that they're not called multiple times.
[03:32:39] *** Joins: Ferreus_ (ferreus@moz-80A38711.dyn.telefonica.de)
[03:32:46] <polyfractal> ah ok, makes sense
[03:33:02] *** Quits: Ralith (ralith@moz-36466B9F.customer.broadstripe.net) (Ping timeout)
[03:33:13] <polyfractal> so its a way to cheat the system if you "know" it doesn't break anything (and pray you didnt introduce a bug)
[03:33:14] *** Quits: Ferreus (ferreus@moz-1C834CDB.dyn.telefonica.de) (Ping timeout)
[03:33:29] *** Joins: Ralith (ralith@moz-36466B9F.customer.broadstripe.net)
[03:33:44] <cmr> yes. the cell will fail the task if you try to take and it has already been taken.
[03:34:07] *** Joins: ryeguy (ryeguy@9C569A0.5D1143CD.E8644521.IP)
[03:34:50] <dbaupp> I thought we can't express closures that move out of captured things they own (i.e. they can take ownership, but can't transfer it)
[03:35:09] <cmr> dbaupp: transfer how?
[03:35:12] <cmr> I could be wrong
[03:35:15] <engla> they are not allowed to modify the moved-in value
[03:35:17] <cmr> but I thought that's how it worked
[03:35:58] <dbaupp> cmr: transfer == moving
[03:37:03] <polyfractal> Unrelated question: how expensive is cloning a SharedChan? Can I go bananas cloning a SharedChan, or should one be more judicious in how many clones are made? :)
[03:37:24] *** Quits: joone_ (joone@moz-C50DC051.jf.intel.com) (Ping timeout)
[03:37:40] *** Joins: joone_ (joone@3CCE8CB5.2160464A.A34EC3BB.IP)
[03:37:46] <brson> polyfractal: it's cheap
[03:37:48] *** Joins: slack1256 (slack@moz-AA24DB28.baf.movistar.cl)
[03:38:26] <polyfractal> brson: awesome
[03:38:33] *** Joins: SteveMcQwark (stevemcqwa@7429B0EF.415986EB.47C41102.IP)
[03:38:56] <dbaupp> brson: now that's 0.8, can I remind you of https://github.com/mozilla/rust/issues/9436 :)
[03:39:05] <brson> it's an atomic add to clone, and besides cache contention issues, it should scale fine to have many clones
[03:39:46] <brson> dbaupp: yes, i'll spend some time working on automation soon
[03:40:02] <dbaupp> brson: cool, thanks :)
[03:40:34] <dbaupp> moby: btw, glyc filed https://github.com/mozilla/rust/issues/9586 about function!()
[03:42:53] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[03:45:57] <moby> dbaupp: cool
[03:45:57] *** Quits: Ferreus_ (ferreus@moz-80A38711.dyn.telefonica.de) (Quit: WeeChat 0.4.1)
[03:46:41] *** Quits: ryeguy (ryeguy@9C569A0.5D1143CD.E8644521.IP) (Quit: )
[03:48:14] <engla> dbaupp: oops, my change to librustdoc didn't compile. I had to fix that. https://github.com/mozilla/rust/pull/9583  I'm sorry.
[03:48:32] *** Quits: canhtak (jeremy@moz-3FFB5CDA.wl.t.ulaval.ca) (Quit: canhtak)
[03:49:13] <dbaupp> engla: don't worry, I still have my r and + keys :P
[03:49:32] <dbaupp> engla: hm, could https://github.com/blake2-ppc/rust/commit/3d1adc72f7982fd60bd8ccbe7d048962e4437e35#L1R177 be reindented?
[03:50:11] *** Quits: SteveMcQwark (stevemcqwa@7429B0EF.415986EB.47C41102.IP) (Quit: SteveMcQwark)
[03:51:46] <cmr> acrichto: Alright, memory graph starting
[03:52:11] <cmr> acrichto: do you want it compared to the commit immediately before it, or can I use my most recent?
[03:52:12] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[03:52:22] <acrichto> cmr: don't reall yneed a comparison
[03:52:31] <acrichto> recent is fine
[03:52:50] <SiegeLord> Here's another conundrum: https://gist.github.com/SiegeLord/6738184
[03:52:53] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[03:52:53] <SiegeLord> Is that a bug?
[03:52:54] <engla> dbaupp: I guess. what's the best way to place that dangling  .concat_vec()  anyway?
[03:53:07] <SiegeLord> (compiles with no errors)
[03:53:21] *** Joins: SteveMcQwark (stevemcqwa@7429B0EF.415986EB.47C41102.IP)
[03:53:34] <cmr> oh, ok, I can do no comparison easy :P
[03:54:30] <engla> dbaupp: should it be like this? https://gist.github.com/anonymous/396c386006881ab80cbf
[03:54:46] <dbaupp> engla: looks fine to me
[03:56:08] <cmr> dbaupp: any news on irfy?
[03:56:25] <dbaupp> cmr: not really, been distracted
[03:56:40] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[03:56:41] <dbaupp> just working out if I can drop the time info totally for now to get something working
[03:56:46] *** Quits: SteveMcQwark (stevemcqwa@7429B0EF.415986EB.47C41102.IP) (Quit: SteveMcQwark)
[03:56:52] <dbaupp> (for those commits only, of course)
[03:57:05] *** Joins: SteveMcQwark (stevemcqwa@7429B0EF.415986EB.47C41102.IP)
[03:57:25] <engla> dbaupp: pushed again
[03:58:26] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[03:58:47] *** Joins: lex (lex@moz-1975848F.bootp.virginia.edu)
[04:00:50] *** Joins: vodik_ (simon@moz-CBE4BB13.cable.teksavvy.com)
[04:00:57] <jmgrosen> why does cast::transmute actually end up being a function in the binary, with many, many copies even?
[04:01:43] <dbaupp> jmgrosen: bugs (and possibly not compiling with optimisations)
[04:02:53] <dbaupp> if you try compiling with -Z no-monomorphic-collapse it might be better, or, even easier, update your compiler to include c3e4e068416438e91e3e9809ee8553a764d8e26e
[04:03:12] <jmgrosen> dbaupp: hm, that seems to help, thanks
[04:04:20] <dbaupp> cmr: (ah, oops, looks like I have to rebuild rustc on the irfy bot before we'll see anything; so that'll be an hour or so)
[04:04:33] *** Quits: joone_ (joone@3CCE8CB5.2160464A.A34EC3BB.IP) (Ping timeout)
[04:05:35] <dbaupp> cmr: (my rustc there is 2 months and a day old :S )
[04:06:46] *** Joins: joone_ (joone@moz-C50DC051.jf.intel.com)
[04:07:19] <SiegeLord> Hmm... my example works for trait impls too
[04:07:37] <SiegeLord> Am I seriously confused about how implementation scoping works?
[04:07:45] <SiegeLord> Is there a tutorial somewhere?
[04:09:09] <SiegeLord> https://gist.github.com/SiegeLord/6738277 is something like this meant to work?
[04:09:19] <dbaupp> SiegeLord: no, I imaigine it just hasn't really been implemented properly; it kinda just happened (i could be wrong though, I guess pcwalton is the person to talk to)
[04:09:37] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Quit: WeeChat 0.4.2-rc2)
[04:09:44] <dbaupp> SiegeLord: does that example not work?
[04:09:48] <SiegeLord> It works
[04:09:54] <SiegeLord> Both of them do
[04:10:00] <SiegeLord> But I don't quite understand why
[04:10:02] <dbaupp> both?
[04:10:16] <dbaupp> that one should work: trait methods are scoped by trait, not by impl or by type
[04:10:32] <SiegeLord> https://gist.github.com/SiegeLord/6738277 and https://gist.github.com/SiegeLord/6738184
[04:10:37] <SiegeLord> Oh really
[04:10:54] <SiegeLord> So I guess it's all good then
[04:11:03] <SiegeLord> I was confused about that bit
[04:11:09] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:11:58] <SiegeLord> Although it's a bit inconvenient if it keeps working like that for a plain impl;
[04:12:12] <SiegeLord> It means that you cannot have a crate scoped method
[04:12:21] <dbaupp> the one without the trait, I don't know, but I guess methods become "locked" into the type, and so are treated as if they are defined next to it
[04:12:42] *** Quits: joone_ (joone@moz-C50DC051.jf.intel.com) (Ping timeout)
[04:12:48] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:12:58] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:13:18] *** Joins: joone_ (joone@moz-C50DC051.jf.intel.com)
[04:14:08] *** Quits: SteveMcQwark (stevemcqwa@7429B0EF.415986EB.47C41102.IP) (Quit: SteveMcQwark)
[04:14:15] <SiegeLord> This sounds like a question to the ML
[04:14:42] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:19:37] <polyfractal> ChrisMorgan: Trying to extend your InfoRequest example by adding a simple value to the struct and a generic impl.  Getting a "failed to find an implementation of trait std::clone::Clone for InfoServer" on the serve_forever call.  Halp?  http://pastebin.com/m4phc7ej
[04:19:47] <engla> I took a stab at the comment that's written for num::Orderable that those should be default methods on Ord. That doesn't seem to be a good idea because that way vectors get methods .max(), .min() and .clamp() that make little sense
[04:19:51] <engla> :(
[04:20:08] <engla> what else can we do with cmp::{max, min} and num::{max, min} ?
[04:21:02] <dbaupp> engla: .max and .min make sense: `fn min(&'a self, a: &'a ~[T]) -> &'a ~[T] { if a < b { a } else { b } }`
[04:21:18] <dbaupp> .clamp would be a little weird, I guess.
[04:21:26] *** Joins: Shikita35 (gatita@2BDAD2DA.504510AB.88FACFF2.IP)
[04:21:34] <dbaupp> (err, that should be *self < *a of course)
[04:21:45] <engla> it's a pretty useless operation for a vector
[04:22:20] <Eridius> I assume LLVM is smart enough to delete constructs like `foo.with_c_str(|_| { /* do nothing */ })` ?
[04:22:25] <engla> the iterator and extra::stats methods .min() are better.. the minimum value
[04:22:41] * Eridius is asking because he's ending up with a lot of `path.as_display_str(|s| debug!("foo: %s", s))` that he hopes is being removed in the ndebug case
[04:23:18] <dbaupp> Eridius: unlikely
[04:23:22] <Eridius> dbaupp: >_<
[04:23:38] <dbaupp> Eridius: it can't even eliminate `fn main() { let _a = ~1; }`
[04:23:43] <Eridius> it would be nice if there was a way to query if logging was turned on for the current module, to avoid unnecessary debug-only computations
[04:23:59] <dbaupp> (at least, it can't with the current stdlib, it can do it in theory)
[04:24:36] <Eridius> dbaupp: should I bother going back and adding `if !cfg!(ndebug) {}` around all these, or just ignore it? They won't actually allocate unless the Path has non-utf8 filenames anyway
[04:25:04] <jeaye> #[link(name = "foo", vers = env!("VERSION"))];
[04:25:11] <jeaye>  error: unexpected token: `env`
[04:25:18] <jeaye> Why is that not allowed? :(
[04:25:31] <Eridius> jeaye: you can't use macros/syntax extensions in match patterns either
[04:25:36] <Eridius> which should be fixed eventually
[04:25:46] <Eridius> I don't know if using them in attributes is going to be done
[04:26:13] <dbaupp> Eridius: probably (you could define your own macro for it, of course)
[04:26:23] <jeaye> That makes version upgrades a bit more tedious. :P
[04:27:58] <polyfractal> ChrisMorgan: nvm, just had to slap a "#[deriving(Clone)]" on the struct :)
[04:28:12] <ChrisMorgan> Just having come back from lunch, I was just about to say that.
[04:30:45] *** Quits: jericho (Mibbit@moz-A5B4DE6D.washdc.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:31:32] <ChrisMorgan> If I have a benchmark that takes a second or two to run a single iteration, what is the --bench run going to do?
[04:31:38] <cmr> ChrisMorgan: explode
[04:31:45] <cmr> it really really doesn't like long benches.
[04:31:49] <cmr> they're supposed to be short.
[04:31:50] <ChrisMorgan> Which particular variety of explode?
[04:31:56] <cmr> run for a very long time and/or give up
[04:32:07] <cmr> when it can't get a statitistically significant result.
[04:32:23] <cmr> #[bench] is really made for small(ish) things
[04:32:32] <cmr> I think graydon said 1ms or less?
[04:34:17] *** Quits: KindOne (KindOne@moz-D75CF3E3.dynamic.ip.windstream.net) (Ping timeout)
[04:35:41] *** Quits: dew (Instantbir@moz-EEE6B2F8.dhcp.stls.mo.charter.com) (Ping timeout)
[04:36:37] <ChrisMorgan> That sounds like it would disqualify it for various disk I/O benchmarks. (They're going to be extremely difficult to do correctly anyway, though, as disk/mem caches will probably optimise it somewhere along the way.)
[04:37:12] *** Joins: dew (Instantbir@moz-EEE6B2F8.dhcp.stls.mo.charter.com)
[04:38:01] *** Joins: KindOne (KindOne@moz-D75CF3E3.dynamic.ip.windstream.net)
[04:38:24] <cmr> ChrisMorgan: those aren't appropriate for #[bench] yeah
[04:38:33] <ldunn> Hrmf. Is there any way to get `extern mod` to not include language items?
[04:38:49] <ChrisMorgan> cmr: and yet benchmarking is still strongly desirable for such things.
[04:39:48] *** Joins: dew1 (Instantbir@moz-EEE6B2F8.dhcp.stls.mo.charter.com)
[04:39:48] *** Quits: dew (Instantbir@moz-EEE6B2F8.dhcp.stls.mo.charter.com) (Connection reset by peer)
[04:40:26] <ChrisMorgan> If I'm making a module for benchmarks (for rust-http), would putting ``#[cfg(test)];`` in bench/mod.rs be the Right Way To Do It?
[04:40:34] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[04:41:15] *** Joins: SteveMcQwark (SteveMcQwa@moz-7CFCF343.cpe.net.cable.rogers.com)
[04:42:59] <cmr> ChrisMorgan: yeah
[04:43:09] <cmr> ChrisMorgan: bench could probably be improved to handle those
[04:43:14] <cmr> but right now it doesn't
[04:43:26] <cmr> ChrisMorgan: cfg(test) plus your own cfg for the benches, perhaps?
[04:43:28] <cmr> *shrug*
[04:44:01] <ChrisMorgan> Well, cfg(test) will be producing the test executable which can be run with --test or --bench, so no need for my own cfg.
[04:44:07] *** Quits: dandy (Dandy@moz-84CC8377.hsd1.co.comcast.net) (Quit: Leaving)
[04:44:21] <cmr> right, but I imagine you wouldn't want to *always* run the benches?
[04:44:28] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[04:44:43] <ChrisMorgan> Oh, you mean to make compilation faster?
[04:44:51] <cmr> acrichto: having trouble building your branch: does it build for you? I'm getting failures in rustdoc
[04:44:57] <cmr> ChrisMorgan: no, I mean when trying to run the tests :p
[04:45:48] *** Quits: SteveMcQwark (SteveMcQwa@moz-7CFCF343.cpe.net.cable.rogers.com) (Quit: SteveMcQwark)
[04:46:11] <ChrisMorgan> I don't think I'll be doing it that way at present, but rather using separate scripts. At the least, the server and client need to be running in separate processes to get meaningful results (partially so the scheduler isn't going crazy and partially because I'll be comparing with at least Go and Node).
[04:46:36] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[04:49:39] *** Quits: slack1256 (slack@moz-AA24DB28.baf.movistar.cl) (Quit: Konversation terminated!)
[04:51:49] <Eridius> bahaha, this was actually caching the results of calling .to_str() on an Option
[04:52:00] <Eridius> which means the value was `Some("path")`. Which isn't very useful
[04:52:08] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Quit: Leaving)
[04:52:30] <Eridius> well that was meant for #rust-internals
[04:56:44] <jmgrosen> ChrisMorgan: http::server::Request says that I shouldn't need to use request_uri because of the `url` field but there's no url field?
[04:56:53] <ChrisMorgan> jmgrosen: TODO.
[04:56:57] <jmgrosen> Ok :P
[04:57:03] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[04:57:10] <ChrisMorgan> Want to make it yourself?
[04:58:30] <jmgrosen> perhaps
[04:58:46] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[04:59:01] <dbaupp> cmr: heh, irfy still had the old for loop
[04:59:15] <cmr> yay ancient "production" rust code
[04:59:43] <ChrisMorgan> jmgrosen: compare with https://tools.ietf.org/html/rfc2616#section-5.2
[05:00:32] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:01:42] <ChrisMorgan> jmgrosen: probably best to leave the hostname blank for HTTP/1.0 requests with no Host header and a abs_path instead of an absoluteURI for the Request-URI.
[05:06:13] <polyfractal> ChrisMorgan: poking around rust-httpappears that the request body is never read.  Would it basically need a RequestBuffer::read_body() method to be implemented?
[05:06:49] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[05:06:54] *** Quits: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP) (Ping timeout)
[05:07:13] *** Joins: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP)
[05:07:28] <ChrisMorgan> Hang on, trying to sort out client and server in my mind...
[05:08:35] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[05:09:07] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[05:09:38] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:09:58] <ChrisMorgan> I want request bodies to be read lazily, but at present that's not feasible because the TcpStream is a single object rather than a separate reader and writer.
[05:11:11] <polyfractal> ah
[05:11:18] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[05:11:21] <ChrisMorgan> At present, it's going to need to be read something like up front, as you suggest. Got to take care of transfer encoding and certain MIME types, though; still to be designed.
[05:12:27] *** Joins: Anis (anistuhin@CD87570.A15BFDDF.DDA58130.IP)
[05:13:08] <ChrisMorgan> Request reading needs to either use a transfer encoding or specify the content length. Can't just read to the end of the stream, except for HTTP/1.0 connections where that's valid.
[05:13:28] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:13:30] <dbaupp> cmr: well, I certainly know the parallelism of irfy works: maxing out all my cores :/ haha
[05:13:41] <cmr> dbaupp: <3 data
[05:14:19] <dbaupp> Generating... error: No space left on device - write. Use --trace to view backtrace
[05:14:21] * dbaupp sighs
[05:14:57] <cmr> hahah
[05:16:18] *** Parts: Anis (anistuhin@CD87570.A15BFDDF.DDA58130.IP) ()
[05:17:36] * cmr goes to bed
[05:20:55] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz)
[05:23:41] <jmgrosen> can you do pattern matching on strings?
[05:23:48] <jmgrosen> I seem to remember being able to, but I can't remember how
[05:24:00] *** Joins: engla_ (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[05:24:44] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[05:26:19] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[05:26:26] <Eridius> jmgrosen: you can match exact string values
[05:26:29] <Eridius> but not, say, globs
[05:26:40] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:26:45] *** Joins: wil (wil@moz-A2F0D33A.bootp.virginia.edu)
[05:27:42] <ChrisMorgan> jmgrosen: just make sure you're comparing a slice rather than a ~str (e.g. `match owned_string.as_slice() { "foo" => (), _ => () }`)
[05:28:27] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[05:29:19] <wil> When using a pattern guard, what causes a bind by-move?
[05:29:29] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[05:30:57] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[05:31:25] <dbaupp> wil: match .. { Foo(a) if a == ~"baz" => ... }
[05:31:35] <dbaupp> (`a` is a `~str` in that example)
[05:32:02] <wil> dbaupp: What causes that to be binding, though? Is it because a is owned?
[05:32:10] <Eridius> wil: any destructuring binds will do a bind-by-move by default (if the type is not implicitly copyable)
[05:32:14] <strcat> wil: they are just called bindings, regardless
[05:32:30] <Eridius> wil: as strcat would tell you, rust only ever shallow copies things, but things that have destructors, &fn, or &mut leave the source unusable. this is called a move
[05:32:43] <Eridius> strcat: it's bind-by-move as opposed to bind-by-ref
[05:33:00] <Eridius> wil: when doing a pattern match, you can say `Foo(ref a)` to bind a by-ref instead of by-move, thus giving you a &-ptr to the value
[05:33:02] <doomrobo> is it standard practice to map over an option type if you don't want to check if it's None?
[05:33:20] <strcat> doomrobo: what do you want to do if it's None?
[05:33:20] <Eridius> doomrobo: if you need to have an Option when you're done, sure. It depends on exactly what you want
[05:33:36] <doomrobo> strcat: nothing at all. That's the point
[05:33:36] <cmr> dbaupp: do you want me to run your program? I can do that
[05:33:49] <Eridius> doomrobo: oh you want to do something with the captured value?
[05:33:49] <doomrobo> Eridius: gotcha
[05:33:52] <wil> Eridius: Alright. Thanks! 
[05:33:58] <doomrobo> yes
[05:33:59] <Eridius> as opposed to transforming it and handing the result elsewhere?
[05:34:13] <doomrobo> well I'm not even doing these things at the moment. I was just curious
[05:34:14] <Eridius> doomrobo: I typically just say `if foo.is_some() { do_something_with(foo.unwrap()) }` in that case
[05:34:24] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[05:34:25] <Eridius> I reserve .map() for when the resulting Option<> is meaningful
[05:34:33] <doomrobo> makes sense
[05:34:50] <Eridius> sometimes I say `match foo { None => (), Some(x) => { do_something_with(x) } }`
[05:35:05] <doomrobo> also, how do I initialize a hashmap without making it mut?
[05:35:09] <dbaupp> cmr: whaddya mean? to generate the irfy site?
[05:35:12] <cmr> dbaupp: yeah
[05:35:26] <Eridius> doomrobo: what's wrong with making it mut?
[05:35:34] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[05:35:37] <engla_> doomrobo: You can't. You can expose it as immut only later
[05:35:39] <dbaupp> cmr: permanently, or just for now?
[05:35:42] <Eridius> doomrobo: you can always re-bind it if you want to make it immutable afterwards
[05:35:43] <ChrisMorgan> ``a == ~"baz"`` would be a code smell, though; should be ``a == "baz"`` if possible or ``a.as_slice() == "baz"``, to avoid the extra allocation.
[05:35:51] <cmr> dbaupp: until you have disk space I guess? :p
[05:35:55] <Eridius> ChrisMorgan: or `"baz" == a`
[05:36:06] <doomrobo> Eridius: even if it's @mut?
[05:36:08] *** Quits: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net) (Ping timeout)
[05:36:10] <cmr> Ideally just for now
[05:36:10] * ChrisMorgan doesn't like it that way round
[05:36:15] *** Joins: SteveMcQwark (SteveMcQwa@moz-7CFCF343.cpe.net.cable.rogers.com)
[05:36:15] <dbaupp> cmr: haha, the problem is just how I'm running jekyll locally to test that it works, not with the actual scripts
[05:36:19] <Eridius> doomrobo: don't stick it in the @ while you're initializing it
[05:36:19] <cmr> Ah ok
[05:36:23] <dbaupp> cmr: (so thanks for the offer, but not needed :) )
[05:36:37] <doomrobo> ok
[05:36:40] <dbaupp> cmr: (it's making a 700mb copy of all the raw mem.json files)
[05:37:03] <cmr> yikes
[05:37:04] *** Quits: jordyd (jordyd@moz-BC588982.seg38.ucf.edu) (Ping timeout)
[05:38:14] <doomrobo> cmr: what you were saying earlier about the hashmap: were you suggesting I do: let x : HashMap<~str, int>  = HashMap::new(); foo_bar(&x, 10, 12);    ?
[05:38:32] <cmr> doomrobo: let mut x = HashMap::new(); .....; return @mut x
[05:38:47] <Eridius> cmr: if it's supposed to be immutable later then I trust you mean `return @x`
[05:38:49] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[05:38:49] *** ChanServ sets mode: +ao brson brson
[05:38:56] <cmr> ah, yes
[05:38:59] <doomrobo> cmr why should I box it?
[05:39:04] <Eridius> doomrobo: you said you wanted it in a box
[05:39:09] <Eridius> if you don't need it to be @-boxed, then don't
[05:39:20] <doomrobo> I'm actually not sure if I need it to be boxed
[05:39:35] <engla_> doomrobo: in particular you don't need to box it in the return value. The caller of the function should decide
[05:39:36] <doomrobo> I'm still not very comfortable with the whole concept
[05:39:43] <Eridius> doomrobo: don't put anything in a @-box unless you need to
[05:39:52] <doomrobo> but when do I need to?
[05:39:52] *** Joins: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net)
[05:40:05] <Eridius> and if you're returning it from a func, let the caller decide. Only return a @-boxed value if you are forced to have it @-boxed inside the func (i.e. you're pulling it from somewhere else that's already @-boxed)
[05:40:11] <Eridius> doomrobo: hopefully? never
[05:40:21] *** Quits: LimeBurst (me@247D1419.D73964AC.27A8748.IP) (Quit: leaving)
[05:40:25] <Eridius> doomrobo: I've still never used a @-box despite writing many thousands of lines of rust code
[05:40:25] <doomrobo> also, why can't I just pass around &refs instead of @refs?
[05:40:31] <Eridius> the only times I touch @-boxes are when I'm editing preexisting code that uses them
[05:40:35] *** Joins: LimeBurst (me@247D1419.D73964AC.27A8748.IP)
[05:40:37] <doomrobo> hot damn, ok then
[05:40:42] <Eridius> doomrobo: &refs have lifetimes. @-boxes don't
[05:40:52] <doomrobo> I'm also not clear on lifetimes
[05:40:55] <Eridius> e.g. you can't return a &ref from a function unless it's derived from an input to the function
[05:41:08] <Eridius> doomrobo: a lifetime is a region of code in which the value that you're borrowing is valid
[05:41:12] <doomrobo> oh, that makes sense
[05:41:32] <Eridius> so you can't expose a &ref outside of that region, because that would be invalid
[05:41:40] <doomrobo> you can't guarantee that &refs are valid past the execution context the thing it's pointing to was made in, right?
[05:42:17] <Eridius> doomrobo: more accurate would be to say you know that the &ref is invalid if the thing it points to disappears
[05:42:56] *** Joins: ecr (Mibbit@6A833033.5BB0586B.11F8506F.IP)
[05:45:49] *** Joins: drrb (drrb@4D561226.896EE5A.377B9828.IP)
[05:46:09] <doomrobo> alright
[05:46:27] <doomrobo> so I'll try not to box it and I'll see how it goes
[05:46:34] *** Quits: SteveMcQwark (SteveMcQwa@moz-7CFCF343.cpe.net.cable.rogers.com) (Quit: SteveMcQwark)
[05:46:36] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[05:46:55] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[05:47:37] <drrb> Hello!
[05:47:40] <Eridius> hello
[05:49:47] <drrb> I'm trying to run the rust compiler from rust from java (for an IDE plugin), and I think I'm almost there (I've compiled to a library, called the library from Java, started the Rust runtime and invoked the rust compiler using the API), but the embedded compiler isn't able to resolve ilbstd :/
[05:50:06] <drrb> That is, I get something like: main.rs:1:0: 1:0 error: can't find crate for `std`
[05:50:38] <brson> drrb: that's pretty cool!
[05:50:48] <drrb> Thanks :)
[05:50:57] <drrb> I was super excited when it worked!
[05:51:34] <cmr> drrb: I bumped against this with rustdoc. You're calling librustc?
[05:51:37] <brson> drrb: this probably has to do with the 'sysroot', which is the directory that rustc does various searches from and is detected based on the binary location by default, which in your case is probably eclipse ore something (and wrong)
[05:52:13] <drrb> cmr: yeah, calling librustc
[05:52:16] <cmr> I fixed it by moving my binary next to the real rustc, and everything magically started working
[05:52:43] <ChrisMorgan> I also experienced this with rustdoc. I fixed it by having PWD being the rust repository root.
[05:52:57] <drrb> brson: That sounds like what i'm seeing. I guess it'd be using the location of the wrapper i wrote
[05:53:09] <brson> drrb: the sessions options structure contains a field called maybe_sysroot. if you set it to the correct value it may solve your problem
[05:53:12] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[05:53:42] <drrb> ok, thanks guys, that's probably what I'm seeing too
[05:53:44] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[05:54:00] <dbaupp> cmr: it works \o/ http://i.imgur.com/mpo0SFX.png 
[05:54:01] <drrb> brson: ok, i'll have a look and try to set it before I run the compiler
[05:54:11] <doomrobo> I'm mapping through a list of pointers like this: let new_list = old_list.map(|i| {foo_bar(15, *i, 12);}; and it's giving me "cannot move out of dereference of & pointer".
[05:54:58] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:55:35] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Quit: leaving)
[05:55:59] <ChrisMorgan> dbaupp/cmr: good, now all we need is to make it only use 500MB of RAM and we'll be all good.
[05:56:24] <dbaupp> ChrisMorgan: "we"? I believe you just nominated yourself for that task :P
[05:56:25] <ChrisMorgan> Oh, and only take 30 seconds, too.
[05:56:37] <ChrisMorgan> dbaupp: I don't speak with the Royal We.
[05:57:26] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[05:58:25] <ChrisMorgan> Compilation performance and memory usage are something I'd like to work on, but I am only a limited resource and I think my effort is better spent at present on rust-http.
[05:59:11] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[05:59:21] <dbaupp> fine by me
[05:59:25] <dbaupp> <3 rust-http
[06:00:04] <ChrisMorgan> rust-http can only *really* succeed if compilation gets enormously faster than it is at present.
[06:00:19] <dbaupp> how long does a rust-http build take now?
[06:01:53] <doomrobo> do we consider Go as a rival of sorts or do we mutually acknowledge that our purposes are different?
[06:01:59] <ChrisMorgan> From end to end, around 50 seconds on my machine. (With -O.)
[06:02:05] <ChrisMorgan> That's including examples.
[06:02:30] <dbaupp> doomrobo: Rust acknowledges Go as very different
[06:02:37] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[06:02:37] <dbaupp> (I don't know about vice versa)
[06:02:42] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[06:02:48] <doomrobo> good enough :P
[06:02:49] <dbaupp> ChrisMorgan: yuck, that's very slow :(
[06:03:06] <engla_> I think you can have your own opinion doomrobo :) your question makes it sound so tribal
[06:03:18] <ChrisMorgan> dbaupp: 6.8 seconds for ``rustc src/libhttp/lib.rs --out-dir=build``
[06:03:30] <ChrisMorgan> And 17.3 seconds for ``time rustc -O src/libhttp/lib.rs --out-dir=build``
[06:03:31] <doomrobo> engla_: I'll stick with the tribal mentallity ;)
[06:03:42] *** Joins: dandy (dandy@moz-84CC8377.hsd1.co.comcast.net)
[06:04:13] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[06:04:16] *** Quits: wakandan (Mibbit@3ACC418E.8FF05F7.4605F140.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:04:21] <ChrisMorgan> dbaupp: actually the 50 seconds should be more like a minute (read user time rather than total time).
[06:04:26] <dandy> are people aware that rust is busted for windows at the moment?
[06:04:34] <dbaupp> dandy: in what way?
[06:04:48] <dandy> hello.rs:1:0: 1:0 error: can't find crate for `std`
[06:05:02] <dbaupp> dandy: (I don't think it is completely busted, given we run the testsuite on windows for every pr that lands, and they have been landing recently)
[06:05:24] <dandy> somewhere between 1434b4bfcafe90cffa6627e3be18a9e5b6501ad1 and 6828d2e01860593a687f36397eb38dc338f092a9
[06:05:38] <doomrobo> if I have a list of pointers (Either of ~ or @) how do I do a map over it?
[06:05:53] <dandy> dbaupp, that may be true of your tests but in the recent days myself and others are having issues
[06:06:03] <jeaye> dandy: I was hitting the problem on OS X.
[06:06:05] <ChrisMorgan> dandy: that message is giving a sense of dj vu just now... someone was in with exactly that issue, though in quite different circumstances (embedding rustc)!
[06:06:06] <dbaupp> dandy: they aren't "my" tests :)
[06:06:07] <jeaye> Never was able to resolve it.
[06:06:26] <dandy> should I make an issue on github?
[06:06:46] <jeaye> Not unless you can get more info than "Windows is busted"
[06:06:51] *** Joins: timot (timot@moz-730F561B.bredband.tre.se)
[06:07:02] <dandy> I have the other things i have said in the channel
[06:07:08] <jeaye> Since it was busted for me on OS X and for ChrisMorgan while embedding.
[06:07:22] <ChrisMorgan> Actually it was drrb while embedding
[06:07:38] <dandy> somebody on the mailing list was also having a similar issue
[06:07:44] <dandy> it may not be windows only it sounds
[06:07:53] <dbaupp> dandy: it'd be better than nothing (open an issue), especially since you have two commits of interest
[06:07:56] <dbaupp> *opening
[06:08:03] *** Quits: timot (timot@moz-730F561B.bredband.tre.se) (Quit: Konversation terminated!)
[06:08:04] <ChrisMorgan> drrb: what OS are you working on?
[06:08:14] *** Joins: timot (timot@moz-730F561B.bredband.tre.se)
[06:08:18] <drrb> ChrisMorgan: OSX
[06:10:24] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (Quit: ZNC - http://znc.sourceforge.net)
[06:11:17] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[06:12:26] *** Parts: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) ()
[06:12:40] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[06:12:48] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[06:12:56] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[06:12:58] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[06:13:10] *** Quits: timot (timot@moz-730F561B.bredband.tre.se) (Connection reset by peer)
[06:18:02] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Client exited)
[06:18:05] *** Quits: ecr (Mibbit@6A833033.5BB0586B.11F8506F.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:19:38] *** Quits: SiegeLord (sl@moz-3D449DF.bstnma.fios.verizon.net) (Quit: Leaving)
[06:20:18] *** Quits: dew1 (Instantbir@moz-EEE6B2F8.dhcp.stls.mo.charter.com) (Ping timeout)
[06:21:04] <drrb> cmr, ChrisMorgan, brson: It works! Thanks for your help :) . I can't easily move my binary to the same location as rustc, so I built the session options with "--sysroot /usr/local" (my rust is installed from Homebrew in /usr/local).
[06:21:35] <ChrisMorgan> Great!
[06:21:55] <dandy> noct, were you having issues with the 0.8 installer before?
[06:22:08] <dandy> I know it was somebody with a 4 letter name
[06:22:13] <dandy> started with n :)
[06:23:26] <dandy> If so, please see if you can add some details to this issue: https://github.com/mozilla/rust/issues/9588
[06:23:58] *** Joins: five (five@moz-F45C65F8.v4.ngi.it)
[06:25:05] <drrb> Have a good weekend everyone :)
[06:25:12] *** Joins: timot (timot@moz-730F561B.bredband.tre.se)
[06:25:23] * ChrisMorgan already is
[06:26:03] *** Quits: KindOne (KindOne@moz-D75CF3E3.dynamic.ip.windstream.net) (Ping timeout)
[06:26:07] <dandy> Just when visual debugging was announced rust breaks for a bunch of us :( Guess I have to go outside this weekend!
[06:26:32] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[06:26:43] *** Quits: timot (timot@moz-730F561B.bredband.tre.se) (Connection reset by peer)
[06:27:09] *** Quits: drrb (drrb@4D561226.896EE5A.377B9828.IP) (Quit: drrb)
[06:27:14] <dandy> So I was about to do a quick review between those commits, in less than a day 134 files changed! https://github.com/mozilla/rust/compare/1434b4bfcafe90cffa6627e3be18a9e5b6501ad1...6828d2e01860593a687f36397eb38dc338f092a9
[06:27:16] <dandy> that is so crazy
[06:27:29] *** Quits: wil (wil@moz-A2F0D33A.bootp.virginia.edu) (Quit: leaving)
[06:27:30] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:27:49] <ChrisMorgan> Wow! Only 134 files changed! :P
[06:28:00] <doomrobo> can someone please help with this? http://kib2.free.fr/pastebin/view_paste.php?id=125
[06:28:34] <ChrisMorgan> Why &[~int]?
[06:28:56] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[06:29:12] <doomrobo> where is there &[~int]?
[06:29:17] <ChrisMorgan> In such a case as that, I believe you'd need to change the *n to n.clone()
[06:29:21] <ChrisMorgan> The type of x
[06:29:30] <strcat> doomrobo: you're needlessly making a vector of ~int instead of int
[06:29:31] <ChrisMorgan> &'static [~int], to be more specific.
[06:29:44] *** Joins: KindOne (KindOne@moz-D75CF3E3.dynamic.ip.windstream.net)
[06:29:54] <doomrobo> strcat: it's a testcase. I have a more complicated version
[06:30:00] *** Joins: streamer45 (streamer45@moz-47A4E4E4.retail.telecomitalia.it)
[06:30:17] <ChrisMorgan> But as I said, mult(n.clone()) works.
[06:30:30] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[06:30:32] <strcat> well, the reason it doesn't work is because you're using ~int
[06:30:37] <strcat> if you used int it would work
[06:30:38] <doomrobo> ChrisMorgan: is there any way other way around it? I don't see the need to use clone
[06:30:46] <ChrisMorgan> Point is that mult needs an owned pointer, so you can't achieve it any other way.
[06:30:47] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[06:30:57] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:31:02] <strcat> doomrobo: because you're using ~T, ~T adds a destructor so it moves ownership
[06:31:02] <ChrisMorgan> Make mult use a reference instead.
[06:31:17] <doomrobo> reference to owned?
[06:31:24] <ChrisMorgan> Doesn't need to be.
[06:31:35] <ChrisMorgan> If it takes int, then you'd call mult(&**n)
[06:31:46] <dbaupp> dandy: just looking at the commit messages doesn't show anything that seems like it would break things :(
[06:32:05] <ChrisMorgan> That turns the &~int into an &int but shouldn't include any copying.
[06:32:18] *** Quits: GeneralMaximus (ankur@B94A34D7.5E52A1B.BE90E62C.IP) (Ping timeout)
[06:32:26] <dandy> yeah... I'm just doing random peeks at stuff now, but tomorrow my go sequential
[06:32:32] <doomrobo> ChrisMorgan: is there a destructive map method?
[06:33:01] <ChrisMorgan> doomrobo: what do you mean? map consumes the iterator.
[06:33:37] <ChrisMorgan> Sorry, not thinking straight; this ain't an iterator.
[06:33:43] <dandy> I may do a full wipe of my directories tomorrow too and clone/make from scratch
[06:34:00] <doomrobo> ChrisMorgan: I mean is there a function that I can use like map but invalidates the initial container after the map
[06:34:20] <dbaupp> doomrobo: .move_iter()
[06:34:33] <doomrobo> alright, let's see if that works with this
[06:34:47] <ChrisMorgan> i.e. vec.move_iter().map().collect() instead of vec.iter().map().collect()
[06:35:01] <ChrisMorgan> (vec.map() being a deprecated short form of the latter)
[06:35:02] <dbaupp> rusti: let v = ~[~1, ~2, ~3]; v.move_iter().map(|int_ptr| @int_ptr).to_owned_vec()
[06:35:03] -rusti- ~[@~1, @~2, @~3]
[06:35:20] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[06:35:24] <dbaupp> rusti: let v = ~[~1, ~2, ~3]; let _w = v.move_iter().map(|int_ptr| @int_ptr).to_owned_vec(); v // lets use v again...
[06:35:25] -rusti- pastebinned 8 lines of output: http://sprunge.us/WKKM
[06:36:14] <strcat> fwiw I'm going to redo the boxes sections in the tutorial yet again
[06:36:17] *** Joins: GeneralMaximus (ankur@861852B6.CB449585.BE90E62C.IP)
[06:37:27] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Ping timeout)
[06:37:29] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:38:01] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[06:39:13] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:41:59] *** Quits: vodik_ (simon@moz-CBE4BB13.cable.teksavvy.com) (Connection reset by peer)
[06:42:08] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[06:46:16] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[06:46:47] <dbaupp> http://huonw.github.io/isrustfastyet/mem/ \o/
[06:46:48] <dbaupp> cmr: ^
[06:47:18] <dbaupp> (hmmm, it appears to be partially broken.)
[06:51:30] *** Quits: kseo (kseo@338DE5BC.4166765B.485A6DF.IP) (Ping timeout)
[06:51:41] <doomrobo> alright guys. Thanks for the help. nighty night
[06:51:52] *** Quits: doomrobo (doomrobo@moz-C0E21A2B.nyc.res.rr.com) (Quit: until next time)
[06:52:15] *** Joins: kseo (kseo@338DE5BC.4166765B.485A6DF.IP)
[06:53:32] *** Quits: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP) (Ping timeout)
[06:53:48] *** Joins: valenting (Thunderbir@moz-E75529B3.euroweb.ro)
[06:53:59] *** Joins: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP)
[06:57:48] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[06:59:36] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[07:00:37] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[07:02:09] *** Joins: dew (Instantbir@moz-EEE6B2F8.dhcp.stls.mo.charter.com)
[07:03:03] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[07:03:43] <bogen> is it possible to have immutable struct members that can be modified by impl methods?
[07:04:30] <dbaupp> bogen: yes, if the method takes `&mut self`
[07:05:17] <bogen> dbaupp: yes, I'm doing that, however, if the pointer on the outside is mut then the struct members can be modified
[07:05:20] <strcat> bogen: fields are not inherently mutable/immutable
[07:05:22] <bogen> (Externally)
[07:05:29] <strcat> you need to make them private if you want to enforce immutability
[07:05:47] <bogen> ok, and then an access method...
[07:06:49] *** Quits: engla_ (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[07:08:04] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[07:12:19] *** Joins: aajk (aajk@moz-E1AE6B5.ip.telfort.nl)
[07:12:40] <aajk> how can i parse commandline argument to int?
[07:13:18] <dandy> so my rust 'std' not found issue was due to neglecting to copy the rustc folder over with everythign else
[07:13:49] <dandy> I doubt that was other people's issue but maybe try mentioning it if others are having trouble
[07:13:58] <aajk> let args : ~[~str] = std::os::args();
[07:14:07] <Eridius> rusti: let x: int = from_str("3"); x
[07:14:08] -rusti- pastebinned 7 lines of output: http://sprunge.us/ACOR
[07:14:21] <Eridius> rusti: let x: Option<int> = from_str("3"); x
[07:14:23] -rusti- Some(3)
[07:14:27] <Eridius> aajk: ^ use from_str()
[07:14:44] <dbaupp> rusti: let args = ~[~"executable_name", ~"1", ~"2"]; args.slice_from(1).iter().map(|s| from_str::<int>(*s)).to_owned_vec()
[07:14:45] -rusti- ~[Some(1), Some(2)]
[07:15:03] <Eridius> grr, borrowck is causing problems
[07:15:15] <aajk> i'll try that
[07:15:16] <aajk> thanks
[07:15:31] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:17:37] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[07:19:34] <aajk> let args : ~[~str] = std::os::args(); let max: Option<int> = from_str(args[1]); 
[07:19:45] <aajk> then i want to use max in a range(2, max)
[07:19:48] <aajk> but it errors
[07:20:00] *** Quits: dandy (dandy@moz-84CC8377.hsd1.co.comcast.net) (Quit: Leaving)
[07:20:06] <aajk> error: mismatched types: expected `<VI1>` but found `std::option::Option<int>` 
[07:20:09] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[07:22:20] <Eridius> ok, what the heck. I'm getting an error now that I think is the lack of once fns issue ("capture of moved value"). But this should have triggered the error with the old code!
[07:22:33] <Eridius> the `path` var is being captured. But the old path impl was non-copyable too
[07:23:35] <dbaupp> Eridius: where?
[07:23:39] <Eridius> although actually this shouldn't be moving path at all
[07:23:57] <Eridius> dbaupp: librustpkg/package_source.rs fn build_crates(). But it shouldn't be moving path to begin with, so I'm confused
[07:24:00] <Eridius> it should just be referencing path
[07:24:03] <dbaupp> aajk: `max` has type Option<int>, not int. so you need to extract it
[07:24:24] <dbaupp> rusti: let x: Option<int> = Some(1); x.expect("invalid int")
[07:24:25] -rusti- 1
[07:24:32] <dbaupp> rusti: let x: Option<int> = None; x.expect("invalid int")
[07:24:33] -rusti- task '<unnamed>' failed at 'invalid int', /build/rust-git/src/rust/src/libstd/option.rs:351application terminated with error code 101
[07:24:57] *** Joins: io2 (io2@moz-A6202C16.home.otenet.gr)
[07:25:25] <dbaupp> Eridius: do any methods in the new path take `self` by val?
[07:25:30] <Eridius> ok reading further, it's a moved value because it's being moved into the closures instead of merely referenced
[07:25:39] *** Quits: io2 (io2@moz-A6202C16.home.otenet.gr) (Quit: )
[07:25:46] *** Joins: io2 (io2@moz-A6202C16.home.otenet.gr)
[07:25:50] <Eridius> dbaupp: I already checked all the methods called from this code
[07:25:56] <dbaupp> Eridius: ok
[07:26:22] <Eridius>  note: `path` moved into closure environment here because it has type `~fn:Send(&mut extra::workcache::Exec) -> ~str`, which is non-copyable (perhaps you meant to use clone()?)
[07:26:33] <Eridius> so why didn't this affect the old path?
[07:26:56] * dbaupp has no idea
[07:27:57] <Eridius> the old path contained a bool and a ~[~str]. My path contains an Option<uint> and a ~[u8]. They should have the same constraints around copying/Send/etc
[07:28:31] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0/20130926170421])
[07:28:49] <dbaupp> yeah
[07:29:00] *** Quits: five (five@moz-F45C65F8.v4.ngi.it) (Ping timeout)
[07:30:05] <Eridius> this is rather problematic for me. I need to fix this so I can finish my path conversion
[07:31:17] <Eridius> oh dear, I think I figured it out.
[07:31:42] <Eridius> the rustc errors are not very helpful, but I think the issue is the old code calculated the str outside of prep.exec and the new code is inside
[07:31:52] <Eridius> only prep.exec needs ~fn:Send, context.with_prep takes a &fn just fine
[07:32:26] <Eridius> yes that's it
[07:34:13] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[07:34:59] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[07:35:37] <Eridius> woohoo, librustpkg compiled!
[07:35:39] <Eridius> ...now it's librustdoc :(
[07:35:53] <dbaupp> at least it's new librustdoc
[07:35:58] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[07:36:06] <Eridius> librustpkg had paths up the wazoo. I hope librustdoc is better
[07:36:11] <dbaupp> old librustdoc was upsetting :(
[07:36:27] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[07:36:27] <Eridius> I'm also afraid of what merge conflicts I'm going to get when I'm done
[07:36:34] <Eridius> since I'm operating on a 30-hour old master
[07:36:35] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[07:37:31] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[07:37:45] <dbaupp> haha, you know it's an awesome code base when 30 hours of nothing-special happening is reasonable cause for concern about rebase hell. :)
[07:37:51] <Eridius> :D
[07:38:07] <Eridius> dbaupp: I gave up on rebase. Didn't want to deal with updating older commits for newer changes. I have merges from master in
[07:38:22] <Eridius> so when I'm done with this, I'm going to merge master back in, fix up conflicts, then submit the PR
[07:38:30] <dbaupp> you might be told to get rid of them :P but yeah, that's reasonable
[07:38:32] <Eridius> and then by the time it gets through review I'll have more conflicts to fix, surely
[07:38:43] <Eridius> dbaupp: the only alternative is to have non-compilable-commits
[07:38:48] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[07:38:53] <dbaupp> yeah, it happens
[07:39:02] <Eridius> it's just too much work to try and update all the historical commits for correctness
[07:39:09] <Eridius> ugh, I hate having non-compilable commits
[07:39:10] <dbaupp> and isn't uncommon either
[07:39:15] <Eridius> at the very least it makes git-bisect unhappy
[07:44:26] <Eridius> oh excellent, librustdoc is actually pretty good about paths
[07:44:36] <Eridius> now for librusti ;)
[07:45:59] <strcat> dbaupp: https://github.com/mozilla/rust/pull/9589 r?
[07:46:02] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[07:47:24] <dbaupp> strcat: already on it, but I don't have time to do a full review
[07:48:30] <Eridius> and rusti compiles
[07:48:55] <strcat> acrichto: around to look at https://github.com/mozilla/rust/pull/9589 too? docs! ;p
[07:49:13] <Eridius> woohoo, I'm on to stage2!
[07:49:39] * Eridius hopes that `make check` actually passes
[07:50:44] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[07:51:19] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[07:52:10] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[07:54:00] <strcat> dbaupp: fixed that thing
[07:55:03] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[07:55:33] *** Quits: Liothen (liothen@moz-266BCA86.spkn.qwest.net) (Quit: Textual IRC Client: www.textualapp.com)
[07:55:36] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[07:56:24] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[07:56:38] *** Joins: squiddy (squiddy@moz-4265BEBB.adsl.alicedsl.de)
[07:58:12] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[07:59:55] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[08:04:25] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[08:05:49] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[08:10:29] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[08:12:04] *** Joins: jviereck (Adium@moz-D03659.dip0.t-ipconnect.de)
[08:13:06] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Quit: Leaving.)
[08:16:18] *** Quits: valenting (Thunderbir@moz-E75529B3.euroweb.ro) (Ping timeout)
[08:17:35] *** Joins: nkoep (nik@moz-116B611A.pool.mediaways.net)
[08:18:32] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Quit: Leaving)
[08:18:39] *** Quits: Shikita35 (gatita@2BDAD2DA.504510AB.88FACFF2.IP) (Quit: )
[08:19:44] *** Quits: jviereck (Adium@moz-D03659.dip0.t-ipconnect.de) (Quit: Leaving.)
[08:20:10] *** Joins: MrOrdinaire (Mibbit@28555C46.391F484.FD383126.IP)
[08:20:31] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[08:20:52] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:22:28] *** Joins: charmander (Mibbit@moz-22271C42.pool.mediaways.net)
[08:22:38] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:26:14] *** Quits: geal (geal@moz-615D228A.unhandledexpression.com) (Client exited)
[08:26:33] <charmander> Hi, I've had problems yesterday with configuring rust, being stuck at configure: CFG_CCACHE, this I could "solve" by using xcode 4 instead of 5, now it seems that I am stuck at compiling libuv... 15min now without any progress - xcrun again utilizing 100% cpu 
[08:31:11] *** Quits: aajk (aajk@moz-E1AE6B5.ip.telfort.nl) (Quit: Ik ga weg)
[08:31:29] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[08:32:57] *** Joins: geal (geal@moz-615D228A.unhandledexpression.com)
[08:36:07] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[08:41:34] *** Joins: valenting (Thunderbir@moz-E75529B3.euroweb.ro)
[08:46:02] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Ping timeout)
[08:46:27] *** Joins: wakandan (Mibbit@3ACC418E.8FF05F7.4605F140.IP)
[08:46:28] *** Joins: slackito (slackito@moz-7779E4A6.dyn.user.ono.com)
[08:46:45] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[08:49:28] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[08:53:33] *** Joins: Ferio (Mibbit@moz-23CDE542.fullrate.dk)
[08:54:14] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[08:56:38] *** Quits: valenting (Thunderbir@moz-E75529B3.euroweb.ro) (Ping timeout)
[08:56:40] *** Joins: Sindwiller (quassel@moz-743130B2.dynamic.hispeed.ch)
[08:57:41] *** Joins: valenting (Thunderbir@moz-E75529B3.euroweb.ro)
[08:58:35] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[08:58:56] *** Quits: io2 (io2@moz-A6202C16.home.otenet.gr) (Ping timeout)
[09:00:20] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[09:02:17] *** Joins: jensnockert (jensnocker@F1E3FD84.8AAAF769.FAAB0799.IP)
[09:02:22] *** Joins: pyrac (pyrac@moz-1C318C84.w92-162.abo.wanadoo.fr)
[09:02:49] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[09:03:18] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[09:10:26] *** Quits: valenting (Thunderbir@moz-E75529B3.euroweb.ro) (Ping timeout)
[09:15:07] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[09:16:14] *** Quits: jensnockert (jensnocker@F1E3FD84.8AAAF769.FAAB0799.IP) (Input/output error)
[09:21:32] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:21:58] *** Joins: pampam (Mibbit@674B2EEE.1DAEF47F.6DEE1277.IP)
[09:24:50] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[09:25:31] *** Joins: zeuxcg (zeuxcg@E46D3CE0.E7BADBF1.B0C2132F.IP)
[09:25:55] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:26:52] *** Joins: Ms2ger (Ms2ger@9D0A393.CB23CDC6.3773EA9F.IP)
[09:31:10] <zeuxcg> cmr: I'm confused :( Your change to gl-rs does the exact thing that you said was wrong? (workspace inside the repository)
[09:31:32] *** Joins: kseo_ (uid14607@moz-E77DEB21.irccloud.com)
[09:34:25] *** Quits: kseo (kseo@338DE5BC.4166765B.485A6DF.IP) (Client exited)
[09:34:25] *** kseo_ is now known as kseo
[09:35:10] *** Quits: charmander (Mibbit@moz-22271C42.pool.mediaways.net) (Quit: http://www.mibbit.com ajax IRC Client)
[09:36:23] *** Joins: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP)
[09:46:05] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[09:47:39] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[09:49:30] <wakandan> is the command to run all the tests in rust is "make check"?
[09:49:34] <wakandan> it seems so slow...
[09:50:34] <ChrisMorgan> wakandan: it does take a long time.
[09:54:23] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[09:55:18] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[09:56:33] *** Quits: zeuxcg (zeuxcg@E46D3CE0.E7BADBF1.B0C2132F.IP) (Ping timeout)
[09:58:00] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Ping timeout)
[09:58:31] *** Joins: zeuxcg (zeuxcg@E46D3CE0.E7BADBF1.B0C2132F.IP)
[09:58:57] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[09:59:00] <wakandan> i'm trying to work on this issue https://github.com/mozilla/rust/issues/9483
[09:59:33] <wakandan> does it mean I just have to modify from #[abi = "foo"] to extern "foo" {...}?
[09:59:37] <wakandan> I hope it's that simple
[10:00:46] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[10:01:18] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[10:01:26] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[10:02:12] <ChrisMorgan> I *think* so, but I'm not certain. It's something where the test suite *should* be thorough enough that merely running it all will cover all the requirements, but that may not be the case (in which case, new test cases need to be added).
[10:02:42] *** Quits: pampam (Mibbit@674B2EEE.1DAEF47F.6DEE1277.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:05:14] *** Joins: aeqwa (aeqwa@moz-FD7681AB.dsl.tropolys.de)
[10:09:10] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[10:09:59] *** Quits: Sindwiller (quassel@moz-743130B2.dynamic.hispeed.ch) (Client exited)
[10:10:05] *** Joins: bd (bd@moz-255B7184.cm-5-3c.dynamic.ziggo.nl)
[10:15:22] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[10:16:41] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[10:16:48] *** Quits: aeqwa (aeqwa@moz-FD7681AB.dsl.tropolys.de) (Quit: Lost terminal)
[10:17:42] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[10:18:54] *** Quits: bd (bd@moz-255B7184.cm-5-3c.dynamic.ziggo.nl) (Ping timeout)
[10:22:21] *** Joins: bd (bd@moz-A9D54CB.cm-5-3c.dynamic.ziggo.nl)
[10:24:41] *** Quits: msingle (Thunderbir@moz-1A29E89B.nrflva.fios.verizon.net) (Ping timeout)
[10:24:42] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:25:41] *** Joins: timot (timot@moz-1F31BE3A.mobile.tre.se)
[10:28:12] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:28:31] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[10:28:33] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[10:28:34] *** ChanServ sets mode: +o pnkfelix
[10:28:43] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[10:29:36] *** Joins: aeqwa (aeqwa@moz-FD7681AB.dsl.tropolys.de)
[10:29:53] *** Quits: zeuxcg (zeuxcg@E46D3CE0.E7BADBF1.B0C2132F.IP) (Ping timeout)
[10:31:29] *** Joins: valenting (Thunderbir@55FBCC0.8C025854.E16F0CF5.IP)
[10:31:53] <wakandan> ChrisMorgan: build finish, doesnt' look like there's any error 
[10:31:57] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[10:33:13] *** Joins: canhtak (jeremy@moz-3FFB5CDA.wl.t.ulaval.ca)
[10:33:31] *** Quits: aeqwa (aeqwa@moz-FD7681AB.dsl.tropolys.de) (Quit: Lost terminal)
[10:34:46] *** Joins: aeqwa (aeqwa@moz-FD7681AB.dsl.tropolys.de)
[10:35:15] *** Joins: jensnockert (jensnocker@F1E3FD84.8AAAF769.FAAB0799.IP)
[10:35:28] *** Joins: zeuxcg (zeuxcg@E46D3CE0.E7BADBF1.B0C2132F.IP)
[10:36:26] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[10:36:44] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[10:40:31] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[10:40:45] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[10:44:17] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[10:48:42] *** Joins: charmade (Mibbit@moz-22271C42.pool.mediaways.net)
[10:57:09] <MrOrdinaire> wakandan: +1
[10:58:34] <wakandan> then does it work? :|
[10:59:07] *** Quits: jensnockert (jensnocker@F1E3FD84.8AAAF769.FAAB0799.IP) (Input/output error)
[10:59:21] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[11:00:56] <MrOrdinaire> wakandan: not sure
[11:01:02] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[11:02:18] *** Quits: KindOne (KindOne@moz-D75CF3E3.dynamic.ip.windstream.net) (Ping timeout)
[11:02:58] *** Quits: zeuxcg (zeuxcg@E46D3CE0.E7BADBF1.B0C2132F.IP) (Ping timeout)
[11:03:28] *** Quits: dew (Instantbir@moz-EEE6B2F8.dhcp.stls.mo.charter.com) (Ping timeout)
[11:04:03] *** Joins: dew (Instantbir@moz-EEE6B2F8.dhcp.stls.mo.charter.com)
[11:06:38] *** Quits: valenting (Thunderbir@55FBCC0.8C025854.E16F0CF5.IP) (Ping timeout)
[11:07:07] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[11:07:47] *** Joins: KindTwo (KindOne@moz-D7E408F8.dynamic.ip.windstream.net)
[11:09:01] <charmade> was finally able to compile 0.8, had to do: sudo xcode-select -switch /usr/bin - still it shouldn't just block (xcrun) and run with 100% cpu..
[11:09:06] *** KindTwo is now known as KindOne
[11:09:49] <pnkfelix> charmade: is there a ticket tracking this?
[11:09:55] *** Quits: nkoep (nik@moz-116B611A.pool.mediaways.net) (Ping timeout)
[11:10:39] <charmade> pnkfelix: didn't see anything, at least not with an a-macosx label
[11:11:43] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[11:11:57] <pnkfelix> charmade: would you mind filing one, and put whatever info about your system (OS version, Xcode version, etc) on it?
[11:12:08] *** Quits: Ferio (Mibbit@moz-23CDE542.fullrate.dk) (Quit: http://www.mibbit.com ajax IRC Client)
[11:12:26] <charmade> pnkfelix: yes, will do
[11:13:26] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[11:16:57] <olsonjeffery> rusti: let list = [1, 2, 4];
[11:16:59] -rusti- <anon>:7:13: 7:17 warning: unused variable: `list` [-W unused-variable (default)]
[11:16:59] -rusti- <anon>:7          let list = [1, 2, 4];
[11:16:59] -rusti-                       ^~~~
[11:16:59] -rusti- ()
[11:18:00] *** Quits: KindOne (KindOne@moz-D7E408F8.dynamic.ip.windstream.net) (Ping timeout)
[11:18:01] *** Joins: seryogah (holoirc@moz-5CB6731B.dip0.t-ipconnect.de)
[11:19:35] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[11:19:42] *** Quits: MrOrdinaire (Mibbit@28555C46.391F484.FD383126.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:22:37] *** Joins: KindOne (KindOne@moz-C01DDA3F.dynamic.ip.windstream.net)
[11:24:25] *** Joins: nkoep (nik@moz-6D3F9A4B.vpn.rwth-aachen.de)
[11:24:33] *** Quits: KindOne (KindOne@moz-C01DDA3F.dynamic.ip.windstream.net) (Ping timeout)
[11:24:44] *** Joins: KindTwo (KindOne@D936B548.B11A32F.EC6A1518.IP)
[11:25:30] *** KindTwo is now known as KindOne
[11:27:50] *** Quits: KindOne (KindOne@D936B548.B11A32F.EC6A1518.IP) (Ping timeout)
[11:27:51] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:27:51] *** Joins: KindTwo (KindOne@moz-1C5D90CB.dynamic.ip.windstream.net)
[11:29:08] *** KindTwo is now known as KindOne
[11:31:28] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:32:49] *** Joins: valenting (Thunderbir@55FBCC0.8C025854.E16F0CF5.IP)
[11:33:48] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[11:35:10] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[11:35:25] *** Joins: sergi (textual@moz-DB55470C.upc-a.chello.nl)
[11:39:02] *** Quits: KindOne (KindOne@moz-1C5D90CB.dynamic.ip.windstream.net) (Ping timeout)
[11:43:02] *** Joins: KindOne (KindOne@742F85D1.8E36DE4.EC6A1518.IP)
[11:46:50] *** Quits: sergi (textual@moz-DB55470C.upc-a.chello.nl) (Quit: Textual IRC Client: www.textualapp.com)
[11:46:54] *** Quits: KindOne (KindOne@742F85D1.8E36DE4.EC6A1518.IP) (Ping timeout)
[11:46:54] *** Quits: GeneralMaximus (ankur@861852B6.CB449585.BE90E62C.IP) (Ping timeout)
[11:51:29] *** Joins: GeneralMaximus (ankur@D2FC7BAD.3B7EC11C.BE90E62C.IP)
[11:51:48] *** Joins: KindOne (KindOne@moz-C2792F8.dynamic.ip.windstream.net)
[11:52:36] *** Quits: ysuzuki (ysuzuki@moz-FEE44B6.net220148245.t-com.ne.jp) (Quit: Tiarra 0.1+svn-39209: SIGINT received; exit)
[11:53:05] *** Joins: zeuxcg (zeuxcg@E46D3CE0.E7BADBF1.B0C2132F.IP)
[11:53:18] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[11:54:07] *** Quits: KindOne (KindOne@moz-C2792F8.dynamic.ip.windstream.net) (Ping timeout)
[11:54:08] *** Joins: KindTwo (KindOne@moz-C2792F8.dynamic.ip.windstream.net)
[11:54:29] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[11:54:37] *** KindTwo is now known as KindOne
[11:54:45] <zeuxcg> rusti: fn foo(v: &Option<~int>) -> int { match *v { Some(x) => *x, None => 0 } }
[11:54:45] -rusti- <anon>:7:54: 7:61 error: cannot move out of dereference of & pointer
[11:54:46] -rusti- <anon>:7          fn foo(v: &Option<~int>) -> int { match *v { Some(x) => *x, None => 0 } }
[11:54:46] -rusti-                                                                ^~~~~~~
[11:54:46] -rusti- error: aborting due to previous error
[11:54:46] -rusti- application terminated with error code 101
[11:55:01] <zeuxcg> Is it possible to write foo() without is_none/is_some?
[11:55:24] <zeuxcg> Obviously without changing the signature :)
[11:55:49] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[11:56:14] <Ms2ger>  rusti: fn foo(v: &Option<~int>) -> int { match v { &Some(x) => *x, &None => 0 } }
[11:56:17] <Ms2ger> rusti: fn foo(v: &Option<~int>) -> int { match v { &Some(x) => *x, &None => 0 } }
[11:56:18] -rusti- <anon>:7:54: 7:61 error: cannot move out of dereference of & pointer
[11:56:18] -rusti- <anon>:7          fn foo(v: &Option<~int>) -> int { match v { &Some(x) => *x, &None => 0 } }
[11:56:18] -rusti-                                                                ^~~~~~~
[11:56:18] -rusti- error: aborting due to previous error
[11:56:18] -rusti- application terminated with error code 101
[11:56:36] <Ms2ger> rusti: fn foo(v: &Option<~int>) -> int { match v { &Some(ref x) => *x, &None => 0 } }
[11:56:36] -rusti- <anon>:7:43: 7:85 error: match arms have incompatible types: expected `~int` but found `<VI0>` (expected ~-ptr but found integral variable)
[11:56:36] -rusti- <anon>:7          fn foo(v: &Option<~int>) -> int { match v { &Some(ref x) => *x, &None => 0 } }
[11:56:36] -rusti-                                                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[11:56:37] -rusti- error: aborting due to previous error
[11:56:37] -rusti- application terminated with error code 101
[11:57:29] <zeuxcg> ah, ref
[11:57:30] <zeuxcg> fn foo(v: &Option<~int>) -> int { match *v { Some(ref x) => **x, None => 0 } }
[11:57:34] <zeuxcg> rusti: fn foo(v: &Option<~int>) -> int { match *v { Some(ref x) => **x, None => 0 } }
[11:57:35] *** Quits: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp) (Quit: Tiarra 0.1+svn-39209: SIGINT received; exit)
[11:57:35] -rusti- ()
[11:57:39] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[11:57:40] <zeuxcg> Ms2ger: thanks
[11:58:19] *** Quits: charmade (Mibbit@moz-22271C42.pool.mediaways.net) (Quit: http://www.mibbit.com ajax IRC Client)
[11:59:12] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[11:59:28] *** Quits: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp) (Quit: Tiarra 0.1+svn-39209: SIGINT received; exit)
[11:59:31] *** Quits: valenting (Thunderbir@55FBCC0.8C025854.E16F0CF5.IP) (Ping timeout)
[11:59:32] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[11:59:44] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[12:01:04] <Ms2ger> rusti: fn foo(v: &Option<~int>) -> int { match v { &Some(~x) => x, &None => 0 } }
[12:01:05] -rusti- ()
[12:01:15] <Ms2ger> zeuxcg, I ended up with this ^
[12:01:32] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[12:03:28] *** Joins: lhatsk (Adium@moz-22271C42.pool.mediaways.net)
[12:05:02] *** Quits: slackito (slackito@moz-7779E4A6.dyn.user.ono.com) (Quit: leaving)
[12:07:55] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[12:08:07] *** Quits: zeuxcg (zeuxcg@E46D3CE0.E7BADBF1.B0C2132F.IP) (Quit: Leaving)
[12:09:40] <ChrisMorgan> Oh no! bors is idle!
[12:13:55] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[12:18:10] <bstrie> bors thinks that the release of 0.8 means that he gets to take a vacation
[12:18:14] * bstrie cracks the robo-whip
[12:19:00] <ChrisMorgan> The only robo-whip is spelled "r+". (Or occasionally, "r=someone".)
[12:21:54] *** Quits: bd (bd@moz-A9D54CB.cm-5-3c.dynamic.ziggo.nl) (Ping timeout)
[12:22:49] *** Joins: saneyuki (saneyuki@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[12:23:47] *** Quits: saneyuki (saneyuki@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Quit: )
[12:23:51] *** Joins: saneyuki (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[12:24:38] *** Joins: jensnockert (jensnocker@F1E3FD84.8AAAF769.FAAB0799.IP)
[12:25:05] *** Quits: saneyuki (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[12:25:09] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[12:25:59] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[12:27:31] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[12:27:56] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[12:30:54] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:30:56] *** Quits: jensnockert (jensnocker@F1E3FD84.8AAAF769.FAAB0799.IP) (Input/output error)
[12:31:12] <bstrie> r=robowhip
[12:34:35] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:41:27] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[12:41:36] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[12:41:55] *** Quits: timot (timot@moz-1F31BE3A.mobile.tre.se) (Quit: Konversation terminated!)
[12:42:31] *** Joins: timot (timot@moz-1F31BE3A.mobile.tre.se)
[12:43:51] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[12:46:27] *** Joins: nick (Mibbit@D2540B48.15F87C4.520CDC98.IP)
[12:47:04] *** Quits: tefter (tefter@B5D119DC.B856A0A1.73804765.IP) (Ping timeout)
[12:47:16] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[12:48:35] *** Quits: canhtak (jeremy@moz-3FFB5CDA.wl.t.ulaval.ca) (Quit: canhtak)
[12:48:51] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[12:49:08] <wakandan> is "make test" the correct way to test codes in rust?
[12:49:34] <wakandan> it doesn't seem to be updated to my code changes....
[12:51:30] <nick> Hi! First, I'm sorry to ask a question that is not directly related to rust, but i could use the help of some of the experienced developers here....What are some good books/talks/web resources on concurrency/parallel programming that explains memory ordering and other associated hardware issues?
[12:52:34] <wakandan> nick: uhm would you like a practice oriented book or a theory oriented book?
[12:53:05] <wakandan> nick: i'm not an "experienced developer" by any mean, but my uni does have courses on that 
[12:53:22] <wakandan> nick: and the materials used there was quite good
[12:53:43] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[12:54:12] <nick> wakandan: i would like to read both kinds... 
[12:55:06] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[12:55:31] <wakandan> nick: hold on a moment
[12:56:45] <wakandan> nick: "Concurrency: State Models & Java Programs, 2nd Edition" 
[12:56:54] <wakandan> "Jeff Magee & Jeff Kramer"
[12:57:32] <wakandan> this book explains in detail how to to approach & solve a concurrency problem structurally 
[12:57:42] <wakandan> a lot of explanations on issues with concurrency programming
[12:58:11] <wakandan> there's ebook online...
[12:58:26] <ChrisMorgan> wakandan: "make check" runs the Rust test suite
[12:58:50] * ChrisMorgan would be cautious about a Java-oriented concurrency book
[12:58:50] <wakandan> hmm
[12:58:56] <wakandan> it runs the first time
[12:59:24] <wakandan> then i made some other changes, but running "make check" again doesn't seem to show any difference...
[12:59:38] <wakandan> i'm doing "make" only, to build the whole stuff?
[12:59:59] *** Joins: maik (maik@moz-DD39128A.dip0.t-ipconnect.de)
[13:00:05] <wakandan> nick: Parallel Programming in C with MPI and OpenMP McGraw-Hill (2003) ISBN 0-07-282256-2
[13:00:06] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[13:00:09] <ChrisMorgan> make check *should* detect changes and trigger a rebuild of whatever is necessary.
[13:00:24] <nick> wakandan: thanks! will add it to my list. ChrisMorgan: could you elaborate on why you think that way? 
[13:00:26] <wakandan> nick: this book is text book for my parallel processing course, very interesting
[13:01:02] <ChrisMorgan> MPI is designed for parallel rather than concurrent programming. There are significant differences between the models.
[13:01:18] <wakandan> nick: it teachs concepts and show how to use openmp, a c lib or something to do parallel programming
[13:01:47] <wakandan> nick: I can share my lecture note if you would like, but I'm sure there're better materials out there...
[13:01:50] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[13:01:57] <wakandan> nick: computer engineering isn't a strong suite of my school
[13:02:04] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Ping timeout)
[13:02:05] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[13:02:14] <lhatsk> wakandan: where are you studying?
[13:02:17] <wakandan> ChrisMorgan: yep...
[13:02:28] <wakandan> ChrisMorgan: oh "make check"
[13:02:50] <wakandan> ChrisMorgan: I ran "make test" T_T
[13:03:02] <wakandan> ChrisMorgan: what's the difference between the two?
[13:03:09] <nick> ChrisMorgan: i was referring to your comment on Java-oriented concurrency books....wakadan: thanks again!!
[13:03:11] <ChrisMorgan> nick: a thing focusing on particular libraries or languages will be likely to constrain the concepts discussed to those supported by those tools. Java's concurrency support (assuming standard library) is not particularly nice. If wanting to *really* learn such a thing, I'd be wanting to go with a theory-oriented education.
[13:03:13] <wakandan> lhatsk: computer engineering, but graduated :P
[13:03:51] <wakandan> ChrisMorgan: yeah, the java book above was just using java as a implementation language 
[13:04:09] *** Quits: maik (maik@moz-DD39128A.dip0.t-ipconnect.de) (Ping timeout)
[13:04:09] <wakandan> ChrisMorgan: and also there's tools in java to help learning the concepts...
[13:04:16] <wakandan> ChrisMorgan: I guess that's why it was chosen
[13:04:21] <nick> ChrisMorgan: any good resources for the theory of concurrency...
[13:04:26] <wakandan> ChrisMorgan: ok seems to be running
[13:04:52] <ChrisMorgan> This may be different for languages where the concurrency/whatnot is really part of the core language design; my gut feeling would be that books about concurrency in Erlang, for example, would be likely to be decent: concurrency is a very significant part of what the language is about.
[13:04:58] <wakandan> nick: care to share with us why you're interested? :P
[13:05:00] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Quit: WeeChat 0.4.2-rc2)
[13:05:22] <wakandan> ChrisMorgan: I heard concurrency in Erlang is a bomb :D
[13:05:24] <ChrisMorgan> nick: I don't know. I haven't ever tried to *really* learn it; I've just picked it up over the past couple of years.
[13:05:57] <ChrisMorgan> wakandan: not sure what you mean by "a bomb" there. Could mean "really good" or "really bad".
[13:06:07] <wakandan> ChrisMorgan: haha, I meant "good" 
[13:06:34] <wakandan> ChrisMorgan: tried to learn it but if I remember correctly it was quite hard for me to understand the "actor model" or stuff like that 
[13:06:34] <ChrisMorgan> That was my feeling, but it's one of those where text doesn't convey the nuances of our crazy language design...
[13:06:57] <wakandan> wakandan: never gave it a real try
[13:07:21] <nick> wakandan: my interest is in understanding how concurrent systems are implemented at the lowest level...memory barriers, cache invalidation etc...and how the theory is translated to these
[13:07:58] <wakandan> nick: oh boy...you must be very patient then 
[13:08:12] <wakandan> nick: we spent something like 2 sems just to get through them
[13:08:27] <wakandan> nick: but I liked them a lot
[13:08:37] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[13:08:53] <wakandan> hi engla!
[13:09:02] <wakandan> would an ssd help with building process?
[13:09:03] <nick> also i have this dream of building a digital audio workstation...and my previous attempts failed as i was stunned by the complexity of the hardware 
[13:09:19] <wakandan> my cpu is only 60% but it's really slow here ...
[13:09:34] <ChrisMorgan> wakandan: building rust stuff is largely CPU-bound.
[13:09:40] <wakandan> :(
[13:09:52] <ChrisMorgan> Your 60% figure suggests a dual-core machine. Right?
[13:10:00] <wakandan> ChrisMorgan: yeah...
[13:10:05] <nick> wakandan: concurrency to the rescue make -j4 :P
[13:10:11] <ChrisMorgan> Yep, because it's pretty much sequential.
[13:10:17] <wakandan> T_T
[13:10:46] <wakandan> the "macro" thing in rust, where can I read about it?
[13:10:55] <wakandan> I was stucking with an issue because of that 
[13:10:56] <ChrisMorgan> nick: that'll speed up building C code (e.g. LLVM, jemalloc) but do very little to the Rust parts of the build process.
[13:10:58] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[13:11:32] <nick> ChrisMorgan: wasn't there a project to have a build system integrated into rustc?
[13:11:46] <ChrisMorgan> wakandan: http://static.rust-lang.org/doc/master/tutorial-macros.html
[13:11:57] <ChrisMorgan> nick: what do you mean by that?
[13:12:23] <nick> ChrisMorgan:....i think it was called cargo or something...
[13:12:28] <ChrisMorgan> rustpkg
[13:12:57] <ChrisMorgan> (Cargo was ages and ages ago. It got replaced around 0.4 or so, I think, with rustpkg.)
[13:13:06] <wakandan> ChrisMorgan: thanks
[13:13:07] <nick> yeah....how mature is rustpkg? 
[13:13:26] <ChrisMorgan> Not. But you can do plenty with it now.
[13:15:09] <nick> ChrisMorgan: will rustpkg avoid rebuilding the entire crate for single line changes?
[13:15:25] <ChrisMorgan> That's not what rustpkg is there for.
[13:15:33] <ChrisMorgan> That sort of thing is still the domain of rustc.
[13:16:03] <ChrisMorgan> (Wow, it was only February when cargo was replaced with rustpkg. Ages and ages ago indeed!)
[13:16:45] <ChrisMorgan> nick: see http://static.rust-lang.org/doc/master/tutorial-rustpkg.html for info about what rustpkg is for and how to use it
[13:16:53] <olsonjeffery> off to my rust presentation, wish me luck!
[13:17:23] <wakandan> olsonjeffery: you're doing it now?
[13:17:26] <nick> ChrisMorgan: ha....so how will rustc handle the issue? 
[13:18:28] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[13:18:39] <ChrisMorgan> nick: I don't know. Probably retaining intermediate results for comparison so it can figure out what needs redoing or further checking.
[13:18:55] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[13:19:24] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[13:19:28] <wakandan> olsonjeffery: is there anyway I can see it? is there a broadcast or something? 
[13:19:34] <wakandan> I want to see rust presentation :(
[13:19:40] <nick> speaking of presentations....i'm not able to view this one https://air.mozilla.org/intern-presentations-reed/ ...was it a live webcast and now gone for event?
[13:19:56] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[13:20:38] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[13:20:57] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[13:21:13] <engla> olsonjeffery: awesome
[13:21:22] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[13:22:16] <olsonjeffery> wakandan: no, sorry.. i might record it.. if i do, i will upload/share
[13:22:25] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[13:22:29] <olsonjeffery> cheers
[13:23:03] <wakandan> olsonjeffery: cool, good luck :P
[13:23:15] <bstrie> someone has a rust PPA, right?
[13:23:24] <nick> olsonjeffery: good luck...and please do try to record it....:)
[13:23:28] <wakandan> bstrie: there is? 
[13:23:37] <bstrie> thought there was
[13:24:05] <nick> bstrie: yes...hold on...i'll retrieve it from my source list..
[13:24:11] *** Joins: maik (maik@moz-5DA9E925.dip0.t-ipconnect.de)
[13:25:35] <nick> bstrie: http://ppa.launchpad.net/hansjorg/rust/ ...
[13:25:54] <bstrie> thanks
[13:26:08] <nick> your welcome
[13:26:15] <bstrie> last modified, 14 jul...
[13:26:24] <bstrie> so I guess it's not on 0.8, then :)
[13:26:24] <nick> *you're
[13:27:05] *** Joins: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr)
[13:27:40] <nick> bstrie: https://launchpad.net/~hansjorg/+archive/rust has .8 last modified on 27 sept
[13:28:00] *** Quits: derboi_c (derboi_c@510621FB.DF3CA0D0.BA2F4534.IP) (Quit: Lost terminal)
[13:28:47] <engla> dbaupp: can you retry this? https://github.com/mozilla/rust/pull/9583  
[13:29:46] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[13:30:14] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[13:30:36] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0/20130926170421])
[13:31:28] <bstrie> nick: cool
[13:31:59] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[13:34:03] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[13:38:17] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[13:40:35] *** Quits: maik (maik@moz-5DA9E925.dip0.t-ipconnect.de) (Ping timeout)
[13:41:15] *** Quits: tefter (tefter@B5D119DC.B856A0A1.73804765.IP) (Ping timeout)
[13:41:24] *** Joins: msingle (Thunderbir@moz-1A29E89B.nrflva.fios.verizon.net)
[13:41:27] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[13:42:25] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: WeeChat 0.4.1)
[13:45:53] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[13:49:32] *** Quits: cdidd (cdidd@moz-F09ED9F6.broadband.corbina.ru) (Input/output error)
[13:50:20] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[13:50:52] *** Joins: maik (maik@moz-5DA9E925.dip0.t-ipconnect.de)
[13:53:02] *** Joins: SteveMcQwark (SteveMcQwa@moz-7CFCF343.cpe.net.cable.rogers.com)
[13:53:14] *** Quits: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[13:53:29] *** Joins: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP)
[13:56:44] *** Quits: SteveMcQwark (SteveMcQwa@moz-7CFCF343.cpe.net.cable.rogers.com) (Quit: SteveMcQwark)
[13:57:33] *** Quits: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[13:57:45] *** Quits: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[13:57:51] *** Joins: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP)
[13:58:29] *** Joins: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP)
[13:58:38] *** Joins: jordyd (jordyd@moz-2C53E992.seg41.ucf.edu)
[13:59:39] *** Joins: SteveMcQwark (SteveMcQwa@moz-7CFCF343.cpe.net.cable.rogers.com)
[14:00:29] *** Quits: seryogah (holoirc@moz-5CB6731B.dip0.t-ipconnect.de) (Quit: seryogah)
[14:00:29] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[14:02:10] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[14:02:41] *** Quits: SteveMcQwark (SteveMcQwa@moz-7CFCF343.cpe.net.cable.rogers.com) (Quit: SteveMcQwark)
[14:05:09] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[14:11:08] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[14:11:16] *** Quits: robarnold (rob@moz-59F6B5.hfc.comcastbusiness.net) (Ping timeout)
[14:11:54] <ChrisMorgan> There, I finally have more-or-less-automatic script benchmarks for comparing rust-http with Go and Node servers :-)
[14:12:07] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[14:13:38] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[14:14:22] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[14:15:06] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[14:15:23] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[14:15:25] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[14:15:53] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[14:17:50] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[14:18:42] <dbaupp> engla: a segfault! :(
[14:18:47] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[14:18:53] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[14:18:53] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[14:19:41] <dbaupp> rusti: let x = ~5; let y = x.clone(); y // kimundi 
[14:19:42] -rusti- ~5
[14:20:19] <dbaupp> engla: retried :)
[14:20:45] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[14:21:18] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[14:21:19] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[14:21:56] *** Quits: maik (maik@moz-5DA9E925.dip0.t-ipconnect.de) (Ping timeout)
[14:21:56] *** Quits: msingle (Thunderbir@moz-1A29E89B.nrflva.fios.verizon.net) (Ping timeout)
[14:22:20] *** Joins: slackito (slackito@moz-7779E4A6.dyn.user.ono.com)
[14:22:23] *** Quits: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP) (Client exited)
[14:22:32] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[14:23:07] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[14:24:57] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Ping timeout)
[14:25:30] *** Quits: timot (timot@moz-1F31BE3A.mobile.tre.se) (Ping timeout)
[14:25:42] *** Joins: timot (timot@moz-1F31BE3A.mobile.tre.se)
[14:27:04] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[14:27:06] *** Joins: foodoo (foodoo@moz-BCF5859F.pool.mediaways.net)
[14:28:30] *** Joins: jonathanmarvens (jonathanma@1B1F2BDF.A10B0BF1.3A99D594.IP)
[14:30:03] <engla> great
[14:30:32] <ChrisMorgan> rust-http is around 1.5 slower than Node at concurrency levels 1, 2, 3, 4 and 8, and around 1.53 slower than Go (Go is still improving at concurrency of 8 while rust-http has started to decline after 3 or 4, all this on a dual-core machine). It's the task spawn and connection accept which are the slowest bits.
[14:30:47] *** Joins: SteveMcQwark (SteveMcQwa@moz-7CFCF343.cpe.net.cable.rogers.com)
[14:30:58] <dbaupp> ChrisMorgan: it no longer crashes with concurrency? \o/
[14:31:03] <ChrisMorgan> Correct.
[14:31:17] <ChrisMorgan> I believe olsonjeffery is the one who fixed that up.
[14:31:38] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[14:32:10] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[14:32:32] * ChrisMorgan thinks how cool it'd be if you were in the middle of a talk about Rust and a growl-style notification came up with that message
[14:32:33] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[14:32:38] <dbaupp> cool <3 rt interns
[14:33:00] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[14:34:04] *** Quits: SteveMcQwark (SteveMcQwa@moz-7CFCF343.cpe.net.cable.rogers.com) (Quit: SteveMcQwark)
[14:36:47] *** Joins: Azdle (patrick@moz-8C723B60.hsd1.mn.comcast.net)
[14:37:10] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[14:37:10] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:37:14] <ChrisMorgan> Performance is, however, worse than it was a few weeks ago, especially with concurrency > 1.
[14:37:50] <dbaupp> :(
[14:38:00] <dbaupp> does perf say anything of interest?
[14:38:13] <ChrisMorgan> Haven't tried it yet. And I'm going to bed now.
[14:38:18] <dbaupp> (specifically, does transmute show up a lot?)
[14:38:22] <dbaupp> oh, good night.
[14:38:35] <ChrisMorgan> You can try it yourself, if you like. Or you can go to bed yourself :-)
[14:39:01] <dbaupp> heh, never! :P
[14:39:08] <ChrisMorgan> What, never?
[14:39:24] * ChrisMorgan waits to see if the response is according to type
[14:40:02] <dbaupp> well, hardly ever
[14:40:07] <ChrisMorgan> Oh, good!
[14:40:23] * dbaupp definitely didn't just use google
[14:40:27] <ChrisMorgan> (Correct would have been "No, never!", but I'll let you skip that one.)
[14:40:35] <ChrisMorgan> What, DDG?
[14:40:41] <ChrisMorgan> It'd be rather distressing if you never went to bed.
[14:40:45] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:41:00] * dbaupp is currently lying *on* his bed
[14:41:45] <lhatsk> I'm still struggling with traits and I've barely an idea what I'm doing, nonetheless: http://paste.lisp.org/display/139196 I looked at some implementations in libstd and libextra (priority_queue for instance), but they don't use traits to achieve smth similar, any hints? I basically want to be able to plug in any data structure that implements iterator and use a specific function to access it
[14:43:16] <ChrisMorgan> At present there's only Iterator, and you're looking for Iterable. That will come, but isn't there yet.
[14:44:25] <ChrisMorgan> Try replacing your &'a with &'self, and scrap the <'a>.
[14:45:21] <engla> lhatsk: a trait similar to this would exist if it could be expressed in current Rust
[14:45:30] *** Quits: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[14:45:33] *** Joins: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP)
[14:46:12] *** Joins: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[14:46:38] <ChrisMorgan> Indeed, the fact that it can't be expressed is why it doesn't exist. My tips there are useless.
[14:46:54] <engla> it's the issue https://github.com/mozilla/rust/issues/7597   even though the issue doesn't have much details
[14:47:14] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[14:47:22] *** Joins: valenting (Thunderbir@55FBCC0.8C025854.E16F0CF5.IP)
[14:47:23] <lhatsk> hmmm, with: fn iterate(&'self self) -> It; there are no compiler errors anymore
[14:47:53] *** Quits: jonathanmarvens (jonathanma@1B1F2BDF.A10B0BF1.3A99D594.IP) (Input/output error)
[14:48:00] <engla> I think the 'self  is redundant in that position
[14:48:25] *** Joins: jonathanmarvens (jonathanma@1B1F2BDF.A10B0BF1.3A99D594.IP)
[14:48:33] <lhatsk> without the 'self I get the same error as before
[14:48:40] <engla> hm ok
[14:48:41] *** Quits: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[14:49:02] *** Quits: valenting (Thunderbir@55FBCC0.8C025854.E16F0CF5.IP) (Ping timeout)
[14:49:20] <ChrisMorgan> dbaupp: in the last two months, rust-http performance measured with ab (separate connection per request) has gone down around 25%.
[14:49:21] *** Quits: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[14:49:55] <ChrisMorgan> Meanwhile, Go and Node have improved 5-20%.
[14:50:00] *** Joins: maik (maik@moz-5DA9E925.dip0.t-ipconnect.de)
[14:50:12] *** Quits: jonathanmarvens (jonathanma@1B1F2BDF.A10B0BF1.3A99D594.IP) (Ping timeout)
[14:50:34] *** Joins: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP)
[14:50:37] <dbaupp> ChrisMorgan: :(
[14:51:45] <lhatsk> ChrisMorgan: why do you think there are useless?
[14:52:08] <ChrisMorgan> lhatsk: just that they don't solve the problem at all.
[14:52:25] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[14:52:33] <ChrisMorgan> Anyway, I'm going to bed. Really!
[14:52:47] <ChrisMorgan> *sigh* rust-http is wasting so much of my time.
[14:53:03] <polyfractal> :P
[14:53:08] <ChrisMorgan> I should never have got into Rust. It's a drug! Escape while you have the chance!
[14:53:10] <ChrisMorgan> :-)
[14:53:19] <amatus> the tutorial on tasks and communication doesn't mention if send blocks or not
[14:53:26] <amatus> are streams buffered?
[14:53:31] <ChrisMorgan> No.
[14:53:33] *** Joins: Ferreus (ferreus@moz-80A38711.dyn.telefonica.de)
[14:53:47] <ChrisMorgan> (That is, I/O streams.)
[14:53:50] *** Quits: Ferreus (ferreus@moz-80A38711.dyn.telefonica.de) (Quit: WeeChat 0.4.1)
[14:54:14] <amatus> how do i make a buffered stream?
[14:54:22] <engla> comm::stream() is infinitely buffered
[14:54:26] <amatus> oh good
[14:54:28] *** Joins: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP)
[14:55:33] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[14:55:34] *** Joins: Ferreus (ferreus@moz-80A38711.dyn.telefonica.de)
[14:55:56] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[14:55:56] *** Quits: maik (maik@moz-5DA9E925.dip0.t-ipconnect.de) (Ping timeout)
[14:58:56] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[14:58:56] *** ChanServ sets mode: +o pnkfelix
[14:59:41] *** Joins: valenting (Thunderbir@55FBCC0.8C025854.E16F0CF5.IP)
[15:00:29] *** Quits: timot (timot@moz-1F31BE3A.mobile.tre.se) (Ping timeout)
[15:00:52] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:01:25] *** Quits: valenting (Thunderbir@55FBCC0.8C025854.E16F0CF5.IP) (Ping timeout)
[15:02:25] *** Joins: timot (timot@moz-1F31BE3A.mobile.tre.se)
[15:02:42] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[15:06:29] *** Joins: valenting (Thunderbir@55FBCC0.8C025854.E16F0CF5.IP)
[15:07:42] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[15:07:50] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[15:08:17] *** Quits: valenting (Thunderbir@55FBCC0.8C025854.E16F0CF5.IP) (Ping timeout)
[15:09:12] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[15:10:48] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[15:12:38] *** Quits: timot (timot@moz-1F31BE3A.mobile.tre.se) (Quit: Konversation terminated!)
[15:13:39] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[15:14:11] *** Quits: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr) (Input/output error)
[15:14:23] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[15:16:29] *** Joins: timot (timot@moz-1F31BE3A.mobile.tre.se)
[15:16:50] *** Joins: lenstr_ (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[15:17:02] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Ping timeout)
[15:19:02] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[15:19:14] <wakandan> i'm wondering why the tests can't be runned in parallel....
[15:19:17] *** Quits: timot (timot@moz-1F31BE3A.mobile.tre.se) (Ping timeout)
[15:19:25] *** Quits: lenstr_ (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Ping timeout)
[15:19:29] <cmr> wakandan: they can, and they are.
[15:19:52] <wakandan> cmr: how do I do that?
[15:20:01] <wakandan> cmr: I'm running "make check" right now
[15:20:02] <cmr> wakandan: it happens by default, or should.
[15:20:05] <wakandan> cmr: so slow...
[15:20:17] <engla> if the 'ok' are green, then it's sequential
[15:20:32] <wakandan> engla: no colors for me :P
[15:21:51] *** Joins: timot (timot@moz-1F31BE3A.mobile.tre.se)
[15:21:52] <dbaupp> wakandan: if you look at your favourite CPU/process monitor, it will probably indicate that Rust is eating all your cpu time (unless it's just compiling something, when it would just be running on one core)
[15:22:00] *** Joins: masondesu (masondesu@moz-8C57FF86.gsp.bellsouth.net)
[15:22:37] <cmr> dbaupp: there seems to be some weirdness in the data where the new overlaps with the old
[15:24:18] <dbaupp> cmr: link?
[15:24:43] <Amaranth> TIL don't build rust with make -j4
[15:24:46] <dbaupp> cmr: (or some other pointer?)
[15:24:47] <cmr> dbaupp: well, I'm just looking at http://huonw.github.io/isrustfastyet/mem/ around august 3
[15:25:01] <cmr> Amaranth: what does TIL mean?
[15:25:08] *** Joins: canhtak (jeremy@moz-6442BF1C.wl.t.ulaval.ca)
[15:25:09] *** Quits: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[15:25:11] <dbaupp> cmr: today I learnt
[15:25:11] <Amaranth> cmr: Today I Learned
[15:25:12] <cmr> dbaupp: seems to be commits right on top of each other, with massive fluctuations
[15:25:14] <cmr> oh
[15:25:41] <dbaupp> cmr: right, they're straight pushes to master, so they get plotted when they were created, not when they were put into the master branch
[15:25:45] <dbaupp> (is that info available?)
[15:25:47] <cmr> ohhh
[15:25:54] *** Joins: maik (maik@moz-5DA9E925.dip0.t-ipconnect.de)
[15:25:55] *** Quits: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[15:25:57] *** Joins: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP)
[15:26:01] <cmr> no I don't think so
[15:26:02] <Amaranth> I should probably stop using it, that is a horrible meme these days
[15:26:12] <dbaupp> cmr: bors is *really* useful for this, because his merges are all strictly chronological
[15:26:16] <cmr> yeah
[15:26:52] <dbaupp> cmr: http://huonw.github.io/isrustfastyet/mem/#b4e674f towards the start is another unfortunate one
[15:27:37] <dbaupp> cmr: in any case, <3 new data
[15:27:54] <dbaupp> and we've already caught a 100MB regression in the past few hours \o/
[15:29:52] <amatus> can new() fail?
[15:29:55] *** Joins: threecreepio (jdp@moz-9C11F46E.cust.bredbandsbolaget.se)
[15:30:10] <cmr> amatus: new has no semantic meaning to the language, it's just a method.
[15:30:17] <dbaupp> amatus: depends on the specific implementation
[15:30:29] *** Joins: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP)
[15:30:32] <dbaupp> rusti: fn new() { fail!("this one can") } new()
[15:30:33] -rusti- task '<unnamed>' failed at 'this one can', <anon>:7application terminated with error code 101
[15:31:11] <amatus> ah, i misread the code i was looking at
[15:32:55] <Amaranth> dbaupp: What is the x axis for on the bottom memory graph?
[15:33:02] <cmr> Amaranth: time
[15:33:22] <Amaranth> In seconds?
[15:33:32] <cmr> well the axis is dynamic as you scale
[15:33:45] <dbaupp> Amaranth: seconds yes
[15:33:46] <cmr> or actually that one isn't
[15:33:48] <cmr> so yes, seconds
[15:34:11] <dbaupp> cmr: it is dynamic?
[15:34:29] <dbaupp> (at least, the scale is dynamic for me :S )
[15:35:04] <cmr> dbaupp: I mean, the units don't change as you zoom in.
[15:35:10] *** Quits: StarLight (StarLight@moz-FFA9EA5.dynamic.avangarddsl.ru) (Ping timeout)
[15:35:23] <dbaupp> cmr: oh, right
[15:35:41] <cmr> bors is about to be empty! D:
[15:35:46] <cmr> or, idle.
[15:37:05] <dbaupp> cmr: quick, start rusting!
[15:37:18] <engla> dbaupp: is the recent regression something that's easy to understand/fix?
[15:37:31] <dbaupp> engla: which, the 100MB one?
[15:37:37] <engla> yes
[15:37:56] <dbaupp> don't know, acrichto was the cause :P I believe/hope he's looking into it
[15:38:00] * dbaupp hasn't
[15:38:05] <cmr> acrichto is such a workhorse
[15:38:08] *** Quits: foodoo (foodoo@moz-BCF5859F.pool.mediaways.net) (Ping timeout)
[15:38:09] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[15:38:30] *** Joins: Guest (textual@34641662.FB4DE631.66C78B76.IP)
[15:38:30] <dbaupp> (it may just require adding a single pair of { }, or may require flipping the compiler on its head, I don't know.)
[15:38:35] *** Quits: maik (maik@moz-5DA9E925.dip0.t-ipconnect.de) (Ping timeout)
[15:38:51] <engla> hehe
[15:39:04] <cmr> We've regressed a gig of memory usafe since 0.7
[15:39:06] <cmr> THat's really bad.
[15:39:31] *** Joins: StarLight (StarLight@moz-DBB2336A.dynamic.avangarddsl.ru)
[15:39:31] <engla> the mem graph of irfy is very slow in firefox :(
[15:39:35] <engla> fine in chrome
[15:39:46] <cmr> it's very slow for me in firefox too
[15:39:52] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[15:39:54] <dbaupp> it's fine in my firefox :S
[15:40:12] <dbaupp> slow in what way? reacting to input?
[15:40:18] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:40:19] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[15:40:24] <engla> yes, zooming in takes seconds
[15:40:37] <engla> anyway this is Firefox 20, pretty old I guess
[15:40:46] <dbaupp> weird
[15:41:11] <dbaupp> i'm on firefox nightly, and it's pretty smooth for me, but chromium is slightly smoother
[15:41:28] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[15:41:52] <dbaupp> are you talking about the top one, or the bottom one, btw?
[15:42:07] <engla> the top one
[15:42:56] <dbaupp> I guess it's partly/mostly because I'm bad at using d3.js and am overloading the JS rather than doing it properly (how ever it's mean to be done) :(
[15:42:57] <engla> even clicking a line is slow to react. so it looks like overall redraw is slow
[15:43:34] * dbaupp wants to rewrite the whole thing and make it nice code, rather than merely mostly-working code
[15:44:20] *** Joins: msingle (Thunderbir@moz-1A29E89B.nrflva.fios.verizon.net)
[15:44:34] * dbaupp also wants to go to sleep
[15:44:37] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[15:46:26] <jmgrosen> even though it's used in the docstring for rt/io/mod.rs, there isn't a WriterUtil or the like trait that adds things like write_line to rt::io::Writer, right?
[15:46:39] <cmr> jmgrosen: no
[15:46:46] <jmgrosen> ok
[15:46:50] *** Quits: msingle (Thunderbir@moz-1A29E89B.nrflva.fios.verizon.net) (Ping timeout)
[15:46:52] *** Quits: victorporof (victorporo@8AB918FF.D4B9BCD.9B1E38F4.IP) (Ping timeout)
[15:46:56] <cmr> it's waiting on proper encoding/decoding
[15:49:29] *** Joins: valenting (Thunderbir@55FBCC0.8C025854.E16F0CF5.IP)
[15:50:22] *** Joins: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP)
[15:53:15] <luisbg> cmr, o/
[15:53:24] <cmr> \o
[15:54:47] *** Quits: timot (timot@moz-1F31BE3A.mobile.tre.se) (Quit: Konversation terminated!)
[15:54:53] *** Joins: timot (timot@moz-1F31BE3A.mobile.tre.se)
[16:00:46] *** Joins: funkytune (Mibbit@moz-DF96BA6E.tbcn.telia.com)
[16:01:15] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:02:58] *** Quits: threecreepio (jdp@moz-9C11F46E.cust.bredbandsbolaget.se) (Ping timeout)
[16:02:58] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[16:03:16] <polyfractal> wooo!  Hacked ChrisMorgan's rust-http to read POST bodies, and am now successfully deserializing JSON to hashmaps :D
[16:03:24] *** Joins: threecreepio (jdp@moz-9C11F46E.cust.bredbandsbolaget.se)
[16:10:46] <funkytune> Hmm, having this strange issue with namespaces that I don't understand... If I have code using a fully qualified function from std, like std::rand::rng(), it works fine if I compile that code in its own .rs file. If I make the .rs file part of a crate though, compilation fails with "unresolved name".
[16:11:15] <engla> yes because the full path is ::std::rand::rng
[16:13:26] <funkytune> engla: sorry, I'm not sure I follow? I'm using the full path in both cases, the only difference is that in one case it's compiled as a single file and in the other as part of a crate.
[16:14:03] <engla> do you use  ::std::rand::rng() or std::rand::rng() ?
[16:14:31] <amatus> "absolute path" is probably a better term for paths beginning with ::
[16:14:42] <engla> right
[16:15:06] * engla checks the docs
[16:15:14] <engla> 'global path' at one place in the tutorial
[16:15:15] <engla> http://static.rust-lang.org/doc/0.8/tutorial.html#crates-and-the-module-system
[16:15:17] <funkytune> oh, sorry, the chat client made a smiley out of the beginning of your comment there (the :: std part)
[16:16:07] <funkytune> works fine with the :: prepended to the path, thanks
[16:16:11] <engla> anyway, in expressions, paths are local
[16:16:28] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[16:16:34] <engla> in `use` they are some kind of global paths, but you can also refer to super:: and self::
[16:17:13] <funkytune> yes, I noticed it worked with "use std::rand" and then "rand::rng()" in both cases
[16:17:25] <engla> yes
[16:17:31] <funkytune> so in use statements the paths are global, but in code they're relative to the current namespace unless :: is prepended?
[16:18:17] *** Quits: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[16:18:19] *** Joins: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP)
[16:18:36] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[16:18:51] <engla> yes
[16:19:05] <funkytune> I see, thanks for the help.
[16:19:24] <engla> you can look up in the tutorial for clarification
[16:20:07] <steveklabnik> morning everyone!
[16:20:16] <polyfractal> o/
[16:20:18] <steveklabnik> (or whatever time it is where you are :))
[16:20:38] <funkytune> engla: yes, will read through that part more carefully
[16:21:31] *** Joins: roy (roy@moz-2867344C.hsd1.il.comcast.net)
[16:25:01] <jordyd> Since the Equiv trait is not implemented for ints, does that mean that there is no way to call HashMap::find_equiv with an int argument on hashmaps with int keys?
[16:25:27] <engla> jordyd: Yes, because .find_equiv is a special case and .find should be enough
[16:25:39] * wakandan leave comp overnight for "make check" T_T
[16:25:53] <jordyd> Oh, I didn't see that one there
[16:26:08] <engla> jordyd: find_equiv is a workaround for string keys basically
[16:26:22] <jordyd> Oic, thanks
[16:26:44] <polyfractal> what happens when you call self.clone() ? is it making a copy of the entire struct?
[16:26:46] <engla> jordyd: since strings exist in both as ~str (with allocation) and &str (slice from some place), and you don't want to allocate a new ~str just to look up
[16:28:22] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[16:29:11] *** Joins: jmcarthur (Mibbit@moz-5273B42.nycmny.fios.verizon.net)
[16:29:57] <jordyd> So if I were to pass a string to find, it would try to allocate a new string?
[16:30:10] *** Quits: canhtak (jeremy@moz-6442BF1C.wl.t.ulaval.ca) (Quit: canhtak)
[16:31:00] <jmcarthur> first time here. the topic says "Note: Prefer private messages for rusti". i take it rusti is a bot?
[16:31:30] <bytbox> jmcarthur: yes
[16:31:47] *** Quits: raze (raze@moz-4E6675AF.bredband.comhem.se) (Ping timeout)
[16:31:50] *** Joins: raze (raze@moz-4E6675AF.bredband.comhem.se)
[16:31:51] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[16:31:56] <jordyd> I thought that find accepted a borrowed pointer, so there would be no allocation involved
[16:35:55] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[16:36:37] *** Quits: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[16:36:41] *** Joins: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP)
[16:37:31] <engla> jordyd: no allocation without it being explicit there
[16:37:57] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[16:37:58] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[16:39:01] <engla> jordyd: the borrowed pointer must have an origin, if you have no ~"A" string handy to borrow you would need to allocate one to create a value of type  &~str
[16:39:42] <engla> so if you have a HashMap<~str, ~str>, you can look up with &~str keys using the method .find()  and & &str keys using the method .find_equiv
[16:39:56] <engla> yes, the double pointers either way are pretty terrible :(
[16:41:06] *** Quits: pyrac (pyrac@moz-1C318C84.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[16:42:37] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[16:43:23] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[16:43:56] *** Joins: CurlyBrace (Mibbit@moz-68353E30.itc.virginia.edu)
[16:45:14] <jordyd> Ok, so find_equiv is for if you already have a &str and your keys are ~str. So then in order to compare them without copying their contents around you need the Equiv trait?
[16:45:35] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[16:45:46] <engla> yes
[16:45:47] *** Quits: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[16:45:49] <funkytune> but if find_equiv<Q> is basically a workaround for strings, shouldn't it be taking a Q as the key parameter instead of a &Q, to avoid the double pointer?
[16:45:58] *** Joins: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP)
[16:46:06] <engla> I think you are right funkytune 
[16:46:08] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[16:46:19] <engla> it's basically overly generic
[16:46:47] <funkytune> I assume that it's not possible to template something on just "str", it has to be either &str or ~str ?
[16:47:35] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[16:47:35] *** ChanServ sets mode: +ao dherman dherman
[16:47:37] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[16:48:48] <engla> right, it's not possible
[16:49:04] *** Joins: simao (simao@moz-1B4B74CC.pools.arcor-ip.net)
[16:49:16] <funkytune> I see
[16:50:00] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[16:50:37] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[16:50:48] *** Joins: jensnockert (jensnocker@moz-2DBD7676.mobileonline.telia.com)
[16:51:34] <engla> The reason you didn't find the .find() method jordyd, I guess it's because it is listed under the Map trait
[16:52:00] *** Quits: raze (raze@moz-4E6675AF.bredband.comhem.se) (Ping timeout)
[16:52:03] *** Joins: raze (raze@moz-4E6675AF.bredband.comhem.se)
[16:52:07] *** Quits: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[16:52:09] *** Joins: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP)
[16:53:20] <jordyd> Yeah, I read through the "methods" section and then stopped
[16:53:32] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[16:54:42] <jordyd> Oh I see what you mean. It's on the Map trait page, but it's also on the HashMap page if you look in the "Trait Implementations" section.
[16:54:59] *** Quits: MrByte (MrByte@moz-147070D0.chy-wy.client.bresnan.net) (Quit: )
[16:55:11] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[16:55:41] <engla> yes
[16:55:48] <engla> and those are all the most basic and useful methods
[16:57:23] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[16:57:25] <jordyd> I _thought_ they were weirdly specific ("find_or_insert")
[16:58:11] <engla> you only need .mangle() :)
[16:59:03] *** Quits: funkytune (Mibbit@moz-DF96BA6E.tbcn.telia.com) (Quit: http://www.mibbit.com ajax IRC Client)
[16:59:05] <jordyd> Lol
[16:59:56] <engla> so the doc generator is brand new
[17:00:20] <engla> there is another method that's not listed at all on the hashmap page http://static.rust-lang.org/doc/master/std/container/trait.Map.html
[17:00:26] <engla> because it's a default implementation from Map
[17:00:29] <polyfractal> Funnily enough, I'm slogging my way through some hashmap stuff too.  hashmap. insert_or_update_with() is claiming that the k and v have to be ~str instead of &strwhy is that?
[17:00:30] <engla> .contains_key()
[17:00:42] *** Joins: SteveMcQwark (SteveMcQwa@moz-7CFCF343.cpe.net.cable.rogers.com)
[17:01:32] <engla> polyfractal: they have to be the same type as the K, V type parameters of the HashMap
[17:01:38] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:02:06] <engla> when you are inserting, the hashmap will take ownership of the keys and values
[17:02:24] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Quit: Leaving)
[17:02:47] <polyfractal> engla: that makes sense for inserting, but why does it need to take ownership for lookup?  Can't it just use a reference value?
[17:03:13] *** Quits: SteveMcQwark (SteveMcQwa@moz-7CFCF343.cpe.net.cable.rogers.com) (Quit: SteveMcQwark)
[17:03:21] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[17:03:30] <polyfractal> oh, i guess its because inser_or_update() may need ownership of the key too
[17:03:32] <polyfractal> if it has to insert
[17:03:34] *** Quits: masondesu (masondesu@moz-8C57FF86.gsp.bellsouth.net) (Quit: Computer has gone to sleep.)
[17:05:17] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[17:06:08] *** Quits: raze (raze@moz-4E6675AF.bredband.comhem.se) (Ping timeout)
[17:06:09] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[17:06:13] *** Joins: raze (raze@moz-4E6675AF.bredband.comhem.se)
[17:06:29] *** Quits: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[17:06:32] *** Joins: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP)
[17:11:03] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[17:11:06] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[17:11:24] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[17:12:51] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[17:13:07] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[17:16:42] *** Quits: jensnockert (jensnocker@moz-2DBD7676.mobileonline.telia.com) (Input/output error)
[17:17:37] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[17:19:43] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[17:19:52] *** Joins: SiegeLord (sl@moz-3D449DF.bstnma.fios.verizon.net)
[17:21:55] *** Quits: CurlyBrace (Mibbit@moz-68353E30.itc.virginia.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[17:22:16] *** Quits: raze (raze@moz-4E6675AF.bredband.comhem.se) (Ping timeout)
[17:22:19] *** Joins: raze (raze@moz-4E6675AF.bredband.comhem.se)
[17:23:46] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[17:25:13] *** Joins: gareth0 (gareth0@moz-D7D6439B.dynamic.dsl.as9105.com)
[17:26:08] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[17:29:32] *** Joins: Adi_Saputra (ristakswan@54828A1C.732AB06A.89D37B92.IP)
[17:30:11] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[17:31:16] *** Quits: raze (raze@moz-4E6675AF.bredband.comhem.se) (Ping timeout)
[17:31:18] *** Joins: raze (raze@moz-4E6675AF.bredband.comhem.se)
[17:34:42] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[17:34:47] *** Joins: canhtak (jeremy@moz-C6007F4.wl.t.ulaval.ca)
[17:34:50] <glennsl> Is it possible to use multi-level enums?
[17:34:58] <cmr> glennsl: what do you mean by that?
[17:34:58] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[17:35:12] *** Quits: threecreepio (jdp@moz-9C11F46E.cust.bredbandsbolaget.se) (Quit: threecreepio)
[17:36:09] <glennsl> having enums like enum A { B }, enum B { C }, and being able to use C as A 
[17:36:28] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[17:36:33] <glennsl> It seems to accept the definition, but isn't able to coerce C to A
[17:36:40] <cmr> No
[17:37:10] <cmr> There are two different B's there
[17:37:25] <cmr> One is a type, one is a value (a constructor for A's B variant)
[17:38:00] <glennsl> If there are, shouldn't they collide?
[17:38:20] <cmr> no, we keep values and types in different namespaces
[17:38:29] <cmr> rusti: let int: int = 5; int
[17:38:30] -rusti- 5
[17:38:57] <glennsl> ah, of course...
[17:39:45] <glennsl> have to rethink this then thanks
[17:40:48] *** Joins: threecreepio (jdp@moz-9C11F46E.cust.bredbandsbolaget.se)
[17:41:46] <polyfractal> Is there a difference between select() and try_recv() other than select() can operate on multiple ports?
[17:44:01] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[17:44:11] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[17:45:18] *** Joins: tjc (tjc@moz-BF4FE20E.tmodns.net)
[17:45:18] *** ChanServ sets mode: +o tjc
[17:46:34] *** Quits: tjc (tjc@moz-BF4FE20E.tmodns.net) (Quit: zzzzzzzzzz)
[17:46:36] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[17:46:45] <polyfractal> actually I probably meant recv()recv() will block until it gets a message while try_recv() returns an Option right?
[17:47:09] <cmr> polyfractal: try_recv blocks too
[17:47:18] <cmr> it only returns None if the port was closed
[17:48:07] *** Quits: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[17:48:08] *** Quits: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[17:48:11] *** Joins: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP)
[17:48:11] *** Joins: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP)
[17:48:18] <polyfractal> oh, i see.  recv just fails if the port was closed, try_receive() returns None.  cool
[17:48:19] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[17:49:30] <lhatsk> why isn't returning None the default behaviour? and try the non-blocking variant?
[17:49:59] <cmr> lhatsk: we don't have a non-blocking variant
[17:50:02] *** Joins: elifrey (peripateti@moz-B5928FE2.hsd1.wa.comcast.net)
[17:50:05] <bblum> nonblocking recv is a different primitive entirely
[17:50:06] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[17:50:14] <bblum> it is nondeterministic, whereas try_recv is not
[17:50:22] <bblum> it would not be hard to implement
[17:50:35] *** Joins: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[17:50:40] <polyfractal> you could just stick the recv into a future for the same behavior, right?
[17:50:43] <bblum> but it might encourage people to accidentally hand-implement select() in a very stupid way :P
[17:51:05] <nejucomo> When I run "make docs" I see a bunch of configure steps, and both pandoc and node are detected, yet I don't see any generated html anywhere...
[17:51:25] <bblum> it occurs to me you can implement nonblocking recv() by using an extra task and try_send()
[17:51:28] <elifrey> is there any way to get a ChunkIter from an Iterator?
[17:51:40] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[17:53:15] *** Quits: slackito (slackito@moz-7779E4A6.dyn.user.ono.com) (Quit: leaving)
[17:53:29] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[17:53:30] <elifrey> I've wound up collect()ing on an iterator earlyer than I would like to, so I have to bring the whole thing into memory :(
[17:54:17] <cmr> elifrey: the only thing that will return a ChunkIter right now is chunk_iter on &[T]
[17:56:47] <elifrey> cmr: that's what I feared. Looks like I'll have to implement a way to chunk an arbitrary iterator myself.
[17:57:22] <elifrey> I have yet to write a function that uses explicit lifetimes, figuring that out is the first step
[17:57:27] <cmr> elifrey: you could add an iterator adaptor for it
[17:57:35] <cmr> but I'd ask strcat or engla why it doesn't have one already
[17:57:41] <cmr> (may have been an oversight, might have a good reason)
[17:57:51] <cmr> Oh I know why
[17:58:03] <elifrey> cmr: the adapters are the "helper" Structs, right?
[17:58:04] <cmr> It would need to copy into a buffer, and yield that buffer
[17:58:15] <cmr> elifrey: and the methods on Iterator that return them, yes.
[17:58:37] <cmr> ChunkIter doesn't do any copying, it doesn't make sense to have for the other Iterators
[17:59:06] <elifrey> cmr: ah, so I jsut need to [T: Clone] on my new ChunkIter adapter
[18:02:02] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:02:04] *** Joins: CarpNet (Alasdair@moz-EF831A5E.cable.virginmedia.com)
[18:02:06] *** Joins: Alasdair_ (Alasdair@moz-EF831A5E.cable.virginmedia.com)
[18:02:14] *** Quits: Alasdair_ (Alasdair@moz-EF831A5E.cable.virginmedia.com) (Client exited)
[18:03:18] <lhatsk> bblum: nevermind, I was thinking about smth like MVars in Haskell instead of listening ...
[18:03:27] <lhatsk> on a port..
[18:03:44] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[18:05:07] *** Joins: clusterfoo (computer@8AFCC1AB.8ACB8079.47C41102.IP)
[18:05:11] <engla> cmr: we'd need slicing for iterators.. I'm sure it can be done
[18:05:27] <engla> cmr: but if it's done too well, the vec iterators and vec slices will be equivalent
[18:05:57] <dcrewi> what's the difference between xfail-fast and xfail-test ?
[18:06:49] *** Quits: lhatsk (Adium@moz-22271C42.pool.mediaways.net) (Quit: Leaving.)
[18:07:02] <engla> too well as in.. then you'd want to make another revolutionary change around removing slices or something similar..
[18:09:29] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[18:12:37] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[18:12:48] *** Quits: clusterfoo (computer@8AFCC1AB.8ACB8079.47C41102.IP) (Connection reset by peer)
[18:13:06] *** Quits: timot (timot@moz-1F31BE3A.mobile.tre.se) (Ping timeout)
[18:13:49] *** Joins: clusterfoo (computer@8AFCC1AB.8ACB8079.47C41102.IP)
[18:14:30] *** Joins: pyrac (pyrac@moz-1C318C84.w92-162.abo.wanadoo.fr)
[18:17:22] <elifrey> I suppose in my case I can have an iterator of iterators. So take in an iterator and return an iterator that just does .take(n) on the input until its empty
[18:18:04] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[18:18:35] <engla> you can make an adaptor that works like .take(n)
[18:18:56] <engla> except you could give it a method to open it again, to take the next chunk
[18:18:59] <engla> does that make sense?
[18:19:18] *** Joins: victorporof_ (victorporo@35F65A40.E0F96B01.D111398B.IP)
[18:19:49] <engla> or basically  let mut it = ...;   let first_20 = it.take_ref(20);  that would take the iterator by reference
[18:20:13] *** Joins: jonathanmarvens (jonathanma@5FB231FA.48ED048E.3A99D594.IP)
[18:20:37] *** Quits: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP) (Ping timeout)
[18:21:21] <elifrey> engla: each time I .take(n), is the mut iter steped forward so next time I .take(n) I start taking at n+1, even if I run the iterators returned from .take(n) out of order?
[18:21:59] *** Quits: threecreepio (jdp@moz-9C11F46E.cust.bredbandsbolaget.se) (Ping timeout)
[18:22:02] <elifrey> or do I need to .drop(n) too
[18:22:07] <engla> something like this  https://gist.github.com/anonymous/2cee900833f406ab34cd
[18:22:42] *** Joins: mihneadb (mihneadb@moz-ABF5F9D2.static.ziggozakelijk.nl)
[18:22:54] <engla> now that.. doesn't produce lots of independent iterators
[18:23:11] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[18:24:00] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[18:24:19] *** Quits: Adi_Saputra (ristakswan@54828A1C.732AB06A.89D37B92.IP) (Quit: )
[18:24:22] <jmcarthur> maybe trying to write a thunk data type was a bit too far into the deep end for a first-timer rust project
[18:24:25] <engla> elifrey: .take(n) can only be called once on an iterator, since it takes the iterator value and embeds it
[18:24:58] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[18:25:07] <jmcarthur> was hoping it would teach me a lot about pointers and closures in rust. well, it certainly has, but I'm not sure I'm going to get the thing to work today :)
[18:25:33] <engla> isn't ~fn() a thunk already
[18:26:07] <jmcarthur> a thunk only runs the function once and then memoizes the result to be returned instantly from then on
[18:26:19] <polyfractal> if i'm iterating over a map using (k,v), is the only way to send k on a chan to clone it into a new variable first?  Since k is owned by the map and not possible to send?
[18:26:35] <cmr> polyfractal: I believe there's an iterator that consumes the map
[18:26:38] <engla> aha
[18:27:08] * polyfractal looks for the other iterator
[18:27:18] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[18:27:22] *** Joins: timot (timot@moz-1F31BE3A.mobile.tre.se)
[18:27:45] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[18:28:31] <polyfractal> ah, move_iter().  So that will consume the map itself right? 
[18:29:55] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[18:30:09] <polyfractal> woo!  works nicely.  JSON in POST body -> decoded into map -> elements sent over channel to counter object -> successful counting
[18:30:10] <polyfractal> yay!
[18:30:13] <polyfractal> Rust is cool :)
[18:32:05] <nejucomo> Question from borrow ptrs tutorial: "A heap box that is unrooted is one such that no pointer values in the heap point to it."  -is that true?  What if a local points to a heap box?  Isn't it still rooted in that case?
[18:33:09] <nejucomo> jmcarthur: What problem are you encountering with your thunk code?
[18:34:20] <nejucomo> Shouldn't it say: "A heap box is unrooted if there are no owning pointers to it."  ?
[18:34:23] *** Joins: threecreepio (jdp@moz-9C11F46E.cust.bredbandsbolaget.se)
[18:36:14] *** Quits: mihneadb (mihneadb@moz-ABF5F9D2.static.ziggozakelijk.nl) (Input/output error)
[18:36:38] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[18:36:39] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[18:37:27] <jmcarthur> nejucomo: i'm just trying to work out the various compiler checks that are keeping my use of shared data sane. for example, right now i am working out how to solve "error: cannot move out of dereference of & pointer"
[18:37:53] <jmcarthur> nejucomo: i think the issue is that this type i've abstracted over in a generic function doesn't have the Copy trait or something
[18:38:24] <jmcarthur> but i'm not really asking for help yet, unless off the top of your head without me pasting somewhere you know the answer already
[18:38:34] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[18:38:54] <engla> that's a very common question jmcarthur 
[18:39:16] <engla> and yes for a generic type T you need the bound T: Clone and explicit .clone() to make a copy of a value
[18:39:18] <nejucomo> Well, if there's some internal state which is a reusable memo, then it must be copyable.  Otherwise, the first access would move it and it wouldn't be a reusable cache.
[18:39:24] *** Quits: clusterfoo (computer@8AFCC1AB.8ACB8079.47C41102.IP) (Ping timeout)
[18:39:30] <jmcarthur> right, that makes sense
[18:39:57] *** Quits: silotis (quassel@moz-4B8C4631.oc.oc.cox.net) (Client exited)
[18:40:00] <nejucomo> I run into that kind of error frequently.  It's still not a habit yet so I'm learning a lot from compiler errors.
[18:40:06] <jmcarthur> i'm still quite newbish, so right now i'm just trying to work out how to require the Copy trait (if that's even the right thing)
[18:40:16] <jmcarthur> and how to even get Copy into scope
[18:40:22] <cmr> Copy doesn't exist
[18:40:24] <cmr> it's Clone
[18:40:27] <jmcarthur> Clone! aha
[18:40:30] <nejucomo> I'm a bit confused:  Did Copy used to exist?
[18:40:33] <cmr> nejucomo: yes
[18:40:39] <cmr> was used for implicit copies
[18:40:39] <nejucomo> Ok  That's why.
[18:40:46] <cmr> which have been killed in favor of explicit clones
[18:41:17] <nejucomo> If I have: fn f(x: uint) {}  ; then: f(4u)   // -isn't that an "implicit copy" ?
[18:41:56] <nejucomo> I guess I always understand where I need to add a .clone(), but I don't always understand where I don't need a clone.
[18:42:20] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[18:42:39] <engla> almost all types are implicitly copyable, and their aggreagates. except those with destructors or are &mut
[18:42:41] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[18:42:49] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[18:42:56] <cmr> generics aren't implicitly copyable anymore, which is what the Copy bound used to add
[18:43:17] <jmcarthur> do i have to clone the enum i'm pattern matching on to access its data at all, or can i do the cloning in the cases where i actually need to extract the data?
[18:43:23] *** Joins: tetsuhar_ (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[18:43:33] *** Joins: SteveMcQwark (SteveMcQwa@moz-7CFCF343.cpe.net.cable.rogers.com)
[18:43:59] * jmcarthur has a feeling that question betrayed a weak mental model of enums and cloning in the first place
[18:44:28] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[18:44:48] <luisbg> I don't see it in the Tutorial. What are the data types supported in Rust?
[18:45:10] <luisbg> I need the equivalent of C's long
[18:45:22] <cmr> luisbg: http://static.rust-lang.org/doc/master/rust.html#type-system
[18:45:27] <engla> you don't need to clone if you just move jmcarthur. say if you consume the enum value, extract the field you want
[18:45:54] <engla> match Some(~1) { Some(x) => x, None => ~2 }     is an example of that
[18:46:02] <SiegeLord> C's long is a very bad type
[18:46:06] <luisbg> cmr, hi :) thanks for that
[18:46:09] *** Quits: tetsuhar_ (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[18:46:30] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[18:46:35] <jmcarthur> engla: this vocabulary "consume"... does that mean it can't be used again?
[18:46:38] <luisbg> cmr, do you know of a good external module/lib somebody is writing? I need to copy the Makefiles from there
[18:46:43] <nejucomo> So, copying is implicit for most types *except*: generic parameter types, &mut T, and ~T    ?  Any others?
[18:47:03] <cmr> nejucomo: anything with a destructor
[18:47:10] <engla> jmcarthur: yes
[18:47:23] <nejucomo> cmr: Ok.  (-except now I need to learn what has desctructors...)
[18:47:37] <jmcarthur> engla: i see. well, in this case, i'm wanting to be able to reuse the enum.
[18:47:38] <engla> jmcarthur: for example ~1  must be moved or .clone()
[18:47:39] <cyndis> you can also get a borrowed pointer to data inside a variant by doing match ... { Some(ref x) => ..., _ }
[18:47:43] <nejucomo> Is that the same as: anything with the Drop trait?
[18:47:46] <cmr> nejucomo: anything implementing Drop
[18:47:59] <jmcarthur> i'll just past the data type i'm using
[18:48:13] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[18:48:28] <jmcarthur> is there a paste site that highlights rust anywhere?
[18:48:29] <cyndis> ^ jmcarthur
[18:48:30] <nejucomo> cmr: So it's: anything with Drop -or- any generic type parameter ?
[18:48:42] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz)
[18:48:47] <engla> jmcarthur: gist.github.com does
[18:48:50] <cmr> jmcarthur: gist does, kinda
[18:48:56] <cmr> it uses, like, 0.3 syntax or something
[18:48:58] <jmcarthur> cyndis: i think i really need a clone, since i'm extracting and *returning* the data
[18:49:03] <nejucomo> I hope so, because I like lists of cases I memorize to be very small.  2 items is acceptable.
[18:49:15] <jmgrosen> how do I use Map.find on a ~str?
[18:49:23] <cyndis> then you can take a borrowed pointer and call clone on that
[18:49:42] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[18:50:02] <nejucomo> jmcarthur: The thunk type could return a borrowed pointer.  That's an alternate API with different implications...
[18:50:15] <jmgrosen> on hashmap I can use .find_equiv(&("thing")) but I can't on a treemap
[18:50:31] <nejucomo> Then the caller could choose to clone it if they wanted to hold the value longer than the thunk
[18:50:42] <jmcarthur> hmm... i like that idea
[18:51:03] <nejucomo> This is one of the areas of rust that's new to me and fun to experiment with.
[18:51:28] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[18:52:43] * nejucomo just wrote, by emulation: impl<'self, T: Pushable> Pushable for &'self [T] {  }  
[18:53:02] <nejucomo> -and it compiles and tests pass, but now I'm rereading the borrow tutorial to grok this better...
[18:53:13] <nejucomo> (Tests only use ~[T] values...)
[18:53:42] <nejucomo> Are lifetimes in the position of a generic parameter more recent than rust 0.4?
[18:54:04] <jmcarthur> heh, i think this opens a whole other can of worms though. i'll just paste this thing as it is and see what you guys think
[18:54:07] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[18:55:26] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[18:55:54] <nejucomo> jmcarthur: Yes, but it's a can of *educational* worms.  ;-)
[18:55:54] <jmgrosen> does anyone know how I can use Map.find on a ~str (that is, when the key is a ~str)?
[18:56:17] <jmcarthur> nejucomo: yeah this is why i went for thunks
[18:56:20] <jmcarthur> https://gist.github.com/jmcarthur/6745227
[18:56:22] <nejucomo> jmgrosen: Sorry, I don't know the answer yet...
[18:56:39] *** Quits: SteveMcQwark (SteveMcQwa@moz-7CFCF343.cpe.net.cable.rogers.com) (Ping timeout)
[18:56:58] <nejucomo> I'd like to know the answer, since that seems like a very common kind of operation I'd want to do.
[18:57:07] <jmcarthur> so this is the thing with tons of compiler errors for mostly obvious reasons. i just haven't figured out the appropriate ways to fix them
[18:57:32] <jmcarthur> i just changed the return type to &T as an experiment and meant to remove that before pasting
[18:57:51] <engla> jmcarthur: so if you want to return a &T, you have to type  Val(ref x) => x   for that match case
[18:57:51] <jmcarthur> but i might like to keep it that way, although it probably changes things some
[18:57:52] *** Joins: SteveMcQwark (SteveMcQwa@moz-7CFCF343.cpe.net.cable.rogers.com)
[18:58:11] <jmcarthur> i see, to make it a reference
[18:58:25] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[18:58:55] <nejucomo> Notice that return is not needed in that position
[18:59:11] <nejucomo> I'm not sure what the canonical style is, but I try to use return only for early termination.
[18:59:11] <jmcarthur> is return basically only needed for early returns?
[18:59:15] <jmcarthur> i see
[18:59:20] <nejucomo> Yeah, at least as far as I know.
[18:59:35] *** Joins: msingle (Thunderbir@moz-1A29E89B.nrflva.fios.verizon.net)
[18:59:46] <engla> jmcarthur: now some acrobatics are needed to both read self.thunkData and then possibly updating it
[19:00:18] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[19:00:55] <nejucomo> Another strange thought:  You might be able to remove the struct type, and then add an impl for: &mut ThunkData
[19:01:17] *** Quits: pyrac (pyrac@moz-1C318C84.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[19:01:29] <nejucomo> I'm not sure if that works...
[19:01:36] <jmcarthur> i thought of that but it seemed weird to be able to mutate &self itself
[19:01:52] <jmcarthur> i kind of doubt it is a sane thing
[19:02:24] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:02:34] *** Joins: doener (doener@moz-4D6ABE63.unitymediagroup.de)
[19:02:41] <nejucomo> It seems *possibly* sane to me.  I'm not sure.
[19:02:58] <nejucomo> Having the struct is certainly more familiar to me from a C-ish / javaish / pythonish background.
[19:03:10] *** Quits: SteveMcQwark (SteveMcQwa@moz-7CFCF343.cpe.net.cable.rogers.com) (Ping timeout)
[19:03:25] <jmcarthur> my first attempt was weirder than this.  struct Thunk<T> { f : ~fn() -> T }  where the idea was for the function to mutate the Thunk in place, replacing it with a function that simply returns the result, but that seems even more insane
[19:03:31] <nejucomo> So does it work with the "ref" binding and returning a borrowed ptr?
[19:03:49] <nejucomo> hehe  that sounds like the STG machine.
[19:03:55] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[19:04:04] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[19:04:16] <jmcarthur> well guess what my primary language is? ;)
[19:04:22] *** Quits: GeneralMaximus (ankur@D2FC7BAD.3B7EC11C.BE90E62C.IP) (Quit: Computer has gone to sleep.)
[19:05:21] <jmcarthur> it's not working yet. i'm still workout out how to return a borrowed pointer in the second case
[19:05:25] <nejucomo> I like the idea, but I don't understand rust closures well yet.  structs/enums are much easier for me to understand in terms of memory management.
[19:05:33] *** Quits: doener (doener@moz-4D6ABE63.unitymediagroup.de) (Quit: leaving)
[19:05:40] <jmcarthur> *still working out
[19:05:57] <jmcarthur> maybe i could just make the function return a borrowed pointer
[19:06:06] <nejucomo> I think you'll need a lifetime parameter, like: impl<'self, T: Clone>  { fn force() -> &`self T }
[19:06:18] <jmcarthur> heh, i really did jump into the deep end here :)
[19:06:30] <nejucomo> I don't quite understand that yet, which is why I'm re-reading the borrow tutorial.
[19:06:52] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[19:07:02] *** Quits: jonathanmarvens (jonathanma@5FB231FA.48ED048E.3A99D594.IP) (Input/output error)
[19:07:20] <engla> jmcarthur: I found a way to express it, mind if I show?
[19:07:33] *** Joins: jonathanmarvens (jonathanma@5FB231FA.48ED048E.3A99D594.IP)
[19:07:40] <jmcarthur> once my understanding is better i might like to try to revisit the STG-style thunk. it might just not be possible to satisfy the compiler without C-style pointers though
[19:07:46] <amatus> how do i get the length of a vector?
[19:07:47] <jmcarthur> engla: sure. i'm interested
[19:07:58] <engla> jmcarthur: I think you can do like this. https://gist.github.com/blake2-ppc/222a784524c087aae27c
[19:08:21] <engla> jmcarthur: you can't modify self.thunkData inside the match clause where you are matching on it
[19:08:23] *** Joins: SteveMcQwark (SteveMcQwa@moz-7CFCF343.cpe.net.cable.rogers.com)
[19:08:25] <engla> so it gets confusing
[19:08:37] <jmcarthur> oh, i didn't realize that
[19:09:19] *** Quits: jonathanmarvens (jonathanma@5FB231FA.48ED048E.3A99D594.IP) (Ping timeout)
[19:09:23] <engla>    match Foo { A => return 1,  B => 2}   will return * from the function*  in case A and evaluate to value 2 in case B
[19:11:02] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[19:11:54] <engla> then if you want to return a borrowed pointer you need the lifetime annotations here fn force<'a>(&'a mut self) -> &'a T   to say that the lifetime of T matches self
[19:11:55] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[19:11:58] <jmcarthur> so the lifetime parameters says "the lifetime of the result is the same as the lifetime of self"?
[19:12:05] *** Joins: jonathanmarvens (jonathanma@5FB231FA.48ED048E.3A99D594.IP)
[19:12:06] <jmcarthur> got it
[19:12:16] *** Quits: SteveMcQwark (SteveMcQwa@moz-7CFCF343.cpe.net.cable.rogers.com) (Quit: SteveMcQwark)
[19:12:30] <amatus> this is why it's hard to google for information on rust: http://vandelaypremier.com/vectors/rust-vectors/
[19:12:30] <engla> lifetime parameters are basically only for returning borrowed pointers
[19:13:32] <jmcarthur> oh i see why you finish with the tail call. it's so that the result can be a borrowed pointer to the thing that you stored in the thunk
[19:13:48] *** Joins: SteveMcQwark (SteveMcQwa@moz-7CFCF343.cpe.net.cable.rogers.com)
[19:13:56] <engla> yeah. it's that or writing another match on the new value
[19:14:13] <engla> but then you need a dummy fail!() in the Fun case that can never happen
[19:14:19] <engla> not sure what's better
[19:14:24] <jmcarthur> those are the only choices? neither seems very direct
[19:14:56] <engla> well you need to give the new value to the `Val` constructor, and exctract the ref only after that
[19:15:00] <nejucomo> amatus: Yeah, I was just browsing the std::vec docs here: http://static.rust-lang.org/doc/0.8/std/vec/index.html
[19:15:10] <nejucomo> Trying to find the answer to your question  but it's difficult.
[19:15:13] <engla> with give = give up ownership, move
[19:15:22] <nejucomo> For one, I don't see a list of impls for vectors...
[19:15:26] <jmcarthur> is the reason you can't mutate self.thunkData in the match due to paranoia or because it's actually not possible?
[19:15:29] *** jorendorff_away is now known as jorendorff
[19:15:38] <amatus> nejucomo: i figured it out, it's .len(), found it in the tutorial
[19:15:54] <nejucomo> Also, it would be nice to have a view which is indexed by the method names of *all known impls* and each method item refers to the associated impl/trait.
[19:16:22] <nejucomo> I know from memory that's from trait Container, but I don't see that in the std::vec api docs yet.
[19:16:49] <engla> jmcarthur: we are going to hold a reference to the interior of the ThunkData (either ref x or ref f) and while we borrow that, we can't change self.thunkData
[19:16:59] <jmcarthur> ah!
[19:17:06] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[19:17:08] * nejucomo starts reading libstd/vec.rs
[19:17:09] <engla> I'm open to that this might not be the best way to express this
[19:17:14] <jmcarthur> the compiler checks this as well, i guess
[19:17:32] <engla> yeah
[19:17:36] <jmcarthur> engla: this was very helpful. thank you
[19:17:53] <engla> great
[19:17:57] <nejucomo> Yeah, it's definitely Container::len(), and there are a few impls such as for &[T] or ~[T], etc...
[19:18:42] <nejucomo> amatus: Hehe  I just loaded your google hit.  Very pretty.
[19:19:00] *** Quits: SteveMcQwark (SteveMcQwa@moz-7CFCF343.cpe.net.cable.rogers.com) (Ping timeout)
[19:19:51] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[19:20:08] <amatus> the other end of my stream is not recieving :(
[19:20:26] <engla> jmcarthur: Simpler (but wasting some bytes in the struct) would be to have struct Thunk<V> {  value: Option<V>, f: ~fn() -> V }
[19:20:32] * amatus gisting
[19:20:54] <nejucomo> So what's the difference between placing a lifetime on a function parameter (which I understand fairly well) versus in a generic-parameter position, like: impl<'self> ...
[19:20:55] *** Joins: silotis (quassel@moz-4B8C4631.oc.oc.cox.net)
[19:21:06] <jmcarthur> engla: yeah, i'm trying to make it a fairly compact representation
[19:21:14] <jmcarthur> engla: i still might try the STG-style thunk
[19:21:32] <jmcarthur> engla: which is just a function that (somehow...) replaces itself with a function that returns the result
[19:21:33] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[19:21:44] <nejucomo> engla: This is where I get confused about closure memory management.  With the enum, the closure is garbage collected after it is used.
[19:21:51] <nejucomo> What if it's holding on to gigabytes of heap?
[19:22:18] <jmcarthur> right
[19:22:29] <jmcarthur> that's why i used the enum instead of the struct
[19:22:30] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[19:22:33] <amatus> what have i done wrong here: https://gist.github.com/amatus/b9b29aea96b20671adb2
[19:22:35] <nejucomo> The struct you propose could also just nuke the f field after use.
[19:22:45] <engla> well it's not garbage collected unless the closure is holding on to GC'ed pointers. in the normal case the ~fn() is simply free'd
[19:23:07] <amatus> i see the read's completing with strace, but i never get any messages printed out saying the main task got the buffers
[19:23:11] <Eridius> amatus: what's the error? Also, line 7 is wrong
[19:23:12] <nejucomo> engla: Sorry, I mean "gc'd" in the very general sense of the language takes care of cleaning it up somehow.
[19:23:13] <engla> ok I don't know if the compiler can discern this for ~fn
[19:23:27] <Eridius> well no, not strictly wrong I guess, but it should be changed
[19:23:36] <Eridius> you should use `buffer: ~[u8] = vec::with_capacity(...)`
[19:23:36] <nejucomo> Does anyone know what the runtime representation of a closure looks like?
[19:23:38] <engla> yeah
[19:23:51] <Eridius> nejucomo: two pointers. One to the function code, one to the environment
[19:23:54] <Eridius> not sure how the environment is represented though
[19:23:58] <jmcarthur> nejucomo: i would imagine it's a function pointer and pointers to free variables
[19:24:11] <Eridius> I'm guessing the environment is basically a custom struct with a field for each captured var, but I don't know for certain
[19:24:15] * nejucomo wonders what the environment structure looks like.
[19:24:32] <amatus> Eridius: the buffer seems to end up with that type anyway, i'll try it though
[19:24:52] <Eridius> amatus: yeah, I'm just suggesting this because most uses of Type::static_meth::<T>() are now wrong
[19:24:58] <nejucomo> So this is why I don't understand the distinctions between the closure types  Couldn't an environment have: { a: ~T, b: @K, c: &U }   ?
[19:25:03] <Eridius> amatus: vec::with_capacity() is ok, since the type is on the with_capacity fn, but it's a good idea to get out of the habit of that
[19:25:11] <Eridius> amatus: in most cases it's now Type::<T>::static_meth()
[19:25:14] *** Quits: Ms2ger (Ms2ger@9D0A393.CB23CDC6.3773EA9F.IP) (Quit: nn)
[19:25:30] <jmcarthur> nejucomo: i'm guessing the closure type is the environment type, not the types of the environment's fields
[19:25:43] <jmcarthur> nejucomo: although maybe that's equivalent
[19:25:53] <jmcarthur> nejucomo: and maybe your environment is not possible?
[19:26:14] <Eridius> what's the confusion about closures?
[19:26:23] <amatus> am i creating the Chan and passing it correctly to read_all()?
[19:26:45] <amatus> *creating the Chan correctly
[19:26:46] <nejucomo> So maybe: ~fn() is equivalent to ~Closure { code: *Code, env: Env } and &fn() is &Closure { code: *Code, env: Env }  -and so on?
[19:26:52] <jmcarthur> nejucomo: in fact, i'm going to guess that an environment with heterogeneous pointers is just not possible if the compiler only tracks a closure as one particular kind
[19:27:10] <Eridius> amatus: I.. think so? I haven't actually used ports/chans yet myself, but it looks like you captured it in the spawned task's closure. Do you have some reason to believe you did it wrong?
[19:27:27] <Eridius> nejucomo: I think that's roughly accurate
[19:27:37] <amatus> well it took me several guesses to figure out what type of pointer to use
[19:27:56] <Eridius> amatus: what do you mean, what type of pointer?
[19:28:02] *** jorendorff is now known as jorendorff_away
[19:28:03] <nejucomo> I suppose I could actually read the source code  To many interesting things to investigate on my rust queue.
[19:28:35] <amatus> Eridius: at first i had read_all(&self, chan: Chan<~[u8]>) and was passing it with read_all(chan) but rustc didn't like that
[19:28:39] <Eridius> nejucomo: a ~fn is owned, so it can be returned from a function, or passed to another task (assuming all its captured values are Send)
[19:29:18] <Eridius> amatus: I imagine rustc complained that chan was possibly moved, since it doesn't know that spawn only executes its closure once
[19:29:39] <amatus> yes
[19:29:41] <Eridius> amatus: which is talked about in the first section of https://github.com/mozilla/rust/wiki/Doc-under-construction-FAQ
[19:30:01] <Eridius> that docs suggest using Cell to wrap the chan, but if &Chan works for you, then that's probably better
[19:30:11] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Quit: Leaving)
[19:30:23] <amatus> well the program is not working :(
[19:30:28] <nejucomo> So I can imagine: let closurish = ~Closure { code: , env: Env { x: ~23, y: @42 } } ; -and now that would not have Send and so I couldn't call spawn on it, for example...
[19:30:37] <amatus> it just sits there eating up memory and not printing anything
[19:30:38] <nejucomo> -but I could return it from a function.
[19:30:44] *** Quits: jonathanmarvens (jonathanma@5FB231FA.48ED048E.3A99D594.IP) (Input/output error)
[19:30:51] <Eridius> amatus: slap some debug!()s in there and use RUST_LOG?
[19:31:03] *** Joins: clusterfoo (computer@moz-F8B381B4.hm.shawcable.net)
[19:31:15] <nejucomo> But from reading the tutorial on closures, it makes it sound as if all of the free variables in ~fn are owned, and all in @fn are local-heap, etc...
[19:31:16] *** Joins: jonathanmarvens (jonathanma@5FB231FA.48ED048E.3A99D594.IP)
[19:31:17] *** Quits: squiddy (squiddy@moz-4265BEBB.adsl.alicedsl.de) (Input/output error)
[19:31:27] *** Quits: jonathanmarvens (jonathanma@5FB231FA.48ED048E.3A99D594.IP) (Connection reset by peer)
[19:31:30] <Eridius> amatus: I don't see anything that causes read_all() to exit
[19:31:52] *** Joins: jonathanmarvens (jonathanma@5FB231FA.48ED048E.3A99D594.IP)
[19:32:06] <Eridius> amatus: at the very least you should check the return value of read()
[19:32:20] <Eridius> because EOF returns 0 and an error returns -1
[19:32:21] <amatus> yea, i forgot to do that
[19:32:33] <amatus> but i know that's not the problem
[19:32:34] <Eridius> which, btw, means if it returns -1 then you're setting the vector's length to max_uint..
[19:33:21] <nejucomo> -which is a LOT of audio data.  ;-)
[19:33:22] *** Quits: jonathanmarvens (jonathanma@5FB231FA.48ED048E.3A99D594.IP) (Broken pipe)
[19:33:50] *** Joins: jonathanmarvens (jonathanma@5FB231FA.48ED048E.3A99D594.IP)
[19:33:53] *** Joins: tjc (tjc@moz-BF4FE20E.tmodns.net)
[19:33:53] *** ChanServ sets mode: +o tjc
[19:34:14] <amatus> it seems to not be executing anyting after spawn
[19:35:17] <nejucomo> amatus: What is self.sync()?
[19:35:31] <Eridius> amatus: throw debug!() statements up the wazoo in there
[19:35:41] *** Quits: jonathanmarvens (jonathanma@5FB231FA.48ED048E.3A99D594.IP) (Ping timeout)
[19:35:51] <amatus> nejucomo: it sends SNDCTL_DSP_SYNC ioctl to the device
[19:36:06] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[19:36:36] <amatus> Eridius: i've a debug! before the spawn and a debug! after, i never see the latter
[19:38:52] *** Joins: pnkfelix1 (pnkfelix@moz-43495417.fbx.proxad.net)
[19:38:59] <nejucomo> Could the sync somehow be interfering with rust's scheduler?
[19:39:06] *** Quits: roy (roy@moz-2867344C.hsd1.il.comcast.net) (Client exited)
[19:39:23] <Eridius> amatus: slap debug!()s around the sync?
[19:39:25] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[19:39:25] <nejucomo> Can you sync before spawning?
[19:39:27] *** Quits: timot (timot@moz-1F31BE3A.mobile.tre.se) (Quit: Konversation terminated!)
[19:39:47] <amatus> how do i tell rust i want these to be on two different threads? the main thread is going to be CPU bound doing mp3 encoding
[19:40:16] <cmr> amatus: start a new scheduler
[19:40:28] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[19:41:07] <amatus> cmr: that doesn't seem to be explained in the tasks and communication tutorial
[19:41:14] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[19:41:54] <amatus> do i want spawn_sched?
[19:43:27] <amatus> do spawn_sched(SingleThreaded) fixed it!
[19:44:03] *** Joins: zucchini (Mibbit@moz-288722BA.hsd1.ca.comcast.net)
[19:44:13] <cmr> amatus: it's not explained, no one has documented it. I think only one or a few people actually know how it works.
[19:44:35] <cmr> (I certainly don't)
[19:47:23] <toddaaro> it has been a bit since I looked at it, but yes spawn_sched(SingleThreaded) should roughly get you a new scheduler that runs code in a single thread to itself, so if you only make one task there it is kind of like getting a pthread-tier thread
[19:47:46] <toddaaro> the goal is to eventually have a task type that is for pthread-level threads, so you can just ask for one
[19:47:47] <Luqman> ah the transmute hammer :)
[19:48:53] *** Quits: zucchini (Mibbit@moz-288722BA.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[19:50:50] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[19:51:52] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[19:52:50] <simao> Hello. I am using this code to implement a small tcp server. https://gist.github.com/simao/6745860 But stream.read(buf) always blocks even if the client will never write something. And I cant use .eof() before calling .read because it's implementation just raises an error. How would you implement this?
[19:53:43] <nick> Hi! First, I'm sorry to ask a question that is not directly related to rust, but i could use the help of some of the experienced developers here....What are some good books/talks/web resources on concurrency/parallel programming that explains memory ordering and other associated hardware issues?
[19:54:00] <jmcarthur> because finding dark corners of a language is apparently what i like to do: https://gist.github.com/jmcarthur/6745884
[19:54:13] <jmcarthur> does anybody know if a struct like that is possible? ^^
[19:55:17] <engla> the lifetime param for a type decl must be 'self
[19:55:27] <jmcarthur> ah
[19:55:38] <jmcarthur> i guess i should just untie the knot then
[19:55:43] <engla> I think it's possible, not sure if it's usable
[19:56:31] <jmcarthur> https://gist.github.com/jmcarthur/6745884  <-- new comment with untied version
[19:56:40] *** Joins: steveklabnik (steveklabn@moz-624B4A04.west.biz.rr.com)
[19:56:44] <jmcarthur> that one compiles, and i think may be usable
[19:57:02] <jmcarthur> just means i have to pass self to the function in methods
[19:58:17] <nejucomo> jmcarthur: It looks like the latest comment version has a lifetime of the *call* to force, not the lifetime of the thunk.
[19:58:18] *** Joins: dLog (anonymous@moz-8FAE8709.eastlink.ca)
[19:58:38] <nejucomo> Not sure which is best, but it may be an important distinction.
[20:00:19] <nejucomo> Oh, actually a thunk-lifetime might be weird  how would you create one?   let t = Thunk { f: || {  } }
[20:00:22] <jmcarthur> nejucomo: it would be the lifetime of the parameter i pass (which in practice would only be self). is that not the same thing as the lifetime of the thunk when force is called?
[20:00:46] <jmcarthur> nejucomo: i have written a force function that at least compiles and has a reasonable looking type
[20:00:46] <nejucomo> Oh, right  I didn't realize the parameter there  ok.  Hm.
[20:01:08] <jmcarthur> nejucomo: refresh to see my force method
[20:01:56] <jmcarthur> now what i think will be the hard part... creating a thunk
[20:02:02] <nejucomo> But can you write a given thunk value?  The closure must ensure the return value has the lifetime of the struct.
[20:02:07] <nejucomo> Right.
[20:02:33] <nejucomo> -btw: I think you can put ``` on a line before and after the comments to preserve indentation.
[20:02:39] *** Joins: xentrac (kragen@moz-BCBE1DED.canonical.org)
[20:02:47] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:02:55] *** Joins: bt3ze (bt3ze@4D850CF2.B9CBD723.2B99CF6B.IP)
[20:03:04] <xentrac> hi there. Kragen Sitaker here. what's graydon's normal nick?
[20:03:05] <jmcarthur> yeah just being lazy
[20:03:16] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[20:03:16] <cmr> xentrac: he's not around anymore.
[20:03:33] <nejucomo> Did he leave Mozilla?
[20:03:43] <xentrac> :(
[20:03:46] <cmr> No, but he stepped down as project lead.
[20:03:46] <nejucomo> -or just focused on other projects?
[20:04:00] <cmr> I imagine he's on (a well-deserved) vacation or something
[20:04:06] <xentrac> That much I knew. I didn't realize he wasn't involved at all, though.
[20:04:33] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[20:04:33] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[20:05:01] <nejucomo> jmcarthur: So maybe this approach can just work with a copyable T instead of borrows.
[20:05:06] <xentrac> I was hoping to ask him to clarify some licensing on one of his other projects.
[20:05:37] <xentrac> He follows me on Twitter but Twitter is kind of asynchronous, and I'd really like to be talking about his project in about an hour.
[20:05:47] <xentrac> But vacation is probably more important.
[20:06:07] <jmcarthur> nejucomo: i'm kind of crazy, so i'm going to try to see it through with borrows first :)
[20:06:16] <cmr> xentrac: but his normal nick is graydon
[20:06:22] <xentrac> thank you
[20:06:35] <xentrac> also thank you for responding in the first place
[20:06:48] <xentrac> graydon was what I figured, just hoping I was wrong ;)
[20:07:03] <jmcarthur> nejucomo: i don't think it sounds impossible. the lifetime is determined by the self parameter i'm passing in. the force function just has to update the self parameter and then call it to get the result
[20:07:15] <jmcarthur> nejucomo: i misstated that last part
[20:07:32] *** Quits: tjc (tjc@moz-BF4FE20E.tmodns.net) (Quit: Places to go, people to annoy)
[20:08:24] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[20:08:34] <jmcarthur> nejucomo: the constructor takes a function f and has to create a function that takes a & 'a mut Thunk<T>, runs the function f, stores the result in the thunk that i passed into it, then calls force on that
[20:09:00] <jmcarthur> or something like that
[20:10:44] *** Joins: masondesu (masondesu@moz-75054A8B.gsp.bellsouth.net)
[20:11:38] *** Joins: mib_sohcoo (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net)
[20:12:48] *** Joins: jonathanmarvens (jonathanma@5FB231FA.48ED048E.3A99D594.IP)
[20:12:50] <jmcarthur> is it possible to make a closure take ownership of something?
[20:13:06] <steveklabnik> jmcarthur: closures will take onwership of things that were defined outside the closure
[20:13:09] <steveklabnik> is that what you mean?
[20:13:17] <cmr> steveklabnik: eh?
[20:13:38] <jmcarthur> steveklabnik: say i want to return a closure that closes over some owned pointer i defined in the current scope
[20:13:41] <steveklabnik> soryr bad wording
[20:13:45] <jmcarthur> or something like that
[20:13:46] <steveklabnik> i was thinking SPECIFICALLY of the closure with spawn
[20:13:49] <mib_sohcoo> Using Rust 0.7, is there a way to see if a task has finished? I'm using the std::task::spawn_sched method to create separate threads
[20:13:51] <steveklabnik> which is not all closures o_O
[20:14:11] <steveklabnik> that was what i was thinking of, was writing the code example and went... oops!
[20:14:35] <cmr> Closures aren't allowed to move out of captures.
[20:15:02] *** Quits: jonathanmarvens (jonathanma@5FB231FA.48ED048E.3A99D594.IP) (Input/output error)
[20:15:13] <steveklabnik>  note: `x` moved into closure environment here because it has type `~fn:Send()`, which is non-copyable (perhaps you meant to use clone()?)
[20:15:17] <cmr> mib_sohcoo: you could check if the port has closed
[20:15:20] <steveklabnik> is the error that was making me think of it
[20:15:27] <steveklabnik> fn main() {
[20:15:27] <steveklabnik>     let x = ~5;
[20:15:27] <steveklabnik>     do spawn {
[20:15:27] <steveklabnik>         println!("{:?}", x);
[20:15:27] <steveklabnik>     }
[20:15:30] <steveklabnik>     *x;
[20:15:32] <steveklabnik> }
[20:15:34] <nejucomo> jmcarthur: fn make() { let mut x = None; |thunk| { x = Some(costly_calculation()) ; &x } }
[20:15:35] <steveklabnik> that code. basically.
[20:15:40] <cmr> ah, ~fn
[20:15:43] <steveklabnik> (sorry for the spam, ~6 lines is THE LIMIT
[20:15:48] <nejucomo> jmcarthur: I'm brainstorming there, no idea if it's valid.
[20:15:50] <steveklabnik> that i'd paste into a channel)
[20:15:58] <cmr> steveklabnik: (you pasted 7!)
[20:16:09] <steveklabnik> hence 'about six' ;)
[20:16:09] <jmcarthur> nejucomo: i have doubts that will be accepted
[20:16:15] <nejucomo> Me too.  ;-)
[20:16:25] <jmcarthur> nejucomo: since x will go out of scope as soon as you return from make
[20:16:48] <nejucomo> Yes, it needs to be let mut x = ~None, then?
[20:17:02] <jmcarthur> this is where i'm less sure
[20:17:14] *** Joins: Liothen (liothen@moz-266BCA86.spkn.qwest.net)
[20:17:25] <mib_sohcoo> cmr is there a function in the task module that checks the port?
[20:17:48] <nejucomo> Actually, what we start with the Thunk type as: type Thunk = fn () -> T
[20:17:58] <nejucomo> -and then figure out if we can add borrowing...
[20:18:28] <nejucomo> -and a constructor returns a thunk: fn make_thunk(f: ) -> Thunk<T>
[20:18:51] *** Joins: olivier (chatzilla@moz-2811C56F.fbx.proxad.net)
[20:19:46] <olivier> Hi!
[20:20:03] <cmr> Hello olivier!
[20:20:10] <olivier> I've got problem to install rust on my Gentoo machine.
[20:20:23] <jmcarthur> i would like to be able to do that, but there are only two ways to do it. one would be to update the function when forcing the thunk. the other would be to update something in the function's environment. the former sounds hard to get the compiler to accept. the latter would look basically like my earlier enum-based thunk
[20:20:32] <steveklabnik> olivier: what kind of problem?
[20:20:41] <jmcarthur> that's why i'm using the struct knot tying trick instead
[20:20:41] *** Joins: vk (chatzilla@CF715181.CD17DC39.82697C34.IP)
[20:20:43] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Ping timeout)
[20:20:53] <olivier> "Compiling llvm-config.cpp for Release+Asserts build" fails with missing LibraryDependencies.inc
[20:21:24] <olivier> it seems that llvm does not work well
[20:21:51] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[20:22:54] <olivier> Strange, because rust-0.7, was emerged before without problem
[20:24:58] *** Joins: jonathanmarvens (jonathanma@5FB231FA.48ED048E.3A99D594.IP)
[20:25:15] <steveklabnik> olivier: bummer. :( 
[20:25:16] *** Quits: jonathanmarvens (jonathanma@5FB231FA.48ED048E.3A99D594.IP) (Input/output error)
[20:25:23] <steveklabnik> i haven't heard of that error before
[20:25:36] <cmr> olivier: trying building a fresh clone.
[20:25:44] *** Joins: jonathanmarvens (jonathanma@5FB231FA.48ED048E.3A99D594.IP)
[20:25:56] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz)
[20:26:09] <nejucomo> jmcarthur: fn make_thunk(f: ) { let mut optresult = ~None; || { match *optresult { None => { optresult = Some(f()); optresult.unwrap() }; Some(ref res) => res } }
[20:26:10] <olivier> cmr: I tried with the 999.ebuild (git clone version), but the same problem occurs
[20:26:53] <nejucomo> When you call make_thunk, optresult becomes owned by the returned closure.  When you call that closure it can mutate optresult which lives as long as the closure.
[20:27:00] <nejucomo> (Again, I'm just guessing...)
[20:27:14] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[20:27:34] *** Quits: jonathanmarvens (jonathanma@5FB231FA.48ED048E.3A99D594.IP) (Ping timeout)
[20:27:35] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[20:27:37] <nejucomo> Oh, that should be: optresult = ~Some(f());
[20:28:06] *** Quits: nick (Mibbit@D2540B48.15F87C4.520CDC98.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:28:06] <nejucomo> I'm probably missing some & sigils and I haven't figured out how borrowing fits into that...
[20:28:31] <jmcarthur> nejucomo: yes. this is basically the enum version from before, just with all the representation hidden under a closure
[20:29:02] <jmcarthur> nejucomo: actually it's more like the struct containing a function and an optional result
[20:29:26] <jmcarthur> i guess the enum is the most straightforward here
[20:29:32] <nejucomo> Hm  It will hold onto the function after use, so the enum version seems superior, again.
[20:29:37] <nejucomo> Yeah.
[20:32:24] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[20:32:28] <olivier> During the compilation, the processes show a lot of "llvm-build: error: invalid native target: 'x86_64' (not in project)". Is it normal?
[20:32:34] *** Quits: emakarov (Mibbit@moz-ED9083D3.superkabel.de) (Quit: http://www.mibbit.com ajax IRC Client)
[20:33:42] *** Joins: SealedSun (Mibbit@moz-CD16210D.cust.bluewin.ch)
[20:34:12] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[20:38:47] <mib_sohcoo> is there a way to if a task is done running on a port?
[20:38:53] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[20:39:19] <cmr> mib_sohcoo: ah, sorry, didn't see your previous question
[20:39:29] <cmr> mib_sohcoo: try_recv returns None if the port is closed.
[20:39:56] *** Quits: valenting (Thunderbir@55FBCC0.8C025854.E16F0CF5.IP) (Ping timeout)
[20:41:04] <mib_sohcoo> cmr what module is that from?
[20:41:15] <cmr> mib_sohcoo: it's a method
[20:41:22] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[20:42:41] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[20:44:28] *** Joins: GeneralMaximus (ankur@D2FC7BAD.3B7EC11C.BE90E62C.IP)
[20:46:23] <mib_sohcoo> cmr so would I do something like std::task::get_task().try_recv()?
[20:46:42] *** Quits: bt3ze (bt3ze@4D850CF2.B9CBD723.2B99CF6B.IP) (Ping timeout)
[20:47:28] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[20:47:46] *** Joins: DAddYE (DAddYE@7CDFEAF7.B762F512.ECA1A3BD.IP)
[20:47:58] *** Quits: DAddYE (DAddYE@7CDFEAF7.B762F512.ECA1A3BD.IP) (Client exited)
[20:47:59] *** Joins: DAddYE (DAddYE@7CDFEAF7.B762F512.ECA1A3BD.IP)
[20:48:17] <cmr> mib_sohcoo: no? it's a method on Port.
[20:48:34] *** Quits: DAddYE (DAddYE@7CDFEAF7.B762F512.ECA1A3BD.IP) (Client exited)
[20:48:55] <cmr> mib_sohcoo: there's no way to get_task or anything
[20:49:53] <cmr> mib_sohcoo: there's http://static.rust-lang.org/doc/master/std/task/fn.try.html
[20:50:12] <cmr> And the methods on http://static.rust-lang.org/doc/master/std/task/struct.TaskBuilder.html
[20:56:10] *** Quits: vk (chatzilla@CF715181.CD17DC39.82697C34.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 24.0/20130911164256])
[20:56:49] <mib_sohcoo> cmr thanks, I'll check it out
[20:58:55] *** Joins: TheDust (Stijn@moz-8C2076C2.upc-d.chello.nl)
[20:59:00] *** Joins: Addle (quassel@moz-89E971E4.cable.teksavvy.com)
[21:00:02] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[21:00:51] <Addle> Hi folks, just playing around with the latest release and going through the tutorial. I wonder if anyone can tell me what "info!" is, as I can't find a thing on it, nor is it explained in the tutorial.
[21:01:04] <steveklabnik> Addle: it's logging
[21:01:09] <cmr> Addle: it's a macro that logs at log level 3 (info)
[21:01:13] <steveklabnik> there are four levels
[21:01:18] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[21:01:28] <Addle> Ah, thanks, much appreciated!
[21:01:33] <cmr> http://static.rust-lang.org/doc/0.8/rust.html#logging-system
[21:01:42] <steveklabnik> there is a tiny mention in the tutorial
[21:01:43] <steveklabnik> If you want to see the output of debug! statements, you will need to turn on debug! logging. To enable debug! logging, set the RUST_LOG environment variable to the name of your crate, which, for a file named foo.rs, will be foo (e.g., with bash, export RUST_LOG=foo).
[21:01:51] <steveklabnik> cmr's link is best :)
[21:01:51] <Addle> Beautiful, thanks again.
[21:02:14] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:02:33] <strcat> dbaupp: can you look at https://github.com/mozilla/rust/pull/9589 again? added another paragraph
[21:02:52] <Addle> It's unsurprisingly difficult to search for "rust info!". :)
[21:03:09] *** Quits: TheDust (Stijn@moz-8C2076C2.upc-d.chello.nl) (Ping timeout)
[21:03:28] <steveklabnik> ha!
[21:03:34] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[21:03:59] <strcat> steveklabnik: https://github.com/mozilla/rust/pull/9589
[21:04:41] <steveklabnik> readin'
[21:05:26] <strcat> the trait part is a bit wordy but I don't see how else to say it
[21:05:32] <strcat> since they aren't introduced
[21:05:52] <olivier> Well, I'm posting in the Gentoo forum. Maybe someone will have any idea.
[21:07:12] *** Joins: derboi_c (derboi_c@510621FB.DF3CA0D0.BA2F4534.IP)
[21:07:40] <olivier> Which version of llwm is needed to compile rust?
[21:07:53] <benh> Rust ships its own llvm 
[21:08:05] <steveklabnik> yeah, there are patches that havne't made it upstream yet
[21:08:24] <benh> Where'd you get your ebuild?
[21:08:37] <steveklabnik> strcat: i like it, i think it fits into the existing tutorial well
[21:09:00] <olivier> benh: in the overlay rust, which is at https://github.com/Heather/gentoo-rust
[21:09:04] <nejucomo> There were also patches to llvm during the rust 0.4 era.  Are the patches moving upstream while new ones are being created, or have some been sitting in rust for all that time?
[21:09:27] <strcat> they are not really moving upstream
[21:09:28] <olivier> benh: there is no change between 0.7 (disappeared) and 0.8.
[21:10:24] <olivier> benh: ... in the ebuilds
[21:10:29] <benh> I'm using gentoo but building rust manually (and just symlinking the binaries from the build dir into the path somewhere)
[21:10:51] <benh> seems weird to me that the ebuilds depend on llvm and clang
[21:11:44] <strcat> benh: if they do they're wrong
[21:11:54] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[21:12:23] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[21:12:25] <benh> Maybe they just do that to make sure the dependencies for llvm are installed :V
[21:12:44] <benh> It doesn't look like they actually try to make rust's build process use the system llvm, so I don't really know what the deal is
[21:12:58] <benh> sorry, I was never any good with ebuilds :(
[21:13:29] <olivier> benh: thanks, it seems that the problem comes from elsewhere
[21:13:32] <olivier> benh: Manually, after running ./configure without errors, make seems to fail with a lot of "llvm-build: error: invalid native target: 'x86_64' (not in project)"
[21:14:24] <benh> ... weird
[21:14:36] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[21:15:51] <strcat> olivier: didn't they at least drop the optional dependency on pandoc?
[21:16:02] <strcat> there were changes between 0.7/0.8 in regards to packaging
[21:16:04] <benh> ( ... sometimes building rust with make -j fails for me and I just retry without -j and then it works...)
[21:16:43] <luisbg> if I am multiplying a u8 and a u16, and need to get a u16
[21:16:56] <luisbg> let a: u16 = some_u8 * some_u16;
[21:16:59] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Quit: ZNC - http://znc.in)
[21:16:59] <olivier> strcat: I do not see they dropped the dependency to pandoc
[21:17:01] <SiegeLord> benh, I always do make -j4 || make -j4 ._.
[21:17:04] <luisbg> the compiler complains about the first one not being u16
[21:17:05] <derboi_c> Hi, i've a strange error when i compile in 32bit. rustc say me that i try to transmute 64bit pointer to 32bit. Or with --target i686-... i shoulbe have only 32 bit pointer no? (https://gist.github.com/anonymous/6746632)
[21:17:06] <luisbg> do I need to cast it?
[21:17:28] <strcat> derboi_c: &str isn't a pointer
[21:17:30] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[21:17:30] <strcat> it's a slice
[21:17:41] *** Quits: gareth0 (gareth0@moz-D7D6439B.dynamic.dsl.as9105.com) (Ping timeout)
[21:17:44] <strcat> there's no 'str' type
[21:17:54] <benh> (strcat: is it still on schedule to become a pointer?)
[21:17:58] <strcat> no
[21:18:00] <strcat> it never was afaik
[21:18:03] <strcat> it needs a length
[21:18:12] <benh> right
[21:18:14] *** Quits: elij (elij@E6C4342E.9D386EAF.AF7F4FE0.IP) (Ping timeout)
[21:18:21] *** Joins: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net)
[21:18:31] <strcat> dynamically sized types applies to trait, not really vectors
[21:18:33] <strcat> traits*
[21:18:42] *** Quits: mib_sohcoo (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:18:59] *** Joins: Skif (emschwar@moz-4C5BB5A8.beyondbb.com)
[21:19:28] <strcat> because @mut [T], ~[T] and &[T] are all fundamentally different - only ~[T] can be resized, &[T] is a slice
[21:20:50] *** Joins: elij (elij@E6C4342E.9D386EAF.AF7F4FE0.IP)
[21:20:59] <SiegeLord> Yo, check out my rejigged CSS for the new rustdoc: http://siegelord.github.io/RustGnuplot/doc/gnuplot/axes2d/struct.Axes2D.html
[21:21:13] <SiegeLord> More rounded corners and shadows!!1!
[21:21:40] *** Quits: Skif (emschwar@moz-4C5BB5A8.beyondbb.com) (Ping timeout)
[21:22:19] *** Quits: KindOne (KindOne@moz-C2792F8.dynamic.ip.windstream.net) (Ping timeout)
[21:22:38] <derboi_c> strcat: mhmm ok, but why 64?
[21:22:48] <strcat> derboi_c: because a slice is a pointer and a length
[21:22:51] <strcat> not a pointer
[21:22:53] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[21:23:07] <derboi_c> Ok i see
[21:23:13] <strcat> it points into some block of memory, it needs to know how long the slice is too
[21:23:37] <engla> SiegeLord: nice docs over all, but those function signatures are hard to read.. (set_x_tics)
[21:24:16] <SiegeLord> You do know that's Rust, right? :P
[21:24:31] <cmr> SiegeLord: nice!
[21:24:47] <SiegeLord> Plus, there's only so much one can do with CSS though...
[21:24:48] *** Quits: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net) (Ping timeout)
[21:24:52] <engla> yeah
[21:25:07] *** Joins: KindOne (KindOne@moz-C2792F8.dynamic.ip.windstream.net)
[21:26:29] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[21:26:45] <polyfractal> is there a generic Object type?  I basically want a HashMap of settings, where the key is a string but the setting may be <whatever>.  Is the only way a big struct that has each setting with a type/enum?
[21:27:07] <strcat> an enum or a trait object with the trait you want
[21:27:15] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[21:27:21] <strcat> rust doesn't have object inheritance, so there's no Object
[21:27:42] <strcat> and you couldn't use it for anything if there was because there isn't reflection beyond what repr uses
[21:27:54] <strcat> it'd just be a pointer to an unknown blob ;p
[21:28:08] <polyfractal> gotchai figured as much, but thought i'd ask :)
[21:28:14] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[21:28:16] <cmr> we need COM!
[21:28:25] *** Quits: Lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net) (Ping timeout)
[21:29:01] *** Quits: threecreepio (jdp@moz-9C11F46E.cust.bredbandsbolaget.se) (Quit: threecreepio)
[21:29:28] *** Joins: threecreepio (jdp@moz-9C11F46E.cust.bredbandsbolaget.se)
[21:30:07] *** Quits: msingle (Thunderbir@moz-1A29E89B.nrflva.fios.verizon.net) (Ping timeout)
[21:30:08] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[21:30:17] <SiegeLord> Hmm... I need to remember not to do color related work on this laptop... it makes everything look wrong >_<
[21:30:53] *** Joins: Lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net)
[21:31:04] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[21:31:27] <derboi_c> strcat: Thx :D tuple is my solution so. I'va another question, i get "requires 'function_name' lang_item" when i use "~ or @". I've try to do it directly in the same file, but the error stay. I don't know how i must put it?
[21:31:33] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[21:31:38] *** Joins: vk (chatzilla@CF715181.CD17DC39.82697C34.IP)
[21:32:08] <strcat> derboi_c: if you're going to be using #[no_std], you can't really use @
[21:32:20] <strcat> you can define exchange_malloc/exchange_free and ~ will work
[21:32:26] <strcat> and you can make a reference-counted type
[21:32:34] <strcat> if you want it done out of the box you need to use libstd
[21:33:12] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:33:13] <derboi_c> strcat: yes but define where? I already try, but no result
[21:33:33] <derboi_c> tustc want special path/architecture ?
[21:33:34] <strcat> derboi_c: http://ix.io/8fH just like this
[21:33:36] *** Joins: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net)
[21:34:30] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[21:34:30] *** ChanServ sets mode: +ao brson brson
[21:34:54] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[21:34:58] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz)
[21:35:34] <derboi_c> strcat: ok thx, i will try with "#[lang = "exchange_free"]"
[21:35:54] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[21:38:42] <doomlord_> are there docs on what #[no_std] does 
[21:38:54] *** Quits: nkoep (nik@moz-6D3F9A4B.vpn.rwth-aachen.de) (Ping timeout)
[21:38:55] <cmr> doomlord_: it just doesn't link to libstd
[21:39:32] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[21:39:59] *** Quits: heftig_ (heftig@moz-A1350D02.dip0.t-ipconnect.de) (Ping timeout)
[21:40:03] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[21:40:27] <derboi_c> strcat: have set the prototype of exchange_free like that "fn exchange() {}". Assert(bad proto) then coredump :D. Else thx all works!
[21:40:27] <doomlord_> presumably there's something that stops the runtime stuff that @ depends on somewhere
[21:40:36] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[21:40:43] <cmr> doomlord_: that's all language items in libstd
[21:40:56] *** Joins: heftig_ (heftig@moz-FC0CF353.dip0.t-ipconnect.de)
[21:41:02] <strcat> the runtime is implemented in libstd
[21:41:09] <strcat> libstd == the runtime, for now
[21:42:59] <jmcarthur> it's shame that i have to declare my thunks to be mutable even though their meanings don't change when i force them
[21:43:25] *** Quits: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net) (Ping timeout)
[21:43:32] <derboi_c> it's rustc witch has coredump ^^ Else yes i've seen. Lots of code is in std, i can only use internal, or recode ^^
[21:43:51] <strcat> LLVM calls abort when something is wrong
[21:44:05] <derboi_c> I've seen ;P
[21:44:24] <strcat> rust doesn't type check lang items atm since they're all implemented in libstd
[21:44:58] <derboi_c> With --emit-llvm, clang coredump (bad format), and llvm-link + gcc crash because some information is missing
[21:45:01] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[21:45:14] <jmcarthur> aw man, i just got rustc to segfault
[21:45:16] <engla> jmcarthur: it's possible to use a hack like std::cell to embed a mutable slot
[21:45:24] <derboi_c> s/llvm/lc
[21:45:45] <derboi_c> --emit-llvm + lc != rustc -S
[21:45:52] *** Joins: tikue_ (tkuehn@4245E30A.E2CAEE6E.689607DE.IP)
[21:46:03] <olivier> benh: even manually, I've got "llvm-build: error: invalid native target: 'x86_64' (not in project)" and "llvm-config.cpp:45:35: fatal error: LibraryDependencies.inc: No such file or directory"
[21:46:09] <strcat> derboi_c: because you're using a different LLVM version
[21:46:11] <jmcarthur> engla: i'm going to guess std::cell introduces a level of indirection?
[21:46:19] <olivier> benh: did you succeed compile version 0.8?
[21:46:22] <strcat> derboi_c: IR isn't a stable format
[21:46:32] <strcat> jmcarthur: no, it's just Option + #[no_freeze] + casts
[21:46:34] <jmcarthur> don't bother answering. i'll look it up the way i should
[21:46:41] <jmcarthur> ah
[21:46:41] *** Quits: steveklabnik (steveklabn@moz-624B4A04.west.biz.rr.com) (Ping timeout)
[21:46:42] <engla> ok I'll be silent
[21:46:47] <jmcarthur> sorry :)
[21:46:50] <engla> hehe
[21:47:24] <derboi_c> strcat: =/
[21:47:56] *** Quits: streamer45 (streamer45@moz-47A4E4E4.retail.telecomitalia.it) (Quit: :P)
[21:47:57] <strcat> LLVM bytecode changes week to week and IR is just the text representation
[21:48:45] <derboi_c> strcat: stable world :D
[21:49:04] *** Quits: vk (chatzilla@CF715181.CD17DC39.82697C34.IP) (Ping timeout)
[21:49:13] <CarpNet> hey there, having problems getting rustpkg build to pick up a library i've built using it, "rustc" and "rust build" can both pick this library up at the path ~/.rust which i've added to RUST_PATH but for some reason rustpkg just can't find it, i'm using extern mod to include the module, anyone know if rustpkg has a known problem with this? thanks
[21:50:04] <derboi_c> I've try to do a path (for rustc) but for each modification i must compile and it take 3-10min for just one change (in rs file). Is normal or you are tricks to by-pass it?
[21:50:16] <derboi_c> s/path/patch/
[21:50:21] *** Joins: steveklabnik (steveklabn@moz-624B4A04.west.biz.rr.com)
[21:51:58] *** Quits: olivier (chatzilla@moz-2811C56F.fbx.proxad.net) (Quit: bye!)
[21:53:02] *** Joins: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net)
[21:53:47] *** Quits: canhtak (jeremy@moz-C6007F4.wl.t.ulaval.ca) (Quit: canhtak)
[21:55:22] <cmr> http://catpad.net/michael/apl/
[21:56:09] *** Quits: aeqwa (aeqwa@moz-FD7681AB.dsl.tropolys.de) (Quit: Lost terminal)
[21:57:00] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[21:58:44] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[21:59:12] *** Quits: anri (solancile@moz-E49E7C4B.hsd1.wa.comcast.net) (Quit: anri)
[21:59:30] *** Joins: nkoep (nik@moz-D79E7824.pool.mediaways.net)
[22:04:24] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[22:05:18] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[22:06:43] <jmcarthur> oh, i figured out how i segfaulted rustc
[22:06:56] <jmcarthur> it probably can't monomorphize a non-regular data type
[22:07:12] <jmcarthur> makes sense i guess
[22:08:01] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[22:08:13] <jmcarthur> looks like in the past it used to loop forever on this, but now it segfaults
[22:11:20] *** Quits: Lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net) (Ping timeout)
[22:12:22] <strcat> jmcarthur: because the new runtime doesn't implement stack safety yet
[22:12:28] <strcat> it would have gone out-of-memory before, eventually
[22:13:19] *** Joins: squiddy (squiddy@moz-4265BEBB.adsl.alicedsl.de)
[22:14:10] <jmcarthur> so i guess rustc is written in rust, then?
[22:14:18] <steveklabnik> yup!
[22:14:23] <jmcarthur> got it
[22:14:36] <jeaye> start_on_main_thread no longer takes the crate?
[22:14:50] <cmr> jeaye: crate map, no.
[22:14:57] <jeaye> crate map, sorry.
[22:15:05] <cmr> isn't it wonderful! :D
[22:15:07] <jeaye> Does main need to bother taking it then?
[22:15:11] *** Quits: steveklabnik (steveklabn@moz-624B4A04.west.biz.rr.com) (Quit: brb)
[22:15:13] <cmr> Does main still take it?
[22:15:19] <cmr> If it does, it /probably/ shouldn't.
[22:15:27] * jeaye tries.
[22:15:29] <cmr> Luqman: can you comment on that?
[22:15:41] *** Quits: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[22:15:44] *** Joins: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP)
[22:16:05] <jeaye> main can't take it.
[22:16:07] <jeaye> :)
[22:16:16] <Luqman> cmr: jeaye no, std::rt::start find it themselves now
[22:16:28] <jeaye> Luqman: Sounds good to me.
[22:16:30] <jeaye> Thanks
[22:17:32] *** Quits: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net) (Ping timeout)
[22:17:32] <strcat> jmcarthur: yeah, in the 0.7 -> 0.8 cycle the runtime was also rewritten nearly fully in rust
[22:18:52] *** Joins: Larry (larryfox@26EE99DC.88C61CC9.ECED8BE3.IP)
[22:19:38] <luisbg> if I am multiplying a u8 and a u16, and need to get a u16
[22:19:38] *** Joins: cdidd (cdidd@moz-86EE38A5.broadband.corbina.ru)
[22:19:39] <luisbg> let a: u16 = some_u8 * some_u16;
[22:19:45] <luisbg> the compiler complains about the first one not being u16
[22:19:47] <luisbg> do I need to cast it?
[22:20:07] <jeaye> yes
[22:20:20] <jeaye> some_u8 as u16
[22:20:37] *** Quits: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[22:20:41] *** Joins: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP)
[22:21:09] <luisbg> jeaye, it makes the readability a bit weird
[22:21:15] <jeaye> yup
[22:21:29] <jeaye> Best bet it to use compatible types where you can.
[22:21:36] <jeaye> Or intermediate variables where you need.
[22:21:58] <jeaye> Or suffer the wrath of super strict typing.
[22:22:24] <luisbg> jeaye, varu8 as u16 / some_other;
[22:22:25] <luisbg> heh
[22:22:30] <luisbg> that as before the division
[22:22:34] <luisbg> going to see if I can avoid it
[22:22:45] <strcat> only works in C because C promotes anything smaller than 'int' to 'int' when you do anything with it
[22:23:02] <strcat> and if you have an int and a float, it will assume you want to coerce to a float
[22:23:08] <luisbg> strcat, does that imply extra instructions all the time to cast ints in C?
[22:23:37] <luisbg> from the compiler I mean, does the C compiler use a lot of unneeded instructions by casting any possible promotion
[22:23:41] <strcat> well it means C can't do 16-bit arithmetic if int is 32-bit
[22:23:42] <luisbg> ?
[22:23:53] <strcat> casting doesn't do anything at runtime
[22:24:01] *** Joins: canhtak (jeremy@moz-C6007F4.wl.t.ulaval.ca)
[22:24:13] <strcat> (up-casting)
[22:24:31] *** Quits: nkoep (nik@moz-D79E7824.pool.mediaways.net) (Quit: Leaving)
[22:26:35] *** Joins: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net)
[22:26:47] <luisbg> strcat, because casting is just shaving off bits?
[22:27:03] <jeaye> Or adding some!
[22:28:13] <doomlord_> floats to ints can sometimes be problematic in some architectures
[22:28:37] <doomlord_> and vica versa,,, but between ints of different sizes is usually free
[22:29:12] *** Quits: CarpNet (Alasdair@moz-EF831A5E.cable.virginmedia.com) (Quit: Leaving)
[22:29:44] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:30:28] <luisbg> doomlord_, that is what I meant :)
[22:31:48] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[22:32:45] <polyfractal> I really dislike the syntax for casting in Rust.  So verbose, and makes long math lines (with different types) super hard to read visually
[22:32:45] *** Quits: jmcarthur (Mibbit@moz-5273B42.nycmny.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:33:05] <luisbg> what is the fmt!() code for u8? %u expects uint, but not u8
[22:33:16] <cmr> luisbg: don't use fmt!, it'd obsolete
[22:33:24] <luisbg> cmr, what should I use now?
[22:33:27] <cmr> luisbg: format!
[22:33:36] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:33:39] <luisbg> cmr, and what is the code for u8 usage?
[22:33:51] <cmr> rusti: format!("{}", 255u8)
[22:33:52] -rusti- ~"255"
[22:34:02] <cmr> luisbg: doesn't need one :)
[22:34:09] <jeaye> polyfractal: User intermediate variables
[22:34:09] <luisbg> cmr, even better!
[22:34:23] <SiegeLord> rusti: format!("{:u8}", 255u8)
[22:34:23] <jeaye> Casting is messy either way.
[22:34:23] -rusti- <anon>:7:26: 7:31 error: unknown format trait `u8`
[22:34:23] -rusti- <anon>:7          format!("{:u8}", 255u8)
[22:34:23] -rusti-                                    ^~~~~
[22:34:23] -rusti- error: aborting due to previous error
[22:34:23] -rusti- application terminated with error code 101
[22:34:39] <polyfractal> jeaye: yeah, that's what I've started doing.  I'm assuming the compiler recognizes they are intermediates and just simplifies at compilation time?
[22:34:48] <jeaye> `foo as i32` is cleaner than `static_cast<int32_t>(foo)` :P
[22:34:56] <polyfractal> ewww
[22:35:05] <jeaye> polyfractal: If they're immutable, yeah.
[22:35:12] <polyfractal> (i32)foo  would be my choice
[22:35:19] <jeaye> >.<
[22:35:25] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[22:35:28] <luisbg> rusti: format!("{}", 5 as u8)
[22:35:29] -rusti- ~"5"
[22:35:36] <luisbg> :)
[22:35:41] <cmr> polyfractal: you shouldn't be casting, is the moral of the story.
[22:36:00] <luisbg> cmr, sometimes you can't avoid it
[22:36:07] <luisbg> unless you use big types for everything
[22:36:41] <polyfractal> cmr: sure, but a lot of functions are particular about the type.  E.g. vec::from_elem requires a uint, and maybe im storing that value as a u8 because i only have small vector sizes
[22:37:16] <jeaye> ^ Enter std::vector<T>::size_type
[22:37:21] *** Quits: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net) (Ping timeout)
[22:38:24] <polyfractal> hm?  Dunno what that means (i'm still a Rust baby :P )
[22:38:43] <cmr> that's c++
[22:38:50] <polyfractal> oh pheww, ok :)
[22:38:51] <jeaye> It's how C++ handles that problem.
[22:39:16] <jeaye> Types like vec have typedefs for certain uses.
[22:39:31] <jeaye> And you'd use that instead of u8 in your code.
[22:39:53] <polyfractal> gotcha
[22:40:27] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[22:42:00] *** Quits: Azdle (patrick@moz-8C723B60.hsd1.mn.comcast.net) (Ping timeout)
[22:43:46] <polyfractal> Totally switching gears:  right now I'm decoding a simple JSON string into a Hashmap<~str, ~str>.  What should I decode into if the JSON has multiple levels?  A string won't work
[22:44:12] <cmr> polyfractal: use extra::json
[22:44:40] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[22:44:49] <polyfractal> cmr: I am  - let doc = json::from_str(r.body).unwrap();
[22:44:56] <polyfractal> then a decoder
[22:45:16] <cmr> extra::json should return a Json object
[22:45:45] <cmr> http://static.rust-lang.org/doc/master/extra/json/enum.Json.html
[22:46:01] <polyfractal> oh, nice
[22:46:13] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[22:46:22] * polyfractal reads
[22:52:24] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[22:53:09] *** Joins: tzakyrie (tzakyrie@moz-57E04ADC.hsd1.va.comcast.net)
[22:53:41] *** Parts: tzakyrie (tzakyrie@moz-57E04ADC.hsd1.va.comcast.net) ()
[22:53:56] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[22:54:06] *** Joins: tzakyrie (tzakyrie@moz-57E04ADC.hsd1.va.comcast.net)
[22:54:27] <tikue_> is there an unsigned num trait
[22:54:34] <cmr> Unsigned
[22:54:55] <cmr> http://static.rust-lang.org/doc/master/std/num/trait.Unsigned.html
[22:55:08] <tikue_> something like vec::from_elem could use that
[22:55:14] <strcat> no, it couldn't
[22:55:28] <strcat> it needs uint, not something bigger
[22:55:39] *** Joins: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net)
[22:55:59] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[22:56:26] <tikue_> why?
[22:56:33] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:56:53] <strcat> because it uses uint, there's no gain from making it generic only to cast to uint internally
[22:57:04] <tikue_> no, why does it use uint
[22:57:13] <strcat> because that's what uint/int are for - they are pointer-size
[22:57:24] *** Quits: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net) (Ping timeout)
[22:57:33] <strcat> a vector can't have more elements than a uint, it's the correct type
[22:57:49] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[22:57:58] <tikue_> i dont understand. why can't a vector have more elements than a uint? i understand you think it's the correct type. i don't understand why
[22:57:58] <strcat> same with other containers as long as they don't do clever compression
[22:58:05] <strcat> because uint is pointer-size
[22:58:19] <pnkfelix1> tikue: because the vec won't address more elements than what's in your computer's memory
[22:58:23] *** pnkfelix1 is now known as pnkfelix
[22:58:39] <strcat> a uint has address all the virtual memory
[22:58:41] <strcat> er
[22:58:43] <strcat> can address*
[22:59:02] <tikue_> are virtual addresses really only 32 bit?
[22:59:07] <strcat> uint isn't 32-bit
[22:59:07] <tikue_> why can't they be larger?
[22:59:09] <strcat> it is pointer-size
[22:59:11] <tikue_> ah
[22:59:13] <tikue_> i see
[22:59:17] <strcat> u32 is 32-bit
[22:59:20] <tikue_> ok
[22:59:28] <strcat> maybe uint/int should be called uintptr/intptr
[22:59:31] <cmr> no
[22:59:32] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[22:59:33] <cmr> :\
[22:59:34] <tikue_> lol
[22:59:48] <strcat> cmr: encourages people to write correct code when they don't know the bounds...
[23:00:01] <cmr> but it's so ugly and sadface.png
[23:00:01] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[23:00:01] <tikue_> but it looks ugly as sin
[23:00:01] *** ChanServ sets mode: +ao brson brson
[23:00:02] <pnkfelix> uptr iptr.  Or better still, up and ip
[23:00:03] <strcat> need big integers in libstd + a wrapper enum
[23:00:04] <tikue_> :)
[23:00:04] <tikue_> 
[23:00:06] * pnkfelix ducks
[23:00:14] <tikue_> haha
[23:00:18] <SiegeLord> Might as well switch back to size_t and ssize_t
[23:00:25] <strcat> well, no _t
[23:00:25] <SiegeLord> at that point
[23:00:39] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[23:00:41] <strcat> that's a hack because C/POSIX reserve names ending in _t
[23:00:48] <strcat> so they get to add more whenever the want
[23:00:53] <strcat> they also reserve names starting with str*
[23:00:58] <strcat> not that anyone cares.
[23:00:58] <cmr> they do?
[23:01:10] <cmr> I knew about _t (which I ignore), but not about str&
[23:01:14] <cmr> str* *
[23:01:14] <strcat> cmr: they reserve strfoo but not str_foo
[23:01:24] <cmr> huh
[23:01:54] <strcat> cmr: http://www.gnu.org/software/libc/manual/html_node/Reserved-Names.html there's a list of the POSIX/C requirements there
[23:01:58] <strcat> Names beginning with str, mem, or wcs followed by a lowercase letter are reserved for additional string and array functions. See String and Array Utilities. 
[23:02:36] <SiegeLord> What does C/POSIX mean?
[23:02:41] <engla> C also reserves _ followed by A-Z, but it's used universally in header guards
[23:02:43] <SiegeLord> Is it POSIX or is it C?
[23:03:23] <doomlord_> was it __ thats reserved, not _
[23:03:52] <engla> doomlord_: identifiers with __ or starting with _ followed by A-Z. For example _Bool, _Thread_local follow that pattern for that reason
[23:04:05] <doomlord_> ok makes sense
[23:04:11] <engla> _Static_assert :)
[23:04:15] <engla> beautiful
[23:04:28] <engla> all keywords should use that convention for clarity
[23:05:13] <cmr> yeah
[23:05:27] <tikue_> wat
[23:05:33] <engla> ;)
[23:05:36] <engla> better?
[23:07:01] <strcat> engla: C++11 just calls it static_assert because they've stop giving a damn
[23:07:05] <strcat> stopped*
[23:07:13] *** Joins: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net)
[23:07:25] <cmr> 87 keywords in c++11
[23:07:36] <cmr> someone in the phoronix thread about 0.8 said something about rust having too many keywords
[23:07:40] <cmr> they didn't reply to that fact :p
[23:07:49] <engla> well C also added some keywords like restrict without that convention
[23:08:29] <nejucomo> Where can I find a rust sticker for my laptop?
[23:08:39] <cmr> nejucomo: ask brson!
[23:09:03] <tikue_> what's the phoronix thread
[23:09:23] <cmr> http://phoronix.com/forums/showthread.php?84916-Mozilla-Continues-Advancing-Promoting-Rust-Language#post360045
[23:09:37] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[23:09:56] <cmr> oh they did reply
[23:10:59] <myname> they actually promote this?
[23:11:07] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[23:11:08] <myname> i never noticed that
[23:11:33] <PGGB> "Off the top of my head, ruby, D, and delphi are a few that don't need to exist." damn that's a random list
[23:11:50] *** Quits: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net) (Ping timeout)
[23:11:56] <masondesu> Pretty amazing comments in that thread
[23:12:18] <cmr> better than most phoronix threads
[23:12:42] <masondesu> lol
[23:12:52] <doomlord_> "Rust is an overcomplicated programming language. Firefox will never use Rust as an implementation language." << lol
[23:13:05] <tikue_> this thread isn't a great first impression of phoronix 
[23:13:05] <doomlord_> its like C++ but cleaner
[23:13:28] <mcpherrin> tikue_: No, the piss-poor benchmarks would be a better start ;)
[23:13:34] <doomlord_> i guess you get people from GC languages complaining its complex (like C++..)
[23:13:35] <cmr> Yeah
[23:13:36] <PGGB> I'm starting my rewrite of linux in rust, who's with me?!
[23:13:59] <jeaye> Not Linus.
[23:14:29] <PGGB> ok I'll get nvidia on board
[23:14:34] <jeaye> haha
[23:14:45] <bstrie> PGGB: I'm with you! if you need any part of your kernel programmed in javascript, just gimme a holler
[23:14:48] <doomlord_> for people who resisted C++ and stuck with C, perhaps rust would be interesting
[23:15:09] <PGGB> bstrie: sounds great, we'll need a web frontend
[23:15:09] <jeaye> doomlord_: I don't see how.
[23:15:14] <Earnestly> cmr: The phoronix forums are a dangerous place, its unwise to even read, phoronix kills brain cells faster than alcohol :p
[23:15:23] <jeaye> It's even more restrictive and tough to wrangle.
[23:15:23] <tikue_> doomlord_: imo it'd be more interesting for people who relented and gave up C for C++
[23:15:35] <bstrie> PGGB: we have servo for that!
[23:15:42] <bstrie> just port servo to bare metal
[23:15:47] <bstrie> ServoOS
[23:15:49] <ldunn> easy peasy!
[23:15:57] <PGGB> everything fits perfectly!
[23:15:58] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz)
[23:15:59] <bstrie> Servs
[23:16:29] <doomlord_> people like me bounce between C and C++ ..
[23:16:31] <bstrie> who knew programming was so easy!!
[23:16:36] <myname> oh dear, so much hate
[23:16:41] <bstrie> it's just like putting round pegs in square holes
[23:16:44] <bstrie> with great enthusiasm
[23:16:52] <bstrie> anything is possible
[23:18:01] <doomlord_> "As a programmer, I'm sick of having to deal with so many programming languages. I remember the times of CP/M and its Basic interpreter with nostalgia..." <<< sounds like he's in the wrong line of work :)
[23:18:12] * bstrie commends cmr for joining the fray
[23:18:18] * nejucomo ponders replacing components within linux with runtimeless rust in a piecemeal fashion...
[23:18:22] <Earnestly> Can you call yourself a programmer if you liked Basic?
[23:18:30] <doomlord_> its not good if you're forced to deal with many , but having more choice means you're more likely to get a blend that suits you
[23:18:34] <Earnestly> I thought there were rules about this
[23:18:48] <nejucomo> (Keep in mind my pondering is from a perspective with little experience with kernel code.)
[23:18:59] *** Quits: elifrey (peripateti@moz-B5928FE2.hsd1.wa.comcast.net) (Quit: WeeChat 0.4.0)
[23:19:02] <Addle> Earnestly: Yes, but in my defense, I was 8 and that was all I had. :P
[23:19:10] <Earnestly> hehe
[23:19:22] <nejucomo> Earnestly: "liked" - yeah!
[23:19:34] <nejucomo> It was the first access I had to SVGA on a pc clone.
[23:19:36] <bstrie> nejucomo: I don't think that the kernel is overly modular
[23:19:49] <nejucomo> bstrie: Yeah from what I hear it's full of global state.
[23:20:15] <bstrie> the age-old monolithic kernel vs microkernel debate :P
[23:20:27] <Earnestly> I thought that was done
[23:20:28] *** Joins: ofeldt- (ofeldt@moz-B8CCE771.dip0.t-ipconnect.de)
[23:20:43] <nejucomo> Let's imagine this a bit more:  Suppose a given kernel function observes a bunch of global state and makes a few modifications...
[23:20:50] <bstrie> but hey, we could start incrementally rewriting gnu hurd in rust!
[23:21:03] <Earnestly> (And if it isnt over yet, history has proven it :p)
[23:21:09] *** Quits: ofeldt (ofeldt@moz-9CE75C81.dip0.t-ipconnect.de) (Ping timeout)
[23:21:12] <nejucomo> Could a rust function be practically written to do the same, and give some borrow check benefits, without being overwhelmed by glue and safety problems?
[23:21:35] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[23:22:27] <tikue_> just have a global state task ;D
[23:22:42] <tikue_> and have a global channel to it
[23:23:16] <nejucomo> Sounds like the osx kernel, from what I gather: A microkernel with most of everything bolted on as a monolithic kernel appendage.
[23:24:18] <tikue_> all we need is CTFE 
[23:24:22] *** Joins: maik (maik@moz-5DA9E925.dip0.t-ipconnect.de)
[23:24:28] *** Quits: KindOne (KindOne@moz-C2792F8.dynamic.ip.windstream.net) (Ping timeout)
[23:24:33] <cmr> I'd like to point out that master docs now have source links again
[23:24:36] <cmr> Though it's not to github
[23:24:46] <cmr> Eventually we'd link to integrate doomlord_'s fantastic rustfind tool
[23:24:51] <tikue_> are channels reentrant?
[23:24:54] <tikue_> lol
[23:24:58] <nejucomo> The profusion of languages is interesting
[23:25:18] <nejucomo> tikue_: What's CTFE?
[23:25:24] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[23:25:27] <tikue_> compile-time function evaluation nejucomo 
[23:25:37] <cmr> nejucomo: I started writing my own language called Kale that was basically identical to Rust but with overloads and arbitrary user-defined operators
[23:25:48] <cmr> And then I found Rust, and I was very happy!
[23:27:20] <bstrie> ugh, what a bad name :P
[23:27:33] <bstrie> rust is a much better name than kale :)
[23:27:38] <cmr> Oi, Kale is a great name!
[23:27:59] <bstrie> barffff
[23:28:08] *** Quits: maik (maik@moz-5DA9E925.dip0.t-ipconnect.de) (Ping timeout)
[23:28:26] <nejucomo> bstrie: But which tastes better?
[23:28:35] <bstrie> it would be close
[23:28:39] <tikue_> lol!
[23:28:40] <bstrie> too close to call, perhaps
[23:28:44] *** Joins: KindOne (KindOne@moz-C2792F8.dynamic.ip.windstream.net)
[23:28:53] <tikue_> we got a hater on our hands, folks
[23:28:57] <bstrie> haha
[23:29:11] <engla> haha is a nice name for a language
[23:29:13] <cmr> heh
[23:29:23] <bstrie> I'm a supertaster or something, kale is just super bitter to me :P
[23:30:05] *** Joins: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net)
[23:30:52] * nejucomo starts pondering the tastes of different proglang names...
[23:31:08] <cmr> Java, mmm
[23:31:14] <nejucomo> dalvik?
[23:31:32] <nejucomo> Mm  roasted python.
[23:32:19] <SiegeLord> cmr, Rust won't be LL(1) for long (if it even is today :P)
[23:32:25] <cmr> SiegeLord: shhh
[23:33:58] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:35:42] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[23:35:57] <tikue_> strcat: what does this mean: "A large value is returned via a hidden output parameter"
[23:36:34] <pnkfelix> tikue: it means that you won't have to pay for a copy from the callee's local stack frame to the caller's stack frame.
[23:37:11] <pnkfelix> tikue: instead the value will be written, by the callee, into the caller's stack frame
[23:37:25] <bstrie> SiegeLord: why not? the nested comment thing?
[23:37:58] <tikue_> pnkfelix: oh i see - thanks!
[23:38:47] <SiegeLord> bstrie, In addition to issues today (nested &'s iirc), the addition of nested comments and raw-strings will kill it for sure
[23:39:02] <cmr> SealedSun: nested & where?
[23:39:23] <cmr> Erm, @SiegeLord
[23:39:32] <SiegeLord> I don't remember exactly... it's sort of goes that you need arbitrary lookahead to parse &&&&&&&&&&&&&&&int
[23:39:51] <SiegeLord> I don't remember the details... might be 100% wrong
[23:40:02] <cmr> I'm pretty sure you are, since we have a formal antlr grammar that's LL(1)
[23:40:31] <SiegeLord> Does it work?
[23:40:36] <cmr> It did at the time! :p
[23:40:56] <cmr> it's been a few months, but the only syntax changes are removal of @fn and a change in for loops, afaik
[23:40:57] <nejucomo> Oops  I just had: #[cfg(tests)] mod tests {  }  // -which compiles but silently always excludes that module.
[23:40:58] <cmr> .
[23:41:07] <nejucomo> Where can I read about #[cfg()] ?
[23:41:19] <cmr> nejucomo: the source
[23:42:21] *** Joins: maik (maik@moz-5DA9E925.dip0.t-ipconnect.de)
[23:42:25] <SiegeLord> I remember a thread a few months ago... but I didn't think it actually worked
[23:43:03] <SiegeLord> Yeah, I guess it did... huh
[23:43:03] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[23:43:43] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[23:44:02] <pnkfelix> I don't see why nested comments or raw strings would defeat an LL(1) grammar
[23:45:29] <pnkfelix> (our current parser is using more than one token of lookahead, so I won't claim that our current language is LL(1).  but I hold out hope.)
[23:47:30] *** Joins: Azdle (patrick@moz-8C723B60.hsd1.mn.comcast.net)
[23:48:14] <SiegeLord> I don't know the details, only going on hearsay: https://github.com/mozilla/rust/issues/2755
[23:48:41] <pnkfelix> SiegeLord: regular != LL(1)
[23:49:02] <pnkfelix> SiegeLord: Regular, as in Regular Expression, as in, a property of the lexer (aka tokenizer)
[23:49:16] <pnkfelix> SiegeLord: but LL(1) Is a property of the parser.
[23:49:37] <pnkfelix> SiegeLord: (let me find a link to an online pdf I've been enjoying on this topic lately)
[23:49:39] <bstrie> right, nested comments are no harder to parse than nested parentheses
[23:49:50] <bstrie> granted, they're still harder to parse than non-nested comments
[23:49:51] <SiegeLord> Oh... well, nevermind then
[23:50:19] * bstrie throws bushels of kale at SiegeLord 
[23:50:35] <cmr> I really want to not write this code, but I need it :\
[23:50:46] <cmr> Being sentient is awful.
[23:51:56] <pnkfelix> SiegeLord: one (of many) books on this subject: http://dickgrune.com/Books/PTAPG_1st_Edition/
[23:52:24] *** Parts: lex (lex@moz-1975848F.bootp.virginia.edu) ()
[23:52:53] <pnkfelix> (luckily parsing is one of those technologies where a book from 1990 can still remain largely relevant today...)
[23:53:30] <SiegeLord> So, is our parser LL(1)? Did somebody prove it (perhaps from that antlr grammar)?
[23:53:54] <cmr> SiegeLord: antlr verified it as LL(1)
[23:54:06] <bstrie> SiegeLord: our grammar might be *theoretically* LL(1)
[23:54:13] <bstrie> I think we only bothered to get it to like LL(2)
[23:54:13] <cmr> Oh
[23:54:16] <cmr> our parser?
[23:54:18] <cmr> no idea
[23:54:26] <bstrie> the parser itself is definitely at least LL(2)
[23:55:14] <bstrie> just go in the parser and you'll see code that looks like `peek_next_token(); peek_next_token();`
[23:55:25] <pnkfelix> cmr: The version of antlr that jclements used did not force one to use LL(1)
[23:55:31] <bstrie> at least there was back when I was in there a million years ago
[23:55:48] *** Quits: brson (brson@6A848D32.C1B840DD.76F66111.IP) (Quit: leaving)
[23:56:07] <bstrie> iirc jclements mentioned that there are tricks that you can do to make our LL(2) grammar into LL(1)
[23:56:13] <bstrie> but it makes the grammar exponentially more complex
[23:56:23] <bstrie> anyway we only really care that it's finite
[23:56:45] <nejucomo> Woah  I'm getting really confused  Which formatting macros use "{:?}" and which use "%x" ?
[23:56:56] <pnkfelix> well, to placate other tools and IDEs, it might be good to actually restrict ourselves to LL(1)
[23:57:17] <cmr> nejucomo: format! uses the braces
[23:57:19] <pnkfelix> since such a grammar seems most likely to be easily ported to other syntax analyzers
[23:57:56] <pnkfelix> (but alas I don't know if it will happen for 1.0.  we'll see.)
[23:58:13] <nejucomo> cmr: Is there a plan to have only one interpolation syntax?
[23:58:27] <dbaupp> nejucomo: fmt! is being killed
[23:58:35] <dbaupp> (if that's what you're asking)
[23:58:50] <dbaupp> e.g. printfln! and printf! were recently removed
[23:59:14] <nejucomo> ok.
[23:59:28] *** Quits: Larry (larryfox@26EE99DC.88C61CC9.ECED8BE3.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz)
[23:59:37] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[23:59:54] *** Quits: maik (maik@moz-5DA9E925.dip0.t-ipconnect.de) (Ping timeout)
