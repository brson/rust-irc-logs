[00:00:44] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:05:43] *** Joins: twb (textual@moz-56C3F201.res.gatech.edu)
[00:16:36] *** Joins: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca)
[00:41:08] *** Joins: vky (chatzilla@moz-4F2E17BF.dsl.dynamic.sonic.net)
[00:44:46] *** Quits: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca) (Quit: canhtak)
[01:14:07] *** Quits: zaphod_b (ford_p@moz-CCE57F2F.eblcom.ch) (Client exited)
[01:16:16] *** Joins: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca)
[01:29:25] *** kimundi is now known as zz_kimundi
[02:12:22] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[02:13:42] *** Quits: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP) (Connection reset by peer)
[02:13:46] *** Joins: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP)
[02:14:05] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[02:32:48] *** Quits: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca) (Quit: canhtak)
[02:36:53] *** Joins: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca)
[02:37:41] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Connection reset by peer)
[02:40:47] *** Quits: brson_ (brson@6A848D32.C1B840DD.76F66111.IP) (Quit: leaving)
[03:07:34] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[03:15:03] *** Quits: zz_kimundi (kimundi@moz-87DF3113.dip0.t-ipconnect.de) (Ping timeout)
[03:18:59] *** Joins: zz_kimundi (kimundi@moz-D617C5E3.dip0.t-ipconnect.de)
[03:19:00] *** zz_kimundi is now known as kimundi
[03:20:31] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[03:26:55] *** Quits: geoffhill (geoffhill@moz-738DC0DB.org) (Quit: )
[03:28:29] *** Quits: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP) (Client exited)
[03:43:45] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[04:01:18] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[04:38:35] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[04:57:20] *** Quits: twb (textual@moz-56C3F201.res.gatech.edu) (Ping timeout)
[06:01:40] *** Quits: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca) (Quit: canhtak)
[06:06:39] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[06:08:53] *** Quits: vky (chatzilla@moz-4F2E17BF.dsl.dynamic.sonic.net) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131125215016])
[07:14:13] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[07:32:16] <eddyb> so it can emulate some simple memset before jumping into IO code and causing a stack overflow http://ix.io/9fj
[08:00:50] *** Joins: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP)
[08:03:05] *** Quits: dbaupp (Thunderbir@4F13D67D.D5A1DCF.37681C44.IP) (Ping timeout)
[08:24:08] *** Joins: morphevs (Adium@moz-C1F7EB20.cust.bluewin.ch)
[08:25:02] *** Quits: morphevs (Adium@moz-C1F7EB20.cust.bluewin.ch) (Quit: Leaving.)
[08:25:04] *** Joins: morphevs (Adium@moz-D1B4E172.uzh.ch)
[08:28:15] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:31:20] *** kimundi is now known as zz_kimundi
[08:43:10] *** zz_kimundi is now known as kimundi
[08:45:10] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:56:56] *** Quits: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP) (Quit: Leaving.)
[09:04:35] *** Joins: dbaupp (Thunderbir@moz-454781A5.lns20.syd6.internode.on.net)
[09:06:08] *** Joins: morphevs1 (Adium@moz-C1F7EB20.cust.bluewin.ch)
[09:06:20] *** Quits: dbaupp (Thunderbir@moz-454781A5.lns20.syd6.internode.on.net) (Ping timeout)
[09:06:36] *** Quits: morphevs (Adium@moz-D1B4E172.uzh.ch) (Connection reset by peer)
[09:06:39] *** Joins: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net)
[09:12:00] *** Joins: zaphod_b (ford_p@moz-CCE57F2F.eblcom.ch)
[09:27:28] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[09:30:36] *** Quits: Ke (jkarlson@moz-785A3407.org.aalto.fi) (Ping timeout)
[09:33:58] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[09:37:57] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[09:42:51] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[09:49:27] <eddyb> half an hour and 2GB to compile a "simple" x86_16 emulator >_>
[09:50:15] <eddyb> strcat was saying something about trans generating bloated IR
[09:54:22] <eddyb> make that 3.26GB and growing
[09:57:49] <eddyb> cmr: ^ do you want a new testcase :P?
[09:59:53] <cmr> eddyb: for what? :P
[10:01:38] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[10:03:32] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[10:03:48] <eddyb> cmr: did my last message go through?
[10:04:16] <cmr> eddyb: yes
[10:04:19] <cmr> My response: "for what? :P"
[10:04:34] <cmr> There's not a lot I can do atm... and I have other focuses that I'm more concerned about atm.
[10:04:36] <eddyb> I am fighting a losing battle, out of scientific curiosity
[10:04:45] <eddyb> cmr: then it didn't: "ridiculous compile time + memory usage"
[10:04:56] <cmr> oh, it didn't
[10:04:59] <cmr> yeah
[10:06:27] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[10:10:20] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[10:27:21] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[10:32:38] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[10:37:53] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[10:40:01] *** Joins: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP)
[10:55:39] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[10:57:30] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[11:03:54] *** Quits: zaphod_b (ford_p@moz-CCE57F2F.eblcom.ch) (Ping timeout)
[11:08:28] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[11:10:17] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[11:12:44] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[11:23:54] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[11:26:11] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[11:54:28] *** Joins: Ke (jkarlson@moz-785A3407.org.aalto.fi)
[11:55:22] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[12:03:37] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[12:05:25] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[12:05:49] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[12:08:49] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[12:11:57] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[12:16:39] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[12:18:00] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[12:28:59] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[12:32:58] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[12:38:47] *** Joins: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca)
[12:39:50] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[12:41:18] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[12:46:38] *** Quits: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP) (Quit: Leaving.)
[12:57:13] *** Quits: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca) (Ping timeout)
[12:59:03] *** Joins: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca)
[13:17:12] *** Joins: zaphod_b (ford_p@moz-CCE57F2F.eblcom.ch)
[13:17:54] *** Quits: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca) (Quit: canhtak)
[13:31:03] *** Joins: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca)
[13:36:44] *** Joins: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP)
[13:43:23] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[14:10:02] *** Joins: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP)
[15:06:45] *** Quits: zaphod_b (ford_p@moz-CCE57F2F.eblcom.ch) (Connection reset by peer)
[15:06:57] *** Joins: zaphod_b (ford_p@moz-CCE57F2F.eblcom.ch)
[15:23:22] *** Quits: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP) (Quit: Leaving.)
[15:28:41] *** kimundi is now known as zz_kimundi
[15:41:53] *** Quits: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca) (Quit: canhtak)
[16:00:31] *** zz_kimundi is now known as kimundi
[16:05:01] *** Joins: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca)
[16:30:12] *** Joins: tOkeshu (tOkeshu@moz-BC063B9E.me)
[17:09:28] *** Joins: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP)
[17:25:24] *** Quits: morphevs1 (Adium@moz-C1F7EB20.cust.bluewin.ch) (Quit: Leaving.)
[17:35:43] *** Joins: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP)
[17:36:10] *** Quits: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP) (Max SendQ exceeded)
[17:48:51] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[17:49:11] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:54:55] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[17:55:12] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:56:52] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[17:57:13] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:58:56] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[17:59:14] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:06:18] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[18:10:06] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[18:36:40] *** Joins: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP)
[18:39:15] *** Quits: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP) (Ping timeout)
[18:39:31] *** Joins: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP)
[18:40:21] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[18:45:08] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[18:54:55] *** Quits: zaphod_b (ford_p@moz-CCE57F2F.eblcom.ch) (Ping timeout)
[18:55:49] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[18:56:40] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[19:06:53] *** Joins: zaphod_b (ford_p@moz-CCE57F2F.eblcom.ch)
[19:44:22] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[19:44:35] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[19:44:45] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[19:48:37] *** Quits: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP) (Quit: Leaving.)
[20:11:21] *** Joins: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP)
[20:24:38] *** Joins: jvns (bork@87D98E32.4046EB22.428F94DD.IP)
[20:26:07] <sbalmos> jvns: Welcome to the other looney bin
[20:26:26] <jvns> sbalmos: thanks! super excited that this is a thing :)
[20:26:47] <eddyb> jvns: there's more to talk about it (SLAB -> Slam - M from James Molloy -> this version, which I've been told to name BlamAllocator - B from eddyB)
[20:27:05] <eddyb> jvns: but I really got to go right now, if you see me tomorrow, ping me
[20:27:26] <jvns> eddyb: cool, thanks! I'll try to take a look at it today
[20:27:45] <eddyb> I've been trying to get VBE (so I can have gfx) working in rustic for a few weeks now, that's why there's been minimal activity
[20:28:45] <jvns> where rustic is right now sounds like exactly where I want to get to (echoes characters entered on the keyboard)
[20:29:14] <bjz> jvns: btw, I posted you to /r/rust http://www.reddit.com/r/rust/comments/1s3jgd/day_36_on_programming_without_malloc/
[20:29:23] <bjz> jvns: nice article!
[20:29:45] <jvns> bjz: thanks! :)
[20:29:49] <jvns> learning this stuff is so much fun
[20:30:00] <bjz> it's a little scary the `pub unsafe fn main`
[20:30:00] <sbalmos> Personally I'm trying to play with Rust in general before I start kernel hacking. Plus have to remind myself of the original designs I had for booting. Been a few years. :P
[20:30:18] <jvns> I skipped my OS class in university and it's really fun to learn it from scratch
[20:30:22] <bjz> could you just do `unsafe { putchar(2, 4, c); }`?
[20:30:41] <jvns> yeah I could! I'm still trying to work out when to use unsafe blocks vs functions
[20:30:52] <jvns> probably unsafe { putchar(2, 4, c); } is the right thing
[20:31:03] <bjz> jvns: it's always good to tighten down you unsafe functions as much as possible
[20:31:18] <sbalmos> really, the currently boot stuff needs to go in something like a platform-specific booting crate, which turns around and calls an external crate of the main platform-independent kernel afterwards. :)
[20:31:20] <bjz> wait, why is put_char unsafe?
[20:31:43] <jvns> well it writes to a raw memory address
[20:31:50] <bjz> ohh
[20:32:03] <jvns> but I guess at some point I need to declare it safe
[20:32:03] <bjz> ok, makes sense
[20:32:08] <jvns> or need to declare something safe
[20:32:17] <jvns> otherwise there won't be any safe interface
[20:32:43] <sbalmos> heheh
[20:32:50] <bjz> yeah, you just need to work out what point you want your api to be 'trusted'
[20:32:51] <sbalmos> Why write in a safe language if everything's unsafe? :P
[20:33:11] <sbalmos> As I was telling tiffany yesterday, either of you guys done any studying of Genode?
[20:33:34] <jvns> nope
[20:33:36] <jvns> what's Genode?
[20:34:02] <cmr> sbalmos: I looked at genode after someone (you? sfackler?) mentioned it, and it looks very sane.
[20:34:15] <bjz> jvns: like `fn conv(t: (int, int, int)) -> [int, ..3] { unsafe { transmute(t) } }` is perfectly fine
[20:34:54] <sbalmos> cmr: It's taking me a long time to accept how very slim and low-level its kernel is
[20:34:57] <jvns> yeah if I add some bounds checks to putchar() it should be safe
[20:35:09] <jvns> that's a good example, thanks!
[20:35:54] <sbalmos> cmr: Further, if you read about the OS X Darwin boot process, the microkernel gets a list of required additional boot modules, aside from the kernel, passed in by its bootloader. The analogue would be having GRUB load additional boot-required modules and passing them along in the kernel boot list
[20:36:12] <bjz> jvns: I just try to get to a trusted interface as quick as possible so I can have Rust's safety checks
[20:36:23] <jvns> that makes sense!
[20:36:55] <cmr> sbalmos: that's what it does, though, with multiboot.
[20:36:59] <jvns> maybe I'll do that now, since I'm kind of stuck on trying to get keyboard interrupts to work
[20:37:04] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[20:37:11] <cmr> And uefi, iirc.
[20:37:16] <cmr> Haven't looked at it deeply in some time.
[20:37:42] <cmr> I gave up after I realized it was a few million lines of code.
[20:38:27] <sbalmos> cmr: Correct. It's just in the typical sense, at best, Linux just has initrd passed along to the kernel
[20:38:35] <cmr> sure
[20:38:41] <sbalmos> cmr: Just saying in a microkernel sense, there'd be a crapload more. :)
[20:38:44] * cmr doesn't think linux is a very good model of an OS
[20:38:46] <cmr> yeah
[20:39:10] <sbalmos> cmr: On the whole it has interesting pieces. So does NT. So does OS X. :D
[20:39:21] <cmr> Sure, definitely!
[20:39:37] <cmr> But, taken in its entirety? Not so sure..
[20:40:49] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[20:41:58] <sbalmos> cmr: Even parts of the Registry I find interesting and useful. The NT Object Manager would be great for hierarchical namespacing of microkernel server registration, etc.
[20:42:06] <sbalmos> anyway...
[20:48:02] <sbalmos> Stupid question while I was playing also, instead of having stub malloc and such for the stdlib, why not at the top of the kernel just have #[no_std] and #[no_main]?
[20:48:11] <wolfwood> xomb gets both the kernel and the init process loaded by grub
[20:50:12] <jvns> oh cool rustic writes to the serial port
[20:50:18] <jvns> that sounds useful for debugging...
[20:52:39] <tiffany> the registry is pretty terrible
[20:54:36] *** Joins: gazoombo (sid6629@moz-E77DEB21.irccloud.com)
[20:55:11] <jvns> gazoombo: welcome!
[20:55:11] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[20:55:17] <gazoombo> :D
[20:55:22] <gazoombo> thanks
[20:59:17] <sbalmos> tiffany: Concept, not implementation.
[20:59:30] <tiffany> I don't like the concept either
[20:59:46] <tiffany> a global recursive hash table of configuration data for applications? how could that ever have ended well?
[20:59:52] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[21:00:13] <sbalmos> tiffany: A microkernel would have to have some form of global typed, hierchical, individually-securable tree of registered service endpoints
[21:00:43] <tiffany> I don't see what the registry has to do with registering services
[21:01:07] <sbalmos> again, conceptually, providing that tree
[21:02:03] <tiffany> they're used for completely different things though
[21:02:24] <tiffany> two things using the same datastructure doesn't make them the same thing
[21:02:33] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[21:03:05] <cmr> sbalmos: you need to stub malloc and stuff for the *language* not the stdlib.
[21:03:15] <cmr> the stdlib doesn't care, but Rust will emit calls to them for ~T etc.
[21:06:19] <kmc> the filesystem is also a nested key-value store, and filesystem-based configuration on Unix is very ad-hoc, with lots of reinvented wheels
[21:06:39] <kmc> on the other hand, there are tons of useful tools for working with files, and they become available for cfg management too
[21:06:44] <kmc> so I think what I really want is a typed filesystem ;)
[21:07:54] <tiffany> if I ever create an operating system, what I'll probably do is allow processes to allocate resource pools and potentially share them with other applications
[21:08:13] <tiffany> if you want a filesystem, you format the resource pool with one and use a library to read and write files on it
[21:08:17] <cmr> So, genode? :p
[21:08:32] <tiffany> the resource pools would be more like memory mapped files than anything else
[21:09:01] <tiffany> I haven't read about how genode does disk access yet, but maybe?
[21:09:21] <tiffany> the most ironic part about all this is that the last time I shared these ideas, people thought I wanted to do the windows registry for the whole OS
[21:09:25] <tiffany> which makes absolutely no sense
[21:09:27] <cmr> lol
[21:11:21] <sbalmos> *sigh*
[21:11:23] <wolfwood> actually, xomb is an exokernel that hierarchically manages resources
[21:11:39] <wolfwood> and we manage pretty much everything with virtual memory
[21:12:09] <sbalmos> kmc: Such "filesystems" exist - ZFS's core, underneath its POSIX layer
[21:12:40] <sbalmos> cmr: Crap, sorry, forgot about the malloc stubs for ~, etc
[21:13:32] <kmc> sbalmos: interesting, do you have more information on that?
[21:14:17] <sbalmos> kmc: The ZFS design docs and site at... well... used to be at Sun
[21:14:19] <sbalmos> hang on
[21:15:45] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[21:15:51] <sbalmos> :/ Can't find one good single source
[21:16:23] <sbalmos> But basically ZFS internally refers to everything as typed objects. The hierarchical nature, assigning of filenames, etc is all at the very top in a POSIX shim
[21:16:43] <cmr> Does it just prentend files are byte arrays, at that level?
[21:17:01] <sbalmos> pretty much. They're just bytestreams
[21:17:05] <Ke> I don't really get what the type means here, if it can't be enforced at compile time
[21:17:21] <sbalmos> So whatever little shim you put on top controls how the bytestream looks as a "file"
[21:17:51] <sbalmos> cmr / Ke: Other part that I typically use is the OS/400 "filesystem" design, which truly was an typed object storage system.
[21:17:53] <Ke> even ntfs can store arbitrary metadata
[21:18:29] <cmr> Ke: types don't need to be static.
[21:19:07] <cmr> but yes
[21:19:26] <Ke> dynamic typing is bad, if you program with dynamic types your are going to have a bad time
[21:21:15] <tiffany> uh
[21:21:39] <sbalmos> Basically this is a VFS concern, whether you're presenting something as a classical hierarchical, string-named set of byte streams, or if those VFS entries are non-hierarchical, have other metadata, have "types", etc
[21:21:42] <tiffany> I think the intention is that data is stored with a tag representing the type
[21:21:55] <sbalmos> tiffany: Essentially
[21:21:55] <tiffany> instead of just directly stored, and the program must know what to make of it
[21:22:00] <Ke> like an xattr?
[21:22:11] <tiffany> then you build a filesystem on top of it
[21:22:27] <tiffany> so there's more than one layer to it, instead of being directly serialized
[21:23:22] <sbalmos> tiffany: It's a bit of both I think
[21:23:46] <sbalmos> tiffany: Have common types, or type handler libs that are registered to the VFS, or still fallback to presenting a bytestream to a program
[21:24:16] <Ke> I used to have such fantasies too, but I'm not so sure anymore it's practical
[21:24:40] <tiffany> I have a feeling that if done too na√Øvely, it'd waste space
[21:24:52] <tiffany> other than that there's probably few if any downsides
[21:26:27] <sbalmos> maybe I'm really just dreaming about having more pervasive support of metadata in the VFS layer.
[21:26:54] <sbalmos> like saying "This file is a Picture type" at the VFS layer, rather than having to open the file, look at the MIME type, look at the extension, read some header from the bytestream, etc
[21:28:14] <Ke> like xattr
[21:28:18] <tiffany> haikuOS stores the mime type and file icon in the inode
[21:28:37] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:28:41] <tiffany> it has a super compact vector graphics format so that icons are usually 512 bytes or less
[21:28:56] <sbalmos> Ke: Except it wouldn't be an *extended* attr. ;)
[21:31:26] *** Quits: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net) (Ping timeout)
[21:38:58] <sbalmos> Ke: More "practically" (for varying levels of practicality), we've previously talked in here about non-hierarchnical, non-named, metadata/search-based filesystems. Internally the API would still have inode IDs and such. But most user interaction would be through tag/metadata searches (which could be persistent to simulate folders).
[21:42:04] <wolfwood> had a colleague who proposed doing automatic naming for non-heirarchical FS
[21:42:36] <wolfwood> but her commitee told her to drop it
[21:44:03] <sbalmos> yeah, trying to derive names for such is a wormhole
[21:44:05] <wolfwood> interesting approach, human-like things look zipfian, so find zipfian metadata and pare it down to a minimum unique identifier
[21:44:21] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[21:45:36] <wolfwood> assuming large number of morately opaque attributes
[21:45:37] <sbalmos> wolfwood: More basically, Spotlight-like. Ultimately it does searching, comes up with a list of inode IDs internally. For presentation to the user, entries might not have a name, so you'd have to display a preview, say "Picture taken on 2013-12-04", etc. Thus, we're back to VFS-known file types
[21:45:50] *** Joins: pcwalton (pcwalton@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[21:46:36] <wolfwood> well, naming can be flat, and it doesn't have to be unified
[21:48:03] <wolfwood> idk, there are a lot of research papers, but nothing overwhelmingly wonderful about non-heir
[21:48:28] <wolfwood> more like 'in a world of exobytes.... we are all screwed'
[21:48:37] <sbalmos> we're already screwed
[21:48:52] <sbalmos> how deep and odd is your filesystem structure in places? :P
[21:51:11] <wolfwood> MY filesystem is great, its a page table... and not persistent... and you can have slashes in your name if you want, cuz directories are boring :P
[21:51:37] <wolfwood> but once I get a SATA driver working, little will change
[21:52:36] <sbalmos> so it's a persistent memory backing store, single-level, with just string-named blobs?
[21:52:48] <wolfwood> yup
[21:54:35] <wolfwood> I like the keykos style of automagic transparent persistence, but will probably end up with a nore explicit approach
[21:54:43] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[21:54:50] <sbalmos> yeah, that gets into all kinds of messiness
[21:55:32] *** Joins: t25 (manu@moz-5D020DB4.otago.ac.nz)
[21:56:07] <wolfwood> its really cool, and I definitely want to play with it, but even they had an opt-out explicit management mechanism
[21:58:05] <wolfwood> i guess the biggest problem is that changing size to the next larger granularity means changing name, but with versioning and explicit snapshotting I think its ok
[21:59:25] <wolfwood> also thinking about how to fake infinite-bit addressing, but you don't wanna page fault on every memory access :P
[22:01:31] <sbalmos> Tying VFS to the pager gets ugly very quickly
[22:10:10] *** Joins: ExceptionRaised (Mibbit@moz-74BA4C12.wv.cc.cmu.edu)
[22:17:02] *** Quits: ExceptionRaised (Mibbit@moz-74BA4C12.wv.cc.cmu.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[22:19:59] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[22:38:43] *** Joins: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP)
[22:49:14] *** Joins: dbaupp (Thunderbir@A192CB9D.D5A1DCF.37681C44.IP)
[23:04:10] *** Quits: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP) (Ping timeout)
[23:05:07] *** Quits: jvns (bork@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[23:09:08] *** Joins: jvns (bork@87D98E32.4046EB22.428F94DD.IP)
[23:19:23] *** Quits: jvns (bork@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[23:27:49] *** Joins: jvns (bork@87D98E32.4046EB22.428F94DD.IP)
[23:31:25] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:47:06] *** Quits: jvns (bork@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[23:56:06] *** Quits: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP) (Quit: Leaving.)
[23:56:47] *** Joins: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP)
