[00:07:18] <SimonSapin> aturon, acrichto: std::os::MemoryMap is deprecated. Are there plan to stabilize a replacement, or should someone move it to crates.io? http://www.reddit.com/r/rust/comments/300ehm/what_should_be_used_instead_of_deprecated/
[00:08:28] <aturon> SimonSapin: it will probably be some time so crates.io is a good option for now
[00:31:32] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[00:33:48] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[00:51:33] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Quit: ChatZilla 0.9.91.1 [Firefox 39.0a1/20150315030236])
[00:54:54] *** Joins: nrc (nrc@moz-4bhi2i.xtra.co.nz)
[00:54:54] *** ChanServ sets mode: +qo nrc nrc
[00:59:52] *** Quits: ecr (chatzilla@moz-lbb.gon.175.205.IP) (Quit: ChatZilla 0.9.91.1 [Firefox 36.0.3/20150319201009])
[02:27:05] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[02:28:40] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[02:28:40] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[02:28:41] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[02:31:02] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.92.1)
[02:35:45] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[02:42:52] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[02:42:55] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[02:43:35] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[02:43:35] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[02:43:36] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[02:51:03] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[02:53:20] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[03:01:47] *** Joins: brson (brson@moz-pmd945.tmodns.net)
[03:01:47] *** ChanServ sets mode: +qo brson brson
[03:25:52] *** Quits: zz_kimundi (kimundi@moz-rl5lt8.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[03:29:00] *** Joins: zz_kimundi (kimundi@moz-7lq6bi.dip0.t-ipconnect.de)
[03:29:01] *** zz_kimundi is now known as kimundi
[03:31:54] *** Quits: brson (brson@moz-pmd945.tmodns.net) (Quit: leaving)
[03:39:33] *** Joins: brson (brson@moz-pmd945.tmodns.net)
[03:39:33] *** ChanServ sets mode: +qo brson brson
[03:55:32] *** Quits: brson (brson@moz-pmd945.tmodns.net) (Quit: leaving)
[04:28:09] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[04:34:09] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[04:34:17] *** Joins: reem (reem@moz-3ugurj.coob.q2h1.0009.2601.IP)
[04:38:28] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[04:56:08] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[05:02:44] *** Quits: reem (reem@moz-3ugurj.coob.q2h1.0009.2601.IP) (Connection closed)
[05:03:04] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[05:33:56] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[05:38:08] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[06:22:57] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[06:28:07] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[06:32:17] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[06:37:19] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[06:37:19] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[06:37:20] *** Joins: reem (reem@moz-3ugurj.coob.q2h1.0009.2601.IP)
[07:02:09] *** Quits: ff (flaper87Moz@moz-g7hu5v.ip56.fastwebnet.it) (Ping timeout: 121 seconds)
[07:13:32] *** Quits: reem (reem@moz-3ugurj.coob.q2h1.0009.2601.IP) (Connection closed)
[07:13:35] *** Joins: reem (reem@moz-3ugurj.coob.q2h1.0009.2601.IP)
[07:18:21] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Ping timeout: 121 seconds)
[07:22:15] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[07:26:27] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[07:34:00] *** Joins: nrc (nrc@moz-4bhi2i.xtra.co.nz)
[07:34:01] *** ChanServ sets mode: +qo nrc nrc
[07:46:50] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[07:51:04] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[08:05:43] *** Quits: reem (reem@moz-3ugurj.coob.q2h1.0009.2601.IP) (Connection closed)
[08:23:18] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[08:25:38] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[08:26:35] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[08:34:22] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[08:41:01] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[08:45:12] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[08:51:11] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[08:57:59] *** Joins: reem (reem@moz-jr2e28.coob.q2h1.0009.2601.IP)
[08:58:04] *** Quits: reem (reem@moz-jr2e28.coob.q2h1.0009.2601.IP) (Connection closed)
[08:58:24] *** Joins: reem (reem@moz-jr2e28.coob.q2h1.0009.2601.IP)
[09:02:26] *** Quits: reem (reem@moz-jr2e28.coob.q2h1.0009.2601.IP) (Ping timeout: 121 seconds)
[09:04:30] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[09:07:40] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[09:07:40] *** ChanServ sets mode: +o pnkfelix
[09:35:10] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[09:39:24] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[09:48:41] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[10:06:52] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Ping timeout: 121 seconds)
[10:29:17] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[10:33:33] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[10:49:56] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.92.1)
[11:04:04] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Client exited)
[11:23:29] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[11:27:43] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[11:53:37] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[11:58:24] <huon> thoughts on https://github.com/rust-lang/rust/issues/15654#issuecomment-84834369 ?
[12:01:09] *** Joins: killercup (killercup@moz-4udt1b.dip0.t-ipconnect.de)
[12:17:38] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[12:21:52] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[12:41:21] *** Joins: pnkfelix (pnkfelix@moz-6v5.3nd.202.89.IP)
[12:41:21] *** ChanServ sets mode: +o pnkfelix
[12:49:05] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[12:53:29] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Ping timeout: 121 seconds)
[13:11:49] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[13:16:01] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[13:21:28] *** Joins: steveklabnik (root@moz-fft.uo8.55.45.IP)
[13:21:29] *** ChanServ sets mode: +o steveklabnik
[13:28:45] *** Joins: joel2 (joel@moz-6ampnk.gtri.gatech.edu)
[14:05:57] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[14:10:13] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[14:19:28] <SimonSapin> Is there a replacement, even unstable, for  TcpAcceptor::set_timeout ?
[15:00:07] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[15:04:23] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[15:13:49] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[15:14:41] <acrichto> SimonSapin: not currently
[15:15:00] <acrichto> SimonSapin: and for TcpAcceptor it is not planned to provide a timeout option for that
[15:15:07] <acrichto> (either unstable or stable)
[16:01:36] *** Quits: killercup (killercup@moz-4udt1b.dip0.t-ipconnect.de) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:11:11] <aturon> SimonSapin: to elaborate slightly, the old timeout system for that relied on some heavy-duty above-the-OS implementation in std for some platforms, which we're trying to move away from
[16:11:43] <aturon> SimonSapin: so at the moment, it seems more appropriate to offer as an opt-in via a crates.io package. it's now quite possible for such packages to interop with std seamlessly.
[16:17:42] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[16:17:42] *** ChanServ sets mode: +qo brson brson
[16:23:56] <nmatsakis> aturon: ok so I was thinking about reflect
[16:23:59] <nmatsakis> acrichto: ^
[16:24:09] <nmatsakis> if we have an object like trait Getter<T> { fn get(&self) -> T; }
[16:24:15] <nmatsakis> and then
[16:24:22] <nmatsakis> fn box<T>(x: Box<Getter<T>>) { ... }
[16:24:23] <nmatsakis> we don't want
[16:24:33] <nmatsakis> Box<Getter<T>>: Reflect to hold, I guess
[16:24:44] <nmatsakis> is that rtue?
[16:24:45] <nmatsakis> *true
[16:25:05] <nmatsakis> I guess my thinking is that you could change Getter into
[16:25:18] <nmatsakis> trait Get<T> { fn into(self: Box<Self>) -> T; }
[16:25:25] <nmatsakis> and then sidestep downcast restrictions by doing
[16:25:52] <nmatsakis> fn get<T>(x: Box<T>) { let obj: Box<Get<T>> = x; }
[16:25:54] <nmatsakis> er
[16:26:03] <nmatsakis> fn get<T>(x: Box<T>) -> Box<Any> { let obj: Box<Get<T>> = x; obj }
[16:26:06] <nmatsakis> and then on the other side
[16:26:14] <nmatsakis> let any = get(x);
[16:26:33] <nmatsakis> any.downcast::<Box<Get<Foo>>().map(|x| x.get())
[16:27:01] <nmatsakis> so I guess we basically want to say that object types are Reflect if their type parameters are also Reflect ?
[16:27:17] <aturon> hm, i'm confused by this example
[16:27:22] <nmatsakis> (this is what the existing OIBIT rules are protecting against, though they protect against more than that, because they also protect against Reflect things being hidden)
[16:27:31] <aturon> in particular, how does get typecheck unless Get<T>: Any?
[16:27:43] <nmatsakis> well that's what we're discussing, isn't it?
[16:27:54] <nmatsakis> (I'm not really actually sure why there is a split between Reflect and Any, but anyway)
[16:28:02] <nmatsakis> that is, Any is implemented for all types T where T: Reflect, basically
[16:28:07] <aturon> ah, i see
[16:28:12] <nmatsakis> so it can't be as simple as "any object type is Reflect"
[16:28:18] <nmatsakis> I believe
[16:28:29] <aturon> (i didn't realize that Any would have this blanket, but that makes sense)
[16:28:59] <nmatsakis> it's not clear to me why Any is not the special trait 
[16:29:00] <aturon> so yes, the OIBIT rules seems reasonable...
[16:29:08] <nmatsakis> well, the problem is that the OIBIT rules are overly strong
[16:29:10] <nmatsakis> because they require
[16:29:15] <nmatsakis> Box<Get<Foo>+Reflect>
[16:29:19] <nmatsakis> (which we don't currently support)
[16:29:31] <nmatsakis> because they want to be sure that you're not closing over anything that is not Reflect either
[16:29:36] <nmatsakis> that makes sense for Send
[16:29:36] <aturon> i see
[16:29:50] <nmatsakis> but is not a perfect fit here, since Reflect is (I think) all about the interface
[16:30:14] <nmatsakis> in particular it meant that stuff like
[16:30:18] <nmatsakis> Box<Writer> didn't impl Any :0
[16:30:33] <aturon> i don't know, i'm having a hard time thinking about this in small bursts :) i think i would need to actually sit down and think it through thoroughly to have any confidence that it's actually offering the proection we want
[16:30:40] <SimonSapin> aturon: doesn’t the OS support timeout on sockets?
[16:30:59] <nmatsakis> aturon: ok, do you want to schedule a time slot to do that? I think we DO want to stabilize Any, right?
[16:31:07] <nmatsakis> aturon: in the meantime I'll impl my plan ;)
[16:31:11] <aturon> nmatsakis: we do need to schedule, yes
[16:31:14] <aturon> err, stabilize
[16:32:02] <aturon> nmatsakis: we can schedule a time, that way i can actually spend some time loading into my head :)
[16:33:14] <nmatsakis> aturon: I feel somewhat better about this idea I had because it seems to suggest a way to make Reflect not so magic; that is, rather than Reflect being a lang item, perhaps it's a different kind of "default" -- a shallower one based on the publicly visible types. Doesn't mean we have to stabilize anything for now of course.
[16:33:29] <nmatsakis> but of course maybe I'm wrong and there is a hole I'm not seeing :) 
[16:33:44] <nmatsakis> er, stabilie anything about this mechanism
[16:34:11] <aturon> SimonSapin: here's the old implementation: https://github.com/rust-lang/rust/blob/master/src/libstd/sys/windows/tcp.rs#L133-L205 https://github.com/rust-lang/rust/blob/master/src/libstd/sys/unix/tcp.rs#L110-L140
[16:34:26] <aturon> SimonSapin: note, this is distinct from timeouts a la sockopts, which we *do* intend to support in the near future
[16:34:30] <aturon> (since the OS provides that directly)
[16:34:41] <aturon> this is only about timeouts on *accepting*
[16:35:06] <SimonSapin> I see, thanks
[16:35:14] <aturon> nmatsakis: right, the thing is, whenever we discuss, things locally make sense but then i realize that i'm totally failing to think through the big picture :) anyway, when would be good for you?
[16:38:40] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[16:39:05] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Client exited)
[16:54:35] *** Joins: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de)
[17:10:57] <acrichto> nmatsakis: aturon: btw I think the Reflect/Any split depends on the OIBIT-ness b/c Any isn't a marker trait while Reflect is the marker trait (just re-read the conversation)
[17:14:46] <nmatsakis> acrichto: ah, yes, well, there is that. 
[17:16:27] *** Quits: pnkfelix (pnkfelix@moz-6v5.3nd.202.89.IP) (Quit: rcirc on GNU Emacs 24.3.92.1)
[17:53:39] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[18:29:38] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[18:33:46] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[19:03:34] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[19:09:44] *** Joins: nrc_ (nrc@moz-4bhi2i.xtra.co.nz)
[19:11:08] *** nrc_ is now known as nrc
[19:19:24] <nmatsakis> acrichto: aturon: ok I sketched out a version of Reflect that I think is what we want, involving some slight compiler mods ...
[19:22:50] <nmatsakis> acrichto: aturon: e.g. this test passes https://gist.github.com/nikomatsakis/f0bccb88534eb2e5e98c
[19:23:52] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[19:28:03] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[19:31:15] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Ping timeout: 121 seconds)
[19:46:38] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[19:50:50] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[19:53:21] <aturon> nmatsakis: looks good :)
[19:56:36] <nmatsakis> acrichto: aturon: fyi https://github.com/nikomatsakis/rust/tree/reflect-trait
[19:58:01] *** Joins: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com)
[20:09:35] <acrichto> nmatsakis: hm fascinating!
[20:09:35] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[20:09:35] *** ChanServ sets mode: +qo brson brson
[20:09:59] <acrichto> oh right it doesn't matter if a trait object contains non-Reflect
[20:10:04] <acrichto> b/c the object itself is Reflect
[20:10:13] <acrichto> e.g. going down to the object itself
[20:40:50] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[20:43:21] *** Quits: joel2 (joel@moz-6ampnk.gtri.gatech.edu) (Ping timeout: 121 seconds)
[20:45:00] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[20:45:39] *** Quits: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com) (Ping timeout: 121 seconds)
[20:59:48] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[20:59:49] *** ChanServ sets mode: +o pnkfelix
[21:00:41] <nmatsakis> acrichto: right, this seems to be a variant on OIBIT
[21:16:49] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[21:19:41] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[21:20:02] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[21:28:08] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[21:28:17] *** Joins: reem (reem@moz-4jmrjg.coob.q2h1.0009.2601.IP)
[21:33:35] *** Quits: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[21:34:59] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[21:39:13] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[22:21:59] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.92.1)
[22:29:11] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[22:33:23] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[22:46:54] <huon> aturon: acrichto: http://internals.rust-lang.org/t/fix-inconsistent-naming-before-1-0/1750
[22:47:10] <aturon> huon: yeah :) size_hint was a good piont
[22:47:28] <aturon> basically i agree with Gankro here
[22:57:20] <acrichto> me too!
[23:01:20] <Gankro> B)
[23:02:10] <brson> i believe in Gankro
[23:02:34] <cmr> in Gankro we trust?
[23:08:27] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[23:23:21] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[23:27:34] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[23:45:48] *** Quits: reem (reem@moz-4jmrjg.coob.q2h1.0009.2601.IP) (Connection closed)
[23:47:43] *** Joins: reem (reem@moz-4jmrjg.coob.q2h1.0009.2601.IP)
[23:56:25] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Client exited)
[23:58:00] *** Joins: brson (brson@moz-7ji.c9m.56.172.IP)
[23:58:00] *** ChanServ sets mode: +qo brson brson
