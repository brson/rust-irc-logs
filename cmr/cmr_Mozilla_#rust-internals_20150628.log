[00:09:30] *** Quits: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au) (Ping timeout: 121 seconds)
[00:13:52] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[00:16:49] *** Quits: Stebalien (Stebalien@moz-iic.0t6.56.172.IP) (Quit: leaving)
[00:21:10] *** Quits: goyox86 (textual@moz-rvv.00r.255.109.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[00:27:06] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[00:27:21] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Quit: ChatZilla 0.9.91.1 [Firefox 38.0.5/20150525141253])
[00:30:45] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[00:34:45] *** Joins: nham (nham@moz-lglsfe.il.comcast.net)
[00:37:54] *** Quits: imperio (Mibbit@moz-8otf3a.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:38:21] *** Quits: bjz (bjz@moz-pl4g2k.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[00:43:53] *** Quits: capella-s3 (capella-s3@moz-3l0.ska.226.209.IP) (Ping timeout: 121 seconds)
[00:47:54] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[00:59:19] *** Joins: bjz (bjz@moz-pl4g2k.tpgi.com.au)
[01:01:35] *** Joins: Zoxc (Zoxc@moz-cvtb2c.bb.online.no)
[01:03:05] *** Joins: Zoxc_ (Zoxc@moz-kd8c2e.bb.online.no)
[01:04:05] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[01:05:22] *** Quits: Zoxc__ (Zoxc@moz-s2fa3s.bb.online.no) (Ping timeout: 121 seconds)
[01:06:34] *** Quits: Zoxc (Zoxc@moz-cvtb2c.bb.online.no) (Ping timeout: 121 seconds)
[01:24:47] *** Astrum|Lap is now known as Astraea|Lap
[01:33:04] *** Astraea|Lap is now known as Astraea
[01:34:01] *** Joins: xarcus (Mibbit@moz-hu6.nja.252.72.IP)
[01:35:16] *** Quits: xarcus (Mibbit@moz-hu6.nja.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:36:33] *** Quits: Sho (sho@moz-hok.1r5.28.5.IP) (Quit: Konversation terminated!)
[01:36:40] *** Joins: Quxxy (chatzilla@moz-0nv.jkp.167.59.IP)
[01:39:00] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[01:39:00] *** ChanServ sets mode: +ao erickt erickt
[01:43:29] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[01:51:13] *** Quits: brandonson (brandonson@moz-04bj5s.cs.ubc.ca) (Ping timeout: 121 seconds)
[01:54:12] *** Quits: phynx (chatzilla@moz-1hvn8j.dsl.scarlet.be) (Ping timeout: 121 seconds)
[01:57:48] *** Joins: brandonson (brandonson@moz-04bj5s.cs.ubc.ca)
[02:00:56] *** Joins: p1start (p1start@moz-nftjhe.org)
[02:06:09] *** Quits: blank_name (blank_name@moz-p4egrb.mi.frontiernet.net) (Quit: leaving)
[02:07:13] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[02:07:59] *** Joins: blank_name (blank_name@moz-p4egrb.mi.frontiernet.net)
[02:14:06] *** Quits: elif (chatzilla@moz-ev8m1p.res.rr.com) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 29.0/20140421221237])
[02:28:19] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:36:46] *** Quits: zz_kimundi (kimundi@moz-482k51.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:37:49] *** Joins: zz_kimundi (kimundi@moz-7l900c.dip0.t-ipconnect.de)
[02:37:51] *** zz_kimundi is now known as kimundi
[02:40:56] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[02:40:56] *** ChanServ sets mode: +ao erickt erickt
[02:49:30] <Mutabah> Is it possible to enable debug information for the LLVM build?
[02:49:52] <Mutabah> I dont' seem to be seeing line numbers in this build (whcih was configured with --enable-debug
[02:52:27] *** Quits: MatrixBridge (matrixirc@moz-905bpb.openmarket.com) (Connection closed)
[02:52:31] *** Joins: MatrixBridge (matrixirc@moz-905bpb.openmarket.com)
[02:55:37] *** Quits: MatrixBridge (matrixirc@moz-905bpb.openmarket.com) (Connection closed)
[02:55:41] *** Joins: MatrixBridge (matrixirc@moz-905bpb.openmarket.com)
[03:02:34] *** Quits: ipetkov (ipetkov@moz-2v9vq9.oc.cox.net) (Client exited)
[03:03:45] *** Quits: MatrixBridge (matrixirc@moz-905bpb.openmarket.com) (Ping timeout: 121 seconds)
[03:04:44] *** Quits: Yurume (Yurume@moz-0t8.piq.68.115.IP) (Ping timeout: 121 seconds)
[03:05:00] *** Quits: mrmonday (mrmonday@moz-20udp8.lin.openzula.org) (Ping timeout: 121 seconds)
[03:05:12] *** Quits: klutzy (not@moz-0t8.piq.68.115.IP) (Ping timeout: 121 seconds)
[03:05:15] *** Quits: Amaranth (travis@moz-1raqsl.cpe.cableone.net) (Ping timeout: 121 seconds)
[03:05:24] *** Quits: luzie (lu.cy@moz-g11uhv.lu) (Ping timeout: 121 seconds)
[03:05:26] *** Quits: dollarone (oddvar@moz-iu5hbq.openmarket.com) (Ping timeout: 121 seconds)
[03:05:29] *** Quits: jxs (jxs@moz-3rn.a4j.61.108.IP) (Ping timeout: 121 seconds)
[03:05:30] *** Quits: isis (isis@moz-uprl14.patternsinthevoid.net) (Ping timeout: 121 seconds)
[03:05:43] *** Joins: MatrixBridge (matrixirc@moz-905bpb.openmarket.com)
[03:05:51] *** Joins: dollarone (oddvar@moz-iu5hbq.openmarket.com)
[03:06:00] *** Joins: mrmonday (mrmonday@moz-20udp8.lin.openzula.org)
[03:06:02] *** Joins: Yurume (Yurume@moz-0t8.piq.68.115.IP)
[03:06:34] *** Joins: isis (isis@moz-uprl14.patternsinthevoid.net)
[03:06:42] *** Joins: klutzy (not@moz-0t8.piq.68.115.IP)
[03:07:44] *** Joins: luzie (lu.cy@moz-g11uhv.lu)
[03:07:51] *** Joins: MatrixBridge1 (matrixirc@moz-905bpb.openmarket.com)
[03:07:52] *** Joins: jxs (jxs@moz-3rn.a4j.61.108.IP)
[03:10:51] *** Quits: Quxxy (chatzilla@moz-0nv.jkp.167.59.IP) (Ping timeout: 121 seconds)
[03:16:43] *** Joins: semarie (semarie@moz-nvb94f.bpv6.bg1u.41d0.2001.IP)
[03:26:52] *** Joins: Quxxy (chatzilla@moz-efh10q.internode.on.net)
[03:35:39] *** Quits: ytain (ytain@moz-ucq.1re.175.108.IP) (Quit: Textual IRC Client: www.textualapp.com)
[03:39:40] *** Joins: Amaranth (travis@moz-1raqsl.cpe.cableone.net)
[03:40:55] *** Joins: Kroisse (Kroisse@moz-k5j.pif.170.107.IP)
[03:41:51] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Ping timeout: 121 seconds)
[03:45:30] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[03:45:42] *** Joins: aatch (james@moz-is4j4r.cable.telstraclear.net)
[03:45:50] <WindowsBunny> Mutabah: which platform are you building for?
[03:46:20] <Mutabah> x86-64
[03:46:35] <Mutabah> Trying to debug a segfault/#UD in LLVM's codegen
[03:46:38] <WindowsBunny> Mutabah: But like, windows msvc/gnu? mac? linux?
[03:46:44] <Mutabah> linux
[03:46:50] <WindowsBunny> okay, can't help you then :D
[03:47:31] <Mutabah> Odds are, I'll find the cause of this crash, and it'll be a mistake in some inline assembly somewhere
[03:51:30] *** Joins: phynx (chatzilla@moz-6savpa.dsl.scarlet.be)
[04:18:42] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[04:27:47] *** Quits: jxs (jxs@moz-3rn.a4j.61.108.IP) (Connection closed)
[05:25:38] <Mutabah> Anyone have tips for debugging LLVM crashes? Like ways of tracking down what rust code triggers them
[05:27:02] *** Joins: blaenk (blaenkdenum@moz-ggnkpd.res.rr.com)
[05:40:20] *** Quits: jyyou (jyyou@moz-nhbjfr.bo6r.4bjo.8900.2400.IP) (Ping timeout: 121 seconds)
[05:50:25] *** Joins: jyyou (jyyou@moz-hskqde.members.linode.com)
[05:52:51] *** Joins: tamird (textual@moz-lat.dkr.14.50.IP)
[05:56:56] *** Joins: yjv (yjv@moz-ll38tk.pa.comcast.net)
[06:02:55] <eddyb> Mutabah: divide et impera
[06:03:09] <Mutabah> ouch
[06:03:27] <eddyb> the nice thing about Rust is that you can replace the insides of any function with a panic!() :P
[06:03:56] <Mutabah> Yeah... the crate that triggers it is ~17k lines
[06:04:11] <eddyb> if you have your current code in git, get a new working dir and start hacking at it, if you're don't need to be careful with it, it can go very fast
[06:05:17] <eddyb> Mutabah: I would replace \{\n[\s\S]*?\n\} with {panic!()} or something
[06:05:24] <eddyb> or {loop{}}
[06:05:57] <eddyb> do it one file at a time. might get tricky with generics :P
[06:06:37] <Mutabah> Ugh... this is going to be painful
[06:06:38] *** Joins: swgillespie (swgillespie@moz-shviij.ip.windstream.net)
[06:06:44] <Mutabah> as said, 17k lines, spread across
[06:07:00] <Mutabah> 100 files
[06:07:23] <eddyb> ugh
[06:07:27] <eddyb> Mutabah: is it your kernel?
[06:08:01] <Mutabah> yes
[06:08:18] <Mutabah> The core is a bit of a monolithic blob, due to some hard-to-break depenency loops
[06:08:20] <eddyb> what's the stack trace like?
[06:08:37] <Mutabah> see gh#26469
[06:08:38] <[o__o]> LLVM Silent abort (stack overflow) when compiling kernel: https://github.com/rust-lang/rust/issues/26469
[06:08:59] <eddyb> > optimize_and_codegen ugh
[06:09:11] <eddyb> Mutabah: have you tried bugpoint?
[06:09:11] <Mutabah> Pretty short, but I'm having troubles getting useful information out about what function is being processed
[06:09:34] <tamird> richo: I'm on EST these days, and haven't dug any deeper than what I mentioned; I'm gonna head to bed but let me know if you find anything more!
[06:09:47] <Mutabah> nope, didn't know it was a thing
[06:10:36] <eddyb> Mutabah: with -C save-temps you'll get a no-opt.bc file
[06:11:05] <eddyb> Mutabah: with the bugpoint executable from your LLVM build you can get an automatically reduced version
[06:11:15] <eddyb> doesn't always work and you can break bugpoint
[06:11:37] <Mutabah> let's see then
[06:11:51] <eddyb> but when it does it will leave you with empty function bodies except for the offending one(s)
[06:13:14] <Mutabah> Gonna take a while, this is slow to compile with an optimised build... let alone a debug one
[06:15:36] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[06:15:36] *** ChanServ sets mode: +ao erickt erickt
[06:15:52] <eddyb> Mutabah: you don't need a debug build to get the no-opt.bc file
[06:16:29] <Mutabah> yes, but I had one for other reasons
[06:20:41] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[06:21:33] <Mutabah> Welp, bugpoint is running, let's see
[06:22:28] *** Joins: tjakubow (tjakubowski@moz-ag87jj.fios.verizon.net)
[06:23:27] *** Quits: swgillespie (swgillespie@moz-shviij.ip.windstream.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:25:33] *** Quits: bdero (bran@moz-lbs.91h.47.73.IP) (Ping timeout: 121 seconds)
[06:27:38] *** Joins: bdero (bran@moz-0e2lk5.sns9.e6pb.0197.2601.IP)
[06:27:50] *** Joins: ncarrillo (textual@moz-739a1t.cable.rcn.com)
[06:27:58] *** Quits: ncarrillo (textual@moz-739a1t.cable.rcn.com) (Quit: Textual IRC Client: www.textualapp.com)
[06:28:00] *** Joins: ncarrillo (textual@moz-739a1t.cable.rcn.com)
[06:40:35] *** Quits: ebfull (ebfull@moz-8vb.66e.34.73.IP) (Connection closed)
[06:40:49] *** Joins: ebfull (ebfull@moz-8vb.66e.34.73.IP)
[06:41:06] *** Quits: Astraea (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[06:42:53] <richo> tamird: I'll keep you posted! I just rebuilt LLVM with every debug flag I could find, I'll have a bit of a fiddle overnight (I've fallen into a pit of yak hair, the lldb implant I use is ImportError'ing)
[06:47:51] <jroesch> huon: Gankro you guys make it home
[06:48:02] <Gankro> yeah\
[06:48:19] <jroesch> Sweet
[06:48:39] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[06:50:15] <eddyb> jroesch: sorry for not pushing through your PR to bors, but there was that one thing to fix
[06:51:06] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[06:51:19] *** Quits: yjv (yjv@moz-ll38tk.pa.comcast.net) (Connection closed)
[06:51:30] <Mutabah> *sigh* think I found it
[06:51:36] <Mutabah> eddyb: thanks for pointing me to bugpoitn
[06:51:56] <eddyb> :D
[06:52:09] <eddyb> Mutabah: what was it?
[06:52:10] <Mutabah> eddyb: It's related to another bug I opened from the llvm update, passing an incorrectly sized variable to asm! causes llvm asserts
[06:52:17] <eddyb> ah
[06:52:30] <Mutabah> I haven't confirmed the fi, but it the code did have that issue
[06:52:57] <Mutabah> As input - it caused an assert, as output, it seems to cause a crash
[06:58:18] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[06:59:20] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[06:59:31] <Mutabah> ... maybe not, can't reproduce on playpen with that exact combination
[06:59:57] <eddyb> Mutabah: playpen/nightly?
[07:00:05] <eddyb> playbot: VERSION
[07:00:06] -playbot- "rustc 1.1.0 (35ceea399 2015-06-19)"
[07:00:12] <eddyb> maybe because it's a week old?
[07:00:38] <jroesch> eddyb: no worries I got your comment but couldn't connect in the airport to push it
[07:00:41] <Mutabah> eddyb: Nightly yes, but this bug (afaik) has been around fro longer than a week
[07:00:47] <eddyb> jroesch: aww :(
[07:00:50] <Mutabah> Wait... when was that LLVM update?
[07:00:52] <jroesch> Driving home, will update it then
[07:00:56] <eddyb> Mutabah: around a week ago :P
[07:01:11] <eddyb> possibly newer than the playpen snapshot
[07:01:26] <Mutabah> interesting...
[07:02:19] <Mutabah> I'll give it a stab on current nightly then
[07:02:27] <jroesch> Eddy: almost carved out typer on the plane
[07:02:36] <jroesch> eddyb: ^
[07:02:42] <eddyb> :D
[07:03:07] <jroesch> I think a lot of code will be much cleaner with another refactor to clean up all the interfaces
[07:03:09] <eddyb> I made a bit of a mess around some of the methods
[07:03:35] <eddyb> it was very important to keep closure_upvars take a &mc::Typer or something opaque like that
[07:03:38] <eddyb> I think, anyways
[07:04:44] <jroesch> Yeah I want to move a bunch of functions to methods on InferCtxt
[07:04:56] <jroesch> Gonna do everything piecemeal though
[07:06:02] *** Quits: krax (archdev@moz-hff.m76.69.68.IP) (Quit: leaving)
[07:09:45] <Mutabah> Woohoo! Reproduction and fix (to my code at least)!
[07:12:05] <Mutabah> So cause: badly sized parameters to asm! (not 100% sure what the magic combo is) AND optimisation on
[07:19:14] *** Joins: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au)
[07:19:34] *** Joins: waffles (wafflespean@moz-uip.673.193.113.IP)
[07:20:59] <Mutabah> eddyb: Thanks a bunch for the hand
[07:21:03] <eddyb> bo
[07:21:05] <eddyb> *np
[07:22:01] *** Quits: skeuomorf (skeuomorf@moz-v34.cog.32.197.IP) (Ping timeout: 121 seconds)
[07:25:46] <Mutabah> welp, at least this is an easier ICE
[07:34:28] <WindowsBunny> eddyb: what if... irc used some sort of hashcash, so you had to expend significant computing effort for each identity you want, an some computing for each message?
[07:35:15] <WindowsBunny> that way only rich spammers who can afford arrays of cloud nodes can speak on IRC :D
[07:36:45] *** Quits: ncarrillo (textual@moz-739a1t.cable.rcn.com) (Quit: Textual IRC Client: www.textualapp.com)
[07:36:48] *** Joins: ncarrillo (textual@moz-739a1t.cable.rcn.com)
[07:37:02] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[07:38:28] *** Quits: ncarrillo (textual@moz-739a1t.cable.rcn.com) (Quit: Textual IRC Client: www.textualapp.com)
[07:38:38] *** Joins: ncarrillo (textual@moz-739a1t.cable.rcn.com)
[07:42:27] *** Quits: barosl (barosl@moz-tmp.qma.67.220.IP) (Connection closed)
[07:46:21] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Ping timeout: 121 seconds)
[07:46:59] *** Quits: Yurumechan (23f9939a@moz-eg6.d6u.78.121.IP) (Ping timeout: 121 seconds)
[07:48:24] *** Joins: skeuomorf (skeuomorf@moz-5m2.pff.32.197.IP)
[07:49:33] *** Joins: barosl (barosl@moz-tmp.qma.67.220.IP)
[07:50:07] *** Quits: barosl (barosl@moz-tmp.qma.67.220.IP) (Connection closed)
[07:52:58] *** Joins: barosl (barosl@moz-tmp.qma.67.220.IP)
[07:54:20] *** Quits: miselin (miselin@moz-c77.igu.11.203.IP) (Ping timeout: 121 seconds)
[07:54:26] *** Joins: Yurumechan (23f9939a@moz-eg6.d6u.78.121.IP)
[07:55:08] *** Joins: aatch (james@moz-is4j4r.cable.telstraclear.net)
[07:56:26] *** Joins: miselin (miselin@moz-c77.igu.11.203.IP)
[07:58:37] *** Joins: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk)
[08:01:23] *** Joins: mgottschlag (quassel@moz-27iuo2.hsi6.kabel-badenwuerttemberg.de)
[08:04:41] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[08:04:41] *** ChanServ sets mode: +ao erickt erickt
[08:09:26] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[08:17:12] *** Quits: barosl (barosl@moz-tmp.qma.67.220.IP) (Connection closed)
[08:17:25] *** Joins: barosl (barosl@moz-tmp.qma.67.220.IP)
[08:26:48] *** Joins: larhat (Adium@moz-vlo5br.cable.virginm.net)
[08:41:12] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[08:41:43] *** Quits: ncarrillo (textual@moz-739a1t.cable.rcn.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[08:41:54] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[08:44:06] *** Joins: eibwen (eibwen@moz-b06o43.dip0.t-ipconnect.de)
[08:45:41] *** Quits: waffles (wafflespean@moz-uip.673.193.113.IP) (Ping timeout: 121 seconds)
[08:46:53] *** Joins: waffles (wafflespean@moz-uip.673.193.113.IP)
[08:52:12] *** Quits: barosl (barosl@moz-tmp.qma.67.220.IP) (Connection closed)
[08:53:29] *** Joins: barosl (barosl@moz-tmp.qma.67.220.IP)
[09:00:39] *** Quits: barosl (barosl@moz-tmp.qma.67.220.IP) (Connection closed)
[09:00:52] *** Joins: barosl (barosl@moz-tmp.qma.67.220.IP)
[09:02:06] *** Parts: larhat (Adium@moz-vlo5br.cable.virginm.net) ()
[09:14:10] *** Quits: tjakubow (tjakubowski@moz-ag87jj.fios.verizon.net) (Ping timeout: 121 seconds)
[09:17:58] *** Quits: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[09:18:57] *** Joins: fuogo (Mibbit@moz-hu6.nja.252.72.IP)
[09:19:26] *** Quits: fuogo (Mibbit@moz-hu6.nja.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:20:13] *** Quits: barosl (barosl@moz-tmp.qma.67.220.IP) (Connection closed)
[09:20:27] *** Joins: barosl (barosl@moz-tmp.qma.67.220.IP)
[09:25:54] *** Quits: mgottschlag (quassel@moz-27iuo2.hsi6.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[09:28:35] *** Quits: nham (nham@moz-lglsfe.il.comcast.net) (Quit: leaving)
[09:28:55] *** Joins: Kegsay (Kegsay@moz-bdrkma.cable.virginm.net)
[09:35:54] *** Quits: MatrixBridge1 (matrixirc@moz-905bpb.openmarket.com) (Connection closed)
[09:35:54] *** Quits: MatrixBridge (matrixirc@moz-905bpb.openmarket.com) (Connection closed)
[09:36:15] *** Joins: MatrixBridge (matrixirc@moz-905bpb.openmarket.com)
[09:38:42] *** Quits: klutzy (not@moz-0t8.piq.68.115.IP) (Ping timeout: 121 seconds)
[09:39:15] *** Quits: Yurume (Yurume@moz-0t8.piq.68.115.IP) (Ping timeout: 121 seconds)
[09:41:29] *** Joins: mgottschlag (quassel@moz-27iuo2.hsi6.kabel-badenwuerttemberg.de)
[09:42:16] *** Quits: Kegsay (Kegsay@moz-bdrkma.cable.virginm.net) (Quit: Leaving)
[09:45:11] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[09:48:15] <jroesch> eddyb: I believe my PR contains just my changes now ;)
[09:49:44] <eddyb> :D
[09:53:26] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[09:53:26] *** ChanServ sets mode: +ao erickt erickt
[09:56:16] <rkruppe> I'm trying to debug a nasty bug in some libcore code (that I wrote). Problem is, I'm on Windows and can't get the msys gdb to work. Is there a reasonable way to println!() from core?
[09:58:11] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[10:02:22] *** Joins: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net)
[10:04:32] *** Joins: Yurume (Yurume@moz-0t8.piq.68.115.IP)
[10:05:36] <jroesch> rkruppe: you probably want to use write! or writeln!
[10:05:58] <rkruppe> But write where?
[10:06:23] *** Quits: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net) (Ping timeout: 121 seconds)
[10:07:43] <eddyb> rkruppe: see liballoc
[10:08:05] <eddyb> rkruppe: WindowsBunny wrote a fmt::Write impl for windows in it, I believe
[10:08:06] <rkruppe> I'm in core. core doesn't link to liballoc (right?)
[10:08:20] <eddyb> you'll have to copy a bunch of code
[10:08:54] <Mutabah> rkruppe: I think you might be able to use the logger methods?
[10:08:56] <WindowsBunny> rkruppe: In liballoc I wrote something that has fairly minimal dependencies
[10:09:05] <eddyb> but liballoc doesn't need more than libcore + a bunch of system APIs, so you should be able to get away with just an extern block and the impls
[10:09:17] <eddyb> Mutabah: logger what?
[10:09:29] <Mutabah> Hmm... maybe not, debug! etc
[10:09:29] <WindowsBunny> rkruppe: https://github.com/rust-lang/rust/blob/master/src/liballoc/heap.rs#L449-L482
[10:09:56] <WindowsBunny> rkruppe: so you just have to copy over the libc definitions you need really
[10:09:58] <rkruppe> Great, thanks
[10:10:15] <eddyb> Mutabah: those are from liblog :P
[10:10:20] <eddyb> (which uses libstd)
[10:11:31] <WindowsBunny> eddyb: Anyway, Rust depends on undocumented functions in winapi, so now Microsoft has to keep it for backwards compatibility :D
[10:19:05] <eddyb> lol
[10:20:03] <Mutabah> eddyb: funtime
[10:34:08] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Ping timeout: 121 seconds)
[10:43:56] *** Joins: arielby (Mibbit@moz-cmi.jfj.114.192.IP)
[10:47:00] *** Quits: mgottschlag (quassel@moz-27iuo2.hsi6.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[10:47:07] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[10:58:20] <eddyb> jroesch: you forgot to test rustc_driver: ../src/librustc_driver/test.rs:143:21: 143:47 error: this function takes 3 parameters but 1 parameter was supplied [E0061]
[10:58:47] <eddyb> jroesch: I used check-stage0-rustc_driver alongside building rustdoc and running stage1 cfail, rpass and rfail
[10:58:55] <eddyb> jroesch: just to make sure I didn't forget anything
[10:59:16] *** Joins: mgottschlag (quassel@moz-27iuo2.hsi6.kabel-badenwuerttemberg.de)
[11:03:24] *** Joins: filsmick (filsmick@moz-1jiojr.abo.wanadoo.fr)
[11:04:16] *** Quits: mgottschlag (quassel@moz-27iuo2.hsi6.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[11:10:35] *** Joins: James (quassel@moz-id3rei.range86-163.btcentralplus.com)
[11:29:43] *** Joins: ncarrillo (textual@moz-739a1t.cable.rcn.com)
[11:42:12] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[11:42:13] *** ChanServ sets mode: +ao erickt erickt
[11:46:58] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[11:53:43] *** Joins: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com)
[11:56:59] *** Joins: mukilan (mukilan@moz-ehi.7st.164.122.IP)
[11:59:37] *** Quits: filsmick (filsmick@moz-1jiojr.abo.wanadoo.fr) (Connection closed)
[11:59:58] *** Joins: filsmick (filsmick@moz-1jiojr.abo.wanadoo.fr)
[12:01:38] *** Quits: playbot (playbot@moz-1vk5qd.compute.amazonaws.com) (Ping timeout: 121 seconds)
[12:01:56] *** Joins: playbot (playbot@moz-1vk5qd.compute.amazonaws.com)
[12:23:20] *** Quits: filsmick (filsmick@moz-1jiojr.abo.wanadoo.fr) (Connection closed)
[12:23:21] *** Joins: filsmick (filsmick@moz-1jiojr.abo.wanadoo.fr)
[12:29:03] *** Quits: waffles (wafflespean@moz-uip.673.193.113.IP) (Ping timeout: 121 seconds)
[12:31:08] *** Joins: waffles (wafflespean@moz-o5t.co9.193.113.IP)
[12:32:58] *** ChanServ sets mode: +ao burntsushi burntsushi
[12:33:18] *** Joins: Guest53 (textual@moz-rvv.00r.255.109.IP)
[12:34:40] *** Quits: Guest53 (textual@moz-rvv.00r.255.109.IP) (Quit: Textual IRC Client: www.textualapp.com)
[12:35:59] *** Joins: ytain (ytain@moz-ucq.1re.175.108.IP)
[12:43:54] *** Joins: bgamari (bgamari@moz-m173ho.hsi8.kabel-badenwuerttemberg.de)
[12:58:07] *** Joins: O01eg (o01eg@moz-4eu.2cc.165.5.IP)
[13:07:07] *** Quits: waffles (wafflespean@moz-o5t.co9.193.113.IP) (Ping timeout: 121 seconds)
[13:08:46] *** Quits: ncarrillo (textual@moz-739a1t.cable.rcn.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[13:10:37] *** Joins: waffles (wafflespean@moz-o5t.co9.193.113.IP)
[13:14:01] *** Joins: ncarrillo (textual@moz-739a1t.cable.rcn.com)
[13:24:29] *** Joins: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk)
[13:30:59] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[13:30:59] *** ChanServ sets mode: +ao erickt erickt
[13:35:44] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[13:37:26] <Tobba> well *this* is fun
[13:37:49] <Tobba> I've managed to completely break the crate resolution under circumstances which seem to be extremely convoluted
[13:38:02] <arielby> Tobba: i.e. `extern crate`?
[13:38:07] <Tobba> yep
[13:38:20] <arielby> what happened?
[13:38:22] <Tobba> if I have an unrelated crate named "libcoreio" it bails out before finding "libcore" correctly
[13:38:28] <Tobba> in *some* cases
[13:38:41] <arielby> bails out?
[13:38:48] <Tobba> it doesn't find core
[13:38:56] <arielby> did you strace?
[13:38:57] <Tobba> if I remove coreio, everything compiles
[13:39:18] <Tobba> I did RUST_LOG=debug, it seems to bail out of the searching early
[13:39:40] <arielby> gist?
[13:39:56] <Tobba> I'm *trying* to replicate it, but as I said, the circumstances are ridiculously convoluted
[13:40:07] <arielby> gist of log?
[13:40:09] <Tobba> it happens across a structure of 20+ crates
[13:40:11] <Tobba> oh, hold on
[13:40:23] <arielby> + strace
[13:42:07] <Tobba> https://gist.github.com/Tobba/a71f2e2c4f91e5042858
[13:42:19] <Tobba> readint that log again, it might not actually be bailing out early
[13:42:32] <arielby> a bit short
[13:42:47] <Tobba> I updated it with the error, but that's all it gives me
[13:43:06] <arielby> try RUST_LOG=rustc::metadata strace _
[13:44:18] <Tobba> with strace: https://gist.github.com/Tobba/a71f2e2c4f91e5042858
[13:45:10] <arielby> I guess you need strace -f
[13:47:03] <Tobba> updated
[13:48:25] <Tobba> it's building with a --target setting and RUST_PATH is involved
[13:48:43] <Tobba> (undocumented environment variable necessary to provide your own core libs)
[13:50:12] <Tobba> from what I can tell, it never actually reads the "corelibs" directory the libraries should be in, so the presence of a library with the same prefix somehow breaks things
[13:51:45] *** Quits: ncarrillo (textual@moz-739a1t.cable.rcn.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[13:52:15] <arielby> it *did* find libcore INFO:rustc::metadata::loader: reading "libcore-11582ce5.rlib" => 157638ns
[13:53:13] <Tobba> it's for the wrong target and gets rejected
[13:54:01] <arielby> where is your real libcore?
[13:54:10] <Tobba> it seems to bail out before it searches RUST_PATH
[13:54:27] <Tobba> it's in build/corelibs/libs(32|64)/i686-oxide-kernel
[13:54:33] <Tobba> which is specified via RUST_PATH
[13:55:56] <arielby> the order of messages printed is odd
[13:56:53] <arielby> actually its not
[13:57:46] <Tobba> as far as I can tell, it checks libcoreio as a possible match to libcore, and then never searches RUST_PATH for some reason
[13:57:57] <Tobba> but if it never checks libcoreio it *does* search RUST_PATH
[14:00:25] <arielby> we could use more logging in metadata::loader :-)
[14:01:22] <Tobba> when the bug doesn't happen, libcoreio is never checked
[14:01:43] <arielby> https://github.com/rust-lang/rust/blob/a2f2a647633505fa83bcd9644d296ad529ebac41/src/librustc/metadata/loader.rs#L408
[14:01:49] <arielby> seems relevant
[14:02:31] <Tobba> yeah, I know it does that, the question is why the rejection of one candidate causes the entire thing to bail out
[14:04:07] <arielby> we could use a few extra debug!-s there
[14:07:09] <Tobba> oh bloody hell
[14:07:12] <Tobba> arielby: https://github.com/rust-lang/rust/blob/f76d9bcfc2c269452522fbbe19f66fe653325646/src/librustc/metadata/filesearch.rs#L68
[14:07:27] <arielby> ;-0
[14:11:12] <arielby> gh7241
[14:11:13] <[o__o]> rustpkg: Add a test case with multiple workspaces: https://github.com/rust-lang/rust/issues/7241
[14:12:07] <Tobba> yeah RUST_PATH is a weird rustpkg leftover, I should have figured that's what was broken somehow
[14:12:24] <Tobba> but it's the only way to provide a custom build of the core libraries without encountering Cargo Hell(TM)
[14:13:06] <arielby> use a makefile
[14:13:31] <Tobba> makefiles are horrible and don't really work when you have external dependencies
[14:13:45] <Tobba> but I'm gonna remove cargo from my build system, it's just a mess
[14:13:57] *** Quits: arielby (Mibbit@moz-cmi.jfj.114.192.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:15:03] <filsmick> is anyone here interested in custom thread panic handlers?
[14:15:40] <filsmick> I made a RFC on this a while back, and updated it a few minutes ago after writing a PoC locally; feedback is welcome 
[14:15:43] <filsmick> https://github.com/rust-lang/rfcs/pull/1100
[14:16:48] *** Quits: filsmick (filsmick@moz-1jiojr.abo.wanadoo.fr) (Connection closed)
[14:17:10] *** Joins: filsmick (filsmick@moz-1jiojr.abo.wanadoo.fr)
[14:19:48] *** Quits: Amaranth (travis@moz-1raqsl.cpe.cableone.net) (Connection closed)
[14:20:33] *** Quits: waffles (wafflespean@moz-o5t.co9.193.113.IP) (Ping timeout: 121 seconds)
[14:29:45] *** Quits: filsmick (filsmick@moz-1jiojr.abo.wanadoo.fr) (Connection closed)
[14:29:46] *** Joins: filsmick (filsmick@moz-1jiojr.abo.wanadoo.fr)
[14:38:21] *** Quits: Skyler (Skyler@moz-7ds39s.sd.cox.net) (Client exited)
[14:39:51] *** Joins: amyers (amyers@moz-osiar4.md.comcast.net)
[14:43:55] *** Quits: amyers (amyers@moz-osiar4.md.comcast.net) (Ping timeout: 121 seconds)
[15:00:36] *** Quits: filsmick (filsmick@moz-1jiojr.abo.wanadoo.fr) (Connection closed)
[15:00:57] *** Joins: filsmick (filsmick@moz-1jiojr.abo.wanadoo.fr)
[15:16:37] *** Quits: filsmick (filsmick@moz-1jiojr.abo.wanadoo.fr) (Connection closed)
[15:16:38] *** Joins: filsmick (filsmick@moz-1jiojr.abo.wanadoo.fr)
[15:16:44] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[15:16:44] *** ChanServ sets mode: +ao erickt erickt
[15:19:53] *** Quits: filsmick (filsmick@moz-1jiojr.abo.wanadoo.fr) (Quit: )
[15:21:29] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[15:26:05] *** Quits: James (quassel@moz-id3rei.range86-163.btcentralplus.com) (Ping timeout: 121 seconds)
[15:41:13] *** Joins: mib_h5b15k (Mibbit@moz-hu6.nja.252.72.IP)
[16:01:33] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[16:18:02] *** Joins: waffles (wafflespean@moz-o5t.co9.193.113.IP)
[16:23:33] *** Joins: goyox86 (textual@moz-rvv.00r.255.109.IP)
[16:32:30] *** Joins: yjv (yjv@moz-ll38tk.pa.comcast.net)
[16:34:00] *** Joins: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net)
[16:38:34] *** Joins: yjv_ (yjv@moz-ll38tk.pa.comcast.net)
[16:46:28] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[16:47:48] *** Quits: goyox86 (textual@moz-rvv.00r.255.109.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:55:09] <WindowsBunny> acrichto: Is there a reason std::fs::copy manually copies the file instead of just asking the OS to do it for us (such as CopyFile on Windows)? https://github.com/rust-lang/rust/blob/master/src/libstd/fs.rs#L860
[16:59:43] *** Joins: arielb1 (Ariel@moz-bu8.1nh.67.109.IP)
[17:02:10] <sfackler> WindowsBunny: there's not equivalent function on unixy platforms
[17:02:53] <WindowsBunny> sfackler: Wait, really? posix/unix/linux have no convenient method to copy files?
[17:03:17] <sfackler> nope
[17:03:55] <WindowsBunny> sfackler: Would it still make sense to use CopyFile on Windows as an optimization?
[17:05:37] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[17:05:38] *** ChanServ sets mode: +ao erickt erickt
[17:05:46] <sfackler> seems reasonable to me
[17:10:15] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[17:10:55] <sp3d> WindowsBunny: that's why `mv` doesn't work across filesystems
[17:10:59] <sp3d> originally
[17:11:12] <WindowsBunny> sp3d: wat
[17:14:14] <sp3d> "The rename() function is able to move directories within the same file system. Some historical versions of mv have been able to move directories, but not to a different file system. The standard developers considered that this was an annoying inconsistency, so this volume of POSIX.1-2008 requires directories to be able to be moved even across file systems." - http://pubs.opengroup.org/onlinepubs/9699919799/utilities/mv.html
[17:17:22] <WindowsBunny> sp3d: Oh, yes, MoveFile on windows only works on the same directory
[17:19:19] <sp3d> welp
[17:19:50] *** Quits: mib_h5b15k (Mibbit@moz-hu6.nja.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:19:51] <sp3d> hm
[17:21:43] <WindowsBunny> In particular CopyFile on Windows can use Offloaded Data Transfer https://msdn.microsoft.com/en-us/library/windows/desktop/hh848056%28v=vs.85%29.aspx
[17:23:01] *** Quits: ytain (ytain@moz-ucq.1re.175.108.IP) (Quit: Textual IRC Client: www.textualapp.com)
[17:24:55] <kmc> sp3d: thus the one and only annoying inconsistency was removed from POSIX
[17:24:58] <kmc> ;)
[17:26:41] <WindowsBunny> sp3d: So does that mean the mv utility itself has to detect whether it is moving across volumes and handle things appropriately?
[17:26:59] *** Quits: yjv (yjv@moz-ll38tk.pa.comcast.net) (Connection closed)
[17:28:44] <benh> kmc: :D
[17:32:21] *** Joins: Amaranth (travis@moz-1raqsl.cpe.cableone.net)
[17:32:54] <sfackler> WindowsBunny: it could just try the rename and then fall back to a copy if it fails with an appropriate error
[17:33:08] <WindowsBunny> copy + delete
[17:33:28] <WindowsBunny> where it has to implement copy manually by opening both files and then manually reading + writing
[17:34:43] <sfackler> yeah
[17:34:59] <WindowsBunny> sfackler: Although there's a very nice shell COM api that lets you queue up a whole bunch of copy/move/rename/delete operations and fire it off with progress updates
[17:35:24] *** Quits: arielb1 (Ariel@moz-bu8.1nh.67.109.IP) (Connection closed)
[17:43:28] *** Joins: imperio (Mibbit@moz-8otf3a.fbx.proxad.net)
[17:44:18] <imperio> how does it work for rust-community team ? Is there one person for french rust community ?
[17:47:40] *** Joins: SiegeLordEx (sl@moz-9jtaei.ca.comcast.net)
[17:49:54] *** Joins: amyers (amyers@moz-osiar4.md.comcast.net)
[17:53:50] *** Joins: sigma (sigma@moz-l8bauc.range217-44.btcentralplus.com)
[18:01:24] *** Joins: bluss (androirc@moz-vi8ej1.cust.tele2.se)
[18:05:57] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[18:07:36] <sfackler> WindowsBunny: are SOCKET values expected to be small? I'm asking because SOCKET appears to be pointer sized, but OpenSSL truncates them to an int in it's IO system which seems to be designed at least in part around support for windows
[18:07:51] <sfackler> *its
[18:09:23] <sfackler> it appears to work, but I'm sort of suspicious
[18:11:12] <WindowsBunny> sfackler: a SOCKET is a ULONG_PTR
[18:11:17] <WindowsBunny> sfackler: aka it is pointer sized
[18:12:04] <WindowsBunny> sfackler: If it is being truncated to int, then it might only be working because the OS hadn't allocated an identifier above the range of int
[18:14:20] *** Quits: amyers (amyers@moz-osiar4.md.comcast.net) (Ping timeout: 121 seconds)
[18:16:31] <sfackler> ffs openssl
[18:17:06] <WindowsBunny> sfackler: Don't worry, I'm working on an schannel library
[18:17:16] <WindowsBunny> sfackler: Which you can use instead of openssl for ssl on windows
[18:18:54] * c74d stands off to one side with a "PolarSSL > OpenSSL" sign
[18:19:46] <sfackler> hurray!
[18:19:55] <acrichto> WindowsBunny: nah I think it'd be fine to call CopyFile on Windows and do the manual thing on unix
[18:20:31] <eddyb> is the manual thing using userspace memory to copy data?
[18:21:00] <eddyb> because I believe there is a way to "stream" between fd's on linux
[18:21:24] <sfackler> atm it is userspace, but we could use sendfile where supported
[18:21:46] <eddyb> isn't sendfile socket-specific?
[18:21:50] <eddyb> I also found http://man7.org/linux/man-pages/man2/splice.2.html
[18:21:57] <eddyb> one of them might also be deprecated
[18:22:33] <eddyb> " we can only use sendfile() for reading data from our file and sending it to the socket." http://blog.superpat.com/2010/06/01/zero-copy-in-linux-with-sendfile-and-splice/
[18:50:15] *** Joins: amyers (amyers@moz-osiar4.md.comcast.net)
[18:55:32] *** Quits: amyers (amyers@moz-osiar4.md.comcast.net) (Ping timeout: 121 seconds)
[19:01:37] *** Quits: Quxxy (chatzilla@moz-efh10q.internode.on.net) (Ping timeout: 121 seconds)
[19:09:44] *** Quits: Murarth (Murarth@moz-jpotpi.phnx.qwest.net) (Quit: Alfador is the Entity!)
[19:10:52] *** Quits: bluss (androirc@moz-vi8ej1.cust.tele2.se) (A TLS packet with unexpected length was received.)
[19:12:28] *** Joins: Murarth (Murarth@moz-s9opur.dyn.nltelcom.net)
[19:34:22] *** Quits: untitaker (untitaker@moz-t0lukc.highway.telekom.at) (Ping timeout: 121 seconds)
[19:35:43] *** Joins: untitaker (untitaker@moz-uoqi12.highway.telekom.at)
[19:36:22] *** Quits: sigma (sigma@moz-l8bauc.range217-44.btcentralplus.com) (Ping timeout: 121 seconds)
[19:41:08] *** Joins: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net)
[19:43:57] <huon> nrc: I think highfive needs to point to gh-pages for rust-www https://github.com/rust-lang/rust-www/pull/155#issuecomment-116319996
[19:50:09] *** Quits: mukilan (mukilan@moz-ehi.7st.164.122.IP) (A TLS packet with unexpected length was received.)
[19:54:17] *** Quits: Murarth (Murarth@moz-s9opur.dyn.nltelcom.net) (Quit: brb, washing the cat)
[19:54:34] *** Joins: Murarth (Murarth@moz-jpotpi.phnx.qwest.net)
[20:03:11] *** Quits: semarie (semarie@moz-nvb94f.bpv6.bg1u.41d0.2001.IP) (Ping timeout: 121 seconds)
[20:03:16] *** kimundi is now known as zz_kimundi
[20:09:25] *** Joins: nagisa (nagisa@moz-8t068g.static.zebra.lt)
[20:09:50] *** Joins: mgottschlag (quassel@moz-27iuo2.hsi6.kabel-badenwuerttemberg.de)
[20:11:41] *** Joins: graydon (Adium@moz-eq305s.bchsia.telus.net)
[20:12:24] * nagisa declares that 1.1. was on thursday, not today.
[20:14:13] *** Joins: eljay (eljay@moz-fmte10.skybroadband.com)
[20:19:57] *** Joins: p1start (p1start@moz-nftjhe.org)
[20:24:20] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[20:34:21] *** Quits: graydon (Adium@moz-eq305s.bchsia.telus.net) (Quit: Leaving.)
[20:35:22] *** Quits: yjv_ (yjv@moz-ll38tk.pa.comcast.net) (Connection closed)
[20:37:05] *** zz_kimundi is now known as kimundi
[20:44:15] <annodomini> Is there a convenient way to run "make docs" to just rebuild the book and other markdown docs, without having to go through a full bootstrap in order to run rustdoc in order to get standard library docs?
[20:48:27] <richo> acrichto: Are you about? (re 26632) I spent a while grepping around and I can't find where rustc actually creates functions, but I feel like I'm just missing something in build{,er}.rs
[20:48:51] <huon> gh26632
[20:48:51] <[o__o]> build failure on latest llvm 3.7: https://github.com/rust-lang/rust/issues/26632
[20:49:16] *** Quits: imperio (Mibbit@moz-8otf3a.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:50:51] *** Quits: mgottschlag (quassel@moz-27iuo2.hsi6.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[20:51:40] <acrichto> richo: I am indeed about!
[20:51:57] <acrichto> richo: if you grep for 'eh_personality' you should be able to find where we create the function today
[20:52:56] <richo> I'll have another look, I feel like I tried that. I think the issue is that the personality used to be a property of the landing pad, not it's containing function
[20:53:09] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Quit: ChatZilla 0.9.91.1 [Firefox 38.0.5/20150525141253])
[20:53:17] <richo> I found get_or_create_landing_pad, but it's not obviously attached to anything ecause of the way Builder works
[20:54:30] *** Joins: mgottschlag (quassel@moz-27iuo2.hsi6.kabel-badenwuerttemberg.de)
[20:56:31] <acrichto> richo: https://github.com/rust-lang/rust/blob/master/src/librustc_trans/trans/cleanup.rs#L851-L895
[20:56:39] <acrichto> that's where the ValueRef for the personality fn is created
[20:58:42] <richo> maaaybe we're talking at cross purposes (I Would say with 99% certainty it's that I don't know what I'm doing)
[20:59:31] <WindowsBunny> eddyb: it does io::copy(&mut reader, &mut writer)
[20:59:33] <richo> I'm pretty sure what I need to find is the code that emits the `define ...` into the IR, right?
[21:00:16] <WindowsBunny> eddyb: Which just reads into an array on the stack, then writes it all out to the writer, and repeats until eof
[21:00:18] <richo> oh, wait sorry. Somehow I missed that call to deflare_cfn, I'll bet that's what i'm after. 
[21:00:24] <richo> Thanks for rubber ducking, I might hassle you later
[21:02:20] <acrichto> richo: I believe all function declarations now happen in https://github.com/rust-lang/rust/blob/master/src/librustc_trans/trans/declare.rs
[21:02:34] <acrichto> although I don't know which fn is used for which kidn of fn
[21:03:01] <richo> yeah that's what I'm reading now, it'd be really nice if there was a way to cause a panic! on a LLVM ERROR so the strack was scrutable
[21:06:36] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[21:10:06] <jroesch> eddyb: ug sorry abotu that was so tired I forgot to fire up a full test suite, I fixed that offending line and ran a `make check-stage0-rustc_driver` and a `make check-stage1` should be good to go
[21:10:48] *** Joins: capella-s3 (capella-s3@moz-vcqob4.res.rr.com)
[21:12:42] *** Joins: graydon (Adium@moz-eq305s.bchsia.telus.net)
[21:12:54] *** Joins: swgillespie (swgillespie@moz-shviij.ip.windstream.net)
[21:17:37] *** kimundi is now known as kimundi_tmp
[21:17:38] *** Joins: goyox86 (textual@moz-rvv.00r.255.109.IP)
[21:18:33] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[21:19:00] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[21:28:06] *** Quits: nagisa (nagisa@moz-8t068g.static.zebra.lt) (Quit: Leaving.)
[21:34:12] *** Quits: eibwen (eibwen@moz-b06o43.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[21:39:13] *** Quits: bjz (bjz@moz-pl4g2k.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:43:12] *** Quits: swgillespie (swgillespie@moz-shviij.ip.windstream.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:44:12] *** Joins: nagisa (nagisa@moz-8t068g.static.zebra.lt)
[21:44:44] *** Joins: James (quassel@moz-id3rei.range86-163.btcentralplus.com)
[21:48:42] *** Joins: Brody (Mibbit@moz-n42.qui.108.24.IP)
[21:50:29] *** Joins: kimundi (kimundi@moz-7l900c.dip0.t-ipconnect.de)
[21:54:39] *** kimundi_tmp is now known as zz_kimundi_tmp
[21:55:07] *** Joins: Kingsquee (kingsley@moz-33q6f3.bchsia.telus.net)
[22:00:18] *** Joins: bjz (bjz@moz-pl4g2k.tpgi.com.au)
[22:01:20] *** Quits: bjz (bjz@moz-pl4g2k.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:03:24] *** Joins: bjz (bjz@moz-pl4g2k.tpgi.com.au)
[22:05:31] *** Quits: James (quassel@moz-id3rei.range86-163.btcentralplus.com) (A TLS packet with unexpected length was received.)
[22:08:49] <eddyb> jroesch: I was afk but I put it back in the queue
[22:09:00] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[22:15:35] *** Joins: yjv (yjv@moz-ll38tk.pa.comcast.net)
[22:16:13] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[22:18:09] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[22:18:15] *** Quits: bjz (bjz@moz-pl4g2k.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:18:38] <jroesch> eddyb: no worries, taking a day off for the most part, just wanted to get that merged :)
[22:19:53] *** Quits: yjv (yjv@moz-ll38tk.pa.comcast.net) (Ping timeout: 121 seconds)
[22:22:06] *** Joins: tjakubow (tjakubowski@moz-ag87jj.fios.verizon.net)
[22:25:25] *** Quits: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[22:26:14] *** Quits: tjakubow (tjakubowski@moz-ag87jj.fios.verizon.net) (Ping timeout: 121 seconds)
[22:26:46] *** Quits: eddyb (eddyb@moz-l3g.mv7.25.188.IP) (Ping timeout: 121 seconds)
[22:27:23] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[22:34:35] *** Quits: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net) (Ping timeout: 121 seconds)
[22:35:29] *** Quits: zz_kimundi_tmp (kimundi@moz-7l900c.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[22:54:54] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[22:56:14] *** Quits: nagisa (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[22:56:26] *** Quits: eljay (eljay@moz-fmte10.skybroadband.com) (Quit: Leaving)
[22:57:44] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[22:58:41] *** Joins: bjz (bjz@moz-0j4.2c9.87.203.IP)
[22:59:35] *** Quits: graydon (Adium@moz-eq305s.bchsia.telus.net) (Quit: Leaving.)
[23:01:46] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[23:05:10] *** Quits: burntsushi (burntsushi@moz-t92kn9.ma.charter.com) (Ping timeout: 121 seconds)
[23:06:17] *** Joins: burntsushi (burntsushi@moz-t92kn9.ma.charter.com)
[23:10:21] *** Parts: annodomini (lambda@moz-qgii5v.ma.comcast.net) ()
[23:11:06] *** Joins: Skyler (Skyler@moz-7ds39s.sd.cox.net)
[23:13:00] *** Quits: bjz (bjz@moz-0j4.2c9.87.203.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:22:01] *** Quits: mgottschlag (quassel@moz-27iuo2.hsi6.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[23:22:51] *** Joins: graydon (Adium@moz-eq305s.bchsia.telus.net)
[23:23:16] *** Quits: graydon (Adium@moz-eq305s.bchsia.telus.net) (Quit: Leaving.)
[23:24:24] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[23:25:00] *** Quits: goyox86 (textual@moz-rvv.00r.255.109.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:26:41] *** Joins: ytain (ytain@moz-ucq.1re.175.108.IP)
[23:28:27] *** Quits: isis (isis@moz-uprl14.patternsinthevoid.net) (Quit: she's probably out making total destroy on all of the things)
[23:29:06] *** Quits: larsberg (sid89@moz-1a60qu.0j4i.jtu0.0101.2620.IP) (Quit: )
[23:34:24] *** Joins: aatch (james@moz-i1k1ks.tlms.2o1v.e006.2406.IP)
[23:36:01] <Gankro> Is the behaviour of the dot operator wrt autorf/deref/coercion internally documented and/or locally implemented enough to just read?
[23:36:59] <huon> Gankro: have you seen http://stackoverflow.com/a/28552082/1256624 ?
[23:36:59] *** Quits: scott (uid25790@moz-e5ok1n.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[23:37:03] <aatch> Gankro, not really, no.
[23:37:31] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[23:37:59] <Gankro> huon: ooh, thanks!
[23:38:29] <huon> I'm not sure how coercions fit into it
[23:38:34] <huon> esp. trait object ones
[23:39:33] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[23:41:37] <Gankro> huon: https://github.com/rust-lang/rfcs/blob/master/text/0401-coercions.md#coercions-of-receiver-expressions specifies that 0-to-1 unsizing coercions will occur, though it's not clear how it interacts with trait impls
[23:47:39] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Ping timeout: 121 seconds)
[23:49:41] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[23:55:28] *** Joins: mib_0i4sz3 (Mibbit@moz-hu6.nja.252.72.IP)
[23:57:35] *** Quits: capella-s3 (capella-s3@moz-vcqob4.res.rr.com) (Connection closed)
[23:57:42] *** Joins: capella-s3 (capella-s3@moz-vcqob4.res.rr.com)
