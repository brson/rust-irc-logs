[00:00:01] <ssbr> aatch: not really a search path issue, this setup looks deliberate
[00:00:18] <jld> I thought I saw master == incoming when I was looking at stuff yesterday, but maybe I was confused.
[00:00:28] <ssbr> would it be bad to request that rustc and syntax be available to users on windows?
[00:00:36] <ssbr> (as opposed to just rustc.exe)
[00:00:41] <aatch> ssbr, they should be.
[00:00:52] <ssbr> They aren't in the 0.6 build I downloaded
[00:01:05] <aatch> At all?
[00:01:07] <dbaupp> ssbr: yeah, those 0 size ones are apparently to manage dependencies while building or something
[00:01:18] <strcat> the 0 size ones are no longer installed on linux
[00:01:22] <strcat> I fixed that
[00:01:25] <strcat> well
[00:01:26] <ssbr> aatch: well, they weren't in the directory that rustc gets libraries to link compiled crates with
[00:01:31] <strcat> they shouldn't be installed anywhere anymore afaik
[00:01:41] <ssbr> they were only in the directory that rustc.exe is in (presumably so that rustc.exe itself can use them)
[00:02:01] <ssbr> they need to go in Rust\bin\rustc\i686-pc-mingw32\bin :(
[00:02:01] <aatch> ssbr, well open an issue on github about it
[00:02:06] <ssbr> aatch: sure thing
[00:02:21] <dbaupp> strcat: nice
[00:02:22] * aatch doesn't use windows, so I wouldn't be able to test it.
[00:02:25] <strcat> ssbr: afaik it's fixed already
[00:02:35] <ssbr> strcat: in 0.7?
[00:02:40] <strcat> ssbr: yes
[00:02:54] <ssbr> I'll believe you and port if I can't use it then ;)
[00:02:58] <ssbr> uhhhh
[00:03:01] <strcat> let me find the commit, sec
[00:03:02] <ssbr> and complain if I can't use it then*
[00:03:17] <strcat> does the windows build still use make?
[00:03:21] <strcat> I assume it does...
[00:03:38] <strcat> (for installing to a dir that then gets packaged into an exe/msi)
[00:04:02] <strcat> ssbr: https://github.com/mozilla/rust/commit/2cbfe6d19d2feb531b746217a6313474755bf025
[00:04:07] <strcat> so
[00:04:09] <strcat> that should be in 0.6
[00:04:11] <strcat> ;\
[00:05:12] <ssbr> I have no idea what that commit means.
[00:06:20] <strcat> graydon: how is the windows exe made? does it make DESTDIR="$foo" install ?
[00:06:34] <graydon> make dist
[00:06:39] <strcat> oh
[00:06:45] <graydon> you mean the installer, yes?
[00:06:47] <strcat> yeah
[00:06:52] <graydon> yeah
[00:07:01] <aatch> yeah
[00:07:22] <graydon> rust-buildbot: dance
[00:07:23] <rust-buildbot> <(^.^<)
[00:07:24] <rust-buildbot> <(^.^)>
[00:07:25] <rust-buildbot> (>^.^)>
[00:07:25] <rust-buildbot> (7^.^)7
[00:07:27] <rust-buildbot> (>^.^<)
[00:07:33] <graydon> always time for a dancing robot
[00:08:30] <aatch> I remember seeing <(^.^)> as the "kirby operator" as part of a test for a parser
[00:08:58] <strcat> huh
[00:09:28] <strcat> [Files]
[00:09:30] <strcat> Source: "i686-pc-mingw32/stage3/*.*" ; DestDir: "{app}"; Flags: ignoreversion recursesubdirs
[00:09:32] <strcat> that's the problem
[00:09:45] <tiffany> what does a kirby operator do? suck up the operands and spit out a combined-power star?
[00:09:50] <strcat> I have no idea what the structure of this iss file is like though ;p
[00:10:25] <graydon> tiffany: yes, and squeaks if you have sound enabled
[00:10:39] <graydon> rare operator
[00:11:01] <graydon> strcat: yeah, it's some made-up little language from inno
[00:12:23] <graydon> http://www.jrsoftware.org/ishelp/index.php?topic=filessection
[00:12:29] <graydon> looks like there's an Excludes: option
[00:12:47] *** Quits: bEcker (Thunderbir@moz-597F0F80.resnet.ucsc.edu) (Quit: bEcker)
[00:12:58] *** Quits: jack (jack@EF36212C.8FA609AD.840029BC.IP) (Quit: Leaving.)
[00:13:10] <doomlord_> i see an issue #4535 for Android,iOS support , "closed" - should i open an issue again where i can post findings/sticking points on trying to get it to work on iOS
[00:13:18] *** Quits: snadon (chatzilla@moz-EFE8FD29.mc.videotron.ca) (Ping timeout)
[00:13:23] *** Joins: jack (jack@EF36212C.8FA609AD.840029BC.IP)
[00:13:36] *** Joins: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu)
[00:13:46] <aatch> doomlord_, like a metabug?
[00:13:52] <graydon> doomlord: probably best to add an A-iOS tag, I'll make one
[00:14:00] <cmr> Would copying all the files-to-be-installed into their own directory and installing from there be sane?
[00:14:01] <doomlord_> whats most appropriate i dont know
[00:14:27] <doomlord_> i've got it using the right compiler now (i think) , it does indeed run into needing headers to compile the rust runtime that aren't supplied on iOS
[00:14:31] <strcat> cmr: well that's how *nix packaging works
[00:14:49] <strcat> you 'make DESTDIR="$PACKAGE_MANAGER_DIR" install' and then it builds it into a package
[00:15:02] <graydon> doomlord: added
[00:15:09] <doomlord_> perhaps some sort of emulation layer for the missing parts can be written , but the people doing Android support will know more than me i think
[00:15:10] <doomlord_> thanks
[00:15:15] <strcat> not sure if the windows dir structure is the same, looks like it
[00:15:49] <strcat> so I could just add a tmp dir for make install to output to for the .iss thing to use
[00:16:23] <strcat> ideally the files wouldn't have to be listed in two places
[00:16:37] <cmr> that is what I suggested
[00:16:59] *** Joins: steven_is_false (quassel@moz-E020C314.bchsia.telus.net)
[00:19:00] *** Quits: snearch (snearch@moz-5548BDA3.pool.mediaways.net) (Quit: Verlassend)
[00:19:55] <aatch> hmm, I have a Duration type, and am creating two sub-traits that split durations into those that always represent the same amount of real time, and those that don't
[00:20:01] <aatch> I need names
[00:20:08] *** Quits: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu) (Ping timeout)
[00:22:36] <Sodel_the_V> aatch: Fixed and variable durations?
[00:22:55] <aatch> That's what I was leaning towards
[00:22:57] <aatch> thanks
[00:23:00] <Sodel_the_V> np!
[00:23:07] * aatch is terrible at naming
[00:23:11] <strcat> cmr: if only I was good at makefiles
[00:23:25] <strcat> dunno how to call install with DESTDIR="foo" from another target
[00:23:35] <aatch> strcat, is anybody good at makefiles?
[00:23:51] <strcat> it has to be a dep, but with an argument ;\
[00:24:22] <strcat> uhh, I guess I can detect make dist and set DESTDIR...
[00:24:37] <aatch> strcat, I might know. is DESTDIR only for install?
[00:24:39] <cmr> just call make from within some target.
[00:24:46] <strcat> aatch: I hope :D, let me see
[00:25:13] <aatch> Well there is syntax to set variables that only apply during a specific target
[00:25:17] <strcat> aatch: no I guess it uses it everywhere
[00:25:26] *** Quits: dherman (dherman@2557E599.66715431.D25A875A.IP) (Quit: dherman)
[00:25:31] *** Quits: brendan (brendaneic@6BC3D9FF.179B5C1A.50A7E6A6.IP) (Quit: brendan)
[00:25:43] <aatch> Though I can't remember how it interacts with deps
[00:26:08] <strcat> the rpath stuff is messed up
[00:26:21] <strcat> it uses CFG_PREFIX which is different when building and after installing
[00:26:27] <strcat> because 
[00:26:29] <strcat> Makefile.in:    CFG_PREFIX:=$(DESTDIR)/$(CFG_PREFIX)
[00:26:48] <strcat> anyway I guess that's not relevant for windows
[00:26:49] *** Joins: ysuzuki (ysuzuki@moz-F333A8C8.st.keio.ac.jp)
[00:26:49] *** Joins: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu)
[00:27:09] <strcat> but I feel like fixing that first ;p, now that I know where that bad non-relative rpath comes from
[00:27:34] <aatch> isn't the 'r' in rpath supposed to be relative?
[00:28:14] <strcat> aatch: maybe but rust ends up with a silly absolute one set to /dir/inside/chroot/i/built/in or /home/dir/i/built/in
[00:28:44] <strcat> so it's either /home/strcat/packages/rust/src/blah or /build/src/blah
[00:29:00] <aatch> -.-
[00:29:01] <strcat> the other rpaths aren't that bad
[00:29:23] *** Quits: lkuper (lkuper@moz-D6AAFF3.cs.indiana.edu) (Ping timeout)
[00:29:36] <strcat> well it has 3 of them
[00:29:50] <strcat> it uses relative paths, absolute paths and CFG_PREFIX
[00:30:33] <strcat> the relative one will break if the binary is moved relative to the libs
[00:30:47] <strcat> the absolute one and relative one will break if the library is moved
[00:30:51] <indutny> hi guys
[00:30:55] <indutny> how are you doing?
[00:31:22] *** Quits: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Ping timeout)
[00:31:23] <strcat> and the CFG_PREFIX one is only set right if you make install without a package manager
[00:31:37] <strcat> solution? I don't know.
[00:31:54] <indutny> so I'm trying to figure out how it'd be best to write parser in rust
[00:32:00] <indutny> and having some sort of troubles
[00:32:15] <indutny> initially I was thinking about having struct with two fields: source and offset
[00:32:28] <indutny> and few impl fns
[00:32:36] <indutny> like match(), parseHeader() etc
[00:32:39] <aatch> https://github.com/mozilla/rust/tree/master/src/libsyntax
[00:32:43] <indutny> oh
[00:32:58] <aatch> Thats the parser rustc uses for rust itself
[00:33:03] <aatch> I'm not suggesting you use that
[00:33:11] <aatch> but it should give you some ideas
[00:33:41] <indutny> well
[00:33:43] <aatch> Note that the rustc source code doesn't represent particularly good code most of the time
[00:33:44] <indutny> its using mutable fields
[00:33:52] <aatch> oh, wait
[00:33:52] <indutny> and they seems to be deprecated
[00:34:07] <aatch> https://github.com/mozilla/rust/tree/incoming/src/libsyntax
[00:34:20] <aatch> Sorry, master vs incoming
[00:34:21] <dbaupp> indutny: that is correct
[00:34:34] <indutny> so how should I do it in "user" code?
[00:34:44] <aatch> mutable variables
[00:34:48] <indutny> I'm thinking about returning Parser instance
[00:34:53] <indutny> on each parser phase
[00:34:53] <dbaupp> you can use `&mut self`, so that the entire self object is mutable in methods
[00:34:58] <indutny> aah
[00:35:04] <indutny> didn't know that
[00:35:05] <dbaupp> (rather than just `&self`)
[00:35:09] <indutny> I got it
[00:35:16] <dbaupp> :)
[00:35:18] <indutny> :)
[00:35:31] <indutny> another question: use of partially moved value
[00:35:41] <indutny> what's that?
[00:36:09] <aatch> basically, it means that you moved a value out of a struct (or similar) then tried to use that struct later
[00:36:21] <aatch> you either need to copy the value, or borrow a reference
[00:36:28] <aatch> depending on your case
[00:36:32] <cmr> can you move it back when you're done with it?
[00:36:32] <strcat> or destructure it all at once if you actually want to move out
[00:36:37] <indutny> aha
[00:36:39] <strcat> cmr: no, not right now
[00:36:43] <cmr> (I don't really understand rust's memory model yet)
[00:36:46] *** Quits: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu) (Ping timeout)
[00:36:57] <dbaupp> cmr: taking a ref would probably be the best way of doing that
[00:37:02] <indutny> that's quite complicated actually :)
[00:37:07] <dbaupp> (a mutable ref)
[00:37:16] <strcat> cmr: it becomes unusable as soon as you move out
[00:37:27] <strcat> including a partial move out
[00:37:59] <aatch> indutny, it's part of Rust's whole memory safety thing
[00:38:01] *** Joins: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu)
[00:38:05] <indutny> I got it
[00:38:23] <aatch> if you ever encounter a segfault, thats a rustc bug
[00:38:34] <aatch> (unless it's inside unsafe)
[00:38:36] <cmr> or you're using unsafe code
[00:38:38] <indutny> it just looks like it does dynamic allocation :)
[00:38:48] <indutny> but in most cases it doesn't
[00:38:53] <indutny> and that hurts my brain a bit
[00:38:54] <indutny> :)
[00:39:02] <aatch> there is only dynamic allocation with ~ and @
[00:39:20] <strcat> and there aren't implicit copies of heap memory
[00:39:35] <indutny> ~?
[00:39:45] <aatch> owned pointers
[00:39:48] <indutny> why is it dynamic?
[00:40:00] <indutny> its deallocated on scope collapse
[00:40:07] <strcat> indutny: because that's what it is, a call to malloc
[00:40:07] <indutny> I thought it would be on-stack
[00:40:09] <cmr> Because they can be sent across task boundaries.
[00:40:14] <indutny> aaah
[00:40:21] <indutny> task boundaries
[00:40:23] <strcat> indutny: T is unboxed, ~T is a malloc'ed block of memory
[00:40:29] <indutny> got it
[00:40:31] <indutny> and same is @
[00:40:36] <indutny> thank you
[00:40:51] <aatch> they are also only freed at the end of a block if that block is the end of it's lifetime.
[00:40:52] <strcat> indutny: move semantics mean it can live longer than a scope
[00:40:55] *** Quits: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu) (Ping timeout)
[00:41:16] <indutny> great
[00:41:25] <strcat> returning it, passing it to a function by-value or assigning it to something else
[00:41:32] <cmr> also, @ are GC'd 
[00:41:38] <aatch> most of the time you won't want or need @
[00:41:58] <strcat> indutny: if you know C, ~T just acts exactly like a struct with a pointer in it
[00:42:06] <strcat> except rust prevents using it after a shallow copy
[00:42:17] <strcat> (that's a move, for anything with a destructor)
[00:42:32] <strcat> well or just a pointer.
[00:43:36] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.0)
[00:44:02] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:44:02] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/lI_s0g
[00:44:02] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:44:26] <aatch> basically, it's impossible to alias ~ (in theory)
[00:44:54] *** Joins: brendan (brendaneic@6BC3D9FF.179B5C1A.50A7E6A6.IP)
[00:45:04] <dbaupp> aatch: alias as another ~, you can alias it via &
[00:45:21] <aatch> dbaupp, oh, true
[00:45:31] <indutny> ok, figured it out
[00:45:36] <indutny> needed to `copy` value
[00:45:40] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:45:40] <indutny> because of ~ prefix
[00:45:50] <indutny> thank you :)
[00:46:15] <strcat> rusti: struct Foo(int, int, int, int); sys::size_of::<Foo>()
[00:46:16] <rusti> 32
[00:46:19] <strcat> rusti: struct Foo(int, int, int, int); sys::size_of::<~Foo>()
[00:46:20] <rusti> 8
[00:47:05] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:47:05] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/R66lrQ
[00:47:05] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:47:07] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:47:07] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/kJLPVg
[00:47:07] <ghrust> 13rust/06auto 141eb5efc 15Huon Wilson: libcore: add N(0,1) and Exp(1) distributions to core::rand....
[00:47:07] <ghrust> 13rust/06auto 14d3e7c74 15bors: auto merge of #6162 : graydon/rust/random-retry, r=graydon...
[00:47:07] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:47:13] *** Quits: jclements (jclements@moz-C03D0C61.vlan426.asr1.sfo1.gblx.net) (Quit: jclements)
[00:48:31] <doomlord_> ok for what its worth i've thrown my finds up as an issue... i'm sure the people doing rust/android will know more about whats going on
[00:48:52] <doomlord_> ^(my findings on attempting to compile for iOS)
[00:52:38] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[00:52:42] *** Quits: ssbr (scorchsabe@A9D9D38C.B6F034AC.72A31D6.IP) (Connection reset by peer)
[00:53:11] *** Joins: ssbr (scorchsabe@A9D9D38C.B6F034AC.72A31D6.IP)
[00:53:36] <aatch> doomlord_, I can help with the red zone size thing.
[00:54:21] <aatch> In rust_task.h, there is section that defines RED_ZONE_SIZE
[00:54:23] <indutny> another question
[00:54:34] <indutny> how can I return ~self
[00:54:41] <indutny> well, let me rephrase it
[00:54:46] <indutny> I've a struct named Parser
[00:54:54] <indutny> and it has a "method" which should return ~Parser
[00:55:06] <indutny> ah
[00:55:08] <indutny> I guess I should clone it
[00:55:23] <strcat> indutny: it should probably just return Parser
[00:55:24] <indutny> yes, that works
[00:55:26] <doomlord_> aatch, interesting, 
[00:55:35] <indutny> strcat: I did `copy self`
[00:55:40] <pcwalton> finally bootstrapping
[00:55:44] <indutny> ah wait
[00:55:45] <aatch> indutny, actually, if you make the method take ~self, then you could return self.
[00:55:46] <pcwalton> this is an epic patch
[00:55:47] <indutny> doesn't work
[00:55:52] <cmr> aatch: is this the same red zone defined by x86_64?
[00:55:56] <aatch> Though i'm not sure how well ~ works
[00:56:05] <aatch> cmr, no idea
[00:56:20] <aatch> I just figured that pointing out where it was defined would help
[00:56:38] <cmr> x86-64 defines that there is always 128 bytes under the stack which are free to use, called the 'red zone'
[00:56:53] <indutny> strcat: I'm trying to express following thing
[00:57:07] <indutny> while (obj = obj.execute()) {}
[00:57:14] <indutny> in rust
[00:57:23] <strcat> so it should copy obj and return it?
[00:57:51] <strcat> impl Foo { fn bar(&self) -> Foo { self.clone() } }
[00:58:05] <dbaupp> indutny: can you modify obj in place?
[00:58:35] <graydon> pcwalton: which one is this?
[00:58:41] <indutny> I think I've figured it out
[00:58:42] <indutny> thank you!
[00:58:51] <pcwalton> graydon: INHTWAMA-ifying the serializer, removing mut fields from it
[00:58:53] <pcwalton> all serializers
[00:59:08] <strcat> well you should prefer making the caller decide if there should be a copy (taking self by-reference unless you absolutely need a copy, and in that case taking it by-value)
[00:59:08] <aatch> cmr, there's an entry for linux i386, x86_64 and mips, for OSX (well __APPLE__) i386 and x86_64, windows and freebsd the same.
[00:59:09] <graydon> ok, cool
[00:59:11] <indutny> dbaupp: I don't like it
[00:59:18] <pcwalton> how that grew to 5500 lines is... a long and sordid tale
[00:59:24] <aatch> and a lone one for Android
[00:59:27] <pcwalton> involving modifying #[auto_encode]
[00:59:28] <indutny> dbaupp: but that's probably faster
[00:59:38] <pcwalton> and adding &mut self all over rustc
[01:00:28] *** Quits: brendan (brendaneic@6BC3D9FF.179B5C1A.50A7E6A6.IP) (Quit: brendan)
[01:00:30] <aatch> I wouldn't be surprised if iOS has the same redzone as android
[01:00:40] <dbaupp> pcwalton: auto_encode, or deriving(Encodable)?
[01:00:40] <aatch> what with being ARM and all.
[01:00:48] <pcwalton> auto_encode
[01:00:59] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[01:01:00] <pcwalton> I don't know how complete deriving(Encodable) and deriving(Decodable) are
[01:01:30] <erickt> pcwalton: they are fully complete, unless someone's made changes to auto_encode since deriving(Encodable) landed
[01:01:32] *** Quits: sully (sully@moz-ECFB7516.moroso.emarhavil.com) (Client exited)
[01:01:38] *** Joins: z0w0 (zack@moz-A9182BA0.lns8.woo.bigpond.net.au)
[01:01:39] <erickt> I'm waiting for a snapshot to remove auto_encode
[01:01:39] <pcwalton> oh, I just did
[01:01:40] <pcwalton> oops
[01:01:52] <erickt> curses!
[01:01:53] <erickt> :)
[01:01:54] <pcwalton> just noticed it because a test failed
[01:02:28] <erickt> I thought I updated the tests to use deriving(Encodable)
[01:02:34] <pcwalton> yeah, you did
[01:02:36] <pcwalton> that's why I noticed it :)
[01:03:07] *** Joins: sully (sully@moz-ECFB7516.moroso.emarhavil.com)
[01:03:19] * indutny &
[01:03:19] <indutny> ttyl
[01:04:36] <pcwalton> wow, that code is much easier to work with than auto_encode and auto_decode
[01:04:37] <pcwalton> kudos
[01:04:58] <erickt> pcwalton: thanks :)
[01:05:03] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[01:05:59] <dbaupp> pcwalton, erickt: fwiw, I'm currently trying to make it even easier (in part due to https://github.com/mozilla/rust/issues/6149 )
[01:06:50] <nmatsakis> graydon: ping
[01:07:20] <graydon> nmatsakis: pong
[01:07:45] <erickt> dbaupp: awesome!
[01:07:54] <nmatsakis> graydon: I wanted to ask you about something---while I wait for a snapshot, I made a branch and fixed up the various bugs relating to the dynamic checks for @mut...
[01:08:04] <graydon> oh cool!
[01:08:05] <nmatsakis> graydon: ...one of the things I did was to add a debugging mode where it tells you 
[01:08:05] <graydon> that's great
[01:08:15] <nmatsakis> which borrow is conflicting with which
[01:08:28] <nmatsakis> right now this is implemented in a kind of hokey way,
[01:08:32] <nmatsakis> using a per-task vector
[01:08:40] <nmatsakis> but it seems like something we could do as zero-cost given the right GC metadata
[01:08:47] <nmatsakis> that is, by walking the stack frame, we could figure this out
[01:08:57] <graydon> hmm, ok
[01:09:01] <nmatsakis> does this seem...remotely feasible in the future? is this the kind of thing we plan to ever do?
[01:09:11] <nmatsakis> like, making stack maps of some kind or another?
[01:09:17] <graydon> certainly in the realm of possibility
[01:09:21] <graydon> I haven't any plans on it yet
[01:09:25] <nmatsakis> ok
[01:09:44] <graydon> I wonder if it can be config'ed on, even in hokey form
[01:09:44] <nmatsakis> I imagine we could even use LLVM's GC rooting primitives, since it would only be done for @mut's that are being frozen
[01:09:48] <graydon> otherwise it'll bitrot
[01:09:58] <nmatsakis> well for now I have the code in there and you do RUST_DEBUG_BORROWS=1
[01:10:02] <graydon> yeah, it's not clear where us and LLVM will ever be able to see eye to eye
[01:10:11] <graydon> (on gc metadata)
[01:10:16] *** Joins: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP)
[01:10:28] <graydon> you do that when you run the program?
[01:10:33] <nmatsakis> yes.
[01:10:38] <doomlord_> aatch, thanks that fixed that issue, onto the next..
[01:10:39] <graydon> and where does it kick in, during the dynamic check?
[01:10:47] <graydon> the @-freeze and such
[01:10:51] <graydon> ?
[01:10:52] <nmatsakis> yeah, when it roots, it checks for this flag
[01:10:57] <nmatsakis> and if so calls the fn that does the slow stuff
[01:11:02] <graydon> I see
[01:11:07] <graydon> and adds something to TLS
[01:11:07] <nmatsakis> I haven't...measured it at all :)
[01:11:09] <graydon> heh
[01:11:11] <nmatsakis> well, it's not really TLS
[01:11:14] <nmatsakis> it's a field in the rust_task
[01:11:19] <graydon> oh, I see
[01:11:21] <nmatsakis> I mean, it is TLS, but it's faster :)
[01:11:25] <graydon> yeah
[01:11:44] <nmatsakis> it's also not cleaning up after itself properly right now so the program always fails with a leak report :)
[01:11:47] <nmatsakis> but it is handy
[01:11:48] <graydon> hm. well, personally I'm ok with this sort of thing; you might want to run it by brian as I know he's trying to get tasks smaller rather than larger
[01:11:56] <graydon> but it sounds handy, yeah
[01:12:01] <nmatsakis> though mostly i've been using it to debug bugs in the code so far :)
[01:12:03] <graydon> assuming you run into those borrows
[01:12:06] <graydon> I've .. so far never hit one!
[01:12:09] <nmatsakis> well,
[01:12:12] <strcat> would it okay to respect the system CFLAGS/CXXFLAGS/LDFLAGS? as in using those as the basis for the variables in the makefile and only appending to them
[01:12:13] <nmatsakis> the current code doens't really check very well.
[01:12:17] <graydon> :)
[01:12:28] <dbaupp> doomlord_: if you put '```' on the line before and after blocks of code on github, then they get formatted like code and it's easier to read :)
[01:12:34] <nmatsakis> graydon: so you may find you see a few more :) but so far they've all been due to bugs in the compiler :)
[01:12:37] <strcat> I was trying to figure out how to fix libuv not being built with optimizations and noticed that only CPPFLAGS from the system env is respected
[01:12:40] <pcwalton> they are pretty rare IME
[01:12:43] <graydon> here's hoping
[01:12:45] <pcwalton> but then again we don't really know since there are bugs
[01:12:55] <nmatsakis> one particular realy problematic thing is a += b
[01:12:55] <graydon> bugs atop bugs
[01:12:57] <graydon> alas
[01:12:59] <nmatsakis> because in trans this actually evalutes a twice
[01:13:06] <nmatsakis> (if + is overloaded)
[01:13:12] <pcwalton> well, I never hit it in my non-rustc code
[01:13:19] <pcwalton> because all my Rust projects don't use the GC
[01:13:20] <nmatsakis> it's just a horrible mess, so I've just rewritten any code that uses that :)
[01:13:27] <nmatsakis> we need to fix += to be an OpAssign trait or whatever
[01:13:31] <graydon> that's gotta be a bug, yes? we're aiming for 1-eval-of-a right?
[01:13:32] <graydon> yeah
[01:13:36] <graydon> OpAssign
[01:13:40] <doomlord_> dbaupp, ok
[01:13:46] <nmatsakis> graydon: yes, it's a bug, and I think the fix is OpAssign
[01:13:54] <bjz> nmatsakis: https://github.com/mozilla/rust/issues/5992 ?
[01:13:54] <graydon> totally agree
[01:14:08] <nmatsakis> bjz: yes
[01:14:16] <aatch> Would a set of traits, for {<OP>}Assign be better?
[01:14:25] <pcwalton> aatch: that's presumably what nmatsakis means
[01:14:29] <graydon> aatch: yes, that's what we're discussing
[01:14:37] <aatch> Ok, just clarifying
[01:14:53] <graydon> foo[x] = y also goes in here
[01:15:00] <graydon> (I think!)
[01:15:01] <aatch> That would be nice
[01:15:15] <pcwalton> that one is somewhat tricky because you need foo[x] += y to work too, although I think you can do it with &mut self
[01:15:20] <pcwalton> bjz and I talked through it a while back
[01:15:20] <graydon> though of course you get into a bit of ... yeah
[01:15:22] <graydon> trouble with that
[01:15:33] <graydon> ok cool
[01:15:34] <pcwalton> oh right, you just have OpIndexAssign return an &mut self
[01:15:38] <pcwalton> and then the compiler writes into *that*
[01:15:44] <pcwalton> possibly delegating to an AddAssign trait or whatever
[01:15:55] <graydon> ay
[01:16:18] <bjz> graydon: if you look at the bottm of my suggetion, I have an IndexAssign with a mut_index method
[01:16:26] <aatch> having IndexAssign would be great for dictionaries though
[01:16:27] <bjz> graydon: was just an idea though
[01:16:52] <graydon> sure, cooll
[01:17:00] <strcat> aatch: won't work as expected for maps
[01:17:01] <graydon> this should get done
[01:17:04] * graydon nominates
[01:17:09] <pcwalton> aatch: keep in mind it won't work for inserting a *new* key
[01:17:16] <dbaupp> bjz: fwiw, I'd prefer strcat's .assign method proposal to overloading `=`
[01:17:19] <strcat> aatch: a[5] = 5; will probably have to fail if 5 isn't in it
[01:17:24] <bjz> graydon: that's what I do in lmath anyway, I just don't have the operator
[01:17:32] <strcat> dbaupp: well you can't overload = for 'a = b.clone()'
[01:17:36] <pcwalton> it just... doesn't really work, C++ tries to make it work but it's a huge hack
[01:17:37] <strcat> because rust doesn't do implicit copies on =
[01:17:40] <pcwalton> you could do it the way C++ does it
[01:17:41] <strcat> it does moves
[01:17:44] <strcat> a = b; in rust
[01:17:45] <pcwalton> but I would advise against it :)
[01:17:49] <strcat> is a = std::move(b); in C++
[01:17:56] <strcat> a = b; in C++ is a = b.clone(); in rust
[01:18:17] <strcat> so you might as well just have a.assign(&b) instead of a = b.clone()
[01:18:20] <dbaupp> strcat: yes, just part of bjz's proposal is overloading =
[01:18:35] <strcat> you can't overload it though is what I'm saying ;p
[01:18:43] <bjz> dbaupp: oh, the first trait
[01:19:07] <strcat> a may or may not be initialized in 'a = b'
[01:19:14] <strcat> the compiler knows though
[01:19:31] <strcat> always does a move though...
[01:19:33] <dbaupp> strcat: that's good, because I don't want it overloaded :) (i'm sure it could be overloaded in theory, just it'd require changing the semantics)
[01:19:39] <graydon> I think I don't want to overload `=`
[01:19:51] <graydon> unless it's like a "nothing here works unless we do it" sort of thing
[01:20:05] <strcat> graydon: well I don't think it *can* be overloaded without ruining the nice semantics of implicit moves and explicit copies
[01:20:10] <graydon> yeah
[01:20:26] <graydon> need to head out now. night all.
[01:20:30] <pcwalton> good night
[01:20:32] *** Quits: graydon (Adium@A5087023.2354C43D.D8E68FF6.IP) (Quit: Leaving.)
[01:21:15] * strcat should add that to the C++ comparison page
[01:21:29] <xenocons> nice to see rusti getting some interesting on the mailling list
[01:21:38] <EXetoC> bjz: how's it going, my frog-loving australian friend?
[01:21:41] <bjz> pcwalton: did you make a decision on: https://github.com/mozilla/rust/pull/6151
[01:21:46] <EXetoC> or maybe you hated those pesky invaders, can't remember
[01:21:47] <bjz> EXetoC: toad
[01:22:09] <pcwalton> bjz: if graydon says OK then I'll r+ it
[01:22:10] * bjz is just about to head out for coffee
[01:22:20] <pcwalton> looks like he did
[01:22:28] <xenocons> bjz: hail fellow australian
[01:22:29] <pcwalton> done
[01:22:34] <EXetoC> bjz: maybe I won't forget that the third time :>
[01:22:38] <bjz> xenocons: where are you?
[01:22:42] <xenocons> bjz: melb
[01:22:47] <bjz> pcwalton: cheers
[01:22:53] <bjz> xenocons: sweet!
[01:22:57] *** Quits: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP) (Quit: pcwalton)
[01:23:05] <dbaupp> bjz, xenocons: wow, two other australians :) (i'm sydney...)
[01:23:11] <xenocons> tell me you are in melb too and that there are hopes for functional programming in industry in australia?
[01:23:16] <xenocons> dbaupp: cool!
[01:23:17] <bjz> xenocons: are you coming to the melbourn funcytional user group this evening?
[01:23:24] <xenocons> bjz: there is one what WHAT?
[01:23:31] <bjz> xenocons: http://www.meetup.com/Melbourne-Functional-User-Group-MFUG/
[01:23:31] <xenocons> i need more info stat!
[01:23:34] <xenocons> omfg
[01:23:37] <bjz> :)
[01:23:47] <xenocons> my eyes are watering
[01:24:02] <bjz> xenocons: come tonight and I'll have a fellow rustian
[01:24:06] <bjz> :)
[01:24:21] <xenocons> woot, looking at where its at
[01:25:18] <aatch> Bloody aussies...
[01:25:27] * aatch is a brit living in NZ
[01:25:36] <bjz> aatch: :)
[01:25:53] <dbaupp> aatch: ew :P
[01:26:06] <xenocons> bjz: yup its closeby ill be there
[01:26:10] <bjz> xenocons: we need to start a rust group
[01:26:19] <bjz> xenocons: :P of two
[01:26:27] <bjz> heh
[01:26:43] <xenocons> bjz: yup thatd be good, im no rust expert (yet..) but im most certainly looking into the language with interest
[01:26:47] *** Quits: steven_is_false (quassel@moz-E020C314.bchsia.telus.net) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[01:26:53] <dbaupp> bjz: start it in canberra? I'll come if it is ;D
[01:26:58] <xenocons> im excited there is actually FP meetups 
[01:27:16] <bjz> dbaupp: the australin rust convention
[01:27:25] <xenocons> ARC is a cool acronym
[01:27:30] <bjz> heh
[01:27:49] <dbaupp> we can have talks about numeric traits
[01:27:59] <bjz> yes
[01:28:35] <bjz> xenocons: what's your background?
[01:28:45] <xenocons> in coding? F#
[01:28:51] <bjz> ooh
[01:28:52] *** Joins: steven_is_false (quassel@moz-E020C314.bchsia.telus.net)
[01:28:53] *** Quits: steven_is_false (quassel@moz-E020C314.bchsia.telus.net) (Quit: steven_is_false)
[01:28:56] <xenocons> but im not a programmer by career
[01:28:56] *** Joins: steven_is_false (quassel@moz-E020C314.bchsia.telus.net)
[01:29:10] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[01:29:16] <bjz> ahh ok. no worries.
[01:29:37] <xenocons> current job is pentesting\consulting, so i get to code a fair bit thoguh
[01:29:48] <xenocons> you?
[01:29:53] <xenocons> whoops hijacking #rust here
[01:29:54] <xenocons> heh
[01:29:54] <bjz> pentesting?
[01:30:13] <dbaupp> bjz: see how long the ink lasts :P
[01:30:22] <xenocons> infosec i guess is the closest relative
[01:30:26] <dbaupp> penetration testing?
[01:30:28] <xenocons> yeh
[01:30:28] <EXetoC> someone give me a job. all I want in return is bandwidth, milk and cookies
[01:30:38] <bjz> student/artist/interested in graphics programming
[01:30:39] <EXetoC> no wait, I think I'll need some electricity to go with that bandwidth
[01:30:52] <xenocons> bjz: nice!
[01:31:08] <dbaupp> EXetoC: I guess a roof/waterproofing would be useful too?
[01:31:23] <steven_is_false> EXetoC: Also ramen noodles?
[01:31:29] <bjz> xenocons: anyway, catch you tonignht â€“ I'm heading out now
[01:32:00] <xenocons> yup! ok see you there
[01:32:53] <EXetoC> dbaupp: nah that ain't necessary
[01:33:01] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Input/output error)
[01:33:20] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[01:34:50] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[01:35:36] *** Quits: ysuzuki (ysuzuki@moz-F333A8C8.st.keio.ac.jp) (Client exited)
[01:37:05] <Sodel_the_V> Is there anyone here who could answer a quick question about search_for_some_kind_of_autorefd_method() in middle/typeck/check/method.rs?
[01:37:12] <strcat> brson: any idea why we have Makefile.in? doesn't seem like autotools are used (it's the same as Makefile)
[01:37:30] <strcat> copy_if_changed ${CFG_SRC_DIR}Makefile.in ./Makefile
[01:37:38] <strcat> they're both in VCS ;\
[01:37:41] <nmatsakis> Sodel_the_V: what's up
[01:38:28] <brson> strcat: Makefile shouldn't be in git
[01:38:40] <strcat> ah
[01:39:39] <strcat> oh it isn't
[01:39:41] <strcat> nvm ;p
[01:40:04] <Sodel_the_V> nmatsakis: In search_for_autosliced_method(), I'm calling search_for_some_kind_of_autorefd_method(). Since I know the mutability of the trait object from the ty_trait, should that mutability be the only member of the mutbls vector?
[01:40:42] <nmatsakis> Sodel_the_V: let me recheck, one sec
[01:41:21] *** Joins: sanxiyn (tinuviel@858F408C.B797260D.EF43EC08.IP)
[01:41:59] <aatch> Can method impl's for generic methods use strong trait bounds?
[01:42:01] <aatch> stringer*
[01:42:05] <aatch> stronger**
[01:42:10] <sanxiyn> r? https://github.com/mozilla/rust/pull/6174
[01:42:28] <dbaupp> aatch: what do you mean?
[01:42:33] <nmatsakis> Sodel_the_V: usually we search for all mutabilties, because we want to allow you to invoke e.g. an &self method on an @mut receiver
[01:42:43] <nmatsakis> Sodel_the_V: I think that is what you want to do
[01:42:51] <aatch> So if the type param is <T:Num> the impl could have <T:Integer> ?
[01:42:59] <nmatsakis> Sodel_the_V: it's up to a later psas in the compiler to check that the mutability is compatible
[01:43:08] <Sodel_the_V> nmatsakis: Ah, alright! Thanks.
[01:43:14] <dbaupp> aatch: err, have you tried it?
[01:43:18] <aatch> nope
[01:43:37] <nmatsakis> Sodel_the_V: one caveat is that that later pass probably isn't handling object types correctly yet...
[01:43:45] <nmatsakis> Sodel_the_V: ...but we'll cross that bridge when we come to it
[01:44:02] *** Joins: rf (rollyfordh@D01F426C.FCA11A6F.2A62C3B1.IP)
[01:44:03] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:44:03] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/kJLPVg
[01:44:03] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:44:26] <sanxiyn> aatch: Is it #5236?
[01:44:29] <Thad> why do I continue to get these errors with build ? http://pastebin.mozilla.org/2367465
[01:44:42] <aatch> I haven't tried it yet
[01:45:20] <brson> Thad: Didn't you switch the target triple to i686-pc-cygwin? that output says i686-pc-mingw32
[01:45:23] <dbaupp> is github down for anyone else?
[01:45:25] <Sodel_the_V> nmatsakis: Indeed. And, I actually did some work today and yesterday in trans/. When I push the commits to GitHub, they should show up the comment list for 5762
[01:45:30] <sanxiyn> dbaupp: It is down for me
[01:45:32] <doomlord_> yes
[01:45:35] <Thad> brson: I've tried both... same error
[01:45:43] <Sodel_the_V> (I rebased a bit though, sorry for the clutter! D: )
[01:45:49] <sanxiyn> https://status.github.com/
[01:45:50] <Thad> brson: tried Clang.. tried GCC ... sme
[01:45:52] <sanxiyn> Major service outage
[01:45:52] <Thad> same
[01:46:00] <nmatsakis> Sodel_the_V: nice, thanks.
[01:46:14] <Sodel_the_V> nmatsakis: No problem, hope it turns out to be useful
[01:46:33] <brson> Thad: have you tried switching those #ifdefs to _WIN32, WIN32, __WIN32_CYGWIN__, etc.?
[01:46:36] *** Quits: pnkfelix|rcirc (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[01:46:42] <dbaupp> sanxiyn, doomlord_: seems to be up again
[01:46:49] <Thad> brson: however... Clang actually gets further into trying to compile LLVM, btw... whereas GCC just does that pastebin output.
[01:47:09] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:47:09] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/KNURXw
[01:47:09] <ghrust> 13rust/06auto 14046a285 15gifnksm: libstd: impl Clone for BigUint/BigInt and replace `copy` with `.clone()`
[01:47:09] <ghrust> 13rust/06auto 14b4bdc3f 15bors: auto merge of #6127 : gifnksm/rust/impl-clone-for-bigint, r=graydon...
[01:47:09] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:47:10] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:47:10] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/jHw6hw
[01:47:10] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:47:19] *** Quits: engla (engla@moz-BFD53D48.selucle.dyn.perspektivbredband.net) (Ping timeout)
[01:47:21] <sanxiyn> brson: I think it is __CYGWIN__
[01:47:23] *** Quits: lmandel (lmandel@2557E599.66715431.D25A875A.IP) (Quit: lmandel)
[01:47:25] <Thad> brson: under CFG_GCCISH_DEF_FLAG ?  or CFG_GCCISH_CFLAGS ??
[01:48:19] <Thad> brson: like this ??  CFG_GCCISH_CFLAGS_i686-pc-cygwin := __CYGWIN__ -Wall -Werror -g -march=i686
[01:48:35] <brson> Thad: in rust_task.h we are probably just using the wrong macro to detect win32
[01:48:51] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[01:48:53] <Thad> probably... looking at rust_task.h then...
[01:51:47] <cmr> Thad: was the email I sent on the list about --llvm-root correct?
[01:52:45] <Thad> brson: should i worry ????  configure: WARNING: mmap() of a fixed address required but not supported
[01:53:48] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[01:54:13] <Thad> brson: doesn't seem to like __CYGWIN__  http://pastebin.mozilla.org/2367467
[01:54:42] <cmr> Thad: what code did you add? that is a strange error
[01:55:21] <Sodel_the_V> nmatsakis: The most recent 3 are the commits of interest. https://github.com/mozilla/rust/issues/5762 I need to break my "rebase to keep the history clean" habit.
[01:55:47] <Thad> cmr: added __CYGWIN__  in platform.mk  under my i686-pc-cygwin configuration  here:  CFG_GCCISH_CFLAGS_i686-pc-cygwin := __CYGWIN__ -Wall -Werror -g -march=i686  
[01:56:00] <sanxiyn> Thad: Isn't that -D__CYGWIN__?
[01:56:04] <sanxiyn> Shouldn't be necessary though
[01:56:07] <cmr> Thad: You want -D__CYGWIN__, but it should be defined for you already
[01:56:30] <Thad> isn't that what CFG_GCCISH_DEF_FLAG is for then ???
[01:56:43] <Thad> -D is defines ??
[01:56:49] <Thad> DEF is defines ?  no ?
[01:57:06] <brson> Thad: I think that mmap warning should not cause any problems. It looks like LLVM only uses MAP_FIXED for address sanitizer, which we don't use
[01:57:22] <cmr> What is the output of "echo | gcc -dM -E -" ? It should list all of the predefined macros
[01:57:25] <nmatsakis> Sodel_the_V: no, rebase is good! :)
[01:57:27] <Thad> brson: ok.
[01:57:37] <cmr> I thought cygwin added __WIN32__
[01:58:23] <Thad> Finally folks are helping me !  Thanks guys !  cmr here you go: http://pastebin.mozilla.org/2367468
[01:59:01] <cmr> Hmm, that's odd.
[01:59:03] <sanxiyn> cmr: It seems that it doesn't
[01:59:12] <cmr> #define __CYGWIN32__ 1
[01:59:17] <Sodel_the_V> nmatsakis: Good! Though, rebasing *public* probably isn't the best habit.
[01:59:19] *** Joins: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu)
[01:59:21] <cmr> And #define __CYGWIN__ 1
[01:59:24] <Thad> #define __CYGWIN32__ 1
[01:59:40] <nmatsakis> Sodel_the_V: eh. till its on incoming, it's fair game ....
[01:59:54] <Sodel_the_V> nmatsakis: Heh, fair enough!
[02:01:59] <sanxiyn> Thad: It seems to me that on Cygwin none of __linux__, __APPLE__, __WIN32__, __FreeBSD__, __ANDROID__ is defined
[02:02:05] <sanxiyn> so RED_ZONE_SIZE is undefined
[02:02:27] <Thad> right ... so... rust_task.h needs that for Cygwin users... 
[02:02:33] *** Joins: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net)
[02:02:47] <sanxiyn> Not sure what it should be
[02:03:33] <cmr> Using whatever the default for windows is should be safe
[02:03:44] <cmr> Why cygwin and not mingw though?
[02:03:46] <Thad> is Cygwin on windows.
[02:03:58] <cmr> Yes
[02:04:14] <Thad> cmr: we want to get Cygwin working ...for POSIX and for happyness for Windows users.
[02:04:23] <cmr> Ok
[02:05:06] <sanxiyn> So try copy-pasting __WIN32__ clauses to __CYGWIN__
[02:06:04] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[02:06:30] <Thad> in rust_task.h  you mean ?
[02:06:37] <Thad> I see the ifdef's
[02:07:01] *** Joins: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp)
[02:09:24] <sanxiyn> Thad: Yes
[02:09:32] <Thad> gotcha
[02:10:04] <aatch> r+? https://github.com/mozilla/rust/pull/6175
[02:10:54] <cmr> Can any joe schmoe r+ or does bors only listen to a few people?
[02:11:06] <sanxiyn> cmr: Only listen to a few
[02:11:13] *** Quits: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu) (Input/output error)
[02:11:17] <sanxiyn> aatch: done
[02:11:34] <aatch> sanxiyn, thank you
[02:11:47] <sanxiyn> Indeed, good idea
[02:12:10] <aatch> given that in the past couple hours 2 people have hit the same problem
[02:12:44] <sanxiyn> aatch: Who is another? (which platform?)
[02:13:09] <aatch> doomlord_, hit it with ios (needs __APPLE__ and arm)
[02:13:15] <sanxiyn> Oh
[02:13:37] <aatch> I guess technically he didn't hit it a few hours ago, but he only mentioned it recently
[02:14:26] <doomlord_> aatch what does this mean
[02:14:59] <doomlord_> (i just tried commenting out those directives to see what else happens .. i suspect that wont be helpful though.. )
[02:15:20] <doomlord_> i might post some questions in the apple iOS developper forums
[02:15:25] <aatch> doomlord_, not much. I just added a check after the RED_ZONE_SIZE defs that throws an error
[02:15:43] <aatch> so you don't get the errors some random file
[02:15:52] <cmr> Isn't rust going to need obj-c ffi before rust on ios is useful?
[02:16:09] <aatch> cmr, objective-c can call C code
[02:16:18] <doomlord_> C as the universal interface
[02:16:22] <aatch> and rust can export C abi code
[02:16:35] <cmr> but what about the other way around?
[02:16:39] <cmr> (I'm not familiar with ios)
[02:16:44] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[02:16:45] <aatch> Objective-C is a superset of C
[02:17:05] <doomlord_> i dont expect to be able to use iOS features; only GL ES which is C functions.. plus various custom crossplatform C wrappers
[02:17:09] <aatch> (As in all C code is valid ObjC code)
[02:17:19] *** Joins: int3_ (int3_@moz-432A7121.public.wayport.net)
[02:17:19] <doomlord_> i would really like to be able to do a game engine in Rust. 
[02:17:21] <cmr> ah
[02:17:31] <Thad> sanxiyn: OK, getting further guys with REDZONE for Cygwin.. added the ifdef for it and now get this next error during make... http://pastebin.mozilla.org/2367514
[02:17:41] <sanxiyn> cmr: For nicer experience some work will be needed
[02:17:57] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.0)
[02:18:01] <sanxiyn> cmr: Thankfully Objective-C is more reflection friendly, so won't be as difficult as getting C++ binding
[02:18:23] <nmatsakis> brson: what is the status on the snapshot, btw? I haven't been following
[02:18:44] <doomlord_> r.e. that LOAD macro , i simply did an #ifdef defined(__APPLE__) && defined(__arm__) .... #else ../* the existing one*/
[02:18:47] <cmr> Thad: What versino of gcc is being used?
[02:18:49] <strcat> brson: https://github.com/mozilla/rust/pull/6176 r?
[02:18:54] <Thad> cmr: 4.5.3
[02:18:59] <sanxiyn> Thad: Eh... "unterminated #ifndef"? That is bad.
[02:19:00] <aatch> Thad, you are missing an #endif somewhere
[02:19:26] <nmatsakis> strcat: ok, I found the first legitimately incorrect use of @mut since I fixed the checks...
[02:19:27] <Thad> down boys... scroll down....
[02:19:38] <doomlord_> i'm told on #osdev that "apple use an ancient fork of the binutils assembler" - so these directives are simply *missing* 
[02:19:45] <nmatsakis> strcat: but I haven't gotten to stage2 yet, which is when tings should get interesting :)
[02:20:02] <sanxiyn> doomlord_: Argh
[02:20:05] <nmatsakis> strcat: ...since I know you were predicting calamity :)
[02:20:09] <Thad> oh wait... there is another ifdef undefined ?  looking...
[02:20:20] <sanxiyn> doomlord_: Doesn't Apple also have LLVM assembler?
[02:20:32] <sanxiyn> (That is, it's why binutils is ancient)
[02:20:36] * nmatsakis g'night
[02:20:44] <strcat> nmatsakis: \o
[02:20:46] <doomlord_> i'm a bit hazy on exactly what I am or should be invoking, there are many tools lying around on the mac
[02:20:48] <brson> nmatsakis: I still haven't got a successful linux snapshot though I've done several builds. Another one is running now
[02:21:34] <sanxiyn> brson: Thanks in advance... new snapshot will be great
[02:21:40] <Thad> do those ifdef's HAVE to be together ??  or can I break them up against APPLE, linux, CYGWIN, etc... ?
[02:21:50] <Thad> to make it easier to read ?
[02:21:59] <sanxiyn> Thad: You can break them up.
[02:22:00] <cmr> Breaking them up would probably be helpful
[02:22:10] <aatch> as long as it still works at the end
[02:22:13] <doomlord_> i've documented what i'm trying in an issue "some sort of IOS support" - i got info from stackoverflow on how to compile iOS programs from the comandline and there were tools called arm-apple-darwin-llvm-g++-4.2 etc that it suggested i should be using. Quite why these then differ from what clang/etc do i dont know
[02:22:14] <Thad> lolol... agreed... ok
[02:22:36] <brson> strcat: what optimizations does the linker do?
[02:22:52] <sanxiyn> doomlord_: Well, it is a different thing, so it differs...
[02:23:08] <strcat> brson: I think it mostly just sorts them and uses smarter lookup tables
[02:23:23] <strcat> brson: there's only -O0 vs -O#, no levels
[02:23:42] <strcat> oh I guess for sorting you need --sort-common, but that's speed vs size tradeoff
[02:24:10] <doomlord_> i'm attempting to just comment out the missing directives "and see what happens" ... 
[02:26:03] <sanxiyn> doomlord_: Re: directives .save, .movsp, etc.
[02:26:22] <sanxiyn> Those were added to get unwinding working on ARM Android
[02:26:27] <sanxiyn> Should be safe to comment out
[02:26:37] <sanxiyn> (except that unwinding won't work)
[02:27:01] <doomlord_> I guess to actually get this working i'll need to make an extra arch/... 
[02:27:10] <doomlord_> but i can just experiment here for now
[02:27:51] <doomlord_> now i've got some more syntax it doesn't accept:   ldr r7,=345  ldr r1,=my_array ... that syntax looks strange to me, whats it supposed to do
[02:28:12] <sanxiyn> doomlord_: You also probably want to disable segmented stack for the initial port
[02:28:38] <doomlord_> thats if i even get that far :)
[02:29:39] *** Joins: igl (igl@moz-55F32FCA.adsl.alicedsl.de)
[02:29:48] *** Quits: igl1 (igl@moz-8F6E38ED.adsl.alicedsl.de) (Ping timeout)
[02:29:49] *** Quits: cdidd (cdidd@moz-4A308F5.broadband.corbina.ru) (Input/output error)
[02:29:53] <sanxiyn> ARM iOS port without segmented stack and without unwinding will still be useful. After all, that's how ARM Android port was just 2 months ago
[02:30:30] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[02:31:04] <doomlord_> sure
[02:31:07] <sanxiyn> (I am also interested in ARM Linux port, say Raspberry Pi)
[02:31:30] <strcat> brson: https://lwn.net/Articles/192624/ there's an article on it
[02:31:32] <doomlord_> ubuntu arm aswell
[02:31:37] <strcat> brson: their actual docs are really bad ;p
[02:31:44] <sanxiyn> doomlord: Well Ubuntu is Linux
[02:32:06] <sanxiyn> strcat: Yeah I remember that
[02:32:15] <sanxiyn> IIRC it was all to speed up OpenOffice.org?
[02:32:35] <brson> strcat: thanks
[02:32:36] *** Joins: a_m0d|home (a_m0d@moz-9F925EFA.hm.shawcable.net)
[02:32:56] <strcat> sanxiyn: I think it helps a lot with long symbol names, like from C++ (or rust) where they're mangled
[02:33:01] <cmr> I've generally enjoyed the papers Ulrich has written
[02:33:10] *** Quits: igl (igl@moz-55F32FCA.adsl.alicedsl.de) (Ping timeout)
[02:33:14] <cmr> There's a blog series by Ian... Taylor? that explains a lot of linking stuff
[02:33:18] <cmr> (the author of gold)
[02:33:24] <sanxiyn> cmr: Ian Lance Taylor
[02:33:35] <cmr> go memory!
[02:33:44] *** Joins: igl (igl@moz-A7CADDAB.adsl.alicedsl.de)
[02:33:54] <Thad> sanxiyn: moving right along !  Next error ! :)  http://pastebin.mozilla.org/2367569
[02:33:58] <strcat> ian lance taylor wrote gold (google linker)
[02:34:05] <strcat> I'm not sure if bfd (the gnu one) actually has LTO at all
[02:34:17] <strcat> they're both part of gcc/binutils
[02:34:30] <sanxiyn> Thad: Ugh
[02:35:18] <sanxiyn> Thad: If you go there, there is if defined(__WIN32__)
[02:35:21] <cmr> Thad: Add -D__WIN32__ to wherever in the makefile that needs to go
[02:35:24] <sanxiyn> Expand to || CYGWIN
[02:35:29] *** Quits: igl (igl@moz-A7CADDAB.adsl.alicedsl.de) (Ping timeout)
[02:36:06] <Thad> it's already in the platform.mk as Brson suggested:::  CFG_GCCISH_CFLAGS_i686-pc-cygwin := -D__CYGWIN__ -Wall -Werror -g -march=i686
[02:36:26] <cmr> __CYGWIN__ is defined by the compiler, you don't need to add it
[02:36:43] <Thad> don't need to add it WHERE
[02:36:45] <Thad> ?
[02:37:06] <sanxiyn> Thad: You don't need to add to GCCISH_CFLAGS
[02:37:09] <Thad> k
[02:37:23] <Thad> Gone.  now what ?
[02:38:06] <sanxiyn> Thad: Open rust_builtin.cpp, go to offending line, scroll up a bit, and add to #if
[02:38:43] <sanxiyn> GitHub down again
[02:39:07] <cmr> According to this stack overflow post from 2009 _WIN32 *was* defined by Cygwin's GCC
[02:39:07] *** Joins: igl (igl@moz-7CBA5F8F.adsl.alicedsl.de)
[02:39:22] <cmr> Which was further qualified in 2011 by "Cygwin GCC only defines _WIN32 when compiling a Win32 application (which is not a Cygwin app), which effectively makes it act as a MinGW compiler, so that makes _WIN32 a nice OS check"
[02:39:52] <cmr> Is cygwin actually its own platform?
[02:39:56] <doomlord_> i'm told the =blah is constant genertaion that the apple assembler lacks :( but i'm asking around for alternatives on #osdev
[02:40:05] <sanxiyn> cmr: I think so
[02:40:10] <Thad> Thad already put in the Cygwin identifier's in the /configure file already :)  called Thad's Cygwin identifiers :)
[02:40:21] <Thad> and you have them :)
[02:40:21] <sanxiyn> cmr: Is the post referring to -mno-cygwin?
[02:40:28] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Quit: leaving)
[02:40:29] <cmr> http://stackoverflow.com/a/430780
[02:40:55] *** Quits: igl (igl@moz-7CBA5F8F.adsl.alicedsl.de) (Ping timeout)
[02:40:59] <Thad> cmr: sort of ... probably for this exercise of Rust Windows users...it will be.
[02:41:41] <sanxiyn> doomlord_: You are running llc, right?
[02:41:48] <Thad> do I give it the same <sys/time.h>  ??  as __WIN32__ ?
[02:42:02] <cmr> Thad: line 451 of rust_builtin.cpp should be #if defined(__WIN32__)|| defined(__CYGWIN__)
[02:42:02] *** Joins: igl (igl@moz-78673C45.adsl.alicedsl.de)
[02:42:17] <cmr> You're probably going to have to do that in a bunch of places as more errors come up, but maybe not
[02:42:25] *** Joins: jfredett (jfredett@moz-C01C350.bstnma.fios.verizon.net)
[02:42:36] <Thad> || is OR , gotcha
[02:42:54] *** Quits: rf (rollyfordh@D01F426C.FCA11A6F.2A62C3B1.IP) (Ping timeout)
[02:43:18] <sanxiyn> doomlord_: If you are using llc, I think you should entirely avoid assembler
[02:43:23] <sanxiyn> Try llc -filetype=obj
[02:43:31] <sanxiyn> LLVM can directly write object files
[02:43:45] *** Quits: igl (igl@moz-78673C45.adsl.alicedsl.de) (Ping timeout)
[02:43:55] <sanxiyn> (which Android port does not use, because object file writer is only mature for iOS, IIRC)
[02:43:56] *** Quits: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP) (Ping timeout)
[02:43:59] <Thad> sanxiyn: Next ! :)  http://pastebin.mozilla.org/2367591
[02:44:34] <doomlord_> sanxiyn, at the minute i'm trying to get rustc to compile with arm-apple-darwin support - the asm in questiion is the rust runtime
[02:44:51] <cmr> Thad: Same thing with || defined(__CYGWIN__) at line 42 of sp.h
[02:44:56] <sanxiyn> doomlord_: Ah
[02:45:13] <kalenedrael> when using the rust FFI, how do you tell rust that a particular foreign function initializes a variable passed in as a pointer?
[02:45:18] *** Joins: igl (igl@moz-220BEF13.adsl.alicedsl.de)
[02:45:18] <sanxiyn> doomlord_: You probably need to rewrite that part entirely so that Apple tools can assemble it :(
[02:45:21] <sanxiyn> No way around that
[02:45:27] <doomlord_> yeah its looking that way
[02:45:45] <doomlord_> crash course in ARM assembly. not done ASM since MIPS..
[02:45:58] <kalenedrael> e.g. 'let foo; foolib::init(&foo);'
[02:46:52] <sanxiyn> kalenedrael: You get uninitialized variable error?
[02:46:53] <kalenedrael> which gives an error 'use of possibly uninitialized variable: `foo`'
[02:46:55] <kalenedrael> yes
[02:47:06] <sanxiyn> Hm, interesting case, maybe file an issue
[02:47:11] <sanxiyn> You can just initialize it though
[02:47:38] <kalenedrael> foo is a big struct. I do not want to write a static initializer for it, that is what the function is for :P
[02:48:03] <aatch> try let foo : T = core::unstable::intrinsic::init()
[02:48:17] *** Quits: igl (igl@moz-220BEF13.adsl.alicedsl.de) (Ping timeout)
[02:48:19] <sanxiyn> aatch: Eh... what is it?!
[02:48:32] *** Joins: igl (igl@moz-4C43D91E.adsl.alicedsl.de)
[02:48:35] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[02:48:46] <aatch> Its an intrinisic function that initialises a value of the correct type
[02:48:59] <aatch> I think it does it with all zeroes
[02:49:13] <aatch> but that's not a guarantee
[02:49:25] <kalenedrael> does not exist
[02:49:30] <kalenedrael> (I am using rust 0.6)
[02:49:44] <sanxiyn> Yeah it seems it has moved since 0.6
[02:49:55] <aatch> Grr
[02:49:56] <steven_is_false> rusti: let _ = core::unstable::intrinsic::init();
[02:49:58] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/eRAh
[02:50:03] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[02:50:03] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/KNURXw
[02:50:03] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:50:05] <sanxiyn> I think it was in 0.6 somewhere; just different place
[02:51:07] <steven_is_false> cast::transmute ([0u8, ..core::size_of::<T>]?
[02:51:34] <Jeaye> steven_is_false: Did you get q3 building?
[02:51:42] <kalenedrael> ew
[02:51:47] *** Quits: zz_kimundi (kimundi@moz-ADB574EC.dip0.t-ipconnect.de) (Ping timeout)
[02:51:55] <steven_is_false> Jeaye: Not yet but I haven't tried recently.
[02:52:09] <sanxiyn> aatch: Yes, intrinsic::init zeroes (by using LLVM's special zeroinitializer)
[02:52:13] *** Quits: igl (igl@moz-4C43D91E.adsl.alicedsl.de) (Ping timeout)
[02:52:16] <kalenedrael> I thought .. did not accept a non-constant size
[02:52:19] <sanxiyn> And it seems that it is actually guaranteed to do so
[02:52:21] <Jeaye> Ok. Next time you do, feel free to PM or highlight me with questions.
[02:52:27] <aatch> rusti: extern "rust-intrinsic" { fn init<T>() -> T } let a:int = init()
[02:52:28] <rusti> foo.rs:5:53: 5:54 error: expected `;` but found `}`
[02:52:28] <rusti> foo.rs:5          extern "rust-intrinsic" { fn init<T>() -> T } let a:int = init()
[02:52:28] <rusti>                                                               ^
[02:52:34] <aatch> rusti: extern "rust-intrinsic" { fn init<T>() -> T }; let a:int = init()
[02:52:35] <rusti> foo.rs:5:53: 5:54 error: expected `;` but found `}`
[02:52:35] <rusti> foo.rs:5          extern "rust-intrinsic" { fn init<T>() -> T }; let a:int = init()
[02:52:35] <rusti>                                                               ^
[02:52:46] <aatch> rusti: extern "rust-intrinsic" { fn init<T>() -> T; } let a:int = init()
[02:52:46] <Thad> sanxiyn: hmm... is this legal ??  #ifndef __WIN32__  || defined(__CYGWIN__)
[02:52:46] <rusti> foo.rs:6:4: 6:5 error: expected `;` but found `}`
[02:52:46] <rusti> foo.rs:6     });
[02:52:46] <rusti>              ^
[02:52:56] <sanxiyn> Thad: No, I don't think so
[02:52:57] <Jeaye> Thad: Nope.
[02:53:00] <Jeaye> It's not
[02:53:01] <dbaupp> steven_is_false: that won't work because core::size_of() isn't a constant
[02:53:01] <sanxiyn> Thad: Switch to defined
[02:53:04] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[02:53:04] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/_JDJhw
[02:53:04] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:53:07] *** Joins: ssbr_ (scorchsabe@A9D9D38C.B6F034AC.72A31D6.IP)
[02:53:18] <aatch> rusti: extern "rust-intrinsic" { fn init<T>() -> T; }; let a:int = init()
[02:53:20] <rusti> foo.rs:6:4: 6:5 error: expected `;` but found `}`
[02:53:20] <rusti> foo.rs:6     });
[02:53:20] <rusti>              ^
[02:53:21] <sanxiyn> aatch: https://github.com/mozilla/rust/issues/4204 is a proposal to add uninit
[02:53:25] <aatch> rusti: extern "rust-intrinsic" { fn init<T>() -> T; }; let a:int = init();
[02:53:27] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/TKFK
[02:53:30] <steven_is_false> dbaupp: Oh right! I forgot it was a function. Yeah we'd need associated constants to do that.
[02:53:53] <strcat> or eval!() ;p
[02:53:56] *** Quits: ssbr (scorchsabe@A9D9D38C.B6F034AC.72A31D6.IP) (Ping timeout)
[02:54:06] <Thad> sanxiyn: next then !  http://pastebin.mozilla.org/2367603
[02:54:24] <dbaupp> strcat: speaking of eval, would it be possible to have an incoming-rusti?
[02:54:32] <aatch> rusti: extern "rust-intrinsic" { fn init<T>() -> T; }; let a:int = unsafe {init()}; a
[02:54:32] <strcat> dbaupp: rusti uses incoming now
[02:54:33] <rusti> 0
[02:54:41] <strcat> dbaupp: I set up automated daily builds that it uses
[02:54:46] <kalenedrael> so... file a bug?
[02:54:51] *** Joins: zz_kimundi (kimundi@moz-9D3FEC48.dip0.t-ipconnect.de)
[02:54:52] <strcat> dbaupp: http://pkgbuild.com/~thestinger/repo/x86_64/
[02:54:53] <dbaupp> strcat: oh, nice
[02:54:57] <aatch> Goddamit
[02:55:00] <cmr> Thad: #if !defined(__WIN32__) || !defined(__CYGWIN__), line 12
[02:55:02] <sanxiyn> kalenedrael: I think it is same as #4204
[02:55:02] <strcat> (it's an arch package)
[02:55:05] <sanxiyn> kalenedrael: Comment on that?
[02:55:15] <Thad> cmr: tks !
[02:55:16] *** zz_kimundi is now known as kimundi
[02:55:17] <aatch> rusti: let a:int = unsafe {core::unstable::intrinsics::init()}; a
[02:55:19] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/MDiV
[02:55:27] *** Joins: igl (igl@moz-9254A802.adsl.alicedsl.de)
[02:55:28] <sanxiyn> It is about adding "uninit" intrinsic that tells compiler it is initialized, but doing nothing
[02:55:37] <dbaupp> rusti: #[packed] struct A { a: u8, b: u8 }; sys::size_of::<A>()
[02:55:37] <kalenedrael> oh
[02:55:38] <rusti> 2
[02:55:42] <aatch> rusti: let a:int = core::unstable::intrinsics::init(); a
[02:55:43] <rusti> 0
[02:55:49] <dbaupp> yay :D thanks strcat
[02:55:55] <aatch> instrinsic -> instrinsics
[02:56:01] <sanxiyn> dbaupp: packed! :)
[02:56:04] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[02:56:04] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/_JDJhw
[02:56:04] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:56:05] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[02:56:05] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/2q9acg
[02:56:05] <ghrust> 13rust/06auto 1484e97d5 15Sangeun Kim: I modified the doc of from_elem, from_fn, I think it returns an owned vector
[02:56:05] <ghrust> 13rust/06auto 14a64aa28 15bors: auto merge of #6173 : sammykim/rust/doc-vec, r=yichoi...
[02:56:05] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:56:10] <aatch> rusti: let a:int = init(); a
[02:56:12] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/ccCT
[02:56:14] <sanxiyn> sammykim: Congrats
[02:56:15] <kalenedrael> never mind, rusti::init() will work for now. efficiency is not a primary concern here
[02:56:23] <dbaupp> sanxiyn: :)
[02:56:51] <strcat> dbaupp: http://ix.io/5rj just this in a cron job on arch's build server ;p
[02:57:31] <dbaupp> strcat: does that mean that arch users can get a nightly build via the package manager?
[02:57:35] <Thad> Hmmm.. same diff Error : http://pastebin.mozilla.org/2367623
[02:57:35] <strcat> dbaupp: yeah
[02:58:01] <strcat> dbaupp: http://ix.io/5rk
[02:58:07] <cmr> Thad: probably messed up the change, what is line 12?
[02:58:12] <Thad> my line 12 of that file is: #if !defined(__WIN32__) || !defined(__CYGWIN__)
[02:58:17] <cmr> hm
[02:58:18] <strcat> dbaupp: I already have 0.6 in the official repos :)
[02:58:30] <cmr> sanxiyn: is that right?
[02:58:32] <doomlord_> i have hacks that at least allow it to *assemble* the runtime sources, as for whether or not they'll actually *work* i dont know ... its continuing to build now at least
[02:58:39] <dbaupp> strcat: nice :)
[02:58:53] <Thad> cmr: they had ifn before
[02:59:02] *** Quits: igl (igl@moz-9254A802.adsl.alicedsl.de) (Ping timeout)
[02:59:21] <Thad> #ifndef __WIN32__
[02:59:54] <sanxiyn> Thad: You want && there
[02:59:58] <fread2281> is there some kind of variable length integer encoding in std/core?
[03:00:22] *** Joins: igl (igl@moz-E96C322.adsl.alicedsl.de)
[03:00:32] <kalenedrael> well this mythical init() function is hard to find
[03:00:37] <Thad> #if !defined(__WIN32__) && !defined(__CYGWIN__)   ???
[03:00:39] <aatch> http://static.rust-lang.org/doc/std/bigint.html
[03:00:41] <kalenedrael> what is it actually called in rust 0.6?
[03:01:08] <sanxiyn> aatch: Probably not that
[03:01:15] <sanxiyn> I think fread2281 is looking for something like VLQ
[03:01:31] <strcat> kalenedrael: because it's not a library function
[03:01:34] <aatch> kalenedrael, try core::unstable::intrinsics::init()
[03:01:36] *** Joins: eholk (eholk@moz-68894880.hfc.comcastbusiness.net)
[03:01:55] <kalenedrael> says unresolved name
[03:02:02] *** Quits: a_m0d|home (a_m0d@moz-9F925EFA.hm.shawcable.net) (Ping timeout)
[03:02:12] <strcat> rusti: #[abi = "rust-intrinsic"] extern "rust-intrinsic" mod rusti { fn init<T>() -> T; }; let x: int = rusti::init();
[03:02:13] *** Quits: igl (igl@moz-E96C322.adsl.alicedsl.de) (Ping timeout)
[03:02:13] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/VWJX
[03:02:24] <strcat> rusti: #[abi = "rust-intrinsic"] extern "rust-intrinsic" mod rusti { fn init<T>() -> T; }; unsafe { let x: int = rusti::init(); }
[03:02:25] <rusti> line longer than 100 columns, pastebinned: http://sprunge.us/FMbT
[03:02:32] <strcat> rusti: #[abi = "rust-intrinsic"] extern "rust-intrinsic" mod rusti { fn init<T>() -> T; }; unsafe { let x: int = rusti::init(); }; x
[03:02:33] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/aFIN
[03:02:36] <aatch> I really? For intrinsics, with the 's'?
[03:02:39] * strcat is silly
[03:02:40] <aatch> rusti: let a:int = core::unstable::intrinsics::init(); a
[03:02:41] <rusti> 0
[03:02:45] <aatch> Because that works
[03:02:46] <fread2281> I'm looking for something for serialization
[03:02:47] *** Joins: igl (igl@moz-319A69FA.adsl.alicedsl.de)
[03:02:49] <aatch> rusti: let a:int = core::unstable::intrinsic::init(); a
[03:02:50] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/jXWa
[03:02:53] <strcat> aatch: hmm, dunno then
[03:02:57] <aatch> but that doesn't
[03:03:00] *** Joins: akashj87 (akash@8FF5A4C9.CC3AFE9E.35E3DDC8.IP)
[03:03:12] <kalenedrael> yeah, with the s
[03:03:26] <kalenedrael> (it also does not work without the s :P)
[03:03:55] <aatch> it's in 0.6
[03:04:03] <aatch> https://github.com/mozilla/rust/blob/release-0.6/src/libcore/unstable/intrinsics.rs
[03:04:06] <aatch> same place too
[03:04:09] <aatch> same exact line
[03:04:29] <sanxiyn> Argh what's going on?
[03:05:05] <aatch> kalenedrael, are you sure that you're running 0.6?
[03:05:06] <kalenedrael> oh. it turns out if you 'use core::*', using anything from core with the 'core::' does not work
[03:05:12] <kalenedrael> derp
[03:05:16] <aatch> ok
[03:05:23] <aatch> That would do it then.
[03:05:24] <cmr> that seems like a bug
[03:05:57] <aatch> cmr, agreed
[03:06:12] *** Quits: igl (igl@moz-319A69FA.adsl.alicedsl.de) (Ping timeout)
[03:06:33] <cmr> nmatsakis said at one point that the name resolution algorithm is pretty broken with foo::* imports, perhaps this is an example of that
[03:06:42] *** Joins: igl (igl@moz-2854B925.adsl.alicedsl.de)
[03:07:18] <sanxiyn> lunch
[03:07:20] *** Quits: sanxiyn (tinuviel@858F408C.B797260D.EF43EC08.IP) (Quit: Leaving)
[03:08:33] <aatch> I agree with sanxiyn
[03:09:33] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Input/output error)
[03:11:08] *** Quits: igl (igl@moz-2854B925.adsl.alicedsl.de) (Ping timeout)
[03:11:17] *** Joins: igl (igl@moz-F8E1135F.adsl.alicedsl.de)
[03:12:32] <Thad> next error ! http://pastebin.mozilla.org/2367651 
[03:13:23] <Thad> and my line 30 on uv.h looks like this: #if defined _WIN32 || defined __CYGWIN__
[03:14:12] <kalenedrael> is there any point in declaring foreign functions as taking a *mut?
[03:14:31] <kalenedrael> or does rust assume nothing about *-pointers in general
[03:14:44] *** Joins: igl1 (igl@moz-D4203F57.adsl.alicedsl.de)
[03:14:51] <strcat> kalenedrael: you should use *mut if it modifies it
[03:14:53] *** Quits: igl (igl@moz-F8E1135F.adsl.alicedsl.de) (Ping timeout)
[03:14:55] <kalenedrael> ok
[03:15:10] <aatch> I don't think rust assumes anything about *-ptrs, but it's good style have it anyway
[03:15:25] <kalenedrael> yeah, that is what I have been doing, it was mostly about style
[03:15:30] <strcat> it doesn't do any alias analysis atm but in the future it could still have C-like rules for * pointers
[03:15:51] <aatch> same with *const (though I think that actually adds info to the codegen)
[03:16:02] <strcat> *const isn't needed
[03:16:04] <cmr> Thad: this seems to be a problem with cygwin itself, or maybe libuv
[03:16:22] <strcat> aatch: *const is just to mirror &const
[03:16:32] <aatch> fair enough
[03:16:35] <strcat> which means read-only through that reference, but not immutable
[03:17:30] <kalenedrael> using *mut causes some issues with a destructor though
[03:18:01] <Thad> cmr: hmm, maybe there needs to be a uv-cygwin.h ??  under /src/libuv/include/uv-private ?
[03:18:12] <strcat> kalenedrael: yeah finalize should use &mut self
[03:18:18] <strcat> or self by-value
[03:18:25] <kalenedrael> but it doesn't...?
[03:18:30] <cmr> Thad: no, on further inspection it seems cygwin calls pthread_barrier_t just barrier_t
[03:18:31] <Thad> cmr: it's using uv-unix.h it seems in my pastebin
[03:18:32] <strcat> kalenedrael: it doesn't right now, it's a bug
[03:18:34] <cmr> still looking though
[03:18:35] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[03:18:35] <kalenedrael> ok
[03:18:37] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[03:18:53] <kalenedrael> is there a workaround?
[03:18:57] <strcat> kalenedrael: you could cast::transmute
[03:19:02] <cmr> Thad: You might add an #if defined(__CYGWIN__) #include "uv-cygwin.h" #endif
[03:19:09] <cmr> Thad: like uv-unix.h does for android
[03:19:28] <kalenedrael> lool.
[03:19:29] <cmr> In fact, it looks like uv-android.h has everything you need in it.
[03:19:36] <strcat> kalenedrael: https://github.com/thestinger/rust-gmp/blob/master/gmp.rs#L154 like that
[03:19:45] <strcat> kalenedrael: ugly workaround :(
[03:19:50] *** Quits: int3_ (int3_@moz-432A7121.public.wayport.net) (Client exited)
[03:19:54] *** Joins: rf (rollyfordh@D01F426C.FCA11A6F.2A62C3B1.IP)
[03:19:56] <kalenedrael> yes, that is exactly what I just did
[03:19:59] <kalenedrael> and yes, it sucks
[03:20:08] <cmr> Would have to ask libuv people for the "correct" solution
[03:20:49] <cmr> http://cygwin.com/cygwin-api/compatibility.html
[03:21:15] <cmr> Thad: Cygwin doesn't implement barriers at all, nevermind.
[03:21:19] <cmr> Not sure how to work around that
[03:21:29] <Thad> hmm
[03:22:09] <Thad> barrier was not declared in this scope.... ok.. I don't NEED a barrier says cmr ! :)
[03:22:31] <cmr> Thad: if it's possible, you might just disable the libuv bindings
[03:22:33] <cmr> for now
[03:22:41] <Thad> no idea ho
[03:22:49] <cmr> me neither :)
[03:23:14] <Thad> lol, sorry your not a ho. whore. ass. but instead a helpful person.
[03:25:24] *** Joins: igl (igl@moz-C8B49370.adsl.alicedsl.de)
[03:26:11] *** Quits: igl1 (igl@moz-D4203F57.adsl.alicedsl.de) (Ping timeout)
[03:26:33] *** Joins: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu)
[03:26:36] *** Quits: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu) (Client exited)
[03:26:37] *** Joins: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu)
[03:27:40] *** Joins: catpigger (catpig@moz-AE054533.dip0.t-ipconnect.de)
[03:29:03] *** Quits: catpig (catpig@moz-49BBE43B.dip0.t-ipconnect.de) (Ping timeout)
[03:31:06] *** Joins: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu)
[03:31:26] *** Quits: igl (igl@moz-C8B49370.adsl.alicedsl.de) (Ping timeout)
[03:34:56] *** Joins: brson (brson@E9CDE21E.991753BB.CA4D1600.IP)
[03:34:56] *** ChanServ sets mode: +o brson
[03:35:30] *** Joins: a_m0d|home (a_m0d@moz-9F925EFA.hm.shawcable.net)
[03:36:30] <bjz_> brson: I rebased my commit after a merge failure with bors. Unfortunately that zapped the history of the r+ Should I just have a merge commit in the future?
[03:36:39] *** Joins: nejucomo (nejucomo@CB37EA37.DA00262B.6157E88D.IP)
[03:36:50] <bjz_> brson: A re-r+ would be super too: https://github.com/mozilla/rust/pull/6151
[03:36:53] <brson> bjz_: either way is fine
[03:37:09] <bjz_> brson: (pcwalton did it before)
[03:37:24] <strcat> bjz_: github can actually save the line comments after a rebase
[03:37:29] <kemurphy> so, i have a long-running rust process that had a bunch of tasks queued up in a task pool. it's still running and doesn't not appear to be making more progress; is there any way i can prod it without killing it to tell me whether any thread pool tasks are still running?
[03:37:37] <strcat> bjz_: the fact that the commit comments are lost is just a github limitation
[03:37:38] <bjz_> strcat: didn't seem to :(
[03:37:52] <strcat> bjz_: were they on lines, or the commit itself?
[03:38:00] <bjz_> on the commit
[03:38:00] <strcat> it only keeps the ones for specific lines
[03:38:04] <bjz_> mmk
[03:38:20] <cmr> kemurphy: attaching to it with perf or strace and seeing if it does anything for a bit?
[03:38:27] <cmr> or maybe gdb, if you know what to look for (I don't)
[03:38:47] *** Joins: dymk (dymk@44EEE21C.A6E21E6E.5E500FC7.IP)
[03:39:23] <dymk> alright, found why rustpkg wasn't building correctly: looks like make on windows crashes before it gets to building stage3, and stage2 packages are copied over instead
[03:39:48] *** Joins: Erik (Erik-S@moz-252DBA2.hsd1.co.comcast.net)
[03:41:18] <bjz_> brson: cheers
[03:42:01] <bjz_> Erik: so 3.0f as int causes a re-calculation?
[03:42:11] <Erik> It causes a calculation, yes
[03:42:38] <Erik> On x86 there is a floating point convert-to-int op
[03:42:51] <bjz_> Erik: and I'm guessing 3 as float does too?
[03:43:10] <Erik> Yes
[03:43:36] <Erik> It might do integer ops, then cast the rusult to floating point
[03:43:51] <bjz_> If that's a compile-time literal, can that be optimised out?
[03:44:17] <bjz_> ie. fn foo() -> float { 3 as float }
[03:44:18] <Erik> Yes, it can be
[03:44:24] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[03:44:31] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[03:44:37] <bjz_> Erik: but I guess you don't know if rust does it :P
[03:44:40] <Erik> I don't know if LLVM does that optimization, of course
[03:45:01] *** Quits: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net) (Ping timeout)
[03:45:09] <Erik> Converting f32 to/from f64 is also not quite free
[03:45:21] <Erik> probably one floating point op, though I'm not sure
[03:45:23] <bjz_> brson: any idea if rust/llvm optimises out casting compile time literals?
[03:45:34] <kemurphy> cmr: ah yes, i was thinking the gdb route but strace would also be good
[03:45:54] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:45:59] <bjz_> Erik: I do that in lmath quite a bit, to allow for generic code. that's why I'm interested
[03:46:07] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:46:43] <Erik> There are a lot of places where int/float matters
[03:47:08] <Erik> Like  5.0f32 + 5
[03:48:08] <aatch> LLVM does constant folding where it can
[03:50:12] <brson> bjz_: I can only guess, and I guess yes
[03:50:22] <bjz_> :)
[03:50:39] <cmr> bjz_: wouldn't it be pretty easy to check?
[03:50:44] *** Joins: enticeing (user@40584768.29B601FE.5037098C.IP)
[03:50:49] <enticeing> hello all
[03:50:54] <bjz_> hoy
[03:51:07] <enticeing> okay, i have a few questions about libraries and such
[03:51:32] <cmr> rustc --emit-llvm to check if rust does it, and llc to check if llvm does it (would need to read the disassembly)
[03:51:46] <enticeing> say i wanted to play around with rust-xlib, where should i put it, and how exactly should i link to it?
[03:52:05] <enticeing> i've gotten as far as declaring it as `extern mod xlib;`
[03:52:11] <aatch> cmr, actually, you can do rustc -O{0,1,2,3} --emit-llvm -S to see what LLVM does
[03:52:18] <cmr> Fancy!
[03:52:37] <aatch> Well maybe not exactly {0,1,2,3}, but you know what I mean
[03:52:50] <aatch> enticeing, any reason why you're using xlib?
[03:53:04] <aatch> Because I've been working on an xcb binding
[03:53:05] <brson> enticeing: use the -L flag to rustc to tell it where to look for your xlib crate
[03:53:10] <enticeing> well, i have a toy window manager written in Go, that i thought i'd port to rust
[03:53:25] <enticeing> aatch: as an aside, the Go code does use xcb, so i'd be happy to take a look at that for you :P
[03:53:37] <enticeing> brson: i am doing that
[03:53:47] <aatch> https://github.com/Aatch/rust-xcb
[03:54:07] <enticeing> also, how should i structure the directory for a binary?
[03:54:13] <enticeing> should i use a seperate .rc or what?
[03:54:25] <aatch> enticeing, you can do whatever.
[03:54:30] <aatch> Rust is pretty free-form
[03:54:50] <enticeing> right now i'm just sticking #[link and whatever in with main.rs
[03:54:52] <brson> eventually there will be a standard way to do this stuff with rustpkg
[03:54:56] <aatch> As long as rustc can find all the files properly
[03:55:05] <enticeing> aatch: i love you! examples! rust-xlib is very ... bare
[03:55:25] <aatch> I'm pretty sure those examples work
[03:55:29] <cmr> heh
[03:55:39] <aatch> If not it'll be a minor adjustment
[03:55:51] <enticeing> okay, also
[03:55:57] <aatch> autogenerating wrapping code isn't the most fun thing in the world
[03:56:02] <brson> aatch: that looks really nice
[03:56:10] <brson> *rust-xcb
[03:56:16] <enticeing> should i just clone it into the working directory, then compile that and leave it there?
[03:56:38] * aatch just noticed that he committed a binary
[03:56:39] <enticeing> and then just -L rust-xcb ?
[03:57:12] <aatch> enticeing, nope, -L takes a directory
[03:57:20] <aatch> brson, thanks
[03:57:22] <enticeing> well, rust-xcb being a directory that i cloned
[03:57:25] <enticeing> from the github
[03:57:31] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: Computer has gone to sleep.)
[03:57:33] <aatch> enticeing, oh, right.
[03:57:38] <aatch> In that case, yes
[03:58:09] <Erik> Does fmt! work in rusti?
[03:58:13] <Erik> rusti: 01let x = 5; fmt!("%?",x)
[03:58:14] <rusti> foo.rs:4:23: 4:24 error: unknown start of token: 3
[03:58:14] <rusti> foo.rs:4     let s = fmt!("%?", {
[03:58:14] <rusti>                                 ^
[03:58:29] <cmr> Does anything work in rusti?
[03:58:39] <aatch> enticeing, by the way, if you run into stuff that doesn't work in the wrappers, try the lower-level bindings
[03:58:39] <Erik> cmr: fair point
[03:58:40] <cmr> Erik: rusti-the-bot isn't running rusti-the-program
[03:58:43] <dbaupp> rusti: fmt!("%?", 1u)
[03:58:45] <rusti> ~"1"
[03:58:45] *** Quits: eholk (eholk@moz-68894880.hfc.comcastbusiness.net) (Quit: eholk)
[03:59:03] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:59:03] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/2q9acg
[03:59:03] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:59:09] <Erik> cmr: no? What is rusti-the-bot running?
[03:59:12] <enticeing> aatch: so i should run r_client.py, then just declare extern mod xcb and use xcb::whatever ?
[03:59:26] <aatch> enticeing, nah, just ignore r_client for now
[03:59:35] <aatch> it's for generating the code from the xml files
[03:59:51] <aatch> just run rustc src/xcb.rc -o .
[03:59:52] <enticeing> so should i do anything after the clone, or is it ready? sorry for all the questions, just still unsure
[03:59:54] <dbaupp> Erik: it's cat-ing the input code in to an rs file and compiling and running that
[03:59:56] <enticeing> okay, thanks
[04:00:49] <aatch> Let me know if you find anything majorly wrong.
[04:00:50] <Erik> dbaupp: Ah, makes sense. So... why does fmt! not work in rusti-the-bot? My mistake, or broken in the bot?
[04:00:54] <enticeing> a lot of failed imports
[04:01:06] <enticeing> all of them core::iterator::Iterator;
[04:01:07] <aatch> Really? I thought I fixed that.
[04:01:10] <aatch> give me a minute
[04:01:14] <aatch> Wait
[04:01:16] <aatch> Dammit.
[04:01:22] <aatch> You're on 0.6
[04:01:25] <bjz_> aatch: rusti is on 0.6
[04:01:29] <dbaupp> rusti: let x = 1u; fmt!("%?", x)
[04:01:30] <rusti> ~"1"
[04:01:34] <enticeing> aatch: i'll update on my end
[04:01:42] <enticeing> so the current git should work?
[04:01:46] <dbaupp> bjz_: that's not true any more
[04:01:51] <bjz_> !
[04:01:53] <cmr> incoming is still on fire last I knew
[04:01:54] <Erik> 07 01rusti: let x = 1u; fmt!("%?", x)01
[04:02:06] <enticeing> or where should i pull from then?
[04:02:07] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:02:07] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/f81D9Q
[04:02:07] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:02:09] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:02:09] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/D25pYw
[04:02:09] <ghrust> 13rust/06auto 14e596128 15Brendan Zabarauskas: Remove 'Local Variable' comments
[04:02:09] <ghrust> 13rust/06auto 14efcabc4 15bors: auto merge of #6151 : bjz/rust/local-variable-cleanup, r=brson...
[04:02:10] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:02:14] <bjz_> cmr: it's fine for me
[04:02:29] <cmr> apparently the fire has been extinguished, nvm :p
[04:02:34] <dbaupp> Erik: i think you have a leading space there
[04:02:38] <enticeing> so just pull from the git?
[04:02:41] <enticeing> err, clone
[04:02:44] <bjz_> enticeing: incoming is pretty good now. bors is our gatekeeper bot
[04:02:52] <enticeing> sorry, incoming?
[04:02:55] <cmr> enticeing: yup, and build the incoming branch
[04:02:55] <aatch> enticeing, build from incoming from git
[04:02:57] <bjz_> enticeing: no fires anymore
[04:03:01] *** Quits: doomlord (doomlod@moz-92EDFF3A.range31-52.btcentralplus.com) (Ping timeout)
[04:03:01] <enticeing> okay, got it
[04:03:06] <Erik> 01rusti: let x = 1u; fmt!("%?", x)
[04:03:22] <cmr> Erik: you have color codes
[04:03:28] <cmr> the bot seems to not handle those well
[04:03:29] <Erik> Ohhh
[04:03:34] <Erik> Bad IRC client, that makes sense
[04:03:43] <Erik> probably only on copy-paste, too
[04:03:49] <aatch> I didn't want to implement the old iterator stuff since I knew it was going to vanish soon.
[04:03:53] <bjz_> enticeing: there's talk of removing incoming and having bors do PRs onto master
[04:04:08] <enticeing> for now, incoming should be working though?
[04:04:12] <Erik> cmr: Thanks, fixed
[04:04:13] <cmr> yup
[04:04:17] <bjz_> enticeing: yup!
[04:04:17] <aatch> enticeing, should
[04:04:19] *** Joins: sanxiyn (tinuviel@858F408C.B797260D.EF43EC08.IP)
[04:04:48] <aatch> fair warning, it takes a while to build
[04:04:52] <doomlord_> i'll give up on my iOS attempt for today.  got as far as linker errors...
[04:04:53] <enticeing> yes, i know!
[04:04:59] <enticeing> i build .6 from source as well
[04:05:07] <aatch> enticeing, ah, fair enough
[04:05:21] <enticeing> but i'm running gentoo for 4/5 years now, so i'm used to it :P
[04:05:38] <aatch> lol, that's the main reason I stopped running gentoo
[04:05:50] <enticeing> new to git: i should clone the repo, switch the branch to incoming, then build?
[04:05:53] *** Joins: rust-lover (chatzilla@414EA354.D0DF3C31.443E7CDD.IP)
[04:06:00] <cmr> enticeing: yes
[04:06:06] <enticeing> well, not new to git, just not very familiar with it!
[04:06:14] *** Quits: dcamp (dcamp@moz-930D5B64.hsd1.wa.comcast.net) (Quit: Leaving...)
[04:06:28] <strcat> enticeing: you can also clone a specific branch, doesn't really matter though :)
[04:06:38] <aatch> git clone ...; git checkout incoming
[04:06:49] <strcat> git clone -b incoming
[04:06:51] <enticeing> hmm
[04:07:00] <enticeing> i did clone, checkout -b incoming
[04:07:01] <enticeing> same thing?
[04:07:03] <strcat> yeah
[04:07:03] <cmr> bed. 'night all.
[04:08:52] <Thad> cmr: aatch sanxiyn  .. thanks guys.. night !
[04:09:03] <enticeing> aatch: my solution to the problem is avoiding updates!
[04:09:05] *** Quits: Thad (chatzilla@moz-C35F90AE.tx.res.rr.com) (Quit: ChatZilla 0.9.90 [Firefox 21.0/20130425162858])
[04:09:40] <enticeing> i'm still on a kernel build in february
[04:09:51] *** Quits: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu) (Ping timeout)
[04:09:56] <aatch> enticeing, doesn't help that I have ADHD. If I install something, I want it done now dammit!
[04:10:02] <enticeing> yeah
[04:10:14] <aatch> So I went a step down to archlinux
[04:10:21] <enticeing> i had an idea for gentoo-style useflags with prebuilt packages, but it's just not that feasible
[04:10:23] <enticeing> maybe someday...
[04:10:42] <strcat> aatch: which has nightly builds of rust's incoming branch now ;p
[04:10:53] <aatch> strcat, I know
[04:11:12] <aatch> Is that a separate package?
[04:11:22] <strcat> aatch: yeah it's in a separate repo
[04:11:26] <strcat> [thestinger]
[04:11:28] <strcat> SigLevel = Optional
[04:11:30] <strcat> Server = http://pkgbuild.com/~thestinger/repo/$arch
[04:11:42] <aatch> lol, I wasn't planning on using it.
[04:11:59] <aatch> I have to build locally for compiler work any way
[04:12:07] <strcat> aatch: ah, yeah
[04:12:12] <enticeing> i remember when arch first implemented sigs...
[04:12:17] *** Quits: jfredett (jfredett@moz-C01C350.bstnma.fios.verizon.net) (Ping timeout)
[04:12:25] <cmr> it wasn't that long ago ;p
[04:12:27] <aatch> So do I.
[04:12:31] <enticeing> yes, not long ago
[04:12:41] <strcat> I just can't sign a package built by a cronjob on the build server
[04:13:02] <aatch> I now subscribe to the ArchLinux news feed
[04:13:19] <aatch> strcat, I'm guessing you have a passphrase?
[04:13:43] <strcat> aatch: yeah but the passphrase is only supposed to last a week or so against an attack
[04:13:49] <strcat> to let you revoke your key
[04:14:04] <xenocons> this is probably answered somewhere - so im being lazy here - but is rust 0.6 install for windows meant to work out of box?
[04:14:14] <aatch> xenocons, it should
[04:14:28] <enticeing> i installed it for fun the other day, and it does seem to work right away
[04:14:34] <enticeing> correct PATH and everything
[04:14:34] <xenocons> i get a libgcc_s_dw2-1.dll missing error
[04:14:36] <strcat> aatch: I could copy it back to my computer to sign it but... ;p
[04:14:53] <strcat> might as well be using my computer to build if I had to leave it on
[04:14:57] <aatch> but the gap between 0.6-release and incoming is significant
[04:15:01] <sanxiyn> xenocons: It is said to need MinGW
[04:15:09] <xenocons> hrm
[04:15:25] <aatch> xenocons, though Thad is working on cygwin support
[04:15:32] *** Joins: doomlord (doomlod@moz-92EDFF3A.range31-52.btcentralplus.com)
[04:16:02] <xenocons> has there been progress towards a msbuild release?
[04:16:05] <strcat> aatch: afaik he's doing that as a stepping stone to mingw-w64
[04:16:22] <aatch> xenocons, not as far as I know
[04:16:27] <xenocons> alright
[04:16:33] <strcat> mingw/mingw-w64 are actually properly native, cygwin has to translate syscalls, etc.
[04:16:57] <strcat> xenocons: rust relies on specifics about the libstdc++ unwinding implementation for one thing
[04:17:18] <strcat> I don't think it would work with libc++abi even :(
[04:17:24] <xenocons> ah...
[04:17:24] <aatch> I'm not sure how much else it does though...
[04:17:37] <xenocons> yes when i looked at just making a msbuild for the rust stuff i ran into headaches with libuv
[04:17:56] <aatch> Ah right, that seems to be a sticking point with Thad too.
[04:18:01] <strcat> afaik libuv builds with MSVC++
[04:18:08] <enticeing> what is libuv exactly?
[04:18:11] <xenocons> tbh i dont really know how to approach the problem, it isnt just going to be as simple as 'swapping' compilers :<
[04:18:16] <strcat> enticeing: event loop + platform abstractions
[04:18:29] <strcat> enticeing: it's a more portable/comprehensive libev basically
[04:18:46] <enticeing> ah
[04:19:17] <xenocons> strcat: i forget my libuv bug i was hitting, and it may have been fixed since
[04:19:31] <xenocons> but im just cautious to throw time at an msbuild myself without someone more experienced to help
[04:19:36] <enticeing> so libuv handles the tasks and etc.?
[04:19:43] <xenocons> probably end up just damaging it
[04:20:06] <strcat> enticeing: I don't know how much it's used for right now
[04:20:31] <strcat> enticeing: I think the goal is for stuff like the scheduler to use a pluggable event loop, with libuv being the default
[04:21:03] <xenocons> 'scheduler plugins' is a nice idea
[04:21:07] *** Quits: rf (rollyfordh@D01F426C.FCA11A6F.2A62C3B1.IP) (No route to host)
[04:21:19] <xenocons> guessing it will present itself as a compile time option
[04:21:27] *** Joins: rf (rollyfordh@D01F426C.FCA11A6F.2A62C3B1.IP)
[04:21:33] <enticeing> and the scheduler is exactly what it sounds like?
[04:21:36] <xenocons> its a significant problem to tackle, to make a cross platform event framework
[04:21:46] <strcat> enticeing: tasks and I/O basically
[04:21:50] <enticeing> handling which tasks are running?
[04:21:58] <enticeing> yeah, also i/o
[04:22:12] <strcat> enticeing: yeah tasks are mapped M:N over OS threads (by default)
[04:22:57] *** Quits: KindOne (KindOne@786EFC2.E114B4AE.EC6A1518.IP) (Ping timeout)
[04:23:04] <strcat> so there's a userspace scheduler doing context switches when the tasks yield
[04:23:12] <aatch> There is a new scheduler in the works, which will also do it better
[04:23:19] <aatch> with work stealing, etc.
[04:23:29] * aatch wonders how long he will be saying that for
[04:23:41] *** Joins: thou (thou@moz-1C1CA9F7.fasttrackcomm.net)
[04:23:46] <enticeing> so the devs can write their own scheduler, or use something like libuv/ev/etc. then?
[04:24:12] <xenocons> workstealing .... :)?
[04:24:32] <enticeing> okay, and what's the necessity of the uuid field?
[04:24:32] <strcat> enticeing: libuv knows how to use epoll on linux, IOCP on windows, etc. - so it saves a lot of work
[04:24:34] <aatch> xenocons, threads taking queued tasks from other threads
[04:24:39] <enticeing> strcat: ah
[04:24:45] <strcat> enticeing: I think the uuid field in libs is going to go away
[04:25:06] <enticeing> so would the eventual goal to be writing a scheduler specifically for rust?
[04:25:13] <enticeing> would that give theoretically better performance maybe?
[04:25:25] <xenocons> aatch: i like this haha
[04:25:32] <xenocons> i have some ideas on how to do this on windows
[04:25:37] <aatch> It was supposed to be a way to uniquely identify libs, in case of name collision
[04:25:48] <strcat> enticeing: dunno :)
[04:26:08] <aatch> I'm pretty sure that the current scheduler is fairly rust-specific
[04:26:26] <aatch> from what I've been able to gather from the runtime code anyway
[04:26:27] <strcat> yeah I don't think it's coupled the the event loop yet
[04:26:29] <xenocons> is there any docs on the scheduler currently
[04:26:31] <strcat> to the*
[04:26:39] <enticeing> hmmm, the linux kernel has a built in uuid generator at /proc/sys/kernel/random/uuid
[04:26:39] <xenocons> im also unsure about this event loop thing
[04:26:54] <xenocons> tbh i dont know enough about it to have confidence int it, does anyone have anything to read
[04:26:59] <xenocons> in *
[04:27:09] *** Joins: KindOne (KindOne@211254A6.AFB24D71.EC6A1518.IP)
[04:27:19] <strcat> enticeing: and also uuidgen in util-linux which doesn't use that kernel interface ;p
[04:27:24] <aatch> xenocons, you don't have enough confidence in what?
[04:27:36] <enticeing> strcat: yeah, i already knew about uuidgen
[04:27:46] <enticeing> but this makes me wonder why uuidgen exists in the first place
[04:27:48] <xenocons> is an event loop the correct way to approach no blocking IO
[04:27:56] <enticeing> when you can just `cat /proc/sys/kernel/random/uuid`
[04:28:33] <aatch> xenocons, the idea is to farm off IO to it's own thread and call back to other tasks when stuff is available
[04:28:36] <strcat> xenocons: to scale, yes - it's part of it
[04:29:02] <xenocons> biggest question in my mind is: erlang has the safe concurrency market, are they using an event loop
[04:29:09] <Ralith> aatch: the idea is notn to need another thread
[04:29:10] <Ralith> not*
[04:29:23] <aatch> Ralith, well that isn't always possible
[04:29:28] <aatch> some apis are just blocking
[04:29:30] <strcat> it's to be able to use epoll/kqueue/IOCP
[04:29:38] <strcat> aatch: evil writes :(
[04:29:46] *** Quits: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[04:29:49] <Ralith> aatch: arbitrary API calls aren't the same thing as I/O
[04:29:58] <strcat> Ralith: writes are inherently blocking
[04:30:00] *** Quits: rust-lover (chatzilla@414EA354.D0DF3C31.443E7CDD.IP) (Quit: ChatZilla 0.9.90 [Firefox 20.0/20130329030848])
[04:30:08] <strcat> to some extent
[04:30:17] <strcat> because there's a kernel buffer that can be filled
[04:30:19] <xenocons> p.s. im not trying to start a language war, just genuinely curious about what models are available and pros and cons
[04:30:21] <strcat> so it has to block
[04:30:33] <sanxiyn> I like blocking APIs; they are simpler to use
[04:30:42] <Ralith> strcat: that's why you don't overfill the buffer...
[04:30:44] <strcat> sanxiyn: well look at Go's I/O
[04:30:44] <sanxiyn> Blocking API and blocking implementation are different
[04:30:47] <xenocons> sanxiyn: thats pretty subjective
[04:30:53] <enticeing> okay, but sometimes i don't need non-blocking i/o
[04:31:06] <sanxiyn> strcat: Isn't Go blocking API?
[04:31:10] <strcat> sanxiyn: yes
[04:31:14] <sanxiyn> yes exactly
[04:31:18] <strcat> sanxiyn: blocking API, hands off to the event loop and yields
[04:31:29] <strcat> so as far as user code is concerned I/O is blocking
[04:31:33] <sanxiyn> xenocons: I think this is pretty non-subjective
[04:31:38] <sanxiyn> Linear control flow is easier
[04:31:39] <strcat> but nothing ever blocks if there's more work that can be done
[04:31:43] <enticeing> did anyone else notice github go all wonky 10/20 mins ago?
[04:31:49] <sanxiyn> enticeing: Yes we did
[04:31:56] <enticeing> do we know what it was?
[04:31:57] <strcat> enticeing: yeah - https://status.github.com/
[04:32:03] <mcpherrin> enticeing: github twitter said maintence
[04:32:10] <enticeing> ah, thanks
[04:32:13] <strcat> ' 3:46 UTC We are investigating errors reaching GitHub.com 
[04:32:14] <strcat> ;p
[04:32:14] <aatch> if you have lots of tasks, then you can always do work (unless they are all blocked)
[04:32:30] <xenocons> sanxiyn: i don't understand the difference between API and the underlying system enough i guess, as i havent approached it as a language design problem before
[04:33:07] <aatch> It's not really a language design issue though. Rust as a language doesn't even really have a concept of tasks
[04:33:08] <xenocons> you are definetly correct in saying api != implementation, the two kinda mix together a bit too much for me
[04:33:12] <strcat> xenocons: to scale, the I/O event handling has to be handed off to the OS
[04:33:15] <strcat> erlang uses an event loop
[04:33:32] <strcat> so
[04:33:41] <strcat> with a blocking API, user code makes blocking calls
[04:33:46] <strcat> the call won't finish until it's done
[04:34:00] <xenocons> hmm, so event loop is the same as an agent like system 
[04:34:05] <strcat> but the implementation can hand off the blocking I/O event to an event loop and handle it asynchronously
[04:34:08] <sanxiyn> aatch: I don't think that's correct. Isn't failure and how they are propagated between tasks part of language definition?
[04:34:10] * xenocons wades into waters of murky understanding for self
[04:34:12] <strcat> xenocons: no
[04:34:37] <sanxiyn> That is, *language* guarantees all destructors run when tasks fail
[04:34:40] <strcat> xenocons: erlang's usage of an event loop is an implementation detail to make it scale
[04:34:40] <xenocons> right, that makes sense about the blocking API
[04:34:52] <xenocons> hm
[04:34:53] <strcat> xenocons: whether or not it used one, APIs would be the same
[04:35:01] <strcat> same with Go
[04:35:10] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[04:35:21] <strcat> you call read(buffer, 20) in a task
[04:35:21] <sanxiyn> strcat: Another example is Python's eventlet
[04:35:24] <strcat> it *appears* to block
[04:35:29] <aatch> sanxiyn, I'm not sure, it's a bit of a murky concept there
[04:35:40] <strcat> but it hands it off to an event loop which waits for the read asynchronously
[04:35:54] <sanxiyn> aatch: I think task can't be entirely library because of failures
[04:35:56] <strcat> when you make a 'blocking' call it yields from that task and control won't return until the event happens
[04:36:06] <enticeing> how do i say, in a struct, that i want an element of any type that implements a trai?
[04:36:21] <sanxiyn> enticeing: Can't
[04:36:23] <aatch> sanxiyn, I suppose you're right
[04:36:23] <xenocons> strcat: ah... hmmm
[04:36:29] <strcat> enticeing: you can't have bounds on the struct itself, you put the bounds on the impl
[04:36:35] <sanxiyn> enticeing: You can have pointer to any type that implements a trait though
[04:36:47] <steven_is_false> You can do @Trait though.
[04:36:48] <sanxiyn> strcat: Ah that's also true
[04:36:51] <enticeing> :S
[04:36:52] <xenocons> strcat: one thing i had difficulty with recently (non rust) was making something that was inherently 'blocking' at the API and design level, non blocking
[04:36:56] *** Quits: rf (rollyfordh@D01F426C.FCA11A6F.2A62C3B1.IP) (Quit: rf)
[04:37:10] <Sodel_the_V> enticeing: `struct Foo { thing: @Trait }`
[04:37:13] <xenocons> it is a difficult problem to deal with and i would appreciate it better as i come to understand more
[04:37:35] <enticeing> under version, incoming still calls itself 0.6, right?
[04:37:41] <aatch> enticeing, yup
[04:37:48] <brson> 0.7-pre
[04:37:50] <enticeing> it has the right time for the build, so i was just making sure :P
[04:37:50] <strcat> enticeing: struct Foo<T> { priv a: T }; impl<T: Ord> Foo<T> { fn new(value: T) -> Foo<T> { Foo { a: T } } } <- is that what you mean?
[04:38:03] <aatch> brson, I think the compiler still says 0.6
[04:38:07] <aatch> when you do --version
[04:38:20] <strcat> brson: I think it should call itself what 'git describe' uses, eventually (so 0.6 + patchset)
[04:38:26] <strcat> brson: but it's spread all over the place :(
[04:38:32] <enticeing> rustc 0.6 (a64aa28 2013-05-01 19:54:36 -0700)
[04:38:48] <enticeing> (my clock is off)
[04:39:01] <strcat> git describe uses 'last_tag-commits_since_last_tag-current_commit'
[04:39:01] *** Quits: sanxiyn (tinuviel@858F408C.B797260D.EF43EC08.IP) (Quit: Leaving)
[04:39:02] <aatch> enticeing, well that's the right commit
[04:39:04] <xenocons> strcat: is there anything you recommend reading regarding tasks\even loops\ basics of concurrency models? i think i can see a lack of understanding on my part of those areas
[04:39:13] <xenocons> it is one thing to use an api...
[04:39:18] <brson> aatch: that's disappointing
[04:39:36] <aatch> brson, I noticed it a while back, thought it might be deliberate
[04:39:56] <brson> it is not
[04:40:01] *** Quits: dymk (dymk@44EEE21C.A6E21E6E.5E500FC7.IP) (Connection reset by peer)
[04:40:24] <enticeing> okay, how do i remove the previous version's libs?
[04:40:44] <strcat> brson: it could set FOO=$(shell git describe) and then use it via env! I guess
[04:40:56] <strcat> brson: nice thing about that version is that it's always-incrementing
[04:41:00] <strcat> release-0.6-768-gb4bdc3f
[04:41:02] <enticeing> i just `make install` without thinking about it, and now i'm getting mutiple matches for `core`
[04:41:08] <aatch> in that case, its an error the Makefile
[04:41:17] *** Joins: lmandel (lmandel@moz-9CE00FC0.holiday-inn-express.mozilla.hq)
[04:41:18] <aatch> CFG_RELEASE hasn't updated
[04:41:19] <strcat> and next would be 0.6-769-commit_id
[04:41:34] <aatch> enticeing, just delete the older ones
[04:42:03] <enticeing> so just /usr/lib/rustx/....../*0.6* ?
[04:42:03] *** Quits: catpigger (catpig@moz-AE054533.dip0.t-ipconnect.de) (Quit: Verlassend)
[04:42:07] <enticeing> *rustc
[04:42:19] <aatch> enticeing, yep
[04:43:17] <strcat> enticeing: and stuff in /usr/lib/
[04:43:26] <enticeing> well, that seems to have broken something
[04:43:34] <strcat> librustc, etc.
[04:44:02] <enticeing> a lot of unresolved names now
[04:44:57] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[04:44:59] <aatch> git describe | sed "s/release-//" ?
[04:45:06] <aatch> for the version?
[04:45:19] <strcat> aatch: or just stop putting release- in the tags ;p
[04:45:35] <aatch> strcat, well this will work either way
[04:46:02] <aatch> I guess `git describe | sed "s/^release-//"` could be better
[04:46:16] <enticeing> okay, so i'm not getting conflicting matches, but now just a bunch of unresolved names
[04:46:59] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:47:16] <terje> Oh nice, I'm having the exact same issue. Compiling 0.6 now to see if it solves itself.
[04:47:24] <enticeing> great!
[04:47:26] <enticeing> :P
[04:47:38] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[04:48:14] <xenocons> id like to see some docs describing rusts concurrency model too
[04:48:17] <xenocons> im sure thatl come in time though
[04:48:34] <enticeing> okay, so is anybody else having the same problem with incoming?
[04:48:42] <strcat> xenocons: there's a task tutorial
[04:48:58] <xenocons> http://static.rust-lang.org/doc/0.6/tutorial-tasks.html ?
[04:49:11] <xenocons> ill need to read this
[04:49:53] <strcat> xenocons: probably want to read the current one
[04:49:56] <strcat> instead of the one from 0.6
[04:50:02] <benh> https://github.com/mozilla/rust/blob/incoming/doc/tutorial-tasks.md
[04:50:06] <enticeing> terje: you're getting unresolved names on incoming as well?
[04:50:10] <xenocons> ah ty
[04:50:14] <xenocons> will do
[04:50:51] *** Quits: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (Input/output error)
[04:52:26] <terje> For 0.6? I'm still compiling
[04:52:34] <enticeing> for incoming
[04:53:04] <enticeing> i built incoming, removed the leftover 0.6 libs and now i'm getting unresolved name errors
[04:53:41] <strcat> enticeing: http://ix.io/5rh you have all those files, right?
[04:54:38] <terje> I'm not sure. make whined after 'make install', so I decided to give 0.6 a shot
[04:55:01] <enticeing> strcat: yes, all of tem
[04:55:05] <enticeing> *them
[04:55:07] *** Joins: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu)
[04:55:39] <strcat> enticeing: dunno then :(
[04:55:46] <terje> Didn't clean up anything
[04:55:57] <enticeing> all the unresolved names are in core
[04:56:16] <enticeing> wait, aatch 
[04:56:23] *** Quits: sully (sully@moz-ECFB7516.moroso.emarhavil.com) (Ping timeout)
[04:56:24] <enticeing> they're all ::core::ptr::addr_of
[04:56:38] <strcat> addr_of was removed, strange
[04:56:57] <enticeing> i guess incoming is fine then :P
[04:57:04] <aatch> goddamit
[04:57:13] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[04:57:18] *** Joins: sully (sully@moz-ECFB7516.moroso.emarhavil.com)
[04:57:33] <enticeing> did you mean to remove that?
[04:57:35] * strcat has close to the tip of incoming installed and it works
[04:57:50] <strcat> enticeing: I mean it was removed from the libraries
[04:57:55] <strcat> intentionally, yes
[04:58:02] <aatch> There we go
[04:58:17] <strcat> dunno why there would be references to it with an up-to-date libcore
[04:58:18] <aatch> Apparently my version of rustc isn't /quite/ recent enough
[04:58:29] <strcat> enticeing: no leftover 0.6 libs in /usr/lib?
[04:58:35] <enticeing> strcat: it's working fine
[04:58:41] <enticeing> it wasn't incoming that was the problem
[04:58:44] <aatch> strcat, it's my problem
[04:58:49] <strcat> oh
[04:58:57] <aatch> strcat, what replaced ptr::addr_of?
[04:58:57] * strcat is confused now :)
[04:59:06] <strcat> aatch: implicit coercion
[04:59:13] <enticeing> strcat: i'm working on building aatch's xcb bindings
[04:59:15] <aatch> so & will coerce to *
[04:59:19] <strcat> aatch: yeah
[04:59:27] <strcat> and &mut to *mut
[04:59:28] <enticeing> strcat: to port over a very simple wm i wrote in Go
[04:59:59] <enticeing> maybe it will be the first wm written in rust :D
[05:00:19] <terje> Cool
[05:00:51] <terje> So do I have to remove the libs manually when upgrading?
[05:01:01] <enticeing> it appears so
[05:01:16] <strcat> terje: well ideally you'd install with a package manager
[05:01:29] <strcat> there's make uninstall but you need to use the makefile from the version you installed
[05:01:37] <terje> Ah, right
[05:01:54] <enticeing> i probably should've make uninstalled then, rather than removing manually
[05:02:04] <enticeing> i still have 0.6 laying around in my downloads folder somewhere
[05:02:34] <terje> Just check out the 0.6 tag from the git repo
[05:02:58] <enticeing> aatch: my uncle's name is James Miller
[05:03:07] <aatch> lol
[05:03:13] <aatch> It's a common name
[05:03:20] * enticeing sings "it's a small world, after all"
[05:03:48] <strcat> terje: manually packaging it would involve doing 'make DESTDIR=foo install', turning that into a file list and then copying it to / ;p
[05:04:02] *** Quits: nejucomo (nejucomo@CB37EA37.DA00262B.6157E88D.IP) (Ping timeout)
[05:04:05] <aatch> enticeing, I just pushed a new version. However, I'm not sure if will still build
[05:04:07] <strcat> but at that point you can essentially just generate a package for a package manager
[05:04:25] <enticeing> i guess we'll find out!
[05:04:25] <aatch> I got a ton of other errors, but I'm still waiting on rustc to build
[05:04:47] <terje> strcat: Yeah, I would rather just compile it from source
[05:05:04] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:05:04] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/D25pYw
[05:05:04] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:05:17] <enticeing> aatch: "cannot associate methods with a type outside the crate when the type is defined in; define and implement a trait or new type instead"
[05:05:24] <aatch> God dammit
[05:05:36] <enticeing> eh, "crate when the" -> "crate the"
[05:07:13] <aatch> Oh right.
[05:07:32] <aatch> Stupid pcwalton
[05:07:36] <enticeing> has anyone written a library for rust along the lines of go's image libraries?
[05:08:05] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:08:06] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/QT-fbQ
[05:08:06] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:08:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:08:06] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/tPX5BQ
[05:08:06] <ghrust> 13rust/06auto 140c34cab 15Seo Sanghyeon: Take string slices
[05:08:07] <ghrust> 13rust/06auto 144294aed 15Seo Sanghyeon: Use static strings
[05:08:07] <ghrust> 13rust/06auto 14b42ea7f 15bors: auto merge of #6174 : sanxiyn/rust/static-string, r=brson
[05:08:07] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:09:54] <xenocons> i like do spawn {}
[05:09:57] <xenocons> thats neat
[05:10:21] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:10:54] <xenocons> guess i didnt really appreciate the code on the front page
[05:11:00] <xenocons> did that change recently?
[05:11:08] <strcat> I don't think so
[05:11:24] <strcat> 'do' just passes a closure (the block) as the last argument
[05:11:47] <xenocons> essentially its sugar?
[05:11:55] <strcat> yes
[05:12:08] <strcat> foo(a, b, |x| x + 2)
[05:12:19] <strcat> do foo(a, b) |x| { x + 2 }
[05:12:22] <strcat> same thing
[05:12:24] <xenocons> wonder what do spawn { fn1;fn2;fn3; } order is
[05:12:27] <enticeing> isn't do spawn{} just spawn {|| etc.} ?
[05:12:45] <xenocons> spawn ( || )
[05:12:49] <xenocons> oops buttcrack
[05:13:06] <strcat> enticeing: yeah, 'do spawn { println("foo") }' is the same as 'spawn(|| println("foo"))'
[05:13:19] <enticeing> that's what i thought :P
[05:13:25] <xenocons> lambda syntax is still confusing me a bit
[05:13:46] <strcat> enticeing: 'for' is similar but it implicitly returns 'true' unless you break (which returns false)
[05:14:27] <enticeing> yeah, i think i remember reading that either in the manual or tutorial
[05:17:50] <enticeing> aatch: i'll probably check it out again sometime tomorrow and let you know how it goes
[05:18:00] <aatch> It's fallout from a recent change
[05:18:09] <aatch> I have to change the code generator
[05:18:11] <enticeing> yeah :P
[05:19:06] <enticeing> so how stable should we expect rust to be between point releases
[05:19:16] <enticeing> is there a target for a version where everything should be more or less stable?
[05:20:07] <dbaupp> arbitrarily unstable, and 1.0
[05:20:14] <strcat> the language is fairly stable right now, lots of bug fixes that break incorrect code though
[05:20:21] <xenocons> rusti: let (a,b) = stream();
[05:20:23] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/iDaF
[05:20:29] <strcat> libraries are still very, very fluid
[05:20:45] <aatch> enticeing, and fixed
[05:21:03] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[05:21:13] *** Quits: Erik (Erik-S@moz-252DBA2.hsd1.co.comcast.net) (Ping timeout)
[05:21:14] <enticeing> aatch: i'll try it out really quick before i get ready for bed
[05:21:24] <xenocons> rusti: let (a,b) : (int,int) = stream();
[05:21:25] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/Nedi
[05:21:33] <aatch> Well, it compiles
[05:21:34] <xenocons> i really need to get rusti working on my workpc heh
[05:21:41] <bjz_> strcat: what's the point of uint::iterate?
[05:21:56] <bjz_> strcat: when we have uint::range
[05:22:09] <dbaupp> rusti: let (a,b) = stream::<int, int>();
[05:22:11] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/bQZj
[05:22:29] <strcat> bjz_: dunno what uint::iterate is
[05:22:41] <dbaupp> rusti: let (a,b) = stream::<int>();
[05:22:43] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/CajF
[05:22:55] <enticeing> aatch: yup, compiles fine
[05:22:59] <strcat> bjz_: I just want a trait with 'to', I think
[05:22:59] <xenocons> rusti: let (a,b) : (Port<int>, Chan<int>) = stream();
[05:23:00] <aatch> ok, the examples still compile too
[05:23:01] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/LEBX
[05:23:12] <aatch> That wasn't so bad
[05:23:16] <strcat> bjz_: 5.to(&10), 'a'.to(&'z'), etc.
[05:23:18] <xenocons> hm odd
[05:23:44] <dbaupp> xenocons: what's odd?
[05:23:50] <bjz_> strcat: http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Prelude.html#t:Enum
[05:23:53] <enticeing> aatch: how to run one of the examples?
[05:24:05] <strcat> bjz_: yeah I think we talked about this
[05:24:05] <xenocons> i would have thought you could have arbitrary parameter names for a destructuring bind
[05:24:08] <aatch> just compile the file
[05:24:09] <strcat> don't clearly remember :P
[05:24:13] <xenocons> rusti: let (port, chan): (Port<int>, Chan<int>) = stream();
[05:24:14] <bjz_> strcat: we did
[05:24:15] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/TNbM
[05:24:26] <dbaupp> xenocons: you can
[05:24:42] <enticeing> aatch: yep, everything working perfect here
[05:24:44] <xenocons> ah its just a warning
[05:24:45] <bjz_> strcat: should I start looking into implementing them?
[05:24:49] <xenocons> because im not actually using it
[05:24:53] <xenocons> that makes sense ;p
[05:25:04] <enticeing> aatch: i'll try and port that over tomorrow, and let you know how it goes
[05:25:30] <strcat> bjz_: yeah, I guess it would just be a utility function if you implemented the equivalent to Enum
[05:25:36] <strcat> bjz_: eventually a default method (when they work)
[05:25:42] <xenocons> so essentially, `stream
[05:25:44] <bjz_> strcat: aye
[05:25:44] <strcat> utility function or utility method 
[05:25:49] <dbaupp> rusti: let (p, c) = stream(); c.send(1i); p.recv()
[05:25:51] <rusti> 1
[05:25:53] <xenocons> ' argh, is a function that is unit -> a * b
[05:26:06] <enticeing> thanks for all the help strcat/aatch/etc.
[05:26:11] <strcat> enticeing: np :)
[05:26:14] <xenocons> where a and b are constrained to the type signature that you provide
[05:26:30] <enticeing> i've got class early in the morning, so i'm heading off for tonight
[05:26:52] <dbaupp> xenocons: yes, but type inference lets you get away with not actually giving the type signature most of the time
[05:26:59] <aatch> enticeing, no problem
[05:26:59] <bjz_> strcat: any chance of having some [n..m] sugar :P
[05:27:24] <strcat> bjz_: well first we need it implemented without sugar and then we can brainwash people :)
[05:27:33] <bjz_> strcat: ofc
[05:27:58] *** Quits: enticeing (user@40584768.29B601FE.5037098C.IP) (Quit: bye bye)
[05:28:45] <xenocons> dbaupp: right, hm, i was kinda expecting let (a,b) = stream(); to return the equivilant of a : 'a b : 'b 
[05:28:45] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[05:28:59] <xenocons> (not sure what the notation is for polymorphism in rust, i think its T?)
[05:29:17] <strcat> T is just a common name for a type parameter
[05:29:27] <strcat> like a, b, c, d, e in haskell
[05:29:38] <xenocons> ah right
[05:30:07] <xenocons> or 'a 'b andso on in ML
[05:30:16] <strcat> fn foo<T, U: Ord>(a: &T, b: U) -> bool { ... }
[05:30:28] <xenocons> but i always just think of them as polymorphic parameter types
[05:30:47] <xenocons> maybe... polymorphic type parameters is better phrasing heh
[05:30:52] <xenocons> too many p's 
[05:31:13] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[05:31:29] <dbaupp> xenocons: well, the type signature of stream is () -> (Port<T>, Chan<T>), so a and b are quite constrained
[05:32:03] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[05:32:03] <xenocons> ahhh right
[05:32:23] <xenocons> so Port and Chan are the type requirements
[05:32:33] <xenocons> but the parameters to Port and Chan are polymorphic
[05:33:07] <xenocons> rusti: let (a,b) : (Port<_>, Chan<_>) = stream()
[05:33:08] <rusti> foo.rs:5:27: 5:28 error: expected type, found token UNDERSCORE
[05:33:08] <rusti> foo.rs:5          let (a,b) : (Port<_>, Chan<_>) = stream()
[05:33:08] <rusti>                                     ^
[05:33:10] <bjz_> strcat: what would 'to' return?
[05:33:21] <dbaupp> xenocons: type 'requirements'?
[05:33:41] <dbaupp> they are names of polymorphic structs
[05:33:41] <xenocons> dbaupp: hmm i dont know a word to describe it because i havent ever come accross such a thing
[05:33:47] <xenocons> ah
[05:33:53] <dbaupp> bjz_: probably an iterator
[05:34:08] <bjz_> dbaupp: that's what I thought
[05:34:09] <dbaupp> xenocons: http://static.rust-lang.org/doc/core/comm.html#struct-chan
[05:34:43] <strcat> bjz_: well it could either be an internal or an external iterator
[05:34:54] <xenocons> struct is just like a record i guess
[05:35:03] <xenocons> but im guessing its pass by reference or something
[05:35:04] <dbaupp> xenocons: do you know any haskell? It's the same as `Maybe a`
[05:35:18] *** Joins: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr)
[05:35:22] <xenocons> dbaupp: ah i know a bit of haskell, im familiar with option types 
[05:35:38] <dbaupp> xenocons: rust structs are exactly the same as a struct in C
[05:35:44] <xenocons> Some of 'a | None
[05:35:57] <dbaupp> strcat: an external iterator would compose better, right?
[05:36:04] <strcat> dbaupp: yes
[05:36:05] <xenocons> type Option<'a> = Some of 'a | None
[05:36:11] <strcat> and an external iterator can be used as an internal iterator
[05:36:21] <strcat> but there are cases when an internal iterator might be faster
[05:36:44] <dbaupp> xenocons: yes, that is encoded as an enum in rust (not a struct), but the polymorphism is the same
[05:36:52] <xenocons> right that makes sense
[05:37:00] <bjz_> xenocons: aren't you an fsharper?
[05:37:06] <xenocons> bjz_: yeh
[05:37:06] <strcat> external iterators rely on being inlined and optimized into a really clean loop
[05:37:13] <bjz_> xenocons: I thought F# had Option
[05:37:19] <xenocons> it does
[05:37:24] <bjz_> xenocons: being in the ML family
[05:37:24] <xenocons> most ML languages (afaik) do
[05:37:25] <dbaupp> strcat: I've looked at the generated code for the external iterators, and it looks pretty good
[05:37:32] <strcat> dbaupp: yeah, it is
[05:37:37] <dbaupp> so it's probably not too much of a concern
[05:37:41] <bjz_> hmm
[05:37:42] <xenocons> bjz_: type Option<'a> = Some of 'a | None is defined by default in F#
[05:37:48] <strcat> dbaupp: C++ only has external iterators in the stdlib
[05:37:54] <strcat> and no one really uses internal ones.
[05:37:57] <xenocons> http://msdn.microsoft.com/en-us/library/dd233245.aspx
[05:38:21] <dbaupp> strcat: yeah, so we're focusing on that too?
[05:38:24] <xenocons> god an intern on drugs must have written that
[05:38:39] <strcat> dbaupp: well I think adaptors should be provided for both
[05:38:42] <bjz_> strcat: so where does that leave an Enum trait for numbers?
[05:38:49] <xenocons> bjz_: my fav trick in any language is to get rid of exception handlers and wrap everythingin option types :)
[05:39:01] <strcat> dbaupp: but perhaps the stdlib should only provide external iterators - not really decided yet
[05:39:06] <strcat> needs an RFC down the road
[05:39:14] <strcat> first the compiler bugs need to be worked out
[05:39:28] <bjz_> xenocons: :)
[05:39:33] <dbaupp> yeah, those bugs get a little annoying sometimes :)
[05:39:35] <strcat> bjz_: I think for a trait you have to make an internal iterator now now
[05:39:42] <strcat> maybe ;p
[05:39:51] <strcat> for a default impl I mean
[05:39:52] *** Quits: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp) (Client exited)
[05:40:03] <strcat> I don't know how you'd do a default impl of an external iterator
[05:40:17] <strcat> because each iterator is a unique type
[05:40:17] <bjz_> strcat: how does `range` fit into this?
[05:40:24] <strcat> bjz_: range will go away
[05:40:37] <bjz_> strcat: might need associated types for that
[05:40:40] <strcat> bjz_: .to probably has to start off life as an internal iterator
[05:40:48] <strcat> bjz_: it will just be a generic range-killer
[05:40:58] <xenocons> so this leads to an interesting (maybe) question, howcome the type inference cannot fill in the blanks for let (a,b) = stream(); ? can stream () return anything else other than Chan & Port structs in a tuple
[05:41:39] <dbaupp> bjz_: (just while we're on the topic of numbers and enumerations, you have to be really careful with unsigned and counting down to 0, due to wrap around)
[05:41:46] <strcat> xenocons: it needs a hint from usage about what's in the structs
[05:41:59] <dbaupp> xenocons: it's the polymorphic T that can't be filled in
[05:42:04] <xenocons> ah, so the dependency is within the struct
[05:42:07] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[05:42:07] <bjz_> strcat: yeah I just don't like the range functions sitting in the uint-template and int-template files
[05:42:08] <xenocons> ok that does make sense
[05:42:18] <bjz_> strcat: would be good to traitify them
[05:42:28] <bjz_> dbaupp: ofc
[05:42:29] <strcat> bjz_: well if we have 'to' we don't need range
[05:42:33] <strcat> to is range
[05:42:56] <strcat> for 5u.to(&10) |x| { println(x.to_str()) }
[05:43:11] <dbaupp> bjz_: good good, I was tripped up by it a while ago :(
[05:43:16] <strcat> would be the same as for uint::range(5, 10) |x| { ... }
[05:43:19] <xenocons> nice, almost like a list comprehension 
[05:43:34] <strcat> well not sure if .to would include the end one
[05:43:39] <strcat> I guess it would have to
[05:43:47] <strcat> or not ;p
[05:43:59] <bjz_> strcat: I thought you would need for 5u.to(&10).each |i| { println(i.to_str()) }
[05:44:07] <strcat> bjz_: if it was an external iterator
[05:44:24] <strcat> but I don't think you can write generic externally iterable things in the current type system
[05:45:03] <strcat> it could ofc be a type in iterator.rs
[05:45:03] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Connection reset by peer)
[05:45:23] <strcat> but I don't think you can add methods to the types it can be used with
[05:45:31] *** Joins: snadon (chatzilla@moz-EFE8FD29.mc.videotron.ca)
[05:46:14] * bjz_ imagines `for [n..m].each |i| { println(i.to_str()) }`
[05:46:52] <strcat> rusti: use core::iterator::*; let mut it = Counter(5u, 2u).take_while(|&x| x < 20); for it.advance |x| { println(x.to_str()) }
[05:46:53] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/TYVQ
[05:47:01] <Jeaye> bjz_: I like that.
[05:47:04] <strcat> rusti: use core::iterator::*; let mut it = Counter::new(5u, 2u).take_while(|&x| x < 20); for it.advance |x| { println(x.to_str()) }
[05:47:06] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/JPWi
[05:47:25] <strcat> rusti: use core::iterator::*; let mut it = Counter::new(5u, 2u).take_while(|&x| x < 20).transform(|x| x * 2); for it.advance |x| { println(x.to_str()) }
[05:47:27] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/NRID
[05:47:40] *** Joins: ysuzuki (ysuzuki@moz-F333A8C8.st.keio.ac.jp)
[05:47:50] <strcat> once rvalues can be borrowed as &mut it won't need a temp var
[05:47:54] *** Joins: pyrac (pyrac@moz-2FEC2239.w92-149.abo.wanadoo.fr)
[05:48:14] <strcat> Counter is an infinite generator
[05:48:17] <dbaupp> isn't there a pull request for the mut rvalues thing?
[05:48:37] <strcat> dbaupp: I think nmatsakis wanted to implement it differently
[05:49:35] <xenocons> iwant to think of a way to sugar lambda in rust with custom operators heh
[05:49:46] *** Joins: haard (fredrik@18E6EC45.6A26450D.BE04C429.IP)
[05:50:08] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[05:51:26] <strcat> for some reason .take hits the type inference bug
[05:51:30] <strcat> hm
[05:51:55] <strcat> all I can think of is that it's somehow related to the integer argument to take... but that's a uint
[05:52:22] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[05:52:28] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[05:52:43] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[05:54:55] *** Quits: steven_is_false (quassel@moz-E020C314.bchsia.telus.net) (Client exited)
[05:55:19] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[05:56:06] <strcat> rusti: use core::iterator::*; let mut it = Counter::new(5u, 2u).take_while(|&x| x < 20).transform(|x| x * 2).filter(|&x| x % 4 = 0); for it.advance |x| { print(x.to_str(); print(" ") }
[05:56:07] <rusti> line longer than 100 columns, pastebinned: http://sprunge.us/aDdV
[05:56:35] <strcat> rusti: use core::iterator::*; let mut it = Counter::new(5u, 2u).take_while(|&x| x < 20).transform(|x| x * 2).filter(|&x| x % 4 = 0); for it.advance |x| { print(x.to_str()); print(" ") }
[05:56:36] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/HaRI
[05:56:53] <bjz> strcat: have you seen Clojure's (range)?
[05:56:56] <strcat> rusti: use core::iterator::*; let mut it = Counter::new(5u, 2u).take_while(|&x| x < 20).transform(|x| x * 2).filter(|&x| x % 4 == 0); for it.advance |x| { print(x.to_str()); print(" ") }
[05:57:02] <bjz> strcat: http://clojuredocs.org/clojure_core/clojure.core/range
[05:57:05] * strcat broke it
[05:57:19] <strcat> rusti: use core::iterator::*; let mut it = Counter::new(5u, 2u).take_while(|&x| x < 20).transform(|x| x * 2).filter(|&x| x % 4 == 0); for it.advance |x| { print(x.to_str()); print(" "); }; print("\n")
[05:57:29] <strcat> huh
[05:57:34] <bjz> strcat: `(take 10 (range))` gives `(0 1 2 3 4 5 6 7 8 9)`
[05:58:02] <strcat> bjz: yeah which is like python's count and haskell's [0..]
[05:58:14] <bjz> mm
[05:58:17] <strcat> Prelude> take 10 [0..]
[05:58:19] <strcat> [0,1,2,3,4,5,6,7,8,9]
[05:58:25] <dbaupp> bjz: that's exactly what Counter::new(0, 1) does
[05:58:49] <strcat> Counter::new(0, 1).take(10)
[05:59:06] <bjz> strcat: it might be good to look at the naming.
[05:59:22] <strcat> bjz: yeah
[05:59:26] <strcat> transform should be 'map'
[05:59:31] <strcat> but it hits a bug
[06:00:00] <strcat> the standalone iterators are nouns, which makes their names kinda long
[06:00:55] <bjz> `Range::from(0).take(10)` (where Range is a trait impled on int)
[06:01:18] <strcat> bjz: we don't have vararg functions though
[06:01:36] <bjz> ofc in the future you'd be able to do: uint::from_to(0, 10)
[06:01:50] <strcat> or 0u.to(&10)
[06:01:53] <xenocons> what was the param to run rustc in REPL mode?
[06:02:27] <strcat> bjz: internal iterators can have cuter names right now
[06:02:33] <strcat> but they don't compose well at all
[06:02:38] <bjz> strcat: https://mail.mozilla.org/pipermail/rust-dev/2013-April/003866.html
[06:02:49] <bjz> strcat: would make it nicer to use
[06:03:12] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Input/output error)
[06:03:27] <bjz> strcat: that way it could be a static method, as opposed to a method
[06:03:28] <strcat> bjz: https://github.com/mozilla/rust/blob/incoming/src/libcore/iter.rs I started on making internal iterator adaptors though
[06:03:57] <strcat> old iter module is deprecated
[06:04:02] <strcat> still some things to keep from it
[06:04:29] <strcat> this hits a lot of type inference bugs too ;p
[06:04:34] <dbaupp> xenocons: there isn't one
[06:04:34] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Connection reset by peer)
[06:04:51] <strcat> generics + higher-order functions ends up hitting it...
[06:05:08] <dbaupp> xenocons: you can try `rusti` or `rust sketch` but they work spectacularly badly
[06:05:31] *** Joins: mars26 (bzlandfill@48DA1FB3.74F70D8A.C43B490F.IP)
[06:05:40] <xenocons> :< cant wait to have a repl for rust
[06:06:12] <xenocons> oh cool i can pm rusti
[06:06:24] <strcat> not quite the same since it doesn't keep state though
[06:06:37] *** Quits: lmandel (lmandel@moz-9CE00FC0.holiday-inn-express.mozilla.hq) (Quit: lmandel)
[06:06:50] <dbaupp> what's the maximum line length for irc? :P
[06:07:06] <strcat> dbaupp: there isn't really one
[06:07:06] <xenocons> yeah true
[06:07:09] <strcat> there's a max message length
[06:07:10] *** Quits: z0w0 (zack@moz-A9182BA0.lns8.woo.bigpond.net.au) (Quit: Leaving.)
[06:07:13] <strcat> it's like 512 bytes or something
[06:07:23] <strcat> but the header metadata counts towards it
[06:07:59] <mars26> What do I do if I get this "error: moving out of captured outer immutable variable in a stack closure" ?
[06:08:03] <dbaupp> aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[06:08:03] <strcat> yeah it's 512 bytes.
[06:08:04] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[06:08:04] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/tPX5BQ
[06:08:04] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[06:08:35] <dbaupp> yup, missing the trailing 'b'
[06:08:46] <xenocons> how do you define a function to use lambda syntax instead of tuple?
[06:08:56] <strcat> dbaupp: how many is that? ;p
[06:09:02] <xenocons> fn x |a| { something a; }
[06:09:27] <dbaupp> strcat: it was 512+'b' (but it looks like only came through)
[06:09:37] <dbaupp> *only 435
[06:09:38] <xenocons> i mean, fn x(a,b,c) should be equivilant to fn x |a,b,c| or something right
[06:09:43] <mars26> fn choose<T: Copy>(a: ~[T]) -> T 
[06:09:49] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[06:09:50] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Connection reset by peer)
[06:09:50] <dbaupp> xenocons: you can't
[06:10:01] <xenocons> :<
[06:10:12] <strcat> dbaupp: make your nick smaller and it might let in another, dunno
[06:10:18] <dbaupp> you can use let x = |a,b,c| { ... } in a function
[06:10:20] *** Quits: akashj87 (akash@8FF5A4C9.CC3AFE9E.35E3DDC8.IP) (Ping timeout)
[06:10:24] *** dbaupp is now known as a
[06:10:29] <xenocons> ah.. 
[06:10:36] <xenocons> probably because of closures or something
[06:10:37] *** Joins: xazax (Mibbit@6655692F.3B222813.3F580572.IP)
[06:10:40] <a> aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[06:10:47] *** a is now known as dbaupp
[06:10:48] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[06:11:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[06:11:06] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/3dbWhQ
[06:11:06] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[06:11:19] <dbaupp> yup, 5 extra characters
[06:11:36] <strcat> and I think on a server with a shorter name you could fit in more ;p
[06:11:55] <dbaupp> xenocons: to finish my sentence: and that's the only place you can use it.
[06:12:02] <xenocons> hmm
[06:12:21] <xenocons> i wonder if...
[06:12:26] <xenocons> 1 sec
[06:12:45] <strcat> dbaupp: so I guess you lose server + channel + nickname + username + host
[06:12:54] <strcat> at least I seem to see those in the packets
[06:13:02] <strcat> who needs RFCs when you have wireshark
[06:13:11] <mars26> I get an error "moving out of captured outer immutable variable in a stack closure" when I an captured variable to another function in a closure
[06:13:25] <dbaupp> strcat: well, m.io looks free, so we're mozing to m.io#
[06:13:29] <dbaupp> #r
[06:13:43] <Luqman> segfaults galore
[06:14:02] <dbaupp> Luqman: segfault party! :D
[06:14:45] <bjz> xenocons: ok, cya tonight. how shall I know you?
[06:14:46] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Connection reset by peer)
[06:14:59] <xenocons> bjz: blonde hair, BAE shirt
[06:15:05] <bjz> :P
[06:15:20] <bjz> bye folks
[06:15:24] <xenocons> cya
[06:16:22] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[06:16:29] <xenocons> is there a way to give a type signature that represents a function that is polymorphic
[06:16:40] <xenocons> (prepares for this to sound silly\not make sense)
[06:17:10] <mars26> Can someone help me?
[06:17:30] <xenocons> fn c (f : ?) { let x = |f,g,x| { g(f(x)); } x(f); }
[06:17:35] <dbaupp> mars26: what's the code?
[06:18:22] <dbaupp> xenocons: I don't think you can write that in rust without using a datastructure
[06:18:36] <dbaupp> (negative recursion or something... i dunno the jargon)
[06:18:38] <mars26> http://paste.ideaslabs.com/show/gNFJphhKJZ
[06:18:48] <dbaupp> also, `x` isn't applied to enough arguments
[06:19:18] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[06:19:24] <mars26> error message: test.rs:21:27: 21:38 error: moving out of captured outer immutable variable in a stack closure test.rs:21 		password.push_str(choose(valid_words) + " ");
[06:19:29] <xenocons> ah right, it cant return the function x
[06:19:43] <dbaupp> xenocons: actually, I can't say anything until x is applied to enough arguments
[06:20:12] <xenocons> dbaupp: yeh i keep forgetting that you cant return a function like that 
[06:20:30] <xenocons> (i dont think anyway, i remember asking it before)
[06:21:02] <dbaupp> mars26: what version of rust?
[06:21:11] <mars26> rust 0.6
[06:21:47] *** Quits: brson (brson@E9CDE21E.991753BB.CA4D1600.IP) (Quit: leaving)
[06:22:08] <dbaupp> mars26: ok, i'm not really sure what's going on, give me a second
[06:22:08] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Connection reset by peer)
[06:22:08] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[06:23:23] <xenocons> could probably do some typedefing to get composition to work though
[06:23:33] <dbaupp> mars26: the problem is valid_words is moved into the `choose` call
[06:24:09] <dbaupp> that is, the ownership of the ~ pointer is transfered to the choose function
[06:24:44] <strcat> which you can't do yet until we have once functions
[06:25:21] <dbaupp> what you want is either rand::RngUtil::choose, or to borrow a reference the vector
[06:25:39] <mars26> Then the owdership won't transfered back when choose function return?
[06:25:42] <dbaupp> which is a & pointer, i.e. fn choose...(a: &[T])
[06:26:15] <dbaupp> mars26: no, unless you explicitly return a ~ pointer, then it is deallocated at the end of the function call
[06:26:33] <dbaupp> (as in yes, the ownership won't be transferred back)
[06:26:42] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[06:27:18] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[06:28:47] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Ping timeout)
[06:29:21] <mars26> Umm, does managed box cause the same error?
[06:29:36] <dbaupp> mars26: it shouldn't
[06:29:55] *** Joins: z0w0 (zack@moz-A9182BA0.lns8.woo.bigpond.net.au)
[06:31:18] <mars26> Okay,  & pointer works! Thanks!
[06:32:00] <dbaupp> np :)
[06:33:05] <dbaupp> mars26: if you haven't read it already, you might find http://static.rust-lang.org/doc/0.6/tutorial-borrowed-ptr.html useful :)
[06:33:25] *** Quits: pyrac (pyrac@moz-2FEC2239.w92-149.abo.wanadoo.fr) (Quit: pyrac)
[06:34:59] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[06:34:59] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Connection reset by peer)
[06:35:21] <mars26> Yes, I haven't read it. I finish reading all the other tutorials last weekend and feel a little tired :D
[06:35:46] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[06:35:49] <strcat> rusti: 1
[06:35:50] <rusti> 1
[06:36:03] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[06:36:46] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[06:37:56] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[06:39:48] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[06:42:12] *** Joins: cdidd (cdidd@moz-91468BA5.broadband.corbina.ru)
[06:44:27] *** Joins: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net)
[06:51:01] *** Joins: RageOfThou (RageOfThou@moz-CF7139ED.dynamic.telemach.ba)
[06:59:14] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Client exited)
[07:04:24] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[07:09:10] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Quit: Leaving)
[07:13:42] *** Quits: mars26 (bzlandfill@48DA1FB3.74F70D8A.C43B490F.IP) (Quit: CGI:IRC (Ping timeout))
[07:14:08] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:14:08] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/F28PvA
[07:14:08] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[07:15:06] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[07:15:06] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[07:15:40] *** Joins: engla (engla@moz-BFD53D48.selucle.dyn.perspektivbredband.net)
[07:17:14] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:17:14] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/143n5g
[07:17:14] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[07:19:14] *** Quits: snadon (chatzilla@moz-EFE8FD29.mc.videotron.ca) (Ping timeout)
[07:21:22] *** Quits: ysuzuki (ysuzuki@moz-F333A8C8.st.keio.ac.jp) (Client exited)
[07:27:50] *** Joins: noam_ (noam@F6B530A7.720527A7.416762B.IP)
[07:28:43] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[07:29:52] *** Joins: wuwei`lab (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[07:32:49] *** Quits: klutzy (th@BA61F396.8E859986.ECA1BB11.IP) (Ping timeout)
[07:33:22] *** Joins: klutzy (th@BA61F396.8E859986.ECA1BB11.IP)
[07:33:31] *** Joins: berak (chatzilla@1A3729AE.FE11524D.16E13E53.IP)
[07:36:39] *** Joins: Palmik (palmik@moz-DADC71F0.pks.muni.cz)
[07:36:57] *** Quits: heftig (heftig@moz-3E35CBE8.dip0.t-ipconnect.de) (Ping timeout)
[07:37:37] *** Quits: klutzy (th@BA61F396.8E859986.ECA1BB11.IP) (Ping timeout)
[07:37:54] *** Parts: bheylin (bheylin@moz-3D24C757.static.chello.nl) ()
[07:38:46] *** Joins: klutzy (th@BA61F396.8E859986.ECA1BB11.IP)
[07:38:53] *** Joins: ysuzuki (ysuzuki@moz-F333A8C8.st.keio.ac.jp)
[07:39:55] *** Joins: pyrac (pyrac@A9EC89DE.73C89388.AD05C589.IP)
[07:39:57] *** Parts: berak (chatzilla@1A3729AE.FE11524D.16E13E53.IP) ()
[07:41:24] *** Quits: SiegeLord (sl@moz-56D7E78.bstnma.fios.verizon.net) (Ping timeout)
[07:42:38] *** Quits: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[07:42:38] *** Quits: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[07:42:45] *** Joins: boggle (boggle@moz-121DEC40.dip0.t-ipconnect.de)
[07:43:15] *** Joins: SiegeLord (sl@moz-56D7E78.bstnma.fios.verizon.net)
[07:45:40] *** Joins: heftig (heftig@moz-645AADE2.dip0.t-ipconnect.de)
[07:54:36] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[07:56:08] *** Quits: SiegeLord (sl@moz-56D7E78.bstnma.fios.verizon.net) (Quit: It's a joke. It's all a joke.)
[07:58:50] *** Joins: tilde (tilde@moz-9091C250.clienti.tiscali.it)
[07:59:33] *** Joins: lr (quassel@A0B983C9.98812F7A.4B164862.IP)
[07:59:49] *** Quits: ysuzuki (ysuzuki@moz-F333A8C8.st.keio.ac.jp) (No route to host)
[07:59:50] *** Joins: ysuzuki (ysuzuki@moz-F333A8C8.st.keio.ac.jp)
[08:00:43] *** Joins: Blub\w (wry@moz-A00F76BD.wireless.dyn.drei.com)
[08:00:54] *** Quits: tilde (tilde@moz-9091C250.clienti.tiscali.it) (Quit: NOPE NOPE NOPE)
[08:01:00] *** Joins: tilde (tilde@moz-9091C250.clienti.tiscali.it)
[08:01:03] *** Quits: tilde (tilde@moz-9091C250.clienti.tiscali.it) (Quit: tilde)
[08:01:37] *** Joins: tilde (tilde@moz-9091C250.clienti.tiscali.it)
[08:01:47] *** Quits: tilde (tilde@moz-9091C250.clienti.tiscali.it) (Quit: NOPE NOPE NOPE)
[08:02:01] *** Joins: tilde (tilde@moz-9091C250.clienti.tiscali.it)
[08:03:28] *** Quits: tilde (tilde@moz-9091C250.clienti.tiscali.it) (Quit: NOPE NOPE NOPE)
[08:03:32] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: Don't tell them I was here...)
[08:06:08] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[08:08:04] *** Quits: guitsaru (guitsaru@A8985A22.5DF68D0E.4C2245EF.IP) (Ping timeout)
[08:16:06] *** Joins: JonCarlos_ (Jon@moz-8F3C266E.nwrknj.fios.verizon.net)
[08:16:41] *** Quits: JonCarlos (Jon@moz-8F3C266E.nwrknj.fios.verizon.net) (Ping timeout)
[08:18:09] *** Quits: ysuzuki (ysuzuki@moz-F333A8C8.st.keio.ac.jp) (Client exited)
[08:18:31] *** Joins: ysuzuki (ysuzuki@moz-D48AB9A7.st.itc.keio.ac.jp)
[08:18:54] *** Joins: doener (doener@moz-724BBC7C.unitymediagroup.de)
[08:21:03] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[08:21:08] *** Joins: pnkfelix|rcirc (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[08:21:30] <doomlord_> trying to hack iOS support - seems I need to adapt the makefiles to generate "libuv.a" correctly ... this is spawned from another makefile, and didn't have a case for arm-apple-darwin so was falling through and not crosscompiling it. At the minute i'm struggling to get it to get all the right paths through... (CFRunLoop related issues)
[08:21:54] *** Joins: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net)
[08:22:10] <naq> is there a difference in performance if I let the compiler "guess" the type, if I write %? instead of %d or %s or whatever the type is? is it bad practice to format it like that?
[08:22:14] *** Quits: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[08:22:29] <aatch> naq, it depends
[08:22:36] <dbaupp> naq: probably not
[08:22:53] <aatch> It likely won't be noticeable
[08:23:09] <aatch> But things like strings produce this:
[08:23:09] <dbaupp> the type inference all happens at compile time, so the compiler eventually knows exactly what types things have
[08:23:14] <aatch> rusti, "Test"
[08:23:22] <aatch> rusti: "Test"
[08:23:23] <rusti> "Test"
[08:23:33] <dbaupp> rusti: fmt!("%?", "test")
[08:23:34] <rusti> ~"\"test\""
[08:23:36] *** Joins: akashj87 (akash@E5DBDB1A.1966838F.35E3DDC8.IP)
[08:23:36] <naq> dbaupp: good point
[08:23:42] <aatch> rusti: ~"Test"
[08:23:44] <rusti> ~"Test"
[08:24:24] <aatch> Basically, %? prints the representation of the data
[08:24:59] <aatch> if it can, it does it in a way that is valid Rust code
[08:25:04] <aatch> so for numbers, it works fine
[08:26:00] <aatch> If you're just doing it for debugging, go for it
[08:26:26] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[08:26:54] <aatch> rusti: struct Foo {a:int, b:~str}; let a = Foo {a:22, b:~"Twenty Two"}; a
[08:26:55] <rusti> {a: 22, b: ~"Twenty Two"}
[08:28:00] <naq> aatch: I haven't got that far yet
[08:28:21] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:28:50] <aatch> naq, I'm just pointing out what %? does
[08:29:31] <aatch> theoretically it could choke on a deeply nested structure
[08:29:36] <engla> without %? you'd have to thread through lots of ToStr trait bounds just to make debug prints
[08:30:36] <dbaupp> rusti: struct A { a: Option<@A> }; let mut a = A { a: None }; a.a = Some(@a); a
[08:30:37] <rusti> {a: Some(@{a: None})}
[08:30:54] *** kimundi is now known as zz_kimundi
[08:30:58] <pnkfelix|rcirc> naq: my rule of thumb is that if I want to render the data in some way, I use %s; if I want to see everything (or just want a Rust expression), I use %?
[08:31:30] <aatch> pnkfelix|rcirc, basically %? is for debugging
[08:31:37] <dbaupp> rusti: struct A { a: Option<@mut A> }; let mut a = @mut A { a: None }, v = Some(a); a.a <-> v
[08:31:38] <rusti> line longer than 100 columns, pastebinned: http://sprunge.us/MTSG
[08:31:56] <dbaupp> rusti: struct A { a: Option<@mut A> }; let a = @mut A { a: None }, v = Some(a); a.a <-> v; a
[08:31:57] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/UDHa
[08:32:06] <aatch> that doesn't seem right...
[08:32:09] <pnkfelix|rcirc> aatch: Right; I'm just pointing out that sometimes even when debugging you want to do some rendering to filter out the pieces you want.
[08:32:23] <dbaupp> rusti: struct A { a: Option<@mut A> }; let a = @mut A { a: None }; let mut v = Some(a); a.a <-> v; a
[08:32:26] <rusti> -bash: line 1:    16 Killed                  ./foo
[08:32:34] *** Joins: victorporof (victorporo@F1213546.14EB2DE0.79933D60.IP)
[08:32:40] <pnkfelix|rcirc> aatch: e.g. plug in Unicode  symbols for card suits rather than the particular enum tags I happened to use.
[08:32:53] <aatch> pnkfelix|rcirc, fair enough
[08:33:10] <aatch> dbaupp, looks like you managed the infinite loop
[08:35:38] <naq> rusti: is such a loyal bot
[08:35:40] <rusti> foo.rs:5:12: 5:16 error: expected `;` or `}` after expression but found `such`
[08:35:40] <rusti> foo.rs:5          is such a loyal bot
[08:35:40] <rusti>                      ^~~~
[08:35:48] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[08:35:59] <naq> ups
[08:36:03] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:36:11] <aatch> rusti: "am is very particular"
[08:36:13] <rusti> "am is very particular"
[08:36:38] <naq> didn't mean to pass that to it
[08:36:56] <dbaupp> rusti: enum Suit { â™¥, â™ , â™¦, â™£};  â™£
[08:36:57] <rusti> foo.rs:5:19: 5:20 error: unknown start of token: 9829
[08:36:57] <rusti> foo.rs:5          enum Suit { â™¥, â™ , â™¦, â™£};  â™£
[08:36:57] <rusti>                             ^
[08:37:01] <dbaupp> :(
[08:38:08] <aatch> Aww, I thought rust was fine with unicode
[08:38:25] <pnkfelix> rusti: io::println("\u2664");
[08:38:26] <rusti> â™¤
[08:38:40] <dbaupp> rusti: let Ã¥Ã¶Ã¤ = 1; Ã¥Ã¶Ã¤
[08:38:41] <rusti> 1
[08:38:49] <aatch> dbaupp, I ran what you made before locally, the OOM killer finished it off...
[08:39:25] <dbaupp> aatch: it is, but I guess the suits aren't in the correct unicode category for rust's identifiers
[08:39:27] <dbaupp> aatch: :D
[08:39:56] <aatch> enum Suit { câ™¥, câ™ , câ™¦, câ™£};  câ™£
[08:40:03] <aatch> rusti:enum Suit { câ™¥, câ™ , câ™¦, câ™£};  câ™£
[08:40:04] <rusti> foo.rs:5:20: 5:21 error: unknown start of token: 9829
[08:40:04] <rusti> foo.rs:5         enum Suit { câ™¥, câ™ , câ™¦, câ™£};  câ™£
[08:40:04] <rusti>                              ^
[08:40:07] *** Quits: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net) (Ping timeout)
[08:43:24] <dbaupp> rusti: enum Sets { â„•, â„, â„¤ }; (â„•, â„, â„¤)
[08:43:26] <rusti> line longer than 100 columns, pastebinned: http://sprunge.us/TTBd
[08:43:38] <dbaupp> eurgh
[08:44:10] <dbaupp> aatch: in theory, these are the legal start characters http://unicode.org/cldr/utility/list-unicodeset.jsp?a=[%3AXID_Start%3A]&g=
[08:44:41] <dbaupp> and these are the legal 'continue' characters http://unicode.org/cldr/utility/list-unicodeset.jsp?a=[%3AXID_Continue%3A]&g=
[08:44:56] <dbaupp> rusti: let â†ˆ = 1; â†ˆ
[08:44:57] <rusti> 1
[08:44:59] <doener> Can you create specializations of generic code? Like template specialization in C++?
[08:45:25] <dbaupp> doener: yes, by implementing traits, but otherwise no
[08:47:39] <doener> hm, probably wouldn't help anyway, due to different method signatures
[08:48:08] <pnkfelix> rusti: let sâ™¥ = 3; sâ™¥
[08:48:09] <rusti> foo.rs:5:13: 5:14 error: unknown start of token: 9829
[08:48:09] <rusti> foo.rs:5          let sâ™¥ = 3; sâ™¥
[08:48:09] <rusti>                       ^
[08:48:40] <pnkfelix> (oh, wait, needed to look the list of continue characters too; never mind.)
[08:49:44] <Diablo-D3> rust is unicode safe?
[08:49:49] <Diablo-D3> oh I guess not
[08:49:50] <aatch> Diablo-D3, mostly
[08:49:56] *** Quits: cdidd (cdidd@moz-91468BA5.broadband.corbina.ru) (Input/output error)
[08:50:00] <aatch> depends on what you mean
[08:50:06] * Diablo-D3 stabs anyone who starts writing code in letters I cant type
[08:50:15] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[08:51:47] <doener> the Interner is currently generic, but only used with @~. That means that you need owned string everywhere. A @~-only implementation can use find_equiv() and to_owned() to accept plain &str in intern()... Save ~1% of text in the resulting binary and 5% of compile time for libsyntax. Now I wonder whether if Interner really needs to be generic...
[08:51:52] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[08:53:22] <dbaupp> doener: couldn't it have Equiv<Something> as a bound on the generic parameter?
[08:54:25] <doener> dbaupp: it has that for find_equiv(), but AFAICT that won't work for intern()
[08:54:55] <dbaupp> doener: ok... I haven't actually looked at the code
[08:55:25] <dbaupp> (if you've got the change done, you should open a pull request and try to attract some attention to it :) )
[08:55:53] <doener> dbaupp: intern() might do both, a lookup and an insertion, while the former can handle Q:Equiv<T>, the latter needs T. You can do the transformation for &str, using to_owned(), but not for generic code
[08:56:26] <doener> yeah, I guess that's best, I'll just start with the extra StrInterner struct I currently have
[08:57:37] <dbaupp> Ok, I've got the code open now, where's the problem that requires to_owned()?
[08:59:30] <doener> dbaupp: I basically want intern(&self, val: &str) for Interner<@~>
[08:59:44] <doener> err, Interner<@~str>
[08:59:48] <dbaupp> doener: ah, ok
[09:00:30] <dbaupp> does it speed up the compiler, or just the time it takes to compile libsyntax?
[09:01:07] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Ping timeout)
[09:01:31] *** Quits: pnkfelix|rcirc (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Ping timeout)
[09:02:06] <dbaupp> aatch: about the infinite recursion thing, is that a bug? I.e. the reflection api is recurring into the @ pointer correctly?
[09:02:30] <aatch> dbaupp, I wouldn't say a bug exactly. It's expected, but wrong
[09:02:30] <doener> dbaupp: mostly the latter I guess, didn't measure the former. Just switched between the source file, using the same compiler
[09:02:35] <aatch> I made an issue for it
[09:02:41] *** Quits: z0w0 (zack@moz-A9182BA0.lns8.woo.bigpond.net.au) (Quit: Leaving.)
[09:02:44] <dbaupp> aatch: yeah, I saw
[09:03:19] <dbaupp> aatch: it seems like there just needs to be a (configurable) depth limit for the reflection?
[09:03:55] <dbaupp> doener: oh, ok. I'm guessing monomorphisation will mean that the former doesn't change much
[09:04:18] <aatch> dbaupp, I'm not really bothered how it does it. It could mark visited items (somehow) so it doesn't visit them again
[09:04:27] *** Joins: z0w0 (zack@moz-A9182BA0.lns8.woo.bigpond.net.au)
[09:05:14] <dbaupp> aatch: seems... tricky
[09:05:48] <aatch> It's the standard method for graph traversal, but a recursion limit works too
[09:05:53] *** Joins: fabiand (fabiand@moz-F3CDA8BE.adsl.alicedsl.de)
[09:23:41] *** Joins: mrhandle (Mibbit@11668BBC.18F72A69.6692E697.IP)
[09:30:07] <mrhandle> hello, I am trying to build rust-sdl on linux (Fedora) and I am getting unresolved name errors for 'cast::reinterpret_cast' and 'ptr::addr_of'
[09:30:54] <mrhandle> has there been any breaking changes in rust?
[09:31:10] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[09:31:18] *** Joins: pnkfelix|rcirc (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[09:31:51] <dbaupp> mrhandle: yes, they've been removed
[09:32:00] <mrhandle> oh!
[09:32:41] <mrhandle> is there an alternative for them?
[09:33:12] <mrhandle> (i didn't read rust-sdl code so I'm not sure why it's using those functions)
[09:33:35] <dbaupp> for addr_of I think you can use `as *int` or whatever, no idea about reinterpret_cast though 
[09:34:57] <mrhandle> i want to display generated graphics, is there an alternative to rust-sdl for rust?
[09:35:35] *** Joins: trapni (trapni@F0E22329.CB586464.544FF5A6.IP)
[09:36:28] *** zz_kimundi is now known as kimundi
[09:38:44] <aatch> dbaupp, reinterpret_cast was renamed to transmute_copy
[09:42:13] <nmatsakis> it's unclear to me why we still need it at all...
[09:42:25] <nmatsakis> isn't it just transmuting a pointer?
[09:42:50] <nmatsakis> oh, I see.
[09:43:22] <aatch> transmute_copy does a copy, even if it's non copyable!
[09:43:35] <nmatsakis> yes, I see.
[09:44:30] <mrhandle> i just grepped rust's source code and reinterpret_cast is still there
[09:45:22] <nmatsakis> it's defined only in stage0
[09:45:24] <nmatsakis> for some reason
[09:46:08] <mrhandle> oops my bad
[09:46:20] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[09:46:47] <aatch> nmatsakis, presumably the snapshot still needs it or something?
[09:47:08] <nmatsakis> aatch: presumaby
[09:56:21] *** Quits: trapni (trapni@F0E22329.CB586464.544FF5A6.IP) (Ping timeout)
[09:56:34] *** Quits: thou (thou@moz-1C1CA9F7.fasttrackcomm.net) (Input/output error)
[09:58:00] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[09:58:50] *** Quits: mixi (mixi@moz-DBD8904A.org) (Quit: Life is too long...)
[09:58:58] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[09:59:22] *** Joins: tilde (tilde@moz-9091C250.clienti.tiscali.it)
[10:00:48] <aatch> Aww, no div_round in the Integer trait
[10:04:37] *** Joins: mixi (mixi@moz-DBD8904A.org)
[10:07:45] *** Quits: SirSkidmore (taylor@A8CF1C90.14855463.8C3A19BB.IP) (Ping timeout)
[10:08:28] *** Quits: ysuzuki (ysuzuki@moz-D48AB9A7.st.itc.keio.ac.jp) (Client exited)
[10:08:44] *** Quits: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net) (Ping timeout)
[10:08:55] *** Joins: SirSkidmore (taylor@A8CF1C90.14855463.8C3A19BB.IP)
[10:10:00] *** Joins: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net)
[10:11:22] *** Joins: trapni (trapni@moz-7C7C1909.dawanda.com)
[10:12:52] *** Quits: Blub\w (wry@moz-A00F76BD.wireless.dyn.drei.com) (Quit: bbl)
[10:30:29] <pnkfelix> what do the B-* labels in the github issues denote: { B-clarifying, B-reproduce, B-RFC }, what classification are they meant to provide?  E.g. does it represent a pending request on the bug?
[10:41:31] *** Quits: boggle (boggle@moz-121DEC40.dip0.t-ipconnect.de) (Quit: boggle)
[10:42:11] *** Quits: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net) (Ping timeout)
[10:42:51] *** Joins: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net)
[10:44:33] *** Joins: jfredett (jfredett@moz-C01C350.bstnma.fios.verizon.net)
[10:45:32] <nmatsakis> pnkfelix: there is a wiki page on the labels; I honestly don't recall
[10:45:40] <nmatsakis> pnkfelix: I mean besides the obvious
[10:45:49] <pnkfelix> nmatsakis: i should have looked on the wiki first, give me a sec
[10:45:50] <kimundi> pnkfelix: there is a list on the wiki that explains it i think
[10:46:15] <pnkfelix> the fact that there's no wiki search is sort of shameful
[10:47:37] <rsaarelm> Is the fmt! construct something that's defined in the language itself or a library thing that can actually be made with the macro facility?
[10:48:05] <dbaupp> pnkfelix: '<blah> site:github.com/mozilla/rust/wiki' on google?
[10:48:18] <kimundi> rsaarelm: kinda both, kinda neither
[10:48:21] *** Quits: jfredett (jfredett@moz-C01C350.bstnma.fios.verizon.net) (Ping timeout)
[10:48:59] <nmatsakis> pnkfelix: you know you can checkout the wiki as a git repo?
[10:49:11] <nmatsakis> pnkfelix: by far the best way to search and edit :)
[10:49:22] <pnkfelix> dbaupp: good idea, but hmm, "labels" is a remarkably poor search term; lots of meeting notes related to lifetime labels ...
[10:49:42] <kimundi> rsaarelm: Its defined in the compiler atm without the ability to write it yourself. but it is planned to be able to do that.
[10:49:45] <pnkfelix> nmatsakis: I did know that a few days ago, but did not think to employ that capabiilty.  that sounds potentially better than leveraging google.
[10:50:20] <rsaarelm> Ok, thanks.
[10:50:43] <rsaarelm> I'm interested in the possibilities of the macro system being strong enough for writing complex DSLs eventually.
[10:51:08] <nmatsakis> rsaarelm: plan is to allow syntax extensions, meaning arbitrary code you can load. essentially compiler plugins.
[10:51:12] <rsaarelm> Apparently it's not all there yet, but at least it's promising if it's planned to be.
[10:51:36] <nmatsakis> this is how fmt! is implemented...
[10:51:41] <nmatsakis> ...but right now we don't load 
[10:51:50] <nmatsakis> dynamically that is
[10:51:54] <aatch> rsaarelm, it's mostly just the dynamic loading bit
[10:52:09] <aatch> And I guess having some reasonable API for it.
[10:52:15] <nmatsakis> the API is...semi-defined
[10:52:29] <nmatsakis> though it's old and not been thoughtfully considered
[10:52:33] *** Quits: ssbr_ (scorchsabe@A9D9D38C.B6F034AC.72A31D6.IP) (Connection reset by peer)
[10:52:37] <nmatsakis> unless jclements has done something in that direction
[10:52:40] <aatch> nmatsakis, I've seen the "API"
[10:52:41] <nmatsakis> or someone else
[10:52:50] *** Joins: ssbr_ (scorchsabe@A9D9D38C.B6F034AC.72A31D6.IP)
[10:52:50] <nmatsakis> aatch: ok :)
[10:52:55] <aatch> :P
[10:53:02] <nmatsakis> I guess what I mean is: we don't cheat, right now
[10:53:03] <nmatsakis> afaik
[10:53:10] <nmatsakis> that is we don't access parts of the compiler we'd never want to expose
[10:53:13] *** Joins: snowmantw_ (Mibbit@moz-DF60655C.dynamic.hinet.net)
[10:53:27] <aatch> nmatsakis, I guess that's true
[10:53:36] *** Joins: jfredett (jfredett@moz-C01C350.bstnma.fios.verizon.net)
[10:54:00] <dbaupp> nmatsakis: about the issue you opened about `for` loops, would the type-checker/trans changes stop http://www.reddit.com/r/rust/comments/1d28fm/a/c9mzm9q?context=1 from working?
[10:54:40] <nmatsakis> dbaupp: yes...
[10:54:57] <dbaupp> :(
[10:55:16] <dbaupp> (I like the suggestion except for that...)
[10:55:29] <nmatsakis> fair enough.
[10:55:30] <pnkfelix> ah, "B-" stands for "Blocked"
[10:55:59] *** Quits: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net) (Ping timeout)
[10:56:06] *** Joins: boggle (boggle@moz-121DEC40.dip0.t-ipconnect.de)
[10:56:35] *** Quits: tilde (tilde@moz-9091C250.clienti.tiscali.it) (Quit: NOPE NOPE NOPE)
[10:58:00] *** Joins: tilde (tilde@moz-9091C250.clienti.tiscali.it)
[10:58:23] <dbaupp> nmatsakis: https://github.com/mozilla/rust/pull/6182 r?
[10:58:42] *** Joins: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net)
[11:01:56] *** Quits: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr) (Ping timeout)
[11:02:55] <nmatsakis>  dbaupp r+...
[11:03:05] <nmatsakis> ...looks harmless enough.
[11:03:25] * nmatsakis casually adds in the next stack overflow bug.
[11:03:44] *** Quits: fabiand (fabiand@moz-F3CDA8BE.adsl.alicedsl.de) (Quit: Verlassend)
[11:03:48] <nmatsakis> or rather security exploit
[11:04:26] <dbaupp> nmatsakis: I tried to be careful ;)
[11:04:45] <nmatsakis> dbaupp: ;)
[11:04:54] <dbaupp> (at least, with explicit lengths everywhere it should be fine...)
[11:05:44] <snowmantw_> hello, I've found that extra-debug-info didn't work after some commits...
[11:05:59] <snowmantw_> just make sure it's not a bug
[11:06:48] *** Joins: fabiand (fabiand@moz-F3CDA8BE.adsl.alicedsl.de)
[11:07:20] <aatch> snowmantw_, extra-debug-info never really worked anyway
[11:07:46] <dbaupp> snowmantw_: it makes rustc `Abort` for me
[11:08:04] <snowmantw_> it throw LLVM error now
[11:08:11] <snowmantw_> at CodeGen stage
[11:08:35] <aatch> snowmantw_, oh, it does that because it can't find certain bits of information related to debugging
[11:08:39] <snowmantw_> but some tests works previously
[11:08:47] <aatch> mostly because we aren't generating it
[11:08:54] <aatch> not all code causes it though
[11:08:57] <dbaupp> snowmantw_: how long ago is "previously"?
[11:09:06] <snowmantw_> about 1 week
[11:09:14] <snowmantw_> after that I pull incoming again
[11:09:30] <dbaupp> how long since you'd pulled incoming before that?
[11:09:45] <snowmantw_> 1 week
[11:09:48] <aatch> snowmantw_, "Produce debug info (experimental)", "Extra debugging info (experimental)"
[11:10:03] <aatch> emphasis on experimental
[11:10:36] <dbaupp> looks like bors (or the buildbots) have hung again
[11:11:29] <aatch> hey, for a date construction function `fn mk_date(year, month, day)`, how would you expect a month or day of 0 to be interpreted?
[11:11:29] <snowmantw_> yeah...I previously tried to implement the `create_ty`s enum function based on those worked parts, but now I can't continue that
[11:12:12] <dbaupp> aatch: same as 1 maybe? but that seems really strange
[11:12:23] <aatch> dbaupp, I was thinking that
[11:12:28] <dbaupp> or just force it to be in [1..12]
[11:12:39] <dbaupp> (i.e. assert that)
[11:13:18] <aatch> dbaupp, it's actually quite useful to be able to give it some thing like (2012, 14, 10) and have it be the 10th of Feb 2013
[11:13:20] *** Quits: a_m0d|home (a_m0d@moz-9F925EFA.hm.shawcable.net) (Quit: Leaving.)
[11:14:04] <cmr> You mean 2012, right?
[11:14:18] <aatch> cmr, nope
[11:14:31] <cmr> "(2012, 14, 10) and have it be the 10th of Feb 2013"
[11:14:42] <pnkfelix> 14 == 12 + 2
[11:14:48] <aatch> month 14 is month 2 the next year
[11:14:49] <dbaupp> aatch: that's true
[11:14:56] <cmr> ohhhhhhhhhh
[11:15:04] <dbaupp> aatch: force it to be non-zero?
[11:15:11] <cmr> (this is what I get for breaking my "no irc before tea" rule)
[11:15:27] <aatch> I'll just have it be 0 -> 1
[11:15:56] <aatch> The behaviour will be documented, I'm just making sure that it makes sense
[11:16:41] *** Joins: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP)
[11:17:59] <pnkfelix> aatch: I can understand making it easy to do date(2012, 12, 10) + months(2) == date(2013, 2, 10), and likewise date(2012, 12, 10) + months(14) == date(2014, 2, 10).  But is it really that important to accept 14 as a month input in the date construction itself?
[11:18:50] <aatch> pnkfelix, it's not that important, but since I'll be needing date normalization code anyway
[11:19:44] <pnkfelix> just seems like an easy way to overlook bugs.  (e.g. someone doing date(year, day, month).  but i am paranoid.
[11:20:50] <aatch> pnkfelix, you'll get bugs that way either way
[11:21:09] <pnkfelix> aatch: yes I'm aware
[11:21:39] <pnkfelix> aatch: no amount of safe-guards will replace end-user testing, yada yada
[11:22:28] <aatch> You could do let mut date = DateTime::zero(); date = date.set_month(m).. etc
[11:23:34] <aatch> Actually, I have changed my mind, at least on the negative values side
[11:24:04] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.0)
[11:26:31] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[11:33:04] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Textual IRC Client: www.textualapp.com)
[11:34:40] <friggle> why not enums? date(Year(2012), Month(12), Date(10)) + Month(2)
[11:34:57] <friggle> s/Date/Day
[11:35:18] <dbaupp> friggle: what's the type of `date`?
[11:35:50] <aatch> friggle, other than knowing the "type" of field, that doesn't really solve the problem
[11:37:09] <aatch> You also don't get any static checking that way, unless they are single-item enums
[11:37:13] <friggle> actually tuple structs would be better
[11:37:32] <aatch> Or that
[11:38:25] <friggle> it helps protect against date(year, day, month)
[11:39:09] <aatch> friggle, out of all the bugs you can encounter with dates, that is the easiest to find and fix
[11:39:39] <xenocons> http://www.icfpconference.org/icfp2013/index.html
[11:40:28] <friggle> aatch: fair enough
[11:41:12] <aatch> try date + 86400s != date+ 1day
[11:41:18] <dbaupp> xenocons: how was the thing? (Did you meet bjz?)
[11:41:29] <xenocons> dbaupp: yup! i did
[11:41:36] <xenocons> it was really good
[11:41:41] <xenocons> a nice intellectual vibe
[11:42:02] <xenocons> it was my first experience so far in being around a group of people IRL who know functional programming
[11:42:17] <xenocons> its refreshing
[11:42:59] <xenocons> (tbh im quite interested in devoting some time to learning clojure) </endhijacking>
[11:43:02] <xenocons> )
[11:43:08] <xenocons> no wait no brace!
[11:43:25] <aatch> rusti: ())
[11:43:25] <rusti> foo.rs:5:11: 5:12 error: incorrect close delimiter: `)`
[11:43:25] <rusti> foo.rs:5          ())
[11:43:25] <rusti>                     ^
[11:43:35] <xenocons> hah
[11:43:44] <xenocons> rusti: (())
[11:43:52] <xenocons> unit i guess
[11:44:00] <xenocons> rusti: ((),())
[11:44:01] <rusti> ((), ())
[11:44:05] <aatch> rusti: fmt!("%?",(()))
[11:44:06] <rusti> ~"()"
[11:44:19] <dbaupp> xenocons: yay :D
[11:44:28] <xenocons> dbaupp: ill be going next time too
[11:44:45] <dbaupp> rusti: (((),),)
[11:44:46] <rusti> (((),),)
[11:45:35] <xenocons> rusti: ( (let x = |a| { a } in x(4); ), ())
[11:45:36] <rusti> foo.rs:5:12: 5:15 error: found `let` in ident position
[11:45:36] <rusti> foo.rs:5          ( (let x = |a| { a } in x(4); ), ())
[11:45:36] <rusti>                      ^~~
[11:45:56] <xenocons> rusti: ( (fn z() { let x = |a| { a } in x(4); }), ())
[11:45:56] <rusti> foo.rs:5:12: 5:14 error: found `fn` in ident position
[11:45:56] <rusti> foo.rs:5          ( (fn z() { let x = |a| { a } in x(4); }), ())
[11:45:56] <rusti>                      ^~
[11:46:02] <xenocons> didnt think so
[11:46:35] <xenocons> is there even 'in' syntax in rust?
[11:46:37] <dbaupp> rusti: ({ let x = |a| { a }; x(4) }, ())
[11:46:38] <rusti> (4, ())
[11:46:47] <xenocons> ahhh semicolon
[11:46:52] <xenocons> cool
[11:47:04] <xenocons> hrmmm
[11:47:12] <aatch> rusti: core::run::run_program("cat", [~"foo.rs"])
[11:47:14] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/chHS
[11:47:31] <xenocons> rusti: ({let x = |a| { a }; x }, ())
[11:47:31] <dbaupp> xenocons: and curly braces... (almost) every block can be an expression if you leave the semicolon off the last expression
[11:47:32] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/hdMc
[11:47:34] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[11:47:47] <dbaupp> xenocons: nice
[11:48:03] <xenocons> whoah weird error
[11:48:45] <aatch> xenocons, congrats, you found a bug
[11:48:52] <dbaupp> https://github.com/mozilla/rust/issues/5062
[11:48:55] <xenocons> :o 
[11:49:05] <dbaupp> (is the same message)
[11:49:18] <xenocons> interesting
[11:49:24] <xenocons> i was expecting it to return a function type
[11:49:24] <dbaupp> rusti: ({let x = |a: int| -> int { a }; x }, ())
[11:49:25] <rusti> (, ())
[11:49:48] <dbaupp> xenocons: I think it's because the compiler is struggling with handling the type inference
[11:49:58] <aatch> basically, it's complaining that it can't de-ref a variable of type [type error]
[11:50:05] <dbaupp> rusti: ({let x = |a| -> int { a }; x }, ())
[11:50:07] <rusti> (, ())
[11:50:22] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[11:51:04] <xenocons> interesting
[11:51:18] <aatch> rusti: let x : ~fn(int) -> int = |a| a; x
[11:51:27] <xenocons> oh right, i just saw 'segmentation fault'
[11:51:31] <dbaupp> rusti: ({let x = |a| { a }; x }(1), ())
[11:51:31] <xenocons> heh.
[11:51:32] <rusti> (1, ())
[11:51:40] <xenocons> wait, i must try this locally
[11:52:30] <dbaupp> rusti: ({let x = &"foo"; x }, ())
[11:52:31] <rusti> ("foo", ())
[11:52:51] <dbaupp> rusti: ({let x = 1, y = &x; y }, ())
[11:52:52] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/PWUd
[11:54:05] <xenocons> hm
[11:54:09] <xenocons> i cant seem to compile http://sprunge.us/PWUd
[11:54:14] <xenocons> oops
[11:54:18] <xenocons> ({let x = |a| { a }; x }, ());
[11:54:24] <xenocons> fn main() { ({let x = |a| { a }; x }, ()); }
[11:54:29] <xenocons> test.rs:3:10: 3:21 error: Unconstrained region variable #0
[11:54:57] *** Quits: sully (sully@moz-ECFB7516.moroso.emarhavil.com) (Ping timeout)
[11:55:10] *** Joins: sully (sully@moz-ECFB7516.moroso.emarhavil.com)
[11:55:25] <xenocons> using 0.6 release
[11:55:50] <dbaupp> probably something to do with the lifetime of `x` since it is a stack closure
[11:57:34] *** Quits: mrhandle (Mibbit@11668BBC.18F72A69.6692E697.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:57:57] <xenocons> damnit i want to put this under a debugger
[11:58:02] <xenocons> and inspect the memory at segfault
[11:58:20] * xenocons scratches chin and considers writing a fuzzer
[11:58:34] <aatch> xenocons, there is a fuzzer..
[11:58:45] <dbaupp> a broken, broken fuzzer
[11:58:51] <aatch> dbaupp, shhh
[11:59:23] <dbaupp> xenocons: https://github.com/mozilla/rust/tree/master/src/libfuzzer feel free to fix it ;P
[11:59:45] <xenocons> heh
[11:59:58] <xenocons> im not confident enough to model rust in rust yet
[12:00:15] <xenocons> but i could make short work of getting some coverage of the language using ADTs
[12:00:28] <xenocons> ive been developing a fuzzer for a not too distance curly braced language
[12:00:41] <dbaupp> xenocons: well, you could at least update it to the latest syntax :D
[12:00:54] *** Quits: akashj87 (akash@E5DBDB1A.1966838F.35E3DDC8.IP) (Quit: Leaving)
[12:01:06] * xenocons thinks it might actually be a good way to learn rust (looks at libfuzzer)
[12:01:46] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[12:05:53] <xenocons> problem: startup time on windows (of the actual compiler) might need some love, i want to look at this
[12:05:53] <xenocons> makes fuzzing infeasible 
[12:06:01] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[12:10:52] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:10:54] *** Joins: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl)
[12:10:54] <xenocons> dbaupp: can you produce that scope bug on linux?
[12:11:03] <strcat> aw, bors got stuck
[12:11:07] <xenocons> rusti: ({let x = |a| { a }; x }, ())
[12:11:08] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/dCRV
[12:11:11] * strcat forces builds
[12:11:53] <bjz> xenocons: I wonder if that's a rusti issue
[12:12:05] <bjz> xenocons: does it work locally?
[12:12:10] <dbaupp> xenocons: yes
[12:12:10] <xenocons> bjz: it could very well be, i cant reproduce on windows using 0.6 
[12:12:18] <xenocons> dbaupp: nice!
[12:12:32] <xenocons> can you gdb and tell me if its pointing to invalid memory :>
[12:12:40] <dbaupp> bjz: it's two different things `fn main() { ({let x = |a| { a }; x }, ()); }` gives `test.rs:3:10: 3:21 error: Unconstrained region variable #0`
[12:12:53] <dbaupp> wait, xenocons, do you mean that one?
[12:12:57] <xenocons> yeh
[12:13:01] <bjz> ahh
[12:13:12] <strcat> alright I think that is supposed to fix it
[12:13:35] <dbaupp> xenocons: it's not a compiler bug (an ICE), it's a error in the program
[12:13:59] <xenocons> whats the reason behind the segmentation fault?
[12:14:31] <dbaupp> xenocons: which one?
[12:14:36] <xenocons> is that how the rust irc bot handles it or something
[12:14:41] <xenocons> rusti: ({let x = |a| { a }; x }, ())
[12:14:42] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/FXgQ
[12:15:02] <dbaupp> rusti: fn foo() { let x = |a| { a }; x(1) }
[12:15:03] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/NZbB
[12:15:22] <dbaupp> xenocons: that one is a bug
[12:15:43] <dbaupp> and it's different to the constrained region variable one
[12:15:48] <xenocons> dbaupp: the one you just pasted, or the one i did?
[12:16:06] <dbaupp> yours
[12:16:15] <xenocons> ok, thats the one i cant reproduce locally
[12:16:55] <xenocons> can the rusti bot owner get the dump or something?
[12:17:00] <dbaupp> (mine was me testing something that seems to put my local rust into an infinite loop)
[12:17:05] <xenocons> ahh
[12:18:04] <dbaupp> xenocons: are you running rust in a terminal?
[12:18:25] <kimundi> xenocons: each rusti request spins up a fresh vm, so any crash data will be losst directly
[12:18:33] <xenocons> nope, just windows command prompt, compiling with rustc
[12:18:39] <xenocons> kimundi: right
[12:18:52] <xenocons> if i cant reproduce it though i wont be able to log a bug
[12:19:33] <dbaupp> xenocons: you don't need to, it's already been done
[12:19:44] <dbaupp> https://github.com/mozilla/rust/issues/5062
[12:20:00] <xenocons> oh right
[12:20:02] <dbaupp> rusti: None
[12:20:04] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/fEFf
[12:21:04] <xenocons> how does rusti compile these things
[12:21:05] <dbaupp> the problem is rust tries to work out the type of x, but it can't, so it substitutes the `type_error` pseudo-type
[12:21:13] <xenocons> is it just dropping it in main () { }
[12:21:13] <nmatsakis> dbaupp: I have a question about that PR...did you by any chance benchmark the effect of not using unsafe code but just calling str::reserve
[12:21:19] <kimundi> rusti: let v: Option<uint> = None; v
[12:21:22] <rusti> None
[12:21:24] <nmatsakis> dbaupp: (also what did you test with?)
[12:21:27] <dbaupp> nmatsakis: yeah, little effect
[12:21:29] <kimundi> xenocons: jup
[12:21:35] <dbaupp> nmatsakis: what do you mean?
[12:21:51] <pnkfelix> strcat: how do you unwedge bors ?  (For that matter, how are you determining that it is indeed stuck?  The buildbot web page does not make this obvious to me.)
[12:21:57] <xenocons> kimundi: so shouldn't i be able to compile fn main () { None }
[12:22:30] <strcat> pnkfelix: http://buildbot.rust-lang.org/console?branch=auto&refresh=15 can see here that it stopped actually doing something
[12:22:38] <strcat> pnkfelix: so I forced the build bors expects on the 3 auto bots
[12:22:41] <nmatsakis> dbaupp: ok, so the perf wins were chiefly from the unsafe copying code? I am wondering if we should find a way to tune push_str in that case...
[12:22:41] <kimundi> xenocons: Well, None can be any Option<T>, it needs a type hint
[12:22:52] <strcat> pnkfelix: sometimes buildbot builds the wrong commit
[12:22:55] <strcat> so bors gets stuck
[12:22:56] <xenocons> ah
[12:23:11] <dbaupp> nmatsakis: yes (my testsuite was modifying this https://gist.github.com/huonw/2f5c84320675cdc04177 )
[12:23:14] <pnkfelix> strcat: yeah I've heard graydon discuss some problems with buildbot / bors confusion
[12:23:26] <strcat> pnkfelix: it's basically entirely buildbot's fault
[12:23:29] <strcat> the git plugin isn't working right
[12:23:36] <dbaupp> nmatsakis: the main problem seems to be repeatedly doing wasted work
[12:23:39] <pnkfelix> strcat: how are you forcing the builds?  Is there some repo you are pushing to ?
[12:23:49] <strcat> pnkfelix: http://buildbot.rust-lang.org/builders/auto-mac there's an interface
[12:23:57] <pnkfelix> strcat:  ah thank you
[12:24:19] <dbaupp> nmatsakis: https://github.com/huonw/rust/blob/5714e2c11b939628247dd0107545e2feb8b74b47/src/libcore/str.rs#L220
[12:25:04] <kimundi> rusti: core::run::run_program(~"cat", ~[~"foo.rs"]);
[12:25:06] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/Dgjg
[12:25:10] <dbaupp> the lhs.len() call there is wasted when calling push_str in a loop, because the information was know at the end of the previous loop
[12:25:11] <kimundi> xenocons: ^
[12:25:28] <xenocons> kimundi: ahh sweet
[12:25:35] <dbaupp> nmatsakis: similarly with the set_len and constantly converting lhs to a buffer
[12:26:05] <xenocons> rusti: ()
[12:26:09] <xenocons> ok that makes sense
[12:26:31] <dbaupp> (i.e. if you can reserve enough and then only do the reserve/buffer conversion/set length once, you save a lot, and it makes the loop compile to half a dozen or so assembly instructions + a call to memmove)
[12:27:09] <dbaupp> (there should only be once mention of reserve in that last sentence...)
[12:27:15] <dbaupp> *one
[12:28:46] <pascal> I'm having trouble installing packages via rustpkg on two different machines: http://pastebin.com/hUTB8zbw - what am I missing?
[12:29:14] <kimundi> pascal: The fact that rustpkg sin't usable yet ;)
[12:29:29] <kimundi> pascal: it'S new, and still being worked on
[12:30:44] <pascal> kimundi: Oh, ok. So new that I don't even need to file a bug?
[12:30:56] <kimundi> That I'm not sure
[12:31:03] <kimundi> Better file a bug
[12:31:40] <kimundi> Better have duplicated or unnecessary bug reports than no bug report. :)
[12:32:17] <pascal> Will do - I'll look through the other A-pkg bugs first
[12:35:36] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[12:36:29] *** Quits: tilde (tilde@moz-9091C250.clienti.tiscali.it) (Ping timeout)
[12:36:37] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[12:39:43] *** Joins: tilde (tilde@moz-D9FBE924.business.telecomitalia.it)
[12:45:10] *** Quits: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net) (Ping timeout)
[12:47:12] *** Joins: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net)
[12:47:13] <bjz> xenocons: https://github.com/mozilla/rust/issues/2736 ?
[12:48:58] <strcat> nmatsakis: https://github.com/mozilla/rust/pull/6186 r?
[12:51:57] <aatch> bjz, I just want to say, I'm loving the new numeric traits
[12:52:10] <bjz> aatch: really?
[12:52:17] <bjz> aatch: do they help?
[12:52:28] *** Joins: akashj87 (akash@5B384CEF.2BC2F975.35E3DDC8.IP)
[12:52:30] <aatch> Well it's a lot easier to find things for one
[12:52:42] *** Quits: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net) (Ping timeout)
[12:52:55] <bjz> :)
[12:53:07] *** Joins: ssbr__ (scorchsabe@A9D9D38C.B6F034AC.72A31D6.IP)
[12:53:21] <nmatsakis> strcat: r+
[12:53:23] <nmatsakis> dbaupp: I see
[12:53:30] * nmatsakis catches up
[12:53:35] *** Joins: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net)
[12:53:54] *** Quits: ssbr_ (scorchsabe@A9D9D38C.B6F034AC.72A31D6.IP) (Ping timeout)
[12:54:10] <bjz> aatch: it's a shame rustdoc doesn't show inherited traits
[12:54:17] <bjz> z0w0: ^
[12:54:23] <bjz> :)
[12:54:43] <xenocons> bjz: cool
[12:54:57] <xenocons> thats useful
[12:55:06] <dbaupp> nmatsakis: is it worth the larger attack surface though?
[12:55:16] <xenocons> of particular interest is: when stack growth fails, because this should be easy so simulate
[12:56:04] * xenocons still working out how to use 'github'
[12:56:39] <bjz> what is this github thing
[12:56:46] <kimundi> xenocons: Any specific questions?
[12:56:46] * bjz grmbles
[12:56:59] <xenocons> kimundi: this issue tagging, is there a legend to describe them
[12:57:14] <xenocons> like, 'i-wrong'
[12:57:23] <bjz> xenocons: yeah, that's a rust thing
[12:57:24] <kimundi> xenocons: There is a legend on the wiki, but you can't tag them yourself anyway.
[12:57:34] <bjz> xenocons: I don't understand them either
[12:57:34] <xenocons> ah right
[12:57:37] <xenocons> heh
[12:57:38] <bjz> :P
[12:57:43] <aatch> Umm, did rust test/rustc --test break for anyone else?
[12:57:52] *** Quits: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[12:57:55] <kimundi> A: Area, B: Blocking etc
[12:58:08] <xenocons> so B = bad
[12:58:13] <xenocons> because its blocking progress?
[12:58:15] <aatch> Ok, so just me apparently
[12:58:28] <kimundi> xenocons: SOmething like that
[12:58:32] <xenocons> ok
[12:58:35] <dbaupp> aatch: works for me
[12:58:46] <aatch> I know why.
[12:58:56] <kimundi> xenocons: "Bugs that need to be fixed so that other bugs/features can be tackled"
[12:59:05] <aatch> Stupid test harness not using proper paths
[12:59:07] <xenocons> ahh
[13:01:21] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[13:01:54] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[13:05:04] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[13:05:05] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/ApMvdw
[13:05:05] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[13:05:16] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[13:07:13] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[13:07:46] <xenocons> crap bedtime
[13:08:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[13:08:06] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/esdJrw
[13:08:06] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[13:08:07] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[13:08:07] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/SXeA1g
[13:08:07] <ghrust> 13rust/06auto 14d6697e7 15Daniel Micay: pass along CFLAGS/LINK_FLAGS to libuv...
[13:08:07] <ghrust> 13rust/06auto 14c716027 15Daniel Micay: pass optimization flag to the linker
[13:08:07] <ghrust> 13rust/06auto 1407e8e7f 15bors: auto merge of #6176 : thestinger/rust/libuv_optimize, r=brson...
[13:08:09] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[13:09:46] *** Joins: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr)
[13:14:17] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[13:16:29] <strcat> yay
[13:16:34] <strcat> pnkfelix: worked \o/
[13:16:52] <pnkfelix> strcat: thanks!
[13:17:04] *** Quits: tilde (tilde@moz-D9FBE924.business.telecomitalia.it) (Quit: brb)
[13:17:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[13:17:06] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1407e8e7f to 14d1f7220: 02http://git.io/N3iJvQ
[13:17:06] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[13:17:21] <strcat> huh.
[13:17:28] *** Quits: z0w0 (zack@moz-A9182BA0.lns8.woo.bigpond.net.au) (Quit: Leaving.)
[13:19:02] <strcat> oh apple's ld doesn't have -O1? weird
[13:19:38] *** Joins: catpig (catpig@moz-AE054533.dip0.t-ipconnect.de)
[13:19:57] *** Joins: Erik (Erik-S@moz-252DBA2.hsd1.co.comcast.net)
[13:20:52] <strcat> it has -O on freebsd and windows ;\
[13:21:00] * strcat sighs
[13:21:08] <aatch> apple ld is stupid
[13:21:46] <aatch> I'm sure this falls into the "be different because we can" category of corporate asshatery
[13:27:28] *** Quits: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr) (Ping timeout)
[13:27:54] <aatch> Sweet, I have this working: date(1970, 01, 01) == date(1969,12,32)
[13:27:58] *** Quits: snowmantw_ (Mibbit@moz-DF60655C.dynamic.hinet.net) (Quit: http://www.mibbit.com ajax IRC Client)
[13:27:59] *** Joins: tilde (tilde@moz-9091C250.clienti.tiscali.it)
[13:28:04] *** Quits: tilde (tilde@moz-9091C250.clienti.tiscali.it) (Quit: tilde)
[13:28:13] *** Joins: tilde (tilde@moz-9091C250.clienti.tiscali.it)
[13:29:59] *** aatch is now known as aatch|bed
[13:32:15] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[13:33:23] <strcat> meh I'll just worry about that commit later
[13:33:43] <strcat> lets see if bors understands this...
[13:35:50] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Ping timeout)
[13:36:28] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[13:45:46] <nmatsakis> dbaupp: is what worth th elarger attack surface?
[13:48:32] <dbaupp> nmatsakis: the str connect/concat optimisation vs unsafe pointer code
[13:48:36] *** Quits: wuwei`lab (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Quit: Leaving)
[13:50:50] <nmatsakis> dbaupp: oh. I'm...not too worried. I figure that str/vec code is stuff we'll want to hyper optimize and, of course, hyper vet
[13:51:36] <dbaupp> nmatsakis: ok
[13:52:18] *** kimundi is now known as zz_kimundi
[13:52:54] *** Quits: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP) (Ping timeout)
[13:52:59] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[13:53:37] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Ping timeout)
[13:53:50] *** victorporof is now known as RogueVector
[13:55:44] *** Quits: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net) (Quit: KVIrc 4.0.4 Insomnia http://www.kvirc.net/)
[13:56:32] *** Joins: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net)
[13:56:33] *** Joins: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP)
[13:56:33] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[13:57:11] <strcat> I don't really understand why apple's ld works differently than the regular bfd/gold or even LLVM's experimental one
[13:57:16] * strcat sighs
[13:58:08] <bstrie> because steve jobs had a burning hatred for software developers?
[13:59:06] *** Joins: lkuper (lkuper@moz-D6AAFF3.cs.indiana.edu)
[13:59:11] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[13:59:12] *** Joins: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net)
[13:59:50] *** Quits: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[14:04:52] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[14:04:59] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[14:06:13] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[14:08:01] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[14:08:09] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[14:10:02] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[14:11:26] *** Quits: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[14:11:34] *** Joins: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com)
[14:11:34] *** ChanServ sets mode: +o nmatsakis
[14:14:05] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[14:14:05] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/YNHncg
[14:14:05] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[14:14:50] <pnkfelix> nmatsakis: somehow, call me crazy, somehow I suspect the people interested in Rust aren't interested in programming to the I-structure model.
[14:14:54] <pnkfelix> nmatsakis: :)
[14:15:46] *** Joins: eholk (eholk@moz-68894880.hfc.comcastbusiness.net)
[14:16:13] *** Joins: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[14:16:44] *** Joins: cdidd (cdidd@moz-21D399F7.broadband.corbina.ru)
[14:17:08] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[14:17:08] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/2Rdp-Q
[14:17:08] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[14:17:08] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[14:17:08] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/QR616Q
[14:17:08] <ghrust> 13rust/06auto 14d6697e7 15Daniel Micay: pass along CFLAGS/LINK_FLAGS to libuv...
[14:17:08] <ghrust> 13rust/06auto 1489377ea 15bors: auto merge of #6176 : thestinger/rust/libuv_optimize, r=thestinger...
[14:17:09] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[14:17:10] <nmatsakis> pnkfelix: likely true 
[14:17:21] <nmatsakis> pnkfelix: but hey it's a big tent :)
[14:17:45] *** Quits: eholk (eholk@moz-68894880.hfc.comcastbusiness.net) (Quit: eholk)
[14:18:14] <strcat> oh well I'll figure out linker optimization later. sadly apple's ld is from 5-6 years ago
[14:18:47] *** Quits: dbaupp (Thunderbir@moz-91B99879.lns20.syd6.internode.on.net) (Ping timeout)
[14:21:01] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[14:24:21] *** Joins: guitsaru (guitsaru@10BE83CF.5DF68D0E.4C2245EF.IP)
[14:29:22] *** zz_kimundi is now known as kimundi
[14:29:46] *** Quits: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl) (Ping timeout)
[14:30:10] *** Joins: josh (josh@moz-6FB23C25.hvc.res.rr.com)
[14:34:34] <lucian> this is actually not that different from rust's http://benswift.me/2012-08-17-memory-management-in-extempore.html
[14:36:18] <pnkfelix|rcirc> apart from: "If youâ€™re not used to working directly with memory, youâ€™ll almost certainly crash (segfault) Extempore when you start out."
[14:36:38] <lucian> pnkfelix|rcirc: yes, it's not sound sadly. but it probably could be with a smarter compiler
[14:37:29] <pnkfelix> static+sound memory management is not for the faint of heart.
[14:38:33] <kimundi> pnkfelix: But for the strong in mind!
[14:39:00] <kimundi> ;)
[14:39:26] *** Quits: bleibig (bleibig@moz-58EF3B3A.rochester.res.rr.com) (Quit: bleibig)
[14:39:42] <lucian> i think if they had better syntax, MLs wouldn've been much more popular
[14:40:12] <lucian> basically haskell, but strict and with an easier impure escape hatch than unsafePerformIO. F# is almost that
[14:40:13] <pnkfelix> lucian: what, you mean the MLkit's region system?
[14:40:34] * lucian reads up on mlkit
[14:41:02] <lucian> oh, even a js backend
[14:41:32] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[14:41:33] <pnkfelix> lucian: the oft-cited paper is Tofte+Talpin 1994
[14:41:44] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:42:38] <lucian> pnkfelix: oh, regions are implicit
[14:42:40] <pnkfelix> though I personally am curious to see if the people working in the separation-logic space come up with something more expressive eventually, that doesn't rely on human-generated proofs.
[14:43:06] <pnkfelix> lucian: yeah, regions were at least inferred in that system
[14:43:11] <lucian> heh http://mlton.org/Regions. conclusion is almost "use rust"
[14:43:25] <pnkfelix> lucian: though my understanding is that if you wanted your code to actually run properly, you had to write it with regions in mind
[14:43:39] <lucian> there are hints that it limits what you can write
[14:44:21] <pnkfelix> lucian: well, in the limit it just keeps throwing everything you allocate to the outermost region, and it keeps growing+growing+...
[14:44:37] <lucian> ah, the "null" GC :)
[14:44:51] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[14:45:44] <pnkfelix> lucian: I actually hadn't read the mlton link you provided before.  It is refreshing to see them be honest about how the reported numbers are not convincing.
[14:48:07] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[14:49:40] *** Joins: Blub\w (wry@moz-556F977.wireless.dyn.drei.com)
[14:52:54] *** Joins: ssbr_ (scorchsabe@A9D9D38C.B6F034AC.72A31D6.IP)
[14:53:41] *** Joins: igork (igork@moz-408E26BD.broadband.corbina.ru)
[14:53:48] *** Quits: ssbr__ (scorchsabe@A9D9D38C.B6F034AC.72A31D6.IP) (Ping timeout)
[14:55:10] *** Quits: engla (engla@moz-BFD53D48.selucle.dyn.perspektivbredband.net) (Ping timeout)
[14:55:22] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Client exited)
[14:56:05] *** Joins: snadon (chatzilla@moz-EFE8FD29.mc.videotron.ca)
[14:58:13] <kimundi> Are once functions already possibleys?
[15:01:18] *** Quits: Erik (Erik-S@moz-252DBA2.hsd1.co.comcast.net) (Ping timeout)
[15:01:28] *** Quits: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Ping timeout)
[15:03:49] *** Joins: sprog (Mibbit@81666E7C.42218A8F.C0D46216.IP)
[15:04:04] *** Quits: sprog (Mibbit@81666E7C.42218A8F.C0D46216.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:05:28] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[15:07:39] *** Quits: Khady (Khady@moz-31F9D77E.khady.info) (Quit: WeeChat 0.4.0)
[15:07:45] *** Joins: Khady (Khady@moz-31F9D77E.khady.info)
[15:09:04] *** Joins: erickt (Adium@8C9ECD8F.3A598286.F12515B4.IP)
[15:09:07] *** Joins: erickt1 (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[15:09:19] *** Quits: pyrac (pyrac@A9EC89DE.73C89388.AD05C589.IP) (Ping timeout)
[15:10:20] *** Quits: jack (jack@EF36212C.8FA609AD.840029BC.IP) (Quit: Leaving.)
[15:10:56] *** Quits: haard (fredrik@18E6EC45.6A26450D.BE04C429.IP) (Ping timeout)
[15:13:32] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[15:14:06] *** Joins: jack (jack@EF36212C.8FA609AD.840029BC.IP)
[15:15:18] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:15:49] *** Quits: erickt1 (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[15:15:53] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[15:16:07] *** Joins: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[15:17:05] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[15:17:05] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/QR616Q
[15:17:05] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[15:17:25] *** Quits: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk) (Client exited)
[15:19:32] *** Joins: jclements (jclements@moz-20AD2EFB.dsl.static.sonic.net)
[15:20:07] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[15:20:07] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/fD7LWA
[15:20:07] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[15:20:08] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[15:20:08] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/P9fWFg
[15:20:08] <ghrust> 13rust/06auto 14c1de90c 15Erick Tryzelaar: rustc: remove ty::LegacyDtor
[15:20:08] <ghrust> 13rust/06auto 141c64f7a 15bors: auto merge of #6178 : erickt/rust/remove-drop, r=graydon...
[15:20:09] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[15:22:44] *** Quits: igork (igork@moz-408E26BD.broadband.corbina.ru) (Quit: )
[15:26:17] <bstrie> I wonder what would happen if I gave a PR a priority of infinity
[15:27:44] <strcat> nmatsakis: are you on OS X?
[15:28:37] <nmatsakis> strcat: I have an OSX machine available to me, but I'm primarily using linux right now
[15:28:51] <strcat> nmatsakis: could you pastebin ld --help from OS X for me?
[15:28:59] <nmatsakis> strcat: ok
[15:29:06] <strcat> need to know which flags they're missing
[15:30:31] <pnkfelix> strcat: hah.  % ld â€”help prints:
[15:30:41] <pnkfelix> strcat: "ld64: For information on command line options please use 'man ld'."
[15:30:52] <strcat> pnkfelix: heh
[15:31:45] <strcat> pnkfelix: well, 'man -P cat ld' then? ;p
[15:31:54] <pnkfelix> strcat: yeah I'm trying that now
[15:32:16] <pnkfelix> strcat: for some reason the output keeps getting a bunch of ^H's in it, despite my attempts to override the PAGER and TERM settings
[15:32:17] *** Joins: haard (fredrik@moz-6A86987C.dynamic.se.alltele.net)
[15:33:11] <nmatsakis> strcat: http://www.pastebin.mozilla.org/2368944 (sorry for the TROFF formatting...)
[15:33:20] <nmatsakis> strcat: pipe it through less or something
[15:33:51] <nmatsakis> I also could not figure out how to disable that
[15:33:55] <nmatsakis> and was too lazy to try hard
[15:36:14] *** Joins: jviereck (Adium@moz-340574DC.dclient.hispeed.ch)
[15:37:32] <strcat> nmatsakis: yeah that's fine
[15:37:35] <strcat> thanks
[15:38:02] <pnkfelix> This was a nice find: man -t ld | open -f -a /Applications/Preview.app
[15:38:29] <strcat> pandoc can turn it into html/whatever ;p
[15:38:45] <strcat> if you go through something else first... :)
[15:38:55] * strcat forgets how to do that
[15:39:09] <pnkfelix> right, clearly formatting to markdown is the right answer here
[15:40:01] <strcat> heh there are a dozen converters
[15:40:07] <strcat> man2html, man2web, man2texi
[15:40:09] * strcat sighs
[15:40:31] <strcat> I don't understand why OS X has this weird ld.
[15:40:41] *** Quits: jclements (jclements@moz-20AD2EFB.dsl.static.sonic.net) (Quit: jclements)
[15:40:43] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[15:40:46] <nmatsakis> strcat: it's... not just ld
[15:40:50] *** Quits: tilde (tilde@moz-9091C250.clienti.tiscali.it) (Quit: NOPE NOPE NOPE)
[15:40:50] *** Joins: erickt1 (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[15:40:54] *** Joins: thou (thou@moz-1C1CA9F7.fasttrackcomm.net)
[15:41:21] <strcat> it
[15:41:24] *** Quits: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Ping timeout)
[15:41:32] <strcat> it's like they took some ancient GNU ld or bsd ld and updated it ;\
[15:41:42] <strcat> I guess binutils is GPLv3 now
[15:42:54] *** Quits: xazax (Mibbit@6655692F.3B222813.3F580572.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:43:20] * strcat sighs
[15:43:27] *** Quits: Khady (Khady@moz-31F9D77E.khady.info) (Quit: WeeChat 0.4.0)
[15:43:28] *** Joins: Khady (Khady@moz-31F9D77E.khady.info)
[15:43:32] <strcat> so -dead_strip seems to be --gc-sections
[15:43:44] *** Quits: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net) (Ping timeout)
[15:44:49] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[15:45:04] <strcat> pnkfelix: is there also an ld.bfd or ld.gold?
[15:45:52] *** Joins: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net)
[15:45:52] <pnkfelix> no, just ld and ld_classic
[15:46:21] <strcat> heh and ld_classic is some awful weird thing
[15:46:43] *** Quits: erickt (Adium@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[15:46:56] <strcat> ah I guess their linker is actually a continuation of whatever they had in pre-*nix times
[15:47:02] <strcat> same options
[15:47:18] <strcat> at least the frontend is.
[15:49:03] <lucian> strcat: it's very bsd indeed
[15:49:37] <pnkfelix> nmatsakis: by the way, isn't &const supposed to be going away?  Or did I misunderstand our long-term plan?
[15:49:47] <friggle> anyone played with instaparse? looks *nice* https://github.com/Engelberg/instaparse
[15:51:04] <nmatsakis> pnkfelix: I hope so
[15:51:20] <pnkfelix> nmatsakis: okay, its relevant to a github issue I'm looking at,that's all
[15:51:32] <pnkfelix> nmatsakis: (about the word "const" being overloaded in too many ways)
[15:54:07] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Quit: Leaving)
[15:54:11] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[15:55:10] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[15:55:37] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[15:57:07] <strcat> pnkfelix: pretty sure pcwalton's upcoming patch will get rid of Const, or at least allow it
[15:57:16] <strcat> the one that purges mut fields
[15:57:38] <pnkfelix> "get rid of it" or "allow it"  â€¦ those sound like very different paths.  :)
[15:57:45] <pnkfelix> (disallow ?)
[15:58:01] <strcat> pnkfelix: allow getting rid of Const I mean :)
[15:58:09] <pnkfelix> ah ah
[15:58:18] <strcat> tacking on thoughts to messages doesn't turn out well
[15:58:26] <nmatsakis> strcat: wait, get rid of Const (upper-case)?
[15:58:39] *** Joins: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[15:58:55] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[15:58:59] *** Quits: josh (josh@moz-6FB23C25.hvc.res.rr.com) (Quit: josh)
[15:59:09] <strcat> nmatsakis: isn't every Const except for types containing mut fields?
[15:59:17] <strcat> everything*
[15:59:28] <nmatsakis> strcat: no, @mut for example
[15:59:29] <pnkfelix> strcat: but you still might need Const
[15:59:32] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[15:59:35] <pnkfelix> strcat: for bounds on type params, no?
[15:59:38] <nmatsakis> strcat: everything *Owned* is Const
[15:59:39] <strcat> nmatsakis: ah, I thought @mut was Const because it could be dynamically frozen
[15:59:42] <nmatsakis> no.
[15:59:43] *** Quits: catpig (catpig@moz-AE054533.dip0.t-ipconnect.de) (Quit: Verlassend)
[16:00:04] <nmatsakis> Const means immutable without freezing, basically :)
[16:00:04] <pnkfelix> oh I see what strcat was saying
[16:00:24] <nmatsakis> strcat: well, I still have a use or two in mind for Const, so if anyone mentions getting rid of it, send them to me :)
[16:00:30] <nmatsakis> strcat: I do think it will be much less prominent
[16:00:38] <strcat> nmatsakis: so renaming Const -> Freeze like that bug suggests would be a bad idea anyway :)
[16:00:46] <nmatsakis> yes, that's out of date.
[16:01:03] <nmatsakis> in any case, there are now only two uses of const, right?
[16:01:07] <nmatsakis> const the qualifier and Const the kind?
[16:01:12] <strcat> yes
[16:01:14] <strcat> afaik :)
[16:01:27] <nmatsakis> yes, so it `const` the qualifier goes away, we are left with (a) no keyword (yay) and (b) only one meaning for Const
[16:02:17] *** Joins: graydon (graydon@3853DDD.39EEDBB3.D758B1AA.IP)
[16:02:17] *** ChanServ sets mode: +qo graydon graydon
[16:02:42] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[16:02:50] <strcat> 'The OS X linker can strip dead code. This should work with LTO, but unfortunately I was getting linker crashes if using both.'
[16:02:54] <strcat> heh, I wonder if that's still true
[16:04:36] *** Joins: kvark (Mibbit@9A8A5739.49975FB2.AE2D72A6.IP)
[16:05:06] *** Quits: akashj87 (akash@5B384CEF.2BC2F975.35E3DDC8.IP) (Ping timeout)
[16:05:22] <strcat> https://hg.mozilla.org/mozilla-central/file/e474b6cfebce/js/src/configure.in#l1554 apparently it is
[16:06:06] <strcat> now to see if the freebsd linker is weird or not...
[16:06:10] *** Joins: jclements (jclements@2557E599.66715431.D25A875A.IP)
[16:09:26] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:09:38] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[16:12:48] *** Joins: yong (chatzilla@74DA0C97.4E87ADC2.263D9828.IP)
[16:14:14] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[16:14:48] *** Joins: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi)
[16:15:22] *** Joins: ens (chatzilla@A8DBE445.6E8FE3C5.C90F432E.IP)
[16:16:56] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[16:17:04] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[16:17:04] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/P9fWFg
[16:17:04] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[16:17:30] *** Joins: akashj87 (akash@23B3C29D.CA70E901.35E3DDC8.IP)
[16:19:00] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:19:37] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[16:19:37] *** ChanServ sets mode: +o pcwalton
[16:19:56] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[16:20:05] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[16:20:05] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/J08CyQ
[16:20:05] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[16:20:07] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[16:20:07] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/oO5Hvg
[16:20:07] <ghrust> 13rust/06auto 14afcb9e9 15Huon Wilson: core: inlining on common functions
[16:20:07] <ghrust> 13rust/06auto 145714e2c 15Huon Wilson: libcore: optimize string joining routines....
[16:20:07] <ghrust> 13rust/06auto 1469316f0 15bors: auto merge of #6182 : huonw/rust/core-str-opts, r=nikomatsakis...
[16:20:09] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[16:21:16] *** Joins: jviereck1 (Adium@moz-1F604D96.dynamic.hispeed.ch)
[16:22:25] *** Quits: jviereck (Adium@moz-340574DC.dclient.hispeed.ch) (Ping timeout)
[16:25:24] <pcwalton> sigh, still a lot of work to do on INHTWAMA-ifying encode/decode due to the deriving stuff
[16:25:30] <pcwalton> it's not as easy as I had originally thought
[16:25:54] <pnkfelix> hmm.  I wonder if rustc is infinite looping on this: https://gist.github.com/pnkfelix/5503376
[16:26:14] <pnkfelix> oh
[16:26:17] <pnkfelix> of course it is
[16:26:27] <nmatsakis> pcwalton: I prob should have said this earlier, but you may very well want to wait with these kinds of aggressive changes that lean on the borrow checker etc
[16:26:27] <pnkfelix> (its infinitely expanding the template)
[16:26:35] <pnkfelix> maybe we should catch that.  :)
[16:26:37] <nmatsakis> speaking of which, do we have a snapshot?
[16:26:42] <nmatsakis> pnkfelix: we...are supposed to 
[16:26:43] <pcwalton> nmatsakis: there's no point
[16:26:46] <pcwalton> nmatsakis: no, the snapshot failed
[16:26:54] <pcwalton> the tree was in a state of chaos yesterday
[16:27:02] <pcwalton> I'm not sure to what degree it still is
[16:27:16] <pnkfelix> nmatsakis: even when the type parameter is growing? @ Seq<(A,A)> in a def of Seq<A> ?
[16:27:20] <pcwalton> nmatsakis: the current borrow checker correctly handles this
[16:27:37] <nmatsakis> pnkfelix: when monomorphizing, we track the depth
[16:27:42] <nmatsakis> pcwalton: k
[16:27:50] *** Joins: Cromulent (Cromulent@moz-5EAC0C2F.cable.virginmedia.com)
[16:27:52] <nmatsakis> pcwalton: I'm in the process now of working through the various borrow errors we encounter
[16:27:59] <nmatsakis> pcwalton: now that I have corrected the checks
[16:28:04] <pcwalton> I thought you had it bootstrapping?
[16:28:08] *** Joins: lmandel (lmandel@2557E599.66715431.D25A875A.IP)
[16:28:26] <nmatsakis> it was, then I (a) fixed a few bugs that exposed some places it was failing to catch errors and (b)  made a branch where we actually check for @mut
[16:28:26] <pnkfelix> nmatsakis: AFAICT, its infinite looping.  I'll file an issue so I don't forget to look at it after the meeting
[16:28:32] <nmatsakis> I'm working on (b) now
[16:28:43] <pcwalton> oh
[16:28:47] <pcwalton> you mean the dynamic failures?
[16:28:49] <nmatsakis> kyesI was planning on landing withou
[16:28:52] <nmatsakis> sorry
[16:28:54] <nmatsakis> *yes
[16:29:00] <pcwalton> there are a lot of them I take it?
[16:29:04] <nmatsakis> not...a  ton
[16:29:16] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[16:29:16] <nmatsakis> they are so far easy to fix, typically, but it takes a while because I have to get through stage0
[16:29:34] <nmatsakis> sorry, get through stage0 + stage 1
[16:29:38] <pcwalton> yeah
[16:29:51] <nmatsakis> I added a very handy debugging feature
[16:29:54] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[16:29:57] <nmatsakis> that tells you both points
[16:30:04] <nmatsakis> so it says "borrowed here, reborrowed here"
[16:30:06] <pcwalton> yeah, I saw that yesterday
[16:30:14] <nmatsakis> I was thinking I will tweak the impl
[16:30:17] <nmatsakis> so that instead of being an env var
[16:30:26] <nmatsakis> it's just on by default when you compile without -O
[16:30:30] <nmatsakis> and off when you compile without
[16:30:38] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[16:30:41] <nmatsakis> (so with -O you get relatively uninformative error messages)
[16:30:46] <pcwalton> btw, at some point we should talk about associated items
[16:31:02] <pcwalton> currently my thinking, honestly, is that I am not in favor of landing them for 1.0 *even* if they are done
[16:31:19] <pcwalton> just because we have too many language features and a schedule that is getting tighter
[16:31:24] <pcwalton> too many language features not done
[16:31:52] <pcwalton> and we will be picking bugs out them for a while
[16:31:54] <nmatsakis> pcwalton: I generally agree
[16:31:56] <pcwalton> out of them
[16:32:14] <nmatsakis> pcwalton: I want to limit our goals to finishing what is "in flight"
[16:32:19] <pcwalton> yes
[16:32:22] <nmatsakis> we can re-evaluate if/when things have settled down
[16:32:31] <nmatsakis> that said, I had some thoughts I wanted to write up
[16:32:34] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[16:32:42] <pcwalton> I'm a little disappointed that so far I've spent Q2 on the exact same stuff I worked on in Q1 (language features)
[16:32:43] <nmatsakis> on an impl strategy for default methods that I think will help deal with some of the difficulties we've encountered
[16:32:49] <pcwalton> and the list of outstanding language features has gotten *longer*
[16:32:52] <pcwalton> for 1.09
[16:32:52] <nmatsakis> and which is related to assoc items...
[16:32:53] <pcwalton> for 1.0
[16:33:04] <pcwalton> we have to start aggressively cutting or we'll never hit 1.0
[16:33:04] <pnkfelix> pcwalton: nmatsakis: that sounds reasonable. Though I would hope myself to spend some time on implementing them, even if they don't make it into 1.0.
[16:33:08] <nmatsakis> yeah, I hear you
[16:33:24] <pcwalton> the dynamically sized types thing was disappointing because it's so good we can't not do it ;)
[16:33:43] <graydon> pcwalton: you en route to the bridge?
[16:33:45] <pcwalton> yes
[16:33:46] <nmatsakis> pcwalton: yeah, I think...we kind of have to.
[16:33:48] <nmatsakis> :)
[16:33:53] *** Quits: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP) (Quit: pcwalton)
[16:33:55] <nmatsakis> unless we come up with some reason it doesn't work
[16:34:00] <pnkfelix> agh I need to get ther too
[16:35:32] *** Joins: tjc (tjc@A5087023.2354C43D.D8E68FF6.IP)
[16:35:32] *** ChanServ sets mode: +o tjc
[16:35:42] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[16:35:42] *** ChanServ sets mode: +o pcwalton
[16:35:43] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[16:35:49] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Ping timeout)
[16:35:49] *** Quits: pnkfelix|rcirc (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Ping timeout)
[16:36:29] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[16:37:12] <nmatsakis> pnkfelix: are you coming?
[16:37:55] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[16:41:08] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[16:41:59] *** Joins: burntsushi (burntsushi@moz-A046EF37.eecs.tufts.edu)
[16:42:06] *** Joins: tilde (tilde@moz-FF3E8A61.retail.telecomitalia.it)
[16:43:03] *** Quits: tilde (tilde@moz-FF3E8A61.retail.telecomitalia.it) (Quit: NOPE NOPE NOPE)
[16:43:07] *** Joins: tilde (tilde@moz-FF3E8A61.retail.telecomitalia.it)
[16:44:00] *** Joins: snearch (snearch@D5E80A6A.24AB4CE7.11CE04F0.IP)
[16:47:05] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[16:47:05] *** ChanServ sets mode: +o dherman
[16:47:53] <bstrie> nmatsakis: has the new borrowck landed?
[16:48:22] *** Quits: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu) (Client exited)
[16:48:54] <lkuper> nmatsakis: thanks for keeping default methods in play
[16:49:10] <lkuper> (I know other people care too but you're the one who seems to talk about them :) )
[16:49:10] <bstrie> ah, I see that it hasn't
[16:49:34] <bstrie> lkuper: do you have an application in mind that requires them?
[16:49:52] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:49:54] *** Quits: erickt1 (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[16:50:02] <lkuper> bstrie: a lot of code just gets less boilerplatey with them
[16:50:16] <lkuper> bstrie: it's not that things aren't *possible* without them
[16:50:16] <nmatsakis> bstrie: not yet, blocked on snapshot (and also in the process of fixing dynamic borrow errors, now that I fixed @mut)
[16:50:17] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[16:51:06] *** Joins: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu)
[16:51:18] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Ping timeout)
[16:53:39] *** Quits: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu) (Client exited)
[16:53:49] <nmatsakis> lkuper: I definitely want 'em! I have encountered situations where i'd like to refactor things in the compiler and it was just impractical due to to code dup
[16:53:51] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[16:55:21] *** Quits: Cromulent (Cromulent@moz-5EAC0C2F.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[16:55:32] *** Joins: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu)
[16:55:45] *** Joins: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl)
[16:56:23] *** Quits: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu) (Client exited)
[17:00:01] *** Joins: Desk (Sohbet@FDD39FF.26C0A60B.C687B15D.IP)
[17:01:14] *** Joins: blitter (blitter@moz-7C98731E.dyn.centurytel.net)
[17:01:29] *** Quits: Desk (Sohbet@FDD39FF.26C0A60B.C687B15D.IP) (Quit: )
[17:02:19] *** Quits: Blub\w (wry@moz-556F977.wireless.dyn.drei.com) (Ping timeout)
[17:04:02] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[17:06:55] *** Joins: guitsaru_ (guitsaru@10BE83CF.5DF68D0E.4C2245EF.IP)
[17:07:03] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Ping timeout)
[17:07:41] *** Quits: guitsaru (guitsaru@10BE83CF.5DF68D0E.4C2245EF.IP) (Ping timeout)
[17:07:41] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[17:08:13] *** Joins: mschifer (Adium@2557E599.66715431.D25A875A.IP)
[17:09:49] *** Quits: trapni (trapni@moz-7C7C1909.dawanda.com) (Client exited)
[17:10:30] <bstrie> <@pcwalton> and the list of outstanding language features has gotten *longer*
[17:10:43] <bstrie> pcwalton: what's left to do?
[17:10:49] <pcwalton> I'm not at my board
[17:10:51] <pcwalton> but I can dump it
[17:10:54] <bstrie> ok
[17:10:56] <pcwalton> when I get back
[17:12:01] *** Joins: tilde_ (tilde@moz-20D4FAD0.retail.telecomitalia.it)
[17:12:31] *** Quits: tilde (tilde@moz-FF3E8A61.retail.telecomitalia.it) (Ping timeout)
[17:14:11] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[17:14:13] *** Joins: sp3d (a@moz-17CB39F1.fidnet.com)
[17:15:48] *** Joins: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu)
[17:16:01] <strcat> pcwalton: https://github.com/mozilla/rust/pull/6192 r?
[17:16:20] *** Joins: Blub\w (wry@moz-27D00743.wireless.dyn.drei.com)
[17:16:33] <Blub\w> shit happened
[17:16:38] <Blub\w> :(
[17:16:47] <Blub\w> and I'm in the wrong channel
[17:16:51] <Blub\w> god this day is getting worse and worse
[17:16:55] <Blub\w> sorry
[17:18:18] <bstrie> Blub\w: hopefully sending to the wrong channel is the worst thing to happen today
[17:18:28] *** Joins: mars26 (bzlandfill@moz-4330D4A3.dynamic.hinet.net)
[17:19:56] *** Joins: dcamp (dcamp@9E727688.17C2F9C.163DC5C6.IP)
[17:20:03] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[17:20:11] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:20:11] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/oO5Hvg
[17:20:11] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:20:35] <Blub\w> bstrie: I wish :P
[17:21:46] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:23:10] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:23:10] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/uSvYnw
[17:23:10] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:24:44] *** Joins: snowmantw_ (Mibbit@moz-69896760.cs.nccu.edu.tw)
[17:24:50] *** Quits: snowmantw_ (Mibbit@moz-69896760.cs.nccu.edu.tw) (Quit: http://www.mibbit.com ajax IRC Client)
[17:24:55] *** Quits: akashj87 (akash@23B3C29D.CA70E901.35E3DDC8.IP) (Quit: Leaving)
[17:25:43] <strcat> http://ix.io/5rM gc-sections is the most underwhelming optimization ever
[17:25:43] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[17:26:06] <strcat> before (stripped): Size: 8328752   Blocks: 16272      IO Block: 4096   regular file
[17:26:20] *** Quits: tilde_ (tilde@moz-20D4FAD0.retail.telecomitalia.it) (Ping timeout)
[17:26:23] <strcat> so it saves 16 bytes.
[17:26:26] *** Joins: tilde (tilde@moz-28DF82F9.retail.telecomitalia.it)
[17:26:33] <strcat> saves 16 bytes on hello world too
[17:26:33] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[17:27:01] <friggle> strcat: isn't it only going to be worthwhile with -ffunction-sections?
[17:27:07] <strcat> friggle: probably
[17:27:13] <LimeBurst>  /win 21
[17:27:16] <strcat> pointless if you use LTO anyway
[17:27:22] <strcat> afaik.
[17:31:01] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[17:31:05] *** Quits: jclements (jclements@2557E599.66715431.D25A875A.IP) (Quit: jclements)
[17:33:06] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[17:33:22] *** Quits: boggle (boggle@moz-121DEC40.dip0.t-ipconnect.de) (Ping timeout)
[17:33:42] *** Quits: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi) (Ping timeout)
[17:34:59] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[17:38:22] *** Joins: jclements (jclements@2557E599.66715431.D25A875A.IP)
[17:38:24] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[17:38:50] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[17:39:07] *** Quits: tilde (tilde@moz-28DF82F9.retail.telecomitalia.it) (Quit: NOPE NOPE NOPE)
[17:39:25] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:41:39] *** Quits: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu) (Client exited)
[17:43:18] *** Joins: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu)
[17:44:10] *** Quits: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (Ping timeout)
[17:44:57] *** Quits: dcamp (dcamp@9E727688.17C2F9C.163DC5C6.IP) (Quit: Leaving...)
[17:46:42] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:47:14] <pcwalton> yay, auto-encode passes now
[17:50:29] *** Quits: mars26 (bzlandfill@moz-4330D4A3.dynamic.hinet.net) (Quit: CGI:IRC (EOF))
[17:52:37] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[17:52:37] *** ChanServ sets mode: +o brson
[17:54:24] <kvark> I've got a noob/conceptual question. @a means that a can't be modified by any party, right? So what if I need to share an object between 2 parties, while allowing one party to mutate it, and not allowing the same for another?
[17:54:44] *** Joins: SiegeLord (sl@moz-56D7E78.bstnma.fios.verizon.net)
[17:54:48] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[17:56:31] <tristram> iâ€™m way to young in rust, but if you pass an @mut to a function/constructor that accepts a non-mut @, you should get what you want
[17:56:58] <strcat> you can't use @mut as @
[17:57:12] <strcat> you can borrow it as either & or &mut though
[17:57:39] <kvark> strcat: but what if I need to share it, not borrow
[17:57:49] *** kimundi is now known as zz_kimundi
[17:57:58] <strcat> if you use @mut, mutability is your responsibility
[17:58:14] <strcat> won't be frozen when used as map keys for example
[17:58:24] <EXetoC> are there any proxy helpers? adding the values of two newtype objects for example and then constructing a newtype object out of that is messy
[17:58:41] <EXetoC> of the same type that is
[17:58:42] <strcat> kvark: when an object is usable as immutable, rust has to *guarantee* that it doesn't mutate
[17:58:45] <strcat> for memory safety
[17:58:55] <strcat> so borrowing @mut as & freezes it
[17:59:02] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[17:59:07] <strcat> and if you *could* use @mut as @, as long as the @ references existed it would be frozen
[17:59:28] *** Joins: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP)
[18:01:06] <kvark> strcat: I see... thanks for the explanation.
[18:01:32] <strcat> kvark: if you just want it to be immutable from external modules you can use priv fields
[18:01:54] *** Quits: seth (seth@moz-D840E602.dsl.static.sonic.net) (Input/output error)
[18:01:58] <strcat> and only mutate it internally
[18:02:04] <kvark> it's more a protection from myself, for conceptual beauty...
[18:02:05] *** Joins: dcamp (dcamp@9E727688.17C2F9C.163DC5C6.IP)
[18:02:09] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90-rdmsoft [XULRunner 18.0.2/20130201065344])
[18:02:23] *** Joins: gareth0 (gareth0@moz-C4042B67.dynamic.dsl.as9105.com)
[18:02:32] *** Quits: gareth0 (gareth0@moz-C4042B67.dynamic.dsl.as9105.com) (Quit: Leaving)
[18:03:08] *** Quits: naq (naq@D5C2D2DF.E4265FCD.E481B5B.IP) (Ping timeout)
[18:03:51] *** Joins: steven_is_false (quassel@moz-AD454EE0.bchsia.telus.net)
[18:04:05] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[18:04:52] <steven_is_false> Hi! I know Rust has the FFI but I can't seem to call function pointers to C functions (extern "C" fn (etc..)
[18:05:00] *** Joins: naq (naq@D5C2D2DF.E4265FCD.E481B5B.IP)
[18:05:32] <steven_is_false> I know for simple functions which don't use much stack it's probable okay to just use extern "Rust" but still.
[18:05:53] <kvark> strcat: in short, a texture parameter is a part of a draw call, which goes into the render queue. I'd like to have it @Texture, as drawing will not mutate it. But since someone else might want to mutate it, I'll have to pass it as @mut Texture... But then scenarios where the owner doesn't want to mutate it either are going to look weird
[18:06:02] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Client exited)
[18:06:09] <kvark> ... as the texture will still have to be stored & passed as @mut
[18:06:52] *** Quits: LimeBurst (me@247D1419.D73964AC.27A8748.IP) (Quit: leaving)
[18:07:22] <strcat> kvark: well, it won't really work that way
[18:07:32] <strcat> you can borrow & from @, and you can mutate @mut
[18:08:04] <strcat> and if you're able to mutate an object you have an & pointer into, that's memory corruption if you change enum types, array sizes, etc. that the pointer points into
[18:08:27] <strcat> when you borrow & from @mut it freezes it dynamically (all other freezing is static)
[18:08:30] <steven_is_false> rusti: let x : extern "C" fn () = || { }; x ()
[18:08:31] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/RYfI
[18:08:43] <strcat> so turning @mut -> @ would have to freeze
[18:08:55] <strcat> and it wouldn't unfreeze until all the @ was gone
[18:09:14] <strcat> which would be non-deterministic too
[18:09:30] <strcat> non-deterministic freezing failures wouldn't be fun
[18:09:46] *** Joins: LimeBurst (me@247D1419.D73964AC.27A8748.IP)
[18:10:41] <kvark> strcat: thanks for the info
[18:10:57] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:11:10] <strcat> I guess you could say @mut -> @ permanently freezes it but... that's not what you want afaik
[18:11:18] <kvark> yeah
[18:14:14] *** Quits: kvark (Mibbit@9A8A5739.49975FB2.AE2D72A6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:16:05] <steven_is_false> What really annoys me is that there doesn't seem to be an issue listed for this problem.
[18:16:34] <bstrie> steven_is_false: please list it :)
[18:17:10] <steven_is_false> bstrie: I will.
[18:21:08] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:24:44] *** Joins: drguildo (drguildo@moz-A59FEBDD.drguildo.com)
[18:26:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:26:06] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/vLd8bw
[18:26:06] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:26:26] <EXetoC> It's kind of nice when you change code and it doesn't break anything. maybe with enough practice I can avoid it entirely
[18:29:57] *** Quits: drguildo (drguildo@moz-A59FEBDD.drguildo.com) (Quit: Leaving)
[18:30:31] <steven_is_false> Okay I made the issue https://github.com/mozilla/rust/issues/6194 .
[18:31:56] *** Quits: jclements (jclements@2557E599.66715431.D25A875A.IP) (Quit: jclements)
[18:32:10] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:32:10] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/pV6COg
[18:32:10] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:32:10] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:32:10] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/pgCouQ
[18:32:10] <ghrust> 13rust/06auto 146487cb2 15kud1ing: Explain that the source code was generated by this script
[18:32:10] <ghrust> 13rust/06auto 1418c46b8 15kud1ing: The following code was generated by "src/etc/unicode.py"
[18:32:10] <ghrust> 13rust/06auto 14ec9c7c3 15bors: auto merge of #6184 : kud1ing/rust/master, r=sanxiyn
[18:32:13] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:33:16] *** Quits: graydon (graydon@3853DDD.39EEDBB3.D758B1AA.IP) (Quit: Leaving.)
[18:33:16] <steven_is_false> So, I'm confused. I think that using #[no_mangle] to make symbols in my dynamic libraries be findable by the dlfcn api is the wrong approach but I can't figure out what code in rust/src/librustc/metadata gets the hash value of the library.
[18:33:47] *** Joins: jclements (jclements@2557E599.66715431.D25A875A.IP)
[18:34:42] *** Quits: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl) (Client exited)
[18:34:47] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Quit: Leaving.)
[18:34:50] <erickt> nmatsakis: ping. You were looking for me yesterday, do you not need me anymore?
[18:35:32] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.0)
[18:41:00] *** Joins: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:43:14] <brson> well, after at least 4 tries I have a linux snapshot
[18:43:22] <brson> two tries ended in valgrind errors
[18:43:49] <brson> I think I will register them
[18:44:05] <steven_is_false> Well these appears to be bad. tag_crate_hash is an arbitrary constant.
[18:44:33] <brson> graydon: are you looking at the incoming breakage?
[18:45:58] <steven_is_false> In rust/src/librustc/metadata/decoder.rs get_crate_hash is the data just the raw data of the shared library?
[18:46:55] <Jeaye> brson: Let me know and I'll give it a shot on my end.
[18:47:15] *** Quits: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu) (Ping timeout)
[18:47:29] *** Joins: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu)
[18:47:33] <Jeaye> brson: Also, graydon isn't here. :P
[18:48:08] <strcat> brson: yay! :)
[18:48:34] <brson> steven_is_false: get_crate_hash returns a short hash of the library metadata, the same one that appears in library file names
[18:49:16] <steven_is_false> brson: Good, so I know it's the function I'm looking for.
[18:49:19] *** Quits: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu) (Ping timeout)
[18:50:08] <steven_is_false> brson: Is the tag_crate_hash guaranteed to remain the same? Or is this part of Rust still in flux?
[18:50:49] <steven_is_false> brson: I mean the constant tagging where the crate_hash.
[18:51:09] *** Joins: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu)
[18:51:26] *** Quits: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP) (Quit: pcwalton)
[18:51:32] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:51:53] <brson> steven_is_false: the way metadata is encoded generally is likely to change
[18:52:18] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[18:52:18] *** ChanServ sets mode: +o pcwalton
[18:52:20] <steven_is_false> brson: I guess I can deal with that. I wish that it was exported in a library somewhere though.
[18:52:27] <brson> there's a lot of #[cfg(stage0)] to work through :(
[18:53:03] <strcat> brson: a lot are borrowck related
[18:53:20] <strcat> just from 'self changing
[18:55:07] <strcat> brson: should I just close https://github.com/mozilla/rust/pull/6186 ?
[18:56:01] <brson> strcat: sure
[18:59:29] <Diablo-D3> http://spin.atomicobject.com/2013/05/02/chicken-scheme-part-1/?utm_source=feedly
[18:59:48] *** Joins: igork (igork@moz-408E26BD.broadband.corbina.ru)
[19:00:23] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.0)
[19:00:32] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[19:01:31] *** Joins: mschifer1 (Adium@2557E599.66715431.D25A875A.IP)
[19:01:39] *** Quits: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu) (Ping timeout)
[19:01:41] *** Quits: mschifer (Adium@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[19:02:34] *** Joins: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu)
[19:03:37] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[19:04:31] <steven_is_false> How is the crate hash attached to the symbol to get the final name?
[19:04:58] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[19:05:33] <brson> is #[inline(hint)] a valid attribute?
[19:06:29] <Diablo-D3> blog.paralleluniverse.co/post/49445260575/quasar-pulsar
[19:06:29] <Diablo-D3> what
[19:06:41] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.0)
[19:07:42] <brson> steven_is_false: the name mangling code is in rustc/back/link
[19:08:04] <pcwalton> brson: #[inline] sets the inline hint
[19:08:07] <pcwalton> I believe
[19:08:07] <steven_is_false> brson: Thanks.
[19:08:17] <brson> the symbol hash is hashed from both the crate hash and the symbol's types
[19:08:30] <brson> ok, I see an #[inline(hint)] here that must be bogus
[19:08:52] <brson> I'm just going to remove it. too many things are inlined
[19:09:29] <pascal> As trait bounds are not allowed for structs is the best way to write a fn that has the bounds and returns the struct?
[19:09:48] <Diablo-D3> crap, Im going to have to rethink my java hate now
[19:09:50] <Diablo-D3> goddamnit so much =/
[19:10:19] <steven_is_false> brson: Oh symbol mangling is much more complicated then I thought it was.
[19:10:36] <nmatsakis> erickt: prob yes but I forgot why, I'll get back to you :)
[19:11:03] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Ping timeout)
[19:12:39] <Diablo-D3> after much soul searching, I still hate java
[19:12:50] *** Joins: bleibig (bleibig@moz-58EF3B3A.rochester.res.rr.com)
[19:13:01] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[19:13:15] <Diablo-D3> maybe if someone removed the stop the world gc in java, I'd hate it less
[19:13:45] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[19:14:06] <steven_is_false> Diablo-D3: Can't you spin up two seperate JVMs?
[19:14:30] <steven_is_false> Diablo-D3: It might even be possible to do so in one process.
[19:14:55] <steven_is_false> Diablo-D3: That's the solution that Pythoneers take.
[19:15:27] *** Quits: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu) (Ping timeout)
[19:16:15] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[19:17:52] *** Joins: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu)
[19:18:13] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90-rdmsoft [XULRunner 18.0.2/20130201065344])
[19:21:52] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:25:33] *** Quits: steven_is_false (quassel@moz-AD454EE0.bchsia.telus.net) (Ping timeout)
[19:26:26] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[19:27:28] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:27:51] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[19:27:53] *** Joins: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi)
[19:29:51] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[19:30:34] *** Quits: RogueVector (victorporo@F1213546.14EB2DE0.79933D60.IP) (Quit: RogueVector)
[19:32:10] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[19:32:10] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/pgCouQ
[19:32:10] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[19:32:18] <Jeaye> brson: So is that Linux snapshot ready to go up?
[19:33:20] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[19:33:54] <Diablo-D3> well isnt this fun
[19:34:03] <Diablo-D3> I somehow have created a bst that loops.
[19:34:19] <brson> Jeaye: no, it's looking like a bit of a nightmare
[19:34:38] <brson> there was a series of lang item changes that I snapshotted at a bad time
[19:34:51] * brson lunch
[19:35:48] * Diablo-D3 has no clue how he fucked up something simple like a bst
[19:38:01] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[19:38:05] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[19:38:05] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/NO1ogg
[19:38:05] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[19:38:07] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[19:38:07] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/BmDB7A
[19:38:07] <ghrust> 13rust/06auto 1435b91e2 15Jeong YunWon: Use static strings
[19:38:07] <ghrust> 13rust/06auto 14cdf604f 15bors: auto merge of #6193 : youknowone/rust/static-string, r=sanxiyn
[19:38:07] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[19:40:43] *** Joins: catpig (catpig@moz-AE054533.dip0.t-ipconnect.de)
[19:41:35] *** Quits: fabiand (fabiand@moz-F3CDA8BE.adsl.alicedsl.de) (Quit: Verlassend)
[19:43:10] *** Quits: jack (jack@EF36212C.8FA609AD.840029BC.IP) (Ping timeout)
[19:43:17] *** Joins: jack (jack@EF36212C.8FA609AD.840029BC.IP)
[19:47:26] *** Quits: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu) (Ping timeout)
[19:47:44] *** Joins: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu)
[19:49:21] *** Quits: burntsushi (burntsushi@moz-A046EF37.eecs.tufts.edu) (Quit: Konversation terminated!)
[19:51:32] <indutny> heya
[19:51:37] <indutny> can I convert ~[u8] to ~str?
[19:52:41] *** Joins: ssbr__ (scorchsabe@A9D9D38C.B6F034AC.72A31D6.IP)
[19:53:25] *** Quits: ssbr_ (scorchsabe@A9D9D38C.B6F034AC.72A31D6.IP) (Ping timeout)
[19:53:38] *** Joins: judder (maradukewa@DABDEEA3.F2C0D0AC.78E362FE.IP)
[19:57:28] <mcpherrin> str::from_bytes I think
[19:57:59] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[19:58:13] <indutny> ah
[19:58:13] <indutny> thanks
[19:59:44] <indutny> also, I'm having a problem when defining and using read_u8
[19:59:48] <indutny> in struct's impl
[19:59:59] <indutny> rust says:
[19:59:59] <indutny> this function takes 0 parameters but 1 parameter was supplied
[20:00:03] <indutny> and
[20:00:04] <indutny> failed to find an implementation of trait core::io::Reader for <V12>
[20:00:18] *** Joins: bheylin_ (brianheyli@561218A3.E180BE08.EF374763.IP)
[20:01:35] *** Quits: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu) (Client exited)
[20:01:45] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[20:02:18] *** Quits: Blub\w (wry@moz-27D00743.wireless.dyn.drei.com) (Ping timeout)
[20:04:13] <mzabaluev> Is there a way to ensure that an ~fn runs in a thread all of its own? task::ThreadPerTask is not implemented as of commit 5f13e9c.
[20:05:16] *** Joins: Blub\w (wry@moz-27D00743.wireless.dyn.drei.com)
[20:07:19] *** Joins: mschifer (Adium@2557E599.66715431.D25A875A.IP)
[20:07:31] *** Quits: mschifer1 (Adium@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[20:08:01] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:18:22] <benh> you~ create a new scheduler and squeeze in the SingleThread enum somewhere, don't you
[20:19:00] <benh> do task::spawn_sched(task::SingleThreaded) { }  I think
[20:21:02] *** Joins: enticeing (user@40584768.29B601FE.5037098C.IP)
[20:21:02] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Quit: dherman)
[20:22:28] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[20:22:45] *** Joins: kangz (Mibbit@moz-3DA524A.caltech.edu)
[20:26:36] <nmatsakis> brson: so, as part of this debugging system I've written, I am stashing a ~[] as a void* in the rust_task (basically a hack to get cheap TLS)
[20:26:42] <nmatsakis> brson: problem is I don't know where's the best place to free it
[20:27:03] <nmatsakis> brson: is there a central point I could add some Rust code that will run when a task exits, whether normally or via fail?
[20:28:10] <nmatsakis> indutny: did you resolve your problem? if not, a gist would help
[20:28:24] <indutny> read_u8?
[20:28:35] <indutny> well, I just choose the other way
[20:28:51] *** Joins: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu)
[20:29:34] <indutny> anyway
[20:29:34] <indutny> https://gist.github.com/indutny/b76a1cef7289532af5ef
[20:30:08] <indutny> oh
[20:30:09] <indutny> this works
[20:30:29] <indutny> ok, its hard to separate it right now
[20:30:42] *** Quits: bheylin_ (brianheyli@561218A3.E180BE08.EF374763.IP) (Ping timeout)
[20:30:44] *** Joins: Kruppe (user@moz-4DDA8AB8.uwaterloo.ca)
[20:32:59] *** Joins: graydon (Adium@A5087023.2354C43D.D8E68FF6.IP)
[20:32:59] *** ChanServ sets mode: +qo graydon graydon
[20:33:24] *** Joins: alanjc (Alan@moz-ECADE706.dsl.dynamic.sonic.net)
[20:35:38] <brson> brson: rust_task_start in rust.cpp contains both the setup and teardown for a task
[20:35:42] *** Quits: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net) (Ping timeout)
[20:35:44] <brson> wait, i'm brson
[20:35:46] <brson> nmatsakis: ^
[20:35:51] <graydon> these things happen
[20:36:22] <graydon> brson: have you actually observed / reproduced the tag-align bug on incoming?
[20:36:27] <graydon> I can't reproduce it, which is weird
[20:36:32] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:36:37] <graydon> because I can't reproduce it _on the machine it's happening on_
[20:36:39] <nmatsakis> brson: I really wanted a piece of rust code, not cpp code...
[20:36:44] <brson> graydon: I want to start the snapshot from scratch. The commit I snapshotted is awkward to snapshot and ... I was just going to ask you if you fixed it
[20:36:47] *** Joins: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net)
[20:36:55] <nmatsakis> brson: but maybe I'm just being silly, actually, I can prob do what I need from CPP code
[20:36:59] <graydon> brson: I wish I had. it's very mysterious!
[20:37:05] <graydon> it's the top of my list
[20:37:11] <brson> graydon: I'll try to reproduce it
[20:37:14] *** zz_kimundi is now known as kimundi
[20:37:41] <brson> nmatsakis: the box annihilator is rust code and is always run
[20:37:50] <graydon> brson: I'm looking too, but if you figure out STR I'm all ears! :)
[20:37:53] *** Quits: bleibig (bleibig@moz-58EF3B3A.rochester.res.rr.com) (Quit: bleibig)
[20:37:54] <brson> nmatsakis: I think it's a lang item now, stashed in the crate map
[20:37:59] <nmatsakis> brson: ah, good point
[20:38:04] <nmatsakis> I could hack this in there :)
[20:38:05] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:38:05] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/BmDB7A
[20:38:05] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:38:08] *** Joins: int3__ (int3_@moz-1692740B.subnet-248.amherst.edu)
[20:39:28] *** Quits: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu) (Ping timeout)
[20:40:21] *** Joins: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu)
[20:41:04] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:41:04] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/sjLclA
[20:41:04] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:41:05] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:41:05] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/4oMwog
[20:41:05] <ghrust> 13rust/06auto 14201a615 15Tim Chevalier: rustpkg: Implement install command...
[20:41:05] <ghrust> 13rust/06auto 1492e0219 15bors: auto merge of #6124 : catamorphism/rust/rustpkg, r=catamorphism...
[20:41:05] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:41:32] *** Quits: kangz (Mibbit@moz-3DA524A.caltech.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[20:41:47] *** Quits: int3__ (int3_@moz-1692740B.subnet-248.amherst.edu) (Ping timeout)
[20:41:50] <nmatsakis> pcwalton: did you add lang items btw? a stroke of genius.
[20:42:49] <pcwalton> yeah, I did
[20:42:51] <graydon> yeah. previously we were using intrinsics.rs injection
[20:42:52] <pcwalton> a stroke of hackiness
[20:42:53] <graydon> which was _terrible_
[20:42:59] <EXetoC> wut wut
[20:43:00] <graydon> we still use it, but it should go away
[20:43:01] <pcwalton> we still are :(
[20:43:05] <pcwalton> btw, that's a big compiler perf problem
[20:43:11] <graydon> "big"?
[20:43:19] <graydon> surely not on par with others, is it?
[20:43:36] <graydon> (it only defines one trait!)
[20:43:51] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[20:44:49] *** Quits: jviereck1 (Adium@moz-1F604D96.dynamic.hispeed.ch) (Quit: Leaving.)
[20:45:34] <doomlord> do 'owned pointers' automatically go in the "exchange-heap" (http://static.rust-lang.org/doc/tutorial.html#TOC 13..)
[20:45:42] <ssbr__> Blagh, trying to parse the crate metadata section is a pain :S. Looks like I have to copy-past a bunch of code from rustc::metadata
[20:45:56] <ssbr__> (the functions I need aren't public)
[20:46:25] <graydon> hm hm
[20:46:31] <doener> doomlord: yes, unless they refer to something managed, e.g. a struct containing a managed pointer
[20:46:32] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[20:46:44] <graydon> I wonder about this change to lints to use spans
[20:46:51] <graydon> https://github.com/mozilla/rust/pull/6093
[20:47:02] <graydon> anyone familiar enough with how lints work presently to say?
[20:47:15] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[20:47:33] *** Joins: jviereck (Adium@moz-340574DC.dclient.hispeed.ch)
[20:47:34] <nmatsakis> graydon: is it using spans to decide if a lint is on or off?
[20:47:45] <graydon> I think so
[20:47:49] <nmatsakis> graydon: it is true that item ids required effort to factor in, but using spans seems...creepy
[20:47:58] *** Quits: Palmik (palmik@moz-DADC71F0.pks.muni.cz) (Quit: Lost terminal)
[20:48:01] <nmatsakis> though maybe it makes sense
[20:48:22] <graydon> it feels both unstable to me and also .. IIRC there was something really delicate about making sure we assign lint to every ID in a single pass when starting the compiler up
[20:48:27] <nmatsakis> just seems like it's asking for a bit of trouble when macros or other code gen tools
[20:48:36] <graydon> and I'm not sure it's even generating the same logic anymore
[20:48:38] <nmatsakis> I've been thinking about doing lint the opposite way
[20:48:42] <nmatsakis> that is, right now,
[20:48:48] <nmatsakis> we generate a table so everybody can look up the lint settings
[20:48:59] <nmatsakis> but I was thinking maybe it makes more sense to have all the other passes write tables
[20:49:02] *** Quits: jviereck (Adium@moz-340574DC.dclient.hispeed.ch) (Quit: Leaving.)
[20:49:04] <nmatsakis> and then modify lint to look at those and report errors
[20:49:12] <nmatsakis> so only one purpose has to track the lint state at any given time
[20:49:38] <nmatsakis> I'm not sure if that's really better or not
[20:49:56] <nmatsakis> iow, the liveness analysis would generate a set of "unread writes" and things like that
[20:50:00] <nmatsakis> which lint would consult
[20:50:35] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[20:50:37] <graydon> mhm
[20:51:18] <nmatsakis> ideally I think the lint pass would then do *no* analysis of its own
[20:51:40] <nmatsakis> all that code would move to earlier passes, lint would just do the reporting
[20:52:10] <graydon> yeah, I suppose!
[20:52:11] *** Quits: ssbr__ (scorchsabe@A9D9D38C.B6F034AC.72A31D6.IP) (Connection reset by peer)
[20:52:22] <brson> graydon: I can reproduce the tag-align failures here
[20:52:32] *** Joins: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr)
[20:52:39] <brson> graydon: this is my build command 'make check-stage1-T-i686-unknown-linux-gnu-H-x86_64-unknown-linux-gnu-rpass-exec TESTNAME=tag-align'
[20:52:43] *** Joins: ssbr__ (scorchsabe@A9D9D38C.B6F034AC.72A31D6.IP)
[20:53:03] <brson> just fyi, since I know nobody else can probably formulate that target but me
[20:53:25] <graydon> oh, is it target i686? that'd explain why I keep missing it
[20:53:30] <brson> :)
[20:53:32] <enticeing> here's a window manager that does nothing, written in rust: http://ix.io/5s0
[20:54:10] <enticeing> http://i.imgur.com/u5Z2Kk0.png
[20:54:40] <haard> is there moderation on rust-dev first posts? 
[20:55:23] <indutny> wow
[20:55:47] <indutny> so far I've only made .beam parser in rust :)
[20:55:48] <indutny> almost
[20:55:52] <indutny> but it feels sooo good
[20:56:00] <enticeing> like i said, it does nothing right now :P
[20:56:11] <indutny> I seen it :)
[20:56:17] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[20:56:33] <enticeing> you can't move windows, and you can only run programs if you have also `exec urxvt &` in your .xinitrc
[20:56:49] <enticeing> it's going to be some sort of tiling thing
[20:57:25] <indutny> are you considering binary construction/destruction?
[20:57:28] <indutny> for syntax
[20:57:34] <indutny> not that I really need it
[20:57:49] *** enticeing is now known as enticeing|away
[20:58:44] *** Quits: doener (doener@moz-724BBC7C.unitymediagroup.de) (Quit: leaving)
[20:59:06] *** Joins: Jesse (jruderman@2557E599.66715431.D25A875A.IP)
[20:59:25] <EXetoC> enticeing|away: I guess it's fast then, which is great
[21:00:03] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[21:02:14] *** Quits: dcamp (dcamp@9E727688.17C2F9C.163DC5C6.IP) (Quit: Leaving...)
[21:05:42] *** Quits: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP) (Ping timeout)
[21:06:13] *** Joins: jgilbert (jgilbert@moz-E7782931.hsd1.ca.comcast.net)
[21:06:25] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[21:06:25] *** ChanServ sets mode: +o pcwalton
[21:08:02] <brson> graydon: it looks to me like these tag-* test cases were reenabled in the hopes that they passed - but they don't
[21:08:09] <brson> graydon: it's probably sufficient to xfail them again
[21:08:20] <graydon> does look like that, yes
[21:08:24] <graydon> though I wonder why they don't work!
[21:08:35] <graydon> oh well. regression is a different sport from enhancement.
[21:09:06] <graydon> (they work on x64, which is why they were re-enabled, I think)
[21:09:12] <brson> yeah
[21:09:40] *** Quits: haard (fredrik@moz-6A86987C.dynamic.se.alltele.net) (Ping timeout)
[21:10:17] <brson> graydon: will you push a fix?
[21:10:20] * graydon wishes our targets had short names. "{linux,mac,win,freebsd,android}-{x86,x64,arm}"
[21:10:27] <graydon> sure
[21:11:13] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[21:11:13] *** ChanServ sets mode: +o dherman
[21:12:13] <brson> i am still bisecting a regression that causes fmt("%?") to leak on the local heap. been doing this for 2 days now
[21:12:36] <pcwalton> brson: di you have a range?
[21:12:37] <pcwalton> do
[21:13:33] <graydon> we can do per-target xfails, yes?
[21:13:46] <graydon> not that that's really useful on these tests
[21:13:55] <graydon> they're testing that we don't fall prey to 32bit-isms
[21:13:58] <graydon> (and we do)
[21:14:15] <brson> graydon: I think we can only do per-platform
[21:14:16] <graydon> sigh. I'll just xfail. sending via bors since it seems not otherwise critical.
[21:14:25] <brson> graydon: p=1 please
[21:14:35] <brson> need it for the snapshot
[21:14:39] <graydon> sure
[21:15:20] <brson> pcwalton: my first bisection resulted in 17723d18de8262058c77def1cd284d4bf072c13b-0780b2830f06babba21dcd9f6c325576dd374183 which includes "librustc: Remove the legacy mode in the type visitor intrinsic."
[21:15:31] <pcwalton> that might well do it
[21:15:31] <brson> pcwalton: i have a much better test case now though
[21:15:58] <pcwalton> that certainly sounds like the kind of change that would cause exactly that
[21:16:28] <graydon> very likely
[21:16:47] <graydon> there's also a valgrind breakage, shall I try to hunt it down? osx?
[21:16:55] *** Quits: snadon (chatzilla@moz-EFE8FD29.mc.videotron.ca) (Ping timeout)
[21:17:05] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:17:05] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1492e0219 to 14cdf604f: 02http://git.io/N3iJvQ
[21:17:05] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:17:07] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:17:08] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/EKtp_Q
[21:17:08] <ghrust> 13rust/06auto 1432ebaac 15Graydon Hoare: re-xfail some tests that fail on x86
[21:17:08] <ghrust> 13rust/06auto 14ba84251 15bors: auto merge of #6197 : graydon/rust/re-xfail, r=graydon...
[21:17:09] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:17:31] <lucian> rust type inference is much more extensive than i'd thought! "let empty : [[Vector<int>]] = Vector::new(); empty.get(0)" the bit between [[ ]] is optional
[21:18:48] *** Quits: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net) (Ping timeout)
[21:19:14] *** Joins: boggle (boggle@moz-CE479719.dip0.t-ipconnect.de)
[21:19:24] *** Joins: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net)
[21:20:16] <graydon> lucian: I think it's pretty complete within-a-function inference
[21:20:21] <graydon> just doesn't go whole-program
[21:20:38] <lucian> graydon: it's still very awesome, much nicer than scala's. is it a significant cost in compile-time?
[21:21:09] <graydon> (it used to be statement-at-a-time and forward-only, but that was back when ... um, George W. Bush was in office?)
[21:21:31] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Ping timeout)
[21:21:49] <graydon> I don't think it costs a lot extra, time-wise. it's still at the conservative end of the spectrum relative to scala and haskell. I think?
[21:21:50] <tjc> heh
[21:22:05] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[21:22:05] *** ChanServ sets mode: +o dherman
[21:22:18] <graydon> nmatsakis can probably classify its inference (and compare to those in other type systems) better than anyone else
[21:22:42] <dherman> https://twitter.com/ehud/status/330067488052232192
[21:23:00] <lucian> graydon: i guess functions will always have types, right?
[21:23:20] <graydon> lucian: statically named ones, yeah
[21:23:22] <tjc> dherman: pfft, I was saying that two years ago
[21:23:23] <graydon> lambdas infer
[21:23:24] <tjc> </hipster>
[21:23:35] <nmatsakis> lucian: it's a modified form of HM that adds limited support for subtyping, though not in the typical HM-X way (if that means anything to you). I've been toying with the idea of converting to a more conventional HM system but I haven't had time to work it out and make sure it works
[21:23:37] <lucian> graydon: ah, right
[21:23:38] <graydon> f = |x,y| x+y; will infer
[21:23:56] <nmatsakis> graydon: it's... different than scala. they have a harder problem, they're a bit more conservative than us in some respects
[21:24:00] <lucian> nmatsakis: HM-X doesn't mean anything to me :)
[21:24:01] <dherman> tjc: :)
[21:24:02] <graydon> really!
[21:24:08] <lucian> yes, scala doesn't infer all that much
[21:24:11] <nmatsakis> yes, for example in scala you can't write "let x = []"
[21:24:13] <graydon> nmatsakis: I figured they were doing a whole lot harder stuff
[21:24:14] <lucian> i think it's forward-only
[21:24:15] <nmatsakis> you have to say what it is a list of
[21:24:16] *** Quits: sully (sully@moz-ECFB7516.moroso.emarhavil.com) (Ping timeout)
[21:24:17] <graydon> maybe that means they can infer less
[21:24:21] *** Joins: sully (sully@moz-ECFB7516.moroso.emarhavil.com)
[21:24:30] <lucian> graydon: no, that's why i was surprised. scala does less than rust (at least atm)
[21:25:07] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Quit: Leaving)
[21:25:18] <ssbr__> You can't do "let x = []; x.push(3)" in scala? That's surprising. I thought they'd collect all the type constraints and do the usual unification thing.
[21:25:33] <ssbr__> (I write x.push(3), I don't know what the scala syntax would be)
[21:25:56] <lucian> ssbr__: i could be wrong here, i haven't used it much. but afair that wasn't possible
[21:26:11] <ssbr__> That's a little upsetting. :(
[21:26:45] *** ssbr__ is now known as ssbr
[21:27:13] <lucian> ssbr: they certainly don't appear to advertise it http://www.scala-lang.org/node/127
[21:28:35] <nmatsakis> lucian:  it is not forward only, but it's also true that all types have to be known kind of a "line by line" basis, more or less
[21:28:45] <nmatsakis> (in scala)
[21:29:00] <lucian> right. which is why the generics look more painful than in rust
[21:29:14] <nmatsakis> maybe? I never found it especially onerous
[21:29:22] <nmatsakis> but I guess it depends on your tolerance for type annotations :)
[21:29:32] <lucian> oh, wow http://pchiusano.blogspot.co.uk/2011/05/making-most-of-scalas-extremely-limited.html
[21:29:36] <nmatsakis> (mine is perhaps higher than most)
[21:29:48] <lucian> i find Java's unacceptable, for example
[21:30:37] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[21:31:00] <rpearl> you can write val x = Nil; and it works just fine and infers that x is a list.
[21:31:06] *** Quits: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr) (Ping timeout)
[21:31:12] <rpearl> and then write val y = 3 :: x; and get the expected thing
[21:31:34] <rpearl> (in scala)
[21:35:10] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[21:35:18] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[21:36:37] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:36:37] <ghrust> 01[13rust01] 15brson merged 06auto into 06snap-stage3: 02http://git.io/SgFJHA
[21:36:37] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:36:55] <brson> starting another snapshot, assuming that auto will be merged into incoming
[21:38:37] *** Quits: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu) (Ping timeout)
[21:39:33] <tristram> can I implement methods of a trait (like one that only depends on other "abstract" methods) without having an actual struct ?
[21:41:35] *** Quits: jack (jack@EF36212C.8FA609AD.840029BC.IP) (Quit: Leaving.)
[21:41:46] <kimundi> tristram: no, but you could implement it on a empty struct
[21:41:55] *** Quits: KindOne (KindOne@211254A6.AFB24D71.EC6A1518.IP) (Ping timeout)
[21:42:27] <kimundi> struct Foo; impl Trait for Foo ...
[21:43:14] <tristram> and other struct implementing my trait would have to re-define that method, right ?
[21:43:29] * tristram is thinking in java-ish OOP
[21:44:05] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[21:45:21] *** Quits: Blub\w (wry@moz-27D00743.wireless.dyn.drei.com) (Quit: bb)
[21:45:33] *** Joins: KindOne (KindOne@moz-6634B660.dynamic.ip.windstream.net)
[21:45:52] *** Joins: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu)
[21:52:30] <tjc> brson + pcwalton: ping
[21:52:39] *** Joins: ssbr_ (scorchsabe@A9D9D38C.B6F034AC.72A31D6.IP)
[21:53:19] *** Quits: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu) (Client exited)
[21:53:22] *** Quits: ssbr (scorchsabe@A9D9D38C.B6F034AC.72A31D6.IP) (Ping timeout)
[21:53:30] *** Quits: jgilbert (jgilbert@moz-E7782931.hsd1.ca.comcast.net) (Ping timeout)
[21:54:28] <brson> tjc: pong
[21:55:35] <tjc> brson: I was wondering if soon-ish would be a good time for us to go over what I'm planning for rustpkg to make sure I'm not leaving out anything you want to have for servo
[21:55:48] <tjc> with pcwalton, jack, and perhaps graydon as well
[21:56:06] <tjc> I feel like right now I'm implementing pretty basic functionality anywayâ€¦ but maybe it's never too early
[21:56:38] <graydon> tjc: likely a good thing to check in on, yeah
[21:56:40] <brson> tjc: that would be great. I would happy to take some of your reviews as well
[21:56:56] <brson> give you more eyes that just tjc+graydon
[21:57:01] <tjc> brson: yeah, great
[21:57:10] <tjc> I'll send an emailâ€¦ maybe we can do it soon after I get back from my trip
[21:59:28] *** Joins: dcamp (dcamp@moz-930D5B64.hsd1.wa.comcast.net)
[22:00:23] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[22:03:03] *** Joins: a_m0d|home (a_m0d@moz-9F925EFA.hm.shawcable.net)
[22:04:14] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[22:04:29] *** Parts: a_m0d|home (a_m0d@moz-9F925EFA.hm.shawcable.net) ()
[22:06:26] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:06:53] *** Quits: lkuper (lkuper@moz-D6AAFF3.cs.indiana.edu) (Ping timeout)
[22:08:21] <pnkfelix> nmatsakis: ping
[22:09:16] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[22:10:01] *** Joins: jack (jack@EF36212C.8FA609AD.840029BC.IP)
[22:14:46] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:17:04] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:17:04] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/EKtp_Q
[22:17:04] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:17:54] <jld> pnkfelix: If you have opinions on GC inverse load factors, https://bugzilla.mozilla.org/show_bug.cgi?id=867779 might be worth glancing at.
[22:18:07] <pnkfelix> jld: k
[22:18:24] <jld> ...and this is #rust and not #research, so that's more offtopic than I thought.  "Too early in the morning."
[22:19:28] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[22:19:59] <pnkfelix> jld: we had similar issues in Tamarin
[22:20:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:20:06] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/IXdTPA
[22:20:06] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:20:07] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:20:07] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/DjobJw
[22:20:07] <ghrust> 13rust/06auto 14201a615 15Tim Chevalier: rustpkg: Implement install command...
[22:20:07] <ghrust> 13rust/06auto 144de4618 15Tim Chevalier: tidy
[22:20:07] <ghrust> 13rust/06auto 144b72bc3 15bors: auto merge of #6124 : catamorphism/rust/rustpkg, r=catamorphism...
[22:20:09] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:20:41] <pnkfelix> jld: (i guess i could move over to #research.  but I'm hitting the sack soon.  I'll add myself to CC list for the bug)
[22:22:51] <ssbr_> What does rustc::metadata::creader::Env.static mean?
[22:22:54] <ssbr_> statik*
[22:24:06] *** Quits: tupshin (quassel@moz-3512E62E.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Ping timeout)
[22:24:43] <ssbr_> hm, something about ".rlib" files. OK, I'll just disregard that since I'm not doing those.
[22:31:25] *** kimundi is now known as zz_kimundi
[22:32:15] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Client exited)
[22:34:27] *** Joins: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu)
[22:35:07] *** Quits: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu) (Client exited)
[22:38:18] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[22:39:10] <lucian> oh, trait inheritance appears to work
[22:40:03] *** Quits: jfredett (jfredett@moz-C01C350.bstnma.fios.verizon.net) (Ping timeout)
[22:40:30] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[22:40:41] *** Joins: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net)
[22:41:48] *** Quits: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[22:44:50] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[22:46:32] *** Quits: snearch (snearch@D5E80A6A.24AB4CE7.11CE04F0.IP) (Quit: Verlassend)
[22:50:23] *** Quits: boggle (boggle@moz-CE479719.dip0.t-ipconnect.de) (Ping timeout)
[22:50:31] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:50:51] *** Parts: judder (maradukewa@DABDEEA3.F2C0D0AC.78E362FE.IP) ()
[22:53:08] *** Joins: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net)
[22:53:40] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[22:54:29] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:55:13] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[22:59:09] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:59:56] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:01:54] *** Joins: dymk (dymk@CF8FF5AF.8F293D07.59A90BC7.IP)
[23:02:56] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[23:03:12] <dymk> I'm getting errors when compiling Rust from source, so I'm trying to compile again with "make -j2 RUST_LOG=rustc=1
[23:03:13] <dymk> ". This seems to provide slightly more verbose debug info, but is there a logfile with more crash info written anywhere?
[23:03:38] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:03:59] <pnkfelix> pcwalton: A question on stack-overflow has led me to wonder: your patch for Trait Coercion (Issue 5597 )
[23:05:00] <pnkfelix> pcwalton: (1) Is there anything blocking that besides the issue that Niko pointed out in his review notes?
[23:05:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:05:06] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 144b72bc3 to 14ba84251: 02http://git.io/N3iJvQ
[23:05:06] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:05:32] *** Joins: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu)
[23:05:40] <dymk> it seems to crash in the same spot when compiling on both windows and linux
[23:06:35] *** Quits: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu) (Client exited)
[23:06:37] <pnkfelix> pcwalton: and (2) is &Trait (rather than @Trait) fundamentally wrong-headed?  (The stack-overflow.com question that made me wonder this is: http://stackoverflow.com/q/16346048/36585 )
[23:07:39] <pnkfelix> pcwalton: (or would &Trait make sense, at least potentially in the new-world-order Niko proposed in his Dynamically Sized Types blog post)
[23:08:03] <pnkfelix> nmatsakis: I guess you might have opinions on all of ^ too
[23:09:29] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Client exited)
[23:11:28] <Sodel_the_V> Ah, shootd.! Most of what I've been trying to work on for #5762 is already done in that pull request (#5597).
[23:11:37] <Sodel_the_V> shoot*
[23:11:52] <Sodel_the_V> Well, actually, not shoot. That's a good thing.
[23:12:19] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Textual IRC Client: www.textualapp.com)
[23:12:26] <pnkfelix> Sodel_the_V: clearly we all need to read all 6200 issues before writing any code.
[23:12:35] <tjc> Yes, this is a requirement
[23:12:39] <tjc> while you're at it you can triage them for us
[23:12:42] <Sodel_the_V> Haha :P
[23:12:44] <tjc> Oh, and fix them.
[23:12:49] * tjc puts feet up, collects paycheck
[23:15:30] *** Joins: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu)
[23:15:47] *** Joins: bleibig (bleibig@moz-58EF3B3A.rochester.res.rr.com)
[23:16:03] <pcwalton> pnkfelix: no, nothing is blocking it.
[23:16:07] <pcwalton> I just haven't fixed it.
[23:16:27] *** Quits: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu) (Connection reset by peer)
[23:16:52] *** Joins: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu)
[23:16:52] <pnkfelix> pcwalton: now that I started reading the other issues like 5762, I am seeing that here be many dragons
[23:17:41] *** Joins: int3__ (int3_@moz-4B7E49C.subnet-248.amherst.edu)
[23:17:41] *** Quits: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu) (Connection reset by peer)
[23:18:29] *** Joins: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu)
[23:18:29] *** Quits: int3__ (int3_@moz-4B7E49C.subnet-248.amherst.edu) (Connection reset by peer)
[23:19:07] <Sodel_the_V> pnkfelix: There really are. :/
[23:19:07] *** Quits: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu) (Connection reset by peer)
[23:19:17] *** Joins: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu)
[23:20:02] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Quit: Leaving.)
[23:20:05] *** Quits: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu) (Connection reset by peer)
[23:20:05] *** Joins: int3__ (int3_@moz-4B7E49C.subnet-248.amherst.edu)
[23:20:20] *** Quits: int3__ (int3_@moz-4B7E49C.subnet-248.amherst.edu) (Client exited)
[23:20:21] *** Joins: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu)
[23:21:31] <pcwalton> graydon: nmatsakis: please note that we will need a new RESTRICT_NOEQ in the grammar in order to make = in patterns work, due to "let PATTERN = EXPR"
[23:21:39] <pcwalton> do you still want to change '@' to '='?
[23:22:32] <graydon> :(
[23:22:40] <pcwalton> "as" is another option, like ML.
[23:22:44] <pcwalton> OCaml anyway.
[23:22:53] <graydon> I wish I knew! (also wish someone else was the final authority for syntax; gets tiring)
[23:22:54] <graydon> um
[23:23:04] <graydon> 'as' is never going to wind up in pattern position otherwwise?
[23:23:12] <pcwalton> perhaps it will
[23:23:14] <pcwalton> CONST as whatever
[23:23:16] <pcwalton> although
[23:23:17] <graydon> yeah
[23:23:18] <graydon> tricky
[23:23:31] <pcwalton> constants have other problems and I thought we were going to restrict constants to just be identifiers?
[23:23:47] <graydon> I think close-to. the grammar of expr overlaps with pat pretty heavily.
[23:23:52] <graydon> maybe just literals and idents.
[23:24:21] <enticeing|away> gah, can't get GrabKey working :S
[23:24:46] <enticeing|away> http://ix.io/5s3
[23:24:56] <pnkfelix> i thought literals + idents was what jclements was voting for
[23:25:31] <graydon> I dig it
[23:25:44] <graydon> I'm kinda at "whatever works" territory on 9/10 of questions
[23:25:54] <graydon> maybe "whatever works + whatever is easiest".
[23:25:57] <pnkfelix> pcwalton: I want to be sure I understand the issue here
[23:26:20] <pcwalton> so "as", or "="?
[23:26:22] <pcwalton> both "work"
[23:26:37] <pcwalton> one makes the grammar more complicated, one restricts what kinds of constants we can put in patterns.
[23:26:43] <pnkfelix> pcwalton: is it that we get an ambiguity in the case of code like: `let x=y = 4` or something ?
[23:26:45] <pcwalton> I really do not care at all
[23:26:52] <pcwalton> pnkfelix: it's not *ambiguous*, it's just LL(*)
[23:27:06] <jclements> uchâ€¦ bleh...
[23:27:19] <graydon> oh gosh, this re-emerges in let doesn't it? hm
[23:27:25] <graydon> :((
[23:27:30] <pcwalton> yes, that's the problem.
[23:27:31] <jclements> I think there will be actual ambiguity in letâ€¦ no?
[23:27:45] <pcwalton> yeah, I guess it's ambiguous. but =-patterns are kind of useless in let.
[23:27:53] <jclements> isn't let a = b = c already legal?
[23:27:54] <pcwalton> well, they aren't useful
[23:27:57] <pcwalton> err
[23:27:58] <pnkfelix> pcwalton: would it work to say that the binding form can only work in substructure?
[23:28:00] <pcwalton> they aren't *useless*.
[23:28:20] <pnkfelix> pcwalton: (as in, would it get rid of the LL(*)'ness)
[23:28:24] <jclements> pnkfelix: I thought of thatâ€¦ I hated to introduce another layer of pattern syntax, though.
[23:28:43] <pcwalton> yes, what I am proposing is that IF we use `=` in patterns, we disallow `=` in irrefutable patterns
[23:28:48] <pnkfelix> jclements: yeah its not really attractive
[23:28:57] *** aatch|bed is now known as aatch
[23:28:57] <pcwalton> since `let` has an irrefutable pattern this solves the ambiguity; however
[23:29:03] <pcwalton> it complicates the grammar.
[23:29:12] *** Quits: sully (sully@moz-ECFB7516.moroso.emarhavil.com) (Ping timeout)
[23:29:13] <pcwalton> in a similar way to the way "for ... |x| { ... }" does.
[23:29:27] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:29:36] *** Joins: sully (sully@moz-ECFB7516.moroso.emarhavil.com)
[23:29:37] <aatch> enticeing|away, you need to flush after GrabKey
[23:29:49] <pnkfelix> pcwalton: I see (I think).
[23:29:56] <jclements> pcwaltonâ€¦ irrefutability doesn't affect what the parser accepts now, does it?
[23:30:03] <aatch> enticeing|away, conn.flush()
[23:30:05] <enticeing|away> aatch: ah, is flush sort-of arbitrary like that?
[23:30:22] <pcwalton> jclements: no.
[23:30:23] <aatch> flush basically flushes the output buffer
[23:30:35] *** Quits: sully (sully@moz-ECFB7516.moroso.emarhavil.com) (Quit: leaving)
[23:30:53] *** Joins: sully (sully@moz-45967CBE.emarhavil.com)
[23:30:57] <pnkfelix> so there would be one grammar for irrefutable patterns, and it wouldn't include `=`, and another grammar for refutable patterns
[23:31:05] <aatch> since you don't do any other requests after it, and only read, it just stays there
[23:31:07] <pnkfelix> where the former is a subset of the latter
[23:31:10] <aatch> it's an xcb quirk
[23:31:38] <enticeing|away> aatch: i guess the go library flushed for me
[23:31:44] <pnkfelix> jclements: and you were already so thrilled with the many variants of expr, yes?  :)
[23:32:04] <jclements> pnkfelix: sigh...
[23:32:52] *** enticeing|away is now known as enticeing
[23:33:01] <aatch> enticeing|away, I thought about it, but decided against it. I prefer things to be explicit and doing a conn.flush() isn't too much overhead
[23:33:09] <enticeing> yeah, i understand
[23:36:25] <enticeing> okay, got dmenu_run spawning on Mod4+X and windows are mapping properly
[23:38:07] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[23:41:16] <pnkfelix> pcwalton: nmatsakis: okay I found my answer, its a known bug (namely issue #3794 )
[23:42:38] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[23:46:26] *** zz_kimundi is now known as kimundi
[23:46:54] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[23:52:42] <enticeing> aatch: another question
[23:52:49] <enticeing> how exactly should i call ConfigureWindow ?
[23:53:05] <enticeing> in all the docs for xcb that i can read you supple a u16 and a [u32], or something like that
[23:53:15] <enticeing> *supply
[23:53:55] <enticeing> should i do something like ~[(XCB_WINDOW_X, 0),(XCB_WINDOW_Y, 0)] ?
[23:54:35] <aatch> enticeing, I did something clever there.
[23:54:45] <enticeing> did i guess correctly? :P
[23:54:52] <aatch> 2 mins, I'm on hold
[23:55:42] *** Joins: jfredett (jfredett@moz-C01C350.bstnma.fios.verizon.net)
[23:55:52] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Ping timeout)
[23:56:05] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:56:05] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/7Yy6Nw
[23:56:05] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:58:35] <enticeing> aatch: yeah, very clever! much better than doing like XCB_CONFIG_WINDOW_X|etc.|etc.|etc.
[23:59:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:59:06] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/4UzV_Q
[23:59:06] <ghrust> 13rust/06auto 147aa10e6 15Daniel Micay: make link_args use spaces as separators...
[23:59:06] <ghrust> 13rust/06auto 1479a2b2e 15bors: auto merge of #6192 : thestinger/rust/link_args, r=catamorphism...
[23:59:07] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:59:40] <aatch> enticeing, yup
