[00:14:18] *** Quits: swgillespie (swgillespi@moz-D461B92C.dynamic.ip.windstream.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[00:43:11] *** kimundi is now known as zz_kimundi
[00:46:49] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[00:46:49] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14780a417 to 144bca7fd: 02http://git.io/N3iJvQ
[00:46:49] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[01:09:03] *** Joins: swgillespie (swgillespi@moz-D461B92C.dynamic.ip.windstream.net)
[01:14:22] *** Quits: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net) (Ping timeout)
[01:14:40] <cmr> acrichto: hopefully!
[01:17:50] *** Joins: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net)
[01:24:46] <cmr> dbaupp: builder is currently 3 days behind.
[01:27:30] *** Joins: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net)
[01:33:05] <dbaupp> cmr: running now?
[01:33:11] <cmr> yeah
[01:38:56] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[01:41:55] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[01:41:56] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 148df969a to 144bca7fd: 02http://git.io/N3iJvQ
[01:41:56] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[01:44:06] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:44:07] *** Quits: brson (brson@6A848D32.C1B840DD.76F66111.IP) (Quit: leaving)
[01:46:54] <cmr> you know sometimes I wonder why we bother with helpful error messages when noone reads them.
[01:48:24] <aatch> cmr, the "incorrect length" thing?
[01:48:30] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[01:48:35] <Luqman> 'no_rebuilding_dep failed for some other reason' :|
[01:48:39] <Luqman> yes, very helpful
[01:48:53] <cmr> nah, that one atleastis understandable, I'm talking about the unclosed delimiter one
[01:49:00] <Luqman> dbaupp: know any reason why the revert may have caused that to fail? ^
[01:49:13] <dbaupp> Luqman: looks like a transient rustpkg thing
[01:49:24] <dbaupp> I retried it
[01:49:36] <cmr> the rustpkg tests never, literally never, pass for me locally :(
[02:07:23] *** Quits: swgillespie (swgillespi@moz-D461B92C.dynamic.ip.windstream.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[02:18:59] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[02:25:35] <sfackler> r? https://github.com/mozilla/rust/pull/11332
[02:26:26] <dbaupp> sfackler: so there is no need for sharing at all?
[02:26:32] <sfackler> nope
[02:26:51] <sfackler> I think it was just written back when ~Foo didn't work but @Foo did
[02:27:30] <dbaupp> sounds likely
[02:27:49] <dbaupp> r? https://github.com/mozilla/rust/pull/11321
[02:51:52] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[02:51:52] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/67W3AQ
[02:51:52] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[02:52:21] <Luqman> \o/ can build rust again
[02:56:47] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[02:56:47] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/c2IsNA
[02:56:47] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[02:56:49] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[02:56:49] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/tE9BZQ
[02:56:49] <ghrust> 13rust/06auto 146cc5beb 15Alan Andrade: Convert sub tutorials into Guides #10838...
[02:56:49] <ghrust> 13rust/06auto 14a0c9b04 15bors: auto merge of #11106 : alan-andrade/rust/convert_tutorials_to_guides, r=huonw...
[02:56:49] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[03:04:10] <cmr> dbaupp: I'd review your treemap PR but it looks scary
[03:04:31] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[03:05:04] <cmr> that said.. r? https://github.com/mozilla/rust/pull/11333
[03:05:07] <cmr> :p
[03:06:01] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[03:07:38] <dbaupp> cmr: nah, it's super simple
[03:07:46] <dbaupp> there's not any ridiculous macro hacks or anything
[03:07:50] <dbaupp> trust me :P
[03:08:09] <dbaupp> cmr: I'd review that PR but it looks scary :P
[03:08:33] <cmr> Hey, yours actually is scary
[03:08:35] <cmr> !
[03:09:05] <dbaupp> yeah... it's probably near impossible to review sensibly...
[03:09:35] <cmr> (but in all seriousness I don't understand the datastructure etc, I don't feel comfortable reviewing it)
[03:09:36] <lkuper> cmr: r? https://github.com/mozilla/rust/pull/11270 (I think I fixed the faily part that adridu59 pointed out)
[03:09:37] <dbaupp> wait, actually, the last commit is just macro-ify the code in the first commit... they are literally the same code just with the ability to avoid the `mut`'s.
[03:09:50] * lkuper grumbles about os x 10.6 builds not working anymore
[03:09:56] <dbaupp> so it is possible to review
[03:09:57] * dbaupp phew
[03:11:23] <dbaupp> cmr: I'm working on stuff atm, so I'll get to the review in a bit
[03:11:38] <cmr> I've got things in the early hours of the morn, so
[03:11:41] * cmr -> bed
[03:11:49] <cmr> I can give you a review tomorrow if no one gets it by then
[03:12:06] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[03:31:54] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[03:31:54] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14a0c9b04 to 148adbb38: 02http://git.io/N3iJvQ
[03:31:54] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[03:31:56] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[03:31:56] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/Kd0eFA
[03:31:56] <ghrust> 13rust/06auto 1462b74d9 15Lindsey Kuper: Write up default methods for the tutorial.
[03:31:56] <ghrust> 13rust/06auto 145681c71 15Lindsey Kuper: Wording tweak suggested by @pcwalton.
[03:31:57] <ghrust> 13rust/06auto 1460e1394 15Lindsey Kuper: tutorial: change `float` to `f32` since float is no longer a type.
[03:32:00] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[03:34:14] *** Quits: zz_kimundi (kimundi@moz-64655121.dip0.t-ipconnect.de) (Ping timeout)
[03:37:47] *** Joins: zz_kimundi (kimundi@moz-9DB60884.dip0.t-ipconnect.de)
[03:37:48] *** zz_kimundi is now known as kimundi
[03:38:34] *** Joins: swgillespie (swgillespi@moz-D461B92C.dynamic.ip.windstream.net)
[03:45:18] *** Quits: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca) (Quit: canhtak)
[03:56:09] *** Quits: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net) (Quit: Leaving.)
[03:58:54] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[04:02:50] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[04:18:58] <Eridius> nmatsakis: I'm reading your blog post now, and there's a minor error in one of the code sinppets. You created a variable "dummy1" but then used it as "dummy" 2 lines below
[04:24:42] <Eridius> hrm, I just had a random thought inspired by the definition of linear types. It seems to me it would be potentially useful if you could define a type where it is a compile-time error to drop it
[04:24:54] <cmr> What are the uses?
[04:24:57] <cmr> *usecases
[04:25:14] <Eridius> a return value that the caller is forced to handle. The type would have methods that consume self (and I suppose ignore(self) to skip the drop)
[04:27:20] <Eridius> or here's another case. A Future type that doesn't use any heap storage, so it needs to ensure the future calculation is done before the type is dropped. Therefore, it has a method that consumes self and returns the future value
[04:27:37] <Eridius> (e.g. the storage is inline in the type, which simplifies some things)
[04:34:29] <aatch> Eridius, isn't that, by definition, a linear type?
[04:34:50] <Eridius> aatch: I did say it was inspired by the definition of linear type (that I read on wikipedia) ;)
[04:35:43] <aatch> Eridius, yes, but "inspired by" implies that it's different from what inspired it.
[04:36:40] <Eridius> aatch: well I mean, you could implement methods that take &self and such call multiple things on a struct like this, so I'm not sure it actually qualifies as linear
[04:36:46] <Eridius> but I'm no expert in substructural logic
[04:51:44] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[04:51:44] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/Kd0eFA
[04:51:44] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[04:56:53] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[04:56:53] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/q9TgHg
[04:56:54] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[04:56:55] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[04:56:56] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/6Qf-PQ
[04:56:56] <ghrust> 13rust/06auto 1419e97f5 15Young-il Choi: librustc: ar call fix to support android cross compile on mac
[04:56:56] <ghrust> 13rust/06auto 14c8c9942 15Young-il Choi: librustc: move target dependent logic to back::link
[04:56:56] <ghrust> 13rust/06auto 14e6490cb 15Young-il Choi: librustc: add get_system_tools for target specific environment
[04:56:58] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[05:09:04] <acrichto> my train is here
[05:09:09] <acrichto> whoops wrong channel
[05:14:48] *** Quits: ChristopherBurg (Christophe@moz-2C03E71B.hfc.comcastbusiness.net) (Quit: NO CARRIER)
[05:17:04] <Eridius> nmatsakis: your sample implementation for Drop on Rc<T> is also wrong. It doesn't bother checking the refcount and unilaterally drops the contained data
[05:37:48] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[06:06:47] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[06:06:47] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/6Qf-PQ
[06:06:47] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[06:08:11] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[06:08:11] <ghrust> 01[13rust01] 15alexcrichton merged 06auto into 06snap-stage3: 02http://git.io/9uBDow
[06:08:11] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[06:11:42] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[06:11:42] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/CboscQ
[06:11:42] <ghrust> 13rust/06auto 14eeafee4 15Alan Andrade: Convert sub tutorials into Guides #10838...
[06:11:42] <ghrust> 13rust/06auto 14b6a1fde 15bors: auto merge of #11106 : alan-andrade/rust/convert_tutorials_to_guides, r=cmr...
[06:11:42] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[06:43:24] <Luqman> hmmm, has the whole crate_id mechanism changed some time recently?
[06:43:31] <cmr> Luqman: what do you mean?
[06:43:35] <cmr> it shouldn't have changed drastically?
[06:44:00] <Luqman> running into "error: can't find crate for `std`" because of supposed crate_id mismatch
[06:44:08] <Luqman> on my arm builds that is
[06:45:15] <Luqman> so i have a rustc & libstd i cross compiled. i try to use that rustc on arm to build anything and it can't find libstd
[06:45:32] <cmr> strace it to see what it's looking for?
[06:45:33] <Luqman> or rather, it does find the libstd that's there but skips it cause of crate_id mismatch
[06:45:42] <cmr> ah
[06:45:50] <cmr> the version number changed
[06:45:55] <cmr> are you using #0.9-pre ?
[06:46:20] <Luqman> no, i'm pretty sure I built it with 0.9
[06:46:38] <Luqman> in fact i just do VERS=`grep -R "CFG_RELEASE.*=" ../Makefile.in | awk '{ print $3; }'`
[06:47:07] <cmr> heh
[06:47:24] <cmr> does RUST_LOG say anything helpful about the crate_ids? :(
[06:48:04] <Luqman> tried with RUST_LOG=rustc::metadata::loader but nope
[06:48:39] <cmr> that is quite unfortunate.
[06:48:43] <Luqman> hmm, but if i use rustc on my x86_64 host and use --target=arm it works fine..
[06:48:50] <cmr> rustc --ls prints expected things on both?
[06:48:53] <cmr> hm
[06:48:55] <cmr> that's weird
[06:48:59] <Luqman> so, it seems they've calculating different crate_ids?
[06:49:35] <cmr> I haven't seen anything platform dependant in that area :\
[06:58:37] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[07:15:25] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Connection reset by peer)
[07:15:26] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[07:51:45] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[07:51:45] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/CboscQ
[07:51:45] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[07:54:16] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[07:54:16] *** ChanServ sets mode: +ao pcwalton pcwalton
[07:56:44] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[07:56:44] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/ILsi8Q
[07:56:44] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[08:00:00] *** flaper87|afk is now known as flaper87
[08:07:46] *** Quits: swgillespie (swgillespi@moz-D461B92C.dynamic.ip.windstream.net) (Quit: Textual IRC Client: www.textualapp.com)
[08:22:22] *** Quits: blank_name (blank_name@78B04CD2.66204B68.6D228269.IP) (Quit: leaving)
[08:24:33] *** Joins: blank_name (blank_name@78B04CD2.66204B68.6D228269.IP)
[08:31:59] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[08:31:59] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/-_Qltw
[08:31:59] <ghrust> 13rust/06auto 149c8813f 15Alex Crichton: Guarantee that native tasks wait for children...
[08:31:59] <ghrust> 13rust/06auto 14c58bb23 15bors: auto merge of #11315 : alexcrichton/rust/issue-11309, r=huonw...
[08:31:59] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[08:32:03] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[08:32:03] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14b80df75 to 14b6a1fde: 02http://git.io/N3iJvQ
[08:32:03] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[08:48:50] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[08:54:10] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[09:13:20] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[09:56:43] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[09:56:43] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/-_Qltw
[09:56:43] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[10:01:50] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[10:01:50] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/PZAECg
[10:01:50] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[10:01:51] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[10:01:51] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/FbNQ8A
[10:01:51] <ghrust> 13rust/06auto 146abe0ef 15Jan Niklas Hasse: Make rustc's own lib directory configurable and change the default to rustlib. Fixes #3319
[10:01:51] <ghrust> 13rust/06auto 144e622be 15bors: auto merge of #11118 : jhasse/rust/patch-rustlibdir, r=alexcrichton...
[10:01:51] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[10:25:53] *** Joins: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP)
[10:31:41] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[10:31:56] *** Joins: lpy (lpy@C2056CB.F09091A8.1348A864.IP)
[10:31:56] *** Quits: lpy (lpy@C2056CB.F09091A8.1348A864.IP) (Quit: lpy)
[10:37:03] <eddyb> dbaupp: any easy way to know what order the tests come in? I should just give up and run check-stage1 :-<
[10:51:26] <dbaupp> eddyb: um
[10:51:46] <dbaupp> cfail, rfail, rpass, std, extra, syntax, rustc, rustpkg, rustdoc
[10:52:21] <dbaupp> you can run `check-stage1-syntax NO_REBUILD=1` iirc
[11:16:41] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[11:16:41] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/FbNQ8A
[11:16:41] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[11:18:09] <eddyb> dbaupp: rustc is before syntax
[11:19:36] <dbaupp> eddyb: that's not what I remember...
[11:20:26] <eddyb> dbaupp: http://buildbot.rust-lang.org/builders/auto-linux-64-nopt-t/builds/2490/steps/test/logs/stdio Ctrl+F "rustctest"
[11:20:30] <dbaupp> oh, yeah
[11:20:38] <dbaupp> seems to have changes
[11:20:40] <dbaupp> *d
[11:20:53] <eddyb> it looks alphabetical. so syntax is the last one
[11:21:46] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[11:21:46] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/vl5YRg
[11:21:46] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[11:39:32] *** Joins: gwty (gwtypc@26E36FDA.A9370AD.553D87E5.IP)
[11:55:31] *** Joins: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca)
[11:58:48] <eddyb> dbaupp: r? https://github.com/mozilla/rust/pull/11161
[11:58:54] <eddyb> (one more one character change)
[11:59:23] <eddyb> dbaupp: wait, let me rebase. turns out something happened
[12:00:57] <eddyb> dbaupp: there
[12:01:48] *** Joins: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net)
[12:04:50] <dbaupp> eddyb: which character?
[12:05:38] <eddyb> dbaupp: https://github.com/mozilla/rust/pull/11161/files#diff-7fde1475846894e59317d75947bdb921R1128
[12:09:00] *** Quits: gwty (gwtypc@26E36FDA.A9370AD.553D87E5.IP) (Client exited)
[12:09:55] <eddyb> dbaupp: thanks. it better work this time >_>
[12:12:03] *** Joins: gwty (gwtypc@26E36FDA.A9370AD.553D87E5.IP)
[12:18:54] *** Joins: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP)
[12:35:39] *** Quits: gwty (gwtypc@26E36FDA.A9370AD.553D87E5.IP) (Client exited)
[12:36:44] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[12:36:44] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/J75TRQ
[12:36:44] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[12:41:38] *** Joins: tupshin_ (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[12:41:39] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[12:41:39] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/IfugeA
[12:41:39] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[12:41:40] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[12:41:40] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/gI0saw
[12:41:40] <ghrust> 13rust/06auto 143119d18 15Eduard Burtescu: Disowned the Visitor.
[12:41:40] <ghrust> 13rust/06auto 1403a38b9 15bors: auto merge of #11161 : eddyb/rust/de-at-visitor, r=huonw...
[12:41:40] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[12:42:34] *** Quits: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net) (Quit: Leaving.)
[12:54:45] *** Quits: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca) (Quit: canhtak)
[13:26:50] <kimundi> nmatsakis: I just read your DST5 post - Seems well thought out. Found a mistake in the drop example though - you forgot the refcount == 0 check. ;)
[13:27:22] <eddyb> heh, I thought it was just a minimal example
[13:28:54] <eddyb> kimundi, nmatsakis: also s/RC/Rc/ :P
[13:48:30] <eddyb> dbaupp: lol, android is slow-mo, one build behind
[13:51:51] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[13:51:51] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/gI0saw
[13:51:51] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[13:52:10] <eddyb> finally >_>
[13:53:52] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[13:54:19] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[13:56:33] <dbaupp> eddyb: \o/
[13:56:54] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[13:56:54] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Tvjcpw
[13:56:54] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[13:57:53] *** Joins: ChristopherBurg (Christophe@moz-2C03E71B.hfc.comcastbusiness.net)
[14:08:03] <eddyb> oh, git branch --merged is useful in cleaning up the local workspace
[14:09:13] <dbaupp> eddyb: `git branch --merged | grep -v "\*" | xargs -n 1 git branch -d`
[14:10:02] <eddyb> no kidding
[14:13:07] *** Joins: sms (Mibbit@moz-A3C5D209.hsd1.ga.comcast.net)
[14:16:10] <sanxiyn> acrichto: Do you know what https://github.com/alexcrichton/llvm/commit/eac6ff795c40778683e42b0c6ab6f6adaceb391d was about and how it was solved?
[14:16:34] <sanxiyn> (As I don't see it anymore in Rust's latest LLVM fork)
[14:20:47] <kaeso> sanxiyn: isn't it still there? https://github.com/luqmana/llvm/commits/8841dcef357e051c34a46030db7c7b1a83f9b1d8
[14:21:36] <sanxiyn> kaeso: Oops you are right
[14:21:39] <sanxiyn> It's still there :(
[14:22:07] <kaeso> sanxiyn: https://github.com/mozilla/rust/issues/4259 FYI
[14:24:14] <sanxiyn> kaeso: Thanks
[14:24:26] <sanxiyn> acrichto wrote: "should not be upstreamed and I need to figure out how to get us to stop using it (this may indicate a bug upstream, but that's for me to figure out)"
[14:24:29] <sanxiyn> Argh
[14:45:00] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[14:59:52] <eddyb> special_idents::clownshoe_abi
[15:00:14] <sanxiyn> Everybody loves clownshoes
[15:00:21] * eddyb moves on
[15:01:33] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[15:01:38] <eddyb> fwiw (I hope nobody else is doing this) I'm rustifying types and variants as much as I can
[15:01:54] <sanxiyn> eddyb: ?
[15:02:49] <eddyb> sanxiyn: snake_case -> UpperCamelCase
[15:03:07] <dbaupp> eddyb: kimundi had a script that made that easier, fwiw
[15:04:37] <kimundi> Well, not really. :P - I just hav/had a crappy ruby script that automates the rename->compileerror->fixup loop
[15:05:03] <sanxiyn> I was working on *correct* renamer that uses the parser
[15:05:06] <kimundi> I never put in the effort to make it actually useful, so it might as well not exists at this point
[15:05:21] <kimundi> sanxiyn: Now _THAT_ would be really useful
[15:05:35] <sanxiyn> kimundi: Not sure about that, but it would be probably nice to have...
[15:05:55] <kimundi> Would be useful as part of a general rust refactoring tool
[15:05:57] <sanxiyn> e.g. if you have same type name in two different modules, rename only the correct one...
[15:06:04] <kimundi> yeah
[15:06:41] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Input/output error)
[15:06:45] *** Quits: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk) (Ping timeout)
[15:06:45] *** Quits: [o__o] (~o__o@moz-24EBFAC7.me) (Ping timeout)
[15:06:59] *** Joins: jdm_ (jdm@moz-AC9499B2.cable.teksavvy.com)
[15:07:00] * eddyb doesn't like having ast::Path and ast_map::Path that much :S
[15:07:13] *** Joins: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk)
[15:07:58] *** Quits: bstrie (ben@moz-D5A1D0F5.members.linode.com) (Ping timeout)
[15:08:04] *** Quits: rhodesd (none@3646D136.4C5731DA.F395EA5B.IP) (Ping timeout)
[15:08:08] *** Quits: jdm_ (jdm@moz-AC9499B2.cable.teksavvy.com) (Input/output error)
[15:08:20] *** Quits: cyndis (cyndis@moz-C4357EA7.kapsi.fi) (Ping timeout)
[15:08:38] *** Quits: km (quassel@moz-777F24DE.kevinmehall.com) (Ping timeout)
[15:09:10] *** Quits: friggle (friggle@moz-A607EAFA.members.linode.com) (Ping timeout)
[15:09:11] *** Quits: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk) (Ping timeout)
[15:09:36] *** Joins: [o__o] (~o__o@moz-24EBFAC7.me)
[15:11:26] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[15:12:24] *** Joins: cyndis (cyndis@moz-C4357EA7.kapsi.fi)
[15:12:31] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[15:12:31] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/WH0gXg
[15:12:31] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[15:12:38] <dbaupp> r? https://github.com/mozilla/rust/pull/11342
[15:12:38] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Input/output error)
[15:12:46] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[15:14:05] *** Joins: km (quassel@moz-777F24DE.kevinmehall.com)
[15:14:08] *** Quits: cyndis (cyndis@moz-C4357EA7.kapsi.fi) (Ping timeout)
[15:14:50] *** Joins: bstrie (ben@moz-D5A1D0F5.members.linode.com)
[15:14:51] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Ping timeout)
[15:15:11] *** Joins: friggle (friggle@moz-A607EAFA.members.linode.com)
[15:15:56] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[15:16:33] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Input/output error)
[15:16:48] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[15:16:48] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Yt1PbA
[15:16:48] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[15:16:48] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[15:16:48] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/0pz4IA
[15:16:48] <ghrust> 13rust/06auto 142be4989 15Florian Hahn: Add lint for unnecessary casts
[15:16:48] <ghrust> 13rust/06auto 14385488c 15Florian Hahn: Remove some unnecessary type casts...
[15:16:49] <ghrust> 13rust/06auto 1475a77f7 15bors: auto merge of #11329 : fhahn/rust/unused-cast-lint2, r=alexcrichton...
[15:16:51] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[15:16:56] *** Quits: friggle (friggle@moz-A607EAFA.members.linode.com) (Ping timeout)
[15:17:15] *** Quits: Kxepal (Miranda@moz-DBA12CC2.pppoe.mtu-net.ru) (Ping timeout)
[15:17:20] *** Quits: km (quassel@moz-777F24DE.kevinmehall.com) (Ping timeout)
[15:17:31] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[15:17:38] *** Joins: cyndis (cyndis@moz-C4357EA7.kapsi.fi)
[15:17:44] *** Quits: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP) (Quit: Leaving)
[15:18:37] *** Quits: bstrie (ben@moz-D5A1D0F5.members.linode.com) (Ping timeout)
[15:19:14] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[15:19:22] *** Quits: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca) (Ping timeout)
[15:19:22] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[15:20:19] *** Quits: cyndis (cyndis@moz-C4357EA7.kapsi.fi) (Ping timeout)
[15:20:20] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Input/output error)
[15:20:47] *** Joins: friggle (friggle@moz-A607EAFA.members.linode.com)
[15:21:41] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[15:21:55] *** Joins: km (quassel@moz-777F24DE.kevinmehall.com)
[15:22:35] *** Quits: friggle (friggle@moz-A607EAFA.members.linode.com) (Ping timeout)
[15:22:45] *** Joins: bstrie (ben@moz-D5A1D0F5.members.linode.com)
[15:23:29] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Ping timeout)
[15:24:13] *** Joins: rhodesd (none@3646D136.4C5731DA.F395EA5B.IP)
[15:25:27] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[15:25:32] *** Quits: bstrie (ben@moz-D5A1D0F5.members.linode.com) (Ping timeout)
[15:25:35] *** Quits: km (quassel@moz-777F24DE.kevinmehall.com) (Ping timeout)
[15:25:55] *** Quits: rhodesd (none@3646D136.4C5731DA.F395EA5B.IP) (Ping timeout)
[15:26:36] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Input/output error)
[15:26:49] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[15:26:49] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1475a77f7 to 1455bb5e5: 02http://git.io/N3iJvQ
[15:26:49] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[15:26:50] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[15:26:50] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/5Faoxg
[15:26:50] <ghrust> 13rust/06auto 14bb49916 15Steven Fackler: Use ~-objects instead of @-objects for syntax exts...
[15:26:50] <ghrust> 13rust/06auto 14bae091e 15bors: auto merge of #11332 : sfackler/rust/de-at-se, r=huonw...
[15:26:50] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[15:30:07] *** Joins: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk)
[15:30:09] *** Joins: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca)
[15:30:24] *** Joins: friggle (friggle@moz-A607EAFA.members.linode.com)
[15:30:33] *** Joins: km (quassel@moz-777F24DE.kevinmehall.com)
[15:31:39] *** Joins: jdm (jdm@moz-DB4A9C19.scl3.mozilla.com)
[15:33:36] *** Joins: cyndis (cyndis@moz-C4357EA7.kapsi.fi)
[15:34:26] *** Joins: bstrie (ben@moz-D5A1D0F5.members.linode.com)
[15:34:30] *** Joins: rhodesd (none@3646D136.4C5731DA.F395EA5B.IP)
[16:06:02] *** Joins: Kxepal (Miranda@moz-DBA12CC2.pppoe.mtu-net.ru)
[16:16:59] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[16:25:40] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[16:25:40] *** ChanServ sets mode: +ao pcwalton pcwalton
[16:29:22] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[16:29:23] *** ChanServ sets mode: +ao dherman dherman
[16:34:51] *** Quits: Kxepal (Miranda@moz-DBA12CC2.pppoe.mtu-net.ru) (Ping timeout)
[16:36:58] *** Joins: Kxepal (Miranda@moz-30036DE2.pppoe.mtu-net.ru)
[16:37:01] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[16:37:01] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/5Faoxg
[16:37:01] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[16:41:47] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[16:41:47] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/guP8Fg
[16:41:47] <ghrust> 13rust/06auto 14cb6451c 15Corey Richardson: Remove a fixme...
[16:41:47] <ghrust> 13rust/06auto 141535a29 15Corey Richardson: Add tidy support for snapshots...
[16:41:48] <ghrust> 13rust/06auto 14ccaf0b4 15Corey Richardson: Remove a fixme...
[16:41:50] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[16:47:00] *** Joins: gwty (gwtypc@CB91D618.73AAEA08.49FF672.IP)
[16:56:11] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[17:04:02] *** Parts: bstrie (ben@moz-D5A1D0F5.members.linode.com) ()
[17:04:09] *** Joins: bstrie (ben@moz-D5A1D0F5.members.linode.com)
[17:08:38] *** Joins: pauls (pauls@moz-7140CF01.ccs.neu.edu)
[17:10:04] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[17:39:53] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[17:46:47] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[17:51:43] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[17:51:43] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/guP8Fg
[17:51:43] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[17:56:38] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[17:56:38] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/xG1-eA
[17:56:38] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[18:03:17] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[18:28:47] *** Joins: pnkfelix (pnkfelix@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[18:31:48] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[18:31:48] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14c63a91e to 148b71b64: 02http://git.io/N3iJvQ
[18:31:48] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[18:31:50] *** Joins: geoffhill (geoffhill@moz-738DC0DB.org)
[18:32:19] <olsonjeffery> acrichto: \o/
[18:32:45] <acrichto> libnative is pretty awesome
[18:32:46] <olsonjeffery> it's impressive how much progress you made w/ splitting up m:n and 1:1. good times.
[18:32:53] <acrichto> thanks :)
[18:32:55] <olsonjeffery> i never expected those tickets to ever get resolved, tbh
[18:36:12] <Eridius> hrm, segfault trying to compile rust. That's not good
[18:36:29] *** Quits: pnkfelix (pnkfelix@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[18:37:26] <Eridius> /bin/sh: line 1: 89269 Segmentation fault: 11  x86_64-apple-darwin/stage0/bin/rustc --cfg stage0 -O --cfg rtopt --cfg debug -Z no-debug-borrows -Z prefer-dynamic --target=x86_64-apple-darwin -W warnings -L x86_64-apple-darwin/rt/uv_support -L x86_64-apple-darwin/rt/libuv/ --out-dir x86_64-apple-darwin/stage0/lib/rustlib/x86_64-apple-darwin/lib /Users/kevin/Dev/rust/rust/src/librustuv/lib.rs
[18:37:33] <Eridius> happens even after a make clean
[18:40:22] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[18:40:22] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:40:57] <pcwalton> acrichto: I benchmarked rust-redis with your change
[18:41:04] <pcwalton> it's within 5% of rust-benchmark for 1 thread and within 10% for 8 threads
[18:41:14] <acrichto> rust-benchmark?
[18:41:18] <pcwalton> err
[18:41:19] <pcwalton> redis-benchmark
[18:41:20] <pcwalton> the C version
[18:41:23] <acrichto> oh wow
[18:41:26] <pcwalton> most of the problems were conditions causing allocation on every send :(
[18:41:28] <pcwalton> it's slower than Go
[18:41:29] <pcwalton> well
[18:41:35] <pcwalton> it's slower than the Go version I found which totally cheats
[18:41:38] <acrichto> liek 2x sloewr than go?
[18:41:40] <acrichto> or like 5%?
[18:41:41] <pcwalton> no, 3%
[18:41:43] <Eridius> cheats?
[18:41:44] <acrichto> awesome!
[18:41:47] <acrichto> that's good news
[18:42:04] <pcwalton> Eridius: it's not actually a Redis library -- it just writes the raw bytes to the TCP socket
[18:42:11] <pcwalton> for the specific string in the benchmark
[18:42:20] <Eridius> wat
[18:42:22] <pcwalton> so yeah
[18:42:24] <pcwalton> it's faster than Rust's :)
[18:42:26] <acrichto> wait that's not a redis benchmark
[18:42:28] <acrichto> that's a tcp benchmark
[18:42:28] <pcwalton> but that's also totally cheating
[18:42:29] <acrichto> lol
[18:42:30] <pcwalton> yeah
[18:44:12] <pcwalton> once we get rid of conditions it should be as fast as the cheating Go version
[18:44:18] <pcwalton> in 1:1 mode
[18:44:54] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[18:44:55] *** ChanServ sets mode: +ao dherman dherman
[18:45:31] <pcwalton> except not cheating ;)
[18:46:07] <Eridius> hmm ok, the segfault only happens with parallel make
[18:46:13] <Eridius> seems the makefile dependencies are broken again
[18:46:56] <sfackler> the dependencies have *always* been broken for me fwiw
[18:47:29] <Eridius> sfackler: `make -j4` has worked most of the time, and I feel like sometime in this last month or so someone went in and double-checked all the dependencies
[18:47:47] <Eridius> anyway, when it tries to build libextra, librustuv, libgreen, and libnative in parallel, librustuv, libgreen, and libnative all segfault
[18:48:48] <Eridius> but I don't know why they're segfaulting
[18:49:44] <sfackler> core dumps!
[18:52:14] <whitequark> pcwalton: what replaces conditions? Results?
[18:52:17] <pcwalton> yeah
[18:52:29] <whitequark> that's rather convenient for me, no easy TLS on bare-metal
[18:52:41] *** Joins: cmr_ (Mibbit@86DBC01E.79C29BED.C209128E.IP)
[18:54:00] <sfackler> is that blocked on anything or is it just waiting on acrichto to rebase that PR?
[18:54:02] <acrichto> results are hard though, "just Result" doesn't seem to quite cut it
[18:54:23] <acrichto> it's blocked on finding a nicer solution right now (at least in my mind)
[18:55:37] <pcwalton> acrichto: do you want to keep conditions?
[18:55:44] <pcwalton> I really dislike the syntax and they're showing up in profiles
[18:55:45] <acrichto> pcwalton: not at all
[18:55:47] <pcwalton> ok
[18:56:01] <pcwalton> do we have a monadic "do" notation macro yet?
[18:56:07] <pcwalton> somebody suggested it on the ML the other day
[18:56:17] <acrichto> I wrote one, but I don't think I used it enough to make it useful
[18:56:45] <acrichto> https://github.com/alexcrichton/rust/blob/remove-io-error/src/libstd/lib.rs#L94-L122
[18:58:13] <pcwalton> how do people feel about updating extra::arena::Arena and using it in the compiler in a few places?
[18:58:25] <pcwalton> by updating I mean rewriting
[18:58:42] <pcwalton> I think it might be useful for de-@ing Block
[18:59:07] <pcwalton> you want Blocks to hang around for as long as the fn ctxt does
[18:59:07] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Ping timeout)
[18:59:09] <acrichto> that'd be awesome to remove @-block
[18:59:13] <pcwalton> since you never destroy blocks
[18:59:19] <pcwalton> until the function is gone
[18:59:23] <acrichto> I was thinkinga bout that the other day
[18:59:23] <pcwalton> so it seems to me like an Arena is perfect
[18:59:30] <acrichto> it'd be sweet for Arnea to actually be useful and used
[19:12:43] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:12:44] *** ChanServ sets mode: +qo brson brson
[19:13:32] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[19:13:32] *** ChanServ sets mode: +ao dherman dherman
[19:16:36] <vadimcn> Hi
[19:16:42] <vadimcn> What produces INTERPOLATED tokens in Rust parser?
[19:17:07] <sfackler> vadimcn: I think macro arguments
[19:17:51] <vadimcn> so they should appear only within macro definition?
[19:20:46] <pauls> vadimcn: those tokens don't appear in an actual source file; they're the result of the macro parser parsing an argument to a macro...
[19:20:55] <sfackler> I think they're produced by the expansion of a macro_rules macro
[19:21:23] <pauls> ...and then plopping it back into a sequence of tokens to expand the macro.
[19:22:39] <pauls>  The parser, when it hits an INTERPOLATED expr (for example), it knows it has the expr already parsed and ready to go.
[19:23:48] <vadimcn> Is that for speed?   Couldn't it have re-parsed tokens?
[19:26:11] <pauls> vadimcn: yes. Otherwise, you'd have O(n^2) parse times as things got parsed over and over again.
[19:28:41] <vadimcn> On the other hand, the way it works now, the parser has to have an explicit logic to expect macros.
[19:29:17] <vadimcn> For example, you cannot use a macro to generate fn name, because parser doesn't expect to find one there.
[19:30:34] <pauls> vadimcn: true,  but it's not much code (thanks to, appropriately, macros)
[19:30:35] <vadimcn> Wouldn't it be better to expand macros on tokenizer level, so they would work everywhere?
[19:31:41] <pauls> vadimcn: that's a separate matter: we let you interpolate anywhere because that works. But allowing macro invocations at particular kinds of AST nodes is much harder.
[19:32:19] *** Quits: geoffhill (geoffhill@moz-738DC0DB.org) (Ping timeout)
[19:32:24] <vadimcn> not sure I understand...
[19:32:25] <pauls> We already have some tricky behavior regarding distinguishing expr-macros-at-the-beginning of a statement and stmt macros.
[19:33:25] <pauls> Allowing macros in identifier position is even more trouble (I believe that the best solution is to build identifier concatenation into the macro system itself, since that's pretty much all you do with idents)
[19:34:11] <cmr_> I was able to implement VB-style `With` with macros, they're super cool
[19:35:00] <pauls> But doing macro expansion at the token level would mean that you cannot parse Rust past the first macro invocation, because you don't know what it's going to do to the tokens.
[19:35:08] <pcwalton> vadimcn: because of hygiene
[19:35:11] <pcwalton> macros have to know what "let" is
[19:35:17] <pauls> cmr_: I don't know VB, but that sounds cool, what is it?
[19:35:44] <pauls> vadimcn: That kind of thing is fine for sweet.js (which has roughly that system, I believe), but Rust needs to be parseable.
[19:36:00] *** Quits: gwty (gwtypc@CB91D618.73AAEA08.49FF672.IP) (Ping timeout)
[19:36:12] <pauls> pcwalton: I don't think that's actually true: you only need to know what `let` is after expansion, which you'd still be able to do.
[19:36:14] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[19:36:14] *** ChanServ sets mode: +o tjc
[19:36:20] <pcwalton> oh, right
[19:36:26] <cmr_> pauls: With SomeExpr \n .Field1 = Value \n Dim Name As Type = .Field2 \n End
[19:36:40] <vadimcn> Why are macros in ident position troublesome?   Isn't IDENT token followed by NOT only valid as a macro expansion?
[19:36:54] <cmr_> I wasn't able to implement .Field2 in expr, but the .FieldName = Value was pretty simple (and is the most common usage)
[19:37:48] <cmr_> it's basically functional record update but uglier ;P
[19:38:38] <pauls> vadimcn: yeah, but are you expanding to an ident or an expression? The parser needs to know what to expect. Also, a *lot* of code in the compiler expects to be able to turn idents into strings, and not all of that code runs after expansion.
[19:38:59] <pauls> (the surface area of changing the representation of identifiers is large. I know from personal experience)
[19:39:40] <vadimcn> I want to expand to an ident
[19:41:06] <pauls> vadimcn: what do you want to do with it?
[19:41:15] <eddyb> cmr_: do I need to update the license headers of files I touch in 2014 commits?
[19:41:16] <pauls> I mean, what do you want the expansion to do?
[19:42:17] *** flaper87 is now known as flaper87|afk
[19:42:24] <cmr_> eddyb: pretty sure you *should*. need might be a bit strong..
[19:43:38] <vadimcn> pauls: I want it to create an new IDENT by concatenating two or more IDENT tokens
[19:44:04] <vadimcn> basically, what concat_idents!() is supposed to do
[19:44:07] <pauls> vadimcn: okay. I hypothesize that that's the only thing anyone wants, and we can build it in. 
[19:44:27] <pauls> (which may have benefits for hygiene, also)
[19:44:31] *** Joins: pnkfelix (pnkfelix@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[19:45:00] <vadimcn> https://github.com/mozilla/rust/issues/4365
[19:46:16] <vadimcn> Currently concat_idents!() seems to work only for creating idents in the middle of an expression...
[19:46:38] <vadimcn> pauls: so what's the right way to go about fixing this?
[19:47:05] <pauls> vadimcn: it will take some implementation work. There's sadly no workaround. 
[19:48:33] <pauls> But I believe we want to implement an operator for concatenation of identifiers. Call it `$+$` or something.
[19:48:46] *** Quits: cmr_ (Mibbit@86DBC01E.79C29BED.C209128E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:49:48] *** Joins: gwty (gwtypc@1B96A294.CA34D4B6.F44414AF.IP)
[19:50:24] <vadimcn> pauls: why not simply make Parser::parse_ident() expect a macro invocation?   And, I guess, check that it expanded to an ident token.
[19:51:15] <kimundi> vadimcn: let x = 5 + bar!() // does bar!() expand to an ident or an expression? unknown at that point
[19:51:40] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[19:51:40] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/oHt71A
[19:51:40] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[19:55:08] <eddyb> does anyone know when the meeting will be/was?
[19:56:03] <eddyb> also, does SmallVector need to be that long? SmallVec would be nice to shorten some lines in places
[19:56:38] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[19:56:38] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/9WplSA
[19:56:38] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[19:56:39] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[19:56:39] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/SHSL2w
[19:56:39] <ghrust> 13rust/06auto 148bd5202 15Rich Lane: doc: update reference to new vector size syntax
[19:56:39] <ghrust> 13rust/06auto 143afa0b9 15bors: auto merge of #11335 : rlane/rust/fix-vector-doc, r=alexcrichton
[19:56:39] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[19:57:10] <vadimcn> kimundi: hmm, okay, so can I then make a special version of parse_ident() that gets called to parse item names?
[19:57:57] <pauls> vadimcn: also, it'd require changing the representation of idents (or adding a lot of chances for dynamic failure, and probably some other mess), which turns out to be more ugly than changing the representation of `expr`s.
[19:58:09] <kimundi> eddyb: We have a SmallVector?
[19:58:20] <pauls> I think that implementing `$+$` would be easier, in addition to being more correct. 
[19:58:21] <eddyb> kimundi: syntax::util::small_vector
[19:58:45] <kimundi> ah, the thing that hardcodes 0, 1 or N ?
[19:58:49] <eddyb> yupp
[19:59:25] <kimundi> Don't think changing the name is worth it - it will be replaced by a proper SmallVec not in libsyntax sometime in the future anyway :P
[19:59:48] <kimundi> Unless it being used a lot by usercode atm
[20:00:18] <eddyb> nah, just slightly annoying
[20:00:29] <vadimcn> pauls: but then I wouldn't be able to wrap it in another level of macro, right?    Also, I don't follow why would we need to change the representation of idents?
[20:01:12] *** Joins: geoffhill (geoffhill@moz-738DC0DB.org)
[20:02:16] <pauls> vadimcn: because then the parser would spit out a choice of either an ident or a macro invocation. And it's more of a pain to do this with idents than with exprs, which were already a choice of a bunch of things.
[20:04:22] <vadimcn> Perhaps I misunderstand how macros are expanded...  Isn't this done immediately? 
[20:04:42] <pauls> Early, but not immediately.
[20:05:00] <eddyb> I shouldn't limit just to a few things: egrep '\b(enum|struct|type)\s+[a-z]' -r src/libsyntax
[20:05:29] <pauls> There needs to be a way to represent unexpanded code.
[20:05:55] <pauls> Expansion cannot be done correctly without such a notion.
[20:06:10] <vadimcn> In there a description of this process somewhere?
[20:06:13] <pauls> Okay, I ought to rest my wrists so that I can implement `$+$` someday.
[20:07:18] <eddyb> what's the recommended way of dealing with trailing commas?
[20:07:55] <eddyb> for struct fields and enum variants - can I go ahead and remove them?
[20:31:58] *** Quits: gwty (gwtypc@1B96A294.CA34D4B6.F44414AF.IP) (Ping timeout)
[20:37:44] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Ping timeout)
[20:39:14] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[20:39:14] *** ChanServ sets mode: +ao dherman dherman
[20:41:43] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Ping timeout)
[20:42:48] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[20:42:48] *** ChanServ sets mode: +ao dherman dherman
[20:53:33] <brson> acrichto: do you know what the bot failures are?
[20:58:19] *** Quits: geoffhill (geoffhill@moz-738DC0DB.org) (Quit: )
[20:58:55] *** Joins: geoffhill (geoffhill@moz-738DC0DB.org)
[21:06:42] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[21:06:42] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/SHSL2w
[21:06:42] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[21:10:35] <sfackler> eddyb: keeping them around helps keep diffs small when you add a field
[21:11:38] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[21:11:39] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/orxEEg
[21:11:39] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[21:11:39] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[21:11:39] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/bBo5DA
[21:11:39] <ghrust> 13rust/06auto 1480d0f60 15Simon Sapin: Add .insert() and .insert_char() methods to ~str.
[21:11:39] <ghrust> 13rust/06auto 14400070a 15bors: auto merge of #10826 : SimonSapin/rust/str-insert, r=brson...
[21:11:40] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[21:14:15] <acrichto> brson: no idea, I've never been able to reproduce
[21:14:42] <acrichto> brson: the failure mode has happened before when the process segfaulted rather than finishing cleanly (hence the truncated output), but I haven't been able to get a good stack trace or a core dump yet
[21:14:50] <acrichto> we should probably turn on core dumps on linux as well...
[21:15:38] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Ping timeout)
[21:19:07] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[21:19:07] *** ChanServ sets mode: +ao dherman dherman
[21:21:21] <eddyb> sfackler: there should just be a proper policy to follow
[21:27:09] <jack> How is it possible that Rust thinks' RefMut is 128 bits?
[21:28:56] <kmc> discussion in #servo concludes it's probably the drop flag
[21:29:38] <cmr> Doesn't unsafe_destructor remove that?
[21:29:43] <cmr> Or is that unsafe_no_drop_flag
[21:30:18] <sfackler> unsafe_no_drop_flag, but you'd need to change the internals to check if the reference is null in the drop impl
[21:30:40] <acrichto> :D
[21:30:44] <eddyb> because ZeroMem
[21:30:44] <acrichto> whoops
[21:31:00] <eddyb> nmatsakis might fix that soon (or so I hope)
[21:40:03] <acrichto> brson: printing while printing, we could issue a warning, but it seems like something which we should just guard against for me
[21:40:15] <acrichto> I suppose it may be a little surprising if your handle is destroyed earlier than you thought
[21:40:30] <acrichto> also I have no idea how but make -jN is so broken right now
[21:41:08] *** flaper87|afk is now known as flaper87
[21:41:52] <brson> acrichto: not warning is fine
[21:42:04] <acrichto> I suppose we could see if it crops pu
[21:42:12] <brson> acrichto: the -jN thing seems like something we should fix for 0.9. can you look into it?
[21:42:24] <acrichto> brson: sure
[21:42:30] <cmr> yeah -jN is pretty broken
[21:42:33] *** Quits: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP) (Ping timeout)
[21:42:45] <cmr> I only noticed it in the past day or so?
[21:43:54] <acrichto> oh boy rustc is segfaulting!
[21:48:10] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Ping timeout)
[21:48:50] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[21:49:34] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[21:49:34] *** ChanServ sets mode: +ao dherman dherman
[21:50:23] <brson> acrichto: thanks
[21:50:37] <acrichto> so everything is dying at vuint_at
[21:50:46] <acrichto> I wonder if we actually needed that weird padding
[21:50:55] <acrichto> but it only fails if it's run in parallel...
[21:53:04] <sfackler> acrichto: wasn't there some weird thing where the metadata is written to the same file?
[21:53:18] <acrichto> sfackler: hmm...
[21:53:20] <sfackler> so synchronous compiles in the same directory = bad times?
[21:53:27] <cmr> wasn't that fixed?
[21:53:28] <acrichto> but this is all in stage0
[21:53:31] <cmr> I swear I looked at that PR
[21:53:35] <acrichto> hm..
[21:53:41] <cmr> it was even acrichto's :p
[21:53:53] *** Quits: dbussink (dbussink@moz-E0A5568C.bussink.me) (Ping timeout)
[21:54:00] <cmr> https://github.com/mozilla/rust/pull/11215
[21:54:24] <acrichto> that wouldn't produce a corrupt libstd metadata though
[21:54:45] <acrichto> yet I'm reliably segfaulting...
[21:54:58] <sfackler> acrichto: segfaulting or out of bounds-ing?
[21:55:05] <acrichto> segfaulting
[21:55:23] <sfackler> isn't vuint_at supposed to be reading from a slice?
[21:55:30] <sfackler> or is this some weird memory mapped thing
[21:55:31] <acrichto> yeah...
[21:55:50] <sfackler> iirc there is something sketchy going on with a &'static [u8] pointer
[21:56:11] <acrichto> huh, I do not know of that
[21:57:20] <sfackler> I'd guess it's that
[22:02:00] *** Joins: gwty (gwtypc@CB91D618.73AAEA08.49FF672.IP)
[22:03:13] *** Joins: dbussink (dbussink@moz-E0A5568C.bussink.me)
[22:03:34] <acrichto> argh it's the recent makefile changes
[22:03:40] <acrichto> at least I think
[22:03:44] <acrichto> it's copying files all over itself
[22:03:52] * acrichto should have looked at that patch more closely
[22:05:11] <acrichto> cmr: what's the new snap note thing?
[22:05:14] <brson> acrichto: that sounds pretty yucky
[22:05:27] <acrichto> ifeq ($(1),0)                                                           
[22:05:27] <acrichto>         $$(Q)cp $(3)/stage0/$(CFG_LIBDIR)/rustlib/$(2)/$(CFG_LIBDIR)/* \
[22:05:27] <acrichto>                 $(3)/stage0/$(CFG_LIBDIR)/rustc/$(2)/$(CFG_LIBDIR)/     
[22:05:27] <acrichto> endif                                                                   
[22:05:36] <acrichto> every target rule is executing that
[22:05:41] <brson> lol
[22:05:51] <cmr> acrichto: // SNAP commit
[22:05:55] <acrichto> I think they're all stomping over one another and some are getting short reads or something like that
[22:06:00] <acrichto> cmr: what's the commit?
[22:06:05] <cmr> acrichto: it will check if the current snapshot commit isn't `commit`, and error if so
[22:06:05] <acrichto> the current snap commit?
[22:06:07] <cmr> yep
[22:06:21] <acrichto> aww man I want bors to just replace that lol
[22:06:46] <acrichto> cmr:  # SNAP a5fa1d9 test 
[22:06:47] <acrichto> ?
[22:07:15] <cmr> that's valid
[22:07:20] <cmr> uh
[22:07:23] <brson> anything else critical to fix  for 0.9?
[22:07:24] <cmr> with a bang?
[22:07:27] <cmr> not sure.
[22:07:30] <cmr> *hash
[22:07:42] <acrichto> cmr: isn't that the commit?
[22:07:57] <acrichto> brson: we should do a run through and make sure the docs are all in order
[22:08:06] <acrichto> I really should write a libnative/libgreen writeup
[22:08:16] *** Quits: gwty (gwtypc@CB91D618.73AAEA08.49FF672.IP) (Ping timeout)
[22:08:21] <cmr> acrichto: well the comment syntax is //, not #
[22:08:29] <cmr> It checks for the same things // NOTE did
[22:08:35] <acrichto> cmr: oh this is in a makefile
[22:08:37] <cmr> but expects the current commit
[22:09:38] <acrichto> hurray no more segfaults
[22:10:37] <brson> acrichto: I just r+'d a big change to the doc organization that will require the website to change a bit
[22:10:50] <brson> there's going to be a generated landing page that replaces the doc wiki page
[22:10:52] <acrichto> cool, just wanna make sure that's all in order
[22:11:11] <cmr> brson: I have a change testing right now that uses libnative in the driver (src/driver/driver.rs)
[22:11:33] <brson> cmr: so all the tools will use native threading?
[22:11:36] <cmr> yup
[22:11:46] <cmr> and should hopefully unwedge rusti
[22:13:47] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[22:13:47] *** ChanServ sets mode: +o tjc
[22:16:34] <cmr> So we have a test right now that depends on libuv-specific error messages; compile-fail/issue-5806.rs
[22:16:43] <cmr> libuv has  XX(EISDIR, "illegal operation on a directory")
[22:16:46] <cmr> (uv.h)
[22:16:52] <cmr> ie, mapps EISDIR to that error message
[22:17:07] <cmr> libnative just says "couldn't read ....: unknown error"
[22:17:30] <cmr> just change the test?
[22:17:37] *** jdm is now known as jdm|busy
[22:18:12] <acrichto> cmr: wait are you changing *everything* to use libnative by default?
[22:18:22] <cmr> acrichto: no, just driver/driver.rs
[22:18:28] <cmr> ie, rustc/rustdoc/rustpkg
[22:18:33] <acrichto> cfail tests should still be run with libgreen?
[22:18:41] <cmr> no, the error comes out of rustc
[22:18:57] <brson> acrichto: re-r? https://github.com/mozilla/rust/pull/11354
[22:19:00] <cmr> cfail, not rfail :)
[22:19:00] <brson> p=1 please
[22:19:04] <acrichto> cmr: oh that's a terrible message
[22:19:10] <acrichto> cmr: that needs a mapping in src/libnative/io/mod.rs
[22:19:28] <acrichto> brson: lgtm
[22:19:28] <cmr> acrichto: I can add it to the PR. I'll use libuv's message
[22:19:44] <acrichto> cmr: yeah that's fine, it'll get the real message from the OS anyway
[22:20:23] <steveklabnik> could we maybe sneak in 'move the sub-tutorials out of the tutorials'?
[22:20:27] <cmr> acrichto: "real message"?
[22:20:29] <steveklabnik> as part of the doc changes?
[22:20:46] <acrichto> cmr: os::last_os_error()
[22:20:56] <cmr> ah for detail
[22:21:18] *** Parts: johto (rnn@moz-31EB76BD.to) ()
[22:21:37] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[22:21:37] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/bBo5DA
[22:21:37] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[22:21:57] <acrichto> brson: r? https://github.com/mozilla/rust/pull/11355
[22:24:01] <brson> steveklabnik: i could have sworn there was a pull changing the tutorials to guides
[22:24:14] <brson> steveklabnik: i'd like that to get in for 0.9
[22:24:21] <brson> and have them all listed from the doc index
[22:25:03] <brson> steveklabnik: oh, https://github.com/mozilla/rust/pull/11123 does it
[22:25:05] <steveklabnik> brson: there was: 467
[22:25:07] <steveklabnik> err
[22:25:13] <steveklabnik> https://github.com/mozilla/rust/pull/9579
[22:25:20] *** Joins: gwty (gwtypc@CB91D618.73AAEA08.49FF672.IP)
[22:25:24] <steveklabnik> was mixed upw ith my other stuff though
[22:25:33] <steveklabnik> ahhhh 11123 looks like it will too
[22:25:34] <steveklabnik> awesome
[22:25:36] <brson> It looks like 11123 just renames the files thuogh
[22:25:43] <brson> not all the text that refers to them as 'tutorials'
[22:26:22] <brson> steveklabnik: do you want to get your pointer tutorial in too?
[22:26:27] <brson> i can rebase it on top of 11123
[22:26:30] <steveklabnik> that'd be great
[22:26:39] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[22:26:40] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/gwOE5A
[22:26:40] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[22:26:40] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[22:26:40] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/CCKlgg
[22:26:40] <ghrust> 13rust/06auto 14e53b566 15Alan Andrade: First phase of migrating the wiki to the internal docs #11078
[22:26:40] <ghrust> 13rust/06auto 147de2379 15Alan Andrade: rust_version.html is a HTML_DEPS and every html has it as dependecy
[22:26:40] <ghrust> 13rust/06auto 141f1838e 15bors: auto merge of #11123 : alan-andrade/rust/move_wiki_to_internal_docs, r=brson...
[22:26:42] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[22:27:24] *** Quits: gwty (gwtypc@CB91D618.73AAEA08.49FF672.IP) (Ping timeout)
[22:31:47] *** Quits: ChristopherBurg (Christophe@moz-2C03E71B.hfc.comcastbusiness.net) (Ping timeout)
[22:31:49] <sfackler> acrichto: what's up with the segfault thing? i lost my scrollback
[22:32:20] <acrichto> sfackler: turns out the makefiles were just plastering files over one another and I guess that something just got corrupted along the way
[22:32:45] <sfackler> haha
[22:32:51] <sfackler> that'd do it
[22:43:46] *** Quits: c74d (c74d@moz-E2EAC718.oc.oc.cox.net) (Ping timeout)
[22:43:53] *** Joins: c74d (c74d@moz-E2EAC718.oc.oc.cox.net)
[22:46:09] <cmr> So now that io's not in libstd how do we feel about removing the windows support for it in std::libc and bundling https://github.com/klutzy/rust-windows instad
[22:48:02] <cmr> (long term)
[22:48:29] <acrichto> std::libc itself is a huge dumping ground that needs to be cleaned up
[22:48:58] <acrichto> I don't think that libnative is the only consumer of the apis as wlel
[22:49:49] <cmr> hm
[22:50:12] <cmr> maybe a `sys` crate for all OS-specific interaction.
[22:51:30] <brson> r? https://github.com/mozilla/rust/pull/11356 p=1
[22:53:14] <cmr> dammit github, being slow and making me look silly
[22:59:33] <brson> cmr: I can't find a commit by Matthew Auld. Does he have an alias?
[23:00:19] <cmr> brson: yes, matt-auld iirc
[23:00:34] <cmr> I translate github usernames to realnames when the realname is provided by their github profile
[23:00:41] <brson> cmr: thanks
[23:14:36] <pcwalton> new TypedArena is over 3x faster than the old arena
[23:14:49] <pcwalton> manually verified that the assembler is close to optimal in the fast path
[23:15:43] <aatch> pcwalton, oo nice, assume this is just a memory arena that only provides 1 type of object?
[23:15:47] <pcwalton> aatch: yup
[23:15:51] <pcwalton> I'd like to use it in the compiler for Blocks
[23:16:19] <aatch> pcwalton, also, AST stuff could benefit.
[23:16:20] <pcwalton> ins per allocation for me
[23:16:23] <pcwalton> 4 ns
[23:16:24] <pcwalton> that should be
[23:16:38] <aatch> imaginary time!
[23:16:38] <pcwalton> aatch: eh, maybe. I'm not sure. macro expansion creates a lot of junk in the AST
[23:16:41] <pcwalton> that should be freed
[23:16:59] <pcwalton> I'm building on Linux to test against malloc because strcat told me the old arena was slower than Linux malloc
[23:17:05] <pcwalton> the old arena is a lot faster than Mac malloc
[23:17:32] <pcwalton> 4 ns/allocation for new arena, 13 ns/allocation for old arena, 54 ns/allocation for malloc
[23:17:34] <pcwalton> on Mac
[23:20:19] <dbaupp> r? https://github.com/mozilla/rust/pull/11342
[23:20:21] *** Quits: sms (Mibbit@moz-A3C5D209.hsd1.ga.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:20:35] <dbaupp> acrichto: ^ (doing the same thing to std::trie as I did to extra::treemap)
[23:21:09] <acrichto> dbaupp: cool, I'll look at that soon
[23:21:29] * dbaupp <3 macros
[23:23:50] *** jdm|busy is now known as jdm
[23:24:45] *** Joins: ChristopherBurg (Christophe@moz-2C03E71B.hfc.comcastbusiness.net)
[23:28:06] *** Joins: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net)
[23:28:28] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:28:32] <acrichto> brson: btw did you have thoughts on a Chan => SharedChan upgrade?
[23:31:04] <brson> acrichto: some. i think we can make Chan upgrade itself to SharedChan on clone with minimal penalty to the receiver
[23:31:21] <acrichto> brson: I think we can do it with just an extra branch on both halves
[23:31:26] <brson> i still don't *know* if it's the way to go. we usually don't try to hide these kinds of things in rust
[23:31:27] <acrichto> "which mode am I in"
[23:31:53] <acrichto> the thing that convinced me is that comm_adapters is written for Chan and I wanted it for SharedChan
[23:32:04] <acrichto> I don't think you should be limited based on your decision
[23:32:17] <acrichto> we've already done it a bit with I/O
[23:36:45] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[23:36:45] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/CCKlgg
[23:36:45] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[23:41:41] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[23:41:41] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/q2ep6w
[23:41:41] <ghrust> 13rust/06auto 142297b08 15Brian Anderson: Use the full version string for the windows installer exe
[23:41:41] <ghrust> 13rust/06auto 1421f9fa4 15Brian Anderson: Delete the installer exe when cleaning
[23:41:42] <ghrust> 13rust/06auto 14d20bcc4 15bors: auto merge of #11354 : brson/rust/versionwin, r=alexcrichton...
[23:41:44] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[23:44:47] *** flaper87 is now known as flaper87|afk
[23:49:05] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Quit: dherman)
[23:58:11] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[23:58:40] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[23:58:40] *** ChanServ sets mode: +ao pcwalton pcwalton
