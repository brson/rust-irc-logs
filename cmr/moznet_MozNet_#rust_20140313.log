[00:00:01] <tcsc> so fail! in rust still does unwinding?
[00:00:01] <nstdloop> genis
[00:00:03] <nstdloop> genius*
[00:00:04] <kimundi> nstdloop: [1u64, 2, 3, 4] will cause the remaining ones to infer correctly
[00:00:10] <strcat> tcsc: yes
[00:00:18] <aatch> You often don't need any, depending on the situation.
[00:00:32] <strcat> tcsc: rust essentially has exceptions, you're just only allowed to catch them at a task boundary
[00:00:33] <kimundi> nstdloop: [1_u64, 2, 3, 4] if you like the readability
[00:00:42] <strcat> tcsc: although, it's a stdlib feature, not a language feature
[00:00:43] <arielb1> you need to free owned pointers on the stack
[00:00:45] <mcpherrin> nstdloop: or some other way for the type to be inferred
[00:00:51] <arielb1> so you need unwinding
[00:00:53] <mcpherrin> eg, where you use it or store it
[00:00:58] <strcat> arielb1: you don't need unwinding
[00:01:02] <strcat> you can use rust without unwinding
[00:01:08] <tcsc> strcat: that sounds like something that really should be a language feature.
[00:01:17] <aatch> tcsc, why?
[00:01:17] <tcsc> maybe one you can turn off
[00:01:19] <strcat> tcsc: I don't think it should be
[00:01:34] <aatch> It works perfectly well implemented in the standard library
[00:01:59] <arielb1> strcat: unless you want to survive memory alloc failure
[00:02:07] <strcat> arielb1: rust can't survive memory alloc failure
[00:02:20] <arielb1> althrough with overcommit that won't work anyway
[00:02:21] <arielb1> ...
[00:02:29] <strcat> it aborts on OOM, it can't handle it sanely
[00:02:39] <tcsc> memories of setjmp and longjmp are probably biasing me
[00:02:44] <strcat> nothing stops you from allocating in destructors and lots do
[00:02:46] <tcsc> (being library features)
[00:02:58] <tcsc> do any oses still do overcommit?
[00:03:00] <strcat> tcsc: libunwind is library too, and implements C++ exceptions for gcc
[00:03:07] <arielb1> linux overcommits
[00:03:08] <strcat> tcsc: freebsd, linux, etc. all do overcommit
[00:03:09] <arielb1> without swap
[00:03:30] <strcat> tcsc: not doing overcommit isn't really saner, and reduces the ability to scale + reduces perf
[00:03:50] <aatch> tcsc, since you can only catch at task boundaries, unwinding is just unwinding the entire stack for that task
[00:03:50] <arielb1> of course if you hit swap your program diverges for all practical purposes
[00:04:03] <tcsc> dang. i lost an argument about that last week because i believed that no modern oses still use overcommit.
[00:04:15] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[00:04:19] <arielb1> linux's swap handling is very crappy
[00:04:21] <strcat> tcsc: if 1 application uses up 4GiB and the critical application asks for 8 bytes and needs to exit, that's not much of an improvement over the kernel killing the application using the most memory multipled by a configurable oom_score
[00:04:26] <strcat> arielb1: how so?
[00:04:30] <AlexMax> I've got a spectator's question, as I'm not really well versed in Rust at all.  But I was reading some commentary someplace that noted that some sort of shared mutable state is unavoidable in some types of applications, and pointed to Java's ConcurrentHashMap, ConcurrentSkipListMap and ConcurrentLinkedQueue as examples of concurrent data structures that allow multiple concurrent writers.  Are such
[00:04:32] <AlexMax> constructs possible with Rust?
[00:04:50] <aatch> AlexMax, they are possible to build, yes.
[00:04:53] <tcsc> strcat: yeah that makes sense.
[00:04:55] <arielb1> the moment a process uses more then physical memory the machine totally hangs
[00:04:59] <arielb1> even windows can survive that
[00:05:00] <strcat> arielb1: not for me
[00:05:09] <strcat> [citation needed]
[00:05:09] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:05:16] <strcat> and overcommit is optional
[00:05:23] <strcat> although there's not really a good reason to turn it off
[00:05:27] *** flaper87 is now known as flaper87|afk
[00:05:34] <tiffany> alexmax: rust has mutable shared memory, but it can only be used through unsafe {} blocks, and in most cases it's a performance improvement rather than making something possible
[00:05:37] <strcat> it will just make stuff start failing earlier if it's off
[00:05:39] <mcpherrin> strcat: Dunno, my experience is that on a machine with 20 gigs of swap and 128 gigs of ram, as soon as swap got hit everything became useless
[00:05:48] <mcpherrin> Better to not have any swap at all.
[00:05:56] <strcat> mcpherrin: it continues fine for me
[00:05:58] <mcpherrin> At least stuff crashes fast that way
[00:06:00] <aatch> AlexMax, Not with safe code, but you can make a safe API over a concurrent implementation.
[00:06:01] <tiffany> shared memory is pretty much a syntax sugar over message passing, to some degree
[00:06:16] <mcpherrin> strcat: Depends on how you're trashing
[00:06:19] <mcpherrin> thrashing*
[00:06:50] <strcat> mcpherrin: sure, but on an SSD it's not really enormously slow anyway - you can do 100k I/O ops/s, not 100
[00:06:59] <arielb1> that requires an SSD
[00:07:10] <mcpherrin> strcat: ah yeah these servers have old slow disks meant for basically booting from
[00:07:13] <strcat> either way, I haven't experienced it being any worse than windows
[00:07:16] <strcat> I don't buy it
[00:07:20] * mcpherrin doesn't know anything about windows
[00:07:21] <Earnestly> ^ Same, on HDD
[00:07:32] <Earnestly> And a relatively slow fs as well
[00:07:36] <arielb1> on windows you can generally start task manager after twenty-ish seconds
[00:07:54] <aatch> We have Arc, MutexArc and RWArc, which are all designed for sharing data.
[00:08:11] <strcat> arielb1: I run out of memory all the time thanks to compiling too many things at the same time, and it isn't that bad
[00:08:21] <strcat> perhaps you're using a broken distro, I dunno
[00:08:26] <arielb1> Do you swap to SSD?
[00:08:30] <mcpherrin> overcommit is great.  Means I can malloc my whole goddamn address space and never have a null pointer again
[00:08:38] <strcat> arielb1: now, I didn't before
[00:08:41] <strcat> and it wasn't awful then either
[00:08:55] <strcat> mcpherrin: well that's not the default on linux
[00:09:00] <strcat> mcpherrin: the default is sort-of-overcommit
[00:09:01] <aatch> I had to tweak my overcommit settings to stop my system from locking up, but otherwise I've not had any issues
[00:09:05] <mcpherrin> strcat: yes :-)
[00:09:34] <mcpherrin> Actually I've been having a lot of disk i/o problems lately in linux
[00:09:42] <mcpherrin> latency can go way up sometimes
[00:09:48] <strcat> mcpherrin: not using CFQ
[00:09:51] <strcat> stop using*
[00:10:04] <strcat> CFQ doesn't care one bit about interactive use
[00:10:08] <Earnestly> Linux is usually tuned towards throughput rather than latency by default iirc
[00:10:09] *** Quits: alonlevy (alon@moz-944C9098.red.bezeqint.net) (Client exited)
[00:10:18] <strcat> mcpherrin: use BFQ and you won
[00:10:21] <strcat> won't have I/O stalls*
[00:10:28] <arielb1> CFQ is what causes the computer to hang
[00:10:32] <arielb1> when you do a big copy
[00:10:33] <arielb1> ?
[00:10:37] <strcat> yes
[00:10:42] <arielb1> like its on a NFS and the server hanged
[00:10:49] <strcat> it doesn't really hang, it just tries to optimize throughput
[00:10:54] <Earnestly> ^
[00:11:03] <strcat> and fails at optimizing throughput because it cares too much about fairness
[00:11:10] <mcpherrin> strcat: is that in mainline?
[00:11:17] <strcat> mcpherrin: no, but deadline is in mainline
[00:11:21] <strcat> mcpherrin: and it won't stall either
[00:11:24] <strcat> but BFQ is better
[00:11:26] <Earnestly> You can sort of help aleviate some of those issues by lowering the dirty_bytes/background
[00:11:37] <strcat> mcpherrin: deadline doesn't work very well on an HDD afaik
[00:11:38] *** kimundi is now known as zz_kimundi
[00:12:12] <strcat> mcpherrin: anyway the default is very bad for desktops
[00:12:27] <strcat> a pre-configured desktop distro defaulting to CFQ is a dumb distro ;p
[00:12:40] <arielb1> I'm using debian
[00:12:56] <mcpherrin> strcat: The problem is I have gobs and gobs of ram, and sometimes lots of stuff flushes with an fsync or something so subsequent writes get really slow
[00:13:09] <strcat> arielb1: well, debian is an everything distro
[00:13:10] <mcpherrin> strcat: I dunno, looks like deadline might be nasty
[00:13:17] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[00:13:17] <strcat> arielb1: CFQ makes a lot of sense on a multi-user server
[00:13:25] <strcat> mcpherrin: well, try it
[00:13:25] * mcpherrin using in-house distro, lul
[00:13:28] <strcat> mcpherrin: BFQ is *great* though
[00:14:01] <arielb1> but you need to compile your own kernel
[00:14:13] <strcat> or use deadline
[00:14:15] <arielb1> can you do it with debian without the distro screwing it up anyway?
[00:14:24] *** Joins: rileyw (rileyw@8BA43816.9AA11D69.65DDFA89.IP)
[00:14:29] <strcat> yes
[00:14:31] *** Quits: rileyw (rileyw@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[00:14:37] <strcat> you can set a per drive I/O scheduler dynamically
[00:14:41] <tiffany> how do I check if I have bfq?
[00:14:49] <strcat> tiffany: you likely don't ;p
[00:14:51] *** Joins: rileyw (rileyw@8BA43816.9AA11D69.65DDFA89.IP)
[00:14:51] <mcpherrin> hmm if I can do it per drive it'll be okay
[00:14:54] <strcat> you can use deadline though
[00:15:01] <mcpherrin> since autobuilds use a different disk than users
[00:15:11] <strcat> mcpherrin: /sys/block/foo/queue/scheduler
[00:15:30] <Earnestly> strcat: deadline/noop is apparently quite good for SSDs along with disabling NCQ
[00:15:32] <tiffany> I think I'm using bfs at least, I'm running linux-ck on arch
[00:15:32] <strcat> mcpherrin: just try flipping on deadline and see how much saner it is ;p, if it's an SSD at least
[00:15:46] <strcat> tiffany: well, that /sys file ^
[00:15:55] <mcpherrin> strcat: I'll wait til after the work day is over so I'm not fucking with too many other users :)
[00:16:01] <arielb1> I have a script that puts firefox in /tmp and syncs the profile
[00:16:04] <tiffany> oh it's on cfq
[00:16:06] <mcpherrin> since there's a dozen other people using this machine
[00:16:10] <strcat> mcpherrin: meh, it's production ready ;P
[00:16:11] <tiffany> but bfq is available
[00:16:12] <arielb1> makes it survive both cfq brokenness and flaky nfs
[00:16:14] <tiffany> how do I change it?
[00:16:20] <strcat> bfq may get upstream soon
[00:16:22] *** Quits: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP) (Quit: WeeChat 0.4.4-dev)
[00:16:31] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:16:31] <strcat> they didn't care before
[00:16:34] <strcat> too much trouble
[00:16:52] * strcat uses deadline on an SSD so... no problems
[00:16:55] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[00:17:00] *** Joins: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP)
[00:17:07] <strcat> even noop is better than CFQ for me
[00:17:12] <mcpherrin> Hopefully if bfq gets upstreamed I can use it in 3 years :p
[00:17:19] <Earnestly> strcat: Erm, I mean noop is better on SSDs if you don't expect to get IO contention
[00:17:31] <Earnestly> Which for most people, even if you do lots of compiling, is unlikely
[00:17:41] *** Quits: victorporof_ (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Ping timeout)
[00:17:51] <arielb1> Do you have IO slowness with SSDs
[00:17:53] *** jorendorff is now known as jorendorff_away
[00:18:01] <arielb1> even with CFQ?
[00:18:06] <strcat> arielb1: yes, it's crap
[00:18:08] * strcat shrugs
[00:18:08] <Earnestly> Yeah
[00:18:11] <nstdloop> In case anyone wants to help out: In pursuit of a larger body of not-too-crazy rust code for relative beginners, I figured it would be nice to provide project euler solutions in rust. If anyone wants to contribute, I'd welcome any prs. https://github.com/reem/rust-euler
[00:18:12] <strcat> crap for interactive use*
[00:18:20] <pongad> A newbie question: What should I do if I'm interested in #11926 (marked Easy) but have no idea how to do it? :D
[00:18:25] <mcpherrin> I should just stop using build servers interactively :p
[00:18:39] <mcpherrin> pongad: a lot of the "Easy" bugs are "easy for somebody who knows what's going on"
[00:18:47] <strcat> mcpherrin: ionice everything ;p
[00:18:49] <mcpherrin> pongad: So step 1 is find somebody who knows what's going on :)
[00:18:50] <pongad> nstdloop: That sounds awesome!
[00:19:10] <arielb1> making an SSD slow is more than just crap
[00:19:15] <nstdloop> pongad: Thanks :D
[00:19:15] <strcat> mcpherrin: CFQ is really unusable without ionice on everything
[00:19:21] <Earnestly> you can try disabling NCQ for SSDs as most don't full support it, when they get a unsupported command, it just resets the link/controllers
[00:19:27] <Earnestly> fully*
[00:19:37] <strcat> mcpherrin: want to copy a 2GiB file on a desktop? better use ionice. or switch I/O schedulers ;p
[00:19:40] <mcpherrin> strcat: I should check if our builder scripts ionice things down .. I think they're suppoed to :P
[00:19:47] <pongad> mcpherrin: The issue was created by thestinger, should I just try to find him?
[00:20:00] <Earnestly> strcat: You can also lower the dirty_bytes background_bytes to reduce that issue
[00:20:00] <mcpherrin> pongad: strcat is thestinger so you've already succeeded
[00:20:11] <strcat> Earnestly: meh, I shouldn't have to reduce caching
[00:20:12] <pongad> Oh whoops, did not know
[00:20:18] *** Joins: victorporof_ (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[00:20:20] <strcat> I'll just use a working block scheduler
[00:20:28] <Earnestly> strcat: It'll help latency, and some raid controllers benefit from it
[00:20:30] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[00:20:44] <strcat> Earnestly: I don't care about the latency of something getting to the disk
[00:20:58] <strcat> I care about responsiveness
[00:21:02] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Ping timeout)
[00:21:07] <pongad> strcat: I was looking at #11926 earlier today but have no idea how to do it, can you point me in the right direction? :D
[00:21:21] <Earnestly> Right, you'd probably also have to fiddle with the vfs cache pressure and other knobs :/
[00:21:23] <strcat> mcpherrin: oh and schedtool them to SCHED_BATCH ;)
[00:21:28] <strcat> mcpherrin: or chrt
[00:21:43] <strcat> mcpherrin: longer time slices (more throughput) but it cares less about latency
[00:21:51] <Earnestly> Because Linux isn't, afaik, tuned for responsiveness (latency) by default
[00:22:07] <Earnestly> Somewhere leaning towards throughput, to my understanding
[00:22:09] <arielb1> linux scheduler is actually fine
[00:22:26] <arielb1> better then windows'
[00:22:29] <Earnestly> CFQ is just that, Completely Fair.  But sometimes you don't want fairness as a desktop user.
[00:22:43] <nstdloop> Is there an equivalent of typedef in rust?
[00:22:43] <strcat> the CPU scheduler defaults lean pretty far from what's usable for gaming
[00:22:48] <strcat> nstdloop: type
[00:22:51] <strcat> type x = y;
[00:22:54] <Earnestly> My youtube cat videos are way more important than some disk transfer
[00:23:01] <nstdloop> strcat: thakns
[00:23:16] *** Quits: adu (ajr@moz-3611E9A9.washdc.fios.verizon.net) (Quit: adu)
[00:23:16] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Ping timeout)
[00:23:21] <Earnestly> strcat: Do you use a custom kernel btw with ck patches, or the ck repo?
[00:23:25] <arielb1> what's the problem with gaming?
[00:23:29] <strcat> Earnestly: vanilla kernel
[00:23:34] <strcat> I use deadline. I've just tried BFQ
[00:23:35] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[00:23:39] <Earnestly> Ah right
[00:23:46] <mcpherrin> strcat: I'd also accept a `vim` that doesn't block on disk i/o, that'd fix half my problems too
[00:23:49] <strcat> I can't notice a latency difference between deadline and BFQ so why bother using it ;p
[00:23:52] <strcat> even if it's better
[00:23:59] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[00:24:02] <strcat> mcpherrin: neovim may get there ;p
[00:24:04] <arielb1> can you make emacs not sync when it autosaves
[00:24:08] <Earnestly> strcat: Do you really get a lot of proccesses bound to IO?
[00:24:11] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[00:24:12] <strcat> Earnestly: yes
[00:24:21] <mcpherrin> strcat: I gotta implement my own editor in Rust with rust plugins
[00:24:22] <Earnestly> Ah, then deadline is probably better
[00:24:29] <mcpherrin> strcat: then I can stop hating everyone and everything
[00:24:34] <strcat> mcpherrin: oh and ext3 is really, really, really bad
[00:24:44] *** Joins: paulolieuthier (quassel@moz-12685D14.dynamic.adsl.gvt.net.br)
[00:24:45] <strcat> but I guess no one uses ext3 anymore
[00:24:50] <mcpherrin> we're using ext4 at work
[00:24:56] <strcat> fsync on ext3 makes everything sync to disk, not just the file you fsync
[00:25:04] <strcat> and it has to sync in *order* 
[00:25:09] <tcsc> is there a guide which talks about the recommended file structure of a rust, uh, project?
[00:25:12] <nstdloop> what is the correct prime factorization of 0...?
[00:25:22] <arielb1> is write-rename fixed in ext4?
[00:25:27] <mcpherrin> strcat: haha, I remember when ext4 came out and people freaked out fsync was "broken"
[00:25:33] <tcsc> and are makefiles the preferred method of building?
[00:25:33] <strcat> arielb1: 'fixed'?
[00:25:43] <strcat> arielb1: it's atomic, it doesn't force an fsync
[00:25:48] <Earnestly> strcat: Try disabling NCQ (libata.force=noncq) some time and see
[00:25:56] <strcat> arielb1: they have a heuristic to detect broken applications
[00:26:03] * Earnestly wonders what noop + NCQ on an HDD would be like…
[00:26:10] <arielb1> broken applications?
[00:26:11] <strcat> but it's the applications that are broken, not ext4
[00:26:15] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[00:26:19] <strcat> arielb1: applications not calling fsync
[00:26:34] <strcat> but assuming the file is atomically saved
[00:26:35] <mcpherrin> Earnestly: well buffers are still small on the disk, ncq doesn't get you *that* much right?
[00:26:36] <arielb1> well if emacs fsynced when renaming autosaves
[00:26:41] <arielb1> that would be janky
[00:26:57] <strcat> arielb1: well for example, gnome/kde have a lot of broken bits
[00:27:07] <strcat> they have cfg, they write cfg.new, they rename over it
[00:27:10] <Earnestly> mcpherrin: Most SSDs don't fully implement ncq so when it gets a command it doesn't know, it resets the link/controller
[00:27:10] <strcat> but they don't call fsync
[00:27:22] <strcat> imo they shouldn't have implemented the heuristic
[00:27:30] <Earnestly> mcpherrin: That might be old information though
[00:27:33] <strcat> it fixes a lot of broken applications but it does a lot of unnecessary work
[00:27:43] <arielb1> well what should you do  when autosaving?
[00:27:44] <mcpherrin> I really need to get an fpga implementation of a sata device
[00:27:54] <mcpherrin> I want to fuzz the linux sata drivers.
[00:27:56] <strcat> arielb1: if you want it to be atomic?
[00:27:59] <arielb1> put the fsync in another thread
[00:28:00] <arielb1> ?
[00:28:01] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[00:28:01] <mcpherrin> Also, implement IP-over-SCSCI
[00:28:02] <strcat> arielb1: no
[00:28:14] <strcat> arielb1: don't do I/O in the UI thread with blocking calls.
[00:28:18] <arielb1> I want integrity of autosaves
[00:28:23] <strcat> arielb1: sure
[00:28:28] <strcat> write foo.new, fsync, rename over foo
[00:28:33] <strcat> but don't do I/O in the UI thread
[00:28:38] *** Quits: lawrence (lawrence@moz-18D3CB96.wireless.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:28:42] <strcat> fsync or not
[00:29:00] <Earnestly> mcpherrin: You can get stuff like this: "ata3.00: failed command: WRITE FPDMA QUEUED"
[00:29:12] <strcat> a network file system can block *forever*
[00:29:19] <strcat> I/O in the UI thread is broken
[00:29:32] <strcat> and an I/O error can make you block forever
[00:29:34] *** Joins: adu (ajr@moz-3611E9A9.washdc.fios.verizon.net)
[00:29:35] <strcat> the application shouldn't lock
[00:29:37] <strcat> ;s
[00:29:40] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[00:29:51] <arielb1> fork off a process and do reads over a pipe
[00:29:54] <arielb1> ?
[00:29:57] <strcat> arielb1: no
[00:30:25] <strcat> just don't do I/O in the UI thread, use other threads
[00:30:44] * strcat shrugs
[00:30:49] <strcat> I don't think it's very complicated
[00:31:04] <strcat> vim's codebase is just from the stone ages
[00:31:11] *** Quits: pongad (pongad@moz-7E8AAD2E.res.gatech.edu) (Quit: Leaving)
[00:31:13] <mcpherrin> also vimscript :(
[00:31:25] <mcpherrin> why do vimscript and emacslisp both have to be weird
[00:31:25] <strcat> mcpherrin: https://github.com/neovim/neovim
[00:31:35] *** Havvy is now known as Havvy|zzz
[00:31:36] <tcsc> in general doing io from the ui thread isn't good but it's fine for small stuff.
[00:31:36] * strcat shrugs
[00:31:40] <janua> Why do recursive structures need an owned pointer?
[00:31:41] *** Joins: pongad (pongad@moz-7E8AAD2E.res.gatech.edu)
[00:31:56] <mcpherrin> strcat: I don't want to refactor, I want to use Rust ;)
[00:31:57] <arielb1> but if you have threads (in C) you have locks
[00:32:03] <strcat> mcpherrin: sure ;)
[00:32:06] <Earnestly> strcat: My concern is that neovim's json msgpack stuff is going to end up like FTP, 1kb of data to send, 1mb of data to talk about the data to send.
[00:32:06] <arielb1> which are annoying
[00:32:09] <nstdloop> janua: The structure would be of infinite size otherwise, since it would have to be at least as big as itself + something else
[00:32:13] <janua> Is it because it will recursively make memory
[00:32:15] <mcpherrin> strcat: Item five hundred on my list of things I'd like to do ;)
[00:32:19] <strcat> tcsc: well, when your text editor does it, it's not fun
[00:32:20] <tcsc> arielb1: why are locks annoying?
[00:32:20] *** Quits: arielb1 (eran@moz-9CB2889B.red.bezeqint.net) (Quit: ircII EPIC5-1.1.2 -- Are we there yet?)
[00:32:24] <strcat> tcsc: and most text editors do ;s
[00:32:26] <janua> nstdloop: I see
[00:32:38] <nstdloop> janua: Using a pointer reduces the recursive size to just the size of a pointer
[00:32:44] <nstdloop> so each struct has a definite, finite size
[00:32:45] <strcat> mcpherrin: well go make a rust text editor ;p
[00:32:56] <janua> nstdloop: Can it be anything other than owned? ~
[00:33:05] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[00:33:09] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[00:33:26] <nstdloop> janua: I hazard a guess that it could, but I am a beginner as well, and probably not the right person to ask. I see no reason why it couldn't be managed though.
[00:33:34] <Earnestly> strcat: You know, since my hdd has NCQ, I may try noop for awhile
[00:33:45] <nstdloop> managed = @
[00:33:50] <Earnestly> (Because yes, CFQ is eugh)
[00:34:03] <tcsc> could you use a borrowed pointer?
[00:34:03] <janua> nstdloop: I wonder! I am exploring aswell as a beginner! thanks
[00:34:37] <nstdloop> What's the best way to sort a list?
[00:34:38] <mcpherrin> strcat: gotta write a super riced out compile-time regex library first.  Need them syntaxes hilighted
[00:34:39] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[00:34:40] <tcsc> i'm legitamitely asking. i'm a beginner too but using gc for something like this leaves a bad taste in my mouth
[00:34:42] <strcat> nstdloop: sort method
[00:34:58] <janua> When I try to use a borrowed pointer, it says missing lifetime specifier
[00:35:07] <strcat> mcpherrin: you could have a riced out runtime regexp library too... use LLVM's MCJIT
[00:35:09] <nstdloop> strcat: Is that a stable sort?
[00:35:15] <strcat> nstdloop: yes
[00:35:15] <nstdloop> strcat: /what sort it is
[00:35:18] <strcat> merge sort
[00:35:18] <nstdloop> is it*
[00:35:24] <strcat> with insertion sort for small runs
[00:35:33] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[00:35:33] <nstdloop> strcat: Has anyone tried to implement a faster sort?
[00:35:35] <mcpherrin> strcat: one problem at a time
[00:35:35] <strcat> it's not a great merge sort implementation yet but it'll get there
[00:35:44] <strcat> nstdloop: what's faster than a good merge sort? ;p
[00:35:44] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[00:35:56] <mcpherrin> strcat: radix sort is where it's at
[00:36:00] <strcat> merge sort beats the pants off tim sort unless you have a really expensive comparison function
[00:36:02] <strcat> mcpherrin: true
[00:36:04] <strcat> comparison sort*
[00:36:24] <mcpherrin> There's a paper somebody linked me about using SIMD to sort
[00:36:28] <mcpherrin> pretty riced out stuff
[00:36:34] <nstdloop> strcat: Very true. That's why they use it in Python, because comparisons in Python are relatively expensive because of all the typechecks and coercing.
[00:36:39] <strcat> (python and java usually have really expensive comparison functions, that's why tim sort works well for them)
[00:36:43] *** Quits: ChrisOei (ChrisOei@moz-53A9266A.blurb.com) (Ping timeout)
[00:36:47] <nstdloop> hahah there we go
[00:37:06] <tcsc> i dont think you could use simd to sort if the comparator is specified at runtime
[00:37:10] <strcat> a smart merge sorts allocates n/2 rather than n for the extra space
[00:37:27] <mcpherrin> http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&cad=rja&uact=8&ved=0CEEQFjAC&url=http%3A%2F%2Fwww.cse.uconn.edu%2F~zshi%2Fcourse%2Fcse5302%2Fref%2Fchhugani08sorting.pdf&ei=tP0gU83BKYHwoAT5wIKADA&usg=AFQjCNFP1Lv1h9rLs4CYbdIgJkrOCi_jcA&sig2=h3Knd8I08HyMMDjV4jMNNQ&bvm=bv.62922401,d.cGU
[00:37:31] <mcpherrin> oops.
[00:37:33] <strcat> + insertion sort on the small bits (lets say less anything fitting in a few cache lines)
[00:37:33] <mcpherrin> http://www.cse.uconn.edu/~zshi/course/cse5302/ref/chhugani08sorting.pdf
[00:37:53] <strcat> but meh
[00:37:56] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[00:37:58] <strcat> if you want truly glorious
[00:38:06] <strcat> sorts on fixed-size arrays can be so fast ;p
[00:38:33] <strcat> http://pages.ripco.net/~jgamble/nw.html
[00:38:37] <mcpherrin> strcat: don't use insertion sort, use fixed size sorts
[00:38:46] <strcat> yes
[00:38:50] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[00:39:23] <mcpherrin> Somebody *cough* should write sort2,sort3..sort32 in rust stdlib
[00:39:31] <mcpherrin> dunno if you need all the way to 32.
[00:39:33] <strcat> mcpherrin: write? just generate them with this thing ;)
[00:39:42] <tcsc> oh, that would work
[00:39:56] <strcat> mcpherrin: we could make a syntax ext to generate them based on an algorithm
[00:39:58] <mcpherrin> strcat: oh, that generates optimal sorts? I haven't looked yet
[00:40:08] <strcat> mcpherrin: well, it has some algorithms + they have hand-tested ones
[00:40:12] <mcpherrin> strcat: cool.
[00:40:19] <nstdloop> That sounds smart.
[00:40:22] <strcat> or hand-optimized at least, to take advantage of pipelining
[00:40:33] *** Quits: icebattle (wayne@8A14A542.EBE2EE2B.C7CEC4ED.IP) (Quit: leaving)
[00:40:33] <mcpherrin> Augh so now number five hundred one on my todo list is rice out sorting
[00:40:45] <mcpherrin> if only I didn't need to sleep.
[00:40:58] <nstdloop> I'd do it if someone points me to where I need to go.
[00:41:05] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[00:41:11] <nstdloop> (i.e. what needs to be changed)
[00:41:20] *** Quits: q66_ (q66@moz-FB60E320.range86-186.btcentralplus.com) (Ping timeout)
[00:41:30] <mcpherrin> well the chhugani paper I linked is one neat place to start
[00:41:51] <mcpherrin> I dunno what rust's simd status is, there was a simd.rs in tree at some point
[00:42:10] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[00:42:13] <strcat> rusti: #[simd] struct Foo(f32, f32); Foo(2.5, 5.2) * Foo(4.4, 2.2)
[00:42:20] -rusti- pastebinned 8 lines of output: http://sprunge.us/ZhfV
[00:42:42] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[00:42:45] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[00:42:48] <strcat> rusti: #[simd] struct Foo(f32, f32); Foo(2.5, 5.2) * Foo(4.4, 2.2)
[00:42:49] -rusti- main::Foo(11f32, 11.44f32)
[00:42:53] <strcat> mcpherrin: it's pretty basic
[00:42:58] <strcat> don't think it has shuffles or anything
[00:43:04] <tcsc> no intrinsic functions?
[00:43:07] <tcsc> :(
[00:43:07] <strcat> and it probably makes really bad code in most cases
[00:43:09] <mcpherrin> yeah you need shuffles to sort :)
[00:43:09] <nstdloop> We can start with the sorting networks instead of insertions
[00:43:14] <strcat> tcsc: you can call the LLVM intrinsics
[00:43:17] <strcat> tcsc: via a hack
[00:43:17] *** Quits: IanCormac84 (User@E1064C54.2A8D8854.67DFF8B4.IP) (Ping timeout)
[00:43:45] *** Joins: IanCormac84 (User@9A425872.2A8D8854.67DFF8B4.IP)
[00:43:48] *** Joins: lawrence (lawrence@moz-18D3CB96.wireless.utoronto.ca)
[00:43:50] <tcsc> strcat: are those named reasonably similar to the c intrinsics?
[00:43:52] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[00:44:27] <nstdloop> rusti: #[simd] struct Foo(f32, f32); Foo(2.0, 3.0) * Foo(5.0, 7.0)
[00:44:28] -rusti- main::Foo(10f32, 21f32)
[00:44:38] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[00:44:44] <strcat> tcsc: https://llvm.org/viewvc/llvm-project/llvm/trunk/include/llvm/IntrinsicsX86.td?revision=143331&view=markup&pathrev=143331
[00:44:56] <tcsc> yep
[00:45:00] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[00:45:46] <strcat> rusti: #[link_name = "llvm.x86.int"] fn interrupt(x: u8); interrupt(2)
[00:45:46] -rusti- <anon>:11:58: 11:59 error: expected `{` but found `;`
[00:45:46] -rusti- <anon>:11         #[link_name = "llvm.x86.int"] fn interrupt(x: u8); interrupt(2)
[00:45:46] -rusti-                                                                    ^
[00:45:46] -rusti- application terminated with error code 101
[00:45:58] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Connection reset by peer)
[00:46:06] <strcat> rusti: extern { #[link_name = "llvm.x86.int"] fn interrupt(x: u8); } unsafe { interrupt(2) }
[00:46:06] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[00:46:07] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:46:24] <strcat> that was probably a bad choice since it's hard to tell if it worked
[00:46:41] <tcsc> i think it did :)
[00:46:58] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Connection timed out)
[00:47:43] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[00:47:50] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:47:57] <strcat> tcsc: we should really expose them all but we don't yet
[00:48:09] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[00:48:22] <strcat> we just have the portable intrinsics mostly exposed
[00:49:06] *** Quits: IanCormac84 (User@9A425872.2A8D8854.67DFF8B4.IP) (Ping timeout)
[00:49:11] <strcat> (one or two questionably useful ones missing)
[00:50:01] <tcsc> what argument types would the simd ones take though?
[00:50:08] <tcsc> what's the rust equivalent of __m128?
[00:50:11] *** Joins: IanCormac84 (User@DD56B2E7.2A8D8854.67DFF8B4.IP)
[00:50:13] <strcat> tcsc: our #[simd] types should work
[00:50:15] <tcsc> #[simd] struct?
[00:50:20] <tcsc> i see
[00:50:27] <strcat> rusti: #[simd] struct Foo(f32, f32, f32, f32);
[00:50:28] -rusti- <anon>:11:17: 11:48 warning: code is never used: `Foo`, #[warn(dead_code)] on by default
[00:50:28] -rusti- <anon>:11         #[simd] struct Foo(f32, f32, f32, f32);
[00:50:28] -rusti-                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[00:50:28] -rusti- ()
[00:50:41] <strcat> tcsc: we may not do it all properly yet
[00:50:42] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[00:50:45] <strcat> highly basic/experimental atm ;p
[00:51:01] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[00:51:01] *** Quits: victorporof_ (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Ping timeout)
[00:51:11] <strcat> tcsc: in many cases it's far easier to just write code for the auto-vectorizer anyway
[00:51:31] <nstdloop> Think it would be fair to email chhugani for their implementation from this paper
[00:51:33] <strcat> imo we'll get more bang for buck from implementing good type-based alias analysis, etc.
[00:51:33] <tcsc> of course. i'm more interested in learning the language anyway
[00:51:57] <strcat> for example rust knows an &mut parameter doesn't alias any other parameter
[00:52:19] *** Joins: ChrisOei (ChrisOei@moz-91A009E9.mycingular.net)
[00:52:35] <strcat> and an & ref to a type that fulfills the Freeze kind is truly immutable (so in LLVM terms, it doesn't alias, because it's based on memory dependencies, not address equality)
[00:52:38] <tcsc> unsafe pointers doesn't break that?
[00:52:43] <strcat> tcsc: they aren't allowed
[00:53:02] <tcsc> T*?
[00:53:30] <strcat> tcsc: you're not allowed to break the rules for &/&mut via raw ptrs
[00:53:53] <tcsc> you can't have a T* that aliases a T&?
[00:53:53] <strcat> unsafe code doing that is just wrong
[00:53:54] *** Joins: onelson (owen@C668895F.36788A19.5625D66B.IP)
[00:53:58] <mcpherrin> Well you could break it but you shouldn't
[00:54:03] <strcat> tcsc: it's not an alias if you don't mutate
[00:54:06] <strcat> per LLVM aliasing rules
[00:54:15] <tcsc> well, with mut in various places
[00:54:19] <strcat> and if you mutate something &T points at, that's undefined behaviour
[00:54:23] <tcsc> i see
[00:54:26] <strcat> it breaks the borrow checker invariants anyway
[00:54:29] <tcsc> that's good.
[00:54:46] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:55:05] <strcat> any ~ or &mut in a parameter is noalias
[00:55:09] <strcat> and a subset of & are
[00:55:11] <strcat> a known subset
[00:55:31] <strcat> atm, we only communicate it to LLVM for an ~ that's the outermost part of the type
[00:55:36] <strcat> like ~T will tell LLVM, but not (~T, int)
[00:56:10] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[00:56:10] *** ChanServ sets mode: +o tjc
[00:56:27] <strcat> we could do that, and also do it for more than parameters (but that requires more thought, it's not as simple)
[00:56:54] *** Quits: ChrisOei (ChrisOei@moz-91A009E9.mycingular.net) (Ping timeout)
[00:57:33] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:58:00] <tcsc> my gut feeling is that that doesn't make a huge difference
[00:58:07] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[00:58:18] <nstdloop> What's the best way to do timing?
[00:59:52] *** Quits: claudiu (claudiu@moz-F69B678E.thefacebook.com) (Input/output error)
[01:00:58] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[01:01:20] *** Quits: paulolieuthier (quassel@moz-12685D14.dynamic.adsl.gvt.net.br) (Client exited)
[01:01:26] <andrewd18> impeccable
[01:01:35] <strcat> tcsc: it can make a pretty big different
[01:01:40] <strcat> difference*
[01:02:12] *** Joins: derek_c (derek@moz-6942553A.cit.cornell.edu)
[01:02:30] <strcat> tcsc: fn foo(input: &[f32], output: &mut [f64]) { for (x, y) in input.iter().zip(output.mut_iter()) { *y = *x; } }
[01:02:42] <strcat> whether that will vectorize + unroll probably depends on alias analysis
[01:02:48] *** Joins: claudiu (claudiu@moz-F69B678E.thefacebook.com)
[01:03:00] <strcat> someone posted a really simple example a few days ago which was
[01:03:11] <strcat> fn foo(x: &mut &mut int) { **x = 5; **x = 5; }
[01:03:19] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[01:03:25] <strcat> no type-based alias analysis -> can't eliminate the dead store
[01:03:49] <strcat> (because the inner &mut might point at the outer &mut)
[01:04:26] *** Joins: ChrisOei (ChrisOei@moz-91A009E9.mycingular.net)
[01:04:27] <tcsc> so the current alias rules aren't equivalent to c++'s
[01:04:31] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[01:04:36] <tcsc> equivalent or stricter
[01:04:38] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[01:04:46] <strcat> tcsc: they're less strict than C/C++ atm
[01:04:54] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[01:04:57] <strcat> tcsc: in some ways
[01:05:00] <tcsc> i guess i would have assumed the iterator example would know that output couldn't alias input
[01:05:07] <strcat> tcsc: C/C++ have those type punning rules
[01:05:07] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[01:05:17] *** Joins: blindrenderer (blindrende@933424D6.B22400E5.217C7FCC.IP)
[01:05:29] *** Quits: valentin (Thunderbir@7F62EB68.9261D8F.FAF22AF7.IP) (Ping timeout)
[01:05:29] *** Quits: pzol (pzol@86821BC.DEB41A6D.AADC76B.IP) (Ping timeout)
[01:05:34] <strcat> where they decided that non-portable casts (due to alignment) were undef behaviour, and gcc/clang use it for TBAA
[01:05:45] *** Quits: burntsushi (burntsushi@moz-27A1B1D8.dhcp.oxfr.ma.charter.com) (Ping timeout)
[01:05:51] <strcat> we inherit a lot of the C rules from LLVM's pointer implementation
[01:05:55] <strcat> but not type punning
[01:06:09] <nstdloop> anyone know about timing?
[01:06:31] *** Quits: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu) (Ping timeout)
[01:06:34] <nstdloop> als, is there a profiler?
[01:06:36] <tcsc> i see. i had assumed that rust would have inherited "strict aliasing"
[01:06:46] <tcsc> but i guess not
[01:06:51] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[01:07:12] <strcat> tcsc: http://llvm.org/docs/LangRef.html#pointer-aliasing-rules it inherits this
[01:07:16] *** Joins: burntsushi (burntsushi@moz-27A1B1D8.dhcp.oxfr.ma.charter.com)
[01:07:20] <strcat> tcsc: but LLVM doesn't know about types in the language at all
[01:07:27] <strcat> you have to explicitly output tbaa nodes
[01:07:30] *** Quits: IanCormac84 (User@DD56B2E7.2A8D8854.67DFF8B4.IP) (Ping timeout)
[01:07:33] <strcat> which clang does for the C type punning rules
[01:08:01] <strcat> I don't know if rust will have type punning rules like that, but you can get pretty far by saying ~, &mut and 90% of & are noalias
[01:08:06] *** Joins: IanCormac84 (User@9EDD5154.2A8D8854.67DFF8B4.IP)
[01:08:14] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[01:08:16] *** Quits: io2 (io2@moz-EE406A5.home.otenet.gr) (Quit: )
[01:08:25] *** Joins: pzol (pzol@86821BC.DEB41A6D.AADC76B.IP)
[01:08:26] <strcat> without type punning rules, we won't have any type-based alias analysis for raw ptrs though
[01:08:59] <strcat> tcsc: we also need to tell LLVM our ptrs are non-null/dereferenceable... but that requires LLVM improvements ;(
[01:09:04] <strcat> that's a bigger perf issue
[01:09:19] *** Joins: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu)
[01:09:37] <tcsc> llvm doesn't have infrastructure for that already (from c++ references?)
[01:09:37] *** Joins: valentin (Thunderbir@7F62EB68.9261D8F.FAF22AF7.IP)
[01:09:37] *** Joins: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au)
[01:09:42] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[01:09:51] <strcat> tcsc: nope, none :(
[01:10:16] <strcat> tcsc: and unlike gcc, if (condition) { __builtin_unreachable(); } doesn't work for communicating stuff like this
[01:10:18] *** Joins: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP)
[01:10:21] <strcat> known issue
[01:10:24] *** jorendorff_away is now known as jorendorff
[01:10:26] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[01:10:34] <strcat> it optimizes it out as dead code early and then the information is almost always gone by the time it could use it
[01:10:58] <strcat> dunno what gcc does, I guess it keeps around guarantees like that when it understands them
[01:11:08] <tcsc> i remember watching a talk on llvm and where they said that was a problem with a lot of parts of llvm
[01:11:12] <tcsc> optimizing away useful info
[01:11:33] <tcsc> i think the talk was specifically talking about lto for c/c++
[01:11:34] *** Quits: IanCormac84 (User@9EDD5154.2A8D8854.67DFF8B4.IP) (Ping timeout)
[01:11:39] <strcat> the non-null issue is related to Option
[01:11:48] <strcat> Option<&T> is represented as 1-word just like &T
[01:11:54] <strcat> so as far as LLVM is concerned, they are the same
[01:12:11] <strcat> so it sees Some(&T) == None and performs a null check, because Some(&T) is just a no-op
[01:12:22] <strcat> hurts a lot of places... fixable at least
[01:12:23] *** Joins: IanCormac84 (User@BC8245A0.2A8D8854.67DFF8B4.IP)
[01:12:30] <tcsc> oh, that makes sense. 
[01:12:46] <strcat> iterators return Option<T> from next() and T is often a ptr
[01:12:58] <strcat> so sometimes it causes iterators to be slower than in C++
[01:13:15] <strcat> which is important, because slower is often 2x, 4x, 8x, 16x slower due to vectorization/unrolling
[01:13:24] <tcsc> yeah, that doesn't sound like the most efficient way to do it
[01:13:38] <strcat> tcsc: well if we asserted that it was non-null to LLVM, I don't think there would be any issue
[01:13:50] <strcat> tcsc: the problem is that there's a check inside the loop and it returns Some(T), and a check in the for loop itself
[01:14:02] <strcat> it gets inlined, but it can't see that Some(T) == None is never true
[01:14:04] <strcat> for ptrs
[01:14:06] *** Quits: ChrisOei (ChrisOei@moz-91A009E9.mycingular.net) (Ping timeout)
[01:14:14] <strcat> for non-reference iterators there's no issue
[01:14:34] <strcat> anyway rust has a lot of little perf issues like this ;p, but if you write code like C it performs as well as C
[01:14:35] *** Joins: funnel (hegel@DEB31F3E.28CFCE3E.FC69BED9.IP)
[01:14:36] <tcsc> hm. does the extra bool get completely inline?
[01:14:38] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[01:14:39] <tcsc> inlined*
[01:14:49] <strcat> tcsc: yes
[01:14:56] *** Quits: adu (ajr@moz-3611E9A9.washdc.fios.verizon.net) (Quit: adu)
[01:15:19] <strcat> tcsc: SROA (scalar replacement of aggregates) splits nearly every struct up into bits, and then it can see that it's a no-op pretty trivially
[01:15:25] *** Quits: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk) (Ping timeout)
[01:15:42] <strcat> (enums usually turn into aggregates, other than the Option<&T> case and the C-like enum case)
[01:15:42] *** Quits: claudiu (claudiu@moz-F69B678E.thefacebook.com) (Input/output error)
[01:16:32] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[01:16:41] <strcat> tcsc: it wasn't a problem before the special case for enum Foo<T> { A(T), B } for non-null ptrs was implemented ;\
[01:16:42] <nstdloop> ChrisMorgan: You maintain rust.vim?
[01:16:51] <strcat> tcsc: kind of sad that we can't tell LLVM about non-null yet...
[01:16:57] <strcat> there are other silly examples
[01:17:02] <ChrisMorgan> nstdloop: I'm the main maintainer of src/etc/vim, yes.
[01:17:04] *** Joins: ChrisOei (ChrisOei@moz-91A009E9.mycingular.net)
[01:17:15] <strcat> tcsc: another fun one is that adding useless padding to the start of a struct is often faster
[01:17:15] *** Quits: funnel (hegel@DEB31F3E.28CFCE3E.FC69BED9.IP) (Client exited)
[01:17:21] <nstdloop> is wting/rust.vim up to date?
[01:17:27] <tcsc> the null pointer thing is bound to be a perf win in the general case though.
[01:17:31] *** Joins: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net)
[01:17:32] <tcsc> strcat: really?
[01:17:33] *** Joins: funnel (hegel@DEB31F3E.28CFCE3E.FC69BED9.IP)
[01:17:39] <strcat> tcsc: because LLVM sees the offset, which will be tagged with `inbounds`, and uses that for information
[01:17:46] <strcat> tcsc: problem for clang too though
[01:18:04] <nstdloop> ChrisMorgan: is wting/rust.vim up to date?
[01:18:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:18:13] <strcat> it hurt us in some cases when we changed vectors from ptr -> [len|cap|data] to [len|cap|ptr] -> data
[01:18:16] <strcat> even though it shouldn't
[01:18:21] * strcat shrugs
[01:18:21] <ChrisMorgan> nstdloop: looks like it
[01:18:25] <strcat> LLVM has a lot of weird issues like that atm
[01:18:40] *** jorendorff is now known as jorendorff_away
[01:18:47] <ChrisMorgan> nstdloop: compare dates between https://github.com/wting/rust.vim/tree/master and https://github.com/mozilla/rust/tree/master/src/etc/vim/
[01:18:52] <nstdloop> ChrisMorgan: Can you pass lint flags with it (through syntastic)?
[01:19:07] <ChrisMorgan> nstdloop: it has nothing to do with syntastic
[01:19:09] <tcsc> yeah. clearly that requires fixing llvm, as adding padding to the start of structs would be... upsetting
[01:19:36] *** Quits: janua (francis@moz-C38AAD4A.cable.virginm.net) (Quit: janua)
[01:19:38] <nstdloop> ChrisMorgan: I get syntastic-style warnings, at least
[01:20:00] <ChrisMorgan> nstdloop: I mean that syntastic has its own Rust support; it's nothing to do with src/etc/vim
[01:20:01] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:20:32] *** Joins: KimmyLeo (KimmyLeo@10931E07.6FD7A518.CB05CF38.IP)
[01:20:36] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:20:38] <nstdloop> ChrisMorgan: Oh. Thanks for the info then
[01:20:45] <ChrisMorgan> nstdloop: c.f. syntastic/syntax_checkers/rust/rustc.vim; it effectively calls `rustc --no-trans file.rs`
[01:21:00] <ChrisMorgan> Read the syntastic docs on how to add more arguments.
[01:21:03] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:21:30] <nstdloop> ChrisMorgan: Thanks.
[01:21:49] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[01:22:22] *** Joins: victorporof_ (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[01:22:44] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:23:02] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[01:23:05] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Ping timeout)
[01:23:42] *** Quits: ChrisOei (ChrisOei@moz-91A009E9.mycingular.net) (Ping timeout)
[01:24:13] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:24:53] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[01:27:17] *** Quits: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net) (Ping timeout)
[01:27:30] *** jorendorff_away is now known as jorendorff
[01:27:41] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Input/output error)
[01:27:56] *** Quits: zmike (discomfito@moz-975BC507.hsd1.ct.comcast.net) (Quit: ah. I see.)
[01:28:58] *** Joins: nstdloop_ (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[01:30:08] *** Joins: ChrisOei (ChrisOei@moz-30D80888.hsd1.ca.comcast.net)
[01:30:11] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[01:30:25] *** Quits: mpiechotka (mpiechotka@moz-5393CC9.dynamic.mnet-online.de) (Quit: mpiechotka)
[01:32:31] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[01:34:31] *** Quits: nstdloop_ (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Input/output error)
[01:34:54] *** Joins: tulloch (tulloch@moz-99B7EB8.nat.csx.cam.ac.uk)
[01:36:08] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[01:36:55] *** jorendorff is now known as jorendorff_away
[01:37:07] *** Joins: zmike (discomfito@moz-975BC507.hsd1.ct.comcast.net)
[01:38:40] *** Quits: zmike (discomfito@moz-975BC507.hsd1.ct.comcast.net) (Input/output error)
[01:39:20] <bstrie> strcat: did you ever write that concurrent hashmap?
[01:39:34] <strcat> bstrie: yes, but it's not very efficient yet
[01:39:37] <strcat> bstrie: it's simple
[01:40:02] <strcat> bstrie: just adds a n_shards parameter to the constructors, making N inner hashmaps, each with a mutex
[01:40:06] <strcat> bstrie: uses the hash to find the correct hashmap
[01:40:10] <strcat> then locks that part
[01:41:17] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Input/output error)
[01:41:50] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[01:42:53] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[01:43:32] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[01:43:39] *** Quits: alkino (alkino@moz-58B8E4B4.w92-151.abo.wanadoo.fr) (Ping timeout)
[01:45:26] *** Joins: ruzu (quassel@moz-2AAEC710.austin.res.rr.com)
[01:46:12] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[01:46:27] <bstrie> strcat: would making it efficient require a fundamentally different approach?
[01:46:37] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[01:47:04] <strcat> bstrie: no, just a way to pass along the hash to the underlying hash table
[01:47:13] <strcat> like, 30 seconds of work tops
[01:47:15] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[01:47:23] *** Quits: anasyrma (x@moz-DE175E38.caltech.edu) (Ping timeout)
[01:47:26] *** Quits: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:47:35] *** Joins: lpy (lpy@54AA05A8.F09091A8.1348A864.IP)
[01:47:58] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Input/output error)
[01:48:20] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[01:49:10] <ryeguy> when using green threads, in general, what will be faster - receiving a resource over a port when it's available for use, or using a RWArc and allowing the read() method to block waiting for that resource?
[01:49:32] *** Joins: anasyrma (x@moz-DE175E38.caltech.edu)
[01:51:23] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[01:51:31] *** Joins: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[01:52:51] *** Joins: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net)
[01:52:57] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[01:53:15] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[01:53:55] *** Quits: Rym (y@D379E926.85D6E662.51C6DE68.IP) (Ping timeout)
[01:54:22] *** Quits: lpy (lpy@54AA05A8.F09091A8.1348A864.IP) (Client exited)
[01:54:39] *** Joins: IanCormac841 (User@7EF6BF7B.64D641E5.67DFF8B4.IP)
[01:54:46] *** Quits: IanCormac84 (User@BC8245A0.2A8D8854.67DFF8B4.IP) (Ping timeout)
[01:55:40] *** Quits: stephenmac7 (quassel@moz-F2C114C1.hsd1.fl.comcast.net) (Ping timeout)
[01:56:20] *** Joins: stephenmac7 (quassel@moz-F2C114C1.hsd1.fl.comcast.net)
[01:57:25] <dougxxx> I asked a SO q 'bout it last night, and a few people have had a look at it, but, in a nutshell, does a function call have access to the lifetime of the block it was invoked in?
[01:57:49] <dougxxx> So, effectively, can I have a fn x() => &'a T, where 'a is the block the function is called in?
[01:58:42] <ChrisMorgan> dougxxx: that's semantically meaningless
[01:58:48] <ChrisMorgan> (Sorry, g2g just now.)
[01:59:02] *** Joins: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[01:59:11] <dougxxx> fn x<'a>() -> &'aT?
[01:59:13] *** Joins: rileyw_ (rileyw@8BA43816.9AA11D69.65DDFA89.IP)
[01:59:42] <dougxxx> then you can go: let p = x::<'a>()?
[01:59:57] *** Quits: rileyw_ (rileyw@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[01:59:57] *** Joins: cschneid (cschneid@moz-12E33685.hlrn.qwest.net)
[02:00:27] *** Quits: rileyw (rileyw@8BA43816.9AA11D69.65DDFA89.IP) (Ping timeout)
[02:01:31] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[02:04:56] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[02:04:57] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[02:08:09] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[02:09:34] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[02:09:34] *** Quits: esummers__ (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[02:09:39] *** Joins: esummers____ (esummers@moz-3B015C90.wi.res.rr.com)
[02:11:08] <derek_c> is there something equivalent to rust-nightly for Windows?
[02:12:58] *** Quits: Siyo (Siyo@A89938F4.87DAA49F.F113998C.IP) (Ping timeout)
[02:13:12] *** Joins: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP)
[02:13:17] *** Quits: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP) (Connection reset by peer)
[02:13:32] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[02:14:37] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[02:14:51] *** Joins: IanCormac84 (User@51511575.2A8D8854.67DFF8B4.IP)
[02:15:10] *** Quits: IanCormac841 (User@7EF6BF7B.64D641E5.67DFF8B4.IP) (Ping timeout)
[02:15:12] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Quit: leaving)
[02:15:15] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[02:15:16] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[02:15:58] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[02:16:46] *** Quits: IanCormac84 (User@51511575.2A8D8854.67DFF8B4.IP) (Ping timeout)
[02:17:46] *** Quits: lawrence (lawrence@moz-18D3CB96.wireless.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:17:54] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:17:59] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[02:18:05] *** Joins: IanCormac84 (User@288FF2E0.2A8D8854.67DFF8B4.IP)
[02:18:16] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[02:18:51] *** Quits: pongad (pongad@moz-7E8AAD2E.res.gatech.edu) (Quit: Leaving)
[02:20:03] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:21:25] *** Joins: Siyo (Siyo@A89938F4.87DAA49F.F113998C.IP)
[02:21:44] *** Quits: doctor (ARealName@moz-9CB48492.nycmny.fios.verizon.net) (Quit: I found 1 in /dev/zero)
[02:21:49] *** Quits: IanCormac84 (User@288FF2E0.2A8D8854.67DFF8B4.IP) (Ping timeout)
[02:21:56] *** Joins: IanCormac84 (User@E2C87274.2A8D8854.67DFF8B4.IP)
[02:22:12] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[02:22:49] <ryeguy> derek_c: this is the closest thing: https://github.com/mozilla/rust/wiki/Doc-how-to-install-an-unofficial-nightly-for-Windows
[02:23:16] <ryeguy> however the person who keeps the package up to date doesn't do it every night..it's pretty random..can go a week without an update
[02:23:31] <derek_c> ryeguy: ouch
[02:23:47] *** Quits: IanCormac84 (User@E2C87274.2A8D8854.67DFF8B4.IP) (Ping timeout)
[02:23:48] <ryeguy> derek_c: here is the history https://www.nuget.org/packages/Rust/
[02:24:05] <ryeguy> it's not *that* bad..you probably don't need to update it every day
[02:24:17] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:24:17] <ryeguy> it just might be a bit disappointing if something new gets put in and you can't use it yet :p
[02:24:28] *** Joins: IanCormac84 (User@6EF0B921.64D641E5.67DFF8B4.IP)
[02:24:49] <derek_c> ryeguy: I see. thanks :)(
[02:24:50] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[02:25:31] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[02:25:35] *** Quits: tulloch (tulloch@moz-99B7EB8.nat.csx.cam.ac.uk) (Ping timeout)
[02:25:58] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[02:26:51] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[02:27:02] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[02:27:08] *** Joins: tulloch (tulloch@moz-99B7EB8.nat.csx.cam.ac.uk)
[02:28:39] *** Joins: IanCormac841 (User@FE209E74.64D641E5.67DFF8B4.IP)
[02:28:48] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[02:28:54] *** Quits: IanCormac84 (User@6EF0B921.64D641E5.67DFF8B4.IP) (Ping timeout)
[02:30:00] *** Joins: bitofabother (Aria@moz-ABB60BA0.austin.res.rr.com)
[02:30:50] *** Quits: fournm (Aria@moz-ABB60BA0.austin.res.rr.com) (Ping timeout)
[02:33:51] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[02:33:58] *** Quits: victorporof_ (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Ping timeout)
[02:34:17] *** Quits: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net) (Quit: ChatZilla 0.9.90.1 [Firefox 27.0.1/20140212131424])
[02:34:35] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[02:34:54] *** Quits: IanCormac841 (User@FE209E74.64D641E5.67DFF8B4.IP) (Ping timeout)
[02:35:46] *** Joins: IanCormac84 (User@6477A883.64D641E5.67DFF8B4.IP)
[02:35:49] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[02:36:08] *** Joins: lpy (lpy@F7AFA3.F09091A8.1348A864.IP)
[02:37:07] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[02:37:55] *** Quits: Armavica (virgile@moz-AD428ED7.ens.fr) (Ping timeout)
[02:38:29] *** Joins: huddler (Mibbit@moz-2D47332E.netcologne.de)
[02:38:47] <huddler> Can someone tell me why <http://pastebin.com/FduFMVYg> doesn't change the vector?
[02:39:11] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[02:39:18] *** Joins: Armavica (virgile@moz-AD428ED7.ens.fr)
[02:39:53] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[02:40:47] <nstdloop> Does anyone know anything about timing or profiling? I can't seem to find any good info on this.
[02:42:31] *** Joins: sellout (Adium@moz-EE794C0C.hlrn.qwest.net)
[02:42:35] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[02:42:47] <mcpherrin> nstdloop: Well you can use the normal profiling tools you'd use with c/c++
[02:42:48] <sp3d> nstdloop: it's basically like C if you compile with debugging info
[02:42:56] <sp3d> rats, beaten
[02:43:26] <sinsnare> hi guys, i ask a lot of stupid questions, but at the bottom of this page: 
[02:43:26] <sinsnare> www.rust-sfml.org there is a line of code that says: "window.clear(~Color::new_RGB(0, 200, 200));" why does the color need an owned pointer?
[02:43:30] *** Joins: Rym (y@2542C0EA.BF8845BF.51C6DE68.IP)
[02:43:38] <sinsnare> cant i just pass in the value of the color? (why was the API designed like this0
[02:43:48] *** Quits: heftig (heftig@moz-C206A7B2.dip0.t-ipconnect.de) (Ping timeout)
[02:44:03] *** Joins: heftig (heftig@moz-C206A7B2.dip0.t-ipconnect.de)
[02:44:11] <dougxxx> huddler: I have no idea why, but your map callback is never invoked.
[02:44:16] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[02:44:17] *** Joins: lucian_ (lucian@moz-8408FDFA.cable.virginm.net)
[02:45:26] *** Joins: jadbaires (jadrian@moz-A37AC89A.dsl.telepac.pt)
[02:46:02] *** Quits: lucian_ (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[02:47:16] <huddler> sinsnare: that's actually the wrong thing to do. The function takes a &Color, which is sensible, so you don't have to move the whole struct. You'd want to call it as "window.clear(&Color::new_RGB(0, 200, 200));" though (borrow a stack allocation instead of a heap one)
[02:47:18] <Luqman> huddler: map just returns an iterator
[02:47:27] *** Quits: tulloch (tulloch@moz-99B7EB8.nat.csx.cam.ac.uk) (Ping timeout)
[02:47:41] <huddler> Luqman: right… now you mention it that makes a lot of sense
[02:48:00] <sinsnare> huddler, why do you need a pointer at all? cant you just pass the value instead of a reference (if i understand it correctly?)?
[02:48:04] <Luqman> huddler: to get what you want you'd do something like x.move_iter().map(|y| y | 1).to_owned_vec()
[02:48:52] *** Quits: IanCormac84 (User@6477A883.64D641E5.67DFF8B4.IP) (Ping timeout)
[02:49:51] <mcpherrin> sinsnare: If Color is like a (u8,u8,u8) then taking it by value is probably better
[02:49:56] *** Joins: IanCormac84 (User@CF93BA5A.2A8D8854.67DFF8B4.IP)
[02:50:32] <mcpherrin> sinsnare: But whoever wrote window.clear wants a pointer for whatever reason (I haven't looked), then you've gotta give it one.
[02:50:41] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[02:51:07] *** Joins: zmike (discomfito@moz-975BC507.hsd1.ct.comcast.net)
[02:51:09] <sinsnare> mcpherrin, understandable, but do you think the api to use a pointer makes sense, im just trying to understand rationale
[02:51:18] <sinsnare> https://github.com/JeremyLetang/rust-sfml/blob/master/src/rsfml/graphics/color.rs and they are u8s
[02:52:09] *** Quits: tcsc (tcsc@moz-5E71BAD9.hsd1.ma.comcast.net) (Quit: bye!)
[02:53:24] <mcpherrin> sinsnare: without looking further, I'd have flagged taking a pointer if I was doing a code review :)
[02:53:36] <canhtak> sinsnare: the example on the site use the wrong pointer. you should use &pointer.
[02:53:46] <sinsnare> mceier, ok makes sense, thanks so much guys :)
[02:54:11] <mcpherrin> I'd also have named the new_RGB as from_rgb, probably a bit more rustic
[02:54:15] <sinsnare> mcpherrin, * sorry mceier!
[02:54:18] <nstdloop> mcpherrin, sp3d: I don't have much experience with that, can you elaborate?
[02:54:33] <mcpherrin> nstdloop: sorry, I forgot the context
[02:54:42] <mcpherrin> nstdloop: what do you want me to elaborate on?
[02:54:43] <nstdloop> mcpherrin: profiling/timing
[02:55:09] *** Joins: IanCormac841 (User@8634E79.2A8D8854.67DFF8B4.IP)
[02:55:24] <nstdloop> You said it's basically like C
[02:55:24] *** Quits: IanCormac84 (User@CF93BA5A.2A8D8854.67DFF8B4.IP) (Ping timeout)
[02:55:33] <nstdloop> which I don't have a lot of experience profiling
[02:55:35] <nstdloop> or timing
[02:55:57] <mcpherrin> nstdloop: Ah, yeah.  Well, tools like "gnu prof", "oprofile" on linux can help with that
[02:56:13] <mcpherrin> There's #[bench] in Rust, but I'm not sure how it works.  Haven't used it myself.
[02:56:16] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[02:56:28] <mcpherrin> Not sure if you can use gprof with Rust.
[02:57:15] *** Quits: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP) (Input/output error)
[02:57:22] <mcpherrin> Vtune too, but it's $$$$
[02:57:39] <mcpherrin> I'd start with #[bench] probably.
[02:58:40] <sfackler> #[bench] is pretty simple: #[bench] fn bench_foo(bh: &mut BenchHarness) { <setup here> bh.iter(|| { <do stuff to benchmark here> }); }
[02:59:03] <sfackler> the harness will call the closure you pass to iter a bunch of times to get a reasonably stable measurement
[03:00:54] *** Quits: mbx (mbebenita@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: mbx)
[03:01:42] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[03:02:39] <strcat> mcpherrin: perf! ;p
[03:02:47] * strcat likes perf and callgrind
[03:02:57] <strcat> callgrind doesn't like libgreen though
[03:03:24] *** Quits: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: Ex-Chat)
[03:03:40] <sinsnare> finally got rustc on windows :) time to install rust-sfml!
[03:03:55] *** Quits: IanCormac841 (User@8634E79.2A8D8854.67DFF8B4.IP) (Ping timeout)
[03:04:08] *** Joins: IanCormac84 (User@B98613C9.64D641E5.67DFF8B4.IP)
[03:04:31] <zwarich> strcat: is there a good kernel-level call stack profiler on Linux?
[03:05:06] <strcat> zwarich: well, perf uses the mainline kernel profiling support
[03:05:20] <zwarich> does it get callstacks or just perf counters?
[03:05:26] <strcat> it gets call graphs
[03:05:31] <strcat> -g
[03:05:51] <strcat> it does a good job annotating asm with timings too
[03:06:19] <nstdloop> #[bench] looks good
[03:06:24] *** Quits: huddler (Mibbit@moz-2D47332E.netcologne.de) (Quit: http://www.mibbit.com ajax IRC Client)
[03:06:35] <nstdloop> How does using rustc -W work?
[03:06:42] <nstdloop> How can I pass it multiple things to warn about
[03:06:49] <strcat> zwarich: there are alternatives, I mean there's even dtrace for linux, but meh
[03:06:55] * strcat likes perf
[03:07:03] <zwarich> strcat: dtrace is for other problems
[03:07:06] <nstdloop> I'd like to warn about unnecessary-qualification and other things on the same run
[03:07:12] <nstdloop> that aren't warned by default
[03:07:24] <strcat> zwarich: perf can do a lot of the same stuff, it's not just a sampling profiler
[03:07:47] <zwarich> dtrace is good if you want to measure how things flow through a system, e.g. how a frame being rendered passes through different userspace processes, into drivers, etc.
[03:08:41] *** Quits: IanCormac84 (User@B98613C9.64D641E5.67DFF8B4.IP) (Ping timeout)
[03:10:00] *** Joins: IanCormac84 (User@53F29967.64D641E5.67DFF8B4.IP)
[03:10:38] <strcat> zwarich: afaik they have the ambition to make it replace most of the other stuff, although it's not there yet
[03:11:16] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[03:11:42] <strcat> callgrind is neat too, but soooo slow
[03:12:12] *** Quits: pyon (user@6B56F365.A9B419CB.1C8C8CE9.IP) (Quit: ERC Version 5.3 (IRC client for Emacs))
[03:12:29] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:13:08] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[03:13:27] <strcat> zwarich: at the very least it's a better strace.
[03:13:44] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[03:14:18] <strcat> and structured output is so nice when I'm making syscall whitelists ;p
[03:15:05] *** Quits: soumyaC (uid15286@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[03:16:32] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:17:03] *** Quits: Armavica (virgile@moz-AD428ED7.ens.fr) (Ping timeout)
[03:18:31] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:18:41] *** Quits: kanru (kanru@moz-DB4A9C19.scl3.mozilla.com) (Input/output error)
[03:19:00] *** Joins: meyer (meyer@moz-A9CF56E4.hsd1.ca.comcast.net)
[03:19:34] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[03:20:07] <meyer> Is vec::append_one(vec::with_capacity(capacity), element) the correct / best way to get an owned pointer to an array with capacity for some elements, but containing only 1?
[03:20:48] *** Joins: rileyw (rileyw@moz-E40BCEED.hsd1.ca.comcast.net)
[03:21:02] <strcat> meyer: that's a good way of doing it, but use Vec ;)
[03:21:02] *** Quits: rileyw (rileyw@moz-E40BCEED.hsd1.ca.comcast.net) (Client exited)
[03:21:06] <strcat> ~[T] is being removed
[03:21:28] <meyer> Wait, why is ~[T] being removed? Link to the discussion?
[03:21:39] <strcat> meyer: long time coming, no specific discussion to link to
[03:21:46] <strcat> it's nearly gone
[03:21:52] <nstdloop> strcat: What's wrong with ~[T]?
[03:21:54] *** Quits: IanCormac84 (User@53F29967.64D641E5.67DFF8B4.IP) (Ping timeout)
[03:22:02] *** Joins: rileyw (rileyw@moz-E40BCEED.hsd1.ca.comcast.net)
[03:22:21] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[03:22:30] <strcat> it doesn't use a good vector representation and it doesn't work with DST
[03:22:33] <sfackler> it's incompatible with the upcoming DST changes and has some perf issues
[03:23:07] <strcat> there's simply no need to have such a complex feature in the compiler, it can be done just as well (in this case, better) in a library
[03:23:10] <meyer> Alright. I'll read up on that.
[03:23:18] *** Joins: IanCormac84 (User@B2DD5402.2A8D8854.67DFF8B4.IP)
[03:23:29] <meyer> Also
[03:23:52] <meyer> What are the best tools for profiling rust code? Is there any library for automatically inserting instrumentation?
[03:24:36] <strcat> meyer: on which platform? a library isn't needed
[03:24:38] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[03:24:50] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[03:25:11] *** Joins: jdm (jdm@moz-E41E4269.dsl.teksavvy.com)
[03:25:11] *** ChanServ sets mode: +o jdm
[03:25:15] <meyer> Linux. And if I wanted % of times called from, I couldn't use a statistical sampling profiler, right?
[03:26:11] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Input/output error)
[03:26:26] <strcat> meyer: I just use perf and callgrind/cachegrind, they work well with rust
[03:26:35] *** Quits: untitaker (untitaker@moz-500C8AFD.adsl.highway.telekom.at) (Ping timeout)
[03:26:52] <meyer> strcat: Thanks. I've heard of perf, and I'll check out callgrind/cachegrind.
[03:27:10] <strcat> perf covers sampling, call graphs and various kinds of tracing (like syscalls) well
[03:27:26] *** Joins: Armavica (virgile@moz-AD428ED7.ens.fr)
[03:27:29] <strcat> and stuff like context switches
[03:27:34] <meyer> Oh cool
[03:27:36] <meyer> It
[03:27:38] <meyer> Gives like
[03:27:41] <meyer> Cache misses and branch mispredicts
[03:27:48] <strcat> meyer: well, there are different tools
[03:27:55] <strcat> perf trace is like strace, but much better
[03:28:09] <strcat> perf record + perf report is the usual workflow afaik
[03:28:28] <strcat> (gathers samples and does a report, have to ask it to do call graphs explicitly)
[03:28:40] *** Quits: oxum (anonymous@B9BFB4B1.77B59FE0.520CDC98.IP) (Quit: ...)
[03:28:44] *** Joins: reedlepee (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[03:28:47] <strcat> I haven't explored all of it anyway...
[03:28:48] *** Quits: ryeguy (ryeguy@9C569A0.5D1143CD.E8644521.IP) (Quit: )
[03:29:24] <meyer> Is Vec documented yet?
[03:29:31] <meyer> I see the Vector trait in std::vec
[03:29:50] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[03:29:50] *** ChanServ sets mode: +ao brson brson
[03:29:53] <strcat> meyer: the module as #[doc(hidden)] on it
[03:30:08] <strcat> it's std::vec_ng::Vec and generally the same API
[03:30:29] <strcat> the documentation and tests will be moved over when everything it's ported (I think most of the codebase is using it now, but not all)
[03:30:42] *** Quits: IanCormac84 (User@B2DD5402.2A8D8854.67DFF8B4.IP) (Ping timeout)
[03:30:51] <meyer> So not much effort to port? Should I just worry about it at the next release?
[03:31:34] *** Joins: IanCormac84 (User@EEA1397A.2A8D8854.67DFF8B4.IP)
[03:31:41] <strcat> not much effort
[03:31:48] *** Quits: reedlepee (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:32:04] <meyer> Also: Futures are so convenient. Every language should have them,.
[03:32:06] <meyer> *.
[03:32:18] <strcat> rusti: let mut xs = vec!(1, 2, 3); xs.push(4); xs.len()
[03:32:19] -rusti- 4u
[03:33:23] <meyer> Oh. Does the rust interpreter work now?
[03:33:36] <meyer> So many new things I'm learning today
[03:34:03] <sp3d> no, rusti just runs the compiler and sends back the output from running the program
[03:34:43] *** Joins: untitaker (untitaker@moz-351DCF1C.adsl.highway.telekom.at)
[03:35:31] *** Joins: hidensoft (intuxicate@5BA9DB47.F2F0EDE4.DA0107E2.IP)
[03:36:27] *** Quits: intuxicated (intuxicate@7269D995.26CEB0C7.3FFBF42F.IP) (Ping timeout)
[03:36:30] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[03:36:55] *** Joins: sanxiyn (tinuviel@B575CDAA.A617DB17.A737E77F.IP)
[03:38:04] <mcpherrin> rusti is something like this (but over IRC) https://gist.github.com/mcpherrinm/9521550
[03:38:08] *** Quits: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP) (Quit: mno2)
[03:38:13] *** Quits: jadbaires (jadrian@moz-A37AC89A.dsl.telepac.pt) (Quit: Konversation terminated!)
[03:38:20] <sanxiyn> Reading yet-another-blog-post-on-Rust reminded me of "problem" of borrow checker usability (or learning curve), so I wrote something down
[03:38:24] <strcat> + sandboxing ;p
[03:38:31] <sanxiyn> Here: http://www.reddit.com/r/rust/comments/209sly/consider_nimrod_with_a_rust_comparison/cg1c28y
[03:38:36] <mcpherrin> strcat: yeah, that's an important part :-)
[03:38:37] <sanxiyn> What do you think?
[03:39:07] <mcpherrin> Reddit won't load for me :(
[03:39:13] <sanxiyn> :(
[03:39:33] <sanxiyn> Will paste here:
[03:39:34] <ruzu> maybe it's a good thing :3
[03:39:35] <sanxiyn> The argument against Rust here seems to boil down to "borrow checker is not usable". Which may be the case, but I have evidences to the contrary.
[03:39:45] <sanxiyn> For example, I mentored multiple programmers with only Java experience (no previous C or C++ experience) at Samsung Electronics to learn Rust, and all of them could make useful contributions to Servo browser without much difficulty after 6 months.
[03:39:53] <sanxiyn> To be fair, they struggled to compile anything substantial past borrow checker in the first month, and it didn't help that at the time (early 2013) borrow checker was less mature.
[03:40:02] <sanxiyn> I think it is true that borrow checker is not immediately usable and has a steep learning curve, but I haven't seen any evidence that it is not usable after some genuine efforts which I think it deserves. 
[03:40:08] <sanxiyn> Making learning curve less steep would be great, since it seems to be #1 marketing problem for Rust (together with "ugly syntax"), but I don't know how.
[03:40:38] <mcpherrin> I think the syntax is getting a lot less ugly too
[03:40:57] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[03:41:04] <sanxiyn> mcpherrin: Doesn't seem to decrease frequency of "ugly syntax" criticism of Rust a tiny bit though
[03:41:16] <mcpherrin> Well, it has a bit I think
[03:41:29] <mcpherrin> Or maybe we just have less people thinking they can suggest we change it :)
[03:41:47] <meyer> I definitely wouldn't consider Rust a "pretty" language, but I'm not sure how I'd make the syntax any nicer
[03:41:53] <dougxxx> sanxiyn: I think huon's point the other day was particularly relevant too; the interesting thing about pointers in rust is that they are provably correct.
[03:42:06] <meyer> The local type inference removes the burden of tons of <> and :: everywhere
[03:42:13] <strcat> meyer: there are lots of things I would change about rust's syntax ;)
[03:42:22] <dougxxx> It's not really about a new type of pointer (no one really cares), but about code that works.
[03:42:23] <strcat> first of all, use significant indentation like haskell's
[03:42:30] <strcat> now {} is free - use it for container literals
[03:42:33] *** Quits: IanCormac84 (User@EEA1397A.2A8D8854.67DFF8B4.IP) (Ping timeout)
[03:42:39] <strcat> now [] is free, use it for generics like nimrod/scala
[03:42:44] <dougxxx> If it compiles -> it probably works. That's a pretty massive thing.
[03:42:48] <nstdloop> Rust has a nice blend of "pretty" syntax from other languages
[03:43:02] <strcat> [] looks waaaay better than <> for generics
[03:43:09] <strcat> and editors usually have matching on it, but not <>
[03:43:17] <nstdloop> strcat: That last point does bother me.
[03:43:26] <strcat> and you don't need a hack like foo::<a, b>
[03:43:34] <meyer> strcat: That seems reasonable.
[03:43:38] *** Joins: IanCormac84 (User@E7B297F.64D641E5.67DFF8B4.IP)
[03:44:10] <strcat> you could keep the semicolons or come up with another way of doing it
[03:44:34] <nstdloop> I do think that Haskell has much nicer type signatures than Rust - if we're judging by prettiness
[03:44:51] <nstdloop> Though it is kind of nice to have the type right next to the name of the parameter
[03:44:58] <meyer> Haskell can cheat, since functions /really are/ functions of functions etc. until optimization
[03:45:00] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[03:45:18] <sanxiyn> strcat: I like your direction, but I guess it is doomed to be http://www.csse.monash.edu.au/~damian/papers/HTML/ModestProposal.html for Rust...
[03:45:26] <strcat> well I'm not proposing it
[03:45:30] <sanxiyn> (I also very much like that C++ resyntaxing proposal)
[03:45:33] <strcat> I'm just saying my ideal language would do that ;)
[03:46:02] <sfackler> didn't rust use [] for generics at some point?
[03:46:05] <nstdloop> meyer: True, but that doesn't make it any less pretty :)
[03:46:11] <strcat> sfackler: dunno, I didn't use it then
[03:46:18] <strcat> if so, I'm sad it switched to <> to appeal to C++ programmers
[03:46:24] <sanxiyn> sfackler: Also predates my use
[03:46:40] <sanxiyn> (~Jan 2013)
[03:46:45] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[03:46:59] * strcat started using rust with 0.4
[03:47:07] <sfackler> I vaguely remember graydon saying that it was changed because it interacted poorly with the indexing syntax or something
[03:47:16] *** Quits: zz_kimundi (kimundi@moz-7F0BEAFC.dip0.t-ipconnect.de) (Ping timeout)
[03:47:23] <strcat> and I started using C++ with C++11 (although before 2011) ;p
[03:47:37] * sanxiyn started in 0.5 era
[03:47:50] <jdm> I remember [] generics
[03:47:54] <strcat> sanxiyn: well, it interacts with index syntax in the same way <> interacts with < >
[03:47:55] <jdm> I was weirded out by them
[03:47:56] <strcat> afaik
[03:48:02] <strcat> jdm: but they're prettier ;(
[03:48:09] <jdm> and yeah, indexing was gross
[03:48:09] <sanxiyn> strcat: Wrong nick completion :)
[03:48:11] <jdm> vec.(5)
[03:48:26] <strcat> sanxiyn: heh
[03:48:28] <sanxiyn> jdm: Oh that's just like OCaml?
[03:48:32] <meyer> Maybe @(index) for indexing?
[03:49:18] <strcat> you've got endless choices
[03:49:27] <strcat> xs->2, or whatever ;p
[03:50:15] <meyer> I really like Go's left-to-right readable types. *[4]int (pointer to array of 4 integers) vs *[int, ..4]
[03:50:34] *** Joins: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net)
[03:51:08] <sanxiyn> meyer: I don't. I guess it depends on taste...
[03:51:15] *** Joins: zz_kimundi (kimundi@moz-F815AD2B.dip0.t-ipconnect.de)
[03:51:32] *** zz_kimundi is now known as kimundi
[03:51:33] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[03:51:54] <ChrisMorgan> Do you think it reasonable that in Rust *any* UTF-8 should tokenise? (At present it is not true, but it would be convenient for things like syntax highlighting in certain places if it was.)
[03:52:04] <meyer> sanxiyn: It is definitely an opinion. Any particular reason you disliked it? It was probably one of my favorite things about Go.
[03:52:07] <sanxiyn> I wonder whether it is related to the fact that the syntax reads naturally in English, but has no such reading in Korean whatsoever.
[03:52:34] <sanxiyn> meyer: Mostly, I don't vocalize "pointer to array of 4 integers", like ever, since English is not my language.
[03:53:11] <sanxiyn> And apart from that "natural in English reading", I find the notation counter-intuitive.
[03:53:12] <meyer> Ah. How would you describe the type in Korean?
[03:53:48] <meyer> That is, what order do the elements from the type appear when written / spoken in words
[03:54:09] <sanxiyn> meyer: 4-integers-pointer
[03:54:12] <sanxiyn> meyer: Which is reverse of Rust order
[03:54:20] <sanxiyn> (and unrelated to Go order)
[03:54:43] <meyer> Also: Do you use loanwords for many programming-related things, or do you have native vocabulary for it?
[03:54:53] <sanxiyn> meyer: Mixed
[03:54:54] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Ping timeout)
[03:55:01] *** Quits: IanCormac84 (User@E7B297F.64D641E5.67DFF8B4.IP) (Ping timeout)
[03:55:09] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[03:55:13] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[03:55:42] *** Joins: IanCormac84 (User@10EF4CC3.64D641E5.67DFF8B4.IP)
[03:55:53] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[03:56:01] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[03:56:21] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[03:57:16] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[03:57:26] <rweir> http://erights.org/data/irrelevance.html may be interesting, re syntax design
[03:58:25] *** Joins: dranov (dranov@72F6F491.807AF119.A5830293.IP)
[03:58:26] <sanxiyn> meyer: Ok, I think this is a better explanation
[03:58:28] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[03:58:46] <sanxiyn> "pointer to array of 4 integers"
[03:59:03] <sanxiyn> is best translated idiomatically to Korean (and I presume lots of other languages) and literally back to English as
[03:59:04] *** Quits: dranov (dranov@72F6F491.807AF119.A5830293.IP) (Client exited)
[03:59:12] <sanxiyn> "pointer to array of integers whose length is 4"
[03:59:14] *** Joins: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net)
[03:59:27] <sanxiyn> Which is * [ int 4
[03:59:31] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[03:59:33] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[03:59:37] <meyer> That makes sense
[03:59:39] <meyer> But
[03:59:43] *** Joins: dranov (dranov@72F6F491.807AF119.A5830293.IP)
[04:00:22] <sinsnare> hey around how long does rust take to compile? hours? i dont want to stay up all night waiting
[04:00:39] <sp3d> 1-2h maybe?
[04:00:41] <sanxiyn> sinsnare: Depeds on the machine :)
[04:00:57] <meyer> In practice we have the notion that a pointer to "array of 4 integers" is different from pointer to "array of 3 integers", so it still kinda makes sense to me for the "array of 4" to be part of the ....
[04:00:59] <meyer> Actually
[04:01:20] <sinsnare> its fast. i built it 3 years ago for $1000. 3.5ghz quad core AMD, and 6gigs ram.
[04:01:30] <sinsnare> ok 1-2 hours. to bed it is then
[04:01:41] <meyer> It makes more sense to take a prefix of * [ int 4 than * [ 4 int
[04:01:46] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[04:01:48] <cmr> sinsnare: it only takes 30-40 minutes, if you're not swapping.
[04:01:49] <meyer> It is more meaningful, that is
[04:02:00] <sinsnare> hmmm how can i check memory usage on linux?
[04:02:04] <cmr> free -m
[04:02:09] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[04:02:10] <sinsnare> cool
[04:02:10] *** Joins: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net)
[04:02:37] <meyer> Since (* [ int ) tells you what is is an array of, and the 4 tells you it is fixed-size. (* [ 4) doesn't allow you to dereference anything, hypothetically
[04:02:47] <sinsnare> hmmmm seems i might be swaping just a tad, guess its time for a RAM upgrade
[04:03:03] <cmr> the build usually uses 1.5 max
[04:03:05] <sanxiyn> meyer: I don't know whether my taste is related to linguistic background, but I do know "natural reading" argument didn't impress me
[04:03:08] <sinsnare> it was much easier on windows, it was already compiled!
[04:03:16] <sinsnare> oh then what is using all my ram then?
[04:03:19] *** Joins: aravindavk (aravinda@37D36E3.28A91B20.2F9DE622.IP)
[04:03:28] <sinsnare> or im reading it wrong! probably that because i have no idea what im doing
[04:03:36] <sanxiyn> Re: borrow checker usability
[04:03:45] <sanxiyn> Mostly I think that the expectation is just wrong. It seems that people expect learning pointers to be easy once they learned pointers in any other language, and consider learning new kind of pointers not deserving of the effort.
[04:03:46] <cmr> sinsnare: which linux are you using? there are nightly packages for a bunch of distros.
[04:03:49] <sanxiyn> In my opinion more reasonable expectation is to expect learning Rust pointers to be as hard as learning C pointers for the first time, and to consider it similarly deserving of the effort. But you really can't force people to be reasonable and this does not solve marketing problem at all.
[04:03:58] <meyer> sanxiyn: You've convinced me that the "natural reading" order isn't better. I think having "pointer to an array of unknown number of X" be a prefix of "pointer to array of specific number of X" makes a lot of sense.
[04:04:04] <cmr> sinsnare: the easiest way is to install htop and sort by memory usage ;p
[04:04:16] <sinsnare> cmr, linux mint, derivative of ubuntu
[04:04:27] <sinsnare> there probably was a repo for me then
[04:04:48] <cmr> sinsnare: see the instructions on https://launchpad.net/~hansjorg/+archive/rust
[04:04:57] <cmr> (under technical details)
[04:06:41] <dougxxx> sanxiyn: to be fair though, *x, ~x, x are pretty simplistic constructs. You don't really need to tell people 'you're going to have to learn a whole new set of things' for them.
[04:07:03] <dougxxx> It's the lifetimes associated with & pointers which is conceptually new.
[04:07:04] <strcat> meyer: as long as it's not the awful C order
[04:07:12] <meyer> strcat: Absolutely.
[04:07:37] <sinsnare> cmr, woah thanks :) downloading now
[04:07:38] <strcat> const volatile **restrict const *const x; // what does it mean? ;p
[04:07:46] *** Joins: victorporof_ (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[04:07:59] <sinsnare> if i did 'sudo apt-get install rust-nightly' it will probably be updating about every day, right?
[04:08:02] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Connection reset by peer)
[04:08:07] <cmr> sinsnare: yup.
[04:08:22] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[04:08:26] <sinsnare> perfect!
[04:08:42] <sinsnare> does all of this include the standard library?
[04:09:00] <cmr> yes.
[04:09:05] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Ping timeout)
[04:09:10] <cmr> it's everything you get with "make install"
[04:09:30] <sinsnare> oh good. that makes sense because i didnt apt-get rustc, the whole of rust
[04:09:35] <strcat> (and hopefully more? there's a lot of other random things)
[04:09:38] <sinsnare> ok ill stop being stupid and try to get rsfml working
[04:10:08] <sanxiyn> Hm I haven't looked at package. As a Debian user (and once a Debian maintainer) I should look into it.
[04:10:25] <sanxiyn> Does it install vim syntax file to the right place?
[04:10:47] <cmr> I don't even know if it includes them.
[04:11:01] <sanxiyn> Quality package probably should...
[04:11:25] <sanxiyn> http://pkg-vim.alioth.debian.org/vim-policy.html/ is the manual
[04:11:33] <sanxiyn> on how to package Vim-related files in Debian
[04:12:32] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Quit: Leaving)
[04:12:33] *** Quits: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net) (Ping timeout)
[04:12:56] *** Joins: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net)
[04:13:26] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[04:13:28] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[04:13:52] <sanxiyn> (e.g. if you install Debian go package, .go will start to highlight in Vim without additional configuration)
[04:13:57] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[04:14:15] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Input/output error)
[04:14:23] <ruzu> i think vim has it's own stuff going on these days, like pathogen
[04:14:29] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[04:14:43] <sanxiyn> Yeah :(
[04:14:49] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[04:14:52] <sanxiyn> In general, Debian is at war with any other packaging system
[04:15:02] *** Joins: oxum (anonymous@55A7A5F0.B6DE35CB.520CDC98.IP)
[04:15:13] <o11c> well ... it doesn't want to be Windows
[04:15:20] <sanxiyn> (e.g. Debian python-* packages against PyPI Python packages)
[04:15:21] <o11c> where every program does its own packaging
[04:15:30] <andrewd18> I think Debian pkgs are significantly more robust than other pkg systems
[04:15:37] <o11c> IMO Debian's python-* is a *good* example
[04:15:39] <andrewd18> but then again I run Debian so I'm a little biased :P
[04:15:42] <o11c> since it integrates flawlessly
[04:15:50] <strcat> andrewd18: they really aren't more robust...
[04:15:53] <sanxiyn> andrewd18: Yeah well, because it is quality controlled
[04:16:05] <sinsnare> oh i just noticed that the 'hello world' on rust-lang.org still uses 'do spawn' :p
[04:16:16] <ruzu> configure make install is all the packaging i need :D
[04:16:16] *** Quits: cgaebel (clark@moz-F9D89110.nyc.res.rr.com) (Ping timeout)
[04:16:20] <cmr> sinsnare: the home page targets releases, somewhat unfortunately.
[04:16:22] <sanxiyn> It mostly boils down to Debian maintainers doing work, and not any technical merit of system
[04:16:22] <strcat> debian doesn't backport many bug fixes, they backport security fixes
[04:16:22] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:16:33] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Ping timeout)
[04:16:39] <strcat> RHEL/CentOS have many backported bug fixes
[04:16:40] <sinsnare> cmr, oh.... well thats interesting!
[04:16:44] <sinsnare> ok then
[04:17:04] <sanxiyn> o11c: It integrates well now, it took like forever to get there
[04:17:06] <strcat> https://security-tracker.debian.org/tracker/status/release/stable and how can you take debian seriously when it has a long list of known vulnerabilities with fixes released ;p
[04:17:09] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[04:17:10] * strcat shrugs
[04:17:12] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Ping timeout)
[04:17:13] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[04:17:17] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[04:17:25] <sanxiyn> strcat: Well having security tracker is better than not having one :)
[04:17:45] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[04:17:45] <strcat> sanxiyn: this isn't a problem if you don't freeze pkg versions ;p
[04:18:02] <strcat> you don't need to rely on volunteers likely not involved in upstream development to backport critical fixes on their own time
[04:18:06] *** Quits: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net) (Ping timeout)
[04:18:09] *** Joins: sawrubh (uid6719@moz-5F4AA75A.irccloud.com)
[04:18:31] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:18:36] *** Joins: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net)
[04:20:15] <strcat> sanxiyn: for example, with a project like firefox, the new releases certainly have fewer bugs (especially with the ESR versions)
[04:21:03] <sanxiyn> Indeed it is true that Debian is probably worse for follow-upstream-as-fast-as-possible packages
[04:21:32] <strcat> using the mainline linux kernel is not great for stability, but that's not true in many cases
[04:21:32] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[04:22:26] <strcat> debian's kernel is terrible on new hw, and even old hw will have plenty of bugs that are already fixed ;P
[04:22:32] <strcat> but yeah, following along with linux kernel releases will break stuff
[04:22:33] <o11c> frankly, I "follow-upstream-as-fast-as-possible" often just means there is *no* stable release ever
[04:22:46] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:22:48] <strcat> o11c: depends. firefox/chrome don't land stuff if it's unstable, they back it out
[04:22:51] *** Joins: nstdloop_ (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[04:23:02] <o11c> so ... it's deal with the same bugs; or else deal with an infinite supply of new bugs
[04:23:16] <sanxiyn> (What Debian excels at is adopting important-but-not-maintained packages)
[04:23:37] <sanxiyn> For some of packages (I think login was one) Debian is practically an upstream now
[04:23:40] <o11c> strcat: you assume that the previous version of the patched code *was* stable
[04:23:41] <strcat> sanxiyn: or if you want a really stable workstation but for some reason want to use gnome/kde
[04:24:04] <sanxiyn> Also "man"
[04:24:16] <sanxiyn> Debian is an upstream of "man" utility because nobody else bothered
[04:24:21] <strcat> I feel more comfortable using i3 from master than .1 and .2 releases of gnome packages ;\
[04:24:42] <o11c> KDE4 was like that too
[04:24:46] <strcat> sanxiyn: they're also upstream for shadow, and it's poorly maintained garbage ;)
[04:24:49] *** Joins: depp (depp@500BAFC1.53465674.3C05E6CB.IP)
[04:24:50] <strcat> o11c: it still is
[04:24:57] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[04:25:02] <sanxiyn> strcat: :( beats nobody maintaining shadow...
[04:25:03] <strcat> they break lots of stuff on the .0 releases, and it takes a while to get fixed
[04:25:11] <strcat> sanxiyn: well, not really
[04:25:14] <o11c> nah, KDE 4.8 or so stopped being as terrible as KDE 4.2 was
[04:25:16] <sanxiyn> Really?
[04:25:20] <strcat> sanxiyn: there are people willing to maintain it, it's being absorbed into util-linux
[04:25:25] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[04:25:27] *** Quits: oxum (anonymous@55A7A5F0.B6DE35CB.520CDC98.IP) (Quit: Bye..)
[04:25:27] *** Joins: kvanb (kvanb@6B837AF3.9FF56AB5.1611EE05.IP)
[04:25:28] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[04:25:36] <strcat> sanxiyn: *shrug*
[04:25:38] <sanxiyn> I don't think all Linux distros basically maintaining their own forks of shadow is a good thing...
[04:25:42] <strcat> anyway that's not debian's fault
[04:25:42] *** Joins: oxum (anonymous@55A7A5F0.B6DE35CB.520CDC98.IP)
[04:25:49] <strcat> just a counterexample ;p
[04:25:58] <sanxiyn> strcat: Well if so the situation changed since Debian adopted abandoned shadow
[04:26:27] <sanxiyn> I also think Debian led effort to unify "libc-kernel-headers" thing all distros had little forks
[04:26:27] <strcat> sanxiyn: well they adopted it but no one is really maintaining it now anyway ;)
[04:26:29] <sanxiyn> etc etc
[04:26:42] *** Joins: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP)
[04:26:50] <strcat> adopting something if you aren't actually going to maintain it isn't great
[04:27:12] <sanxiyn> indeed
[04:27:19] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[04:27:47] <sanxiyn> I think in general Debian takes good care of softwares they adopted, but of course individual cases vary
[04:27:51] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[04:28:22] <strcat> imo it's the wrong approach though, I think stability should be part of the upstream development process
[04:28:36] <strcat> shielding users from that by being behind by 1-2 years just stops upstream from caring
[04:28:50] <strcat> they'll keep releasing garbage and letting distros accumulate ignored patches from their bug tracker
[04:28:53] * strcat shrugs
[04:29:10] <sanxiyn> strcat: True, but large scale social change isn't easy. Too bad.
[04:29:20] <strcat> sanxiyn: in open-source it's pretty easy, you fork ;)
[04:29:36] <strcat> or people abandon software
[04:29:37] <sanxiyn> strcat: Fork also needs manpower
[04:29:39] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[04:29:45] <sanxiyn> Debian: technical fixes to social problems
[04:29:46] <strcat> wireshark migrating to qt from gtk+, even though they just ported to gtk3
[04:29:47] <o11c> if you look at the Debian packaging infrastructure, it's entirely built around "modify upsteam packages by adding packages"
[04:29:48] <strcat> etc.
[04:30:00] <o11c> other distros are more like "add existing patches to the upstream pacakge"
[04:30:35] <sanxiyn> o11c: But it is still the case Debian is not entirely upstream. Ideally it should be. Hence technical fixes to social problems.
[04:30:57] *** Joins: mib_ix62rk (Mibbit@moz-F6E8DA4C.pppoe-dynamic.high-speed.ns.bellaliant)
[04:31:01] <sanxiyn> (Ditto for stability. VCS HEAD *should be* stable.)
[04:31:13] <o11c> but pretending it *is* is foolishness
[04:31:33] <strcat> you don't need to pretend, you can use better software
[04:32:10] <o11c> bwahaha
[04:32:28] <sanxiyn> o11c: True (I use Debian after all) but it is an argument with merit that "stablizing in distro" further motivates upstream to be more unstable
[04:32:44] <sanxiyn> In some sense this applies to Linux kernel
[04:32:55] <mib_ix62rk> Hello, question I am trying to use bindgen which had "extern crate ..." in it, yet when I try to compile it complains about expected { or mod. Do I need to do something to make extern crate work?
[04:33:12] <strcat> sanxiyn: it also means debian users aren't the ones finding the bugs
[04:33:26] <cmr> mib_ix62rk: update your rust.
[04:33:37] <strcat> and upstreams don't benefit much from bug reports using very old versions, with lots of changes
[04:33:38] <cmr> mib_ix62rk: bindgen is tracking master, you have something older.
[04:33:55] <strcat> for example, debian is going to package rust
[04:33:56] <mib_ix62rk> hrm okay
[04:34:09] <strcat> people *are* going to be using a 1-2 year old rust version and asking for help here + reporting known bugs, etc.
[04:34:17] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[04:34:23] <strcat> when you actually are upstream, that's not very fun
[04:34:43] <strcat> even if you do a stable release and do point releases
[04:34:48] <strcat> they're not going to be using that
[04:34:54] <sanxiyn> strcat: :( The theory is people are supposed to report bugs to Debian, not upstream, but people won't care. Right.
[04:35:17] <strcat> sanxiyn: well, either way upstream has fewer direct users ;), the software quality isn't as good as it could be
[04:35:19] <sanxiyn> (And Debian maintainers are supposed to analyze bugs and reproduce on the latest and report)
[04:35:33] <strcat> I acknowledge that distributions like CentOS and Debian are important for servers, or technically unsavvy users
[04:35:41] <sanxiyn> strcat: By users you mean unpaid beta testers :)
[04:36:08] <strcat> sanxiyn: sure, and that's how the quality improves - not everything is gnome/kde where they throw out and redo all the code every week
[04:36:17] <o11c> I use Debian testing right now, which is nice except during the freeze for release
[04:36:20] <sanxiyn> (Debian-maintainer reporting to upstream does work well when maintainer is resourceful, but...)
[04:36:31] <strcat> I happen to use a window manager with extensive unit tests and an upstream I can talk to over irc any day, for example
[04:36:39] <andrewd18> strcat: and that wm is... ?
[04:36:43] <strcat> i3
[04:36:52] * sanxiyn uses LXDE
[04:36:54] *** Quits: Merth (shaun@moz-E41B2C4D.dhcp.mdsn.wi.charter.com) (Ping timeout)
[04:36:58] <o11c> personally, as a user, I *hate* when I file a bug with a distro and get told to file it upstream
[04:37:13] *** Quits: valentin (Thunderbir@7F62EB68.9261D8F.FAF22AF7.IP) (Ping timeout)
[04:37:43] <strcat> o11c: why? upstream developers are actually able to fix it ;p, they're familiar with the code
[04:37:45] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[04:37:58] <andrewd18> I run Debian because I got tired of handling changes like filesystem reorgs and sysinitv->systemd changes manually
[04:38:02] <andrewd18> cough Arch cough
[04:38:03] *** Quits: Rym (y@2542C0EA.BF8845BF.51C6DE68.IP) (Ping timeout)
[04:38:08] <o11c> strcat: but I don't like having millions of username/password combos for upstream's bugtrackers
[04:38:16] <cmr> o11c: password managers...
[04:38:32] <cmr> I have a folder in keepass labeled "bugtrackers"
[04:38:40] *** Joins: Rym (y@2542C0EA.BF8845BF.51C6DE68.IP)
[04:38:49] <o11c> still annoying compared to just filing them in one place
[04:38:53] <o11c> even if Debian's is strange
[04:39:15] <strcat> o11c: filing them in one place where they're most likely to just sit until someone reports it upstream + it is fixed
[04:39:17] <strcat> ;p
[04:39:32] <strcat> and then that bug report tracks backporting the fix
[04:39:46] <o11c> incidentally, that is the biggest reason I use github for my own code
[04:39:56] <strcat> yeah, github is accessible
[04:39:59] <o11c> because github is big enough that lots of people have accounts they can file bug reports with
[04:40:04] <strcat> makes it easy for people to submit pull requests or issues
[04:40:18] <strcat> I pretty much just don't report bugs for software without bug trackers
[04:40:27] <o11c> people complain "but github's bug tracker doesn't support Feature X. You should run your own bugzilla/mantis/whatever"
[04:40:46] <sanxiyn> Debian entirely depends on maintainers doing work; so bug reports will rot if maintainer doesn't work. That's stating the obvious...
[04:40:48] <strcat> o11c: just be glad there isn't as much software with only a mailing list to report bugs now
[04:40:59] <strcat> a month later, no one remembers the bug exists
[04:41:01] <o11c> or fork upstream, put it on github, and *take* bug reports
[04:41:02] *** Quits: dranov (dranov@72F6F491.807AF119.A5830293.IP) (Client exited)
[04:41:16] <sanxiyn> By the way, I wrote bidirectional bug tracker notification system Debian is currently using
[04:41:18] <sanxiyn> (bts-link)
[04:41:23] <o11c> sanxiyn: yeah ... e.g. the GNU make package is abandoned right now
[04:41:33] <strcat> make's upstream is insane ;\
[04:41:38] <o11c> an absolutely essential package, but it just gets NMU'd
[04:41:52] <o11c> this is one thing that Ubuntu did better in a way ... they have  everything be MOTU
[04:42:00] <strcat> MOTU?
[04:42:01] <o11c> everybody's responsible for every package
[04:42:02] <sanxiyn> Because I didn't like that Debian bug isn't notified when linked upstream bug is fixed
[04:42:02] <sanxiyn> It is now
[04:42:16] <o11c> strcat: masters of the universe
[04:42:28] <o11c> universe = anything that's not a core package
[04:43:06] <sanxiyn> o11c: You mean for Ubuntu
[04:43:08] * sanxiyn never used Ubuntu
[04:43:19] <strcat> sanxiyn: on my laptop, I really have the least pain on a rolling release (and not debian sid or rawhide, because they're very unstable), I'd never do it for a server where uptime mattered
[04:43:27] *** Quits: brehaut (andrew@6D85C12E.2F6BE07D.613E47D1.IP) (Quit: brehaut)
[04:43:37] <sanxiyn> strcat: I run Debian Sid :)
[04:43:46] <sanxiyn> I guess I know how to unbreak when things break...
[04:43:48] *** Quits: nstdloop_ (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Connection reset by peer)
[04:43:51] <strcat> but having the latest version of every lib, programming tool (perf, gdb, gcc, clang, etc.) and so on is very nice
[04:43:59] <strcat> I really like the idea of NixOS
[04:44:17] <mcpherrin> nixos is neat.
[04:44:20] * sanxiyn tries to argue Debian Sid is not *that* unstable, and fails
[04:44:21] <o11c> I just pull a handful of non-criticla packages from sid if I know I can deal with it ... let the 10-day wait for testing catch the bugs
[04:44:22] <strcat> upgrades are fully pure - they don't modify the old packages
[04:44:32] <strcat> so you install an apache update, but you have the old apache version still around
[04:44:45] <strcat> otherwise, upgrading can damage the currently running services
[04:44:49] <o11c> unfortunately, I *really* need to install linux-3.13 and mesa-10 right now ...
[04:44:54] <strcat> for example firefox fails to exit properly if you upgrade it while it's running
[04:45:07] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[04:45:11] <o11c> chrome fails in strange ways too
[04:45:12] <eddyb> strcat: I may have seen NixOS and then completely failed to find it again
[04:45:19] <eddyb> o11c: huh, chrome?
[04:45:23] <strcat> https://nixos.org/nixos/
[04:45:31] <mcpherrin> I think chrome does better because it does the zygote thing
[04:45:31] <eddyb> strcat: well, the name is enough :P
[04:45:34] <o11c> I was going to try nix the other year, gave up because my VM wasn't working
[04:45:37] <strcat> for lazy people ;p
[04:45:45] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[04:45:48] <strcat> it's really nice ;)
[04:45:49] <eddyb> I've never had issues with chrome and updating while it's running
[04:45:58] <o11c> mcpherrin: it's gotten a bit better than the old days at this aspect
[04:46:12] * mcpherrin doesn't use chrome, no further opinions
[04:46:21] <o11c> (I still like chrome in the 5.0 to 10.0 days better - even if it had half the features, it was *fast*)
[04:46:23] <mcpherrin> I kinda hate browsers ;)
[04:46:23] *** Quits: sanxiyn (tinuviel@B575CDAA.A617DB17.A737E77F.IP) (Quit: Bye)
[04:46:28] <eddyb> and the always-crashing issue that made me switch to firefox for two weeks: my fault, something in my local config was broken
[04:46:32] <eddyb> mcpherrin: I know, right?
[04:46:41] <eddyb> everything but servo has issues of some sort or another
[04:46:44] *** Joins: j3rky (gmpreussne@moz-97180B8B.nc.res.rr.com)
[04:46:49] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[04:46:52] <eddyb> servo on the other hand is incomplete
[04:46:54] <mcpherrin> eddyb: I hate them more after having been an employee of Mozilla :p
[04:47:08] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Client exited)
[04:47:08] <o11c> see, I think we need to outright replace HTTP and HTML someday
[04:47:09] <ChrisMorgan> eddyb: Servo has the minor issue of not loading most pages properly!
[04:47:15] <mcpherrin> Now it's more a longing hate of the whole problem space
[04:47:28] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[04:47:29] <ChrisMorgan> o11c: good luck before WW3 destroys the Internet.
[04:47:34] <mcpherrin> ChrisMorgan: yeah but is it fast??
[04:47:45] * ChrisMorgan hasn't ever run Servo
[04:47:47] <mcpherrin> w3m is hella fast and it loads many pages close 'nuf
[04:47:58] <strcat> mcpherrin: as much as I like firefox/mozilla, I've done a temporary switch to chromium until firefox is way more secure/stable ;p
[04:48:17] <mcpherrin> I like vimperator
[04:48:23] <eddyb> strcat: I doubt that will/can ever happen
[04:48:23] <mcpherrin> though it's kinda shitty
[04:48:24] <strcat> I did too, but it breaks more and more
[04:48:40] <strcat> vimperator and pentadactyl got to the point where they caused me more pain than they relieved
[04:48:40] <eddyb> you can't just take a codebase that big and... change it
[04:48:41] <mcpherrin> I hear uzbl does better at being vimperator
[04:48:50] <strcat> mcpherrin: try dwb, it's great
[04:48:53] <eddyb> https://nixos.org/nixos/screenshots/nixos-kde42-1.png teehee dem penguins
[04:48:56] <ChrisMorgan> I never really liked Chrome, right from the start. There was a significant period where I used it on my USB drive rather than Firefox, but finally it slowed down enough and Firefox sped up enough that I could justify returning to Firefox.
[04:49:02] <eddyb> that's selling me already :D
[04:49:03] <strcat> uzbl is meh, it needs broken scripts in a dozen languages running
[04:49:17] <masonl> .. or luakit ;)
[04:49:26] <mcpherrin> strcat: eh, dwb looks linux-only?
[04:49:30] <mcpherrin> I don't use X11 :P
[04:49:36] <strcat> mcpherrin: yeah, linux-only, not X11-only
[04:49:37] <strcat> ;p
[04:49:45] <eddyb> strcat: so nix does a hash tree?
[04:49:45] <mcpherrin> oh can I run it in wayland :o
[04:49:47] <eddyb> that's... smart
[04:49:54] <strcat> mcpherrin: yes, most of the gtk webkit browsers do
[04:50:01] <mcpherrin> strcat: hawt pandas
[04:50:06] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[04:50:13] <eddyb> kf5 wants to drop X11 support completely
[04:50:13] <strcat> qt's webkit stuff does too
[04:50:21] <strcat> although qt is switching to blink
[04:50:25] <eddyb> (using qt5)
[04:50:33] <mcpherrin> I use OS x/windows/linux daily so it's kinda annoying to use different browsers on each
[04:50:48] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[04:50:55] <strcat> mcpherrin: anyway I pretty much just use chromium because it puts each site instance in a nice sandbox... other than that, firefox and chromium aren't much different to me
[04:51:05] <strcat> and the sandbox is only *really* nice on linux...
[04:51:08] <eddyb> X is a dinosaur past its lifespan
[04:51:21] <strcat> on windows, an exploit in that renderer has the entire NT kernel surface area to attack
[04:51:36] <mcpherrin> eddyb: X is a dinosaur, and wayland is bronze age
[04:51:44] <strcat> sandboxed flash is nice (shumway is neat but it doesn't work yet ;p)
[04:51:44] <mcpherrin> some day we'll get modern windowing and graphics on linux
[04:51:48] <eddyb> haha
[04:51:58] <eddyb> mcpherrin: but is there an OS with anything "modern" though?
[04:52:12] <eddyb> I can't imagine anything better without being rust-only
[04:52:27] *** Quits: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net) (Connection reset by peer)
[04:52:28] <ChrisMorgan> eddyb: including the kernel?
[04:52:31] <strcat> mcpherrin: wayland is nicer than nearly anything else
[04:52:42] <eddyb> then you can have some nice API design and take some liberties wrt safety
[04:52:56] *** Joins: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net)
[04:52:59] * strcat shrugs
[04:53:00] <eddyb> trusting code containing no "unsafe" keywords, etc.
[04:53:06] <cmr> eddyb: I don't think anything in idiomatic rust will ever have a nice API
[04:53:06] * ChrisMorgan contemplates an OS where Rust is truly the only language
[04:53:10] <strcat> mcpherrin: it's essentially already modern but X11 is there as unused legacy cruft
[04:53:16] <strcat> mcpherrin: applications don't render through X11 anymore
[04:53:17] <eddyb> cmr: that's just grim :(
[04:53:19] <strcat> they use dri
[04:53:23] <strcat> in wayland, they also use dri ;p
[04:53:37] <cmr> eddyb: a nice API needs to have forward ABI compataibility and be interactible with C
[04:53:50] <eddyb> cmr: why C?
[04:53:56] <eddyb> in a Rust-only OS?
[04:53:59] <cmr> eddyb: because it's the lowest common denominator.
[04:54:16] <cmr> So by Rust-only you're going to exclude all software ever written?
[04:54:19] <eddyb> C has to die at some point
[04:54:30] <strcat> mcpherrin: linux happens to have the fastest intel drivers atm which matters for a laptop ;p
[04:54:31] <eddyb> it can't live one forever
[04:54:31] <cmr> The language might, but I doubt the ABI ever well.
[04:54:37] <eddyb> everybody dies
[04:55:04] <mcpherrin> strcat: I think some of the mobile stuff has nicer graphics stacks than any of the desktop thing
[04:55:05] <cmr> (or an extension of the ABI that removes silliness like enums and bitfields)
[04:55:14] <mcpherrin> I don't know details though
[04:55:23] <strcat> mcpherrin: the current linux graphics stack is really new, and it's used on mobile too
[04:55:36] <strcat> drm, dri2/dri3, etc.
[04:55:39] <mcpherrin> I also mean how graphics cards work
[04:55:44] <strcat> ah
[04:55:46] <mcpherrin> like, ogl
[04:55:57] <strcat> mcpherrin: well, there's opengl es on the desktop too
[04:56:00] <mcpherrin> and how accelleration is tied to spewing it to a monitor
[04:56:01] <eddyb> cmr: this is one of the reasons I've kept working on wiREd. though it's obvious that even if I continue with r3, people might run past me with better solutions. which isn't necessarily a bad thing
[04:56:08] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[04:56:31] <mcpherrin> This is way outside my area of things I know about so don't listen too hard to me
[04:56:49] <eddyb> cmr: once you can reliably get *some* form of LLVM IR, you can produce semi-safe Rust code or at least  recompile that IR with more optimizations and different rules
[04:57:02] <strcat> mcpherrin: tizen and jolla use wayland, and they're way beyond android/ios is terms of being modern ;p
[04:57:04] <mcpherrin> Especially since I know there's people who know more reading this channel
[04:57:13] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[04:57:13] *** ChanServ sets mode: +o tjc
[04:57:32] <eddyb> cmr: you can have wrappers like wine's libs, but acting through LTO to basically do pattern replacement
[04:58:18] *** Quits: victorporof_ (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Quit: victorporof_)
[04:58:37] <strcat> mcpherrin: in the ARM world you usually have a really crappy closed GPU driver :(
[04:58:47] <strcat> lots of them are GPL violations too
[04:59:08] <mcpherrin> strcat: heh, yeah :S
[04:59:12] <ruzu> dem accusations!
[04:59:16] <eddyb> sue all the things!
[04:59:23] <mcpherrin> Nvidia has some neat things in mobile
[04:59:25] <ruzu> isn't that slander
[04:59:36] <eddyb> ruzu: why would it be?
[04:59:39] <mcpherrin> PowerVR is kinda cool.
[04:59:55] <mcpherrin> I like their tile-based stuff.
[04:59:58] <strcat> mcpherrin: meh
[04:59:59] <ruzu> maybe you have to know it's false rather than just asserting speculation
[05:00:04] <ruzu> unless there's known truths...
[05:00:06] <strcat> I hope intel wipes the floor with them tbh
[05:00:34] <eddyb> ruzu: sheesh
[05:00:36] <strcat> I want open gpu/wifi drivers... which intel does (except the times they outsourced their GPU in the past)
[05:00:47] <eddyb> ruzu: there is no speculation in what strcat said
[05:00:48] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Input/output error)
[05:00:50] <mcpherrin> Though Intel is un-fun for embedded developers :/
[05:00:57] <strcat> intel is a top linux kernel contributor too
[05:01:08] <strcat> wayland, dri3, etc. is pretty much their baby
[05:01:13] <eddyb> strcat: that memory safety
[05:01:16] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[05:01:24] *** Joins: brontron (Mibbit@moz-C8D86903.tc.ph.cox.net)
[05:01:25] <mcpherrin> they are kinda cranky about people writing their own BIOSes
[05:01:26] <ruzu> eddyb: i wouldn't know... other than it's interesting how you know a closed source binary is a gpl violatior
[05:01:27] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[05:01:34] <strcat> I don't know *why* they contribute so much to open-source, but obviously it suits their evil motives and that's okay with me
[05:01:36] <mcpherrin> (for small customers at least; we aren't Chromebooks)
[05:01:41] <eddyb> so much paging craziness going into it
[05:02:05] <strcat> ruzu: you can look and see that it's using gpl symbols
[05:02:20] *** Quits: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:02:22] <eddyb> haha that simple? I couldn't have guessed it
[05:02:39] <ruzu> sue all of the things
[05:02:41] <eddyb> (I was thinking more on the lines of leaks and reverse engineering)
[05:02:42] <strcat> nvidia is pretty much a gpl violator too, because wrapping gpl symbols with a permissive wrapper and using that doesn't mean it's not a derivative
[05:02:43] *** Quits: heftig (heftig@moz-C206A7B2.dip0.t-ipconnect.de) (Ping timeout)
[05:03:04] <strcat> but they aren't brazen enough to do it directly
[05:03:10] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Ping timeout)
[05:03:19] <eddyb> strcat: but that is pretty much right on the definition of derivative
[05:03:20] <strcat> the nvidia installer builds a shim
[05:03:26] <strcat> eddyb: yes but the users build the shim afaik
[05:03:37] <strcat> their lawyers obviously signed off on it
[05:03:50] <ruzu> i imagine it could be described as "circumstantial at best"
[05:03:52] <eddyb> clever. I remember something similar with the ATI fglrx
[05:03:54] <strcat> it's still likely a gpl violation and someone could probably win a lawsuit
[05:03:56] <ruzu> "we just like the symbol names"
[05:03:56] *** Quits: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au) (Ping timeout)
[05:04:13] <ruzu> er, maybe i'm thinking of lgpl
[05:04:28] <strcat> ruzu: lgpl lets you make a proprietary derivative work if users can link themselves
[05:04:39] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[05:04:41] <mcpherrin> strcat: What do you think would happen if they won a lawsuit? I don't think nVidia would open source it... most you'd do is get them to pull their linux driver and pay damages...
[05:04:45] <strcat> but the linux kernel has gplv2 (not lgpl) symbols that they need
[05:05:07] <strcat> mcpherrin: they'd also have to stop.
[05:05:11] <eddyb> mcpherrin: so get some money and lose their drivers?
[05:05:25] <eddyb> meh why haven't we reverse engineered *everything* by now?
[05:05:27] <strcat> mcpherrin: they probably can't open-source it anyway
[05:05:28] <strcat> even if they wanted
[05:05:40] *** Quits: arturo1 (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[05:05:41] <mcpherrin> strcat: oh yeah, I know people at nVidia, we've chatted about this sort of thing
[05:05:46] <strcat> AMD actually puts a fair bit of work into open-source drivers, because they don't actually have the rights to all of their binary blob
[05:05:48] * eddyb kicks that guy who wanted to make a decompiler over an year ago and didn't manage to do much
[05:05:50] <mcpherrin> it's basically impossible :P
[05:05:54] <eddyb> such a slacker
[05:06:03] <strcat> on some GPUs, AMD is up to 70-80% perf with the open-source driver now despite it having a dev team of 3-4 people
[05:06:20] <ruzu> well, if you've distributed the binary, doesn't that mean an obligation is in place to provide the code regardless
[05:06:22] <andrewd18> I'm playign Payday2 on the Mesa10.1 oss drivers right now, in fact
[05:06:23] <strcat> although intel has perf parity (sometimes faster/slower than the closed source windows one, depends on the month ;p)
[05:06:39] <andrewd18> woo AMD
[05:06:44] <strcat> ruzu: you have an obligation to give the source to the users you distributed it to
[05:06:49] <eddyb> strcat: racing condition between the driver dev teams?
[05:07:06] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:07:13] <eddyb> "racing" and "driver" in the same sentence. lol
[05:07:43] <ruzu> so they couldn't avoid giving the source, nor post facto change the license, which means it could be given by recipients to the community...maybe?
[05:08:17] <strcat> ruzu: if someone actually sued them and won (unlikely imo), I think they'd probably have to pay damages and stop distributing it
[05:08:42] <ruzu> past recipients can't demand the code?
[05:08:44] <mcpherrin> I think the closed source drivers existing is better than no drivers existing, unfortunately
[05:08:52] <ruzu> or i guess that's what the fine is
[05:09:01] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[05:09:09] <strcat> ruzu: well there's not a specific fine in most countries afaik, that's the issue
[05:09:20] <strcat> lots of people violate the busybox/ffmpeg licenses too
[05:09:44] <strcat> you'd probably have to prove there were damages
[05:10:02] * mcpherrin has probably violated the GPL :-(
[05:10:03] <strcat> to make them care at least
[05:10:23] <mcpherrin> fortunately not at the current job
[05:10:47] <strcat> ruzu: and GPLv2 vs. GPLv3 is different ;)
[05:10:54] *** Joins: heftig (heftig@moz-A1C2AAAA.dip0.t-ipconnect.de)
[05:10:59] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[05:11:08] <o11c> it's a typical case of "it's illegal, but we're better off giving it a pass"
[05:11:17] <strcat> since with GPLv3 you also have to release the source if you ship them a device, not just a binaryt
[05:11:21] <o11c> same thing happens with OpenSSL all hte time ... it happened with Android ...
[05:11:23] <strcat> which is why apple hates it
[05:11:37] <strcat> yep, cost-benefit analysis
[05:11:41] <strcat> they have enough money that they don't care.
[05:11:54] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[05:12:41] *** Joins: claudiu (claudiu@moz-F69B678E.thefacebook.com)
[05:14:43] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[05:14:49] <strcat> android is sad anyway, google is closing it all up as 'google play services' and the drivers are rarely open ;s
[05:15:19] *** Joins: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net)
[05:15:44] <tiffany> android is what happens when google decides to close source everything instead of gpling it to achieve their supposed goal of reducing fragmentation
[05:16:25] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:16:28] <mcpherrin> aww yeah my compile @ work just broke the 12 hour mark
[05:16:30] <strcat> well they want control, gpl doesn't really give them that
[05:16:31] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[05:16:42] <ruzu> i'm not a google true believer anymore :\
[05:16:44] <strcat> I really doubt they care if they can merge back in changes amazon makes
[05:16:56] <andrewd18> mcpherrin: wtf are you compiling?
[05:17:06] <eddyb> not Rust, that's for sure
[05:17:06] <strcat> they just don't want a company like amazon to be able to use it easily in the first place, unless they're going to ship google services
[05:17:08] <strcat> ;s
[05:17:16] *** Quits: huhlig (sid17687@moz-A42E5B7B.irccloud.com) (Ping timeout)
[05:17:16] *** Quits: patrikstenmark (sid16326@moz-A42E5B7B.irccloud.com) (Ping timeout)
[05:17:16] *** Quits: abinader (sid21713@moz-A42E5B7B.irccloud.com) (Ping timeout)
[05:17:16] *** Quits: jack (sid19593@moz-A42E5B7B.irccloud.com) (Ping timeout)
[05:17:16] *** Quits: jzelinskie (sid17772@moz-A42E5B7B.irccloud.com) (Ping timeout)
[05:17:19] <eddyb> (no trust, even)
[05:17:27] <mcpherrin> andrewd18: an entire linux distribution basically :P
[05:17:42] *** Quits: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[05:17:42] *** Quits: derek_c (derek@moz-6942553A.cit.cornell.edu) (Ping timeout)
[05:17:45] <andrewd18> and here I was thinking JRE 7 from scratch :P
[05:17:53] <mcpherrin> www.aristanetworks.com/en/products/eos‎
[05:18:34] <eddyb> "In-service software upgrades (ISSU) of individual modules" sounds like StarCraft for some reason
[05:18:34] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:18:49] <mcpherrin> haha ISSU is such a funny term.
[05:19:00] *** Quits: jdm (jdm@moz-E41E4269.dsl.teksavvy.com) (Quit: Lost terminal)
[05:19:09] <strcat> ruzu: meh, google and apple are not really different - they contribute to open-source when it benefits them and no more
[05:19:10] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[05:19:23] <strcat> intel contributes to open-source because they have too much money and don't know what to do with it
[05:19:24] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[05:19:27] <mcpherrin> it's a fancy Cisco word for "we can /etc/init.d/service stop; (upload new binary), /etc/init.d/service start
[05:19:27] *** Joins: jzelinskie (sid17772@moz-A42E5B7B.irccloud.com)
[05:19:28] *** Joins: huhlig (sid17687@moz-A42E5B7B.irccloud.com)
[05:19:46] <tiffany> "multi-process state sharing" mmap with MAP_SHARED?
[05:19:58] <eddyb> mcpherrin: when can you *not* do that?
[05:20:00] <strcat> ruzu: can't expect more from a 'public' corporation ;p
[05:20:06] <mcpherrin> eddyb: when you're cisco
[05:20:12] <eddyb> hahaha
[05:20:37] <mcpherrin> cisco ios isn't a real operating system
[05:20:39] <akhosrav> business model: pretend it is difficult so you can jack up the price of enterprise contracts
[05:20:56] <eddyb> akhosrav: I should keep that in mind
[05:21:21] <strcat> mcpherrin: does it even maintain connections, etc. when it does that? ;p
[05:21:26] <mcpherrin> strcat: yeah!
[05:21:38] <mcpherrin> strcat: heck we can even reboot the kernel and keep certain types of traffic flowing
[05:21:40] <eddyb> I got $700 on a small time 3D toy. and less for larger things. I'm still a noob at haggling & stuff
[05:21:43] <andrewd18> akhosrav: seems legit
[05:21:54] <mcpherrin> since we have redundant CPUs
[05:22:01] <eddyb> mcpherrin: haha what?
[05:22:13] <strcat> mcpherrin: kexec and systemd reexec work well for me ;p
[05:22:16] *** Quits: brontron (Mibbit@moz-C8D86903.tc.ph.cox.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:22:25] <mcpherrin> strcat: so much kexec :D
[05:22:27] <strcat> but most services are too dumb to not cause dropped connections
[05:22:28] * ChrisMorgan wonders how many servers there still are in the world with uptime of over 20 years.
[05:22:28] <eddyb> that sounds interesting. hardware load balancing?
[05:22:50] <mcpherrin> The basic architecture of our big modular switches is there are two "supervisors"
[05:22:53] <strcat> socket activation lets you do neat stuff
[05:23:05] <eddyb> mcpherrin: what do you do when you have to update the supervisors :P?
[05:23:09] <mcpherrin> they've got a hardware mux 
[05:23:19] <eddyb> moose?
[05:23:21] <mcpherrin> so they can pass peripherals from one computer to the other
[05:23:29] <ChrisMorgan> mcpherrin: and when you have to update the hardware mux?
[05:23:33] <mcpherrin> ChrisMorgan: you don't.
[05:23:37] <mcpherrin> :)
[05:23:39] * eddyb shouldn't be this early on IRC
[05:23:45] <eddyb> mcpherrin: but what if it starts smoking!
[05:23:53] <eddyb> (smoking moose)
[05:23:56] <ChrisMorgan> eddyb: stick up a "no smoking" sign
[05:23:58] <mcpherrin> eddyb: Well then we've got Multi-chassis Link Aggregation
[05:24:09] <mcpherrin> and you can take one chassis out of service :P
[05:24:10] <tiffany> chrismorgan: I imagine most really old IBM mainframes have absurd uptimes of that scale
[05:24:16] <cmr> eddyb: mux is pronounced mucks, short for multiplexing.
[05:24:26] *** Quits: Rym (y@2542C0EA.BF8845BF.51C6DE68.IP) (Ping timeout)
[05:24:37] *** Joins: abinader (sid21713@moz-A42E5B7B.irccloud.com)
[05:24:38] *** Joins: patrikstenmark (sid16326@moz-A42E5B7B.irccloud.com)
[05:24:58] <eddyb> cmr: aww I didn't check the pronunciation, just hoped I get close enough
[05:25:11] *** Quits: mib_ix62rk (Mibbit@moz-F6E8DA4C.pppoe-dynamic.high-speed.ns.bellaliant) (Quit: http://www.mibbit.com ajax IRC Client)
[05:25:27] <eddyb> (I did know about multiplexers)
[05:25:48] <strcat> mcpherrin: red hat has their really scary patch-kernel-while-running-stuff ;p
[05:26:02] <strcat> kexec? who has time for that...
[05:26:07] <mcpherrin> strcat: hah, I know somebody who works on that.  it's pretty cool
[05:26:27] *** Quits: andrewd18 (andrew@moz-DAC9D29F.wi.res.rr.com) (Quit: Leaving.)
[05:26:36] <mcpherrin> wait kgraft is suse
[05:26:41] <strcat> ksplice?
[05:26:45] <eddyb> did someone say suse?
[05:26:46] <strcat> I think there are 3
[05:26:51] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[05:26:51] <mcpherrin> right, ksplice is redhat
[05:27:00] <mcpherrin> I think the person I know she does work on ksplice :P
[05:27:08] <mcpherrin> the names are all jumbled in my head ;)
[05:27:10] <eddyb> cmr: mux makes me think of a trapezoid with side inputs and then input/output have one of those slashes with a number (indicating width)
[05:27:20] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Ping timeout)
[05:27:28] <mcpherrin> eddyb: pretty sure it's a trapezoid in our circuit diagram :P
[05:27:37] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[05:27:41] <sp3d> kpatch is the redhat one
[05:27:50] <sp3d> ksplice is the oracle one
[05:28:07] *** Quits: j3rky (gmpreussne@moz-97180B8B.nc.res.rr.com) (Quit: Leaving)
[05:28:12] <mcpherrin> it's nicer to just design your hardware so you don't have to worry about such nonsense :)
[05:28:16] *** Quits: canhtak (canhtak@moz-9F5D2CD3.wl.t.ulaval.ca) (Quit: canhtak)
[05:28:32] *** Joins: W0rmDr1nk (wormdrink@moz-89570CE2.access.mtnbusiness.co.za)
[05:28:34] <W0rmDr1nk> jo
[05:28:46] <strcat> mcpherrin: bugs drawn on silicon are so much better ;p
[05:28:49] <W0rmDr1nk> what ?!
[05:28:54] <W0rmDr1nk> 457 peoples
[05:28:58] <eddyb> https://xkcd.com/1341/ no atom.io references? too soon?
[05:29:21] <eddyb> W0rmDr1nk: and none of them play rust
[05:29:42] <mcpherrin> strcat: hardware bugs are a pain
[05:29:44] <W0rmDr1nk> eddyb, ?
[05:29:46] <cmr> eddyb: I do :(
[05:29:48] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[05:29:57] <strcat> cmr: heretic!
[05:30:00] <mcpherrin> I don't know how anybody writes drivers for hardware without docs
[05:30:03] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[05:30:17] <mcpherrin> actually rust-the-game looks maybe fun.  I might try it some time...
[05:30:27] <cmr> it's not that great.
[05:30:27] <eddyb> cmr: do you draw big R's in the sand?
[05:30:28] <cmr> IMO
[05:30:29] <strcat> mcpherrin: like the nouveau devs? ;p
[05:30:37] <eddyb> cmr: I mean, might as well propaganda
[05:30:42] <mcpherrin> strcat: yeah man that is crazy
[05:30:43] <W0rmDr1nk> ehrm - I'm unclear on something
[05:31:00] <W0rmDr1nk> the self hosting is based on older llvm binary
[05:31:07] *** Quits: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP) (Ping timeout)
[05:31:09] <W0rmDr1nk> but how can this be cross platform ?
[05:31:20] <eddyb> "older"?
[05:31:24] <strcat> W0rmDr1nk: llvm (and rustc) are cross compilers
[05:31:37] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[05:31:44] <W0rmDr1nk> llvm - sure - that solves the problem of binary compatibility
[05:31:46] <cmr> W0rmDr1nk: it's not very robust -- it does depend on a minimum system requirement. the snapshots are built with very old systems, for this very reason.
[05:31:59] <W0rmDr1nk> but how does that get you from libc to windoze messthing
[05:32:10] <eddyb> it's not that simple
[05:32:13] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[05:32:22] <eddyb> (mingw is probably the right answer to the right question)
[05:32:25] <W0rmDr1nk> I mean llvm abstracts HW layer - its not like JVM
[05:32:29] <W0rmDr1nk> I see
[05:32:33] <strcat> I'm on linux right now and have a toolchain for compiling 32/64-bit windows binaries (+ a bunch of libs for it like boost)
[05:32:44] <W0rmDr1nk> strcat, that is not really the question
[05:32:45] <strcat> W0rmDr1nk: rustc itself is a cross-compiler
[05:32:46] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[05:32:59] *** vfetwnuncszu is now known as dcrewi
[05:32:59] <ruzu> i love mingw.  well, i hate that i have to love it, but i love it.
[05:33:06] <W0rmDr1nk> ok wait - let me start again - just to make sure we all on same page
[05:33:15] <strcat> ruzu: mingw-w64 at least ;p
[05:33:17] <eddyb> if you don't need libraries, you can compile to any platform, even mips AFAIK
[05:33:27] <strcat> normal mingw, I don't have much love for
[05:33:27] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[05:33:59] <cmr> eddyb: we "support" MIPS, but I don't think it has been tested in over a year.
[05:34:03] <W0rmDr1nk> If I want to build rustic I need rustic - I can download older rustic which is LLVM bytecode - then run it - this older rustic can only run though against the libraries against which it was compiled - i.e. if you have incompatibile libs its no go
[05:34:09] <eddyb> cmr: hehe
[05:34:17] <eddyb> W0rmDr1nk: s/rustic/rustc/
[05:34:19] <strcat> W0rmDr1nk: the snapshot isn't LLVM bytecode
[05:34:21] <strcat> it's a rustc binary
[05:34:29] *** Joins: edwardw (edwardw@B3728BF8.E2F45E91.B9C6B12A.IP)
[05:34:45] <W0rmDr1nk> strcat, for what platform ? built against which libs ?
[05:34:45] <eddyb> completely statically linked to its rust dependencies
[05:34:50] <eddyb> W0rmDr1nk: *each* platform
[05:34:51] <W0rmDr1nk> I see
[05:35:08] <W0rmDr1nk> ok fine
[05:35:16] <eddyb> and dynamically linked against old libary versions (that's what cmr was saying)
[05:35:20] <strcat> W0rmDr1nk: the linux kernel and glibc are backwards compatible with old binaries (of any age), for example
[05:35:28] *** Quits: claudiu (claudiu@moz-F69B678E.thefacebook.com) (Input/output error)
[05:35:57] <W0rmDr1nk> yeah - I'm not really sure that is something I would bet on
[05:36:20] <eddyb> W0rmDr1nk: it's by design
[05:36:22] <W0rmDr1nk> actually I'm pretty sure if you built against libc x headers then running against libc y is not the safest thing
[05:36:25] <strcat> linus says he actually runs some binaries from the early linux days as part of testing a release
[05:36:32] <strcat> W0rmDr1nk: it is safe when y > x
[05:36:43] <strcat> you can't compile against a new glibc and run with an old glibc
[05:36:46] <eddyb> there's a lot of old cruft they could easily remove if they wouldn't have to *ensure* backwards compat
[05:36:46] <strcat> you can do the reverse
[05:36:48] <eddyb> just like windows
[05:37:11] <strcat> it's a hard guarantee, if you can't run an old binary and it didn't depend on undefined behaviour, it is a bug you can report
[05:37:12] <mcpherrin> windows could get rid of the special case for simcity in free()
[05:37:25] <eddyb> lol?
[05:37:28] <mcpherrin> but we like simcity so they don't
[05:37:38] <strcat> eddyb: windows special cases based on binary names across the whole win32 api ;p
[05:37:46] <strcat> you can get weird behaviours by renaming
[05:37:52] <eddyb> you must be kidding me
[05:37:58] *** Joins: claudiu (claudiu@moz-F69B678E.thefacebook.com)
[05:37:58] <edwardw> robin hood hashmap landed? hurray
[05:38:06] <eddyb> that's a waste of CPU cycles
[05:38:09] <mcpherrin> eddyb: when you gotta be compatible...
[05:38:15] <strcat> eddyb: wine has to copy all of these bugs
[05:38:15] <eddyb> comparing strings is not cheap
[05:38:19] <eddyb> strcat: hahahaha
[05:38:19] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[05:38:23] <eddyb> that explains why it's so hard
[05:38:26] <strcat> eddyb: seriously, that's why wine is such a hard project
[05:38:28] <strcat> yeah
[05:38:40] <mcpherrin> has somebody ever documented all these special cases
[05:38:44] <cmr> eddyb: rust used to experience this issue.
[05:38:44] <strcat> the win32 api is barely documented, but they aren't just implementing the documented behaviour
[05:38:45] <eddyb> recompilation has to make that faster
[05:38:48] <strcat> mcpherrin: well, wine does
[05:39:05] <cmr> eddyb: we had bugs because we didn't ship an application manifest and one of our tests was one of the special-cased names.
[05:39:07] <mcpherrin> strcat: I mean in a concise webpage really, organized for humour/interest reading
[05:39:09] <strcat> mcpherrin: wine implements what specific applications need, rather than just trying to implement the win32 api in the dark
[05:39:10] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[05:39:11] <strcat> ah
[05:39:15] <eddyb> by DCE-ing special cases when they're not needed
[05:39:19] <strcat> mcpherrin: there's a ms employee with a nice blog
[05:39:21] <cmr> eddyb: if you have a manifest, it doesn't do any special casing at all.
[05:39:28] <cmr> strcat: The Old New Thing?
[05:39:29] <strcat> mcpherrin: http://blogs.msdn.com/b/oldnewthing/
[05:39:32] <cmr> mm
[05:39:32] <strcat> ofc
[05:39:38] <mcpherrin> good blog, yes
[05:39:46] <mcpherrin> lots of it over my head as I don't speak microsoft
[05:39:48] <strcat> mcpherrin: anyway it's awful
[05:39:52] <W0rmDr1nk> mcpherrin, re documented special cases: its called the source code ;)
[05:39:58] <eddyb> "Welcome to 1995. Enjoy your stay." no thanks
[05:40:00] *** Joins: brandonson (SingingBoy@610D90A5.EE9B234.1ECA502.IP)
[05:40:04] *** Joins: nlminhtl (ignotus@27EDE6E3.D40C3436.2D85221C.IP)
[05:40:04] <strcat> mcpherrin: it's pretty much all awful. even the current behaviour
[05:40:06] <strcat> especially paths.
[05:41:08] *** Quits: lpy (lpy@F7AFA3.F09091A8.1348A864.IP) (Connection reset by peer)
[05:41:18] <strcat> mcpherrin: PATH_MAX is 260, and almost all the APIs were hardcoded to use PATH_MAX ansi 8-bit (*not* UTF-8 like OS X and windows) or PATH_MAX wchar_t
[05:41:30] <strcat> but paths can be 32767 long on windows
[05:41:43] <mcpherrin> strcat: and then there's \\?\
[05:41:44] *** Joins: lpy (lpy@F7AFA3.F09091A8.1348A864.IP)
[05:41:58] <strcat> mcpherrin: yep. which removes relative paths and ./..
[05:42:03] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[05:42:04] <strcat> and forward slashes
[05:42:10] <strcat> but can at least give full length paths
[05:42:11] <strcat> ...
[05:42:24] <strcat> mcpherrin: also some apis have a per-drive cwd
[05:42:34] <eddyb> "some"?
[05:42:36] <strcat> some.
[05:42:39] *** Joins: PumpMagic (PumpMagic@E670071A.FEA6CF84.B8C5454C.IP)
[05:42:40] <eddyb> don't they all?
[05:42:40] <mcpherrin> strcat: and you can have two files with the same name but different cases!
[05:42:42] <strcat> eddyb: no
[05:42:48] <mcpherrin> strcat: which breaks other tools left and right
[05:43:04] <strcat> mcpherrin: yeah but that goes both ways ;), some tools depend on it and break without it
[05:43:07] <eddyb> strcat: reminds me of my confusion when I did "cd D:\MyStuff"
[05:43:10] <W0rmDr1nk> so I would guess from the amount of users in here that rust has take off quite well
[05:43:16] <eddyb> strcat: and had to do "D:" afterwards to actually switch
[05:43:22] <strcat> I feel bad for Eridius who had to deal with this stuff for rust
[05:43:25] <strcat> and it's not done ;)
[05:43:33] <mcpherrin> strcat: OS X's selectable file sensitivity is pretty terrible too
[05:43:51] <mcpherrin> I know plenty of people who end up having two filesystems depending on what apps expect
[05:43:54] <strcat> mcpherrin: OS X and windows also have obsolete unicode standards baked into the fs
[05:44:11] <mcpherrin> strcat: eugh yeah UTF-16 and UCS-2 shit everywhere
[05:44:13] <strcat> old normalization algorithms and all
[05:44:18] <strcat> mcpherrin: yep ;\
[05:44:37] <mcpherrin> strcat: I'm going back to my happy land of "embedded" devices with ASCII only
[05:44:39] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[05:44:40] <strcat> mcpherrin: I've been writing a cross-platform program in C++ and whenever I have to do something not covered by boost I cry
[05:45:06] <mcpherrin> so glad "cross platform" for me is different versions of the linux kernel
[05:45:09] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[05:45:34] <strcat> doesn't help that C++'s file API is totally broken so you have to use the C API, yet on windows that means _wfopen and so one
[05:45:36] <strcat> so on*
[05:46:00] <mcpherrin> and that's when you give up and use cygwin :)
[05:46:11] <strcat> I despise UTF-16. why can't everything be UTF-8 :(
[05:46:20] <mcpherrin> -16 is the worst
[05:46:24] <strcat> any network connection or file is bound to be UTF-8
[05:46:34] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[05:46:49] <strcat> so why would all of the parameters to functions be UTF-16 (often UCS2 masquerading as UTF-16)
[05:46:51] *** Joins: derek_c (derek@moz-16A6DFBC.cit.cornell.edu)
[05:46:53] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[05:47:06] <utkarsh> is it possible to have unhygienic macros in Rust? or a way to give multiple macros access to a local mutable variable without passing it explicitly to every macro call?
[05:47:09] <strcat> mcpherrin: I dunno, it seems actively malicious for microsoft to not implement CP_UTF8 ;\
[05:47:22] <strcat> mcpherrin: like, they actually *hate* people who develop windows programs
[05:47:25] <strcat> and need them to suffer
[05:47:26] * strcat sighs
[05:47:31] <eddyb> utkarsh: put the macro in the function
[05:47:44] <eddyb> utkarsh: after the definition of the local
[05:47:49] <strcat> or at least they think making it painful to write portable code means people won't support other OSes
[05:48:00] <strcat> when really, I think it means good software (like rust!) is sub-par on windows ;p
[05:48:09] <utkarsh> eddyb, I don't think that works... let me try again
[05:48:15] <eddyb> utkarsh: it does
[05:48:18] <mcpherrin> strcat: From what I understand about Microsoft culture, big changes like that are impossible to make
[05:48:22] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[05:48:30] <strcat> mcpherrin: but it's not really a big change, they just have to *allow* it
[05:48:43] <strcat> I bet it's like 1000 LOC to implement CP_UTF8
[05:48:52] * strcat shrugs
[05:49:00] <mcpherrin> strcat: But it probably cross-cuts a bunch of business units
[05:49:05] <strcat> mcpherrin: heh
[05:49:09] <mcpherrin> you'd need a dozen middle managers to sign off on it
[05:49:17] <mcpherrin> a QA team assigned
[05:49:24] <mcpherrin> ten thousands lines of regression tests written
[05:49:26] <eddyb> "what does this button do"
[05:49:35] <mcpherrin> five hundred pages of documentation
[05:49:40] <cmr> utkarsh: note that the macro needs to come lexically *after* the variables it "captures"
[05:49:53] <mcpherrin> a four week training program for your customer service folk...
[05:50:00] <mcpherrin> so yeah, not gonna happen :P
[05:50:07] <eddyb> mcpherrin: enough, I haven't had breakfast yet
[05:50:10] <eddyb> and it's just making me sick
[05:50:14] *** Quits: jzelinskie (sid17772@moz-A42E5B7B.irccloud.com) (Ping timeout)
[05:50:21] <strcat> mcpherrin: and a bunch of interns to write really terrible docs?
[05:50:23] <strcat> well no
[05:50:28] *** Quits: abinader (sid21713@moz-A42E5B7B.irccloud.com) (Ping timeout)
[05:50:29] <strcat> you have to be an expert to write docs that bad
[05:50:34] <eddyb> hahahahaha
[05:50:42] <strcat> you actually have to actively mislead people without them catching on
[05:51:12] <strcat> mcpherrin: meh, maybe they just wanted to drive people to .NET
[05:51:24] <utkarsh> eddyb, cmr, am I doing something wrong here? https://gist.github.com/2833413293d8bc35c9e4
[05:51:38] <eddyb> utkarsh: that's not inside the function
[05:51:44] <strcat> mcpherrin: because from C# it's all fine and dandy...
[05:51:47] <eddyb> utkarsh: the macro_rules thing is the macro defintiion
[05:51:56] *** Joins: benjamin_____ (benjamin@moz-5CD216D9.dip0.t-ipconnect.de)
[05:52:01] <eddyb> utkarsh: it had to go between these lines https://gist.github.com/utkarshkukreti/2833413293d8bc35c9e4#file-macro_local_var-rs-L12-L13
[05:52:08] <eddyb> *has
[05:52:10] *** Joins: jzelinskie (sid17772@moz-A42E5B7B.irccloud.com)
[05:52:14] <utkarsh> eddyb, oh.. got it :)
[05:52:43] <strcat> mcpherrin: I wish them a lot of luck in driving people to *nix with win rt or whatever their new API is called though ;)
[05:52:51] *** Quits: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net) (Ping timeout)
[05:52:55] *** Joins: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net)
[05:53:02] *** Joins: abinader (sid21713@moz-A42E5B7B.irccloud.com)
[05:53:03] <strcat> apparently they're determined to be a cloud services company in 10 years, hosting linux VMs
[05:53:34] <mcpherrin> Azure is actually a half decent VM host
[05:53:53] <mcpherrin> it's less half-assed than EC2 at least
[05:54:29] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[05:54:44] <utkarsh> but then I'll have to define the macro in every function I want to use it in..?
[05:54:58] <cmr> utkarsh: or take an extra ident, which it mutates.
[05:55:04] <cmr> utkarsh: the cost of hygiene :(
[05:55:30] *** Joins: pongad (pongad@moz-7E8AAD2E.res.gatech.edu)
[05:56:05] <pongad> For some reason my PR says "closed with unmerged commits" does this have anything to do with how Bors is handling things?
[05:56:13] *** Quits: sinsnare (sinis_000@moz-7E48AC93.washdc.fios.verizon.net) (Ping timeout)
[05:56:22] *** Quits: claudiu (claudiu@moz-F69B678E.thefacebook.com) (Input/output error)
[05:56:26] <strcat> mcpherrin: and they have more than 3 errnos ;\
[05:56:52] <strcat> mcpherrin: errno (CRT), doserrno (lower level errno), GetLastError, WSAGetLastError
[05:56:54] * strcat sighs
[05:56:56] <mcpherrin> -ENEEDMOREERRNO
[05:57:08] <strcat> rust's os::error calls GetLastError
[05:57:12] <strcat> which... is not really right
[05:57:20] <strcat> but what can you do?
[05:57:21] <strcat> ;p
[05:57:33] <mcpherrin> call them all and OR em
[05:57:34] <mcpherrin> :P
[05:57:41] <sfackler> pongad: which PR?
[05:57:43] <strcat> mcpherrin: but they don't get reset to 0 ;p
[05:57:47] <o11c> strcat: return a struct of all of them?
[05:57:52] <pongad> sfackler: https://github.com/mozilla/rust/pull/12756
[05:57:56] <strcat> unless you set them all to 0 yourself before each call
[05:57:58] <strcat> heh
[05:58:02] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[05:58:04] <o11c> if you call a function that sets it, you only check the one you need
[05:58:09] <strcat> o11c: but the point is abstracting over an OS difference
[05:58:20] <o11c> it's a meaningless abstraction
[05:58:21] *** Quits: blindrenderer (blindrende@933424D6.B22400E5.217C7FCC.IP) (Ping timeout)
[05:58:22] <strcat> __errno(), __errno_location(), maybe a real thread-local, etc.
[05:58:28] <strcat> o11c: it's a meaningful abstraction across *nix
[05:58:35] <o11c> abstraction would mean attaching the errno to the library call itself
[05:58:40] <strcat> it's basically the errno macro (it's not usually a global)
[05:58:41] *** Joins: jack (sid19593@moz-A42E5B7B.irccloud.com)
[05:58:41] *** ChanServ sets mode: +o jack
[05:58:43] <sfackler> pongad: it should have merged properly. For some reason, bors marks PRs as Closed instead of Merged some of the time
[05:58:44] <o11c> (like that reddit post I made)
[05:58:44] <pongad> sfackler: the commit at the top of the branch and the commit bors took are the same, so I'm not quite sure why I'm getting the warning
[05:58:56] <strcat> o11c: yeah, but if you want to call a POSIX API and need a way of checking errno, it does that across OSes
[05:58:58] <pongad> sfackler: OK. So disregard the warning?
[05:59:00] <sfackler> yep
[05:59:08] <strcat> supporting windows just doesn't really work... it should probably not even attempt it
[05:59:09] <pongad> sfackler: Aight! Thanks!
[05:59:31] <strcat> or... at least it should use errno so it's not surprising
[05:59:48] <strcat> although most of the functions setting errno on windows are useless since they use char * but don't accept UTF-8
[05:59:54] *** Quits: pongad (pongad@moz-7E8AAD2E.res.gatech.edu) (Quit: Leaving)
[06:00:16] <eddyb> strcat: what do you say? https://github.com/mozilla/rust/issues/12842#issuecomment-37502619
[06:00:28] <eddyb> trying to steer the boat in a sane direction
[06:00:32] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[06:01:12] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[06:02:06] *** Joins: csherratt_ (csherratt@moz-7685819.cpe.teksavvy.com)
[06:02:12] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Ping timeout)
[06:02:13] *** csherratt_ is now known as csherratt
[06:02:22] <mcpherrin> obviously we should support windows 98
[06:03:10] <strcat> meh, it's not responsible to support an OS without security updates imo
[06:03:15] * strcat said that though
[06:03:22] <eddyb> I totally agree
[06:03:30] <strcat> what else is there to say? it's going to be a huge pain when we have to implement everything for XP too
[06:03:38] <strcat> it means the windows support will be slower than it should be
[06:03:42] *** Quits: lpy (lpy@F7AFA3.F09091A8.1348A864.IP) (Ping timeout)
[06:03:47] <strcat> unless XP is a separate target than 'windows'
[06:03:48] <eddyb> having a different cross-compile target with limited features is my option
[06:03:53] *** Quits: zmthy (zmthy@moz-C2881CC3.ecs.vuw.ac.nz) (Quit: leaving)
[06:04:00] <strcat> meh
[06:04:04] <eddyb> you take it or leave it :P
[06:04:07] <strcat> we don't support OS/2 or BeOS
[06:04:11] <strcat> or OS X 10.6
[06:04:20] <mcpherrin> ooo BeOS
[06:04:22] <strcat> don't really see why we need to support XP
[06:04:22] <mcpherrin> good target.
[06:04:28] <mcpherrin> I have access to a BeBox...
[06:04:38] <strcat> people still using XP are not going to buy software anyway, so why would people using rust care? ;p
[06:04:47] <eddyb> hehe
[06:04:58] <eddyb> strcat: it's just the darn asian market
[06:05:06] <eddyb> for some reason they don't like to pirate win7
[06:05:14] <strcat> I can't really see why someone who isn't a malware author would want to support it though
[06:05:27] *** Joins: lpy (lpy@9460CF2E.F09091A8.1348A864.IP)
[06:05:32] <strcat> but maybe writing malware in rust is a legitimate use case
[06:05:42] <strcat> pentesting
[06:06:04] <eddyb> liigo's main concern is China, I think
[06:06:20] <eddyb> the real fix is getting everyone to upgrade
[06:06:33] <cmr> door to door. "have you heard the good news?"
[06:06:46] <strcat> they can just go use reactos if they want that kind of pain for all eternity
[06:07:03] <eddyb> "Currently Windows XP is still wildly used in the world, especially in Asia. Its installed volume is much more than Mac OS + Linux + Unix. We give up supporting XP just because of two api absent? Maybe it's wrong."
[06:07:11] <eddyb> this sentence has many kinds of sad
[06:07:21] <eddyb> well, sentences
[06:07:35] <eddyb> (doesn't Linux kinda include Unix?)
[06:07:44] <o11c> the obvious solution is only support windows xp in bare-metal mode, not in libc-included mode
[06:08:07] <eddyb> bare-mental more like
[06:09:09] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[06:09:16] <eddyb> strcat: the lack of people talking about Vista support makes me happy for some reason
[06:09:25] *** Joins: skade (skade@moz-1EC0F118.pools.arcor-ip.net)
[06:09:27] <eddyb> (same would go for ME)
[06:09:33] <strcat> o11c: perfect, it already works ;)
[06:09:45] <eddyb> strcat: that is, until Asia upgrades *incrementally*
[06:10:12] <eddyb> maybe steam should do something responsible and not have first-class support for windows XP
[06:10:40] <eddyb> oh you want to play your games? better upgrade
[06:11:06] <mcpherrin> strong-arming OS upgrades is tricky.
[06:11:08] <eddyb> s/steam/Valve
[06:11:08] <cmr> a big appeal of opengl is that it runs on xp
[06:11:20] <cmr> with modern drivers
[06:11:25] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[06:11:28] <cmr> unlike d3d which is tied directly to windows version.
[06:11:30] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[06:11:31] <eddyb> games have such a power it's scary. or maybe it's the companies that are so reaching
[06:11:39] <cmr> eddyb: porn, too.
[06:11:52] <eddyb> totally had a master plan about that
[06:12:15] <eddyb> but I don't really have the AI skills
[06:13:27] *** Quits: bitofabother (Aria@moz-ABB60BA0.austin.res.rr.com) (Quit: Leaving)
[06:14:01] *** Joins: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au)
[06:14:29] *** Joins: andelf (fledna@983BB788.FB767B38.1CD28F1D.IP)
[06:14:45] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[06:14:45] *** Quits: derek_c (derek@moz-16A6DFBC.cit.cornell.edu) (Ping timeout)
[06:16:23] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:16:45] *** Joins: bvssvni (Mibbit@moz-E289BB64.bb.online.no)
[06:17:04] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[06:18:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:19:17] <strcat> eddyb: meh, I dislike the overly pragmatic attitude towards this stuff ;p
[06:19:24] <strcat> for example still supporting ie6/ie7
[06:19:36] <strcat> if sites drop support... people will move to modern browsers
[06:19:46] *** Joins: ahunt (ahunt@moz-6D6D79D6.cable.virginm.net)
[06:19:49] <eddyb> I dislike pragmas
[06:19:55] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[06:20:48] <p1start> If I had a basic C-like enum (e.g. `enum Direction { North, East, South, West }`), is there a way I could cycle a variable through those values? So North -> East, East -> South, ..., West -> North?
[06:21:01] *** Quits: nlminhtl (ignotus@27EDE6E3.D40C3436.2D85221C.IP) (Quit: Konversation terminated!)
[06:21:12] <eddyb> we ought to implement that AllValues iterator
[06:21:15] <p1start> Without having a fixed number which represents the number of variants
[06:21:30] <strcat> for example, if someone uses an old browser version you should plaster extra ads everywhere and clearly state that they are getting extra ads because it costs money to support their ancient crap ;p
[06:21:36] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[06:21:50] <eddyb> you may not need deriving for this, but I'm not sure how powerful Decodable
[06:21:55] *** Quits: sawrubh (uid6719@moz-5F4AA75A.irccloud.com) (Quit: Connection closed for inactivity)
[06:21:58] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[06:22:06] <eddyb> *Decodable is
[06:22:27] <strcat> feature check for modern API with the fallback path as turn-every-word-into-affiliate-link
[06:23:04] <eddyb> bwahaha
[06:23:06] <mcpherrin> strcat: good grief you're evil :P
[06:23:08] <Yurume> strcat: you still have to develop the websites with IE6 in mind for China. that's the point of @liigo IMO.
[06:23:21] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[06:23:22] <eddyb> Yurume: drop support for China
[06:23:27] <eddyb> China will upgrade
[06:23:30] <eddyb> simple ;)
[06:23:39] <eddyb> strcat: now I want malware doing that
[06:23:41] <Yurume> no, China will grow its own set of websites and services.
[06:24:00] <eddyb> infest all XP machines to the point where the only sane thing you can do is upgrade
[06:24:14] <eddyb> Yurume: that's... an interesting approach
[06:24:19] <eddyb> communist, I guess?
[06:24:28] <Yurume> due to the censorships? :(
[06:24:31] <strcat> china != communist ;\
[06:24:44] <eddyb> right. it's an odd breed
[06:24:47] <strcat> any more than north korea is a democratic republic ;p
[06:24:56] <strcat> they can call themselves what they want
[06:25:05] <Yurume> Jucheism :p
[06:25:42] <eddyb> every empire falls, let's keep that in mind
[06:25:57] <strcat> unless you're the last empire and just nuke everything
[06:26:02] <eddyb> and history shows they've lasted less and less
[06:26:30] <strcat> mcpherrin: well, imo people still use ie6 because web developers still support it
[06:26:31] *** Joins: turon (Mibbit@E48845AB.3A9F9BD4.4C2245EF.IP)
[06:26:43] <eddyb> jQuery 2.0 drops that shit
[06:26:54] <strcat> mcpherrin: if facebook breaks ie6/ie7 completely, people won't use ie6/ie7
[06:26:57] <strcat> ;p
[06:27:03] <strcat> in china, it's true that it won't work
[06:27:11] <eddyb> if only there would be an incentive for devs to switch to 2.0 instead of older stuff
[06:27:32] <eddyb> *instead of keeping on using
[06:27:33] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[06:27:38] <strcat> but I don't really feel that people using XP and really going to be running programs written in rust...
[06:27:43] <Yurume> anyway, I think the word "unethical" is not a good fit for this case, I do understand why you are using it but it is also unethical to drop support for the (still) major platform which the substantial portion of the users will continue to use even after the EOL anyway.
[06:27:44] <eddyb> and that sounds like drugs. *sigh*
[06:28:02] <strcat> Yurume: well, maybe it's not unethical for *rust* to do it because no one uses rust
[06:28:13] <strcat> but I don't like how mozilla supports platforms after EOL with firefox ;s
[06:28:22] <Yurume> strcat: it undermines the developers.
[06:28:40] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[06:28:48] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[06:28:58] <ChrisMorgan> strcat: Mozilla's technique of dropping support for Windows 2000 in Firefox (dropped in 13) is *superb*.
[06:29:01] <strcat> I'm convinced that people will stop using insecure systems if you stop supporting those insecure systems
[06:29:21] <strcat> where 'you' is people writing compelling software, web apps, etc.
[06:30:26] <bvssvni> the problem is being the first
[06:30:27] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[06:30:29] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[06:30:31] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[06:30:34] <strcat> Yurume: who is going to maintain a buildbot, etc. for XP though? the snapshots aren't going to work
[06:30:51] <ChrisMorgan> When I upgraded to 12 it warned that it's about to become unsupported, please consider upgrading Windows or moving to Opera. I say thanks for the reminder but I'm happy. Then when 13 came out it repeated that, saying it's now out of date and "dangerous". And it does not try to update to 13 because it knows it won't work.
[06:30:55] <Yurume> well, people also refuse to upgrade their OS if the program only works for that oS. :(
[06:31:26] <ChrisMorgan> Compare that with Flash which continues to try to update on 2000 despite the fact that the installer won't start… and even when you say "shut up! I don't want that update!" it only does so until the next release.
[06:31:47] <eddyb> bvssvni: and this is what I say to that https://www.youtube.com/watch?v=n88wxkGU2n0
[06:31:58] <eddyb> ᕕ( ᐛ )ᕗ To Victory and Beyond!
[06:32:06] <strcat> ChrisMorgan: meh, I don't understand adobe
[06:32:20] <strcat> why do they keep adding features to flash, while dropping platforms?
[06:32:20] *** Joins: derek_c (derek@moz-6942553A.cit.cornell.edu)
[06:32:24] * strcat shrugs
[06:32:52] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[06:32:54] <strcat> flash doesn't run on iOS/Android so I don't see why anyone would use it for something new... so why did they make all that stage3d stuff, etc.
[06:33:13] <strcat> if they aren't able to pay someone part-time to maintain it on android/linux ;p
[06:33:22] <Yurume> strcat: #12842 is not about the continous integration on XP but just the fixes for XP, isn't that permitted IIRC?
[06:33:28] <mcpherrin> strcat: So what I gather is that adobe is having a civil war over whether they're a flash-the-platform company or a development-tools company...
[06:33:33] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[06:33:44] <eddyb> strcat: so Haxe devs can say "look at my GPGPU prowess"
[06:33:46] <strcat> Yurume: so am I allowed to submit a PR adding say, a condvar, without XP support?
[06:33:48] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[06:33:48] <mcpherrin> and producing sensible products while you're civil warring doesn't happen
[06:33:54] <sfackler> strcat: you may underestimate the glacial pace of upgrades at large organizations. I know of a place that just upgraded *from Windows 2000 to Windows XP* :P
[06:33:56] *** Joins: Rym (y@2542C0EA.BF8845BF.51C6DE68.IP)
[06:33:58] *** vfetwnuncszu is now known as dcrewi
[06:34:00] <eddyb> strcat: like that guy, what's his name... I have to look it up
[06:34:06] <strcat> Yurume: or if I edit one of those functions and change the API, can I rip out XP support because I don't want to pirate XP to test it in a VM?
[06:34:06] <Yurume> strcat: if you do have an RFC, go ahead. make it a formal discussion.
[06:34:39] <strcat> if you don't run CI, people can't be expected to keep the support in those functions working - there is no way to legally check if it works
[06:34:50] *** Quits: edwardw (edwardw@B3728BF8.E2F45E91.B9C6B12A.IP) (Quit: Leaving...)
[06:34:58] * strcat shrugs
[06:35:16] <eddyb> strcat: ah, yes, anakata
[06:35:37] *** Quits: Rym (y@2542C0EA.BF8845BF.51C6DE68.IP) (Ping timeout)
[06:35:49] <strcat> and if we do run CI, it means all PRs have the burden of supporting it
[06:35:54] <eddyb> that guy actually "invested" into Kracken with optimization tips and whatnot
[06:35:59] *** Joins: edwardw (edwardw@4CA3FA20.E1A076E0.4A6948F8.IP)
[06:36:02] *** Quits: depp (depp@500BAFC1.53465674.3C05E6CB.IP) (Quit: bye)
[06:36:05] <eddyb> though I was being really dumb not using a free list :P
[06:36:23] <strcat> afaik jemalloc/tcmalloc use bitmaps
[06:36:35] <strcat> they pack stuff closely together with 1-5% metadata overhead
[06:36:47] <Yurume> strcat: I thought brson's comment on #11950 (https://github.com/mozilla/rust/issues/11950#issuecomment-33880585) means that the PR *can* break on XP (no promises) but the PR for fixing that *is* accepted (can take patches)?
[06:36:51] <strcat> they're putting 16 byte allocs and 64 byte allocs in the same pool afaik
[06:37:12] <tiffany> maybe the reason that enterprise moves so slowly is because they don't bother getting support contracts that have a clear upgrade path and anything to push the other way would be called out as planned obsolesence, which is apparently a bad thing
[06:37:13] <Yurume> but anyway, RFC would be better
[06:37:16] <strcat> Yurume: is it a bug if it's broken though?
[06:37:21] <strcat> do we have bugs open for the breakage?
[06:37:40] <Yurume> strcat: that's like a bug only manifesting itself in ReactOS, for example.
[06:38:45] *** Joins: luz1 (luziie@moz-CD18B14B.customer.cdi.no)
[06:38:50] <strcat> if someone can submit a PR switching to a 7-and-later API and not bother to add in a compatibility layer, then I don't really care
[06:39:12] <strcat> i.e. they can freely break existing XP support if keeping it requires work on their part
[06:39:18] <cmr> strcat: that's my interpretation of it.
[06:39:33] <cmr> since it's not tier 1 (has buildbots), it's fair game to break.
[06:39:41] <bvssvni> tiffany: COBOLT
[06:39:42] *** Quits: luziiie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[06:39:44] <strcat> yes but I mean really obvious breakage
[06:39:59] <strcat> you add a parameter to a function and delete the winxp compat version because you'd need to spend 5 mins adding support to it
[06:40:01] <strcat> is that okay?
[06:40:14] <tiffany> bvssvni: this is going to make you very sad but there is actually a company which still sells and advertises a product called visual COBOL
[06:40:14] *** Joins: ofeldt- (ofeldt@moz-4B9A8C81.dip0.t-ipconnect.de)
[06:40:26] <strcat> I can't really see how the support would survive rust's churn
[06:40:32] * cmr thinks yes
[06:40:35] <cmr> yup :P
[06:40:35] <strcat> unless there *is* a burden to support it
[06:40:51] <eddyb> "It turned out that Google was holding onto one organization within Motorola: the Advanced Technology and Projects (ATAP) group."
[06:41:03] <eddyb> so phonebloks is now google. interesting
[06:41:08] *** Quits: turon (Mibbit@E48845AB.3A9F9BD4.4C2245EF.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:41:20] *** Quits: andelf (fledna@983BB788.FB767B38.1CD28F1D.IP) (Quit: This computer has gone to sleep)
[06:41:22] *** Quits: ofeldt (ofeldt@moz-68B67908.dip0.t-ipconnect.de) (Ping timeout)
[06:42:07] <eddyb> https://plus.google.com/+GoogleATAP/posts how do I Google+? this is a bit confusing
[06:42:28] <cmr> eddyb: #rust-offtopic
[06:42:52] *** Quits: oxum (anonymous@55A7A5F0.B6DE35CB.520CDC98.IP) (Quit: ...)
[06:42:59] <strcat> I always get yelled at for being on-topic in off-topic channels ;s
[06:43:22] <bvssvni> strcat: now that's off-topic :P
[06:43:46] <Yurume> off-off-topic
[06:43:51] <Yurume> offf-topic?
[06:44:54] <edwardw> now recursion can go on
[06:45:18] <bvssvni> segment fault
[06:45:54] <bvssvni> anybody used Nimrod?
[06:46:04] <Yurume> not really yet
[06:46:16] <cmr> I made it segfault and it wasn't a bug in the compiler. 0/10
[06:46:35] *** Quits: skade (skade@moz-1EC0F118.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:47:20] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[06:48:05] *** Joins: sinsnare (sinis_000@moz-7E48AC93.washdc.fios.verizon.net)
[06:49:02] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[06:49:49] *** Quits: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net) (Ping timeout)
[06:50:55] *** Joins: gimpf (gimpf@moz-BBD748EE.adsl.highway.telekom.at)
[06:52:07] *** Quits: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net) (Ping timeout)
[06:52:41] *** Joins: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net)
[06:58:21] <tiffany> I'm reading that post about nimrod that went onto /r/rust and nimrod doesn't look that nice
[06:58:48] <strcat> it has nice metaprogramming
[06:59:00] <Yurume> I see Nimrod as a successor of D without direct C++ influence
[06:59:14] <strcat> Yurume: but D is moving away from GC, not towards it
[06:59:42] <Yurume> strcat: not just that :)
[06:59:47] * strcat shrugs
[06:59:50] <eddyb> Rust is more readable than Nimrod
[06:59:55] <eddyb> but maybe I'm *very* biased
[07:00:07] <Yurume> anyway, Nimrod's design is interesting, but that does not make Rust meaningless
[07:00:08] <strcat> well, nimrod makes some nice decisions but also weird stuff like case/underscore-insensitive names
[07:00:20] <tiffany> I don't mind the syntax but exceptions and segfaults are pretty much dealbreakers
[07:00:25] <eddyb> that's just straight out of Window's playbook
[07:00:32] <eddyb> s/Windows/Microsoft
[07:00:44] <strcat> I am pretty sure foo_bar and FooBar are the same variable
[07:00:48] <strcat> at least when I last looked at it
[07:01:08] <pnkfelix> cmr: ping
[07:01:12] <Yurume> sanxiyn has a great commentary about that: http://www.reddit.com/r/rust/comments/209sly/consider_nimrod_with_a_rust_comparison/cg1c28y
[07:01:16] <strcat> so while I like significant whitespace, I hate that more ;p
[07:02:08] <cmr> pnkfelix: pong
[07:02:42] <mcpherrin> strcat: haha man, that's taking case insensitivity to some logical extreme
[07:02:44] <pnkfelix> cmr: caveat: I don't know anything about python package management.
[07:02:54] <pnkfelix> cmr: in my local pygments install, `struct` is not getting rendered as a keyword
[07:02:56] <mcpherrin> I think it sounds funny.  I approve
[07:03:06] <pnkfelix> cmr: I saw that you contributed a lexer for Rust to pygments
[07:03:25] <pnkfelix> cmr: So I thought you might know what I need to do to upgrade my install and/or fix this locally.
[07:03:42] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[07:03:56] <cmr> nanotech: I just improved the existing one, I didn't write it. It definitely considered struct a keyword in the hg version.
[07:04:00] <pnkfelix> cmr: (I am also quite confused as to how I ever got into this state.  I would have thought that `struct` was always a keyword, at least as long as pygments as supported Rust)
[07:04:15] <pnkfelix> cmr: hmm.  okay.
[07:04:24] <cmr> pnkfelix: I also unfortunately know almost zero about python package management, and when I tried to build/install pygments myself, I failed.
[07:04:26] <cmr> so....
[07:04:29] <eddyb> I don't think we had "struct" back when records were around
[07:04:29] <cmr> sorry :(
[07:04:33] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[07:05:12] <bollu> cmr: python package management is *insane*
[07:05:29] <eddyb> s/python//
[07:05:52] <strcat> pnkfelix: we used to have class and resource afaik
[07:05:53] *** Joins: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP)
[07:06:00] <bollu> eddyb: ruby is elegant :)
[07:06:06] <strcat> pnkfelix: rust used to be really weird. 
[07:06:13] <eddyb> strcat: ah, yes, class
[07:06:13] <pnkfelix> I guess I was just assuming that pygments support post-dated all that
[07:06:13] <strcat> at least relative to what it is now...
[07:06:23] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[07:06:32] <pnkfelix> but i actually have no idea
[07:06:53] <strcat> there was a time when rust didn't have unique pointers or borrowed pointers
[07:06:56] <strcat> just refcounting
[07:07:04] <eddyb> enum t = @t;
[07:07:05] <strcat> and I don't think objects were always statically sized
[07:07:13] <strcat> eddyb: no I think [1, 2, 3] was a refcounted array
[07:07:20] <strcat> can't remember exactly
[07:07:29] <eddyb> strcat: I mean, that was valid syntax
[07:07:31] <strcat> I only started *using* it with 0.4 so I have a vague idea of what it was before
[07:07:33] <strcat> ah
[07:07:45] <eddyb> and required a check
[07:07:48] <cmr> strcat: in fact, all objects were dynamically sized.
[07:07:55] <cmr> every field required doing arithmetic as to its location.
[07:08:04] <strcat> cmr: yeah that's what I mean
[07:08:06] <pnkfelix> weird, pygmentize does seem to work in terms of its terminal output, struct is highlighted there
[07:08:10] <strcat> always was a reference to time ;)
[07:08:12] <strcat> not entirely clear
[07:08:20] <cmr> ah ok
[07:08:38] <strcat> graydon told me what evec stood for but I forget ;(
[07:08:47] <cmr> I don't remember either
[07:08:53] <eddyb> explicit?
[07:08:59] <strcat> eddyb: no something like enhanced
[07:09:00] <pnkfelix> exchange?
[07:09:10] <strcat> pnkfelix: all vectors became evec ;)
[07:09:13] *** Joins: daschl (Adium@moz-E160B3C7.public.t-mobile.at)
[07:09:15] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[07:09:20] <eddyb> ermehgerd?
[07:09:25] <strcat> pnkfelix: there is still some of the weird stuff in std::reflect
[07:09:35] <strcat> it walks types we no longer have
[07:09:39] <cmr> yeah reflect is fun.
[07:09:39] <eddyb> I couldn't easily rename all that stuff
[07:09:46] <eddyb> because bootstrapping
[07:09:49] <strcat>     fn visit_vec(&mut self, mtbl: uint, inner: *TyDesc) -> bool {
[07:09:51] <strcat> I think that's dead code
[07:10:06] <strcat> ofc visit_evec_box is dead too but that's recently dead
[07:10:25] <cmr> exchange might be right
[07:10:35] <strcat>     fn visit_leave_rec(&mut self, n_fields: uint, sz: uint, align: uint) -> bool {
[07:10:36] <strcat> :D
[07:10:39] <strcat> structural records!
[07:10:42] <strcat>     fn visit_enter_class(&mut self, name: &str, named_fields: bool, n_fields: uint, sz: uint,
[07:10:45] <strcat> that visits structs now.
[07:10:48] <strcat> not renamed though
[07:10:55] <eddyb> it's hard to rename that stuff
[07:11:01] <eddyb> because you have to *duplicate* code
[07:11:20] <eddyb> unless you make the old name call the new name, in a default method
[07:11:24] <eddyb> I can see that working
[07:11:58] <cmr> speaking of default methods, I haven't hit any bugs with them in a long time.
[07:11:59] <cmr> \o/
[07:12:42] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[07:13:02] <eddyb> okay, built my autoderef rustc. now, PinataTap, r3 or more rustc hacking?
[07:13:17] * eddyb rolls an imaginary dice
[07:15:11] *** Joins: oxum (anonymous@B9BFB4B1.77B59FE0.520CDC98.IP)
[07:15:47] <pnkfelix> so it seems i may have mis-diagnosed my problem: pygmentize seems to properly mark `struct` as a keyword, but my octopress setup is outputing `struct` has having class "n" (presumably for name) rather than "k" for keyword
[07:16:39] <cmr> pnkfelix: hmm, does it do the same thing for `extern` blocks?
[07:16:49] <cmr> pnkfelix: I wonder if I broke the lexer.
[07:17:17] <pnkfelix> cmr: seems unlikely, since pygmentize still works?
[07:17:31] <cmr> perhaps
[07:17:39] <pnkfelix> cmr: my current theory is something is wonky between the ruby pygments.rb and the python pygments lib
[07:17:41] <cmr> I was more thinking broke some ordering of something
[07:18:25] <pnkfelix> cmr: hmm, you intuition is interesting: `extern` is not being rendered as keyword either in the generated html
[07:19:24] *** Quits: edwardw (edwardw@4CA3FA20.E1A076E0.4A6948F8.IP) (Quit: Leaving...)
[07:19:24] <pnkfelix> but pygmentize continues to work on command line.  (But maybe my command line is pulling in a different pygments.py than what ruby is pulling in...)
[07:20:07] <cmr> might be.
[07:20:25] <cmr> actually, I think it is. pygments-rb or whatever it's called bundles its own pygments iirc.
[07:20:29] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[07:20:32] <pnkfelix> or wait...
[07:20:37] *** Parts: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) ()
[07:20:44] <pnkfelix> what is the function keyword in ruby?
[07:20:47] <pnkfelix> is it `fn` ?
[07:20:58] *** Quits: FreeFull (freefull@moz-A3210B4C.ppp.as43234.net) (Quit: )
[07:21:09] * cmr does not know
[07:21:27] <pnkfelix> `fn`, `let`, and `mut` all get rendered as keywords in the html
[07:21:30] <mcpherrin> ༺
[07:21:37] *** Joins: nkoep (nik@moz-C300A1D9.pool.mediaways.net)
[07:21:43] <strcat> pnkfelix: ruby doesn't have functions ;)
[07:21:50] <eddyb> only methods, right?
[07:22:10] <eddyb> (no object fields either, AFAIK)
[07:22:11] <pnkfelix> I could believe that it is treating ru.* as synonymous with ruby.  But I cannot believe that `mut` is a keyword in ruby.
[07:22:12] <strcat> pnkfelix: a method is defined with def though :P
[07:22:14] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[07:22:15] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[07:22:25] <strcat> mut is a keyword in ruby? ;s
[07:22:26] *** Quits: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net) (Ping timeout)
[07:22:36] <pnkfelix> strcat: no, I hope not
[07:22:36] <strcat> I barely know ruby anyway
[07:22:42] <strcat> I've fixed a few bugs in ruby projects
[07:22:56] *** Joins: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net)
[07:22:58] <cmr> pnkfelix: how does it treat unsafe or unsized
[07:23:00] <pnkfelix> strcat: I was just hypothesizing that the reason I thought this was working at all was that it was applying a ruby syntax highlighter
[07:23:06] <cmr> (unsized is marked as "reserved" in the lexer)
[07:23:10] <strcat> once you know one of perl/python/ruby/javascript you know them all
[07:23:29] <pnkfelix> cmr: unsized is non-keyword
[07:23:39] <strcat> just a bunch of bikeshedding about syntax and names ;p
[07:23:41] <pnkfelix> I'm going to go back and try to dissect this ruby again
[07:23:44] <zwarich_> strcat: everything is a chain of dictionaries
[07:23:54] <cmr> pnkfelix: also I don't think there has been a pygments release with my fixes yet.
[07:23:57] <zwarich_> that's all you need to know
[07:24:11] <strcat> unless you use __slots__ and make guido cry
[07:24:21] <cmr> so that could contribute to unsized.
[07:24:37] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[07:24:57] <cmr> pnkfelix: anyway it's time for me to sleep, best of luck with this madness
[07:25:06] <pnkfelix> cmr: thx
[07:25:28] <meyer> I just rebuilt rust against master (previous build was maybe a week ago), and my program is now failing with "task '<unknown>' has overflowed its stack"
[07:25:30] *** Quits: rootnode (rootnode@moz-F38A8253.pools.arcor-ip.net) (Ping timeout)
[07:26:05] <meyer> Actually, let me see if there is an open issue first
[07:26:43] <pnkfelix> ah I bet I need to do something with bundle locally
[07:27:42] <zwarich_> strcat: sigh, that should just be a VM implementation detail
[07:29:23] <mcpherrin> js engines do that optimization automatically, right?
[07:29:28] <pnkfelix> ah, this Gemfile says gem 'pygments.rb', '~> 0.3.4'
[07:29:40] <eddyb> mcpherrin: which one?
[07:29:47] *** Joins: fabiand (fabiand@moz-3C3B3AD8.hotspotsvankpn.com)
[07:29:49] <zwarich_> mcpherrin: yeah, or at least they try to ;-)
[07:29:52] <eddyb> mcpherrin: v8 has 3 integer types, structs, small arrays, etc.
[07:30:32] *** Joins: kris (kris@moz-6D20263F.fullrate.dk)
[07:30:44] <eddyb> mcpherrin: ropes, slices - should I go on?
[07:30:45] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[07:30:47] <mcpherrin> the dict -> struct optimization
[07:31:00] <mcpherrin> ala __slots__ in python
[07:31:13] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[07:31:16] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[07:31:23] <eddyb> I actually had to force that in wiREd to get a better memory footprint
[07:31:32] <eddyb> (by having nulls in the prototype)
[07:32:03] <mcpherrin> what is wiREd? (impossible to google :p)
[07:32:15] <eddyb> that's a good thing now, since it's discontinued
[07:32:24] <eddyb> mcpherrin: my decompiler experiment
[07:32:25] *** Joins: alkino (alkino@moz-58B8E4B4.w92-151.abo.wanadoo.fr)
[07:32:33] <eddyb> (yay sticking "experiment" to things when they fail)
[07:32:38] <mcpherrin> ha
[07:32:51] <eddyb> it was actually getting pretty close to spewing valid C
[07:33:05] <eddyb> but using a dynamic language was a mistake
[07:33:18] <bollu> cmr: http://woboq.com/blog/reflection-in-cpp-and-qt-moc.html <- how much are they going to /add/ to C++ >_<?
[07:33:22] <eddyb> I wanted high level, but you can't just roll with scripting languages
[07:34:11] <strcat> zwarich_: meh I rarely use classes in python now, I like namedtuples more ;p
[07:34:56] *** Joins: Ferreus (ferreus@moz-942E24F4.dip0.t-ipconnect.de)
[07:35:05] <zwarich_> strcat: are named tuples actually labelled by the name, or is the name just a shortcut and the order determines the label?
[07:35:15] <meyer> Yeah. Something weird is going on with the new robin hood hashtable implementation
[07:35:45] <meyer> Might still be user error due to some other change, though.
[07:35:48] <strcat> zwarich_: well namedtuple just dynamically generates code for you
[07:35:56] <eddyb> meyer: what are you putting on the stack?
[07:36:10] <strcat> zwarich_: makes a tuple (so, immutable list based on what a tuple is in python) with field names
[07:36:12] * strcat shrugs
[07:36:17] <strcat> basically a struct
[07:36:45] *** Joins: claudiu_ (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP)
[07:36:52] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[07:37:16] <meyer> eddyb: when I let mut table = HashMap::new(); and insert a bunch of data, where is is stored?
[07:37:23] <eddyb> meyer: on the heap
[07:37:30] <meyer> That's what I thought.
[07:37:36] <meyer> So it shouldn't be overflowing the stack
[07:37:37] <eddyb> meyer: but that table takes some space on the stack
[07:37:45] <meyer> I ran the process under gdb
[07:37:46] <strcat> zwarich_: http://sprunge.us/VCeC
[07:37:51] *** Quits: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP) (Ping timeout)
[07:37:53] <eddyb> meyer: so if you have a hundred tables on the stack, it may overflow
[07:37:55] <meyer> And did a backtrace after it failed
[07:38:03] <eddyb> is there an easy way to increase the stack limit?
[07:38:24] <meyer> eddyb: And it seems to be making many, many recursive calls to some internal function
[07:38:36] <meyer> I'll make a gist in a sec
[07:38:40] <eddyb> sounds like infinite recursion
[07:38:44] <meyer> I agree.
[07:39:23] *** Quits: PumpMagic (PumpMagic@E670071A.FEA6CF84.B8C5454C.IP) (Quit: Leaving)
[07:42:01] <meyer> eddyb: https://gist.github.com/Meyermagic/9523484
[07:42:08] *** Quits: bollu (bollu@31CCE710.7065DDB9.6D6A344F.IP) (Client exited)
[07:43:10] *** Joins: skade (skade@B0278B5A.505237C9.CAE22B62.IP)
[07:43:29] <eddyb> "// Robin hood! Steal the spot. This had better be tail call."
[07:43:33] <eddyb> no it's not a tail call
[07:43:37] <pnkfelix> oops
[07:43:45] <strcat> zwarich_: since it inherits from tuple, you get everything like ==, !=, < for free so it appeals to me for lazy scripting ;p
[07:44:02] <strcat> but not quite so lazy that I'm going to use an unnamed dict/tuple for everything
[07:44:12] <eddyb> there's unwinding and dropping stuff
[07:44:15] <strcat> rust has deriving so...
[07:44:35] <zwarich_> strcat: deriving is so nice
[07:45:03] *** Quits: kris (kris@moz-6D20263F.fullrate.dk) (Ping timeout)
[07:45:18] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[07:45:43] *** Quits: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net) (Connection reset by peer)
[07:45:45] <eddyb> someone should poke cgaabel about the non-tail-calls... I'm not sure exactly how to enforce that
[07:45:56] *** Joins: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net)
[07:46:01] <eddyb> strcat: can this use a loop instead of recursion? https://github.com/mozilla/rust/blob/master/src/libcollections/hashmap.rs#L1086-L1104
[07:46:14] <zwarich_> probably would need a keyword at the call site
[07:46:27] <eddyb> zwarich_: what, tail calls?
[07:46:31] <zwarich_> yeah
[07:46:38] <eddyb> that's a non-solution IMO
[07:46:55] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[07:47:03] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[07:48:03] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[07:48:17] <zwarich_> eddyb: how else could you ensure that a tail call remains a tail call (really a sibling call that LLVM will optimize) over later code changes?
[07:48:30] <eddyb> by replacing it with a loop :P
[07:49:16] *** Quits: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[07:49:18] <zwarich_> I wonder if there are any cases where LLVM will bail out of optimizing sibling calls that matter to Rust programs
[07:49:29] <strcat> zwarich_: well stuff often looks like a sibling call but isn't
[07:49:33] <strcat> destructors...
[07:49:38] <meyer> So, the issue here is that that recursive call, if not optimized to a loop, will overflow the stack?
[07:49:45] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[07:49:47] <strcat> this function has things with dtors in scope (key and value), it could easily not be a tail call
[07:49:52] <zwarich_> strcat: sure, but rustc could at least know about those things
[07:50:02] <eddyb> you wish :P
[07:50:11] <strcat> zwarich_: but LLVM will often turn something into a tail call that isn't obviously one
[07:50:12] <pnkfelix> meyer: that's the going hypothesis, yeah
[07:50:28] <strcat> and it can fail on an 'obvious' tail call due to rust deciding to return the value by out-ptr
[07:50:31] <strcat> rather than letting LLVM lower it
[07:50:35] <strcat> (which may not be a good idea)
[07:50:58] <eddyb> you waste stack space even with TCO, a loop keeps it constant
[07:51:03] <strcat> although I think LLVM will probably lower it to an out ptr anyway
[07:51:07] <pnkfelix> meyer: seems like a good thing to write a test for
[07:51:25] <pnkfelix> meyer: (e.g. a unit test of very long probe counts)
[07:51:37] <zwarich_> yeah, LLVM will generally lower large struct returns to out ptrs
[07:52:13] <eddyb> wait, so robin hood relocates entries in a chain?
[07:52:33] *** Quits: derek_c (derek@moz-6942553A.cit.cornell.edu) (Quit: Leaving)
[07:52:40] <eddyb> can it loop around? I hope not
[07:52:41] <Yurume> eddyb: afaik yes.
[07:52:50] <Yurume> loop around?
[07:52:56] *** Quits: fabiand (fabiand@moz-3C3B3AD8.hotspotsvankpn.com) (Quit: Verlassend)
[07:53:04] <eddyb> go full circle and hit the original entry
[07:53:12] <pnkfelix> eddyb: that loop doesn't let dib surpass self.table.size()
[07:53:33] <pnkfelix> eddyb: So if the table is full, it will fail! rather than infinite loop
[07:53:37] <eddyb> right, I wasn't sure what that did exactly
[07:54:00] <pnkfelix> of course I haven't actually looked at the rest of this code...
[07:54:06] <eddyb> we already have the machinery inside that function to transform it into a loop
[07:54:26] <eddyb> just replace old_{hash,key,val} with hash, k, v and make them mutable
[07:54:43] <eddyb> them the recursive call is just continue 'outer
[07:55:04] <eddyb> (after changing the first two parameters)
[07:55:16] <eddyb> s/them/then
[07:55:20] <pnkfelix> eddyb: yeah AFAICT this code could be re-written to use a loop
[07:55:43] <eddyb> can be even shorter
[07:55:57] <pnkfelix> eddyb: though who knows if borrowck will disagree with me
[07:56:10] <eddyb> there's no references
[07:56:38] <eddyb> (I wonder how HashSet is implemented now)
[07:56:41] *** Quits: W0rmDr1nk (wormdrink@moz-89570CE2.access.mtnbusiness.co.za) (Ping timeout)
[07:56:43] <eddyb> pnkfelix: just indexes and values
[07:56:53] <pnkfelix> eddyb: right, the &index and &full_index are short-lived
[07:57:23] <pnkfelix> eddyb: so its probably worth a go.
[07:57:27] * pnkfelix goes to see if an issue has been filed yet
[07:57:34] <eddyb> https://github.com/mozilla/rust/blob/master/src/libcollections/hashmap.rs#L1382-L1384
[07:57:38] <eddyb> well, I hope that's cheap to do
[07:58:35] <eddyb> https://github.com/mozilla/rust/blob/master/src/libcollections/hashmap.rs#L152-L158 yeah it looks fine :D
[07:58:58] <eddyb> (apart from an useless extra pointer)
[07:58:58] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[07:59:25] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[07:59:58] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[08:00:31] <pnkfelix> filed as https://github.com/mozilla/rust/issues/12860
[08:01:09] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Ping timeout)
[08:02:04] *** Quits: lpy (lpy@9460CF2E.F09091A8.1348A864.IP) (Connection reset by peer)
[08:02:46] *** Joins: lpy (lpy@9460CF2E.F09091A8.1348A864.IP)
[08:03:40] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[08:03:44] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[08:08:37] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[08:09:56] *** Joins: fabiand (fabiand@moz-3F84BA7.hotspotsvankpn.com)
[08:11:32] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[08:12:05] <pnkfelix> okay, mystery solved, https://github.com/imathis/octopress/blob/master/Gemfile#L7
[08:12:38] *** Quits: fabiand (fabiand@moz-3F84BA7.hotspotsvankpn.com) (Ping timeout)
[08:12:40] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[08:13:11] <pnkfelix> and the lexer for that starts off with keywords such as alt|as|assert|be|break|check|claim|...
[08:13:49] *** flaper87|afk is now known as flaper87
[08:13:59] *** Joins: valentin (Thunderbir@87C1F78E.1DE10CA8.D8E68FF6.IP)
[08:14:16] *** Joins: fabiand (fabiand@moz-3F84BA7.hotspotsvankpn.com)
[08:15:10] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Ping timeout)
[08:15:35] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Connection timed out)
[08:16:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:16:35] *** Joins: mvdnes (s0828599@45005D94.639C5FF7.B5DC4D67.IP)
[08:16:50] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[08:16:50] *** Joins: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net)
[08:16:50] *** ChanServ sets mode: +o huon
[08:17:29] *** Quits: alkino (alkino@moz-58B8E4B4.w92-151.abo.wanadoo.fr) (Ping timeout)
[08:18:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:19:09] *** Quits: lpy (lpy@9460CF2E.F09091A8.1348A864.IP) (Ping timeout)
[08:19:42] *** Joins: lpy (lpy@41919AC5.F09091A8.1348A864.IP)
[08:22:10] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:22:20] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:22:48] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:22:49] <mcpherrin> porting some scheme to Rust, the Rust is looking surprisingly good
[08:22:49] *** Joins: kris (kris@moz-147EE6DF.diku.dk)
[08:23:02] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[08:23:27] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[08:23:30] *** Quits: nkoep (nik@moz-C300A1D9.pool.mediaways.net) (Client exited)
[08:24:36] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Ping timeout)
[08:25:55] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[08:26:59] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[08:27:02] *** Quits: fabiand (fabiand@moz-3F84BA7.hotspotsvankpn.com) (Quit: Verlassend)
[08:27:23] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:29:27] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[08:31:08] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[08:34:48] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[08:35:02] *** Joins: nkoep (nik@moz-C300A1D9.pool.mediaways.net)
[08:35:37] *** Joins: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP)
[08:35:54] *** Quits: nkoep (nik@moz-C300A1D9.pool.mediaways.net) (Client exited)
[08:36:00] *** Joins: nkoep (nik@moz-C300A1D9.pool.mediaways.net)
[08:38:04] *** Quits: mvdnes (s0828599@45005D94.639C5FF7.B5DC4D67.IP) (Quit: leaving)
[08:40:00] <mcpherrin> error: unresolved name `False`. Did you mean `re`?
[08:40:08] <mcpherrin> Could probably handle that case better :)
[08:40:51] *** Quits: rileyw (rileyw@moz-E40BCEED.hsd1.ca.comcast.net) (Quit: )
[08:45:53] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[08:47:11] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[08:47:39] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[08:48:51] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[08:49:03] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[08:49:24] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:50:10] <huon> mcpherrin: the suggestions are so dumb
[08:50:14] <huon> just look at local variables
[08:50:34] <huon> and do a straight levenstein distance, don't even try to take into account the total length
[08:50:36] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[08:50:39] *** Joins: thesnowdog (doug@E8718008.CDB23781.6F17036B.IP)
[08:51:22] *** Joins: leowoe (Leo@moz-8A007533.dip0.t-ipconnect.de)
[08:51:36] <mcpherrin> huon: I know :)
[08:52:02] <mcpherrin> I think I've only ever had it suggest the right thing once or so :P
[08:52:50] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[08:52:50] <huon> I don't believe you
[08:53:04] <huon> that only happens in the legends of yore
[08:53:09] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[08:53:24] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:53:28] <huon> ;P
[08:53:57] *** Joins: marianoguerra (marianogue@moz-28885503.dip0.t-ipconnect.de)
[08:53:59] <mcpherrin> Well I do remember the day Luqman landed that patch
[08:54:12] <mcpherrin> that's about as legends as yorey you get with suggestions :P
[08:54:53] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[08:55:19] *** Joins: W0rmDr1nk (wormdrink@5451F9BD.52135167.A77EFE04.IP)
[08:55:21] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Ping timeout)
[08:58:24] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Ping timeout)
[08:58:59] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[09:03:06] *** Joins: alonlevy (alon@AB84380C.C7935774.F9582E85.IP)
[09:04:01] *** Quits: skade (skade@B0278B5A.505237C9.CAE22B62.IP) (Ping timeout)
[09:04:04] <tiffany> howcome there's no results for HashMap in the rust docs?
[09:04:22] *** Joins: twi (Adium@moz-ED056769.cust.vodafonedsl.it)
[09:04:47] <kimundi> tiffany: Are you searching in the right docs?
[09:04:50] <eddyb> tiffany: different crate
[09:04:50] <kimundi> it lives in libcollections now
[09:05:13] <eddyb> from #rust-gamedev: impl ⊕≺uint, uint≻ for uint { fn ⊕(&self, other: uint) -> uint { *self + *other } }
[09:05:32] <tiffany> I don't suppose there's a way to search all of the standard libraries
[09:05:33] *** Quits: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au) (Quit: Leaving...)
[09:05:35] <eddyb> unicode math symbols for operator overload trait/method names
[09:05:43] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.50.1)
[09:05:49] <eddyb> and those odd <>-like symbols for generics
[09:05:50] *** Quits: alonlevy (alon@AB84380C.C7935774.F9582E85.IP) (Ping timeout)
[09:06:28] <eddyb> they are the best looking replacement to <> that I've seen so far (and unlike [], wouldn't cause ambiguities so no need for ::<>)
[09:06:53] <eddyb> question is... is there any real chance we'll switch to arcane symbols that nobody can type?
[09:07:45] *** Joins: skade (skade@B0278B5A.505237C9.CAE22B62.IP)
[09:08:20] *** Joins: alonlevy (alon@AB84380C.C7935774.F9582E85.IP)
[09:10:42] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[09:11:08] *** Joins: luziie (luziie@moz-CD18B14B.customer.cdi.no)
[09:11:18] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[09:11:24] *** Quits: luz1 (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[09:11:50] *** Joins: soumyaC_ (uid15286@moz-E77DEB21.irccloud.com)
[09:12:03] *** soumyaC_ is now known as soumyaC
[09:12:34] <kimundi> eddyb: The last twenty times we jokingly proposed that no one really took it seriously :P - unicode symbols would open up the field for nicer syntax, but has the big problem that most users lack the ability to actually type them.
[09:12:37] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[09:12:54] <eddyb> kimundi: did anyone propose *those* <> replacement symbols?
[09:13:00] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[09:13:03] <eddyb> I've seen «» and other things which look worse
[09:13:21] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:14:06] <Zr40> I recommend ✂️   (not serious)
[09:14:34] <eddyb> is there as symbol for cell division?
[09:14:38] *** Joins: zxcdw (r-a@F4A4796.FC390A29.3933CC16.IP)
[09:14:38] <kimundi> eddyb: If its not a standard keyboard layout, it won't happen, I'm afraid
[09:14:55] <eddyb> if it's ugly enough, it might be good for .clone()
[09:15:01] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:15:28] <Zr40> .clone: .💩()
[09:15:54] *** Joins: mpiechotka (mpiechotka@moz-CF1931C2.dynamic.mnet-online.de)
[09:16:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:16:42] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[09:16:57] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[09:17:13] *** Quits: skade (skade@B0278B5A.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[09:18:36] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:19:58] *** Quits: alonlevy (alon@AB84380C.C7935774.F9582E85.IP) (No route to host)
[09:22:20] *** Joins: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com)
[09:22:25] *** Joins: ebalint (ebalint@moz-BFA5E762.inf.u-szeged.hu)
[09:23:02] *** Joins: skade (skade@B0278B5A.505237C9.CAE22B62.IP)
[09:23:16] *** Quits: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru) (Ping timeout)
[09:23:21] *** Joins: luziiie (luziie@moz-CD18B14B.customer.cdi.no)
[09:23:59] *** Quits: luziie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[09:24:58] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[09:25:05] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[09:25:36] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[09:25:40] *** Quits: leowoe (Leo@moz-8A007533.dip0.t-ipconnect.de) (Quit: Leaving.)
[09:26:01] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[09:27:11] *** Joins: lucian (lucian@303F9692.4304AE1E.CE5E78F6.IP)
[09:27:11] *** Quits: lucian (lucian@303F9692.4304AE1E.CE5E78F6.IP) (Input/output error)
[09:27:12] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[09:27:17] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[09:27:33] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[09:27:37] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[09:28:24] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[09:29:14] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[09:29:19] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Connection reset by peer)
[09:29:36] *** Joins: bakibour (luesebrink@moz-BED1057D.dip0.t-ipconnect.de)
[09:29:39] <bakibour> Hidiliho
[09:30:11] *** Joins: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP)
[09:30:37] *** Joins: refold (gman@moz-42D68426.a258.priv.bahnhof.se)
[09:31:27] *** Joins: alinbsp (alinbsp@moz-57C0678F.leoburnett.ro)
[09:32:27] <mcpherrin> Help! I'm caught in a borrow check and I can't get out https://gist.github.com/mcpherrinm/9525118
[09:32:28] *** Joins: kanru (kanru@moz-DB4A9C19.scl3.mozilla.com)
[09:33:03] <bakibour> Can i wrap a function into an enum?
[09:33:10] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[09:33:21] <eddyb> bakibour: a function pointer or a closure, you mean?
[09:33:41] <mcpherrin> Specifically, I don't know how to write regex_empty
[09:33:43] <kimundi> mcpherrin: I know how to fix that, but I don'T yyet know which way you want it to be fixed
[09:34:00] <kimundi> mcpherrin: A wait, I see
[09:34:09] <kimundi> &Seq(~p1, ~p2) -> &Seq(~ref p1, ~ref p2)
[09:34:16] *** Joins: lpy_ (lpy@8B40CDAC.F09091A8.1348A864.IP)
[09:34:21] *** Quits: lpy (lpy@41919AC5.F09091A8.1348A864.IP) (Ping timeout)
[09:34:40] <kimundi> That gives you &Regex instead of an attempt to move out Regex
[09:34:41] *** Joins: Merth (shaun@moz-E41B2C4D.dhcp.mdsn.wi.charter.com)
[09:35:41] <mcpherrin> kimundi: of course :)
[09:36:28] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[09:36:30] <kimundi> mcpherrin: Btw, instead of match some_ref { &A, &B, &C ...} you can always do match *some_ref {A, B, C ...}
[09:36:32] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[09:36:34] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[09:36:40] <kimundi> Its equivalent
[09:36:57] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[09:37:13] <eddyb> because *x doesn't do anything other than change the type
[09:37:15] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[09:37:47] <mcpherrin> kimundi: oh, good point
[09:37:49] <eddyb> (the observable type, that is)
[09:37:59] <mcpherrin> kimundi: I shouldn't be writing code this late at night ;)
[09:38:16] <mcpherrin> I'm not thinking, just whacking against the compiler
[09:38:32] <mcpherrin> but with that, I have a potentially working regex engine, yay
[09:38:43] <kimundi> nice
[09:38:46] *** Joins: jakob (jakob@moz-B56E0BCB.angrykittens.co.uk)
[09:38:58] <jakob> Howdy all, can someone quickly summarize this line for me? *((VGA_ADDRESS + idx) as *mut u16)
[09:39:02] <bakibour> eddyb: yes
[09:39:11] <bakibour> Er sorry
[09:39:15] <bakibour> Either
[09:39:21] <jakob> does it mean pointer to VGA_ADDR+idx as a mutable pointer of a u16
[09:39:39] <mcpherrin> jakob: yes
[09:39:46] <eddyb> bakibour: fn(A, B) -> R is the function type
[09:40:02] <eddyb> jakob: no
[09:40:12] <jakob> mcpherrin + eddyb which one of you is right :D
[09:40:17] <kimundi> jakob: Take the constant integer VGA_ADDRESS, add the variable idx. cast the resulting integer value to an mutable pointer to a u16. Then dereference the result
[09:40:24] <mcpherrin> don't listen to me, I am way too sleepy
[09:40:33] <eddyb> jakob: kimundi spelled it out before I had the chance :D
[09:40:36] <bakibour> eddyb: I tried enum X { Y ( |int| -> int ) } and get an error that the lifetime is not specified.
[09:40:41] <jakob> Uhuh.. ]
[09:40:42] <eddyb> bakibour: |A, B| -> R is the closure type
[09:40:47] <eddyb> bakibour: ahh yeah you need a lifetime
[09:40:53] <jakob> Well im done thanks yall
[09:40:55] *** Parts: jakob (jakob@moz-B56E0BCB.angrykittens.co.uk) ()
[09:40:59] <eddyb> enum X<'a> { Y ('a |int| -> int) } 
[09:41:08] <bakibour> TY :)
[09:41:10] <eddyb> jakob was a bit confusing
[09:41:40] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[09:42:18] *** Quits: Blub\0 (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[09:42:22] *** Joins: lunaryorn (lunaryorn@moz-A51A02E.dynamic.mnet-online.de)
[09:42:31] *** Joins: Blub\0 (wry@620605B3.71150E1A.237AE2BA.IP)
[09:43:22] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[09:44:37] <tiffany> for some reason rustc is telling me that this trait object does not contain the method of the trait it represents
[09:45:55] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[09:46:49] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[09:47:05] *** Quits: alinbsp (alinbsp@moz-57C0678F.leoburnett.ro) (Ping timeout)
[09:47:33] *** Joins: alinbsp (alinbsp@moz-57C0678F.leoburnett.ro)
[09:48:30] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[09:49:40] *** Joins: alonlevy (alon@moz-F53E4C49.redhat.com)
[09:49:56] <aatch_> eddyb, I assume he was here from reddit, Julia made a blog post about her OS project
[09:50:02] *** Joins: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de)
[09:50:11] <eddyb> that code is stole from the first Rust OS btw :P
[09:50:23] <eddyb> pretty much the reason I checked out Rust in the first place
[09:50:25] <eddyb> *stolen
[09:50:33] <eddyb> similar code is also in rustic I think
[09:50:56] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[09:52:15] *** Quits: skade (skade@B0278B5A.505237C9.CAE22B62.IP) (No route to host)
[09:52:17] *** Joins: skade_ (skade@B0278B5A.505237C9.CAE22B62.IP)
[09:52:50] <bakibour> a' is the lifetime placeholder? And what if i want to get a generic type as well?
[09:52:59] <Ms2ger> 'a, not a'
[09:53:10] <mcpherrin> <'a, T, Z>
[09:53:42] <bakibour> Oopsy daisy :) Ty
[09:54:02] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:54:27] *** Quits: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru) (Quit: Leaving.)
[09:55:56] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Ping timeout)
[09:55:59] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[09:56:11] *** Joins: jakob (jakob@moz-B56E0BCB.angrykittens.co.uk)
[09:56:30] <jakob> What is *the* best place to learn rust? :) I feel its time I give it another stab
[09:57:25] <Yurume> start with the tutorial, and ask around here or there (I meant, /r/rust) :)
[09:57:45] <jakob> hm
[09:59:12] *** Quits: aravindavk (aravinda@37D36E3.28A91B20.2F9DE622.IP) (Ping timeout)
[09:59:51] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Ping timeout)
[10:00:03] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[10:00:58] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[10:02:01] *** Quits: alinbsp (alinbsp@moz-57C0678F.leoburnett.ro) (Quit: alinbsp)
[10:03:18] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[10:04:28] *** Joins: tulloch (tulloch@moz-99B7EB8.nat.csx.cam.ac.uk)
[10:06:15] <mcpherrin> https://github.com/mcpherrinm/rust-regex-derivatives
[10:06:45] <mcpherrin> so this smallish test worked out pretty well!  Next step is to generate a DFA using the same techniques
[10:07:01] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[10:07:04] <mcpherrin> And then write a syntax extension with codegen :D
[10:09:23] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[10:09:57] <Yurume> would it be helpful if there is a regex parser (and nothing else) for common patterns, e.g. Perl, PCRE, ERE and so on?
[10:10:34] <Yurume> mcpherrin: ^
[10:12:39] <mcpherrin> Yurume: It could be.
[10:13:03] <mcpherrin> I'm interested in regexes for generating scanners, which you don't really want to use pcres or such for
[10:13:15] <Yurume> AFAIK oniguruma does that
[10:13:17] <mcpherrin> (also because this paper is neat)
[10:13:19] <Yurume> (Ruby's regex engine)
[10:14:18] <Yurume> cf. http://www.geocities.jp/kosako3/oniguruma/doc/API.txt grep for "6 syntax:"
[10:14:53] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[10:15:00] <jakob> Geocities still exists?
[10:15:15] <Yurume> no, but multiple backups exist.
[10:15:26] <Yurume> e.g. http://reocities.com/
[10:21:10] <huon> Yurume: I know at least one person has been stopped by the "write a regex parser" step
[10:21:53] <eddyb> but regex parsers are easy :P
[10:22:05] <jakob> Arn't Regex parsers just finite state machines?
[10:22:23] <mcpherrin> Yes.
[10:22:28] <mcpherrin> no!
[10:22:31] <eddyb> though the ones I wrote were skeletons
[10:22:34] <mcpherrin> I keep saying the wrong thing
[10:22:49] <mcpherrin> The typical language used to describe a regex is context free
[10:23:04] <huon> eddyb: skeletons are easy... it's the details are that are annoying ;P
[10:23:07] <eddyb> just to know when to stop. because parsing JS (as well, skeleton, to know when to stop)
[10:23:44] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:24:15] <eddyb> i.e. you can't tokenize JS without being able to parse a regex
[10:24:19] <mcpherrin> I hope to have demo stuffs hacked together so I can show off at least basic features at the next rust meetup in bay area (not tomorrow)
[10:24:33] <eddyb> and good luck figuring out the division vs regex rules
[10:24:54] <mcpherrin> eddyb: eugh parsing js why would you want to do that
[10:25:15] <mcpherrin> I wrote a Java 1.4 parser in Racket once, that was annoying
[10:25:17] <eddyb> I had a DSL which contained JS code and would end up as a pile of JS code
[10:25:20] <mcpherrin> edge cases everywhere.
[10:25:20] *** Quits: Blaze_ (tuomino2@moz-785A3407.org.aalto.fi) (Broken pipe)
[10:25:26] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:25:44] <eddyb> I basically needed a parser for a DSL to write parsers in
[10:26:10] <eddyb> with which I parsed a different DSL which described a JS API and contained C++ code. see where I'm going with this?
[10:26:36] *** Quits: mpiechotka (mpiechotka@moz-CF1931C2.dynamic.mnet-online.de) (Quit: mpiechotka)
[10:26:44] *** Quits: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP) (Quit: mno2)
[10:27:56] <eddyb> mcpherrin: too bad backtracking is so inefficient
[10:28:03] <eddyb> recursive descent parsers are pretty
[10:28:13] <eddyb> compared to BNF
[10:28:41] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[10:28:55] <eddyb> I actually have an almost complete converter from yacc to recursive descent
[10:29:24] <eddyb> I still need manual tweaks for the awkward recursion tha can show up in yacc parsers
[10:29:44] <eddyb> and the order (which matters in my case, though I could probably solve that without breaking the model)
[10:30:22] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[10:30:59] *** Quits: KimmyLeo (KimmyLeo@10931E07.6FD7A518.CB05CF38.IP) (Client exited)
[10:31:06] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[10:32:37] *** Joins: Ke (jkarlson@moz-785A3407.org.aalto.fi)
[10:32:47] <tiffany> I wanted to write a parser EDSL using rust macros but I don't know enough about rust macros to do that
[10:34:07] <huon> but macros_rule!
[10:34:08] *** Quits: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net) (Quit: mbx)
[10:34:44] <huon> tiffany: (have you seen the http://static.rust-lang.org/doc/master/guide-macros.html introduction?)
[10:35:04] * huon pesters sfackler for the procedural macro section of that...
[10:35:46] <tiffany> I did but it was pretty confusing and it wasn't clear how I would go about implementing something like operator precedence
[10:37:09] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[10:37:43] <eddyb> tiffany: match order
[10:37:52] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[10:37:57] <eddyb> but it's not that easy
[10:39:38] <huon> tiffany: ah... that might be pushing the limits of our macros anyway
[10:39:59] <huon> the parser is really bad at resolving "ambiguities"
[10:40:24] <huon> ... they're normally not at all ambiguous
[10:40:29] <eddyb> there are no ambiguities :P
[10:40:32] <eddyb> there is only order
[10:40:35] <huon> but it still can't cope :(
[10:40:42] <eddyb> order!
[10:41:14] <huon> eddyb: when it can't parse things like [$($e: expr)*] without complaining about the trailing ]... they're a problem :P
[10:41:20] <huon> *there's
[10:41:58] <eddyb> oh that's just it being silly and not stopping when it hits something that can't be the start of an expression
[10:42:03] <eddyb> I think pauls wanted to work on that
[10:42:11] <huon> yes, it might be "just" it being silly
[10:42:16] <huon> but it still doesn't work
[10:42:27] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[10:42:47] <huon> and it fails with "... ambiguous parse ... nt `expr` and 1 other"
[10:42:49] <eddyb> I heard pauls talking about Result propagation from the parser
[10:42:50] <huon> or something like that
[10:43:13] <huon> i.e. the parser is calling it an ambiguity
[10:43:38] <eddyb> which should allow for interesting levels of failure
[10:43:44] <tiffany> howcome I'm getting this error? type `~repr::Comprehension:Send` does not implement any method in scope named `eval`
[10:43:59] <eddyb> an unexpected token when parsing a macro piece should be ignored
[10:44:02] <huon> tiffany: signature of `eval`?
[10:44:12] *** Quits: W0rmDr1nk (wormdrink@5451F9BD.52135167.A77EFE04.IP) (Quit: Leaving)
[10:44:20] *** Joins: W0rmDr1nk (wormdrink@moz-89570CE2.access.mtnbusiness.co.za)
[10:44:21] <eddyb> an unexpected token when parsing something nested in a macro piece (is that what $foo are called? idk), that's a real error
[10:44:23] <tiffany>     fn eval(self, ~[Expr], &Context) -> Result<~[Expr], ~str>;
[10:44:37] <huon> trait objects can't be used with by-value self (yet...)
[10:44:47] <tiffany> oh
[10:44:50] <eddyb> so [()] should work, [(] shouldn't
[10:45:04] <huon> ( https://github.com/mozilla/rust/issues/10672 )
[10:45:49] <eddyb> basically self by value will become &move when it can't be a value
[10:45:58] <eddyb> or anything by value
[10:46:02] <eddyb> so you can move DSTs
[10:46:17] *** Quits: lpy_ (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[10:46:29] <huon> eddyb: *will*? or may?
[10:46:38] <eddyb> huon: nmatsakis wants it
[10:46:55] <huon> it will become `&move`
[10:46:59] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[10:47:03] <eddyb> "honey badger gets what it wants"
[10:47:06] <huon> or will act as if it were `&move`?
[10:47:13] <eddyb> sorry, the latter
[10:47:18] <huon> (the hypothetical &move)
[10:47:23] *** Quits: W0rmDr1nk (wormdrink@moz-89570CE2.access.mtnbusiness.co.za) (Input/output error)
[10:47:37] *** Joins: W0rmDr1nk (wormdrink@moz-89570CE2.access.mtnbusiness.co.za)
[10:47:44] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[10:47:44] <tiffany> the operations available on owned vectors seems somewhat limited
[10:47:45] <eddyb> though I'd rather have Move<Trait> than Trait in arguments because there's multiple future possible interpretation of a non-pointer Trait in an argument slot
[10:48:04] <huon> tiffany: what's missing?
[10:48:35] <tiffany> there's not really equivalents of functions like slices and such, but maybe I'm just using owned vectors weirdly
[10:48:48] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Client exited)
[10:48:49] <tiffany> I want to chop off the first n elements in this particular case
[10:48:52] <huon> ~[] will coerce to &[] when you call a &[] method on it
[10:49:02] <huon> oh
[10:49:02] <huon> and get a ~[]?
[10:49:09] <tiffany> yeah
[10:49:16] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Connection reset by peer)
[10:49:18] <tiffany> the reason I can't use &[] is because sometimes I add elements too
[10:49:31] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[10:49:54] <eddyb> tiffany: you can't safely chop a ~[T]
[10:50:00] <eddyb> you can't split heap allocations
[10:50:03] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[10:50:05] <huon> eddyb: (less experienced rustaceans hang out in #rust, and so saying hypotheticals/imprecise things in absolutes means people get the wrong impression :) )
[10:50:20] <tiffany> I can .remove(0) a bunch of times, though
[10:50:26] <eddyb> you'd need a fancy allocator, which isn't impossible, but hard to design
[10:50:43] *** Quits: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de) (Quit: Leaving.)
[10:50:44] <huon> that's doing an O(N) shift, moving the elements down one place in memory
[10:50:47] <eddyb> or a specialized vector that keeps track of two ends (isn't that some sort of a queue?)
[10:50:59] <eddyb> tiffany: oh yeah, why aren't you using a queue for this?
[10:51:01] <huon> we have collections::RingBuf
[10:51:12] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[10:51:14] <huon> for a vector backed queue
[10:51:17] <huon> deque
[10:51:44] *** Joins: mindcat_ (mindcat@45814CCF.B1E12A5D.57E3C596.IP)
[10:51:46] <tiffany> I'm actually using this to implement a stack
[10:52:04] <huon> why are you working at the front?
[10:52:15] <huon> the back of a vector is all nice and O(1)
[10:52:19] <huon> (.push and .pop)
[10:52:32] <tiffany> because I mixed up slice_to and slice_from again
[10:52:43] <eddyb> oh why did I read that so dirty? /me slaps himself
[10:52:47] <tiffany> I suppose I can use .truncate
[10:52:59] <mindcat_> does ~[].shift is O(1)?
[10:53:04] <huon> yeah, that's better plan
[10:53:10] <eddyb> mindcat_: no, it can't be
[10:53:11] <huon> mindcat_: is it working at the front of the vector?
[10:53:19] <eddyb> shift/unshift are O(N)
[10:53:22] <huon> (front == slow, back  == fast)
[10:53:24] <tiffany> it's kind of annoying that these operations don't return the vector, I have to do {input.truncate(2); input}
[10:53:32] <eddyb> tiffany: kimundi has a macro for that
[10:53:33] <huon> tiffany: write a macro :P
[10:53:38] <eddyb> input->truncate(2)
[10:53:42] <mindcat_> then deque?
[10:53:46] <eddyb> mindcat_: yupp
[10:53:57] <huon> functionally!(input->truncate(2))
[10:54:31] <tiffany> now it's telling me that I can't borrow an immutable argument as mutable
[10:54:34] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:54:42] <huon> input needs to be `mut`
[10:54:47] <tiffany> ~mut?
[10:54:48] *** Joins: Guest___ (textual@moz-77D0F250.nebulazone.fi)
[10:54:54] <eddyb> tiffany: living in the past?
[10:55:02] <huon> let mut a = ~...;
[10:55:05] <tiffany> oh
[10:55:17] <huon> eddyb: be polite  (or make it clearer it's a joke)
[10:55:18] <eddyb> mut ~mut [mut T]
[10:55:21] <mindcat_> does rust program can running in browser?
[10:55:38] <kimundi> https://gist.github.com/Kimundi/9409851
[10:55:47] <mindcat_> I just see asm.js
[10:55:48] <eddyb> huon: I tried then gave up and pressed enter anyways :(
[10:56:03] <kimundi> I'm wondering about that macro btw - It seems like you'd want two different versions of it: One doing the functional take value, return value, and one only mutating ione, but with the nice sugar
[10:56:03] <huon> eddyb: ':P' is magic :P
[10:56:12] <tiffany> I was mostly confused about what you meant by needing to be mut, I forgot that whole "let mut thing = thing" thing
[10:56:22] *** Joins: andelf (fledna@983BB788.FB767B38.1CD28F1D.IP)
[10:56:24] <eddyb> tiffany: if it's an argument, put mut there
[10:56:36] <eddyb> arguments' RHSes are patterns
[10:56:37] <huon> tiffany: you can do `fn foo(mut self, mut thing: ...)`
[10:56:49] * huon mut's all the things \o/
[10:56:50] <tiffany> how old is that?
[10:56:57] <mindcat_> fn getmut(imm : u8 ) { let mut imm = imm; imm = 123; }
[10:57:13] <eddyb> tiffany: patterns in arguments?
[10:57:15] <huon> tiffany: not sure about `self`, but the normal function arg one is old
[10:57:25] <huon> hm
[10:57:25] <huon> wait...
[10:57:25] <eddyb> older than me so like one or two years
[10:57:29] <huon> maybe not having `mut` in patterns though
[10:57:41] <eddyb> that might have been broken at one point
[10:57:46] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[10:57:49] *** Joins: redShadow (redShadow@9BDAF02B.D15F9219.1CCF65D9.IP)
[10:57:53] <eddyb> I remember something about let (mut a, mut b) = (a, b); not working
[10:58:12] <huon> yes
[10:58:23] <bakibour> Can i somehow get infix operators?
[10:58:26] <huon> mut was only recently put in patterns by luqman
[10:58:34] <eddyb> bakibour: you can't add operators :(
[10:58:47] <huon> previously it was part of the `let` construct
[10:58:48] <eddyb> and I'm not ever sure it's even proposed for 1.0
[10:58:49] <bakibour> Well can i have infix functions?
[10:58:51] *** Joins: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP)
[10:58:58] <huon> i.e. the grammar was `let mut? ...`
[10:59:11] <eddyb> bakibour: I feel sad for telling you this, but no
[10:59:12] <huon> bakibour: do you mean custom infix operators, or just + * etc.?
[10:59:24] <eddyb> you can always use macros to create a DSL
[10:59:27] <tiffany> I'm half not that good at rust and half not having used it proper since pre-0.9
[10:59:28] <bakibour> huon: Custom
[10:59:44] <bakibour> eddyb: Thanks ill go that way then.
[10:59:45] <eddyb> tiffany: rust up your rust!
[11:00:08] <tiffany> I did just get this project to compile, which is good
[11:00:10] <bakibour> I saw that rparser is more or less discontinued and was trying to set something up for a parser combinator.
[11:00:12] <huon> tiffany: \o/
[11:00:16] <eddyb> https://s3.amazonaws.com/redditstatic/heavy-load.png pile 'o rust
[11:00:20] <huon> progress
[11:00:24] <bakibour> So it would be nice to have some combination "operators"
[11:00:38] <eddyb> bakibour: yeah, you want macros in combinators. a+ or a* would most likely never be possible in Rust
[11:00:43] <bakibour> Instead of x(x(x(x ...
[11:00:46] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[11:00:49] <huon> bakibour: can abuse >> and + etc.
[11:00:50] <huon> :P
[11:00:56] <eddyb> huon: please don't
[11:01:01] <bakibour> Heh ok :)
[11:01:04] <eddyb> Spirit is such a mess. *x instead of x*
[11:01:25] <bakibour> Is there a working parser combinator for Rust?
[11:01:33] <eddyb> huon: and I'm pretty sure it uses <<
[11:01:45] <tiffany> a parser combinator library written in rust, or a parser combinator for parsing rust?
[11:01:45] <eddyb> bakibour: I don't think so. I was toying with the idea of porting codeaze
[11:01:53] <mindcat_> regex!(let (mut )?(abc|cba) = 0;)
[11:01:59] <bakibour> A parser combinator lib written in Rust.
[11:02:04] <eddyb> which is a parser combinator library I wrote in ES6
[11:02:08] <tiffany> I have a parser combinator library but it's quite out of date by now, and I think it's still stuck on a compiler bug
[11:02:14] <eddyb> but I might never get to that
[11:02:21] <bakibour> tiffany: rparser?
[11:02:25] <tiffany> no
[11:02:26] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[11:02:27] <huon> tiffany: which bug?
[11:02:31] <kimundi> mindcat_: well macros can't be whitespace sensitive, so for something like that you'D rather use string literals in the amcro
[11:02:38] <huon> I've heard that some bugs have been fixed since 0.9 :P
[11:02:40] <tiffany> it's this issue with types having a dependance on each other
[11:02:47] <bakibour> I think it would be totally cool to get something like this in the base libs.
[11:02:59] <tiffany> it used to cause rustc to stack overflow, but I saw that it was fixed on twir
[11:03:05] <huon> tiffany: oh, via mutally recursive traits?
[11:03:08] <tiffany> yeah
[11:03:33] <huon> rusti: trait A: B{} trait B: A {}
[11:03:37] -rusti- task 'rustc' has overflowed its stack
[11:03:37] -rusti- Illegal instruction
[11:03:37] -rusti- application terminated with error code 132
[11:03:46] <huon> not fixed :(
[11:03:47] <bakibour> What is the policy atm anyway to get stuff in the base libs?
[11:04:03] <tiffany> I was trying to make a parser trait with the parser combinator library implementing it, so that I could nest parsers for things which aren't expressed easily (like parsing significant whitespace)
[11:04:10] <eddyb> bakibour: you most likely can't get a parser combinator into the rust repo
[11:04:15] *** Joins: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de)
[11:04:18] <eddyb> bakibour: *unless* you rewrite the Rust parser to use it
[11:04:24] <bakibour> :)
[11:04:29] <eddyb> it's not anything core to the language otherwise
[11:04:36] <bakibour> Ok
[11:04:40] <mindcat_> kimundi: what about then newline, a indent?
[11:04:42] <bakibour> Just out or interest.
[11:04:47] <bakibour> Not that i would like to anyway.
[11:04:54] <eddyb> "Traits could be extended to include non-virtual fields, without us having the concept of base classes." I think this is strcat. props for that comment
[11:05:03] <kimundi> mindcat_: Hm? Could you repeat that?
[11:05:08] <bakibour> Why do you need traits for the parser anyway?
[11:05:10] <eddyb> (from this thread http://thread.gmane.org/gmane.comp.lang.rust.devel/8878 )
[11:05:14] *** Quits: tulloch (tulloch@moz-99B7EB8.nat.csx.cam.ac.uk) (Ping timeout)
[11:05:38] <eddyb> bakibour: my quote? that's something else
[11:05:47] <bakibour> Is there a Rust paste?
[11:05:53] *** Quits: W0rmDr1nk (wormdrink@moz-89570CE2.access.mtnbusiness.co.za) (Input/output error)
[11:05:54] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[11:06:06] *** Joins: W0rmDr1nk (wormdrink@moz-89570CE2.access.mtnbusiness.co.za)
[11:06:15] <huon> mindcat_: no whitespace
[11:06:23] <mindcat_> huon: http://paste.ubuntu.com/7084096/
[11:06:24] <huon> it's all compltely ignored
[11:06:38] <huon> bakibour: gist.github.com has Rust highlighting
[11:06:48] <bakibour> I started out with this here, nopaste.info/760d5fae05.htnl
[11:06:50] <eddyb> almost pressed enter on the same thing
[11:06:51] <bakibour> I started out with this here, nopaste.info/760d5fae05.html
[11:06:57] *** Quits: thesnowdog (doug@E8718008.CDB23781.6F17036B.IP) (Ping timeout)
[11:07:02] <huon> mindcat_: polo
[11:07:10] <mindcat_> huon: I mean how ignore whitespace
[11:07:26] *** Joins: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[11:07:42] *** Joins: thesnowdog (doug@E8718008.CDB23781.6F17036B.IP)
[11:08:19] <mindcat_> I mean indent whitespace
[11:08:26] <eddyb> huon: this was two days ago, I wonder if I can give pcwalton a specialized versions of fixed-position fields in traits
[11:08:43] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[11:09:11] <huon> mindcat_: if you are parsing a string then you have to handle it themselves
[11:09:22] <huon> *itself
[11:09:22] <huon> *yourself
[11:09:28] * huon selfselfself
[11:09:47] <huon> mindcat_: you can only do it with a procedural macro, not a macro_rules! one
[11:09:47] <mindcat_> huon: oooooooooookkkkkkkkkkkkkkkkkkk
[11:09:56] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[11:10:21] <huon> (i.e. you have to actually write code to parse the string, the macro will just receive it as a string literal)
[11:10:22] <mindcat_> huon: procedural macro?
[11:10:35] <huon> like format! and #[deriving], written in Rust
[11:11:05] <mindcat_> huon: does here has some tutorials?
[11:11:11] <huon> nope
[11:11:19] * huon pokes sfackler again
[11:11:24] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[11:11:31] *** Quits: thesnowdog (doug@E8718008.CDB23781.6F17036B.IP) (Ping timeout)
[11:11:32] <huon> http://sfackler.github.io/syntax-ext-talk/ is an example
[11:11:38] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[11:11:47] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[11:12:07] <huon> well, the actual example is https://github.com/sfackler/syntax-ext-talk/blob/gh-pages/simple-ext/lib.rs but those slides have a  the description
[11:12:07] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[11:12:23] *** Quits: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net) (Quit: huon)
[11:13:41] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[11:13:47] *** Joins: thesnowdog (doug@E8718008.CDB23781.6F17036B.IP)
[11:13:55] *** Quits: luziiie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[11:14:07] *** Joins: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net)
[11:14:08] *** ChanServ sets mode: +o huon
[11:14:08] *** Joins: luziiie (luziie@moz-CD18B14B.customer.cdi.no)
[11:14:44] *** Joins: mye (mye@moz-A85331D6.dip0.t-ipconnect.de)
[11:15:25] *** Quits: mye (mye@moz-A85331D6.dip0.t-ipconnect.de) (Quit: mye)
[11:15:39] *** Joins: jaras2 (Janus@1CDC5701.A48867D7.52E4E107.IP)
[11:15:56] <mindcat_> XD YAML!("abc: 123\nbca: \n abc: 123")
[11:16:07] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:16:17] *** Quits: janra (Janus@1CDC5701.A48867D7.52E4E107.IP) (Ping timeout)
[11:16:42] <mindcat_> well, I don't like YAML spec
[11:16:59] *** pmoore|away is now known as pmoore
[11:17:07] *** Quits: thesnowdog (doug@E8718008.CDB23781.6F17036B.IP) (Ping timeout)
[11:18:17] <mindcat_> just please tell me how to write parser, then other handle by programmers
[11:18:18] *** Joins: thesnowdog (doug@E8718008.CDB23781.6F17036B.IP)
[11:18:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:18:32] *** Joins: joh (uid13099@moz-31ABA2C0.irccloud.com)
[11:18:47] *** Quits: alonlevy (alon@moz-F53E4C49.redhat.com) (Ping timeout)
[11:18:49] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[11:18:58] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[11:19:31] <mindcat_> well, I remember who recommend rust-toml and now, I am going use that
[11:21:01] *** Quits: thesnowdog (doug@E8718008.CDB23781.6F17036B.IP) (Ping timeout)
[11:22:26] *** Joins: thesnowdog (doug@E8718008.CDB23781.6F17036B.IP)
[11:23:57] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[11:24:27] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Quit: 전 이만 갑니다.)
[11:25:07] *** Quits: thesnowdog (doug@E8718008.CDB23781.6F17036B.IP) (Ping timeout)
[11:26:29] *** Joins: thesnowdog (doug@E8718008.CDB23781.6F17036B.IP)
[11:26:42] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[11:27:49] * pnkfelix conquers octopress!
[11:28:27] *** Joins: tulloch (tulloch@moz-99B7EB8.nat.csx.cam.ac.uk)
[11:29:21] * huon crowns pnkfelix king
[11:30:03] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[11:31:05] *** Quits: benjamin_____ (benjamin@moz-5CD216D9.dip0.t-ipconnect.de) (Ping timeout)
[11:31:06] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[11:31:08] * mindcat_ just take laser cannon blow pnkfelix and huon they.
[11:31:17] <huon> :'(
[11:31:29] * huon is too young to get laser cannon'd
[11:31:37] <pnkfelix> "laser cannon blow"
[11:31:49] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[11:31:50] <pnkfelix> is that a certain grade of cocaine or something?
[11:32:26] <mindcat_> pnkfelix: I am fired :D
[11:33:00] <bakibour> Is there an online Rust compiler?
[11:33:21] <eddyb> I wonder if playpen is still working
[11:33:22] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[11:33:31] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[11:33:35] <huon> rusti: print!("an approximation to {}", "one")
[11:33:38] -rusti- an approximation to one()
[11:33:39] *** Quits: tulloch (tulloch@moz-99B7EB8.nat.csx.cam.ac.uk) (Ping timeout)
[11:33:43] <eddyb> http://strcat.zapto.org:8000/ :(
[11:33:47] <mindcat_> rusti: print!("bakibour: do you mean this?")
[11:33:47] -rusti- bakibour: do you mean this?()
[11:33:48] *** Joins: tulloch (tulloch@moz-99B7EB8.nat.csx.cam.ac.uk)
[11:33:50] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[11:34:11] <bakibour> I mean more like with an online editor and all.
[11:34:22] <huon> bakibour: not really
[11:34:58] <huon> I think ideone (or something) had/has support for 0.7 or 0.8 or something else ancient 
[11:35:01] <eddyb> bakibour: maybe you can install a Rust nightly package in cloud9?
[11:35:18] <mindcat_> bakibour: heres outdated Rust 0.9 http://www.compileonline.com/compile_rust_online.php
[11:35:29] <bakibour> Ah ty mindcat_  :)
[11:35:41] <eddyb> bakibour: what's the usecase?
[11:35:52] *** Quits: Ferreus (ferreus@moz-942E24F4.dip0.t-ipconnect.de) (Ping timeout)
[11:36:09] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[11:36:19] <bakibour> Id rather like to not install Rust on my private machine and just try out single file stuff.
[11:36:22] <bakibour> Like this
[11:36:36] <mindcat_> when 1.0? at next year?
[11:36:44] *** Joins: WalrusPony (retep998@moz-DBA66FA0.bstnma.east.verizon.net)
[11:36:57] <bakibour> https://gist.github.com/b0urb4k1/9526793
[11:37:05] <eddyb> mindcat_: not before Q3 this year I'd say
[11:37:12] <eddyb> bakibour: what OS/distro?
[11:37:19] <eddyb> there are nightlies
[11:37:23] <bakibour> Windoze 8.1
[11:37:42] <bakibour> I know but i just destroyed my working machine with installing too much stuff that configured the path
[11:37:48] <eddyb> pfffft. how much we love windows (especially me, it just caused my PR to bounce)
[11:37:55] <bakibour> :)
[11:38:00] <eddyb> bakibour: I hope you weren't using the beta
[11:38:11] <bakibour> Nope
[11:38:16] <eddyb> because I know that was suicidal
[11:38:24] <bakibour> It is due to like 20 other programs :)
[11:38:25] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[11:38:34] <bakibour> The path is so long it doesnt fit anymore.
[11:39:00] <mindcat_> sometimes win$ is pretty (good|damn)
[11:39:01] <bakibour> So its broken and i cant even edit it anymore via the GUI :)
[11:39:26] <bakibour> I dont want to do that on my home machine though, since i dont want to get into all the hassle to fix it.
[11:39:35] <bakibour> Would take me several days since my time is so limited.
[11:39:43] *** Quits: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP) (Quit: bbl)
[11:39:53] <WalrusPony> I routinely clean out my path
[11:39:59] <mindcat_> bakibour: do you like arch linux?
[11:40:01] <bakibour> Could anyone have a quick look at the gist i posted and do a sanity check?
[11:40:11] *** Joins: rootnode (rootnode@moz-35BACBD2.pools.arcor-ip.net)
[11:40:27] <eddyb> bakibour: result: very insane
[11:40:29] <bakibour> mindcat_: I do quite, but i do not think that i am deep enough in lx to get it running :)
[11:40:49] <WalrusPony> Question: How do I do something as trivial as having the user type in a number in the console and having it parsed in as a number in my rust code?
[11:40:53] <bakibour> eddyb: Why?
[11:41:04] <eddyb> bakibour: first of all, sorry, but you've managed to go as far as possible from idiomatic Rust *code style* as I've ever seen
[11:41:10] <eddyb> so congratz on that record
[11:41:16] <bakibour> HAHAHAH
[11:41:52] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[11:42:01] <mindcat_> bakibour: oh damn, you win
[11:42:16] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[11:42:20] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[11:42:25] <tiffany> whoa
[11:42:40] <tiffany> that reminds me of how some people write haskell arrays
[11:42:51] <bakibour> Yep that is what it should look like.
[11:43:00] <bakibour> Rust allows me to write everything like this.
[11:43:17] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[11:43:27] <eddyb> bakibour: saner https://gist.github.com/eddyb/9526858
[11:43:29] <WalrusPony> Is there any sort of easy formatted console input in rust?
[11:43:43] <eddyb> bakibour: now, to remove redundancy
[11:43:45] *** Joins: bharadwaj (uid11995@moz-5F4AA75A.irccloud.com)
[11:43:46] <WalrusPony> maybe some variant of scanf? I don't know Q_Q
[11:44:37] <bakibour> eddyb: Aye
[11:45:23] <eddyb> bakibour: kinda more idiomatic https://gist.github.com/eddyb/9526858
[11:45:28] <huon> bakibour: are you expecting to add more variants to the Parser enum?
[11:46:06] <bakibour> huon: Not yet, i was thinking about that earlier but i am not yet entirely sure if that is necessary.
[11:46:17] <bakibour> Like in iteratees, something like that.
[11:46:26] <eddyb> iteratees?
[11:46:34] <eddyb> as in, the targets of iteration?
[11:46:41] <huon> eddyb: haskell library
[11:46:44] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[11:46:52] *** Joins: mib_b9qosw (Mibbit@moz-4DD3D7F5.dk.customer.tdc.net)
[11:46:54] <huon> well, not just haskell
[11:46:57] <eddyb> huon: that explains the name
[11:46:57] <huon> and not really a library
[11:46:59] <bakibour> huon: ty
[11:46:59] <huon> http://en.wikipedia.org/wiki/Iteratee
[11:47:02] <eddyb> lol
[11:47:14] <eddyb> and not really about iterators, amirite?
[11:47:15] <mindcat_> should I port python some method like nl!(~[x for x in range(0,9) if x % 2])
[11:47:22] <huon> eddyb: well it kinda is
[11:47:23] <bakibour> It was just something i thought about first, but im not yet sure.
[11:47:23] *** Quits: mib_b9qosw (Mibbit@moz-4DD3D7F5.dk.customer.tdc.net) (Quit: http://www.mibbit.com ajax IRC Client)
[11:47:39] <huon> eddyb: it's basically an API like Port/Chan + .try_recv
[11:47:53] <bakibour> First i would like to get something like a minimal combinatory parser.
[11:49:07] <eddyb> you'd usually have something like enum Parser {Seq(Vec<Parser>), Or(Vec<Parser>), Tok(Token)}
[11:49:20] *** Quits: tulloch (tulloch@moz-99B7EB8.nat.csx.cam.ac.uk) (Ping timeout)
[11:49:38] <eddyb> I don't like separate tokenization, but I expect most other people do
[11:49:55] *** Joins: tulloch (tulloch@moz-99B7EB8.nat.csx.cam.ac.uk)
[11:49:59] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[11:50:53] *** Joins: Ferreus (ferreus@moz-30FCBB63.dip0.t-ipconnect.de)
[11:51:18] <bakibour> Yes that looks a bit ugly.
[11:51:30] <eddyb> why exactly?
[11:51:41] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[11:51:41] <bakibour> Doesnt it look a bit unreadable?
[11:51:47] <mindcat_> what mean keyword "let"
[11:51:50] <bakibour> Loads of brackets and so.
[11:52:05] <eddyb> mindcat_: declares a local
[11:52:08] <bakibour> mindcat_: Do you know C# or C++11?
[11:52:18] <eddyb> auto auto = auto auto();
[11:52:22] <bakibour> :)
[11:52:23] *** Quits: Merth (shaun@moz-E41B2C4D.dhcp.mdsn.wi.charter.com) (Ping timeout)
[11:52:23] <mindcat_> bakibour: no
[11:52:25] <bakibour> or var var var
[11:52:30] <eddyb> har har har
[11:52:38] <eddyb> hmm, I never thought about this... but you can encode a combinatorial parser in Rust types. not so nice without VG but still powerful
[11:52:46] <mindcat_> bakibour: I was try to learn C艹, but I give up
[11:52:50] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[11:52:54] <WalrusPony> auto auto(auto auto) -> auto {return auto;}
[11:53:04] <eddyb> WalrusPony: lovely
[11:53:18] <eddyb> and use &'static T when having to deal with indirection. the types are empty anyways
[11:53:21] <bakibour> eddyb: VG?
[11:53:29] *** Quits: kvanb (kvanb@6B837AF3.9FF56AB5.1611EE05.IP) (Quit: kvanb)
[11:53:32] <eddyb> or you can use the types to hold caches
[11:53:36] <WalrusPony> Now then, I'm STILL wondering if there is a convenient way to read in formatted stuff like numbers and shit from stdin, if the user types it in
[11:53:38] <eddyb> bakibour: variadic generics
[11:53:41] <bakibour> Ah
[11:53:44] <WalrusPony> instead of having to parse the raw bytes
[11:53:51] <bakibour> Well i will try to see how far i can push it this way.
[11:54:02] <eddyb> WalrusPony: you can read an entire line or up to a certain delimiter
[11:54:10] <eddyb> WalrusPony: and then use from_str on a slice
[11:55:35] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:55:36] <eddyb> bakibour: the awesome part about encoding information in types is that they will produce code as if you were a parser generator or you wrote the parser manually
[11:55:52] <bakibour> Aye
[11:55:53] *** pmoore is now known as pmoore|away
[11:56:28] <bakibour> What type would i be able to abuse for combining?
[11:56:42] <bakibour> I can not put it in an enum can i?
[11:56:51] <eddyb> put what?
[11:57:05] <bakibour> Well in C++ i would be able to model the combinators with templates.
[11:57:11] <eddyb> bakibour: Rust has generics
[11:57:24] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Ping timeout)
[11:57:29] <eddyb> struct And<A, B> {first: A, then: B}
[11:57:44] <bakibour> Ok so structs might to the trick.
[11:57:50] <bakibour> What i had in mind was something like
[11:58:18] <kimundi> WalrusPony: we don't have a scanf equivalent right now sadly - someone wrote one ages ago, but it never went somewhere
[11:58:24] <bakibour> Parser <...,R> , Parser <...,R2> -> Parser<...,(R,R2)>
[11:58:54] <eddyb> bakibour: you can do that, with the enum method
[11:59:26] <bakibour> Yep so i should be fine, all i need to get for sugar is the infix stuff, ill dig into the macros for that as you mentioned earlier.
[11:59:39] <mindcat_> rusti: struct A { a : B}; struct B { a : C }; struct C { a : A } 
[11:59:40] -rusti- pastebinned 20 lines of output: http://sprunge.us/DRCE
[11:59:56] *** Joins: Anupkumar (uid16774@moz-A42E5B7B.irccloud.com)
[12:00:04] <eddyb> bakibour: with variadic generics, you wouldn't have nested tuples, just one tuple
[12:00:39] <kimundi> (well, with VG you can express converting the one into the other and otherway round)
[12:00:39] <WalrusPony> kimundi: If there was at least regex, it wouldn't be so bad :(
[12:00:40] <bakibour> *nods*
[12:01:05] <kimundi> WalrusPony: Yeah...
[12:01:17] <kimundi> WalrusPony: A scanf! wouldn't even be that hard to write
[12:01:30] <huon> Yurume is working on something like that
[12:01:31] <huon> iirc
[12:01:51] <mindcat_> does scanf is powerful?
[12:01:53] <kimundi> WalrusPony: The hardest part would be writing the implementation for each type you'd want to parse that way
[12:02:08] <WalrusPony> kimundi: Just from_str everything?
[12:02:11] <eddyb> because you need something like FromStr
[12:02:21] <eddyb> *but with a "used length"*
[12:02:25] <kimundi> WalrusPony: Well, more FromPrefixStr
[12:02:39] <eddyb> and -> Option<(Self, uint)>
[12:02:56] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[12:03:04] <kimundi> like from_str_prefix::<int>("133414 blah blah") -> 133414, " blah blah"
[12:03:29] <eddyb> &mut &str?
[12:03:29] <kimundi> Could probably integrate that with the existing FromStr trait
[12:03:29] <WalrusPony> While I really love Rust as a language, and how its built on libuv which makes stuff like unicode/ansi escape codes just work on windows
[12:03:52] <WalrusPony> the standard library itself is still lacking a lot of stuff I'm used to from C++
[12:03:59] <huon> it's a work in progress
[12:04:14] <WalrusPony> I can imagine, you haven't even hit 1.0 yet
[12:04:19] <eddyb> WalrusPony: yeah, for some reason we don't need highschool-C++-level features that much
[12:04:22] <huon> C++ has had a little bit of a head start on library implementations
[12:04:31] <eddyb> so they get a bit neglected
[12:04:53] <eddyb> WalrusPony: it's also the finite workforce
[12:04:53] <kimundi> WalrusPony: definitly, the language, idioms and library ecosystem itself is still changing enough that we haven't really started to cover all bases
[12:05:25] <eddyb> I can really see FromStrPrefix getting implemented on tuples
[12:05:25] <huon> (and won't, even at 1.0)
[12:05:26] <mindcat_> does rust can overload anythings?
[12:05:35] <eddyb> mindcat_: not on arity
[12:05:37] <huon> mindcat_: what does that mean?
[12:05:42] <huon> overload operators?
[12:05:47] <huon> overload functions like C++?
[12:06:02] <mindcat_> huon: yea
[12:06:11] <eddyb> mindcat_: you can overload function/methods on a fixed number of argument types with traits
[12:06:22] <huon> mindcat_: "yes"?
[12:06:30] <eddyb> but I'm not going to show you how because I have other things to do
[12:06:31] <huon> I asked two questions... yes to both?
[12:06:54] <mindcat_> huon: well... confused
[12:07:04] <eddyb> you? what about us :P
[12:08:01] <eddyb> huh, does Gc have a borrow method?
[12:08:13] <huon> mindcat_: did you mean overload operators, or did you mean overload functions?
[12:08:17] <huon> or did you mean both?
[12:08:25] <kimundi> eddyb: SHouldn't you know the most? ;)
[12:08:27] <eddyb> rusti: *::std::gc::Gc::new(5)
[12:08:28] -rusti- <anon>:11:9: 11:31 error: type `std::gc::Gc<<generic integer #0>>` cannot be dereferenced
[12:08:28] -rusti- <anon>:11         *::std::gc::Gc::new(5)
[12:08:28] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~
[12:08:29] -rusti- error: aborting due to previous error
[12:08:29] -rusti- application terminated with error code 101
[12:08:43] <eddyb> what... happened to type Gc<T> = @T?
[12:08:49] <eddyb> rusti: *::std::gc::Gc::new(5).borrow()
[12:08:51] -rusti- 5
[12:08:59] <eddyb> well, I don't care about Gc and I don't want any more failures
[12:09:05] *** Joins: jadbaires (jadrian@6A33146B.2BA9FC33.6119BA41.IP)
[12:09:14] <huon> eddyb: it's a struct
[12:09:22] <huon> wrapping @ opaquely
[12:09:29] <huon> i.e. the only sensible thing to do :P
[12:09:36] <kimundi> so you need to implement deref for it :P
[12:09:42] <eddyb> nope
[12:09:51] <eddyb> someone else can do it once we have a real GC
[12:10:12] <eddyb> does that mean we can't remove @ before we a get a GC :S?
[12:10:23] <eddyb> I guess we can make Gc use Rc and look the other way
[12:10:40] <eddyb> such illusion. much choice
[12:10:41] <kimundi> eddyb: That sounds like a sane temporary fallback
[12:10:54] <WalrusPony> pfffft, who needs a GC?
[12:11:09] <eddyb> WalrusPony +1
[12:11:35] <kimundi> Well servo successfully uses the javascript garbage collector to allocate rust values and use them in rust code :)
[12:11:47] <kimundi> Js<Foo>
[12:12:39] <kimundi> Obvious solution: Ship Spidermonkey with Rust
[12:12:44] <mindcat_> its time to doing that. https://github.com/nekoheart/libnekoneko/blob/master/ptrbuffer.rs
[12:13:21] *** Joins: canhtak (canhtak@moz-9F5D2CD3.wl.t.ulaval.ca)
[12:15:09] <kimundi> mindcat_: what exactly is giving you trouble there?
[12:15:28] <mindcat_> kimundi: how implement buffer?
[12:16:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:18:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:18:31] <kimundi> mindcat_: What buffer?
[12:18:53] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[12:18:55] <mindcat_> kimundi: https://github.com/nekoheart/libnekoneko/blob/master/ptrbuffer.rs#L138
[12:19:20] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[12:19:35] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[12:20:12] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[12:20:14] <kimundi> mindcat_: The commented out code there implies that Buffer is a trait, but I don't see it imported or defined anywhere else in the the file, where is it coming from?
[12:21:06] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[12:23:31] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[12:25:14] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[12:25:26] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[12:25:36] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[12:25:39] <mindcat_> kimundi: question is, or I know how did. how do turn a ptr for a fixed vector?
[12:25:53] <mindcat_> cast?
[12:26:06] <kimundi> mindcat_: Sorry, I do not understand what you'Re asking
[12:26:44] *** Joins: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net)
[12:26:58] <eddyb> (*T, len) -> &[T]?
[12:27:07] <mindcat_> eddyb: right
[12:27:20] <eddyb> vec::from_ptr or something like that
[12:28:39] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[12:29:19] *** Quits: ruzu (quassel@moz-2AAEC710.austin.res.rr.com) (Client exited)
[12:30:46] <huon> extra::c_vec::CVec::new
[12:30:51] <huon> then .as_slice on the resulting type
[12:30:57] <huon> s/type/value/
[12:31:18] <huon> (or std::vec::raw::buf_from_ptr, iirc, but this one uses a closure)
[12:31:28] <mindcat_> I see here, but it has do copy http://static.rust-lang.org/doc/master/src/std/home/rustbuild/src/rust-buildbot/slave/doc/build/src/libstd/vec.rs.html#2543-2548
[12:32:38] <huon> mindcat_: oh, buf_as_slice
[12:32:41] <huon> just above that
[12:32:49] <huon> anyway, I would personally recommend using CVec
[12:33:32] <mindcat_> huon: XD
[12:34:32] *** Joins: renox (Mibbit@D73BDEA8.B0C273C.251FC120.IP)
[12:34:59] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[12:36:26] <mindcat_> rusti: use extra::c_vec::CVec; let mut a = [0,1,2,3]; let mut b = unsafe {CVec::new(a.as_mut_ptr(),4).as_slice()}; b[2] = 122; assert_eq!(a[2], b[2])
[12:36:27] -rusti- pastebinned 15 lines of output: http://sprunge.us/PQVG
[12:38:15] <mindcat_> rusti: use extra::c_vec::CVec; let a = *mut [0,1,2,3]; let mut b = unsafe {CVec::new(a,4).as_slice()}; b[2] = 122; assert_eq!(*a[2], b[2])
[12:38:15] -rusti- pastebinned 7 lines of output: http://sprunge.us/QHgU
[12:38:35] <mindcat_> :S
[12:39:07] <renox> Hello everybody.
[12:40:21] *** Joins: mno2 (mno2@moz-3506EAC7.singnet.com.sg)
[12:40:38] <renox> I was looking at Rust and I tried to find how to express "unit types" (meters, centimeters, seconds, etc) in Rust, but my google search wasn't successful.. Is-there something planned on this subject?
[12:40:53] <huon> mindcat_: *mut [...] is meaningless
[12:41:29] <huon> rusti: use extra::c_vec::CVec; let mut a = [0,1,2,3]; let mut b = unsafe {CVec::new(a.as_mut_ptr(),4)}; b.as_slice()[2] = 122; assert_eq!(a[2], b.as_slice()[2])
[12:41:30] -rusti- pastebinned 5 lines of output: http://sprunge.us/bTYS
[12:41:31] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[12:41:46] *** Quits: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net) (Connection reset by peer)
[12:41:48] <huon> rusti: use extra::c_vec::CVec; let mut a = [0,1,2,3]; let mut b = unsafe {CVec::new(a.as_mut_ptr(),4)}; b.as_mut_slice()[2] = 122; assert_eq!(a[2], b.as_slice()[2])
[12:41:48] -rusti- ()
[12:42:23] *** jorendorff_away is now known as jorendorff
[12:44:34] *** Quits: redShadow (redShadow@9BDAF02B.D15F9219.1CCF65D9.IP) (Ping timeout)
[12:44:35] *** Quits: jadbaires (jadrian@6A33146B.2BA9FC33.6119BA41.IP) (Quit: Konversation terminated!)
[12:47:41] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[12:48:46] *** Quits: gsnedders (gsnedders@C95C83A3.84389009.803EA162.IP) (Ping timeout)
[12:49:40] *** Quits: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de) (Quit: Leaving.)
[12:49:47] <mindcat_> rusti: use extra::c_vec::CVec; let a = &mut [0,1,2,3]; let mut b = unsafe {CVec::new(a.as_mut_ptr(),4)};let b = b.as_mut_slice(); b[2] = 122; assert_eq!(a[2], b[2])
[12:49:48] -rusti- ()
[12:49:58] <mindcat_> ouch
[12:50:34] *** Joins: mib_au991d (Mibbit@F2BF82B1.8AF85F11.3134EA48.IP)
[12:50:44] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[12:51:55] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[12:52:24] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[12:52:35] *** Quits: mib_au991d (Mibbit@F2BF82B1.8AF85F11.3134EA48.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:52:39] *** Quits: rofrol (rofrol@moz-8C55345C.static.ptr.magnet.ie) (Ping timeout)
[12:52:45] *** Quits: burntsushi (burntsushi@moz-27A1B1D8.dhcp.oxfr.ma.charter.com) (Ping timeout)
[12:53:08] *** Quits: pigoz (pigoz@moz-93D3080C.as5577.net) (Ping timeout)
[12:54:20] *** Joins: burntsushi (burntsushi@moz-27A1B1D8.dhcp.oxfr.ma.charter.com)
[12:54:29] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[12:55:50] *** Quits: tulloch (tulloch@moz-99B7EB8.nat.csx.cam.ac.uk) (Ping timeout)
[12:56:01] *** Joins: edwardw (edwardw@1D7F790C.5EE4C3F5.F113998C.IP)
[12:56:25] *** Joins: rofrol (rofrol@moz-8C55345C.static.ptr.magnet.ie)
[12:56:42] *** jorendorff is now known as jorendorff_away
[12:56:45] *** Joins: pigoz (pigoz@moz-93D3080C.as5577.net)
[12:57:21] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[12:57:56] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[12:58:18] *** Joins: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de)
[12:58:27] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[12:59:03] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[12:59:22] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Quit: Leaving)
[13:00:39] *** Joins: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP)
[13:01:02] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[13:02:52] <ChrisMorgan> renox: there is no good support for units at present. You may be able to make satisfactory support yourself with enums with variants.
[13:03:21] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[13:03:46] <kimundi> Or just newtyped integers and floats
[13:03:55] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[13:04:58] <ChrisMorgan> Yeah; how it's best to do it depends a little on what you want to achieve.
[13:04:59] *** Joins: dagle (dagle@moz-B17C4A95.cust.tele2.se)
[13:06:31] <dagle> Does rust have something like haskell-dyre or anything in that area? (http://hackage.haskell.org/package/dyre)
[13:06:52] *** Joins: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net)
[13:07:09] *** Quits: IanCormac84 (User@10EF4CC3.64D641E5.67DFF8B4.IP) (Ping timeout)
[13:08:33] <eddyb> dagle: I can't tell what that's for, reading the description
[13:08:40] *** Joins: IanCormac84 (User@EABF597F.2A8D8854.67DFF8B4.IP)
[13:09:13] <eddyb> https://github.com/willdonnelly/dyre ok, this makes more sense
[13:09:17] <dagle> eddyb: It allows you to write config files in haskell.
[13:09:51] <eddyb> so the equivalent would be a config.rs that gets automatically recompiled?
[13:10:16] <dagle> That would do, though it does a bit more than that.
[13:10:34] <eddyb> that's kinda incompatible with the rust execution model. maybe if you make it a dynamic library? still seems a bit excessive for config though
[13:10:53] <dagle> With dyre, you can pretty much redefine the whole program, it only gives you a default that you can build upon and that default is the default binary.
[13:11:27] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[13:11:28] <eddyb> well, we have built in conditional compilation
[13:11:33] *** Quits: oxum (anonymous@B9BFB4B1.77B59FE0.520CDC98.IP) (Ping timeout)
[13:11:52] <huon> dagle: the answer to your original question is (afaik) no-one has written such a library
[13:11:57] <dagle> Ok.
[13:12:06] <eddyb> seems a really odd thing to have IMO
[13:12:17] <huon> good for you
[13:12:33] *** Joins: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP)
[13:12:34] * huon <3 xmonad
[13:12:34] <eddyb> if it changed the way your code is compiled, maybe it would make sense as a syntax extension
[13:12:49] <krdln> renox: question about units returns from time to time, it will be easy with integer-parametrized structs. Is support for such thing planned in near future?
[13:12:58] <eddyb> huon: I still don't understand what it does that isn't an overcomplication
[13:13:07] <huon> eddyb: it's basically "configure the program by editing the source", but with "the program" being provided as a library linked in
[13:13:08] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[13:13:16] <dagle> It doesn't change how your code is compiled tbh. It's just a bunch of "trixs" that fools you.
[13:13:28] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:13:31] *** Quits: kris (kris@moz-147EE6DF.diku.dk) (Client exited)
[13:13:31] <eddyb> I don't like being fooled
[13:13:40] <eddyb> huon: so I was right guessing dynamic library loading?
[13:13:41] <bstrie> we won't get fooled again
[13:13:52] <dagle> No, not dynamic library loading.
[13:14:20] <dagle> It compiles your config into a program, the main program sees your program and exec your program instead.
[13:14:30] *** Joins: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net)
[13:14:40] <eddyb> dagle: that's a complicated version of dynamic library loading AFAICT
[13:14:42] <huon> (i.e. the "main program" is a wrapper that executes the compiled configuration)
[13:14:47] *** Joins: kris (kris@moz-147EE6DF.diku.dk)
[13:14:58] <eddyb> so what contains *your* code? and what contains the config?
[13:15:00] *** Joins: oberstet (quassel@moz-7BA59BB5.dynamic.mnet-online.de)
[13:15:04] <eddyb> it really makes no sense so far
[13:15:05] <huon> your code is the config
[13:15:10] *** pmoore|away is now known as pmoore
[13:15:21] <eddyb> why does it have to be code?
[13:15:39] <eddyb> and what does it do... I mean, if the only code there is the config...
[13:15:39] *** Joins: oxum (anonymous@A91C38A3.81D533B5.520CDC98.IP)
[13:15:39] <huon> because code is waaaay more powerful than not code
[13:15:59] <huon> get to define completely custom keybindings and window tiling layouts (in the context of xmonad)
[13:16:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:16:40] <huon> the most basic equivalent would be `extern crate xmonad; fn main() { xmonad::default_main() }` 
[13:16:45] <eddyb> okay, so data-is-code, get to use ADTs and whatnot, that makes sense
[13:17:08] <eddyb> huon: oh, statically linking against something and providing configuration to it?
[13:17:10] <huon> and then stuff like fn main() { xmonad::run_main(xmonad::Config { ... }) }`
[13:17:15] <huon> etc.
[13:17:20] <eddyb> now it kinda makes sense
[13:17:20] *** Quits: andelf (fledna@983BB788.FB767B38.1CD28F1D.IP) (Quit: This computer has gone to sleep)
[13:17:25] <huon> something == a library
[13:17:39] <eddyb> an rlib, like librustc, right?
[13:17:48] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[13:17:59] <huon> and the library is providing everything you need for a complete program, but you get to write wrappers over it to customise behaviour
[13:18:11] <eddyb> dagle: now... why would you need a library to do this? it looks like straight forward bootstrapping
[13:18:13] <huon> (or jsut call default_main() to use the default main)
[13:18:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:18:38] <huon> did you read http://hackage.haskell.org/package/dyre-0.8.11/docs/Config-Dyre.html ?
[13:18:43] <eddyb> yes
[13:18:52] <huon> "The Relaunch module provides the ability to restart the program (recompiling if applicable), and persist state across restarts"
[13:18:52] <eddyb> wait, not that
[13:18:57] <huon> doesn't sound so straight forward :P
[13:19:00] * huon -> bed
[13:19:03] *** Joins: benjamin_____ (benjamin@moz-5CD216D9.dip0.t-ipconnect.de)
[13:19:16] <dagle> Code is more powerful than not code and I don't think people in general would agree with my settings.
[13:19:46] *** Joins: IanCormac841 (User@B21EA5AC.2A8D8854.67DFF8B4.IP)
[13:20:03] *** Quits: IanCormac84 (User@EABF597F.2A8D8854.67DFF8B4.IP) (Ping timeout)
[13:20:09] *** Joins: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP)
[13:20:19] <eddyb> dagle: not that you can't serialize ADTs in Rust :P
[13:20:23] *** Quits: renox (Mibbit@D73BDEA8.B0C273C.251FC120.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:20:30] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[13:20:35] <Earnestly> Does Dyre, like xmonad, just convert the state to a list and pass Read it in on the other end/
[13:20:47] <Earnestly> s/pass//
[13:20:54] *** Quits: claudiu_ (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP) (Ping timeout)
[13:21:20] <eddyb> dagle: so now that I see what it is - though I still don't understand what Relaunch does, why do you need an actual library for this?
[13:21:25] <Earnestly> When you recompile xmonad and relaunch it, it just serialises the state and passes that to the new xmonad
[13:22:07] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[13:22:11] <Earnestly> So all your layouts and such remain intact, not very elegant though and does limit some of what you can do
[13:22:13] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[13:22:28] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[13:24:09] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[13:24:26] <dagle> eddyb: Relaunch is a way to reload the config and save the state. It's not the most beautiful thing and idk if I really need that.
[13:25:01] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[13:25:40] *** Joins: grandy (grandy@2B4EAEBB.44053F84.4F36BED4.IP)
[13:26:11] <eddyb> dagle: how do you save the state?
[13:26:22] <eddyb> dagle: does it hook into some low-level Haskell trickery?
[13:26:41] <eddyb> there is no syntax highlighting and no docs for Relaunch
[13:28:33] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[13:28:41] <herrwolfe45> huon - are you huonw on github?
[13:29:06] <eddyb> (yes)
[13:29:15] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[13:29:37] <dagle> eddyb: It does it by serializing the state writing and reading it. Reloading is mostly just a convient thing.
[13:29:47] <eddyb> how does it serialize the state?
[13:29:53] <eddyb> do you need explicit support everywhere?
[13:30:17] <dagle> Converting it to strings or into a binary form that you instruct dyre how to create.
[13:30:23] *** Joins: bollu (bollu@31CCE710.7065DDB9.6D6A344F.IP)
[13:30:30] *** Joins: Ms2ger (Ms2ger@moz-4A14BC33.ugent.be)
[13:30:34] <eddyb> I can't see this working for anything larger than a couple hundred lines
[13:30:36] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[13:30:45] <eddyb> unless, again, Haskell somehow helps
[13:31:00] <eddyb> and by Haskell I mean GHC because this is an implementation detail AFAIK
[13:31:19] *** Joins: redShadow (redShadow@9BDAF02B.D15F9219.1CCF65D9.IP)
[13:32:14] *** Quits: luziiie (luziie@moz-CD18B14B.customer.cdi.no) (Connection reset by peer)
[13:32:19] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[13:32:25] <dagle> I think you view it the wrong way.
[13:32:26] *** Joins: luziiie (luziie@moz-CD18B14B.customer.cdi.no)
[13:32:42] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[13:33:01] <krdln> eddyb: Just deriving(Show,Read) – so much for explicit support
[13:33:20] <dagle> It's not some kind of binary patching, all of the functions you load into dyre is needs to be exported into modules that haskell can load.
[13:33:28] <mindcat_> any rust compiler nightly windows build?
[13:33:37] <eddyb> krdln: oh, so it's like Encodable/Decodable
[13:33:52] *** Quits: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP) (Ping timeout)
[13:34:11] <krdln> I thought relaunch can start the executable from the same place, but it only relaunches and you have to load saved state manually. Am I right?
[13:34:29] <dagle> What dyre does is just: Create a lib, create a binary, create some default settings and create some helper functions from the same source.
[13:34:45] <krdln> (I am guessing from http://hackage.haskell.org/package/dyre-0.8.11/docs/Config-Dyre-Relaunch.html)
[13:35:13] <dagle> Tbh, you don't need to run the main program at all, you could just run your config.
[13:35:21] <bollu> strcat: can I have the arch alternate source for Rust? (thestinger) ?
[13:36:19] <dagle> All the main program does is: Tries to find a config, compile the config, change process to the config.
[13:36:33] <dagle> And if that fails, it runs it self with the defaults.
[13:36:46] *** Joins: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP)
[13:37:08] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[13:37:51] <dagle> eddyb: That is why I call it fooling. Because it really doesn't do anything fancy, but it might look like it.
[13:38:12] <eddyb> dagle: then you don't really need a library for it at all
[13:38:29] <dagle> I guess I could write my own wrapper around it yes.
[13:38:48] <Tari> mindcat_: https://www.nuget.org/packages/Rust/
[13:39:02] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[13:41:44] <bollu> does the rust stdlib have interpolation functions somewhere?
[13:42:34] *** Joins: gsnedders (gsnedders@C95C83A3.84389009.803EA162.IP)
[13:42:44] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[13:45:30] <mindcat_> Tari: I see
[13:45:42] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[13:47:07] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Connection reset by peer)
[13:48:30] <bollu> https://gist.github.com/cebee63b4c47d063da77 <- help with creating a generic lerp function
[13:49:22] *** Quits: goffrie_ (goffrie@moz-D4A502E6.dsl.ncf.ca) (Ping timeout)
[13:50:05] *** Joins: goffrie (goffrie@moz-C2CB54DA.dsl.ncf.ca)
[13:50:09] *** Quits: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP) (Input/output error)
[13:50:18] <krdln> bollu: first of all, separate traits with + not comma
[13:50:43] *** Joins: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP)
[13:50:44] *** ChanServ sets mode: +o jdm
[13:51:05] <bollu> krdln: ty. I fixed the rest of it, like the ; and the non-existent return type >_>
[13:51:08] <krdln> bollu: and change integer literal to float literals (e.g 1.0 or 1f32)
[13:51:19] <bollu> krdln: ah, yes. ty
[13:51:30] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[13:51:40] <bollu> thanks!
[13:52:01] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[13:52:06] <bollu> krdln: I didn't find it in the manual. is it even there in the Rust manual?
[13:53:16] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[13:53:43] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[13:54:00] <krdln> bollu: What you didn't find?
[13:54:53] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[13:55:21] *** Quits: edwardw (edwardw@1D7F790C.5EE4C3F5.F113998C.IP) (Ping timeout)
[13:56:28] <bollu> krdln: the + operator
[13:56:37] <mindcat_> can I compile rust with clang in windows?
[13:56:40] <bollu> for using multiple trait restrictions
[13:57:08] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:57:28] <krdln> bollu: In tutorial: http://static.rust-lang.org/doc/master/tutorial.html#bounded-type-parameters-and-static-method-dispatch
[13:58:05] <bstrie> mindcat_: unless you enjoy frustration, I wouldn't attempt to compile rust on windows via any approach other than the official one
[13:58:14] *** Joins: edwardw (edwardw@EA6A9A16.6707B7A9.D06A5682.IP)
[13:58:59] *** Joins: claudiu_ (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP)
[13:58:59] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Connection reset by peer)
[13:59:19] <mindcat_> bstrie: I just want rust complier :S
[13:59:55] <krdln> I don't see it in manual, weird.
[14:00:07] *** Quits: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP) (Ping timeout)
[14:00:11] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Ping timeout)
[14:00:41] *** Quits: ChrisOei (ChrisOei@moz-30D80888.hsd1.ca.comcast.net) (Ping timeout)
[14:01:16] *** Joins: Rym (y@6C711401.48E527D5.51C6DE68.IP)
[14:02:30] <bstrie> mindcat_: can you use https://www.nuget.org/packages/Rust/ ?
[14:02:45] *** Joins: pepper_chico (pepper_chi@moz-E15D42C8.dsl.telesp.net.br)
[14:03:18] <edwardw> auto deref landed. hurray!
[14:03:24] <pepper_chico> time to build rust again =) #12610 merged
[14:03:29] <bollu> edwardw: what implication does it have?
[14:03:38] <edwardw> no more get get get...
[14:04:02] <mindcat_> bstrie: so how can I download that? nuget?
[14:04:15] <pepper_chico> custom pointer more like built-in ones
[14:04:16] <bakibour> exit
[14:04:21] <bakibour> :)
[14:04:22] *** Quits: bakibour (luesebrink@moz-BED1057D.dip0.t-ipconnect.de) (Quit: leaving)
[14:04:47] <bollu> edwardw: a concrete-ish example? (sorry, new to the language)
[14:05:11] <edwardw> bollu: I'm looking for one for you :)
[14:05:15] <bollu> ty
[14:05:30] *** Joins: ChrisOei (ChrisOei@moz-C20DF056.mycingular.net)
[14:06:00] <pepper_chico> I think the issue discussion provides samples
[14:06:02] <bollu> also, I can't compare enums? https://gist.github.com/bollu/b00b2d40b948f7bff51d
[14:06:05] <bstrie> mindcat_: I'm not sure exactly how to use nuget, I don't develop on windows :P
[14:07:03] <krdln> what about dereferencing single-fields enums? I heard that when auto-deref lands it will be reenabled
[14:07:20] *** Joins: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP)
[14:07:20] <pepper_chico> what's nuget by the way? I just stick to git/hg/baazar etc and github, why m$ must creater their inventions
[14:07:40] <edwardw> bollu: if `let v: Rc<RefCell<Vec<T>>> = ...`, one used to do `v.borrow().borrow_mut().get().push(x)`, i.e. push something into the innermost `Vec`
[14:07:40] <bstrie> pepper_chico: nuget is a third-party package manager for windows
[14:07:44] <krdln> bollu: add #[deriving(Eq)] before struct
[14:07:57] <edwardw> bollu: with #12610, it is `v.borrow_mut().push(x)`
[14:07:57] <bollu> krdln: ty.
[14:08:07] <pepper_chico> bstrie: ah, ok
[14:08:16] <pepper_chico> like apt-get for windows
[14:08:18] <bollu> edwardw: ah. that seems nice. 
[14:08:32] <bollu> pepper_chico: yeah, it's basically a package manager for windows
[14:08:46] <bollu> pepper_chico: it had some pretty wicked visual studio integretion if I remember correctly
[14:08:47] <pepper_chico> these guys are late uh
[14:09:01] <pepper_chico> =)
[14:09:05] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[14:09:22] <bollu> pepper_chico: better late than never ;)
[14:09:28] <pepper_chico> hehe
[14:09:36] *** Joins: toffaste1337 (toffaste13@2638078A.59557868.C494D41A.IP)
[14:09:55] <toffaste1337> Hey, could anyone try to ping my rust server?
[14:10:31] <pepper_chico> ip?
[14:10:41] <pepper_chico> or... domain
[14:10:47] <toffaste1337> server.rustyrust.tk
[14:10:48] <edwardw> bollu: and that's just some default implementations of `Deref` and `DerefMut` trait in `std`. One can also impl `Deref` and / or `DerefMut` for his own traits
[14:10:51] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[14:10:58] <toffaste1337> :1337
[14:11:11] <NiccosSystem> toffaste1337, 64 bytes from 246.89-11-143.nextgentel.com (89.11.143.246): icmp_seq=4 ttl=118 time=39.4 ms
[14:11:25] <pepper_chico> toffaste1337: all ok
[14:11:27] <toffaste1337> Great
[14:12:00] *** Quits: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru) (Connection reset by peer)
[14:12:12] <bollu> why can't I         match self.foo { bar => self.baz } //foo is borrowed so I can't acces baz...
[14:12:15] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[14:12:49] <pepper_chico> I've to this kind of thing outside my network using http://www.compileonline.com/execute_bash_online.php
[14:12:53] <bollu> toffaste1337: yep, I'm able to ping too
[14:13:01] <pepper_chico> s/to this/done this/
[14:13:02] *** Joins: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca)
[14:13:40] <toffaste1337> Thanks everyone. I was just making sure my connection went throught the new router. (or something)
[14:14:03] *** Quits: ChrisOei (ChrisOei@moz-C20DF056.mycingular.net) (Ping timeout)
[14:16:33] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:16:35] <krdln> bollu: give full code, it depends on types
[14:16:55] *** Quits: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net) (Connection reset by peer)
[14:18:09] <bollu> krdln: will do. I'm trying to fix this on my own :)
[14:18:12] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[14:18:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:18:41] *** Quits: IanCormac841 (User@B21EA5AC.2A8D8854.67DFF8B4.IP) (Ping timeout)
[14:18:44] *** Joins: IanCormac84 (User@DF084AA5.2A8D8854.67DFF8B4.IP)
[14:18:49] *** Joins: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net)
[14:19:00] *** Quits: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[14:19:12] <krdln> bollu: btw, you dont need to explicitely return in fn val. And in fn Tick you could use match with if guards
[14:19:27] <bollu> krdln: *sigh* https://gist.github.com/bollu/a4bae87d586230c523bb
[14:19:40] <bollu> krdln: hm, I like the explicitness of the state transitions.
[14:20:05] *** Quits: gsathya (gsathya@moz-5068C8E5.gsathya.in) (Ping timeout)
[14:21:52] *** pmoore is now known as pmoore|tea-break
[14:21:53] <krdln> bollu: I think you have to clone explicitly (T : clone and self.sustain_value.clone())
[14:22:00] *** Quits: sellout (Adium@moz-EE794C0C.hlrn.qwest.net) (Quit: Leaving.)
[14:22:08] <bollu> krdln: hmm, will try
[14:22:21] <eddyb> krdln: *Clone
[14:23:02] <bollu> krdln: yeah, that worked! I would /never/ have figured that out on my own. thanks!
[14:23:44] *** Quits: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru) (Quit: Leaving.)
[14:23:51] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[14:24:16] <krdln> bollu: Concept of linear types and moving values in Rust was really exotic for me too. :)
[14:24:42] <krdln> bollu: I recommend to re-read http://static.rust-lang.org/doc/master/tutorial.html#move-semantics
[14:24:51] <bollu> krdln: will do
[14:27:28] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[14:28:41] <nstdloop> Does anyone know hot to use -W flags correctly?
[14:28:55] <nstdloop> How do I check for more than one error?
[14:28:57] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[14:29:56] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Ping timeout)
[14:31:19] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[14:31:51] *** Quits: IanCormac84 (User@DF084AA5.2A8D8854.67DFF8B4.IP) (Ping timeout)
[14:31:55] *** Joins: alonlevy (alon@moz-3ED5528E.red.bezeqint.net)
[14:32:51] *** Joins: IanCormac84 (User@76B5980A.64D641E5.67DFF8B4.IP)
[14:34:07] <bollu> what's an "unconstrained type" ?
[14:34:24] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[14:34:27] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[14:35:18] *** Joins: dschatzberg (dschatzber@moz-E2680405.bu.edu)
[14:35:50] *** Quits: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru) (Quit: Leaving.)
[14:35:56] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[14:37:21] <bollu> https://gist.github.com/bollu/a4bae87d586230c523bb I'm not able to instantiate a generic struct
[14:37:22] *** pmoore|tea-break is now known as pmoore
[14:38:55] <nstdloop> What's the most idiomatic way to deal with non-total functions? For instance, if I've got a "prime factorizer" function, what should I do for 0?
[14:39:14] <nstdloop> Even if I'm using u64s, that still allows for some corner cases (0, 1)
[14:39:20] <Tari> probably Option<T>
[14:39:53] *** Quits: daschl (Adium@moz-E160B3C7.public.t-mobile.at) (Ping timeout)
[14:39:58] <bollu> if something's an unconstrained type, how do I handle it?
[14:40:03] <nstdloop> Tari: Are there nice ways to deal with Option<T>s except match? (I'm thinking of all the tools surrounding the Maybe Monad)
[14:40:08] <pnkfelix> bollu: I'm looking
[14:40:26] <bollu> pnkfelix: ty. I'm sorry for dumping the whole thing.
[14:40:52] <pnkfelix> bollu: usually its a sign that either you need to put an explicit type annotation in somewhere, *or* that you have over-generalized and have an unneeded type parameter that the type inference cannot hope to assigned a type to
[14:41:08] <Tari> nstdloop: .and_then() and friends maybe
[14:41:20] <nstdloop> and_then is basically bind?
[14:41:31] <pnkfelix> bollu: but I haven't figured out if your example falls into either of those two categories yet.  (i've been trying to just read it, haven't tried compilingit myself yet)
[14:41:37] <Tari> you might also want to impl Foo for Option<Foo> if you use a lot of wrapped `Foo`s
[14:41:59] <nstdloop> I'm using u64s so I assume that's been impld already
[14:42:05] <nstdloop> thanks!
[14:42:16] <pnkfelix> bollu: ah, the problem might be on lines 23 and 24
[14:42:36] <pnkfelix> bollu: you are simultaneously parameterizing your impl *and* the fn new both over <T>
[14:42:38] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[14:42:51] <pnkfelix> bollu: you probably should consider removing the parameterization from the `fn new`
[14:43:12] <bollu> pnkfelix: oh yes! thanks a lot!
[14:43:16] <pnkfelix> bollu: (because i suspect that due to the parameterization of `fn new`, the type inference system cannot then figure out what type to use for the outer impl)
[14:43:32] *** Joins: andrewd18 (andrew@moz-DAC9D29F.wi.res.rr.com)
[14:43:53] <bollu> pnkfelix: I think it wasn't able to figure out the inner impl, cause I'm supplying the outer type as f32
[14:44:02] *** Joins: daschl (Adium@moz-A497EA2F.public.t-mobile.at)
[14:44:03] *** Quits: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de) (Quit: Leaving.)
[14:44:05] <bollu> pnkfelix: thanks again :)
[14:44:15] <nstdloop> If I have a type that is a fn type, like a = fn(u64) -> Option<u64>, can I use that as a type signature for a function or do I have to basically retype it anyway?
[14:44:19] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[14:44:54] <bollu> pnkfelix: interesting, new_unit is also apparently unconstrained.
[14:44:59] <bollu> pnkfelix: any insight?
[14:45:28] <bollu> pnkfelix: just a sec, lemme update the gist
[14:45:31] *** Joins: ChrisOei (ChrisOei@moz-C20DF056.mycingular.net)
[14:45:34] <pnkfelix> I see no `fn new_unit`
[14:45:55] <nstdloop> is last implemented for ~[]s? 
[14:46:04] <bollu> pnkfelix: yep, updating the gist
[14:46:08] <nstdloop> rusti: ~[1, 2, 3].last();
[14:46:09] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[14:46:09] -rusti- ()
[14:46:11] <bollu> https://gist.github.com/bollu/a4bae87d586230c523bb
[14:46:17] <nstdloop> rusti: [1, 2, 3].last();
[14:46:18] -rusti- ()
[14:46:22] <nstdloop> rusti: [1, 2, 3].last()
[14:46:23] -rusti- pastebinned 16 lines of output: http://sprunge.us/EYVA
[14:46:28] <nstdloop> rusti: ~[1, 2, 3].last()
[14:46:29] -rusti- pastebinned 16 lines of output: http://sprunge.us/IXca
[14:46:56] <nstdloop> rusti: let b = [1, 2, 3]; b.last()
[14:46:57] -rusti- pastebinned 16 lines of output: http://sprunge.us/AFMZ
[14:47:11] <bollu> rustilite: fn main() { let i = ~[1, 2, 3].last(); i }
[14:47:12] -rustilite- <anon>:1:40: 1:41 error: mismatched types: expected `()` but found `~std::option::Option<&<generic integer #2>>` (expected () but found ~-ptr)
[14:47:12] -rustilite- <anon>:1 fn main() { let i = ~[1, 2, 3].last(); i }
[14:47:12] -rustilite-                                                 ^
[14:47:12] -rustilite- error: aborting due to previous error
[14:47:12] -rustilite- application terminated with error code 101
[14:47:19] <pnkfelix> bollu: there's no <T> nor any self parameter in your fn new_unit
[14:47:42] <bollu> pnkfelix: ah, I see. does it not assume T=f32 'cause I return an f32? 
[14:47:48] <pnkfelix> bollu: So I don't think there's any way for the type system to connect up your call to ASD::new_unit to any T
[14:47:53] <bollu> rustilite: fn main() { let i = ~[1, 2, 3].last(); print!("{}i }
[14:47:53] -rustilite- <anon>:1:47: 1:54 error: unterminated double quote string
[14:47:53] -rustilite- <anon>:1 fn main() { let i = ~[1, 2, 3].last(); print!("{}i }
[14:47:53] -rustilite-                                                        ^~~~~~~
[14:47:53] -rustilite- application terminated with error code 101
[14:47:54] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[14:47:58] <pnkfelix> bollu: no it does not
[14:47:58] *** Quits: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru) (Quit: Leaving.)
[14:48:05] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[14:48:21] <bollu> pnkfelix: oh, okay :) so the function should be *outside* the struct then?
[14:48:33] <bollu> rustilite: fn main() { let i = ~[1, 2, 3].last(); print!("{}", i }  } //hope I got this right
[14:48:36] -rustilite- pastebinned 7 lines of output: http://ix.io/b4n
[14:48:42] *** Joins: sellout (Adium@moz-1D225F38.hsd1.co.comcast.net)
[14:48:48] <pnkfelix> bollu: in general e.g. one could return types that are themselves made up from T, e.g. ASD<Option<T>>.  (Well, that wouldn't work in this case since Option<T> does not satisfy the bounds that ASD puts upon T.  But the idea is there.)
[14:49:20] <pnkfelix> bollu: That would be one approach.  Another approach would be to parameterize new_unit over <T>
[14:49:27] <pnkfelix> bollu: instead of f32
[14:49:40] <pnkfelix> bollu: I don't mean parameterize.  I just mean, use T
[14:49:40] <bollu> pnkfelix: but then the values "0" and "1" would not work
[14:49:51] <pnkfelix> bollu: ah
[14:49:52] *** Quits: cschneid (cschneid@moz-12E33685.hlrn.qwest.net) (Client exited)
[14:49:58] <pnkfelix> bollu: make T : Zero
[14:50:01] <bollu> rustilite: fn main() { let i = ~[1, 2, 3].last(); print!("{}", i )  } //should be right
[14:50:03] -rustilite- pastebinned 11 lines of output: http://ix.io/b4o
[14:50:03] <pnkfelix> bollu: and... I think there is a One trait aas well
[14:50:11] <bollu> pnkfelix: will look into it.
[14:50:13] <bollu> thanks
[14:50:17] *** Joins: cschneid (cschneid@moz-12E33685.hlrn.qwest.net)
[14:50:25] <pnkfelix> bollu: so then you'd use Zero::zero() and One::one() to create your 0f32 and 1f32 when T is f32
[14:50:51] *** Joins: gsathya (gsathya@moz-5068C8E5.gsathya.in)
[14:51:33] <krdln> rustilite: fn main() { let v = ~[1,2,3];print!("{}", v.last()); }
[14:51:35] -rustilite- Some(3)
[14:51:58] *** Quits: sellout (Adium@moz-1D225F38.hsd1.co.comcast.net) (Ping timeout)
[14:51:58] *** Quits: cschneid (cschneid@moz-12E33685.hlrn.qwest.net) (Ping timeout)
[14:51:58] *** Quits: ChrisOei (ChrisOei@moz-C20DF056.mycingular.net) (Connection reset by peer)
[14:52:14] *** Joins: sellout (Adium@moz-1D225F38.hsd1.co.comcast.net)
[14:52:15] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[14:52:40] *** Quits: grandy (grandy@2B4EAEBB.44053F84.4F36BED4.IP) (Ping timeout)
[14:52:58] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[14:53:07] *** Joins: grandy (grandy@2B4EAEBB.44053F84.4F36BED4.IP)
[14:54:00] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[14:54:27] <krdln> rusti: *~[1,2,3].last()
[14:54:28] -rusti- pastebinned 16 lines of output: http://sprunge.us/adMf
[14:54:28] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[14:54:29] <bollu> pnkfelix: I decided to go with the less involved approach :) I'll keep the other technique in mind though. thanks for the help!
[14:54:30] *** Quits: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru) (Quit: Leaving.)
[14:54:39] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[14:54:44] <krdln> rusti: *(~[1,2,3]).last()
[14:54:44] -rusti- <anon>:11:9: 11:27 error: type `std::option::Option<&<generic integer #2>>` cannot be dereferenced
[14:54:44] -rusti- <anon>:11         *(~[1,2,3]).last()
[14:54:44] -rusti-                   ^~~~~~~~~~~~~~~~~~
[14:54:44] -rusti- error: aborting due to previous error
[14:54:45] -rusti- application terminated with error code 101
[14:55:03] <krdln> rusti: *(~[1,2,3]).last().unwrap()
[14:55:04] -rusti- 3
[14:55:36] *** Joins: ChrisOei (ChrisOei@moz-53A9266A.blurb.com)
[14:55:52] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[14:55:57] *** Quits: klaus (koz@moz-4486E876.hsd1.wa.comcast.net) (Ping timeout)
[14:56:00] *** Joins: benjamin_ (benjamin@moz-5606BC65.dip0.t-ipconnect.de)
[14:56:41] *** Quits: benjamin_____ (benjamin@moz-5CD216D9.dip0.t-ipconnect.de) (Ping timeout)
[14:56:49] *** Quits: sellout (Adium@moz-1D225F38.hsd1.co.comcast.net) (Ping timeout)
[14:57:25] *** Joins: Merth (shaun@moz-E41B2C4D.dhcp.mdsn.wi.charter.com)
[14:57:26] *** Joins: sellout (Adium@moz-1D225F38.hsd1.co.comcast.net)
[14:57:32] *** Quits: hidensoft (intuxicate@5BA9DB47.F2F0EDE4.DA0107E2.IP) (Quit: Leaving)
[14:57:44] *** Joins: intuxicated (intuxicate@5BA9DB47.F2F0EDE4.DA0107E2.IP)
[14:57:46] *** Quits: bvssvni (Mibbit@moz-E289BB64.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[14:58:42] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[14:59:49] *** Joins: newbie (kvirc@moz-FBADA4B7.dip0.t-ipconnect.de)
[15:00:07] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[15:00:10] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[15:00:22] *** Quits: eibwen (kvirc@moz-48B987C8.dip0.t-ipconnect.de) (Ping timeout)
[15:01:47] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[15:02:42] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[15:02:58] *** Quits: andrewd18 (andrew@moz-DAC9D29F.wi.res.rr.com) (Quit: Leaving.)
[15:05:02] *** Quits: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru) (Quit: Leaving.)
[15:05:10] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[15:05:23] *** Joins: andrewd18 (andrew@moz-DAC9D29F.wi.res.rr.com)
[15:05:29] *** Joins: IanCormac841 (User@B49E98B2.2A8D8854.67DFF8B4.IP)
[15:05:38] *** Quits: IanCormac84 (User@76B5980A.64D641E5.67DFF8B4.IP) (Ping timeout)
[15:06:47] *** Quits: pepper_chico (pepper_chi@moz-E15D42C8.dsl.telesp.net.br) (Quit: WeeChat 0.4.1)
[15:07:40] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Quit: zztr)
[15:11:55] <krdln> pnkfelix: you missed * in     ptr: RcData<T>
[15:12:14] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[15:12:26] *** Joins: klaus (koz@moz-4486E876.hsd1.wa.comcast.net)
[15:12:34] *** Quits: onelson (owen@C668895F.36788A19.5625D66B.IP) (Quit: Leaving)
[15:12:42] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:12:49] *** jorendorff_away is now known as jorendorff
[15:12:58] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[15:13:10] <pnkfelix> krdln: weird, its in my source.  Let me see if this is a rendering bug
[15:13:23] *** Joins: flan3002 (flan3002@ADE308B1.8B38C502.16E13E53.IP)
[15:14:30] <flan3002> Uhm, error: only the builtin traits can be used as closure or object bounds at  pub fn yoyo(tween: ~Tween:Clone) -> ~Tween: {? Why should I only be able to use stuff like Pod or Send as restrictions?
[15:14:46] *** Joins: Jesse_ (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[15:14:46] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Connection reset by peer)
[15:14:46] <eddyb> flan3002: why are you inverting colors?
[15:14:59] <Earnestly> eddyb: To emphasis code from text
[15:15:08] <eddyb> but that's really awful looking here
[15:15:12] <Earnestly> emphasise*
[15:15:17] <Earnestly> Yeah, oh well
[15:15:25] <flan3002> eddyb: Because I think it's easier to parse visually than "" everywhere.
[15:15:29] <eddyb> I'd use bold, underline or `` instead
[15:15:42] <eddyb> flan3002: inversion isn't easy to parse
[15:15:49] <Earnestly> “ha”
[15:15:54] <flan3002> But you're the second person that complains...
[15:16:04] <eddyb> it really stands out
[15:16:10] <eddyb> bold or underline are fine
[15:16:16] <Earnestly> »guillemets« ?¿
[15:16:18] <eddyb> heck, you can even use colors for syntax highlighting
[15:16:21] <eddyb> Earnestly: lol
[15:16:24] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[15:16:29] <flan3002> Let me try.
[15:16:33] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:16:53] <eddyb> flan3002: the answer is that those are "kinds", a special kind of traits (I know, the naming is confusing)
[15:17:24] <eddyb> flan3002: we could allow other zero-sized-vtable traits in there as well
[15:17:28] <eddyb> but Clone has two methods
[15:17:36] *** Quits: Jesse_ (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[15:17:43] <eddyb> and you can't even call .clone() through a ~Clone
[15:18:11] <flan3002> pub fn yoyo(tween: ~Tween:Clone) -> ~Tween: {
[15:18:12] <flan3002>      rep(seq(~[tween, rev(tween.clone())]))
[15:18:12] <flan3002>  }
[15:18:28] *** Joins: lawrence (lawrence@moz-A1B35ECD.wireless.utoronto.ca)
[15:18:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:18:37] <eddyb> you need a "clone to ~Tween" method in Tween
[15:18:38] <flan3002> This is the whole function, pretty simple. If I can't use clone, what is the solution?
[15:21:33] <pnkfelix> krdln: hmm, I can't figure this out, it seems like the pygments plugin for Rust must be misparsing the code, but the lexing code seems okay in my skimming
[15:23:48] <pnkfelix> krdln: oh well I'll just turn off Rust syntax highlighting for that block.  (and do the necessary escapes to prevent mark down from interpreting the * as emphasis)
[15:25:11] *** Quits: daschl (Adium@moz-A497EA2F.public.t-mobile.at) (Quit: Leaving.)
[15:25:23] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[15:25:23] *** ChanServ sets mode: +ao dherman dherman
[15:25:39] <eddyb> https://github.com/mozilla/rust/issues/12842#issuecomment-37526444 teehee
[15:26:19] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:27:27] *** Quits: Guest___ (textual@moz-77D0F250.nebulazone.fi) (Ping timeout)
[15:28:17] *** Quits: joh (uid13099@moz-31ABA2C0.irccloud.com) (Quit: )
[15:29:00] *** Joins: robhobbes (robert@D931AEC7.B8CF4085.71765F8E.IP)
[15:29:35] <robhobbes> Hey guys. What's the most idiomatic way to "trim" an owned string?
[15:29:43] <eddyb> .trim()
[15:29:48] <robhobbes> I knew it...
[15:29:58] <robhobbes> I swear... I get so lost in the docs...
[15:30:00] *** Quits: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru) (Quit: Leaving.)
[15:30:18] <robhobbes> eddyb: where is that documented
[15:30:18] <eddyb> robhobbes: well, do you need to modify the ~str or just get a potentially shorter &str?
[15:30:32] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[15:30:53] <robhobbes> eddyb: I want my ~"hello    " to become ~"hello" etc
[15:31:10] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[15:31:34] <eddyb> robhobbes: hmm, not sure what the easiest way to do that is
[15:31:56] <eddyb> you can probably do trim_right and then truncate the ~str at the length of the resulting slice
[15:32:02] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[15:32:13] <eddyb> robhobbes: it's harder to do it in-place for trim_left because it's O(N)
[15:32:24] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:32:25] <robhobbes> eddyb: can you link me to the docs for trim (that will help me learn about navigating the docs and about the trim function)?
[15:32:36] <newbie> does trait upcasting work already?
[15:32:38] <eddyb> robhobbes: look for OwnedString, I think
[15:32:40] <eddyb> newbie: nope
[15:32:49] <newbie> is it a planned feature?
[15:32:51] <eddyb> newbie: DST should allow it IMO
[15:32:51] <robhobbes> eddyb: thanls
[15:33:01] <robhobbes> eddyb: thanks*
[15:33:05] <newbie> eddyb: what does that have to do with DST?
[15:33:38] <eddyb> right now you could only really do it for &Trait and &mut Trait
[15:33:41] *** Quits: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru) (Quit: Leaving.)
[15:33:50] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[15:33:53] <eddyb> in DST you can convert Rc<T> to Rc<Trait>
[15:34:18] <eddyb> so Rc<Trait> to Rc<SuperTrait> becomes a bit simpler to implement, I think (and more useful)
[15:34:26] <eddyb> the interactions aren't all trivial
[15:34:45] *** Quits: sinsnare (sinis_000@moz-7E48AC93.washdc.fios.verizon.net) (Ping timeout)
[15:34:46] <eddyb> but DST composes better in general
[15:35:00] <newbie> mh.
[15:35:43] <robhobbes> eddyb: so apparently trim is under StrSlice. Also, I can just do a mystring.trim().to_owned(). Does that seem like a bad iea?
[15:35:55] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[15:35:59] <eddyb> robhobbes: it will copy the string
[15:37:11] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:37:33] *** Joins: dranov (dranov@moz-8ECE8169.gw-nat.bs.kae.de.oneandone.net)
[15:38:52] <newbie> is there any alternative solution available to trait upcasting?
[15:38:55] *** Quits: IanCormac841 (User@B49E98B2.2A8D8854.67DFF8B4.IP) (Ping timeout)
[15:39:05] <newbie> my function takes a file that has at least Seek and Reader implemented
[15:39:14] *** Joins: IanCormac84 (User@8CFAF80B.64D641E5.67DFF8B4.IP)
[15:39:17] <newbie> and it needs to call functions that expect a &Reader
[15:39:39] <eddyb> newbie: you may be able to do some vtable magic
[15:39:43] <newbie> so currently I'm stuck with my function only accepting ~File
[15:39:51] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[15:39:53] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[15:39:58] <eddyb> figure out the positions for each method and adjust manually
[15:40:02] <pnkfelix> newbie: you don't want to specialize it via parameteric polymorphism?
[15:40:11] <eddyb> ~Trait to ~SuperTrait is hard/impossible
[15:40:16] <pnkfelix> newbie: e.g. foo<F:Seek + Reader>(&F) ?
[15:40:44] <eddyb> (because you need the dtor)
[15:40:58] *** newbie is now known as eibwen
[15:41:42] <eibwen> pnkfelix: doesn't that cause the method to be instantiated like templates in c++? once for each different type?
[15:41:51] <pnkfelix> eibwen: yes, it does
[15:42:01] <pnkfelix> eibwen: how many different kinds of File implementations are you expecting?
[15:42:01] <eibwen> eddyb: I'd only need &Trait to &SuperTrait
[15:42:11] <eibwen> well, 1 :)
[15:42:15] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[15:42:22] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[15:42:24] <eddyb> eibwen: you shouldn't worry about instantiations
[15:42:24] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[15:42:37] <eddyb> they really aren't a problem *unless you can prove otherwise*
[15:42:45] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:42:52] <eibwen> they take a lot of space, I guess
[15:42:57] <eddyb> eibwen: it's a bit of a silly restriction to impose on yourself
[15:43:03] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[15:43:04] <pnkfelix> eibwen: I'd recommend not prematurely tying yourself trait objects unless you need them
[15:43:18] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[15:43:21] <pnkfelix> eibwen: e.g. when you have a Vector of objects of various kinds, then trait objects make sense
[15:43:42] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:44:00] <pnkfelix> eibwen: There are other options I could imagine you could use to accomplish your goals
[15:44:09] *** Joins: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de)
[15:44:18] <eibwen> but using parametric polymorphism would propagate this all over the code
[15:44:27] <eibwen> because said method is a constructor for a struct
[15:44:33] <eddyb> eibwen: premature optimization
[15:44:36] <eibwen> thus the struct would need to be templated
[15:44:43] <eibwen> that's premature optimization? :/
[15:44:47] <eddyb> yes
[15:44:52] <pnkfelix> eibwen: without seeing your use case in more detail, I cannot advise further
[15:44:55] <eddyb> if you have like ten thousand lines of parsing code *maybe then* you can consider &Reader
[15:45:22] <eddyb> my inflate implementation has *intentional* exponential code expansion
[15:45:32] <eddyb> and it's not slower than zlib
[15:45:52] <pnkfelix> eibwen: another option could be to define something like `trait SeekReader { fn seek<'a>(&'a self) -> &'a Seek; fn reader<'a>(&'a self) -> &'a Reader; }`
[15:45:57] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[15:46:04] *** Quits: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru) (Quit: Leaving.)
[15:46:08] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Quit: Leaving)
[15:46:11] <pnkfelix> eibwen: but that strikes me as a bit of a hack
[15:46:16] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[15:46:27] <eibwen> pnkfelix: mh. that's kind of what I'd like
[15:46:30] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[15:46:30] <eddyb> similar with the PNG decoder, I use one instantiation of the hot code per interlacing step
[15:46:33] <eibwen> it feels a bit like trait upcasting
[15:46:44] <eddyb> and it creates *a lot* of code
[15:46:46] <pnkfelix> eibwen: right, excpet that its more flexible
[15:46:49] <eddyb> it's still very damn fast
[15:47:15] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[15:47:15] <pnkfelix> eibwen: e.g. someone could then implement it via composition. (That probably woudn't make sense for SeekReader, I'm more thinking of the generalization to aribtrary traits T1 and T2)
[15:47:25] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[15:47:42] <eibwen> pnkfelix: would I then be able to define SeekReader for a type T:Seek+Reader?
[15:47:43] <eddyb> I agree with being cautious in the libsyntax rust parser... that may have issues because there's just a lot of code and most of this calls to even more code
[15:48:05] <eibwen> eddyb: code size doesn't really have something to do with speed, does it?
[15:48:15] <eddyb> eibwen: that's the main concern though
[15:48:16] *** Quits: bascule (bascule@moz-3D395603.compute-1.amazonaws.com) (Quit: leaving)
[15:48:22] <eddyb> cache issues caused by code size
[15:48:27] <pnkfelix> eibwen: ... well, our current coherence rules might then constrain you
[15:48:41] *** Joins: bascule (bascule@moz-3D395603.compute-1.amazonaws.com)
[15:48:41] <eddyb> but if there's like only two possible types that can implement Reader in your usecase, there's no point worrying
[15:48:46] <pnkfelix> eibwen: e.g. if you do `impl<T:Seek+Reader> SeekReader for T`, then that Might be the *only* implementation that is allowed
[15:48:53] *** Quits: lunaryorn (lunaryorn@moz-A51A02E.dynamic.mnet-online.de) (Quit: )
[15:48:55] <pnkfelix> eibwen: but maybe that will serve your purposes just fine.
[15:49:09] <eddyb> hmm... yeah we should be able to make Parser generic because it can't call methods from a different Parser instantiation
[15:49:42] <eddyb> this should be pretty interesting with merge func
[15:49:55] <eddyb> since the representation of &T for two different types T is identical
[15:50:18] <robhobbes> How do I get the size of a vector (not the capacity)?
[15:50:26] *** Joins: jkarlson (jkarlson@moz-785A3407.org.aalto.fi)
[15:50:36] <eddyb> well, nevermind, since you want Parser<T>::foo to call Parser<T>::bar and not Parser<erased>::bar
[15:50:41] *** Quits: jkarlson (jkarlson@moz-785A3407.org.aalto.fi) (Quit: leaving)
[15:50:42] <eddyb> robhobbes: .len()
[15:50:52] <robhobbes> ah... of course
[15:50:52] <Ke>  
[15:51:31] <eddyb> eibwen: you can actually end up with more code from non-devirtualized virtual code
[15:51:44] <tedh_> is it hard to get http://huonw.github.io/isrustfastyet/buildbot/ going?
[15:51:44] <eddyb> that's why our binaries are a few MBs in size
[15:51:52] <eddyb> eibwen: so there's a huge counterexample
[15:51:54] <rdgawdzi> For some reason, after I change and build rust, the binaries created are not updated, even after make install. Even the stage2 binary is outdated.
[15:51:59] <tedh_> was curious if the vec changed would show up there
[15:52:16] <eddyb> tedh_: cmr does the benches
[15:52:26] <eddyb> ah, wait, buildbot
[15:52:28] *** Joins: hoverbea_ (hoverbear@726D908C.44E18222.E74D50F2.IP)
[15:52:34] <pnkfelix> rdgawdzi: you may need to do both `make && make install`, separately
[15:52:43] <eddyb> tedh_: not that meaningful IMO
[15:52:44] <tedh_> y, i know the size ones are a hassle
[15:52:45] <pnkfelix> rdgawdzi: not sure if you actually doing them as separate steps or not
[15:53:01] <tedh_> and cmr is installing a new drive
[15:53:02] <rdgawdzi> pnkfelix: I do both seperately... when I do make again, it doesn't do anything since it's already built
[15:53:05] <eddyb> tedh_: this is where it's at but cmr has been busy http://huonw.github.io/isrustfastyet/mem/
[15:53:10] <eddyb> tedh_: oh you know about that, okay :)
[15:53:14] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[15:53:19] <pnkfelix> rdgawdzi: okay, just checking
[15:53:21] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Ping timeout)
[15:53:35] <pnkfelix> rdgawdzi: and you are making changes to .rs files?
[15:53:36] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[15:53:36] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Ping timeout)
[15:53:44] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[15:53:46] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:54:00] <pnkfelix> rdgawdzi: some of the dependencies in the Makefiles have been flawed in the past, but I had thought most had been addressed at this point
[15:54:25] <pnkfelix> rdgawdzi: if you give me an example of a path to an .rs file that you touch and then do not see the rebuild that you expect, then I can try to replicate locally
[15:54:30] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[15:54:41] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[15:54:44] <eibwen> error: value may contain references; add `'static` bound to `T`
[15:54:55] <eibwen> I get that when
[15:54:56] <pnkfelix> rdgawdzi: also, I'm a big fan of using `remake` (the GNU make debugger), with the `--trace` option to try to understand the logic used by the makefile
[15:55:13] <eibwen> fn reader<'a>(&'a self) -> &'a Reader { self as &'a Reader }
[15:55:24] <rdgawdzi> pnkfelix: For example, I add a print! statement in libsyntax/parse/parser.rs, and do a make.
[15:55:30] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[15:55:36] <pnkfelix> rdgawdzi: okay let me see
[15:56:12] <pnkfelix> rdgawdzi: and then when you run make, it does not print oxidize: x86_64-apple-darwin/stage0/lib/rustlib/x86_64-apple-darwin/lib/libsyntax very quickly ?)
[15:56:34] <krdln> eibwen: if trait is parametrized over <'a> then the function shouldn't
[15:56:46] *** Joins: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP)
[15:56:47] <rdgawdzi> Yes. Do you think it's because I am doing -j*? The parallelism messes up the make files?
[15:56:50] *** Quits: claudiu_ (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP) (Connection reset by peer)
[15:56:59] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Ping timeout)
[15:57:04] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[15:57:05] <pnkfelix> rdgawdzi: no, it should still be trying to rebuild that dependence
[15:57:47] <eibwen> krdln: what do you mean by 'the trait being parametrized'? 
[15:57:53] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[15:58:14] <krdln> impl<'a> ... for ... (but i think it's not the case. nvm)
[15:58:26] <eibwen> yes, I don't have impl<'a>
[15:58:31] *** Quits: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net) (Ping timeout)
[15:58:31] *** Quits: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP) (Ping timeout)
[15:58:41] <pnkfelix> eibwen: maybe my suggestion doesn't work as well as I had thought it would
[15:58:55] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[15:59:06] *** Joins: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net)
[15:59:06] *** Quits: mno2 (mno2@moz-3506EAC7.singnet.com.sg) (Quit: mno2)
[15:59:11] <eibwen> mh. what does that error message want to tell me?
[15:59:12] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:59:26] <kimundi> eibwen: The self type needs to have a 'static trait bound
[15:59:42] <kimundi> like, impl<T: 'static> Trait for ...
[15:59:49] *** Joins: cschneid (cschneid@moz-CA025D57.ip.mcleodusa.net)
[15:59:49] *** Quits: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP) (Quit: Lost terminal)
[16:00:16] *** Joins: mye (mye@moz-5578CD59.superkabel.de)
[16:00:18] <bascule> https://twitter.com/steve_holt/status/444130099063832576
[16:00:20] <bascule> lololol
[16:00:24] <eibwen> what would that mean? only variables that are static can use that trait implementation?
[16:00:34] <kimundi> eibwen: Hm, let me think about why exactly it is needed for a borrowed trait object for a moment
[16:00:36] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Quit: leaving)
[16:00:50] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[16:01:02] <kimundi> eibwen: No, only types that contain no references, or references with 'static lifetime
[16:01:21] <bjz> cmr: bstrie: do you recall any historical links showing how somebody convinced all those .rs langs to change?
[16:01:22] *** Quits: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[16:01:42] <bjz> cmr bstrie: and was it to do with the github highlighting?
[16:01:43] <kimundi> eg, struct Foo { data: &'static Bar } or struct Bar; but not struct Baz<'a> { data: &'a Etc }
[16:02:00] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:02:03] *** Quits: Rym (y@6C711401.48E527D5.51C6DE68.IP) (Ping timeout)
[16:02:08] <kimundi> rusti: &5u as &ToStr
[16:02:08] -rusti- &std::to_str::ToStr<no-bounds>
[16:02:17] <kimundi> rusti: & &5u as &ToStr
[16:02:18] -rusti- &std::to_str::ToStr<no-bounds>
[16:02:40] <kimundi> rusti: &5u as &ToStr:Send
[16:02:41] -rusti- <anon>:11:9: 11:12 error: cannot pack type `&uint`, which does not fulfill `Send`, as a trait bounded by Send
[16:02:41] -rusti- <anon>:11         &5u as &ToStr:Send
[16:02:41] -rusti-                   ^~~
[16:02:41] -rusti- error: aborting due to previous error
[16:02:41] -rusti- application terminated with error code 101
[16:02:52] <eddyb> rusti: ~&5u as ~ToStr
[16:02:52] -rusti- <anon>:11:9: 11:13 error: cannot pack type `~&uint`, which does not fulfill `Send`, as a trait bounded by Send
[16:02:53] -rusti- <anon>:11         ~&5u as ~ToStr
[16:02:53] -rusti-                   ^~~~
[16:02:53] -rusti- error: aborting due to previous error
[16:02:53] -rusti- application terminated with error code 101
[16:02:54] <jakob> That rusti is spamming the crap out of my console.
[16:02:56] <eddyb> rusti: ~&5u as ~ToStr:
[16:02:57] -rusti- ~std::to_str::ToStr<no-bounds>
[16:02:57] <jakob> Can it stop
[16:03:06] <eddyb> jakob: can you fix your client :P?
[16:03:12] <jakob> eddyb: im using irssi :L
[16:03:15] <jakob> I don't think its broken
[16:03:21] <eddyb> then fix your config
[16:03:23] <kimundi> jakob: What does it do?
[16:03:30] <jakob> Makes my terminal shake
[16:03:31] <jakob> lots
[16:03:35] *** Quits: lawrence (lawrence@moz-A1B35ECD.wireless.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:03:38] <jakob> like a michael bay movie
[16:03:40] <kimundi> jakob: Then its broken/misconfigured
[16:03:46] *** Joins: pudgetta (Mibbit@D0100B02.23D10232.89D37B92.IP)
[16:03:55] <jakob> rusti seems to be sending notices :L
[16:04:00] <kimundi> jakob: What rusti is doing is explcitly what notices are intended for
[16:04:01] <jakob> Why can't it send normal messages
[16:04:05] <eddyb> lol
[16:04:06] <jakob> kimundi: Why?
[16:04:13] <eddyb> jakob: notices are not supposed to affect you like that
[16:04:16] <kimundi> notices are intended for automatic responses from bots
[16:04:17] <jakob> :|
[16:04:26] <kimundi> to prevent things like bot loops
[16:04:29] <jakob> Cool :| let me go kick my config file
[16:04:30] *** Quits: pudgetta (Mibbit@D0100B02.23D10232.89D37B92.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:04:53] <jakob> My console has been vibrating all afternoon and I just happened to be looking in here when it said somethnig
[16:04:56] <jakob> :L
[16:05:03] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[16:05:09] <pnkfelix> eibwen: let me show you a gist of what I meant
[16:05:52] <eibwen> okay :)
[16:05:59] <pnkfelix> eibwen: https://gist.github.com/pnkfelix/9531298
[16:06:09] <bjz> kimundi: somebody should mark that as an irrisi bug
[16:06:50] *** Quits: toffaste1337 (toffaste13@2638078A.59557868.C494D41A.IP) (Quit: Leaving)
[16:07:36] <kimundi> jakob: https://tools.ietf.org/html/rfc2812#section-3.3.2
[16:07:56] *** Joins: Rym (y@6C711401.48E527D5.51C6DE68.IP)
[16:07:59] <pnkfelix> eibwen: note that I've put the impl of SeekReader directly on the int that is impl'ing Seek and Reader there.   I did not attempt to do the "generalized" impl<T:Seek+Reader> SeekReader for T that we discussed earlier.
[16:08:09] <eibwen> yea
[16:08:32] <jakob> kimundi: similar to pm is probably whats trigging my thing
[16:08:34] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:08:46] *** Quits: skade_ (skade@B0278B5A.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:08:48] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[16:08:53] *** Joins: skade (skade@B0278B5A.505237C9.CAE22B62.IP)
[16:09:11] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Ping timeout)
[16:09:56] <nstdloop> Is there any work being done on a rust package manager or build system?
[16:10:11] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:10:33] <eddyb> we have a temporary solution that's getting a maybe-too-widespread adoption (cargo-lite). reminds me of npm actually
[16:11:12] <eddyb> nstdloop: there's this which I assume someone reserved for a reason https://github.com/rust-lang/cargo
[16:11:33] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[16:11:59] *** Joins: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca)
[16:12:27] <nstdloop> eddyb: This is quite temporary :)
[16:13:08] <eddyb> nstdloop: if brson were online, I'd redirect you to him
[16:13:23] <kimundi> nstdloop: Short story: We tried thrice, it failed. Now mozilla hires an professional, and in the meantime everyone uses makefiles or cargo-lite
[16:13:41] <eddyb> kimundi: oh, that's what "cargo" is about?
[16:14:00] <kimundi> eddyb: Hm? cargo-lite is likely inspiered by the second Rust package manager, cargo
[16:14:14] <Ms2ger> kimundi, Mozilla hiring professionals? Sounds likely ;)
[16:14:20] <eddyb> kimundi: this is new https://github.com/rust-lang/cargo
[16:14:22] <kimundi> no idea what that cargo on github is
[16:14:33] <flan3002> nstdloop: Nothing can be as permament as temporary solutions. :) But I hope it isn't too permanent...
[16:14:49] <eddyb> kimundi: I mean, it makes sense if they're hiring a professional to work on it
[16:15:07] <nstdloop> A bad package manager can hurt a lot... See: cabal (IMO).
[16:15:11] *** Joins: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP)
[16:15:26] *** Quits: Ms2ger (Ms2ger@moz-4A14BC33.ugent.be) (Quit: bbl)
[16:16:00] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[16:16:00] *** Joins: pepper_chico (pepper_chi@moz-E15D42C8.dsl.telesp.net.br)
[16:17:09] <flan3002> kimundi: What failed the first three times why and who do they want to hire?
[16:18:24] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[16:18:54] <kimundi> flan3002: I don'T really know about one and two, those where before my time here. rustpkg failed because it was wip, unfinished, and experimental phase for too long, with the result that people concluded it is broken by design and unusable, instead of "unfinished" :|
[16:19:01] <bstrie> bjz: I believe it was chrismorgan who did the legwork there
[16:19:15] *** Joins: aochagavia (Mibbit@moz-C82E8769.static.ziggozakelijk.nl)
[16:19:25] <kimundi> No idea about who they want to hire, and wether that information is still accurate
[16:19:27] <bstrie> bjz: https://github.com/AdamBrodzinski/RedScript/issues/1
[16:19:41] *** Joins: sinsnare (sinis_000@B7913476.E162DBB3.241A46D0.IP)
[16:19:45] *** Joins: dradtke (dradtke@moz-77578067.hfc.comcastbusiness.net)
[16:19:49] <pepper_chico> sadly, some random error building rust tip on ubuntu now =/
[16:20:11] <bjz> bstrie: yeah, I found that. the guys on #yfl are talking about issues they are having with the mercury .m extension and linguist: https://github.com/github/linguist/pull/748
[16:20:14] <pepper_chico> some stuff with Popen and getting compiler version
[16:20:42] <bjz> bstrie: was just offering another example
[16:21:09] <bstrie> bjz: and the reason wasn't for github highlighting (we've been squatting on that since time immemorial), it was to convince the Ohloh folks to begin counting all .rs files as rust files
[16:21:18] <bjz> nstdloop: ++
[16:21:18] *** Quits: skade (skade@B0278B5A.505237C9.CAE22B62.IP) (No route to host)
[16:21:21] *** Joins: skade (skade@B0278B5A.505237C9.CAE22B62.IP)
[16:21:42] *** Quits: aochagavia (Mibbit@moz-C82E8769.static.ziggozakelijk.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[16:22:39] <bjz> nstdloop: cabal is a headache for newcomers like me trying to compile haskell projects
[16:22:39] <flan3002> kimundi: Hm... Would have been interesting to learn why they failed. As you described it there must be something really hard about it.
[16:22:39] <bstrie> bjz: not sure what mercury is, but perhaps you should suggest that they adopt the .hg extension :P
[16:22:39] *** Joins: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[16:22:39] *** ChanServ sets mode: +o jdm
[16:22:39] <bjz> nstdloop: and having them coexist
[16:22:39] <nstdloop> bjz: As a build system it's... passable. As a package manager is where the real holes are.
[16:22:41] <bjz> bstrie: hah. it is named after the god I think: http://mercurylang.org/
[16:22:50] *** Quits: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net) (Quit: bleibig)
[16:23:03] <nstdloop> bjz: It doesn't keep track of what it has installed. It doesn't update. It doesn't... etc.
[16:23:30] <bjz> nstdloop: yeah, it completely bamboozles me
[16:23:30] <kimundi> flan3002: To many conflicting interests and ideas is the main problem. Like, central repository vs decentral, integration with regular builds or not, compability with external package mangers, easy of use, ease of ignore...
[16:23:53] <bjz> nstdloop: I actually hold off on installing new haskell things because of it
[16:23:57] <nstdloop> bjz: I think npm and brew do it right. Npm has dependencies of different versions for different packages, local and global installation, etc. and brew is just so easy to use.
[16:24:27] <bjz> nstdloop: yeah
[16:25:08] *** Joins: j3rky (gmpreussne@moz-97180B8B.nc.res.rr.com)
[16:25:26] *** Quits: j3rky (gmpreussne@moz-97180B8B.nc.res.rr.com) (Quit: Leaving)
[16:25:59] <flan3002> kimundi: All of them? Supporting central and decentral and everything... The best package managers I've used had a central repository, but what's wrong with allowing both? Like hosting on a private server or on GitHub or on the central server, but standardising the project layout so that one can use all of these sources?
[16:26:57] <nstdloop> flan3002: Brew gets around that by providing options to specify specific download sites in the formula for a package - you can use the "central" brew system or you can download from something else.
[16:27:19] <flan3002> I can't think of any arguments against using all sources, but then again I haven't wrote a package manager yet...
[16:27:34] <nstdloop> For instance the formula for rust gets you a bottle from brew but also lets you grab the source from github if you want.
[16:27:57] <flan3002> nstdloop: A bottle?
[16:28:06] <nstdloop> flan3002: s/bottle/prebuilt-binary
[16:28:15] <flan3002> Ok...
[16:28:18] *** Quits: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net) (Ping timeout)
[16:28:29] <nstdloop> Brew uses "bottle" and "pouring" for prebuilt binary and copying to the right place
[16:28:31] <nstdloop> it's a bit weird
[16:29:23] <flan3002> I guess it's the same thing with "oxidising" libraries with rustc...
[16:29:43] <bollu> nstdloop: sublime text's package manager too has a similar concept
[16:29:47] <nstdloop> Ya. Everyone has their weird terminology.
[16:29:48] <Yurume> what is oxidizing indeed?
[16:29:56] *** Parts: robhobbes (robert@D931AEC7.B8CF4085.71765F8E.IP) ()
[16:30:15] <nstdloop> bollu: I don't have much experience with that. My suspicion is that all good package managers have something like that :).
[16:30:23] <bollu> nstdloop: heh, fair enough :)
[16:30:41] <bollu> Yurume: chemically, physically or Rust-ily? ;)
[16:30:54] <Yurume> Rustifically?: )
[16:31:37] *** Quits: flan3002 (flan3002@ADE308B1.8B38C502.16E13E53.IP) (Ping timeout)
[16:32:20] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[16:32:20] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[16:33:34] *** Quits: thesnowdog (doug@E8718008.CDB23781.6F17036B.IP) (Ping timeout)
[16:33:42] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[16:34:01] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Quit: nano)
[16:34:07] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[16:34:13] *** jorendorff is now known as jorendorff_away
[16:34:34] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[16:34:56] *** Joins: jadbaires (jadrian@moz-A37AC89A.dsl.telepac.pt)
[16:34:59] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[16:36:00] *** Joins: flan3002 (flan3002@moz-E0853D96.superkabel.de)
[16:36:09] <darnuria> Hello ! I have a little code and I want to make it work without break statement inside it : https://github.com/darnuria/Rust_exercices/blob/master/moreOrLess/main.rs#L49-L60
[16:36:15] *** Joins: thesnowdog (doug@E8718008.CDB23781.6F17036B.IP)
[16:36:16] <darnuria> Anybody have an idea?
[16:36:17] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[16:36:21] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[16:36:46] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[16:37:24] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[16:37:57] <Yurume> darnuria, why do you want to make it work without break?
[16:38:22] <Yurume> (and I don't understand why you are reading lines in the separate task, is there any particular reason?)
[16:38:26] *** jorendorff_away is now known as jorendorff
[16:38:47] <darnuria> Just for fun that was an experiment nothing serious.
[16:39:16] <nstdloop> is there are an Either type?
[16:39:23] <eddyb> was removed
[16:39:30] <nstdloop> eddyb: :(
[16:39:30] <nstdloop> why
[16:39:31] <Yurume> nstdloop, it is gone, replaced by the existing Result
[16:39:31] <eddyb> isomorphic to return and less useful in general
[16:39:32] *** Quits: ebalint (ebalint@moz-BFA5E762.inf.u-szeged.hu) (Input/output error)
[16:39:34] <eddyb> *Result
[16:39:44] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[16:40:00] <Yurume> eddyb, I did find it somewhat useful since you at least get the helper methods
[16:40:04] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[16:40:06] <darnuria> And for the break... I find it out too "rude" for stoping this. :/
[16:40:17] <nstdloop> So Result is basically Either by a different name
[16:40:23] <nstdloop> Like Option<T> and Maybe?
[16:40:24] *** Quits: benjamin_ (benjamin@moz-5606BC65.dip0.t-ipconnect.de) (Ping timeout)
[16:40:47] <eddyb> nstdloop: we actually had a different type, Either, but it was removed (that would be Haskell's Either)
[16:40:57] <eddyb> nstdloop: it's more useful to use Result for error handling
[16:41:03] <eddyb> nstdloop: and write a custom enum otherwise
[16:41:05] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[16:41:26] <eddyb> it really was just enum Either<T, U> {Left(T), Right(U)}
[16:41:44] <nstdloop> eddyb: Can you do type synonyms with parameters?
[16:41:58] <eddyb> like type aliases?
[16:42:01] <nstdloop> like in Haskell I could do type ThrowsError a = Either ErrorType a
[16:42:06] <eddyb> yupp
[16:42:09] <Yurume> darnuria, technically speaking you can alter the iterator to stop on the correct input with `take_while` method (and possibly `inspect` and `scan`?) 
[16:42:17] <eddyb> type IoResult<T> = Result<T, IoError>;
[16:42:20] <Yurume> darnuria, but I wouldn't recommend that
[16:42:30] <eddyb> nstdloop: ^^ that above is part of libstd
[16:42:30] <Yurume> it is a lot hard to use than just breaking
[16:42:44] <darnuria> Ok :)
[16:42:50] <nstdloop> eddyb: Cool.
[16:43:35] <nstdloop> Is there an unsafe "fromJust" equivalent for Option<T>s?
[16:43:52] <Yurume> unwrap()?
[16:44:03] <Yurume> yes, it is unwrap().
[16:44:10] <eddyb> it's not unsafe, just runtime failure
[16:44:20] <eddyb> (which we consider safe but a last resort)
[16:44:27] <nstdloop> eddyb: Right.
[16:44:31] *** Joins: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[16:44:31] <nstdloop> Yurume: thanks.
[16:44:47] <eddyb> nstdloop: you can look at the docs, there's a lot of stuff
[16:45:06] <nstdloop> eddyb: I've been trying. The search feature could use some improvement (IMO).
[16:45:07] *** Quits: mye (mye@moz-5578CD59.superkabel.de) (Quit: mye)
[16:45:09] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Ping timeout)
[16:45:21] <nstdloop> Searching by type signature is one of the most useful parts of hoogle
[16:45:49] <eddyb> that's interesting, open an issue about it ;)
[16:46:06] <eddyb> (we have the relevant information available in rustdoc, just need to use it in the search index)
[16:46:10] <Yurume> hmm, is Haskell's `error` unrecoverable? then `unwrap()` would be very similar but not exactly identical to `fromJust` since one can catch the task failure as a last resort.
[16:46:33] <nstdloop> error is unrecoverable outside of the IO monad where you can use catch to redirect to a different function
[16:46:48] <nstdloop> but usually it's treated as unrecoverable
[16:47:31] <nstdloop> eddyb: That would go on the github repo right?
[16:47:37] <eddyb> yeah
[16:47:51] *** Joins: srinivas (Mibbit@moz-D63BB219.eglbp.corp.yahoo.com)
[16:48:08] <srinivas> logger url
[16:48:16] <Yurume> nstdloop, ah, indeed, it is represented as an `ErrorCall` exception. I have only partial knowledge on Haskell so I was unsure ;)
[16:49:37] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[16:49:54] *** Quits: grandy (grandy@2B4EAEBB.44053F84.4F36BED4.IP) (Quit: Lost terminal)
[16:50:22] *** Quits: srinivas (Mibbit@moz-D63BB219.eglbp.corp.yahoo.com) (Quit: http://www.mibbit.com ajax IRC Client)
[16:50:34] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[16:51:01] *** Joins: untwisted (untwisted@moz-EA89F9D9.hsd1.fl.comcast.net)
[16:51:23] <seanmonstar> someone mind helping me figure out my problem with generics? https://gist.github.com/seanmonstar/9bb66794866f7bdc0ac6
[16:51:27] *** Quits: Kxepal (Miranda@moz-E7D8C0DD.pppoe.mtu-net.ru) (Quit: Kxepal)
[16:51:44] *** Joins: Kxepal (Miranda@moz-E7D8C0DD.pppoe.mtu-net.ru)
[16:52:00] *** Quits: dranov (dranov@moz-8ECE8169.gw-nat.bs.kae.de.oneandone.net) (Client exited)
[16:52:21] *** Quits: alonlevy (alon@moz-3ED5528E.red.bezeqint.net) (Ping timeout)
[16:52:56] *** Joins: dranov (dranov@moz-8ECE8169.gw-nat.bs.kae.de.oneandone.net)
[16:53:12] *** Joins: Kxepal832 (Miranda@moz-7AD032F4.pppoe.mtu-net.ru)
[16:53:16] <bollu> seanmonstar: what's the error?
[16:53:35] *** Quits: Kxepal (Miranda@moz-E7D8C0DD.pppoe.mtu-net.ru) (Ping timeout)
[16:53:42] <seanmonstar> bollu: errors are comments next to the line. first is "expected &mut S, saw FooEncoder"
[16:53:45] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[16:53:57] <krdln> seanmonstar: encode(&mut encoder)
[16:54:01] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[16:54:31] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[16:54:36] <bollu> ^
[16:55:00] <seanmonstar> hm, its not already mut?
[16:55:13] *** Joins: mye (mye@moz-5578CD59.superkabel.de)
[16:55:24] <krdln> it's mut, but it's value and encode is expecting reference (borrowed pointer)
[16:55:29] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[16:56:02] <seanmonstar> ok, just tried, and got `expected &mut S, but found &mut FooEncoder`
[16:56:15] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[16:56:19] <seanmonstar> expected type parameter but found struct
[16:59:12] *** Quits: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP) (Quit: WeeChat 0.4.4-dev)
[16:59:16] <krdln> so in this function S is always FooEncoder? So maybe just impl<T : Encodable<FooEncoder>> ...?
[17:00:25] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:00:57] *** Joins: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP)
[17:01:02] <seanmonstar> krdln: i'd like to impl ToFoo for all objects that impl Encodable<Ecndoer>
[17:01:33] *** Quits: redShadow (redShadow@9BDAF02B.D15F9219.1CCF65D9.IP) (Quit: Leaving)
[17:01:41] <seanmonstar> if i specify FooEncoder, i'd imagine that would remove its generic properties, no?
[17:01:57] *** jorendorff is now known as jorendorff_away
[17:02:46] *** jorendorff_away is now known as jorendorff
[17:02:56] <krdln> seanmonstar: You use FooEncoder in your code and you say it should work for any Encoder. Sorry, I don't quite understant. And I have to go. afk.
[17:02:57] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:03:50] <seanmonstar> not for any encoder, but implementations of Encodable all use Encodable<Encoder>
[17:03:55] *** Quits: Merth (shaun@moz-E41B2C4D.dhcp.mdsn.wi.charter.com) (Connection reset by peer)
[17:04:00] *** Quits: valentin (Thunderbir@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[17:05:02] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:06:13] <seanmonstar> krdln: aha, you were right, thanks
[17:06:16] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Ping timeout)
[17:06:56] *** Joins: lunaryorn (lunaryorn@moz-A51A02E.dynamic.mnet-online.de)
[17:06:57] *** Joins: echristo (echristo@3246441A.D6CCE4AE.77834EAA.IP)
[17:07:25] *** Quits: dpanth3r (dinofelis@228444B8.6B06001A.BB6F225C.IP) (Broken pipe)
[17:07:32] *** Quits: oberstet (quassel@moz-7BA59BB5.dynamic.mnet-online.de) (Connection reset by peer)
[17:07:58] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:08:11] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Quit: Leaving)
[17:10:30] *** Quits: halosghost (halosghost@moz-A41005D9.org) (Ping timeout)
[17:12:25] *** Joins: halosghost (halosghost@moz-A41005D9.org)
[17:13:16] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[17:14:09] *** Joins: bkircher (bkircher@moz-43C7D3BD.emscb.ruhr-uni-bochum.de)
[17:14:28] *** Parts: bkircher (bkircher@moz-43C7D3BD.emscb.ruhr-uni-bochum.de) (Leaving...)
[17:15:00] *** Quits: marianoguerra (marianogue@moz-28885503.dip0.t-ipconnect.de) (Ping timeout)
[17:15:05] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[17:15:35] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[17:15:37] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[17:15:40] *** Parts: dradtke (dradtke@moz-77578067.hfc.comcastbusiness.net) ()
[17:16:00] *** Joins: sellout1 (Adium@moz-968E9A09.hsd1.co.comcast.net)
[17:16:31] *** Quits: dranov (dranov@moz-8ECE8169.gw-nat.bs.kae.de.oneandone.net) (Client exited)
[17:17:08] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Ping timeout)
[17:17:22] *** Quits: sellout (Adium@moz-1D225F38.hsd1.co.comcast.net) (Ping timeout)
[17:17:32] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[17:17:45] *** Quits: oxum (anonymous@A91C38A3.81D533B5.520CDC98.IP) (Quit: ...)
[17:18:24] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:19:12] *** Quits: sellout1 (Adium@moz-968E9A09.hsd1.co.comcast.net) (Ping timeout)
[17:19:29] *** Quits: flan3002 (flan3002@moz-E0853D96.superkabel.de) (Ping timeout)
[17:21:11] *** Joins: sellout (Adium@moz-968E9A09.hsd1.co.comcast.net)
[17:21:37] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[17:22:39] *** Joins: Ms2ger (Ms2ger@moz-5180E188.adsl-dyn.isp.belgacom.be)
[17:24:18] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[17:25:01] *** Joins: lawrence (lawrence@moz-A1B35ECD.wireless.utoronto.ca)
[17:25:05] *** Joins: MarcWeber (marc@moz-FC10E83F.de)
[17:28:02] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Ping timeout)
[17:28:56] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[17:28:57] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:28:59] *** Quits: bollu (bollu@31CCE710.7065DDB9.6D6A344F.IP) (Client exited)
[17:29:06] *** Joins: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net)
[17:29:26] *** Quits: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net) (Quit: mbx)
[17:30:26] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[17:31:52] *** Quits: Ferreus (ferreus@moz-30FCBB63.dip0.t-ipconnect.de) (Ping timeout)
[17:32:01] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Input/output error)
[17:32:34] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[17:32:45] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[17:32:54] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Connection reset by peer)
[17:33:19] *** Quits: eatkinson-away (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Ping timeout)
[17:33:20] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[17:33:34] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[17:35:04] *** Joins: Blub\1 (wry@620605B3.71150E1A.237AE2BA.IP)
[17:35:21] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[17:35:21] *** Quits: mye (mye@moz-5578CD59.superkabel.de) (Quit: mye)
[17:35:32] *** Quits: Blub\0 (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[17:36:06] <sinsnare> why do i see so many methods that take &str as arguments? why cant they just take str?
[17:36:28] <pcwalton> "str" is dynamically sized and so can't be passed as an argument
[17:36:48] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[17:37:04] *** Joins: eatkinson-away (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[17:37:11] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[17:37:32] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Input/output error)
[17:37:33] <sinsnare> hmm interestring, will DST fix that?
[17:37:46] <pcwalton> no
[17:37:59] *** Quits: lawrence (lawrence@moz-A1B35ECD.wireless.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:38:01] <pcwalton> under DST you still can't pass dynamically sized things as arguments (probably)
[17:38:21] <sinsnare> so we will forever be passing references (which is fine, i just want to make surei understand)
[17:38:25] <pcwalton> yes
[17:38:35] *** pmoore is now known as pmoore|afk
[17:38:48] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[17:39:03] <sinsnare> ok, how does println! take a regular string then?
[17:39:07] *** Joins: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net)
[17:39:15] *** Quits: StarLight (StarLight@moz-22ECDDB3.dynamic.avangarddsl.ru) (Connection reset by peer)
[17:39:24] <Ms2ger> "foo" is an &str
[17:39:36] <Ms2ger> So is, surprisingly, &"foo"
[17:39:47] <sinsnare> oh so i dont really need to write the &?
[17:39:59] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:40:00] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[17:40:12] <sinsnare> is there a specific reason people ask for owned strings (why not just borrow it?)?
[17:40:15] <kimundi> rusti: let s: &'static str = "foo"; s
[17:40:19] -rusti- "foo"
[17:40:28] *** Quits: W0rmDr1nk (wormdrink@moz-89570CE2.access.mtnbusiness.co.za) (Ping timeout)
[17:40:41] <kimundi> sinsnare: Well it makes sense to take a owned string if you want to store it somewhere
[17:41:14] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:41:26] <sinsnare> ok understandable.
[17:42:17] *** Joins: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za)
[17:42:22] *** Joins: marianoguerra (marianogue@moz-25E71B.dip0.t-ipconnect.de)
[17:42:46] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[17:43:06] *** Quits: halosghost (halosghost@moz-A41005D9.org) (Ping timeout)
[17:43:22] *** Quits: eatkinson-away (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Connection reset by peer)
[17:44:12] *** Joins: halosghost (halosghost@moz-A41005D9.org)
[17:44:22] *** Joins: StarLight (StarLight@moz-44AB33E3.dynamic.avangarddsl.ru)
[17:45:47] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[17:47:25] *** Joins: bakibour (chatzilla@moz-45916A55.dip0.t-ipconnect.de)
[17:47:29] <bakibour> Greetings
[17:48:08] <pczarn> Can I make an example that is only tested for x86?
[17:48:31] <bakibour> Is the trait i implemented here https://gist.github.com/b0urb4k1/9526793 properly? Or would i have to use the generics on the function or the trait itself also?
[17:48:36] *** Joins: eatkinson-away (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[17:49:03] *** jorendorff is now known as jorendorff_away
[17:52:08] <zwarich> dynamically sized arguments would sure be fun for LLVM
[17:53:03] <seanmonstar> does `make check` also run the #[cfg(test)] tests in the libs?
[17:54:08] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[17:54:10] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[17:54:32] <doomlord_> is there a c_size_t , i can't find one, but i've found definitons of a 'size_t' deeper
[17:55:11] <Ms2ger> libc::size_t?
[17:55:16] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[17:55:37] <doomlord_> ok thats where i went wrong, looking for c_size_t
[17:57:00] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[17:57:25] <sinsnare> so wait, if you wont be able to have Dynamically sized args, how will you pass that stuff to functions?
[17:57:30] <sinsnare> oh wait, you pass a pointer? that makes sense
[17:57:42] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Client exited)
[17:58:12] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[17:58:13] *** Quits: dschatzberg (dschatzber@moz-E2680405.bu.edu) (Quit: Leaving)
[17:58:16] *** Joins: dschatzberg (dschatzber@moz-E2680405.bu.edu)
[17:59:57] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Ping timeout)
[18:00:01] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Ping timeout)
[18:00:14] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[18:00:29] *** Joins: judder (maradukewa@75FA4DEE.A989D80C.78E362FE.IP)
[18:01:00] *** Joins: lkuper (lkuper@moz-F1E67C2A.hsd1.in.comcast.net)
[18:01:20] <kimundi> seanmonstar: it especially runs them
[18:02:17] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[18:02:31] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[18:02:48] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[18:03:15] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[18:03:21] *** Quits: sellout (Adium@moz-968E9A09.hsd1.co.comcast.net) (Quit: Leaving.)
[18:03:23] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[18:03:46] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[18:04:33] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[18:04:49] *** Joins: q66 (q66@moz-D1C55153.range86-184.btcentralplus.com)
[18:05:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:07:11] *** Quits: murph (murph@moz-A933BAE1.oracle.com) (Broken pipe)
[18:07:22] *** Joins: murph (murph@moz-A933BAE1.oracle.com)
[18:08:32] *** Joins: dpanth3r (dinofelis@228444B8.6B06001A.BB6F225C.IP)
[18:08:50] *** Quits: Rym (y@6C711401.48E527D5.51C6DE68.IP) (Ping timeout)
[18:09:40] *** Quits: sinsnare (sinis_000@B7913476.E162DBB3.241A46D0.IP) (Ping timeout)
[18:09:44] *** Joins: mbx (mbebenita@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[18:10:08] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:10:21] *** Quits: bharadwaj (uid11995@moz-5F4AA75A.irccloud.com) (Quit: Connection closed for inactivity)
[18:10:24] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:11:57] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[18:12:42] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[18:13:17] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[18:13:25] <bakibour> Can anyone help me with line 18 here https://gist.github.com/b0urb4k1/9526793 , i am trying to return a struct with a closure
[18:13:27] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[18:13:54] <kmc> and what goes wrong?
[18:14:07] <bakibour> It says
[18:14:21] <bakibour>  error: expected `:` but found `|` , { parse: 'a |stream| -> ~[Result<S,R,F>]
[18:14:35] <bakibour> { parse: 'a |stream : &[S]| -> ~[Result<S,R,F>]
[18:14:45] <kmc> try 'a: |stream| -> ...
[18:14:55] *** Quits: glandium (glandium@moz-A09032B1.kimsufi.com) (Input/output error)
[18:14:56] <kmc> kind bounds on the free variables would come after the colon
[18:15:04] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[18:15:13] <bakibour> Does this always hold?
[18:15:24] <kmc> it's not generally the case that lifetimes need a colon
[18:15:26] <bakibour> That is whereever i use a' i need to use a colon?
[18:15:30] <kmc> no
[18:15:30] <kmc> I'm not sure what's going on to be honest
[18:15:32] <kmc> it's just a guess
[18:15:46] <bakibour> kk, the website i use to compile seems to take its time ;)
[18:16:36] <kmc> is there a function in the stdlib which will convert the character '\n' to the string "\\n" and such, but leave other chars alone and not put quote marks in the string?
[18:16:51] <bakibour> Then i get  error: expected `for` or `loop` after a label , { parse: 'a : |stream : &[S]| -> 
[18:17:05] <kmc> (other chars = printable and space, I mean)
[18:17:08] <bakibour> get the error
[18:17:24] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[18:17:42] *** Quits: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP) (Ping timeout)
[18:17:54] <bakibour> Maybe there is a problem with the trait as well?
[18:17:58] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Ping timeout)
[18:18:33] *** Joins: hunt3r (hunt3r@moz-E96F30DC.its.manchester.ac.uk)
[18:18:33] <kmc> rusti: std::char::escape_default('\n')
[18:18:34] -rusti- <anon>:11:9: 11:40 error: this function takes 2 parameters but 1 parameter was supplied
[18:18:34] -rusti- <anon>:11         std::char::escape_default('\n')
[18:18:34] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[18:18:34] -rusti- error: aborting due to previous error
[18:18:35] -rusti- application terminated with error code 101
[18:18:52] *** Quits: mindcat_ (mindcat@45814CCF.B1E12A5D.57E3C596.IP) (Quit: Lost terminal)
[18:18:54] <kmc> rusti: std::char::escape_default('\n', |c| print!("{:c}", c))
[18:18:55] -rusti- \n()
[18:19:05] <kmc> cool
[18:19:10] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[18:19:14] *** Joins: mpiechotka (mpiechotka@moz-CF1931C2.dynamic.mnet-online.de)
[18:19:55] *** Parts: mpiechotka (mpiechotka@moz-CF1931C2.dynamic.mnet-online.de) ()
[18:20:13] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:20:53] <seanmonstar> map.find(&~"something"); will the &~ get changed eventually?
[18:21:20] *** Joins: sellout (Adium@2917A62E.8B65BA63.1D2A2C57.IP)
[18:21:48] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[18:21:56] *** Quits: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za) (Ping timeout)
[18:22:01] <kmc> seanmonstar: what do you mean?
[18:22:15] <eddyb> seanmonstar: you should use find_equiv
[18:22:43] <strcat> (and no it won't get changed, you just shouldn't do that ;p)
[18:22:45] <seanmonstar> i have a map, and was trying to get a value with a str key, and tried various ways until &~ compiled. felt odd
[18:22:57] <strcat> seanmonstar: str isn't a type
[18:23:06] <seanmonstar> yea i get that
[18:23:07] <eddyb> .find_equiv(&("something"))
[18:23:08] <strcat> you have a hash table with ~str keys, find's signature takes &K
[18:23:12] <strcat> your K is ~str
[18:23:28] <strcat> it works like that in other languages with similar type systems too (like C++)
[18:23:43] <strcat> I don't think it's odd and I don't think a solution other than find_equiv should be expected
[18:23:47] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[18:23:57] <strcat> there won't be a general solution across all maps
[18:24:05] <seanmonstar> i have no C experience, i'm coming from dynamic languages. felt odd to me
[18:24:23] *** Joins: olem (olem@moz-D8B40BE5.fbx.proxad.net)
[18:24:44] <strcat> seanmonstar: a dynamic language isn't going to let you pass arbitrary keys of *different types* when searching
[18:24:54] <strcat> it doesn't matter if they can theoretically be compared, in most cases it won't work
[18:25:01] *** Joins: sinsnare (sinis_000@B7913476.E162DBB3.241A46D0.IP)
[18:25:02] <strcat> unless the special cases are hardcoded in
[18:25:03] *** Joins: FreeFull (freefull@moz-A3210B4C.ppp.as43234.net)
[18:25:23] <nstdloop> Is there a u64 sqrt or should I just cast to f64 and back?
[18:25:27] <seanmonstar> strcat: that's fine. i was most hoping `map.find("something") would work, since that passes a &str, but it complains cause its &'static
[18:25:28] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[18:25:35] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[18:25:35] *** Joins: Savago (Savago@4C8C0E71.E820043D.D4C04133.IP)
[18:25:40] <strcat> seanmonstar: that's not why it fails
[18:25:47] <strcat> seanmonstar: &str and ~str are totally independent types
[18:25:47] <seanmonstar> well, that's the error message
[18:25:57] <strcat> seanmonstar: it tells you it fails because the type doesn't match
[18:26:02] <strcat> find takes &K, K is ~str
[18:26:05] <strcat> &str is an unrelated type
[18:26:51] *** Quits: olem (olem@moz-D8B40BE5.fbx.proxad.net) (Quit: Leaving...)
[18:26:55] <strcat> in python, if you define a type Point with fields x and y and then also define a type Coord with row and col fields, you're not just going to be able to pass Coord while looking for a key even though it represents the same thing
[18:27:12] <strcat> the __eq__ implementation won't handle it
[18:28:07] <seanmonstar> i understand the technical reasons behind it. writing find(&~anything) just felt weird. i'll get used to it
[18:28:18] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[18:28:21] <strcat> you shouldn't be doing that though
[18:28:32] <strcat> you're allocating a string just to do a lookup with a constant
[18:28:34] * strcat shrugs
[18:28:44] <nstdloop> Is there a function that returns an infinite iterator starting at n? Like python's count?
[18:28:49] <strcat> count
[18:28:57] <nstdloop> brilliant
[18:29:00] *** Joins: p1start1 (rewi@moz-A082F561.adsl.xtra.co.nz)
[18:29:02] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Quit: Leaving.)
[18:29:19] <seanmonstar> strcat: ok, so find_equiv can take &'static?
[18:29:29] <strcat> seanmonstar: it's not about &'static
[18:29:46] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Client exited)
[18:29:47] <strcat> &'static str is a &str
[18:30:17] <strcat> find's signature takes &K, find_equiv takes any type implementing Equiv for the key type
[18:30:24] <seanmonstar> i realize that "~str" is a K, so &K means &~str
[18:30:24] *** Quits: lunaryorn (lunaryorn@moz-A51A02E.dynamic.mnet-online.de) (Quit: Textual IRC Client: www.textualapp.com)
[18:30:28] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[18:30:53] *** Quits: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de) (Quit: Leaving.)
[18:31:26] <Ms2ger> Yep
[18:31:34] <Ms2ger> find_equiv can take & &str, though
[18:31:36] *** Quits: p1start1 (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[18:32:27] *** Quits: untwisted (untwisted@moz-EA89F9D9.hsd1.fl.comcast.net) (Ping timeout)
[18:33:20] *** Quits: sinsnare (sinis_000@B7913476.E162DBB3.241A46D0.IP) (Ping timeout)
[18:33:20] *** Joins: untwisted (untwisted@moz-EA89F9D9.hsd1.fl.comcast.net)
[18:34:08] <seanmonstar> hmm, not finding find_equiv
[18:34:50] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[18:34:59] <strcat> it's there if it's a HashMap
[18:35:04] <seanmonstar> ah, its on hashmap
[18:35:06] <seanmonstar> i have a treemap
[18:35:07] <bakibour> Ok gor rid of the error with the lifetime. When i have a member in a struct that happens to be a closure, lets say the instance of the struct is x and the member y (the closure) will x.y(...) be interpreted as something that has to be an extension of a trait?
[18:35:18] <strcat> seanmonstar: TreeMap doesn't offer something like this, because Equiv isn't enough
[18:35:22] <strcat> it would need something else
[18:35:26] <bakibour> Cause i get an error : Parser<'a,S,R,F>` does not implement any method in scope named `parse`
[18:35:28] <strcat> I think Equiv is the wrong way to do it anyway
[18:35:31] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Quit: Leaving)
[18:35:36] <eddyb> AlikeOrd?
[18:35:43] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[18:35:44] <strcat> no, just stop abusing traits
[18:35:47] <strcat> ;p
[18:35:48] <eddyb> haha
[18:35:50] <strcat> this is what closures are for
[18:35:58] <eddyb> oh derp
[18:36:02] <seanmonstar> strcat: so, how would you lookup in a treemap with a constant key?
[18:36:06] <eddyb> strcat: but there's some issues there
[18:36:10] <strcat> seanmonstar: you can't, atm
[18:36:13] <FreeFull> bakibour: Try (x.y)()
[18:36:13] <eddyb> you might want both < and ==
[18:36:14] <strcat> eddyb: not for this
[18:36:19] <strcat> eddyb: take two parameters
[18:36:25] <bakibour> FreeFull: sec
[18:36:27] <eddyb> I guess it's not terrible
[18:36:30] <seanmonstar> strcat: so i must stick with &~"foo"?
[18:36:36] <strcat> eddyb: it's better than these broken things like Equiv
[18:36:36] <rdgawdzi> ls
[18:36:37] <eddyb> seanmonstar: fix TreeMap pls
[18:36:38] *** Quits: halosghost (halosghost@moz-A41005D9.org) (Ping timeout)
[18:36:43] <seanmonstar> lol
[18:36:46] <strcat> eddyb: anyway TreeMap just needs cmp
[18:36:53] <strcat> HashMap needs eq and a hash function
[18:36:59] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[18:37:00] *** Joins: alonlevy (alon@moz-944C9098.red.bezeqint.net)
[18:37:01] <bakibour> FreeFull: That seems to work thanks.
[18:37:01] <strcat> Equiv doesn't adequately express that the hash function must match
[18:37:02] <eddyb> cmp -> Ordering?
[18:39:43] *** jorendorff_away is now known as jorendorff
[18:40:14] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Client exited)
[18:40:41] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[18:40:46] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[18:41:02] *** Quits: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com) (Ping timeout)
[18:41:43] <nstdloop> is .sort() inplace?
[18:41:55] <Ms2ger> What's its signature?
[18:41:57] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[18:41:58] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[18:41:59] <nstdloop> and if so is there a not-in-place version?
[18:42:09] *** Joins: tcsc (tcsc@moz-5E71BAD9.hsd1.ma.comcast.net)
[18:42:36] <nstdloop> Ms2ger: Fair. Is there a not-in-place version?
[18:42:36] <kimundi> strcat: How would you solve it with closures?
[18:42:39] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Ping timeout)
[18:42:56] <eddyb> nstdloop: .clone().sort() :P?
[18:43:02] <eddyb> that's what we used to do in JS
[18:43:08] *** Quits: marianoguerra (marianogue@moz-25E71B.dip0.t-ipconnect.de) (Ping timeout)
[18:43:11] <eddyb> but there it's actually cheap
[18:43:12] <tcsc> in terms of file/directory structure, what's the intended way to organize a rust project?
[18:43:14] *** Joins: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk)
[18:43:21] <strcat> kimundi: add a find method on TreeMap taking a closure doing |&K, &K2| -> Ordering
[18:43:24] <strcat> simple
[18:43:24] <tcsc> or does anybody know of a good example i can mimic
[18:43:25] *** Joins: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com)
[18:43:26] <cmr> tcsc: pretty free-form.
[18:43:42] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[18:43:52] <tcsc> cmr: i'm new. isn't there something like mod.rs?
[18:44:04] <cmr> tcsc: that's unrelated to project organization.
[18:44:06] <strcat> kimundi: traits are for widely reusable patterns with clear laws
[18:44:09] <nstdloop> I'd like to do some_list_in_an_option.unwrap().sort() == some_other_list
[18:44:14] <tcsc> cmr: what is it then?
[18:44:15] <nstdloop> but now I have to make that intro three steps
[18:44:17] <strcat> kimundi: at least traits you expose in the API
[18:44:27] <strcat> kimundi: any trait without clear laws, and without many uses is an anti-pattern
[18:44:31] <cmr> tcsc: the usual convention is put your source code in a src/ directory and examples in src/examples/
[18:44:34] <eddyb> nstdloop: do you want to sort list or vectors?
[18:44:37] *** Joins: flan3002 (flan3002@moz-E0853D96.superkabel.de)
[18:44:38] <strcat> that's straight from the haskell world where rust takes type classes from
[18:44:48] <nstdloop> eddyb: A ~[u64]
[18:44:51] <cmr> tcsc: mod.rs is the file rustc looks in when you do `mod foo;` and fo is a directory.
[18:44:52] *** Quits: jix (jix@moz-D969BFFC.de) (Ping timeout)
[18:44:54] <eddyb> nstdloop: that's not a list then
[18:44:54] *** Joins: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za)
[18:45:13] <tcsc> cmr: i see. are .rc files gone now?
[18:45:21] <nstdloop> eddyb: My poor Haskell and Python fed brain is addled :). Ok so vector. Does that change my situation?
[18:45:23] <strcat> kimundi: for example find_equiv on HashMap doesn't actually put the requirements into the trait anyway
[18:45:25] <cmr> tcsc: yes, they have been for a long time.
[18:45:35] <eddyb> nstdloop: however, it should be easy for you to implement a not-in-place version with your algorithm of choice
[18:45:37] <strcat> kimundi: it just *assumes* the hash is going to be the same if equality is the same
[18:45:40] <cmr> tcsc: lib.rs is the conventional crate root for libraries, main.rs for applicatinos.
[18:45:46] <bjz> strcat: +1 regarding traits
[18:45:49] <kimundi> strcat: I'm just not sure how to implement it with closures, thats why I'm asking. :) And I'm still unsure even given that function signature there. How would one use that closure to find something an a treemap?
[18:45:51] <strcat> it also doesn't document if it wants partial equivalence or equivalence
[18:46:12] <strcat> kimundi: TreeMap needs a comparison method to find the key
[18:46:17] <tcsc> cmr: is there documentation where i can read more about this?
[18:46:18] <eddyb> nstdloop: well, depends... our current sort is kind of micro optimized
[18:46:18] <strcat> it can come from a trait, or you can pass in an arbitrary closure
[18:46:23] <cmr> tcsc: no.
[18:46:26] <tcsc> bummer
[18:46:26] <strcat> it doesn't actually need two parameters
[18:46:33] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[18:46:33] <cmr> let me go write a wiki page :)
[18:46:33] <strcat> it just needs |&K| -> Ordering
[18:46:53] <nstdloop> Is the order of tests deterministic/reliable?
[18:46:55] <cmr> tcsc: https://github.com/cmr/gerphius is an example of a program, using cargo-lite.
[18:47:09] <tcsc> cmr: cargo-lite?
[18:47:18] <cmr> tcsc: package manager I wrote. https://github.com/cmr/cargo-lite
[18:47:26] <nstdloop> eddyb: Makes sense. In-place will be faster. Offering two versions would be nice though.
[18:47:30] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[18:47:37] <tcsc> oh thats nice.
[18:47:40] *** Quits: hunt3r (hunt3r@moz-E96F30DC.its.manchester.ac.uk) (Input/output error)
[18:47:45] *** Joins: jix (jix@moz-D969BFFC.de)
[18:47:50] <strcat> kimundi: you can use a closure anywhere you can use a trait (if rust had unboxed closures)
[18:47:54] *** Joins: halosghost (halosghost@moz-A41005D9.org)
[18:48:02] *** Joins: hunt3r (hunt3r@moz-E96F30DC.its.manchester.ac.uk)
[18:48:04] <kimundi> strcat: Ah, so you get a key, and tell find() with the return value wether the thing you look for is smaller/greater/equal the key
[18:48:06] <strcat> kimundi: a trait *only* makes sense if this is a common pattern you are encoding
[18:48:19] <strcat> if you're not able to define really clear rules for the trait, it doesn't make sense
[18:48:32] <strcat> unless it's just an internal detail (and even then, a closure is probably simpler)
[18:48:34] *** Quits: Ms2ger (Ms2ger@moz-5180E188.adsl-dyn.isp.belgacom.be) (Quit: bbl)
[18:48:46] <strcat> imo, a big reason for rust abusing traits so much is lack of good closures
[18:48:56] <strcat> but the closures we have *are* good enough for this use case
[18:49:13] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:49:15] <kimundi> How would a similar thing look like for hashmaps instead of Equiv?
[18:49:30] <bakibour> I am experiencing some problems with the lifetime now, so i assume the rest compiles ok, i can not yet decipher the error message though or how i would fix the problem https://gist.github.com/b0urb4k1/9526793
[18:49:42] *** Quits: hunt3r (hunt3r@moz-E96F30DC.its.manchester.ac.uk) (Ping timeout)
[18:49:48] <eddyb> kimundi: that's harder because you need to enforce that equivalent things have the same hash
[18:49:50] <strcat> kimundi: pass an equality closure instead |&K| -> bool
[18:49:51] *** Joins: bollu_ (bollu@31CCE710.7065DDB9.6D6A344F.IP)
[18:49:56] <strcat> eddyb: well, Equiv doesn't enforce it
[18:50:02] <eddyb> right, but we should
[18:50:05] <bakibour> The returned Parser seems to not match the required lifetime i have no idea how to fix this yet though.
[18:50:09] <eddyb> otherwise someone can implement it wrong and bleah
[18:50:11] <strcat> eddyb: but then Equiv is only useful for hash tables
[18:50:15] *** Quits: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Ping timeout)
[18:50:22] <eddyb> strcat: EquivHash?
[18:50:24] <strcat> makes it even more questionable as a trait
[18:50:25] <burntsushi> cmr: thanks for cargo-lite! --- i had wanted to ask, what's with ~/.rust? at first i thought that it was just some convention you happened to pick, but it looks like rustc knows about it. is that documented anywhere?
[18:50:27] <strcat> eddyb: so we need two?
[18:50:28] <kimundi> strcat: huh, wouldn't that lead to O(n) ?
[18:50:31] <strcat> kimundi: no
[18:50:32] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Client exited)
[18:50:34] <strcat> kimundi: don't see why
[18:50:35] <cmr> burntsushi: it's what rustpkg used.
[18:50:43] <cmr> burntsushi: specifically it's the default value of RUST_PATH
[18:50:48] <strcat> kimundi: hash tables need equality, that's why there's an Equiv trait providing equality for this function
[18:50:54] <strcat> kimundi: instead of Equiv you can use a closure
[18:50:57] <kimundi> strcat: Okay, what is the bool return value supposed to tell find()
[18:51:04] <burntsushi> cmr: ah, i'm still pretty new, so i hadn't used rustpkg before. didn't know about RUST_PATH.
[18:51:04] <strcat> kimundi: if it is equal
[18:51:10] <strcat> kimundi: the same thing Equiv tells it
[18:51:10] <nstdloop> rusti: user std::iter; iter::count(2, 1).next()
[18:51:10] <cmr> burntsushi: rustc looks in RUST_PATH/lib/$target for libs.
[18:51:12] -rusti- <anon>:11:14: 11:17 error: expected one of `;`, `}` but found `std`
[18:51:12] -rusti- <anon>:11         user std::iter; iter::count(2, 1).next()
[18:51:12] -rusti-                        ^~~
[18:51:12] -rusti- application terminated with error code 101
[18:51:18] <nstdloop> rusti: use std::iter; iter::count(2, 1).next()
[18:51:22] -rusti- Some(2)
[18:51:29] <eddyb> strcat: nah just one trait that inherits Hash and Equiv or does something like Equiv
[18:51:30] <nstdloop> rusti: use std::iter; iter::count(2, 1).next().next()
[18:51:31] -rusti- <anon>:11:24: 11:55 error: type `std::option::Option<int>` does not implement any method in scope named `next`
[18:51:31] -rusti- <anon>:11         use std::iter; iter::count(2, 1).next().next()
[18:51:31] -rusti-                                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[18:51:31] -rusti- error: aborting due to previous error
[18:51:31] -rusti- application terminated with error code 101
[18:51:33] <burntsushi> cmr: ah, good to know. thanks
[18:51:34] <nstdloop> rusti: use std::iter; iter::count(2, 1).next().
[18:51:34] -rusti- <anon>:12:5: 12:6 error: unexpected token: `}`
[18:51:34] -rusti- <anon>:12     };
[18:51:35] <nstdloop> rusti: use std::iter; iter::count(2, 1).next()
[18:51:36] -rusti-               ^
[18:51:38] -rusti- application terminated with error code 101
[18:51:39] -rusti- Some(2)
[18:51:46] <strcat> eddyb: so, two traits (Equiv and EquivHash) existing to support a single method
[18:51:48] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[18:51:49] <kimundi> strcat: Okay, maybe I should look at what Equiv does again
[18:51:53] <strcat> eddyb: is Equiv partial equivalence or equivalence?
[18:52:03] <eddyb> idk. fix it!
[18:52:05] <strcat> are we going to have PartialEquiv and Equiv too?
[18:52:08] <strcat> eddyb: sure, by removing it
[18:52:11] <strcat> this kind of stuff doesn't belong
[18:52:43] *** Joins: dranov (dranov@30A1C0C8.F37D3D3.FB866788.IP)
[18:52:44] <nstdloop> rusti: use std::iter; iter::count(2, 1).take(10)
[18:52:44] -rusti- std::iter::Take<std::iter::Counter<int>>{iter: std::iter::Counter<int>{state: 2, step: 1}, n: 10u}
[18:52:53] <nstdloop> rusti: use std::iter; iter::count(2, 1).take(10).collect()
[18:52:53] -rusti- <anon>:11:24: 11:60 error: cannot determine a type for this bounded type parameter: unconstrained type
[18:52:54] -rusti- <anon>:11         use std::iter; iter::count(2, 1).take(10).collect()
[18:52:54] -rusti-                                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[18:52:54] -rusti- application terminated with error code 101
[18:52:54] <eddyb> strcat: closures instead of Equiv and add EquivHash?
[18:52:55] *** Joins: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de)
[18:53:00] <strcat> type classes are supposed to make life easier by encoding reusable rules
[18:53:02] <eddyb> strcat: the latter with serious rules
[18:53:15] <nstdloop> rusti: use std::iter; iter::count(2u64, 1u64).take(10).collect()
[18:53:16] -rusti- <anon>:11:24: 11:66 error: cannot determine a type for this bounded type parameter: unconstrained type
[18:53:16] -rusti- <anon>:11         use std::iter; iter::count(2u64, 1u64).take(10).collect()
[18:53:16] -rusti-                                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[18:53:16] -rusti- application terminated with error code 101
[18:53:16] <strcat> eddyb: why would EquivHash inherit from Equiv though?
[18:53:20] *** Joins: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[18:53:27] <eddyb> strcat: nah just reimplement Equiv
[18:53:34] <kimundi> bakibour: what exactly is the error there?
[18:53:41] <strcat> I don't think a single method deserves a type class
[18:53:41] <eddyb> if you want to remove it as a separate thing
[18:53:50] <strcat> it doesn't aid code reuse
[18:53:52] <bakibour> kimundi sec will paste it somewhere
[18:53:58] <eddyb> in any case... I may have a better solution for this ;)
[18:54:02] <cmr> plus it makes it *harder* to use, not easier.
[18:54:07] <cmr> can't have two impls.
[18:54:08] <eddyb> Deref!
[18:54:10] <nstdloop> rusti: use std::iter; iter::count(2u64, 1u64).take(10)
[18:54:10] <cmr> closure is more flexible.
[18:54:10] -rusti- std::iter::Take<std::iter::Counter<u64>>{iter: std::iter::Counter<u64>{state: 2u64, step: 1u64}, n: 10u}
[18:54:11] <kimundi> bakibour: you can edit gists btw, and add additional comments and files below it :)
[18:54:16] <strcat> please lets just not make so many type classes
[18:54:19] <strcat> look at haskell
[18:54:28] <strcat> even though haskell's prelude is ancient, it doesn't do this nonsense ;\
[18:54:41] <eddyb> strcat: make find-like methods use Deref trickery so they can deref their internal keys to a ref value
[18:54:44] <bakibour> kimundi: :) ill check that http://nopaste.info/627779d1cd.html
[18:54:49] <strcat> the use case for a type class is a widespread pattern with clear rules that you are able to encode
[18:55:06] <eddyb> strcat: I mean, HashSet<~str> should allow finding with a &~str and a &str by just using Deref
[18:55:07] <bakibour> kimundi: then i would need to be loged in though i guess.
[18:55:10] <strcat> eddyb: but there's still a use case for find_cmp
[18:55:14] <strcat> on TreeMap for example
[18:55:19] <eddyb> sure
[18:55:28] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Ping timeout)
[18:55:35] <eddyb> strcat: but calling hash/eq on the dereference should be saner than having to enforce it on a per-type basis
[18:55:39] <bakibour> I think i need to create the returned Parser not on the heap but somewhere else.
[18:55:52] <eddyb> where other than the heap?
[18:55:52] <strcat> eddyb: yes if you can figure that out I'd be okay with it
[18:55:58] <pepper_chico> guys, with tip of trunk right now, I was having some issues building rust, I figured out some gyp_uc python script was trying to get env CC and it was empty
[18:56:04] <eddyb> strcat: coherence!
[18:56:05] <bakibour> eddyb: managed or some such?
[18:56:08] <strcat> eddyb: I really dislike Equiv though
[18:56:08] <pepper_chico> so I have set it myself
[18:56:10] *** Joins: skade_ (skade@B0278B5A.505237C9.CAE22B62.IP)
[18:56:22] <eddyb> strcat: sure, it can die, as long as we can be smart wherever we used to use it
[18:56:26] <strcat> anyway I still have to fix the basic comparison traits
[18:56:28] <eddyb> bakibour: there is only one true heap
[18:56:30] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[18:56:32] <bakibour> I mean not on the stack
[18:56:32] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Client exited)
[18:56:34] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[18:56:38] <strcat> need to remove the `equals` method from TotalEq
[18:56:39] <eddyb> bakibour: not on the stack == on the heap
[18:56:41] <strcat> and then rename them
[18:56:44] <kimundi> bakibour: Ah, I see where the problem stems from. Was kinda hard to see before because of your coding style. :) The problem is the closure you construct in fn Or and try to return
[18:56:44] <strcat> not going to be very fun
[18:56:45] <bakibour> Yeah sorry :)
[18:56:47] <pepper_chico> and the compilation followed, notice that I tried several ./configure args and none worked
[18:57:02] <kimundi> bakibour: That is, in gneral you can not return a newly created stack closure like this
[18:57:06] <bakibour> kimundi: Sorry for the formatting eddyb pointed that out earlier also :)
[18:57:11] <nstdloop> Is there an fmap-like function for Option<T>?
[18:57:15] <pepper_chico> also, it seems now I have to call make more than once for compilation to occur
[18:57:15] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Quit: My iMac has gone to sleep. ZZZzzz…)
[18:57:17] *** Quits: skade (skade@B0278B5A.505237C9.CAE22B62.IP) (Ping timeout)
[18:57:20] <strcat> nstdloop: there's map
[18:57:26] <cmr> nstdloop: and_then is the equivalent iirc
[18:57:28] <eddyb> bakibour: how did you not fix it?
[18:57:37] <strcat> cmr: really?
[18:57:37] <cmr> maybe no
[18:57:39] <cmr> no that's bind
[18:57:41] <cmr> my bad
[18:57:49] <strcat> fmap is just map afaik
[18:57:49] <eddyb> bakibour: I hate the language that made you get used to that style
[18:57:52] <kimundi> bakibour: The clsoure captures the two parameters p1 and p2 by reference, which means it is only valid for as long as those two parameters are valid, which is only during the Or function
[18:57:53] <strcat> bind is chain/and_then
[18:57:54] <bakibour> eddyb: It is something that comes naturally to me :)
[18:58:01] <nstdloop> I'm looking for None -> None and Some(x) -> Some(f(x))
[18:58:04] <strcat> it's only fmap because it's generic
[18:58:04] <cmr> yeah it is.
[18:58:04] <bakibour> eddyb: c++ :)
[18:58:07] <strcat> nstdloop: yeah, map
[18:58:17] <eddyb> bakibour: how on earth would you get that from C++?
[18:58:21] <strcat> nstdloop: rust doesn't encode that stuff in a trait, I don't really think it would be useful
[18:58:27] <eddyb> bakibour: in any case, it's *bad* in Rust
[18:58:32] *** Joins: Rym (y@72FB9FA1.6FEC6D87.51C6DE68.IP)
[18:58:32] <strcat> nstdloop: since we rely on iterators to do efficient iteration with containers, for example
[18:58:32] <nstdloop> That's Maybe's Functor instance
[18:58:35] <bakibour> eddyb: ill try to fix it
[18:58:39] <eddyb> bakibour: semicolons are significant so they *should* be at the end of lines
[18:58:42] <strcat> nstdloop: yes but Functor doesn't really work in rust
[18:58:44] <eddyb> bakibour: etc. etc.
[18:58:47] <strcat> I don't think it can be efficient
[18:58:49] <nstdloop> strcat: I know :(
[18:58:52] <strcat> so we're probably just going to have map
[18:59:00] <eddyb> bakibour: nobody can read your code without refactoring it first
[18:59:00] <strcat> we don't need the same abstractions as haskell
[18:59:06] <FreeFull> strcat: I think it would be useful when you want to write functions that don't know what data structure they operate on
[18:59:11] <strcat> we don't have purity to work around, we have performance concerns to work around instead
[18:59:14] <bakibour> Ill fix the code style
[18:59:23] <strcat> FreeFull: use iterators
[18:59:27] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[18:59:35] <bakibour> kimundi: What do i have to do to fix that?
[18:59:37] <strcat> FreeFull: they provide bidirectional iteration and random-access
[18:59:54] * strcat shrugs
[18:59:59] <FreeFull> strcat: Is there an iterator for Option?
[18:59:59] <bollu_> so we're doing code reviews now? can I post my shitty code? :)
[19:00:02] <strcat> FreeFull: yes
[19:00:02] <cmr> FreeFull: yes.
[19:00:02] <nstdloop> strcat: True. I'm just trying to do clean code with Option<T>s without tons of redundant matchs
[19:00:10] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[19:00:16] <strcat> FreeFull: I think there are actually 3 iterators for Option, although it reuses the same type with a type parameter
[19:00:22] <strcat> &mut, & and by-value
[19:00:26] <bollu_> strcat: what!? 
[19:00:33] <FreeFull> So, how would you write a function that's generic over all iterators?
[19:00:34] <bollu_> strcat: what's the rationale?
[19:00:42] <strcat> I think there's OptionIterator and then 3 methods to make one
[19:00:45] <strcat> hm
[19:00:47] <strcat> actually
[19:00:48] <cmr> FreeFull: fn foo<I: Iterator<A>>(x: &mut I) { ... }
[19:00:49] <strcat> maybe I fixed it
[19:00:57] <FreeFull> Ok
[19:00:58] <kimundi> bakibour: Well, this is one of those things where the fix is "don't do that". You can try to use proc(&[S]) -> Result<S, R, F> instead of a closure, but that means you can only call it at most once
[19:01:01] <strcat> bollu_: actually I think I removed the & and &mut ones
[19:01:05] <strcat> bollu_: as_ref/as_mut cover it now
[19:01:07] <strcat> I didn't remember.
[19:01:12] <bollu_> strcat: ah. I see.
[19:01:17] <kimundi> bakibour: If we had unboxed closures it would work
[19:01:27] <bakibour> Aha :)
[19:01:38] <strcat> bollu_: we used to have map_ref, and_then_ref, and versions for &mut, but I replaced those with as_ref/as_mut - just didn't remember ;)
[19:01:41] <bakibour> Now we are at the point bjz pointed me to yesterday
[19:01:59] <bakibour> I do guess that my journey finds it end here then?
[19:02:06] <strcat> since as_ref().map(closure) works fine
[19:02:16] <kimundi> bakibour: Well, you can still write the closure manually
[19:02:31] <bakibour> kimundi: How would that work?
[19:02:32] *** Quits: hoverbea_ (hoverbear@726D908C.44E18222.E74D50F2.IP) (Quit: Taking a nap.)
[19:03:01] <kimundi> bakibour: Instead of closure literals, define a struct that can hold p1 and p2 by-value and write a call() method for it
[19:03:21] <kimundi> and then explicitly return a value of that struct
[19:03:31] <bakibour> kimundi: Ok i will look into that, sounds a bit like the old function objects in c++
[19:03:37] <kimundi> right
[19:03:51] <bakibour> Is there any chance that this will be fixed soonish?
[19:03:52] <kimundi> unboxed closures would basically just do that behind your back :)
[19:04:05] <bakibour> Or a consense at least on how to deal with the problem in the meantime?
[19:04:15] <nstdloop> Is there a nicer way to write |x| x.last()?
[19:04:15] <kimundi> bakibour: Not really soonish, but its planned at least
[19:04:38] <kimundi> nstdloop: not now
[19:04:40] <cmr> nstdloop: not particularly.
[19:05:09] <bakibour> Would it be possible to add a struct that does what i need in the meantime?
[19:05:25] <kimundi> nstdloop: with UFCS, you might be able to do "use THingThatProvidesLast::last; let f = last; last(x)"
[19:05:36] <bakibour> To expose this as a pattern to be used until unboxed closures are available?
[19:05:40] <kimundi> err, forget the f at the end
[19:05:43] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[19:06:16] <kimundi> bakibour: what do you mean? in the std lib?
[19:06:29] <bakibour> kimundi: Anywhere
[19:06:50] <kimundi> bakibour: well, add it yourself then :)
[19:06:59] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[19:07:16] <bakibour> Is this not something most ppl would need?
[19:07:20] <kimundi> Its a special struct, not a general one
[19:07:25] <bakibour> Ok
[19:08:21] <bakibour> I guess that it would only be general if there were variadic generics?
[19:08:23] <kimundi> bakibour: Most people need something different than exactly two byvalue captures and one generic slice argument ;)
[19:08:29] <kimundi> right
[19:09:28] <bakibour> reformated the code
[19:09:39] <bakibour> Does this look more rusty?
[19:09:52] <cmr> tcsc: https://github.com/mozilla/rust/wiki/Docs-project-structure
[19:10:19] <tcsc> cmr: nice, thank you.
[19:10:30] *** Quits: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[19:10:35] *** Joins: lucian_ (lucian@303F9692.4304AE1E.CE5E78F6.IP)
[19:10:37] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[19:11:51] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[19:12:07] <kimundi> bakibour: better. :) Additional style nitpicks are too much whitespace between separators and snake_case function name.
[19:12:08] <tcsc> how up to date are the tutorial and manual?
[19:12:21] <bollu_> tcsc: not very AFAIK
[19:12:22] *** Quits: lucian_ (lucian@303F9692.4304AE1E.CE5E78F6.IP) (Ping timeout)
[19:12:32] <kimundi> bakibour: Also, we have a Result<T, E> type in the std library that you can use instead of a custom one
[19:12:40] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[19:13:08] <cmr> tcsc: they're up to date in that the code examples compile and run.
[19:13:17] <cmr> tcsc: but... the material isn't of the highest quality.
[19:13:24] <kimundi> tcsc: The code examples work, as they are explcitly tested, and the text itself is not that bad. It just lacks coherence because of years of patchwork
[19:13:37] <kimundi> (cmr: this time you where faster ;))
[19:13:47] <tcsc> it's not so out of date that i shouldn't read it though, right?
[19:13:54] <kimundi> no, definitly read it
[19:14:12] <kimundi> better than any other Rust source out there generally ;)
[19:14:21] <kimundi> (except rust for rubists maybe)
[19:14:47] *** Joins: mib_9k9vs2 (Mibbit@EBFEA7FC.CFD5D7E3.A208C5.IP)
[19:15:27] <tcsc> is that worth reading if i don't know ruby (my background is mostly c++)
[19:15:34] *** Quits: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk) (Ping timeout)
[19:15:53] *** Quits: skade_ (skade@B0278B5A.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:15:54] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[19:16:14] <cmr> probably.
[19:16:21] <cmr> it covers the basics of rust pretty well.
[19:16:44] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[19:17:00] *** Quits: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Ping timeout)
[19:17:04] <TobiasFar> anyone know what's up with this error during rust build? http://nopaste2.doomsong.co.uk/1394738075.php
[19:17:09] <kimundi> but its only for the last point release - which is not really relevant for initial learning, but starts to become relevant if you want to use actual library functions.
[19:17:15] *** Quits: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za) (Ping timeout)
[19:17:24] <cmr> TobiasFar: make VERBOSE=1
[19:17:56] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:18:13] <bollu_> kimundi: but it still refers to @!
[19:19:15] <bakibour> kimundi: cool thanks
[19:19:47] <bakibour> I still need to find my way around, just started to have a look at Rust yesterday so i need to find all the goodies first :)
[19:19:53] <nstdloop> rusti: [1, 2, 3].iter().last()
[19:19:59] -rusti- pastebinned 16 lines of output: http://sprunge.us/hHaB
[19:20:31] <nstdloop> rusti: a = [1, 2, 3].iter(); a.last()
[19:20:32] -rusti- pastebinned 8 lines of output: http://sprunge.us/HGiY
[19:20:43] <nstdloop> rusti: let a = [1, 2, 3].iter(); a.last()
[19:20:44] -rusti- pastebinned 18 lines of output: http://sprunge.us/aAbg
[19:20:59] <bakibour> Is there anything like Hoogle or so for Rust?
[19:21:03] <cmr> bakibour: no
[19:21:04] <nstdloop> rusti: let mut a = [1, 2, 3].iter(); a.last()
[19:21:04] -rusti- pastebinned 15 lines of output: http://sprunge.us/ieEF
[19:21:11] <strcat> bakibour: the docs have search, but not type-based search
[19:21:22] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:21:26] <nstdloop> Does anyone know how to deal with that ^ ?
[19:21:39] <strcat> nstdloop: [1, 2, 3].iter() doesn't work because [1, 2, 3] is a temporary
[19:21:39] <nstdloop> strcat: I filed an issue for that earlier today.
[19:21:41] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[19:21:47] <cmr> rusti: let v = [1, 2, 3]; println!("{}", v.iter().last())
[19:21:50] -rusti- Some(3)
[19:21:50] -rusti- ()
[19:21:56] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Ping timeout)
[19:22:03] <strcat> although I hope you're not using last() on an iterator over vectors ;p
[19:22:25] <nstdloop> I am not
[19:22:34] <nstdloop> That wouldn't be particularly smart
[19:22:49] <strcat> rust's type system isn't adequate enough to specialize things like that for random-access
[19:22:57] <nstdloop> rusti: [1, 2, 3][-1]
[19:22:58] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[19:23:02] -rusti- task '<main>' failed at 'index out of bounds: the len is 3 but the index is 18446744073709551615', <anon>:11
[19:23:02] -rusti- application terminated with error code 101
[19:23:06] <strcat> would have to be done for each vector and it's too much work ;p
[19:23:07] <cmr> rusti: let v = [1, 2, 3]; println!("{}", v.last())
[19:23:09] -rusti- Some(3)
[19:23:09] -rusti- ()
[19:23:30] <nstdloop> No negative indexing :(
[19:23:44] <cmr> indexing is by uint, not int.
[19:23:58] <strcat> and negative indexing makes it easier to go out-of-bounds with no error
[19:24:41] <strcat> + it'd make indexing even slower.
[19:24:58] <nstdloop> strcat: Does rust do bounds-checking
[19:25:01] <strcat> it would need to check a remainder or do an extra branch
[19:25:04] <strcat> nstdloop: yes, it's memory safe
[19:25:12] <strcat> nstdloop: although you can use unsafe indexing operations
[19:25:17] <nstdloop> At compile-time?
[19:25:18] <strcat> via unsafe {}
[19:25:26] <strcat> nstdloop: at compile-time?
[19:25:35] <strcat> the integer you pass as an index can be dynamic
[19:25:39] <nstdloop> Right
[19:25:40] <strcat> the bounds checking can't be at compile-time
[19:25:41] <nstdloop> Ya
[19:25:44] <nstdloop> Obviously
[19:25:47] <strcat> it has significant overhead
[19:25:54] <strcat> supporting negative indexes would add more
[19:26:10] <kimundi> nstdloop: but things like vector iterators can leave of the bounds checking safely
[19:26:15] <strcat> (and imo it masks too many mistakes)
[19:26:47] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (services.mozilla.org (Too many invalid passwords))
[19:27:02] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:27:58] *** Joins: jackneill (jackneill@moz-5AD26CED.pool.digikabel.hu)
[19:29:11] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[19:30:55] *** Quits: mbx (mbebenita@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: mbx)
[19:31:02] <nstdloop> Are there explicit lambdas besides |args| body?
[19:31:10] *** Quits: flan3002 (flan3002@moz-E0853D96.superkabel.de) (Ping timeout)
[19:31:20] <nstdloop> I'm getting type errors trying to use || instead of an explicit function
[19:31:32] <cmr> nstdloop: no
[19:31:35] <cmr> what type error?
[19:31:43] <nstdloop> error: mismatched types: expected `fn(u64) -> ~[u64]` but found `|uint| -> <V1>` (expected extern fn but found fn)
[19:31:47] <cmr> Ah
[19:32:10] <cmr> `fn(u64) -> ~[u64]` is the type of a bare function. it's represented as a single function pointer.
[19:32:27] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[19:32:32] <cmr> the type you want is `|uint| -> ~[u64]`
[19:32:49] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[19:32:49] <nstdloop> Usually I'd be passing bare functions
[19:32:56] <nstdloop> I just don't want to make a new bare function for no purpose
[19:33:01] <cmr> bare functions can be coerced to closures.
[19:33:06] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[19:33:08] <nstdloop> ah
[19:33:12] *** Joins: claudiu (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP)
[19:33:13] <cmr> closures are function pointer + environment pointer
[19:33:20] <cmr> bare function coercion just makes the env pointer null
[19:33:25] <cmr> (since it doesn't use it)
[19:33:30] <bollu_> cmr: rust maintains environment also?
[19:33:46] <kimundi> cmr: not anymore actually
[19:33:48] <cmr> bollu_: the environment is the variables the closure captures.
[19:34:05] <nstdloop> cmr: Now I get "missing lifetime specifier"
[19:34:18] <cmr> kimundi: what changed?
[19:34:20] <nstdloop> on this:  type prime_generatorT  = |u64| -> ~[u64];
[19:34:36] *** Joins: mgottschlag (quassel@moz-D9018E99.cust.bluewin.ch)
[19:34:39] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[19:34:40] <cmr> nstdloop: ah, that needs type prime_generatorT<'a> = 'a |u64| -> ~[u64]
[19:34:44] *** Quits: lkuper (lkuper@moz-F1E67C2A.hsd1.in.comcast.net) (Quit: lkuper)
[19:34:51] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[19:34:57] <nstdloop> cmr: Why? What does that mean?
[19:35:22] <cmr> http://smallcultfollowing.com/babysteps/blog/2013/10/10/fn-types-in-rust/ has the full grammar etc
[19:35:24] <eddyb> that's the lifetime of the closure's captures
[19:35:28] <cmr> nstdloop: it's the lifetime of the environment pointer.
[19:35:30] <bollu_> cmr: yep, I know that. I mean, javascript does not maintain an entire "environemnt" by scheme does
[19:35:34] *** Joins: flan3002 (flan3002@ADE308B1.8B38C502.16E13E53.IP)
[19:35:40] <eddyb> (the stack where it was created in)
[19:35:53] <kimundi> cmr: eddyb changed bare functions to not have a unused environment argument, so bare functions now need to have a wrapper generated to be used as a closure. that happens automatically for static function items, but not for function pointers
[19:36:01] <nstdloop> So what does that specific annotation mean?
[19:36:16] <kimundi> nstdloop: 'a in general?
[19:36:18] <eddyb> nstdloop: 'a is a named lifetime
[19:36:24] <cmr> nstdloop: "A closure with lifetime a"
[19:36:35] <nstdloop> Ah. So that just means "any lifetime" basically
[19:36:37] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[19:36:43] <cmr> kimundi: that's still turning it into (*fn, *env)
[19:36:49] <cmr> nstdloop: yes
[19:36:59] <kimundi> cmr: not the same *fn though
[19:37:04] <cmr> kimundi: sure.
[19:37:23] <bakibour> Can you have a trait for a trait?
[19:37:25] <nstdloop> cmr: ok. Interesting.
[19:37:25] <eddyb> type prime_generatorT<'a> = 'a |u64| -> ~[u64] means that prime_generatorT is a generic type (generic over lifetime 'a) that is a closure with lifetime 'a that takes an u64 and returns a vector of u64
[19:37:30] <eddyb> bakibour: not yet
[19:37:41] <bakibour> Meh :)
[19:38:13] <bakibour> Hm i think ill start with something different than the parser combinator.
[19:38:24] <TobiasFar> cmr: http://nopaste2.doomsong.co.uk/1394739474.php
[19:38:29] <eddyb> maybe we should have http://www.cdecl.org/ for Rust
[19:38:33] <nstdloop> What's the cleanest way to convert Option<&u64> to Option<u64>?
[19:38:34] <cmr> I don't think anyone has succesfuly written a parser combinator in rust since before 0.5
[19:38:40] <strcat> nstdloop: map
[19:38:45] <cmr> nstdloop: .map(|x| *x)
[19:38:46] <bakibour> eddyb: :))
[19:38:48] <kimundi> bakibour: You will be able to impl a trait for a trait object, but implementing a trait for a trait in general does not work, as traits are not types
[19:39:09] *** Joins: janua (francis@moz-C38AAD4A.cable.virginm.net)
[19:39:19] <bakibour> What i had in mind now was to have a Parsable trait, and this should be combinable.
[19:39:34] <eddyb> bakibour: whatever you do, don't give up
[19:39:40] <eddyb> throw away bad ideas, keep good ones
[19:39:45] <bakibour> Aye
[19:39:47] <eddyb> get that Rust in your blood
[19:39:51] <cmr> TobiasFar: ah there's wrong quoting there.
[19:40:02] <cmr> TobiasFar: it should be -C linker="clang++ -Qunused-arguments"
[19:40:10] <bakibour> I am just not sure if it is worth to work on this when the solution is at hand once you have the features.
[19:40:22] <bakibour> So i can just start with something else.
[19:40:47] <nstdloop> what does use of moved value mean?
[19:40:48] <bakibour> I guess the bumps i ran into are the reason why there is no parser combinator yet.
[19:40:57] <TobiasFar> do i have to fix that locally or will you in git?
[19:41:06] <bakibour> Is there any roadmap in general for features?
[19:41:14] <kimundi> nstdloop: Are you familiar with Rusts ownership rules and that values can move?
[19:41:30] <nstdloop> kimundi: A little bit.
[19:41:38] <bakibour> Maybe summer of code would be cool for Rust.
[19:41:38] <cmr> TobiasFar: I don't plan on fixing it :)
[19:41:42] <nstdloop> kimundi: You mean that the ownership of a value can transfer.
[19:41:46] <strcat> http://static.rust-lang.org/doc/master/tutorial.html#move-semantics
[19:42:31] <kimundi> nstdloop: "use of moved value" is a error you get when you try to access a variable that you moved a value from before. At the point where you got the error, it is basically deinitialized
[19:42:37] <kimundi> nstdloop: right
[19:43:01] <nstdloop> kimundi: That makes sense, but I have absolutely no idea how that applies to my case here.
[19:43:06] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Ping timeout)
[19:43:11] <TobiasFar> cmr: wonder what caused it...it worked fine 4 weeks ago
[19:43:37] <TobiasFar> cmr: should i create a github issue?
[19:43:41] <cmr> TobiasFar: yes
[19:44:02] <kimundi> nstdloop: usually its because you take something by value that should be a reference instead, or have something that does contain a moving type
[19:44:42] <nstdloop> It's in my tests. I have a cfg(test) that I use to generate tests when given a function to test.
[19:45:08] *** Joins: mib_qz1mb5 (Mibbit@moz-7AD9232F.rev.numericable.fr)
[19:45:17] <nstdloop> I didn't have it until I switched the types to closures instead of function pointers
[19:45:30] *** Quits: japaric (japaric@A3BB1393.E3ED3AAA.BFC118EE.IP) (Ping timeout)
[19:45:58] *** Joins: japaric (japaric@AF44BDDE.31BF4ADA.BFC118EE.IP)
[19:46:07] <kimundi> nstdloop: closures are moving types
[19:46:35] <nstdloop> This function takes the closure and dispatches it to two other functions that take a function. I get an error when I try to do that.
[19:46:48] <eddyb> you can't have your cache and eat it too
[19:46:53] <kimundi> nstdloop: because they effectively capture outer variables by &mut references, which are moving types because we forbid aliasing mutable references
[19:47:07] <eddyb> *cake lol
[19:47:07] <nstdloop> Ah... How do I fix that?
[19:47:10] <eddyb> closures are equivalent to &mut Trait
[19:47:17] <nstdloop> That makes sense.
[19:47:24] <strcat> nstdloop: don't use a closure, they're not capable enough of filling many needs atm
[19:47:53] <strcat> or rework the code to not need more than one copy of it
[19:47:54] *** Quits: Dnyarri (dnyarri@moz-84E87CA5.kapsi.fi) (Ping timeout)
[19:48:03] <kimundi> nstdloop: you can pass the closures to the other functions by reference for example
[19:48:23] *** Joins: mbx (mbebenita@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[19:48:34] <eddyb> kimundi: the &mut * trick?
[19:48:39] <eddyb> s/trick/reborrow operator
[19:48:49] <eddyb> you shouldn't be able to call closures through &
[19:48:54] <eddyb> at least AFAIK
[19:49:19] <kimundi> hm? I just mean something like &mut ||
[19:50:26] *** Joins: Dnyarri (dnyarri@moz-84E87CA5.kapsi.fi)
[19:50:44] *** Quits: funnel (hegel@DEB31F3E.28CFCE3E.FC69BED9.IP) (Client exited)
[19:51:03] <nstdloop> http://pastebin.mozilla.org/4577125
[19:51:05] *** Joins: funnel (hegel@DEB31F3E.28CFCE3E.FC69BED9.IP)
[19:51:22] *** Quits: janua (francis@moz-C38AAD4A.cable.virginm.net) (Quit: janua)
[19:51:25] <nstdloop> what do I do with that
[19:51:39] *** Quits: bakibour (chatzilla@moz-45916A55.dip0.t-ipconnect.de) (Quit: ChatZilla 0.9.90.1 [Firefox 27.0.1/20140212131424])
[19:52:46] *** Joins: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl)
[19:53:19] <bollu_> where can I find a list of all the methods of [] in Rust?
[19:53:30] <aatch> bollu_, std::vec
[19:54:01] *** Joins: brehaut (andrew@6D85C12E.2F6BE07D.613E47D1.IP)
[19:54:25] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:54:35] <bollu_> thanks
[19:54:39] *** Quits: mib_9k9vs2 (Mibbit@EBFEA7FC.CFD5D7E3.A208C5.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:55:56] <bollu_> question: how do I remove a known element from a vector?
[19:56:32] *** Joins: bharadwaj (uid11995@moz-5F4AA75A.irccloud.com)
[19:56:33] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[19:57:17] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[19:57:58] <pepper_chico> guys do you have an online rust playground?
[19:58:16] *** Quits: IanCormac84 (User@8CFAF80B.64D641E5.67DFF8B4.IP) (Quit: Leaving.)
[19:58:17] <pepper_chico> with latest build by the way =)
[19:59:10] *** Quits: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[19:59:53] *** Quits: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: Ex-Chat)
[20:00:17] <pepper_chico> question, does make install now overwrite an old install?
[20:00:36] *** Joins: hoverbear (hoverbear@moz-DAE63E58.wireless.uvic.ca)
[20:01:02] <pepper_chico> because I have just done that with an old install in /usr/local, this time it seems no old stuff is left
[20:01:15] <strcat> pepper_chico: there's a web version of rusti
[20:01:19] <strcat> and it uses a nightly build
[20:01:43] <strcat> if someone wants to provide VPS hosting I can use, it can be available ;p
[20:02:15] <hoverbear> strcat: Use Openshift, should be enough power
[20:02:16] <bollu_> so, there's no way to remove an element from the vector without an index?
[20:02:21] <pepper_chico> strcat: you mean to have the server executable, not the hosting
[20:02:27] *** Quits: ahunt (ahunt@moz-6D6D79D6.cable.virginm.net) (Ping timeout)
[20:02:28] <strcat> hm?
[20:02:44] *** Joins: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk)
[20:02:59] <pepper_chico> you said there's a web rusti, but it's not on the web now
[20:03:08] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[20:03:09] *** ChanServ sets mode: +ao brson brson
[20:03:11] <pepper_chico> ?
[20:03:16] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Quit: Textual IRC Client: www.textualapp.com)
[20:03:25] <strcat> hoverbear: what are the specs of the free instance? it's not clear
[20:03:45] *** Joins: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[20:04:15] <hoverbear> strcat: Look at "What's a gear" https://www.openshift.com/products/pricing
[20:04:22] <pepper_chico> can annoyone confirm make install overwrites stuff now, so I don't need to clean up the old one?
[20:04:33] *** Quits: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk) (Ping timeout)
[20:04:35] <hoverbear> strcat: 512 mb, enough CPU to do basically whatever, 1gb disk space
[20:04:40] <strcat> hoverbear: yeah that's not enough
[20:04:46] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[20:04:48] <hoverbear> strcat: How much do you need?
[20:05:12] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[20:05:13] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:05:15] <strcat> well rust likely isn't going to fit in 1GiB with all the deps (gcc, ld, etc.) without work
[20:05:27] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[20:05:36] <strcat> rusti takes something like 80MiB to compile 1 + 1
[20:05:47] <hoverbear> strcat: Hold on, let me grab my shell
[20:05:49] <strcat> and a web page would need to be concurrent
[20:05:50] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:06:09] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[20:06:16] *** Quits: ChrisOei (ChrisOei@moz-53A9266A.blurb.com) (Ping timeout)
[20:06:17] <strcat> so I'd say it's going to need 128MiB per instance *at a minimum* (large programs won't work) and then depending on the # of users it needs a multiple of that
[20:06:24] <strcat> each run is allowed to take up to 5s atm
[20:06:33] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[20:06:37] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.50.1)
[20:06:44] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:06:48] <kimundi> bollu_: you can pop() or shift() to remove the last/first
[20:06:51] <strcat> and if it can't put the root in tmpfs (the same root can be reused concurrently) then it needs more time
[20:06:58] <strcat> unless the drive is an SSD
[20:07:00] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[20:07:05] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[20:07:11] <strcat> so I don't really think it will work
[20:07:12] <hoverbear> strcat: Comes with gcc
[20:07:14] *** Joins: ChrisOei (ChrisOei@moz-53A9266A.blurb.com)
[20:07:17] <hoverbear> Comes with ld
[20:07:27] <strcat> it doesn't count as part of the 1GiB?
[20:07:30] *** Joins: aochagavia (Mibbit@moz-C82E8769.static.ziggozakelijk.nl)
[20:07:32] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[20:07:42] <hoverbear> strcat: No you get 1gb in your container.
[20:07:42] *** Joins: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[20:07:46] <rdgawdzi> So for some reason, the x86* builds aren't updated even after make, and the build is finished. ./stage2/bin/rustc 0.10-pre (62f1d68 2014-03-09 03:06:42 -0700)
[20:07:57] <hoverbear> strcat: Do you want a shell in?
[20:07:59] <rdgawdzi> It worked before...
[20:08:00] <strcat> hoverbear: if you're not root in your container it won't wor
[20:08:02] <strcat> k
[20:08:10] <strcat> and I doubt they use CLONE_NEWUSER
[20:08:23] <strcat> it spawns a container per request
[20:08:26] <strcat> it can't do that if it's not root
[20:08:30] <aochagavia> I have changed a function in libstd, do I need to build the compiler again in order to test it?
[20:08:51] *** Joins: janua (francis@moz-C38AAD4A.cable.virginm.net)
[20:09:05] <kimundi> aochagavia: make check-stage1-std to run the std tests, and make check-stage1 to test the whole distribution
[20:09:09] <hoverbear> strcat: Ah, yeah, you're not root I don't think
[20:09:28] <kimundi> aochagavia: In general it will involve recompiling the compiler though
[20:09:28] <aochagavia> what do you mean by "the whole distribution"?
[20:09:39] <seanmonstar> is there a doc explaining the stages?
[20:09:46] *** Quits: mbx (mbebenita@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: mbx)
[20:09:54] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[20:09:54] *** ChanServ sets mode: +ao brson brson
[20:09:55] <kimundi> aochagavia: well, all tests of all crates, all doc tests, all additional testsuites
[20:09:59] <strcat> hoverbear: yeah it needs to be able to spawn a container per request, and each one is going to want 128-256MiB of memory
[20:10:06] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: leaving)
[20:10:07] <hoverbear> strcat: Would a digital ocean $5 plan work?
[20:10:09] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[20:10:09] *** ChanServ sets mode: +ao brson brson
[20:10:11] <strcat> and ideally, it can put the root it runs stuff on in a tmpfs
[20:10:11] <hoverbear> strcat: https://www.digitalocean.com/pricing/
[20:10:25] *** Quits: dranov (dranov@30A1C0C8.F37D3D3.FB866788.IP) (Ping timeout)
[20:10:54] <aochagavia> are pull requests tested automatically by Travis CI?
[20:11:12] <strcat> hoverbear: would work at a very small scale, if I felt like paying for it ;p
[20:11:20] <strcat> (and I don't really)
[20:11:27] <eddyb> strcat: amazon free stuff
[20:11:32] <hoverbear> strcat: I understand.
[20:11:37] <eddyb> does it have enough CPU time?
[20:11:38] *** Joins: zmthy (zmthy@moz-C2881CC3.ecs.vuw.ac.nz)
[20:11:39] <hoverbear> strcat: Heroku won't work. :S
[20:11:55] <pczarn> How do I pass arbitrary name-value options? --cfg name=...
[20:11:57] <strcat> eddyb: memory and I/O speed are probably the issue
[20:12:00] <bollu_> how do I construct a Deque?
[20:12:06] <eddyb> strcat: :(
[20:12:11] <eddyb> bollu_: RingBuf::new()?
[20:12:19] <eddyb> maybe with_capacity
[20:12:20] <strcat> eddyb: 5s isn't enough to just to read everything required from a HDD without cache
[20:12:37] <aochagavia> I want to submit a pull request... Do I need to run tests or are they automatically run?
[20:12:48] <eddyb> they are
[20:12:54] <strcat> eddyb: ideally it would have 1-2GiB of ram just for the root, and then lets say 256MiB per request
[20:13:04] <strcat> so if it had 4GiB, you could do a fair number of concurrent requests
[20:13:05] <kimundi> seanmonstar: Its standard stuff for a self hosting compiler. stage 0->1 is building compiler+libraries with a old downloaded snapshot compiler, stage 1->2 is building compiler+libraries with the freshly build compiler build with the old snapshot compiler, stage 2 is building compiler+libraries with a freshly build compiler build with a freshly build compiler
[20:13:10] *** Joins: rusty_phil (Mibbit@moz-D89AED47.hsi.kabel-badenwuerttemberg.de)
[20:13:18] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Connection reset by peer)
[20:13:23] <strcat> eddyb: anyway I definitely can't host it on my laptop ;\
[20:13:31] <aochagavia> eddyb: are you talking about the tests or with strcat?
[20:13:37] <bollu_> eddyb:  ringBuf is a deque?
[20:13:51] <eddyb> yupp
[20:14:02] <strcat> bollu_: it's a container with O(1) amortized push to either end and O(1) pop from both ends
[20:14:05] <pepper_chico> strcat: but, where's the web version of rusti? so anyone can trying figuring a host for it?
[20:14:05] <strcat> and O(1) indexing
[20:14:12] <eddyb> aochagavia: tests are tested by both travis (but not all) and bors (which doesn't let you pass if you screw up)
[20:14:16] <bollu_> ah, good to know
[20:14:32] <aochagavia> eddyb: so I can just open a pull request without testing locally
[20:14:36] <eddyb> yeah
[20:14:41] <aochagavia> thanks
[20:14:44] *** Quits: edwardw (edwardw@EA6A9A16.6707B7A9.D06A5682.IP) (Quit: Leaving...)
[20:14:52] <eddyb> but it's not recommended because people get a bit mad at you for causing repeated failures :P
[20:14:58] <strcat> pepper_chico: https://github.com/thestinger/rust-playpen
[20:14:59] <seanmonstar> kimundi: yea, i found this, explained it well https://github.com/mozilla/rust/wiki/Note-compiler-snapshots
[20:15:18] <pepper_chico> strcat: tks
[20:15:23] <kimundi> ah, great :)
[20:15:37] <aatch> aochagavia, it's generally a good idea to run the tests locally unless you're confident that you haven
[20:15:44] <aatch> haven't broken anything.
[20:15:52] <strcat> pepper_chico: the web server shim would need to be rewritten
[20:15:56] <strcat> trivial though
[20:16:14] <aatch> Since running the tests takes time, especially on bors
[20:16:17] <pepper_chico> hmm
[20:17:13] <strcat> it relies on having nightly builds available so it needs to be on arch or ubuntu, but playpen is going to require systemd and a more up-to-date kernel than ubuntu has soon (although atm, it works)
[20:17:24] <pepper_chico> strcat: do you have the rusti that runs here too? since rusti was removed from the repository
[20:17:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (No route to host)
[20:17:42] <strcat> pepper_chico: that's just https://github.com/thestinger/rust-playpen/blob/master/bin/irc.sh running in the playpen sandbox
[20:17:48] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:17:50] *** Quits: huseby (huseby@moz-9D57B0ED.dhcp.embarqhsd.net) (Quit: Leaving)
[20:18:08] <pepper_chico> ah ok
[20:18:11] <o11c> strcat: nightly builds can probably be made to work anywhere
[20:18:48] <strcat> o11c: but not the existing ones - glibc isn't forwards compatible, and we also use libstdc++, etc.
[20:19:26] <strcat> it'll be fun when LLVM needs to be updated again because it depends on C++11 now
[20:19:27] <o11c> I suppose the fact that I'm using nightlies on Debian testing isn't the best indicator
[20:19:53] <strcat> o11c: the ubuntu ones? they're not guaranteed to work
[20:20:09] <strcat> although it's not surprising that they do
[20:20:12] <pepper_chico> since this thing is all built on llvm, it would be nice to have a build config with all llvm stuff, even libc++, I have it on ubuntu llvm/clang/libc++/libc++abi, all working fine now
[20:20:20] <o11c> there's not *that* much that can fail, really
[20:20:47] <pepper_chico> I was using libcxxrt before, but libc++abi now works fine ubuntu
[20:20:53] <strcat> o11c: well, I'm wondering what is going to be done about LLVM depending on C++11 now for the rust snapshots ;)
[20:21:05] <strcat> pepper_chico: does libc++ work on CentOS5?
[20:21:09] <strcat> that's the issue.
[20:21:35] <pepper_chico> strcat: hah, I have no idea....
[20:21:40] *** Quits: Savago (Savago@4C8C0E71.E820043D.D4C04133.IP) (Quit: Savago)
[20:21:53] <pepper_chico> I had to work with CentOS5 once, what an outdated system
[20:21:55] <strcat> stuff like a bundled C++ lib would be disabled for real distro builds
[20:22:11] <o11c> strcat: I'm looking forward to it, it might finally force a solution to my problem using C++11 *directly*
[20:22:13] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[20:22:14] <strcat> pepper_chico: well the snapshots need to be built on an old system
[20:22:26] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[20:22:39] <strcat> so they're guaranteed to work on that glibc version and any later one
[20:22:40] *** Joins: marianoguerra (marianogue@moz-25E71B.dip0.t-ipconnect.de)
[20:22:46] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[20:22:49] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[20:22:57] *** Quits: rusty_phil (Mibbit@moz-D89AED47.hsi.kabel-badenwuerttemberg.de) (Quit: http://www.mibbit.com ajax IRC Client)
[20:23:03] <aochagavia> Any idea about this compile error? http://pastebin.com/Q6UzET9z
[20:23:06] <pepper_chico> ok, I may verify that, I recall to run libc++ on CentOS yes, I've setup it on workplace one
[20:23:12] <pepper_chico> s/one/once/
[20:23:17] <o11c> I've done that using a (chrooted) Debian oldstable for glibc, then installing gentoo-prefix for libstdc++
[20:23:19] *** Joins: mye (mye@moz-5578CD59.superkabel.de)
[20:23:31] <pepper_chico> although I don't recall whether it was CentOS5 or 6
[20:23:46] <bollu_> collections::ringbuf::RingBuf<&'a mut engine::event_pump::EventHandler<no-bounds>>` does not implement any method in scope named `push_front
[20:23:51] <bollu_> what's going on with it?
[20:23:57] <bollu_> I can clearly see a push_front
[20:24:00] <strcat> bollu_: you don't have the Deque trait in scope
[20:24:00] <pepper_chico> s/it was/I was/
[20:24:01] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Connection reset by peer)
[20:24:03] <eddyb> import the trait
[20:24:06] <o11c> bollu_: if push_front is from a trait, you have to import that also
[20:24:06] <strcat> traits need to be in scope for the methods to be available
[20:24:11] <o11c> bollu_: yes, this is stupid
[20:24:14] *** Joins: dotfelix (dotfelix@E9232E38.DF4B537A.CDA2360F.IP)
[20:24:15] <strcat> you're just used to libstd with the prelude
[20:24:40] <bollu_> o11c: you took the words right out of my mouth. strcat: good to know
[20:24:42] <o11c> but people insist "if you're using the methods, you know about the trait"
[20:24:47] *** Joins: IanCormac84 (User@8CFAF80B.64D641E5.67DFF8B4.IP)
[20:25:10] <strcat> if it didn't work that way then libraries would often conflict
[20:25:28] <strcat> library defines generic impl with a `foo` method -> foo method is reserved on all types whenever you use that lib
[20:26:01] <strcat> the method sugar is not without a cost
[20:26:18] *** Quits: pepper_chico (pepper_chi@moz-E15D42C8.dsl.telesp.net.br) (Quit: WeeChat 0.4.1)
[20:26:19] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[20:26:56] <strcat> anyway, the biggest issue is that it needs a server with a bunch of memory
[20:27:08] <o11c> strcat: I've explained this before: if the trait is impl'ed in the same mod as the struct itself, it can be done
[20:27:08] <strcat> ideally a nice CPU but it doesn't really matter a whole lot
[20:27:29] *** Joins: jaredly (Mibbit@moz-C5D211BA.byu.edu)
[20:27:48] <strcat> atm the root it reuses is 478MiB
[20:27:52] <strcat> I could make it smaller but meh
[20:28:02] <strcat> so 478MiB + lets say 256MiB per concurrent request, with a 5s timeout
[20:28:25] <strcat> can go a long way with 4GiB of memory then
[20:28:39] <strcat> although if it was on the front page of rust-lang.org, maybe you need more ;p
[20:28:51] <jaredly> It it possible to have &mut polymorphism in a function? e.g. the return type of fn(inp) is &mut Obj iff inp is &mut, otherwise the return is just &Obj.
[20:28:55] <strcat> rustc needs a ton of memory
[20:29:01] *** Quits: Rym (y@72FB9FA1.6FEC6D87.51C6DE68.IP) (Ping timeout)
[20:29:55] <o11c> strcat: on the front page, you'd want some load balancing between multiple backends
[20:29:57] *** Joins: Rym (y@7E7DE7A.DD7E53BE.8772DA20.IP)
[20:30:19] <strcat> o11c: meh, one server is probably fine, it doesn't do a lot of networking
[20:30:23] <strcat> and it won't actually do any I/O
[20:30:45] <strcat> it could use a CPU time limit instead of a time limit
[20:30:50] <strcat> would be more fair
[20:31:02] <strcat> and then it would just progressively slow down
[20:31:27] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[20:31:34] <dotfelix> new to rust and i've got a ton of questions
[20:31:43] <strcat> each instance just gets the same read-only root with a tmpfs mount for /tmp and /home (and cgroups include using that in the memory cap)
[20:31:59] <aatch> jaredly, no, it is not possible.
[20:32:12] *** Joins: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk)
[20:32:25] <strcat> o11c: and ideally rustc won't always be so darn resource hungry ;)
[20:33:07] *** Joins: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de)
[20:33:08] *** Joins: kris_ (kris@moz-147EE6DF.diku.dk)
[20:33:09] *** Quits: kris (kris@moz-147EE6DF.diku.dk) (Ping timeout)
[20:33:38] <aochagavia> What is the difference between &self and self?
[20:33:52] *** Joins: skade (skade@moz-1EC0F118.pools.arcor-ip.net)
[20:34:04] *** Quits: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk) (Ping timeout)
[20:34:15] <strcat> &T vs T
[20:34:24] <strcat> same as another parameter
[20:34:29] <aochagavia> I am looking at the implementation of option.rs
[20:34:52] <strcat> self is like it takes Option<T> and &self is like it takes &Option<T>
[20:34:57] <aochagavia> I don't understand that they use self instead of &self
[20:35:18] <aatch> aochagavia, many of the methods comsume the Option
[20:35:20] <strcat> just means they take it by-value
[20:35:24] <aatch> consume*
[20:35:26] <strcat> they don't necessarily consume it
[20:35:38] <kimundi> aochagavia: To be maximally composable
[20:35:47] <strcat> rusti: let x = Some(5); (x.map(|y| y * 2), x)
[20:35:52] -rusti- (Some(10), Some(5))
[20:36:02] <strcat> self is just normal rust by-value semantics
[20:36:07] <kimundi> aochagavia: YOu can turn a Option<T> into a Option<&T> or Option<&mut T> by using as_ref or .as_mut
[20:36:21] *** Joins: io2 (io2@moz-EE406A5.home.otenet.gr)
[20:36:25] <kimundi> aochagavia: But other way round doesn't work
[20:36:30] <aochagavia> I thought it was always better to pass by reference...
[20:36:30] <strcat> fn foo(&self) {} and fn foo(self) {} are just like
[20:36:35] <aatch> strcat, yeah, I just figure that explaining it with the same semantics Rust uses for generics is slightly less confusing.
[20:36:38] <strcat> aochagavia: no
[20:36:39] <aatch> aochagavia, why?
[20:36:42] <kimundi> aochagavia: If you don't want ownership
[20:36:44] <aochagavia> faster?
[20:36:48] <strcat> aochagavia: no
[20:36:50] <dotfelix> The type of `self` is the type on which the method is implemented like this
[20:36:52] <strcat> aochagavia: if it was always better then there wouldn't be a choice
[20:37:02] <kimundi> aochagavia: But Option is a contain, which generally _want_ to own thero content :)
[20:37:12] <strcat> it's primarily a semantic concern anyway not a performance one
[20:37:29] <aatch> If you don't need a copy of the type, then sure, reference away, needless copying is bad.
[20:37:37] <strcat> for large types
[20:37:38] <aatch> copy of the value, rather
[20:37:40] *** Quits: kris_ (kris@moz-147EE6DF.diku.dk) (Ping timeout)
[20:37:43] <dotfelix> the u use &self, you're passing the reference to the type
[20:37:52] <aochagavia> ok...
[20:38:24] <strcat> by-ref will be slower than by-value for anything that's 1-word, and will usually be slower for small things
[20:38:26] <aatch> if you're doing mutation on the value, &mut self is appropriate, not because it's a reference, but because otherwise you're not actually mutating anything.
[20:38:31] <strcat> unless the function has a whole lot of parameters
[20:39:21] <dotfelix> @strcat what about by-ref to a struct with bigger size?
[20:39:23] <aatch> Although, if your type is affine (moves instead of copies) then you might have less of a choice
[20:40:01] <strcat> either way, if you require your own instance of the value then you should take it by-value
[20:40:10] <strcat> it's much less efficient to do the copy internally than putting it in the signature
[20:40:20] <kimundi> strcat: shouldn't the difference between &T and T optimize out for small T ? Or is that only the case for inlining?
[20:40:25] <aochagavia> Would it have the same effect as taking a reference and cloning it?
[20:40:33] <aatch> kimundi, only if it inlines
[20:40:44] <aatch> And maybe if the function taking the reference is internal
[20:40:48] <strcat> kimundi: if it's an internal function, it can optimize &T to T if and only if every call site is statically known and you use --opt-level=3
[20:40:53] <strcat> otherwise it has to inline
[20:41:00] <kimundi> okay
[20:41:29] <strcat> if you're not going to really delve into the details, then it's not worth worrying about
[20:41:34] <strcat> only need a reference? use a reference
[20:41:39] <strcat> want to mutate it? use a mutable reference
[20:41:39] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[20:41:53] <strcat> do you need your *own instance* of the value? then take it by-value, never do a copy internally from a parameter
[20:42:19] <strcat> but you can ignore the first rule if it's known to be small (but it's really not going to make a difference 99% of the time)
[20:42:38] <strcat> and Option has as_ref so there's no need for methods to not use by-value
[20:43:15] <darnuria> strcat: Thanks for the explanation. That's not obvious, to know what need to be pass by ref and what need to be passed by value :)
[20:43:38] <dotfelix> aochagavia: when you clone a ref you get a new ref
[20:44:09] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Client exited)
[20:44:21] *** Joins: pepper_chico (pepper_chi@moz-E15D42C8.dsl.telesp.net.br)
[20:44:24] <aochagavia> I ask because I am looking at the code in option.rs and you see a lot of different ways of passing the option
[20:44:40] <bollu_> thanks guys :)
[20:44:42] <bollu_> got it working!
[20:44:56] <aatch> aochagavia, there's not a huge difference between taking it by value and taking a reference and cloning it, however it's better to take a value if you need it
[20:44:59] *** Quits: hoverbear (hoverbear@moz-DAE63E58.wireless.uvic.ca) (Quit: Taking a nap.)
[20:45:01] <bollu_> code is actually way cleaner than C++.. I'm really impressed with rust.
[20:45:09] <dotfelix> strcat: why is the binary size of a simple hello world 2.6Mg ?
[20:45:11] <aatch> Because it bumps the decision to copy up to the caller.
[20:45:23] <aatch> dotfelix, static linking.
[20:45:34] <darnuria> dotfelix: Because you have runtime and static linking.
[20:46:06] <dotfelix> ok
[20:46:17] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Client exited)
[20:46:38] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[20:46:54] <strcat> no
[20:46:57] <strcat> the cause isn't static linking.
[20:46:59] *** Quits: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP) (Ping timeout)
[20:47:10] <strcat> it still uses dynamic linking by default
[20:47:20] <strcat> it only statically links against rust libraries by default - not system ones
[20:47:35] <dotfelix> strcat: then why that size?
[20:47:40] <strcat> it's still perfectly valid to question why rust has a 1.5MiB overhead over C
[20:47:41] <pepper_chico> guys, I've rebuilt rust just because of #12610 and #12491 but alas this doesn't work, is it desired? http://bl.ocks.org/anonymous/raw/9536609/
[20:47:55] <strcat> (and that's just the initial overhead, it gets worse if you do I/O, etc.)
[20:48:17] <dotfelix> hmm, we need to work on that
[20:48:19] <strcat> dotfelix: because the standard library isn't a library, it's a framework - it calls *your* code
[20:48:26] <strcat> fn main() {} isn't an entry point
[20:48:33] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Ping timeout)
[20:48:34] *** Quits: jackneill (jackneill@moz-5AD26CED.pool.digikabel.hu) (Input/output error)
[20:48:45] <strcat> unlike a normal library, libstd has life-before-main and life-after-main (despite rust deciding it's not useful and other libs can't use it)
[20:49:06] *** Joins: hunt3r (hunt3r@moz-E96F30DC.its.manchester.ac.uk)
[20:49:16] *** Quits: skade (skade@moz-1EC0F118.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:49:20] *** Quits: nkoep (nik@moz-C300A1D9.pool.mediaways.net) (Client exited)
[20:49:50] <strcat> and it only needs that due to M:N threading support, whether or not you use it
[20:50:00] <darnuria> strcat: And if you compile with no_std?
[20:50:04] <strcat> darnuria: no overhead over C
[20:50:05] <pepper_chico> anyone knows about those traits?
[20:50:15] <dotfelix> strcat: not sure I understand what u mean by "framework"
[20:50:16] *** Quits: Rym (y@7E7DE7A.DD7E53BE.8772DA20.IP) (Ping timeout)
[20:50:18] <strcat> darnuria: and no stdlib, you don't even have ptr arithmetic
[20:50:23] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[20:50:30] <strcat> dotfelix: it calls your code (main)
[20:50:33] <aatch> strcat, you may be right, but statically linking against libstd is still the reason it's 2.8M instead of 10K
[20:50:37] <aochagavia> sorry to ask this but... what does r+ mean in a pull request?
[20:50:43] <darnuria> Interresting :)
[20:50:44] <strcat> aatch: -Z lto would optimize it out then
[20:50:48] <darnuria> aochagavia: Review +
[20:50:49] <strcat> aatch: it doesn't
[20:50:54] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[20:50:54] *** Quits: hunt3r (hunt3r@moz-E96F30DC.its.manchester.ac.uk) (Ping timeout)
[20:51:02] <aochagavia> does that mean that the request is likely to be merged?
[20:51:03] <darnuria> aochagavia: Review is ok to be landed in other word
[20:51:05] <aochagavia> *pulled
[20:51:15] <mcpherrin> aochagavia: not likely, that triggers the merge
[20:51:26] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[20:51:27] <aochagavia> that is nice, my pull request is accepted :)
[20:51:32] <strcat> aatch: the linker won't include unused objects, and fn main() {} shouldn't use anything from the stdlib
[20:51:33] <kimundi> well, it triggers a testrun that if successful triggers the merge
[20:51:33] <darnuria> aochagavia: That's for bors
[20:51:37] <aatch> strcat, I literally just compiled with -C prefer-dynamic and got a 10K binary.
[20:51:45] <strcat> aatch: which is not the point
[20:52:13] <strcat> aatch: it would be 5K with static linking or LTO if libstd didn't support M:N threading
[20:52:25] <pepper_chico> well, I think I'll have to way eddyb to get online
[20:52:26] <strcat> it would include the stdlib with static linking once you *used it*
[20:52:29] <strcat> but with LTO it wouldn't
[20:52:32] <strcat> it would only include what you used
[20:52:34] <pepper_chico> s/way/wait/
[20:52:35] <strcat> and that's not the case today
[20:52:55] <strcat> there's no excuse for fn main() {} being larger than C when it links against the same libs C is linking against dynamically
[20:53:36] <aatch> strcat, and the case *today* is that statically linking in libstd is the reason why hello world is so large.
[20:53:39] <strcat> caused entirely by life-before-main/life-after-main
[20:53:42] <strcat> aatch: no, it's not
[20:53:45] <strcat> aatch: -Z lto
[20:53:46] <strcat> still that large
[20:53:47] <aatch> I really don't care whether it *should* be or not
[20:54:11] <o11c> why does rust even have life-before-main ? It doesn't allows non-constant initializers for globals, right?
[20:54:28] <sfackler> runtime initialization iirc
[20:54:30] <strcat> o11c: because libstd has the privilege of relying on life before/after main for everything
[20:54:39] <strcat> you just can't use it in *your* library
[20:54:50] <strcat> because rust views it as bad, but yet uses it itself
[20:55:22] *** Quits: jaredly (Mibbit@moz-C5D211BA.byu.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[20:55:37] <aatch> strcat, then explain why dynamically linking it instead removes 99% of the file size?
[20:55:39] <strcat> whole lot of cognitive dissonance required to say life-before-main is evil and we are going to forbid it and yet make it a fundamental part of libstd
[20:55:52] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[20:56:00] *** Joins: blr (kit@moz-D7F781C2.otago.ac.nz)
[20:56:04] <o11c> cognitive dissonance is what we're good at
[20:56:14] <strcat> aatch: because there's a whole bunch of bloat for life-before-main elsewhere
[20:56:36] <strcat> it's still a whole bunch of code running
[20:56:51] *** Quits: pepper_chico (pepper_chi@moz-E15D42C8.dsl.telesp.net.br) (Quit: WeeChat 0.4.1)
[20:56:58] <strcat> and C doesn't run it
[20:57:10] <aatch> strcat, and? That doesn't change the reality that the real, actual size of the goddamn file that rustc/cc writes is bigger because of static linking.
[20:57:10] <blr> hi there, is C++ interop planned for the future? would like to have a go at writing an audio plugin in rust using wdl-ol 
[20:57:16] *** Joins: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP)
[20:57:21] <strcat> aatch: no, it's bigger because std is a framework
[20:57:30] <strcat> aatch: #[no_std] + static linking -> binary is not large
[20:57:41] *** Joins: mindcat_ (mindcat@45814CCF.B1E12A5D.57E3C596.IP)
[20:57:43] <strcat> proper standard library + LTO -> binary only includes what you use
[20:58:00] <dotfelix> o11c: i agree with u why rust have life-before-main 
[20:58:00] <strcat> if it's because of static linking, you'll have to explain to me why rust-core binaries are no bigger than C ones
[20:58:06] <aatch> I don't give a shit whether or not it should or should not, or whether or not the bloat is just elsewhere.
[20:58:08] *** Quits: aochagavia (Mibbit@moz-C82E8769.static.ziggozakelijk.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[20:58:08] <strcat> despite also using static linking
[20:58:19] <strcat> aatch: so why is rust-core much smaller despite also using static linking?
[20:58:27] <strcat> static linking isn't the cause
[20:58:31] <aatch> strcat, beacuse rust-core is smaller?
[20:58:34] <strcat> aatch: no
[20:58:49] <strcat> aatch: because linkers don't include code you don't use
[20:58:50] <mindcat_> does rust can do Boost Bind did things? I mean dynamic function even arguments
[20:58:55] <strcat> aatch: if you don't call into rust-core, it doesn't include rust-core
[20:58:59] <dotfelix> aatch: rust-core can't be any smaller that hello world
[20:59:05] <strcat> aatch: if you use -Z lto, then it's fine-grained
[20:59:15] <strcat> aatch: it only includes functions you call
[20:59:22] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Client exited)
[20:59:24] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[20:59:33] <strcat> the linker has object-level granularity, LTO makes it function-level
[20:59:44] *** Joins: leowoe (Leo@moz-8A007533.dip0.t-ipconnect.de)
[20:59:50] *** Quits: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP) (Ping timeout)
[20:59:56] <strcat> an empty main function doesn't need any objects (so it doesn't matter if rust outputs a single one)
[20:59:57] * mindcat_ thinks the idea is wrong
[21:00:05] <aatch> this isn't an empty main though
[21:00:17] <mcpherrin> blr: C++ compat is really a hairy ball of trouble, and doesn't map cleanly onto rust.  
[21:00:23] <strcat> well if it actually calls functions then you can blame static linking when you don't pass -Z lto
[21:00:25] <dotfelix> strcat: -Z lto give me 'error: aborting due to previous error'
[21:00:29] <strcat> but when you do pass -Z lto it's a libstd bug
[21:00:31] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Client exited)
[21:00:36] <mcpherrin> blr: For the next while at least, C is what you're "stuck with" for interop
[21:00:53] <strcat> it's still a dynamically linked binary though
[21:00:55] <blr> mcpherrin: okay, I might try to investigate some alternative c libraries for audio in that case
[21:01:01] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[21:01:16] <aatch> strcat, which is why I was answering the original question, which is "why is simple hello world 2.8 megabytes?"
[21:01:23] <mcpherrin> blr: If you really want to use it, write a C wrapper for the C++ lib, and then a rust wrapper for the C one :(
[21:01:32] <aatch> not, "why is empty main 2.8 megabytes?"
[21:01:37] <blr> mcpherrin: sounds like an "interesting" adventure :)
[21:01:45] <strcat> aatch: a simple hello world is 6K with static linking using musl
[21:01:52] <strcat> so I still don't think you can blame static linking
[21:01:58] <strcat> either rustc is the problem or libstd is the problem
[21:02:03] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.50.1)
[21:02:06] <strcat> either way it's a massive regression over C
[21:02:14] <aatch> strcat, sure, because the static library is made up of lots of smaller object files.
[21:02:20] <aatch> libstd is *one* object file.
[21:02:27] <strcat> aatch: -Z lto makes that irrelevant
[21:02:34] <aatch> if lto was working (which it doesn't seem to be) I'd test it.
[21:02:37] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Ping timeout)
[21:02:38] *** Joins: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP)
[21:02:39] <strcat> it works
[21:02:47] *** Quits: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net) (Quit: carllerche)
[21:02:48] <aatch> strcat, well not for me right this moment.
[21:02:53] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Ping timeout)
[21:03:00] <aatch> I probably just need to delete files.
[21:03:01] <dotfelix> strcat: no -Z lto is not working
[21:03:02] <strcat> it doesn't require the linker to support LTO
[21:03:06] <strcat> works for me
[21:03:19] <dotfelix> why commit?
[21:03:27] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[21:03:32] <dotfelix> strcat: which commit?
[21:03:38] *** Havvy|zzz is now known as Havvy
[21:03:39] <strcat> rusti: version
[21:03:40] -rusti- "rustc 0.10-pre (4d64441 2014-03-12 15:07:06 -0700)"
[21:04:09] *** Joins: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP)
[21:04:09] <strcat> aatch: static linking -> 1.67MiB, LTO -> 0.788MiB
[21:04:41] <dotfelix> ok
[21:04:44] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[21:04:51] <strcat> C: static -> 6K, LTO -> ??? (arch doesn't generate LLVM bytecode .o to put in .a files obviously)
[21:04:59] *** Joins: kris (kris@D954AD01.1D0A8692.683E4874.IP)
[21:05:00] <huon> dotfelix: it gets tested on the buildbots on every merge so it's working somewhat on all platforms
[21:05:09] *** Quits: Anupkumar (uid16774@moz-A42E5B7B.irccloud.com) (Quit: Connection closed for inactivity)
[21:05:12] <strcat> although it's a somewhat bad comparison since rust is still dynamically linked
[21:05:16] <huon> (assuming that those tests run on all platforms... maybe they don't run on windows?)
[21:05:23] <dotfelix> huon: not my
[21:05:36] <strcat> if you linked glibc to either, it'd be awful either way
[21:05:39] <huon> dotfelix: what platform?
[21:05:51] <strcat> since glibc isn't designed for static linking (and you'd have a hard time using LTO with it)
[21:05:51] <huon> (I've had problems with duplicated `rust_stack_exhausted` symbols, iirc)
[21:06:04] <huon> I believe they're fixed with a make clean or something... can't remember
[21:06:18] <aatch> huon, similar, except for rust_swap_registers
[21:06:20] *** Joins: Rym (y@7E7DE7A.DD7E53BE.8772DA20.IP)
[21:06:35] <strcat> anyway I don't see why it's okay that it's so large
[21:06:38] <dotfelix> huon: Darwin 12.4.0 Darwin Kernel Version 12.4.0: Wed May  1 17:57:12 PDT 2013; *patched-2050.24.15~1/RELEASE_X86_64 x86_64
[21:06:45] *** Joins: mbx (mbebenita@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[21:06:52] <dotfelix> OS X 10.8.4
[21:06:54] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Ping timeout)
[21:06:56] * strcat shrugs
[21:06:59] <huon> aatch: oh, maybe that was the one I was thinking of
[21:07:19] <strcat> although 788K is a lot smaller than it used to be
[21:07:49] <huon> strcat: it's not regarded as ok... (at least, there are several bugs about it)
[21:07:50] *** Quits: wilfred (sid159@moz-5F4AA75A.irccloud.com) (Quit: Connection closed for inactivity)
[21:07:51] <sp3d> I thought there was talk of splitting up the vtable for the rt into individual function pointers that could be devirtualized
[21:08:03] *** Quits: kris (kris@D954AD01.1D0A8692.683E4874.IP) (Ping timeout)
[21:08:06] <sp3d> or rather
[21:08:12] <sp3d> that could be dropped when never used
[21:08:18] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:08:26] <aatch> strcat, the 788K, I can accept as being not because of static linking.
[21:09:32] <dotfelix> with todays memory cost is okay to have 2.6Mb for hello world, but when you're build a large system this will impact it size, and that not good
[21:09:47] <huon> sp3d: yeah, https://github.com/mozilla/rust/issues/11560
[21:09:49] *** Joins: hoverbear (hoverbear@moz-DAE63E58.wireless.uvic.ca)
[21:09:53] <huon> dotfelix: not really?
[21:09:54] <aatch> dotfelix, it's a constant overhead though
[21:10:01] <strcat> dotfelix: it's 788K for hello world here without linking against rust libs
[21:10:09] <strcat> aatch: the constant overhead is higher though
[21:10:18] <strcat> aatch: it climbs up to many MiB when you're using more
[21:10:21] <strcat> (of overhead)
[21:10:30] *** pmoore|afk is now known as pmoore|away
[21:10:32] <mindcat_> does runtime eats some memorys?
[21:10:34] <huon> but a 100 MB application won't feel the overhead like a 1kb one does
[21:10:43] <dotfelix> strcat: which option did you pass to rustc?
[21:10:51] <strcat> a 100MiB application would likely have something like 7MiB of overhead
[21:10:58] <strcat> dotfelix: -O -Z lto
[21:11:02] <strcat> and then 'strip foo'
[21:11:13] <strcat> or you could pass --link-args='-s'
[21:11:28] <huon> strcat: that's "trivial" compared to 10kb -> 2.6MB (but still not good, no debate there)
[21:11:40] <strcat> -C link-args='-s'
[21:12:03] <strcat> huon: well, ignoring the runtime overhead it is ;p
[21:12:13] <strcat> huon: how much of this is in common paths and bloating cache? I'd say a lot
[21:12:31] <strcat> anyway yeah -C link-args='-s' works
[21:12:44] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[21:12:45] <mindcat_> -rwxr-xr-x  1 mindcat mindcat 798648 3月  14 05:12 a
[21:12:46] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[21:12:59] <strcat> -Wl,--as-needed helps a little because rust links against something it doesn't have to
[21:13:06] <mindcat_> rustc -O -Z lto a.rs; sstrip a;
[21:13:30] <mindcat_> it just a hello world rust program
[21:13:47] <mcpherrin> rusti: 'a' < 'c'
[21:13:48] -rusti- true
[21:14:05] <strcat> rustc foo.rs -Z lto -O -C link-args='-s -Wl,--as-needed,--gc-sections'
[21:14:13] <strcat> that gets rid of the unused crate map stuff
[21:14:19] <strcat> 762624 bytes
[21:14:30] <strcat> (well, at least *some* of the unused crate map stuff)
[21:14:53] <mindcat_> strcat:  -rwxr-xr-x  1 mindcat mindcat 772392 3月  14 05:14 a
[21:15:10] <aatch> strcat, heh, I only get like 20KB savings with those.
[21:15:25] <strcat> aatch: anyway it's really several problems
[21:15:25] <dotfelix> hmm
[21:15:30] <strcat> I expect it would be 400K if we didn't have unwinding
[21:15:42] <strcat> just because without unwinding, all rust would be significantly smaller
[21:16:00] <dotfelix> so rust have +10,000 commit now, will it really get to release?
[21:16:03] <strcat> but that's never going to bloat the cache afaik
[21:16:07] <strcat> I think it's entirely separate
[21:16:10] <strcat> so it's not important
[21:16:14] *** Joins: kris (kris@moz-6D20263F.fullrate.dk)
[21:16:32] <strcat> (the only bad perf thing it does is make functions/blocks impure)
[21:17:03] *** Quits: IanCormac84 (User@8CFAF80B.64D641E5.67DFF8B4.IP) (Ping timeout)
[21:17:20] <strcat> I think adding many branch prediction failures + extra code to common paths is a big issue though
[21:17:35] <strcat> doesn't matter if they need to run quickly or not, they're common paths
[21:17:43] <strcat> the CPU will push stuff out of cache for them
[21:18:19] *** Joins: IanCormac84 (User@FD1457A3.64D641E5.67DFF8B4.IP)
[21:18:47] *** Joins: willingc (willingc@moz-48549B49.san.res.rr.com)
[21:18:49] *** Joins: lkuper (lkuper@moz-AD4C50F5.dhcp-bl.indiana.edu)
[21:19:15] *** Quits: mgottschlag (quassel@moz-D9018E99.cust.bluewin.ch) (Ping timeout)
[21:19:18] <strcat> (note that LLVM itself uses -fno-rtti -fno-exceptions, and still gets to use the stdlib)
[21:20:21] <strcat> small binaries are pretty hopeless when every indexing operation and division has a throwing call
[21:20:58] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[21:21:01] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[21:21:03] <dotfelix> strcat: will rust ever get to release?
[21:21:08] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:21:10] *** Quits: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP) (Ping timeout)
[21:21:13] <cmr> dotfelix: of course it will.
[21:21:14] <o11c> strcat: most distros turn off LLVM's choice of -f flags
[21:21:18] <cmr> dotfelix: it's a product that will ship.
[21:21:30] <strcat> o11c: LLVM adds them anyway, they aren't just CXXFLAGS
[21:21:45] <strcat> o11c: you need pass REQUIRES_RTTI or something to enable it
[21:21:51] <dotfelix> cmr: it have +10,000 commits
[21:21:54] <cmr> dotfelix: so?
[21:22:06] <strcat> o11c: I doubt distros do because it's useless, as LLVM doesn't use exceptions or RTTI
[21:22:20] <cmr> dotfelix: it'a a 4 year old project under active, rapid development.
[21:22:21] <strcat> in fact not passing -fno-exceptions might be memory unsafe
[21:22:32] <o11c> strcat: they do, because people *linking* to LLVM need RTTI for LLVM's classes
[21:22:35] <cmr> dotfelix: the goal for 1.0 is this year, Q3 or Q4
[21:22:43] <dotfelix> cmr: so why not a stable release for developers to implement on it
[21:22:53] <strcat> o11c: really? what project does?
[21:22:56] <cmr> dotfelix: because it hasn't been ready :)
[21:23:02] <dotfelix> cmr: I need to sell it
[21:23:03] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[21:23:14] *** Joins: paulolieuthier (quassel@5E7007FF.9ECE9F4F.368B8D1A.IP)
[21:23:22] <cmr> dotfelix: it's considered to still be in alpha.
[21:23:24] <strcat> C++'s RTTI is close to useless ;\
[21:23:48] *** Joins: sigma1 (sigma@moz-55097A0B.range86-163.btcentralplus.com)
[21:24:05] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[21:24:05] *** ChanServ sets mode: +ao brson brson
[21:24:32] *** Quits: marianoguerra (marianogue@moz-25E71B.dip0.t-ipconnect.de) (Ping timeout)
[21:24:48] <dotfelix> cmr: we just need to know of a concert time/date it will be stable, so we can say okay let's use it for this project cause it'll be stable from this time forward
[21:25:02] <strcat> o11c: afaik they don't have a similar flag to enable exceptions though
[21:25:17] <o11c> strcat: it might have been something to do with OpenGL/mesa? I think I noticed it as a Debian bug ...
[21:25:20] <strcat> they don't throw any exceptions so I don't see a difference in enabling it
[21:25:25] <cmr> dotfelix: 1.0 is planned for Q3/Q4
[21:25:27] <strcat> beyond code size
[21:25:39] <strcat> the calling code can still use exceptions
[21:26:02] <strcat> o11c: does mesa actually use C++ for llvmpipe, etc.? 
[21:26:08] <cmr> dotfelix: https://docs.google.com/a/octayn.net/spreadsheet/ccc?key=0AlWBWplsaTZvdGdSdEVzZW1BeDA5dm0zM2FFeW0ySEE&usp=drive_web#gid=0
[21:26:20] *** Quits: sigma1 (sigma@moz-55097A0B.range86-163.btcentralplus.com) (Ping timeout)
[21:26:27] <strcat> just seems really odd for someone to actually need RTTI ;p
[21:26:36] <o11c> strcat: that's what everybody said
[21:26:49] *** Quits: hoverbear (hoverbear@moz-DAE63E58.wireless.uvic.ca) (Quit: Taking a nap.)
[21:26:57] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[21:27:13] <strcat> better remove std::reflect before someone claims they really, really need it ;p
[21:27:16] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[21:27:19] <comex> i like it :(
[21:27:20] <o11c> ah, debian changelog is the place
[21:27:33] *** Quits: dotfelix (dotfelix@E9232E38.DF4B537A.CDA2360F.IP) (Ping timeout)
[21:27:40] <o11c> https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=697754
[21:27:47] <o11c> Open*C*L
[21:27:51] <cmr> comex: you like std::reflect ?
[21:27:58] *** Joins: dotfelix (dotfelix@E9232E38.DF4B537A.CDA2360F.IP)
[21:28:03] <strcat> o11c: hm, which project uses LLVM for OpenCL?
[21:28:13] <strcat> ah POCL
[21:28:40] <dotfelix> what just happened?
[21:28:42] <dotfelix> Connection reset by peer
[21:28:48] <strcat> I really think they should have removed whatever weird thing in POCL requires it
[21:28:50] <cmr> dotfelix: you pinged out
[21:28:58] <comex> well, i like the TyVisitor stuff, but i wish it would all be done statically
[21:29:10] <strcat> dotfelix: irc servers send a heartbeat ping, your client didn't respond in time
[21:29:32] *** Joins: mpiechotka (mpiechotka@moz-CF1931C2.dynamic.mnet-online.de)
[21:29:33] <ChrisMorgan> dotfelix: jittery Internet connections can cause that occasionally.
[21:29:51] <strcat> ChrisMorgan: it'll get resend over and over if it's dropped though, you have a long time to respond
[21:29:53] <dotfelix> ok
[21:29:53] <dotfelix> I thought uncle sam disconnected me
[21:29:54] <comex> strcat: I think Apple uses LLVM for OpenCL too
[21:30:06] <strcat> comex: but they don't require RTTI ;p
[21:30:27] * strcat switches rusti to Show
[21:30:33] * ChrisMorgan didn't think the USA had the peerage
[21:30:46] <comex> rusti?
[21:30:50] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[21:31:03] <cmr> rusti: 42
[21:31:04] -rusti- 42
[21:31:06] <cmr> comex: that
[21:31:08] <comex> oh
[21:31:10] <ChrisMorgan> rusti: version
[21:31:10] -rusti- "rustc 0.10-pre (4d64441 2014-03-12 15:07:06 -0700)"
[21:31:11] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:31:18] <strcat> rusti: 42
[21:31:18] -rusti- 42
[21:31:29] <strcat> hm
[21:31:34] <strcat> that's interesting
[21:31:37] <strcat> rusti: 2  + 
[21:31:37] -rusti- <anon>:12:5: 12:6 error: unexpected token: `}`
[21:31:38] -rusti- <anon>:12     };
[21:31:38] -rusti-               ^
[21:31:38] -rusti- application terminated with error code 101
[21:31:50] * strcat wonders if that drops mem usage
[21:31:55] <ChrisMorgan> rusti: version
[21:31:55] -rusti- rustc 0.10-pre (4d64441 2014-03-12 15:07:06 -0700)
[21:32:00] <ChrisMorgan> Show ☺
[21:32:13] *** Joins: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk)
[21:32:16] *** Quits: io2 (io2@moz-EE406A5.home.otenet.gr) (Input/output error)
[21:32:24] <strcat> rusti: #[deriving(Show)] struct Foo(int, int); Foo(2, 3)
[21:32:25] -rusti- Foo(2, 3)
[21:32:34] <strcat> die repr/reflect, die
[21:32:47] <strcat> I wonder how hard it would be to just rip it out *right now*
[21:32:54] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[21:33:02] <strcat> rusti: println!("{:?}", vec!(1, 2, 3))
[21:33:02] -rusti- std::vec_ng::Vec<int>{len: 3u, cap: 4u, ptr: (0x7effbc000dc0 as *mut ())}
[21:33:02] -rusti- ()
[21:33:15] * strcat can't see it as being very useful now
[21:33:22] <dotfelix> static and extern have cause so much confusing in C why does rust have it?
[21:33:34] <strcat> they don't mean what they do in C
[21:33:42] <strcat> static has a half dozen meanings in C++
[21:33:44] <comex> strcat: i want to be able to do things like deriving(Show) but custom, such as binary serialization
[21:33:51] <strcat> comex: you can
[21:33:56] <cmr> comex: isn't that Encodable/Decodable?
[21:33:57] <strcat> comex: you can write loadable syntax extensions
[21:34:03] <cmr> that too
[21:34:05] *** Quits: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk) (Ping timeout)
[21:34:05] <comex> those only work on raw ast, though, right?
[21:34:12] <strcat> comex: deriving works on the AST too
[21:34:47] <comex> does it?
[21:34:49] <comex> interesting
[21:34:55] <strcat> yes it's entirely in libsyntax
[21:35:18] <strcat> comex: a loadable syntax ext can do exactly the same stuff, but you'd currently have to call it #[deriving_foo]
[21:35:30] <strcat> because #[deriving(...)] has to go through the deriving syntax ext
[21:35:35] *** Joins: sunfish (chatzilla@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[21:35:41] *** Parts: blr (kit@moz-D7F781C2.otago.ac.nz) ()
[21:36:06] *** Joins: Ms2ger (Ms2ger@moz-5180E188.adsl-dyn.isp.belgacom.be)
[21:36:22] <comex> it seems to me that it would be a bit messy depending on what you want to do
[21:36:38] <comex> but maybe it doens't matter that much
[21:36:39] *** Joins: hunt3r (hunt3r@6F6DDFAC.AF15CD76.B8212F05.IP)
[21:36:43] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[21:36:55] *** Quits: dschatzberg (dschatzber@moz-E2680405.bu.edu) (Input/output error)
[21:37:02] <dotfelix> strcat: since am new to rust I need to know why, so why static and extern?
[21:37:35] <cmr> dotfelix: extern because we need FFI, static because globals and constant data are needed.
[21:38:07] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (No route to host)
[21:38:10] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[21:39:12] <comex> bluh.  i know i'm in complaining mode, but i don't understand why incremental compilation isn't a higher priority for more people.  it makes rust borderline unuusable for me
[21:39:20] <darnuria> Mhh what is the best way of concataining chains?
[21:39:33] *** Quits: Rym (y@7E7DE7A.DD7E53BE.8772DA20.IP) (Ping timeout)
[21:39:49] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Ping timeout)
[21:40:01] <strcat> comex: you can use incremental compilation
[21:40:04] <darnuria> Str1 + str2? or format!("{}{}". str1, str2); ?
[21:40:06] <strcat> comex: crates are rust's compilation unit
[21:40:08] <dotfelix> cmr: so extern for extern like C's?
[21:40:34] <cmr> dotfelix: http://static.rust-lang.org/doc/master/guide-ffi.html
[21:40:39] <strcat> comex: switch mod foo; to extern crate foo; and you have incremental/parallel compilation
[21:40:58] <dotfelix> cmr: reading...
[21:41:09] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[21:41:19] <strcat> rust doesn't have incremental compilation with cyclic dependencies, but it certainly doesn't force you to use 1 compilation unit per library/executable
[21:41:41] <strcat> before it had static linking (and LTO), it essentially did
[21:41:42] <mindcat_> rusti: struct Foo {u8, u8}; Foo(1,1)
[21:41:42] -rusti- <anon>:11:23: 11:24 error: expected `:` but found `,`
[21:41:42] -rusti- <anon>:11         struct Foo {u8, u8}; Foo(1,1)
[21:41:42] -rusti-                                 ^
[21:41:42] -rusti- application terminated with error code 101
[21:41:44] <strcat> no longer an issue
[21:41:48] *** Quits: hunt3r (hunt3r@6F6DDFAC.AF15CD76.B8212F05.IP) (Quit: Leaving...)
[21:42:43] <comex> hmm, i guess i could try
[21:42:47] *** Quits: IanCormac84 (User@FD1457A3.64D641E5.67DFF8B4.IP) (Ping timeout)
[21:43:05] *** Joins: sigma1 (sigma@C91C7F36.70518F41.9D18269F.IP)
[21:43:28] <mindcat_> I didn't see epoll in rust http://static.rust-lang.org/doc/master/std/index.html?search=epoll
[21:43:38] <strcat> it won't have epoll, it's not a portable API
[21:43:40] <cmr> mindcat_: it doesn't have it.
[21:44:19] <mindcat_> so where is epoll?
[21:44:29] <cmr> nowhere.
[21:44:31] <strcat> mindcat_: it doesn't have an API for epoll, it's not portable
[21:44:37] <cmr> you'll need to bind it yourself if you want to use it.
[21:44:41] <mindcat_> :S
[21:44:47] *** Joins: marianoguerra (marianogue@moz-25E71B.dip0.t-ipconnect.de)
[21:44:54] <strcat> someone could build a portable async I/O API but it won't look like epoll anyway
[21:44:55] *** Joins: IanCormac84 (User@EE84D974.64D641E5.67DFF8B4.IP)
[21:45:12] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Quit: Ex-Chat)
[21:45:20] <aatch> strcat, isn't libevent sorta like that?
[21:45:20] <strcat> because async I/O on windows isn't done with non-blocking sockets and a ready-based edge/level-triggered epoll equivalent
[21:45:44] *** Joins: io2 (io2@moz-EE406A5.home.otenet.gr)
[21:45:45] <strcat> aatch: libevent/libuv abstract over epoll to the point where it's basically completion-based instead of ready-based
[21:45:51] *** Joins: hoverbear (hoverbear@moz-DAE63E58.wireless.uvic.ca)
[21:45:52] <strcat> aatch: so you can map them to IOCP too
[21:45:56] *** Quits: Rusky1 (russell@moz-173BA32C.slkc.qwest.net) (Ping timeout)
[21:46:04] <strcat> afaik at least ;p
[21:46:10] <strcat> windows does have a proper equivalent to select
[21:46:17] <strcat> (as in, not select itself)
[21:46:20] *** Joins: glandium (glandium@moz-A09032B1.kimsufi.com)
[21:46:23] <o11c> what exactly is "completion-based" ?
[21:46:25] <strcat> but I don't think you can scale well that way
[21:46:43] <aatch> strcat, oh, the async IO stuff in EFL is probably close
[21:46:54] <strcat> o11c: you read N bytes, it passes the full buffer to your callback, not a chunk of it + size
[21:47:04] <aatch> I haven't looked into too much though.
[21:47:11] <strcat> o11c: it has overhead on linux over a raw epoll program
[21:47:20] <strcat> memory overhead mostly
[21:47:22] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[21:47:34] <strcat> async style I/O on linux won't be as lightweight as non-blocking sockets
[21:47:55] <strcat> it's arguably not higher-level though
[21:48:02] <strcat> because you have to deal with callbacks ;p
[21:48:03] *** Joins: Sorella_ (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[21:48:11] <strcat> I'd rather use epoll directly than libuv
[21:48:19] <strcat> faster, less memory usage, and imo - easier
[21:48:32] <strcat> but if you want kqueue and IOCP support too...
[21:48:36] <strcat> good luck doing it all yourself ;)
[21:48:40] *** Quits: flan3002 (flan3002@ADE308B1.8B38C502.16E13E53.IP) (Ping timeout)
[21:48:43] <strcat> a good example is nginx
[21:49:01] <strcat> is uses sync I/O for file I/O (not POSIX AIO, or a thread pool) and non-blocking sockets
[21:49:05] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Input/output error)
[21:49:18] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[21:49:18] *** Quits: leowoe (Leo@moz-8A007533.dip0.t-ipconnect.de) (Quit: Leaving.)
[21:49:32] <o11c> if I had any users actually on BSD, I'd try kqueue, but for now I'm just targeting epoll
[21:49:52] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:50:13] <strcat> o11c: they're quite similar anyway
[21:50:26] <strcat> pretty much anything you do with epoll would map 1:1 to kqueue
[21:50:31] <strcat> but IOCP? nope. not at all
[21:50:32] <Matthias247> at least more similar to each other than to IOCP ;)
[21:51:03] *** Quits: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[21:51:16] <strcat> abstracting over both forces you to do everything like IOCP, since epoll can build that API efficiently
[21:51:53] <o11c> strcat: I've tried to figure out whether you can chain kqueue instances ... do you know?
[21:51:54] <strcat> and when you're using it that way, IOCP and epoll (and linux aio, if you're *really* using it) basically have performance/resource parity...
[21:51:55] <Matthias247> java (NIO) does it the other way around ;)
[21:52:04] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[21:52:04] <o11c> since kqueue also handles inotify IIUC
[21:52:07] <strcat> but epoll without that abstraction is lighter
[21:52:15] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[21:52:24] *** Joins: skade (skade@moz-1EC0F118.pools.arcor-ip.net)
[21:52:39] <strcat> o11c: epoll does work on any fd, so you can do pretty much anything with it using eventfd
[21:52:55] *** Joins: Rusky (russell@moz-173BA32C.slkc.qwest.net)
[21:53:08] *** Joins: spott_ (spott@moz-5158CBDE.colorado.edu)
[21:53:12] <strcat> WaitForMultipleObjects on multiple cond vars -> multiple eventfds and epoll
[21:53:14] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (No route to host)
[21:53:33] <strcat> (futex is more efficient though)
[21:53:52] <strcat> it would be nice if there was an API able to wait on memory *and* fds
[21:53:56] *** Joins: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk)
[21:54:16] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Client exited)
[21:54:33] <o11c> strcat: I'm aware of epoll, it's kqueue I'm unsure of
[21:54:59] <Matthias247> what do you mean with chain?
[21:55:02] <o11c> timerfd is kind of exciting, but I don't need it for what I'm doing
[21:55:10] <o11c> signalfd I'll probably use soon though
[21:55:32] <o11c> Matthias247: an epoll fd will show as "readable" if running epoll_wait would yeidl events
[21:55:33] <strcat> o11c: playpen (rusti bot here) uses timerfd for the timeout
[21:55:41] *** Quits: paulolieuthier (quassel@5E7007FF.9ECE9F4F.368B8D1A.IP) (Client exited)
[21:55:45] <o11c> so you can add an epoll fd to an epoll fd
[21:55:48] <strcat> it could use some hack like SIGALRM but screw that ;p
[21:55:53] <strcat> for example...
[21:56:06] <strcat> rusti: println("foo"); while true {}
[21:56:06] -rusti- <anon>:11:9: 11:16 error: unresolved name `println`.
[21:56:07] -rusti- <anon>:11         println("foo"); while true {}
[21:56:07] -rusti-                   ^~~~~~~
[21:56:07] -rusti- error: aborting due to previous error
[21:56:07] -rusti- application terminated with error code 101
[21:56:08] <o11c> for a lot of causes you can just specifiy a timeout though
[21:56:12] <strcat> rusti: std::io::println("foo"); while true {}
[21:56:12] <Matthias247> o11c: ah that. Don't know if that works with kqueue
[21:56:18] -rusti- <anon>:11:34: 11:47 warning: denote infinite loops with loop { ... }, #[warn(while_true)] on by default
[21:56:18] -rusti- <anon>:11         std::io::println("foo"); while true {}
[21:56:18] -rusti-                                            ^~~~~~~~~~~~~
[21:56:18] -rusti- foo
[21:56:18] -rusti- timeout triggered!
[21:56:35] <strcat> (it's too bad irc serializes it into one message ;p)
[21:56:49] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[21:57:01] <o11c> that reminds me, I need to make my do-nothing IRC bot respond to pings ...
[21:57:14] <strcat> yeah you can just give epoll a timeout
[21:57:23] <strcat> but you might have more than one, or repeating timers, or w/e
[21:57:54] <strcat> o11c: sadly grepping through libuv doesn't find signalfd/timerfd calls
[21:57:56] <strcat> ;\
[21:58:20] <o11c> someone *should* make implementations of those awesome linux functiosn for other OSes
[21:58:25] <Matthias247> o11c: I began implementing async IO for rust with epoll a while ago: https://github.com/Matthias247/revbio . If you need epoll, timerfd oder signalfd primitives you can copy them from there
[21:58:36] <strcat> o11c: afaik you essentially have other ways of doing that stuff with kqueue
[21:58:36] <o11c> signalfd is just a pipe that you write from the handler ...
[21:58:38] <strcat> not sure
[21:58:45] <strcat> o11c: you can certainly do that kind of thing with IOCP
[21:58:55] <strcat> o11c: you can wait on a lot more than I/O on windows
[21:59:05] <strcat> it's so very inefficient when you don't need it
[21:59:18] <strcat> pretty much any windows object has ACLs and you can wait on anything where it half makes sense
[21:59:25] <strcat> and they can be shared between processes
[21:59:43] <strcat> (much like setpshared for pthread_mutex_t, pthread_cond_t, etc. but for *everything* and you can't turn it off)
[22:00:10] <strcat> windows has a very complex implementation of stuff like permissions...
[22:00:15] <Matthias247> yeah, windows and osx both have a better basic mechanisms. timerfd/signalfd/eventfd only exist because (e)poll is limited to fds
[22:00:18] <dotfelix> Matthias247: does your async IO works on windows?
[22:00:50] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[22:00:53] <Matthias247> dotfelix: no, I implemented it only for linux. had planned to do windows too but then gave up
[22:01:02] <o11c> Matthias247: being limited to FDs is a feature, not a bug
[22:01:07] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[22:01:19] <dotfelix> Matthias247: ok
[22:01:27] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[22:01:39] <strcat> Matthias247: fds are pretty much the linux version of a generic IPC object though
[22:01:50] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[22:01:50] *** ChanServ sets mode: +ao dherman dherman
[22:01:51] <strcat> with stuff like eventfd, dbus, etc.
[22:02:19] <strcat> on that note, kdbus is really awesome ;)
[22:02:30] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[22:02:30] *** ChanServ sets mode: +ao brson brson
[22:03:08] <strcat> zero-copy message passing with nice security semantics
[22:03:15] <Matthias247> hmm, I have an awesome IPC system that is at least faster than the normal dbus and works completely cross-platform. That's enough for me ;)
[22:03:15] *** Quits: dotfelix (dotfelix@E9232E38.DF4B537A.CDA2360F.IP) (Connection reset by peer)
[22:03:19] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[22:04:00] *** Quits: willingc (willingc@moz-48549B49.san.res.rr.com) (Quit: Leaving...)
[22:04:06] <mindcat_> Matthias247: I didn't see unix socket :S
[22:04:18] <strcat> Matthias247: normal dbus is really awful ;)
[22:04:25] <strcat> Matthias247: kdbus isn't actually a kernel implementation of it
[22:04:38] <Matthias247> mindcat: where? what?
[22:04:40] <strcat> it's a new protocol, just inspired by the old dbus (and the old API can be built on it as a compat layer)
[22:04:49] <mindcat_> Matthias247: https://github.com/Matthias247/revbio/blob/master/lib.rs
[22:05:28] <Matthias247> mindcat: you mean unix domain socket? It's also not implemented
[22:05:40] <mindcat_> Matthias247: yea
[22:06:02] <Matthias247> mindcat: but it's easy to implement. Copy all the tcp stuff and change a few lines ;)
[22:06:20] *** Joins: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[22:06:33] *** Quits: sellout (Adium@2917A62E.8B65BA63.1D2A2C57.IP) (Quit: Leaving.)
[22:06:39] <Matthias247> DNS is also missing. That's a harder thing :(
[22:07:02] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[22:07:17] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[22:07:46] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[22:07:56] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[22:08:23] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[22:08:55] <Matthias247> strcat: I definitly want to take a look at kdbus - but not too much time at the moment. And I'm also not too keen to use a linux-only IPC functionality.
[22:09:05] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[22:09:05] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:09:30] <strcat> Matthias247: there's already a linux-only IPC feature in the kernel ;)
[22:09:33] <strcat> binder, which is from android
[22:09:40] <Matthias247> yes, binder
[22:09:51] <Matthias247> and that's also not used outside of android ;)
[22:10:12] <strcat> Matthias247: but it's upstream
[22:10:18] <strcat> you *could* use it outside android
[22:10:38] <Matthias247> inside android I find it quite nice. As everything there uses binder it's a nice homogenous sytem
[22:11:28] <strcat> Matthias247: what will happen with kdbus is that people will continue using the same client libraries, but they'll use it under the hood
[22:11:32] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:11:33] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[22:12:06] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[22:12:13] <strcat> systemd will have a compatibility shim system dbus or something for anything not ported to the API
[22:13:05] <Matthias247> or canonical will add another system? ;)
[22:13:24] <strcat> ubuntu is switching to systemd
[22:13:28] <strcat> so no worries about that
[22:13:33] *** Quits: spott_ (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[22:13:58] <Matthias247> yes - and then the upsstart developers have time to make a IPC alternative :)
[22:14:03] <Matthias247> just kidding :)
[22:14:19] <Ke> if you just use the glib wrapper, you shouldn't notice anything afaik
[22:14:21] <strcat> Matthias247: they've already put upstart in maint mode ;)
[22:14:26] <strcat> no new features
[22:14:29] <strcat> it's dead!
[22:14:32] <Matthias247> i like systemd
[22:14:41] <Ke> the userland shim daemon is supposed to be temporary afaik
[22:14:53] <strcat> Ke: yeah but it will likely be around for a while
[22:14:53] <Matthias247> found it much easier to understand than sysvinit ;)
[22:14:59] <o11c> reminds me, I need to check if Debian has decided to use systemd yet ...
[22:15:00] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[22:15:05] <strcat> o11c: they did, and then ubuntu did
[22:15:16] <o11c> strcat: oh, awesome!
[22:15:21] <Ke> o11c: no GR, but ctte went for systemd
[22:15:22] <strcat> o11c: http://www.markshuttleworth.com/archives/1316 is ubuntu
[22:15:38] <o11c> I *never* expected progress to come out of that discussion
[22:15:48] <strcat> Ke: yeah, but based on totally informal polling, most debian developers support it
[22:15:54] <Ke> now that also Ubuntu gave in, it's unlikely that there would be any GR overriding ctte
[22:15:56] <strcat> and upstart is a non-option now
[22:16:06] <tiffany> systemd puts far more code than necessary into the one process which will take the whole system with it if it crashes
[22:16:09] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[22:16:13] <strcat> tiffany: hardly
[22:16:16] *** Quits: janua (francis@moz-C38AAD4A.cable.virginm.net) (Quit: janua)
[22:16:17] <strcat> systemd has many processes
[22:16:23] <strcat> the main processes is pretty much just an event loop
[22:16:38] <Ke> tiffany: traditional init puts way too little
[22:16:45] <o11c> systemd is the unix way of "do one thing and do it well"
[22:16:46] <strcat> tiffany: it's half the size of hello world in rust
[22:16:54] <strcat> for what that's worth 
[22:16:56] <strcat> ;p
[22:17:00] <o11c> the difference is that what needs to be "done well" has changed over the last several decades
[22:17:03] <Ke> tiffany: now you can have eg. unbreakable connection between hw watchdog and any service
[22:17:25] <Ke> which just wasn't what traditional init did
[22:17:32] <Matthias247> yes, the watchdog thing and restartable applications in  general are great
[22:17:37] <strcat> there are dozens of systemd binaries, perhaps even a hundred
[22:17:50] <strcat> pid1 is just an async event loop (doesn't use threads)
[22:18:14] <Matthias247> and the self-forking daemons were a really strange thing from my POV (no unix developer)
[22:18:42] <Matthias247> find systemd starts processes that don't need to fork much more convenient
[22:18:59] <strcat> Matthias247: and if they do fork 20 processes, it can reliably stop them ;p
[22:19:10] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:19:14] <strcat> even if the pid file is wrong
[22:19:24] *** Joins: jroweboy (jrowe7@AB363EF2.5C78C1C8.71765F8E.IP)
[22:19:31] *** Joins: sinistersnare (sinistersn@moz-7E48AC93.washdc.fios.verizon.net)
[22:19:40] <strcat> pre-systemd there were a lot of race conditions
[22:19:42] *** Quits: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net) (Ping timeout)
[22:19:49] <strcat> udev was handled wrong, there wasn't true hotplug support
[22:20:01] <strcat> non-systemd distros just wait for udev-settle, which empties the current udev queue
[22:20:05] <strcat> but events can still arrive at any time
[22:20:20] <strcat> they also don't handle waiting for the GPU driver to init before starting the display manager and so on.
[22:20:36] <o11c> currently the way I kill my daemon is to ^C it, then check for child process with a given set of names until there are none
[22:20:38] <strcat> + dependencies (including socket-based deps where you don't need to wait for it to start) are nice
[22:21:17] <huon> Ms2ger: #servo doesn't like you anymore :P
[22:21:29] <Ms2ger> I thought I'd made it!
[22:21:32] <jroweboy> Hello everyone! In rust, what is the best way to clone a ~[~Trait] type? Its saying there is no .clone() for ~[~Trait] 
[22:21:43] <Matthias247> my raspberry pi with debian was at PID 3000 after startup, with fedora it's about 300 ;)
[22:21:43] <Ms2ger> And then it kicks me 5 seconds later
[22:21:46] <strcat> jroweboy: you can't clone it
[22:21:50] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[22:21:55] <strcat> jroweboy: a type needs to implement Clone to call clone
[22:22:01] <strcat> and ~Trait won't
[22:22:14] <strcat> you could inherit from clone, but clone uses Self and that doesn't work at all with trait objects afaik
[22:22:15] *** Quits: skade (skade@moz-1EC0F118.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:22:24] <Ms2ger> jdm, would you let me in? :)
[22:22:42] <jdm> done
[22:22:47] <jroweboy> strcat: can't I just impl Clone for ~SomeTrait though? (I meant by Trait SomeTrait that I wrote :)
[22:22:57] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:22:58] <huon> you could have Trait inherit from Clone with a default method `fn clone_trait_object(&self) -> ~Trait { ~self.clone() as ~Trait }`
[22:23:03] <Ms2ger> Ta
[22:23:15] <strcat> jroweboy: you need to use a trait inheriting from clone with a method allowing it to clone
[22:23:26] <huon> jroweboy: there's no way for the compiler/whatever to work out how to Clone without a method like ^
[22:23:35] <strcat> o11c: yeah, just waiting for the session stuff to mature.
[22:23:39] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:23:41] *** Quits: IanCormac84 (User@EE84D974.64D641E5.67DFF8B4.IP) (Ping timeout)
[22:23:56] <strcat> o11c: atm each service/session is in a cgroup, but nothing uses session units :(
[22:24:01] *** Joins: IanCormac84 (User@C151EAB9.2A8D8854.67DFF8B4.IP)
[22:24:14] <strcat> o11c: can have nice stuff like socket units in the session for ssh-agent/gpg-agent, and they start on-demand then finish
[22:25:00] <strcat> arch hasn't had any legacy init scripts for a while (fedora doesn't either), but X still runs as root with the stable release, etc. :(
[22:25:01] <jroweboy> Ah that makes sense then. It doesn't sound like I'm working in the right direction with this then
[22:25:12] *** Quits: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk) (Ping timeout)
[22:25:25] *** Quits: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de) (Quit: Leaving)
[22:25:44] <strcat> weston already doesn't require root, but you need X from git ;(
[22:25:49] <jroweboy> I shouldn't need to be cloning these to begin with :S
[22:26:04] <strcat> jroweboy: well, trait objects could probably be better than they are now
[22:26:13] <strcat> but you should probably consider other options before trait objects anyway
[22:26:22] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Client exited)
[22:26:28] <strcat> for example if you know all the types involved, an enum is often better
[22:26:35] <strcat> or just generic code
[22:26:36] *** Quits: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: Ex-Chat)
[22:27:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:27:58] *** Joins: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net)
[22:28:26] <jroweboy> strcat: Well, I want a vector of different objects that all share the same Trait. For a concrete example, I'm making a list of routes in a web framework so that you can have a route that will load a View function and a different route that will load static files
[22:28:51] <bascule> woohoo!
[22:28:57] <strcat> jroweboy: if you know all the types of routes in advance though, you can use an enum
[22:29:02] <jroweboy> kinda like how revel has the /public/*filepath      Static.Serve("public") syntax
[22:29:03] <bascule> channel() => (Sender, Receiver) ftw
[22:29:22] <strcat> rusti: enum Foo { A(int), B(f64) } ~[A(5), A(10), B(5.5), A(2)]
[22:29:23] -rusti- pastebinned 8 lines of output: http://sprunge.us/WDXK
[22:29:38] <strcat> rusti: #[deriving(Show)] enum Foo { A(int), B(f64) } ~[A(5), A(10), B(5.5), A(2)]
[22:29:40] -rusti- [A(5), A(10), B(5.5), A(2)]
[22:29:56] <jroweboy> strcat: that is pretty amazing! I'm glad I asked this question then!
[22:30:30] <strcat> rusti: #[deriving(Show)] enum Foo { A(int), B(f64), C(~[Foo]) } ~[A(5), A(10), B(5.5), A(2), C(~[A(5), B(6)])]
[22:30:31] -rusti- <anon>:11:107: 11:108 error: mismatched types: expected `f64` but found `<generic integer #4>` (expected f64 but found integral variable)
[22:30:31] -rusti- <anon>:11         #[deriving(Show)] enum Foo { A(int), B(f64), C(~[Foo]) } ~[A(5), A(10), B(5.5), A(2), C(~[A(5), B(6)])]
[22:30:31] -rusti-                                                                                                                     ^
[22:30:31] -rusti- error: aborting due to previous error
[22:30:31] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[22:30:32] -rusti- application terminated with error code 101
[22:30:35] <strcat> rusti: #[deriving(Show)] enum Foo { A(int), B(f64), C(~[Foo]) } ~[A(5), A(10), B(5.5), A(2), C(~[A(5), B(6.0)])]
[22:30:35] -rusti- [A(5), A(10), B(5.5), A(2), C([A(5), B(6)])]
[22:30:39] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Client exited)
[22:30:53] <jroweboy> but can the types in the enum only ... well that just answered my next question :p
[22:31:09] <strcat> jroweboy: enums are pretty much a little dynamic type system, you've probably already used Result/Option a lot which are enums
[22:31:14] *** Joins: victorporof_ (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[22:31:30] <strcat> in C terms they're a union and a tag (although sometimes it can omit the tag)
[22:31:32] <jroweboy> Oh! I wondered about what the "Ok" result was. That makes more sense
[22:31:47] *** Joins: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[22:32:21] *** Quits: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[22:35:42] <jroweboy> rusti: #[deriving(Show)] enum Foo { A(&[str]), B(&[str]) } ~[A(["test", "1"]), B(["2"]), A(["3"])] 
[22:35:43] -rusti- pastebinned 14 lines of output: http://sprunge.us/KWRD
[22:36:32] <jroweboy> rusti: #[deriving(Show)] enum Foo<'a> { A(&'a [&'a str]), B(&'a[ &'a str]) } ~[A(["test", "1"]), B(["2"]), A(["3"])] 
[22:36:33] -rusti- pastebinned 44 lines of output: http://sprunge.us/IbRg
[22:36:37] *** Joins: companion_cube (simon@moz-F48A362B.cedeela.fr)
[22:36:43] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[22:36:59] <strcat> that 2nd error is likely just because of how it prints stuff
[22:37:10] <strcat> let r = { expr }; println!("{}", r)
[22:37:51] <jroweboy> rusti: #[deriving(Show)] enum Foo<'a> { A(&'a [&'a str]), B(&'a[ &'a str]) } let r = ~[A(["test", "1"]), B(["2"]), A(["3"])]; println!("{}", r) 
[22:37:52] -rusti- pastebinned 32 lines of output: http://sprunge.us/SGie
[22:38:16] *** kimundi is now known as zz_kimundi
[22:38:59] *** Joins: Rym (y@7E7DE7A.DD7E53BE.8772DA20.IP)
[22:39:19] <ChrisMorgan> strcat: could you make rusti try {:?} if {} fails to compile and it looks like it's because it doesn't implement Show?
[22:40:03] <ChrisMorgan> I think that's probably the best of both worlds.
[22:40:32] *** Quits: marianoguerra (marianogue@moz-25E71B.dip0.t-ipconnect.de) (Ping timeout)
[22:41:02] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[22:41:27] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[22:41:38] *** Quits: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net) (Quit: carllerche)
[22:41:41] *** Quits: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[22:41:57] <jroweboy> Oh, according to the manual I can just use named fields. Perfect!
[22:42:11] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[22:42:15] <strcat> jroweboy: experimental though
[22:42:42] <strcat> I think it requires a feature flag and something about it is broken in match iirc
[22:43:37] * ChrisMorgan wants struct variants mainstream
[22:43:49] <jroweboy> Do just regular fields work though?
[22:43:53] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[22:43:55] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[22:44:06] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[22:44:28] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[22:44:49] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:45:05] <jroweboy> as in Cat ( ~str, f64 ) without the names? How do I know which features are experimental?
[22:45:11] <huon> the compiler tells you
[22:45:29] <huon> rusti: asm!("")
[22:45:30] -rusti- pastebinned 8 lines of output: http://sprunge.us/HWOX
[22:45:36] <aatch> For some reason, if you have a struct variant it can, sometimes, fail to match a pattern, even though it should.
[22:45:40] <huon> jroweboy: like that ^
[22:45:46] <strcat> jroweboy: yes it works fine without field names
[22:46:18] <strcat> huon: hm, another feature flag to enable in rusti ;p
[22:46:27] <aatch> Which has the unfortunate side-effect of occasionally triggering traps if the match is exahaustive.
[22:46:42] <strcat> or worse
[22:46:48] <huon> aatch: <3 bugs
[22:46:50] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:46:55] <huon> keeps us on our toes :P
[22:47:04] <strcat> rusti: asm!("int 2")
[22:47:05] -rusti- pastebinned 8 lines of output: http://sprunge.us/ehbA
[22:47:11] <aatch> huon, took me ages to figure out what was going on when I hit it though.
[22:47:18] <strcat> rusti: asm!("int 2")
[22:47:18] -rusti- <anon>:11:9: 12:6 error: use of inline assembly requires unsafe function or block
[22:47:18] -rusti- <anon>:11         asm!("int 2")
[22:47:18] -rusti- <anon>:12     };
[22:47:18] -rusti- error: aborting due to previous error
[22:47:19] -rusti- application terminated with error code 101
[22:47:25] <strcat> rusti: unsafe { asm!("int 2") }
[22:47:26] -rusti- pastebinned 6 lines of output: http://sprunge.us/UfOK
[22:47:27] <aatch> Since it's not a nice bug like an ICE or HCF
[22:47:32] <ChrisMorgan> aatch: fix it!
[22:47:49] <aatch> ChrisMorgan, I can't even remember how to replicate it!
[22:48:00] <ChrisMorgan> ☹
[22:48:34] <sfackler> I've been using struct variants pretty exstensively without running into any weird match behavior
[22:48:39] *** Quits: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl) (Quit: Bye)
[22:48:46] <sfackler> but I'm probably just not doing the one weird thing that breaks
[22:48:48] <aatch> it's possible it's been fixed by accident
[22:48:52] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:48:58] <aatch> sfackler, also possible
[22:49:08] <huon> aatch: did you file it?
[22:49:17] *** Joins: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net)
[22:49:26] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[22:49:26] <aatch> huon, I cannot remember
[22:49:33] <aatch> knowing me, probably not.
[22:50:01] * huon slaps aatch with a trout
[22:50:02] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[22:50:12] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[22:50:20] <jroweboy> Is there a way to define methods on specific enum variants like impl Trait for Struct style or some other way?
[22:50:46] <cmr> jroweboy: no, since variants aren't types.
[22:50:56] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Input/output error)
[22:50:58] <strcat> jroweboy: you'll probably want to define types and include them in the enum as variants
[22:51:09] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[22:51:49] <jroweboy> strcat: What do you mean by that pub type Variant = ?? enum Foo { Variant } 
[22:52:03] *** Quits: IanCormac84 (User@C151EAB9.2A8D8854.67DFF8B4.IP) (Ping timeout)
[22:52:13] *** Quits: q66 (q66@moz-D1C55153.range86-184.btcentralplus.com) (Ping timeout)
[22:52:23] <strcat> jroweboy: I mean define a struct Foo and then A(Foo)
[22:52:24] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[22:52:27] *** Joins: IanCormac84 (User@E036259D.64D641E5.67DFF8B4.IP)
[22:52:33] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[22:52:35] <strcat> at least until we have refinement types
[22:52:53] *** Quits: claudiu (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP) (Ping timeout)
[22:52:54] *** Joins: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP)
[22:53:46] <sinistersnare> how can i match on something that returns this kind of enum: http://www.rust-sfml.org/doc/rsfml/window/event/enum.Event.html ? http://bpaste.net/raw/kwPodjjrTfR5YaJbDr7n/ is what i have so far
[22:53:59] <companion_cube> hi, where is the Copy trait defined (in 0.9)?
[22:54:14] <huon> geez, docs for struct variants look horrible
[22:54:21] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[22:54:30] <ChrisMorgan> sinistersnare: MouseMoved { x, y } => ...
[22:54:38] <sinistersnare> oh {} not ()
[22:54:47] <cmr> companion_cube: it isn't.
[22:54:50] <cmr> companion_cube: it was removed.
[22:54:54] <sinistersnare> thanks!
[22:55:06] <companion_cube> oh? is it replaced by Clone then?
[22:55:15] <ChrisMorgan> sinistersnare: look at the manual where it talks about patterns. This is struct matching.
[22:55:17] <aatch> Copy was removed a long time ago.
[22:55:29] <aatch> companion_cube, sort of.
[22:55:29] <cmr> companion_cube: essentially. on master there is a Pod trait, which provides essentially the same thing Copy did.
[22:55:30] <sfackler> huon: probably because I wrote the implementation for them :P
[22:55:38] <cmr> (in fact, Pod is going to be renamed back to Copy)
[22:55:39] <aatch> Clone means it defines a .clone() method.
[22:55:41] <ChrisMorgan> sinistersnare: the { x, y } part is shorthand for { x: x, y: y }
[22:55:45] <strcat> cmr: Copy worked on vectors/strings and unique ptrs though
[22:55:51] <aatch> cmr, and thus we go full circle.
[22:55:53] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[22:56:02] <sinistersnare> oh ok, this is mostly just copy-paste, thanks for letting me know :)
[22:56:08] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[22:56:10] <companion_cube> does it mean that 0.9 doesn't allow basic types to be copied?
[22:56:18] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[22:56:22] <ChrisMorgan> aatch: but without the "copy" keyword
[22:56:24] <strcat> companion_cube: you don't need a trait to copy basic types
[22:56:32] <ChrisMorgan> companion_cube: it does, implicitly.
[22:56:37] <companion_cube> oh, I see
[22:56:55] <companion_cube> I was trying to write a generic function that would require some of its type argument to be copy-able
[22:56:59] <strcat> all types do a shallow copy implicitly - some types move ownership on a shallow copy, so Clone is needed to describe &T -> T rather than just 'do a shallow copy'
[22:57:11] <strcat> companion_cube: add a Clone bound and call clone
[22:57:28] <strcat> generic functions have to assume that a generic type has internal closures, &mut and types with dtors
[22:57:32] <strcat> so it has to move ownership
[22:58:07] <companion_cube> oh wait, looks like HashSet doesn't require it anymore
[22:58:23] <strcat> I don't think HashSet ever needed Clone
[22:59:36] *** Quits: Ms2ger (Ms2ger@moz-5180E188.adsl-dyn.isp.belgacom.be) (Quit: nn)
[22:59:46] *** zz_kimundi is now known as kimundi
[23:00:53] <companion_cube> by "it" I meant Copy
[23:01:00] <companion_cube> sorry, i'm looking at old code
[23:01:42] <strcat> it needed Copy? I don't remember that
[23:02:06] <strcat> I seem to remember writing the HashSet wrapper around HashMap, and it was after the old map was removed
[23:02:15] <strcat> back then it was called LinearMap/LinearSet
[23:02:34] <strcat> I don't think it ever needed Copy
[23:02:40] * strcat shrugs
[23:03:19] <strcat> it existed side-by-side with the old map that probably did, but it didn't have a set type (it might have had a set *alias*)
[23:03:32] <strcat> the bad old days
[23:04:32] *** Joins: jaredly\ (Mibbit@moz-77F5D920.byu.edu)
[23:04:49] <alan_andrade> How can I match an owned string ? I'm getting this error mismatched types: expected `~str` but found a `~`-box pattern
[23:05:23] <strcat> alan_andrade: match against a slice
[23:05:30] *** Quits: mib_qz1mb5 (Mibbit@moz-7AD9232F.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[23:05:30] <jaredly\> I'm trying to use Arcs, but it looks like UnsafeArc is the only one in std::sync. Am I looking in the wrong place? The tutorial says `std::sync::Arc`
[23:05:37] <strcat> the ~"foo" pattern was removed since ~str and ~[T] are being removed
[23:05:42] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[23:05:49] *** Quits: eternaleye (eternaleye@D55ECA0A.3FAF8C6D.B8C1C2E1.IP) (Ping timeout)
[23:05:51] <strcat> jaredly\: yes, you want the sync crate
[23:05:56] <strcat> Arc, MutexArc and RWArc
[23:05:58] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[23:06:08] <alan_andrade> got it. thanks : )
[23:06:11] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[23:06:11] <strcat> extern crate sync;
[23:06:14] *** Joins: eternaleye (eternaleye@D55ECA0A.3FAF8C6D.B8C1C2E1.IP)
[23:06:40] *** Joins: q66 (q66@moz-58A11F6A.range86-156.btcentralplus.com)
[23:06:42] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[23:06:58] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[23:07:16] *** Quits: Rym (y@7E7DE7A.DD7E53BE.8772DA20.IP) (Ping timeout)
[23:07:26] <jaredly\> strcat: oh! Thanks
[23:07:36] *** Joins: hirsch (Mibbit@moz-B73683DE.superkabel.de)
[23:07:41] *** Quits: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: Jesse)
[23:07:51] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Client exited)
[23:08:24] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[23:08:53] *** Quits: victorporof_ (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Quit: victorporof_)
[23:10:06] <jaredly\> Can I share the same immutable data with multiple tasks?
[23:10:15] *** Joins: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[23:10:30] <aatch> jaredly\, using Arc, yes
[23:10:31] *** Joins: Rym (y@7E7DE7A.DD7E53BE.8772DA20.IP)
[23:11:06] *** Quits: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de) (Connection reset by peer)
[23:11:09] <jaredly\> hmm...once I made the Arc, it /moved/ the thing I was arcing. Now I can't access it from the parent thread. Do I just arc.get() it?
[23:11:09] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[23:11:10] *** ChanServ sets mode: +ao brson brson
[23:11:46] <mcpherrin> rusti: () = "abc".chars().peekable()
[23:11:50] -rusti- pastebinned 8 lines of output: http://sprunge.us/TeUJ
[23:11:56] <strcat> jaredly\: yes
[23:11:57] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[23:12:10] <strcat> deref might work now
[23:12:11] *** Quits: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP) (Quit: Leaving.)
[23:12:13] <strcat> dunno
[23:12:31] <strcat> rusti: use std::rc::Rc; let x = Rc::new(5); *x
[23:12:32] -rusti- 5
[23:12:35] <strcat> should work for Arc too
[23:12:56] *** Quits: jix (jix@moz-D969BFFC.de) (Ping timeout)
[23:13:00] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[23:13:23] <aatch> jaredly\, you have to clone the Arc
[23:13:41] <aatch> it won't copy the underlying data, just the reference
[23:14:06] <aatch> rusti: version
[23:14:07] -rusti- rustc 0.10-pre (4d64441 2014-03-12 15:07:06 -0700)
[23:14:26] *** Quits: ChrisOei (ChrisOei@moz-53A9266A.blurb.com) (Client exited)
[23:14:49] *** Quits: hoverbear (hoverbear@moz-DAE63E58.wireless.uvic.ca) (Quit: Taking a nap.)
[23:14:49] <jroweboy> Can an RWArc have a owned pointer inside of it RWArc<~str> for an example? I think it should, but its erroring for me right now. If it should, then I am looking at my problem the wrong way :)
[23:15:15] <jroweboy> wait, does ~str not fulfill freeze? Why doesn't it?
[23:15:18] <aatch> strcat, you should update rusti to get the overloaded autoderef that landed
[23:15:32] *** Joins: jix (jix@moz-D969BFFC.de)
[23:15:55] <huon> jroweboy: it does fulfill freeze
[23:15:57] <aatch> jroweboy, hmm, ~str should fulfill Freeze
[23:16:09] <jroweboy> What about ~EnumVariant though?
[23:16:23] <aatch> jroweboy, depends on whether the type does.
[23:16:40] <aatch> `EnumVariant` is just a constructor for `EnumType`
[23:17:10] *** Joins: claudiu_ (claudiu@6C906E9F.9ECAA4DB.BCDD830B.IP)
[23:17:12] <jroweboy> aatch: Is there a way to find out what is causing something to not fulfill Freeze then?
[23:17:28] *** Joins: alkino (alkino@moz-58B8E4B4.w92-151.abo.wanadoo.fr)
[23:17:29] <aatch> jroweboy, not really, unfortunately.
[23:17:32] <huon> jroweboy: ask #rust
[23:17:33] <huon> ;P
[23:17:37] <ChrisMorgan> jroweboy: post code
[23:17:50] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[23:17:58] *** Quits: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP) (Ping timeout)
[23:18:09] <aatch> jroweboy, wait, do you have the RWArc inside an enum?
[23:18:22] <companion_cube> rust iterators look so nice
[23:18:25] <jroweboy> Alright, I'll make a gist with the gist of the code... wow I can't believe it too me that long to catch that's why they call it gist
[23:18:35] <jroweboy> aatch: Other way around RWArc<EnumVariant>
[23:18:45] <aatch> Ok, that makes more sense.
[23:18:46] <jroweboy> actually RWArc<~[EnumVariant]>
[23:18:47] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[23:18:51] <ChrisMorgan> src/main.rs:8:1: 8:22 error: found possibly newer version of crate `std` which `ncurses` depends on. src/main.rs:8:1: 8:22 note: perhaps this crate needs to be recompiled? ☺
[23:19:22] *** Quits: sigma1 (sigma@C91C7F36.70518F41.9D18269F.IP) (Client exited)
[23:19:50] * ChrisMorgan is pleased it's giving nice error messages now
[23:20:03] *** Joins: spott_ (spott@moz-5158CBDE.colorado.edu)
[23:20:08] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[23:20:49] *** Quits: mye (mye@moz-5578CD59.superkabel.de) (Quit: mye)
[23:20:52] <mcpherrin>  type CharItr<'a> = std::iter::Peekable<char,std::str::Chars<'a>>;
[23:20:55] <mcpherrin> Should this work?
[23:20:58] <huon> ChrisMorgan: you mean random metadata decoding issues aren't nice?
[23:21:04] <huon> mcpherrin: what's the complaint?
[23:21:14] <ChrisMorgan> huon: well, not especially.
[23:21:20] <huon> ChrisMorgan: :P
[23:21:38] *** Quits: hirsch (Mibbit@moz-B73683DE.superkabel.de) (Quit: http://www.mibbit.com ajax IRC Client)
[23:22:11] <mcpherrin> huon: oh, it's actually not that line, but "use of undeclared named lifetime"
[23:22:21] <mcpherrin> fn parse_regex(data: CharItr<'a>) -> (Regex, CharItr<'a>) {
[23:22:25] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[23:22:31] <huon> parse_regex<'a>(...
[23:22:37] <mcpherrin> oh, derp
[23:22:40] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[23:22:45] *** Quits: spott_ (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[23:22:54] <sinistersnare> hey so im using a PPA for a nightly build of rust, it seems that the ppa hasnt updated in time for a library im using. so im stuck with errors. do you guys have any experience mitigating this?
[23:23:30] *** Joins: bvssvni (Mibbit@moz-E289BB64.bb.online.no)
[23:23:45] <ChrisMorgan> sinistersnare: hmm? What PPA for a library you're using?
[23:23:56] <ChrisMorgan> rust-nightly is updated nightly.
[23:24:19] <sinistersnare> im running the library from source
[23:24:19] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[23:24:23] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[23:24:29] <mcpherrin> What library?
[23:24:32] <sinistersnare> rust-sfml
[23:24:44] *** Quits: judder (maradukewa@75FA4DEE.A989D80C.78E362FE.IP) (Client exited)
[23:24:45] <sinistersnare> updated quite fast!
[23:25:03] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (No route to host)
[23:25:11] <sinistersnare> maybe just roll back?
[23:25:15] <o11c> rust-nightly sometimes forgets to build for a few days
[23:25:17] <ChrisMorgan> sinistersnare: https://github.com/JeremyLetang/rust-sfml shows versions compatible with master
[23:25:22] <o11c> dunno why
[23:25:28] <sinistersnare> im running that version, and it is compatible
[23:25:38] <sinistersnare> but i think that my rust version is too far behind :p
[23:25:56] <mcpherrin> Well you could pull your own rust and run it
[23:26:04] <ChrisMorgan> sinistersnare: Ubuntu version?
[23:26:46] <ChrisMorgan> rust-nightly for raring and lucid are 1½ months out of date, but for precise, quantal, saucy and trusty it's fresh.
[23:26:59] <sinistersnare> mint! the latest, 15?16? i dont even remember
[23:27:10] <sinistersnare> it worked last night
[23:27:25] <ChrisMorgan> OK, which release is it set as using in its debian sources?
[23:27:30] *** jorendorff is now known as jorendorff_away
[23:27:32] <sinistersnare> just not 1 hour ago when i got on my machine and updated
[23:27:35] <ChrisMorgan> (e.g. saucy)
[23:27:42] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[23:27:43] <sinistersnare> i think saucy
[23:27:48] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[23:27:52] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[23:27:59] <ChrisMorgan> (You can also run rustc --version to see the version.)
[23:28:05] <sinistersnare> saucy
[23:28:20] <sinistersnare> and its the .10 pre
[23:28:25] *** Joins: tulloch (tulloch@moz-99B7EB8.nat.csx.cam.ac.uk)
[23:28:28] <sinistersnare> i think --version should show the build date :p
[23:28:38] <ChrisMorgan> It does.
[23:28:38] <sinistersnare> considering there is a LOT of 0.10-pre's out there :p
[23:28:43] <kimundi> rusti: version
[23:28:44] -rusti- rustc 0.10-pre (4d64441 2014-03-12 15:07:06 -0700)
[23:28:49] <sinistersnare> :( mine doesnt
[23:28:50] <kimundi> looks like a build dat to me
[23:29:09] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[23:29:11] <ChrisMorgan> sinistersnare: what, the first line just says "rustc 0.10-pre"?
[23:29:23] <sinistersnare> """rustc 0.10-pre"""
[23:29:37] <sinistersnare> """host: x86_64-unknown-linux-gnu""" is second line
[23:29:39] <sinistersnare> and thats all
[23:29:42] * ChrisMorgan wonders why that is
[23:30:15] <sinistersnare> i think i did get an update from my package manager for rust
[23:30:17] <sinistersnare> and i did it
[23:30:21] <sinistersnare> but it didnt solve my problems
[23:30:43] <jroweboy> well crud. It figures that in my contrived test case it works perfectly :S 
[23:31:30] <ChrisMorgan> sinistersnare: changes in the language have probably broken rust-sfml temporarily
[23:31:33] <ChrisMorgan> c.f. https://travis-ci.org/JeremyLetang/rust-sfml
[23:32:26] <ChrisMorgan> sinistersnare: either rust-sfml is out of date—solution: fix it—or rust-nightly is out of date—solution: wait another half a dozen hours for a fresh build.
[23:32:55] <canhtak> sinistersnare: I haven't read all the message, but i think that rust-sfml should be up to date, i've updated my compiler this afternoon.
[23:33:02] *** Joins: IanCormac841 (User@EBD26470.2A8D8854.67DFF8B4.IP)
[23:33:22] *** Quits: IanCormac84 (User@E036259D.64D641E5.67DFF8B4.IP) (Ping timeout)
[23:33:27] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Quit: Leaving...)
[23:33:28] <sinistersnare> https://gist.github.com/sinistersnare/c52cf6ae25fcde96533b this is the errors
[23:33:38] <canhtak> you should wait for rust-nightly be up to date.
[23:33:42] <sinistersnare> it looks like those changes conform to master
[23:33:50] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[23:33:52] *** Quits: io2 (io2@moz-EE406A5.home.otenet.gr) (Quit: )
[23:34:03] <sinistersnare> but my build is old, :( i wont have time to code in 12 hours! i guess its time to try master for a spin i guess
[23:34:11] <sinistersnare> for my own build times then
[23:34:27] *** Parts: jroweboy (jrowe7@AB363EF2.5C78C1C8.71765F8E.IP) ()
[23:35:30] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Ping timeout)
[23:35:37] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Quit: Leaving)
[23:36:35] <ChrisMorgan> rust-nightly should be updated in around six hours.
[23:36:50] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[23:36:59] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[23:37:18] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[23:37:24] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[23:37:25] <sinistersnare> itll probably be faster to build it myself, so long rust-nightly. maybe when 1.0
[23:37:45] *** flaper87 is now known as flaper87|afk
[23:37:58] *** Quits: JanC_ (janc@moz-2AC80CF3.dsl.scarlet.be) (Ping timeout)
[23:38:08] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[23:39:12] *** Quits: tcsc (tcsc@moz-5E71BAD9.hsd1.ma.comcast.net) (Quit: bye!)
[23:39:22] *** Joins: tcsc (tcsc@moz-5E71BAD9.hsd1.ma.comcast.net)
[23:40:29] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Client exited)
[23:40:55] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:41:43] *** Quits: tcsc (tcsc@moz-5E71BAD9.hsd1.ma.comcast.net) (Quit: bye!)
[23:41:56] *** Joins: tcsc (tcsc@moz-5E71BAD9.hsd1.ma.comcast.net)
[23:42:13] <companion_cube> is there a functional list type in std:: ?
[23:42:27] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[23:42:39] <ChrisMorgan> sinistersnare: first time may easily take over an hour
[23:42:52] <ChrisMorgan> companion_cube: you mean a linked list?
[23:42:57] <companion_cube> yes
[23:43:00] <sinistersnare> ChrisMorgan, the compilation? does it get faster after that?
[23:43:06] <bvssvni> companion_cube: libcollections?
[23:43:14] *** Joins: jroweboy (jrowe7@moz-ABD9D9CB.cs.byu.edu)
[23:43:15] *** Quits: cschneid (cschneid@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[23:43:49] <bvssvni> companion_cube: http://static.rust-lang.org/doc/master/collections/index.html
[23:43:50] <ChrisMorgan> sinistersnare: first time (and very occasionally thereafter) you also need to compile llvm.
[23:43:57] *** Quits: lkuper (lkuper@moz-AD4C50F5.dhcp-bl.indiana.edu) (Quit: lkuper)
[23:44:08] <sinistersnare> oh that makes sense, because llvm is huge
[23:44:13] <sinistersnare> ok now i understand
[23:44:17] <companion_cube> does it exist in 0.9?
[23:44:29] <sinistersnare> ive heard a little bit, but is incremental compilation planned for 1.0?
[23:44:29] <ChrisMorgan> companion_cube: extra::list then
[23:44:35] <ChrisMorgan> sinistersnare: no
[23:44:41] <sinistersnare> at all?
[23:44:49] <ChrisMorgan> So I believe and expect.
[23:45:23] *** Joins: j3rky (gmpreussne@moz-97180B8B.nc.res.rr.com)
[23:45:32] <aatch> companion_cube, is there a reason you're using 0.9?
[23:45:36] *** Joins: valentin (Thunderbir@34F4ACDA.7F69ED53.FAF22AF7.IP)
[23:45:44] *** Quits: jroweboy (jrowe7@moz-ABD9D9CB.cs.byu.edu) (Ping timeout)
[23:45:53] <aatch> incremental compilation is on the "nice to have" list.
[23:45:57] <companion_cube> it's the version available on my distribution
[23:46:01] <companion_cube> is it really this old?
[23:46:03] <brson> erickt: thanks for keeping the meetup running smoothly. you've been really going out of your way
[23:46:08] <sinistersnare> completely agree, im not complaining, yall are doing other really cool stuff anyways
[23:46:21] <aatch> However, it's rather difficult to implement (trust me, I've tried)
[23:46:24] <bvssvni> companion_cube: in Rust time, it is ancient
[23:46:50] *** Joins: jroweboy (jrowe7@moz-ABD9D9CB.cs.byu.edu)
[23:46:57] *** Quits: tcsc (tcsc@moz-5E71BAD9.hsd1.ma.comcast.net) (Quit: bye!)
[23:46:59] <strcat> aatch: meh, how about just supporting automatic crate compilation (and it can do it incrementally)
[23:47:02] <erickt> brson: glad to help out. the way I see it if I take this off your plate, then you all have more time to implement the toys I want to play with :)
[23:47:04] *** Joins: tcsc (tcsc@moz-5E71BAD9.hsd1.ma.comcast.net)
[23:47:39] <aatch> strcat, I'm not sure what you mean
[23:48:02] *** Quits: kris (kris@moz-6D20263F.fullrate.dk) (Ping timeout)
[23:48:06] <strcat> aatch: extern mod foo; -> compile foo.rs as a compilation unit
[23:48:23] <strcat> so foo can't depend on the parent module, it works like a crate
[23:48:33] <strcat> but you just need to issue one rustc command and it would do incremental compilation
[23:48:41] * strcat shrugs
[23:48:43] <ChrisMorgan> rustc --recursive
[23:48:45] <aatch> strcat, hmm, that might work.
[23:49:08] <erickt> brson: speaking which, I should probably be getting on the road soon. *shakes fist at SF traffic...
[23:49:29] <sinistersnare> i really think the IDE opportunities can be great with rust, as long as type information can be accessed by a seperate library, it could be very nice
[23:49:39] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[23:49:43] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[23:49:48] <strcat> librustc is a good basis for analysis of complete rust source files and crates
[23:50:03] <sinistersnare> a while ago there was a post on /r/rust on how rust and Qt cant fit well together, is that consensus still there? or has anyone been thinking about hooks to gui systems?
[23:50:15] <sinistersnare> strcat, its libraryized?
[23:50:16] <sinistersnare> oh cool
[23:50:18] <strcat> it's just not going to work well for the current stuff you're working on since it's likely not completely finished syntax/well-typed
[23:50:21] <strcat> sinistersnare: yes
[23:50:29] <aatch> sinistersnare, I've been slowly working on EFL bindings.
[23:50:37] <j3rky> what is everybody's favorite IDE for rust right now? i'm using Geany at the moment... is there anything better that's lightweight and GTK based?
[23:50:39] <tcsc> qt is pretty specific to c++
[23:50:40] <aatch> Nothing released yet, since it's barely done.
[23:50:45] <bvssvni> aatch: cool
[23:50:57] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[23:51:00] <sinistersnare> aatch, keep at it :p i dont hear much about EFL ever :p
[23:51:16] <strcat> tcsc: the python qt bindings are nice, nicer than the gobject ones...
[23:51:18] *** Quits: untwisted (untwisted@moz-EA89F9D9.hsd1.fl.comcast.net) (Ping timeout)
[23:51:20] <sinistersnare> j3rky, im just using sublime and alt-tabbing to my terminal to compile
[23:51:25] <aatch> EFL's a nice library, easy to bind to, just hard to make a decent safe interface over...
[23:51:39] <strcat> aatch: yeah, but the safety issue is probably there for other GUI libs ;)
[23:51:39] <tcsc> yeah, i can imagine mapping qt's concepts to higher level languages wouldn't be so hard
[23:52:02] *** Joins: untwisted (untwisted@moz-EA89F9D9.hsd1.fl.comcast.net)
[23:52:03] <strcat> tcsc: same with gtk, it autogenerates bindings for high-level languages now though
[23:52:06] *** Quits: jroweboy (jrowe7@moz-ABD9D9CB.cs.byu.edu) (Ping timeout)
[23:52:07] <aatch> strcat, probably, it's mostly all those void*s everywhere
[23:52:13] <strcat> and the autogenerated bindings are really awful ;p, but they work
[23:52:21] *** Joins: jroweboy (jrowe7@AB363EF2.5C78C1C8.71765F8E.IP)
[23:52:34] <strcat> for example it's definitely not going to use python operator overloads, python iterators or anything like that.
[23:52:41] <strcat> just a bunch of java-like OOP ;s
[23:52:45] *** Joins: JanC_ (janc@moz-2AC80CF3.dsl.scarlet.be)
[23:52:58] <strcat> the python qt bindings are much better
[23:53:00] * strcat shrugs
[23:53:16] <sinistersnare> PyQT is pretty high quality from what ive used of it, and great books/docs on it
[23:53:22] <strcat> gtkmm (gtk C++ bindings) are quite good *because* they're done by hand
[23:53:22] <aatch> I finally figured out that EFL doesn't really expect the event system to be used directly by applications.
[23:53:23] <tcsc> i'd be surprised if you could cleanly map qt to rust, due to the semantic diffrences between c++ and rust
[23:54:03] <mindcat_> j3rky, im just using sublime and alt-tabbing to my terminal to compile
[23:54:10] <mindcat_> too
[23:54:22] <sinistersnare> mindcat, high five!
[23:54:32] <sinistersnare> i really want a cool rust ide though :p
[23:54:36] <mindcat_> what? high fire?
[23:54:41] *** Quits: valentin (Thunderbir@34F4ACDA.7F69ED53.FAF22AF7.IP) (Ping timeout)
[23:54:47] <j3rky> mindcat, sinistersnare: ah ok, thx
[23:54:51] <sinistersnare> like how eclipse does it! minus all the buggy!
[23:54:55] *** Joins: jensnock_ (jensnocker@moz-33279404.customers.ownit.se)
[23:55:08] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[23:55:10] <jroweboy> mindcat_: Same here. Except I compile code with reset && make since I can't stand having error messages from the last compilation confusing me 
[23:55:29] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:55:32] *** Joins: valentin (Thunderbir@34F4ACDA.7F69ED53.FAF22AF7.IP)
[23:55:42] <sinistersnare> reset seems quite heavy compared to just 'clear', it nukes everything
[23:56:04] <mindcat_> sinistersnare: high five! :D
[23:56:15] <jroweboy> clear still keeps things in my terminal though, so if I scroll up I can see the old error messages :(
[23:56:47] *** Quits: jensnock_ (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[23:56:49] <sinistersnare> thats true, i didnt know about reset though, thanks!
[23:57:05] <sinistersnare> woohoo just hit llvm[5]! does that mean its on the fifth pass?
[23:57:11] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[23:57:15] <mindcat_> I just hear from someone, IDE is not good
[23:57:17] <aatch> sinistersnare, no, it means its 5 levels deep
[23:57:32] <sinistersnare> oh back on 4... how many levels are there?
[23:57:46] <mindcat_> or, it is here http://c.learncodethehardway.org/book/ex0.html
[23:57:48] <ChrisMorgan> sinistersnare: that refers to directory depth
[23:57:57] <aatch> sinistersnare, no idea, whats the depth of the llvm directory tree?
[23:58:02] <sinistersnare> mindcat_ thats mostly towards beginners
[23:58:04] <sinistersnare> and zed....
[23:58:08] <jroweboy> Levels are like when  makefile calls another makefile right? 
[23:58:13] <sinistersnare> idk i guess ill see 
[23:58:18] <aatch> jroweboy, exactly like that.
[23:58:25] <sinistersnare> oh ok
[23:58:39] <mindcat_> I just learn programming about 1 year
[23:59:10] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Ping timeout)
[23:59:10] <bvssvni> mindcat_: that's impressive
[23:59:42] <mindcat_> bvssvni: I wish so :D
[23:59:47] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
