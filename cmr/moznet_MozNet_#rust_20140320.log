[00:00:54] <strcat> flac is really not very good ;\
[00:01:04] <strcat> it barely beats LZMA2
[00:01:05] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[00:01:16] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[00:01:22] *** Joins: cschneid (cschneid@moz-621ACC77.hlrn.qwest.net)
[00:01:44] *** Quits: skade (skade@moz-1EC0F118.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:02:25] <o11c> meh, it's lossless
[00:02:43] <strcat> I guess you pay a lot for the fast compression + streaming decompression though
[00:03:25] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[00:03:39] * strcat sighs
[00:03:42] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[00:03:49] <strcat> libsndfile's C api...
[00:03:58] *** Quits: brontron (brontron@moz-CF02444.dia.static.qwest.net) (Ping timeout)
[00:04:03] *** Quits: IanCormac84 (User@9D0C98C4.64D641E5.67DFF8B4.IP) (Connection reset by peer)
[00:04:46] *** Joins: IanCormac84 (User@9D0C98C4.64D641E5.67DFF8B4.IP)
[00:05:10] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Ping timeout)
[00:05:28] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[00:06:07] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[00:06:32] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:06:54] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[00:07:08] *** Joins: nszceta (nszceta@moz-BD0004B6.hfc.comcastbusiness.net)
[00:08:23] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[00:08:32] *** Quits: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de) (Quit: Matthias247)
[00:10:26] *** Quits: ewalstad (Adium@moz-9A04E871.dedicated.static.sonic.net) (Quit: Leaving.)
[00:11:52] *** Quits: twi (Adium@moz-A3B8EA95.static.bezeqint.net) (Quit: Leaving.)
[00:12:08] *** Quits: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:12:56] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[00:14:17] *** Quits: Lovot (root@moz-64ED673A.knology.net) (Ping timeout)
[00:15:38] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:15:41] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[00:15:42] *** Joins: frogmella (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[00:15:57] *** Joins: Lovot (root@moz-64ED673A.knology.net)
[00:16:36] <krdln> rusti: struct S { p: ~int } std::mem::size_of::<Option<S>>()
[00:16:37] -rusti- 16
[00:17:14] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[00:17:30] <strcat> krdln: getting a reference inside the option has to point to a valid S
[00:17:42] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[00:17:44] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[00:17:44] *** Joins: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net)
[00:17:49] <cgaebel> so was there any verdict on how I can get rustc build with llvm debug symbols?
[00:17:57] <strcat> could probably make that example work...
[00:17:59] <strcat> it's hard though
[00:18:07] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Client exited)
[00:18:38] <krdln> strcat: S never contains null, so I don't see why single field structs / enums should be treated differently
[00:18:45] *** Joins: jmgrosen` (user@moz-BF80C818.sbcc.edu)
[00:18:53] *** Quits: intuxicated (intuxicate@5BA9DB47.F2F0EDE4.DA0107E2.IP) (Ping timeout)
[00:18:56] *** Quits: frogmella (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:19:06] <strcat> krdln: because it would need to be much more clever
[00:19:44] <krdln> rust is clever :) but this sadly adds penalty to newtypes
[00:20:02] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:20:05] <strcat> krdln: the optimization doesn't exist at all yet for library defined smart pointers either
[00:20:16] *** Joins: brontron (brontron@moz-CF02444.dia.static.qwest.net)
[00:20:40] <krdln> strcat: but they're using *T, am I right?
[00:20:53] <strcat> krdln: right, but they could be marked with an attribute
[00:21:51] <krdln> strcat: You mean for now there is some #[nonnull] for pointers, or in future there will be?
[00:21:57] *** Joins: intuxicated (intuxicate@5BA9DB47.F2F0EDE4.DA0107E2.IP)
[00:22:12] <strcat> krdln: in the future there will be
[00:22:13] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[00:22:22] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[00:22:33] <strcat> the existing implementation is already buggy
[00:22:40] <strcat> &T and ~T are sometimes null
[00:22:43] *** Quits: jmgrosen` (user@moz-BF80C818.sbcc.edu) (Ping timeout)
[00:22:59] <strcat> & with zero-size types sometimes give null
[00:23:08] <strcat> and ~T for zero-size types is null for the moment
[00:23:37] *** Quits: dotfelix (dotfelix@193B523.829DBEF3.40E092AA.IP) (Quit: )
[00:23:59] <krdln> to make free work correctly while not using any memory?
[00:24:04] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:24:09] *** Joins: jmgrosen` (user@moz-BF80C818.sbcc.edu)
[00:24:10] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[00:24:47] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[00:24:54] <cgaebel> does rustc have a --f-no-omit-frame-pointer?
[00:24:59] <cgaebel> or equivalent
[00:25:16] <strcat> cgaebel: it leaves it in debug builds
[00:25:21] <cgaebel> ok
[00:25:26] <strcat> although it shouldn't be necessary
[00:25:32] <strcat> DWARF info is supposed to cover that
[00:25:39] <strcat> needing it is a bug
[00:25:42] <cgaebel> ok
[00:25:53] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[00:25:54] <cgaebel> just making sure
[00:27:31] <kmc> I'm looking for something like crate-scoped visibility... I have mycrate::util::foo and want to use it from mycrate::tokenizer::bar, but not expose it to users of my library crate
[00:27:42] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[00:27:47] *** Joins: dotfelix (dotfelix@676F0DF8.829DBEF3.40E092AA.IP)
[00:27:54] <acrichto> kmc: make the 'util' module private
[00:28:43] *** Quits: cgaebel (clark@moz-F9D89110.nyc.res.rr.com) (Ping timeout)
[00:28:52] <kmc> ah, but the things inside it need to be pub
[00:28:57] <acrichto> yeah
[00:29:02] <strcat> rusti: mod foo { pub fn bar() {} } foo::bar()
[00:29:03] -rusti- ()
[00:29:07] *** Joins: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu)
[00:29:20] *** Quits: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu) (Client exited)
[00:29:28] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[00:29:41] <kmc> util is on the same level as tokenizer, so it's visible in tokenizer no matter what?
[00:29:41] *** Joins: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu)
[00:31:13] <acrichto> kmc: you can access any private thing in your ancestry, so if 'util' is at the top of the crate, then the entire crate can access 'util' (but only the pub things in util)
[00:31:31] <strcat> acrichto: can all networking be in a libnet? is there any reason it has to be in std?
[00:31:40] <kmc> ok
[00:31:51] <acrichto> perhaps yeah, it'd be nice to have a generic open() function
[00:32:03] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Ping timeout)
[00:32:19] *** Quits: brontron (brontron@moz-CF02444.dia.static.qwest.net) (Ping timeout)
[00:32:26] <krdln> Swap will swap &mut T<'a> only when they have strictly equal lifetime?
[00:32:33] <strcat> socks4/socks4a/socks5 would be another 200 lines and that doesn't really feel like it'd belong in libstd either
[00:32:41] <strcat> but it'd be nice to have it in one place
[00:33:10] *** Joins: cgaebel (clark@moz-F9D89110.nyc.res.rr.com)
[00:33:28] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:33:54] *** Quits: jmgrosen` (user@moz-BF80C818.sbcc.edu) (Ping timeout)
[00:34:15] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[00:34:38] <kmc> krdln: yeah, T<'a> and T<'b> are different types, if the lifetimes are not the same
[00:35:10] <cmr> (and since they have different names they can't be the same...)
[00:35:11] *** Joins: Jesse (jruderman@moz-62518563.mtv2.mozilla.com)
[00:35:20] *** Joins: int3_ (int3_@moz-7F290DBB.public.wayport.net)
[00:35:28] <krdln> yay! So now I have workaround to disable swaps :)
[00:35:32] <kmc> cmr: if I introduce two lifetime variables, they can't unify?
[00:35:54] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:36:14] <cmr> kmc: I think they can, but I don't think type checking does that... would have to experiment.
[00:36:38] <cmr> I'm a bit iffy on how lifetimes are treated.
[00:37:03] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[00:37:47] *** Quits: Rym (y@1AD9BB8E.D1C9731D.8772DA20.IP) (Ping timeout)
[00:38:38] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[00:39:03] <dotfelix> cmr: can u share more light on lifetime in rust refs?
[00:39:28] <dotfelix> this lifetime is causing my head to spin
[00:39:35] <cmr> dotfelix: do you have a specific question?
[00:40:09] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Quit: Leaving...)
[00:40:09] *** Quits: ChrisOei (ChrisOei@moz-53A9266A.blurb.com) (Client exited)
[00:40:11] *** Quits: bgmerrell (bgmerrell@moz-AFAF64AB.members.linode.com) (Quit: leaving)
[00:41:30] <dotfelix> cmr: my question is why not just send a ref & but need a 'a to denote lifetime
[00:41:38] *** Joins: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net)
[00:42:07] <newguy> When creating virtual environments, should i be creating a venv for every single project?
[00:42:21] <newguy> ^not a rust-specific question... more general
[00:42:52] *** Quits: Sharp (Sharp@19388942.6B775EBE.DC877F3B.IP) (Quit: Sharp)
[00:43:08] <krdln> newguy: venvs are evil! (but that's only my opinion)
[00:43:15] <newguy> krdln: how so?
[00:43:55] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[00:44:24] <krdln> newguy: Just unpleasant for me. Create lots of duplicates
[00:44:51] <krdln> dotfelix: You mean send like between a tasks, or jsut return from function?
[00:45:17] <dotfelix> krdln: return from function
[00:45:20] <newguy> krdln: oh ok. so if i use venvs, im a little confused as to whether i should be creating a venv for every single project? is that the general thing to do?
[00:45:35] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[00:46:01] <krdln> newguy: maybe ask somebody else, it depends
[00:46:11] <newguy> k
[00:46:36] <cmr> newguy: I usually don't. depends on the project. if it needs specific or weird versions of things I do.
[00:46:46] <cmr> newguy: the main thing is to not touch the system python.
[00:46:57] <cmr> or the system in general ;p
[00:47:02] <cmr> dotfelix: it's for safety.
[00:47:12] <krdln> dotfelix: so, just `fn<'a>(&'a self) -> &'a T`, 'a is to indicate that returned reference won't outlife object
[00:47:39] <cmr> if you just return &T, how long does it live for?
[00:47:56] <cmr> and how long did you *intend* for it to live for
[00:47:58] <cmr> etc
[00:48:53] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:48:53] *** Joins: jviereck (Adium@moz-9604D6C0.dclient.hispeed.ch)
[00:48:57] *** Quits: alkino_ (alkino@moz-61F150EC.w92-151.abo.wanadoo.fr) (Ping timeout)
[00:49:02] <newguy> cmr: ahh ok. so if the projects i create don't vary in terms of versions, i can just use the same venv right?
[00:49:13] <dotfelix> so does that means the function will live till while the ref is in scope?
[00:49:52] <cmr> dotfelix: no (functions don't have a lifetime, or if they did it would be 'static). it means that it returns a reference with the same lifetime as self.
[00:51:02] <krdln> dotfelix: <'a> is only to introduce lifetime variable (so you may use it to „bind” lifetime of returned object to argument object)
[00:51:13] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:51:23] <dotfelix> okay
[00:51:32] <cmr> dotfelix: it's not inaccurate to think of a lifetime as the stack frame the referenced object is from.
[00:51:32] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[00:51:50] <dotfelix> need to write some rust to see it in action
[00:52:19] *** Joins: ChrisOei (ChrisOei@6D90E5E9.CA21CEB1.98A37E8C.IP)
[00:52:20] <dotfelix> cmr: do such objects live on the heap?
[00:52:45] <cmr> Which object?
[00:52:50] *** Joins: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au)
[00:52:59] <cmr> I don't mean that literally the lifetime is the stack frame, just that it *represents* that stack frame
[00:53:06] <cmr> lifetimes have no runtime representation, they're just for analysis
[00:53:07] <dotfelix> cmr: the ref &
[00:53:13] *** Quits: azita (Azita@moz-62518563.mtv2.mozilla.com) (Quit: azita)
[00:53:20] <cmr> dotfelix: no, it could be anyway.
[00:53:26] *** Joins: Rym (y@1AD9BB8E.D1C9731D.8772DA20.IP)
[00:53:26] <cmr> *anywhere
[00:53:29] <dotfelix> cmr: okay
[00:53:45] *** Quits: jviereck (Adium@moz-9604D6C0.dclient.hispeed.ch) (Quit: Leaving.)
[00:54:32] <WalrusPony1> >task 'rustc' has overflowed its stack
[00:54:39] <WalrusPony1> I don't think this is supposed to happen D:
[00:54:41] <dougxxx> O_o
[00:54:47] <mcpherrin> WalrusPony1: that happens :P
[00:54:50] *** Joins: brontron (brontron@moz-C8D86903.tc.ph.cox.net)
[00:54:57] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[00:55:03] <mcpherrin> Usually when you define an infinitely sized type or something
[00:55:04] <WalrusPony1> Like, this is the simplest possible code
[00:55:04] <dotfelix> WalrusPony1: can u show code?
[00:55:24] <WalrusPony1> #[no_std];
[00:55:24] <WalrusPony1> #[lang="start"] fn main() {}
[00:55:42] <cmr> that function has the wrong signature
[00:55:53] <WalrusPony1> what signature should it have?
[00:56:01] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:56:03] <dougxxx> It still shouldn't stack overflow when it compiles. :p
[00:56:19] <cmr> fn(int, **u8) -> int
[00:56:35] <mcpherrin> int or c_int?
[00:56:43] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[00:56:58] <mcpherrin> I dunno why I would think it would be c_int though
[00:57:05] <cmr> c_int isn't a built-in type :P
[00:57:25] <WalrusPony1> cmr: If I use that signature
[00:57:29] <WalrusPony1> test.rs:53:17: 1:1 error: main function expects type: `fn()`: incorrect number of function parameters
[00:57:37] <cmr> hahah
[00:57:39] <cmr> that's a bug
[00:57:42] <cmr> open an issue? :)
[00:57:47] *** jorendorff is now known as jorendorff_away
[00:57:50] <WalrusPony1> I'm using 0.9
[00:57:55] <WalrusPony1> can someone confirm on master first?
[00:58:01] <cmr> I confirmed the stack trace.
[00:58:17] <krdln> wasn't it #[start], not #[lang="start"]>
[00:58:18] <krdln> ?
[00:58:21] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:58:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:58:44] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Ping timeout)
[00:59:12] <WalrusPony1> krdln: Oh, that makes it happier
[00:59:14] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Connection reset by peer)
[00:59:34] <WalrusPony1> Now all I have to figure out is
[00:59:35] <WalrusPony1> (morestack.o):(.text+0x7): undefined reference to `rust_stack_exhausted'
[00:59:52] <cmr> either use #[no_split_stack] or link to rustrt or stub out rust_stack_exhausted.
[01:00:01] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[01:00:20] <WalrusPony1> #[no_split_stack] didn't change anything
[01:00:21] <krdln> hm, #[lang="whatever"] doesn't even warn.
[01:00:27] *** Joins: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net)
[01:01:03] *** Joins: Guest___ (textual@moz-B0DA5BFF.hsd1.sc.comcast.net)
[01:01:04] <cmr> oh :(
[01:01:18] <cmr> #[no_mangle] pub fn rust_stack_exhausted() { }
[01:01:24] *** Joins: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP)
[01:01:54] <WalrusPony1> cmr: You gotta extern "C" that as well
[01:02:37] *** Quits: pcwalton (pcwalton@moz-24157589.mtv2.mozilla.com) (Quit: pcwalton)
[01:03:30] *** Joins: jeff_ (jeff@moz-E6A9E8C9.hsd1.or.comcast.net)
[01:04:27] *** Quits: Rym (y@1AD9BB8E.D1C9731D.8772DA20.IP) (Ping timeout)
[01:05:18] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[01:06:25] *** Joins: janra (Janus@1CDC5701.A48867D7.52E4E107.IP)
[01:06:32] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[01:08:03] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:08:50] *** Quits: q66_ (q66@moz-EB7001DA.range81-156.btcentralplus.com) (Quit: Leaving)
[01:08:59] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[01:09:07] <dotfelix> WalrusPony1: did open an issue yet about the stack overflow?
[01:10:12] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[01:11:19] <dotfelix> cmr: am on rustc 0.10-pre (339f816 2014-03-14 06:41:26 -0700) 
[01:11:32] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[01:11:39] <klutzy> this? https://github.com/mozilla/rust/issues/9307
[01:11:45] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:11:48] <dotfelix> and I had 
[01:11:56] <WalrusPony1> dotfelix: Nope
[01:11:59] <dotfelix> task 'rustc' has overflowed its stack
[01:11:59] <dotfelix> [2]    6912 illegal hardware instruction  rustc -o bin/no_std no_std.rs
[01:12:00] <cmr> klutzy: oh hey
[01:12:19] * cmr has apparently seen this stack overflow before
[01:12:35] <dotfelix> WalrusPony1: did you fix it?
[01:12:47] <dotfelix> or is the same error
[01:13:04] *** Quits: Guest___ (textual@moz-B0DA5BFF.hsd1.sc.comcast.net) (Client exited)
[01:13:16] <dotfelix> cause I had a `rustc has overflowed its stack`
[01:13:20] *** kimundi is now known as zz_kimundi
[01:13:25] *** Joins: Guest___ (textual@moz-B0DA5BFF.hsd1.sc.comcast.net)
[01:13:38] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Ping timeout)
[01:13:41] <dotfelix> and am on 0.10-pre
[01:14:07] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:14:56] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[01:16:13] *** Quits: papanikge (papanikge@moz-7FCB17B7.access.hol.gr) (Quit: WeeChat 0.4.3)
[01:16:32] <WalrusPony1> dotfelix: My code was incorrect anyway, so it isn't a major obstacle
[01:16:43] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[01:16:48] <dotfelix> okay
[01:17:03] *** Quits: cschneid (cschneid@moz-621ACC77.hlrn.qwest.net) (Client exited)
[01:17:54] *** Joins: quux00 (uid24415@moz-E77DEB21.irccloud.com)
[01:18:14] <WalrusPony1> dotfelix: https://github.com/mozilla/rust/issues/13021
[01:18:18] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:18:43] <dotfelix> Klutzy: the issue is not fix
[01:19:22] <dotfelix> WalrusPony1: okay seen it
[01:19:44] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[01:20:32] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[01:20:37] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:20:47] <krdln> Could somebody explain me why this compiles? https://gist.github.com/krdln/eb378aaddefe15817613
[01:21:12] *** Quits: leowoe (Leo@moz-8A753E71.dip0.t-ipconnect.de) (Quit: Leaving.)
[01:21:41] *** Joins: Rym (y@1AD9BB8E.D1C9731D.8772DA20.IP)
[01:22:13] <cmr> krdln: why wouldn't it?
[01:22:13] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[01:22:33] <cmr> fn swap<T>(&mut T, &mut T)
[01:22:47] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[01:22:54] <krdln> but ther are T<'a> and T<'b> where 'a != 'b
[01:23:06] <cmr> Are you sure?
[01:23:10] <cmr> You have no explicit lifetimes there.
[01:23:13] <cmr> So it's going to infer them.
[01:23:15] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[01:23:24] <cmr> it could infer them to be the same
[01:23:33] <cmr> Lifetimes also exhibit subtyping.
[01:23:44] <krdln> cmr: hm, that's true..
[01:23:44] *** Quits: onelson (owen@moz-DD666EC5.laika.com) (Quit: Leaving)
[01:23:52] <cmr> to T<'a> is a subtype of T<'b> where 'a <= 'b
[01:25:00] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[01:25:09] *** Quits: Guest_ (textual@3E0487DF.D8252BC.9532F1CE.IP) (Ping timeout)
[01:25:21] <krdln> cmr: How does this not be a problems for iterators, eg. Chars<'a>?
[01:25:43] <cmr> krdln: what do you mean?
[01:25:55] *** Joins: orospakr (orospakr@moz-A57EF4CD.cpe.net.cable.rogers.com)
[01:26:40] <krdln> assume that S's are strings and NoSwaps are Chars<'a> iterators. Swapping those should create a problem
[01:27:02] <cmr> what problem?
[01:27:10] <cmr> why would that be invalid?
[01:27:36] <krdln> iterating over dead string. Wait, I'll try to code it, maybe I'm wrong
[01:28:04] <cmr> how could the string become dead? it has active borrows via give
[01:28:07] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Connection reset by peer)
[01:28:27] <cmr> note that you're swapping two temporary values here
[01:28:54] *** Quits: int3_ (int3_@moz-7F290DBB.public.wayport.net) (Client exited)
[01:29:00] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[01:29:14] *** Joins: int3_ (int3_@moz-7F290DBB.public.wayport.net)
[01:30:42] <krdln> cmr: I thought it doesn't matter whether they are temporaries or in variables. But it does :)
[01:31:10] *** Quits: int3_ (int3_@moz-7F290DBB.public.wayport.net) (Ping timeout)
[01:31:35] *** Quits: LU324 (asdf@moz-864C7465.dyn.embarqhsd.net) (Ping timeout)
[01:31:54] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[01:32:01] *** Joins: int3_ (int3_@moz-7F290DBB.public.wayport.net)
[01:32:46] *** Joins: robhobbes (robert@moz-9B0672CB.hsd1.ut.comcast.net)
[01:33:32] <robhobbes> Hey guys... I would like to implement a trie (or maybe just trie-like) data structure in rust. What would be the best way to go about that?
[01:33:53] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[01:34:34] <mcpherrin> robhobbes: Well you can look at the one in libcollections for inspiration
[01:34:35] <mcpherrin> http://static.rust-lang.org/doc/master/collections/trie/struct.TrieMap.html
[01:34:50] * aatch reminds himself what a trie looks like
[01:35:01] <robhobbes> mcpherrin: there is one already? awesome, thanks
[01:35:17] <mcpherrin> http://static.rust-lang.org/doc/master/collections/trie/index.html is perhaps a better doc starting point
[01:35:19] *** Quits: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu) (Client exited)
[01:35:59] <mcpherrin> it's limited to uint keys and isn't quite as flexible as I'd like though
[01:35:59] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[01:36:16] <aatch> robhobbes, if you're interested in implementing another datastructure though, we could do with a decent Rope
[01:36:20] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[01:36:21] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[01:36:52] <robhobbes> aatch: sorry, I need a trie for the project I'm working on
[01:37:01] <aatch> robhobbes, bah!
[01:37:02] *** Parts: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net) ()
[01:37:13] <robhobbes> sorry =P
[01:37:17] <aatch> You know you actually need a rope :P
[01:37:32] *** Joins: Guest_ (textual@3E0487DF.D8252BC.9532F1CE.IP)
[01:37:58] <robhobbes> I'm also not even close to good enough to build a rope and commit it into the actual rust code. I'm just working on a school project
[01:38:09] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[01:38:09] <aatch> robhobbes, ahh.
[01:38:12] <mcpherrin> aatch: I could use a rope too
[01:38:16] <mcpherrin> aatch: you should write one :)
[01:38:36] <robhobbes> haha
[01:38:44] <robhobbes> good luck, aatch
[01:39:09] <aatch> I don't really have time, what with working on SIMD support and all...
[01:39:45] <mcpherrin> hmm I need simd support more than I need a rope :)
[01:39:57] *** Quits: int3_ (int3_@moz-7F290DBB.public.wayport.net) (Quit: Leaving...)
[01:40:40] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Quit: leaving)
[01:40:49] <krdln> cmr: I still don't understand lifetimes. I've updated gist https://gist.github.com/krdln/eb378aaddefe15817613 
[01:41:12] *** Quits: Doppp (Doppp@moz-6B405134.hsd1.ca.comcast.net) (Ping timeout)
[01:41:15] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:41:21] <cmr> krdln: *that* looks like it shouldn't.
[01:41:28] <cmr> krdln: well, actually.
[01:41:39] <cmr> krdln: change S to store a `~str` and see what happens.
[01:41:39] <krdln> (commented line fails to compile)
[01:42:11] <zxcdw> Sorry to disturb, but you Rust people are awesome. <3 I love this community!
[01:42:12] <krdln> cmr: I suspected that 'a == 'static, but when 5 was returned by function it compiled too
[01:42:26] <zxcdw> Now that I got it off my chest, back to lurking
[01:42:51] <krdln> cmr: ~"" instead of 5 compiles too!
[01:43:18] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:43:22] *** Quits: dapz (textual@moz-ADE1780.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:43:34] <cmr> krdln: I don't mean in the `let b`
[01:43:49] <krdln> oh, ok.
[01:44:05] *** Joins: cschneid (cschneid@moz-621ACC77.hlrn.qwest.net)
[01:44:23] <krdln> cmr: why does it matter, when &self isn't even marked with lifetime?
[01:44:25] <cmr> I mean struct S{x: ~str}
[01:44:26] *** Joins: dapz (textual@moz-ADE1780.hsd1.ca.comcast.net)
[01:44:34] <cmr> krdln: right now your struct is Pod.
[01:44:44] <cmr> I think that might be messing with it?
[01:44:47] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[01:44:59] <cmr> however I also don't think you should be able to do `let b = &'a 5;` and then returnb 
[01:45:02] <cmr> *return b
[01:45:50] <krdln> cmr: (I do it to make unswappable struct, so I'm trying to assign fresh lifetime on each method call)
[01:46:11] <cmr> krdln: there's no way to enforce that.
[01:46:38] <cmr> fn foo<'a>
[01:46:51] <cmr> *takes* a lifetime. it never creates one. there's no way to make new lifetimes.
[01:47:13] <krdln> cmr: yeah, but I thought referencing stack variable will „make” new one
[01:47:32] <cmr> you'd need to make a new block
[01:47:49] <krdln> cmr: isn't function body block a new block?
[01:47:54] <cmr> yes
[01:48:15] <cmr> but... you should never be able to return a reference to a local
[01:48:34] <cmr> I think you might also be getting bit by variance inference
[01:48:36] <cmr> struct NoSwap<'a>{x: int}
[01:48:41] <cmr> 'a is never used, so it's considered bivariant.
[01:48:44] <cmr> whatever that means
[01:48:48] <cmr> nrc: ^
[01:48:59] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Ping timeout)
[01:49:10] <krdln> yeah, of course! I just want to make a hack to create fresh lifetime to forbid swapping values
[01:49:18] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[01:49:24] <cmr> I don't think it's possible :p
[01:50:18] <dotfelix> cmr: maybe lifetime should be given a look by the rust core team
[01:50:19] <cmr> If our type system is sound, swap will always be safe. Why do you want to forbid it?
[01:50:24] <krdln> (cmr: that 'a, never used in NoSwap, still manages to break compilation when there's 'a self (commented line))
[01:50:26] <cmr> dotfelix: eh?
[01:51:34] <dotfelix> cmr: it seems to be there's a lot of miss understanding about it's 'a syntax
[01:51:35] <cmr> krdln: the error with the second method is legitimate, your temporary doesn't live long enough.
[01:51:50] <dotfelix> or more doc is need about it
[01:52:21] <cmr> dotfelix: more documentation is certainly needed.
[01:52:37] <cmr> anybody could write it, but it's not easy.
[01:52:46] *** Joins: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu)
[01:53:04] *** Joins: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net)
[01:53:38] *** Quits: klaus (koz@moz-4486E876.hsd1.wa.comcast.net) (Quit: klaus)
[01:53:42] <dotfelix> true
[01:53:42] <sfackler> kmc: I updated rust-phf to run with a fixed RNG: https://github.com/sfackler/rust-phf/commit/12d803870a64ca371028b54b047a96deb1bf2f40
[01:54:02] *** Quits: ChrisOei (ChrisOei@6D90E5E9.CA21CEB1.98A37E8C.IP) (Ping timeout)
[01:54:11] <kmc> cool
[01:54:19] *** Quits: thewonderidiot (mstewart@FAFE6CB6.8FBF3E66.60E22FEA.IP) (Quit: Leaving.)
[01:54:22] <kmc> nice nothing-up-my-sleeve number :)
[01:54:30] <sfackler> :D
[01:54:34] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[01:54:43] <Havvy> kmc:  42?
[01:54:44] *** Quits: orospakr (orospakr@moz-A57EF4CD.cpe.net.cable.rogers.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:54:47] <kmc> if only you'd committed this 5 days ago
[01:54:54] <cmr> digits of pi
[01:55:01] <sfackler> I was going to use all 0s but from_seed apparently checks for that explicitly :(
[01:55:24] <cmr> sfackler: xorring with zeros does nothing, which is why it's not allowed
[01:55:26] <Havvy> Ah. Cool.
[01:55:26] <sfackler> all 0s is probably also an extraordinarily bad seed for an XorshiftRng
[01:55:27] <sfackler> yeah
[01:55:29] <cmr> your rng is now a noop
[01:55:32] <cmr> :P
[01:55:40] <sfackler> the worst possible seed!
[01:56:05] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[01:56:05] *** ChanServ sets mode: +o tjc
[01:56:06] <kmc> "it worked for Debian"
[01:56:34] <Havvy> Then Debian didn't need randomness in the first place?
[01:56:53] <o11c> hey now, that's not being fair
[01:56:56] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[01:56:59] <o11c> Debian used 15 whole bits
[01:57:08] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[01:57:20] *** Quits: wycats (sid79@moz-5F4AA75A.irccloud.com) (Ping timeout)
[01:57:34] <sfackler> Havvy: it really did
[01:57:54] *** Quits: tboyt (sid23344@moz-5F4AA75A.irccloud.com) (Ping timeout)
[01:57:57] *** Joins: lpy (lpy@84D39BAD.183D133C.8C13C571.IP)
[01:58:35] *** Quits: dotfelix (dotfelix@676F0DF8.829DBEF3.40E092AA.IP) (Quit: )
[01:59:32] *** Joins: wycats (sid79@moz-5F4AA75A.irccloud.com)
[02:00:14] * Havvy uses 15 half bits.
[02:00:38] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[02:00:55] *** Joins: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca)
[02:01:38] *** Joins: tboyt (sid23344@moz-5F4AA75A.irccloud.com)
[02:01:49] *** Joins: mib_0vqov0 (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[02:03:29] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[02:03:54] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:05:40] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:06:06] <krdln> cmr: Ok, found a bug: https://gist.github.com/krdln/eb378aaddefe15817613
[02:07:24] <cmr> krdln: give_with_magic should be?
[02:07:29] *** Quits: jeff_ (jeff@moz-E6A9E8C9.hsd1.or.comcast.net) (Quit: jeff_)
[02:07:39] <krdln> cmr: oh, sorry
[02:07:46] *** Quits: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[02:07:47] <krdln> was compiling another file
[02:08:19] *** Quits: matp (matp@moz-16FE1E05.matp.at) (Ping timeout)
[02:08:29] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[02:09:10] *** Joins: phay (phay@16E8BAAB.D2C4A785.91986DB5.IP)
[02:09:38] *** Quits: Guest_ (textual@3E0487DF.D8252BC.9532F1CE.IP) (Quit: Textual IRC Client: www.textualapp.com)
[02:09:42] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[02:10:09] *** Quits: janra (Janus@1CDC5701.A48867D7.52E4E107.IP) (Ping timeout)
[02:10:20] *** Quits: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu) (Client exited)
[02:10:23] *** Quits: Guest___ (textual@moz-B0DA5BFF.hsd1.sc.comcast.net) (Client exited)
[02:10:40] <krdln> cmr: Seems like when NoSwap doesn't have reference inside it's really treated differently :(
[02:10:44] *** Joins: Guest_ (textual@moz-B0DA5BFF.hsd1.sc.comcast.net)
[02:10:46] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[02:10:47] *** Quits: rofrol (rofrol@moz-8C55345C.static.ptr.magnet.ie) (Quit: WeeChat 0.4.2)
[02:11:06] *** Quits: Rym (y@1AD9BB8E.D1C9731D.8772DA20.IP) (Ping timeout)
[02:12:05] <cmr> krdln: why do you want non-swappable things, anyway?
[02:12:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:12:36] *** Quits: mib_0vqov0 (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:13:51] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[02:13:52] <krdln> cmr: To make safe references to unsafe structure (nodes of tree with up-pointers). And ability to swap nodes between different trees would destroy safety
[02:14:26] <cmr> hm, that's true.
[02:14:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:14:33] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[02:14:59] <cmr> actually, no it isn't.
[02:15:07] <cmr> krdln: swapping only changes contents, it can never change identiy.
[02:15:15] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[02:15:15] <cmr> the up-pointer will still be pointing to the same thing, no?
[02:15:40] <krdln> (I updated gist, it's weird that when calling give_with directly it fails to compile, and just give is ok)
[02:16:16] <krdln> up-pointer may then point to another tree. Which may be modified and referenced node may disappear
[02:17:08] <cmr> can you share the code so far for your tree? I have a hard time envisioning what the code would need to look like for that to happen.
[02:17:45] <krdln> cmr: sorry, I don't have a code yet. only idea
[02:17:57] *** Quits: jadbaires (jadrian@74FB06AB.A66525C4.6119BA41.IP) (Connection reset by peer)
[02:18:03] *** Joins: jadbaires (jadrian@74FB06AB.A66525C4.6119BA41.IP)
[02:18:31] <cmr> I imagine your tree would be using ~T for allocation, and storing *T
[02:18:38] <krdln> yup.
[02:18:53] <cmr> and then you would have a get_mut which returns a &mut T
[02:19:14] <krdln> &mut (safe wrapper over ~T), to be precise
[02:19:15] *** Quits: jadbaires (jadrian@74FB06AB.A66525C4.6119BA41.IP) (Quit: Konversation terminated!)
[02:19:22] *** Joins: jadbaires (jadrian@74FB06AB.A66525C4.6119BA41.IP)
[02:19:36] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[02:19:37] *** Quits: Guest_ (textual@moz-B0DA5BFF.hsd1.sc.comcast.net) (Client exited)
[02:19:55] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Quit: Savago)
[02:19:56] <cmr> so swap would be changing to contents of the ~-box, but not the pointers themselves?
[02:19:58] *** Joins: Guest_ (textual@moz-B0DA5BFF.hsd1.sc.comcast.net)
[02:20:12] <cmr> what do you mean by &mut (...) ?
[02:20:19] <cmr> you surely wouldn't be returning a reference to the node
[02:20:24] <cmr> but rather its contents?
[02:20:32] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[02:20:46] <krdln> cmr: I don't now what i meant. I feel that I'm lost
[02:21:38] <krdln> I feel smoke coming from my head. Maybe I will try explain when I clarify the idea
[02:22:02] <cmr> I feel like you should try implementing :P
[02:22:17] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[02:22:56] <krdln> but, returning to the gist: https://gist.github.com/krdln/eb378aaddefe15817613 should I file a bug that it compiles?
[02:23:32] <krdln> (commented 11th fails to compile as expected)
[02:23:43] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[02:24:26] <krdln> when NoSwap would have some unsafe pointers to contents of str, that would be bad
[02:24:59] <cmr> no, I think it's accurate.
[02:25:06] *** Quits: soumyaC (uid15286@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[02:25:12] <cmr> you're taking an arbitrary lifetime and doing nothing with it
[02:25:26] <cmr> if you used the InvariantLifetime marker I bet that'd stop compiling.
[02:25:31] * cmr tries
[02:25:45] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:26:01] *** Quits: fmtq (fmt@moz-5769BD38.static.tpgi.com.au) (Ping timeout)
[02:26:23] <cmr> yup
[02:26:26] <krdln> cmr: Oh! so everytime i want to make lifetime guarantees on unsafe pointers, I have to use such marker? Good to know, thanks! :)
[02:27:03] *** Quits: IanCormac84 (User@9D0C98C4.64D641E5.67DFF8B4.IP) (Ping timeout)
[02:27:09] <cmr> krdln: yeah
[02:27:13] <cmr> krdln: this might be changing though
[02:27:26] <cmr> https://github.com/rust-lang/rfcs/pull/12
[02:27:43] *** Joins: IanCormac84 (User@7D82F384.64D641E5.67DFF8B4.IP)
[02:28:13] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:28:17] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[02:28:25] *** Joins: gwty (gwtypc@7D111845.F527CD2B.25B273F5.IP)
[02:28:29] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[02:29:04] *** Joins: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca)
[02:29:54] <krdln> cmr: So I finally made unswappables! And probably tomorrow i will realize i didn't need them
[02:30:47] <cmr> krdln: are you sure these are actually unswappable? can you update the gist?
[02:30:51] *** Joins: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu)
[02:31:10] *** Quits: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu) (Client exited)
[02:31:11] *** Joins: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu)
[02:32:00] <krdln> cmr: hmm, no. They are uncompilable now. I guess I should go to bed
[02:32:01] *** Quits: Guest_ (textual@moz-B0DA5BFF.hsd1.sc.comcast.net) (Client exited)
[02:32:22] *** Joins: Guest_ (textual@moz-B0DA5BFF.hsd1.sc.comcast.net)
[02:33:23] <cmr> Sleep well! :)
[02:33:41] <krdln> ty
[02:34:04] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[02:34:07] *** Joins: fmtq (fmt@moz-5769BD38.static.tpgi.com.au)
[02:34:38] *** Quits: Guest_ (textual@moz-B0DA5BFF.hsd1.sc.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:35:06] *** Joins: orospakr (orospakr@moz-A57EF4CD.cpe.net.cable.rogers.com)
[02:35:49] *** Joins: wolfspaw (wolfspaw@746E5425.A605C5CA.EDCDF352.IP)
[02:35:49] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:35:49] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[02:36:03] *** Quits: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[02:36:32] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[02:37:08] *** Quits: tyna (liadon@moz-BB1BAD9A.dynamic.chello.pl) (Quit: Leaving.)
[02:39:49] *** Quits: espindola (espindola@8EC99D26.4B7A7726.A2E931B1.IP) (Connection reset by peer)
[02:40:01] <wolfspaw> I'm following the rust official tutorial and I have a doubt: since the pipe operator '|' on match is the same symbol as the bitwise-or operator '|', doesn't that causes conflict if one wants to use a bitwise-or in one of the match arms?
[02:40:12] *** Joins: espindola (espindola@8EC99D26.4B7A7726.A2E931B1.IP)
[02:40:18] *** Joins: onelson (owen@18CF7301.95770028.5B6BFE7D.IP)
[02:40:30] <kmc> wolfspaw: on the left of =>?
[02:40:36] <wolfspaw> yes
[02:40:44] <kmc> you can't put expressions there, only patterns, unless you mean in a guard
[02:40:55] <kmc> and the guard will be distinguished by coming after "if"
[02:40:57] *** Quits: nszceta (nszceta@moz-BD0004B6.hfc.comcastbusiness.net) (Quit: Textual IRC Client: www.textualapp.com)
[02:41:05] <kmc> when you write x | y | z if p, the guard applies to the whole thing
[02:41:24] <wolfspaw> hm, thanks. Makes sense
[02:41:39] <wolfspaw> I mean as expression, but now it makes sense that only patterns are valid
[02:42:18] *** Quits: jadbaires (jadrian@74FB06AB.A66525C4.6119BA41.IP) (Quit: Konversation terminated!)
[02:42:22] *** Quits: dapz (textual@moz-ADE1780.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:42:51] *** Quits: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu) (Client exited)
[02:44:19] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[02:45:36] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:46:19] *** Joins: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu)
[02:47:08] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[02:47:19] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[02:47:33] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Ping timeout)
[02:48:44] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:48:55] *** Parts: krdln (krdln@moz-C271714F.dynamic.chello.pl) ()
[02:49:01] *** Quits: espindola (espindola@8EC99D26.4B7A7726.A2E931B1.IP) (Input/output error)
[02:49:40] *** Joins: libfud (libfud@moz-73F272E4.res-cmts.eph2.ptd.net)
[02:49:51] *** Joins: krdln (krdln@moz-C271714F.dynamic.chello.pl)
[02:49:51] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[02:49:59] *** Parts: krdln (krdln@moz-C271714F.dynamic.chello.pl) ()
[02:50:41] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[02:50:45] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:50:46] *** Joins: brontron_ (brontron@moz-C8D86903.tc.ph.cox.net)
[02:51:06] *** Quits: brontron_ (brontron@moz-C8D86903.tc.ph.cox.net) (Quit: leaving)
[02:51:27] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[02:51:27] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[02:52:20] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[02:52:20] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Connection reset by peer)
[02:55:37] *** Quits: orospakr (orospakr@moz-A57EF4CD.cpe.net.cable.rogers.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:55:44] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[02:56:09] *** Quits: wolfspaw (wolfspaw@746E5425.A605C5CA.EDCDF352.IP) (Connection reset by peer)
[02:56:17] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:57:09] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[02:57:31] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[02:57:38] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[02:57:39] *** Joins: Rufflewind (rf@moz-4556AD29.lightspeed.lnngmi.sbcglobal.net)
[02:58:02] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[02:58:47] *** Quits: oxum (anonymous@7120F591.A3F7A334.C28326FD.IP) (Quit: ...)
[02:58:59] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[02:59:07] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[02:59:14] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[02:59:20] *** Quits: derek_c (derek@moz-92A8B4BF.cit.cornell.edu) (Ping timeout)
[02:59:21] *** Quits: cgaebel (clark@moz-F9D89110.nyc.res.rr.com) (Ping timeout)
[02:59:38] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:00:48] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[03:02:06] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[03:02:59] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[03:04:34] *** Joins: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com)
[03:05:32] <dougxxx> mm... whats the best way to feature-suggest for cargo?
[03:05:41] *** Quits: Jesse (jruderman@moz-62518563.mtv2.mozilla.com) (Quit: Jesse)
[03:06:02] *** Joins: matp (matp@moz-16FE1E05.matp.at)
[03:06:33] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[03:06:34] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[03:10:13] *** Quits: saml_ (saml@moz-AFAADF83.nycmny.east.verizon.net) (Ping timeout)
[03:11:27] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:12:29] *** Joins: Anupkumar (uid16774@moz-A42E5B7B.irccloud.com)
[03:13:04] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[03:13:39] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:14:25] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:14:43] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:16:41] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Quit: Leaving)
[03:16:48] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:18:48] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[03:19:01] *** Quits: kris (kris@moz-6D20263F.fullrate.dk) (Ping timeout)
[03:19:21] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[03:22:34] *** Joins: ChrisOei (ChrisOei@moz-30D80888.hsd1.ca.comcast.net)
[03:23:13] *** Joins: dapz (textual@moz-F958911.hsd1.ca.comcast.net)
[03:24:03] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:24:20] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:24:24] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[03:26:53] *** Joins: p1start (rewi@moz-E7F3D014.org)
[03:28:14] <bjz> dougxxx: maybe on the cargo repo?
[03:28:38] <dougxxx> I can't remember the url. I was just searching for it...
[03:28:47] <dougxxx> wans't it on wycat's page?
[03:28:52] *** Joins: IanCormac841 (User@6C855FBE.64D641E5.67DFF8B4.IP)
[03:28:54] *** Quits: IanCormac84 (User@7D82F384.64D641E5.67DFF8B4.IP) (Ping timeout)
[03:28:55] <cmr> dougxxx: #rustpkg-wg
[03:31:18] *** Quits: untitaker (untitaker@moz-B8D9C20B.adsl.highway.telekom.at) (Ping timeout)
[03:31:29] *** Parts: robhobbes (robert@moz-9B0672CB.hsd1.ut.comcast.net) ()
[03:32:40] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[03:32:40] *** ChanServ sets mode: +o jdm
[03:32:47] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[03:33:30] *** Quits: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net) (Ping timeout)
[03:34:41] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[03:35:43] *** Quits: lpy (lpy@84D39BAD.183D133C.8C13C571.IP) (Ping timeout)
[03:38:42] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:38:47] *** Joins: untitaker (untitaker@moz-8F4F4BAA.adsl.highway.telekom.at)
[03:38:48] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:39:38] *** Joins: lpy (lpy@3B6F1F1D.F09091A8.1348A864.IP)
[03:40:49] *** Joins: dranov (dranov@C022D95A.1298A9BE.D602D2C5.IP)
[03:41:34] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[03:41:34] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[03:42:02] *** Quits: eibwen (kvirc@moz-6D1D100D.dip0.t-ipconnect.de) (Ping timeout)
[03:42:07] <Florob> I wonder… has anyone here read my DST blog post (<http://blog.babelmonkeys.de/2014/03/18/dst.html>)? Some people apparently do, but I have zero feedback. I sort of expected someone to tell me I'm blatantly wrong about $thing by now ;)
[03:43:26] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:44:10] *** Quits: reverend_paco (chatzilla@moz-FDBE15EC.hsd1.ma.comcast.net) (Ping timeout)
[03:44:41] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:44:52] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:46:22] *** Joins: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net)
[03:47:22] *** Joins: oxum (anonymous@EDA212DD.8F547608.520CDC98.IP)
[03:47:40] *** Quits: oxum (anonymous@EDA212DD.8F547608.520CDC98.IP) (Quit: Bye..)
[03:47:54] *** Joins: oxum (anonymous@EDA212DD.8F547608.520CDC98.IP)
[03:48:01] *** Quits: quux00 (uid24415@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[03:48:20] <cmr> Florob: just read it (and posted to reddit)
[03:48:57] <cmr> The only thing I'm unsure about is the last bit about trait objects.
[03:49:03] <cmr> for exmaple you can't have Rc<Trait> ?
[03:49:13] <cmr> so they don't behave like DST
[03:50:51] <Florob> That is indeed true. In fact the post deliberately glances over the interaction with generics, so that may or may not be fine.
[03:51:06] *** Quits: mib_j2jzfu (Mibbit@moz-1BB03833.lnk.telstra.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:51:12] *** Joins: libregeekingkid (quassel@F3A986D5.978FEE08.CC7BB87A.IP)
[03:51:27] <cmr> well sure, but the rest of it is still accurate even with generics :p
[03:52:19] *** Quits: libregeekingkid (quassel@F3A986D5.978FEE08.CC7BB87A.IP) (Client exited)
[03:53:29] *** Quits: djvj|home (kvijayan@moz-203FEBEE.dreamhost.com) (Quit: Lost terminal)
[03:53:39] *** Quits: brontron (brontron@moz-C8D86903.tc.ph.cox.net) (Ping timeout)
[03:53:55] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[03:54:16] * Florob goes and rewords that
[03:55:15] *** Quits: IanCormac841 (User@6C855FBE.64D641E5.67DFF8B4.IP) (Ping timeout)
[03:55:30] *** Quits: zz_kimundi (kimundi@moz-4CD428D2.dip0.t-ipconnect.de) (Ping timeout)
[03:56:22] *** Joins: IanCormac84 (User@32F5F989.64D641E5.67DFF8B4.IP)
[03:56:22] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:58:01] *** Quits: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca) (Quit: canhtak)
[03:58:44] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:58:59] *** Joins: zz_kimundi (kimundi@moz-B62309E6.dip0.t-ipconnect.de)
[03:59:27] *** zz_kimundi is now known as kimundi
[04:00:26] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[04:00:50] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[04:06:10] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[04:06:24] *** Joins: brontron (brontron@moz-C8D86903.tc.ph.cox.net)
[04:07:31] *** Joins: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[04:08:12] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[04:10:02] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[04:10:20] *** Quits: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu) (Client exited)
[04:12:09] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:14:31] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:14:52] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (No route to host)
[04:19:05] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:20:04] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[04:20:33] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[04:21:28] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:22:14] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[04:22:14] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[04:22:55] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[04:23:49] <strcat> doomlord_: btw x86 has fmin/fmax instructions
[04:23:51] <strcat> even vector ones
[04:23:56] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[04:24:12] <strcat> so I don't think using the min/max methods on floats will be slower, at least once LLVM learns to deal with them as well as GCC
[04:24:26] <strcat> if anything they will be faster than the std::cmp ones
[04:24:28] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[04:24:32] *** Joins: Mardak (Mardak@4851473D.BD9ECD5D.97D164AB.IP)
[04:24:33] <strcat> (and correct)
[04:25:24] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[04:25:51] *** Quits: lpy (lpy@3B6F1F1D.F09091A8.1348A864.IP) (Client exited)
[04:26:47] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:27:48] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[04:28:08] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:29:52] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:34:48] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[04:35:44] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[04:35:56] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[04:36:44] *** Quits: dranov (dranov@C022D95A.1298A9BE.D602D2C5.IP) (Ping timeout)
[04:37:43] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[04:37:58] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[04:38:20] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[04:38:50] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[04:38:51] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[04:40:03] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[04:40:41] *** Quits: phay (phay@16E8BAAB.D2C4A785.91986DB5.IP) (Connection reset by peer)
[04:40:46] <tautologico> wasn't ~[T] going to be a fixed-size vector, but with size determined at runtime, after DSTs land?
[04:41:01] <cmr> yes
[04:41:03] <strcat> yes, but first it will be removed
[04:41:24] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[04:41:43] <tautologico> I was reading the above blog post and it seems to say otherwise
[04:42:01] <strcat> it won't exist as a distinct type with DST
[04:42:09] <cmr> ~[T] won't be special
[04:42:12] <strcat> ~T exists, and [T] will be a type
[04:42:14] <cmr> it will be ~T with T = [T]
[04:42:18] <strcat> so ~[T] will exist just as ~int exists
[04:42:25] <tautologico> yes I understood that
[04:43:44] *** Quits: andrewd18 (andrew@moz-DAC9D29F.wi.res.rr.com) (Quit: Leaving.)
[04:43:54] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[04:43:56] <tautologico> I think I misunderstood the wording
[04:44:29] *** Joins: phay (phay@16E8BAAB.D2C4A785.91986DB5.IP)
[04:44:55] <brson> it might be nice to have a roadmap of what's going to happen to the langauge in order to land DST
[04:45:05] <brson> seems like it's going to be bad in various ways for a while
[04:45:10] <cmr> yeah
[04:46:36] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:46:53] *** Quits: brontron (brontron@moz-C8D86903.tc.ph.cox.net) (Ping timeout)
[04:50:14] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[04:50:18] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[04:51:19] *** Joins: brontron (brontron@moz-C8D86903.tc.ph.cox.net)
[04:52:55] *** Quits: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[04:56:37] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[04:58:25] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[04:59:38] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[04:59:57] *** Joins: derek_c (derek@moz-16A6DFBC.cit.cornell.edu)
[05:00:54] *** Joins: thorncp (thorncp@moz-BF22C6B.members.linode.com)
[05:01:24] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[05:03:11] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[05:03:21] *** Quits: heftig (heftig@moz-38012B68.dip0.t-ipconnect.de) (Ping timeout)
[05:03:46] *** Joins: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[05:04:52] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:06:19] *** Joins: heftig (heftig@moz-530D04BB.dip0.t-ipconnect.de)
[05:07:17] *** Joins: jdavis_ (jdavis@B1A04851.559FC6D5.439315E1.IP)
[05:07:18] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:08:14] <jdavis_> What does something like "pub mod foo;" mean?
[05:08:29] <strcat> creates a module called foo from the file foo.rs
[05:08:30] <cmr> jdavis_: http://static.rust-lang.org/doc/master/tutorial.html#crates-and-the-module-system
[05:08:31] <strcat> and it's public
[05:08:34] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[05:09:00] <jdavis_> So is everything inside public or is the module exported outside of whatever module says "pub mod foo;"?
[05:09:10] <dougxxx> the latter
[05:09:18] <jdavis_> cmr: thank you, I think I read that, but I was a bit confused over this point.
[05:09:42] <jdavis_> OK, so you still need to put a "pub" on everything inside that you wish to export?
[05:10:01] <dougxxx> yep; I'm not sure, you might still be able to go pub extern { ... } ?
[05:10:16] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[05:10:16] <jdavis_> I am trying to move a trait implementation to a module and I'm getting compile errors.
[05:10:24] <dougxxx> ...but I'm pretty sure you're supposed to prefix anything publci with pub
[05:10:30] <jdavis_> OK
[05:11:12] <jdavis_> I am using rust-http and I'm implementing the Server trait.
[05:11:37] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[05:12:01] <jdavis_> I put that implementation in a separate file called "server.rs" and in main.rs I did "mod server;".
[05:12:08] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:12:27] <dougxxx> Are you using it too? ie. use server::...?
[05:12:33] <dougxxx> mod x just imports a file.
[05:12:43] <dougxxx> to the set of loaded files
[05:12:56] <dougxxx> You still have to import symbols using 'use'
[05:13:00] <jdavis_> From main.rs I am doing "server::MyServer.serve_forever()"
[05:13:12] <jdavis_> OK, let me try that.
[05:13:21] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[05:13:25] <strcat> dougxxx: you don't ever *have* to have `use` statements
[05:13:34] <dougxxx> oh?
[05:13:44] <dougxxx> how so?
[05:13:46] <strcat> dougxxx: use statements just bring a name from a scope into the current scope
[05:13:52] <sfackler> strcat: you do need to to pull traits in scope
[05:13:59] <strcat> that's true
[05:14:03] <strcat> so instead of writing foo::bar(1, 2); foo::bar(5, 10);
[05:14:10] <strcat> you do use foo::bar; bar(1, 2); bar(5, 10);
[05:14:20] <cmr> (::foo::bar(1, 2))
[05:14:24] <strcat> that's all `use` is for (beyond the trait example, which isn't applicable in this case)
[05:14:36] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:14:49] <dougxxx> mm... don't you need to use ::foo::..
[05:14:50] <jdavis_> I think it might be applicable because I'm trying to implement a trait.
[05:15:05] <strcat> dougxxx: no, use statements are always absolute
[05:15:17] <strcat> cmr was just pointing out the difference
[05:15:22] <dougxxx> no, as in, I can't just go: impl Foo for x
[05:15:25] <strcat> in expressions you need to ask for absolute
[05:15:29] <dougxxx> I have to impl ::foo::Foo for x
[05:15:50] <dougxxx> not impl foo::Foo for x
[05:15:59] <strcat> foo::Foo would work if foo was in the current scope
[05:16:11] <dougxxx> And calling mod foo does that?
[05:16:16] * dougxxx tries it
[05:16:24] <strcat> :: makes it an absolute path (from the top-level crate) rather than a relative one
[05:16:26] *** Quits: [o__o] (~o__o@604A2740.DB688352.F4ADE383.IP) (Ping timeout)
[05:16:41] <strcat> dougxxx: mod foo; declares a module called foo in the current scope
[05:16:48] <strcat> means `foo` is a name in the current scope
[05:17:04] <strcat> if you're in a submodule and `mod foo` is declared in the top-level crate, then ::foo would be necessary
[05:17:12] <dougxxx> are you serious? mod foo is semantically equivalent to mod foo; use foo; ?
[05:17:16] <strcat> no
[05:17:18] <dougxxx> I'm surprised
[05:17:31] <strcat> dougxxx: you're missing what use statements are
[05:17:43] <strcat> they bring a name from another scope into the current scope
[05:17:54] <strcat> if you do `mod foo;`, then foo is already in the current scope
[05:17:59] <strcat> works the same way with functions, or types
[05:18:15] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[05:18:20] <strcat> you don't need to `use` a function/module/type to make use of it
[05:18:39] <strcat> it's only to save typing out the full path each time
[05:18:58] <strcat> use foo::bar; is like doing `ln -s /foo/bar bar'
[05:19:02] <dougxxx> It just has to be a valid symbol in the current scope; I get it. I'm just surprised. I know mod foo { .. } leaves a foo in the local scope, but I thought mod foo; (imports file) did not.
[05:19:24] <strcat> mod foo; is equivalent to mod foo { /* contents of foo.rs */ }
[05:19:47] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[05:19:49] <dougxxx> well, there you go. Learn something every day~ :)
[05:19:50] <jdavis_> http://pastebin.com/qDcxQjmF
[05:20:18] <jdavis_> Both files in one paste.
[05:20:26] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[05:20:30] <jdavis_> Hacked from a rust-http example.
[05:21:30] <dougxxx> mm... shouldn't serve_forever() be a static method?
[05:21:51] <dougxxx> or some such?
[05:22:10] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[05:22:12] <dougxxx> (eg. create an instance of EVReserve before calling a method on it?)
[05:22:30] *** Quits: brontron (brontron@moz-C8D86903.tc.ph.cox.net) (Ping timeout)
[05:22:40] <jdavis_> dougxxx: it worked before I put it into a separate file
[05:22:56] <cmr> jdavis_: you need a `use http::server::Server` for the methods from Server to be callable.
[05:24:10] <jdavis_> I tried doing that and I get the same error:  type `server::EVReserve` does not implement any method in scope named `serve_forever`
[05:24:31] <jdavis_> I assume you mean in the line: "impl .."
[05:25:21] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[05:25:30] *** Joins: ecr (chatzilla@E940BDD3.FBC7597F.11F8506F.IP)
[05:25:52] <cmr> no, in main.rs
[05:27:19] *** Quits: p1start (rewi@moz-E7F3D014.org) (Ping timeout)
[05:27:19] <jdavis_> cmr: thank you! works.
[05:27:25] *** Quits: philix (felipe@moz-D63CAE5D.user.veloxzone.com.br) (Ping timeout)
[05:27:28] *** Joins: aravindavk (aravinda@moz-BD0CADEE.redhat.com)
[05:27:33] <jdavis_> Can you explain a little more please?
[05:27:33] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:28:20] <jdavis_> It seems counterintuitive that I need to introduce a "use" line for a symbol that isn't referenced anywhere in the file.
[05:28:41] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:28:55] <cmr> jdavis_: as part of how we resolve conflicts between separate traits defining methods with the same name, a trait needs to be in scope to call the methods it defines.
[05:30:00] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:30:21] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[05:30:32] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[05:31:02] *** Joins: [o__o] (~o__o@604A2740.DB688352.F4ADE383.IP)
[05:31:37] <jdavis_> OK. That makes sense. A little confusing for a beginner encountering that error, but I guess once you know it's easy to find the problem.
[05:31:46] <jdavis_> Thank you.
[05:32:10] <ecr> Rust just got a plug in #haskell as a C/C++ alternative
[05:33:39] <jdavis_> ecr: It seems like one of the few alternatives out there, no?
[05:33:39] <eddyb> heh, took me a while to parse that correctly. nice :)
[05:33:53] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[05:34:10] <ecr> yeah, but I was just surprised to see a recommendation in the wild
[05:35:36] <jdavis_> ecr: I don't think I would be trying to learn rust right now except for seeing random comments like that around.
[05:35:46] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[05:36:43] <ecr> oh really? neat
[05:36:57] <ecr> I don't go looking very often
[05:37:03] *** Quits: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru) (Ping timeout)
[05:37:11] <jdavis_> Honestly I didn't think it was possible to have memory safety and memory control in a practical language.
[05:37:34] <cmr> hopefully rust can live up to the last bit
[05:37:41] <jdavis_> So when someone mentioned that rust offered that, I did kind of a double-take.
[05:38:15] <ecr> you can do some pretty crazy things with sufficiently powerful type systems, but it's difficult to make them usable by us mere mortals
[05:38:56] <ecr> we have a pretty good balance here methinks
[05:40:04] <ecr> affine types + regions is a pretty powerful combination
[05:40:39] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[05:41:06] <ecr> assuming it's actually sound of course
[05:41:09] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[05:41:16] * ecr goes back to the proof mines
[05:41:39] <jdavis_> Yeah, I hope so. The type system doesn't have to be easy; to be "practical" it just has to be at least as usable as the C++ type system, which is not particularly easy either.
[05:41:58] <eddyb> ecr: oh, you are currently working on the redex model, right?
[05:42:05] <ecr> eddyb: yep
[05:42:21] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[05:44:02] *** Joins: libregeekingkid (quassel@F3A986D5.978FEE08.CC7BB87A.IP)
[05:44:10] <ecr> jdavis_, conveniently physical metaphors abound for these kind of type system features
[05:44:10] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[05:44:19] <ecr> so explaining them isn't too terribly abstract
[05:44:56] <Havvy> Not like 'monads'.
[05:45:02] <ecr> but it takes a while to build up an intuition for how to use them
[05:45:09] <ecr> haha, monads
[05:45:13] <Havvy> Unless monads really are like burritos. ;)
[05:45:22] <cmr> I've eaten a lot of burritos
[05:45:25] <ecr> they have a much harsher reputation than they deserve IMO
[05:45:27] <cmr> and they taste nothing like monads
[05:45:29] <sfackler> monads are just like burritos
[05:45:54] <myname> monads are just monoids in the category of endofunctors
[05:46:06] <ecr> yeah, what's the problem?
[05:46:22] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[05:46:31] <ecr> but seriously, I can attempt an easier explanation of monads if the channel feels up to it
[05:46:33] <Havvy> I know what a monoid is. Now I just need to figure out what a category is and what the category of endofunctors is.
[05:47:03] <strcat> myname: just show someone std::kinds::marker
[05:47:32] <strcat> although it's well documented so it's not that bad ;p
[05:47:34] <myname> strcat: do i want to know what i will find there?
[05:47:37] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:47:41] <eddyb> myname: variance
[05:47:44] <ecr> Havvy, category = thing with composition and identity. functor = mapping between categories. endofunctor = source and destination category are the same
[05:47:44] <eddyb> and peace
[05:47:48] * jdavis_ resists the urge to make an uninformed comment about why people think monads are hard to understand and how to fix that.
[05:48:07] <eddyb> monads aren't hard. and some of them are cool
[05:48:24] <eddyb> but the IO monad screams of idiosyncrasy to me
[05:48:39] <myname> endofunctors are just endomorphisms in the category of categories *g*
[05:48:44] * jdavis_ is not a haskell programmer, but got to the point where I thought: "Monads aren't so bad" but didn't quite make it to the "I'll write a blog post explaining them" ;-)
[05:48:59] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[05:48:59] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[05:49:05] <ecr> eddyb: the way to think of the IO monad is a State monad where the state is the Universe
[05:49:17] <eddyb> ecr: but that's the problem...
[05:49:22] <ecr> how so?
[05:49:28] <strcat> ecr: meh, no haskell is pure
[05:49:29] <eddyb> computers don't work like that
[05:49:37] <strcat> using memory/time/power is visible externally ;P
[05:49:46] <strcat> haskell program eats all memory -> OOM situation
[05:49:48] <strcat> "pure"
[05:49:51] *** Joins: mindcat_ (mindcat@AA41C5D8.3B6AB676.857BDFA9.IP)
[05:49:55] <Havvy> composition?  Like `f () g () h`  (where () is that circle operator in math)?
[05:50:01] <eddyb> it's a crazy abstraction just to allow the code *you* write to be considered pure
[05:50:08] <eddyb> Havvy: any operation, I think
[05:50:21] <strcat> you can have a useful definition of purity for the purpose of optimization, but it's not very true purity ;P
[05:50:32] <eddyb> yeah, and I wouldn't mind that
[05:50:35] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:50:39] * strcat wouldn't consider a program causing the CPU fan to spin up to 100% to be pure
[05:50:44] <eddyb> or associated constants in traits, instead of a vtable call
[05:51:00] *** Quits: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net) (Ping timeout)
[05:51:17] <eddyb> s/vtable/virtual call (since the vtable would still be used)
[05:51:35] <ecr> Havvy: function composition (functions being mappings between elements of a category)
[05:52:23] <ecr> strcat: sure, but that's basically unworkable unless you've figured out a way to reify performance characteristics into the type system
[05:52:29] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:52:51] <ecr> which people have tried to do
[05:52:56] <ecr> but haven't really succeeded yet
[05:54:28] <eddyb> ecr: sounds like something you could give more details on ;)
[05:54:36] <cmr> #rust-offtopic !
[05:54:53] *** Joins: magg (magg@71B9F7AA.109D2178.3D0AE249.IP)
[05:54:56] <eddyb> cmr: but how is PL theory offtopic?
[05:55:37] <Havvy> O(n) find<T>(element: T, list: [T]) -> Maybe(T) { O(1) let ix = 0; ... }        ;)
[05:55:38] <ecr> eddyb: the performance thing? I don't remember details, but I could try to look up something. The main reason it's hard is the same reason why we can't automatically analyze the complexity of algorithms.
[05:56:14] <ecr> Havvy: that's kind of the idea, but things get complicated once you have loops/recursion
[05:56:44] <magg> hi. i'm trying to push two values to a data structure in a loop and then sort that structure, based on one of the two values. any other way to do this without using TreeMap
[05:56:45] *** Quits: tcsc (tcsc@moz-5E71BAD9.hsd1.ma.comcast.net) (Quit: computer sleeping)
[05:56:49] <ecr> and your type system comes back with "something between O(1) and nonterminating"
[05:56:53] <cmr> eddyb: this is a support channel for the Rust programming language
[05:57:03] <cmr> and related ecosystem
[05:57:41] <ecr> magg: could you explain what you mean by "sort based on one of the two values"?
[05:57:43] <Havvy> ecr:  Yeah...any time you have a loop that could theoretically be infinite, such as any interactive program...types like that are useless.
[05:58:49] <ecr> Havvy: the dependent types people have done a lot of work on nontermination checkers (obviously only semidecidable), but most of those languages don't care about performance.
[05:59:03] <strcat> cmr: meh, tangentially related is close enough imo, as long as it's not getting in the way of helping people by adding too much noise
[05:59:05] <magg> ecr, so lets say i have a struct with value x and y. i want to this data structure of structs by the y value
[05:59:17] <strcat> have to talk about off-topic things when no one is around ;)
[05:59:44] <ecr> magg: so sorting by the second element of a pair for example?
[06:00:00] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[06:00:04] <magg> ecr: yeah that's it
[06:00:29] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[06:01:14] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[06:01:19] <cmr> strcat: I agree
[06:01:48] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[06:02:10] <magg> vectors have the sort_by method. but can i have a vector of structs?
[06:02:17] <ecr> magg: so what you need to do is define a TotalOrd instance for your datatype, which will let you sort a vector of them
[06:02:42] <magg> ecr: oh
[06:03:03] <ecr> magg: if you want to be able to sort in different ways, then you'll need multiple TotalOrd instances. the best way to do that is to create newtype wrappers and define the instances on the wrapped datatypes.
[06:03:15] <ecr> here's an example of what I mean:
[06:03:20] <strcat> rusti: #[deriving(Eq, Ord, TotalEq, TotalOrd)] struct Foo(u32, u64); Foo(2, 5) < Foo(5, 3)
[06:03:21] -rusti- true
[06:03:27] <strcat> rusti: #[deriving(Eq, Ord, TotalEq, TotalOrd)] struct Foo(u32, u64); Foo(2, 5).cmp(&Foo(5, 3))
[06:03:27] -rusti- Less
[06:03:45] <ecr> let's say you have a type Pair(int, u8) and you want to be able to sort by either the ints or the u8s
[06:03:49] <strcat> (ofc you could do it yourself with impl, but it's easier to just order the fields by lexicographic sort order and derive it)
[06:04:12] <ecr> you can define some newtype wrappers:
[06:04:23] <ecr> struct First(Pair);
[06:04:26] <ecr> struct Second(Pair);
[06:04:40] <ecr> and write implementations of TotalOrd for First and Second
[06:04:58] <ecr> and then you can wrap your Pair in either First or Second, depending on which version you want to use
[06:05:16] <ecr> so you'd have a vector: ~[First] or ~[Second]
[06:05:20] <ecr> you can sort that vector
[06:05:35] <ecr> and then unwrap the contents to get a ~[Pair] sorted in the way you wanted
[06:05:45] <ecr> does that make sense?
[06:06:00] <ecr> (don't be afraid to ask more questions!)
[06:06:17] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[06:06:44] <magg> wow man thanks.. makes sense, i'll try it.. hehe questions will arise I'm sure
[06:07:01] <ecr> magg: no problem :)
[06:07:29] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[06:07:30] <ecr> I'll write up some example code you can refer to
[06:08:59] *** Quits: JustAPerson (JustAPerso@EAC6AADA.C1481309.D9401097.IP) (Ping timeout)
[06:09:12] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[06:09:12] *** Joins: JustAPerson (JustAPerso@EAC6AADA.C1481309.D9401097.IP)
[06:09:26] <magg> ecr: cool many thanks!
[06:10:25] <dougxxx> Idly, if you're careful would be actually be faster to write a sort algorithm using unsafe pointers and wrap that in a safe api?
[06:10:32] <dougxxx> No borrowing / moving things around
[06:10:45] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Input/output error)
[06:10:49] <ecr> only if you're absolutely sure that it's safe
[06:10:55] <cmr> probably not tbh
[06:11:05] <cmr> depending on the sort algorithm
[06:11:05] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[06:11:09] <cmr> usually you're just going to need swap..
[06:11:10] <ecr> seconded
[06:11:11] <dougxxx> If you have a fixed sized array and you're borrowing the entire thing as mut, it'd be pretty safe
[06:11:20] <strcat> you could definitely have a faster insertion sort with unsafe code, and that's the heart of a fast merge/quick/tim sort
[06:11:29] <strcat> unless we expose 'rotate' on vectors
[06:11:59] <strcat> (and even then it might output an unnecessary bounds check :p)
[06:12:01] *** Quits: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:12:22] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[06:13:25] *** Joins: benjamin_ (benjamin@moz-1478BC90.dip0.t-ipconnect.de)
[06:14:03] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[06:14:22] *** Joins: ahunt (ahunt@moz-6D6D79D6.cable.virginm.net)
[06:14:47] *** Joins: lpy (lpy@186A8F3A.F09091A8.1348A864.IP)
[06:16:25] *** Joins: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net)
[06:16:25] *** ChanServ sets mode: +o huon
[06:17:11] <ecr> did we change Self?
[06:17:18] <ecr> for impls?
[06:17:33] <ecr> rustc is claiming "use of undeclared type name `Self`"
[06:17:41] <eddyb> ecr: did it ever work?
[06:17:59] <ecr> oh, maybe it was just in trait definitions
[06:17:59] <cmr> ecr: you can't use it in impls, only in trait definitions.
[06:18:06] <cmr> right
[06:18:06] <ecr> righto, thanks
[06:18:44] * ChrisMorgan has his bronze [rust] badge on Stack Overflow, #2 to get it (after huon): http://stackoverflow.com/help/badges/3289/rust ☺
[06:18:48] <Havvy> It's implicit in impls.
[06:19:04] *** Joins: sfackler_ (sfackler@moz-515ADCC4.lightspeed.sntcca.sbcglobal.net)
[06:19:17] <ecr> can we destruct self yet?
[06:19:22] <cmr> no
[06:19:29] <ecr> :(
[06:19:38] <cmr> see https://github.com/mozilla/rust/pull/12566
[06:19:38] <eddyb> someone proposed the @ syntax. not sure why that got turned down
[06:19:55] <eddyb> rusti: let x @ (a, b) = (1, 2); (x, a, b)
[06:19:56] -rusti- ((1, 2), 1, 2)
[06:20:10] <eddyb> so why is self @ pattern not valid syntax to have?
[06:20:12] <ecr> the mozdevs have a pretty visceral reaction to the @ symbol after @pointers
[06:20:17] <eddyb> haha
[06:20:23] <eddyb> ecr: but we already use it!
[06:20:26] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[06:20:39] *** Parts: sfackler_ (sfackler@moz-515ADCC4.lightspeed.sntcca.sbcglobal.net) ()
[06:20:40] <eddyb> the commit wasn't adding new syntax, really, it was making it consistent
[06:21:08] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:21:22] <eddyb> s/commit/PR
[06:21:30] <cmr> it falls out of UFCS
[06:21:33] <cmr> which is why it was rejected
[06:22:03] <eddyb> yeah, but UFCS is its own can of worms
[06:22:08] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[06:22:10] *** Joins: edwardw (edwardw@BF6575DE.1B2F6624.7F41E82D.IP)
[06:22:40] <cmr> the RFC is going to be accepted soon
[06:23:02] <strcat> rusti: version
[06:23:02] -rusti- rustc 0.10-pre (891eab9 2014-03-18 11:52:31 -0700)
[06:23:44] * huon is so infinitely confused
[06:23:54] <huon> this shouldn't be segfaulting... but it is :/
[06:23:58] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[06:24:26] <eddyb> huon: thanks for the 200MB drop, btw :D
[06:24:40] <cmr> huon: miscompilation!
[06:24:45] <eddyb> not sure why it makes that much of a difference, TBQH
[06:24:48] <cmr> blame everything on the compiler
[06:25:29] *** Quits: dapz (textual@moz-F958911.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:25:31] <edwardw> ty_trait PR -200MB memory? amazing
[06:25:59] <huon> edwardw: and ty_closure
[06:26:06] <huon> but mainly try_trait yeah
[06:26:21] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[06:26:42] <huon> eddyb: because 98% of the millions of sty's we have were wasting 70 bytes
[06:26:47] *** Joins: dapz (textual@moz-F958911.hsd1.ca.comcast.net)
[06:26:48] * edwardw pulls and rebases
[06:27:21] <Havvy> What just went down 200MB?
[06:27:24] <eddyb> huon: I computed the difference, it was like 73MB
[06:27:27] <cmr> rustc's memory usage.
[06:27:47] <Havvy> Will this affect compilation time of rustc itself?
[06:27:47] <huon> eddyb: you presumably weren't accounting for second-order effects
[06:27:50] <eddyb> huon: must be ripple effect from allocator size classes
[06:27:52] <huon> (like smaller sty allocations)
[06:28:04] <huon> or, the stats of librustc have changed recently
[06:28:29] <Havvy> Or is this just a memory win?
[06:28:31] <huon> Havvy: maybe?
[06:28:42] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[06:28:47] <cmr> Havvy: I noticed rustc to be significantly faster with that pr...
[06:28:47] <huon> well, it will definitely save time on borderline memory systems
[06:28:50] <cmr> but I'm not sure.
[06:28:57] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[06:28:58] <huon> (because they'll be swapping less)
[06:29:05] *** Joins: p1start (rewi@moz-E7F3D014.org)
[06:29:12] <Havvy> I've got 12gbs. I'm not hurting for memory.
[06:29:34] <Havvy> But rebuilding rustc takes like 3 or 4 hours.
[06:29:38] *** Quits: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[06:29:40] *** Quits: kanaka (joelm@moz-99213C1D.lightspeed.ftwotx.sbcglobal.net) (Ping timeout)
[06:29:45] <eddyb> Havvy: are you doing both stages?
[06:29:45] <huon> 3 to 4 hours??
[06:29:47] <cmr> that's absurd
[06:29:49] <huon> woaah
[06:29:53] <whitequark> Havvy: that's weird
[06:30:08] <cmr> it shouldn't take more than half an hour, hour tops with an llvm build
[06:31:07] <Havvy> It might be IO bound. I am doing it in a VM.
[06:31:24] <whitequark> ah, that explains it.
[06:31:25] <huon> the build doesn't do much IO
[06:31:36] <huon> just the files at the start and then a few at the end
[06:31:56] <huon> by far the largest time (70-80%) is CPU bound LLVM optimisations
[06:32:04] <whitequark> huon: my guess: cache effects from VM?
[06:32:10] *** Quits: nstdloop (nstdloop@moz-C7FAE86A.washdc.fios.verizon.net) (Input/output error)
[06:32:17] <huon> whitequark: sounds reasonable
[06:32:22] <whitequark> and maybe mapping issues if there's no VT-x
[06:32:28] <huon> Havvy: wait... how much memory have you given the VM?
[06:32:36] *** Joins: nstdloop (nstdloop@moz-C7FAE86A.washdc.fios.verizon.net)
[06:32:39] <Havvy> 2.5gb IIRC.
[06:32:46] <strcat> Havvy: which virtualization software are you using?
[06:32:58] <Havvy> VirtualBox
[06:33:16] <whitequark> Havvy: do you have hardware-assisted virtualization enabled in BIOS and vbox?
[06:33:22] <whitequark> (you should)
[06:33:47] <Havvy> If it's there by default or added by the vmware integration package, then yes.  Otherwise no.
[06:33:55] <ecr> magg: oh, you might want to look at http://static.rust-lang.org/doc/master/std/vec/trait.MutableVector.html#tymethod.sort_by as well
[06:34:07] <ecr> it's similar, but you provide a comparison function
[06:34:13] <magg> ecr: thx
[06:34:20] <whitequark> make sure VT-x is enabled. it also requires a recent CPU
[06:34:26] *** Quits: nstdloop (nstdloop@moz-C7FAE86A.washdc.fios.verizon.net) (Ping timeout)
[06:34:30] <whitequark> Sandy Bridge or something, iirc
[06:34:38] <Havvy> Computer is less than a year old.
[06:34:58] <strcat> whitequark: older than that
[06:35:08] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[06:35:15] <strcat> or do you mean something other than VT-x?
[06:35:19] *** Quits: ehsanul (harish@moz-A9E56CFE.hfc.comcastbusiness.net) (Ping timeout)
[06:35:36] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:35:38] *** Quits: heftig (heftig@moz-530D04BB.dip0.t-ipconnect.de) (Quit: Quitting)
[06:35:48] <Havvy> I do have VT-x enabled.
[06:36:04] <Havvy> Ah, system has 3gb of RAM.
[06:36:10] <strcat> VT-x has been around for ages but intel loves disabling it in the hw to make their tiers
[06:36:37] <whitequark> strcat: I might be biased to laptops. I believe laptops only have it since SB
[06:37:00] <eddyb> Havvy: lol, it's swapping
[06:37:08] <strcat> whitequark: hm, maybe, but afaik it was around on amd processors since like 2006
[06:37:17] <Havvy> It needs more than 3gb?
[06:37:17] <strcat> intel just loves market segmentation
[06:37:19] <eddyb> unless you run it in cheapo mode
[06:37:35] <huon> Havvy: I don't think so
[06:37:49] <huon> you could try it with more, though (probably won't help)
[06:37:54] <eddyb> Havvy: 3GB means something like 2.7GB free, out of which a DE can eat 1GB
[06:38:01] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:38:18] <eddyb> Havvy: what do you have within the VM, besides a rustc build?
[06:38:31] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[06:38:34] * strcat has 60MiB mem usage with X running :\
[06:38:41] <strcat> and then the web browser goes ahead and eats a gig
[06:38:50] <Havvy> Two Django instances, Firefox with two tabs, and Sublime Text.
[06:38:55] <eddyb> LOL
[06:39:01] <Havvy> Yeah. It's probably swapping.
[06:39:11] <eddyb> Havvy: can you actually keep an eye on its memory usage?
[06:39:40] <eddyb> I have an always-on-top resource monitor thing, just so I know not to start building rustc if I don't have the free RAM for it
[06:39:45] <Havvy> I'm just gonna give it an extra 2 gb.  I don't know the next time I'm going to rebuild.
[06:39:51] <eddyb> I don't understand how some people can swap and not feel it. it's painful here
[06:39:56] <strcat> Havvy: now! for science! ;)
[06:39:58] *** Quits: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP) (Ping timeout)
[06:40:15] <strcat> eddyb: use a better I/O scheduler
[06:40:24] <eddyb> strcat: is that a thing? I wanted that!
[06:40:29] * eddyb slaps himself a few times
[06:40:36] <cmr> I was accidentally using noop on one of my hdd's.
[06:40:38] <cmr> oops
[06:40:43] <huon> eddyb: get an SSD ;P
[06:40:45] <strcat> BFQ > * if you care about latency
[06:40:55] <strcat> huon: still really bad with an SSD + CFQ
[06:40:58] <eddyb> strcat: right. now to find an EBNF to parse that
[06:41:05] *** Joins: ofeldt (ofeldt@moz-FFDEB100.dip0.t-ipconnect.de)
[06:41:16] <huon> strcat: better than a HDD
[06:41:18] <eddyb> if I can start swapping and have enough control to kill chrome, that would be so amazing
[06:41:19] <Havvy> Oh hey. It's only using a single processor.
[06:41:23] <cmr> eddyb: http://stackoverflow.com/questions/1009577/selecting-a-linux-i-o-scheduler
[06:41:23] *** Joins: kanaka (joelm@moz-99213C1D.lightspeed.ftwotx.sbcglobal.net)
[06:41:23] <strcat> BFQ is slower on throughput with random access though
[06:41:27] <eddyb> Havvy: doesn't matter that much
[06:41:30] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[06:41:36] <strcat> well, BFQ is also not mainline yet ;p
[06:41:39] <strcat> might be *soon*
[06:41:49] <strcat> it's really awesome for interactive use though
[06:41:53] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[06:41:54] <Havvy> It might help make other things faster though.
[06:42:12] <eddyb> strcat: I basically want swap to be slow :P
[06:42:14] *** Quits: ofeldt- (ofeldt@moz-746616B8.dip0.t-ipconnect.de) (Ping timeout)
[06:42:18] <Havvy> Seeing that I spend the majority of my time in the VM...
[06:42:37] <strcat> eddyb: use sysrq keys to trigger OOM killer
[06:42:39] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[06:42:44] <eddyb> o_O
[06:42:49] <strcat> eddyb: kills the process with the highest oom_score
[06:42:51] <cmr> Havvy: have you considered switching the roles of your host and guest? :P
[06:42:56] <strcat> eddyb: just keep clicking until it unlocks
[06:42:57] <eddyb> strcat: I... used xkill. that's awesome
[06:42:59] <strcat> or... use BFQ
[06:43:00] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[06:43:13] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[06:43:20] <eddyb> strcat: can I use a different one for the swap partition?
[06:43:30] <Havvy> cmr:  Yes. But I'd have a 40% chance of bricking my computer doing that myself. ;)
[06:43:33] <strcat> eddyb: you can use a different I/O scheduler per block device
[06:43:44] <strcat> eddyb: if your swap is on the same drive as your other stuff, it's the same I/O scheduler
[06:43:46] <cmr> Havvy: ouch
[06:43:55] <strcat> eddyb: CFQ cares *way* too much about throughput
[06:43:56] <eddyb> strcat: ah okay. that would make a SSD much better
[06:44:05] <Havvy> OS (re)installation is not a skill I can put on a resume.
[06:44:07] <strcat> eddyb: it will try very, very hard to make the writes sequential by rescheduling them
[06:44:08] <eddyb> noop deadline [cfq]
[06:44:09] <strcat> eddyb: and ruin latency
[06:44:16] *** Joins: twi (Adium@moz-A3B8EA95.static.bezeqint.net)
[06:44:19] <eddyb> strcat: am I missing something? do I have to load a module?
[06:44:21] <strcat> eddyb: deadline might be better for you but it's still not going to be very fun
[06:44:26] <cmr> eddyb: bfq isn't in mainline
[06:44:27] <strcat> eddyb: BFQ is out-of-tree, need to build/install a kernel
[06:44:34] <strcat> eddyb: but there is likely a prebuilt kernel for your distro with it...
[06:44:38] <Havvy> What do you use to measure RAM usage?
[06:44:39] <eddyb> let's see
[06:44:44] *** Quits: libregeekingkid (quassel@F3A986D5.978FEE08.CC7BB87A.IP) (Ping timeout)
[06:44:46] <cmr> Havvy: free -m, or just watch htop
[06:44:48] <strcat> Havvy: watch free -m
[06:44:56] <Havvy> Nothing visual?
[06:44:59] <strcat> (and by watch I mean the watch cmd)
[06:45:01] <eddyb> I use a kde thing with graphs and whatnot
[06:45:08] <cmr> htop is a simple ascii display
[06:45:17] *** Joins: libregeekingkid (quassel@F3A986D5.978FEE08.CC7BB87A.IP)
[06:45:19] <strcat> Havvy: free -m is great because it clearly shows all the data ;p
[06:45:21] <eddyb> KSysGuard
[06:45:41] <cmr> Havvy: http://i.imgur.com/y8njuIS.png
[06:45:49] <eddyb> it lets me do other things, like kill processes, faster than it would take me to actually execute a command in a terminal
[06:46:10] <eddyb> cmr: ohh that is nice :D
[06:46:16] <strcat> eddyb: why? you can autocomplete process names in the terminal ;p
[06:46:24] <Havvy> Yeah, I use htop when I need to kill things.
[06:46:31] <eddyb> strcat: running a command involves IO
[06:46:49] <strcat> eddyb: well, your fault for using a terrible I/O scheduler ;)
[06:46:59] <eddyb> merge BFQ pls
[06:47:05] <strcat> eddyb: BFQ is as responsive for me during that swapping hell
[06:47:11] <strcat> slower, but not less responsive
[06:47:17] <eddyb> I am jelly nao
[06:47:26] <strcat> anyway
[06:47:27] <eddyb> strcat: this could have saved me days!
[06:47:33] <strcat> sysrq key to trigger oom killer is your friend
[06:47:36] <strcat> that's what you should be doing
[06:47:41] <strcat> it'll probably kill rust though
[06:47:52] <strcat> chromium gets low oom scores since they are many processes :)
[06:47:55] *** Joins: skade (skade@moz-1EC0F118.pools.arcor-ip.net)
[06:47:55] <whitequark> strcat: for some absurd reason debian disables sysrq by default these days!
[06:47:57] <strcat> you'd have to put it in a cgroup or something
[06:48:03] <whitequark> so annoying
[06:48:10] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[06:48:12] <strcat> (unless you are still using chromium --single-process)
[06:48:29] <strcat> eddyb: http://ix.io/5mt random script I have around
[06:48:34] <strcat> shows processes ordered by oom score
[06:48:42] <strcat> if you're curious what order it would kill them
[06:48:54] <eddyb> neat
[06:48:54] <strcat> you can set an adjustment if you care a lot about one
[06:49:16] *** Quits: libregeekingkid (quassel@F3A986D5.978FEE08.CC7BB87A.IP) (Client exited)
[06:49:41] <strcat> CFQ is really terrible though ;\
[06:49:46] <eddyb> http://software.opensuse.org/package/kernel-postfactum
[06:49:48] <eddyb> sweeeet
[06:49:50] <strcat> oh look, more swapping! better reorder that before everything else
[06:49:54] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[06:49:56] <strcat> oh look, more!
[06:50:01] <eddyb> oh, wait, it's old :(
[06:50:27] <eddyb> strcat: this might be the breaking point i.e. brb installing Nix (maaaaybe)
[06:50:29] <strcat> eddyb: linux-pf is 3.13.1 in arch ;s
[06:50:51] * strcat shrugs
[06:51:47] <strcat> eddyb: deadline is also okay for me though, on an SSD though
[06:51:49] <strcat> CFQ is *not*
[06:52:00] <strcat> BFQ is very, very responsive though
[06:52:40] <strcat> eddyb: you could also use noop and turn on your drive's I/O scheduling if it has it ;p
[06:52:43] <strcat> maybe worse
[06:53:36] <Havvy> Ah, I seem to be recompiling llvm each time.
[06:54:54] <eddyb> strcat: any chance I can reuse vanilla binaries on a different distro?
[06:55:01] <eddyb> though I shouldn't be playing with fire
[06:55:05] <eddyb> Havvy: install ccache
[06:55:07] <strcat> eddyb: for a kernel? I wouldn't try
[06:55:16] <strcat> eddyb: anyway linux doesn't take *that* long to build
[06:55:28] <eddyb> but I have to do it right!
[06:55:37] <eddyb> configuring it will take ages
[06:55:52] <strcat> eddyb: you can just reuse your distro pkg and apply a patch, *shrug*
[06:57:20] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[06:57:38] <strcat> eddyb: try the sysrq thing though ;p
[06:57:48] <eddyb> that won't help *that* much
[06:57:58] <eddyb> meh, let's just work on something right now
[06:57:58] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[06:57:58] *** ChanServ sets mode: +ao pcwalton pcwalton
[06:57:59] <strcat> it will instantly kill something
[06:58:04] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[06:58:27] <strcat> your drive could die and it would work
[06:58:52] <magg> wait... there's not TotalOrd for f32 in 0.9
[06:58:56] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:59:06] <strcat> never was
[06:59:07] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[06:59:20] <strcat> cmp::{min, max} used to use Ord though, Float didn't provide min/max
[06:59:22] <strcat> if that's what you mean
[06:59:31] <eddyb> "On GNU/Linux, the packages in Nixpkgs are ‘pure’, meaning that they have no dependencies on packages outside of the Nix store. This means that they should work on pretty much any GNU/Linux distribution."
[06:59:43] <eddyb> that's an interesting statement. and they have non-linux packages
[07:00:01] <eddyb> can I... install Nix under a different linux distro?
[07:00:05] <strcat> yes
[07:00:09] <strcat> I wouldn't though...
[07:00:12] <eddyb> and manually migrate things?
[07:00:17] <strcat> eddyb: not really
[07:00:42] <strcat> eddyb: put it in a chroot if you must ;p
[07:00:45] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:01:00] <eddyb> right, I have to figure out how to do that
[07:01:14] *** Quits: oxum (anonymous@EDA212DD.8F547608.520CDC98.IP) (Quit: ...)
[07:01:16] <strcat> eddyb: nixos probably has a tool for it
[07:01:18] <eddyb> I know suse has packages that allow you to quickly setup a chroot slave (with minimal deps)
[07:01:43] <ecr> magg: https://gist.github.com/anasazi/9658585
[07:01:49] <eddyb> "bootstrapping NixOS from within a Linux distribution is currently broken"
[07:02:01] <strcat> eddyb: ah that's sad
[07:02:11] <strcat> mkdir foo && pacstrap -c -d foo base # an arch linux chroot
[07:02:39] <strcat> and then `systemd-nspawn -b -D foo` boots it within the OS
[07:02:48] <eddyb> wow
[07:02:55] <eddyb> so this is what I've seen before http://en.opensuse.org/HCL:Chroot
[07:02:56] <magg> ecr: thanks a lot mate, sorry for making you do this... hehe
[07:03:06] <eddyb> install an ARM distro within an x86 one
[07:03:20] <ecr> magg: no problem. I have a glass of whiskey, so I'm not bothered.
[07:03:44] <magg> :)
[07:03:58] <eddyb> strcat: wait, that's not the automated version, and it's still pretty simple
[07:04:04] <strcat> eddyb: use systemd-nspawn -D foo, no need to mount stuff yourself that way (+ it uses namespaces)
[07:04:14] <eddyb> hah
[07:04:17] <strcat> (and -b if you want it to actually boot, not just open a shell)
[07:04:32] *** Quits: claudiu (claudiu@moz-FB94486E.thefacebook.com) (Input/output error)
[07:04:34] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:04:52] <strcat> nspawn is just lazy mode containers
[07:05:06] <strcat> similar to what my playpen application does, although nspawn doesn't try to implement a sandbox
[07:05:23] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[07:05:26] <strcat> (and can boot an OS, which is a fundamentally different kind of container)
[07:05:46] *** Joins: Doppp (Doppp@ABA7820A.3D394227.C4926542.IP)
[07:07:03] <eddyb> strcat: oh wow, nix OS has powerful stuff
[07:07:13] <eddyb> never break it again!
[07:07:52] <p1start> rusti: match 'a' { 'a' if false => 1, 'a'..'z' => 2, _ => 3 }
[07:07:53] -rusti- 3
[07:08:00] <p1start> Why does that happen? ^
[07:08:18] <strcat> p1start: looks like a bug to report
[07:08:27] <eddyb> because it should be an error
[07:08:34] <eddyb> ranges aren't properly checked at all :(
[07:08:37] <p1start> eddyb: Really?
[07:08:42] <p1start> eddyb: surely it should be 2
[07:08:59] <eddyb> oh, right, you have the guard
[07:09:07] <eddyb> rusti: match 'a' { 'a' => 1, 'a'..'z' => 2, _ => 3 }
[07:09:07] -rusti- 1
[07:09:13] <eddyb> that shouldn't compile
[07:09:26] <eddyb> because it does, it means ranges aren't checked, which means worse things can happen
[07:09:29] <strcat> rusti: match 1 { 1 => (), 1 => () }
[07:09:30] -rusti- pastebinned 8 lines of output: http://sprunge.us/ZHFg
[07:09:33] <Havvy> rusti: match 1 { 1 => 1, 1...2 > 2, _ => 3 }
[07:09:33] -rusti- <anon>:16:28: 16:31 error: expected `=>` but found `...`
[07:09:33] -rusti- <anon>:16         match 1 { 1 => 1, 1...2 > 2, _ => 3 }
[07:09:33] -rusti-                                      ^~~
[07:09:33] -rusti- application terminated with error code 101
[07:09:41] <ecr> rusti: match 'a' { 'a'..'z' => 2, _ => 3 }
[07:09:41] -rusti- 2
[07:09:49] <Havvy> rusti: match 1 { 1 => 1, 1...2 => 2, _ => 3 }
[07:09:49] <eddyb> p1start: like, LLVM can optimize out the second 'a' occurrence, I think
[07:09:49] -rusti- <anon>:16:28: 16:31 error: expected `=>` but found `...`
[07:09:49] -rusti- <anon>:16         match 1 { 1 => 1, 1...2 => 2, _ => 3 }
[07:09:49] -rusti-                                      ^~~
[07:09:50] -rusti- application terminated with error code 101
[07:09:59] <eddyb> Havvy: it's two .. not three
[07:10:11] <Havvy> rusti: match 1 { 1 => 1, 1..2 => 2, _ => 3 }
[07:10:12] -rusti- 1
[07:10:19] <strcat> you can tell I moved rusti to my ssd
[07:10:27] <eddyb> rusti: match 1 { 1 if false => 1, 1..2 => 2, _ => 3 }
[07:10:27] -rusti- 3
[07:10:28] <ecr> indeed
[07:11:03] <Jesse> why do you say it shouldn't compile?
[07:11:09] <eddyb> p1start: I opened an issue about ranges, you can add to that, or mention it in your own issue. the example above is quite minimal
[07:11:24] <eddyb> Jesse: ranges aren't checked for overlaps with other match cases
[07:11:26] <huon> rusti: 1
[07:11:27] -rusti- 1
[07:11:30] *** Joins: bollu_ (bollu@31CCE710.7065DDB9.6D6A344F.IP)
[07:11:33] <eddyb> rusti: match 1 { 1..2 if false => 1, 1..2 => 2, _ => 3 }
[07:11:33] -rusti- 2
[07:11:40] <eddyb> rusti: match 1 { 1..2 => 1, 1..2 => 2, _ => 3 }
[07:11:41] -rusti- <anon>:16:30: 16:34 error: unreachable pattern
[07:11:41] -rusti- <anon>:16         match 1 { 1..2 => 1, 1..2 => 2, _ => 3 }
[07:11:41] -rusti-                                        ^~~~
[07:11:41] -rusti- error: aborting due to previous error
[07:11:41] -rusti- application terminated with error code 101
[07:11:44] *** Joins: EastByte_ (EastByte@moz-F0D1E34F.ewe-ip-backbone.de)
[07:11:47] <Jesse> overlaps are fine if you have guards
[07:11:49] *** Quits: EastByte (EastByte@moz-7BE365.ewe-ip-backbone.de) (Ping timeout)
[07:11:59] <Jesse> at least in my mind
[07:12:00] <eddyb> okay, interesting, if you duplicate the entire thing it can then see it
[07:12:03] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:12:07] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:12:11] <eddyb> Jesse: sure, but can you trust it's implemented properly?
[07:12:14] * strcat still needs to find hosting for rusti though ;\
[07:12:19] <Jesse> without a guard, yeah, overlaps are trouble
[07:12:20] <eddyb> if there's no error for the non-guard case?
[07:12:32] *** Quits: derek_c (derek@moz-16A6DFBC.cit.cornell.edu) (Ping timeout)
[07:12:41] * eddyb is probably thinking weird because exposure to trans
[07:12:42] <Jesse> that's what testing and compiler bug reports are for
[07:13:05] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[07:13:09] <eddyb> Jesse: what I mean is that it's probably related to how ranges aren't checked properly
[07:13:15] <ecr> don't we just use "earliest matching arm" semantics? I mean anything with a _ pattern will have overlaps...
[07:13:34] <eddyb> trans could be assuming no overlaps in certain cases, causing LLVM to optimize out branches
[07:14:04] <strcat> rusti doesn't optimize atm
[07:14:20] <ecr> I'm not sure why { 1 => ..., 1..5 => ... } should be an error
[07:14:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:14:29] <p1start> eddyb: I couldn't find the issue you mentioned. Could you send a link?
[07:14:34] <eddyb> ecr: because you have an unreachable 1
[07:14:50] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[07:14:52] <ecr> so? any _ pattern will have unreachable cases
[07:15:36] <strcat> O_TMPFILE is really cool
[07:15:40] <Havvy> _ could semantically be 'any case except the ones previously delimited'.
[07:16:16] <ecr> most of ML derived languages just use "first matched pattern" semantics
[07:16:26] <eddyb> p1start: sorry, I wasn't remember properly, it's a quite different issue (only related), https://github.com/mozilla/rust/issues/12501
[07:16:27] <ecr> so overlaps with later arms aren't a problem
[07:16:39] <eddyb> ecr: rusti doesn't
[07:16:40] <Jesse> because a human who typed "1" and "1..5" was probably confused
[07:16:41] <ecr> you just need to make sure every case is covered by at least one arm
[07:16:47] <Havvy> What about this?
[07:16:51] <eddyb> s/rusti/rustc
[07:17:01] <eddyb> rusti: match 1 { 1 => 1, 1 => 2, _ => 3 }
[07:17:02] -rusti- <anon>:16:27: 16:28 error: unreachable pattern
[07:17:02] -rusti- <anon>:16         match 1 { 1 => 1, 1 => 2, _ => 3 }
[07:17:02] -rusti-                                     ^
[07:17:02] -rusti- error: aborting due to previous error
[07:17:02] -rusti- application terminated with error code 101
[07:17:03] <strcat> rusti: "I am rustc!"
[07:17:03] -rusti- I am rustc!
[07:17:10] <eddyb> ecr: that's an error and for good reason
[07:17:10] <Havvy> match n { 4 => { ... },  1..10 => { ... }, _ => { ... } }
[07:17:27] <strcat> rusti: [1.0, 2., 3.]
[07:17:27] -rusti- pastebinned 8 lines of output: http://sprunge.us/KQXG
[07:17:30] <eddyb> Havvy: 1..3 | 5..10 obviously
[07:17:42] <strcat> rusti: [1.0f64, 2., 3.]
[07:17:43] -rusti- pastebinned 8 lines of output: http://sprunge.us/QZVR
[07:17:49] <ecr> eddyb: and that good reason is? no program will ever misbehave.
[07:17:49] <Havvy> eddyb:  And if we start having lots of special cases?
[07:17:52] <strcat> stupid fixed-size arrays
[07:18:16] *** Quits: twi (Adium@moz-A3B8EA95.static.bezeqint.net) (Connection reset by peer)
[07:18:17] *** Joins: twi (Adium@moz-A3B8EA95.static.bezeqint.net)
[07:18:42] <ecr> it's not really different than having "if false { ... }"
[07:18:56] <strcat> ecr: which shouldn't be allowed either! :P
[07:19:02] <strcat> more lints ;)
[07:19:20] <ecr> eh, style issues aren't type errors
[07:19:29] <strcat> ecr: thus lints
[07:19:41] <Havvy> rusti: if false { true } else { false }
[07:19:42] -rusti- false
[07:20:20] <strcat> rusti: return
[07:20:20] -rusti- pastebinned 8 lines of output: http://sprunge.us/PTWN
[07:20:26] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[07:20:26] <strcat> rusti: return; 5
[07:20:27] -rusti- pastebinned 8 lines of output: http://sprunge.us/gESZ
[07:20:34] <Havvy> #[nolint('overlapping-match-ranges')] match n { 4 => { ... } ... }
[07:20:37] <eddyb> strcat: how do I mount a squashfs?
[07:20:52] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:20:59] <huon> ecr: we can define mis-styled programs to not typecheck if we want ;P
[07:21:12] * huon wonders how that would fit into the formal module :P
[07:21:30] <strcat> eddyb: probably autodetects
[07:21:36] <strcat> did you try just using mount? ;p
[07:21:43] <huon> *model
[07:21:44] <ecr> huon: that's probably a really bad idea. badly typed programs *will* have errors. poorly styled programs just offend your subjective sensibilities
[07:21:46] <strcat> or even whatever file manager you have (if you do)
[07:21:47] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[07:22:02] <strcat> ecr: they should offend rustc's lint passes too ;)
[07:22:04] <p1start> eddyb: hmm, this bug seems different enough for a separate issue
[07:22:07] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[07:22:11] <eddyb> p1start: it is
[07:22:16] *** Joins: sawrubh (uid6719@moz-5F4AA75A.irccloud.com)
[07:22:17] <strcat> ecr: can turn lints off
[07:22:22] <strcat> but they catch real bugs
[07:22:33] <strcat> and could/should enforce consistent style by default
[07:22:35] <ecr> strcat: i know. i don't have an issue with having a lint for it
[07:23:03] <Havvy> So anybody object to having a lint pass instead of a compiler error for overlapping match ranges?
[07:23:10] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:23:34] <huon> ecr: I was joking ;)
[07:23:36] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[07:23:36] <eddyb> strcat: what kind of "boot" does systemd-nswap -b do? would it interfere with the outer distro?
[07:23:44] <strcat> eddyb: no, won't interfere
[07:24:00] <ecr> huon: np :)
[07:24:05] <strcat> eddyb: nspawn uses namespaces so while it's not sandboxed for the sake of security, it's a lot of isolation
[07:24:06] <eddyb> Havvy: we already have errors for overlapping match cases, ranges are just not implemented properly
[07:24:10] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[07:24:15] <eddyb> strcat: I mean... would it take over my screen?
[07:24:17] <strcat> eddyb: the first process you spawn inside will be pid1, etc.
[07:24:18] <Jesse> i think some kinds of overlap are ok. like { 'c' => 1, 'a'..'z' => 2 }
[07:24:18] *** Quits: tautologico (uid22285@moz-A42E5B7B.irccloud.com) (Quit: Connection closed for inactivity)
[07:24:42] <strcat> eddyb: well, I'm assuming you're going to boot a cli distro ;p, I am not sure what will happen if it tries to do something graphical
[07:25:00] <strcat> will probably just not work...
[07:25:14] <eddyb> so the squashfs has /nix/store in it
[07:25:25] <eddyb> *great* now how do I boot that? should I extract the initrd?
[07:25:44] <ecr> eddyb: make a blood sacrifice
[07:25:44] <strcat> eddyb: what are you trying to boot?
[07:25:51] *** Joins: philix (felipe@moz-D63CAE5D.user.veloxzone.com.br)
[07:25:59] <strcat> eddyb: it should have /bin/init
[07:26:01] <eddyb> strcat: the nix OS ISO. in a chroot
[07:26:13] <strcat> or something you can tell it is init
[07:26:16] *** Quits: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[07:26:29] <strcat> eddyb: go find where they put the systemd binary
[07:26:53] <eddyb> hah, even the initrd is tiny
[07:27:00] <eddyb> oh, there we go, /init
[07:27:06] <strcat> eddyb: it's a binary?
[07:27:19] <strcat> try systemd-nspawn -b -D foo /init
[07:27:33] <eddyb> it's.... not a file. wtf?
[07:27:39] <strcat> dir?
[07:27:44] <eddyb> nope
[07:27:46] * strcat doesn't know where nixos puts stuff
[07:27:51] *** Quits: philix (felipe@moz-D63CAE5D.user.veloxzone.com.br) (Ping timeout)
[07:27:56] <eddyb> okay, lets ignore the initrd
[07:27:57] <edwardw> there is a PR allowing _ in type parameter position, isn't it?
[07:28:07] <eddyb> edwardw: already merged
[07:28:10] <strcat> eddyb: yeah you don't need the initrd
[07:28:16] <strcat> it's not going to have a kernel to itself
[07:28:17] <edwardw> eddyb: great
[07:29:15] <huon> edfor local variables
[07:29:18] <huon> edwardw: 
[07:29:27] <huon> (too many /^ed.*/'s
[07:29:33] <edwardw> lol
[07:29:54] <strcat> yes and weechat is hashing them to the same color
[07:29:56] <strcat> not helpful
[07:30:08] *** huon is now known as ed1
[07:30:09] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[07:30:10] * strcat should enable more colors ;\
[07:30:10] <eddyb> sudo mount nixos-graphical-13.10.35686.3bcfa7b-x86_64-linux/nix-store.squashfs gfx-iso-13.10/nix/store/
[07:30:18] <eddyb> strcat: so only a /nix. this is new to me
[07:30:34] <ed1> drat, there's already an ed' on moznet
[07:31:11] *** Joins: bjz (bjz@moz-38D46E1C.perm.iinet.net.au)
[07:31:18] <strcat> eddyb: /nix/store/hash-crap-system/init ?
[07:31:23] *** ed1 is now known as huon
[07:31:58] <Havvy> Building rustc now and now llvm, it's jumped up to 2gb. So yeah. It was definitely swapping.
[07:32:01] <eddyb> gfx-iso-13.10/nix/store/3i5pz94x5snpxhjlgv3hb596s4xqfffm-initrd oh, look, another copy of initrd
[07:32:08] <strcat> bye std::vec
[07:32:10] <huon> std::vec is dead!
[07:32:15] *** Joins: brontron (brontron@moz-C8D86903.tc.ph.cox.net)
[07:32:19] <strcat> long live the new std::vec
[07:32:22] <eddyb> strcat: gfx-iso-13.10/nix/store/a0c054fyss9l7mfajaaw3z7xhxzz93ra-nixos-13.10.35686.3bcfa7b/init \o/
[07:32:35] <strcat> eddyb: alright, pass that as the arg to nspawn after -b -D foo
[07:32:46] <edwardw> #12764 allow `let x: Bar<_> = baz();`, but I want to write `fn foo(x: &Bar<_>)`. Possible?
[07:32:49] <strcat> as an absolute path 
[07:32:55] <strcat> cause it runs after it chroots into -D
[07:33:01] <eddyb> "Directory /home/eddy/Projects/nix-root/gfx-iso-13.10 doesn't look like an OS root directory (/etc/os-release is missing). Refusing."
[07:33:03] <eddyb> bleah
[07:33:16] <eddyb> edwardw: global type inference is still not allowed
[07:33:23] <eddyb> edwardw: or is that a shadow generic?
[07:33:25] <edwardw> k
[07:33:30] <strcat> eddyb: meh it might not work due to their weird fs layout
[07:33:31] *** Joins: oxum (anonymous@A3B51273.5425F8F6.520CDC98.IP)
[07:33:32] <strcat> dunno if it will
[07:33:34] <edwardw> what's shadow generic?
[07:33:46] <eddyb> strcat: I will try to create a bunch of things in it
[07:33:56] <eddyb> edwardw: Haskell probably has a better name for it
[07:34:02] <eddyb> edwardw: an implicit generic type param
[07:34:02] <strcat> eddyb: you need to leave out the external /home/eddy stuff though
[07:34:03] <edwardw> k
[07:34:05] <strcat> because it becomes /
[07:34:29] <eddyb> nah I'm not inputting that
[07:34:57] <ecr> eddyb: it's not implicit (aka not required to mention), but rather inferred (not required to specify)
[07:35:09] <ecr> you still have to say there is a type parameter, but you just tell rustc to figure it out
[07:35:16] <eddyb> ecr: I mean, edwardw probably wanted implicit than inferred
[07:35:23] <eddyb> *rather than
[07:35:29] <ecr> oh, I didn't see that
[07:35:30] *** Joins: nkoep (nik@moz-5B8BC9B8.pool.mediaways.net)
[07:35:44] <eddyb> strcat: huh execv() failed: No such file or directory
[07:35:52] <strcat> eddyb: what did you run?
[07:36:04] *** Quits: twi (Adium@moz-A3B8EA95.static.bezeqint.net) (Quit: Leaving.)
[07:36:09] <eddyb> Init process in the container running as PID 1537.
[07:36:21] <eddyb> so I'm guessing init doesn't find something it needs
[07:36:29] <strcat> ah, weird ;s
[07:36:41] <eddyb> all the extra dirs are there, though, that's good
[07:37:24] <strcat> eddyb: https://github.com/NixOS/nixpkgs/blob/master/nixos/modules/virtualisation/containers.nix
[07:37:29] <strcat> eddyb: look what they do there
[07:37:37] <strcat> to get nspawn to work
[07:37:41] <eddyb> strcat: ohh. I think /init was a symlink
[07:38:03] <ecr> edwardw: as far as I can tell, #12764 will not allow that. rustc could probably do it if we wanted, but it's intentionally not allowed.
[07:38:18] *** Parts: ecr (chatzilla@E940BDD3.FBC7597F.11F8506F.IP) ()
[07:38:21] <edwardw> I see
[07:38:26] *** Joins: ecr (chatzilla@E940BDD3.FBC7597F.11F8506F.IP)
[07:38:59] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[07:39:18] <strcat> ugh github won't let me open a PR for this
[07:39:20] <eddyb> strcat: for some reason the chroot fails to see /nix
[07:39:41] <strcat> eddyb: you need to remount that as root or something
[07:39:51] <strcat> eddyb: look at that thing ^^ ;p
[07:40:00] <eddyb> I don't really understand
[07:40:29] <edwardw> ecr: it can be useful. for example, https://github.com/mozilla/rust/blob/master/src/libserialize/json.rs#L318, `Encodable<Encoder<'a>>` is not really necessary, `Encodable<_>` should work
[07:41:12] <eddyb> strcat: this works: sudo chroot gfx-iso-13.10/ /nix/store/7mjplwq1r0agngqj2058hl5z8kb3w15g-bash-4.2-p42/bin/bash
[07:41:12] <ecr> edwardw: i know, but the main devs decided to not do global type inference a long long time ago
[07:41:21] <edwardw> k
[07:42:14] <strcat> eddyb: well, changing that 'chroot' to 'systemd-nspawn -D' (no -b) would also work
[07:42:16] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[07:42:20] <edwardw> I need to find a workaround then
[07:42:41] *** Quits: ecr (chatzilla@E940BDD3.FBC7597F.11F8506F.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 27.0.1/20140212131424])
[07:42:53] <eddyb> strcat: oh... I think it's trying to execute something :/
[07:42:55] <strcat> huon: https://github.com/mozilla/rust/pull/13028 r?
[07:42:58] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[07:43:05] <strcat> eddyb: look at that containers.nix thing ;p
[07:43:09] <strcat> eddyb: there's an nspawn line 
[07:43:13] <eddyb> I see it
[07:43:16] *** Joins: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP)
[07:43:17] <eddyb> it doesn't tell me much
[07:43:17] <edwardw> vec_ng -> vec!
[07:43:20] *** Joins: Ferreus (ferreus@moz-41A2BCF0.dip0.t-ipconnect.de)
[07:43:32] <edwardw> about time
[07:43:34] <huon> strcat: travis failed
[07:43:39] <strcat> huon: something else
[07:43:41] <strcat> I just pushed this
[07:43:52] <strcat> huon: look again
[07:43:57] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[07:43:58] <strcat> broken github is broken
[07:43:59] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:44:27] <eddyb> strcat: what does systemd run by default?
[07:44:33] <huon> ah, I must've caught it between you pushing and the new travis build starting
[07:44:49] <strcat> eddyb: uh, udevd?
[07:44:55] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[07:45:01] <huon> strcat: wait, it's still broken
[07:45:12] <strcat> huon: I never re-pushed
[07:45:17] <eddyb> strcat: I mean, what command does it run for -b without manually specifying it
[07:45:19] <strcat> huon: travis is wrong
[07:45:27] * strcat shrugs
[07:45:30] <huon> strcat: no, it's not
[07:45:36] <huon> I commented
[07:45:36] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[07:45:38] <strcat> ah I see ;p
[07:45:42] <eddyb> strcat: hahahaha
[07:45:46] <strcat> huon: still says 'waiting to hear' for me ;p
[07:45:51] <eddyb> strcat: I can run init from bash from system without -b
[07:46:00] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:46:00] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Ping timeout)
[07:46:03] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[07:46:05] <eddyb> "error: creating directory `/nix/store/.links': Read-only file system"
[07:46:11] *** Quits: alonlevy (alon@2CD54432.57968636.E9C721AF.IP) (Ping timeout)
[07:46:29] <huon> strcat: yeah, it says that now for me too, but it said "build failed" for me when I first loaded it
[07:46:31] <huon> peculiar
[07:46:36] <huon> strcat: r=me when the code works :P
[07:46:41] * strcat cries
[07:47:30] <huon> strcat: there's only 3 uses of expr_vec_ng
[07:48:27] <strcat> huon: why does this even exist? ;s
[07:48:36] <eddyb> strcat: sudo systemd-nspawn -D gfx-iso-13.10/ /nix/store/a0c054fyss9l7mfajaaw3z7xhxzz93ra-nixos-13.10.35686.3bcfa7b/init
[07:48:41] <eddyb> strcat: seems to boot (without -b)
[07:48:41] <huon> strcat: in what sense?
[07:48:56] <eddyb> [  OK  ] Reached target Multi-User System.
[07:48:58] <strcat> eddyb: ah
[07:49:02] <eddyb> now can I have my bash?
[07:49:11] <strcat> it should give you a login prompt or something ;p
[07:49:36] <eddyb> why doesn't it own its root?
[07:49:45] <strcat> hm?
[07:49:59] <eddyb> it doesn't seem to be able to perfect certain thigns
[07:50:01] *** flaper87|afk is now known as flaper87
[07:50:04] <strcat> huon: https://github.com/mozilla/rust/pull/13028 there
[07:50:12] <eddyb> I remounted the squash fs as rw... maybe I should extract it?
[07:50:20] *** Joins: fabiand (fabiand@moz-844C9A8.adsl.alicedsl.de)
[07:50:41] <strcat> huon: giant seds are supposed to Just Work ;p
[07:50:46] <eddyb> wtf [  OK  ] Started Rogue dungeon crawling game.
[07:51:14] <strcat> lol
[07:51:16] *** Joins: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no)
[07:51:32] *** Quits: bollu_ (bollu@31CCE710.7065DDB9.6D6A344F.IP) (Quit: Leaving.)
[07:51:51] <eddyb> "Failed to register machine: File exists"
[07:51:56] *** Joins: ehsanul (harish@moz-24DD2596.hsd1.ca.comcast.net)
[07:52:00] <eddyb> turns out you can't kill system-nswap with SIGKILL
[07:52:14] <huon> strcat: I heard they work better when combined with `rm -rf --no-preserve-root /` ;P
[07:52:24] <strcat> eddyb: use machinectl
[07:52:33] <eddyb> oh dear
[07:52:38] <strcat> huon: meh something else broke
[07:53:08] <Havvy> Someday I'll have a roguelike in Rust...I just have to relearn everything...
[07:53:28] <eddyb> Failed to register machine: Input/output error
[07:53:31] <eddyb> strcat: I broke it :/
[07:53:43] <strcat> lol
[07:53:50] <strcat> that sounds like you broke the filesystem...
[07:54:00] <eddyb> okay, used different name, kinda working again
[07:54:09] <eddyb> let's just throw strace at it
[07:54:12] <strcat> eddyb: machinectl is your friend ;p
[07:54:24] <strcat> eddyb: that's also how you can login
[07:54:28] <strcat> at least, if you use -b...
[07:55:12] *** Joins: quaddle (Mibbit@moz-6AA11768.gae.googleusercontent.com)
[07:55:56] <eddyb> sudo strace -f systemd-nspawn -M nix -bD gfx-iso-13.10/ /nix/store/a0c054fyss9l7mfajaaw3z7xhxzz93ra-nixos-13.10.35686.3bcfa7b/init 2>| grep exec
[07:56:06] <eddyb>  execve("/sbin/init", ["/sbin/init", "/nix/store/a0c054fyss9l7mfajaaw3"...]
[07:56:13] <eddyb> strcat: ^^ that's why I asked "what will it try to exec"
[07:56:17] <strcat> ah
[07:56:29] <strcat> eddyb: maybe you don't need -b anyway
[07:56:39] <eddyb> doesn't boot properly without it
[07:56:39] <strcat> see if it shows up in machinectl without it
[07:56:41] <strcat> ah
[07:57:05] <strcat> /home/strcat/projects/rust/src/librustc/front/test.rs:336:19: 342:7 error: unresolved import: could not find `vec_ng` in `std`.
[07:57:08] <strcat> /home/strcat/projects/rust/src/librustc/front/test.rs:336     let mainfn = (quote_item!(&cx.ext_cx,
[07:57:10] <strcat> huon: ;s
[07:57:16] <strcat> I guess I need to re-export it
[07:57:18] <strcat> for stage0
[07:57:21] *** Quits: magg (magg@71B9F7AA.109D2178.3D0AE249.IP) (Quit: magg)
[07:57:29] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[07:57:53] <huon> strcat: bleh :(
[07:58:05] <strcat> #[cfg(stage0)]
[07:58:07] <strcat> pub use vec_ng = vec;
[07:58:09] <strcat> trying that
[07:58:14] * huon *hates* our current quoting infrastructure
[07:58:24] <strcat> I don't really understand why it knows about vec_ng at all
[07:58:27] <strcat> doesn't make much sense to me
[07:58:31] <strcat> because of vec!?
[07:58:59] *** pmoore|away is now known as pmoore
[07:59:00] <huon> quote_item etc. basically just construct a literal AST
[07:59:09] <strcat> but why is it hardcoded to know about vec_ng? ;\
[07:59:14] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[07:59:14] <huon> i.e. writing `syntax::ast::Foo { ... }`
[07:59:20] <huon> which includes Vec's
[07:59:24] *** Joins: mib_no9hln (Mibbit@moz-590C963D.zeto.wroc.pl)
[07:59:26] <eddyb> strcat: trying now sudo systemd-nspawn -M nix -bD gfx-iso-13.10 /nix/store/7mjplwq1r0agngqj2058hl5z8kb3w15g-bash-4.2-p42/bin/bash
[07:59:27] *** Quits: mib_no9hln (Mibbit@moz-590C963D.zeto.wroc.pl) (Quit: mib_no9hln)
[07:59:29] <huon> and so they need to be written literally too, or something?
[07:59:36] <eddyb> strcat: bleah, terminate means I can't reuse the same machine name :(
[07:59:39] *** Quits: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP) (Ping timeout)
[07:59:46] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 31.0a1/20140318030202])
[07:59:58] <eddyb> still doesn't start bash :/
[08:00:06] <strcat> eddyb: you need to ask machinectl to log in
[08:00:22] <strcat> I think it ignores the cmd with -b
[08:00:29] *** Joins: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP)
[08:00:42] <strcat> huon: works
[08:00:52] <eddyb> strcat: it doesn't ignore it, it passes it to init
[08:01:11] <eddyb> strcat: how can machinectl login? doesn't make sense
[08:01:25] <strcat> eddyb: machinectl login name
[08:01:31] <eddyb> it only has list/status/show/terminate/kill
[08:01:36] <strcat> mine has login ;s
[08:01:54] <eddyb> maybe I should give init the login path instead? hmm
[08:02:04] <strcat> eddyb: afaik it should start a prompt
[08:02:29] <eddyb> this is such a waste of time
[08:02:44] <eddyb> can squash fs even be mounted read/write?
[08:02:49] <strcat> dunno ;p
[08:03:01] * strcat has never used a squashfs
[08:03:13] <eddyb> I should copy things out of it
[08:03:44] <eddyb> strcat: I have 208-15.1, only upgrade is 208-19.1
[08:03:59] * strcat has the latest stable release ;p
[08:04:29] <eddyb> strcat: which is?
[08:04:36] <strcat> 211
[08:04:52] <strcat> eddyb: http://sprunge.us/AFDL *shrug*
[08:04:54] <eddyb> sheesh I have to abandon a sinking boat
[08:05:13] <eddyb> ah, Base:System has 210
[08:05:16] <huon> keep your computer dry
[08:05:38] <strcat> eddyb: I don't actually need machinectl login, but that's because arch starts a prompt by default afaik
[08:05:46] <strcat> maybe you just need to change the default target it boots
[08:05:57] *** Joins: listboss (Mibbit@moz-CC5410C2.hsd1.ca.comcast.net)
[08:06:20] <eddyb> how do I do that?
[08:06:46] <strcat> eddyb: I would try copying it out first
[08:07:01] <eddyb> got kcm_systemd btw
[08:07:12] <strcat> dunno what that is
[08:07:22] <eddyb> even better than the yast modules. nowadays you can configure most stuff from kde4 system settings
[08:07:33] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[08:07:34] <eddyb> oh wow
[08:07:48] <eddyb> targets, services, devices, mounts... there's a list of twenty unit types
[08:08:48] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[08:09:09] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[08:09:25] <strcat> eddyb: sure, they just describe things in a declarative ini syntax
[08:09:54] <eddyb> I mean, this UI give you a lot of control, I wasn't expecting that
[08:09:59] <strcat> ah
[08:10:02] <eddyb> (kcm == kde control module)
[08:10:20] * strcat destroys this root
[08:10:26] <strcat> I have way too many
[08:10:27] <eddyb> I'll play with nix later
[08:10:44] <strcat> always run locate and it finds things in 20 chroots
[08:10:50] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[08:11:44] <listboss> how do I return a &-reference to a struct field that is a unique pointer. I am trying to write a getter function and
[08:11:51] <listboss> I've gotten this far: https://gist.github.com/gistub/9659317
[08:12:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:12:40] *** Quits: quaddle (Mibbit@moz-6AA11768.gae.googleusercontent.com) (Quit: http://www.mibbit.com ajax IRC Client)
[08:12:51] <eddyb> huon: so I have a crazy idea for ident interning stuff
[08:13:13] <strcat> huon: hm, so the quasi quoter would let me write a function in libsyntax and turn it into an AST magically?
[08:13:15] <Havvy> So, how do I compile such that I get a stack trace?
[08:13:18] <strcat> huon: or am I missing the point
[08:13:33] <eddyb> strcat: it lets you build AST using Rust syntax
[08:13:38] <Havvy> (When it fail!s)
[08:13:46] <strcat> yes but I'm wondering if I can use it there
[08:13:48] <strcat> seems weird
[08:13:56] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[08:14:26] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:14:33] <eddyb> huon: use a contiguous arena for string data, with an u32 before each string contents. that is the refcount
[08:14:52] <eddyb> huon: however, you only count references *outside* of the interner itself, that is, those that you give to the outside world
[08:15:22] <eddyb> huon: when you free the arena, check for refcounts != 0 and error if you find any
[08:15:41] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[08:15:44] <eddyb> sounds efficient to me
[08:15:54] <p1start> Is there an equivalent of `assert_eq!` but with pattern matching? (So `assert_match!(1, 1..10)` succeeds)
[08:16:05] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[08:16:20] <eddyb> p1start: hmpf, one might be able to write that
[08:16:31] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[08:16:48] <huon> eddyb: I think the standard technique is to essentially just have interned strings being slices into one big continguous buffer, yes
[08:17:05] <huon> don't know if the refcounts good for anything but diagnostics and error checking though
[08:17:08] <p1start> eddyb: yeah, that's what I've been doing so far. Just wondering if there's a better way in the standard library
[08:17:15] *** Quits: skade (skade@moz-1EC0F118.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:17:16] *** Joins: W0rmDr1nk (wormdrink@moz-B3199488.access.mtnbusiness.co.za)
[08:17:19] <huon> strcat: yeah, that's what it's supposed to do
[08:17:26] <huon> but the "magic" is a huge horrible hack
[08:17:35] <huon> :(
[08:17:41] <strcat> huon: still need to fix TotalEq
[08:17:44] <strcat> ;p
[08:17:46] *** Quits: edwardw (edwardw@BF6575DE.1B2F6624.7F41E82D.IP) (Quit: Leaving...)
[08:17:48] <strcat> the deriving
[08:18:00] <huon> ah, yes
[08:18:01] *** Quits: onelson (owen@18CF7301.95770028.5B6BFE7D.IP) (Ping timeout)
[08:18:13] <huon> do you want me to do it?
[08:18:14] <eddyb> huon: the other way to fix the safety issue is remapping the freed pages with NO_RESERVE
[08:18:17] <strcat> huon: yes! ;)
[08:18:18] *** Joins: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[08:18:24] <strcat> huon: then I don't have to grasp how deriving works
[08:18:38] <huon> strcat: do you have a branch... ?
[08:18:47] <strcat> huon: no, TotalEq uses a default method now in master
[08:18:47] <eddyb> huon: which I've suggested previously. that should prevent further allocations from reusing that space, resulting in deterministic segfaults if interner references outlive it
[08:18:51] *** Quits: brontron (brontron@moz-C8D86903.tc.ph.cox.net) (Ping timeout)
[08:18:54] <strcat> huon: so you can rm usage of that method in deriving
[08:19:01] <strcat> just needs to check that the fields impl TotalEq
[08:19:06] <huon> eddyb: ah, I see
[08:19:08] <bvssvni> listboss: why are you using ~int and not just int?
[08:19:12] <huon> *strcat
[08:19:16] <strcat> I'm just not really sure how to do that while not going insane
[08:19:20] <huon> eddyb: just skip the safety :P
[08:19:30] <huon> strcat: I think I can avoid the insanity :)
[08:19:32] * eddyb takes out the whip
[08:19:32] <huon> maybe
[08:19:39] <huon> but maybe not :P
[08:19:53] <strcat> huon: I thought I was going to have to write a function by hand in AST building blocks
[08:20:01] <strcat> but maybe the quasi quoter saves you that trouble...
[08:20:09] <listboss> @bvssvni: just trying to learn the stuff. not a particular reason
[08:20:09] <huon> theoretically
[08:20:26] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[08:20:26] <huon> but, as I said before, it's a *huge* hack
[08:20:34] <huon> and has horrible effects on staging
[08:20:37] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[08:20:44] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[08:20:46] <huon> so... I personally discourage its use in libsyntax
[08:20:51] <eddyb> huon: reminds me of reflection
[08:20:53] <huon> => writing a function by hand :P
[08:21:04] <bvssvni> listboss: you can return &mut int to create a borrowed pointer that gives back ownership when running out of scope
[08:21:06] <eddyb> there are methods still named evec
[08:21:11] <strcat> huon: yeah it doesn't really make sense to me
[08:21:19] <strcat> since it's using the last syntax...
[08:21:21] <huon> eddyb: that's just a naming thing?
[08:21:29] <eddyb> huon: it's so hard to change!
[08:21:30] <huon> this is a fundamental problem with the implementation
[08:21:36] * strcat still fails to understand why it would know about Vec
[08:21:45] <eddyb> strcat: it creates vectors
[08:21:49] <strcat> why???
[08:21:57] <eddyb> because it generates AST nodes?
[08:22:08] <strcat> but why doesn't it know about other random types?
[08:22:12] <eddyb> a block has a vector of statements
[08:22:12] <strcat> hardcoded
[08:22:12] <bvssvni> listboss: that's pretty neat, but I prefer 'set_...' and 'get_...' to modify members
[08:22:20] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[08:22:24] <strcat> eddyb: ah
[08:22:29] <eddyb> etc. etc.
[08:22:29] <strcat> eddyb: I get it now ;p
[08:22:40] <strcat> how did that possibly get past the snapshot? ;s
[08:22:46] *** Quits: jdavis_ (jdavis@B1A04851.559FC6D5.439315E1.IP) (Ping timeout)
[08:22:58] <huon> strcat: black magic
[08:23:29] <eddyb> and #[cfg(not(stage0))] abuse
[08:23:31] * huon would be very happy to remove all uses of quote from the main bootstrapping path until we have a sane quote implementation
[08:23:49] <eddyb> huon: in-crate syntax extensions, pls
[08:23:58] <huon> eddyb: doesn't help?
[08:24:04] <eddyb> it should
[08:24:17] <listboss> bvssvni: my problem with that gist is misatched type error I get
[08:24:25] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:24:25] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:24:27] <eddyb> huon: it would mean the syntax extensions (like qoute) are not from the stage0 compiler
[08:24:28] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:24:33] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:24:33] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Ping timeout)
[08:24:46] <bvssvni> listboss: can you include the compiler error?
[08:24:56] <eddyb> huon: but rather from a syntax-extension-only libsyntax build as part of the larger libsyntax build
[08:25:07] <huon> eddyb: isn't the problem having to have a special stage0 quoting implementation?
[08:25:16] <huon> rather than building quote with an old compiler?
[08:25:19] <eddyb> huon: you don't need stage0 quoting
[08:25:31] <huon> oh, yes, I see what the problem is
[08:25:31] <eddyb> huon: if you have in-crate syntax extensions
[08:25:39] * huon goes back to fighting segfaults
[08:25:46] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[08:25:49] <eddyb> it's really easy, too
[08:26:00] *** Joins: oberstet (quassel@moz-269F630C.dynamic.mnet-online.de)
[08:26:16] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:26:23] <eddyb> you can do it without spawning a different rustc and without parsing twice, just branch at the first cfg stage
[08:26:29] <strcat> apache makes a lot of processes ;s
[08:26:36] *** Joins: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[08:26:43] <eddyb> each folding stage already duplicates the AST, it's not a concern
[08:26:45] <huon> eddyb: if it's really easy you should implement it ;P
[08:26:54] <eddyb> and then it will break every test ever
[08:26:59] <eddyb> I wonder why sfackler never did it
[08:27:09] <eddyb> since it's simpler than all the macro_registrar stuff
[08:27:38] <strcat> heh, my nightly builds are a bit funny
[08:27:44] <listboss> bvssvni: I added the error msg as comment to the gist
[08:27:50] <strcat> the x86_64 pkg builds second, so it's often a pull request ahead of the i686 one
[08:28:02] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:28:16] <bvssvni> listboss: try add &*
[08:28:26] *** Joins: mgottschlag (quassel@moz-CD246736.hsi7.kabel-badenwuerttemberg.de)
[08:28:44] <bvssvni> listboss: wait, I'll try on my computer
[08:29:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:29:20] *** Quits: dapz (textual@moz-F958911.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:29:47] <listboss> bvssvni: it compiled
[08:30:21] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Ping timeout)
[08:30:50] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[08:30:51] *** Joins: glaebhoerl (glaebhoerl@moz-D2E372A1.catv.broadband.hu)
[08:31:10] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[08:31:12] <listboss> bvssvni: thanks. you mentioned you prefer 'set_' is it just a naming convention or there is more to it
[08:31:26] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:31:39] *** Joins: dapz (textual@moz-F958911.hsd1.ca.comcast.net)
[08:31:40] <bvssvni> listboss: there is no official convention as far as I know
[08:31:47] <eddyb> huon: the syntax extension itself would have to use the old libsyntax, but that shouldn't be as problematic as the stage0 compiler holding all the syntax extensions
[08:32:12] <eddyb> huon: or, hmm, this is weird
[08:32:43] <eddyb> huon: stage0 libsyntax would have a syntax extension module which would have to be linked against stage0 libsyntax. circular dependency :?
[08:33:06] *** Quits: glaebhoerl (glaebhoerl@moz-D2E372A1.catv.broadband.hu) (Quit: )
[08:33:10] *** Joins: glaebhoerl_ (glaebhoerl@moz-D2E372A1.catv.broadband.hu)
[08:33:15] <huon> eddyb: yep, definitely sounds "really easy" ;P
[08:33:24] <eddyb> huon: hey, the implementation is easy!
[08:33:37] <strcat> how kind of google
[08:33:44] <strcat> they removed half of the android sdk in a point release
[08:33:45] <eddyb> and it would work for, say, libstd (or would it? maybe with #[cfg])
[08:33:57] <eddyb> strcat: lol?
[08:34:04] <strcat> they like splitting it into other packages
[08:34:08] <strcat> but srsly it's a point release ;\
[08:34:13] <strcat> 200MiB -> 100MiB
[08:34:14] <eddyb> minor?
[08:34:21] <strcat> 22.6 -> 22.6.1
[08:34:26] <eddyb> LOL
[08:34:49] * strcat wonders what will be missing
[08:34:56] *** Quits: glaebhoerl_ (glaebhoerl@moz-D2E372A1.catv.broadband.hu) (Ping timeout)
[08:35:18] <listboss> bvssvni: how would you implement the getter if the field was a ~str (since it can't be dereferenced)
[08:35:51] <eddyb> listboss: return a &str?
[08:36:02] <eddyb> or a &~str/&mut ~str
[08:36:19] <eddyb> &* on ~str will work under DST ;)
[08:36:36] *** Joins: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[08:36:46] <bvssvni> eddyb: does &*a where a is ~int copy?
[08:36:52] <eddyb> nope
[08:37:01] <eddyb> it's the borrow operator
[08:37:03] <listboss> oh
[08:37:15] <eddyb> the dereference operator never dereferences
[08:37:21] <eddyb> yay big misnomer
[08:37:57] <bvssvni> eddyb: isn't it &*a == &(*a) ?
[08:37:59] *** Joins: int3_ (int3_@moz-F4EBDD71.lightspeed.cicril.sbcglobal.net)
[08:38:02] <eddyb> (and this is true in C/C++ as well, but those don't let you get the address of rvalues)
[08:38:08] <eddyb> bvssvni: (x) is a noop in Rust
[08:38:16] <eddyb> bvssvni: you're probably thinking of {x}
[08:38:16] *** Joins: mentero (mentero@moz-FC1AC8D0.internetdsl.tpnet.pl)
[08:38:27] <bvssvni> yes
[08:38:29] <eddyb> &*x is different from &{*x}
[08:38:41] <bvssvni> ok, nice to know
[08:39:00] <eddyb> the latter takes the value out of the dereference producing an rvalue that you then the address of
[08:39:27] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[08:39:41] <bvssvni> what about overriding Deref?
[08:39:57] *** Quits: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Ping timeout)
[08:39:58] <eddyb> *x becomes *x.deref()
[08:40:44] <bvssvni> and &*x just ignores Deref?
[08:40:54] <eddyb> no
[08:41:03] <eddyb> &*x with overloaded Deref is x.deref()
[08:41:10] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:41:20] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:41:24] <listboss> an example why one would wanna do &{*x} over &*x?
[08:41:54] *** Quits: int3_ (int3_@moz-F4EBDD71.lightspeed.cicril.sbcglobal.net) (Client exited)
[08:42:13] *** Joins: int3_ (int3_@moz-F4EBDD71.lightspeed.cicril.sbcglobal.net)
[08:42:15] <eddyb> you can't do it for most pointer types anyways
[08:42:26] *** Quits: dapz (textual@moz-F958911.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:42:32] <eddyb> x.clone() or (*x).clone() is more general
[08:42:53] *** Joins: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[08:43:12] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[08:43:12] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[08:44:13] *** Quits: int3_ (int3_@moz-F4EBDD71.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[08:44:31] * strcat looks for more pulls that are going to conflict...
[08:44:41] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Connection reset by peer)
[08:44:59] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[08:45:36] *** Quits: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Ping timeout)
[08:46:38] *** Joins: marianoguerra (marianogue@moz-EE6E8740.dip0.t-ipconnect.de)
[08:46:42] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[08:46:42] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[08:48:08] *** Joins: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[08:49:37] *** Quits: kanru (kanru@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[08:49:52] <bvssvni> rusti: struct Foo { id: ~int } let x = Foo { id: ~42 }; (&*x.id as *int as uint, &x as *Foo as uint)
[08:49:52] -rusti- (29863984, 140736921155312)
[08:50:18] <bvssvni> shouldn't these addresses be close?
[08:51:37] <eddyb> bvssvni: you did it wrong
[08:51:50] <strcat> bvssvni: why would they be close? ;p
[08:51:52] <eddyb> bvssvni: x is on the stack, so &x will be a stack address
[08:52:18] <eddyb> rusti: struct Foo { id: ~int } let x = ~Foo { id: ~42 }; (&*x.id as *int as uint, &*x as *Foo as uint)
[08:52:18] -rusti- (11387696, 11386928)
[08:52:22] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:53:09] <strcat> rusti: let x = (); let y = &x; y
[08:53:10] -rusti- pastebinned 16 lines of output: http://sprunge.us/NeXD
[08:53:14] <strcat> rusti: let x = (); let y = &x; y as *()
[08:53:14] -rusti- 0x7fffdebeaad8
[08:53:32] <strcat> rusti: static x: () = (); let y = &x; y as *()
[08:53:32] -rusti- 0x52b4a8
[08:53:42] <strcat> rusti: static x: () = (); let y = Some(&x); y
[08:53:43] -rusti- Some(())
[08:54:14] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:54:44] <bvssvni> eddyb: why is &x a stack address but &*x.id is not?
[08:55:09] <bvssvni> ah
[08:55:16] <strcat> because it points at the contents of the ~int
[08:55:32] <huon> strcat: I thought &() was null?
[08:55:36] <huon> or is that just ~()
[08:55:40] <strcat> huon: ~()
[08:55:41] <huon> rusti: Some(~())
[08:55:42] -rusti- None
[08:55:44] <huon> heh
[08:55:48] <strcat> huon: should fix it but meh
[08:55:50] <strcat> lazy
[08:55:51] <bvssvni> haha
[08:56:10] <strcat> huon: it needs to make a static addr to return instead of null
[08:56:19] <strcat> + either check for that in free, or make free take a size
[08:56:20] <eddyb> maybe Vec::new() should be (0, 0, STATIC_EMPTY)
[08:56:26] <strcat> checking for an addr in free will break it
[08:56:31] <huon> eddyb: why?
[08:56:44] <eddyb> and then None::<Vec<T>> can be (0, 0, 0)
[08:56:57] <strcat> where it == dead store elimination, etc. (didn't mean to type that as 'it'... stupid brain)
[08:57:04] *** Joins: tiffany (kawaii@moz-7AF84602.dhcp.embarqhsd.net)
[08:57:08] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[08:57:31] <eddyb> huon: I think substs uses Option<OptVec<T>>
[08:57:44] <eddyb> and yeah, that's was over 50 bytes at one point
[08:58:28] <eddyb> should be 40 now, but ideally 16 (two words with something like Option<UniqSlice<T>>)
[08:59:18] <eddyb> we should make trans::adt optimize something like Option<Option<(Rc<T>, Rc<U>)>> as two words
[08:59:57] <eddyb> why? the tuple should be seen as (NonNull, NonNull). the inner Option should produce (MaybeNull, NonNull) then the other Option (MaybeNull, MaybeNull)
[09:00:28] <eddyb> if we make it composable instead of having special cases, it could get really good
[09:00:46] <strcat> bors is so slow
[09:00:57] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[09:00:59] <strcat> what does it do 15 min increments now? ;\
[09:01:28] <eddyb> rusti: ::std::mem::size_of::<((u32, u16), u16)>()
[09:01:28] -rusti- 12
[09:01:34] <eddyb> :(
[09:01:35] *** Quits: Ferreus (ferreus@moz-41A2BCF0.dip0.t-ipconnect.de) (Ping timeout)
[09:01:43] <eddyb> strcat: why can't vectors use padded_size_of?
[09:01:49] <strcat> ?
[09:01:53] <eddyb> rusti: ::std::mem::size_of::<(u32, u16, u16)>()
[09:01:54] -rusti- 8
[09:02:08] <eddyb> that thing happens only for arrays/vectors
[09:02:15] <eddyb> s/for/because
[09:02:21] <eddyb> and it makes me sad
[09:02:34] *** Joins: Ferreus (ferreus@moz-41A2BCF0.dip0.t-ipconnect.de)
[09:02:41] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[09:02:41] <strcat> eddyb: on recent intel CPUs, you don't need to pad anyway
[09:02:44] <strcat> well
[09:02:49] <strcat> you never *need* to pad on x86
[09:02:51] <strcat> but it'd be really slow
[09:02:53] <eddyb> even without that
[09:03:06] <eddyb> strcat: just have vectors/arrays use a different size
[09:03:16] <eddyb> so elements are aligned
[09:03:32] <strcat> good luck making it work ;p
[09:03:35] <eddyb> then you don't have to pad a struct to the alignment of the first element
[09:03:37] <strcat> eddyb: ptr offset, etc.
[09:03:39] <eddyb> which is really really dumb IMO
[09:03:42] <strcat> eddyb: also won't be C compatible anymore
[09:03:49] <eddyb> #[repr(C)]
[09:04:01] <eddyb> C compat by default means "sucky by default"
[09:04:14] *** Ralith_ is now known as Ralith
[09:04:24] <eddyb> I like how enums circumvent that in the general case
[09:04:47] <eddyb> rusti: ::std::mem::size_of::<(Option<(u32, u16)>, u16)>()
[09:04:47] -rusti- 16
[09:04:50] <strcat> eddyb: so later, make structs mean 'C' and make it possible to define an enum without variants
[09:04:53] <eddyb> rusti: ::std::mem::size_of::<(Option<(u16, u32)>, u16)>()
[09:04:53] -rusti- 16
[09:04:56] <strcat> backwards compatible
[09:05:17] * strcat wouldn't worry about it
[09:05:35] <eddyb> hmm?
[09:05:59] *** Joins: mib_tmt98v (Mibbit@F7B05421.21FA9C6A.63F8F5E3.IP)
[09:06:18] <eddyb> rusti: ::std::mem::size_of::<Option<(u8, u32)>>()
[09:06:18] -rusti- 12
[09:06:37] <eddyb> why is that not 8 bytes?
[09:06:47] <eddyb> I think this is the issue that someone made me think was fixed
[09:07:01] <strcat> (u8, u32)
[09:07:06] <eddyb> oh, derp. yeah. that
[09:07:07] <strcat> align is 4
[09:07:12] <eddyb> and size is 8
[09:07:21] <strcat> yep
[09:07:35] <strcat> rusti: ::std::mem::size_of::<Option<(u32, u8)>>()
[09:07:36] -rusti- 12
[09:07:43] <strcat> rusti: ::std::mem::size_of::<Option<(u32, u32)>>()
[09:07:43] <eddyb> rusti: enum Option<T, U> {Some(T, U), None}::std::mem::size_of::<Option<u8, u32>>()
[09:07:44] -rusti- 12
[09:07:44] -rusti- 8
[09:09:22] *** Quits: mib_tmt98v (Mibbit@F7B05421.21FA9C6A.63F8F5E3.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:10:26] *** Joins: skade (skade@B4A5FE21.505237C9.CAE22B62.IP)
[09:12:20] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:12:43] *** Quits: W0rmDr1nk (wormdrink@moz-B3199488.access.mtnbusiness.co.za) (Ping timeout)
[09:14:05] *** Joins: W0rmDr1nk (wormdrink@5451F9BD.52135167.A77EFE04.IP)
[09:14:37] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[09:15:18] *** Quits: kimundi (kimundi@moz-B62309E6.dip0.t-ipconnect.de) (Ping timeout)
[09:15:33] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[09:16:18] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[09:16:58] *** Joins: mib_9a0boa (Mibbit@moz-7002DE99.lns20.adl2.internode.on.net)
[09:17:02] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:19:09] *** Joins: twi (Adium@BC1E56B6.55F3F843.839F6EC0.IP)
[09:20:26] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[09:21:16] *** Joins: kanru (kanru@moz-DB4A9C19.scl3.mozilla.com)
[09:22:06] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[09:22:56] *** Quits: p1start (rewi@moz-E7F3D014.org) (Ping timeout)
[09:24:20] *** Joins: pheleas_frog (Mibbit@F2980698.213AC17A.E51518FF.IP)
[09:24:39] *** Quits: pheleas_frog (Mibbit@F2980698.213AC17A.E51518FF.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:25:56] *** Joins: vgeddes (vincent.ge@moz-A74C937.access.mtnbusiness.co.za)
[09:26:41] *** Joins: philix (felipe@moz-D63CAE5D.user.veloxzone.com.br)
[09:28:15] *** Joins: alkino_ (alkino@moz-61F150EC.w92-151.abo.wanadoo.fr)
[09:28:42] *** Quits: philix (felipe@moz-D63CAE5D.user.veloxzone.com.br) (Ping timeout)
[09:30:07] *** Joins: soumyaC (uid15286@moz-E77DEB21.irccloud.com)
[09:30:50] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[09:31:29] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[09:31:41] *** Joins: q66 (q66@moz-25DACF.range109-154.btcentralplus.com)
[09:34:52] *** Joins: kvanb (kvanb@moz-B34A43F2.lnse7.win.bigpond.net.au)
[09:35:46] *** Joins: listboss_ (listboss@moz-CC5410C2.hsd1.ca.comcast.net)
[09:37:00] *** Quits: patpat (patpat@moz-1599AAE4.as13285.net) (Ping timeout)
[09:37:40] *** Quits: listboss_ (listboss@moz-CC5410C2.hsd1.ca.comcast.net) (Quit: Leaving)
[09:39:45] *** Joins: rofrol (rofrol@moz-8C55345C.static.ptr.magnet.ie)
[09:40:14] *** Joins: listboss_ (listboss@moz-CC5410C2.hsd1.ca.comcast.net)
[09:41:55] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[09:43:10] *** Quits: Doppp (Doppp@ABA7820A.3D394227.C4926542.IP) (Ping timeout)
[09:45:40] *** Joins: Zr40 (zr40@moz-CCFEAB92.adsl.xs4all.nl)
[09:47:43] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[09:48:35] *** Quits: lpy (lpy@186A8F3A.F09091A8.1348A864.IP) (Client exited)
[09:48:53] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[09:49:48] *** Quits: nkoep (nik@moz-5B8BC9B8.pool.mediaways.net) (Client exited)
[09:50:17] *** Joins: mib_vkmz8r (Mibbit@A54702E.4B947797.97F07BE5.IP)
[09:51:58] *** Quits: mentero (mentero@moz-FC1AC8D0.internetdsl.tpnet.pl) (Quit: WeeChat 0.4.3)
[09:52:13] *** Quits: tom1 (tom@F616D77.77D422C6.AA74B5DB.IP) (Quit: WeeChat 0.4.1)
[09:53:19] *** Joins: mentero (mentero@moz-FC1AC8D0.internetdsl.tpnet.pl)
[09:53:36] *** Parts: listboss (Mibbit@moz-CC5410C2.hsd1.ca.comcast.net) ()
[09:53:57] *** Quits: alkino_ (alkino@moz-61F150EC.w92-151.abo.wanadoo.fr) (Ping timeout)
[09:54:29] *** Quits: mentero (mentero@moz-FC1AC8D0.internetdsl.tpnet.pl) (Quit: WeeChat 0.4.3)
[09:59:33] *** Quits: twi (Adium@BC1E56B6.55F3F843.839F6EC0.IP) (Ping timeout)
[09:59:55] *** Joins: twi (Adium@BC1E56B6.55F3F843.839F6EC0.IP)
[10:00:12] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:00:19] <mib_vkmz8r> Hello my name is bjarne stroustrup, I am a constaholic
[10:00:24] *** Quits: mib_vkmz8r (Mibbit@A54702E.4B947797.97F07BE5.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:00:42] <eddyb> lol?
[10:00:55] <eddyb> I'm not even mad
[10:01:19] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[10:01:43] *** Quits: epdtry (stuart@moz-C1405FC7.hsd1.wa.comcast.net) (Connection reset by peer)
[10:02:01] *** Joins: epdtry (stuart@moz-C1405FC7.hsd1.wa.comcast.net)
[10:02:12] *** Joins: fuogo (Mibbit@A54702E.4B947797.97F07BE5.IP)
[10:02:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:02:35] <kvanb> eddyb is bjarne strou?
[10:03:00] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[10:03:05] <eddyb> kvanb: that would explain a few things
[10:03:09] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Ping timeout)
[10:03:26] <eddyb> but given that I was using C++ at 12, I don't see how I could've invented it
[10:03:51] *** Quits: epdtry (stuart@moz-C1405FC7.hsd1.wa.comcast.net) (Connection reset by peer)
[10:04:08] <kvanb> lucky you aren't
[10:04:11] *** Joins: epdtry (stuart@moz-C1405FC7.hsd1.wa.comcast.net)
[10:04:13] <kvanb> I have a bone to pick with bjarne
[10:04:38] <huon> tibia?
[10:04:58] <huon> femur?
[10:04:59] <kvanb> like why he introduces features into a language and then in his standard for safety critical systems disallows the usage of 50% of the language
[10:05:17] <huon> oh, I know, malleus
[10:05:39] <kvanb> huon it's not that funny :'(
[10:05:40] <huon> kvanb: it's not bjarne individually introducing each and every feature
[10:05:42] <eddyb> huon: aww I forgot the neck bone
[10:05:58] <eddyb> everybody in middle school remembered that one for years
[10:06:04] <eddyb> such unique name
[10:06:08] <huon> eddyb: C1-7 vertebra?
[10:06:17] <huon> *vertebrae
[10:06:23] <eddyb> oh, wait, not a bone, a muscle
[10:06:32] <eddyb> cephalo sterno something
[10:06:51] <eddyb> maybe it's different in english
[10:07:33] <huon> the "english" names are all latin anyway
[10:07:57] <huon> so theoretically they'd be pretty similar to a romanian translation (if you don't use the latin names too)
[10:08:43] <kvanb> aw, I got excited when I read that as romulan.
[10:09:09] *** Quits: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com) (Quit: I'm sure it's perfectly safe)
[10:09:28] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[10:09:37] *** Quits: fuogo (Mibbit@A54702E.4B947797.97F07BE5.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:09:39] <eddyb> what is wrong with RUSTLOG?
[10:09:55] <huon> RUST_LOG
[10:10:02] <eddyb> does it not output on stderr anymore?
[10:10:06] <eddyb> but I would've seen it then
[10:10:15] <eddyb> huon: env RUST_LOG=rustc::middle::trans ./x*/stage1/bin/rustc src/libstd/lib.rs -Z time-passes 2>| c++filt | less
[10:10:23] <eddyb> there's no debug output
[10:10:24] <huon> ah
[10:10:26] <huon> staging stuff
[10:10:30] <eddyb> seriously?
[10:10:32] <huon> RUST_LOG=::middle::Trans
[10:10:33] *** Quits: Anathema (anathema@moz-2F6DE08B.cable.virginm.net) (Ping timeout)
[10:10:35] <huon> erm
[10:10:41] <huon> RUST_LOG=middle::trans
[10:10:54] <eddyb> okay, I don't really mind that
[10:11:02] <eddyb> pfft I should hurry
[10:11:17] <huon> the new liblog relies on module_path!(), and that's only recently been prefixed with the crate name
[10:11:18] *** Joins: int3_ (int3_@869B5265.CCC707A.31E0A22D.IP)
[10:11:23] <eddyb> casting actual type ((i64:  %26 = load i64* %25)) to match formal (i64*)
[10:11:39] <eddyb> oh, it's that stuff
[10:11:44] *** Joins: mib_xdvzmp (Mibbit@A54702E.4B947797.97F07BE5.IP)
[10:12:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:12:10] *** Quits: mib_xdvzmp (Mibbit@A54702E.4B947797.97F07BE5.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:12:57] *** Joins: Anathema (anathema@moz-2F6DE08B.cable.virginm.net)
[10:13:16] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[10:14:16] *** Joins: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP)
[10:14:25] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:14:46] *** Quits: santiago (santiago@moz-69361A64.socal.res.rr.com) (Ping timeout)
[10:14:51] *** Quits: twi (Adium@BC1E56B6.55F3F843.839F6EC0.IP) (Quit: Leaving.)
[10:15:33] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[10:15:58] *** Joins: wunki (wunki@moz-4CEBB939.wunki.org)
[10:17:17] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[10:17:27] *** Quits: Mardak (Mardak@4851473D.BD9ECD5D.97D164AB.IP) (Ping timeout)
[10:17:31] *** Joins: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com)
[10:19:55] *** Joins: tom1 (tom@moz-EEA4C0D9.lsanca.fios.verizon.net)
[10:20:26] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[10:20:47] *** Joins: Mardak (Mardak@4851473D.BD9ECD5D.97D164AB.IP)
[10:22:06] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[10:22:36] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:24:55] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:25:32] *** Joins: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:27:10] <wunki> wowzers, that's a lot more users in the channel then a year ago :)
[10:28:04] <Ms2ger> Fairly consistently the biggest channel on this server, I think
[10:28:33] *** Joins: leowoe (Leo@moz-6CADCFED.dip0.t-ipconnect.de)
[10:28:41] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Client exited)
[10:29:18] <wunki> great to see Rust getting soo much momentum, well deserved.
[10:29:34] *** Quits: gwty (gwtypc@7D111845.F527CD2B.25B273F5.IP) (Ping timeout)
[10:29:41] * EKK is just lurking
[10:30:04] <wunki> same here, I can't write a single line of Rust, but will start learning soon
[10:31:54] *** Quits: int3_ (int3_@869B5265.CCC707A.31E0A22D.IP) (Ping timeout)
[10:33:14] *** Joins: patpat (patpat@884CBD1.C0D2FE93.98F3E2B5.IP)
[10:33:19] *** Joins: santiago (santiago@moz-69361A64.socal.res.rr.com)
[10:35:24] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[10:35:45] *** Quits: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[10:35:53] <tom1> hmmm, I bet if you took a few stabs at it you could write a comment in Rust :P
[10:35:57] *** tom1 is now known as dsrx
[10:36:28] <wunki> thanks for believing in me
[10:36:30] <eddyb> rusti: // Hello World
[10:36:34] -rusti- ()
[10:36:49] <dsrx> wunki: I mean without even learning anything!
[10:37:08] <EKK> "I didn't learn a thing"
[10:37:20] <eddyb> rustilite: fn main(){println!("Hello World!");}
[10:37:21] -rustilite- application terminated abnormally with signal 31 (Bad system call)
[10:37:21] <wunki> I just installed Rust through Arch Linux (community) package. But I don't have `rust` executable, only `rustc`.
[10:37:29] *** Quits: mgottschlag (quassel@moz-CD246736.hsi7.kabel-badenwuerttemberg.de) (Client exited)
[10:37:34] <eddyb> well, strcat should fix rustilite to not fail when executing =))
[10:37:38] <eddyb> wunki: rustc is the compiler
[10:37:58] <eddyb> that's all there is (well, there's also rustdoc. and soon, cargo)
[10:37:59] <wunki> eddyb: yeah, I know, but for simple scripts, I see in "Ruby for Rubyists" `rust` is being used
[10:38:10] <wunki> `rust test fizzbuss.rs`
[10:38:17] * eddyb prods steveklabnik
[10:38:23] <eddyb> that was removed ages ago
[10:38:33] *** Joins: kris (kris@moz-6D20263F.fullrate.dk)
[10:38:44] <eddyb> rustc --test fizzbuzz.rs -o fizzbuzz-test; ./fizzbuzz-test
[10:39:10] <wunki> yeah, that's what I was doing, just wondering if I was missing something
[10:39:13] <wunki> thanks for clearing that up
[10:40:53] <eddyb> wunki: rustc -v (what does it say?)
[10:41:20] <wunki> rustc 0.9
[10:41:21] <wunki> host: x86_64-unknown-linux-gn
[10:41:33] <eddyb> wunki: should get the nightly
[10:41:36] *** Quits: phay (phay@16E8BAAB.D2C4A785.91986DB5.IP) (Client exited)
[10:41:39] <eddyb> 0.9 is not supported
[10:42:01] *** Joins: phay (phay@16E8BAAB.D2C4A785.91986DB5.IP)
[10:42:02] <eddyb> technically, 1.0 will be the first supported version, after its release
[10:42:12] *** Joins: Doppp (Doppp@moz-553020DA.hfc.comcastbusiness.net)
[10:42:19] <eddyb> which will be a pain for everyone working on later versions
[10:43:18] *** Quits: phay (phay@16E8BAAB.D2C4A785.91986DB5.IP) (Connection reset by peer)
[10:43:28] *** Joins: phay (phay@16E8BAAB.D2C4A785.91986DB5.IP)
[10:43:38] <wunki> eddyb: what do you mean not supported? For learning the language 0.9 is best right now, right?
[10:43:44] <eddyb> nope
[10:43:57] <eddyb> wunki: master the master
[10:44:01] *** Quits: Doppp (Doppp@moz-553020DA.hfc.comcastbusiness.net) (Ping timeout)
[10:44:32] <eddyb> wunki: it's harder to learn a dead language because nobody speaks it anymore
[10:44:39] <wunki> eddyb: ok, so build it from Github?
[10:44:41] <EKK> git gud
[10:44:42] <EKK> :>
[10:44:53] <eddyb> wunki: there should be arch nightlies
[10:44:53] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[10:44:55] <eddyb> rusti: VERSION
[10:44:56] -rusti- <anon>:16:9: 16:16 error: unresolved name `VERSION`.
[10:44:56] -rusti- <anon>:16         VERSION
[10:44:56] -rusti-                   ^~~~~~~
[10:44:56] -rusti- error: aborting due to previous error
[10:44:56] -rusti- application terminated with error code 101
[10:44:59] <eddyb> hmpf
[10:45:03] <eddyb> rusti: version
[10:45:03] -rusti- rustc 0.10-pre (891eab9 2014-03-18 11:52:31 -0700)
[10:45:10] <eddyb> wunki: ^^ that's an arch package
[10:45:12] *** Quits: phay (phay@16E8BAAB.D2C4A785.91986DB5.IP) (Ping timeout)
[10:45:23] <wunki> this one: https://aur.archlinux.org/packages/rust-git/
[10:45:24] <wunki> ?
[10:45:43] <eddyb> the version doesn't look right
[10:46:02] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Ping timeout)
[10:46:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:46:11] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[10:46:15] <wunki> ah, found it: https://mail.mozilla.org/pipermail/rust-dev/2013-May/004073.html
[10:46:18] <eddyb> wunki: but strcat (thestinger) commented on it, so it should be right one
[10:46:24] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[10:46:44] *** Quits: vgeddes (vincent.ge@moz-A74C937.access.mtnbusiness.co.za) (Ping timeout)
[10:47:54] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[10:48:03] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:48:25] <wunki> $ rustc -v > rustc 0.10-pre (891eab9 2014-03-18 11:52:31 -0700)
[10:49:41] <wunki> compilation output is colored, but test output isn't. Is there a flag for that?
[10:50:05] <eddyb> wunki: try RUST_THREAD=1 ./test
[10:50:12] <eddyb> or RUST_THREADS=1
[10:50:40] <eddyb> wunki: there's something silly about multi-threaded testing and colors (to prevent your terminal from breaking)
[10:51:03] <wunki> eddyb: ah, RUST_THREADS=1 did it :)
[10:51:32] <wunki> is this save to add to my env or will it cause some breakage further along the line?
[10:52:49] <eddyb> it will make your own green-thread-using Rust programs slower
[10:53:11] <eddyb> like, I'm sure that slows down servo, at least a bit
[10:53:57] <wunki> ah, ok, for the toy programs I'm going to write it's save for now :)
[10:54:40] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[10:54:49] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[10:55:40] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[10:57:12] *** Quits: Rusky (russell@moz-173BA32C.slkc.qwest.net) (Ping timeout)
[10:57:23] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[10:58:12] *** Joins: Rusky (russell@moz-173BA32C.slkc.qwest.net)
[11:01:44] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[11:03:31] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[11:04:14] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Quit: victorporof)
[11:04:38] *** Joins: redShadow (redShadow@9BDAF02B.D15F9219.1CCF65D9.IP)
[11:05:05] <doomlord_> whats the state of serialization - i see that macros can do alot to make that sort of thing easier, but does it have inbuilt serializing ... i seem to remember #[derive(encoder)] or something
[11:05:06] *** Joins: Rym (y@B1DD8D5C.B659EC86.8772DA20.IP)
[11:05:53] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[11:07:33] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[11:07:52] *** Quits: phil (phil@684D2576.37BA1B1C.20F09BA6.IP) (Ping timeout)
[11:08:11] *** Quits: photex (photex@399640B9.24E301D6.9510F13D.IP) (Ping timeout)
[11:08:11] *** Quits: btipling_ (btipling@B47CA6CD.BE070C1E.5670445F.IP) (Ping timeout)
[11:08:28] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:08:29] *** Joins: photex (photex@399640B9.24E301D6.9510F13D.IP)
[11:08:41] *** Joins: phil (phil@684D2576.37BA1B1C.20F09BA6.IP)
[11:08:48] <doomlord_> also i just tried include!() within a macro invocation - that didn't work (  what I had in mind was a header file with some common definitions that rust macros & c macros could decode.. cross-langauge x-macros basically :) )   ... is this possible or does the order of macro evaluation preclude it
[11:09:02] *** Quits: vincent_ (vincent@92340C0D.F31F2D7D.9510F13D.IP) (Ping timeout)
[11:09:40] *** Joins: btipling (btipling@B47CA6CD.BE070C1E.5670445F.IP)
[11:10:04] *** Quits: jpf (jan@moz-A8C26A15.org) (Quit: Lost terminal)
[11:10:19] *** Joins: jpf (jan@moz-A8C26A15.org)
[11:10:33] *** Joins: LU324 (asdf@moz-864C7465.dyn.embarqhsd.net)
[11:10:37] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:12:17] *** Joins: vincent_ (vincent@92340C0D.F31F2D7D.9510F13D.IP)
[11:14:00] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[11:14:34] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[11:15:35] *** Joins: mye (mye@moz-476CD70C.dip0.t-ipconnect.de)
[11:16:01] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[11:16:19] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[11:17:28] *** jorendorff_away is now known as jorendorff
[11:18:01] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[11:20:27] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[11:20:31] *** Joins: smerft (Mibbit@A54702E.4B947797.97F07BE5.IP)
[11:21:56] *** Quits: smerft (Mibbit@A54702E.4B947797.97F07BE5.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:21:58] *** Joins: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP)
[11:22:08] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[11:22:58] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[11:24:53] *** Joins: Doppp (Doppp@ABA7820A.3D394227.C4926542.IP)
[11:26:11] *** Joins: Guest_ (textual@8C6D160F.5768461E.9532F1CE.IP)
[11:26:11] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[11:26:48] *** Quits: Doppp (Doppp@ABA7820A.3D394227.C4926542.IP) (Ping timeout)
[11:27:00] *** Quits: mib_9a0boa (Mibbit@moz-7002DE99.lns20.adl2.internode.on.net) (Quit: http://www.mibbit.com ajax IRC Client)
[11:27:03] *** Quits: aravindavk (aravinda@moz-BD0CADEE.redhat.com) (Quit: Leaving)
[11:27:32] *** Joins: philix (felipe@moz-2F401A3F.user.veloxzone.com.br)
[11:29:16] *** Quits: intuxicated (intuxicate@5BA9DB47.F2F0EDE4.DA0107E2.IP) (Quit: Leaving)
[11:29:29] *** Quits: philix (felipe@moz-2F401A3F.user.veloxzone.com.br) (Ping timeout)
[11:30:31] *** Quits: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net) (Client exited)
[11:31:03] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:31:28] *** Quits: benjamin_ (benjamin@moz-1478BC90.dip0.t-ipconnect.de) (Ping timeout)
[11:32:04] *** Joins: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net)
[11:32:13] *** Joins: Veld (Mibbit@moz-4A19983C.ip227.fastwebnet.it)
[11:32:33] *** Joins: vgeddes (vincent.ge@moz-2BBEE1D.dynamic.isadsl.co.za)
[11:32:53] <Veld> is it possible to import the names of all variants of an enum without having to specify each?
[11:32:59] <Ms2ger> No
[11:33:23] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:34:41] <SiegeLord> If you don't mind importing everything else public in that module, you could use a glob import
[11:35:19] <Ms2ger> Don't do that, though :)
[11:35:39] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[11:36:27] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[11:36:38] <SiegeLord> That's one of my primary uses of glob imports :P
[11:36:43] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[11:37:09] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[11:37:16] <SiegeLord> I have an enum with >100 variants... I'm not listing them all if I can help it
[11:37:16] <wunki> anyone know why I get "'do' is a reserved keyword" with this: https://gist.github.com/9661917
[11:37:22] <wunki> (doing the Rust for Rubyists book)
[11:37:27] <Ms2ger> We got rid of do, right?
[11:38:26] <SiegeLord> Although I think in that specific case I put them behind a dedicated module... but I have other enums where I don't do that
[11:38:27] *** Quits: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP) (Quit: bbl)
[11:39:04] <eddyb> wunki: Rust for Rubyists is... a bit oudated
[11:39:14] <eddyb> *outdated
[11:39:19] <huon> wunki: RfR is for the 0.9 release, not the master branch
[11:39:40] <eddyb> it only gets updated every "stable" release, presumably because steveklabnik doesn't have infinite time available :P
[11:40:08] <huon> wunki: the new syntax is replacing the `do` expression with `spawn(proc() println!("hello"))`
[11:40:14] <wunki> ah, ok, better to follow the online tutorial?
[11:40:15] *** Joins: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net)
[11:40:26] <eddyb> huon: yay conflicts with your change :/
[11:41:01] *** Quits: bjz (bjz@moz-38D46E1C.perm.iinet.net.au) (Ping timeout)
[11:41:13] <huon> wunki: yeah, http://static.rust-lang.org/doc/master/tutorial.html is kept (approximately) up-to-date automatically
[11:41:26] <eddyb> s/automatically//
[11:41:35] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[11:41:45] <wunki> is this concurrent now: https://gist.github.com/9661963 ?
[11:42:01] <huon> yes
[11:42:11] <eddyb> yupp. you may not see the effects because of how input/output is handled
[11:42:23] <wunki> ok, thanks again :)
[11:43:05] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[11:43:37] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[11:44:15] *** Quits: Ferreus (ferreus@moz-41A2BCF0.dip0.t-ipconnect.de) (Ping timeout)
[11:45:23] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[11:45:40] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[11:45:52] *** Quits: patpat (patpat@884CBD1.C0D2FE93.98F3E2B5.IP) (Ping timeout)
[11:47:07] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[11:48:17] *** Joins: kanru` (kanru@moz-DB4A9C19.scl3.mozilla.com)
[11:48:58] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[11:52:04] *** Joins: ganitsu (ganitsu@moz-EFF2F491.dialup.adsl.anteldata.net.uy)
[11:54:18] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:56:19] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:56:35] *** Quits: dsrx (tom@moz-EEA4C0D9.lsanca.fios.verizon.net) (Ping timeout)
[11:57:37] *** Joins: patpat (patpat@884CBD1.C0D2FE93.98F3E2B5.IP)
[11:58:03] *** Joins: mw (mw@moz-9E61E1D7.static.surfer.at)
[11:59:32] *** Joins: philix (felipe@moz-2F401A3F.user.veloxzone.com.br)
[12:00:16] *** Joins: mindcat__ (mindcat@B0EE5D6D.BDFDA69D.857BDFA9.IP)
[12:00:21] *** Quits: mindcat (mindcat@AA41C5D8.3B6AB676.857BDFA9.IP) (Ping timeout)
[12:00:48] *** Quits: mindcat_ (mindcat@AA41C5D8.3B6AB676.857BDFA9.IP) (Ping timeout)
[12:01:09] *** Joins: Ferreus (ferreus@moz-EE6F8A97.dip0.t-ipconnect.de)
[12:01:12] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[12:02:22] *** Joins: aravindavk (aravinda@moz-BD0CADEE.redhat.com)
[12:02:38] *** Joins: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca)
[12:02:59] <SiegeLord> Heh, D got overloadable multi-dimensional indexing and slicing
[12:03:30] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[12:03:49] <SiegeLord> Wonder if that will ever be considered for Rust, in some form. Seems unlikely given the trend of syntactic diabetes
[12:04:05] *** Joins: Legion35 (Mibbit@82DC195B.7212DA4A.65146B4.IP)
[12:04:13] *** Quits: Legion35 (Mibbit@82DC195B.7212DA4A.65146B4.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:04:17] *** Joins: eibwen (kvirc@moz-B8CF119D.dip0.t-ipconnect.de)
[12:04:28] <eddyb> SiegeLord: I want (to add) multidimensional indexing, but it requires VG
[12:04:39] *** Joins: mindcat (mindcat@B0EE5D6D.BDFDA69D.857BDFA9.IP)
[12:04:41] <eddyb> slicing... less likely
[12:05:24] *** jorendorff is now known as jorendorff_away
[12:06:17] *** Joins: NiccosSystem_ (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[12:06:29] <silven> VG?
[12:06:40] <SiegeLord> Don't really need VG, could just use a tuple
[12:06:42] *** Joins: Kynes (Kynes@moz-3DC6C6E7.mit.edu)
[12:06:57] <eddyb> SiegeLord: but how do you define the trait, then?
[12:06:58] *** jorendorff_away is now known as jorendorff
[12:07:11] <NiccosSystem_> why do we have "extern crate" but define them as "mod" still? (if I understand correctly?)
[12:07:24] <eddyb> NiccosSystem_: because crates != mods
[12:07:53] <NiccosSystem_> ooh yeah
[12:07:55] <SiegeLord> Index<IndexType, Result> { fn index(&self, i: IndexType) -> Result }
[12:08:00] <NiccosSystem_> Might've had a brainfart right then
[12:08:01] <eddyb> SiegeLord: so both v[i] and a[i, j] are valid. impl Index<(uint,), T> for Vec<T> for the former?
[12:08:39] <SiegeLord> Index type will be (uint,), (uint, uint) etc
[12:08:48] <eddyb> hacky
[12:08:53] <eddyb> this is precisely what VG solves
[12:09:19] <SiegeLord> I don't really see what it solves
[12:09:22] <Earnestly> Is "Ok" and "Err" just defacto convention?
[12:09:26] <Earnestly> (In matches)
[12:09:36] <eddyb> Earnestly: that's what the variants are named
[12:09:38] <SiegeLord> It forces you to implement these things recursively
[12:09:47] <eddyb> "these"?
[12:09:52] <SiegeLord> Depending on what you need done, it may end up uglier
[12:10:06] <eddyb> Index traits would always be linear
[12:10:06] <Earnestly> eddyb: But do you have to call them that?
[12:10:19] <eddyb> Earnestly: you don't call them
[12:10:23] <Earnestly> name them*
[12:10:28] <eddyb> Earnestly: those are the names of Result's variants
[12:10:35] <eddyb> if you use Result, you can't change their names
[12:10:36] *** Joins: stomper (Mibbit@moz-A540B2A8.fbx.proxad.net)
[12:10:37] <huon> eddyb: just change your nick to 'VG=Varadic Generics'
[12:10:44] *** Quits: stomper (Mibbit@moz-A540B2A8.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[12:10:44] <Earnestly> Ok(foo) => foo, does it have to Ok?
[12:10:47] <eddyb> yes
[12:10:51] <Earnestly> Okay, thanks
[12:11:01] <huon> *Ok(thanks)
[12:11:20] <eddyb> Earnestly: enum Result<T, E> {Ok(T), Err(E)} in std::result
[12:11:22] <Earnestly> Just fine
[12:11:49] <Earnestly> eddyb: Ah, I see
[12:11:49] <SiegeLord> And then IndexType could contain both indices and slices
[12:12:16] <eddyb> I don't like indexing for slicing *that* much
[12:12:24] <SiegeLord> [i, i..j] would translate to foo.index((i, foo.make_slice(i, j)))
[12:12:46] <eddyb> I'd rather have v[a..b] be desugared into v[range(a, b)]
[12:13:30] <eddyb> or overloadable slicing... that's hard to extend properly
[12:13:44] <SiegeLord> That's exactly what I wrote, except you made it less flexible
[12:14:01] <eddyb> yeah, but...
[12:14:22] <eddyb> foo[i, i..j] would just be foo[i, range(i, j)]
[12:14:28] <eddyb> which you can then implement
[12:14:38] <SiegeLord> That's exactly what I'm proposing :P
[12:14:45] <eddyb> => VG
[12:14:46] <SiegeLord> Except without forcing you to deal with range
[12:14:51] <eddyb> and sugar for range
[12:14:56] <eddyb> SiegeLord: "forcing"?
[12:14:58] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[12:15:12] <eddyb> how are you going to handle multi-dimensional "indexing" like that without range sugar?
[12:15:16] <SiegeLord> You are desugaring to a non-overloadable function
[12:15:21] *** pmoore is now known as pmoore|away
[12:15:24] *** Quits: NiccosSystem_ (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[12:15:25] <eddyb> traits are overloadable
[12:15:30] <SiegeLord> And I am desugaring to a member function
[12:15:41] <eddyb> oooh, that part
[12:15:57] <eddyb> SiegeLord: I was referring to my old rants about a..b => range(a, b)
[12:16:41] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[12:16:45] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:16:51] <eddyb> SiegeLord: in what case would you need a different type for i..j?
[12:17:04] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[12:17:55] <SiegeLord> Well, if you support some other array type for indexing (like a boolean mask) then it'd not force you to decompose range(i, j) into i and j
[12:18:25] <eddyb> huh?
[12:18:50] <SiegeLord> I don't even know how you get the i and j from range(i, j)
[12:18:52] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[12:19:01] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:19:03] <eddyb> SiegeLord: start/end?
[12:19:23] <eddyb> that's an API issue - it could be an entirely different type just as well
[12:19:54] <SiegeLord> I guess
[12:21:13] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[12:21:14] <eddyb> rusti: range(0, 5).size_hint()
[12:21:15] -rusti- (5, Some(5))
[12:21:37] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[12:21:50] <eddyb> rusti: let i = range(0, 5); (i.size_hint().val0(), i.next().unwrap())
[12:21:51] -rusti- <anon>:16:53: 16:54 error: cannot borrow immutable local variable `i` as mutable
[12:21:51] -rusti- <anon>:16         let i = range(0, 5); (i.size_hint().val0(), i.next().unwrap())
[12:21:51] -rusti-                                                               ^
[12:21:51] -rusti- error: aborting due to previous error
[12:21:52] -rusti- application terminated with error code 101
[12:22:05] *** Quits: IanCormac84 (User@32F5F989.64D641E5.67DFF8B4.IP) (Quit: Leaving.)
[12:22:05] <eddyb> rusti: let mut i = range(0, 5); let end = i.size_hint().val0(); (i.next().unwrap(), end)
[12:22:05] -rusti- (0, 5)
[12:22:13] <eddyb> well, not exactly, but close :P
[12:22:15] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[12:22:26] <SiegeLord> :P
[12:22:30] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[12:22:37] <eddyb> rusti: let mut i = range(1, 5); let len = i.size_hint().val0(); let start = i.next().unwrap(); (start, start + len)
[12:22:38] -rusti- <anon>:16:113: 16:116 error: mismatched types: expected `int` but found `uint` (expected int but found uint)
[12:22:38] -rusti- <anon>:16         let mut i = range(1, 5); let len = i.size_hint().val0(); let start = i.next().unwrap(); (start, start + len)
[12:22:38] -rusti-                                                                                                                           ^~~
[12:22:38] -rusti- error: aborting due to previous error
[12:22:39] -rusti- application terminated with error code 101
[12:22:41] <eddyb> gaaah
[12:22:52] <eddyb> rusti: let mut i = range(1u, 5); let len = i.size_hint().val0(); let start = i.next().unwrap(); (start, start + len)
[12:22:53] -rusti- (1, 5)
[12:23:14] <eddyb> I wish strcat would filter out the last two error lines :/
[12:23:26] *** Quits: skade (skade@B4A5FE21.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[12:23:31] <huon> eddyb: https://github.com/thestinger/rust-playpen/blob/master/bin/irc.sh pull request
[12:25:22] *** pmoore|away is now known as pmoore
[12:25:39] *** Joins: Doppp (Doppp@ABA7820A.3D394227.C4926542.IP)
[12:26:12] *** Joins: saml_ (saml@moz-AFAADF83.nycmny.east.verizon.net)
[12:27:36] *** Quits: Doppp (Doppp@ABA7820A.3D394227.C4926542.IP) (Ping timeout)
[12:27:37] <eddyb> huon: attributes on unsafe blocks <3
[12:27:43] <eddyb> (reading https://github.com/rust-lang/rfcs/pull/16/files)
[12:28:15] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Connection reset by peer)
[12:34:53] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[12:35:05] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[12:36:03] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[12:37:38] *** Joins: kimundi (kimundi@moz-B62309E6.dip0.t-ipconnect.de)
[12:39:03] *** jorendorff is now known as jorendorff_away
[12:39:49] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:40:07] *** kimundi is now known as zz_kimundi
[12:40:13] *** Joins: erickt_ (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[12:41:49] *** zz_kimundi is now known as kimundi
[12:42:03] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:45:23] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[12:47:02] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[12:47:07] *** Quits: pyon (user@6B56F365.A9B419CB.1C8C8CE9.IP) (Quit: work (supposedly))
[12:47:24] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[12:47:54] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[12:49:09] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[12:49:22] *** Quits: Guest_ (textual@8C6D160F.5768461E.9532F1CE.IP) (Quit: Textual IRC Client: www.textualapp.com)
[12:49:36] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[12:49:38] *** Joins: lunaryorn (lunaryorn@moz-6CC46287.dynamic.mnet-online.de)
[12:50:12] *** Joins: reverend_paco (chatzilla@moz-FDBE15EC.hsd1.ma.comcast.net)
[12:53:07] *** Quits: copumpkin (copumpkin@moz-FC353116.dyn.optonline.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[12:55:55] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[12:56:20] *** Quits: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Ping timeout)
[12:58:43] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[12:59:11] *** Quits: aravindavk (aravinda@moz-BD0CADEE.redhat.com) (Ping timeout)
[12:59:33] *** Quits: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net) (Ping timeout)
[13:01:02] *** Quits: epdtry (stuart@moz-C1405FC7.hsd1.wa.comcast.net) (Connection reset by peer)
[13:01:21] *** Joins: epdtry (stuart@moz-C1405FC7.hsd1.wa.comcast.net)
[13:01:41] *** Quits: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca) (Quit: canhtak)
[13:02:22] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[13:02:23] *** Joins: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[13:02:54] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:04:09] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[13:04:25] *** flaper87 is now known as flaper87|afk
[13:04:34] *** Joins: krdln (krdln@moz-C271714F.dynamic.chello.pl)
[13:04:36] *** Quits: saml_ (saml@moz-AFAADF83.nycmny.east.verizon.net) (Quit: Leaving)
[13:05:05] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:05:59] *** Joins: alonlevy (alon@moz-DD68D6A4.red.bezeqint.net)
[13:06:59] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[13:07:27] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[13:08:23] *** Quits: Kynes (Kynes@moz-3DC6C6E7.mit.edu) (Quit: Leaving)
[13:11:11] *** Quits: epdtry (stuart@moz-C1405FC7.hsd1.wa.comcast.net) (Connection reset by peer)
[13:11:27] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[13:11:31] *** Joins: epdtry (stuart@moz-C1405FC7.hsd1.wa.comcast.net)
[13:12:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:12:30] *** Quits: mw (mw@moz-9E61E1D7.static.surfer.at) (Client exited)
[13:12:39] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[13:12:48] *** Joins: dranov (dranov@B07D9188.1298A9BE.D602D2C5.IP)
[13:12:49] *** flaper87|afk is now known as flaper87
[13:12:51] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[13:13:09] *** Joins: skade (skade@B4A5FE21.505237C9.CAE22B62.IP)
[13:14:24] <Veld> I have a trait like this: trait Foo { fn f(&self, other: &mut Foo); }   which I'm trying to implement but the compiler complains about expecting trait Foo but finding trait Foo
[13:14:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:15:23] *** Quits: erickt_ (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[13:15:37] <huon> Veld: do you ahve two traits with the same name?
[13:15:47] <huon> (in different modules)
[13:15:58] <Veld> the implementation looks like this: fn f(&mut self, other: &Foo) {}
[13:16:05] *** jorendorff_away is now known as jorendorff
[13:16:30] <Veld> no, just this one trait
[13:16:46] <huon> oh, the implementation needs to be other: &mut Foo
[13:16:47] <huon> with the mut
[13:16:54] <huon> (I think)
[13:17:12] <Veld> right, now I feel stupid
[13:17:30] <Veld> (but the error message is a bit vague)
[13:17:34] <huon> that error message seems bad, yeah
[13:17:44] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[13:18:11] *** Joins: aravindavk (aravinda@moz-BD0CADEE.redhat.com)
[13:18:41] <kimundi> Veld: Also, you need to switch the &mut self to &self as well (or make the trait definitions use &mut for both)
[13:18:43] *** Quits: kris (kris@moz-6D20263F.fullrate.dk) (Ping timeout)
[13:18:54] *** Joins: kris (kris@moz-9376332B.dk.customer.tdc.net)
[13:19:10] <huon> Veld: it would be worth filing a bug about ("error message for mismatched &Trait vs. &mut Trait" could be improved")
[13:19:24] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[13:19:43] *** Joins: benjamin_ (benjamin@moz-1478BC90.dip0.t-ipconnect.de)
[13:20:59] *** Joins: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca)
[13:21:09] *** Joins: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[13:23:07] *** Joins: edwardw (edwardw@2D2C4852.2264CD20.339614B0.IP)
[13:23:36] *** Joins: Kynes (Kynes@moz-3DC6C6E7.mit.edu)
[13:23:49] *** Quits: mye (mye@moz-476CD70C.dip0.t-ipconnect.de) (Quit: mye)
[13:24:24] *** Joins: Mathieu (cicak@7B7B7C8D.8F79F0B0.9900354A.IP)
[13:25:24] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:26:18] *** Quits: vgeddes (vincent.ge@moz-2BBEE1D.dynamic.isadsl.co.za) (Ping timeout)
[13:26:22] *** Joins: Doppp (Doppp@moz-553020DA.hfc.comcastbusiness.net)
[13:27:04] *** jorendorff is now known as jorendorff_away
[13:27:05] *** Joins: gwty (gwtypc@5F452814.1C047769.25B273F5.IP)
[13:27:46] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:28:02] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[13:28:02] *** ChanServ sets mode: +o jdm
[13:29:49] *** Quits: Doppp (Doppp@moz-553020DA.hfc.comcastbusiness.net) (Ping timeout)
[13:30:26] *** Joins: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com)
[13:32:07] *** Joins: mye (mye@moz-476CD70C.dip0.t-ipconnect.de)
[13:32:53] *** Quits: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[13:34:10] *** Joins: Ms2ger (Ms2ger@moz-4A14BC33.ugent.be)
[13:35:07] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[13:36:43] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[13:37:49] *** Joins: glaebhoer1 (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[13:38:16] *** Quits: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Ping timeout)
[13:38:35] <huon> Veld: thanks
[13:39:06] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[13:44:11] *** Joins: Florob (Florob@moz-39532932.de)
[13:44:23] *** Quits: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net) (Quit: sw17ch)
[13:44:44] *** Quits: kris (kris@moz-9376332B.dk.customer.tdc.net) (Ping timeout)
[13:44:46] *** Joins: kris (kris@moz-147EE6DF.diku.dk)
[13:47:18] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[13:48:09] <wunki> Would it be possible to write this without a mutable var: https://gist.github.com/9664090 ?
[13:48:39] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[13:48:45] <huon> range(0, 1000).filter(|&n| is_multiple(n)).fold(0, |a, b| a + b)
[13:48:56] <huon> althoguh, iirc, 1000 is meant to be included for that problem?
[13:49:02] <wunki> woah, that's way over my head right now
[13:49:08] *** Quits: Mathieu (cicak@7B7B7C8D.8F79F0B0.9900354A.IP) (Ping timeout)
[13:49:12] <wunki> no, it says "below 1000"
[13:49:13] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[13:49:19] <wunki> the answer is also correct with this solution
[13:49:22] <myname> wunki: you never did any functional programming, did you?
[13:49:27] <huon> ah, yes, I misremembered
[13:49:46] <wunki> myname: actually, I do Clojure :/ But &n throws me off
[13:49:49] <wunki> the rest I understand
[13:49:52] <wunki> filter, fold etc.
[13:49:54] <myname> also: there is is_multiple?
[13:50:01] <kimundi> wunki: its just a pattern
[13:50:05] <huon> wunki: &n is just pattern matching a value
[13:50:08] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[13:50:11] <huon> of type &int, I guess
[13:50:16] <huon> making a n an int
[13:50:21] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[13:50:25] <kimundi> wunki: let &t = x; is the same as let t = *x;
[13:50:26] <wunki> ah, yeah, need to familiarize the syntax, just started two hours ago with rust
[13:50:27] <huon> could also be written as `|n| is_multiple(*n)`
[13:50:41] <huon> as an explicit dereference of the reference
[13:50:50] <myname> what does is_multiple do?
[13:50:58] <wunki> myname: that's my own function
[13:51:11] <wunki> myname: https://gist.github.com/wunki/9664090#file-01-multiples-rs-L10
[13:51:32] <myname> is it the reverse of something like "is_prime"?
[13:52:24] <wunki> no, it just check if it's divisible by three or five, nothing to it
[13:52:28] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[13:53:05] <SiegeLord> Can you pass a regular Rust function when you expect a proc?
[13:53:10] <myname> ah
[13:53:15] <huon> SiegeLord: normally
[13:53:49] <huon> (if the name is statically resolveable, yes; if it's via a fn() function pointer, then you need an explicit `proc() foo()`)
[13:54:31] <eddyb> yay pay wall http://www.computer.org/csdl/mags/co/preprint/06560068-abs.html
[13:55:29] <sellout> eddyb: http://www.cs.iit.edu/~scs/psfiles/Concurrent%20Average%20Memory%20Access%20Time.pdf
[13:55:49] <sellout> (http://scholar.google.com/scholar?hl=en&q=Concurrent+Average+Memory+Access+Time)
[13:56:02] <eddyb> oh, right, I should remember to use that more often :P
[13:57:27] *** Quits: alonlevy (alon@moz-DD68D6A4.red.bezeqint.net) (Ping timeout)
[13:58:10] <eddyb> I think the original article exaggerated the impact. but it looks useful for designing more efficient CPU architectures
[13:58:10] *** Joins: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com)
[13:58:18] <eddyb> sellout: thanks :)
[13:58:19] *** Joins: alonlevy (alon@moz-DD68D6A4.red.bezeqint.net)
[14:01:31] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Quit: victorporof)
[14:01:47] *** jorendorff_away is now known as jorendorff
[14:02:44] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[14:04:06] <wunki> just a fun thing, the OOP approach runs faster than the FP, about 20%
[14:04:30] *** Quits: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com) (Ping timeout)
[14:04:41] <eddyb> OOP? Rust?
[14:04:45] <eddyb> wunki: what optimization level?
[14:04:49] <kimundi> wunki: did you compile with optimization?
[14:04:54] *** Quits: Ms2ger (Ms2ger@moz-4A14BC33.ugent.be) (Ping timeout)
[14:05:06] <wunki> no, how should I compile it?
[14:05:12] <eddyb> --opt-level=3
[14:05:12] <kimundi> -O
[14:05:18] <eddyb> kimundi: don't be lazy!
[14:05:19] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[14:05:23] <pnkfelix> wunki: can you provide gist for FP version?  (I assume "OOP" verion is https://gist.github.com/wunki/9664090#file-01-multiples-rs-L10 )
[14:05:42] <eddyb> kimundi: I guess it doesn't matter much for rustc
[14:05:51] <wunki> pnkfelix: https://gist.github.com/9664468
[14:05:52] <pnkfelix> (i'd call latter more "imperative" than OOP, but whatev's)
[14:05:59] <eddyb> pnkfelix: you'd be correct :P
[14:06:00] <wunki> pnkfelix: true
[14:06:02] <Tari> looks like something is a bit broken when using liblog right now
[14:06:18] *** Quits: leowoe (Leo@moz-6CADCFED.dip0.t-ipconnect.de) (Quit: Leaving.)
[14:06:29] <Tari> I'm getting lots of unresolved references to log::* in expansion of log!() and friends
[14:06:31] *** Quits: patpat (patpat@884CBD1.C0D2FE93.98F3E2B5.IP) (Ping timeout)
[14:06:36] *** Joins: Ms2ger (Ms2ger@moz-4A14BC33.ugent.be)
[14:06:47] <kimundi> wunki: Anyway, with optimization both should compile to the same machine code
[14:07:06] <kimundi> or at least similar enough code that there isn't a difference anymore
[14:07:10] <wunki> kimundi: thanks, had no idea yet of optimization
[14:07:42] <eddyb> kimundi: I'm used to C/C++ compilers where -O3 adds a whole bunch of optimization passes
[14:08:31] <kimundi> wunki: Its disabled per default because it makes compilation slower. :)
[14:09:04] <eddyb> kimundi: in what world would optimizations make compilation faster?
[14:09:05] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[14:09:21] <eddyb> NP < P obviously
[14:09:49] <kimundi> eddyb: Well, its the case for the rustc bootstrap itself for example :P
[14:10:22] <eddyb> not... that. cheating  by secondary effects :/
[14:10:53] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:11:19] <wunki> wow, -O makes a huge difference for this micro bench, from 0.44 to 0.02
[14:11:30] <kimundi> eddyb: You never said thats cheating ;)
[14:11:55] <eddyb> wunki: sounds like a broken bench
[14:12:06] <eddyb> well, depends what unit that is
[14:12:07] <kimundi> wunki: Heh, if you put in constant values it might have computed the final value at compiletime already
[14:12:13] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[14:12:18] <pnkfelix> wunki: by the way there is built-in bench marking support available in rustc in addition to the #[test] forms
[14:12:19] <eddyb> 4ns in the bencher is what I get for noop
[14:12:34] <eddyb> (which is what Any gets for some reason. I guess the cost of a virtual call?)
[14:12:35] <wunki> pnkfelix: ah, where could I read about that?
[14:12:47] *** Quits: aravindavk (aravinda@moz-BD0CADEE.redhat.com) (Ping timeout)
[14:12:49] <eddyb> libtest docs, most likely
[14:12:53] <pnkfelix> wunki: e.g. I added this to the bottom of your file to get at it https://gist.github.com/pnkfelix/9664610
[14:13:15] <eddyb> (I guess there's also the testing guide)
[14:13:25] <wunki> pnkfelix: cool, thanks
[14:13:25] <pnkfelix> (and for me, without optimization the imperative version beats the functional, but with optimization the functional beats the imperative)
[14:13:34] *** flaper87 is now known as flaper87|afk
[14:14:13] *** Joins: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP)
[14:14:34] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:14:52] <pnkfelix> eddyb: there *are* some worlds where optimization makes compile time faster
[14:15:26] <pnkfelix> eddyb: at least for some compilers and some programs
[14:15:54] <SiegeLord> If you your optimization can prune branches, then fn main() { if(0) { rest of program } } should compile faster with optimizations
[14:16:45] <pnkfelix> eddyb: but you probably implied a universal qualifier somewhere in there.  :)
[14:16:56] *** Joins: io2 (io2@moz-EE406A5.home.otenet.gr)
[14:17:35] *** Quits: marianoguerra (marianogue@moz-EE6E8740.dip0.t-ipconnect.de) (Quit: Lost terminal)
[14:17:41] *** Joins: marianoguerra (marianogue@moz-EE6E8740.dip0.t-ipconnect.de)
[14:18:46] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[14:18:47] *** Joins: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com)
[14:19:08] *** Joins: brontron (brontron@moz-C8D86903.tc.ph.cox.net)
[14:20:27] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[14:21:36] *** Quits: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP) (Quit: mno2)
[14:22:23] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[14:23:16] *** Quits: glaebhoer1 (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[14:24:06] *** Joins: glaebhoer1 (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[14:24:58] *** Quits: glaebhoer1 (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[14:25:33] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[14:28:53] *** Joins: Pursuit (josh@moz-11DE1CB6.dhcp.insightbb.com)
[14:28:56] *** Joins: Doppp (Doppp@ABA7820A.3D394227.C4926542.IP)
[14:30:10] *** Quits: eternaleye (eternaleye@D55ECA0A.3FAF8C6D.B8C1C2E1.IP) (Ping timeout)
[14:30:10] *** Quits: epdtry (stuart@moz-C1405FC7.hsd1.wa.comcast.net) (Connection reset by peer)
[14:30:33] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[14:30:39] *** Joins: eternaleye (eternaleye@D55ECA0A.3FAF8C6D.B8C1C2E1.IP)
[14:30:40] *** Quits: vincent_ (vincent@92340C0D.F31F2D7D.9510F13D.IP) (Connection reset by peer)
[14:30:41] *** Joins: epdtry (stuart@moz-C1405FC7.hsd1.wa.comcast.net)
[14:30:43] *** Quits: Doppp (Doppp@ABA7820A.3D394227.C4926542.IP) (Ping timeout)
[14:30:45] <wunki> pnkfelix: is there a flag I need to pass to run the bench, I get `ignored` now
[14:31:26] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[14:32:02] <pnkfelix> wunki: pass `--bench`
[14:32:39] <wunki> pnkfelix: ah, thanks
[14:32:43] *** Quits: brandonson (SingingBoy@610D90A5.EE9B234.1ECA502.IP) (Ping timeout)
[14:33:19] *** Quits: eternaleye (eternaleye@D55ECA0A.3FAF8C6D.B8C1C2E1.IP) (Ping timeout)
[14:33:33] *** Joins: eternaleye (eternaleye@D55ECA0A.3FAF8C6D.B8C1C2E1.IP)
[14:33:45] *** Joins: nszceta (nszceta@moz-EF858B4E.wireless.pitt.edu)
[14:36:19] *** Quits: ChrisOei (ChrisOei@moz-30D80888.hsd1.ca.comcast.net) (Client exited)
[14:36:22] *** Joins: derek_c (derek@moz-F7814BAC.cit.cornell.edu)
[14:38:30] *** Quits: epdtry (stuart@moz-C1405FC7.hsd1.wa.comcast.net) (Connection reset by peer)
[14:38:43] *** Joins: Kruppe (user@moz-F7232BA4.dynamic.uwaterloo.ca)
[14:38:51] *** Joins: epdtry (stuart@moz-C1405FC7.hsd1.wa.comcast.net)
[14:43:43] *** Joins: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP)
[14:44:31] *** Joins: afrey71 (Mibbit@moz-54AA233A.ftth.as8758.net)
[14:44:33] *** Joins: Doppp (Doppp@moz-553020DA.hfc.comcastbusiness.net)
[14:45:27] <afrey71> Hi. I'm currently puzzled by the error "mismatched types: expected `~str` but found a `~`-box pattern".
[14:45:41] <eddyb> rusti: ~"foo"
[14:45:41] -rusti- foo
[14:45:53] <eddyb> afrey71: ahh, pattern. ~str patterns have been removed
[14:46:28] <afrey71> eddyb: okay, so what do I use instead in match(mystrvar: ~str) {}
[14:46:48] <eddyb> afrey71: match mystrvar.as_slice() {"foo" => ...}
[14:47:13] <afrey71> eddyb: as_slice()? Okay, will try, thanks.
[14:47:17] <eddyb> (which is what you should've had in the first place. ~str patterns are this weird antipattern. maybe you shouldn't have ~str at all)
[14:47:36] *** Joins: int3_ (int3_@moz-13C8D70.ri.ri.cox.net)
[14:47:40] <eddyb> someone should go ahead and implement StrBuf to remove all trace of ~str :/
[14:47:44] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[14:48:44] *** Quits: WalrusPony1 (retep998@moz-DBA66FA0.bstnma.east.verizon.net) (Ping timeout)
[14:48:52] *** Quits: Rym (y@B1DD8D5C.B659EC86.8772DA20.IP) (Ping timeout)
[14:49:15] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[14:49:33] <afrey71> eddyb: what's wrong with ~str? I use it everywhere...
[14:50:01] *** Joins: reyre_ (reyre@8A257803.33EE9F8A.1139E686.IP)
[14:50:02] <eddyb> afrey71: it's an issue of ownership abuse
[14:50:18] <eddyb> afrey71: do you have functions taking ~str arguments than &str arguments?
[14:50:25] <eddyb> *more functions
[14:51:00] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[14:51:09] *** Quits: Veld (Mibbit@moz-4A19983C.ip227.fastwebnet.it) (Quit: http://www.mibbit.com ajax IRC Client)
[14:51:28] <eddyb> (but StrBuf is the replacement for a growable ~str as Vec<T> is the replacement for a growable ~[T], that's what I was talking about previously)
[14:51:37] *** Quits: mindcat__ (mindcat@B0EE5D6D.BDFDA69D.857BDFA9.IP) (Quit: Lost terminal)
[14:52:07] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[14:52:11] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[14:52:15] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Connection reset by peer)
[14:52:15] <afrey71> eddyb: hm.. yes, I have some of those functions. Others taking &~str... which seems even more weird to me.
[14:52:17] *** Quits: philix (felipe@moz-2F401A3F.user.veloxzone.com.br) (Ping timeout)
[14:52:24] <eddyb> afrey71: *why*?
[14:52:41] <eddyb> afrey71: there's nothing (safe) you can do with &~str that you can't do with &str
[14:53:51] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[14:54:14] <afrey71> eddyb: uh.. because it worked. ;-)    I can try using &str, instead...
[14:54:31] <eddyb> that's never a good reason for anything
[14:54:38] <eddyb> it's an excuse :P
[14:54:56] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[14:55:02] <eddyb> afrey71: the principle of minimal requirements
[14:55:12] <eddyb> never ask for something that you don't need
[14:55:20] <eddyb> (it probably has a better name, I'm just making stuff up)
[14:55:30] <eddyb> we should put such design points somewhere
[14:56:12] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:56:19] <afrey71> eddyb: back to the matching: I have enum types with ~str arguments. So far, I matched those with MyType(~"whatever I wanted to match with")
[14:56:31] <eddyb> aww
[14:56:47] <eddyb> afrey71: you will have to use guards for now
[14:56:55] <afrey71> But that also gets me the box pattern warning.
[14:57:03] <afrey71> eddyb: guards?
[14:57:19] <eddyb> MyType(some_string, ...) if some_string == "foo" => {...}
[14:57:31] <afrey71> Oh, I see.
[14:57:59] <afrey71> Hm.. that worked in 0.9. Is that "feature" supposed to come back?
[14:58:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:58:38] <eddyb> afrey71: in a different form
[14:58:54] <eddyb> matching DSTs will be fun
[14:59:16] <afrey71> eddyb: okay, thanks.
[15:00:05] *** Joins: benjamin_____ (benjamin@moz-8733F881.dip0.t-ipconnect.de)
[15:00:23] *** Joins: dschatzberg (dschatzber@moz-E2680405.bu.edu)
[15:00:25] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[15:00:26] *** Quits: benjamin_ (benjamin@moz-1478BC90.dip0.t-ipconnect.de) (Ping timeout)
[15:00:29] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:01:06] *** Joins: IanCormac84 (User@32F5F989.64D641E5.67DFF8B4.IP)
[15:02:42] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[15:03:03] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:03:17] <Florob> eddyb, annoyingly a HashMap<~str, ~str> usually require you to pass a &~str to various functions :/
[15:03:43] *** Joins: Rym (y@B1DD8D5C.B659EC86.8772DA20.IP)
[15:04:09] <Florob> *methods
[15:04:19] <eddyb> Florob: that's why it should use Deref
[15:04:44] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[15:04:46] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[15:05:05] *** pmoore is now known as pmoore|coffee
[15:05:06] <eddyb> (I almost said Abode instead of Deref http://imgur.com/gallery/iJD8f)
[15:05:16] <eddyb> Florob: but I'm not exactly sure how to do it
[15:05:29] *** Quits: Rym (y@B1DD8D5C.B659EC86.8772DA20.IP) (Ping timeout)
[15:05:30] *** Joins: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[15:05:32] <eddyb> find_equiv right now is a hack
[15:05:55] <eddyb> Florob: I guess it's one of those coherence issues
[15:06:28] <eddyb> you can't implement the right trait on all types that implement deref *and other types*
[15:06:57] <eddyb> for example, one sane thing to do would be to *not* implement Hash on smart pointers or ~str
[15:07:11] <eddyb> ~str could be hashed, but only by its dereference
[15:07:22] *** Quits: benjamin_____ (benjamin@moz-8733F881.dip0.t-ipconnect.de) (Ping timeout)
[15:09:02] *** Joins: Rym (y@B1DD8D5C.B659EC86.8772DA20.IP)
[15:09:23] <eddyb> Florob: easy mode would be to make it a lang item/intrinsic thing
[15:09:33] *** Quits: Kruppe (user@moz-F7232BA4.dynamic.uwaterloo.ca) (Ping timeout)
[15:09:37] *** Joins: patpat (patpat@moz-1599AAE4.as13285.net)
[15:09:54] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[15:11:25] <Florob> eddyb, I think you lost me. Possibly multiple times, but particularly on "dereference of ~str"
[15:11:44] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[15:12:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:12:23] <eddyb> Florob: DST would allow you to use &* on ~str
[15:13:20] <Florob> eddyb, so you'd ultimately only be able to hash a &Str, but not a ~Str?
[15:13:36] <eddyb> you'd has a ~Str with the &Str implementation
[15:14:04] <eddyb> that way you shouldn't even need to worry about Equiv and Hash implementations doing the same thing
[15:14:08] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[15:14:16] <eddyb> Tobba: Share \o/
[15:14:29] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:14:44] <Tobba> eddyb: I was watching that on my phone
[15:14:48] <Tobba> fucking bors
[15:15:03] <eddyb> Tobba: read this http://imgur.com/gallery/iJD8f
[15:15:08] <Tobba> I like how the simplest of tests managed to segfault for some reason
[15:15:17] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[15:15:28] *** reyre_ is now known as _
[15:15:36] *** _ is now known as reyre_
[15:15:36] <eddyb> compiling just stopped for me on a win32 bot for some reason. I think it might have OOM'd
[15:15:41] *** Quits: Rym (y@B1DD8D5C.B659EC86.8772DA20.IP) (Ping timeout)
[15:15:49] *** Quits: Munchor (munchor@moz-8CFC84AD.yourvserver.net) (Client exited)
[15:16:05] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[15:16:34] <Tobba> but yep
[15:16:43] <Tobba> this means the new Cell based Rc too I think
[15:16:52] <Tobba> oh yeah I launched a build of the master yesterday then forgot about it
[15:16:59] *** reyre_ is now known as reyre
[15:17:07] <Tobba> actually, I forgot to run anything past configure, oh well
[15:17:16] <Tobba> I was hoping it had finished since I had seen no LLVM crash dialogs yesterday
[15:17:24] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[15:17:37] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[15:18:06] *** Quits: int3_ (int3_@moz-13C8D70.ri.ri.cox.net) (Client exited)
[15:18:31] *** Joins: int3_ (int3_@moz-13C8D70.ri.ri.cox.net)
[15:19:01] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:19:09] <Tobba> hm
[15:19:13] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[15:19:20] <Tobba> I should find the PR behind the immovable statics thing
[15:19:30] <Tobba> I want to see the reasoning of that, it screws over some of my code, oh well
[15:20:03] <eddyb> could you ever move out of statics?
[15:20:11] <eddyb> Tobba: moving out requires zeroing the original
[15:20:15] *** Joins: int3__ (int3_@moz-13C8D70.ri.ri.cox.net)
[15:20:20] <eddyb> Tobba: which will result in a segfault
[15:20:21] <Tobba> yeah you could
[15:20:22] *** Quits: int3_ (int3_@moz-13C8D70.ri.ri.cox.net) (Ping timeout)
[15:20:31] <eddyb> at the next access
[15:20:31] <Tobba> why would that segfault
[15:20:35] *** Joins: Rym (y@B1DD8D5C.B659EC86.8772DA20.IP)
[15:20:38] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[15:20:46] <Tobba> I thought the compiler would just flag the static as moved
[15:20:52] <eddyb> there is no such thing
[15:21:03] <eddyb> statics have lifetime 'static
[15:21:20] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:21:21] <eddyb> you can't do borrowck on something that outlives everything else by design
[15:21:55] <Tobba> I feel like I'm really missing something here
[15:21:58] <Tobba> oh well I'll fix my design up
[15:22:06] <Tobba> now that I have Share only like two things need to be statics
[15:22:07] *** Quits: int3__ (int3_@moz-13C8D70.ri.ri.cox.net) (Ping timeout)
[15:22:20] <Tobba> although in this case, I actually CANT replace the original value
[15:22:49] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[15:22:58] <Tobba> so uhhhh
[15:23:01] <Tobba> time for transmute I guess
[15:23:10] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[15:23:13] <eddyb> keep in mind that moving out zeroes the original
[15:23:20] <Tobba> or maybe I could use Unsafe now
[15:23:24] <Tobba> it does?
[15:23:25] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[15:23:26] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Connection reset by peer)
[15:23:26] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[15:23:32] <eddyb> Tobba: yes. always
[15:23:38] <Tobba> that seems weird to me
[15:23:42] <Tobba> unless you mean the option specific stuff
[15:23:46] <eddyb> nope
[15:23:56] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[15:23:58] <Tobba> wouldent that just be a ton of pointless stores
[15:24:04] <Tobba> since the compiler stops you anyways
[15:24:09] <eddyb> LLVM optimizes out the stack ones
[15:24:26] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[15:24:28] <eddyb> Tobba: it's mostly because trans doesn't use the analysis information
[15:24:39] <eddyb> (that we actually spend like half a minute gathering :P)
[15:24:55] <Tobba> sounds like a problem
[15:25:15] <eddyb> if you use an Option and take() it should be safe
[15:25:34] <Tobba> doesnt that zero out the original though
[15:25:37] <Tobba> I think Unsafe is what I need here
[15:25:43] *** Joins: lawrence (lawrence@moz-11C85B83.wireless.utoronto.ca)
[15:25:46] <Tobba> I need to cause an intentional data race basically, except theres no writes so its fine
[15:26:00] <eddyb> then why are you moving out of the static?
[15:26:08] <eddyb> why don't you... you know... take it by reference?
[15:26:09] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[15:26:17] <Tobba> it doesnt let me
[15:26:23] <eddyb> you can't do &FOO?
[15:26:31] <eddyb> or &*FOO?
[15:26:34] <Tobba> its a &mut pointer in an option
[15:26:40] <Tobba> if I do
[15:26:42] <eddyb> a &'static mut?
[15:26:45] *** Quits: derek_c (derek@moz-F7814BAC.cit.cornell.edu) (Ping timeout)
[15:26:51] <Tobba> match foo { Some(ref a) => { ... *a } }
[15:26:53] <Tobba> that errors
[15:26:53] <Tobba> yeah
[15:27:00] <eddyb> the issue there is *a
[15:27:05] <eddyb> you don't want that
[15:27:10] <Tobba> well it doesnt like pointers to pointers at all
[15:27:18] <eddyb> &**a works
[15:27:24] <eddyb> if a is a pointer itself
[15:27:26] <Tobba> the shit
[15:27:33] <Tobba> well I guess actually
[15:27:46] <Tobba> wouldent Unsafe basicaly be what I need here though
[15:27:54] <eddyb> is the static mutable?
[15:28:02] <Tobba> yeah
[15:28:04] *** pmoore|coffee is now known as pmoore
[15:28:09] <eddyb> then you shouldn't need Unsafe
[15:28:50] <Tobba> ah right
[15:28:58] <Tobba> Unsafe is only for breaking deep immutability?
[15:28:58] *** Quits: patpat (patpat@moz-1599AAE4.as13285.net) (Ping timeout)
[15:29:09] <eddyb> Tobba: yeah, anti-freeze
[15:29:15] *** Joins: patpat (patpat@moz-1599AAE4.as13285.net)
[15:29:51] <Tobba> I was just hoping for something that is... what would you call it when you could implictly copy it actually
[15:30:00] <Tobba> I forgot the name of that trait
[15:30:04] <eddyb> Pod?
[15:30:10] <eddyb> it's a C++ term, you should know it
[15:30:31] <Tobba> ah, yeah
[15:31:13] <Tobba> hm
[15:31:25] <Tobba> what dependencies does the collections module have on std other than kinds?
[15:31:28] <eddyb> rusti: static mut FOO: Option<~Vec<~str>> = None; unsafe {FOO = Some(vec!(~"foo", ~"bar"));} unsafe {println!("{:?} {}", FOO.as_mut().unwrap(), *FOO.as_ref().unwrap());}
[15:31:29] -rusti- pastebinned 5 lines of output: http://sprunge.us/aSeD
[15:31:43] *** Joins: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net)
[15:31:44] <eddyb> rusti: use std::vec_ng::Vec; static mut FOO: Option<~Vec<~str>> = None; unsafe {FOO = Some(vec!(~"foo", ~"bar"));} unsafe {println!("{:?} {}", FOO.as_mut().unwrap(), *FOO.as_ref().unwrap());}
[15:31:44] -rusti- pastebinned 5 lines of output: http://sprunge.us/HLEL
[15:31:57] <eddyb> rusti: use std::vec_ng::Vec; static mut FOO: Option<Vec<~str>> = None; unsafe {FOO = Some(vec!(~"foo", ~"bar"));} unsafe {println!("{:?} {}", FOO.as_mut().unwrap(), *FOO.as_ref().unwrap());}
[15:31:58] -rusti- pastebinned 5 lines of output: http://sprunge.us/FDHg
[15:31:59] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:32:06] <Tobba> heeeeeh
[15:32:10] <Tobba> yeah I ran into that one too actually
[15:32:12] <eddyb> well... bleah
[15:32:17] <Tobba> I forgot about that
[15:32:27] <Tobba> I dont know why that restriction was imposed either
[15:32:31] *** Joins: Munchor (munchor@moz-8CFC84AD.yourvserver.net)
[15:32:33] *** Quits: lunaryorn (lunaryorn@moz-6CC46287.dynamic.mnet-online.de) (Quit: )
[15:32:34] <eddyb> Tobba: global destructors
[15:32:41] <eddyb> there is no sane way to implement them
[15:32:42] <Tobba> I mean yeah the destructors wont be called at the end of the execution
[15:32:48] <Tobba> in my case, the execution never ends
[15:32:50] <Tobba> so woop
[15:33:06] <eddyb> is there an #[unsafe_foo] attribute for that one?
[15:33:32] *** Quits: marianoguerra (marianogue@moz-EE6E8740.dip0.t-ipconnect.de) (Quit: leaving)
[15:33:40] <eddyb> Tobba: do you really need statics, though?
[15:33:50] <Tobba> in this case
[15:33:51] <Tobba> very much yes
[15:33:58] <eddyb> I would think you could get away without them
[15:34:03] <Tobba> for everything
[15:34:05] <Tobba> except for allocators
[15:34:08] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:34:23] <eddyb> "except"? you mean the allocators are static, right?
[15:34:31] <Tobba> well yeah
[15:34:33] <eddyb> do you need a destructor for the allocator? I hope not
[15:34:41] <Tobba> of course not
[15:34:51] <Tobba> I dont think theres an unsafe_ attrib for it though
[15:34:54] <eddyb> do you have things with destructors?
[15:34:59] <Tobba> nope
[15:35:08] <eddyb> so it should be fine
[15:35:26] <eddyb> actually, I can make my SlamAllocator implementation use even less unsafe!
[15:35:46] *** Quits: W0rmDr1nk (wormdrink@5451F9BD.52135167.A77EFE04.IP) (Ping timeout)
[15:35:47] <eddyb> since I can opt-in Share
[15:35:48] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[15:35:58] <Tobba> yeah
[15:36:01] <Tobba> I can make my scheduler safe
[15:36:10] <Tobba> and basicaly everything can be safe except for paging stuff too
[15:36:44] <Tobba> there are those per-cpu-thread things that just cant be properly safe without being a mess
[15:37:03] *** Quits: patpat (patpat@moz-1599AAE4.as13285.net) (Quit: )
[15:40:18] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[15:40:22] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[15:41:19] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[15:41:30] *** Joins: Guest (textual@moz-6FD8C94B.hfc.comcastbusiness.net)
[15:41:43] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[15:41:58] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[15:41:59] *** ChanServ sets mode: +ao dherman dherman
[15:43:20] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[15:43:43] *** Quits: alex__ (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[15:44:18] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[15:44:52] *** Quits: Ferreus (ferreus@moz-EE6F8A97.dip0.t-ipconnect.de) (Ping timeout)
[15:45:23] *** Joins: alex__ (alex@moz-7421D6C9.mc.videotron.ca)
[15:47:45] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[15:48:46] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[15:50:10] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[15:52:05] *** Quits: lawrence (lawrence@moz-11C85B83.wireless.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:52:41] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[15:53:12] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:54:38] <sinistersnare> if the ~[] lint is gone, why is there still a lot of #[allow(deprecated_owned_vector)]; in the rust code?
[15:54:51] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[15:54:58] <eddyb> is it gone?
[15:55:07] <sinistersnare> its allowed by defualt* IIRC
[15:55:25] <eddyb> the entire lint is silly
[15:55:26] *** Quits: Rym (y@B1DD8D5C.B659EC86.8772DA20.IP) (Ping timeout)
[15:55:36] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:56:21] <myname> it looks like rust is losing a lot of syntax sugar
[15:56:26] *** Joins: patpat (patpat@moz-1599AAE4.as13285.net)
[15:56:50] <sfackler> sinistersnare: acrichto didn't feel like tracking down all of the #[allow(...)]s :P
[15:57:00] *** Joins: ksev (DrunkenPan@moz-264E1FDC.static.wiline.com)
[15:57:01] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[15:57:06] <sinistersnare> well maybe thats something i could do if i finish packing...
[15:57:12] <eddyb> myname: only to gain slightly more (+ a lot of semantics)
[15:57:23] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:57:39] <sinistersnare> by the way, sfackler, my stats teachers name is fackler, so whenever you speak i get a little angry (i dont like stats class...)
[15:58:21] <eddyb> sfackler is a pretty cool guy
[15:58:41] <eddyb> sfackler: did you hear my thoughts about in-crate syntax extensions?
[15:58:46] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[15:58:47] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:59:20] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:59:22] *** Quits: afrey71 (Mibbit@moz-54AA233A.ftth.as8758.net) (Quit: http://www.mibbit.com ajax IRC Client)
[16:00:28] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[16:01:26] *** Quits: edwardw (edwardw@2D2C4852.2264CD20.339614B0.IP) (Ping timeout)
[16:01:34] *** Joins: edwardw (edwardw@3570A9BA.4E6A4251.FAED9FFC.IP)
[16:02:49] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[16:03:01] *** Quits: dranov (dranov@B07D9188.1298A9BE.D602D2C5.IP) (Ping timeout)
[16:07:21] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[16:07:46] *** Joins: WalrusPony (retep998@moz-530D0BB2.dhcp.oxfr.ma.charter.com)
[16:07:58] *** Joins: onelson (owen@moz-DD666EC5.laika.com)
[16:08:54] *** Quits: kris (kris@moz-147EE6DF.diku.dk) (Ping timeout)
[16:10:00] *** Quits: ksev (DrunkenPan@moz-264E1FDC.static.wiline.com) (Ping timeout)
[16:10:11] <sinistersnare> would it be appreciated if i deleted all of the allow(deprecated_owned_vector)'s?
[16:11:06] *** Quits: alonlevy (alon@moz-DD68D6A4.red.bezeqint.net) (Ping timeout)
[16:11:22] <myname> if the code works after it, i assume
[16:11:40] <sinistersnare> yeah it does, all of those warnings were annoying me so i will and hope they accept it :)
[16:12:00] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[16:12:02] *** Joins: Savago (Savago@816F9901.E820043D.D4C04133.IP)
[16:12:26] *** Joins: espindola (espindola@8EC99D26.4B7A7726.A2E931B1.IP)
[16:13:20] <Leo`> http://paste.progval.net/show/825/
[16:13:24] <Leo`> why doesn't this work ?
[16:13:39] <Leo`> it says: http://paste.progval.net/show/826/
[16:13:44] <Leo`> fuck
[16:13:46] <Leo`> wrong message
[16:13:59] <Leo`> it says this: http://paste.progval.net/show/827/
[16:14:36] *** Quits: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca) (Quit: canhtak)
[16:14:46] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[16:14:55] *** Joins: gimpf (gimpf@moz-11D9DBFB.adsl.highway.telekom.at)
[16:15:05] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[16:16:12] *** Joins: derek_c (derek@moz-F1FB1A23.cit.cornell.edu)
[16:18:46] *** Quits: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net) (Quit: bleibig)
[16:19:21] *** Quits: derek_c (derek@moz-F1FB1A23.cit.cornell.edu) (Ping timeout)
[16:19:33] <Tobba> oh shit, I actually got master to build without crashing
[16:19:52] *** Quits: brontron (brontron@moz-C8D86903.tc.ph.cox.net) (Ping timeout)
[16:20:18] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Quit: Leaving...)
[16:20:37] *** Joins: int3_ (int3_@moz-15FBE4B6.subnet-224.amherst.edu)
[16:21:00] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[16:21:55] *** Quits: Doppp (Doppp@moz-553020DA.hfc.comcastbusiness.net) (Ping timeout)
[16:24:04] *** Quits: Ms2ger (Ms2ger@moz-4A14BC33.ugent.be) (Ping timeout)
[16:24:09] *** Parts: libfud (libfud@moz-73F272E4.res-cmts.eph2.ptd.net) ()
[16:25:29] <Luqman> 23
[16:26:34] <Leo`> no one ? :/
[16:26:49] *** Joins: ksev (DrunkenPan@moz-B69B5B8B.autodesk.com)
[16:27:41] *** Joins: Doppp (Doppp@moz-553020DA.hfc.comcastbusiness.net)
[16:28:23] <eddyb> Leo`: progval.net is down for me
[16:28:27] <eddyb> Leo`: y u no gist?
[16:29:35] *** Joins: Rym (y@B1DD8D5C.B659EC86.8772DA20.IP)
[16:29:58] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[16:30:14] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[16:30:16] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[16:30:18] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[16:30:40] *** Quits: io2 (io2@moz-EE406A5.home.otenet.gr) (Quit: )
[16:30:46] *** Joins: bmccallister (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[16:30:50] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[16:30:50] *** ChanServ sets mode: +o tjc
[16:30:52] <kimundi> Huh, a rooting error. Haven't seen one in a long time
[16:31:02] *** Quits: bmccallister (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Quit: Leaving...)
[16:31:15] <eddyb> kimundi: can't wait to kill that
[16:31:32] *** Quits: Rym (y@B1DD8D5C.B659EC86.8772DA20.IP) (Ping timeout)
[16:31:50] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[16:32:03] *** Joins: bmccallister (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[16:32:15] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Ping timeout)
[16:32:25] *** Joins: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca)
[16:33:15] <kimundi> Leo`: Anyway, the problem is that the `let ptr = ...` part creates a managed pointer on the stack, without any guarantees that there is another managed handle to it holding it alive after the end of the function call. So you can't return a reference to it because it can't guarantee the memory is not getting freed after the function finished
[16:33:30] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[16:33:51] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[16:34:29] <eddyb> kimundi: you can open those links?
[16:34:36] <eddyb> Leo`: why are you using @?
[16:34:37] <kimundi> eddyb: Took a while to load
[16:34:55] <eddyb> more than 5 minutes?
[16:35:01] *** Joins: derek_c (derek@moz-3564F76D.cit.cornell.edu)
[16:35:56] <kimundi> Leo`: You can try `fn method<'a>(&'a mut self) -> Baz<'a> { let ptr = match *self.foo { B(ref bar) => bar }; Baz { baz: ptr.as_slice() }` to instead return a reference that is valid by being tied to the lifetime of self.
[16:36:21] <kimundi> eddyb: I did press F5 a few times, and it might well be 5minutes I waited :P
[16:36:47] <eddyb> I don't really understand why anyone would use anything but gist.github.com for Rust code
[16:37:19] <kimundi> Well you need to know about it.
[16:38:24] <kimundi> If you don't know about good paste sides, or have already integrated a not-so-good one in your workflow/irc client, then its understandable. That doesn't mean I approve though ;)
[16:38:34] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Client exited)
[16:39:29] <eddyb> it's one of the (very) few pastebins that actually highlights code
[16:39:33] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[16:39:34] <eddyb> kimundi: I have weird standards
[16:39:59] <eddyb> maybe because I'm so lazy reading code that I expect it to be well formed
[16:40:15] <Havvy> kimundi:  Or have a develop integrate a terrible pastebin into an irc client.  *shakes fist at axod*
[16:40:45] *** Quits: alex__ (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[16:40:46] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[16:40:54] <Havvy> (I'm sure you've also seen some poor develop paste code into mibpaste)
[16:41:07] <kimundi> Well, better than dumb clients that just spam the channel...
[16:41:17] <kimundi> yes. yes I have.
[16:41:32] <Havvy> "Oh, you've pasted 9001 lines?  Let me post one line per second for the next two hours."
[16:41:48] <kimundi> I don'T even mind missing highlighting, but dear good at least the indentations needs to survive.
[16:42:21] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[16:42:21] <eddyb> kimundi: oh heh, I get itchy at 8 space tabs
[16:42:37] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[16:44:29] *** Quits: Pursuit (josh@moz-11DE1CB6.dhcp.insightbb.com) (Ping timeout)
[16:44:33] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[16:44:36] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[16:44:48] *** Joins: kendle (Mibbit@moz-AD62AAF2.in-addr.arpa)
[16:45:00] *** Quits: kendle (Mibbit@moz-AD62AAF2.in-addr.arpa) (Quit: http://www.mibbit.com ajax IRC Client)
[16:46:35] *** Joins: Pursuit (josh@moz-11DE1CB6.dhcp.insightbb.com)
[16:49:38] <sinistersnare> ok all "allow(deprecated_owned_vector);" removed
[16:49:43] *** Quits: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net) (Ping timeout)
[16:50:29] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[16:51:31] <Havvy> sinistersnare:  :D
[16:52:35] <sinistersnare> .....aaand then i just saw this
[16:52:36] <sinistersnare> https://github.com/mozilla/rust/commit/da3625161d8f8bcb2f43d703eec8d002d0bb9c87
[16:53:05] <sinistersnare> im stupid :)
[16:53:45] *** Joins: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP)
[16:54:25] *** Joins: wry (wry@620605B3.71150E1A.237AE2BA.IP)
[16:54:26] *** Quits: Blub\1 (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[16:55:29] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[16:56:09] *** Quits: Kxepal (Miranda@moz-5876CFFD.pppoe.mtu-net.ru) (Ping timeout)
[16:56:49] *** Parts: aepsil0n (ebopp@moz-EF530DCB.ita.uni-heidelberg.de) ()
[16:57:56] *** Quits: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com) (Client exited)
[16:58:31] *** Joins: alex__ (alex@moz-7421D6C9.mc.videotron.ca)
[16:59:50] *** Joins: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com)
[17:00:18] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Quit: Leaving...)
[17:00:28] *** Joins: Kxepal (Miranda@moz-B1712077.pppoe.mtu-net.ru)
[17:02:07] <Tobba> hm
[17:02:23] *** pmoore is now known as pmoore|away
[17:02:27] <Tobba> I think Vec could be moved to collections if kinds get moved into libprim
[17:02:30] *** Quits: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:02:49] *** Joins: Velds (Mibbit@moz-4A19983C.ip227.fastwebnet.it)
[17:02:50] <sinistersnare> Tobba, they were saying that vec is too important for that, but your argument is valid
[17:03:04] *** Quits: bmccallister (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Quit: Leaving...)
[17:03:22] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[17:03:47] <sfackler> eddyb: I don't think so
[17:03:50] <Tobba> though if it just included basic kinds I would just call it librust or whatever
[17:04:11] <sfackler> eddyb: all I'm seeing in scrollback is "I wonder why sfackler never did it"
[17:04:25] <eddyb> sfackler: hehe. mkay (I didn't originally ping you)
[17:04:34] *** Quits: ehsanul (harish@moz-24DD2596.hsd1.ca.comcast.net) (Ping timeout)
[17:04:52] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[17:05:06] <eddyb> sfackler: #[phase(syntax)] mod foo {...} is pretty easy to implement
[17:05:19] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[17:05:30] <sfackler> ah, the two pass compile idea?
[17:05:37] <eddyb> not really ;)
[17:05:40] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[17:05:51] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Client exited)
[17:05:54] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[17:05:55] <eddyb> sfackler: during cfg1, take those modules out of the AST and compile them sepparatelly 
[17:06:03] <eddyb> put them in a temporary file and load them
[17:06:12] <Tobba> hmm
[17:06:13] <Tobba> well
[17:06:19] <Tobba> I need to strip out libstd for my purposes anyways
[17:06:20] <eddyb> sfackler: by the time cfg1 finishes, they aren't in the AST anymore. but you have a bunch of plugins
[17:06:33] <eddyb> sfackler: this is all a few hours of work, pretty basic changes
[17:06:39] <Leo`> re
[17:06:39] <Velds> I have a problem with importing a trait implementation. I have main.rs, foo.rs, and trait.rs. foo.rs implements the trait in trait.rs, but I can't seem to call the methods on Foo objects in main.rs no matter what
[17:06:41] <Tobba> so I might as well create a libprim for myself, modify the prelude and move Vec to collections
[17:06:43] <sfackler> I've been thinking about a slightly more general scheme that will also have a couple of other advantages
[17:06:54] <sfackler> e.g. not requiring separate phf_mac and phf crates
[17:07:21] <Leo`> kimundi: ok i'll try
[17:07:28] <eddyb> sfackler: the issue is an use case like the quasi quote macros in libsyntax
[17:07:52] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[17:08:04] <eddyb> sfackler: since you need to compile the macro crate against the *previous* libsyntax, you would either have to distributed a shared linked snapshot again
[17:08:11] <eddyb> *distribute
[17:08:18] <eddyb> sfackler: or implement an "rlib"
[17:08:20] <Velds> more precisely, the compiler says "type Foo doesn't implement any method in scope named bar"
[17:08:31] <eddyb> sfackler: *sigh* I mess everything up. an "rbin"
[17:08:50] <Leo`> kimundi: humm I still ahve the same error
[17:09:04] <eddyb> (a binary that contains metadata and exported symbols for several crates, allowing you to compile things like plugins against it)
[17:09:06] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[17:09:12] <Leo`> I don't understand why
[17:09:32] <eddyb> sfackler: this is pretty powerful for something like a game. a scripting API without doing anything magic, and with a lot of the performance you get from Rust
[17:09:40] <sfackler> I think we really should just be distributing a dynamically linked snapshot, imo, but I am on board with the in-crate macro stuff
[17:09:42] <Leo`> while self is alive, then the &'a to Bar in self is too, and tus there is at least one @ptr to the vector
[17:09:53] <Leo`> so I shoudl be able to take a &'a slice on this vector
[17:10:24] <eddyb> sfackler: I like rbin for some reason. hmm. I wonder if you can disable sections from being loaded with the binary (i.e. metadata in .so libraries)
[17:10:52] <eddyb> acrichto: ^^ do you happen to know if you can prevent metadata from actually being loaded into memory along with the rest of a shared library?
[17:11:26] <sfackler> I think you can turn on lazy page loading in general in dlopen
[17:11:42] <pczarn> rlib causes a bug
[17:11:53] <acrichto> I'm not sure how the dynamic linker works, does it always load all sections?
[17:12:10] <eddyb> sfackler: I'd like it to not map metadata at all
[17:12:28] *** Quits: derek_c (derek@moz-3564F76D.cit.cornell.edu) (Ping timeout)
[17:12:30] <eddyb> acrichto: well... there's also SEGMENTS (caps for technicality) in ELF
[17:13:24] <pczarn> acrichto: rlibs contain .bc even though it's compressed and not valid bytecode
[17:13:27] *** Joins: nkoep (nik@moz-5B8BC9B8.pool.mediaways.net)
[17:13:45] <eddyb> pczarn: hmm?
[17:14:30] *** Joins: brontron (brontron@moz-CF02444.dia.static.qwest.net)
[17:14:31] *** Joins: libregeekingkid (quassel@83E574CB.3E557D08.E02377B3.IP)
[17:14:56] <pczarn> compressed bytecode should have .flate.bc extension
[17:15:42] <eddyb> oh
[17:15:49] <Yurume> .bc.gz?
[17:15:58] <pczarn> .bc.flate?
[17:16:02] <eddyb> why "flate"?
[17:16:07] <pczarn> also, --emit=bc --crate-type=rlib is broken
[17:16:14] <Yurume> I don't think the raw DEFLATE format is not very useful
[17:16:16] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:16:19] <Yurume> I think*
[17:16:28] <eddyb> flate is the name of a module somewhere that does DEFLATE
[17:16:37] <eddyb> I guess lzma is pretty raw :/
[17:17:01] *** Quits: libregeekingkid (quassel@83E574CB.3E557D08.E02377B3.IP) (Connection reset by peer)
[17:17:02] <eddyb> in any case, .bc.gz or .bc.xz is what you want, for compressed
[17:17:16] <eddyb> is .a not compressed at all?
[17:17:48] <Yurume> yes, it is a pure archival format.
[17:17:50] *** Joins: pyrac (pyrac@moz-598F4A4.w90-60.abo.wanadoo.fr)
[17:17:55] <Yurume> (much like tar)
[17:18:24] <eddyb> and it's still that way? a bit odd for something you only use during compilation :/
[17:19:40] <pczarn> I couldn't gunzip it
[17:19:58] <eddyb> yeah you need to inflate it
[17:20:15] <eddyb> gz is just a small header, we can add it manually if we want that
[17:21:01] <eddyb> pczarn: I used to use node.js for these tasks, it takes like 3 lines to inflate the thing. I think python also has an easy way
[17:21:25] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[17:22:06] <quasisphere> Will Vec eventually support indexing with [] or am I supposed to always use slices? This gets a bit tedious with the 2-dimensional (Vecs inside vecs) array I'm working on.
[17:22:26] <kimundi> quasisphere: It will support it
[17:22:31] <acrichto> quasisphere: it will support indexing once we fix the Index traits
[17:22:43] *** Quits: brontron (brontron@moz-CF02444.dia.static.qwest.net) (Quit: leaving)
[17:22:44] <quasisphere> I see, thanks. :)
[17:22:55] <kimundi> quasisphere: Currently the operator-overload traits for indexing/slicing are not done/being overhauled
[17:22:56] <Yurume> (in fact, there are multiple archival/container/whatever formats containing DEFLATE stream, including zlib format as in PNG, gzip file format, and ZIP file format.)
[17:23:04] *** Quits: anasyrma (x@moz-DE175E38.caltech.edu) (Ping timeout)
[17:23:32] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[17:24:04] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[17:24:10] *** Joins: anasyrma (x@moz-DE175E38.caltech.edu)
[17:24:14] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:24:27] <pyrac> hi all. I am trying to change my ~[T] to Vec<T> but I could not find the equivalent of vec::raw::from_buf_raw to build a Vec<T> from *T and a size
[17:24:59] *** Quits: anasyrma (x@moz-DE175E38.caltech.edu) (Quit: Connection reset by queer)
[17:25:33] <quasisphere> kimundi: ok, that's good to hear. now I just got to make the decision whether doing this non-trivial project euler problem will be too torturous with the current state of arrays or not.. :D thanks
[17:25:33] <pczarn> I tried, ruby -rzlib -e 'print Zlib::Inflate.inflate(STDIN.read)' and got `incorrect header check (Zlib::DataError)`
[17:26:03] <eddyb> pczarn: what are the first few bytes (in hex)?
[17:26:13] *** Joins: orospakr (orospakr@moz-72EB3530.cpe.net.cable.rogers.com)
[17:26:15] <acrichto> pczarn: flate != zlib
[17:26:24] <eddyb> acrichto: huh?
[17:26:30] <acrichto> zlib has an extra byte or two as a header and a checksum at the end
[17:26:31] *** Quits: orospakr (orospakr@moz-72EB3530.cpe.net.cable.rogers.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:26:34] <pczarn> d4bd 0958 13d7 d73f 3e21 9050 9640 954d
[17:26:41] <eddyb> acrichto: is it really a raw DEFLATE stream?
[17:26:48] <acrichto> yep
[17:26:52] <eddyb> how... is that a good idea?
[17:26:54] <acrichto> or so I last thought
[17:27:00] <acrichto> why is it a bad idea?
[17:27:11] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[17:27:24] <eddyb> acrichto: no checksum, no interop, etc.
[17:27:24] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:27:25] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[17:27:25] *** ChanServ sets mode: +ao dherman dherman
[17:27:34] <acrichto> why do we want a checksum?
[17:27:37] <acrichto> are you corrupting your rlibs?
[17:27:45] <acrichto> why do we want interop? why are you reading the bytecode manually?
[17:27:51] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[17:27:51] *** ChanServ sets mode: +o tjc
[17:27:52] *** Joins: paraze (paraze@moz-DAFFEE79.w90-27.abo.wanadoo.fr)
[17:27:54] <eddyb> pczarn is
[17:27:57] <acrichto> the format of an rlib is not guaranteed to be an archie
[17:28:02] <acrichto> you're not supposed to look at an rlib
[17:28:07] <doomlord_> operator overloads for indexing, do those have a named method equivelt (like how in c++ you can explicitely call operator[](...) or whatever
[17:28:07] <acrichto> if you want the bytecode, you use --emit=bc
[17:28:10] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[17:28:14] *** Joins: Ms2ger (Ms2ger@268865C6.EA68D5B.F15B0BB3.IP)
[17:28:14] <eddyb> acrichto: wait, I have a good reason :)
[17:28:15] <pczarn> but I'm looking at --emit=bc
[17:28:24] <pczarn> acrichto: it's the same
[17:28:26] <sfackler> doomlord_: Index right now
[17:28:35] *** Joins: orospakr (orospakr@moz-72EB3530.cpe.net.cable.rogers.com)
[17:28:52] <acrichto> pczarn: then that's a bug, that doesn't mean that you're supposed to look inside an rlib
[17:28:55] <eddyb> acrichto: with the zlib header, you can tell how much space you need (or can you? I may be silly. or is it the gzip header?)
[17:28:57] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[17:29:02] <doomlord_> the way you say 'right now' seems to imply 'subject to change' :)
[17:29:04] <sfackler> doomlord_: soon to be a trio I think: Index, IndexMut and IndexAssign
[17:29:08] <acrichto> eddyb: that's not zlib, possibly gzip
[17:29:18] <sfackler> the current Index trait isn't useful enough
[17:29:26] <sfackler> you can't use it for e.g. a HashMap or Vec
[17:29:31] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[17:29:36] <acrichto> eddyb: http://tools.ietf.org/html/rfc1950 <- zlib just puts a like 2 bytes on the front
[17:30:01] <eddyb> yeah I remembered
[17:30:22] <eddyb> you'd think implementing the spec would make it stick in your memory
[17:30:31] <kimundi> doomlord_: It will be a normal method implemented for a trait. So instead of foo[i] you can always say foo.index(i); for foo[a..b] you will be able to say foo.slice(a, b) etc
[17:31:04] <pczarn> I learned something about compressed data formats, thanks
[17:31:40] *** Joins: philix (felipe@moz-359FE93F.ufs.br)
[17:31:46] <doomlord_> that sounds great
[17:32:09] <eddyb> kimundi: but that's not really composable :(
[17:32:17] <kimundi> eddyb: hm?
[17:32:30] <eddyb> kimundi: unless you desugar [a, b] as [b][a] or something weird like that
[17:32:44] <eddyb> (that won't work in half the cases)
[17:32:51] <doomlord_> are you talking about 2d arrays there
[17:32:51] *** jorendorff is now known as jorendorff_away
[17:33:07] <kimundi> I know you want them to be merged, I just explained what is the most likely to happen atm. :)
[17:33:37] <eddyb> I guess you can always do wrappers
[17:34:03] <eddyb> but having [x, y, z] desugar to [z][y][x] is bound to confuse some people implementing their own
[17:34:23] <eddyb> kimundi: at least it makes .slice() work, so it's not *that* bad
[17:34:23] *** Joins: glaebhoer1 (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[17:34:31] <doomlord_> would you have [x,y] = .index2d(x,y) and so on
[17:34:39] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Input/output error)
[17:34:41] *** Quits: alex__ (alex@moz-7421D6C9.mc.videotron.ca) (Client exited)
[17:34:41] <sfackler> I feel like I'm missing something here. Why would [x, y, z] be anything but a syntax error?
[17:34:41] <eddyb> doomlord_: index(x, y)
[17:34:49] <eddyb> sfackler: because awesome?
[17:35:02] <doomlord_> index(x,y) ... i thought it didn't have overloading on parameters, 
[17:35:18] <eddyb> doomlord_: remember that Index is a trait
[17:35:25] <eddyb> traits have overloading
[17:35:38] <doomlord_> ... oh, a 2d collection would be a different trait / type ?
[17:35:41] * eddyb should get some real sleep, decoherence is not nice
[17:35:41] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:35:49] <eddyb> doomlord_: same trait, different type params :P
[17:36:05] <eddyb> Index<X, R> vs Index<X, Y, R>
[17:36:13] *** Joins: kris (kris@moz-147EE6DF.diku.dk)
[17:36:36] <kimundi> eddyb: Are we talking about slicing, n-ary index, or both here?
[17:36:38] <doomlord_> i didn't know that would produce a different trait :)  ... does the same apply to structs i wonder.. 
[17:37:51] <kimundi> doomlord_: What do you mean with "does this apply to structs"?
[17:38:18] <doomlord_> Index<X,R>   has different methods to Index<X,Y,R> .. does that make it a different trait?
[17:38:38] <doomlord_> (and in turn supplies a different 'index' method)
[17:39:08] <doomlord_> so does that mean struct Foo<X,R>  and struct Foo<X,Y,R> are also 2 different structs, i didn't expect they would be
[17:39:33] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[17:41:17] *** Quits: StarLight (StarLight@moz-5692E7D4.pppoe.avangarddsl.ru) (Ping timeout)
[17:42:20] <kimundi> doomlord_: Slightly confused here - `struct Foo<X,R>` and `struct Foo<X,Y,R>` are not the same struct.
[17:42:53] <kimundi> In the same sense that `struct Foo<X,R>` and `struct Foo<X,Y,R>` can be different structs if defined in different places
[17:43:09] <kimundi> err, I meant to write the same definition there, but whatever :P
[17:43:10] <eddyb> doomlord_: those are instantiations of the same trait
[17:43:19] <eddyb> doomlord_: trait Index<..T, R> {...}
[17:43:33] * eddyb should keep a VG Clue Bat (TM) handy
[17:44:03] <kimundi> doomlord_: You can implement the same trait with different type parameters for the same type
[17:44:06] <doomlord_> kimundi, i mean if you had those in the same module. same ident, different typeparams
[17:44:16] <kimundi> doomlord_: Then you get a compile error.
[17:44:26] *** Quits: Kynes (Kynes@moz-3DC6C6E7.mit.edu) (Quit: Leaving)
[17:44:38] <kimundi> rustilite: struct Foo<T>; struct Foo<T, U>;
[17:44:42] -rustilite- pastebinned 8 lines of output: http://ix.io/bbx
[17:44:54] <kimundi> like this ;)
[17:45:01] <doomlord_> ok. the trait really is a different instantiation
[17:45:38] <eddyb> doomlord_: sorry for misleading you :P
[17:45:40] <doomlord_> ( i was remembering doing some sort of double-dispatch to fake overloading 'collide(a,b) ... collide_spaceship ... collide_asteroid yada yada..' )
[17:45:42] *** Joins: StarLight (StarLight@2420915.6E46BAD1.F1EF1E39.IP)
[17:45:50] <kimundi> rustilite: trait Foo<T> {} struct MyType; impl Foo<uint> for MyType {} impl Foo<()> for MyType {}
[17:45:51] -rustilite- error: main function not found
[17:45:51] -rustilite- error: aborting due to previous error
[17:45:51] -rustilite- application terminated with error code 101
[17:45:58] <kimundi> rustilite: trait Foo<T> {} struct MyType; impl Foo<uint> for MyType {} impl Foo<()> for MyType {} fn main() {}
[17:46:00] <doomlord_> (intermediate trait to dispatch the next parameter and so on..)
[17:46:01] -rustilite- pastebinned 32 lines of output: http://ix.io/bby
[17:46:19] <eddyb> doomlord_: you can overload trait instantiations but not on arity (which VG gives you)
[17:46:25] <kimundi> okay, maybe you can not do it after all atm :P - but I think its planned
[17:46:46] * eddyb places kimundi back into coherence
[17:46:49] *** Quits: luz (lu.cy@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[17:46:54] <doomlord_> i wonder if i can concoct a macro to setup double-dispatch traits..
[17:46:55] <kimundi> eddyb: That is coherent
[17:47:34] <eddyb> doomlord_: you can get C++ style overloading on functions with VG and traits (a macro for that would be cool)
[17:47:45] *** Quits: ksev (DrunkenPan@moz-B69B5B8B.autodesk.com) (Ping timeout)
[17:48:03] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[17:48:42] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[17:49:25] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[17:49:33] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[17:49:47] *** Joins: Rym (y@4C1DC7DA.2302A1FF.51C6DE68.IP)
[17:50:57] <kimundi> eddyb: Idea: 4 langitem types Range, RangeTo, RangeFrom, FullRange. 4 constructor expressions associated with them: `a..b`, `a..`, `..b`, `..`. Merge Index and Slice. Impl Index<uint>, Index<Range>, Index<RangeTo>, Index<RangeFrom>, Index<FullRange> for a container to get foo[i], foo[a..b], foo[..b] foo[a..], foo[..]. Add VG and you get foo[a, b, c] as well
[17:51:36] <eddyb> so my generic a..b sugar, but restricted to indexing
[17:51:52] *** Joins: alonlevy (alon@2CD54432.57968636.E9C721AF.IP)
[17:51:56] <eddyb> kimundi: I can see it working
[17:52:05] <kimundi> Restricted how?
[17:52:18] <eddyb> nevermind, you didn't actually restrict them
[17:52:39] <eddyb> kinda crazy that x[..] can (sometimes) be equivalent to &*x
[17:52:52] *** Quits: Ms2ger (Ms2ger@268865C6.EA68D5B.F15B0BB3.IP) (Ping timeout)
[17:52:58] <kimundi> make Range implement iterator and you get for i in 0..15 { ... } :)
[17:53:09] <kimundi> eddyb: Well, it will already be with the current plans
[17:53:24] *** Joins: ChrisOei (ChrisOei@moz-53A9266A.blurb.com)
[17:53:25] <eddyb> s/can/will/
[17:53:33] <kimundi> sure
[17:53:54] <eddyb> (as in, I know we want it, still feels... crazy. I don't mind it as much as strcat would, but then again, I'm not practical)
[17:54:16] *** Joins: ehsanul (harish@moz-A9E56CFE.hfc.comcastbusiness.net)
[17:54:27] <kimundi> Don't see a consistent way around it though
[17:54:31] <kmc> is there a function to run an iterator to completion, discarding output?
[17:54:41] <kmc> the best I see is that I can call last() and ignore the return value
[17:54:45] *** Joins: Ms2ger (Ms2ger@268865C6.EA68D5B.F15B0BB3.IP)
[17:54:48] <eddyb> we should add .run() for that
[17:54:53] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[17:54:53] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:55:02] <eddyb> kmc: I forgot about my generator style iterator RFC I have to write :(
[17:55:20] <eddyb> (which lets you fold with a for loop and other such crazy things)
[17:55:33] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[17:55:52] <andrew-d_w> So, is it possible to statically link C libraries with a Rust binary?  Specifically, I'd like to statically link in OpenSSL on OSX with rust-openssl
[17:56:05] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[17:56:12] <kimundi> eddyb: I wonder if we can usefully support `foo[a..b] = c`
[17:56:42] *** Joins: luz (lu.cy@moz-CD18B14B.customer.cdi.no)
[17:57:03] <eddyb> kimundi: but that doesn't make sense :P
[17:57:20] <eddyb> *foo[a..b] = c; *might* work, but not in all cases
[17:57:22] <kmc> andrew-d_w: yes
[17:57:39] <kmc> andrew-d_w: http://static.rust-lang.org/doc/master/guide-ffi.html#linking
[17:57:48] <eddyb> kimundi: slices are rvalues, right? now I'm really confused
[17:57:56] <kimundi> eddyb: I forgot, do we require * for index assign?
[17:58:01] <kmc> though (at least on the version I was using) there was a bug such that kind="static" would still pick the dylib sometimes
[17:58:07] <eddyb> kimundi: I know index results are lvalues (after we fix the traits)
[17:58:37] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[17:59:04] *** Joins: bmccallister (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[17:59:17] <andrew-d_w> kmc: Thanks.  I'll poke around with it and see if I can get it to find the library and link properly
[17:59:19] *** Quits: bmccallister (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Quit: Leaving...)
[17:59:22] <o11c> andrew-d_w: rust binary, should be easy. Rust library, hard.
[17:59:47] <andrew-d_w> o11c: I'm trying to do both :-P  Final artifact: binary.  However, the dependency comes from rust-openssl
[17:59:50] <kmc> o11c: we're doing it with servo, but yeah, there are complications
[18:00:02] <kimundi> eddyb: Well, I'm wondering. Assuming the semantic is "write c to the &mut [T] slice defined by the bounds a and b", what should c be? A slice? A Iterator? What happens if there aren't enough values to fit into the &mut [T]?
[18:00:24] <kmc> one complication is that you can't link a static library into a dynamic library unless the former was compiled with -fPIC
[18:00:29] <kmc> which I've run into in C++ projects as well
[18:00:34] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Ping timeout)
[18:00:37] <o11c> kmc: just embed the link flags into the rlib, that'd help a lot
[18:00:38] <Tobba> ugh
[18:00:41] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[18:00:44] <Tobba> collections has a lot of std dependencies sadly
[18:01:03] <eddyb> kimundi: I'd rather have a custom method on slices
[18:01:19] *** Joins: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za)
[18:01:20] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[18:01:33] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[18:02:04] <Tobba> although, mostly what collections uses is basic stuff
[18:02:14] <kimundi> eddyb: Yeah, that would solve that, I'm just wondering you could merge Index and Slice without corner cases... actually you could just simply not implement IndexMut<Range>, taht would solve that problem :P
[18:02:24] *** Quits: redShadow (redShadow@9BDAF02B.D15F9219.1CCF65D9.IP) (Quit: Leaving)
[18:03:25] *** Quits: q66 (q66@moz-25DACF.range109-154.btcentralplus.com) (Quit: Leaving)
[18:03:44] <eddyb> kimundi: you need IndexMut though, that gives you a &mut T
[18:03:52] <eddyb> kimundi: or a &mut [T]
[18:04:01] <eddyb> you are thinking of IndexSet
[18:04:02] <kimundi> eddyb: IndexAssign I meant
[18:04:07] <eddyb> or Assign
[18:04:08] <kimundi> sorry :)
[18:04:32] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[18:04:32] *** ChanServ sets mode: +o tjc
[18:04:39] <eddyb> the range can fail already. so it's not that bad if you let IndexSet fail
[18:04:51] <eddyb> kimundi: I actually forgot about base[index] = value; being its own trait
[18:04:56] *** Quits: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com) (Client exited)
[18:05:14] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[18:05:30] *** Joins: q66 (q66@moz-25DACF.range109-154.btcentralplus.com)
[18:05:38] <Tobba> hm
[18:05:43] <Tobba> maybe if std was just changed to not rely on Vec
[18:06:28] *** Joins: ksev (DrunkenPan@moz-B69B5B8B.autodesk.com)
[18:06:56] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:10:06] *** Joins: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:10:34] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[18:11:25] *** Joins: Florob (Florob@moz-39532932.de)
[18:11:51] *** Quits: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Connection reset by peer)
[18:11:53] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:12:08] *** Joins: ewalstad (Adium@moz-9A04E871.dedicated.static.sonic.net)
[18:13:09] *** Quits: fabiand (fabiand@moz-844C9A8.adsl.alicedsl.de) (Quit: Verlassend)
[18:13:16] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Input/output error)
[18:13:46] *** Joins: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:13:55] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[18:14:26] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[18:14:46] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[18:15:00] <Tobba> ugh
[18:15:12] <Tobba> chocolatey does something extremely strange when putting rust on your path
[18:15:46] <Tobba> it doesnt actually put it on the path, instead it seems to add some form of macro
[18:15:59] <Tobba> which remained after I uninstalled it, of course
[18:16:20] *** Quits: orospakr (orospakr@moz-72EB3530.cpe.net.cable.rogers.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:16:42] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:16:52] *** Joins: johnpclaus (johnpclaus@moz-7B864857.hlrn.qwest.net)
[18:17:07] *** Quits: Doppp (Doppp@moz-553020DA.hfc.comcastbusiness.net) (Ping timeout)
[18:17:16] *** Quits: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[18:18:01] <Tobba> anyone know a way I can see that the heck that thing did?
[18:18:14] *** Joins: claudiu_ (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP)
[18:18:24] *** Quits: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP) (Input/output error)
[18:18:24] *** Joins: Doppp (Doppp@moz-553020DA.hfc.comcastbusiness.net)
[18:18:25] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[18:18:47] *** Quits: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP) (Ping timeout)
[18:19:05] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[18:19:33] *** Quits: Velds (Mibbit@moz-4A19983C.ip227.fastwebnet.it) (Quit: http://www.mibbit.com ajax IRC Client)
[18:20:39] <Tobba> sadly, the nuget side is kinda crap and wont let me download the files behind the package, so I cant find the install script
[18:21:06] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[18:21:46] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[18:26:21] *** Joins: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:26:53] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[18:27:18] *** Joins: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP)
[18:27:24] <Ms2ger> What's libfourcc?
[18:27:50] <kimundi> fourcc!("abcd")
[18:27:51] <sfackler> Ms2ger: http://static.rust-lang.org/doc/master/fourcc/index.html
[18:28:10] <Ms2ger> Oh yes, that ridiculous thing :)
[18:28:20] *** Quits: Doppp (Doppp@moz-553020DA.hfc.comcastbusiness.net) (Ping timeout)
[18:28:21] <Tobba> also eddyb, &** doesnt work
[18:28:24] <Tobba> error: cannot borrow immutable dereference of `&`-pointer as mutable
[18:28:31] <eddyb> Tobba: than make it mutable :P
[18:28:36] <Tobba> did
[18:28:36] <eddyb> Tobba: ref mut
[18:28:46] <eddyb> actually, &mut ** as well
[18:28:52] <Tobba> ah, yes
[18:29:00] <eddyb> and you can use destructuring to get that reference without having to do **
[18:29:08] <eddyb> like Some(~ref mut x)
[18:29:15] <o11c> yikes, that documentation is *fail*
[18:29:29] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[18:29:44] <Tobba> eddyb: I dont even know what that does
[18:30:10] <eddyb> Tobba: it's a pattern for Option<~T>
[18:30:25] <eddyb> Tobba: ~ dereferences the ~T and then ref mut takes a mutable reference to the interior
[18:30:31] <Tobba> in this case its Option<&'static mut T>
[18:30:36] <Tobba> so it doesnt really like that
[18:30:36] *** Joins: p1start (rewi@moz-E7F3D014.org)
[18:30:41] <Havvy> Somebody should take the first line of Wikipedia and add it to the libfourcc documentation:  A FourCC (literally, four-character code) is a sequence of four bytes used to uniquely identify data formats.
[18:30:48] <eddyb> Tobba: oh, Some(&ref mut x) then
[18:31:06] <Tobba> I had no idea this was a thing
[18:31:23] <eddyb> Rust has pattern matching, remember :P?
[18:31:50] <Tobba> at this point I cant even remember what the original issue was
[18:32:05] <Tobba> for some reason I couldent copy POD values out of an option due to mutability or something
[18:32:37] *** Joins: dsyang (dsyang@moz-C45D48C5.hsd1.pa.comcast.net)
[18:32:43] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[18:32:47] <Ms2ger> Havvy, you? :)
[18:32:51] <eddyb> Tobba: well, you were wrong :P
[18:32:56] *** Quits: eibwen (kvirc@moz-B8CF119D.dip0.t-ipconnect.de) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[18:32:58] <eddyb> Tobba: &mut T is not Pod
[18:33:05] <eddyb> Tobba: it's affine
[18:33:27] *** Quits: skade (skade@B4A5FE21.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:33:35] <Havvy> Ms2ger:  It'd take too much of my resources to do so.
[18:33:35] <eddyb> like ~T, but you can mutably reborrow it (which is checked by borrowck in its own way)
[18:33:46] <Tobba> yeah
[18:33:49] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:33:49] <Havvy> I mean, I already did my good deed of the day. ;)
[18:33:57] <Tobba> I should've been able to re-borrow it by just copying shouldent I
[18:34:01] <Ms2ger> Helped an old lady cross the street? :)
[18:34:05] <Tobba> or am I horribly wrong
[18:34:23] <Havvy> Ms2ger:  Updated a wiki with warnings saying not to use something.
[18:34:33] <Ms2ger> <3
[18:34:33] <Havvy> You know the one.
[18:34:37] <eddyb> Tobba: that only happens when you pass it to another function or call a method on it though
[18:34:43] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[18:34:51] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Input/output error)
[18:34:53] <eddyb> Tobba: you can't copy &mut T because it's affine because it's a non-aliasable pointer
[18:35:05] *** Parts: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP) ()
[18:35:12] <Tobba> h
[18:35:13] <Tobba> m
[18:35:14] <Tobba> I guess
[18:35:29] <eddyb> rusti: let x = 0; let y = &mut x; let z = (y, y);
[18:35:30] -rusti- pastebinned 11 lines of output: http://sprunge.us/dOYi
[18:35:45] <eddyb> rusti: let mut x = 0; let y = &mut x; let z = (y, y);
[18:35:46] -rusti- pastebinned 8 lines of output: http://sprunge.us/EZIN
[18:35:49] <Tobba> well
[18:35:53] <eddyb> Tobba: ^^
[18:35:54] <Tobba> that makes two copies of it
[18:36:03] <eddyb> yes, that's what Pod allows
[18:36:16] <eddyb> rusti: let mut x = 0; let y = &mut x; let z = (&mut *y, &mut *y);
[18:36:17] -rusti- pastebinned 13 lines of output: http://sprunge.us/EeFP
[18:36:36] <eddyb> Tobba: ^^ explicit reborrow
[18:36:38] *** Quits: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca) (Client exited)
[18:36:44] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[18:36:52] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:36:53] <eddyb> rusti: let mut x = 0; let y = &mut x; let z = (Some(y), Some(y));
[18:36:53] -rusti- pastebinned 8 lines of output: http://sprunge.us/RLXS
[18:36:59] <Tobba> honestly
[18:37:02] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[18:37:11] <Tobba> I still dont know why the match wouldent just move the value
[18:37:12] <eddyb> hmpf, that should give a different error message
[18:37:16] <Tobba> but thats apparently disallowed for statics
[18:37:20] <Tobba> ... wait right
[18:37:21] <eddyb> Tobba: moving destroys the original
[18:37:24] <Tobba> yeah
[18:37:34] <eddyb> rusti: let mut x = 0; let y = &mut x; let z = Some(y); let w = Some(y);
[18:37:34] -rusti- pastebinned 8 lines of output: http://sprunge.us/eHTS
[18:37:36] <Tobba> which in my case is perfectly safe except its very much not what I wanted
[18:38:01] <eddyb> I wanted to give a better example but meh
[18:38:20] *** Quits: Rym (y@4C1DC7DA.2302A1FF.51C6DE68.IP) (Ping timeout)
[18:39:12] *** Joins: jensnock_ (jensnocker@moz-33279404.customers.ownit.se)
[18:39:13] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:39:19] *** Joins: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com)
[18:39:36] <Tobba> I thought a move and a reborrow were basicaly the same thing
[18:39:38] <Tobba> apparently not the
[18:39:39] <Tobba> n
[18:40:03] *** Quits: p1start (rewi@moz-E7F3D014.org) (Ping timeout)
[18:40:04] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[18:40:26] *** Quits: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com) (Quit: Leaving.)
[18:40:30] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[18:40:30] *** ChanServ sets mode: +ao brson brson
[18:40:43] <eddyb> Tobba: quite different
[18:41:01] *** Quits: jensnock_ (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[18:41:05] <eddyb> a copy, a move and a reborrow are all semantically different, even though each of them is a shallow copy
[18:41:13] *** Joins: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca)
[18:41:14] *** Quits: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca) (Quit: canhtak)
[18:41:22] *** Joins: nlminhtl (ignotus@moz-393BCEC.la.net.ua)
[18:41:25] *** Joins: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca)
[18:41:44] <eddyb> a move destroys the original while a reborrow "blocks" the original borrowed reference
[18:42:21] *** Quits: WalrusPony (retep998@moz-530D0BB2.dhcp.oxfr.ma.charter.com) (Ping timeout)
[18:42:26] *** Joins: p1start (rewi@moz-E7F3D014.org)
[18:42:42] <eddyb> Tobba: we need a semantics guide for rust :/
[18:42:49] <Tobba> yeeep
[18:42:58] *** Joins: WalrusPony (retep998@moz-99A61A25.dhcp.oxfr.ma.charter.com)
[18:43:01] <Havvy> We also need videos explaining these concepts.
[18:43:11] <eddyb> Havvy: why.... videos of all things?
[18:43:13] *** Quits: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za) (Quit: Lost terminal)
[18:43:14] <brson> /names
[18:43:22] <brson> 500 people in #rust today
[18:43:22] <Tobba> huh, odd
[18:43:24] <Tobba> error: mismatched types: expected `&'static mut [core::paging::PageTable]` but found an `&`-pointer pattern
[18:43:37] <eddyb> Tobba: no DST yet :P
[18:43:49] <Tobba> well shit
[18:43:59] <eddyb> Tobba: Some(ref mut x) => x.as_mut_slice()
[18:44:01] *** Joins: io2 (io2@moz-EE406A5.home.otenet.gr)
[18:44:11] <Havvy> eddyb:  Because sometimes having somebody say what's going on and explain it step by step is easier than reading.
[18:44:33] <Tobba> eddyb: wouldent that call as_mut_slice on a pointer in a pointer though
[18:44:50] <eddyb> Tobba: that method call is a noop (fn as_mut_slice(self) -> &mut [T] {self} implemented on &mut [T])
[18:45:02] <eddyb> Tobba: but the autoderef for the call does a reborrow
[18:45:24] <eddyb> Havvy: this is not "learn Visual Basic" videos
[18:45:38] <Tobba> as long as its intuative
[18:45:49] <Tobba> our errors are pretty good but the semantics are pretty badly explained
[18:46:11] <eddyb> Havvy: I guess archiving presentations explaining those semantics (without having targeted videos) would be fine
[18:46:20] <eddyb> I shouldn't complain as long as I still have text
[18:46:44] *** Quits: p1start (rewi@moz-E7F3D014.org) (Ping timeout)
[18:46:47] *** jorendorff_away is now known as jorendorff
[18:46:50] <eddyb> I enjoy hacker conferences for the lulz and very interesting parts
[18:46:52] <Havvy> Yeah. I wasn't saying cull text.
[18:46:55] <Tobba> eddyb: I'm not sure why & mut [T] is much different from &mut T though?
[18:47:06] <eddyb> Tobba: because we don't have DST yet
[18:47:36] <Tobba> wait right
[18:47:41] <Tobba> [T] can have an arbitary size
[18:47:44] *** Quits: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Connection reset by peer)
[18:47:44] <Tobba> so I cant really dereference it
[18:47:52] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:48:09] <eddyb> Tobba: you will under DST
[18:48:19] <Tobba> yeah
[18:48:27] <eddyb> following the "dereference operator never dereferences" doctrine
[18:48:40] <Tobba> well
[18:48:42] <Tobba> hm
[18:48:48] <Tobba> I really want to have a proper stdlib at this point
[18:48:56] <Tobba> reimplementing everything from std is madness, even if its just copy n paste
[18:49:05] <Tobba> I should just copy libstd and rip and tear
[18:49:42] <eddyb> strcat is getting his way, std:: vec/slice for example
[18:51:49] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:54:08] <pcwalton> acrichto: ever seen "ReaderRng.fill_bytes could not fill buffer: read 1100 out of 2048 bytes." ?
[18:54:25] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:54:44] <acrichto> pcwalton: no, but that should be fixable
[18:54:51] <acrichto> huon: ^
[18:54:58] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[18:55:03] <acrichto> I thought those assertions were dubious
[18:55:14] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Client exited)
[18:56:04] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[18:56:04] *** ChanServ sets mode: +o tjc
[18:57:03] *** Joins: twi (Adium@D9AE5AC1.E0BD96E5.9ECBD630.IP)
[18:57:43] *** Joins: WalrusPony1 (retep998@moz-9F58AA44.bstnma.east.verizon.net)
[18:58:40] *** Quits: WalrusPony (retep998@moz-99A61A25.dhcp.oxfr.ma.charter.com) (Ping timeout)
[18:59:02] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:59:18] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[19:01:01] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:01:08] *** Quits: ksev (DrunkenPan@moz-B69B5B8B.autodesk.com) (Ping timeout)
[19:04:23] <carllerche> When in a deeply nested mod, is there a better way to use fns from the root mod than doing `use super::super::my_fn`? I tried both use root_mod and use ::root_mod
[19:05:33] *** Quits: listboss_ (listboss@moz-CC5410C2.hsd1.ca.comcast.net) (Input/output error)
[19:05:38] *** Joins: listboss (listboss@moz-CC5410C2.hsd1.ca.comcast.net)
[19:05:41] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Quit: Leaving...)
[19:06:13] *** Joins: skade (skade@B4A5FE21.505237C9.CAE22B62.IP)
[19:06:36] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[19:06:53] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Client exited)
[19:06:56] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[19:07:11] <Tobba> eddyb: ugh, I guess I'll copy in as_mut_slice for now
[19:07:14] <Tobba> but this is getting out of hand fast
[19:07:18] <eddyb> carllerche: use my_fn; should work
[19:08:14] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[19:08:37] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Ping timeout)
[19:08:48] *** Quits: gwty (gwtypc@5F452814.1C047769.25B273F5.IP) (Ping timeout)
[19:10:05] *** Joins: dranov (dranov@F6748802.A8779685.FB866788.IP)
[19:11:15] *** Joins: gwty (gwtypc@5F452814.1C047769.25B273F5.IP)
[19:12:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:12:18] *** Parts: krdln (krdln@moz-C271714F.dynamic.chello.pl) ()
[19:12:33] *** Joins: krdln (krdln@moz-C271714F.dynamic.chello.pl)
[19:12:46] *** Quits: hansjorg (hansjorg@moz-41C5CE61.redpill-linpro.com) (Ping timeout)
[19:12:54] *** Joins: Rym (y@D1CB9064.530F2044.8772DA20.IP)
[19:13:04] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:13:49] *** Joins: ksev (DrunkenPan@moz-B69B5B8B.autodesk.com)
[19:14:24] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:15:17] <myname> http://prat0318.github.io/2048-tetris/ it won't stop...
[19:15:46] <Ms2ger> Seen yesterday's xkcd?
[19:15:52] *** Quits: skade (skade@B4A5FE21.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:16:03] <myname> of course
[19:16:09] *** Joins: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP)
[19:16:53] *** Quits: claudiu_ (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP) (Ping timeout)
[19:17:03] <kimundi> Poor Randal ;)
[19:17:52] *** Quits: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP) (Ping timeout)
[19:18:01] <Havvy> Remember: 2048 is a nerd snipe.
[19:18:10] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[19:18:33] <Ms2ger> And a very good one too
[19:18:59] <myname> i don't think so
[19:19:14] <myname> i like the virality, but the game itself is pretty boring imo
[19:19:23] *** Quits: pyrac (pyrac@moz-598F4A4.w90-60.abo.wanadoo.fr) (Quit: pyrac)
[19:20:15] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:22:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:23:05] <Tobba> eddyb: I cant seem to find where as_mut_slice is implemented
[19:23:18] *** Quits: philix (felipe@moz-359FE93F.ufs.br) (Ping timeout)
[19:23:18] <eddyb> Tobba: grep
[19:23:30] <eddyb> libstd/slice.rs if you've updated
[19:24:37] <Tobba> yeah but that one just returns self
[19:24:49] <Tobba> I'm not seeing it gets impl'd on &mut [T]'s either
[19:24:53] <Tobba> maybe thats the point actually
[19:25:09] <eddyb> that's the entire point ;)
[19:25:20] <Tobba> oh wait
[19:25:22] <Tobba> yeah I see it
[19:25:29] <Tobba> although, I have no idea how that even works
[19:25:31] <eddyb> the method is a noop, the callsite performs the actual mutable slicing
[19:25:40] <Tobba> wouldent that just copy the inner part
[19:25:50] <eddyb> no, self is &mut [T]
[19:25:57] <eddyb> you can't implement it on [T]
[19:25:59] <Tobba> ah
[19:26:17] *** Quits: io2 (io2@moz-EE406A5.home.otenet.gr) (Quit: )
[19:26:23] <eddyb> call a method on ~[T] that is implemented for &mut [T], the call will work (and produce an intermediate &mut [T])
[19:26:36] <Tobba> wouldent that cause self to be copied/moved though
[19:26:48] <eddyb> Tobba: moved
[19:26:57] <vadimcn> kvanb: ping
[19:26:58] <eddyb> that's fine because it's given to the method
[19:27:10] <Tobba> well, match cant move it
[19:27:14] <Tobba> but as_mut_slice can?
[19:27:24] <eddyb> Tobba: match can't move it because you have a static
[19:27:39] <Tobba> wouldent as_mut_slice also logically be unable to?
[19:27:52] <eddyb> Tobba: you can move from a local, because rustc can just mark it as moved from and deny access
[19:28:10] <Tobba> hm
[19:28:23] <Tobba> though that logically means I should be able to just deref a pointer to the &mut [T]
[19:28:25] *** Quits: dranov (dranov@F6748802.A8779685.FB866788.IP) (Ping timeout)
[19:28:50] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:28:50] <Tobba> although, wouldent it have to move the static as moved, which it cant do since its not local?
[19:28:57] <Tobba> I think I'm really missing something
[19:29:02] *** Quits: sinistersnare (sinistersn@moz-7E48AC93.washdc.fios.verizon.net) (Quit: Leaving)
[19:29:14] <eddyb> Tobba: statics are weird
[19:29:19] <Tobba> as_mut_slice would basicaly be a dereference
[19:29:23] <eddyb> nope
[19:29:28] <eddyb> it's value ownership
[19:29:30] <Tobba> hm
[19:29:34] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:29:46] <eddyb> it's fn id<T>(x: T) -> T {x} with T = &mut [U]
[19:29:54] <Tobba> hm
[19:30:27] <Tobba> conclusion: statics are weird
[19:30:42] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[19:30:44] *** Joins: pyrac (pyrac@moz-598F4A4.w90-60.abo.wanadoo.fr)
[19:30:47] <eddyb> nothing owns the value so statics are like &T and &mut T
[19:30:47] *** Joins: jackneill (jackneill@moz-8FDC8344.pool.digikabel.hu)
[19:31:01] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:31:04] <Tobba> I'm not exactly seeing how its different from a reference though, isnt T.func() equal to (*T).func
[19:31:09] <Tobba> dereference*
[19:31:20] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[19:31:23] <eddyb> it's much much more complicated than that
[19:31:23] <Tobba> logically the static should get moved too
[19:31:31] <eddyb> the static can't get moved
[19:31:50] <eddyb> you could be trying to zero .rodata, for one
[19:32:51] <Tobba> .as_mut_slice feels like a bit of a bypass than anything
[19:32:59] <Tobba> dereference *should* be the exact same thing by all logic
[19:33:00] <Tobba> but eh
[19:33:22] *** Joins: taylanub (taylanub@moz-7A74005A.dip0.t-ipconnect.de)
[19:34:30] <eddyb> Tobba: under DST, calling x.as_mut_slice() on a ~[T] would be equivalent to &mut *x
[19:34:30] *** Quits: IanCormac84 (User@32F5F989.64D641E5.67DFF8B4.IP) (Ping timeout)
[19:34:39] <eddyb> Tobba: right now it's all special cases
[19:34:53] <Tobba> yeah uh
[19:34:56] <Tobba> what is the difference though
[19:34:58] *** Quits: nszceta (nszceta@moz-EF858B4E.wireless.pitt.edu) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:35:22] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Ping timeout)
[19:35:24] *** Joins: hansjorg (hansjorg@moz-41C5CE61.redpill-linpro.com)
[19:35:30] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[19:35:43] <eddyb> Tobba: [T] is not a type
[19:35:56] <Tobba> I wouldent need to dereference it that far down though would I
[19:36:08] <eddyb> Tobba: and I don't mean that it's uninstantiable - it doesn't exist *at all*
[19:36:09] *** Joins: IanCormac84 (User@E1553E22.64D641E5.67DFF8B4.IP)
[19:36:23] <eddyb> Tobba: you need to dereference to reborrow (or reslice in this case)
[19:36:29] <Tobba> if I had a &&mut [T] and dereferenced that I'd get a &mut [T]
[19:36:35] *** Quits: alonlevy (alon@2CD54432.57968636.E9C721AF.IP) (Ping timeout)
[19:36:38] <Tobba> not seeing how as_mut_slice isnt just an indirect dereference
[19:36:38] *** o11c is now known as o11c|interview
[19:36:42] <eddyb> &mut [T] is not copyable, you can't take it out
[19:36:49] <Tobba> oh
[19:36:56] <eddyb> I said this hours ago
[19:37:06] *** Joins: nszceta (nszceta@moz-EF858B4E.wireless.pitt.edu)
[19:37:10] <eddyb> when you call as_mut_slice, the compiler inserts a reborrow/reslice
[19:37:24] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[19:37:34] <Tobba> I thought derefrence would give me the value inside of it without copying
[19:38:06] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:38:09] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Client exited)
[19:38:13] <eddyb> Tobba: you can't move out of the dereference of a borrowed pointer
[19:38:27] <eddyb> that's (almost) the exact error message... there's no better way to put it
[19:38:38] <eddyb> you don't own the data, and it's not Pod, you can only take a reference to it
[19:38:58] *** Quits: nszceta (nszceta@moz-EF858B4E.wireless.pitt.edu) (Ping timeout)
[19:39:11] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[19:39:42] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[19:42:22] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[19:42:26] <Tobba> turns out though, if you have an array like that, you can actually index it
[19:42:32] <Tobba> a slice like that, rather
[19:42:48] <doomlord_> takes a while to get used to the fact rust moves by default but it makes sense
[19:42:54] *** Joins: claudiu (claudiu@moz-FB94486E.thefacebook.com)
[19:43:19] <Tobba> yeah, I still havent entirely figured out how the moving and ownership rules work
[19:43:26] *** Joins: claudiu_ (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP)
[19:43:35] <Tobba> some things move and some dont
[19:43:50] *** Joins: nszceta (nszceta@moz-E458A7C0.pharm.pitt.edu)
[19:44:02] <eddyb> Tobba: Pods don't move
[19:44:16] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:44:26] <Tobba> I thought you said it wasent pod though
[19:44:29] *** Quits: KokaKiwi (kokakiwi@moz-D674DAC6.kokakiwi.net) (Ping timeout)
[19:44:40] *** Quits: claudiu (claudiu@moz-FB94486E.thefacebook.com) (Ping timeout)
[19:45:09] *** Quits: murph (murph@moz-769F6638.oracle.com) (Client exited)
[19:45:20] *** Joins: murph (murph@moz-769F6638.oracle.com)
[19:45:33] <eddyb> Tobba: I mean, that's the rule. I said it wasn't Pod, so it moves
[19:45:38] <eddyb> (instead of copying)
[19:47:30] *** Joins: Veld (Mibbit@moz-4A19983C.ip227.fastwebnet.it)
[19:49:03] *** Joins: KokaKiwi (kokakiwi@moz-D674DAC6.kokakiwi.net)
[19:49:20] *** Quits: IanCormac84 (User@E1553E22.64D641E5.67DFF8B4.IP) (Ping timeout)
[19:50:07] <Tobba> well
[19:50:09] <Tobba> the kernel almost builds
[19:50:22] *** Joins: IanCormac84 (User@90488470.2A8D8854.67DFF8B4.IP)
[19:50:24] <Tobba> except the format of rlibs seems to have changed
[19:51:07] <eddyb> Tobba: pczarn hit the compressed .bc issue
[19:51:20] <Tobba> ah crap
[19:51:23] <Tobba> what are they now
[19:51:38] <eddyb> raw DEFLATE streams :/
[19:51:49] <Tobba> ld supports that?
[19:51:57] <Tobba> apparently 7zip does, I thought it didnt
[19:52:09] <eddyb> do you need the .bc?
[19:53:05] <Tobba> yeah
[19:53:11] <pczarn> cceckman hit it too and filed an issue https://github.com/mozilla/rust/issues/12992
[19:53:22] <Veld> I can't seem to import anything into a file. "use rand::Rng;" gives error: unresolved import.
[19:53:32] <huhlig> stupid question
[19:53:34] <Tobba> extern crate rand;
[19:53:37] *** Joins: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no)
[19:53:40] *** Joins: bmurphy1976 (bmurphy197@46E64081.D240E006.6624BF1.IP)
[19:54:04] <huhlig> How do I specify no operating system for rustc
[19:54:10] <Tobba> oh dear someone else is writing a proper rust kernel
[19:54:30] <huhlig> o.O hahaha
[19:54:31] <pczarn> several people
[19:54:34] <Tobba> maybe I shouldent have taken such a long break
[19:54:39] <Tobba> I'm getting ninjad with this all over
[19:54:47] <Havvy> Find somebody to work with?
[19:54:51] <zwarich> I wonder who will be the first to have virtual memory
[19:54:58] <pczarn> I have
[19:55:00] <Tobba> I already have that
[19:55:01] <huhlig> im just trying to write a simple distributed kernel for arm
[19:55:07] <bvssvni> haha
[19:55:09] <huhlig> nothing to ever actually use
[19:55:12] <Tobba> though it doesnt work entirely yet
[19:55:21] <Tobba> I never bothered since drivers and coroutines got in the way
[19:55:26] <huhlig> rustc -O --target arm-none-eabi -Z no-landing-pads --dep-info boot/core.d ../../rust-core/core/lib.rs --out-dir ./boot
[19:55:26] <huhlig> error: unknown operating system
[19:55:36] <Tobba> actually, the kernel methods for mapping work fine and dandy
[19:55:39] <Tobba> the application ones dont
[19:55:40] <huhlig> I dont want it to have an OS associated
[19:55:53] <pczarn> huhlig: arm-linux-noeabi
[19:56:09] <huhlig> pczarn... I dont want linux though
[19:56:21] <huhlig> does it not share the same triple as llvm and gcc?
[19:56:39] *** Quits: taylanub (taylanub@moz-7A74005A.dip0.t-ipconnect.de) (Ping timeout)
[19:56:44] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[19:56:50] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[19:56:56] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[19:56:57] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[19:57:03] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[19:57:20] *** Joins: philix (felipe@moz-359FE93F.ufs.br)
[19:57:47] <Tobba> why do we use .o files in .rlibs anyways
[19:57:54] <Tobba> I wish it would just link in the bc no matter about LTO
[19:57:59] <Tobba> it would make this so much less painful
[19:58:35] <huhlig> is there a way to list available triplets in rustc?
[19:58:49] <Tobba> eddyb: did rust stop using its own custom LLVM actually
[19:58:57] *** Joins: taylanub (taylanub@moz-CACE0A8E.dip0.t-ipconnect.de)
[19:59:05] <Tobba> I remember not being able to use the builtin LLVM because it would throw in super-ABI specific stuff with no regard to what it was doing
[19:59:12] <huhlig> oh
[19:59:13] <huhlig> hmm
[19:59:23] <Tobba> and no way to disable it
[19:59:35] <kimundi> Tobba: we still use the in-tree llvm
[19:59:46] <olsonjeffery> is there a compiler flag for all-warnings-as-errors 
[19:59:48] <olsonjeffery> ?
[19:59:55] <Tobba> iirc the issue was segmented stacks would generate some really ABI specific stuff
[20:00:00] <Tobba> and LLVM lacks a generic target
[20:00:17] <Tobba> so you had to pick between everything getting broken by linux or windows ABI
[20:00:19] <bvssvni> olsonjeffery: there is a way to get a list of lints
[20:00:35] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[20:01:11] <huhlig> woo! and rust-core has lots of warnings
[20:01:33] <huhlig> ok so why is the target arm-linux-eabi for rustc and arm-none-eabi in llvm
[20:01:49] <bvssvni> olsonjeffery: rustc -W help
[20:02:14] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:02:37] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[20:02:38] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:03:32] <huhlig> and apparently --emit-llvm is now gone
[20:03:46] <pczarn> and what's arm-unknown-linux-eabi
[20:03:53] <eddyb> huhlig: --emit=ir
[20:03:59] <huhlig> I was figuring that
[20:05:36] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[20:06:29] <huhlig> did #[no_core] ever get included?
[20:06:58] *** Quits: IanCormac84 (User@90488470.2A8D8854.67DFF8B4.IP) (Ping timeout)
[20:07:51] <pyrac> Hi all ! In master is there a way to convert *T to Vec<T> (as was possible with std::vec::raw::from_buf_raw for ~[T]). 
[20:08:10] <pczarn> huhlig: no_core? nope
[20:08:25] <huhlig> so its still only a command line switch
[20:08:54] *** Joins: IanCormac84 (User@90488470.2A8D8854.67DFF8B4.IP)
[20:09:01] <kmc> is there syntax to 'use' every constructor from an enum, without listing them?
[20:09:11] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:09:41] <Ms2ger> No
[20:09:47] <Ms2ger> Except glob imports
[20:09:59] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[20:10:13] *** Joins: tyna (liadon@moz-BB1BAD9A.dynamic.chello.pl)
[20:10:16] <bvssvni> pyrac: you should probably create an issue for that, so it doesn't gets left out
[20:10:26] *** Joins: claudiu (claudiu@moz-FB94486E.thefacebook.com)
[20:10:32] *** Quits: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net) (Ping timeout)
[20:10:33] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[20:10:33] *** ChanServ sets mode: +o tjc
[20:11:01] <pyrac> bvssvni: ok I need it for FFI. I will open an issue then. Thanks !
[20:11:33] *** Quits: claudiu_ (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP) (Ping timeout)
[20:11:38] <huhlig> hmm so rustboot uses an invalid attribute
[20:11:49] <huhlig> https://github.com/charliesome/rustboot/blob/master/main.rs#L6
[20:11:59] <Tobba> just remove it
[20:12:01] <Tobba> its not a thing anymore
[20:12:08] <huhlig> oh
[20:15:11] <Tobba> it wont even need zero.rs anymore
[20:15:52] <Tobba> anyone know a util that can decompress raw deflate streams?
[20:15:57] <Tobba> everything in my build system is a hack anyways
[20:17:21] *** Quits: IanCormac84 (User@90488470.2A8D8854.67DFF8B4.IP) (Connection reset by peer)
[20:17:21] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Ping timeout)
[20:17:31] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[20:18:36] <pczarn> Tobba: rust uses miniz in src/libflate
[20:18:54] <Tobba> well screw that lets pipe this through a perl script
[20:18:56] <pyrac> bvssvni: I have just opened https://github.com/mozilla/rust/issues/13040
[20:18:58] <Tobba> nothing can possibly go wrong
[20:18:59] *** Joins: IanCormac84 (User@90488470.2A8D8854.67DFF8B4.IP)
[20:19:06] *** Joins: dranov (dranov@F6748802.A8779685.FB866788.IP)
[20:19:32] *** Quits: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[20:19:41] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[20:19:51] <pczarn> Tobba: try extern crate flate; flate::deflate_bytes(data).as_slice()
[20:20:26] *** Quits: bmurphy1976 (bmurphy197@46E64081.D240E006.6624BF1.IP) (Quit: Textual IRC Client: www.textualapp.com)
[20:20:34] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[20:20:38] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[20:20:51] <pczarn> well you are making a build system
[20:21:24] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[20:22:39] <Tobba> using a shitty makefile atm
[20:22:43] <Tobba> (on windows, please kill me)
[20:22:54] *** Joins: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no)
[20:22:56] <Tobba> turns out windows likes to screw up line endings over stdio however
[20:23:12] <Tobba> so I cant bash a deflate stream over it, I guess a rust utility is in order
[20:23:16] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:23:18] *** Joins: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com)
[20:23:49] <Havvy> Imagine a world without Windows.
[20:23:54] *** Quits: IanCormac84 (User@90488470.2A8D8854.67DFF8B4.IP) (Ping timeout)
[20:24:02] <Tobba> that would probably be very bad
[20:24:06] <Tobba> but windows isnt known for its strong CLI
[20:24:11] <Tobba> and I'm trying to do CLI-fu
[20:24:38] <Tobba> its like trying to google-fu through grep
[20:24:40] <Havvy> Imagine a world without Windows because a Rust OS had taken over.
[20:24:47] <Tobba> now that however...
[20:24:53] <Tobba> (please stand by while I finish this thing)
[20:24:58] <kmc> can I get rustc to print out a log of macro expansion as it happens?
[20:25:02] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:25:02] * bvssvni tried imagined a world without Windows and suffered mental core dump
[20:25:03] <kmc> i'm hitting a syntax error in deeply nested macros
[20:25:07] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:25:31] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:25:50] <Tobba> you know shits getting real when you're building your own toolset to build the sodding thing
[20:25:51] *** Joins: IanCormac84 (User@611A0092.2A8D8854.67DFF8B4.IP)
[20:25:51] *** flaper87|afk is now known as flaper87
[20:25:55] *** Quits: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com) (Ping timeout)
[20:26:10] <Tobba> with Share I should be able to do a massive redesign of some stuff and be able to cut out most unsafety, woo
[20:27:35] <zwarich> it'll be interesting to see the abstractions people make in Rust for common OS data structures
[20:27:51] <Tobba> in my case theres unsafety all over
[20:28:03] <Tobba> but I kinda started writing this before I was too experienced so theres a lot of crap code and unnecessary unsafety
[20:28:04] *** Joins: brandonson (SingingBoy@610D90A5.EE9B234.1ECA502.IP)
[20:28:33] *** Joins: ewalstad1 (Adium@moz-9A04E871.dedicated.static.sonic.net)
[20:28:36] <pczarn> zwarich: I made struct Page(u32) for page descriptors, Table<Page> and Table<Table<Page>>
[20:28:48] *** Quits: ewalstad (Adium@moz-9A04E871.dedicated.static.sonic.net) (Ping timeout)
[20:29:01] <Tobba> heh
[20:29:04] <Tobba> thats kinda neat
[20:29:08] <Tobba> my structure atm is a bit of a mess
[20:29:17] <zwarich> I wonder if there's a good way to have objects owned by multiple internal doubly linked lists
[20:29:18] *** Joins: Jesin (Jesin@moz-48B48C95.eecs.lehigh.edu)
[20:29:32] *** Quits: ewalstad1 (Adium@moz-9A04E871.dedicated.static.sonic.net) (Quit: Leaving.)
[20:29:53] <zwarich> it seems you could make a good abstraction for one internal doubly linked list
[20:29:59] <pczarn> unsafety and raw pointers everywhere
[20:30:21] <zwarich> if you're just gonna write C, then what's the point of Rust? :P
[20:30:28] <pczarn> right
[20:30:36] <bvssvni> zwarich: http://static.rust-lang.org/doc/master/src/collections/home/rustbuild/src/rust-buildbot/slave/doc/build/src/libcollections/dlist.rs.html#34-38 ?
[20:30:41] *** Quits: oberstet (quassel@moz-269F630C.dynamic.mnet-online.de) (Client exited)
[20:31:06] <Havvy> zwarich:  Better syntax.
[20:31:08] <zwarich> bvssvni: the nodes are separate from the data there, but you could do something similar to make the links internal
[20:31:13] <Tobba> I actually have a really solid OS/kernel design down
[20:31:22] <Tobba> its just writing the kernel, all associated drivers, then all associated applications
[20:31:27] <strcat> zwarich: you can write a safe doubly-linked list in rust, but it won't be as fast/lightweight as it could be
[20:31:32] <Tobba> specially as I'll have to do a lot of rewriting due to my expanded knowledge of the language now
[20:31:36] <Tobba> and the fact that Share is a thing right now
[20:31:43] <strcat> not that a doubly-linked list is a useful data structure in the modern world anyway
[20:31:53] <zwarich> they're used a lot in kernel code
[20:32:12] <strcat> intrusive ones, sure
[20:32:23] <zwarich> strcat: yeah, that's what I mean by internal
[20:32:29] <mcpherrin> intrusive doubly linked lists are one of my biggest concerns about Rust right now
[20:32:32] <mcpherrin> not sure how to do them well
[20:32:41] *** Quits: ehsanul (harish@moz-A9E56CFE.hfc.comcastbusiness.net) (Ping timeout)
[20:32:51] <strcat> zwarich: ah, well then I agree with what you said ;)
[20:33:07] *** Quits: pyrac (pyrac@moz-598F4A4.w90-60.abo.wanadoo.fr) (Quit: pyrac)
[20:33:07] <Havvy> Likewise, a naive bimap...
[20:33:58] *** Joins: ehsanul (harish@moz-A9E56CFE.hfc.comcastbusiness.net)
[20:35:10] *** Joins: nstdloop (nstdloop@moz-C7FAE86A.washdc.fios.verizon.net)
[20:35:46] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[20:36:11] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[20:36:36] <Tobba> heh oh man
[20:36:38] *** Joins: p1start (rewi@moz-E7F3D014.org)
[20:36:42] <Tobba> the rawinflate utility seems to work
[20:36:43] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[20:37:15] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[20:37:20] *** Joins: ewalstad (Adium@moz-9A04E871.dedicated.static.sonic.net)
[20:37:50] *** Joins: dsrx (tom@F616D77.77D422C6.AA74B5DB.IP)
[20:38:57] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[20:40:00] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[20:40:27] <doomlord_> whats the likelyhood of hkt's making it- would they be post 1.0 (i dont personally have a need for them)
[20:40:45] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[20:41:17] <bvssvni> are they backwards compatible? I had the impression that 1.0 is non-backward compatible only
[20:41:53] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[20:42:49] *** Joins: sigma (sigma@C91C7F36.70518F41.9D18269F.IP)
[20:43:10] <bvssvni> doomlord_: https://github.com/mozilla/rust/issues/8922 it's on the wishlist, probably post 1.0
[20:43:31] *** Quits: jackneill (jackneill@moz-8FDC8344.pool.digikabel.hu) (Input/output error)
[20:43:49] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:45:07] *** Quits: edwardw (edwardw@3570A9BA.4E6A4251.FAED9FFC.IP) (Quit: Leaving...)
[20:45:53] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[20:46:22] *** Quits: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Quit: victorporof)
[20:46:35] *** Quits: dschatzberg (dschatzber@moz-E2680405.bu.edu) (Input/output error)
[20:47:34] *** Quits: not_gavin (gavin@E04DED12.5AA33DAB.2321E71E.IP) (Broken pipe)
[20:47:51] *** Joins: not_gavin (gavin@E04DED12.5AA33DAB.2321E71E.IP)
[20:47:58] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[20:48:24] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[20:49:03] *** Joins: alkino_ (alkino@moz-61F150EC.w92-151.abo.wanadoo.fr)
[20:49:30] <bvssvni> it would be awesome to have a kind of match expression, but which evaluates each arm in order
[20:49:49] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[20:50:08] *** Joins: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP)
[20:50:17] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[20:50:17] *** ChanServ sets mode: +o tjc
[20:50:33] <sellout> bvssvni: You mean like fallthrough in C’s switch statement?
[20:50:56] <bvssvni> if one arm then fails to meet the pattern matching, it would return the value  <keyword> <default> { arm1 => ..., }
[20:51:06] *** Quits: dsyang (dsyang@moz-C45D48C5.hsd1.pa.comcast.net) (Client exited)
[20:51:07] <bvssvni> sellout: not like C
[20:51:23] <bvssvni> each expression is matched against the next arm
[20:51:44] <Tobba> of course instead of worrying about fixing up my code I'm trying to fix the stupid makefile
[20:51:49] <Tobba> oh make...
[20:51:50] <bvssvni> if it does not match, it returns the default
[20:52:15] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[20:52:34] *** Joins: leowoe (Leo@moz-6CADCFED.dip0.t-ipconnect.de)
[20:52:39] <bvssvni> or perhaps <keyword> <err> { arm1 => ..., arm2 => ..., ... }
[20:52:56] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[20:53:08] <Tobba> hmm
[20:53:16] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:54:05] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[20:54:05] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:54:40] <bvssvni> try "Could not open file" { _ => File::open("myfile.txt"), Ok(file) => ... }
[20:54:42] *** Quits: not_gavin (gavin@E04DED12.5AA33DAB.2321E71E.IP) (Broken pipe)
[20:54:57] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[20:54:59] *** Joins: not_gavin (gavin@E04DED12.5AA33DAB.2321E71E.IP)
[20:55:06] <Tobba> auuuugh
[20:55:09] <Tobba> why would this file be in use
[20:55:25] <Tobba> make is set to not serialize things so its impossible for it to be in use, it also runs the entire step twice for no goddamn reason
[20:55:54] <Tobba> not parallelize*
[20:56:02] <bvssvni> try Err("Could not open file") { _ => File::open("myfile.txt"), Ok(file) => ... }
[20:56:04] <bvssvni> hmm
[20:56:41] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Client exited)
[20:56:51] *** flaper87 is now known as flaper87|afk
[20:56:54] *** Quits: sankha93 (sankha93@7061CD01.D6BD0D91.22D41759.IP) (Client exited)
[20:56:56] *** Quits: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[20:56:57] *** Quits: leowoe (Leo@moz-6CADCFED.dip0.t-ipconnect.de) (Quit: Leaving.)
[20:57:02] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[20:57:13] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[20:57:35] <pczarn> match Err("Could not open file") { _ => continue File::open("myfile.txt"), Ok(file) => ... }
[20:58:25] <bvssvni> pczarn: hmm?
[20:58:49] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Ping timeout)
[20:58:53] <pczarn> no, it's not real
[20:59:05] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Quit: Computer has gone to sleep.)
[20:59:23] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[20:59:29] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[20:59:44] *** Joins: leowoe (Leo@moz-6CADCFED.dip0.t-ipconnect.de)
[21:00:37] *** Joins: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de)
[21:01:09] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[21:02:15] *** Quits: not_gavin (gavin@E04DED12.5AA33DAB.2321E71E.IP) (Input/output error)
[21:02:32] *** Joins: not_gavin (gavin@E04DED12.5AA33DAB.2321E71E.IP)
[21:02:40] <Tobba> of course, gnuwin32 make comments are broken
[21:03:13] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[21:03:15] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[21:04:59] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Input/output error)
[21:05:24] <huhlig> ok, so when writing bare metal code its best to userust-core and to use rust core you need to define abort, breakpoint, __aebi_idivmod, __aeabi_ldivmod, __moddi3, __aeabi_uldivmod, __umoddi3 and __mulodi4. right?
[21:05:24] *** Joins: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net)
[21:05:52] *** Joins: aeqwa (aeqwa@moz-C4D5288B.dsl.tropolys.de)
[21:06:08] *** Quits: wry (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[21:06:20] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[21:06:20] *** ChanServ sets mode: +o tjc
[21:06:38] *** Joins: wry (wry@620605B3.71150E1A.237AE2BA.IP)
[21:07:43] *** Quits: leowoe (Leo@moz-6CADCFED.dip0.t-ipconnect.de) (Quit: Leaving.)
[21:08:39] <Tobba> I think you can get away without abort if you dont pass --cfg libc
[21:08:40] <Tobba> not sure though
[21:08:48] <Tobba> I wrote my own implementation of stdlib but that was a very bad idea
[21:08:51] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:08:55] <Tobba> afaik rust-core is kinda outdated at this point though?
[21:08:59] *** Quits: dranov (dranov@F6748802.A8779685.FB866788.IP) (Ping timeout)
[21:09:36] <huhlig> tobba it is?
[21:09:46] <strcat> Tobba: no, I think it still works
[21:09:48] <huhlig> is there anyway to forego any lib
[21:10:04] <Tobba> I think it still works but eh
[21:10:08] *** Quits: Zr40 (zr40@moz-CCFEAB92.adsl.xs4all.nl) (Quit: leaving)
[21:10:12] <Tobba> its way behind the current std and lacks a lot of stuff
[21:10:16] <strcat> huhlig: you need to use compiler-rt, regardless of what you do
[21:10:17] <huhlig> https://www.irccloud.com/pastebin/IkaljZ0H
[21:10:22] <Tobba> I just want std to get fragmented enough to be used
[21:10:23] <mcpherrin> after I finish regexes in Rust, I want to start working on making a better raw-metal rust experience
[21:10:29] <huhlig> it appears to still be neccessary
[21:10:41] <mcpherrin> but I only have a few hours a week to work on Rust :(
[21:10:46] <huhlig> pity
[21:11:00] <strcat> huhlig: compiler-rt is necessary with C on bare metal too
[21:11:03] <Tobba> everything OS-dependant getting pulled out of libstd would be great
[21:11:03] <huhlig> I would love to work on it more but I have to have some business justification for it and its just not there
[21:11:32] <Tobba> then kill the libc dependencies because those are awful
[21:12:00] *** Quits: Rym (y@D1CB9064.530F2044.8772DA20.IP) (Ping timeout)
[21:12:03] <strcat> abort/breakpoint are from LLVM intrinsics
[21:12:11] <Tobba> they are?
[21:12:12] <huhlig> strcat true, it would be nice if there was a slim bare metal rt for rust that had well defined requirements
[21:12:14] <Tobba> I never had to implement them
[21:12:15] <strcat> on x86 they don't require function calls
[21:12:24] <strcat> Tobba: because the arch is supposed to implement them
[21:12:26] <Tobba> oh, someones doing ARM
[21:12:29] <huhlig> me
[21:12:35] <strcat> afaik ARM implements them
[21:12:48] <strcat> huhlig: well, the requirements for rust-core are the same as the requirements for bare metal C
[21:12:48] *** Quits: Veld (Mibbit@moz-4A19983C.ip227.fastwebnet.it) (Quit: http://www.mibbit.com ajax IRC Client)
[21:13:05] <strcat> compiler-rt (or libgcc) is a necessary part of using LLVM/GCC
[21:13:27] <strcat> for example, most ARM chips don't have hardware division
[21:13:30] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[21:13:44] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[21:13:45] <strcat> a division instruction therefore turns into a compiler-rt/libgcc call
[21:13:55] <huhlig> ahh
[21:14:12] <strcat> afaik abort/breakpoint should be lowered by LLVM though
[21:14:18] <strcat> seems like a bug with the target in LLVM if it can't
[21:14:31] <strcat> it just has to output some instruction(s) that crash the program
[21:14:31] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[21:14:31] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:14:34] <strcat> for abort
[21:14:43] <huhlig> strcat I gave the pastebin
[21:14:57] <huhlig> it is obviously not happy.
[21:15:04] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[21:15:20] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[21:15:39] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[21:15:53] <strcat> huhlig: *shrug* :P
[21:16:26] <strcat> huhlig: the minimal LLVM requirements are memcpy, memmove, memset (rust-core has a support.rs file + instructions for these), compiler-rt and then whatever the intrinsics feel like generating calls to
[21:16:26] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[21:16:46] <huhlig> ahh so its still dependant on c
[21:16:58] <strcat> huhlig: well it's not necessarily dependent on C
[21:17:02] <strcat> you don't need libc for memcpy
[21:17:14] <strcat> support.rs defines it in rust, and just lets LLVM vectorize it
[21:17:32] *** Joins: pyrac (pyrac@moz-598F4A4.w90-60.abo.wanadoo.fr)
[21:17:43] <Tobba> I implemented some horrid versions of those 3 myself
[21:17:50] <Tobba> bad idea but oh well
[21:18:08] <huhlig> tobba, simple for loop for copy?
[21:18:11] <strcat> llvm generates better code for them than most libc implementations have
[21:18:16] <Tobba> yeah it gets suboptimal as hell though
[21:18:39] <Tobba> usually what you want to do is just some asm that uses x86's mem moving instructions
[21:18:48] <strcat> for example it outputs a nice unrolled AVX loop if you're specifying a CPU with it
[21:18:50] <strcat> Tobba: depends
[21:19:00] <strcat> rep movsb is faster in some cases and slower in other
[21:19:06] <huhlig> strcat is support.rs included in rust-core by default?
[21:19:12] *** Quits: pyrac (pyrac@moz-598F4A4.w90-60.abo.wanadoo.fr) (Ping timeout)
[21:19:15] <huhlig> or does that need to be pulled in extra
[21:19:17] <strcat> huhlig: no, because you need to compile it in a special way
[21:19:21] <huhlig> ahh ok
[21:19:24] <strcat> to work around a rust bu
[21:19:26] <strcat> g
[21:19:28] <Tobba> strcat: theres rep movsd and rep movsq though
[21:19:46] <strcat> Tobba: movsb is optimized in microcode to the same thing afaik
[21:20:01] <huhlig> strcat the instructions are a bit out of date so I am trying to puzzle through it
[21:20:06] <strcat> it's faster than AVX on 64-byte aligned data, and slower on non-64-byte aligned
[21:20:13] <strcat> at least according to the lkml benchmarks last time I looked
[21:20:21] <Tobba> odd. anyways
[21:20:28] <Tobba> maakefiiiiles
[21:20:31] <strcat> but they'd need to pay for setting up and restoring the AVX context, so it's not worth it to them
[21:20:36] <Tobba> I just stopped the whole section from building due to it being terrible, goddamnit
[21:20:37] <strcat> + they have a lot of 64-byte aligned data
[21:20:42] <strcat> most is actually page-aligned
[21:21:00] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[21:24:24] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[21:25:07] *** Quits: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net) (Quit: enos)
[21:27:16] *** flaper87|afk is now known as flaper87
[21:27:17] *** Quits: ewalstad (Adium@moz-9A04E871.dedicated.static.sonic.net) (Quit: Leaving.)
[21:27:19] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[21:28:30] *** Quits: gwty (gwtypc@5F452814.1C047769.25B273F5.IP) (Ping timeout)
[21:29:15] *** Quits: dsrx (tom@F616D77.77D422C6.AA74B5DB.IP) (Quit: WeeChat 0.4.1)
[21:29:51] *** Quits: p1start (rewi@moz-E7F3D014.org) (Ping timeout)
[21:29:51] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Ping timeout)
[21:30:26] *** Joins: rusty_banger (rusty_bang@8676E61E.A8FA971D.BDCA8586.IP)
[21:30:53] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:30:56] <Tobba> hm
[21:31:10] *** Joins: ewalstad (Adium@moz-9A04E871.dedicated.static.sonic.net)
[21:31:13] <Tobba> if I have something that is Share, could I technically have multiple mutable pointers into it?
[21:31:19] <strcat> no
[21:31:33] <strcat> if by mutable pointer you mean &mut
[21:31:39] <Tobba> yeah
[21:31:52] <strcat> it's undefined behaviour to ever make aliasing &mut ptrs
[21:32:11] <Tobba> &mut should imply that its safe though shouldent it
[21:32:15] <Tobba> I mean
[21:32:16] <Tobba> Share
[21:32:28] <strcat> no
[21:32:29] *** Joins: gwty (gwtypc@123D3329.2908BEAF.25B273F5.IP)
[21:32:40] <strcat> the no aliasing rule doesn't have exceptions
[21:32:58] <strcat> Share types are usually going to use &self, but allow mutation
[21:33:09] <strcat> because they have internal mutability
[21:33:12] <strcat> not inherited from an owner
[21:33:14] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:33:19] <Tobba> right
[21:33:43] <Tobba> so safe to share aliasing pointers, not aliasing mutable pointers?
[21:34:00] <strcat> yes
[21:34:16] <Tobba> well, aliasing immutable references over multiple tasks
[21:34:21] <Tobba> aliasing immutables themselves are kinda given
[21:34:29] <Tobba> though this kinda hamstrings this, oh well
[21:34:36] *** flaper87 is now known as flaper87|afk
[21:34:56] <Tobba> I guess I can make a non-mutable way to get a mutable reference to it but that'd feel a bit silly
[21:35:28] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[21:36:35] *** Joins: tom1 (tom@E233CB59.2E7CFED1.702F137D.IP)
[21:37:44] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:38:06] *** Quits: kris (kris@moz-147EE6DF.diku.dk) (Ping timeout)
[21:38:24] *** Joins: kris (kris@moz-147EE6DF.diku.dk)
[21:38:33] *** Joins: mib_ik8tnj (Mibbit@moz-DBB4E62A.cable.virginmedia.com)
[21:39:32] *** Quits: mib_ik8tnj (Mibbit@moz-DBB4E62A.cable.virginmedia.com) (Quit: http://www.mibbit.com ajax IRC Client)
[21:39:57] <kimundi> Tobba: Look at RefCell and RwLock
[21:40:04] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:40:11] *** Quits: kris (kris@moz-147EE6DF.diku.dk) (Ping timeout)
[21:40:15] <Tobba> I need to be able to access it mutably from all tasks at once though
[21:40:22] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[21:40:34] *** Joins: kris (kris@moz-9376332B.dk.customer.tdc.net)
[21:40:39] <Tobba> I could probably make some shitty super-unsafe cell for it
[21:40:45] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[21:40:46] <kimundi> Sureley you don'T mean with that that you want explicit data races? ;)
[21:41:02] *** Joins: enos (jkingyens@moz-E064C4EA.mycingular.net)
[21:41:04] <Tobba> I do
[21:41:17] <kimundi> ...why? Kernel foo?
[21:41:24] <Tobba> every method this thing provides is safe
[21:41:27] <kimundi> Can you use atomics?
[21:41:34] <Tobba> its a lock free queue
[21:41:50] <kimundi> ah
[21:41:56] <Tobba> shared across multiple tasks to provide scheduling
[21:42:31] <Tobba> I could define a MultableShare trait I guess and make a cell for that
[21:42:39] <Tobba> MutableShare*
[21:42:51] <Tobba> but then you could make unsafety without invoking unsafe blocks so ughhh
[21:42:56] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:44:04] *** Quits: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[21:44:17] *** Joins: mib_clsktm (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[21:46:43] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:46:53] *** Quits: philix (felipe@moz-359FE93F.ufs.br) (Ping timeout)
[21:47:56] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[21:48:09] *** Joins: ganitsu1 (ganitsu@moz-B03ADDA.dialup.adsl.anteldata.net.uy)
[21:48:37] *** Quits: ganitsu (ganitsu@moz-EFF2F491.dialup.adsl.anteldata.net.uy) (Ping timeout)
[21:48:58] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[21:49:31] *** Joins: pyrac (pyrac@moz-598F4A4.w90-60.abo.wanadoo.fr)
[21:49:53] <bvssvni> I got the macro syntax, but don't know how to write the rest https://gist.github.com/bvssvni/9674632
[21:50:12] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[21:52:37] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:53:25] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[21:53:26] *** ChanServ sets mode: +ao brson brson
[21:53:42] <Tobba> I wish you could do impl T<U>
[21:53:51] <Tobba> or is that a thing now? I havent checked for a while
[21:54:13] <bvssvni> Tobba: impl<U> T<U>?
[21:54:21] <Havvy> If that doesn't work, would ^ work?
[21:54:26] <Havvy> (Ninjaed...)
[21:54:35] <Tobba> my current code has dummy traits all over
[21:54:40] <Tobba> to implement stuff like Rc<Coroutine>
[21:54:55] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:55:13] <carllerche> Can rust run on solaris / smarts?
[21:55:15] <carllerche> smartos*
[21:55:25] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[21:55:36] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:55:44] <cmr> carllerche: someone had a illumos port going on.
[21:55:57] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[21:56:00] <cmr> it should be able to run, albeit with potential minor modifications
[21:56:14] <mcpherrin> carllerche: I'm pretty sure a Joyent employee has said Rust has been run on SmartOS
[21:56:31] <carllerche> so, the story is "maybe" as in I should try :)
[21:56:36] <carllerche> try and report back
[21:57:24] <mcpherrin> It may require a bit of work to get going, but should be possible :-)
[21:58:02] *** Quits: mib_clsktm (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:58:11] *** Quits: kris (kris@moz-9376332B.dk.customer.tdc.net) (Ping timeout)
[21:58:11] <carllerche> I don't know much about solaris, I am just wondering if I may be able to provide solaris builds of our product (built w/ rust)
[21:58:18] <carllerche> i will investigate
[21:58:47] <mcpherrin> Well it's not a Tier-1 platform but if you cared about shipping a product you could make it work for sure.
[21:59:17] *** Joins: skade (skade@moz-1EC0F118.pools.arcor-ip.net)
[21:59:49] *** Joins: kris (kris@moz-6D20263F.fullrate.dk)
[22:01:05] <rusty_banger> In the master branch of Rust, is it still possible to spawn a task in monitored mode, where failure from a child task doesn't cause the parent to fail?
[22:01:07] *** Joins: leowoe (Leo@moz-6CADCFED.dip0.t-ipconnect.de)
[22:01:30] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[22:01:37] <acrichto> rusty_banger: that's the default, there's no more linked failure
[22:01:42] <rusty_banger> oh ok, cool
[22:01:43] *** Joins: Rym (y@1B461471.3DA4EAA.51C6DE68.IP)
[22:01:44] <rusty_banger> thanks
[22:01:45] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[22:01:47] <acrichto> np
[22:01:48] <bvssvni> does anyone knows how to expand macros recursively like this? https://gist.github.com/bvssvni/9674632
[22:02:15] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:03:04] <Tobba> is there any way to set a macro as unsafe?
[22:03:08] <doomlord_> files ... native::io::  .... open .. FileDesc, and methods of that to read/write... this is the right stuff to use now?
[22:03:27] <huon> doomlord_: std::io
[22:03:29] <cmr> bvssvni: $a:pat
[22:03:33] <cmr> bvssvni: can you really index that?
[22:03:50] <huon> Tobba: just don't put an `unsafe` block inside the macro?
[22:04:03] <Tobba> the error reporting of that will be madness though
[22:04:12] <bvssvni> cmr: I don't know
[22:04:27] <huon> Tobba: not that bad?
[22:04:33] <cmr> bvssvni: I don't even know what `a[0] => match b[0] {` could mean
[22:04:41] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:04:53] <cmr> bvssvni: but were it to work, you'd need another macro for the inner bit that's recursive I'd think, stopping at a base case?
[22:04:54] <bvssvni> cmr: a[0] means the first pattern
[22:05:05] <huon> "error: unsafe block required" pointing at the internal unsafety, "expansion site" pointing at the macro invocation
[22:05:09] <cmr> bvssvni: does that actually work?
[22:05:23] <bvssvni> cmr: the syntax works
[22:05:29] *** Joins: kngl1 (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP)
[22:05:31] <bvssvni> cmr: the problem is writing the body
[22:05:36] *** Quits: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP) (Connection reset by peer)
[22:06:14] <bvssvni> cmr: would be awesome if somebody figured it out
[22:07:03] *** Quits: Savago (Savago@816F9901.E820043D.D4C04133.IP) (Quit: Savago)
[22:07:27] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:07:32] <bvssvni> cmr: there is a section about recursive macroes in the tutorial http://static.rust-lang.org/doc/master/guide-macros.html#the-recursive-approach-to-macro-writing
[22:07:42] <bvssvni> but I don't understand it
[22:07:47] *** Quits: pyrac (pyrac@moz-598F4A4.w90-60.abo.wanadoo.fr) (Ping timeout)
[22:08:28] *** Joins: ChrisMorgan (chris@moz-8DCBEA52.vic.adsl.internode.on.net)
[22:09:35] *** Quits: ChrisMorgan (chris@moz-8DCBEA52.vic.adsl.internode.on.net) (Quit: Leaving.)
[22:10:21] *** Quits: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP) (Ping timeout)
[22:10:40] *** Quits: enos (jkingyens@moz-E064C4EA.mycingular.net) (Quit: enos)
[22:12:12] *** Quits: ahunt (ahunt@moz-6D6D79D6.cable.virginm.net) (Ping timeout)
[22:13:17] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[22:13:18] *** ChanServ sets mode: +o tjc
[22:13:54] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[22:14:15] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[22:14:19] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:16:02] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[22:16:12] *** Quits: ewalstad (Adium@moz-9A04E871.dedicated.static.sonic.net) (Quit: Leaving.)
[22:16:40] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:17:24] *** Quits: tom1 (tom@E233CB59.2E7CFED1.702F137D.IP) (Ping timeout)
[22:17:44] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:18:17] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[22:18:22] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Connection reset by peer)
[22:18:40] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:19:53] *** Quits: leowoe (Leo@moz-6CADCFED.dip0.t-ipconnect.de) (Quit: Leaving.)
[22:19:59] *** Joins: espindol_ (espindola@moz-9F530B29.com)
[22:20:18] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:20:35] *** Joins: tom1 (tom@moz-A98FF983.public.wayport.net)
[22:20:45] *** Quits: espindola (espindola@8EC99D26.4B7A7726.A2E931B1.IP) (Ping timeout)
[22:21:32] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[22:21:32] *** ChanServ sets mode: +o tjc
[22:22:35] *** Quits: Guest (textual@moz-6FD8C94B.hfc.comcastbusiness.net) (Ping timeout)
[22:22:42] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[22:23:39] *** Joins: ewalstad (Adium@moz-9A04E871.dedicated.static.sonic.net)
[22:24:58] *** Quits: ewalstad (Adium@moz-9A04E871.dedicated.static.sonic.net) (Quit: Leaving.)
[22:25:17] *** Quits: tom1 (tom@moz-A98FF983.public.wayport.net) (Ping timeout)
[22:25:37] *** Quits: abaez (a__@moz-8D618AC3.nycmny.fios.verizon.net) (Ping timeout)
[22:26:00] *** Joins: ewalstad (Adium@moz-9A04E871.dedicated.static.sonic.net)
[22:26:58] *** Quits: paraze (paraze@moz-DAFFEE79.w90-27.abo.wanadoo.fr) (Client exited)
[22:27:42] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[22:27:45] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:28:05] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[22:28:05] *** ChanServ sets mode: +o tjc
[22:28:08] *** Parts: krdln (krdln@moz-C271714F.dynamic.chello.pl) ()
[22:29:24] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[22:29:27] *** Joins: abaez (a__@moz-8D618AC3.nycmny.fios.verizon.net)
[22:31:18] *** Quits: mye (mye@moz-476CD70C.dip0.t-ipconnect.de) (Quit: So long, and thanks for all the fish!)
[22:31:41] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Quit: Leaving)
[22:31:50] *** Quits: rusty_banger (rusty_bang@8676E61E.A8FA971D.BDCA8586.IP) (Quit: rusty_banger)
[22:34:21] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[22:35:51] *** Quits: Ms2ger (Ms2ger@268865C6.EA68D5B.F15B0BB3.IP) (Quit: nn)
[22:36:12] *** Joins: jroweboy (Mibbit@moz-77F5D920.byu.edu)
[22:36:36] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:36:48] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:37:26] *** Quits: sigma (sigma@C91C7F36.70518F41.9D18269F.IP) (Ping timeout)
[22:37:43] <jroweboy> I remember someone saying that you cant pass methods since they aren't first class citizens yet, but that was planned to change. Has that landed yet? Or if not what is the timetable on that?
[22:38:13] <cmr> jroweboy: no. but https://github.com/rust-lang/rfcs/pull/4
[22:38:23] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:38:52] *** Joins: tom1 (tom@F616D77.77D422C6.AA74B5DB.IP)
[22:40:11] *** Joins: annubbis (igor@5811CD3B.520BE45E.4A407CF8.IP)
[22:42:12] *** Quits: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP) (Input/output error)
[22:42:21] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[22:42:45] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[22:45:36] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Quit: Leaving)
[22:45:44] *** Joins: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP)
[22:47:09] <comex> hmm, I can't call != on a ~str and a string literal?
[22:47:14] <comex> tabler.rs:28:42: 28:80 error: mismatched types: expected `~str` but found `&'static str` (str storage differs: expected `~` but found `&'static `)
[22:48:06] <bvssvni> comex: try .as_slice()
[22:48:46] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[22:49:14] <comex> gross...
[22:49:57] *** Joins: klaus (koz@moz-4486E876.hsd1.wa.comcast.net)
[22:50:19] *** flaper87|afk is now known as flaper87
[22:50:35] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[22:51:39] *** Quits: espindol_ (espindola@moz-9F530B29.com) (Ping timeout)
[22:51:46] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[22:51:50] <comex> and is there really no regex code? :)
[22:52:30] <comex> in the standard distribution, at any rate
[22:53:28] *** Quits: jroweboy (Mibbit@moz-77F5D920.byu.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[22:53:59] *** Joins: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu)
[22:54:05] *** Quits: ehsanul (harish@moz-A9E56CFE.hfc.comcastbusiness.net) (Ping timeout)
[22:54:12] *** Joins: ehsanul (harish@moz-A9E56CFE.hfc.comcastbusiness.net)
[22:54:13] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[22:54:17] <huon> comex: not yet
[22:54:51] *** Quits: skade (skade@moz-1EC0F118.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:54:58] <bvssvni> comex: there is a long thread about it https://github.com/mozilla/rust/issues/3591
[22:55:17] *** Joins: enos (jkingyens@moz-E17B5E78.public.monkeybrains.net)
[22:56:11] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[22:56:11] *** ChanServ sets mode: +ao brson brson
[22:56:40] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Ping timeout)
[22:56:58] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[22:57:39] *** Joins: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP)
[22:57:47] <comex> i guess i can use rust-re2 for now and switch someday(tm)
[22:58:16] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:58:30] <comex> except of course it is broken on latest rust
[22:58:32] <mcpherrin> I'll be sending an email to the mailing list about my regex code soon
[22:58:34] <sfackler> you could be yet another brave soul to try and write a regex library!
[22:59:09] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:59:17] <mcpherrin> I have a proof of concept regex library working already, gonna try to hack it into a syntax extension on sunday
[22:59:31] <Leo`> hum, generic lifetime parameters don't cause monomorphization on instantiation, do they ?
[22:59:37] <Leo`> just wondering
[22:59:44] <mcpherrin> Mostly, don't know how to do codegen in a syntax extension yet.
[23:00:03] <Leo`> mcpherrin: oh
[23:00:03] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:00:06] <Leo`> mcpherrin: fun
[23:00:12] <Leo`> mcpherrin: i'm working on basically the same thing
[23:00:17] <Leo`> but for for the same purposes :p
[23:00:31] <mcpherrin> What techniques are you using?
[23:00:36] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[23:00:41] <sfackler> mcpherrin: take a look at the quasiquoter, it should make your life way less painful than manually constructing the AST
[23:00:45] *** Quits: aeqwa (aeqwa@moz-C4D5288B.dsl.tropolys.de) (Ping timeout)
[23:00:48] <mcpherrin> sfackler: Neato.
[23:01:03] <Leo`> i'm trying to do a lexical analyser generator. something like Lex, but generating Rust code
[23:01:11] <mcpherrin> https://github.com/mcpherrinm/rust-regex-derivatives
[23:01:15] <Leo`> and you describe the lexical analyser via a macro
[23:01:26] <Leo`> a syntax extension, in fact
[23:01:26] <mcpherrin> This is the basic implementation of parsing regexes
[23:01:40] <mcpherrin> and taking their derivatives
[23:01:42] <Leo`> which is expanded as a finite state machine :P
[23:02:19] <mcpherrin> I need a few more hours of work to get DFA construction working, which I'll finish up Real Soon Now
[23:02:39] <mcpherrin> and then probably a day to get it into a syntax extension
[23:02:41] <Leo`> I already have DFA construction working
[23:02:56] <Leo`> not sure if my code is clean/fast though
[23:03:03] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[23:03:04] <mcpherrin> I can only produce the maximal DFAs which are hilariously useless :P
[23:03:10] <Leo`> haha
[23:03:16] *** Joins: cgaebel (clark@moz-F9D89110.nyc.res.rr.com)
[23:03:21] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Input/output error)
[23:03:32] <mcpherrin> every state has a transition for every character in your alphabet, and states aren't coalesced
[23:03:41] <mcpherrin> so it works on alphabets of size, say 26 :P
[23:03:42] <Leo`> hum
[23:03:45] <mcpherrin> not so much unicode
[23:04:28] <Leo`> my DFAs are basically the same
[23:04:48] <mcpherrin> sfackler: so I assume the quasiquoter does what I expect from Scheme?
[23:04:49] *** Quits: IanCormac84 (User@611A0092.2A8D8854.67DFF8B4.IP) (Ping timeout)
[23:04:58] *** Joins: IanCormac84 (User@D1AEF093.64D641E5.67DFF8B4.IP)
[23:05:01] <Leo`> but i've got an almost-working minimization function
[23:05:23] <Leo`> almost because its not usable in the context of lexical analysers
[23:05:23] <huon> mcpherrin: if you expect "a horrible horrible hack that (mostly) works" then yes :P
[23:05:34] *** Joins: pyrac (pyrac@moz-598F4A4.w90-60.abo.wanadoo.fr)
[23:05:39] <mcpherrin> huon: well I'm writing a hack that mostly works, so yes!
[23:05:53] <huon> mcpherrin: but is it (horrible)^2?
[23:05:59] *** Joins: Florob (Florob@moz-39532932.de)
[23:06:13] <bvssvni> is it horrible enough?
[23:06:29] <sfackler> mcpherrin: e.g. let e: @Item = quote_item!(cx, struct Foo { bar: int, baz: ~str });
[23:06:30] <Leo`> exponentially horrible ?
[23:06:30] <mcpherrin> huon: Well maybe after I use the quasiquoter it will be :)
[23:07:01] *** Joins: espindola (espindola@563D60BB.4B7A7726.A2E931B1.IP)
[23:07:10] *** flaper87 is now known as flaper87|afk
[23:07:16] *** Quits: pyrac (pyrac@moz-598F4A4.w90-60.abo.wanadoo.fr) (Ping timeout)
[23:07:20] <Leo`> sfackler: I will need this as well I think
[23:07:21] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[23:07:45] <mcpherrin> I'm kinda concerned about how tied current syntax extensions seem to be to rustc internals
[23:07:59] <mcpherrin> (but I'll not judge until I've written one :) )
[23:08:18] <Leo`> i'm writing a parser using libsyntax for my lexer-description language based on what Rustc passes to syntax extensions
[23:08:21] <cmr> I don't see how they couldn't be, really, and they're feature gated for a reason.
[23:08:24] <Leo`> it's quite great
[23:08:45] <mcpherrin> cmr: You could define a stable API they need to use to generate AST code
[23:08:58] <mcpherrin> Or make them token-tree => token-tree
[23:09:02] <mcpherrin> with a helper lib
[23:09:03] <sfackler> that's the long term vision, but it's probably not a 1.0 thing
[23:09:09] <Leo`> if we except the @ptr remaining there and there
[23:09:17] <Leo`> (and the rooting problem they cause me)
[23:09:27] <cmr> mcpherrin: Yes, let's define a stable API around our unstable language and compiler :P
[23:09:33] *** Joins: tautologico (uid22285@moz-A42E5B7B.irccloud.com)
[23:09:36] <mcpherrin> cmr: :-)
[23:10:10] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[23:10:14] <mcpherrin> Is *using* syntax extensions 1.0-stable?
[23:10:58] <cmr> yes.
[23:10:58] <huon> mcpherrin: the core syntax extensions, yes
[23:11:14] <Leo`> (if someone can help btw. :| https://gist.github.com/LeoTestard/9676037 I can't get this to work)
[23:11:26] <comex> oh, and cre2 isn't in macports, yay
[23:11:30] <Leo`> (it's a somplified example of the issue I have using libsyntax in ly suntax extensions)
[23:12:01] <Leo`> simplified*
[23:12:10] <mcpherrin> huon: so that doesn't include #[phase syntax] mod regex;   re_find!(re, some_reader)
[23:12:26] <bvssvni> Leo`: does that left expression work with enums that contains only one variant?
[23:12:31] <huon> mcpherrin: nope
[23:12:38] <huon> mcpherrin: that's not 1.0
[23:13:00] <Leo`> bvssvni: you mean the let ?
[23:13:05] <mcpherrin> huon: okay, that's fine :)
[23:13:17] <Leo`> bvssvni: the binding is okay
[23:13:22] <bvssvni> Leo`: yes, the let &B
[23:13:27] <Leo`> the problem is a "rooting" issue
[23:13:29] <Leo`> https://gist.github.com/LeoTestard/9676078
[23:13:32] <Leo`> this is what rustc says
[23:13:45] <Leo`> I don't understand why
[23:13:59] <Leo`> while self is alive, there should always be at least a single @ptr to the vector
[23:14:10] <Leo`> so I could take a &'a slice on it if self is bound by 'a
[23:14:15] *** Quits: nszceta (nszceta@moz-E458A7C0.pharm.pitt.edu) (Quit: Textual IRC Client: www.textualapp.com)
[23:14:18] <Leo`> I should be able to*
[23:15:56] <bvssvni> Leo`: have you tried .as_slice::<'a>
[23:16:15] <Leo`> bvssvni: no
[23:16:35] <Leo`> didn't know this syntax
[23:16:36] *** Quits: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 29.0a2/20140317004002])
[23:16:55] <Leo`> but no it doesn't change anything :|
[23:18:04] <bvssvni> Leo`: it seems to me that ref ptr makes it a local borrowed pointer
[23:18:22] <Leo`> maybe
[23:18:30] <Leo`> I tried many ways to call as_slice
[23:18:36] <Leo`> binding by-ref, by-move
[23:18:54] <canhtak> Hi Rust dev's! is there a way to prepare a string like this : pub static s: &'static str = "Hello {}"; and use it with something like format!(s, "John");
[23:19:06] <Leo`> calling as_slice directly, i.e. self.bar.b.as_slice() (with Bar thus being a struct instead of an enum)
[23:19:14] <Leo`> (to avoid destructuring)
[23:19:22] *** Joins: judder (maradukewa@75FA4DEE.A989D80C.78E362FE.IP)
[23:19:25] <Leo`> but... I couldn't get any to work
[23:19:28] *** Quits: klaus (koz@moz-4486E876.hsd1.wa.comcast.net) (Quit: klaus)
[23:20:02] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:20:08] <Leo`> .foo.b*
[23:20:23] <Havvy> canhtak:  Shouldn't that be an ~'static str?
[23:21:27] <canhtak> Havvy: nope format macro needs strings literal.
[23:21:31] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[23:21:49] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:22:33] <Leo`> grmbl
[23:22:42] *** Quits: ksev (DrunkenPan@moz-B69B5B8B.autodesk.com) (Ping timeout)
[23:26:14] <cmr> Havvy: ~ never has a lifetime.
[23:26:29] <Havvy> cmr:  Ah.
[23:26:37] <bvssvni> Leo`: perhaps the problem is ptr decrements the ref counter when running out of scope
[23:26:47] <Havvy> Explains why I've never seen a lifetime on a ~ pointer.
[23:26:49] <cmr> Havvy: because it owns, it's not a reference.
[23:26:56] <Leo`> bvssvni: but self still has a reference
[23:27:06] <bvssvni> Leo`: ah
[23:27:11] <Leo`> on it
[23:27:25] <Leo`> the compiler should know that the @[] will never be free while self bound by 'a is alive
[23:27:36] <Leo`> and thus should allow me to return a &'a [] on it
[23:27:39] <huon> that's not true
[23:27:46] <Leo`> ah
[23:27:47] <huon> lifetimes are just annotations about things that already exist
[23:27:52] <cmr> @[] isn't even a type anymore is it?
[23:27:56] <huon> it doesn't change behaviour
[23:28:00] <Leo`> cmr: obviously it still is
[23:28:10] <Leo`> at least in my version
[23:28:12] <huon> Leo`: not in master
[23:28:16] <Leo`> huon: hummmmm
[23:28:23] * huon removed it
[23:28:32] <Leo`> I don't think upgrading to master will solve it
[23:28:36] <bvssvni> Leo`: what about changing baz to @ instead of &'a
[23:28:53] <Leo`> the problem will basically be the same but with another syntax :p
[23:28:55] <huon> anyway, you can't force a values to be kept around longer by giving them explicit lifetimes
[23:29:09] <Leo`> bvssvni: if I could avoid adding @ptr, I would prefer :/
[23:29:21] *** Quits: kngl1 (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP) (Quit: Leaving.)
[23:29:23] <Leo`> huon: have you looked at my gist ?
[23:29:24] *** Quits: oxum (anonymous@A3B51273.5425F8F6.520CDC98.IP) (Ping timeout)
[23:29:53] <huon> Leo`: why do you need the @?
[23:29:59] <bvssvni> Leo`: if you return an @, shouldn't it increase the ref counter?
[23:30:01] <Leo`> huon: libsyntax
[23:30:07] <Leo`> huon: :(
[23:30:09] <kimundi> uhm....
[23:30:27] <Leo`> bvssvni: yes but I'd rather avoid @ptrs in my types and functions if possible :/
[23:30:36] <huon> Leo`: I don't think you can avoid just having Baz be @Vec too
[23:30:45] <Leo`> huon: :|
[23:30:49] <kimundi> I somehow managed to write generic code that automatically removes a layer of & without doing something that could call Deref...
[23:31:47] <kimundi> Ah nevermind, its just operators being silly and autoderefing
[23:32:01] <kimundi> rusti: (&5u) + 100
[23:32:02] -rusti- 105
[23:32:14] <Leo`> huon: but I still fails to see why my code is invalid
[23:32:20] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:32:30] <Leo`> -s
[23:32:53] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[23:32:59] <bvssvni> Leo`: I belive the compiler see @ and borrowed pointers as different things
[23:33:08] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Quit: Leaving...)
[23:33:16] <Leo`> bvssvni: I guess so
[23:33:26] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Input/output error)
[23:33:50] <Leo`> bvssvni: and this is not going to be better since @ is going away to the libstd
[23:33:52] <Leo`> anyway
[23:34:03] <Leo`> I think I'll just use @ in my types
[23:34:03] <bvssvni> Leo`: what about Rc?
[23:34:14] *** Quits: jagtalon (sid24114@moz-E77DEB21.irccloud.com) (Ping timeout)
[23:34:14] *** Quits: GameGamer43 (sid5533@moz-E77DEB21.irccloud.com) (Ping timeout)
[23:34:14] *** Quits: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net) (Ping timeout)
[23:34:19] <Leo`> bvssvni: well I guess it could work
[23:34:26] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[23:34:30] <Leo`> but if I must use managed memory
[23:34:32] <huon> the problem with @ is you can only have a borrow as long as the @ is rooted
[23:34:45] <huon> and a root is connected to a stack frame
[23:34:46] <Leo`> I think I'll use the same types as libsyntax uses
[23:34:52] <Leo`> huon: well but
[23:35:01] *** jorendorff is now known as jorendorff_away
[23:35:01] <huon> so you can't return a borrow out of an @ from the stack frame in which it is rooted
[23:35:09] <Leo`> huon: if the @ is 'in' a &'a
[23:35:15] <Leo`> can't it be rooted to 'a ?
[23:35:19] <Leo`> I don't know if what I say makes sense but
[23:35:32] <huon> no, the rooting happens when you actually try to borrow from the @
[23:35:47] *** Joins: GameGamer43 (sid5533@moz-E77DEB21.irccloud.com)
[23:35:52] <Leo`> mhhh
[23:36:02] <bvssvni> Leo`: it only works locally in the function
[23:36:07] <huon> but yes, if you're interfacing with libsyntax using the same types as libsyntax will make life *so* much easier
[23:36:07] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[23:36:16] <Leo`> oh and
[23:36:27] <Leo`> since in this case I know the lifetimes are valid
[23:36:39] <Leo`> couldn't I just unsafely take a slice ?
[23:36:53] *** Quits: nkoep (nik@moz-5B8BC9B8.pool.mediaways.net) (Quit: Leaving)
[23:36:57] <huon> the lifetimes aren't (really) valid
[23:37:08] <huon> that's precisely why the compiler is complaining at you
[23:37:52] <Leo`> hm hm
[23:37:57] <Leo`> well
[23:37:58] <Leo`> you're right
[23:38:13] <Leo`> using the same types as libsyntax is the right way to go I think
[23:38:22] <Leo`> by the way
[23:38:32] <Leo`> will all this @ in libsyntax be removed for 1.0 ? :P
[23:38:46] *** Joins: jagtalon (sid24114@moz-E77DEB21.irccloud.com)
[23:39:14] <mcpherrin> 1.0 is about external standardization -- the compiler implementation doesn't really matter
[23:39:39] <Leo`> libsyntax is an externally available API
[23:39:41] <cmr> Leo`: now that almost all of smartptr sugar has landed, it can start being migrated.
[23:39:45] <Leo`> so it matters in some way
[23:39:49] <cmr> Yes but it's marked #[experimental]
[23:39:54] <cmr> and any use of it requires a feature gate
[23:39:57] <cmr> so...
[23:40:07] <Leo`> smartptr sugar ?
[23:40:10] <Leo`> that sounds good
[23:40:13] <cmr> Deref etc
[23:40:13] *** Joins: krdln (krdln@moz-C271714F.dynamic.chello.pl)
[23:40:16] <huon> Leo`: externally available != stable
[23:40:18] <Leo`> what does it allow exactly ?
[23:40:22] <Leo`> yep I see
[23:40:28] <Leo`> deref and what ?
[23:40:33] <cmr> and DerefMut :P
[23:40:35] <Leo`> auto-borrow, method call too ?
[23:40:44] <cmr> that's part of deref
[23:40:50] <Leo`> ok
[23:40:57] <cmr> Deref is overloadable dereferencing
[23:40:59] <Leo`> sounds really good
[23:41:54] <kimundi> rusti: ::std::rc::Rc::new(5u) + 100
[23:41:54] -rusti- pastebinned 11 lines of output: http://sprunge.us/fRDV
[23:42:09] <kimundi> rusti: *::std::rc::Rc::new(5u) + 100
[23:42:09] -rusti- 105
[23:42:20] <Leo`> great
[23:42:29] <bvssvni> is it possible to write a syntax extension for this https://gist.github.com/bvssvni/9674632
[23:42:29] <cmr> feh that looks like a bug
[23:43:44] <huon> cmr: what's the bug?
[23:44:00] *** Quits: enos (jkingyens@moz-E17B5E78.public.monkeybrains.net) (Ping timeout)
[23:44:06] <cmr> huon: it's not considered for auto-deref for +, it seems.
[23:44:15] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:44:20] <huon> bvssvni: `$a_head: expr => $b_head $(, $a: expr => $b: expr)*`
[23:44:28] <huon> and actually expand recursively
[23:44:33] <comex> tabler.rs:28:29: 28:33 error: invalid lifetime name: 'self is no longer a special lifetime
[23:44:36] <huon> i.e. call the macro again
[23:44:44] <comex> wait, so what am I supposed to do now
[23:44:46] <comex> ?
[23:44:49] <huon> rusti: &1 + 2
[23:44:49] -rusti- pastebinned 35 lines of output: http://sprunge.us/gCLG
[23:44:57] <huon> comex: call it anything but 'self
[23:44:58] <huon> e.g. 'a
[23:45:00] <cmr> comex: use 'a or 'b or any other lifetime
[23:45:01] <huon> or 'selfselfself
[23:45:02] <bvssvni> huon: Thank You
[23:45:07] <huon> or whatever
[23:45:09] <cmr> rusti: &1u + 2u
[23:45:10] -rusti- 3
[23:45:14] <comex> ?
[23:45:15] *** Quits: Rusky (russell@moz-173BA32C.slkc.qwest.net) (Ping timeout)
[23:45:15] <comex> er
[23:45:21] <comex> missend
[23:45:22] <huon> cmr: that derefing is a bug :P
[23:47:59] <bvssvni> huon: is $a_head the head of $a?
[23:48:09] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Quit: WeeChat 0.4.3)
[23:48:11] <SiegeLord> Oh I had a great idea today... what if we implemented Deref on Option, thus giving us null exception back
[23:48:13] *** Joins: ksev (DrunkenPan@212685B3.5B8F260F.586E6F35.IP)
[23:48:24] <bvssvni> huon: is it part of macro syntax I mean
[23:48:43] *** Joins: copumpkin (copumpkin@53E2D28C.C8540D7F.AF46A2E7.IP)
[23:48:49] *** Quits: twi (Adium@D9AE5AC1.E0BD96E5.9ECBD630.IP) (Quit: Leaving.)
[23:49:27] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[23:49:51] <mcpherrin> SiegeLord: impl Deref for Option<~T> { fn deref(&self) { self.unwrap_or(fail!("SEGMENTATION FAULT")) } }
[23:50:07] <SiegeLord> Yes, exactly
[23:50:10] <cmr> mcpherrin: needs to be || fail!("...")
[23:50:10] <mcpherrin> :D
[23:50:20] <cmr> otherwise it will be evaluated eagerly.
[23:50:31] <cmr> and unwrap_or_else I think it's called
[23:50:37] <comex> that behavior really confuses me
[23:50:41] <mcpherrin> cmr: I wasn't going for accuracy ;)
[23:51:01] *** Joins: enos (jkingyens@moz-68C04E7A.mycingular.net)
[23:51:05] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[23:51:09] <cmr> comex: what does? evaluation of arguments before function call?
[23:51:46] <comex> no, what i was saying about 'self
[23:51:47] <kimundi> (unwrap_or_else does the same lazy evaluation)
[23:51:53] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[23:52:07] <comex> where if you want a borrowed pointer into an owned pointer within the same struct, you have to use a generic parameter and have type inference do some magic
[23:52:15] *** Quits: not_gavin (gavin@E04DED12.5AA33DAB.2321E71E.IP) (Ping timeout)
[23:52:31] *** Joins: not_gavin (gavin@gavinsharp.com)
[23:52:33] *** Joins: Rusky (russell@moz-173BA32C.slkc.qwest.net)
[23:52:34] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[23:53:47] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Ping timeout)
[23:54:04] *** Quits: Rym (y@1B461471.3DA4EAA.51C6DE68.IP) (Ping timeout)
[23:54:24] *** Joins: Rym (y@1B461471.3DA4EAA.51C6DE68.IP)
[23:54:24] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Client exited)
[23:54:33] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[23:55:24] <huon> bvssvni: it's nothing special
[23:55:46] <huon> bvssvni: it's just pattern matching on the first element
[23:55:59] <huon> well, first pair
[23:56:53] *** Joins: Doppp (Doppp@ABA7820A.3D394227.C4926542.IP)
[23:56:58] <bvssvni> huon: so I give $a and $b to a macro that expands the rest?
[23:57:38] <huon> yes
[23:57:43] <huon> recursively call your macro
[23:57:55] <huon> you will need to special case either the one case, or the zero case
[23:58:04] <huon> to have a bottom to the recursion
[23:58:34] <bvssvni> huon: how does the zero case look like?
[23:59:24] <huon> bvssvni: ($err: expr { _ => $start: expr }) => { ... }
[23:59:29] *** Quits: q66 (q66@moz-25DACF.range109-154.btcentralplus.com) (Quit: Leaving)
[23:59:46] <huon> presumably you actually want the base case to be the one case
