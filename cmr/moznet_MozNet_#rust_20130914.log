[00:00:14] *** Joins: mihneadb_ (Mihnea@moz-BE33DA21.fw1.sfo1.mozilla.net)
[00:00:31] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Ping timeout)
[00:00:35] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[00:00:51] *** Quits: mihneadb (Mihnea@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[00:00:53] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[00:02:37] *** Quits: clonejo (clonejo@moz-CC9FD036.de) (Ping timeout)
[00:03:22] <dbaupp> strcat: just change the u32 to u64
[00:04:55] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[00:04:56] *** ChanServ sets mode: +o tjc
[00:05:06] *** Quits: DasIch (dasich@moz-5EDA591.de) (Ping timeout)
[00:05:36] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[00:06:08] *** Quits: mihneadb_ (Mihnea@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: Leaving)
[00:08:30] *** Joins: DasIch (dasich@moz-5EDA591.de)
[00:09:23] <docbrown> What's the plan for libuv? Will it be replaceable at some point?
[00:10:57] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[00:10:58] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 143bcad21 to 14150b4ff: 02http://git.io/N3iJvQ
[00:10:58] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[00:10:59] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[00:10:59] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/yypCMg
[00:10:59] <ghrust> 13rust/06auto 14c62919f 15Brian Anderson: Work around a compiler crash folding labeled break. #9129...
[00:10:59] <ghrust> 13rust/06auto 141602d35 15bors: auto merge of #9176 : brson/rust/issue-9129, r=catamorphism...
[00:10:59] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[00:11:11] <tiffany> https://gist.github.com/tiffany352/6557596
[00:11:15] <tiffany> can anyone help with this error?
[00:15:54] <tjc> tiffany: did you mean to write TokenCreator<T>::raw(‚Ä¶ ?
[00:16:04] <tiffany> that gives an error
[00:16:40] <tiffany> 3 unresolved name errors
[00:17:20] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[00:21:48] <tjc> tiffany: looking at your code more closely, I'm surprised it doesn't compile
[00:22:07] <tjc> tiffany: but, as an experiment, you could try naming the TokenCreator and possibly giving it an explicit type too
[00:22:08] <tiffany> I've been stuck for a while over it
[00:22:28] <tjc> like: let whatever = TokenCreator::<T>::‚Ä¶ ; Ok(Token {value: whatever ....
[00:22:36] <strcat> oh that stupid fileinput thing...
[00:23:02] <bjz_> tjc: hmm, rustpkg seems to be acting abit odd
[00:23:18] <tjc> bjz_: go on :-)
[00:23:58] <bjz_> tjc: when you build a workspace that depends on another workspace, and you make a change in the other workspace, it doesn't rebuild that workspace
[00:24:15] <bjz_> tjc: I have to rm -rf .rust
[00:24:26] <tjc> bjz_: I think someone might have filed a bug on that, let me check
[00:24:57] <bjz_> tjc: have you progressed in your thinking regarding the tests?
[00:25:11] <tiffany> parse.rs:172:21: 172:43 error: cannot determine a type for this bounded type parameter: unconstrained type
[00:25:12] <tiffany> parse.rs:172         let val: T = TokenCreator::<T>::raw(text.slice(start, end).to_owned());
[00:25:24] <tjc> bjz_: the bug I was thinking of isn't quite it, but yes, that seems plausible...
[00:25:29] <tjc> bjz_: re: tests, not very much
[00:25:51] <bjz_> tjc: ok. atm my thing is: rm -rf .rust && rustpkg build tests && ./build/x86_64-apple-darwin/tests/teststest --test
[00:26:01] <tiffany> I have no idea how this could be interpretered as "unconstrained"
[00:26:36] <tjc> tiffany: looking again, it seems a little bit unusual that you're putting a TokenCreator<T> bound on T
[00:27:08] <tiffany> is there a 'self' type in traits?
[00:27:13] <tjc> bjz_: want to file an issue?
[00:27:19] <bjz_> tiffany: Self
[00:27:35] <bjz_> tiffany: that's in the trait definition
[00:27:49] <bjz_> tiffany: in impls you have to write it out
[00:28:01] *** Joins: Ralith (ralith@moz-FEDCB1EC.sea.wa.customer.broadstripe.net)
[00:28:10] <tiffany> replacing <T> with Self worked
[00:29:38] *** Quits: a__ (a__@moz-25043B93.nycmny.fios.verizon.net) (Client exited)
[00:31:16] *** Quits: carllerche (carllerche@1E2EB9E3.186539A3.965084DF.IP) (Quit: carllerche)
[00:33:29] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[00:33:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:33:50] <tiffany> has Index been changed?
[00:36:40] <bjz_> tjc: https://github.com/mozilla/rust/issues/9177
[00:37:47] <bjz_> tjc: it's a pretty awful explanation, sorry
[00:37:55] * bjz_ is a little tired
[00:39:09] <tjc> bjz_: seems like a perfectly cromulent explanation to me
[00:39:48] *** Quits: Ralith (ralith@moz-FEDCB1EC.sea.wa.customer.broadstripe.net) (Ping timeout)
[00:40:04] <bjz_> heh
[00:40:58] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[00:41:05] *** Joins: Ralith (ralith@moz-FEDCB1EC.sea.wa.customer.broadstripe.net)
[00:42:05] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Client exited)
[00:42:46] *** Quits: Ralith (ralith@moz-FEDCB1EC.sea.wa.customer.broadstripe.net) (Ping timeout)
[00:45:03] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[00:45:24] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[00:45:34] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[00:46:04] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[00:47:04] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[00:49:33] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[00:50:23] *** Quits: naq (naq@D5C2D2DF.E4265FCD.E481B5B.IP) (Ping timeout)
[00:51:14] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[00:51:34] *** Joins: naq (naq@D5C2D2DF.E4265FCD.E481B5B.IP)
[00:52:39] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[00:53:16] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[00:53:17] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Client exited)
[01:01:02] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[01:01:02] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 141602d35 to 14150b4ff: 02http://git.io/N3iJvQ
[01:01:02] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[01:01:03] *** Joins: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se)
[01:01:33] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[01:03:14] *** Joins: z0w0 (zack@moz-61B3764E.qcl9.cha.bigpond.net.au)
[01:04:38] *** Quits: lbergstrom (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[01:04:45] *** Quits: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[01:08:36] *** Quits: jdm (jdm@moz-BBE3ABD.mv.mozilla.com) (Quit: Lost terminal)
[01:09:25] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[01:12:03] *** Quits: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu) (Input/output error)
[01:12:03] <tiffany> uhh...
[01:12:35] <tiffany> why does TcpStream implement std::rt::io::Reader instead of std::io::Reader?
[01:12:51] *** Quits: z0w0 (zack@moz-61B3764E.qcl9.cha.bigpond.net.au) (Quit: z0w0)
[01:12:57] <engla> std::io is the old IO soon to be removed
[01:13:09] <engla> std::rt::io will replace it
[01:13:10] <brson> tiffany: I don't think Index has changed recently, no
[01:13:11] <tiffany> is there a replacement for ReaderUtil then?
[01:13:42] <engla> most of it tiffany, the code is inside std::rt::io::extensions
[01:14:01] <engla> but it's at std::rt::io::ReaderUtil. It has some parts, but not a text/string API
[01:14:08] *** Joins: z0w0 (zack@moz-61B3764E.qcl9.cha.bigpond.net.au)
[01:14:26] <tiffany> I want to read lines at a time
[01:14:42] <engla> it doesn't exist yet
[01:14:49] <cmr> There isn't a text api yet
[01:14:49] <brson> sorry :-/
[01:14:52] <cmr> Because of encoding/decoding
[01:15:08] <brson> maybe we could port some of the extension methods as a temporary measure
[01:15:16] <brson> it's a drag not having them
[01:15:47] <engla> I'd love to be able to implement a line iterator that doesn't necessarily allocate every line as a ~str 
[01:15:53] <engla> but no luck :(
[01:16:48] <dbaupp> you can read the whole thing into a ~[u8], convert to a ~str and just use the normal methods there (as a temporary workaround)
[01:16:49] <brson> engla: that seems doable
[01:17:41] <engla> this iterator adaptor is everything needed to split into lines from the byte iterator  https://gist.github.com/anonymous/4f4ebdc99f71ad80290d
[01:17:47] <engla> it's not particularly efficient ^^
[01:18:12] <engla> Split::new(reader.bytes(), '\n' as u8)  yields lines as ~[u8]
[01:18:17] <engla> *Splits
[01:20:27] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[01:23:09] *** Joins: Jesin (Jessin_@moz-14FD08AF.cc.lehigh.edu)
[01:24:25] <engla> brson: I thought I could do it but then I found out it was compiling because of a borrowck hole
[01:25:54] <engla> the code is very similar to the previous paste, but I think it's using the borrowck hole https://gist.github.com/anonymous/2a8e7adb60d9ea55e9d8
[01:26:02] <engla> which I realized only later
[01:26:58] *** Quits: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP) (Quit: Leaving)
[01:30:18] *** Joins: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net)
[01:30:50] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[01:31:23] *** Joins: glyc (Thunderbir@moz-20CEEF38.hsd1.ca.comcast.net)
[01:32:07] *** Joins: jjj (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net)
[01:33:28] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[01:34:47] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Quit: Ex-Chat)
[01:35:41] <glyc> Q: Hey, I want to step through rustc to get a sense of code flow. I built with -Z debug-info at stage1 and stage2, and only libstd.so couldn't build with debug-info. but it looks like, in gdb on rustc, I get no source.  How do yall work with it?  Is everyone flying blind?
[01:36:07] <cmr> glyc: yes.
[01:36:19] <cmr> glyc: we have RUST_LOG=rustc=4 though
[01:36:22] <glyc> cmr: guess that answers that.
[01:36:26] <glyc> lol
[01:36:35] <glyc> oh, what does the RUST_LOG do?
[01:36:45] <cmr> enables debug logging via `debug!`
[01:36:51] <glyc> ah I see
[01:36:56] <cmr> you need to build with --enable-debug (given to configure) first
[01:37:03] <glyc> did that, yes
[01:37:29] <glyc> I think I may be seeing https://github.com/mozilla/rust/issues/3899
[01:37:47] <glyc> since libstd wouldn't build with debug info
[01:37:48] <cmr> We don't do static linking
[01:37:52] <cmr> So, probably not, no.
[01:37:56] <glyc> ok, not that
[01:37:59] <cmr> You need extra-debug-info for source, I think
[01:38:02] <glyc> oh
[01:38:03] <cmr> Not sure where the divide falls anymore.
[01:38:24] <glyc> but you fly blind, even with extra?
[01:38:33] <cmr> No, not with extra, when it's working correctly.
[01:38:37] <glyc> ok
[01:40:04] <glyc> I mean, I can dwarfdump and see that there is a ton of debug info on librustc, but I guess -Z extra-debug-info is still neeeded?
[01:40:41] <glyc> I'll give it a try
[01:40:59] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[01:41:12] <tjc> glyc: I don't know about others, but I mostly debug-by-printf (debug!(‚Ä¶))
[01:41:20] *** Joins: brendan (brendaneic@5FC4E4D8.4EE99619.E46D6E17.IP)
[01:41:25] <tjc> it's not the greatest, but it works :-)
[01:41:31] <Eridius> As a non-windows-user, how hard is it to set up a windows machine to compile rust?
[01:41:44] <glyc> tjc: yeah, it works for sure
[01:42:15] <glyc> is there any way to pause execution though
[01:42:42] <cmr> Eridius: very easy, just takes time.
[01:42:51] <cmr> Thad does a very good job of keeping the build directions on the wiki up to date.
[01:43:00] <cmr> glyc: you can break on stuff
[01:43:12] <glyc> cool
[01:44:17] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[01:44:39] <glyc> when I tried to look at stuff in gdb with list, it references rustc.rc which I don't find anywhere. (gdb) list
[01:44:39] <glyc> 1       rustc.rc: No such file or directory.
[01:45:02] <glyc> is that a bug?
[01:45:07] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[01:46:11] *** Quits: brendan (brendaneic@5FC4E4D8.4EE99619.E46D6E17.IP) (Quit: brendan)
[01:47:12] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[01:47:55] <glyc> oh sweet: a breakpoint in rustc.rs works with -Z debug-info, and then I can step in gdb
[01:48:42] <cmr> Good question, why is it looking for that file.
[01:49:25] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[01:49:29] <glyc> seemed strange
[01:49:46] <steveklabnik> zomg back. stupid wifi
[01:49:47] <glyc> is extra-debug-info in place of, or in addition to, debug-info ?
[01:50:00] <cmr> glyc: in place of, I think
[01:50:03] <cmr> not 100% positive
[01:50:03] <glyc> k
[01:50:46] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[01:51:52] <steveklabnik> can anyone help me understand this error? https://gist.github.com/steveklabnik/6558167
[01:51:57] <steveklabnik> noobing out with borrowed pointers
[01:52:36] <cmr> steveklabnik: &Str(ref s), &Str(ref o)
[01:52:38] <cmr> in the match
[01:52:43] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[01:52:50] <cmr> You're trying to match using a value-pattern on a borrowed pointer.
[01:53:07] <steveklabnik> what is ref?
[01:53:45] <steveklabnik> (that totally fixes it, thank you)
[01:54:01] <enix> Does Rust have functions to cast between integer types while checking that nothing is truncated?
[01:54:15] <engla> steveklabnik: ref lets you take a pointer instead of move/copying that value `o`
[01:54:45] <engla> steveklabnik: for example    match 1 {  ref x =>  /* x is a &int here */
[01:55:21] <engla> rusti: match 1i { ref x => x.test }
[01:55:21] -rusti- <anon>:5:29: 5:35 error: attempted access of field `test` on type `&int`, but no field with that name was found
[01:55:23] -rusti- <anon>:5          match 1i { ref x => x.test }
[01:55:25] -rusti-                                       ^~~~~~
[01:55:27] -rusti- error: aborting due to previous error
[01:55:29] -rusti- application terminated with error code 101
[01:55:31] <engla> "on type `&int`"
[01:55:37] <steveklabnik> awesome, thank you.
[01:55:40] <steveklabnik> that makes sense
[01:56:25] <steveklabnik> with that, my little HTML escaping utility works
[01:56:27] <steveklabnik> https://github.com/steveklabnik/escape_html
[01:56:31] <steveklabnik> needs docs and stuff
[01:56:48] <steveklabnik> and is pretty naieve, O(n) where n is the length of the string
[01:56:50] <steveklabnik> but it's a start
[01:57:24] *** Joins: Liothen (liothen@moz-80EF0CD7.spkn.qwest.net)
[01:58:16] <tiffany> is there a way to do non-blocking reads on sockets?
[01:58:17] <Eridius> cmr: ok I have MinGW installed, but the "Note getting started developing Rust" wiki page is telling me to do something that I can't do
[01:58:24] <tiffany> I'm trying to implement my own read_line()...
[01:58:31] <Eridius> it tells me to run `mingw-get upgrade "gcc<4.6"`, but mingw-get is not a command I can run
[01:59:07] <glyc> tiffany: look through the libuv stuff perhaps
[01:59:24] <tiffany> I guess read_byte() will work
[02:00:37] *** Joins: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP)
[02:01:19] *** Quits: jjj (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:01:36] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[02:02:30] *** Quits: glyc (Thunderbir@moz-20CEEF38.hsd1.ca.comcast.net) (Quit: glyc)
[02:02:38] <brson> SimonSapin: thanks for working on character encoding. it's a critical component of I/O. sorry I haven't read or responded to your thread yet, but it's on my my todo list
[02:02:49] *** Joins: clonejo (clonejo@moz-CC9FD036.de)
[02:03:35] *** Joins: brendan (brendaneic@5FC4E4D8.4EE99619.E46D6E17.IP)
[02:05:57] <brson> no posts to r/rust in 2 days. what does this signify?
[02:06:12] <steveklabnik> there havne't been a lot of blog posts lately either
[02:07:07] <Eridius> cmr: disregard that. The MinGW project page has setup instructions that were not present in the rust Note
[02:07:45] *** Joins: miza (miza@moz-908EA8DE.home.otenet.gr)
[02:07:52] *** Quits: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net) (Connection reset by peer)
[02:10:09] <cmr> Eridius: Ok, glad you got it worked out.
[02:10:12] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[02:10:22] <cmr> brson: this week hasn't been very exciting
[02:11:00] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[02:11:00] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/fUlxNQ
[02:11:00] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[02:12:12] *** Quits: a_m0d|home (a_m0d@moz-1765B403.acanac.net) (Quit: Leaving.)
[02:12:31] *** Quits: maik (maik@moz-C5365941.dip0.t-ipconnect.de) (Ping timeout)
[02:14:34] <Eridius> bah, the note tells me to use `mingw-get upgrade "gcc<4.6"` to ensure GCC is below 4.6. But it didn't work
[02:14:42] <Eridius> says 4.8.1 is the only available version
[02:15:15] <Eridius> ..except it went ahead and installed some gcc 4.5.2 anyway
[02:15:17] <Eridius> now I'm confused
[02:15:23] <bjz_> brson: http://www.reddit.com/r/rust/comments/1mcsie/rustgamedev_irc_channel/
[02:15:28] <bjz_> :3
[02:15:58] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[02:15:58] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/10wJFg
[02:15:58] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[02:15:59] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[02:15:59] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/pgpJSA
[02:15:59] <ghrust> 13rust/06auto 14c62919f 15Brian Anderson: Work around a compiler crash folding labeled break. #9129...
[02:15:59] <ghrust> 13rust/06auto 1465aa809 15bors: auto merge of #9176 : brson/rust/issue-9129, r=catamorphism...
[02:15:59] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[02:16:46] <tiffany> okay
[02:16:47] <tiffany> that's odd
[02:17:01] <tiffany> one minute my code was compiling and running fine, using read_byte() on a TcpStream
[02:17:07] <tiffany> and now it's giving me unresolved name errors
[02:17:25] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[02:18:19] <tiffany> commenting out some use statements seems to have fixed it
[02:18:19] <tiffany> weird
[02:21:00] <engla> mixing std::io and std::rt::io  can give issues since their traits have similar method names or something like that
[02:21:00] *** Quits: SiegeLord (sl@moz-1DF56822.twcny.res.rr.com) (Quit: Leaving)
[02:23:03] <cmr> bjz_: so gl-rs is on my to-do list for sunday, after extra::url
[02:23:08] <cmr> (saturday is my schoolwork day)
[02:23:15] <bjz_> cmr: awesome!
[02:23:17] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[02:23:29] <bjz_> cmr: the help would be most appreaciated
[02:23:44] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[02:23:47] <dcrewi> how do I test for whether uint is big enough for what I want to do with it?
[02:24:10] <cmr> dcrewi: don't use uint, use u64 or u32
[02:24:17] <dbaupp> dcrewi: how big do you need to be?
[02:24:57] <dcrewi> it only needs to be more than 8 bits
[02:25:10] <cmr> uint is pointer-sized
[02:25:17] <cmr> you can check std::sys::size_of<uint>()
[02:25:47] <cmr> but really, just use one of the fixnums if you care about width.
[02:29:31] <miza> ga 
[02:29:46] <miza> wrong chat
[02:30:33] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[02:31:08] *** Joins: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net)
[02:31:25] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[02:32:08] <Eridius> ugh I can't get GCC 4.5 on windows to work
[02:32:19] <Eridius> after downgrading to 4.5 as instructed, it had the wrong libmpc and libmpfr.
[02:32:48] <Eridius> after downgrading those (by experimenting with version constraints), GCC now throws some "undefined reference to `__chkstk_ms'" errors when compiling
[02:33:13] *** Quits: miza (miza@moz-908EA8DE.home.otenet.gr) (Input/output error)
[02:34:35] <Eridius> why do the windows instructions want GCC 4.5 anyway?
[02:34:58] <Kelet> Eridius, I don't think that's relevant any more.
[02:35:10] <Kelet> There used to be a bug where LLVM wouldn't build, but it has since been fixed I believe.
[02:35:29] <Kelet> I have problems other than that building on Windows myself though, so I'm not the authority on the issue.
[02:35:52] <Eridius> Kelet: ok I'll try upgrading to latest GCC/G++
[02:36:08] <Kelet> I know someone on Github built it successfully with 4.7.1, not sure if anyone has with 4.8+ yet though.
[02:36:28] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[02:36:34] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[02:36:35] <klutzy> cmr: pong
[02:36:46] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[02:38:04] *** Quits: brendan (brendaneic@5FC4E4D8.4EE99619.E46D6E17.IP) (Quit: brendan)
[02:40:40] <docbrown> How tough would it be to get rust compiling with VC++? Obviously the Makefiles couldn't be used, but maybe a Windows-specific NMake script could be written?
[02:41:40] <klutzy> docbrown: llvm has cmake, which produces nmake
[02:42:01] <klutzy> I has llvm built with msvc toolchain. it's easy
[02:42:10] *** Quits: Jesin (Jessin_@moz-14FD08AF.cc.lehigh.edu) (Ping timeout)
[02:42:35] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[02:42:52] <klutzy> and you can make llvm ir from .rs: `rustc.exe /path/to/libstd/std.rs --emit-llvm -S`
[02:43:24] *** Joins: Jesin (Jessin_@moz-14FD08AF.cc.lehigh.edu)
[02:43:43] <klutzy> it emits llvm ir with target=mingw32, but you can change it to "win32" manually since --emit-llvm -S emits text format
[02:44:24] <klutzy> then llc.exe will compile it to .obj file. (forgot specific flagnames)
[02:45:13] <klutzy> however you need rustrt, including __morestack and libuv, for building .exe from .obj
[02:45:15] <bjz> brson: any idea on the timeframe for having nightly builds for windows?
[02:45:29] <dbaupp> cmr: do you reckon you could experiment with multibuilder + rust? (I don't have enough diskspace to run parallel rust builds, heh.)
[02:45:36] *** Joins: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP)
[02:45:46] <klutzy> I didn't tried libuv, but I think it is not so hard.
[02:45:52] <bjz> brson: Kelet was asking on #rust-gamedev
[02:46:04] <docbrown> klutzy: Maybe I'll play with it this weekend. Thanks for the info!
[02:46:06] <klutzy> docbrown: so the missing part is asm part.
[02:46:10] <dbaupp> cmr: (also, I guess you'll want to optimise the clone procedure, to make submodules work better.)
[02:46:24] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[02:46:24] *** ChanServ sets mode: +ao dherman dherman
[02:46:31] <dbaupp> bjz: it'd be neat if we could use the buildbot builds as "nightlies".
[02:46:36] <klutzy> docbrown:  this is my research so far. if you have any progress, cc me :)
[02:47:27] <bjz> dbaupp: that'd be really awesome
[02:48:29] *** Quits: kimundi (kimundi@moz-F5A3C46E.dip0.t-ipconnect.de) (Ping timeout)
[02:48:47] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: Leaving)
[02:49:26] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[02:49:47] *** Quits: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net) (Input/output error)
[02:49:50] <klutzy> docbrown: link.exe also complains about missing _fdim function. https://github.com/mozilla/rust/issues/1768#issuecomment-23687575
[02:50:29] <klutzy> and some more c99 functions
[02:51:37] *** Joins: kimundi (kimundi@moz-3ECBAE9C.dip0.t-ipconnect.de)
[02:52:33] <docbrown> klutzy: Have you or anyone else tried building with Clang for Windows? It's not as ubiquitous as MSVC, but it'd be better than installing an entire Unix layer, at least.
[02:53:09] *** Quits: KindOne (KindOne@moz-79A66DC5.dynamic.ip.windstream.net) (Ping timeout)
[02:54:08] <klutzy> docbrown: I have no idea of clang, but it sounds interesting!
[02:54:23] <strcat> docbrown: still need a linker
[02:55:03] <strcat> that's why we have a dependency on mingw - otherwise we could just use compiler-rt + clang afaik
[02:55:37] <strcat> we need either gcc-libs or compiler-rt for sure
[02:56:19] *** kimundi is now known as zz_kimundi
[02:56:49] *** Joins: KindOne (KindOne@moz-79A66DC5.dynamic.ip.windstream.net)
[02:57:30] <docbrown> I think LLVM's LLD linker works on Windows now.
[02:58:07] <Eridius> ack, `make` failed very early when trying to compile i686-pc-mingw32/rt/stage0/rust_uv.o
[02:58:25] <Eridius> claims WSAPOLLFD was not declared in \mingw\include\mswsock.h
[02:58:28] <Eridius> that's very odd
[02:58:48] <klutzy> what's your os?
[02:58:54] <strcat> docbrown: does it have dynamic linking yet?
[02:59:00] <Eridius> me? I'm trying this on Windows 7
[02:59:05] <klutzy> huh
[02:59:16] <tiffany> is there a way to destructure enums without using match? as in, assuming it has a certain value or failing?
[02:59:21] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:59:25] <strcat> tiffany: no
[02:59:27] <klutzy> ah, mingw error. hmm
[02:59:28] <tiffany> this is going to be like 12 nested match statements then
[02:59:29] <strcat> not as a language feature
[02:59:30] <Eridius> tiffany: declare an impl for the enum that provides a method to do it?
[02:59:32] <docbrown> strcat: That I don't know. :(
[02:59:37] <tiffany> I guess
[02:59:41] <strcat> tiffany: you can destructure more than one layer at once in a match expr
[02:59:52] <strcat> the patterns can be as complex as you want
[03:00:01] <tiffany> it's a recursive enum
[03:00:11] <strcat> so what's the case you want to match?
[03:01:07] <tiffany> I'm matching the irc hostmask prefix using my parser
[03:01:18] <tiffany> :tiffany!lymia@hugs -> Sequence(~[Unparsed(~"tiffany"), Sequence(~[Sequence(~[Sequence(~[Sequence(~[Unparsed(~"!"), Unparsed(~"lymia")])]), Unparsed(~"@"), Unparsed(~"hugs")])])])
[03:01:34] <tiffany> .. oh
[03:03:16] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[03:03:21] *** zz_kimundi is now known as kimundi
[03:03:28] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: Leaving)
[03:03:35] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[03:04:13] <klutzy> Eridius: is the error same as this? https://github.com/mozilla/rust/issues/8785
[03:04:48] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: Leaving)
[03:06:03] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[03:06:03] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1465aa809 to 14a241deb: 02http://git.io/N3iJvQ
[03:06:03] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[03:06:39] <tiffany> irc.rs:25:17: 25:53 error: mismatched types: expected `~[irc::IRCToken]` but found a ~-box pattern
[03:06:39] <tiffany> irc.rs:25         Sequence(~[Unparsed(nick), Sequence(~[rest])]) => match rest {
[03:06:41] <klutzy> Eridius: mingw changed install recently, and I think they upgraded libraries/headers at the time.
[03:06:42] <tiffany> what does that mean?
[03:06:56] <Eridius> klutzy: yeah that's the error
[03:06:56] <klutzy> install -> installer
[03:07:09] <klutzy> Eridius: there is a thread on mailing list https://mail.mozilla.org/pipermail/rust-dev/2013-September/005537.html
[03:07:27] <klutzy> although I was not much aware so far
[03:07:59] <tiffany> oh, it means remove the ~ from the []
[03:08:04] <Eridius> hrm, that just says it's broken. Doesn't say how to fix it
[03:08:13] <klutzy> Eridius: seems like thad guidry digged it and documented it here https://github.com/mozilla/rust/wiki/Note-getting-started-developing-Rust
[03:08:32] <Eridius> klutzy: yeah I started with those instructions. It's broken
[03:08:37] *** Joins: jeff_ (jeff@moz-E6A9E8C9.hsd1.or.comcast.net)
[03:08:47] <klutzy> oh no
[03:08:51] <klutzy> it's so unfortunate..
[03:09:03] <Eridius> klutzy: downgrading GCC to 4.5.2 doesn't work. libmpfr and libmpc are broken, and downgrading them doesn't work either because GCC then throws undefined reference to __chkstk_ms
[03:10:07] <klutzy> Eridius: I'll start to dig it today. it's a disaster more than I've thought
[03:10:17] *** Quits: jeff_ (jeff@moz-E6A9E8C9.hsd1.or.comcast.net) (Ping timeout)
[03:10:31] <Eridius> klutzy: thanks. I'm trying to get a Windows setup so I can finally try to fix the windows errors I was getting on my Process::run PR
[03:10:49] <Eridius> since making a change, getting an r+, and watching bors fall over is a very time-consuming process
[03:11:02] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[03:11:02] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14dfc6959 to 14a241deb: 02http://git.io/N3iJvQ
[03:11:02] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[03:11:03] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[03:11:03] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/F0cdgA
[03:11:03] <ghrust> 13rust/06auto 14c62919f 15Brian Anderson: Work around a compiler crash folding labeled break. #9129...
[03:11:03] <ghrust> 13rust/06auto 14bc20fe3 15bors: auto merge of #9176 : brson/rust/issue-9129, r=catamorphism...
[03:11:03] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[03:14:22] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[03:15:18] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:20:29] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Ping timeout)
[03:20:46] <brson> bjz: making the install process faster and easier as going to be a near-term focus. maybe by the end of the year we'll have nightly complete snapshots and installers
[03:21:28] <bjz> brson: awesome :)
[03:21:39] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[03:21:43] *** Joins: maik (maik@moz-C5365941.dip0.t-ipconnect.de)
[03:22:45] *** Joins: jeff_ (jeff@moz-E6A9E8C9.hsd1.or.comcast.net)
[03:26:10] <acrichto> nightly snapshots would be a godsend
[03:26:29] <acrichto> would reduce so much cruft
[03:26:36] <engla> It's 1 month since the last snapshot
[03:26:47] <acrichto> :(
[03:28:56] <brson> we have to get snapshots fixed next week
[03:29:07] <brson> there are a number of things we need to do quickly to get the release out
[03:32:51] *** Quits: maik (maik@moz-C5365941.dip0.t-ipconnect.de) (Ping timeout)
[03:34:13] <bjz> r? https://github.com/mozilla/rust/pull/9182
[03:36:57] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[03:40:48] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[03:41:45] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:42:22] <jmgrosen> so the classic monad definition of (>>=) :: m a -> (a -> m b) -> m b is impossible in rust because of the lack of higher-kinded types, right?
[03:43:40] <brson> jmgrosen: yes
[03:45:22] <engla> you can implement it in specific instances of coursea
[03:45:35] <jmgrosen> yeah, like with option
[03:45:47] <jmgrosen> brson: is that a "far-future" milestone?
[03:46:05] <engla> jmgrosen: vec and iterator also implement it in flat_map
[03:46:12] <dbaupp> jmgrosen: https://github.com/mozilla/rust/issues/8922
[03:46:15] <dbaupp> (is the bug)
[03:46:24] <strcat> jmgrosen: it's not a milestone
[03:46:27] <strcat> it's a wishlist item
[03:46:38] <jmgrosen> alright
[03:46:48] *** Quits: StarLight (StarLight@moz-255C3272.dynamic.avangarddsl.ru) (Ping timeout)
[03:48:12] <brson> jmgrosen: it seems likely that rust will grow higher kinded types someday, but it's not on the roadmap
[03:48:49] <jmgrosen> brson: okay; it would certainly be something I would appreciate
[03:50:42] *** Joins: StarLight (StarLight@moz-A264C0A7.pppoe.avangarddsl.ru)
[03:51:11] *** Joins: jdm (jdm@moz-2C5514D1.lightspeed.sntcca.sbcglobal.net)
[03:51:11] *** ChanServ sets mode: +o jdm
[03:52:28] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[03:53:44] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[03:54:01] <tiffany> what's the best way to implement a finite state machine in rust?
[03:55:06] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[03:55:11] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[03:57:25] <bjz> tiffany: it'd be kinda cool to see if you could implement it erlang style, using tasks
[03:58:07] <tiffany> my first idea was GADTs but rust doesn't have those, my second was a hash map of state -> vector of possible transitions
[04:02:51] *** Quits: Jesin (Jessin_@moz-14FD08AF.cc.lehigh.edu) (Ping timeout)
[04:03:13] <tiffany> huh
[04:06:05] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[04:06:05] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14bc20fe3 to 14a241deb: 02http://git.io/N3iJvQ
[04:06:05] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[04:06:06] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[04:06:06] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/vZovFw
[04:06:06] <ghrust> 13rust/06auto 14c62919f 15Brian Anderson: Work around a compiler crash folding labeled break. #9129...
[04:06:06] <ghrust> 13rust/06auto 1452b9688 15bors: auto merge of #9176 : brson/rust/issue-9129, r=catamorphism...
[04:06:07] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[04:06:22] <klutzy> Eridius: at /path/to/mingw/include/mswsock.h, there is a line "int WSAAPI WSAPoll(WSAPOLLFD, ULONG, INT);"
[04:06:28] <klutzy> inside #if (_WIN32_WINNT >= _WIN32_WINNT_VISTA)
[04:06:49] <Eridius> klutzy: yeah that's the line that has a problem
[04:07:13] <klutzy> but they lack the definition of WSAPOLLFD which should be at winsock2.h..
[04:07:23] <klutzy> so comment it out. it is not needed for us :)
[04:08:28] <Eridius> huzzah compilation proceeds. Let's hope that was the only issue
[04:09:30] <tiffany> I don't think I'll be able to leverage the type system for this
[04:09:32] <klutzy> I got pthread.h error, but because I didn't install some package as wiki said. (intended for test)
[04:09:50] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[04:09:55] *** Joins: brendan (brendaneic@561D8933.1C47CCC8.AE7389D4.IP)
[04:11:26] *** Quits: brendan (brendaneic@561D8933.1C47CCC8.AE7389D4.IP) (Quit: brendan)
[04:12:22] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[04:12:54] *** Quits: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se) (Ping timeout)
[04:13:27] <dbaupp> tiffany: an enum of the possible states?
[04:13:50] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[04:14:12] <tiffany> I can do an enum of all events that can happen, but I cannot limit the events to those which are valid for a given state without either GADTs or an enum for each state
[04:14:30] <dbaupp> ah, I see
[04:14:31] <tiffany> as far as I know
[04:15:30] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[04:18:08] *** Quits: KindOne (KindOne@moz-79A66DC5.dynamic.ip.windstream.net) (Ping timeout)
[04:20:14] *** Joins: adu (alt@moz-BF2B1AE4.washdc.fios.verizon.net)
[04:20:22] <tiffany> how do you convert a ~str to a ~[u8]?
[04:20:39] <dbaupp> rusti: (~"foo").into_bytes()
[04:20:40] -rusti- ~[102u8, 111u8, 111u8]
[04:20:47] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[04:20:55] <adu> hi tiffany 
[04:21:15] <dbaupp> or, if you don't want to move the ~str:
[04:21:30] <dbaupp> rusti: let s = ~"foo"; s.as_bytes().to_owned()
[04:21:31] -rusti- ~[102u8, 111u8, 111u8]
[04:21:52] <dbaupp> (`s` will be usable after the latter, but not the former)
[04:21:55] <engla> you can use a  State x State array to cross of the possible transitions
[04:22:52] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[04:24:28] <adu> so every programming language has a reason
[04:24:46] <adu> e.g. for Go I can explain in one word: simplicity
[04:24:59] <adu> how do I rationalize why people should use Rust?
[04:25:08] <olsonjeffery> so, #rust.
[04:25:09] <joelteon> simplicity
[04:25:17] <olsonjeffery> how to parse a multistring in rust?
[04:25:28] <adu> olsonjeffery: what's a multistring?
[04:25:29] <olsonjeffery> anyone know if there's examples of this in libstd
[04:25:41] <bjz> adu: safety, correctness, lightweight abstractions, concurrent
[04:26:00] <adu> bjz: I like correctness and concurrency
[04:26:06] <adu> bjz: those are good reasons
[04:26:22] <adu> I'm not sure I understand lightweight abstractions
[04:26:22] <olsonjeffery> adu: a null-byte-delimited group of strings that terminate in a double-null-byte
[04:26:22] <engla> rust-lang.org presents it well.  " Its design is oriented toward concerns of ‚Äúprogramming in the large‚Äù, that is, of creating and maintaining boundaries ‚Äì both abstract and operational ‚Äì that preserve large-system integrity, availability and concurrency. "
[04:26:40] <adu> olsonjeffery: is ARGV an example?
[04:26:58] <olsonjeffery> good question!
[04:27:26] <engla> is it truly a ~str, then you can split on \0 with .split_iter()
[04:27:40] <olsonjeffery> engla: still have to discover the length first..
[04:27:49] <adu> rust's module features are humbling, and astounding, to say the least!
[04:27:55] <acrichto> dbaupp: found the bug https://github.com/mozilla/rust/pull/9183
[04:27:57] <engla> oh right
[04:28:11] <olsonjeffery> acrichto: you seen anything like what i'm talking about in libstd?
[04:28:15] <bjz> adu: lightweight abstractions like in C++. Things should compile down into efficient forms. Generics should monomorphise. Closures should inline. Boxed values should not cause more overhead than their base forms.
[04:28:20] <olsonjeffery> not enthused about implied ptr arithmetic
[04:28:28] <acrichto> olsonjeffery: sorry what are you talking about?
[04:28:32] <JesseH> Hi, Here is my code. http://hastebin.com/mehuqogoko.rs | and here is my error.http://hastebin.com/xagopoyevu.mel
[04:28:39] <JesseH> Have no idea why it doesnt work
[04:28:42] <olsonjeffery> acrichto: parsing a C multistring into a ~[~str] or somesuch
[04:28:45] <adu> bjz: kind of like Java erasure-type-stuff?
[04:28:49] <acrichto> olsonjeffery: oh look in like env parsing from windows
[04:28:55] <acrichto> olsonjeffery: someonwhere in std/os.rs
[04:28:58] *** Joins: KindOne (KindOne@moz-79A66DC5.dynamic.ip.windstream.net)
[04:29:02] <acrichto> it's not abstracted right now
[04:29:02] <olsonjeffery> boffo
[04:29:09] <acrichto> or at least not that I know of
[04:29:16] <acrichto> dbaupp: that should unblock https://github.com/mozilla/rust/pull/9153
[04:29:46] <dbaupp> acrichto: what does that do for e.g. `macro_rules! foo( ($e:expr) => { format!("{} {}",  $e) }) foo!(1)`?
[04:29:53] <adu> I'm not a dummy when it comes to Rust, I'm just trying to figure out how to convince my boss that it's a valid impl option
[04:30:04] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[04:30:05] <olsonjeffery> acrichto: oh wow. it straight does unsafe ptr arithmetic. nice.
[04:30:11] <dbaupp> acrichto: it only shows the invocation site, right? not the actual span that's the problem?
[04:30:15] <olsonjeffery> wasn't there some library to wrap this sort of thing?
[04:30:20] <bjz> acrichto: I dunno what that is. But for example, struct MyInt(int) should compile down to an int. The abstraction just serves for type safety and as a nice user interface
[04:30:42] <adu> I like to write about Rust on my blog: http://straymindcough.blogspot.com/
[04:30:47] <acrichto> dbaupp: surprisingly it works https://gist.github.com/alexcrichton/6558838
[04:31:07] <acrichto> olsonjeffery: I'm unaware of such a library, although perhaps it'd be nice...
[04:31:10] <dbaupp> acrichto: ah! neat.
[04:31:29] <bjz> acrichto: a better example would be Option<&T>. an extremely useful abstraction, but compiles down to a single nullable pointer
[04:31:30] <dbaupp> acrichto: I feel like there are still invocations that can give bad error messages. hm.
[04:31:44] <acrichto> bjz: I'm a bit lost, what's this for?
[04:31:53] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[04:31:53] *** ChanServ sets mode: +ao brson brson
[04:32:05] <dbaupp> acrichto: (I'd prefer to have a note on either the invocation or the macro internals with the error on the other.)
[04:32:06] <acrichto> dbaupp: this is only during syntax expansion, and it's only on that one span passed in, every other span I've seen has been good
[04:32:12] <adu> bjz: sounds like Haskell's newtype
[04:32:55] <acrichto> dbaupp: that's the actual location of the error though, foo!(1) is not at fault, the foo macro is
[04:33:07] <engla> adu: Option<T> is haskell's Maybe a   the specific optimization is that nullable pointers -- Option<&T> are represented as pointers.
[04:33:10] <acrichto> b/c $e can't be "expr, expr"
[04:33:17] <adu> I'm pretty sure that Rust will replace C++ and OCaml and Haskell
[04:33:17] <tiffany> how do I close over a Chan/Port?
[04:33:20] <engla> adu: &T is non-nullable and Option<&T> is "nullable"
[04:33:25] <dbaupp> acrichto: right, but is it possible to set up a situation that makes the invocation and the macro both at fault?
[04:33:32] * dbaupp will think about this
[04:33:36] <olsonjeffery> brson: mind if i pull the logic win32's impl of os::env() into a str::raw::from_c_multistring() function?
[04:33:58] <olsonjeffery> only the yucky part..
[04:34:16] <acrichto> dbaupp: yeah I dunno...
[04:34:24] <dbaupp> tiffany: http://static.rust-lang.org/doc/tutorial-tasks.html#communication ?
[04:34:44] <adu> I think the Haskell community will be the hardest to convince because half of them care about "programming in the large" and the other half care about purity, which Rust doesn't have‚Ä¶ 
[04:35:11] <bjz> acrichto: adu was wondering what I meant about 'lightweight abstractions'. I thought you were chiming in :)
[04:35:18] <tiffany> I get tiffbot.rc:39:15: 39:18 error: cannot move out of captured outer variable in a heap closure
[04:35:30] *** Joins: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se)
[04:35:41] <dbaupp> tiffany: https://github.com/mozilla/rust/wiki/Doc-under-construction-FAQ#once-functions
[04:35:49] <dbaupp> tiffany: (sorry for just throwing links at you :) )
[04:35:54] <olsonjeffery> Cell. the devil's Option.
[04:36:04] <acrichto> bjz: oh, oh well
[04:36:06] <adu> engla: I can see the isomorphism between Option<T> and (Maybe T)
[04:36:17] <adu> engla: and nullable pointers
[04:36:22] <acrichto> strcat: looking at the code it appears --target-feature is passed correctly
[04:36:25] <dbaupp> tiffany: there's std::task::spawn_with(chan) |chan| { ... } which moves chan into the task (if that's what you're doing)
[04:36:31] <tiffany> ah
[04:36:35] <strcat> acrichto: yeah it just doesn't work :(
[04:36:35] <bjz> adu: I'm not sure it will. Haskell has the upper hand when it comes to composability. It's a trade off rust has to make. I think Haskell still has a place.
[04:36:36] <brson> olsonjeffery: ok
[04:36:38] <strcat> anyway not important
[04:36:52] <dbaupp> tiffany: (it's generic, so you can move anything; including a tuple of multiple things.)
[04:37:03] <dcrewi> one thing I really miss in rust is working with Options using haskell's do notation
[04:37:12] <dbaupp> dcrewi++
[04:37:14] <adu> bjz: Rust is still pretty damn cool
[04:37:27] <dbaupp> dcrewi: but we really need higher kinded types to get it to work properly
[04:37:53] <adu> bjz: the most lines-of-code I've written is a tie between Python and Haskell
[04:37:55] <dcrewi> dbaupp: so I should expect that to happen eventually?
[04:38:05] <bjz> adu: of course! but it's important to be realistic about the tradeoffs
[04:38:33] <dbaupp> dcrewi: it's a wishlist item, so not definitely, but hopefully.
[04:38:51] <adu> bjz: I'm writing a reengineering library, and I want to make sure that it scales to "programming in the large"
[04:39:40] <bjz> adu: reengineering?
[04:39:52] <adu> bjz: for example: https://github.com/andydude/python2drox
[04:40:04] <adu> is a tool to convert python to an XML format I designed
[04:40:24] <adu> bjz: the format is documented here: http://drosoft.org/tr/drox.html
[04:40:30] <bjz> ahh
[04:41:27] <adu> re-engineering is partly repurposing existing apps, and partly converting proprietary apps into open-source
[04:42:05] <adu> like if your company hires someone who writes everything, then fires them, and still wants to do business
[04:42:10] <adu> it's a valid reason
[04:42:43] <acrichto> ok https://github.com/mozilla/rust/pull/9185 should make bors much less flaky
[04:43:31] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[04:43:45] <dbaupp> acrichto: \o/
[04:43:52] <acrichto> (at least in theory)
[04:44:03] <brson> acrichto: what was the problem?
[04:44:36] <acrichto> brson: some tests were changing the process's current working directory, but then every test which dependend on relative paths (namely the fileinput ones) would fail randomly if the switch happened at the wrong time
[04:44:38] <brson> i mean, I don't exactly like that function, but I don't understand why this was affecting the bots
[04:44:40] <acrichto> or at least that's my best hypothesis
[04:44:57] <adu> bjz: I'm andydude, btw
[04:45:13] <acrichto> if everything which depended on relative paths used that function, we'd be fine, but there's a lot of instances of dependence on relative paths which don't use that function
[04:45:23] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[04:45:55] <strcat> POSIX has the openat stuff for that reason
[04:46:08] <strcat> but I doubt there's a windows equivalent
[04:46:45] <acrichto> dbaupp: what's the name of that failing test
[04:46:55] <tiffany> can you recv on one task and send on another, for TcpStreams?
[04:46:58] <strcat> the POSIX way would be to give each task a current working directory fd, and only use openat, mkdirat, linkat, unlinkat, and so on.
[04:47:05] <strcat> but not portable to windows :(
[04:47:11] <strcat> + OS X already has that fd issue
[04:47:35] <dbaupp> acrichto: can't remember.
[04:47:46] <acrichto> dbaupp: oh yeah, "error opening foo.c"
[04:48:02] <dbaupp> does libuv give us a sane way to have task-local cwds?
[04:48:04] <acrichto> dbaupp: yeah it could be affected by this
[04:48:20] <acrichto> I'm not sure you can do it on a task level, not even sure if you can do it on a thread level
[04:48:23] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[04:48:27] <acrichto> chdir is at least at the process level
[04:48:43] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[04:49:02] <acrichto> dbaupp: but yes, this should fix workcache::test flakiness
[04:49:04] <dbaupp> yeah, I know; I was wondering if libuv had its own way of managing cwds layered above this.
[04:49:13] <strcat> acrichto: well, that's what openat is for
[04:49:24] <dbaupp> acrichto: awesome! just valgrind to go
[04:49:30] <acrichto> strcat: oh cool
[04:49:48] <acrichto> that's sad that it's not portable
[04:49:56] <strcat> acrichto: http://linux.die.net/man/2/openat
[04:49:58] <strcat> yeah
[04:50:05] <strcat> acrichto: and the big family of them linked at the bottom
[04:50:14] <acrichto> oh interesting...
[04:50:25] <Luqman> acrichto: i imagine it
[04:50:44] <Luqman> it's only a few tests that change dir why not have them change it back
[04:50:45] <acrichto> well in theory if we pipe everything through to libuv, we can keep a cwd per-task and then just join all outgoing paths with it
[04:50:53] <strcat> acrichto: it's mostly there because it's required to avoid many classes of races
[04:50:59] <strcat> it allows you to do neat things
[04:50:59] <acrichto> Luqman: tests can't change directories at all though
[04:51:03] <strcat> acrichto: for example...
[04:51:06] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[04:51:06] *** ChanServ sets mode: +ao dherman dherman
[04:51:12] <strcat> openat a directory, and then remove the directory
[04:51:16] <dbaupp> Luqman: the tests run concurrently
[04:51:30] <strcat> it no longer exists on the fs, but it won't actually go away until no process has a file descriptor opened to it
[04:51:35] <Luqman> dbaupp: ah
[04:51:36] <strcat> just like files
[04:51:36] *** Joins: maik (maik@moz-C5365941.dip0.t-ipconnect.de)
[04:51:38] <strcat> but for directories
[04:51:57] <acrichto> strcat: seems desirable
[04:52:00] *** Joins: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net)
[04:54:49] <dbaupp> acrichto: is it worth having a comment in https://github.com/mozilla/rust/pull/9185/files#diff-6 about why it's in run-pass?
[04:55:14] <acrichto> dbaupp: it's always worth it to have more comments
[04:55:34] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:55:42] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[04:55:59] * dbaupp submits a PR with thousands of lines of `// more comments are good`
[04:56:14] <klutzy> on `make check-fast`, `PATH=$PATH:/path/to/stage2/bin some_test` is called, but if PATH already contains directory (old) libraries then test fails to load it.
[04:56:26] * acrichto shakes fist at dbaupp 
[04:56:36] <eevee> // this is line 1
[04:56:41] <eevee> // this is line 3
[04:56:48] <acrichto> eevee: I will end you :P
[04:56:53] <klutzy> I think PATH should be set as PATH=/path/to/stage2/bin:$PATH, but I don't know where should I see.
[04:56:57] <acrichto>  // got here
[04:57:08] <dbaupp> eevee: just in case some is force to use an editor without line numbering! good thinking!
[04:57:32] <strcat> rusti: COMEFROM 30
[04:57:33] -rusti- <anon>:5:18: 5:20 error: expected one of `; }` but found `30`
[04:57:33] -rusti- <anon>:5          COMEFROM 30
[04:57:33] -rusti-                            ^~
[04:57:33] -rusti- application terminated with error code 101
[04:57:45] <klutzy> rusti: //
[04:57:46] -rusti- ()
[04:57:50] <klutzy> rusti: /*
[04:57:51] -rusti- <anon>:4:12: 4:13 error: unterminated block comment
[04:57:51] -rusti- <anon>:4     let r = {
[04:57:51] -rusti-                      ^
[04:57:51] -rusti- application terminated with error code 101
[04:57:52] <eevee> // increment by 1
[04:57:54] <eevee> y += 2;
[04:58:09] <acrichto> dbaupp: wrote a comment
[04:58:12] <acrichto> eevee: haha
[04:58:22] <tiffany> I am having some problems here
[04:58:55] <tiffany> I either need a way to asynchronously poll a TcpStream + a Port, a way to use a TcpStream from mutliple tasks at once (one read, one write), or some other solution
[04:58:56] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[04:58:59] <lkuper> dbaupp: true story: some years ago a project that some of my friends worked on made it onto some automatically-generated "the best-commented projects in open source" list, because the code was like 40% comments -- and then it turned out that the reason it was 40% comments was because gigantic swaths of code were commented out
[04:59:18] <dbaupp> hahaha
[05:00:05] <klutzy> http://www.ioccc.org/1995/spinellis.c :)
[05:00:38] <dbaupp> tiffany: possibly not possible; but you could check out https://github.com/chris-morgan/rust-http because I think ChrisMorgan has met with a similar problem
[05:00:48] <dbaupp> (not possible yet, that is)
[05:00:59] *** Joins: ww (Mibbit@moz-DFAED48A.lightspeed.sntcca.sbcglobal.net)
[05:01:54] <ChrisMorgan> At present rust-http can't properly read and write at the same time.
[05:02:03] <tiffany> howcome there was faux-synchronous IO added before async IO?
[05:02:10] <dbaupp> ease?
[05:02:22] *** Quits: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se) (Client exited)
[05:02:34] <tiffany> well now I'm stuck and there's no way out
[05:02:36] <tiffany> I hardly call that easy
[05:02:37] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[05:02:48] <dbaupp> ease of implementation, presumably.
[05:02:53] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[05:03:02] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[05:03:08] <strcat> the only purpose of comments is to make excuses for the awful hacks you used to get it working
[05:03:40] <tiffany> most of my comments are "TODO: this is bad", "ugh", or "oh god why windows"
[05:04:33] <ChrisMorgan> As far as rust-http's server is concerned, true pipelining of requests with request bodies is not yet possible without really nasty code (manually figuring out the read bounds in reading from the response's stream, rather than the request's stream which is by that time None).
[05:04:46] <brson> tiffany: what are you trying to do?
[05:05:12] <tiffany> brson: I'm trying to implement a finite state machine using tasks, but it has to be able to send and receive irc messages from a TcpStream
[05:05:48] <brson> ChrisMorgan: i'd like to know what the problem is with rt::io that's making http bad
[05:05:53] <tiffany> I can't poll more than one port at a time, I can't poll a socket async at all, etc.
[05:06:07] <JesseH> How do I do file input/output with Rust?
[05:06:19] <tiffany> I can't, with sockets, send with one task and recv with another
[05:06:27] <acrichto> bors finally accepted something!
[05:06:33] <tiffany> I don't think there's anything else left for me to try short of using another IO library
[05:06:46] <ChrisMorgan> brson: partly it's because of my desire to make loading of the request lazy‚ÄîI'd prefer not to have to read the request body up front.
[05:07:07] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[05:07:11] <brson> tiffany: ok, i understand the things you can't do, but i don't really understand the use case
[05:07:23] <ChrisMorgan> For this to be possible, I need to be able to split a TcpStream into into a reader and a writer. The problem with that is lifetime guarantees, of course.
[05:08:24] <brson> tiffany: for listening to multiple (rust) ports at a time there's rt::select (though it currently requires using rt::comm instead of std::comm), but it's usually better to use a SharedChan with multiple message types
[05:08:51] <tiffany> yeah I don't think multiple ports works
[05:09:09] <brson> ChrisMorgan: does putting the TcpStream into a GC box help with that?
[05:09:22] <tiffany> Arc<TcpStream>?
[05:09:28] <ChrisMorgan> @mut TcpStream
[05:09:37] <brson> ChrisMorgan: yeah
[05:10:04] <ChrisMorgan> brson: I guess it would. But I've been infected by the fear of @!
[05:10:14] <brson> ChrisMorgan: maybe a Rc box then
[05:10:23] <ChrisMorgan> I'm sure that's just as scary.
[05:11:02] <dbaupp> ChrisMorgan: not as scary
[05:11:07] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[05:11:07] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/vZovFw
[05:11:07] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[05:11:14] <brson> tiffany: a RWArc<TcpStream> would possibly let you use it from two different tasks, depending on what you are trying to do. but if you are trying to write at the exact same time that you're blocking on a read then it will just deadlock
[05:11:27] <strcat> Rc is cheap and semantically fine
[05:11:36] <strcat> @mut/RcMut are ugly.
[05:11:43] <tiffany> uh...
[05:11:48] <tiffany> well, I can't read async, so
[05:11:56] <ChrisMorgan> strcat: it's got to be mut.
[05:12:00] <tiffany> I'd have one task almost always blocking on read(), and one which sends sporadically
[05:13:08] <brson> tiffany: what would be the solution in another language that is not C
[05:13:42] *** Joins: Raphael (Raphael94@74BB186E.462E4A1.91C6C01A.IP)
[05:13:46] <tiffany> I don't really know how to do async IO in any languages other than C
[05:14:03] <tiffany> rust, lua, and C are the only ones I've really used in the past year
[05:14:04] <ChrisMorgan> brson: for rust-http, it'd need to be RcMut<TcpStream>, right?
[05:14:13] <brson> ChrisMorgan: i think so
[05:14:54] <brson> tiffany: is there a synchronous i/o solution for what you are trying to do?
[05:14:57] <ChrisMorgan> I guess I'd then be wanting to impl Reader and Writer for it to avoid needing to use the with_mut_borrow etc.
[05:15:19] <tiffany> I could probably go singlethreaded but then I'd have to change how my finite state machine works
[05:15:56] <brson> tiffany: to be clear, you are trying to block on a read of a socket while also periodically writing to that socket, while the read is blocked?
[05:16:06] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[05:16:06] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/HzX8Ow
[05:16:06] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[05:16:07] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[05:16:07] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/FgaHsQ
[05:16:07] <ghrust> 13rust/06auto 140af2bd8 15Alex Crichton: Remove all usage of change_dir_locked...
[05:16:07] <ghrust> 13rust/06auto 144ac10f8 15bors: auto merge of #9185 : alexcrichton/rust/less-changing-directories, r=huonw...
[05:16:08] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[05:16:14] <tiffany> I wouldn't have to block on reads if non-blocking reads were possible
[05:16:26] <dbaupp> ChrisMorgan: that might not work, you may need to newtype it `struct SharedStream(RcMut<TcpStream>);` to be able to impl traits on RcMut
[05:16:37] <ChrisMorgan> True.
[05:16:47] <tiffany> but yes
[05:17:06] <ChrisMorgan> Can't impl a trait from a different crate for a type from a different crate; one or the other must be in the current crate.
[05:17:17] <ww> what are the steps to convert a Json enum back to native object or value?  assuming i've de-serialize a string back to the Json enum.
[05:17:19] <tiffany> one task is always either parsing irc messages or blocked reading, and another would be sending messages ocassionally
[05:17:24] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[05:17:39] *** Parts: Raphael (Raphael94@74BB186E.462E4A1.91C6C01A.IP) ()
[05:17:49] <dbaupp> rusti: struct Foo; impl Eq for extra::rc::RcMut<Foo> { fn eq(&self, other: &extra::rc::RcMut<Foo>) -> bool { true } }
[05:17:50] -rusti- <anon>:5:70: 5:75 warning: unused variable: `other` [-W unused-variable (default)]
[05:17:50] -rusti- <anon>:5          struct Foo; impl Eq for extra::rc::RcMut<Foo> { fn eq(&self, other: &extra::rc::RcMut<Foo>) -> bool { true } }
[05:17:50] -rusti-                                                                                ^~~~~
[05:17:50] -rusti- ()
[05:17:59] <dbaupp> ChrisMorgan: it might work? ^
[05:18:20] <ChrisMorgan> Oh yeah, I forgot: once you've got a generic on something *from* your crate‚Äî
[05:18:28] <Eridius> klutzy: looks like the build failed while building llvm
[05:18:46] <dbaupp> ChrisMorgan: ah, right
[05:18:46] <Eridius> klutzy: couldn't find FE_ALL_EXCEPT
[05:19:22] <klutzy> Eridius: oh, right. I just found my build was dead there
[05:19:33] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[05:21:16] *** Joins: Raphael (Raphael94@74BB186E.462E4A1.91C6C01A.IP)
[05:21:19] <klutzy> hmm, the definition of FE_ALL_EXCEPT is at /path/to/mingw/include/fenv.h. not sure why it fails
[05:21:21] * ChrisMorgan wonders what using RcMut will do to performance
[05:21:22] <brson> maybe sockets should be divisible into seperate readers and writers
[05:21:31] <Raphael> Raphael	oh..i'm sorryyyyy =(
[05:21:32] <Raphael> 11:16	Raphael	i have problem with error
[05:21:32] <Raphael> 	Raphael	Error parsing XML: undefined entity
[05:21:32] <Raphael> 	Raphael	Address: chrome :/ / browser / content / browser.xul
[05:21:32] <Raphael> 	Raphael	String 494, symbol of 7: <menuitem id = "context-blockimage"
[05:21:32] <Raphael> 	Raphael	------ ^
[05:21:32] <Raphael> 	Raphael	What is this ?
[05:21:43] <tiffany> brson: that would be a good solution, but as chrismorgan said there's some lifetime stuff to work out
[05:23:17] <brson> it may not be too hard to make TcpStream be `struct TcpStream(TcpReader, TcpWriter)` and have some method that consumes it and gives you seperate readers and writers
[05:23:28] <brson> that doesn't seem like something other libraries do though
[05:24:07] <tiffany> I would settle for a wrapper around the event loop
[05:24:22] <tiffany> but I'm adjusted to writing libevent code
[05:25:30] <Raphael> this error showed at updates browser 
[05:25:46] <brson> Raphael: this channel is for the rust programming language. it's not related to firefox
[05:26:30] <ChrisMorgan> As it is, it's forcing you into the event loop model, which is not a good idea for consistent performance. For HTTP, the event loop is tight (spawning a new task for each new connection), but for something like IRC it's all in one connection, so you'd be stuck with the event loop model.
[05:26:46] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[05:27:05] <Raphael> may be here know it? 
[05:27:19] <brson> there must be irc clients that don't use async i/o though?
[05:27:35] <tiffany> I don't think so
[05:27:42] <tiffany> how would you be able to send messages when you're blocking on reads?
[05:28:00] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[05:28:07] <ChrisMorgan> Raphael: you're in the wrong place.
[05:28:38] <brson> Raphael: #firefox is probably a better place to ask
[05:29:11] <ChrisMorgan> tiffany: things like select make such a design not infeasible, merely harder.
[05:29:33] <Raphael> thank you
[05:30:24] <ChrisMorgan> IRC bots can also operate synchronously; e.g. if it needs to do something, merely don't handle any new input until you've finished with the existing line. That could even be a desirable way of doing it in some cases.
[05:31:16] <tiffany> if any of the commands were to lock up (due to a bug or ill-defined constraints for a dice rolling function) then the whole bot would come crashing down
[05:31:49] <jmgrosen> dumb question: why is Rc<T: Freeze> not Freeze?
[05:32:16] <brson> we're trying to avoid writing an async i/o library in favor of using tasks (we just don't have the bandwith to do this all well). i guess in a synchronous scenario this really demands sharing a socket across threads, but our sockets are owned types. i can't think of anything better than splitting the reader and writer into seperate types
[05:32:41] <dbaupp> rusti: use extra::rc::Rc; fn test_freeze<F: Freeze>(_: F) {} test_freeze(Rc::new(1i))
[05:32:44] -rusti- pastebinned 8 lines of output: http://ix.io/82K
[05:32:50] <ChrisMorgan> tiffany: true. Better ensure that doesn't happen, then! :P
[05:32:56] <dbaupp> rusti: use extra::rc::Rc; fn test_freeze<F: Freeze>(_: F) {} test_freeze(Rc::from_freeze(1i))
[05:32:56] -rusti- ()
[05:33:04] <dbaupp> jmgrosen: it is freeze
[05:33:32] <tiffany> brson: is there a specific reason against not offering access to the underlying event loop?
[05:33:41] <jmgrosen> dbaupp: ...ah. How can you tell if a type is Freeze?
[05:33:59] <jmgrosen> (besides just testing it like that)
[05:34:27] <brson> tiffany: yes. it requires designing an entire async i/o api. you are welcome to use the raw async interface in rt::io::uv but it is not stable and not strictly safe
[05:34:52] <dbaupp> jmgrosen: a type is Freeze unless it contains a nonFreeze type, or it ahs the #[non_freeze] annotation.
[05:35:09] <dbaupp> jmgrosen: sorry, #[no_freeze]
[05:35:15] <jmgrosen> dbaupp: okay
[05:35:42] <jmgrosen> Is there a good explanation of Freeze somewhere?
[05:35:53] <dbaupp> jmgrosen: Freeze is for types that are deeply immutable when placed in a immutable slot (i.e. no memory they refer to will get mutated)
[05:36:31] <dbaupp> e.g. int, ~int, Option<~[int]>, @T (where T is Freeze)
[05:36:39] <strcat> it means they inherit mutability
[05:37:00] <jmgrosen> dbaupp: can I share a Rc<T: Freeze> between tasks?
[05:37:02] <strcat> which includes always immutable types
[05:37:07] <strcat> jmgrosen: no
[05:37:08] <dbaupp> jmgrosen: no; that requires `Send`
[05:37:28] <strcat> Arc is a sendable Rc
[05:37:32] <ChrisMorgan> Except that it's #[no_send] pub struct Rc<T> { ... }
[05:37:44] * strcat would prefer SendRc as the name
[05:38:04] <ChrisMorgan> (viz. Rc is always confined to a single task.)
[05:38:04] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[05:38:08] *** Parts: Raphael (Raphael94@74BB186E.462E4A1.91C6C01A.IP) ()
[05:38:09] <jmgrosen> What makes Rc inherently un-sendable?
[05:38:12] <strcat> to be sendable it has to do atomic refcounting
[05:38:29] <strcat> and the mutable version would have to lock
[05:38:46] <dbaupp> (which is exactly what Arc and MutexArc/RWArc do)
[05:38:59] *** Joins: victorporof (victorporo@6CCF2761.6F48C38B.3EA6AAD8.IP)
[05:40:09] <jmgrosen> So there's no way to create a Rc and guarantee it that I won't change its data? (just curious)
[05:40:27] <strcat> jmgrosen: use from_freeze
[05:40:46] <strcat> it can't change if the contained type is Freeze
[05:41:07] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[05:41:21] <jmgrosen> um, so then why isn't Rc<T: Freeze + Send> sendable?
[05:41:36] <strcat> jmgrosen: because that requires atomic refcounting
[05:41:37] *** Quits: z0w0 (zack@moz-61B3764E.qcl9.cha.bigpond.net.au) (Quit: z0w0)
[05:41:45] <strcat> that's what Arc is
[05:41:54] <jmgrosen> hmmmmm
[05:42:09] * jmgrosen reads about atomic reference counting
[05:42:17] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[05:42:43] <strcat> jmgrosen: you would have races on incrementing/decrementing/reading the refcount
[05:42:54] <strcat> without using atomics, which is slower
[05:43:16] <jmgrosen> Ah, that makes sense
[05:43:16] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Quit: Leaving)
[05:43:36] <strcat> and anyway it doesn't require Freeze, it requires Send *or* Freeze so it would have to be marked non-send
[05:43:47] <strcat> even if it did atomic refcounting
[05:45:52] <engla> will arc and rc move into libstd?
[05:46:42] <strcat> when we make a pointer trait, I'll move Rc to libstd and mark it stable
[05:47:28] <strcat> not RcMut - there are too many ways to do it and it should arguably be Rc<Mut<T>>
[05:47:58] <strcat> could just teach 1 type the dynamic borrowck pattern
[05:48:16] <strcat> and replace @mut, Cell, RcMut
[05:48:20] <dbaupp> that'd be nice
[05:48:32] <dbaupp> isn't Cell effectively Mut?
[05:48:35] <strcat> no
[05:48:43] <strcat> it's very coarse
[05:48:50] *** Joins: gamakichi (Mibbit@1EEF8F2.50A2C647.5A42B74E.IP)
[05:48:53] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:49:04] <strcat> and has weird swap semantics
[05:49:07] <engla> RcMut is less coarse
[05:49:16] <gamakichi> If rust supports stack closures, then why is the type of a stack closure &fn() and not fn()?
[05:49:41] <olsonjeffery> quick, he's found us out!
[05:49:44] <strcat> gamakichi: because stack closures don't exist in the type system
[05:50:06] <strcat> they would all have a unique type, and vary in size
[05:50:17] <Yurume> yeah, it's like that there are no bare `str` or `[T]` types.
[05:50:17] <strcat> I think we *should* have them in the type system but it's not simple to do
[05:50:32] <strcat> Yurume: it's worse than those, because the type is unique
[05:50:55] <dbaupp> gamakichi: we're only missing "proper" stack closures; for &fn(), the environment is stored on the stack.
[05:51:05] <strcat> you can capture (int, int, &u8, &mut int), or maybe (u8, i8, ~int)
[05:51:39] * strcat realizes there is a simpler way to do it than his proposal
[05:52:43] <gamakichi> Why is & optional before a string literal?
[05:52:57] <strcat> gamakichi: I'd consider that a bug
[05:53:06] <strcat> "foo" is &'static str, so &"foo" should be & &'static str
[05:53:07] <dbaupp> strcat: it should be compulsory?
[05:53:10] <strcat> dbaupp: no
[05:53:16] <dbaupp> strcat: good
[05:53:39] <strcat> dbaupp: no reason for a fixed-size string type because if you can't change the size they are essentially immutable anyway
[05:53:48] <strcat> since you won't have index-assign or &mut a[x]
[05:54:01] <dbaupp> yeah
[05:54:09] <dbaupp> rusti: &mut "foo"
[05:54:11] *** Joins: newfprag (brandon@moz-C7AC35F5.mh.shawcable.net)
[05:54:15] -rusti- pastebinned 16 lines of output: http://ix.io/82L
[05:54:19] *** newfprag is now known as brandon-m-skinner
[05:54:31] <dbaupp> rusti: printfln!(&mut "foo")
[05:54:32] -rusti- &mut "foo"
[05:54:32] -rusti- ()
[05:54:36] <strcat> and it wouldn't make sense to enforce a size in bytes for strings
[05:54:42] <gamakichi> &'static str is a borrowed pointer?
[05:54:48] <dbaupp> rusti: let () = &mut "foo";
[05:54:48] -rusti- <anon>:5:13: 5:15 error: mismatched types: expected `&mut &'static str` but found `()` (expected &-ptr but found ())
[05:54:48] -rusti- <anon>:5          let () = &mut "foo";
[05:54:49] -rusti-                       ^~
[05:54:49] -rusti- error: aborting due to previous error
[05:54:49] -rusti- application terminated with error code 101
[05:54:50] <strcat> gamakichi: no, &[] and &str are special-cased
[05:54:52] <strcat> they're slices
[05:54:54] *** Quits: brandon-m-skinner (brandon@moz-C7AC35F5.mh.shawcable.net) (Quit: Konversation terminated!)
[05:54:59] *** Joins: brandon-m-skinner (brandon@moz-C7AC35F5.mh.shawcable.net)
[05:55:14] <strcat> they are similar to borrowed pointers, semantically
[05:55:20] <strcat> but they know how many elements they contain
[05:55:32] <strcat> rusti: let x = &[1, 2, 3]; x.slice(1, 2)
[05:55:33] -rusti- &[2]
[05:55:38] <strcat> rusti: let x = &[1, 2, 3]; x.slice(1, 3)
[05:55:38] -rusti- &[2, 3]
[05:55:42] <strcat> rusti: let x = &[1, 2, 3]; x.slice(1, 3).slice(1, 2)
[05:55:43] -rusti- &[3]
[05:55:45] <dbaupp> (well, how many bytes they contain)
[05:55:50] <gamakichi> strcat: and they are not implemented in the type system?
[05:55:52] <engla> good explanation. It's a borrowed pointer + length
[05:55:53] <strcat> dbaupp: implementation detail ;p
[05:56:03] <strcat> gamakichi: slices are.
[05:56:06] <dbaupp> strcat: meh
[05:56:38] <strcat> gamakichi: only thing I mentioned that's not represented directly in the type system (yet) are stack closures
[05:56:44] <strcat> they coerce to a borrowed closure immediately
[05:57:00] <strcat> anyway the thought that occurred to me is...
[05:57:12] <strcat> fn<T>(...) -> ...
[05:57:18] <strcat> where T is a tuple, representing the captures
[05:57:24] <engla> is there any use for this syntax?
[05:57:26] <engla> fn f<'a>() -> &'a str {  &'a "foo" }  f()
[05:57:45] <dbaupp> strcat: and writing fn<int>(...) would be an error?
[05:57:55] <klutzy> Eridius: did you solved the FE_ALL_EXCEPT issue?
[05:58:01] <strcat> dbaupp: it wouldn't have to be, it could be equivalent to 1 capture
[05:58:15] <strcat> dbaupp: (int) and int have the same representation
[05:58:17] <strcat> doesn't matter ;p
[05:58:19] <strcat> er
[05:58:22] <strcat> (int,)
[05:58:25] <strcat> rusti: (3,)
[05:58:26] -rusti- (3,)
[05:58:27] <strcat> rusti: (3)
[05:58:28] -rusti- 3
[05:58:43] <engla> would be cool if capturing a single &T could put that into the env slot
[05:58:49] <dbaupp> strcat: right
[05:59:09] <dbaupp> strcat: what about capturing a single tuple?
[05:59:10] <gamakichi> Is gc going to be implemented in the library?
[05:59:16] <gamakichi> Maybe I should check faq?
[05:59:21] <strcat> dbaupp: well it would just represent multiple captures as a tuple
[05:59:36] *** Quits: jeff_ (jeff@moz-E6A9E8C9.hsd1.or.comcast.net) (Quit: jeff_)
[05:59:44] <strcat> capturing multiple things == capturing a tuple of those things
[05:59:58] <dbaupp> strcat: yes.... but if you had `let x = (~1, ~2); || { x.second() }` you're capturing the tuple, not two `~int`s
[06:00:08] <strcat> dbaupp: doesn't matter
[06:00:13] <engla> gamakichi: it's ok to ask. the plan is to move the GC and gc'ed pointers into the library
[06:00:46] <strcat> dbaupp: it would just treat capturing ~1 and ~2 separately as putting them in a tuple and capturing it
[06:00:47] <gamakichi> engla: mk. Thank you
[06:00:50] <strcat> semantically it doesn't matter
[06:01:16] * strcat shrugs
[06:01:17] <dbaupp> strcat: do we capture by ref or by move? (as general question)
[06:01:54] <strcat> dbaupp: both?
[06:02:55] <gamakichi> strcat: You said stack closures are coerced into borrowed pointers... but I cannot dereference them, so are they true borrowed pointers?
[06:03:25] <strcat> gamakichi: I said borrowed closures, iirc
[06:03:30] <strcat> they aren't true borrowed pointers
[06:03:35] <dbaupp> strcat: i.e. will the `x` tuple above get moved into the closures environment?
[06:03:49] <strcat> gamakichi: because the inner part has an unknown type/size
[06:04:03] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: Bye)
[06:04:16] <dbaupp> &fn is more like &Trait than &ConcreteType
[06:04:45] <gamakichi> dbaupp: Hm I don't know what you mean by &Trait
[06:05:27] *** Joins: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se)
[06:05:37] <dbaupp> gamakichi: http://static.rust-lang.org/doc/rust.html#object-types
[06:06:35] <strcat> dbaupp: you could do something like saying
[06:07:12] <strcat> (T, extern fn(T, ...)) is the type of a closure
[06:07:26] <strcat> where it coerces to &fn(...) (first arg is implicit)
[06:07:36] *** Joins: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net)
[06:07:50] <strcat> I don't mean it's *actually a tuple*, but just how it can be represented
[06:08:03] <dbaupp> gamakichi: http://static.rust-lang.org/doc/tutorial.html#trait-objects-and-dynamic-method-dispatch also
[06:08:10] <strcat> (T, extern fn(&mut T, ...)) *
[06:09:42] <gamakichi> dbaupp: Why do we need pointer types to use dynamic dispatch?
[06:10:26] *** Joins: joone (joone@3CCE8CB5.2160464A.A34EC3BB.IP)
[06:10:42] <klutzy> Eridius: oh my. I found it.
[06:10:48] *** Quits: joone (joone@3CCE8CB5.2160464A.A34EC3BB.IP) (Client exited)
[06:10:48] <Eridius> klutzy: oh?
[06:10:57] <mark_edward> hey did C99 introduce a bool type?
[06:11:05] *** Quits: maik (maik@moz-C5365941.dip0.t-ipconnect.de) (Ping timeout)
[06:11:20] <Eridius> mark_edward: yes. _Bool
[06:11:31] <klutzy> Eridius: at /path/to/mingw/lib/gcc/mingw32/<ver>/include/c++/mingw32/bits/c++config.h:
[06:11:33] <Eridius> with <stdbool.h> providing some convenience i.e. a macro bool that expands to _Bool
[06:11:46] *** Joins: ecr (Mibbit@moz-BC837B29.hsd1.ca.comcast.net)
[06:11:50] <klutzy> there is #define _GLIBCXX_HAVE_FENV_H 1 in 4.6.1's header
[06:11:54] <mark_edward> ah i see
[06:11:57] *** Parts: ecr (Mibbit@moz-BC837B29.hsd1.ca.comcast.net) ()
[06:12:01] <klutzy> but there isn't in 4.8.1 header.
[06:12:07] <klutzy> don't know why
[06:12:08] <engla> mark_edward: you're late!
[06:12:16] <ww> has the std::map mod been decprecated?
[06:12:16] <Eridius> klutzy: curious
[06:12:27] <mark_edward> engla: very late it sems
[06:12:31] <klutzy> this cuases /include/fenv.h is not included when llvm does #include <fenv.h>
[06:13:02] <klutzy> more curiously, 4.8.1 header even has /* #undef _GLIBCXX_HAVE_FENV_H */
[06:13:13] <klutzy> maybe there is some issues known to mingw?
[06:13:30] <Eridius> klutzy: from reading the comment, I think it doesn't expect you to have fenv.h which is why it's not present
[06:13:40] <Eridius> and it has the commented-out #undef in order to indicate that the default behavior is to have that undefined
[06:14:00] <klutzy> you're right
[06:14:13] <mark_edward> engla: i can't seem to find c_bool anywhere in std::libc. 
[06:14:15] <klutzy> but we do have it at /include/ :(
[06:14:19] *** Joins: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net)
[06:14:25] <klutzy> curious
[06:14:43] <klutzy> anyway i added the #define manually and resumed the build.
[06:15:46] <klutzy> Eridius: do you want to build rust on gcc 4.8.1? I think gcc 4.6.x doesn't have such problem
[06:15:53] *** Joins: sanxiyn (tinuviel@AE8B10D7.A92E374.57C4C441.IP)
[06:16:13] <engla> mark_edward: I suppose it hasn't been needed?
[06:16:14] <Eridius> klutzy: hrm I didn't try 4.6. the rust wiki said to backdate gcc to <4.6, which means 4.5. Since that failed I just updated gcc back to latest
[06:16:51] <mark_edward> engla: it's just a macro over that int nonsense isn't it? Seriously i'll never understand why C doesn't have a bool type...
[06:16:53] <klutzy> Eridius: ah, yes the doc says <4.6. I use 4.6.2 for a long time though
[06:17:06] <Eridius> mark_edward: _Bool in c99 is a real boolean type as far as I know
[06:17:16] <Eridius> mark_edward: but it's called _Bool because they couldn't introduce a new keyword bool without breaking things
[06:17:18] <klutzy> I even didn't noticed any problem :-/
[06:17:21] <Eridius> hence stdbool.h which adds the macros
[06:17:32] <klutzy> I was against official doc!
[06:19:26] <mark_edward> Eridius: is there anyway to find out the size though? writing some FFI stuff using it and need to know what type to give it
[06:20:43] <mark_edward> just gonna ssume it's a c_int
[06:21:01] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[06:21:01] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/FgaHsQ
[06:21:01] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[06:21:20] <gamakichi> What is a u64 type?
[06:21:48] <sanxiyn> uint64_t
[06:22:07] <Eridius> mark_edward: sizeof says it's 1
[06:22:21] <Eridius> which makes sense because it's a 1-bit value, but the smallest size a value can have is char
[06:22:33] <mark_edward> Eridius: thanks, i apppreciate the help
[06:22:43] <sanxiyn> Re: sizeof bool
[06:22:51] <sanxiyn> In language lawyering point of view:
[06:22:52] <sanxiyn> http://stackoverflow.com/questions/4897844/is-sizeofbool-defined
[06:23:15] <Eridius> d'oh
[06:23:21] <Eridius> that's unfortunate
[06:24:18] <engla> but it's going to be at least as large as char
[06:24:25] <sanxiyn> Eridius: It just means we need to add c_bool to libc.rs.
[06:24:38] <Eridius> sanxiyn: sure, if we can figure out how to make sure it's ABI-compatible with C structs that use _Bool
[06:24:41] <sanxiyn> After doing sizeof(bool) for all configurations we suport.
[06:24:50] <sanxiyn> Eridius: Oh
[06:25:08] <sanxiyn> I wonder how Clang handles this
[06:26:02] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[06:26:02] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/FrFTnQ
[06:26:02] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[06:26:11] <docbrown> sanxiyn: http://clang.llvm.org/doxygen/classclang_1_1TargetInfo.html#a3e260582c3a9f94e8859a525449bbca3
[06:26:54] *** Joins: aeqwa (aeqwa@moz-5E5190D9.dsl.tropolys.de)
[06:28:55] <gamakichi> Why does @mut [] not implement .push() ?
[06:30:40] <dbaupp> because .push might cause a reallocation, which would have to update all the other references to that vector (which is impossible)
[06:31:05] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[06:31:06] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/FrFTnQ
[06:31:06] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[06:31:18] <strcat> @[]/@mut [T] should probably be removed and replaced with a more sensible gc'ed slice thing
[06:31:21] <dbaupp> @mut ~[] is the appropriate one to use (although @mut should be avoided as much as possible)
[06:32:21] <gamakichi> dbaupp: Then the manual is misleading. It says: "An indefinite-size vector can only be instantiated through a pointer type, such as &[T], @[T] or ~[T]."
[06:32:22] <SimonSapin> kimundi: the spec only contains encodings relevant for the web, and so should the get_encoding_from_label() function
[06:32:31] <strcat> consider a Rust where @[T] was essentially (uint, @[T]) and you could slice @[T] from @[T]
[06:32:48] <SimonSapin> but you could perfectly have implementations of the traits without associated labels
[06:33:08] <dbaupp> gamakichi: no, it's actually correct in this instance; @[] can have a size defined at runtime, but you can't resize it
[06:33:16] <dbaupp> (same as &[])
[06:33:40] <gamakichi> dbaupp: Oh I see. I assumed indefinite size = expandable
[06:33:52] <dbaupp> gamakichi: yup, maybe it could be clearer :)
[06:34:29] <ww> question: has iter().each() been removed?
[06:34:51] <Eridius> ww: are you maybe thinking of .advance()?
[06:35:08] <gamakichi> advance is on the front page!
[06:35:17] <dbaupp> it's valid in 0.7
[06:35:20] <ww> is advance() the one iterate over a list?
[06:35:29] <dbaupp> (but removed in 0.8)
[06:35:36] <Eridius> dbaupp: it's removed in 0.8? Funny, it's still in the docs
[06:35:40] <Eridius> it's just not necessary for a for loop
[06:35:42] <engla> advance still exists
[06:35:52] <ww> [1,2,3].iter().advance(|x| println(x)) ?
[06:35:59] <engla> ww: you can use a for loop
[06:36:00] <Eridius> ww: there was never a .each() on the results of .iter(). In 0.7 you used .advance() for compatibility with the for-loop
[06:36:13] <ww> ok
[06:36:18] <dbaupp> engla, Eridius: oh, oops
[06:36:21] <sanxiyn> ww: for x in [1, 2, 3].iter() { ... }
[06:36:51] <acrichto> oh man 9150 failed and I was about to start breaking things when the logs had a fileinput failure and then I realized that it was a merge failure
[06:36:57] <ww> sanxiyn: was looking for the closure form of iteration
[06:37:12] <lkuper> Eridius: where in the docs?
[06:37:13] <sanxiyn> ww: You can write one I guess
[06:37:16] <engla> ww: well then advance is the way to go
[06:37:22] <ww> ok, thx
[06:37:23] <strcat> rusti: for x in (&[1, 2, 3]).iter() { println!("{}", *x) }
[06:37:24] -rusti- 1
[06:37:24] -rusti- 2
[06:37:24] -rusti- 3
[06:37:24] -rusti- ()
[06:37:30] <sanxiyn> engla: Eh no?
[06:37:32] <strcat> advance is deprecated
[06:37:41] <Eridius> rusti: [1,2,3].iter().advance(|x| println!("{}", x)
[06:37:41] -rusti- <anon>:6:4: 6:5 error: incorrect close delimiter: `}`
[06:37:41] -rusti- <anon>:6     };
[06:37:41] -rusti-              ^
[06:37:41] -rusti- application terminated with error code 101
[06:37:45] <Eridius> rusti: [1,2,3].iter().advance(|x| println!("{}", x))
[06:37:48] -rusti- pastebinned 11 lines of output: http://ix.io/82O
[06:37:51] <klutzy> #9055 is more critical than I initially thought :(
[06:37:55] * dbaupp hugs acrichto
[06:37:58] <engla> if you want the closure form, i.e. convert an iterator to internal iteration, then .advance does that
[06:38:04] <Eridius> rusti: [1,2,3].iter().advance(|x| { println!("{}", *x); true })
[06:38:06] -rusti- pastebinned 11 lines of output: http://ix.io/82P
[06:38:14] <Eridius> rusti: let xs=[1,2,3]; xs.iter().advance(|x| { println!("{}", *x); true })
[06:38:15] -rusti- 1
[06:38:15] -rusti- 2
[06:38:15] -rusti- 3
[06:38:15] -rusti- true
[06:38:21] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[06:38:39] <ww> thanks guys
[06:38:49] *** Quits: gamakichi (Mibbit@1EEF8F2.50A2C647.5A42B74E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:39:03] <dbaupp> xs.iter().advance(f) is the same as `for x in xs.iter() { f(x) }` except the former likely optimises less well.
[06:39:41] <engla> if !f(x) { break }  :)
[06:39:44] <strcat> dbaupp: well, not equivalent because advance wants a bool return and returns a bool
[06:39:48] <dbaupp> eh, right
[06:39:52] <engla> oh that too
[06:40:01] * dbaupp should stop saying silly things
[06:40:19] <engla> anyway, isn't .advance kind of a useful method on iterators?
[06:40:25] <strcat> engla: not really
[06:40:31] <sanxiyn> Haven't used it at all
[06:40:31] <engla> We want some kind of method (sometimes) that can drain the iterator
[06:40:37] <strcat> engla: for loops
[06:40:40] <strcat> fold
[06:40:42] <strcat> count
[06:40:44] <strcat> len
[06:40:48] <engla> fold doesn't drain
[06:40:51] <Eridius> .advance() seems primarily useful if you're implementing an internal iterator yourself and want to run an external iterator internally
[06:40:51] <engla> it's just an adaptor
[06:40:56] <strcat> engla: it's not an adaptor
[06:41:01] <strcat> it's eager
[06:41:01] <engla> ok true
[06:41:05] <engla> my bad
[06:41:14] <sanxiyn> strcat: Is there a lazy version?
[06:41:32] <strcat> sanxiyn: no, but I don't think a lazy version really makes sense because you fold when you want the result
[06:41:39] <engla> yes right
[06:42:06] <strcat> fold, min_by, max/max_by, len, count, any, all are the eager ones off the top of my head
[06:42:25] <engla> and find and position
[06:42:50] <strcat> I think it would be very, very rare that you'd have a function type matching the signature advance wants
[06:43:02] <strcat> fn(iterator_return_type) -> bool
[06:43:11] <engla> anyway, advance is like .map and drain in one
[06:43:25] <strcat> engla: but you can just use a for loop
[06:43:37] <strcat> for x in xs { f(x) }
[06:43:39] <strcat> vs.
[06:43:52] <strcat> xs.advance(|x| { f(x); true })
[06:44:46] <engla> I guess
[06:45:09] <ChrisMorgan> Just don't try doing `for x in self { ... }`.
[06:45:43] <engla> maybe for x in *self
[06:46:50] <sanxiyn> ChrisMorgan: What happens?
[06:47:11] *** Quits: aeqwa (aeqwa@moz-5E5190D9.dsl.tropolys.de) (Quit: Lost terminal)
[06:47:58] <ChrisMorgan> Well, `for x in self` won't work with fn x(&mut self): not mutable.
[06:48:20] <ChrisMorgan> `for x in *self` used to not work (some drastic error or other, I can't remember) but it seems to work now.
[06:48:45] <strcat> it definitely works because it's how all the eager iterator adaptors are written ;p
[06:48:57] <strcat>     fn any(&mut self, f: &fn(A) -> bool) -> bool {
[06:48:59] <strcat>         for x in *self { if f(x) { return true; } }
[06:49:01] <strcat>         false
[06:49:03] <strcat>     }
[06:49:10] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[06:49:11] * strcat shouldn't say adaptor for that
[06:49:11] <tiffany> does rust do tailcall optimizations?
[06:49:14] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[06:49:24] <strcat> tiffany: LLVM does the optimizations for rust
[06:49:31] <strcat> in some cases, it will do tail call optimization
[06:49:50] <sanxiyn> tiffany: Rust does not do guaranteed tail call elimination
[06:50:13] <strcat> http://llvm.org/docs/CodeGenerator.html#tail-call-optimization http://llvm.org/docs/CodeGenerator.html#sibling-call-optimization
[06:50:17] <mark_edward> can a struct have a *mut member?
[06:50:21] <strcat> mark_edward: sure
[06:50:24] <sanxiyn> (I prefer to call it elimination, because it's not really optimization. Optimization seems to imply being optional.)
[06:51:14] <strcat> sanxiyn: you could always run llvm's tailcallelim pass and teach rust to generate 'tail' instructions + add #[tail] to enforce it
[06:51:22] <strcat> but...
[06:51:30] <strcat> it's only going to work on internal functions
[06:51:40] <strcat> (as in, be able to make that guarantee)
[06:51:45] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[06:51:47] <tiffany> if I have a function which calls another function, neither of them returning anything, will it do tail call elimination?
[06:51:51] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Connection reset by peer)
[06:51:56] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[06:51:58] <strcat> tiffany: if you enable optimizations, sure
[06:52:07] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Quit: leaving)
[06:52:08] <sanxiyn> strcat: As I understand -tailcallelim still does not guarantee it.
[06:52:25] *** Quits: adu (alt@moz-BF2B1AE4.washdc.fios.verizon.net) (Quit: adu)
[06:52:35] <strcat> sanxiyn: the frontend can know which cases it will optimize
[06:52:43] <mark_edward> strcat: is there any wa y to have a *T member that becomes *mut T when you have &mut self?
[06:53:05] <strcat> mark_edward: no
[06:54:07] *** Quits: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net) (Ping timeout)
[06:54:12] <sanxiyn> tiffany: Optimizer probably will do that
[06:54:31] <strcat> sanxiyn: you can say it will do that as a guarantee - because it's not non-deterministic
[06:54:34] <Eridius> mark_edward: if you're using *T then you're probably using unsafe anyway, so you could just cast it
[06:55:05] <mark_edward> Eridius: okay :(
[06:55:24] <strcat> if the function call is a call to itself, and it is the last expression, and there is no type in scope with a destructor, and it returns void, and you enable optimizations
[06:55:33] <strcat> LLVM *will* eliminate the tail call ;p
[06:55:42] <strcat> as soon as you step outside of that... the rules are very complex
[06:55:42] <sanxiyn> strcat: On x86, I think?
[06:55:52] <strcat> sanxiyn: if it doesn't return anything, it'll work anywhere
[06:55:58] <sanxiyn> Oh
[06:56:24] <strcat> but someone could go mess with that tailcallelim pass and change it
[06:56:28] <strcat> not a very stable guarantee ;]
[06:56:51] <strcat> sanxiyn: if it uses an out pointer, it won't do tail call elim - and that's target dependent
[06:57:38] *** Joins: aeqwa (aeqwa@moz-5E5190D9.dsl.tropolys.de)
[06:57:38] <ww> what is the correct syntax to create a HashMap?  I've tried  let map = HashMap<~str, ~[u8]>::new(); but it complains obsolete syntax: declaration of multiple locals at once.
[06:57:41] <strcat> something to do with calling conventions, I think the callee pops the out ptr
[06:58:42] <strcat> rusti: use std::hashmap::HashMap; let mut xs = HashMap::new(); xs.insert(2, 2); xs.len()
[06:58:42] -rusti- 1u
[06:59:09] <strcat> rusti: use std::hashmap::HashMap; let xs = HashMap<int, int>::new(); xs.len()
[06:59:11] -rusti- pastebinned 8 lines of output: http://ix.io/82Y
[06:59:17] <strcat> rusti: use std::hashmap::HashMap; let xs = HashMap::<int, int>::new(); xs.len()
[06:59:18] -rusti- 0u
[06:59:20] <ww> strcat: you don't have to declare the key type and value type in the map?
[06:59:28] <acrichto> dbaupp: inner statics have such a sad story, and they're all blocking format! from becoming the default
[06:59:29] <strcat> ww: no, rust has type inference
[06:59:33] <mark_edward> error: invoking non-Rust fn in fn without #[fixed_stack_segment] [-D cstack (default)]?  what's this about?
[06:59:34] <strcat> ww: it infers from the usage later on
[06:59:43] <ww> ok thx
[06:59:48] <strcat> ww: you usually only have to declare types on function signatures
[07:00:04] <ww> so map can take in different type?
[07:00:09] <sanxiyn> ww: No
[07:00:19] <sam113101> the compiler just infers them
[07:00:28] <ww> infer by the first usage?
[07:00:37] *** Quits: victorporof (victorporo@6CCF2761.6F48C38B.3EA6AAD8.IP) (Ping timeout)
[07:00:38] <acrichto> mark_edward: when invoking a C function, C assumes an "unlimited stack", and rust may have very small segmented stacks, so in order to be save rust must allocate a larger stack to call the C function on
[07:00:39] <sanxiyn> ww: Infer in whatever way
[07:00:44] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[07:00:53] <ww> ok
[07:00:55] <acrichto> mark_edward: that's done via the #[fixed_stack_segment] attribute (tells LLVM to give the flagged function a very large stack)
[07:01:06] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[07:01:06] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14318a8a1 to 144ac10f8: 02http://git.io/N3iJvQ
[07:01:06] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[07:01:09] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[07:01:09] <ghrust> 01[13rust01] 15bors pushed 22 new commits to 06auto: 02http://git.io/DI1Qjg
[07:01:09] <ghrust> 13rust/06auto 1445c62c0 15Erick Tryzelaar: std: rename Option::unwrap_or_default() to unwrap_or()
[07:01:09] <ghrust> 13rust/06auto 14653400a 15Erick Tryzelaar: std: add default implementations to HashMap
[07:01:10] <ghrust> 13rust/06auto 144a73c8e 15Erick Tryzelaar: std: add default implementations to Option
[07:01:12] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[07:01:12] <strcat> sanxiyn: although for the earlier question where the function doesn't do anything... I think LLVM currently has a bug where it says "hey, this function doesn't do anything" and just rms the call
[07:01:21] <strcat> so... it doesn't even loop forever
[07:01:25] <mark_edward> acrichto: is this temporaru or permanent?
[07:01:34] <sanxiyn> strcat: Ah, it doesn't preserve termination?
[07:01:42] <acrichto> mark_edward: this is permanent in one form or another, although the exact syntax is in flux
[07:01:45] <strcat> sanxiyn: it's supposed to, but in this case it doesn't
[07:02:04] <acrichto> mark_edward: before this was a thing, rustc would generate a "wrapper function" per C function which would allocate a large stack
[07:02:13] <sanxiyn> As I understand it is allowed by the standard, but I think LLVM wants to avoid that
[07:02:20] <strcat> sanxiyn: it's allowed by C++11
[07:02:25] <acrichto> mark_edward: the problem with that though is that if you successively call ltos and lots of C functions in a row, you're allocated a larege stack continuously and always switching
[07:02:28] <strcat> but not C11, or the older C/C++ standards
[07:02:36] <sanxiyn> strcat: Huh
[07:02:38] <strcat> so even if they do it for C++11 it has to be a switch
[07:02:40] <acrichto> mark_edward: by having a #[fixed_stack_segment] on the outer rust fn though, you only need to switch stacks once
[07:02:46] <mark_edward> i see
[07:03:10] <acrichto> mark_edward: a bit about this is documented in the ffi tutorial, but I'm not sure how complete it is
[07:03:27] *** Quits: docbrown (davidb@5CE9D448.F0B9EFB2.7F8758CE.IP) (Client exited)
[07:04:06] *** Joins: maik (maik@moz-C5365941.dip0.t-ipconnect.de)
[07:04:12] <strcat> sanxiyn: the thing about the bug is.... they could consider it a non-bug for C/C++ since they would hit a stack overflow anyway without TCO
[07:04:30] <strcat> but if you have segmented stacks, it's obviously a bug to optimize that out
[07:05:03] <sanxiyn> The game compiler writers play...
[07:05:04] <strcat> anyway I think it's just that it tags the function 'readnone nounwind'
[07:05:10] <strcat> and then says, hey - you don't do anything
[07:05:18] <strcat> and removes the call to itself :s
[07:06:18] * strcat shrugs
[07:06:53] <strcat> sanxiyn: http://llvm.org/bugs/show_bug.cgi?id=965
[07:06:55] <strcat> :)
[07:07:15] <strcat> old bug.
[07:07:26] <sanxiyn> Wow old indeed
[07:07:57] *** Quits: six600110 (six600110@moz-2FA48202.neo.res.rr.com) (Ping timeout)
[07:07:57] <strcat> sanxiyn: it's tricky because they want the ability to delete readnone nounwind calls
[07:08:20] <strcat> (btw I mean readnone + readonly)
[07:08:34] <strcat> and they reduce N 'readnone readonly' calls that are not nounwind to 1 call
[07:08:48] <strcat> since if it does unwind, it must unwind the same way every time since it has no variable state ;]
[07:08:53] <strcat> but anyway
[07:09:04] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[07:09:08] <strcat> they really need an attribute about whether it *terminates* too.
[07:09:46] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[07:09:52] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[07:09:56] <strcat> hey
[07:10:00] <strcat> google turns up an implementation of it
[07:10:04] <strcat> sanxiyn: http://lists.cs.uiuc.edu/pipermail/llvm-commits/Week-of-Mon-20100705/103670.html heh!
[07:10:27] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[07:13:10] <mark_edward> strcat: what's string.as_c_str()'s replacement?
[07:13:28] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Quit: ChatZilla 0.9.90.1 [Firefox 24.0/20130909203154])
[07:14:06] <sanxiyn> mark_edward: with_c_str
[07:14:24] <mark_edward> sanxiyn: is that a method on &str?
[07:14:33] <mark_edward> yes it is
[07:14:52] <sanxiyn> I think it is renamed because it is allocating (not casting)
[07:15:01] <sanxiyn> After we got rid of trailing null
[07:15:45] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[07:16:56] <Eridius> .with_c_str() allocates a temporary CString and provides it to a closure. There's also .to_c_str() which returns a CString
[07:16:56] <mark_edward> ah i see
[07:17:17] <Eridius> rather, .with_c_str() provides the *libc::c_char from the CString to the closure. Useful if you just need to call something with it
[07:17:22] <Eridius> use .to_c_str() if you need something more complicated
[07:18:08] *** Joins: squiddy (squiddy@moz-CFC78E68.adsl.alicedsl.de)
[07:23:10] *** Quits: maik (maik@moz-C5365941.dip0.t-ipconnect.de) (Ping timeout)
[07:23:12] *** Joins: six600110 (six600110@moz-2FA48202.neo.res.rr.com)
[07:27:34] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[07:27:56] *** Quits: cdidd (cdidd@moz-8A617D4E.broadband.corbina.ru) (Input/output error)
[07:28:11] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[07:28:50] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[07:31:35] *** Joins: cdidd (cdidd@moz-A230E478.broadband.corbina.ru)
[07:35:10] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Client exited)
[07:37:23] <heftig> rusti: "foo".to_c_str()
[07:37:24] -rusti- std::c_str::CString{buf: (0x7fc574023058 as *()), owns_buffer_: true}
[07:38:09] <heftig> rusti: do "foo".as_c_str |str| { fmt!("%?", str) }
[07:38:10] -rusti- <anon>:5:9: 5:52 error: type `&'static str` does not implement any method in scope named `as_c_str`
[07:38:10] -rusti- <anon>:5          do "foo".as_c_str |str| { fmt!("%?", str) }
[07:38:10] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[07:38:10] -rusti- error: aborting due to previous error
[07:38:10] -rusti- application terminated with error code 101
[07:38:14] <heftig> er
[07:38:18] <heftig> rusti: do "foo".with_c_str |str| { fmt!("%?", str) }
[07:38:19] -rusti- ~"(0x7fae66c23058 as *())"
[07:42:49] *** Joins: nkoep (nik@moz-9172FA96.pool.mediaways.net)
[07:44:17] *** Quits: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net) (Quit: echristo)
[07:44:27] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[07:47:06] *** Quits: jdm (jdm@moz-2C5514D1.lightspeed.sntcca.sbcglobal.net) (Input/output error)
[07:47:40] *** Joins: jdm (jdm@moz-2C5514D1.lightspeed.sntcca.sbcglobal.net)
[07:47:40] *** ChanServ sets mode: +o jdm
[07:49:30] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[07:50:39] <jeaye> New ICE showing up for me with the changes in the last nightly build from strcat. https://github.com/mozilla/rust/issues/9189
[07:51:56] *** Quits: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net) (Input/output error)
[07:53:02] <klutzy> jeaye: this? https://github.com/mozilla/rust/issues/9123
[07:53:31] <jeaye> Nope, don't think so.
[07:55:14] <jeaye> Just downgraded, no more ICE.
[07:55:56] <klutzy> which version downgraded to?
[07:55:58] <ChrisMorgan> Old format has %g, floating point output with non-fixed precision. Is there an equivalent for new format?
[07:57:23] <jeaye> klutzy: Refresh the issue
[07:58:30] <klutzy> uh.. gc8f69dd?
[07:58:44] <klutzy> is it a daily package like ppa?
[07:58:57] <jeaye> Yes.
[07:59:13] <jeaye> For Arch though
[07:59:46] <jeaye> See the issue. :P
[07:59:47] <jdm> oh my word, using gdb on rust programs is heavenly
[07:59:52] <jdm> even just inspecting the stack
[07:59:59] <jeaye> jdm: Is it all wonderful now?
[08:00:04] * jeaye hasn't used it in some time.
[08:00:19] <jdm> jeaye: it's totally delightful
[08:00:25] <jdm> even just -Z debug-info
[08:00:43] <jeaye> Oh, man. I'll need to get some logic errors so I can test it out. ^_^
[08:00:44] <jdm> you get line numbers for everything, and you can list lines around your current position
[08:01:02] <Eridius> can you inspect variables?
[08:01:10] <jdm> Eridius: with -Z extra-debug-info, yes
[08:01:15] <jeaye> jdm: ^x^a
[08:01:18] <Eridius> extra? o_O
[08:01:36] <jeaye> (ctrl+x ctrl+a from within gdb while debugging)
[08:01:48] <jdm> Eridius: yeah, back when I originally worked on it, my incomplete implementation caused many ICEs in common code
[08:02:10] <jdm> so the incomplete stuff was hidden behind another flag
[08:03:21] <sanxiyn> Google Summer of Code is doing a lot of good
[08:03:47] <jeaye> aye
[08:05:59] <jdm> hmm, not every line number appears to be correct
[08:06:00] <jdm> sadness
[08:06:13] *** Joins: sebcrozet (sebcrozet@moz-F96421F3.w80-13.abo.wanadoo.fr)
[08:06:16] <jdm> the only thing worse than nonexistant tools is existant tools that lie to you
[08:06:26] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Ping timeout)
[08:07:03] <sanxiyn> jdm: Is it that AST span is wrong, or AST span is right but wrong debug info is generated?
[08:07:08] <sanxiyn> I fixed some of wrong AST spans in the past
[08:07:54] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[08:08:48] *** Joins: victorporof (victorporo@6C2683EC.42B20A5F.6A4F8DA2.IP)
[08:09:06] <jdm> it's hard to say
[08:09:14] <jdm> the name of the function gdb shows is correct
[08:09:18] <jdm> the file is correct
[08:09:21] <jdm> but the line number is wrong
[08:10:19] <sanxiyn> (One thing I fixed was that do expression had line number of *closing brace* instead of opening brace.)
[08:10:59] <jdm> good find
[08:11:02] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[08:11:02] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/DI1Qjg
[08:11:02] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[08:11:24] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[08:11:57] <sanxiyn> jdm: Is there a good way to test for wrong spans? Can pretty tests do that?
[08:12:07] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[08:12:46] <jdm> I haven't thought about it before
[08:12:59] <jdm> I don't imagine the pretty tests would work for that
[08:15:26] <jdm> maybe we could extend the test harness to look for "^~~~~" strings and match them against the spans in error messages
[08:15:28] <mcpherrin> in python et al, I can do 'A' * 3 -> 'AAA'.  Is there a similar method in Rust?
[08:16:02] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[08:16:02] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/4r8Q7A
[08:16:03] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[08:16:03] <jdm> mcpherrin: "A".repeat(3) I believe
[08:16:14] <mcpherrin> rusti: "A".repeat(3)
[08:16:15] -rusti- ~"AAA"
[08:16:17] <mcpherrin> coolios
[08:16:23] <mcpherrin> rusti: "AB".repeat(3)
[08:16:24] -rusti- ~"ABABAB"
[08:16:46] *** Joins: z0w0 (zack@moz-61B3764E.qcl9.cha.bigpond.net.au)
[08:17:07] <Eridius> rusti: "ke".repeat(10)
[08:17:07] -rusti- ~"kekekekekekekekekeke"
[08:17:21] <mcpherrin> rusti: ~[1,2,3].repeat(2)
[08:17:21] -rusti- <anon>:5:10: 6:5 error: type `[<VI2>, .. 3]` does not implement any method in scope named `repeat`
[08:17:22] -rusti- <anon>:5          ~[1,2,3].repeat(2)
[08:17:22] -rusti- <anon>:6     };
[08:17:22] -rusti- error: aborting due to previous error
[08:17:22] -rusti- application terminated with error code 101
[08:17:27] <mcpherrin> unfortunate
[08:18:00] <mcpherrin> rusti: "ke".repeat(3).into_bytes()
[08:18:01] -rusti- ~[107u8, 101u8, 107u8, 101u8, 107u8, 101u8]
[08:20:14] <Eridius> rusti: fn repeat<A: Clone>(v: &[A], n: uint) -> ~[A] { let mut res = vec::with_capacity(v.len()*n); for _ in range(0, n) { res.push_all(v) }; res } repeat([1,2,3], 2)
[08:20:22] -rusti- pastebinned 11 lines of output: http://ix.io/835
[08:20:35] <Eridius> rusti: fn repeat<A: Clone>(v: &[A], n: uint) -> ~[A] { let mut res = std::vec::with_capacity(v.len()*n); for _ in range(0, n) { res.push_all(v) }; res } repeat([1,2,3], 2)
[08:20:36] -rusti- ~[1, 2, 3, 1, 2, 3]
[08:25:32] <engla> rusti: [1,2,3].iter().cycle().map(|&x| x).take(10).to_owned_vec()
[08:25:45] -rusti- pastebinned 11 lines of output: http://ix.io/836
[08:26:34] <engla> rusti: let v = [1,2,3]; v.iter().cycle().map(|&x| x).take(10).size_hint()
[08:26:35] -rusti- (10u, Some(10u))
[08:26:42] <engla> I like that it still knows how large it is
[08:28:09] <Eridius> eh, that's an easy one. cycle() is infinite, and .take() restricts it to 10
[08:30:20] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[08:30:32] <engla> I guess
[08:30:53] *** Joins: flok56 (flok56@AB930304.425346B2.E0CBD21D.IP)
[08:30:55] <flok56> ciao
[08:30:59] <flok56> !list
[08:31:20] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[08:31:27] *** Parts: flok56 (flok56@AB930304.425346B2.E0CBD21D.IP) ()
[08:35:01] *** Quits: sanxiyn (tinuviel@AE8B10D7.A92E374.57C4C441.IP) (Quit: Bye)
[08:39:21] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[08:43:34] *** Quits: jpf (jan@moz-A8C26A15.org) (Quit: Lost terminal)
[08:51:33] *** Joins: jpf (jan@moz-A8C26A15.org)
[08:53:01] *** Joins: Sindwiller (quassel@moz-743130B2.dynamic.hispeed.ch)
[08:53:43] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[09:00:32] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[09:04:40] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[09:05:26] *** Joins: Seryogah (seryogah@moz-9147333A.dip0.t-ipconnect.de)
[09:05:35] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[09:05:56] *** Quits: squiddy (squiddy@moz-CFC78E68.adsl.alicedsl.de) (Ping timeout)
[09:17:41] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[09:19:11] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[09:22:05] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[09:22:05] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[09:22:59] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[09:26:00] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[09:26:00] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/TZaRkg
[09:26:00] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[09:31:01] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[09:31:01] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/mZVnpw
[09:31:01] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[09:31:03] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[09:31:03] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/QMPk-g
[09:31:03] <ghrust> 13rust/06auto 14d0462f0 15Alex Crichton: Improve the local_data docs slightly...
[09:31:03] <ghrust> 13rust/06auto 14f853f0b 15bors: auto merge of #9160 : alexcrichton/rust/local-data-docs, r=huonw...
[09:31:03] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[09:39:05] *** Joins: _ON_ (_ON_@moz-A39FD741.access.hol.gr)
[09:39:26] *** Quits: _ON_ (_ON_@moz-A39FD741.access.hol.gr) (Quit: )
[09:41:31] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[09:44:28] <kimundi> rusti: let v = ~5; let x = v as ~Send; x
[09:44:29] -rusti- <anon>:5:29: 5:39 error: failed to find an implementation of trait std::kinds::Send for int
[09:44:29] -rusti- <anon>:5          let v = ~5; let x = v as ~Send; x
[09:44:29] -rusti-                                       ^~~~~~~~~~
[09:44:29] -rusti- application terminated with error code 101
[09:44:45] <kimundi> rusti: let v = ~~5; let x = v as ~Send; x
[09:44:46] -rusti- <anon>:5:30: 5:40 error: failed to find an implementation of trait std::kinds::Send for ~int
[09:44:46] -rusti- <anon>:5          let v = ~~5; let x = v as ~Send; x
[09:44:46] -rusti-                                        ^~~~~~~~~~
[09:44:46] -rusti- application terminated with error code 101
[09:45:32] <kimundi> rusti: fn foo<S: Send>(x: S) {  }; foo(5u)
[09:45:32] -rusti- <anon>:5:25: 5:26 warning: unused variable: `x` [-W unused-variable (default)]
[09:45:33] -rusti- <anon>:5          fn foo<S: Send>(x: S) {  }; foo(5u)
[09:45:33] -rusti-                                   ^
[09:45:33] -rusti- ()
[09:45:36] *** Joins: tikue (quassel@moz-FEADCD38.hsd1.pa.comcast.net)
[09:45:50] <kimundi> rusti: fn foo<S: Send>(_x: S) {  }; foo(5u); foo(~"foo")
[09:45:51] -rusti- ()
[09:46:02] <kimundi> rusti: fn foo<S: Send>(_x: S) {  }; foo(5u); foo(~"foo"); foo(&45u)
[09:46:03] -rusti- <anon>:5:60: 5:63 error: instantiating a type parameter with an incompatible type `&uint`, which does not fulfill `Send`
[09:46:03] -rusti- <anon>:5          fn foo<S: Send>(_x: S) {  }; foo(5u); foo(~"foo"); foo(&45u)
[09:46:03] -rusti-                                                                      ^~~
[09:46:03] -rusti- error: aborting due to previous error
[09:46:03] -rusti- application terminated with error code 101
[09:46:09] <kimundi> rusti: fn foo<S: Send>(_x: S) {  }; foo(5u); foo(~"foo"); foo(&'static 45u)
[09:46:09] -rusti- <anon>:5:60: 5:63 error: instantiating a type parameter with an incompatible type `&uint`, which does not fulfill `Send`
[09:46:09] -rusti- <anon>:5          fn foo<S: Send>(_x: S) {  }; foo(5u); foo(~"foo"); foo(&'static 45u)
[09:46:10] -rusti-                                                                      ^~~
[09:46:12] -rusti- error: aborting due to previous error
[09:46:14] -rusti- application terminated with error code 101
[09:49:03] *** Quits: Sindwiller (quassel@moz-743130B2.dynamic.hispeed.ch) (Client exited)
[09:51:13] <engla> kimundi: hi, saw your message about SendableString
[09:51:25] <engla> you are right, it can be adapted for StringRef
[09:51:40] <engla> no idea why that PR never went through, but it seems more complicated than my PR
[09:52:33] <engla> rusti: let s: &'static str = "hello"; do spawn {  println(s) }
[09:52:34] -rusti- hello
[09:52:34] -rusti- ()
[09:54:05] <doomlord> the new visitor stuff is trait based? my code used the old visitor which appears to have been removed, i remember functioon pointer tables... does the new code use trait objects
[09:56:07] <kimundi> engla: I think ideally you want the impl of StringRef, and the name SendStr I think
[09:56:53] <kimundi> engla: Can of course allways be done as an follow up :P
[09:57:46] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[09:58:14] <engla> yes it's not the point of that PR
[09:58:39] <engla> didn't realize it overlapped
[09:59:02] <engla> I mean, even the old code using  Either<~str, &'static str>  is an overlap, it does the same thing
[09:59:44] <kimundi> yeah
[09:59:57] *** Quits: ww (Mibbit@moz-DFAED48A.lightspeed.sntcca.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[10:02:42] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[10:04:27] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[10:04:39] *** Quits: z0w0 (zack@moz-61B3764E.qcl9.cha.bigpond.net.au) (Connection reset by peer)
[10:06:35] *** Quits: brandon-m-skinner (brandon@moz-C7AC35F5.mh.shawcable.net) (Quit: Konversation terminated!)
[10:08:37] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[10:19:11] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[10:19:34] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[10:30:30] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[10:31:18] *** Joins: Home (chatzilla@moz-574D1E49.dynamic.isp.telekom.rs)
[10:32:40] *** Joins: Florob (Florob@moz-39532932.de)
[10:35:28] <kimundi> rusti: (@"foo").to_str()
[10:35:29] -rusti- ~"foo"
[10:36:36] *** Joins: indutny (indutny@moz-49D42D15.c.ircrelay.com)
[10:40:59] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[10:40:59] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/QMPk-g
[10:40:59] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[10:41:20] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[10:42:09] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[10:42:37] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[10:42:46] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Input/output error)
[10:45:58] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[10:45:58] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/r5aMOg
[10:45:58] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[10:45:59] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[10:45:59] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/cD76xA
[10:45:59] <ghrust> 13rust/06auto 1462ba835 15Alex Crichton: Translate nested items in default methods...
[10:45:59] <ghrust> 13rust/06auto 143d469c2 15bors: auto merge of #9162 : alexcrichton/rust/issue-9123, r=catamorphism...
[10:45:59] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[10:48:02] *** jorendorff_away is now known as jorendorff
[11:01:58] *** Quits: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com) (Ping timeout)
[11:02:17] *** Joins: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com)
[11:03:47] *** Quits: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP) (Ping timeout)
[11:03:57] *** jorendorff is now known as jorendorff_away
[11:04:11] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[11:05:24] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[11:05:42] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[11:06:11] <jxv> does rustc support mipsel using llvm?
[11:06:12] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[11:06:37] <jxv> hey bjz
[11:07:18] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[11:07:39] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[11:07:43] <kimundi> jxv: There was an patch that added mips support, but I don't know if it ever got merged, and it sure as hell is not currently tested ;)
[11:08:30] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[11:08:45] <jxv> kimudi, good to hear there's an intention for mips.
[11:08:53] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[11:08:59] *** Quits: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com) (Ping timeout)
[11:09:20] <jxv> although, how difficult would it be to strip it down for mipsel?
[11:09:37] <jxv> I'm not familiar with llvm's api.
[11:09:58] *** Joins: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP)
[11:11:23] <kimundi> jxv: I'm not the right one to ask that, but afaik you'd have to add quite a few plattform specific code. llvm IR is not portable, so you need to modify rustc to emit the correct IR, just like for x86,, x86_64, ARM, etc
[11:12:22] *** Joins: Blub\w (wry@moz-D5BD9AE5.wireless.dyn.drei.com)
[11:13:08] *** Joins: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com)
[11:14:00] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[11:14:23] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[11:15:22] *** Quits: ivan (ivan@moz-531C3EC9.members.linode.com) (Ping timeout)
[11:15:35] *** Joins: topo78 (topo78@moz-8C8485A7.cust.dsl.teletu.it)
[11:15:40] <topo78> !ciao
[11:15:42] <topo78> !list
[11:15:54] *** Parts: topo78 (topo78@moz-8C8485A7.cust.dsl.teletu.it) ()
[11:16:54] *** Joins: topo78 (topo78@moz-8C8485A7.cust.dsl.teletu.it)
[11:16:59] <topo78> !ciao
[11:17:01] <topo78> !list
[11:17:12] *** Parts: topo78 (topo78@moz-8C8485A7.cust.dsl.teletu.it) ()
[11:20:20] *** Joins: ivan (ivan@moz-531C3EC9.members.linode.com)
[11:24:51] *** Joins: Rush_Love_M (maybe_1_da@50A18F51.696F8651.2F1CEEC.IP)
[11:25:16] *** Quits: Blub\w (wry@moz-D5BD9AE5.wireless.dyn.drei.com) (Quit: bbl)
[11:30:48] *** Quits: lazyden (lazyden@47A36AC9.35CBBBD0.F246D1AF.IP) (Quit: lazyden)
[11:32:06] *** Quits: KindOne (KindOne@moz-79A66DC5.dynamic.ip.windstream.net) (Ping timeout)
[11:33:29] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[11:37:41] *** Quits: Rush_Love_M (maybe_1_da@50A18F51.696F8651.2F1CEEC.IP) (Quit: )
[11:39:31] *** Joins: KindOne (KindOne@moz-79A66DC5.dynamic.ip.windstream.net)
[11:40:07] *** Joins: miza (miza@moz-908EA8DE.home.otenet.gr)
[11:41:43] *** Quits: Home (chatzilla@moz-574D1E49.dynamic.isp.telekom.rs) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0a2/20130913004001])
[11:43:22] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[11:43:40] *** Joins: lazyden (lazyden@47A36AC9.35CBBBD0.F246D1AF.IP)
[11:44:00] *** Joins: obk (Mibbit@56A7885C.6849BFB2.CB858787.IP)
[11:44:22] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[11:45:49] *** Quits: jdm (jdm@moz-2C5514D1.lightspeed.sntcca.sbcglobal.net) (Quit: Lost terminal)
[11:48:07] *** Quits: sebcrozet (sebcrozet@moz-F96421F3.w80-13.abo.wanadoo.fr) (Ping timeout)
[11:48:24] *** Joins: sebcrozet (sebcrozet@moz-A855F6C0.w82-127.abo.wanadoo.fr)
[11:51:47] *** Quits: obk (Mibbit@56A7885C.6849BFB2.CB858787.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:52:23] *** Joins: thatfreakingguy (Mibbit@moz-830806B5.pool.mediaways.net)
[11:53:03] *** Joins: CanhtTak (CanhTak@moz-E9D07AD7.wl.t.ulaval.ca)
[11:55:57] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[11:55:57] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/cD76xA
[11:55:57] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[11:57:25] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[12:00:58] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[12:00:58] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/p2wvxQ
[12:00:58] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[12:00:59] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[12:00:59] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/t6i_nQ
[12:00:59] <ghrust> 13rust/06auto 143924cb0 15klutzy: std::rt::io: Fix file I/O on Win32...
[12:00:59] <ghrust> 13rust/06auto 1455b43fa 15bors: auto merge of #9165 : klutzy/rust/newrt-file-fix, r=sanxiyn...
[12:00:59] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[12:02:13] *** Joins: Blub\w (wry@moz-77BEEDA7.wireless.dyn.drei.com)
[12:04:26] <thatfreakingguy> Is it possible to write a macro that takes some number of types and produces an lambda that takes these types as arguments?
[12:04:31] <thatfreakingguy> Problem being that the parameters would need to be named and there doesn't seem to be a way to get identifiers apart from adding them to the input.
[12:06:12] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[12:09:08] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[12:12:14] <kimundi> thatfreakingguy: I think that's not possible with an simple macro
[12:22:41] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[12:26:24] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[12:27:17] <sebcrozet> Hi. Is there some known hack to implement something like: `impl Mul<Vector, Vector> for Matrix` and `impl Mul<Matrix, Matrix> for Matrix` ?
[12:30:44] *** Quits: jakub (jakub@D9037AF.8AB8D9CD.806C54C8.IP) (Quit: leaving)
[12:30:59] <sebcrozet> I mean, implementing both without having conflicting impl errors.
[12:31:41] *** Joins: jakub (jakub@D9037AF.8AB8D9CD.806C54C8.IP)
[12:31:50] <kimundi> sebcrozet: I don't know any hack, and also unsuccessfully tried something like that yesterday :(
[12:33:39] <sebcrozet> kimundi: the only "solution" I see is to have a trait `trait MyMul<R> { fn mul(&self) -> R }` and implement MyMul for the tuples (Vector, Vector) and (Matrix, Matrix).
[12:34:25] <kimundi> sebcrozet: I thought the same :|
[12:34:53] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[12:35:52] <sebcrozet> kimundi: Do you know if there is any plan to support that on the future (perhaps something very close to Haskell's multi-param type class with fundeps)?
[12:36:04] <kimundi> sebcrozet: No idea
[12:36:20] <kimundi> sebcrozet: Hopefully there is
[12:36:30] <sebcrozet> kimundi: yeah, as it is now, this is very annoying for math libs :(
[12:38:25] *** Parts: jakub (jakub@D9037AF.8AB8D9CD.806C54C8.IP) ()
[12:40:46] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[12:41:14] *** Joins: squiddy (squiddy@moz-CFC78E68.adsl.alicedsl.de)
[12:55:05] *** Joins: jakub (jakub@D9037AF.8AB8D9CD.806C54C8.IP)
[12:56:41] *** Quits: aeqwa (aeqwa@moz-5E5190D9.dsl.tropolys.de) (Quit: Lost terminal)
[12:56:44] *** Joins: aeqwa (aeqwa@moz-5E5190D9.dsl.tropolys.de)
[12:56:52] *** Quits: thatfreakingguy (Mibbit@moz-830806B5.pool.mediaways.net) (Quit: http://www.mibbit.com ajax IRC Client)
[13:03:38] *** flaper87|afk is now known as flaper87
[13:08:54] *** jorendorff_away is now known as jorendorff
[13:09:00] *** Joins: maik (maik@moz-C5365941.dip0.t-ipconnect.de)
[13:10:57] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[13:10:57] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/t6i_nQ
[13:10:57] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[13:15:09] *** Quits: maik (maik@moz-C5365941.dip0.t-ipconnect.de) (Ping timeout)
[13:15:54] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[13:15:54] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/gMYR8A
[13:15:54] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[13:17:10] *** Joins: maik (maik@moz-C5365941.dip0.t-ipconnect.de)
[13:20:21] *** Quits: KindOne (KindOne@moz-79A66DC5.dynamic.ip.windstream.net) (Ping timeout)
[13:22:27] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[13:23:46] *** Quits: jpf (jan@moz-A8C26A15.org) (Ping timeout)
[13:24:18] *** Joins: KindOne (KindOne@moz-79A66DC5.dynamic.ip.windstream.net)
[13:24:47] <nielsle> rusti:  let mut (p, c) = stream();
[13:24:52] -rusti- pastebinned 6 lines of output: http://ix.io/83k
[13:25:47] <nielsle> Hmm what is the correct syntax here? I want the port and to be mutable.
[13:26:46] <nielsle> I am trying to do something like the following: let mut (p, c) = stream(); for i in range(0,10) {p = add_element_to_pipeline(p)}
[13:28:19] *** jorendorff is now known as jorendorff_away
[13:28:44] <kimundi> nielsle: currently, you have to do let mut (p, c) = stream(); let mut p = p; let mut c = c;
[13:28:56] <nielsle> Cool
[13:28:57] <kimundi> This is transitory until 'mut' becomes an pattern modifier
[13:29:14] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[13:29:16] <kimundi> at which point you will be able to do let (mut p, mut c) = stream();
[13:29:32] <nielsle> OK thanks
[13:29:50] <kimundi> err, "you have to do let (p, c) = stream(); let mut p = p; let mut c = c;"
[13:30:18] <flaper87> kimundi: who's working on that change ? 
[13:30:33] <flaper87> I mean, making `mut` a pattern modifier 
[13:31:23] <kimundi> flaper87: I think no one currently. Distributed mut has just been removed to make that change backwards compatible
[13:31:48] <flaper87> kimundi: understood. Is there an GH issue for that?
[13:32:15] <kimundi> Probably, but I don't know which one
[13:32:37] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[13:33:15] *** Joins: jpf (jan@moz-A8C26A15.org)
[13:34:49] <ChrisMorgan> Old format has %g, floating point output with non-fixed precision. Is there an equivalent for new format?
[13:39:25] *** Quits: jpf (jan@moz-A8C26A15.org) (Ping timeout)
[13:41:17] *** Quits: lazyden (lazyden@47A36AC9.35CBBBD0.F246D1AF.IP) (Quit: lazyden)
[13:42:30] *** Joins: jpf (jan@moz-A8C26A15.org)
[13:44:30] *** Joins: enomado (nomad@DB5C5EEB.5ED34291.AB610CFE.IP)
[13:45:07] <dbaupp> sebcrozet: http://smallcultfollowing.com/babysteps/blog/2012/10/04/refining-traits-slash-impls/ "what if I want overloading?"
[13:45:45] <dbaupp> sebcrozet: (nmatsakis has expressed his distaste at this solution and hopes to remove the requirement for it at some point)
[13:46:07] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Quit: ChatZilla 0.9.90.1 [Firefox 24.0/20130909203154])
[13:47:23] <dbaupp> acrichto: does `format!` need inner statics; I was thinking about it (dangerous activity :S ), and I think something like `format_args!(f, ...)` => `f(&::std::fmt::rt::Arguments::new(...))` isn't entirely ridiculous, is it/
[13:47:25] <dbaupp> ?
[13:47:48] <dbaupp> acrichto: (i.e. just call the function directly; skip the middleman and all that.)
[13:49:40] *** Quits: KindOne (KindOne@moz-79A66DC5.dynamic.ip.windstream.net) (Ping timeout)
[13:52:26] <sebcrozet> dbaupp: thanks, I‚Äôll read that.
[13:57:16] *** Joins: cmr (moznet@moz-EC676DFE.members.linode.com)
[13:58:29] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[14:00:07] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[14:00:24] *** Joins: Daishiman (osinski@moz-70D5141.telecom.net.ar)
[14:00:28] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:00:41] <Daishiman> Good morning. Is anyone here familiar with the Rust macro system?
[14:00:52] <FrozenCow> I just found out from sebcrozet that 'pure' was removed a while ago from Rust... can anyone give an explination why this was removed?
[14:01:13] <dbaupp> FrozenCow: Rust's old `pure` was weird and a relic of typestate
[14:01:23] <cmr> FrozenCow: it wasn't useful
[14:01:27] <kimundi> FrozenCow: pure in rust never really meant pure (it still allows mutation in unsafe blocks and so)
[14:01:33] <dbaupp> FrozenCow: i.e. it didn't act like a "normal" pure (e.g. Haskell's purity)
[14:01:35] <FrozenCow> ooh ok
[14:01:44] <FrozenCow> ah, that's good to know
[14:01:49] <FrozenCow> ok, that makes total sense
[14:01:50] <dbaupp> Daishiman: vaguely; what's the question?
[14:02:01] <kimundi> It only existed because typestate, and those where already long gone
[14:02:08] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[14:02:22] <FrozenCow> so, I guess there isn't a way to get normal purity in Rust atm?
[14:02:28] <kimundi> Nope
[14:02:29] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:02:32] <cmr> (and there wasn't before, either)
[14:02:43] <cmr> FrozenCow: what do you mean by purity though?
[14:02:46] <FrozenCow> kk, yes, just making sure
[14:02:49] <cmr> Referential transparency? Something else?
[14:03:04] <FrozenCow> no side-effects
[14:03:04] <kimundi> However it might return in form of an effect system post 1.0-ish
[14:03:13] <Daishiman> dbaupp: I'm wondering whether there are any facilities in the macro system to count the number of args in a vararg macro entry, and any way to get the name or type of an identifier as a string
[14:03:29] <FrozenCow> so the function (and its calling functions) isn't (in any way) using data other than what I have supplied
[14:03:39] <kimundi> rusti: stringify!(hello)
[14:03:46] <dbaupp> Daishiman: I don't think there's a way to get the count
[14:03:52] <cmr> Daishiman: you can't get the type of something in a macro, it runs long before typecheck
[14:03:55] -rusti- "hello"
[14:04:12] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[14:04:22] <dbaupp> rusti: macro_rules! foo( ($i:ident) => { stringify!($i) } ) foo!(nested_calls_also_work)
[14:04:36] <Amaranth> Or not?
[14:04:42] <kimundi> give it time
[14:04:51] <cmr> Amaranth: hm?
[14:05:00] *** Quits: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se) (Client exited)
[14:05:01] <dbaupp> rusti: why so slow?
[14:05:16] <cmr> klutzy: hi, just wanted to ask about the windows thing, but you figured it out. bravo!
[14:05:41] <dbaupp> Daishiman: well, as kimundi demonstrated, and I'm trying to, stringify! is the name -> string macro
[14:05:54] <FrozenCow> i was thinking of making a multiplayer library where the game's update function needs to be pure and I want to be 99% sure it is
[14:06:09] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[14:06:13] <dbaupp> Daishiman: (well, to be precise, it's a token tree -> string macro, so you can even convert arbitrary sequences of valid rust tokens to strings.)
[14:06:22] * dbaupp appears to have crashed rusti
[14:06:29] <cmr> FrozenCow: the effect system will take care of that, if/when it comes around
[14:06:30] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:06:33] <cmr> that's far-future though
[14:06:38] <FrozenCow> haha, there it is again
[14:07:04] <FrozenCow> cmr, ah good to know, I'll look it up
[14:07:06] *** Joins: lazyden (lazyden@moz-4578A0B7.singnet.com.sg)
[14:07:13] <Daishiman> @baupp @kimundi: Thanks. The purpose of this is that I want to make a model validation library macro that takes a series of identifier: type entities and buils a struct definition with a series of validators
[14:07:14] <dbaupp> rusti: macro_rules! foo( ($i:ident) => { stringify!($i) } ) foo!(nested_calls_also_work)
[14:07:15] -rusti- "nested_calls_also_work"
[14:07:18] <kimundi> rusti: // Everything okay?
[14:07:20] -rusti- ()
[14:07:33] <FrozenCow> ^-- no answer
[14:07:39] <Daishiman> but in order to make the validators work they have to reference the field members they validate
[14:08:10] <Daishiman> so I'd have to do that by either creating a trait or defining a function that attaches a list of validator methods to the struct fields
[14:08:19] <kimundi> Daishiman: Sounds like something where you'd need procedural macros/syntax extensions for
[14:08:22] <dbaupp> rusti: Everything okay?
[14:08:22] -rusti- <anon>:5:24: 5:25 error: unknown start of token: ?
[14:08:22] -rusti- <anon>:5          Everything okay?
[14:08:23] -rusti-                                  ^
[14:08:23] -rusti- application terminated with error code 101
[14:08:28] <dbaupp> FrozenCow: there's you're answer
[14:08:32] <dbaupp> *your
[14:08:33] <Daishiman> and since there are no introspection capabilities I'd need to do that in compilation time
[14:09:10] <FrozenCow> dbaupp, that doesn't sound healthy at all!
[14:09:20] <dbaupp> FrozenCow: we should take him to a doctor
[14:09:42] <FrozenCow> rusti: please visit a doctor
[14:09:42] -rusti- <anon>:5:16: 5:21 error: expected one of `; }` but found `visit`
[14:09:42] -rusti- <anon>:5          please visit a doctor
[14:09:42] -rusti-                          ^~~~~
[14:09:42] -rusti- application terminated with error code 101
[14:09:55] <kimundi> rusti: "/me dies"
[14:09:56] -rusti- "/me dies"
[14:10:02] <Daishiman> Basically, I think that the capabilies of the type system would mesh very well with a business model library
[14:10:04] <dbaupp> rusti: print("/me dies")
[14:10:05] -rusti- /me dies()
[14:10:08] <dbaupp> heh
[14:10:14] <Daishiman> But I *really* want to avoid the sort of setter-getter crap that Java does
[14:10:24] <FrozenCow> rusti: print("application terminated with error code 101")
[14:10:25] <cmr> Daishiman: well you can just generate code that assumes the types are correct, and the type checker will check that the macro-generated code is correct.
[14:10:25] -rusti- application terminated with error code 101()
[14:10:31] <cmr> That's how format and friends work
[14:10:41] <cmr> rusti: struct Foo; format!("{}", Foo)
[14:10:45] -rusti- pastebinned 6 lines of output: http://ix.io/83m
[14:10:45] <dbaupp> even #[deriving] does that
[14:10:46] <dbaupp> :'(
[14:11:16] <Daishiman> cmr: Right, that what I'm interested in doing, but I want to avoid the boilerplate that a lot of languages have
[14:11:33] *** Quits: valenting (Thunderbir@7658A01E.84D5EFD5.FB866788.IP) (Ping timeout)
[14:12:04] <Daishiman> Also, I've been toying with the idea that a properly defined model would be a great starting point for a relational algebra library as a SQL frontend
[14:12:11] <dbaupp> acrichto: (to be clear, my suggestion for avoiding the statics is mainly to work around inner statics not working very well.)
[14:12:20] <Daishiman> But for that I would need default string definitions for field mappings
[14:12:59] <cmr> Daishiman: so it sounds like you want to be generating a significant amount of code
[14:14:17] <Daishiman> cmr: I don't think that's necessary. I'd like to use the traits capabilites to give the model fields a significant amount of automatic behavior
[14:14:45] <Daishiman> cmr: I just want to minimize the amount of typing the end user would need to define certain structs
[14:15:06] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[14:15:32] <Daishiman> cmr: which would need either some encapsulation of list of validators and model field to SQL field mappings
[14:15:59] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Quit: Leaving)
[14:16:21] <Daishiman> cmr: I mean, ultimately you can go the way of most ORMs and define an XML or YAML mapping file and use string indexes on field and setters and getters
[14:16:30] <Daishiman> cmr: but I think that is *really* ugly
[14:17:27] <Daishiman> cmr: No reason to make things ugly when there is a sufficiently powerful compiler and you could probably get quite close to dynamic languages in terms of expressivity, barring the memory management sigils
[14:18:05] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[14:19:04] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[14:21:06] *** Joins: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net)
[14:21:47] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Quit: Leaving)
[14:22:14] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[14:24:37] <dbaupp> https://github.com/mozilla/rust/pull/9191 r?
[14:25:55] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[14:25:55] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/qEsoRQ
[14:25:55] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[14:27:41] <cmr> dbaupp: what's the problem with `std::rt::io::timer::Timer::new().unwrap().sleep(1000)`?
[14:27:43] <cmr> :P
[14:28:22] <flaper87> dbaupp: +10000 for that
[14:29:16] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[14:29:20] <flaper87> cmr: I can give you a 49 characters long answer :D
[14:30:08] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[14:30:55] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[14:30:55] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/qpZHRw
[14:30:55] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[14:30:58] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[14:30:58] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/D8r3rQ
[14:30:58] <ghrust> 13rust/06auto 14462dcc8 15Lindsey Kuper: Minor cleanup and formatting tweaks to the rust-mode README
[14:30:58] <ghrust> 13rust/06auto 145d905f1 15bors: auto merge of #9178 : lkuper/rust/docs, r=catamorphism
[14:30:59] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[14:31:04] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[14:34:08] <engla> dbaupp: don't need the 'timer::' part 
[14:35:05] *** Joins: refD (Mibbit@moz-B708B51B.lns20.syd7.internode.on.net)
[14:35:22] <miza> error: type `[[u8, .. 64], .. 32]` does not implement any method in scope named `concat_vec`
[14:35:38] <miza> how could i do concat vec to fixed size vector?
[14:36:13] <kimundi> miza: You can'Z
[14:36:24] <engla> miza: I guess you need to take each inner vector as a slice
[14:36:54] <kimundi> miza: fixed sized vectors can currently not be used other than in form of an slice to it, becasuse we lack the ability to express the size as an type parameter
[14:37:35] <engla> rusti: let v = [[5, ..3], ..4]; v.iter().flat_map(|x| x.iter().map(|&x| x)).to_owned_vec()
[14:37:36] -rusti- ~[5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5]
[14:38:03] <miza> engla: minfuck :p
[14:38:07] <miza> mindfuck*
[14:40:30] <enomado> how can i build whole rust with debug-info ?
[14:40:36] <kimundi> "You think that's an mindfuck?".word_iter().map(|s| s.char_at(0).to_ascii().to_upper().to_char()).collect::<~str>()
[14:40:42] *** Quits: maik (maik@moz-C5365941.dip0.t-ipconnect.de) (Ping timeout)
[14:40:45] <enomado> ./configure --enable-debug   ?
[14:40:45] <kimundi> rusti: "You think that's an mindfuck?".word_iter().map(|s| s.char_at(0).to_ascii().to_upper().to_char()).collect::<~str>()
[14:40:46] -rusti- ~"YTTAM"
[14:41:09] <myname> "an mindfuck"
[14:41:31] <kimundi> rusti: "Screw grammar".word_iter().map(|s| s.char_at(0).to_ascii().to_upper().to_char()).collect::<~str>()
[14:41:32] -rusti- ~"SG"
[14:44:03] *** Joins: Palmik (palmik@moz-11EA685D.pks.muni.cz)
[14:48:06] <miza> kimundi: lol
[14:48:53] <miza> i want to to test a 2d vectot so i i did this `for i in range(0u8, 32) { assert_eq!(cpu.display.gfx[i].contains(&1u8), false) };`
[14:50:31] <kimundi> miza: Eh, iterating like this is not recommended :)
[14:51:07] <kimundi> miza: You should always use the vector iterators
[14:51:48] *** Joins: feduser (feduser@B184DF8C.1F811DF7.CDBED010.IP)
[14:51:53] <kimundi> for v in cpu.display.gfx.iter() { assert_eq!(v.contains(&1u8), false) };
[14:51:58] <kimundi> or even shorter
[14:53:01] <kimundi> assert!( !cpu.display.gfx.iter().any(|v| v.contains(&1u8)) );
[14:53:18] <miza> kimundi: u are right, thanks :)
[14:54:17] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[14:55:34] <miza> iterators for the win :p
[15:00:09] <kimundi> :D
[15:00:25] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[15:00:48] <enomado> compile_and_link: x86_64-unknown-linux-gnu/stage0/lib/rustc/x86_64-unknown-linux-gnu/lib/libstd.so
[15:00:49] <enomado> /home/sc/projects/rust/rust/src/libstd/sys.rs:106:31: 108:5 error: internal compiler error: debuginfo: FunctionDebugContext should be initialized but is not!
[15:01:02] *** Joins: SiegeLord (sl@moz-1DF56822.twcny.res.rr.com)
[15:01:31] <kimundi> enomado: debuginfo is known to be crashy
[15:02:12] *** Quits: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Ping timeout)
[15:05:10] *** Quits: XgF (quassel@moz-58044BA0.ldn1.uk.e43.eu) (Client exited)
[15:05:22] *** Joins: XgF (quassel@moz-58044BA0.ldn1.uk.e43.eu)
[15:06:23] *** Quits: ilyoan (ilyoan@B4104EBB.3CC170B1.1E14B209.IP) (Ping timeout)
[15:07:28] *** Joins: ilyoan (ilyoan@B4104EBB.3CC170B1.1E14B209.IP)
[15:08:35] *** Joins: mindcat (mindcat@8C05C7D2.26D3AE15.D6E1F3C4.IP)
[15:08:49] * mindcat 0w0 nya~
[15:08:53] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[15:10:15] <mindcat> eh, it is not working XD
[15:13:33] *** Quits: sammykim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:14:05] <olsonjeffery> i actually like git gui for certain situations. is something wrong with me?
[15:14:26] *** Quits: Daishiman (osinski@moz-70D5141.telecom.net.ar) (Ping timeout)
[15:14:39] <olsonjeffery> i guess mostly for line/hunk commits. and ive never felt like the other git-guis-that-aren't-git-gui are that much better.
[15:14:57] <flaper87> olsonjeffery: you talking about GH's gui, right ?
[15:15:07] <olsonjeffery> also the convenient amend-last-commit
[15:15:15] <olsonjeffery> flaper87: no. `git gui` from the command line
[15:15:31] <olsonjeffery> flaper87: how's your recv_timeout coming?
[15:16:13] <flaper87> olsonjeffery: ahhhh kk, soryr, I've been indoctrinated by GH and forgot about `git gui`
[15:16:38] <flaper87> olsonjeffery: code is done, i'll add more tests now and submit the patch. It was a busy week
[15:16:47] <olsonjeffery> cool
[15:18:40] <engla> olsonjeffery: did you miss that every git command got the -p after a while?
[15:18:58] <engla> I got used to git add -p and then I realized that reset, checkout etc all of them implemented that flag
[15:19:28] <engla> (-p for patch, or hunk-based staging)
[15:20:02] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[15:22:22] <cmr> I knew commit had a -p, didn't know the rest of them got it too
[15:28:43] <olsonjeffery> hm
[15:28:50] <olsonjeffery> can't represent null bytes in rust strings via \0 ?
[15:29:27] <SiegeLord> It's \x00 I think
[15:29:55] <olsonjeffery> engla: just because i can do it on the cli, doesn't mean i neccesarily want to ;P
[15:29:59] <kimundi> rusti: bytes!("\x00", 0, '\x00')
[15:30:00] -rusti- &[0u8, 0u8, 0u8]
[15:30:17] <kimundi> rusti: "\x00"
[15:30:18] -rusti- "\x00"
[15:30:38] *** Joins: davidb (davidb@5CE9D448.F0B9EFB2.7F8758CE.IP)
[15:30:40] <olsonjeffery> im trying to construct a multistring
[15:30:48] <olsonjeffery> so basically i have to cons a bunch of vecs together..
[15:31:03] *** davidb is now known as docbrown
[15:31:07] <Yurume> rusti: bytes!("\u1234", 0)
[15:31:08] -rusti- &[225u8, 136u8, 180u8, 0u8]
[15:31:54] <mindcat> rusti: "\x00".repeat(10)
[15:31:55] -rusti- ~"\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
[15:32:14] <olsonjeffery> bytes!("foo", "\x00", "\x00")
[15:32:34] <mindcat> rusti: bytes!("foo", "\x00", "\x00")
[15:32:35] -rusti- &[102u8, 111u8, 111u8, 0u8, 0u8]
[15:32:41] <olsonjeffery> heh, thanks.
[15:32:49] <olsonjeffery> well looks like that'll work, then
[15:32:50] <olsonjeffery> thanks
[15:33:25] <ChrisMorgan> I've really loved working in Rust thus far, in spite of all the ICE and such around, but I've found one *really* bad problem in the community, which I'm afraid there isn't much hope of fixing. It's simply too addicting!
[15:33:39] <mindcat> ["aaabbb","bbbccc","cccddd"].concat()
[15:33:55] <mindcat> rusti: ["aaabbb","bbbccc","cccddd"].concat().into_bytes()
[15:33:56] -rusti- ~[97u8, 97u8, 97u8, 98u8, 98u8, 98u8, 98u8, 98u8, 98u8, 99u8, 99u8, 99u8, 99u8, 99u8, 99u8, 100u8, 100u8, 100u8]
[15:33:58] <kimundi> ChrisMorgan: 1+
[15:34:02] <ChrisMorgan> (Frankly, I think my Uni grades have been suffering a little this semester, and it's all graydon's fault :P)
[15:34:08] <flaper87> ChrisMorgan: +1 big time
[15:34:50] * kimundi should be stuying right now - but nooooo he'd rather prepare a PR
[15:35:36] * ChrisMorgan should be going to bed right now, if not an hour or two ago :P
[15:35:45] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[15:36:11] <docbrown> ChrisMorgan: I just dove in to Rust yesterday. I'm loving how much thought goes into each feature. The discussions here, in the issue tracker, and on the mailing list are fascinating.
[15:36:27] * ChrisMorgan has been preparing a proper website for himself this evening and came to the conclusion stated above when writing a bit in it about Rust
[15:36:27] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[15:36:27] *** ChanServ sets mode: +ao dherman dherman
[15:36:50] <docbrown> Especially for someone like me who likes the internals, but doesn't really have enough experience to actually work on them. :P
[15:36:54] <flaper87> ChrisMorgan: link ?
[15:37:27] <ChrisMorgan> flaper87: not yet
[15:37:51] *** Quits: ilyoan (ilyoan@B4104EBB.3CC170B1.1E14B209.IP) (Ping timeout)
[15:37:59] <mindcat> rusti: let a = "Not yet."; bytes!(a)
[15:38:00] -rusti- <anon>:5:29: 6:5 error: Non-literal in bytes!
[15:38:00] -rusti- <anon>:5          let a = "Not yet."; bytes!(a)
[15:38:00] -rusti- <anon>:6     };
[15:38:00] -rusti- error: aborting due to previous error
[15:38:01] -rusti- application terminated with error code 101
[15:38:10] *** Joins: jmgrosen_ (jmgrosen@moz-848F6087.sb.sd.cox.net)
[15:38:13] <flaper87> ChrisMorgan: looking forward to it
[15:38:34] <flaper87> I haven't written about Rust in my blog yet but I've been tweeting #RustTip 
[15:38:52] *** Quits: refD (Mibbit@moz-B708B51B.lns20.syd7.internode.on.net) (Quit: http://www.mibbit.com ajax IRC Client)
[15:38:56] *** Joins: valenting (Thunderbir@7658A01E.84D5EFD5.FB866788.IP)
[15:39:04] * ChrisMorgan has had several blog posts basically done on a variety of web topics, for well over a year
[15:39:09] <flaper87> perhaps other folks could do the same
[15:39:32] <kimundi> mindcat: bytes! is an syntax extension, it only works with literals, not with values
[15:39:47] <cmr> it could work with values but it'd be a runtime computation
[15:39:52] <kimundi> true
[15:39:54] <cmr> the point of bytes! is to have bytes literals
[15:40:12] <kimundi> well, byte slice literals :P
[15:40:25] <docbrown> What are some active Rust-related blogs? I've only read pcwalton's so far.
[15:40:34] <cmr> docbrown: http://cmr.github.io/
[15:40:55] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[15:40:55] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/D8r3rQ
[15:40:55] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[15:41:16] *** Joins: ilyoan (ilyoan@B4104EBB.3CC170B1.1E14B209.IP)
[15:41:23] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[15:41:26] <docbrown> cmr: Excellent, thanks!
[15:42:34] *** Joins: maik (maik@moz-C5365941.dip0.t-ipconnect.de)
[15:43:12] <klutzy> oh my..
[15:43:27] <ChrisMorgan> flaper87: well, in-development site at http://new.chrismorgan.info/ (the bit about Rust being at http://new.chrismorgan.info/projects/)
[15:43:34] <klutzy> mingw gcc emits different machine codes on cdecl
[15:43:45] *** Quits: six600110 (six600110@moz-2FA48202.neo.res.rr.com) (Ping timeout)
[15:43:48] <klutzy> 4.6 differs from 4.8
[15:44:04] <klutzy> and the change makes check-fast failure
[15:44:15] <cmr> Does it still conform to the ABI?
[15:44:35] *** Joins: maik_ (maik@moz-C5365941.dip0.t-ipconnect.de)
[15:44:43] <cmr> ChrisMorgan: Whoaaaa you're one of the people behind PortableApps.com !?!?
[15:44:46] <ChrisMorgan> Anyway, I really should go to bed now.
[15:44:54] <klutzy> cmr: gcc changed (fixed?) how to do about stack :(
[15:44:54] *** Quits: maik (maik@moz-C5365941.dip0.t-ipconnect.de) (Quit: Leaving)
[15:44:55] <ChrisMorgan> cmr: yep
[15:44:59] *** Quits: maik_ (maik@moz-C5365941.dip0.t-ipconnect.de) (Quit: Leaving)
[15:45:06] <cmr> <3 portableapps, and the launcher is great
[15:45:33] * ChrisMorgan couldn't bear seeing the way new launchers were being written in NSIS for each app...
[15:45:50] <klutzy> cmr: for C function returning struct { u64, u64 }, gcc 4.6 generated "ret 0x4"
[15:45:53] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[15:45:53] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/R4LgPQ
[15:45:53] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[15:45:54] <klutzy> now it generated "ret"
[15:46:06] *** Joins: maik (maik@moz-C5365941.dip0.t-ipconnect.de)
[15:46:10] <ChrisMorgan> The PortableApps.com Launcher is still far from perfect (oh to be able to rewrite it in Rust‚Äîbut the output needs to be under a couple of hundred kilobytes), but it's a *lot* better than what was there before.
[15:46:18] <klutzy> and stack got funky and extern-pass-TwoU64s.rs test got failed
[15:46:47] <ChrisMorgan> "Anyway, I really should go to bed now." Yeah.
[15:46:50] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[15:47:30] <cmr> klutzy: what was it returning?
[15:47:39] <cmr> Was that correct?
[15:47:55] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[15:47:57] <klutzy> don't know yet. I just opened msdn :p
[15:48:25] *** Joins: Chef (Chef@moz-4C317041.dsl.teksavvy.com)
[15:49:13] *** Joins: a_m0d|home (a_m0d@moz-C75D449C.acanac.net)
[15:49:59] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[15:50:52] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[15:50:52] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/R4LgPQ
[15:50:52] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[15:50:54] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[15:50:54] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/MLY6dA
[15:50:54] <ghrust> 13rust/06auto 1492c4c07 15blake2-ppc: syntax: Remove use of Either in parse.rs...
[15:50:54] <ghrust> 13rust/06auto 14b4eff79 15blake2-ppc: extra::test: Use Result instead of Either....
[15:50:55] <ghrust> 13rust/06auto 14830ac37 15blake2-ppc: std::logging: Use a more specific enum than Either
[15:50:56] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[15:50:57] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[15:50:58] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[15:51:58] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[15:52:52] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[15:53:54] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[15:54:54] *** Quits: mindcat (mindcat@8C05C7D2.26D3AE15.D6E1F3C4.IP) (Quit: Lost terminal)
[15:55:32] <flaper87> mmh, got confused defining this function. http://pastebin.mozilla.org/3053986 
[15:55:48] <flaper87> I need port to implement GenericPort 
[15:55:58] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[15:56:56] *** Quits: valenting (Thunderbir@7658A01E.84D5EFD5.FB866788.IP) (Ping timeout)
[15:57:52] *** Joins: valenting (Thunderbir@moz-9C32009D.residential.rdsnet.ro)
[15:57:57] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:58:52] *** Quits: sebcrozet (sebcrozet@moz-A855F6C0.w82-127.abo.wanadoo.fr) (Ping timeout)
[15:59:01] *** Joins: six600110 (six600110@moz-2FA48202.neo.res.rr.com)
[15:59:21] *** Joins: sebcrozet (sebcrozet@moz-F96421F3.w80-13.abo.wanadoo.fr)
[15:59:36] <kimundi> r? https://github.com/mozilla/rust/pull/9192
[15:59:42] <kimundi> (engla?)
[16:02:05] *** Joins: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu)
[16:03:56] <flaper87> is it possible to require a function argument that implements 2 traits ?
[16:03:59] <engla> I'll read it but I don't think I can approve of this kimundi
[16:04:05] <engla> because I'm not a reviewer :)
[16:04:24] <SiegeLord> flaper87, <T: Trait1 + Trait2> I think
[16:04:58] <SiegeLord> Don't think there's an equivalent trait object syntax though...
[16:05:04] *** Joins: ww (Mibbit@moz-DFAED48A.lightspeed.sntcca.sbcglobal.net)
[16:05:35] <strcat> SiegeLord: well you can do
[16:06:05] *** Quits: maik (maik@moz-C5365941.dip0.t-ipconnect.de) (Ping timeout)
[16:06:08] <strcat> trait Trait3: Trait1 + Trait2 {} impl<T: Trait1 + Trait2> Trait3 for T {} fn foo<T: Trait3>(...) { ... }
[16:06:20] <strcat> or use Trait3 as a trait object
[16:06:28] <kimundi> engla: haha, didn't mean it that way. Just wanted to ping you too. ;)
[16:07:57] <strcat> rusti: struct Foo; impl Drop for (Foo, Foo) { fn drop(&self) {} }
[16:07:57] -rusti- <anon>:5:21: 5:67 error: the Drop trait may only be implemented on structures
[16:07:57] -rusti- <anon>:5          struct Foo; impl Drop for (Foo, Foo) { fn drop(&self) {} }
[16:07:57] -rusti-                               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[16:07:57] -rusti- error: aborting due to previous error
[16:07:59] -rusti- application terminated with error code 101
[16:08:27] <strcat> nmatsakis: around?
[16:08:32] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[16:08:53] *** Quits: ssiloti (steve@moz-4B8C4631.oc.oc.cox.net) (Quit: leaving)
[16:09:12] *** Joins: silotis (quassel@moz-4B8C4631.oc.oc.cox.net)
[16:09:38] *** Quits: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu) (Ping timeout)
[16:09:38] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Ping timeout)
[16:10:10] <Amaranth> kimundi: What's with the random whitespace changes in that PR?
[16:11:13] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[16:12:10] <jmgrosen_> how do you use the extern mod foo = "github.com/blah/foo"; format? I can't seem to figure it out
[16:12:40] <jmgrosen_> I have `extern mod sax = "github.com/bjz/sax-rs";` which I just updated to the rustpkg format, but it doesn't seem to be liking it:
[16:12:46] <jmgrosen_> task <unnamed> failed at 'Unhandled condition: nonexistent_package: (package_id::PkgId{path: std::path::PosixPath{is_absolute: false, components: ~[~"github.com", ~"bjz", ~"sax-rs"]}, short_name: ~"sax-rs", version: NoVersion}, ~"supplied path for package dir does not exist, and couldn\'t interpret it as a URL fragment")', /Users/john/Projects/rust/src/libstd/condition.rs:43
[16:14:01] *** Quits: sebcrozet (sebcrozet@moz-F96421F3.w80-13.abo.wanadoo.fr) (Ping timeout)
[16:14:23] *** Quits: valenting (Thunderbir@moz-9C32009D.residential.rdsnet.ro) (Ping timeout)
[16:15:33] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[16:16:26] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[16:16:34] *** Joins: misterx (Mibbit@6FEB56C8.71FEFA5.520CDC98.IP)
[16:17:10] *** Joins: sebcrozet (sebcrozet@moz-F96421F3.w80-13.abo.wanadoo.fr)
[16:18:11] <misterx> Hi! What are the valid values that TESTNAME can take?
[16:18:48] <cmr> misterx: if the string given in TESTNAME is a substring of a given test's name, that test will be run.
[16:19:50] <misterx> cmr: is the test name the fully qualified function name?
[16:19:58] <cmr> misterx: yes
[16:21:06] <misterx> so TESTNAME can take globs?
[16:21:09] *** Joins: maik (maik@moz-58B2DA03.dip0.t-ipconnect.de)
[16:21:17] <cmr> no, I don't think so.
[16:21:26] <cmr> iirc it just does name.contains(TESTNAME)
[16:22:01] <misterx> cmr: oh... thanks!
[16:22:12] <flaper87> it doesn't need to be the full name of the test
[16:22:20] <cmr> Although we have native globbing now, so we could do globs
[16:22:32] <flaper87> it's good to have (pre|su)fixes in test names
[16:22:42] <olsonjeffery> misterx: its a partial name starting from the beginning
[16:23:00] <engla> it's not anchored
[16:23:01] <olsonjeffery> so FILENAME=test_foo will run all test fns like `fn test_foo_...`
[16:23:22] <olsonjeffery> my bad, then.
[16:23:32] <misterx> olsonjeffery: thanks! t
[16:26:46] <olsonjeffery> im pretty close to having a working FileInfo and DirectoryInfo, sorta kinda like what's in .NET
[16:27:01] <strcat> I narrowed down why mergefunc fails on libextra to bitv....
[16:27:09] <strcat> now to figure out which function...
[16:27:09] <olsonjeffery> well, FileInfo is done.. just working on DirectoryInfo .. mapping readdir is the last bit of that
[16:27:16] *** Joins: tclark (ctimothy@moz-1DB1FE6E.hsd1.wa.comcast.net)
[16:27:47] <acrichto> dbaupp: right now there's a lot of rvalue-lifetime things which prevent format! from doing everything all in one call, but additionally the reason that inner statics are used is to avoid a codegen explosion, I don't think that llvm will automatically lift the variables to statics, and it's seriously needed to compete with fmt! and C's printf in general. Basically I'm going to spend more time fixing it rather than punting it for later (or at l
[16:28:21] *** Quits: tclark (ctimothy@moz-1DB1FE6E.hsd1.wa.comcast.net) (Quit: Leaving)
[16:28:23] *** Joins: tclark (ctimothy@moz-1DB1FE6E.hsd1.wa.comcast.net)
[16:29:26] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[16:29:36] <engla> kimundi: good call on not making str.rs any longer. I'll have some opinions though, sorry about that. I don't think it should be another string type; I think it should be an enum without all the things around it. Maybe put it into use in its intended place and see what makes sense
[16:30:05] <strcat> engla: how about not implementing any traits, etc. for it
[16:30:11] <strcat> just implement Str
[16:30:15] <strcat> the one with as_slice
[16:30:33] *** Quits: CanhtTak (CanhTak@moz-E9D07AD7.wl.t.ulaval.ca) (Quit: CanhtTak)
[16:30:41] <misterx> Hi! sorry to bother again, but i couldn't figure out how to get the tests running. basically, i modified removed a previously ignored test case in std/rt/uv/net.rs and recompiled the tests with 'make check-stage1-std NO_REBUILD=1 TESTNAME=listen_ip4' but it says 0 tests run...what am i missing?
[16:30:47] <engla> yeah. implementing Clone is fine, can't be done anywhere else
[16:30:55] <strcat> engla: right but that can just be derived
[16:31:01] <strcat> and DeepClone
[16:31:28] <engla> I think the DeepClone impl is good manually implemented so that it can copy the &'static str shallowly
[16:31:53] <engla> don't know what deriving would do there
[16:32:10] *** Quits: silotis (quassel@moz-4B8C4631.oc.oc.cox.net) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[16:32:11] <strcat> we could impl DeepClone for &'static in clone.rs, if we want to do that
[16:32:37] <cmr> misterx: hm, looks right to me..
[16:32:52] <cmr> misterx: you just removed the #[ignore(cfg(windows))] ?
[16:33:06] <misterx> cmr: yup...
[16:34:47] <misterx> i tried again, but make exists with  Nothing to be done for `check-stage1-std'.
[16:35:05] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[16:35:40] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[16:35:47] <strcat> great
[16:35:51] <strcat> deriving(Clone) causes it
[16:35:53] <strcat> ;s
[16:36:00] <cmr> misterx: Oh, TESTNAME only works for compiletest, not unit tests!
[16:36:30] <cmr> misterx: there should be a test binary for std somewhere in the build directory, run it directly.
[16:37:05] <cmr> in $ARCH/stage1/test
[16:37:26] <cmr> so here it's x86_64-unknown-linux-gnu/stage1/test/stdtest-x86_64-unknown-linux-gnu
[16:37:34] <olsonjeffery> yeah
[16:37:41] *** Quits: Blub\w (wry@moz-77BEEDA7.wireless.dyn.drei.com) (Quit: bb2m)
[16:37:47] <olsonjeffery> and when you invoke the stdtest vin directory, you run it like normal rust test bins..
[16:37:49] * strcat should teach a script to do what he just did
[16:37:58] <cmr> You should be able to pass that binary `listen_ip4`
[16:38:01] <cmr> strcat: what'd you do?
[16:38:05] <olsonjeffery> ./path/to/stdtest-blah-blah test_name_fragment
[16:38:16] <strcat> cmr: compile extra.rs with rustc, and got an LLVM assert
[16:38:32] <strcat> commented out all the modules.... re-enabled til I found the one causing it
[16:38:45] <strcat> now deleting code until it stops, to figure out exactly what does it... ;p
[16:38:49] <cmr> heh
[16:39:06] <misterx> cmr & olsonjeffery: oh! sorry, i didn't know the difference between compiletest and unit tests
[16:41:09] <misterx> is the return value of 5 from a test runner a standard error code?
[16:42:57] *** Joins: valenting (Thunderbir@moz-9C32009D.residential.rdsnet.ro)
[16:43:01] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[16:43:02] <acrichto> look at all that green http://buildbot.rust-lang.org/grid?width=8&branch=auto
[16:43:20] <strcat> cmr: down to 14 lines
[16:43:22] <strcat> ;p
[16:43:27] <olsonjeffery> acrichto: are the heisentest being cracked down on?
[16:43:39] <olsonjeffery> +s
[16:43:45] <cmr> misterx: I don't think so, no.
[16:43:47] <acrichto> olsonjeffery: the failing fileinput tests have been put to rest
[16:43:59] <acrichto> in #9185
[16:44:07] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[16:44:51] <cmr> acrichto: was that the cause of the spurious bsd failure?
[16:45:21] <acrichto> cmr: https://github.com/mozilla/rust/issues/9137
[16:45:57] <olsonjeffery> im hoping i can fix rt::io::file on win32 before 0.8
[16:46:05] <olsonjeffery> i think its because of use of lseek(2) and friends
[16:46:07] <acrichto> olsonjeffery: klutzy should have already fixed that
[16:46:14] <olsonjeffery> really? nice.
[16:46:23] <acrichto> 9165
[16:46:34] <acrichto> libuv was making sure we were on our toes
[16:46:54] <olsonjeffery> wow!
[16:46:58] <olsonjeffery> fascinating
[16:47:01] <olsonjeffery> klutzy: you're my hero
[16:47:09] <olsonjeffery> that's awesome
[16:47:13] <olsonjeffery> not awesome: merge conflicts!
[16:47:19] <cmr> heh
[16:47:29] <acrichto> I think that https://github.com/mozilla/rust/issues/8810 can be closed
[16:47:34] <acrichto> once we un-ignore the tests
[16:47:41] <olsonjeffery> ill handle that then in my PR
[16:47:46] <acrichto> olsonjeffery: awesome
[16:47:50] <strcat> damn it
[16:47:52] <olsonjeffery> and make sure to run the tests on win32 :)
[16:48:01] <strcat> I think the cause of mergefunc failing is the bitcast we do on self params
[16:48:04] <flaper87> mmh, is there a way to create a range and specify the step size? (meaning the `one` field)
[16:48:13] <strcat> the *invalid bitcast* we do on self params
[16:48:15] <strcat> ;[p
[16:48:20] <strcat> flaper87: no, not yet
[16:48:22] <acrichto> strcat: not more invalid casts :(
[16:48:22] <cmr> strcat: yikes
[16:48:27] <klutzy> acrichto: I wanted to remove #[ignore]s, but I failed to pass `make check-fast` even on unmodified master :(
[16:48:29] *** Quits: a_m0d|home (a_m0d@moz-C75D449C.acanac.net) (Quit: Leaving.)
[16:48:36] <klutzy> maybe I have somewhat wrong setting
[16:48:40] <strcat> flaper87: it's not trivial to implement, since you have to handle overflow properly
[16:48:40] <flaper87> strcat: OH BOY, I'm sooooo adding that
[16:48:44] <acrichto> klutzy: eh it's ok
[16:48:49] <flaper87> strcat: thought so
[16:48:59] <nielsle> Does rust have a fifo queue?
[16:49:01] <olsonjeffery> klutzy: ill sort through it.. i have 2008r2 vm to dev on..
[16:49:01] <strcat> flaper87: I've been unsure about the exact semantics it should have
[16:49:07] *** Quits: six600110 (six600110@moz-2FA48202.neo.res.rr.com) (Connection timed out)
[16:49:08] <strcat> nielsle: yes, extra::ringbuf
[16:49:11] <olsonjeffery> if im stumped, we'll just keep them ignored.. :(
[16:49:12] <nielsle> TY
[16:49:20] <klutzy> :D
[16:49:24] <strcat> nielsle: it's just a ~[T] wrapper with O(1) pop/append to either side
[16:49:48] <klutzy> I'm digging into errors during mingws version upgrade
[16:49:58] <klutzy> windows is fansicinating as hell..
[16:50:00] *** Quits: lazyden (lazyden@moz-4578A0B7.singnet.com.sg) (Quit: lazyden)
[16:50:08] <cmr> strcat: does it grow if it needs to?
[16:50:08] *** Joins: Blei (philipp@moz-A8EE15D9.cust.bluewin.ch)
[16:50:12] <strcat> cmr: yes
[16:50:13] <acrichto> olsonjeffery: one of the tests in https://github.com/mozilla/rust/issues/8816 may be passing now as well 
[16:50:22] <cmr> ok, the name worried me, I thought it might be doing overwriting.
[16:50:32] <strcat> cmr: it should have methods to do that, but it doesn't yet
[16:50:51] <acrichto> olsonjeffery: actually almost all of the libuv ignored tests on windows may be able to get un-ignored b/c that was a pretty core change 
[16:50:51] <klutzy> today I learned that 32-bit cdecl differs between linux and win32
[16:51:03] <strcat> klutzy: cdecl differs between gcc and MSVC on win32
[16:51:20] <klutzy> strcat: yes, and gcc 4.8 follows msvc
[16:51:32] <klutzy> that's what breaks tests
[16:51:34] <SiegeLord> I think they always try to make changes towards msvc
[16:51:43] <SiegeLord> There was one in 4.6 or 4.7 iirc too
[16:52:28] <klutzy> we recommends <4.6, but I was ok with 4.6
[16:52:41] <klutzy> something has changed between them..
[16:52:48] *** Joins: silotis (quassel@moz-4B8C4631.oc.oc.cox.net)
[16:52:54] <cmr> If we're treating the ABI wrongly because we follow what gcc does, then that's a good thing that it's broken isn't it?
[16:52:55] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[16:52:59] <cmr> MSVC integration is kinda important.
[16:53:10] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[16:53:14] <acrichto> strcat: you wouldn't happen to know off the top of your head where extern fns from external crates are declared, would you?
[16:53:26] <strcat> acrichto: yes
[16:53:27] <klutzy> yep, we have to follow msvc, or at least latest gcc
[16:53:30] <strcat> acrichto: get_extern_fn
[16:53:46] <olsonjeffery> acrichto: interesting that anything that uses uv_buf_t worked
[16:53:49] <acrichto> strcat: cool thanks
[16:53:53] <acrichto> olsonjeffery: yeah...
[16:53:53] <olsonjeffery> the worst part: i know about that issue!
[16:54:15] <olsonjeffery> (that libuv subs out uv_buf_t for a win32-native struct for optimizations)
[16:54:16] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[16:54:16] *** ChanServ sets mode: +ao dherman dherman
[16:54:17] <klutzy> cmr: but if we fix it, we have to immediately change gcc to latest one, since it will break things with old gcc
[16:54:20] <olsonjeffery> so, yeah. sadface.
[16:54:33] <klutzy> or we have to introduce some flag.. headaches
[16:54:42] <cmr> klutzy: would probably need to close the tree for the workspace upgrade on the bots?
[16:55:56] <miza> i think that the read_byte should return a u8 type and not an int
[16:55:59] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[16:56:04] <klutzy> cmr: I guess so
[16:56:13] *** Quits: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net) (Ping timeout)
[16:56:18] <cmr> miza: are you looking in std::io?
[16:56:32] *** Parts: Chef (Chef@moz-4C317041.dsl.teksavvy.com) ()
[16:56:54] <engla> it's fixed in the new IO
[16:56:58] <SiegeLord> Does MSVC change the calling convention often?
[16:57:12] <miza> yes
[16:57:32] <strcat> SiegeLord: they can't change it afaik
[16:57:34] <cmr> SiegeLord: I'd hope not, since they need to retain backwards compatability with DLLs compiled in the 90s
[16:57:46] <cmr> miza: don't; std::io is obsolete and unmaintained.
[16:57:52] <cmr> miza: std::rt::io is the new hotness
[16:57:56] <SiegeLord> So it's just mingw slowly converging to it? Is it undocumented or something?
[16:58:20] <klutzy> SiegeLord: http://gcc.gnu.org/bugzilla/show_bug.cgi?id=36834
[16:58:28] <olsonjeffery> would be nice to deprecate swaths of std::io in time for 0.8, with the stuff im gonna land (soon, i hope!) but its probably too small of a timeframe
[16:58:40] <klutzy> I'll file an issue after some more investigation
[16:59:05] <engla> and remove the old printf!/printfln! before 0.8 too
[16:59:25] <docbrown> Just out of curiosity, what's still needed to enable Rust to build standalone apps for Android?
[16:59:40] *** Joins: sinma (sinma@moz-6A11C47C.fbx.proxad.net)
[16:59:46] <cmr> docbrown: apps as in run an app on your phone and push buttons?
[17:00:18] <SiegeLord> klutzy, That's the change I was referring to... is there a new change?
[17:00:41] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[17:00:42] <docbrown> cmr: Not requiring people to copy shared libraries, at least. I realize JNI is required for the UI part.
[17:00:53] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[17:00:53] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/MLY6dA
[17:00:53] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[17:01:11] <sinma> Hello! I do ¬´use Component::*; mod Component;¬ª and it says ¬´unresolved import¬ª, but I‚Äôve Component.rs in the same folder
[17:01:19] <olsonjeffery> docbrown: i would ask in #servo
[17:01:30] <cmr> docbrown: probably nothing or very little, you can just do #[no_std]
[17:01:34] <olsonjeffery> based on some of the list traffic, it almost sounds like some of the samsung people have android builds of servo
[17:01:37] <cmr> docbrown: We have runtimeless other-ARM apps
[17:01:47] <strcat> it would be nice if we passed self properly
[17:01:53] <miza> cmr: i can't find somthing about rt in documentation :p
[17:02:14] <docbrown> cmr: So the runtime and stdlib doesn't work on Android?
[17:02:16] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[17:02:18] <olsonjeffery> something else that'd be nice for 0.8: rustdoc_ng :)
[17:02:31] <strcat> docbrown: the runtime and stdlib work on android
[17:02:35] <strcat> but you said
[17:02:37] <strcat> 13:00:42     docbrown | cmr: Not requiring people to copy shared libraries, at least. I realize JNI is required for the UI part.
[17:02:53] <cmr> miza: it's not in the rust-lang.org documentation
[17:03:06] *** Quits: Palmik (palmik@moz-11EA685D.pks.muni.cz) (Ping timeout)
[17:03:08] <sinma> Anybody can help me with import?
[17:03:11] <cmr> Since it's marked #[doc(hidden)] for some unfathomable reason.
[17:03:14] <cmr> miza: See http://seld.be/rustdoc/master/std/index.html
[17:03:16] <strcat> sinma: import?
[17:03:37] <sinma> see my previous post
[17:03:50] <klutzy> SiegeLord: mingw was wrong (different callconv) for a long time. I don't know any other incompability about it though
[17:03:56] *** Joins: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net)
[17:03:58] *** Joins: Palmik (palmik@moz-11EA685D.pks.muni.cz)
[17:04:04] <docbrown> strcat: Right, I was hoping it'd be possible to compile libstd statically into my app.
[17:04:20] <SiegeLord> klutzy, So you think it's 100% correct now? You'd think somebody would come up with a test suite...
[17:04:30] <strcat> docbrown: neither static linking or link time optimization between crates are in a working state
[17:05:30] <klutzy> SiegeLord: well, I learned the incompability just today, so don't know :)
[17:05:52] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[17:05:53] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/KBry2g
[17:05:53] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[17:05:54] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[17:05:54] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/AcC8Sw
[17:05:54] <ghrust> 13rust/06auto 14ade7df4 15Lindsey Kuper: Refactor libsyntax Visitor impls to use default methods.
[17:05:54] <ghrust> 13rust/06auto 145f2f952 15bors: auto merge of #9181 : lkuper/rust/libsyntax-default-methods-refactor, r=alexcrichton...
[17:05:54] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[17:06:03] *** Joins: six600110 (six600110@moz-2FA48202.neo.res.rr.com)
[17:06:14] <klutzy> SiegeLord: http://www.angelcode.com/dev/callconv/callconv.html this documents some incompatibility, but it seems old
[17:06:24] * flaper87 wonders why bors hasn't merged dbaupp PR
[17:06:53] <hoverbear> Hmmm, how's Rust in the area of building stuff like STUN/TURN servers for WebRTC or Websocket servers for web clients?
[17:06:54] <jmgrosen_> https://github.com/mozilla/rust/issues/9193 notes that network connectivity wasn't consistent on bors; is it now?
[17:07:08] *** Joins: bs3g (bs3g@moz-B3B8B011.red.bezeqint.net)
[17:07:11] * flaper87 has to figure out in which cases while moves values
[17:07:13] <engla> flaper87: get in line :) http://buildbot.rust-lang.org/bors/bors.html
[17:07:30] <engla> flaper87: the older approved PRs go first
[17:07:40] <cmr> hoverbear: no one has done it
[17:07:51] * flaper87 will give bors some red bulls
[17:07:55] <flaper87> engla: thanks for that link
[17:07:58] <flaper87> didn't have it
[17:07:59] <hoverbear> cmr: There is TCP and Sockets in the std lib right?
[17:08:09] <cmr> hoverbear: yes
[17:08:13] <cmr> flaper87: it's in the topic.
[17:08:23] <cmr> or, not
[17:08:26] <cmr> it used to be :\
[17:08:40] <flaper87> :)
[17:08:58] <engla> IRFY/mem is in the topic :( 
[17:11:22] <hoverbear> cmr: Ok, cool. I'll poke into the docs
[17:11:53] <hoverbear> cmr: https://github.com/mozilla/rust/tree/master/src/libstd/rt/io/net that's what I want yeah?
[17:11:58] *** Joins: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net)
[17:12:15] <SiegeLord> I wish github issues had a voting system...
[17:12:23] <hoverbear> SiegeLord: +1
[17:12:26] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[17:12:34] <strcat> votes aren't going to change the order bugs are dealt with
[17:13:06] <SiegeLord> They could for non-mozilla folks
[17:13:08] <hoverbear> SiegeLord: Well, I'd be more interested in an "I'm experiencing this too" button that doesn't require me to leave a comment with more identical error messages.
[17:13:33] <strcat> there's a process for nominating bugs for milestones
[17:13:57] <strcat> if you really, really want a bug fixed - fix it :)
[17:15:55] *** Quits: Palmik (palmik@moz-11EA685D.pks.muni.cz) (Ping timeout)
[17:16:10] <erickt> Does anyone remember if we used to support `as` in match arms? I vaguely remember being able to do `match i { 0 as char => ‚Ä¶ }` but it doesn't work now
[17:16:25] <strcat> erickt: we don't anymore due to ambiguity
[17:16:33] <strcat> for that example, '\x00'
[17:17:22] <erickt> darn it. Then I'm not sure if I'm going to be able to make a syntax extension that can convert an int to an enum
[17:18:09] *** Joins: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu)
[17:18:12] <strcat> erickt: wrap it in a function call, and use an 'if' clause?
[17:18:23] <erickt> my trouble is in generating a handler for this `enum { A = 5 + 5, B = 10 + 10 }`?
[17:18:50] <erickt> I only can observe the un-evaluated expressions
[17:18:55] <erickt> strcat: oh that could work
[17:19:12] <erickt> I wonder if it'd compile down to the right thing
[17:19:21] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[17:19:55] <strcat> this mergefunc thing is really aggravating
[17:20:11] <strcat> I have a 10 line input file triggering an assert
[17:20:13] <erickt> strcat: I'll try if expressions, thanks. Do you remember why using `as` was ambiguous? 
[17:20:14] <strcat> but it's 2k lines of IR
[17:20:18] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[17:20:21] *** Joins: Palmik (palmik@moz-11EA685D.pks.muni.cz)
[17:20:21] <strcat> erickt: don't remember why
[17:20:35] <erickt> I'll try to track down the PR that removed it
[17:20:46] <strcat> and I can't run any passes seriously altering the IR..
[17:22:16] <jmgrosen_> how do you turn on debug! printing again?
[17:23:00] *** Quits: Palmik (palmik@moz-11EA685D.pks.muni.cz) (Ping timeout)
[17:23:58] *** Quits: Seryogah (seryogah@moz-9147333A.dip0.t-ipconnect.de) (Connection reset by peer)
[17:24:52] *** Joins: ofeldt (ofeldt@moz-769A9897.dip0.t-ipconnect.de)
[17:24:58] <cmr> jmgrosen_: --cfg debug to rustc, --enable-debug to configure
[17:25:01] <cmr> hoverbear: yes
[17:25:27] <jmgrosen_> cmr, thanks; can you turn it on for just a particular crate? (rustpkg?)
[17:25:28] <sinma> I do ¬´use Component::*; mod Component;¬ª in Entity.rs and rustc says ¬´unresolved import¬ª, but I‚Äôve Component.rs in the same folder as Entity.rs
[17:25:42] <olsonjeffery> ~700 tests got moved out of stdtest?
[17:25:43] <flaper87> hey guys, I'd love your advice to make this code more Rustic https://github.com/FlaPer87/rust/commit/4e830152121240a08d82a9bbf488c10a37ed4fb6
[17:25:50] <flaper87> olsonjeffery: ^ recv_timeout
[17:25:52] <flaper87> :)
[17:25:55] <flaper87> before submitting the PR
[17:25:58] *** Quits: ofeldt- (ofeldt@moz-B378026B.dip0.t-ipconnect.de) (Ping timeout)
[17:27:00] <flaper87> actually, let me create a PR so people can comment
[17:27:22] <strcat> shouldn't the event loop be handling the timeout?
[17:28:01] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[17:28:31] <flaper87> btw, that patch will need to be rebased once dbaupp gets merged
[17:28:38] <flaper87> strcat: mmh, not sure :/
[17:28:43] <olsonjeffery> strcat: no.
[17:28:59] <flaper87> btw, why does this while move `self`? https://github.com/FlaPer87/rust/commit/4e830152121240a08d82a9bbf488c10a37ed4fb6#L0R56
[17:29:06] <olsonjeffery> we have all of the tools at hand to do it at a higher level.. i don't think there's a case, perf-wise, to go directly into the scheduler
[17:29:19] <olsonjeffery> its using a uv_timer_t under the hood
[17:29:25] <olsonjeffery> in terms of the libuv impl of EventLoop and IoFactory
[17:29:38] <cmr> flaper87: because you're taking self by value.
[17:29:48] <jmgrosen_> cmr: never mind, I derped -- you can just build librustpkg manually X3
[17:29:57] <strcat> olsonjeffery: but it's polling
[17:31:02] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[17:31:15] <olsonjeffery> strcat: but premature optimization
[17:31:17] <strcat> will a timer be able to cancel the recv? without polling
[17:31:27] <strcat> olsonjeffery: that's not premature optimization - waking up over and over is bad
[17:31:28] <flaper87> cmr: mmh, it'll try to move it anyway even if I get it by reference. AFAICT
[17:31:36] <strcat> it's not about performance, it's about battery life
[17:31:55] <strcat> you can just open powertop and see it generating 1 wakeup/s, which is bad
[17:32:36] <strcat> each conn is going to be 1 wakeup/s
[17:32:39] *** Quits: valenting (Thunderbir@moz-9C32009D.residential.rdsnet.ro) (Ping timeout)
[17:32:51] <strcat> and consider that a normal system has ~100 wakeups/s with a few things open like a browser
[17:32:59] * strcat shrugs
[17:33:26] <cmr> flaper87: oh, because try_recv consumes the port
[17:33:36] <olsonjeffery> strcat: fair enough.
[17:33:47] <cmr> Wait nevermind
[17:33:50] <cmr> That's entirely unrelated.
[17:33:52] <olsonjeffery> i originally suggested flaper87 do a naive impl that just sleeps for the timeout and does a peek before and after
[17:34:11] <erickt> strcat: woo, llvm is able to optimize `_ if x == Foo as int` down into a switch when optimizations are turned on
[17:34:11] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[17:34:11] <olsonjeffery> i then mentioned offhand that you could sleep for a fraction of the timeout. so this is basically a result of that.
[17:34:24] <strcat> erickt: ofc ;p
[17:34:30] <olsonjeffery> strcat: but going into the scheduler for that approach would have the same net effect (timers/wakeups)
[17:34:42] <strcat> erickt: you should have seen how happy I was when I finally got the loop passes to work on our iterators
[17:34:56] <olsonjeffery> the only optimization we could get out of doing it at a lower leve is reusing the timer handle, which i would want to see measured in terms of perf
[17:34:58] <strcat> vectorization, deletion of no-op loops, and so on
[17:35:02] <erickt> strcat: I saw! we can actually vectorize our loops now?
[17:35:05] <strcat> erickt: yep
[17:35:14] <cmr> olsonjeffery: Why would it? It'd set a timer to fire in X seconds, and if a message hasn't been received by the time the timer fires, run the timeout?
[17:35:17] <olsonjeffery> strcat: so if the repeated wakeups are such a concern, then id suggest flaper87 just do the naive impl (sleep for the whole of msecs)
[17:35:42] <strcat> olsonjeffery: there isn't a way to just make it timeout early?
[17:35:43] *** Quits: aeqwa (aeqwa@moz-5E5190D9.dsl.tropolys.de) (Quit: Lost terminal)
[17:35:52] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[17:35:52] <flaper87> sorry, just caught up with the discussion
[17:35:55] <flaper87> strcat: AFAIK, there isn't
[17:36:01] <olsonjeffery> strcat: not at the runtime level..
[17:36:09] <erickt> strcat: did we get any rustc compile speedups? Or does it not have much vectorizable loops?
[17:36:10] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[17:36:22] <strcat> erickt: rustc isn't really CPU bound in the traditional sense
[17:36:33] <strcat> it doesn't have tight numeric loops
[17:36:46] <erickt> strcat / dbaupp: we should add some numeric tests to http://huonw.github.io/isrustfastyet :)
[17:37:12] <strcat> erickt: our iterators match manually written loops in C/C++ now in every case though
[17:37:14] <strcat> so I'm happy about that
[17:37:17] <cmr> erickt: if you write them, I'll run them.
[17:37:20] <erickt> that's awesome
[17:37:23] <strcat> some of the adaptors are not great, but the iterators themselves are perfect
[17:37:30] <cmr> erickt: I can't run benchmarks that don't exist.
[17:37:34] <erickt> cmr: I think we have a couple in the benchmark suite
[17:37:48] <engla> strcat: it's the vec iterator that's perfect right?
[17:38:04] <flaper87> so, is there a way to make that while loop more rustic ? I don't like that code much.
[17:38:05] <strcat> engla: well, vec iterators, range and count
[17:38:08] <olsonjeffery> strcat: the point is that, at the runtime level, you can't yield on a recv and then re-enter after an arbitrary timeout if it didn't receive
[17:38:11] <cmr> flaper87: it looks fine to me.
[17:38:15] <flaper87> cmr: cool
[17:38:17] <flaper87> :D
[17:38:18] <olsonjeffery> it's not designed that way.. hence this workaround, which i think is adequate.
[17:38:36] <strcat> olsonjeffery: well, it's adequate until you end up in the kind of situation firefox is in
[17:38:40] <olsonjeffery> but we can always measure and justify a more optimal approach
[17:38:44] <strcat> where it reduces battery life by 50% with a tab or two open
[17:38:45] <erickt> cmr: I thought src/test/bench/shootout-nbody.rs is supposed to have a some tight numeric loops
[17:38:51] <engla> strcat: Your iterator work is really impressive. Those core iterators are very simple, and now you have them generating very good code too
[17:39:16] <flaper87> plus, sleeping for the whole timeout and then checking for a msg won't respect the function purpose.
[17:39:18] *** Quits: squiddy (squiddy@moz-CFC78E68.adsl.alicedsl.de) (Ping timeout)
[17:39:29] <erickt> cmr: what if we add a tab that pulls out the test/bench numbers and displays those in graph form?
[17:39:31] <cmr> erickt: ok, I'll start building and running the benchmarks in src/test/bench
[17:39:42] <erickt> awesome
[17:39:44] <cmr> (when I get around to getting it back up...)
[17:39:45] <olsonjeffery> strcat: then i would suggest registering a complain in flaper87's eventual PR and brson or someone who's more of a runtime ninja than me can respond.
[17:39:56] <strcat> I'll just file a bug
[17:39:57] <flaper87> I'll have to rebase that patch anyway and I'll add a comment referencing what strcat said
[17:40:05] <cmr> dbaupp wrote https://github.com/huonw/multibuilder which is pretty cool
[17:40:10] <cmr> on my todo list for tomorrow.
[17:40:16] <strcat> flaper87: you could file a bug in advance and add a FIXME, that's the usual way to do it
[17:40:26] <flaper87> strcat: kk, will do
[17:40:28] <flaper87> :)
[17:40:37] <flaper87> strcat: btw, thanks for pointing that out
[17:40:37] * strcat is totally fine with implementing it that way for now, just not in the long-term ;p
[17:40:48] * flaper87 agrees with strcat
[17:40:55] <benh> is msecs microsecs or millisecs?
[17:40:57] *** Joins: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net)
[17:40:58] <flaper87> I admit I didn't think about that, though
[17:41:04] <flaper87> benh: millisecs
[17:41:19] <strcat> one of firefox's issues is the js timers
[17:41:22] <strcat> it doesn't schedule them
[17:41:27] <strcat> they just all poll
[17:41:32] <enomado> An asserting value handle still pointed to this value!
[17:41:32] <enomado> UNREACHABLE executed at /home/sc/projects/rust/rust/src/llvm/lib/IR/Value.cpp:632!
[17:41:33] <enomado> [1]    12427 abort (core dumped)  rustc -Z debug-info src/libstd/std.rs
[17:41:51] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[17:41:55] <strcat> so a page can make 1000 timers.... and now you have 1000 timers running however they wish ;p
[17:41:56] <erickt> strcat: all we need now to make your iterator code perfect is to get generators up and running so complex iterators are easy to write :)
[17:42:20] <strcat> erickt: http://ix.io/83y little sample program
[17:43:28] <cmr> enomado: yes, libstd cannot be compiled with debug-info.
[17:43:59] *** Quits: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP) (Connection reset by peer)
[17:44:14] *** Joins: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP)
[17:44:47] *** Quits: tclark (ctimothy@moz-1DB1FE6E.hsd1.wa.comcast.net) (Input/output error)
[17:44:51] <miza> I am a litle bit confused with rt::io, about how could i use it.
[17:44:52] <miza> I want to read a byte from keyboard
[17:45:06] *** Quits: JesseH (JesseH@moz-2E766C3E.mc.at.cox.net) (Quit: github.com/jessehorne)
[17:45:17] <strcat> erickt: ugh I don't have a recent enough build around >.<
[17:45:28] * strcat makes one ;p
[17:45:57] <erickt> strcat: me neither. I just ran that over here and I was thinking it didn't look vectorized :)
[17:46:28] <cmr> miza: rt::io does not have stdio support yet.
[17:46:34] <strcat> erickt: because 2 recent things landed - bugfix for an offset regression + not using ptrtoint in ptr comparisons
[17:46:34] <olsonjeffery> strcat: so im really interested in your thoughts about how to make port recv() re-entrant before a timeout, because i honestly don't know how it'd be done.. here's the spot in libstd where the blocking code : https://github.com/mozilla/rust/blob/master/src/libstd/rt/comm.rs#L234
[17:46:38] *** Joins: Palmik (palmik@moz-11EA685D.pks.muni.cz)
[17:47:09] <olsonjeffery> so basically timeout select() is what would be needed
[17:47:38] <miza> cmr: but before you said to me to dont use std::io
[17:47:56] <benh> spawn a task, have it block on recv'ing and kill it after the timeout? :v
[17:47:57] <miza> how could i read from keyboard :p
[17:48:18] <Amaranth> Timer coalescing seems like it'd be helpful if you're worried about too many wakeups
[17:48:19] *** Quits: Palmik (palmik@moz-11EA685D.pks.muni.cz) (Ping timeout)
[17:48:23] <cmr> miza: you can use it, you don't bother trying to fix its numerous inadequacies.
[17:49:05] <acrichto> cmr: https://github.com/mozilla/rust/pull/9196 may unblock rustdoc_ng
[17:49:27] <cmr> acrichto: <3
[17:49:36] <flaper87> strcat: olsonjeffery https://github.com/mozilla/rust/issues/9195
[17:49:42] <acrichto> note the *may* though, I'm not sure :(
[17:50:22] <strcat> olsonjeffery: can you select on a timer?
[17:51:21] <olsonjeffery> strcat: well, it's not an "actual select" .. it's just impl'ing that trait.. so we're implementing select semantics..
[17:52:14] <olsonjeffery> but its pretty much blocking a task, pending data (if the data isn't there) .. and the sender would unblock/reschedule the task on the port's schedule when it delivers the data
[17:52:31] <olsonjeffery> so this pretty much gets into the impl details of Scheduler
[17:52:45] <olsonjeffery> flaper87: thanks
[17:52:52] <flaper87> olsonjeffery: :)
[17:53:23] <flaper87> olsonjeffery: you're idea is implementing it the other way araound, basically, instead of polling on the port we'd be polling on the timer (so to speak)
[17:53:46] <jmgrosen_> cmr: is there an environ var I also have to turn on? nothing debug is printing with only ./configure --enable-debug
[17:54:24] <cmr> jmgrosen_: RUST_LOG=rustpkg=4
[17:54:33] <jmgrosen_> cmr: ah, right
[17:54:42] <strcat> olsonjeffery: http://golang.org/src/pkg/net/dial_gen.go
[17:54:58] <strcat> olsonjeffery: Go makes a timer and then selects on the timer + connection
[17:55:04] <strcat> and that's how I'd do it with epoll myself
[17:55:11] <strcat> that's how rusti works
[17:55:17] <strcat> rusti: fn foo() { loop { } } foo()
[17:55:22] -rusti- timeout triggered!
[17:55:28] *** Quits: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP) (Quit: Leaving)
[17:55:30] *** Quits: KindOne (KindOne@moz-65F4A32D.dynamic.ip.windstream.net) (Ping timeout)
[17:55:35] <strcat> it doesn't poll to do that timeout, just adds the timerfd to the epoll loop
[17:55:40] *** Joins: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP)
[17:55:46] *** Quits: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP) (Quit: Kelet)
[17:55:49] *** Joins: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP)
[17:56:48] *** Quits: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP) (Quit: Leaving)
[17:57:41] *** Joins: Palmik (palmik@moz-11EA685D.pks.muni.cz)
[17:58:17] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Connection reset by peer)
[17:58:28] *** Joins: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP)
[17:58:36] <flaper87> strcat: you made rusti angry
[17:58:37] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[17:58:37] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:58:40] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:58:42] <flaper87> there's rusti
[17:58:43] <olsonjeffery> strcat: i want to say that the main issue, at the runtime level, is that we lack select semantics
[17:58:45] <flaper87> :D
[17:58:51] <olsonjeffery> so i see what you're saying.. and that is probably the optimal approach..
[17:59:23] <olsonjeffery> im gonna dig some more to see..
[17:59:27] *** Joins: KindOne (KindOne@moz-697F9CA4.dynamic.ip.windstream.net)
[17:59:41] <flaper87> olsonjeffery: pls, share your findings, I'm interested
[17:59:45] <strcat> olsonjeffery: I don't know much about the runtime/scheduler, just how to do it with epoll myself ;p
[17:59:52] <olsonjeffery> https://github.com/mozilla/rust/issues/6842
[17:59:56] <olsonjeffery> strcat: ^
[18:00:01] <olsonjeffery> that's the rub
[18:00:03] <ww> what's the syntax to restrict generic type with multiple subtypes?  e.g. func<T: ~str + ~[u8]>(arg: T)
[18:00:28] <engla> ww: a trait
[18:00:39] <strcat> ww: you can't do that, you need to use traits or an enum
[18:00:43] <flaper87> brb guys
[18:00:47] <ww> oh ok, bummer
[18:00:54] *** Quits: Blei (philipp@moz-A8EE15D9.cust.bluewin.ch) (Quit: WeeChat 0.4.1)
[18:01:29] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[18:01:32] *** Quits: Palmik (palmik@moz-11EA685D.pks.muni.cz) (Ping timeout)
[18:01:34] <ww> hoping to take in different types on one function name since function overload is not there
[18:01:46] <olsonjeffery> strcat: so, ok. yeah.. the current conceived approach is all around LAAAAAME. so we need select() now more than ever.
[18:01:49] <strcat> erickt: ok anyway, as I was saying before...
[18:02:05] <engla> ww: that's exactly when you use a trait bound, possibly defining and impl the trait yourself
[18:02:36] <engla> ww:  for example    func<T: Str>(s: Str)  will take any of the string types that impl Str.
[18:02:43] *** Joins: Palmik (palmik@moz-11EA685D.pks.muni.cz)
[18:02:46] *** Quits: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu) (Ping timeout)
[18:02:49] <ww> engla, looking for a way to do function overlook in general
[18:03:25] <ww> anyway thanks
[18:03:50] *** Joins: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net)
[18:03:51] <strcat> erickt: http://ix.io/83y simple example, http://ix.io/83B --opt-level=3 --target-cpu core-avx2 -Z no-vectorize-loops, http://ix.io/83C without disabling vectorize
[18:03:53] <strcat> ;]
[18:03:59] *** Joins: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu)
[18:04:21] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[18:04:29] <strcat> with SSE it will just do <4 * float>
[18:04:37] <erickt> strcat: awesome!
[18:04:42] <cmr> ww: doomlord_ had a pattern for faking overload.
[18:04:57] <cmr> ww: I don't remember what it was.
[18:05:12] <strcat> erickt: also... with AVX-512 it'll do <16 * float> ;p
[18:05:19] <ww> ok thx
[18:05:23] <erickt> strcat: neat!
[18:06:02] <olsonjeffery> strcat: so i guess maybe making std::rt::io::timer::Timer impl std::select:Select would be a start
[18:06:22] <olsonjeffery> and then using std::select::select() .. its not clear to me if this is all wired up correctly in newrt, though
[18:06:26] <olsonjeffery> so ill follow-up with brson
[18:06:29] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[18:06:30] <olsonjeffery> but it might just fix itself
[18:06:33] *** Joins: graue (sf@moz-99A9649E.dc.dc.cox.net)
[18:06:35] <strcat> erickt: anyway it's pretty clever, but we lack TBAA or a hack like `restrict` so it's not great yet
[18:06:47] <strcat> erickt: but I did make unique ptr parameters and return values get tagged as noalias
[18:06:49] <strcat> so instead of
[18:07:01] <strcat> foo(input: &[f64], output: &mut [f64])
[18:07:03] <strcat> you could write
[18:07:07] <olsonjeffery> flaper87: so if everything's there.. ill let you know how to proceed.. it might involve basically doing what strcat suggested with the go paste
[18:07:19] <strcat> foo(input: ~[f64]) -> ~[f64]
[18:07:26] <strcat> and it'll tag the parameter + ret value as noalias
[18:07:43] *** Quits: bs3g (bs3g@moz-B3B8B011.red.bezeqint.net) (Quit: Leaving)
[18:07:45] <strcat> (although if you don't have more than 1 parameter.... it probably won't matter much anyway)
[18:07:53] <erickt> strcat: does it do return value optimization?
[18:08:27] <strcat> erickt: it just returns a ptr
[18:08:34] <strcat> all our language level copies are shallow
[18:08:41] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Quit: leaving)
[18:09:02] <strcat> fn foo(x: ~int) -> ~int { x }
[18:09:14] <strcat> ; Function Attrs: uwtable
[18:09:16] <strcat> define noalias i64* @_ZN3foo17h9d4fdbb065c6bf334v0.0E({ i64, %tydesc*, i8*, i8*, i8 }* nocapture readnone, i64* noalias readnone) #0 {
[18:09:18] <strcat> "_ZN8_$UP$u329glue_drop19hc3c87cd45e274785a1E.exit":
[18:09:21] <strcat>   ret i64* %1
[18:09:23] <strcat> }
[18:09:46] <strcat> if we didn't have those evil env ptr parameters I'd be happier ;p
[18:10:00] <kimundi> engla, strcat: Hm, my reasoning behind making SendStr implement those traits is so that it is actually useful. Making it behave like a string is part of the usecases I see for it. It only implements traits that already have duplicate implementations for &str, ~str and @str.
[18:10:02] <olsonjeffery> flaper87: would you want to dig into the underlying libuv runtime? making Timer impl Select would actually mean doing the runtime/scheduler-level stuff in UvTimer in std::rt::uv::uvio
[18:10:07] <olsonjeffery> if not, i'll get to it.
[18:10:14] <erickt> strcat: I agree, those env pointers make the arguments so hard to read
[18:10:24] <strcat> erickt: and they waste a register
[18:10:31] <acrichto> strcat: why do all functions have env pointers? why do we not have it for just closures?
[18:10:40] <cmr> acrichto: to cheaply cast a function to a closure
[18:10:45] *** Quits: graue (sf@moz-99A9649E.dc.dc.cox.net) (Ping timeout)
[18:10:52] <acrichto> I suppose yeah
[18:10:58] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[18:10:58] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/AcC8Sw
[18:10:58] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[18:11:02] <strcat> acrichto: instead of making a shim when you use a function as a closure, it does this to all fns
[18:11:05] <strcat> I think it's the wrong tradeoff
[18:11:13] <cmr> I also think that
[18:11:18] <strcat> wasting a register for all function calls vs. making a shim it will inline small functions into anyway
[18:11:31] <erickt> strcat: I think it made more sense when we were using closures all over the place. Now that we got iterators I don't think it's as useful
[18:11:34] <cmr> It'd be nice to see the impact and #shims actually generated and used.
[18:11:50] <strcat> acrichto: also
[18:11:51] <acrichto> strcat: this'd be cool to actually see the perf impact of
[18:11:52] <strcat> the most awful thing ever
[18:11:57] <strcat> we pass 'self' in the env ptr parameter
[18:12:01] <tiffany> howcome DynamicLibrary takes a PosixPath? is it only implemented for posix?
[18:12:03] <strcat> by-value self is always passed indirectly by-ref
[18:12:07] <strcat> and we get invalid casts from that
[18:12:10] <strcat> yay
[18:12:14] <acrichto> oh that's bad
[18:12:17] *** Joins: aeqwa (aeqwa@moz-5E5190D9.dsl.tropolys.de)
[18:12:20] <acrichto> the invalid casts
[18:12:23] <erickt> I tried and failed to get self out of the environment :(
[18:12:25] <cmr> tiffany: it doesn't
[18:12:47] <strcat> erickt: well, easy solution is to just not have an env ptr parameter for methods
[18:12:49] <tiffany> uh.. fn open(filename: Option<&PosixPath>) -> Result<DynamicLibrary, ~str>
[18:12:58] <ww> what is the syntax to ignore a match variable and avoid the unused variable warning?  e.g.  match foo {  Ok(k) => k,  Err(e) => () }  would get a unused variable 'e' warning
[18:12:59] <strcat> erickt: and function/method reform would remove the env ptr elsewhere too...
[18:13:04] <strcat> erickt: I'll talk to pcwalton about it
[18:13:10] <tiffany> ww: _
[18:13:11] <acrichto> ww: either name the variable "_" or prefix it with a '_'
[18:13:17] <cmr> tiffany: I see pub fn open(filename: Option<&path::Path>) -> Result<DynamicLibrary, ~str> {
[18:13:18] <ww> ok thx
[18:13:26] <cmr> tiffany: in the source
[18:13:38] <cmr> tiffany: what are you looking at?
[18:13:39] <erickt> strcat: k
[18:13:43] <tiffany> http://seld.be/rustdoc/master/std/unstable/dynamic_lib/struct.DynamicLibrary.html
[18:13:47] <strcat> erickt: we're bad at return structs by-value because we don't tag the out ptr param we make as sret though
[18:13:52] <strcat> at returning*
[18:14:02] <cmr> Ah, yes, because Path is conditionally defined to the platform-specific one and the docs are generated on linux
[18:14:03] <erickt> I saw you were working on it
[18:14:07] <engla> kimundi: I meant that my opinion is that it shouldn't be a fifth string type, but just an enum
[18:14:08] <cmr> Nothing to do about that, really.
[18:14:11] <strcat> erickt: yeah I fixed it but it causes an x86 (32-bit only) segfault ;[
[18:14:16] <tiffany> ah
[18:14:16] <strcat> can't figure out why
[18:14:22] <strcat> likely related to some existing bug.
[18:14:35] <strcat> as in, we do something invalid somewhere and for whatever reason it works atm
[18:14:41] * strcat sighs
[18:14:47] <cmr> tiffany: the fix would be doing Path differently, probably as a newtype.
[18:15:38] <erickt> strcat: trans is a dark and scary place, full of dragons
[18:15:56] <kimundi> engla: Maybe it's wrong to declare it a string type. It certainly should not be used widely. But if doesn't get used for the few uses there are because the interface is to cumbersome, then that's bad too, imo.
[18:15:56] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[18:15:56] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/cfOIUA
[18:15:56] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[18:15:57] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[18:15:57] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/-n6mlg
[18:15:57] <ghrust> 13rust/06auto 14ec8f884 15Brendan Zabarauskas: Add Orderable bound to num::Primitive
[18:15:57] <ghrust> 13rust/06auto 14bca015d 15bors: auto merge of #9182 : bjz/rust/master, r=brson...
[18:15:57] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[18:16:18] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Connection reset by peer)
[18:16:19] <strcat> erickt: and for the some reason it now vectorizes the loops... it can unroll, rotate, delete, unswitch
[18:16:30] <strcat> erickt: it knows vector iterator loops are never infinite
[18:16:33] <strcat> that was the important part.
[18:16:34] <engla> kimundi: but the usecase is not that it's convenient, but to save allocations
[18:16:45] <strcat> erickt: all because we compared pointers by casting to an integer first :s
[18:16:52] <strcat> (and other things I fixed... but that was the last)
[18:17:20] <kimundi> engla: Right, but if you can't use it as keys in a HashMap you can't save allocations there :)
[18:17:21] <strcat> LLVM has very poor analysis of inttoptr/ptrtoint, but they are inherently hard to tackle
[18:17:33] <strcat> if you do int <-> ptr conversions.... it basically gives up
[18:17:52] <Luqman> strcat: where was the sret thing failing on x86?
[18:17:54] <erickt> strcat: are you taking a break on getting sret to work?
[18:18:00] <strcat> erickt: yeah I gave up for now ;p
[18:18:06] <strcat> Luqman: in the annihilator
[18:18:14] <strcat> Luqman: I know the specific place it fails
[18:18:20] <strcat> but that's likely not exactly where things go wrong
[18:18:29] <strcat> just where you see the consequences of things going wrong.
[18:18:40] <Luqman> does it fail on cross builds as well?
[18:18:49] <strcat> Luqman: haven't tried, that's a good point
[18:19:00] <strcat> Luqman: if you're curious, it dies in libstd/rt/local_heap.rs
[18:19:04] <strcat>     let region = do Local::borrow |task: &mut Task| {
[18:19:06] <strcat>         task.heap.boxed_region
[18:19:08] <strcat>     };
[18:19:11] <strcat> when that closure returns.
[18:19:13] <kimundi> engla: Or, I guess Treemap rather. Doesn'T actually implement IterBytes yet, I noticed.
[18:19:15] <strcat> like, it dies on the ret instruction
[18:19:55] <strcat> Luqman: https://github.com/mozilla/rust/pull/9109 *shrug*
[18:20:01] <tiffany> is there a way to test if a file exists?
[18:20:03] <strcat> I already split one part out and landed it separately
[18:20:09] <strcat> a fix for extern "C" fn pointers
[18:20:18] *** Quits: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu) (Ping timeout)
[18:20:19] <erickt> brb
[18:20:22] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[18:21:51] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[18:22:21] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[18:22:51] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[18:23:42] <cmr> tiffany: I think that's what olsonjeffery is working on with FileInfo and DirectoryInfo
[18:23:46] <cmr> olsonjeffery: is that correct?
[18:28:24] <olsonjeffery> yes
[18:28:31] <olsonjeffery> hoping for a PR tonight
[18:28:50] <olsonjeffery> i pretty much have to map readdir and wire up stuff in DirectoryInfo, do some tests, and ill be done
[18:29:46] <olsonjeffery> the low-level work is done.. latest is on olsonjeffery/rust newrt_file_io_1 branch
[18:29:56] <olsonjeffery> i wouldn't code against it, of course :)
[18:31:33] *** Quits: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[18:31:59] <kimundi> Do we have an Treemap in std that should be used?
[18:33:15] *** Quits: maik (maik@moz-58B2DA03.dip0.t-ipconnect.de) (Ping timeout)
[18:34:17] <strcat> kimundi: no it's in extra
[18:34:33] *** Joins: JesseH (JesseH@moz-2E766C3E.mc.at.cox.net)
[18:34:59] <kimundi> can't use it in a test in std then, right?
[18:37:48] <strcat> kimundi: you can
[18:37:53] <strcat> the test runner is defined in libextra
[18:37:55] <strcat> :s
[18:38:06] <strcat> it shouldn't be...
[18:38:19] <strcat> kimundi: anyway why do you need it?
[18:38:21] <strcat> what's the key type?
[18:38:38] *** Joins: maik (maik@moz-58B2DA03.dip0.t-ipconnect.de)
[18:39:11] <kimundi> strcat: Just want to test if using my SendStr as a key in a HashMap and TreeMap actually works before continuing claiming it a possible use case ;)
[18:40:01] <kimundi> Guess the treemap one needs to be a standalone test rather than an inline one in libstd...
[18:40:36] <kimundi> Or, is extra actually linked to if libstd gets compiled as an test executable?
[18:40:58] <strcat> yes but you shouldn't depend on it
[18:41:04] <kimundi> thought so
[18:41:35] <engla> libstd tests use extra explicitly when using BenchHarness
[18:42:17] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[18:44:48] *** Joins: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se)
[18:47:25] *** Quits: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se) (Client exited)
[18:47:45] <cmr> I don't disagree that the test runner shouldn't be in extra, but it definitely shouldn't be in std
[18:48:22] <cmr> although
[18:48:25] <kimundi> why not?
[18:48:37] <cmr> yeah my logic in making that statement doesn't make sense
[18:48:47] <hoverbear> So what does something like gl::worker mean? Is that a trait?
[18:49:00] <cmr> because I don't think iterators and hashmap should be moved out of std, even though they're not "builtin type support and runtime"
[18:49:04] <cmr> hoverbear: it's a path
[18:49:16] <kimundi> hoverbear: Not possible to answer
[18:49:25] <kimundi> Syntactically, it's a path
[18:49:26] <hoverbear> cmr: Ok. Hrm.
[18:49:32] <cmr> It could be any item.
[18:49:50] <kimundi> But without context we don't even know if it's a global or a local one ;)
[18:50:06] <hoverbear> Yeah, ok. Is it similar to what gl.worker would mean? Or something different?
[18:50:18] *** Joins: Daishiman (osinski@moz-70D5141.telecom.net.ar)
[18:50:20] <SiegeLord> Aren't iterators going to be used for the for loop?
[18:50:24] <kimundi> hoverbear: Again, depends HIGLY on context and language :P
[18:50:34] <kimundi> SiegeLord: They are?
[18:50:56] <hoverbear> kimundi: Rust. ^.^ Sorry. I'm looking at https://github.com/jeaye/q3/blob/master/src/main.rs
[18:50:57] *** Quits: ziad (ziad@moz-5003F925.members.linode.com) (Ping timeout)
[18:51:06] <SiegeLord> I'd expect it to check for Iterator to be implemented
[18:51:15] <SiegeLord> And not like it does it right now
[18:51:24] <strcat> SiegeLord: open issue
[18:51:30] <strcat> it's not implemented in librustc right now at all
[18:51:34] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[18:51:37] <strcat> it's a hack in the parser
[18:51:38] *** Quits: maik (maik@moz-58B2DA03.dip0.t-ipconnect.de) (Ping timeout)
[18:51:59] <engla> the for loop is literally syntactic sugar
[18:52:00] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[18:52:41] <strcat> there are more problems with it than just that, due to the way it's implemented
[18:52:47] <cmr> hoverbear: so at https://github.com/jeaye/q3/blob/master/src/main.rs#L88 it's a path, calling the `initialize` function associated with the Worker trait in the gl module.
[18:52:51] <kimundi> hoverbear: Based on naming convention and usage in that file, I'd say that 'Worker' is an type defined in the module 'gl'
[18:53:00] <cmr> Worker struct, sorry.
[18:53:10] <cmr> https://github.com/jeaye/q3/blob/master/src/gl/worker.rs#L39
[18:53:21] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[18:53:43] <hoverbear> cmr: Ok I see. Interesting‚Ä¶ I thought you'd access something like that with dot notation. I need to look up traits and modules for Rust.
[18:53:58] <sinma> kimundi: hello! I do ¬´use Component::*; mod Component;¬ª in Entity.rs and rustc says ¬´unresolved import¬ª, but I‚Äôve Component.rs in the same folder as Entity.rs
[18:54:00] <cmr> hoverbear: no, we only use dots for struct member access.
[18:54:20] <cmr> sinma: because imports are relative to the crate root.
[18:54:23] <hoverbear> cmr: Ahhhhhhhh. So the :: means it's  a function of that struct?
[18:54:36] <sinma> cmr: uh?
[18:54:45] <cmr> sinma: you need `mod Component;` in the crate root, or `use self::Component::*`
[18:54:56] <cmr> sinma: Did you read kimundi's module tutorial?
[18:55:07] <cmr> hoverbear: "static method" in other languages, "associated function" in rust.
[18:55:09] <cmr> hoverbear: yes
[18:55:31] <kimundi> hoverbear: dot get's used for field access and method calls to be exact
[18:55:39] <cmr> ah yes method call too
[18:56:13] <hoverbear> Static Methods would be not dependant on the instance of the struct‚Ä¶ And the dot would mean it's dependant on the instance?
[18:56:34] <olsonjeffery> rusti: trait A<'self> { fn foo(&'self self); } trait B : A<'self> { }
[18:56:34] -rusti- error: internal compiler error: unexpected failure
[18:56:34] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[18:56:35] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[18:56:35] -rusti- application terminated with error code 101
[18:56:38] <olsonjeffery> what am i doing wrong, here?
[18:56:47] <sinma> cmr: partially, but I didn‚Äôt understand that it depends of the crate root
[18:56:48] <cmr> olsonjeffery: using &'self self.
[18:56:52] <olsonjeffery> also, i could swore i created a ticket for this ICE before..
[18:56:59] <cmr> olsonjeffery: you need fn foo<'a>(&'a self)
[18:57:02] <olsonjeffery> ok
[18:57:26] <olsonjeffery> ok
[18:57:36] <kimundi> strcat: Where is HashMap's .insert() actually defined?
[18:57:56] <strcat> it's a default method on Map
[18:58:02] <kimundi> aah.
[18:58:07] <kimundi> So I need Map in scope
[18:58:34] <kimundi> hoverbear: Correct, though it's even easier to see in rust
[18:59:13] <hoverbear> kimundi: Right. I like it. I always hated the "Hey, wait‚Ä¶. No that's what I call on Member, not member" in Javascript.
[18:59:38] <kimundi> hoverbear: For a function to modify the state of your struct, it would have to acces it somehow, right? In other languages, you'd have an implicit 'self' or 'this'
[19:00:37] <kimundi> hoverbear: In rust it's explcit: If the first argument of an function in a type or trait is 'self' or '&self' it becomes an method, and passes the self value automatically on method call with '.'
[19:01:00] <cmr> (or ~self or @self or @mut self or &mut self)
[19:01:03] <kimundi> t.foo() == T::foo(t)
[19:01:12] <kimundi> At least, in theory
[19:01:29] <hoverbear> That's why I needed to do  https://gist.github.com/Hoverbear/5c3827b9a2a69b93b6ee#file-gistfile1-txt-L23 :: here?
[19:02:01] <hoverbear> But not on .next() on L25?
[19:02:13] <cmr> hoverbear: Yes; new is an "associated function": it's namespaced by the struct, but is otherwise a normal function.
[19:02:44] <hoverbear> Awesome, thanks cmr, kimundi I think I get it!
[19:02:53] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:02:58] <kimundi> :)
[19:04:08] <olsonjeffery> cmr: what is the argument against calling them "static methods/functions" beyond the overloaded sense of the word "static" ?
[19:05:26] <cmr> olsonjeffery: My argument is that since they don't take a `self`, they aren't a mehtod.
[19:05:34] <cmr> static function would probably be fine
[19:05:49] <cmr> But once we have associated items, it'd have to be renamed to associated function anyway.
[19:06:46] *** Parts: AlisonW (AlisonW@moz-7CEB14F7.hari.cable.virginmedia.com) ()
[19:06:49] <cmr> Hm, here's an idea
[19:06:55] <cmr> mod foo<T> { ... uses T ... }
[19:07:15] <cmr> It'd skip all the std::int being generated by macros nonsense
[19:07:35] <cmr> Actually nevermind
[19:07:40] <cmr> That idea was only half-baked
[19:07:44] <kimundi> aww
[19:07:53] * kimundi was half ready to start poking holes
[19:08:15] <cmr> :p
[19:12:44] *** Quits: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net) (Connection reset by peer)
[19:14:02] *** Joins: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net)
[19:20:07] <engla> does std::int need to be a visible module with all the generic wrappers in std::num?
[19:22:48] <cmr> engla: good questin
[19:25:52] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[19:25:53] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/-n6mlg
[19:25:53] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[19:28:52] <flaper87> bors, move it! My patch needs to be rebased :)
[19:30:12] <olsonjeffery> cmr: any links/blog posts/issues on associated items?
[19:30:35] <olsonjeffery> i see one blog post from pnkfelix, but its from a while back, curious if there's anything newest
[19:30:38] <olsonjeffery> newer
[19:30:56] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[19:30:56] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1C1cNw
[19:30:56] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[19:30:57] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[19:30:57] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/t4XWAg
[19:30:57] <ghrust> 13rust/06auto 146c4c5f5 15Alex Crichton: Pass a more proper span to the syntax expanders...
[19:30:57] <ghrust> 13rust/06auto 14524c190 15bors: auto merge of #9183 : alexcrichton/rust/issue-5794, r=catamorphism...
[19:30:57] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[19:32:24] *** Quits: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net) (Ping timeout)
[19:32:42] *** Quits: misterx (Mibbit@6FEB56C8.71FEFA5.520CDC98.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:35:10] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[19:35:19] <cmr> olsonjeffery: nmatsakis has a new one I think, sec
[19:37:04] <kimundi> Hm, I have a problem
[19:37:23] <cmr> olsonjeffery: http://smallcultfollowing.com/babysteps/blog/2013/04/02/associated-items/ and http://smallcultfollowing.com/babysteps/blog/2013/04/03/associated-items-continued/
[19:38:18] <flaper87> olsonjeffery: thanks for digging into the select thing
[19:38:58] *** Quits: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net) (Quit: hoverbear)
[19:41:09] <kimundi> strcat: Do you know what went wrong if an Equiv impl doesn't get recognized in the test executable, but does work if it's regularly compiled?
[19:41:17] <strcat> no
[19:42:43] *** Quits: enomado (nomad@DB5C5EEB.5ED34291.AB610CFE.IP) (Input/output error)
[19:42:55] <kimundi> i implemented std::str::Str and std::cmp::Equiv for my SendStr type. If I try to compile the stage1 std test I get
[19:42:59] <kimundi> send_str.rs:257:19: 257:44 error: failed to find an implementation of trait std::str::Str for send_str::SendStr
[19:42:59] <kimundi> send_str.rs:257         assert_eq!(map.find_equiv(&("boo")), Some(&a));
[19:43:46] <kimundi> One of those paths does not contain the std:: prefix, so maybe it's a mismatch between regular libstd and test libstd?
[19:44:19] *** Joins: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net)
[19:44:31] <engla> you probably need to 'use' the Str trait in the test module
[19:44:42] <kimundi> it is used
[19:45:34] <kimundi> if I uncomment the #[test] and #[cfg(test)] on test function and test module, it all resolves and typechecks in the regular compile
[19:46:40] <engla> kimundi: looks like the impls for Equiv are inside  #[cfg(not(test))] in str.rs. Can that be related?
[19:46:58] <olsonjeffery> flaper87: np. i want to wait and hear what brson says.. the state of the issue can, at times, not reflect the current state of the codebase.. so if we can correctly use select in newrt, then its just a matter of making Timer/UvTimer impl Select
[19:47:05] <olsonjeffery> state of the issue tracker*
[19:48:28] <kimundi> engla: Might be, though I haven't understood the reasoning, and try and error is annoying if you need to compile rustc each time :P
[19:48:48] <olsonjeffery> might be more to it than that, though, be we don't set/start timers when they're created..
[19:48:54] *** Joins: maik (maik@moz-58B2DA03.dip0.t-ipconnect.de)
[19:48:55] <flaper87> olsonjeffery: agreed, I'd let current patch land, though. 
[19:48:59] <olsonjeffery> which needs to happen in order to select on it.
[19:49:04] <flaper87> and then figure a better way to fix that
[19:50:54] <olsonjeffery> maybe sleep() becomes a module top-level free fn
[19:51:10] <olsonjeffery> and a Timer takes the timeout in the ctor
[19:51:45] <olsonjeffery> mumble mumble coherent design
[19:51:54] <flaper87> olsonjeffery: The patch I'm waiting for makes sleep a top-level fn
[19:52:14] <flaper87> but that's just a wrapper around the call to the ctor and sleep method
[19:52:36] <flaper87> however, it's a step forward towards that design
[19:53:38] *** Joins: Larry (larryfox@26EE99DC.88C61CC9.ECED8BE3.IP)
[19:54:13] <olsonjeffery> would be cool for the timer to become more port-like
[19:54:18] <kimundi> engla: I have an theory: Unlike all other types in libstd, build in types like &str don't get redefined in an libstd test executable. hence they are the only ones where only actual linked-too libstd version is in scope, which makes them incompatible if all types/traits/impl get redefined in the test executable.
[19:55:07] <erickt> woo got my FromInt extension working for enums
[19:55:30] <kimundi> erickt: cool :)
[19:57:04] <erickt> Now to add a ToInt/FromUint/ToUint support. Would anyone be opposed to me making .to_int() return an Option<int>? It'd be nice to protect against out of bounds conversions
[19:57:06] <engla> kimundi: must be something like that
[20:00:16] *** Quits: Larry (larryfox@26EE99DC.88C61CC9.ECED8BE3.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[20:01:53] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[20:08:53] <jmgrosen_> are there plans to "sometime" make an "official" rust package repo, a la pypi?
[20:09:35] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[20:10:04] *** Quits: ww (Mibbit@moz-DFAED48A.lightspeed.sntcca.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:10:14] <cmr> jmgrosen_: no, however, an "official" url redirector is planned to be added.
[20:10:25] <cmr> So you could do like pkg.rust-lang.org/some-package
[20:11:12] <cmr> Which would just redirect to wherever it's actually hosted
[20:11:43] <jmgrosen_> cmr: ah, that's an interesting solution, but I have the same complaint some have had about go: what if the place that it's hosted goes down permanently at some time?
[20:13:19] <cmr> jmgrosen_: Then you'd be hope someone has a copy of the source to mirror elsewhere :)
[20:13:38] <kimundi> Does rustpkg implement git fetching with an git clone?
[20:14:00] <kimundi> That is, does rustpkg make a local clone of the repo?
[20:14:06] <cmr> kimundi: yes
[20:14:16] <kimundi> If yes, then that can always be used as an backup for such situations
[20:14:46] <kimundi> If user count > 0, then an mirror can be created in case of unplanned existence failure :)
[20:15:26] <cmr> jmgrosen_: I don't think that argument really applies though.
[20:15:28] <cmr> The pypi went down.
[20:15:41] <cmr> It didn't go down permanently, sure, but it did go down.
[20:16:13] <jmgrosen_> cmr: that's true, I suppose; oh, and one thing: will rustpkg ever support fetching pre-built libraries?
[20:16:15] <SiegeLord> You can always have a local package that rustpkg will find using the same package name
[20:16:44] <cmr> jmgrosen_: that, I do not know. I would assume it will grow that functionality.
[20:17:19] <SiegeLord> Just put the binary into the git repository :P
[20:17:38] <kimundi> jmgrosen_: Ability to integrate with native package managers is planned, this would probably imply accepting binaries
[20:18:18] <jmgrosen_> cmr: and in addition, it would be nice if there were a tool that pulled type signatures out of binary libraries so you could look at the types like you can with a header file in C + linking
[20:18:35] <kimundi> I mean, nothing in the rustc/ rustpkg build process needs source code of the libraries
[20:18:39] <cmr> jmgrosen_: yes, extracting crate metadata
[20:18:42] <cmr> jmgrosen_: objcopy can do it.
[20:18:57] <jmgrosen_> no objcopy on OS X :(
[20:19:00] <cmr> really?
[20:19:01] <kimundi> Also, rustdoc
[20:19:10] <kimundi> Or rustdoc_ng rather
[20:19:12] <SiegeLord> What about rustc --ls?
[20:19:27] <kimundi> SiegeLord: Isn't that broken?
[20:19:38] <SiegeLord> Is it broken by design?
[20:19:50] <SiegeLord> If not, then perhaps it could get fixed :P
[20:20:11] <cmr> SiegeLord: that's different, that's for pretty-printing metadata
[20:20:37] <SiegeLord> --ls                List the symbols defined by a library crate
[20:20:38] <cmr> It's all in the .note.rustc section of the object file though
[20:21:04] <cmr> SiegeLord: heh, that's never what it has done for as long as I've been around.
[20:24:17] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[20:26:49] *** Joins: tclark (ctimothy@moz-1DB1FE6E.hsd1.wa.comcast.net)
[20:27:53] *** Quits: victorporof (victorporo@6C2683EC.42B20A5F.6A4F8DA2.IP) (Quit: victorporof)
[20:28:30] *** Quits: doomlord (doomlod@moz-DEFFB365.range81-147.btcentralplus.com) (Ping timeout)
[20:28:52] *** Joins: doomlord (doomlod@moz-DEFFB365.range81-147.btcentralplus.com)
[20:34:55] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[20:35:06] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[20:38:41] <strcat> cmr: I'll probably add any useful rustpkg packages to my repo btw ;p
[20:39:10] <strcat> and if they have stable releases + enough usage they can go in the official repo
[20:41:05] *** Quits: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[20:41:27] *** Quits: AutomatedTester (David@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[20:41:47] <cmr> strcat: cool
[20:42:08] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Quit: Leaving)
[20:42:09] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[20:42:39] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Ping timeout)
[20:42:49] *** Quits: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com) (No route to host)
[20:43:08] <cmr> strcat: nightly builds, right?
[20:43:18] <strcat> cmr: yeah, + stable releases if they have them
[20:43:35] <strcat> but it can just check for a new stable release nightly
[20:43:38] <strcat> so I don't have to do anything
[20:44:11] *** Joins: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com)
[20:44:11] *** ChanServ sets mode: +ao nmatsakis nmatsakis
[20:44:22] *** Joins: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com)
[20:44:53] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[20:44:54] *** AutomatedTester|AFK is now known as AutomatedTester
[20:44:56] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[20:45:02] <strcat> rusti: trait Foo {} trait Bar: Foo {} impl Foo for int {} impl Bar for int {}
[20:45:03] -rusti- ()
[20:45:11] <strcat> rusti: trait Foo {} trait Bar: Foo {} impl Foo for int {} impl Bar for int {} fn foo<T: Foo + Bar>() {}
[20:45:11] -rusti- ()
[20:45:13] <strcat> that should be a lint
[20:45:16] * strcat reports
[20:45:41] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[20:46:05] *** Quits: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net) (Quit: hoverbear)
[20:48:10] <kimundi> what'S wrong there?
[20:48:20] <strcat> Foo trait bound is redundant
[20:48:30] <strcat> does a docstring on an impl show up in rustdoc?
[20:48:53] <cmr> strcat: like, /** foo */ impl Foo { ... } ?
[20:48:59] <strcat> yeah
[20:49:11] <strcat> I want to explain why DoubleEndedIterator requires an Integer bound 
[20:49:14] <strcat> instead of Add + Sub
[20:49:20] <cmr> rustdoc_ng extracts them but I don't think the frontend renders them yet
[20:51:20] *** Joins: ziad (ziad@moz-5003F925.members.linode.com)
[20:52:22] <flaper87> is buildbot down?
[20:52:53] <strcat> seems so
[20:52:58] <strcat> at least the web interfaces
[20:53:44] <flaper87> r? https://github.com/mozilla/rust/pull/9198
[20:54:31] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:55:01] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:55:01] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Connection reset by peer)
[20:56:26] *** Quits: feduser (feduser@B184DF8C.1F811DF7.CDBED010.IP) (Ping timeout)
[20:59:15] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[21:00:14] *** Joins: bs3g (bs3g@moz-B3B8B011.red.bezeqint.net)
[21:00:57] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[21:00:57] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/t4XWAg
[21:00:57] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[21:00:57] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[21:01:00] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[21:02:33] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[21:03:10] *** Quits: sebcrozet (sebcrozet@moz-F96421F3.w80-13.abo.wanadoo.fr) (Ping timeout)
[21:05:23] *** Joins: sebcrozet (sebcrozet@moz-2517AE39.w80-13.abo.wanadoo.fr)
[21:05:55] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[21:05:55] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/OsipWA
[21:05:55] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[21:07:06] *** Joins: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net)
[21:09:03] <strcat> rusti: range(0, 10)
[21:09:03] -rusti- std::iter::Range<int>{state: 0, stop: 10, one: 1}
[21:09:25] <cmr> whoa we have typarams printed now?
[21:10:00] <strcat> cmr: well I made it print types
[21:10:04] <strcat> of structs
[21:10:16] <strcat> instead of {state: 0, stop: 10, one: 1} alone
[21:10:23] <flaper87> strcat: +1
[21:10:42] <cmr> Ah
[21:11:45] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Quit: Lost terminal)
[21:12:33] <flaper87> cmr: could you review this? https://github.com/mozilla/rust/pull/9198
[21:12:47] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[21:13:51] *** Quits: Palmik (palmik@moz-11EA685D.pks.muni.cz) (Quit: Lost terminal)
[21:14:46] <flaper87> cmr: danke
[21:17:12] <strcat> rusti: 5u.abs()
[21:17:14] -rusti- <anon>:5:9: 6:5 error: type `uint` does not implement any method in scope named `abs`
[21:17:14] -rusti- <anon>:5          5u.abs()
[21:17:14] -rusti- <anon>:6     };
[21:17:14] -rusti- error: aborting due to previous error
[21:17:15] -rusti- application terminated with error code 101
[21:17:19] <strcat> rusti: 5u.neg()
[21:17:21] -rusti- 18446744073709551611u
[21:17:28] <strcat> that's pretty weird
[21:17:35] * strcat shrugs
[21:20:23] <kimundi> strcat: does treemap have no find_equiv ?
[21:20:32] <strcat> treemap doesn't use Eq, so no
[21:20:58] <kimundi> hmm, okay
[21:21:16] <strcat> it's an endless rabbit hole
[21:21:29] <strcat> OrdEquiv, TotalOrdEquiv, TotalEqEquiv
[21:22:16] <strcat> rusti: range(250, 0)
[21:22:16] -rusti- std::iter::Range<int>{state: 250, stop: 0, one: 1}
[21:22:23] <strcat> rusti: range(250u8, 0).to_owned_vec()
[21:22:24] -rusti- ~[]
[21:23:48] <kimundi> strcat: Those trait would need to exist, or those traits do exists?
[21:23:56] <strcat> they don't exist
[21:24:03] *** Joins: jaen (jaen@moz-5800CC3C.play-internet.pl)
[21:24:05] <kimundi> okay, just wanted to be sure
[21:24:17] <strcat> going to wait until the coherency problems are worked out
[21:24:20] <strcat> rather than making a mess
[21:24:42] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[21:27:15] <tiffany> rusti: range(0,10).collect()
[21:27:16] -rusti- <anon>:5:9: 6:5 error: cannot determine a type for this bounded type parameter: unconstrained type
[21:27:16] -rusti- <anon>:5          range(0,10).collect()
[21:27:16] -rusti- <anon>:6     };
[21:27:16] -rusti- application terminated with error code 101
[21:27:37] <strcat> rusti: range(0, 10).collect::<~[int]>()
[21:27:38] -rusti- ~[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
[21:30:01] *** jorendorff_away is now known as jorendorff
[21:30:41] <strcat> ugh
[21:30:49] <strcat> RangeStep/RangeStepInclusive are tricky to write correctly
[21:30:53] <strcat> I think I did it though
[21:30:55] <strcat> ;p
[21:31:22] *** Quits: anri (solancile@moz-E49E7C4B.hsd1.wa.comcast.net) (Ping timeout)
[21:31:41] *** Quits: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net) (Ping timeout)
[21:33:36] <zol> Would be cool if JetBrains started working on a stand-alone Rust IDE (Not that it's really necesarry...)
[21:34:03] <cmr> zol: why would that? it's a nascent language of dubious future and adoption.
[21:34:10] *** Joins: victorporof (victorporo@6C2683EC.42B20A5F.6A4F8DA2.IP)
[21:34:16] <strcat> librustc isn't usable for stuff like completion at this point
[21:34:37] <flaper87> strcat: are you working on RangeStep right now ?
[21:34:40] <strcat> yes
[21:34:48] <flaper87> strcat: awesomeeeee
[21:34:59] <flaper87> strcat: you stole that from me but I'm glad you did
[21:35:04] <flaper87> strcat: looking forward to it
[21:35:07] <strcat> flaper87: http://ix.io/83K/diff ideally this will work
[21:35:13] *** Quits: KindOne (KindOne@moz-697F9CA4.dynamic.ip.windstream.net) (Ping timeout)
[21:35:13] <strcat> well, I've thought about it before
[21:35:16] <strcat> so I know the edge cases
[21:35:31] <flaper87> strcat: that's why I'm happy with you taking over it :D
[21:35:45] * flaper87 looking
[21:35:58] <strcat> iter.rs:1894:25: 1894:26 error: cannot bind by-move into a pattern guard
[21:36:00] <strcat> >.<
[21:36:11] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[21:38:12] *** Quits: heftig (heftig@moz-F404901C.dip0.t-ipconnect.de) (Ping timeout)
[21:40:31] *** Joins: KindOne (KindOne@moz-697F9CA4.dynamic.ip.windstream.net)
[21:40:35] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[21:41:46] *** Joins: heftig (heftig@moz-A5FDB274.dip0.t-ipconnect.de)
[21:42:02] <flaper87> strcat: will you make Range use RangeStep with step of One::one() ?
[21:42:12] *** Joins: eod (Mibbit@359B34A6.695DE54A.1951548C.IP)
[21:42:12] <strcat> no
[21:42:19] *** jorendorff is now known as jorendorff_away
[21:42:20] <flaper87> strcat: why?
[21:42:20] <strcat> RangeStep is inherently slower
[21:43:09] <flaper87> yeah but, mmmhhh
[21:43:31] <strcat> Range's next() is just 6 lines
[21:43:41] <strcat> and it has DoubleEndedIterator, and will have a simple size hint
[21:44:46] <flaper87> mmh, yeah, I agree
[21:45:08] * flaper87 sometimes fools himself with other languages' way of doing things
[21:46:39] *** Joins: anri (solancile@moz-E49E7C4B.hsd1.wa.comcast.net)
[21:47:59] *** Quits: etw (john@moz-D871A25B.nyc.res.rr.com) (Ping timeout)
[21:48:31] * strcat thought of a test case it fails ;[
[21:49:11] <strcat> just not going to worry about factoring it out nicely yet...
[21:50:43] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[21:55:03] *** Quits: sinma (sinma@moz-6A11C47C.fbx.proxad.net) (Ping timeout)
[21:55:18] *** Quits: jaen (jaen@moz-5800CC3C.play-internet.pl) (Ping timeout)
[21:57:11] *** Joins: sinma (sinma@moz-6A11C47C.fbx.proxad.net)
[21:58:19] <zol> cmr: Why it would be cool? I think it's rather self-explanatory. :)
[21:59:29] <cmr> s/that/they/
[21:59:33] <cmr> As in, why would they bother
[22:00:34] *** Quits: maik (maik@moz-58B2DA03.dip0.t-ipconnect.de) (Ping timeout)
[22:00:40] *** Joins: eapsebastian (eapsebasti@moz-6443079.dllstx.fios.verizon.net)
[22:01:39] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:03:19] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[22:03:40] <zol> cmr: I know they will never do it, just meant that it would be cool if they ever did. Not a very constructive statement on my part I guess.. 
[22:03:47] *** Quits: eapsebastian (eapsebasti@moz-6443079.dllstx.fios.verizon.net) (Quit: leaving)
[22:04:15] <zol> Probably never.. 
[22:05:36] *** Quits: sebcrozet (sebcrozet@moz-2517AE39.w80-13.abo.wanadoo.fr) (Quit: Gone)
[22:08:06] *** Quits: RMF (RMF@moz-7ED3CBC0.dsl.telepac.pt) (Quit: Textual IRC Client: www.textualapp.com)
[22:09:28] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Ping timeout)
[22:11:39] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[22:13:38] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[22:14:45] *** Joins: mib_o2ou3x (Mibbit@moz-F07D77C6.cpe.net.cable.rogers.com)
[22:14:53] *** Quits: mib_o2ou3x (Mibbit@moz-F07D77C6.cpe.net.cable.rogers.com) (User has been banned from Mozilla (no spamming here))
[22:15:53] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[22:15:53] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/tOkc4A
[22:15:53] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[22:15:59] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[22:16:13] *** Quits: JesseH (JesseH@moz-2E766C3E.mc.at.cox.net) (Quit: github.com/jessehorne)
[22:18:15] *** Joins: RMF (RMF@moz-7ED3CBC0.dsl.telepac.pt)
[22:18:45] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[22:19:24] *** Quits: eod (Mibbit@359B34A6.695DE54A.1951548C.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:20:40] *** Joins: jmgrosen__ (jmgrosen@13731CEE.FD5C31A1.284344F5.IP)
[22:20:52] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[22:20:52] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/-_FKYw
[22:20:52] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[22:20:53] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[22:20:53] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/53VGDQ
[22:20:53] <ghrust> 13rust/06auto 149357f8f 15Flavio Percoco: Add SharedPort wrapper around rt::comm::SharedPort...
[22:20:53] <ghrust> 13rust/06auto 14cf7e93f 15bors: auto merge of #9198 : FlaPer87/rust/shared-port, r=cmr...
[22:20:53] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[22:21:26] *** Joins: RageOfThou (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[22:21:47] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[22:21:47] *** jmgrosen_ is now known as jmgrosen
[22:21:52] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[22:22:20] *** Quits: jmgrosen__ (jmgrosen@13731CEE.FD5C31A1.284344F5.IP) (Ping timeout)
[22:22:52] *** Joins: jclements (jclements@moz-BEE8D50A.dsl.snlo01.pacbell.net)
[22:25:24] *** Joins: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net)
[22:25:42] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:27:01] *** Quits: Daishiman (osinski@moz-70D5141.telecom.net.ar) (Ping timeout)
[22:27:21] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[22:29:01] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[22:29:11] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[22:29:56] <miza> datetime hasn't implemented yet?
[22:30:11] <flaper87> miza: no, there's a discussion in rust-dev about that module
[22:30:32] <strcat> cmr: around?
[22:30:36] <cmr> strcat: pong
[22:30:40] <flaper87> miza: https://mail.mozilla.org/pipermail/rust-dev/2013-September/005528.html
[22:30:41] <strcat> cmr: https://github.com/mozilla/rust/pull/9199 r?
[22:30:44] <miza> i want i high resolution timer to emulate cpu speed, any suggestions?
[22:30:51] <strcat> cmr: those were hard to write correctly :(
[22:30:58] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[22:30:58] *** ChanServ sets mode: +ao brson brson
[22:34:57] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[22:36:05] <strcat> cmr: I want to change the current range_inclusive to match that behaviour too, but I'll do it later
[22:36:19] * strcat doesn't want to think about fixnums anymore
[22:36:41] <flaper87> strcat: why self.done is needed? https://github.com/thestinger/rust/commit/a18038f3b2ee338de05ef4489d6ac7067c9198fd#L0R1895 
[22:36:49] <flaper87> would >= and <= work ?
[22:37:04] <strcat> flaper87: no, it will never stop
[22:37:14] <strcat> the non-inclusive impl uses this trick
[22:37:16] <strcat>  +                None => self.state = self.stop.clone() 
[22:37:42] <strcat> it took me a while to come up with something passing the tests I made
[22:37:58] <flaper87> strcat: yeah, that's why I was wondering if using >= and <= would avoid adding `done`
[22:38:01] <flaper87> LGTM anyway
[22:38:08] <flaper87> I agree with improving the code later
[22:38:29] <flaper87> I've no r+ powers but, FIWIW r+
[22:38:32] <flaper87> FWIW*
[22:38:34] <strcat> cmr did already :)
[22:38:47] <strcat> it's something lots of people have wanted
[22:39:00] <strcat> but not as simple as it seems at first
[22:39:07] <flaper87> strcat: added anyway
[22:39:17] <flaper87> strcat: agreed, I needed it earlier today
[22:39:27] <flaper87> thanks for working on that
[22:39:29] <engla> ah it's not defined for float, because of CheckedAdd?
[22:39:37] <strcat> engla: right
[22:39:48] <strcat> range() isn't a good idea for floats anyway
[22:39:52] * flaper87 wonders what CheckedAdd does.
[22:39:55] <engla> it isn't
[22:39:55] * flaper87 looks
[22:39:58] <strcat> flaper87: checked overflow
[22:40:06] <strcat> I wrote it primarily for this, actually
[22:40:09] <flaper87> strcat: danke
[22:40:12] <strcat> it uses the LLVM intrinsics
[22:40:33] <strcat> if you have a fairly naive implementation and do range(0u8, 255, 50), it's never going to stop 
[22:40:39] <strcat> since it'll go 250 -> 300
[22:40:47] <strcat> which is... going to wrap
[22:41:25] * strcat checks if it will stop
[22:42:00] <engla> now we have even less reason to have std::int/uint with range_step ported
[22:42:16] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[22:43:08] <strcat> oh
[22:43:10] <strcat> it does terminate
[22:43:19] <flaper87> w0000t
[22:43:48] <strcat> flaper87: http://ix.io/83M
[22:44:01] <strcat> range_step(0u8, 250, 50) without overflow checking
[22:44:03] <strcat> ;]
[22:44:18] <flaper87> mmhh
[22:44:37] <strcat> there's some fun number theory stuff related to this
[22:44:39] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: Leaving)
[22:44:49] <strcat> but it's somewhere tucked away in my brain... hm
[22:44:58] *** Quits: sinma (sinma@moz-6A11C47C.fbx.proxad.net) (Quit: Konversation terminated!)
[22:45:24] <strcat> oh right
[22:45:43] <strcat> it's close to the discrete log problem :)
[22:45:54] <strcat> diffie-hellman uses it
[22:46:10] <strcat>  If b and g are elements of a group G, then k, an integer solution of the equation bk = g, is called a discrete logarithm to the base b of g in the group G.
[22:46:20] <strcat> (that's b to the power of k)
[22:47:14] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Client exited)
[22:47:20] <flaper87> T_T I completely forgot about discrete log problem, seriously, my brain is not that good
[22:47:22] <flaper87> :D
[22:47:29] <flaper87> actually, my memory
[22:50:00] <flaper87> strcat: cmr https://github.com/mozilla/rust/pull/9194 r? 
[22:50:04] <flaper87> rebased and ready
[22:50:28] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[22:50:38] <flaper87> strcat: danke sir
[22:52:01] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[22:52:42] <docbrown> is the rusti bot's source hosted anywhere?
[22:52:45] <strcat> flaper87: btw I have a web frontend for rusti (the bot) if you want to make https://github.com/FlaPer87/rust-for-real a web page
[22:52:58] <strcat> docbrown: kind of.
[22:53:12] <strcat> docbrown: https://github.com/thestinger/rust-playpen + https://github.com/thestinger/playpen is the web UI
[22:53:15] <flaper87> strcat: yes please
[22:53:18] <strcat> http://strcat.zapto.org:8000/
[22:53:38] <strcat> flaper87: I actually already have it set up to serve a random example ;p, but there are just 2 awful ones
[22:53:53] <strcat> could make it serve them sequentially or whatever
[22:54:09] <flaper87> strcat: we can let people chose the example and let rusti do the rest
[22:54:13] <flaper87> choose
[22:54:27] <strcat> flaper87: I could make a drop-down menu of examples to load, for example
[22:54:33] <strcat> and start off with a random one
[22:54:40] <flaper87> strcat: +1
[22:54:42] <flaper87> sounds good
[22:54:49] <strcat> anyway I want this to be on rust-lang.org eventually
[22:54:51] <benh> Is there a way to kill a task I spawned outside of linked failure?
[22:54:59] <cmr> benh: no
[22:55:02] <flaper87> strcat: +1 for that as well
[22:55:05] <cmr> You need to send it a message asking it to kill itself
[22:55:12] <cmr> known as a "poison pill" in other environments
[22:55:26] <strcat> flaper87: er, sorry I didn't have it running
[22:55:32] <strcat> flaper87: try http://strcat.zapto.org:8000/ again
[22:56:14] <flaper87> strcat: w0000t
[22:56:24] <flaper87> just pasted the nested.rs example there
[22:56:25] <flaper87> :D
[22:56:27] <docbrown> strcat: playpen looks cool! I'm curious about how rusti does IRC comms, though. Is that part Rust-based?
[22:56:48] *** Joins: a_m0d|home (a_m0d@moz-D106051.acanac.net)
[22:57:18] <strcat> docbrown: atm it's just a boring python irc bot
[22:57:20] *** Quits: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Ping timeout)
[22:57:29] <strcat> docbrown: it's done the same way as the web UI
[22:57:41] <docbrown> strcat: Oh ok. Just curious. :)
[22:57:57] <strcat> http://ix.io/83N that little script goes in the rust-playpen bin dir
[22:58:28] <strcat> http://ix.io/83O and the hideous/incomplete bot code ;p
[22:58:55] <strcat> it used to actually be async... but then I intentionally broke that because then spam -> massive memory usage
[22:58:58] <strcat> since it's capped per request
[23:00:25] <strcat> I'll end up rewriting it in rust some day
[23:00:36] <strcat> but there's no working irc client lib
[23:00:48] <strcat> and dealing with irc without a lib is... not very fun
[23:00:54] *** Quits: bs3g (bs3g@moz-B3B8B011.red.bezeqint.net) (Ping timeout)
[23:01:29] <docbrown> strcat: Agreed. That's why I was hoping you'd written one already. :P
[23:01:54] <flaper87> isn't there an irc lib that can be wrapped ?
[23:02:02] <flaper87> I mean, a C / C++ one
[23:02:25] <strcat> flaper87: you'd want to make it use rust's tcp stuff so it wouldn't block threads
[23:02:44] <strcat> irc is a pretty simple line-based protocol, but getting the little details right is annoying
[23:03:27] <flaper87> strcat: I know, I once wrote a very small IRC bot using plain TCP sockets and IRC commands, it's a PITA
[23:03:33] *** Joins: lazyden (lazyden@moz-4578A0B7.singnet.com.sg)
[23:03:50] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[23:04:01] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[23:04:01] *** ChanServ sets mode: +ao dherman dherman
[23:05:12] <flaper87> kk, gotta go!
[23:05:17] <flaper87> by guys
[23:05:20] <flaper87> bye
[23:05:24] <strcat> \o
[23:05:52] *** flaper87 is now known as flaper87|afk
[23:06:11] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Ping timeout)
[23:06:35] <strcat> rusti: version
[23:06:36] -rusti- <anon>:5:9: 5:16 error: unresolved name `version`.
[23:06:36] -rusti- <anon>:5          version
[23:06:36] -rusti-                   ^~~~~~~
[23:06:36] -rusti- error: aborting due to previous error
[23:06:36] -rusti- application terminated with error code 101
[23:07:09] *** Quits: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net) (Input/output error)
[23:08:59] <strcat> rusti: version
[23:09:00] -rusti- "rustc 0.8-pre (b81743e 2013-09-13 12:55:54 -0700)"
[23:12:25] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[23:12:50] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[23:14:43] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[23:16:05] *** Quits: tclark (ctimothy@moz-1DB1FE6E.hsd1.wa.comcast.net) (Input/output error)
[23:17:03] <jeaye> Where's a constant for f32's epsilon?
[23:17:09] <jeaye> Doesn't seem to be in f32::consts
[23:17:42] <cmr> epsilon being the value between two f32's that are as close together as representable?
[23:17:59] <jeaye> yes, the leniency
[23:18:10] <cmr> Isn't that variable depending on where you are on the real line?
[23:18:54] <jeaye> For example, in C++: std::numeric_limits<float>::epsilon()
[23:19:45] <jeaye> cmr: It's generally just a relatively small number like 0.00001 (FLT_EPSILON in C)
[23:20:05] <strcat> cmr: it's the minimum possible gap
[23:20:25] <strcat> it does vary based on where you are, it's just the smallest point
[23:20:33] <cmr> but there are floats where a + epsilon == a, if that's the definition
[23:20:35] <cmr> oh, ok
[23:20:40] <strcat> FLT_EPSILON the minimum positive number such that 1.0 + FLT_EPSILON != 1.0. 
[23:21:05] <cmr> That seems to be not a very useful number.
[23:21:11] <jeaye> strcat: Is there such a constant in Rust?
[23:21:16] <strcat> jeaye: dunno
[23:21:19] <jeaye> mmk
[23:21:19] <strcat> what is it for?
[23:22:07] <jeaye> Quaternion slerp
[23:22:15] <jeaye> But I think I can make so without the epsilon.
[23:22:27] <jeaye> Well, we'll see the results anyway. :P
[23:22:51] <benh> is there something like fail!() except without the notion of failure
[23:23:00] <jeaye> error!()
[23:23:00] <cmr> benh: ... what would it do?
[23:23:09] <benh> like "good job, high fives all around, let's shutdown all the threads but not complain on stderr"
[23:24:01] <engla> so something like a task exit
[23:24:21] <jeaye> fail!() 2>&1 /dev/null
[23:24:40] *** Joins: mib_rxmvpm (Mibbit@moz-FB83D6F7.tampfl.fios.verizon.net)
[23:24:49] <jeaye> (compilation not tested)
[23:25:01] <benh> http://ix.io/83S i finally wrote out this really crappy version of recv_timeout and it works in really trivial test cases but it kinda isn't right :(
[23:25:07] <mib_rxmvpm> rusti: println([1, 2].len());
[23:25:07] -rusti- <anon>:7:17: 7:30 error: mismatched types: expected `&str` but found `uint` (expected &str but found uint)
[23:25:08] -rusti- <anon>:7          println([1, 2].len());
[23:25:08] -rusti-                           ^~~~~~~~~~~~~
[23:25:08] -rusti- error: aborting due to previous error
[23:25:08] -rusti- application terminated with error code 101
[23:25:29] <jeaye> rusti: println("%u", [1, 2].len());
[23:25:29] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[23:25:30] -rusti- <anon>:7:9: 7:37 error: this function takes 1 parameter but 2 parameters were supplied
[23:25:30] -rusti- <anon>:7          println("%u", [1, 2].len());
[23:25:30] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
[23:25:30] -rusti- error: aborting due to previous error
[23:25:30] -rusti- application terminated with error code 101
[23:25:36] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[23:25:39] <jeaye> rusti: printfln("%u", [1, 2].len());
[23:25:40] -rusti- <anon>:7:9: 7:17 error: unresolved name `printfln`.
[23:25:40] -rusti- <anon>:7          printfln("%u", [1, 2].len());
[23:25:40] -rusti-                   ^~~~~~~~
[23:25:40] -rusti- error: aborting due to previous error
[23:25:40] -rusti- application terminated with error code 101
[23:25:46] <jeaye> rusti: printfln!("%u", [1, 2].len());
[23:25:47] -rusti- 2
[23:25:47] -rusti- ()
[23:25:50] * jeaye gives up
[23:25:58] <mib_rxmvpm> jeaye: Hahaha
[23:26:17] <jeaye> mib_rxmvpm: If you want formatting, use the macro and format string.
[23:26:24] <mib_rxmvpm> Thanks, man. Just seeing if len returns 0-index or 1-index
[23:26:29] <engla> take your time to learn printfln! jeaye, before it is replaced
[23:26:35] <engla> println! is the new thing :)
[23:26:44] <mib_rxmvpm> engla: Woot, woot!
[23:27:03] <engla> rusti: println!("{:x} {}", 17, 17)
[23:27:04] -rusti- 11 17
[23:27:04] -rusti- ()
[23:27:14] <jeaye> Does it still consume strings? -_-
[23:27:16] <SiegeLord> Since when does the length depend on whether you're using 0-index or 1-index arrays?
[23:27:24] <engla> jeaye: no
[23:27:31] <cmr> benh: a recv_timeout is being tested by bors right now.
[23:27:33] *** Joins: mrwhite (Mibbit@moz-499B701B.hsd1.mn.comcast.net)
[23:27:33] <jeaye> Then I might be able to use it. :P
[23:27:39] <kimundi> SiegeLord: hu?
[23:27:45] <engla> rusti: let s = ~"a"; println!("{}", s); s
[23:27:46] -rusti- a
[23:27:46] -rusti- ~"a"
[23:27:53] <jeaye> engla: Very nice.
[23:27:56] <mib_rxmvpm> SiegeLord: Sometimes someone does a length being 0-based. As in a 1 element array will return 0 for len.
[23:28:04] <mib_rxmvpm> SiegeLord: Silliness, I know.
[23:28:05] <SiegeLord> That seems... uncanny
[23:28:21] <cmr> That defies the very notion of length
[23:28:24] <mib_rxmvpm> Well, I'm off! Thanks guys. Have a good'n.
[23:28:27] <cmr> How do you represent an empty thing? -1?
[23:28:27] *** Quits: mib_rxmvpm (Mibbit@moz-FB83D6F7.tampfl.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:28:29] <kimundi> brrrrrrrr
[23:28:55] <strcat> cmr: which is uint::max_value
[23:28:57] <strcat> :D
[23:30:58] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[23:30:58] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/53VGDQ
[23:30:58] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[23:31:45] <mrwhite> sorry if this is an easy question, but how would one go about initializing a fixed length array [int, ..100] without explicitly writing 100 zeros (i.e. [0, 0, 0, ...])?
[23:32:27] <SiegeLord> [0, ..100]
[23:33:58] <mrwhite> thanks
[23:35:36] <mrwhite> and if I wanted to fill such a vector with random data, would I always have to zero-initialize it like that first and then change the values?
[23:35:51] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[23:35:51] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/4cqJMg
[23:35:51] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[23:35:51] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[23:35:52] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/hWylrw
[23:35:52] <ghrust> 13rust/06auto 14ed5d519 15Flavio Percoco: Implement recv_timeout for std::comm *Port implementations
[23:35:52] <ghrust> 13rust/06auto 14edeb740 15bors: auto merge of #9194 : FlaPer87/rust/issue/3015, r=thestinger...
[23:35:52] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[23:35:55] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[23:36:30] <engla> I think so mrwhite. I'm not sure
[23:36:41] <engla> a fixed-size vector that is
[23:37:58] <Eridius> rusti: use std::unstable::intrinsics; let xs: [int, ..5] = intrinsics::uninit(); println!("{}", xs)
[23:38:01] -rusti- pastebinned 8 lines of output: http://ix.io/83U
[23:38:11] <Eridius> rusti: use std::unstable::intrinsics; let xs: [int, ..5] = intrinsics::uninit(); println!("{}", xs.as_slice())
[23:38:14] -rusti- pastebinned 8 lines of output: http://ix.io/83V
[23:38:18] <engla> need unsafe {}
[23:38:24] <Eridius> rusti: use std::unstable::intrinsics; let xs: [int, ..5] = intrinsics::uninit(); println!("{:?}", xs)
[23:38:24] -rusti- <anon>:7:61: 7:82 error: call to unsafe function requires unsafe function or block
[23:38:24] -rusti- <anon>:7          use std::unstable::intrinsics; let xs: [int, ..5] = intrinsics::uninit(); println!("{:?}", xs)
[23:38:25] -rusti-                                                                       ^~~~~~~~~~~~~~~~~~~~~
[23:38:25] -rusti- error: aborting due to previous error
[23:38:26] -rusti- application terminated with error code 101
[23:38:27] <Eridius> ah that too
[23:38:34] <Eridius> rusti: use std::unstable::intrinsics; let xs: [int, ..5] = unsafe { intrinsics::uninit() }; println!("{:?}", xs)
[23:38:35] -rusti- [140123777851456, 0, 0, 1, 140123816288192]
[23:38:35] -rusti- ()
[23:38:44] <Eridius> there ya go. uninitialized fixed-len vector
[23:38:59] <engla> yep, only possible in unsafe code
[23:39:22] <strcat> if you zero-initialize it and then set all the values in it, LLVM won't actually zero it
[23:40:55] <mrwhite> cool, good to know
[23:41:24] <mrwhite> thanks
[23:41:29] *** Quits: mrwhite (Mibbit@moz-499B701B.hsd1.mn.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:42:11] <SiegeLord> How complex can the code to set all the values in it can be before it fails? Will a for loop work?
[23:42:32] <miza> unsafe is mark that is unsafe for parallel?
[23:42:41] <Eridius> miza: no, that it's unsafe in general
[23:42:47] <Eridius> unsafe code can escape the type system and be memory-unsafe
[23:42:52] <Eridius> i.e. unsafe code can crash the program
[23:43:16] <Eridius> rusti: let p: *int = std::ptr::null(); let x = unsafe { *p }; x
[23:43:17] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[23:43:45] <miza> is a bad practice to use unsafe code?
[23:43:57] <jeaye> Don't use it unless you have to.
[23:43:58] <miza> what problems solve this?
[23:44:09] <Eridius> unsafe code can do things that safe code can't
[23:44:15] <Eridius> things that cannot be statically guaranteed by the type system
[23:44:26] <Eridius> unsafe code is also necessary when dealing with the FFI
[23:44:29] <Eridius> because C functions are inherently unsafe
[23:45:45] <miza> ok, thanks
[23:46:38] <strcat> SiegeLord: yes, mut_iter
[23:47:13] <strcat> rusti: let mut xs = [0.0, ..10]; for (i, x) in xs.mut_iter().enumerate() { *x = i; } xs
[23:47:14] -rusti- <anon>:7:82: 7:83 error: mismatched types: expected `float` but found `uint` (expected float but found uint)
[23:47:14] -rusti- <anon>:7          let mut xs = [0.0, ..10]; for (i, x) in xs.mut_iter().enumerate() { *x = i; } xs
[23:47:14] -rusti-                                                                                            ^
[23:47:14] -rusti- error: aborting due to previous error
[23:47:16] -rusti- application terminated with error code 101
[23:47:23] <strcat> rusti: let mut xs = [0u, ..10]; for (i, x) in xs.mut_iter().enumerate() { *x = i; } xs
[23:47:23] -rusti- [0u, 1u, 2u, 3u, 4u, 5u, 6u, 7u, 8u, 9u]
[23:50:39] *** Quits: nkoep (nik@moz-9172FA96.pool.mediaways.net) (Client exited)
[23:52:39] *** Joins: Jesin (Jessin_@moz-971F1FB4.cc.lehigh.edu)
[23:55:30] <miza> a noob question
[23:55:36] <miza> what is the rc files?
[23:56:40] <strcat> miza: we don't use the .rc extension anymore
[23:57:00] <strcat> it used to be used for the top-level module, by convention
[23:59:27] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[23:59:44] <acrichto> strcat: are you ok if I halt bors testing https://github.com/mozilla/rust/pull/9194
[23:59:54] <acrichto> strcat: I have some concerns which I'd like to address before merging
[23:59:58] <strcat> ok
