[00:00:03] <strcat> but it's not clever enough to cause a huge ripple effect yet (it is getting closer to that)
[00:00:13] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[00:00:22] <olsonjeffery> rusti: struct Foo { a: bool } impl Foo { fn bar(&mut self, in: bool) { self.a = in; }}  let mut f = Foo{a:true}; f.bar(false); f.a
[00:00:26] -rusti- pastebinned 8 lines of output: http://ix.io/7HM
[00:00:28] <olsonjeffery> ugh.
[00:01:12] <olsonjeffery> rusti: struct Foo { a: bool } impl Foo { fn bar(&mut self, v: bool) { self.a = v; }}  let mut f = Foo{a:true}; f.bar(false); f.a
[00:01:13] -rusti- false
[00:01:19] <olsonjeffery> rusti: struct Foo { a: bool } impl Foo { fn bar(&mut self, v: bool) { self.a = v; }}  let f = Foo{a:true}; f.bar(false); f.a
[00:01:19] -rusti- <anon>:5:109: 5:110 error: cannot borrow immutable local variable as mutable
[00:01:20] -rusti- <anon>:5          struct Foo { a: bool } impl Foo { fn bar(&mut self, v: bool) { self.a = v; }}  let f = Foo{a:true}; f.bar(false); f.a
[00:01:20] -rusti-                                                                                                                       ^
[00:01:20] -rusti- error: aborting due to previous error
[00:01:21] -rusti- application terminated with error code 101
[00:01:36] <strcat> acrichto: I would just compare the pass output to clang
[00:01:44] <strcat> acrichto: and also make sure the inlining weights are the same
[00:02:09] * strcat still hasn't built clang from trunk
[00:02:11] <olsonjeffery> Aszarsha: so with the above error, you see that we can't call methods on a value that are &mut self unless the value is stored mut
[00:02:25] <strcat> brson: you can still do this
[00:02:29] <Aszarsha> olsonjeffery, kimundi: my question was more like "why to I have to overload on whether my parameter is mut or not" when it leads to identical code ? can't it be part of the generic type ? (ex https://github.com/mozilla/rust/blob/master/src/libstd/ptr.rs#L29 and #L36)
[00:02:49] <strcat> rusti: let x = 0 as *int; ((x as uint) + 2) as *int
[00:02:51] -rusti- (0x2 as *())
[00:03:43] <strcat> (it just makes really awful IR due to not using GEP)
[00:04:02] <kimundi> Aszarsha: He, the unsafe pointers are a bit trickier tu justify
[00:04:07] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[00:04:16] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:04:20] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[00:04:57] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[00:04:57] *** ChanServ sets mode: +o tjc
[00:05:01] *** Joins: robarnold (rob@BD56354E.DB510C09.6E370BFC.IP)
[00:05:10] <kimundi> Aszarsha: But basically, Even if the compiler doesn't check memory unsafeness with them, you're supposed to use the correct one so that llvm doesn't do something bad if it optimizes
[00:05:34] <strcat> we don't actually tell LLVM about the mutability though
[00:05:41] <kimundi> eg, only read from a *T
[00:06:06] <strcat> const * in C isn't strong enough to provide a useful guarantee to the compiler
[00:06:18] <kimundi> not yet, but we might. Anyway no reason to ignore the annotation we have now :)
[00:06:26] <strcat> you would have to require that *T always point to immutable memory, like &T
[00:06:33] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[00:07:40] <benh> is &const still a thing?
[00:07:51] <strcat> in the process of being removed
[00:08:43] <dbaupp> :( is graydon no longer working on Rust at all?
[00:09:14] *** Joins: Girl_cam-18 (-@moz-384D1192.fbx.proxad.net)
[00:09:47] <Aszarsha> Is there a keyword similar to const in D which would mean "bind to either *T or *mut T" where * might be stack-&ed, ~ or any other mut-able data ?
[00:10:16] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[00:10:42] <Girl_cam-18> http://erzurumarackiralama.com my cam and i are waiting for you... HOT and REAL guy come to me!!!!
[00:10:43] <Girl_cam-18> http://erzurumarackiralama.com my cam and i are waiting for you... HOT and REAL guy come to me!!!!
[00:10:43] <Girl_cam-18> http://erzurumarackiralama.com my cam and i are waiting for you... HOT and REAL guy come to me!!!!
[00:10:48] <Girl_cam-18> http://erzurumarackiralama.com my cam and i are waiting for you... HOT and REAL guy come to me!!!!
[00:10:53] <Girl_cam-18> mCx thank you :)
[00:11:06] *** Parts: Girl_cam-18 (-@moz-384D1192.fbx.proxad.net) ()
[00:11:13] <sigma> interesting
[00:11:22] *** Joins: mib_9uyb_ (mib_9uybip@5DDA3D24.C60FE7DC.4065847B.IP)
[00:11:23] <jack> left before i could ban.
[00:11:38] <jack> since when does irc.mozilla.org get join spam?
[00:11:47] <olsonjeffery> it happens
[00:11:57] <SiegeLord> It's been like this for my entire time here (a few months)
[00:12:00] <acrichto> strcat: do you know what the default weight is if you add a pass via "-inline"
[00:12:03] <olsonjeffery> used it see it quite a bit in #jsapi
[00:12:10] <strcat> acrichto: no
[00:12:22] *** Quits: mib_9uybip (mib_9uybip@moz-9B8221B3.rivrw1.nsw.optusnet.com.au) (Ping timeout)
[00:12:24] <strcat> acrichto: also I think we're enabling -inline at -O1 atm and we shouldn't be
[00:12:28] <strcat> but that's a super minor issue
[00:12:29] <SiegeLord> Aszarsha: To me, just & is it
[00:12:50] <SiegeLord> At least, as much I understand D and Rust
[00:12:50] <acrichto> strcat: that's what clang does
[00:12:54] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[00:13:03] <strcat> acrichto: hm, are you looking at 3.3 or svn?
[00:13:09] <acrichto> I thought svn
[00:13:10] <SiegeLord> There's also &const or something, but I've never used it
[00:13:15] <strcat> acrichto: well I'm looking at 3.3
[00:13:17] <Aszarsha> SiegeLord: ha right, because of the freezing behavior... interesting !
[00:13:18] <strcat> so I don't know :)
[00:13:25] <SiegeLord> That might be more comparable to D's const
[00:13:32] <SiegeLord> I don't know if &const freezes
[00:13:35] <acrichto> strcat: https://github.com/llvm-mirror/clang/blob/master/lib/CodeGen/BackendUtil.cpp#L289
[00:13:36] <strcat> SiegeLord: it's deprecated
[00:13:38] <strcat> being removed
[00:13:42] <SiegeLord> I see, even easier
[00:13:51] <SiegeLord> I love when confusing things are removed 8)
[00:14:11] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[00:14:16] <dbaupp> SiegeLord: &const just says "can't mutate through this specific reference" (whereas & says "can't mutate through any reference")
[00:14:40] <SiegeLord> Yeah, so &const sounds exactly like D's const
[00:14:45] <strcat> acrichto: that's just to set the weight though
[00:14:47] <Aszarsha> yes
[00:14:53] <benh> Wish you could parametrize over constness somehow :)
[00:14:57] <SiegeLord> & is then immutable &
[00:15:02] <strcat> acrichto: anyway I'm just comparing -llvm -debug-pass=Structure to ours
[00:15:07] <strcat> -mllvm *
[00:15:14] <acrichto> strcat: if Builder.Inliner isn't null it adds the inlining
[00:15:29] <strcat> acrichto: but when is it null?
[00:15:39] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[00:15:39] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/nExuHg
[00:15:39] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[00:15:39] <Aszarsha> SiegeLord: don't think & is immutable & since it can bind to mutable data with freezing
[00:15:47] <acrichto> strcat: by default, but it's set in tha tswitch
[00:15:56] <kimundi> Aszarsha: It is immutable
[00:15:58] <benh> Aszarsha: it's immutable once its frozen!
[00:16:18] <acrichto> strcat: this is definitely a pass problem
[00:16:23] <Aszarsha> yes, yes, but it can bind to more 'data' than and immutable & in D
[00:17:24] <strcat> acrichto: we run IR verification and clang doesn't, dunno if that was on before since we didn't print passes ;p
[00:17:34] <dbaupp> Aszarsha: only because D can't enforce aliasing guarantees like Rust can (I assume)
[00:17:57] <kimundi> Aszarsha: If you have a &T then T is immutable... UNLESS T is not Freezable. You can achieve that with an special attribute, or by having T contain an unfreezable type
[00:18:29] <acrichto> strcat: https://gist.github.com/alexcrichton/6395439
[00:18:57] <SiegeLord> What would be unfreezable, @?
[00:18:59] <strcat> acrichto: what's the actual difference? (tr ' ' '\n' helps here ;p)
[00:19:06] <acrichto> yeah gonna try that
[00:19:10] <Aszarsha> kimundi: what are unfreezable types ? (sorry, I'm very new to Rust)
[00:19:17] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[00:19:23] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Ping timeout)
[00:19:24] <strcat> acrichto: or just look at the Structure one
[00:19:41] *** Joins: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com)
[00:19:46] *** Quits: emartin (emartin@moz-96C98BDD.res.umontreal.ca) (Ping timeout)
[00:19:51] <dbaupp> Aszarsha: @mut, &mut, RcMut
[00:20:17] <strcat> acrichto: so, -O1 clang vs rustc -> only difference is that they do always inline and we do inline
[00:20:17] <dbaupp> SiegeLord: @T (without `mut`) is Freeze, if T is Freeze
[00:20:19] <Aszarsha> dbaupp: I though they where runtime-freezable
[00:20:20] <acrichto> strcat: https://gist.github.com/alexcrichton/6395444 first block is all the function pass manager (empty on rust), second is llvm
[00:20:27] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[00:20:30] <acrichto> strcat: ok I'll change that
[00:20:33] <kimundi> Aszarsha: One example is Cell. It's basically just a Option wrapped as a new type that allows you to mutate the content through an safe API even if it is in an immutable locations. It get's used to work around rough edges in the type system
[00:20:37] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[00:20:37] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/JfxcWg
[00:20:37] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[00:20:40] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[00:20:41] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/SfdMBg
[00:20:41] <ghrust> 13rust/06auto 1491d6c60 15Erick Tryzelaar: fix various warnings
[00:20:41] <ghrust> 13rust/06auto 1466e3a4c 15Erick Tryzelaar: rustc: capitalize types in rscope.rs
[00:20:41] <ghrust> 13rust/06auto 149730ed9 15Erick Tryzelaar: std: Add a fixme for when we add Trait::<for T>::static_method()
[00:20:42] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[00:20:48] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[00:20:49] <dbaupp> Aszarsha: Freeze means: if they're placed in an immutable variable, then nothing it refers to is mutable
[00:21:00] <acrichto> strcat: I have a feeling it may be the inlining weights
[00:21:08] <dbaupp> Aszarsha: e.g. `let x = @mut 1;` the one is mutable even though x is immutable
[00:21:09] * strcat highly suspects that
[00:21:19] <acrichto> (those lists of passes are very similar)
[00:21:21] *** Quits: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com) (Ping timeout)
[00:21:56] <strcat> acrichto: -O2 is identical except that clang 3.3 didn't have loop-vectorize on there yet, -O3 is identical except that clang didn't SLP vectorize yet
[00:22:07] <acrichto> strcat: excellent
[00:22:27] <strcat> and noise from us having verification on ;p
[00:22:42] <strcat>       Machine Block Frequency Analysis
[00:22:46] <strcat> whatever that is
[00:22:53] <strcat> it's no-op analysis stuff though
[00:23:09] <zol> tikue: I fixed it! :)
[00:23:11] <strcat> acrichto: oh and that 3.3 still had simplify libcalls ;p
[00:23:12] *** Quits: jclements (jclements@moz-CDAD933D.wireless.calpoly.edu) (Quit: jclements)
[00:23:12] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[00:23:35] <Aszarsha> This is were I'm kind of lost... If the type is really
[00:24:07] <strcat> types in rust inherit mutability from where they are placed
[00:24:19] <strcat> there are a few types breaking the rules, and they are marked as non-Freeze
[00:24:19] <acrichto> strcat: hmm, if this is the problem we should provide a method of specifying the inline threshold on the command line or via some other method
[00:24:21] <dbaupp> *values in rust
[00:24:33] <strcat> acrichto: gcc has tunables for this stuff, not sure about clang
[00:24:38] <strcat> let me find the page... if I can remember the name
[00:24:58] <dbaupp> (most types don't have an inherent mutability, except for @mut, Cell, RcMut, etc.)
[00:25:00] <acrichto> llvm has an inline-threshold argument which is the default if no other is specified
[00:25:16] <strcat> lol they have a ridiculous number of these in gcc
[00:25:29] <strcat> acrichto:  http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html search for --param here
[00:25:32] <strcat> o_O
[00:25:43] <acrichto> what
[00:26:02] <acrichto> I'm glad I can tell gcc my l2 cache size
[00:26:08] *** Quits: miza (miza@moz-4DD51325.home.otenet.gr) (Input/output error)
[00:26:08] <strcat> acrichto: -march-native already does ;p
[00:26:11] <strcat> -march=native *
[00:26:20] <acrichto> ah but now I can override it :)
[00:26:41] <strcat> well, lets say you want to cross-compile to another target with native settings there ;p
[00:27:07] <strcat> ofc then you give up the most wonderful optimization of all, PGO :(
[00:27:55] <acrichto> strcat: yep, it was the in line cost
[00:28:01] <acrichto> inline*
[00:28:08] <strcat> \o/
[00:28:15] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[00:28:48] <strcat> acrichto: although, #[inline] is basically an override for that (massively reduces the cost for that function)
[00:29:06] <zol> rusti: [1,2,3].each(|x| println(x));
[00:29:07] -rusti- <anon>:5:9: 5:38 error: type `[<VI2>, .. 3]` does not implement any method in scope named `each`
[00:29:07] -rusti- <anon>:5          [1,2,3].each(|x| println(x));
[00:29:07] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[00:29:07] -rusti- error: aborting due to previous error
[00:29:07] -rusti- application terminated with error code 101
[00:29:26] <strcat> static cl::opt< int >  InlineLimit ("inline-threshold", cl::Hidden, cl::init(225), cl::ZeroOrMore, cl::desc("Control the amount of inlining to perform (default = 225)"))
[00:29:29] <strcat> static cl::opt< int >  HintThreshold ("inlinehint-threshold", cl::Hidden, cl::init(325), cl::desc("Threshold for inlining functions with inline hint"))
[00:29:33] <acrichto> strcat: hmm I should actually read this code
[00:29:48] *** Quits: glandium (glandium@moz-A09032B1.kimsufi.com) (Quit: Coyote finally caught me)
[00:29:54] <acrichto> strcat: this code doesn't have #[inline] anywhere though
[00:29:56] *** Joins: dwhyte (dwhyte@DFA0622C.2732CD06.B7FCEB19.IP)
[00:30:05] <dbaupp> zol: .each doesn't exist any more
[00:30:41] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[00:30:43] <zol> dbaupp: Was it replaced with something else? 
[00:30:51] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[00:30:57] <kimundi> zol: Etxernal iterators
[00:31:00] <maik> zol, for x in vec.iter(){}
[00:31:01] *** Quits: Niessy (Mibbit@moz-E56CAA08.dsl.bell.ca) (Quit: http://www.mibbit.com ajax IRC Client)
[00:31:18] *** Quits: cdidd (cdidd@moz-958CE7C7.broadband.corbina.ru) (Input/output error)
[00:31:41] *** Joins: glandium (glandium@moz-A09032B1.kimsufi.com)
[00:31:43] <strcat> zol: there's a tutorial on the new iterators: http://static.rust-lang.org/doc/tutorial-container.html#iterators
[00:31:48] *** Parts: dwhyte (dwhyte@DFA0622C.2732CD06.B7FCEB19.IP) ()
[00:32:31] <maik> btw all rust tutorials are really good to read, who wrote them?
[00:32:39] <strcat> acrichto: btw are your numbers copied from clang?
[00:32:45] <acrichto> strcat: yes
[00:32:51] <strcat> acrichto: well if they are, we should keep them
[00:32:55] <dbaupp> rusti: let v = [1,2,3]; for x in v.iter() { print!("{} ", x) } // zol
[00:32:55] <acrichto> they should be at least
[00:32:58] -rusti- pastebinned 8 lines of output: http://ix.io/7HS
[00:33:14] <dbaupp> rusti: let v = [1,2,3]; for x in v.iter() { print!("{} ", *x) } // zol
[00:33:15] -rusti- 1 2 3 ()
[00:33:23] <dbaupp> maik: strcat wrote the iterator one
[00:33:29] <strcat> and the ffi one ;p
[00:33:37] <zol> strcat: Thanks!
[00:33:39] *** Quits: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[00:33:45] *** Joins: erickt (Adium@moz-A462F6F6.pixar.com)
[00:34:00] <zol> dbaupp: Muchly appreciated
[00:34:05] <strcat> and I tried/failed at making the plain old tutorial explain destructors/boxes/ownership well
[00:34:27] *** Quits: erickt (Adium@moz-A462F6F6.pixar.com) (Quit: Leaving.)
[00:34:35] * strcat thinks one person wrote all of the *original* tutorial, but forgets who
[00:35:29] *** Joins: cdidd (cdidd@moz-52D56160.broadband.corbina.ru)
[00:35:58] <maik> haha I read everything beside ffi and iterator :d
[00:36:37] <strcat> they are still small anyway
[00:36:59] *** Quits: cdidd (cdidd@moz-52D56160.broadband.corbina.ru) (Input/output error)
[00:37:00] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[00:37:04] *** Joins: Niessy (Mibbit@moz-E56CAA08.dsl.bell.ca)
[00:37:46] *** Joins: z0w0 (zack@moz-30F36A45.qld.bigpond.net.au)
[00:38:20] <strcat> acrichto: we also need --opt-size but that involves more than just the inline threshold
[00:38:40] * maik reads about conditions now...
[00:39:03] *** Joins: cdidd (cdidd@moz-4D3C4159.broadband.corbina.ru)
[00:39:44] <strcat>       // Do not insert lifetime intrinsics at -O0.
[00:39:47] <strcat>       PMBuilder.Inliner = createAlwaysInlinerPass(false);
[00:39:48] <strcat> acrichto: we *really* need this ^
[00:39:54] <acrichto> strcat: we have that
[00:39:56] <strcat> aha
[00:40:04] <strcat> acrichto: that was a big issue before
[00:40:11] <acrichto> or at least we should have that
[00:40:29] <strcat> at -O0 they do always-inline + no llvm.lifetime, and at -O1 they do always-inline + insert lifetimes
[00:41:25] <myname> just curious: why should someone use "std::iterator::range_inclusive(0, 5)" instead of "range(0, 5+1)"?
[00:41:32] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[00:41:36] *** Quits: mib_9uyb_ (mib_9uybip@5DDA3D24.C60FE7DC.4065847B.IP) (Client exited)
[00:41:37] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Broken pipe)
[00:41:47] <strcat> myname: because +1 will overflow if the end is the max value
[00:41:56] <strcat> and you'll get an empty range
[00:42:06] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[00:42:16] <myname> well, okay, very special case but valid
[00:42:30] <dbaupp> rusti: for i in range(0u8, 255u8 + 1) { print!("{}", i) }
[00:42:30] -rusti- ()
[00:42:47] <strcat> rusti: for i in range(0u8, 255u8 + 1) { println!("{}", i) }
[00:42:47] <dbaupp> rusti: for i in std::iterator::range_inclusive(0u8, 255u8) { print!("{} ", i) }
[00:42:50] -rusti- ()
[00:42:50] -rusti- pastebinned 1 lines of output: http://ix.io/7HT
[00:42:50] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[00:43:41] *** Joins: kniteli (Mibbit@moz-F217D31A.hsd1.or.comcast.net)
[00:43:46] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[00:43:53] <strcat> myname: it becomes less of a special case with a step passed by the user instead of 1, but I didn't write those yet
[00:44:25] <myname> i have to say, i like the way ruby implements ranges, but as long as i don't have to work with _inclusive i'll be okay with that
[00:45:09] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[00:45:30] *** Quits: acrichto (acrichto@moz-B63D64BD.res.cmu.edu) (Ping timeout)
[00:45:33] <strcat> it can be renamed if someone has a better name for it
[00:45:55] *** Joins: acrichto (acrichto@moz-17CABEB0.wv.cc.cmu.edu)
[00:46:15] <myname> what's the reason you have to write std::iterator:: for range_inclusive but not for range?
[00:46:29] <dbaupp> range is in the prelude, rage_inclusive isn't
[00:47:10] <strcat> just because I expect a lot of people to use range, but not count/range_inclusive
[00:47:12] <engla> there are very few functions in the prelude. only print, println, range, stream, spawn
[00:47:25] <myname> i see
[00:47:38] <dbaupp> the prelude has a series of `pub use`'s, and every file has an implicit `use std::prelude::*;` at the top of it.
[00:47:39] <Aszarsha> why isn't range_inclusive the default and not range ? (I know the Dijkstra rant about range numbering, but still)
[00:47:51] <Aszarsha> instead of range *
[00:48:25] <kimundi> Aszarsha: Long story short you need both, but range() more often
[00:48:27] <myname> Aszarsha: i guess, exclusive is what people expect
[00:48:39] <dbaupp> because it'd go against C/C++/Python/etc's most common use of (the equivalent of) range?
[00:48:42] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: My lid went down)
[00:48:45] <myname> and also imagine something like range(0, length of stuff)
[00:49:05] <kimundi> range() - can have empty ranges
[00:49:17] <Aszarsha> range(0, length of stuff - 1) can't overflow (ok, it might underflow, but...)
[00:49:33] <kimundi> range_inclusive - can have ranges that spann the whole numeric counter type
[00:49:38] <myname> Aszarsha: indeed, but why should you -1 all the time?
[00:49:54] * strcat just made the one he thought would be used more the default
[00:49:55] *** Quits: heftig (heftig@moz-4D08C80.dip0.t-ipconnect.de) (Ping timeout)
[00:50:08] <dbaupp> rusti: for i in std::iterator::range_inclusive(0i, -1) { print!("{} ", i) }
[00:50:09] -rusti- -1 ()
[00:50:24] <dbaupp> rusti: for i in std::iterator::range_inclusive(0i, -10) { print!("{} ", i) }
[00:50:25] -rusti- -10 ()
[00:50:38] <dbaupp> ... is that meant to happen
[00:50:41] <strcat> I don't know
[00:50:42] <Aszarsha> haha
[00:50:46] <strcat> it could be defined differently...
[00:51:33] <maik> rusti: print!("%?",2);
[00:51:33] -rusti- <anon>:5:21: 5:22 error: argument never used
[00:51:33] -rusti- <anon>:5          print!("%?",2);
[00:51:33] -rusti-                               ^
[00:51:34] -rusti- error: aborting due to previous error
[00:51:34] -rusti- application terminated with error code 101
[00:51:43] <myname> well, it includes what it should include (-10) and it counts onwards until it is bigger than that
[00:51:46] <dbaupp> rusti: print!("{}",2);
[00:51:47] -rusti- 2()
[00:51:50] <myname> i call it okay
[00:51:59] <maik> okay I see the new ifmt is already in place
[00:52:06] <strcat> dbaupp: it needs to be the same in reverse
[00:52:22] <strcat> obviously floats are messed up, but they're already messed up
[00:52:37] <dbaupp> maik: only for the new macros print! and println!, printf! and printfln! are still using fmt!
[00:52:40] <strcat> rusti: range(0, 2).invert().to_owned_vec()
[00:52:40] *** Joins: tjc (tjc@moz-9E9433BA.tmodns.net)
[00:52:41] *** ChanServ sets mode: +o tjc
[00:52:41] -rusti- ~[1, 0]
[00:52:48] <strcat> rusti: range(0, -1).invert().to_owned_vec()
[00:52:48] -rusti- ~[]
[00:52:52] <strcat> rusti: range_inclusive(0, -1).invert().to_owned_vec()
[00:52:53] -rusti- <anon>:5:9: 5:24 error: unresolved name `range_inclusive`.
[00:52:53] -rusti- <anon>:5          range_inclusive(0, -1).invert().to_owned_vec()
[00:52:53] -rusti-                   ^~~~~~~~~~~~~~~
[00:52:53] -rusti- error: aborting due to previous error
[00:52:53] -rusti- application terminated with error code 101
[00:53:00] <strcat> rusti: std::iterator::range_inclusive(0, -1).invert().to_owned_vec()
[00:53:01] -rusti- ~[-1]
[00:53:01] *** Joins: emartin (emartin@moz-F3CB0634.res.umontreal.ca)
[00:53:07] <strcat> rusti: std::iterator::range_inclusive(3, -1).invert().to_owned_vec()
[00:53:08] -rusti- ~[-1]
[00:53:17] * strcat shrugs
[00:53:32] <engla> strcat, I've submitted a PR for "ExactSizeHint"
[00:53:32] *** Joins: bct (bct@moz-D3BEA05.ed.shawcable.net)
[00:53:39] <engla> it's the same proposal in more concrete form
[00:53:51] <myname> strcat: it makes perfect sense to me
[00:54:20] <myname> you may argue that you want to have an automatically set negative step if the second number is smaller than the first
[00:54:38] *** Quits: tjc (tjc@moz-9E9433BA.tmodns.net) (Ping timeout)
[00:54:46] <strcat> too magical
[00:54:59] <myname> yeah
[00:55:00] <emartin> if i make a change in libstd or something, what's the fastest way to recompile? same question as for when i pull from git
[00:55:09] <Aszarsha> rusti: range(0, 2)
[00:55:10] -rusti- {state: 0, stop: 2, one: 1}
[00:55:26] <Aszarsha> arf, doesn't show the type
[00:55:33] <Aszarsha> rusti: range(0, 2).invert()
[00:55:34] -rusti- {iter: {state: 0, stop: 2, one: 1}}
[00:55:45] <strcat> I could teach repr to print structs properly
[00:55:51] <myname> that one confuses me
[00:55:56] <dbaupp> rusti: let () = range(0,2).invert();
[00:55:59] <maik> rusti: range::<int>(0,2)
[00:56:01] -rusti- pastebinned 5 lines of output: http://ix.io/7HV
[00:56:01] -rusti- {state: 0, stop: 2, one: 1}
[00:56:17] <dbaupp> Aszarsha: that error pastebin shows the type
[00:56:19] <dbaupp> ^
[00:56:52] <strcat> invert just flips the meaning of next() and next_back()
[00:56:59] <strcat> it's an adaptor, like map/take
[00:57:54] <Aszarsha> dbaupp: thanks for the tip :)
[00:58:26] <strcat> so
[00:58:32] *** Joins: tjc (tjc@moz-9E9433BA.tmodns.net)
[00:58:32] *** ChanServ sets mode: +o tjc
[00:58:36] <strcat> rusti: struct Foo { x: int } Foo { x: 5 }
[00:58:37] -rusti- {x: 5}
[00:58:47] <strcat> could make that print as Foo{x: 5}
[00:58:52] <myname> how are map/take adaptors?
[00:58:52] <strcat> easily
[00:59:02] <strcat> myname: they are lazy
[00:59:03] <kimundi> strcat: would be nice :)
[00:59:13] <myname> oh :O
[00:59:18] <Aszarsha> so if i have a non generic function taking a range (is that even possible ?), it can't take in range.invert() ?
[00:59:21] <myname> didn't know rust can do that
[00:59:34] <strcat> Aszarsha: you wouldn't write one that way
[00:59:37] <engla> Aszarsha: that's right
[00:59:39] <strcat> you'd write a function taking an iterator
[00:59:46] <myname> so it is possible to write lazy functions oneselfe?
[00:59:48] <strcat> and then the caller can supply any kind of iterator
[00:59:55] <dbaupp> Aszarsha: you'd write `foo<It: Iterator<uint>>(iter: It)`
[01:00:13] <strcat> myname: it doesn't use compiler support for laziness
[01:00:23] <myname> strcat: what does it do?
[01:00:24] <strcat> myname: iterators are objects with a next() method
[01:00:31] <dbaupp> myname: easily; iterators are entirely defined in libstd
[01:00:48] <strcat> map, take, skip, take_while, skip_while, filter, filter_map, invert, etc. all return another iterator
[01:01:02] *** Joins: heftig (heftig@moz-84F5B0FB.dip0.t-ipconnect.de)
[01:01:04] <Aszarsha> but if i really (pretty please :-)) want a range for whatever reason (like taking a range, returning one, for chained call), i cant ?
[01:01:09] <myname> i see
[01:01:17] <myname> makes sense
[01:01:30] <strcat> Aszarsha: they're different types, so no, but you can still take a generic iterator and return it
[01:01:54] <strcat> rusti: fn foo<A, T: Iterator<A>>(x: T) -> T { x }
[01:01:55] -rusti- ()
[01:02:24] <strcat> rusti: fn foo<A, T: Iterator<A>>(mut xs: T) -> T { for x in xs { print!("{}", x) } foo(range(1, 3))
[01:02:24] -rusti- <anon>:8:0: 8:1 error: file ended with unbalanced delimiters
[01:02:24] -rusti- <anon>:8 }
[01:02:24] -rusti-          ^
[01:02:24] -rusti- application terminated with error code 101
[01:02:29] <strcat> rusti: fn foo<A, T: Iterator<A>>(mut xs: T) -> T { for x in xs { print!("{}", x) } } foo(range(1, 3))
[01:02:31] -rusti- pastebinned 11 lines of output: http://ix.io/7HW
[01:02:39] <strcat> rusti: fn foo<A, T: Iterator<A>>(mut xs: T) -> T { for x in xs { print!("{}", x) } } foo(range(1, 3));
[01:02:41] -rusti- pastebinned 11 lines of output: http://ix.io/7HX
[01:02:43] <strcat> oops
[01:02:48] <strcat> rusti: fn foo<A, T: Iterator<A>>(mut xs: T) { for x in xs { print!("{}", x) } } foo(range(1, 3));
[01:02:56] -rusti- pastebinned 8 lines of output: http://ix.io/7HY
[01:03:02] * strcat sighs
[01:03:10] <strcat> rusti: fn foo<T: Iterator<int>>(mut xs: T) { for x in xs { print!("{}", x) } } foo(range(1, 3));
[01:03:11] -rusti- 12()
[01:03:15] <kimundi> Aszarsha: If you want to return something chaned, it would look like this: fn foo<A, T: Iterator<A>>(x: T) -> MapIterator<T> { x.map(...) }
[01:03:24] <engla> Aszarsha: a function can adapt a generic iterator.  https://github.com/mozilla/rust/blob/master/src/libstd/either.rs#L125
[01:03:38] <kimundi> That is, you have to reflect the chaining that's happening in the return type
[01:03:38] <Aszarsha> range are different than iterator (even if the two have a large overlap). can't there be the two ?
[01:03:56] <emartin> anyone know anything about incrementally compiling? do i need to spend 30 min compiling rust every time there is a change?
[01:04:00] <strcat> Aszarsha: don't know what you mean by different
[01:04:02] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[01:04:06] <kimundi> A range is a DoubleEnded Iterator in rust
[01:04:16] <strcat> range, range_inclusive and count are implementations of Iterator
[01:04:41] <kimundi> emartin: For now, yes
[01:04:48] <strcat> if you do range(0, 3), you have an iterator, and range(0, 3).map(|x| x * 2) is another iterator
[01:04:49] <dbaupp> emartin: it depends: if you're just editing std/extra you can run `make check-stage2-std NO_REBUILD=1`
[01:04:57] *** Joins: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net)
[01:05:04] <strcat> rusti: range(0, 3).skip(1).to_owned_vec()
[01:05:05] -rusti- ~[1, 2]
[01:05:10] <dbaupp> emartin: you can also just use a (recent) rustc and run `rustc std.rs`
[01:05:16] <strcat> rusti: range(0, 3).skip(1).skip(1)
[01:05:17] -rusti- {iter: {iter: {state: 0, stop: 3, one: 1}, n: 1}, n: 1}
[01:05:21] <strcat> rusti: range(0, 3).skip(1).skip(1).to_owned_vec()
[01:05:22] -rusti- ~[2]
[01:05:25] <myname> strcat: i'm starting to get the usefullness of iterator
[01:05:31] <emartin> dbuapp: thanks
[01:05:39] *** Quits: maik (maik___@moz-B08A740.dip0.t-ipconnect.de) (Ping timeout)
[01:05:45] <strcat> myname: they're a lazy stream with a bunch of common adaptors
[01:05:54] <strcat> it's where map, filter, fold and such are defined in rust
[01:06:02] <strcat> they work on *any* iterator, from their simple 4 line definitions
[01:06:09] <myname> they look like you could do stuff i liked in haskell
[01:06:39] <strcat> rusti: let xs = ["foo", "bar", "baz"]; range(4, 7).zip(xs.iter()).to_owned_vec()
[01:06:44] -rusti- pastebinned 16 lines of output: http://ix.io/7HZ
[01:06:57] <benh> iter1.zip(iter2)?
[01:07:01] <strcat> rusti: let xs = ["foo", "bar", "baz"]; printfln!("%?", range(4, 7).zip(xs.iter()).to_owned_vec())
[01:07:02] -rusti- ~[(4, &"foo"), (5, &"bar"), (6, &"baz")]
[01:07:02] -rusti- ()
[01:07:06] <benh> rather than zip(iter1, iter2)? i don't understand y'all
[01:07:20] <myname> is there some default way to provide an infinite iterator of something?
[01:07:25] <strcat> benh: you mean std::iterator::zip(iter1, iter2)
[01:07:34] <benh> probably!
[01:07:37] <dbaupp> i1.zip(i2).zip(i3) is nicer, than zip(i1, zip(i2, i3)), right?
[01:07:48] <kimundi> benh: People didn'T like (iter1, iter2).zip(), so an compromise has been made ;)
[01:07:50] <dbaupp> myname: repeat
[01:07:51] <Aszarsha> Well, some things cannot be represented with iterators over ranges (infinite range for example, with the range you can ask the size (with a 'value' for infinite) whereas with iterator you're in for a good loop) :)
[01:07:57] <myname> ah
[01:08:21] <benh> dbaupp: is that really equivalent?
[01:08:22] <myname> and something like map but with respect to the previous element?
[01:08:25] <dbaupp> myname: specifically: std::iterator::Repeat::new(thing)
[01:08:32] <strcat> Aszarsha: iterators can know how big they are
[01:08:37] <strcat> rusti: range(5, 10).size_hint()
[01:08:37] -rusti- (0, None)
[01:08:38] <kimundi> myname: fold
[01:08:44] <strcat> er I guess that didn't land yet
[01:08:45] <benh> heh
[01:08:51] <myname> kimundi: but fold does not return an iterator
[01:08:56] <engla> dbaupp: Repeat is double-ended but infinite regardless of end you take from :)
[01:09:00] <dbaupp> benh: I might've nested it incorrectly (i.e. (x,(y,z)) vs ((x,y),z)), but other than that, yes
[01:09:02] <strcat> myname: you can do what you want with state in your closure
[01:09:05] <benh> rusti: [1, 2, 3].iter().size_hint()
[01:09:08] -rusti- pastebinned 11 lines of output: http://ix.io/7I0
[01:09:21] <kimundi> myname: right, I guess I don'T understand what you meant :)
[01:09:23] <dbaupp> engla: but it has neither end :P
[01:09:23] <strcat> myname: you can't implement a generic map method holding onto the previous element without bounding it by A: Clone
[01:09:25] <benh> boo
[01:09:28] <benh> rusti: let v = [1, 2, 3]; v.iter().size_hint()
[01:09:29] -rusti- (3, Some(3))
[01:09:39] <strcat> rusti: let v = [1, 2, 3]; v.iter().skip(1).size_hint()
[01:09:40] -rusti- (2, Some(2))
[01:09:44] <strcat> rusti: let v = [1, 2, 3]; v.iter().skip(1).map(|x| x * 2).size_hint()
[01:09:45] -rusti- (2, Some(2))
[01:09:46] <myname> i'm just fiddling around if you can do something like haskells map fst $ iterate (\(a,b) -> (b,a+b)) (0,1)
[01:09:50] <strcat> rusti: let v = [1, 2, 3]; v.iter().skip(1).map(|x| x * 2).take(1).size_hint()
[01:09:51] -rusti- (1, Some(1))
[01:09:58] <benh> why is it giving me the hint twice?
[01:10:00] <strcat> rusti: let v = [1, 2, 3, 4, 5]; v.iter().skip(1).map(|x| x * 2).take(3).size_hint()
[01:10:00] -rusti- (3, Some(3))
[01:10:04] <strcat> benh: lower and upper bound
[01:10:19] <engla> myname: unfoldr in std::iterate can do that
[01:10:31] <myname> ah
[01:10:33] <strcat> rusti: let v = [1, 2, 3, 4, 5]; v.iter().skip(1).map(|x| x * 2).filter(|x| *x < 2).size_hint()
[01:10:34] -rusti- (0, Some(4))
[01:10:36] <benh> so why once in Option?
[01:10:42] <strcat> benh: upper bound
[01:10:42] <benh> for potentially infinite?
[01:10:46] <myname> i'm going to like that
[01:10:49] <strcat> benh: no, it might not know the upper bound
[01:10:58] <strcat> one case is if it's infinite
[01:11:10] <strcat> if you don't know a lower bound, you can say 0 is the lower bound
[01:11:17] <strcat> no need for Option there
[01:11:28] <benh> right
[01:11:29] <Aszarsha> rusti: range(0, 3)
[01:11:30] -rusti- {state: 0, stop: 3, one: 1}
[01:11:34] <Aszarsha> rusti: range(0, 3).iter()
[01:11:34] -rusti- <anon>:5:9: 6:5 error: type `std::iterator::Range<int>` does not implement any method in scope named `iter`
[01:11:35] -rusti- <anon>:5          range(0, 3).iter()
[01:11:35] -rusti- <anon>:6     };
[01:11:35] -rusti- error: aborting due to previous error
[01:11:35] -rusti- application terminated with error code 101
[01:11:41] <strcat> Aszarsha: it's already an iterator
[01:11:48] <Aszarsha> rusti: range(0, 3).next()
[01:11:48] -rusti- Some(0)
[01:11:52] <strcat> vectors aren't iterators, they're something you can get an iterator over
[01:12:23] <strcat> rusti: range(0, 3).next_back()
[01:12:24] -rusti- Some(2)
[01:12:36] <strcat> rusti: range(0, 3).take(1)
[01:12:37] -rusti- {iter: {state: 0, stop: 3, one: 1}, n: 1}
[01:12:59] <Aszarsha> strcat: ha, that's what i was looking for
[01:13:09] <strcat> rusti: let mut it = range(0, 3).take(2); it.next(); it
[01:13:10] -rusti- {iter: {state: 1, stop: 3, one: 1}, n: 1}
[01:13:17] <strcat> rusti: let mut it = range(0, 3).take(2); it.next(); it.next(); it
[01:13:17] -rusti- {iter: {state: 2, stop: 3, one: 1}, n: 0}
[01:13:25] <strcat> rusti: let mut it = range(0, 3).take(2); it.next(); it.next(); it.next()
[01:13:26] -rusti- None
[01:13:34] *** Quits: tjc (tjc@moz-9E9433BA.tmodns.net) (Quit: zzzzzzzzzz)
[01:13:41] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[01:13:44] <dbaupp> myname: std::iterator::Unfoldr::new((0,1), |&mut (ref mut a, ref mut b)| { let tmp = *b; *b += *a; *a = tmp; tmp }).take(10).to_owned_vec()
[01:13:56] <dbaupp> rusti: std::iterator::Unfoldr::new((0,1), |&mut (ref mut a, ref mut b)| { let tmp = *b; *b += *a; *a = tmp; tmp }).take(10).to_owned_vec()
[01:13:56] -rusti- <anon>:5:45: 5:46 error: found `mut` in ident position
[01:13:56] -rusti- <anon>:5          std::iterator::Unfoldr::new((0,1), |&mut (ref mut a, ref mut b)| { let tmp = *b; *b += *a; *a = tmp; tmp }).take(10).to_owned_vec()
[01:13:57] -rusti-                                                       ^
[01:13:57] -rusti- error: aborting due to previous error
[01:13:57] -rusti- application terminated with error code 101
[01:14:02] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[01:14:03] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[01:14:03] <dbaupp> myname: (sorry, you're not rusti :P )
[01:14:14] <dbaupp> rusti: std::iterator::Unfoldr::new((0,1), |&(ref mut a, ref mut b)| { let tmp = *b; *b += *a; *a = tmp; tmp }).take(10).to_owned_vec()
[01:14:17] -rusti- pastebinned 7 lines of output: http://ix.io/7I3
[01:14:31] <dbaupp> rusti: std::iterator::Unfoldr::new((0,1), |&(ref mut a, ref mut b)| { let tmp = *b; *b += *a; *a = tmp; Some(tmp) }).take(10).to_owned_vec()
[01:14:32] -rusti- ~[1, 1, 2, 3, 5, 8, 13, 21, 34, 55]
[01:15:12] <myname> that confuses me a bit
[01:15:19] <engla> let mut it = std::iterator::Unfoldr::new((1,1), |t| { let &(a, b) = t; *t = (b, a+ b); Some(a)}).take(10); it.to_owned_vec()
[01:15:47] <dbaupp> rusti: let mut it = std::iterator::Unfoldr::new((1,1), |t| { let &(a, b) = t; *t = (b, a+ b); Some(a)}).take(10); it.to_owned_vec()
[01:15:47] -rusti- ~[1, 1, 2, 3, 5, 8, 13, 21, 34, 55]
[01:15:50] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[01:15:55] <myname> oh, nevermind, i got it
[01:16:03] * dbaupp likes engla's one more
[01:16:11] <engla> I was working but you were quicker dbaupp :)
[01:17:25] <strcat> rusti: range(0, 2).cycle().take(20).to_owned_vec()
[01:17:26] -rusti- ~[0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1]
[01:18:34] <myname> there is a zip_with?
[01:18:42] <strcat> myname: not atm
[01:18:48] <myname> oh
[01:19:38] <myname> i'd love something like range(0,2).cycle().zip_with(range(1,n), |a,b| { a * b })
[01:19:54] <strcat> you could chain zip + map
[01:20:04] *** Joins: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com)
[01:20:12] <benh> I'm vaguely concerned that everything is suddenly a method just because it's postfix and "chains" better
[01:20:13] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[01:20:17] <strcat> rusti: range(0, 2).cycle().zip(range(0, 10)).map(|(a, b)| a * b).take(5).to_owned_vec()
[01:20:17] <dbaupp> rusti: range(0,2).cycle().zip(range(1,10)).map(|(a,b)| a * b).to_owned_vec()
[01:20:19] -rusti- ~[0, 1, 0, 3, 0]
[01:20:19] -rusti- ~[0, 2, 0, 4, 0, 6, 0, 8, 0]
[01:20:22] <strcat> heh
[01:20:25] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[01:20:29] <benh> why not abolish prefix, function-style f(x) invocation entirely then!
[01:20:46] <dbaupp> benh: there can be free standing wrappers for the methods
[01:20:46] <strcat> well range could be upto, like ruby ;p
[01:20:54] <benh> 42.to_str().println() etc!
[01:20:59] <strcat> dbaupp: but what's the value in that?
[01:21:09] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[01:21:14] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[01:21:33] <benh> <int>::size_of() is next, i tell you!
[01:21:44] *** Quits: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com) (Ping timeout)
[01:21:47] <dbaupp> strcat: to satisfy benh hatred of methods :P
[01:21:51] <strcat> benh: size_of will become a static method on Sized ;p
[01:22:09] <engla> chaining methods is a better form of composition than just listing statements and using temporaries
[01:22:25] <Aszarsha> Compiling on windows, i get http://pastebin.com/zQwqqFef
[01:22:28] <benh> oh good, so I'll have to write out that use impl thing with a dummy name to say sizeof :D 
[01:22:35] <strcat> benh: if DST lands, not every type will have a size
[01:22:58] <engla> what happens to &str with DST?
[01:23:06] <engla> or I guess &[T]
[01:23:24] <strcat> I think they'd stay the same
[01:23:27] <strcat> as they are now
[01:23:31] <engla> oh ok
[01:24:18] <Aszarsha> 'method' style invocation is much better tooling wise for completion
[01:24:35] *** kimundi is now known as zz_kimundi
[01:25:02] <benh> I have this completely unjustifiable intuition that we ought to express some sort of distinction with the choice of method-style versus function-style
[01:25:06] <benh> I just have no idea what that might be
[01:25:36] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[01:25:36] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/SfdMBg
[01:25:36] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[01:25:39] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[01:26:38] <strcat> benh: the iterator module defines what an iterator is along with providing the adaptors, so it makes sense for them to be methods
[01:27:12] <dbaupp> benh: there's a plan/proposal for unified call syntax too, btw. So (I think), x.foo() can become Foo::foo(x) (if foo is from the Foo trait)
[01:27:13] <benh> because the adaptors come from the same module as the type they're methods on?
[01:27:15] <strcat> it wouldn't be right for it to define extension methods like "upto" on generic types
[01:27:22] <strcat> benh: the same trait
[01:27:31] <strcat> although some are in other traits
[01:27:51] <strcat> if they need more than just Iterator<A> where A isn't bounded
[01:28:07] <benh> (I still think x.add(y) is really weird, like, &5i + 5i compiles but 5i + &5i doesn't, ugh!, + commutes!)
[01:28:11] *** Quits: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com) (User has been banned from Mozilla (no spamming here))
[01:28:11] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (User has been banned from Mozilla (no spamming here))
[01:28:11] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (User has been banned from Mozilla (no spamming here))
[01:28:11] *** Quits: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com) (User has been banned from Mozilla (no spamming here))
[01:28:11] *** Quits: sstangl (sstangl@moz-DB4A9C19.scl3.mozilla.com) (User has been banned from Mozilla (no spamming here))
[01:28:11] *** Quits: rhelmer (rhelmer@moz-DB4A9C19.scl3.mozilla.com) (User has been banned from Mozilla (no spamming here))
[01:28:26] <strcat> uh, what?
[01:28:34] *** Quits: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net) (Quit: Leaving.)
[01:28:56] <dbaupp> rusti: &5i + 5i
[01:28:56] -rusti- 10
[01:29:03] <strcat> since when does that work?
[01:29:09] <joelteon> rusti: 5i + &5i
[01:29:09] -rusti- <anon>:5:14: 5:17 error: mismatched types: expected `int` but found `&int` (expected int but found &-ptr)
[01:29:10] -rusti- <anon>:5          5i + &5i
[01:29:10] -rusti-                        ^~~
[01:29:10] -rusti- error: aborting due to previous error
[01:29:10] -rusti- application terminated with error code 101
[01:29:13] <dbaupp> desugaring + & auto-deref 
[01:29:33] <strcat> dbaupp: no, it's auto-ref
[01:29:38] <strcat> :s
[01:29:47] <strcat> is Add defined on &T? 
[01:29:49] <benh> Isn't it auto-ref being optional?
[01:29:50] *** Joins: fread2282 (Mibbit@EB90049E.B619C58A.8F2EC2E7.IP)
[01:29:59] <benh> "oh, it's already a &, don't need to auto-ref"
[01:30:02] * strcat shrugw
[01:30:06] <strcat> dbaupp: oh nvm auto-deref
[01:30:13] <strcat> I see what you mean now.
[01:30:15] <Aszarsha> auto-ref and auto-deref are weird and complicate the language. minimal C-like rules would be nicer IM(very)HO :)
[01:30:20] <fread2282> I can't access priv fields from non-default impls :(
[01:30:28] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[01:30:35] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[01:30:35] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/lfl9Kg
[01:30:35] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[01:30:37] <strcat> fread2282: you can't access priv fields from outside a module
[01:30:38] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[01:30:38] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/lqXjtQ
[01:30:38] <ghrust> 13rust/06auto 14ba101d2 15Michael Woerister: debuginfo: Support for variables captured in closures and closure type descriptions.
[01:30:38] <ghrust> 13rust/06auto 145e040e9 15Michael Woerister: debuginfo: Support for by-value arguments (still excluding some cases of self arguments)
[01:30:38] <ghrust> 13rust/06auto 14dde633e 15Michael Woerister: debuginfo: Added test cases for structs, tuples, enums, etc passed by value....
[01:30:40] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[01:30:42] <strcat> you can definitely access them in an impl
[01:30:43] <engla> Add and other operators taking &T makes it less useful to overload (for example to take by value, for ~[T])
[01:30:45] <benh> rusti: &5i == 5i // doesn't work though
[01:30:46] -rusti- <anon>:5:16: 5:18 error: mismatched types: expected `&int` but found `int` (expected &-ptr but found int)
[01:30:46] -rusti- <anon>:5          &5i == 5i // doesn't work though
[01:30:46] -rusti-                          ^~
[01:30:46] -rusti- error: aborting due to previous error
[01:30:46] -rusti- application terminated with error code 101
[01:30:48] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[01:30:56] <fread2282> strcat: oh. still :(
[01:31:05] <strcat> that's the definition of priv
[01:31:07] <benh> asymmetries abound!
[01:31:31] <strcat> you can define a trait and impl it for any type, it can't strip away privacy
[01:32:36] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[01:33:05] <fread2282> so why is extra::term::Terminal.{ti,out} priv?
[01:33:08] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[01:33:08] *** ChanServ sets mode: +ao dherman dherman
[01:33:33] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[01:33:55] <strcat> fread2282: I guess because it's an implementation detail and may change at any time
[01:34:03] <strcat> just not part of the public API
[01:34:53] <benh> rusti-the-repl is really weird
[01:34:53] <fread2282> strcat: right
[01:35:23] * fread2282 :( I was hoping to be able to work on/extend extra::term without recompiling extra
[01:35:23] <benh> if I enter &5i + 5i it prints out &5 + 5 in the error message
[01:35:29] <benh> where did my i's go? :(
[01:35:47] *** Joins: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP)
[01:35:59] <strcat> benh: that's probably just what it parses to
[01:36:04] <strcat> er, no
[01:36:10] <fread2282> so I am working on/want to add to extra::term, should I just do it and make a PR?
[01:36:10] <strcat> but it's definitely the repr of an int
[01:36:32] <benh> &5u + 5u compiles though :(
[01:37:14] <benh> meh
[01:37:23] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Client exited)
[01:37:25] <benh> It's not like it doesn't segfault whatever I enter anyway
[01:38:02] *** Joins: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com)
[01:38:21] <benh> Sorry for being so negative, I should probably call it a night.
[01:38:25] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:38:25] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:38:26] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:38:26] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:38:55] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:38:55] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:38:56] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:38:56] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:39:18] *** Quits: dew1 (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com) (Ping timeout)
[01:39:25] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:39:25] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:39:26] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:39:26] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:39:55] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:39:55] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:39:56] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:39:56] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:40:25] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:40:25] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:40:26] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:40:26] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:40:39] <strcat> stupid irc
[01:40:55] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:40:55] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:40:57] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:40:57] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:41:26] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:41:26] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:41:27] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:41:27] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:41:56] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:41:56] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:41:57] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:41:57] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:42:26] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:42:26] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:42:27] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:42:27] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:42:56] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:42:56] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:42:57] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:42:57] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:43:26] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:43:26] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:43:27] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:43:27] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:43:44] <Aszarsha>  &5i + 5i generate multiple lines long error regarding "multiple applicable methods in scope", &5u + 5u segfaults. :-P
[01:43:56] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:43:56] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:43:57] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:43:57] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:44:15] <klutzy> rusti: &5i + 5i
[01:44:15] -rusti- 10
[01:44:27] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:44:27] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:44:27] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:44:27] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:44:30] <klutzy> hmm?
[01:44:57] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:44:57] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:44:58] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:44:58] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:45:00] <Aszarsha> I run 8002a09
[01:45:00] <benh> in the commandlin rusti repl, not rusti the bot
[01:45:27] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:45:27] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:45:28] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:45:28] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:45:28] <benh> but the repl crashes for every input that actually compiles for me
[01:45:45] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[01:45:50] <Aszarsha> yep, for me too
[01:45:57] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:45:57] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:45:58] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:45:58] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:46:02] <fread2282> can I tell make to just rebuild extra?
[01:46:12] *** Joins: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au)
[01:46:24] <klutzy> oh, right. this is interesting..
[01:46:27] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:46:27] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:46:28] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:46:28] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:46:33] <strcat> fread2282: it will still build libstd if it was modified since last time because extra depends on it
[01:46:43] <dbaupp> fread2282: `make check-stage2-extra NO_REBUILD=1`
[01:46:44] *** Joins: mib_5e8l9i (Mibbit@E329B174.366ACFAA.7BA1798C.IP)
[01:46:46] <klutzy> "multiple applicable methos in scope" is at `println(fmt!("%s", c.toString()));`, not my code.
[01:46:50] <strcat> and then it will still self-host the other stages
[01:46:57] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:46:57] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:46:59] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:46:59] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:47:19] <klutzy> maybe parser detected something wrong and tried to print it, but fmt got other issue then ICEd
[01:47:28] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:47:28] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:47:29] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:47:29] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:47:58] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:47:58] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:47:59] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:47:59] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:48:18] <Aszarsha> is there any plan to move from configure script (to build (easily) with msvc for example) ?
[01:48:28] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:48:28] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:48:29] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:48:29] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:48:29] <dbaupp> Aszarsha: there's a plan to move to rustpkg
[01:48:45] * dbaupp thinks something strange has happened at one of the moz offices
[01:48:47] <Eridius> Yoric seems to be having a bit of a problem
[01:48:58] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:48:58] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:48:59] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:48:59] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:49:02] <Eridius> IIRC this happened a month or so ago as well. I wonder what's going on?
[01:49:22] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[01:49:28] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:49:28] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:49:29] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:49:29] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:49:58] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:49:58] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:50:00] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:50:00] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:50:28] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:50:28] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:50:30] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:50:30] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:50:40] <klutzy> ah, i built wrong code
[01:50:59] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:50:59] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:51:00] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:51:00] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:51:15] <strcat> acrichto: so llvm-args lets you pass an inline threshold?
[01:51:29] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:51:29] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:51:30] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:51:30] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:51:30] <acrichto> strcat: yes
[01:51:46] <acrichto> strcat: http://llvm.org/docs/doxygen/html/Inliner_8cpp_source.html top of the file
[01:51:59] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:51:59] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:52:00] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:52:00] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:52:29] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:52:29] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:52:30] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:52:30] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:52:39] <strcat> acrichto: hm, is before actually *before the pass changes landed*?
[01:52:47] <acrichto> yes
[01:52:51] <acrichto> stage0 is very old now
[01:52:59] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:52:59] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:53:00] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:53:00] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:53:29] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:53:29] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:53:30] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:53:30] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:53:33] <strcat> hm, I totally forget how to get the name of a struct from the ty
[01:53:36] * strcat pokes around ty.rs
[01:53:51] <strcat> or maybe you have to look up to def id?
[01:53:57] <benh> Does anyone feel like &5i + 5i working is a bug?
[01:53:59] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:53:59] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:54:00] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:54:00] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:54:01] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten)
[01:54:13] <strcat> benh: if it works, it should work for Eq too
[01:54:15] <strcat> so yes
[01:54:20] <strcat> should be consistent
[01:54:29] <strcat> either not work for both, or work for both ;p
[01:54:30] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:54:30] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:54:31] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:54:31] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:54:36] <benh> well, Add is apparently geared to have differently typed operands
[01:54:47] <benh> probably for string+char or things like that
[01:55:00] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:55:00] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:55:01] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:55:01] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:55:20] <benh> trait Add<RHS,Result> vs just trait Eq
[01:55:30] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:55:30] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:55:31] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:55:31] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:56:00] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[01:56:00] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:56:01] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:56:01] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:56:23] <strcat> rusti: struct Foo { x: 2 } Foo {x : 2 , y: 5 }
[01:56:24] -rusti- <anon>:5:25: 5:26 error: expected type, found token LIT_INT_UNSUFFIXED(2)
[01:56:24] -rusti- <anon>:5          struct Foo { x: 2 } Foo {x : 2 , y: 5 }
[01:56:24] -rusti-                                   ^
[01:56:24] -rusti- application terminated with error code 101
[01:56:27] <strcat> wat
[01:56:31] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:56:31] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:56:36] <strcat> rusti: struct Foo { x: int } Foo {x : 2 , y: 5 }
[01:56:37] -rusti- <anon>:5:44: 5:48 error: structure has no field named `y`
[01:56:37] -rusti- <anon>:5          struct Foo { x: int } Foo {x : 2 , y: 5 }
[01:56:37] -rusti-                                                      ^~~~
[01:56:37] -rusti- error: aborting due to previous error
[01:56:37] -rusti- application terminated with error code 101
[01:56:59] <strcat> there must be a convenient way to retrieve a struct name...
[01:57:01] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:57:01] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:57:32] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:57:32] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:57:40] * strcat doesn't want to deal with the whole def id path dance
[01:58:02] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:58:02] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:58:18] <emartin> i'm trying to remove unnecessary "ne" methods in Eq impl's. should i remove inlined "ne" methods when the default isn't inlined?
[01:58:32] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:58:32] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:58:53] <strcat> emartin: we should have #[inline] on the Eq default method for ne, so yes
[01:59:02] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:59:02] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[01:59:06] <strcat> (but add the #[inline] with the set of commits doing that)
[01:59:18] <emartin> ok, got it
[01:59:32] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[01:59:32] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[02:00:02] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[02:00:02] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[02:00:32] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[02:00:32] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[02:01:03] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[02:01:03] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[02:01:29] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[02:01:33] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[02:01:33] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[02:01:38] *** Quits: mib_5e8l9i (Mibbit@E329B174.366ACFAA.7BA1798C.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:01:58] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[02:02:03] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[02:02:03] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[02:02:16] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Quit: Leaving)
[02:02:33] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[02:02:33] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[02:03:03] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[02:03:03] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[02:03:58] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[02:03:58] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[02:04:28] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[02:04:28] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[02:04:36] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[02:04:58] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[02:04:58] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[02:05:28] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[02:05:28] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[02:05:28] <emartin> strcat: I've made changes to several files in libstd and 2 in librustpkg. i've ran 'make check-stage2-std NO_REBUILD=1' and all tests pass (but some tasks fail)
[02:05:58] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[02:05:58] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[02:06:02] <emartin> is there any other way i should test this or can i open a pull request? i've never contributed to rust before
[02:06:28] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[02:06:28] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[02:06:39] <dbaupp> emartin: you could run `make check` (but feel free to open a pull request now, and adjust it if make check fails anywhere)
[02:06:52] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[02:06:52] *** ChanServ sets mode: +o jdm
[02:06:58] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[02:06:58] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[02:07:28] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[02:07:45] *** AutomatedTester|AFK is now known as AutomatedTester
[02:09:34] <strcat> emartin: some tests are actually testing for failure
[02:09:44] <strcat> so seeing failures is expected, as long as the tests say they passed
[02:10:19] <strcat> emartin: but yeah, open a pull request
[02:10:28] <strcat> all pull requests are tested by the CI bot before it merges them
[02:10:40] <strcat> we just review PRs, the merging part is automated
[02:10:59] *** Joins: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP)
[02:11:11] <strcat> (so not much to worry about)
[02:12:05] <steven_is_false> What do the people here think of this http://lambda-the-ultimate.org/node/4806 ? I'm guessing there's some problem I'm overlooking which would make it still cause problems with concurrency. Still, it'd be really awesome to have Arc<Arc<Arc<etc... safely.
[02:12:09] <Aszarsha> you are very lucky to have a ci bot ! :)
[02:12:49] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[02:15:32] <emartin> strcat, dbaupp: https://github.com/mozilla/rust/pull/8896
[02:15:47] <strcat> emartin: left a comment with 1 change to make
[02:17:11] <emartin> thanks strcat. i might add some tests for NaN (in a separate PR)
[02:18:04] <strcat> hm
[02:18:28] <strcat> actually I might be wrong about this mattering for NaN based on the definition of the default method
[02:18:36] * strcat hates floats
[02:19:46] <strcat> rusti: 0.0 / 0.0
[02:19:47] -rusti- NaN
[02:20:01] <strcat> rusti: let nan = 0.0 / 0.0; nan == nan
[02:20:02] -rusti- false
[02:20:04] <strcat> rusti: let nan = 0.0 / 0.0; nan != nan
[02:20:05] -rusti- true
[02:20:35] *** Joins: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com)
[02:20:38] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[02:20:38] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1416024c5 to 1429449e3: 02http://git.io/N3iJvQ
[02:20:38] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[02:20:39] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[02:20:39] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/InLDjg
[02:20:39] <ghrust> 13rust/06auto 148d12673 15Alex Crichton: Tweak pass management and add some more options...
[02:20:39] <ghrust> 13rust/06auto 14206ad61 15bors: auto merge of #8894 : alexcrichton/rust/faster, r=thestinger...
[02:20:39] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[02:21:18] <emartin> strcat: that means it should work for NaN then right?
[02:21:22] <strcat> emartin: appears so
[02:21:29] <strcat> trying to think of a case where it wouldn't
[02:21:39] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[02:22:16] *** Quits: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com) (Ping timeout)
[02:23:02] <Aszarsha> rusti: 0f / 0f
[02:23:03] -rusti- NaN
[02:23:04] <emartin> well, the only special cases for floats are -inf, -0, 0, inf, and NaN
[02:23:24] <myname> "the only"
[02:23:41] <Aszarsha> "the only"... haha
[02:23:42] <emartin> floats aren't that bad guys :)
[02:23:55] * emartin has been doing numerical programming all summer
[02:23:58] <myname> also there are different types of NaN
[02:24:34] <myname> they may not be implemented in rust, but ieee floats do have them
[02:24:37] <emartin> they don't matter from an equality standpoint iirc, just for propagation, right?
[02:24:37] <Aszarsha> and then the density is a simple step function... Ho wait, you said denormal ?..
[02:24:46] <myname> emartin: yes
[02:25:31] <Aszarsha> i wish fixed-point was easy implemented in hardware too
[02:25:44] <strcat> emartin: okay just going to assume it's okay ;]
[02:26:07] <myname> it is, just multiply everything with 10^...
[02:26:24] <strcat> it's just with <, >, <=, >= that it's messed up due !(a < b) && !(b < a) not meaning a == b
[02:26:55] <strcat> although since NaN isn't equal to itself that's problematic elsewhere ;p
[02:27:00] <strcat> containers
[02:27:04] <myname> strcat: which is totally right in a mathematical point of view
[02:27:46] <strcat> sure ;]
[02:28:10] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Quit: Ex-Chat)
[02:29:50] <Aszarsha> How does rust handle the stack ? Does it run on the C stack ?
[02:30:21] <Aszarsha> (i imagine not due to tasks)
[02:30:33] <dbaupp> Aszarsha: yes, it doesn't
[02:31:06] <strcat> well right now it essentially does
[02:31:14] <Aszarsha> where should i look in the code ?
[02:31:22] *** Quits: AutomatedTester (David@moz-DB4A9C19.scl3.mozilla.com) (User has been banned from Mozilla (no spamming here))
[02:31:26] <strcat> segmented stacks aren't implemented for the new scheduler/runtime yet
[02:31:55] <emartin> is the new runtime std::rt ?
[02:32:00] <dbaupp> isn't AutomatedTester a mozilla employee? o_O
[02:32:11] <Aszarsha> I could be interested to do a no-tasks C-stack (0 overhead C call -- yes, unsafe at some places) rust. :)
[02:32:19] <strcat> dbaupp: it banned niko too
[02:32:20] <dbaupp> emartin: yes
[02:32:21] <strcat> :s
[02:32:27] <dbaupp> strcat: oops
[02:32:44] <strcat> 21:28:11             <-- | nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com) has quit (User has been banned from Mozilla (no spamming here))
[02:32:51] <strcat> something wrong with it...
[02:32:52] <dbaupp> maybe there were having a very intense discussion somewhere
[02:32:56] <dbaupp> *they
[02:33:33] <dbaupp> Aszarsha: you can essentially get that using zero.rs + #[fixed_stack_segment] on main
[02:34:03] <Aszarsha> will look into that then, thank you :)
[02:34:48] <engla> does zero.rs have a home?
[02:35:14] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[02:36:05] <dbaupp> https://github.com/pcwalton/zero.rs is the original, except it's out of date
[02:36:18] <dbaupp> https://github.com/huonw/rust-malloc/blob/master/zero.rs is a "minimal"/modern one
[02:36:36] <engla> right
[02:36:39] <engla> thanks for that link
[02:37:00] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[02:37:08] *** Quits: kniteli (Mibbit@moz-F217D31A.hsd1.or.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:37:21] <myname> i'm still curious about rustboot
[02:38:51] <fread2282> engla: also use #[no_std] at the start of your main file
[02:39:16] *** Joins: tjc (tjc@moz-9E9433BA.tmodns.net)
[02:39:31] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[02:39:45] *** Joins: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net)
[02:39:54] <myname> i like the originalone better
[02:39:55] *** AutomatedTester|AFK is now known as AutomatedTester
[02:40:19] <dbaupp> myname: original what?
[02:40:24] <myname> zero.rs
[02:40:30] <dbaupp> why?
[02:41:17] <myname> it looks like you can write more normal rust code with it, but it may be wrong due to changes in the languages since then
[02:41:23] *** Joins: mib_9uybip (mib_9uybip@5DDA3D24.C60FE7DC.4065847B.IP)
[02:41:36] <dbaupp> compared to the minimal one, you mean?
[02:41:41] <myname> yes
[02:41:47] <strcat> the minimal one just means you have to define lang items as you use more of the language
[02:41:50] *** Joins: mib_9uyb_ (mib_9uybip@moz-9B8221B3.rivrw1.nsw.optusnet.com.au)
[02:41:58] <strcat> like if you use ~T, you'll need to define exchange_malloc and exchange_free
[02:42:10] <dbaupp> (it'll complain that it's missing a lang item if you use something that needs it)
[02:43:04] *** Quits: mib_9uybip (mib_9uybip@5DDA3D24.C60FE7DC.4065847B.IP) (Ping timeout)
[02:43:15] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:43:39] *** Quits: tjc (tjc@moz-9E9433BA.tmodns.net) (Quit: Places to go, people to annoy)
[02:43:45] <strcat> hm
[02:45:06] *** Quits: zz_kimundi (kimundi@moz-2D7CCC0A.dip0.t-ipconnect.de) (Ping timeout)
[02:46:05] <Aszarsha> pub fn abort() -> !;
[02:46:10] <Aszarsha> what does that mean ?
[02:46:19] <benh> means it doesn't return
[02:46:26] <Aszarsha> ! = does not return type ?
[02:46:46] <Aszarsha> benh: ok, thank you
[02:46:55] <benh> the idea is that the type system doesn't have to worry about matching the return type to anything
[02:47:02] <strcat> heh, ty_to_str does what I want after all
[02:47:03] * strcat sighs
[02:47:20] <Aszarsha> rusti: ty_to_str
[02:47:20] -rusti- <anon>:5:9: 5:18 error: unresolved name `ty_to_str`.
[02:47:21] -rusti- <anon>:5          ty_to_str
[02:47:21] -rusti-                   ^~~~~~~~~
[02:47:21] -rusti- error: aborting due to previous error
[02:47:21] -rusti- application terminated with error code 101
[02:47:26] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[02:47:53] <benh> rusti: unsafe { 42 + std::libc::abort() }
[02:47:56] -rusti- pastebinned 9 lines of output: http://ix.io/7I8
[02:48:11] *** Joins: zz_kimundi (kimundi@moz-9C96D30A.dip0.t-ipconnect.de)
[02:48:41] *** zz_kimundi is now known as kimundi
[02:48:47] <Aszarsha> benh: looks like it doesn't work ?
[02:48:57] <strcat> it did work
[02:49:05] <benh> I think that's just the integers :(
[02:49:08] <benh> rusti: unsafe { 42i + std::libc::abort() }
[02:49:11] -rusti- pastebinned 9 lines of output: http://ix.io/7I9
[02:49:12] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[02:49:16] <strcat> the compiler is complaining about the dead code from the wrapper rusti puts around it
[02:49:24] <benh> mh
[02:49:29] <benh> weird! :(
[02:49:41] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Input/output error)
[02:49:42] <benh> also would apparently need #[fixed_stack_segment] to abort
[02:49:49] <Aszarsha> strcat: "error: cannot determine a type for this local variable: unconstrained type" it complained about the type too
[02:50:01] <strcat> yes that's complaining about the type of 'let r'
[02:50:03] <strcat> afaict
[02:50:08] <Aszarsha> ha
[02:50:14] <benh> rusti: unsafe { "foo"[ std::libc::abort() ] }
[02:50:18] -rusti- pastebinned 9 lines of output: http://ix.io/7Ia
[02:50:28] <benh> oh well
[02:50:29] <Aszarsha> haha
[02:50:53] <Aszarsha> rusti: unsafe { "foo"[ std::libc::abort() ]; 0 }
[02:50:58] -rusti- pastebinned 12 lines of output: http://ix.io/7Ib
[02:51:30] <Aszarsha> isn't unsafe like any expression ?
[02:51:45] <strcat> yes
[02:51:53] <benh> rusti: #[fixed_stack_segment] fn f() { unsafe { "foo"[std::libc::abort()] } } f()
[02:51:54] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[02:52:14] <benh> Is that the right signal...?
[02:52:20] <strcat> no
[02:52:21] <Aszarsha> strcat: then unsafe { "foo"[ std::libc::abort() ]; 0 } should have type of 0, nope ?
[02:52:27] <strcat> abort is 6
[02:52:58] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[02:52:59] <strcat> rusti: #[fixed_stack_segment] fn f() { std::libc::abort() } f()
[02:53:00] -rusti- <anon>:5:41: 5:61 error: call to unsafe function requires unsafe function or block
[02:53:00] -rusti- <anon>:5          #[fixed_stack_segment] fn f() { std::libc::abort() } f()
[02:53:00] -rusti-                                                   ^~~~~~~~~~~~~~~~~~~~
[02:53:00] -rusti- error: aborting due to previous error
[02:53:00] -rusti- application terminated with error code 101
[02:53:07] <Aszarsha> rusti: std::libc::abort();
[02:53:07] <strcat> rusti: #[fixed_stack_segment] fn f() { unsafe { std::libc::abort() } } f()
[02:53:10] -rusti- pastebinned 9 lines of output: http://ix.io/7Id
[02:53:10] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[02:53:14] * strcat shrugs
[02:53:28] <benh> rusti: #[fixed_stack_segment] fn f() { } f()
[02:53:29] -rusti- ()
[02:53:46] <strcat> rusti: extern { fn raise(i: u32) -> u32; } unsafe { raise(6) }
[02:53:46] -rusti- <anon>:5:54: 5:59 error: invoking non-Rust fn in fn without #[fixed_stack_segment] [-D cstack (default)]
[02:53:47] -rusti- <anon>:5          extern { fn raise(i: u32) -> u32; } unsafe { raise(6) }
[02:53:47] -rusti-                                                                ^~~~~
[02:53:47] -rusti- error: aborting due to previous error
[02:53:47] -rusti- application terminated with error code 101
[02:54:27] <benh> rusti: #[fixed_stack_segment] fn f() { unsafe { std::libc::time(std::ptr::null()) } } f()
[02:54:27] -rusti- <anon>:5:50: 5:65 error: unresolved name `std::libc::time`.
[02:54:28] -rusti- <anon>:5          #[fixed_stack_segment] fn f() { unsafe { std::libc::time(std::ptr::null()) } } f()
[02:54:28] -rusti-                                                            ^~~~~~~~~~~~~~~
[02:54:28] -rusti- error: aborting due to previous error
[02:54:28] -rusti- application terminated with error code 101
[02:54:37] <strcat> rusti: extern { #[fixed_stack_segment] fn raise(i: u32) -> u32; } unsafe { raise(6) }
[02:54:38] -rusti- <anon>:5:77: 5:82 error: invoking non-Rust fn in fn without #[fixed_stack_segment] [-D cstack (default)]
[02:54:38] -rusti- <anon>:5          extern { #[fixed_stack_segment] fn raise(i: u32) -> u32; } unsafe { raise(6) }
[02:54:38] -rusti-                                                                                       ^~~~~
[02:54:38] <dbaupp> rusti: #[fixed_stack_segment] fn f() { extern { fn raise(i: u32) -> u32; } unsafe { raise(6) } } f()
[02:54:38] -rusti- error: aborting due to previous error
[02:54:40] -rusti- application terminated with error code 101
[02:54:41] -rusti- <anon>:5:77: 5:96 error: mismatched types: expected `()` but found `u32` (expected () but found u32)
[02:54:44] -rusti- <anon>:5          #[fixed_stack_segment] fn f() { extern { fn raise(i: u32) -> u32; } unsafe { raise(6) } } f()
[02:54:47] -rusti-                                                                                       ^~~~~~~~~~~~~~~~~~~
[02:54:50] -rusti- error: aborting due to previous error
[02:54:52] -rusti- application terminated with error code 101
[02:54:52] <dbaupp> rusti: #[fixed_stack_segment] fn f() { extern { fn raise(i: u32) -> u32; } unsafe { raise(6); } } f()
[02:54:53] -rusti- ()
[02:55:02] <benh> we aren't very good at this :)
[02:55:05] <strcat> rusti: #[fixed_stack_segment] fn f() { extern { fn raise(i: u32) -> u32; } unsafe { raise(11); } } f()
[02:55:06] -rusti- ()
[02:55:09] <strcat> rusti: #[fixed_stack_segment] fn f() { extern { fn raise(i: u32) -> u32; } unsafe { raise(9); } } f()
[02:55:09] -rusti- ()
[02:55:11] <strcat> oh
[02:55:16] <strcat> I don't think that syscall is whitelisted
[02:55:29] <strcat> rusti: #[fixed_stack_segment] fn f() -> u32 { extern { fn raise(i: u32) -> u32; } unsafe { raise(9) } } f()
[02:55:30] -rusti- 0
[02:56:46] <Aszarsha> Why can't I use the stdlib with zero.rs ?
[02:57:07] *** Joins: msingle (Thunderbir@moz-20675462.nrflva.fios.verizon.net)
[02:57:25] <strcat> because it defines those lang items and uses the runtime
[02:57:54] <strcat> zero.rs is an alternate libstd
[02:57:59] <Aszarsha> Well, the runtime could be statically linked with my binary ?
[02:58:10] *** Quits: msingle (Thunderbir@moz-20675462.nrflva.fios.verizon.net) (Quit: msingle)
[02:58:14] <strcat> so then you'd not be using zero.rs
[02:58:55] <strcat> zero.rs is a stub for when you don't have/want the runtime
[02:59:12] <dbaupp> Aszarsha: https://github.com/mozilla/rust/issues/7282 (and https://github.com/mozilla/rust/issues/3608)
[02:59:36] <Aszarsha> I don't know... I just want standalone binaries with zero-overhead C call :-)
[02:59:55] *** Joins: msingle (Thunderbir@moz-20675462.nrflva.fios.verizon.net)
[03:00:11] <Aszarsha> Actually, what i want could be called rust-with-C-runtime :)
[03:00:11] <strcat> so then you don't want libstd, as it is today
[03:01:34] <Aszarsha> (and i'm willing to provide some patches :))
[03:02:09] <emartin> anyone familiar with std::rt::local_heap? is the Env struct just for memory alignment with the C++ boxed_region struct?
[03:03:04] *** Quits: Earnestly (earnest@moz-F387F877.dyn.plus.net) (Ping timeout)
[03:04:08] *** Parts: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP) (ERC Version 5.3 (IRC client for Emacs))
[03:05:25] <dbaupp> emartin: it's weird; they appear to be different
[03:05:45] <dbaupp> bool poison_on_free vs env: *Env
[03:06:50] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[03:06:51] <emartin> yeah, is it just for alignment? I don't know why the author wouldn't have just used a int* or something
[03:07:48] <emartin> i'm looking at this issue: https://github.com/mozilla/rust/issues/8704
[03:08:19] <dbaupp> I don't know; but it seems unlikely that one would use an unsafe pointer to get the same alignment as a boolean.
[03:09:46] <strcat> maybe brson knows why
[03:09:48] <emartin> is it appropriate for me to comment on the github issue asking about this?
[03:11:02] <Aszarsha> well, time to sleep, thank you for your help everybody
[03:11:40] <dbaupp> emartin: entirely appropriate, yes
[03:12:28] <dbaupp> emartin: however brson may not see it, the core-devs get a lot of github-rust-notifications and so understandably miss some; so you should try to catch him on IRC sometime
[03:12:58] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:12:58] *** ChanServ sets mode: +ao dherman dherman
[03:14:59] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:17:31] <brson> emartin: that's pretty baffling, though I probably wrote it
[03:19:26] <brson> no idea what I was thinking
[03:20:08] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[03:20:21] <dbaupp> evidence that the whole stack should be written entirely in Rust :)
[03:20:26] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[03:20:42] <nrc> Is there somewhere I can look for a 'spec' for subtyping in Rust?
[03:20:50] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[03:20:57] *** Joins: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com)
[03:22:37] *** Quits: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com) (Ping timeout)
[03:22:57] <strcat> rusti: "foo".as_bytes()
[03:23:01] -rusti- &[102, 111, 111]
[03:23:08] <strcat> it's nice when a random guess at a method name is right
[03:23:38] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[03:23:42] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[03:23:47] <strcat> rusti: Some(5)
[03:23:47] -rusti- Some(5)
[03:23:52] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[03:24:07] <strcat> rusti: enum Foo { Bar { x: int } } Bar { x: 5 }
[03:24:08] -rusti- Bar(5)
[03:24:11] <strcat> heh
[03:24:15] <strcat> rusti: enum Foo { Bar { x: int } } Bar { x: 5, y: 10 }
[03:24:16] -rusti- <anon>:5:49: 5:54 error: structure has no field named `y`
[03:24:16] -rusti- <anon>:5          enum Foo { Bar { x: int } } Bar { x: 5, y: 10 }
[03:24:16] -rusti-                                                           ^~~~~
[03:24:16] -rusti- error: aborting due to previous error
[03:24:16] -rusti- application terminated with error code 101
[03:24:21] <strcat> rusti: enum Foo { Bar { x: int, y: int } } Bar { x: 5, y: 10 }
[03:24:21] -rusti- Bar(5, 10)
[03:24:27] <strcat> oh, you, repr
[03:24:35] <myname> what are you doing
[03:25:38] <strcat> making it print things in a slightly less stupid way
[03:25:39] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[03:25:39] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/InLDjg
[03:25:39] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[03:26:03] <strcat> I think this is my 3rd or 4th go at that ;p
[03:26:30] <engla> I noticed &[u8] now prints as  &[0u8, 1u8] etc, with u8 suffix
[03:27:01] * strcat did that
[03:27:11] <strcat> rusti: 32f32
[03:27:13] -rusti- 32
[03:27:15] <myname> rusti: enum Foo { Bar { x: int } } Bar { y: 5, x: 10 }
[03:27:16] -rusti- <anon>:5:43: 5:47 error: structure has no field named `y`
[03:27:17] -rusti- <anon>:5          enum Foo { Bar { x: int } } Bar { y: 5, x: 10 }
[03:27:17] -rusti-                                                     ^~~~
[03:27:17] -rusti- error: aborting due to previous error
[03:27:17] -rusti- application terminated with error code 101
[03:27:21] <strcat> oh right rusti isn't updated
[03:27:24] <strcat> rusti: 5u8
[03:27:25] -rusti- 5
[03:27:26] <myname> rusti: enum Foo { Bar { x: int, y: int } } Bar { y: 5, x: 10 }
[03:27:27] -rusti- Bar(10, 5)
[03:28:02] <strcat> rusti: 5u8
[03:28:03] -rusti- 5u8
[03:28:06] <strcat> there
[03:28:09] <strcat> rusti: 32f32
[03:28:10] -rusti- 32f32
[03:28:13] <strcat> rusti: @mut 5
[03:28:14] -rusti- @mut 5
[03:28:45] * strcat puts it back to auto-updating itself
[03:29:18] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:29:28] *** Joins: RMF (RMF@moz-9A206CFB.dsl.telepac.pt)
[03:30:14] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[03:30:37] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[03:30:37] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/QhiFpg
[03:30:37] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[03:30:39] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[03:30:39] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/SgZ94A
[03:30:39] <ghrust> 13rust/06auto 1431fa865 15David Creswick: drop some redundant Ord method implementations
[03:30:39] <ghrust> 13rust/06auto 14b9601c4 15David Creswick: partial revert of 31fa865...
[03:30:39] <ghrust> 13rust/06auto 145fe553d 15bors: auto merge of #8862 : dcrewi/rust/drop-redundant-ord-impls, r=thestinger...
[03:30:41] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[03:30:44] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:32:19] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[03:32:25] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:43:56] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[03:44:29] *** Quits: StarLight (StarLight@moz-982398AC.dynamic.avangarddsl.ru) (Ping timeout)
[03:47:06] <emartin> while creating a struct that has an unsafe pointer field, can I just do Foo{ unsafe_field: 0 } to set it to NULL?
[03:47:20] <emartin> i'm assuming this needs to be done in an unsafe block
[03:47:42] <strcat> use ptr::null()
[03:48:10] <strcat> it's safe to create pointers from integers - dereferencing is unsafe
[03:48:27] <strcat> you could also just cast 0 to the ptr type like ptr::null does internally
[03:48:49] <SiegeLord> What about using Option?
[03:49:29] <strcat> raw pointers are already nullable
[03:50:07] <SiegeLord> Well, for one, ptr::null() won't work in the static scope
[03:50:45] <emartin> strcat: This is actually for that issue i mentioned earlier (with the weird Env thing). If I'm moving C++ to Rust (that previously wrapped C++), should I try do things like use options rather than null pointers?
[03:51:08] <strcat> emartin: they aren't alternatives to each other - if it's a raw pointer, it can be null
[03:51:20] <strcat> if it's not a raw pointer, putting it in Option makes it nullable
[03:51:38] <strcat> it's better to do the latter, but if you already have a raw pointer, putting it in Option will just make it doubly nullable
[03:51:52] <strcat> and it will be twice as big
[03:52:20] <SiegeLord> Maybe raw pointers shouldn't be nullable
[03:52:31] <dbaupp> i.e. for a straight translation use *. for a fancy translation use Option<~T> or Option<&T> or whatever is appropriate
[03:52:39] <dbaupp> SiegeLord: then they wouldn't be raw
[03:53:13] <strcat> raw pointers exist because they represent plain old unsafe pointers
[03:53:33] <SiegeLord> Well, extern "C" function pointers are just as unsafe, and yet they are not nullable
[03:54:28] *** Quits: msingle (Thunderbir@moz-20675462.nrflva.fios.verizon.net) (Quit: msingle)
[03:55:04] <strcat> SiegeLord: extern "C" fn isn't regarded as unsafe
[03:55:15] <strcat> it must point at a valid function, forever
[03:55:16] <SiegeLord> Ok, extern unsafe "C"
[03:55:36] <SiegeLord> Err... extern "C" unsafe
[03:55:57] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[03:56:46] *** Joins: maik (maik___@moz-B08A740.dip0.t-ipconnect.de)
[04:00:46] *** Quits: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[04:02:41] *** Joins: Chef (Chef@moz-4C317041.dsl.teksavvy.com)
[04:04:53] *** Joins: StarLight (StarLight@moz-A1F19695.dynamic.avangarddsl.ru)
[04:07:36] *** Joins: animesh (Mibbit@94840D93.BB5E7C58.55B2D53A.IP)
[04:07:41] <SiegeLord> Anyway, it would seem to me that there's more to rawness than nullability... there's the escape from the type system, pointer arithmetic, etc
[04:08:12] <SiegeLord> It'd be... nice to annotate C functions with non-nullable raw pointers
[04:10:56] <Eridius> SiegeLord: why? C functions are unsafe. Just wrap them in a rust function that takes borrowed pointers
[04:10:59] *** Joins: xarcus (Mibbit@94840D93.BB5E7C58.55B2D53A.IP)
[04:11:02] *** Quits: xarcus (Mibbit@94840D93.BB5E7C58.55B2D53A.IP) (Quit: xarcus)
[04:11:18] <SiegeLord> Well, I guess the biggest issue is that 0 isn't the only NULL
[04:12:12] <SiegeLord> Eridius: Don't see why that argument doesn't apply to extern "C" unsafe functions then
[04:12:20] <strcat> what do you mean not the only null?
[04:12:26] <Eridius> SiegeLord: what do you mean?
[04:12:47] <strcat> extern "C" unsafe functions are extern "C" functions that are unsafe to call
[04:12:59] <strcat> they aren't implemented differently
[04:16:42] <SiegeLord> I recall reading something about NULL not always being 0
[04:17:02] <SiegeLord> Eridius: You can't have nullable extern "C" unsafe functions
[04:17:04] <strcat> that's just one the weird C virtual machine things
[04:17:12] <strcat> LLVM defines null as 0
[04:21:23] *** Joins: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com)
[04:22:02] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[04:22:22] <emartin> whats the purpose of the std::ops::Drop trait?
[04:22:33] *** Quits: spacetime (quassel@moz-CAB487E6.rishab.in) (Ping timeout)
[04:22:53] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[04:23:03] *** Quits: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com) (Ping timeout)
[04:23:21] *** Joins: spacetime (quassel@moz-CAB487E6.rishab.in)
[04:24:48] <dbaupp> emartin: it's how one defines a destructor (i.e. drop is called when the value goes out of scope)
[04:24:58] *** Joins: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net)
[04:25:01] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Quit: Leaving)
[04:31:05] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:33:24] <strcat> rusti: pub mod Foo { enum Bar { Baz } } Foo::Baz
[04:33:26] -rusti- <anon>:5:42: 5:50 error: unresolved name `Foo::Baz`.
[04:33:26] -rusti- <anon>:5          pub mod Foo { enum Bar { Baz } } Foo::Baz
[04:33:27] -rusti-                                                    ^~~~~~~~
[04:33:27] -rusti- error: aborting due to previous error
[04:33:27] -rusti- application terminated with error code 101
[04:33:30] <strcat> rusti: pub mod Foo { enum Bar { Baz } } self::Foo::Baz
[04:33:35] -rusti- pastebinned 11 lines of output: http://ix.io/7Ih
[04:33:47] <strcat> rusti: pub mod Foo { pub enum Bar { Baz } } Foo::Baz
[04:33:48] -rusti- Baz
[04:33:52] <emartin> dbaupp: thanks.
[04:34:00] *** Quits: maik (maik___@moz-B08A740.dip0.t-ipconnect.de) (Ping timeout)
[04:34:04] <strcat> rusti: pub mod Foo { pub enum Bar { Baz } } enum Bar { Baz } (Baz, Foo::Baz)
[04:34:04] -rusti- (Baz, Baz)
[04:34:06] <strcat> meh
[04:34:18] <strcat> rusti: struct Foo; [Foo, Foo]
[04:34:19] -rusti- []
[04:34:20] *** Joins: photex (photex@399640B9.24E301D6.9510F13D.IP)
[04:34:23] <strcat> wat
[04:34:32] <strcat> rusti: struct Foo; ~[Foo, Foo]
[04:34:33] -rusti- ~[{}, {}]
[04:34:35] <strcat> :s
[04:34:47] <strcat> rusti: [Foo, Foo][0]
[04:34:50] -rusti- pastebinned 8 lines of output: http://ix.io/7Ij
[04:35:01] <strcat> rusti: [()]
[04:35:02] -rusti- []
[04:35:04] <strcat> rusti: [()][0]
[04:35:04] -rusti- ()
[04:35:15] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:35:50] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[04:35:50] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/SgZ94A
[04:35:50] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[04:38:11] <dbaupp> strcat: nice
[04:39:22] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[04:40:34] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[04:40:34] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/YRwm3A
[04:40:34] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[04:40:35] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[04:40:35] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/M6NUrw
[04:40:35] <ghrust> 13rust/06auto 14babe20f 15Eric Martin: remove several 'ne' methods
[04:40:35] <ghrust> 13rust/06auto 14ed2217d 15Eric Martin: Now inline default 'ne' methods
[04:40:35] <ghrust> 13rust/06auto 141ab0dda 15Eric Martin: made Eq for package_id use more standard parameter names
[04:40:36] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[04:41:36] <dbaupp> strcat: for https://github.com/mozilla/rust/issues/8897, I assume you mean both should print `Foo::Baz`?
[04:41:45] <strcat> yes
[04:42:13] <strcat> I'll probably fix it
[04:42:50] <strcat> I'm getting tired of seeing the useless {} without a name especially
[04:42:52] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[04:42:53] <strcat> so that's fixed now.
[04:43:01] <strcat> need to just make it omit them for newtype structs
[04:43:09] <dbaupp> wooo! :)
[04:43:17] * dbaupp hates the missing struct names
[04:43:38] <strcat> it's an easy little fix but it's annoying since it breaks run-pass tests
[04:43:53] <strcat> we abuse %? a lot
[04:44:00] <strcat> luckily it's not the "default" with the new formatting.
[04:44:20] <strcat> it sure is nice for debugging though
[04:49:40] <dbaupp> yup
[04:50:37] <strcat> this point release of the kernel is really ridiculous
[04:50:51] <strcat> my touchpad *stops working when there's memory pressure*
[04:50:54] <strcat> has be toggled on/off
[04:50:56] <strcat> wat?
[04:51:09] * strcat blames intel
[04:52:28] <dbaupp> huh?
[04:52:50] <dbaupp> is the driver getting killed by the oom handler? (??)
[04:52:59] <strcat> no it's in kernelspace :s
[04:53:10] <strcat> I can't explain it
[04:53:16] <strcat> it seriously happens though ;p
[04:53:37] <dbaupp> the only solution is to port the kernel to Rust
[04:53:37] <strcat> luckily my computer doesn't really need a mouse at all to work... except when flash captures the keyboard
[04:53:38] <dbaupp> :P
[04:53:49] <strcat> and... vimperator has been broken-ish lately
[04:53:52] *** Joins: maik (maik___@moz-B08A740.dip0.t-ipconnect.de)
[04:54:12] <strcat> maybe I'll have to switch back to pentadactyl for another kind of brokenness
[04:54:24] <strcat> anyway the run-pass tests are good at disabling my touchpad
[04:54:29] <strcat> yay computers
[04:54:31] <strcat> ;p
[04:55:56] *** Quits: maik (maik___@moz-B08A740.dip0.t-ipconnect.de) (Ping timeout)
[04:56:26] <olsonjeffery> strcat: i used to be pretty hardcore into pentadactyl/vimperator
[04:56:30] <olsonjeffery> kinda just gave up on it
[04:57:00] <strcat> I need it because I use I *despise* the default UI for it
[04:57:12] <strcat> I need my keybinds and  search ;p
[04:57:12] <olsonjeffery> i really like vimkeys, and all.. but im kind of over that whole mindset of optimizing every single application through XTREME KEYBOARD workflow
[04:57:25] <olsonjeffery> i use evil-mode in emacs, for example
[04:57:39] <strcat> errr
[04:57:44] <strcat> some letters got eaten there
[04:58:03] <strcat> I need it because I use tab groups and I *despise* the default UI for it *
[04:58:30] <olsonjeffery> yeah tab groups are pretty cool, i couldn't into them though.
[04:58:36] <olsonjeffery> i use the tree-style tabs plugin now
[04:59:03] <strcat> I just use vimperators' pushtab/pulltab with bindings
[04:59:03] <doy> i use tab groups as a replacement for bookmarks
[04:59:06] <doy> it works pretty well
[04:59:08] <strcat> vimperator's*
[04:59:13] *** Quits: sully (sully@moz-45967CBE.emarhavil.com) (Ping timeout)
[04:59:24] *** Joins: sully (sully@moz-45967CBE.emarhavil.com)
[05:00:20] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[05:00:50] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[05:01:07] <strcat> so I have a working set of tabs and then push/pull to/from storage groups ;p
[05:01:39] <strcat> gets too complicated for my brain to handle if I actually switch groups
[05:01:51] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[05:02:39] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[05:03:07] <doy> is pushtab/pulltab a new feature?
[05:03:31] <doy> i've been on pentadactyl for a while, but not really for any particular reason
[05:03:58] <strcat> doy: it's not really new, but I don't think tadactyl
[05:04:04] <strcat> pentadactyl*
[05:04:10] <strcat> ugh
[05:04:19] <strcat> you know, this bug is going to drive me insane ;p
[05:04:31] <doy> is that bug disabling your keyboard too?
[05:04:33] <doy> (:
[05:04:41] <strcat> yep but it doesn't get stuck off
[05:04:46] <strcat> it misses input events
[05:05:01] <strcat> think it could be the video driver, works fine in wayland or a VT
[05:05:29] <strcat> doy: anyway, not really a new feature, but I don't think pentadactyl has real tab group support*
[05:05:34] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[05:05:42] <strcat> they are both missing nice features that are in one or the other :s
[05:05:44] <doy> yeah
[05:06:17] <doy> i don't especially mind the default tab group ui, i just have backspace bound to enter/exit the tab group chooser
[05:06:21] <doy> it is pretty slow though
[05:06:27] <doy> which does get irritating
[05:07:57] *** Quits: Niessy (Mibbit@moz-E56CAA08.dsl.bell.ca) (Quit: http://www.mibbit.com ajax IRC Client)
[05:08:09] <doy> pentadactlyl is a bit annoying in how it changes around all of the config options for no real reason, which makes switching back and forth more difficult than it should be
[05:09:41] *** Quits: KindOne (KindOne@EC51CE2D.E114B4AE.EC6A1518.IP) (Ping timeout)
[05:10:46] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[05:11:59] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[05:12:03] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Client exited)
[05:13:26] *** Joins: KindOne (KindOne@EC51CE2D.E114B4AE.EC6A1518.IP)
[05:13:29] <myname> i am searching for a good tab group manager
[05:13:46] <myname> i am using an extension named like this, but it is buggy as hell sometimes
[05:14:30] <strcat> I really like vimperator's way of dealing with it, but as a whole it's so buggy now
[05:14:50] <strcat> it has a problem where the vimperator UI just stops working completely, and the only fix is to close a tab
[05:15:08] <myname> it can always get worse; i somehow managed to break every keyword bookmark in pentadactyl
[05:15:11] <strcat> so that usually means opening a tab so you have one to close..
[05:16:06] <myname> while we are on the topic: why isn't there any browser which makes the rendering engine an extension?
[05:16:37] <doy> there's a patch for the keyword bookmark thing in the bug tracker
[05:16:49] <doy> you have to apply it by hand though
[05:16:51] <myname> oh, so it's a known bug
[05:16:52] <myname> great
[05:16:53] <doy> yeah
[05:17:04] <strcat> yeah but in vimperator/pentadactyl terms, that likely means it will be fixed in 3 years
[05:17:09] <doy> pretty much
[05:17:28] <myname> and pentadactyl is rocket fast at this compared to vimperator
[05:18:16] <myname> i put an eye on luakit. i really like its default behavior, but it kinda sucks that it can't do essential tasks in an easy way
[05:18:34] <Chef> I hate how Pentadactyl has nightlies
[05:18:46] <Chef> I just haven't figured out a way to automatically update it to the newest version
[05:19:32] <myname> yaourt -S pentadactyl-hg
[05:19:35] * myname hides
[05:19:39] <doy> myname: https://code.google.com/p/dactyl/issues/detail?id=1003
[05:19:57] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[05:20:57] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[05:21:18] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[05:21:34] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[05:21:50] *** Joins: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com)
[05:22:47] <doy> i tried conkeror for a while, but got tired of not having a particularly fully featured browser
[05:23:06] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[05:23:20] <myname> the servo guys better hurry and build something useful!
[05:23:24] <doy> (:
[05:23:30] *** Quits: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com) (Ping timeout)
[05:23:49] <gunther> hi, i am trying to use the rust ctags for emacs. anyone have a pointer to a tutorial on how to do that or give a quick summary on how to do that? thanks. 
[05:25:55] * dbaupp points myname toward the "fork" & "pull request" buttons on github.com/mozilla/servo :P
[05:26:07] *** Quits: Jesin (Jessin_@moz-A680C20B.cc.lehigh.edu) (Ping timeout)
[05:26:08] *** Quits: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au) (Quit: gavinb)
[05:26:42] <myname> dbaupp: i assume i may not even be good enough in rust to understand most of the stuff there :/
[05:27:38] <dbaupp> myname: you can always practice :)
[05:27:52] <strcat> rusti: struct Foo; Foo
[05:27:53] <dbaupp> (practice by experimenting with servo, that is.)
[05:27:54] -rusti- {}
[05:27:55] <strcat> rusti: struct Foo; Foo{}
[05:27:55] -rusti- <anon>:5:24: 5:25 error: Unit-like struct construction is written with no trailing `{ }`
[05:27:55] -rusti- <anon>:5          struct Foo; Foo{}
[05:27:56] -rusti-                                  ^
[05:27:56] -rusti- error: aborting due to previous error
[05:27:56] -rusti- application terminated with error code 101
[05:28:10] <Eridius> rusti: struct Foo; Foo()
[05:28:11] -rusti- <anon>:5:21: 6:5 error: expected function but found `main::Foo`
[05:28:11] -rusti- <anon>:5          struct Foo; Foo()
[05:28:11] -rusti- <anon>:6     };
[05:28:11] -rusti- error: aborting due to previous error
[05:28:11] -rusti- application terminated with error code 101
[05:28:43] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[05:30:17] <fread2282> is it idiomatic to use if or match with option?
[05:30:27] * fread2282 ono, auto away
[05:30:32] *** Parts: emartin (emartin@moz-F3CB0634.res.umontreal.ca) ()
[05:30:44] <myname> dbaupp: to be honest, the strongest reason i'm here is to keep up what's going on to be somewhat ready to write stuff when 1.0 comes out
[05:30:50] <strcat> dbaupp: https://github.com/mozilla/rust/pull/8899 r?
[05:31:08] <dbaupp> fread2282: writing `if x.is_some()` is extrememly non-idiomatic (if that's what you mean)
[05:31:14] <strcat> the test with a struct called Struc amused me
[05:31:23] <fread2282> dbaupp: ok
[05:31:44] <dbaupp> strcat: why not Struct ?
[05:31:49] <strcat> dunno!
[05:31:52] <myname> strcat: let's call it StrucT (for "Test")
[05:32:22] <strcat> rusti: foo
[05:32:23] -rusti- <anon>:5:9: 5:10 error: unknown start of token: \x02
[05:32:23] -rusti- <anon>:5          foo
[05:32:23] -rusti-                   ^
[05:32:23] -rusti- application terminated with error code 101
[05:32:26] <dbaupp> strcat: also why `Foo{i`, rather than `Foo { i` :(
[05:32:45] <strcat> dbaupp: because it was already like that ;P
[05:32:57] <dbaupp> strcat: okey-dokey :)
[05:33:00] <strcat> I could easily change it
[05:33:10] <strcat> since I found all the places using it already :P
[05:33:25] <dbaupp> whatever
[05:33:28] <dbaupp> I'm not that fussed
[05:33:52] <dbaupp> is visit_enter_class (etc) effectively visit_enter_struct ?
[05:33:57] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:34:21] <strcat> dbaupp: yes
[05:34:31] <dbaupp> ok
[05:34:35] <strcat> it's a mess
[05:34:38] <strcat> :D
[05:34:39] <strcat> slowly fixing it
[05:35:01] <dbaupp> https://github.com/mozilla/rust/pull/8899/files#L4R3685 s/{}// ?
[05:35:17] <strcat> ahh, missed those two.
[05:35:36] <strcat> going to add a bonus commit deleting one of these 
[05:35:38] <strcat> it's unused
[05:36:41] *** Quits: Chef (Chef@moz-4C317041.dsl.teksavvy.com) (Quit: WeeChat 0.4.0)
[05:36:43] <dbaupp> yay, two-for-one deal on commits \o/
[05:36:59] <dbaupp> (well, three-for-two)
[05:37:18] <dbaupp> anyway, r=me
[05:38:08] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[05:38:33] <strcat> git commit -p --amend is my saviour
[05:39:28] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:39:32] <Eridius> strcat: oh man you commit directly without adding to the stash first?
[05:39:34] <Eridius> you monster!
[05:39:42] <Eridius> `git commit --amend -C HEAD` is my favorite. That skips the editor
[05:39:57] <Eridius> err I meant adding to the index, clearly
[05:40:07] <strcat> Eridius: yes I end up with such a messy reflog
[05:40:14] <strcat> I compulsively amend ;P
[05:44:44] <strcat> dbaupp: actually it is used after all.... don't feel like dealing with it
[05:44:47] <strcat> visit_vec
[05:44:59] <strcat> it's not called by the visitor, but the visit_unboxed_vec implementations (wrongly?) call it
[05:45:40] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[05:45:40] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/M6NUrw
[05:45:40] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[05:47:19] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: Textual IRC Client: www.textualapp.com)
[05:47:42] <fread2282> https://gist.github.com/fread2281/7c142bc63f6de2801697 I want to add this to extra::term, any design comments?
[05:48:13] <fread2282> (that won't compile due to priv field access, and I won't use a trait in extra::Term)
[05:48:49] <dbaupp> fread2282: replace the .insert chain with a loop :)
[05:50:32] <fread2282> dbaupp: over what? two lists?
[05:50:36] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[05:50:36] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/4SMqoA
[05:50:36] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[05:50:37] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[05:50:37] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/WqD3OA
[05:50:37] <ghrust> 13rust/06auto 14e93b70f 15Daniel Micay: repr: print the name of structs
[05:50:37] <ghrust> 13rust/06auto 14419f359 15Daniel Micay: repr: remove trailing {} from unit-like structs
[05:50:37] <ghrust> 13rust/06auto 1489faa9c 15bors: auto merge of #8899 : thestinger/rust/repr, r=huonw
[05:50:39] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[05:51:32] <dbaupp> fread2282: [(~"kbs", KeyBackspace), (~"cr", KeyReturn), ...]
[05:52:16] <dbaupp> you could even have it as a static, and the loops as `for &(name, key) in key_names.iter() { map.insert(name.to_owned(), key) }`
[05:52:21] <dbaupp> *loop
[05:52:48] <dbaupp> err, *getesc(name), too
[05:55:37] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[05:55:37] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1489faa9c to 14bb35e23: 02http://git.io/N3iJvQ
[05:55:37] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[05:55:39] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[05:55:39] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/eW68Kw
[05:55:39] <ghrust> 13rust/06auto 14e93b70f 15Daniel Micay: repr: print the name of structs
[05:55:39] <ghrust> 13rust/06auto 1470cf66d 15Daniel Micay: repr: remove trailing {} from unit-like structs
[05:55:39] <ghrust> 13rust/06auto 140b891c7 15bors: auto merge of #8899 : thestinger/rust/repr, r=huonw
[05:55:41] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[06:05:19] <fread2282> doy: ping
[06:08:40] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[06:08:53] <fread2282> doy: actually I'll ping tomorrow
[06:09:00] *** Quits: fread2282 (Mibbit@EB90049E.B619C58A.8F2EC2E7.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:14:25] *** Quits: gunther (Mibbit@moz-F4E830A0.cable.mindspring.com) (Quit: http://www.mibbit.com ajax IRC Client)
[06:21:33] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[06:22:11] *** Joins: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com)
[06:22:22] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[06:23:52] *** Quits: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com) (Ping timeout)
[06:25:34] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[06:28:31] *** Quits: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: zzz)
[06:28:57] *** Quits: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net) (Quit: Leaving)
[06:30:57] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[06:31:16] <strcat> windows screws up those tests
[06:31:21] <strcat> because it shoves them in weird paths
[06:31:27] <strcat> just xfailing them...
[06:31:35] <strcat> nothing can be done beyond messing around with cfg
[06:32:06] * strcat hates check-fast
[06:33:39] <dbaupp> apparently we're super slow on windows because mingw does bad things, so hopefully check-fast can die some day
[06:35:15] <mcpherrin> How far are we from being able to use an msvc toolchain on windows?
[06:35:22] <mcpherrin> Or do people not care about that anymore?
[06:35:36] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[06:35:36] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 140b891c7 to 14bb35e23: 02http://git.io/N3iJvQ
[06:35:36] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[06:35:38] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[06:35:38] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/79gZKg
[06:35:38] <ghrust> 13rust/06auto 14da5b41e 15Daniel Micay: repr: print the name of structs
[06:35:38] <ghrust> 13rust/06auto 14d5d0e7b 15Daniel Micay: repr: remove trailing {} from unit-like structs
[06:35:39] <ghrust> 13rust/06auto 1408a57cc 15bors: auto merge of #8899 : thestinger/rust/repr, r=thestinger
[06:35:41] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[06:36:48] <tikue> strcat: funny, i was just wondering about the fact that fmt!("{}", FooStruct) didn't print the struct name
[06:36:56] * tikue goes to update rust
[06:37:34] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:37:40] *** Joins: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[06:41:05] <dbaupp> tikue: you'll have to update to the auto branch
[06:41:22] <dbaupp> mcpherrin: I think people do; but it's, like, hard work.
[06:41:45] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:41:46] <tikue> dbaupp: ohh...good point. well, i can wait :) i'm just excited that the change is occuring!
[06:42:46] <dbaupp> well... this is fun; apparently the markdown mode my emacs has dies when inserting a ` into the manual :(
[06:42:54] <mcpherrin> dbaupp: the worst kind of work ;)
[06:43:45] <dbaupp> well; I'm waiting for rust to build so I might as well document my changes :P
[06:44:46] *** Quits: tikue (quassel@moz-FEADCD38.hsd1.pa.comcast.net) (Connection reset by peer)
[06:44:46] *** tikue_ is now known as tikue
[06:44:52] *** Joins: tikue_ (quassel@moz-FEADCD38.hsd1.pa.comcast.net)
[06:47:47] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[07:01:32] *** Quits: cstrahan (cstrahan@moz-A0710861.c3-0.161-ubr1.lnh-161.md.cable.rcn.com) (Ping timeout)
[07:02:08] *** Joins: cstrahan (cstrahan@moz-A0710861.c3-0.161-ubr1.lnh-161.md.cable.rcn.com)
[07:03:31] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[07:04:21] *** Joins: seisaa (lala@B729D8F.853CD759.24655E4E.IP)
[07:05:19] *** Parts: seisaa (lala@B729D8F.853CD759.24655E4E.IP) ()
[07:07:40] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[07:15:37] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[07:15:37] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1408a57cc to 14bb35e23: 02http://git.io/N3iJvQ
[07:15:37] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[07:15:39] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[07:15:40] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/K4-SXw
[07:15:40] <ghrust> 13rust/06auto 14ecc30a6 15Daniel Micay: repr: print the name of structs
[07:15:40] <ghrust> 13rust/06auto 14f8bfecd 15Daniel Micay: repr: remove trailing {} from unit-like structs
[07:15:40] <ghrust> 13rust/06auto 14482d83f 15bors: auto merge of #8899 : thestinger/rust/repr, r=thestinger
[07:15:42] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[07:16:01] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[07:19:23] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[07:22:45] *** Joins: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com)
[07:24:25] *** Quits: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com) (Ping timeout)
[07:26:34] *** Joins: jviereck (Adium@moz-31CF8B43.dip0.t-ipconnect.de)
[07:30:32] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[07:33:41] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[07:35:08] *** Quits: jviereck (Adium@moz-31CF8B43.dip0.t-ipconnect.de) (Quit: Leaving.)
[07:35:20] *** Joins: victorporof (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP)
[07:35:36] *** Joins: jviereck (Adium@moz-31CF8B43.dip0.t-ipconnect.de)
[07:36:03] *** Quits: jviereck (Adium@moz-31CF8B43.dip0.t-ipconnect.de) (Quit: Leaving.)
[07:37:28] *** Joins: jviereck (Adium@moz-31CF8B43.dip0.t-ipconnect.de)
[07:40:38] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:41:42] *** Quits: jviereck (Adium@moz-31CF8B43.dip0.t-ipconnect.de) (Quit: Leaving.)
[07:43:07] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[07:43:54] *** Joins: squiddy (squiddy@moz-779AB2F2.adsl.alicedsl.de)
[07:44:50] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[07:48:58] *** Joins: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au)
[07:50:22] *** Quits: animesh (Mibbit@94840D93.BB5E7C58.55B2D53A.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:52:25] <dbaupp> strcat: you can run check-fast locally, right?
[07:52:36] <strcat> dbaupp: I guess so
[07:53:14] *** Quits: mib_9uyb_ (mib_9uybip@moz-9B8221B3.rivrw1.nsw.optusnet.com.au) (Client exited)
[07:55:36] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[07:55:36] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14482d83f to 14bb35e23: 02http://git.io/N3iJvQ
[07:55:36] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[07:55:37] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[07:55:37] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/uPM5iw
[07:55:37] <ghrust> 13rust/06auto 14874611b 15Daniel Micay: repr: print the name of structs
[07:55:37] <ghrust> 13rust/06auto 146655b3c 15Daniel Micay: repr: remove trailing {} from unit-like structs
[07:55:38] <ghrust> 13rust/06auto 145a1ecfb 15bors: auto merge of #8899 : thestinger/rust/repr, r=thestinger
[07:55:40] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[07:57:27] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Quit: Lost terminal)
[07:59:31] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[07:59:40] *** Joins: inf-groupoid (user@580120F5.8ED93E28.1C8C8CE9.IP)
[08:01:03] *** Quits: squiddy (squiddy@moz-779AB2F2.adsl.alicedsl.de) (Ping timeout)
[08:06:42] *** Joins: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP)
[08:09:17] *** Joins: Ms2ger (Ms2ger@moz-982ABA97.adsl-dyn.isp.belgacom.be)
[08:14:44] *** Quits: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP) (Quit: valenting)
[08:14:45] *** Quits: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au) (Quit: gavinb)
[08:14:57] *** Joins: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP)
[08:15:43] *** Joins: squiddy (squiddy@moz-B76B072D.adsl.alicedsl.de)
[08:17:32] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[08:18:23] *** Quits: LimeBurst (me@247D1419.D73964AC.27A8748.IP) (Ping timeout)
[08:20:27] *** Quits: fyolnish (fyolnish@moz-A39E8A3F.uqwimax.jp) (Client exited)
[08:21:01] *** Joins: fyolnish (fyolnish@moz-A39E8A3F.uqwimax.jp)
[08:22:48] *** Joins: LimeBurst (me@247D1419.D73964AC.27A8748.IP)
[08:23:05] *** Joins: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com)
[08:24:01] *** Joins: mib_9uybip (mib_9uybip@moz-9B8221B3.rivrw1.nsw.optusnet.com.au)
[08:24:45] *** Quits: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com) (Ping timeout)
[08:26:46] *** Joins: mwm (Mibbit@8AB10CA9.F3040C26.79496794.IP)
[08:29:35] <mwm> I'm just starting out in rust, but I have run into a problem.  Is there a reason why the implementation of Writer does not have write_line as self.write_str(s + &"\n"); ?  The current way with two write_str can cause interleaving of line endings and textfrom multiple tasks.
[08:29:53] *** Quits: mib_9uybip (mib_9uybip@moz-9B8221B3.rivrw1.nsw.optusnet.com.au) (Ping timeout)
[08:33:03] <Ms2ger> mwm, sounds like that would need to allocate the concatenated string?
[08:34:34] <mwm> I literally don't know enough to comment on the performance, but the behavior is unexpected.
[08:35:06] *** Quits: mindcat (mindcat@830D7BF7.BED0357D.E47F7BFE.IP) (Quit: Lost terminal)
[08:35:48] <mwm> The docs say "string with implicit newline" not "prints string and then newline."
[08:36:09] <mwm> I can obviously work around this, but it seems odd.
[08:36:19] <Ralith> anything that prints using that interface can probably afford an alloc
[08:37:12] <mwm> Ralith: that was my thinking as well, but as I say, I'm just starting out so I don't know what all uses write_line from Writer
[08:38:22] <Ralith> mwm: try submitting a pull request
[08:39:22] <mwm> :( Now I have to make a GitHub account again.
[08:40:25] <Ralith> again?
[08:41:20] <mwm> I don't like having one so I make one.. submit stuff and remove it.
[08:41:28] <Ralith> that is extremely silly
[08:41:49] <mwm> Nevertheless.
[08:41:53] <Ralith> you have no basis to complain of inconvenience you create yourself
[08:42:05] <Ralith> anyway, often things are a certain way simply because nobody's thought about it very hard yet, so don't hesitate to propose changes if you have a good reason
[08:43:49] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:44:01] <mwm> Fair enough, I'll maintain my own patch.  I don't need to be insulted that I prefer not to have a github account.
[08:44:05] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[08:44:11] *** Quits: mwm (Mibbit@8AB10CA9.F3040C26.79496794.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:47:37] *** Quits: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net) (Input/output error)
[08:48:01] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:48:01] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[08:48:19] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[08:49:01] <Aszarsha> I get this error http://pastebin.com/U0H8KSjt when compiling on windows, any ideas ?
[08:49:12] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[08:50:52] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[08:51:57] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[08:52:43] *** Quits: [a]bacus (snoonan_mo@moz-F95B9243.hsd1.wa.comcast.net) (Quit: ZNC - http://znc.in)
[08:52:59] *** Quits: fyolnish (fyolnish@moz-A39E8A3F.uqwimax.jp) (Client exited)
[08:55:17] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[08:57:30] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[08:59:37] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[09:01:20] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[09:04:26] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[09:05:47] <tikue_> Ralith: there had to have been a better way to talk to mwm
[09:07:40] <Ms2ger> (Even if it was a little silly...)
[09:10:47] *** Joins: sebcrozet (sebcrozet@moz-7FB6C00B.w193-252.abo.wanadoo.fr)
[09:12:44] <tikue_> Ms2ger: yes lol
[09:12:48] <patrickg> it's a little silly that to use a dscm like git one is supposed to register at a central service, too :) (but then the "right" questions by mwm would have been where to send the pull request email)
[09:13:09] <tikue_> patrickg: i didn't know you could do PR's by email
[09:13:18] *** Joins: fyolnish (fyolnish@moz-724BCF8F.panda-world.ne.jp)
[09:13:54] <Ms2ger> Me neither
[09:13:58] <Ms2ger> That would be neat
[09:14:16] <Ms2ger> But I guess it's only for the Linux kernel that anyone sends PRs by email
[09:14:30] *** Joins: jviereck (Adium@moz-31CF8B43.dip0.t-ipconnect.de)
[09:14:32] <tikue_> lol
[09:14:51] *** tikue_ is now known as tikue_sleep
[09:15:13] *** Quits: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue)
[09:16:45] *** Joins: Palmik (palmik@moz-CC484FDD.tmcz.cz)
[09:21:22] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[09:21:57] *** Quits: victorporof (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: victorporof)
[09:22:04] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[09:23:10] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[09:23:13] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[09:23:34] *** Joins: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com)
[09:24:05] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[09:24:45] *** Quits: fyolnish (fyolnish@moz-724BCF8F.panda-world.ne.jp) (Client exited)
[09:25:14] *** Quits: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com) (Ping timeout)
[09:28:04] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[09:30:55] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[09:39:51] <zol> In a match inside a generic implementation of a generic enumeration, can I specify the type I expect of the generic variable? 
[09:41:22] <zol> http://hastebin.com/kekemuviwu.xml
[09:42:56] *** Quits: z0w0 (zack@moz-30F36A45.qld.bigpond.net.au) (Quit: z0w0)
[09:47:00] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:50:22] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:51:28] <SimonSapin> zol: you can have bounded type parameters so that your impl only apply to types that implement the ToStr trait (the one that provides .to_str())
[09:51:48] <SimonSapin> impl<T: ToStr> Tree<T>
[09:52:13] <SimonSapin> (or maybe you need to define a trait for that)
[09:52:43] <SimonSapin> (also, "use std::str::ToStr;")
[09:53:04] <zol> SimonSapin: Hm.. I tried, but I got http://hastebin.com/jigejikila.m then
[09:53:39] <SimonSapin> zol: paste the code for this?
[09:54:03] <zol> SimonSapin: https://gist.github.com/Zolomon/6397286
[09:55:37] <SimonSapin> letâ€™s go back a little
[09:55:52] * zol nodnods.
[09:56:08] <SimonSapin> impl<T: Goal> Tree<T> uses type parameters with trait bounds
[09:56:41] <SimonSapin> when you use that with a concrete type, the compiler emits several versions of this code, each specialized for a concrete type
[09:57:06] <SimonSapin> foo as @Trait, however, is a trait object
[09:57:31] <SimonSapin> ie. a pointer with a virtual method table
[09:57:34] <zol> SimonSapin: You could say that it's a filter which only allows Tree<Goal> and inherited traits of Goal? 
[09:57:53] <SimonSapin> the compiler only emits one version of code that uses @Trait, and the vtable dispatches method calls at runtime
[09:58:08] <zol> SimonSapin: Define concrete type and trait object, please? 
[09:58:37] <SimonSapin> they are two techniques that both use traits, but theyâ€™re not compatible
[09:58:43] *** Joins: miza (miza@moz-4DD51325.home.otenet.gr)
[09:59:00] * zol googles virtual method table..
[09:59:18] <SimonSapin> a concrete type is not generic: Tree<T> (where T is a type parameter) is generic, Tree<int> is concrete
[09:59:33] <zol> SimonSapin: Aha :)
[09:59:37] <SimonSapin> donâ€™t worry about virtual method tables, all you need to know is that itâ€™s a runtime thing
[09:59:52] * zol nods.
[09:59:54] <SimonSapin> so each method call as some performance cost
[10:00:09] *** Joins: victorporof (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:00:24] * zol nods.
[10:00:49] <SimonSapin> so, to techniques to do similar things, pick one
[10:00:54] <SimonSapin> two* techniques
[10:01:35] <zol> SimonSapin: Ah, you mean I don't need the foo as @Trait anymore if I use the other, or vice versa? 
[10:01:51] <SimonSapin> trait objects lib @Goal can also have different concrete types in the same collection
[10:01:56] <SimonSapin> which you can not do with type parameters
[10:02:21] <SimonSapin> do you want both GoalRest and GoalExplore in the same Tree?
[10:02:26] <zol> SimonSapin: Yes
[10:02:43] <SimonSapin> ok, in that case you need to use trait objects
[10:02:47] <SimonSapin> type parameters wonâ€™t work
[10:04:18] <SimonSapin> so you probably need  enum Tree { Leaf(@Goal), Node(~[Tree]) }
[10:05:05] <SimonSapin> just use @Goal as a type, and donâ€™t use <T> type parameters
[10:05:07] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[10:05:18] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[10:13:56] *** Quits: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com) (Quit: Leaving.)
[10:16:35] <zol> SimonSapin: http://hastebin.com/qapujoteqe.pl -- Not sure how to deal with these
[10:17:42] <SimonSapin> to convert a concrete type into a trait object, you need "t as @Goal"
[10:17:49] *** Quits: Liothen (liothen@moz-80EF0CD7.spkn.qwest.net) (Quit: Textual IRC Client: www.textualapp.com)
[10:18:00] <SimonSapin> assuming t is of the same pointer type, which is the case here with @GoalExplore
[10:18:28] <zol> SimonSapin: Aah! Thanks :) 
[10:19:08] <SimonSapin> zol: http://static.rust-lang.org/doc/tutorial.html#trait-objects-and-dynamic-method-dispatch
[10:19:54] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[10:22:44] *** Quits: jgilbert (jgilbert@moz-4C088FCE.hsd1.ca.comcast.net) (Ping timeout)
[10:23:59] *** Joins: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com)
[10:24:56] <zol> SimonSapin: What does "cannot move out of dereference of & pointer" mean? 
[10:25:39] *** Quits: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com) (Ping timeout)
[10:25:45] *** Quits: inf-groupoid (user@580120F5.8ED93E28.1C8C8CE9.IP) (Ping timeout)
[10:28:18] <SimonSapin> zol: http://static.rust-lang.org/doc/tutorial-borrowed-ptr.html
[10:28:26] *** Joins: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP)
[10:28:47] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[10:30:14] *** Joins: fyolnish (fyolnish@moz-724BCF8F.panda-world.ne.jp)
[10:30:34] <zol> SimonSapin: Thank you!
[10:30:40] <zol> Much appreciated :)
[10:32:59] *** Joins: inf-groupoid (user@580120F5.8ED93E28.1C8C8CE9.IP)
[10:34:35] *** Joins: Earnestly (earnest@moz-F387F877.dyn.plus.net)
[10:36:51] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[10:38:02] *** Quits: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP) (Ping timeout)
[10:39:15] *** Quits: Earnestly (earnest@moz-F387F877.dyn.plus.net) (Ping timeout)
[10:42:47] *** Quits: victorporof (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: victorporof)
[10:48:29] *** Quits: jviereck (Adium@moz-31CF8B43.dip0.t-ipconnect.de) (Quit: Leaving.)
[10:49:16] *** Joins: jviereck (Adium@moz-31CF8B43.dip0.t-ipconnect.de)
[10:49:53] *** Joins: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP)
[10:50:11] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:52:08] *** Quits: jviereck (Adium@moz-31CF8B43.dip0.t-ipconnect.de) (Quit: Leaving.)
[10:53:32] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:56:33] <doomlord> lifetimes are always scope blocks ?
[10:56:53] <zol> doomlord: From what I have read so far, yes? 
[10:57:14] <doomlord> i think i ran into a situation where a lifetime wanted to be a subset of a scopeblock, eg 2 overlapped, but 1 was  theoretically invalid for the latter half of a scope block
[10:57:44] <doomlord> {   L1 start ....       L2 start     L1 end          L2 end } <<< something like that
[10:58:24] <doomlord> the compiler wouldn't let me have a situtatino like that.. code that would have been ok in C couldn't be expressed.. i wonder if there was a different  way to write it,
[10:58:37] <doomlord> .. or if the lifetime system could eventually deal with that
[11:00:11] <doomlord> i could resort to unsafe code i know :)
[11:04:49] <miza> is there a different at
[11:04:56] <miza> copy a
[11:05:00] <miza> a.clone()
[11:12:39] *** Quits: squiddy (squiddy@moz-B76B072D.adsl.alicedsl.de) (Input/output error)
[11:15:37] <doomlord> hmm, blocks-are-expressions.. {L2 stuff={ L1 start    ...   L2 start      L1end} .... more stuff using L2 ... } <<perhaps, but let me see if the actual case could be written that way..
[11:18:06] *** Joins: figaro (Mibbit@1710FC1C.892E3CAA.520CDC98.IP)
[11:18:28] <figaro> how do i perform an out-of-source build of rust?
[11:20:25] *** Joins: vodik (simon@moz-46ADDB3.dsl.bell.ca)
[11:22:45] <kimundi> miza: 'copy a' does not exist anymore in current rust
[11:23:07] <kimundi> miza: The intention is that all explicit copying happens with .clone()
[11:23:56] <miza> kimundi: thanks, are u suggesting rust 0.8-pre over 0.7?
[11:24:15] <kimundi> figaro: I'm not sure, but I think I haerd once that ./configuring outside of the source directory works
[11:24:21] *** Joins: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com)
[11:24:23] <myname> miza: the worked on version is almost always prefered
[11:24:42] <kimundi> miza: If you can choose, use allways current git HEAD
[11:25:06] <kimundi> The existing releases have NO advantage
[11:25:23] *** Joins: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au)
[11:25:24] <kimundi> They are just whatever the git development was at at the point of the release
[11:25:34] <myname> except you don't have to build it every day :D
[11:25:42] <kimundi> true dat
[11:25:55] <miza> kimundi: ok, i have one more question about building
[11:26:00] <kimundi> but once a week or so/if you have trouble is all you rellay need
[11:26:01] *** Quits: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com) (Ping timeout)
[11:26:12] <miza> i had build rust from master
[11:26:17] <kimundi> yeah
[11:26:53] <miza> and i have problem with sketch, after i checkout 0.7 and i could build, i had some error
[11:27:05] <miza> have to do any clean before i can rebuild?
[11:27:10] <kimundi> rust sketch == rusti is known to be notoriously broken
[11:27:32] <kimundi> In principle you don't need to clean
[11:28:05] <kimundi> just pull all new changes, do a './configure', a 'make' and maybe a 'sudo make install'
[11:29:08] <myname> i always wonder what the correct pronounciation for sudo is :D
[11:30:44] <doomlord> heh i always read it rhyming with "sumo" but the do actually means do pronounced doo , right ?
[11:30:56] <miza> ok i am build rust from master
[11:31:01] <miza> building*
[11:31:09] <myname> doomlord: that's exactly  what i mean :)
[11:31:24] <doomlord> so its not just me rhyming it as the first guess..
[11:31:56] *** Quits: heftig (heftig@moz-84F5B0FB.dip0.t-ipconnect.de) (Ping timeout)
[11:32:28] <myname> well, to be fair, i'm a german and the rhyming with sumo is how you would pronounce it in german
[11:34:43] <dbaupp> There's IPA on the wiki article, http://en.wikipedia.org/wiki/Sudo
[11:35:14] <dbaupp> but there's 2; one is su-doo, and the other is su-doe.
[11:35:47] <dbaupp> (so, the verdict is: say whatever you want :P )
[11:35:56] <myname> i really hate english in terms of pronounciation
[11:36:23] <myname> the alphabet isn't even close to being perfect
[11:36:40] *** Joins: austincheney (quassel@8276C73B.985A737F.603BFF2.IP)
[11:37:01] <austincheney> I am a JavaScript developer with experience writing low level parsers
[11:37:16] <austincheney> starting now I have a week of unlimited time to spend on open source contributions
[11:37:16] *** Quits: vodik (simon@moz-46ADDB3.dsl.bell.ca) (Quit: WeeChat 0.4.2-dev)
[11:37:24] *** Parts: inf-groupoid (user@580120F5.8ED93E28.1C8C8CE9.IP) (ERC Version 5.3 (IRC client for Emacs))
[11:37:31] <austincheney> are there any tools or analysis in JS that can be done for the rust language?
[11:37:44] <myname> oh dear, an eternal javascript developer
[11:38:11] <kimundi> austincheney: Not sure
[11:38:18] <kimundi> austincheney: Maybe ask in #servo
[11:38:30] <austincheney> thanks kimundi
[11:39:25] <dbaupp> austincheney: you could talk to Seldaek too; he's been doing the web-frontend of the new documentation engine
[11:40:11] <austincheney> thanks dbaupp
[11:40:46] <dbaupp> austincheney: (#rust is fine, but there's also #rustdoc-wg)
[11:42:58] <dbaupp> myname: (btw, that sentence sounds very negative; I'm sure you didn't meant it that way, but more contributors is always good :) )
[11:43:02] *** Joins: heftig (heftig@moz-84F5B0FB.dip0.t-ipconnect.de)
[11:43:14] <doomlord> austincheney, i did an html browser for rust source, maybe you can improve that too .. i dont have the menus  showing up
[11:44:17] <austincheney> doomlord: is the code on github or somewhere that I can take and then pull request later?
[11:44:33] <dbaupp> hm, http://huonw.github.io/isrustfastyet/ is any one else seeing "Location: http://twbs.github.io/bootstrap" ?
[11:44:40] *** Quits: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP) (Ping timeout)
[11:44:52] <dbaupp> wait; I don't see it anymore. weird.
[11:45:13] <doomlord> here's the html source browser, https://github.com/dobkeratops/rustfind     
[11:46:12] <doomlord> as a lame workaround i just spit out a table of references at the bottom of the page.. a popup menu when you click on a symbol would be nicer .. etc..
[11:46:43] <doomlord> at the minute you click to jump to *def* only
[11:47:31] <doomlord> i spit out the link information in plain text too (not JSON sorry) , you might be able to make  a call graph browser out of that
[11:50:11] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[11:51:51] <miza> have anyone try build rust on raspberry?
[11:52:17] <myname> from scratch should literally take days
[11:52:23] <miza> :p
[11:52:58] <myname> i tried building rust 0.5 on an atom including the llvm-stuff and it took about 12 hours
[11:53:14] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:54:01] <miza> compiling for ever :P
[11:54:03] <miza> http://xkcd.com/303/
[11:55:08] <klutzy> I tried to build rust on vps which has 512MB ram and it's just horribly slow
[11:55:26] <klutzy> I remember vps requires 10~15 minutes to build git..
[11:55:58] <klutzy> I ran make then it finished llvm build after a day
[11:56:33] <myname> tbh this is the main reason i stuck to 0.7
[11:56:53] <klutzy> rpi is slower, so I guess you have to wait 2 days or more to get llvm binary :p
[11:57:25] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:58:04] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[11:59:08] *** Quits: figaro (Mibbit@1710FC1C.892E3CAA.520CDC98.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:01:32] *** Quits: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP) (Ping timeout)
[12:02:23] *** Joins: squiddy (squiddy@moz-B76B072D.adsl.alicedsl.de)
[12:03:32] *** Quits: fyolnish (fyolnish@moz-724BCF8F.panda-world.ne.jp) (Client exited)
[12:03:48] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[12:04:03] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[12:07:54] *** Joins: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP)
[12:08:07] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[12:08:17] *** Joins: jviereck (Adium@moz-31CF8B43.dip0.t-ipconnect.de)
[12:09:13] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[12:10:32] *** Quits: jviereck (Adium@moz-31CF8B43.dip0.t-ipconnect.de) (Quit: Leaving.)
[12:16:09] *** Joins: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se)
[12:16:56] *** Joins: jviereck (Adium@moz-31CF8B43.dip0.t-ipconnect.de)
[12:23:51] *** Joins: mib_39dkr9 (Mibbit@76498E45.8B6C6F71.4C84FCBE.IP)
[12:24:23] *** Joins: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com)
[12:24:32] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[12:24:41] <kimundi> afaik rpi can't compiel on itself yet, but there is cross compile support
[12:25:24] *** Quits: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP) (Ping timeout)
[12:26:03] *** Quits: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com) (Ping timeout)
[12:26:12] *** Quits: mib_39dkr9 (Mibbit@76498E45.8B6C6F71.4C84FCBE.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:26:40] *** Joins: ecr (Thunderbir@C96854E.5BB0586B.11F8506F.IP)
[12:27:03] *** Quits: ecr (Thunderbir@C96854E.5BB0586B.11F8506F.IP) (Quit: ecr)
[12:32:20] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[12:35:07] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[12:36:20] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[12:37:49] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[12:46:32] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[12:48:36] *** Joins: robertknight (robertknig@moz-53D8EF63.range81-151.btcentralplus.com)
[12:56:10] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:58:21] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[13:00:21] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[13:04:26] *** Joins: Earnestly (earnest@moz-F387F877.dyn.plus.net)
[13:14:14] *** Joins: fyolnish (fyolnish@moz-E68635AF.tky.mesh.ad.jp)
[13:16:44] *** Quits: fyolnish (fyolnish@moz-E68635AF.tky.mesh.ad.jp) (Ping timeout)
[13:16:46] <cmr> klutzy: the slowness is bound to be swapping.
[13:16:55] <cmr> 512MB ram is 1/4 of what is needed
[13:17:08] <klutzy> yep, indeed
[13:17:18] <klutzy> my rpi is 256MB, so I won't build on it :p
[13:18:33] * kimundi would build on if for the lulz
[13:19:14] <kimundi> Don't use mine... It can works for a few weeks for what I care xD
[13:19:25] <engla> right, reserve a couple of weeks for that
[13:20:17] <engla> does anyone know extra::json well? it's clearly a mess
[13:20:30] <engla> ToJson and its relation to extra::serialize
[13:21:26] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: WeeChat 0.4.1)
[13:22:00] *** Parts: jviereck (Adium@moz-31CF8B43.dip0.t-ipconnect.de) ()
[13:22:10] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[13:22:23] <cmr> engla: I've tried changing it and I can confirm that it's a huge mess
[13:22:44] <cmr> IMO extra::serialize is also a mess but that may just be me not understanding its goals
[13:22:45] <engla> we had this issue reported yesterday and the problem is just confusion https://github.com/mozilla/rust/issues/8883
[13:23:22] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[13:24:48] *** Joins: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com)
[13:24:56] *** Joins: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP)
[13:26:28] *** Quits: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com) (Ping timeout)
[13:29:03] *** Quits: Earnestly (earnest@moz-F387F877.dyn.plus.net) (Ping timeout)
[13:30:43] *** Joins: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com)
[13:31:44] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[13:33:30] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[13:34:18] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[13:36:00] <miza> how can i set an index of a vec that dosn't exist yet
[13:36:38] <engla> you can't, you can use push to add an element to the end
[13:36:38] <ChrisMorgan> Do you mean an index that doesn't exist yet? You want to extend the existing vector so that that becomes a valid index?
[13:37:36] <engla> miza: all elements inside vec.len() must be valid and there can't be holes. You can however (if you have a simple type in the vector) fill it up with a zero-like value
[13:37:55] *** Quits: robertknight (robertknig@moz-53D8EF63.range81-151.btcentralplus.com) (Ping timeout)
[13:38:12] <kimundi> You could also use a TreeMap
[13:38:14] *** Joins: auREAX (au@B360F4FB.2F0455A2.78618DFA.IP)
[13:38:28] <cmr> What is a TreeMap vs a HashMap?
[13:38:30] <auREAX> damn, was hoping to catch a glance of graydon.
[13:38:35] <miza> xmmm
[13:38:38] <auREAX> to wish him the best
[13:39:00] <cmr> auREAX: he's on vacation aiui
[13:39:00] <miza> but is this slow?
[13:39:17] <miza> to have to fill every missing index until that i want?
[13:40:01] <cmr> miza: it's an O(n) operation, but if you use vec::reserve first it shouldn't be that slow
[13:40:18] <cmr> miza: if you want a sparse array, you want a map, not a vector.
[13:40:28] <engla> it's not necessarily O(n) if you allocate a zeroed vector
[13:40:44] <miza> HashMap?
[13:40:51] <kimundi> Or TreeMap
[13:40:56] <cmr> engla: assuming zero is the value you want, and that zeroing on allocation is free?
[13:41:15] <engla> yes
[13:41:33] <auREAX> cmr: ah.
[13:41:50] <engla> I guess I'm totally wrong actually, it's still O(N) even if it's memset zero
[13:43:27] *** Quits: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au) (Quit: gavinb)
[13:44:22] *** Quits: reyre (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Client exited)
[13:44:48] *** Joins: reyre (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[13:44:52] <miza> the problem is that there isn't documentation about how to use this :p
[13:45:02] <miza> there is documentation about the code
[13:45:17] <miza> but if you aren't not comfortable with rust is hard to understand
[13:46:34] *** Quits: reyre (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Ping timeout)
[13:47:16] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[13:47:31] <engla> what's your question? how to use HashMap?
[13:47:46] <miza> yes
[13:49:06] *** Joins: jviereck (Adium@moz-48B9FD19.dip0.t-ipconnect.de)
[13:49:09] <engla> unfortunately there is no part of the tutorial for that
[13:49:35] <engla> rusti: use std::hashmap::HashMap; let mut map = HashMap::new(); map.insert(2, ~"name"); map
[13:49:41] -rusti- pastebinned 1 lines of output: http://ix.io/7IQ
[13:49:59] <miza> xmm easy :p
[13:50:00] <engla> it works, but the debug output is useless (it shows the guts of the hashmap)
[13:50:22] <engla> rusti: use std::hashmap::HashMap; let mut map = HashMap::new(); map.insert(2, ~"name"); map.find(&2)
[13:50:26] <kimundi> rusti: let mut m : TreeMap<uint,uint> = TreeMap::new(); m.insert(2, 2); m
[13:50:34] -rusti- pastebinned 16 lines of output: http://ix.io/7IR
[13:50:34] -rusti- pastebinned 14 lines of output: http://ix.io/7IS
[13:50:50] <engla> rusti: use std::hashmap::HashMap; let mut map = HashMap::new(); map.insert(2, ~"name"); print!("{:?}", map.find(&2))
[13:50:52] -rusti- Some(&~"name")()
[13:51:17] <engla> so the .find() result is wrapped in Option<T> to represent either a found value or None (not found)
[13:51:22] <engla> not present I should say
[13:51:53] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[13:52:07] <miza> is any of u developer at rust?
[13:52:16] <tiffany> error: internal compiler error: ty::Region#subst(): Reference to self region when given substs with no self region: substs(regions=[], self_ty=None, tps=[<V12>])
[13:52:17] <tiffany> uhh
[13:52:40] <cmr> miza: many of us are contributors. people with ops work for mozilla on rust (or servo)
[13:52:47] <miza> it would be nice to have at code documentation small exable of a basic usage
[13:53:04] <cmr> miza: send a pull request adding examples!
[13:53:24] <kimundi> ;)
[13:53:27] <miza> i start rust this week :p
[13:53:31] <cmr> so? :)
[13:53:33] <engla> it's a catch-22
[13:53:51] <miza> i ll do
[13:53:55] <miza> i want to help
[13:54:14] <kimundi> We need automatic tested doccomment code examples first though, or else those examples just bitrot all the time
[13:54:15] <miza> but i am a litle noob yet
[13:54:33] <kimundi> miza: Don't worry :)
[13:54:36] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[13:54:37] <miza> i ll write some notice with things that i found answer here
[13:55:45] <engla> kimundi: what about the  ~~~ {.rust}   sections in documentation?
[13:56:17] <miza> something i like in documentation is the apidock.com
[13:56:19] <miza> http://apidock.com/ruby/Enumerable/map
[13:56:30] <kimundi> engla: The main docs get tested, just not doccomments on functions in the actual source code afaik
[13:56:30] <miza> that can users add comments with staff
[13:56:44] *** Joins: ski (md9slj@moz-4BB5E0FF.studat.chalmers.se)
[13:57:10] <engla> miza: some docs have it  http://static.rust-lang.org/doc/std/iterator.html#method-map
[13:57:24] <engla> but it's written with assertions so it's not easy to read
[13:58:00] <klutzy> is there a way to not mangle extern fn names? I want to link .o from rustc with C module.
[13:58:27] <klutzy> I meant `extern fn func() {}` is exported as "func" or "_func" at .o file
[13:58:27] <kimundi> klutzy: The is some attribute for that
[13:58:46] <klutzy> kimundi: ah, time to search it. thanks! :D
[13:58:49] <tiffany> can anyone help me with this ice?
[13:59:03] <kimundi> vanilla or chocolate?
[13:59:26] <tiffany> vanilla or chocolate?
[13:59:27] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[13:59:52] <kimundi> Was a joke, forget it :P
[14:00:14] <kimundi> (milk ice etc)
[14:00:16] <tiffany> I'm running 0.8-pre
[14:00:29] <tiffany> I'll upload the code I have, I've determined that it's caused by uncommenting line 18 or frsi.rs
[14:03:40] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:03:49] <tiffany> https://gist.github.com/tiffany352/6398426
[14:07:20] <engla> why is it always something with 'self in ICE :-(
[14:09:57] <engla> ok this is very vague, but Rust doesn't cope well with constructions like this
[14:10:01] <engla> pub fn new(make_token: ~fn(&'self str) -> T) -> ParseContext<'self, T>
[14:10:49] <tiffany> why not?
[14:11:01] <kimundi> bugs
[14:11:19] <engla> I don't know, everything around the 'self lifetime is tricky and I don't understand it
[14:11:24] <tiffany> what do I do then?
[14:11:29] <engla> the problem here would be ~fn(&'self str)
[14:12:26] *** Quits: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP) (Ping timeout)
[14:13:15] <engla> this is great   fn make_token<'a>(s: &'a str) -> FRToken<'a>    but to put this in a context where you fill in 'self  that doesn't work for some reason
[14:13:23] <engla> fill in 'self for 'a
[14:16:44] <bblum> that doesn't look like a place where the self lifetime makes sense, engla
[14:16:49] <bblum> are you inside an impl?
[14:16:58] <engla> the issue tracker has 31 hits for open issues of ICE + self
[14:18:01] <engla> tiffany: for make_token: ~fn  in particular, you can make the function use a ~str or &str argument instead
[14:18:15] <tiffany> won't that require a copy?
[14:18:21] <engla> yes
[14:18:51] <engla> I guess that breaks down the whole premise, since your literal is a &'self str
[14:18:57] <engla> the whole idea of your datastructure
[14:19:12] <engla> hm so that's no good.
[14:19:55] <tiffany> it'll work I think
[14:20:02] *** Quits: a__ (a__@moz-25043B93.nycmny.fios.verizon.net) (Client exited)
[14:20:53] <engla> maybe if you use a trait to wrap the behavior you want in make_token
[14:21:05] *** Joins: a__ (a__@moz-25043B93.nycmny.fios.verizon.net)
[14:21:31] <kimundi> woho, 84 errors!
[14:21:47] * kimundi is modernizing a few type names in rustc and syntax
[14:23:00] <tiffany> I still get the ICE 
[14:23:28] <tiffany> even though new() is now     pub fn new(make_token: ~fn(~str) -> T) -> ParseContext<'self, T> {
[14:23:49] <tiffany> although this time it's not line 18 of frsi.rs
[14:24:10] <engla> ah, which line?
[14:24:15] <tiffany> actually, I think there's 2 now
[14:24:30] <tiffany> if I dont' comment it out, tps is [<V10>], if I do it's [<V6>]
[14:24:35] <kimundi> well, now the 'self comes from nowehere, no?
[14:24:37] <tiffany> I'm not sure what line the second one is on
[14:25:17] *** Joins: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com)
[14:25:34] <engla> your variants Match, Fold, Build also use functions with 'self types in the argument list
[14:25:57] <tiffany> I changed Build, I'll comment out match/fold for now
[14:26:06] <kimundi> If all you use for construction is a "make_token: ~fn(~str) -> T" then shouldn#t it be impossible to construct a type with a lifetime like "ParseContext<'self, T>" ?
[14:26:41] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[14:26:57] *** Quits: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com) (Ping timeout)
[14:27:13] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[14:27:38] <tiffany> 18, 19, 8, and 9 are all ICEs in frsi.rs
[14:27:58] <tiffany> if I comment them all out it compiles
[14:29:02] <engla> ok I'm not sure I can provide any structured help
[14:29:41] <engla> fn grammar<'a>() -> ParseContext<'a, FRToken<'a>> {}  is invalid since 'a without matching any input function arguments, means that the function can return a ParseContext of *any* caller-chosen lifetime
[14:30:04] <cmr> is that a bad thing?
[14:30:16] <kimundi> it doesn'T make sense
[14:30:21] <engla> yes, because it's impossible to provide unless you return something 'static
[14:30:37] <kimundi> explicit lifetimes basically just link types together
[14:30:41] <tiffany> what is especially confusing is how "let res = 0; println("%?", res);" was an ICE
[14:31:19] <kimundi> if there is no input type to link to the output type with a lifetime 'a, the the latter can't be constructed.
[14:31:33] <engla> it can be, 'static fits in any lifetime
[14:31:42] <kimundi> 'static is the one exception
[14:32:10] <tiffany> removing the <'a> from grammar() fixed one of the ICEs
[14:33:22] <engla> rusti: fn any<'a>() -> &'a str { "hi" };  any()
[14:33:23] -rusti- "hi"
[14:33:35] <engla> the function any will return a string slice of any lifetime you require
[14:33:49] <kimundi> that function should be invalid though
[14:34:09] <kimundi> rusti: fn any() -> &'static str { "hi" }; any()
[14:34:10] -rusti- "hi"
[14:34:20] <kimundi> should be the only one valid
[14:34:21] <engla> your any is just the same
[14:34:22] <engla> right
[14:34:29] <cmr> 'static is a superset of all lifetimes, it's valid in any context.
[14:34:47] <engla> by the way,   fn any() -> &str    means the same time as my first any()
[14:35:06] <kimundi> which is also something that should be made illigal
[14:35:23] <cmr> I really don't see why.
[14:35:29] <engla> yes kimundi
[14:35:32] <kimundi> lifetimes are confusing enough
[14:35:46] <engla> it's in the issue book so it should be kimundi 
[14:35:47] *** Quits: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl) (Ping timeout)
[14:36:11] <kimundi> no need to have syntax constructs that are onyl valid because you happen to return something 'static, especially if you can't see it as user
[14:40:54] *** Joins: Earnestly (earnest@moz-F387F877.dyn.plus.net)
[14:41:17] *** Joins: Jesin (Jessin_@moz-A680C20B.cc.lehigh.edu)
[14:42:36] <tiffany> I tried adding a second lifetime to parse() so that the result of parsing didn't have to last as long as the grammar used to parse with, but I'm getting errors I'm not sure how to fix
[14:43:15] *** Quits: Jesin (Jessin_@moz-A680C20B.cc.lehigh.edu) (Ping timeout)
[14:43:43] *** Quits: kuuranne (kuuranne@moz-C4357EA7.kapsi.fi) (Ping timeout)
[14:44:09] *** Joins: dido (dido@C1EB07ED.B8527A3D.C5F254E.IP)
[14:44:18] <dido> !list
[14:44:29] <cmr> dido: what did you expect that to do?
[14:44:46] <dido> ciao
[14:45:20] *** Parts: dido (dido@C1EB07ED.B8527A3D.C5F254E.IP) ()
[14:45:27] <cmr> ...ok
[14:45:34] *** Quits: Earnestly (earnest@moz-F387F877.dyn.plus.net) (Ping timeout)
[14:45:50] *** Quits: a__ (a__@moz-25043B93.nycmny.fios.verizon.net) (Client exited)
[14:46:19] <tiffany> http://pastebin.ca/2441265
[14:46:25] *** Joins: kuuranne (kuuranne@moz-C4357EA7.kapsi.fi)
[14:46:50] *** Joins: a__ (a__@moz-25043B93.nycmny.fios.verizon.net)
[14:48:12] <kimundi> tiffany: hm, where is that error happening?
[14:48:51] *** Joins: Jesin (Jessin_@moz-A680C20B.cc.lehigh.edu)
[14:50:21] <tiffany> I'll paste my new parse.rs
[14:51:08] <tiffany> https://gist.github.com/tiffany352/6398426
[14:53:08] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[14:53:08] *** ChanServ sets mode: +o jdm
[14:53:16] *** Quits: Jesin (Jessin_@moz-A680C20B.cc.lehigh.edu) (Ping timeout)
[14:54:17] *** Quits: kuuranne (kuuranne@moz-C4357EA7.kapsi.fi) (Ping timeout)
[14:57:14] *** Joins: kuuranne (kuuranne@moz-C4357EA7.kapsi.fi)
[14:59:14] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[14:59:40] *** Quits: squiddy (squiddy@moz-B76B072D.adsl.alicedsl.de) (Ping timeout)
[15:02:33] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:04:08] *** Quits: jviereck (Adium@moz-48B9FD19.dip0.t-ipconnect.de) (Ping timeout)
[15:04:08] *** Quits: _1126 (1126@moz-83D60E55.lileth.net) (Ping timeout)
[15:05:01] *** Quits: Boreeas (Boreeas@moz-F35C832D.boreeas.net) (Ping timeout)
[15:05:38] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[15:06:32] *** Quits: tav (tav@moz-C302A43C.range86-149.btcentralplus.com) (Ping timeout)
[15:06:44] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[15:06:54] *** Quits: elij (elij@E6C4342E.9D386EAF.AF7F4FE0.IP) (Ping timeout)
[15:07:04] *** Quits: Deewiant (deewiant@moz-C015B7F8.iki.fi) (Ping timeout)
[15:07:35] *** Joins: Earnestly (earnest@moz-F387F877.dyn.plus.net)
[15:10:32] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[15:11:44] *** Quits: saati (bjb@moz-11469F61.harmless.hu) (Ping timeout)
[15:12:37] *** Joins: elij (elij@E6C4342E.9D386EAF.AF7F4FE0.IP)
[15:12:57] *** Joins: Boreeas (Boreeas@moz-F35C832D.boreeas.net)
[15:14:04] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[15:14:09] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (Ping timeout)
[15:15:20] *** Quits: ofeldt (ofeldt@moz-A6AFADE7.dip0.t-ipconnect.de) (Ping timeout)
[15:15:33] *** Joins: ofeldt (ofeldt@moz-A6AFADE7.dip0.t-ipconnect.de)
[15:16:12] *** Quits: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Ping timeout)
[15:17:10] *** Joins: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org)
[15:17:12] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[15:20:14] *** Quits: Boreeas (Boreeas@moz-F35C832D.boreeas.net) (Ping timeout)
[15:20:30] *** Joins: Boreeas (Boreeas@moz-F35C832D.boreeas.net)
[15:20:52] *** Joins: saati (bjb@moz-11469F61.harmless.hu)
[15:21:44] *** Joins: Chef (Chef@moz-4C317041.dsl.teksavvy.com)
[15:22:16] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[15:22:43] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (Ping timeout)
[15:23:10] *** Joins: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org)
[15:23:30] *** Quits: benh (ben@moz-4A0366D2.org) (Ping timeout)
[15:24:20] *** Joins: _1126 (1126@moz-83D60E55.lileth.net)
[15:24:24] *** Joins: tav (tav@moz-C302A43C.range86-149.btcentralplus.com)
[15:24:30] *** Quits: StarLight (StarLight@moz-A1F19695.dynamic.avangarddsl.ru) (Ping timeout)
[15:25:43] *** Joins: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com)
[15:26:09] *** Joins: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl)
[15:26:32] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[15:27:06] *** Joins: benh (ben@moz-4A0366D2.org)
[15:27:23] *** Quits: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com) (Ping timeout)
[15:27:44] *** Joins: StarLight (StarLight@moz-A1F19695.dynamic.avangarddsl.ru)
[15:27:50] *** Quits: Chef (Chef@moz-4C317041.dsl.teksavvy.com) (Quit: Goodnight!)
[15:31:03] <Seldaek> trying to port go code to rust to experiment something.. going mad :p
[15:31:24] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (Ping timeout)
[15:31:54] *** Joins: reyre (reyre@moz-89E9865B.com)
[15:33:42] *** Joins: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org)
[15:35:23] *** Joins: squiddy (squiddy@moz-B76B072D.adsl.alicedsl.de)
[15:36:07] <ChrisMorgan> Seldaek: why?
[15:36:13] <ChrisMorgan> I mean, why going mad?
[15:36:16] *** Quits: _1126 (1126@moz-83D60E55.lileth.net) (Ping timeout)
[15:36:45] <miza> i have this
[15:36:47] <miza>   struct Point(uint, uint);
[15:36:47] <miza>   let mut matrix: TreeMap<Point, uint> = TreeMap::new();
[15:36:48] <miza>   matrix.insert(Point(0,3), 6);
[15:37:10] <miza> but the point hasn't implimented the cmp functionality
[15:37:13] <miza> and i get error
[15:37:31] <miza> are there an easy way to do something like this?
[15:37:41] <Seldaek> ChrisMorgan: because I don't know go nor rust well enough and converting concepts is hard especially given it's not my code and it's not documented much
[15:37:50] <kimundi> add a #[deriving(Ord)] before the Point declaration
[15:37:57] <Seldaek> ChrisMorgan: but it's ok, if it was easy it wouldn't be fun :p
[15:38:52] *** Quits: saati (bjb@moz-11469F61.harmless.hu) (Ping timeout)
[15:39:19] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[15:39:39] <miza> kimundi: i continue have the same error
[15:39:41] *** Joins: _1126 (1126@moz-83D60E55.lileth.net)
[15:39:50] <miza>   #[deriving(Ord)]
[15:39:50] <miza>   struct Point(uint, uint);
[15:39:51] <miza>   let mut matrix: TreeMap<Point, uint> = TreeMap::new();
[15:39:51] <miza>   matrix.insert(Point(0,3), 6);
[15:39:55] <kimundi> okay, what error exactly? 
[15:40:00] <miza> error: failed to find an implementation of trait std::cmp::TotalOrd for levenshtein_distance::Point
[15:40:06] <kimundi> ah, okay
[15:40:16] <bjz_> miza: #[deriving(TotalOrd)]
[15:40:19] <kimundi> #[deriving(TotalOrd)]
[15:40:42] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:40:47] <bjz_> miza: A tree map needs some way to order the elements
[15:41:15] <bjz_> miza: so it requires the type of the element to impl the trait TotalOrd
[15:41:17] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[15:42:07] <bjz_> miza: you can use the deriving attribute to do automatic impls of things like Ord, Eq, Zero etc.
[15:42:19] <miza> #[deriving(TotalOrd)]
[15:42:19] <miza> #[deriving(TotalEq)]
[15:42:22] <miza> i add tihs
[15:42:26] <miza> and its ok
[15:42:28] *** Joins: saati (bjb@moz-11469F61.harmless.hu)
[15:42:40] <bjz_> you can comma-separate them
[15:42:50] <bjz_> (TotalOrd, TotalEq)
[15:43:01] <miza> bjz_: thanks
[15:43:07] <bjz_> np
[15:43:26] <miza> i the structure wasn more complex
[15:43:33] <miza> will still work this?
[15:43:34] <Seldaek> what's the syntax again to load a mod from a custom path/file?
[15:43:42] <miza> or u had to implemented manualy?
[15:43:59] <kimundi> Seldaek: #[path="foo/bar.rs"]
[15:44:02] <bjz_> miza: depends. You might have to impl them manually
[15:44:21] <bjz_> miza: you can use a hashmap
[15:44:21] <Seldaek> kimundi: cheers
[15:44:30] <kimundi> miza: In general deriving works if everything in the struct already implements the right things
[15:44:39] <bjz_> miza: but that is unordered
[15:44:40] <engla> miza: it depends on if all parts of the struct impl TotalOrd already, and if the derived impl has the semantics for comparison that you'd like
[15:44:50] <miza> HashMap is orded?
[15:44:55] <bjz_> what engla said :)
[15:44:59] <miza> ordered*
[15:45:01] <bjz_> miza: no
[15:45:09] <kimundi> TreeMap is Ordered, HashMap is not
[15:45:38] <bjz_> same with TreeSet vs HashSet
[15:46:43] <Seldaek> wat? error: unresolved name `u64`
[15:46:58] <Seldaek> is that not avail on windows maybe?
[15:47:05] <miza> bjs_: if HashMap is not ordered, why should i use it?
[15:47:06] <cmr> it's always available.
[15:47:17] <Seldaek> then why? 
[15:47:19] <miza> bjs_: what is the different between of them?
[15:47:20] *** Joins: jviereck (Adium@moz-F02C396F.dip0.t-ipconnect.de)
[15:47:27] <kimundi> Seldaek: where are you trying to access it how?
[15:47:43] <cmr> rusti: printfln!(u64)
[15:47:46] -rusti- pastebinned 9 lines of output: http://ix.io/7Jb
[15:47:51] <Seldaek> let foo = ~[u64, ..8];
[15:48:00] <cmr> Seldaek: right, you're using it as a variable, not a type.
[15:48:07] <Seldaek> oh right
[15:48:09] <Seldaek> should be 0u64 
[15:48:14] <Seldaek> ?
[15:48:14] <cmr> right
[15:48:21] <Seldaek> ok, always forget that
[15:48:54] <kimundi> miza: Not everything can be ordered/for some Hashing is faster
[15:49:00] <cmr> The type is [u64, ..8], the constructor os [expression, ..constant expression]
[15:49:03] <cmr> s/os/is/
[15:49:13] <miza> xmmm i understand now :p
[15:49:32] <miza> because hasmap is not ordering is not required cmp functionality?
[15:49:36] <miza> is more simple?
[15:49:56] <Seldaek> cmr: makes complete sense :)
[15:50:12] <cmr> miza: hashmaps don't require ordering because it isn't necessary.
[15:50:39] <kimundi> miza: Yeah, hash maps don't need TotalOrd. They need IterBytes, though :P
[15:50:42] <bjz_> miza: HashMaps are useful if you just want a unique entry for each key
[15:52:06] <miza> kimundi: i see that :p
[15:52:43] <tiffany> I fixed the error I had an hour ago but the only solution I could come up with was to make the result last as long as the pattern that matched it, but at least it compiles and runs now
[15:52:43] *** Joins: maik (maik___@moz-A7524DA9.dip0.t-ipconnect.de)
[15:53:12] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[15:54:13] <kimundi> tiffany: Good :) 
[15:55:39] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[15:56:06] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[15:56:54] *** Joins: veddan (viktor@moz-C79BC80B.csbnet.se)
[15:59:26] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[16:05:41] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[16:08:08] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[16:08:08] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[16:09:13] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[16:09:54] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[16:10:11] *** Joins: vodik (simon@moz-46ADDB3.dsl.bell.ca)
[16:10:12] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[16:10:46] <engla> json may be confusing, but its parser from Iterator<char> is pretty cool
[16:11:22] <engla> and has good error messages
[16:11:40] <sigma> JSON is nice to parse
[16:12:56] <doomlord> does the curent rusts' json parser accept unquoted keys .. or allow generating them (not strict json)
[16:13:50] <engla> json::Parser does not accept them
[16:21:13] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[16:21:34] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[16:23:06] <SiegeLord> rusti: 1 << 1
[16:23:07] -rusti- 2
[16:24:27] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[16:24:47] <kimundi> Urk, why do we allow functions and types to have the same name
[16:25:52] <bjz_> kimundi: Ryst has two different namespaces
[16:26:06] *** Joins: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com)
[16:26:06] <bjz_> *rust
[16:26:07] <kimundi> bjz: Sure
[16:26:19] <kimundi> but
[16:26:20] <goffrie> the name of a newtype struct is both a type and a function
[16:26:32] <kimundi> 'use syntax::codemap::spanned;'
[16:26:38] <kimundi> Guess what that imports?
[16:26:58] <kimundi> It imports BOTH a struckt spanned AND a construction function spanned
[16:27:24] <bjz_> kimundi: that's what happens with newtye structs too
[16:27:28] <kimundi> some places in the code construct spenned like 'spanned { ... }', others like 'spanned(...)'
[16:27:46] *** Quits: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com) (Ping timeout)
[16:28:27] <benh> Still think it's confusing that a typedef doesn't also create a new construction function
[16:28:30] <kimundi> bjz: A newtype constructor is syntactical a function, but it's not an actual seperate 'fn'
[16:29:23] <bjz_> benh: imo the 'type' keyword is mighty confusing
[16:29:45] <bjz_> benh: think of it like a 'tape alias'
[16:29:49] <kimundi> I talked with pcwalton about it yesterday... It's interesting
[16:30:01] <bjz_> benh: *type alias
[16:30:02] <benh> I think of it as "probably not what I wanted" :/
[16:30:12] *** Quits: jviereck (Adium@moz-F02C396F.dip0.t-ipconnect.de) (Ping timeout)
[16:30:29] *** Joins: jviereck (Adium@moz-AD1CDFFD.dip0.t-ipconnect.de)
[16:30:36] <kimundi> I think it would be nice if we could fold 'type' into 'pub use' somehow
[16:30:45] *** Joins: itdaniher (it@moz-6C3ABA7E.bstnma.fios.verizon.net)
[16:31:02] <benh> use NewType = OldType is weird because use's have to come before items...
[16:31:15] <itdaniher> I have a struct containing a vector #[deriving(IterBytes)]
[16:31:20] <bjz_> benh: the 'struct' keyword should be 'type', and pub use for the current usages of 'type'
[16:31:29] <kimundi> I'm currently cleaning up type names in syntacx and rustc because I tried to read resolve.rs and get to confused by the missing naming conventions alone :P
[16:31:29] <itdaniher> err, struct deriving IterBytes containing a vector of structs
[16:31:47] <benh> bjz_: but i want to be able to declare type aliases (that actually work) after the type itself is declared :(
[16:31:52] <itdaniher> unfortunately, cee.rs:33:11: 33:20 error: failed to find an implementation of trait std::to_bytes::IterBytes for [OUT_sample, .. 10]
[16:32:08] <benh> I can't say struct S(int); use S_ = S;, I have to say use S_ = S; pub struct S(int); :(
[16:32:18] <itdaniher> so the trait doesn't seem to be applied to a complex vector; any ideas?
[16:32:35] <bjz_> benh: true
[16:32:43] <kimundi> itdaniher: deriving doesn't work on fixed sized vectors yet, because no method works on a fixed sized vector
[16:33:01] *** Quits: jviereck (Adium@moz-AD1CDFFD.dip0.t-ipconnect.de) (Ping timeout)
[16:33:15] <benh> imo type just ought to work like c++'s typedef or D's alias or whatever :(
[16:33:20] <bjz_> benh: another option would be tho have an 'alias' keyword
[16:33:26] <benh> (or maybe C++'s using X = Y if we're feeling fancy)
[16:33:38] <bjz_> benh: then be able to alias mods as well
[16:33:43] <benh> I don't really see what we gain by making type only create a type-language alias
[16:34:08] <benh> (but obv I'm not very informed re: that kind of decision)
[16:34:22] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[16:34:37] <bjz_> benh: they are pretty limited atm
[16:35:21] <benh> Where you the one who wanted to alias a series of template intantiations into a shorter name and ended up unable to construct them because the weird implicit impl mod wasn't aliased?
[16:35:59] <bjz_> hmm?
[16:36:13] <bjz_> what do you mean by templates?
[16:36:27] <benh> parameterised structs
[16:36:58] <bjz_> might be me
[16:37:13] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Quit: Leaving)
[16:37:30] <benh> Ugh, clearly my mental model is still too close to how C++ does its types and its weird metaprogramming :(
[16:37:45] <zol> rusti:  for x in ~[1,2,3].iter() { println!("{:?}", x)};
[16:37:51] -rusti- pastebinned 11 lines of output: http://ix.io/7Jj
[16:37:58] <bjz_> yeah, you need to think more like haskell typeclasses
[16:38:08] *** Joins: jviereck (Adium@moz-1ABF008B.dip0.t-ipconnect.de)
[16:38:23] <bjz_> sort of like Rust started out with concepts but not templates
[16:39:00] *** Quits: vodik (simon@moz-46ADDB3.dsl.bell.ca) (Quit: WeeChat 0.4.2-dev)
[16:40:04] <benh> So many extensions for Haskell's type system :(
[16:42:44] <doomlord> both haskell and c++ 's type system do things rust doesn't do, but rust has its own unique blend of features
[16:43:27] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Quit: Leaving)
[16:43:37] <doomlord> i'm told haskell does have extentions that can match c++ overloading , which seems to need some sort of double-dispatch boilerplate to emulate in rust at the minute
[16:44:17] <doomlord> eg if you wanted to overload multiply to take different lhs & rhs combinations (rust can't quite do that yet?)
[16:45:21] <itdaniher> kimundi: have any ideas for a workaround?
[16:45:40] *** Quits: jviereck (Adium@moz-1ABF008B.dip0.t-ipconnect.de) (Ping timeout)
[16:45:42] *** Joins: jviereck (Adium@moz-143C7F34.dip0.t-ipconnect.de)
[16:55:03] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[16:55:28] <maik> can I make a default method with drop? Like trait Foo: Drop{//.. impl drop}
[16:57:30] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[17:00:35] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[17:03:15] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[17:03:31] <engla> what would it do?
[17:03:33] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[17:04:01] *** Joins: Jesin (Jessin_@moz-A680C20B.cc.lehigh.edu)
[17:05:48] *** Joins: Deewiant (deewiant@moz-C015B7F8.iki.fi)
[17:06:46] <Ms2ger> What does into_ascii() do?
[17:06:50] <maik> implement a default destructor
[17:07:08] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[17:07:11] <maik> to avoid duplicated code
[17:08:50] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[17:08:50] <Luqman> Ms2ger: consumes the input and casts it to ~[Ascii]
[17:09:11] <Ms2ger> Luqman, what happens to non-ascii codepoints?
[17:09:30] *** Joins: yoshi (Mibbit@AE4A2151.13322C48.EAD3CEA6.IP)
[17:09:41] <Luqman> i think it'll trip an assert! and thus fail
[17:10:50] *** Quits: yoshi (Mibbit@AE4A2151.13322C48.EAD3CEA6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:11:00] <kimundi> rusti: "hallo".into_ascii()
[17:11:01] -rusti- <anon>:5:9: 6:5 error: type `&'static str` does not implement any method in scope named `into_ascii`
[17:11:01] -rusti- <anon>:5          "hallo".into_ascii()
[17:11:01] -rusti- <anon>:6     };
[17:11:01] -rusti- error: aborting due to previous error
[17:11:01] -rusti- application terminated with error code 101
[17:11:11] <kimundi> rusti: (~"hallo").into_ascii()
[17:11:12] -rusti- ~[{chr: 104u8}, {chr: 97u8}, {chr: 108u8}, {chr: 108u8}, {chr: 111u8}]
[17:11:17] <kimundi> rusti: (~"hÃ¤llo").into_ascii()
[17:11:18] -rusti- task <unnamed> failed at 'assertion failed: self.is_ascii()', /build/rust-git/src/rust/src/libstd/str/ascii.rs:179
[17:11:18] -rusti- application terminated with error code 101
[17:11:22] <Ms2ger> I see
[17:11:23] <Ms2ger> Thanks
[17:11:49] *** Quits: rfw (rfw@moz-C65A114.rfw.name) (Ping timeout)
[17:11:58] <engla> maybe str should have a method  .push_ascii() that would be faster than .push_char
[17:12:19] <engla> just to have some benefit from the guarantees of the Ascii type
[17:12:46] <kimundi> engla: Hm, sounds like a goo idea. Would be a new str extension trait in std::ascii
[17:13:02] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[17:14:21] *** Quits: boredomist (user@moz-63CF9F31.res-cmts.sesp.ptd.net) (Client exited)
[17:16:45] *** Joins: boredomist (user@moz-63CF9F31.res-cmts.sesp.ptd.net)
[17:18:47] <heftig> what was str internally? utf8?
[17:18:53] <engla> for example extra::hex is using bytes!("01234..ef") and then .push on a vector, with a final conversion to ~str. Could be  ascii!("0123..ef") and .push_ascii instead
[17:18:56] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[17:18:56] <engla> yes
[17:19:28] <heftig> is there a similar method that gets you u32?
[17:19:36] <heftig> instead of ascii u8
[17:19:38] <engla> heftig: it's always valid utf-8, and you can iterate it by bytes or by codepoints
[17:19:58] <engla> heftig: if you want a codepoint array you can use ~[char]
[17:20:12] <engla> heftig: but the default iterator on str gives char as well
[17:20:32] <engla> rusti: "Î±Î²Î»".iter().to_owned_vec()
[17:20:33] -rusti- ~['\u03b1', '\u03b2', '\u03bb']
[17:21:00] <engla> rusti: "Î±Î²Î»".byte_iter().to_owned_vec()
[17:21:01] -rusti- ~[206u8, 177u8, 206u8, 178u8, 206u8, 187u8]
[17:21:18] <heftig> rusti: (~"hällo").into_ascii()
[17:21:18] -rusti- error: internal compiler error: unexpected failure
[17:21:18] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[17:21:19] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[17:21:19] -rusti- application terminated with error code 101
[17:21:27] <heftig> why is it suddenly ICEing?
[17:21:50] <kimundi> rusti: (~"hÃ¤llo").into_ascii()
[17:21:51] -rusti- task <unnamed> failed at 'assertion failed: self.is_ascii()', /build/rust-git/src/rust/src/libstd/str/ascii.rs:179
[17:21:51] -rusti- application terminated with error code 101
[17:22:04] <heftig> rusti: (~"hällo").into_ascii()
[17:22:04] -rusti- error: internal compiler error: unexpected failure
[17:22:04] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[17:22:04] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[17:22:04] -rusti- application terminated with error code 101
[17:22:14] <kimundi> ???
[17:22:22] <heftig> i dunno
[17:22:22] <zol> rusti: (~"hello").into_ascii()
[17:22:23] -rusti- ~[{chr: 104u8}, {chr: 101u8}, {chr: 108u8}, {chr: 108u8}, {chr: 111u8}]
[17:23:17] <kimundi> rusti: (~"hallo").into_ascii().to_str()
[17:23:17] <heftig> one moment
[17:23:18] -rusti- ~"[\'h\', \'a\', \'l\', \'l\', \'o\']"
[17:23:22] *** Quits: heftig (heftig@moz-84F5B0FB.dip0.t-ipconnect.de) (Quit: Quitting)
[17:23:23] <kimundi> rusti: (~"hallo").into_ascii().to_str_ascii()
[17:23:24] -rusti- ~"hallo"
[17:23:37] *** Joins: heftig (heftig@moz-84F5B0FB.dip0.t-ipconnect.de)
[17:23:48] *** Quits: dforsyth (dforsyth@A677A619.1C765EF.EE6E63A5.IP) (Quit: leaving)
[17:23:54] <heftig> rusti: (~"hÃ¤llo").into_ascii()
[17:23:55] -rusti- task <unnamed> failed at 'assertion failed: self.is_ascii()', /build/rust-git/src/rust/src/libstd/str/ascii.rs:179
[17:23:55] -rusti- application terminated with error code 101
[17:23:58] <heftig> there we go
[17:24:13] <heftig> i think my client sent iso-8859-1 instead of utf-8
[17:24:14] *** Joins: ofeldt- (ofeldt@moz-7C0866DD.dip0.t-ipconnect.de)
[17:24:14] *** Joins: dforsyth (dforsyth@A677A619.1C765EF.EE6E63A5.IP)
[17:24:17] <kimundi> ah. intersting
[17:24:29] <heftig> still, i don't think is_ascii should ICE when the string isn't valid utf-8
[17:24:40] <maik> how do I call .print? https://gist.github.com/MaikKlein/6399561
[17:25:05] <kimundi> it doesn't
[17:25:05] <engla> I think the compiler just can't handle other encodings heftig 
[17:25:05] *** Quits: ofeldt (ofeldt@moz-A6AFADE7.dip0.t-ipconnect.de) (Ping timeout)
[17:25:07] <kimundi> ah, the compiler itself
[17:26:25] <engla> maik: you need to import the trait I think
[17:26:30] <engla> maik: use Foo::Bar;
[17:26:31] *** Joins: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com)
[17:26:39] <maik> engla, yeah but is that the only way?
[17:27:07] <kimundi> maik: That's the way it works
[17:27:19] <engla> traits are opt-in
[17:27:53] <kimundi> maik: The thing that defines a method needs to be visible
[17:27:53] <engla> the prelude is full of default traits
[17:28:11] *** Quits: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com) (Ping timeout)
[17:28:21] <maik> I always avoided use all the time and made everything explicit like let s = Foo::Baz; 
[17:28:57] <maik> because I was afraid of possible name clashes
[17:29:46] *** Quits: boredomist (user@moz-63CF9F31.res-cmts.sesp.ptd.net) (Ping timeout)
[17:29:47] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[17:30:53] <engla> is it the only way?
[17:31:07] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[17:32:59] *** Quits: jviereck (Adium@moz-143C7F34.dip0.t-ipconnect.de) (Quit: Leaving.)
[17:33:53] <maik> here is a nameclash https://gist.github.com/MaikKlein/6399606
[17:33:58] <maik> isn't this bad?
[17:34:11] <maik> it just overwrites by default
[17:34:49] <maik> wouldn't it better if it throws an error?
[17:35:12] <maik> like Bar is visible two times
[17:36:23] <kimundi> uh, hm
[17:36:25] <kimundi> indeed
[17:36:43] <kimundi> I mean, just having two visble is not directly bad
[17:36:52] <cmr> maik: should probably be a lint
[17:36:57] <kimundi> But If it just chooses one of them in an expression, that is
[17:37:11] *** Quits: Jesin (Jessin_@moz-A680C20B.cc.lehigh.edu) (Ping timeout)
[17:39:16] <zol> https://gist.github.com/Zolomon/6399627#file-composite-rs-L68 -- why doesn't this work? How can I tell what children.vec() returns? 
[17:39:32] <zol> "cannot borrow immutable dereference of & pointer as mutable"
[17:39:55] *** Quits: squiddy (squiddy@moz-B76B072D.adsl.alicedsl.de) (Input/output error)
[17:40:59] <maik> zol, why are you doing ref mut?
[17:41:18] <cmr> zol: for x in .mut_iter()
[17:41:54] <cmr> zol: VecIterator yields &T, not &mut T
[17:42:08] <zol> cmr: Aha, thanks
[17:42:29] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Quit: Lost terminal)
[17:43:18] <zol> maik: I tikue_sleep helped me write the push() yesterday, but he never explained the ref mut, and imitated his function when trying to write my process. I'm reading http://static.rust-lang.org/doc/tutorial-borrowed-ptr.html but I'm not much wiser.
[17:43:24] *** Joins: Jesin (Jessin_@moz-A680C20B.cc.lehigh.edu)
[17:43:30] <maik> zol, and I think you can also change ref mut to ref.
[17:43:48] <cmr> no, not if he's using mut_iter
[17:43:56] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[17:44:50] <zol> cmr: mut_iter() worked, thank you. 
[17:45:02] <Ms2ger> rusti: "ë".to_ascii_uppercase()
[17:45:02] -rusti- error: internal compiler error: unexpected failure
[17:45:02] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[17:45:02] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[17:45:02] -rusti- application terminated with error code 101
[17:45:05] <Ms2ger> Oops...
[17:45:12] <cmr> heh
[17:46:17] *** Joins: boredomist (user@moz-63CF9F31.res-cmts.sesp.ptd.net)
[17:46:28] <kimundi> rusti: "Ã«".to_ascii_uppercase()
[17:46:29] -rusti- <anon>:5:9: 6:5 error: type `&'static str` does not implement any method in scope named `to_ascii_uppercase`
[17:46:29] -rusti- <anon>:5          "Ã«".to_ascii_uppercase()
[17:46:29] -rusti- <anon>:6     };
[17:46:29] -rusti- error: aborting due to previous error
[17:46:29] -rusti- application terminated with error code 101
[17:46:51] <kimundi> rusti: "Ã«".to_ascii().to_uppercase()
[17:46:51] -rusti- <anon>:5:9: 6:5 error: type `&[std::ascii::Ascii]` does not implement any method in scope named `to_uppercase`
[17:46:51] -rusti- <anon>:5          "Ã«".to_ascii().to_uppercase()
[17:46:51] -rusti- <anon>:6     };
[17:46:52] -rusti- error: aborting due to previous error
[17:46:52] -rusti- application terminated with error code 101
[17:47:01] <kimundi> rusti: "Ã«".to_ascii().to_upper()
[17:47:02] -rusti- task <unnamed> failed at 'assertion failed: self.is_ascii()', /build/rust-git/src/rust/src/libstd/str/ascii.rs:102
[17:47:02] -rusti- application terminated with error code 101
[17:47:10] <kimundi> rusti: "d".to_ascii().to_upper()
[17:47:11] -rusti- ~[{chr: 68u8}]
[17:48:01] <Ms2ger> So I guess there isn't anything that substitutes a-z --> A-Z and leaves everything else alone?
[17:48:51] <kimundi> Ms2ger: If there isn't, you can easyly write an iterator chain
[17:49:03] <cmr> Ms2ger: there is.
[17:49:08] <cmr> SimonSapin added it
[17:49:12] *** Quits: Jesin (Jessin_@moz-A680C20B.cc.lehigh.edu) (Ping timeout)
[17:49:14] <cmr> It's somewhere, don't know where
[17:49:28] <tiffany> is there any way to use iterators to extract a member of a struct? like |x| x.val?
[17:49:30] *** Quits: igl1 (igl@moz-BB3FB29F.adsl.alicedsl.de) (Connection reset by peer)
[17:49:38] <tiffany> .map(|x| x.val) that is
[17:49:41] <Ms2ger> cmr, does sound like something SimonSapin would add, it's pretty common in browsers :)
[17:49:44] <cmr> tiffany: exactly that.
[17:49:48] <tiffany> that makes an error saying I can't move out of borrowed poitner
[17:49:57] <cmr> x.val.clone()
[17:50:02] <kimundi> rusti: "asgJASSÃ–Ã¶Ã¼'Ã¼Ã–Ã¼#sww".iter().map(|c| if c.is_ascii() { c.to_ascii().to_upper().to_char() } else {c}).collect::<~str>()
[17:50:03] -rusti- ~"ASGJASS\xd6\xf6\xfc\'\xfc\xd6\xfc#SWW"
[17:50:33] *** Quits: cstrahan (cstrahan@moz-A0710861.c3-0.161-ubr1.lnh-161.md.cable.rcn.com) (Ping timeout)
[17:52:58] <SimonSapin> rusti: use std::ascii::StrAsciiExt; "AÃ€".to_ascii_lower()
[17:52:58] -rusti- ~"a\xc0"
[17:53:00] <zol> "cannot move out of dereference of & pointer" -- what does this error mean? 
[17:53:08] <SimonSapin> Ms2ger: ^
[17:53:32] <engla> Ms2ger: why would it be common in browsers?
[17:53:53] <kimundi> zol: A & pointer doesn't allow you to move things out of it, as that would imply taking ownership
[17:54:39] <kimundi> If you have a &, you can't modify anything of where it points at. That includes moving things out of it
[17:54:45] <SimonSapin> engla: thatâ€™s what we end up specifying for parts of HTML and CSS that are case-insensitive for legacy reasons, but we donâ€™t want to deal with picking a variant of Unicode case-insensitivity, locale-specific tailorization, etc.
[17:55:00] <zol> kimundi: But I can manipulate a clone of it, right? :)
[17:55:01] <Ms2ger> engla, ... what SimonSapin said
[17:55:04] <Ms2ger> SimonSapin, thanks
[17:55:21] <engla> aha, halfassedness right from the spec
[17:55:25] <kimundi> zol: exactly, you can clone the item through the & reference, and manipulate that
[17:55:47] <kimundi> zol: It just won't have anything to do with the original 
[17:56:08] <kimundi> rusti: use std::ascii::StrAsciiExt; "AÃ€A".to_ascii_lower()
[17:56:09] -rusti- ~"a\xc0a"
[17:56:31] <SimonSapin> engla: itâ€™s for things that are mostly ASCII anyway, like element or property names
[17:56:38] <engla> yeah I realize
[17:56:52] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Ping timeout)
[17:56:53] <engla> kimundi: notice that will have different effect if the codepoints are decomposed to  A + accent
[17:56:58] <SimonSapin> user-defined stuff is usually case-sensitive
[17:57:22] <engla> so the "ascii-only" transformation will depend on the unicode normalization used
[17:57:32] <SimonSapin> yes
[17:57:47] <Ms2ger> Hmm, that's a nice thing to test
[17:57:53] * Ms2ger writes that down
[17:57:54] <SimonSapin> and case-sensitive matching usualyl does not normalize either
[17:58:08] *** Joins: cstrahan (cstrahan@AAA42372.B0653F79.FFFE3AA.IP)
[17:58:23] <engla> rusti: use std::ascii::StrAsciiExt;  "AAÌ€A".to_ascii_lower()
[17:58:24] -rusti- ~"aa\u0300a"
[17:58:33] <engla> rusti: use std::ascii::StrAsciiExt;  print("AAÌ€A".to_ascii_lower())
[17:58:34] -rusti- aaÌ€a()
[17:58:39] <engla> \o/
[17:58:58] <kimundi> lol
[17:59:13] <kimundi> so much for 'ascii only' transformations
[18:00:19] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[18:00:20] <engla> right. we should have realized that one earlier :)
[18:00:27] <SimonSapin> my IRC client seems to eat the combining code points
[18:05:34] *** Joins: Jesin (Jessin_@moz-DD8D71FB.cc.lehigh.edu)
[18:07:34] *** Quits: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com) (Ping timeout)
[18:10:00] *** Joins: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com)
[18:11:41] *** Quits: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com) (Ping timeout)
[18:12:02] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[18:13:17] <tiffany> why does collect() expect an iterator of & pointers?
[18:14:16] <tiffany> oh, nevermind
[18:14:30] <kimundi> It doesn't, but you might have one :)
[18:15:25] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[18:17:02] *** Joins: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com)
[18:17:17] <tiffany> yeah I had the error backwards
[18:18:59] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[18:23:17] *** Joins: maxli (maxli@moz-6EADA619.cpe.net.cable.rogers.com)
[18:23:18] <Luqman> replaced all my @Traits with ~Traits and it worked \o/
[18:23:30] *** Quits: maxli (maxli@moz-6EADA619.cpe.net.cable.rogers.com) (Input/output error)
[18:25:50] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[18:26:16] *** Quits: Jesin (Jessin_@moz-DD8D71FB.cc.lehigh.edu) (Ping timeout)
[18:26:29] *** Joins: dranov (dranov@F5E1B4B2.15B0D01D.D731B824.IP)
[18:26:59] *** Joins: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com)
[18:27:21] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[18:28:39] *** Quits: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com) (Ping timeout)
[18:30:49] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[18:31:52] *** Joins: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net)
[18:31:59] *** Joins: jviereck (Adium@moz-143C7F34.dip0.t-ipconnect.de)
[18:33:42] *** Quits: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com) (Ping timeout)
[18:38:22] *** Joins: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com)
[18:38:55] <miza> error: mismatched types: expected `uint` but found `&uint`
[18:39:03] <miza> how could i resolve this prob?
[18:40:04] <cmr> miza: dereference: *x
[18:42:05] *** Joins: [a]bacus (snoonan_mo@moz-F95B9243.hsd1.wa.comcast.net)
[18:42:10] <maik> where can I publish my proposals?
[18:42:14] <miza> error: borrowed value does not live long enough
[18:42:16] *** [a]bacus is now known as abacus
[18:42:24] <cmr> maik: proposals for what?
[18:42:35] *** Quits: Palmik (palmik@moz-CC484FDD.tmcz.cz) (Quit: Lost terminal)
[18:42:36] <maik> cmr, for Rust
[18:42:45] <maik> cmr, like https://github.com/mozilla/rust/wiki/Proposals
[18:42:48] <cmr> maik: mailing list, github issue, or the wiki.
[18:42:52] <miza> maybe i'm doing wrong
[18:42:53] <cmr> maik: issues are prefered
[18:43:00] <maik> cmr, okay thanks
[18:43:01] <cmr> miza: can you post all your code?
[18:43:46] *** tikue_sleep is now known as tikue
[18:44:33] *** Quits: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net) (Ping timeout)
[18:44:51] <miza> https://gist.github.com/mikezaby/092e485e3aeda4a87638
[18:44:59] <miza> maybe is a litle fugly :p
[18:46:33] *** Joins: rfw (rfw@moz-C65A114.rfw.name)
[18:47:49] <tikue> miza: doesn't look ugly to me, but that unwrap() could be right after .min() no?
[18:48:20] <tikue> oh nvm!
[18:48:22] <tikue> i see now
[18:48:49] <zol> rusti: let depth = 3; for x in range(0, depth) { print(" "); };
[18:48:50] -rusti- <anon>:5:28: 5:29 warning: unused variable: `x` [-W unused-variable (default)]
[18:48:50] -rusti- <anon>:5          let depth = 3; for x in range(0, depth) { print(" "); };
[18:48:50] -rusti-                                      ^
[18:48:50] -rusti-    ()
[18:50:46] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[18:52:28] <zol> Wonder how I can make that shorter.. 
[18:54:04] <dcrewi> is there a trait for things that have an .iter() method?
[18:54:09] <cmr> dcrewi: no
[18:54:10] <myname> rusti: repeat(" ").take(3)
[18:54:10] -rusti- <anon>:5:9: 5:15 error: unresolved name `repeat`.
[18:54:10] -rusti- <anon>:5          repeat(" ").take(3)
[18:54:10] -rusti-                   ^~~~~~
[18:54:11] -rusti- error: aborting due to previous error
[18:54:11] -rusti- application terminated with error code 101
[18:54:23] <Luqman> rusti: let depth = 3; " ".repeat(depth)
[18:54:23] -rusti- ~"   "
[18:54:24] <myname> damn, what was it again
[18:54:24] <dcrewi> should there be?
[18:54:28] <myname> ah
[18:54:28] <cmr> dcrewi: .iter() does something different for almost every type.
[18:54:30] <cmr> No
[18:54:50] *** Quits: cstrahan (cstrahan@AAA42372.B0653F79.FFFE3AA.IP) (Ping timeout)
[18:54:50] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[18:55:10] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[18:55:14] <cmr> If you want to take something that has an .iter() method, take an iterator instead.
[18:55:34] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[18:55:43] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[18:55:43] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 145a1ecfb to 14bb35e23: 02http://git.io/N3iJvQ
[18:55:43] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[18:55:45] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[18:55:45] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/u-IENw
[18:55:45] <ghrust> 13rust/06auto 14874611b 15Daniel Micay: repr: print the name of structs
[18:55:45] <ghrust> 13rust/06auto 146655b3c 15Daniel Micay: repr: remove trailing {} from unit-like structs
[18:55:45] <ghrust> 13rust/06auto 14b81ffb2 15bors: auto merge of #8899 : thestinger/rust/repr, r=thestinger
[18:55:47] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[18:56:03] <strcat> http://buildbot.rust-lang.org/builders/auto-bsd-64-opt/builds/1008/steps/test/logs/stdio anyone seen this failure on bsd?
[18:56:20] <zol> myname: Oh, ocol, thanks
[18:56:58] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[18:57:47] <kimundi> rusti: " " * 3
[18:57:47] -rusti- <anon>:5:9: 5:16 error: binary operation * cannot be applied to type `&'static str`
[18:57:47] -rusti- <anon>:5          " " * 3
[18:57:47] -rusti-                   ^~~~~~~
[18:57:48] -rusti- error: aborting due to previous error
[18:57:48] -rusti- application terminated with error code 101
[18:58:19] <tikue> cmr: but isn't it being considered? some kind of iterable trait/
[18:58:26] <Ms2ger> rusti: " ".repeat(3)
[18:58:26] -rusti- ~"   "
[18:58:28] <cmr> tikue: that's different
[18:58:57] <tikue> cmr: i thought it was essentially going to be something that either has an .iter() method or something that is already an Iterator
[18:59:07] <strcat> it can't be something that's already an iterator
[18:59:13] <strcat> iterators must be mutated to iterate
[18:59:42] <tikue> ah
[18:59:49] <strcat> I guess it could take self by-value
[18:59:57] <strcat> but I think the 'self stuff will be a pain
[19:01:14] *** Joins: cstrahan (cstrahan@moz-A0710861.c3-0.161-ubr1.lnh-161.md.cable.rcn.com)
[19:01:44] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[19:02:43] <photex> hello, are min and max only defined for u32?
[19:03:14] <strcat> no
[19:03:24] <cmr> photex: no, they're defined on all T: Ord in std::cmp
[19:03:28] <photex> oh
[19:03:32] <photex> thanks cmr 
[19:03:47] <photex> I need to just download the reference pages so I can grep I think
[19:03:54] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[19:04:29] <engla>  there is some overlap, there is a std::num::max too for numerical types (uses fmax etc)
[19:05:28] <photex> which is the most appropriate for floats?
[19:05:37] <engla> the num version
[19:06:26] <photex> great. Thanks engla 
[19:10:39] *** Quits: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP) (Ping timeout)
[19:11:39] <miza> cmr: did you check my code?
[19:11:51] <cmr> miza: I looked at it but I couldn't reallty make sense of it.
[19:11:56] <cmr> miza: where is the error?
[19:12:55] <miza> when trying to assing the value to x
[19:13:04] *** Joins: igl (igl@moz-B71893B2.adsl.alicedsl.de)
[19:13:07] <miza> at line 25
[19:13:52] <cmr> *if .....
[19:14:17] <miza> i try this
[19:14:22] <miza> but i get this errro error: borrowed value does not live long enough
[19:14:44] <maik> hm don't we have a trait Iterable?
[19:14:46] <acrichto> strcat: just curious, but when changing repr, why was xfail-fast added some tests?
[19:14:55] <cmr> Try `let x = ...; matrix.insert(..., *x);`?
[19:15:09] <strcat> acrichto: because check-fast is dumb and puts everything in weird modules
[19:15:12] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[19:15:16] <strcat> acrichto: and those paths end up in the reprs
[19:15:20] <acrichto> ah yes that's right
[19:16:31] *** Joins: squiddy (squiddy@moz-B76B072D.adsl.alicedsl.de)
[19:18:34] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[19:19:04] *** Quits: maik (maik___@moz-A7524DA9.dip0.t-ipconnect.de) (Ping timeout)
[19:20:18] <kimundi> maik: It doesn't work yet
[19:22:48] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Client exited)
[19:23:12] *** Joins: reyre|away (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[19:23:39] <miza> cmr: i have try it, anyway thanks, i ll look it further
[19:24:32] <Shaladdle> Has anyone written a library for talking to a mysql server yet?
[19:25:03] <tiffany> how do you append strings?
[19:25:10] <cmr> Shaladdle: no.
[19:25:21] <Shaladdle> boo okey
[19:27:23] *** Joins: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com)
[19:27:24] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[19:29:03] *** Quits: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com) (Ping timeout)
[19:30:51] <acrichto> rusti: "a" + "b"
[19:30:54] -rusti- ~"ab"
[19:30:57] <acrichto> tiffany: ^
[19:31:15] <tiffany> parse.rs:52:16: 52:33 error: binary operation + cannot be applied to type `~str`
[19:31:20] <myname> that is kinda inconsistent
[19:31:44] <myname> you kann + strings but you cannot *
[19:32:39] <engla> well multiplication is not  str * str
[19:33:02] <myname> so?
[19:33:14] <engla> it's inconsistent either way
[19:33:24] <engla> especially when you can have   "a" * 5  but not 5 * "a"
[19:33:44] <cmr> I'm against to all binary operations on str
[19:33:49] <engla> tiffany: normally it's better to just use .push_str()
[19:33:59] <engla> and vec
[19:34:35] <benh> if "a" + "b" works, autoborrowing ought to make it work with ~str surely?
[19:34:41] *** Quits: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se) (Ping timeout)
[19:35:03] <acrichto> rusti: ~"a" + ~"b"
[19:35:04] -rusti- <anon>:5:16: 5:20 warning: unnecessary allocation, the sigil can be removed [-W unnecessary-allocation (default)]
[19:35:04] -rusti- <anon>:5          ~"a" + ~"b"
[19:35:04] -rusti-                          ^~~~
[19:35:04] -rusti- ~"ab"
[19:36:43] <strcat> stupid bsd
[19:37:15] <benh> autoborrowing vindicated
[19:38:01] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[19:38:16] <engla> rusti: ~"a" + "b"
[19:38:16] -rusti- ~"ab"
[19:38:24] <engla> rusti: "a" + ~"b"
[19:38:24] <strcat> don't know why bsd is failing
[19:38:25] -rusti- <anon>:5:15: 5:19 warning: unnecessary allocation, the sigil can be removed [-W unnecessary-allocation (default)]
[19:38:25] -rusti- <anon>:5          "a" + ~"b"
[19:38:25] -rusti-                         ^~~~
[19:38:25] -rusti- ~"ab"
[19:39:38] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[19:40:42] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[19:40:42] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14b81ffb2 to 14bb35e23: 02http://git.io/N3iJvQ
[19:40:42] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[19:40:43] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[19:40:43] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/RKGPpw
[19:40:43] <ghrust> 13rust/06auto 14e2f2a60 15Steven Stewart-Gallus: Cleanup concurrency tests...
[19:40:43] <ghrust> 13rust/06auto 14c8db9e2 15bors: auto merge of #8905 : sstewartgallus/rust/cleanup_tests, r=bblum...
[19:40:44] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[19:42:22] *** Quits: jviereck (Adium@moz-143C7F34.dip0.t-ipconnect.de) (Client exited)
[19:42:42] *** Joins: jviereck (Adium@moz-143C7F34.dip0.t-ipconnect.de)
[19:42:46] *** Joins: ww242c (ww242c@moz-AFFC9D6C.lsanca.dsl-w.verizon.net)
[19:43:29] <ww242c> t Ì·Ì´Ìest
[19:44:00] <ww242c> Ø³Ù…ÙŽÙ€ÙŽÙ‘ÙˆÙÙˆÙØ­Ø® Ì·Ì´ÌØ® Ì·Ì´ÌØ® Ì·Ì´ÌØ® Ø§Ù…Ø§Ø±ØªÙŠØ® Ì·Ì´ÌØ®
[19:44:01] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Input/output error)
[19:44:02] *** Quits: reyre|away (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Client exited)
[19:44:02] *** Quits: garthk (garth@moz-B118B14A.static.internode.on.net) (Client exited)
[19:44:03] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Client exited)
[19:44:08] *** Quits: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com) (Client exited)
[19:44:09] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Client exited)
[19:44:21] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[19:44:26] *** Quits: ww242c (ww242c@moz-AFFC9D6C.lsanca.dsl-w.verizon.net) (Quit: Leaving)
[19:47:41] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[19:50:18] *** Quits: jviereck (Adium@moz-143C7F34.dip0.t-ipconnect.de) (Quit: Leaving.)
[19:51:07] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[19:55:12] <auREAX> can someone set a ban on that dude
[19:55:21] <auREAX> hue hue hue le funny exploit
[19:55:27] *** Quits: dranov (dranov@F5E1B4B2.15B0D01D.D731B824.IP) (Ping timeout)
[19:55:36] <cmr> what exploit.
[19:55:43] <strcat> that string of text
[19:55:52] <strcat> crashes OS X applications :P
[19:55:53] <cmr> oh
[19:55:56] <cmr> well silly OS X
[19:55:59] <cmr> they should fix that
[19:56:01] <nsf> :D
[19:56:18] <auREAX> well obviously
[19:58:56] <engla> sounds like that's OS X's problem
[19:59:12] <Luqman> yea, accidentally hilighting it and having your terminal crash is not so fun
[19:59:46] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[19:59:57] <cmr> should be using tmux anyway :P
[20:03:27] *** Quits: miza (miza@moz-4DD51325.home.otenet.gr) (Input/output error)
[20:03:41] <fread2281> doy: ping
[20:03:50] <doy> pong
[20:04:54] *** Quits: Yurume_ (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[20:08:35] *** Quits: Ms2ger (Ms2ger@moz-982ABA97.adsl-dyn.isp.belgacom.be) (Quit: nn)
[20:09:43] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[20:11:13] <fread2281> doy: why to you use trie instead of hashmap in extra::term?
[20:11:34] <fread2281> s/extra::term/rust-term/
[20:11:39] *** Joins: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[20:12:12] <doy> the current implementation doesn't really do it well
[20:12:21] <doy> i was planning on fixing it up a bit
[20:12:31] <doy> but the idea is that you can follow trie pointers as the characters are read in
[20:12:44] <doy> rather than having to do a separate lookup every time
[20:13:02] *** Quits: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue_)
[20:13:43] <fread2281> doy: ok if  I steal your Keypress from rust-term for extra::term?
[20:13:47] <doy> go for it
[20:14:22] <doy> i kind of stopped worrying about rust-term that much once extra::term started actually being something worth using(:
[20:15:14] <fread2281> doy: yeah, I'm trying to add the stuff that extra::term is missing atm :)
[20:17:51] <cmr> fread2281: I'm the extra::term gatekeeper; what are you adding?
[20:18:20] <fread2281> cmr: https://github.com/fread2281/rust/compare/mozilla:master...master and also input, will push in a min
[20:18:28] <cmr> Ohhh input!
[20:18:34] <cmr> Raw terminal mode?
[20:18:44] <tikue> is extra::list::List meant to be used, or has it not been updated in a while?
[20:18:52] <fread2281> cmr: yes :)
[20:19:14] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Client exited)
[20:19:14] <cmr> tikue: git blame probably best way to find out
[20:19:24] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[20:19:25] <tikue> good call
[20:20:01] *** Joins: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[20:20:55] <cmr> fread2281: 1. typo on line 83, 2. for the `size` method, isn't that information most reliably received from sigwinch or some such?
[20:21:29] <doy> not from sigwinch, that doens't actually provide a size
[20:21:33] <doy> just notification that it changed
[20:21:45] <doy> but yeah, getting the size from the terminfo is not useful at all
[20:21:47] <cmr> well the information certainly won't be coming from the terminfo file, that's static.
[20:21:51] <doy> right
[20:21:53] <fread2281> cmr: yes, it should be
[20:21:56] <doy> there's an ioctl
[20:21:58] <cmr> ah
[20:21:59] <doy> that you need to use
[20:22:13] <fread2281> it's not nearly ready yet
[20:23:21] <doy> https://github.com/doy/rust-term/blob/master/src/termios_wrapper.c#L92-L98
[20:23:41] <cmr> doy: specified by posix?
[20:24:55] <doy> i believe so, let me look
[20:25:10] <cmr> also how does that work with pdcurses/similar
[20:25:32] <doy> what do you mean?
[20:25:49] <cmr> Does the ioctl work with pdcurses on windows?
[20:25:59] <doy> oh, no, it probably won't work on windows
[20:26:01] <cmr> extra::term needs to support all tier 1 platforms.
[20:26:03] <doy> it works at the pty level
[20:26:05] *** Joins: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[20:26:14] <cmr> As long as there's an analog it's fine
[20:26:18] <doy> i'm sure there is
[20:26:18] <cmr> but if there isn't I won't r+
[20:26:24] <cmr> fread2281: (fyi)
[20:26:43] <cmr> as long as it's possible to reliably implement it's ok if you don't implement it yet.
[20:27:22] *** Quits: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net) (Ping timeout)
[20:27:38] <doy> https://metacpan.org/source/JSTOWE/TermReadKey-2.30/ReadKey.xs#L443 https://metacpan.org/source/JSTOWE/TermReadKey-2.30/ReadKey.xs#L489
[20:27:46] <doy> for posix and windows
[20:27:53] *** Joins: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com)
[20:28:53] <cmr> cool
[20:29:33] *** Quits: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com) (Ping timeout)
[20:30:31] <tikue> bblum: ping!
[20:31:19] <kimundi> HA!, It works! - I've written a a ruby script that parses rustc error messages for locating all places where an identifier needs to get renamed
[20:31:36] *** Joins: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net)
[20:34:31] <doomlord> adhoc refactoring tool?
[20:34:39] <kimundi> yeah xD
[20:34:50] <kimundi> Though a real one would be nice
[20:35:03] * zol wonders what kind of setup everyone has that works with Rust (platforms, editors, IDEs? etc. etc.)
[20:35:27] <tikue> zol: gvim on os X
[20:35:28] <fread2281> does rust have a ioctl interface?
[20:35:33] <kimundi> archlinux - kate - chromium - xchat :P
[20:35:38] <doomlord> on the subject of error messages i always liked c++ compilers saying "x has no member y ... see definition of x".. but that might not be as useful with traits
[20:36:07] <doomlord> (eg that error put the definition of a class to navigate to in the error message list)
[20:36:21] <cmr> zol: gvim + arch linux (nightly package ftw)
[20:37:08] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Ping timeout)
[20:37:14] <doomlord> i was using dumb gedit, back on emacs now i found how to properly make 'esc'=cancel  :)
[20:37:24] <fread2281> zol: gentoo, sublime text 2
[20:38:51] <doy> i can't tell if TIOCGWINSZ is posix or not, but it seems to be fairly portable at least (other than windows)
[20:39:19] <zol> fread2281: Are you aware of the fact that Sublime Text 3 has been released? I guess yes, and that you have plugins that haven't been ported yet? 
[20:39:31] *** flaper87|afk is now known as flaper87
[20:40:10] <fread2281> zol: no, was away when it was released and just got back home
[20:40:47] <fread2281> zol: it's still in beta, rather
[20:41:09] <tikue> try_send() returning true does not guarantee that the port recv()'d the message, right?
[20:41:43] <SimonSapin> rusti: "Ã©".slice_from(1)
[20:41:50] -rusti- pastebinned 2 lines of output: http://ix.io/7Jx
[20:42:59] <strcat> SimonSapin: that stuff uses byte indices and it won't let you make an invalid str
[20:43:26] <SimonSapin> strcat: yes, thatâ€™s what I wanted to check
[20:43:28] <SimonSapin> see #8891
[20:43:42] <engla> the methods should be sane.. but it doesn't hurt checking
[20:45:42] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[20:45:43] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/RKGPpw
[20:45:43] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[20:46:17] *** Joins: mib_8q6jbc (Mibbit@moz-C3696E0E.hsd1.nm.comcast.net)
[20:46:35] *** Quits: mib_8q6jbc (Mibbit@moz-C3696E0E.hsd1.nm.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:46:53] <engla> if the confidence in str is sufficiently high you can even change char_range_at to not boundary check the continuation bytes
[20:47:11] <tiffany> uhh.. I'm trying to make an enum compile with #[deriving(Clone)], and it seems that function pointers have to be double pointers?
[20:47:25] <strcat> tiffany: &fn isn't a function pointer, it's a closure
[20:47:29] <strcat> it has an env pointer
[20:47:33] <strcat> 'extern fn' is a function pointer
[20:47:34] <tiffany> right
[20:47:37] <tiffany> I have ~fn
[20:47:40] <strcat> you can't clone ~fn
[20:47:48] <strcat> it has a captured environment
[20:47:51] <tiffany> it errors with &fn too
[20:47:55] <strcat> can't clone that either
[20:48:06] <strcat> not memory safe
[20:48:15] <tiffany> so it has to be a double pointer?
[20:48:34] <strcat> if you don't want a closure, use a function pointer (extern fn(int, int) -> bool)
[20:48:53] <strcat> closures have to be a double pointer, that's what they are by definition (an env and a function ptr)
[20:49:24] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[20:50:32] *** flaper87 is now known as flaper87|afk
[20:50:40] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[20:50:40] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/7j8yLQ
[20:50:40] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[20:50:43] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[20:50:43] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/9YYJ0w
[20:50:43] <ghrust> 13rust/06auto 14874611b 15Daniel Micay: repr: print the name of structs
[20:50:43] <ghrust> 13rust/06auto 146655b3c 15Daniel Micay: repr: remove trailing {} from unit-like structs
[20:50:43] <ghrust> 13rust/06auto 1417f9382 15Daniel Micay: document why some tests are xfail-fast
[20:50:45] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[20:50:52] <SimonSapin> Is ~~~~~~~T valid?
[20:50:57] <tikue> i think so
[20:50:59] <engla> &'static fn  is an extern fn and a Null environment though?
[20:51:04] <tikue> rusti: ~~~~~~~~~~~~~~1
[20:51:05] -rusti- ~~~~~~~~~~~~~~1
[20:51:13] <tikue> rusti: struct Foo; Foo
[20:51:14] -rusti- {}
[20:51:25] <tikue> strcat:  i thought repr prints the struct name now?
[20:51:26] <strcat> engla: I don't know if it necessarily is
[20:51:32] <strcat> tikue: it didn't land
[20:51:36] <tikue> aw bummer
[20:51:40] <strcat> broken on bsd
[20:51:42] <strcat> don't know why
[20:51:49] <strcat> works everywhere else
[20:51:51] <engla> strcat: I don't know either, but I can't find any counterexample anymore
[20:52:49] *** flaper87|afk is now known as flaper87
[20:52:50] <tiffany> is there a way to cast a closure to an extern fn?
[20:52:54] <strcat> no
[20:53:03] <tiffany> so I can't use || syntax if I go that route
[20:53:06] <strcat> a closure is strictly more than an extern fn
[20:53:08] <kimundi> only works other way round
[20:53:21] <tiffany> even if it doesn't close over anything
[20:53:22] <tikue> tiffany: what do you want to do?
[20:53:24] <strcat> tiffany: it should be possible for that syntax to make an extern fn (no captures), but it isn't atm
[20:53:29] <tikue> tiffany: you can nest functions
[20:53:31] <engla> it is planned to allow mkaing  extern fn  with lambda syntax
[20:53:32] <strcat> you just have to define a fn
[20:53:40] <strcat> rusti: fn foo() {} let x: &'static fn() = foo;
[20:53:41] -rusti- <anon>:5:25: 5:26 warning: unused variable: `x` [-W unused-variable (default)]
[20:53:41] -rusti- <anon>:5          fn foo() {} let x: &'static fn() = foo;
[20:53:41] -rusti-                                   ^
[20:53:41] -rusti- ()
[20:53:53] <strcat> rusti: fn foo() {} let _x: &'static fn() = || ();
[20:53:53] -rusti- ()
[20:54:16] <strcat> rusti: fn foo() {} static a: int = 5; let _x: &'static fn() -> int = || a;
[20:54:17] -rusti- ()
[20:54:18] <strcat> engla: 
[20:54:31] <strcat> don't know how it compiles that though
[20:54:34] <strcat> lets make it more obvious
[20:54:46] <strcat> rusti: fn foo() {} static a: int = 5; let b = &a; let _x: &'static fn() -> int = || *b;
[20:54:49] -rusti- pastebinned 16 lines of output: http://ix.io/7Jy
[20:55:04] <strcat> rusti: fn foo() {} static a: int = 5; let b = &'static a; let _x: &'static fn() -> int = || *b;
[20:55:06] -rusti- pastebinned 16 lines of output: http://ix.io/7Jz
[20:55:09] <strcat> hm guess not
[20:55:13] <strcat> but it seems in theory that could work
[20:55:17] <tikue> rusti: fn call(f: &fn()) { f() } fn foo() { println("foo!"); } call(foo);
[20:55:18] -rusti- foo!
[20:55:18] -rusti- ()
[20:55:33] *** Joins: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net)
[20:57:44] <engla> I have some wonderful code that extracts the function pointer from &'static fn
[20:58:58] *** Joins: AlexanderEkdahl (Mibbit@moz-DB00251B.cust.bredband2.com)
[20:59:55] <engla> rusti: use std::unstable::raw; fn foo() {} static a: int = 5; let _x: &'static fn() -> int = || a;  unsafe { let r: raw::Closure = std::cast::transmute(_x); r }
[20:59:56] -rusti- {code: (0x4037a0 as *()), env: (0x0 as *())}
[20:59:58] <cmr> it's jsut (envp, fnp) isn't it?
[21:00:02] <AlexanderEkdahl> Trying to use a self referential struct. I've figured out that I need to use the Option enum. But how am I supposed to create it? It complains about a missing field.
[21:00:17] <cmr> AlexanderEkdahl: set the missing field to None
[21:00:32] <strcat> engla: I don't think it's correct to extract it
[21:00:44] <strcat> afaict it's intended to eventually allow an environment, as long as the lifetime is static
[21:01:06] <AlexanderEkdahl> Thank you
[21:01:11] <engla> the environment must be statically allocated, but how is that possible?
[21:01:45] *** Quits: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net) (Ping timeout)
[21:02:10] <strcat> engla: don't know ;p
[21:02:11] <engla> I guess it could be task-local and fake 'static lifetime
[21:02:31] *** Joins: maik (maik___@moz-A7524DA9.dip0.t-ipconnect.de)
[21:04:29] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[21:04:29] *** ChanServ sets mode: +o jdm
[21:06:06] *** Joins: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP)
[21:09:28] <flaper87> hey guys, I was hoping to get some help with this issue: https://github.com/mozilla/rust/issues/7473 I understand how Freeze, Traits, @mut work - at least I think so, I'm still new to the language. My question is, In order to implement a safe version of MutexArc's access and access_cond, what is exactly needed? I guess I could wrap that code in a unsafe block and remove unsafe from the method
[21:09:30] <flaper87> definition but, is there a way to actually make the method safe without using that block?
[21:09:54] <flaper87> I guess I'd need to get rid of those unsafe pointers dereference
[21:11:25] <AlexanderEkdahl> Why is let node = Node<int> { element: 3, left: None, right: None }; not valid? How am i supposed to do it with generics?
[21:12:08] <kimundi> let node: Node<int> = Node { element: 3, left: None, right: None }
[21:13:31] <AlexanderEkdahl> Ofcourse. Thank you
[21:15:11] <zol> https://gist.github.com/Zolomon/6400671 -- anyone know what might cause this error? I'm trying to make on ubuntu 13.04.
[21:21:33] <engla> AlexanderEkdahl: I think Node::<int> { ... }  should be valid. or   Node { left: None::<int>, .. }
[21:22:13] *** Joins: brson (brson@8ECA0B87.AD77F8DE.D1E74241.IP)
[21:22:13] *** ChanServ sets mode: +ao brson brson
[21:22:40] <tiffany> how do you implement Index?
[21:22:55] <tiffany> it wants my index type to be the same as the indexee
[21:23:19] *** Joins: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com)
[21:23:58] <cmr> It shouldn't be
[21:24:12] <cmr> it's trait Index<Index, Result>
[21:24:24] <tiffany> ah
[21:24:24] <cmr> it'd only be the same type if you impl Index<T, T>
[21:24:33] <strcat> Index as-is is deprecated
[21:24:35] <tiffany> I had that part backwards
[21:24:35] <strcat> will be removed
[21:24:43] *** Joins: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP)
[21:24:49] <tiffany> is there a replacement already in, or is it just being straight up removed?
[21:24:56] <engla> I don't think Index even works right now
[21:25:02] <strcat> it will be removed to make way for a proper one
[21:25:09] <strcat> it has to be removed before a replacement can be made
[21:25:14] <strcat> so there's no point in impl'ing it
[21:25:48] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[21:26:06] *** Quits: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP) (Ping timeout)
[21:26:24] <tiffany> ah
[21:26:37] <tiffany> well I just finished implementing it, it was like 7 lines of code
[21:27:05] <engla> now see if it works
[21:27:10] <tiffany> it seems to
[21:28:10] <engla> aha
[21:28:15] *** Joins: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com)
[21:28:17] <cmr> 74 PRs this week
[21:28:20] <Earnestly> I like that, "it seems to".
[21:28:23] <cmr> and bors was idle some of the time.
[21:28:44] <cmr> so cycle time seems to be down a bunch
[21:28:46] <tiffany> I've tested it with [0] and [1] and it worked as expected both times
[21:28:52] <engla> it is down a lot
[21:29:01] <engla> bors hasn't even done anything today
[21:29:02] <tiffany> of course this is horribly abusing the [] operator
[21:29:11] <tiffany> the way I'm using it
[21:29:18] <tiffany> but there isn't much other way to clean up this code
[21:29:21] <strcat> any use of Index is abusing it atm
[21:29:26] <strcat> it doesn't work as it should :s
[21:29:27] <engla> that seems to be standard for operator overloading
[21:29:28] <tiffany> well I'm also abusing * and +
[21:29:50] <tiffany> eh, the only other time I'd use operator overloading would be on matrices and such
[21:29:55] *** Quits: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com) (Ping timeout)
[21:30:01] <tiffany> I'm using it to make specifying grammars in my parser cleaner
[21:30:14] <cmr> What runtime dependencies do rustc-generated win32 libraries have?
[21:30:17] <cmr> Just libgcc?
[21:30:26] <cmr> s/libraries/executables
[21:30:32] <cmr> well, also libraries.
[21:30:32] <engla> there's exactly such a discussion in the rust subreddit too tiffany 
[21:30:56] <engla> about using >> for a parser
[21:32:08] <tiffany> I'm using * for sequences, + for or, [] for more than x/less than x/any number of
[21:32:46] <cmr> tiffany: you can implement BitOr for | iirc
[21:32:59] <strcat> tiffany: can you make use of macros instead?
[21:33:07] <engla> infix function call syntax would be nicer..
[21:33:10] <tiffany> uhh.. can I?
[21:33:13] <tiffany> I've never used rust macros
[21:33:51] <tiffany> engla: as would lua-style () omission
[21:34:14] <tiffany> there's a number of things that would make my grammars nicer to write
[21:34:18] <engla> hm but that doesn't save us much
[21:34:19] <tiffany> I think some kind of DSL would be best though
[21:35:07] <cmr> tiffany: see how much of the DSL you can express with a macro
[21:39:31] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[21:39:56] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[21:41:39] *** Quits: austincheney (quassel@8276C73B.985A737F.603BFF2.IP) (Quit: No Ping reply in 180 seconds.)
[21:41:45] *** Joins: austincheney (quassel@8276C73B.985A737F.603BFF2.IP)
[21:45:32] <tikue_> when hashmap eventually impls index, will it call hashmap.get()?
[21:46:39] <zol> Where can I find which dependencies are needed to be installed before I can make rust? 
[21:46:45] <strcat> tikue_: index won't work that way
[21:46:52] <tikue_> strcat: how do you mean?
[21:47:00] <strcat> it needs to be split into 3 traits
[21:47:07] <tikue_> oh?
[21:47:34] <strcat> the current Index doesn't correspond to what vectors have at all
[21:48:17] <tikue_> looks like java 8 is adding default methods to interfaces
[21:48:58] <engla> java 8 is also adding unsigned integers :)
[21:49:03] <tikue_> lol
[21:49:31] <tikue_> and lambdas
[21:50:33] <strcat> but not first-class functions, so...
[21:51:08] <tikue_> yeah i'm confused
[21:51:19] <tikue_> so only lambdas can be passed into functions?
[21:51:19] <strcat> tikue_: they just made sugar for anonymous inner classes
[21:51:36] <strcat> they don't work exactly like a real lambda would
[21:51:37] <tikue_> ah
[21:54:32] <bblum> tikue_: pong
[21:55:04] <tikue_> bblum: i've been trying to imagine how a synchronous channel would work with try_send (and how the corresponding port would work with try_recv)
[21:55:18] <tikue_> i was wondering if you might have some input
[21:55:28] <tikue_> try_send seems to have an underspecified contract
[21:55:35] <bblum> tikue_: synchronous meaning the sender and receiver rendezvous (i.e. sender blocks until message is received)?
[21:55:40] <tikue_> yes
[21:56:22] <bblum> so try_send and try_recv both mean they will return none if the other endpoint gets closed
[21:56:32] <tikue_> struct SyncChan<T> { priv stream: DuplexStream<T, ()> } struct SyncPort<T> { priv stream: DuplexStream<(), T> }
[21:56:40] <tikue_> bblum: but when?
[21:56:56] <tikue_> bblum: in other words, what if the message successfully sends, but the port closes before receiving the message
[21:57:04] <tikue_> should try_send fail!() or should it return false
[21:57:11] <tikue_> or return true even
[21:57:11] <bblum> right, so, try_send is nondeterministic
[21:57:16] <bblum> try_recv actually isn't
[21:57:23] <tikue_> try_recv has to send an ack
[21:57:33] <tikue_> for SyncPort
[21:57:33] *** Quits: elly (elly@18D20C19.2A2E1A6B.EA806F19.IP) (Ping timeout)
[21:57:34] <tikue_> that could fail
[21:57:40] <tikue_> unless it's send with try_send
[21:57:51] <fread2281> rusti: enum Foo{Bar,Baz} static f: ~[Foo] = ~[Bar,Baz];
[21:57:54] -rusti- <anon>:5:46: 5:56 error: constant contains unimplemented expression type
[21:57:54] -rusti- <anon>:5          enum Foo{Bar,Baz} static f: ~[Foo] = ~[Bar,Baz];
[21:57:54] -rusti-                                                        ^~~~~~~~~~
[21:57:54] -rusti- error: aborting due to previous error
[21:57:54] -rusti- application terminated with error code 101
[21:58:23] <fread2281> rusti: enum Foo{Bar,Baz} static f: Foo = Bar;
[21:58:24] -rusti- ()
[21:58:30] <bblum> tikue_: so, try implementing it, and then figure out what contract makes sense for a blocking try_send
[21:58:38] <tikue_> bblum: so maybe something like fn try_recv<T>() -> Option<T> { let val = stream.try_recv(); stream.try_send(()); val }
[21:59:16] <fread2281> rusti: enum Foo{Bar,Baz} static f: [Foo] = [Bar,Baz];
[21:59:17] -rusti- <anon>:5:37: 5:42 error: bare `[]` is not a type
[21:59:17] -rusti- <anon>:5          enum Foo{Bar,Baz} static f: [Foo] = [Bar,Baz];
[21:59:17] -rusti-                                               ^~~~~
[21:59:17] -rusti- error: aborting due to previous error
[21:59:18] -rusti- application terminated with error code 101
[21:59:31] <tikue_> bblum: personally i think it should be { let success = self.stream.try_send(val); if success { self.stream.try_recv(); } success
[22:00:10] <tikue_> guaranteed not to fail, returns true if the message was sent successfully, but no guarantee that it was received?
[22:00:17] <fread2281> rusti: enum Foo{Bar,Baz} static f: &'static [Foo] = &'static [Bar,Baz];
[22:00:18] -rusti- ()
[22:00:30] <bblum> tikue_: what happens if the sender runs that code before the receiver drops its endpoint, but the receiver drops its endpoint instead of ever receiving
[22:00:50] <tikue_> right, so try_recv() would return None, but should that be ignored?
[22:00:52] <tikue_> i'm unsure
[22:00:55] *** Joins: elly (elly@18D20C19.2A2E1A6B.EA806F19.IP)
[22:00:59] <tikue_> because try_send()'s contract right now implies successfully sent
[22:01:00] <bblum> tikue_: why should that be ignored
[22:01:03] <tikue_> ^
[22:01:11] <tikue_> s/implies/only implies
[22:01:16] <bblum> not really
[22:01:36] <bblum> try_send's contract on an async pipe means "I *think* this got successfully sent, but there's no telling what's going on at the other end"
[22:01:40] <tikue_> the documentation is just     /// Sends a message, or report if the receiver has closed the connection.
[22:02:05] <tikue_> bblum: ok, so do you think a SyncChan's try_send should return true IFF it was received successfully
[22:02:12] <bblum> yeah, i think so
[22:02:16] <tikue_> ok
[22:02:19] <tikue_> that seems right
[22:02:21] <bblum> because you have more information available during the implementation
[22:02:25] <tikue_> ys, that's true
[22:02:29] <bblum> so you may as well provide a "more meaningful" return value
[22:02:29] <tikue_> that's definitely a good point
[22:02:34] <tikue_> yeah heh
[22:02:46] <tikue_> thank you
[22:04:17] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[22:04:39] <bblum> np :)
[22:04:48] <tikue_> bblum: 
[22:04:49] <tikue_>         if self.duplex_stream.try_send(val) {
[22:04:50] <tikue_>             self.duplex_stream.try_recv().is_some()
[22:04:51] <tikue_>         }
[22:04:53] <tikue_> that seem right to you?
[22:05:05] <tikue_> else { false }
[22:05:08] <engla> stdin isn't available in rt::io yet right? so it's still not possible to port extra::fileinput
[22:05:10] <bblum> your if statement has to return the same type in both branches
[22:05:23] <bblum> :P
[22:05:30] <tikue_> oh wait there's an and function right
[22:05:31] *** Quits: AlexanderEkdahl (Mibbit@moz-DB00251B.cust.bredband2.com) (Quit: http://www.mibbit.com ajax IRC Client)
[22:05:36] <bblum> self.duplex_stream.try_send(val) && self.duplex_stream.try_recv().is_some()
[22:06:33] <tikue_> there it is lol
[22:06:43] <tikue_> i originally wrote         and(self.duplex_stream.try_send(val), self.duplex_stream.try_recv().is_some())
[22:06:47] <tikue_> then realized, wait a sec...
[22:07:20] <tikue_> bblum: ok, now what about send_deferred? i don't really understand what it does
[22:07:37] <tikue_> is it nothing special? in other words, just call stream.send_deferred() then block on stream.recv()?
[22:08:03] <tikue_> i know it deschedules the task
[22:08:09] <bblum> it doesn't deschedule the task
[22:08:11] <bblum> the other one does
[22:08:14] <tikue_> oh
[22:08:17] <bblum> it's just about rescheduling
[22:08:26] <tikue_> so send_deferred() doesn't make sense for a sync stream
[22:08:29] <bblum> and doesn't actually change anything about the return values, or about what information you have
[22:08:49] <bblum> it doesn't really, no, because you need to deschedule to do the handshake
[22:09:08] <tikue_> yea
[22:09:10] <tikue_> i won't implement it
[22:09:41] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[22:10:55] <tikue_> bblum: now try_recv() on the other hand, probably doesn't care about whether its ack is received
[22:11:16] <bblum> tikue_: in fact, you can do one better
[22:11:35] <bblum> not only does it not matter, but it is guaranteed to be a certain value
[22:11:48] <tikue_> ooh you're right
[22:11:53] <tikue_> wait
[22:11:55] <tikue_> is it really?
[22:12:21] <tikue_> the task could fail from linked failure
[22:12:23] <tikue_> with some child task
[22:12:32] <tikue_> in between receiving and sending the ack
[22:14:58] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[22:15:42] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[22:15:42] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 149deff55 to 14c8db9e2: 02http://git.io/N3iJvQ
[22:15:42] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[22:15:43] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[22:15:43] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/yLZSIA
[22:15:43] <ghrust> 13rust/06auto 14874611b 15Daniel Micay: repr: print the name of structs
[22:15:44] <ghrust> 13rust/06auto 146655b3c 15Daniel Micay: repr: remove trailing {} from unit-like structs
[22:15:44] <ghrust> 13rust/06auto 1417f9382 15Daniel Micay: document why some tests are xfail-fast
[22:15:46] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[22:17:15] <bblum> tikue_: that is a good point
[22:17:36] <bblum> good catch, i missed that :P
[22:17:38] <tikue_> :)
[22:17:45] <bblum> and i am supposed to be the linked failure expert here
[22:17:59] <tikue_> haha dont be too hard on yourself
[22:18:04] <bblum> nah
[22:18:11] <tikue_> bblum: are you able to access doc.rust-lang.org/doc/std/index.html
[22:18:16] <tikue_> for some reason i can't 
[22:18:21] <bblum> ok, so, do you think that means you should make the sender unkillable() while it waits for a handshake response?
[22:18:48] <bblum> i can access it
[22:19:04] <tikue_> bblum: i don't know -- why would you want to? 
[22:19:09] <tikue_> oh you mean
[22:19:11] <tikue_> ohhhh
[22:19:13] <tikue_> because
[22:19:33] <tikue_> you mean if the sender receives its message, it shouldn't matter whether the other end of the chan is alive?
[22:19:48] <tikue_> s/chan/stream
[22:19:52] <tikue_> s/sender/receiver
[22:20:03] <bblum> unkillable is for when you are sure the message is "guaranteed to arrive"
[22:20:25] *** Joins: Jesin (Jessin_@moz-A680C20B.cc.lehigh.edu)
[22:20:25] <tikue_> how do you make something unkillable?
[22:20:34] <bblum> do task::unkillable { ... }
[22:21:50] <bblum> so like, in the internals of ARC::unwrap, the holder of the last reference count and the waiting unwrapper will do unkillable receives on the pipes used because there is no way for a user of the protocol to do something that would cause a message not to come, and therefore linked failure would never be needed to kill the task awake
[22:21:53] <tikue_> how can we guarantee that the message would arrive?
[22:22:02] <bblum> well, that's the question, is it guaranteed?
[22:22:25] <tikue_> if the port receives, then its ack should always arrive
[22:22:38] <bblum> and if it doesn't?
[22:22:50] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: night)
[22:22:57] <tikue_> then the chan would fail presumably
[22:23:21] <bblum> where?
[22:23:27] <tikue_> in self.stream.recv()
[22:23:43] <tikue_> oh wait
[22:23:43] <tikue_> no
[22:23:46] <tikue_> it'd block wouldn't it
[22:23:57] <bblum> it would block, and return none when the sender drops its endpoint
[22:24:22] <tiffany> how would you implement a DSL using rust macros?
[22:24:36] <tikue_> bblum: it wouldn't return none unless you called try_recv
[22:25:07] <tikue_> since None implies nothing about the successful receipt of the message, it should just fail anyway
[22:25:53] <bblum> i thought it was calling try_recv
[22:25:57] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Quit: Lost terminal)
[22:26:06] <tikue_> only on try_send
[22:26:21] *** Joins: mortisha (Mibbit@moz-4C1BB9D2.protectedgroup.com)
[22:26:23] <bblum> sure, well
[22:26:28] *** Quits: mortisha (Mibbit@moz-4C1BB9D2.protectedgroup.com) (User has been banned from Mozilla (no spamming here))
[22:26:57] <tikue_> bblum: where are you suggesting unkillable be used? i don't think i'm following precisely what you mean
[22:27:55] <bblum> fn try_send(val) { self.stream.try_send(val) && task::unkillable(|| self.stream.try_recv().is_some()) }
[22:28:17] <bblum> not yet saying this is right, rather asking if it is right or wrong :P
[22:28:44] *** Joins: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com)
[22:29:23] <tikue_> so this would make it so that the task could not be killed until try_recv() completes, one way or the other
[22:29:29] <bblum> right
[22:29:35] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[22:29:42] <tikue_> the benefit being that it protects the receiving port from an unrelated failure on the sender's side
[22:30:24] *** Quits: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com) (Ping timeout)
[22:31:12] <tikue_> that way, the port's implementation can simply be ```self.stream.try_recv() && self.stream.send(())
[22:31:58] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[22:32:06] <tikue_> and fn send(val: T) should do the same: self.stream.send(val) && task::unkillable(|| self.stream.recv())
[22:32:16] <bblum> so
[22:32:31] <bblum> what happens if two tasks are sharing *two* of these streams,
[22:32:40] *** flaper87 is now known as flaper87|afk
[22:32:51] <tikue_> bblum: do i misunderstand unkillable? what happens if you do this:
[22:32:56] <bblum> and task A tries to send on stream 1, then receive on stream 2, and task B tries to send on stream 2, then receive on stream 1?
[22:33:17] <tikue_> rusti: ::std::task::unkillable(|| fail!("i was killed"));
[22:33:19] -rusti- <anon>:5:9: 5:59 error: cannot determine a type for this expression: unconstrained type
[22:33:19] -rusti- <anon>:5          ::std::task::unkillable(|| fail!("i was killed"));
[22:33:19] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[22:33:19] -rusti- error: aborting due to previous error
[22:33:19] -rusti- application terminated with error code 101
[22:33:21] *** Quits: sebcrozet (sebcrozet@moz-7FB6C00B.w193-252.abo.wanadoo.fr) (Quit: Gone)
[22:33:26] <tikue_> rusti: ::std::task::unkillable(|| fail!("i was killed")); 1u
[22:33:26] -rusti- <anon>:5:9: 5:59 error: cannot determine a type for this expression: unconstrained type
[22:33:26] -rusti- <anon>:5          ::std::task::unkillable(|| fail!("i was killed")); 1u
[22:33:26] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[22:33:27] -rusti- error: aborting due to previous error
[22:33:29] -rusti- application terminated with error code 101
[22:33:45] <tikue_> bblum: that sounds like a race
[22:33:55] <bblum> not a race, the behaviour is deterministic :P
[22:34:00] <tikue_> right
[22:34:05] <tikue_> that sounds like deadlock
[22:34:08] <bblum> right.
[22:34:20] *** Joins: fyolnish (fyolnish@moz-52A8A20.uqwimax.jp)
[22:34:20] <bblum> so, in that case, the handshake message is not guaranteed to come
[22:34:31] <tikue_> well no
[22:34:35] <tikue_> the guarantee is still effective
[22:34:53] <tikue_> "if the sync port receives its message, it will be guaranteed to send the handshake"
[22:34:58] *** Quits: squiddy (squiddy@moz-B76B072D.adsl.alicedsl.de) (Quit: Leaving)
[22:35:03] <tikue_> there's never a guarantee it will ever actually receive the message
[22:35:14] <bblum> but the guarantee we want in order to use unkillable is not that one
[22:35:26] <tikue_> ah i see
[22:35:27] <bblum> it's "if the send succeeds, the subsequent handshake receive will also happen"
[22:35:30] <tikue_> so then unkillable won't work?
[22:35:58] <tikue_> ohh i see. yes. so then we should use try_send for both SyncPort.recv() and SyncPort.try_recv()
[22:36:03] <tikue_> to achieve the same guarantee
[22:36:23] <bblum> in general if users can make your protocol deadlock, the relevant blocking calls should be killable
[22:36:29] *** Quits: dforsyth (dforsyth@A677A619.1C765EF.EE6E63A5.IP) (Client exited)
[22:36:58] <tikue_> yeah
[22:38:06] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[22:39:14] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[22:39:52] *** Joins: mib_8p0pko (Mibbit@moz-B7BB18B4.dsl.pool.telekom.hu)
[22:40:16] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[22:40:30] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[22:41:22] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:42:38] <tikue_> rusti: Some(1u).map_move(|opt| opt)
[22:42:40] -rusti- Some(1u)
[22:42:48] *** Joins: mib_9uybip (mib_9uybip@moz-9B8221B3.rivrw1.nsw.optusnet.com.au)
[22:43:42] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[22:44:40] *** Quits: mib_9uybip (mib_9uybip@moz-9B8221B3.rivrw1.nsw.optusnet.com.au) (Client exited)
[22:49:15] <zol> http://hastebin.com/viyamuyake.txt I am still getting this error when trying to make rust? I've tried reinstalling zlib1g-dev without improvements. :(
[22:50:07] <strcat> zol: clean your build dir away
[22:50:20] *** Quits: maik (maik___@moz-A7524DA9.dip0.t-ipconnect.de) (Ping timeout)
[22:51:20] *** Quits: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Ping timeout)
[22:51:46] <tikue_> is there a tutorial on rust compilation
[22:53:05] *** Joins: dforsyth (dforsyth@A677A619.1C765EF.EE6E63A5.IP)
[22:53:32] <cmr> tikue_: not that I know of
[22:53:36] <cmr> it's a really simple compilation model though
[22:53:45] <tikue_> cmr: ok thanks. 
[22:53:46] <cmr> all the files get catted and a single object file is created.
[22:53:52] <cmr> (essentially)
[22:53:59] <tikue_> cmr: i just have two files, one which depends on the other
[22:54:06] <tikue_> one file is like a module i suppose
[22:54:30] <cmr> Well, whether you want them to be a module or a crate depends on personal preference
[22:54:44] <cmr> but yeah, module == file is pretty common
[22:56:07] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[22:56:09] <tikue_> cmr: so how do i do it? i can't just say "use foo::Foo" can i?
[22:56:47] <cmr> tikue_: `mod foo;`, where foo is the filename minus .rs prefix
[22:56:53] <cmr> then you can use from it if you want
[22:57:14] <strcat> `mod` places a module in the module tree, whether you define it inline or load it from a file
[22:57:14] <cmr> At this point you're asking about the module system, not compialtion, which *does* have a tutorial
[22:57:22] <strcat> `use` brings a name into the current scope
[22:57:25] <cmr> https://gist.github.com/Kimundi/6322035
[22:57:54] <tikue_> rusti: use extra::comm::DuplexStream; let (stream1, stream2) = DuplexStream(); stream1.send("foo"); printfln!(stream2.recv()); stream2.send("abc"); stream1.recv()
[22:57:56] -rusti- "foo"
[22:57:56] -rusti- "abc"
[22:57:57] *** Joins: mark_edward_ (Mibbit@moz-97E995A.hsd1.in.comcast.net)
[22:58:08] <tikue_> ^ why does that work without the line use std::comm::GenericChan
[22:58:16] <tikue_> is it in the prelude
[22:58:27] <cmr> Yes
[22:58:30] <mark_edward_> is Rust meant to be able to work n supercomputers as well as desktps?
[22:58:31] <tikue_> ok
[22:58:39] <cmr> mark_edward_: why wouldn't it?
[22:59:09] <mark_edward_> our concurrency model, message passing, can have problems at that scale
[22:59:17] <tikue_> mark_edward_: mpi works fine
[22:59:33] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Quit: WeeChat 0.4.1)
[22:59:59] <mark_edward_> it does, but not everythign works with that model. sometimes mutable state is needed
[23:00:25] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[23:00:29] <cmr> and for that we have unsafe code and the eventual fork/join parallelism
[23:00:36] <strcat> global mutable state *doesn't scale*
[23:00:41] <strcat> you have it backwards
[23:00:43] <tikue_> strcat++
[23:01:01] <mark_edward_> strcat: depends on what you're doing
[23:01:20] <strcat> it doesn't matter what you're doing, you can't be sharing memory across cores with NUMA without a huge performance hit
[23:01:27] <tikue_> question: should a module that relies on a trait being available use ```pub use Foo``` even with the knowledge that Foo is already in the prelude?
[23:01:29] <strcat> even on a desktop it matters, due to caches, but not as much
[23:01:34] *** Quits: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com) (Connection reset by peer)
[23:01:36] <mark_edward_> OpenCL/CUDA kernels run on hundreds of cores
[23:01:40] <cmr> And especially on a distributed system such as a supercomputer.
[23:01:50] <cmr> which are really just bigass honking clusters.
[23:01:54] <SiegeLord> And you get horrible penalties if you don't access memory correctly in OpenCL :P
[23:01:55] *** Quits: mib_8p0pko (Mibbit@moz-B7BB18B4.dsl.pool.telekom.hu) (Quit: http://www.mibbit.com ajax IRC Client)
[23:02:10] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[23:02:17] <mark_edward_> SiegeLord, right
[23:02:25] <cmr> tikue_: No, the prelude isn't supposed to change.
[23:02:34] <mark_edward_> would STM help
[23:02:36] <mark_edward_> ?
[23:02:40] <strcat> mark_edward_: no
[23:02:47] <tikue_> cmr: kk thsx
[23:03:04] <mark_edward_> what is it's purpose then?
[23:03:44] <strcat> mark_edward_: to replace locks
[23:03:49] <cmr> STM just pushes transaction cost into the hardware (or, more likely, microcode)
[23:04:13] <mark_edward_> so what do we have to replace locks? RWARC?
[23:04:19] <strcat> cmr: well STM is software
[23:04:24] <cmr> oh right
[23:04:31] <cmr> TSX I think is the intel extension
[23:04:50] <strcat> mark_edward_: Arc is atomic reference counting (atomic read/increment/write whenever one goes out of scope or comes into scope)
[23:04:58] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Quit: WeeChat 0.4.1)
[23:05:01] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[23:05:06] <strcat> the mutable ones are atomic reference counting + locking
[23:05:40] <mark_edward_> would RWARC benefit from STM? I've heard glowing praise of STM in Haskell
[23:06:10] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[23:06:14] <tikue_> if i have a standalone module, does the whole thing need to be in a mod Foo { } block
[23:06:19] <cmr> tikue_: no
[23:06:47] <tikue_> cmr: is it implicitly mod foo.rs
[23:06:49] <strcat> mod foo; is like 'mod foo { /* content of file */ }'
[23:06:53] <tikue_> ohh
[23:06:56] <tikue_> that makes sense
[23:07:08] <strcat> just don't put more than one 'mod foo;' because each one is creating another module
[23:07:09] <tikue_> and what is extern mod vs mod?
[23:07:13] *** Joins: toqueteos (Mibbit@moz-8FE22E20.dynamic.jazztel.es)
[23:07:17] <cmr> extern mod is link-time
[23:07:18] <strcat> extern mod is to link against a crate
[23:07:30] <cmr> (with compile-time checking of symbols and privacy and such through metadata_
[23:07:46] <strcat> `mod` creates a module within the current crate
[23:08:00] <strcat> either defined inline in a block or loaded from a file (same as copy-pasting the file inline)
[23:08:35] <mark_edward_> what do we do the same mess that C++ #include directives do?
[23:08:42] <mark_edward_> i thought modules were proper modules
[23:09:24] <Eridius> mark_edward_: he's saying that using mod { .. } vs just naming a module and having that loaded from a separate file is indistinguishable
[23:09:51] <strcat> mark_edward_: they are 'proper modules'
[23:10:21] <mark_edward_> oh ok. cool. i thought we'd end up ina mess and have to wait until Rust 1.xx17
[23:10:24] <strcat> they have a namespace, and you only refer to them with 'mod' once
[23:10:38] <strcat> you only load them once into the module tree
[23:11:05] <mark_edward_> right, your phrasing in that one statement seemed confusing
[23:11:17] <tikue_> so i put ```mod Foo; \n use Foo::{bar, baz};``` in my file. this seems to work, but now the module Foo can't find "extra" even though I have ```extern mod extra;```
[23:11:22] <acrichto> dbaupp: ping
[23:11:31] <strcat> tikue_: `use extra` in the submodule]
[23:11:33] <toqueteos> noob question, what's wrong with vector[a:b] for not being into rust? also s[n:] (python) == s.slice(n, n.len()) <- any shorter way?
[23:11:59] <cmr> toqueteos: s.slice_from(n)
[23:12:10] <tikue_> strcat: ah, great, thanks!
[23:12:12] <toqueteos> cmr: ty mate!
[23:12:13] <kimundi> tikue_, cmr: The new module tutorial is already merged in the the tutorial, no need to refer to the gist :)
[23:12:18] <tikue_> kimundi: ooh great thank you
[23:12:20] <cmr> toqueteos: the slice question comes up fairly frequently, I think there's detailed discussion on the ML and in reddit
[23:12:22] <cmr> kimundi: oh, nice!
[23:12:42] <tikue_> how long has stream been in the prelude for?
[23:12:46] <toqueteos> cmr: gotta check reddit then, that mailing list confuses me a lot, ty again
[23:14:15] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: brb)
[23:14:34] *** Quits: mark_edward_ (Mibbit@moz-97E995A.hsd1.in.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:16:14] *** Quits: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net) (Ping timeout)
[23:16:26] *** Joins: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net)
[23:17:31] <toqueteos> seems like it's abandoned, they could keep issues open but tag as posponed.. https://github.com/mozilla/rust/issues/1799
[23:18:10] <toqueteos> also this, last activity 2 years ago https://github.com/mozilla/rust/issues/555
[23:18:18] <toqueteos> not so much info about it
[23:18:29] <cmr> http://smallcultfollowing.com/babysteps/blog/2012/05/14/vectors/
[23:19:05] <cmr> toqueteos: Might send an email to the ML asking for status, though it's unlikely to happen until 0.9 or 0.10 or maybe later.
[23:19:34] <toqueteos> cmr: don't worry
[23:19:41] <toqueteos> just knowing it'll be there is enough
[23:19:56] <kimundi> toqueteos: There is an new issue: https://github.com/mozilla/rust/issues/4160
[23:20:28] <toqueteos> kimundi: ty
[23:20:40] <kimundi> But in anyway it's an backwards compatible change, so I wouldn't be surprised if we only get that post 1.0
[23:20:42] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[23:20:43] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/yLZSIA
[23:20:43] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[23:20:49] <kimundi> if at all
[23:21:39] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[23:21:41] <toqueteos> at least we have slice and slice_from, that's good for now
[23:21:53] <tikue_> how hard would it be to implement the ```let (mut a, b) = foo``` tuple syntax?
[23:21:56] *** Joins: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au)
[23:22:10] *** Quits: brson (brson@8ECA0B87.AD77F8DE.D1E74241.IP) (Quit: leaving)
[23:22:21] <engla> it will be eventually tikue_ 
[23:22:22] <cmr> toqueteos: also slice_to
[23:22:40] <tikue_> engla: ah, thought so, wasn't positive
[23:22:42] <Eridius> I'm surprised mut in irrefutable patterns hasn't been implemented yet. pcwalton took out the `let mut (a, b)` quite a while ago
[23:22:45] <toqueteos> cmr: [:n]?
[23:22:52] <cmr> toqueteos: that's what it does, yes.
[23:23:56] <Eridius> are there any plans to add a "raw string" literal type (i.e. where backslash-escapes are ignored)?
[23:23:59] <cmr> Does anyone know if cross-compiling to win32 works/how to do it? Is it as simple as the other cross compilers?
[23:24:06] <cmr> Eridius: not that I've heard of
[23:24:17] <cmr> rusti: bytes!("a\b")
[23:24:17] -rusti- <anon>:5:15: 5:16 error: unknown string escape: 98
[23:24:17] -rusti- <anon>:5          bytes!("a\b")
[23:24:17] -rusti-                         ^
[23:24:18] -rusti- application terminated with error code 101
[23:24:19] <cmr> yeah
[23:24:28] <cmr> (didn't think that'd work)
[23:25:41] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[23:25:41] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/mS--IA
[23:25:41] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[23:25:45] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[23:25:45] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/XWV1ag
[23:25:45] <ghrust> 13rust/06auto 14ba5f101 15Luqman Aden: librustc: Add export_name attribute to specify symbol name.
[23:25:45] <ghrust> 13rust/06auto 14a60c6a8 15bors: auto merge of #8903 : luqmana/rust/en, r=thestinger...
[23:25:46] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[23:26:06] <kimundi> Eridius: There was talk about that, yeah. Needed for regex
[23:26:42] <tikue_> re: slice syntax, there was discussion on that issue about what to call `end`. but wouldn't leaving it off be easier? i.e. instead of vec[start:end] you could just do vec[:] or vec[start:] or vec[:end]
[23:27:58] <tikue_> also, if the vec[start, .. ] syntax is adopted, what kind of syntax would be used for step?
[23:28:10] <kimundi> tikue_: I think the problem is also the ':' in general, it's planned to be used as a general type ascription operator
[23:28:24] <cmr> I would think it'd be vec[start..end..step]
[23:28:26] <tikue_> kimundi: yeah i saw that, i'm just wondering how to have a step with the .. syntax
[23:28:38] <tikue_> cmr: ah, that'd work yeah
[23:28:42] <cmr> or even just vec[start..end, step]
[23:28:50] <toqueteos> can't do vec[start .. end .. step]?
[23:28:51] <cmr> since parens are needed for tuples
[23:29:01] <tikue_> toqueteos: i'm sure whitespace would be optional
[23:29:05] *** Joins: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com)
[23:29:06] <cmr> toqueteos: whitespice there is insignificant
[23:29:09] <engla> why would slices have step?
[23:29:10] <toqueteos> yeah, i typed it wrongly
[23:29:16] <tikue_> engla: why wouldn't they?
[23:29:18] <Eridius> cmr: how is step going to work? You can't use step in a slice, unless you're building a new ~[T]
[23:29:25] <toqueteos> most people just won't them to do string[::-1]
[23:29:25] <cmr> oh good point
[23:29:30] <engla> tikue_: it's incompatible with what a slice is
[23:29:32] <toqueteos> or a range equivalent
[23:29:44] <cmr> it'd have to return a &[&T] with a step.
[23:29:48] <kimundi> tikue_: Well a slice in rust is just an start and end point
[23:30:03] <cmr> or copy
[23:30:05] <Eridius> cmr: ~[&T]. Can't possibly return a & anything
[23:30:12] <cmr> Eridius: why not?
[23:30:17] <cmr> .slice does now, why wouldn't that syntax?
[23:30:25] <cmr> oh I see why
[23:30:26] <cmr> duh
[23:30:30] <Eridius> cmr: because you need a new backing buffer :P
[23:30:32] *** Joins: stepancheg (Mibbit@moz-678E3090.yandex.net)
[23:30:38] <tikue_> kimundi: engla couldn't what a slice is change still?
[23:30:45] *** Quits: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com) (Ping timeout)
[23:30:49] <kimundi> no change
[23:30:57] <kimundi> :)
[23:30:57] <engla> it wouldn't be a lightweight view anymore
[23:31:07] <Eridius> I suppose a slice could gain a step field, but that would increase the size by 50%
[23:31:13] <engla> it's just messy to have two similar syntaxes produce very different things
[23:31:16] <Eridius> for something that's going to be almost always "1"
[23:31:24] <kimundi> tikue_: We already have the solution that would be necessarry: a new vector (~[])
[23:31:25] <Eridius> if you want step, use an iterator
[23:31:32] <tikue_> couldn't slice be a trait, and there'd be lightweight slice and step slice?
[23:31:49] <Eridius> tikue_: and now every single function that takes a slice needs to be generic? eww
[23:32:06] <tikue_> Eridius: what is the type signature of a slice right now
[23:32:13] <Eridius> &[T]?
[23:32:14] <cmr> &[T]
[23:32:14] <kimundi> &[T]
[23:32:17] <tikue_> oh
[23:32:22] <tikue_> haha true
[23:32:47] <kimundi> rusti: let x = [1, 2]; fmt!("%?", x)
[23:32:48] -rusti- ~"[1, 2]"
[23:33:04] *** Quits: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net) (Ping timeout)
[23:33:12] <kimundi> rusti: let x = [1, 2]; let x: (uint, uint) = unsafe{transmute(x)} fmt!("%?", x)
[23:33:13] -rusti- <anon>:5:68: 5:71 error: expected `;` but found `fmt`
[23:33:13] -rusti- <anon>:5          let x = [1, 2]; let x: (uint, uint) = unsafe{transmute(x)} fmt!("%?", x)
[23:33:13] -rusti-                                                                              ^~~
[23:33:13] -rusti- application terminated with error code 101
[23:33:17] <cmr> acrichto: ping
[23:33:18] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[23:33:20] <kimundi> rusti: let x = [1, 2]; let x: (uint, uint) = unsafe{transmute(x)}; fmt!("%?", x)
[23:33:20] -rusti- <anon>:5:54: 5:63 error: unresolved name `transmute`.
[23:33:20] -rusti- <anon>:5          let x = [1, 2]; let x: (uint, uint) = unsafe{transmute(x)}; fmt!("%?", x)
[23:33:20] -rusti-                                                                ^~~~~~~~~
[23:33:21] -rusti- error: aborting due to previous error
[23:33:22] -rusti- application terminated with error code 101
[23:33:23] <acrichto> cmr: pong
[23:33:28] <engla>  rusti: let x = [1, 2]; fmt!("%?", x.as_slice())
[23:33:33] <engla> rusti: let x = [1, 2]; fmt!("%?", x.as_slice())
[23:33:34] -rusti- ~"&[1, 2]"
[23:33:38] <cmr> acrichto: did https://github.com/mozilla/rust/pull/8700 introduce any compilation speedup?
[23:33:50] <acrichto> cmr: not noticeable sadly
[23:34:04] <cmr> ok
[23:34:11] <cmr> I would have expected a slowdown if anything
[23:34:32] <acrichto> nah it mainly just ran the proper analysis passes for the target
[23:34:42] <cmr> it'd be doing the same amount of work unless they have some egrigious O(n^2) algorithms
[23:34:50] <cmr> anything superlinear
[23:35:18] <acrichto> I think there may have been a tiny slowdown but nothing noticeable
[23:35:30] <cmr> Wait does that mean we aren't manually emitting the nasty target strings anymore?
[23:35:42] <acrichto> how so?
[23:35:48] <acrichto> rusti: use std::unstable::raw::Repr; [1].repr()
[23:35:49] -rusti- {data: (0x7fbb40a170e8 as *()), len: 8u}
[23:35:49] <tikue_> so the bottom line is vec[start..end] would return a slice and vec[start..end..step] would return a vector?
[23:35:52] <acrichto> engla: ^
[23:35:53] <toqueteos> new noob question, "buf := make([]byte, 1024)" as in Go is "let mut buf = [0u8, ..1024];" in Rust?
[23:36:09] <acrichto> toqueteos: yes
[23:36:13] <cmr> No
[23:36:19] <acrichto> toqueteos: only in go it's allocated on the heap, and in rust it's on the stack
[23:36:19] *** Joins: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net)
[23:36:22] <cmr> It'd be from_elem(0u8, 1024)
[23:36:36] <cmr> Otherwise you get a fixed-size vector which is *very* semantically different
[23:36:55] <acrichto> oh actually yeah, listen to cmr, not me
[23:36:57] <engla> acrichto: the slice question?
[23:37:01] <toqueteos> i want an "array" of 1024 bytes
[23:37:07] <toqueteos> mutable
[23:37:11] <acrichto> engla: oh I thought you were looking into getting the representation of a slice
[23:37:13] <kimundi> tikue_: That would be one way to implement it. But as we'Re trying to reduce unnecessary allocations as far as possible and not build in to many feutures thazt can be done as a library, the step one would probably either return an iterator or just not get implemented
[23:37:17] <cmr> rusti: vec::from_elem(0u8, 1024)
[23:37:20] -rusti- pastebinned 11 lines of output: http://ix.io/7JO
[23:37:22] <cmr> rusti: std::vec::from_elem(0u8, 1024)
[23:37:23] -rusti- <anon>:5:29: 5:32 error: mismatched types: expected `uint` but found `u8` (expected uint but found u8)
[23:37:23] -rusti- <anon>:5          std::vec::from_elem(0u8, 1024)
[23:37:23] -rusti-                                       ^~~
[23:37:23] -rusti- error: aborting due to previous error
[23:37:23] -rusti- application terminated with error code 101
[23:37:30] <engla> acrichto: no. I know about your Repr trait, it's nice.
[23:37:33] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[23:37:33] <cmr> rusti: std::vec::from_elem(1024, 0u8)
[23:37:36] -rusti- pastebinned 1 lines of output: http://ix.io/7JP
[23:37:36] <myname> why not [0u8, ..1024]?
[23:37:44] <cmr> myname: because then it's a fixed-length vector.
[23:37:48] <cmr> which are nasty to deal with.
[23:37:56] <cmr> entirely different than vectors and slices.
[23:37:57] <myname> why that?
[23:37:59] <myname> oh
[23:38:10] <cmr> Every length is its own type and it's impossible to genericize over them.
[23:38:15] <engla> tikue_: I think the step feature is dubious, at least it cannot be expressed that way that's very similar to slice syntax
[23:38:17] <acrichto> rusti: std::sys::size_of<[int, ..1024]>()
[23:38:18] -rusti- <anon>:5:28: 5:31 error: unresolved name `int`.
[23:38:18] -rusti- <anon>:5          std::sys::size_of<[int, ..1024]>()
[23:38:18] -rusti-                                      ^~~
[23:38:18] -rusti- error: aborting due to previous error
[23:38:18] -rusti- application terminated with error code 101
[23:38:27] <tikue_> kimundi: perhaps iterators could get the slice syntax as well
[23:38:31] <cmr> acrichto: missing ::
[23:38:35] <acrichto> rusti: std::sys::size_of::<[int, ..1024]>()
[23:38:36] -rusti- 8192u
[23:38:39] <stepancheg> Hi, all. For my project I need to generate ast of .rs file (generic nodes with spans, untyped). What is easiest way to get it (with help of libsyntax)? 
[23:38:45] <acrichto> rusti: std::sys::size_of::<&[int]>()
[23:38:45] -rusti- 16u
[23:39:14] <cmr> stepancheg: https://github.com/cmr/rustdoc_ng/blob/master/core.rs#L22
[23:39:26] <myname> cmr: so the only usefullness is that you know how long it is at all times?
[23:39:26] <acrichto> stepancheg: you may be interested in the driver::phase_1_parse_input and other phase-related functions
[23:39:27] <cmr> stepancheg: you'd probably only want to run phase1 though
[23:39:35] <cmr> myname: correct.
[23:39:44] <tikue_> engla: your thoughts on negative indexing?
[23:39:47] <myname> :/
[23:40:04] <cmr> myname: they're useful in crypto routines where you're dealing with fixed-length blocks
[23:40:06] <tikue_> vec[-1] etc
[23:40:07] <engla> tikue_: I think we can do that
[23:40:17] <tikue_> cool :)
[23:40:19] <engla> tikue_: but graydon doesn't like it
[23:40:27] <cmr> Or representing other data structures with large fixed-length blocks
[23:40:29] <tikue_> no? why not?
[23:40:46] <cmr> but due to the limitation of not genericizing over lengths, they aren't that great
[23:41:11] <tikue_> also, the step could be nice in pattern matching
[23:41:35] <kimundi> an uint is nice and simple, but allowing signed indices there means having to deal with ints, not being able to address all memory, etc
[23:42:06] <cmr> Also requires an extra runtime check for signedness and then some arithmetic
[23:42:15] <cmr> IMO not really worth it :\
[23:42:18] <stepancheg> cmr it returns typed ast. I need generic AST, like    struct Node { node_type: xxx, children: ~[Node] }
[23:42:35] <cmr> stepancheg: No such ast exists, you'll need to construct one yourself.
[23:42:52] <cmr> stepancheg: I think https://github.com/dobkeratops/rustfind does something like that, maybe I remember wrong
[23:43:14] <stepancheg> cmr I need to imeplement each operation in Visitor?
[23:43:14] <toqueteos> cmr so there's three types of "array" kinds: vectors, slices and fixed-length vectors?
[23:43:40] <cmr> toqueteos: The only thing that could vaguely be considered an array is fixed-length vectors.
[23:43:51] <cmr> toqueteos: the others are entirely different datastructures.
[23:44:32] <toqueteos> cmr your prev line scares me a bit: "fixed-length vector .. are nasty to deal with."
[23:45:02] <stepancheg> cmr I though so. So my next question is: if I have     fn visit_ty(&mut self, _t:&Ty, _e:E)     how do I get span of this ty?
[23:45:02] <toqueteos> what's that because of bounds checking?
[23:45:26] <cmr> stepancheg: is that an ast::Ty?
[23:45:27] <kimundi> toqueteos: Every [T, ..N] is an own type, but because we can'T currently express the N part as an type paramter or so we can't generically implement traits on all of them
[23:46:17] <stepancheg> cmr Ty is ast::Ty, visit_ty is a function of visit::Visitor trait.
[23:46:25] <toqueteos> kimundi but they pretty much have the same structure just different behaviors isn't it?
[23:46:30] <cmr> stepancheg: https://github.com/mozilla/rust/blob/master/src/libsyntax/ast.rs#L724
[23:46:31] <kimundi> toqueteos: So there is nothing imperformant about them, they just don't have any functions or methods. They are only usable if you borrow a &[] or &mut[] from them
[23:46:56] <stepancheg> cmd sorry, I overlooked it.
[23:46:59] <tikue_> kimundi: is this going to change?
[23:47:00] <engla> acrichto: regarding ExactSizeHint, do you have anything in mind about enforcing it at compile time?
[23:47:01] <kimundi> toqueteos: Depens on what you emman with same structure
[23:47:05] <stepancheg> cmr sorry I overlooked it
[23:47:34] <kimundi> toqueteos: All three represent something that gives you acces to zero or more elemnts of the same type
[23:47:39] <acrichto> engla: the default method on the trait was the best way I came up with, I'd prefer not a default but they it may just be ugly, it's unfortunate how sprawling all the iterator stuff is
[23:48:08] <toqueteos> kimundi a chunk of memory, a length and at some point you know the type of element it contains in sucession
[23:48:11] *** Joins: maik (maik___@moz-A7524DA9.dip0.t-ipconnect.de)
[23:48:16] <engla> acrichto: that would be a runtime check, but yeah
[23:48:18] <tikue_> rusti: fn fixed_vec<N>(n: N) -> [uint, ..N] { [0u, .. n] }
[23:48:18] -rusti- <anon>:5:43: 5:44 error: unresolved name `N`. Did you mean `n`?
[23:48:18] -rusti- <anon>:5          fn fixed_vec<N>(n: N) -> [uint, ..N] { [0u, .. n] }
[23:48:19] -rusti-                                                     ^
[23:48:19] -rusti- error: aborting due to previous error
[23:48:19] -rusti- application terminated with error code 101
[23:48:38] <tikue_> rusti: fn fixed_vec<N>(n: uint) -> [uint, ..N] { [0u, .. n] }
[23:48:39] -rusti- <anon>:5:46: 5:47 error: unresolved name `N`. Did you mean `n`?
[23:48:39] -rusti- <anon>:5          fn fixed_vec<N>(n: uint) -> [uint, ..N] { [0u, .. n] }
[23:48:39] -rusti-                                                        ^
[23:48:39] -rusti- error: aborting due to previous error
[23:48:39] -rusti- application terminated with error code 101
[23:49:04] <acrichto> engla: well the compile-time part would be that you're forced to think about it
[23:49:15] <engla> hah
[23:49:35] <kimundi> toqueteos: But the actual data structure is different in each case: A fixed sized vector has a fixed sized of elemnts, allways initialzed. A normal owned vector is a ptr to something heap allocated and dynamically resizable that contain zero or more elements. A slice is a pointer/size pair that points at some memory, but doesn't own it.
[23:49:35] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[23:49:55] <engla> right, ok, I think there are too many asserts in my commits there already. It's better to write this so it can be trusted. so a non-default trait method maybe
[23:51:20] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[23:51:26] <tikue_> rusti: let v = [1u, 2, 3]; let vec: ~[uint] = v; vec
[23:51:26] -rusti- <anon>:5:48: 5:49 error: mismatched types: expected `~[uint]` but found `[uint, .. 3]` ([] storage differs: expected ~ but found 3)
[23:51:27] -rusti- <anon>:5          let v = [1u, 2, 3]; let vec: ~[uint] = v; vec
[23:51:27] -rusti-                                                          ^
[23:51:27] -rusti- error: aborting due to previous error
[23:51:27] -rusti- application terminated with error code 101
[23:51:40] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[23:51:53] <cmr> Hey typeof is a keyword now, yay
[23:52:03] <tikue_> rusti: typeof(2u)
[23:52:04] -rusti- <anon>:5:9: 5:15 error: `typeof` is a reserved keyword
[23:52:04] -rusti- <anon>:5          typeof(2u)
[23:52:04] -rusti-                   ^~~~~~
[23:52:04] -rusti- application terminated with error code 101
[23:52:05] <kimundi> tikue_: Need to use v.to_owned() for that
[23:52:16] <stepancheg> cmr thank you
[23:52:25] <tikue_> kimundi: yeah i was just wondering if it could do some magic heh
[23:52:30] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Connection reset by peer)
[23:52:35] <tikue_> cmr: what's it do
[23:52:39] <cmr> tikue_: nothing yet
[23:52:42] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[23:52:42] <cmr> it's just reserved
[23:52:49] <kimundi> tikue_: In general we aim to not support magic of any kind :)
[23:52:52] <toqueteos> kimundi then pointer to memory, length, owned flag and "type"
[23:52:56] <cmr> yet another step towards backwards compat.
[23:53:01] <tikue_> kimundi: a comendable goal :)
[23:54:13] <kimundi> toqueteos: [T, ..N] does not use any kind of point. The length in a ~[T] is stored at a different place as in a &[T]
[23:54:44] <kimundi> They are really all three different in memory
[23:54:45] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[23:54:45] <cmr> ~[T] is a pointer to (length, T, T, T, T, T, ... length)
[23:55:02] *** Joins: mib_9uybip (mib_9uybip@moz-9B8221B3.rivrw1.nsw.optusnet.com.au)
[23:55:08] <cmr> &[T] is a (length, *T)
[23:55:16] <toqueteos> kimundi damn it, you win mister. too low level for me
[23:55:18] <engla> it's a pointer to length, capacity, data
[23:55:26] <engla> the vector
[23:55:33] <cmr> Oh capacity, right.
[23:55:38] <cmr> I always forget that one :\
[23:55:44] <cmr> We have shrink_to_fit now, which is nice.
[23:56:15] <kimundi> [T, ..3] == (T, T, T); ~[T] = (*)->(len, T, T, T...); &[] == (*, len) -> (T, T, T, ...)
[23:56:37] <jmgrosen> is there a hex to bytes decoder?
[23:56:48] <engla> extra::hex should do that
[23:56:48] <cmr> jmgrosen: extra::hex iiex
[23:56:53] <cmr> *iirc
[23:57:00] <jmgrosen> cmr: thanks
[23:57:33] *** Quits: mib_9uybip (mib_9uybip@moz-9B8221B3.rivrw1.nsw.optusnet.com.au) (Ping timeout)
[23:58:30] *** Quits: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Client exited)
[23:58:45] <tikue_> if you take a slice of a slice, you get &[T] right"
[23:58:50] <cmr> tikue_: yes
[23:59:04] <tikue_> that's good
[23:59:16] <tikue_> slicing syntax will apply to &[T] as well then?
[23:59:28] <cmr> yes
