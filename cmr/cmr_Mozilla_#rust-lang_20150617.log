[00:40:46] *** Joins: vky (vky@moz-fqci96.ca.comcast.net)
[01:09:40] *** Quits: Eridius (kevin@moz-6opvqs.us) (Quit: BBIAB, upgrading my Linode to KVM)
[01:20:06] *** Joins: Eridius (kevin@moz-6opvqs.us)
[03:00:57] *** Quits: frewsxcv (sid86219@moz-dneii9.brockwell.irccloud.com) (Quit: )
[03:02:49] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Quit: Leaving)
[03:02:56] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[03:22:20] *** Quits: Eridius (kevin@moz-6opvqs.us) (Quit: leaving)
[03:22:23] *** Joins: Eridius (kevin@moz-6opvqs.us)
[04:59:15] *** Quits: acrichto (acrichto@moz-u3dg2t.sfo1.mozilla.com) (Quit: leaving)
[04:59:57] *** Joins: acrichto (acrichto@moz-u3dg2t.sfo1.mozilla.com)
[09:20:33] *** Quits: vky (vky@moz-fqci96.ca.comcast.net) (Ping timeout: 121 seconds)
[12:36:04] <pnkfelix> nmatsakis: well, gotta start somewhere ...
[12:37:19] <pnkfelix> nmatsakis: I mean, I understand being unsure about the path, i.e. thinking that perhaps it would be better to just flip the switch entirely rather than act like this gradual path will have a net reduction in pain but in fact is just making busy work without actually removing the breakage from clients
[12:38:06] <pnkfelix> nmatsakis: but I still think this is the better choice, mostly (again) in terms of using it as a *model* to follow in the future.  Even if we're wrong and it missing some cases, well, that's a bug, we've had those before, and we'll have them in the future.
[12:46:01] <nmatsakis> pnkfelix: yes, I tend to agree, but also: because the warning is targeted, this should create no work for people for whom the new defaults will work ok
[12:58:42] <nmatsakis> pnkfelix: oh and, the people for whom it creates work, are people who would have to make changes anyway
[12:58:58] <nmatsakis> though I guess it won't help with the "these defaults cause confusion NOW" problem
[12:59:16] <nmatsakis> I *may* be able to adapt this branch to issue better error msgs generally, but I'm not sure
[14:23:42] <nmatsakis> pnkfelix: thoughts on macros in types (RFC 873)?
[14:25:10] <pnkfelix> nmatsakis: TBH i'm pretty concerned about the question marks around hygiene
[14:25:21] <nmatsakis> I guess I don't understand what question marks exist
[14:25:31] <nmatsakis> seems like it works...as well as hygiene ever works 
[14:25:36] <nmatsakis> which is to say not well :)
[14:25:42] <nmatsakis> but in particular does this open any new doors?
[14:26:02] <pnkfelix> nmatsakis: did the RFC author not say that they do not understand hygiene?
[14:26:30] <nmatsakis> oh, I don't know
[14:26:33] <nmatsakis> maybe :)
[14:26:47] <nmatsakis> pnkfelix: butI guess what I mean is that, afaik, we ONLY handle hygiene on local variable names
[14:27:03] <nmatsakis> clearly this is not great
[14:27:16] <nmatsakis> (perhaps I am wrong though)
[14:27:20] <nmatsakis> I guess I should make some tests
[14:27:35] <nmatsakis> pnkfelix: but also, you can synthesize types in macros now easily enough,
[14:27:41] <nmatsakis> and I think the concern about hygiene is specifically,
[14:27:44] <nmatsakis> if the MACRO binds a name
[14:28:01] <nmatsakis> you don't want it to conflict with a name that was in scope outside the macro, right?
[14:28:07] <nmatsakis> but types can't really bind names except lifetime names
[14:28:21] <nmatsakis> and those are currently (for better or...probably mostly worse) "exempted" from hygiene
[14:28:31] <nmatsakis> e.g. there would be a probem if you had
[14:28:51] <nmatsakis> macro_rules! foo { ($t:ty) => { for<'a> fn($t) })
[14:28:57] <nmatsakis> but of course that problem already exists
[14:28:59] <pnkfelix> If a macro both introduces a type and then uses that introduced type
[14:29:03] <pnkfelix> Then Foo<A=B> is a kind of binding
[14:29:04] <pnkfelix> no?
[14:29:10] <nmatsakis> no?
[14:29:16] <pnkfelix> (I should have said "trait", not "type")
[14:29:18] <nmatsakis> I mean, Foo<A=B> doesn't add bind the name A?
[14:29:21] <nmatsakis> but also
[14:29:25] <pnkfelix> I guess we don't have hygiene for associated items
[14:29:25] <nmatsakis> all this says is
[14:29:30] <nmatsakis> you can use a macro in a palce that producs a type
[14:29:35] <nmatsakis> the type grammar doesn't permit one to declare new identifiers
[14:29:39] <nmatsakis> right?
[14:29:52] <nmatsakis> (except for higher-ranked lifetimes)
[14:30:01] <pnkfelix> I'm going to answer 0.0 for this
[14:30:07] <pnkfelix> I just don't want to take the time to try to grok it
[14:30:10] <pnkfelix> and I don't want to block it
[14:30:13] <nmatsakis> well I think it's ok to write -0.5 I don't want to take the time ;)
[14:30:19] <nmatsakis> I guess I'd like somebody else to agree with my reasoning
[14:30:32] <nmatsakis> maybe i'm confused but I think that the bad cases already exist
[14:30:36] <nmatsakis> and this just adds mostly harmless cases
[14:30:58] <nmatsakis> by "I don't want to take the time" I think I mean: "suggestion: postpone"
[14:31:23] <pnkfelix> I agree that bad cases probably do already exist
[14:31:28] <pnkfelix> but making them easier to express
[14:31:46] <pnkfelix> is not necessarily a step forward
[14:31:54] <nmatsakis> true
[14:31:56] <pnkfelix> Still that is probably not a great argument
[14:32:01] <nmatsakis> it's not a terrible one,
[14:32:06] <nmatsakis> but I'd believe it more
[14:32:10] <nmatsakis> if we were taking active steps to fix macros
[14:32:14] <nmatsakis> and in particular lifetime hygiene
[14:32:14] <pnkfelix> If we add this behind a feature gate
[14:32:21] <pnkfelix> then we'll actually get hands on experience
[14:32:26] <nmatsakis> true, it would go behind a feature gate to start anyway
[14:32:26] <pnkfelix> rather than just talk in the abstract
[14:32:51] <pnkfelix> So in that sense, I guess I'd like to push this forward, as long as we won't be pushed too hard to stabliize it quickly
[14:32:52] <nmatsakis> I feel pretty confident that people are taking advantage of the lack of lifetime hygiene
[14:32:54] <nmatsakis> if nothing else, I am
[14:32:54] <nmatsakis> :)
[14:32:57] <nmatsakis> (in rusty_peg)
[14:33:12] <nmatsakis> mainly because I couldn't find any other way to do what I wanted to do,
[14:33:22] <nmatsakis> given the impoverished set of fragments etc that we have
[14:33:37] <nmatsakis> not to say we can't fix it, just saying it WILL break code
[14:33:54] * nmatsakis loves and hates the macro system
[14:36:20] <nmatsakis> pnkfelix: one thing that drives me bazookas when writing macro code btw is the inability to do things like `foo!(bar!(...))` where the `bar!` expands first; does scheme have any thoughts on this?
[14:36:37] <nmatsakis> often I can rewrite to a higher-order macro or using CPS style but...
[14:36:38] <nmatsakis> it's annoying :)
[14:36:56] <pnkfelix> some Scheme systems provide a `local-expand` function that you can use from within a procedural macro
[14:37:27] <pnkfelix> so that you can then have the outer macro (your `foo!`) do some introspection of the resulting primitive expression
[14:37:45] <pnkfelix> I don't think there's anything standardized though
[14:38:00] <nmatsakis> ah yes 
[14:38:03] <nmatsakis> I remember this now
[15:27:49] <nmatsakis> pnkfelix: well I found some cases where my warning are not as targeted as they could be; I think I know why, I should probably try to fix that...
[17:46:50] *** Quits: nrc (sid365@moz-3taf2s.0j4i.jtu0.0101.2620.IP) (A TLS packet with unexpected length was received.)
[17:46:51] *** Quits: pnkfelix (sid344@moz-nnnecs.0j4i.jtu0.0101.2620.IP) (Connection closed)
[17:46:51] *** Quits: aturon (sid379@moz-hhfc8n.0j4i.jtu0.0101.2620.IP) (Connection closed)
[17:46:51] *** Quits: nmatsakis (sid381@moz-32a8b5.0j4i.jtu0.0101.2620.IP) (Connection closed)
[17:55:56] *** Joins: vky (vky@moz-fqci96.ca.comcast.net)
[18:01:53] *** Joins: pnkfelix (sid344@moz-nnnecs.0j4i.jtu0.0101.2620.IP)
[18:02:29] *** Joins: nrc (sid365@moz-3taf2s.0j4i.jtu0.0101.2620.IP)
[18:03:01] *** Joins: nmatsakis (sid381@moz-32a8b5.0j4i.jtu0.0101.2620.IP)
[18:03:12] *** Joins: aturon_ (sid379@moz-hhfc8n.0j4i.jtu0.0101.2620.IP)
[18:03:17] *** Quits: aturon_ (sid379@moz-hhfc8n.0j4i.jtu0.0101.2620.IP) (Quit: )
[18:03:34] *** Joins: aturon_ (sid379@moz-hhfc8n.0j4i.jtu0.0101.2620.IP)
[18:03:38] *** aturon_ is now known as aturon
[18:24:38] *** Quits: vky (vky@moz-fqci96.ca.comcast.net) (Ping timeout: 121 seconds)
[18:33:49] *** Joins: frewsxcv (sid86219@moz-dneii9.brockwell.irccloud.com)
[23:13:55] *** Joins: willengler (willengler@moz-tfh1eo.epm.net.co)
[23:14:13] *** Parts: willengler (willengler@moz-tfh1eo.epm.net.co) ()
[23:30:36] *** Quits: barosl (barosl@moz-tmp.qma.67.220.IP) (Connection closed)
[23:53:56] *** Joins: barosl (barosl@moz-tmp.qma.67.220.IP)
