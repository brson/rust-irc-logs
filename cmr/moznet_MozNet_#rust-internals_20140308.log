[00:02:29] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Client exited)
[00:05:13] *** Quits: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: dherman)
[00:10:07] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:12:07] *** Quits: Kxepal832 (Miranda@moz-413026B1.pppoe.mtu-net.ru) (Ping timeout)
[00:13:37] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:25:10] <huon> bors is so lazy
[00:26:21] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[00:32:36] *** Joins: Kxepal (Miranda@moz-413026B1.pppoe.mtu-net.ru)
[00:42:48] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:46:34] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[00:56:01] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[00:57:41] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[01:04:38] *** Quits: nrc (nrc@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 30.0a1/20140305030201])
[01:16:52] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[01:16:52] <ghrust> [13rust] 15bors 04force-pushed 06auto from 144092108 to 1433768c4: 02http://git.io/N3iJvQ
[01:16:52] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[01:16:52] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[01:16:53] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/tCKnSQ
[01:16:53] <ghrust> 13rust/06auto 14a337592 15Edward Wang: Index cross-mod type definition and implementation properly in rustdoc...
[01:16:53] <ghrust> 13rust/06auto 143ade321 15bors: auto merge of #12752 : edwardw/rust/rdoc, r=alexcrichton...
[01:16:53] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[01:27:47] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[01:27:47] *** ChanServ sets mode: +qo brson brson
[01:28:58] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:53:40] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[01:58:12] <brson> strcat: what's the state of Ord/Eq?
[01:58:47] *** Quits: carter (carter@moz-58F59B3A.members.linode.com) (Quit: ZNC - http://znc.in)
[01:59:17] *** Joins: carter (carter@moz-58F59B3A.members.linode.com)
[01:59:53] <strcat> brson: can't make everyone happy, no matter what we do with those :P
[02:02:01] <strcat> brson: I pretty much just want to leave the existing traits but rename them + add inheritance + add proper rules atm
[02:02:19] <strcat> PartialOrd/PartialEq would define the operators, and would require a sane partial order
[02:02:33] <strcat> Float would inherit from both, so you can use the operators on a generic IEEE754 float type
[02:02:48] <strcat> PartialOrd would inherit from PartialEq
[02:02:57] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Ping timeout)
[02:03:05] <strcat> then Ord/Eq inheriting from PartialOrd/PartialEq, and most generic code would use that
[02:03:12] <strcat> since even std::cmp::min isn't right for floats
[02:03:30] <strcat> rusti: use std::f64::NAN; NAN.max(2.0)
[02:03:34] -rusti- 2f64
[02:03:39] <strcat> rusti: use std::f64::NAN; 2.0f64.max(NAN)
[02:03:41] -rusti- 2f64
[02:03:53] <strcat> rusti: use std::f64::NAN; std::cmp::min(NAN, 2.0)
[02:03:54] -rusti- 2f64
[02:03:59] <strcat> rusti: use std::f64::NAN; std::cmp::min(2.0, NAN)
[02:04:00] -rusti- -NaNf64
[02:04:44] <strcat> and I want to get rid of the other float traits... just have Float as 'IEEE754 floating point'
[02:06:15] <brson> strcat: what do you dislike about the solution for Ord/Eq that you described?
[02:06:40] <strcat> brson: well I like it, but having 4 traits is a bit complex
[02:06:50] <strcat> but I'm starting to settle on the opinion that having just 2 is worse
[02:07:09] <strcat> because you either have to prevent floats in generic code from using the operators, or prevent people from using the operators when they want a total ordering
[02:08:09] <strcat> brson: imo each trait should undergo a lot of scrutiny because they make life more complex, but in this case I think they're worth it
[02:08:29] <strcat> maybe silly to think so hard about such a simple thing, but it's a core part of the language
[02:08:40] <brson> strcat: does your PR implement everything you described above?
[02:09:00] <strcat> brson: it just adds the inheritance
[02:09:04] <strcat> brson: renaming them is... hard
[02:09:09] <strcat> brson: due to deriving in stage0
[02:09:42] <strcat> brson: also I didn't switch min/max to TotalOrd yet, although I did add proper min/max methods to Float
[02:09:51] <strcat> that landed already
[02:10:44] <strcat> IEEE754 says max/min should treat NaN as missing data, so there's basically no sane answer to whether something like (0.0, NaN) or (NaN, 2.0) is the maximum
[02:12:43] <strcat> brson: rebased it btw
[02:14:03] <brson> this sounds like a good design to me. even if not the final design, it's at least better than now
[02:14:21] <brson> i know pcwalton had some quite different ideas though
[02:15:22] <strcat> brson: I've gone back and forth between a lot of opinions before settling on this ;p
[02:15:35] <strcat> rust-core just didn't implement Eq/Ord for floats, but it's annoying in generics
[02:16:08] <strcat> for a while I wanted to make min/max into default methods.... but deriving will do them wrong
[02:16:39] <strcat> f32/f64 can override them but deriving on Foo(f32, f32) would do it wrong
[02:17:59] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[02:18:02] <strcat> and I do think a lot of stuff wants total ordering...
[02:18:40] <strcat> [NaN, 1.0, 2.0] and [1.0, NaN, 2.0] would have no guarantee of sorting into the same array with partial order
[02:18:59] <strcat> it's just a huge pain. the kind of pain you probably want people to opt into
[02:19:19] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[02:21:45] <strcat> brson: oh and one more sad thing is that I can't figure out a way of getting rid of the equals method on TotalEq :(
[02:22:14] <strcat> brson: because if there's no method, deriving will work even in the inner types don't impl TotalEq
[02:22:23] <strcat> just a limitation of AST-based deriving...
[02:23:59] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[02:26:50] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[02:26:50] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/tCKnSQ
[02:26:50] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[02:27:52] <huon> strcat: could have it expand to `fn assert_total_eq<T: TotalEq>(_: &T) {} assert_total_eq(&self.x) assert_total_eq(&self.y) ...`
[02:28:04] <strcat> huon: ah, good point
[02:31:53] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[02:31:53] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/6JoyZg
[02:31:53] <ghrust> 13rust/06auto 1495b75f7 15Daniel Micay: create a sensible comparison trait hierarchy...
[02:31:53] <ghrust> 13rust/06auto 141469088 15bors: auto merge of #12520 : thestinger/rust/cmp, r=brson...
[02:31:54] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[02:32:52] *** Quits: gwty (gwtypc@E3B3B46E.89CCF027.137C914F.IP) (Connection reset by peer)
[02:51:55] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[02:56:47] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[02:58:36] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[03:04:08] *** Quits: eibwen (kvirc@moz-C9034F51.dip0.t-ipconnect.de) (Ping timeout)
[03:06:53] <larsberg> Am I being dumb in my removal of a `**`: https://gist.github.com/larsbergstrom/9424706 ? I don't see why it's telling me that `ref mut i` is immutable, though maybe I've just been working on this rust upgrade for too long and I'm getting error message fatigue...
[03:19:28] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[03:21:52] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[03:21:52] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/jw6MSw
[03:21:52] <ghrust> 13rust/06auto 141c86179 15Liigo Zhuang: Explicitly write down 0.1 release date in RELEASES.txt, to confirm Rust's birthday.
[03:21:52] <ghrust> 13rust/06auto 144c90a7f 15bors: auto merge of #12748 : liigo/rust/rust-birthday, r=brson...
[03:21:53] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[03:23:48] *** Quits: japaric (japaric@5F2F039.6B340C30.BFC118EE.IP) (Ping timeout)
[03:24:57] *** Joins: japaric (japaric@FB100779.A23A5F6C.E5B504CC.IP)
[03:27:21] <brson> larsberg: does `for result in *self` work?
[03:28:20] <brson> maybe the **self before was an unnecessary double-deref that derefed through ErrorLoggerIterator incorrectly
[03:28:38] <brson> presumably ErrorLoggerIterator implements ITer
[03:30:05] <larsberg> brson: Good call! That got me past it (and on to: https://gist.github.com/larsbergstrom/9424908 , but that looks much more feasible <grin>). ty!
[03:34:53] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[03:35:10] *** Joins: brson (brson@C91C7F36.70518F41.9D18269F.IP)
[03:35:10] *** ChanServ sets mode: +qo brson brson
[03:42:51] <sfackler> brson: how are you feeling on https://github.com/mozilla/rust/pull/12617 ?
[03:53:11] *** Quits: zz_kimundi (kimundi@moz-9A465F61.dip0.t-ipconnect.de) (Ping timeout)
[03:56:38] *** Joins: zz_kimundi (kimundi@moz-DCDD522C.dip0.t-ipconnect.de)
[03:56:40] *** zz_kimundi is now known as kimundi
[04:15:26] *** Joins: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP)
[04:15:26] *** ChanServ sets mode: +ao dherman dherman
[04:19:00] <brson> sfackler: i think it probably makes sense, but am worried about the macro system growing with little oversight
[04:22:08] *** Joins: whitglint (uid15486@moz-31ABA2C0.irccloud.com)
[04:24:41] *** Quits: intuxicated (intuxicate@A9443CC2.9D1E10BA.3FFBF42F.IP) (Client exited)
[04:31:49] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[04:31:49] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/jw6MSw
[04:31:49] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[04:36:43] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[04:36:43] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/VAGeaA
[04:36:43] <ghrust> 13rust/06auto 144d7d101 15Daniel Micay: create a sensible comparison trait hierarchy...
[04:36:43] <ghrust> 13rust/06auto 1496e8c00 15bors: auto merge of #12520 : thestinger/rust/cmp, r=brson...
[04:36:43] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[04:41:11] <sfackler> yeah
[04:43:54] *** Quits: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net) (Ping timeout)
[04:46:33] *** Quits: brson (brson@C91C7F36.70518F41.9D18269F.IP) (Ping timeout)
[04:52:12] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[04:57:35] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[04:59:22] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[05:09:05] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[05:09:13] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[05:11:10] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:13:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:13:56] *** Joins: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net)
[05:15:46] *** Joins: bvssvni (Mibbit@moz-C4579D6F.bb.online.no)
[05:24:50] *** Quits: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP) (Ping timeout)
[05:28:25] *** Quits: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net) (Ping timeout)
[05:30:11] *** Joins: esummers_ (textual@moz-3B015C90.wi.res.rr.com)
[05:30:19] *** Quits: esummers_ (textual@moz-3B015C90.wi.res.rr.com) (Client exited)
[05:46:46] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[05:46:46] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/VAGeaA
[05:46:46] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[05:49:22] *** Joins: edwardw (edwardw@4112974A.B4358688.30F15291.IP)
[05:49:36] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[05:49:57] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[05:51:40] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[05:59:51] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[06:02:46] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[06:04:25] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[06:09:40] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[06:09:40] *** ChanServ sets mode: +qo brson brson
[06:26:38] <klutzy> r? https://github.com/mozilla/rust/pull/12762
[06:38:34] *** Quits: canhtak (canhtak@moz-7EB111.wl.t.ulaval.ca) (Quit: canhtak)
[06:43:45] *** Quits: bvssvni (Mibbit@moz-C4579D6F.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[06:53:35] <brson> klutzy: removing 0-length struct args is in the C ABI? can we test that?
[06:55:15] <strcat> brson: C forbids 0-size types, so it should probably just be forbidden
[06:55:29] <strcat> although they do exist as a GNU ext
[06:55:34] <strcat> dunno if they're formally part of any ABI
[06:56:09] <Eridius> I just checked the OS X IA-32 ABI and it doesn't mention 0-size types
[07:01:42] <brson> forbid it for certain foreign ABI's but not others? only on x86?
[07:02:06] <strcat> brson: everywhere imo, it's never standard C
[07:02:54] <Eridius> strcat: hmm, clang is happy to compile a `struct Foo {}` and sizeof() reports a size of 0
[07:03:00] <strcat> Eridius: -pedantic
[07:03:20] <Eridius> hmm, that does say it's a GNU extension
[07:03:28] <Eridius> I had -std=c99 though, which I thought iddn't include GNU extensions?
[07:03:33] <strcat> Eridius: it does
[07:03:40] <Eridius> I thought that was -std=gnu99
[07:03:46] <strcat> Eridius: that includes *more* gnu exts
[07:03:47] <strcat> ;p
[07:03:49] <Eridius> bah
[07:04:26] <strcat> Eridius: they had to copy gcc
[07:04:33] <strcat> not really up to clang what those flags do
[07:04:37] <Eridius> yeah
[07:04:43] <strcat> they also accept the gcc warnings even if they don't implement them
[07:05:42] <strcat> Eridius: oh and compile the same thing as C++
[07:05:55] <strcat> Eridius: C++ *does* allow empty structs, and mandates that they not be 0 size
[07:06:04] <strcat> because it says all values need a unique address
[07:06:29] <Eridius> a quick test of printing argument pointers suggests that a zero-size struct is still aligned to 4 bytes as a function parameter.
[07:06:35] <Eridius> in both -arch i386 and -arch x86_64
[07:06:38] <Eridius> (OS X)
[07:06:47] <strcat> meh, best to forbid it
[07:06:55] <strcat> it may do different stuff with other compilers
[07:07:00] <Eridius> agreed. Just make it an error
[07:07:26] <strcat> Eridius: another gnu ext is a 0-size array
[07:07:42] <strcat> totally useless. they used to use it for flexible-length structs but they now consider it undefined behavior per the standard
[07:07:48] <strcat> since c99 added an idiom for it
[07:07:57] <Eridius> :/
[07:08:17] <strcat> although I think they only consider it undef in loops
[07:08:28] <strcat> they'll optimize out a loop over an old-style non-standard flexible-length struct
[07:08:35] <strcat> need -fno-aggressive-loop-optimizations or w/e
[07:08:44] <strcat> I'm sure they'll break it more
[07:09:58] <strcat> Eridius: they have some truly horrible extensions... especially the gnu asm ones
[07:10:02] <Eridius> :/
[07:10:20] <strcat> iirc, one trick the linux kernel uses is to generate invalid asm in some cases so it isn't used
[07:11:49] <strcat> Eridius: I never run into a need to use gnu99/gnu++11 though...
[07:12:00] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:12:01] <strcat> even when using gnu exts like function/variable attributes all over
[07:12:05] <strcat> it never complains
[07:12:14] * strcat shrugs
[07:12:49] <strcat> Eridius: http://gcc.gnu.org/onlinedocs/gcc/Labels-as-Values.html#Labels-as-Values these are great
[07:12:52] <strcat> real jump tables! ;p
[07:13:07] <strcat> I think those are the types of things where it'll make you use gnu
[07:13:52] <Eridius> "unary operator &&" ... wat
[07:14:22] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:16:38] <strcat> Eridius: http://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html#Other-Builtins oh and this
[07:16:45] <strcat> makes me laugh
[07:17:05] <strcat> why even have a libc? ;p
[07:17:17] <strcat> although LLVM will get there too
[07:17:50] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[07:20:13] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[07:20:13] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[07:21:16] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:21:26] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:23:08] *** Quits: edwardw (edwardw@4112974A.B4358688.30F15291.IP) (Quit: Leaving...)
[07:45:25] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[07:47:14] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[07:56:18] *** Quits: luz (lu.cy@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[07:56:53] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[07:57:31] *** Joins: luziie (luziie@moz-CD18B14B.customer.cdi.no)
[08:08:46] *** Joins: edwardw (Mibbit@6F971E73.71427BF8.1D660E71.IP)
[08:09:14] <edwardw> rusti: let Id = |u32| -> u32; let id: Id = |x| x; id(10)
[08:09:15] -rusti- <anon>:10:30: 10:31 error: unexpected token: `;`
[08:09:15] -rusti- <anon>:10         let Id = |u32| -> u32; let id: Id = |x| x; id(10)
[08:09:15] -rusti-                                        ^
[08:09:15] -rusti- application terminated with error code 101
[08:09:31] <edwardw> rusti: type Id = |u32| -> u32; let id: Id = |x| x; id(10)
[08:09:33] -rusti- <anon>:10:19: 10:31 error: missing lifetime specifier
[08:09:33] -rusti- <anon>:10         type Id = |u32| -> u32; let id: Id = |x| x; id(10)
[08:09:33] -rusti-                             ^~~~~~~~~~~~
[08:09:33] -rusti- error: aborting due to previous error
[08:09:33] -rusti- application terminated with error code 101
[08:09:59] <huon> rusti: type Id<'a> = 'a |u32| -> u32; let id: Id = |x| x; id(10)
[08:10:00] -rusti- 10u32
[08:10:06] <edwardw> wrong channel >_<
[08:10:22] <edwardw> sorry
[08:10:44] <huon> i'll never forgive you
[08:10:46] <huon> :P
[08:15:29] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[08:15:36] *** Parts: edwardw (Mibbit@6F971E73.71427BF8.1D660E71.IP) ()
[08:22:10] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[08:24:56] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:25:07] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:28:07] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Quit: leaving)
[08:36:03] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[08:41:50] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:41:56] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:42:46] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[09:10:30] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[09:12:48] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:15:11] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:24:08] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[09:49:18] *** Joins: eibwen (kvirc@moz-40E704BF.dip0.t-ipconnect.de)
[09:55:25] *** Quits: eibwen (kvirc@moz-40E704BF.dip0.t-ipconnect.de) (Ping timeout)
[10:06:04] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[10:16:18] *** Joins: eibwen (kvirc@moz-40E704BF.dip0.t-ipconnect.de)
[10:18:59] *** Quits: eibwen (kvirc@moz-40E704BF.dip0.t-ipconnect.de) (Ping timeout)
[10:27:39] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[10:48:23] <eddyb> so I've been moved right after nrc... does someone want me to be the next core dev?
[10:49:22] <huon> after nrc in what?
[10:57:02] <eddyb> huon: https://docs.google.com/spreadsheet/ccc?key=0AlWBWplsaTZvdGdSdEVzZW1BeDA5dm0zM2FFeW0ySEE#gid=0
[10:57:28] <eddyb> we should add an "implement all the lints" row for you :P
[10:57:41] <huon> oh, I'm there too
[10:57:45] * huon surprised
[10:57:59] <huon> heh, empty column
[11:01:01] <huon> kimundi: need any more help?
[11:01:23] <huon> theoretically it will be adding a check like `... if self.eat(token::UNDERSCORE) { TyInfer } ...`
[11:01:33] <kimundi> huon: added a case for token::UNDERSCORE to parse as TyInfer, now waiting for llvm to compile :P
[11:01:46] <huon> \o/
[11:01:48] <eddyb> huon: bah, one line
[11:01:56] <huon> can write some testcases while you wait
[11:02:00] <eddyb> lol
[11:02:17] <kimundi> eh, it already finished. ccache and no actual change ftw 
[11:02:22] <huon> drat
[11:02:23] <eddyb> huon: so I was commenting last night about that spreadsheet... see the "2 days" estimate for index traits?
[11:02:25] <huon> no testcase time
[11:02:48] *** Quits: luziie (luziie@moz-CD18B14B.customer.cdi.no) (Connection reset by peer)
[11:02:48] <huon> yes?
[11:02:56] <eddyb> so optimistic
[11:03:02] *** Joins: gimpf (gimpf@moz-33C16BB9.adsl.highway.telekom.at)
[11:03:13] <huon> it depends what it's measuring
[11:03:24] <huon> if it's 2 8 hour working days of work, then maybe
[11:03:35] <huon> if it's merged within 48 hours of work starting... probably not
[11:03:50] <eddyb> hehe that would be about right
[11:03:53] * kimundi wonders where the test should best live
[11:03:58] *** Joins: luz (lu.cy@moz-CD18B14B.customer.cdi.no)
[11:04:04] <eddyb> kimundi: run-pass
[11:04:13] <huon> kimundi: test/run-pass test/compile-fail
[11:04:17] <huon> test*s* ;)
[11:04:20] <kimundi> I assume its possible to do stage1 run-pass ?
[11:04:23] <eddyb> find a similar test, copy, adjust the year, make it work
[11:04:25] <huon> yes
[11:04:26] <huon> and TESTNAME
[11:04:27] <eddyb> check-stage1-rpass
[11:04:35] <huon> can also just compile by hand
[11:04:41] <kimundi> ah right, TESTNAME
[11:05:08] <kimundi> huon: Eh, I prefer the automation if it actually works
[11:07:35] <eddyb> how much worse is tcx.get(t) from ty::get(t)?
[11:07:41] <huon> eddyb: 0.5
[11:07:43] <huon> times
[11:08:00] <eddyb> the former can be made completely memory safe
[11:08:10] <huon> kimundi: pssh, `~/rust/build/x86_64.../stage1/bin/rustc ...` is like my favourite command ;P
[11:08:25] <eddyb> ./x*/stage1/bin/rustc
[11:08:36] <eddyb> huon: I finally gave in
[11:08:41] <eddyb> and symlinked it to ~/bin/rustc
[11:08:48] <kimundi> haha
[11:08:49] <eddyb> mostly so cargo-lite would work
[11:09:05] <huon> heh
[11:09:51] <eddyb> also sudo rm /usr/bin/rustc
[11:10:08] <eddyb> that's back from when I tried to package rustc nightly for suse and gave up
[11:10:26] <eddyb> (mostly because it took hours to test one single spec change)
[11:10:49] <eddyb> (and it was throwing errors if I accidentally used it)
[11:13:37] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:15:59] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:22:33] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[11:24:34] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[11:25:18] <kimundi> huon, eddyb: Darn, just making _ parse as TyInfer gives me a ICE: found ty_infer in unexpeted place
[11:25:41] <huon> kimundi: grep for TyInfer in librustc
[11:26:32] <eddyb> kimundi: in what context?
[11:26:42] <huon> kimundi: and replace the match arm in astconv.rs that maps to .span_bug(...)
[11:26:43] <huon> with...
[11:26:46] <eddyb> I guess it's overly conservative
[11:26:56] <eddyb> with "is_in_item"
[11:27:04] <huon> this.ty_infer(ast_ty.span)
[11:27:04] <eddyb> which you need to pass down
[11:27:13] <huon> that will at least give you a compiler that works
[11:27:22] <huon> although it's missing the safety check that eddyb is talking about
[11:27:41] <eddyb> well, you were talking about it earlier, too
[11:27:45] <kimundi> (For reference, the exact error message: https://gist.github.com/Kimundi/417057b01da0863d3457)
[11:27:48] <eddyb> now you're just adding global inference :P
[11:28:49] <huon> kimundi: that error message is exactly the span_bug line I referred you to^
[11:28:57] <huon> eddyb: yeah, I just mean "eddyb is talking about now"
[11:29:09] <kimundi> I assume so, still navigating to that file though :)
[11:29:11] <huon> (focusing on getting something working, can focus on getting it working properly after we have a MVP)
[11:31:44] <kimundi> okay, lets see what happens...
[11:32:07] <kimundi> (with "ast::TyInfer => this.ty_infer(ast_ty.span);")
[11:32:14] <eddyb> I want to see what happens if you put _ in a function's signature
[11:32:21] <eddyb> before you make it an error again
[11:32:32] <kimundi> eddyb: sure :)
[11:32:41] <eddyb> for science!
[11:33:15] <kimundi> If I actually end up enabling global type inference with a 10 line diff, I definitly want to know :P
[11:34:21] * kimundi can't imagine it being this easy though
[11:35:38] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[11:42:53] *** Quits: benh (ben@moz-4A0366D2.org) (Ping timeout)
[11:45:05] <kimundi> eddyb, huon haha it works
[11:45:14] <kimundi> "let x: Vec<_> = range(0u, 5).collect();" compiles fine
[11:45:31] <eddyb> amazing
[11:46:18] *** Joins: benh (ben@moz-4A0366D2.org)
[11:47:12] <kimundi> eddyb, huon: Look at this diff: https://github.com/Kimundi/rust/compare/partial_typehint?expand=1
[11:47:19] * kimundi is ammazed
[11:48:09] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[11:49:55] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[11:59:14] <huon> kimundi: \o/
[11:59:30] <huon> kimundi: oh, I can submit a PR from your branch
[11:59:39] <kimundi> indeed
[11:59:39] * huon could steal the glory
[11:59:54] <huon> what about global inference?
[12:00:28] <huon> kimundi: that's really cool
[12:00:31] <huon> just btw
[12:00:43] <kimundi> well, I'm writing tests, but so far fn foo() -> _ seems to trigger the same error message about ty_infer not allowed there
[12:01:36] <huon> i guess a deeper part of the compiler has the same error message
[12:01:48] <huon> in any case, it should be a span_err rather than a span_bg
[12:04:08] <kimundi> huon: whats the difference?
[12:04:18] <kimundi> (And how do I tell?)
[12:05:10] <huon> kimundi: span_bug is the ICE message
[12:06:04] <huon> span_err is a sensible "error: illegal inferred type in item type signature"
[12:06:31] <kimundi> Ok, so rather than a ICE talking about ty_infer not expected here, it should be a proper error message talking about type holes not being allowed on items, right?
[12:06:41] <huon> you can tell because you've written "err" rather than "bug" when restoring a check to first TyInfer match
[12:06:44] <huon> yes
[12:08:38] <kimundi> Ok, so now I need to find out where the span bug is actually written...
[12:08:45] <huon> no
[12:08:51] <huon> well
[12:08:59] <huon> I was going to say "don't change that one"
[12:09:03] <huon> but maybe you could
[12:09:42] <kimundi> Either changing that one, or adding an additional check before it gets triggered
[12:09:53] <huon> I would think the correct place to change it would be the span_bug you deleted originally, and have a `if i_am_in_an_item_signature() { span_err(..) } else { ty_infer() }`
[12:10:08] <huon> but getting that condition might be tricky
[12:10:46] <kimundi> Hm, right
[12:11:47] <kimundi> Okay, some compiler internals 101 question: WHat does astconv.rs actually do?
[12:11:57] <huon> you can just git grep for the other message to find where it is emit too
[12:11:57] <kimundi> oh, wait it has a comment
[12:12:20] <huon> it converts the AST representation of the type into a more informative representation that the compiler can do inference on
[12:13:33] <huon> and type checking, etc.
[12:17:16] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[12:20:32] <kimundi> huon: The other error is in typeck::collect, impl AstConv for CrateCtxt
[12:22:03] <huon>     $(info cfg: no pdflatex found, omitting doc/rust.pdf)
[12:22:03] <huon>       $(info cfg: no xetex found, disabling doc/rust.pdf)
[12:22:03] <huon>         $(info cfg: lacking luatex, disabling pdflatex)
[12:22:07] <huon> such consistent
[12:22:16] <huon> wow
[12:22:37] <huon> (that's all within 8 lines of the makefiles)
[12:22:44] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[12:23:06] <huon> kimundi: oh
[12:23:09] * huon doesn't know
[12:23:23] <huon> kimundi: nmatsakis is the person to talk to
[12:23:30] <eddyb> I have some
[12:23:36] <eddyb> (knowledge of nmatsakis, that is)
[12:23:37] <huon> (or eddyb if he happens to know enough about that area)
[12:23:56] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[12:24:21] <kimundi> eddyb: look what enables partial typ inference: https://github.com/Kimundi/rust/compare/partial_typehint?expand=1
[12:24:23] <kimundi> :)
[12:26:08] <eddyb> "huon: The other error is in typeck::collect, impl AstConv for CrateCtxt"
[12:26:15] <kimundi> eddyb: putting a _ into something like fn foo() -> _ however triggers an unexpected `ty_infer` span_bug in tychk::collect, and I'm wondering how to best handle it
[12:26:23] <eddyb> interesting
[12:26:31] <eddyb> turn it into an actual type error
[12:26:53] <eddyb> span_error and then ty::mk_err() if you're creating a type
[12:27:20] <eddyb> I'm guessing it has two lines of defense?
[12:27:25] <kimundi> eddyb: I have no idea what you'Re on about mk_error
[12:27:38] <eddyb> we have "ty_err" in the type system
[12:27:49] <eddyb> ty::mk_err() creates an "error type"
[12:27:55] <kimundi> ah
[12:27:56] <kimundi> okay
[12:28:00] <eddyb> it's what type errors should return instead of a valid type
[12:28:17] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[12:28:18] <eddyb> astconv is generic, and there's two things that implement it AFAIK
[12:28:24] <kimundi> ah, of course if I change span_bug to span_error, it keeps going, so it needs a return value
[12:28:32] <eddyb> one is collection, which you've found
[12:28:39] <eddyb> let me grep for the other one
[12:29:46] <eddyb> why does lint need AstConv?
[12:29:49] <eddyb> kimundi: oh, I see, interesting
[12:30:14] <eddyb> src/librustc/middle/typeck/check/mod.rs:impl AstConv for FnCtxt // this is inside functions
[12:30:15] <eddyb> src/librustc/middle/typeck/collect.rs:impl AstConv for CrateCtxt // this is for items
[12:30:46] <kimundi> `@driver::session::Session_` does not implement any method in scope named `span_error` - what is the correct name I need to call?
[12:30:53] <eddyb> span_err
[12:31:12] <eddyb> so propagating "is_in_item" is actually not required, AFAICT, because it's always true for CrateCtxt but false for FnCtxt
[12:31:36] <kimundi> eddyb: Ah, so the CrateCtxt one is explicitly for items, good
[12:31:45] <kimundi> does that include items inside of functions?
[12:31:48] <kimundi>  assume yes
[12:31:52] <eddyb> s/explicitely/exclusively/
[12:31:55] <eddyb> kimundi: I hope so
[12:32:10] <eddyb> you can have one compile-fail test btw, once you make it an error
[12:32:21] <kimundi> Well, in any case I expect a long list of test I need to add
[12:32:30] <kimundi> or, right
[12:32:33] <eddyb> also test static constants, function arguments, nesting of functions, etc.
[12:32:57] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[12:33:06] <eddyb> huon: AstConv is like the easiest part of the type system
[12:33:21] <eddyb> I'm glad default type params only had to be implemented there
[12:33:55] <eddyb> inference is probably the deepest point of the rabbit hole
[12:34:17] <eddyb> glb/lub/etc. actually remind me of v8
[12:35:08] <eddyb> I used to watch this https://codereview.chromium.org/search?repo_guid=f08c8b2a4953357ae2239c72044f3c7ab3a9916f
[12:35:32] <huon> \o/
[12:35:41] <eddyb> and I was there when they revamped the type system into some sort of bitset/ADT mix
[12:35:46] * huon has an PDF version of http://static.rust-lang.org/doc/master/index.html
[12:35:59] <huon> yay for simpler/more generic makefiles
[12:36:02] <huon> :P
[12:36:06] <eddyb> huon: ChrisMorgan and steveklabnik most likely want to hear about it
[12:36:12] <huon> eddyb: barely
[12:36:31] <huon> it's literally 2 page PDF consisting of many lists
[12:36:37] <eddyb> and they had all that glb/lub/etc. stuff in there... it looked like magic
[12:36:38] <huon> and a pile of hyperlinks
[12:36:45] <eddyb> huon: but now do it for the tutorial
[12:36:50] <huon> already done
[12:36:53] <eddyb> oh
[12:36:53] <huon> even now
[12:37:05] * eddyb is confused a bit
[12:37:15] <huon> note the PDF links on that page
[12:37:23] <huon> only the tutorial and manual get PDF'd
[12:37:31] <eddyb> huon: I guess we need a one-page library documentation view?
[12:37:50] <eddyb> to turn into a PDF
[12:37:52] <huon> I'm making the documentation part of the makefiles use my new rustdoc, and that includes moving everything around to share more code
[12:38:15] <huon> eddyb: if we want library documentation I guess so
[12:38:34] <huon> *PDF library documentation
[12:44:51] <eddyb> https://github.com/v8/v8/blob/master/src/types.h there it is
[12:46:04] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[12:47:47] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[12:50:47] <eddyb> huon: this makes me think "rust is a load/store architecture" https://gist.github.com/huonw/d51b9bb3df5ab1afd978#file-noopt-ll
[12:51:01] <eddyb> "registers are only for holding addresses"
[12:53:49] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[12:55:23] <huon> eddyb: then why are things returned in registers? :P
[12:55:29] <huon> but yeah, I get your point
[12:55:33] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[12:56:16] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[12:58:54] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[13:12:57] *** Quits: mawuli (mawuli@moz-A89BBCE.com.gh) (Ping timeout)
[13:14:25] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:16:47] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:30:31] *** Quits: blank_name (blank_name@463DB555.53526368.6D228269.IP) (Ping timeout)
[13:37:00] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[13:55:23] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[14:13:23] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[14:19:22] <kimundi> huon: Is it possible for my inference change to cause a problem with debuginfo?
[14:19:39] <kimundi> Cause make check failed at a test with it
[14:20:07] <huon> kimundi: which test?
[14:21:41] <kimundi> huon: Err, just scrolled out of my terminals buffer. If I hid it again, I'll tell you
[14:30:59] *** Joins: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net)
[14:37:29] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[14:51:15] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[14:54:00] *** Joins: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca)
[14:58:13] *** Joins: lpy (lpy@12172131.F09091A8.1348A864.IP)
[15:10:26] *** Joins: edwardw (edwardw@B5386878.16F55560.50B134B9.IP)
[15:13:44] *** Quits: doomlord_ (servitor@moz-99BE89EC.range86-184.btcentralplus.com) (Ping timeout)
[15:15:12] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:17:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:24:34] *** Quits: japaric (japaric@FB100779.A23A5F6C.E5B504CC.IP) (Ping timeout)
[15:25:56] *** Joins: japaric (japaric@5FC96F56.29721F33.F29ED47E.IP)
[15:29:48] <kimundi> huon, eddyb: https://github.com/mozilla/rust/pull/12764
[15:31:40] <eddyb> kimundi: now let's allow _ in values
[15:31:50] <eddyb> as a shorthand for Default::default()
[15:31:58] <kimundi> eddyb: brr
[15:32:40] <kimundi> let _: _ = _;
[15:34:44] <eddyb> that's let _ = _;
[15:34:48] <eddyb> and it won't compile
[15:34:58] <eddyb> rusti: let _ = std::default::Default::default();
[15:34:59] -rusti- <anon>:10:17: 10:47 error: cannot determine a type for this bounded type parameter: unconstrained type
[15:35:00] -rusti- <anon>:10         let _ = std::default::Default::default();
[15:35:00] -rusti-                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[15:35:00] -rusti- application terminated with error code 101
[15:38:44] <huon> kimundi: there's a comment about `TyInfer` in syntax::ast that needs to be updated
[15:39:08] <eddyb> only used by let and closures right now, right?
[15:40:11] <kimundi> huon: Can you add that as github comment? I'll just forget otherwise. :)
[15:40:30] <SiegeLord> Can you do |x: Option<_>} {} ?
[15:40:39] <SiegeLord> |x: Option<_>| {} ?
[15:41:06] <eddyb> should be able to
[15:41:16] <eddyb> it's only disabled for items
[15:41:37] <eddyb> (type definitions, function prototypes, method prototypes, statics, etc.)
[15:43:26] <huon> could enable it for items inside functions
[15:43:41] <kimundi> huon: nope
[15:44:10] <huon> i mean "we theoretically ..." since that's not global inference
[15:44:19] <kimundi> huon: well, that is if you enable it for items in functions, you can enable it for private modules in general as well
[15:44:57] <huon> yup
[15:45:16] <kimundi> I'd rather see the rules for items in function bodies remain as consistent as possible with those outside of it
[15:45:35] *** Quits: lpy (lpy@12172131.F09091A8.1348A864.IP) (Ping timeout)
[15:46:03] * huon wishes the inner items "captured" the type params of the outer ones
[15:46:27] <kimundi> huon: What do you mean?
[15:46:43] <huon> fn foo<T>(x: T) { fn inner(y: T) { ... } }
[15:46:55] <kimundi> fn foo<T>() { ... fn bar() { T visible here }} ?
[15:47:09] <huon> yeah
[15:47:39] <kimundi> I guess this falls under the same consistency
[15:48:07] <kimundi> In theory llvm should be able to optimize a closure that is just used locally like such a function definition in exactly the same way though, right?
[15:48:25] <kimundi> fn foo<T>() { ... let bar = || { T visible here }} ?
[15:49:50] <huon> theoretically yeah... but my real usecase is extern "C" bar() { ... } on the inside
[15:49:58] <huon> since those can't be generic themselves
[15:56:12] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:57:09] *** Joins: doomlord_ (servitor@moz-99BE89EC.range86-184.btcentralplus.com)
[15:59:56] *** Joins: blank_name (blank_name@2C5A9B5B.E6D3F868.537E532E.IP)
[16:03:28] *** Quits: japaric (japaric@5FC96F56.29721F33.F29ED47E.IP) (Connection reset by peer)
[16:04:08] *** Joins: japaric (japaric@5FC96F56.29721F33.F29ED47E.IP)
[16:18:21] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[16:18:26] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[16:25:41] <eddyb> nmatsakis: so git am failed on your patch...
[16:28:28] <eddyb> ok, git apply worked
[16:30:17] <eddyb> nmatsakis: seems you were right, ExprOrMethodCall is only used for type params
[16:39:17] <kimundi> huon, eddyb: getting this debuginfo error with my patch, not sure if it is related: https://gist.github.com/Kimundi/9434627
[16:39:18] <eddyb> huon: test time!
[16:39:40] *** Quits: japaric (japaric@5FC96F56.29721F33.F29ED47E.IP) (Connection reset by peer)
[16:40:19] *** Joins: japaric (japaric@5FC96F56.29721F33.F29ED47E.IP)
[16:50:25] *** Quits: Kxepal (Miranda@moz-413026B1.pppoe.mtu-net.ru) (Ping timeout)
[16:54:33] *** Joins: Kxepal (Miranda@moz-DA894BAA.pppoe.mtu-net.ru)
[17:16:01] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:18:23] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:34:20] <edwardw> what does type_is_bot(..) mean?
[17:34:43] <eddyb> edwardw: it checks the is_bot flag
[17:34:54] <eddyb> which means that the type contains a ty_bot somewhere
[17:35:03] <eddyb> that's ! aka _|_ aka bottom
[17:35:16] <eddyb> fn() -> ! doesn't have the is_bot flag btw
[17:35:16] <edwardw> ah, bot == bottom, gotcha
[17:38:41] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[17:46:52] *** Joins: intuxicated (intuxicate@A9443CC2.9D1E10BA.3FFBF42F.IP)
[17:55:31] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[17:56:41] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[18:00:24] *** Joins: eibwen (kvirc@moz-40E704BF.dip0.t-ipconnect.de)
[18:07:14] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Quit: Ï†Ñ Ïù¥Îßå Í∞ëÎãàÎã§.)
[18:08:28] <eddyb> I ought to make this a non-fatal error "failed to find an implementation of trait ... for type ..."
[18:10:29] <kimundi> Hm, okay that debug info test failure also reproduces without my inference change, so its something unrelated
[18:13:34] <eddyb> writing tests is hard :(
[18:14:09] <eddyb> especially when the feature has endless usage possibilities
[18:16:19] <edwardw> we now have 6640+ unit tests, it is a real treasure
[18:16:25] <edwardw> I mean real asset
[18:17:23] <eddyb> it's a treasure for a biased fuzzer :P
[18:17:48] <kimundi> eddyb: tests for what? deref?
[18:23:45] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[18:24:06] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[18:25:48] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[18:27:53] *** Joins: NiccosSystem` (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[18:27:57] *** Quits: NiccosSystem` (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Connection reset by peer)
[18:33:09] *** Quits: blank_name (blank_name@2C5A9B5B.E6D3F868.537E532E.IP) (Quit: leaving)
[18:35:42] *** Joins: blank_name (blank_name@2C5A9B5B.E6D3F868.537E532E.IP)
[18:39:08] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[18:40:53] * eddyb needs to be hit with a cluebat, basically
[18:41:04] <eddyb> kimundi: yupp
[18:41:10] <eddyb> the automatic kind
[18:50:06] *** Joins: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca)
[18:50:19] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[19:04:33] *** Joins: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com)
[19:04:44] *** Joins: rustilite (rustilite@moz-61B073BC.cpe.net.cable.rogers.com)
[19:05:15] *** Joins: nrc (nrc@F16146EB.9D3722BB.58DC3EE6.IP)
[19:16:50] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:19:13] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:25:17] *** Joins: rdgawdzi (rdgawdzi@moz-21D6B3DE.csclub.uwaterloo.ca)
[19:30:32] *** Joins: gwty (gwtypc@E9FC4F3D.13D358C6.49FF672.IP)
[19:39:54] <cmr> Anyone know what I did wrong with http://buildbot.rust-lang.org/builders/auto-linux-64-nopt-t/builds/3717/steps/test/logs/stdio ?
[19:40:34] <eddyb> haha
[19:40:46] <cmr> I even have a main :(
[19:40:51] <eddyb> cmr: that's an error it can't convert to a string, methinks
[19:40:59] <cmr> eh?
[19:41:02] <eddyb> wait, no, it's a compile error /facepalm
[19:41:04] <cmr> I'm not talking about the ~Any
[19:41:18] <eddyb> so what did you change?
[19:41:28] <eddyb> cmr: what PR is this?
[19:41:49] <cmr> https://github.com/mozilla/rust/pull/12524
[19:41:51] <cmr> it's docs.
[19:42:24] <eddyb> that's not just docs
[19:42:29] <eddyb> you added Show
[19:42:51] <cmr> well yeah but the error is just the docs.
[19:43:15] <cmr> which is what I was talking about
[19:48:25] <eddyb> I can't really figure what is going on :/
[19:51:05] <eddyb> cmr: can you try a #! syntax?
[19:51:17] <cmr> has that landed?
[19:51:20] <cmr> rusti: version
[19:51:21] -rusti- "rustc 0.10-pre (33768c4 2014-03-07 02:51:39 -0800)"
[19:51:26] <cmr> rusti: #![doc="foo"]
[19:51:27] -rusti- <anon>:10:9: 10:10 error: unexpected token: `#`
[19:51:27] -rusti- <anon>:10         #![doc="foo"]
[19:51:27] -rusti-                   ^
[19:51:27] -rusti- application terminated with error code 101
[19:51:35] <cmr> rusti: fn foo() { #![doc="foo"]; }
[19:51:35] -rusti- <anon>:10:20: 10:21 error: unexpected token: `#`
[19:51:36] -rusti- <anon>:10         fn foo() { #![doc="foo"]; }
[19:51:36] -rusti-                              ^
[19:51:36] -rusti- application terminated with error code 101
[19:51:42] <eddyb> huh
[19:51:43] <cmr> rusti: fn foo() { #[doc="foo"]; }
[19:51:45] -rusti- <anon>:10:9: 10:35 warning: code is never used: `foo`, #[warn(dead_code)] on by default
[19:51:48] -rusti- <anon>:10         fn foo() { #[doc="foo"]; }
[19:51:50] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~~
[19:51:52] -rusti- ()
[19:51:56] <eddyb> it uses lookaheads?
[19:52:48] <eddyb> cmr: just put it on main
[19:52:55] <nrc> stupid Github - why can't I fork an empty repo?!
[19:52:55] <eddyb> that should be valid
[19:53:04] <eddyb> nrc: how can you have an empty repo?
[19:53:15] <eddyb> oh, I guess its initial state
[19:53:24] <eddyb> nrc: it's not stupid and that's git
[19:53:34] <cmr> jjjjjjjjjjjjjjjjjj
[19:53:37] <cmr> bah
[19:53:39] <cmr> was doing so good
[19:53:50] <nrc> eddyb: it is stupid because it means I can't create a PR for it
[19:54:05] <nrc> which is annoying
[19:54:05] <eddyb> and empty GitHub repo is not a valid git repo AFAIK
[19:54:10] <eddyb> or at least it doesn't have a HEAD
[19:54:14] <nrc> heh, stupid Git, then
[19:54:17] <eddyb> nrc: what would the PR merge to?
[19:54:24] <eddyb> it needs a ref
[19:54:40] <nrc> create a new repo? 
[19:54:56] <nrc> seems like it just needs an `if null` check in the merge script
[19:55:00] <eddyb> the readme+license pack is nice and it gives you a starting point for things like that
[19:55:05] <cmr> it doesn't create a new repo because then you can't push your existing repo to it because they'd have unrelated histories.
[19:55:48] <nrc> so I guess they are optimising for the use case of the owner has a local repo to push to it
[19:56:08] <cmr> which is really all the time :p
[19:56:30] <nrc> well, not this time - which is why I a raging at Github again :-p
[19:57:03] <eddyb> nrc: do you have public links?
[19:57:16] <eddyb> I don't think I've ever seen an empty repo that wasn't mine, before
[19:57:19] <nrc> https://github.com/rust-lang/rfcs
[19:57:33] <eddyb> "Care to check out the GitHub Channel on YouTube while you wait? " haha what?
[19:57:52] <eddyb> nrc: just push a care package to that
[19:58:05] <nrc> acrichto: (or anyone else who owns rust-lang) could you add a readme.md or something to https://github.com/rust-lang/rfcs so we can PR please?
[19:58:11] <eddyb> https://github.com/rust-lang/rfcs/compare/ haha
[19:58:17] <nrc> eddyb: care package?
[19:58:35] <eddyb> nrc: oh, you don't have the powers? that explains why you want a PR so bad :P
[19:58:46] <nrc> exactly
[19:58:58] <eddyb> care package - README.md + LICENSE and maybe set a few settings
[19:59:09] <eddyb> what's rfcs?
[19:59:15] <nrc> ah right, yes, that is exactly what I want
[19:59:19] <nrc> multiple of RFC
[19:59:34] <eddyb> sounds good
[19:59:46] <nrc> we will keep them in a repo rather than having them scattered amongst blog posts, issues, and the mailing list
[19:59:46] * eddyb prepares the flood gates
[19:59:53] <nrc> more details soon...
[20:00:02] * nrc has to check out of this hotel
[20:00:24] *** Quits: nrc (nrc@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 30.0a1/20140307030202])
[20:00:24] <eddyb> we can add ideas for refactoring/revamping stuff, too?
[20:00:29] <eddyb> damn, he's gone
[20:01:06] <eddyb> cmr: wat is dis https://github.com/rust-lang/cargo
[20:03:50] <cmr> I do not know
[20:04:01] <cmr> I'm disappointed that https://github.com/rust-lang/rust isn't a thing yet!
[20:08:59] *** Quits: gwty (gwtypc@E9FC4F3D.13D358C6.49FF672.IP) (Ping timeout)
[20:10:44] *** Joins: gwty (gwtypc@4F106397.C1F508AE.137C914F.IP)
[20:21:01] *** Joins: pnkfelix (pnkfelix@47E9D3A2.3778D849.1D6E592A.IP)
[20:23:58] <doomlord_> i have an itch about this 'error message to help you with modules',  having looked at the ast a bit, i wonder how hard it would be to contribute a patch
[20:24:28] <doomlord_> what i have in mind is when a symbol isn't found, searching the module tree for the symbol and telling you where it actually is
[20:27:17] <eddyb> edwardw: did your PR not land?
[20:27:28] <edwardw> eddyb: which one?
[20:27:38] <eddyb> I don't see SyntaxContext flavors
[20:27:44] <eddyb> SCTable I should say
[20:27:56] <edwardw> no, that didn't land yet.
[20:27:59] <eddyb> and what is ResolveTable?
[20:28:03] <edwardw> A decision is to be made
[20:28:03] <eddyb> mkay :/
[20:28:15] <eddyb> I'll just hook something up real quick
[20:28:55] <edwardw> jbclements prefers not to hardcode the namespace
[20:29:04] <eddyb> huh why?
[20:29:09] <eddyb> that would be too flexible
[20:29:21] <edwardw> he suggests just distinguish them symbolically 
[20:29:32] <eddyb> and in this case, too flexible => waste of CPU and RAM
[20:29:38] <edwardw> say, all lifetime and label do have ' in front of them
[20:29:45] <eddyb> and they can collide?
[20:30:10] <eddyb> I mean, it kinda makes sense. as long as you don't break on a lifetime
[20:30:19] <edwardw> they can't collide with normal identifiers
[20:30:31] <eddyb> (we do want something like 'foo: {let x = {&'foo bar}; x}
[20:30:33] <eddyb> )
[20:30:54] <edwardw> okay, that can happen
[20:31:06] <edwardw> but jbclements says it might not be a bad thing at all
[20:31:28] <edwardw> anyway, it is not decided yet. I hope soon :P
[20:32:40] <edwardw> one way or the other, better than nothing, heh
[20:33:51] <edwardw> eddyb: ResolveTable is basically a cache
[20:34:05] <edwardw> memorization I should say
[20:34:20] <cmr> memoization, not memorization
[20:34:40] *** Quits: intuxicated (intuxicate@A9443CC2.9D1E10BA.3FFBF42F.IP) (Quit: Leaving)
[20:34:41] <edwardw> :D you are right, cmr
[20:35:37] <eddyb> syntax::ext::mtwt::clear_tables();
[20:35:40] <eddyb> this should do it
[20:37:02] <eddyb> cmr: now to compile rustc twice :)
[20:37:51] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[20:38:29] <eddyb> cmr: if I can't write tests, better shave some RAM off this yak
[20:46:54] *** Quits: edwardw (edwardw@B5386878.16F55560.50B134B9.IP) (Quit: Leaving...)
[20:48:55] *** Quits: gwty (gwtypc@4F106397.C1F508AE.137C914F.IP) (Ping timeout)
[20:52:56] *** Joins: gwty (gwtypc@3CD2794D.9BCCF275.137C914F.IP)
[20:57:37] <eddyb> cmr: get ready
[20:57:40] <eddyb> here it comes...
[20:57:55] <eddyb> huh, it's not... better
[20:58:08] <eddyb> :(
[20:58:42] <eddyb> I don't get it... why am I not seeing any memory usage reduction? it's actually a bit worse in the trans peak
[20:59:41] <eddyb> 1.120GB for the LLVM flatline
[21:01:54] <eddyb> yeah, that's (much) worse than today. I don't get it
[21:01:57] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[21:01:57] <ghrust> [13rust] 15bors pushed 6 new commits to 06auto: 02http://git.io/Ln_c9w
[21:01:57] <ghrust> 13rust/06auto 14f690cc2 15Patrick Walton: libstd: Add some more functionality to Vec<T>
[21:01:57] <ghrust> 13rust/06auto 143b6e9d4 15Patrick Walton: librustc: Automatically change uses of `~[T]` to `Vec<T>` in rustc.
[21:01:58] <ghrust> 13rust/06auto 1443c0724 15Felix S. Klock II: librustc: Fix up fallout from the automatic conversion.
[21:02:00] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[21:04:47] <eddyb> cmr: this is not what I am looking for https://github.com/mozilla/rust/blob/master/src/libcollections/hashmap.rs#L293-L301
[21:07:18] *** Quits: blank_name (blank_name@2C5A9B5B.E6D3F868.537E532E.IP) (Quit: leaving)
[21:07:52] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[21:08:40] *** Joins: blank_name (blank_name@2C5A9B5B.E6D3F868.537E532E.IP)
[21:09:49] <eddyb> nmatsakis: could we make enum Void {} (i.e. uninhabited enums) unsized without changing their (pointer) representation?
[21:10:02] <eddyb> nmatsakis: to avoid them being used as value types
[21:11:23] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[21:15:59] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[21:16:17] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[21:17:42] *** Joins: erickt__ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:20:03] *** Quits: erickt__ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:25:05] *** Quits: pnkfelix (pnkfelix@47E9D3A2.3778D849.1D6E592A.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[21:27:55] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[21:32:08] *** Quits: gwty (gwtypc@3CD2794D.9BCCF275.137C914F.IP) (Connection reset by peer)
[21:34:21] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[21:34:21] <eddyb> cmr: looks lower, let's see what actually happens
[21:34:38] *** Joins: gwty (gwtypc@BDEC395D.CB9B5871.137C914F.IP)
[21:35:05] <eddyb> *sigh* this was a monumental waste of time
[21:35:31] <eddyb> cmr: I guess I would be gaining more if I had a different allocator
[21:35:53] <cmr> jemalloc is LD_PRELOAD :)
[21:36:03] <eddyb> yeah doing that right now
[21:36:09] <cmr> so is tcmalloc
[21:36:32] <eddyb> google-chrome-unstable is still broken so the problem might be on my end
[21:38:28] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[21:39:14] <eddyb> cmr: hehe now if I can understand this http://code.google.com/p/chromium/issues/detail?id=345917
[21:40:07] <eddyb> wait, no, that's older than my issue
[21:42:04] <eddyb> time: 20.396 s  type checking
[21:42:06] <eddyb> I think this is faster
[21:42:24] *** Quits: whitglint (uid15486@moz-31ABA2C0.irccloud.com) (Quit: Connection closed for inactivity)
[21:42:51] <eddyb> cmr: trans peak is lower than previous tests
[21:42:54] <eddyb> hooooly
[21:43:03] <eddyb> cmr: LLVM flatline is at 700MB
[21:43:21] <eddyb> but that's not my doing, that's just jemalloc being awesome
[21:44:07] <eddyb> env LD_PRELOAD=/usr/lib64/libjemalloc.so.1 # I'm going to stick this everywhere
[21:44:42] <eddyb> cmr: I still don't understand why dropping TLD seems to increase memory usage
[21:45:10] <eddyb> I drop the SCTable/ResolveTable after resolve finishes
[21:45:20] <eddyb> and then the IdentInterner after trans finishes
[21:45:21] <cmr> eddyb: are you measuring virt or res?
[21:45:34] <eddyb> res
[21:45:39] <cmr> curious.
[21:45:52] <eddyb> I can push the patch if you want to play with it, pretty small stuff
[21:46:01] <cmr> nah I'm good.
[21:46:04] <cmr> busy today.
[21:46:05] <eddyb> haha
[21:51:29] *** Joins: isaacd (quassel@moz-6902374D.dhcp.oxfr.ma.charter.com)
[21:55:01] *** Quits: gwty (gwtypc@BDEC395D.CB9B5871.137C914F.IP) (Connection reset by peer)
[21:56:10] <eddyb> cmr: derp, made a new chrome profile, works fine
[21:58:20] *** Joins: gwty (gwtypc@8CA05C65.5C2F1574.BD94A9D5.IP)
[22:00:32] <eddyb> mv ~/.config/google-chrome-unstable/Local\ State{,.bak}
[22:00:39] <eddyb> cmr: I feel so stupid, that fixed it ^^
[22:00:54] * eddyb prepares firefox' stake
[22:01:32] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[22:01:34] <eddyb> mm aura mmm
[22:09:25] *** Joins: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca)
[22:16:53] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[22:16:53] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/Ln_c9w
[22:16:53] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[22:19:55] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[22:22:25] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Ping timeout)
[22:24:24] <eddyb> cmr: aaah that's Vec<T> increasing memory usage
[22:25:19] <eddyb> https://github.com/mozilla/rust/pull/12770 fwiw
[22:42:37] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[22:43:09] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[22:44:06] <Luqman> kimundi: ++ on 12764 :D
[22:57:46] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Quit: Leaving)
[22:58:47] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[23:04:42] *** Quits: gimpf (gimpf@moz-33C16BB9.adsl.highway.telekom.at) (Quit: Leaving.)
[23:08:02] *** Quits: eibwen (kvirc@moz-40E704BF.dip0.t-ipconnect.de) (Ping timeout)
[23:19:00] *** Joins: erickt__ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:20:53] *** Quits: erickt__ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:29:40] *** Joins: strcat (strcat@moz-61B073BC.cpe.net.cable.rogers.com)
[23:39:03] <eddyb> strcat: https://github.com/mozilla/rust/pull/12770
[23:42:04] <eddyb> why RefCell<Vec<CrateType> >?
[23:42:29] <eddyb> rusti: use std::veg_ng::Vec; let _x: Option<Vec<int>>;
[23:42:30] -rusti- pastebinned 8 lines of output: http://sprunge.us/VjJR
[23:42:41] <eddyb> rusti: use std::vec_ng::Vec; let _x: Option<Vec<int>>;
[23:42:43] -rusti- ()
[23:42:57] <eddyb> pcwalton added spaces everywhere :(
[23:43:03] <eddyb> and it got merged like that
[23:49:33] <strcat> eddyb: regexp?
[23:50:34] <eddyb> in any case, I don't have an easy way to compare stage2 with and without #12770
[23:50:51] <eddyb> if it makes a difference, it means Vec<T> is really bad :S
[23:51:00] <eddyb> (for high usage structures)
[23:51:21] <strcat> eddyb: Vec<T> isn't "bad"
[23:51:28] <eddyb> right, sorry
[23:51:33] <strcat> it just likely replaced 1-word ~[T] with 3-word Vec<T>
[23:51:34] <strcat> in enums
[23:51:51] <eddyb> I mean, strictly from a RAM usage perspective
[23:51:57] <strcat> it uses less memory
[23:52:06] <eddyb> (unless you put it in enums)
[23:52:10] <strcat> it uses more memory when you have a recursive enum and it's directly contained in it
[23:52:26] <eddyb> strcat: I was just surprised that stage2 with that patch uses more RAM
[23:52:35] * strcat isn't
[23:52:38] <strcat> eddyb: also, OptVec
[23:52:49] <strcat> 1 word -> 4 words
[23:53:11] <strcat> https://github.com/mozilla/rust/pull/12675 -> 3
[23:53:13] <eddyb> unlucky to test that after Vec but before snapshot
[23:53:51] <strcat> there are probably a lot of non-growable cases that will become ~[T]
[23:53:57] <strcat> when it's added back
[23:54:04] <eddyb> yeah I don't worry that much about that
[23:54:13] <eddyb> I just can't tell what impact my change has
[23:54:20] <strcat> ah
[23:55:05] <eddyb> I got a trans peak of 1.3GB+ which surprised me. even when I replaced clear with a full drop, still high
[23:55:10] <strcat> what was it before?
[23:55:30] <eddyb> 1.1GB + something small
[23:55:48] <eddyb> http://huonw.github.io/isrustfastyet/mem/
[23:56:16] <eddyb> still no idea what things like these are http://huonw.github.io/isrustfastyet/mem/#c24946e,3b09469
[23:56:49] <eddyb> strcat: and we're missing 1.5w on the graph
[23:56:53] <eddyb> so that doesn't help
[23:58:33] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[23:59:53] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
