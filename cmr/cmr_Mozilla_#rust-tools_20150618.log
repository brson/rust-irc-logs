[00:50:40] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[03:03:47] <nrc> heads up: https://internals.rust-lang.org/t/parallel-codegen-plans/2253
[03:09:31] <huon> nrc: I believe Cargo.toml already supports a codegen_units flag, fwiw
[03:10:11] <huon> https://github.com/rust-lang/cargo/issues/1691 but my view on it is https://github.com/rust-lang/cargo/issues/1691#issuecomment-110970771
[03:15:06] <nrc> ah cool, that is good news
[03:15:34] <nrc> iiuc, that lets you set one value of codegen_units per project, not per crate?
[03:16:12] <huon> yeah, I guess so
[03:39:34] <aturon> nrc: random thought i wanted to share. i was talking to acrichto today a bit about the mountain of technical debt that is rustdoc. we'd love for it to be more metadata-driven, but it also does a lot of work to "resugar" and cross-reference various things for doc purposes --
[03:39:52] <aturon> nrc: it struck me that other tools, especially IDEs, could easily benefit from this work as well
[03:40:16] <nrc> I would like to drive rustdoc from the save-analysis dumps, that seems more what it wants than metadata
[03:40:32] <nrc> (although I've also though vaguely about unifying metadata and save-analysis)
[03:41:04] <aturon> ok. i don't know that area enough to say whether e.g. where clause "resugaring" would still be needed?
[03:41:15] <nrc> I think a lot of the resugaring and cross-referencing is done by save-analysis already, or is done externally by DXR and could benefit from being moved into the compiler
[03:41:29] <aturon> ok, cool! sounds like you're well ahead of me :)
[03:41:45] <nrc> in an ideal world it would not, but I think save-analysis is a bit out of date around where clauses and assoc types
[03:42:20] <aturon> it'd be great to discuss some of these plans, and possible confluence, at the workweek
[03:42:28] <nrc> i.e., that work needs to be done, but it needs to be done for DXR and for rustdoc alike
[03:42:34] <nrc> yeah, I was hoping to :-)
[03:43:59] <nrc> it would be especially nice to unify if we end up doing the rustdoc.org - then a single compiler run would generate all the data we need for docs and DXR
[07:35:36] *** Joins: Viewtiful (Viewtiful@moz-eub.afi.30.89.IP)
[09:05:12] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[09:48:40] *** Quits: Viewtiful (Viewtiful@moz-eub.afi.30.89.IP) (Quit: Leaving...)
[12:27:41] *** Joins: manishea1th (manishearth@moz-uc30rq.anapnea.net)
[12:30:24] *** Quits: Manishearth (manishearth@moz-uc30rq.anapnea.net) (NickServ (RECOVER command used by manishea1th))
[12:30:24] *** manishea1th is now known as Manishearth
[12:30:24] *** ChanServ sets mode: +ao Manishearth Manishearth
[15:17:34] *** Joins: mtrythall (mtrythall@moz-g0l.i9s.199.173.IP)
[15:25:53] <mtrythall> Hello! I'm with BotBot.me. Is there an OP around?
[15:41:54] <edunham> mtrythall: I don't currently have IRC flags in this channel, but I'm an administrator on the Rust project's infrastructure. What do you need help with?
[15:42:30] <mtrythall> We received a request (and follow up) from Alex Crichton to log this channel.
[15:47:09] <mtrythall> I need an OP to OK the logging
[16:12:43] <acrichto> mtrythall: I'm here!
[16:12:59] <acrichto> mtrythall: I'm ok with logging :)
[16:18:10] <mtrythall> ok, one moment
[16:19:28] *** Joins: [o__o] ([o__o]@moz-4s2t5k.compute-1.amazonaws.com)
[16:19:30] <mtrythall> [o__o] ping
[16:19:31] <[o__o]> Are you in need of my services, mtrythall?
[16:19:32] <mtrythall> [o__o] help
[16:19:32] <[o__o]> Available plugins: logger, ping, last_seen, help, bangmotivate (https://botbot.me/mozilla/rust-tools/help/)
[16:19:46] <mtrythall> acrichto - you're all setup: https://botbot.me/mozilla/rust-tools/
[16:19:57] <mtrythall> you'll want to add that URL to the channel topic so folks know they're being logged
[16:20:00] <acrichto> mtrythall: awesome, thanks!
[16:20:16] *** acrichto changes topic to 'Rust Tools and Infrastructure subteam | https://botbot.me/mozilla/rust-tools/'
[16:45:36] <mtrythall> alright, take care!
[16:45:39] *** Parts: mtrythall (mtrythall@moz-g0l.i9s.199.173.IP) ("Textual IRC Client: www.textualapp.com")
[17:34:01] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Connection closed)
[17:35:58] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[17:56:18] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Connection closed)
[17:59:19] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[18:49:56] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[18:49:56] *** ChanServ sets mode: +ao brson brson
[19:48:53] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Connection closed)
[19:49:30] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[19:49:30] *** ChanServ sets mode: +ao brson brson
[20:22:39] <edunham> I'll drop https://github.com/rust-lang/rust-www/issues/148 in here in case it's of interest to anyone I didn't ping via github
[20:24:56] <edunham> ^^ requesting feedback on plan to fix https for rust-lang.org, in case there are relevant details about the site that i don't know yet
[20:27:33] <acrichto> edunham: I think the strategy we're probably going to take is just proxy everything through doc.rust-lang.org
[20:27:42] <acrichto> edunham: it's probably at least the easiest thing to do for now
[20:27:57] <acrichto> edunham: it's actually already configured to proxy to https://rust-lang.github.io
[20:39:39] <acrichto> edunham: although that's not to say that cloudfront is out of the question, it's probably just a little harder
[20:41:13] <edunham> acrichto: my concern with proxying through our own nginx is that if for some reason that box goes down, it's down until one of 3 or 4 humans wakes up and fixes it
[20:41:24] <acrichto> edunham: that is definitely true!
[20:42:27] <edunham> and it has no redundancy right now, so if it ever needs to be rebooted (yay, security updates) it'll take down everything which proxies through it while it's out
[20:44:09] <edunham> so on the timeline i'm looking at (next 3-6 months), s3 would be a lot less net headache
[20:46:50] <acrichto> edunham: I think the only worry I'd ahve with cloudfare is how fast it can be updated
[20:46:58] <acrichto> e.g. if we need to manually invalidate things or stuff like that
[20:48:26] <edunham> so, i've been confused all day by the names -- *flare* is the cloudf* that we could add if we were leaving the site on gh pages, which doesn't really solve our problem because traffic between it and github remains unencrypted
[20:48:52] <acrichto> yeah that's also something I'd be a little worried about
[20:48:58] <edunham> *front* is the cloudf* that's provided by amazon and thus seamlessly integrates with s3
[20:49:00] <acrichto> we may as well do it right security-wise if we're gonna do it at all
[20:49:09] <acrichto> oh hm
[20:49:17] <acrichto> I'm probably conufsed as well then lol
[20:49:34] <edunham> yeah these particular words go out of their way to be difficult
[20:49:51] <acrichto> edunham: so cloudfront I think is out b/c it requires integratin to deploy
[20:49:56] <acrichto> e.g. the S3 thing
[20:50:17] <acrichto> cloudflare sounds plausible but isn't encrypted all the way
[20:50:23] <edunham> integration to deploy, ie hand travis an encrypted aws credential and have travis upload the site whenever changes succeed?
[20:50:31] <acrichto> yeah maybe it's not that hard...
[20:50:37] <edunham> docs on travis are at http://docs.travis-ci.com/user/deployment/s3/
[20:51:06] <acrichto> yeah actually if that's set up it may not be too bad
[20:54:11] <edunham> of course, for safety's sake, I'd like to have an AWS account for Travis to use with perms only to push to that bucket, despite the fact that credentials can be encrypted in the .travis.yml
[20:54:33] <acrichto> edunham: sgtm
[20:54:39] <acrichto> this'd probably want a whole separate bucket anyway
[20:54:43] <edunham> absolutely
[20:54:49] <acrichto> although cloudfront prpobably requires that anyway
[20:56:33] <edunham> yep, and IAM is pretty good about facilitating least privilege policies, so it should be straightforward to ensure that the travis user has perms only on the one bucket
[20:56:51] * edunham distrusts robots on principle
[21:03:23] * nrc for one welcomes his new robot overlords
[21:04:47] <edunham> well, robots are just too trusting of other humans... and other humans are too devious at convincing the robots to disclose their secrets :)
[21:16:43] <brson> hey mac3 and mac4 came back online themselves without restarting buildslave
[21:16:59] <brson> oh but the build failed
[21:17:00] <brson> guh
[21:28:16] <acrichto> edunham: I tried running that gpg command but got:
[21:28:16] <acrichto> {"status":{"code":202,"desc":"Login required for this resource, you.","name":"BAD_SESSION"}}%                                                        [~] $                                                                                                                       [alex@acrichton-desktop]
[21:28:24] <acrichto> er, minus what came after the %
[21:29:35] <edunham> aww, sadness. pastebin me your gpg pubkey and I'll get you the keybase.io login creds so you can try their little client thing?
[21:30:28] <acrichto> edunham: https://gist.github.com/alexcrichton/be2a66549724a34f255a
[21:56:07] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[22:51:01] <edunham> brson, acrichto are there historical reasons that https://rust-lang.org/ doesn't resolve? (https://www does with a bad cert because github)
[22:51:10] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[22:52:12] <brson> edunham: what would it resolve to?
[22:52:30] <edunham> I guess it'd redirect onto https://www.r-l.o
[22:52:50] <brson> hm, i wonder how we're doing the redirect now. some dns record
[22:52:52] <edunham> is the www just for DNS convenience since we point the other subdomains so many different places?
[22:53:12] <edunham> on the http side, r-l.o redirects to www.r-l.o
[22:53:13] <brson> edunham: it's required by either dns or github limitations
[22:53:39] <brson> the configuration hosting on github pages does not work without a subdomain
[22:53:46] <brson> or at least did long ago when we set it up
[22:53:57] <edunham> ah, gh-pages-specific reasons. that's all i needed :)
[22:55:39] <brson> it's a restriction on root CNAMEs
[22:55:50] <brson> whatever a CNAME is github needs em
[22:56:35] <brson> i wonder if we might start modularizing our damn configure script
[22:56:37] <brson> it's so vast
[22:56:38] <edunham> well, in general a CNAME is a DNS record that that aliases one domain to a canonical one
[22:56:43] <brson> this pnacl patch is terrifying
[22:57:07] <edunham> but in github-land, it's a specialized setting that does... probably something other than a DNS cname.
[22:57:17] <acrichto> edunham: brson: I'd love for rust-lang.org to work
[22:57:27] <acrichto> brson: also it works for github pages somehow b/c that's how alexcrichton.com works
[22:57:34] <acrichto> brson: also yes, pnacl is still terrifying
[22:57:36] <edunham> http://rust-lang.org resolves into http://www.rust-lang.org for me
[22:57:56] <edunham> acrichto: do you have any other subdomains on alexcrichton.com, though?
[22:57:57] <brson> edunham: i think that's a redirect set up in easydns somehow
[22:58:09] * brson so helpful
[22:58:09] <acrichto> edunham: somewhere yeah
[22:58:18] <edunham> brson: yes, easydns calls it "url forwarding" which is its preferred synonym for cnames
[22:58:20] <acrichto> I remember it's special for the root domain
[22:58:32] <acrichto> but if we're using cloudflare it won't matter?
[22:58:35] <acrichto> b/c it's not using github, right?
[22:58:44] <edunham> acrichto: precisely!
[22:58:53] <brson> acrichto cannot remimber the difference between cloudfront and cloudflare
[22:59:00] <edunham> I was asking to verify that the problem comes from what i'm changing rather than from something i'm not changing
[22:59:15] <edunham> i'm just gonna start assuming that cloudf* resolves into the intended name
[22:59:23] <acrichto> brson: same
[22:59:40] <acrichto> edunham: I do believe though that we haven't been like morally opposed to rust-lang.org in the past
[22:59:59] <edunham> yeah i figured there could be some funny story about everything catching on fire in some tool if the domain resolved or something
[23:00:10] <edunham> unlikely, but a sufficiently extant possibility to warrant asking :)
[23:00:45] <brson> no we would prefer the root domain to work :)
[23:36:46] <edunham> brson: do you know whether my AWS account is supposed to be able to create new users?
[23:37:23] <brson> edunham: i think so, yes. you are supposed to have the same permissions as me
[23:37:57] <edunham> okay, cool.
