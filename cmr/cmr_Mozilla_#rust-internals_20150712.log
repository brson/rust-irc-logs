[00:02:42] *** Quits: amyers (amyers@moz-osiar4.md.comcast.net) (Ping timeout: 121 seconds)
[00:07:54] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[00:07:54] *** Quits: ytain (ytain@moz-gslvdm.cpe.pppoe.ca) (Quit: Textual IRC Client: www.textualapp.com)
[00:16:50] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[00:18:10] *** Joins: bdero (bran@moz-0e2lk5.sns9.e6pb.0197.2601.IP)
[00:27:24] *** Quits: X67r (user@moz-pee3l9.mullvad.net) (Quit: leaving)
[00:30:55] *** Joins: Kingsquee (kingsquee@moz-k72lip.bchsia.telus.net)
[00:31:54] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Quit: ChatZilla 0.9.91.1 [Firefox 39.0/20150630154324])
[00:33:01] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Ping timeout: 121 seconds)
[00:34:32] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[00:43:28] *** Quits: dlight (dlight@moz-d7n.hlq.135.177.IP) (A TLS packet with unexpected length was received.)
[01:12:49] *** Quits: sunfish (sunfish@moz-no0.93r.245.63.IP) (Ping timeout: 121 seconds)
[01:17:10] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[01:17:52] *** Joins: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP)
[01:21:20] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Ping timeout: 121 seconds)
[01:22:00] *** Quits: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP) (Ping timeout: 121 seconds)
[01:38:54] *** Parts: wcosta|afk (wander@moz-7k0.o3c.56.187.IP) ()
[01:39:43] *** Quits: bdero (bran@moz-0e2lk5.sns9.e6pb.0197.2601.IP) (Ping timeout: 121 seconds)
[01:45:18] *** Joins: nmatsaki1 (nmatsakis@moz-no0.93r.245.63.IP)
[01:46:47] *** Joins: scott (uid25790@moz-e5ok1n.brockwell.irccloud.com)
[01:54:58] *** Joins: sunfish (sunfish@moz-no0.93r.245.63.IP)
[01:56:47] *** Joins: adu (ajr@moz-99ult9.md.comcast.net)
[01:58:35] *** Joins: ncarrillo (textual@moz-739a1t.cable.rcn.com)
[01:59:01] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[02:00:32] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[02:12:53] *** Quits: kimundi (kimundi@moz-v038uj.nbov.7sqf.4fe2.2002.IP) (Ping timeout: 121 seconds)
[02:14:17] *** Quits: dp (dp@moz-9s6mok.gb4f.8ao9.0e35.2a01.IP) (Ping timeout: 121 seconds)
[02:17:58] *** Joins: kimundi (kimundi@moz-0r8.svi.226.79.IP)
[02:18:16] *** Quits: RC9 (RCIX@moz-2vc.dfa.8.198.IP) (Ping timeout: 121 seconds)
[02:25:51] *** Quits: adu (ajr@moz-99ult9.md.comcast.net) (Client exited)
[02:25:53] *** Joins: RC9 (RCIX@moz-2l66ca.ph.cox.net)
[02:33:05] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[02:39:31] *** Joins: adu (ajr@moz-99ult9.md.comcast.net)
[03:02:52] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[03:06:13] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[03:09:19] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[03:15:55] *** Quits: ncarrillo (textual@moz-739a1t.cable.rcn.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[03:16:50] *** Joins: semarie (semarie@moz-gb6ql2.bpv6.bg1u.41d0.2001.IP)
[03:16:52] *** Joins: Feyn (aram@moz-5vj.68e.115.42.IP)
[03:19:00] *** Joins: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP)
[03:23:14] *** Quits: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP) (Ping timeout: 121 seconds)
[03:27:36] *** Joins: Quxxy (chatzilla@moz-0nv.jkp.167.59.IP)
[03:36:42] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[03:43:19] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[03:44:58] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[03:53:10] *** Joins: yjv (yjv@moz-ll38tk.pa.comcast.net)
[03:53:44] *** Quits: yjv (yjv@moz-ll38tk.pa.comcast.net) (Quit: Leaving...)
[03:53:49] *** Joins: mukilan (mukilan@moz-kmo.qie.164.122.IP)
[04:27:03] *** Quits: scott (uid25790@moz-e5ok1n.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[04:27:33] *** Joins: waffles (wafflespean@moz-354.kbj.23.1.IP)
[04:28:37] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Connection closed)
[04:33:40] *** Quits: pierre_m (pierre_m@moz-2vs15r.slkc.qwest.net) (Connection closed)
[04:34:08] *** Joins: laumann (thomas@moz-anc.lag.199.62.IP)
[04:43:33] *** Joins: SilverKey (SilverKey@moz-liif3j.res.rr.com)
[04:50:02] *** Joins: yjv_ (yjv@moz-j0cdis.fios.verizon.net)
[04:50:41] *** Joins: tamird (textual@moz-lat.dkr.14.50.IP)
[04:57:01] <sfackler> blaenk: sup?
[04:57:20] <blaenk> oh hey
[04:57:42] <blaenk> my concern was answered so no worries, though I did want to get your opinion on something, let me get it
[05:06:20] <blaenk> sfackler: I'm toying around with a global, shared thread pool package and it uses the same technique you (?) used in the log crate
[05:07:02] <blaenk> it's very short and I was wondering if you could give it a quick skim to see what you thought https://github.com/blaenk/shared_pool/blob/master/src/lib.rs
[05:07:38] <blaenk> if you don't have np, I had two questions I think. the first is that I got rid of the REFCOUNT atomic cause the ThreadPool I'm returning is clonable (it's basically just an Arc, so it's cheap to clone) so instead of returning a reference to it I clone it and return that
[05:07:43] <blaenk> *if you don't have time
[05:08:19] <blaenk> the second is that I wanted to try to have a way to allow users to create their own global shared pools, say something like shared_pool::init(MY_POOL, 4) would create one called MY_POOL with 4 threads
[05:08:37] <blaenk> anyways the details aren't very important, I guess it would be analogous to being able to create different loggers in the log crate
[05:08:58] <blaenk> the problem I ran into is that I couldn't figure out how to create the shutdown handler for each one of them
[05:10:14] <blaenk> so for example the user might have a: static MY_POOL: AtomicUsize; and you could then do shared_pool::init(&MY_POOL, 4) or something, but the shutdown handler would have no way of referencing MY_POOL to handle its cleanup, even though it's a global
[05:10:30] <sfackler> right
[05:10:37] <blaenk> so the first thing I went with was a macro
[05:10:46] <blaenk> take either an `ident` and create it myself, or a `path` to the static
[05:11:27] <blaenk> but I ran into issues with each one. the closest I got I think was with taking an `ident` and creating the static myself, then creating a mod $theident { extern fn shutdown() { ... } } to avoid shutdown handler fn name collisions
[05:11:36] *** Joins: wilmatrexx (Mibbit@moz-hu6.nja.252.72.IP)
[05:11:36] <sfackler> that's the approach I was thinking
[05:11:52] <blaenk> the problem was though that if I made the macro create the static, then I have no way referring to it later lol, i.e. to retrieve the pool
[05:11:57] <blaenk> I'll push the branch that includes that approach
[05:12:40] <sfackler> if it makes a static with a name provided by the user, the user should be able to refer to it directly, right?
[05:12:58] <blaenk> that's what I thought, maybe I'm doing something wrong, will push and then I'll give it another look
[05:13:49] <blaenk> https://github.com/blaenk/shared_pool/blob/custom-pools/src/lib.rs
[05:13:51] *** Quits: wilmatrexx (Mibbit@moz-hu6.nja.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:13:58] <blaenk> line 28 is the macro that does the bulk
[05:14:09] <blaenk> so it takes an ident and then notice it creates the static and namespaces a shutdown handler for it
[05:14:32] <blaenk> then calls init_from which is like log crate's init function, except instead of referring to a global it takes a reference to the global
[05:14:35] <blaenk> that's all fine, it works
[05:15:32] <blaenk> pushed some changes to it
[05:15:34] <blaenk> that builds
[05:15:42] <blaenk> but then the test fails with the error I'll gist
[05:16:05] <blaenk> https://gist.github.com/blaenk/4ab5a54051129788f4cc
[05:16:30] <blaenk> updated the gist with the test, even though it's in the code
[05:16:39] <blaenk> so I call init_pool!(TEST, 4).unwrap()
[05:16:50] <blaenk> and init_pool creates the static right, so I should be able to refer to `TEST` later like you said
[05:16:57] <blaenk> but then line 9 tries to do just that, &TEST
[05:17:04] <blaenk> error: unresolved name `TEST`
[05:17:08] <sfackler> I ended up going with a lazy_static Mutex<HashMap<...>> to do something somewhat similar in rust-openssl: https://github.com/sfackler/rust-openssl/blob/master/openssl/src/ssl/mod.rs#L182-L193
[05:17:21] <blaenk> ohhh you know why I think I can't refer to the static...
[05:17:33] <blaenk> it's because the macro defines a scope, or whatever
[05:17:34] <blaenk> a block
[05:17:41] <blaenk> right? that must be it
[05:17:48] <blaenk> https://github.com/blaenk/shared_pool/blob/custom-pools/src/lib.rs#L31
[05:17:51] <blaenk> => {{
[05:18:04] <blaenk> so the static name can't be referred to from the outside right, argh
[05:18:12] <blaenk> will take a look at your link
[05:18:35] <blaenk> yeah that's my problem though I think
[05:18:44] <sfackler> oh yeah, that'll d it
[05:18:51] <blaenk> the macro init_pool! which creates the static defines it in a block, so I can't refer to it after that
[05:19:14] <blaenk> wonder if there's anything I can do
[05:19:25] *** Quits: ChrisMorgan (ChrisMorgan@moz-g2hg6v.tpgi.com.au) (Ping timeout: 121 seconds)
[05:19:27] <blaenk> if only I could define the static in the scope of the macro, and then also execute the block
[05:19:46] *** Joins: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP)
[05:21:28] <blaenk> maybe if the user defines the static instead
[05:21:39] <blaenk> and then the macro takes a path to it instead of an ident
[05:23:54] *** Quits: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP) (Ping timeout: 121 seconds)
[05:32:36] <blaenk> the problem is this I think, how can I resolve it? https://play.rust-lang.org/?gist=65bc3d39916e7d70ec4e&version=stable
[05:32:52] <blaenk> can it be resolved?
[05:34:33] <sfackler> blaenk: I do not believe so
[05:34:40] <blaenk> ;_;
[05:35:23] <blaenk> yeah it doesn't work if I declare the static in the scope of main, but it does if I declare it in global scope of course
[05:35:32] <blaenk> as long as I do ::TEST
[05:35:55] <blaenk> oh wait
[05:36:15] <blaenk> yeah no
[05:36:29] <blaenk> also placed it in global scope and though that playpen fixes, my library doesn't
[05:38:06] <blaenk> yeah if I pass a second param to the macro, like init!(TEST, TEST, 4), first TEST is a path and second is an ident, it works
[05:38:45] <blaenk> or some way to not have to have the user type that twice
[05:39:16] <blaenk> extra `ident` param is needed for this line https://github.com/blaenk/shared_pool/blob/custom-pools/src/lib.rs#L41
[05:39:31] <blaenk> hmmm maybe I can just use an ident actually
[05:39:56] <blaenk> yesss
[05:39:58] <blaenk> I can
[05:40:02] <blaenk> ::$name, ez
[05:41:15] <blaenk> alright got something working, will polish later
[05:44:35] *** Quits: untitaker (untitaker@moz-l4lg7t.highway.telekom.at) (Ping timeout: 121 seconds)
[05:45:41] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[05:46:31] *** Joins: avikpal (avikpal@moz-55u.ep4.194.117.IP)
[05:48:59] *** Joins: untitaker (untitaker@moz-2uceud.highway.telekom.at)
[05:52:14] *** Quits: barosl (barosl@moz-tmp.qma.67.220.IP) (Connection closed)
[05:52:59] *** Quits: Feyn (aram@moz-5vj.68e.115.42.IP) (Quit: Leaving)
[05:53:00] *** Joins: barosl (barosl@moz-tmp.qma.67.220.IP)
[05:57:37] *** Joins: casey_ (casey@moz-v0ns05.tpgi.com.au)
[06:00:01] *** Quits: yjv_ (yjv@moz-j0cdis.fios.verizon.net) (Ping timeout: 121 seconds)
[06:04:28] *** Quits: avikpal (avikpal@moz-55u.ep4.194.117.IP) (Ping timeout: 121 seconds)
[06:04:40] *** Joins: avikpal (avikpal@moz-pnd.9l2.194.117.IP)
[06:06:16] *** Quits: RC9 (RCIX@moz-2l66ca.ph.cox.net) (Ping timeout: 121 seconds)
[06:09:05] *** Joins: RC9 (RCIX@moz-7omm6s.ph.cox.net)
[06:09:37] *** Quits: avikpal (avikpal@moz-pnd.9l2.194.117.IP) (Ping timeout: 121 seconds)
[06:10:43] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[06:10:45] *** Joins: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net)
[06:11:18] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[06:12:21] *** Quits: barosl (barosl@moz-tmp.qma.67.220.IP) (Connection closed)
[06:13:05] *** Joins: barosl (barosl@moz-tmp.qma.67.220.IP)
[06:16:26] *** Joins: avikpal (avikpal@moz-pnd.9l2.194.117.IP)
[06:16:48] *** Quits: Yurumechan (23f9939a@moz-eg6.d6u.78.121.IP) (Ping timeout: 121 seconds)
[06:19:00] *** Joins: Yurumechan (23f9939a@moz-eg6.d6u.78.121.IP)
[06:22:23] *** Quits: avikpal (avikpal@moz-pnd.9l2.194.117.IP) (Ping timeout: 121 seconds)
[06:22:25] *** Joins: avikpal_ (avikpal@moz-rg2.9l2.194.117.IP)
[06:22:36] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[06:23:20] *** Quits: Kingsquee (kingsquee@moz-k72lip.bchsia.telus.net) (Quit: Leaving)
[06:37:22] *** Quits: avikpal_ (avikpal@moz-rg2.9l2.194.117.IP) (Ping timeout: 121 seconds)
[06:42:44] *** Joins: avikpal (avikpal@moz-msd.6lo.194.117.IP)
[07:01:03] *** Quits: avikpal (avikpal@moz-msd.6lo.194.117.IP) (Connection closed)
[07:01:41] *** Joins: mitaa (mitaa@moz-cjvo4e.dyn.drei.com)
[07:01:57] *** Joins: filsmick (filsmick@moz-gf7g4q.abo.wanadoo.fr)
[07:07:50] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[07:17:11] *** Joins: mgottschlag (quassel@moz-c3ivja.hsi14.kabel-badenwuerttemberg.de)
[07:17:37] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[07:20:40] *** Joins: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP)
[07:20:40] *** Joins: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net)
[07:21:55] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[07:24:05] *** Quits: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[07:24:49] *** Quits: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP) (Ping timeout: 121 seconds)
[07:32:45] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[07:32:51] *** Quits: amanone (amanone@moz-eh1rje.sk83.bjud.7e00.2a01.IP) (Quit: WeeChat 0.4.2)
[07:38:00] <Manishearth> eddyb: do we have RVO, and if so, how much?
[07:38:13] <Manishearth> Specifically, can we remove unwrap() overhead? Intrusively?
[07:38:19] <eddyb> Manishearth: we have RVO in the ABI but not NRVO
[07:38:22] <eddyb> huh
[07:38:30] <eddyb> Manishearth: what does that have to do with RVO?
[07:38:30] <Manishearth> expound?
[07:38:45] <Manishearth> eddyb: sorry, it's not RVO, but it's a return value optimization :p
[07:38:47] *** Quits: waffles (wafflespean@moz-354.kbj.23.1.IP) (Ping timeout: 121 seconds)
[07:38:54] <eddyb> let x = foo().unwrap(); write foo()'s data into x?
[07:39:08] <eddyb> s/data/return value/
[07:39:12] <eddyb> the part inside Some()
[07:41:27] <Manishearth> eddyb: http://is.gd/26t3Qq
[07:41:46] <Manishearth> if foo() was never a separate function, it could theoretically be optimized to the function below
[07:41:54] <eddyb> that's not RVO
[07:42:00] <Manishearth> eddyb: I know
[07:42:16] <Manishearth> closest term I have to RVO :)
[07:42:17] <eddyb> it's got nothing to do with return values
[07:42:19] <Manishearth> *is
[07:42:38] <eddyb> gimme a sec
[07:43:45] <eddyb> Manishearth: Result::unwrap displays the error though
[07:44:22] <eddyb> Manishearth: http://is.gd/b8PIED
[07:44:27] <eddyb> it's pretty efficient, but, eh
[07:44:28] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[07:44:44] <Manishearth> eddyb: oh, right
[07:44:46] <Manishearth> hm
[07:45:15] <Manishearth> yeah, was just wondering if Rust's unwrap()-all-the-things culture hits performance. It probably doesn't, but optimizing it away would be nice
[07:45:32] <Manishearth> esp if the error is large, avoiding the copy in returning would be nice
[07:46:23] <eddyb> you might want unwrap internalizing so that the panic is earlier, but I'm not sure that's a good idea
[07:46:36] *** Joins: waffles (wafflespean@moz-354.kbj.23.1.IP)
[07:48:53] <Manishearth> eddyb: you mean make unwrap special from the compiler's pov?
[07:48:59] <eddyb> no
[07:49:10] <eddyb> I mean make LLVM internalize post-processing
[07:49:17] <Manishearth> ah
[07:49:22] <eddyb> to shrink the return value
[07:49:31] <eddyb> not sure what the technical term is
[07:49:53] <Manishearth> yeah
[07:50:19] <eddyb> Manishearth: now, in terms of RVO... writing the error to the top of the stack and only returning the data directly, now that would be cool
[07:50:42] <Manishearth> yeah sort of what I meant
[07:50:44] <Manishearth> partially
[07:50:55] <eddyb> especially with From
[07:51:05] <eddyb> it would be very cool, but also tricky
[07:51:19] <Manishearth> The core idea is that when folks are unwrap()ing, they don't care about errors. Often there's a lot of extra processing related to figuring out the error (often a vtable lookup, etc), that could be entirely bypassed if we just want to panic
[07:51:30] <Manishearth> esp if we stopped printing out the error in release mode
[07:51:31] <eddyb> but why unwrap?
[07:51:47] <eddyb> I'd rather optimize the try! case
[07:51:51] <Manishearth> how?
[07:52:08] <eddyb> like I said, don't hold temporary space for error except at the top of the stack
[07:52:25] <Manishearth> eddyb: you still need to calculat it
[07:52:53] <eddyb> Manishearth: one first step would be split a Result<T, E> into two return pointers
[07:53:10] <eddyb> T*, E* and maybe return bool from the function to indicate which one it is
[07:53:10] <Manishearth> eddyb: because unwrap says you don't care about errors. If we could hint to the compiler to "monomorphize" a separate version of the function where the panic is internalized, llvm can optimize much more. The problem is that we ecan't optimize across the function boundary, afaict
[07:53:16] <Manishearth> ew
[07:53:18] <Manishearth> but ok
[07:53:24] <eddyb> it's a low-level detail :P
[07:53:36] <Manishearth> stil lew
[07:53:38] <eddyb> there is no Result lvalue to inspect
[07:53:52] <eddyb> so its representation is not visible to the program
[07:53:55] <Manishearth> yep
[07:54:21] <Manishearth> eddyb: so can we generate multiple versions of foo() depending on how it's going to be used?
[07:54:25] <eddyb> I think glib does something like this
[07:54:27] <Manishearth> I think we'll still need that, right?>
[07:54:29] <eddyb> Manishearth: why?
[07:54:58] <Manishearth> because if I *don't* unwrap, there's an lvalue to inspect now 
[07:55:01] <eddyb> if you want to do something with it, allocate a Result on the stack, pass the pointers to it to the function and store the resulting i1 into the tag
[07:55:09] <Manishearth> oh that way
[07:55:11] <Manishearth> I see
[07:55:12] <eddyb> I wasn't even talking about unwrapping, unwrapping might ruin it
[07:55:20] <eddyb> I care more about very long try! chains
[07:55:28] <Manishearth> yeah
[07:56:49] <eddyb> with From::from you could do something very cool if all you're doing is wrapping errors in enum variants
[07:57:15] <eddyb> you could pass an appropriate inner E pointer and set the tag to that E variant if the call failed
[07:57:46] <Manishearth> oo
[07:57:57] <eddyb> you would still use an i1 return for Result<(), ()>, but larger things would benefit
[07:58:01] <Manishearth> eddyb: would this be an impactful optimization?
[07:58:09] <eddyb> you'd have to test it :D
[07:58:16] <eddyb> after you spend ages implementing it
[07:58:38] <eddyb> some of it has to be in rustc, other parts could be LLVM passes
[07:58:52] <eddyb> Manishearth: would be useful to document it for the future, at least
[07:59:56] <Manishearth> eddyb: do we do any rust specific optimizations or do we hand llvm a steaming pile of IR and say "hey, your problem now"
[08:00:09] <eddyb> we pick the layout of types
[08:00:27] *** Quits: waffles (wafflespean@moz-354.kbj.23.1.IP) (Ping timeout: 121 seconds)
[08:00:32] <Manishearth> by rust specific I mean both in librustc* and stuff that applies specifically to the way rust is used, like the try optimization you're proposing
[08:00:36] <Manishearth> ah
[08:00:52] <eddyb> and doener made a recent change to pass DSTs as two arguments
[08:01:06] <Manishearth> eddyb: do we plan to do more rust specific stuff?
[08:01:27] <eddyb> so <[T]>::len is takes T* and i64 and just returns its second argument, nowadays
[08:01:48] <benh> Why does codegen make a difference between a struct with two fields as a single argument and those two fields as two arguments anyway?
[08:02:02] <eddyb> benh: C does
[08:02:26] <benh> Is there a semantic difference in C?
[08:02:28] <eddyb> also, we pass everything larger than a pointer by reference
[08:02:36] <eddyb> benh: C has an ABI
[08:02:38] <Manishearth> eddyb: wait what
[08:02:40] <Manishearth> but why
[08:02:50] <eddyb> it's not configurable because it's hardcoded
[08:02:58] <eddyb> all over the place
[08:03:01] <eddyb> in subtle conditions
[08:03:03] <benh> I didn't know C has an ABI :P
[08:03:07] <benh> why does its ABI care, then? :P
[08:03:22] <eddyb> because it has to be defined
[08:03:42] <Manishearth> eddyb: isn't it cheaper to have the extra copy over the extra indirection?
[08:03:51] <Manishearth> oh wait nvm I see what you mean
[08:03:53] <benh> I guess it's nice to have the opportunity to look at the huge struct in your argument list and say hmm maybe that's worth passing by ref
[08:03:53] <Manishearth> that makes sense
[08:04:03] <eddyb> ewwww http://is.gd/Lq49Kn
[08:04:09] <eddyb> check its IR in debug mode
[08:04:13] <benh> but it's really not clear to me why you'd make that differentiation for small structs
[08:04:22] <eddyb> oops, wrong link
[08:04:37] <eddyb> this http://is.gd/DpI12X
[08:05:07] <eddyb> benh: I think C starts doing it at 2x or 3x the pointer size
[08:05:43] <eddyb> define internal i64 @"_ZN5slice12_$u5b$T$u5d$3len21h11690703914812959299E"(i8* noalias nonnull readonly, i64) unnamed_addr #1 {
[08:05:55] <eddyb> that function could just be ret i64 %1
[08:05:57] <eddyb> but nooo
[08:06:16] <benh> well that's the point of compiling in release mode!
[08:06:20] *** Joins: eljay (eljay@moz-fmte10.skybroadband.com)
[08:06:22] <eddyb> benh: no, it's not
[08:06:57] <eddyb> the point of compiling in release mode is to optimize things that consist of complicated inter-procedural control and value flow
[08:08:13] <benh> is the rust ABI specced out somewhere btw
[08:08:16] <eddyb> this is just optimizer fodder and it can get inlined
[08:08:23] <eddyb> benh: no, not yet
[08:08:35] <eddyb> there's no plans for stability, but we could start documenting it
[08:09:12] <eddyb> which reminds me, I completely forgot about moving layout computation up from trans
[08:09:17] <benh> I seem to recall reading about it way back in the day
[08:09:50] <benh> but don't remember any details :(
[08:11:21] *** Quits: filsmick (filsmick@moz-gf7g4q.abo.wanadoo.fr) (Quit: )
[08:14:47] *** Quits: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net) (Connection closed)
[08:14:59] *** Joins: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net)
[08:28:55] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[08:30:31] *** Quits: casey_ (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[08:40:01] *** Quits: nham (nham@moz-lglsfe.il.comcast.net) (Ping timeout: 121 seconds)
[08:45:08] *** Quits: RC9 (RCIX@moz-7omm6s.ph.cox.net) (Connection closed)
[08:45:32] *** Joins: Pierre_M__ (Pierre_M@moz-2vs15r.slkc.qwest.net)
[08:49:00] *** Quits: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[08:51:03] *** Joins: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net)
[08:53:09] *** Joins: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net)
[08:53:42] *** Quits: Pierre_M__ (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[08:55:10] *** Joins: Pierre_M__ (Pierre_M@moz-2vs15r.slkc.qwest.net)
[08:55:45] *** Quits: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[08:58:17] *** Quits: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[08:58:58] *** Joins: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net)
[09:01:11] *** Quits: mgottschlag (quassel@moz-c3ivja.hsi14.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[09:02:00] *** Quits: Pierre_M__ (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[09:03:25] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[09:04:00] *** Joins: Pierre_M__ (Pierre_M@moz-2vs15r.slkc.qwest.net)
[09:06:00] *** Quits: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[09:06:28] *** Joins: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net)
[09:09:02] *** Joins: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net)
[09:09:26] *** Quits: Pierre_M__ (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[09:10:21] *** Quits: mukilan (mukilan@moz-kmo.qie.164.122.IP) (Ping timeout: 121 seconds)
[09:11:06] *** Joins: Pierre_M__ (Pierre_M@moz-2vs15r.slkc.qwest.net)
[09:11:59] *** Quits: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[09:13:32] *** Joins: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net)
[09:14:32] *** Quits: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[09:15:19] *** Quits: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net) (Connection closed)
[09:15:33] *** Joins: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net)
[09:16:33] *** Quits: Pierre_M__ (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[09:17:39] *** Joins: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net)
[09:20:19] *** Quits: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net) (Connection closed)
[09:20:33] *** Quits: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[09:20:51] *** Joins: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net)
[09:21:31] *** Joins: Kingsquee (kingsley@moz-k72lip.bchsia.telus.net)
[09:21:49] *** Joins: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP)
[09:22:25] *** Quits: adu (ajr@moz-99ult9.md.comcast.net) (Client exited)
[09:23:26] *** Joins: mukilan (mukilan@moz-eul.cer.164.122.IP)
[09:23:52] *** Joins: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net)
[09:25:46] *** Joins: jensnock_ (jensnockert@moz-pvj.o2f.219.84.IP)
[09:26:00] *** Quits: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP) (Ping timeout: 121 seconds)
[09:26:34] *** Quits: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[09:26:51] *** Joins: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net)
[09:27:44] *** Joins: dp (dp@moz-jbmop1.gb4f.8ao9.0e35.2a01.IP)
[09:29:07] *** Joins: Pierre_M__ (Pierre_M@moz-2vs15r.slkc.qwest.net)
[09:30:06] *** Quits: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[09:30:56] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[09:31:35] *** Quits: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[09:31:56] *** Joins: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net)
[09:34:21] *** Joins: mgottschlag (quassel@moz-c3ivja.hsi14.kabel-badenwuerttemberg.de)
[09:35:01] *** Quits: Pierre_M__ (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[09:35:28] *** Joins: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net)
[09:35:58] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[09:38:01] *** Quits: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[09:38:08] *** Joins: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net)
[09:40:09] *** Joins: Pierre_M__ (Pierre_M@moz-2vs15r.slkc.qwest.net)
[09:41:01] *** Quits: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[09:42:18] *** Joins: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net)
[09:43:01] *** Quits: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[09:44:20] *** Joins: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net)
[09:45:09] *** Quits: Pierre_M__ (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[09:46:23] *** Joins: Pierre_M__ (Pierre_M@moz-2vs15r.slkc.qwest.net)
[09:47:10] *** Quits: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[09:49:11] *** Quits: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[09:57:49] *** Joins: nagisa (nagisa@moz-8t068g.static.zebra.lt)
[10:00:30] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[10:02:20] *** Joins: X67r (user@moz-m2hep7.mullvad.net)
[10:08:03] *** Quits: laumann (thomas@moz-anc.lag.199.62.IP) (Ping timeout: 121 seconds)
[10:09:51] *** Joins: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net)
[10:10:44] *** Joins: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP)
[10:11:53] *** Joins: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net)
[10:12:44] *** Quits: Pierre_M__ (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[10:13:09] *** Joins: Guest53 (textual@moz-rvv.00r.255.109.IP)
[10:14:03] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[10:14:04] *** Joins: Pierre_M__ (Pierre_M@moz-2vs15r.slkc.qwest.net)
[10:14:45] *** Quits: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[10:15:53] *** Joins: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net)
[10:16:46] *** Quits: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[10:17:22] *** Joins: X67r_ (user@moz-m2hep7.mullvad.net)
[10:18:02] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[10:18:18] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[10:18:57] *** Joins: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net)
[10:19:02] *** Quits: Pierre_M__ (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[10:19:48] *** Quits: X67r (user@moz-m2hep7.mullvad.net) (Ping timeout: 121 seconds)
[10:20:03] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[10:20:42] *** Quits: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net) (Connection closed)
[10:21:07] *** Joins: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net)
[10:22:02] *** Quits: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[10:23:21] *** Joins: eibwen (eibwen@moz-qmu91h.dip0.t-ipconnect.de)
[10:24:12] *** Joins: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net)
[10:24:26] *** Joins: waffles (wafflespean@moz-paa.43b.136.123.IP)
[10:25:51] *** Quits: X67r_ (user@moz-m2hep7.mullvad.net) (Connection closed)
[10:26:08] *** Joins: X67r (user@moz-m2hep7.mullvad.net)
[10:26:17] *** Joins: Pierre_M__ (Pierre_M@moz-2vs15r.slkc.qwest.net)
[10:27:11] *** Quits: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[10:29:02] *** Quits: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[10:29:18] *** Joins: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net)
[10:32:19] *** Quits: Pierre_M__ (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[10:33:21] *** Joins: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net)
[10:34:11] *** Joins: ncarrillo (textual@moz-739a1t.cable.rcn.com)
[10:35:26] *** Joins: Pierre_M__ (Pierre_M@moz-2vs15r.slkc.qwest.net)
[10:36:22] *** Quits: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[10:36:28] <kimundi> nmatsakis / nmatsaki1: Would it be possible to borrow-check tuple-struct/variant constructors differently from function calls so that Foo(&<rvalue>) is valid and creates a rvalue just as Foo { data: &<rvalue> } ?
[10:38:25] *** Quits: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[10:40:26] *** Joins: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net)
[10:43:28] *** Quits: Pierre_M__ (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[10:44:35] *** Joins: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net)
[10:47:34] *** Quits: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[10:49:15] *** Quits: Guest53 (textual@moz-rvv.00r.255.109.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[10:49:47] *** Joins: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net)
[10:51:31] <eddyb> kimundi: function calls are rvalues
[10:51:48] <eddyb> or do you mean in terms of scoping borrows?
[10:51:55] <kimundi> yes
[10:51:56] *** Joins: Pierre_M__ (Pierre_M@moz-2vs15r.slkc.qwest.net)
[10:52:13] <kimundi> Foo(&<rvalue>) scoped the & temporary to the inside of the parens
[10:52:22] <kimundi> Foo { data: &<rvalue> } doesn't
[10:52:36] *** Quits: Pierre_M_ (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[10:52:43] <eddyb> which means the former doesn't work in a let binding
[10:52:54] <eddyb> let initializer I mean
[10:52:59] <bluss> I think Foo(&<rvalue>) should scope it to the expression, so slightly outside of the parens
[10:53:22] <eddyb> playbot: let _ = Some(&0);
[10:53:24] -playbot- ()
[10:53:27] <eddyb> playbot: let _x = Some(&0);
[10:53:28] -playbot- <anon>:9:24: 9:25 error: borrowed value does not live long enough
[10:53:28] -playbot- <anon>:9         let _x = Some(&0);
[10:53:28] -playbot- output truncated; full output at: http://bit.ly/1fzEuhV
[10:53:40] <bluss> playbot: for elt in Some(&1) { } 
[10:53:41] -playbot- ()
[10:53:50] <bluss> so it can be used if it's the same expression ^
[10:53:59] <eddyb> playbot: struct P<'a> { x: &'a i32 } let _x = P { x: &0 };
[10:54:00] -playbot- ()
[10:54:08] <eddyb> kimundi: okay, I see what you mean
[10:54:27] <eddyb> kimundi: the MIR might result in this change anyway
[10:54:38] *** Quits: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[10:54:42] <eddyb> because ADT constructors are treated differently from function calls there
[10:54:58] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[10:55:56] <kimundi> playbot: let _x = (&0,);
[10:55:57] -playbot- ()
[10:56:07] *** Quits: huon (huon@moz-hj272o.8rnv.rggd.6180.2400.IP) (Ping timeout: 121 seconds)
[10:56:39] *** Quits: Pierre_M__ (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[10:58:43] *** Joins: huon (huon@moz-hj272o.8rnv.rggd.6180.2400.IP)
[10:58:44] *** ChanServ sets mode: +o huon
[11:01:07] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[11:09:05] *** Joins: munksgaa1d (munksgaard@moz-urnkl5.u.parknet.dk)
[11:09:46] *** Joins: doener (doener@moz-fnh.n4j.147.5.IP)
[11:12:04] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[11:28:34] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[11:37:46] *** Joins: Guest53 (textual@moz-rvv.00r.255.109.IP)
[11:42:43] *** Quits: X67r (user@moz-m2hep7.mullvad.net) (Connection closed)
[11:44:35] *** Joins: X67r (user@moz-m2hep7.mullvad.net)
[11:57:36] *** Quits: X67r (user@moz-m2hep7.mullvad.net) (Connection closed)
[11:58:15] *** Joins: X67r (user@moz-m2hep7.mullvad.net)
[12:09:50] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[12:17:52] *** Quits: jyyou (jyyou@moz-nhbjfr.bo6r.4bjo.8900.2400.IP) (Quit: WeeChat 1.2)
[12:18:24] *** Joins: jyyou (jyyou@moz-nhbjfr.bo6r.4bjo.8900.2400.IP)
[12:20:18] *** Quits: jyyou (jyyou@moz-nhbjfr.bo6r.4bjo.8900.2400.IP) (Quit: WeeChat 1.2)
[12:20:54] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[12:22:21] *** Joins: jyyou (jyyou@moz-nhbjfr.bo6r.4bjo.8900.2400.IP)
[12:25:45] *** Joins: imperio (Mibbit@moz-0ebgt2.fbx.proxad.net)
[12:31:03] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[12:33:12] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[12:35:59] <Manishearth> > Previously, Send was a super-special compiler built-in trait with powers unseen by human eyes. Then, everything changed when the opt-in built-in traits (OIBIT) nation attacked. 
[12:36:03] <Manishearth> huon: :D
[12:36:40] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[12:37:05] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[12:47:53] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[12:53:28] <bluss> yeah and built in traits are not magical at all
[12:53:54] <eddyb> OIBIT is such wrong
[12:54:18] <Mutabah> They're more opt-out, and they're not built-in :D
[12:54:20] <eddyb> it's opt-out non-builtin
[12:54:29] *** Quits: imperio (Mibbit@moz-0ebgt2.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[12:54:38] <eddyb> I would even call them "kinds"
[12:54:53] <eddyb> or opt-out propagating traits
[12:54:58] <eddyb> OOSAT
[12:55:03] <eddyb> opt-out semi-automatic traits
[12:56:55] <eddyb> Gankro: https://github.com/rust-lang/rust/pull/26955#discussion_r34411378
[13:00:50] <nox> Kind would be a weird term to overload.
[13:02:08] *** Quits: Kingsquee (kingsley@moz-k72lip.bchsia.telus.net) (Quit: Konversation terminated!)
[13:03:10] *** Joins: mukilan_ (mukilan@moz-eul.cer.164.122.IP)
[13:03:37] *** Quits: mukilan (mukilan@moz-eul.cer.164.122.IP) (Ping timeout: 121 seconds)
[13:04:34] <bluss> they used to be called kinds
[13:07:38] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[13:10:50] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[13:11:02] *** Quits: mukilan_ (mukilan@moz-eul.cer.164.122.IP) (A TLS packet with unexpected length was received.)
[13:11:11] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[13:12:08] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[13:13:50] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[13:15:46] *** Joins: mukilan (mukilan@moz-eul.cer.164.122.IP)
[13:26:05] *** Joins: O01eg (o01eg@moz-d21dbs.j0bl.3egh.2698.2a02.IP)
[13:30:07] *** Joins: mib_ggq2ua (Mibbit@moz-hu6.nja.252.72.IP)
[13:34:11] *** Quits: mib_ggq2ua (Mibbit@moz-hu6.nja.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:35:44] *** Joins: avikpal (avikpal@moz-9o7.mf2.194.117.IP)
[13:40:27] <nagisa> WindowsBunny: I want to see that file with error codes!
[13:40:52] *** Quits: Guest53 (textual@moz-rvv.00r.255.109.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[13:41:28] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[13:41:44] <WindowsBunny> nagisa: https://retep998.github.io/doc/winapi/winerror/index.html
[13:42:54] *** Quits: X67r (user@moz-m2hep7.mullvad.net) (Connection closed)
[13:43:20] *** Joins: X67r (user@moz-m2hep7.mullvad.net)
[13:45:00] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[13:45:41] *** Quits: avikpal (avikpal@moz-9o7.mf2.194.117.IP) (Ping timeout: 121 seconds)
[13:45:44] *** Joins: avikpal_ (avikpal@moz-9o7.mf2.194.117.IP)
[13:47:08] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[13:47:43] <WindowsBunny> nagisa: https://github.com/retep998/winapi-rs/blob/master/src/winerror.rs
[13:48:17] *** Quits: mukilan (mukilan@moz-eul.cer.164.122.IP) (Ping timeout: 121 seconds)
[13:48:33] <nagisa> WindowsBunny: thanks!
[13:49:14] <WindowsBunny> nagisa: Basically it's my threat that if libc starts packing on more winapi, I'll submit a PR to add all those error codes to libc
[13:49:39] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[13:49:43] <nagisa> we totally need all of them
[13:49:57] * WindowsBunny glares at acrichto
[13:51:15] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[13:52:40] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (A TLS packet with unexpected length was received.)
[13:53:48] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[13:58:19] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[14:05:22] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[14:06:16] *** Quits: Florob (Florob@moz-je09t8.de) (Ping timeout: 121 seconds)
[14:07:26] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[14:08:42] *** Joins: mukilan (mukilan@moz-eul.cer.164.122.IP)
[14:09:55] *** Joins: avikpal (avikpal@moz-s7i.mpm.194.117.IP)
[14:10:28] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[14:10:48] *** Quits: avikpal_ (avikpal@moz-9o7.mf2.194.117.IP) (Ping timeout: 121 seconds)
[14:12:38] *** Joins: Florob (Florob@moz-je09t8.de)
[14:18:18] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[14:19:13] *** Joins: mib_fiumsy (Mibbit@moz-hu6.nja.252.72.IP)
[14:22:04] *** Quits: mib_fiumsy (Mibbit@moz-hu6.nja.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:29:25] *** Joins: curmet (Mibbit@moz-hu6.nja.252.72.IP)
[14:30:35] *** Quits: curmet (Mibbit@moz-hu6.nja.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:34:15] *** Joins: avikpal_ (avikpal@moz-6ph.ti7.194.117.IP)
[14:34:53] *** Quits: avikpal (avikpal@moz-s7i.mpm.194.117.IP) (Ping timeout: 121 seconds)
[14:41:08] *** Quits: mitaa (mitaa@moz-cjvo4e.dyn.drei.com) (Ping timeout: 121 seconds)
[14:42:36] *** Joins: mitaa (mitaa@moz-b7pu9t.dyn.drei.com)
[14:43:40] *** Joins: amyers (amyers@moz-osiar4.md.comcast.net)
[14:48:56] *** Quits: amyers (amyers@moz-osiar4.md.comcast.net) (Ping timeout: 121 seconds)
[14:52:36] *** Joins: JoshStrobl (JoshStrobl@moz-ti4so4.dhcp.inet.fi)
[14:53:45] <JoshStrobl> Anyone here might be able to give me pointers regarding compile failure of Rust?
[14:55:44] <doener> JoshStrobl: what's the problem?
[14:56:06] <JoshStrobl> I think the compiling of Rust is failing during libbacktrace compilation, but I'm honestly not entirely sure.
[14:56:15] <JoshStrobl> Compile flags and output at: http://hastebin.com/obabificaw.hs
[14:56:37] <JoshStrobl> It fails at "executing default commands" for whatever reason. Not entirely sure if it the package system I am writing this for (working on a package for the OS I use) not dealing with exit codes correctly, or if something is actually going wrong.
[14:57:49] <doener> is --disable-optimize-llvm intentional?
[14:58:23] *** Joins: avikpal (avikpal@moz-0qo.iss.194.117.IP)
[14:58:28] <JoshStrobl> Yea, llvm-devel and llvm are already packaged and work with Rust.
[14:58:36] <JoshStrobl> Same as jemalloc
[14:58:47] <doener> ah
[14:59:06] *** Quits: avikpal_ (avikpal@moz-6ph.ti7.194.117.IP) (Ping timeout: 121 seconds)
[14:59:06] <doener> JoshStrobl: which LLVM version?
[14:59:19] <JoshStrobl> 3.5.0
[15:01:19] <JoshStrobl> Pretty sure it is libbacktrace failing to compile, but I'm not entirely sure what dependencies it needs since there isn't exactly a single reliable location that libbacktrace is hosted at (that I can find).
[15:01:22] <doener> that might lead to miscompilations (due to LLVM bugs), IIRC 3.5.2 is the only 3.5.* that works. Besides that, it fails compiling RustWrapper.cpp, probably broken by gh26926
[15:01:22] <[o__o]> trans: Use LLVM's writeArchive to modify archives: https://github.com/rust-lang/rust/pull/26926
[15:01:34] <JoshStrobl> hmm
[15:01:36] * JoshStrobl checks link
[15:02:23] <doener> JoshStrobl: look for "RustArchiveIterator" in your log and the PR changes
[15:03:22] <JoshStrobl> log -> line 412 through417
[15:03:51] <doener> oh, oops, I had scrolled to the right and didn't see the line numbers
[15:03:52] <JoshStrobl> only reference to RustArchiveIterator
[15:03:56] <JoshStrobl> Thats fine :D
[15:04:05] <doener> yeah, and on 413 there's the compile error
[15:05:09] <doener> oh wait, you're building 1.1.0... than that PR is unrelated / too new
[15:05:48] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Quit: ChatZilla 0.9.91.1 [Firefox 39.0/20150630154324])
[15:10:26] <JoshStrobl> Any pointers to libbacktrace dependencies? Thinking that might be the issue.
[15:10:57] <JoshStrobl> I mean obviously the compiling of libbacktrace will fail if the deps don't exist.
[15:11:15] <JoshStrobl> Since they don't seem to be packaged in rustc-1.1.0/src
[15:11:27] <JoshStrobl> s/packaged/included
[15:12:44] <doener> JoshStrobl: where do you see anything about missing stuff for libbacktrace in that log?
[15:13:39] <JoshStrobl> I don't, but I looked at the logs for similar issues that show libbacktrace being the first thing that is made during default commands
[15:14:18] <JoshStrobl> random example issue:
[15:14:19] <JoshStrobl> https://github.com/rust-lang/rust/issues/24378
[15:14:26] <doener> I only see the error from RustWrapper.cpp that made make stop. You're running a parallel build, so the "default commands" thing being at the end doesn't mean that it's the reason for the build failure
[15:14:31] <JoshStrobl> config.status: executing default commands
[15:14:31] <JoshStrobl> make: libbacktrace
[15:17:49] *** Joins: scott (uid25790@moz-e5ok1n.brockwell.irccloud.com)
[15:22:44] *** Joins: avikpal_ (avikpal@moz-inq.9l2.194.117.IP)
[15:23:20] *** Quits: avikpal (avikpal@moz-0qo.iss.194.117.IP) (Ping timeout: 121 seconds)
[15:25:12] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[15:25:32] *** Quits: munksgaa1d (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[15:25:43] <JoshStrobl> I'll go ahead and disable the linked llvm and have Rust build it's own and see what it decides to do...
[15:27:35] *** Joins: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk)
[15:29:33] *** Quits: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP) (Quit: Leaving.)
[15:31:09] *** Joins: GBGamer (npm@moz-pd5v6k.biz.rr.com)
[15:31:32] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[15:32:04] *** Joins: npm (npm@moz-ufv.djt.56.172.IP)
[15:35:36] *** Quits: GBGamer (npm@moz-pd5v6k.biz.rr.com) (Ping timeout: 121 seconds)
[15:55:27] *** Joins: Rym (uid91135@moz-n2i7qm.charlton.irccloud.com)
[15:56:41] *** Quits: avikpal_ (avikpal@moz-inq.9l2.194.117.IP) (Ping timeout: 121 seconds)
[15:56:43] *** Joins: ytain (ytain@moz-gslvdm.cpe.pppoe.ca)
[15:57:51] *** Joins: avikpal (avikpal@moz-72v.p8t.194.117.IP)
[16:00:46] *** Quits: X67r (user@moz-m2hep7.mullvad.net) (Ping timeout: 121 seconds)
[16:15:51] *** Quits: avikpal (avikpal@moz-72v.p8t.194.117.IP) (Ping timeout: 121 seconds)
[16:17:41] *** Joins: avikpal (avikpal@moz-v9c.mpm.194.117.IP)
[16:18:20] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[16:27:09] *** Joins: avikpal_ (avikpal@moz-ajg.loq.194.117.IP)
[16:27:38] *** Quits: avikpal (avikpal@moz-v9c.mpm.194.117.IP) (Ping timeout: 121 seconds)
[16:33:06] *** Quits: avikpal_ (avikpal@moz-ajg.loq.194.117.IP) (Ping timeout: 121 seconds)
[16:34:35] *** Joins: nham (nham@moz-lglsfe.il.comcast.net)
[16:42:38] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[16:46:10] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[16:47:05] *** Joins: dlight (dlight@moz-d7n.hlq.135.177.IP)
[16:48:46] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[16:54:49] *** Joins: arielb1 (Ariel@moz-ui6.ri7.19.46.IP)
[16:57:13] *** Quits: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[16:58:58] *** Joins: X67r (user@moz-m2hep7.mullvad.net)
[17:04:30] *** Quits: npm (npm@moz-ufv.djt.56.172.IP) (Quit: AndroIRC - Android IRC Client ( http://www.androirc.com ))
[17:06:17] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[17:11:57] *** Joins: Tobba (Tobba@moz-oecqnu.plus.com)
[17:14:28] *** Joins: avikpal (avikpal@moz-sjk.4af.194.117.IP)
[17:21:50] *** Joins: adu (ajr@moz-99ult9.md.comcast.net)
[17:31:56] *** Quits: waffles (wafflespean@moz-paa.43b.136.123.IP) (Quit: C'yall soon...)
[17:40:03] *** Quits: X67r (user@moz-m2hep7.mullvad.net) (Connection closed)
[17:40:26] *** Joins: X67r (user@moz-m2hep7.mullvad.net)
[17:45:53] *** Joins: zmack (zmack@moz-lds.vn9.106.193.IP)
[17:49:17] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[17:49:22] *** Quits: Tobba (Tobba@moz-oecqnu.plus.com) (A TLS packet with unexpected length was received.)
[17:53:45] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[17:55:21] *** Joins: RC9 (RCIX@moz-7kb.dfa.8.198.IP)
[17:57:20] *** Joins: filsmick (filsmick@moz-gf7g4q.abo.wanadoo.fr)
[17:59:20] *** Joins: amyers (amyers@moz-osiar4.md.comcast.net)
[18:00:31] *** Quits: avikpal (avikpal@moz-sjk.4af.194.117.IP) (Ping timeout: 121 seconds)
[18:03:05] *** Quits: untitaker (untitaker@moz-2uceud.highway.telekom.at) (Ping timeout: 121 seconds)
[18:03:11] *** Joins: RCIX (RCIX@moz-7omm6s.ph.cox.net)
[18:04:17] *** Quits: RC9 (RCIX@moz-7kb.dfa.8.198.IP) (Ping timeout: 121 seconds)
[18:05:30] *** Joins: untitaker (untitaker@moz-l02hsp.highway.telekom.at)
[18:08:00] *** Quits: zmack (zmack@moz-lds.vn9.106.193.IP) (Connection closed)
[18:09:15] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[18:09:35] *** Quits: Quxxy (chatzilla@moz-0nv.jkp.167.59.IP) (Ping timeout: 121 seconds)
[18:10:08] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[18:17:41] *** Quits: ytain (ytain@moz-gslvdm.cpe.pppoe.ca) (Quit: Textual IRC Client: www.textualapp.com)
[18:18:00] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[18:18:28] *** Joins: imperio (Mibbit@moz-0ebgt2.fbx.proxad.net)
[18:18:34] *** Quits: Murarth (Murarth@moz-4t8fs2.phnx.qwest.net) (Quit: I have come here to chew bubblegum and kick ass. And I'm all out of bubblegum.)
[18:18:59] *** Joins: Murarth (Murarth@moz-0v7.hnl.166.46.IP)
[18:23:17] *** Quits: JoshStrobl (JoshStrobl@moz-ti4so4.dhcp.inet.fi) (Quit: Leaving)
[18:23:25] *** Quits: nagisa (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[18:33:10] *** Quits: amyers (amyers@moz-osiar4.md.comcast.net) (Ping timeout: 121 seconds)
[18:38:12] *** Joins: X67r_ (user@moz-m2hep7.mullvad.net)
[18:40:36] *** Quits: X67r (user@moz-m2hep7.mullvad.net) (Ping timeout: 121 seconds)
[18:44:38] *** Quits: filsmick (filsmick@moz-gf7g4q.abo.wanadoo.fr) (Quit: )
[18:46:07] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[18:46:46] *** Quits: X67r_ (user@moz-m2hep7.mullvad.net) (Connection closed)
[18:47:05] *** Joins: mib_iuzhlx (Mibbit@moz-hu6.nja.252.72.IP)
[18:48:44] *** Joins: nagisa (nagisa@moz-8t068g.static.zebra.lt)
[18:50:31] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[18:51:04] *** Quits: mib_iuzhlx (Mibbit@moz-hu6.nja.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:51:08] *** Joins: X67r (user@moz-m2hep7.mullvad.net)
[18:51:22] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[18:57:15] *** Joins: eerie (eerie@moz-bn66jk.red.bezeqint.net)
[18:57:48] *** Quits: bgamari (bgamari@moz-gfcbko.hsi8.kabel-badenwuerttemberg.de) (Quit: ZNC - http://znc.in)
[18:58:49] *** Quits: mukilan (mukilan@moz-eul.cer.164.122.IP) (A TLS packet with unexpected length was received.)
[19:01:36] *** Joins: zmack (zmack@moz-lds.vn9.106.193.IP)
[19:03:05] *** Joins: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP)
[19:04:19] *** Quits: zmack (zmack@moz-lds.vn9.106.193.IP) (Connection closed)
[19:05:02] *** Quits: Murarth (Murarth@moz-0v7.hnl.166.46.IP) (Quit: brb, washing the cat)
[19:05:16] *** Joins: Murarth (Murarth@moz-4t8fs2.phnx.qwest.net)
[19:07:51] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[19:09:51] *** Joins: zmack (zmack@moz-lds.vn9.106.193.IP)
[19:10:15] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[19:15:05] *** Quits: X67r (user@moz-m2hep7.mullvad.net) (Connection closed)
[19:15:59] *** Joins: X67r (user@moz-m2hep7.mullvad.net)
[19:22:26] *** Joins: X67r_ (user@moz-m2hep7.mullvad.net)
[19:24:17] *** Quits: X67r (user@moz-m2hep7.mullvad.net) (Ping timeout: 121 seconds)
[19:26:00] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[19:26:19] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[19:27:19] *** Joins: eerie_ (eerie@moz-bn66jk.red.bezeqint.net)
[19:27:19] *** Quits: eerie (eerie@moz-bn66jk.red.bezeqint.net) (NickServ (RECOVER command used by eerie_))
[19:27:19] *** eerie_ is now known as eerie
[19:28:08] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[19:29:34] *** Quits: dlight (dlight@moz-d7n.hlq.135.177.IP) (A TLS packet with unexpected length was received.)
[19:32:13] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[19:33:41] *** Quits: X67r_ (user@moz-m2hep7.mullvad.net) (Connection closed)
[19:34:01] *** Joins: X67r (user@moz-m2hep7.mullvad.net)
[19:35:25] *** Quits: X67r (user@moz-m2hep7.mullvad.net) (Quit: leaving)
[19:35:44] *** Joins: Guest53 (textual@moz-rvv.00r.255.109.IP)
[19:37:42] *** Joins: X67r (user@moz-manmml.mullvad.net)
[19:38:14] *** Quits: zmack (zmack@moz-lds.vn9.106.193.IP) (Connection closed)
[19:46:58] *** Joins: zmack (zmack@moz-lds.vn9.106.193.IP)
[19:52:08] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[19:52:16] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[19:54:01] *** Quits: doener (doener@moz-fnh.n4j.147.5.IP) (Quit: leaving)
[19:54:26] *** Quits: untitaker (untitaker@moz-l02hsp.highway.telekom.at) (Ping timeout: 121 seconds)
[19:55:06] *** Quits: adu (ajr@moz-99ult9.md.comcast.net) (Client exited)
[19:55:32] *** Joins: untitaker (untitaker@moz-jgmr13.highway.telekom.at)
[19:55:36] *** Quits: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP) (Ping timeout: 121 seconds)
[19:55:59] *** Quits: mgottschlag (quassel@moz-c3ivja.hsi14.kabel-badenwuerttemberg.de) (Quit: No Ping reply in 180 seconds.)
[19:57:21] *** Joins: eerie_ (eerie@moz-bn66jk.red.bezeqint.net)
[19:57:21] *** Quits: eerie (eerie@moz-bn66jk.red.bezeqint.net) (Connection closed)
[19:57:21] *** eerie_ is now known as eerie
[20:02:13] <imperio> does someone what error code is "`{}` is not an enum variant, struct or const". Can't find to which it corresponds
[20:02:19] <imperio> +knows
[20:03:36] *** Quits: semarie (semarie@moz-gb6ql2.bpv6.bg1u.41d0.2001.IP) (Ping timeout: 121 seconds)
[20:04:13] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[20:12:14] <Manishearth> imperio: src/librustc_resolve/lib.rs:
[20:12:21] *** Quits: Guest53 (textual@moz-rvv.00r.255.109.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[20:12:58] <Manishearth> probably if you have a pattern
[20:13:23] <Manishearth> yo ucan't have anything other than variants , structs, or consts in patterns
[20:16:19] *** Joins: achanda_ (achanda@moz-qv7q4n.ca.comcast.net)
[20:17:11] <Manishearth> imperio: src/librustc_resolve/lib.rs:
[20:17:16] <Manishearth> http://is.gd/9NoZIY
[20:17:42] <Manishearth> so whenever you have a pattern of the type Foo(/* ... */) but Foo isn't a struct or variant
[20:18:25] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Ping timeout: 121 seconds)
[20:19:37] *** Quits: achanda_ (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[20:21:38] *** Quits: zmack (zmack@moz-lds.vn9.106.193.IP) (Connection closed)
[20:25:47] <imperio> Manishearth: I know how to get this error but I'm trying to add the corresponding error code. That's what I'm looking for ^^
[20:26:16] *** Quits: RCIX (RCIX@moz-7omm6s.ph.cox.net) (Connection closed)
[20:26:41] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[20:26:58] *** Joins: genbattle (genbattle@moz-4v0.gkd.16.182.IP)
[20:28:29] *** Quits: eerie (eerie@moz-bn66jk.red.bezeqint.net) (Connection closed)
[20:31:12] *** Quits: jensnock_ (jensnockert@moz-pvj.o2f.219.84.IP) (Connection closed)
[20:32:32] *** Joins: Tobba (Tobba@moz-4l45on.skybroadband.com)
[20:35:16] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[20:36:48] <blaenk> wait dudes you can impl Fn for types huh
[20:36:49] <blaenk> that's unstable
[20:37:07] <blaenk> awww man it is
[20:41:11] *** Quits: mceier (mceier@moz-fm89sb.dynamic.chello.pl) (Ping timeout: 121 seconds)
[20:41:16] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[20:43:23] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[20:44:15] *** Quits: c0170 (c0170@moz-4stj9o.cable.virginm.net) (Connection closed)
[20:46:46] <Manishearth> imperio: there isn't one
[20:48:10] <imperio> Manishearth: then eddyb asked me something weird or I didn't understand his demand ^^
[20:48:23] <imperio> take a look at gh26898
[20:48:24] <[o__o]> Improvements of librustc_resolve: https://github.com/rust-lang/rust/pull/26898
[20:49:00] <imperio> I created a macro to call the corresponding error codes in place of "resolve_error" method
[20:49:09] *** Joins: mceier (mceier@moz-fm89sb.dynamic.chello.pl)
[20:49:28] <Manishearth> imperio: what did eddy say?
[20:50:13] <imperio> I had an issue to get an error code and he said that it wasn't possible unless I create the corresponding span_err
[20:50:33] <Manishearth> O.o
[20:50:37] <imperio> he said that I had to replace all resolve_error calls in the file
[20:50:49] <huon> blaenk: not everyone is a dude here, also #rust-internals may not be the best place for questions like that :)
[20:51:19] <Manishearth> imperio: why create resolve_err! when you can just add another case to span_err! that can take an error code?
[20:51:28] <Manishearth> imperio: need more details
[20:51:40] <eddyb> Manishearth: span_err takes an error code
[20:51:48] <eddyb> Manishearth: resolve_error was handling a no-error mode
[20:51:59] <eddyb> and it was a method so it couldn't do error codes
[20:52:17] <eddyb> Manishearth: I suggested moving it to a macro so it can take error codes
[20:52:25] <Manishearth> okay
[20:52:37] <eddyb> imperio: you need to add error codes for everything that doesn't have them. which means almost anything
[20:52:45] <Manishearth> um, you should probably directly discuss with imperio then, I don't know what's happening here
[20:52:50] <Manishearth> ah okay
[20:53:12] <imperio> eddyb: oh okay, i thought they alredy existed, that's where I got confused !
[20:53:17] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Connection closed)
[20:53:25] <eddyb> there was no way to pass them because of the old method
[20:53:33] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[20:53:35] <eddyb> so they couldn't have existed
[20:53:37] <imperio> I'll change my pr's name then
[20:53:41] <eddyb> I thought this was clear, sorry :(
[20:53:58] <imperio> I guess it was, my english is a bit rusted :p
[20:54:12] *** Joins: adu (ajr@moz-99ult9.md.comcast.net)
[20:54:36] *** Quits: adu (ajr@moz-99ult9.md.comcast.net) (Client exited)
[20:54:55] <imperio> eddyb: thanks for your explanation, I'll finish this PR quickly now
[20:54:56] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[21:00:39] *** Joins: sprang (sprang@moz-gpnug3.3dj0.bqct.0647.2601.IP)
[21:02:30] <blaenk> huon: argh sorry, I try hard not to slip with my varnacular. where I'm from, words like dudes and guys etc are used without gender implications
[21:05:59] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[21:09:54] *** Quits: mitaa (mitaa@moz-b7pu9t.dyn.drei.com) (Client exited)
[21:14:51] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[21:24:01] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[21:24:02] *** ChanServ sets mode: +o brson
[21:32:02] *** Quits: SilverKey (SilverKey@moz-liif3j.res.rr.com) (Quit: Cheerio!)
[21:36:35] *** Quits: ncarrillo (textual@moz-739a1t.cable.rcn.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:37:42] *** Joins: ncarrillo (textual@moz-739a1t.cable.rcn.com)
[21:39:03] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[21:41:39] *** Joins: bgamari (bgamari@moz-lflj1l.hsi7.kabel-badenwuerttemberg.de)
[21:44:23] *** Quits: arielb1 (Ariel@moz-ui6.ri7.19.46.IP) (Quit: Ex-Chat)
[21:50:36] *** Quits: bgamari (bgamari@moz-lflj1l.hsi7.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[21:51:50] <nagisa> English is hard
[21:57:07] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[21:58:39] <SiegeLord> It's only hard on #rust channels ;)
[22:01:00] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[22:01:56] *** Joins: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP)
[22:06:07] *** Quits: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP) (Ping timeout: 121 seconds)
[22:08:19] *** Joins: p1start (p1start@moz-nftjhe.org)
[22:14:01] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[22:16:05] *** Quits: imperio (Mibbit@moz-0ebgt2.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:17:56] *** Joins: imperio (Mibbit@moz-0ebgt2.fbx.proxad.net)
[22:20:43] *** Quits: Tobba (Tobba@moz-4l45on.skybroadband.com) (A TLS packet with unexpected length was received.)
[22:20:46] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[22:26:47] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[22:30:35] *** Joins: njn (chatzilla@moz-270n86.iinet.net.au)
[22:30:52] <imperio> apparently, the macro position is like REALLY important
[22:31:01] <imperio> doesn't make sense but whatever ^^'
[22:31:49] *** Joins: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au)
[22:32:13] <imperio> eddyb: I've finished the PR
[22:32:25] <imperio> can you take a look when you have time ?
[22:32:29] <imperio> thanks =D
[22:32:45] <eddyb> imperio: it makes sense. macros are expanded in order, hence, order matters
[22:33:12] <imperio> I had to move my macro above other macro_use calls
[22:33:22] <imperio> really ugly but who cares ?
[22:33:46] *** Joins: bgamari (bgamari@moz-lflj1l.hsi7.kabel-badenwuerttemberg.de)
[22:34:03] <imperio> the biggest issue with this is I haven't any message from compiler that explained the situation
[22:34:12] <eddyb> imperio: do you need #![macro_use] on the macro?
[22:34:17] <eddyb> IME it's not necessary
[22:34:34] <imperio> hum...
[22:34:37] <eddyb> if you were trying to have an attribute on it, that would not let you move it down
[22:34:51] <eddyb> otherwise it makes no sense to me, maybe I'm missing something
[22:34:54] <imperio> I had to, in order to use it in other files
[22:35:19] <imperio> otherwise it doesn't find the macro
[22:35:35] <imperio> and without the macro use, well, it doesn't find the macro too (but it is logical)
[22:36:25] *** Joins: achanda_ (achanda@moz-qv7q4n.ca.comcast.net)
[22:36:50] <eddyb> imperio: I have never seen this
[22:36:59] <imperio> well, me neither
[22:37:08] <imperio> give it a try, maybe I missed something...
[22:37:33] <eddyb> imperio: http://is.gd/Khg0rj see?
[22:37:42] <eddyb> imperio: you need the macro_rules before the mod statements
[22:37:51] <eddyb> because it's order-dependent
[22:38:04] <eddyb> but you don't need any attribute on it (well, the attribute you added is crate-wide)
[22:38:05] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Ping timeout: 121 seconds)
[22:38:20] <eddyb> and you don't need to put it above the extern crate statements
[22:38:26] <eddyb> which is what makes it ugly AFAICT
[22:38:35] <imperio> if it remains in the same file, i didn't have issues
[22:38:50] <imperio> but since I use the macro in other files, it didn't find it
[22:39:02] <imperio> so I tried to use [macro_use] on it
[22:39:04] <imperio> no result
[22:39:23] <imperio> then I moved the macro before the other [macro_use] and it worked
[22:39:25] <eddyb> imperio: you probably had the macro_rules! definition below the `mod`
[22:39:26] <imperio> magical
[22:39:50] <imperio> yes
[22:39:53] <imperio> oh
[22:39:56] <imperio> I try
[22:40:02] <eddyb> imperio: here is where it needs to go https://github.com/rust-lang/rust/blob/master/src/librustc_resolve/lib.rs#L106
[22:40:11] <eddyb> so that all of those modules below can use it
[22:40:19] <eddyb> (diagnostics doesn't need it)
[22:40:37] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Connection closed)
[22:41:01] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[22:41:30] *** Joins: RC9 (RCIX@moz-tl0.dfa.8.198.IP)
[22:42:50] <imperio> okay, I totally ignored it worked like this !
[22:42:59] <imperio> I'm gonna add this detail on my tutorial
[22:43:03] <imperio> thanks !
[22:43:07] <imperio> I updated the PR
[22:43:30] <eddyb> imperio: there are some things for exporting and importing macros, but in this case, only order matters
[22:44:06] <eddyb> imperio: I left two more comments, but I see no other issues
[22:44:13] <imperio> okay
[22:44:15] <imperio> I update then
[22:44:34] *** Quits: achanda_ (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[22:45:30] <eddyb> who has been working on error codes? Manishearth?
[22:45:50] <eddyb> there might be details I am not aware of
[22:46:22] <imperio> I'm gonna fix the make tidy too
[22:47:19] <imperio> eddyb: the make tidy fails because it say I have duplicated error codes (which is true because they're the same). Any idea on this case ?
[22:47:36] <eddyb> imperio: just use different error codes
[22:47:40] <eddyb> that's what I know
[22:48:02] <imperio> that's a pretty bad solution...
[22:48:19] <imperio> I'll precise in comments that's the same ones
[22:50:24] *** Quits: RC9 (RCIX@moz-tl0.dfa.8.198.IP) (Ping timeout: 121 seconds)
[22:52:10] <eddyb> imperio: the only other way I've seen is to format the message before
[22:52:16] <eddyb> imperio: and use resolve_err! only once
[22:53:26] *** Quits: eibwen (eibwen@moz-qmu91h.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[22:55:13] <imperio> actually no, the problem is different
[22:55:22] <imperio> no need of duplication
[22:56:38] <imperio> but we have warnings
[22:56:45] <imperio> should I keep warnings ?
[22:58:11] <imperio> eddyb: well, it's late. We'll see it tomorrow. Thanks for your help !
[22:58:28] <eddyb> np
[23:00:11] <imperio> I updated the PR
[23:00:36] <imperio> only warning for duplicate error codes appear in compilation (that is the last remaining thing)
[23:01:03] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Quit: ChatZilla 0.9.91.1 [Firefox 39.0/20150630154324])
[23:01:08] <imperio> just take a look at the PR ^^
[23:01:12] <imperio> see ya !
[23:05:13] *** Quits: zxq9 (ceverett@moz-fe3mfn.mesh.ad.jp) (Quit: Konversation terminated!)
[23:06:14] *** Quits: imperio (Mibbit@moz-0ebgt2.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:09:39] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[23:21:47] *** Quits: nagisa (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[23:22:00] *** Joins: RC9 (RCIX@moz-31k.dfa.8.198.IP)
[23:23:23] *** Joins: pierre_m_ (Mibbit@moz-2vs15r.slkc.qwest.net)
[23:28:08] *** Joins: bkoropoff (bkoropoff@moz-kthi5c.wa.comcast.net)
[23:31:28] *** Quits: ncarrillo (textual@moz-739a1t.cable.rcn.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:31:46] *** Joins: ncarrillo (textual@moz-739a1t.cable.rcn.com)
[23:31:50] *** Quits: ncarrillo (textual@moz-739a1t.cable.rcn.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:32:17] *** Joins: ncarrillo (textual@moz-739a1t.cable.rcn.com)
[23:32:22] *** Quits: ncarrillo (textual@moz-739a1t.cable.rcn.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:32:39] *** Joins: ncarrillo (textual@moz-739a1t.cable.rcn.com)
[23:33:11] *** Quits: ncarrillo (textual@moz-739a1t.cable.rcn.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:34:46] *** Joins: ncarrillo (textual@moz-739a1t.cable.rcn.com)
[23:34:52] *** Quits: ncarrillo (textual@moz-739a1t.cable.rcn.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:36:39] *** Quits: bgamari (bgamari@moz-lflj1l.hsi7.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[23:42:03] *** Quits: eljay (eljay@moz-fmte10.skybroadband.com) (Quit: Leaving)
[23:49:20] *** Quits: pierre_m_ (Mibbit@moz-2vs15r.slkc.qwest.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:49:32] *** Joins: aatch (james@moz-i1k1ks.tlms.2o1v.e006.2406.IP)
[23:53:11] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[23:57:55] *** Joins: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net)
