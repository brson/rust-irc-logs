[00:00:04] *** Joins: nicknikolov (nicknikolov@moz-0q4.2rm.211.90.IP)
[00:02:39] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[00:03:42] *** Joins: nickniko_ (nicknikolov@moz-0q4.2rm.211.90.IP)
[00:03:44] *** Quits: nicknikolov (nicknikolov@moz-0q4.2rm.211.90.IP) (Connection closed)
[00:10:01] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[00:11:05] *** Quits: Skyler (Skyler@moz-rv949t.sd.cox.net) (Client exited)
[00:17:02] *** Joins: dinfuehr (dinfuehr@moz-81c7pp.highway.telekom.at)
[00:19:34] *** Joins: Skyler (Skyler@moz-rv949t.sd.cox.net)
[00:19:41] *** Quits: Skyler (Skyler@moz-rv949t.sd.cox.net) (Client exited)
[00:21:06] *** Quits: dinfuehr (dinfuehr@moz-81c7pp.highway.telekom.at) (Ping timeout: 121 seconds)
[00:23:18] <Havvy> https://gist.github.com/Havvy/bf8483b17d74de8076db Is this https://github.com/rust-lang/rust/issues/23437 or a new bug?
[00:24:14] <Havvy> (Or possibly https://github.com/rust-lang/rust/issues/18884 )
[00:25:14] <Havvy> Actually, most probably not 18884.
[00:28:42] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[00:30:30] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[00:30:40] *** Quits: nickniko_ (nicknikolov@moz-0q4.2rm.211.90.IP) (Connection closed)
[00:30:41] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[00:32:08] *** Joins: ytain (ytain@moz-ffpck2.dsl.teksavvy.com)
[00:33:06] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[00:37:19] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[00:38:00] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[00:51:36] *** Joins: jgallagher (john@moz-6ge.dhn.131.24.IP)
[00:55:42] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[00:57:40] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: Textual IRC Client: www.textualapp.com)
[01:00:19] *** Quits: andrewseidl (andrewseidl@moz-7e86q0.aas.io) (Ping timeout: 121 seconds)
[01:02:29] *** Joins: andrewseidl (andrewseidl@moz-7e86q0.aas.io)
[01:14:12] *** Joins: capella (chatzilla@moz-vcqob4.res.rr.com)
[01:15:02] *** Joins: noida (Mibbit@moz-s96b01.ca.comcast.net)
[01:15:28] <nrc> gh20184 is really weird - it's an error that only happens in stage1 builds, but is nothing to do with staging
[01:15:28] <[o__o]> Panic => hang with -C codegen-units=2: https://github.com/rust-lang/rust/issues/20184
[01:15:33] *** Parts: noida (Mibbit@moz-s96b01.ca.comcast.net) ()
[01:15:36] *** Joins: frogaincia (Mibbit@moz-juv.9o3.252.72.IP)
[01:15:59] *** Quits: erz (erz@moz-fiq1tl.broadband.corbina.ru) (Connection closed)
[01:16:23] *** Joins: erz (erz@moz-fiq1tl.broadband.corbina.ru)
[01:17:07] *** Quits: frogaincia (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:17:47] *** Joins: dinfuehr (dinfuehr@moz-81c7pp.highway.telekom.at)
[01:20:21] <nrc> it's interesting because it seems like the thread panics in the same way in both cases, but in a stage1 build the compiler hangs, and in the stage2 case, the compiler recovers and prints the correct error message
[01:21:07] <nrc> does anyone know why panicking threads would be treated differently in stage1 vs stage2 builds of rustc?
[01:21:54] *** Quits: dinfuehr (dinfuehr@moz-81c7pp.highway.telekom.at) (Ping timeout: 121 seconds)
[01:24:15] <cmr> nrc: only bugs.
[01:24:38] *** Quits: erz (erz@moz-fiq1tl.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:24:47] <nrc> cmr: you mean this is a bug, or there is some bug handling?
[01:25:00] <cmr> nrc: that this is a bug.
[01:25:06] <cmr> at least, I can't see it being anything else!
[01:25:08] <nrc> right
[01:25:24] <nrc> I just can't imagine how it is possible
[01:26:53] * nrc puts aside a couple of days to understand the compiler backend
[01:29:26] <nrc> It's times like this I wish I had a version of DXR optimised for tablets
[01:31:01] *** Joins: Barca (Mibbit@moz-j9a.ns7.133.129.IP)
[01:32:12] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[01:33:26] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:41:11] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[01:44:46] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[01:47:58] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[01:52:09] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:53:36] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[01:57:07] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[02:02:05] *** Quits: Barca (Mibbit@moz-j9a.ns7.133.129.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:15:47] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:16:33] *** Joins: blank_na1e (blank_name@moz-etm8up.mi.frontiernet.net)
[02:18:34] *** Joins: dinfuehr (dinfuehr@moz-81c7pp.highway.telekom.at)
[02:19:49] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[02:19:50] *** Quits: blank_name (blank_name@moz-d5sbf3.mi.frontiernet.net) (Ping timeout: 121 seconds)
[02:22:40] *** Quits: dinfuehr (dinfuehr@moz-81c7pp.highway.telekom.at) (Ping timeout: 121 seconds)
[02:23:48] *** Quits: tamird (textual@moz-gg3hct.res.rr.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:24:26] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[02:26:37] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[02:28:05] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[02:29:27] *** Joins: tamird (textual@moz-gg3hct.res.rr.com)
[02:30:59] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[02:48:44] *** Quits: jgallagher (john@moz-6ge.dhn.131.24.IP) (Client exited)
[02:50:15] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[02:50:54] *** Quits: chc4 (chc4@moz-pdo0at.ma.comcast.net) (Quit: AHHHHH BEES)
[02:52:10] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[02:58:04] *** Quits: zz_kimundi (kimundi@moz-qljpe9.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:59:28] *** Joins: zz_kimundi (kimundi@moz-0meql0.dip0.t-ipconnect.de)
[02:59:29] *** zz_kimundi is now known as kimundi
[02:59:32] *** Quits: tamird (textual@moz-gg3hct.res.rr.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[03:06:33] *** Quits: bdero (bran@moz-216hqv.oo5r.e4su.0006.2601.IP) (Ping timeout: 121 seconds)
[03:07:43] *** Joins: p1start (p1start@moz-nftjhe.org)
[03:08:20] *** Joins: semarie (semarie@moz-jgfl05.torservers.net)
[03:17:00] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Quit: Leaving)
[03:17:09] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[03:17:42] *** Quits: jack (sid19593@moz-fhlsm9.highgate.irccloud.com) (Ping timeout: 121 seconds)
[03:19:19] *** Joins: dinfuehr (dinfuehr@moz-5eov9b.highway.telekom.at)
[03:20:07] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[03:20:12] *** Joins: jack (sid19593@moz-fhlsm9.highgate.irccloud.com)
[03:20:12] *** Joins: bjz (bjz@moz-jen.vl0.177.183.IP)
[03:23:27] *** Quits: dinfuehr (dinfuehr@moz-5eov9b.highway.telekom.at) (Ping timeout: 121 seconds)
[03:24:35] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[03:29:30] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[03:33:33] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[03:38:05] *** Quits: Diggsey (diggsey@moz-97o4tk.dsl.pipex.com) (Ping timeout: 121 seconds)
[03:42:27] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[03:46:44] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[03:51:09] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[03:51:40] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[03:52:05] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Connection closed)
[03:52:17] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[03:53:37] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[03:54:45] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[03:54:57] *** Joins: napoleon (Mibbit@moz-juv.9o3.252.72.IP)
[03:59:13] *** Quits: napoleon (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:59:25] *** Joins: napoleon (Mibbit@moz-juv.9o3.252.72.IP)
[04:01:03] *** Quits: napoleon (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:01:22] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Connection closed)
[04:02:34] *** Joins: dinfuehr (dinfuehr@moz-5eov9b.highway.telekom.at)
[04:03:04] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[04:04:37] *** Quits: bjz (bjz@moz-jen.vl0.177.183.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[04:05:09] *** Quits: ytain (ytain@moz-ffpck2.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[04:06:37] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[04:19:16] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: Textual IRC Client: www.textualapp.com)
[04:20:16] *** Joins: bdero (bran@moz-lbs.91h.47.73.IP)
[04:22:44] *** Quits: dinfuehr (dinfuehr@moz-5eov9b.highway.telekom.at) (Connection closed)
[04:22:53] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[04:22:54] *** Joins: bjz (bjz@moz-jen.vl0.177.183.IP)
[04:29:57] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[04:34:20] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[04:36:41] <nrc> aatch: ping
[04:37:00] *** Quits: bjz (bjz@moz-jen.vl0.177.183.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[04:37:57] <aatch> nrc, pong
[04:38:12] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[04:38:42] <nrc> aatch: hi, I'm lookiing at parallel codegen, I remember you looked at this a bit, did you have any insights? I saw your comment about closure types - did you find anything else?
[04:38:59] *** Quits: isis (isis@moz-uprl14.patternsinthevoid.net) (Quit: she probably switched to carrier pidgeons)
[04:40:03] <aatch> nrc, is that the weird %closure and %closure.1 thing?
[04:40:38] <nrc> aatch: maybe? This is your comment: https://github.com/rust-lang/rust/issues/19826#issuecomment-70059165
[04:42:34] <aatch> nrc, ah, yes. I didn't get very far. I couldn't for the life of me figure out how we ended up with multiple closure types.
[04:42:56] <nrc> heh, yeah that seems weird
[04:43:08] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[04:43:19] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[04:43:48] <aatch> nrc, the way we're doing "parallel" codegen is just confusing.
[04:44:03] <nrc> aatch: how so?
[04:44:24] <aatch> nrc, I'm just not sure how it's supposed to work. I'm not even sure it's actually parallel.
[04:44:40] <nrc> (I've spent all afternoon reading the backend code, I'm not inclined to disagree)
[04:45:15] <nrc> the numbers imply it is, but I haven't actually managed to find where threads are spawned :-s
[04:46:01] <aatch> nrc, see, that's the thing. I think the speed up is due to having smaller modules and therefore less work for inter-procedural optimisation.
[04:46:31] <nrc> !
[04:47:18] <aatch> nrc, at least, that's the impression I got from reading the code.
[04:47:21] <nrc> iirc, the numbers scaled as expected and we used to have the option of multiple units but one thread which did not exhibit the speed up
[04:47:27] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[04:48:21] <nrc> but I would feel happier if I could find some thread spawning some where
[04:48:30] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[04:48:48] <nrc> iirc trans is not parellised, only llvm codegen
[04:49:09] <nrc> so, trans works in a kind of round robin way, and then we spawn threads when we use llvm
[04:49:09] <aatch> nrc, back/write.rs:930
[04:49:32] <nrc> ah great
[04:49:43] <nrc> (I was up to write.rs:130)
[04:49:52] <aatch> nrc, `git grep "spawn" src/librustc_trans`
[04:50:36] *** Joins: isis (isis@moz-uprl14.patternsinthevoid.net)
[04:51:04] <nrc> that certainly looks like it is using parallelism, right?
[04:51:34] <aatch> nrc, yeah. That doesn't explain the weirdness with closure types though.
[04:51:42] <nrc> oh no
[04:52:15] <nrc> I'm not even looking at that yet tbh, just trying to figure out how things work and try to fix gh20184
[04:52:15] <[o__o]> Panic => hang with -C codegen-units=2: https://github.com/rust-lang/rust/issues/20184
[04:52:31] <nrc> which is a weird hang, only on stage1 builds
[04:52:50] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[04:59:52] *** Quits: andreabedini (andreabedin@moz-2lt49q.unimelb.edu.au) (Quit: Textual IRC Client: www.textualapp.com)
[05:15:15] *** Joins: goyox86 (textual@moz-rvv.00r.255.109.IP)
[05:16:27] *** Quits: goyox86 (textual@moz-rvv.00r.255.109.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[05:41:45] *** Quits: aatch (james@moz-8r6eer.orns.ubhm.e000.2406.IP) (Connection closed)
[05:45:14] *** Quits: genbattle (genbattle@moz-4v0.gkd.16.182.IP) (Ping timeout: 121 seconds)
[05:49:35] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[05:49:57] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[05:53:38] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[05:54:55] *** kimundi is now known as zz_kimundi
[05:55:17] *** Joins: dinfuehr (dinfuehr@moz-5eov9b.highway.telekom.at)
[05:57:15] *** Joins: James (quassel@moz-739rgr.range86-148.btcentralplus.com)
[05:58:39] *** Quits: dinfuehr (dinfuehr@moz-5eov9b.highway.telekom.at) (Connection closed)
[05:59:35] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[06:04:43] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[06:05:03] *** Joins: WindowsBunny (Peter@moz-vlal7g.east.verizon.net)
[06:05:39] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[06:11:07] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[06:12:41] <WindowsBunny> acrichto: http://article.gmane.org/gmane.comp.compilers.llvm.devel/85926
[06:12:52] <WindowsBunny> acrichto: more windows exception llvm related stuff
[06:13:43] *** Joins: eibwen (eibwen@moz-e6r9a6.dip0.t-ipconnect.de)
[06:22:09] *** Quits: eibwen (eibwen@moz-e6r9a6.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[06:27:53] *** zz_kimundi is now known as kimundi
[06:35:03] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:39:02] *** Joins: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net)
[06:43:52] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[06:44:58] *** kimundi is now known as zz_kimundi
[06:46:11] *** Joins: c0170 (c0170@moz-bb29a4.cambridge.arm.com)
[06:48:14] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[06:48:16] *** Quits: James (quassel@moz-739rgr.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[06:50:03] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[06:50:26] *** Quits: semarie (semarie@moz-jgfl05.torservers.net) (Quit: WeeChat 1.1)
[06:53:07] *** Joins: squiddy (squiddy@moz-md4.pm3.19.178.IP)
[06:54:05] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[07:00:09] *** Joins: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk)
[07:00:22] *** Joins: Tobba (Tobba@moz-6oh.7ki.21.217.IP)
[07:00:59] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[07:11:30] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[07:13:47] *** Joins: zmack (zmack@moz-3e9.c36.26.188.IP)
[07:14:37] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[07:15:17] *** Joins: mgottschlag (quassel@moz-jofqrs.scc.kit.edu)
[07:26:19] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[07:26:39] <eddyb> nrc: how do you figure it's not related to bootstrapping?
[07:26:51] <eddyb> nrc: we haven't had a snapshot in a month (working on one atm)
[07:27:09] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[07:29:26] *** Joins: laumann (thomas@moz-gqpfnm.science.ku.dk)
[07:29:52] *** Joins: laumann_ (thomas@moz-gqpfnm.science.ku.dk)
[07:29:57] <eddyb> nrc: the branch doesn't have all my changes, but it should contain all the mandatory stuff for it to compile: https://github.com/eddyb/rust/commits/oh-snap-ctfe-arrived
[07:30:15] <eddyb> nrc: if you want to see if it was fixed since
[07:32:35] *** Quits: laumann (thomas@moz-gqpfnm.science.ku.dk) (Quit: leaving)
[07:34:02] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[07:34:14] *** Joins: rkruppe (chatzilla@moz-uhpcpe.diu2.0rth.0908.2a02.IP)
[07:36:14] *** Quits: zmack (zmack@moz-3e9.c36.26.188.IP) (Connection closed)
[07:36:22] *** Joins: zmack (zmack@moz-3e9.c36.26.188.IP)
[07:39:45] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[07:42:33] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[07:50:49] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[07:52:36] *** Quits: eddyb (eddyb@moz-ure.pug.25.188.IP) (Ping timeout: 121 seconds)
[07:53:37] *** Joins: doener (doener@moz-929cn9.unity-media.net)
[07:54:52] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[07:54:57] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[07:55:48] *** Quits: laumann_ (thomas@moz-gqpfnm.science.ku.dk) (Ping timeout: 121 seconds)
[07:59:35] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[08:01:38] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[08:01:46] *** Quits: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net) (Ping timeout: 121 seconds)
[08:03:05] *** Quits: rkruppe (chatzilla@moz-uhpcpe.diu2.0rth.0908.2a02.IP) (Quit: ChatZilla 0.9.91.1 [Firefox 38.0.1/20150513174244])
[08:04:03] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[08:06:08] *** Quits: jbomo (dkd@moz-uol4mm.fios.verizon.net) (Ping timeout: 121 seconds)
[08:08:36] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Ping timeout: 121 seconds)
[08:09:01] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[08:20:55] <nrc> eddyb: the issue has been open since before Christmas
[08:21:18] <nrc> I guess it could be a staging issue, but I'd be weird
[08:21:37] *** Joins: goyox86 (textual@moz-qfs.570.70.83.IP)
[08:22:34] <nrc> *it'd
[08:26:49] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[08:31:03] *** Joins: dinfuehr (dinfuehr@moz-5eov9b.highway.telekom.at)
[08:32:09] *** Joins: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com)
[08:32:43] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[08:35:58] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[08:36:02] *** Joins: arielb1 (Mibbit@moz-c1oure.tau.ac.il)
[08:39:49] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[08:41:12] *** Joins: genbattle (genbattle@moz-r09mao.xtra.co.nz)
[08:41:43] <nrc> p1start: what is arc_stage0.rs about?
[08:42:00] <nrc> is it just non-dst or does other stuff change?
[08:48:21] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[08:50:18] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[08:51:12] <arielb1> what is playbot's nightly version?
[08:51:19] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[08:51:35] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[08:53:31] *** Joins: filsmick (filsmick@moz-0svev4.abo.wanadoo.fr)
[08:53:39] <Mutabah> playbot: VERSION
[08:53:41] -playbot- "rustc 1.0.0 (a59de37e9 2015-05-13) (built 2015-05-14)"
[08:53:49] <arielb1> that's quite old
[08:53:54] <Mutabah> That's 1.0
[08:54:44] <arielb1> and the nightly version is?
[08:55:44] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[08:56:03] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[08:57:06] *** zz_kimundi is now known as kimundi
[08:57:37] *** Joins: Skyler (Skyler@moz-rv949t.sd.cox.net)
[08:57:58] <Mutabah> arielb1: Does playbot do nightly?
[08:59:20] <arielb1> I mean play.rust-lang.org
[08:59:33] <arielb1> well that's actually playpen
[08:59:37] <Mutabah> That's playpen :)
[08:59:44] <Mutabah> And I think it uses latest
[08:59:48] <arielb1> it doesn't
[08:59:53] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[09:02:30] <arielb1> or latest is old
[09:02:45] <arielb1> it is missing the gh24333 fix
[09:02:45] <[o__o]> Make casts follow the new RFC401: https://github.com/rust-lang/rust/pull/24333
[09:02:50] <arielb1> that's last week
[09:03:31] *** Quits: bdero (bran@moz-lbs.91h.47.73.IP) (Ping timeout: 121 seconds)
[09:04:41] <Mutabah> arielb1: It's also missing the const fn change
[09:05:08] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[09:05:30] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[09:09:02] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[09:09:32] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[09:09:50] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[09:09:53] <p1start> nrc: It’s just non-DST stuff that’s not supported in stage0
[09:10:15] <p1start> Might include a few more differences from arc.rs now if anyone has modified arc.rs since
[09:10:58] *** Quits: c0170 (c0170@moz-bb29a4.cambridge.arm.com) (Connection closed)
[09:11:50] *** Quits: dinfuehr (dinfuehr@moz-5eov9b.highway.telekom.at) (Connection closed)
[09:13:53] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[09:17:42] <nrc> ok, thanks
[09:18:03] *** Joins: dinfuehr (dinfuehr@moz-5eov9b.highway.telekom.at)
[09:21:56] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[09:22:08] *** Quits: dinfuehr (dinfuehr@moz-5eov9b.highway.telekom.at) (Ping timeout: 121 seconds)
[09:23:48] *** Quits: zmack (zmack@moz-3e9.c36.26.188.IP) (Connection closed)
[09:24:11] *** Joins: zmack (zmack@moz-3e9.c36.26.188.IP)
[09:24:44] *** Quits: nham (nham@moz-lglsfe.il.comcast.net) (Quit: leaving)
[09:25:10] *** Joins: nicknikolov (nicknikolov@moz-0q4.2rm.211.90.IP)
[09:25:39] *** Quits: nmatsakis (nmatsakis@moz-no0.93r.245.63.IP) (Connection closed)
[09:25:40] *** Joins: nmatsakis (nmatsakis@moz-no0.93r.245.63.IP)
[09:25:40] *** ChanServ sets mode: +o nmatsakis
[09:25:48] *** Quits: Skyler (Skyler@moz-rv949t.sd.cox.net) (Ping timeout: 121 seconds)
[09:25:53] *** Joins: Skyler_ (Skyler@moz-rv949t.sd.cox.net)
[09:26:00] *** Quits: Skyler_ (Skyler@moz-rv949t.sd.cox.net) (Client exited)
[09:28:13] *** Quits: zmack (zmack@moz-3e9.c36.26.188.IP) (Ping timeout: 121 seconds)
[09:43:14] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[09:45:25] <SimonSapin> In a way, RwLock is a thread-safe "equivalent" of RefCell, right? If so, is there a thread-safe equivalent of Cell?
[09:45:47] <kimundi> SimonSapin: Atomics I guess
[09:46:11] <SimonSapin> but only for primitive types
[09:47:03] <kimundi> I think there is no way to do a atomic operation for arbitrary types without guarding it externally with something like a Mutex
[09:47:18] <SimonSapin> ok, thanks
[09:51:05] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[09:52:23] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[09:52:56] *** Quits: njn (chatzilla@moz-e6r6of.iinet.net.au) (Quit: ChatZilla 0.9.91.1 [Firefox 41.0a1/20150524155217])
[09:56:33] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[09:57:24] *** Joins: bdero (bran@moz-itn.uao.189.18.IP)
[09:59:05] *** Joins: zmack (zmack@moz-htpein.home.aster.pl)
[09:59:20] *** Quits: bdero (bran@moz-itn.uao.189.18.IP) (Connection closed)
[09:59:24] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[09:59:50] *** Joins: bdero (bran@moz-itn.uao.189.18.IP)
[10:02:54] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[10:10:29] *** Quits: goyox86 (textual@moz-qfs.570.70.83.IP) (Quit: Textual IRC Client: www.textualapp.com)
[10:10:42] *** Joins: goyox86 (textual@moz-qfs.570.70.83.IP)
[10:10:43] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[10:10:51] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[10:12:11] *** Quits: goyox86 (textual@moz-qfs.570.70.83.IP) (Quit: Textual IRC Client: www.textualapp.com)
[10:14:23] *** Joins: eddyb (eddyb@moz-ure.pug.25.188.IP)
[10:14:46] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[10:15:18] *** Quits: mgottschlag (quassel@moz-jofqrs.scc.kit.edu) (Ping timeout: 121 seconds)
[10:16:22] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[10:17:12] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[10:18:49] *** Joins: dinfuehr (dinfuehr@moz-5eov9b.highway.telekom.at)
[10:22:57] *** Quits: dinfuehr (dinfuehr@moz-5eov9b.highway.telekom.at) (Ping timeout: 121 seconds)
[10:25:25] <arielb1> eddyb: ping
[10:30:56] *** Joins: erz (erz@moz-fiq1tl.broadband.corbina.ru)
[10:32:36] *** Joins: imperio (Mibbit@moz-opqtbe.abo.bbox.fr)
[10:33:30] <eddyb> arielb1: pong
[10:33:40] <arielb1> I fixed the travis error
[10:33:50] <arielb1> I also had a question about metadata
[10:35:29] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[10:36:21] *** Joins: dinfuehr (dinfuehr@moz-5eov9b.highway.telekom.at)
[10:39:08] <eddyb> arielb1: what was the question?
[10:39:15] <arielb1> nevermind
[10:39:45] <Manishearth> SimonSapin: yes
[10:39:51] <Manishearth> SimonSapin: threadsafe Cell is atomics
[10:40:09] <Manishearth> SimonSapin: technically Cell<some Copy struct> is not completely safe
[10:40:14] <Manishearth> memroy safe, sure
[10:44:10] *** Quits: genbattle (genbattle@moz-r09mao.xtra.co.nz) (Ping timeout: 121 seconds)
[10:45:29] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[10:45:47] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[10:46:55] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[10:48:25] *** Quits: filsmick (filsmick@moz-0svev4.abo.wanadoo.fr) (Quit: )
[10:49:01] *** Joins: filsmick (filsmick@moz-0svev4.abo.wanadoo.fr)
[10:49:07] *** Quits: filsmick (filsmick@moz-0svev4.abo.wanadoo.fr) (Connection closed)
[10:50:27] *** Joins: vmx (vmx@moz-2thenm.dip0.t-ipconnect.de)
[10:51:16] *** Joins: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP)
[10:51:19] *** Quits: nicknikolov (nicknikolov@moz-0q4.2rm.211.90.IP) (Quit: Leaving...)
[10:53:18] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[10:53:26] <eddyb> thread_local is pretty silly
[10:53:48] *** Joins: filsmick (filsmick@moz-0svev4.abo.wanadoo.fr)
[10:54:05] <eddyb> IMO the macro should produce consts
[10:54:19] *** Joins: harrison_ (harrisoncla@moz-uur7pt.eastlink.ca)
[10:54:37] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[10:58:01] *** Quits: filsmick (filsmick@moz-0svev4.abo.wanadoo.fr) (Quit: )
[11:01:53] *** Joins: goyox86 (textual@moz-qfs.570.70.83.IP)
[11:05:13] *** Quits: harrison_ (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[11:10:03] *** Joins: Skyler (Skyler@moz-rv949t.sd.cox.net)
[11:10:57] *** Joins: ptalbot (ptalbot@moz-k6a.h4a.102.129.IP)
[11:11:49] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[11:13:39] *** Quits: goyox86 (textual@moz-qfs.570.70.83.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[11:23:29] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[11:29:46] <SimonSapin> Manishearth: how is it not safe?
[11:30:49] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[11:32:54] *** Quits: nrc (nrc@moz-14pjgj.xtra.co.nz) (Ping timeout: 121 seconds)
[11:34:37] *** Joins: nicknikolov (nicknikolov@moz-0q4.2rm.211.90.IP)
[11:36:17] *** Joins: ctennis (ctennis@moz-vcpg3c.in.comcast.net)
[11:36:23] *** Quits: jxs (jxs@moz-3rn.a4j.61.108.IP) (Ping timeout: 121 seconds)
[11:37:36] *** Quits: Yurume (Yurume@moz-0t8.piq.68.115.IP) (Ping timeout: 121 seconds)
[11:37:57] *** Quits: mrmonday (mrmonday@moz-20udp8.lin.openzula.org) (Ping timeout: 121 seconds)
[11:38:00] *** Quits: rillian (giles@moz-84unpo.osuosl.org) (Ping timeout: 121 seconds)
[11:38:02] *** Joins: rillian (giles@moz-84unpo.osuosl.org)
[11:38:12] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (Ping timeout: 121 seconds)
[11:38:16] *** Quits: ranma42 (ranma42@moz-2if8va.di.unipi.it) (Ping timeout: 121 seconds)
[11:38:32] *** Joins: mrmonday (mrmonday@moz-20udp8.lin.openzula.org)
[11:38:55] *** Joins: squiddy (squiddy@moz-md4.pm3.19.178.IP)
[11:38:57] *** Joins: Yurume (Yurume@moz-0t8.piq.68.115.IP)
[11:39:19] *** Joins: jxs (jxs@moz-3rn.a4j.61.108.IP)
[11:39:33] *** Joins: ranma42 (ranma42@moz-2if8va.di.unipi.it)
[11:41:33] <WindowsBunny> Manishearth: Cell is safe by virtue of Copy types not being able to execute any code on the Cell while the copy takes place and other threads not being able to do stuff either
[11:46:27] <eddyb> WindowsBunny: it's not Sync so you can't share it across threads
[11:46:53] <WindowsBunny> eddyb: Exactly
[11:54:42] *** Joins: tamird (textual@moz-gg3hct.res.rr.com)
[11:55:48] *** Quits: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net) (Quit: Konversation terminated!)
[11:56:55] *** Joins: harrisonclarke (harrisoncla@moz-4lq79j.eastlink.ca)
[11:57:53] *** Quits: eddyb (eddyb@moz-ure.pug.25.188.IP) (Ping timeout: 121 seconds)
[11:58:03] *** Quits: _Vi (vi@moz-bbs.vhj.131.104.IP) (Ping timeout: 121 seconds)
[12:02:14] *** Quits: tamird (textual@moz-gg3hct.res.rr.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[12:03:35] *** Joins: eddyb (eddyb@moz-ure.pug.25.188.IP)
[12:04:49] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[12:06:23] *** Quits: harrisonclarke (harrisoncla@moz-4lq79j.eastlink.ca) (Connection closed)
[12:06:44] *** Joins: harrisonclarke (harrisoncla@moz-4lq79j.eastlink.ca)
[12:06:46] *** Joins: Sho (sho@moz-83s.6h6.28.5.IP)
[12:09:08] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[12:11:00] *** Quits: harrisonclarke (harrisoncla@moz-4lq79j.eastlink.ca) (Ping timeout: 121 seconds)
[12:12:11] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[12:16:57] *** Joins: goyox86 (textual@moz-qfs.570.70.83.IP)
[12:26:45] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[12:28:18] *** Quits: amir (amir@moz-jnohkj.3bcq.01f6.0168.2a02.IP) (Ping timeout: 121 seconds)
[12:29:56] *** Quits: arielb1 (Mibbit@moz-c1oure.tau.ac.il) (Quit: http://www.mibbit.com ajax IRC Client)
[12:33:41] *** Joins: simukis (nagisa@moz-pol184.mif.vu.lt)
[12:36:29] *** Joins: dgrunwald (Daniel@moz-f42a6g.hsi4.kabel-badenwuerttemberg.de)
[12:37:45] *** Quits: simukis (nagisa@moz-pol184.mif.vu.lt) (Ping timeout: 121 seconds)
[12:43:35] *** Joins: simukis (nagisa@moz-pol184.mif.vu.lt)
[12:44:33] *** Joins: amir (amir@moz-qbf4gg.fiber7.init7.net)
[12:45:11] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[12:47:11] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[12:48:24] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[12:52:22] *** Joins: ytain (ytain@moz-ffpck2.dsl.teksavvy.com)
[12:54:17] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[12:55:16] *** Joins: nodweber_ (nodweber@moz-knt.fgq.178.5.IP)
[12:56:44] *** Quits: goyox86 (textual@moz-qfs.570.70.83.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[12:58:40] *** Joins: ker-- (Mibbit@moz-7bq.0sb.52.141.IP)
[12:58:44] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (Quit: Leaving)
[13:03:13] <ker--> eddyb: I created a lint that warns about statics that could be const... But it generates 22 false positives in rust: https://github.com/oli-obk/rust/commit/fe6935475896de666d4bca4744f332c22df64b08
[13:03:28] <ker--> I have no idea how to handle interior mutability
[13:03:48] <eddyb> huh
[13:04:02] <eddyb> ker--: let me find the right bits
[13:04:50] <eddyb> ker--: it should be this https://github.com/rust-lang/rust/blob/master/src/librustc/middle/check_const.rs#L50
[13:05:05] <Manishearth> WindowsBunny: .... invariants
[13:05:06] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[13:05:17] <ker--> oh wow, didn't know about these
[13:05:18] <WindowsBunny> Manishearth: u wot?
[13:05:22] <Manishearth> it's not `unsafe`, but wild modification may cause problems
[13:05:23] <ker--> I'll look at those, thanks
[13:05:50] <WindowsBunny> Manishearth: The point is that since it is Cell, you write your code assuming that it might be modified by other code
[13:06:01] <eddyb> ker--: well, uhm, that is how we check constants
[13:06:14] *** Quits: Tobba (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[13:06:36] <WindowsBunny> Manishearth: And honestly, nothing is completely safe except an omniscient AI that knows exactly what you want and writes perfect code that cannot fail
[13:06:42] <eddyb> ker--: that's the code that generates errors on misuses of const/static
[13:07:15] *** Quits: simukis (nagisa@moz-pol184.mif.vu.lt) (Quit: Leaving.)
[13:07:20] *** Joins: simukis (nagisa@moz-pol184.mif.vu.lt)
[13:08:00] <eddyb> ker--: anyways, tcx.const_qualif_map[expr.id].contains(check_const::MUTABLE_MEM)
[13:08:27] *** Quits: vmx (vmx@moz-2thenm.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[13:13:52] *** Joins: vmx (vmx@moz-2thenm.dip0.t-ipconnect.de)
[13:14:40] *** Quits: vmx (vmx@moz-2thenm.dip0.t-ipconnect.de) (Quit: Leaving)
[13:17:32] *** Joins: vmx (vmx@moz-2thenm.dip0.t-ipconnect.de)
[13:19:59] <Manishearth> WindowsBunny: yeah, but being explicit is good
[13:21:03] *** Quits: nodweber_ (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[13:21:20] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[13:23:32] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[13:35:12] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[13:51:37] *** Joins: goyox86 (textual@moz-6gq.t8s.78.166.IP)
[13:54:43] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[13:55:10] <eddyb> Manishearth: were you saying you merged a snapshot w/o bitrig and filled in that later?
[13:55:12] <eddyb> https://github.com/rust-lang/rust/pull/25790 :>
[13:56:07] <eddyb> nmatsakis: are you around? or anyone else for that matter :)
[13:56:08] <Manishearth> eddyb: yes
[13:56:23] <SimonSapin> Manishearth: https://github.com/SimonSapin/kuchiki/blob/3bb97c67/src/tree.rs#L43-L50 has a bunch of cells that need to be consistent with each other, so I make the fields private, add accessor methods, and have mutating methods that do the right thing. But getting this wrong is a program logic error, not a safety issue
[13:56:23] <Manishearth> eddyb: look at the snap I made
[13:56:30] <Manishearth> it just didn't have a bitrig line
[13:57:01] <Manishearth> dhuseby made it locally and then later i think we got the build fixed and a slightly later snap was mad
[13:57:04] <Manishearth> *made
[13:57:16] <Manishearth> SimonSapin: ;course
[13:57:18] <Manishearth> * '
[13:57:26] <Manishearth> but Rust tries to be explicit about these things
[13:57:32] <eddyb> Manishearth: but the build can just be done on the same revision
[13:57:49] <Manishearth> eddyb: yeah
[13:57:53] <Manishearth> doesn't matter much
[13:58:10] <eddyb> it's less nasty that way
[13:58:21] <eddyb> in other news: look at all the pretty const fn's
[13:58:30] <Manishearth> :)
[13:58:36] <Manishearth> your constfns caused an ICE for us -_-
[13:59:13] <eddyb>  error: unnecessary `unsafe` block, #[deny(unused_unsafe)] on by default
[13:59:15] <eddyb> oops
[13:59:21] <eddyb> Manishearth: us == ?
[13:59:29] <Manishearth> servo
[13:59:35] <Manishearth> I ccd you on an issue
[13:59:52] <SimonSapin> Manishearth: this one? https://github.com/rust-lang/rust/issues/25748
[13:59:52] <Manishearth> eddyb: so unsafecell(pub T) can go away now?
[14:00:07] <Manishearth> SimonSapin: yes
[14:00:15] <WindowsBunny> man, I've barely been getting any github notifications lately
[14:00:25] <SimonSapin> yeah, I downgraded my nigthly because of that
[14:00:42] <eddyb> but that's not const fn
[14:00:52] <Manishearth> get_const_expr_as_global
[14:00:53] <Manishearth> ?
[14:01:00] <Manishearth> sounded like constfn to me
[14:01:03] <Manishearth> sorry  if it isn't :p
[14:01:11] <eddyb> if that assert fails, then codegen would've been broken
[14:01:28] <eddyb> any chance it can be reduced?
[14:01:57] *** Quits: goyox86 (textual@moz-6gq.t8s.78.166.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[14:02:00] <SimonSapin> eddyb: https://github.com/rust-lang/rust/issues/24644 has the same backtrace, but has existed for longer
[14:02:02] *** Joins: goyox86 (textual@moz-qfs.570.70.83.IP)
[14:02:11] <SimonSapin> while rust-encoding only broke a few days ago
[14:02:23] *** Joins: mukilan (mukilan@moz-7te.8le.164.122.IP)
[14:02:36] <SimonSapin> in Nigthly from a few days ago
[14:02:53] *** Joins: tamird (textual@moz-lje.m54.130.157.IP)
[14:03:00] *** Quits: tamird (textual@moz-lje.m54.130.157.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[14:03:01] <eddyb> Yurume: can you help with reducing rust-encoding?
[14:03:36] <Yurume> eddyb,  ㅐㅕ디메스 ㄴㅓ!
[14:03:40] <Yurume> oops,
[14:03:42] <Yurume> reducing what?
[14:03:50] <eddyb> https://github.com/rust-lang/rust/issues/25748
[14:03:53] <SimonSapin> Yurume: Nightly broke rust-encoding
[14:03:54] *** Joins: tamird (textual@moz-lje.m54.130.157.IP)
[14:03:55] <eddyb> SimonSapin: yeah, I saw that too
[14:03:58] <Yurume> ah, that one.
[14:03:59] <WindowsBunny> Manishearth: Did you try msys2 again to see if your needing of gcc was accidental?
[14:04:02] <eddyb> it might be the exact same issue
[14:04:03] <Yurume> I'll try to look at that
[14:04:45] <Manishearth> WindowsBunny: yes
[14:04:50] <Manishearth> I get an error though
[14:04:52] <Manishearth> forgot which
[14:04:59] <Manishearth> WindowsBunny: should I uninstall the gcc?
[14:05:40] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[14:05:57] <eddyb> so what's happening here is that we're mapping ptrcast(base, ptr_ty) -> base
[14:06:05] <WindowsBunny> Manishearth: I do not have the gcc package installed, yet I am able to invoke gcc just fine
[14:06:18] <eddyb> to be able to reverse the operation later. which seems dumb in retrospective, we could just dig into the operation
[14:06:23] <eddyb> SimonSapin: this might be nmatsakis' doing
[14:06:27] *** Joins: jgallagher (john@moz-6ge.dhn.131.24.IP)
[14:06:32] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[14:08:21] *** Quits: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP) (Connection closed)
[14:11:48] <eddyb> Yurume, SimonSapin: okay, I have an idea for a fix. how could I test it?
[14:12:06] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[14:12:22] <Yurume> eddyb, I'm almost sure that the problem arises from encoding::label::encoding_from_whatwg_label. minimizing further...
[14:12:36] <SimonSapin> eddyb: https://github.com/rust-lang/rust/issues/24644 has a test case. Or build rust-encoding
[14:12:37] <eddyb> Yurume: it's a Trait to Trait cast, most likely
[14:12:45] <eddyb> SimonSapin: yeah, but I'm not sure it's the same
[14:12:54] <SimonSapin> eddyb: try both? :]
[14:12:55] <eddyb> Yurume: does rust-encoding use plugins?
[14:13:00] <Yurume> no
[14:13:06] <eddyb> okay, so a stage1 build is enough
[14:13:13] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[14:13:18] <eddyb> (make rustc-stage3 takes a while :P)
[14:13:34] <WindowsBunny> oh yay acrichto is back
[14:13:35] <Yurume> `Some(all::UTF_8 as EncodingRef) : Option<EncodingRef>` (I meant, type ascription) triggers an ICE somehow.
[14:13:36] <SimonSapin> you need stage3 when plugins are involved?
[14:13:51] <eddyb> SimonSapin: well, stage2. I need stage3 because I embed the compiler in my app
[14:14:11] <eddyb> though plugins might need that too. I'm not sure
[14:14:39] <SimonSapin> aren’t the dists stage2?
[14:14:53] <eddyb> I have no idea
[14:15:49] <ker--> i was under the impression stage3 is just for checking if the compilation converges to the same binary
[14:16:00] *** Joins: harrisonclarke (harrisoncla@moz-4lq79j.eastlink.ca)
[14:17:04] <eddyb> maybe I just need to fix my use of rust directly from the build tree to have access to librustc
[14:17:32] <Yurume> eddyb, https://github.com/rust-lang/rust/issues/25748#issuecomment-105539534
[14:20:05] <eddyb> Yurume: does removing the cast fix it?
[14:20:13] <eddyb> I'm pretty sure it does, but I want to make sure
[14:21:20] <Yurume> Yurume, yes
[14:22:19] <eddyb> the const fn work might have enabled more expressions to be promoted to constants, I forget everything I did there
[14:25:00] *** Quits: dgrunwald (Daniel@moz-f42a6g.hsi4.kabel-badenwuerttemberg.de) (Connection closed)
[14:26:02] *** Quits: simukis (nagisa@moz-pol184.mif.vu.lt) (Ping timeout: 121 seconds)
[14:26:21] <Manishearth> WindowsBunny: trying after pacman -R gcc in mysys
[14:26:28] <Manishearth> in the mingw 64 shell
[14:26:41] * WindowsBunny leans in
[14:27:02] * WindowsBunny nibbles on Manishearth's ear while the suspense builds
[14:27:18] *** Parts: imperio (Mibbit@moz-opqtbe.abo.bbox.fr) ()
[14:27:20] <Manishearth> currently building MS Office and llvm simultaneously. what could go wrong?
[14:27:37] <Manishearth> C:/msys32/home/t-magor/rust/rust/src/llvm/lib/Support/MemoryBuffer.cpp:386:23: error: '::pread' has not been declared ssize_t NumRead = ::pread(FD, BufPtr, BytesLeft, MapSize-BytesLeft+Offset); 
[14:27:44] <Manishearth> :( same error
[14:27:58] <WindowsBunny> Manishearth: That's not gcc missing
[14:28:03] <WindowsBunny> that's... I don't even know
[14:28:04] <Manishearth> no I know
[14:28:10] <Manishearth> I got past gcc missing by installing gcc :p
[14:28:24] <Manishearth> (here I uninstalled it and used mingw
[14:28:58] <WindowsBunny> Damnit Manishearth, why must you break things
[14:29:00] <Manishearth> WindowsBunny: halp
[14:29:32] <WindowsBunny> Manishearth: Did you install base-devel and mingw-w64-x86_64-toolchain?
[14:29:40] <Manishearth> yes
[14:29:47] <WindowsBunny> Manishearth: And you're doing this from mingw64_shell.bat?
[14:29:51] <Manishearth> yes
[14:29:56] <WindowsBunny> Manishearth: Did you do a full ./configure as well?
[14:30:42] <Manishearth> yes
[14:31:10] <WindowsBunny> Manishearth: well do another clean and configure and if it occurs again I'll have to get violent
[14:31:15] <eddyb> as_refsociated_type
[14:31:17] <eddyb> bwahahahaaha
[14:31:22] <Manishearth> thats what im doing
[14:31:23] <eddyb> I can't beleive this
[14:31:42] <eddyb> who sed's without \b?
[14:31:56] *** Quits: harrisonclarke (harrisoncla@moz-4lq79j.eastlink.ca) (Connection closed)
[14:32:02] * Manishearth raises hand gingerly
[14:32:15] <Manishearth> well usually I sed for more specific stuff than that :p
[14:32:19] <WindowsBunny> eddyb: Who sed's without carefully reviewing all the replacements? :|
[14:33:31] *** Joins: _Vi (vi@moz-bbs.vhj.131.104.IP)
[14:35:15] *** Quits: rovar (rovar@moz-96effg.dyn.optonline.net) (NickServ (RECOVER command used by rovar_))
[14:35:16] *** rovar_ is now known as rovar
[14:35:28] *** Joins: rovar_ (rovar@moz-96effg.dyn.optonline.net)
[14:36:24] *** jdm is now known as jdm|f00ding
[14:41:02] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[14:45:58] <eddyb> WindowsBunny: I have a nice checkbox-style mass-replace thing in my text editor
[14:46:10] <WindowsBunny> eddyb: neat
[14:46:11] <eddyb> WindowsBunny: and I still missed one of them
[14:46:30] <WindowsBunny> eddyb: that's because u suk
[14:46:33] <eddyb> in my defense, my screen was going crazy at the time. I still haven't gotten around to replacing it
[14:46:59] <eddyb> and something is broken about scrolling in certain conditions. I still haven't pinpointed the source for that
[14:48:23] <eddyb> now, a more important question: why do I have a branch called "mimesis"?
[14:49:01] *** Quits: doener (doener@moz-929cn9.unity-media.net) (Ping timeout: 121 seconds)
[14:49:28] <eddyb> oh wow that was for a hack useful in improving type-checking behavior for pnkfelix's box impl
[14:49:42] <eddyb> I don't think I ever figured out how to do the hack properly
[14:50:02] *** Joins: doener (doener@moz-929cn9.unity-media.net)
[14:50:06] <eddyb> test [run-pass] run-pass/const-trait-to-trait.rs ... ok
[14:56:00] <nmatsakis> eddyb: i'm around now
[14:56:40] *** Quits: ctennis (ctennis@moz-vcpg3c.in.comcast.net) (Quit: Leaving...)
[14:56:56] <eddyb> right. I have one PR, another up going up soon
[14:58:41] *** Quits: skeuomorf (skeuomorf@moz-ij1.21q.32.197.IP) (Ping timeout: 121 seconds)
[14:59:09] <eddyb> nmatsakis: might reviewing the const-fn part of https://github.com/rust-lang/rust/pull/25790?
[14:59:14] <eddyb> *mind
[14:59:48] <eddyb> nmatsakis: and/or rubber-stamp https://github.com/rust-lang/rust/pull/25797
[15:01:17] <eddyb> nmatsakis: you may be also interested in https://github.com/rust-lang/rust/pull/25796
[15:05:14] *** Joins: ctennis (ctennis@moz-f8q.e72.137.99.IP)
[15:05:50] *** Quits: ker-- (Mibbit@moz-7bq.0sb.52.141.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:06:13] <eddyb> SimonSapin, Yurume: fwiw, fix is at https://github.com/rust-lang/rust/pull/25797 - if you want to test it on something larger. or, hmm, I could test myself
[15:07:11] <SimonSapin> eddyb: Great, thanks! Though if you want to test it on rust-encoding I won’t have to build it :]
[15:07:34] <eddyb> yeah, I figured
[15:08:00] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[15:08:19] <eddyb> SimonSapin: it failed to compile the library itself, right?
[15:08:27] <SimonSapin> right
[15:08:57] <SimonSapin> `cargo build` in the repository should reproduce
[15:09:29] <eddyb> works just fine
[15:09:39] <SimonSapin> cool
[15:12:30] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[15:12:54] *** Joins: nodweber_ (nodweber@moz-knt.fgq.178.5.IP)
[15:13:23] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Connection closed)
[15:15:03] *** Joins: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP)
[15:15:51] *** Joins: harrisonclarke (harrisoncla@moz-4lq79j.eastlink.ca)
[15:17:48] *** Quits: nodweber_ (nodweber@moz-knt.fgq.178.5.IP) (Connection closed)
[15:18:38] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[15:19:18] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[15:20:48] *** Joins: arielb1 (Ariel@moz-cmb75d.red.bezeqint.net)
[15:22:05] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Connection closed)
[15:25:42] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[15:25:59] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Connection closed)
[15:28:12] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[15:28:12] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Connection closed)
[15:28:47] *** Joins: skeuomorf (skeuomorf@moz-ij1.21q.32.197.IP)
[15:29:30] <SimonSapin> Is an `fn()` type using dynamic dispatch?
[15:30:04] <eddyb> SimonSapin: yes
[15:30:05] <SimonSapin> for example when returning iter::Filter<_, fn(&_) -> bool>
[15:30:16] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[15:30:17] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Connection closed)
[15:30:27] * SimonSapin grumbles
[15:30:53] <bluss> maybe llvm can devirtualize it
[15:31:24] <SimonSapin> I’ll keep the explicit iterator I already have, I just though it could be simpler with Filter
[15:31:35] <SimonSapin> FilterMap actually
[15:32:24] *** jdm|f00ding is now known as jdm
[15:33:25] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[15:35:27] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[15:36:25] *** Quits: Mutabah (tpg@moz-hklpnj.mutabah.net) (Ping timeout: 121 seconds)
[15:37:03] *** Quits: harrisonclarke (harrisoncla@moz-4lq79j.eastlink.ca) (Connection closed)
[15:37:34] *** Joins: harrisonclarke (harrisoncla@moz-4lq79j.eastlink.ca)
[15:37:35] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Ping timeout: 121 seconds)
[15:38:53] *** Quits: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP) (Ping timeout: 121 seconds)
[15:39:01] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[15:39:39] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Quit: )
[15:40:29] *** Joins: semarie (semarie@moz-mos8l9.mit.edu)
[15:40:38] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[15:40:50] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[15:41:43] *** Quits: harrisonclarke (harrisoncla@moz-4lq79j.eastlink.ca) (Ping timeout: 121 seconds)
[15:43:36] *** Joins: Binero (jeroen@moz-vv6dvc.access.telenet.be)
[15:46:33] *** Joins: jbomo (dkd@moz-uol4mm.fios.verizon.net)
[15:46:34] *** Quits: jbomo (dkd@moz-uol4mm.fios.verizon.net) (Quit: )
[15:52:09] *** Quits: zmack (zmack@moz-htpein.home.aster.pl) (Connection closed)
[15:52:30] *** Joins: zmack (zmack@moz-htpein.home.aster.pl)
[15:53:48] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[15:56:32] *** Quits: zmack (zmack@moz-htpein.home.aster.pl) (Ping timeout: 121 seconds)
[15:58:53] *** Joins: nham (nham@moz-lglsfe.il.comcast.net)
[15:59:40] *** Quits: Binero (jeroen@moz-vv6dvc.access.telenet.be) (Connection closed)
[16:02:44] *** Joins: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP)
[16:04:11] *** Joins: jga (jga@moz-kma.t1q.244.77.IP)
[16:06:23] *** Quits: dinfuehr (dinfuehr@moz-5eov9b.highway.telekom.at) (Connection closed)
[16:06:44] *** Joins: dinfuehr (dinfuehr@moz-5eov9b.highway.telekom.at)
[16:09:52] *** Quits: eternaleye (eternaleye@moz-7ps.ehi.245.50.IP) (Ping timeout: 121 seconds)
[16:10:34] *** Joins: eternaleye (eternaleye@moz-7ps.ehi.245.50.IP)
[16:10:47] *** Quits: dinfuehr (dinfuehr@moz-5eov9b.highway.telekom.at) (Ping timeout: 121 seconds)
[16:23:28] *** Quits: ptalbot (ptalbot@moz-k6a.h4a.102.129.IP) (Ping timeout: 121 seconds)
[16:24:47] *** Quits: goyox86 (textual@moz-qfs.570.70.83.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:24:50] *** Joins: goyox86 (textual@moz-6gq.t8s.78.166.IP)
[16:29:05] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[16:29:37] <arielb1> eddyb: ping
[16:30:47] <eddyb> arielb1: pong
[16:31:01] <eddyb> bluss: LLVM devirtualizes most things
[16:31:03] <arielb1> should I add some tests and then r+?
[16:31:26] <eddyb> https://github.com/rust-lang/rust/pull/25796?
[16:31:28] <eddyb> let me find the issues
[16:31:37] <arielb1> yea
[16:32:08] <arielb1> There's also gh20399
[16:32:08] <[o__o]> Default the associated return type of unop/binop traits to `Self`: https://github.com/rust-lang/rust/issues/20399
[16:32:09] *** Quits: ctennis (ctennis@moz-f8q.e72.137.99.IP) (Quit: Leaving...)
[16:32:16] <eddyb> arielb1: https://github.com/rust-lang/rust/issues/23073
[16:32:17] <arielb1> gh23073
[16:32:18] <[o__o]> ICE with associated types defaults : https://github.com/rust-lang/rust/issues/23073
[16:32:56] <eddyb> gh19476
[16:32:56] <[o__o]> Implement defaults for associated types: https://github.com/rust-lang/rust/issues/19476
[16:33:10] <eddyb> arielb1: ^ at least make the PR close that
[16:33:35] *** Joins: ctennis (ctennis@moz-f8q.e72.137.99.IP)
[16:33:47] <Havvy> Does [o__o] do anything else?
[16:34:16] <eddyb> Havvy: logs
[16:34:34] <eddyb> (it's botbot.me)
[16:35:52] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[16:36:30] <geofft> !m eddyb 
[16:36:30] <[o__o]> You're doing good work, eddyb!
[16:36:44] <eddyb> what'd you do that for?
[16:36:54] <geofft> it's another thing that the bot does, that's all :) 
[16:37:39] <Havvy> Ah, no point trying to replicate the logging thing.
[16:37:40] <bluss> surely the issue 20399 (linked above) is a misunderstanding of what defaults would do
[16:39:58] <eddyb> bluss: is it?
[16:40:21] <eddyb> defaults get used if you're not specifying them
[16:40:24] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[16:40:31] <bluss> eddyb: it suggests T: Add  would be the same as T: Add<Output=DEFAULT>
[16:40:31] <eddyb> or rather, not specifying the item that gets defaulted
[16:40:40] <eddyb> bluss: oh
[16:40:57] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[16:41:02] <bluss> the defaulted version is indeed a common bound, but much more restrictive
[16:41:19] <eddyb> japaric is pretty wrong there
[16:41:31] <eddyb> (because of where clauses)
[16:46:52] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[16:47:57] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[16:48:30] <arielb1> what should be done with 20399?
[16:49:59] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[16:50:05] *** rkruppe_ is now known as rkruppe
[16:50:20] <XMPPwocky> ugh what is git doing now
[16:50:52] <eddyb> arielb1: leave it be for now
[16:51:54] *** Joins: avikpal (avikpal@moz-73q.i6f.233.117.IP)
[16:59:47] *** Joins: Guest38 (textual@moz-4hh.6p3.217.74.IP)
[17:02:03] <arielb1> eddyb: added tests
[17:02:10] *** Joins: Diggsey (diggsey@moz-97o4tk.dsl.pipex.com)
[17:02:31] *** Joins: yoshi (Mibbit@moz-juv.9o3.252.72.IP)
[17:02:46] *** Quits: avikpal (avikpal@moz-73q.i6f.233.117.IP) (Connection closed)
[17:06:58] *** Joins: dinfuehr (dinfuehr@moz-5eov9b.highway.telekom.at)
[17:09:53] *** Joins: Mutabah_ (tpg@moz-hklpnj.mutabah.net)
[17:11:02] *** Quits: dinfuehr (dinfuehr@moz-5eov9b.highway.telekom.at) (Ping timeout: 121 seconds)
[17:14:51] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[17:14:53] *** Quits: bdero (bran@moz-itn.uao.189.18.IP) (Ping timeout: 121 seconds)
[17:15:32] *** Quits: yoshi (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:15:41] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[17:15:41] *** ChanServ sets mode: +o pcwalton
[17:15:47] <arielb1> eddyb: could you r?
[17:16:40] <eddyb> arielb1: done
[17:16:45] <arielb1> thanks
[17:20:51] *** Quits: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net) (Connection closed)
[17:22:41] <SimonSapin> pnkfelix: bluss: https://github.com/rust-lang/rfcs/pull/197#issuecomment-105604319
[17:24:00] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[17:25:28] *** Joins: eibwen (eibwen@moz-e6r9a6.dip0.t-ipconnect.de)
[17:28:10] <eddyb> Manishearth: dhuseby answered
[17:28:11] <bluss> SimonSapin: sounds good
[17:28:56] <eddyb> Manishearth: hehehe so it was actually being run in qemu. -enable-kvm was missing, which made qemu emulate instead of virtualize
[17:29:13] <eddyb> I thought it was a physical machine for some reason
[17:29:13] <SimonSapin> bluss: but then you’d need another trick for Option<ArrayVec> not to be wrong
[17:30:01] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[17:30:10] *** Joins: doomrobo (doomrobo@moz-n1v.ree.209.65.IP)
[17:30:28] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[17:31:12] <doomrobo> hey, I haven't contributed to Rust before. If I were to make .chunks() a default method of the Iterator trait, would that be extremely unlikely to be pulled into Rust (nightly)?
[17:31:30] <bluss> SimonSapin: I would have to keep NoDrop anyway. Or use UnsafeCell maybe? Not sure
[17:32:34] *** Joins: avikpal (avikpal@moz-73q.i6f.233.117.IP)
[17:32:36] <bluss> ok UnsafeCell doesn't prevent it
[17:33:16] <SimonSapin> Why couldn’t ManuallyDrop replace NoDrop?
[17:34:12] <bluss> I just meant I had to keep it to avoid the problem with option's optimization
[17:34:35] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[17:35:14] <eddyb> doomrobo: how would you implement it?
[17:36:37] <doomrobo> eddyb, I wanted to ask about that. I've seen Iterator impls where only 2 or 3 methods are actually specified. I assume if there's a default impl of other functions that depends on stuff like next(), then I'd just do that with chunks()
[17:36:54] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[17:37:00] *** Quits: vmx (vmx@moz-2thenm.dip0.t-ipconnect.de) (Quit: Leaving)
[17:37:07] <eddyb> doomrobo: but how would you implement it?
[17:37:14] <eddyb> a Vec?
[17:37:15] *** Parts: mbrubeck (sid61@moz-dpj2bo.scl3.mozilla.com) ("")
[17:38:20] <doomrobo> eddyb, exactly how it's implemented for slice. It's an iterator that returns Option<'a &[T]>
[17:38:22] <doomrobo> http://doc.rust-lang.org/std/slice/struct.Chunks.html
[17:38:42] <eddyb> doomrobo: a slice is already linear in memory
[17:38:50] <eddyb> it returns sub-slices
[17:39:00] <eddyb> an arbitrary iterator is just disconnected values
[17:39:04] <doomrobo> oh I see. Then I suppose it'd have to return a Vec
[17:39:28] <eddyb> the only way this would be useful is with generics over values
[17:40:10] <doomrobo> what do you mean? As in being automatically implemented for iterators of any value?
[17:40:25] <doomrobo> *Output type
[17:42:03] *** Joins: bdero (bran@moz-itn.uao.189.18.IP)
[17:42:25] <ker> doomrobo: no he means if generics could have values as arguments. like struct Something<VAL: usize> {...}
[17:45:53] <doomrobo> I'm not sure I understand. I have to go but I'll save this conversation and likely go back on tonight. Thanks for helping!
[17:46:40] *** Quits: doomrobo (doomrobo@moz-n1v.ree.209.65.IP) (Quit: later)
[17:47:28] *** Quits: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP) (Connection closed)
[17:51:48] *** Joins: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP)
[17:56:43] *** Joins: killercup (killercup@moz-723bo4.dip0.t-ipconnect.de)
[17:57:10] <eddyb> I meant being generic over N in [T; N] instead of having an uselessly dynamic Vec
[17:59:10] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[18:00:29] *** Joins: filsmick (filsmick@moz-0svev4.abo.wanadoo.fr)
[18:00:52] <bstrie> steveklabnik: ping
[18:01:03] <filsmick> how can I match against a range from a variable to infinity?
[18:01:18] <filsmick> PHASE_2_TIMEOUT_S.. => { ... } gives an error
[18:01:43] *** Joins: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net)
[18:03:42] <filsmick> wrong channel sorry!
[18:05:13] <bstrie> steveklabnik: where is the canonical code of conduct link now that the wiki is dead? I have links to //www.reddit.com/r/rust/comments/2rvrzx/our_code_of_conduct_please_read/ that I need to update
[18:06:12] <rkruppe> bstrie: http://www.rust-lang.org/conduct.html ?
[18:08:04] *** Joins: dinfuehr (dinfuehr@moz-5eov9b.highway.telekom.at)
[18:08:07] <bstrie> rkruppe: thanks
[18:08:07] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[18:09:26] *** Joins: jdm (jdm@moz-gra56g.ckpj.s0pt.0450.2001.IP)
[18:10:57] <eddyb> filsmick: you need an upper bound, something like VALUE...u32::MAX
[18:11:34] <filsmick> eddyb: thanks! Is there a constant whose type can be inferred, much like an integer literal?
[18:11:36] <XMPPwocky> is the link to CoC on /r/rust_gamedev sidebar still broken? (can't check, silly web filter)
[18:11:48] *** chmanchester|afk is now known as chmanchester
[18:12:01] <filsmick> Code of Conduct?
[18:12:06] <eddyb> filsmick: well, <_>::MAX would work given associated item syntax support and lookup and everything else
[18:12:09] *** Quits: dinfuehr (dinfuehr@moz-5eov9b.highway.telekom.at) (Ping timeout: 121 seconds)
[18:12:19] <filsmick> XMPPwocky: you land on the rust project page
[18:12:26] <XMPPwocky> yeah
[18:12:28] <filsmick> the anchor doesn't lead to anywhere
[18:12:34] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[18:12:52] *** Quits: Jesin (Jesin@moz-a3uhsd.fios.verizon.net) (Quit: Leaving)
[18:14:44] *** Joins: Jesin (Jesin@moz-a3uhsd.fios.verizon.net)
[18:23:06] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[18:25:08] *** Joins: nodweber_ (nodweber@moz-knt.fgq.178.5.IP)
[18:25:22] <filsmick> what causes that error? https://gist.github.com/anonymous/85382aa3f319d8e80669
[18:25:36] <filsmick> I don't get why it's a problem that the same library is being linked two by several cargo packages
[18:25:47] <filsmick> (I'm trying to build https://github.com/tedsta/reforge , by the way)
[18:25:47] *** Quits: avikpal (avikpal@moz-73q.i6f.233.117.IP) (Connection closed)
[18:28:02] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[18:29:21] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[18:33:34] *** Parts: filsmick (filsmick@moz-0svev4.abo.wanadoo.fr) ()
[18:36:47] *** Quits: bdero (bran@moz-itn.uao.189.18.IP) (Connection closed)
[18:36:50] *** Joins: bdero (bran@moz-itn.uao.189.18.IP)
[18:41:41] *** Joins: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net)
[18:42:52] <WindowsBunny> eddyb: ^_^::MAX
[18:43:16] <WindowsBunny> >_<::MAX
[18:50:57] <SimonSapin> How do I run libcore doctests?
[18:52:27] <eddyb> check-stageN-coretest, presumably
[18:52:58] <SimonSapin> eddyb: I think that’s unit tests in src/libcoretest, not doctests src/libcore
[18:54:10] *** Quits: goyox86 (textual@moz-6gq.t8s.78.166.IP) (Ping timeout: 121 seconds)
[18:54:52] <arielb1> why is rustc_bitflags `#![no_std]`?
[18:55:12] *** Quits: rustbot (havvy@moz-u0e4io.net) (Quit: Gaining !gh command.)
[18:55:30] *** Joins: rustbot (havvy@moz-u0e4io.net)
[18:56:59] <eddyb> SimonSapin: oh, *doc* tests
[18:57:06] <SimonSapin> right
[18:57:17] <SimonSapin> like https://github.com/rust-lang/rust/pull/25747/files#diff-00c88764fe8c0ed0efc729efe2ea5705R568
[18:57:31] <eddyb> mk/tests.mk:check-stage$(1)-T-$(2)-H-$(3)-doc-$(4)-exec: $$(call TEST_OK_FILE,$(1),$(2),$(3),doc-$(4))
[18:57:38] <eddyb> no, that's not it
[18:58:07] <eddyb> SimonSapin: check-stageN-docs is the only nice target I can find
[18:58:41] <SimonSapin> thanks
[18:59:42] <eddyb> check-stageN-T-TARGET-H-TARGET-doc-core-exec might work (replace N and TARGET with appropriate values)
[19:00:14] <SimonSapin> Is an appropriate value x86_64 or x86_64-unknown-linux-gnu ?
[19:00:18] <SimonSapin> or something else
[19:00:25] <eddyb> the latter
[19:00:44] *** Quits: _Vi (vi@moz-bbs.vhj.131.104.IP) (Ping timeout: 121 seconds)
[19:02:32] *** Quits: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[19:02:46] *** Joins: nrc (nrc@moz-14pjgj.xtra.co.nz)
[19:02:46] *** ChanServ sets mode: +o nrc
[19:02:54] <SimonSapin> check-stage1-doc runs things like doc-trpl-if but apparently nothing in libraries
[19:03:44] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[19:03:56] <SimonSapin> No rule to make target 'check-stage1-T-x86_64-unknown-linux-gnu-H-x86_64-unknown-linux-gnu-doc-core-exec'
[19:04:00] <eddyb> acrichto: answered on the snapshot thing
[19:04:13] <eddyb> SimonSapin: awww
[19:04:17] <eddyb> SimonSapin: sorry then
[19:04:31] <SimonSapin> thanks anyway :)
[19:04:58] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[19:04:58] <eddyb> btw, I see check-stageN-docs, not -doc 
[19:05:07] *** rkruppe_ is now known as rkruppe
[19:08:20] <SimonSapin> check-stage1-docs seems to be what I want
[19:08:21] *** Quits: Guest38 (textual@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[19:08:51] *** Joins: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com)
[19:09:01] <SimonSapin> It is. And my tests fail :)
[19:10:56] <SimonSapin> Is there TEST_NAME or something that would be passed to rustdoc?
[19:13:07] *** Joins: mib_k0r6wu (Mibbit@moz-juv.9o3.252.72.IP)
[19:13:39] <SimonSapin> make check-stage1-T-x86_64-unknown-linux-gnu-H-x86_64-unknown-linux-gnu-doc-crate-core TESTARGS=map_ref
[19:14:01] <SimonSapin> make check-stage1-doc-crate-core TESTARGS=map_ref
[19:14:56] <bluss> SimonSapin: TESTNAME= works
[19:15:15] <SimonSapin> that too
[19:16:03] <SimonSapin> now I have `test cell::map_ref_0 ... FAILED` but it doesn’t say why
[19:16:26] <SimonSapin> like a the message given to panic!() in the test
[19:16:54] *** Quits: skeuomorf (skeuomorf@moz-ij1.21q.32.197.IP) (Ping timeout: 121 seconds)
[19:20:15] <bluss> doesn't it print it after all tests are done?
[19:20:51] <SimonSapin> https://gist.github.com/anonymous/2bf0dba2675a7bfff302
[19:21:42] <bluss> well you do have nocapture, is it that?
[19:22:02] <SimonSapin> same without it
[19:23:02] <bluss> I have no idea
[19:23:25] <bluss> this line looks wrong let b2: Ref<u32> = map_ref(b1, |o| o.as_ref().unwrap());
[19:23:50] <bluss> b2 is Option<Ref>, did I think of anything else? hm
[19:24:00] <bluss> I think it's just missing .unwrap()
[19:25:14] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[19:27:42] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[19:28:03] <Eridius> rustc doesn't provide any default cfg flag for the release channel, right? You have to add a "nightly" feature to your Cargo.toml features list and rely on users enabling that feature if you want to do nightly-only stuff (without breaking stable compatibility), right?
[19:28:25] <SimonSapin> Eridius: at the moment, yes
[19:28:25] <Eridius> (if so, that seems reasonable, because switching from a stable to a nightly compiler should not cause any functional changes in packages)
[19:28:38] <SimonSapin> though there is talk of adding something in Cargo or in Rust for this
[19:28:58] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[19:29:07] *** rkruppe_ is now known as rkruppe
[19:29:10] <Eridius> it's tempting to add that sort of thing, I admit. But I think it's important to be able to switch from a stable to a nightly compiler without having any packages break
[19:29:21] <Eridius> (and changing functionality based on release train can be breaking)
[19:29:31] *** Quits: bdero (bran@moz-itn.uao.189.18.IP) (Ping timeout: 121 seconds)
[19:29:41] *** Quits: mukilan (mukilan@moz-7te.8le.164.122.IP) (A TLS packet with unexpected length was received.)
[19:30:40] *** Quits: semarie (semarie@moz-mos8l9.mit.edu) (Ping timeout: 121 seconds)
[19:31:23] *** Quits: nodweber_ (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[19:32:08] <Eridius> incidentally, I just realized that cargo can't be built with stable rust, which I guess is why Homebrew downloads a pre-built rustc nightly in order to build cargo when asked to build from source (in addition to the rustc it builds)
[19:32:57] *** Joins: Guest38 (textual@moz-4hh.6p3.217.74.IP)
[19:33:54] *** Joins: larhat (Adium@moz-vlo5br.cable.virginm.net)
[19:35:31] <ker> Eridius: also it needs a pre-built rustc to build rustc ;)
[19:36:06] <Eridius> yeah, but the Homebrew package is specifically pulling down a rustc nightly that it dumps into some specific "cargo prefix" path for building cargo AIUI
[19:36:36] <ker> yea, that sounds reasonable, as cargo might need a specific nightly version to build
[19:36:44] <Eridius> it does
[19:36:56] <SimonSapin> Eridius: https://github.com/rust-lang/cargo/issues/1638
[19:37:47] <Eridius> SimonSapin: yeah that right there is an issue my friend is dealing with
[19:38:03] *** Joins: brson (brson@moz-48fqub.res.rr.com)
[19:38:04] *** ChanServ sets mode: +o brson
[19:38:07] <Eridius> he's been trying to build rustc+cargo that runs on his raspberry pi (as opposed to cross-compiling) and ran into that issue trying to get cargo to build
[19:44:26] *** Quits: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP) (Connection closed)
[19:45:10] <bluss> SimonSapin: did you see my comment above? I think the example is missing an .unwrap()
[19:45:13] *** Joins: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP)
[19:45:22] *** Quits: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP) (Connection closed)
[19:45:40] <SimonSapin> bluss: I’ve tried many variations, even let b2 = map_ref(b1, |o| o); fails
[19:45:52] <bluss> SimonSapin: but it returns an option
[19:46:00] <bluss>  map_ref(b1, |o| o.as_ref().unwrap()).unwrap() ?
[19:46:15] <SimonSapin> let b2 = map_ref(b1, |o| o.as_ref());  failed too
[19:46:30] <SimonSapin> without the type annotation or the assert
[19:46:34] <bluss> hm ok
[19:53:13] *** Joins: _Vi (vi@moz-bbs.vhj.131.104.IP)
[19:55:55] *** Quits: larhat (Adium@moz-vlo5br.cable.virginm.net) (Quit: Leaving.)
[19:56:56] *** Joins: skeuomorf (skeuomorf@moz-ij1.21q.32.197.IP)
[19:59:06] *** Joins: p1start (p1start@moz-nftjhe.org)
[20:07:13] <eddyb> acrichto: how can I even have a cross target (android) and test at the same time? make check fails because it can't run tests on an android device...
[20:07:30] <acrichto> eddyb: you'll need an emulator in the background
[20:07:36] <acrichto> and compiletest will connect to the emulator
[20:07:51] <eddyb> but can it not attempt to test?
[20:08:10] <acrichto> there's some make target yeah
[20:08:17] <acrichto> probably like make check-stage2-T-...-H-...
[20:08:23] <eddyb> does it have -T- and -H- in it?
[20:08:33] <eddyb> heh. those usually are the end-point
[20:08:48] <eddyb> unless they're not and I just fail at reading makefiles
[20:09:03] <acrichto> hm...
[20:09:17] <eddyb> let me see
[20:09:25] <acrichto> eddyb: https://github.com/rust-lang/rust/blob/master/mk/tests.mk#L950
[20:10:05] <eddyb> make -n check-stage1-T-x86_64-unknown-linux-gnu-H-x86_64-unknown-linux-gnu
[20:10:07] <eddyb> oh wow
[20:10:10] <eddyb> acrichto: thanks a lot :D
[20:10:25] <acrichto> np
[20:12:07] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[20:12:21] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Quit: Textual IRC Client: www.textualapp.com)
[20:15:00] <nmatsakis> acrichto: is there a way to skip tests if debuginfo is enabled?
[20:15:03] <nmatsakis> brson: ^?
[20:15:16] <acrichto> nmatsakis: not that I know of
[20:15:21] <nmatsakis> :(
[20:15:44] <nmatsakis> still can't run `make check` with --enable-debug, right?
[20:15:48] <nmatsakis> (at leats, I still see failures)
[20:15:57] <nmatsakis> unless i'm not fully rebaesd or something
[20:16:00] <acrichto> ah I forget if htat's been fixed by now
[20:16:11] <eddyb> nmatsakis: wouldn't those count as bugs in the tests themselves?
[20:16:15] <brson> we should maybe add a bot for that
[20:16:41] <brson> maybe // xfail-debug
[20:16:50] <brson> er, ignore-debug
[20:16:53] * brson so old
[20:17:45] *** Joins: larhat (Adium@moz-vlo5br.cable.virginm.net)
[20:20:00] *** Quits: Kxepal (Miranda@moz-1omrva.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[20:21:54] <nmatsakis> brson: acrichto: it kind of feels to me like "make check" should not be affected by --enable-debug, and instead "tests with debug enabled" would be a separate target?
[20:22:01] <nmatsakis> and then tests can skip that target?
[20:22:05] *** Joins: Kxepal (Miranda@moz-fb7sh5.pppoe.mtu-net.ru)
[20:22:38] <acrichto> nmatsakis: I agree that --enable-debug should not decide whether `make check` succeeds or not
[20:22:56] *** Quits: skeuomorf (skeuomorf@moz-ij1.21q.32.197.IP) (Ping timeout: 121 seconds)
[20:24:00] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[20:24:25] <nmatsakis> (put another way, I feel like I should be able to run the tests with/without debug regardless of how rustc was built)
[20:26:03] <acrichto> definitely
[20:28:58] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[20:28:58] <brson> sgtm
[20:30:18] *** Quits: rustbot (havvy@moz-u0e4io.net) (Quit: Changing issue description format for !gh issue-number to use <>s for URLs instead of ()s.)
[20:30:26] *** Joins: rustbot (havvy@moz-u0e4io.net)
[20:37:10] *** Quits: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net) (Quit: Leaving...)
[20:37:58] *** Joins: goyox86 (textual@moz-6gq.t8s.78.166.IP)
[20:38:22] *** Joins: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net)
[20:39:04] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[20:42:32] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[20:48:33] *** Joins: willem (willem@moz-facs2s.dynamic.upc.nl)
[20:55:53] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[20:56:25] *** Quits: ctennis (ctennis@moz-f8q.e72.137.99.IP) (Quit: Leaving...)
[20:59:04] *** Quits: brson (brson@moz-48fqub.res.rr.com) (Ping timeout: 121 seconds)
[20:59:41] *** Joins: bdero (bran@moz-lbs.91h.47.73.IP)
[21:04:16] <nmatsakis> now if only I had time to make this happen; I guess the other question is whether bots should run w/ debuginfo etc etc
[21:05:05] *** Joins: ctennis (ctennis@moz-vcpg3c.in.comcast.net)
[21:05:36] <steveklabnik> bstrie: pong. http://www.rust-lang.org/conduct.html
[21:08:15] *** Joins: canhtak (jeremy@moz-8q7.ph4.207.88.IP)
[21:08:41] <Havvy> steveklabnik:  Already helped him.
[21:08:43] <nmatsakis> win goto ato 
[21:08:45] <nmatsakis> argh!
[21:08:50] <nmatsakis> wow, how did I get underlining?
[21:09:06] *** cmr sets mode: +c 
[21:09:25] <Eridius> aww, no more color?
[21:09:39] <cmr> nobody *ever* uses color, especially legitimately!
[21:10:15] *** Joins: ff (flaper87Moz@moz-gc8je6.ip57.fastwebnet.it)
[21:10:15] <Eridius> I wish you could allow bold/underline while disabling colors
[21:10:30] <Havvy> <pink background, font size 24 green text>Forces ugly styling on Eridius</ugly styling>
[21:10:57] *** Quits: ff (flaper87Moz@moz-gc8je6.ip57.fastwebnet.it) (Quit: 1.1.1)
[21:11:09] *** Joins: ff (flaper87Moz@moz-gc8je6.ip57.fastwebnet.it)
[21:11:10] *** Quits: ff (flaper87Moz@moz-gc8je6.ip57.fastwebnet.it) (Quit: 1.1.1)
[21:11:37] *** Quits: det (chris@moz-9klsea.lv.cox.net) (Ping timeout: 121 seconds)
[21:13:46] *** Quits: goyox86 (textual@moz-6gq.t8s.78.166.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:16:42] *** Joins: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP)
[21:20:30] *** Joins: det (chris@moz-9klsea.lv.cox.net)
[21:20:53] *** chmanchester is now known as chmanchester|afk
[21:22:07] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[21:22:35] *** Joins: nodweber_ (nodweber@moz-knt.fgq.178.5.IP)
[21:26:03] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[21:26:04] *** Quits: canhtak (jeremy@moz-8q7.ph4.207.88.IP) (Client exited)
[21:29:12] *** Joins: goyox86 (textual@moz-rvv.00r.255.109.IP)
[21:30:12] *** Quits: goyox86 (textual@moz-rvv.00r.255.109.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:32:14] *** Joins: goyox86 (textual@moz-rvv.00r.255.109.IP)
[21:33:03] *** Quits: goyox86 (textual@moz-rvv.00r.255.109.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:33:18] *** Joins: goyox86 (textual@moz-6gq.t8s.78.166.IP)
[21:33:22] *** Joins: skeuomorf (skeuomorf@moz-ij1.21q.32.197.IP)
[21:34:18] *** Quits: nodweber_ (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[21:34:53] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[21:34:53] *** ChanServ sets mode: +o pcwalton
[21:35:06] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[21:35:33] *** Quits: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP) (Ping timeout: 121 seconds)
[21:39:18] <huon> edunham: hey, I was reading http://edunham.net/2015/05/07/starting_rust.html and noticed the "search_for_rust" image was a 404
[21:41:39] <steveklabnik> edunham: also, after seeing huon's link, i clicked, and your first paragraph is ABSOLUTLEY right, thanks for writing this. :) reading now
[21:42:09] <edunham> huon: haha uhh guess who forgot to add the pic to git or proofread anything
[21:42:26] <nmatsakis> nrc: regarding https://api.github.com/repos/rust-lang/rfcs/issues/1052 did you say code already landed?
[21:42:27] <XMPPwocky> proofreading is overated.
[21:42:39] <nmatsakis> proofreading is what the internet is for
[21:42:44] <nrc> nmatsakis: iirc
[21:42:45] <huon> edunham: you're not alone :P
[21:42:59] <Eridius> nmatsakis: why did you link to an API response page? o_O
[21:43:13] <nrc> I may not be recalling correctly
[21:43:28] <nmatsakis> Eridius: never you mind
[21:43:32] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[21:43:32] *** ChanServ sets mode: +o pcwalton
[21:43:38] * Eridius chuckles
[21:43:40] <nrc> Eridius: wait, you use the GitHub *webpage* like some kind of human?
[21:43:45] <Havvy> edunham:  FYI, Rust-game is *newer* than Rust-lang.
[21:43:49] <vadimcn> Hi.  What's the difference between abi::Rust and abi::RustCall ?
[21:43:50] *** Quits: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[21:44:07] <cmr> vadimcn: RustCall is the magic goop that makes the Fn* traits work.
[21:44:20] <huon> edunham: interesting post!
[21:44:26] <cmr> I believe it's just tupling/untupling differences.
[21:44:29] <vadimcn> what about abi::C vs abi::Cdecl ?
[21:45:08] <cmr> extern "C" is some undefined C calling convention for the platform, cdecl is only relevant on Windows I think (vs stdcall)
[21:45:14] <nrc> nmatsakis: https://github.com/rust-lang/rust/pull/24333
[21:45:41] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[21:45:41] <edunham> huon: thanks! the second post in the series is sitting half-finished on my laptop at home; all this attention to the first makes me realize i really ought to finish it :)
[21:45:49] <vadimcn> cmr: thx!
[21:46:08] <Havvy> "I think I saw that type<thing> notation in... was it Go?" made me LOL because I've seen a lot of people make fun of Go for *not* having Generics.
[21:46:12] <eddyb> botbot.me search is broken :(
[21:46:22] <huon> edunham: heh, promising series (especially with "next post tomorrow") is always a little dangerous
[21:46:30] <huon> eddyb: people have, like, expectations and stuff
[21:46:37] <huon> *edunham ^
[21:46:43] <eddyb> huon: yes, I have expectations
[21:46:51] <eddyb> I need to search for something and it's not in my logs :(
[21:47:01] <eddyb> and I forget whether it's OwnBy, OwnIn or OwnFrom
[21:47:06] <eddyb> it's likely one of those
[21:47:18] <huon> edunham: I look forward to it if/when you finish it
[21:48:14] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (A TLS packet with unexpected length was received.)
[21:48:21] <nrc> acrichto: do you remember the motivation for building stage1 without landing pads?
[21:48:56] <eddyb> nrc: reducing build times
[21:49:14] <nrc> eddyb: do you remember how much of a difference it makes?
[21:49:20] <eddyb> no idea
[21:49:38] <nrc> fair enough
[21:49:41] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[21:49:46] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[21:49:46] <nrc> acrichto: do you recall ^
[21:50:35] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[21:51:02] <cmr> nrc: oh if you don't have landing pads you can't do unwinding.
[21:51:09] <cmr> like, destructors aren't called and stuff.
[21:51:11] <cmr> that'd explain your crash.
[21:51:14] <cmr> I forgot we did that
[21:51:28] <nrc> cmr: right, I'm pretty sure that is why it is happening
[21:51:45] <cmr> If it panics it might just loop{}
[21:51:51] <cmr> I don't remember the precise behavior.
[21:52:04] <nrc> wondering if the cost of turning it back on is worth it for turning on a few stage1 tests?
[21:52:10] <nrc> (probably not)
[21:54:26] *** Quits: killercup (killercup@moz-723bo4.dip0.t-ipconnect.de) (Quit: Bye)
[21:55:00] *** Quits: arielb1 (Ariel@moz-cmb75d.red.bezeqint.net) (Quit: Ex-Chat)
[21:55:10] *** Quits: jdm (jdm@moz-gra56g.ckpj.s0pt.0450.2001.IP) (Quit: )
[21:55:22] <huon> steveklabnik: people really like "To err is to be human, but compilers never forget."
[22:01:18] <Havvy> edunham:  That write up showed a *lot* of pain points. Thanks for writing it.
[22:02:32] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:03:34] <edunham> Havvy: I'm glad it was useful! 
[22:06:00] <nmatsakis> nrc: so regarding that RFC, I'm trying to decide what to say in the report :) we could just list it as FCP
[22:06:08] <nmatsakis> nrc: even though it's already been landed, so what, no one is realy blocked I guess
[22:06:31] <nmatsakis> nrc: I'd still like to resolve that question about &mut -> *mut orwhatever
[22:07:56] *** Quits: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net) (Ping timeout: 121 seconds)
[22:08:18] <nrc> Yeah, I would FCP it, I also want to clear up the mut pointer thing, seems like we should be able to do it in a week
[22:08:33] <nmatsakis> nrc: great that's what I'm doing
[22:08:34] <pnkfelix> maybe highlight that in the report
[22:09:01] <pnkfelix> (if there is room to include such notes... don't want the reports to get big...)
[22:09:30] <nmatsakis> pnkfelix: highlight what? the &mut thing?
[22:09:51] <pnkfelix> nmatsakis: yeah; after all, if its something that you think needs special attention
[22:10:03] <pnkfelix> nmatsakis: then all the more reason to point it out during FCP, right?
[22:10:22] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[22:10:22] *** Joins: vmx (vmx@moz-189c3u.pools.vodafone-ip.de)
[22:10:24] <pnkfelix> (or perhaps better to let such highlights be implicit from the comment history?)
[22:10:36] <nmatsakis> pnkfelix: I think it's ok to have it come from the comment history
[22:11:02] *** Joins: mgottschlag (quassel@moz-jofqrs.scc.kit.edu)
[22:11:19] *** Joins: genbattle (genbattle@moz-4v0.gkd.16.182.IP)
[22:12:28] *** chmanchester|afk is now known as chmanchester
[22:12:44] <acrichto> nrc: reduces codegen times yeah
[22:12:49] <acrichto> nrc: I think it was like 10-15% maybe?
[22:13:05] <nrc> woah, that is quite a lot
[22:13:24] <acrichto> nrc: I may be misremembering
[22:14:28] <acrichto> nrc: https://github.com/rust-lang/rust/pull/16373
[22:14:53] <nrc> 19%
[22:14:59] <nrc> that seems worth leaving on
[22:15:18] *** Quits: tamird (textual@moz-lje.m54.130.157.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:17:10] *** Joins: aatch (james@moz-8r6eer.orns.ubhm.e000.2406.IP)
[22:24:00] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[22:24:48] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[22:29:12] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[22:33:27] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[22:33:27] *** ChanServ sets mode: +o pcwalton
[22:33:49] <nmatsakis> nrc: any objection to moving DST coercions to FCP ?
[22:34:02] <nrc> no, good call
[22:34:15] <Havvy> FCP?
[22:34:47] <cmr> Final Call for Proposals I think.
[22:34:55] <pnkfelix> final comment period
[22:34:58] <cmr> close enough!
[22:35:00] <cmr> :D
[22:35:43] <Havvy> !learn FCP := Final Comment Period
[22:35:43] <rustbot> Learned factoid 'FCP'.
[22:36:04] *** kimundi is now known as zz_kimundi
[22:39:26] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[22:40:57] *** Quits: vmx (vmx@moz-189c3u.pools.vodafone-ip.de) (Quit: Leaving)
[22:41:49] <nmatsakis> nrc pnkfelix huon : ps I'm promoting various lang-design rfcs to fcp that haven't seen any action, since we have a huge backlog :)
[22:41:58] <nmatsakis> or, haven't seen much action in last few months at least!
[22:42:11] *** Quits: jga (jga@moz-kma.t1q.244.77.IP) (Ping timeout: 121 seconds)
[22:43:56] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[22:45:31] <huon> nmatsakis: ok
[22:45:34] <huon> nmatsakis: also, r? https://github.com/rust-lang/rust-www/pull/145
[22:46:33] *** Quits: mgottschlag (quassel@moz-jofqrs.scc.kit.edu) (Ping timeout: 121 seconds)
[22:48:21] *** Quits: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net) (Connection closed)
[22:49:02] *** Joins: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net)
[22:49:23] *** Joins: brson (brson@moz-48fqub.res.rr.com)
[22:49:24] *** ChanServ sets mode: +o brson
[22:51:06] *** Quits: eibwen (eibwen@moz-e6r9a6.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[22:52:21] *** Quits: willem (willem@moz-facs2s.dynamic.upc.nl) (Quit: leaving)
[22:53:21] *** Quits: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net) (Ping timeout: 121 seconds)
[22:53:33] <nmatsakis> huon: r+
[22:57:02] *** Joins: njn (chatzilla@moz-e6r6of.iinet.net.au)
[23:03:03] *** Joins: jga (jga@moz-kma.t1q.244.77.IP)
[23:05:32] *** Joins: jbomo (dkd@moz-uol4mm.fios.verizon.net)
[23:12:46] <aturon> subteams are up and running! https://internals.rust-lang.org/t/the-subteams-are-up-and-running/2141
[23:13:08] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[23:13:26] *** Quits: erz (erz@moz-fiq1tl.broadband.corbina.ru) (Connection closed)
[23:13:50] *** Joins: erz (erz@moz-fiq1tl.broadband.corbina.ru)
[23:13:55] <steveklabnik> woo
[23:16:38] <XMPPwocky> is make check supposed to run the same test many times?
[23:16:49] <XMPPwocky> i'm seeing lines from the test runner repeated many time
[23:22:11] *** Joins: bkearns (Adium@moz-rudtng.static.wiline.com)
[23:22:37] <Gankro> eddyb: I have a crazy idea
[23:24:02] <Gankro> impl<T> SomeTrait for ! { type assoc = T; fn some_method() -> { panic!() } }
[23:24:14] <XMPPwocky> whaaat
[23:24:16] *** Quits: larhat (Adium@moz-vlo5br.cable.virginm.net) (Quit: Leaving.)
[23:24:27] <huon> Gankro: "error: unconstrainted typeT"
[23:24:33] <huon> s/eT/e T/
[23:24:40] <Gankro> huon: I need ! to be magic for constraints
[23:24:59] <huon> oh, magic
[23:25:49] <Gankro> Then I could impl<T> ToOwned for ! { type ToOwned=T; fn to_owned() -> T { panic!() } }
[23:25:56] <Gankro> And entry 4.0 wouldn't need the Clone bound
[23:27:06] <Gankro> nmatsakis: plz I need this
[23:32:23] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[23:33:37] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[23:35:31] <eddyb> wat
[23:35:38] <eddyb> first, ! isn't a type anymore
[23:35:46] <huon> we can make it a type
[23:35:56] <eddyb> oh, you need method calls to work on diverging expressions
[23:36:09] <eddyb> why not add defaulting and use ()?
[23:37:47] <Gankro> eddyb: The problem is that I need conflicting implementations
[23:38:08] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[23:38:12] <Gankro> I need a type to impl a trait with different associated types
[23:38:45] *** Quits: Jesin (Jesin@moz-a3uhsd.fios.verizon.net) (Ping timeout: 121 seconds)
[23:39:00] <Gankro> On the premise of "I need this to fulfill an API, but if this is ever actually used, it's an error"
[23:40:02] <Gankro> Alternatively, if I could mark an enum variant as unreachable...
[23:40:12] <eddyb> I'm not sure I understand :P
[23:40:29] <Gankro> eddyb: So you know the Entry API?
[23:40:35] <eddyb> a bit
[23:41:16] <Gankro> Right now it's by-val K. We want to support that *and* by-ref K. This can basically be done through Cow, which abstracts over "I have a K or I can make one when you need it"
[23:41:20] *** Joins: doomrobo (doomrobo@moz-7rfp9f.res.rr.com)
[23:42:11] <Gankro> But if you have an API that statically takes a K, you know that you will never need to Clone it or do anything
[23:42:38] <doomrobo> eddyb, sorry I had to go earlier. You mentioned that Iterator::chunks() would only be useful if one could do generics over values. How do you figure that?
[23:42:39] <Gankro> But you still need a Borrow type to go in the Borrowed variant of the Cow
[23:43:02] <Gankro> &K works, but forces the API to demand that K: Clone, even though you won't ever call it
[23:43:37] <Gankro> And now I feverdream of being able to fill the Borrowed variant with a panic bomb so that I don't need the Clone bound
[23:47:42] *** Joins: Jesin (Jesin@moz-a3uhsd.fios.verizon.net)
[23:48:58] <bstrie> nmatsakis: further argument for abstract return types: https://www.reddit.com/r/rust/comments/37b6oo/the_calendar_example_challenge/crl9uug
[23:49:07] <cmr> Do we need any more argument for it?
[23:49:39] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:50:57] <bstrie> cmr: I remember in the "post 1.0 priorities" thread that much of the core team was surprised by how much of the community was clamoring for this :P
[23:51:07] <cmr> Interesting!
[23:51:35] <bstrie> so I'm not saying "hey this is a good idea", I'm saying "hey, remember this thing that's a good idea? it should happen soon" :P
[23:52:22] <doomrobo> since the people I spoke to earlier might be afk, I'll re-ask: Why is a chunks(usize) method not default in the Iterator trait and would it be likely to get accepted if I were to make it so? Also why, as eddyb said earlier today, would this only be useful if there were generics over values?
[23:53:34] <cmr> doomrobo: chunks is impossible to implement efficiently for a general Iterator.
[23:54:14] <cmr> Although I guess it wouldn't be *that* bad?
[23:54:32] <cmr> I don't see a reason not to, right now.
[23:54:32] <doomrobo> cmr, I understand that it'd have to create a vector for every iteration, but I've found it to be a super useful method and having to hack around using it is no fun
[23:55:18] <bstrie> doomrobo: you'd need to propose an RFC first so that it could be discussed by the libs team
[23:55:35] <bstrie> doomrobo: though if you also wanted to implement it then that would be a nice accessory to the RFC
[23:55:43] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[23:55:45] <cmr> It also seems like the sort of thing that should live in itertools until it has proven itself.
[23:56:55] <doomrobo> gotcha. and wow I didn't know itertools was even a thing. Maybe I'll just submit a PR to that
[23:57:11] <cmr> yeah it's a useful crate :)
[23:57:12] <doomrobo> "build: failing" or maybe not
[23:57:15] *** Joins: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net)
[23:57:50] *** Quits: Guest38 (textual@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:57:53] *** Quits: brson (brson@moz-48fqub.res.rr.com) (Quit: leaving)
[23:57:57] <doomrobo> oh, it seems to only fail with certain feature flags
[23:59:41] <eddyb> doomrobo: being generic over N in [T; N]
[23:59:46] <eddyb> is what I meant earlier
