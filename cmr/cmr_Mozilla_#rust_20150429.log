[00:00:15] <erikj> Is there a central place where the grammar is documented by any chance?
[00:00:36] <hugod> erickt: oops, should work now
[00:01:01] *** Quits: GaryOak_ (GaryOak_@moz-etoj16.hfc.comcastbusiness.net) (Connection closed)
[00:01:05] <mib_5vn9w1> http://doc.rust-lang.org/nightly/reference.html
[00:01:11] *** Quits: ismaelga (ismaelga@moz-rjm.jv4.251.188.IP) (Connection closed)
[00:01:49] *** Joins: lenstr (lenstr@moz-s8k.vju.25.171.IP)
[00:02:02] *** Joins: futile (felix@moz-cmcd12.unity-media.net)
[00:02:06] <erickt> hugod: awesome
[00:02:27] *** Quits: lenstr (lenstr@moz-s8k.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[00:02:41] *** Quits: ryanxcharles (ryan@moz-lcf.eq6.124.64.IP) (Ping timeout: 121 seconds)
[00:02:41] *** Joins: lenstr (lenstr@moz-s8k.vju.25.171.IP)
[00:03:12] *** Quits: npm (npm@moz-ims.mg6.56.172.IP) (Ping timeout: 121 seconds)
[00:03:12] *** Quits: choplin (choplin@moz-qkm9un.ap.nuro.jp) (Connection closed)
[00:03:53] <mbrubeck> erikj: the grammar has moved to http://doc.rust-lang.org/nightly/grammar.html
[00:04:06] *** Quits: lenstr (lenstr@moz-s8k.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[00:04:10] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[00:05:09] *** Joins: rustyrazorblade_ (jhaddad@moz-ehrfqf.fios.verizon.net)
[00:06:53] *** Joins: ismaelga (ismaelga@moz-rjm.jv4.251.188.IP)
[00:07:19] <aji> nevermind i figured out my issue
[00:07:41] <mbrubeck> erikj: There's also a machine-readable grammar at https://github.com/rust-lang/rust/tree/master/src/grammar
[00:08:36] *** Quits: tcard (tcard@moz-jdrdbk.ddns.jazztel.es) (Client exited)
[00:08:40] *** Quits: erikj (erikj@moz-dsm7da.skybroadband.com) (Ping timeout: 121 seconds)
[00:08:52] *** Joins: andresv (textual@moz-4r9jdi.ca.comcast.net)
[00:12:50] *** Joins: kmcguire (kmcguire@moz-c955nf.res.rr.com)
[00:13:05] *** Joins: soma (Mibbit@moz-ef5.7ab.191.107.IP)
[00:13:27] *** Joins: nott (nott@moz-to4.06o.57.86.IP)
[00:13:43] *** Quits: brontron4k (brontron@moz-c9crms.ph.cox.net) (Ping timeout: 121 seconds)
[00:15:01] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[00:15:42] *** Joins: jefferai (sid1300@moz-rjqnba.ealing.irccloud.com)
[00:16:06] *** Quits: housl (housl@moz-qnjt4k.ut.comcast.net) (Quit: WeeChat 1.1.1)
[00:16:22] *** Quits: mib_5vn9w1 (Mibbit@moz-o8r38e.or.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:17:09] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[00:19:35] *** Joins: dylan (dylan@moz-h9d.d0d.43.100.IP)
[00:19:59] *** dylan is now known as Guest22642
[00:20:00] *** Joins: yuja (yuja@moz-5pp8ro.so-net.ne.jp)
[00:20:56] *** Quits: mkpankov` (user@moz-g8b.4ms.23.84.IP) (Ping timeout: 121 seconds)
[00:23:07] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[00:23:32] *** AutomatedTester is now known as AutomatedTester|AFK
[00:23:44] *** Quits: nott (nott@moz-to4.06o.57.86.IP) (Ping timeout: 121 seconds)
[00:23:56] *** Quits: ismaelga (ismaelga@moz-rjm.jv4.251.188.IP) (Connection closed)
[00:24:20] <junseok> hello! is there a guide for how standard input works? the last time I used it was before the IO overhaul 
[00:24:20] *** Joins: dsantiago (santiago@moz-5dsjre.dsl-w.verizon.net)
[00:25:15] *** Joins: ismaelga (ismaelga@moz-rjm.jv4.251.188.IP)
[00:25:17] <junseok> is the read_line method here the right way to go? http://doc.rust-lang.org/std/io/struct.Stdin.html
[00:25:32] *** Joins: aatch (james@moz-ciignl.bmm3.j08e.e000.2406.IP)
[00:25:44] *** Quits: Guest22642 (dylan@moz-h9d.d0d.43.100.IP) (Ping timeout: 121 seconds)
[00:25:56] *** Quits: santiago (santiago@moz-5dsjre.dsl-w.verizon.net) (Ping timeout: 121 seconds)
[00:26:35] *** Quits: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se) (Quit: bajs)
[00:26:46] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[00:26:54] *** Quits: Ralith (ralith@moz-miv.lne.251.63.IP) (Ping timeout: 121 seconds)
[00:27:22] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[00:27:31] *** Joins: chmanchester (chmancheste@moz-lmo.64e.222.162.IP)
[00:27:33] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[00:28:37] *** Quits: Skyler (Skyler@moz-nu4i4b.sd.cox.net) (Client exited)
[00:29:06] *** Quits: junseok (junseok@moz-pbo4ce.ca.comcast.net) (Quit: Leaving)
[00:29:34] *** Joins: rbrandao (uid30340@moz-89qrca.ealing.irccloud.com)
[00:30:07] *** Joins: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net)
[00:30:24] *** Joins: claudiop (claudiop@moz-sqo2tm.cpe.netcabo.pt)
[00:30:43] *** Quits: dsantiago (santiago@moz-5dsjre.dsl-w.verizon.net) (Quit: Computer has gone to sleep.)
[00:31:13] <bluss> yes
[00:31:29] <bluss> or using the methods from Stdin::lock()
[00:32:06] *** Quits: ty (ty@moz-i6c4to.wa.comcast.net) (Quit: leaving)
[00:32:53] *** Joins: hjr3 (hradtke@moz-lei.av4.169.69.IP)
[00:32:54] <claudiop> May anyone please provide an example as simple as possible on an std::net::Ipv4Addr ? I mean, creating the struct(hardcoded) and printing its values its enough
[00:33:34] <claudiop> Im getting lots of trouble on using the standard library, yet my code seems similar to the examples i find
[00:33:37] *** Quits: lyxia (xia@moz-lj4fh9.eleves.ens.fr) (Ping timeout: 121 seconds)
[00:33:45] *** Quits: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:33:58] *** Joins: decode__ (agoforth@moz-pklhcp.netcologne.de)
[00:34:31] *** Quits: jbcurtin (jbcurtin@moz-lskisb.LosAngeles1.Level3.net) (Ping timeout: 121 seconds)
[00:34:33] *** Quits: Guest74 (textual@moz-lmfinb.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[00:35:38] *** Quits: Jesse (jruderman@moz-cfhap5.mtv2.mozilla.com) (Ping timeout: 121 seconds)
[00:36:41] <mbrubeck> playbot-mini: fn main() { println!("{}", std::net::Ipv4Addr::new(1,1,1,1)) }
[00:36:42] -playbot-mini- 1.1.1.1
[00:37:14] *** Quits: agoforth (agoforth@moz-0iuau4.netcologne.de) (Ping timeout: 121 seconds)
[00:38:00] *** Quits: jml (jml@moz-mqpurn.178.in-addr.arpa) (Ping timeout: 121 seconds)
[00:38:14] <soma> Hello! will N:M channel bring more harm than good？
[00:38:39] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[00:38:39] *** ChanServ sets mode: +o erickt
[00:38:52] *** Quits: kgrandon (Adium@moz-oeb0cd.2rkg.9kg1.0101.2620.IP) (Quit: Leaving.)
[00:39:01] <aatch> playbot: std::net::Ipv4Addr::from_str("1.2.3.4")
[00:39:02] -playbot- output truncated; full output at: http://bit.ly/1JQp9SS
[00:39:16] <claudiop> mbrubeck: What if you wanted to use that more often, and use more fancy things from std::net? How do you clean that std::net from there?
[00:39:24] <claudiop> An use std::net ?
[00:39:31] *** Quits: Altazimuth_ (Altazimuth@moz-rb7u6p.skybroadband.com) (Ping timeout: 121 seconds)
[00:39:50] *** Joins: jml (jml@moz-mqpurn.178.in-addr.arpa)
[00:39:53] <aatch> playbot: "1.2.3.4".parse::<std::net::Ipv4Addr>()
[00:39:54] -playbot- Ok(1.2.3.4)
[00:40:22] <aatch> claudiop, could you be more specific?
[00:40:29] <aatch> claudiop, what are you trying to do?
[00:40:40] *** Quits: eric_lagergren (barsonme@moz-add4ru.fomj.2174.0008.2601.IP) (Ping timeout: 121 seconds)
[00:40:41] <mbrubeck> playbot-mini: use std::net::Ipv4Addr; fn main() { println!("{}", Ipv4Addr::new(1,1,1,1)) }
[00:40:42] -playbot-mini- 1.1.1.1
[00:41:25] <aatch> soma, I doubt it, it's just the most complex channel type.
[00:41:43] *** Joins: lyxia (xia@moz-lj4fh9.eleves.ens.fr)
[00:41:43] *** Quits: agile (mike@moz-m71dqt.rcsntx.sbcglobal.net) (Connection closed)
[00:42:01] <aatch> soma, we have the tools to make it safe, I think you'd need the data to be Send + Clone, in order to duplicate the message across multiple receivers.
[00:42:14] *** Joins: agile (mike@moz-m71dqt.rcsntx.sbcglobal.net)
[00:42:16] <claudiop> aatch, I just began to play with the standard library an hour or so ago, and im trying to use python-like conventions. But it wasn't working. Now I don't have any more of my code, but it was similar to that. Lets hope that it wasn't the semicolons
[00:42:46] <cmr> bstrie: blame brson for it, he does twir now.
[00:43:04] *** Quits: ismaelga (ismaelga@moz-rjm.jv4.251.188.IP) (Connection closed)
[00:43:13] <claudiop> One always uses semicolons for years at the end of every sentence, then python appears
[00:43:22] *** Quits: fabianvf (fabianvf@moz-fjqmui.va.comcast.net) (Connection closed)
[00:43:30] *** Quits: kmcguire (kmcguire@moz-c955nf.res.rr.com) (Ping timeout: 121 seconds)
[00:43:33] <aatch> claudiop, trying to write Python in Rust (or any other language in Rust) is going to make your life harder than it needs to be.
[00:43:54] *** Quits: brson (brson@moz-0i1.c9m.56.172.IP) (Quit: leaving)
[00:43:58] *** Joins: KallDrexx (KallDrexx@moz-4fqk30.dybhfl.sbcglobal.net)
[00:44:04] *** Quits: Shackra (Jorge@moz-7bh.ng6.177.186.IP) (Ping timeout: 121 seconds)
[00:44:10] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[00:44:37] <aatch> Except maybe trying to write C-like code in Rust, that might be ok.
[00:44:45] *** Joins: Shackra (Jorge@moz-7bh.ng6.177.186.IP)
[00:44:51] <KallDrexx> What's the proper way of of getting the error of a core::result::Result<> without pattern matching or result.Err().unwrap();
[00:44:56] <KallDrexx> or is the latter the correct way to do it?
[00:44:58] <claudiop> Im trying. I don't know the language yet, and i don't write C for a long time
[00:45:07] <claudiop> I thought it was a missing semicolon at the use statement
[00:45:13] *** Joins: xororor (sinkuu@moz-plko6e.eonet.ne.jp)
[00:45:19] <claudiop> But the compiler wont lets compile without semicolon there
[00:45:23] <claudiop> Dunno what was my problem
[00:45:27] <claudiop> But thanks
[00:45:45] <aatch> KallDrexx, well `.err()` is how you go from Result<T, E> to Option<E>
[00:45:57] *** Joins: errordeveloper (ilya@moz-33s.nlr.200.90.IP)
[00:46:13] *** Joins: santiago (santiago@moz-ro2mm9.res.rr.com)
[00:46:28] <KallDrexx> well i've already verified that is_err() is true.  Should I just replace that if statement with let error = result.err(); if error.is_some()?
[00:46:51] <aatch> KallDrexx, why not use `if let Err(e) = result`?
[00:47:07] <KallDrexx> I didn't know that was possible O.o
[00:47:22] *** Quits: ytain (ytain@moz-ge9fgi.dsl.teksavvy.com) (Connection closed)
[00:47:24] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[00:47:32] *** Quits: agile (mike@moz-m71dqt.rcsntx.sbcglobal.net) (Ping timeout: 121 seconds)
[00:47:40] <aatch> KallDrexx, it's syntax sugar for a two-case match statement, so you can put `else` afterwards as well.
[00:48:09] <KallDrexx> that's awesome
[00:48:22] <aatch> Though if you want to unpack the Ok one as well, I'd go for a match anyway.
[00:48:52] <KallDrexx> I want to ignore OK, that's the reason I'm trying to avoid pattern matching.  I'm using pattern matching right now and it makes things a bit less readable imo
[00:49:08] <KallDrexx> well not ignore but only react if there's an error
[00:49:09] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[00:49:11] <aatch> KallDrexx, yeah, that's we stole `if let` and `while let` from Swift.
[00:49:16] <aatch> that's why*
[00:49:46] *** Quits: andresv (textual@moz-4r9jdi.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[00:50:36] <aatch> A nice pattern with `while let` is `while let Some(el) = stack.pop()`
[00:50:46] *** Quits: ucarion (ulyssecario@moz-7b29q5.ResHall.Berkeley.EDU) (Ping timeout: 121 seconds)
[00:51:07] <aatch> Which allows you to modify the stack inside the loop.
[00:51:10] <KallDrexx> that's amazing
[00:51:22] <KallDrexx> and thanks, the if worked like a charm
[00:51:34] *** Joins: Skyler (Skyler@moz-rv949t.sd.cox.net)
[00:51:48] <aatch> Useful for tree traversals if you want to avoid recursion (or need the explicit stack anyway).
[00:52:01] <gsingh93> you can't bind variable names to patterns anymore, can you?
[00:52:15] <aatch> gsingh93, elaborate?
[00:52:20] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[00:52:21] <bluss> you can but not have bindings inside those
[00:52:33] <bluss> x @ Some(..) => // is ok
[00:52:44] <gsingh93> i got an error yesterday, i think it was E303
[00:52:48] <gsingh93> let me check
[00:52:55] <bluss> x @ Some(y) => // not ok
[00:53:21] <gsingh93> oh, that's what i did
[00:53:25] <bluss> rustc --explain E0303
[00:53:30] <aatch> Ah, right. Yeah, nested bindings are pretty hard to reason about properly.
[00:53:45] <gsingh93> the issue referenced by --explain E0303 is closed
[00:54:03] *** Joins: rajat (rajat@moz-emnlcf.ca.comcast.net)
[00:54:16] *** Joins: Ralith (ralith@moz-tiaj7p.customer.broadstripe.net)
[00:54:18] <gsingh93> oh, that's the issue saying why it's bad
[00:54:21] <gsingh93> i should have read it
[00:54:48] <aatch> We could allow it in the future (for cases that are safe), but we can't do the reverse.
[00:55:30] <KallDrexx> Any way you can do something like "if let Err(x) = result && x.kind() != ErrorKind::AlreadyExists {}" ?
[00:55:43] <aatch> KallDrexx, no, sorry.
[00:55:50] <KallDrexx> ah well, still works well :)
[00:55:52] <mystor> I'm currently matching `StructVariant{field: None, ..}`, and I want a mutable reference to the field so that I can set it. I tried `StructVariant{ref mut field @ None, ..}` but it complains about the `..` being an unexpected token. Am I doing something wrong, or is this even possible without a second match?
[00:55:59] <KallDrexx> thanks!
[00:56:47] <aatch> mystor, try getting rid of the `@`
[00:57:01] *** Quits: sbanwart (IceChat9@moz-ijl990.biz.rr.com) (Ping timeout: 121 seconds)
[00:57:13] <mystor> aatch: What do you mean? `Struct Variant{ref mut field None}`?
[00:57:16] <aatch> Actually replace it with ':'
[00:57:35] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[00:57:37] <aatch> mystor, so same as your first pattern, just with `ref mut` added.
[00:57:51] <mystor> aatch: Yeah, that doesn't work. Complains about the `:` being an invalid token
[00:58:11] <mystor> the @ syntax is from http://doc.rust-lang.org/1.0.0-beta.3/book/patterns.html#bindings
[00:58:24] <mystor> I figured I'd try it out, but it doesn't seem to work with struct variants
[00:58:26] <mystor> :-/
[00:58:33] *** Joins: playjax (chatzilla@moz-haj81n.optusnet.com.au)
[00:58:34] *** Joins: EsBe (EsBe@moz-tr2dkp.res.rr.com)
[00:58:53] *** Quits: mkpankov (mkpankov@moz-g8b.4ms.23.84.IP) (Ping timeout: 121 seconds)
[00:59:12] *** Joins: Guest74 (textual@moz-lmfinb.fios.verizon.net)
[00:59:20] *** Quits: errordeveloper (ilya@moz-33s.nlr.200.90.IP) (Ping timeout: 121 seconds)
[00:59:22] *** Quits: Guest74 (textual@moz-lmfinb.fios.verizon.net) (Connection closed)
[01:00:35] *** Quits: rbranson (rbranson@moz-i7m.9o0.201.199.IP) (Quit: Computer has gone to sleep.)
[01:00:43] *** Quits: soma (Mibbit@moz-ef5.7ab.191.107.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:00:51] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:00:58] <aatch> mystor, ok, the syntax you need is `StructVariant { field: ref mut field @ None, .. }`
[01:01:09] <mystor> aatch: Ah, thanks
[01:01:15] <mystor> that actually makes a lot of sense
[01:01:18] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[01:02:26] <niconii> huh... were all older P-high issues lowered to P-medium?
[01:02:32] <aatch> mystor, yeah, struct field patterns are basically `field_name: pattern`, with just `field_name` being shorthand for `field_name: field_name`.
[01:02:45] *** Joins: rouma (zack@moz-2rnd3r.pekn.hg8m.2000.2604.IP)
[01:03:11] *** dmu is now known as dmu|away
[01:03:21] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[01:03:22] <niconii> because i'm seeing stuff like https://github.com/rust-lang/rust/issues/12309 and https://github.com/rust-lang/rust/issues/23968
[01:03:29] *** Quits: Murph (bill@moz-b27bat.fios.verizon.net) (Quit: leaving)
[01:03:34] <mystor> aatch: Makes a lot of sense. Thanks for your help :)
[01:03:45] <niconii> which are at P-medium, but with no indication of being set as such in the comment list
[01:04:23] *** Parts: _queue (queue@moz-k2g.0bf.2.129.IP) ()
[01:04:27] *** Joins: _queue (queue@moz-k2g.0bf.2.129.IP)
[01:04:32] *** Quits: _queue (queue@moz-k2g.0bf.2.129.IP) (Connection closed)
[01:05:25] <niconii> #23968 especially seems like it should be P-high...
[01:06:30] *** Quits: futile (felix@moz-cmcd12.unity-media.net) (Quit: WeeChat 1.0-dev)
[01:06:32] <aatch> niconii, looks like the P-high label was renamed and a new P-high re-added.
[01:07:16] <niconii> aatch: oh, huh. that seems kinda odd, but okay
[01:07:48] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[01:08:06] <aatch> niconii, I imagine that P-high was being abused somewhat.
[01:08:28] <niconii> aatch: yeah, that might be the case
[01:08:35] *** Joins: andresv (textual@moz-4r9jdi.ca.comcast.net)
[01:09:12] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[01:09:58] <aatch> niconii, just mention it on the issue.
[01:10:34] *** Joins: grant (grant@moz-jfh.0nq.187.64.IP)
[01:11:40] *** Joins: polyfractal (polyfractal@moz-8edvdj.res.rr.com)
[01:12:32] *** Quits: andresv (textual@moz-4r9jdi.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:12:41] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Connection closed)
[01:13:07] *** Quits: xororor (sinkuu@moz-plko6e.eonet.ne.jp) (Quit: WeeChat 1.1.1)
[01:13:07] <Boscop> should i put the shared stuff of modules in a folder in the mod.rs or what's the convention?
[01:13:32] <Boscop> or common.rs?
[01:13:50] <aatch> Boscop, depends on what it is. I tend to use `mod.rs` as dumping ground for stuff that doesn't really belong anywhere.
[01:13:53] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[01:13:55] <Boscop> because mod.rs imports all the other modules, so they can't import mod.rs, right?
[01:14:30] <Boscop> or should mod.rs do "mod X; mod Y;" and they can still do "use mod;" ?
[01:15:39] <Boscop> but mod is a keyword
[01:15:46] *** Quits: CactusCommander (fiveside@moz-t2eatg.vsp.com) (Quit: WeeChat 1.1.1)
[01:15:49] <aatch> Boscop, that's why the file is called mod.rs
[01:16:03] <Boscop> aatch: so how can other modules "use" it?
[01:16:16] *** Joins: ucarion (ulyssecario@moz-no1fml.c3v0.fbki.f140.2607.IP)
[01:16:19] *** Quits: rajat (rajat@moz-emnlcf.ca.comcast.net) (Client exited)
[01:16:31] <Boscop> aatch: other modules in the same folder
[01:16:40] <aatch> Boscop, so if you have a folder `foo` with a mod.rs file in it, then the contents of `mod.rs` is the contents of the `foo` module.
[01:17:04] <aatch> Boscop, so places import it the same way they'd import any other module.
[01:17:04] <Boscop> aatch: but if i also have foo/X.rs which needs stuff in foo/mod.rs ?
[01:17:06] *** Quits: sysko (bst@moz-cpv.glf.227.116.IP) (Ping timeout: 121 seconds)
[01:17:23] <aatch> Boscop, well `use` is relative to the crate root by default.
[01:17:36] <Boscop> ah
[01:17:38] <aatch> Boscop, you could use `super::bar` though.
[01:17:43] *** Joins: shawnadelic (shawn@moz-u5o3kk.res.rr.com)
[01:18:08] <Boscop> aatch: if bar is on the same level as foo?
[01:18:09] <aatch> since `X` is a submodule of `foo`
[01:18:14] <Boscop> but then why do i need super?
[01:18:19] <Boscop> if it'S relative to crate
[01:18:33] <aatch> Boscop, `super` changes that behaviour.
[01:18:37] *** Quits: hjr3 (hradtke@moz-lei.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:18:37] <Boscop> ah
[01:19:05] <aatch> Boscop, so if you have `foo/X.rs`, then the module is `foo::X`, `super` references the parent module, in this case `foo`.
[01:19:16] <Boscop> aatch: is there another keyword like super that can be used in this context with special meaning?
[01:19:27] <aatch> Boscop, yes, `self`
[01:19:33] *** Joins: hjr3 (hradtke@moz-lei.av4.169.69.IP)
[01:19:38] <Boscop> ah right
[01:19:38] <aatch> Boscop, which references the current module.
[01:19:48] <aatch> Useful for re-exporting items.
[01:20:09] <aatch> because you can do `pub use self::foo::FooType`
[01:20:17] <Boscop> aatch: but if bar and X are both in foo, can't i just write (in X.rs): use bar?
[01:20:20] *** Quits: ucarion (ulyssecario@moz-no1fml.c3v0.fbki.f140.2607.IP) (Ping timeout: 121 seconds)
[01:20:31] <Boscop> use would it have to be foo::bar?
[01:20:32] *** Quits: chmanchester (chmancheste@moz-lmo.64e.222.162.IP) (Quit: )
[01:20:44] *** Quits: kaini (quassel@moz-rlggmu.com) (Ping timeout: 121 seconds)
[01:20:54] <aatch> Boscop, nope, because without `super` or `self` the path is relative to the crate root.
[01:20:59] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[01:21:00] *** Quits: hjr3 (hradtke@moz-lei.av4.169.69.IP) (Connection closed)
[01:21:03] <aatch> Boscop, so, yes, you'd have to use `foo::bar`.
[01:21:09] *** Quits: JagaJaga (JagaJaga@moz-ua8.hhl.62.178.IP) (Ping timeout: 121 seconds)
[01:21:25] *** Quits: untitaker (untitaker@moz-bp4l2l.highway.telekom.at) (Ping timeout: 121 seconds)
[01:21:40] *** Joins: hjr3 (hradtke@moz-lei.av4.169.69.IP)
[01:21:51] <Boscop> aatch: ok. got it. and how can i have multiple crates in the same repo?
[01:22:07] <Boscop> that share files
[01:22:15] <Boscop> e.g. two different main()s
[01:22:19] *** Quits: hjr3 (hradtke@moz-lei.av4.169.69.IP) (Connection closed)
[01:22:35] <Boscop> or one bin and one lib
[01:22:40] *** Joins: hjr3 (hradtke@moz-lei.av4.169.69.IP)
[01:22:56] <Murarth> Boscop: You're talking about two separate things there. Having two executables with one lib is relatively easy. Two or more libs is kind of hackish.
[01:23:44] <Boscop> Murarth: ok so how to do two bins with shared source files?
[01:24:03] <Boscop> with the normal cargo file structure
[01:24:21] *** Joins: popow (Thunderbird@moz-03f.kd0.252.223.IP)
[01:24:24] *** Joins: kaini (quassel@moz-rlggmu.com)
[01:24:30] <Murarth> Make a [[bin]] section in Cargo.toml for each executable you want to generate.
[01:24:51] *** Joins: mkpankov (mkpankov@moz-ac1.0jj.23.84.IP)
[01:25:09] <Boscop> Murarth: and how to specify the main ?
[01:25:49] <Murarth> Each bin section has a name field and a path field. The file pointed to by path should have the main function.
[01:25:59] <Boscop> ok thanks
[01:26:29] <Boscop> Murarth: and how can i specify an icon or executable description string for the executable?
[01:26:47] <Boscop> or specify if it should show the console or not
[01:27:18] <Murarth> I don't know if there's support for that kind of thing.
[01:27:38] <Boscop> Murarth: or how else would you do it after compiling with cargo?
[01:28:02] <aatch> Boscop, no idea, that's pretty windows-specific functionality.
[01:28:13] <Boscop> aatch: linux too
[01:28:15] <Boscop> i'm on linux
[01:28:23] <Boscop> and i want to have an icon for the executable
[01:28:32] <Murarth> Linux doesn't build icons into executables, as far as I'm aware.
[01:28:34] *** Joins: Wild_Cat (Max@moz-na0tak.dsl.teksavvy.com)
[01:28:36] <mbrubeck> On linux that's a packaging issue, with .menu files and stuff
[01:28:43] <penguin42> Boscop: You need to create a .desktop file I think
[01:28:53] <mbrubeck> Cargo doesn't handle packaging or installation, currently at least.
[01:29:01] <aatch> On windows I think it's part of a manifest file that the linker uses?
[01:29:38] <klutzy> yep, it's part of resource
[01:29:45] <klutzy> in exe file
[01:30:06] *** Joins: ismaelga (ismaelga@moz-08fhtd.rev.vodafone.pt)
[01:30:16] *** Joins: untitaker (untitaker@moz-vndvcr.highway.telekom.at)
[01:31:57] <frewsxcv> what is most similar to old_io::MemWriter with new io stuff?
[01:32:15] *** Joins: jfredett (Adium@moz-a9ilmn.fios.verizon.net)
[01:32:33] <aatch> frewsxcv, writer is implemented on Vec<u8> directly, if I recall correctly.
[01:32:39] <Murarth> frewsxcv: Cursor<Vec<u8>> is pretty close, I think.
[01:32:46] <frewsxcv> excellent, thanks
[01:32:48] <Murarth> Vec has write. Cursor adds Seek support.
[01:33:01] *** Joins: nico (nico@moz-69jj7k.dip0.t-ipconnect.de)
[01:33:42] <aatch> Also write is implemented for &mut [u8] too
[01:33:55] <aatch> (and the cursor wrapper)
[01:34:27] *** Joins: lenstr (lenstr@moz-s8k.vju.25.171.IP)
[01:34:32] *** Joins: InfiniteJacuzzi (darren@moz-804egb.dyn.optonline.net)
[01:34:56] *** Joins: ascarter (ascarter@moz-i0dnmd.wa.comcast.net)
[01:35:04] *** Quits: Izacht13 (Izacht13@moz-gee645.atsnmeam.ccmaine.net) (Quit: Leaving)
[01:35:15] *** Quits: lenstr (lenstr@moz-s8k.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[01:35:28] *** Joins: lenstr (lenstr@moz-s8k.vju.25.171.IP)
[01:36:26] *** Quits: lenstr (lenstr@moz-s8k.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[01:37:00] *** Joins: logan_e (logan_e@moz-ltn.qg3.218.73.IP)
[01:37:03] *** Quits: nico (nico@moz-69jj7k.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[01:37:27] *** Quits: Riastradh (riastradh@moz-6odf4a.exit.babylon.network) (Ping timeout: 121 seconds)
[01:37:35] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[01:39:39] *** Quits: ascarter (ascarter@moz-i0dnmd.wa.comcast.net) (Ping timeout: 121 seconds)
[01:39:48] <Yurume> Manishearth: I... I'm not sure why I was pinged on /r/rust.
[01:41:04] *** Quits: Nextra (Nextra@moz-u5d4re.dip.osnanet.de) (Connection closed)
[01:41:35] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:41:47] *** Joins: Guest_ (textual@moz-e2cv3d.res.rr.com)
[01:41:57] <harrisonclarke> is it possible to export a module with a different name? for example, expose ::A::B::* as ::C::*
[01:42:19] <Boscop> how can i compile dynamic libs and load them at runtime (as plugins)? (linux)
[01:43:32] *** Quits: hjr3 (hradtke@moz-lei.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:43:34] <huon> harrisonclarke: you can use `pub use your::path as some_name;` to reexport things in new locations/with new names
[01:43:45] <Murarth> Boscop: Put `crate_type = [ "dylib" ]` under a lib section.
[01:43:46] <huon> Boscop: plugins for your own application?
[01:43:55] <Manishearth> Yurume: Oh, was just wondering what you knew about how generics are handled metadata wise
[01:44:05] <Manishearth> and nonmetadata wise
[01:44:31] *** Quits: slurps-mad-rips (slurps-mad-@moz-o2c.uaj.44.17.IP) (Quit: Connection reset by bear)
[01:44:37] *** Joins: davebettin_ (davebettin@moz-acc.cl4.35.72.IP)
[01:44:49] <cha0s> hey all, does rust have something similar to go routines?
[01:44:55] <Boscop> huon: yes
[01:44:55] <Yurume> ah, well, your description is essentially correct, and I wondered why you want more :)
[01:45:12] <Boscop> Murarth: and then how to load it? with std::dynamic_lib ?
[01:45:24] <Murarth> Boscop: Yep.
[01:45:33] <Yurume> (the only missing piece here is that the metadata in rlib tends to be *larger* than the monomorphized binary)
[01:45:43] *** Quits: Gabriel_7 (Gabriel@moz-hue0qb.mtgr.92aj.0e35.2a01.IP) (Connection closed)
[01:46:00] <Boscop> Murarth: what is the string in the Result of the open() call?
[01:46:36] <Murarth> Boscop: The error message, I guess.
[01:46:39] *** Joins: ascarter (ascarter@moz-htsn14.wa.comcast.net)
[01:46:45] *** Quits: slomo (slomo@moz-p8m0g2.net) (Ping timeout: 121 seconds)
[01:47:05] <Boscop> Murarth: so i have to use this to map all the symbols? unsafe fn symbol<T>(&self, symbol: &str) -> Result<*mut T, String>
[01:47:06] <Murarth> If an open call were to fail. There must not be a decent way to represent OS-specific errors for that interface.
[01:47:46] *** Joins: dylan (dylan@moz-h9d.d0d.43.100.IP)
[01:47:52] <Boscop> Murarth: is there a macro that auto binds all symbols of a lib?
[01:48:02] <Murarth> Boscop: Yep. Also, in the case of loading functions, it should be noted that you need to transmute the *mut T into a fn(...).
[01:48:06] *** dylan is now known as Guest37348
[01:48:08] *** Quits: davebettin (davebettin@moz-acc.cl4.35.72.IP) (Ping timeout: 121 seconds)
[01:48:15] <huon> also, std::dynamic_lib is a very basic interface, designed for the minimum the compiler needs, essentially
[01:48:17] <Murarth> No, there's no macro. It has no way of knowing which symbols are in the library.
[01:48:39] <Boscop> Murarth: there could be a macro that reads a .def file or something
[01:48:51] <Murarth> There could be. You could write one.
[01:48:54] <gsingh93> would it be possible in the future to allow the Err variant of Result<T, U> to be accepted where you need a Result<S, U>?
[01:48:59] <Boscop> Murarth: how can macros read files?
[01:49:00] *** Joins: mahdi (mahdi@moz-8oo.182.244.151.IP)
[01:49:40] <Murarth> Well, I don't know if it could exactly. It could include_str!() a filename and then operate on that at runtime.
[01:50:10] *** Joins: da-kid_ (da@moz-qp6d2q.dip0.t-ipconnect.de)
[01:50:12] <Murarth> Well, no. I think it would need to load the .def file at runtime, wouldn't it?
[01:51:10] <huon> gsingh93: not directly/always, as they may be different sizes in memory
[01:51:11] <Boscop> no, the symbols exist at compile-time
[01:51:17] <Boscop> the plugin api is fixed for all
[01:51:30] <Boscop> so include_str() should work
[01:51:36] *** Quits: }ls{ (uhelp@moz-i99b3p.dip0.t-ipconnect.de) (Quit: User terminated by real life interrupt)
[01:51:43] <Boscop> Murarth: do i have to transmute even if i call it like lib.symbol<fn(X):Y>("foo") ?
[01:52:00] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[01:52:34] <Murarth> Yes. Because that will return a *mut fn(X), which is a pointer to a pointer. That's not what you want and it will cause a crash. In Rust, fn() is itself a pointer. That's why you need to transmute.
[01:52:49] <Boscop> ah
[01:53:00] *** Quits: da-kid (da@moz-gl1l6v.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[01:53:06] <Boscop> Murarth: do you know when simd will support 'if' etc?
[01:53:15] <Boscop> comparison operators
[01:53:37] <Murarth> I know very little about simd, in Rust or otherwise. I'm sure there's someone else who might be more helpful on the topic.
[01:53:52] <huon> Boscop: it does support (some) comparison operators
[01:54:00] <Boscop> which ones?
[01:55:34] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[01:55:42] *** Joins: ty (ty@moz-i6c4to.wa.comcast.net)
[01:56:11] *** Joins: sysko (bst@moz-g9d.6sp.95.211.IP)
[01:56:15] <ty> I'm working on a program and I keep on getting duplicated error messages.  Any idea why this is happening?
[01:57:22] *** Joins: Florob (Florob@moz-je09t8.de)
[01:57:32] *** Quits: Guest37348 (dylan@moz-h9d.d0d.43.100.IP) (Quit: leaving)
[01:57:45] <Yurume> ty: in a plain rustc? or cargo test? (the latter runs jobs parallelly and can issue the same error twice simultaneously)
[01:57:55] <ty> cargo build 
[01:58:05] <Yurume> hmm
[01:58:10] <Yurume> can you post the error message?
[01:58:11] <huon> Boscop: http://is.gd/Trqc1M
[01:58:13] <Yurume> (with a log)
[01:58:37] *** Quits: ascarter (ascarter@moz-htsn14.wa.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:58:50] <ty> Yurume: http://pastebin.com/K8DDY0nx
[01:58:54] <huon> Boscop: although it seems only integral vectors work
[01:59:20] <huon> Boscop: (SIMD is implemented in a somewhat strange way at the moment)
[01:59:38] *** Joins: v21 (vee@moz-f94.kug.204.223.IP)
[02:00:35] <Boscop> huon: hm, i need it with f64. do you know where i can find the roadmap for simd?
[02:00:55] *** Quits: LysanderAkili (LysanderAki@moz-e2h9er.co.comcast.net) (Ping timeout: 121 seconds)
[02:00:58] *** Quits: meh (meh@moz-p5gc2m.42-151.net24.it) (Ping timeout: 121 seconds)
[02:01:10] <huon> Boscop: there isn't a concrete one
[02:01:23] <huon> (few things in Rust have a concrete roadmap)
[02:01:52] *** Quits: Florob (Florob@moz-je09t8.de) (Quit: leaving)
[02:01:53] *** Joins: sayan (sayan@moz-ms7.p9k.51.106.IP)
[02:01:56] *** Joins: hjr3 (hradtke@moz-lei.av4.169.69.IP)
[02:02:17] *** Joins: mnemnion (mnemnion@moz-e8rfii.ca.comcast.net)
[02:02:23] *** Joins: gzero (pavek@moz-me92pk.mn.comcast.net)
[02:02:57] *** Joins: LysanderAkili (LysanderAki@moz-e2h9er.co.comcast.net)
[02:03:00] *** Quits: penguin42 (dg@moz-0v8anh.cable.virginm.net) (Quit: Leaving.)
[02:04:16] <Yurume> ty: well, can you confirm that a *single* rustc invocation still gives duplicate messages? cargo build -v (after clean) will give the exact command exeucted.
[02:04:30] <Yurume> if it's the case I guess that is a bug.
[02:04:56] <polyfractal> is there any way to disable doc-tests?
[02:05:38] *** Quits: v21 (vee@moz-f94.kug.204.223.IP) (Ping timeout: 121 seconds)
[02:05:45] *** Joins: rajat (rajat@moz-emnlcf.ca.comcast.net)
[02:06:19] *** Quits: sayan (sayan@moz-ms7.p9k.51.106.IP) (Ping timeout: 121 seconds)
[02:06:56] *** Joins: marsel (user@moz-1mr.iia.180.94.IP)
[02:08:24] <Boscop> can i have a global mutable object behind a mutex? so when i write to it, it will move the object from the stack to the global?
[02:08:26] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[02:09:05] <aatch> Boscop, you can have `static Foo: Mutex<T>`
[02:09:12] *** Quits: LysanderAkili (LysanderAki@moz-e2h9er.co.comcast.net) (Ping timeout: 121 seconds)
[02:09:24] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[02:09:38] *** Quits: mahdi (mahdi@moz-8oo.182.244.151.IP) (Ping timeout: 121 seconds)
[02:09:41] <polyfractal> answering myself: doctest = false in Cargo.toml
[02:09:43] <Boscop> aatch: so then i can assign a new T from different threads?
[02:09:47] *** Joins: borromakot (Adium@moz-j6pi1a.il.comcast.net)
[02:09:56] *** Parts: borromakot (Adium@moz-j6pi1a.il.comcast.net) ()
[02:10:04] *** Quits: kimundi (kimundi@moz-qie1ht.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:10:11] *** Joins: mahdi (mahdi@moz-8oo.182.244.151.IP)
[02:10:20] *** Joins: m10e (mblbruce@moz-onbacj.fagotten.org)
[02:10:41] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[02:10:52] <aatch> Boscop, probably. I haven't tried it myself.
[02:11:01] *** Joins: kimundi (kimundi@moz-al1nvt.dip0.t-ipconnect.de)
[02:11:15] *** Joins: LysanderAkili (LysanderAki@moz-e2h9er.co.comcast.net)
[02:12:23] *** Joins: jtdowney (jtdowney@moz-obnifk.il.comcast.net)
[02:12:24] <Amaranth> You can't initialize a static Mutex in the betas, can you?
[02:12:37] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[02:12:40] <Amaranth> MUTEX_INIT was left marked unstable
[02:12:54] *** Quits: rovar (rovar@moz-6iq.47m.88.38.IP) (NickServ (RECOVER command used by Guest6710))
[02:12:55] *** Guest6710 is now known as rovar
[02:13:07] *** Joins: rovar_ (rovar@moz-6iq.47m.88.38.IP)
[02:13:32] <rovar> is the Reader API, or functions such as read_u8 gone for good, or is it moved/moving?
[02:13:51] *** Joins: ascarter (ascarter@moz-705hf8.wa.comcast.net)
[02:14:26] <rovar> or for u8 do I just do  let a : u8 = foo.take(1); 
[02:14:41] <rovar> Take probably wants to produce a vector..
[02:15:12] *** Quits: Guest_ (textual@moz-e2cv3d.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:15:32] *** kimundi is now known as zz_kimundi
[02:15:38] <aatch> rovar, I think there's a crate that provides additional functionality like `read_u8` to the Read trait.
[02:15:49] <reem> rovar: the byteorder crate is their current incarnation
[02:16:24] *** Joins: ascarter_ (ascarter@moz-705hf8.wa.comcast.net)
[02:16:29] *** Joins: Twisol (textual@moz-b8p.mnr.166.130.IP)
[02:17:01] <rovar> cool. thanks
[02:17:40] <rovar> think I'll put in a PR to Clark to add Read/ReadBytesExt and WriteBytesExt to Iobuf
[02:19:14] *** Joins: v21 (vee@moz-au7.kug.204.223.IP)
[02:19:35] *** Quits: ascarter (ascarter@moz-705hf8.wa.comcast.net) (Ping timeout: 121 seconds)
[02:20:29] *** Quits: InfiniteJacuzzi (darren@moz-804egb.dyn.optonline.net) (Quit: WeeChat 1.1.1)
[02:21:18] *** Quits: m10e (mblbruce@moz-onbacj.fagotten.org) (Client exited)
[02:21:22] *** Joins: winding-lines (textual@moz-g7k4j8.ca.comcast.net)
[02:22:00] *** Quits: ty (ty@moz-i6c4to.wa.comcast.net) (Quit: leaving)
[02:22:03] *** zz_kimundi is now known as kimundi
[02:22:26] *** Joins: InfiniteJacuzzi (darren@moz-804egb.dyn.optonline.net)
[02:22:53] *** Joins: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP)
[02:23:44] *** Quits: mahdi (mahdi@moz-8oo.182.244.151.IP) (Ping timeout: 121 seconds)
[02:24:34] *** Joins: gopar (gopar@moz-5039uj.ca.comcast.net)
[02:25:01] *** Joins: scemin (scemin@moz-6v59cl.user.start.ca)
[02:25:31] *** Quits: InfiniteJacuzzi (darren@moz-804egb.dyn.optonline.net) (Quit: WeeChat 1.1.1)
[02:25:32] <rovar> I guess the only way to get a hint about available bytes is from the &[] returned by fill_buf
[02:25:39] <rovar> good enough, I reckon. 
[02:26:45] *** Joins: warmwaffles (warmwaffles@moz-6gpnl1.res.rr.com)
[02:28:05] *** Joins: ryanxcharles (ryan@moz-ttclb9.bac4.d045.0009.2601.IP)
[02:29:10] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[02:30:18] *** Quits: ascarter_ (ascarter@moz-705hf8.wa.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:30:26] *** Quits: claudiop (claudiop@moz-sqo2tm.cpe.netcabo.pt) (Connection closed)
[02:31:08] *** Quits: scemin (scemin@moz-6v59cl.user.start.ca) (Client exited)
[02:32:19] *** Quits: agjacome (agjacome@moz-ma9sfa.dynamic.jazztel.es) (Quit: leaving)
[02:36:05] *** Joins: mahdi (mahdi@moz-ipf.n3s.129.78.IP)
[02:36:30] *** Quits: mkpankov (mkpankov@moz-ac1.0jj.23.84.IP) (Ping timeout: 121 seconds)
[02:36:31] *** Joins: fyolnish (fyolnish@moz-3gjd0b.so-net.ne.jp)
[02:36:58] *** Joins: lenstr (lenstr@moz-s8k.vju.25.171.IP)
[02:37:35] *** Quits: lenstr (lenstr@moz-s8k.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[02:37:49] *** Joins: lenstr (lenstr@moz-s8k.vju.25.171.IP)
[02:38:21] *** Quits: chc4 (chc4@moz-pdo0at.ma.comcast.net) (Quit: AHHHHH BEES)
[02:38:34] *** Joins: matp (matp@moz-rvt9hl.matp.at)
[02:38:45] *** Quits: lenstr (lenstr@moz-s8k.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[02:39:32] *** Quits: rbrandao (uid30340@moz-89qrca.ealing.irccloud.com) (Quit: Connection closed for inactivity)
[02:40:23] *** Joins: borromakot (Adium@moz-j6pi1a.il.comcast.net)
[02:42:04] *** Quits: khades (Thunderbird@moz-u45.3vk.74.212.IP) (Ping timeout: 121 seconds)
[02:42:15] *** Quits: Savago (Savago@moz-8hd.3b6.246.162.IP) (Client exited)
[02:43:00] *** Joins: kvsari (kvsari@moz-fgsnv9.bbtec.net)
[02:43:40] *** Quits: mahdi (mahdi@moz-ipf.n3s.129.78.IP) (Ping timeout: 121 seconds)
[02:43:50] *** Joins: errordeveloper (ilya@moz-33s.nlr.200.90.IP)
[02:44:25] *** Quits: HappyMan (HappyMan@moz-l920uc.fios.verizon.net) (Connection closed)
[02:46:04] *** Joins: rmgk_ (ragnar@moz-ofcii6.dyn.telefonica.de)
[02:46:25] <cha0s> does Rust have something similar to go routines?
[02:47:58] *** Quits: KallDrexx (KallDrexx@moz-4fqk30.dybhfl.sbcglobal.net) (Ping timeout: 121 seconds)
[02:48:05] *** Quits: errordeveloper (ilya@moz-33s.nlr.200.90.IP) (Ping timeout: 121 seconds)
[02:48:34] *** Quits: ismaelga (ismaelga@moz-08fhtd.rev.vodafone.pt) (Connection closed)
[02:49:29] *** Quits: rmgk (ragnar@moz-47v8hs.dyn.telefonica.de) (Ping timeout: 121 seconds)
[02:49:58] <dwrensha> cha0s: it used to, in a library called "libgreen", but it was removed
[02:50:19] *** Quits: warmwaffles (warmwaffles@moz-6gpnl1.res.rr.com) (Quit: Leaving)
[02:50:57] <frewsxcv> anyone know how to determine the number of cpus?
[02:53:29] *** Joins: Florob (Florob@moz-je09t8.de)
[02:54:13] *** Joins: HappyMan (HappyMan@moz-l920uc.fios.verizon.net)
[02:54:20] *** Quits: HappyMan (HappyMan@moz-l920uc.fios.verizon.net) (Connection closed)
[02:55:24] *** Quits: Twisol (textual@moz-b8p.mnr.166.130.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:56:05] *** Joins: kushal (kdas@moz-so4.f0d.244.121.IP)
[02:56:24] *** Joins: HappyMan (HappyMan@moz-l920uc.fios.verizon.net)
[02:56:27] *** Quits: HappyMan (HappyMan@moz-l920uc.fios.verizon.net) (Connection closed)
[02:56:51] <bstrie> cha0s: what properties of goroutines do you need?
[02:57:03] *** Quits: Guest67 (textual@moz-gfs9v0.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:57:15] <bstrie> frewsxcv: not sure, this was a contentious topic a while back
[02:57:37] <scott> there is a num_cpus crate
[02:58:36] *** Joins: p1start (p1start@moz-nftjhe.org)
[02:59:05] *** Quits: dlc (dlc@moz-ijetde.res.rr.com) (Quit: Leaving)
[03:02:21] *** Quits: hjr3 (hradtke@moz-lei.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:02:52] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[03:03:46] *** Joins: choplin (choplin@moz-qkm9un.ap.nuro.jp)
[03:06:14] *** Quits: v21 (vee@moz-au7.kug.204.223.IP) (Ping timeout: 121 seconds)
[03:06:41] *** Joins: zzmp (zzmp@moz-ejkqvn.12ul.lrlq.5500.2604.IP)
[03:07:48] *** Quits: choplin (choplin@moz-qkm9un.ap.nuro.jp) (Ping timeout: 121 seconds)
[03:09:53] *** Quits: shahn (Sebastian@moz-qmgakf.sebastianhahn.net) (Ping timeout: 121 seconds)
[03:10:03] <borromakot> So I haven't looked into this much myself yet, I'm just wondering if anyone has any ideas.  What I would like to do is spawn a process that writes a file to a pipe().
[03:10:41] <borromakot> I can most likely write a function that reads a file and writes it to a pipe(), but I'm wondering if there is any convention for this sort of thing.
[03:11:26] *** Joins: khades (Thunderbird@moz-ual.b31.186.31.IP)
[03:13:10] *** Quits: erz (erz@moz-n2p94l.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzz…)
[03:13:24] *** Quits: idegen (greg@moz-9c4nle.or.frontiernet.net) (Quit: Leaving.)
[03:13:38] <borromakot> or if there is a convention to read directly to a writeable instead of a string buf
[03:14:32] <mbrubeck> borromakot: `std::io::copy` is the normal way to read into a Write
[03:15:28] <reem> borromakot: if you want to do it “in the background” just call io::copy in another thread
[03:15:28] <mbrubeck> You can also look at how `copy` is implemented if you want to do something similar but different: http://doc.rust-lang.org/src/std/io/util.rs.html#31-44
[03:15:52] <cha0s> bstrie: concurrency. i've toyed a bit with twisted in python for concurrency before. Something similar to that I suppose. CallLater, deferred, and so on
[03:16:32] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[03:16:57] <reem> cha0s: Rust has threads, if that’s what you’re looking for. There is also mio if you want an event loop, but it is rather low level. You can couple it with eventual to get reasonably nice (and very fast) async code though.
[03:17:04] <borromakot> mbrubeck: oh buddy.  Now I see why it was what I wanted for the Stdio's from Command.  So since a file implements read, I can just straight up copy the file that way.
[03:17:16] <mbrubeck> yup!
[03:17:17] <zzmp> reem: is there a good example of rust with eventual?
[03:17:25] <bstrie> cha0s: std::thread gives you ways to spawn threads, giving you concurrency like goroutines, and std::sync::mpsc gives you channels for communication
[03:17:52] <mbrubeck> frewsxcv: deferred proposal at https://github.com/rust-lang/rfcs/pull/985
[03:18:01] <frewsxcv> ah, thanks mbrubeck 
[03:18:02] <zzmp> I want redis pub/sub async, and I thought I'd take a stab at mitsuhiko's repo if I had time.
[03:18:11] <reem> zzmp: I’m not aware of anything better than the examples in the repo
[03:18:13] <bstrie> cha0s: see http://doc.rust-lang.org/nightly/book/concurrency.html for a more thorough treatment
[03:18:21] <borromakot> mbrubeck: knowing about io::copy makes all sorts of things easier.  I feel like a large percentage of the time, what you are looking for is to read into a write, as opposed to into memory to handle.  Or at least its usually what I'm looking for.
[03:18:38] <bstrie> cha0s: unlike Go, the solution we have at the moment uses OS threads rather than green threads. so don't go spawning ten million of them. nine million should be fine
[03:19:14] *** Quits: winding-lines (textual@moz-g7k4j8.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[03:19:19] <mbrubeck> frewsxcv: The `test` crate has this private function that uses deprecated/private symbols... http://doc.rust-lang.org/src/test/lib.rs.html#838-857
[03:19:31] <cha0s> bstrie: i was hoping for something like green threads
[03:19:31] *** Joins: v21 (vee@moz-i8r.bqs.204.223.IP)
[03:19:32] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[03:19:44] <frewsxcv> mbrubeck: cool, i'll check it out. thanks!
[03:19:45] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[03:19:47] *** Quits: saml_ (saml@moz-rkfmct.res.rr.com) (Quit: Leaving)
[03:20:00] *** Joins: rbranson (rbranson@moz-oeg7f0.ca.comcast.net)
[03:20:01] <bstrie> cha0s: how many threads are you spawning at once?
[03:20:57] <mbrubeck> cha0s: Here's some background on why green threads are no longer built in to rust: https://github.com/rust-lang/rfcs/blob/master/text/0230-remove-runtime.md
[03:21:06] *** Quits: kanru (kanru@moz-aj9ejj.HINET-IP.hinet.net) (A TLS packet with unexpected length was received.)
[03:21:30] *** Joins: soma (Mibbit@moz-ef5.7ab.191.107.IP)
[03:21:32] *** Joins: kanru (kanru@moz-aj9ejj.HINET-IP.hinet.net)
[03:21:43] <cha0s> 0 currently. I'm creating a new project from scratch that will take over something that potentially deals with tens of millions connections (udp though), on average....i think around 1 million.
[03:22:00] *** Joins: Riastradh (riastradh@moz-ke9rv2.nos-oignons.net)
[03:22:19] *** Joins: nico (nico@moz-69jj7k.dip0.t-ipconnect.de)
[03:22:41] *** Joins: Church (hatter@moz-e031bf.dyn.optonline.net)
[03:22:52] <soma> Hello! I've define an Enum Foo in my submodule and I want to re-export it.  I wrote this: pub use self::Foo,  the compiler gave me error: unresolved import, why?
[03:23:31] <bstrie> cha0s: I don't think there's any complete solution for that yet, sorry. a green thread library is planned, but there are a lot of things to do first
[03:23:31] *** Joins: skade (skade@moz-6athcr.pools.vodafone-ip.de)
[03:23:32] *** Quits: shawnadelic (shawn@moz-u5o3kk.res.rr.com) (Ping timeout: 121 seconds)
[03:23:45] <mbrubeck> soma: Why not just write `pub enum Foo`?
[03:24:02] *** Quits: rbranson (rbranson@moz-oeg7f0.ca.comcast.net) (Ping timeout: 121 seconds)
[03:24:28] <aatch> cha0s, there's some work on an event-loop library.
[03:24:33] <cha0s> bstrie: maybe I can help on that front. I am still new at Rust, but hey, writing more Rust is fun! How can I help?
[03:24:52] <aatch> cha0s, that said, I honestly doubt that Rust could do better than Go in this situation.
[03:25:11] <soma> mbrubeck: ok. I may want to reexport all the members of the enum Foo. What can I do?
[03:25:20] <aatch> Go is designed for exactly that kind of work.
[03:25:23] <borromakot> I feel like I should know this, but is there a way to use a trait in the type signature of a function?  As in, this takes something that implements Read?
[03:25:36] *** Quits: jasonrm (jasonrm@moz-m96h5m.ph.cox.net) (Ping timeout: 121 seconds)
[03:25:54] *** Joins: rbranson (rbranson@moz-ga0.9o0.201.199.IP)
[03:26:15] <bstrie> aatch: I don't see why we couldn't do better than go, nginx is written in C++ and uses stacks smaller than Go's
[03:26:21] *** Quits: nico (nico@moz-69jj7k.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[03:27:00] *** Quits: dmac_ (dmac@moz-4kcd1c.ca.comcast.net) (Ping timeout: 121 seconds)
[03:27:42] <aatch> bstrie, it's not impossible for Rust to do better than Go here. But if you factor in the ease of doing it, Go has the clear advantage. It's not just stacks either. Go uses a calling convention that minimizes the number of registers that need to be saved during a task switch.
[03:27:43] <cha0s> aatch: the event-loop library, would that be mio?
[03:27:46] <cajbir> bstrie: it'd require careful use of avoiding blocking functions wouldn't it? Whereas go has non-blocking build around it.
[03:27:49] <aatch> cha0s, not sure.
[03:27:56] *** Quits: ToBeFree (tobefree@moz-782r3e.de) (Ping timeout: 121 seconds)
[03:28:12] <borromakot> nvm think I found it.
[03:28:44] *** Joins: khades1 (Thunderbird@moz-ual.b31.186.31.IP)
[03:28:44] *** Quits: logan_e (logan_e@moz-ltn.qg3.218.73.IP) (Ping timeout: 121 seconds)
[03:29:06] *** Quits: ayonix (quassel@moz-4i0eh6.xyz) (Connection closed)
[03:29:15] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[03:29:36] *** Quits: khades (Thunderbird@moz-ual.b31.186.31.IP) (Ping timeout: 121 seconds)
[03:29:39] *** Quits: Kxepal832 (Miranda@moz-vu2q70.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[03:30:05] *** Joins: ayonix (quassel@moz-4i0eh6.xyz)
[03:30:11] <bstrie> cha0s: would you like to work on mio? :)
[03:31:28] *** Quits: rmdashrf (rmdashrf@moz-n1r.cr0.54.128.IP) (Quit: WeeChat 0.4.2)
[03:31:36] <cha0s> possibly
[03:32:15] *** Joins: Kxepal (Miranda@moz-vu2q70.pppoe.mtu-net.ru)
[03:32:32] <cha0s> yus, duckduckgo has !cargo
[03:32:47] *** Quits: devyn (devyn@moz-h4a2o5.vc.shawcable.net) (Connection closed)
[03:32:52] <XMPPwocky> ooh
[03:33:12] *** Joins: devyn (devyn@moz-h4a2o5.vc.shawcable.net)
[03:33:34] <mbrubeck> cha0s: awesome
[03:33:55] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[03:35:50] *** Quits: alex-abreu (alex@moz-j54ho8.biz.rr.com) (Ping timeout: 121 seconds)
[03:36:22] *** Joins: mkpankov (mkpankov@moz-ac1.0jj.23.84.IP)
[03:36:30] <bstrie> cha0s: if you'd like to contribute to mio, carllerche is the one to get in touch with
[03:36:31] *** Joins: jasonrm (jasonrm@moz-m96h5m.ph.cox.net)
[03:36:48] <WindowsBunny> Right now what mio needs most is a Windows implementation
[03:36:54] *** Joins: ToBeFree (tobefree@moz-782r3e.de)
[03:37:09] <Dtgr> what would be a proper way to tell the compiler the type of existing variable? let _: &str = p; works but is ugly
[03:37:15] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Ping timeout: 121 seconds)
[03:37:24] <WindowsBunny> If it got that, suddenly mio would be used in a lot more places
[03:37:34] <hoverbear> Wtf? I just tried to build my code from 22 days ago and it actually worked? What is this, a stable language?
[03:37:51] <Murarth> Dtgr: Put the type on the variable when it's declared?
[03:37:57] <bstrie> hoverbear: unacceptable, please file a bug
[03:38:05] *** Joins: aholler (aholler@moz-0ftcn3.dip0.t-ipconnect.de)
[03:38:16] <Dtgr> it is coming from a parser library (nom) macro. hard to do that :)
[03:38:18] <FreeFull> With any code written for beta.1, the most I've had to do was update Cargo.lock files
[03:38:24] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[03:38:33] <hoverbear> bstrie: Just for that I will!
[03:38:34] <Luqman> hoverbear: dammit, brb landing breaking changes now :P
[03:38:58] <carllerche> going to start working on windows next week
[03:39:06] *** Joins: lenstr (lenstr@moz-s8k.vju.25.171.IP)
[03:39:17] * cha0s has had too much pain in the Windows world
[03:39:34] <carllerche> The in-laws are here this week, so not too much time :P
[03:39:56] *** Quits: lenstr (lenstr@moz-s8k.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[03:39:57] <borromakot> okay, so I didn't find it.  I haven't really spent any time using bounds.  So if I have `impl MyStruct` followed by some methods, do I need to put the bound on the impl line?  If so, how would I set it such that the generic T is a Read?
[03:40:10] *** Joins: lenstr (lenstr@moz-s8k.vju.25.171.IP)
[03:40:10] <Layl> I am still so stunned by how amazingly elegant rust's solution to threading is
[03:40:26] <Layl> in retrospect, the solution IS obvious
[03:40:45] <bstrie> Layl: which solution?
[03:40:46] *** Quits: rajat (rajat@moz-emnlcf.ca.comcast.net) (Client exited)
[03:40:52] <Havvy> Channels?
[03:41:02] *** Quits: aholler_ (aholler@moz-3tmgfc.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[03:41:02] <Layl> bstrie, preventing race conditions using ownership
[03:41:04] *** Quits: lenstr (lenstr@moz-s8k.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[03:41:21] <Layl> you can't have a race condition if only one thing at a time can own something
[03:41:22] <aatch> thread safety == memory safety was a signficant simplification of the issue.
[03:41:51] <FreeFull> Of course other races can still happen
[03:41:52] <aatch> (as in, it simplified the issue, making it easier to solve)
[03:41:55] *** Quits: Cork (Cork@moz-rmmud5.priv.bahnhof.se) (Ping timeout: 121 seconds)
[03:42:33] <aatch> But they shouldn't result in memory errors (in safe code), just logic errors.
[03:43:18] <hoverbear> bstrie: https://github.com/rust-lang/rust/issues/24928 >.>
[03:43:20] <Layl> you can prevent other kinds of races by wrapping them in something that's owned as well right?
[03:43:51] <soma> Hello! why does this code not compile? http://is.gd/w9XHpO
[03:44:02] *** Joins: fabianvf (fabianvf@moz-fjqmui.va.comcast.net)
[03:44:09] <cha0s> bstrie, carllerche: first, lemme toy with it and figure out how it goes
[03:44:14] <cha0s> (mio)
[03:44:35] *** Quits: grindhold (quassel@moz-6k8ctl.cyan.servdiscount-customer.com) (Ping timeout: 121 seconds)
[03:44:36] <carllerche> cha0s: a bunch of peeps hangout in #mio if you have any questions
[03:45:08] <cha0s> awesome
[03:45:10] * cha0s joins
[03:45:29] <mbrubeck> soma: Seems like a bug to me, unless I'm missing something...
[03:45:39] *** Joins: ucarion (ulyssecario@moz-vdno9a.c3v0.fbki.f140.2607.IP)
[03:45:50] <hoverbear> soma: Not sure...
[03:46:13] <aatch> soma, it's a known bug.
[03:46:19] <mbrubeck> soma: Or maybe default types are just not implemented yet: https://github.com/rust-lang/rust/issues/19476
[03:46:42] <borromakot> soma: I think you need to declare associated types.
[03:47:18] <borromakot> soma: listen to mbrubeck actually.
[03:47:19] <borromakot> :D
[03:48:04] *** Quits: fabianvf (fabianvf@moz-fjqmui.va.comcast.net) (Ping timeout: 121 seconds)
[03:48:17] *** Joins: mermi (Mibbit@moz-aal.sg2.119.197.IP)
[03:48:23] *** Quits: ayonix (quassel@moz-4i0eh6.xyz) (Connection closed)
[03:48:48] *** Quits: v21 (vee@moz-i8r.bqs.204.223.IP) (Ping timeout: 121 seconds)
[03:48:56] *** Joins: ayonix (quassel@moz-4i0eh6.xyz)
[03:49:13] *** Quits: turtil (turtil@moz-gfc.es4.23.103.IP) (Quit: WeeChat 1.1.1)
[03:49:43] <mermi> is there any tcp documentation ?
[03:50:03] <mermi> links ?
[03:50:10] *** Quits: zzmp (zzmp@moz-ejkqvn.12ul.lrlq.5500.2604.IP) (Quit: )
[03:51:12] <borromakot> How would I write a function in an impl MyStruct that takes a parameter that implements the Read trait?
[03:51:16] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[03:51:40] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[03:52:25] *** Joins: kkimdev (kkimdev@moz-k8t.rhv.135.104.IP)
[03:52:50] *** Joins: dmac (dmac@moz-2ig65r.ca.comcast.net)
[03:53:41] *** Quits: mermi (Mibbit@moz-aal.sg2.119.197.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:54:07] *** Joins: nott (nott@moz-to4.06o.57.86.IP)
[03:54:11] <kkimdev> Q: seems like I cannot do `f32::one()` directly, <f32 as num::One>::one() is possible, but is there a more compact way to write?
[03:54:59] <kkimdev> well, the obvious answer is I guess 1.0f32 but I'm using this inside a macro and the actual type is generic
[03:55:12] *** Joins: __mark__ (mark@moz-pb9mc5.dynamic.chello.pl)
[03:55:27] <bstrie> kkimdev: I think the former is impossible because Rust can't tell if you're referring to a module or a type
[03:56:09] <FreeFull> <f32>::one() might work
[03:56:19] *** Joins: ascarter_ (ascarter@moz-705hf8.wa.comcast.net)
[03:56:25] <FreeFull> playbot: <f32>::one()
[03:56:27] -playbot- output truncated; full output at: http://bit.ly/1P4NplU
[03:56:29] <FreeFull> Nope
[03:56:44] <FreeFull> Oh, One isn't in scope
[03:56:53] <FreeFull> playbot: use std::num::Float; <f32>::one()
[03:56:54] -playbot- <anon>:9:13: 9:28 error: unresolved import `std::num::Float`. There is no `Float` in `std::num`
[03:56:54] -playbot- <anon>:9         use std::num::Float; <f32>::one()
[03:56:54] -playbot- output truncated; full output at: http://bit.ly/1P4NqpW
[03:56:58] <FreeFull> playbot: use std::num::One; <f32>::one()
[03:57:00] -playbot- <anon>:9:13: 9:26 error: use of unstable library feature 'zero_one': unsure of placement, wants to use associated constants
[03:57:00] -playbot- <anon>:9         use std::num::One; <f32>::one()
[03:57:00] -playbot- output truncated; full output at: http://bit.ly/1P4NqGs
[03:57:03] *** Joins: druzac (druzac@moz-hn17us.vc.shawcable.net)
[03:57:18] <FreeFull> kkimdev: <f32>::one() will work
[03:57:19] <kkimdev> FreeFull, yeah I think it works
[03:57:21] <kkimdev> thanks!
[03:57:43] <FreeFull> bstrie: I think this is just a problem with built-in types
[03:57:56] <FreeFull> T::one() works
[03:58:03] <FreeFull> Where T is some generic type
[03:58:14] *** Joins: ptc (textual@moz-93hhba.fios.verizon.net)
[03:59:14] *** bentley|away is now known as bentley
[03:59:47] <mbrubeck> FreeFull, kimundi: Hmm? f32::one works for me: http://is.gd/tJ0DmN
[03:59:58] *** Quits: new_one (new_one@moz-ick.9e1.42.128.IP) (A TLS packet with unexpected length was received.)
[04:00:18] <mbrubeck> playbot-mini: #![feature(zero_one)] use std::num::One; fn main() { println!("{}", f32::one()) }
[04:00:19] -playbot-mini- <anon>:1:1: 1:22 error: unstable feature
[04:00:20] -playbot-mini- <anon>:1 #![feature(zero_one)] use std::num::One; fn main() { println!("{}", f32::one()) }
[04:00:20] -playbot-mini- output truncated; full output at: http://bit.ly/1P4NN3M
[04:00:30] <FreeFull> kkimdev: What does rustc --version say
[04:00:38] <mbrubeck> clearly we need playbot-nightly
[04:00:46] <kkimdev> FreeFull, rustc 1.1.0-nightly (5fb0259ed 2015-04-26) (built 2015-04-27)
[04:01:11] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[04:01:13] *** Joins: Cork (Cork@moz-rmmud5.priv.bahnhof.se)
[04:01:18] <borromakot> why is this: `impl<T> ParsedCommand where T: Read {` giving me `the type parameter `T` is not constrained by the impl trait, self type, or predicates`
[04:01:42] *** Joins: v21 (vee@moz-ti6.bqs.204.223.IP)
[04:01:48] <FreeFull> borromakot: How are you using that T?
[04:01:49] <Mutabah> borromakot: You have to use 'T' in the type
[04:01:54] <mbrubeck> borromakot: You probably want `impl<T> ParsedCommand for T where ...`
[04:02:04] <mbrubeck> or maybe `impl<T> ParsedCommand<T> ...`
[04:02:17] *** Joins: Twinklebear (Twinklebear@moz-ttrcn3.ut.comcast.net)
[04:02:22] <borromakot> that is strange though.  The actual struct shouldn't have to care about what types are required implementations on the struct.
[04:02:31] <FreeFull> Could be          impl ParsedCommand { fn foo<T>(...) where T: Read { ... } }
[04:02:39] <borromakot> like…the struct itself doesn't use T.  Just methods in this impl blocl.
[04:02:57] <FreeFull> borromakot: Yeah, the methods themselves should be the ones declaring T then
[04:03:17] <borromakot> FreeFull: let me give that another shot>  I tried it earlier but it didn't work.
[04:03:34] <borromakot> FreeFull: I mean I couldn't get it to work, and was probably doing it wron.
[04:04:20] <borromakot> I was missing the <T> after the function name.
[04:05:46] *** Quits: fengshaun (fengshaun@moz-rf0qk5.cable.teksavvy.com) (Ping timeout: 121 seconds)
[04:05:46] <FreeFull> Everything works now?
[04:07:31] *** Quits: smarks (smarks@moz-btr.2j1.77.109.IP) (A TLS packet with unexpected length was received.)
[04:07:32] *** Joins: smarks (smarks@moz-btr.2j1.77.109.IP)
[04:07:48] *** Quits: Diggsey (diggsey@moz-oatv88.dsl.pipex.com) (Ping timeout: 121 seconds)
[04:08:18] *** Quits: smarks (smarks@moz-btr.2j1.77.109.IP) (A TLS packet with unexpected length was received.)
[04:09:23] *** Quits: matp (matp@moz-rvt9hl.matp.at) (Ping timeout: 121 seconds)
[04:11:25] *** Joins: Guest67 (textual@moz-gfs9v0.fios.verizon.net)
[04:13:04] *** Quits: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net) (Client exited)
[04:13:20] *** Joins: raph (raph@moz-o75.fg7.77.192.IP)
[04:13:41] <scott> Vec::push_all is unstable with the message that it's likely to be replaced by a more optimized extend, but I can't see how to use extend on a Vec taking a slice or array
[04:14:28] *** Joins: mzabaluev (Thunderbird@moz-3bijqs.bb.dnainternet.fi)
[04:14:47] <scott> I want to do v.extend([0,0,0,0]), but IntoIterator isn't implemented for array types
[04:15:16] *** Quits: nil (nil@moz-71pd10.p5sj.b1d9.0003.2601.IP) (Quit: Leaving)
[04:15:38] *** Quits: fyolnish (fyolnish@moz-3gjd0b.so-net.ne.jp) (Connection closed)
[04:15:48] <scott> and if I use &[0,0,0,0] it becomes an iterator with the wrong item type (&u8 instead of u8)
[04:15:57] *** Joins: mkpankov` (mkpankov@moz-5ki.k4a.16.195.IP)
[04:15:57] *** Quits: mkpankov (mkpankov@moz-ac1.0jj.23.84.IP) (Connection closed)
[04:16:26] *** Quits: gzero (pavek@moz-me92pk.mn.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[04:16:48] <scott> v.extend([0,0,0,0].into_iter().cloned()) works as a workaround of dubious value...
[04:16:49] *** Quits: mkpankov` (mkpankov@moz-5ki.k4a.16.195.IP) (Connection closed)
[04:16:54] *** Joins: shawnadelic (shawn@moz-u5o3kk.res.rr.com)
[04:16:54] *** Joins: mkpankov (mkpankov@moz-ac1.0jj.23.84.IP)
[04:16:55] *** Quits: Wild_Cat (Max@moz-na0tak.dsl.teksavvy.com) (Ping timeout: 121 seconds)
[04:17:29] <FreeFull> scott: vec.push_all(&[0,0,0,0]);
[04:17:39] <FreeFull> Oh, wait
[04:17:43] <mbrubeck> "Vec::push_all is unstable... but..."
[04:17:43] <FreeFull> That was marked unstable
[04:17:51] <mbrubeck> was the start of scott's complaint :)
[04:18:09] *** Joins: frankmcsherry (frankmcsher@moz-9ohmiq.adsl.alicedsl.de)
[04:18:16] <FreeFull> Yeah, you'll need iter+cloned
[04:18:30] *** Quits: mzabaluev (Thunderbird@moz-3bijqs.bb.dnainternet.fi) (Ping timeout: 121 seconds)
[04:18:32] <scott> I'm just going to write for _ in 0..4 { v.push(0); } for now ;)
[04:18:33] <gsingh93> huon: am i doing something wrong here: https://travis-ci.org/gsingh93/ggp-rs/builds/60481948
[04:18:38] <mbrubeck> Will it be possible at some point to impl IntoIterator for [T; N]?
[04:18:39] <gsingh93> i'm trying to get travis-cargo to work
[04:18:44] <FreeFull> scott: You can do  v = v + &[0,0,0,0
[04:18:47] <FreeFull> ];
[04:19:12] <FreeFull> + takes the v by move so it's efficient
[04:19:13] <scott> FreeFull: hmm, is that efficient? it does take v by-value, right?
[04:19:28] <scott> that should be good enough, then
[04:19:34] *** Joins: fyolnish (fyolnish@moz-3gjd0b.so-net.ne.jp)
[04:19:42] <huon> gsingh93: http://www.reddit.com/r/rust/comments/344o0e/helping_travis_catch_the_rustc_train/cqs2p7s
[04:19:49] <huon> gsingh93: it's strange that that behaviour is inconsistent
[04:19:56] *** Quits: kazagistar (jgedeon@moz-08c7kl.coe.montana.edu) (Quit: Leaving.)
[04:20:01] *** Joins: mindtree (Mitch@moz-eifja8.iprimus.net.au)
[04:20:04] <scott> playbot: let mut v = vec![1,2]; v = v + &[3,4]; v
[04:20:06] -playbot- [1, 2, 3, 4]
[04:20:08] <scott> FreeFull: thanks!
[04:20:14] <scott> strangely it doesn't work with +=, though
[04:20:24] <FreeFull> scott: += only works with the built-in numeric types right now
[04:20:29] <scott> I guess Rust doesn't desugar x += y to x = x + y
[04:20:33] <scott> probably smart
[04:20:40] <FreeFull> And there is no trait for +=
[04:20:44] <scott> (I realize += overloading is coming later)
[04:20:53] *** Joins: ascarter (ascarter@moz-705hf8.wa.comcast.net)
[04:21:25] *** Joins: maedhroz (maedhroz@moz-4jk5ho.res.rr.com)
[04:22:20] *** Quits: dhole (dhole@moz-m2uusa.dynamic.jazztel.es) (Ping timeout: 121 seconds)
[04:22:45] *** Joins: dhole (dhole@moz-ocmb1k.dynamic.jazztel.es)
[04:22:55] *** Joins: negge (nathan@moz-p79l68.fios.verizon.net)
[04:22:59] *** Joins: matp (matp@moz-rvt9hl.matp.at)
[04:23:03] *** Quits: shawnadelic (shawn@moz-u5o3kk.res.rr.com) (Ping timeout: 121 seconds)
[04:23:26] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[04:23:39] <gsingh93> huon: ah, ok. you should make that change in your README
[04:24:02] *** Quits: ascarter_ (ascarter@moz-705hf8.wa.comcast.net) (Ping timeout: 121 seconds)
[04:25:47] *** Quits: TingPing (tingping@moz-pihs6b.se) (Quit: "Lost Terminal")
[04:25:54] *** Quits: negge_ (nathan@moz-p79l68.fios.verizon.net) (Ping timeout: 121 seconds)
[04:26:14] *** Quits: Guest67 (textual@moz-gfs9v0.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[04:26:19] *** Joins: Guest67 (textual@moz-gfs9v0.fios.verizon.net)
[04:26:44] *** Quits: kushal (kdas@moz-so4.f0d.244.121.IP) (Ping timeout: 121 seconds)
[04:26:56] *** Joins: TingPing (tingping@moz-pihs6b.se)
[04:27:39] *** Joins: ray (ray@moz-jue.t3f.66.59.IP)
[04:27:45] <huon> gsingh93: already made :)
[04:27:47] <FreeFull> scott: One of the reasons += was wanted so much is because Add used to take things by reference
[04:27:53] <huon> gsingh93: https://github.com/huonw/travis-cargo/commit/8ac1e52e61717d552c5a802d744bd27db324e06c
[04:27:58] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[04:28:23] <gsingh93> oh, haha, i had opened the tab over an hour ago
[04:28:23] <scott> FreeFull: ah, interesting. I'm glad it's by-value now
[04:28:30] *** Quits: kkimdev (kkimdev@moz-k8t.rhv.135.104.IP) (Quit: Leaving)
[04:28:34] <huon> gsingh93: heh
[04:29:21] *** Quits: rfnash (weechat@moz-ulk8um.in.comcast.net) (Ping timeout: 121 seconds)
[04:29:37] *** Joins: errordeveloper (ilya@moz-33s.nlr.200.90.IP)
[04:30:08] <FreeFull> &[x,y] used to be a &[T] literal rather than being &[T; 2]
[04:31:32] *** bentley is now known as bentley|away
[04:32:13] <borromakot> getting the strange error: `unable to infer enough type information about `_`; type annotations required [E0282]
[04:32:13] <borromakot> src/main.rs:24 				wait_and_print_output(command.execute(None));`
[04:32:28] <borromakot> its pointing to the . between command and execute.
[04:32:31] <hoverbear> Is there a hoogle for rust?
[04:32:59] * raph is finally (mostly) happy with his sublime text syntax highlighting and color scheme
[04:33:14] *** Joins: elbow_jason (elbow@moz-fev.tk4.30.50.IP)
[04:33:35] <mbrubeck> hoverbear: rustdoc has a very basic hoogle-like feature
[04:33:43] <hoverbear> Niceee
[04:33:51] *** Quits: errordeveloper (ilya@moz-33s.nlr.200.90.IP) (Ping timeout: 121 seconds)
[04:33:53] <mbrubeck> hoverbear: http://doc.rust-lang.org/std/?search=vec%20-%3E%20usize
[04:34:07] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[04:34:07] *** ChanServ sets mode: +o erickt
[04:34:37] <mbrubeck> borromakot: It can't tell what type `None` is
[04:34:49] <borromakot> oh.  I was thinking it was all about command.
[04:35:28] *** Joins: ascarter_ (ascarter@moz-705hf8.wa.comcast.net)
[04:35:35] <mbrubeck> borromakot: You can try `None::<Foo>` to get a value of type `Option<Foo>`
[04:35:35] *** Quits: ascarter (ascarter@moz-705hf8.wa.comcast.net) (Ping timeout: 121 seconds)
[04:35:55] <borromakot> mbrubeck: that is sort of annoying, because I almost never want anything to call that with a value, its only the struct that calls it with a value.
[04:36:22] *** Joins: smohan (smohan@moz-so4.f0d.244.121.IP)
[04:36:25] <borromakot> I could probably just make an entry point from the outside world that only calls that other function, since that has the generics on the impl available
[04:36:27] <mbrubeck> borromakot: Maybe instead of an option
[04:36:36] <mbrubeck> borromakot: You could call it with type `()`
[04:36:45] <mbrubeck> command.execute(())
[04:37:31] <borromakot> how would I represent that in the function signature?  What can be nothing or something?
[04:37:41] <borromakot> as in actual nothing, not monadic nothing.
[04:39:14] <mbrubeck> borromakot: I don't know if it makes sense for your code, but if there are cases where you don't care about the argument's value or type, it might make sense to just call it with () - an empty tuple, also known as the unit type.
[04:39:31] <hoverbear> Hmm... How can I check that a [u8; 5] and a Vec<u8> have the same contents? assert_eq!() is complaining.
[04:39:38] <scott> it doesn't make any sense to have an () argument outside of generic code
[04:40:18] <scott> hoverbear: & the array (and possibly the vec, too, not sure)
[04:40:24] *** Quits: smohan (smohan@moz-so4.f0d.244.121.IP) (Ping timeout: 121 seconds)
[04:41:02] <mbrubeck> hoverbear: swap the order of the arguments
[04:41:02] *** Quits: marsel (user@moz-1mr.iia.180.94.IP) (Ping timeout: 121 seconds)
[04:41:06] <hoverbear> scott: the trait `core::cmp::PartialEq<collections::vec::Vec<u8>>` is not implemented for the type `&[u8; 5]` ... I can get it to `[u8]`.
[04:41:09] <mbrubeck> playbot: assert_eq!(vec![1,2], [1,2])
[04:41:11] -playbot- ()
[04:41:14] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[04:41:20] <scott> aha
[04:41:23] <scott> mbrubeck's got it
[04:41:30] <hoverbear> Ahhh
[04:41:35] <hoverbear> mbrubeck: Thank you
[04:41:59] *** Joins: lenstr (lenstr@moz-s8k.vju.25.171.IP)
[04:42:16] *** Quits: lenstr (lenstr@moz-s8k.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[04:42:29] *** Joins: lenstr (lenstr@moz-s8k.vju.25.171.IP)
[04:43:25] *** Quits: lenstr (lenstr@moz-s8k.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[04:43:51] *** Joins: Dr_Emann (holoirc@moz-cpo.0ac.11.74.IP)
[04:43:59] *** Quits: Dr_Emann (holoirc@moz-cpo.0ac.11.74.IP) (Connection closed)
[04:44:26] *** Quits: EsBe (EsBe@moz-tr2dkp.res.rr.com) (Ping timeout: 121 seconds)
[04:45:00] *** Quits: Church (hatter@moz-e031bf.dyn.optonline.net) (Quit: WeeChat 0.3.8)
[04:46:09] *** Joins: Church (hatter@moz-e031bf.dyn.optonline.net)
[04:46:41] *** Joins: andresv (textual@moz-4r9jdi.ca.comcast.net)
[04:47:54] *** Quits: Guest (textual@moz-rtn.fg7.77.192.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:48:08] *** Quits: Guest67 (textual@moz-gfs9v0.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[04:48:45] *** Quits: Riastradh (riastradh@moz-ke9rv2.nos-oignons.net) (Ping timeout: 121 seconds)
[04:49:42] <borromakot> mbrubeck: So I've moved the part where I call execute(None) into another function where I've defined T as a Read and say execute(None::<T>).  but now I'm getting: 
[04:49:44] <borromakot> src/main.rs:23:35: 23:40 error: unable to infer enough type information about `_`; type annotations required [E0282]
[04:49:44] <borromakot> src/main.rs:23 				wait_and_print_output(command.run());
[04:49:51] <borromakot> where command is a type annoated variable
[04:50:02] <borromakot> it doesn't seem to make sense.
[04:50:55] *** Quits: markm (Mibbit@moz-mj803l.net.unlv.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[04:51:01] *** Quits: polyfractal (polyfractal@moz-8edvdj.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[04:52:00] *** Quits: nott (nott@moz-to4.06o.57.86.IP) (Ping timeout: 121 seconds)
[04:52:20] <Mutabah> borromakot: Option::<T>::None
[04:52:52] <mbrubeck> borromakot: Can I see the whole main function?
[04:53:00] <borromakot> sure.
[04:53:20] <borromakot> also if I say Option::<T>::None i get `type parameters are not allowed on this type`
[04:53:24] *** Joins: HappyMan (HappyMan@moz-l920uc.fios.verizon.net)
[04:53:31] <FreeFull> None::<T>
[04:53:33] <Mutabah> ... huh
[04:53:47] <borromakot> Option<T>::None ?
[04:53:48] <Mutabah> (wtf, sorry)
[04:53:54] <FreeFull> playbot: None::<i8>
[04:53:55] -playbot- None
[04:54:03] <borromakot> kk
[04:54:55] <borromakot> https://github.com/zachdaniel/rush.git
[04:54:59] *** Joins: rprichard (rprichard@moz-qtpr9r.en8f.d045.0009.2601.IP)
[04:55:06] <borromakot> its not a lot of code
[04:56:05] <mbrubeck> borromakot: So, there's no way in `main` that it can tell what `T` is when you call `run<T>`
[04:56:31] <mbrubeck> borromakot: You can call it like `command.run::<u32>` or whatever
[04:57:17] <borromakot> hmm…
[04:57:29] <mbrubeck> borromakot: I think it would make more sense to get rid of the Option
[04:57:34] <mbrubeck> borromakot: and have two functions
[04:57:45] *** Joins: ty (ty@moz-i6c4to.wa.comcast.net)
[04:57:52] <borromakot> mbrubeck: I can dig that.
[04:57:55] <mbrubeck> fn execute<T: Read>(&self, stdin: T)
[04:58:08] <mbrubeck> fn run(&self)
[04:58:09] <borromakot> each function would be considerably cleaner.
[04:58:09] <ty> I write `extern crate foo` all the time, but are there other kinds of "crates"
[04:58:17] <ty> "intern crate" for example?
[04:58:26] <reem> no
[04:58:27] *** Quits: maedhroz (maedhroz@moz-4jk5ho.res.rr.com) (Connection closed)
[04:58:49] <mbrubeck> ty: There's no other place the "crate" keyword is used, no.
[04:59:01] <ty> ok, just wondering 
[04:59:15] <ty> is that the only two-word keyword in rust?
[04:59:31] * Havvy wishes "type" wasn't a keyword in Rust....
[04:59:35] <mbrubeck> It's not exactly a two-word keyword, since `extern` is used in other places.
[04:59:46] *** Quits: orangeshark (erik@moz-8bq9j4.44tj.56ot.0306.2602.IP) (Quit: Leaving)
[04:59:49] *** Quits: ty (ty@moz-i6c4to.wa.comcast.net) (Quit: leaving)
[05:00:01] <mbrubeck> Havvy: I bet the rustc devs wish that even more.  grep librustc for `ty'.  :)
[05:00:04] *** Joins: ty (ty@moz-i6c4to.wa.comcast.net)
[05:00:21] <huon> using ty saves typing :P
[05:00:37] <ty> D: 
[05:00:50] <FreeFull> ty: You're our hero!
[05:00:59] <ty> Whoooo!
[05:01:30] <Havvy> Yeah. ty can type for us!
[05:03:14] *** Quits: mnemnion (mnemnion@moz-e8rfii.ca.comcast.net) (Connection closed)
[05:03:18] *** Quits: JanC (janc@moz-gepctk.dsl.scarlet.be) (Ping timeout: 121 seconds)
[05:05:26] <scott> (&mut program[operand_index..]).write_i32::<LittleEndian>(number).unwrap(); // is it intended that auto-ref doesn't work here? I can't remove the &mut
[05:05:38] <scott> it's a weird case, but I'm not sure what rule makes auto-ref not work
[05:05:58] *** Joins: nott (nott@moz-to4.06o.57.86.IP)
[05:06:13] *** Quits: Layl (Layl@moz-65hqmf.direct-adsl.nl) (Quit: Leaving)
[05:06:18] <andresv> i have a noob question about moved value: http://is.gd/4YSPNX, what is the rusty way to solve this?
[05:07:11] *** Joins: shawnadelic (shawn@moz-u5o3kk.res.rr.com)
[05:07:21] *** Joins: mnemnion (mnemnion@moz-e8rfii.ca.comcast.net)
[05:07:59] *** Quits: frankmcsherry (frankmcsher@moz-9ohmiq.adsl.alicedsl.de) (Connection closed)
[05:08:32] *** Joins: smarks (smarks@moz-btr.2j1.77.109.IP)
[05:08:39] <bstrie> andresv: the simplest solution would be `println!("\tlocation        : {:?}", args.trackargs.location.unwrap().clone());`
[05:08:53] *** Quits: skade (skade@moz-6athcr.pools.vodafone-ip.de) (Connection closed)
[05:09:06] *** Joins: xororor (sinkuu@moz-plko6e.eonet.ne.jp)
[05:09:45] <ty> andresv: since you don't actually need that data moved, try doing an `as_ref` before unwrap
[05:10:08] <bstrie> andresv: ty's solution is better, I was trying to figure out what the name of that method was :P
[05:10:26] *** Quits: reed (reed@tech.monkey) (RecvQ exceeded)
[05:10:37] <scott> bstrie: your solution wouldn't work, either, since it's unwrap() that moves the value
[05:10:37] *** Joins: reed (reed@tech.monkey)
[05:10:39] <mbrubeck> andresv: Or don't unwrap it when printing? If the outer type implements Debug, that is.
[05:10:46] *** Quits: xororor (sinkuu@moz-plko6e.eonet.ne.jp) (Quit: WeeChat 1.1.1)
[05:11:09] *** Joins: mib_wazobf (Mibbit@moz-lq5ta4.fl.comcast.net)
[05:11:14] <mbrubeck> yeah
[05:11:19] <bstrie> scott: d'oh!
[05:11:22] <scott> .clone().unwrap() would probably work but .as_ref().unwrap() as ty suggests seems best
[05:11:23] *** Quits: mnemnion (mnemnion@moz-e8rfii.ca.comcast.net) (Ping timeout: 121 seconds)
[05:12:05] <ty> andresv: as a sidenote, `use doppler::tle as tle` is the same as `use doppler::tle`
[05:12:43] <andresv> ty: oh you are right
[05:13:10] *** Joins: rmdashrf (rmdashrf@moz-n1r.cr0.54.128.IP)
[05:13:59] *** Joins: ascarter (ascarter@moz-705hf8.wa.comcast.net)
[05:15:05] <gsingh93> is there a stable way to convert a String to lowercase without another allocation?
[05:15:12] <andresv> thanks, it worked fine: println!("\tlocation        : {:?}", args.trackargs.location.as_ref().unwrap()); 
[05:15:26] <ty> andresv: good to hear!
[05:16:13] *** Joins: JanC (janc@moz-aks3pg.dsl.scarlet.be)
[05:16:40] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[05:16:40] *** Quits: ascarter_ (ascarter@moz-705hf8.wa.comcast.net) (Ping timeout: 121 seconds)
[05:16:54] *** Quits: playjax (chatzilla@moz-haj81n.optusnet.com.au) (Connection closed)
[05:16:59] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[05:17:24] <ty> gsingh93: not without writing it yourself with unsafe code
[05:17:26] *** Joins: forgottenone (forgottenon@moz-7c3.s8g.45.92.IP)
[05:17:35] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[05:17:41] <mbrubeck> gsingh93: http://doc.rust-lang.org/std/ascii/trait.AsciiExt.html#tymethod.to_ascii_lowercase seems to be stable
[05:17:44] <borromakot> its really frustrating that when you call unwrap() on a None value that it doesn't tell you what line in your own code that it happened
[05:17:45] <mbrubeck> ASCII-only, of course
[05:17:53] <mbrubeck> Can't convert Unicode to lowercase without possibly changing the lengeth.
[05:17:58] <mbrubeck> *length
[05:18:16] <mbrubeck> oh, but it copies
[05:18:21] <ty> mbrubeck: you were close though
[05:18:22] <mbrubeck> right
[05:18:29] <ty> right underneath is make_ascii_lowercase
[05:18:39] <mbrubeck> yeah
[05:18:41] <mbrubeck> sorry
[05:19:15] <ty> unstable though :(
[05:19:45] <mbrubeck> The implementation of make_ascii_lowercase is pretty simple if you want to copy it to your crate
[05:19:49] *** Joins: p1start (p1start@moz-nftjhe.org)
[05:20:07] *** Quits: ryanxcharles (ryan@moz-ttclb9.bac4.d045.0009.2601.IP) (Quit: Leaving)
[05:20:08] <mbrubeck> oh, or use https://crates.io/crates/ascii
[05:20:48] <gsingh93> i'll probably just use that ascii crate
[05:20:53] <gsingh93> thanks
[05:21:25] *** Quits: DerisiveLogic (smuxi@moz-lok4tg.dyn.optonline.net) (Ping timeout: 121 seconds)
[05:22:08] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[05:24:39] *** Quits: eddyb_ (eddyb@moz-mj8.sgj.26.188.IP) (Ping timeout: 121 seconds)
[05:27:08] *** Quits: mib_wazobf (Mibbit@moz-lq5ta4.fl.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:27:19] *** Joins: skade (skade@moz-6athcr.pools.vodafone-ip.de)
[05:27:33] *** Quits: tamird (textual@moz-5v5pe2.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[05:27:51] *** Joins: giucam (giucam@moz-iv0nnc.bb.dnainternet.fi)
[05:27:53] *** Quits: skade (skade@moz-6athcr.pools.vodafone-ip.de) (Connection closed)
[05:28:48] *** Joins: warmwaffles (warmwaffles@moz-6gpnl1.res.rr.com)
[05:28:57] <borromakot> what would be the best way to get an empty reader?
[05:29:24] <borromakot> disregard ^
[05:30:23] *** Joins: dstrbad (dstrbad@moz-6an0vh.dsl.iskon.hr)
[05:31:54] *** Quits: O01eg (o01eg@moz-vdhhdg.f0so.4n8f.2698.2a02.IP) (Client exited)
[05:31:56] *** Joins: eddyb (eddyb@moz-mj8.sgj.26.188.IP)
[05:32:18] *** Joins: borromakot1 (Adium@moz-j6pi1a.il.comcast.net)
[05:32:51] *** Joins: eibwen (eibwen@moz-oora8v.dip0.t-ipconnect.de)
[05:33:22] *** Joins: SneakySnake (nya@moz-i9is4u.pool.telekom.hu)
[05:33:54] *** Quits: borromakot (Adium@moz-j6pi1a.il.comcast.net) (Ping timeout: 121 seconds)
[05:34:39] *** Joins: skade (skade@moz-6athcr.pools.vodafone-ip.de)
[05:35:43] *** Quits: skade (skade@moz-6athcr.pools.vodafone-ip.de) (Connection closed)
[05:36:09] *** Joins: gen_battle (genbattle@moz-4v0.gkd.16.182.IP)
[05:36:45] *** Joins: arBmind (Andreas@moz-nh8gq8.adsl.alicedsl.de)
[05:37:25] *** Joins: sillesta (sillesta@moz-501od2.business.telia.com)
[05:37:37] *** Quits: mkpankov (mkpankov@moz-ac1.0jj.23.84.IP) (Ping timeout: 121 seconds)
[05:37:55] *** Quits: doener (doener@moz-929cn9.unity-media.net) (Connection closed)
[05:38:44] *** Quits: nott (nott@moz-to4.06o.57.86.IP) (Ping timeout: 121 seconds)
[05:39:32] *** Quits: genbattle (genbattle@moz-4v0.gkd.16.182.IP) (Ping timeout: 121 seconds)
[05:39:33] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[05:40:19] *** Quits: gen_battle (genbattle@moz-4v0.gkd.16.182.IP) (Ping timeout: 121 seconds)
[05:40:22] <borromakot1> does anybody have a strategy for finding out *which* unwrap() is being called on a None value?
[05:41:07] <Havvy> borromakot1:  .expect("Expectation that was violated.")
[05:41:19] <klutzy> backtrace would be useful
[05:41:44] <mindtree> I've been using `.expect` ever since running into this issue in the early days, makes things much easier
[05:42:02] <scott> set the environment variable RUST_BACKTRACE=1
[05:42:16] <borromakot1> is .expect something I should call on the option>
[05:42:18] <borromakot1> **?
[05:42:25] <Mutabah> borromakot1: Yes
[05:42:37] <Mutabah> (Why doesn't Option::unwrap use the type_name intrinsic?
[05:42:53] <borromakot1> can you give me an example of this in practice?
[05:43:00] <FreeFull> .expect replaces .unwrap
[05:43:05] <Mutabah> playbot: None.expect("Hi there");
[05:43:07] -playbot- <anon>:9:9: 9:13 error: unable to infer enough type information about `_`; type annotations required [E0282]
[05:43:07] -playbot- <anon>:9         None.expect("Hi there");
[05:43:07] -playbot- output truncated; full output at: http://bit.ly/1HXAqnb
[05:43:09] *** Quits: davebettin_ (davebettin@moz-acc.cl4.35.72.IP) (Ping timeout: 121 seconds)
[05:43:09] <mindtree> Mutabah: good question
[05:43:17] <Mutabah> playbot: (None::<u8>).expect("Hi there")
[05:43:19] -playbot- thread '<main>' panicked at 'Hi there', /home/rustbuild/src/rust-buildbot/slave/beta-dist-rustc-linux/build/src/libcore/option.rs:330
[05:43:19] -playbot- playpen: application terminated with error code 101
[05:43:28] *** Joins: skade (skade@moz-6athcr.pools.vodafone-ip.de)
[05:43:31] <borromakot1> word
[05:43:45] <Mutabah> mindtree: Ever since I discovered it, my code has been peppered with it. Wherever a generic can fail, it prints the type
[05:43:57] *** Joins: lenstr (lenstr@moz-s8k.vju.25.171.IP)
[05:44:05] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[05:44:14] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[05:44:30] *** Joins: smarks_ (smarks@moz-jcb.eus.76.109.IP)
[05:44:34] *** Quits: lenstr (lenstr@moz-s8k.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[05:44:36] *** Quits: skade (skade@moz-6athcr.pools.vodafone-ip.de) (Connection closed)
[05:44:46] <mindtree> crazy idea: I wonder if unwrap could just be removed altogether in favour of unwrap
[05:44:49] *** Joins: lenstr (lenstr@moz-s8k.vju.25.171.IP)
[05:44:53] <mindtree> in favour of expect*
[05:45:06] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[05:45:25] <Mutabah> mindtree: Not sure
[05:45:34] <Mutabah> I tend to use unwrap where I know that it will never be None
[05:45:45] *** Quits: lenstr (lenstr@moz-s8k.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[05:45:54] <mindtree> Mutabah: true, true
[05:46:18] <mindtree> I do like the idea of using the type name intrinsic within Option, would make things muucchh easier
[05:46:39] *** Quits: smarks (smarks@moz-btr.2j1.77.109.IP) (Ping timeout: 121 seconds)
[05:46:59] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[05:47:00] <Mutabah> mindtree: Heck, I've made a macro for it in my kernel "type_name!(T)"
[05:47:02] <mindtree> FreeFull: so sorry about the even worse issues with portaudio btw, makes me want to flip tables :(
[05:47:09] * mindtree has no idea where to start
[05:47:20] <FreeFull> mindtree: Yeah, I have no idea either ):
[05:47:57] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[05:48:22] *** Quits: ptc (textual@moz-93hhba.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[05:48:47] <comex> what
[05:48:57] <comex> did overflow checking for casts just sort of die?
[05:49:10] <scott> Mutabah: it's not stable yet
[05:49:23] <scott> although I guess that doesn't matter for stdlib implementation
[05:49:46] <scott> I was just toying with the idea of adding a type_name! macro to playbot, but playbot runs beta
[05:50:05] <scott> it would be useful for teaching/demonstration
[05:50:05] <comex> oh, i guess a RFC got passed
[05:50:31] <comex> i don't like that outcome :/
[05:51:05] <bstrie> TeXitoi: I'm here to yell at you!!!! :)
[05:52:50] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[05:53:18] *** Quits: Gamecubic (cubic@moz-bglmk5.mc.videotron.ca) (Quit: Leaving)
[05:53:49] <scott> http://is.gd/MghcyH << we could have this on a nightly playbot with a slightly bigger template
[05:54:11] <scott> then you could say "playbot: t!(vec![1,2,3])" and it would print the type
[05:54:13] <aji> http://doc.rust-lang.org/src/core/cell.rs.html#267
[05:54:25] <aji> is this sort of thing the accepted way of linking between things?
[05:54:29] <snow> Is it possible to have write something like `#[cfg(feature = "bench")] #![feature(test)]`?
[05:54:45] *** Joins: skade (skade@moz-6athcr.pools.vodafone-ip.de)
[05:55:11] <bstrie> snow: what are you trying to do?
[05:55:20] *** Joins: nico_rikken (nico@moz-ukr65p.6ulu.d2lj.0981.2001.IP)
[05:55:26] <aatch> snow, `#[cfg_attr(feature="bench", feture(test))]`
[05:55:34] <bstrie> aji: that's markdown syntax, and yes
[05:55:35] *** Joins: djcb (user@moz-nqdj21.elisa-laajakaista.fi)
[05:55:38] <snow> Run benchmarks only if the compiler is on nightly
[05:55:43] <aji> alright
[05:55:57] <aji> did a bit of googling but couldn't find a definitive answer, thanks
[05:56:08] *** Quits: ebfull (ebfull@moz-2hf06a.co.comcast.net) (Quit: Konversation terminated!)
[05:56:11] *** Quits: arBmind (Andreas@moz-nh8gq8.adsl.alicedsl.de) (Quit: Leaving.)
[05:56:14] *** Joins: ebfull (ebfull@moz-2hf06a.co.comcast.net)
[05:56:27] *** Joins: kgrandon (Adium@moz-ach9qn.hjek.d045.0009.2601.IP)
[05:56:32] *** Quits: skade (skade@moz-6athcr.pools.vodafone-ip.de) (Connection closed)
[05:57:48] *** Quits: aatch (james@moz-ciignl.bmm3.j08e.e000.2406.IP) (Connection closed)
[05:57:56] *** Quits: zzing (textual@moz-jucm1n.cpe.distributel.net) (Quit: Textual IRC Client: www.textualapp.com)
[05:59:17] *** Quits: lutter1 (lutter@moz-7v7ueu.PUBLIC.monkeybrains.net) (Quit: Leaving.)
[05:59:48] *** Joins: jaen (jaen@moz-ifmik2.copit.pl)
[06:01:47] *** Quits: borromakot1 (Adium@moz-j6pi1a.il.comcast.net) (Quit: Leaving.)
[06:02:43] *** Joins: minot2 (kkus@moz-baj4jj.74.srtnet.com)
[06:02:44] *** Joins: James (quassel@moz-9kp9p2.range86-148.btcentralplus.com)
[06:02:49] *** Joins: minot_afk (minot@moz-r0m4ta.minotstateu.edu)
[06:03:35] *** Joins: tcard (tcard@moz-jdrdbk.ddns.jazztel.es)
[06:03:46] <comex> mm, $($b:stmt)* is still broken
[06:04:42] <comex> for some reason, multiple 'type' statements match this fine, but 'let' statements don't
[06:04:48] <comex> i wonder if this would be a breaking change to fix
[06:05:04] *** Quits: kkus (kkus@moz-baj4jj.74.srtnet.com) (Ping timeout: 121 seconds)
[06:05:10] *** Quits: pakupaku (pl@moz-jse.is7.143.79.IP) (Ping timeout: 121 seconds)
[06:05:16] *** Quits: minot (minot@moz-r0m4ta.minotstateu.edu) (Ping timeout: 121 seconds)
[06:06:02] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[06:06:35] *** Quits: andresv (textual@moz-4r9jdi.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[06:07:12] *** Joins: skade (skade@moz-6athcr.pools.vodafone-ip.de)
[06:07:28] *** Joins: squiddy (squiddy@moz-md4.pm3.19.178.IP)
[06:11:43] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[06:12:29] <Sgeo_> Was there an extremely recent change to allow macros to produce multiple items?
[06:12:45] <bstrie> Sgeo_: I don't think it was recent
[06:12:55] *** Quits: niconii (nicole@moz-5e9nqt.frgo.qwest.net) (Quit: leaving)
[06:12:59] <Sgeo_> Then how come it seems allowed now but not a few weekends ago when I was writing this code?
[06:13:02] *** Quits: skade (skade@moz-6athcr.pools.vodafone-ip.de) (Connection closed)
[06:13:13] *** Quits: jaen (jaen@moz-ifmik2.copit.pl) (Quit: WeeChat 1.1.1)
[06:13:21] *** Joins: jaen (jaen@moz-ifmik2.copit.pl)
[06:13:25] <Sgeo_> On the 16th or so
[06:13:40] *** Joins: KLP (KLP@moz-qdcjho.res.rr.com)
[06:14:10] <Sgeo_> Via rust playpen I mean
[06:14:19] *** Joins: skade (skade@moz-6athcr.pools.vodafone-ip.de)
[06:14:22] <cmr> It's not recent, it's very old at this point.
[06:14:33] <cmr> (like a year+)
[06:15:00] *** Quits: Twinklebear (Twinklebear@moz-ttrcn3.ut.comcast.net) (Quit: Leaving)
[06:15:15] <Sgeo_> So what causes that error about ignored tokens sometimes?
[06:15:43] *** Quits: minot2 (kkus@moz-baj4jj.74.srtnet.com) (Connection closed)
[06:15:51] <comex> bah, why doesn't str::parse<integral> allow hexadecimal strings starting with 0x
[06:15:58] *** Quits: skade (skade@moz-6athcr.pools.vodafone-ip.de) (Connection closed)
[06:16:10] *** Quits: tcard (tcard@moz-jdrdbk.ddns.jazztel.es) (Client exited)
[06:16:15] <bstrie> comex: file a bug!
[06:16:19] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[06:16:25] <comex> too late, that would be backwards incompatible :P
[06:16:30] <Sgeo_> Meh, I'll just play around to see how this will let me improve ergonomics and/or resolve coherence problems
[06:16:37] *** Joins: daschl (Adium@moz-oirn1i.vie.surfer.at)
[06:17:09] <geofft> Sgeo_: I got that error recently when I was writing my macro wrong 
[06:17:16] <Sgeo_> Of course at work I'll be thinking about that instead of working
[06:17:19] <Sgeo_> >.>
[06:17:28] <geofft> Sgeo_: in particular I forgot that structs don't need closing semicolons, and if you put one there, you get that error 
[06:17:31] <comex> i guess i'll file a bug anyway
[06:17:42] <Sgeo_> geofft, ah
[06:17:54] <bstrie> comex: I don't see how it would be backward incompatible
[06:18:13] <bstrie> comex: today we don't parse hex strings starting with 0x, tomorrow we would. no code breaks
[06:18:23] <scott> bstrie: some code relies on it failing
[06:18:25] *** Joins: errordeveloper (ilya@moz-33s.nlr.200.90.IP)
[06:18:33] <bstrie> scott: such as?
[06:18:37] <comex> an application could hypothetically depend upon parse success <=> ^[0-9]+$
[06:18:41] <comex> (and -)
[06:19:14] <scott> bstrie: any code using parse to parse decimal numbers and error if not given a decimal number
[06:19:26] <bstrie> scott: does it parse hex strings at all today?
[06:19:29] <scott> (which is technically every use of parse resulting in integer types today)
[06:19:50] <comex> you can ask for a specific radix
[06:19:52] <bstrie> from your comment I assumed that it would parse "FFF" but not "0xFFF"
[06:19:55] <comex> yeah
[06:19:56] <scott> you can use u32::from_str_radix(s, 16) to parse hex
[06:20:03] *** Joins: GBGamer (npm@moz-92sbjt.wa.comcast.net)
[06:20:03] <scott> but not .parse
[06:20:22] *** Joins: pakupaku (pl@moz-jse.is7.143.79.IP)
[06:20:23] <FreeFull> I doubt from_str_radix handles 0x either
[06:20:26] *** Quits: passcod (passcod@moz-p68.ijk.131.104.IP) (A TLS packet with unexpected length was received.)
[06:20:27] <comex> it doesn't
[06:20:44] <FreeFull> Although stripping a prefix isn't the hardest thing to do
[06:20:48] <scott> I like parsing methods that don't make wild assumptions
[06:20:49] <FreeFull> Still, it'd be nice to have it done for you
[06:20:53] <cmr> scott++
[06:20:56] <cmr> FreeFull--
[06:21:08] <FreeFull> Not necessarily with these functions
[06:21:09] *** Joins: passcod (passcod@moz-p68.ijk.131.104.IP)
[06:21:11] <FreeFull> But have a separate one
[06:21:21] <FreeFull> parse_num_literal
[06:21:45] <cmr> I don't see why we'd ever put a lexer in the stdlib.
[06:22:02] <cmr> beyond ToString and its inverse.
[06:22:18] <comex> C has one
[06:22:24] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[06:22:24] *** ChanServ sets mode: +o pnkfelix
[06:22:28] *** Joins: sonder (chatzilla@moz-nt8r49.idi.ntnu.no)
[06:22:31] <comex> strtol accepts octal and hexadecimal if you pass base=0 :p
[06:22:40] *** Quits: errordeveloper (ilya@moz-33s.nlr.200.90.IP) (Ping timeout: 121 seconds)
[06:22:53] *** Quits: warmwaffles (warmwaffles@moz-6gpnl1.res.rr.com) (Quit: Leaving)
[06:23:11] *** Quits: Takronix (Takronix@moz-nm15k0.hr.cox.net) (Connection closed)
[06:23:16] *** Joins: skade (skade@moz-6athcr.pools.vodafone-ip.de)
[06:23:18] <geofft> Sgeo_: here's the error I ran into the other day: http://is.gd/v2Id9A 
[06:23:29] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (Ping timeout: 121 seconds)
[06:23:29] *** Quits: skade (skade@moz-6athcr.pools.vodafone-ip.de) (Connection closed)
[06:23:35] <geofft> that error secretly means "remove that semicolon, it doesn't go there" 
[06:23:48] <geofft> but it sounds entirely too much like "you can't write a macro to do that" 
[06:23:52] <scott> comex: strtol's man page just makes me sadder and sadder
[06:23:53] *** Joins: mkpankov (mkpankov@moz-4i9.3mh.23.84.IP)
[06:23:59] <scott> it actually accepts 0x for base 0 or 16
[06:24:14] <scott> so you can't parse hex in a way that doesn't strip 0x
[06:24:30] <scott> (say you stripped it manually, then used strtol - now 0x0xFF will pass through your parser)
[06:24:51] <scott> strtol also skips arbitrary initial whitespace
[06:25:10] <comex> yeah, although 'accepting 0x but being base 16 by default anyway' is actually useful in some cases
[06:25:27] <scott> sure, and you could have a function for that
[06:25:33] *** Joins: skade (skade@moz-6athcr.pools.vodafone-ip.de)
[06:25:38] <scott> instead of loads upon loads of special cases in one function
[06:25:40] <scott> I can't believe how badly designed most of the C stdlib is
[06:26:31] <scott> (sorry, I'm heading into language bashing territory...)
[06:27:44] *** Quits: nico_rikken (nico@moz-ukr65p.6ulu.d2lj.0981.2001.IP) (Quit: Leaving)
[06:28:37] <comex> scott: name a library that's as old and better designed :p
[06:29:02] *** Joins: squiddy (squiddy@moz-md4.pm3.19.178.IP)
[06:29:20] *** Quits: pakupaku (pl@moz-jse.is7.143.79.IP) (Ping timeout: 121 seconds)
[06:29:26] <cmr> BLAS.
[06:29:44] <huon> it's a gemm of a library
[06:29:50] <bstrie> the one at Alexandria was pretty good I hear
[06:30:04] *** Joins: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net)
[06:30:54] *** Joins: pakupaku (pl@moz-jse.is7.143.79.IP)
[06:31:36] <cmr> Most of the really old IBM mainframe stuff is actually decent as well. Now, given, none of these are C, but what does that say about C? :)
[06:34:13] *** Quits: psy (psy@moz-ous.ntd.6.103.IP) (Connection closed)
[06:35:01] *** Quits: dstrbad (dstrbad@moz-6an0vh.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[06:35:02] *** Quits: pakupaku (pl@moz-jse.is7.143.79.IP) (Ping timeout: 121 seconds)
[06:35:33] *** Joins: raph1 (raph@moz-o75.fg7.77.192.IP)
[06:35:33] *** Quits: raph (raph@moz-o75.fg7.77.192.IP) (Connection closed)
[06:36:32] *** Joins: pakupaku (pl@moz-jse.is7.143.79.IP)
[06:36:42] *** Joins: borromakot (Adium@moz-j6pi1a.il.comcast.net)
[06:38:41] *** Quits: james4k (james@moz-ao8aj6.consolidated.net) (Ping timeout: 121 seconds)
[06:39:15] *** Quits: skade (skade@moz-6athcr.pools.vodafone-ip.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:40:03] *** Quits: mkpankov (mkpankov@moz-4i9.3mh.23.84.IP) (Ping timeout: 121 seconds)
[06:41:41] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[06:41:43] *** Quits: borromakot (Adium@moz-j6pi1a.il.comcast.net) (Quit: Leaving.)
[06:42:48] *** Quits: shawnadelic (shawn@moz-u5o3kk.res.rr.com) (Ping timeout: 121 seconds)
[06:43:43] *** Quits: thelastinuit (thelastinui@moz-doh.aqt.240.148.IP) (Quit: Textual IRC Client: www.textualapp.com)
[06:45:43] *** Joins: dstrbad (dstrbad@moz-f4gkm2.net.t-com.hr)
[06:46:04] *** Joins: lenstr (lenstr@moz-s8k.vju.25.171.IP)
[06:46:14] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[06:46:54] *** Quits: lenstr (lenstr@moz-s8k.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[06:47:05] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[06:47:08] *** Joins: lenstr (lenstr@moz-s8k.vju.25.171.IP)
[06:47:21] *** Joins: Tuba (Tobba@moz-6oh.7ki.21.217.IP)
[06:48:03] *** Quits: lenstr (lenstr@moz-s8k.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[06:48:15] *** Joins: alonlevy (alon@moz-jea.st2.250.85.IP)
[06:48:54] *** Quits: giucam (giucam@moz-iv0nnc.bb.dnainternet.fi) (Ping timeout: 121 seconds)
[06:50:10] *** Joins: Temur (Tarmashirin@moz-56l.klk.207.117.IP)
[06:50:35] *** Joins: eddyb__ (eddyb@moz-mj8.sgj.26.188.IP)
[06:51:02] *** Quits: eddyb (eddyb@moz-mj8.sgj.26.188.IP) (Connection closed)
[06:52:21] *** Quits: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[06:52:33] *** Quits: Temur (Tarmashirin@moz-56l.klk.207.117.IP) (Quit: Leaving)
[06:56:18] *** Joins: mkpankov (mkpankov@moz-4i9.3mh.23.84.IP)
[06:56:29] <comex> oh, cool, bindgen has randomly decided to start outputting nothing
[06:56:43] <comex> after a rustup
[06:57:11] *** Joins: hebz0rl (hebz0rl@moz-cfcrtj.static.qsc.de)
[06:57:44] *** Quits: James (quassel@moz-9kp9p2.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[06:57:49] *** Joins: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net)
[06:57:51] *** Quits: sorccu (simo@moz-g78p5c.ocn.ne.jp) (Quit: ⎋)
[06:57:56] *** Joins: sorccu (simo@moz-g78p5c.ocn.ne.jp)
[06:58:52] *** Joins: anty (anty@moz-5706pr.rbg.tum.de)
[06:59:01] *** Joins: debu (debu@moz-k92ib2.adsl.alicedsl.de)
[06:59:15] <bstrie> comex: the most recent rust beta now bundles all C code ever written, and ever to be written. bindgen is obsolete
[06:59:32] *** Joins: nico (nico@moz-lkua9r.dip0.t-ipconnect.de)
[07:00:14] *** Joins: Temur (Tarmashirin@moz-56l.klk.207.117.IP)
[07:00:29] <whipsch> it was replaced with cgen
[07:00:31] <whipsch> :)
[07:00:55] *** Quits: kgrandon (Adium@moz-ach9qn.hjek.d045.0009.2601.IP) (Quit: Leaving.)
[07:01:21] *** Quits: Temur (Tarmashirin@moz-56l.klk.207.117.IP) (Quit: Leaving)
[07:01:36] <comex> the command line tool still works, but my build script which uses the library directly magically broke
[07:01:39] <comex> it worked before the rustup
[07:01:42] *** Joins: shawnadelic (shawn@moz-u5o3kk.res.rr.com)
[07:02:51] *** Joins: eddyb (eddyb@moz-mj8.sgj.26.188.IP)
[07:03:34] *** Quits: nico (nico@moz-lkua9r.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[07:04:23] *** Quits: Tuba (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[07:04:31] *** Quits: eddyb (eddyb@moz-mj8.sgj.26.188.IP) (Quit: Konversation terminated!)
[07:05:55] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[07:06:16] *** Joins: ebel (rory@moz-l1ldq7.hsi4.kabel-badenwuerttemberg.de)
[07:06:17] *** Quits: jasonrm (jasonrm@moz-m96h5m.ph.cox.net) (Ping timeout: 121 seconds)
[07:06:36] *** Joins: michael1 (michael@moz-9vjtig.mo.charter.com)
[07:07:15] *** Quits: Porkepix_ (Porkepix@moz-e1bv2v.rev.sfr.net) (Quit: My laptop has gone to sleep. ZZZzzz…)
[07:08:19] *** Quits: __mark__ (mark@moz-pb9mc5.dynamic.chello.pl) (Client exited)
[07:08:51] *** Quits: brainproxy (michael@moz-9vjtig.mo.charter.com) (Ping timeout: 121 seconds)
[07:09:12] *** Quits: gopar (gopar@moz-5039uj.ca.comcast.net) (Connection closed)
[07:09:52] *** Joins: Temur (Tarmashirin@moz-56l.klk.207.117.IP)
[07:09:53] *** Quits: shawnadelic (shawn@moz-u5o3kk.res.rr.com) (Quit: leaving)
[07:10:28] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[07:11:22] *** Quits: Murarth (Murarth@moz-eb5009.dyn.nltelcom.net) (Quit: Mani Mani is always Mani Mani at Mani Mani with all Mani Mani Mani)
[07:11:40] *** Joins: giucam (giucam@moz-u9jnsc.c665.0nib.2060.2001.IP)
[07:11:40] *** Joins: Murarth (Murarth@moz-mpmr8r.phnx.qwest.net)
[07:12:43] *** Joins: Layl (Mibbit@moz-iachg4.sdb.prolocation.net)
[07:12:56] *** Joins: MaxV (MaxV@moz-1nu.kln.167.83.IP)
[07:12:58] *** Joins: Tarmashirin (Tarmashirin@moz-dp1.lkp.221.117.IP)
[07:14:59] *** Joins: Nickleoi (sailfish@moz-vct.i1i.96.112.IP)
[07:15:00] *** Joins: bjz (bjz@moz-b43.1aa.161.202.IP)
[07:15:11] *** Quits: jtdowney (jtdowney@moz-obnifk.il.comcast.net) (Ping timeout: 121 seconds)
[07:16:17] *** Joins: jtdowney (jtdowney@moz-obnifk.il.comcast.net)
[07:16:19] *** Quits: Temur (Tarmashirin@moz-56l.klk.207.117.IP) (Ping timeout: 121 seconds)
[07:16:50] *** Joins: m104ru (m104ru@moz-j4k.8g6.153.93.IP)
[07:16:51] *** Joins: slashus2 (slashus2___@moz-evfg9e.res.rr.com)
[07:16:58] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[07:16:59] *** Quits: bjz (bjz@moz-b43.1aa.161.202.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[07:17:07] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[07:17:58] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[07:18:19] *** Quits: Tarmashirin (Tarmashirin@moz-dp1.lkp.221.117.IP) (Ping timeout: 121 seconds)
[07:18:21] *** Joins: Ms2ger (Ms2ger@moz-m2p.r4q.180.91.IP)
[07:19:10] *** Joins: errordeveloper (ilya@moz-33s.nlr.200.90.IP)
[07:19:21] *** Joins: jtdowney_ (jtdowney@moz-obnifk.il.comcast.net)
[07:20:29] <Layl> say I've got a trait with a function: fn do_thing(output: &mut MyOutput), how can I let a struct implementing the trait add a reference to a value in the struct into output?
[07:20:53] <reem> Will io::Read on Cursor<Vec<u8>> grow the Vec?
[07:21:03] <Layl> so, an implementation of do_thing would for example be: { output.add_value(&self.value); }
[07:21:10] <reem> sorry, io::Write
[07:21:13] *** Quits: jtdowney (jtdowney@moz-obnifk.il.comcast.net) (Ping timeout: 121 seconds)
[07:21:13] <XMPPwocky> reem: why would reading grow the vec
[07:21:25] <XMPPwocky> oh
[07:21:31] <reem> Ya, reading wouldn’t
[07:21:58] *** Quits: cptroot (Mibbit@moz-n169l8.caltech.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[07:22:04] <XMPPwocky> reem: http://doc.rust-lang.org/src/std/io/cursor.rs.html#141 apparently yes
[07:22:50] <tomaka> rusti: let mut cursor = std::io::Cursor::new(vec![]); write!(cursor, "hello"); cursor
[07:22:51] -playbot- output truncated; full output at: http://bit.ly/1JRoccZ
[07:23:15] <tomaka> rusti: use std::io::Write; let mut cursor = std::io::Cursor::new(vec![]); write!(cursor, "hello").unwrap(); cursor
[07:23:16] -playbot- Cursor { inner: [104, 101, 108, 108, 111], pos: 5 }
[07:23:20] <XMPPwocky> Eugh.
[07:23:21] <reem> ugh
[07:23:25] *** Quits: errordeveloper (ilya@moz-33s.nlr.200.90.IP) (Ping timeout: 121 seconds)
[07:23:33] <XMPPwocky> that is a really really awful thing w.r.t. write! and imporst
[07:23:33] <reem> that’s not useful :/
[07:23:52] <reem> use std::io::prelude::*;
[07:24:03] <reem> rusti: use std::io::prelude::*;
[07:24:04] -playbot- <anon>:9:13: 9:33 warning: unused import, #[warn(unused_imports)] on by default
[07:24:05] -playbot- <anon>:9         use std::io::prelude::*;
[07:24:05] -playbot- output truncated; full output at: http://bit.ly/1EPQcQl
[07:24:07] <XMPPwocky> reem: instead, use Cursor::new(&mut my_vec[])
[07:24:09] <XMPPwocky> reem: then
[07:24:15] <XMPPwocky> it won't expand it
[07:24:17] <reem> I cannot
[07:24:23] <reem> type has to be ‘static
[07:24:26] <XMPPwocky> why not
[07:24:29] <XMPPwocky> oh :( 
[07:24:38] *** Joins: tcard (tcard@moz-5eb1g3.staticIP.rima-tde.net)
[07:25:03] <tomaka> why does it have to be static?
[07:25:10] <tomaka> there's even `impl<'a> Write for Cursor<&'a mut [u8]>`
[07:25:12] <reem> event loop
[07:25:51] *** Joins: v212 (vee@moz-ti6.bqs.204.223.IP)
[07:26:09] <reem> I’d rather avoid dipping into unsafe
[07:26:57] *** Quits: tcard (tcard@moz-5eb1g3.staticIP.rima-tde.net) (Client exited)
[07:27:21] *** Quits: basicdays (basicdays@moz-vreeoj.cable.rcn.com) (Ping timeout: 121 seconds)
[07:27:52] *** Joins: v213 (vee@moz-ti6.bqs.204.223.IP)
[07:27:56] *** Joins: Temur (Tarmashirin@moz-dp1.lkp.221.117.IP)
[07:28:26] *** Joins: skade (skade@moz-4eh.d50.201.212.IP)
[07:28:44] *** Joins: loyd (loyd@moz-uft.32f.108.213.IP)
[07:29:10] *** Quits: v21 (vee@moz-ti6.bqs.204.223.IP) (Ping timeout: 121 seconds)
[07:29:57] *** Quits: atomic (atomic@moz-ch53jc.jager.io) (Ping timeout: 121 seconds)
[07:30:26] * WindowsBunny dips into reem
[07:30:44] <reem> :P
[07:31:10] *** Quits: v212 (vee@moz-ti6.bqs.204.223.IP) (Ping timeout: 121 seconds)
[07:31:20] *** Quits: slashus2 (slashus2___@moz-evfg9e.res.rr.com) (A TLS packet with unexpected length was received.)
[07:32:07] *** Joins: zyphrus (David@moz-nhi.pas.98.101.IP)
[07:32:25] <tomaka> uuuugh why are traits violet in the docs?
[07:32:27] *** Quits: grant (grant@moz-jfh.0nq.187.64.IP) (Client exited)
[07:32:48] <tomaka> that's ugly!
[07:33:28] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[07:33:38] *** Joins: kerrick (kerrick@moz-fub7j7.hfc.comcastbusiness.net)
[07:36:52] *** Joins: mvyskocil (mvyskocil@moz-1fo.p0p.7.31.IP)
[07:37:11] <Layl> for my earlier question, here's a snippet of code of my problem http://is.gd/iOki1h
[07:37:28] <huon> tomaka: https://github.com/rust-lang/rust/pull/24804
[07:38:07] *** Quits: mkpankov (mkpankov@moz-4i9.3mh.23.84.IP) (Ping timeout: 121 seconds)
[07:38:11] <ekarlso> is there asyncio atm in rust or ? ^ 
[07:38:56] <reem> ekarlso: https://github.com/carllerche/mio is an event loop
[07:39:08] <reem> based on epoll/kqueue, but note it does not work on windows (yet)
[07:39:41] <tomaka> why are people focusing on that Leak/Rc/thread::scoped problem, when there are critical issues like the color of traits?
[07:40:04] *** Joins: tigrou3tac (fabien@moz-gdonfo.fbx.proxad.net)
[07:40:18] <tomaka> !
[07:41:03] <WindowsBunny> reem: There's a plan to make it work on Windows though
[07:41:13] <reem> I also dislike the new color, tbh.
[07:41:18] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[07:41:19] * huon does too
[07:41:25] <WindowsBunny> The new trait color really bothers me
[07:41:29] <WindowsBunny> It's so... ick
[07:41:39] * mindtree investigates
[07:41:40] <WindowsBunny> I demand color changes like that go through the RFC process!
[07:41:40] <ekarlso> trait color ? : p
[07:41:42] <reem> *consensus*
[07:41:51] <reem> :P
[07:42:15] * mindtree still sees yellow traits
[07:42:22] *** Joins: mzabaluev (Thunderbird@moz-3bijqs.bb.dnainternet.fi)
[07:42:22] <Layl> could I get some help on my non-color related problem
[07:43:03] *** Quits: Nickleoi (sailfish@moz-vct.i1i.96.112.IP) (Quit: IRC for Sailfish 0.9)
[07:43:36] *** Joins: fabiand (fabiand@moz-sct78v.dip0.t-ipconnect.de)
[07:44:18] <tomaka> Layl: fn do_thing<'a>(&'a self, output: &mut MyOutput<'a>);
[07:44:30] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[07:44:41] <tomaka> also, that's what the compiler suggested, and it's correct
[07:44:43] *** Joins: slomo (slomo@moz-p8m0g2.net)
[07:45:10] *** Quits: debu (debu@moz-k92ib2.adsl.alicedsl.de) (Ping timeout: 121 seconds)
[07:45:27] <Layl> tomaka, will that make the struct implementing the trait be borrowed until output goes out of scope?
[07:45:31] *** Joins: mkpankov (mkpankov@moz-4i9.3mh.23.84.IP)
[07:46:04] <ekarlso> is there a IDE or good editor for rust atm ?
[07:46:13] <tomaka> Layl: yes
[07:46:34] <Layl> ekarlso, there's AN ide for rust
[07:46:50] <Layl> I can't really say how good it is because it doesn't run on windows
[07:47:12] <Layl> and I'm way too lazy/scared to get a linux partition working on my laptop
[07:48:06] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[07:48:16] *** Joins: lenstr (lenstr@moz-s8k.vju.25.171.IP)
[07:48:37] <soma> Hello! does rust support tree-like enums? I want to handle my errors hierarchically
[07:48:53] *** Quits: tav_ (tav@moz-fs0s4r.range31-52.btcentralplus.com) (Connection closed)
[07:49:22] <ville> Layl: you could always install a VM
[07:49:32] *** Quits: lenstr (lenstr@moz-s8k.vju.25.171.IP) (Quit: Leaving...)
[07:49:49] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:49:52] <Layl> ville, I rather not work through a VM all day
[07:50:06] <mindtree> soma: yes, but the internal type has to be dynamically allocated (either Boxed, in a Vec, etc)
[07:50:09] <ville> Layl: rather meant if you were curious enough to see what it was like
[07:50:18] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[07:51:14] <soma> mindtree: thank you. is there any examples I can follwo?
[07:52:01] *** Quits: Temur (Tarmashirin@moz-dp1.lkp.221.117.IP) (Ping timeout: 121 seconds)
[07:52:11] <mindtree> soma: enum Foo { Bar(f32), Foo(Box<Foo>) }
[07:52:25] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[07:52:28] *** Joins: xav (xav@moz-5tfec1.mobi)
[07:52:44] <mindtree> soma: I'm not sure there are any tutes/examples on using enums as trees specifically
[07:52:47] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[07:53:48] <Layl> I still can't quite wrap my head around the borrowing syntax
[07:54:05] <Layl> it doesn't help that it's smushed against the generics syntax
[07:54:36] <reem> is Vec::write the same as Vec::push_all used to be?
[07:54:36] *** Quits: Kxepal (Miranda@moz-vu2q70.pppoe.mtu-net.ru) (Connection closed)
[07:54:47] <Skyler> Layl: the reasoning is that lifetimes can be generic, just like types
[07:55:06] <huon> reem: for T = u8
[07:55:13] <reem> ah, yes
[07:55:23] <erani> hmm, I'm trying to implement my custom reader that should inherit a BufReader and it's methods. how can I do that? when I implement a trait for a struct for example, I have to redefine all the methods?
[07:55:48] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[07:56:49] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Ping timeout: 121 seconds)
[07:57:40] <bluss> erani: there is a trait called BufRead, it only has 2 required methods
[07:59:29] *** Quits: dstrbad (dstrbad@moz-f4gkm2.net.t-com.hr) (A TLS packet with unexpected length was received.)
[07:59:40] *** Joins: Kxepal (Miranda@moz-u3tmbo.pppoe.mtu-net.ru)
[08:00:03] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[08:00:12] *** Joins: Temur (Tarmashirin@moz-dp1.lkp.221.117.IP)
[08:00:57] <erani> hmm, is it the (inner: R) that indicates that it's a required method?
[08:01:17] *** Joins: tcard (tcard@moz-5eb1g3.staticIP.rima-tde.net)
[08:01:47] *** Joins: jasonrm (jasonrm@moz-m96h5m.ph.cox.net)
[08:01:47] *** Quits: loyd (loyd@moz-uft.32f.108.213.IP) (Ping timeout: 121 seconds)
[08:01:47] <erani> ah, no. I was looking at BufReader, sorry
[08:02:13] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[08:02:55] *** Quits: KLP (KLP@moz-qdcjho.res.rr.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[08:04:09] *** Quits: Temur (Tarmashirin@moz-dp1.lkp.221.117.IP) (Quit: Leaving)
[08:04:10] *** Joins: dstrbad (dstrbad@moz-f4gkm2.net.t-com.hr)
[08:04:37] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[08:04:40] *** Quits: kalail (uid62296@moz-5ck9vu.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[08:05:18] *** Joins: debuuu (debuuu@moz-pt8.ma2.149.80.IP)
[08:05:42] *** Joins: kmicu (kmicu@moz-uga.edn.218.91.IP)
[08:05:52] *** Joins: shahn (Sebastian@moz-qmgakf.sebastianhahn.net)
[08:06:11] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Ping timeout: 121 seconds)
[08:06:52] *** Joins: playjax (chatzilla@moz-haj81n.optusnet.com.au)
[08:07:00] *** Quits: dstrbad (dstrbad@moz-f4gkm2.net.t-com.hr) (A TLS packet with unexpected length was received.)
[08:07:08] <Layl> A feature I really love of rust is that you can impl new member functions that aren't friends of the struct you're implementing for
[08:07:15] <Layl> so you can't access anything private
[08:07:26] *** Joins: laumann (thomas@moz-3v9.hq0.225.130.IP)
[08:07:39] <Layl> you get all of the improved encapsulation without any of the feeling of wrongness of entirely separate functions
[08:07:51] *** Joins: areski (areski@moz-tijh72.user.ono.com)
[08:07:58] *** Quits: pakupaku (pl@moz-jse.is7.143.79.IP) (Ping timeout: 121 seconds)
[08:07:58] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[08:09:10] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[08:09:29] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[08:09:41] <erani> yeah, seems nice
[08:09:53] *** Joins: doener (doener@moz-929cn9.unity-media.net)
[08:10:12] <erani> although I hit the wall too many times when google keeps pointing me to old versions of rust documentation
[08:10:24] <Layl> erani, just remove the version from the URL
[08:10:30] <Layl> then you get the latest docs version
[08:10:54] <mindtree> Layl: he might be talking about the old MIT docs that have been around for ages
[08:10:56] <erani> yeah. but it's... it's... it's not as convenient as it could be :D
[08:11:01] <mindtree> he/she*
[08:11:11] <mindtree> they*
[08:11:12] *** Joins: munksgaard (munksgaard@moz-vj4.hq0.225.130.IP)
[08:11:19] <Layl> give google some time to adapt and it will all fall back into place
[08:11:40] *** Joins: dstrbad (dstrbad@moz-f4gkm2.net.t-com.hr)
[08:11:51] *** Joins: laumann_ (thomas@moz-3v9.hq0.225.130.IP)
[08:11:54] *** Joins: Temur (Tarmashirin@moz-dp1.lkp.221.117.IP)
[08:12:21] *** Joins: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com)
[08:12:36] *** Quits: tcard (tcard@moz-5eb1g3.staticIP.rima-tde.net) (Client exited)
[08:13:00] *** Quits: Temur (Tarmashirin@moz-dp1.lkp.221.117.IP) (Quit: Leaving)
[08:14:13] *** Joins: Guest63 (textual@moz-qfs.570.70.83.IP)
[08:14:14] *** Joins: tav_ (tav@moz-imfu2d.range86-161.btcentralplus.com)
[08:15:51] *** Joins: mjboa (mike@moz-gfdglf.hsi06.unitymediagroup.de)
[08:16:45] *** Joins: turtil (turtil@moz-8am.857.98.121.IP)
[08:17:45] *** Quits: v213 (vee@moz-ti6.bqs.204.223.IP) (Ping timeout: 121 seconds)
[08:17:53] *** Joins: jviereck (Adium@moz-iqlcgt.ethz.ch)
[08:18:23] *** Joins: shellac (textual@moz-9b49cr.cable.virginm.net)
[08:18:40] *** Quits: mzabaluev (Thunderbird@moz-3bijqs.bb.dnainternet.fi) (Ping timeout: 121 seconds)
[08:19:45] *** Quits: jviereck (Adium@moz-iqlcgt.ethz.ch) (Quit: Leaving.)
[08:20:04] *** Joins: mahdi (mahdi@moz-8oo.182.244.151.IP)
[08:21:13] *** Joins: marcusklaas (marcus@moz-14bm7d.upc-g.chello.nl)
[08:21:13] *** Joins: jviereck (Adium@moz-iqlcgt.ethz.ch)
[08:21:28] *** Quits: Ms2ger (Ms2ger@moz-m2p.r4q.180.91.IP) (Ping timeout: 121 seconds)
[08:21:30] *** Joins: pakupaku (pl@moz-jse.is7.143.79.IP)
[08:21:55] *** Joins: nico (nico@moz-lkua9r.dip0.t-ipconnect.de)
[08:22:25] *** Joins: tcard (tcard@moz-5eb1g3.staticIP.rima-tde.net)
[08:22:51] <marcusklaas> What happened to the write_le_uxx methods on Writer? How is this done with the new Write trait?
[08:23:20] *** Quits: dstrbad (dstrbad@moz-f4gkm2.net.t-com.hr) (A TLS packet with unexpected length was received.)
[08:24:01] <bluss> marcusklaas: not provided by libstd anymore, see the byteorder crate
[08:24:06] *** Quits: mahdi (mahdi@moz-8oo.182.244.151.IP) (Ping timeout: 121 seconds)
[08:24:06] <TeXitoi> bstrie: yep?
[08:24:13] <marcusklaas> thanks, bluss!
[08:24:17] *** Joins: mkpankov` (mkpankov@moz-2j8.jvq.149.83.IP)
[08:24:31] *** Quits: tcard (tcard@moz-5eb1g3.staticIP.rima-tde.net) (Client exited)
[08:26:08] *** Quits: mkpankov (mkpankov@moz-4i9.3mh.23.84.IP) (Ping timeout: 121 seconds)
[08:28:21] *** Quits: aawe (aawe@moz-ft6k8a.me) (A TLS packet with unexpected length was received.)
[08:28:25] *** Joins: ellinokon (ellinokon@moz-gh5.r2h.62.178.IP)
[08:28:45] *** Joins: aawe (aawe@moz-ft6k8a.me)
[08:29:11] *** Quits: ascarter (ascarter@moz-705hf8.wa.comcast.net) (Ping timeout: 121 seconds)
[08:29:27] *** Quits: aawe (aawe@moz-ft6k8a.me) (A TLS packet with unexpected length was received.)
[08:30:25] *** Quits: rbranson (rbranson@moz-ga0.9o0.201.199.IP) (Ping timeout: 121 seconds)
[08:31:04] *** Joins: ekiwi (kevin@moz-5k3svi.eduroam.rwth-aachen.de)
[08:32:14] *** Joins: bjz (bjz@moz-pl4g2k.tpgi.com.au)
[08:32:23] *** Joins: Tuba (Tobba@moz-6oh.7ki.21.217.IP)
[08:33:17] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[08:33:38] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[08:33:57] *** Quits: jviereck (Adium@moz-iqlcgt.ethz.ch) (Quit: Leaving.)
[08:34:31] *** Joins: kushal (kdas@moz-so4.f0d.244.121.IP)
[08:35:23] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[08:36:44] *** Joins: v213 (vee@moz-u71.k8t.230.49.IP)
[08:36:46] *** Quits: DemonOne (Avi@moz-h20h51.cablep.bezeqint.net) (Ping timeout: 121 seconds)
[08:37:15] *** Joins: mkoskar (mkoskar@moz-ib8bp9.us.unmetered.com)
[08:38:14] <Layl> Say I've got 2 representations of a set of data, one tree and one flat list, the data actually is in the flat list but the tree is also needed in some cases, how can I make both structures of the data available without having duplicates or re-constructing the tree every time it's needed instead of the list
[08:38:21] *** Quits: Shackra (Jorge@moz-7bh.ng6.177.186.IP) (Ping timeout: 121 seconds)
[08:38:43] <soma> Hello! I have two submodules importing each other. How can I make it work?
[08:38:55] *** Joins: Shackra (Jorge@moz-7bh.ng6.177.186.IP)
[08:38:58] <Layl> basically can I temporarily suspend all the borrows in the tree, then re-enable them once they're needed
[08:39:15] *** Joins: Temur (Tarmashirin@moz-dp1.lkp.221.117.IP)
[08:39:32] *** Joins: jviereck (Adium@moz-iqlcgt.ethz.ch)
[08:39:37] <Layl> soma, "use modulea;" "use moduleb;" ?
[08:39:50] <Dabo> ^ no reason that wouldn't work
[08:39:58] *** Quits: Temur (Tarmashirin@moz-dp1.lkp.221.117.IP) (Quit: Leaving)
[08:40:17] <Dabo> `mod moda { use modb; ... } mod modb { use moda; ... }`
[08:40:20] <Layl> unless you're importing like this: "mod modulea;" "mod moduleb;" in which case, don't do that
[08:40:52] *** Joins: gonzaloserrano (Adium@moz-1nv.3t7.97.62.IP)
[08:41:07] *** Joins: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th)
[08:41:41] *** Quits: khades1 (Thunderbird@moz-ual.b31.186.31.IP) (Ping timeout: 121 seconds)
[08:41:41] *** Joins: frankmcsherry (frankmcsher@moz-i3sjud.dynamic.kabel-deutschland.de)
[08:42:04] <Layl> I friggin love rust's modules so much over C++'s includes
[08:42:06] *** Joins: nwin (textual@moz-03iocj.pools.vodafone-ip.de)
[08:43:08] *** Quits: silven (quassel@moz-0roor3.priv.bahnhof.se) (Ping timeout: 121 seconds)
[08:45:58] <nwin> what is the replacement of derive(FromPrimitive)?
[08:46:01] *** Joins: mkurkov (mk@moz-7tl.thh.9.195.IP)
[08:46:26] *** Quits: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[08:47:59] *** Joins: rbranson (rbranson@moz-ga0.9o0.201.199.IP)
[08:49:47] *** Joins: qwerty_nor (Thunderbird@moz-vuo.d5a.248.5.IP)
[08:49:50] *** Joins: espadrine (tyl@moz-qfr4fg.abo.wanadoo.fr)
[08:49:59] *** Joins: cholcombe (chris@moz-k0ajnr.i01-5.onvol.net)
[08:51:14] <bstrie> TeXitoi: the internet told me to yell at you https://www.reddit.com/r/programming/comments/3462c5/a_rust_contributor_tries_their_hand_at_go/cqs13mm
[08:53:30] *** Quits: rbranson (rbranson@moz-ga0.9o0.201.199.IP) (Quit: Computer has gone to sleep.)
[08:53:44] *** Joins: rbranson (rbranson@moz-ga0.9o0.201.199.IP)
[08:54:12] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[08:55:07] *** Joins: laparca (laparca@moz-rgcs06.mgob.kh00.0488.2a01.IP)
[08:55:38] *** Quits: tno (tomas@moz-12jfmn.7pm2.so41.08a0.2001.IP) (Connection closed)
[08:56:12] *** Quits: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th) (Connection closed)
[08:56:57] *** Joins: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th)
[08:57:33] *** Quits: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th) (Connection closed)
[08:57:42] <simias> lto can actually speed up the program though
[08:57:43] *** Joins: edlothiol (user@moz-chhfor.hsi02.unitymediagroup.de)
[08:57:48] <simias> by inlining function calls
[08:58:05] <simias> I think?
[08:58:17] <simias> I always assumed it did that but now that I think about it maybe it doesn't
[08:58:18] *** Joins: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th)
[08:58:22] *** Quits: dhole (dhole@moz-ocmb1k.dynamic.jazztel.es) (Quit: WeeChat 0.4.2)
[08:58:32] *** Joins: dhole (dhole@moz-ocmb1k.dynamic.jazztel.es)
[08:58:48] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[09:00:03] *** Quits: mystal (mystal@moz-tt1.co9.14.76.IP) (Ping timeout: 121 seconds)
[09:00:05] *** Joins: Tobba_ (Tobba@moz-6oh.7ki.21.217.IP)
[09:00:30] *** Quits: dhole (dhole@moz-ocmb1k.dynamic.jazztel.es) (Quit: WeeChat 0.4.2)
[09:00:38] *** Joins: dhole (dhole@moz-ocmb1k.dynamic.jazztel.es)
[09:00:50] *** Quits: rouma (zack@moz-2rnd3r.pekn.hg8m.2000.2604.IP) (Ping timeout: 121 seconds)
[09:00:55] *** Joins: _petr``` (petr@moz-2pi.7q8.248.178.IP)
[09:01:46] *** Quits: druzac (druzac@moz-hn17us.vc.shawcable.net) (Ping timeout: 121 seconds)
[09:01:48] *** Quits: rbranson (rbranson@moz-ga0.9o0.201.199.IP) (Ping timeout: 121 seconds)
[09:02:00] *** Quits: Tuba (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[09:02:19] *** Joins: oberstet (quassel@moz-nhqglr.dynamic.mnet-online.de)
[09:02:23] *** Quits: anty (anty@moz-5706pr.rbg.tum.de) (A TLS packet with unexpected length was received.)
[09:02:43] *** Quits: cholcombe (chris@moz-k0ajnr.i01-5.onvol.net) (Ping timeout: 121 seconds)
[09:02:57] *** Joins: mahdi (mahdi@moz-ipf.n3s.129.78.IP)
[09:03:16] <TeXitoi> bstrie: thanks
[09:03:56] *** Quits: spastorino (sid27384@moz-2ij.vkt.184.192.IP) (Ping timeout: 121 seconds)
[09:03:58] *** Quits: carllerche (sid50851@moz-2ij.vkt.184.192.IP) (Ping timeout: 121 seconds)
[09:04:07] *** Quits: jvns (sid26231@moz-2ij.vkt.184.192.IP) (Ping timeout: 121 seconds)
[09:04:17] *** Quits: alphonse23 (sid34238@moz-2ij.vkt.184.192.IP) (Ping timeout: 121 seconds)
[09:04:22] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (Quit: Leaving)
[09:04:24] <bstrie> TeXitoi: are you our official representative for the benchmarks game? :)
[09:05:11] *** Joins: jvns (sid26231@moz-p7mvuh.brockwell.irccloud.com)
[09:05:14] *** Quits: dhole (dhole@moz-ocmb1k.dynamic.jazztel.es) (Quit: WeeChat 0.4.2)
[09:05:17] *** Joins: cholcombe (chris@moz-640.as4.71.80.IP)
[09:05:21] *** Joins: dhole (dhole@moz-ocmb1k.dynamic.jazztel.es)
[09:05:38] *** Joins: alphonse23 (sid34238@moz-rhoj7i.brockwell.irccloud.com)
[09:05:39] *** Joins: carllerche (sid50851@moz-8i75uq.brockwell.irccloud.com)
[09:05:42] *** Joins: spastorino (sid27384@moz-i6sgse.brockwell.irccloud.com)
[09:05:48] *** Joins: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net)
[09:06:05] <cholcombe> rust: i'm a newb to the language and I'm trying to figure out how to create a extern declaration for: typedef void *rados_t;
[09:06:39] <cholcombe> does anyone know how to declare that?
[09:08:25] <TeXitoi> bstrie: rust implementation of the benchmarks game, more or less
[09:08:57] <TeXitoi> I submit the actual implementations
[09:10:05] <Layl> cholcombe, I'm not sure what you're trying to do
[09:10:22] <cholcombe> Layl, i'm trying to call librados (a ceph library) from rust
[09:10:46] *** Joins: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP)
[09:10:49] <Layl> "typedef void *rados_t;" just creates a new type alias "raidos_t" for a void*
[09:10:51] <cholcombe> the rados_create2 function returns a *rados_t pointer
[09:10:56] <Layl> there's nothing extern about that
[09:10:59] <cholcombe> oh
[09:11:01] <cholcombe> :)
[09:11:07] <TeXitoi> see https://github.com/TeXitoi/benchmarksgame-rs and https://alioth.debian.org/tracker/index.php?group_id=100815&atid=413122
[09:11:09] *** Quits: laumann_ (thomas@moz-3v9.hq0.225.130.IP) (Quit: leaving)
[09:11:33] <mindtree> cholcombe: you can read up about ffi here if you like http://blog.rust-lang.org/2015/04/24/Rust-Once-Run-Everywhere.html
[09:11:51] <cholcombe> Layl, when I try to compile it complains it doesn't know what rados_t is
[09:12:18] <cholcombe> mindtree, yeah I'm trying to walk through the ffi tutorial also
[09:12:21] *** Joins: asQuirreL (asQuirreL@moz-ro1qqu.ox.ac.uk)
[09:12:23] <Layl> cholcombe, well you need to actually define it in rust
[09:12:37] <cholcombe> with a struct?
[09:12:46] *** Joins: mystal (mystal@moz-tt1.co9.14.76.IP)
[09:12:51] <Layl> perhaps you should first get more used to rust itself before going for FFI
[09:12:55] <cholcombe> haha
[09:12:58] *** Quits: MaxV (MaxV@moz-1nu.kln.167.83.IP) (Ping timeout: 121 seconds)
[09:13:01] <cholcombe> yeah this is a bad hello world program
[09:13:21] *** Parts: jviereck (Adium@moz-iqlcgt.ethz.ch) ()
[09:13:30] <Layl> you can use a struct in rust to make a typesafe pointer alias for ffi
[09:13:35] <Layl> "#[repr(C)] struct MonoAssembly;"
[09:13:40] *** Joins: gonzaloserrano1 (Adium@moz-1nv.3t7.97.62.IP)
[09:13:43] <Layl> snippet from some of my code
[09:14:04] *** Joins: anty (anty@moz-4763l0.vpn.lrz.de)
[09:14:10] <cholcombe> i guess it's just the void* that's tripping me up
[09:14:19] <Layl> then to have a ffi function that returns that pointer: "fn foo() -> *const MonoAssembly;"
[09:14:26] *** Quits: gonzaloserrano (Adium@moz-1nv.3t7.97.62.IP) (Ping timeout: 121 seconds)
[09:14:27] <cholcombe> interesting
[09:15:03] <mindtree> cholcombe: there's a `c_void` type in the `libc` crate
[09:15:11] <cholcombe> ah that might be helpful
[09:15:40] <Layl> I would REALLY advice you to start with something pure rust before going into ffi
[09:16:00] *** Joins: MaxV (MaxV@moz-1nu.kln.167.83.IP)
[09:16:02] <mindtree> nothing wrong with jumping in the deep end :-p
[09:16:14] *** Quits: firemole (Thunderbird@moz-ok750a.thorcom.com) (Client exited)
[09:16:21] *** Joins: CustosLimen (CustosLimen@moz-43o.etd.160.41.IP)
[09:16:25] <mindtree> except... that it's deep
[09:16:31] <cholcombe> :)
[09:16:40] <Layl> well, you might drown
[09:16:44] <cholcombe> it's hard for me to think up toy programs to try things out
[09:17:04] <Layl> write a befunge interpreter
[09:17:09] <mindtree> cholcombe: my first was a musical time and pitch calculator :-p
[09:17:13] <cholcombe> what is that?
[09:17:39] <Layl> it interprets befunge
[09:17:47] <cholcombe> heh
[09:17:51] * cholcombe googles befunge
[09:18:04] <mindtree> or a `LOLCODE` interpreter could be fun
[09:18:11] <cholcombe> wow
[09:18:18] <Layl> I would link a snippet, but I would get kicked for spamming too many lines
[09:19:04] <Layl> brainfuck interpreters are always fun as well
[09:19:10] <Layl> nice and simple way to start
[09:19:15] <cholcombe> :)
[09:19:19] <Layl> I made one that has threading support
[09:19:25] <Layl> with no synchronization mechanisms
[09:19:52] *** Quits: debuuu (debuuu@moz-pt8.ma2.149.80.IP) (Ping timeout: 121 seconds)
[09:20:15] *** Joins: khades (Thunderbird@moz-u45.3vk.74.212.IP)
[09:20:17] *** Joins: Temur (Tarmashirin@moz-dp1.lkp.221.117.IP)
[09:20:26] *** Quits: dmac (dmac@moz-2ig65r.ca.comcast.net) (Connection closed)
[09:21:19] *** Quits: Temur (Tarmashirin@moz-dp1.lkp.221.117.IP) (Quit: Leaving)
[09:21:29] *** Joins: debuuu (debuuu@moz-pt8.ma2.149.80.IP)
[09:21:47] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[09:23:28] *** Quits: pakupaku (pl@moz-jse.is7.143.79.IP) (Ping timeout: 121 seconds)
[09:23:31] <soma> Hello! when I do cycle import, I get " unresolved import:  src/identifier.rs:3 use error::*;   unresolved import:  src/error.rs:6 use identifier::Identifier;"  What's wrong?
[09:24:36] *** Quits: Shackra (Jorge@moz-7bh.ng6.177.186.IP) (Connection closed)
[09:25:55] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[09:27:19] *** Joins: firemole (Thunderbird@moz-ok750a.thorcom.com)
[09:28:41] <kimundi> soma: cyclic imports are buggy. In cases like yours, the compiler just starts forgetting imported things as long as the cycle exists
[09:29:08] <soma> kimundi: thank you. so what can I do?
[09:29:32] <Layl> soma, don't use a "pub use" and instead use a "use" without a "pub", if I'm understanding the problem right
[09:29:40] <kimundi> don't use ::* imports
[09:29:50] <Layl> ah, nevermind me
[09:30:02] <kimundi> it should work if you list the things manually that conflict
[09:30:07] *** Joins: DerisiveLogic (smuxi@moz-lok4tg.dyn.optonline.net)
[09:30:19] <mindtree> ++, avoid glob imports in general if you can
[09:30:37] <Layl> aw I like glob imports
[09:30:55] * mindtree tut tuts
[09:32:16] <Layl> I'm still gonna use my "pub use module::*;" for restricting privates from implementations
[09:34:14] *** Joins: jviereck (Adium@moz-5b4qom.97ug.g469.067c.2001.IP)
[09:35:10] *** Quits: soma (Mibbit@moz-ef5.7ab.191.107.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:36:33] *** Joins: BRMatt (sid20386@moz-tflltn.ealing.irccloud.com)
[09:36:37] *** Joins: errordeveloper (ilya@moz-8jq.ge6.157.37.IP)
[09:40:40] *** Quits: mkurkov (mk@moz-7tl.thh.9.195.IP) (A TLS packet with unexpected length was received.)
[09:43:39] *** Quits: areski (areski@moz-tijh72.user.ono.com) (Ping timeout: 121 seconds)
[09:43:39] *** Joins: mkpankov (user@moz-h0n.sma.198.91.IP)
[09:44:27] *** Joins: dhole_ (dhole@moz-i3f09k.dynamic.jazztel.es)
[09:44:45] *** Quits: dhole (dhole@moz-ocmb1k.dynamic.jazztel.es) (Connection closed)
[09:44:48] *** Joins: yutoo (Mibbit@moz-fs24b1.unh.edu)
[09:46:43] *** Quits: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[09:47:03] *** kimundi is now known as zz_kimundi
[09:47:34] *** Joins: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net)
[09:47:38] *** Joins: Altazimuth_ (Altazimuth@moz-rb7u6p.skybroadband.com)
[09:48:21] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[09:49:16] *** Joins: timonv (timonv@moz-7btgcn.dynamic.ziggo.nl)
[09:50:04] <cholcombe> with the 1.0.0 beta of rust extern crate libc; is triggering a bunch of errors about using unstable features
[09:50:20] *** Joins: sayan (sayan@moz-so4.f0d.244.121.IP)
[09:50:35] *** Quits: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th) (Ping timeout: 121 seconds)
[09:51:08] <bluss> yes you need to use libc from crates.io with the beta
[09:52:01] <cholcombe> i see
[09:52:12] <cholcombe> so i need to use crate to build then instead of rustc :)
[09:52:18] *** Quits: nyuszika7h (nyuszika7h@cadoth.net) (Connection closed)
[09:52:27] *** Joins: loyd (loyd@moz-uft.32f.108.213.IP)
[09:52:36] *** Joins: nyuszika7h (nyuszika7h@cadoth.net)
[09:52:56] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[09:53:12] <bluss> cargo yeah
[09:53:21] <bluss> but cargo is great
[09:54:42] <tomaka> if you're not using cargo, use it!
[09:55:00] *** Quits: jviereck (Adium@moz-5b4qom.97ug.g469.067c.2001.IP) (Quit: Leaving.)
[09:55:05] <cholcombe> cool i start :)
[09:55:08] <Layl> it's one of the first steps in the rust guide to use cargo
[09:55:12] <Layl> it's really nice
[09:55:48] *** Quits: _ixti_ (ixti@moz-i3d.dae.119.188.IP) (Ping timeout: 121 seconds)
[09:56:11] *** Joins: jviereck (Adium@moz-iqlcgt.ethz.ch)
[09:56:12] <bluss> see, everyone's already a fanatic here
[09:56:55] <yutoo> std::mem::sizeof::<*const str>() returns 16. Is there something I'm not understanding about pointers/references to str?
[09:56:55] *** Quits: jviereck (Adium@moz-iqlcgt.ethz.ch) (Quit: Leaving.)
[09:57:17] <bluss> str is a "DST" so &str and *const str are fat pointers
[09:57:28] <bluss> it is both a pointer and information about the length of the string slice
[09:57:32] *** Quits: Tobba_ (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[09:57:47] <bluss> DST = dynamically sized type
[09:58:20] <bluss> playbot: std::mem::sizeof::<&'static str>()
[09:58:21] -playbot- <anon>:9:9: 9:41 error: unresolved name `std::mem::sizeof`
[09:58:21] -playbot- <anon>:9         std::mem::sizeof::<&'static str>()
[09:58:21] -playbot- output truncated; full output at: http://bit.ly/1J86AJI
[09:58:24] <terpstra> yutoo, clearly your system has 8-byte pointers (64-bit)
[09:58:25] <tomaka> you shouldn't give a *const str to a C library
[09:58:26] <bluss> playbot: std::mem::size_of::<&'static str>()
[09:58:27] -playbot- 16
[09:59:33] <tomaka> playbot: let ptr: (u64, u64) = unsafe { std::mem::transmute("hello world") }; ptr
[09:59:34] -playbot- (140317624775425, 11)
[09:59:40] <tomaka> 11 is the length of "hello world"
[09:59:53] <marcusklaas> How does one emulate the old Reader::push_at_least behaviour without excessive copying?
[09:59:54] <tomaka> and 14031something is the addres
[10:01:01] <Layl> Rust strings aren't C strings
[10:01:08] <Layl> they're not null terminated
[10:01:19] <Layl> use CString instead if you need to pass a string to a C library
[10:01:20] *** Quits: DerisiveLogic (smuxi@moz-lok4tg.dyn.optonline.net) (Ping timeout: 121 seconds)
[10:02:02] <yutoo> Interesting info, thanks everyone!
[10:03:02] <bluss> marcusklaas: you don't need any extra copying to emulate it
[10:03:07] *** Joins: Temur (Tarmashirin@moz-dp1.lkp.221.117.IP)
[10:03:13] *** Joins: KLP (KLP@moz-qdcjho.res.rr.com)
[10:03:35] *** Joins: kieran (kieran@moz-c5gk5j.ihug.co.nz)
[10:03:46] *** Quits: Temur (Tarmashirin@moz-dp1.lkp.221.117.IP) (Connection closed)
[10:04:28] *** Joins: mdibaiee (mahdi@moz-8oo.182.244.151.IP)
[10:04:38] *** Quits: KLP (KLP@moz-qdcjho.res.rr.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[10:04:42] *** Quits: mahdi (mahdi@moz-ipf.n3s.129.78.IP) (Ping timeout: 121 seconds)
[10:04:50] *** Quits: Layl (Mibbit@moz-iachg4.sdb.prolocation.net) (Quit: http://www.mibbit.com ajax IRC Client)
[10:05:01] *** Quits: kieran (kieran@moz-c5gk5j.ihug.co.nz) (Quit: leaving)
[10:05:08] <marcusklaas> bluss: no? The naive strategy would be to read into a Vec and then push that onto the buffer you want to append, but that's an extra copy...
[10:05:09] *** Quits: ray (ray@moz-jue.t3f.66.59.IP) (Ping timeout: 121 seconds)
[10:05:48] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[10:05:55] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[10:06:04] <bluss> you can combine .take() and .read_to_end to get it to read up to a specific number of bytes
[10:06:19] *** Joins: futile (felix@moz-cmcd12.unity-media.net)
[10:06:56] *** Quits: Guest63 (textual@moz-qfs.570.70.83.IP) (Ping timeout: 121 seconds)
[10:07:14] <marcusklaas> but the problem is that push_at_least appended a vector and read_to_end writes to a buffer
[10:07:28] <marcusklaas> or am I misunderstanding things :o
[10:07:45] <bluss> read_to_end appends to a vector to
[10:07:52] <bluss> playbot: use std::io::Read; let mut data: &[u8] = &[1u8; 256]; let mut v = vec![];  let ret = data.by_ref().take(8).read_to_end(&mut v); (ret, v)
[10:07:54] -playbot- (Ok(8), [1, 1, 1, 1, 1, 1, 1, 1])
[10:08:07] *** Quits: iotku (ayy@moz-qgf.1im.244.104.IP) (Ping timeout: 121 seconds)
[10:08:08] *** Quits: pigoz (pigoz@moz-77u.lvo.242.94.IP) (Ping timeout: 121 seconds)
[10:08:30] <bluss> that's not exactly what push_at_least did, it doesn't have the check for the "at least" part
[10:08:42] <marcusklaas> right, but that I can figure out ;-)
[10:08:47] <marcusklaas> I have seen the light :-)
[10:08:49] <marcusklaas> thanks once again, bluss
[10:08:54] <marcusklaas> much appreciated!
[10:08:55] *** Joins: Temur (Tarmashirin@moz-dp1.lkp.221.117.IP)
[10:09:15] *** Quits: Temur (Tarmashirin@moz-dp1.lkp.221.117.IP) (Connection closed)
[10:09:23] <bluss> fantastic. It's sunny here too :P
[10:12:21] *** Quits: mdibaiee (mahdi@moz-8oo.182.244.151.IP) (Ping timeout: 121 seconds)
[10:12:22] <p1start> Are `static`s known as constants or variables?
[10:12:22] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[10:12:39] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[10:13:15] *** Joins: pigoz (pigoz@moz-77u.lvo.242.94.IP)
[10:13:29] *** Joins: iotku (ayy@moz-qgf.1im.244.104.IP)
[10:13:32] *** Quits: anty (anty@moz-4763l0.vpn.lrz.de) (Ping timeout: 121 seconds)
[10:13:42] *** Quits: nrc (nrc@moz-9v1svd.xtra.co.nz) (Ping timeout: 121 seconds)
[10:13:49] <p1start> I think they’re constants
[10:14:03] <WindowsBunny> p1start: `const`s are constants
[10:14:15] <p1start> WindowsBunny: Yeah, but are `static`s too, technically speaking?
[10:14:19] <WindowsBunny> p1start: while `static`s are merely global variables
[10:14:30] <p1start> `const` is just a particular keyword used in Rust’s syntax
[10:14:36] <p1start> WindowsBunny: There’s nothing variable about a static
[10:14:37] <WindowsBunny> statics have an address, const do not
[10:14:41] <WindowsBunny> statics can be mutated
[10:14:51] <p1start> WindowsBunny: You can have mutable constants (I think)
[10:14:57] <p1start> Just like how immutable variables exist
[10:15:00] <p1start> (I think, again)
[10:15:01] <WindowsBunny> a non-mut static can be mutated using interior mutability
[10:15:05] <WindowsBunny> but a const cannot be mutated
[10:15:24] <bluss> you can't reference a const
[10:15:29] <p1start> Interior mutability is an edge case
[10:15:33] <huon> p1start: statics are global memory locations, that may or may not be mutable
[10:15:42] <huon> p1start: for a static it isn't an edge case
[10:15:43] *** Quits: bjz (bjz@moz-pl4g2k.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[10:15:44] <p1start> bluss: You can, I think, but it makes an intermediate static
[10:15:50] <bluss> is static mut stable?
[10:15:53] *** Joins: areski (areski@moz-erfa2b.dynamicIP.rima-tde.net)
[10:15:54] <p1start> bluss: Yes
[10:16:06] <p1start> Never been unstable as far as I know
[10:16:48] *** Joins: Titi_Alone (bzlandfill@moz-9sb9ge.abo.wanadoo.fr)
[10:17:09] *** Quits: v213 (vee@moz-u71.k8t.230.49.IP) (Ping timeout: 121 seconds)
[10:17:09] *** Quits: Titi_Alone (bzlandfill@moz-9sb9ge.abo.wanadoo.fr) (Quit: CGI:IRC (EOF))
[10:17:49] *** Joins: bjz (bjz@moz-pl4g2k.tpgi.com.au)
[10:17:57] <bluss> thread local storage are implemented using a static with interior mutability
[10:18:02] *** Quits: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP) (Connection closed)
[10:18:18] <huon> statics are inherently shared, so everything goes via interior mutability
[10:18:41] <bluss> p1start: I know eddyb__ wanted to remove static mut
[10:21:52] *** Quits: bjz (bjz@moz-pl4g2k.tpgi.com.au) (Ping timeout: 121 seconds)
[10:21:56] *** Joins: mdibaiee (mahdi@moz-ipf.n3s.129.78.IP)
[10:22:27] *** Joins: rbrs (rbrs@moz-m5thmg.static.zebra.lt)
[10:22:31] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[10:22:46] *** Joins: Tobba_ (Tobba@moz-6oh.7ki.21.217.IP)
[10:23:22] <p1start> As I understand it, a constant is basically a value that always has the same memory address. By that definition, `const` sort of isn’t a constant and is more of a macro
[10:25:06] *** Quits: kushal (kdas@moz-so4.f0d.244.121.IP) (Quit: Leaving)
[10:25:22] <huon> what's the context for the word 'constant' in this case? it's certainly not how it's used in Rust (since that just follows the keywords)
[10:25:31] <cholcombe> Layl, i got it to build+link :)
[10:25:42] <p1start> huon: Stolen from various StackOverflow answers :P
[10:25:50] <p1start> Mostly talking about Java TBH
[10:25:50] <bluss> http://doc.rust-lang.org/reference.html#constant-items
[10:26:04] <bluss> the reference explains const and static really well
[10:26:09] <p1start> I get the feeling there isn’t really a universal meaning of ‘constant’
[10:26:13] <huon> p1start: right; different language, different naming scheme :)
[10:26:26] *** Joins: eligreen (eli@moz-l01pmj.develer.net)
[10:26:35] <kali> and don't even consider "static"
[10:26:38] <p1start> I’d still call an immutable static a kind of constant
[10:26:39] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[10:26:50] *** Quits: loyd (loyd@moz-uft.32f.108.213.IP) (Ping timeout: 121 seconds)
[10:27:13] *** Joins: ismaelga (ismaelga@moz-rjm.jv4.251.188.IP)
[10:27:22] <VShell> p1start: I sorta feel that Rust derives its const concept from C preprocessor constants more than the definition in other languages.
[10:27:51] <bluss> in C, a "constant" is 0, 12, etc. integer literals.
[10:27:52] <VShell> and an immutable static is... an immutable static. >.>
[10:28:19] <VShell> bluss: I mean #defines.
[10:28:26] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Ping timeout: 121 seconds)
[10:28:37] *** Joins: Naeblis (Naeblis@moz-a8t.cm0.85.95.IP)
[10:29:05] <bluss> just saying what the C language means by constant. It includes enums
[10:30:51] * VShell nods.
[10:31:03] *** Quits: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[10:31:09] <p1start> I think I must have stolen eddyb’s view on mutability/variability: https://www.reddit.com/r/rust/comments/2xe9gy/an_alternative_introduction_to_rust/cozrj97
[10:32:20] <eligreen> Hey all. I'm using std::fs::read_dir to traverse the filesystem but I don't want to do it recursively because I'm concerned about having too many file handles open. So I'm trying to use a Vec<Path> as a stack of places that I still need to visit.
[10:32:24] <eligreen> http://pastebin.com/a15ereY9
[10:32:29] <huon> meh, mathematics uses 'variable' everywhere to refer to immutable bindings
[10:32:33] *** Joins: Layl (Mibbit@moz-iachg4.sdb.prolocation.net)
[10:32:50] *** Quits: Kingsquee (kingsley@moz-qq7ns6.bchsia.telus.net) (Quit: Konversation terminated!)
[10:32:51] *** Joins: Gabriel_7 (Gabriel@moz-ma9qoj.mtgr.92aj.0e35.2a01.IP)
[10:33:09] <eligreen> Of course as a rust newbie what's tripping me up is the ownership. How can I copy the "path" object? It doesn't implement Clone, just ToOwned and ToOwned returns a PathBuf...
[10:33:29] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[10:33:44] <eligreen> (running 1.0.0.beta.3)
[10:34:22] *** Quits: frankmcsherry (frankmcsher@moz-i3sjud.dynamic.kabel-deutschland.de) (Connection closed)
[10:35:19] *** Quits: skade (skade@moz-4eh.d50.201.212.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[10:36:13] <p1start> huon: http://www.funiacs.com/poze/mare/noname8_1321438395.jpeg
[10:37:02] <p1start> eligreen: Path is like str
[10:37:26] <huon> p1start: that's just shadowing/redeclaration ;)
[10:37:29] *** Joins: v213 (vee@moz-gcs.bqs.204.223.IP)
[10:37:35] <p1start> Like str, you can’t have a bare Path – it needs to be behind a pointer, e.g., &Path
[10:37:45] *** Quits: cholcombe (chris@moz-640.as4.71.80.IP) (Ping timeout: 121 seconds)
[10:37:52] <VShell> eligreen: so, path there, as returned from DirEntry.path(), is a PathBuf. you own it, it's not a reference. PathBuf is probably the type you want to store in a Vec - &Path is a reference into a PathBuf, like &str is a reference into a String.
[10:38:43] <p1start> eligreen: Also like str, you can’t clone a &Path. You can only turn one into a PathBuf
[10:38:52] <p1start> str : String :: Path : PathBuf
[10:39:07] <p1start> … :: [T] : Vec<T>
[10:39:26] <VShell> eligreen: PathBuf implements Deref<T=Path>, so you can use it just like you would use a Path.
[10:40:02] *** Joins: loyd (loyd@moz-ce6.cua.228.94.IP)
[10:40:32] *** Joins: gandalf (zbraniecki@moz-l2c.vj1.31.12.IP)
[10:41:08] <eligreen> Ok, so I'm better off redeclaring the Vec as "let mut dirs : Vec<PathBuf> = Vec::new()"?
[10:41:33] *** Joins: agjacome (agjacome@moz-ma9sfa.dynamic.jazztel.es)
[10:42:11] *** Quits: v213 (vee@moz-gcs.bqs.204.223.IP) (Ping timeout: 121 seconds)
[10:42:11] *** Joins: Nextra (Nextra@moz-06j95o.osnanet.de)
[10:42:14] *** Quits: playjax (chatzilla@moz-haj81n.optusnet.com.au) (Connection closed)
[10:42:29] <VShell> eligreen: that sounds reasonable.
[10:42:30] <p1start> eligreen: (Also, instead of `while !dirs.is_empty() { let dir = ...; ... }`, you can do `while let Some(dir) = dirs.pop() { ... }`)
[10:42:31] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[10:43:21] <eligreen> VShell: That worked, thanks.
[10:43:26] <VShell> :D
[10:44:09] *** Quits: sonder (chatzilla@moz-nt8r49.idi.ntnu.no) (Ping timeout: 121 seconds)
[10:44:31] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[10:45:30] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[10:45:31] *** ChanServ sets mode: +o pnkfelix
[10:46:31] *** Quits: smarks_ (smarks@moz-jcb.eus.76.109.IP) (A TLS packet with unexpected length was received.)
[10:46:32] *** Joins: smarks (smarks@moz-jcb.eus.76.109.IP)
[10:46:38] *** Quits: egor-laufer (uid78368@moz-ptdej8.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[10:46:41] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[10:46:50] <eligreen> For the record, I did "let mut dirs = vec![PathBuf::from("/")];" after reading the PathBuf docs. :)
[10:47:05] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[10:47:11] <Enjolras> hi
[10:47:22] <Enjolras> is there a way to fork without using libc ?
[10:49:52] *** Quits: loyd (loyd@moz-ce6.cua.228.94.IP) (Ping timeout: 121 seconds)
[10:50:13] *** Joins: skade (skade@moz-4eh.d50.201.212.IP)
[10:51:49] *** Joins: thelastinuit (thelastinui@moz-doh.aqt.240.148.IP)
[10:52:22] *** Quits: WizardGed (WizardGed@moz-6q4ii8.d3hp.opad.5300.2607.IP) (Ping timeout: 121 seconds)
[10:52:55] *** Joins: Guest63 (textual@moz-qfs.570.70.83.IP)
[10:53:36] *** Joins: hoony (Thunderbird@moz-p1g.5l8.39.14.IP)
[10:54:36] *** Joins: _ixti_ (ixti@moz-i3d.dae.119.188.IP)
[10:55:10] *** Joins: ptalbot (ptalbot@moz-l1t9t8.fbx.proxad.net)
[10:55:16] *** Joins: v213 (vee@moz-sca.bqs.204.223.IP)
[10:56:22] *** Joins: proclus (user@moz-i6nqh2.fios.verizon.net)
[10:58:02] *** Joins: zcourts (zcourts@moz-7ms809.cable.virginm.net)
[10:58:48] *** Joins: sonder (chatzilla@moz-nt8r49.idi.ntnu.no)
[11:00:59] *** Joins: Hannibal_Smith (nico@moz-ucg29b.retail.telecomitalia.it)
[11:01:10] *** Quits: errordeveloper (ilya@moz-8jq.ge6.157.37.IP) (Ping timeout: 121 seconds)
[11:01:32] *** jandem is now known as jandem-away
[11:01:39] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[11:02:10] <VShell> Enjolras: I don't believe so. forking is hard to do safely, I'm not sure there's a reasonably safe interface you can provide on top of it to put in the standard library.
[11:02:16] *** Joins: DerisiveLogic (smuxi@moz-lok4tg.dyn.optonline.net)
[11:04:43] *** Joins: errordeveloper (ilya@moz-8jq.ge6.157.37.IP)
[11:05:39] *** Joins: bjz (bjz@moz-pl4g2k.tpgi.com.au)
[11:06:16] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[11:06:26] *** Quits: daschl (Adium@moz-oirn1i.vie.surfer.at) (Quit: Leaving.)
[11:06:33] *** Quits: proclus (user@moz-i6nqh2.fios.verizon.net) (Connection closed)
[11:06:34] *** Joins: proclus (user@moz-i6nqh2.fios.verizon.net)
[11:06:59] *** Quits: bjz (bjz@moz-pl4g2k.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[11:07:19] *** Quits: aholler (aholler@moz-0ftcn3.dip0.t-ipconnect.de) (Quit: leaving)
[11:08:18] *** Joins: Riastradh (riastradh@moz-qpd.aq7.187.37.IP)
[11:09:26] *** Quits: skade (skade@moz-4eh.d50.201.212.IP) (Quit: Textual IRC Client: www.textualapp.com)
[11:09:51] *** Joins: WizardGed (WizardGed@moz-6q4ii8.d3hp.opad.5300.2607.IP)
[11:10:50] *** Quits: turtil (turtil@moz-8am.857.98.121.IP) (Quit: WeeChat 1.1.1)
[11:11:58] *** Joins: meh (meh@moz-p5gc2m.42-151.net24.it)
[11:12:25] <Enjolras> VShell: it's just like threads or its safe if you don't have share mappings
[11:12:28] *** Joins: skade (skade@moz-4eh.d50.201.212.IP)
[11:14:04] *** Quits: mindtree (Mitch@moz-eifja8.iprimus.net.au) (Ping timeout: 121 seconds)
[11:14:57] <apoelstra> Enjolras: it messes up a lot of stuff, cf https://github.com/rust-lang/rust/issues/16799
[11:15:35] *** Joins: ytain (ytain@moz-ge9fgi.dsl.teksavvy.com)
[11:15:57] *** Quits: zyphrus (David@moz-nhi.pas.98.101.IP) (Quit: Bye bye)
[11:16:16] <Enjolras> it's a well known issue which can be worked around
[11:16:56] <apoelstra> did you read the comments?
[11:17:11] *** Quits: ismaelga (ismaelga@moz-rjm.jv4.251.188.IP) (Connection closed)
[11:17:11] <apoelstra> about why the rust devs refused to fix this "well known issue" despite it causing many CVEs in many programs?
[11:17:32] <apoelstra> if it were nbd it'd have been fixed..
[11:17:41] <Enjolras> the comment is outdated 
[11:18:37] <WindowsBunny> Rust was not designed to be fork safe
[11:18:52] <WindowsBunny> And Rust code is safely allowed to assume that forks don't occur
[11:18:58] *** Joins: Quanttek (quassel@moz-25k96c.6fkd.dvrb.8108.2a02.IP)
[11:19:03] *** Joins: ascarter (ascarter@moz-705hf8.wa.comcast.net)
[11:19:09] *** Quits: ekiwi (kevin@moz-5k3svi.eduroam.rwth-aachen.de) (Client exited)
[11:19:17] *** Joins: mindtree (Mitch@moz-e0s5tf.iprimus.net.au)
[11:19:31] *** Quits: Hannibal_Smith (nico@moz-ucg29b.retail.telecomitalia.it) (Connection closed)
[11:19:34] *** Quits: forgottenone (forgottenon@moz-7c3.s8g.45.92.IP) (Quit: Konversation terminated!)
[11:19:44] *** Quits: sysko (bst@moz-g9d.6sp.95.211.IP) (Ping timeout: 121 seconds)
[11:19:45] *** Joins: ismaelga (ismaelga@moz-rjm.jv4.251.188.IP)
[11:20:04] <WindowsBunny> Maybe some day someone will actually take the time to investigate how to make rust fork safe and write up a detailed RFC
[11:20:12] *** Joins: andre (andre@moz-rnd.3qv.76.201.IP)
[11:20:44] <Enjolras> The actual problem is that it cannot be made fork safe on all platforms
[11:20:57] <Enjolras> but in anycase i was just asking for a function in a stable api, even if unsafe
[11:21:55] <Enjolras> Btw, the comment saying forking is useless because rust threads can be used instead is not true
[11:22:02] <Enjolras> because of credentials
[11:22:52] <Enjolras> i'll check for the sandboxing lib someone wrote, maybe it has rpc to solve my issue
[11:23:16] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[11:23:19] *** Quits: ascarter (ascarter@moz-705hf8.wa.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[11:26:40] <terpstra> just a random question: does anyone here know a good *sequential* algorithm for list-ranking that has better locality than walking the list?
[11:26:59] *** Joins: indefini (chris@moz-alknce.ocn.ne.jp)
[11:27:23] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[11:29:15] *** Quits: mkpankov` (mkpankov@moz-2j8.jvq.149.83.IP) (Ping timeout: 121 seconds)
[11:29:22] *** Quits: gandalf (zbraniecki@moz-l2c.vj1.31.12.IP) (Ping timeout: 121 seconds)
[11:31:16] *** Quits: hoony (Thunderbird@moz-p1g.5l8.39.14.IP) (Ping timeout: 121 seconds)
[11:32:22] *** Joins: duncan (paul@moz-dst.ms6.225.173.IP)
[11:34:09] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Ping timeout: 121 seconds)
[11:35:48] *** Joins: mkpankov` (mkpankov@moz-2j8.jvq.149.83.IP)
[11:36:41] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[11:37:01] *** Joins: penguin42 (dg@moz-0v8anh.cable.virginm.net)
[11:37:33] *** Quits: sayan (sayan@moz-so4.f0d.244.121.IP) (Ping timeout: 121 seconds)
[11:38:14] <snow> Is there a reason Vec::reserve() tries to allocate a power of two number of elements?
[11:39:12] *** Joins: KallDrexx (KallDrexx@moz-4fqk30.dybhfl.sbcglobal.net)
[11:40:01] <bluss> Vec needs to grow exponentially to have good average complexity
[11:41:15] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[11:41:36] *** Joins: panicbit (panicbit@moz-r4ks4s.dip0.t-ipconnect.de)
[11:41:46] <snow> That makes sense. Thanks bluss
[11:42:39] *** Joins: sbanwart (IceChat9@moz-fouu55.kodak.com)
[11:43:03] *** Joins: hoony (Thunderbird@moz-p1g.5l8.39.14.IP)
[11:44:23] *** Joins: dstrbad (dstrbad@moz-3vd3ts.cable.xnet.hr)
[11:44:54] *** Joins: hoony1 (Thunderbird@moz-p1g.5l8.39.14.IP)
[11:44:58] *** Quits: hoony (Thunderbird@moz-p1g.5l8.39.14.IP) (Connection closed)
[11:45:17] *** Quits: gonzaloserrano1 (Adium@moz-1nv.3t7.97.62.IP) (Quit: Leaving.)
[11:46:32] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Ping timeout: 121 seconds)
[11:46:41] *** Quits: proclus (user@moz-i6nqh2.fios.verizon.net) (Quit: ERC Version 5.3 (IRC client for Emacs))
[11:47:10] *** Joins: Guest63_ (textual@moz-qfs.570.70.83.IP)
[11:48:11] *** Joins: Wild_Cat (Max@moz-na0tak.dsl.teksavvy.com)
[11:48:56] *** Quits: hoony1 (Thunderbird@moz-p1g.5l8.39.14.IP) (Ping timeout: 121 seconds)
[11:49:41] *** Quits: Guest63 (textual@moz-qfs.570.70.83.IP) (Ping timeout: 121 seconds)
[11:49:53] *** Quits: KallDrexx (KallDrexx@moz-4fqk30.dybhfl.sbcglobal.net) (Ping timeout: 121 seconds)
[11:51:40] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[11:52:37] *** Joins: turtil (turtil@moz-8am.857.98.121.IP)
[11:54:32] *** Quits: makhauser (quassel@moz-7p8.00g.111.213.IP) (Connection closed)
[11:54:48] *** Joins: new_one (new_one@moz-mpr.u49.42.128.IP)
[11:56:36] *** Joins: cholcombe (chris@moz-k0ajnr.i01-5.onvol.net)
[11:57:23] *** Joins: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net)
[11:57:38] *** AutomatedTester|AFK is now known as AutomatedTester
[11:58:32] *** Parts: marcusklaas (marcus@moz-14bm7d.upc-g.chello.nl) ("")
[11:58:48] *** Quits: vmeson (rmacleod@moz-hs5cri.cable.teksavvy.com) (Ping timeout: 121 seconds)
[11:58:59] *** Quits: Gabriel_7 (Gabriel@moz-ma9qoj.mtgr.92aj.0e35.2a01.IP) (Connection closed)
[11:59:46] *** Joins: frankmcsherry (frankmcsher@moz-i3sjud.dynamic.kabel-deutschland.de)
[12:00:19] *** Joins: erz (erz@moz-efrhus.broadband.corbina.ru)
[12:01:17] *** Joins: polyfractal (polyfractal@moz-8edvdj.res.rr.com)
[12:03:07] *** Joins: jviereck (Adium@moz-nucvgq.ethz.ch)
[12:03:09] *** Quits: jviereck (Adium@moz-nucvgq.ethz.ch) (Quit: Leaving.)
[12:03:11] *** Joins: jviereck (Adium@moz-que5h8.ethz.ch)
[12:04:55] *** Joins: sayan (sayan@moz-so4.f0d.244.121.IP)
[12:05:51] *** Joins: boss_mc (boss_mc@moz-82h3hl.cc63.ki59.0104.2620.IP)
[12:05:53] *** Quits: sayan (sayan@moz-so4.f0d.244.121.IP) (Quit: Leaving)
[12:05:58] *** Joins: sayan (sayan@moz-so4.f0d.244.121.IP)
[12:06:15] <nicoo> bluss: Actually, is is possible to grow sub-exponentially yet have optimal amortized complexity, but it isn't as cache-friendly, and is much more complicated anyways
[12:06:17] *** Joins: ryuan (Mibbit@moz-e67.ifc.136.121.IP)
[12:06:28] <nicoo> it is*
[12:09:52] *** Quits: ptalbot (ptalbot@moz-l1t9t8.fbx.proxad.net) (Ping timeout: 121 seconds)
[12:11:02] *** Joins: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th)
[12:11:14] *** Joins: zmack (zmack@moz-1oe.89t.76.82.IP)
[12:11:16] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[12:11:19] *** Quits: jviereck (Adium@moz-que5h8.ethz.ch) (Quit: Leaving.)
[12:11:34] *** Joins: pvinis (pvinis@moz-mddkaj.static.inode.at)
[12:12:50] *** Joins: vani (Mibbit@moz-skp.041.27.115.IP)
[12:13:26] *** Quits: ryuan (Mibbit@moz-e67.ifc.136.121.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:13:42] *** Joins: pakupaku (pl@moz-jse.is7.143.79.IP)
[12:13:56] *** Joins: ekiwi (kevin@moz-5k3svi.eduroam.rwth-aachen.de)
[12:13:57] *** Quits: grncdr (Adium@moz-m1g.e47.90.95.IP) (Quit: Leaving.)
[12:14:02] *** Quits: errordeveloper (ilya@moz-8jq.ge6.157.37.IP) (Ping timeout: 121 seconds)
[12:14:21] <vani> I want to know that rust how to guarantee no race condition by its type system.
[12:14:29] *** Quits: scott (uid25790@moz-e5ok1n.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[12:15:12] <vani> Only one pointer which is able to modify the data can not avoid all race condition.
[12:15:15] *** Quits: ekiwi (kevin@moz-5k3svi.eduroam.rwth-aachen.de) (Client exited)
[12:15:21] *** Joins: grncdr (Adium@moz-m1g.e47.90.95.IP)
[12:15:30] *** Joins: ekiwi (kevin@moz-5k3svi.eduroam.rwth-aachen.de)
[12:15:57] *** Joins: hoony (Thunderbird@moz-p1g.5l8.39.14.IP)
[12:16:12] <huon> vani: rust avoids data races specifically, not arbitrary race conditions
[12:16:34] <vani> Which data races can be avoided?
[12:16:41] <huon> all
[12:16:42] <bluss> a &mut reference is always unalias, so while it is usable, are other & or &mut that point to the same location are unusuable
[12:16:56] <WindowsBunny> vani: When you have a &mut, you are guaranteed statically that nothing else can modify it
[12:17:07] <WindowsBunny> Also when you have a &
[12:17:10] *** Quits: Tobba_ (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[12:17:13] <Enjolras> nor read it.
[12:17:28] <WindowsBunny> When you have a &mut you are guaranteed nobody else is reading it
[12:17:45] <WindowsBunny> when you have a &, other things can read it at the same time
[12:17:47] *** Quits: zcourts (zcourts@moz-7ms809.cable.virginm.net) (Client exited)
[12:17:52] <WindowsBunny> But other threads only if it is Sync
[12:18:17] *** Joins: hoony1 (Thunderbird@moz-p1g.5l8.39.14.IP)
[12:18:49] *** Joins: gzero (pavek@moz-on4hbe.cray.com)
[12:18:56] *** Joins: Kynes (Kynes@moz-j2us35.mit.edu)
[12:19:06] *** Quits: hoony (Thunderbird@moz-p1g.5l8.39.14.IP) (Connection closed)
[12:19:16] <vani> That says, if there is one pointer which can write data, then other pointers will be invalid? 
[12:19:55] <bluss> rustc checks that no other pointers can be active at that time yes
[12:19:57] <Enjolras> it's more radical than that. You cannot create a pointer which can write data if you have other pointers
[12:20:00] <WindowsBunny> vani: Other pointers won't be allowed to exist
[12:20:21] <WindowsBunny> vani: Your program will fail to compile if other pointers might be able to exist at the same time
[12:20:22] <vani> got it.
[12:20:23] *** Quits: mkoskar (mkoskar@moz-ib8bp9.us.unmetered.com) (Client exited)
[12:20:23] <vani> thanks
[12:20:35] *** Joins: nyx (nyx@moz-ivelpd.res.rr.com)
[12:21:32] *** Quits: pakupaku (pl@moz-jse.is7.143.79.IP) (Ping timeout: 121 seconds)
[12:21:42] *** Quits: grncdr (Adium@moz-m1g.e47.90.95.IP) (Quit: Leaving.)
[12:22:19] *** Quits: hoony1 (Thunderbird@moz-p1g.5l8.39.14.IP) (Ping timeout: 121 seconds)
[12:22:19] *** Quits: vani (Mibbit@moz-skp.041.27.115.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:23:09] *** Joins: grncdr (Adium@moz-m1g.e47.90.95.IP)
[12:24:00] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[12:24:21] *** Joins: velvetdeth (Mibbit@moz-28ut2i.members.linode.com)
[12:24:42] <contradictioned> there's this help text in the compiler:
[12:24:54] <contradictioned> help: methods from traits can only be called if the trait is in scope; the following trait is implemented but not in scope, perhaps add a `use` for it:
[12:24:54] <contradictioned> help: candidate #1: use `core::iter::IntoIterator`
[12:25:06] *** Joins: ptalbot (ptalbot@moz-p7j122.hk46.a8t0.0e35.2a01.IP)
[12:25:13] *** Joins: pakupaku (pl@moz-jse.is7.143.79.IP)
[12:25:15] *** Quits: velvetdeth (Mibbit@moz-28ut2i.members.linode.com) (Quit: http://www.mibbit.com ajax IRC Client)
[12:26:07] <contradictioned> is it just by chance, that if the help text would be: "candidate #1: `use core::iter::IntoIterator`" the line would be easily pastable, or is this backtick on the wrong position?
[12:26:11] *** Joins: kieran (kieran@moz-c5gk5j.ihug.co.nz)
[12:26:43] *** Quits: DenSchub (DenSchub@moz-6io4fd.hol4.1ume.2260.2a02.IP) (Ping timeout: 121 seconds)
[12:28:08] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[12:28:27] *** Joins: vmeson (rmacleod@moz-hq5.1km.224.128.IP)
[12:29:12] *** Joins: jviereck (Adium@moz-siekha.bmup.g469.067c.2001.IP)
[12:29:49] *** Quits: jviereck (Adium@moz-siekha.bmup.g469.067c.2001.IP) (Quit: Leaving.)
[12:30:31] <contradictioned> (or slightly rephrased: does the compiler talk to me and say "hey, you, use `foo`" or does the compiler talk to me and say "hey, a fix would be the line `use foo`")
[12:31:21] *** Joins: tcard (tcard@moz-5eb1g3.staticIP.rima-tde.net)
[12:34:46] *** Joins: mkoskar (mkoskar@moz-4lmh4m.privacyfoundation.ch)
[12:36:57] *** Quits: ismaelga (ismaelga@moz-rjm.jv4.251.188.IP) (Connection closed)
[12:37:13] *** Quits: vmeson (rmacleod@moz-hq5.1km.224.128.IP) (Quit: Konversation terminated!)
[12:37:19] *** Quits: polyfractal (polyfractal@moz-8edvdj.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[12:37:31] *** Quits: tcard (tcard@moz-5eb1g3.staticIP.rima-tde.net) (Client exited)
[12:37:45] <Layl> could I get some help resolving this issue, I have no idea what I'm looking at http://i.imgur.com/vCnnW1k.png
[12:39:19] <bluss> Layl: does the help tip work?
[12:39:39] <bluss> in general &'a T requires a bound that T: 'a
[12:39:41] <Layl> bluss, the code in the help tip is exactly the same as the code is
[12:40:13] <bluss> Layl: there is no bound using 'a in the code I think
[12:40:30] <Layl> what do you mean with a bound
[12:40:39] *** Joins: marsel (user@moz-173.6df.180.94.IP)
[12:40:54] <bluss> try adding the thing inside `` from the help message
[12:41:02] <bluss> as a line in a where clause?
[12:41:05] <bluss> to the struct
[12:41:07] *** Joins: errordeveloper (ilya@moz-8jq.ge6.157.37.IP)
[12:41:19] *** Joins: sefstel (Mibbit@moz-rr4r8s.kuban.ru)
[12:41:27] *** Quits: sayan (sayan@moz-so4.f0d.244.121.IP) (A TLS packet with unexpected length was received.)
[12:41:45] <Layl> if that's the solution, there's 4 more identical errors except slightly different types
[12:41:45] <sefstel> Всем привет! Здесь есть русские?
[12:42:19] <bluss> Layl: oh. Try adding   R: 'a ?
[12:42:44] *** Quits: sefstel (Mibbit@moz-rr4r8s.kuban.ru) (Quit: http://www.mibbit.com ajax IRC Client)
[12:42:55] <Layl> at what part should I add that
[12:43:10] <bluss> I only see a struct item, so on that
[12:43:16] <bluss> I only have your screenshot
[12:43:26] *** Quits: pvinis (pvinis@moz-mddkaj.static.inode.at) (Quit: Leaving...)
[12:43:50] <Layl> I just have no idea where in the struct I should be adding this
[12:43:55] *** Joins: ytain_ (ytain@moz-trdbtq.dsl.teksavvy.com)
[12:44:02] *** Quits: MaxV (MaxV@moz-1nu.kln.167.83.IP) (Quit: Leaving...)
[12:44:22] *** Joins: tcard (tcard@moz-5eb1g3.staticIP.rima-tde.net)
[12:44:32] *** Quits: jtdowney_ (jtdowney@moz-obnifk.il.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[12:45:27] *** Quits: nyx (nyx@moz-ivelpd.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[12:46:54] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[12:46:57] *** Quits: ytain (ytain@moz-ge9fgi.dsl.teksavvy.com) (Ping timeout: 121 seconds)
[12:47:10] *** Quits: Wild_Cat (Max@moz-na0tak.dsl.teksavvy.com) (Connection closed)
[12:47:59] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[12:48:38] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[12:48:47] *** Quits: tristanseifert (tristanseif@moz-r0t7ns.res.rr.com) (Ping timeout: 121 seconds)
[12:49:03] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[12:49:44] <mkpankov> hm, would it be possible to add a notice about "language versions" of this channel to the topic? I know of at least #rust-ru and saw several people coming here and asking smth in Russian
[12:50:12] *** Quits: tcard (tcard@moz-5eb1g3.staticIP.rima-tde.net) (Client exited)
[12:50:19] <mkpankov> don't know if there are other channels for non-English speakers...
[12:50:32] *** Joins: MaxV (MaxV@moz-1nu.kln.167.83.IP)
[12:50:38] *** Joins: ianj (ianjneu@moz-03gv4a.ccs.neu.edu)
[12:51:05] <Layl> ugh I have no idea how this lifetime syntax works
[12:51:07] <sonder> joda
[12:51:11] <Layl> I've been stuck for an hour because of this
[12:51:45] <ianj> If all structs in an enum have the same first k fields, will a field access of i < k compile to a pointer offset?
[12:52:05] <ianj> or do I still need to do dispatch
[12:52:21] *** Quits: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[12:52:26] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[12:52:40] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[12:52:43] *** Joins: ahal (ahal@moz-b8e0a0.cpe.pppoe.ca)
[12:52:44] *** Quits: fabiand (fabiand@moz-sct78v.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[12:52:58] *** Joins: DenSchub (DenSchub@moz-4qh7qk.0b101010.org)
[12:54:27] *** Joins: InfiniteJacuzzi (darren@moz-804egb.dyn.optonline.net)
[12:54:36] <Layl> is there any good documentation at all on the lifetime syntax
[12:54:44] <Layl> because I really don't know what to do right now
[12:55:47] *** Quits: kieran (kieran@moz-c5gk5j.ihug.co.nz) (Ping timeout: 121 seconds)
[12:56:23] *** Joins: agoforth (agoforth@moz-8bnb7i.netcologne.de)
[12:56:54] *** Joins: jawzi (jawzi@moz-9o5r4v.mn.charter.com)
[12:57:07] *** AutomatedTester is now known as AutomatedTester|AFK
[12:57:21] <ianj> Layl: what are you trying to do? When implementing a generic struct/enum, you need to use the < > quantification syntax. You can bind a lifetime variable with ', so you can say struct Foo<'a> { [..things that can be marked as having lifetime a..] }, and borrows are marked with the lifetime of the object they're borrowing with &'a syntax
[12:57:37] <bluss> Layl: put R: 'a in where of the struct
[12:57:41] <bluss> before {
[12:58:02] <Layl> I don't know what the where of the struct looks like
[12:58:07] <Layl> I have no idea how the were syntax works
[12:58:15] <Layl> and I can't find any reference to it in the rust book
[12:58:23] *** Joins: xorcon (Mibbit@moz-k71.b1t.175.193.IP)
[12:58:39] *** Quits: debuuu (debuuu@moz-pt8.ma2.149.80.IP) (Quit: Leaving)
[12:58:45] *** Joins: Dennis (Mibbit@moz-50i.tqb.171.79.IP)
[12:59:09] *** Quits: decode__ (agoforth@moz-pklhcp.netcologne.de) (Ping timeout: 121 seconds)
[12:59:16] <bluss> http://doc.rust-lang.org/book/traits.html#where-clause
[12:59:48] *** Joins: wei2912 (wei2912@moz-k83.q2v.156.175.IP)
[12:59:54] <bluss> that said, you can put it either inside the type parameter list where you introduce 'a and R, or in where
[13:00:07] <mdibaiee> Is it possible to use a variable to get a module? something like this: | let cmd = "cd"; commands::{cmd} |
[13:00:26] <xorcon> hi, I want to assign an integer in big endian to a socketaddr struct (pretty low level code). is there a better/easier way to assure endianess instead of using the byteorder io stuff? 
[13:00:33] <bluss> mdibaiee: no
[13:00:39] <Layl> I tried "pub struct RenderData<'a, R: gfx::Resources> where <R: 'a> {" but it isn't taking that
[13:03:19] *** bentley|away is now known as bentley
[13:03:20] *** Joins: Guest58 (textual@moz-tb1fm9.us.xo.net)
[13:03:42] *** Quits: skade (skade@moz-4eh.d50.201.212.IP) (Quit: Textual IRC Client: www.textualapp.com)
[13:04:44] <jonalmeida-mobile> Why is specifying a lifetime identifier at the end like this wrong? pub struct Config<T: callbacks::Callbacks<T>, U,'a>
[13:04:51] *** Joins: fabiand (fabiand@moz-d8047t.dip0.t-ipconnect.de)
[13:05:05] <jonalmeida-mobile> it works fine if I add the 'a before my T
[13:05:30] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[13:05:36] *** Joins: alex-abreu (alex@moz-j54ho8.biz.rr.com)
[13:06:05] *** Quits: DerisiveLogic (smuxi@moz-lok4tg.dyn.optonline.net) (Ping timeout: 121 seconds)
[13:06:15] <Layl> aaargh I don't get it
[13:06:49] <grncdr> does anybody know of a declarative-ish crate for decoding from JSON to structs that allows you to remap field names?
[13:06:59] *** Joins: jviereck (Adium@moz-siekha.bmup.g469.067c.2001.IP)
[13:07:06] <grncdr> I'm working with payloads that have UglyCamelCaseKeys and want to remap them to nice_snake_case_ones, without writing _everything_ by hand
[13:07:57] *** Quits: InfiniteJacuzzi (darren@moz-804egb.dyn.optonline.net) (Quit: WeeChat 1.1.1)
[13:08:26] <jonalmeida-mobile> Hmm.. so I can use as many lifetime specifiers as I want but I have to declare them all first before declaring all the other types.
[13:09:07] *** Quits: dwrensha (chatzilla@moz-46o4hi.pa.comcast.net) (Connection closed)
[13:09:11] *** Joins: dzyp (hiatt@moz-ofiasr.static.qwest.net)
[13:09:17] <Layl> bluss, am I just fundamentally misunderstanding what you're telling me to do here
[13:09:24] <Layl> because I just don't get what's going on
[13:09:29] *** Joins: dwrensha (chatzilla@moz-46o4hi.pa.comcast.net)
[13:10:24] *** Joins: happy-dude_ (uid62780@moz-jt3517.charlton.irccloud.com)
[13:10:42] <bluss> well I'm not sure either, but I think R: 'a should fix it
[13:10:44] <bluss> just where R: 'a
[13:10:52] <bluss> between the struct name and {
[13:11:07] <bluss> see the where docs above for examples of where syntax
[13:11:13] *** Joins: polyfractal (polyfractal@moz-a4u.hn6.207.104.IP)
[13:11:39] <Layl> that doc doesn't show anything about where with a lifetime, but I'm probably just reading it wrong because of how tired I am
[13:12:15] <Layl> alright, I've added "where R: 'a" and now the original problem remains with no changes
[13:12:43] <bluss> ok, I'd try the tip the compiler is giving you instead then
[13:13:07] *** Quits: alex-abreu (alex@moz-j54ho8.biz.rr.com) (Ping timeout: 121 seconds)
[13:13:18] *** Parts: Naeblis (Naeblis@moz-a8t.cm0.85.95.IP) ("Textual IRC Client: www.textualapp.com")
[13:13:39] <Layl> but it's giving me 8 of them (just counted the exact number)
[13:13:50] <Layl> I can't add all 8, the interface would get extremely long
[13:14:23] <bluss> right
[13:14:29] <Layl> I don't even get why a type has a lifetime
[13:14:29] <Dennis> hello! my name is Dennis, I just started coding Rust three days ago. I am trying to get a small API service running using the Iron framework <http://ironframework.io/>. it's all going well so far, but now I try to get the port from an env var, concatenate it with "localhost" and start iron with it, but it fails
[13:14:32] <bluss> so the creator of the API must have a better idea
[13:14:49] *** Quits: jviereck (Adium@moz-siekha.bmup.g469.067c.2001.IP) (Quit: Leaving.)
[13:15:02] <Dennis> I have set up a repo that illustrates the issue -> https://github.com/dschneider/rust-web-service
[13:15:12] <Layl> why do types have lifetimes, what does "where R: 'a" even do in this situation?
[13:15:27] *** Joins: pnkfelix (pnkfelix@moz-6v5.3nd.202.89.IP)
[13:15:27] *** ChanServ sets mode: +o pnkfelix
[13:15:51] *** Quits: yuja (yuja@moz-5pp8ro.so-net.ne.jp) (Ping timeout: 121 seconds)
[13:16:00] <Layl> Surely a type is decided compile time and if it had a lifetime it would be 'static
[13:16:27] <mdibaiee> Is it possible to pass a vector as separate arguments to a function? Something like fn(...args) in javascript
[13:17:23] <TeXitoi> mdibaiee: no, the closest thing is to pass a tuple. but macro can
[13:17:48] <mdibaiee> TeXitoi: thanks
[13:17:50] *** Joins: idegen (greg@moz-9c4nle.or.frontiernet.net)
[13:18:11] <TeXitoi> Layl: because your R may be &'a [i32], and have a lifetime
[13:18:20] *** AutomatedTester|AFK is now known as AutomatedTester
[13:18:30] <TeXitoi> or some struct containing reference
[13:18:50] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[13:18:52] <Layl> but R is restricted to be a gfx::Resource
[13:19:41] <TeXitoi> Layl: do you have a link to your gfx rust doc ?
[13:19:57] <Layl> gfx's rust doc hasn't been updated for a loooong while
[13:20:43] <bluss> Layl: gfx::Resource could be implemented by a type like &'a [i32] or Foo<'a> etc
[13:20:55] <bluss> it could be
[13:21:13] *** Quits: idegen (greg@moz-9c4nle.or.frontiernet.net) (Connection closed)
[13:21:37] <Layl> I'm not storing any reference to a gfx::Resource anyways
[13:21:43] *** Joins: idegen (greg@moz-9c4nle.or.frontiernet.net)
[13:21:50] <Layl> I'm storing a gfx_texture::Texture
[13:21:57] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[13:21:58] <Layl> for which I've got the appropriate lifetime specified
[13:22:17] <Layl> *gfx_texture::Texture<R>
[13:22:33] <bluss> it's about the content behind that reference
[13:23:17] <bluss> looks like R is contained in the Texture, so R is behind the reference. Or evidently not R itself, but all those associated types listed by rustc.
[13:23:22] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[13:23:28] <bluss> ::Buffer etc
[13:23:47] <Layl> well shouldn't that be covered by the lifetime I've got on the texture reference
[13:24:00] <bluss> no. &'a T requires a T: 'a bound
[13:24:05] <TeXitoi> Layl: or the source ?
[13:24:16] *** Quits: mvyskocil (mvyskocil@moz-1fo.p0p.7.31.IP) (Ping timeout: 121 seconds)
[13:24:20] *** Joins: dfinninger (dfinninger@moz-6a9v7n.res.rr.com)
[13:24:21] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[13:24:24] <Layl> TeXitoi, the source for gfx is here: https://github.com/gfx-rs/gfx-rs
[13:24:37] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[13:24:45] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[13:24:47] <Layl> I don't get what's going on here at all
[13:25:25] <VShell> Dennis: so, .http() wants the parameter to be 'static if it's a reference. it's not possible to pass a dynamic string to it. *however*, it'll happily take anything that is a std::net::ToSocketAddrs - including the tuple ("0.0.0.0", port.parse().unwrap()).
[13:25:29] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[13:25:40] <Layl> within this really small snippet, I don't get why there's anything dangling not covered by a lifetime https://gist.github.com/LaylConway/b9116e8f55b0bae4523b
[13:25:48] *** Joins: gonzaloserrano (Adium@moz-1nv.3t7.97.62.IP)
[13:26:05] *** Joins: Temur (Tarmashirin@moz-bak.2k3.199.117.IP)
[13:26:27] *** Joins: _queue (queue@moz-7ds19i.wireless.umd.edu)
[13:26:42] <TeXitoi> Layl: pub struct RenderData<'a, R: gfx::Resources + 'static> {
[13:27:01] *** Quits: dstrbad (dstrbad@moz-3vd3ts.cable.xnet.hr) (A TLS packet with unexpected length was received.)
[13:27:30] <Dennis> VShell: ZOMG that worked. let me digest your insights! thanks for the help :)
[13:27:59] <Layl> TeXitoi, that seems to make no difference
[13:28:14] <TeXitoi> Layl: error message, please
[13:28:32] *** Quits: Temur (Tarmashirin@moz-bak.2k3.199.117.IP) (Connection closed)
[13:28:34] *** Joins: Tarmashirin (Tarmashirin@moz-bak.2k3.199.117.IP)
[13:28:36] <bluss> Layl: I think you should add the bounds that rustc suggests
[13:28:39] <TeXitoi> and it can help if you provide a minimal crate that's not compiling
[13:28:53] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[13:29:00] <Layl> TeXitoi, http://i.imgur.com/WAElQiD.png
[13:29:08] <Layl> bluss, that screenshot shows why that's not an option, there's too many bounds
[13:29:08] *** Quits: rovar (rovar@moz-96effg.dyn.optonline.net) (NickServ (RECOVER command used by rovar_))
[13:29:08] *** Joins: yuja (yuja@moz-5pp8ro.so-net.ne.jp)
[13:29:08] *** rovar_ is now known as rovar
[13:29:15] <Layl> the bounds alone would spread 8 lines
[13:29:21] <Layl> it's not reasonable for that to be the answer
[13:29:22] *** Joins: rovar_ (rovar@moz-96effg.dyn.optonline.net)
[13:29:54] <bluss> Layl: well ok, hope you find something
[13:29:56] <VShell> Dennis: you could also do format!("0.0.0.0:{}", port_num).parse::<SocketAddr>().unwrap(), which is closer to your first idea - it'll create the string, then turn it into a SocketAddr, which implements ToSocketAddrs. there's a handful of other options, too.
[13:30:23] <VShell> but yeah. happy Rusting. :)
[13:30:43] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Connection closed)
[13:30:46] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[13:31:10] *** Quits: shellac (textual@moz-9b49cr.cable.virginm.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[13:31:48] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[13:32:28] *** Joins: shellac (textual@moz-9b49cr.cable.virginm.net)
[13:32:52] *** Joins: AFKGeek (AFKGeek@moz-i8k.p35.50.208.IP)
[13:34:06] *** Quits: AFKGeek (AFKGeek@moz-i8k.p35.50.208.IP) (Quit: Fades into the shadows)
[13:34:16] <Dennis> VShell: That makes it more understandable to me! Thanks again!
[13:34:27] <TeXitoi> Layl: you'll need to add the 'a lifetime for each associated types here: https://github.com/gfx-rs/gfx-rs/blob/c3def8339b97800e23948dcc0096b28215550405/src/device/mod.rs#L154
[13:34:36] <TeXitoi> (as rustc suggest you)
[13:35:26] <nathan7> playbot: enum Void {}; ::std::mem::size_of::<Void>()
[13:35:28] -playbot- 0
[13:35:31] *** Joins: Guest67 (textual@moz-gfs9v0.fios.verizon.net)
[13:35:33] <Layl> right now I'm talking to the gfx dev to ask if there's an alternative because really if every time I have to reference a texture I have to carry along every single one of those, it's gonna be too much
[13:35:53] <Layl> nnnope, bounds is the only way
[13:36:36] *** Joins: Chef (Chef@moz-1trbhq.dsl.teksavvy.com)
[13:36:36] *** Joins: maraoz (maraoz@moz-7fc9s6.fibertel.com.ar)
[13:37:57] *** Joins: ogham (rally@moz-91e3hp.cable.virginm.net)
[13:39:28] *** Quits: MaxV (MaxV@moz-1nu.kln.167.83.IP) (Quit: Leaving...)
[13:39:51] *** Quits: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net) (Ping timeout: 121 seconds)
[13:39:59] *** Joins: rfnash (weechat@moz-ulk8um.in.comcast.net)
[13:40:21] <TeXitoi> Layl: you can make a wrapper that add the bound on every associated type
[13:40:31] *** Joins: coryforsyth (coryforsyth@moz-hpsim2.fios.verizon.net)
[13:40:31] *** Joins: ray (ray@moz-adl.t3f.66.59.IP)
[13:40:35] *** Quits: coryforsyth (coryforsyth@moz-hpsim2.fios.verizon.net) (Client exited)
[13:40:52] *** Quits: mindtree (Mitch@moz-e0s5tf.iprimus.net.au) (Ping timeout: 121 seconds)
[13:40:58] <Layl> TeXitoi, could you give a short example on that?
[13:41:52] *** Quits: popow (Thunderbird@moz-03f.kd0.252.223.IP) (Connection closed)
[13:42:58] <TeXitoi> Layl: http://is.gd/P2HsI8
[13:43:19] *** Joins: alex-abreu (alex@moz-j54ho8.biz.rr.com)
[13:43:20] *** Quits: dfinninger (dfinninger@moz-6a9v7n.res.rr.com) (Connection closed)
[13:43:39] <Layl> TeXitoi, thanks, I appreciate it a lot
[13:43:40] <TeXitoi> you just have to add more where clause to add the bounds to your Associated types
[13:43:46] <TeXitoi> welcome
[13:44:14] *** Joins: dfinninger (dfinninger@moz-6a9v7n.res.rr.com)
[13:44:45] *** Parts: _queue (queue@moz-7ds19i.wireless.umd.edu) ()
[13:44:48] *** Joins: _queue (queue@moz-7ds19i.wireless.umd.edu)
[13:44:50] *** Quits: _queue (queue@moz-7ds19i.wireless.umd.edu) (Connection closed)
[13:45:28] *** Joins: nyx (nyx@moz-7o34ff.albyny.csvoip.net)
[13:45:39] *** Quits: turtil (turtil@moz-8am.857.98.121.IP) (Ping timeout: 121 seconds)
[13:45:59] *** Joins: InfiniteJacuzzi (darren@moz-804egb.dyn.optonline.net)
[13:46:01] *** Joins: jtdowney (jtdowney@moz-gh1isj.static.twtelecom.net)
[13:46:07] *** Quits: nyx (nyx@moz-7o34ff.albyny.csvoip.net) (Connection closed)
[13:47:50] *** Quits: sillesta (sillesta@moz-501od2.business.telia.com) (A TLS packet with unexpected length was received.)
[13:47:52] *** Quits: pakupaku (pl@moz-jse.is7.143.79.IP) (Ping timeout: 121 seconds)
[13:48:22] *** Joins: sillesta (sillesta@moz-501od2.business.telia.com)
[13:48:22] *** Quits: dfinninger (dfinninger@moz-6a9v7n.res.rr.com) (Connection closed)
[13:48:40] *** Quits: smarks (smarks@moz-jcb.eus.76.109.IP) (A TLS packet with unexpected length was received.)
[13:48:45] *** Joins: hoony (Thunderbird@moz-q5r.8e9.96.183.IP)
[13:49:34] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[13:49:39] *** Joins: dfinninger (dfinninger@moz-6a9v7n.res.rr.com)
[13:49:42] *** Quits: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net) (Client exited)
[13:50:37] *** Joins: tcard (tcard@moz-5eb1g3.staticIP.rima-tde.net)
[13:51:00] *** Joins: basicdays (basicdays@moz-vreeoj.cable.rcn.com)
[13:51:25] *** Quits: yuja (yuja@moz-5pp8ro.so-net.ne.jp) (Ping timeout: 121 seconds)
[13:51:30] *** Joins: claudiop (claudiop@moz-sqo2tm.cpe.netcabo.pt)
[13:51:37] *** bentley is now known as bentley|away
[13:52:02] *** Joins: smarks (smarks@moz-jcb.eus.76.109.IP)
[13:52:10] *** Joins: kieran (kieran@moz-c5gk5j.ihug.co.nz)
[13:52:20] *** Quits: InfiniteJacuzzi (darren@moz-804egb.dyn.optonline.net) (Quit: WeeChat 1.1.1)
[13:52:56] <TeXitoi> Layl: or http://is.gd/5KbnTV
[13:52:58] <ogham> the type `[closure]` implements the trait `core::ops::Fn<(&RuleValue,)>`, but the trait `for<'r> core::ops::Fn<(&'r RuleValue,)>` is required
[13:53:12] <ogham> Gah, can it really not match the former onto the latter?
[13:53:28] *** Joins: sysko (bst@moz-cpv.glf.227.116.IP)
[13:53:44] <claudiop> Im getting a problem with an enum not being recognized as imported while functions are. May someone pls take a look at those 5 lines of code: https://gist.github.com/SirOfTheRepo/e12588835913863185d7 Sorry if it is a noob mistake :)
[13:54:09] *** zz_kimundi is now known as kimundi
[13:54:35] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[13:54:47] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[13:55:13] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[13:55:29] <ogham> claudiop: You want `net::IpAddr::V4` on line 5
[13:55:41] <ogham> net::IpAddr is an enum with V4 and V6 variants
[13:55:55] <ogham> The error message could be a little clearer, though.
[13:56:13] *** Joins: btobolaski (btobolaski@moz-ltbh80.va.comcast.net)
[13:56:19] *** Quits: kieran (kieran@moz-c5gk5j.ihug.co.nz) (Ping timeout: 121 seconds)
[13:57:00] <claudiop> ogham, I thought the compiler would know which one im sending at it by recognizing the structure. Got confused in the tutorial thinking it would do that
[13:57:03] <claudiop> But thanks ;)
[13:57:16] <ogham> Sadly the compiler isn't that bright!
[13:57:45] *** Quits: mkoskar (mkoskar@moz-4lmh4m.privacyfoundation.ch) (Ping timeout: 121 seconds)
[13:57:56] *** Joins: turtil (turtil@moz-8am.857.98.121.IP)
[13:58:15] *** Joins: mindtree (Mitch@moz-uprdld.iprimus.net.au)
[13:59:47] *** Joins: skade (skade@moz-4eh.d50.201.212.IP)
[14:00:17] <claudiop> Now he's complaining that Im using unstable features...
[14:00:21] <claudiop> "use of unstable library feature 'lookup_addr': recent addition"
[14:00:42] *** Joins: hjr3 (hradtke@moz-e235ok.fios.verizon.net)
[14:00:45] <claudiop> How can I let him compile with unstable parts of the standard library in?
[14:01:15] <ogham> Add #![feature(ip_addr, lookup_addr)] to the top of your main file.
[14:01:19] *** Joins: mib_yxqonz (Mibbit@moz-42t.ok0.51.106.IP)
[14:01:22] *** Joins: Gamecubic (cubic@moz-bglmk5.mc.videotron.ca)
[14:01:26] <ogham> They were only added a few days ago, so they're unstable.
[14:02:00] *** Quits: turtil (turtil@moz-8am.857.98.121.IP) (Ping timeout: 121 seconds)
[14:02:31] *** Quits: mib_yxqonz (Mibbit@moz-42t.ok0.51.106.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:02:59] <claudiop> "note: this feature may not be used in the beta release channel"
[14:03:02] <claudiop> Time to go nightly?
[14:04:21] *** Joins: mib_o3mxl9 (Mibbit@moz-42t.ok0.51.106.IP)
[14:04:22] *** Joins: yuja (yuja@moz-5pp8ro.so-net.ne.jp)
[14:05:52] <ogham> yup
[14:06:13] *** Joins: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net)
[14:06:59] <mdibaiee> How can I get a Vec<String> from a Vec<&str> iterator? something like |let x: Vec<String> = line.split(" ").collect();|
[14:07:01] *** Quits: JanC (janc@moz-aks3pg.dsl.scarlet.be) (Ping timeout: 121 seconds)
[14:07:13] *** Quits: xorcon (Mibbit@moz-k71.b1t.175.193.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:07:17] *** Joins: colinsurprenant (colin@moz-rmn4e2.169.electronicbox.net)
[14:07:17] *** Quits: dfinninger (dfinninger@moz-6a9v7n.res.rr.com) (Connection closed)
[14:07:30] <Dennis> thanks for the help! :) I'll be back!
[14:07:35] *** Quits: Dennis (Mibbit@moz-50i.tqb.171.79.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:08:11] *** Joins: dfinninger (dfinninger@moz-6a9v7n.res.rr.com)
[14:08:50] <mib_o3mxl9> I have a question on the ownership section of the official rust book. It is mentioned in it that a function can return ownership back to somebody in the main function. But before it is assigned, the function returns and the variable goes out of scope. Wouldn't it release the memory
[14:08:57] <ogham> mdibaiee: Map it to .to_string() before collecting it
[14:09:39] *** Joins: daschl (Adium@moz-oirn1i.vie.surfer.at)
[14:09:43] <mdibaiee> ogham: oh right, why didn't I think about it myself. Thanks!
[14:09:59] <rovar> time is moving at one minute per second on one of my servers
[14:10:00] <ogham> np!
[14:10:03] <rovar> this is amazing
[14:10:13] <ogham> mib_o3mxl9: Are you looking at a particular example in the Book?
[14:10:29] <mib_o3mxl9> ya
[14:10:42] <mib_o3mxl9> but I'm talking about the situation in general.
[14:11:17] <WindowsBunny> mib_o3mxl9: When you return a value from a function
[14:11:47] <WindowsBunny> mib_o3mxl9: There is space allocated on the stack for the return value, so when the function returns, that value still exists
[14:12:32] <WindowsBunny> If you return a pointer to a local variable, that local variable won't exist, hence why Rust recommends returning ownership, so you return the local variable directly rather than a pointer to it
[14:12:47] *** Joins: yagooar (yagooar@moz-vbnsvc.adsl.green.ch)
[14:14:13] *** Quits: dfinninger (dfinninger@moz-6a9v7n.res.rr.com) (Connection closed)
[14:14:36] *** Joins: dfinninger (dfinninger@moz-6a9v7n.res.rr.com)
[14:14:53] *** Joins: grindhold (quassel@moz-6k8ctl.cyan.servdiscount-customer.com)
[14:15:04] <yagooar> Hi, everyone
[14:15:50] <mbrubeck> hi
[14:15:57] *** Joins: pakupaku (pl@moz-jse.is7.143.79.IP)
[14:16:51] <yagooar> I'm trying to figure out what's the "stable" way to exit a rust program with a custom message + status. I "println!(...)" the error message and than try to do "env::set_exit_status(1)", which doesn't compile as the compiler says "error: use of unstable library feature 'exit_status': managing the exit status may change"
[14:17:04] *** Joins: mnemnion (mnemnion@moz-e8rfii.ca.comcast.net)
[14:17:23] <Layl> how can I derive(Default) on a struct with a generic parameter?
[14:17:23] <Mutabah> yagooar: env::exit iirc
[14:17:39] <Mutabah> Layl: Bound the generic to be default?
[14:17:52] *** Quits: errordeveloper (ilya@moz-8jq.ge6.157.37.IP) (Ping timeout: 121 seconds)
[14:17:54] <tomaka> Layl: yes
[14:17:58] <Layl> Mutabah, what do you mean
[14:18:00] *** Joins: errordeveloper (ilya@moz-8jq.ge6.157.37.IP)
[14:18:07] <tomaka> Layl: oops I missed the "how"
[14:18:08] <Mutabah> Layl: "struct S<T: Default>"
[14:18:14] <Layl> ah, thanks
[14:18:23] <tomaka> isn't is automatic?
[14:18:31] *** Joins: ptc (textual@moz-93hhba.fios.verizon.net)
[14:18:41] <tomaka> Doesn't the attribute expand to `impl<T: Default> Default for Struct {}` ?
[14:18:46] <tomaka> I thought it did that
[14:18:54] *** Joins: borromakot (Adium@moz-j6pi1a.il.comcast.net)
[14:18:58] <Mutabah> tomaka: Probably does actually
[14:19:01] *** Quits: borromakot (Adium@moz-j6pi1a.il.comcast.net) (Quit: Leaving.)
[14:19:06] <Layl> so if I've got "struct Foo<T: Bar>" I need "struct Foo<T: Bar + Default>"?
[14:19:06] <tomaka> rusti: #[derive(Default)] struct Foo<T> { val: T }
[14:19:08] -playbot- ()
[14:19:09] <Mutabah> (just tried with playbot, it just worked without a bound
[14:19:28] *** Joins: JanC (janc@moz-a7ku8n.dsl.scarlet.be)
[14:19:33] <tomaka> Layl: you don't need it actually, #[derive(Default)] handles it automatically
[14:19:39] <Layl> it's odd because when I try to use it, it's asking me to "use" core::default::Default
[14:19:57] <Layl> and I've got "use std::default::Default"
[14:20:16] <yagooar> Mutabah: env::exit doesn't seem to exist, env::set_exit_status is marked as unstable (https://doc.rust-lang.org/std/env/index.html)
[14:20:39] *** Quits: djcb (user@moz-nqdj21.elisa-laajakaista.fi) (Connection closed)
[14:20:42] *** Joins: djcb (user@moz-nqdj21.elisa-laajakaista.fi)
[14:20:54] <Layl> so I'm not sure what's going on here why I can't use the default on this
[14:21:15] <Mutabah> yagooar: Sorry, ::std::process::exit
[14:21:15] *** Joins: colinsurprenant_ (colin@moz-rmn4e2.169.electronicbox.net)
[14:21:16] <tomaka> Layl: do you have the nightly?
[14:21:21] <Layl> yea
[14:21:25] *** Joins: jviereck (Adium@moz-9dh7kn.ethz.ch)
[14:21:26] <Layl> though a bit old version by now
[14:21:28] <tomaka> Layl: I think "Default" is in the prelude now
[14:21:29] *** Quits: colinsurprenant (colin@moz-rmn4e2.169.electronicbox.net) (Ping timeout: 121 seconds)
[14:21:29] *** colinsurprenant_ is now known as colinsurprenant
[14:21:31] <tomaka> ah, so nevermind
[14:21:32] <Mutabah> Layl: You should not need to use Default nowdays, it's in the prelude
[14:21:36] *** Joins: tamird (textual@moz-5v5pe2.ca.comcast.net)
[14:21:37] *** Joins: davebettin (davebettin@moz-acc.cl4.35.72.IP)
[14:21:38] <mbrubeck> yagooar: std::process::exit
[14:21:46] <Layl> I'll update nightly and see if it fixes it
[14:22:21] <yagooar> mbrubeck: oh, nice, now it works :D Thanks!
[14:22:40] <yagooar> Mutabah: thank you too
[14:22:56] *** Quits: laumann (thomas@moz-3v9.hq0.225.130.IP) (Quit: leaving)
[14:23:15] *** Joins: envi_u (envi@moz-ih5.olo.169.121.IP)
[14:23:15] <mib_o3mxl9> WindowsBunny: Referring to the examples just before the borrowing subsection, when num becomes the owner, the memory is deallocated when it goes out of the scope, i.e., upon closing of braces. How does returning num help then?
[14:24:13] *** Quits: tcard (tcard@moz-5eb1g3.staticIP.rima-tde.net) (Client exited)
[14:24:23] <Layl> I hope I won't again have a day as horridly stressful and frustrating with rust as I had today
[14:24:26] <WindowsBunny> mib_o3mxl9: In the function add_one, where num is returned?
[14:24:49] <mib_o3mxl9> yes
[14:25:10] <WindowsBunny> mib_o3mxl9: Because you're returning num, it is moved into the return value slot, so there is no more num to be deallocated
[14:25:31] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[14:25:47] <WindowsBunny> thus that boxed number is still alive in the return value slot, which is then assigned to the variable y
[14:26:57] <WindowsBunny> mib_o3mxl9: Ownership of num is passed from add_one to the scope that called add_one
[14:27:20] <WindowsBunny> so when add_one's scope ends to clean up all local variables, it no longer owns num so it doesn't deallocate it
[14:27:39] <WindowsBunny> Instead it is now the calling's scope job to take over ownership of that value
[14:28:30] *** Quits: Layl (Mibbit@moz-iachg4.sdb.prolocation.net) (Quit: http://www.mibbit.com ajax IRC Client)
[14:29:38] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[14:30:48] *** Joins: essem2 (Thunderbird@moz-f9p.4ol.7.74.IP)
[14:30:50] <mib_o3mxl9> WindowsBunny: Now I understand, thanks!
[14:31:57] <WindowsBunny> Praise Rust for allowing another person to see the light
[14:33:38] *** Joins: joel1 (joel@moz-6ampnk.gtri.gatech.edu)
[14:33:41] <sillesta> rust is a diety now?
[14:33:42] *** joel1 is now known as c0a8
[14:33:54] *** Joins: Diggsey (diggsey@moz-smvs7a.dsl.pipex.com)
[14:33:57] <c0a8> where can I find a priority queue implementation?
[14:34:24] <kali> c0a8: there is a binary heap in std::collection
[14:34:35] *** Quits: v213 (vee@moz-sca.bqs.204.223.IP) (Ping timeout: 121 seconds)
[14:34:41] <c0a8> kali: that should work, thanks!
[14:36:25] <claudiop> Im having trouble compiling the example from the API doc's  ( http://doc.rust-lang.org/nightly/std/net/fn.lookup_host.html )  Here's my code and compiler messages: https://gist.github.com/SirOfTheRepo/6aace07870e4f0b685d3
[14:36:36] <claudiop> My bad or outdated documentation?
[14:36:54] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[14:37:09] <claudiop> rustc 1.1.0-nightly (c4b23aec4 2015-04-29) (built 2015-04-29) if it matters
[14:37:46] <kali> claudiop: nope, it's not that. try! will not work in main
[14:38:01] *** Quits: eligreen (eli@moz-l01pmj.develer.net) (Client exited)
[14:38:06] <kali> claudiop: the doc wraps the sample in a vanilla main, but in this case, it will not work
[14:38:29] <jviereck> hi! Is there a way in rust to send a mutable or immutable borrow? I am looking at http://static.rust-lang.org/doc/master/std/sync/mpsc/index.html but I cannot see how to write a simple example using &T or &mut T types from the documentation
[14:38:34] <kali> claudiop: try! only make sense in the context of a function returning a Result<_,_>
[14:38:42] <jviereck> thanks for any pointers/help :)
[14:39:04] <claudiop> kali, what about my code?  It has no try. (I've never used try's in rust...)
[14:39:09] <claudiop> I mean, the commented one
[14:39:23] <claudiop> It is simmilar to the API's one
[14:40:00] <kali> claudiop: ha ! replace {} in the formatter by {:?}
[14:40:22] <kali> claudiop: {} calls Display (for end user) and {:?} calls Debug (for developper)
[14:41:27] <claudiop> It outputs: `std::net::LookupHost` cannot be formatted using `:?`; if it is defined in your crate, add `#[derive(Debug)]` or manually implement it
[14:41:28] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[14:41:30] *** Joins: housl (housl@moz-qnjt4k.ut.comcast.net)
[14:41:52] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[14:42:04] <claudiop> I already tried it, but since didn't understood what it said got it back to mirror the example
[14:42:22] <terpstra> so ... if i want a custom key type for a BTreeMap, I have to implement PartialEq, PartialOrd, Eq, Ord (b/c derived sort order is wrong). why do i have to do this? instead of Ord:Eq+PartialOrd, why is there not impl Eq for T:Ord { ... } etc? Then I make an 'Ord impl', and get the others for free...
[14:42:23] <steveklabnik> jviereck: have you tried?
[14:42:27] *** Quits: asQuirreL (asQuirreL@moz-ro1qqu.ox.ac.uk) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[14:42:33] <mtsr> jviereck: Yes, if the thread is dropped before the borrow would become invalid. For example let thread = scoped(move|| some_borrow.something(); ); if thread drops before whatever was borrowed goes out of scope.
[14:42:43] <steveklabnik> jviereck: i have some intutions here but I also just opened up my laptop ;)
[14:43:06] *** Quits: dfinninger (dfinninger@moz-6a9v7n.res.rr.com) (Connection closed)
[14:43:12] <rovar> terpstra, sing it. 
[14:43:21] <rovar> it is presently a huge PITA
[14:43:29] *** Quits: kmicu (kmicu@moz-uga.edn.218.91.IP) (Client exited)
[14:43:30] <terpstra> For now I've made a new trait "MyOrd" and then Ord/PartialOrd/Eq/PartialEq all have impls for MyOrd
[14:43:33] <jviereck> steveklabnik: I looked at http://rustbyexample.com/channels.html, http://blog.rust-lang.org/2015/04/10/Fearless-Concurrency.html, http://static.rust-lang.org/doc/master/std/sync/mpsc/index.html - nothing can give me an idea how to start.
[14:44:19] <terpstra> is there a design trade-off here that i'm not aware of that forces the std::Ord to work as it does
[14:44:20] <terpstra> ?
[14:44:35] <jviereck> I tried to change to do to this "let (tx, rx): (Sender<&usize>, Receiver<usize>) = mpsc::channel();" - but the compiler is not happy with it
[14:44:36] <rovar> jviereck, the approach for sending references is to use  Arc<
[14:44:49] *** Quits: munksgaard (munksgaard@moz-vj4.hq0.225.130.IP) (Ping timeout: 121 seconds)
[14:45:04] *** Quits: mib_o3mxl9 (Mibbit@moz-42t.ok0.51.106.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:45:10] <rovar> https://doc.rust-lang.org/std/cell/index.html
[14:45:23] <steveklabnik> jviereck: right, i'm aguessing the compiler complains about Send?
[14:45:51] <kali> claudiop: ha, yeah, you just can't print a LookupHost. but you can iterate over it and Display/Debug the Address it has found
[14:46:07] <jviereck> mtsr: that means, in the meantime, the mutable borrow is borrowed to the thread for the lifetime of thread - that makes sense, thanks :)
[14:46:16] <rovar> err Arc<RefCell or something like that.  Basically the easy approach is providing interior mutability for your type.  The Arc will ensure that the object lasts as long as the thread
[14:46:20] *** Joins: davebettin_ (davebettin@moz-acc.cl4.35.72.IP)
[14:46:53] *** Quits: futile (felix@moz-cmcd12.unity-media.net) (Ping timeout: 121 seconds)
[14:47:05] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[14:47:09] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Ping timeout: 121 seconds)
[14:47:15] <rovar> otherwise you're going to have a hard time convincing the compiler that the object you're referencing will last as long as the thread,  I'm not sure if its possible
[14:47:29] *** Joins: dschatzberg (dschatz@moz-g44hta.bu.edu)
[14:47:59] *** Joins: v213 (vee@moz-020.kug.204.223.IP)
[14:48:01] <terpstra> rovar, but the people who decided on Ord:Eq+PartialOrd, Eq:PartialEq, ... they had a reason. is it so that a method with <T:Ord> can assume Eq? Would an impl Eq for T:Ord { ... } not work to provide the method with the Eq trait?
[14:48:14] <jviereck> steveklabnik: yes, "std::sync::mpsc::Sender<_> expected usize, found &-ptr)"
[14:48:15] <jviereck> steveklabnik: might be my fault as I tried to pass the borrow to another thread using a channel. But using the example -mtsr just posted looks more as what I should do when passing a borrow to another thread? That is, instead of adding it to a channel, just reference it inside of a moving closure?
[14:48:35] *** Quits: spwhitt (ident@moz-6eickl.compute-1.amazonaws.com) (Connection closed)
[14:48:58] *** Quits: dschatzberg (dschatz@moz-g44hta.bu.edu) (A TLS packet with unexpected length was received.)
[14:49:07] *** Quits: Guest58 (textual@moz-tb1fm9.us.xo.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[14:49:12] <Enjolras> is the FromError trait gone ?
[14:49:13] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[14:49:17] *** Joins: spwhitt (ident@moz-6eickl.compute-1.amazonaws.com)
[14:49:22] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[14:49:32] <TeXitoi> jviereck: http://is.gd/nTpnxj
[14:49:56] <WindowsBunny> terpstra: Eq for T: Ord wouldn't really work due to coherence nightmares
[14:50:04] *** Quits: davebettin (davebettin@moz-acc.cl4.35.72.IP) (Ping timeout: 121 seconds)
[14:50:04] <TeXitoi> Enjolras: use From instead
[14:50:07] *** Joins: Guest58 (textual@moz-tb1fm9.us.xo.net)
[14:50:17] <Enjolras> thanks
[14:50:22] *** Joins: giogadi (Mibbit@moz-sflf2p.biz.rr.com)
[14:50:36] <rovar> terpstra, I don't think ord can assume eq or vice versa,  but  the distinction between partial is total ordering vs not, in the case of a tree, you do need total equality and total ordering, both of which imply their partials. 
[14:50:40] <claudiop> kali, but... but... I did iterate over it with that for loop, didn't I?  I tried to get my code as similar as possible to the official example, except for the try's and with more variables
[14:50:55] <giogadi> howdy! if I wanted to make a new higher order function that works on iterators, how would I define the function's type?
[14:51:00] <terpstra> WindowsBunny, i'm still not 100% clear on these rules. i thought it just prevents me from implementing a trait for a type when neither of them are from my crate
[14:51:16] <steveklabnik> jviereck: well, that error message seems to be about sending a &usize on one end, but only getting a <usize> on the other
[14:51:21] <WindowsBunny> terpstra: Well, blanket impls cause a lot of pain
[14:51:27] <rovar> giogadi, what do you mean works on iterators?
[14:51:33] <terpstra> WindowsBunny, so since Ord providing Eq would be ok since both are in std:: and MyType:Ord would be ok b/c MyType is in my crate?
[14:51:41] *** Joins: james4k (james@moz-ao8aj6.consolidated.net)
[14:51:59] <claudiop> Rust seems more and more like a child who wants lots and lots of attention, but i got to used to old know-all people (scripting languages) and now rust just seems like a PITA
[14:52:03] <claudiop> Hope i get used to this ASAP
[14:52:06] <giogadi> rovar, I mean I'd like to take to take an iterator as an argument to the function
[14:52:09] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[14:52:12] *** Joins: jviereck1 (Adium@moz-co2tva.ethz.ch)
[14:52:15] <terpstra> rovar, i understand perfectly well the difference between PartialOrd and Ord. But If I defined Ord, then PartialOrd is a given.
[14:52:18] *** Quits: jviereck (Adium@moz-9dh7kn.ethz.ch) (Ping timeout: 121 seconds)
[14:52:18] *** Quits: yagooar (yagooar@moz-vbnsvc.adsl.green.ch) (Quit: )
[14:52:37] <rovar> yes
[14:52:42] <rovar> it should be, in real life
[14:52:44] <WindowsBunny> terpstra: You end up with a recursive loop
[14:53:01] <mtsr> claudiop: I know the feeling. I write JS professionally, so it's a huge change of pace. On the other hand, when code compiles it tends to work.
[14:53:05] <giogadi> rovar: but I'd like to constrain the types so that the type of the iterator's elements are the same as the type of a closure also passed into the function
[14:53:30] *** Joins: eataix (eataix@moz-um7.336.116.50.IP)
[14:53:31] <jviereck1> steveklabnik: ahh! That made it :) "let (tx, rx): (Sender<&usize>, Receiver<&usize>) = mpsc::channel();" - compiles now fine :)
[14:53:35] <giogadi> basically, I want to implement something like std::iterator::min as a free function
[14:53:35] <jviereck1> thx!
[14:53:42] <WindowsBunny> terpstra: Ord requires Eq to be impl'd, but if you have a blanket impl of Eq where T: Ord, that depends on Ord
[14:53:47] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[14:53:49] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[14:54:05] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[14:54:06] <mtsr> claudiop: Worst part is if you get somewhere and think you're close and then it appears you've overlooked a borrowing issue and your only resort is putting Rc's all over the places or something like that.
[14:54:10] <WindowsBunny> terpstra: Recursive loops like that are likely to cause the compiler to give up or for mysterious coherence errors
[14:54:17] <terpstra> WindowsBunny, I am proposing to cut the dependence of Ord on Eq
[14:54:27] <WindowsBunny> terpstra: Ord depending on Eq makes total sense
[14:54:29] <terpstra> if Eq is automatically provided for Ord, then Ord need not be Ord:Eq
[14:54:42] <steveklabnik> WindowsBunny: nice pun ;)
[14:54:43] <terpstra> WindowsBunny, makes sense != correct design decision
[14:54:45] <giogadi> actually just a moment, I just found that min_by does what I'm looking for. I'll study its type signature
[14:54:55] <claudiop> mtsr, I still have no idea of what you're talking. Still probably far from reaching that point :)
[14:54:56] <WindowsBunny> (pun not intended)
[14:55:03] *** Quits: jviereck1 (Adium@moz-co2tva.ethz.ch) (Quit: Leaving.)
[14:55:46] *** Quits: colinsurprenant (colin@moz-rmn4e2.169.electronicbox.net) (Ping timeout: 121 seconds)
[14:56:17] <WindowsBunny> terpstra: It's easier to have Ord: Eq than to do a blanket impl
[14:56:17] <mtsr> claudiop: I got there surprisingly quickly. But it was only after running into things like that a couple of times that I felt like I was starting to get a grasp on Rust. :)
[14:56:27] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[14:56:27] *** ChanServ sets mode: +o erickt
[14:56:45] *** Joins: twipeD (wipeD@moz-7bfhev.dip0.t-ipconnect.de)
[14:57:03] *** Joins: colinsurprenant (colin@moz-rmn4e2.169.electronicbox.net)
[14:57:17] <WindowsBunny> And I personally think Ord: Eq is clearer, because it requires you to state that both your type has total equality and total ordering
[14:57:27] <WindowsBunny> rather than just stating the total ordering and implying the total equality
[14:57:43] *** Joins: Guest74 (textual@moz-il1.n6s.204.65.IP)
[14:57:46] *** Joins: dschatzberg (dschatz@moz-nk1clf.bu.edu)
[14:58:16] *** Quits: btobolaski (btobolaski@moz-ltbh80.va.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[14:58:18] <claudiop> mtsr, I started reading documentation a month ago, and only started writing a few lines of code like yesterday. Just concludes that it totally useless to read Rust docs without a purpose like writing code a few minutes after.
[14:58:47] <terpstra> total ordering implies total equality... if i am writing a proof i don't need to prove total equality if i proved total order ... writing an impl Ord is essentially a proof that my type fulfills this.
[14:58:51] *** nsm|away is now known as nsm
[14:59:08] *** Quits: v213 (vee@moz-020.kug.204.223.IP) (Ping timeout: 121 seconds)
[14:59:38] <mtsr> claudiop: I think reading documentation is also nice to get a feel for the maturity of the libraries, but I just like to get my hands dirty :)
[15:01:04] <claudiop> mtsr, What did you did to begin with? Im trying to do a simple program to talk over network, but since the std::net library its partially unstable and has lots of unknown things to me, i think it was a bad idea...
[15:01:10] <WindowsBunny> My hands have always been dirty, using Rust just made them dirtier
[15:01:26] <frankmcsherry> terpstra: A problem is: if there is any other trait out there that also implies total equality, you and they have to have a fight.
[15:01:28] <mtsr> claudiop: An Entity Component System based on one I like in C++.
[15:01:43] <c0a8> currently I'm trying to implement Ord for my type.. is it true I still have to provide implementations of PartialEq & PartialOrd and a blank Eq impl ?
[15:02:16] <c0a8> seems like a lot when I really could have all the logic in one place
[15:02:33] <mtsr> claudiop: Let's just say that that's not a great starter project. And now I'm working on fibers, sort of a task scheduling thing.
[15:02:46] *** Joins: mkoskar (mkoskar@moz-kd0.7us.139.37.IP)
[15:02:47] <mtsr> claudiop: So yeah, I'm a bit ambitious.
[15:02:48] <tomaka> nwin: ping
[15:03:14] <WindowsBunny> c0a8: Typically you can #[derive] all of them
[15:03:15] <claudiop> mtsr, I would try that if i knew anything about that. How long ago did you started playing with rust?
[15:03:20] <mtsr> claudiop: In between I did a simple simulation of the planets in the solar system based on NASA JPL data, that was actually quite doable.
[15:03:32] *** Quits: Guest58 (textual@moz-tb1fm9.us.xo.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[15:03:49] <terpstra> frankmcsherry, that's a fair point
[15:03:52] *** Joins: bytewise (bytewise@moz-he6t2a.eduroam.rwth-aachen.de)
[15:03:52] *** Joins: ismaelga (ismaelga@moz-rjm.jv4.251.188.IP)
[15:03:52] <terpstra> WindowsBunny,  http://is.gd/jjl9mN
[15:03:57] <terpstra> that's what i had in mind
[15:04:00] <c0a8> WindowsBunny: in this case, I assume the derivation would give me something I don't want, since I'm ordering based on length and not content
[15:04:00] <mtsr> claudiop: 6 months or something like that. But since I had been struggling with all the baggage surrounding C++ I wanted to port over what I did like to Rust :)
[15:04:18] <c0a8> WindowsBunny: so I guess there's no way around it?
[15:04:32] <WindowsBunny> c0a8: Then in that cast you can only derive(Eq)
[15:04:40] <WindowsBunny> While the rest you have to manually impl
[15:04:44] <mtsr> claudiop: Mostly I would try to pick something you're really interested in, even if it's a bit ambitious, it can give you a huge boost in dedication.
[15:05:02] *** Joins: KLP (KLP@moz-qdcjho.res.rr.com)
[15:05:03] <frankmcsherry> terpstra: can you not just do blanket impls of Eq, Ord, PartialEq, and PartialOrd from MyOrd?
[15:05:15] <terpstra> frankmcsherry, that's what i do today, yes
[15:05:17] <claudiop> mtsr, I could try to get one of my programs to rust, but my programs are mostly in python which is too high level to port right now. Im intrested in network communication right now... thats the problem
[15:05:19] *** Quits: wei2912 (wei2912@moz-k83.q2v.156.175.IP) (A TLS packet with unexpected length was received.)
[15:05:24] *** Quits: zmack (zmack@moz-1oe.89t.76.82.IP) (Connection closed)
[15:05:27] <terpstra> frankmcsherry, but i had to make MyOrd's impls
[15:06:04] *** Quits: bitonic (bitonic@moz-cdh3tf.28-151.libero.it) (Ping timeout: 121 seconds)
[15:06:09] *** Joins: davebettin__ (davebettin@moz-acc.cl4.35.72.IP)
[15:06:12] <mtsr> claudiop: Yeah, python is not a great candidate for porting, agreed. Unless you're willing to build some things from the ground up.
[15:06:36] <mtsr> claudiop: Unstable isn't really an issue, if the functions you need are there at least. Before alpha I had to fix my code to work with the latest nightly every day :)
[15:07:52] *** Joins: tcard (tcard@moz-5eb1g3.staticIP.rima-tde.net)
[15:07:58] *** Quits: tcard (tcard@moz-5eb1g3.staticIP.rima-tde.net) (Client exited)
[15:08:20] <claudiop> mtsr, Thats what Im trying to do, I never created a network socket, and made something over network myself. The functions are there, but also there are lots of elements i don't know how to use too well, and I don't want to spend the whole day on IRC bothering someone
[15:08:38] <grncdr> I have something of a dumb question: can one select a type parameter for a function call at run-time? 
[15:08:44] <claudiop> Its ok to ask something once in a while, but i dont think it is to ask for helo every time i want to implement something
[15:08:51] <claudiop> *help
[15:09:02] <giogadi> now having an issue that might be pertinent to this conversation: can you really not use Iterator::min() with an iterator of f64s?
[15:09:39] *** Quits: davebettin_ (davebettin@moz-acc.cl4.35.72.IP) (Ping timeout: 121 seconds)
[15:10:03] *** Joins: Guest58 (textual@moz-tb1fm9.us.xo.net)
[15:10:03] <c0a8> terpstra: that's beautiful. I really want to only implement lt for my type to get a full ordering
[15:10:07] *** Joins: jdm (jdm@moz-ul43ak.dsl.bell.ca)
[15:10:07] *** ChanServ sets mode: +o jdm
[15:10:32] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[15:10:50] <terpstra> c0a8, well - that was just a mock-up of how std::Ord,Eq,etc could have worked
[15:10:57] <c0a8> should work imo
[15:11:03] <c0a8> it's pretty clunky right now
[15:11:05] <mtsr> claudiop: Don't feel bad about asking questions, though, most people here will be more than happy someone new is picking up the language :)
[15:11:12] *** Joins: rbranson (rbranson@moz-oeg7f0.ca.comcast.net)
[15:11:13] <grncdr> I have a few entity types, and a function get::<T: Entity>(id: i32) -> T; if I want to choose a specific T at runtime is that feasible?
[15:11:21] <c0a8> especially since i'm use to just defining operator< in c++
[15:11:27] <c0a8> used to*
[15:11:39] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[15:11:42] <mtsr> claudiop: Maybe you can look at existing libraries that do similar things, maybe Iron? Or something else?
[15:12:00] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[15:12:08] <terpstra> c0a8, i am not really advocating just implementing lt. you do want cmp as it is in std now.
[15:12:28] <terpstra> comparing strings for equality should not need to do a !< and a !>
[15:12:39] <grncdr> In a more "dynamic" lang I might do something like `switch (typeName) { case "Thing": return Thing; … }` but that seems very unrustlike
[15:12:46] <c0a8> so for performance reasons
[15:13:08] <terpstra> yeah, but implementing cmp once should be enough for getting all of those types IMO.
[15:13:13] <grncdr> and I don't know if rust has a type for the "type of types"
[15:13:32] *** Quits: lutter (lutter@moz-7v7ueu.PUBLIC.monkeybrains.net) (Ping timeout: 121 seconds)
[15:13:49] <claudiop> mtsr, Isn't it too much of a burden to look at a complete crate as a noob? I'll probably not even know where to start with. And i don't have problems asking for help, but don't want to be seen as the guy who asks "hmm, ahh, how do i name a function A" and a minute after "hmm, ahh, how do i name a function B"
[15:13:51] <frankmcsherry> grncdr: look up Any
[15:13:52] *** Quits: davebettin__ (davebettin@moz-acc.cl4.35.72.IP) (Ping timeout: 121 seconds)
[15:13:53] <c0a8> definitely
[15:14:01] <flan3002> grncdr - http://doc.rust-lang.org/nightly/std/any/struct.TypeId.html
[15:14:04] *** Joins: stjahns_ (stjahns@moz-9oh245.ed.shawcable.net)
[15:14:54] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[15:14:57] <grncdr> thanks, I'll poke around at Any
[15:15:04] *** Joins: }ls{ (uhelp@moz-ovfiqg.dip0.t-ipconnect.de)
[15:15:14] *** Quits: rbranson (rbranson@moz-oeg7f0.ca.comcast.net) (Ping timeout: 121 seconds)
[15:15:15] *** Quits: marsel (user@moz-173.6df.180.94.IP) (Ping timeout: 121 seconds)
[15:15:20] *** Joins: lutter (lutter@moz-7v7ueu.PUBLIC.monkeybrains.net)
[15:15:27] <frankmcsherry> grncdr: but, also I would say that Any is pretty non-idiomatic except when you really need it.
[15:15:39] *** Quits: hebz0rl (hebz0rl@moz-cfcrtj.static.qsc.de) (Quit: Leaving)
[15:15:49] <mtsr> claudiop: Depends on how comfortable you are reading code. To me that really is one of the best skills to pick up and it's a great habit to read source for stuff you use. It'll allow you to pick up neat new tricks and work with inevitably poorly documented dependencies.
[15:16:02] <frankmcsherry> grncdr: enums would also be good to look at, as a different way to store multiple types and destructure them at run-time.
[15:16:23] <flan3002> grncdr - Do you want something like in http://doc.rust-lang.org/nightly/std/marker/trait.Reflect.html ?
[15:17:28] <claudiop> mtsr, Ok, then I'll try to pick some crate which does what I want and try to modify it. I'll probably have to stick to the manual every 30 seconds but I'll eventually get there. Thanks for your support :)
[15:17:50] *** Quits: stjahns_ (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[15:17:54] <grncdr> tbh, I'm not sure exactly what I want
[15:18:11] <grncdr> that is, I may be doing things completely wrong
[15:18:18] <mtsr> claudiop: I still consult the API docs every 30 seconds (learn to love the src link at the top). Better get a second screen or set your environment up so that switching is really comfortable :)
[15:18:30] *** Joins: datazombie (textual@moz-ss0.02d.243.173.IP)
[15:18:31] <grncdr> in any case, I'd considered enums, but the different variants are quite a bit different
[15:18:41] *** Joins: zmack (zmack@moz-1oe.89t.76.82.IP)
[15:18:48] *** Joins: kieran (kieran@moz-c5gk5j.ihug.co.nz)
[15:18:50] *** Joins: newbiz (newbiz@moz-9m0cr9.fbxo.proxad.net)
[15:18:51] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[15:19:02] <grncdr> and I want named fields which I don't think enums have (some of these types have 8-10 fields)
[15:19:27] <flan3002> playbot: enum A { Foo(i32), Bar { baz: i32 } }
[15:19:28] -playbot- ()
[15:19:35] <flan3002> grncdr - ^ they do
[15:19:35] *** Joins: dfinninger (dfinninger@moz-fe6.5n7.235.207.IP)
[15:19:38] <claudiop> mtsr, Thats not a problem. Got a second screen, and in case i do need a manual literally side of my code i3 is always an option ;)
[15:20:02] *** Quits: dfinninger (dfinninger@moz-fe6.5n7.235.207.IP) (Connection closed)
[15:20:09] *** Joins: dfinninger (dfinninger@moz-fe6.5n7.235.207.IP)
[15:20:13] *** Quits: mkoskar (mkoskar@moz-kd0.7us.139.37.IP) (Ping timeout: 121 seconds)
[15:20:35] *** Quits: colinsurprenant (colin@moz-rmn4e2.169.electronicbox.net) (Ping timeout: 121 seconds)
[15:20:37] *** Quits: daschl (Adium@moz-oirn1i.vie.surfer.at) (Quit: Leaving.)
[15:20:42] *** Quits: giucam (giucam@moz-u9jnsc.c665.0nib.2060.2001.IP) (Ping timeout: 121 seconds)
[15:21:08] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Quit: Leaving.)
[15:21:17] *** Quits: hjr3 (hradtke@moz-e235ok.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[15:21:18] *** Joins: Guest (textual@moz-rtn.fg7.77.192.IP)
[15:21:30] *** Joins: gonzaloserrano1 (Adium@moz-1nv.3t7.97.62.IP)
[15:21:37] <grncdr> ok, I will reconsider using enums, but I'm also kind of curious about Reflection/Any
[15:21:47] *** Quits: gonzaloserrano (Adium@moz-1nv.3t7.97.62.IP) (Ping timeout: 121 seconds)
[15:21:50] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[15:21:53] <frankmcsherry> grncdr: it is good to learn about! but, it also forces you to deal with all its sticky issues.
[15:21:53] *** Joins: jviereck (Adium@moz-5b4qom.97ug.g469.067c.2001.IP)
[15:22:12] *** Joins: jviereck1 (Adium@moz-5b4qom.97ug.g469.067c.2001.IP)
[15:22:17] *** Quits: jviereck (Adium@moz-5b4qom.97ug.g469.067c.2001.IP) (Connection closed)
[15:22:28] <flan3002> grncdr - You /can/ specialize code (in functions) for a specific type at compile time. Is that what you want?
[15:22:33] <datazombie> hi, I been trying to use postgres with rust and keep running into a numeric type error? anyone know how to get around it?
[15:22:39] *** Joins: jbcurtin (jbcurtin@moz-lskisb.LosAngeles1.Level3.net)
[15:22:40] *** Quits: newbiz (newbiz@moz-9m0cr9.fbxo.proxad.net) (Quit: Leaving)
[15:22:43] <frankmcsherry> grncdr: I would say, if you can actually enumerate the types you are interested in, enums. If you can't enumerate them (so, so many, or perhaps because you don't yet know), Any would probably be good?
[15:22:56] *** Quits: kieran (kieran@moz-c5gk5j.ihug.co.nz) (Ping timeout: 121 seconds)
[15:23:02] *** Joins: newbiz (newbiz@moz-9m0cr9.fbxo.proxad.net)
[15:23:43] *** Quits: m104ru (m104ru@moz-j4k.8g6.153.93.IP) (Ping timeout: 121 seconds)
[15:23:53] *** Quits: jviereck1 (Adium@moz-5b4qom.97ug.g469.067c.2001.IP) (Quit: Leaving.)
[15:25:17] *** Joins: stomper (Mibbit@moz-69v7vh.pool.digikabel.hu)
[15:25:17] <grncdr> flan3002: not sure I understand exactly what you mean. I think my desire is some sort of String -> Type magic, where I end up with a *value* that I can put in-between angle brackets
[15:25:45] <grncdr> e.g. var T = get_type_from_string(s); generic_fn::<T>();
[15:26:10] *** Quits: ebel (rory@moz-l1ldq7.hsi4.kabel-badenwuerttemberg.de) (Connection closed)
[15:26:10] *** Joins: arBmind (Andreas@moz-nh8gq8.adsl.alicedsl.de)
[15:26:14] <grncdr> … not sure what that `var` is doing there… ;)
[15:26:15] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[15:27:00] *** Quits: giogadi (Mibbit@moz-sflf2p.biz.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[15:27:21] <mtsr> claudiop: Pretty much what I do on the go, except for the tiling window manager (I'm on OS X).
[15:27:55] *** Joins: asQuirreL (asQuirreL@moz-ro1qqu.ox.ac.uk)
[15:29:07] *** Quits: skade (skade@moz-4eh.d50.201.212.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:29:41] *** Joins: tomprogrammer (thomas@moz-0m8ccn.tr5r.qept.4dd0.2001.IP)
[15:30:12] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[15:30:15] *** Joins: zerosign (bzlandfill@moz-20e.65o.253.182.IP)
[15:30:18] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[15:30:23] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[15:30:24] <bluss> grncdr: that kind of stuff doesn't exist
[15:30:52] *** Quits: mdibaiee (mahdi@moz-ipf.n3s.129.78.IP) (Ping timeout: 121 seconds)
[15:30:54] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[15:31:12] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[15:31:43] *** Quits: bytewise (bytewise@moz-he6t2a.eduroam.rwth-aachen.de) (Quit: Quit)
[15:32:29] *** Joins: veqz (veqz@moz-nvr8g6.209.getinternet.no)
[15:32:43] *** Joins: btobolaski (btobolaski@moz-ltbh80.va.comcast.net)
[15:33:18] *** Joins: jviereck (Adium@moz-co2tva.ethz.ch)
[15:34:10] <frankmcsherry> grncdr: The closest I can think of is you writing get_type_from_string(s: String) -> EnumOfYourFavTypes, and then calling generic_fn on the result.
[15:34:28] *** Joins: j1n3l0 (Mibbit@moz-c07.egd.168.194.IP)
[15:34:33] <frankmcsherry> grncdr: but someone has to tell Rust what the types are that you want to talk about.
[15:34:42] <grncdr> yeah I get that
[15:34:46] <j1n3l0> hiya
[15:34:56] <j1n3l0> how do i enable an unstable feature?
[15:35:13] <j1n3l0> going through rustbyexample
[15:35:19] *** Quits: pakupaku (pl@moz-jse.is7.143.79.IP) (Ping timeout: 121 seconds)
[15:35:24] <j1n3l0> benchmarking chapter
[15:35:25] <steveklabnik> j1n3l0: hey hey. you need to use a nightly build of the compiler
[15:35:30] <steveklabnik> rather than the beta version
[15:35:34] *** Joins: borromakot (Adium@moz-rdo.h3t.104.38.IP)
[15:35:39] <j1n3l0> ah!
[15:35:51] <steveklabnik> unstable features are only available in nightly builds. that way, you can choose the release that fits your case
[15:35:57] <j1n3l0> ok ...
[15:36:05] <frankmcsherry> grncdr: this https://github.com/chris-morgan/anymap might be useful, at least to pick up Any info.
[15:36:05] <stomper> hi, how can I fix this fault? playpen link: http://goo.gl/eas1oK    I want to put stuff into a hashmap containing a hashmap and I'd prefer if I had to do 1 lookup per hashmap and handle every case elegantly. My half solution does not compile and I did not even touch the m2 variable yet. Any idea?
[15:36:11] <j1n3l0> how do i switch to the nightly build?
[15:36:19] <steveklabnik> if your code compiles with stable, you can know it will compile into the future. if you use unstable features, and use nightly, then you know things can in theory break
[15:36:20] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[15:36:22] <j1n3l0> the default seems to be the stable
[15:36:32] <steveklabnik> yup, that's the one we reccomend to most people
[15:36:39] <steveklabnik> what platform are you on?
[15:36:54] <j1n3l0> linux
[15:36:58] <j1n3l0> ubuntu 14.04
[15:36:59] <steveklabnik> so, i am too, debian
[15:37:00] <j1n3l0> ps: just exploring the language via the books at the moment
[15:37:01] <grncdr> thanks frankmcsherry, I have been looking at that as well.
[15:37:11] <steveklabnik> i personally use http://github.com/brson/multirust, which lets you have both installed
[15:37:12] <filsmick> are mutexes ever the right thing to use, besides performance-critical code?
[15:37:14] *** Quits: tomprogrammer (thomas@moz-0m8ccn.tr5r.qept.4dd0.2001.IP) (Quit: WeeChat 1.1.1)
[15:37:22] <filsmick> +1 on multirust, this thing works great
[15:37:23] <steveklabnik> and you can just 'multirust override nightly' to switch to nightly, and 'multirust override beta' to switch to beta
[15:37:32] *** Joins: kzx (nickv@moz-jop4kg.fios.verizon.net)
[15:37:41] <j1n3l0> ta
[15:37:52] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[15:38:07] *** Quits: thelastinuit (thelastinui@moz-doh.aqt.240.148.IP) (Quit: Textual IRC Client: www.textualapp.com)
[15:38:15] <WindowsBunny> filsmick: If you need to access something mutably from multiple threads, and atomics are not sufficient, then you need mutexes
[15:38:18] <borromakot> so, I'm using pipes to connect the stdin and stdout of multiple commands.  So I do an io::copy of one Command's out to another's in.  Then, however, I do the same thing again to a third command, and the read on that one never completes.
[15:38:49] *** Joins: pakupaku (pl@moz-jse.is7.143.79.IP)
[15:38:55] <filsmick> WindowsBunny: of course, but I'm wondering if one is supposed to refactor and use channels, or mutexes are truly best practice in this game
[15:39:22] <filsmick> WindowsBunny: I care about clean and idiomatic code more than performance in my case
[15:39:27] <borromakot> The implementation of my last comment could very well  be the issue, I'm just wondering if there is something that I need to do to make the io::copy stop once the command has completed.
[15:39:31] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[15:39:54] <WindowsBunny> filsmick: It really depends
[15:40:34] <WindowsBunny> filsmick: if you need to share a lot of state between some threads, it might be better to use mutexes
[15:40:43] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[15:41:46] *** Joins: npm (npm@moz-160.mg6.56.172.IP)
[15:41:55] *** Quits: GBGamer (npm@moz-92sbjt.wa.comcast.net) (Ping timeout: 121 seconds)
[15:42:02] *** npm is now known as GBGamer
[15:42:48] *** Quits: xuu (xuu@moz-a0r8ua.ipv6.he.net) (Ping timeout: 121 seconds)
[15:42:48] *** Joins: atomic (atomic@moz-kvs6fc.torservers.net)
[15:43:07] *** Joins: hjr3 (hradtke@moz-e235ok.fios.verizon.net)
[15:43:07] *** Quits: zerosign (bzlandfill@moz-20e.65o.253.182.IP) (Quit: CGI:IRC)
[15:43:12] *** Joins: zerosign (bzlandfill@moz-20e.65o.253.182.IP)
[15:43:15] <filsmick> WindowsBunny: well, I'm not sure what to use. You see, I parse a file, and have two possible representations. One will be used by the main thread, and the other by children threads. They need to reference each other - fields of the first representation refer to fields of the second one. A Mutex owns the data it contains, right? 
[15:43:20] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[15:43:24] *** Quits: zerosign (bzlandfill@moz-20e.65o.253.182.IP) (Quit: CGI:IRC)
[15:43:30] <WindowsBunny> a Mutex owns its data
[15:43:32] *** Joins: zerosign (bzlandfill@moz-20e.65o.253.182.IP)
[15:43:39] *** Quits: areski (areski@moz-erfa2b.dynamicIP.rima-tde.net) (Quit: Leaving)
[15:43:40] *** Quits: zerosign (bzlandfill@moz-20e.65o.253.182.IP) (Quit: CGI:IRC)
[15:43:46] *** Joins: areski (areski@moz-erfa2b.dynamicIP.rima-tde.net)
[15:43:49] *** Joins: daschl (Adium@moz-oirn1i.vie.surfer.at)
[15:44:12] <WindowsBunny> If you'll have multiple threads trying to read at the same time, you can use RwLock instead of Mutex
[15:44:28] <filsmick> WindowsBunny: alright, it owns its data. Let's say I make representation A the owner of the data. How can I thread-safely access that data from representation B using references? (changes to one must be reflected in the other)
[15:44:43] *** Quits: james4k (james@moz-ao8aj6.consolidated.net) (Ping timeout: 121 seconds)
[15:44:44] <WindowsBunny> that won't work
[15:44:58] *** Joins: zerosign (bzlandfill@moz-20e.65o.253.182.IP)
[15:44:58] *** Quits: zerosign (bzlandfill@moz-20e.65o.253.182.IP) (Quit: CGI:IRC)
[15:45:18] <filsmick> So... I should share ownership and use an Arc?
[15:45:39] <WindowsBunny> filsmick: Pretty much when you use a Mutex you'll probably want it in an Arc
[15:46:03] <WindowsBunny> There's really no way to share it across non-scoped threads otherwise
[15:46:17] *** Joins: lutter1 (lutter@moz-7v7ueu.PUBLIC.monkeybrains.net)
[15:46:21] *** Quits: KLP (KLP@moz-qdcjho.res.rr.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[15:46:42] <filsmick> WindowsBunny: mmh, so I create the Arc<Mutex<T>>, clone it into representation A, and again into representation B, so they share ownership. Now I can access the *same* data from separate threads. Will that work?
[15:46:52] <WindowsBunny> yes
[15:47:14] *** Joins: dstrbad (dstrbad@moz-fgge1q.dsl.iskon.hr)
[15:47:17] <WindowsBunny> Just remember that while one thread has a lock on the mutex, the other threads cannot lock it
[15:47:23] *** Joins: AngelOfSol (AngelOfSol@moz-uo0.c3h.21.129.IP)
[15:47:56] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[15:48:28] <filsmick> WindowsBunny: I know, that's the point of a mutex, right? They block and wait until it's released.
[15:48:37] <WindowsBunny> yep
[15:48:49] <FreeFull> WindowsBunny: Isn't it extremely hard to hit a case where RwLock is more performant than Mutex?
[15:48:52] <borromakot> so when I make a pipe from a command to another, if I pipe the second command's stdout to third one's stdin, apparently that second one is never writing an EOF.  So io::copy() reads forever.  Has anyone dealt with anything like this before?
[15:48:56] <filsmick> glad I got something right for once :) thank you for your help, it's much clearer now!
[15:49:04] <WindowsBunny> FreeFull: On Windows RwLock is the same thing as Mutex
[15:49:16] *** Joins: marcusklaas (marcus@moz-2i0c3k.dynamic.ziggo.nl)
[15:49:25] <filsmick> WindowsBunny: what's the difference on *nix?
[15:49:25] *** Joins: savage884 (dev@moz-39ha0d.com)
[15:49:29] *** Joins: Fiveside (fiveside@moz-t2eatg.vsp.com)
[15:49:35] *** Joins: xuu (xuu@moz-9h1gkh.ktc.sour.is)
[15:49:36] <WindowsBunny> filsmick: I dunno, do I look like a LinuxBunny to you?
[15:50:00] <FreeFull> WindowsBunny: Well, there is no sense in recommending it over Mutex on Windows then
[15:50:00] *** Joins: giucam (giucam@moz-iv0nnc.bb.dnainternet.fi)
[15:50:16] <filsmick> WindowsBunny: I... what. This made my day, I didn't think you were referring to Windows as in, the OS
[15:50:30] <WindowsBunny> !WindowsBunny
[15:50:30] <rustbot> Retep998, the local expert on Windows and bunnies.
[15:50:31] <filsmick> WindowsBunny: thanks for the laugh, I froze for a few seconds
[15:50:32] <savage884> Ok, so all the documentation and this nice article I'm reading seem to be saying that, when you call .map() on an option type, it goes from option type A to option type B, or something like that. But it never behaves that way for me. It goes instead from option A to option option B, which is... Unergenomic, to say the least. Am I screwing something up?
[15:50:37] <kzx> filsmick: rwlock can allow multiple readers to acquire it, say if you have a cache and multiple reader threads can access it 
[15:50:56] <borromakot> savage884: are you familiar with monads?
[15:51:00] *** Joins: tetsuharu (tetsuharu@moz-fmjbd6.ucom.ne.jp)
[15:51:13] <FreeFull> filsmick: What did you think it was?
[15:51:19] <savage884> borromakot: No.
[15:51:20] <filsmick> kzx, FreeFull: then why would one ever use a Mutex over a RwLock, since it allows concurrent writes, and why would a RwLock be less efficient?
[15:51:36] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[15:51:37] <WindowsBunny> filsmick: On some platforms Mutex is implemented more efficiently than RwLock
[15:51:44] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[15:51:47] *** Quits: pakupaku (pl@moz-jse.is7.143.79.IP) (Ping timeout: 121 seconds)
[15:51:49] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[15:51:50] <Ilari> There isn't any trait bounds that could express something that works like array or slice (I.e. indexing with fixed type plus len method), right? I found Index and IndexMut, but no bound for len...
[15:51:58] <filsmick> FreeFull: I don't know, a bunny who jumps through windows? A lot of usernames make no sense, really, so I didn't pay much attention to this one. For example, yours: I have no idea what you meant 
[15:52:03] *** Quits: dstrbad (dstrbad@moz-fgge1q.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[15:52:17] <FreeFull> filsmick: RwLock will be more efficient if you basically never do any writes whatsoever
[15:52:19] <kzx> filsmick: rwlock sometimes take more time to acquire because there might be more management needed to be done
[15:52:30] <FreeFull> filsmick: My nick is pretty meaningless
[15:52:31] <WindowsBunny> filsmick: And Mutex can often be more fair than RwLock
[15:52:32] *** Joins: stjahns_ (stjahns@moz-9oh245.ed.shawcable.net)
[15:52:46] <filsmick> WindowsBunny, FreeFull, kzx: I guess I'm better off using Mutex then. Thanks
[15:53:03] <borromakot> savage884: map behaves monadically.  So if you are mapping to the option, and the function that you apply to whatever is in the option returns an option, then you do get Option<Option<T>> if that makes sense.  if it doesn't then you just go from Option<T> to Option<U>.  This is the function signature of Option::map -> fn https://doc.rust-lang.org/std/option/enum.Option.html#method.map<U, F>(self, f: F) -> https://doc.rust-lang.org/std/option/enum.Option
[15:53:03] <borromakot> where F: https://doc.rust-lang.org/std/ops/trait.FnOnce.html(T) -> U
[15:53:03] <WindowsBunny> Just use Mutex, unless you can benefit from RwLock, in which case use RwLock
[15:53:09] *** Joins: munksgaa1d (munksgaard@moz-urnkl5.u.parknet.dk)
[15:53:23] <filsmick> WindowsBunny: "Use A, unless B is better for you, in which case use B"
[15:53:24] <borromakot> that was strange, with the links.  I guess don't copy from the docs haha.
[15:53:33] <filsmick> WindowsBunny: I will :)
[15:53:51] *** Joins: tomprogrammer (thomas@moz-1biq3o.tr5r.qept.4dd0.2001.IP)
[15:53:52] <WindowsBunny> filsmick: Some people have trouble coming to that conclusion
[15:53:54] <borromakot> savage884: what function are you applying to the element inside the map?
[15:53:56] <FreeFull> filsmick: If you want to try RwLock, definitely benchmark to compare it with Mutex
[15:54:04] <borromakot> sorry *inside the option
[15:54:43] <filsmick> FreeFull: no need for that in my case, reads and writes are done every few hundreds of milliseconds or seconds
[15:54:55] <filsmick> I know enough to make a prototype, thanks to you
[15:54:56] <FreeFull> filsmick: Definitely Mutex then
[15:54:56] <WindowsBunny> filsmick: Also, RwLock requires Sync + Send, while Mutex is only Send
[15:54:56] *** Quits: j1n3l0 (Mibbit@moz-c07.egd.168.194.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:55:11] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[15:55:22] <savage884> borromakot: Crap. So map is *adding* an extra layer of optioniness. See, it took me forever to realize that and_then() did what I wanted because the documetnation for the two are so similar (or were when I looked originally?).
[15:55:24] <WindowsBunny> So sometimes you won't be able to use RwLock
[15:55:33] <filsmick> WindowsBunny: good to know. So I couldn't use an i32 in a WindowsBunny, since it's not atomic?
[15:55:39] <filsmick> WindowsBunny: in a RwLock***
[15:55:51] <savage884> borromakot: So map is something you don't want to use unless your return value is *not* an option. Like, you'd never really use it on .parse()?
[15:55:54] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[15:55:55] <FreeFull> filsmick: Yeah, i32 is Send but not Sync
[15:56:03] <WindowsBunny> FreeFull: u wot?
[15:56:08] <WindowsBunny> i32 is Send and Sync
[15:56:08] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[15:56:25] <FreeFull> Oh, it might be Sync because it's Copy?
[15:56:26] <FreeFull> HMm
[15:56:30] <bluss> "most" types are Send + Sync
[15:56:34] <simias> Sync is not atomic
[15:56:37] <WindowsBunny> It is Sync because it doesn't have interior mutability
[15:56:42] <FreeFull> Ok
[15:56:50] *** Joins: GaryOak_ (GaryOak_@moz-etoj16.hfc.comcastbusiness.net)
[15:56:51] <bluss> primitives, collections etc are
[15:56:56] <filsmick> why do we have AtomicIsize then?
[15:57:00] <WindowsBunny> Any type which has interior mutability or works with low level OS/IO things that might not be threads safe, is not Sync
[15:57:08] <bluss> filsmick: modifiable through a shared reference
[15:57:11] <WindowsBunny> filsmick: Because that allows interior mutability in a Sync manner
[15:57:12] <borromakot> savage884: you *probably* don't want to map a function that returns an option to an option, because then you're doubly in an option.  But that is how it should be.
[15:57:21] *** Quits: zmack (zmack@moz-1oe.89t.76.82.IP) (Connection closed)
[15:57:30] <WindowsBunny> filsmick: Whereas a regular primitive doesn't allow interior mutability
[15:57:55] <hoverbear> savage884: There is also .and_then()
[15:58:09] <WindowsBunny> filsmick: atomics are for when you want shared state without big heavy locks
[15:58:21] <borromakot> save884: and_then is a flatmap.
[15:58:44] <FreeFull> and_then is the monadic bind for Option, if you speak Haskell
[15:58:49] <filsmick> WindowsBunny: oh, so an AtomicIsize is like an isize in a Mutex?
[15:58:53] <filsmick> (sort of)
[15:59:09] <WindowsBunny> filsmick: Atomics are very fast and very cheap
[15:59:26] <FreeFull> Atomics don't require locking
[15:59:26] <filsmick> WindowsBunny: that was my guess, they use dedicated instructions?
[15:59:31] <WindowsBunny> filsmick: yep
[15:59:31] <borromakot> FreeFull: I've actually been wondering why all of these monads don't have the classic names for functions.
[15:59:37] <WindowsBunny> You do individual atomic operations on them
[15:59:44] <savage884> I'm glad this blog post came up on whatsit.
[16:00:05] *** Joins: saneyuki (tetsuharu@moz-fmjbd6.ucom.ne.jp)
[16:00:08] <WindowsBunny> borromakot: Because Rust decided to go with names that make sense to a normal person rather than to a type theorist
[16:00:30] <borromakot> WindowsBunny: point and match :D
[16:00:35] *** Joins: gopar (gopar@moz-5039uj.ca.comcast.net)
[16:00:39] *** Quits: stomper (Mibbit@moz-69v7vh.pool.digikabel.hu) (Quit: http://www.mibbit.com ajax IRC Client)
[16:00:43] *** Quits: jtdowney (jtdowney@moz-gh1isj.static.twtelecom.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:00:45] <WindowsBunny> Rust caters to the C++ programmer that can't be bothered learning what a monad is through comparisons with burritos
[16:00:56] *** Joins: mkoskar (mkoskar@moz-j5rng1.tor-exit.network)
[16:00:57] *** Quits: jviereck (Adium@moz-co2tva.ethz.ch) (Quit: Leaving.)
[16:01:04] <filsmick> +1 for burritos
[16:01:07] <WindowsBunny> or the monoid thingy endofunctor I don't know I never learned this shit
[16:01:16] <FreeFull> I wonder how well F# teaches monads
[16:01:19] <bluss> I don't like the and/or method names, too confusing
[16:01:24] <FreeFull> Maybe everyone who wants to learn about them should be directed to F#
[16:01:42] <filsmick> what's the standard way to split a collection into smaller ones when you encounter an element in it?
[16:01:50] *** Joins: Savago (Savago@moz-k613vv.ca.comcast.net)
[16:02:06] *** Quits: tetsuharu (tetsuharu@moz-fmjbd6.ucom.ne.jp) (Ping timeout: 121 seconds)
[16:02:15] *** Quits: Ralith (ralith@moz-tiaj7p.customer.broadstripe.net) (Ping timeout: 121 seconds)
[16:02:24] <borromakot> FreeFull: honestly, if you're willing to sacrifice a few function names, then Rust is the best place to really learn about monads IMO.
[16:02:26] <WindowsBunny> filsmick: Vec::split_off
[16:02:30] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[16:02:37] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[16:02:42] *** Quits: savage884 (dev@moz-39ha0d.com) (Quit: leaving)
[16:02:45] <borromakot> people might not even know that is what they are learning, but it is.
[16:02:46] <WindowsBunny> filsmick: Thats if you actually want to split the collection, if you just have slices, its easier
[16:02:49] <filsmick> Let me elaborate: you have ["NAME", "value1", "value2", "", "NAME2", "anothervalue"], and you want to split that into ["NAME", "value1", "value2"] and ["NAME2", "anothervalue"]
[16:03:07] <WindowsBunny> filsmick: Are you just working with slices?
[16:03:19] *** Joins: jtdowney (jtdowney@moz-gh1isj.static.twtelecom.net)
[16:03:22] <filsmick> WindowsBunny: actually, a Lines iterator over the contents of a file 
[16:03:27] <WindowsBunny> ick
[16:03:56] <borromakot> does no one have any ideas on the io::copy and pipes() issue I've been having?
[16:04:35] <bluss> I think itertools.group_by can solve that filsmick. Not sure what's the most convenient way though
[16:04:38] *** Quits: frankmcsherry (frankmcsher@moz-i3sjud.dynamic.kabel-deutschland.de) (Connection closed)
[16:05:02] *** Joins: sysko1 (bst@moz-cpv.glf.227.116.IP)
[16:05:13] *** Quits: new_one (new_one@moz-mpr.u49.42.128.IP) (A TLS packet with unexpected length was received.)
[16:05:17] *** Quits: sysko (bst@moz-cpv.glf.227.116.IP) (Ping timeout: 121 seconds)
[16:05:17] *** Joins: Douman (Douman@moz-43o3d5.dynamic.mts-nn.ru)
[16:05:19] *** Quits: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP) (Ping timeout: 121 seconds)
[16:05:19] <filsmick> bluss: maybe I'm approaching the problem the wrong way... I need to parse a file and create structs out of blank-line-separated paragraphs
[16:05:25] <mbrubeck> borromakot: What's the latest issue?
[16:05:48] <filsmick> bluss: I'm taking a look at group_by
[16:05:50] <bluss> filsmick: it would be easy to do with a for loop, no?
[16:05:53] <hoverbear> WindowsBunny: I want a burrito
[16:06:15] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[16:06:16] *** Joins: dstrbad (dstrbad@moz-fgge1q.dsl.iskon.hr)
[16:06:18] <datazombie> Hello, I need some help with rust and postgres anyone available?
[16:06:22] <filsmick> bluss: probably, that's what I would have done in C, but I see a lot of problems have iterator-based solutions
[16:06:29] <borromakot> mbrubeck: So with two commands, everything is working fine when they are connected by a io::copy() pipe().  However, when I copy the stdout pipe from the second to a stdin pipe() on a third, it appears to never receive EOF, and hence never stop reading.
[16:06:32] <filsmick> bluss: so I wanted to try and see if they could help me with that first
[16:06:33] *** Joins: vmeson (rmacleod@moz-hq5.1km.224.128.IP)
[16:06:35] <WindowsBunny> hoverbear: Lets arrange a rust meetup where we eat burritos and make rust metaphors with them
[16:06:59] <borromakot> mbrubeck: this is for *any* set of commands linked by pipes.
[16:07:03] <hoverbear> WindowsBunny: Sold.
[16:07:09] <bluss> filsmick: or itertools.batching if you want to put sort of a loop for each paragraph inside that
[16:07:09] *** Quits: dstrbad (dstrbad@moz-fgge1q.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[16:07:16] <filsmick> bluss: I do
[16:07:17] <borromakot> why can't there be any rustaceans in chicago though?
[16:07:22] <hoverbear> datazombie: Might be able to help a bit, not particularly familiar with rust-postgres though
[16:07:33] <filsmick> bluss: can I try exposing the problem at a higher-level?
[16:07:37] <tomaka> datazombie: Don't ask to ask! just ask
[16:07:43] *** Joins: exadra37 (Mibbit@moz-0itutg.fluency.net.uk)
[16:08:07] *** Quits: fyolnish (fyolnish@moz-3gjd0b.so-net.ne.jp) (Connection closed)
[16:08:14] <mbrubeck> borromakot: This probably depends on the commands.  For example, if the middle (i.e. second) command is `cat`, then it won't send an EOF until it receives one.
[16:08:21] <bluss> something like this ought to collect paragraphs split by empty lines in vecs lines.batching(|mut it| it.by_ref().take_while(|l| !l.is_empty_line()).collect::<Vec<_>>())
[16:08:24] <datazombie> I have some issues regarding numeric types with rust and the rust crate I keep getting the WrongType(Numeric) my example app. I am brand new to rust
[16:09:08] *** Quits: yuja (yuja@moz-5pp8ro.so-net.ne.jp) (Ping timeout: 121 seconds)
[16:09:11] <borromakot> mbrubeck: `ps | grep root | grep root`
[16:09:33] <mbrubeck> Actually, I'm not sure `io::copy` will ever write 0 bytes... http://doc.rust-lang.org/src/std/io/util.rs.html#31-4
[16:09:41] <mbrubeck> I forgot that EOF is no longer an Err
[16:10:00] *** Joins: qard (qard@moz-nekdha.vc.shawcable.net)
[16:10:17] *** Joins: Torun (Torun@moz-34f2ia.dip0.t-ipconnect.de)
[16:10:40] *** Joins: davebettin (davebettin@moz-rnhkmd.bendcable.com)
[16:11:20] <borromakot> would it potentially be a good idea to instead of copying the old process to the new one, to have the new one inherit() stdout and then bind to that?
[16:11:30] <borromakot> then the last one would just be copied to stdout
[16:11:52] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[16:12:02] <filsmick> bluss: thanks! Just in case, here is a higher-level description of the problem: https://gist.github.com/anonymous/3dbe80ecf2d0438a71a4
[16:12:10] <mbrubeck> borromakot: Yeah, possibly...
[16:12:12] *** Quits: jtdowney (jtdowney@moz-gh1isj.static.twtelecom.net) (Quit: Textual IRC Client: www.textualapp.com)
[16:12:31] <filsmick> bluss: I think I can make it work with your sample, but I don't think it'll be very clean - the price for parsing data without a proper parser I guess :)
[16:12:53] <mbrubeck> borromakot: For closing the pipe, you could see if explicitly writing 0 bytes to it works, using .write(&[])
[16:12:58] *** ahal is now known as ahal|lunch
[16:13:02] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[16:13:39] <borromakot> mbrubeck: for doing that I would have to flush the pipe before doing so, and that would lose the benefits I'm getting from concurrency, correct?
[16:13:52] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[16:14:14] *** Joins: thelastinuit (thelastinui@moz-doh.aqt.240.148.IP)
[16:14:15] *** Joins: skade (skade@moz-6athcr.pools.vodafone-ip.de)
[16:14:16] *** Quits: timonv (timonv@moz-7btgcn.dynamic.ziggo.nl) (Ping timeout: 121 seconds)
[16:14:36] <mbrubeck> borromakot: Note that `copy` is *not* async.  It blocks the thread that it's running on.  If you are doing this concurrently, then both the copy and the flush can be on the same background thread.
[16:14:46] <currysoup> Hey everyone - I was just wondering if anyone knew why you need to do collection.iter().fold(...) instead of just collections.fold(...) atleast for Vec
[16:14:51] *** Quits: thelastinuit (thelastinui@moz-doh.aqt.240.148.IP) (Quit: Textual IRC Client: www.textualapp.com)
[16:15:02] <mbrubeck> borromakot: copy is literally just calling read() and write() in a loop
[16:15:11] <currysoup> Seems like a nice place to have some kind of compiler sugar
[16:15:22] <borromakot> mbrubeck: its not async, but it doesn't block the command that has the pipe thats being written to, right?
[16:15:34] *** Quits: arBmind (Andreas@moz-nh8gq8.adsl.alicedsl.de) (Connection closed)
[16:15:35] <borromakot> mbrubeck: that was a weird way to say that.
[16:16:00] <mbrubeck> borromakot: right -- it doesn't block anything in the child processes, of course -- unless they are blocking on input
[16:16:12] <mbrubeck> borromakot: But I'm saying that adding an additional write() call after the copy won't change anything.
[16:16:16] <steveklabnik> currysoup: explicit choice. iter is &T, into_iter is T, and iter_mut is &T. the decision was made to prefer explicitness here
[16:16:30] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[16:16:30] <steveklabnik> currysoup: that siad, in a for loop, for i in collection, for i in &collection,and for i in &mut collection Just Work
[16:16:33] <steveklabnik> said
[16:16:36] <borromakot> mbrubeck: oh I see what you are saying.  After the copy is complete I can tell it to write an EOF or 0 bytes or something to close it.
[16:16:38] *** Quits: Chef (Chef@moz-1trbhq.dsl.teksavvy.com) (Ping timeout: 121 seconds)
[16:16:43] <borromakot> mbrubeck: gotta run but thanks! :D
[16:17:02] <mbrubeck> borromakot: Yup. Not sure if it'll work or not. :P
[16:17:49] *** Quits: borromakot (Adium@moz-rdo.h3t.104.38.IP) (Quit: Leaving.)
[16:18:54] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[16:19:00] *** Joins: pakupaku (pl@moz-jse.is7.143.79.IP)
[16:19:16] *** Quits: grncdr (Adium@moz-m1g.e47.90.95.IP) (Quit: Leaving.)
[16:19:20] <currysoup> steveklabnik: klabnik-sama noticed me /swoons <3  Yeah I appreciate intoiter is for moving it just seems explicitly mentioning the iterator every time you want to use a functional idiom (fold, map, etc.) is a little messy - it's am implementation detail of the collection which is irrelevant to reiterate on every invocation
[16:19:58] <XMPPwocky> currysoup: the point is, iterators aren't just over collections
[16:20:11] <XMPPwocky> that said, i wouldn't mind if adaptors took T: IntoIterator instead
[16:20:14] <gsingh93> does anyone here know how to use the string-cache library? it's not documented very well
[16:20:24] *** Quits: ekiwi (kevin@moz-5k3svi.eduroam.rwth-aachen.de) (Client exited)
[16:20:47] *** Quits: stjahns_ (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[16:21:08] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[16:21:41] <currysoup> XMPPwocky: Totally, it's just that I don't think it would hurt to make iterators implicit sometimes - they're totally pervasive in the language anyway 
[16:22:07] *** Joins: egor-laufer (uid78368@moz-ptdej8.uxbridge.irccloud.com)
[16:22:27] *** Quits: sonder (chatzilla@moz-nt8r49.idi.ntnu.no) (Ping timeout: 121 seconds)
[16:22:29] *** Joins: grncdr (Adium@moz-m1g.e47.90.95.IP)
[16:22:32] *** Joins: ryanxcharles (ryan@moz-lcf.eq6.124.64.IP)
[16:22:33] <mbrubeck> I think there's been some worry that taking every method implemented for Iterator and also implementing for every type that implements IntoIterator
[16:22:37] <mbrubeck> would cause too many name clashes
[16:22:41] <XMPPwocky> yeah
[16:22:51] <mbrubeck> though maybe that's a good thing, since cases where the names clash are likely to be confusing
[16:23:03] <XMPPwocky> option/result have a map, for example
[16:23:26] *** Quits: Torun (Torun@moz-34f2ia.dip0.t-ipconnect.de) (Quit: Leaving)
[16:23:26] *** Joins: envi_un (envi@moz-ih5.olo.169.121.IP)
[16:23:28] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[16:23:49] *** Joins: forgottenone (forgottenon@moz-igt.26m.45.92.IP)
[16:24:17] <mbrubeck> though semantically at least, option.into_iter().map(...) is the same as option.map(...), and similarly for Result
[16:24:36] <mbrubeck> Not sure whether they optimize to the same machine code, though.
[16:24:38] <XMPPwocky> .map().next(), you mean?
[16:24:40] <mbrubeck> Hopefully
[16:24:42] <mkpankov> steveklabnik: Hi Steve, is there any talk you could recommend for giving to newbies?
[16:24:44] <XMPPwocky> and result wouldn't work
[16:24:51] <mkpankov> like, for first-timers at meetup
[16:24:51] <mbrubeck> Oh right, Iterator::map returns another iterator
[16:25:01] *** Quits: alonlevy (alon@moz-jea.st2.250.85.IP) (Quit: Leaving)
[16:25:10] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Ping timeout: 121 seconds)
[16:25:12] <mkpankov> looking for some inspiration :)
[16:25:16] *** Quits: qard (qard@moz-nekdha.vc.shawcable.net) (Connection closed)
[16:25:18] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[16:25:39] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[16:25:50] <rovar> mkpankov, are you trying to convince them to use Rust, or teach them?
[16:26:48] *** Quits: _ixti_ (ixti@moz-i3d.dae.119.188.IP) (A TLS packet with unexpected length was received.)
[16:26:56] *** Quits: Guest63_ (textual@moz-qfs.570.70.83.IP) (Ping timeout: 121 seconds)
[16:27:01] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[16:27:03] *** Quits: envi_u (envi@moz-ih5.olo.169.121.IP) (Ping timeout: 121 seconds)
[16:27:11] *** Quits: laparca (laparca@moz-rgcs06.mgob.kh00.0488.2a01.IP) (Quit: Leaving.)
[16:27:38] *** Joins: borromakot (Adium@moz-rdo.h3t.104.38.IP)
[16:27:43] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[16:27:44] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[16:27:44] <mkpankov> rovar: who knows, I'd guess I first have to show why Rust matters
[16:28:06] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Connection closed)
[16:28:07] <mkpankov> and overcome the scepticism of life-long C++ programmers :D
[16:28:24] *** Quits: borromakot (Adium@moz-rdo.h3t.104.38.IP) (Quit: Leaving.)
[16:28:41] <rovar> why Rust matters seems like a great title for a Talk
[16:28:59] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[16:29:13] <rovar> what about Rust could possibly appeal to a C++ programmer?
[16:29:20] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[16:29:25] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[16:29:26] *** Joins: qard (qard@moz-nekdha.vc.shawcable.net)
[16:29:26] *** Joins: npm (npm@moz-urd.pod.125.50.IP)
[16:29:28] *** Quits: GBGamer (npm@moz-160.mg6.56.172.IP) (Connection closed)
[16:29:41] *** darkowlzz|afk is now known as darkowlzz
[16:29:58] <spastorino> is there someone involved with multirust here?
[16:30:06] <rovar> maybe the ability to write concurrent programs that are proven safe at compile time? http://blog.rust-lang.org/2015/04/10/Fearless-Concurrency.html
[16:30:09] * penguin42 is reading the docs as a life-long C (with some C++) programmer
[16:30:19] <rovar> spastorino, brson
[16:30:40] <spastorino> rovar: yep didn't see him online
[16:31:09] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[16:31:53] <spastorino> rovar: I'd like to know if it's possible to tag and upload a tar.gz so a homebrew formula can be built
[16:31:57] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[16:31:58] <spastorino> not sure if you have any idea
[16:32:15] <rovar> not a clue,  I use neither multirust nor osx
[16:32:19] <penguin42> rovar: IMHO the safety is nice, there's lots of other languages more modern than C/C++ but they mostly seem to be VM based (java/C# etc) so it's nice to have a language that generates good old fashion hard to nail down code
[16:32:20] *** Quits: rmgk_ (ragnar@moz-ofcii6.dyn.telefonica.de) (Connection closed)
[16:32:26] <spastorino> rovar: ok
[16:32:32] <spastorino> thanks
[16:32:38] *** Quits: envi_un (envi@moz-ih5.olo.169.121.IP) (Ping timeout: 121 seconds)
[16:32:44] *** Joins: jviereck (Adium@moz-p40urn.dclient.hispeed.ch)
[16:33:09] *** Joins: jesse99 (jjones@moz-iu7.is7.137.67.IP)
[16:33:37] *** Joins: rmgk (ragnar@moz-ofcii6.dyn.telefonica.de)
[16:34:09] *** Quits: pnkfelix (pnkfelix@moz-6v5.3nd.202.89.IP) (Connection closed)
[16:34:29] <mkpankov> at the same time, the irony of advertising safe concurrency when scoped-gate happened :)
[16:34:35] *** Joins: kgrandon (Adium@moz-mkm01r.2rkg.9kg1.0101.2620.IP)
[16:35:22] <rovar> I think most people were unaffected
[16:35:30] <mbrubeck> I'm gonna stick with fearful concurrency.  Rust but verify, you know.
[16:35:32] <mkpankov> yeah, me included
[16:35:40] <XMPPwocky> mbrubeck: please leave :|
[16:35:43] <mkpankov> ^about unaffected
[16:35:47] <rovar> lol
[16:35:58] <rovar> Pun limit exceeded
[16:36:18] <mkpankov> rerun the chat with RUST_BACKTRACE=1 to show line numbers
[16:36:18] <acrichto> burntsushi: ping
[16:36:25] *** Joins: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net)
[16:36:43] *** Quits: CustosLimen (CustosLimen@moz-43o.etd.160.41.IP) (Ping timeout: 121 seconds)
[16:36:50] <mbrubeck> I forgot that punning in rust requires an unsafe block.
[16:37:04] *** Quits: khades (Thunderbird@moz-u45.3vk.74.212.IP) (Client exited)
[16:37:11] *** Joins: arBmind (Andreas@moz-dii.srj.246.46.IP)
[16:37:59] *** Joins: khades (Thunderbird@moz-u45.3vk.74.212.IP)
[16:38:49] *** Quits: shellac (textual@moz-9b49cr.cable.virginm.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:39:27] *** Quits: rmgk (ragnar@moz-ofcii6.dyn.telefonica.de) (Ping timeout: 121 seconds)
[16:40:28] *** Quits: hjr3 (hradtke@moz-e235ok.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[16:40:42] *** Quits: marcusklaas (marcus@moz-2i0c3k.dynamic.ziggo.nl) (Client exited)
[16:40:42] *** Quits: exadra37 (Mibbit@moz-0itutg.fluency.net.uk) (Quit: http://www.mibbit.com ajax IRC Client)
[16:40:44] *** Quits: ptalbot (ptalbot@moz-p7j122.hk46.a8t0.0e35.2a01.IP) (Ping timeout: 121 seconds)
[16:41:05] *** Quits: errordeveloper (ilya@moz-8jq.ge6.157.37.IP) (Ping timeout: 121 seconds)
[16:41:30] *** Joins: rmgk (ragnar@moz-ofcii6.dyn.telefonica.de)
[16:42:45] *** Quits: blank_name (blank_name@moz-sct.ivp.36.50.IP) (Ping timeout: 121 seconds)
[16:43:41] <steveklabnik> mkpankov: pong
[16:43:51] <steveklabnik> mkpankov: depends on your audience, i think
[16:43:51] *** Joins: loyd (loyd@moz-uft.32f.108.213.IP)
[16:44:01] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[16:44:04] <steveklabnik> i've found that you need to pick: C++ people, or non-C++ people?
[16:44:09] <steveklabnik> it's really hard to address both audiences
[16:44:12] <steveklabnik> at the same time
[16:44:42] *** Joins: blank_name (blank_name@moz-kau.24b.36.50.IP)
[16:44:51] <XMPPwocky> clearly, just take the time to teach everybody C++ first!
[16:44:51] <mkpankov> steveklabnik: oh crap, I believe there's going to be a mix :|
[16:44:57] <ty> steveklabnik: there was a blog post a while back (not sure if it was yours) that I thought did a pretty good job of addressing both
[16:45:00] <XMPPwocky> then, 10 years later, you can introduce Rust
[16:45:31] <ty> it had the language semantics, types, and how the programa is assesmbled up top
[16:45:35] <mkpankov> started a poll to determine who's going to come, but well, polls... I don't trust them a whole lot :)
[16:45:52] <ty> and then stack vs heap, move vs copy semantics at the bottom
[16:46:19] <mkpankov> ty: I guess interpreted/managed people fall out by that point :D
[16:46:40] <ty> haha, I think it had a warning, but yeah, that's the goal
[16:46:44] <steveklabnik> ty: maybe :)
[16:46:53] <steveklabnik> mkpankov: it's not the worst! you just have to ask people to be a bit patient
[16:47:18] <steveklabnik> the C++ people will space out at stack/heap exaplanations, and the dynamic language people won't quickly pick up why the difference matters. i mean, some will
[16:47:25] <steveklabnik> obviously, this is all a HUUUUGE generalization
[16:47:54] *** Joins: arrdem_ (arrdem@moz-mho.ehc.170.107.IP)
[16:47:56] <mkpankov> yeah, well, I'm planning for the worst, so maybe I'll have to invite people again just because swag might not come in time :|
[16:47:58] *** Quits: arrdem_ (arrdem@moz-mho.ehc.170.107.IP) (Quit: leaving)
[16:48:11] <mkpankov> (Russian mail is notoriously slow)
[16:48:13] <XMPPwocky> i think it's important to explain the stack, but not so much the heap (except in opposition to the stack). the ol' dinner plate explanation seems to work pretty well
[16:48:33] *** Joins: chmanchester (chmancheste@moz-lmo.64e.222.162.IP)
[16:48:53] *** Joins: logan_e (logan_e@moz-mpr4r7.lsrhs.net)
[16:49:13] <XMPPwocky> i mean, i think you could go far with just variable scopes
[16:49:29] <XMPPwocky> you can't refer to something after it falls out of scope
[16:49:36] *** Joins: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se)
[16:49:55] *** bentley|away is now known as bentley
[16:50:06] <steveklabnik> eah thats a good one
[16:50:30] <XMPPwocky> the point of explaining the stack / heap for C seems largely to help programmers debug / understand why their code's broken
[16:50:40] <mkpankov> just need to stay focused, I once gone so deep into stack that I started to explain calling convention and how CPUs works :[
[16:50:59] <XMPPwocky> you don't need *as* deep an understanding of the underlying details in Rust, because if you mess up you get a compiler error
[16:51:13] *** Quits: nico (nico@moz-lkua9r.dip0.t-ipconnect.de) (Connection closed)
[16:51:14] <mkpankov> yep, guess I'll figure smth out
[16:51:22] *** Quits: ptc (textual@moz-93hhba.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:52:03] *** Joins: nico (nico@moz-lkua9r.dip0.t-ipconnect.de)
[16:52:27] *** Joins: ptc (textual@moz-93hhba.fios.verizon.net)
[16:52:39] *** Quits: nico (nico@moz-lkua9r.dip0.t-ipconnect.de) (Connection closed)
[16:52:42] *** Quits: ptc (textual@moz-93hhba.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:53:12] <claudiop> Everything that has "#[cfg(windows)]" (eg) before its code which will only be compiled in windows systems? If i want to analyze some code, its safe to take out all of those blocks for increased readability?
[16:53:19] *** Joins: kamilc__ (kamil@moz-u843uu.play-internet.pl)
[16:53:56] <mkpankov> claudiop: I think so
[16:53:58] *** Joins: GBGamer (npm@moz-urd.pod.125.50.IP)
[16:54:20] *** Joins: psy (psy@moz-ous.ntd.6.103.IP)
[16:54:27] *** Joins: ptc (textual@moz-93hhba.fios.verizon.net)
[16:54:42] *** Quits: ptc (textual@moz-93hhba.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:55:02] <claudiop> mkpankov, Thanks ;)
[16:55:12] *** Quits: kamilc__ (kamil@moz-u843uu.play-internet.pl) (Quit: Leaving...)
[16:55:42] <XMPPwocky> "In Python/Ruby/Go/JS/Lisp/ML/Modula-3, having a reference to something will prevent it from being destroyed. But because Rust uses stack allocation, it needs to destroy things in the inverse order they were created, so it can't just keep things alive. Instead, it makes sure you don't have any references to something that goes out of scope."
[16:56:27] *** Joins: ptc (textual@moz-93hhba.fios.verizon.net)
[16:56:42] *** Quits: ptc (textual@moz-93hhba.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:56:42] *** Quits: Guest58 (textual@moz-tb1fm9.us.xo.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:56:43] *** Quits: qard (qard@moz-nekdha.vc.shawcable.net) (Quit: leaving)
[16:56:54] <mkpankov> XMPPwocky: is that a quote from blog post?
[16:56:57] <XMPPwocky> no
[16:57:11] *** Joins: Ralith (ralith@moz-miv.lne.251.63.IP)
[16:57:12] *** Joins: Guest58 (textual@moz-tb1fm9.us.xo.net)
[16:57:42] *** Quits: rmgk (ragnar@moz-ofcii6.dyn.telefonica.de) (A TLS packet with unexpected length was received.)
[16:57:59] *** Quits: cholcombe (chris@moz-k0ajnr.i01-5.onvol.net) (Ping timeout: 121 seconds)
[16:58:06] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:58:27] <mbrubeck> Or you could start from unique ownership and moves, which should be interesting to both C++ and non-C++ programmers.  "Each value has exactly one owner. If the owner goes out of scope, the value is destroyed. You can move the value from one owner to another.  You can also temporarily borrow a pointer, and Rust guarantees that the value won't move or be
[16:58:28] <mbrubeck> destroyed while borrowed."
[16:58:30] *** Joins: ptc (textual@moz-93hhba.fios.verizon.net)
[16:58:42] *** Quits: ptc (textual@moz-93hhba.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:58:43] *** Quits: psy (psy@moz-ous.ntd.6.103.IP) (Connection closed)
[16:58:46] *** Joins: rmgk (ragnar@moz-ofcii6.dyn.telefonica.de)
[17:00:27] *** Joins: ptc (textual@moz-93hhba.fios.verizon.net)
[17:00:31] *** Quits: Guest58 (textual@moz-tb1fm9.us.xo.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[17:00:32] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[17:00:34] <XMPPwocky> i feel like you might want to start with a brief explanation of pass-by-value vs pass-by-reference, then go into how in C/C++ things are implicitly copied for pass-by-value...
[17:00:36] *** Joins: woowe (Mibbit@moz-1el.pa1.235.143.IP)
[17:00:42] *** Quits: ptc (textual@moz-93hhba.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[17:01:04] <woowe> Hey guys, does anyone know how to check if a tcpstream has anything to read?
[17:01:21] <mkpankov> might be worth splitting the talk into two
[17:01:33] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[17:01:41] <mkpankov> (if I don't pass out b/c of talking for 4 hours straight)
[17:01:43] <XMPPwocky> and go into unique ownership from there
[17:01:46] <XMPPwocky> heh yeah
[17:01:51] *** Joins: Guest58 (textual@moz-tb1fm9.us.xo.net)
[17:02:04] <Douman> rust's macros are great
[17:02:24] <mkpankov> especially considering last time I publicly spoke was at thesis defence two years ago :(
[17:02:27] *** Joins: ptc (textual@moz-93hhba.fios.verizon.net)
[17:02:31] *** Quits: davebettin (davebettin@moz-rnhkmd.bendcable.com) (Ping timeout: 121 seconds)
[17:02:35] *** Quits: mkoskar (mkoskar@moz-j5rng1.tor-exit.network) (Client exited)
[17:02:42] *** Quits: ptc (textual@moz-93hhba.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[17:03:17] *** Quits: forgottenone (forgottenon@moz-igt.26m.45.92.IP) (Quit: Konversation terminated!)
[17:04:04] *** Quits: espadrine (tyl@moz-qfr4fg.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[17:04:27] *** Joins: ptc (textual@moz-93hhba.fios.verizon.net)
[17:04:32] *** Quits: Savago (Savago@moz-k613vv.ca.comcast.net) (Client exited)
[17:04:42] *** Quits: ptc (textual@moz-93hhba.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[17:04:44] *** Joins: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net)
[17:04:51] <mbrubeck> woowe: Without blocking, I presume?  I don't think std::net offers any way to do that. :/
[17:05:15] <woowe> Nah I wouldn't mind blocking
[17:05:48] <woowe> I would spin up a new thread, and if the tcp stream had something to read I would send it down the channel
[17:06:00] <woowe> Oh wait
[17:06:19] <woowe> does a TcpStream read blocking reading from stdin?
[17:06:36] *** Joins: scott (uid25790@moz-e5ok1n.brockwell.irccloud.com)
[17:06:55] *** Joins: FrozenCow (FrozenCow@moz-i2tvv4.chello.nl)
[17:06:56] <mbrubeck> I don't think so.  Reading on a separate thread seems a good solution.
[17:07:12] *** Quits: jviereck (Adium@moz-p40urn.dclient.hispeed.ch) (Quit: Leaving.)
[17:07:24] *** Quits: sysko1 (bst@moz-cpv.glf.227.116.IP) (Ping timeout: 121 seconds)
[17:07:33] *** Joins: kieran (kieran@moz-c5gk5j.ihug.co.nz)
[17:07:39] <claudiop> Whenever there's something like "#[cfg(windows)]", a line break then "#[inline]", and after another line break some code, it means that that code its windows-only code, or that "#[inline]" applies only to windows?
[17:07:46] <woowe> Okay yeah, I would have stdin read and the tcpstream read in different threads
[17:08:08] <woowe> But yeah, with blocking as an option, can I check to see if tcpstream has anything to read?
[17:08:13] <mbrubeck> claudiop: Both the #[cfg] and the #[inline] apply to the item following the #[inline]
[17:08:19] *** Joins: rbranson (rbranson@moz-i7m.9o0.201.199.IP)
[17:08:28] *** Quits: Tarmashirin (Tarmashirin@moz-bak.2k3.199.117.IP) (Ping timeout: 121 seconds)
[17:08:31] <mbrubeck> So the function is windows-only.
[17:08:47] *** Joins: Torun (Torun@moz-34f2ia.dip0.t-ipconnect.de)
[17:09:00] <claudiop> mbrubeck, Thanks. Im cleaning up code to make it unix-only, but don't want to remove anything needed
[17:09:08] <mbrubeck> woowe: Well, you can call read() on it and see if it returns >0 bytes
[17:09:26] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[17:09:39] *** Joins: Tarmashirin (Tarmashirin@moz-bak.2k3.199.117.IP)
[17:09:49] *** Quits: Tarmashirin (Tarmashirin@moz-bak.2k3.199.117.IP) (Quit: Leaving)
[17:09:53] *** Joins: Temur (Tarmashirin@moz-bak.2k3.199.117.IP)
[17:10:00] *** Joins: ascarter (ascarter@moz-705hf8.wa.comcast.net)
[17:10:02] <woowe> oh, nice
[17:10:16] <woowe> Awesome mbrubeck, thanks
[17:11:33] *** Joins: dstrbad (dstrbad@moz-fgge1q.dsl.iskon.hr)
[17:11:43] *** Quits: kieran (kieran@moz-c5gk5j.ihug.co.nz) (Ping timeout: 121 seconds)
[17:11:55] *** Joins: jviereck (Adium@moz-p40urn.dclient.hispeed.ch)
[17:12:21] *** Quits: rbranson (rbranson@moz-i7m.9o0.201.199.IP) (Ping timeout: 121 seconds)
[17:12:40] *** Joins: Tarmashirin (Tarmashirin@moz-bak.2k3.199.117.IP)
[17:12:42] *** Quits: Tarmashirin (Tarmashirin@moz-bak.2k3.199.117.IP) (Quit: Leaving)
[17:12:55] *** Quits: logan_e (logan_e@moz-mpr4r7.lsrhs.net) (Client exited)
[17:13:03] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[17:13:21] *** Joins: errordeveloper (ilya@moz-8jq.ge6.157.37.IP)
[17:13:57] *** Joins: tadh (quassel@moz-pg51s5.CWRU.Edu)
[17:13:57] *** Quits: kgrandon (Adium@moz-mkm01r.2rkg.9kg1.0101.2620.IP) (Quit: Leaving.)
[17:14:04] *** dmu|away is now known as dmu
[17:14:07] *** bentley is now known as bentley|away
[17:15:02] *** Joins: bitonic (bitonic@moz-cdh3tf.28-151.libero.it)
[17:15:27] *** Quits: woowe (Mibbit@moz-1el.pa1.235.143.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:15:36] *** Joins: kgrandon (Adium@moz-cp6v9c.2rkg.9kg1.0101.2620.IP)
[17:17:23] *** Quits: jviereck (Adium@moz-p40urn.dclient.hispeed.ch) (Quit: Leaving.)
[17:17:52] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[17:18:02] *** Quits: jdm (jdm@moz-ul43ak.dsl.bell.ca) (Quit: )
[17:18:12] *** Joins: marcusklaas (marcus@moz-2i0c3k.dynamic.ziggo.nl)
[17:19:31] *** Quits: ty (ty@moz-i6c4to.wa.comcast.net) (Connection closed)
[17:19:34] <datazombie> I have this example code: I keep getting WrongType(Numeric) on line 21 https://gist.github.com/jmejias/2aac04342cb47f75193b
[17:19:48] <mkomitee> Anyone have a moment to help me figure out how to do something via ffi? I have a case where I need to initialize an opaque struct to NULL, and pass it by reference to a C function to initialize it so that I can then use it as a handle that I'd pass to other C functions via FFI.
[17:20:05] <XMPPwocky> mkomitee: how do you initialize a struct to null?
[17:20:21] <mkomitee> The answer to that question is I don't know.
[17:20:30] <XMPPwocky> i mean what are you supposed to do in C
[17:20:32] <mkomitee> Here's how this is done in C.
[17:20:32] <bluss> I assume you mean a pointer to it would be null
[17:20:32] <steveklabnik> mkpankov: mem::initialized is what yo uwant here
[17:20:34] <XMPPwocky> zero it all out?
[17:20:37] <mkomitee> (posting a gist now)
[17:20:39] *** Quits: RalfJ (quassel@moz-5t4t9t.ralfj.de) (Connection closed)
[17:20:43] *** ahal|lunch is now known as ahal
[17:20:44] <steveklabnik> i would assume
[17:20:57] <steveklabnik> errr sorry mkpankov , i meant mkomitee :)
[17:20:59] <XMPPwocky> steveklabnik: uninitialized?
[17:21:12] <steveklabnik> oh, i guess that doesn't guarantee zeroing, eh?
[17:21:13] *** Joins: woowe (Mibbit@moz-1el.pa1.235.143.IP)
[17:21:25] <XMPPwocky> mem::zeroed() does
[17:21:27] <steveklabnik> you want mem::zeroed
[17:21:32] <mkomitee> https://gist.github.com/mkomitee/b24aa34c457d9cefe599
[17:21:42] *** Joins: shellac (textual@moz-9b49cr.cable.virginm.net)
[17:21:43] <mkomitee> So I'm not that familiar w/ C, so I may be using the wrong terminology.
[17:21:51] <mbrubeck> datazombie: So it sounds like column 6 is not compatible with type `i32`
[17:21:53] <bluss> yeah zeroed is more sane. But can't you just use the Default trait? I'd use that as far as possible
[17:21:53] <XMPPwocky> oh
[17:21:55] <XMPPwocky> it's a pointer
[17:22:03] <steveklabnik> yeah, it's just a null pointer
[17:22:03] *** Quits: oberstet (quassel@moz-nhqglr.dynamic.mnet-online.de) (Connection closed)
[17:22:19] <mkomitee> I've tried a few things, here's my current iteration which doesn't work.
[17:22:24] *** Joins: ainieco (ainieco@moz-a2t.ksd.162.188.IP)
[17:22:27] <ainieco> hello
[17:22:28] <mbrubeck> datazombie: Maybe you should list the columns explicitly rather than using "*" to make it easier to debug...
[17:22:44] <ainieco> why doesn't "global" "-" work on http://doc.rust-lang.org/std/result/enum.Result.html ?
[17:22:46] *** Quits: mindtree (Mitch@moz-uprdld.iprimus.net.au) (Quit: leaving)
[17:22:50] *** Quits: npm (npm@moz-urd.pod.125.50.IP) (Connection closed)
[17:22:51] <bluss> so the context param is a struct _krb5_context**
[17:22:54] <ainieco> i just wnat to collaps all methods
[17:22:57] <steveklabnik> ainieco: a bug
[17:23:08] <datazombie> mbrubeck: the column type in postgres is numeric
[17:23:11] *** Quits: dstrbad (dstrbad@moz-fgge1q.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[17:23:11] <steveklabnik> ainieco: https://github.com/rust-lang/rust/issues/24918
[17:23:18] <mkomitee> https://gist.github.com/mkomitee/a381600727cc5b395b3f
[17:23:20] <ainieco> steveklabnik: oh, okay
[17:23:26] *** Joins: npm (npm@moz-urd.pod.125.50.IP)
[17:23:43] <bluss> ainieco: the beta docs probably have a working button, the bug is new :)
[17:23:51] <datazombie> mbrubeck: but I cant find how to implement either the trait or importing the type specified in the docs
[17:24:01] *** Joins: nano (nano@moz-00j6et.dynamic.kabel-deutschland.de)
[17:24:01] *** Joins: psy (psy@moz-ous.ntd.6.103.IP)
[17:24:28] *** Quits: ascarter (ascarter@moz-705hf8.wa.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[17:25:24] *** Quits: areski (areski@moz-erfa2b.dynamicIP.rima-tde.net) (Ping timeout: 121 seconds)
[17:25:47] <mbrubeck> datazombie: Yeah, looks like there's no built-in impl FromSql that accepts Numeric
[17:26:15] <ainieco> bluss: yeah, it works on beta
[17:26:17] *** Joins: killercup (killercup@moz-gpufip.dip0.t-ipconnect.de)
[17:26:19] <mkomitee> Everything I'm doing ends up having the types not match. Mostly I'm just fumbling about.
[17:26:54] <mbrubeck> datazombie: I think you'll have to create a new type (it could be a newtype struct wrapping an i64 or a BigInt), and then impl FromSql for that type.
[17:27:15] *** Joins: sysko (bst@moz-cpv.glf.227.116.IP)
[17:27:16] <bluss> mkomitee: so the context param is a struct _krb5_context**
[17:27:25] <marcusklaas> Is there a way to add statements to an example without having it show up in the docs?
[17:27:36] *** Quits: sysko (bst@moz-cpv.glf.227.116.IP) (Connection closed)
[17:27:38] <bluss> mkomitee: you need to make a struct Foo pointer = NULL. And pass a pointer to that pointer to the C function
[17:27:38] <mbrubeck> datazombie: Or contribute an `impl FromSql for num::BigInt` to the postgres crate.
[17:27:49] *** Joins: Chef (Chef@moz-1trbhq.dsl.teksavvy.com)
[17:27:52] <bluss> mkomitee: use *mut raw pointers in Rust
[17:27:53] <datazombie> mbrubeck: if you look at the docs on the enum postgres::Type there is a numeric
[17:28:06] <mkomitee> Can you ... give me an example?
[17:28:12] *** Quits: terpstra (terpstra@moz-290p6a.gsi.de) (Quit: Leaving)
[17:28:22] <datazombie> mbrubeck: I am just very new at this and I dont know how to take that and make it a trat
[17:28:23] <mkomitee> I'm strugglign with the syntax. I end up with errors that IO'
[17:28:36] *** Quits: Temur (Tarmashirin@moz-bak.2k3.199.117.IP) (Connection closed)
[17:28:41] <mbrubeck> datazombie: Yes, but looking at the FromSql trait, none of the impls include Type::Numeric in their `accepts` function: http://sfackler.github.io/rust-postgres/doc/src/postgres/types/mod.rs.html#562-567
[17:28:50] *** Joins: Temur (Tarmashirin@moz-bak.2k3.199.117.IP)
[17:28:53] *** Quits: skade (skade@moz-6athcr.pools.vodafone-ip.de) (Ping timeout: 121 seconds)
[17:28:57] <bluss> let mut ptr: *mut Foo = std::ptr::null_mut();   c_function(&mut ptr)
[17:29:20] <mkomitee> Should I even define a type for it?
[17:29:24] <bluss> mkomitee: the c_function should be defined as taking (context: *mut *mut Foo) IIUC
[17:29:36] <datazombie> mbrubeck: so I would have to implement the from and tojson?
[17:29:37] <bluss> mkomitee: yes, you should define a typee
[17:29:59] *** Joins: skade (skade@moz-9imj12.dip0.t-ipconnect.de)
[17:30:17] *** Joins: dalarmmst (dalarmmst@moz-mb21j4.bredband.comhem.se)
[17:30:28] *** Quits: daschl (Adium@moz-oirn1i.vie.surfer.at) (Quit: Leaving.)
[17:30:30] <bluss> mkomitee: if it is opaque you can use just struct Foo; I think, but I'm no ffi expert. What's the usual way to do this?
[17:31:08] <mkomitee> I get a segfault.
[17:32:22] <mkomitee> Working on another cleaned up gist
[17:32:50] *** Quits: errordeveloper (ilya@moz-8jq.ge6.157.37.IP) (Ping timeout: 121 seconds)
[17:33:26] <bluss> the krb5_context::new method I see is bad
[17:33:34] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[17:33:35] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[17:34:00] <bluss> your extern function declarations don't correspond to the C snippet you showed before
[17:34:34] *** Joins: davebettin (davebettin@moz-acc.cl4.35.72.IP)
[17:34:42] <mkomitee> https://gist.github.com/mkomitee/17ca562f2429e03f6227
[17:34:54] <mkomitee> I got rid of the new method in this example.
[17:35:07] *** Joins: silven (quassel@moz-0roor3.priv.bahnhof.se)
[17:35:08] *** Joins: Porkepix (Porkepix@moz-e1bv2v.rev.sfr.net)
[17:35:09] *** Joins: qard (qard@moz-nekdha.vc.shawcable.net)
[17:35:17] <bluss> the extern method declarations are likely wrong
[17:35:17] *** Quits: silven (quassel@moz-0roor3.priv.bahnhof.se) (Connection closed)
[17:35:24] <bluss> that would explain the segfault too
[17:35:53] <mkomitee> The initial gist includes the definitions as they are in C. How would those translate to rust?
[17:35:57] <bluss> mkomitee: shouldn't the init function take a *mut *mut ?
[17:36:14] *** Joins: silven (quassel@moz-0roor3.priv.bahnhof.se)
[17:36:43] *** Quits: claudiop (claudiop@moz-sqo2tm.cpe.netcabo.pt) (Ping timeout: 121 seconds)
[17:36:48] <mkomitee> Hey, that worked.
[17:36:59] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[17:37:08] <bluss> using &mut kcontext on line 28?
[17:37:31] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[17:37:34] <mkomitee> yep.
[17:37:37] <bluss> great
[17:37:48] *** Joins: niconii (nicole@moz-5e9nqt.frgo.qwest.net)
[17:38:21] <mkomitee> ... now the real question, what does that even mean?
[17:38:22] *** Quits: ray (ray@moz-adl.t3f.66.59.IP) (Connection closed)
[17:38:36] *** Joins: dmac_ (dmac@moz-4kcd1c.ca.comcast.net)
[17:38:45] *** Joins: avikpal (avikpal@moz-hn5.igl.194.117.IP)
[17:38:54] <bluss> I don't think you should impl Drop on krb5_context, but on a separate type that wraps *mut krb5_context
[17:39:23] <bluss> as it is now, your Drop never runs in the example program (You can confirm that with a println in drop)
[17:39:55] <mkomitee> I just discovered that now.
[17:39:58] <XMPPwocky> also note that implementing Drop changes the size
[17:40:17] *** Quits: silven (quassel@moz-0roor3.priv.bahnhof.se) (Ping timeout: 121 seconds)
[17:40:22] *** Quits: gonzaloserrano1 (Adium@moz-1nv.3t7.97.62.IP) (Quit: Leaving.)
[17:40:35] *** Joins: silven (quassel@moz-0roor3.priv.bahnhof.se)
[17:41:07] *** Joins: gonzaloserrano (Adium@moz-1nv.3t7.97.62.IP)
[17:41:19] <woowe> Can I read/write to the same stream at the same time?
[17:41:36] <mkomitee> What does *mut *mut foo mean in a function declaration?
[17:41:46] <bluss> mkomitee: pointer to pointer to foo
[17:41:47] *** Quits: gonzaloserrano (Adium@moz-1nv.3t7.97.62.IP) (Quit: Leaving.)
[17:41:52] <bluss> mutable raw pointers
[17:42:02] <bluss> mkomitee: in C it would be  struct foo**
[17:42:44] <bluss> You use raw pointers because you need nullable pointers with manual memory management
[17:43:16] *** Joins: Savago (Savago@moz-8hd.3b6.246.162.IP)
[17:43:30] <ainieco> how do i write simple echo server with mio?
[17:43:40] <ainieco> https://github.com/carllerche/mio/blob/master/test/test_echo_server.rs is really complex
[17:43:44] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[17:43:45] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[17:44:12] <mkomitee> ahh, it's **foo in C, but since we're rust, we need to indicate that it's mutable, so it's *mut *mut.
[17:44:28] <bluss> mkomitee: your C snippet is very tricky because it has a struct called  structt _krb5_context, and a typedef where struct _krb5_context*  is called krb5_context. I wouldn't accept that kind of confusion in my C
[17:44:38] *** Quits: avikpal (avikpal@moz-hn5.igl.194.117.IP) (Ping timeout: 121 seconds)
[17:45:05] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[17:45:05] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:45:09] <mkomitee> This comes from mit-krb5, the most commonly used kerberos & gssapi library on linux.
[17:45:27] <mkomitee> My hope is to create safe wrappers around both for rust.
[17:45:32] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[17:46:14] <rovar> nice
[17:46:34] *** chmanchester is now known as chmanchester|mtg
[17:47:53] <bluss> mkomitee: as soon as you know the types in C and rust the correspondance is simple  https://gist.github.com/anonymous/e02435a4c94a3f8e3fc6#file-gistfile1-c-L15-L22
[17:47:53] *** Quits: djcb (user@moz-nqdj21.elisa-laajakaista.fi) (Connection closed)
[17:48:01] *** Joins: djcb (user@moz-nqdj21.elisa-laajakaista.fi)
[17:48:08] *** Joins: ucarion_ (ulyssecario@moz-cq9c0j.c3v0.fbki.f140.2607.IP)
[17:48:10] *** Joins: ai (ai@moz-pqofrl.sunline.net.ua)
[17:50:35] *** Joins: kmicu (kmicu@moz-uga.edn.218.91.IP)
[17:50:40] *** Joins: chc4 (chc4@moz-pdo0at.ma.comcast.net)
[17:50:41] *** Quits: ucarion (ulyssecario@moz-vdno9a.c3v0.fbki.f140.2607.IP) (Ping timeout: 121 seconds)
[17:50:58] *** Joins: avikpal (avikpal@moz-kei.imq.194.117.IP)
[17:51:17] *** Quits: erz (erz@moz-efrhus.broadband.corbina.ru) (Connection closed)
[17:51:37] *** Joins: erz (erz@moz-efrhus.broadband.corbina.ru)
[17:51:40] <ainieco> or maybe helloworld mio example without those confusing token things?
[17:51:47] <ainieco> how do i use mio?
[17:52:09] *** Quits: woowe (Mibbit@moz-1el.pa1.235.143.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:52:12] <ainieco> i just want to connect to mio server via telnet or similar thing and receive "hello world" from it
[17:52:24] <mbrubeck> datazombie: Sorry for the delay; was in a meeting.  Yeah, you'd probably want both FromSql and ToSql, assuming you want to both get and set Numeric values.
[17:52:36] *** Quits: FrozenCow (FrozenCow@moz-i2tvv4.chello.nl) (Connection closed)
[17:52:43] <hoverbear> ainieco: http://hoverbear.org/2015/03/04/getting-acquainted-with-mio/ that might help :)
[17:53:01] <mkomitee> How does this look:
[17:53:01] <mkomitee> https://gist.github.com/mkomitee/17ca562f2429e03f6227
[17:53:11] <ainieco> hoverbear: thanks, will read
[17:53:38] <hoverbear> ainieco: Please take note that mio is a very low level library and things like a "Hello world" server over telnet aren't necessarily simple.
[17:53:40] <datazombie> mbrubeck: I was looking into it and appareantly there is a lot of involvement in implementing those do you know where I could look into learning more about it
[17:53:47] <hoverbear> ainieco: Feel free to join us in #mio :)
[17:53:49] <mkomitee> I'd wrap the krb5_error_code in something more informative as well. But that's the start.
[17:54:24] *** Quits: Chef (Chef@moz-1trbhq.dsl.teksavvy.com) (Quit: Quit)
[17:54:33] *** Joins: DerisiveLogic (smuxi@moz-lok4tg.dyn.optonline.net)
[17:54:45] *** Quits: newbiz (newbiz@moz-9m0cr9.fbxo.proxad.net) (Ping timeout: 121 seconds)
[17:55:05] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[17:55:18] *** Quits: ayonix (quassel@moz-4i0eh6.xyz) (A TLS packet with unexpected length was received.)
[17:55:31] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[17:55:35] *** Joins: __mark__ (mark@moz-pb9mc5.dynamic.chello.pl)
[17:55:42] <mbrubeck> datazombie: sorry, I don't know any more beyond reading the source code... maybe ask sfackler though. :)
[17:55:42] *** Joins: ayonix (quassel@moz-4i0eh6.xyz)
[17:55:45] *** Quits: mkpankov (user@moz-h0n.sma.198.91.IP) (Ping timeout: 121 seconds)
[17:55:53] *** Joins: hjr3 (hradtke@moz-lei.av4.169.69.IP)
[17:56:01] *** Quits: Riastradh (riastradh@moz-qpd.aq7.187.37.IP) (Ping timeout: 121 seconds)
[17:56:04] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[17:56:12] <mbrubeck> datazombie: See also https://github.com/sfackler/rust-postgres/issues/119
[17:56:19] <rovar> ainieco, if you're familiar with other evented frameworks like libevent,  think of the tokens as a middleman between the resource (such as a tcp connection) and the associated structure/callback. 
[17:56:21] <mbrubeck> (unless that's you that filed it)
[17:56:23] *** Quits: kgrandon (Adium@moz-cp6v9c.2rkg.9kg1.0101.2620.IP) (Quit: Leaving.)
[17:56:28] <datazombie> mbrubeck: thats me
[17:56:35] <rovar> learn to love the token
[17:56:47] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[17:57:24] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[17:57:25] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[17:58:45] *** Quits: ianj (ianjneu@moz-03gv4a.ccs.neu.edu) (Ping timeout: 121 seconds)
[17:59:17] *** Quits: jbcurtin (jbcurtin@moz-lskisb.LosAngeles1.Level3.net) (Ping timeout: 121 seconds)
[17:59:17] *** Joins: ucarion (ulyssecario@moz-e1er40.c3v0.fbki.f140.2607.IP)
[17:59:51] *** Joins: kgrandon (Adium@moz-v5891t.2rkg.9kg1.0101.2620.IP)
[18:00:10] *** Quits: ucarion_ (ulyssecario@moz-cq9c0j.c3v0.fbki.f140.2607.IP) (Ping timeout: 121 seconds)
[18:00:30] *** Quits: munksgaa1d (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[18:00:37] *** Joins: Matt__ (textual@moz-5bku1g.chello.nl)
[18:00:37] *** Quits: Kynes (Kynes@moz-j2us35.mit.edu) (Quit: Leaving)
[18:01:05] *** Joins: Drek (Mibbit@moz-tueguc.dip0.t-ipconnect.de)
[18:01:08] <happy0> ??fit
[18:01:13] <happy0> woops ;x
[18:01:20] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[18:01:34] *** Joins: avikpal_ (avikpal@moz-1iu.36b.194.117.IP)
[18:01:43] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[18:02:03] *** Quits: avikpal (avikpal@moz-kei.imq.194.117.IP) (Ping timeout: 121 seconds)
[18:02:31] *** Joins: rbranson (rbranson@moz-i7m.9o0.201.199.IP)
[18:02:42] *** Quits: xuu (xuu@moz-9h1gkh.ktc.sour.is) (Ping timeout: 121 seconds)
[18:03:20] *** Quits: ucarion (ulyssecario@moz-e1er40.c3v0.fbki.f140.2607.IP) (Ping timeout: 121 seconds)
[18:03:33] *** Quits: SneakySnake (nya@moz-i9is4u.pool.telekom.hu) (Quit: Leaving)
[18:04:09] *** Joins: jbcurtin (jbcurtin@moz-lskisb.LosAngeles1.Level3.net)
[18:04:40] *** Joins: SneakySnake (nya@moz-i9is4u.pool.telekom.hu)
[18:04:50] *** Quits: avikpal_ (avikpal@moz-1iu.36b.194.117.IP) (Connection closed)
[18:05:09] *** Joins: jdm (jdm@moz-4vu.06r.98.75.IP)
[18:05:09] *** ChanServ sets mode: +o jdm
[18:05:12] *** Joins: mib_3jeb13 (Mibbit@moz-1vd.8s1.28.194.IP)
[18:05:22] *** Joins: maugzoide (maugzoide@moz-ua3.1qv.43.177.IP)
[18:05:24] *** Quits: alex-abreu (alex@moz-j54ho8.biz.rr.com) (Ping timeout: 121 seconds)
[18:05:38] *** Quits: mib_3jeb13 (Mibbit@moz-1vd.8s1.28.194.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:06:08] <mkomitee> as always, thanks for the help everyone.
[18:06:40] <jonalmeida> Any idea how I could convert a &str to a C const char*
[18:06:44] *** Joins: avikpal (avikpal@moz-ror.mde.194.117.IP)
[18:06:56] *** Joins: _queue (queue@moz-k2g.0bf.2.129.IP)
[18:07:22] <jonalmeida> I've tried my_rust_str as *const libc::c_char
[18:07:35] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[18:08:22] *** Joins: mvyskocil (mvyskocil@moz-tmeimb.net.upcbroadband.cz)
[18:08:32] <jonalmeida> Wait, I think I got it..
[18:08:40] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[18:08:41] <jonalmeida> as *mut libc::c_char ?
[18:09:01] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[18:09:07] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[18:09:11] <SneakySnake> jonalmeida: Note that it's not safe to convert an &str to a const char*
[18:09:17] <SneakySnake> &str is not null-terminated
[18:09:29] *** Quits: mkpankov` (mkpankov@moz-2j8.jvq.149.83.IP) (Ping timeout: 121 seconds)
[18:09:33] <SneakySnake> There is http://doc.rust-lang.org/1.0.0-beta.3/std/ffi/struct.CString.html that can be used to safely construct one
[18:09:52] *** Quits: g5pw (g5pw@moz-4e9gb9.me) (Ping timeout: 121 seconds)
[18:10:02] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[18:10:24] <Matt__> Does anybody know how one would convert a i32 to a f32 (1 -> 1.0) now that ToPrimitive has been removed?
[18:10:31] *** Quits: ismaelga (ismaelga@moz-rjm.jv4.251.188.IP) (Connection closed)
[18:10:46] *** Joins: sayan (sayan@moz-ms7.p9k.51.106.IP)
[18:11:18] *** Joins: avikpal_ (avikpal@moz-2en.6lo.194.117.IP)
[18:11:20] *** Joins: g5pw (g5pw@moz-4e9gb9.me)
[18:11:26] <SneakySnake> playbot: let n: i32 = 10; let f: f32 = n as f32; f
[18:11:27] -playbot- 10
[18:11:31] *** Quits: Temur (Tarmashirin@moz-bak.2k3.199.117.IP) (Ping timeout: 121 seconds)
[18:11:41] *** Quits: avikpal (avikpal@moz-ror.mde.194.117.IP) (Ping timeout: 121 seconds)
[18:12:03] *** Joins: ucarion (ulyssecario@moz-4itir5.c3v0.fbki.f140.2607.IP)
[18:12:15] *** Joins: xuu (xuu@moz-9h1gkh.ktc.sour.is)
[18:12:18] <SneakySnake> Matt__: ^ , but maybe you meant something else, in which case you need to be more specific
[18:12:39] <bluss> CString has a classic trap though, you can use .as_ptr() on it but at that point you leave the borrow checker
[18:12:47] <Matt__> SneakySnake: Thanks, that's probably it. Trying it now.
[18:13:00] <bluss> Make sure the CString value is valid & alive as long as you use the char pointer you got from it
[18:13:04] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Ping timeout: 121 seconds)
[18:13:07] *** Joins: djcb` (user@moz-nqdj21.elisa-laajakaista.fi)
[18:13:11] *** darkowlzz is now known as darkowlzz|afk
[18:14:29] *** darkowlzz|afk is now known as darkowlzz
[18:14:32] *** Quits: reed (reed@tech.monkey) (RecvQ exceeded)
[18:14:37] *** Quits: djcb (user@moz-nqdj21.elisa-laajakaista.fi) (Ping timeout: 121 seconds)
[18:14:52] *** Joins: gonzaloserrano (Adium@moz-0os.6hf.231.77.IP)
[18:14:56] *** Joins: reed (reed@tech.monkey)
[18:14:56] *** Joins: kushal (kdas@moz-ms7.p9k.51.106.IP)
[18:15:03] *** Joins: wldcordeiro (wldcordeiro@moz-863roc.hfc.comcastbusiness.net)
[18:15:07] *** Quits: avikpal_ (avikpal@moz-2en.6lo.194.117.IP) (Connection closed)
[18:15:35] *** Joins: RalfJ (quassel@moz-5t4t9t.ralfj.de)
[18:15:52] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[18:16:18] *** Quits: xuu (xuu@moz-9h1gkh.ktc.sour.is) (Ping timeout: 121 seconds)
[18:16:42] *** Quits: datazombie (textual@moz-ss0.02d.243.173.IP) (Quit: Textual IRC Client: www.textualapp.com)
[18:17:29] <Drek> Hi should I use the type Self in a impl to indicate that the function will return the object it was called on?
[18:17:32] <jonalmeida> Thanks SneakySnake , that's what I was looking for!
[18:18:03] *** Quits: hoony (Thunderbird@moz-q5r.8e9.96.183.IP) (Client exited)
[18:18:17] *** Joins: logan_e (logan_e@moz-ltn.qg3.218.73.IP)
[18:19:47] *** Quits: killercup (killercup@moz-gpufip.dip0.t-ipconnect.de) (Quit: My Mac has gone to sleep. ZZZzzz…)
[18:20:10] *** Joins: avikpal (avikpal@moz-8fq.hfh.194.117.IP)
[18:22:17] *** Joins: xuu (xuu@moz-9h1gkh.ktc.sour.is)
[18:22:34] <SneakySnake> Drek: AFAIK, Self is only used in trait declarations, and it's not used in implementations
[18:24:26] *** Quits: avikpal (avikpal@moz-8fq.hfh.194.117.IP) (Ping timeout: 121 seconds)
[18:24:28] *** Joins: avikpal_ (avikpal@moz-9hu.mde.194.117.IP)
[18:24:36] *** Joins: Temur (Tarmashirin@moz-bak.2k3.199.117.IP)
[18:25:11] <bluss> you can use Self in implementations, it's just a shorthand
[18:25:23] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[18:25:54] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[18:25:54] *** ChanServ sets mode: +ao brson brson
[18:27:38] *** Quits: Temur (Tarmashirin@moz-bak.2k3.199.117.IP) (Connection closed)
[18:27:49] *** Quits: Guest (textual@moz-rtn.fg7.77.192.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:27:58] *** Joins: jshs (jshs@moz-vkmba5.dip0.t-ipconnect.de)
[18:27:59] *** Joins: Temur (Tarmashirin@moz-bak.2k3.199.117.IP)
[18:28:53] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[18:29:02] *** Quits: gonzaloserrano (Adium@moz-0os.6hf.231.77.IP) (Quit: Leaving.)
[18:29:49] *** darkowlzz is now known as darkowlzz|afk
[18:30:17] *** Quits: kushal (kdas@moz-ms7.p9k.51.106.IP) (Quit: Leaving)
[18:30:38] *** Quits: jbcurtin (jbcurtin@moz-lskisb.LosAngeles1.Level3.net) (Ping timeout: 121 seconds)
[18:31:00] <Douman> guys how i can implement rightly Eq trait for my own structure so that '==' would work?
[18:31:04] *** Joins: mdibaiee (mahdi@moz-8oo.182.244.151.IP)
[18:31:12] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[18:31:18] *** Joins: avikpal (avikpal@moz-77c.6lo.194.117.IP)
[18:31:19] <Douman> do i need only impl Eq for my struct?
[18:31:22] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[18:31:32] *** Quits: avikpal_ (avikpal@moz-9hu.mde.194.117.IP) (Ping timeout: 121 seconds)
[18:31:52] *** darkowlzz|afk is now known as darkowlzz
[18:31:53] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[18:32:47] <bluss> PartialEq is the trait for ==
[18:32:54] *** Joins: stjahns (stjahns@moz-ilg413.uws.ualberta.ca)
[18:33:12] <bluss> and yes. See if you can use #[derive(PartialEq, Eq)] to get it for free
[18:33:19] <bluss> otherwise you need to impl manually
[18:33:25] *** Quits: edlothiol (user@moz-chhfor.hsi02.unitymediagroup.de) (Connection closed)
[18:33:37] <Douman> well for now i implement it manually but it tells me that '==' is not available
[18:34:22] *** darkowlzz is now known as darkowlzz|afk
[18:34:27] <mbrubeck> Douman: If there are references involved or something, you may need to either dereference, or impl PartialEq for &MyStruct, or something like that.
[18:34:51] *** Joins: alex-abreu (alex@moz-j54ho8.biz.rr.com)
[18:34:51] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[18:34:52] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[18:34:54] <bluss> or compare *foo == *bar
[18:35:01] <Douman> hmm....
[18:35:04] <bluss> shouldn't be needed though
[18:35:06] *** Quits: djcb` (user@moz-nqdj21.elisa-laajakaista.fi) (Ping timeout: 121 seconds)
[18:35:07] <SneakySnake> bluss: I do remember Self not working in impls in the past, but looks like now it works. Or did they always work and I somehow remember wrong?
[18:35:10] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[18:35:21] *** Quits: mdibaiee (mahdi@moz-8oo.182.244.151.IP) (Ping timeout: 121 seconds)
[18:35:21] <Douman> it must be trait?
[18:35:24] <mbrubeck> SneakySnake: I remember that too
[18:35:24] <bluss> SneakySnake: you remember correctly
[18:35:32] *** Joins: avikpal_ (avikpal@moz-m8k.6lo.194.117.IP)
[18:35:36] <bluss> SneakySnake: rust just keeps getting better
[18:35:40] <SneakySnake> Indeed
[18:35:43] <Douman> it seems i implemented it as method right now...
[18:35:48] *** Quits: avikpal (avikpal@moz-77c.6lo.194.117.IP) (Ping timeout: 121 seconds)
[18:36:04] <SneakySnake> So is it idiomatic, or should I prefer explicitly typing out the type?
[18:36:10] <bluss> Douman: impl PartialEq for YourType ..
[18:36:13] <SneakySnake> e.g. fn new() -> Self
[18:36:13] <mbrubeck> Douman: Yes, this is the trait you must impl: http://doc.rust-lang.org/std/cmp/trait.PartialEq.html
[18:36:16] *** Joins: rokkerruslan (Mibbit@moz-rbqgs3.bb.netbynet.ru)
[18:36:16] *** Quits: rmdashrf (rmdashrf@moz-n1r.cr0.54.128.IP) (Quit: WeeChat 0.4.2)
[18:36:30] <Douman> awww thanks. A bit unclear to me :(
[18:36:38] <bluss> SneakySnake: I think you should prefer Self. I've already noticed how it helps to have less to change when developing a type
[18:36:50] *** Quits: halorgium (z@moz-kl0sh4.spork.in) (Ping timeout: 121 seconds)
[18:36:52] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[18:36:56] <bluss> don't have to update type parameters there etec
[18:36:57] <SneakySnake> One advantage of Self is that if the type name changes, I have to rename less uses
[18:37:21] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[18:37:22] <SneakySnake> Good to know, thanks!
[18:37:28] *** Quits: rokkerruslan (Mibbit@moz-rbqgs3.bb.netbynet.ru) (Quit: http://www.mibbit.com ajax IRC Client)
[18:38:05] *** Quits: rmgk (ragnar@moz-ofcii6.dyn.telefonica.de) (Ping timeout: 121 seconds)
[18:38:22] *** Quits: hjr3 (hradtke@moz-lei.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[18:38:54] *** Quits: jvrbanac (jvrbanac@moz-932o89.kdmi.s520.4801.2001.IP) (Ping timeout: 121 seconds)
[18:38:54] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[18:39:38] *** Quits: DerisiveLogic (smuxi@moz-lok4tg.dyn.optonline.net) (Connection closed)
[18:39:46] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[18:39:47] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[18:39:53] *** Joins: lenstr (lenstr@moz-e7o.vju.25.171.IP)
[18:39:58] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[18:40:13] *** Joins: halorgium (z@moz-kl0sh4.spork.in)
[18:40:14] *** Joins: avikpal (avikpal@moz-jt0.6lo.194.117.IP)
[18:40:22] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[18:40:29] *** Quits: avikpal_ (avikpal@moz-m8k.6lo.194.117.IP) (Ping timeout: 121 seconds)
[18:40:36] <SneakySnake> Aww, it doesn't work inside the code in the impl functions
[18:41:00] *** Joins: nico (nico@moz-lkua9r.dip0.t-ipconnect.de)
[18:41:18] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[18:41:21] *** Joins: jvrbanac (jvrbanac@moz-932o89.kdmi.s520.4801.2001.IP)
[18:41:42] *** Joins: Riastradh (riastradh@moz-lh4dsc.xzyqvk.co.uk)
[18:41:45] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[18:41:49] *** Joins: DerisiveLogic (smuxi@moz-lok4tg.dyn.optonline.net)
[18:42:11] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[18:42:11] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Ping timeout: 121 seconds)
[18:43:02] <dschatzberg> is there a rust library for Linux syscalls?
[18:43:22] *** Quits: slomo (slomo@moz-p8m0g2.net) (Quit: Ex-Chat)
[18:44:13] <SneakySnake> dschatzberg: Searching for "syscalls" on crates.io yields this https://crates.io/crates/syscall
[18:44:34] *** Quits: avikpal (avikpal@moz-jt0.6lo.194.117.IP) (Ping timeout: 121 seconds)
[18:44:51] *** Joins: avikpal (avikpal@moz-64t.p8t.194.117.IP)
[18:45:02] *** Quits: nico (nico@moz-lkua9r.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[18:45:03] *** Quits: saneyuki (tetsuharu@moz-fmjbd6.ucom.ne.jp) (Quit: )
[18:45:22] *** Joins: slomo (slomo@moz-p8m0g2.net)
[18:45:43] <dschatzberg> SneakySnake: thanks
[18:45:54] *** Joins: Ms2ger (Ms2ger@moz-15i.9ho.190.193.IP)
[18:47:06] *** Quits: GBGamer (npm@moz-urd.pod.125.50.IP) (Quit: Lost terminal)
[18:47:37] *** Joins: rmgk (ragnar@moz-ofcii6.dyn.telefonica.de)
[18:47:37] *** Joins: forgottenone (forgottenon@moz-igt.26m.45.92.IP)
[18:48:54] *** Joins: joone1 (joone@moz-8cd.7m2.55.192.IP)
[18:49:05] *** Quits: ucarion (ulyssecario@moz-4itir5.c3v0.fbki.f140.2607.IP) (Ping timeout: 121 seconds)
[18:49:13] *** Quits: joone1 (joone@moz-8cd.7m2.55.192.IP) (Connection closed)
[18:49:53] *** Quits: joone (joone@moz-rj2.r6t.134.134.IP) (Connection closed)
[18:50:06] *** Joins: joone (joone@moz-rj2.r6t.134.134.IP)
[18:50:12] *** Quits: logan_e (logan_e@moz-ltn.qg3.218.73.IP) (Client exited)
[18:50:33] *** Quits: dalarmmst (dalarmmst@moz-mb21j4.bredband.comhem.se) (Ping timeout: 121 seconds)
[18:52:02] *** Quits: rbrs (rbrs@moz-m5thmg.static.zebra.lt) (A TLS packet with unexpected length was received.)
[18:52:06] *** Joins: avikpal_ (avikpal@moz-obs.36b.194.117.IP)
[18:52:09] *** Joins: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com)
[18:52:44] *** Joins: mdibaiee (mahdi@moz-8oo.182.244.151.IP)
[18:52:57] *** Quits: avikpal (avikpal@moz-64t.p8t.194.117.IP) (Ping timeout: 121 seconds)
[18:53:07] *** Joins: Guest (textual@moz-rtn.fg7.77.192.IP)
[18:53:26] *** Joins: hjr3 (hradtke@moz-lei.av4.169.69.IP)
[18:54:47] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[18:55:12] *** Joins: tynopex (Mibbit@moz-gh3.gum.189.205.IP)
[18:56:00] *** Joins: makhauser (quassel@moz-7p8.00g.111.213.IP)
[18:56:15] *** Joins: nott (nott@moz-to4.06o.57.86.IP)
[18:56:17] *** Joins: kieran (kieran@moz-c5gk5j.ihug.co.nz)
[18:56:19] *** Joins: turtil (turtil@moz-gfc.es4.23.103.IP)
[18:56:32] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[18:56:33] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[18:56:38] *** Quits: egor-laufer (uid78368@moz-ptdej8.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[18:57:29] *** Joins: Racquetball (namestolenw@moz-dnlovt.cpe.twtelecom.net)
[18:57:53] *** Joins: timj (timj@moz-qrm.hdf.102.91.IP)
[18:58:01] *** Quits: skade (skade@moz-9imj12.dip0.t-ipconnect.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:58:07] *** Quits: avikpal_ (avikpal@moz-obs.36b.194.117.IP) (Ping timeout: 121 seconds)
[18:58:08] <jonalmeida> One more question, if I have a C void *, which according the usage in the C library is used as u8int_t[], how would I properly cast or convert that?
[18:58:40] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[18:59:17] *** Quits: Rusky (russell@moz-du8evc.slkc.qwest.net) (Quit: Leaving.)
[18:59:18] *** Quits: davebettin (davebettin@moz-acc.cl4.35.72.IP) (Ping timeout: 121 seconds)
[18:59:59] <Tari> jonalmeida: you can change the type of a raw pointer with just a scalar cast, eg `x as *mut u8`
[19:00:04] *** Joins: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net)
[19:00:24] *** Joins: dcase (dcase@moz-dfq4gm.bb.dnainternet.fi)
[19:00:25] *** Quits: kieran (kieran@moz-c5gk5j.ihug.co.nz) (Ping timeout: 121 seconds)
[19:00:30] *** Joins: Rusky (russell@moz-du8evc.slkc.qwest.net)
[19:00:51] *** Joins: slurps-mad-rips (slurps-mad-@moz-o2c.uaj.44.17.IP)
[19:00:52] *** Joins: mahdi__ (mahdi@moz-ipf.n3s.129.78.IP)
[19:00:52] *** Quits: mdibaiee (mahdi@moz-8oo.182.244.151.IP) (Ping timeout: 121 seconds)
[19:01:39] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[19:01:46] *** Joins: davebettin (davebettin@moz-acc.cl4.35.72.IP)
[19:02:10] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[19:02:11] *** Quits: kgrandon (Adium@moz-v5891t.2rkg.9kg1.0101.2620.IP) (Quit: Leaving.)
[19:02:24] <jonalmeida> Tari: right, but I guess in my situation, the C function takes a c struct which contains the void*, so I've redefined the struct in rust with *mut c_void
[19:02:49] <jonalmeida> Tari: When I use the scalar casting, I hit the type checking error.
[19:03:09] *** Joins: espadrine (tyl@moz-l019mn.fbx.proxad.net)
[19:03:18] <jonalmeida> Oh wait
[19:03:32] <jonalmeida> "as *mut c_void" would work then
[19:03:34] <jonalmeida> Doh!
[19:04:10] *** Quits: LRN (LRN@moz-63ipbh.nationalcablenetworks.ru) (Quit: Leaving.)
[19:04:47] *** Quits: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net) (Ping timeout: 121 seconds)
[19:04:47] *** Joins: LRN (LRN@moz-63ipbh.nationalcablenetworks.ru)
[19:04:50] *** Joins: avikpal (avikpal@moz-le2.4af.194.117.IP)
[19:05:43] *** Parts: duncan (paul@moz-dst.ms6.225.173.IP) ()
[19:05:47] *** Quits: hjr3 (hradtke@moz-lei.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:06:56] *** Joins: kgrandon (Adium@moz-nacavg.2rkg.9kg1.0101.2620.IP)
[19:07:36] <c0a8> best way to do perform some mutating action n times?
[19:07:57] <XMPPwocky> for _ in 0..n { do_my_thingy() }
[19:08:13] <c0a8> XMPPwocky: thanks, that's what I have now. it's not too bad
[19:08:30] *** chmanchester|mtg is now known as chmanchester
[19:08:39] *** Joins: fyolnish (fyolnish@moz-3gjd0b.so-net.ne.jp)
[19:09:09] *** Joins: ZenSword (ZenSword@moz-hlrta3.pools.vodafone-ip.de)
[19:09:09] *** Quits: wldcordeiro (wldcordeiro@moz-863roc.hfc.comcastbusiness.net) (Connection closed)
[19:09:28] *** Quits: nott (nott@moz-to4.06o.57.86.IP) (Ping timeout: 121 seconds)
[19:10:00] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[19:10:16] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[19:10:23] *** Quits: maugzoide (maugzoide@moz-ua3.1qv.43.177.IP) (Quit: (null))
[19:10:43] *** Joins: killercup (killercup@moz-gpufip.dip0.t-ipconnect.de)
[19:11:14] *** Quits: kgrandon (Adium@moz-nacavg.2rkg.9kg1.0101.2620.IP) (Ping timeout: 121 seconds)
[19:12:41] *** Quits: fyolnish (fyolnish@moz-3gjd0b.so-net.ne.jp) (Ping timeout: 121 seconds)
[19:13:45] *** Quits: avikpal (avikpal@moz-le2.4af.194.117.IP) (Ping timeout: 121 seconds)
[19:14:35] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[19:14:58] *** Joins: Esption (Esption@moz-3gitvr.dynamic.tds.net)
[19:16:03] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[19:16:21] *** Joins: Shackra (Jorge@moz-7bh.ng6.177.186.IP)
[19:16:21] <jonalmeida> Johannes: Did you figure out your problem with fat pointer error?
[19:16:48] *** Joins: avikpal (avikpal@moz-f4i.kva.227.117.IP)
[19:16:59] <pyfisch> hi, I wrote a new piece of code but two tests cause a stack overflow, I did not do anything special. How should I look for the bug?
[19:17:50] <bluss> you can use gdb to get a backtrace
[19:18:03] <gsingh93> you can also use RUST_BACKTRACE+1
[19:18:08] <gsingh93> RUST_BACTRACE=1
[19:18:12] <gsingh93> dammit
[19:18:16] <gsingh93> you get the idea
[19:18:32] *** Joins: jbcurtin (jbcurtin@moz-lskisb.LosAngeles1.Level3.net)
[19:18:44] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Connection closed)
[19:18:50] *** Quits: DerisiveLogic (smuxi@moz-lok4tg.dyn.optonline.net) (Ping timeout: 121 seconds)
[19:19:07] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[19:19:41] *** jandem-away is now known as jandem
[19:19:59] <pyfisch> will try
[19:20:25] *** Joins: blinky (Mibbit@moz-966.099.5.189.IP)
[19:20:28] *** Joins: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net)
[19:20:40] <blinky> is there any way to cast a u8 to a C-style Enum?
[19:21:02] *** Quits: npm (npm@moz-urd.pod.125.50.IP) (Connection closed)
[19:21:21] *** Quits: Guest58 (textual@moz-tb1fm9.us.xo.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[19:21:37] <pyfisch> gsingh93: rust backtrace does nothing. I invoke the tests with "cargo test"
[19:21:43] <Esption> blinky: std::mem::transmute, but I wouldn't do that unless you really really want to.
[19:21:52] <gsingh93> pyfisch: RUST_BACKTRACE=1 cargo test
[19:21:55] <gsingh93> is that what you did?
[19:22:15] *** Joins: npm (npm@moz-vr5.mg6.56.172.IP)
[19:22:19] <blinky> Esption: I see :/ thank you
[19:23:32] <pyfisch> gsingh93: yes
[19:23:52] <Esption> blinky: Well, I mean it's fine, it's just that if you match the enum it will act a bit strange if it isn't valid. Specifically, the last part of your enum is essentially a catch-all even if you give a specific one.
[19:24:30] <gsingh93> pyfisch: i'm not sure, it always works for me
[19:25:42] <pyfisch> gsingh93: yes also for me, but I only used it when rustc had an internal error
[19:25:49] *** Joins: skade (skade@moz-6athcr.pools.vodafone-ip.de)
[19:25:53] <pyfisch> not when a test failed at runtime with stack overflow
[19:26:05] <gsingh93> i've used it for stack overflows too, so that's strange
[19:26:08] *** Quits: tynopex (Mibbit@moz-gh3.gum.189.205.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:26:09] *** Joins: Matthias247 (Miranda@moz-49li60.hsi14.kabel-badenwuerttemberg.de)
[19:26:17] *** Quits: mvyskocil (mvyskocil@moz-tmeimb.net.upcbroadband.cz) (Ping timeout: 121 seconds)
[19:26:18] *** Quits: npm (npm@moz-vr5.mg6.56.172.IP) (Ping timeout: 121 seconds)
[19:26:33] <gsingh93> anyways, you can try gdb
[19:26:39] *** Joins: npm (npm@moz-urd.pod.125.50.IP)
[19:27:02] *** Joins: Guest58 (textual@moz-tb1fm9.us.xo.net)
[19:27:30] *** Joins: O01eg (o01eg@moz-9um173.bvrr.4n8f.2698.2a02.IP)
[19:28:07] <gsingh93> so i need to call a function with a Vec<T> where T: Trait, but I don't want to require the T's be all the same type. i'm pretty sure this isn't possible, but is there some workaround?
[19:28:28] <Ms2ger> Vec<SomePointer<T>>
[19:28:38] *** Joins: mib_ahon15 (Mibbit@moz-2bogl8.vpn-s.ntnu.no)
[19:28:38] <Ms2ger> Where SomePointer is Box / & / *
[19:28:43] <gsingh93> ah, i'll try it
[19:28:45] <gsingh93> thanks
[19:29:16] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[19:29:16] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[19:29:48] *** Joins: kamilc__ (kamil@moz-u843uu.play-internet.pl)
[19:29:49] <pyfisch> gsingh93: I will try tomorrow
[19:31:13] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[19:31:39] *** Joins: rmdashrf (rmdashrf@moz-n1r.cr0.54.128.IP)
[19:32:56] *** Quits: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net) (Connection closed)
[19:34:08] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[19:34:12] *** Joins: Twisol (textual@moz-6tk.mnr.166.130.IP)
[19:34:18] <bluss> gsingh93: a vector has to have a homogenous elemnent type. Trait objects are a way to unify values of distinct type under the same type.
[19:35:07] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[19:35:17] *** Joins: mib_a56ozq (Mibbit@moz-6js.hq6.0.200.IP)
[19:36:04] *** Joins: ralu (ralu@moz-52ptkt.dynamic.t-2.net)
[19:36:09] *** Joins: nott (nott@moz-to4.06o.57.86.IP)
[19:36:53] *** Quits: fabiand (fabiand@moz-d8047t.dip0.t-ipconnect.de) (Quit: Verlassend)
[19:37:11] *** Quits: mib_a56ozq (Mibbit@moz-6js.hq6.0.200.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:37:12] *** Joins: mzabaluev (Thunderbird@moz-3bijqs.bb.dnainternet.fi)
[19:37:53] <hoverbear> Anyone got an embedded rust DB yet?
[19:38:41] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[19:38:42] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[19:39:02] *** Joins: Gabriel_7 (Gabriel@moz-ma9qoj.mtgr.92aj.0e35.2a01.IP)
[19:39:07] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Quit: )
[19:39:10] *** Quits: Fiveside (fiveside@moz-t2eatg.vsp.com) (Ping timeout: 121 seconds)
[19:39:11] <blinky> hoverbear: working on one, still on design though. I don't want to "port" one
[19:39:36] <hoverbear> blinky: Keep me in the loop, would love to not have to deal with all the stupidity of SQL or Mongo
[19:40:11] *** Joins: Kingsquee (kingsley@moz-qq7ns6.bchsia.telus.net)
[19:40:12] <blinky> hoverbear: well, I don't hink an embedded KV replaces either of those :p
[19:40:27] <blinky> hoverbear: I'm a sql fan myself :x
[19:40:52] <hoverbear> blinky: I like SQL too but it's a PITA.
[19:41:06] *** Quits: grncdr (Adium@moz-m1g.e47.90.95.IP) (Quit: Leaving.)
[19:41:13] <hoverbear> blinky: Why do I need multiple rows on a seperate table to store an array? :S
[19:41:57] *** Joins: grncdr (Adium@moz-m1g.e47.90.95.IP)
[19:42:19] <blinky> you can always use Postgres, to an extent..
[19:42:27] *** Quits: ainieco (ainieco@moz-a2t.ksd.162.188.IP) (Quit: leaving)
[19:42:39] <hoverbear> blinky: Okay sure, I'll use postgres, why can't I have a non-string ENUM?
[19:45:10] <blinky> nothing is perfect :(
[19:45:21] <blinky> json itself is pretty limited
[19:45:35] *** Joins: genbattle (genbattle@moz-4v0.gkd.16.182.IP)
[19:45:40] <hoverbear> blinky: Yeah. :(
[19:46:05] *** Quits: Twisol (textual@moz-6tk.mnr.166.130.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[19:46:38] *** Quits: twipeD (wipeD@moz-7bfhev.dip0.t-ipconnect.de) (Quit: G'bye)
[19:47:27] <hoverbear> blinky: You also can't seem to have an array of enumerated data either
[19:47:44] *** Quits: skade (skade@moz-6athcr.pools.vodafone-ip.de) (Connection closed)
[19:47:57] *** Joins: skade (skade@moz-6athcr.pools.vodafone-ip.de)
[19:47:59] *** Quits: tadh (quassel@moz-pg51s5.CWRU.Edu) (Ping timeout: 121 seconds)
[19:48:16] <burntsushi> WindowsBunny: we're having a rust meetup on launch day! http://www.meetup.com/Boston-Rust-Meetup-25317522aNpHwZdw/
[19:48:20] <burntsushi> acrichto: pong
[19:48:38] *** Joins: Fiveside (fiveside@moz-t2eatg.vsp.com)
[19:49:52] <ralu> how com that and_then requires that E type is of std::io::error::Error
[19:50:19] *** Joins: lov2cod (Adium@moz-4c4th3.o38v.k60l.0119.2620.IP)
[19:50:57] <bluss> ralu: must be from context?
[19:51:07] <hoverbear> ralu: I believe .and_then() expects the error that is returned to be the same as the one it's used on
[19:51:29] *** Joins: tadh (quassel@moz-pg51s5.CWRU.Edu)
[19:51:35] *** Joins: errordeveloper (ilya@moz-62k.i0g.218.2.IP)
[19:52:02] <ralu> why
[19:52:11] <ralu> you can have either value or error
[19:52:22] <ralu> not both i guess
[19:52:33] <bluss> if you implement it manuall you'll see
[19:52:45] <bluss> Err(x).and_then(_)  returns Err(x)
[19:52:51] *** Joins: lov2cod1 (Adium@moz-40l.ob1.22.8.IP)
[19:53:21] <blinky> hoverbear: back to the kv store, I'm ending up writing C-ish rust code
[19:53:37] <blinky> since pretty much everything is unsafe :p
[19:53:55] <blinky> and I can't really use Rust enums on the on disk representation
[19:54:08] <blinky> in the*
[19:54:21] *** Quits: lov2cod (Adium@moz-4c4th3.o38v.k60l.0119.2620.IP) (Ping timeout: 121 seconds)
[19:55:10] <posix4e> blinky: lsm?
[19:55:14] <posix4e> blinky: also link? 
[19:56:15] <blinky> posix4e: nothing even close to a repository :( 
[19:56:32] <posix4e> kk
[19:56:36] <posix4e> i'm curious about the arch
[19:56:44] <posix4e> I've implemented these things a couple of times in various languages
[19:56:53] <blinky> I'm trying something very different, a trie based index and append storage
[19:57:03] <posix4e> That's very interesting
[19:57:16] <blinky> didn't want to just port some stuff, there's already some very good stuff around
[19:57:20] <hoverbear> blinky: Why?
[19:57:37] <posix4e> lucene: uses tries for numbers and dates
[19:57:52] <posix4e> But generally Blocktrees are based on trie idnexes
[19:57:52] *** Joins: ainieco (ainieco@moz-8pv.ksd.162.188.IP)
[19:57:54] *** Quits: shellac (textual@moz-9b49cr.cable.virginm.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:58:04] <blinky> hoverbear: I'm trying to get very fast reads with decent writes
[19:58:21] <blinky> pretty much the reverse of an LSM
[19:58:28] *** Quits: nott (nott@moz-to4.06o.57.86.IP) (Ping timeout: 121 seconds)
[19:58:51] <blinky> A tree based one is usually very good read speeds w/ slow writes
[19:59:28] <posix4e> Have you heard of lmdb? Are you aware what he did?
[19:59:43] *** Joins: willem (willem@moz-facs2s.dynamic.upc.nl)
[19:59:45] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[19:59:46] *** ChanServ sets mode: +o pnkfelix
[19:59:51] *** Joins: mkpankov (mkpankov@moz-2d6.jvq.149.83.IP)
[20:00:10] <blinky> posix4e: that's my goto KV
[20:00:20] *** Quits: is (Mibbit@moz-b8fehj.cust.telenor.se) (Quit: http://www.mibbit.com ajax IRC Client)
[20:00:31] *** Quits: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net) (Connection closed)
[20:00:36] *** Quits: adrake (adrake@moz-iaes2r.fs1g.619c.a880.2604.IP) (Quit: ZNC - http://znc.in)
[20:00:49] *** Joins: sprang (sprang@moz-q60.c9m.56.172.IP)
[20:00:50] <posix4e> I feel like Howard had similiar goals but using two btrees
[20:00:51] *** Joins: adrake (adrake@moz-iaes2r.fs1g.619c.a880.2604.IP)
[20:01:05] <ainieco> hello, which structure is the best for u64 maps?
[20:01:32] <blinky> ainieco: The builtin map is fine
[20:01:35] *** Joins: new_one (new_one@moz-4mq.al6.42.128.IP)
[20:01:38] *** Joins: hjr3 (hradtke@moz-lei.av4.169.69.IP)
[20:02:05] <hoverbear> blinky: Are you doing append-only like redis and sqlite?
[20:02:06] <WindowsBunny> burntsushi: Awesome, although I don't know if I'll be able to make it
[20:02:11] <ainieco> blinky: which one?
[20:02:50] <blinky> ainieco: either one, depends on your "sorted" and "range scan" needs
[20:02:54] <seanmonstar> ainieco: HashMap?
[20:03:07] *** Quits: Savago (Savago@moz-8hd.3b6.246.162.IP) (Client exited)
[20:03:16] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[20:03:27] <blinky> hoverbear: yes
[20:03:42] *** Quits: Guest (textual@moz-rtn.fg7.77.192.IP) (Ping timeout: 121 seconds)
[20:03:50] <ainieco> okay, thanks
[20:04:07] * seanmonstar ainieco:
[20:04:11] *** Joins: DerisiveLogic (smuxi@moz-lok4tg.dyn.optonline.net)
[20:04:12] <seanmonstar> ainieco: http://doc.rust-lang.org/1.0.0-beta.3/std/collections/#when-should-you-use-which-collection?
[20:04:40] *** Quits: grncdr (Adium@moz-m1g.e47.90.95.IP) (Quit: Leaving.)
[20:05:03] <seanmonstar> i love the reason for using a set: "When you just want a set"
[20:05:06] *** Quits: mkpankov (mkpankov@moz-2d6.jvq.149.83.IP) (Connection closed)
[20:05:12] *** Joins: mkpankov (mkpankov@moz-lmv.evt.23.84.IP)
[20:06:00] *** Joins: Savago (Savago@moz-8hd.3b6.246.162.IP)
[20:07:21] <hoverbear> blinky: In memory or on disk?
[20:07:55] *** Quits: Guest58 (textual@moz-tb1fm9.us.xo.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[20:08:45] *** Joins: kgrandon (Adium@moz-nn3vq9.2rkg.9kg1.0101.2620.IP)
[20:08:54] <ainieco> seanmonstar: thanks :)
[20:09:05] *** Joins: zcourts (zcourts@moz-7ms809.cable.virginm.net)
[20:11:05] *** Joins: kkus (kkus@moz-baj4jj.74.srtnet.com)
[20:12:36] *** Joins: munksgaa1d (munksgaard@moz-urnkl5.u.parknet.dk)
[20:13:12] <blinky> hoverbear: disk, let's just hope I pull this off
[20:13:16] <blinky> haha
[20:13:43] *** Joins: Guest58 (textual@moz-tb1fm9.us.xo.net)
[20:14:11] *** Joins: erikj (erikj@moz-dsm7da.skybroadband.com)
[20:14:44] *** Joins: ixti (ixti@moz-i3d.dae.119.188.IP)
[20:14:48] *** Quits: vmeson (rmacleod@moz-hq5.1km.224.128.IP) (Quit: Konversation terminated!)
[20:15:34] *** Joins: larhat (Adium@moz-tb1ulb.cable.virginm.net)
[20:15:35] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[20:15:53] *** Joins: TorunR (Torun@moz-34f2ia.dip0.t-ipconnect.de)
[20:17:00] *** Quits: qwerty_nor (Thunderbird@moz-vuo.d5a.248.5.IP) (Ping timeout: 121 seconds)
[20:17:45] *** bentley|away is now known as bentley
[20:18:07] *** Joins: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net)
[20:18:29] *** Joins: grncdr (Adium@moz-m1g.e47.90.95.IP)
[20:18:41] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[20:18:43] *** Quits: lov2cod1 (Adium@moz-40l.ob1.22.8.IP) (Quit: Leaving.)
[20:18:47] *** Quits: Torun (Torun@moz-34f2ia.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[20:18:54] *** Joins: nrc (nrc@moz-9v1svd.xtra.co.nz)
[20:18:54] *** ChanServ sets mode: +o nrc
[20:19:01] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[20:19:30] *** Quits: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com) (Connection closed)
[20:19:58] *** Joins: InfiniteJacuzzi (darren@moz-804egb.dyn.optonline.net)
[20:20:26] *** Joins: dik_dak (dik_dak@moz-865.h56.170.161.IP)
[20:21:10] *** Joins: Tarmashirin (Tarmashirin@moz-bak.2k3.199.117.IP)
[20:21:34] *** Quits: npm (npm@moz-urd.pod.125.50.IP) (Quit: AndroIRC - Android IRC Client ( http://www.androirc.com ))
[20:22:03] *** Quits: giucam (giucam@moz-iv0nnc.bb.dnainternet.fi) (Ping timeout: 121 seconds)
[20:22:03] <acrichto> burntsushi: ah I was wondering if there was a way to allow commands like `foo --opt a --opt b` in docopt, I could only see one that had a description string of `foo [options] [--opt VAL...]` which seemed unfortunate :(
[20:22:09] *** Quits: Temur (Tarmashirin@moz-bak.2k3.199.117.IP) (Connection closed)
[20:22:18] *** Quits: Tarmashirin (Tarmashirin@moz-bak.2k3.199.117.IP) (Quit: Leaving)
[20:22:27] *** Quits: stjahns (stjahns@moz-ilg413.uws.ualberta.ca) (Connection closed)
[20:22:35] *** Quits: hjr3 (hradtke@moz-lei.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:22:48] *** Joins: stjahns (stjahns@moz-ilg413.uws.ualberta.ca)
[20:22:50] *** Quits: grncdr (Adium@moz-m1g.e47.90.95.IP) (Quit: Leaving.)
[20:23:16] *** Quits: espadrine (tyl@moz-l019mn.fbx.proxad.net) (Ping timeout: 121 seconds)
[20:23:27] *** Joins: espadrine (tyl@moz-imvc7h.capitainetrain.com)
[20:23:32] *** Joins: jimb (user@moz-09a.i8g.126.207.IP)
[20:23:45] *** Joins: James (quassel@moz-9kp9p2.range86-148.btcentralplus.com)
[20:24:06] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[20:24:27] <hoverbear> acrichto: I'm pretty sure you can do that
[20:25:28] *** Joins: grncdr (Adium@moz-m1g.e47.90.95.IP)
[20:25:45] <hoverbear> acrichto: The same opt?
[20:25:48] *** Joins: Temur (Tarmashirin@moz-bak.2k3.199.117.IP)
[20:25:55] *** Quits: sunfish (sunfish@moz-no0.93r.245.63.IP) (Quit: Changing server)
[20:26:14] <acrichto> hoverbear: yeah (e.g. decoding it into `flag_opt: Vec<String>`)
[20:26:46] *** Quits: blinky (Mibbit@moz-966.099.5.189.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:26:47] *** Joins: zyphrus (David@moz-nhi.pas.98.101.IP)
[20:26:50] *** Quits: stjahns (stjahns@moz-ilg413.uws.ualberta.ca) (Ping timeout: 121 seconds)
[20:28:12] *** Joins: JagaJaga (JagaJaga@moz-ua8.hhl.62.178.IP)
[20:28:16] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[20:28:36] <hoverbear> acrichto: Ahhhh
[20:28:45] *** Quits: nano (nano@moz-00j6et.dynamic.kabel-deutschland.de) (Connection closed)
[20:28:50] *** Quits: mnemnion (mnemnion@moz-e8rfii.ca.comcast.net) (Connection closed)
[20:28:53] *** Joins: sunfish (sunfish@moz-no0.93r.245.63.IP)
[20:29:04] *** Joins: mnemnion (mnemnion@moz-e8rfii.ca.comcast.net)
[20:29:30] *** Quits: espadrine (tyl@moz-imvc7h.capitainetrain.com) (Ping timeout: 121 seconds)
[20:29:34] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[20:30:01] *** Quits: sunfish (sunfish@moz-no0.93r.245.63.IP) (Quit: leaving)
[20:30:17] *** Joins: nico (nico@moz-lkua9r.dip0.t-ipconnect.de)
[20:30:25] <hoverbear> acrichto: I haven't tried that
[20:30:49] *** Joins: sunfish (sunfish@moz-no0.93r.245.63.IP)
[20:31:53] *** Quits: JagaJaga (JagaJaga@moz-ua8.hhl.62.178.IP) (Quit: WeeChat 1.1.1)
[20:31:59] *** Quits: sunfish (sunfish@moz-no0.93r.245.63.IP) (Quit: leaving)
[20:32:03] *** Quits: InfiniteJacuzzi (darren@moz-804egb.dyn.optonline.net) (Quit: WeeChat 1.1.1)
[20:32:31] *** Joins: sunfish (sunfish@moz-no0.93r.245.63.IP)
[20:32:46] *** Joins: dalarmmst (dalarmmst@moz-mb21j4.bredband.comhem.se)
[20:32:47] *** Quits: sunfish (sunfish@moz-no0.93r.245.63.IP) (Quit: leaving)
[20:33:30] *** Quits: skade (skade@moz-6athcr.pools.vodafone-ip.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:33:30] *** Joins: sunfish (sunfish@moz-no0.93r.245.63.IP)
[20:33:52] *** Quits: sunfish (sunfish@moz-no0.93r.245.63.IP) (Quit: leaving)
[20:33:58] *** Joins: sunfish (sunfish@moz-no0.93r.245.63.IP)
[20:34:19] *** Quits: nico (nico@moz-lkua9r.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[20:34:47] *** Joins: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net)
[20:36:29] *** Joins: espadrine (tyl@moz-l019mn.fbx.proxad.net)
[20:36:49] *** Joins: spider-mario (spidermario@moz-coblcf.fbx.proxad.net)
[20:37:01] *** chmanchester is now known as chmanchester|afk
[20:37:06] <XMPPwocky> i forget, can FFI call into va_list functions
[20:37:15] <XMPPwocky> i need to call something with the signature of printf
[20:37:25] *** Quits: Ms2ger (Ms2ger@moz-15i.9ho.190.193.IP) (Quit: nn)
[20:37:28] *** Quits: mib_ahon15 (Mibbit@moz-2bogl8.vpn-s.ntnu.no) (Quit: http://www.mibbit.com ajax IRC Client)
[20:37:30] <XMPPwocky> and if i just pass the actual string in as the first parameter, format string exploits ahoy
[20:37:33] *** Quits: Matt__ (textual@moz-5bku1g.chello.nl) (Quit: My Mac has gone to sleep. ZZZzzz…)
[20:37:34] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[20:37:40] *** Joins: cptroot (Mibbit@moz-n169l8.caltech.edu)
[20:37:55] *** Joins: Guest (textual@moz-rtn.fg7.77.192.IP)
[20:37:57] <ainieco> is there "newtype" in rust for zerocost type wrappers?
[20:38:11] *** Joins: sawrubh (uid6719@moz-sr8l1j.brockwell.irccloud.com)
[20:38:15] <sfackler> XMPPwocky: yeah, you can define an extern varargs function
[20:38:17] <XMPPwocky> yes, tuple structs
[20:38:30] <XMPPwocky> sfackler: what's the syntax? 
[20:38:38] <sfackler> add ".." somewhere in the signature somewhere, can't remember where exactly :P
[20:38:50] <XMPPwocky> weird
[20:39:16] *** Quits: munksgaa1d (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[20:39:26] <ainieco> XMPPwocky: are you sure? tuple struct can hold more than 1 value which is not zero cost, or is become zero cost only in case of 1 field?
[20:39:41] <mbrubeck> ainieco: `struct Foo(i32);` is a newtype that wraps `i32` and has zero runtime cost.  You construct a foo like `let foo = Foo(1)` and can access the content with `foo.0` or by pattern matching.
[20:39:59] <scott> a 2-tuple struct is still zero cost. it takes up no more space than its two individual fields together
[20:40:07] *** Quits: tinaun (tinaun@moz-7l08ds.ct.comcast.net) (Ping timeout: 121 seconds)
[20:40:10] *** Quits: avikpal (avikpal@moz-f4i.kva.227.117.IP) (Connection closed)
[20:40:23] *** Quits: andre (andre@moz-rnd.3qv.76.201.IP) (Quit: leaving)
[20:40:32] <ainieco> mbrubeck: okay, cool
[20:40:36] <hoverbear> sfackler: Can Rust have varargs?
[20:40:37] <scott> (and it doesn't matter whether it's a tuple struct, normal struct, or just a tuple, it's all the same thing)
[20:40:41] <XMPPwocky> scott: modulo alignment
[20:40:43] <ainieco> scott: i don't need "fields" at all
[20:40:53] <talchas> hoverbear: not for functions at this time
[20:41:03] <hoverbear> talchas: Good, that shit is confusing.
[20:41:06] <ainieco> scott: found https://aturon.github.io/features/types/newtype.html , cool that they have it
[20:41:07] <XMPPwocky> rusti: struct Foo(u32, u8, u32); std::mem::size_of::<Foo>()
[20:41:09] -playbot- 12
[20:41:16] *** Joins: ianj (ianjneu@moz-ht5jmt.ma.comcast.net)
[20:41:18] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[20:41:18] <scott> ainieco: a newtype is just a struct with one field
[20:41:19] <talchas> hoverbear: you can do things like packing varargs into a slice with macros, which is what println!/format!/etc do
[20:41:31] <hoverbear> talchas: Yeah.
[20:41:40] <ainieco> scott: no, it's wrapper
[20:41:50] <scott> ainieco: what?
[20:41:54] <ainieco> or it's not newtype
[20:42:01] <scott> a newtype is most definitely just a struct with one field, in Rust
[20:42:10] <scott> there is no special newtype syntax or anything
[20:42:16] <seanmonstar> ainieco: the first sentence in that page: A "newtype" is a tuple or struct with a single field.
[20:42:16] <bluss> newtype is just a nickname
[20:42:23] <hoverbear> scott: No it's a nickname :)
[20:42:35] <scott> it's a nickname for a struct with one field, like I said
[20:42:40] <bluss> yes
[20:42:44] *** Joins: cholcombe (chris@moz-k0ajnr.i01-5.onvol.net)
[20:42:55] *** Joins: dstrbad (dstrbad@moz-fgge1q.dsl.iskon.hr)
[20:43:10] <scott> XMPPwocky: does the core team plan on reordering fields for optimal packing?
[20:43:11] <ainieco> bluss: https://wiki.haskell.org/Newtype this is proper newtype
[20:43:18] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[20:43:20] <XMPPwocky> scott: i don't know, ask the core team
[20:43:26] <ainieco> trying to figure out if rustc will eliminate struct nonsense part
[20:43:27] <XMPPwocky> that's the reason rust struct layouts are undefined, though
[20:43:28] <scott> XMPPwocky: not that that would help in your example
[20:43:33] <bluss> different languages, different dictionary
[20:43:38] <ainieco> and make it zerocost
[20:43:54] <mbrubeck> ainieco: What we're trying to tell you is that there is no `struct nonsense` -- a struct with one field in Rust is semantically just like a newtype in Haskell.
[20:43:57] <scott> ainieco: there is no struct nonsense part. structs are defined as having their fields inline
[20:44:00] <mbrubeck> (I say this as a long-time Haskeller)
[20:44:21] <XMPPwocky> i think the "type" keyword in rust is a giant awful waste
[20:44:32] <scott> Rust doesn't have the data/newtype distinction Haskell has because Rust doesn't use lazy evaluation
[20:44:41] <mbrubeck> XMPPwocky: Yeah, I strongly wish `type` created a newtype instead of just a typedef. :/
[20:44:54] <XMPPwocky> i'm pretty sure actual usages of "type" for non-keyword purposes outweigh uses of "type" as a keyword
[20:45:00] <bluss> newtypes are theoretically zero-cost, but in practice there might be small differences in how the optimizer handles it. That's subject to change with improvements in llvm etc
[20:45:01] <XMPPwocky> by a large margarine
[20:45:02] *** Joins: kieran (kieran@moz-c5gk5j.ihug.co.nz)
[20:45:23] <mbrubeck> playbot: struct Foo(u8); size_of::<Foo>()
[20:45:24] -playbot- <anon>:9:25: 9:39 error: unresolved name `size_of`
[20:45:24] -playbot- <anon>:9         struct Foo(u8); size_of::<Foo>()
[20:45:24] -playbot- output truncated; full output at: http://bit.ly/1P7CcRx
[20:45:28] <ainieco> mbrubeck: yeah, i understand semantics, i curious about rustc whether or not it will eliminate field access indirection, see https://wiki.haskell.org/Newtype#The_short_version
[20:45:30] <mbrubeck> playbot: struct Foo(u8); std::mem::size_of::<Foo>()
[20:45:31] -playbot- 1
[20:45:40] <mbrubeck> ainieco: There is no field access indirection for any structs in Rust.
[20:45:55] <ainieco> mbrubeck: oh, that's nice
[20:46:02] <seanmonstar> XMPPwocky: https://www.google.com/search?q=large+margarine
[20:46:02] <ainieco> thanks for clarifying this
[20:47:18] *** Quits: tigrou3tac (fabien@moz-gdonfo.fbx.proxad.net) (Ping timeout: 121 seconds)
[20:47:44] <ainieco> mbrubeck: https://aturon.github.io/features/types/newtype.html it says about type conversion runtime overhead, is it only true for single field tuple structs?
[20:48:02] *** Joins: zzmp (zzmp@moz-pccejg.12ul.lrlq.5500.2604.IP)
[20:48:02] <c0a8> how do I return the result of vec.iter().filter(...) from a function?
[20:48:28] <seanmonstar> c0a8: if you want a new vector filtered, .collect()
[20:48:32] *** Quits: tadh (quassel@moz-pg51s5.CWRU.Edu) (Connection closed)
[20:48:38] <bluss> c0a8: make sure the function you give to filter has a type you can write out
[20:48:42] <scott> ainieco: struct Wrapper(T); and struct Wrapper { foo: T } and (T,) and T all have the same representation and performance characteristics
[20:48:46] <bluss> c0a8: for example using a regular function
[20:48:50] <scott> ainieco: it's just syntax differences
[20:48:54] <c0a8> bluss: oh, if it's a closure.. there's no hope?
[20:48:55] <ainieco> scott: will there be an type converion overhead for n+1 field tuple structs?
[20:48:59] *** Joins: ucarion (ulyssecario@moz-4h4esd.c3v0.fbki.f140.2607.IP)
[20:49:02] <XMPPwocky> win 19
[20:49:06] <bluss> c0a8: box the closure, that should work
[20:49:08] <mbrubeck> ainieco: For multiple-field types, overhead compared to what?  If you consider a multi-field struct as a newtype of a tuple, then it has zero overhead compared to the plain tuple type.
[20:49:09] *** Quits: kieran (kieran@moz-c5gk5j.ihug.co.nz) (Ping timeout: 121 seconds)
[20:49:10] <scott> ainieco: example?
[20:49:27] <bluss> c0a8: does it need captures? if not, write it as a regular function
[20:49:31] *** Joins: JagaJaga (JagaJaga@moz-ua8.hhl.62.178.IP)
[20:49:44] <c0a8> bluss: yeah, it needs captures
[20:49:53] <seanmonstar> ainieco: the "overhead" of `let x = Miles(some_i32);` is just the copying of bytes typical to any move
[20:50:01] *** Joins: TheLemonMan (lemonboy@moz-8v32eq.50-151.net24.it)
[20:50:14] *** Quits: khades (Thunderbird@moz-u45.3vk.74.212.IP) (Client exited)
[20:50:15] <scott> ainieco: seanmonstar: it logically copies, but that can often be optimized out
[20:50:24] <seanmonstar> which llvm can likely optimize by folding out moves
[20:50:27] <bluss> c0a8: make sure it captures references only from function arguments or moves in any captures you need (no references to local variables), then box it
[20:50:30] <scott> like basically always
[20:50:34] *** Joins: khades (Thunderbird@moz-u45.3vk.74.212.IP)
[20:50:38] <bluss> c0a8: then you should be fine
[20:50:38] <ainieco> mbrubeck: compared to single field struct, see https://aturon.github.io/features/types/newtype.html , it says "no runtime overhead when converting between the two types" so rustc elimnates that overhead only for singlefield structs right?
[20:50:40] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[20:50:49] <mbrubeck> e.g. `struct Foo { a: T, b: U }` has the same representation and performance as `(T, U)`
[20:51:04] *** Quits: mahdi__ (mahdi@moz-ipf.n3s.129.78.IP) (Ping timeout: 121 seconds)
[20:51:04] <mbrubeck> ainieco: Right, but what two types are you interested in converting between?
[20:51:27] <mbrubeck> ainieco: Rustc doesn't "eliminate" any overhead -- the overhead is not there to begin with.
[20:51:41] *** Quits: dcase (dcase@moz-dfq4gm.bb.dnainternet.fi) (Connection closed)
[20:51:59] <mbrubeck> because structs in Rust carry their fields inline with no other data, just like C structs
[20:52:17] *** jandem is now known as jandem-away
[20:52:20] <ainieco> mbrubeck: why newtype.html is even there and tells me about overhead then? do you thing aturon is wrong?
[20:52:23] *** Quits: DerisiveLogic (smuxi@moz-lok4tg.dyn.optonline.net) (Ping timeout: 121 seconds)
[20:52:40] <scott> ainieco: it's just pointing out a common pattern and reassuring you that it doesn't involve any extra cost
[20:52:53] *** Joins: areski (areski@moz-ndudgf.user.ono.com)
[20:52:58] <scott> but that's just like any other struct in Rust. there is no cost, it's all inline layout
[20:53:03] *** Quits: ucarion (ulyssecario@moz-4h4esd.c3v0.fbki.f140.2607.IP) (Ping timeout: 121 seconds)
[20:53:04] <ainieco> scott: also it mentions type conversion overhead, saysing that for 3rd time already :)
[20:53:18] <ainieco> and you're telling me that there is no overhead
[20:53:39] <mbrubeck> ainieco: It's because (a) in some other languages there would be overhead
[20:53:55] <scott> it should probably refer to construction / destructuring instead of type conversion
[20:53:57] <mbrubeck> ainieco: and (b) it's emphasizing that the reason to do this is to gain compile-time semantics, *not* to change runtime behavior
[20:53:57] <kwantam> is there some way of disabling the overflow panic globally when intentionally doing arithmetic mod wordsize, or do I have to use the OverflowingOps methods?
[20:54:10] <scott> but it just means that wrapping up and unwrapping with a struct doesn't cost anything
[20:54:17] *** Quits: arBmind (Andreas@moz-dii.srj.246.46.IP) (Quit: Leaving.)
[20:54:34] <scott> the wrapping only exists in the type system
[20:54:34] <bluss> c0a8: I'm sorry if it turns out that FnMut isn't implemented for boxed closures, but if it isn't that's really something missing
[20:54:42] <XMPPwocky> WindowsBunny: http://doc.rust-lang.org/std/num/struct.Wrapping.html
[20:55:00] <bluss> c0a8: I'm not 100% sure, but this is a bit crazy
[20:55:06] *** Quits: lenstr (lenstr@moz-e7o.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[20:55:06] <c0a8> bluss: Yeah, hmm..
[20:55:17] <ainieco> scott: yeah, so that applies only to single field structs right because you can't have type system-only struct with more then two fields 
[20:55:17] <mbrubeck> kwantam: You can use types like Wrapping<u8>.
[20:55:23] *** Quits: dschatzberg (dschatz@moz-nk1clf.bu.edu) (Quit: Leaving)
[20:55:37] <kwantam> mbrubeck, XMPPwocky: thanks
[20:55:43] <ainieco> scott: that's what i tried to figure out :)
[20:55:51] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[20:55:53] <ainieco> with more than one field*
[20:55:54] <mbrubeck> ainieco: Right, unless you consider it to be wrapping a tuple.
[20:56:06] *** Joins: futile (felix@moz-cmcd12.unity-media.net)
[20:56:10] <scott> destructuing multi-field structs is still 100% free
[20:56:25] <scott> and constructing them can be free if LLVM arranges for the values to be in the right place at the right time
[20:56:26] <ainieco> mbrubeck: yeah, gotcha
[20:56:38] <ainieco> thank you guys for patience!
[20:56:38] <scott> or if it can figure out that the fields need not be contiguous
[20:57:15] <bluss> c0a8: http://is.gd/vgj5DB
[20:57:40] *** Quits: sprang (sprang@moz-q60.c9m.56.172.IP) (Ping timeout: 121 seconds)
[20:57:42] <bluss> c0a8: boxing iterators is not ideal, you lose most of the optimization potential
[20:58:15] <scott> ainieco: I guess what I'm trying to stress is that Rust definitely does not treat single-field structs or tuples as special in any way
[20:58:37] <scott> ainieco: everything just follows naturally from structs/tuples having inline layout of their fields
[20:59:36] <scott> unlike haskell, say, where a data type's fields are all thunks for lazy evaluation
[20:59:38] <burntsushi> acrichto: unfortunately not. :-( you might want to file an issue on https://github.com/docopt/docopt proper
[20:59:50] *** Joins: hjr3 (hradtke@moz-lei.av4.169.69.IP)
[21:00:07] *** Quits: hjr3 (hradtke@moz-lei.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:00:07] <c0a8> bluss: Thanks! at least it gives me something to work with
[21:00:12] *** Joins: hjr3 (hradtke@moz-lei.av4.169.69.IP)
[21:01:05] *** Joins: Rusky1 (russell@moz-c2fmlv.slkc.qwest.net)
[21:01:11] <ainieco> scott: hm, but if one-field tuple struct exists only in the type system and n+1 field typle struct is not, i think this is kinda special treatment, i don't say it's bad, actually i like that we don't have another keyword for this
[21:01:16] <ainieco> like "newtype" or something
[21:01:37] *** Quits: GaryOak_ (GaryOak_@moz-etoj16.hfc.comcastbusiness.net) (Connection closed)
[21:01:53] *** Quits: gzero (pavek@moz-on4hbe.cray.com) (Ping timeout: 121 seconds)
[21:02:01] <scott> ainieco: no, there is no difference between tuple structs with 1 field and tuple structs with more than 1 field in the type system
[21:02:03] <scott> no special treatment
[21:02:11] <mbrubeck> ainieco: The same is true of multi-field tuple structs:  `struct Foo(T,U)` is different from `(T,U)` only in nominal type, not in representation.
[21:02:12] <scott> they all follow the exact same rules
[21:02:15] *** chmanchester|afk is now known as chmanchester
[21:02:21] <scott> no types exist at runtime
[21:02:35] *** Quits: Rusky (russell@moz-du8evc.slkc.qwest.net) (Ping timeout: 121 seconds)
[21:02:39] *** Joins: lov2cod (Adium@moz-4c4th3.o38v.k60l.0119.2620.IP)
[21:03:01] *** Quits: hjr3 (hradtke@moz-lei.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:03:18] <niconii> ainieco, scott: right, type-checking is strictly a compile-time affair
[21:03:43] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[21:03:45] *** Joins: ucarion (ulyssecario@moz-90brpk.c3v0.fbki.f140.2607.IP)
[21:03:58] <niconii> (maybe it's muddied up a little by trait objects though, i dunno the specifics)
[21:04:17] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[21:04:38] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[21:04:40] <ainieco> mbrubeck: yeah, i understand and Foo(T) is no different than T, right?
[21:05:02] <ainieco> after typechecking that is
[21:05:24] <scott> or to fit mbrubeck's analogy, Foo(T) is like (T,) which is the syntax for a single-field tuple
[21:05:35] <scott> and they both have the same representation - a single T
[21:05:46] *** Quits: alex-abreu (alex@moz-j54ho8.biz.rr.com) (Connection closed)
[21:05:51] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[21:05:52] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:05:55] <scott> there is nothing else in the tuple, no pointer indirection, etc
[21:06:03] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[21:06:06] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[21:06:06] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:06:34] <niconii> ainieco: Foo(T) is like (T,) is like T -- Foo(T,U) is like (T,U) which is just T's data followed by U's data in memory
[21:07:24] <bluss> presumably (T, U) is just like a regular struct with fields T, U and appropriate alignment
[21:07:35] <bluss> in implementation defined layout
[21:07:51] <niconii> right, alignment too and all that
[21:08:06] <niconii> and i guess the order isn't necessarily guaranteed, just whatever's convenient
[21:08:17] <scott> anyway, to sum up, Rust doesn't need a special syntax for newtypes because the general rules of data layout make single-field tuples, structs, and tuple structs totally zero-cost
[21:08:36] <scott> is there a better name to refer to tuples, structs, and tuple structs all at once? :p
[21:09:02] <XMPPwocky> scott: product types?
[21:09:12] <scott> yeah, that works
[21:09:49] *** Quits: Temur (Tarmashirin@moz-bak.2k3.199.117.IP) (Connection closed)
[21:09:50] *** Quits: jdm (jdm@moz-4vu.06r.98.75.IP) (Quit: )
[21:10:11] *** Joins: Temur (Tarmashirin@moz-bak.2k3.199.117.IP)
[21:10:15] *** Quits: grncdr (Adium@moz-m1g.e47.90.95.IP) (Quit: Leaving.)
[21:10:18] <Dabo> data structures!
[21:10:28] *** Quits: forgottenone (forgottenon@moz-igt.26m.45.92.IP) (Quit: Konversation terminated!)
[21:10:40] <scott> that would also include enums and possibly primitives
[21:11:00] *** Quits: mudpit (Mibbit@moz-i7cb3r.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:11:03] <gsingh93> can someone help me get this to work: http://is.gd/BlS0N7
[21:11:06] <bluss> enums are sum types
[21:11:18] <scott> though to be fair, enum Foo { Foo(T) } is probably also a zero-cost wrapper
[21:11:22] *** Joins: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch)
[21:11:29] <gsingh93> I want to use a Box<T> where I need a Box<Trait>
[21:11:34] <scott> enums are kind of combined sums of products (algebraic data types)
[21:11:46] <Dabo> gsingh93, use `as Box<Trait>`
[21:11:47] <Dabo> like http://is.gd/D021qd
[21:11:49] <scott> you could use only enums and never structs (similar to Haskell's data keyword)
[21:11:49] *** Joins: Twisol (textual@moz-6tk.mnr.166.130.IP)
[21:11:50] *** Quits: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP) (Ping timeout: 121 seconds)
[21:12:03] *** Joins: tynopex (Mibbit@moz-gh3.gum.189.205.IP)
[21:12:26] *** Quits: }ls{ (uhelp@moz-ovfiqg.dip0.t-ipconnect.de) (Quit: User terminated by real life interrupt)
[21:12:36] *** Joins: SpaceManiac (Tad@moz-0rigf5.dorm.utexas.edu)
[21:12:37] <gsingh93> Dabo: thanks!
[21:12:43] <bluss> unifying enum and struct declarations is an inviting thought
[21:12:55] <scott> probably not going to happen in Rust
[21:13:03] *** Quits: errordeveloper (ilya@moz-62k.i0g.218.2.IP) (Ping timeout: 121 seconds)
[21:13:08] <scott> especially now that variants are namespaced under the enum
[21:13:11] <bluss> yeah that time is over now!
[21:13:20] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[21:13:21] <bluss> no more fundamental changes
[21:13:38] <Dabo> gsingh93, having `players: Vec<Box<Player>>` works too - I'm not sure why it didn't infer that from the function call, but I guess it needed a more concrete coercion
[21:13:40] *** Joins: igork (igork@moz-ndgnov.broadband.corbina.ru)
[21:13:53] <talchas> looking at oldrust is always good for amusement
[21:13:57] <scott> Rust made a bunch of not necessarily optimal choices to appeal to the C-like-language crowd
[21:14:00] <talchas> "wait this doesn't look anything like rust"
[21:14:07] <scott> but nothing particularly bad. just minor stuff
[21:14:42] <scott> talchas: my favourite change was renaming alt to match
[21:14:51] *** Joins: grncdr (Adium@moz-m1g.e47.90.95.IP)
[21:15:22] <bluss> talchas: any particular example of old rust?
[21:15:44] *** Quits: Lovot (Lovot@moz-1je.00u.73.69.IP) (Ping timeout: 121 seconds)
[21:16:01] *** Quits: Altazimuth_ (Altazimuth@moz-rb7u6p.skybroadband.com) (Ping timeout: 121 seconds)
[21:16:02] *** Quits: Drek (Mibbit@moz-tueguc.dip0.t-ipconnect.de) (Quit: http://www.mibbit.com ajax IRC Client)
[21:16:39] *** Quits: c0a8 (joel@moz-6ampnk.gtri.gatech.edu) (Ping timeout: 121 seconds)
[21:17:40] *** Quits: __mark__ (mark@moz-pb9mc5.dynamic.chello.pl) (Client exited)
[21:17:42] <SpaceManiac> Is this a compiler bug or am I invoking some sort of UB? http://is.gd/rS4lpt
[21:17:49] <hoverbear> talchas: I liked ~
[21:17:50] *** Joins: GaryOak_ (GaryOak_@moz-etoj16.hfc.comcastbusiness.net)
[21:17:53] *** Quits: dalarmmst (dalarmmst@moz-mb21j4.bredband.comhem.se) (Ping timeout: 121 seconds)
[21:17:55] <ainieco> scott: if Foo(T) != T then it's not zero cost, i could've write T instead manually. here is the proof https://gist.github.com/anonymous/e8e8b0f3da96e60f1642 , if Foo(T) is thero cost compared to just T then these programms
[21:18:00] * bluss is a fan of ~ too
[21:18:01] <ainieco> should produce identical binaries
[21:18:09] <ainieco> that's whole point of newtype in haskell
[21:18:24] *** Quits: daze (daze@moz-tc29eq.static.zebra.lt) (Connection closed)
[21:18:29] <niconii> ainieco: Foo(T) != T only during type-checking
[21:18:36] <bluss> ainieco: it might not in reality as I said before, there might be minor opitimizer differences
[21:18:47] *** Quits: doener (doener@moz-929cn9.unity-media.net) (Quit: leaving)
[21:18:50] <ainieco> niconii: no, use objdump and see ofr yourself ;)
[21:19:06] <scott> ainieco: those will most assuredly produce the same binaries on anything other than -O0
[21:19:18] <scott> also you didn't do the comparison correctly
[21:19:22] <niconii> playbot: use std::mem::size_of; struct Thing(i32); (size_of::<i32>(), size_of::<(i32,)>(), size_of::<Thing>())
[21:19:23] <jshs> ainieco: the first thing uses u64, the second i32
[21:19:24] -playbot- (4, 4, 4)
[21:19:25] *** Quits: ai (ai@moz-pqofrl.sunline.net.ua) (Quit: Leaving.)
[21:19:29] <scott> the latter program should use let x = 1;
[21:19:32] <niconii> playbot: use std::mem::size_of; struct Things(i32, i32); (size_of::<(i32, i32)>(), size_of::<Things>())
[21:19:33] -playbot- (8, 8)
[21:19:37] *** Joins: daze (daze@moz-tc29eq.static.zebra.lt)
[21:19:55] <niconii> ainieco: i32, (i32,) and Thing(i32) are all four bytes long
[21:20:07] <niconii> ainieco: (i32, i32) and Things(i32, i32) are both eight bytes long
[21:20:11] <niconii> ainieco: there is no overhead
[21:20:14] <WindowsBunny> (4:54:45 PM) XMPPwocky: WindowsBunny: http://doc.rust-lang.org/std/num/struct.Wrapping.html
[21:20:17] <WindowsBunny> XMPPwocky: wut?
[21:20:25] *** Joins: shellac (textual@moz-9b49cr.cable.virginm.net)
[21:20:29] <mkomitee> I see ~ a lot in rust blog posts, is that an old thing that got removed?
[21:20:38] <niconii> mkomitee: yes
[21:20:47] <XMPPwocky> WindowsBunny: wrong autocomplete sorry
[21:20:48] <hoverbear> mkomitee: Yeah it was Box<>
[21:20:49] <bluss> mkomitee: it was used for unique pointers (mostly exactly Box)
[21:21:00] <scott> mkomitee: short answer: ~T = Box<T>, ~str = String, ~[T] = Vec<T>
[21:21:17] <WindowsBunny> XMPPwocky: Don't be sorry, I just need to chop off your head for that offense :D
[21:21:21] <marcusklaas> ~ was da bom, yo. it all went downhill after they removed ~
[21:21:26] <hoverbear> mkomitee: As you can see, early Rust underestimated the power of it's own type system.
[21:21:35] <mkomitee> Gotcha. That should help me make some sense of some blog posts.
[21:21:48] <scott> marcusklaas: the fact that ~ had a different meaning for slices made it very much not the bomb
[21:22:03] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Ping timeout: 121 seconds)
[21:22:21] <ainieco> jshs: good point
[21:22:25] <marcusklaas> what does that mean, scott?
[21:22:27] <ainieco> scott: niconii https://gist.github.com/anonymous/2394dbb59ddfe7960fdb look
[21:22:30] <ainieco> diff included
[21:23:03] <ainieco> it's close tho :)
[21:23:04] <scott> ainieco: you still didn't fix the latter to use `let x = 1;` to match the former
[21:23:11] <ainieco> compiled with -O
[21:23:21] <ainieco> scott: ah, let me try
[21:23:54] <comex> util.rs:60:21: 60:45 error: unresolved import `std::i16::from_str_radix`. There is no `from_str_radix` in `std::i16`
[21:23:55] *** Joins: marc_ (uid5324@moz-t3einu.ealing.irccloud.com)
[21:24:01] <comex> but it's in the nightly docs :/
[21:24:09] <scott> comex: remove std::
[21:24:16] <scott> it's a static method on the type i64
[21:24:18] <scott> i16*
[21:24:34] *** Joins: ucarion_ (ulyssecario@moz-gds1gv.c3v0.fbki.f140.2607.IP)
[21:24:44] <scott> marcusklaas: ~str was not Box<str>
[21:24:49] <marc_> sprintf(buf, "%s", ginormous) // how does rust prevent overflows or do truncation ala snprintf ?
[21:24:58] <ainieco> https://gist.github.com/anonymous/651765036f0b897305c8 they're the same !!!!
[21:25:18] <ainieco> guys, that was really fun, thank you so much!
[21:25:27] <ainieco> (and educational)
[21:25:28] *** Quits: sbanwart (IceChat9@moz-fouu55.kodak.com) (Ping timeout: 121 seconds)
[21:25:46] *** Quits: ucarion (ulyssecario@moz-90brpk.c3v0.fbki.f140.2607.IP) (Ping timeout: 121 seconds)
[21:26:00] <bluss> show is over? We can do more fun stuff
[21:26:19] <comex> util.rs:311:34: 311:52 error: type mismatch resolving `<T as core::ops::Neg>::Output == T`:
[21:26:21] <comex>  expected associated type,
[21:26:23] <comex>     found type parameter [E0271]
[21:26:25] <comex> util.rs:311     if neg { result = result.map(std::ops::Neg::neg); }
[21:26:30] <comex> i guess i can't do that, but that's sure an odd error description
[21:26:33] *** Quits: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net) (Quit: WeeChat 1.1.1)
[21:26:34] * hoverbear throws ainieco some dollars
[21:27:31] <scott> comex: maybe if you specify a specific type's neg, e.g. T::neg
[21:27:52] <SpaceManiac> marc_: the format! macro produces an owned String type rather than expecting you to pass in a buffer
[21:27:59] <mkomitee> In rust, why would I want to Box something? I understand that it's a pointer to something that's allocated on the heap, and I understand why you'd need to do that in C, but if I recall correctly, in rust it's safe to return something allocated on the stack, or to even share it across threads.
[21:28:17] <comex> mkomitee: to avoid memory copying
[21:28:26] *** Joins: claudiop (claudiop@moz-sqo2tm.cpe.netcabo.pt)
[21:28:32] <comex> but indeed, the advice seems to be to avoid box when it's not necessary
[21:28:33] <marc_> SpaceManiac: sure, so the function is better.. if I wrote a fn that looked like sprintf.. I assume that would fail at runtime?
[21:28:33] <sfackler> mkomitee: recursive data structures are one example
[21:28:36] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[21:28:37] <marc_> because of bounds checking, that is
[21:28:43] <scott> mkomitee: struct Node { val: i32, next: Box<Node> } // without the box this has infinite size
[21:28:52] <comex> another reason is for trait objects (where the owner doesn't know the size)
[21:28:53] <scott> oops, should be Option<Box<Node>>
[21:28:53] <mkomitee> That makes sense.
[21:29:01] *** Quits: kgrandon (Adium@moz-nn3vq9.2rkg.9kg1.0101.2620.IP) (Quit: Leaving.)
[21:29:09] <ainieco> love rust
[21:29:12] *** Quits: ainieco (ainieco@moz-8pv.ksd.162.188.IP) (Quit: leaving)
[21:29:16] <mkomitee> I get that, ... but I'm not clear on how it helps avoid memory copying.
[21:29:17] *** Joins: mkpankov` (user@moz-lmv.evt.23.84.IP)
[21:29:45] <scott> you can copy just the pointer when you move the box, instead of copying its contents
[21:30:01] *** Quits: Temur (Tarmashirin@moz-bak.2k3.199.117.IP) (Connection closed)
[21:30:10] *** Joins: Temur (Tarmashirin@moz-bak.2k3.199.117.IP)
[21:30:10] <talchas> marc_: and if you do write!(), which is more like sprintf, I think it truncates or returns an error (since write! returns a Result)
[21:30:16] <mkomitee> If a stack allocated structure is moved, it gets copied?
[21:30:21] <bluss> here's demonstrating practical difference in optimization when using newtype http://is.gd/JD121B
[21:30:25] *** Quits: ahal (ahal@moz-b8e0a0.cpe.pppoe.ca) (A TLS packet with unexpected length was received.)
[21:30:33] <scott> mkomitee: yes (though it can be optimized out sometimes)
[21:30:42] <mkomitee> oooooooh, now I get it.
[21:30:43] <bluss> (hit asm, one vectorizes, the other not)
[21:30:43] <comex> weird, my simplified test case doesn't get the same error
[21:30:43] <SpaceManiac> marc_: yes, bounds checking causes a runtime failure
[21:30:49] <scott> moves are shallow copies that leave the original value inaccessible
[21:31:06] <mkomitee> I suppose it would have to.
[21:31:08] <mkomitee> Thanks.
[21:31:14] <scott> moving a String copies a pointer, length, and capacity
[21:31:17] *** Quits: xav (xav@moz-5tfec1.mobi) (Ping timeout: 121 seconds)
[21:31:20] <scott> the things directly in the String struct
[21:31:23] *** Quits: Db (Db@moz-hma9kp.me) (Connection closed)
[21:31:26] <marc_> thanks guys
[21:31:33] *** Joins: Db (Db@moz-hma9kp.me)
[21:32:09] <mkomitee> Any variable sized type in the std library is probably heap allocated under the hood, except for the components of it which are of fixed size.
[21:32:15] <scott> yeah
[21:32:38] <mkomitee> So returning a "stack" allocated String involves a copy, but it's a relatively little amount of data.
[21:32:43] *** Quits: tynopex (Mibbit@moz-gh3.gum.189.205.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:33:09] <mkomitee> I guess if you have a rather "large" structure of fixed size, you'd want to make sure to Box it if you plan on letting it survive the stack frame in which it's been allocated.
[21:33:19] <mkomitee> For hand-wavy values of "large"
[21:33:31] *** Joins: bfisher-fleig (chatzilla@moz-qbdpvi.office.zencoderdns.net)
[21:33:51] <hoverbear> mkomitee: Approximately hoverbear sized
[21:34:10] <VShell> bluss: that's weird, why does that happen?
[21:34:12] <mkomitee> Is it only an issue if it survives the frame in which it was allocated, or is it an issue if it's moved at all?
[21:34:37] *** darkowlzz|afk is now known as darkowlzz
[21:34:45] *** Quits: Temur (Tarmashirin@moz-bak.2k3.199.117.IP) (Connection closed)
[21:35:12] *** bentley is now known as bentley|away
[21:35:32] <mkomitee> Can a T and a Box<T> be used interchangeably?
[21:35:43] *** Joins: Temur (Tarmashirin@moz-bak.2k3.199.117.IP)
[21:36:06] <scott> mkomitee: by the way, the common advice is to never return Box<T> from a function, since just returning T will be optimized if its large, and in many cases constructed directly into the memory the caller wants it in
[21:36:07] <bluss> VShell: I'm not an llvm wizard, so no idea. I'm sure rustc feeds llvm slightly different input for the two cases
[21:36:08] <mbrubeck> bluss: Looking at the LLVM IR, it looks like the only difference is the types... so I guess the LLVM optimization pass is not general enough?
[21:36:14] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[21:36:21] *** Joins: kgrandon (Adium@moz-bq4k2p.2rkg.9kg1.0101.2620.IP)
[21:36:28] *** Quits: dstrbad (dstrbad@moz-fgge1q.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[21:36:31] <bfisher-fleig> I'm trying to read a file into a String. I copied the example from nightly std docs but I'm getting a type mismatch error:
[21:36:36] <bluss> mbrubeck: the first few lines of vector.body are different
[21:36:39] <scott> mkomitee: most of the time T and Box<T> are logically equivalent (except in something like recursive data structures)
[21:36:41] <bfisher-fleig> Here's the code: `use std::fs::File; let mut f = try!(File::open("file.txt"));`
[21:36:47] <VShell> bluss: *nods*
[21:36:47] <bluss> mbrubeck: one is using 4 x i32 and the other not
[21:37:19] <talchas> bfisher-fleig: most likely it's that try! expects the return type to be a specific sort of Result
[21:37:24] *** bentley|away is now known as bentley
[21:37:26] <mbrubeck> ah
[21:37:28] <bluss> maybe I should report a but with this example and see if I can attract a wizard
[21:37:30] <talchas> but if you're putting this in main(), main returns ()
[21:37:34] <bfisher-fleig> Here's the error: (expected (), found enum `core::result::Result`) [E0308] note: in expansion of try!
[21:37:39] <talchas> yeah
[21:38:03] <talchas> try! can only be used in a function returning Result
[21:38:07] <mkomitee> scott: If there's a function that takes a param of type T, can I safely pass it a Box<T>?
[21:38:24] <scott> mkomitee: you would have to unbox it (dereference)
[21:38:24] <bfisher-fleig> oh, right! because try! doesnt panic. it returns on Err
[21:38:27] *** Quits: Temur (Tarmashirin@moz-bak.2k3.199.117.IP) (Quit: Leaving)
[21:38:51] <bfisher-fleig> talchas: That totally makes sense now... doh!
[21:39:12] *** darkowlzz is now known as darkowlzz|afk
[21:39:18] <mkomitee> and vice versas, if a function takes a param of Box<T>, I'd have to manually box it to pass it?
[21:39:19] *** Quits: polyfractal (polyfractal@moz-a4u.hn6.207.104.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:39:30] * bfisher-fleig realizes this is a classic case of RTFM
[21:39:53] <scott> mkomitee: yes
[21:40:39] *** Joins: KallDrexx (KallDrexx@moz-4fqk30.dybhfl.sbcglobal.net)
[21:40:41] *** Quits: grncdr (Adium@moz-m1g.e47.90.95.IP) (Quit: Leaving.)
[21:40:42] <talchas> this is why if it is something that might be boxed you generally take &T
[21:40:44] <posix4e> N2670: Minimal Support for Garbage Collection and Reachability-Based Leak Detection (revised) (http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2670.htm)
[21:41:42] <mkomitee> The main reason I'm asking is yesterday I helped someone in here with an issue in his code, and when I looked at it, he had boxed everything and I really had no idea why he'd do that.
[21:41:53] *** Joins: e_svedang (e_svedang@moz-p1r4ve.bredband.comhem.se)
[21:42:07] <scott> taking Box<T> as a parameter is probably not useful most of the time
[21:42:33] *** Parts: bfisher-fleig (chatzilla@moz-qbdpvi.office.zencoderdns.net) ("")
[21:42:43] *** Quits: killercup (killercup@moz-gpufip.dip0.t-ipconnect.de) (Quit: Bye)
[21:42:57] *** Quits: Quanttek (quassel@moz-25k96c.6fkd.dvrb.8108.2a02.IP) (Ping timeout: 121 seconds)
[21:43:36] <mkomitee> I'll save boxing for large fixed size data structures and recursive data structures unless I"m writing something which is like to be very sensitive to memory allocations.
[21:44:01] <scott> boxes are also useful for owned trait objects
[21:44:17] <mkomitee> Yeah, that too.
[21:44:37] <mkomitee> I've had need of that in the past, and until this conversation it was the only time I'd consider using a box.
[21:44:40] *** Joins: ismaelga (ismaelga@moz-rjm.jv4.251.188.IP)
[21:44:44] *** Quits: jshs (jshs@moz-vkmba5.dip0.t-ipconnect.de) (A TLS packet with unexpected length was received.)
[21:45:00] *** Quits: Guest58 (textual@moz-tb1fm9.us.xo.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:45:05] <scott> are you familiar with std::unique_ptr in C++?
[21:45:10] *** Joins: Matt__ (textual@moz-5bku1g.chello.nl)
[21:45:14] *** Quits: ralu (ralu@moz-52ptkt.dynamic.t-2.net) (Ping timeout: 121 seconds)
[21:45:21] <scott> Box is pretty much the same
[21:45:43] <mkomitee> To be honest, I've gone to great lengths to avoid C/C++ due to the pitfalls of memory safety.
[21:46:02] <mkomitee> I've only touched it when I absolutely had to.
[21:46:13] <scott> I think lots of people are in the same boat
[21:46:20] <scott> good thing Rust is here now :)
[21:46:27] *** Quits: Matt__ (textual@moz-5bku1g.chello.nl) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:46:30] *** Quits: gopar (gopar@moz-5039uj.ca.comcast.net) (Connection closed)
[21:46:30] <mkomitee> Every time I touched C (less so C++) I've run into one of the pitfalls.
[21:46:34] *** Quits: mnemnion (mnemnion@moz-e8rfii.ca.comcast.net) (Connection closed)
[21:46:55] *** Joins: mnemnion (mnemnion@moz-e8rfii.ca.comcast.net)
[21:46:55] <Wqer> Same here. Rust is what made me stop putting off systems programming.
[21:47:17] <Wqer> I think we'll get a lot of new programmers that would otherwise not want to deal with C/C++
[21:47:41] *** Joins: mnemnion_ (mnemnion@moz-e8rfii.ca.comcast.net)
[21:47:43] *** Quits: SneakySnake (nya@moz-i9is4u.pool.telekom.hu) (Connection closed)
[21:47:45] *** Quits: mnemnion (mnemnion@moz-e8rfii.ca.comcast.net) (Connection closed)
[21:47:46] <mkomitee> The main reason I avoided it was because every time I "did something wrong" with respect to memory safety, the compiler didn't notice / care. It may have issued a warning, but since I was usually patching an open source project, the new warning got lost in all of the old warnings.
[21:48:21] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[21:48:25] <mkomitee> ... and not only would it not complain loudly enough (or fail to compile) it usually appeared to work.
[21:48:27] <scott> haha, I hate projects that never clean up their warnings
[21:49:18] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[21:49:21] <bluss> yeah warnings are often important to note
[21:49:21] <steveklabnik> rust has pitfalls too ;)
[21:49:25] <steveklabnik> they're just less dangerous ones
[21:49:54] *** Joins: davebettin_ (davebettin@moz-acc.cl4.35.72.IP)
[21:49:55] <mkomitee> Most recently I made the mistake of returning a stack allocated variable. Since it was used immediately after the function returned, it happened to work.
[21:49:58] <bluss> rust gives you hubris, so you get in trouble with the gods
[21:50:06] *** Joins: blank_na1e (blank_name@moz-igojne.mi.frontiernet.net)
[21:50:10] <niconii> scott: back when i programmed in c i used -Werror for that very reason
[21:50:46] <Sgeo_> What pitfalls does Rust have?
[21:51:14] *** Quits: Douman (Douman@moz-43o3d5.dynamic.mts-nn.ru) (Quit: )
[21:51:18] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[21:51:25] <steveklabnik> 1. unsafe. 2. it can be hard to learn. at first, lots of borrow checker fighting
[21:51:32] *** Quits: blank_name (blank_name@moz-kau.24b.36.50.IP) (Ping timeout: 121 seconds)
[21:51:34] <scott> I like how returning a reference to a local is often a type error in Rust before it even looks at the function body. fn f() -> &str // rustc's like what do you mean? you can't just have a reference that comes from nowhere
[21:51:47] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[21:51:47] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:51:51] *** Joins: fengshaun (fengshaun@moz-rf0qk5.cable.teksavvy.com)
[21:52:13] *** Quits: davebettin (davebettin@moz-acc.cl4.35.72.IP) (Ping timeout: 121 seconds)
[21:52:17] *** Quits: sillesta (sillesta@moz-501od2.business.telia.com) (A TLS packet with unexpected length was received.)
[21:52:17] <niconii> Sgeo_: sometimes your programs just end up being too good
[21:52:19] <mkomitee> scott: it takes a while to get used to seeing that in a complaint about lifetimes.
[21:52:24] <scott> although "missing lifetime specifier" isn't the most educational error message for that
[21:52:33] <mkomitee> :)
[21:52:37] *** Joins: Altazimuth_ (Altazimuth@moz-rb7u6p.skybroadband.com)
[21:52:54] * Sgeo_ still wants to use Rust for high-level stuff >.>
[21:52:59] <niconii> Sgeo_: sometimes i miss that li'l segfault
[21:53:13] <niconii> (no i don't)
[21:53:15] <mkomitee> As a newbie, I see that and it tells me that it's valid, but I need to figure out how to specify the lifetime.
[21:53:17] *** Joins: sillesta (sillesta@moz-501od2.business.telia.com)
[21:53:18] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[21:53:22] *** Joins: killercup (killercup@moz-gpufip.dip0.t-ipconnect.de)
[21:53:25] *** Quits: killercup (killercup@moz-gpufip.dip0.t-ipconnect.de) (Connection closed)
[21:53:30] <scott> niconii: using Rust is eroding your debugger skills
[21:53:36] *** Joins: Murph (bill@moz-b27bat.fios.verizon.net)
[21:54:10] <kzx> his debugging skills are getting a bit ... rusty
[21:54:32] * kzx shows himself out
[21:54:43] <niconii> scott: you're right, pretty soon i'll forget how to painstakingly keep track of every single malloc and free
[21:54:47] *** Quits: slomo (slomo@moz-p8m0g2.net) (Quit: Ex-Chat)
[21:54:57] <niconii> scott: and then i might have to fill that part of my brain with like... useful things
[21:55:29] <scott> niconii: that's where the understanding of lifetimes goes in your brain
[21:56:24] *** Quits: tomprogrammer (thomas@moz-1biq3o.tr5r.qept.4dd0.2001.IP) (Connection closed)
[21:56:30] *** Joins: jbcurtin_ (jbcurtin@moz-lskisb.LosAngeles1.Level3.net)
[21:56:59] *** Joins: tristanseifert (tristanseif@moz-r0t7ns.res.rr.com)
[21:58:29] <sillesta> lifetime burritos!
[21:58:47] <aji> google is being dumb
[21:59:02] <aji> what's the equivalent of isspace, isgraph, etc
[21:59:02] *** bentley is now known as bentley|away
[21:59:12] *** Quits: jbcurtin (jbcurtin@moz-lskisb.LosAngeles1.Level3.net) (Ping timeout: 121 seconds)
[21:59:21] <aji> i found the libc bindings but can't find anything else
[21:59:29] <bluss> aji: use the api docs search, not google
[21:59:37] <bluss> aji: or api docs -> primitives -> char
[21:59:37] <scott> aji: check out the char docs: http://doc.rust-lang.org/1.0.0-beta.3/std/primitive.char.html
[21:59:40] <aji> i put isspace and is_space into there and didn't get anything
[21:59:44] *** bentley|away is now known as bentley
[21:59:46] *** Joins: alex-abreu (alex@moz-j54ho8.biz.rr.com)
[21:59:48] <aji> scott: ah, awesome
[21:59:52] <Sgeo_> sillesta, a lifetime is a burrito in the burrito of monad tutorials, what's the problem?
[21:59:56] *** Joins: james4k (james@moz-ao8aj6.consolidated.net)
[21:59:58] <aji> what's the correct incantation to give the search bar to get to the primitives?
[22:00:20] <scott> aji: 'char' and then click the black std::char
[22:00:20] *** Quits: Twisol (textual@moz-6tk.mnr.166.130.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:00:33] <aji> ah, the black one, ok
[22:00:34] <scott> also the main page of the docs has a list of them
[22:00:35] *** Joins: Twisol (textual@moz-6tk.mnr.166.130.IP)
[22:00:35] <sillesta> Sgeo_: eh?
[22:00:45] <bluss> aji: maybe they have no page of their own. http://doc.rust-lang.org/std/#primitives
[22:00:55] *** Quits: Altazimuth_ (Altazimuth@moz-rb7u6p.skybroadband.com) (Ping timeout: 121 seconds)
[22:01:05] <Sgeo_> A bad attempt to combine two Haskell jokes, I thought you were making one
[22:01:19] <aji> i always got frustrated because i would end up at the "utilities for dealing with char types" doc page :(
[22:01:48] <Sgeo_> https://byorgey.wordpress.com/2009/01/12/abstraction-intuition-and-the-monad-tutorial-fallacy/
[22:01:59] <sillesta> i'm not sure what a lifetime burrito is actually, saw it in the rust book i think?
[22:02:10] <Sgeo_> http://james-iry.blogspot.com/2009/05/brief-incomplete-and-mostly-wrong.html
[22:02:12] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Connection closed)
[22:02:29] <bluss> no offense Sgeo_ but I really hoped I'd escape the burritos by not being in the haskell irc .. :)
[22:02:45] *** Quits: essem2 (Thunderbird@moz-f9p.4ol.7.74.IP) (Client exited)
[22:02:49] <scott> burritos are a universal property, they cannot be escaped
[22:03:01] <Sgeo_> I like burritos, but not when they contain burritos
[22:03:02] <hoverbear> bluss: Burritos are life.
[22:03:06] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[22:03:07] <sillesta> so burritos are not from rust?
[22:03:11] <Sgeo_> (I don't actually like IRL burritos)
[22:03:14] *** Joins: Twinklebear (Twinklebear@moz-n0t.6eh.110.128.IP)
[22:03:24] <hoverbear> sillesta: Burritos are from meso-America
[22:03:43] *** Quits: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net) (Ping timeout: 121 seconds)
[22:03:48] <niconii> sillesta: here's where your lifetime burrito came from: http://rustbyexample.com/lifetime.html
[22:03:51] <bluss> I've never seen a burrito, they don't exist here
[22:04:06] <sillesta> niconii: yes! :)
[22:04:08] <bluss> maybe they do though
[22:04:11] <sillesta> bluss: ditto
[22:04:13] <GaryOak_> the new foo bar, 'burrito lifetime
[22:04:28] <sillesta> my land is barren of all burrito
[22:04:39] *** Joins: AndChat-17289 (mkpankov@moz-lmv.evt.23.84.IP)
[22:04:42] *** Quits: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se) (Quit: bajs)
[22:04:46] *** Quits: Guest74 (textual@moz-il1.n6s.204.65.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:04:51] *** Quits: AndChat-17289 (mkpankov@moz-lmv.evt.23.84.IP) (Quit: Bye)
[22:04:55] *** Joins: AndChat-17289 (mkpankov@moz-lmv.evt.23.84.IP)
[22:04:55] *** Quits: AndChat-17289 (mkpankov@moz-lmv.evt.23.84.IP) (Quit: Bye)
[22:04:57] *** Quits: mkpankov (mkpankov@moz-lmv.evt.23.84.IP) (Connection closed)
[22:05:13] <steveklabnik> https://internals.rust-lang.org/t/final-comment-period-for-rfc-1068-scaling-rusts-governance/1977
[22:05:36] <niconii> honestly, instead of giving lifetime parameter examples with 'a, 'b, etc., i'm just gonna use various kinds of mexican food
[22:05:57] *** Quits: tristanseifert (tristanseif@moz-r0t7ns.res.rr.com) (Quit: WeeChat 1.0-dev)
[22:06:15] *** Quits: nwin (textual@moz-03iocj.pools.vodafone-ip.de) (Quit: My Mac Mini has gone to sleep. ZZZzzz…)
[22:06:28] *** Joins: silven_ (quassel@moz-0roor3.priv.bahnhof.se)
[22:06:30] *** Quits: jaen (jaen@moz-ifmik2.copit.pl) (Ping timeout: 121 seconds)
[22:06:58] *** Quits: silven (quassel@moz-0roor3.priv.bahnhof.se) (Connection closed)
[22:07:00] <sillesta> time to design an api!
[22:07:17] *** nsm is now known as nsm|away
[22:07:45] *** Joins: tristanseifert (tristanseif@moz-r0t7ns.res.rr.com)
[22:07:50] <cholcombe> i have a question about the ffi and passing in a opaque handle to a C function that initializes it. The compiler is warning me about: use of possibly uninitialized variable: `*cluster_handle but I'm not sure what to do 
[22:08:00] <mkpankov`> niconii: burritos are known to be good as names for weird PL concepts :)
[22:08:24] <Twinklebear> Hey all, is there some recommended way of bounding by 2 user defined traits? I'm working on a ray tracer and would like to require some type to be both Geometry and Boundable, however this only seems to be supported for built in traits? A short example is: http://is.gd/MLTXHF
[22:08:28] <cholcombe> if the C function is initializing it shouldn't i be allowed to leave it as is?
[22:08:29] <mkpankov`> cholcombe: use mem::uninitialized()
[22:08:32] <VShell> niconii: &'quesadilla str
[22:08:35] <cholcombe> thanks!
[22:08:40] *** Quits: eibwen (eibwen@moz-oora8v.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[22:08:53] *** Quits: areski (areski@moz-ndudgf.user.ono.com) (Ping timeout: 121 seconds)
[22:08:55] <sillesta> steveklabnik: might've been asked before, but is it possible to add a `gamedev` category to users.rust-lang.org?
[22:09:00] *** Joins: ucarion (ulyssecario@moz-7m9cfs.c3v0.fbki.f140.2607.IP)
[22:09:14] <niconii> VShell: strings have never made me hungrier
[22:10:36] *** Quits: ucarion_ (ulyssecario@moz-gds1gv.c3v0.fbki.f140.2607.IP) (Ping timeout: 121 seconds)
[22:10:52] *** Joins: wldcordeiro (wldcordeiro@moz-863roc.hfc.comcastbusiness.net)
[22:11:36] *** Joins: DemonOne (Avi@moz-h20h51.cablep.bezeqint.net)
[22:11:53] <bluss> Twinklebear: right, that's not possible right now. You could create a trait group manually quite easily
[22:12:03] *** Quits: santiago (santiago@moz-ro2mm9.res.rr.com) (Quit: Computer has gone to sleep.)
[22:12:29] <Twinklebear> bluss ah ok I think I saw an example of that, it would be like: trait Combo: TraitA + TraitB {}, right?
[22:12:32] <hoverbear> niconii: Careful with those lifetimes, they run right through you
[22:12:44] *** Joins: Izacht13 (Izacht13@moz-gee645.atsnmeam.ccmaine.net)
[22:13:01] <GaryOak_> are there any attempts at building ruby/python interpreters in Rust?
[22:13:10] <bluss> Twinklebear: yes. http://is.gd/YKFZ8J  but there are drawbacks, since you can't derive a &TraitA from a &TraitAB etc 
[22:13:13] *** Quits: dzyp (hiatt@moz-ofiasr.static.qwest.net) (Ping timeout: 121 seconds)
[22:13:27] <steveklabnik> sillesta: i think that just got posted in the categories section, yeah?
[22:13:30] <steveklabnik> i'm generaly pro
[22:13:43] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:13:57] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[22:14:01] *** Quits: erikj (erikj@moz-dsm7da.skybroadband.com) (Quit: Leaving)
[22:14:45] <Twinklebear> cool bluss, I'm not sure if that limitation will be an issue for my use case. Is there an issue or RFC I can follow to see when user defined traits can be used as bounds
[22:14:50] <sillesta> oh, didn't see that
[22:14:54] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[22:15:34] <sillesta> the lifetime apple http://puu.sh/hvBZV/68722b2bd1.png
[22:15:57] *** Quits: Twisol (textual@moz-6tk.mnr.166.130.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:16:01] *** Joins: jaen (jaen@moz-ifmik2.copit.pl)
[22:18:50] *** Joins: sprang_ (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[22:18:50] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Connection closed)
[22:19:54] *** Joins: slashus2 (slashus2___@moz-evfg9e.res.rr.com)
[22:20:08] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[22:20:09] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:20:35] *** Joins: Yen (Yen@moz-9nh23o.net)
[22:21:01] <Yen> rust newbie question:
[22:21:37] *** Quits: sprang_ (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Connection closed)
[22:22:09] <Yen> say I have a function that generates a vector 'v' of objects. I select, say, object at index 3, and want to return it. If I try to just return v[3], I can't do that, because v owns all its objects
[22:22:34] <Yen> but I know that, after the function returns, I can disregard all elements of v except for v[3]
[22:22:37] *** Joins: ucarion_ (ulyssecario@moz-eiphqi.c3v0.fbki.f140.2607.IP)
[22:22:50] <Yen> is it possible to return v[3] without .clone(), or something equivalent?
[22:23:08] <Yen> also, is doing swap_remove approximately the same as doing .clone(), in terms of memory read/writes?
[22:23:26] <niconii> sillesta: looks like burrito and taco emoji are candidates for unicode 8.0, to be released in mid-2015, so one day...
[22:23:55] *** Quits: timj (timj@moz-qrm.hdf.102.91.IP) (Ping timeout: 121 seconds)
[22:24:02] *** Quits: larhat (Adium@moz-tb1ulb.cable.virginm.net) (Quit: Leaving.)
[22:24:08] *** Joins: OtterCoder (quassel@moz-lij.rme.199.67.IP)
[22:24:28] *** Quits: Racquetball (namestolenw@moz-dnlovt.cpe.twtelecom.net) (Quit: leaving)
[22:24:33] *** Quits: veqz (veqz@moz-nvr8g6.209.getinternet.no) (Ping timeout: 121 seconds)
[22:24:52] <Sgeo_> bluss, why not a &&TraitA from a &TraitAB
[22:24:58] <niconii> Yen: so, i take it returning a reference isn't acceptable?
[22:25:01] *** Quits: ucarion (ulyssecario@moz-7m9cfs.c3v0.fbki.f140.2607.IP) (Ping timeout: 121 seconds)
[22:25:36] <bluss> Sgeo_: hm does that work? It would be a double indirection
[22:26:19] <Yen> niconii: a reference to the object in an array? wouldn't that also be invalid?
[22:26:37] <Yen> or would that cause rust to just keep the whole array around, until the eventual owner of the reference goes out of scope?
[22:26:45] *** Joins: Torun (Torun@moz-34f2ia.dip0.t-ipconnect.de)
[22:26:46] <niconii> Yen: oh, are you destroying the vector then?
[22:27:00] *** Quits: Torun (Torun@moz-34f2ia.dip0.t-ipconnect.de) (Connection closed)
[22:27:04] *** Joins: weslem (Mibbit@moz-ml9.jf1.125.74.IP)
[22:27:21] *** Quits: btobolaski (btobolaski@moz-ltbh80.va.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:27:23] <niconii> Yen: i.e. you're passing the vector by value into the function, and you want to return one item from that vector?
[22:27:40] *** Quits: sillesta (sillesta@moz-501od2.business.telia.com) (Ping timeout: 121 seconds)
[22:27:55] <Yen> niconii: the function is creating the vector, and then going out of scope, but it wants to return one item from that vector
[22:28:14] <Yen> which I would assume destroys the vector
[22:28:18] *** Quits: Murph (bill@moz-b27bat.fios.verizon.net) (Connection closed)
[22:29:19] <niconii> Yen: seems to work fine for me: http://is.gd/Ud1Tx3
[22:29:54] *** Quits: TorunR (Torun@moz-34f2ia.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[22:30:04] <Yen> right, I'd assume it would work for a primitive, but not for an object
[22:30:05] <niconii> Yen: er, but hang on, u32 is Copy, so this might not be accurate, give me a sec
[22:30:07] <Yen> making an example
[22:30:15] <niconii> Yen: yeah, alright
[22:30:41] *** Quits: gsnedders (gsnedders@moz-dm3.ght.2.5.IP) (Ping timeout: 121 seconds)
[22:30:50] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[22:30:56] <Sgeo_> <anon>:17:32: 17:44 error: the trait `TraitA` is not implemented for the type `&TraitAB` [E0277]
[22:30:59] <Sgeo_> :(
[22:31:06] <Sgeo_> http://is.gd/mnFUzO
[22:31:22] *** Quits: weslem (Mibbit@moz-ml9.jf1.125.74.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:31:33] *** Joins: naerbnic (Mibbit@moz-q2p.4ra.239.216.IP)
[22:31:47] *** Joins: errordeveloper (ilya@moz-62k.i0g.218.2.IP)
[22:31:56] *** Joins: Murph (bill@moz-b27bat.fios.verizon.net)
[22:32:27] *** Joins: ptc (textual@moz-93hhba.fios.verizon.net)
[22:32:51] <Yen> http://is.gd/aqiEqE, for example
[22:32:58] *** Quits: kmicu (kmicu@moz-uga.edn.218.91.IP) (Client exited)
[22:33:20] <niconii> Yen: right, i see
[22:33:29] *** Quits: silven_ (quassel@moz-0roor3.priv.bahnhof.se) (Ping timeout: 121 seconds)
[22:33:40] *** Quits: chc4 (chc4@moz-pdo0at.ma.comcast.net) (Ping timeout: 121 seconds)
[22:33:47] *** Joins: kieran (kieran@moz-c5gk5j.ihug.co.nz)
[22:34:45] *** Quits: dfinninger (dfinninger@moz-fe6.5n7.235.207.IP) (Connection closed)
[22:34:49] <niconii> Yen: if you make the vec mutable, you can return vec.remove(3)
[22:35:12] *** Quits: naerbnic (Mibbit@moz-q2p.4ra.239.216.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:35:14] <Dabo> niconii, that does have the disadvantage of moving all other elements around in the vec before dropping it though, right?
[22:35:38] <niconii> Dabo, Yen: correct, so cloning might be the best option
[22:35:53] <Dabo> swap_remove() would work better than remove() I guess, but yeah
[22:36:01] *** Joins: gsnedders (gsnedders@moz-dm3.ght.2.5.IP)
[22:36:07] <Yen> does swap_remove() do about the same amount of memory work as clone()?
[22:36:30] <niconii> Dabo: oh, right, i overlooked swap_remove()
[22:36:34] *** Quits: ZenSword (ZenSword@moz-hlrta3.pools.vodafone-ip.de) (Quit: quit)
[22:36:53] <Dabo> Yen, swap_remove moves the last element in the vec to the position of the element you are removing, and gives you the element you are removing
[22:36:56] <Dabo> clone would probably be cheaper
[22:36:57] *** Joins: naerbnic (naerbnic@moz-q2p.4ra.239.216.IP)
[22:37:00] <Dabo> if it is cloneable
[22:37:03] <Yen> in that I assume clone() looks at the one object, copies it, and swap_remove looks at two objects, and copies them,
[22:37:23] <niconii> Yen: yeah, i think so, but
[22:37:25] <Yen> which is 2 memory hits to one, but still constant-time
[22:37:33] <niconii> Yen: with clone, your object needs to implement the Clone trait, but swap_remove doesn't require that
[22:37:37] <Yen> right
[22:37:44] <Dabo> Yen, clone might do something other than just copy it though, swap_remove doesn't invoke clone it just moves around memory
[22:37:48] *** Joins: qard_ (qard@moz-nekdha.vc.shawcable.net)
[22:37:50] <Dabo> vec.iter_move().skip(x).next().unwrap() would probably work
[22:37:57] *** Quits: kieran (kieran@moz-c5gk5j.ihug.co.nz) (Ping timeout: 121 seconds)
[22:38:03] *** Joins: dalarmmst (dalarmmst@moz-mb21j4.bredband.comhem.se)
[22:38:05] <Dabo> not sure how efficient that is
[22:38:07] *** Quits: qard_ (qard@moz-nekdha.vc.shawcable.net) (Quit: leaving)
[22:38:31] *** Quits: TheLemonMan (lemonboy@moz-8v32eq.50-151.net24.it) (Quit: "It's now safe to turn off your computer.")
[22:38:49] <niconii> llvm is pretty good at optimization, so it might not be as bad as it looks
[22:39:05] *** Quits: errordeveloper (ilya@moz-62k.i0g.218.2.IP) (Ping timeout: 121 seconds)
[22:39:24] <niconii> but i think i'd prefer swap_remove() or clone() personally
[22:39:34] <Dabo> er, into_itter
[22:39:57] <Dabo> swap_remove does require the vec to have at least 1 other thing in it though
[22:40:04] <Dabo> like swap_remove won't work on a vec of 1 item I think
[22:40:11] *** Joins: orangeshark (erik@moz-svu0ie.44tj.56ot.0306.2602.IP)
[22:40:34] <niconii> Dabo: nah, it seems to work
[22:40:39] <Dabo> ah, ok
[22:41:17] <niconii> Dabo: i'm glad it does, though, since otherwise it'd be kinda hairy to use
[22:41:22] <Dabo> yeah
[22:41:38] *** Quits: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th) (Ping timeout: 121 seconds)
[22:42:30] <Yen> yeah, swap_remove() works on vec of len 1
[22:42:46] <Yen> does a Vec being mutable vs. not remove optimizations the compiler might otherwise do?
[22:45:40] *** Quits: zcourts (zcourts@moz-7ms809.cable.virginm.net) (Client exited)
[22:45:59] <niconii> Yen: maybe a little, though i think it'd be smart enough about it that it wouldn't make much of a difference
[22:46:32] <niconii> Yen: in any case the performance differences here are so tiny that it doesn't matter that much
[22:47:23] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[22:47:23] *** ChanServ sets mode: +o erickt
[22:47:52] *** Quits: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net) (Client exited)
[22:48:12] *** Quits: cholcombe (chris@moz-k0ajnr.i01-5.onvol.net) (Ping timeout: 121 seconds)
[22:48:47] *** Joins: Temur (Tarmashirin@moz-bak.2k3.199.117.IP)
[22:49:21] *** Joins: lov2cod1 (Adium@moz-qiruqh.eodv.k60l.0119.2620.IP)
[22:49:31] *** Joins: yichoi (yichoi@moz-t0r.chb.167.121.IP)
[22:50:11] *** Quits: lov2cod1 (Adium@moz-qiruqh.eodv.k60l.0119.2620.IP) (Quit: Leaving.)
[22:50:56] *** Quits: e_svedang (e_svedang@moz-p1r4ve.bredband.comhem.se) (Client exited)
[22:51:37] *** bentley is now known as bentley|away
[22:52:08] *** Quits: mnemnion_ (mnemnion@moz-e8rfii.ca.comcast.net) (Connection closed)
[22:52:29] *** Joins: mnemnion (mnemnion@moz-e8rfii.ca.comcast.net)
[22:52:33] *** Quits: Gabriel_7 (Gabriel@moz-ma9qoj.mtgr.92aj.0e35.2a01.IP) (Connection closed)
[22:52:38] *** Quits: Twinklebear (Twinklebear@moz-n0t.6eh.110.128.IP) (Quit: Leaving)
[22:52:43] *** Quits: lov2cod (Adium@moz-4c4th3.o38v.k60l.0119.2620.IP) (Ping timeout: 121 seconds)
[22:53:42] *** Quits: agjacome (agjacome@moz-ma9sfa.dynamic.jazztel.es) (Ping timeout: 121 seconds)
[22:54:08] *** Quits: elbow_jason (elbow@moz-fev.tk4.30.50.IP) (Ping timeout: 121 seconds)
[22:54:39] *** Quits: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net) (Ping timeout: 121 seconds)
[22:55:21] *** Joins: Hemamorphy (Hemamorphy@moz-k1f27s.csusb.edu)
[22:55:23] *** Quits: willem (willem@moz-facs2s.dynamic.upc.nl) (Quit: leaving)
[22:56:06] *** Quits: naerbnic (naerbnic@moz-q2p.4ra.239.216.IP) (Client exited)
[22:56:12] <Sgeo_> rustbot: let mut a = vec![]; a.swap_remove()
[22:56:18] <Sgeo_> How do I rustbot?
[22:56:23] *** Joins: naerbnic (naerbnic@moz-q2p.4ra.239.216.IP)
[22:56:31] *** Quits: mnemnion (mnemnion@moz-e8rfii.ca.comcast.net) (Ping timeout: 121 seconds)
[22:56:46] *** Quits: James (quassel@moz-9kp9p2.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[22:56:55] *** Joins: tomlikestorock (tomlikestor@moz-rjs7c5.static.sonic.net)
[22:57:08] *** Quits: spider-mario (spidermario@moz-coblcf.fbx.proxad.net) (A TLS packet with unexpected length was received.)
[22:57:10] <mkpankov`> Sgeo_: playbot
[22:57:20] <mkpankov`> playbot: 1
[22:57:21] -playbot- 1
[22:57:28] <Sgeo_> mkpankov`, ty
[22:57:35] <Sgeo_> playbot,  let mut a = vec![]; a.swap_remove()
[22:57:36] -playbot- <anon>:9:32: 9:45 error: this function takes 1 parameter but 0 parameters were supplied [E0061]
[22:57:36] -playbot- <anon>:9          let mut a = vec![]; a.swap_remove()
[22:57:36] -playbot- output truncated; full output at: http://bit.ly/1HSoL7x
[22:57:38] *** Joins: mkpankov (mkpankov@moz-lmv.evt.23.84.IP)
[22:58:23] *** Quits: Matthias247 (Miranda@moz-49li60.hsi14.kabel-badenwuerttemberg.de) (Connection closed)
[22:58:36] <Sgeo_> It panics
[22:58:39] <Sgeo_> :/
[22:59:37] *** Joins: smarks_ (smarks@moz-jcb.eus.76.109.IP)
[23:00:31] <mkpankov`> it doesn't compile
[23:00:39] *** Quits: ucarion_ (ulyssecario@moz-eiphqi.c3v0.fbki.f140.2607.IP) (Ping timeout: 121 seconds)
[23:00:52] <Sgeo_> If I add the 0
[23:01:07] *** Quits: smarks_ (smarks@moz-jcb.eus.76.109.IP) (Quit: )
[23:01:12] <mkpankov`> now it panics http://is.gd/W2bOII
[23:01:14] <mkpankov`> yeah
[23:01:25] <mkpankov`> what are you trying to do?
[23:02:10] *** Quits: smarks (smarks@moz-jcb.eus.76.109.IP) (Ping timeout: 121 seconds)
[23:02:19] *** Quits: loyd (loyd@moz-uft.32f.108.213.IP) (Ping timeout: 121 seconds)
[23:02:33] *** Joins: ucarion_ (ulyssecario@moz-t4m7lq.c3v0.fbki.f140.2607.IP)
[23:03:09] *** Quits: naerbnic (naerbnic@moz-q2p.4ra.239.216.IP) (Client exited)
[23:03:39] *** Quits: panicbit (panicbit@moz-r4ks4s.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[23:04:04] *** Quits: michael1 (michael@moz-9vjtig.mo.charter.com) (Ping timeout: 121 seconds)
[23:04:24] *** Quits: igork (igork@moz-ndgnov.broadband.corbina.ru) (Quit: Leaving)
[23:04:43] *** Joins: DT[laptop] (drew@moz-buhocu.cable.virginm.net)
[23:04:44] *** Joins: naerbnic (naerbnic@moz-q2p.4ra.239.216.IP)
[23:05:00] *** Joins: EsBe (EsBe@moz-tr2dkp.res.rr.com)
[23:05:26] *** Joins: jviereck1 (Adium@moz-p40urn.dclient.hispeed.ch)
[23:05:33] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[23:06:08] *** Joins: Kev` (Kev@moz-a2ajm0.dc.cox.net)
[23:06:13] <naerbnic> Has there been any discussion about getting generic methods in a trait to be object-safe?
[23:06:19] *** Quits: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch) (Ping timeout: 121 seconds)
[23:06:24] <naerbnic> It seems like there should be a way to do it in the low-level
[23:06:32] <hoverbear> naerbnic: We can have it now!
[23:06:48] <naerbnic> hoverbear: Oh, did it change?
[23:07:11] <naerbnic> hoverbear: Last I saw, in the RFC, it was in the list of things that wasn’t allowed
[23:07:26] <scott> you can make them object safe by adding `where Self: Sized` which disallows using them on trait objects, but still work with normal trait usage
[23:07:30] <Kev`> Could someone take a look at: http://is.gd/aMzVQL (I know what it's saying...but I thought AsRef<str> would take care of ?Sized issue?
[23:08:02] <naerbnic> Well, I guess I was thinking it should be technically possible for trait objects too
[23:08:04] <Kev`> I'd like to allow inline vec![] to "add()"
[23:09:02] <naerbnic> Basically, assuming that all traits that are stored on the stack are given a Sized constraint, you should be able to pass the size of a concrete type along when calling the method
[23:09:11] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[23:09:24] <naerbnic> So, for instance, if you had fn foo<T>(value: T) as a method object
[23:10:13] *** Quits: mtsr (mtsr@moz-hphuar.yourbnc.co.uk) (Ping timeout: 121 seconds)
[23:10:14] *** Quits: funnel (hegel@moz-hmd.ddu.4.81.IP) (Ping timeout: 121 seconds)
[23:10:15] <naerbnic> When you called it with obj.foo<u8>(10u8), the sizeof::<u8> would implicitly be passed to the implementation of foo, allowing it to allocate the right amount of space for values of that time
[23:10:19] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[23:10:33] *** Quits: mkpankov` (user@moz-lmv.evt.23.84.IP) (A TLS packet with unexpected length was received.)
[23:10:33] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[23:11:00] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[23:11:01] *** Joins: blaenk (blaenkdenum@moz-7pqc8t.n2pv.fsko.e000.2605.IP)
[23:11:15] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[23:11:32] <scott> but passed to which implementation of foo? it needs to be monomorphized
[23:11:40] <blaenk> so there's no timers of any kind in rust huh even in a separate crate
[23:12:16] <naerbnic> scott: I guess my question is: Can we implement polymorphism for a generic implementation, but still monomorphise when the compiler can figure out all of the type parameters?
[23:12:25] *** Joins: funnel (hegel@moz-hmd.ddu.4.81.IP)
[23:12:38] <talchas> naerbnic: and you'd need to vtable drop and any bounds on T, and you'd need alloca for any stack copies
[23:12:41] <scott> I don't think I understand that question
[23:12:49] <talchas> and probably other issues
[23:12:52] *** Joins: mtsr (mtsr@moz-hphuar.yourbnc.co.uk)
[23:13:11] <naerbnic> talchas: Yes you would. Monomorphism is still preferable for any situations that you can infer all types at compile time
[23:13:14] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[23:13:17] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[23:13:27] <scott> if specialization comes along, it would be even more problematic
[23:13:30] *** Quits: gingermusketeer (gingermuske@moz-v16kmu.compute.amazonaws.com) (Connection closed)
[23:13:36] *** Joins: gingermusketeer (gingermuske@moz-rkb81k.compute.amazonaws.com)
[23:13:58] <naerbnic> scott: That is true; Specialization would need RTTI, which is probably a huge pain
[23:14:09] <naerbnic> Maybe specialized methods can’t be polymorphised?
[23:14:22] *** Quits: Nextra (Nextra@moz-06j95o.osnanet.de) (Connection closed)
[23:14:50] <scott> I don't think generating runtime-polymorphic versions of generic functions is desirable
[23:14:59] <scott> it's too much of a surprise hidden cost
[23:15:05] <apoelstra> can i set `cargo bench` to get more precise results?
[23:15:28] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[23:15:39] <naerbnic> Hmmm. I feel like it might be okay, as long as the cost is made explicit
[23:15:41] <scott> and you can already achieve this by replacing the generic functions with functions taking trait objects, afaict
[23:15:48] <naerbnic> Well, not entirely
[23:15:59] <naerbnic> So for example, say we had:
[23:16:00] *** Quits: james4k (james@moz-ao8aj6.consolidated.net) (Ping timeout: 121 seconds)
[23:16:00] <scott> there is another issue embedded in this discussion
[23:16:05] <scott> which is passing unsized types by value
[23:16:09] *** Joins: errordeveloper (ilya@moz-62k.i0g.218.2.IP)
[23:16:28] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[23:16:35] <naerbnic> poly fn max<T: Sized + Ord>(first: T, second: T)
[23:16:45] <scott> that Sized bound is superfluous
[23:16:51] *** Quits: _queue (queue@moz-k2g.0bf.2.129.IP) (Connection closed)
[23:17:08] <naerbnic> Well, okay, I forgot if sized is implicit at the moment, or not
[23:17:14] <naerbnic> It changed somewhere back there
[23:17:52] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Ping timeout: 121 seconds)
[23:17:54] <naerbnic> Anyway, in that case, if you tried to implement this as fn max(first: &Ord, second: &Ord), you have no idea if you can compare first and second
[23:18:19] <naerbnic> You need to assert that they’re the same concrete type, thus why the generic parameter is required
[23:18:31] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[23:18:39] *** Quits: shellac (textual@moz-9b49cr.cable.virginm.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:18:51] <naerbnic> It also means we only need to pass one “vtable” for type T, giving its Ord implementation
[23:19:14] <scott> I see your point
[23:19:28] *** Joins: chc4 (chc4@moz-pdo0at.ma.comcast.net)
[23:19:38] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[23:19:46] *** Joins: shellac (textual@moz-9b49cr.cable.virginm.net)
[23:20:16] <naerbnic> So, I totally agree that hidden costs are against the theme of Rust as a whole
[23:20:38] <naerbnic> But given that we can potentially declare some functions as explicitly being polymorphic, that may be enough
[23:20:45] <naerbnic> Might even have a different calling convention
[23:20:49] <scott> I'm not certain it's enough
[23:21:04] <mkomitee> Does anyone have a list of good rust blogs (besides the official one) and/or a list of twitter handles of prominent / active members of the community?
[23:21:05] <scott> what are you allowed to call inside a poly fn? just other poly fns, not regular generic functions?
[23:21:09] *** Joins: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net)
[23:21:15] <scott> or would you generate a poly fn for non-poly generic functions?
[23:21:18] *** Joins: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP)
[23:21:34] *** Quits: ucarion_ (ulyssecario@moz-t4m7lq.c3v0.fbki.f140.2607.IP) (Ping timeout: 121 seconds)
[23:21:55] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[23:22:16] <naerbnic> They can call any operations on any traits declared in the constraints, or other polymorphic functions they’re compatible with
[23:23:17] <naerbnic> And again, even polymorphic functions can be monomorphic if their context determines their type
[23:23:20] *** Quits: ptc (textual@moz-93hhba.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:23:22] *** Joins: ptc (textual@moz-93hhba.fios.verizon.net)
[23:23:26] *** Joins: lov2cod (Adium@moz-qiruqh.eodv.k60l.0119.2620.IP)
[23:23:31] *** Quits: ptc (textual@moz-93hhba.fios.verizon.net) (Connection closed)
[23:23:33] <naerbnic> e.g. max(1u32, 2u32) would be monomorphic
[23:23:41] <scott> when would it not be monomorphic?
[23:23:54] <scott> I'm having trouble thinking up a valid example
[23:23:56] *** Quits: shellac (textual@moz-9b49cr.cable.virginm.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:24:06] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[23:24:07] *** Parts: dmu (dmu@moz-eam.eti.221.66.IP) ()
[23:24:11] *** Joins: njn (chatzilla@moz-7npk8s.iinet.net.au)
[23:24:31] <naerbnic> When either passed as a value to another function, or when used as an object method in a trait
[23:24:41] *** Quits: futile (felix@moz-cmcd12.unity-media.net) (Quit: WeeChat 1.0-dev)
[23:24:48] <naerbnic> At least off the top of my head
[23:25:03] <naerbnic> There may be others
[23:25:11] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[23:25:42] *** Joins: blaenk_ (blaenkdenum@moz-12e081.res.rr.com)
[23:25:56] *** Joins: dzyp (dzyp@moz-97od8c.client.mchsi.com)
[23:26:31] <naerbnic> An issue there is it wouldn’t fit in very well in the hierarchy of Fn/FnOnce/FnMut
[23:26:39] *** Quits: KallDrexx (KallDrexx@moz-4fqk30.dybhfl.sbcglobal.net) (Ping timeout: 121 seconds)
[23:26:46] <scott> I wonder how bad the performance degradation would be when everything is being allocated/deallocated on the stack according to runtime sizes
[23:26:48] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[23:26:50] *** Joins: gopar (gopar@moz-5039uj.ca.comcast.net)
[23:26:54] <naerbnic> I honestly don’t know
[23:26:56] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[23:26:56] *** ChanServ sets mode: +ao pcwalton pcwalton
[23:27:30] *** Quits: blaenk (blaenkdenum@moz-7pqc8t.n2pv.fsko.e000.2605.IP) (Ping timeout: 121 seconds)
[23:27:41] <scott> back to an earlier point, though. consider poly fn print<T: Display>(x: T) { println!("{}", x); }
[23:27:43] <dzyp> how can i check for the number of cpus?
[23:27:47] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[23:28:05] <blaenk_> num_cpus crate dzyp
[23:28:08] <naerbnic> scott: Okay
[23:28:10] <blaenk_> lol
[23:28:30] *** Quits: Izacht13 (Izacht13@moz-gee645.atsnmeam.ccmaine.net) (Quit: Leaving)
[23:28:38] <scott> is this outright disallowed, or does it generate runtime-polymorphic versions of the entire stack of Display functions necessary?
[23:28:39] <hoverbear> mkomitee: I write some things about rust if you want. :)
[23:29:04] <mkomitee> hoverbear: got a url / twitter handle?
[23:29:18] <naerbnic> Well, it shouldn’t have to have anything essentially special for Display, at least in theory.
[23:29:25] *** blaenk_ is now known as blaenk
[23:29:26] <hoverbear> mkomitee: https://hoverbear.org/tag/rust/
[23:29:41] <naerbnic> Assuming the calling convention is stable and known, then it can create the correct calls along the way
[23:29:54] <mkomitee> hoverbear: your cert appears to be invalid.
[23:29:54] *** Quits: alex-abreu (alex@moz-j54ho8.biz.rr.com) (Ping timeout: 121 seconds)
[23:29:55] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[23:29:55] *** Joins: logan_e (logan_e@moz-ltn.qg3.218.73.IP)
[23:30:04] <hoverbear> mkomitee: Self-signed. You can use http if you want.
[23:30:05] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[23:30:12] *** Joins: michael1 (michael@moz-9vjtig.mo.charter.com)
[23:30:16] *** AutomatedTester is now known as AutomatedTester|AFK
[23:30:30] *** Quits: jaen (jaen@moz-ifmik2.copit.pl) (Quit: WeeChat 1.1.1)
[23:30:34] <naerbnic> e.g. if a Self argument is passed, in some cases it is passed by value, and in others it’s passed by pointer (in the low level)
[23:30:47] <naerbnic> That decision would need to be made at runtime, but can be done by the calling function
[23:30:57] <naerbnic> And the called function would not need to change
[23:31:00] *** Quits: _petr``` (petr@moz-2pi.7q8.248.178.IP) (Ping timeout: 121 seconds)
[23:31:24] <mkomitee> You now have 2 readers on feedly :)
[23:31:31] <hoverbear> mkomitee: Woot for me!
[23:31:35] <naerbnic> &Self and &mut Self params are simple, as (to my knowledge) they’re always implemented as pointers (and possibly fat pointers)
[23:31:38] *** Quits: ogham (rally@moz-91e3hp.cable.virginm.net) (Ping timeout: 121 seconds)
[23:31:44] <blaenk> is the use of the select! macro discouraged?
[23:32:26] *** Joins: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net)
[23:32:28] <naerbnic> One thing I don’t know is the extent of the scope of Self in trait methods
[23:32:31] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.5.1)
[23:32:43] <scott> naerbnic: poly fn print1<T: Display>(x: T) { print2(x); }  fn print2<T: Display>(x: T) { println!("{}", x); }  // how is the print2 call resolved inside print1?
[23:33:29] <blaenk> man, can't say I'm a fan of the new rustdoc color for traits
[23:33:32] *** Quits: rbranson (rbranson@moz-i7m.9o0.201.199.IP) (Quit: Computer has gone to sleep.)
[23:33:32] <naerbnic> scott: In this case, it can’t, it seems
[23:33:45] <scott> blaenk: embrace the purple
[23:33:52] <blaenk> looks very out of place there
[23:33:53] *** Joins: GabbyT (Mibbit@moz-2n7.87k.64.129.IP)
[23:33:58] *** Joins: rbranson (rbranson@moz-i7m.9o0.201.199.IP)
[23:34:12] <scott> naerbnic: that seems like an issue
[23:34:16] <naerbnic> scott: The former works because the macro makes use of methods on Display, and so (to my understanding) has enough info to call them all
[23:34:32] <naerbnic> scott: Yeah, that is true
[23:34:56] <naerbnic> scott: Can you think of a way in Rust to implement the equivalent of my max() function without using this technique?
[23:34:59] <GabbyT> Hello there! I'm having trouble using [u8]. I'm attempting to define it thusly in a struct: file_data: [u8], Any ideas?
[23:35:02] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[23:35:16] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[23:35:21] <naerbnic> GabbyT: [u8] is an unsized type
[23:35:25] *** Joins: james (james@moz-5ma8c0.bchsia.telus.net)
[23:35:36] <GabbyT> I thought it was always a byte - no?
[23:35:43] <naerbnic> GabbyT: Normally, you work with &[u8] as a borrowed slice of an array or vector (or other array-like)
[23:35:47] <mbrubeck> GabbyT: You either need a fixed-sized array like [u8; 1024] or a growable vector like Vec<u8>
[23:36:04] *** Quits: housl (housl@moz-qnjt4k.ut.comcast.net) (Quit: WeeChat 1.1.1)
[23:36:12] <GabbyT> Oh! Alright then. Thank you!
[23:36:13] <mbrubeck> or a &[u8] slice which points to memory owned by some other u8 array
[23:36:19] <naerbnic> GabbyT: Well, actual array types in Rust have a length attached to it (e.g. [u8; 1], or the like)
[23:36:47] *** Joins: alex-abreu (alex@moz-j54ho8.biz.rr.com)
[23:37:08] <scott> naerbnic: your max example doesn't really have any reason to be a trait method
[23:37:40] <scott> fn max<T: Ord>(x: &T, y: &T) would be probably the Rustiest fn signature for max
[23:37:52] <scott> er, and -> &T return type
[23:37:56] <scott> one way to do it, at least
[23:38:05] <naerbnic> scott: Agreed. It was just a random example though
[23:38:11] * scott looks for real max implementations
[23:38:12] *** Quits: michael1 (michael@moz-9vjtig.mo.charter.com) (Ping timeout: 121 seconds)
[23:38:29] <naerbnic> scott: I was having troulbe coming up with a PackratParser trait
[23:38:42] *** james is now known as cyborgsphinx
[23:38:54] *** Joins: DerisiveLogic (smuxi@moz-g93io6.res.rr.com)
[23:38:55] <naerbnic> scott: As I was trying to abstract across streams that generated sequences of a particular type
[23:38:58] <scott> ah, std::cmp::max does consume: pub fn max<T>(v1: T, v2: T) -> T where T: Ord
[23:39:19] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[23:39:28] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[23:39:39] <scott> even though there isn't really any reason to give up ownership to it. taking by reference is more complicated, though
[23:39:42] <naerbnic> scott: But were also moveable/copyable
[23:39:58] *** Quits: Siosm (quassel@moz-hkaoqt.fr) (A TLS packet with unexpected length was received.)
[23:40:07] *** Joins: Siosm (quassel@moz-hkaoqt.fr)
[23:40:08] <naerbnic> scott: Well, I guess it works where T = &X as well, so why not?
[23:40:08] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[23:40:11] <scott> fn max<'a, T: Ord>(x: &'a T, y: &'a T) -> &'a T is the full signature and the result is a borrow of both inputs
[23:40:19] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[23:40:27] <scott> naerbnic: oh, if that's the case, then it's fine
[23:40:42] <scott> I didn't think of &T: Ord when T: Ord
[23:41:01] <naerbnic> I think that’s an implementation, but I’m not sure
[23:41:12] <naerbnic> It seems reasonable
[23:41:16] <scott> impl<'a, A> Ord for &'a A where A: Ord + ?Sized
[23:41:21] <scott> in all its detailed glory
[23:41:44] *** Quits: espadrine (tyl@moz-l019mn.fbx.proxad.net) (Ping timeout: 121 seconds)
[23:42:56] *** Quits: DerisiveLogic (smuxi@moz-g93io6.res.rr.com) (Ping timeout: 121 seconds)
[23:43:08] <naerbnic> scott: So, the short issue is that I was trying to make it so that my streams were clonable, and thus could be implemented something like this:
[23:44:03] <naerbnic> fn try_something(&mut self) { let clone = self.clone(); /* do something on clone */ if /* something worked */ {*self = clone} }
[23:44:33] <naerbnic> This may be a different problem, in retrospect, although has some related issues
[23:44:54] <rillian> what do I pass the rustc to have it output obj files for external linking, like gcc -c?
[23:44:58] <bstrie> TeXitoi: let me know if you need any help with getting those benchmarks ready for 1.0, I'm very busy but I could try to make time for them
[23:45:01] <scott> naerbnic: and you wanted to use that on a trait object?
[23:45:10] <naerbnic> Well, in a trait implementation
[23:45:18] <naerbnic> My thinking: The implementation should be aware of the size of self
[23:45:21] <naerbnic> So the move should be valid
[23:45:43] *** Joins: DerisiveLogic (smuxi@moz-g93io6.res.rr.com)
[23:45:46] <XMPPwocky> i guess you could have a trait method returning Box<Self>, then rust could allow using that (and ONLY that) in trait object methods taking Self
[23:45:46] <scott> oh, actually... what is the problem with that fn?
[23:46:02] *** Joins: OmniMancer (omnimancer@moz-voc.dat.149.118.IP)
[23:46:02] <naerbnic> Well, I used it as the default implementation of the trait
[23:46:10] <naerbnic> But it said the move wasn’t valid unless Self was sized
[23:46:14] <scott> ahh
[23:46:24] <naerbnic> Which it can’t be for object-safe methods
[23:46:37] <naerbnic> Still, shouldn’t this be possible, even in a monomorphic world?
[23:46:43] <scott> you can make a trait require Sized iirc
[23:46:59] <naerbnic> Doesn’t that make it non-object-safe?
[23:47:16] <naerbnic> So I can’t then pass &mut Stream<T> around?
[23:47:51] *** Joins: kazimuth (james@moz-obp.1p3.189.18.IP)
[23:48:13] *** Quits: ytain_ (ytain@moz-trdbtq.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[23:48:54] <scott> yeah it makes it not object safe
[23:49:09] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[23:49:49] * rillian tries rustc--crate-type staticlib --emit obj
[23:50:04] *** Joins: blaenk_ (blaenkdenum@moz-12e081.res.rr.com)
[23:50:15] <naerbnic> What is the argument that if there’s a sized constraint on a trait that it should not be object-safe?
[23:51:06] <scott> naerbnic: afaik trait objects work because the type Foo implements the trait Foo
[23:51:26] <scott> but Foo is an unsized type, so if you have trait Foo: Sized { ... } then that can't be the case
[23:51:32] *** Quits: blaenk (blaenkdenum@moz-12e081.res.rr.com) (Ping timeout: 121 seconds)
[23:51:36] <naerbnic> Hmmmm
[23:51:59] <naerbnic> scott: But effectively, we want to have Foo not to have any constraints, while we want all implementations of Foo to only be declared on sized types
[23:52:08] <scott> (trait object types having the same name as their traits makes it so hard to speak about them carefully :P)
[23:52:35] <naerbnic> scott: Apologies if I’m mixing up my terminologies/being unclear.
[23:53:01] <scott> nah, I was just making a note in general about this stuff
[23:53:07] <scott> trait Foo: Bar means roughly trait Foo where Self: Bar
[23:53:57] <naerbnic> scott: The issue may be with default implementations of trait methods
[23:54:50] <naerbnic> scott: I suppose I can also use boxed objects, but the problem is knowing that they’re of the same concrete type locally
[23:55:06] <naerbnic> Basically, I want a trait that allows me to save/restore some state dynamically in an object-safe way
[23:55:23] *** Quits: GaryOak_ (GaryOak_@moz-etoj16.hfc.comcastbusiness.net) (Connection closed)
[23:55:40] <scott> default implementations have to contain code that would work for all possible implementors
[23:55:46] <scott> so they are fairly restricted in that way
[23:56:02] <naerbnic> Right
[23:56:24] <scott> for another example, your trait could be implemented on [T] and then you're trying to clone a &mut [T] and do a &mut [T] = &mut [T] assignment
[23:56:35] <naerbnic> Right
[23:56:57] <naerbnic> Which is why it would be good to be able to constrain implementations to types that have a size
[23:57:16] <naerbnic> It’s an existential constraint; not a universal one
[23:57:25] <scott> yeah, it could be provided for Sized and required for !Sized
[23:57:27] *** Quits: Temur (Tarmashirin@moz-bak.2k3.199.117.IP) (Ping timeout: 121 seconds)
[23:57:38] <scott> that would make this work, but be a somewhat complicated feature
[23:57:51] *** Joins: InfiniteJacuzzi (darren@moz-804egb.dyn.optonline.net)
[23:57:54] <naerbnic> Also, the problem would be with a trait method that’s effectively:
[23:58:14] <naerbnic> fn save(&self) -> Box<Self>
[23:58:34] <naerbnic> and fn restore(&mut self, saved_copy: &Self)
[23:58:35] *** Quits: Savago (Savago@moz-8hd.3b6.246.162.IP) (Client exited)
[23:59:04] <naerbnic> I don’t think you can use that in a typed context, even though that wouldn’t implicitly require a size for Self
