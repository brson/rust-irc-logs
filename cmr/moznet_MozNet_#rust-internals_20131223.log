[00:16:35] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[00:16:35] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/OsAkyA
[00:16:35] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[00:16:58] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[00:16:58] *** ChanServ sets mode: +qo brson brson
[00:21:35] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[00:21:35] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/Ulhgjw
[00:21:35] <ghrust> 13rust/06auto 14ef1eb18 15Alan Andrade: Convert sub tutorials into Guides #10838
[00:21:35] <ghrust> 13rust/06auto 140673560 15Alan Andrade: Ensure configure creates doc/guides directory
[00:21:35] <ghrust> 13rust/06auto 1470bd281 15bors: auto merge of #11106 : alanandrade/rust/convert_tutorials_to_guides, r=cmr...
[00:21:37] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[00:36:25] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:40:19] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[00:40:19] *** ChanServ sets mode: +qo brson brson
[00:41:39] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[00:45:45] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[00:48:22] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[00:56:33] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[00:56:33] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/t6N0jg
[00:56:33] <ghrust> 13rust/06auto 147a1e486 15Steven Fackler: Don't poison ARCs that are used while unwinding...
[00:56:33] <ghrust> 13rust/06auto 142490b59 15Steven Fackler: Remove unneccessary mut from arc
[00:56:35] <ghrust> 13rust/06auto 141b4bbc8 15bors: auto merge of #11109 : sfackler/rust/arc, r=alexcrichton...
[00:56:36] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[01:25:41] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Connection reset by peer)
[01:38:33] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:42:49] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[01:42:50] *** ChanServ sets mode: +qo brson brson
[01:45:54] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[01:48:41] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:57:30] *** Quits: ktt3ja (ktt3ja@moz-54586A12.washdc.fios.verizon.net) (Quit: Leaving)
[02:16:32] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[02:16:32] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/t6N0jg
[02:16:32] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[02:21:36] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[02:21:36] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/nBRBTw
[02:21:36] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[02:37:26] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Quit: leaving)
[02:39:09] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[02:40:56] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[02:44:22] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[03:00:02] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[03:03:30] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Ping timeout)
[03:04:55] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[03:14:31] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[03:18:54] *** Joins: lpy (lpy@12172131.F09091A8.1348A864.IP)
[03:18:57] *** Quits: lpy (lpy@12172131.F09091A8.1348A864.IP) (Client exited)
[03:19:22] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[03:31:44] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[03:31:44] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/ShBd7Q
[03:31:44] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[03:32:53] *** kimundi is now known as zz_kimundi
[03:36:32] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[03:36:32] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/0MEicg
[03:36:32] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[03:36:33] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[03:36:33] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/W4Wc9Q
[03:36:33] <ghrust> 13rust/06auto 146df40c0 15Alex Crichton: Allow more "error" values in try_recv()...
[03:36:33] <ghrust> 13rust/06auto 147e1459a 15bors: auto merge of #11112 : alexcrichton/rust/issue-11087, r=brson...
[03:36:33] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[03:49:54] *** Quits: zz_kimundi (kimundi@moz-570D84D2.dip0.t-ipconnect.de) (Ping timeout)
[03:53:11] *** Joins: zz_kimundi (kimundi@moz-8417F372.dip0.t-ipconnect.de)
[03:53:13] *** zz_kimundi is now known as kimundi
[04:16:31] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[04:16:31] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 147e1459a to 145772401: 02http://git.io/N3iJvQ
[04:16:31] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[04:16:32] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[04:16:32] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/fB2u0Q
[04:16:32] <ghrust> 13rust/06auto 14b11cee5 15Alex Crichton: rustdoc: Add the ability to test code in comments...
[04:16:32] <ghrust> 13rust/06auto 14532b8e1 15Alex Crichton: std: Fix all code examples
[04:16:33] <ghrust> 13rust/06auto 14f6b6154 15Alex Crichton: extra: Fix all code examples
[04:16:35] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[04:26:43] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: Leaving)
[04:49:34] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[04:51:00] <sfackler> does this just need a retry? https://github.com/mozilla/rust/pull/11086
[04:52:18] <klutzy> sfackler: seems like it's due to "line longer than 100 chars"
[04:53:16] <sfackler> oh, I just can't read c.c
[05:14:48] *** Joins: dbaupp (Thunderbir@moz-39159202.pa.nsw.optusnet.com.au)
[05:16:32] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[05:16:32] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14dd7ec02 to 145772401: 02http://git.io/N3iJvQ
[05:16:32] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[05:16:33] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[05:16:34] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/sL5AsQ
[05:16:34] <ghrust> 13rust/06auto 147a0e66c 15Vadim Chugunov: Stop using C++ exceptions for stack unwinding.
[05:16:34] <ghrust> 13rust/06auto 14106d01a 15Vadim Chugunov: Addressed review comments.
[05:16:34] <ghrust> 13rust/06auto 14fd4316e 15bors: auto merge of #11121 : vadimcn/rust/no-c++2, r=alexcrichton...
[05:16:36] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[05:16:42] *** Quits: dbaupp (Thunderbir@moz-39159202.pa.nsw.optusnet.com.au) (Ping timeout)
[05:17:07] *** Joins: dbaupp (Thunderbir@moz-39159202.pa.nsw.optusnet.com.au)
[05:43:58] *** Quits: dbaupp (Thunderbir@moz-39159202.pa.nsw.optusnet.com.au) (Ping timeout)
[05:45:51] *** Quits: kmc (keegan@moz-2C6EE959.compute-1.amazonaws.com) (Ping timeout)
[05:46:24] *** Quits: mletterle (michael@moz-CD281E3A.compute-1.amazonaws.com) (Ping timeout)
[05:47:38] *** Joins: dbaupp (Thunderbir@moz-39159202.pa.nsw.optusnet.com.au)
[05:49:05] *** Joins: kmc (keegan@moz-2C6EE959.compute-1.amazonaws.com)
[06:00:53] *** Quits: dbaupp (Thunderbir@moz-39159202.pa.nsw.optusnet.com.au) (Ping timeout)
[06:12:43] *** Joins: dbaupp (Thunderbir@moz-F5D54E8A.pa.nsw.optusnet.com.au)
[06:15:31] *** Joins: Chimmy (ctimothy@moz-1DB1FE6E.hsd1.wa.comcast.net)
[06:28:01] *** Quits: dbaupp (Thunderbir@moz-F5D54E8A.pa.nsw.optusnet.com.au) (Ping timeout)
[06:31:54] *** Joins: dbaupp (Thunderbir@moz-F5D54E8A.pa.nsw.optusnet.com.au)
[06:36:32] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[06:36:32] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14fd4316e to 145772401: 02http://git.io/N3iJvQ
[06:36:32] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[06:47:52] *** Quits: dbaupp (Thunderbir@moz-F5D54E8A.pa.nsw.optusnet.com.au) (Ping timeout)
[06:49:46] *** Joins: dbaupp (Thunderbir@moz-F5D54E8A.pa.nsw.optusnet.com.au)
[06:51:55] *** Quits: carter (carter@moz-3589B90B.c.ircrelay.com) (Ping timeout)
[06:52:59] *** Joins: carter (carter@moz-3589B90B.c.ircrelay.com)
[06:56:55] *** Joins: blank_na1e (blank_name@78B04CD2.66204B68.6D228269.IP)
[06:57:28] *** Quits: blank_name (blank_name@3D456DE8.9E887BEB.53C6B850.IP) (Ping timeout)
[07:25:18] *** Quits: dbaupp (Thunderbir@moz-F5D54E8A.pa.nsw.optusnet.com.au) (Ping timeout)
[07:39:54] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[07:44:54] <klutzy> today's win64 adventure: I re-confirmed that 64-bit rustc segfaults if built with optimization flags
[07:45:32] <klutzy> gdb showed that something gone wrong after task_rng.next_u64()
[07:45:46] <klutzy> so I added some debug! in std/rand/
[07:45:54] <klutzy> then it works well without segfault :(
[07:46:37] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[07:46:37] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/ma0RJw
[07:46:37] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[07:47:01] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[07:51:32] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[07:51:32] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/N4OzTg
[07:51:32] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[07:51:36] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[07:51:36] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/Gn511w
[07:51:36] <ghrust> 13rust/06auto 14b11cee5 15Alex Crichton: rustdoc: Add the ability to test code in comments...
[07:51:36] <ghrust> 13rust/06auto 14532b8e1 15Alex Crichton: std: Fix all code examples
[07:51:36] <ghrust> 13rust/06auto 14f6b6154 15Alex Crichton: extra: Fix all code examples
[07:51:38] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[07:58:01] *** Joins: mletterle (michael@moz-CD281E3A.compute-1.amazonaws.com)
[08:22:25] *** flaper87|afk is now known as flaper87
[08:39:18] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[08:40:28] *** Quits: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net) (Ping timeout)
[08:40:31] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[08:46:31] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[08:46:31] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 145fecd6e to 14f71c0dc: 02http://git.io/N3iJvQ
[08:46:31] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[08:46:32] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[08:46:32] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/aMhoEw
[08:46:32] <ghrust> 13rust/06auto 147a0e66c 15Vadim Chugunov: Stop using C++ exceptions for stack unwinding.
[08:46:32] <ghrust> 13rust/06auto 14106d01a 15Vadim Chugunov: Addressed review comments.
[08:46:33] <ghrust> 13rust/06auto 141bbd0d9 15Vadim Chugunov: Compile .ll with -relocation-model=pic option
[08:46:35] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[09:14:47] *** Joins: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net)
[10:02:50] *** Quits: acrichto (acrichto@moz-B63D64BD.res.cmu.edu) (Ping timeout)
[10:08:26] *** Joins: acrichto (acrichto@moz-B63D64BD.res.cmu.edu)
[10:08:26] *** ChanServ sets mode: +o acrichto
[10:20:36] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Connection reset by peer)
[10:20:41] *** Joins: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[10:29:55] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Quit: Leaving...)
[11:11:54] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[11:14:35] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[11:29:06] *** Joins: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net)
[11:29:18] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Connection reset by peer)
[11:29:18] *** Joins: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[11:40:21] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[11:42:02] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[11:58:01] <dbaupp> klutzy: ping
[11:58:05] <klutzy> dbaupp: pong
[11:58:18] <dbaupp> klutzy: I saw you having problems with std::rand on w64 before
[11:58:48] <dbaupp> klutzy: it currently calls into src/rt on windows with a few functions in rust_builtins.c (iirc)
[11:59:11] <dbaupp> klutzy: so it could easily be that I wrote those functions incorrectly for 64-bit platforms
[11:59:17] <klutzy> dbaupp: I just saw segfault after rand, but I'm not sure what's real problem
[11:59:42] <klutzy> dbaupp: hmm, but if it's broken, it's a surprise that it works on no-opt binary :D
[12:00:08] <dbaupp> klutzy: oh, ok :)
[12:00:29] <dbaupp> yeah, we've had a few weird things that work with (or without) opts, but not in the other configuration
[12:00:56] <klutzy> dbaupp: interesting! could you give me some examples?
[12:01:16] <eddyb> nmatsakis: I'm sorry I took this long of a leave from almost all thing rusty (yay RL crashing down on me >_>), I should've replied to you back then on my RFC. now I'm not sure what to do, I didn't remember you adding that post saying you understand my original exposure
[12:02:21] <dbaupp> klutzy: `fn main() { main() }` will crash without opts, but will run fine with -O
[12:02:27] <dbaupp> klutzy: (at least, it used to)
[12:02:40] <dbaupp> klutzy: although I don't remember any that were platform specific
[12:02:57] <dbaupp> r? https://github.com/mozilla/rust/pull/11127
[12:03:54] <eddyb> dbaupp: it's really simple (if you don't know exactly what causes it)
[12:03:58] <eddyb> though you probably do
[12:04:09] <dbaupp> eddyb: yes
[12:04:24] <dbaupp> eddyb: LLVM decides that no-op infinite recursion is ok to kill
[12:04:51] <eddyb> it's not just that
[12:05:00] <eddyb> it optimizes to loop {}
[12:05:27] <eddyb> basic tail recursion -> loop
[12:05:59] <eddyb> most of the time it's cheaper than the jump to the start of the function and can be vectorized, etc.
[12:06:10] <dbaupp> well, fn main() { main() } terminates, but fn main() { loop {} } doesn't (both with -O)
[12:06:34] <dbaupp> so LLVM isn't taking it to the equivalent of loop {}
[12:06:40] <eddyb> ok, that's weird. I wasn't expecting it to do that. though I've seen something weirder
[12:10:33] <eddyb> dbaupp: this http://blog.regehr.org/archives/140
[12:17:11] <dbaupp> eddyb: haha, awesome
[12:25:28] <eddyb> nmatsakis: I tweaked the examples, ping me when you're around. this needs proper talk, not just my incoherent confused ramblings
[12:58:28] <SimonSapin> If I change libstd stuff that is used in librustc or libsyntax, I can update the latter without worrying about bootstraping, right?
[13:00:12] <dbaupp> no
[13:01:04] <dbaupp> at the very least, *any* change to a crate will cause NodeIds to change, which then affects all downstream users (iirc)
[13:01:25] <dbaupp> so even adding something completely new to libstd will require a bootstrap
[13:01:33] <eddyb> erm, no
[13:01:44] <eddyb> dbaupp: libstd is built before syntax/rustc
[13:01:52] <dbaupp> eddyb: so?
[13:01:59] <eddyb> and the snapshot doesn't require it
[13:02:03] <dbaupp> what?
[13:02:12] <eddyb> the snapshot is truly monolithic now
[13:02:20] <dbaupp> the NodeIds within libstd change because there is now a new thing that needs a NodeId
[13:02:30] <eddyb> yes, but everything is built after libstd
[13:02:35] <dbaupp> and depends on it
[13:02:44] <dbaupp> so changing libstd requires rebuilding everything
[13:02:50] <eddyb> wait, I'm confused
[13:03:00] <eddyb> oh, "latter"
[13:03:41] <eddyb> SimonSapin: you mean bootstrapping as in requiring a new snapshot and #[cfg(stage0)] everywhere until then?
[13:04:07] <SimonSapin> eddyb: maybe ?
[13:04:20] <dbaupp> oh...
[13:04:32] <dbaupp> s/no/yes almost always/ in my first answer
[13:05:11] <eddyb> SimonSapin: problems usually appear when you add something like a new lang item or intrinsic in librustc and then you use it in libstd
[13:05:48] <eddyb> because it's not available for the first (stage0) libstd build (used by the stage1 rustc)
[13:06:00] <SimonSapin> ok, thanks
[13:06:15] <SimonSapin> I just want to rename some methods
[13:06:59] <SimonSapin> (well, send a PR to propose renaming)
[13:11:07] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[13:12:31] <eddyb> dbaupp: I think I'll try to merge "assigning node ids" and "ast indexing" now
[13:13:04] <eddyb> but I'm afraid I'd need to copy a lot of code from syntax::fold
[13:27:49] *** kimundi is now known as zz_kimundi
[13:36:44] <SimonSapin> is there a variant of "make check" that doesnâ€™t run benchmarks?
[13:37:49] *** zz_kimundi is now known as kimundi
[13:40:45] <benh> SimonSapin: make check NO_BENCH=1 i believe
[13:41:56] * kimundi needs to remember that one
[13:54:49] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[13:58:16] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[14:33:28] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Quit: Leaving...)
[15:02:05] <eddyb> dbaupp: lol, I forgot about this: map_pat in ast_map walks the contents of the patterns twice
[15:15:24] <eddyb> map_expr is easy to do with the visitor
[15:15:33] <eddyb> err, I mean, folder instead of visitor
[15:38:37] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:44:51] <eddyb> dbaupp: great. the two things I want to unify are split between phase 2 and phase 3 of rustc
[15:45:01] <eddyb> if I move it into phase 3, some things won't have node IDs
[15:45:16] <eddyb> if I move it into phase 2, I have to return the ast_map somehow
[15:46:35] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[15:47:30] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[16:08:05] *** Joins: gwty (gwtypc@785CBECF.F88EC6D1.27560D6E.IP)
[16:53:33] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[16:57:14] *** Joins: doomlord__ (servitor@moz-D40D68D6.range86-184.btcentralplus.com)
[16:57:25] *** Quits: doomlord__ (servitor@moz-D40D68D6.range86-184.btcentralplus.com) (Client exited)
[17:00:36] *** Joins: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com)
[17:04:38] <erickt1> acrichto: got time for a semi-quick review? https://github.com/mozilla/rust/pull/11098
[17:16:38] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[17:16:38] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14d824078 to 14f71c0dc: 02http://git.io/N3iJvQ
[17:16:38] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[17:16:40] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[17:16:40] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/hAdu6Q
[17:16:40] <ghrust> 13rust/06auto 146c9c045 15Alex Crichton: rustdoc: Add the ability to test code in comments...
[17:16:40] <ghrust> 13rust/06auto 149f1739a 15Alex Crichton: std: Fix all code examples
[17:16:41] <ghrust> 13rust/06auto 14d882b1d 15Alex Crichton: extra: Fix all code examples
[17:16:43] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[17:21:40] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[17:26:10] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[17:44:06] <SimonSapin> with c a char, is `c as u32 - ('\x7F' as u32 & c as u32) == 0` significantly faster than `c as u32 < 0x80` ?
[17:44:10] <SimonSapin> https://github.com/mozilla/rust/blob/f71c0dc2cd876f50252cdb907a6f05493c56d3cc/src/libstd/ascii.rs#L219
[18:14:14] *** Quits: carter (carter@moz-3589B90B.c.ircrelay.com) (Ping timeout)
[18:18:52] *** Joins: carter (carter@moz-3589B90B.c.ircrelay.com)
[18:26:33] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[18:26:33] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/hAdu6Q
[18:26:33] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[18:27:20] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[18:31:51] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[18:31:51] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/yTUnZQ
[18:31:51] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[18:31:54] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[18:31:54] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/H4PtUg
[18:31:54] <ghrust> 13rust/06auto 14d69191e 15Huon Wilson: std::vec: correct .sort()'s doc-string and add some...
[18:31:54] <ghrust> 13rust/06auto 14dbfe8fb 15bors: auto merge of #11127 : huonw/rust/vec-docs, r=alexcrichton
[18:31:54] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[18:42:32] *** Quits: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com) (Quit: Leaving.)
[18:43:56] *** Quits: Chimmy (ctimothy@moz-1DB1FE6E.hsd1.wa.comcast.net) (Quit: leaving)
[18:43:58] *** Joins: Chimmy (ctimothy@moz-1DB1FE6E.hsd1.wa.comcast.net)
[18:49:11] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[18:49:11] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:50:41] <eddyb> SimonSapin: it... can't be
[18:50:52] <eddyb> SimonSapin: the former should be optimized to the latter
[18:51:49] <SimonSapin> eddyb: how about `u8 & 128 == 0` ? https://github.com/mozilla/rust/blob/f71c0dc2cd876f50252cdb907a6f05493c56d3cc/src/libstd/ascii.rs#L201
[18:52:29] <SimonSapin> should I make a PR to change them both to `< 0x80` ?
[18:53:21] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[18:56:35] <eddyb> on x86, they are both one compare instruction, without any special optimizations
[18:57:22] <eddyb> < is cmp, & is tst (is it? I'm not sure now. on the naming, that is)
[18:57:49] <eddyb> SimonSapin: if it makes the code cleaner, by all means :)
[18:58:24] <SimonSapin> < 0x80 is what "is ascii" really means
[18:59:36] <cmr> eddyb: & is sub + zero flag, if it's smart enough
[19:00:08] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[19:00:28] <cmr> (and the instruction is test)
[19:00:34] <eddyb> cmr: technically speaking, & is faster than -
[19:00:42] <eddyb> and cmp is sub without writing the result
[19:01:05] <cmr> eddyb: technically speaking according to who and on which generation of which architecture?
[19:01:25] <eddyb> I doubt you can measure it at the ISA level
[19:01:52] <eddyb> I was just trying to make a point about low level carry flow but was stuck on phrasing :P
[19:03:21] <cmr> haswell only has two branch ports so it's probably not going to matter
[19:03:57] <eddyb> cmr: they should be equally fast, but & => - doesn't sound like an optimization to me
[19:04:49] <eddyb> that's what I was trying to say. brb drying this ridiculously long hair
[19:05:02] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Ping timeout)
[19:05:43] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[19:22:41] <eddyb> pcwalton: I am trying to merge "assigning node ids" and "ast indexing" (so I can remove @T/P<T> from syntax::Visitor) - but they're in two different phases (and I'm afraid a little of creating the ast_map for rustpkg and rustdoc - which use only phase 2 in some places, I think)
[19:23:02] <eddyb> pcwalton: and it would conflict with removing @mut most likely, so I have to wait for you
[19:23:04] <pcwalton> it would be nice to eliminate the AST map entirely
[19:23:10] <pcwalton> but I don't know if that's possible
[19:23:33] <eddyb> there's a few alternate designs in the issue about removing @ from the AST
[19:23:56] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Connection reset by peer)
[19:24:00] <eddyb> pcwalton: do we need ID-based access at all?
[19:24:12] <pcwalton> there are a few places that use it
[19:24:16] <eddyb> pointers can be twice as big, but they're not that expensive
[19:24:17] <pcwalton> you can search for tcx.items
[19:24:22] <pcwalton> oh, you mean pointers
[19:24:25] <pcwalton> hmm
[19:24:36] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[19:24:37] <eddyb> I mean, what really needs IDs and can't use pointers?
[19:24:40] <pcwalton> well, inlining uses IDs
[19:24:46] <pcwalton> but it might be able to use pointers
[19:24:56] <pcwalton> the nice thing about IDs is that they're serializable and we do serialize ASTs....
[19:25:15] <eddyb> I know about serialization, but you can have a temporary map when deserializing
[19:25:34] <eddyb> and during serialization, ofc
[19:25:40] <pcwalton> yeah, it's probably doable.
[19:26:35] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[19:26:35] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14dbfe8fb to 14d9c0658: 02http://git.io/N3iJvQ
[19:26:35] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[19:26:36] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[19:26:36] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/IM5j4A
[19:26:36] <ghrust> 13rust/06auto 14cab6878 15SÃ©bastien Paolacci: Make BufferedReader propagate 0-byte long reads....
[19:26:36] <ghrust> 13rust/06auto 14ee887d7 15SÃ©bastien Paolacci: Add tests for 0-byte read propagation....
[19:26:36] <ghrust> 13rust/06auto 14619c4fc 15bors: auto merge of #11022 : spaolacci/rust/0read, r=alexcrichton...
[19:26:38] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[19:26:59] <eddyb> but then you're pretty much removing the benefits of an owned AST and you'd be using something like Rc (my P<T> is a nice starting point for testing)
[19:37:46] <cmr> Yay 11 layers of indentation ._.
[19:38:36] <cmr> make that 12
[20:08:31] *** Quits: doomlord_ (servitor@moz-D40D68D6.range86-184.btcentralplus.com) (Quit: Leaving)
[20:08:34] *** Joins: doomlord_ (servitor@moz-D40D68D6.range86-184.btcentralplus.com)
[20:12:43] *** Joins: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com)
[20:13:55] *** Quits: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com) (Quit: Leaving.)
[20:20:57] *** Joins: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com)
[20:21:06] *** Joins: erickt2 (Adium@moz-6A641B4B.maine.res.rr.com)
[20:21:06] *** Quits: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com) (Connection reset by peer)
[20:34:49] *** Joins: pnkfelix (pnkfelix@moz-E934383B.public.wayport.net)
[20:42:52] *** Quits: erickt2 (Adium@moz-6A641B4B.maine.res.rr.com) (Quit: Leaving.)
[20:51:39] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[20:51:39] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/IM5j4A
[20:51:39] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[20:56:35] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[20:56:35] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/DOoU6w
[20:56:35] <ghrust> 13rust/06auto 14a999086 15Jan Niklas Hasse: Make rustc's own lib directory configurable and change the default to rustlib. Fixes #3319
[20:56:35] <ghrust> 13rust/06auto 14f2be0e6 15bors: auto merge of #11118 : jhasse/rust/patch-rustlibdir, r=alexcrichton...
[20:56:36] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[20:56:39] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[20:56:39] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/hRIQdw
[20:56:39] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[21:07:49] <vadimcn> acrichto: ping
[21:11:38] *** Joins: tikue_ (tkuehn@moz-F4812C6E.hsd1.fl.comcast.net)
[21:21:36] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[21:23:55] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Quit: Leaving...)
[21:25:29] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[21:38:57] *** Joins: Agnos (Mibbit@moz-EBA1C4D0.hsd1.mi.comcast.net)
[21:45:39] *** Quits: Kxepal (Miranda@moz-94D630A3.pppoe.mtu-net.ru) (Ping timeout)
[21:49:01] *** Joins: Kxepal (Miranda@moz-F5F2E19.pppoe.mtu-net.ru)
[21:57:23] *** Quits: tikue_ (tkuehn@moz-F4812C6E.hsd1.fl.comcast.net) (Quit: tikue_)
[22:01:58] *** flaper87 is now known as flaper87|afk
[22:04:44] <vadimcn> Hey, can I get access to push to the "try" branch by any chance?
[22:05:39] <cmr> vadimcn: I can push to it for you in the mean time.
[22:06:23] <vadimcn> cmr: how would we do that?
[22:07:08] <cmr> vadimcn: publish your branch to github, then I can fetch and push it
[22:11:40] <vadimcn> cmr: vadimcn/rust/no-c++-try
[22:11:43] <vadimcn> thanks!
[22:27:13] *** Joins: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com)
[22:33:33] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Ping timeout)
[22:41:07] *** Quits: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com) (Quit: Leaving.)
[22:44:20] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[22:52:57] <vadimcn> cmr: ping
[22:53:02] <cmr> oops sorr
[22:53:04] <cmr> y
[22:53:09] <cmr> got sidetracked by wycats
[22:54:22] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[22:54:22] <ghrust> 01[13rust01] 15cmr 04force-pushed 06try from 144a7bb87 to 142f1cb94: 02http://git.io/k471pw
[22:54:22] <ghrust> 13rust/06try 147a0e66c 15Vadim Chugunov: Stop using C++ exceptions for stack unwinding.
[22:54:22] <ghrust> 13rust/06try 14106d01a 15Vadim Chugunov: Addressed review comments.
[22:54:22] <ghrust> 13rust/06try 141bbd0d9 15Vadim Chugunov: Compile .ll with -relocation-model=pic option
[22:54:24] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[22:57:35] <cmr> vadimcn: http://buildbot.rust-lang.org/console?branch=try&refresh=15
[22:58:06] <vadimcn> cmr:  thanks!
[23:03:11] *** Quits: pnkfelix (pnkfelix@moz-E934383B.public.wayport.net) (Quit: rcirc on GNU Emacs 24.3.1)
[23:05:33] <cmr> vadimcn: if this lands, would you be willing to write a paragraph or so about it for TWiR?
[23:05:40] * cmr thinks is super interesting but doesn't understand how it works
[23:07:44] <aatch> vadimcn, oo, is this using libunwind stuff directly?
[23:08:50] *** ninechars is now known as glaebhoerl
[23:10:16] <vadimcn> cmr: what sort of info you'd like to see?
[23:10:53] <vadimcn> aatch: not in the sense of libunwind.a itself
[23:11:10] <vadimcn> aatch: we use libgcc implementation
[23:11:33] <aatch> vadimcn, yep, just looked through the main commit, looks awesome.
[23:11:33] <vadimcn> but it should be compatible (or very close)
[23:13:06] <vadimcn> cmr: failed on mac...   Looks like this will take a couple of iterations before I get it right
[23:15:00] <aatch> This should allow for a runtime-independent try-catch system, at least in the future, right?
[23:16:00] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Ping timeout)
[23:17:26] <vadimcn> aatch: you mean "independent of gcc runtime"?  yes. 
[23:18:09] <aatch> vadimcn, well, actually I meant independent of Rust's runtime, so you could do try/catch without spawning a task
[23:19:17] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[23:20:14] <vadimcn> aatch: well, you probably could use Unwinder directly without a task...   though it's not designed for that.
[23:20:50] <cmr> vadimcn: ping me to update. it'd be most convenient if you pushed to the same branch
[23:22:34] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[23:23:10] <aatch> vadimcn, I didn't think it would be right now, more just whether or not it makes it reasonable to do. It's important for places that might not want to spawn a whole new task (especially in 1:1 mode)
[23:24:29] <vadimcn> aatch: that would go against Rust design though
[23:25:01] <aatch> vadimcn, only if it broke the abstraction, which it doesn't have to do.
[23:25:42] <vadimcn> if this is important, maybe Rust needs an official try-catch statement
[23:25:49] <ChrisMorgan> Yesterday I discovered that f64.trunc() is broken on armhf, causing println!("{}", 0f64) to hang, guzzling memory; it was already reported without details at https://github.com/mozilla/rust/issues/10482 and I have since added a comment with many more details. Could it please be labelled P-high and I-wrong, and have the title and first post indicate more specifically what the problem is?
[23:26:21] <cmr> ChrisMorgan: priority labels are granted through the weekly triage meeting
[23:27:08] <ChrisMorgan> OK. Well, I-wrong anyway. I'd also like to request that it be considered a matter of significant urgency.
[23:28:44] <ChrisMorgan> I don't know how much more of f64 is unsound. I suppose the Rust test suite would identify that, but I can't build the full libstd test suite on my tablet; it doesn't have enough memory.
[23:30:37] <dbaupp> ChrisMorgan: can you run it with RUST_TEST_TASKS=1
[23:30:38] <dbaupp> ?
[23:30:38] *** Quits: Agnos (Mibbit@moz-EBA1C4D0.hsd1.mi.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:30:54] <ChrisMorgan> dbaupp: my problem is that I can't *compile* the test suite.
[23:31:02] <dbaupp> oh
[23:31:04] <dbaupp> that is a problem
[23:31:10] <dbaupp> can you cross-compile?
[23:31:35] <ChrisMorgan> I suppose I could cross-compile, but it'd require figuring out those details and I don't really have time to spend on that this year :-(
[23:31:44] <dbaupp> yeah, understandable
[23:31:49] * ChrisMorgan likes being able to say things like that toward the end of the year :P
[23:38:13] <vadimcn> cmr: ok, let's try this again
[23:38:44] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[23:41:05] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[23:49:47] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[23:49:47] <ghrust> 01[13rust01] 15cmr pushed 1 new commit to 06try: 02http://git.io/6L2aqg
[23:49:47] <ghrust> 13rust/06try 14c5b7ba7 15Vadim Chugunov: c++ linkage for stage0
[23:49:47] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[23:50:44] <Luqman> ChrisMorgan: oh, i messed around with the rpath stuff, is it any better?
[23:51:41] <ChrisMorgan> Luqman: I haven't tried a newer build, I'll try it later today. (Thanks!)
[23:59:28] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
