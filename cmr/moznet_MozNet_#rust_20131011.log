[00:00:58] <mitchty> sp3d: ah, k, well i have to say i love that go fmt is the "de facto" way for things, solves so much needless pain about how things should look, i'll have a look thanks!
[00:01:47] <mitchty> curious what about it isn't production ready though
[00:01:58] <mitchty> just language flux?
[00:02:29] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[00:02:36] <sp3d> last I heard, it moves around comments and stuff
[00:03:17] <mitchty> ah, indentationwise or something else?
[00:04:20] *** Quits: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP) (Quit: Yeri)
[00:05:18] <tjc> mitchty: see https://github.com/mozilla/rust/issues/3195
[00:05:35] <tjc> that's a metabug for the pretty-printer with a bunch of issues cross-referenced
[00:06:08] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[00:06:11] *** Joins: dbaupp (Thunderbir@B11E503F.D5A1DCF.37681C44.IP)
[00:06:34] <aatch> mitchty, there are also a few cases (I think, it may have been fixed) where it loses the identifiers for some things.
[00:07:09] <mitchty> cool, i think this should keep me occupied for a bit along with reading the tutorial and doing really dumb things
[00:08:19] <mitchty> aatch: ah, i was going to put in a after save hook and test it but maybe not now 
[00:11:28] *** Joins: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[00:11:34] *** Joins: nejucomo1 (Adium@moz-434492BB.dsl.static.sonic.net)
[00:11:39] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Connection reset by peer)
[00:12:07] <nwmcsween> a few questions: will segmented stacks ever be removed? and any idea when an effect system will be introduced?
[00:12:29] *** Quits: derboi_c (derboi_c@E8C2F046.940A4703.BA2F4534.IP) (Ping timeout)
[00:12:57] *** jdm sets mode: -b *!tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp
[00:13:06] *** Quits: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca) (Quit: canhtak)
[00:13:53] <brson> nwmcsween: we're considering not having segmented stacks, yes. any effect system is very far off
[00:13:54] *** Joins: derboi_c (derboi_c@D6B9FB69.DF3CA0D0.BA2F4534.IP)
[00:14:23] <nwmcsween> how would stack size be handled then?
[00:14:57] <nwmcsween> static analysis would be great but I presume that would be a hard project
[00:15:03] <brson> it would be fixed size, mmapped, and demand paged
[00:15:44] *** Quits: jeffreybaird (jeffreybai@moz-ED3EF543.static.twtelecom.net) (Quit: jeffreybaird)
[00:15:46] <brson> you would get stacks that were 'very large', but didn't actually allocate until used
[00:16:12] <brson> tasks would scale poorly on 32-bit platforms because of the small address space
[00:16:13] <nwmcsween> kind of ew
[00:16:24] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[00:16:30] <kmc> you just make a big mapping and the OS fills it in on demand for you
[00:16:43] <kmc> it's not ew, it's the benefit of having an operating system :)
[00:17:08] <nwmcsween> it's an assumption but a valid one sort of
[00:17:17] *** Quits: timot (timot@moz-E3C52487.mobile.tre.se) (Ping timeout)
[00:17:29] <kmc> yeah, it's not satisfactory for e.g. embedded systems, but you probably won't have tasks there either
[00:18:55] *** Joins: jeffreybaird (jeffreybai@moz-ED3EF543.static.twtelecom.net)
[00:19:55] *** Joins: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP)
[00:20:40] *** Joins: timot (timot@moz-E3C52487.mobile.tre.se)
[00:20:46] *** Quits: jeffreybaird (jeffreybai@moz-ED3EF543.static.twtelecom.net) (Quit: jeffreybaird)
[00:21:37] <nejucomo1> Are there any extant languages which have effect systems?  I have a vague notion of the concept, and I'd like to see an example.
[00:21:55] <nejucomo1> -or if none, is there a seminal paper?
[00:21:57] *** Quits: nkoep (nik@moz-E163922.pool.mediaways.net) (Ping timeout)
[00:22:09] <nwmcsween> I think a variant of haskell
[00:22:38] <nwmcsween> rust does as well
[00:22:51] <nwmcsween> unsafe, etc
[00:23:36] <cmr> nwmcsween: there is no "etc"
[00:23:37] <nwmcsween> http://stackoverflow.com/questions/196465/what-is-a-type-and-effect-system
[00:23:54] *** Joins: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net)
[00:24:03] <nwmcsween> ok rust has a very limited effect system
[00:26:59] *** jorendorff_away is now known as jorendorff
[00:27:38] *** Joins: jeffb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[00:28:25] *** Quits: tikue_ (tikue_star@8E84FE3F.F3E8A984.689607DE.IP) (Ping timeout)
[00:30:59] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: anshin)
[00:34:59] <kmc> yep
[00:35:10] <kmc> we used to have 'pure' and such but they were removed (I'm not sure why; it was before my time)
[00:35:16] *** Joins: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca)
[00:35:21] <kmc> one problem is that it's hard to get people to agree on what exactly 'pure' means
[00:36:06] <kmc> nejucomo1: I was talking about Rust's 'unsafe' with a friend today and they mentioned that Mercury has purity declarations: http://www.mercurylang.org/information/doc-latest/mercury_ref/Impurity.html
[00:36:28] *** Joins: nkoep (nik@moz-3FC525CE.vpn.rwth-aachen.de)
[00:36:46] *** Quits: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca) (Quit: canhtak)
[00:37:30] <nejucomo1> I recall D had a "pure" keyword, but I never learned the language enough to understand the implications.
[00:37:35] *** nejucomo1 is now known as nejucomo
[00:37:52] <doomlord_> interesting point, so a pure function can't even read globals
[00:37:59] * nejucomo occasionally hacks on a hobby language which is dynamically typed but has three purity distinctions...
[00:38:00] <doomlord_> safe doesn't mean pure
[00:38:23] <doomlord_> unsafe/('the most impure') can modify state that safe functions can read
[00:38:29] <kmc> GCC also has __attribute__((pure)) and __attribute__((const)) but these are more for allowing the optimizer to do things, rather than for static checking of semantics
[00:39:39] <kmc> Haskell doesn't have effect typing but accomplishes a lot of cool things in a similar vein at the library level, e.g. IO, ST, STM
[00:39:49] *** Joins: ecr (Mibbit@E940BDD3.FBC7597F.11F8506F.IP)
[00:39:55] *** Quits: timot (timot@moz-E3C52487.mobile.tre.se) (Ping timeout)
[00:39:56] <kmc> people sometimes try to explain IO to beginners as an effect annotation on functions, but I think that's pretty wrong and confusing
[00:40:55] <nejucomo> In my hobby language (keep in mind I have not much proglang background), there are "pure", "query", and "proc" functions.  The first kind cannot cause side effects nor can they see the state of previous side effects, queries can see mutable state without altering anything, and procs can read/write mutable state and perform IO...
[00:42:31] *** Joins: timot (timot@moz-E3C52487.mobile.tre.se)
[00:42:38] <jason_> there is a good thread in the r/rust state of rust 0.8 post about this subject
[00:42:51] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:43:11] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:44:24] <doomlord_> rust did have a pure keyword but they removed it now?
[00:44:31] <nejucomo> doomlord_: Yes.
[00:44:51] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[00:44:59] <ecr> it's still reserved I think
[00:45:17] <cmr> rusti: let pure = 5; pure
[00:45:19] -rusti- pastebinned 6 lines of output: http://sprunge.us/jKBa
[00:45:27] <aatch> pure was removed because it was unclear what it did.
[00:45:47] <aatch> Mostly, not what most people expected "pure" to mean.
[00:46:35] <aatch> (Not that I know what it meant anyway, before my time)
[00:46:51] <nwmcsween> a variant of haskell does have an effect system
[00:47:00] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[00:47:14] <nwmcsween> http://www.haskell.org/haskellwiki/DDC
[00:47:36] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:47:44] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:47:54] *** jorendorff is now known as jorendorff_away
[00:48:05] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:48:20] <ecr> I've never been clear on how an effect system differed from monads
[00:49:48] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[00:51:22] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[00:51:32] <reuben> is --llvm-root broken?
[00:51:43] <reuben> (in configure)
[00:52:03] <jdm> maybe it's --enable-llvm-root
[00:52:05] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[00:52:07] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[00:52:16] <brson> reuben: probably. it can't do anything useful since we have a custom llvm
[00:52:28] <reuben> oh
[00:52:30] <reuben> sadfaces
[00:52:36] <nejucomo> ecr: In haskell, Monad is a typeclass (akin to an interface) and has nothing to do with effects.  Then, there's a magical type IO which presents that interface, which provides IO effects.
[00:52:37] <doomlord_> short of an effect system i wondered if it was possible to make something that traces the call graph and annotates source to show effects (eg background colour .. colour coding.. )
[00:52:48] <Luqman> reuben: you should upstream all our patches :D
[00:53:00] <nejucomo> doomlord_: Intriguing!
[00:53:13] <nejucomo> Is there a tool to show the call graph of a rust codebase?
[00:53:14] <doomlord_> That wouldn't *constrain* effects, just *visualize* them
[00:53:22] <doomlord_> no - but i want to add one to RustFind
[00:53:27] <aatch> nejucomo, no, but it shouldn't be too hard to build
[00:53:29] <reuben> Luqman: :D
[00:53:54] <nejucomo> aatch: Alright.  It's on my ephemeral vaporware queue of rust projects, in that case.
[00:54:18] <nejucomo> I guess I could start by looking at rustdoc, and maybe it could just be a new feature for that.
[00:54:28] <doomlord_> (rustfind makes linked html view of the source, the info for a static  callgraph should be easy enough to get)
[00:54:31] <aatch> nejucomo, I was about to suggest looking at rustdoc
[00:54:45] <ecr> nejucomo: sure, but couldn't you just create a monads for different effects? e.g. STM?
[00:54:52] <cmr> nejucomo: a graphviz callgraph plugin would be awesome
[00:54:52] <nejucomo> Hm.  rustfind.  Wasn't aware of that...
[00:55:11] <doomlord_> https://github.com/dobkeratops/rustfind
[00:55:30] <doomlord_> terrible name sorry :)
[00:55:36] *** jorendorff_away is now known as jorendorff
[00:55:48] <nejucomo> ecr: You might be able to, but in that case the effects would be embodied by library APIs, and not the type system.
[00:55:48] <doomlord_> rustview or something
[00:56:17] <nejucomo> doomlord_: From the name, I imagine it's sort of like unix find, but with rust-specific predicates, in which case I like the name.  ;-)
[00:56:39] <cmr> nejucomo: nothing like it
[00:56:40] <doomlord_> i intended to make a search tool , but never bothered
[00:56:44] <aatch> cmr, how did you solve resolution in the end?
[00:56:48] <nejucomo> I see.
[00:57:11] <cmr> aatch: run it through librustc
[00:57:31] *** Quits: timot (timot@moz-E3C52487.mobile.tre.se) (Ping timeout)
[00:57:47] <aatch> cmr, and just accept that resolution errors happen?
[00:58:06] <nejucomo> ecr: Does that distinction make sense?  I think many people get confused thinking that Monads are more than just a typeclass because haskell has a magical IO type, which happens to implement Monad.
[00:58:07] <cmr> aatch: it also runs typeck
[00:58:29] <cmr> aatch: you just can't document invalid rust programs with rustdoc
[00:58:43] <ecr> nejucomo: Yeah, I see the difference. Thanks
[00:58:50] <nejucomo> -well that and the fact that they are a high order typeclass...
[00:59:26] *** Joins: timot (timot@moz-E3C52487.mobile.tre.se)
[00:59:52] <aatch> cmr, fair enough. It does mean that using rustdoc for callgraph generation is reasonably possible.
[01:00:23] <reuben> well that failed quickly
[01:00:25] <reuben> const uint64_t ns_per_s = 1000000000LL;
[01:00:28] <reuben> /Users/Reuben/Development/rust/src/rt/rust_builtin.cpp:167:16: error: unused variable 'ns_per_s' [-Werror,-Wunused-const-variable]
[01:00:39] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[01:01:16] <cmr> aatch: well th eplugin would tie into rustc, rustdoc doesn't have enough information for callgraph
[01:01:27] <cmr> (we discard item bodies)
[01:01:38] *** jorendorff is now known as jorendorff_away
[01:01:40] <doomlord_> i'd imagine its easier to do in rustfind
[01:01:40] <Luqman> reuben: i didn't think we had -Werror
[01:01:48] <cmr> yup, definitely
[01:02:08] <reuben> Luqman: yea usually ends badly. I just did s/-Werror//g, seems to be working :P
[01:02:09] <doomlord_> maybe rustdoc would generate a trait graph more easily
[01:02:42] <Luqman> reuben: well admittedly we should probably clean that up :P
[01:02:55] <engla> ecr: this is the iterator adaptor you asked about to trap conditions. It used to compile but now it doesn't due to privacy/visibility being fixed. https://gist.github.com/anonymous/d6cd9b8ec64a9c74db78
[01:02:56] <reuben> Luqman: sure, but I want to get a working build first ;)
[01:03:52] *** jorendorff_away is now known as jorendorff
[01:04:18] *** jorendorff is now known as jorendorff_away
[01:04:42] *** Joins: ChrisMorgan1 (chris@moz-736C88F0.its.monash.edu.au)
[01:04:44] *** Quits: ChrisMorgan (chris@moz-78D42982.its.monash.edu.au) (Ping timeout)
[01:04:48] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[01:05:58] <ecr> engla: neat! I don't think it's as necessary as I initially thought, but it would still be useful if you had different parts of an iterator chain raising the same condition and you wanted to handle it differently in each spot.
[01:06:06] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[01:06:42] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[01:07:53] *** Quits: dbaupp (Thunderbir@B11E503F.D5A1DCF.37681C44.IP) (Ping timeout)
[01:09:21] *** Quits: jdm (jdm@moz-E4B91594.zone16.bethere.co.uk) (Quit: Lost terminal)
[01:10:04] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[01:10:07] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Ping timeout)
[01:10:07] *** Quits: alon (alon@moz-D22C29D3.bb.netvision.net.il) (Ping timeout)
[01:10:34] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[01:10:34] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[01:10:38] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[01:10:39] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[01:11:01] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[01:13:45] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[01:14:16] <brson> once again, sorry for all the @brson mentions in the last few months that I've ignored
[01:14:20] *** Joins: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net)
[01:14:37] <brson> seriously just ping me on IRC if you need me to think about a bug
[01:15:29] <jeaye> heh
[01:15:41] <jeaye> You're a popular guy.
[01:16:37] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[01:16:39] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[01:17:32] <klutzy> github notification becomes spam when it just shows tens of issue titles but doesn't show who called me or when was it
[01:17:37] *** Joins: nejucomo1 (Adium@moz-434492BB.dsl.static.sonic.net)
[01:17:42] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Connection reset by peer)
[01:18:29] <cmr> Yeah
[01:18:42] <cmr> github notifications aren't very useful for large scale projects, at al.
[01:18:42] <acrichto> brson: if a milestoned bug has been fixed and should be flagged as needstest, are you ok with de-milestoning it?
[01:19:07] <cmr> Remilestone it to well-covered, I say.
[01:19:26] <acrichto> oh nvmd it's easy enough
[01:19:33] *** Quits: timot (timot@moz-E3C52487.mobile.tre.se) (Ping timeout)
[01:19:33] <acrichto> I think I'm gonna make a large needstest-closing pull soon
[01:19:33] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:19:48] <acrichto> oh only 9 issues
[01:19:50] *** Quits: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP) (Quit: z0w0)
[01:19:52] <acrichto> I thought we had more...
[01:20:17] *** Joins: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP)
[01:20:32] *** Quits: mib_2533pe (Mibbit@moz-4058A5B9.ge-0-2-0-712.arcnqu2.dk.customer.tdc.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:21:14] *** Joins: timot (timot@moz-E3C52487.mobile.tre.se)
[01:24:31] *** Quits: nkoep (nik@moz-3FC525CE.vpn.rwth-aachen.de) (Ping timeout)
[01:24:38] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[01:25:42] *** Joins: tautologico (shung@7A53DAF8.92451A23.6EB699AE.IP)
[01:26:38] *** Quits: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:26:56] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[01:27:07] *** Joins: futurehorizons (Mibbit@moz-61717F7A.bitstream.orcon.net.nz)
[01:27:35] <futurehorizons> In a recursive fn I take a function argumement as such "function : &fn()". How do I call the recursive function with "function" as an argument?
[01:27:53] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[01:28:12] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:28:49] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[01:29:58] *** Quits: timot (timot@moz-E3C52487.mobile.tre.se) (Ping timeout)
[01:30:27] <kmc> futurehorizons: you need to write a little lambda,  || function()
[01:30:30] <kmc> known issue :/
[01:30:46] * kmc . o O ( mary had a little lambda )
[01:31:16] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[01:32:55] *** Joins: timot (timot@moz-E3C52487.mobile.tre.se)
[01:34:37] *** Quits: timot (timot@moz-E3C52487.mobile.tre.se) (Ping timeout)
[01:34:58] *** Quits: ChrisMorgan1 (chris@moz-736C88F0.its.monash.edu.au) (Connection reset by peer)
[01:34:58] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Connection reset by peer)
[01:34:58] *** Joins: ChrisMorgan (chris@moz-736C88F0.its.monash.edu.au)
[01:35:37] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[01:36:01] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[01:37:05] *** Quits: nejucomo1 (Adium@moz-434492BB.dsl.static.sonic.net) (Connection reset by peer)
[01:37:06] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[01:37:14] *** Joins: timot (timot@moz-E3C52487.mobile.tre.se)
[01:37:29] *** Joins: dherman (dherman@moz-EA765158.midsouth.biz.rr.com)
[01:37:29] *** ChanServ sets mode: +ao dherman dherman
[01:37:42] *** Quits: joone_ (joone@moz-C50DC051.jf.intel.com) (Ping timeout)
[01:38:08] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[01:38:40] *** Joins: joone_ (joone@3CCE8CB5.2160464A.A34EC3BB.IP)
[01:38:48] *** Parts: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP) ()
[01:39:46] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[01:39:54] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[01:43:07] *** Joins: nkoep (nik@moz-E163922.pool.mediaways.net)
[01:44:16] *** Quits: ecr (Mibbit@E940BDD3.FBC7597F.11F8506F.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:47:23] *** Joins: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net)
[01:48:44] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[01:51:17] *** Joins: lex (lex@moz-738B3E34.bootp.virginia.edu)
[01:51:56] <lex> Hi, I'm having some trouble understanding the tutorial. If I have `mod a` in A.rs and want to use it in B.rs, how do I do that?
[01:52:38] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[01:52:58] *** Quits: timot (timot@moz-E3C52487.mobile.tre.se) (Ping timeout)
[01:52:58] <SiegeLord> That depends on where A.rs and B.rs are
[01:53:21] <lex> SiegeLord: Let's say that their in the same directory.
[01:53:45] <lex> SiegeLord: They're....tired. So it's like ~/A.rs and ~/B.rs
[01:53:48] *** Joins: timot (timot@moz-E3C52487.mobile.tre.se)
[01:54:06] <SiegeLord> Then use super::A::a;
[01:54:09] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[01:54:15] <SiegeLord> And mod a should be pub mod a
[01:54:27] <lex> SiegeLord: Oh! I thought super was supposed to be used for going up a directory. 
[01:54:32] <SiegeLord> It is
[01:54:43] <kmc> it goes up a level in the module hierarchy, which does not always correspond to filesystem directories
[01:54:52] <SiegeLord> Err, yes, that
[01:55:07] <SiegeLord> It still might not work... I'm assuming neither A nor B are crate roots
[01:56:00] <kmc> the top level of a file foo.rs is implicitly a module named 'foo'.  if you put 'mod bar;' it will look for a bar.rs in the same directory and put it at foo::bar.  if you put 'mod bar { ... }' it will put that stuff in foo::bar, no bar.rs required
[01:56:25] <lex> SiegeLord: No, neither are. I tried `use super::A::a;` and it said 'unresolved import: could not find a in super'
[01:56:30] <futurehorizons> kmc: Thanks
[01:56:50] <SiegeLord> Well, it depends on what your crate tree is...
[01:57:52] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[01:58:06] <SiegeLord> One really can't answer your question without more information
[01:59:15] <SiegeLord> Using multiple files is purely a convenience thing, as kmc said... what really matters is what your mod statements look like
[01:59:28] <lex> SiegeLord: Okay...give me a second.
[02:00:01] <devbug> https://github.com/pcmattman/rustic
[02:00:04] <devbug> God dammit.
[02:01:02] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[02:01:11] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[02:01:11] *** Joins: anri (solancile@moz-E49E7C4B.hsd1.wa.comcast.net)
[02:01:11] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[02:01:33] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[02:01:49] *** Joins: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP)
[02:02:37] *** Quits: timot (timot@moz-E3C52487.mobile.tre.se) (Ping timeout)
[02:03:28] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[02:03:48] <lex> SiegeLord: Does this help? http://pastebin.com/06P4SydQ
[02:03:56] *** Joins: jordyd (jordyd@moz-964DF618.seg43.ucf.edu)
[02:04:59] <SiegeLord> Well, you probably want to do: mod syncer; use syncer::sy;
[02:05:04] <SiegeLord> Inside main.rs
[02:05:19] <SiegeLord> And then you could do sy::Syncer
[02:05:21] *** Quits: ChrisMorgan (chris@moz-736C88F0.its.monash.edu.au) (Ping timeout)
[02:05:38] <SiegeLord> sy::Syncer::foo() etc
[02:06:48] *** Quits: BitPuffin (isak@moz-98F8BF74.cust.tele2.se) (Ping timeout)
[02:07:51] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[02:08:01] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[02:08:04] *** Joins: timot (timot@moz-E3C52487.mobile.tre.se)
[02:08:52] *** Quits: pcwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com) (Quit: pcwalton)
[02:10:32] *** Quits: heftig (heftig@moz-4B41666A.dip0.t-ipconnect.de) (Ping timeout)
[02:11:09] *** Joins: Instant (Mibbit@6F87C21C.8475F1AA.A8A698B1.IP)
[02:11:19] <Instant> Is there a casual chat on this network?
[02:11:29] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[02:11:36] <Instant> I just want to casually chat, share some pictures with a pretty lady or two.
[02:11:46] <Instant> It seems to be all computer geek stuff here.
[02:11:59] <kmc> Instant: this is a channel about a specific programming language
[02:12:03] <kmc> so yes, it's computer geek stuff
[02:12:12] <kmc> you should probably try a network other than this one
[02:12:30] <Instant> Can you redirect me to a new channel on this network, sport?
[02:12:38] <kmc> no, go to a different network
[02:12:58] <Instant> Fuck you too, champ. (sigh)
[02:13:01] *** Instant was kicked by kmc (kmc)
[02:13:22] *** Joins: Jesin (Jessin_@moz-2FC45CE5.cc.lehigh.edu)
[02:13:49] <tiffany> ugh
[02:13:49] <kmc> sigh indeed
[02:14:13] *** Quits: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: Ex-Chat)
[02:14:26] <reuben> hahaha
[02:14:42] <clonejo> I'm trying to use ReaderByteConversions on a MemReader, but I get a weird bug: https://gist.github.com/clonejo/6928384 What am I missing?
[02:14:49] <clonejo> *weird error
[02:15:43] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[02:16:01] *** Quits: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[02:16:54] *** Quits: timot (timot@moz-E3C52487.mobile.tre.se) (Ping timeout)
[02:18:38] <clonejo> "failed to find an implementation of trait std::rt::io::Reader for &mut std::rt::io::Reader<no-bounds>"
[02:19:41] *** Joins: timot (timot@moz-E3C52487.mobile.tre.se)
[02:21:04] <kimundi> clonejo: trait objects don't implement their traits
[02:21:08] <lex> SiegeLord: Okay, thanks.
[02:21:14] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[02:22:12] <clonejo> kimundi: So how do I pass a Reader to a function and use from there?
[02:22:52] <klutzy> clonejo: it would be better to write as: fn read<T: Reader>(reader: &mut T)
[02:23:42] <clonejo> klutzy: that fixed it. thanks a lot!
[02:26:42] *** Joins: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca)
[02:28:11] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[02:29:17] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:30:41] *** Quits: timot (timot@moz-E3C52487.mobile.tre.se) (Ping timeout)
[02:31:44] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[02:31:53] *** Quits: kimundi (kimundi@moz-ED7978E9.dip0.t-ipconnect.de) (Ping timeout)
[02:32:47] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[02:33:15] *** Joins: timot (timot@moz-E3C52487.mobile.tre.se)
[02:34:35] *** Joins: ChrisMorgan (chris@moz-736C88F0.its.monash.edu.au)
[02:34:42] *** Joins: kimundi (kimundi@moz-E1BEDB61.dip0.t-ipconnect.de)
[02:39:34] *** kimundi is now known as zz_kimundi
[02:41:11] *** Quits: nkoep (nik@moz-E163922.pool.mediaways.net) (Client exited)
[02:43:18] *** Joins: hjr3 (hradtke@moz-C10F8D20.z195-90-67.customer.algx.net)
[02:49:56] *** Quits: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca) (Input/output error)
[02:50:04] *** Quits: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:52:27] *** Joins: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca)
[02:53:12] *** Quits: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:54:37] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[02:55:34] <lex> Is there a better way to make sure that all tasks are finished before continuing? https://gist.github.com/lex-/6928888
[02:57:18] *** Joins: tikue (quassel@moz-FEADCD38.hsd1.pa.comcast.net)
[02:57:41] <ChrisMorgan> lex: "threads"?
[02:58:39] <ChrisMorgan> Anyway, there is, in the Task objects themselves.
[03:00:24] <ChrisMorgan> You could, for example, use the future_result constructs.
[03:02:09] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: brb)
[03:02:15] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[03:02:45] <lex> ChrisMorgan: um...meant tasks. Let's say I want to 5 tasks that don't return any values, but that I don't want to move farther in my code until all 5 have completed.
[03:02:46] *** Joins: dbaupp (Thunderbir@moz-4301A13F.lns20.syd6.internode.on.net)
[03:04:02] <lex> ChrisMorgan: what did you mean by '"threads"'?
[03:04:23] <ChrisMorgan> I meant "why are you writing 'threads' instead of 'tasks'?"
[03:04:53] <ChrisMorgan> The simplest way would be to `task::try(|| { task::spawn() /* etc. */ }`. That has the cost of an extra task.
[03:05:31] <aatch> lex, the idiomatic way to do synchronization is to use pipes
[03:06:04] <ChrisMorgan> Using the Task.future_result would avoid the need to have an extra task.
[03:06:49] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[03:08:03] *** Joins: vadimcn_ (chatzilla@A2F885AA.5334B0D2.DA40C4B3.IP)
[03:08:08] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[03:08:14] *** vadimcn_ is now known as vadimcn
[03:08:30] <lex> aatch: that's what I did. Is there another way to use pipes to sychronize?
[03:09:17] <lex> ChrisMorgan: Oh. I see what you're saying. That snuck in there because I've done stuff with CUDA :P
[03:09:36] <ChrisMorgan> aatch: by pipes do you mean std::comm?
[03:09:44] <aatch> ChrisMorgan, yep
[03:10:00] *** Joins: vadimcn_ (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[03:10:05] *** Quits: vadimcn (chatzilla@A2F885AA.5334B0D2.DA40C4B3.IP) (Ping timeout)
[03:10:11] *** vadimcn_ is now known as vadimcn
[03:10:19] <aatch> lex, there is oneshot too, which is slightly more efficient
[03:10:32] <ChrisMorgan> lex: using try or future_result gets you the benefit (if such you consider it) of knowing if the task failed, too.
[03:11:36] *** Joins: JanC__ (janc@moz-213A8F1A.dsl.scarlet.be)
[03:11:40] *** Joins: pnathan1 (Adium@moz-BDC3EE62.tukw.qwest.net)
[03:12:16] *** Quits: JanC_ (janc@moz-213A8F1A.dsl.scarlet.be) (Ping timeout)
[03:12:42] <lex> ChrisMorgan: ah okay. I'll have to switch to using trys then. Thanks!@
[03:13:44] <ChrisMorgan> Take a look at how try is implemented; it's in terms of future_result.
[03:14:08] *** Quits: Jesin (Jessin_@moz-2FC45CE5.cc.lehigh.edu) (Ping timeout)
[03:16:19] *** Joins: dew (Instantbir@moz-8EDFD40B.static.stls.mo.charter.com)
[03:18:50] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[03:25:09] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[03:26:17] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[03:27:17] *** Quits: timot (timot@moz-E3C52487.mobile.tre.se) (Ping timeout)
[03:28:55] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[03:29:19] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[03:30:06] *** Joins: timot (timot@moz-E3C52487.mobile.tre.se)
[03:32:06] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:33:29] *** Quits: timot (timot@moz-E3C52487.mobile.tre.se) (Ping timeout)
[03:33:48] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:33:51] *** Joins: timot (timot@moz-E3C52487.mobile.tre.se)
[03:43:35] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[03:43:57] *** Quits: StarLight (StarLight@moz-9A720B6E.dynamic.avangarddsl.ru) (Ping timeout)
[03:45:27] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[03:52:47] *** Quits: tautologico (shung@7A53DAF8.92451A23.6EB699AE.IP) (Quit: tautologico)
[03:54:03] *** Joins: ercxx__ (ercan@moz-7CFF3469.dyn.optonline.net)
[03:54:14] *** Joins: tautologico (shung@7A53DAF8.92451A23.6EB699AE.IP)
[03:54:34] *** Joins: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP)
[03:55:02] <ercxx__> Hi, is rustc supposed to be able to find /usr/lib/somelib.so without passing -L ?
[03:55:36] <Luqman> ercxx__: /usr/lib is usually in the default search path
[03:56:59] *** Quits: hjr3 (hradtke@moz-C10F8D20.z195-90-67.customer.algx.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:57:03] <ercxx__> I just compiled and copied rust-http (libhttp-****.so) in there but rustc complained.
[03:58:14] <Luqman> ercxx__: try running `ldconfig` maybe
[03:59:32] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[04:02:47] <ercxx__> My mistake. Apparently it was supposed to be /usr/lib/rustc/x86_64-unknown-linux-gnu/lib/libwhatever.so
[04:03:40] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[04:07:06] *** Quits: jordyd (jordyd@moz-964DF618.seg43.ucf.edu) (Ping timeout)
[04:07:51] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[04:12:01] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[04:12:01] *** ChanServ sets mode: +ao brson brson
[04:13:12] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Input/output error)
[04:13:42] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[04:15:12] *** Quits: timot (timot@moz-E3C52487.mobile.tre.se) (Ping timeout)
[04:15:34] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[04:18:53] *** Joins: timot (timot@moz-E3C52487.mobile.tre.se)
[04:19:31] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[04:20:35] *** Quits: timot (timot@moz-E3C52487.mobile.tre.se) (Ping timeout)
[04:22:57] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[04:23:32] *** Quits: ChrisMorgan (chris@moz-736C88F0.its.monash.edu.au) (Ping timeout)
[04:23:53] *** Joins: ChrisMorgan (chris@moz-736C88F0.its.monash.edu.au)
[04:24:55] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[04:26:46] *** Quits: jeffb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Ping timeout)
[04:27:12] *** Joins: jeffb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[04:27:44] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[04:28:06] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[04:29:38] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[04:30:06] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[04:32:49] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:33:30] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[04:34:24] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[04:36:24] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:36:28] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[04:37:14] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[04:40:31] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[04:40:35] *** Quits: pnathan1 (Adium@moz-BDC3EE62.tukw.qwest.net) (Quit: Leaving.)
[04:40:57] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: Textual IRC Client: www.textualapp.com)
[04:41:22] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[04:42:31] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[04:46:18] *** Quits: futurehorizons (Mibbit@moz-61717F7A.bitstream.orcon.net.nz) (Quit: http://www.mibbit.com ajax IRC Client)
[04:46:20] *** Parts: lex (lex@moz-738B3E34.bootp.virginia.edu) ()
[04:48:37] *** Joins: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[04:49:01] *** Quits: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net) (Quit: sw17ch)
[04:49:18] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[04:51:35] * dbaupp wonders why http://www.ug.it.usyd.edu.au/~hwil7821/rust/std/rand/isaac/struct.Isaac64Rng.html is on the front page of googling for "isaac-64 rng", but the real docs http://static.rust-lang.org/doc/master/std/rand/isaac/struct.Isaac64Rng.html aren't
[04:52:44] *** Joins: pnathan1 (Adium@moz-BDC3EE62.tukw.qwest.net)
[04:55:18] <sanxiyn> dbaupp: Googling "veciterator" does get rust-lang.org (master and 0.8) at the top, so I am curious...
[04:55:42] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[04:57:31] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[04:58:00] <dbaupp> sanxiyn: possibly because the r-l.o page is pretty new (i.e. 1 or 2 days) but my page has been there for a week or more
[04:58:44] <dbaupp> (and veciterator has been on rl.o for ages)
[05:02:04] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[05:02:32] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[05:05:15] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[05:08:04] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Client exited)
[05:08:45] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[05:08:53] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[05:09:53] *** Quits: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP) (Quit: Leaving)
[05:10:35] *** Joins: tikue_ (quassel@moz-FEADCD38.hsd1.pa.comcast.net)
[05:10:43] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[05:10:54] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[05:11:00] <ChrisMorgan> BTW, dbaupp, I did finally publish that GitHub link maintenance article I had been telling you about; but then you weren't here! http://chrismorgan.info/blog/github-links-case-study.html
[05:11:24] *** Quits: tikue (quassel@moz-FEADCD38.hsd1.pa.comcast.net) (Ping timeout)
[05:11:36] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[05:11:42] * dbaupp reads
[05:13:04] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[05:16:00] <dbaupp> ChrisMorgan: woah, the 'y' key
[05:16:04] * dbaupp tries
[05:16:15] <ChrisMorgan> Yeah, I wish I'd known about that one before!
[05:16:22] <dbaupp> cool, it works
[05:16:34] <ChrisMorgan> Makes me think GitHub should post a blog entry reminding people about it.
[05:18:04] *** Joins: timot (timot@moz-E3C52487.mobile.tre.se)
[05:19:26] <dbaupp> ChrisMorgan: I agree with you about the myriad ways in which github could make a better 404 page
[05:20:10] <dbaupp> ... even just some js that offered links to github.com/user/repo (+ filename search) for a deep 404 link so I don't have to do it by hand
[05:20:45] <dbaupp> ChrisMorgan: (will relink be written with rust-http? :P )
[05:20:47] <ChrisMorgan> They haven't offered to hire me yet :P
[05:21:05] <ChrisMorgan> dbaupp: I'd love to be able to, but it sure ain't ready for it yet.
[05:22:17] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:24:42] *** Quits: bent|away (chatzilla@moz-8913BD79.midsouth.biz.rr.com) (Ping timeout)
[05:24:58] * ChrisMorgan wishes Mozilla would hire him
[05:25:57] *** Quits: timot (timot@moz-E3C52487.mobile.tre.se) (Ping timeout)
[05:27:14] <dbaupp> ChrisMorgan: https://careers.mozilla.org/en-US/
[05:27:37] <dbaupp> there was a servo job at some point, and a rust one too
[05:27:58] <ChrisMorgan> 'course, the ideal spot would be Rust or Servo, but there is more to life than that :-)
[05:28:07] <dbaupp> https://careers.mozilla.org/en-US/position/o3VZWfwD
[05:28:11] <dbaupp> ChrisMorgan: lies :P
[05:29:11] <ercxx__> ChrisMorgan: Just created an Arch Linux package for rust-http.
[05:29:43] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[05:29:48] <ChrisMorgan> In the case of your link, I don't have LLVM experience; there are several people in here that would want such a job that would be far more appropriate than I, for example.
[05:30:03] <ChrisMorgan> ercxx__: that's enterprising of you!
[05:30:04] *** Joins: timot (timot@moz-E3C52487.mobile.tre.se)
[05:31:52] <ercxx__> ChrisMorgan: and rustsqlite.
[05:32:04] <ercxx__> both on AUR now.
[05:32:45] * ChrisMorgan thinks someone should make a DBMS in Rust
[05:34:31] <ercxx__> That might take a little more time than 20 lines of Bash, and someone smart. That means it's well beyond me :)
[05:34:48] <ChrisMorgan> Just imagine: a statically linked binary which contains *all* dependencies and the entire web server.
[05:35:01] <ercxx__> I'm working on a mini web framework-ish thoug.
[05:35:03] <ChrisMorgan> Frankly, I don't think sysadmins would like it.
[05:35:07] <dbaupp> sounds like a go executable
[05:35:27] <ercxx__> Yeah, go puts everything in there.
[05:35:34] <mcpherrin> I would LOVE if launching an app was as easy as starting a single binary in a Linux container :P
[05:35:37] <ChrisMorgan> dbaupp: somewhat like it. But this must include any DBMS.
[05:35:39] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:36:12] <ChrisMorgan> mcpherrin: what, don't you like installing nginx, installing uWSGI, installing pip, installing virtualenv, installing PostgreSQL, installing the code, gluing it all together?
[05:36:13] <ercxx__> If you count sqlite a DBMS then it's totally doable.
[05:36:42] * ChrisMorgan would like to see something along the lines of ZODB written in Rust
[05:37:19] <ChrisMorgan> ercxx__: re. mini web framework-ish thing: code public?
[05:37:20] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[05:38:14] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[05:38:28] <ercxx__> Not yet. The code is embarassing, and I'm very new, so might take a while.
[05:38:44] <ercxx__> It wouldn't hurt if rust-http was moving faster though.
[05:39:05] <tautologico> why this doesn't work? mod A { pub fn f1() { } }  pub mod B { pub fn g1() { A::f1() } }
[05:39:20] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[05:39:23] <tautologico> I have to use A inside of module B for it to work
[05:39:27] <ChrisMorgan> ercxx__: sorry, I'm rather busy for the next couple of weeks.
[05:40:20] * ChrisMorgan is greatly looking forward to fleeing from Uni forever
[05:40:30] <dbaupp> tautologico: `A` isn't in scope in `B`, because `B` is a new module
[05:40:48] <ercxx__> No problem at all. Can you think of anything ESPECIALLY easy/newbie friendly in rust-http. I would like to help.
[05:40:59] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[05:41:31] <ChrisMorgan> tautologico: the three things that would work are: `super::A::f1()`, `use A; A::f1()` and `::A::f1()`.
[05:41:40] <tautologico> dbaupp: A is an item under the root module, right? so I thought it should be visible inside B as other items (private and public) in the root module are visible inside B
[05:41:52] *** Quits: timot (timot@moz-E3C52487.mobile.tre.se) (Ping timeout)
[05:42:07] <tautologico> I mean, if I define a fn in the root module, wouldn't it be visible inside B?
[05:42:29] <tautologico> I realise my example was wrong
[05:42:30] <tautologico> I meant
[05:42:31] <ChrisMorgan> Nothing creeps inside a mod boundary.
[05:42:42] <tautologico> no, it's right
[05:42:44] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[05:42:55] <ChrisMorgan> You've got to use it explicitly, or via an absolute name (::foo) or via `super`.
[05:43:22] <ChrisMorgan> Hence the common pattern `#[cfg(test)] mod tests { use super::*; ... }`.
[05:44:04] <tautologico> right
[05:44:31] *** Joins: timot (timot@moz-E3C52487.mobile.tre.se)
[05:45:02] <tautologico> I get it now, thanks… I was getting the wrong idea
[05:45:10] <tautologico> the name A is not in scope inside B
[05:45:33] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[05:45:34] *** Joins: sergi (textual@moz-DB55470C.upc-a.chello.nl)
[05:45:58] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[05:46:12] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[05:46:37] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[05:47:41] <ChrisMorgan> ercxx__: removing my misguided LWS (linear white space, RFC 2616 has a very little more detail) collapsing from HeaderValueByteIterator (headers/mod.rs) would be good. That would involve changing some stuff in HeaderValueByteIterator.next (removing the CompactingLWS state) and after that in some of the header types (e.g. MediaType) so that they consume optional LWS explicitly.
[05:48:47] *** Quits: timot (timot@moz-E3C52487.mobile.tre.se) (Ping timeout)
[05:49:12] *** Joins: timot (timot@moz-E3C52487.mobile.tre.se)
[05:49:13] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[05:50:55] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[05:51:24] *** Joins: xAndy (xandy@moz-E129C9.unity-media.net)
[05:51:58] <ChrisMorgan> ercxx__: another possibility would be changing HeaderConvertible::from_stream to return Result<Self, ~str> (the error being the raw value of the header, which should, alas, probably be read entirely up front, though I had avoided that for performance) instead of Option<Self> (which loses an invalid header's value).
[05:51:58] <ChrisMorgan> This intent may suggest a total redesign of HeaderValueByteIterator is in order.
[05:52:22] *** Quits: sergi (textual@moz-DB55470C.upc-a.chello.nl) (Quit: Textual IRC Client: www.textualapp.com)
[05:53:04] *** Joins: [squiddy] (squiddy@moz-A441D2CD.dynamic.cablesurf.de)
[05:53:59] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[05:54:03] *** Joins: vadimcn_ (chatzilla@A2F885AA.5334B0D2.DA40C4B3.IP)
[05:54:06] *** vadimcn_ is now known as vadimcn
[05:54:44] * ChrisMorgan should put these into issues on GitHub
[05:55:24] *** Quits: timot (timot@moz-E3C52487.mobile.tre.se) (Ping timeout)
[05:55:48] *** Joins: timot (timot@moz-E3C52487.mobile.tre.se)
[05:57:23] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[05:57:46] *** Joins: vadimcn_ (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[05:57:56] *** Quits: vadimcn (chatzilla@A2F885AA.5334B0D2.DA40C4B3.IP) (Ping timeout)
[05:57:57] *** vadimcn_ is now known as vadimcn
[05:58:15] *** Quits: timot (timot@moz-E3C52487.mobile.tre.se) (Ping timeout)
[06:00:07] *** Joins: timot (timot@moz-E3C52487.mobile.tre.se)
[06:04:16] *** Joins: valenting (Thunderbir@moz-416F9035.residential.rdsnet.ro)
[06:05:02] *** Quits: timot (timot@moz-E3C52487.mobile.tre.se) (Ping timeout)
[06:05:30] *** Joins: timot (timot@moz-E3C52487.mobile.tre.se)
[06:10:16] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[06:11:25] *** Quits: tautologico (shung@7A53DAF8.92451A23.6EB699AE.IP) (Quit: tautologico)
[06:12:11] *** Joins: nwmcsween_ (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[06:12:21] *** Quits: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP) (Ping timeout)
[06:17:39] *** Joins: alon (alon@moz-4904A7D7.bb.netvision.net.il)
[06:18:07] *** Joins: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[06:18:26] *** Quits: nwmcsween_ (nwmcsween@E0025B86.51EE1362.3655BBF5.IP) (Ping timeout)
[06:19:24] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[06:19:24] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[06:20:56] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[06:20:59] *** Quits: timot (timot@moz-E3C52487.mobile.tre.se) (Ping timeout)
[06:23:19] <ChrisMorgan> ercxx__: those two are https://github.com/chris-morgan/rust-http/issues/26 and https://github.com/chris-morgan/rust-http/issues/27, if you want to claim them.
[06:24:53] *** Joins: mib_ccyctg (Mibbit@moz-4058A5B9.ge-0-2-0-712.arcnqu2.dk.customer.tdc.net)
[06:24:54] <ercxx__> I'll take a look at them first thing tomorrow.
[06:25:03] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[06:25:31] *** Joins: timot (timot@moz-E3C52487.mobile.tre.se)
[06:26:00] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[06:34:14] *** Joins: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net)
[06:34:39] *** Quits: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:36:06] *** Quits: silotis (quassel@moz-4B8C4631.oc.oc.cox.net) (Ping timeout)
[06:36:08] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:37:38] *** Joins: silotis (quassel@moz-4B8C4631.oc.oc.cox.net)
[06:40:22] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:41:01] *** Quits: themgt (themgt@moz-B7517B97.baf.movistar.cl) (Ping timeout)
[06:44:28] <ChrisMorgan> It's pretty sad that due to the space-wasting copyright notice https://github.com/alexcrichton/rust/commit/252d17a07ca1a3013b6f13d868d8e397096afa2b#diff-2 is recognised as a rename, when it has *no* code in common.
[06:44:57] <ChrisMorgan> *Why* are the copyright notices in there? The consensus that I've seen is that they're not necessary from a legal perspective.
[06:45:54] *** Quits: valenting (Thunderbir@moz-416F9035.residential.rdsnet.ro) (Ping timeout)
[06:47:05] *** Quits: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP) (Ping timeout)
[06:49:01] *** Joins: lerc (quassel@moz-95D8600C.telstraclear.net)
[06:50:30] *** Quits: ChrisMorgan (chris@moz-736C88F0.its.monash.edu.au) (Ping timeout)
[06:54:52] *** Quits: timot (timot@moz-E3C52487.mobile.tre.se) (Ping timeout)
[06:55:02] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[06:57:11] *** Joins: timot (timot@moz-E3C52487.mobile.tre.se)
[06:59:03] *** Quits: dherman (dherman@moz-EA765158.midsouth.biz.rr.com) (Quit: dherman)
[07:05:31] *** Joins: Ms2ger (Ms2ger@4C3AB550.528524A1.F15B0BB3.IP)
[07:10:46] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[07:12:35] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[07:15:13] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[07:23:48] *** Quits: [squiddy] (squiddy@moz-A441D2CD.dynamic.cablesurf.de) (Input/output error)
[07:25:00] *** Joins: jaen (jaen@moz-55AE6C19.eduroam.elte.hu)
[07:25:00] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[07:32:45] *** Joins: sk (sk@moz-82E9BD64.dynamic.vega-ua.net)
[07:32:58] *** Joins: mib_c04xjs (Mibbit@moz-A6BF88CA.members.linode.com)
[07:33:17] *** pmoore|away is now known as pmoore
[07:34:21] <Ms2ger> So what's the new blessed way of string formatting?
[07:35:17] *** Quits: timot (timot@moz-E3C52487.mobile.tre.se) (Ping timeout)
[07:39:04] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:40:47] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Ping timeout)
[07:40:51] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[07:40:51] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[07:40:59] *** Quits: jaen (jaen@moz-55AE6C19.eduroam.elte.hu) (Ping timeout)
[07:41:26] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Connection reset by peer)
[07:41:38] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[07:41:42] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[07:41:44] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[07:42:06] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[07:42:08] *** Joins: timot (timot@moz-E3C52487.mobile.tre.se)
[07:42:16] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[07:42:30] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Connection reset by peer)
[07:42:44] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[07:44:16] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[07:44:29] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Input/output error)
[07:44:37] <dbaupp> Ms2ger: format!, or println!: http://static.rust-lang.org/doc/master/std/fmt/index.html
[07:44:50] <Ms2ger> Thanks
[07:45:06] <dbaupp> in most cases you can replace fmt!("%s %n %whatever", x, y, z) with just `format("{} {} {}", x, y, z)
[07:45:19] <dbaupp> %? becomes {:?}
[07:46:02] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[07:47:25] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[07:47:51] *** Quits: jeffb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffb)
[07:48:07] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[07:51:20] *** Joins: jaen (jaen@moz-55AE6C19.eduroam.elte.hu)
[07:56:14] *** Joins: ecr (Mibbit@E940BDD3.FBC7597F.11F8506F.IP)
[07:57:10] <ecr> is there an upload of the rust logo somewhere that i could use in a presentation? or should i just grab the logo from the main page.
[07:59:24] *** Joins: fabiand (fabiand@moz-5B0DE248.adsl.alicedsl.de)
[08:00:36] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[08:03:06] *** Quits: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP) (Ping timeout)
[08:03:16] *** Joins: Ferreus (ferreus@moz-6CE6358C.dip0.t-ipconnect.de)
[08:06:08] <klutzy> ecr: this? http://www.rust-lang.org/logos/rust-logo-blk.svg
[08:07:33] *** Quits: ski (md9slj@moz-862B1C66.studat.chalmers.se) (Ping timeout)
[08:11:56] *** Joins: nrc (nrc@moz-3576D163.cable.virginmedia.com)
[08:14:06] <ecr> klutzy: thanks
[08:15:03] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[08:16:04] *** Quits: dew (Instantbir@moz-8EDFD40B.static.stls.mo.charter.com) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[08:16:06] *** Quits: ecr (Mibbit@E940BDD3.FBC7597F.11F8506F.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:16:23] *** Quits: decoder (quassel@moz-D7023D7D.own-hero.net) (Ping timeout)
[08:18:14] *** Quits: Ms2ger (Ms2ger@4C3AB550.528524A1.F15B0BB3.IP) (Quit: bbl)
[08:18:17] *** Joins: decoder (quassel@moz-D7023D7D.own-hero.net)
[08:19:45] *** Joins: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP)
[08:20:47] *** Joins: ofeldt (ofeldt@moz-C584FA76.dip0.t-ipconnect.de)
[08:21:35] *** Quits: ofeldt- (ofeldt@moz-82D56A93.dip0.t-ipconnect.de) (Ping timeout)
[08:22:05] *** Joins: tgummerer (tgummerer@moz-9FE3F44D.kthopen.kth.se)
[08:24:45] *** Joins: skade (skade@moz-4865967C.pools.arcor-ip.net)
[08:26:33] *** Joins: ogeon (ogeon@moz-865C8D1B.a258.priv.bahnhof.se)
[08:28:57] <ogeon> Hi! I have been searching for a way to make non blocking IO with sockets. Is it even possible yet?
[08:30:24] *** Joins: ecr (Mibbit@E940BDD3.FBC7597F.11F8506F.IP)
[08:30:40] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[08:31:15] *** Quits: ecr (Mibbit@E940BDD3.FBC7597F.11F8506F.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:32:53] *** Parts: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) ()
[08:35:05] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:37:19] *** Quits: jaen (jaen@moz-55AE6C19.eduroam.elte.hu) (Ping timeout)
[08:39:05] *** Joins: jaen (jaen@moz-55AE6C19.eduroam.elte.hu)
[08:39:42] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:39:54] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:40:50] *** Quits: jaen (jaen@moz-55AE6C19.eduroam.elte.hu) (Ping timeout)
[08:43:01] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: ["Textual IRC Client: www.textualapp.com"])
[08:43:12] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:43:43] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:45:46] *** Quits: mib_v6l4qd (Mibbit@moz-13D5D55D.ip228.fastwebnet.it) (Quit: http://www.mibbit.com ajax IRC Client)
[08:47:33] *** Joins: jaen (jaen@moz-55AE6C19.eduroam.elte.hu)
[08:56:10] *** Parts: ogeon (ogeon@moz-865C8D1B.a258.priv.bahnhof.se) ()
[08:59:51] *** Quits: mib_c04xjs (Mibbit@moz-A6BF88CA.members.linode.com) (Quit: http://www.mibbit.com ajax IRC Client)
[09:02:29] *** Quits: tgummerer (tgummerer@moz-9FE3F44D.kthopen.kth.se) (Ping timeout)
[09:03:32] *** Quits: nrc (nrc@moz-3576D163.cable.virginmedia.com) (Ping timeout)
[09:05:26] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[09:05:48] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[09:06:19] *** Joins: ofeldt- (ofeldt@moz-683F0706.dip0.t-ipconnect.de)
[09:07:29] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[09:07:37] *** Quits: ofeldt (ofeldt@moz-C584FA76.dip0.t-ipconnect.de) (Ping timeout)
[09:08:29] *** Joins: Blub\w (wry@moz-248A6D42.wireless.dyn.drei.com)
[09:09:25] *** Joins: [squiddy] (squiddy@moz-A441D2CD.dynamic.cablesurf.de)
[09:11:08] *** Joins: tgummerer (tgummerer@moz-9FE3F44D.kthopen.kth.se)
[09:21:38] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[09:25:34] *** Quits: timot (timot@moz-E3C52487.mobile.tre.se) (Ping timeout)
[09:26:33] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[09:27:50] *** Joins: timot (timot@moz-45B39FB4.bredband.tre.se)
[09:27:56] *** Joins: jdm (jdm@88F51059.F3BBB17D.144F44FA.IP)
[09:27:56] *** ChanServ sets mode: +o jdm
[09:28:23] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[09:29:30] *** Joins: nkoep (nik@moz-A4CD7309.pool.mediaways.net)
[09:30:13] *** Joins: pnkfelix (pnkfelix@moz-1467CA5F.bstnma.fios.verizon.net)
[09:30:13] *** ChanServ sets mode: +o pnkfelix
[09:30:15] *** Joins: nrc (nrc@88F51059.F3BBB17D.144F44FA.IP)
[09:30:17] *** Joins: Ms2ger (Ms2ger@moz-15B436EA.ugent.be)
[09:31:51] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[09:41:55] *** Quits: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca) (Quit: canhtak)
[09:42:39] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:44:31] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:44:44] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[09:57:50] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Quit: Leaving)
[09:58:50] *** pmoore is now known as pmoore|lunch
[09:58:51] *** Joins: maik (maik@moz-5EB2D849.dip0.t-ipconnect.de)
[10:00:38] *** Quits: jaen (jaen@moz-55AE6C19.eduroam.elte.hu) (Ping timeout)
[10:01:21] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[10:06:52] *** Joins: mib_p4la5s (Mibbit@86C2FA8.4C84EF83.57DA49D3.IP)
[10:07:03] *** Quits: tgummerer (tgummerer@moz-9FE3F44D.kthopen.kth.se) (Ping timeout)
[10:07:13] *** Quits: mib_p4la5s (Mibbit@86C2FA8.4C84EF83.57DA49D3.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:08:18] *** Joins: vmx (vmx@moz-5B5A3C1.pools.arcor-ip.net)
[10:26:54] *** Quits: timot (timot@moz-45B39FB4.bredband.tre.se) (Ping timeout)
[10:29:03] *** Joins: timot (timot@moz-45B39FB4.bredband.tre.se)
[10:29:15] *** Joins: graememcc (chatzilla@moz-CE628128.range81-157.btcentralplus.com)
[10:30:13] <fhahn> hi! I noticed that a os-level RNG has landed in Rust [1] and I was wondering if it's possible to use it without initializing the runtime (I was thinking about using it to address following XXX in libstd/rt/crate_map.rs [2])
[10:30:17] <fhahn> [1] https://github.com/mozilla/rust/commit/39a69d323da95ce642ea7fe8d40eb8bdd6a277c8
[10:30:24] <fhahn> [2] https://github.com/mozilla/rust/blob/master/src/libstd/rt/crate_map.rs#L162
[10:31:13] <fhahn> But it seems it requires intialization of the runtime, using it yields: fatal runtime error: runtime tls key not initialized
[10:33:17] *** Joins: BitPuffin (isak@moz-98F8BF74.cust.tele2.se)
[10:33:42] *** Quits: nkoep (nik@moz-A4CD7309.pool.mediaways.net) (Ping timeout)
[10:34:33] *** Quits: maik (maik@moz-5EB2D849.dip0.t-ipconnect.de) (Ping timeout)
[10:36:29] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[10:36:41] <dbaupp> fhahn: glad you asked! I had the same problem while implementing it
[10:36:54] <dbaupp> fhahn: https://github.com/mozilla/rust/blob/master/src/libstd/rt/sched.rs#L847
[10:40:06] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[10:40:40] *** Joins: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[10:41:04] <eddyb> hi. is it possible to build rust using system LLVM (3.3)?
[10:41:29] <dbaupp> fhahn: (thank you for your amazing work making the crate-map safe btw :) )
[10:41:51] <dbaupp> eddyb: no it's not. rust has a few custom patches that are required
[10:42:34] <eddyb> dbaupp: ohai :P. you're the one who posted my friend's rustic project on reddit, right?
[10:43:09] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:43:20] <fhahn> dbaupp: I think I should have read the whole commit message, which states that the scheduler is required for OSRng :D
[10:43:37] <dbaupp> eddyb: the OS one?
[10:43:45] <eddyb> dbaupp: yupp
[10:43:51] <dbaupp> eddyb: yeah, I'm good at copying links from here to reddit :P
[10:43:56] <dbaupp> fhahn: haha :)
[10:44:22] <eddyb> dbaupp: now I have to find out who's in here and #pedigree on freenode, unless pcmattman came here himself
[10:45:38] <dbaupp> fhahn: as acrichto said a while ago, I think it's ok if we don't randomly initialise them, since (I believe) everything about the cratemap is fixed at compile time, so an attacker won't be able to exploit it.... I think
[10:45:50] <dbaupp> eddyb: he should come here if he's doing rust stuff :)
[10:46:05] *** Quits: Ms2ger (Ms2ger@moz-15B436EA.ugent.be) (Quit: bbl)
[10:46:12] <dbaupp> fhahn: (just for context, I'm huonw on github :) )
[10:46:24] <eddyb> dbaupp: btw, me and him have worked in the (rather large) hobby C++ OS project Pedigree (he revived the project this year, but I haven't touched it in a long while)
[10:47:04] <dbaupp> eddyb: awesome, so this is the Rust-port/continuation?
[10:47:10] <dbaupp> (this == rustic)
[10:47:14] <eddyb> more like experimentation platform
[10:47:24] <eddyb> he's still working on getting pedigree fully self-hosted
[10:47:25] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:47:32] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[10:47:49] <eddyb> (I think he has multi-terminal-window vi, but I wouldn't work in that)
[10:47:52] <fhahn> dbaupp: ah :)
[10:48:07] *** Joins: nkoep (nik@moz-DBF6F236.vpn.rwth-aachen.de)
[10:48:08] <eddyb> dbaupp: I asked about LLVM because it's quite a big part of the download and build process. anyways, I submitted my rust-git package :D https://build.opensuse.org/request/show/202956
[10:49:08] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[10:49:38] <dbaupp> fhahn: if we/you/someone does decide to solve that XXX by implementing random-seeding (rather than just removing the comment), it seems like it might be common thing (well, in two places) for the scheduler to want randomness, so a `runtime_rand_bytes(&mut [u8])` could easily be placed in std::rt::util
[10:49:51] <dbaupp> (well, "preruntime_rand_bytes")
[10:51:05] <dbaupp> eddyb: yay, more packages! if it gets accepted you can/should add it to https://github.com/mozilla/rust/wiki/Doc-packages,-editors,-and-other-tools (and send an email to the mailing list/publicise it somehow :) )
[10:51:23] <eddyb> dbaupp: the only maintenance cost is every major version and whenever stage2 would be different from stage3 or stage1 wouldn't compile (because of old snapshot). the only automation I can come up with is a local cron script which downloads the snapshots.txt file from github and updates the URL in the .spec file
[10:52:04] *** Joins: heftig (heftig@moz-6C6AEBF4.dip0.t-ipconnect.de)
[10:54:08] <eddyb> damn, Ubuntu beat us. oh well, I guess there weren't any real Rust users on suse before (although there are unmaintained 0.8 user packages, one of which I based mine on)
[10:54:17] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[10:54:39] *** Quits: heftig (heftig@moz-6C6AEBF4.dip0.t-ipconnect.de) (Ping timeout)
[10:56:20] *** Joins: heftig (heftig@moz-C8EBC776.dip0.t-ipconnect.de)
[10:58:04] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[10:58:12] *** Joins: Adhaa (Adhaa@6B52E0A7.83764248.55CD930E.IP)
[10:58:28] *** Quits: Liothen (liothen@moz-266BCA86.spkn.qwest.net) (Quit: Textual IRC Client: www.textualapp.com)
[11:01:58] *** zz_kimundi is now known as kimundi
[11:02:20] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[11:03:48] *** Joins: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr)
[11:06:06] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[11:07:41] *** Joins: tgummerer (tgummerer@moz-9FE3F44D.kthopen.kth.se)
[11:08:58] *** Joins: mib_f01yf5 (Mibbit@moz-FCF1ABDB.icpnet.pl)
[11:10:24] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[11:10:49] *** Quits: vmx (vmx@moz-5B5A3C1.pools.arcor-ip.net) (Quit: Leaving)
[11:13:17] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[11:14:08] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[11:17:54] *** Joins: maik (maik@moz-5EB2D849.dip0.t-ipconnect.de)
[11:18:23] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[11:21:14] *** Quits: tgummerer (tgummerer@moz-9FE3F44D.kthopen.kth.se) (Ping timeout)
[11:23:19] *** Joins: jaen (jaen@moz-55AE6C19.eduroam.elte.hu)
[11:26:11] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[11:27:30] *** Quits: timot (timot@moz-45B39FB4.bredband.tre.se) (Ping timeout)
[11:28:48] *** Joins: timot (timot@moz-45B39FB4.bredband.tre.se)
[11:30:49] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[11:31:36] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[11:32:13] *** Quits: mib_f01yf5 (Mibbit@moz-FCF1ABDB.icpnet.pl) (Quit: http://www.mibbit.com ajax IRC Client)
[11:34:52] *** Joins: hjr3 (hradtke@moz-C10F8D20.z195-90-67.customer.algx.net)
[11:35:50] *** Quits: [squiddy] (squiddy@moz-A441D2CD.dynamic.cablesurf.de) (Ping timeout)
[11:36:53] *** Quits: fran (fran@moz-14E717A5.telecom.net.ar) (Ping timeout)
[11:38:23] *** Parts: arodier74 (Thunderbir@moz-25EB015.in-addr.btopenworld.com) ()
[11:42:29] *** Joins: fran (fran@106F6463.E2041B94.8ACE28DB.IP)
[11:45:28] *** Quits: victorporof (victorporo@A8FF5052.5E882C5.D111398B.IP) (Ping timeout)
[11:46:09] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:47:45] *** Quits: skade (skade@moz-4865967C.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[11:49:58] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[11:50:21] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:51:36] *** Quits: timot (timot@moz-45B39FB4.bredband.tre.se) (Ping timeout)
[11:51:47] <kaeso> eddyb: that is currently being worked on at https://github.com/mozilla/rust/issues/4259
[11:53:23] *** Joins: timot (timot@moz-45B39FB4.bredband.tre.se)
[11:54:02] <kaeso> eddyb: and you could also find relevant details at https://github.com/mozilla/rust/wiki/Note-packaging and https://wiki.debian.org/Teams/RustPackaging/Unbundling
[11:54:28] <eddyb> oh, "packaging". I search a few other things
[11:54:53] *** Joins: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP)
[11:55:11] *** Quits: nkoep (nik@moz-DBF6F236.vpn.rwth-aachen.de) (Ping timeout)
[11:55:51] *** Quits: maik (maik@moz-5EB2D849.dip0.t-ipconnect.de) (Ping timeout)
[11:59:23] *** Quits: Adhaa (Adhaa@6B52E0A7.83764248.55CD930E.IP) (Ping timeout)
[11:59:54] *** Joins: stevekla1nik (steveklabn@701D470.129BE976.EE0D0080.IP)
[11:59:56] *** Joins: stevekla2nik (steveklabn@701D470.129BE976.EE0D0080.IP)
[12:00:54] *** Quits: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP) (NickServ (GHOST command used by stevekla1nik))
[12:01:00] *** Joins: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP)
[12:01:16] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[12:01:33] *** Quits: stevekla1nik (steveklabn@701D470.129BE976.EE0D0080.IP) (Quit: bye!)
[12:02:52] *** Quits: hjr3 (hradtke@moz-C10F8D20.z195-90-67.customer.algx.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[12:04:28] *** Joins: stevekla1nik (steveklabn@701D470.129BE976.EE0D0080.IP)
[12:04:53] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[12:05:20] *** Joins: [squiddy] (squiddy@moz-A441D2CD.dynamic.cablesurf.de)
[12:06:56] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[12:06:58] *** Quits: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP) (NickServ (GHOST command used by stevekla1nik))
[12:07:04] *** Joins: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP)
[12:07:16] *** Quits: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP) (NickServ (GHOST command used by stevekla1nik))
[12:07:27] *** stevekla1nik is now known as steveklabnik
[12:08:27] <steveklabnik> anyone around? rebasing a pull request and getting unresolved name `ptr::null`
[12:08:30] <steveklabnik> never seen that before
[12:09:01] <kimundi> steveklabnik: Is the ptr module in scope?
[12:09:06] <steveklabnik> it's not code i wrote
[12:09:14] *** Quits: timot (timot@moz-45B39FB4.bredband.tre.se) (Ping timeout)
[12:09:17] <steveklabnik> hmmmm
[12:09:18] <kimundi> try std::ptr::null
[12:09:28] <steveklabnik> i BET that i mis-managed the conflict, i bet
[12:09:34] <steveklabnik> one side was empty, i bet i picked the wrong side?
[12:09:47] <kimundi> No idea :)
[12:10:00] <pnkfelix> kimundi: ping
[12:10:05] <kimundi> pnkfelix: pong
[12:10:20] <pnkfelix> kimundi: so I was re-reading the comment thread on the inner-attributes ticket
[12:10:35] <kimundi> yes
[12:10:36] <pnkfelix> kimundi: and I realized that I not once, but twice, managed to misinterpret your comments
[12:11:02] <pnkfelix> kimundi: and that my responses to you were more terse than I intended, and potentially quite rude
[12:11:07] <kimundi> haha :) Well, I keep forgetting my comments, so I wouldn't be confused if I manged to misinterpret myself once or twice
[12:11:19] <pnkfelix> kimundi: so I wanted to just say sorry about that
[12:11:26] <kimundi> 0AH, don'T worry :)
[12:11:37] <kimundi> (caps lock fail)
[12:11:50] *** Joins: timot (timot@moz-45B39FB4.bredband.tre.se)
[12:12:03] <pnkfelix> kimundi: also, I've been looking into the inner attribute thing.  I've hacked something up, but it deviates slightly from a strategy you had proposed that I had initially liked
[12:12:09] *** Joins: stevekla1nik (steveklabn@701D470.129BE976.EE0D0080.IP)
[12:12:31] <pnkfelix> kimundi: You had proposed eagerly attempted to parse a first-line shebang as an attribute, and if that fails, then back off and treat it as a comment
[12:12:47] <pnkfelix> kimundi: the problem with this, I realized, is that (I think) attributes can span multiple lines
[12:13:30] <pnkfelix> kimundi: so you would have to code it up to scan potentially many lines ahead before giving up
[12:14:13] <pnkfelix> kimundi: so I suggest this alternative approach: require that a shebang follow the format #! <whitespace> <slash>
[12:14:19] *** Joins: Ms2ger (Ms2ger@4C3AB550.528524A1.F15B0BB3.IP)
[12:14:24] *** Joins: nkoep (nik@moz-A4CD7309.pool.mediaways.net)
[12:14:49] <kimundi> But aren'T a lot of shebangs in the wild of the format #!/foo/bar ?
[12:14:50] <pnkfelix> kimundi: so then we can more eagerly resolve whether we are looking at a shebang comment or at an inner attribute (since inner attributes can not start with / nor \ )
[12:15:10] <pnkfelix> kimundi: oh, sorry, the <whitespace> is optional
[12:15:38] <kimundi> Ah. yeah, just looking for a slash somewhere has been proposed in that thread too
[12:15:48] <kimundi> One problem: windows path shebangs
[12:16:02] *** Joins: fyolnish (fyolnish@moz-31D09C8D.uqwimax.jp)
[12:16:09] <kimundi> windows itself doen't use them, but some windows software interprets them
[12:16:13] <pnkfelix> kimundi: ah, do they not start with three backslashes or whatever?
[12:16:34] *** Joins: skade (skade@moz-4865967C.pools.arcor-ip.net)
[12:16:37] <steveklabnik> if i were to teach rust with a little program that demonstrates its strengths, what should that program be?
[12:17:09] <steveklabnik> kimundi: the answer was that i grabbed the wrong side of the merge conflict
[12:17:32] <pnkfelix> steveklabnik: an imperative hash table
[12:17:32] <kimundi> pnkfelix: The german wikipedia article of shebangs has this example: #!C:\Programme und Anwendungen\Python 2.48\bin\python.exe
[12:17:50] <steveklabnik> pnkfelix: 'imperative'?
[12:17:53] <benh> now that's just rude of windows :D
[12:18:26] <kimundi> Apparently apache interprets shebangs under windows
[12:18:31] <dbaupp> kimundi: with literal spaces like that?
[12:18:37] <kimundi> yes
[12:18:42] *** Joins: vmx (vmx@moz-5B5A3C1.pools.arcor-ip.net)
[12:18:47] <dbaupp> weord
[12:18:51] <pnkfelix> steveklabnik: I guess "imperative" is usually implied when it comes to hashtables.  (But it need not be…)  I just meant something where you can mutate the mapped values in the table
[12:18:54] * dbaupp spells weird too, apparently
[12:19:01] <steveklabnik> pnkfelix: ah, gotcha
[12:19:08] <pnkfelix> steveklabnik: (but not the keys)
[12:19:31] <steveklabnik> right, makes sense.
[12:19:33] <steveklabnik> hm
[12:19:39] * kimundi always hated that windows used paths with whitespace in them for the user directory and/or the program installation folders
[12:20:15] <pnkfelix> kimundi: hmm.   I'm not sure how hard we should work to accommodate this
[12:20:26] <kimundi> pnkfelix: Anyway, I think what this amounts to is that We can'T assume anything about the structure of a shebang except the two-char "#!" prefix
[12:21:10] <pnkfelix> kimundi: what is the error condition you are expecting from apache here?
[12:21:29] <kimundi> No idea. 
[12:21:48] *** Quits: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP) (Ping timeout)
[12:22:23] *** Quits: stevekla1nik (steveklabn@701D470.129BE976.EE0D0080.IP) (Ping timeout)
[12:22:25] *** Quits: stevekla2nik (steveklabn@701D470.129BE976.EE0D0080.IP) (Ping timeout)
[12:22:46] <pnkfelix> kimundi: Well, we could back off and just choose a different character to follow the # in an inner attribute.  Sort of a shame since I felt like we had some consensus on #! ....
[12:23:55] <kimundi> Well, I don't neccessary see a problem here
[12:24:00] <pnkfelix> kimundi: (but on the other hand, I'm still not convinced the language needs to work around this issue..)
[12:24:05] <kimundi> Right
[12:24:09] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[12:24:24] <pnkfelix> kimundi: I guess my first question is: Can the #!C:\style  shebangs be rewritten using leading slashes?
[12:24:47] <benh> The lookahead for single-letter, : doesn't seem to bad either
[12:25:32] <kimundi> Well, windows uses backslashes, and a network path doesn'T neccessary contain a :
[12:25:51] <pnkfelix> kimundi: that's okay, when I said <slash> I meant it to mean either / or \
[12:26:23] <kimundi> I think any attempt to specify what format a shebang could have might be futile
[12:26:45] *** Quits: nkoep (nik@moz-A4CD7309.pool.mediaways.net) (Ping timeout)
[12:26:50] <kimundi> What's so bad with scanning multible lines ahead?
[12:27:27] <pnkfelix> kimundi: well, mostly that I thought it would make the code look ugly
[12:27:35] <pnkfelix> kimundi: in the lexer
[12:27:42] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[12:28:05] <pnkfelix> kimundi: I mean, it also just sounds bad to potentially scan to the end of the file, discover that interpretatiion was errorneous, and then restart
[12:28:14] <ChrisMorgan> A shebang like `#!rust run` would be quite valid, too. Uncommon, but quite valid.
[12:28:25] <pnkfelix> kimundi: its sort of antithetical or what a lexer is supposed to do
[12:28:40] <pnkfelix> ChrisMorgan: I had thought that, but from what I read on Wikipedia, you're not supposed to write them like that
[12:28:46] <pnkfelix> ChrisMorgan: At least, its not portable
[12:28:56] <pnkfelix> ChrisMorgan: but then again, since we're already talking about Windows paths here ...
[12:28:57] <ChrisMorgan> So? It very occasionally gets done.
[12:29:09] *** Joins: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP)
[12:29:24] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[12:29:30] * ChrisMorgan has never been quite satisfied as to why one would use `#!/usr/bin/env foo` over `#!foo`
[12:29:56] <pnkfelix> ChrisMorgan: because some OS's don't do the lookup in PATH for you
[12:30:15] * ChrisMorgan should read the Wikipedia article again
[12:30:25] <steveklabnik> computers are so hard o_O
[12:30:25] <ChrisMorgan> Haven't read that one for a couple of years.
[12:30:25] <pnkfelix> ChrisMorgan: http://en.wikipedia.org/wiki/Shebang_%28Unix%29#Portability
[12:31:00] <kimundi> pnkfelix: Maybe the best approach would be to either just outright ignore any first line starting with #!, or to switch to a different character... It's certainly a weird situation we got ourself into here
[12:31:10] <ChrisMorgan> steveklabnik: at present, but they're working on flexible screens, making computers soft and squishy probably comes next.
[12:31:15] <pnkfelix> kimundi: well, with the direction where this conversation is heading, I'm thinking more and more like we should adopt #^ attribute;  or #< attribute ;  
[12:31:36] <steveklabnik> ChrisMorgan: ahahaha :)
[12:31:43] <fhahn> dbaupp: so this `preruntime_rand_bytes` would just read from /dev/urandom (or the windows equivalent)? (sorry for the delay)
[12:31:49] <kimundi> He, yeah #^, #>, #< would make for a nice directional system :)
[12:31:55] <ChrisMorgan> #_#
[12:32:33] *** Joins: stevekla1nik (steveklabn@701D470.129BE976.EE0D0080.IP)
[12:32:38] <kimundi> Problem is, ^ looks stranger like a ! there imo, and ^ is harder to type on some layouts
[12:32:48] <dbaupp> fhahn: it would just do what new_sched_rng() does to fill `seeds` (on linux) and just call OSRng on Windows
[12:33:16] <pnkfelix> kimundi: At one point I was considering #< inner(attribute) ;   and #> outer(attribute) [item]
[12:33:39] <pnkfelix> kimundi: but that is a very different use of the sigils than what you were proposing
[12:33:46] * ChrisMorgan was trying to write Python code on someone else's machine last Friday and found that # was producing £
[12:34:12] <steveklabnik> http://www.addedbytes.com/blog/if-php-were-british/
[12:34:13] <steveklabnik> ;)
[12:34:14] <pnkfelix> ChrisMorgan: yeah, I have a UK keyboard that does that.  It also puts the ~/` next to the z, which is actually kind of nice
[12:34:25] <kimundi> Well, depends on wethter we also want to support 'suffix' attributes
[12:34:52] <pnkfelix> kimundi: right.
[12:34:57] <steveklabnik> simple question: should I be -j'ing when i make? how much? I'm on a core i7
[12:34:59] <kimundi> #> foo() mod foo { #^ bar() } #< baz()
[12:35:02] <ChrisMorgan> pnkfelix: using a UK keyboard layout was actually a mistake on his part; I left it on the US keyboard layout with his approval afterwards
[12:35:02] <pnkfelix> kimundi: There's also maybe just ## inner(attribute) ;
[12:35:08] <kimundi> yeah
[12:35:28] <kimundi> We need to think of doc comments too, though
[12:35:29] <pnkfelix> kimundi: not sure if that would make people even more upset.
[12:35:37] <kimundi> It will :P
[12:35:56] <ChrisMorgan> steveklabnik: you could -j8 if you want. It'll only help some parts of the compilation, though.
[12:36:07] <steveklabnik> word. i THOUGHT that was correct, but wasn't sure
[12:36:18] <steveklabnik> thank you
[12:36:36] <pnkfelix> kimundi: do you mean "think of doc comments" beyond what you already wrote in your comment : https://github.com/mozilla/rust/issues/2569#issuecomment-25279712
[12:37:34] *** Joins: stevekla2nik (steveklabn@701D470.129BE976.EE0D0080.IP)
[12:37:43] <pnkfelix> kimundi: also, what is the keyboard layout issue you are thinking of for #^  ?
[12:38:11] <kimundi> well, that comment already summarizes what I think could be possible if we adopted that system, but as I said there, I don't expect many people to like it
[12:38:16] <pnkfelix> kimundi: (German?  from what I read here, its also missing tilde, so it has been problems for rust …)
[12:38:24] <pnkfelix> s/been/big/
[12:39:01] <pnkfelix> (ah, estonian too maybe ...)
[12:39:12] <kimundi> pnkfelix: Well, on my current german qwertz layout under arch linux, I have to either press ^^ for one ^^to appear, or ^<SPACE>. It's a dead key, ^a results in â
[12:39:20] <kimundi> No, we have tilde
[12:39:35] <pnkfelix> kimundi: odd, that's not my impression from: http://askubuntu.com/questions/99426/no-tilde-and-no-caret-on-german-keyboard
[12:39:57] <kimundi> It's just AltGr-<a key next to the Return key>
[12:40:06] <nathan7> Hey humanoids
[12:40:22] <Yoric> Humanoid yourself.
[12:40:26] * Yoric is a bananoid.
[12:40:38] <nathan7> I'm curious what the magic incantations are for invoking .listen() on a TcpListener
[12:40:39] <nathan7> impl Listener<TcpStream, TcpAcceptor> for TcpListener { fn listen(self) -> Option<TcpAcceptor> {
[12:40:52] <nathan7> I'm trying to .listen() but getting method not in scope
[12:41:08] <ChrisMorgan> nathan7: take a look at http://stackoverflow.com/questions/17445485/example-tcp-server-written-in-rust
[12:41:14] <dbaupp> nathan7: try adding `use std::rt::io::net::Listener` to the top of the module
[12:41:15] *** Joins: nkoep (nik@moz-89FC324D.vpn.rwth-aachen.de)
[12:41:17] <ChrisMorgan> You need to `use std::rt::io::net::tcp::TcpListener;`
[12:41:18] <kimundi> pnkfelix: That askubuntu thing accurately describes the default situation I have here
[12:41:21] <nathan7> ah, Listener is a trait by itself
[12:41:24] * dbaupp hopes he got the right path
[12:41:26] <ChrisMorgan> Sorry, Listener, my mistake
[12:41:32] <kimundi> pnkfelix: Well, minus the ubuntu specific parts
[12:41:40] <nathan7> ChrisMorgan: err, that's for distant-past Rust
[12:41:41] <ChrisMorgan> std::rt::io::Listener
[12:41:47] <nathan7> ah
[12:41:52] <nathan7> the second answer seems suitable
[12:41:56] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[12:42:03] <ChrisMorgan> Yep. Sorry, I should have linked to it.
[12:42:25] <pnkfelix> kimundi: okay, i thought it said tilde, like caret, was a dead key
[12:42:30] <pnkfelix> kimundi: but whatever
[12:42:42] <kimundi> pnkfelix: Anyway, it's not really a problem, because anyone who really has a problem with that can just change his layout, but it is a inconvenience
[12:42:43] <nathan7> Sweet, thanks ChrisMorgan 
[12:43:05] <ChrisMorgan> nathan7: what are you doing with TCP?
[12:43:57] <dbaupp> kimundi: typing on a new layout just for one programming language is a big ask
[12:44:27] <kimundi> dbaupp: Sure, but the German layout is impracticable for programming in general, so I don't think we should base decisions too much on that
[12:44:51] <dbaupp> kimundi: oh, if it's not *just* rust, that's not so bad then
[12:45:18] <kimundi> I mean, {[]} is a pain too because I need to enter them with AltGr+7890. (Which is the right Alt key btw)
[12:46:45] <kimundi> I mean, just look at it: http://upload.wikimedia.org/wikipedia/commons/thumb/6/62/Qwertz_de.svg/1280px-Qwertz_de.svg.png :P
[12:46:46] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[12:47:05] <kimundi> Anything at the button right of a key needs AltGr
[12:47:25] *** Quits: pnathan1 (Adium@moz-BDC3EE62.tukw.qwest.net) (Quit: Leaving.)
[12:47:58] <ChrisMorgan> Nasty.
[12:48:15] <dbaupp> eurgh, no C-like languages, no array indexing...
[12:48:17] * kimundi personally semi-switched to the Neo layout already, but is currently stuck with teching his WM to toggle between both layouts reliably
[12:48:23] <dbaupp> no LaTeX
[12:48:45] <kimundi> Having a machine boot into the US layout sucks too xD
[12:49:00] <Amaranth> I feel like Germans must typo < and > even more than Americans with that layout
[12:49:00] <kimundi> "The 5 minute hunt of finding the / key"
[12:49:05] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:49:21] *** Joins: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca)
[12:51:16] *** Quits: pnkfelix (pnkfelix@moz-1467CA5F.bstnma.fios.verizon.net) (Quit: Leaving.)
[12:52:03] <myname> cb
[12:53:14] <nathan7> hrrm
[12:53:25] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:53:41] <ChrisMorgan> nathan7: need further help?
[12:53:47] <nathan7> ChrisMorgan: this raising errors thing
[12:54:05] <nathan7> ChrisMorgan: conditions
[12:54:24] <nathan7> ChrisMorgan: I want to catch io_errors
[12:54:47] <ChrisMorgan> http://static.rust-lang.org/doc/master/std/rt/io/index.html has an example.
[12:55:03] <steveklabnik> there's a conditions tutorial too
[12:55:36] <ChrisMorgan> http://static.rust-lang.org/doc/master/tutorial-conditions.html
[12:56:23] <nathan7> Sweet, thanks
[12:56:34] <ChrisMorgan> nathan7: conditions are acknowledged to be a bit clumsy at present. They should get a little better somewhere along the way.
[12:56:38] *** Quits: mib_ccyctg (Mibbit@moz-4058A5B9.ge-0-2-0-712.arcnqu2.dk.customer.tdc.net) (Quit: http://www.mibbit.com ajax IRC Client)
[12:57:04] *** Quits: timot (timot@moz-45B39FB4.bredband.tre.se) (Ping timeout)
[12:57:16] <kimundi> Hm, how about ## inner() # next() [item] //# inner comment /// next comment [item]
[12:57:49] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[12:58:54] <ChrisMorgan> nathan7: if you're working with 0.8 instead of master, the docs in /doc/0.8/ (instead of /doc/master/) will tend to be more accurate (though oft-times the docs will have improved since 0.8 and still be applicable for 0.8; it's mostly for questions of API changes that switching master to 0.8 will be useful)
[12:59:01] *** Joins: timot (timot@moz-45B39FB4.bredband.tre.se)
[12:59:57] <ChrisMorgan> kimundi: do we really *need* this degree of flexibility? Before, after, inside, etc. Seems to me it's the sort of thing where you can just specify certain conventions and be done with it.
[13:00:01] *** Joins: chaliy (Mibbit@ADB0F19.9A083485.A602395A.IP)
[13:01:09] <dbaupp> ChrisMorgan: we certainly need the outside (to attach to, e.g., static's which don't have an inside at all), and having inside makes documenting modules saner (i.e. documentation in the relevant file, rather than on the `mod foo;` item)
[13:01:46] *** Quits: chaliy (Mibbit@ADB0F19.9A083485.A602395A.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:03:08] <kimundi> ChrisMorgan: If you're referring to the comment on github: I explicitly wrote under it that I'm only semi-serious there. :)
[13:03:21] *** Joins: maik (maik@moz-9DF51BF7.dip0.t-ipconnect.de)
[13:03:24] <ChrisMorgan> kimundi: not particularly, just generally.
[13:03:32] <kimundi> ChrisMorgan: There exists at least one usecase for each of them
[13:03:44] <ChrisMorgan> I'll whip up an example of what I'm thinking.
[13:03:52] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:04:57] <kimundi> inner: docummenting a module from it's inside. before: applying a attribute to an item. after: comment things like struct fields in one line
[13:05:38] <kimundi> The first one is important enough that we will prbably keep it, but I don't think the third one needs to get added
[13:07:01] <eddyb> is there a way to strip the prelude checking the TLS stack limit?
[13:07:19] *** Joins: cg (Mibbit@moz-B2518FF4.cust.bredbandsbolaget.se)
[13:07:36] <dbaupp> kimundi: the first is also the only way to put documentation on a crate
[13:07:37] *** Joins: Kruppe (user@moz-EE1E894A.home3.cgocable.net)
[13:07:54] <dbaupp> (and generally attach attributes to crate)
[13:08:12] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Quit: Konversation terminated!)
[13:08:17] <kimundi> yeah
[13:08:27] <strcat> eddyb: no, why?
[13:08:59] *** Joins: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP)
[13:09:12] <strcat> if you just have rustc output LLVM bytecode you can implement your own stack safety mechanism and compile with clang
[13:09:21] <strcat> but not with rustc's backend and the stdlib
[13:09:25] <eddyb> strcat: right now it requires this ugly hack https://github.com/pcmattman/rustic/blob/master/src/start.S#L40-L47
[13:09:38] <eddyb> strcat: no std, just rustc and zero.rs
[13:09:53] <strcat> zero.rs is obsolete now fwiw
[13:10:21] <eddyb> I've heard. but it doesn't matter, it's still a barebones binary
[13:10:37] <strcat> are you using 0.8 or master?
[13:10:59] <eddyb> strcat: master
[13:12:08] <eddyb> strcat: I'm hoping I can move the asm part to at least C (preferably Rust with attributes)
[13:14:47] *** Joins: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[13:17:21] *** Quits: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca) (Ping timeout)
[13:19:26] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[13:22:59] <ChrisMorgan> kimundi, dbaupp: https://github.com/mozilla/rust/issues/2569#issuecomment-26136332
[13:24:55] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[13:25:56] *** Quits: maik (maik@moz-9DF51BF7.dip0.t-ipconnect.de) (Ping timeout)
[13:26:00] <dbaupp> ChrisMorgan: hm... I... don't like it much. very easy to misplace things and get confused
[13:26:45] <ChrisMorgan> The rules are actually pretty straightforward there: inside if it has an inside, before if it doesn't.
[13:27:04] <kimundi> Additionally, it would have to be consistent with regualr attributes, and needing to not have a whistepace between them might be annoying
[13:27:04] <dbaupp> ChrisMorgan: also, is the #[attribute] meant to apply to the module or to Foo?
[13:27:26] <ChrisMorgan> dbaupp: `#[attribute];` means the module, at present.
[13:27:41] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[13:27:45] <dbaupp> ChrisMorgan: yes, so the doc comment above it applies to what?
[13:28:00] <ChrisMorgan> The attribute. (That's possible, isn't it?)
[13:28:06] <dbaupp> no
[13:28:30] <ChrisMorgan> Oh, whoops. What's a no-inside thing that's suitable... new struct. I'll change it.
[13:28:31] <dbaupp> doc comments are just sugared attributes, and attributes can't have attributes
[13:29:00] <ChrisMorgan> True. Not sure quite what I was thinking..
[13:29:01] <ChrisMorgan> .
[13:29:05] <ChrisMorgan> Oh yes! Macros, that's it.
[13:29:09] *** Joins: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca)
[13:29:23] <ChrisMorgan> I'll admit I'm not especially fond of all of my suggestion there myself, but the rigidity that it imposes _might_ be a good thing.
[13:29:33] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[13:29:42] <dbaupp> is it possible to document a field without documenting the struct?
[13:30:03] <dbaupp> is it possible to document a no-inner item at the start of a module without documenting the module?
[13:30:42] <ChrisMorgan> The first of those questions I address slightly; answer: probably not (unless you special-case an empty doc comment).
[13:31:00] <ChrisMorgan> And yes, the same problem then applies to the no-inner item at the start of a file.
[13:31:01] <dbaupp> https://gist.github.com/huonw/e00318b31457c8c74bc2 what would things attach to?
[13:31:01] <kimundi> you can document a filed without documenting the struct
[13:31:18] * ChrisMorgan wonders whether people are likely to actually want to do that
[13:31:19] <dbaupp> kimundi: I mean, how is it done with ChrisMorgan's proposal
[13:31:23] <kimundi> ah, in ChrisMorgan's propsal you mean, nevermind
[13:31:54] *** Quits: cg (Mibbit@moz-B2518FF4.cust.bredbandsbolaget.se) (Quit: http://www.mibbit.com ajax IRC Client)
[13:32:17] <strcat> eddyb: you could be the first user of https://github.com/thestinger/rust-core ;p
[13:32:22] <strcat> but there's really not much there yet
[13:32:38] <ChrisMorgan> dbaupp: "Hello" would be on the module and "Hi" on the struct. There would be the possibility of mandating a blank line (or attributes?) before no-inner item comments and after with-inner item comments
[13:33:52] <dbaupp> ChrisMorgan: hm... the benefit this has over //! (or whatever) is that it means we only have one doc-comment leader?
[13:35:02] <strcat> I think we should just not have inner attributes/comments
[13:35:17] <strcat> the only place you need that is the crate level, and we can fix that
[13:35:56] <ChrisMorgan> This sort of thing probably shows my Python-built leanings toward enforcing good code structure, which may well not fit in with Rust's style.
[13:36:00] <strcat> no point of having two ways of doing the same thing
[13:36:09] <kimundi> Hm, it would replace simple binary decision between /// and //! with a context-dependent automatic decision. Not sure if that's a good idea.
[13:36:13] <dbaupp> strcat: putting documentation for a module in a different file is pretty weird
[13:36:22] <strcat> dbaupp: didn't say in a different file
[13:36:57] <dbaupp> strcat: if we're removing inner comments & only special casing crates, then it'll have to go on the `mod foo;` item, which is in a different file.
[13:36:58] <strcat> the crate-level documentation is still top-level
[13:37:00] <ChrisMorgan> strcat: putting doc inside an item rather than before is good for code structure perception and especially good for folding.
[13:37:16] <strcat> ChrisMorgan: it doesn't matter for code folding
[13:37:26] <strcat> code folding gets the doc comments in C++, it can get them in Rust too
[13:37:29] <ChrisMorgan> It certainly makes it *easier* for tools.
[13:37:39] <strcat> it doesn't need to be easier, it already works now :s
[13:37:49] <ChrisMorgan> And again, there's the cited precedent of Python's docstrings.
[13:38:00] <strcat> there is the cited precedent of docstrings in C/C++
[13:38:03] <bstrie> wadler's laaaaaaw
[13:38:07] <strcat> which is the *dominant* style used in the codebase
[13:38:20] <strcat> whether you prefer inner or outer ones, the rust codebase greatly prefers outer ones
[13:38:31] <steveklabnik> do you feel that my response here is accurate? https://news.ycombinator.com/item?id=6532831
[13:38:55] <strcat> and code folding can still fold them, as long as a newline between the comments/attributes and the function is forbidden
[13:38:58] <ChrisMorgan> bstrie: shush :P
[13:39:11] <strcat> if you allow a newline it doesn't mesh well with existing tools, sure
[13:39:13] <ChrisMorgan> strcat: I'm just demonstrating that there is precedent both ways.
[13:39:23] <bstrie> WAAAAADLERRRRRRR
[13:39:38] <ChrisMorgan> bstrie: this ain't Haskell, this be Rust!
[13:39:53] <bstrie> steveklabnik: in general my line is that we only resort to GC if things go cyclic
[13:40:03] <bstrie> steveklabnik: but I'm not sure if that's really our stance
[13:40:16] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[13:40:16] <steveklabnik> makes sense.
[13:40:38] <strcat> bstrie: you don't need cyclic data structures, though
[13:40:38] *** Quits: Ms2ger (Ms2ger@4C3AB550.528524A1.F15B0BB3.IP) (Ping timeout)
[13:40:44] <strcat> in C++ you don't write cyclic data structures
[13:40:54] * ChrisMorgan wonders what will be done about things like Qt where widgets have a `parent` field, making it cyclic at every level
[13:41:04] <strcat> ownership is always a tree, although you can have weak pointers going the other way
[13:41:05] <bstrie> strcat: so then weak_ptr is just useless? :)
[13:41:45] <ChrisMorgan> strcat: what would that be? WeakPtr<T>?
[13:42:00] <hansjorg> skade: I've made a small webapp for triggering Travis builds when the rust-nightly ppa is updated. Want to try adding your Travis enabled builds?
[13:42:03] <strcat> ChrisMorgan: it would be a new Rc type with weak pointer support
[13:42:05] <strcat> not a single type
[13:42:13] <strcat> StrongRc/WeakRc
[13:42:42] <strcat> I'll make it when my PR to move rc to std is accepted ;p
[13:42:43] <benh> ~child, *parent if it's a tree imo
[13:42:47] <ChrisMorgan> Oh yeah, safety is still required!
[13:43:13] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[13:43:40] <strcat> weak pointers know if what they point at was freed
[13:43:42] <strcat> they're memory safe
[13:43:51] <ChrisMorgan> strcat: as in, you'd have one StrongRc and any number of WeakRcs of the same thing, like with std::comm::stream() producing the connected Port and Chan?
[13:44:01] <strcat> ChrisMorgan: any number of StrongRc
[13:44:11] <ChrisMorgan> Guess that makes sense.
[13:44:22] <strcat> Rc is basically "StrongRc", but without support for a paired WeakRc
[13:44:27] <strcat> supporting the possibility has overhead
[13:44:28] <ChrisMorgan> Sounds good.
[13:44:36] <strcat> Rc -> 1-word overhead for the allocation
[13:44:44] <strcat> StrongRc/WeakRc -> 2-word overhead for the allocation
[13:44:53] <strcat> I don't mind putting them in the same module, the implementations are tiny anyway
[13:44:55] <ChrisMorgan> Have I ever said Rust is really cool?
[13:45:04] <strcat> ChrisMorgan: https://github.com/thestinger/rust-core/blob/master/core/rc.rs is my current Rc code
[13:45:10] <hansjorg> If anyone else are using Travis for tests and want to trigger builds for every new version of the ppa, you can test by adding your project here: http://hiho.io/rust-ci/
[13:45:17] <strcat> pretty simple
[13:45:59] <strcat> ChrisMorgan: if you use it like a unique pointer, it just has that 1-word overhead (it only refcounts on a clone)
[13:45:59] *** Joins: Adhaa (Adhaa@6B52E0A7.83764248.55CD930E.IP)
[13:46:11] <strcat> only pay refcount costs when you split ownership
[13:46:14] <eddyb> strcat: would rust-core work barebones (i.e. in a kernel) out of the box?
[13:46:19] <strcat> eddyb: yes
[13:46:23] <strcat> I separated out --cfg libc
[13:46:31] <ChrisMorgan> hansjorg: thanks! Source available?
[13:46:35] <strcat> but I'd like to make it so that stuff like Rc and Vec will be provided if you provide an allocator implementation
[13:47:46] <hansjorg> ChrisMorgan: yep, just have to clean it up a bit first (removing secret keys etc.)
[13:48:28] *** Quits: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP) (Ping timeout)
[13:48:45] <ChrisMorgan> hansjorg: thanks. You've got rust-http on.
[13:48:46] *** Quits: stevekla2nik (steveklabn@701D470.129BE976.EE0D0080.IP) (Ping timeout)
[13:48:48] *** Quits: stevekla1nik (steveklabn@701D470.129BE976.EE0D0080.IP) (Ping timeout)
[13:50:51] <eddyb> strcat: can parts of libstd be reused without copying or rewriting them?
[13:52:07] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[13:53:15] *** pmoore|lunch is now known as pmoore|away
[13:53:38] <hansjorg> ChrisMorgan: ok, cool. It just triggered a build. Travis CI only allows triggering rebuilds of existing builds, so I have to collect the results and store them
[13:54:19] <ChrisMorgan> eddyb: not properly. You could use include_str! to include the source .rs files if you were *really* feeling like cheating.
[13:54:21] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[13:54:34] *** Quits: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca) (Connection reset by peer)
[13:54:41] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[13:54:44] <hansjorg> my test projects there are failing because the rust tool was removed (rip) btw
[13:55:07] <bstrie> maybe one day it will be back. but it needs to actually be useful
[13:55:11] *** Quits: timot (timot@moz-45B39FB4.bredband.tre.se) (Ping timeout)
[13:55:11] <strcat> eddyb: not really, and libstd can only be used via dynamic linking
[13:55:45] <eddyb> strcat: I was thinking of including modules in its source
[13:56:19] *** Joins: timot (timot@moz-45B39FB4.bredband.tre.se)
[13:56:23] <dbaupp> ChrisMorgan: that's reaalllly unlikely to work unless you happen to have the exact same module structure that the module in question wants.
[13:56:36] <ChrisMorgan> dbaupp: I know.
[13:57:08] <dbaupp> ChrisMorgan: also, include_str! just creates a &'static str with the file's contents, doesn't treat it as rust source
[13:57:09] <ChrisMorgan> Actually, `#[path = ".../libstd/foo.rs"] mod foo;` would be a better path. No need for include_str! after all...
[13:57:49] <eddyb> ChrisMorgan: that's what I would do :D
[13:57:50] <ChrisMorgan> Sorry, include! is what I wanted. Besides which, it still wouldn't do, as it needs to be in a single expr (e.g. wrap the entire file in { }).
[13:58:09] *** Joins: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[13:58:14] <ChrisMorgan> eddyb: that's still cheating, but rustc should prevent you from killing yourself with it. You'll only maim yourself from time to time.
[13:58:40] *** Joins: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca)
[13:58:50] <benh> Could you put an alternative lib.rs into libstd/ that only has mod blah; items for the mods you want to keep?
[13:58:52] *** Joins: Ms2ger (Ms2ger@4C3AB550.528524A1.F15B0BB3.IP)
[13:58:53] *** Joins: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP)
[13:58:56] *** Parts: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca) ()
[13:58:58] *** Joins: stevekla1nik (steveklabn@701D470.129BE976.EE0D0080.IP)
[13:59:13] *** Joins: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca)
[13:59:16] <ChrisMorgan> You could try such a thing...
[13:59:50] *** Joins: maikeru (michael@moz-CD281E3A.compute-1.amazonaws.com)
[14:00:58] <eddyb> strcat: how is this tiny thing under cfg(libc)? https://github.com/thestinger/rust-core/blob/master/core/vec.rs
[14:02:14] <eddyb> strcat: hmm, does every function get the prelude? is it outputted by LLVM, on behalf of rustc?
[14:03:01] *** Quits: timot (timot@moz-45B39FB4.bredband.tre.se) (Ping timeout)
[14:03:30] <dbaupp> strcat: no iter?
[14:03:53] <strcat> dbaupp: not yet
[14:04:09] <strcat> eddyb: because it's not filled out yet ;p
[14:04:12] <strcat> I just made some stubs
[14:04:23] <strcat> eddyb: LLVM outputs it, yeah
[14:04:32] <strcat> there's no way to make rustc's backend not output it
[14:05:00] <eddyb> strcat: str/vec operations that don't need heap allocation should work without libc
[14:05:05] *** Joins: stevekla2nik (steveklabn@701D470.129BE976.EE0D0080.IP)
[14:05:17] *** Quits: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP) (NickServ (GHOST command used by stevekla2nik))
[14:05:22] *** Joins: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP)
[14:05:24] <strcat> eddyb: vec.rs is going to be a heap-allocated vector
[14:05:27] <strcat> the slice operations will be elsewhere
[14:05:39] *** Quits: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP) (NickServ (GHOST command used by stevekla2nik))
[14:05:44] *** stevekla2nik is now known as steveklabnik
[14:06:12] <benh> How set are we on having to "use" impls explicitly, anyway?
[14:06:37] <strcat> benh: what do you mean?
[14:06:38] <benh> I think without the prelude I'd despair trying to figure out what I need for some random vec operation
[14:06:40] <eddyb> strcat: oh, @ is reserved for GC, Vec<T> would be something like Rc<[T]>, right?
[14:06:48] *** Joins: timot (timot@moz-45B39FB4.bredband.tre.se)
[14:06:53] <strcat> eddyb: Vec<T> would be like ~[T]
[14:07:06] <strcat> I'm not going to add support for ~[T] because it's too slow/complex to be useful
[14:07:15] <strcat> and I plan on replacing it in the compiler eventually
[14:07:34] <strcat> if the stdlib isn't there, there's no reason to be cursed with a slow vector though ;p
[14:07:37] <dbaupp> strcat: did you track down the cause of that recent vec perf regression?
[14:07:42] <strcat> dbaupp: no
[14:08:00] <eddyb> strcat: why is ~[T] slower?
[14:08:04] <benh> strcat: I can only remember that a bunch of functions work like "myvector.foo()", I can't remember what trait they're from, so without the prelude already use'ing all the traits I'd be lost
[14:08:05] <strcat> eddyb: because it
[14:08:08] <strcat> it's poorly designed*
[14:08:19] <dbaupp> strcat: do you have a testcase? because you could probably convince cmr to bisect to the PR with his 1 million rustc builds.
[14:08:26] <benh> which makes me afraid of using third-party types with complicated trait/method sets, especially if we get rid of glob imports
[14:08:38] <strcat> benh: the only reason there are all those traits is because of a bug
[14:08:49] <strcat> we're unable to defines impls directly on built-in types
[14:09:11] <benh> I thought that's just the rule for built-in types
[14:09:16] <benh> or impls
[14:09:18] <strcat> no
[14:09:20] <strcat> it's a bug
[14:09:25] *** Joins: clusterfoo (computer@moz-A81F9872.cable.teksavvy.com)
[14:09:26] <strcat> it only applies to built-in types
[14:09:37] <strcat> libstd should be able to add impls for built-in types
[14:09:38] <benh> Should anyone be able to define impls on built-in types or just libstd?
[14:09:40] <benh> ok
[14:09:58] *** Joins: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[14:10:18] <steveklabnik> http://www.reddit.com/r/rust/comments/1o7h3u/question_rustpkg_examples/ccpigzs <- if someone knows this...
[14:10:26] *** Joins: stevekla2nik (steveklabn@701D470.129BE976.EE0D0080.IP)
[14:10:43] <eddyb> strcat: although, a kernel has a heap, it just isn't functional immediately. so I would have either a static heap in .data, before the stack, before the proper one starts working, or just abort is a heap alloc is performed before it's initialized
[14:11:16] <strcat> eddyb: I'm going to make it so that stuff like Rc is available if you define the exchange allocator yourself
[14:11:36] <strcat> but I'll do it as-needed
[14:11:51] *** Quits: timot (timot@moz-45B39FB4.bredband.tre.se) (Ping timeout)
[14:12:08] *** Joins: timot (timot@moz-45B39FB4.bredband.tre.se)
[14:12:44] *** pmoore|away is now known as pmoore
[14:12:46] <strcat> dbaupp: any idea if we have an or() operator for cfg() yet?
[14:12:47] <dbaupp> steveklabnik: answered as I understand it
[14:12:57] <steveklabnik> <3
[14:12:57] <dbaupp> strcat: #[cfg(foo)] #[cfg(bar)] is or(foo, bar)
[14:13:10] <strcat> ah
[14:13:33] <strcat> anyway going to write StrongRc/WeakRc now
[14:13:38] <eddyb> strcat: so what's the deal with ~[T]? I'm really curious, if you don't mind. what operations are slow, and why?
[14:13:54] <strcat> eddyb: https://github.com/mozilla/rust/issues/8981
[14:14:09] <eddyb> strcat: oh, thanks :D
[14:14:10] *** Quits: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP) (Ping timeout)
[14:14:11] <dbaupp> steveklabnik: (crates are still "in favour", 'crate' is just the word for a rust compilation unit, either executable or library)
[14:14:11] <strcat> eddyb: it stores the length/capacity inside the allocation for legacy reasons
[14:14:17] <strcat> and that means it has to do extra calculations everywhere
[14:14:30] <strcat> even indexing is a bit (not really measurably) slower
[14:15:01] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[14:16:02] <steveklabnik> dbaupp: just read it, makes sense. i guess .rc isn't a crate, heh
[14:16:25] <strcat> we don't use .rc anymore
[14:16:26] <eddyb> strcat: I was afraid of changes to the different pointers... and I would rather be able to change the implementation of @T to Rc<T> than use Rc<T> directly
[14:16:28] <dbaupp> steveklabnik: nope, it's just the old way of marking a crate file
[14:16:38] <dbaupp> (well, "yes you are correct, ...")
[14:16:39] <steveklabnik> strcat: right
[14:16:41] <strcat> eddyb: the @ syntax is very likely going to be removed
[14:16:44] <steveklabnik> yeah, i got it, dbaupp  :)
[14:16:52] <strcat> eddyb: and @ is a very bad design for reference counting
[14:16:59] <strcat> because it doesn't have move semantics and has a 4-word header
[14:17:17] <eddyb> pffft :(
[14:17:26] <strcat> Rc has a 1-word header (count) and passing it around by-value is just a cheap ptr copy
[14:17:36] <strcat> it *only* does a reference count when you split ownership with clone
[14:17:36] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:17:54] *** jorendorff_away is now known as jorendorff
[14:17:54] <strcat> let x = @5; foo(x)
[14:17:59] <strcat> does a refcount when you pass it to foo
[14:18:03] <skade> hansjorg interesting, where can i find it?
[14:18:07] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[14:18:15] <strcat> and ofc, it won't be freed until `x` is gone, even if foo passes it very deep and drops the ref
[14:18:29] <hansjorg> skade: http://hiho.io/rust-ci/
[14:18:38] <strcat> @ will just go away though
[14:18:54] <eddyb> strcat: yeah, that's cool, but I really like having equivalents to unique_ptr and shared_ptr in the language itself...
[14:18:58] *** Quits: timot (timot@moz-45B39FB4.bredband.tre.se) (Ping timeout)
[14:19:17] <strcat> eddyb: well, we don't have an equivalent to shared_ptr in the language
[14:19:17] <cmr> hansjorg: very cool! nice work.
[14:19:24] *** Joins: timot (timot@moz-45B39FB4.bredband.tre.se)
[14:19:36] <eddyb> strcat: isn't Rc precisely that?
[14:19:39] <Amaranth> eddyb: @ is supposed to be some form of GC, not shared_ptr
[14:19:48] <strcat> eddyb: not really
[14:20:00] <Amaranth> Rc is pretty close
[14:20:05] <kimundi> eddyb: I understand that sentiment, but there are N different ways you can implement a shared_pointer. ~T as uniqe_ptr will remain though
[14:20:07] <strcat> shared_ptr uses atomic reference counting (like Arc) but is mutable without dynamic checks (unsafe), and supports weak pointers
[14:20:17] *** Quits: Kruppe (user@moz-EE1E894A.home3.cgocable.net) (Client exited)
[14:20:29] <Amaranth> Oh, right, forgot shared_ptr was atomic
[14:20:34] <Amaranth> Mostly because that isn't very useful :D
[14:20:38] *** Joins: Kruppe (user@moz-EE1E894A.home3.cgocable.net)
[14:20:47] <hansjorg> cmr: still a bit rough around the edges. going to add some stats which will make it more useful
[14:20:57] <strcat> Rc is immutable (you'd use Mut<T> inside it), is task-local (no atomic refcounting) and doesn't have weak ptrs
[14:21:03] <skade> hansjorg very useful, thanks :)
[14:21:06] <kimundi> What's important is that we make the interfaces for Rc, Gc, StrongRc, WeakRc, Arc, etc as compatible as possible
[14:21:20] <benh> strcat: Can't we have inherited immutability for Rc too?
[14:21:25] <strcat> benh: no
[14:21:31] <strcat> it has multiple owners, it can't inherit
[14:21:41] <strcat> and multiple owners + mutability is unsafe, without dynamic checks
[14:22:17] <strcat> let x = Rc::new(5); let mut y = x.clone();
[14:22:22] <strcat> one owner is immutable, one is mutable
[14:22:30] <cmr> strcat: do you have something you want me to bisect?
[14:22:49] <strcat> cmr: https://github.com/mozilla/rust/issues/8981#issuecomment-26140224 if you want
[14:23:01] <strcat> cmr: you can use the benchmark in that issue to test
[14:23:23] <strcat> less than 7k ns/iter before, and now nearly 30k
[14:23:29] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[14:23:31] <cmr> will do
[14:23:40] <strcat> I have the daily packages so I can see that it regressed between those
[14:24:13] <strcat> I would not be surprised if it was the bench harness that got slower or was changed somehow
[14:24:31] <strcat> it doesn't seem like the IR is different in any way beyond constants being renumbered, etc.
[14:25:40] <cmr> Is g6db8899 the last good change?
[14:25:55] <strcat> yes
[14:26:19] <strcat> cmr: git will happily accept those 0.8-331-g6db8899 version strings btw
[14:26:24] <cmr> oh cool
[14:26:32] <strcat> they're from git describe
[14:27:07] <strcat> means 0.8 was the last tag, 331 commits added since then, and the commit id prefixed with 'g'
[14:27:25] <benh> strcat: I guess I meant constness; I feel weird about having an Rc<Mut<T>> in an immutable location and being able to mutate the T
[14:27:58] *** Quits: timot (timot@moz-45B39FB4.bredband.tre.se) (Ping timeout)
[14:28:06] *** Joins: huddler (Mibbit@3BA8656D.F04AFED0.49B48A1E.IP)
[14:28:10] <strcat> Mut<T> provides mutability in an immutable location
[14:28:30] <strcat> it doesn't matter where Rc is, the contained thing is always in an immutable location
[14:28:42] <strcat> semantically at least
[14:29:11] <strcat> immutability doesn't really exist at runtime beyond putting PROT_NONE on pages ;p
[14:29:26] <skade> hui, globs got marked experimental? I have a lot of cleanup to do tonict :)
[14:29:29] <strcat> the box itself has the refcount in it, so it's obviously only semantically immutable
[14:29:44] <benh> Yeah, but "all Rc<Mut< >> contained things are mutable through any Rc<Mut< >>, even if the Rc itself is immutable" feels unnecessarily strong, I dunno :(
[14:30:02] <strcat> benh: that's what Mut<T> would do
[14:30:04] <strcat> it's not specific to Rc
[14:30:18] <strcat> it has no ties to Rc at all - you can put it on a field, or deeper inside the object
[14:30:37] <benh> Yeah, what I'm saying is I'd like to see a way to have an Rc box that is mutable when the Rc is mutable but not always
[14:30:49] <strcat> benh: that can't exist
[14:30:54] <strcat> Rc has multiple owners
[14:30:59] <strcat> it's not possible to implement what you want
[14:31:15] <benh> Is it better if I say non-const instead of mutable
[14:31:21] <benh> like talking about the reference
[14:31:22] <dbaupp> skade: you can put #[feature(globs)] on your crates to avoid the cleanup :)
[14:31:23] *** Joins: timot (timot@moz-45B39FB4.bredband.tre.se)
[14:31:24] *** Quits: AlisonW (AlisonW@moz-7CEB14F7.hari.cable.virginmedia.com) (services.mozilla.org (Too many invalid passwords))
[14:31:32] *** Joins: AlisonW (AlisonW@moz-7CEB14F7.hari.cable.virginmedia.com)
[14:31:34] *** Quits: stevekla1nik (steveklabn@701D470.129BE976.EE0D0080.IP) (Ping timeout)
[14:31:39] <strcat> benh: no, because it doesn't change anything
[14:31:40] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[14:31:42] *** Quits: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP) (Ping timeout)
[14:31:53] *** Quits: stevekla2nik (steveklabn@701D470.129BE976.EE0D0080.IP) (Ping timeout)
[14:32:00] <strcat> if a type is Freeze, it inherits mutability or is always immutable
[14:32:00] <cmr> strcat: which of the testcases should I be looking at for regression?
[14:32:02] <skade> dbaupp I tend to avoid feature-switches
[14:32:18] <strcat> cmr: push_preallocated
[14:32:27] <skade> i hated them in haskell, I don't want to go down that road in other languages
[14:32:32] <strcat> cmr: it should be pretty obvious, it's 6000 -> 20000/30000 ;p
[14:34:11] <cmr> 6c2cdb3
[14:34:24] <cmr> #9771
[14:34:39] <cmr> #9772, sorry
[14:35:07] <strcat> acrichto: ping
[14:35:12] <benh> strcat: sorry, it just feels weird to me, like before we got rid of mut fields in structs :(
[14:35:16] *** Quits: timot (timot@moz-45B39FB4.bredband.tre.se) (Ping timeout)
[14:35:22] <strcat> benh: I'm not sure why you find it weird
[14:35:29] <strcat> Freeze -> follows the mutability rules
[14:35:35] <strcat> non-Freeze -> explicitly doesn't follow them
[14:35:40] <strcat> if you don't want non-Freeze stuff, don't use it
[14:35:42] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Quit: 랜덤은 쇠퇴했습니다.)
[14:35:50] <acrichto> strcat: pong
[14:35:56] <strcat> there is no way to implement mutability within Gc/Rc in a way that respects Freeze
[14:36:00] <dbaupp> cmr: the jemalloc one??
[14:36:02] <strcat> it's *not possible*
[14:36:14] <cmr> dbaupp: yes.
[14:36:15] <strcat> acrichto: I think something went wrong with https://github.com/mozilla/rust/pull/9772 like not optimizing jemalloc anymore
[14:36:22] <strcat> acrichto: major regression in my vector benchmarks
[14:36:28] *** Joins: timot (timot@moz-45B39FB4.bredband.tre.se)
[14:36:51] <acrichto> strcat: hmmmm that's interesting
[14:37:33] <acrichto> strcat: does bisection point at that?
[14:37:38] <cmr> acrichto: yes
[14:37:48] * dbaupp wishes https://github.com/mozilla/rust/issues/9436 was done so IRFY would pick these things up
[14:37:49] <strcat> it's a pretty big regression
[14:38:46] <cmr> The pref traces are very near identical
[14:39:27] <cmr> And almost all of it's in the kernel
[14:39:30] <strcat> cmr: yeah but it's clearly visible in the numbers, right?
[14:39:34] <cmr> yup
[14:40:06] <benh> strcat: If I have an object that shares some state, via Rc or something, with other objects, I'd like to be able to mutate the shared state through my object if my object is mutable, but be protected from accidentally mutating it otherwise. I guess it doesn't work with a strict mutable vs immutable worldview with no &const :/
[14:40:45] <strcat> benh: rust's mutability model doesn't have that, even with &const
[14:40:53] <strcat> the Rc owns the interior value
[14:41:16] <benh> weird!
[14:41:18] <strcat> Rc has multiple owners, so there's nothing inherited
[14:42:42] <benh> Rc could refuse to give up a mut reference to the boxed value if I don't provide a mut reference to the Rc itself, though, right?
[14:42:52] <strcat> Rc never gives a mut reference
[14:42:54] <strcat> it's always immutable
[14:43:02] <benh> ugh! right!
[14:43:05] <kimundi> I guess you could always write a struct ConstRc<T> { priv data: Rc<Mut<T>> } ?
[14:43:24] <kimundi> With an interface that doesn't allow you to mutate it through the ConstRc ?
[14:43:32] <benh> I suppose
[14:43:37] <strcat> kimundi: useless, though
[14:45:08] <benh> I'm tempted towards RcMut<T> rather than Rc<Mut<T>> I guess
[14:45:11] <strcat> the definition of what Mut<T> does is subvert the inherited mutability system
[14:45:22] <strcat> benh: RcMut is always mutable
[14:45:27] <kimundi> strcat: Useless how? It doesn't add new capabilities, that's true, it just hides API that you might as well just see and not use. Wouldn'T call that useless though...
[14:45:29] <strcat> whether or not it's in a mutable location
[14:45:34] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[14:45:40] <strcat> kimundi: it's useless because it doesn't hide API details
[14:45:47] <acrichto> strcat: looks like the other big change in that git range you mentioned was dbaupp's random stuff
[14:45:55] <strcat> acrichto: cmr bisected it though
[14:46:00] <acrichto> ah, nvmd
[14:46:07] <acrichto> oh I'm getting emails on a serious delay
[14:46:11] <strcat> acrichto: I don't understand why it regressed
[14:46:14] <strcat> just pointing out that it did ;p
[14:46:39] <acrichto> yeah that's not good, looking into it
[14:46:44] <benh> strcat: But it could be made to not be that way because it doesn't have a Mut inside, so it could require a &mut self method to hand out a mutable borrow to the interior?
[14:46:45] <acrichto> we may just not be using jemalloc at all
[14:47:02] <kimundi> strcat: Not talking about details. "A ConstRc offers a read-only access to an underlying Rc<Mut<T>>. Other Rc<Mut<T>> handles to the same data can still mutate it"
[14:47:02] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[14:47:23] <dbaupp> cmr: is it fast if you LD_PRELOAD=jemalloc (or whatever the invocation is)?
[14:47:27] <kimundi> The same as &const, really
[14:47:28] <strcat> acrichto: I'm pretty sure we're still using jemalloc
[14:47:30] <strcat> dbaupp: no, I've tried that
[14:47:35] *** Joins: earlz2 (earlz@3BA8656D.F04AFED0.49B48A1E.IP)
[14:47:42] <dbaupp> strcat: and it's still slow?
[14:47:47] <strcat> dbaupp: same numbers
[14:47:53] *** Quits: huddler (Mibbit@3BA8656D.F04AFED0.49B48A1E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:47:54] <cmr> The jemalloc symbols are still in the perf trace, too
[14:47:55] <strcat> our allocator overrides an LD_PRELOAD allocator afaik
[14:48:15] <strcat> it better, because I want to use jemalloc's experimental API eventually
[14:48:23] <cmr> it's statically linked, so yes.
[14:48:47] <acrichto> at least it should be :P
[14:48:59] *** Joins: jordyd (jordyd@moz-DE1918CB.seg43.ucf.edu)
[14:49:02] <strcat> The rallocm() function resizes the allocation at *ptr to be at least size bytes, sets *ptr to the base address of the allocation if it moved, and sets *rsize to the real size of the allocation if rsize is not NULL. If extra is non-zero, an attempt is made to resize the allocation to be at least size + extra) bytes, though inability to allocate the extra byte(s) will not by itself result in
[14:49:03] <strcat> failure. Behavior is undefined if size is 0, or if (size + extra > SIZE_T_MAX).
[14:49:20] <strcat> so you can set the capacity to the *real* size it reallocated to
[14:49:27] <strcat> in a vector impl
[14:51:16] <strcat> kimundi: it wouldn't really be like &const
[14:51:19] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[14:51:27] <strcat> it would be like @mut
[14:51:48] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[14:52:00] *** Joins: Jackneill (Jackneill@moz-5C6C0907.pool.digikabel.hu)
[14:52:07] <strcat> just with mutation taking &mut self
[14:52:19] *** Joins: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP)
[14:52:30] * strcat doesn't really get the point at all
[14:52:51] <strcat> you know you can edit through &mut pointers when they're in an immutable location too... right?
[14:52:55] *** Joins: stevekla1nik (steveklabn@701D470.129BE976.EE0D0080.IP)
[14:52:57] *** Joins: stevekla2nik (steveklabn@701D470.129BE976.EE0D0080.IP)
[14:53:02] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:53:10] <strcat> rusti: let x = &mut 5; *x = 10; *x
[14:53:11] -rusti- 10
[14:53:22] <strcat> rusti: let x = &mut 5; *x = 10; *x
[14:53:23] -rusti- 10
[14:53:30] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[14:53:31] <benh> oh, last i checked you couldn't do anything with &mut pointers in an immutable location
[14:53:35] <strcat> you always could
[14:53:57] *** Quits: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP) (Client exited)
[14:54:03] <strcat> fn foo(x: &mut int) { *x = 10; } let mut x = 5; foo(&mut x); x
[14:54:06] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:54:10] <strcat> the parameter isn't mutable
[14:54:27] <strcat> it will yell about it if it was
[14:54:29] <strcat> rusti: fn foo(mut x: &mut int) { *x = 10; } let mut x = 5; foo(&mut x); x
[14:54:30] -rusti- <anon>:9:20: 9:21 warning: variable does not need to be mutable, #[warn(unused_mut)] on by default
[14:54:30] -rusti- <anon>:9          fn foo(mut x: &mut int) { *x = 10; } let mut x = 5; foo(&mut x); x
[14:54:30] -rusti-                              ^
[14:54:30] -rusti- 10
[14:55:11] <strcat> &mut isn't Freeze
[14:55:18] <kimundi> strcat: I'm just talking about what benh wanted: Having a read-only handle to something mutable through which itself you're not allowed to mutate it, but without making any guarantees as to whether it might get mutated by someone else or is currently borrowed by someone else.
[14:55:35] <strcat> but &mut exists and it's how you would mutate it at all
[14:55:52] <kimundi> Well, that might not be exactly what benh wanted, but anyway.
[14:55:56] <eddyb> strcat: if I were reading everything, I might go nuts
[14:56:49] <acrichto> cmr: do you you have profiles for before/after the buildsystem commit?
[14:56:51] <kimundi> strcat: Maybe I'm misunderstanding. A Mut<T> would allow you either N &T borrows or one &mut T at a time, right?
[14:57:04] <cmr> acrichto: yes, want the perf data?
[14:57:28] <acrichto> cmr: yeah I'm curoius
[14:57:56] <kimundi> Enforced with dynamic checks etc
[14:57:58] <cmr> acrichto: http://octayn.net/benches/ perf_*
[14:58:02] <strcat> rusti: let x = &mut 5; *x = 10; *x
[14:58:03] -rusti- 10
[14:58:08] <strcat> kimundi: the `x` variable isn't mutable
[14:58:15] <acrichto> cmr: 403 forbidden
[14:58:21] <cmr> oops
[14:58:24] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:58:32] <kimundi> I... know? I don'T see how that is relevant here.
[14:58:52] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[14:58:58] <benh> It surprised me!
[14:59:00] <cmr> acrichto: fixed
[14:59:02] <benh> I'm gonna change my story to "Freeze is clearly evil" and I'll be back once I have figured out why ;)
[14:59:03] <kimundi> I might confuse my terminology all the time, so sorry If I'm confusing to understand
[14:59:06] <benh> err, non-Freeze
[14:59:11] <strcat> so how are you going to introduce the type of mutability he wants, if the lowest-level way of having a mutable reference doesn't work that way? ;p
[14:59:16] *** Joins: bent|away (chatzilla@moz-8913BD79.midsouth.biz.rr.com)
[14:59:23] <strcat> benh: rust's mutability is about memory safety
[14:59:26] <strcat> and it's based on ownership
[14:59:34] <kimundi> strcat: I'm not talking about introducing that kind of mutability
[14:59:42] *** bent|away is now known as bent
[14:59:47] <benh> I think I'm slowly catching on, yeah
[15:00:17] <bstrie> strcat: 
[15:00:19] <bstrie> bleh
[15:00:20] <benh> rusti: let x = & &mut 5; **x = 10; **x
[15:00:21] -rusti- pastebinned 7 lines of output: http://sprunge.us/GjJX
[15:00:22] <acrichto> cmr: thanks
[15:00:36] <bstrie> strcat: http://www.reddit.com/r/rust/comments/1nx0ev/a_demonstration_of_linktime_optimization_while/ has a question about that LTO wiki page, if you have a moment
[15:00:37] <kimundi> I'm talking about allowing for "Not being allowed to mutate it through this handle, even though other handles can mutate it"
[15:00:39] <strcat> benh: that's a special case for &
[15:00:47] <bstrie> it's one of those questions that I'm also curious to know the answer to :)
[15:02:31] <dbaupp> "!!! (resolving module in lexical scope) module wasn't actually a module!"
[15:02:32] <dbaupp> wat
[15:03:01] <strcat> bstrie: answered
[15:04:34] *** Quits: sk (sk@moz-82E9BD64.dynamic.vega-ua.net) (Input/output error)
[15:04:41] <strcat> bstrie: also edited in one more thing ;p
[15:04:45] <acrichto> cmr: could you run 'perf diff' between the two and give me the output? I don't have symbols :(
[15:05:09] <cmr> whoa, I didn't know perf diff was a thing
[15:05:32] <acrichto> I didn't know 'perf' was a thing :P
[15:05:38] *** Joins: dherman (dherman@1BB0349.FEF91D35.59163313.IP)
[15:05:38] *** ChanServ sets mode: +ao dherman dherman
[15:05:39] <cmr> heh
[15:05:42] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[15:05:55] <cmr> acrichto: http://ix.io/8q0
[15:05:56] <dbaupp> rusti: impl Huh {}
[15:05:57] -rusti- pastebinned 6 lines of output: http://sprunge.us/LZOg
[15:06:00] <dbaupp> acrichto: ^
[15:06:11] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[15:06:27] <cmr> acrichto: cycles probably isn't the most interesting metric here
[15:06:32] <acrichto> dbaupp: that's interesting... what pass was that in?
[15:07:11] <acrichto> cmr: actually what's the bench that you're looking into, I think I'm just gonna build to builds and tests locally
[15:07:27] <cmr> acrichto: https://github.com/mozilla/rust/issues/8981
[15:07:46] <cmr> I ran perf record ./bench --bench preallocated
[15:07:56] <acrichto> and the oh ok
[15:08:21] <dbaupp> acrichto: hm? "pass"?
[15:08:36] <acrichto> dbaupp: as in stack trace
[15:09:06] <dbaupp> acrichto: the "resolving module in lexical scope" one?
[15:09:22] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[15:09:38] <acrichto> hmm nothing comes immediately to mind, filing a bug I think is fine
[15:09:40] <strcat> rusti: 2 + 2
[15:09:40] -rusti- 4
[15:09:57] * strcat doesn't like the style change for notices in weechat 0.4.2
[15:10:04] <strcat> guess I'll turn off that feature ;p
[15:10:30] *** Joins: eholk (eholk@2BA6FFA2.FC9BEE08.51B6877.IP)
[15:10:37] <benh> :(
[15:10:44] <strcat> I mean in weechat
[15:10:50] <benh> oh :)
[15:11:06] <strcat> it puts the channel name now but.... that already seems obvious by it being in the channel? :|
[15:11:31] <cmr> It should just be a setting in irc.look, or weechat.look, wherever they keep that
[15:11:39] <strcat> it is
[15:11:41] <benh> irssi does it too, but it never bothered me enough to figure out how to edit the theme or something
[15:11:51] <strcat> hm, maybe
[15:15:50] *** Joins: pnkfelix (pnkfelix@moz-1467CA5F.bstnma.fios.verizon.net)
[15:15:50] *** ChanServ sets mode: +o pnkfelix
[15:16:32] <xAndy> is there a way to borrow an owned pointer in a match statement?
[15:16:47] *** Quits: Guest (textual@34641662.FB4DE631.66C78B76.IP) (Quit: Textual IRC Client: www.textualapp.com)
[15:16:50] <strcat> as in borrowing ~T as &T? yes
[15:17:05] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[15:17:32] <strcat> rusti: let x = ~5; let ~y = x; y
[15:17:33] -rusti- 5
[15:17:35] <xAndy> i have a enum with Foo(~fn())
[15:17:45] <strcat> ~fn isn't an ~T
[15:17:53] <strcat> and afaik ~fn is being removed
[15:18:18] <strcat> rusti: let x = ~5; let ~ ref y = x; *y
[15:18:18] -rusti- 5
[15:19:43] <xAndy> didn't know about the ref keyword thanks
[15:20:24] <strcat> can also get by-mut-ref bindings from patterns by adding a 'mut'
[15:20:58] <strcat> one day I need to go back and overhaul std::trie and extra::treemap with them.... it didn't work when I wrote them
[15:21:41] *** Quits: stevekla2nik (steveklabn@701D470.129BE976.EE0D0080.IP) (Quit: bye)
[15:21:49] <kimundi> still, going ~fn() -> &fn() at the moment should work, right?
[15:22:04] <xAndy> the ref keyword is hard to find in the manual. maybe it should be explained'/showed in the tutorial?
[15:22:22] <xAndy> you find it only in the syntax expression and in one sentence in the manual
[15:22:22] <strcat> xAndy: yeah, the tutorial/manual are overall pretty awful
[15:22:32] <strcat> there are good parts, but they're the exception
[15:22:50] <xAndy> except the ref keyword i found everything i needed so far :)
[15:23:10] *** Quits: jaen (jaen@moz-55AE6C19.eduroam.elte.hu) (Ping timeout)
[15:24:22] <strcat> the low point of the tutorial is the totally inaccurate coverage of strings/vectors
[15:24:32] <strcat> 'Like other types in Rust, vectors can be stored on the stack, the local heap, or the exchange heap.' *cries*
[15:24:54] *** Quits: eholk (eholk@2BA6FFA2.FC9BEE08.51B6877.IP) (Ping timeout)
[15:25:12] <benh> rusti: let (a, b, c) = ("foo", @"foo", ~"foo");
[15:25:13] -rusti- pastebinned 10 lines of output: http://sprunge.us/jiHN
[15:25:24] <benh> ok that's not really on the stack
[15:25:39] <strcat> [1, 2, 3] isn't either
[15:25:44] <strcat> it's just unboxed, you can put it anywhere
[15:25:53] *** Quits: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP) (Ping timeout)
[15:25:55] <strcat> in a local variable on the stack? sure - but you can stick it in a heap allocation too
[15:26:12] *** Joins: eholk (eholk@6E5D3D97.7EDA02CF.51B6877.IP)
[15:26:12] <strcat> and there's no such thing as an exchange heap vs. a local heap
[15:26:21] *** Quits: stevekla1nik (steveklabn@701D470.129BE976.EE0D0080.IP) (Ping timeout)
[15:26:26] <strcat> if there *was* a garbage collector for @, an ~ containing an @ would be on the gc'ed heap
[15:26:51] <strcat> so even if there was a local "heap" (a large allocation managed by a task-local gc), it's not accurate
[15:27:27] *** Joins: maik (maik@moz-9DF51BF7.dip0.t-ipconnect.de)
[15:27:43] <strcat> yay bad documentation ;p
[15:30:04] *** pmoore is now known as pmoore|away
[15:31:18] *** Quits: eholk (eholk@6E5D3D97.7EDA02CF.51B6877.IP) (Quit: eholk)
[15:32:23] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[15:34:30] <benh> it's a semantic heap, not a real one!
[15:34:34] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[15:39:30] <strcat> benh: it's wrong semantically though :)
[15:39:54] <strcat> it's sort of an explanation by analogy where the analogy is more complex than what you're explaining
[15:40:12] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[15:41:43] <benh> strcat: "the exchange heap is like a burrito"
[15:42:03] *** Quits: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Quit: Konversation terminated!)
[15:42:12] *** Joins: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[15:42:22] <bstrie> benh: nonono, the exchange heap is like a monad.
[15:42:30] <strcat> thankfully the Boxes section is great now
[15:42:39] <strcat> I no longer have to explain ~ to people here!
[15:42:45] <bjz> hah
[15:42:53] * bjz has to look
[15:42:59] <bjz> in the tute?
[15:43:01] <strcat> I rewrote it for the nth time
[15:43:03] <strcat> bjz: yeah
[15:43:56] <bjz> hah
[15:44:04] *** Quits: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Ping timeout)
[15:44:13] <bjz> yeah, it's difficult to get these things right
[15:44:28] <bjz> glad you're tking the time :)
[15:47:23] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[15:47:48] <bjz> strcat: it says ~ has a destructor that cleans up the allocation. does that mean it's almost like ~T impls Drop?
[15:47:56] <strcat> bjz: yes
[15:48:10] <bjz> does ~T impl Drop?
[15:48:19] <strcat> well it doesn't actually count as implementing Drop
[15:48:24] <acrichto> strcat cmr: I don't think the bisection worked, or there's no regression on osx, there's no difference between 6c2cdb3 and 6db8899 for me
[15:48:25] <strcat> but it should
[15:48:43] <bjz> strcat: yeah was just an interesting thought
[15:48:52] <strcat> bjz: ~T has properties that are different from just T: pointer-size, and has a destructor
[15:48:53] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[15:48:57] <bjz> strcat: I don't know enough about it
[15:49:00] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[15:49:03] <bjz> ok
[15:49:04] <strcat> has 2 properties*
[15:49:27] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[15:49:29] <strcat> acrichto: what are the numbers you get?
[15:49:42] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Connection reset by peer)
[15:49:51] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[15:49:54] <acrichto> strcat: which benchmark again?
[15:49:59] <strcat> acrichto: all of them
[15:50:05] *** Quits: nkoep (nik@moz-89FC324D.vpn.rwth-aachen.de) (Ping timeout)
[15:50:24] <acrichto> strcat: https://gist.github.com/alexcrichton/6937140
[15:50:46] <strcat> yeah that's what it's supposed to look like
[15:51:26] *** Joins: threecreepio (jdp@moz-627F18B2.bredband.comhem.se)
[15:51:45] *** Joins: alan (alan@moz-FE02DD30.sat6.rackspace.com)
[15:51:46] <strcat> but it seriously regressed on linux ;[
[15:51:46] *** Joins: steffenomak (steffenoma@moz-FB0A4BEB.student.uu.se)
[15:51:57] *** Quits: pnkfelix (pnkfelix@moz-1467CA5F.bstnma.fios.verizon.net) (Quit: Leaving.)
[15:52:02] <strcat> test bench::push ... bench: 31304 ns/iter (+/- 2222)
[15:52:04] <strcat> test bench::push_preallocated ... bench: 27032 ns/iter (+/- 2576)
[15:52:06] <strcat> test bench::push_preallocated_std ... bench: 63047 ns/iter (+/- 3335)
[15:52:08] <strcat> test bench::push_std ... bench: 77382 ns/iter (+/- 12231)
[15:52:10] <strcat> what it is now
[15:52:28] <strcat> push_preallocated is 5x slower than it was before
[15:52:29] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Ping timeout)
[15:52:38] <acrichto> strcat: it may just not be that commit
[15:52:46] <acrichto> as in I would expect osx to regress as well
[15:52:56] <acrichto> lemme check that
[15:54:05] <acrichto> strcat: whoa maybe it is just linux, my numbers are nowhere near that slow
[15:54:18] <acrichto> bench::push == 13k on rustc 0.9-pre (6ad1d0f 2013-10-10 16:26:20 -0700)
[15:57:10] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:58:54] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[16:00:36] <strcat> acrichto: I guess we do something seriously wrong on linux
[16:01:01] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[16:01:13] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[16:01:29] <adridu59> greetings, how do I go about building only the rust doc?
[16:01:36] <strcat> if we didn't silence the make commands I'd be able to tell more easily ;p
[16:01:38] <adridu59> tried make doc, does not work
[16:02:02] <kimundi> make docs ?
[16:02:10] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[16:02:13] <adridu59> nope :(
[16:02:34] <bstrie> adridu59: are you trying to build the rust documentation, or are you trying to build the tool called rustdoc? :P
[16:02:42] <strcat> there isn't a target to build just the docs
[16:02:48] <adridu59> hm the rust documentation
[16:03:07] <kimundi> pretty sure there used to be?
[16:03:08] <strcat> it wants the up-to-date bootstrapped compiler for extracting the tests
[16:03:12] <adridu59> rustdoc is for getting doc out of my own rust program right? if so I don't need that
[16:03:19] <strcat> kimundi: well there's a target, but it depends on the other stuff
[16:03:24] <kimundi> well, sure
[16:03:33] <kimundi> that's what adridu59 needs
[16:03:37] <adridu59> wait I didn't run configure, silly me
[16:04:22] *** Joins: Jesin (Jessin_@moz-D63AB1FC.cc.lehigh.edu)
[16:04:44] *** Quits: steffenomak (steffenoma@moz-FB0A4BEB.student.uu.se) (Quit: WeeChat 0.4.1)
[16:05:09] <adridu59> make docs works :)
[16:05:23] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[16:05:40] <adridu59> needs snapshot through, I guess it has that rust parsing code
[16:06:02] <bstrie> strcat: I was just skimming before, but you said something about removing ~[T] ?
[16:06:27] <strcat> bstrie: I just said that rust-core won't support ~[T] until it's redone
[16:06:33] <bstrie> ok
[16:06:55] <bstrie> was not looking forward to ~Vec<T> instead :P
[16:07:13] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[16:07:14] <strcat> bstrie: it wouldn't be ~Vec
[16:07:16] <strcat> it would be Vec<T>
[16:07:26] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[16:07:35] <strcat> there's no unique pointer in ~[T]
[16:07:45] <strcat> a good argument for not pretending there is... ;p
[16:07:55] <bstrie> something something DST
[16:08:01] <strcat> wouldn't apply to vectors
[16:08:06] <adridu59> wow, doc building takes its time :(
[16:08:08] *** Joins: jeffreybaird (jeffreybai@moz-ED3EF543.static.twtelecom.net)
[16:08:19] <strcat> @[T] and @mut [T] fundamentally can't be resized
[16:08:19] <bstrie> strcat: in that bug on changing the ~[T] representation niko said that it was orthogonal to DST
[16:08:40] *** Joins: nkoep (nik@moz-A4CD7309.pool.mediaways.net)
[16:08:44] <strcat> bstrie: yeah, but we can't have DST for vec because slices/vectors aren't the same thing, and managed/refcounted vectors can't be resized
[16:09:29] * bstrie throws up his hands
[16:09:41] <kimundi> We can DST, just not the part where pointers to unsized types have the same size
[16:09:48] <bstrie> whatever, as long as I can allocate a list on the stack with ~[1,2,3] I don't care how it works
[16:09:53] <bstrie> *heap
[16:10:03] <strcat> atm I have no plans to remove ~[T] from rust, because it's not possible to write a correct vector entirely in a library due to language deficiencies
[16:10:24] *** Quits: timot (timot@moz-45B39FB4.bredband.tre.se) (Ping timeout)
[16:10:33] <strcat> so don't worry about it
[16:10:46] <strcat> if you see me adding a solution to that library issue, then you can worry
[16:11:12] <strcat> (but I don't expect it to be fixed)
[16:11:15] *** Joins: timot (timot@moz-45B39FB4.bredband.tre.se)
[16:11:42] <strcat> although that does mean RcMut and GcMut are going to have to stay around
[16:11:49] <strcat> if we don't fix that problem
[16:11:50] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[16:12:18] <strcat> acrichto: on that note... I think I'll fix up RcMut and move it to libstd too for the moment
[16:12:36] *** Joins: pnkfelix (pnkfelix@moz-62BA0D57.public.wayport.net)
[16:12:36] *** ChanServ sets mode: +o pnkfelix
[16:12:47] <acrichto> strcat: with raii?
[16:12:52] <strcat> no, not yet
[16:13:18] <strcat> I'm not sure about the best way to do it yet
[16:13:23] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[16:13:25] <strcat> RAII makes it more complex because it has to count & refs
[16:13:28] <acrichto> I'm ok with either
[16:13:31] *** Joins: pnkfelix1 (pnkfelix@moz-62BA0D57.public.wayport.net)
[16:13:38] <strcat> with closures, it has stack discipline
[16:13:39] *** Quits: pnkfelix (pnkfelix@moz-62BA0D57.public.wayport.net) (Connection reset by peer)
[16:13:43] <strcat> it just has to reset to the previous state
[16:13:44] <acrichto> there was something that did it recently, I forget what though
[16:13:48] <acrichto> maybe it was Mut
[16:13:55] <strcat> yeah but Mut hasn't landed :)
[16:14:05] <acrichto> as an example
[16:14:11] *** Quits: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca) (Quit: canhtak)
[16:14:23] <strcat> Mut can't be used with Rc without unsafe
[16:14:26] <strcat> until https://github.com/mozilla/rust/issues/9509 is fixed
[16:15:03] *** pnkfelix1 is now known as pnkfelix
[16:15:37] *** Joins: eddyb9 (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[16:16:13] <eddyb9> strcat: is it possible to pass linker arguments, like "-T linker_script"?
[16:16:23] <strcat> --link-args
[16:16:33] <strcat> well, it passes link-args to gcc
[16:16:41] *** Joins: revls (uid14245@moz-5F4AA75A.irccloud.com)
[16:17:12] <eddyb9> strcat: err, I'm prone to ask the wrong questions. I would like to do it from an attribute
[16:17:26] <strcat> #[link_args = "foo"]
[16:17:39] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[16:17:40] <strcat> I think you have to put it on an extern {} block though
[16:17:46] <acrichto> that's not guaranteed to stick around though, it's terribly non-portable
[16:17:55] <acrichto> the link_args attribute that is
[16:18:02] <strcat> well there's no alternative atm
[16:18:23] <eddyb9> strcat: if I do this in arch/x86/mod.rs which gets included by main.rs, would it come into effect when compiling main.rs?
[16:18:30] <acrichto> oh yeah I'm just saying that I plan on reworking how it's done as I get static linking working
[16:18:53] <strcat> eddyb9: if by included you just mean mod, it's going to issue a single linker command with all of those combined
[16:19:02] <strcat> crates are build as a single compilation unit
[16:19:04] <strcat> built*
[16:19:30] <eddyb9> strcat: so it combines all top-level attributes?
[16:19:46] <eddyb9> or extern or whatever they are
[16:19:54] *** Quits: Ferreus (ferreus@moz-6CE6358C.dip0.t-ipconnect.de) (Ping timeout)
[16:20:07] <strcat> eddyb9: it combines the #[link_args] attributes into 1 linker command
[16:20:26] *** Quits: pnkfelix (pnkfelix@moz-62BA0D57.public.wayport.net) (services.mozilla.org (Too many invalid passwords))
[16:20:32] *** Joins: pnkfelix (pnkfelix@moz-62BA0D57.public.wayport.net)
[16:20:32] *** ChanServ sets mode: +o pnkfelix
[16:20:36] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[16:20:47] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[16:21:15] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[16:21:16] <revls> Hi! I've been learning rust over the last week but I still can grok the idea of borrowed, owned, managed pointer, I have this simple function but can't make it work: https://gist.github.com/alejandro/c026f78a77070ae48ffe
[16:21:52] *** Joins: Palmik (palmik@moz-11EA685D.pks.muni.cz)
[16:21:55] <Ms2ger> Okay, so what happens is
[16:22:02] <strcat> revls: ~str is a value, it's gone at the end of that function call
[16:22:09] <strcat> so you can't return a reference into it
[16:22:18] <Ms2ger> What he said
[16:22:22] <kimundi> haha
[16:22:50] <adridu59> dat doc still ain't built...
[16:23:03] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[16:23:10] *** Joins: io2 (io2@moz-A6202C16.home.otenet.gr)
[16:23:19] <revls> strcat: so what should I do to return it?
[16:23:32] <revls> Ms2ger, strcat thanks you are really fast :)
[16:23:33] <kimundi> revls: In general, if you want to return a &ANYTHING, you need to to pass in a &ANYTHING_ELSE and link those two with an explicity named lifetime
[16:23:52] <strcat> revls: you can take &str and return an &str view into it
[16:23:55] <kimundi> fn slice<'a>(word: &'a str, size: uint) -> &'a str{
[16:24:12] <Ms2ger> revls, or, with more copies, do word.slice_chars(0, size).to_owned()
[16:24:28] <kimundi> which would not use borrowing, but just amke a new ~str
[16:25:17] <eddyb9> strcat: awesome. if I can get global assembly in Rust, then I can get read of the asm and C files 
[16:26:04] <eddyb9> *get rid
[16:26:35] <revls> kimundi: the ' stands for?
[16:26:49] <eddyb9> revls: named lifetime
[16:27:01] *** Quits: maik (maik@moz-9DF51BF7.dip0.t-ipconnect.de) (Ping timeout)
[16:27:04] <revls> Ms2ger: that made it works 
[16:27:09] *** Quits: nrc (nrc@88F51059.F3BBB17D.144F44FA.IP) (Ping timeout)
[16:27:10] <revls> eddyb9: oh I see
[16:27:12] <kimundi> revls: NOthing in special, 'FOO is just the annotation of a lifetime name, to distinguish them from regular Type paramters
[16:27:30] <Ms2ger> revls, but it does involve a lot of string copies :)
[16:27:59] <revls> Ms2ger: yeah that's what I was thinking
[16:28:30] <kimundi> revls: You can do it without copying, like the underlying slice_Chars does
[16:28:52] <Ms2ger> revls, but then you have to tell the language more about why that's safe to do
[16:29:42] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[16:29:48] <revls> kimundi: yeah it's just a silly example to help me understand pointers
[16:30:00] <kimundi> alright :)
[16:30:37] <revls> any good references/articles to help me a little bit more
[16:30:54] *** Joins: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca)
[16:31:23] <kimundi> the tutorial has a good section about ~T, and &T has a own tutorial (borrowed pointer tutorial)
[16:32:18] <kimundi> @T you should just ignore, it will likely disappear in the future and be replaced with a regular generic type Gc<T>
[16:32:47] *** Joins: Toussa (Mibbit@moz-FF51EDCC.adsl.alicedsl.de)
[16:32:58] <Toussa> Hi everyone
[16:33:33] <revls> cool, thanks I read it, will do it again
[16:33:50] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[16:33:50] <strcat> revls: read the master one, not 0.8
[16:34:36] <Toussa> Im writing a binary tree to understand a bit more rust
[16:34:38] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[16:35:03] <revls> strcat: ok
[16:35:06] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[16:35:07] *** Quits: timot (timot@moz-45B39FB4.bredband.tre.se) (Ping timeout)
[16:35:42] <Toussa> Ihave a struct like this: struct Tree {parent: &Tree, int: value, left: ~Tree, right: ~Tree}
[16:36:01] <Toussa> does not compile because the parent lifetime is unknown
[16:36:07] <strcat> Toussa: you won't be able to do it that way for several reasons
[16:36:25] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[16:36:26] <strcat> struct Foo { x: ~Foo } can't be constructed
[16:36:46] <strcat> it's infinitely recursive without a base case
[16:36:47] <eddyb9> you need Option
[16:36:49] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[16:36:55] <Toussa> strcat: my bad, i use option
[16:37:00] <Toussa> for the chikd
[16:37:17] <strcat> you can have borrowed pointers in a struct, but you have to qualify them with a lifetime, and they aren't going to be able to point at the parents
[16:37:27] <strcat> you can write a red-black tree without parent pointers
[16:37:59] <adridu59> is it me or make docs compiles everything?
[16:38:03] <strcat> if you want parent pointers, you need to use a raw pointer for the parent pointer, or use managed pointers
[16:38:06] <strcat> adridu59: it's not just you
[16:38:12] <eddyb9> or an enum, but you can't easily have a value on every node if you use the classi haskell example
[16:38:20] <adridu59> strcat: gawd
[16:38:45] <strcat> Toussa: std::trie and extra::treemap are examples of recursive data structures with just owned pointers and safe code
[16:38:55] <strcat> extra::treemap does a red-black tree, without parent pointers
[16:38:55] *** Quits: Jesin (Jessin_@moz-D63AB1FC.cc.lehigh.edu) (Ping timeout)
[16:39:04] <strcat> and llrb tree might be simpler than what it does
[16:39:05] *** Joins: feduser (feduser@FF9E6FB7.1E16A669.799BF54A.IP)
[16:39:36] *** Joins: timot (timot@moz-45B39FB4.bredband.tre.se)
[16:39:52] <Toussa> strcat: ok i will check that, in the case i want to keep the parent, to keep the data structure sage, i will have to use managed pointer
[16:39:57] *** Quits: eddyb9 (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Ping timeout)
[16:40:02] <Toussa> strcat: ok i will check that, in the case i want to keep the parent, to keep the data structure safe, i will have to use managed pointer
[16:40:20] *** Joins: Jesin (Jessin_@moz-D63AB1FC.cc.lehigh.edu)
[16:40:22] <strcat> well it can be externally safe if it uses a raw pointer for the parent ptr
[16:40:31] <strcat> that's what extra::dlist does
[16:40:38] <kimundi> adridu59: make docs needs the most current rustdoc, which in turn is compiled with the most current rustc
[16:40:53] <strcat> but you could also use a managed pointer
[16:40:56] <kimundi> adridu59: SO yeah, it involves a full bootstrap
[16:41:43] <Toussa> strcat: ok i see, which problem is involved into using a borrowed pointed with the lifetime of the object itself?
[16:42:13] <strcat> Toussa: objects are destroyed top-down, the parent's destructor is called before the child's
[16:42:22] <strcat> the child would be able to see a partially destroyed object
[16:42:22] <Toussa> a ok
[16:42:38] <Toussa> we cant have a recurive destructor?
[16:42:47] <Toussa> recursive*
[16:42:50] <strcat> the destructor is recursive
[16:43:16] <strcat> I'm saying that if you were able to have a raw pointer into the parent, it wouldn't be safe in various circumstances
[16:43:16] <Toussa> ok so its not doing destroy child -> destroy myself
[16:43:26] <Toussa> ok
[16:43:41] <strcat> er, if you were able to have a borrowed pointer*
[16:43:49] <Toussa> a ok
[16:43:53] <strcat> Toussa: you can write it with a parent pointer, and without managed pointers
[16:44:04] <strcat> rust just won't pretend it's safe, so you'll have to use a raw one
[16:44:34] <strcat> it can expose an entirely safe external API, by unsafe I only mean you have to be aware of what can go wrong and be very careful to expose only a safe API
[16:44:38] <adridu59> kimundi: well I guess it has to be done once... then I can modify them and compile easily.?
[16:44:52] <Toussa> strcat
[16:44:58] <Toussa> strcat: thanks for those info
[16:45:14] <kimundi> adridu59: If you'Re just modifying the docs alone then yes. If you'r changing doc comments in the libaraies, that will also imply a rebuild
[16:45:22] <adridu59> it really takes forever to build, to me it seems that it was faster last time I compiled Rust
[16:45:28] <Toussa> not having the parent poointer just remove the possibility to go over the tree using iteration right?
[16:45:35] <kimundi> adridu59: Does it compile llvm?
[16:46:08] <adridu59> right now, rustdoc just started, it's almost finished
[16:46:14] <kimundi> Toussa: You don't need a parent pointer for that afaik
[16:46:22] <kimundi> Toussa: Just a stack in the Iterator
[16:46:30] <adridu59> haha all that for a 2sec rustdoc pass
[16:46:46] *** Joins: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr)
[16:47:06] <kimundi> adridu59: The trials of a bootstrap seem cruel and pointless sometimes ;)
[16:47:20] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[16:47:40] <adridu59> seems so!
[16:47:48] <Toussa> kimundi: thanks
[16:48:27] *** Quits: timot (timot@moz-45B39FB4.bredband.tre.se) (Ping timeout)
[16:48:33] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[16:49:25] *** Quits: Blub\w (wry@moz-248A6D42.wireless.dyn.drei.com) (Quit: bb2m)
[16:49:42] *** Joins: timot (timot@moz-45B39FB4.bredband.tre.se)
[16:49:45] <strcat> Toussa: std::trie and extra::treemap are both trees with iterators, without unsafe blocks, and without managed pointers
[16:50:02] <adridu59> kimundi: any idea how I can trigger pandoc generation? I have it installed already
[16:50:18] <adridu59> hmm, needs node.js
[16:50:25] <kimundi> adridu59: Well, the newest rustdoc doesn'T use pandoc anymore...
[16:50:27] <Toussa> strcat: Im actually looking at them, i will learn a lot from it thanks
[16:50:41] <kimundi> adridu59: Don't know more than that though
[16:51:00] <strcat> Toussa: their code is a bit uglier than it would be if it was written today, but other than that they're great examples
[16:51:22] <strcat> they were written before the borrow checker worked as well as it does today :), and before pattern matching worked properly
[16:51:29] <strcat> (back when `match` was unsound!)
[16:51:30] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[16:51:31] *** ChanServ sets mode: +o tjc
[16:51:40] <Toussa> oh!
[16:51:41] <strcat> well, treemap was at least
[16:51:52] <strcat> std::trie was implemented after `match` mostly worked ;p
[16:52:21] <Toussa> that my current example, my eyes will get use to something prettier then!
[16:52:24] <adridu59> yet another compile pass... think I'm gonna do something else in the meantime
[16:52:52] <strcat> one of the workarounds they do is a funny &**x pattern all over
[16:53:02] <strcat> because `ref` in patterns didn't work properly
[16:53:15] <strcat> and there was some problem with moving into a match...
[16:53:24] <Toussa> thats fun
[16:53:27] <strcat> luckily that stuff is all solid now
[16:53:54] <Toussa> i have the feeling that the library,somehow, has to be rewritten to get more up to date
[16:54:14] <benh> hi tjc!
[16:54:35] <tjc> benh: Hey! Sorry I didn't have a chance to review your PR, but someone else did, so I'm glad it's landed now :-)
[16:54:44] <benh> yeah, it's all good :)
[16:56:21] *** Joins: eddyb9 (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[16:56:32] *** Quits: alon (alon@moz-4904A7D7.bb.netvision.net.il) (Ping timeout)
[16:56:38] <adridu59> kimundi: tutorial still does
[16:56:58] <kimundi> adridu59: Ah right, manual and tutorial are still using it
[16:57:03] <adridu59> kimundi: llvm compilation looks like what was draining a lot of time
[16:57:12] <eddyb9> yes it is
[16:57:13] <kimundi> the doccomments/library documentation uses sundoc afaik
[16:57:18] *** Quits: bent (chatzilla@moz-8913BD79.midsouth.biz.rr.com) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[16:57:20] <benh> tjc: There was a change in rustpkg that I rebased over where source_control::safe_git_clone returns a path that is sometimes to a temporary directory and sometimes to a caller-specified directory, and it wasn't obvious how to use RAII there, so right now it doesn't
[16:57:37] <kimundi> adridu59: Well the good news is that llvm should very rarely need a recompile
[16:57:48] <strcat> acrichto: https://github.com/mozilla/rust/pull/9794
[16:57:50] <tjc> benh: okay! That code probably needs refactoring anyway, as in, I think I can combine the two git-clone functions into one and obviate the need for it
[16:57:54] <tjc> so I'll take a look
[16:58:06] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[16:58:06] <kimundi> adridu59: Even if you modify something in the libraries, it will 'only' recompile rusts stage0-stage2, not llvm
[16:58:30] <jdm> https://pastebin.mozilla.org/3238379
[16:58:35] <adridu59> yeah it's almost done, much faster than llvm
[16:58:36] <jdm> anybody see how I can link these lifetimes together?
[16:58:39] <jdm> I'm out of ideas
[16:58:45] <benh> tjc: Or otherwise maybe the caller could create the temporary directory at least, it doesn't seem like safe_git_clone itself uses the temporary directory at all
[16:58:49] <strcat> jdm: don't use 'self
[16:59:02] <benh> might need another variant for the result type, or wrapping in option, or something 
[16:59:03] <tjc> benh: Yeah, you're right. There are Reasons for how it is, but I didn't document them well
[16:59:05] <adridu59> anyways if we had snapshots... would be good, I'm not a compile-it-yourself fanboy
[16:59:05] <benh> Thanks for having a look :)
[16:59:09] <strcat> jdm: 'self is only for when you have objects with lifetimes inside of the type itself
[16:59:23] <strcat> jdm: like 'impl<'self> Foo for &'self [T]'
[16:59:39] <strcat> although that's not the issue you want to solve ;p
[16:59:51] <adridu59> (I mean llvm)
[17:00:18] <strcat> jdm: the workaround I use in the vector iterator to add a lifetime to a type without a borrowed pointer is Option<&'self ()> set to None
[17:00:31] <jdm> strcat: domtest.rs:137:8: 137:25 error: mismatched types: expected `&T` but found `&Node` (expected type parameter but found struct Node)
[17:00:33] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[17:00:38] <jdm> that's not the error I was expecting
[17:00:46] <strcat> oh
[17:00:47] *** Quits: io2 (io2@moz-A6202C16.home.otenet.gr) (Quit: )
[17:01:05] <jdm> I guess I need a transmute in there regardless for what I'm doing
[17:01:26] <strcat> jdm: what if you do <'a>(&'a self) -> &'a T though?
[17:01:27] <eddyb9> strcat: this needs two tricky things: a structure in a .multiboot section and some empty stack space in .data https://github.com/pcmattman/rustic/blob/master/src/start.S
[17:01:32] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[17:01:37] <eddyb9> strcat: can I do any of that in Rust?
[17:01:39] <strcat> jdm: I have code like that in Rc and it works
[17:02:00] <eddyb9> (placing globals in specific sections, mainly)
[17:02:09] <strcat>     pub fn borrow<'r>(&'r self) -> &'r T {
[17:02:11] <strcat>         unsafe { &(*self.ptr).value }
[17:02:13] <strcat>     }
[17:02:25] <benh> rusti: std::sys::size_of::<()>()
[17:02:28] -rusti- 0u
[17:02:32] <benh> rusti: std::sys::size_of::<~()>()
[17:02:32] -rusti- 8u
[17:03:11] <jdm> hmm, not working yet
[17:03:26] <jdm> lifetime errors and type errors
[17:04:03] *** Quits: eevee (eevee@moz-59EA9CA5.evrt.wa.frontiernet.net) (Ping timeout)
[17:04:15] <strcat> jdm: maybe you do need a transmute then
[17:04:19] <eddyb9> strcat: I'm pretty sure I can move the assembly stuff in C, but I would like to have everything in Rust, if possible
[17:04:20] <strcat> or copy_lifetime
[17:04:32] * jdm did not know about copy_lifetime
[17:04:36] <strcat> eddyb9: I'm not sure
[17:04:43] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:04:43] *** ChanServ sets mode: +ao brson brson
[17:05:11] <strcat> jdm: std::cast is just full of more limited transmutes (they all call transmute) to reduce how error-prone it is :)
[17:05:41] <strcat> copy_lifetime is a special case of transmute_region, which is a special case of transmute
[17:06:05] <strcat> anyway helps to avoid doing more than you wanted to do since transmute will happily do *anything*
[17:06:21] <jdm> yep
[17:06:30] <benh> alas not shrink or grow objects ;)
[17:06:33] *** Joins: riley (riley@8BA43816.9AA11D69.65DDFA89.IP)
[17:06:45] <eddyb9> reinterpret_cast, amirite?
[17:06:54] <strcat> eddyb9: kind of
[17:07:00] <strcat> eddyb9: transmute_copy is reinterpret_cast
[17:07:02] <jdm> strcat: now I have https://pastebin.mozilla.org/3238426
[17:07:13] *** Joins: autra (augustin@moz-2EA7A1DF.fullsix.com)
[17:07:31] <strcat> eddyb9: for example transmuting ~T to *T will move the ~T into transmute
[17:07:35] <strcat> since it takes it by-value
[17:07:44] <strcat> usually transmute is what you want
[17:07:55] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[17:08:14] <strcat> jdm: heh, weird.
[17:08:22] <strcat> hrm
[17:08:26] *** Joins: eevee (eevee@moz-59EA9CA5.evrt.wa.frontiernet.net)
[17:08:36] <strcat> jdm: oh you're missing the 'a on the other self
[17:08:41] <jdm> oops
[17:09:03] <eddyb9> strcat: is there any exhaustive list of attributes handled by rustc?
[17:09:06] <jdm> thanks strcat :)
[17:09:13] <strcat> eddyb9: nope! :P
[17:09:22] <strcat> they aren't really documented or strictly checked at all
[17:09:36] <strcat> a problem we need to fix
[17:10:04] <strcat> eddyb9: the compiler basically looks up attributes in an ad-hoc way as-needed, there's no up-front check of validity or anything
[17:10:21] <eddyb9> so they're spread across the front, middle and back ends?
[17:10:30] <strcat> yeah
[17:10:38] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:10:40] <eddyb9> (and libsyntax, presumably)
[17:10:49] <strcat> it's a mess
[17:10:50] <maikeru> Alright.. just compiled and ran rust hello world, might as well unlurk for a moment. o/ 
[17:10:52] <Toussa> i can now replace this notation &**x by ref right?
[17:10:55] <eddyb9> I wouldn't mind if I had an easy way to find all of them
[17:11:05] <strcat> Toussa: yeah so
[17:11:14] <strcat> rusti: let x = ~5; let ~ref y = x; *y
[17:11:14] -rusti- 5
[17:11:18] <strcat> that's what it wants to do
[17:11:44] <eddyb9> strcat: what's ref? very new, undocumented, or am I blind?
[17:12:00] <strcat> eddyb9: ref is allowed in patterns to bind by-reference
[17:12:22] <strcat> it might be undocumented, patterns aren't well-documented
[17:13:09] *** Joins: Ferreus (ferreus@moz-A34F4411.pools.arcor-ip.net)
[17:13:15] <strcat> rusti: let x = Some(~5); match x { Some(x) => println!("{:?}", x), , None => () }
[17:13:16] -rusti- pastebinned 6 lines of output: http://sprunge.us/VEHH
[17:13:21] <strcat> rusti: let x = Some(~5); match x { Some(x) => println!("{:?}", x), None => () }
[17:13:22] -rusti- ~5
[17:13:22] -rusti- ()
[17:13:29] <strcat> rusti: let x = Some(~5); match x { Some(ref x) => println!("{:?}", x), None => () }
[17:13:30] -rusti- &~5
[17:13:30] -rusti- ()
[17:13:35] <strcat> rusti: let x = Some(~5); match x { Some(~x) => println!("{:?}", x), None => () }
[17:13:35] -rusti- 5
[17:13:35] -rusti- ()
[17:13:39] <strcat> rusti: let x = Some(~5); match x { Some(~ref x) => println!("{:?}", x), None => () }
[17:13:40] -rusti- &5
[17:13:40] -rusti- ()
[17:13:59] <strcat> either of the ref versions avoids moving `x` into the match
[17:14:04] <strcat> rusti: let x = Some(~5); match x { Some(~ref x) => println!("{:?}", x), None => () } x
[17:14:05] -rusti- &5
[17:14:05] -rusti- Some(~5)
[17:14:40] <strcat> anyway '~ref x' didn't used to work
[17:14:54] <strcat> so they would get &~x and then do &**x to convert to &T
[17:14:54] <eddyb9> so.... & would unwrap a borrowed pointer, while ref "wraps"?
[17:15:01] <strcat> eddyb9: yeah
[17:15:11] <strcat> the destructuring syntax is a mirror of the construction syntax
[17:15:18] <strcat> so there needs to be a keyword to *get* a ref
[17:15:33] <benh> alas my suggestion of * instead of ref wasn't very well received ;)
[17:15:38] <eddyb9> is * used? or does it mean raw pointer?
[17:15:57] *** Joins: jeffb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[17:16:06] <strcat> eddyb9: it's used as a wildcard, don't know if it would be ambiguous
[17:16:25] <eddyb9> benh: heh, that was my first thought "reverse of & is *, why not?"
[17:16:40] <kimundi> its used as raw pointetr, as derference operator, as catch-all pattern (match x { Foo(*) => ...}) and for global imports (sue foo::*;)
[17:16:40] <eddyb9> strcat: pffft... need moar symbols
[17:16:54] <strcat> eddyb9: & would always mean 'dereference' in a pattern though
[17:17:01] <strcat> the syntax is the same as construction
[17:17:16] <eddyb9> strcat: use the inverted A from maths for "catch-all" :P
[17:17:21] <strcat> Some(~(1, 2)) constructs a Some(~(int, int))
[17:17:27] <strcat> and in a pattern, you can write
[17:17:39] <strcat> Some(~(x, y)), Some(~(x, 2)) or whatever
[17:17:43] <strcat> to destructure it
[17:18:19] <eddyb9> yeah, I grasp destructuring, I've used it in ES6. sadly, it's irefutable-only there (no match block yet)
[17:18:35] <strcat> ah
[17:18:49] *** Quits: jeffreybaird (jeffreybai@moz-ED3EF543.static.twtelecom.net) (Quit: jeffreybaird)
[17:20:54] <eddyb9> strcat: would static STACK = [0, ..128*1024]; use more than 128kB in .data (assuming it even ends up in there)?
[17:20:59] *** Joins: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com)
[17:21:14] <eddyb9> is it a &'static slice?
[17:21:20] *** Joins: jeffreybaird (jeffreybai@moz-ED3EF543.static.twtelecom.net)
[17:21:42] <strcat> eddyb9: it would be an actual value, not a slice
[17:21:51] <strcat> unless you did &[...]
[17:22:07] <benh> Wish we could pattern-match on arbitrary asts for better macros :>
[17:22:14] <pnkfelix> hey, when I'm translating C/C++ struct declarations to Rust, what is the recommended way to deal with structs that are really headers for variable length objects, as in: http://gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Zero-Length.html ?
[17:22:27] <strcat> pnkfelix: we currently can't
[17:22:32] <pauls> benh: ASTs don't exist at that point.
[17:22:32] <pnkfelix> strcat: that's what I feared.  Okay.
[17:22:41] <eddyb9> strcat: could I take its raw address at runtime?
[17:22:46] *** Joins: eholk (eholk@4371ACE8.7EDA02CF.51B6877.IP)
[17:22:51] <kimundi> static STACK: [u8, ..128*1024] = [0, ..128*1024]; vs static STACK: &'static [u8] = &[0, ..128*1024];
[17:22:51] <pauls> benh: what exactly do you want?
[17:22:55] <strcat> pnkfelix: oh and gcc treats that as undefined behaviour now if you index past the end :), at least in C99 mode
[17:23:11] <strcat> eddyb9: yes but the address isn't necessarily significant
[17:23:20] <eddyb9> strcat: it is to me :P
[17:23:22] <Toussa> strcat: I think i did not get the prupose of ref, if you translate to C & is & and ref is * for a pointer?
[17:23:25] <pnkfelix> strcat: wait, what?  You mean the pattern is no longer valid?
[17:23:29] <strcat> eddyb9: I mean we might merge constants
[17:23:32] <benh> pauls: my motivating example earlier was that I'd like to write an assert! macro that matches on the condition expression to see if it is a ==-binop, to then call assert_eq! instead
[17:23:51] <strcat> eddyb9: in C, all functions/constants have a significant address so they can't be merged (unless it determines you never depend on it)
[17:23:54] <benh> I can kinda see how to do it as a syntax extension but got confused by things like hygiene and curious ICEs and gave up :)
[17:23:58] <pnkfelix> strcat: oh I guess I should read the paragraph there about ISO C99
[17:24:00] <kimundi> Toussa: ref is only relevant in pattern matchin, which I think C doesn't have
[17:24:10] <strcat> pnkfelix: yeah the pattern is no longer valid (and those are gcc 4.1.2 docs ;p)
[17:24:20] <pauls> benh: Ah, I kinda get what you're getting at.
[17:24:23] <pnkfelix> strcat: so I now need to do { int length, char contents[]; } when in C99 mode?
[17:24:28] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[17:24:29] <strcat> pnkfelix: yep
[17:24:37] <strcat> pnkfelix: if you do [0], it's allowed to assume you never index into it
[17:24:37] *** jorendorff is now known as jorendorff_away
[17:24:39] <pnkfelix> strcat: good to know, thx.
[17:24:57] <strcat> pnkfelix: we ran into a bunch of broken software when Arch switched to gcc 4.8 because of this
[17:25:04] <pnkfelix> strcat: FYI I'm finally looking more carefully at your benchmark for Issue #8981
[17:25:11] *** Quits: timot (timot@moz-45B39FB4.bredband.tre.se) (Ping timeout)
[17:25:14] <strcat> pnkfelix: there was a recent regression btw
[17:25:19] <strcat> on linux at least
[17:25:20] <pauls> You can kinda do that right now, but you're at the mercy of the macro parser being able to figure out `$e1:expr == $e2:expr` and hitting an error inside the macro parser, not the Rust parser, so that it can safely backtrack to the next clause.
[17:25:22] <pnkfelix> strcat: yeah I saw your note about that
[17:25:26] <kimundi> Toussa: Regular rust expression: &foo == take a reference, *foo == dereference foo. In a pattern: &foo == dereference foo, ref foo == reference foo
[17:25:33] <pnkfelix> strcat: but the regression affected both the new rep and the old rep, right ?
[17:25:36] <pauls> I really want to make the Rust parser not `fail!`.
[17:25:37] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[17:25:54] <benh> pauls: I think it just goes on and slurps the whole condition into the first expression and then complains that there's no ==
[17:25:57] <Toussa> kimundi: ok, now i got it
[17:26:08] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[17:26:08] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[17:26:15] <pauls> Yeah, that probably makes sense.
[17:26:24] <benh> backtracing would be a big change to the current parser wouldn't it
[17:26:39] <strcat> pnkfelix: not proportionally though
[17:27:13] <pnkfelix> strcat: okay, I'll try to stay aware of that
[17:27:19] <eddyb9> strcat: so I need two things now: specify section (via attribute) and force outputting certain "volatile" statics. can I have "unsafe static" for that :)))?
[17:27:45] *** Joins: timot (timot@moz-45B39FB4.bredband.tre.se)
[17:27:49] <strcat> eddyb9: we need to make a #[volatile] attribute, just hasn't been done yet
[17:27:50] <benh> pauls: My first exposure to most of these fancy magical fp/ml-inspired things was Nemerle, where user macros would just run as functions at compile time and they had fairly magic quasi quoting syntax that worked in patterns and expressions, I'm still a bit nostalgic for that
[17:27:55] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[17:28:32] <kimundi> eddyb9: There is static mut, if you want a unsafely mutable global
[17:28:40] <eddyb9> strcat: without that, it sounds like it's up to magic to figure out... can that static vector be mutable, btw?
[17:28:41] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[17:28:59] <strcat> eddyb9: you can use 'static mut' but it requires unsafe code to read/write to it
[17:29:02] <pauls> benh: I think it's a lot better to work from the Lisp/Scheme tradition, where macros are thought of as occupying a separate phase (possibly multiple phases, with procedural macros)
[17:29:05] <eddyb9> kimundi: oh, that's what I just thought of. would it prevent merging?
[17:29:14] <kimundi> erging?
[17:29:18] <kimundi> merging?
[17:29:28] <strcat> eddyb9: well, it won't merge if you modify it at runtime
[17:29:37] <strcat> if it figures out you don't ever modify it, it could merge it
[17:29:48] <strcat> you really need #[volatile] if the modification is external
[17:29:50] <eddyb9> strcat: don't worry about unsafe, I only take its address, it's for the stack
[17:30:20] <pnkfelix> strcat: Also, in your reference implementation for the 3-word rep, you don't have the same `if contains_managed::<T>() { … }` logic that std::vec does.  Am I right that this is just a simplification where you are using the knowledge that your tests only make vecs of int?
[17:30:38] <strcat> pnkfelix: you mean in Rc?
[17:30:42] <strcat> oh
[17:30:50] <pnkfelix> strcat: no, I mean in libstd/vec.rs
[17:30:59] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[17:30:59] <strcat> pnkfelix: yeah I left out handling of managed stuff in my Vec impl
[17:31:07] <strcat> pnkfelix: it's not possible to make a safe library Vec so I didn't bother
[17:31:14] <pnkfelix> strcat: Okay.  Yeah I understand that.
[17:31:17] <strcat> because it will always be Send/Freeze even if the types inside aren't
[17:31:40] <eddyb9> #[naked] and #[section=".multiboot"] pls :P
[17:31:46] <pnkfelix> strcat: As an experiment I'm making an analogous implementation of the old vec rep, with the same assumptions that you used in your benchmark code.
[17:32:07] <pnkfelix> strcat: (that was the reason for my original question about structs with trailing `data[0]` )
[17:32:12] *** Joins: Adhaa_ (Adhaa@AFF79D01.83764248.55CD930E.IP)
[17:32:37] <pnkfelix> strcat: I just want to confirm that such an implementation performs the same as std::vec
[17:32:39] <strcat> pnkfelix: also the current representation stores length in bytes
[17:32:50] *** Quits: Adhaa (Adhaa@6B52E0A7.83764248.55CD930E.IP) (Ping timeout)
[17:33:03] <strcat> so I think that's half of the issue
[17:33:08] <pnkfelix> strcat: okay.  I'm going to try to remain to details like that.
[17:33:18] <pnkfelix> sed -e s/remain/remain faithful/
[17:33:29] <eddyb9> strcat: I feel like I'm overflowing you with questions... do you know if I can output "inline" assembly outside of a function? maybe some extern trick?
[17:33:42] <strcat> eddyb9: I don't think it's possible yet
[17:33:51] <strcat> *maybe* it is
[17:33:53] <eddyb9> extern "llvm" would be cool :P
[17:33:57] *** Joins: meyer (Mibbit@moz-5168B2DA.sub-70-197-8.myvzw.com)
[17:34:19] <strcat> eddyb9: someone actually implemented it, but I'm not sure if we want to expose LLVM beyond it being an implementation detail
[17:35:22] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[17:35:58] <eddyb9> strcat: I can live with #[gtfo_I_know_what_I'm_doing]
[17:36:17] <eddyb9> unsafe unsafe unsafe extern "llvm"
[17:36:36] *** Quits: jeffb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffb)
[17:37:31] *** Quits: jeffreybaird (jeffreybai@moz-ED3EF543.static.twtelecom.net) (Quit: jeffreybaird)
[17:37:49] *** Joins: mccr8 (mccr8@moz-BBE3ABD.mv.mozilla.com)
[17:37:57] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[17:38:03] <eddyb9> strcat: or it can have "unstable" in the name
[17:38:17] <benh> unsafePerformLLVM
[17:40:33] *** Quits: timot (timot@moz-45B39FB4.bredband.tre.se) (Ping timeout)
[17:42:36] *** Joins: timot (timot@moz-45B39FB4.bredband.tre.se)
[17:43:34] *** Joins: jaen (jaen@moz-E5B18A83.catv.broadband.hu)
[17:43:36] *** Joins: valenting (Thunderbir@moz-416F9035.residential.rdsnet.ro)
[17:43:38] *** Quits: meyer (Mibbit@moz-5168B2DA.sub-70-197-8.myvzw.com) (Quit: http://www.mibbit.com ajax IRC Client)
[17:44:07] *** Joins: jeffreybaird (jeffreybai@moz-ED3EF543.static.twtelecom.net)
[17:45:27] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[17:45:41] *** Joins: Dcoder (a@moz-F8BDC9E8.org)
[17:46:50] *** Quits: autra (augustin@moz-2EA7A1DF.fullsix.com) (Ping timeout)
[17:47:27] *** Quits: timot (timot@moz-45B39FB4.bredband.tre.se) (Ping timeout)
[17:49:02] *** Quits: vmx (vmx@moz-5B5A3C1.pools.arcor-ip.net) (Quit: Leaving)
[17:49:43] <tiffany> are there any plans to make segfaults less disasterous in rust? like catching them and doing fail!, or at least a breakpad-like mechanism for reporting them?
[17:49:56] *** Joins: timot (timot@moz-45B39FB4.bredband.tre.se)
[17:51:05] <strcat> tiffany: definitely not catching them and doing fail!
[17:51:12] <strcat> that turns crashes into security vulnerabilities
[17:51:28] <tiffany> er..
[17:51:30] <strcat> I don't think we need special handling of them
[17:51:37] <strcat> no other language does, and rust is memory safe
[17:51:40] <strcat> just fix the compiler bugs
[17:51:49] <tiffany> because segfaults could mean memory corruption across task boundaries?
[17:51:59] <strcat> yes
[17:52:00] <tiffany> actually a language called neat does which is kind of why I asked
[17:52:14] <strcat> it's not safe unless they use process isolation without shared memory
[17:52:20] <strcat> it's a veeeery bad idea
[17:52:37] <strcat> if you detect memory corruption, you need to crash ASAP
[17:52:54] <strcat> even staying alive long enough to report it is exploitable
[17:53:24] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[17:53:45] <strcat> in a browser for example, you have executable + writable parts of the heap
[17:53:54] <strcat> for compiling JS
[17:54:12] <strcat> so if there's memory corruption... you could be executing arbitrary, attacker-controlled code any time you run a function ptr
[17:55:29] *** Joins: echristo (echristo@4EEA9249.D6CCE4AE.77834EAA.IP)
[17:55:44] <strcat> it'd be really neat if asm.js eventually led to the ability to have dynamic content without JIT compilation
[17:56:07] *** Quits: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com) (Quit: csherratt)
[17:56:08] <strcat> so at least you could only *temporarily* have the insanity of writable executable memory
[17:57:02] <eddyb9> asm.js can be compiled AoT because it's statically typed
[17:57:28] <strcat> but afaik it doesn't live in isolation from JIT compiled JS
[17:57:43] *** Parts: gibbon (mathias@moz-1376FFC5.csbnet.se) (WeeChat 0.3.8)
[17:58:05] *** Joins: geoffhill (geoffhill@moz-244CF33A.amazon.com)
[18:03:05] *** Quits: derboi_c (derboi_c@D6B9FB69.DF3CA0D0.BA2F4534.IP) (Quit: Lost terminal)
[18:04:07] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[18:05:41] *** Joins: tikue3 (tikue_star@91CF8C6.21C37D63.689607DE.IP)
[18:10:53] <tiffany> huh..
[18:11:04] <tiffany> so browsers leave the js JIT both executable and writable at the same time?
[18:11:16] <tiffany> I didn't think you could have pages like that, only remapping between them
[18:11:41] <brson> hansjorg: I'm totally excited about the Travis CI work you are doing, and think it's super important. I added a page to the wiki on this topic if you want to expand it https://github.com/mozilla/rust/wiki/Doc-continuous-integration
[18:11:58] <tiffany> oh linux at least... windows leaving the heap and stack executable by default
[18:12:38] *** Joins: tjc_ (tjc@moz-BBE3ABD.mv.mozilla.com)
[18:12:39] *** Joins: pcwalton (pcwalton@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:12:39] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:13:50] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[18:15:28] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[18:15:36] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[18:16:02] <eddyb9> tiffany: only iOS has that restriction AFAIK
[18:16:43] <eddyb9> you can AoT everything, but you lose all the JIT optimizations
[18:16:51] <tiffany> how does that work, do the browsers recompile functions each time they're passed different types?
[18:17:25] *** Quits: Adhaa_ (Adhaa@AFF79D01.83764248.55CD930E.IP) (Ping timeout)
[18:17:37] <mccr8> tiffany: I think that the compiler guesses about types it will see, and adds in dynamic type guards that trigger recompilation if the guesses were wrong
[18:18:12] <strcat> afaik it doesn't actually compile anything until it knows there's a hot spot
[18:18:47] <tiffany> so it's less expensive to interpret than to compile something that only gets run once
[18:19:28] <mccr8> yeah.  Firefox has 2 different JITs right now, Baseline and IonMonkey, so it can tune which one to use based on how much something is run.
[18:19:34] <mccr8> I think Safari may have 3 now...
[18:20:00] <strcat> tiffany: it can compile specialized versions as-needed, but it can't just compile everything up-front
[18:20:10] <strcat> it figures out types and hot spots as it goes
[18:20:38] <strcat> LLVM's JIT doesn't do any of this, it just runs LLVM's regular optimization passes lazily
[18:20:51] <maikeru> eh.. love it... running trunk "where's this 'rust' tool?" "Oh... https://github.com/mozilla/rust/commit/a9dddbacde8e204ee7485bc11b5c23a06d57430d"
[18:20:59] <strcat> it's completely unaware of a type system beyond pointers and little ints
[18:21:15] *** Quits: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca) (Quit: canhtak)
[18:21:27] <mccr8> tiffany: if you are interested, this blog post goes into some nice detail about the different JITs in Firefox and when they are used: https://blog.mozilla.org/javascript/2013/04/05/the-baseline-compiler-has-landed/
[18:21:34] <strcat> if you ever wonder why unladen swallow failed to speed up python :)
[18:22:03] <strcat> LLVM's JIT needs a language like rust/c/c++/java
[18:22:12] <eddyb9> ff took the model from v8, which has fullcode (not optimized) and crankshaft (JIT with typeinfo)
[18:22:19] <strcat> (and it would still totally fall apart if you used java's reflection)
[18:22:45] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[18:22:58] <strcat> eddyb9: luajit works that way too, and existed long before :)
[18:23:22] <strcat> it has a baseline super fast interpreter and a good garbage collector, and then JIT compilation built on top of that
[18:23:26] <tiffany> do you think that the browsers would have an easier time if javascript was magically replaced with a statically typed bytecode?
[18:23:37] <strcat> and is faster than Go with a dynamic language
[18:23:47] <eddyb9> tiffany: PNaCl
[18:23:56] <tiffany> hm.. I suppose
[18:23:58] <strcat> well asm.js is that too
[18:24:13] <tiffany> asm.js still requires all the javascript stuff though
[18:24:20] <mccr8> tiffany: essentially, that's what asm.js is: it uses a subset of JS that you can statically type, so no type guards need to be emitted, and you can AoT compile, knowing what everything is.
[18:24:50] <strcat> tiffany: asm.js is statically typed
[18:25:00] <mccr8> without needing a warmup period or whatever to make guesses at types
[18:25:04] <strcat> it interfaces with JS via FFI
[18:28:34] <eddyb9> strcat: might as well dump my earlier idea here: using Rust enums across a syscall gate
[18:29:02] *** Quits: timot (timot@moz-45B39FB4.bredband.tre.se) (Ping timeout)
[18:29:34] <eddyb9> strcat: enforcing language level type safety when sending data to the kernel
[18:29:37] *** Quits: jeffreybaird (jeffreybai@moz-ED3EF543.static.twtelecom.net) (Quit: jeffreybaird)
[18:29:57] <eddyb9> wait, I forgot one aspect, the enum variants can't encode a return type :(
[18:29:58] <tiffany> I wonder if nacl will ever be supported by not-chrome
[18:30:26] *** brson changes topic to 'The Rust language | logs: https://botbot.me/mozilla/rust | conduct: https://github.com/mozilla/rust/wiki/Note-development-policy#conduct | package integration: http://hiho.io/rust-ci/'
[18:30:54] <Ms2ger> No
[18:31:01] <cmr> brson: can you put docs.octayn.net in there too?
[18:31:19] <mccr8> tiffany: Google has an early prototype of a way to compile PNaCl to JS, which is sort of like that. :) http://trypepperjs.appspot.com/
[18:31:26] <cmr> (noiseis the only one that builds atm)
[18:31:34] *** Joins: timot (timot@moz-45B39FB4.bredband.tre.se)
[18:31:52] <brson> cmr: interesting! why don't the others build?
[18:31:59] <brson> cmr: and how do you register your docs?
[18:32:01] <cmr> brson: language changes, haven't been updated.
[18:32:03] <eddyb9> mccr8: I've seen emscriptem being ran client-side, dynamically taking LLVM assembly
[18:32:10] <cmr> brson: http://github.com/cmr/docs
[18:32:21] <cmr> brson: uses http://github.com/cmr/doc_builder to build them
[18:32:28] *** Joins: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca)
[18:32:30] <tiffany> I played cube 2 compiled with emscripten
[18:32:54] <brson> cmr: <3
[18:33:02] <tiffany> it was running at about 30 fps compared to the 1000 fps I would get natively
[18:33:25] <benh> pft, still about 7 fps more than a movie
[18:33:40] <eddyb9> tiffany: imagine rust code being compiled and ran, all client-side
[18:33:48] <tjc_> can you tell the difference (visually) between 1000 fps and 100 fps?
[18:34:00] <tjc_> (not trying to be a jerk by asking a rhetorical question -- I actually don't know)
[18:34:02] <strcat> tjc_: well, your monitor is likely 60Hz so no :)
[18:34:03] <tiffany> an online no-install client-side repl sounds like a good way to attract users
[18:34:06] <cmr> tjc_: youcan't, display rate is usually 60hz
[18:34:09] *** Joins: eevee_ (eevee@moz-B2437F13.evrt.wa.frontiernet.net)
[18:34:13] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[18:34:22] <tiffany> tjc_: it reduces input latency for games which only poll input once per frame
[18:34:33] <tjc_> tiffany: Ah, ok. That makes sense
[18:34:41] <cmr> (that's not visual though)
[18:34:41] <tiffany> not that I have a reaction time low enough that 8 milliseconds makes a difference
[18:34:44] *** Quits: eevee (eevee@moz-59EA9CA5.evrt.wa.frontiernet.net) (Ping timeout)
[18:34:49] <tjc_> heh, I know I don't
[18:34:52] *** Quits: timot (timot@moz-45B39FB4.bredband.tre.se) (Ping timeout)
[18:34:58] <benh> having 1000 fps to sample 60 fps from instead of 100 fps sounds like it might be some vague improvement?
[18:35:12] *** Joins: timot (timot@moz-DD0AA6DE.mobile.tre.se)
[18:35:13] <tiffany> sampling 1000 fps down to 60 would allow for pretty good looking motion blur
[18:35:23] <strcat> afaik most modern games don't tie rendering speed to the game engine rate
[18:35:50] <strcat> you could put your game engine in a web worker, I guess :P
[18:35:58] <tiffany> my game engine has rendering completely separate from other functions
[18:36:17] <brson> cmr: It would be great if http://docs.octayn.net/ included links that explained how to register docs
[18:36:49] <eddyb9> strcat: 0-copy ArrayBuffer's across a webworker channel would be fast enough, I guess
[18:37:00] <tiffany> cube 2 has a max framerate of 1000, by the way
[18:37:10] <strcat> eddyb9: does that actually exist?
[18:37:16] <eddyb9> yupp
[18:37:33] <cmr> brson: I agree! Also if it looked pretty and included upstream links to the project. I'll work on it more over the weekend.
[18:37:47] <strcat> eddyb9: heh, so you could actually represent rust's unique pointers as those one day, if asm.js picks up web worker support ;p
[18:37:48] <jdm> strcat: yep. transferrable objects
[18:38:13] <strcat> (and rust's vectors)
[18:38:39] <eddyb9> strcat: you can probably run asm.js inside a webworker already, with FFI for messaging
[18:39:56] <eddyb9> I'm not sure on the details, and only FF implements it AFAIK
[18:40:20] *** brson changes topic to 'The Rust language | logs: https://botbot.me/mozilla/rust | conduct: https://github.com/mozilla/rust/wiki/Note-development-policy#conduct | package integration: http://hiho.io/rust-ci/ | package docs: http://docs.octayn.net'
[18:40:42] <jdm> eddyb9: I don't think that's the case
[18:41:01] <jdm> https://developer.mozilla.org/en-US/docs/Web/Guide/Performance/Using_web_workers#Passing_data_by_transferring_ownership_%28transferable_objects%29
[18:43:34] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[18:43:59] *** Quits: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca) (Quit: canhtak)
[18:46:30] *** Joins: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca)
[18:49:19] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[18:50:06] <brson> cmr: i added a link to docs.octayn.net to the wiki too
[18:50:19] <cmr> brson: cool, thanks
[18:50:40] *** jorendorff_away is now known as jorendorff
[18:52:18] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[18:52:39] *** Quits: Diamond (dick@moz-80556682.ks.ks.cox.net) (Client exited)
[18:53:24] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[18:53:30] *** Quits: geoffhill (geoffhill@moz-244CF33A.amazon.com) (Ping timeout)
[18:54:16] <adridu59> I have started some improvements on the rust doc (not related to rustdoc_ng but the pandoc things, namely tutorial and manual)
[18:57:21] <tikue3> is the runtime integrated directly in the compiler or in libraries?
[18:57:26] *** Quits: eholk (eholk@4371ACE8.7EDA02CF.51B6877.IP) (Quit: eholk)
[18:57:45] <Toussa> we usually dont have to specify #[inline], the compiker is smart enough to do it right>
[18:57:55] <Toussa> - > + ?
[18:58:00] <strcat> Toussa: you need #[inline] to make cross-crate inlining work
[18:58:10] <strcat> otherwise, it's better to leave it off in most cases
[18:58:20] <strcat> all it does beyond that is adjust the threshold LLVM uses for inlining
[18:58:37] <strcat> so instead of using the normal highly tuned threshold, it will place some trust in you that you know better
[18:59:12] *** mccr8 is now known as mccr8|lunch
[18:59:24] <Toussa> ok
[18:59:44] <Toussa> so if i write a a library
[18:59:45] *** Quits: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca) (Quit: canhtak)
[18:59:55] <Toussa> i should inline when needed
[19:00:20] <strcat> yes, at least until we end up with support for LTO between libs
[19:00:22] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[19:00:29] <Toussa> ok
[19:00:38] *** Quits: dherman (dherman@1BB0349.FEF91D35.59163313.IP) (Quit: dherman)
[19:03:30] <myname> just for the record, you are awesome
[19:03:47] *** Joins: geoffhill (geoffhill@moz-244CF33A.amazon.com)
[19:04:17] *** Quits: timot (timot@moz-DD0AA6DE.mobile.tre.se) (Ping timeout)
[19:05:06] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[19:06:01] <Amaranth> Arc is atomic reference counting, not atomic updates, right?
[19:06:36] <strcat> Amaranth: right, but the mutable Arc types implement safe mutable shared data through locks
[19:07:04] * strcat really wants to call it SendRc instead
[19:07:06] <Amaranth> Right but that's just a big old heavy lock
[19:07:12] <strcat> yup
[19:07:18] <Amaranth> So I guess Arc is the most similar to shared_ptr
[19:07:21] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[19:07:28] <strcat> if you wanted to build something like a concurrent hash table, you would start from UnsafeArc
[19:07:35] <Amaranth> People hear shared_ptr uses atomics and think that means it is thread safe
[19:07:55] <strcat> Amaranth: UnsafeArc is shared_ptr without weak ptrs
[19:08:17] <Amaranth> I was actually thinking a concurrent hash table would be a good thing to have
[19:08:34] <Amaranth> Decided to make it extra interesting and started reading about hopscotch hashing
[19:09:36] <Amaranth> Unfortunately I don't think hopscotch hashing is really safe to use for something general purpose, there is no guarantee you'll ever end up with a free slot near the ideal hash position
[19:11:08] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[19:12:03] *** Quits: jdm (jdm@88F51059.F3BBB17D.144F44FA.IP) (Quit: Lost terminal)
[19:12:09] *** Quits: Jesin (Jessin_@moz-D63AB1FC.cc.lehigh.edu) (Quit: Leaving)
[19:12:10] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[19:12:38] *** Joins: GeneralMaximus (ankur@61BCBDA8.F222294B.BE90E62C.IP)
[19:12:49] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[19:13:24] *** Joins: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca)
[19:13:32] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[19:13:50] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[19:15:26] *** Joins: jeffreybaird (jeffreybai@moz-ED3EF543.static.twtelecom.net)
[19:16:33] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[19:20:05] *** Quits: tikue3 (tikue_star@91CF8C6.21C37D63.689607DE.IP) (Ping timeout)
[19:21:04] *** Quits: GeneralMaximus (ankur@61BCBDA8.F222294B.BE90E62C.IP) (Ping timeout)
[19:23:27] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[19:24:13] *** Quits: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca) (Quit: canhtak)
[19:26:02] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[19:26:27] *** Joins: GeneralMaximus (ankur@61BCBDA8.F222294B.BE90E62C.IP)
[19:27:31] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[19:28:01] *** Quits: GeneralMaximus (ankur@61BCBDA8.F222294B.BE90E62C.IP) (Quit: Computer has gone to sleep.)
[19:29:14] *** Joins: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca)
[19:29:31] <brson> i wish i had more rust projects to put on rust ci
[19:29:38] *** Quits: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca) (Quit: canhtak)
[19:29:45] <doomlord_> rust ci=?
[19:29:54] <brson> it's kind of embarrassing that rust-sdl is the only rust package I actually have, and i don't even maintain it
[19:30:06] <brson> doomlord_: http://hiho.io/rust-ci/
[19:30:44] <benh> hiho.io might be my favorite .io domain name yet
[19:31:11] <doomlord_> its for libraries?
[19:31:20] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[19:31:53] <brson> doomlord_: i'm not sure what exactly it supports yet
[19:31:54] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[19:32:37] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[19:32:42] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[19:32:45] *** Quits: fabiand (fabiand@moz-5B0DE248.adsl.alicedsl.de) (Quit: Verlassend)
[19:33:22] <strcat> brson: what is Tube for?
[19:33:39] <strcat> oh uvio uses it, nvm
[19:33:42] *** Quits: Toussa (Mibbit@moz-FF51EDCC.adsl.alicedsl.de) (Quit: http://www.mibbit.com ajax IRC Client)
[19:34:05] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[19:35:38] *** Joins: zokier` (zokier@moz-C4357EA7.kapsi.fi)
[19:37:23] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[19:40:35] *** Quits: feduser (feduser@FF9E6FB7.1E16A669.799BF54A.IP) (Connection reset by peer)
[19:41:15] *** Joins: feduser (feduser@FF9E6FB7.1E16A669.799BF54A.IP)
[19:42:05] *** Parts: a_m0d (dschoof@moz-670D1285.commercial.cgocable.net) ()
[19:42:38] <mikezaby> rust: error while loading shared libraries: libstd-6c65cf4b443341b1-0.8-pre.so: cannot open shared object file: No such file or directory
[19:42:52] <mikezaby> i have this error but i am building 0.9 pre
[19:43:06] <mikezaby> i pulled master some minutes ago
[19:43:26] <mikezaby> how could i fix this?
[19:43:55] *** mccr8|lunch is now known as mccr8
[19:44:29] <mikezaby> i had also 0.8pre installed before
[19:44:43] <pnkfelix> mikezaby: is this occurring during your attempt to rebuild master (i.e. during bootstrap)?  Or is it occurring on your attempt to *use* a newly bootstrapped build?
[19:45:05] <mikezaby> i do
[19:45:09] <mikezaby> ./configure
[19:45:11] <mikezaby> make
[19:45:15] <mikezaby> sudo make install
[19:45:16] *** Joins: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca)
[19:45:25] <mikezaby> from master
[19:45:40] <mikezaby> i removed some folder and .so manualy :p
[19:45:54] *** Quits: valenting (Thunderbir@moz-416F9035.residential.rdsnet.ro) (Ping timeout)
[19:45:56] <eddyb9> most likely not enough
[19:45:58] <mikezaby> i have the same problem when i went from 0.7 to 0.8
[19:46:14] * kmc resists the urge to match (match foo { ... }) { ... }
[19:46:18] *** Quits: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca) (Quit: canhtak)
[19:46:18] <strcat> mikezaby: if you use make install, you're responsible for removing the clutter it leaves behind
[19:46:28] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[19:46:33] <mikezaby> i did it
[19:46:46] <mikezaby> is there a better way to handle this?
[19:46:48] <strcat> via a package manager, it would do make DESTDIR=foo install and then keep track of the files for you
[19:46:48] <pnkfelix> mikezaby: the `make install` step is supposed to print out the names of any files it finds that may cause problems … do you still have the output from that step ?  Did you remove all of those files?
[19:47:06] <strcat> yeah but you'll have things like cargo and 'rust' left around ;p
[19:47:08] *** Quits: geoffhill (geoffhill@moz-244CF33A.amazon.com) (Quit: geoffhill)
[19:47:17] <pnkfelix> strcat: (that is true)
[19:47:28] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[19:47:35] <mikezaby> https://gist.github.com/mikezaby/d468cf928a005f382907
[19:47:36] <pnkfelix> strcat: (there's a limit to the amount of smarts I want to attempt to put into the makefile ...)
[19:47:59] *** Joins: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca)
[19:48:00] <tiffany> is there any way to nest match statements without using an absurd indentation level?
[19:48:06] <pnkfelix> mikezaby: wait a minute, are you actually running `rust` ?
[19:48:06] <strcat> also, make install leaves out stuff like the mime type detection database, etc.
[19:48:10] <tiffany> kmc reminded me of that
[19:48:18] <tiffany> that is the number one source of ugly in my rust code
[19:48:23] <pnkfelix> mikezaby: as opposed to `rustc` ?
[19:48:32] <mikezaby> yes
[19:48:36] <eddyb9> tiffany: without a local?
[19:48:46] <mikezaby> i just type rust
[19:48:54] <pnkfelix> mikezaby: that's the problem, we've gotten rid of the `rust` binary, so you have an old one left around
[19:48:55] *** Quits: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca) (Quit: canhtak)
[19:48:56] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[19:49:14] <pnkfelix> (sigh)
[19:49:17] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[19:49:24] <pnkfelix> (this was supposed to *simplify* things.  :(   )
[19:49:25] *** Joins: meyer (Mibbit@moz-61DEC6A1.cruznet.ucsc.edu)
[19:49:40] <benh> maybe we should replace it with a shell script that goes "please use rustc directly" and exits
[19:49:45] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[19:49:53] <tiffany> eddyb9: how does a local help?
[19:49:54] <mikezaby> oh ok
[19:50:52] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[19:50:57] <eddyb9> tiffany: let bar = match(foo) {...}; match(bar) {...};
[19:51:09] <tiffany> match x { y => ..., z(foo) => match do_something_with(foo) { ... } } is my intended use case
[19:51:09] <tiffany> if it's an Option or a Result I can use and_then
[19:51:16] <tiffany> ah
[19:51:29] *** Joins: geoffhill (geoffhill@moz-244CF33A.amazon.com)
[19:52:35] <mikezaby> i used to develop with rust run
[19:52:44] <mikezaby> how could i do this with rustc?
[19:52:59] <mikezaby> is it possible/
[19:53:00] *** Joins: Toussa (Mibbit@moz-FF51EDCC.adsl.alicedsl.de)
[19:53:20] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[19:53:24] <strcat> rustc foo.rs && ./foo
[19:53:47] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[19:53:53] <Toussa> does knowing haskell can help having a better understanding of rust?
[19:54:17] *** Quits: meyer (Mibbit@moz-61DEC6A1.cruznet.ucsc.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[19:54:30] <tjc_> Toussa: Yes, as far as Rust's type system and things like pattern matching go
[19:54:38] <dcrewi> Toussa: the same way that knowing C can help one understand rust, I guess
[19:54:41] <strcat> mikezaby: if you really want a shortcut, define a function like `rust() { rustc $1 && ./$1 }` in your shell
[19:54:42] <tjc_> as well as traits, which are inspired by Haskell's type classes
[19:54:53] <benh> i'd say it saves you like half an hour grokking match ... { } and traits
[19:55:07] <benh> and costs you years of your life cursing that traits aren't as fully featured as ghc's typeclasses
[19:55:20] <tjc_> benh: by "fully featured", you mean "confusing and underspecified", right :-)
[19:55:24] <mikezaby> strcat thanks :)
[19:55:27] <mikezaby> i ll do
[19:55:39] <eddyb9> strcat: I have a fancy q++ that compiles foo.cc to foo, with custom flags, and then runs foo. it uses at least sed, though
[19:55:49] <mikezaby> i want this to testing small code examples
[19:55:59] <tjc_> (n.b. I'm not claiming that Rust's traits are any less confusing and underspecified. Nor am I claiming that they're more so :-)
[19:56:04] <strcat> eddyb9: you can use 'make foo' without a Makefile :P
[19:56:05] <benh> :D
[19:56:19] <strcat> eddyb9: that's what I usually do
[19:56:29] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[19:56:35] <eddyb9> strcat: oh, damn, didn't think the default rules could be abused like that
[19:56:49] <strcat> yeah and then you can just use CXXFLAGS/LDLIBS/LDFLAGS
[19:57:21] <Toussa> ok so anyway i don't think haskell is a bad thing to learn anyway
[19:57:35] <Toussa> but focus on rust =P
[19:57:43] <strcat> learning haskell to learn rust would be way harder than just learning rust :)
[19:57:44] <benh> strcat: i got into the habit of doing that and now i have the most verbose C[XX]FLAGS set, with -pedantic and all that, and I have to remember to clear it whenever using make for other people's code ;)
[19:58:15] <Toussa> strcat: indeed XD
[19:58:17] <strcat> clang is really nice because it has -Wmost
[19:58:36] <strcat> with gcc, you have to set 20+ warnings that aren't set in -Wall + -Wextra
[19:58:38] * strcat sighs
[19:58:48] <benh> I didn't get very far with -Weverything
[19:58:55] <strcat> you never want -Weverything
[19:59:31] <benh> after not writing much code but some rust for the past week or so, it's hard to remember what all those warnings could possibly be good for
[19:59:34] <eddyb9> -Werror is included in -Weverything?
[19:59:43] <strcat> eddyb9: no
[19:59:54] <strcat> -Wmost is all generally useful warnings
[20:00:03] <strcat> -Weverything includes broken, experimental and incredibly annoying ones
[20:00:16] <strcat> still need to flip on -Werror yourself if you want it
[20:00:19] <eddyb9> add -Werror on top to force perfect code
[20:00:34] *** Joins: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca)
[20:00:54] <eddyb9> (the quotes around perfect are left as an exercise to the reader)
[20:01:11] *** Joins: Ms2ger` (Ms2ger@D2CDF20A.29977EA1.187A1082.IP)
[20:01:24] <benh> I'm vaguely excited about these memory sanitizer option i've heard about, i got to read up on that if i write c++ again
[20:01:28] *** Quits: Ms2ger (Ms2ger@4C3AB550.528524A1.F15B0BB3.IP) (Ping timeout)
[20:01:56] <eddyb9> memory sanitizer is not a bad idea for unsafe Rust code either
[20:02:32] <eddyb9> you have the luxury of only instrumenting unsafe code in Rust :P
[20:02:43] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Quit: victorporof)
[20:02:51] <strcat> benh: they have a lot of switches now ;p
[20:02:56] *** Quits: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca) (Quit: canhtak)
[20:02:57] <strcat> http://clang.llvm.org/docs/UsersManual.html#controlling-code-generation
[20:03:03] *** Joins: meyer (meyermagic@moz-61DEC6A1.cruznet.ucsc.edu)
[20:03:37] <benh> eddyb9: i'd assume some of the trickier corruptions happen when your unsafe code works fine but leaves something in a state that safe code doesn't expect
[20:04:12] <strcat> or when the bug is in the safe code that the unsafe code calls and assumes is correct
[20:04:18] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[20:04:38] <eddyb9> strcat: was going to ask, can I disable that stack check prelude from llvm flags? or is there no llvm flags/options passthru in rustc?
[20:04:57] <strcat> there is a pass through for llvm but you might not be able to disable it
[20:05:02] <mccr8> ASAN is amazing
[20:05:49] <eddyb9> strcat: does every function get it?
[20:05:53] <pnkfelix> hmm, does format! not support the width parameter for {:s} ?
[20:06:06] <strcat> eddyb9: all except the entry point afaik
[20:06:26] <eddyb9> strcat: can I write the entry point in haskell?
[20:06:33] <eddyb9> *rust (I'm tired)
[20:06:49] <pnkfelix> (no never mind, it does)
[20:07:52] <clonejo> How can I cast u8 to a T where T: Int + Unsigned without triggering a non-scalar cast? That operation seems safe to me.
[20:08:53] <kimundi> clonejo: What do you mean?
[20:09:24] <clonejo> I want to turn a u8 into a bigger unsigned integer with the same bits set.
[20:09:24] *** Joins: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca)
[20:09:48] <kimundi> We have conversion traits for that
[20:10:19] <clonejo> yes, but I don't want to write explicit code for u8, u16 and u32
[20:10:29] <kimundi> YOu don't need to, it'S generic
[20:10:41] * kimundi looks them up
[20:11:01] <mikezaby> error: glob import statements are experimental and possibly buggy
[20:11:10] <mikezaby> how can i fix this?
[20:11:19] *** Quits: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca) (Quit: canhtak)
[20:11:19] <pnkfelix> mikezaby: you have two options
[20:11:35] <kimundi> mikezaby: Not use "use ..::*" anyomore, or reenable them with  a featur switch
[20:11:38] <pnkfelix> mikezaby: 1. replace your usages of `use foo::bar::*` with explicit lists
[20:11:47] <kimundi> god my spelling...
[20:11:58] <pnkfelix> mikezaby: 2. figure out how to do the other thing kimundi
[20:12:00] <pnkfelix> said
[20:13:36] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[20:13:37] <kimundi> rusti: let x: uint = std::num::FromPrimitive::from_u8(4u8)
[20:13:37] -rusti- pastebinned 6 lines of output: http://sprunge.us/EcjK
[20:13:41] <kimundi> rusti: let x: uint = std::num::FromPrimitive::from_u8(4u8); x
[20:13:42] -rusti- pastebinned 9 lines of output: http://sprunge.us/FgVH
[20:13:55] <kimundi> rusti: let x: uint = std::num::FromPrimitive::from_u8(4u8); x.unwrap()
[20:13:56] -rusti- pastebinned 12 lines of output: http://sprunge.us/PWWI
[20:14:07] *** Parts: threecreepio (jdp@moz-627F18B2.bredband.comhem.se) ()
[20:14:16] <kimundi> rusti: let x: uint = std::num::FromPrimitive::from_u8(4u8).unwrap(); x
[20:14:17] -rusti- 4u
[20:14:29] <kimundi> clonejo: ^
[20:14:40] <clonejo> ah, nice
[20:15:42] *** Quits: meyer (meyermagic@moz-61DEC6A1.cruznet.ucsc.edu) (Ping timeout)
[20:16:08] *** Joins: meyer (meyermagic@moz-61DEC6A1.cruznet.ucsc.edu)
[20:16:15] <mikezaby> are there any plan for smaller version before version 1
[20:16:25] *** Joins: Florob (Florob@moz-39532932.de)
[20:16:29] <mikezaby> so we can track changes easiest?
[20:16:34] <kimundi> mikezaby: For what?
[20:17:01] <mikezaby> i mean
[20:17:10] <mikezaby> somethin like 9.1, 9.2
[20:17:18] <mikezaby> 0.9.1*
[20:17:22] <strcat> the version number is a semver
[20:17:32] <strcat> it will go 0.9, 0.10, 0.11
[20:17:41] <strcat> like most other version numbers
[20:18:01] *** Quits: Jackneill (Jackneill@moz-5C6C0907.pool.digikabel.hu) (Input/output error)
[20:18:08] <strcat> another . would imply we support versions post-release with bug fixes
[20:19:31] <pcwalton> I remain hopeful that 0.9 will be the last release before 1.0 but I fully admit it's a long shot at this point ;)
[20:19:35] *** Joins: pepper_chico (pepper_chi@moz-29CFA00C.dsl.telesp.net.br)
[20:19:42] <pcwalton> still, I don't think it's *much* of a long shot.
[20:19:53] <doomlord_> .9, .95, .975, ... ?
[20:19:55] *** Quits: tjc_ (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[20:20:02] <myname> .99999999999999999999875
[20:20:04] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[20:20:10] * pcwalton wishes he weren't writing Xlib at the moment
[20:20:14] <strcat> the TeX version number converges to pi
[20:20:21] <pcwalton> writing Xlib-interfacing servo code, that is
[20:20:26] <pepper_chico> food for thought on rust design? since it wants to target the c++ realm http://nosubstance.me/articles/2013-10-11-yeppp-a-trivial-test/
[20:20:35] <myname> strcat: brilliant
[20:20:51] <strcat> it's 3.1415926 atm
[20:20:57] <strcat> they just add a digit
[20:22:29] <heftig> 3.1415926 atmospheres?
[20:22:34] <Luqman> pcwalton: i thought xcb was preferred over xlib nowadays
[20:22:40] <pcwalton> it is!
[20:22:45] <pcwalton> unfortunately it doesn't work for this ;)
[20:22:50] <dcrewi> I suppose if you try you could come up with a worse way to write versions than that
[20:22:54] <pnkfelix> heftig: atm == "at the moment"
[20:23:00] <heftig> pnkfelix: i know
[20:23:07] <pcwalton> EGL might work but it's even more experimental so...
[20:23:29] <pcwalton> apparently from talking to jgilbert this is probably gonna be racy but I don't care, we'll do it right at some point
[20:23:33] <pcwalton> I just want to land it because it's better
[20:23:34] <pnkfelix> heftig: oh sorry.  IRC doesn't always carry humor properly
[20:24:01] *** Joins: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[20:24:10] <pcwalton> pnkfelix: file a bug
[20:25:06] * pnkfelix gets trapped in an infinite loop trying to detect humor
[20:25:58] <heftig> pcwalton: how much does servo interface with xlib directly?
[20:25:59] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[20:26:13] <pcwalton> sadly more than it should
[20:26:16] <pcwalton> it's for cross process GL
[20:26:21] <pcwalton> has to talk GLX to do that
[20:26:44] <heftig> no early wayland support?
[20:26:50] <pcwalton> we *could* just remote all the GL commands like Chrome does but then we'd have to modify Skia...
[20:27:02] <pcwalton> it will probably be inevitable but I don't want to do it now, have to walk before we can run
[20:27:25] <heftig> I think the more you depend on X the harder that will be; using EGL sounds nice
[20:27:36] <pcwalton> we don't really depend on X; we have it working on Mac
[20:27:50] <pcwalton> having to support Mac basically ensures we will get no hard X dependency
[20:27:57] <pcwalton> it's just another backend
[20:28:15] <pcwalton> (furthermore I don't *really* agree with GL remoting... it's basically saying we think GPU manufacturers are incompetent and can't secure their drivers, which I don't believe)
[20:28:26] *** Joins: azita_ (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[20:28:34] <heftig> so chrome has a detected gpu rendering process?
[20:28:37] <heftig> er
[20:28:39] <heftig> dedicated
[20:28:41] <pcwalton> yeah and it IPC's all GL commands over
[20:28:56] <pcwalton> (there have been exploits in this IPC mechanism btw; it was one of the Pwnium exploits)
[20:29:27] <heftig> on the odd chance that someone tries to exploit the gpu using webgl?
[20:29:32] *** Joins: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca)
[20:29:40] <strcat> I don't think it's an odd chance
[20:29:44] <pcwalton> or just by compromising the render process and issuing arbitrary GL commands
[20:30:16] <heftig> hm
[20:30:29] <strcat> it might be unlikely someone would find an exploitable bug in the FOSS intel drivers, but I'm sure a fuzzer would find you dozens of vulnerabilities in the cross-platform nvidia one
[20:30:29] <pcwalton> so to be clear I will remote GL commands if I have to, but I think that it's the GPU manufacturers' problem and they should fix it
[20:30:38] <pcwalton> before I do :)
[20:30:40] <strcat> considering they had an exploitable bug when you rendered pngs of a certain size...
[20:30:46] <heftig> my GPU still hang regularly if I run Minecraft :p
[20:30:54] <pcwalton> DOS's aren't exploits
[20:30:58] * kmc laughs out loud at the implication that the open source graphics drivers in Linux are high-quality code
[20:30:59] <pcwalton> DOSing the GPU is pretty easy
[20:31:04] *** Quits: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca) (Quit: canhtak)
[20:31:06] <strcat> kmc: the intel ones are
[20:31:22] <heftig> though i'm not even trying to DoS the GPU
[20:31:30] <strcat> they have at least 10-20 employees working on that stack
[20:31:42] <pcwalton> I'm not sure remoting even buys you that much, all it does is allow you to enforce policies... but if you can call an API locally you can usually call it remotely as well
[20:31:43] <strcat> and they ship in real products
[20:31:45] <Liam`> kmc: nouveau = best driver
[20:32:00] <pcwalton> it lets you clear out textures and such
[20:32:02] <kmc> strcat: true, it's probably better than most
[20:32:03] <pcwalton> that's the biggest win
[20:32:08] <heftig> strcat: i'm on intel :p
[20:32:23] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[20:32:24] * bstrie does not speak french, skimming the french rust presentation from reddit.
[20:32:28] <pcwalton> "remoting APIs == security" is as much as fallacy as "virtual machines == security"
[20:32:34] <kmc> still my experience from reading lots of Linux bug patches is that DRI is one of the scariest parts of the kernel, and some of those examples were from the Intel drivers
[20:32:34] * bstrie looks at title of first comment: "Et go ?"
[20:32:36] * bstrie le sigh
[20:32:43] <Ms2ger`> magic == security
[20:32:48] <kmc> so yeah I hesitate to expose all that attack surface to untrusted JS
[20:32:48] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[20:32:48] *** azita_ is now known as azita
[20:32:50] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[20:32:58] *** Joins: mib_lg0dm8 (Mibbit@moz-B234C23B.rev.numericable.fr)
[20:33:07] <bstrie> Ms2ger`: no, no, other way around
[20:33:12] <strcat> kmc: dri2 doesn't provide security from local attacks
[20:33:21] <Ms2ger`> My == is symmetric, dammit! :)
[20:33:24] <bstrie> haha
[20:33:30] <strcat> pretty sure you can look at buffers you're not supposed to
[20:33:32] <mikezaby> i add #[feature(globs)];
[20:33:32] <Liam`> bstrie: link?
[20:33:36] <pcwalton> kmc: I'd like to see if we can lock down the GL stuff to only what we need
[20:33:38] <bstrie> Liam`: http://linuxfr.org/news/presentation-de-rust-0-8
[20:33:44] <mikezaby> and i get error error: can't find crate for `std`
[20:33:44] <pcwalton> maybe that needs remoting, I'm not sure
[20:33:50] <bstrie> appears to have been given my sinma, which is a name that sounds familiar
[20:33:56] <bstrie> *by
[20:34:13] <Liam`> oh right, i don't read French. I don't know what I expected
[20:34:28] <heftig> pcwalton: by the way, is a GLESv2 implementation used if possible, or is everything translated to GL?
[20:34:33] <strcat> kmc: still... the nvidia driver is more code than a linux kernel + the drivers needed on a specific set of hw :s
[20:34:38] <kmc> yep
[20:34:38] <mcpherrin> pcwalton: Use ANGLE to translate to directX 9, then Wine's directx->gl translater.  That'll sanitize your input nicely ;)
[20:34:40] <pcwalton> we try to limit ourselves to GLES
[20:35:05] <mcpherrin> security through lots of layers.
[20:35:07] <pcwalton> heh
[20:35:18] <Ms2ger`> Layers == security?
[20:35:31] <heftig> Abstraction == security?
[20:35:42] <kmc> strcat: maybe dri doesn't even claim to provide isolation, but I'm more thinking about like, getting the graphics card to DMA into kernel memory, or just the bog standard exploitable kernel bugs (overflows, bad length calculation, etc.)
[20:35:44] <bstrie> "I do not like function syntax is different for a named function and a closure. I prefer the syntax of javascript on this point, which is more consistent."
[20:35:52] <kmc> ;_;
[20:35:57] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[20:36:05] <pcwalton> kmc: I wonder to what degree we can sandbox DRI usage to only what we need with seccomp-bpf or something
[20:36:21] <Ms2ger`> bstrie, like function() {} and () => {}? :)
[20:36:26] <kmc> that would be cool
[20:36:27] <heftig> kmc: iirc they're going to open up the DRI interface even more, with those render nodes
[20:36:45] <pcwalton> in theory the render task actually needs no GL at all, except for WebGL or GPU rendering mode
[20:37:13] <pcwalton> given that we will probably have to remote WebGL at least from the script task to the renderer task remoting it cross process doesn't sound that terrifying
[20:37:17] <pcwalton> annoying, to be sure
[20:38:21] *** Joins: Sonarpulse (user@moz-424CB7EB.cs.brown.edu)
[20:39:05] *** Joins: valenting (Thunderbir@moz-416F9035.residential.rdsnet.ro)
[20:39:08] <strcat> bstrie: where did you find that comment? ha
[20:39:20] <heftig> strcat: first comment of that french rust page
[20:39:33] <heftig> "It is always a soapy slope compare languages."
[20:39:38] <heftig> nice one, google translate
[20:39:41] <bstrie> strcat: machine-translation from the french link above (found on reddit)
[20:39:55] <bstrie> "I would say (with all the oratorical precautions) that Rust is mostly awaited by C + + developers who love C + +, but are frustrated by the lack of language replacement (even if there is D). Go to address more developers Ruby / Python who want a more efficient and square language."
[20:39:58] <Ms2ger`> "BTW je n'aime pas la syntaxe des fonctions qui est diffrente pour une fonction nomme et pour une closure. Je prfre la syntaxe du javascript sur ce point, qui est plus cohrente."
[20:40:00] <bstrie> google translate is delightful
[20:40:01] *** Joins: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca)
[20:40:06] <pcwalton> Go is a square language
[20:40:13] <bstrie> hahaha
[20:40:38] <strcat> http://translationparty.com/
[20:40:43] <Ms2ger`> "I always enjoy a tasty pint contorting language."
[20:41:06] <strcat> "Go is a square language" infinite loops
[20:41:06] <bstrie> which is in response to "It is always a soapy slope compare languages."
[20:41:08] <strcat> :)
[20:41:24] <bstrie> Ms2ger`: I think we're missing out on some sort of french pun
[20:42:13] <bstrie> "The advantage of Rust Go, this is not to ignore the last 40 years of research in computer science (although, as said in the telegram, the last 15 years are not included in it)."
[20:42:25] <Ms2ger`> telegram, eh
[20:42:41] <Ms2ger`> "Je trouve qu'indiquer une variable avec let mut est trs chiant, a aurait t bien plus simple de n'utiliser qu'un seul mot, du genre mut ou var."
[20:42:50] <Ms2ger`> Apparently "let mut" is the worst part of the language
[20:42:54] <bstrie> RUST: PROUDLY INCORPORATING ALL PL RESEARCH BETWEEN 1972 AND 1998
[20:42:55] <Ms2ger`> Go y'all!
[20:43:56] <Toussa> Im french if you need
[20:44:01] <Liam`> telling a friend about Rust... this is his first question: <emery> what kind of beard does the Rust guy have
[20:44:16] <Ms2ger`> Toussa, I know enough French to have a good laugh ;)
[20:44:43] <bstrie> Liam`: tim is our bearded one around here
[20:44:57] *** Quits: Kruppe (user@moz-EE1E894A.home3.cgocable.net) (Client exited)
[20:45:05] *** Quits: nkoep (nik@moz-A4CD7309.pool.mediaways.net) (Ping timeout)
[20:45:05] <Ms2ger`> jdm has a bit of a beard too
[20:45:20] <Toussa> Ms2ger: ;) but you know, the last thing to do on a french forum website, is to read the comment
[20:45:31] <Toussa> Ms2ger`: ;) but you know, the last thing to do on a french forum website, is to read the comment
[20:45:49] <bstrie> Toussa: indeed, because the comments come last on the page! :)
[20:45:49] <Ms2ger`> Toussa, that's not just on French websites...
[20:46:19] <bstrie> "(Edit: grilled) This is probably we do not use mutable variables, as they are very chiantes the compiler :-)"
[20:46:24] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Client exited)
[20:46:41] <Toussa> Ms2ger`: that's true! but we are known to just complain(which is not that incorrect...)
[20:47:57] <bstrie> for some reason google translate wants to often translate "Go" as "GB"
[20:48:08] *** Joins: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[20:48:12] <sp3d> giga-octets -> giga-bytes
[20:48:54] <kmc> haha
[20:49:05] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[20:49:32] <Ms2ger`> You know what they call 6-bit bytes?
[20:50:05] <Liam`> I've read the Rust tutorial, installed Rust, and have written one program, Hello World. Where should I go from here?
[20:50:19] *** Quits: meyer (meyermagic@moz-61DEC6A1.cruznet.ucsc.edu) (Ping timeout)
[20:50:33] <doomlord_> work on IDE support :)
[20:50:43] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[20:50:54] <Liam`> but the code already looks nice in vim
[20:51:19] <bstrie> Liam`: now go reimplement all of openssl
[20:51:23] *** Quits: pnkfelix (pnkfelix@moz-62BA0D57.public.wayport.net) (Quit: Leaving.)
[20:51:40] <bstrie> or maybe, do a fibonacci
[20:51:44] <Sonarpulse> I've noticed that it is common to see code like <declare struct/enum asdf > impl asdf { ... }
[20:51:55] <bstrie> Liam`: what interests you about rust?
[20:52:11] <Liam`> The fact that I write Go professionally, and Rust and Go are similar in feature sets
[20:52:19] <kmc> they really aren't :'(
[20:52:26] <Sonarpulse> Coming from haskell. It seems odd to have an implementation without a trait.
[20:52:33] <bstrie> well they look similar in the same way that ruby and python look similar :)
[20:52:44] <Ms2ger`> Coming from JS: hey, types!
[20:52:46] <doomlord_> coming from c++ i miss ad-hoc polymorphism
[20:52:50] <kmc> Sonarpulse: "impl" is used both to implement traits and to define methods that aren't part of any trait
[20:52:51] <myname> kmc: there should be a "differencey between rust and go" page
[20:53:01] <doomlord_> but there's a lot of things i dont miss..
[20:53:02] <kmc> myname: that would still invite the comparison
[20:53:07] <kmc> they're aiming for totally different niches
[20:53:08] *** Quits: jordyd (jordyd@moz-DE1918CB.seg43.ucf.edu) (Ping timeout)
[20:53:12] <Sonarpulse> kmc: what is the the point of a method without a trait?
[20:53:13] <Sonarpulse> it'
[20:53:15] <myname> they do?
[20:53:20] <bstrie> Sonarpulse: just to be able to use methods
[20:53:24] <bstrie> rather than functions
[20:53:24] <kmc> Sonarpulse: just lets you call x.f() rather than f(x)
[20:53:28] <bstrie> that's it
[20:53:29] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[20:53:33] <kmc> Sonarpulse: which also means that you don't need to explicitly import the name 'f'
[20:53:41] *** Quits: valenting (Thunderbir@moz-416F9035.residential.rdsnet.ro) (Ping timeout)
[20:53:43] <bstrie> Sonarpulse: we like to do it because it avoids polluting namespaces
[20:53:51] <Liam`> myname: or a comparison between various implementations of basic programs, eg, recursive fibonacci, in Go and Rust
[20:53:51] *** Quits: Palmik (palmik@moz-11EA685D.pks.muni.cz) (Quit: Lost terminal)
[20:54:13] <myname> kmc: what exactly is so different about rusts niche in comparisson to gos?
[20:54:15] <doomlord_> method call syntax is nice for chaining operations without nesting
[20:54:27] <kmc> myname: Rust is a language you use when you can't afford garbage collection everywhere
[20:54:37] <Sonarpulse> I read tenative plans to make .method(..) just sugar on top of normal function application
[20:54:40] <kmc> that's why we have all this complicated stuff with different kinds of pointers, borrow checking, etc.
[20:54:48] <bstrie> Liam`: we always welcome cross-language benchmarks. if you write any, let us know before you publish anything so we can make sure your code is up-to-date :)
[20:54:53] *** Joins: Kruppe (user@moz-EE1E894A.home3.cgocable.net)
[20:55:04] <doomlord_> i would welcome that ffor sure
[20:55:11] <bstrie> Sonarpulse: the eventual plan is to make it *possible* for methods to be called like normal functions
[20:55:12] <Liam`> bstrie: have to learn Rust before I get to trying to benchmark...
[20:55:14] <doomlord_> uniform call syntax
[20:55:15] <Ms2ger`> kmc, no, that language is C or C++ :)
[20:55:17] <bstrie> Sonarpulse: but that's a rust 2.0 feature
[20:55:25] <kmc> Ms2ger`: that's what we're trying to change, yes
[20:55:28] <Ms2ger`> kmc, rust is the language when you want to do that safely :)
[20:55:35] <kmc> you should always want to do it safely
[20:55:35] <Sonarpulse> Ah ok. would the converse be true? functions called like methods?
[20:55:46] <kmc> unless you are writing challenges for an exploit contest :)
[20:55:49] <bstrie> Sonarpulse: nope, afaik
[20:56:01] <bstrie> Sonarpulse: but all these plans are nebulous at the moment. still room for interpretation
[20:56:05] <Ms2ger`> kmc, I work on Gecko, so technically I am :)
[20:56:08] <kmc> haha
[20:56:10] <strcat> Liam`: if you find somewhere where equivalent rust and C code doesn't perform in the same ballpark, it's a fixable compiler bug
[20:56:29] <kmc> the intent is that Rust should be pleasant enough for unsafe things too -- you just need to own up to the fact that you're doing unsafe things, with the 'unsafe' keyword
[20:56:29] <bstrie> Liam`: indeed, we consider perf mismatches to be bug-worthy
[20:56:36] *** Joins: jordyd (jordyd@moz-DE1918CB.seg43.ucf.edu)
[20:56:37] <bstrie> if we're not fast, we're broken
[20:56:42] <strcat> the only interesting question is how much code you can write equivalent to the performance of the C code without unsafe {}
[20:56:58] <Sonarpulse> Ok. Without it being true, I guess it makes these traitless impls overlap less with modules
[20:57:06] <strcat> so really, where are you able to build cost-free safe abstractions
[20:57:15] <strcat> and where do the abstractions have a performance cost
[20:57:19] <bstrie> Sonarpulse: module access is denoted by ::, intentionally separate from method access with .
[20:57:39] <kmc> myname: Rust is aimed at low-latency and raw-compute-power tasks... Go is designed for writing massively concurrent servers, where you aren't CPU bound and you can afford some GC latency on a subset of your requests
[20:57:50] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Quit: Linkinus - http://linkinus.com)
[20:57:51] <cmr> strcat: ping
[20:57:56] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[20:57:57] <kmc> and frankly I think our problem is a lot more interesting that Go's
[20:57:58] <Sonarpulse> well if you have a static method in a traitless impl
[20:58:01] <strcat> cmr: pong
[20:58:08] <Sonarpulse> I think I saw new that way
[20:58:18] <kmc> evidence: the fact that Go is doing a fine job solving their problem while ignoring all PL research from the past 40 years :)
[20:58:26] <Sonarpulse> then wouldn't you would use :: either way?
[20:58:44] <cmr> strcat: Is it possible to mirror your repo on pkgbuild.com?
[20:58:54] <strcat> cmr: mirror?
[20:59:06] <strcat> as in on the arch mirrors?
[20:59:19] <cmr> Well my uni has its own mirror, but same idea.
[20:59:25] <strcat> we don't have a repo that would be appropriate to put it in, and I don't really have a way to sign it
[20:59:26] <bstrie> booo, rust doesn't let me impl methods on ()
[20:59:35] *** Joins: nkoep (nik@moz-C7DA435.vpn.rwth-aachen.de)
[20:59:37] <Liam`> kmc: so far, the most intersting parts about Rust (coming from Go) are the memory management concepts (still trying to grasp this idea of "ownership") and the trait/implementation design compared to go's interfaces
[20:59:38] <strcat> (since it's not built on my computer, I can't really sign it)
[20:59:43] <Ms2ger`> bstrie, sounds like there's a story behind that :)
[20:59:51] <kmc> Go also just has very little abstraction capability... you can't define your own generic anything
[20:59:58] <cmr> I just want it local, since the entire labs here have it installed, and pulling it down at 200KB/s is awful.
[21:00:10] <myname> Liam`: and pattern matching!
[21:00:14] <myname> pattern matching is awesome
[21:00:17] <Liam`> pattern matching?
[21:00:24] <strcat> kmc: and it still has data races
[21:00:34] <myname> enum Game { Win, Tie, Lose }
[21:00:54] <Liam`> oh right. those weird things. Haven't put much thought into those, yet
[21:00:56] <myname> fn foo(g: Game) { match g { Win => ..
[21:01:14] <benh> pft, you gotta put fields into those variants or it's just a switch ;)
[21:01:25] <myname> well, yeah
[21:01:47] <kmc> once you learn algebraic data + pattern matching, the data types + control flow of other languages seems incredibly primitive
[21:01:54] <cmr> kmc: yeah, they really do.
[21:01:59] <strcat> they'll never appeal to C++ programmers, because learning the language is a sunk cost and Go is a step backwards in terms of level of abstraction and performance
[21:01:59] <Liam`> yeah, i'm familar with the use case with fields. That's very similar to Go's switch var.(type){ ... }
[21:02:06] <myname> actually i do have Win(x, y, player), Tie(x, y), Other(x, y, rating, childs)
[21:02:09] <strcat> you have to provide something C++ doesn't provide to appeal to existing C++ programmers
[21:02:13] <kmc> I have a hard enough time with Rust's versions of these being slightly awkward compared to Haskell or ML
[21:02:25] <Amaranth> Liam`: Isn't switch var.(type) a runtime thing though?
[21:02:30] <strcat> and memory safety doesn't really count, because everyone likes to thing they write perfect code ;p
[21:02:30] <Liam`> Amaranth: it is.
[21:02:33] <Amaranth> Using RTTI, I mean
[21:02:39] *** Joins: valenting (Thunderbir@moz-416F9035.residential.rdsnet.ro)
[21:02:41] <benh> kmc: in any way we can improve on?
[21:02:49] <kmc> so it uses the dynamic type system as a single ad-hoc extensible variant type
[21:02:55] <Liam`> Amaranth: Go seems to do a lot of things at runtime that it could do at compile-time
[21:02:55] <kmc> sigh
[21:03:08] <Amaranth> Liam`: It is easier and makes the compiler faster :)
[21:03:33] <Liam`> Amaranth: and using C in Go is a fucking nightmare
[21:03:42] <Liam`> and it's slow
[21:03:47] <Amaranth> Using C in Go is not worth it
[21:04:01] <kmc> benh: some things that are fixable but probably not worth it at this stage; some that are harder to fix
[21:04:11] <Liam`> which is another plus for Rust- better C interoperability (at least, based on what i've read)
[21:04:16] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[21:04:17] <Amaranth> Right the per-call overhead is really bad so you'd better be doing a lot in C or not doing it very often
[21:04:21] <kmc> benh: the fact that structs are different from enums with one variant is weird
[21:04:31] <Amaranth> That's actually why I decided to learn Rust
[21:04:48] <Amaranth> Was tinkering with the idea of making something with Go, wanted to call out to C things, benchmarked it and cried
[21:04:56] <Liam`> yea
[21:05:24] <Liam`> also, the fact that Rust is self-hosting is neato. Go is written in C and this weird *.goc format that they made
[21:05:44] <myname> lol
[21:05:48] <myname> didn't know that
[21:05:54] <strcat> they wouldn't ever write 6g in Go because it would be too slow
[21:06:04] <kmc> Liam`: not only is the rust compiler written in rust, but the rust runtime system is written in rust
[21:06:08] <kmc> which is a lot cooler and more unusual
[21:06:12] <benh> Not that it's a fair comparison, but rustc is also kinda slow ;)
[21:06:17] <Amaranth> It's not all Rust yet, still some C++ in there
[21:06:21] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[21:06:24] <kmc> it's mostly rust now, though
[21:06:40] <Liam`> *.goc is a format that allows the Go developers to write Go packages in C, such as the Runtime package
[21:06:41] <strcat> Amaranth: well, the amount of C++ is fairly uninteresting - it still uses libc, so that's the big dependency
[21:06:59] *** Joins: tjc_ (tjc@moz-7B0110AD.mv.mozilla.com)
[21:07:02] <strcat> the C++ is just there because someone hasn't taken the time to rewrite it
[21:07:05] <Amaranth> strcat: I'm ok with it using libc, no need to reinvent the wheel there
[21:07:15] <strcat> well there are good reasons to reinvent that wheel
[21:07:20] <benh> We'd probably like to avoid the FFI 
[21:07:26] <Amaranth> Although it doesn't buy us automatic cross platform support so maybe it isn't worth keeping around
[21:07:29] <strcat> if rust is going to use segmented stacks, using libc has a cost
[21:07:36] <strcat> if it's not, then sure, using libc makes sense
[21:07:49] *** Quits: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca) (Quit: canhtak)
[21:07:49] <Amaranth> But if you want to toss libc you need to toss libuv too
[21:07:55] <Liam`> segmented stacks?
[21:08:02] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[21:08:03] <strcat> libuv is a problem for other reasons ;p
[21:08:04] <cmr> Liam`: similar to what go has
[21:08:12] <cmr> lets you grow the stack at runtime
[21:08:17] <Liam`> yeah, i found this. http://stackoverflow.com/questions/4226964/how-come-go-doesnt-have-stackoverflows
[21:08:27] <kmc> in order to support having lots of lightweight tasks, each with their own stack
[21:08:33] <kmc> and in order to catch stack overflows
[21:08:39] <strcat> kmc: it's not required for the latter
[21:08:45] <strcat> it's one way of doing it
[21:08:46] <kmc> and it's not required for the former, on 64-bit
[21:09:05] <strcat> adding a prelude to every call is faaaaar more overhead than you need just for stack safety
[21:09:19] <Amaranth> I thought it was the other way around, in 64-bit we have address space to burn so we can just lazy load a huge stack
[21:09:30] <kmc> that's what I mean
[21:09:30] <Amaranth> But for 32-bit you want to keep it small and grow as needed
[21:09:37] <Amaranth> Oh I misread
[21:09:45] <strcat> well, you don't really want to keep it small on 32-bit, if you care about performance
[21:09:56] <strcat> you want to keep it small in the special case of writing a server where you scale to many clients by using tasks
[21:10:12] <Amaranth> strcat: You want it small but not too small? How much is too small? Depends on your application :)
[21:10:22] <Amaranth> Whoops extra ?
[21:10:35] <kmc> requiring contiguous stacks puts pressure on address space but not on physical RAM (because OSes are cool like that)
[21:10:41] <Amaranth> Anyway, I'd still kill for subclasses
[21:10:44] <kmc> that's the crux of it
[21:10:51] <strcat> Amaranth: subclasses?
[21:11:14] *** Quits: Ms2ger` (Ms2ger@D2CDF20A.29977EA1.187A1082.IP) (Quit: nn)
[21:11:43] <Liam`> What is the rust-equivalent of the Go package net/http? net/http provides APIs for creating HTTP servers and making HTTP requests.
[21:11:45] <Amaranth> strcat: Yeah, like C++ or even like how Go does it, I'd be alright with that
[21:11:58] <Amaranth> Liam`: rust-http library on github
[21:12:03] <strcat> I highly doubt that there's ever going to be object inheritance
[21:12:05] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[21:12:05] <Sonarpulse> subclasses?
[21:12:10] <Liam`> https://github.com/mozilla-servo/rust-http-client Amaranth?
[21:12:20] <Sonarpulse> pretty sure you can just make a trait require another trait
[21:12:21] *** Joins: dherman (dherman@4373060E.96DDD56F.4EA770CF.IP)
[21:12:22] *** ChanServ sets mode: +ao dherman dherman
[21:12:23] <Amaranth> https://github.com/chris-morgan/rust-http
[21:12:29] <Sonarpulse> which isn't the same thing
[21:12:33] <Liam`> thanks
[21:12:37] <Sonarpulse> but often close enough
[21:12:39] <Amaranth> strcat: I mainly want it to hide the implementation of something
[21:12:40] <kmc> strcat: we really need it for Servo, because we have to implement the DOM hierarchy
[21:12:44] <Sonarpulse> and then there are @Trait existential types
[21:12:48] <strcat> Amaranth: there are private fields
[21:12:50] <Amaranth> Sonarpulse: I can't store data in a trait
[21:12:51] <doomlord_> i  would like single inheritance of structs but its not a show stopper for me
[21:12:52] *** Quits: tjc_ (tjc@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[21:12:59] <Amaranth> strcat: No, I want to hide it from the implementors
[21:13:04] <kmc> strcat: if it's not part of Rust then we will resort to unsafe casting hacks, which might be really bad or not, we'll see
[21:13:07] *** Quits: nkoep (nik@moz-C7DA435.vpn.rwth-aachen.de) (Ping timeout)
[21:13:07] *** Joins: tjc_ (tjc@moz-BBE3ABD.mv.mozilla.com)
[21:13:15] <strcat> Amaranth: can still do that with traits
[21:13:16] <kmc> but the current Servo solution of using enums is really bad ;P
[21:13:21] <strcat> you can add extension methods to types implementing a trait
[21:13:24] <Sonarpulse> Amaranth: you wan't existential types
[21:13:29] <Sonarpulse> *want
[21:13:35] <Amaranth> I don't think so
[21:13:46] <strcat> trait Foo { } trait Bar { } impl<T: Foo> Bar for T { }
[21:13:48] <benh> I can't wait until someone binds the gobject type system in rust
[21:14:01] <strcat> kmc: it can't use trait objects?
[21:14:08] <sp3d> benh: yeah, me neither :P
[21:14:13] <sp3d> I need to try that again
[21:14:22] <Amaranth> I want everything that implements the Component trait to have a unique ID but I don't want the implementor of one to have to create the ID themselves because they might get it wrong
[21:14:40] <kmc> strcat: then you have virtual method call overhead just to access superclass data
[21:14:40] <Sonarpulse> Amaranth: http://static.rust-lang.org/doc/0.8/rust.html#object-types
[21:14:42] <benh> sp3d: quick, before the wxwindows bindings someone posted to the mailing list gain dominant market share!
[21:14:49] <strcat> Amaranth: don't need object inheritance to do stuff like that
[21:14:56] <Sonarpulse> combine this with traits requiring other traits
[21:14:56] <strcat> trait Foo { } trait Bar { } impl<T: Foo> Bar for T { } /* what's wrong with this? */
[21:15:00] <kmc> strcat: pcwalton did some measurements and determined that this is a significant performance loss for us
[21:15:29] <Amaranth> strcat: That doesn't seem to be creating a unique ID I can query
[21:15:46] <kmc> strcat: so we're probably going to end up faking inheritance by having one struct whose fields happen to be a prefix of another struct, and then transmuting between them
[21:15:46] <strcat> Amaranth: you can make the unique id in Bar exactly as you plan on doing it in another language
[21:16:02] <Amaranth> Traits can store data?
[21:16:07] <Amaranth> Store it where?
[21:16:13] <Sonarpulse> Amaranth: you could perhaps do it with some nasty stateful macro
[21:16:16] <strcat> Amaranth: in a method implementation
[21:16:23] *** Joins: Adhaa_ (Adhaa@6B52E0A7.83764248.55CD930E.IP)
[21:16:24] <Amaranth> Sonarpulse: Then I need them to use the macro :D
[21:16:32] <kmc> strcat: and the unsafe trusted codebase there could be pretty small, but putting it in Rust would be better
[21:16:36] <strcat> traits will eventually support associated constants but they are not required to express something like that
[21:16:36] <Sonarpulse> What is the ID for though?
[21:16:50] <Amaranth> strcat: Now I need them to remember to put the field and method to get and set it in their implementation
[21:17:06] <Amaranth> Sonarpulse: Unique identifier to tell this component from another
[21:17:18] <Sonarpulse> unique identifier by type, right?
[21:17:18] <kmc> (e.g. by allowing traits to define data fields for self)
[21:17:19] <Amaranth> It's per type though, not per instance
[21:17:30] <Amaranth> Right now I'm getting by with RTTI
[21:17:30] <Sonarpulse> what do you use it for?
[21:17:31] <strcat> Amaranth: so you don't need a field
[21:17:37] <strcat> you only need a field if it's per-type
[21:17:39] <strcat> er
[21:17:41] <strcat> per-instance*
[21:17:43] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[21:17:45] <strcat> so I don't see the problem here
[21:18:04] <strcat> if it's not per-instance, you only need an associated constant (which you can do with a method, you just can't use it in const exprs)
[21:18:04] *** Quits: Adhaa_ (Adhaa@6B52E0A7.83764248.55CD930E.IP) (Ping timeout)
[21:18:10] <Amaranth> Sonarpulse: I'm making an entity component system, I need to be able to query which entities have a particular component
[21:19:08] <Sonarpulse> so you really want some limited reflection
[21:19:10] <Amaranth> In C++ I'd do this with a per type static (using template magic)
[21:19:18] <strcat> you can get a per-type id
[21:19:23] *** Joins: pnkfelix (pnkfelix@moz-1467CA5F.bstnma.fios.verizon.net)
[21:19:23] *** ChanServ sets mode: +o pnkfelix
[21:19:26] <strcat> and impl a method with it in a trait
[21:19:41] <Amaranth> So now I need a concurrent hash table :D
[21:19:45] <strcat> no, you don't
[21:19:51] <strcat> you want a type-based id
[21:19:56] <strcat> you don't need a lookup table, you don't need a field
[21:20:00] *** jorendorff is now known as jorendorff_away
[21:20:05] <strcat> there is a type-based id available in the form of the type name
[21:20:10] <Amaranth> Apparently I'm not understanding you
[21:20:14] <strcat> the pointer to the type name would work
[21:20:18] <Amaranth> Oh, right, you're pointing me at Rust's RTTI again
[21:20:24] *** Quits: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr) (Quit: bholley)
[21:20:31] <Amaranth> You showed me that before, I'm still hoping to do better though
[21:20:47] <Amaranth> Plus I've been told this might not exist in the future, aside from being marked unstable
[21:22:22] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[21:22:51] <strcat> you'll always be able to get the type name
[21:23:02] <strcat> as a &'static str
[21:23:22] *** Quits: clusterfoo (computer@moz-A81F9872.cable.teksavvy.com) (Client exited)
[21:23:43] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[21:24:30] *** Quits: Uther (Instantbir@moz-834083A8.hfc.dyn.abo.bbox.fr) (Ping timeout)
[21:24:33] <strcat> we could add a unique number too if someone comes up with a compelling use case using the string as an id
[21:24:34] *** Joins: Uther (Instantbir@moz-834083A8.hfc.dyn.abo.bbox.fr)
[21:24:54] <Sonarpulse> is this feature in the manual?
[21:25:09] <strcat> no
[21:25:26] <strcat> it probably doesn't belong there
[21:25:33] <strcat> it's a really obscure libstd feature
[21:25:38] <Sonarpulse> do you have a link to documentation elsewhere?
[21:26:03] <strcat> it's not documented ;p
[21:26:34] <strcat> well I did write a docstring for the field
[21:26:34] <Sonarpulse> alright :)
[21:26:48] <strcat> https://github.com/mozilla/rust/blob/master/src/libstd/unstable/intrinsics.rs#L70
[21:26:51] *** Joins: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca)
[21:27:04] <tjc_> strcat, we should really appoint you our official public relations coordinator for Rust ;-)
[21:27:41] *** Joins: nkoep (nik@moz-A4CD7309.pool.mediaways.net)
[21:27:54] <benh> is take_glue usually used?
[21:28:24] *** Quits: penguin_dan (dan_johnsi@6902762D.11B071D.FB9A45AF.IP) (Client exited)
[21:28:28] <strcat> benh: take glue is used but maybe not the take glue fn ptr in the tydesc
[21:28:34] <strcat> used to be used for ~fn:Copy
[21:28:38] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[21:29:05] *** Quits: jeffreybaird (jeffreybai@moz-ED3EF543.static.twtelecom.net) (Quit: jeffreybaird)
[21:29:41] <benh> hm, not obvious to me what it is needed for
[21:30:17] *** Quits: canhtak (jeremy@moz-5B47EFA.wl.t.ulaval.ca) (Quit: canhtak)
[21:30:30] <strcat> benh: @
[21:31:07] <benh> ah
[21:31:11] *** jorendorff_away is now known as jorendorff
[21:31:25] <strcat> it's the only thing with implicit codegen (other than a memcpy and maybe a memset) on copies
[21:31:30] *** Quits: Toussa (Mibbit@moz-FF51EDCC.adsl.alicedsl.de) (Quit: http://www.mibbit.com ajax IRC Client)
[21:32:22] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:33:35] *** Joins: grothendieck (Mibbit@moz-EE3D43EB.math.umn.edu)
[21:34:47] *** Quits: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net) (Ping timeout)
[21:36:31] <grothendieck> Is the only way to copy one vector to the back of another by writing "a = std::vec::append(a, b);"?
[21:37:00] <benh> wasn't there a.push_many(b) or something
[21:37:11] *** Joins: threecreepio (jdp@moz-627F18B2.bredband.comhem.se)
[21:37:16] <myname> a += b doesn't work?
[21:37:16] *** Parts: threecreepio (jdp@moz-627F18B2.bredband.comhem.se) ()
[21:37:19] <grothendieck> I saw the member function push_all_move, but I don't want to move, just copy
[21:37:36] <grothendieck> I'll check that out
[21:37:40] *** Quits: [squiddy] (squiddy@moz-A441D2CD.dynamic.cablesurf.de) (Quit: Leaving)
[21:38:06] <benh> push_all without _move apparently
[21:38:13] <cmr> myname: += on generic types is broken
[21:38:20] *** Joins: jeffreybaird (jeffreybai@moz-ED3EF543.static.twtelecom.net)
[21:38:25] <myname> ohh
[21:38:33] <myname> but a = a ü b should
[21:38:36] <myname> b
[21:38:41] <myname> *+
[21:38:49] <myname> but that's a move of a
[21:39:41] *** Joins: eholk (eholk@25AABEE9.48D4C455.51B6877.IP)
[21:39:43] *** Quits: pnkfelix (pnkfelix@moz-1467CA5F.bstnma.fios.verizon.net) (Ping timeout)
[21:39:58] *** Joins: pnkfelix (pnkfelix@moz-1467CA5F.bstnma.fios.verizon.net)
[21:39:58] *** ChanServ sets mode: +o pnkfelix
[21:40:55] *** Quits: dherman (dherman@4373060E.96DDD56F.4EA770CF.IP) (Quit: dherman)
[21:41:02] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[21:41:37] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[21:42:12] <grothendieck> okay, push_all works
[21:42:47] <grothendieck> the reason I didn't try it is because it's listed as a method of OwnedCopyableVector, and I was only looking at the OwnedVector documentation page
[21:42:58] <grothendieck> thanks
[21:44:13] *** Quits: grothendieck (Mibbit@moz-EE3D43EB.math.umn.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[21:45:44] <kmc> yeah, the current docs are not great for answering "what operations can i perform on this particular type"
[21:45:47] *** Quits: pnkfelix (pnkfelix@moz-1467CA5F.bstnma.fios.verizon.net) (Quit: Leaving.)
[21:46:50] <kmc> I use Ctrl-F heavily in navigating code docs, so it might be nice to have all the intrinsic methods + all methods of all implemented traits in a single page, even in super abbreviated form
[21:47:44] <tjc_> that would be great
[21:48:02] * shachaf is always for putting everything on one page.
[21:48:13] <sfackler> +1
[21:51:10] <ercxx__> yeah, newbie here. Docs are kinda brutal.
[21:51:55] <cmr> ercxx__: How can we do better?
[21:52:11] <cmr> Having huge index pages is definitely a thing we can do.
[21:53:35] *** Joins: dherman (dherman@4373060E.96DDD56F.4EA770CF.IP)
[21:53:36] *** ChanServ sets mode: +ao dherman dherman
[21:54:40] <tjc_> Huh, someone wrote a longish article about Rust in French: http://linuxfr.org/news/presentation-de-rust-0-8
[21:54:46] <tjc_> now to see if I know enough French to read it
[21:55:07] <Seldaek> cmr: imo a big issue stillis the lack of vec methods and other primitives (AFAIK it's not there)
[21:55:13] <myname> if you even think about it, you are way better than i am at french
[21:55:19] <cmr> Seldaek: yeah, that's still the biggest issue
[21:55:41] <strcat> tjc_: they call both arrays and maps tables :\
[21:55:44] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[21:55:47] <sfackler> this is pretty minor, but hiding private fields would be nice
[21:55:54] <tjc_> strcat: Well, that's confusing
[21:56:02] <sfackler> godoc adds a comment saying // private fields omitted
[21:56:04] <sfackler> or something like that
[21:56:07] <tjc_> in a sense it's true, but still confusing
[21:56:24] *** jorendorff is now known as jorendorff_away
[21:56:25] <strcat> it's almost as bad as calling both crackers and cookies the same thing
[21:56:34] <tjc_> it's almost bad as calling cookies "biscuits"
[21:56:37] <tjc_> *runs away*
[21:57:22] <cmr> Is there any syntactical reasons that `(A, B) -> R` couldn't be a valid syntax?
[21:57:27] <cmr> (context: http://smallcultfollowing.com/babysteps/blog/2013/10/10/fn-types-in-rust/)
[21:57:51] <tjc_> cmr: As a nit, (A, B) -> R would be different from ((A, B)) -> R
[21:57:59] <tjc_> in that scenario, which seems like a papercut
[21:58:11] *** Joins: mikefletcher (Mibbit@DA60130B.4474880.28B68B9E.IP)
[21:58:38] <cmr> I feel like having || separate from fn() and proc() to be a papercut, and |()| isn't all that much better IMO
[21:58:45] <strcat> heh, they call browser cookies a "cookie"
[21:58:47] <benh> cmr: can't omit the -> bit if R is ()?
[21:58:49] <tjc_> not defending that either :-)
[21:59:07] <cmr> benh: () {}
[21:59:09] <cmr> Is that ambiguous?
[21:59:43] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[21:59:53] <cmr> rusti: fn foo(x: ||) { x(); }
[21:59:54] -rusti- pastebinned 6 lines of output: http://sprunge.us/DUcS
[22:00:06] <cmr> rusti: fn foo(x: | |) { x(); }
[22:00:06] -rusti- pastebinned 6 lines of output: http://sprunge.us/eCRQ
[22:00:11] <benh> I mean if your type is (int, int) -> (), you can't just write (int, int) because that's a tuple
[22:00:22] <cmr> yeah
[22:00:24] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[22:00:25] <mikefletcher> maybe an easy question ... How do you convert a &str to a [u8]?
[22:00:32] <cmr> mikefletcher: .as_bytes()
[22:00:44] <kmc> that'll give you UTF-8
[22:01:05] <pcwalton> cmr: for the expression form? it would require a cover grammar for (irrefutable) patterns and expressions
[22:01:07] <pcwalton> which we've tried to avoid
[22:01:38] <mikefletcher> cmr, kmc: thanks, worked like a charm.
[22:01:39] <cmr> I don't know what that means so I'll accept it as valid.
[22:02:29] *** Quits: graememcc (chatzilla@moz-CE628128.range81-157.btcentralplus.com) (Quit: ChatZilla 0.9.90.1 [Firefox 24.0/20130911164256])
[22:03:09] <cmr> Could fn() { ... } become valid syntax for fn's, procs, and closures? It'd have no environment at all.
[22:03:47] <benh> still hoping that if || shows up in the type and expression forms for stack closures and not those of procs, we'll get a different syntax for do foo |blah| {} procs without the ||s ;)
[22:04:12] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[22:04:32] <Liam`> cmr: Charlie: "I could put the trash in a landfill where it's going to stay for millions of years, or I can burn it up and get a nice smoky smell in here and let the smoke go up into the sky where it turns into stars." Mac: "That doesn't sound right, but I don't know enough about stars to dispute it."
[22:04:51] <strcat> cmr: we could make Fn, Fn1, Fn2, Fn3, [...], and eventually paper over it with sugar
[22:04:59] *** Quits: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: Ex-Chat)
[22:05:22] <tjc_> that would take advantage of the Fn1, Fn2, Fn3, … keys that are already on my keyboard
[22:05:28] <strcat> :D
[22:05:29] <cmr> heh
[22:05:36] <benh> :D
[22:05:51] <kmc> :D
[22:06:42] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[22:07:14] <tjc_> I should just reprogram one of my shift keys to be the &
[22:07:29] <strcat> tjc_: rust needs to be more like APL http://www.gnu.org/software/apl/APL_demo.html
[22:07:33] <pcwalton> benh: what would that syntax be?
[22:07:41] <tjc_> strcat: Truer words have rarely been spoken
[22:07:41] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[22:07:58] <benh> pcwalton: I don't have any good ideas yet
[22:08:05] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[22:08:06] <pcwalton> the reason we went with bars in the first place is that they're basically the only unambiguous thing we could think of
[22:08:13] <pcwalton> that doesn't require a cover grammar
[22:08:14] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[22:08:28] <pcwalton> we might need a cover grammar anyway for (a, b) = (1, 2) kind of things, but anyway
[22:08:37] <benh> do spawn_with(blah) proc(blah) { } is probably too heavy
[22:08:42] <strcat> a real language requires a real keyboard with a snowman key
[22:08:45] <pcwalton> yeah
[22:08:58] <pcwalton> do spawn_with(blah) (x) { ... } looks confusing to me
[22:09:02] <mcpherrin> strcat: I already have an APL keyboard!  Cound me onboard.
[22:09:31] <pcwalton> do spawn_with(blah) x => { ... } is ambiguous because "x" can be a pattern
[22:09:38] <strcat> (I still think the Default implementation for char should be a snowman)
[22:09:47] <benh> I'm tempted to suggest something like do spawn_with(blah): x { }, but that doesn't really fit in anywhere
[22:10:14] <benh> ambiguous with struct patterns too
[22:10:23] <pcwalton> also ambiguous if we ever want to use : anywhere, and yeah, struct patterns
[22:11:16] <Jesse> strcat: or U+2699 "GEAR"
[22:11:18] *** Quits: andrew-d (andrew-d@6C6C9B53.23518FA3.CE794808.IP) (Input/output error)
[22:12:09] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[22:14:07] <benh> http://ix.io/8qh our paren-less if-syntax is also kinda weird now that i think about it
[22:14:51] *** Joins: jlindley (Mibbit@moz-65ABF21E.hfc.comcastbusiness.net)
[22:14:51] <benh> does it look-ahead to find a :?
[22:15:09] *** Joins: tikue3 (tikue_star@75BD426D.28336FB0.689607DE.IP)
[22:16:09] <strcat> there's always haskell's bargain bin lambda symbol
[22:16:26] <cmr> \ is barely a lambda
[22:16:37] <cmr> I didn't even know that's what it was supposed to be until I was told
[22:16:46] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[22:16:59] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[22:17:08] *** Quits: dherman (dherman@4373060E.96DDD56F.4EA770CF.IP) (Ping timeout)
[22:17:24] <eholk> what did the newtyped enum idiom get replaced with?
[22:17:35] <strcat> struct Foo(int);
[22:17:41] <eholk> strcat: thanks!
[22:17:56] <Luqman> man, newtype enum seems so long ago xD
[22:18:31] <eholk> Luqman: yeah.. I need to write Rust more often. As it is now I have to relearn the language each time I start a Rust project
[22:18:36] <strcat> haha, I found a fun bug
[22:18:39] <strcat> rusti: enum Foo { Bar(int) } *Bar(2)
[22:18:39] -rusti- pastebinned 3 lines of output: http://sprunge.us/FYjZ
[22:18:48] <strcat> wat
[22:19:02] <strcat> I think we still allow it in typeck but removed the trans portion
[22:19:18] <strcat> rusti: enum Foo { Bar(int), Baz(int) } *Bar(2)
[22:19:19] -rusti- pastebinned 7 lines of output: http://sprunge.us/QVWD
[22:20:46] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[22:22:33] *** Joins: maik (maik@moz-9DF51BF7.dip0.t-ipconnect.de)
[22:22:45] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[22:25:09] *** Quits: Sonarpulse (user@moz-424CB7EB.cs.brown.edu) (Quit: ERC Version 5.3 (IRC client for Emacs))
[22:26:24] *** Quits: eholk (eholk@25AABEE9.48D4C455.51B6877.IP) (Quit: eholk)
[22:26:30] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[22:27:12] *** Joins: frogonia47 (Mibbit@7E16A489.350275ED.F3D1E4EE.IP)
[22:28:40] *** Joins: eholk (eholk@25AABEE9.48D4C455.51B6877.IP)
[22:28:55] <frogonia47> If I create a vector with vec::with_capacity(), is it possible to write to arbitrary indices?
[22:29:17] <strcat> frogonia47: with unsafe code (length and capacity are separate)
[22:29:41] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[22:29:51] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[22:31:11] *** Joins: Florob (Florob@moz-39532932.de)
[22:31:20] <frogonia47> strcat: Why is it considered unsafe if I explicitly gave it a capacity?
[22:32:01] <dbaupp> frogonia47: destructors
[22:32:03] <strcat> because the capacity isn't the usable length of the vector
[22:32:11] <cmr> frogonia47: there are no bounds checks and we don't have dependant types, and it doesn't initialize it at all.
[22:32:46] <strcat> regular indexing has bounds checks based on the length (the initialized/valid portion of the vector)
[22:33:06] <frogonia47> Ah, I see.
[22:33:16] <kmc> capacity is space reserved for future growth without additional allocation
[22:34:32] *** Joins: mope (moritz@moz-1E9FD5C1.dip0.t-ipconnect.de)
[22:35:00] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:35:02] *** Quits: tjc_ (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[22:36:32] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Quit: WeeChat 0.4.1)
[22:36:32] *** Quits: Kruppe (user@moz-EE1E894A.home3.cgocable.net) (Ping timeout)
[22:36:43] *** Quits: mikefletcher (Mibbit@DA60130B.4474880.28B68B9E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:37:56] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[22:39:54] *** Joins: andrew-d (andrew-d@6C6C9B53.23518FA3.CE794808.IP)
[22:41:08] *** Quits: pepper_chico (pepper_chi@moz-29CFA00C.dsl.telesp.net.br) (Ping timeout)
[22:41:15] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[22:41:34] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[22:41:55] <strcat> http://ix.io/8qj either the middle::trans::callee logging is broken, or.... we generate some weird crap
[22:42:11] <strcat> seriously what is that? :\
[22:43:21] <strcat>     debug2!("--- trans_arg_expr passing {}", bcx.val_to_str(val));
[22:43:34] <strcat> so... that can't be good, we seriously have an LLVM value with that structure
[22:45:01] <strcat> there are lots worse than it
[22:45:24] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[22:45:35] *** Quits: jlindley (Mibbit@moz-65ABF21E.hfc.comcastbusiness.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:45:36] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Input/output error)
[22:45:41] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[22:46:33] *** Quits: mope (moritz@moz-1E9FD5C1.dip0.t-ipconnect.de) (Quit: Verlassend)
[22:46:38] <kmc> how do I debug dynamic borrowcheck failures again? do I just need to do a debug build of my program?
[22:47:25] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[22:47:40] *** Quits: skade (skade@moz-4865967C.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:48:54] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[22:53:25] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[22:53:29] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[22:53:29] *** ChanServ sets mode: +ao brson brson
[22:53:56] *** Joins: dherman (dherman@4373060E.96DDD56F.4EA770CF.IP)
[22:53:56] *** ChanServ sets mode: +ao dherman dherman
[22:57:34] <glennsl> I just built from master and am now getting this error when using the rust tool:
[22:57:37] <glennsl> dyld: Symbol not found: __ZN3fmt22Default$__extensions__3fmt20hda71f568bcd80c5Y8a911v0.9$x2dpreE
[22:57:40] <glennsl> any ideas?
[22:57:48] <Amaranth> The rust tool is removed, isn't it?
[22:57:50] <strcat> yes
[22:58:03] <glennsl> oh, well that explains it
[22:58:04] <Amaranth> So your problem is you've still got the old one and it is out of date
[22:58:42] <glennsl> how would I build a test executable now then?
[22:59:09] <kmc> rustc --test foo.rs
[22:59:37] *** Joins: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net)
[23:00:13] <glennsl> thanks
[23:00:33] *** Quits: dherman (dherman@4373060E.96DDD56F.4EA770CF.IP) (Client exited)
[23:01:05] *** Joins: dherman (dherman@4373060E.96DDD56F.4EA770CF.IP)
[23:01:05] *** ChanServ sets mode: +ao dherman dherman
[23:01:25] *** Joins: dherman_ (dherman@4373060E.96DDD56F.4EA770CF.IP)
[23:01:42] *** Joins: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[23:01:58] *** Quits: alan (alan@moz-FE02DD30.sat6.rackspace.com) (Quit: alan)
[23:02:30] *** Quits: maik (maik@moz-9DF51BF7.dip0.t-ipconnect.de) (Ping timeout)
[23:02:43] <strcat> rusti: fn foo(x: ()) {} foo(())
[23:02:44] -rusti- <anon>:9:16: 9:17 warning: unused variable: `x`, #[warn(unused_variable)] on by default
[23:02:44] -rusti- <anon>:9          fn foo(x: ()) {} foo(())
[23:02:44] -rusti-                          ^
[23:02:44] -rusti- ()
[23:02:47] *** Quits: dherman (dherman@4373060E.96DDD56F.4EA770CF.IP) (Ping timeout)
[23:02:50] *** dherman_ is now known as dherman
[23:03:02] <strcat> rusti: fn foo(_: ()) {} foo(bar()) fn bar() {}
[23:03:03] -rusti- pastebinned 6 lines of output: http://sprunge.us/RNhH
[23:04:59] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[23:05:02] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[23:05:44] <strcat> pcwalton: trait objects have really ridiculous LLVM types afaict
[23:05:48] <strcat> pcwalton: like this http://ix.io/8qj :|
[23:05:58] <pcwalton> whoa
[23:06:01] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[23:06:04] <pcwalton> we could use some named structs
[23:06:04] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[23:06:18] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[23:06:29] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[23:06:30] <strcat> it seems like the fact that we're generating something that big is a bug
[23:06:31] *** Joins: pepper_chico (pepper_chi@moz-29CFA00C.dsl.telesp.net.br)
[23:06:53] <strcat> pcwalton: http://ix.io/8qm a smaller one
[23:06:56] <pcwalton> yeah
[23:06:59] <pcwalton> that seems weird
[23:07:03] <strcat> ty=extern "Rust" fn(&&'static str, &mut fmt::Formatter<>)
[23:07:05] <strcat> ;\
[23:07:30] <strcat> pcwalton: RUST_LOG=rustc::middle::trans::callee=4 is really ridiculous ;p
[23:07:46] <strcat> hundreds of thousands of these huge things fly by
[23:07:52] *** Joins: skade (skade@moz-4865967C.pools.arcor-ip.net)
[23:08:06] <Luqman> strcat: that ridiculous thing is &mut fmt::Formatter?
[23:08:19] <strcat> Luqman: yeah
[23:08:31] <strcat> well, a function taking a string and a formatter
[23:08:49] <cmr> what the heck is ###
[23:09:17] <strcat> this comes from debug2!("--- trans_arg_expr passing {}", bcx.val_to_str(val));
[23:09:46] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Connection reset by peer)
[23:09:51] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[23:10:00] <eholk> did std::future go away?
[23:10:15] <strcat> cmr: I don't really understand, but we make it
[23:10:16] <dbaupp> eholk: std moved to extra
[23:10:19] <strcat>         if depth == 0 {
[23:10:21] <strcat>             return ~"###";
[23:10:26] <dbaupp> eholk: (so it's extra::future now)
[23:10:31] <strcat> eholk: core became std, std became extra :)
[23:10:37] <eholk> oh, right
[23:10:59] <cmr> oh, 
[23:11:10] <cmr> I thought llvm was making that string
[23:11:19] <strcat> pcwalton: oh and you see the ###? that's us giving up after a maximum recursion depth we go to while printing ;p
[23:11:32] <pcwalton> bleh
[23:11:37] <strcat> maybe it's just a recursive type and we don't print them properly
[23:11:39] <strcat> I'm not sure
[23:11:47] <strcat> it looks really awful though
[23:12:02] <eholk> hmm… use extra::future is complaining that I forgot extern mod extra, but extern mod extra is the line immediately before that one
[23:12:04] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[23:12:06] <strcat> (I think that's it, it's recursive)
[23:14:44] <dbaupp> eholk: put the `extern mod extra` at the top of the crate
[23:14:52] <eholk> dbaupp: it's the first line
[23:14:56] <eholk> oh, of the file, not the crate
[23:15:48] <eholk> ok, that fixed it
[23:16:01] <strcat> I wonder why we don't just ask LLVM for the type name
[23:16:03] *** Joins: tjc_ (tjc@moz-7B0110AD.mv.mozilla.com)
[23:16:13] *** Quits: frogonia47 (Mibbit@7E16A489.350275ED.F3D1E4EE.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:16:16] <strcat> guess it's not in the C API...
[23:16:18] <dbaupp> eholk: use is from the top of the crate and so introducing `extra` somewhere else means you have to write `use self::extra::...` or `use path::to::module::extra::...`
[23:17:52] <eholk> ah, okay
[23:18:02] <eholk> is there a way to force a move now?
[23:18:24] <strcat> eholk: moving is the default now
[23:18:36] <strcat> if it has a destructor/&fn/&mut in it, it just always moves
[23:18:47] <strcat> (copying for those is done with the Clone trait)
[23:19:01] <eholk> what about with generic code?
[23:19:09] <strcat> eholk: generic types always move
[23:19:16] <eholk> I'm trying to move out a generic return value, and it's complaining that it can't find Clone for that type
[23:19:52] <dbaupp> code?
[23:20:16] <strcat> what the heck is a raw_ostream.
[23:20:26] <strcat> hrm
[23:20:42] <dbaupp> "This class implements an extremely fast bulk output stream that can *only* output to a stream. It does not support seeking, reopening, rewinding, line buffered disciplines etc. It is a simple buffer that outputs a chunk at a time."
[23:20:43] <strcat> printing an LLVM type is not as easy as you'd think ;\
[23:21:01] <strcat> I guess I need to use a stringstream
[23:21:03] <strcat> those things make me sad
[23:21:51] <eholk> dbaupp: it's kind of big… i have some ideas though
[23:22:18] <dbaupp> eholk: oh... well, are you calling .clone() on the generic?
[23:22:32] <eholk> dbaupp: no, I was using Future::get
[23:22:37] <eholk> i changed it to unwrap
[23:22:43] *** Quits: echristo (echristo@4EEA9249.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[23:22:54] <strcat> ah, because get uses T: Clone
[23:23:28] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[23:25:39] <nejucomo> strcat: Why do stringstreams make you sad?
[23:26:11] <strcat> because it's like someone sat down and tried to figure out how to design an API to make as many allocations as possible
[23:26:32] *** Joins: Sorella (user@9D963F5D.DF5D8AE7.54BCAB54.IP)
[23:27:26] <strcat> it allocates a buffer when you write to it and then it allocates a new string to hand back
[23:28:16] *** Quits: jaen (jaen@moz-E5B18A83.catv.broadband.hu) (Quit: WeeChat 0.4.1)
[23:28:47] <strcat> it looks like LLVM's stringstream stuff is saner
[23:30:50] <Luqman> oh man, the LLVM test suite looks fancy
[23:31:01] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[23:31:54] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[23:31:55] <Luqman> http://i.imgur.com/jdOTVtC.png
[23:34:43] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Connection reset by peer)
[23:34:56] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[23:34:57] *** Quits: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr) (Input/output error)
[23:36:11] <ercxx__> anybody using daily archlinux builds thestinger/rust-git ?
[23:36:21] * strcat makes them
[23:36:28] <ercxx__> :)
[23:36:38] <ercxx__> What happened to rust binary?
[23:36:49] <strcat> was removed in master
[23:37:04] <ercxx__> All that muscle memory gone now :(
[23:37:15] <maikeru> ercxx__: https://github.com/mozilla/rust/commit/a9dddbacde8e204ee7485bc11b5c23a06d57430d specifically
[23:37:25] <maikeru> I was doing the tutorial earlier (on trunk, dangerous I know)
[23:37:36] <dbaupp> ercxx__: what do you use it for? rust test and rust run?
[23:37:40] <dbaupp> *did
[23:37:53] <ercxx__> rust run mostly
[23:38:10] <maikeru> seems like it'd be easy enough to spin into it's own thing if people miss it enough. >.>
[23:39:00] <dbaupp> and it's a one-line shell script/function to replace it: function rust_run() { rustc $1 -o /tmp/$1.out && /tmp/$1.out }
[23:39:02] <ercxx__> Nod a big deal really, but I think it would be nice if it was one command to rule them all, kinda like git.
[23:41:40] *** Joins: sharris (Mibbit@moz-1770FFAB.lightspeed.ltrkar.sbcglobal.net)
[23:41:58] <ercxx__> strcat: Thanks for the package btw.
[23:42:01] *** Joins: Kxepal (Miranda@moz-E10CC2AA.pppoe.mtu-net.ru)
[23:42:06] <strcat> np :)
[23:43:17] <sharris> If someone can help pls, I'm having trouble using a borrowed fn pointer inside a closure.  https://gist.github.com/scharris/6943662   The fn pointer is "g". 
[23:43:25] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[23:43:42] <sharris> Error was "error: cannot move out of captured outer variable"
[23:44:02] <sharris> I can't understand how I'm trying to "move out", I'm just wanting to pass it into another fn.
[23:44:06] *** Quits: pepper_chico (pepper_chi@moz-29CFA00C.dsl.telesp.net.br) (Quit: Ex-Chat)
[23:44:22] <strcat> &fn is non-copyable
[23:44:32] *** Quits: mib_lg0dm8 (Mibbit@moz-B234C23B.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[23:44:36] <strcat> 'extern fn' is a function pointer
[23:44:47] <strcat> &fn has an environment so it's more restricted
[23:44:51] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[23:45:09] <sharris> strcat: Does that mean I should be taking a & &fn()->... instead of &fn()... when I want to pass around a function?
[23:45:40] <dbaupp> sharris: https://github.com/mozilla/rust/wiki/Doc-under-construction-FAQ#noncopyable-stack-closures
[23:46:38] <ercxx__> Is it ever going to be possible to do: call("func_name") in rust?
[23:47:29] <dbaupp> it's kinda possible now
[23:47:40] <sharris> dbaup: thx that's definitely my case
[23:48:09] <dbaupp> ercxx__: using std::unstable::dynamic_lib to load symbols from the current executable
[23:50:24] *** Joins: brendan (brendaneic@5FF29450.615B56E6.43362C16.IP)
[23:50:44] <ercxx__> Is is possible to find all the magic stuff like this without going through the code?
[23:51:42] <strcat> not really, it's very unsafe and not an interface that's going to stay the same
[23:51:45] *** Quits: eholk (eholk@25AABEE9.48D4C455.51B6877.IP) (Quit: eholk)
[23:52:03] <ercxx__> I see.
[23:53:31] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[23:56:17] <sharris> dbaupp: thx I'm up and going now with |x| g(x) in place of g.
[23:56:36] <Liam`> beginner question: I have an i32, and I want to println() it. What's the rust-equivalent of Itoa()?
[23:57:26] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:57:27] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[23:57:27] <kmc> rusti: 29i32.to_str()
[23:57:28] -rusti- ~"29"
[23:57:45] <Liam`> i have no idea what just happened
[23:57:56] <sharris> strcat: interesting that &fn is not just a pointer, are there other "&T" types like that in Rust?
[23:57:58] <kmc> I called the method to_str() on the literal i32 whose value is 29
[23:57:58] <Liam`> 29i32? is this a typecast of 29?
[23:58:04] <Liam`> o
[23:58:06] <Liam`> i see.
[23:58:09] <strcat> sharris: yes, &[T] and &Trait aren't just pointers
[23:58:12] <kmc> no it's just a way of writing a literal which is specifically an i32
[23:58:14] <mcpherrin> Liam`: That is 29 that is an 32-bit signed integer
[23:58:17] <strcat> sharris: 'extern fn' is a function ptr
[23:58:19] *** Quits: jeffreybaird (jeffreybai@moz-ED3EF543.static.twtelecom.net) (Quit: jeffreybaird)
[23:58:21] <strcat> &fn has an environment ptr too
[23:58:22] <kmc> literals get type-inferred by default
[23:58:31] <dbaupp> ercxx__: https://gist.github.com/huonw/6943867
[23:58:36] <kmc> Liam`: you can also use the format string stuff, i.e. println(fmt!("%d", 29))
[23:58:51] <kmc> Liam`: that's the old format strincg system; there's a new one now but I don't remember how it works
[23:58:54] <Liam`> kmc: isn't that slower?
[23:59:04] <kmc> Liam`: why?
[23:59:06] <kmc> i mean, maybe
[23:59:11] <kmc> IO is all slower than it should be at present
[23:59:16] *** Joins: nrc (nrc@moz-3576D163.cable.virginmedia.com)
[23:59:18] <dbaupp> rusti: println!("{}", 29)
[23:59:19] -rusti- 29
[23:59:19] -rusti- ()
[23:59:28] <dbaupp> http://static.rust-lang.org/doc/master/std/fmt/index.html
[23:59:30] <Liam`> i always assumed printf and others were slower than manually converting to ascii... but i guess i don't really know
[23:59:43] <strcat> hm
[23:59:44] <Liam`> plus, whole new language, so, who knows
[23:59:50] <kmc> Liam`: fmt! is a syntax extension (hence the !) and it parses the format string at compile time
