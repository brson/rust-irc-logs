[00:00:09] <aatch> Goddammit... Looks like I'll just have to resign myself to documenting "LLVM Objects are complicated, so use-after free is still possible, try not to do that. kthxbie"
[00:00:27] <cmr> Ouch :(
[00:00:38] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:00:38] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14daf5010 to 1455c23bc: 02http://git.io/N3iJvQ
[00:00:38] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:00:39] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:00:39] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/22aEUA
[00:00:39] <ghrust> 13rust/06auto 141dc4ea0 15Daniel Micay: bool: rm functions duplicating methods
[00:00:39] <ghrust> 13rust/06auto 14e516d23 15bors: auto merge of #6864 : thestinger/rust/bool, r=pcwalton
[00:00:39] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:00:56] <bblum> libextra about half as many errors, roughly the same distribution
[00:01:02] <bblum> (except no option)
[00:01:31] <aatch> Seriously, I need some way of saying: Sometimes this object is fine, sometimes it's not.
[00:01:34] <cmr> bblum: maybe Sized should be the default, and things can implement Unsized instead?
[00:01:34] <dbaupp> aatch: can you hit it with more lifetimes?
[00:01:50] <bblum> i think "negative traits" don't work
[00:02:03] <bblum> but i'm not sure... i remember thinking about this a bit last summer
[00:02:14] <dbaupp> aatch: e.g. Wrapped<'self, T> { value: T, lifetime: Option<&'self ()> }
[00:02:29] <aatch> I might have to refactor more of the wrapper.
[00:03:00] <aatch> dbaupp, the issue is that some objects don't have a lifetime that's tied to anything.
[00:04:50] <aatch> Or, more accurately, sometimes do, and sometimes don't
[00:05:52] <cmr> r? https://github.com/mozilla/rust/pull/6826
[00:06:11] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:09:46] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[00:11:17] *** Quits: echristo (echristo@D423593A.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[00:12:10] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:12:18] *** cscottnet is now known as cscottnet_away
[00:12:21] *** cscottnet_away is now known as cscottnet
[00:14:18] *** Joins: jack (jack@9AAAB5CB.3597C859.3AF705F3.IP)
[00:16:10] *** Quits: snearch (snearch@moz-77B8B28D.pool.mediaways.net) (Quit: Verlassend)
[00:17:13] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:17:56] *** Quits: dforsyth (dforsyth@AC76BBB4.5FDB5121.EE6E63A5.IP) (Ping timeout)
[00:20:15] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[00:20:15] *** ChanServ sets mode: +o dherman
[00:21:05] <aatch> dbaupp, any ideas on how to construct fake borrowed pointers that won't cause segfaults everywhere?
[00:21:54] <dbaupp> aatch: um, what are you trying to do with them? (i.e. do you need borrowed pointers to call another function, or to get the lifetimes?)
[00:23:33] <strcat> aatch: just use Option<&T> if you need a lifetime
[00:23:36] <strcat> and use None
[00:23:52] <aatch> Well I'm trying to write safe wrappers for LLVM. The issue is that I can do something like construct an object that stands by itself, or I can get an object from LLVM.
[00:24:51] <aatch> There is no difference between the types I get from LLVM, but one is tied to some other object (like a functions params and it's args)
[00:25:08] <aatch> and others are fine.
[00:25:12] <Eridius> erickt: yes I saw them, thanks
[00:25:22] <aatch> (function and it's params sorry)
[00:26:16] <Eridius> if I want to modify my pull request based off of feedback (see https://github.com/mozilla/rust/pull/6815), do I just modify the commits and push them, thus erasing the history of what the original request looked like, or is there some other process?
[00:26:29] <brson> haven't been following this convesation but I discourage fake borrowod pointers unless they are truly safe according to the Rust memory model
[00:26:35] <pcwalton> I usually just rewrite history
[00:26:37] <aatch> Eridius, just push
[00:26:41] <dbaupp> aatch: you can possibly just an arbitrary lifetime for them, e.g. fn LLVMUintLiteral<'r>(u: uint) -> WrappedLLVM<Value, 'r> {}, and then allow the parent to specify what lifetime, if it is limited
[00:26:45] <brson> been converting a lot of my unsafe code to use unsafe pointers
[00:27:29] <aatch> brson, I'm trying to do this so it does actually encode the lifetimes involved
[00:28:00] <bblum> pcwalton: in a pat_ident, will the node id of the pattern suffice for ty::node_id_to_type, or do i have to ast_util::path_to_ident?
[00:28:24] <pcwalton> I *think* the node ID of the pattern suffices but I forget.
[00:28:39] <aatch> dbaupp, hmm, I didn't think of that.
[00:28:50] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Client exited)
[00:30:07] *** Joins: dforsyth (dforsyth@AC76BBB4.5FDB5121.EE6E63A5.IP)
[00:30:54] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[00:32:10] <dbaupp> aatch: it may require a dummy parameter to specify lifetimes
[00:32:10] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[00:32:46] *** Joins: SiegeLord (siege@moz-CAF07B4C.hsd1.ma.comcast.net)
[00:34:07] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[00:35:58] *** Joins: samnardoni (samnardoni@moz-D9412C6E.cable.virginmedia.com)
[00:36:21] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[00:37:41] *** Quits: samnardoni (samnardoni@moz-D9412C6E.cable.virginmedia.com) (Ping timeout)
[00:39:17] *** Joins: Jesse_ (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[00:39:23] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Connection reset by peer)
[00:39:58] *** Joins: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu)
[00:41:04] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[00:41:18] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:41:33] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:42:10] <Eridius> erick: I just commented on https://github.com/mozilla/rust/pull/6815, in case you have any thoughts there
[00:42:42] <aatch> Yay! circular lifetimes...
[00:44:14] *** Quits: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (Ping timeout)
[00:45:59] <bblum> pcwalton: doesn't work... what should i do to get the ty::t for a path?
[00:47:19] <pcwalton> bblum: uh... check what typeck does I guess.
[00:47:47] <Eridius> rusti: let f = || {}; f()
[00:47:50] -rusti- ()
[00:51:13] *** Quits: graydon (Adium@A5087023.2354C43D.D8E68FF6.IP) (Quit: Leaving.)
[00:51:34] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[00:51:40] *** Quits: EXetoC (ex@moz-C741B177.customer.t3.se) (Quit: WeeChat 0.4.1)
[00:52:54] <bblum> librustc takes 11 minutes to build for me
[00:53:08] <aatch> bblum, really?
[00:53:13] <bblum> yes, just for one stage
[00:53:14] <pcwalton> bblum: you're probably swapping.
[00:53:18] <bblum> nope
[00:53:28] <bblum> it takes 2+ gigs, but i have 8
[00:53:33] <aatch> Which stage?
[00:53:36] <pcwalton> hmm, that's bad
[00:53:46] <bblum> first stage (building stage1 with stage0
[00:53:46] <bblum> )
[00:54:20] <pcwalton> ah, there were recent improvements though
[00:54:24] <aatch> what does it drop to after that (should be ~2 mins)
[00:54:37] <bblum> oh after the first stage you mean?
[00:54:50] <aatch> bblum, yeah, with the compiler it just built.
[00:55:06] <bblum> ah... we'll have to wait another 11 minutes to know about that, as i just built a version that doesn't work
[00:55:13] <aatch> lol
[00:55:17] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:55:28] <pcwalton> if you're just testing correctness don't optimize
[00:55:37] <strcat1> aatch: btw Thiez noticed big regressions in performance for some of his code
[00:55:38] <pcwalton> mine takes like 6-7 minutes in later stages
[00:55:41] <aatch> otherwise, I would be interested in what the output of -Z time-passes and -Z time-llvm-passes
[00:55:43] <pcwalton> which is still bad
[00:55:46] <strcat1> not sure if it's related to the optimization pass changes or not
[00:55:57] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[00:55:57] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[00:56:11] <aatch> strcat1, yeah, I heard. It might have been the bb-vectorize pass
[00:56:19] <Eridius> do once functions work right now?
[00:56:23] <strcat1> aatch: nope, turning that off made it even slower :(
[00:56:25] *** strcat1 is now known as strcat
[00:56:49] <aatch> In that case, I've no idea, since the passes are pretty much identical to before
[00:56:50] <pcwalton> the only change aatch made is bb-vectorize
[00:56:53] <pcwalton> AFAIK
[00:57:00] *** Quits: jack (jack@9AAAB5CB.3597C859.3AF705F3.IP) (Quit: Leaving.)
[00:57:15] <bblum> still failing to figure out how to get the type of a pat_ident
[00:58:17] <aatch> Theiz's thing is that ray-tracer, right?
[00:58:41] <aatch> do you know where it lives?
[00:58:42] <cmr> yes
[00:59:11] <cmr> https://github.com/Thiez/rustray
[00:59:15] <Eridius> how do I construct a once closure?
[00:59:31] *** Quits: carllerche (carllerche@moz-BF6CB667.hsd1.ca.comcast.net) (Quit: carllerche)
[01:04:57] <Eridius> is it even possible to construct a once closure?
[01:05:04] <bjz> YAYYYYYY
[01:05:14] <bjz> Luqman: beeeeeeep
[01:05:15] <aatch> Eridius, it is, but they don't work properly atm
[01:05:59] <Eridius> aatch: damn. I'm trying to implement the mangle as suggested by nikomatsakis in https://github.com/mozilla/rust/pull/6815, but I think I need a once function in order to build find_or_insert on top of it
[01:06:16] <aatch> Eridius, why?
[01:06:25] <Eridius> because I need to pass a closure that moves a value from its environment
[01:06:37] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:06:38] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/22aEUA
[01:06:38] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:07:15] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[01:07:19] *** Parts: steven_is_false (user@moz-144077DE.bchsia.telus.net) (ERC Version 5.3 (IRC client for Emacs))
[01:08:45] *** Quits: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP) (Ping timeout)
[01:09:33] <dbaupp> Eridius: I think it might be possible by associating the closure with an object that (somehow) either gets consumed or modified when the closure is called
[01:09:37] <dbaupp> maybe
[01:10:04] <Eridius> not quite sure what you're suggesting
[01:10:27] <dbaupp> Eridius: neither am I
[01:10:37] <bjz> Luqman: IT WORKS
[01:10:43] <bjz> Luqman: tests pass
[01:10:57] <dbaupp> Eridius: (I haven't actually used it, but I've seen something about this around, maybe)
[01:11:24] * bjz jumps for joy and does a little jig
[01:11:34] <cmr> bjz: what does?
[01:11:41] <bjz> cmr: lmath
[01:11:46] <cmr> miraculous!
[01:11:53] <bjz> https://github.com/bjz/lmath-rs
[01:11:55] <bjz> I know
[01:11:59] *** Quits: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP) (Quit: pcwalton)
[01:13:00] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:13:16] <bjz> cmr: If I can do that, then maybe, just maybe I might be able to implement operator overloads ;)
[01:13:57] *** Joins: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[01:15:22] *** Quits: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com) (Connection reset by peer)
[01:15:35] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:15:35] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/LJWBhA
[01:15:35] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:15:37] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:15:37] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/e3GNKA
[01:15:37] <ghrust> 13rust/06auto 147451071 15Patrick Walton: librustc: Don't require `pub extern` to make extern functions visible
[01:15:37] <ghrust> 13rust/06auto 14d0998cd 15Patrick Walton: Remove all uses of `pub impl`. rs=style
[01:15:39] <ghrust> 13rust/06auto 14cea5783 15bors: auto merge of #6871 : pcwalton/rust/de-pub-impl, r=pcwalton
[01:15:41] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:17:11] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[01:17:36] <bjz> nmatsakis: how goes the dreaded patch?
[01:18:16] <bjz> nmatsakis: If we can solve that, then I might feel inclined to do an OpenGL blog post ;)
[01:18:37] *** Joins: SimonSapin (simon@moz-21C3861.dynamic.hinet.net)
[01:19:00] <indirect> so I would really like to build the docs for incoming instead of wgetting static.rust-lang.org‚Ä¶ but I last built before I had installed pandoc, and now "make doc" says "nothing to do". someone tell me how I'm being dumb?
[01:19:33] <dbaupp> bjz: comments/r? https://github.com/bjz/rusp/pull/11
[01:19:44] <aatch> Wow, this is hacky...
[01:20:06] *** Quits: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net) (Quit: ChatZilla 0.9.90-rdmsoft [XULRunner 18.0.2/20130201065344])
[01:20:33] <indirect> oh also I wrote a blog post about illegal anonymous lifetimes, and if anyone wants to pedantically correct my likely misuse of technical vocabulary I would appreciate it :) http://andre.arko.net/2013/05/31/illegal-anonymous-lifetime/
[01:21:06] <aatch> I have a static value in order to distinguish between the global Context and a constructed one.
[01:21:24] <aatch> Otherwise I get double-frees.
[01:22:53] <aatch> So the lifetime Option now actually can be `Some`
[01:26:43] <bjz> Luqman: do you mind if I merge cg-math back into lmath?
[01:27:29] <bjz> Luqman: I'd like to focus lmath on being a cg lib, as opposed to a generic linear algebra lib
[01:27:48] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[01:28:11] *** Quits: SimonSapin (simon@moz-21C3861.dynamic.hinet.net) (Quit: Leaving.)
[01:31:20] *** Quits: eholk (eholk@moz-3D703D55.uconnect.utah.edu) (Quit: eholk)
[01:35:09] *** Joins: dylukes (dylukes@moz-7B9A0DA0.neo.res.rr.com)
[01:37:48] *** Joins: SimonSapin (simon@moz-21C3861.dynamic.hinet.net)
[01:38:01] *** Quits: dylukes (dylukes@moz-7B9A0DA0.neo.res.rr.com) (Quit: Computer has gone to sleep.)
[01:40:00] *** Joins: dylukes (dylukes@moz-7B9A0DA0.neo.res.rr.com)
[01:40:41] <cmr> indirect: rm -rf build/doc (assuming you're using an out-of-source build, which you should be)
[01:41:21] *** Quits: dforsyth (dforsyth@AC76BBB4.5FDB5121.EE6E63A5.IP) (Ping timeout)
[01:43:24] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[01:44:00] <aatch> Argh, this would be so much easier if there was some sort of safe, unmanaged pointer (which is fairly obviously not going to happen)
[01:44:49] *** Quits: SimonSapin (simon@moz-21C3861.dynamic.hinet.net) (Quit: Leaving.)
[01:47:12] *** Quits: dylukes (dylukes@moz-7B9A0DA0.neo.res.rr.com) (Quit: Computer has gone to sleep.)
[01:47:55] <indirect> cmr: thank you
[01:50:43] <bblum> finally got check_pat working for the Sized kind
[01:50:48] <bblum> now 1229 errors in libstd >_>
[01:51:34] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[01:52:32] *** Joins: MaikKlein (maik@moz-7BA44035.dip0.t-ipconnect.de)
[01:53:21] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Ping timeout)
[01:54:41] *** Quits: thomaslee (thomaslee@moz-6C3931E3.static.twtelecom.net) (Client exited)
[01:55:36] <deepdog> Hey guys. I'm trying to compile shorai with rust/incoming and I'm getting error: no item found for `sized`
[01:55:37] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[01:56:03] <bblum> deepdog: uh, that's probably my fault
[01:56:12] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[01:56:15] <bstrie> deepdog: I think shorai was using master rather than incoming
[01:56:38] <bstrie> there's a difference! unfortunately
[01:56:46] <deepdog> Is arch's rust use master?
[01:56:50] <deepdog> *does
[01:57:01] <bstrie> deepdog: nope, the daily build is incoming
[01:57:01] *** Joins: dforsyth (dforsyth@AC76BBB4.5FDB5121.EE6E63A5.IP)
[01:57:05] <aatch> deepdog, yes
[01:57:06] <bstrie> because master only updates like every month or so
[01:57:15] <aatch> there is a daily build though
[01:57:15] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:57:25] <bstrie> are there two builds for arch?
[01:57:25] <aatch> bstrie, there are two packages
[01:57:34] <bstrie> right, but one is probably 0.6, and the other is master
[01:57:36] <bstrie> er
[01:57:37] <bstrie> no
[01:57:42] <bstrie> one is 0.6, the other is incoming
[01:57:44] <bstrie> neither would be master
[01:57:46] <aatch> strcat, the official rust package is 0.6 atm, right
[01:57:53] <aatch> for arch
[01:57:55] <strcat> aatch: yes
[01:58:02] <bblum> deepdog: my guess is you have an outdated libstd but a fresh rustc
[01:58:03] <strcat> there's a repo with nightly builds though of incoming
[01:58:14] <deepdog> strcat: That's the I'm using.
[01:58:18] <deepdog> *one
[01:58:30] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:58:35] <bstrie> indirect: "illegal anonymous lifetime" sounds like something out of bret easton ellis or chuck palanihuk
[01:59:05] *** Joins: Sevki (Sevki@moz-EB20D033.cable.virginmedia.com)
[01:59:08] <deepdog> So is there a master build for Arch?
[01:59:19] <aatch> deepdog, not master
[01:59:36] <bstrie> it's our own fault for not getting rid of master
[01:59:40] <deepdog> Dang it. So I guess I can't compile shorai. =/
[01:59:44] <strcat> rusti: 5
[01:59:45] -rusti- 5
[01:59:45] <indirect> bstrie: and it leads to compiler errors that sound like they're telling you to go in a circle between two things that don't work. pretty *punk :P
[01:59:52] <Eridius> bstrie: you shoudl at least set HEAD to incoming
[01:59:55] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[02:00:07] *** Joins: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net)
[02:00:13] <bstrie> Eridius: good point
[02:00:16] <bstrie> we should
[02:00:45] <bstrie> deepdog: let me look at shorai real quick
[02:00:49] <strcat> well there are plans to get rid of master soon
[02:00:49] <adu> when is http://static.rust-lang.org/doc/core/index.html going to show up as http://static.rust-lang.org/doc/std?/index.html
[02:00:51] <strcat> so..
[02:01:12] <strcat> adu: the docs are generated from master
[02:01:12] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[02:01:19] <adu> oic
[02:01:23] <cmr> adu: eventually
[02:01:28] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[02:01:40] <adu> cmr: I like your honesty :)
[02:01:59] <bstrie> deepdog: I think the real problem might be with zero.rs
[02:02:19] <bstrie> deepdog: zero.rs basically just provides stubs for every "lang item" that the compiler needs, of which "sized" is one
[02:02:27] <deepdog> bstrie: Makes sense.
[02:02:33] <bstrie> a new one, to boot
[02:02:49] <deepdog> What commit adds sized?
[02:02:55] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[02:03:11] <bblum> deepdog: b8a53b5a4cb594326ec90feb960d018e7ae23f2a
[02:03:37] <cmr> (what is shorai?)
[02:04:07] <deepdog> cmr: A basic OS written in Rust.
[02:04:20] <aatch> Thiez, ping
[02:04:34] <bjz> Luqman: I made an elem method so you can do: matrix.elem(i, j)
[02:04:39] <bstrie> cmr: like rustboot, but a more more OS-y
[02:04:45] <bstrie> *bit more
[02:04:54] <bstrie> https://github.com/jmgrosen/shorai
[02:05:28] <cmr> "For running it, you'll also need an x86 emulator (I'm using QEMU)"
[02:05:29] <cmr> Pft
[02:06:27] <cmr> https://github.com/tsgates/rust.ko
[02:06:33] <cmr> Now *that* is great
[02:06:35] <aatch> cmr, I know, everybody knows that you should use a 68000 emulator
[02:07:58] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[02:08:37] *** Joins: tjc (tjc@moz-B867959A.redactedconsulting.com)
[02:08:37] *** ChanServ sets mode: +o tjc
[02:09:44] <aatch> Gah, Thiez wasn't kidding...
[02:11:21] <heftig> cmr: now we just need rust-std.ko and rust-extra.ko
[02:11:36] <strcat> aatch: did you bisect it or something?
[02:11:38] <aatch> THIEZ! INLINE ALWAYS! ARRGHRSHIJREHS($J#Q$V( $#Q (U^T$#QFA(
[02:12:01] *** Quits: a_m0d (a_m0d@moz-9F925EFA.hm.shawcable.net) (Quit: Leaving.)
[02:12:04] <strcat> aatch: huh? ;p
[02:12:10] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Client exited)
[02:12:14] * aatch is seriously considering making the compiler segfault on that
[02:12:22] <MaikKlein> is .each composable now ?
[02:12:38] <strcat> for some value of composable
[02:12:43] <strcat> external iterators are composable
[02:12:44] <aatch> There are a tonne of #[inline(always)] fns on rustray
[02:12:52] <MaikKlein> http://smallcultfollowing.com/babysteps/blog/2013/01/16/revised-for-loop-protocol/
[02:13:01] <strcat> MaikKlein: it returns a bool
[02:13:04] <strcat> sometimes useful
[02:13:05] <aatch> which is probably the issue
[02:13:13] <strcat> doesn't make internal iterators not painful to use
[02:13:24] <strcat> easy to write, sure
[02:13:48] <adu> OS?!?
[02:14:02] <strcat> if I put filter in iter.rs no one will no how to use it ;\
[02:15:07] <adu> deepdog: Â∞ÜÊù•?
[02:15:08] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[02:15:54] <deepdog> adu: I'm sorry?
[02:17:11] <adu> Â∞ÜÊù• is pronounced "shorai" in Japanese and it means "future"
[02:18:00] <deepdog> Ah.
[02:18:11] <adu> I was wondering if that was intentional
[02:19:08] <deepdog> I don't know if the repo name is intentional. I didn't create it. =P
[02:20:52] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Quit: leaving)
[02:21:23] <cmr> strcat: so what are internal/external iterators?
[02:22:09] *** Quits: dforsyth (dforsyth@AC76BBB4.5FDB5121.EE6E63A5.IP) (Ping timeout)
[02:22:17] <strcat> cmr: internal ones take a closure and run it until it asks to break
[02:22:21] <heftig> internal iterators are like for object.each |x| { ... }
[02:22:37] *** Quits: Sevki (Sevki@moz-EB20D033.cable.virginmedia.com) (Quit: Linkinus - http://linkinus.com)
[02:22:42] <strcat> external ones are an object that you can advance as-needed
[02:22:51] <cmr> oh
[02:22:56] <strcat> without compiler support, external iterators are generally more complicated to write
[02:23:09] <dbaupp> aatch: the #[inline(always)] doesn't seem to be the problem
[02:23:12] <strcat> but they're a superset of internal iterators... they're much more useful from a user POV
[02:23:24] <aatch> dbaupp, no, but it cut some time off.
[02:23:31] <strcat> simpler/easier to compose, capable of doing things like zip on arbitrary iterators
[02:23:39] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[02:23:51] <dbaupp> aatch: the compile is about 50% slower with them, but it runs faster for me with (always) than just plain #[inline], or with them entirely removed
[02:23:58] *** Quits: dcoates (dcoates@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: )
[02:24:08] <heftig> external iterators are like let iter = object.iterator; for loop || { let x = iter.next(); match x { Some => ...; None => break } }
[02:24:18] <heftig> (that's probably horribly wrong pseudocode)
[02:24:38] <dbaupp> aatch: (assuming that the problem you're talking about is running time, rather than compilation time)
[02:24:40] <strcat> heftig: well yeah, but they can implement a function like each
[02:24:48] <aatch> dbaupp, running time, yes
[02:25:08] <strcat> python *only* has external iterators in the stdlib
[02:25:24] <heftig> coiteration is nice
[02:25:29] <heftig> you need externals for that
[02:25:46] <dbaupp> aatch: yeah, well I get 7.4s with inline(always) and ~8.3 without
[02:26:08] <aatch> dbaupp, hmm, maybe I misread (it happens)
[02:26:28] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[02:26:32] *** Joins: a_m0d (a_m0d@moz-9F925EFA.hm.shawcable.net)
[02:29:29] *** Quits: a_m0d (a_m0d@moz-9F925EFA.hm.shawcable.net) (Quit: Leaving.)
[02:31:05] <bstrie> aatch: r? https://github.com/mozilla/rust/pull/6729
[02:33:00] *** Quits: MaikKlein (maik@moz-7BA44035.dip0.t-ipconnect.de) (Ping timeout)
[02:33:22] <aatch> bstrie, done
[02:34:20] <cmr> r? https://github.com/mozilla/rust/pull/6826
[02:36:33] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[02:36:37] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[02:36:37] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14cea5783 to 14e516d23: 02http://git.io/N3iJvQ
[02:36:37] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:36:39] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[02:36:39] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/shyqAA
[02:36:39] <ghrust> 13rust/06auto 14c77d58f 15Ben Striegel: Add as_c_str method on strings
[02:36:39] <ghrust> 13rust/06auto 14b570536 15bors: auto merge of #6729 : bstrie/rust/ascstr, r=Aatch...
[02:36:40] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:36:54] *** Quits: zz_kimundi (kimundi@moz-A9D9FFFC.dip0.t-ipconnect.de) (Ping timeout)
[02:38:08] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[02:39:57] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[02:40:03] *** Joins: zz_kimundi (kimundi@moz-E9F14C50.dip0.t-ipconnect.de)
[02:40:29] *** zz_kimundi is now known as kimundi
[02:40:39] *** Joins: dforsyth (dforsyth@AC76BBB4.5FDB5121.EE6E63A5.IP)
[02:42:16] <adu> what's the difference between #[f = x] and #[f(x)]?
[02:42:35] <cmr> rusti: #[f = x] mod foo {}
[02:42:36] -rusti- foo.rs:10:15: 10:16 error: unexpected token: `x`
[02:42:36] -rusti- foo.rs:10          #[f = x] mod foo {}
[02:42:36] -rusti-                          ^
[02:42:36] -rusti- application terminated with error code 101
[02:42:58] <cmr> adu: one isn't valid :)
[02:43:30] <bstrie> I really think the #[f="x"] form should just be subsumed into #[f("x")]
[02:43:45] <cmr> actually it is valid it seems
[02:44:12] <cmr> I thought foo=bar was only valid in sub lists
[02:44:16] <adu> I should have said ="x" and ("x")
[02:45:15] <dbaupp> rusti: #[f=1] mod foo {}
[02:45:16] -rusti- ()
[02:45:32] <dbaupp> rusti: #[f("x")] mod foo {}
[02:45:32] -rusti- foo.rs:10:13: 10:16 error: expected ident, found `"x"`
[02:45:32] -rusti- foo.rs:10          #[f("x")] mod foo {}
[02:45:32] -rusti-                        ^~~
[02:45:32] -rusti- application terminated with error code 101
[02:46:10] <adu> Why not make #[‚Ä¶] be equivalent to N3 syntax :)
[02:46:25] <dbaupp> #[f=[1,2,3]] mod foo {}
[02:46:25] <cmr> adu: http://en.wikipedia.org/wiki/Notation3 ?
[02:46:38] <dbaupp> rusti: #[f=[1,2,3]] mod foo {}
[02:46:39] -rusti- foo.rs:10:13: 10:14 error: unexpected token: `[`
[02:46:39] -rusti- foo.rs:10          #[f=[1,2,3]] mod foo {}
[02:46:39] -rusti-                        ^
[02:46:39] -rusti- application terminated with error code 101
[02:46:44] <adu> #[f x, y, z], #[p 1; q 2]
[02:46:58] *** Joins: brendan (brendaneic@moz-EAC95265.hfc.comcastbusiness.net)
[02:46:59] <adu> cmr: yes
[02:47:50] <cmr> Attributes don't really need that much flexibility but I wouldn't be against it
[02:48:26] <aatch> I fixed it!
[02:48:36] <adu> well, the same thing can be accomplished with #[f(1, 2, 3)] right?
[02:48:47] <aatch> so it turns out that sroa is complelety f***ed
[02:48:59] <cmr> aatch: what does sroa do?
[02:48:59] <aatch> but the older version, scalarrepl, is fine
[02:49:03] <adu> what is sroa?
[02:49:08] <adu> is that a blas primitive?
[02:49:10] <aatch> scalar replacement of aggregates
[02:49:11] <cmr> it's an llvm pass
[02:49:53] <aatch> does things like replace one struct with several scalars
[02:50:29] <adu> that sounds unpredictable
[02:50:42] <aatch> adu, it's smart about it.
[02:50:58] <aatch> and it allows it to make better decisions later
[02:51:05] <cmr> aatch: clang uses sroa, so it's probably our IR
[02:51:28] <aatch> cmr, actually, it might not be. It might actually use scalarrepl, which is the older one
[02:51:42] <aatch> but right now, it looks like sroa is hidden behind an option
[02:52:11] <cmr> llvm-as < /dev/null | opt -O1 -disable-output -debug-pass=Arguments lists -sroa
[02:53:13] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[02:53:24] <aatch> cmr, I mean, our IR still sucks
[02:54:31] <aatch> dbaupp, you're on incoming right?
[02:55:29] <dbaupp> aatch: yesterdays incoming, yes
[02:55:52] <dbaupp> aatch: 727274375eba491e01343a3802ac7fbe162d7c9e to be precise
[02:56:05] <aatch> I sent you the pipeline I just used
[02:56:14] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[02:56:23] <aatch> Not only is is faster, on my machine, it's 25% faster
[02:57:28] <cmr> does that carry over to rustc? :)
[02:57:44] <dbaupp> aatch: "warning: Unknown pass loop-vec"
[02:57:49] <aatch> cmr, it will help.
[02:58:21] <aatch> that should be loop-vectorize, looks like your IRC client had a fit
[02:58:28] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[02:58:41] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[02:58:43] <aatch> Ah, yes I'm guessing it cut it off...
[02:58:46] <tikue> can specific fields of a struct be mutable? e.g. struct Foo { bar: Bar, mut baz: Baz }
[02:58:51] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Ping timeout)
[02:58:52] <dbaupp> ok, yeah, I get it to 4.8s with that (partial) pipeline
[02:58:59] <dbaupp> aatch: you're an amazing person!
[02:59:15] <dbaupp> tikue: no, it used to be possible, but not any more
[02:59:17] <cmr> what did Thiez say it was before?
[02:59:26] <tikue> dbaupp: thanks. any workarounds?
[02:59:31] <dbaupp> cmr: I was getting 7.4 before
[02:59:39] <cmr> dbaupp: no, before the regressions
[02:59:44] <dbaupp> tikue: you could use a @mut box (or &mut)
[02:59:55] <aatch> https://gist.github.com/Aatch/27a76fb7ba7ebf04840a
[03:00:00] <tikue> dbaupp: great, thanks, will try that
[03:00:42] <aatch> you still need --opt-level so the code generator optimizes as well.
[03:00:51] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[03:00:57] <dbaupp> aatch: it's only a smidge faster with the full pipeline
[03:01:13] <dbaupp> (i.e. .03s, so probably in the noise)
[03:01:33] <aatch> dbaupp, I figured, the bulk of the work is in the first few passes
[03:01:33] *** Quits: brendan (brendaneic@moz-EAC95265.hfc.comcastbusiness.net) (Ping timeout)
[03:02:39] <cmr> are we measuring the total time?
[03:02:57] <dbaupp> cmr: rustray gives output like:
[03:03:00] <dbaupp> Total time: 6.520s, of which tracing: 4.607
[03:03:18] <aatch> Also, that pipeline takes about the same amount of time as pre-regression
[03:03:37] <dbaupp> to compile?
[03:03:43] <aatch> dbaupp, yep
[03:03:49] <cmr> I only get 5.881s vs 4.586s
[03:03:55] <dbaupp> cool. can it be the default?
[03:04:34] <aatch> dbaupp, I see what happens when I take out the currently-only-3 passes to see the impact
[03:07:04] <aatch> doesn't make a huge difference (likely noise) so I think I'll keep the rough pipeline the same.
[03:09:05] <adu> quick question, the rust manual mentions "The Newsqueak (1988), Alef (1995), and Limbo (1996) family" does this include Go?
[03:12:18] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[03:13:03] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:14:01] <cmr> adu: you'd have to ask graydon
[03:14:41] <tikue> rusti: sqrt(2f)
[03:14:42] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/YbWX
[03:14:43] <cmr> he's the only one who knows for sure what he was inspired by :)
[03:15:12] *** Joins: a_m0d (a_m0d@moz-9F925EFA.hm.shawcable.net)
[03:15:24] <dbaupp> rusti: 2f.sqrt(
[03:15:24] -rusti- foo.rs:11:4: 11:5 error: incorrect close delimiter: `}`
[03:15:25] -rusti- foo.rs:11     }));
[03:15:25] -rusti-               ^
[03:15:25] -rusti- application terminated with error code 101
[03:15:31] <dbaupp> rusti: 2f.sqrt()
[03:15:32] -rusti- 1.41421356
[03:15:36] <tikue> ah
[03:15:42] <tikue> thanks ;)
[03:15:51] *** Quits: tjc (tjc@moz-B867959A.redactedconsulting.com) (Quit: zzzzzzzzzz)
[03:16:35] <adu> does str::to_bytes always use UTF-8?
[03:16:39] <tikue> (2 as f32).sqrt()
[03:16:45] <tikue> rusti: (2 as f32).sqrt()
[03:16:47] -rusti- 1.41421356
[03:16:53] *** Joins: sankha93 (Instantbir@7DED7110.5DD63608.8B6C1D65.IP)
[03:17:16] <adu> rusti: "Â∞ÜÊù•".to_bytes()
[03:17:17] -rusti- ~[229, 176, 134, 230, 157, 165]
[03:17:22] *** Joins: jack (jack@moz-DCAC42FF.dia.static.qwest.net)
[03:17:36] *** Joins: enticeing (user@B2F7F54B.E4834407.EAAB5301.IP)
[03:17:45] <cmr> adu: strings are always utf8, no exception
[03:17:47] <cmr> (except bugs)
[03:18:05] <cmr> (of which there are many, but mostly only in corner cases)
[03:18:05] <enticeing> is unsafe implied in extern blocks?
[03:18:24] <enticeing> or, i just read that wrong, sorry
[03:18:44] <aatch> Huh, looks like the pipeline I have no doesn't choke to death on #[inline(always)] either
[03:19:39] <enticeing> aatch: i'm trying to write proper ncurses bindings
[03:19:48] <adu> rusti: "Â∞ÜÊù•".to_bytes().map(|b| {return u8::to_str_radix(b, 16)})
[03:19:49] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/PMDM
[03:20:12] <cmr> enticeing: there is native terminfo parsing and expansion about to land in extra::terminfo
[03:20:39] <cmr> standalone lib in https://github.com/cmr/terminfo-rs
[03:20:44] <enticeing> i haven't used terminfo much
[03:21:23] *** Quits: sankha93 (Instantbir@7DED7110.5DD63608.8B6C1D65.IP) (Ping timeout)
[03:21:58] <enticeing> i actually might just write a termbox port
[03:22:10] *** Joins: sankha93 (Instantbir@7DED7110.5DD63608.8B6C1D65.IP)
[03:22:13] *** Quits: jack (jack@moz-DCAC42FF.dia.static.qwest.net) (Quit: Leaving.)
[03:22:24] *** Joins: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[03:22:40] <cmr> please use terminfo instead of hardcoding escape codes.
[03:23:03] <enticeing> ncurses probably uses terminfo itself
[03:23:15] <cmr> ncurses does, termbox doesn't
[03:23:30] <enticeing> oh yeah, forgot about that
[03:24:28] <cmr> I wrote extra::terminfo with ncurses compat in mind, so if you do use it let me know if you find any bugs (besides the explicit "not implemented" errors)
[03:24:35] *** Joins: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com)
[03:24:41] <fdr>  cmr: I saw your ping
[03:25:09] *** Joins: H4199 (chatzilla@moz-64E556D3.austin.res.rr.com)
[03:25:15] <fdr> like, just now.
[03:25:23] <cmr> fdr: I was just going to say if you do any performance work, document the steps you took to profile and stuff somewhere please :)
[03:25:34] <enticeing> well, i could only find ncurses bindings for 0.3, although i didn't look ALL that hard
[03:25:36] <fdr> well, I'll be figuring it out for the first time.
[03:25:52] <fdr> I stared at perf a bit before I said much, and it didn't look easy because it's splayed out all over.
[03:26:04] <cmr> yeah
[03:26:13] <cmr> death by a gazillion papercuts
[03:26:30] <fdr> although I think the root of many of these trees is a full blown malloc
[03:26:59] <cmr> strcat was working on integrating jemalloc into the runtime
[03:27:01] <fdr> however, a lot of them may be controlled by LLVM....unclear.
[03:27:15] <fdr> I think general allocators can only get you so far, because they have to support free().
[03:27:27] <cmr> which would be a win especially on mac and windows
[03:27:36] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[03:28:55] <adu> rusti: str::concat("Â∞ÜÊù•".to_bytes().map(|&b| fmt!("%x ", b as uint)))
[03:28:56] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/Whgd
[03:29:14] <cmr> rusti: use std::str; str::concat("Â∞ÜÊù•".to_bytes().map(|&b| fmt!("%x ", b as uint)))
[03:29:16] -rusti- ~"e5 b0 86 e6 9d a5 "
[03:29:20] <adu> YEY
[03:29:28] <adu> that's definitely UTF8
[03:29:41] *** Joins: thomaslee (thomaslee@moz-306D3DF4.hsd1.or.comcast.net)
[03:30:00] <cmr> enticeing: https://github.com/drhodes/rust-ncurses and https://github.com/pnkfelix/rust-curses ?
[03:30:22] <Luqman> bjz: sweet!
[03:30:26] <enticeing> hmm, i hadn't found the last one
[03:31:15] <aatch> Wow... librustc takes 26s on translation (that's just generating the initial IR) on my machine
[03:32:20] <fdr> I'm trying to read trans to figure out what the dealio is and put in some instrumentation, and trying some of the stuff graydon recommened poking at.
[03:32:51] <adu> fdr: poke?
[03:32:55] <fdr> hi.
[03:33:15] <fdr> oh, my usage of the word poking at.  Investigating.
[03:33:24] <fdr> He gave some incantations he thoguht highlighted a problem, so I figured I'd run them.
[03:33:59] <adu> cmr: I thought you didn't need to use std
[03:34:16] <cmr> adu: the reexports in the prelude were removed
[03:34:24] <adu> fdr: I found an incantation that highlighted a problem
[03:34:39] <adu> cmr: I see
[03:35:02] <fdr> oh?
[03:35:08] <cmr> erm, @adu
[03:36:39] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:36:39] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/shyqAA
[03:36:39] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:36:40] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[03:36:56] <aatch> Oh wow... 21s in type checking...
[03:36:58] <adu> fdr: while attempting to implement posix/bsd echo, https://gist.github.com/andydude/5682918 works, but https://gist.github.com/bjz/5682965 fails
[03:37:03] *** Joins: sanxiyn (tinuviel@AE8B10D7.A92E374.57C4C441.IP)
[03:37:04] <aatch> I wonder what's going on in there...
[03:37:19] <fdr> aatch: well, you took the words out of my mouth on that one.
[03:37:34] <sanxiyn> I note that http://www.reddit.com/r/rust/ hit 1,000 readers
[03:37:41] <aatch> I mean, this is for rustc, so I'm not surprised
[03:37:49] <fdr> I am. That's a lot of compute time.
[03:39:12] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[03:39:38] <fdr> adu: hmm. okay, can you elaborate a tiny bit? I don't really know anything about rust, I just decided to start poking around a few days ago because I was mystified about...well, zero.rs mostly, but then after that the compilation time.
[03:40:19] <aatch> fdr, do you mean me?
[03:40:32] <cmr> too  much confusion!
[03:40:33] <fdr> no, I think adu autocompleted me, but I feel like I don't get it or it's an error.
[03:40:47] *** Quits: SiegeLord (siege@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[03:41:07] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[03:41:16] <aatch> Oh, you mentioned compile time, thats all.
[03:41:17] <adu> fdr: the problem is somewhere in match with two _
[03:41:26] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[03:41:30] <adu> fdr: it appears to be valid rust, but it doesn't compile
[03:41:40] *** Joins: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp)
[03:41:43] <adu> fdr: or it compiles but it doesn't run
[03:41:43] <bjz> Luqman: I'll have to fix rray for you
[03:42:00] <bjz> Luqman: I'm interested if the new methods will speed things up
[03:42:18] <Luqman> bjz: awesome! i was planning on getting around to it sooner or later
[03:42:23] <bjz> Luqman: but yeah, have to head out now
[03:42:38] <bjz> Luqman: your welcome to do it while I'm out though
[03:42:40] <bjz> ;)
[03:42:49] <fdr> adu: are you sure you got the right guy?  I mean, just a dude and I'm all for abiding but I was mostly looking at the compiler performance.
[03:43:00] * bjz has to get around to doing a tutorial
[03:43:08] <adu> fdr: oh, that kind of problem
[03:43:15] <adu> fdr: I'm interested in compiler correctness
[03:43:38] <aatch> I'm interesting in cats
[03:43:43] <aatch> interested*
[03:43:56] <adu> I don't really care much for speed, but if the compiler is doing something wrong then that's morally wrong
[03:44:24] <sanxiyn> fdr: Did you try -Z time-passes?
[03:44:39] <fdr> sanxiyn: yeah, I've discovered and turn on all that instrumentation while I was prodding around
[03:45:21] <sanxiyn> It seemed to me LLVM is where most time is spent
[03:45:37] <fdr> it is. I asked about that on the ML. More than one person suggests it's a lot of garbage IR
[03:45:54] <fdr> that might explain why the output binary is modest but the time spent optimizing it is forever.
[03:46:09] <fdr> (modest in size)
[03:47:45] <fdr> adu: shrug. It's wrong, but so is slurping up your one and only youth while you fix bugs.
[03:47:48] <aatch> fdr, I've been doing a lot with it recently
[03:48:12] <fdr> aatch: words of advice, discouragement, or encouragement?
[03:48:34] <fdr> oh wait, I forgot, you are == the first respondant on the ML
[03:48:44] <fdr> s/respondant/respondent/
[03:49:00] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[03:49:03] <adu> fdr: too late, already did that
[03:49:17] <aatch> Well the IR produced is pretty crap, so LLVM does take a while on the passes.
[03:49:30] <fdr> adu:  :(
[03:49:32] <aatch> However, I'm not convinced it's as much of a factor as it seems
[03:49:39] <sanxiyn> aatch: The question is, which pass?
[03:49:48] <fdr> It's the instruction selection.
[03:50:04] <aatch> sanxiyn, ah, all of them. More accurately, it's not so simple because they all interact
[03:50:28] <fdr> orly.  this is how LLVM reports it at least, which could be but an artifact...
[03:50:32] <cmr> borrowck is pretty slow too
[03:50:40] <sanxiyn> Is it?
[03:50:48] <sanxiyn> I found borrowck to be quite fast
[03:50:50] <cmr> compared to the other non-llvm passes
[03:50:54] *** Joins: carter (carter@moz-12C317EF.nyc.res.rr.com)
[03:50:56] <sanxiyn> typeck is slow
[03:51:01] <fdr> the high poles from what I can see is type checking and translation
[03:51:07] <cmr> it's the longest for libstd at least
[03:51:14] <sanxiyn> cmr: Really?
[03:51:21] <fdr> heh...
[03:51:30] <cmr> time: 1.424 sanxiyn type checking
[03:51:41] <cmr> time: 4.533  borrow checking
[03:51:54] <aatch> All of them are different
[03:52:11] <aatch> Some take longer than others in different places because of the various styles
[03:52:39] <sanxiyn> aatch: By the way, do you know something about what caused changes in http://huonw.github.io/isrustfastyet/ ?
[03:52:47] <aatch> sanxiyn, yes. Me
[03:52:52] <sanxiyn> Graph didn't move at all for some time, and then suddenly changes
[03:53:01] *** Joins: brson (brson@E9CDE21E.991753BB.CA4D1600.IP)
[03:53:01] *** ChanServ sets mode: +o brson
[03:53:05] <aatch> I am responsible for the big spike, and the following fall
[03:53:19] <sanxiyn> What were the changes?
[03:53:19] <fdr> borrowcheck is pretty expensive is rustc too.
[03:53:22] *** Quits: carter (carter@moz-12C317EF.nyc.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[03:53:24] <aatch> hopefully me next PR will drop it further
[03:53:31] <aatch> sanxiyn, changes to optimization.
[03:53:53] <brson> hi, sanxiyn
[03:53:58] <sanxiyn> Hi
[03:54:02] <fdr> aatch: I'm curious what's in there, can I read the patch(s) to kind of get a sense what whacking that stuff around looks like?
[03:54:05] <aatch> Apparently one of the passes causes LLVM to choke #[inline(always)]
[03:54:28] <aatch> choke on*
[03:54:41] <aatch> fdr, whacking what stuff around?
[03:55:03] <sanxiyn> brson: I asked about io_error on the list... Is it just matter of commenting in pub for conditions?
[03:55:05] <cmr> Is there a way to run everything *except* llvm? Does --no-trans generate IR?
[03:55:08] <fdr> the compiler.  Generally, I like to read pertinent changes when I basically don't know what I'm doing.
[03:55:15] <fdr> so, all the time, really.
[03:55:17] <sanxiyn> (Issue mentions snapshot, which I think was done? Or not?)
[03:55:25] <jld> --no-trans doesn't generate IR.
[03:55:35] <aatch> cmr, -Z no-opt will turn off optimizations
[03:55:37] *** Joins: rhelmer (rhelmer@moz-DB4A9C19.scl3.mozilla.com)
[03:55:37] <sanxiyn> cmr: --emit-llvm?
[03:55:49] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[03:55:53] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Ping timeout)
[03:56:14] <aatch> though I think it will still do always-inline (I plan on fixing that)
[03:56:23] <aatch> you can also do --passes=""
[03:56:45] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[03:56:57] *** Joins: sam1 (sam@moz-ADDDDFB1.mc.videotron.ca)
[03:57:07] <sanxiyn> --emit-llvm does no LLVM code generation (from LLVM IR to machine code)
[03:57:42] <cmr> I think I want -Z no-opt and --emit-llvm, then
[03:58:03] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[03:58:38] <cmr> fdr: https://github.com/Aatch/rust/commit/faf1afee16cfacf0318ca2b88bc4fa5e507418dd was the regression patch
[03:58:50] <cmr> fdr: not really interesting, just shuffling some strings around to change the order of LLVM passes
[03:59:23] <aatch> fdr, I know
[03:59:30] <aatch> I'm fixing it.
[03:59:56] <fdr> well...yeah, I was just curious as to how one works on it.
[04:00:11] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (Ping timeout)
[04:00:11] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (Ping timeout)
[04:00:55] *** Joins: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org)
[04:01:12] <aatch> fdr, well in this case, it's really just looking at the passes and seeing what changes make things faster
[04:01:26] <brson> sanxiyn: I don't see the email you are referring to. Can you give me a link?
[04:01:31] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[04:01:35] <aatch> Sometimes it's just trying new things and seeing what happends
[04:01:46] <sanxiyn> brson: https://mail.mozilla.org/pipermail/rust-dev/2013-May/004310.html
[04:01:49] <aatch> the --passes option is there to make that much easier.
[04:01:54] *** Quits: thomaslee (thomaslee@moz-306D3DF4.hsd1.or.comcast.net) (Connection timed out)
[04:01:56] *** Quits: deepdog (deepdog@moz-490E834C.client.mchsi.com) (Quit: Leaving)
[04:02:04] <brson> sanxiyn: thanks
[04:02:55] *** Quits: joelteon (joel@moz-82AAB099.rs) (Quit: bye)
[04:02:58] <fdr> that's pretty neat.
[04:03:15] <cmr> perf record reports 14.34% in vec::from_elem when building libstd
[04:03:24] *** Joins: joelteon (joel@moz-82AAB099.rs)
[04:03:26] <sanxiyn> Heh
[04:03:29] *** Quits: a_m0d (a_m0d@moz-9F925EFA.hm.shawcable.net) (Quit: Leaving.)
[04:03:31] <sanxiyn> What are the callers?
[04:03:55] <aatch> fdr, like adding scev-aa in makes the passes quite a bit faster
[04:04:16] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[04:04:19] <aatch> (scev-aa being scalar evolution alias analysis)
[04:04:26] <fdr> :reads doc:
[04:04:28] <sanxiyn> aatch: *Adding* passes make it faster?
[04:05:08] <aatch> sanxiyn, yep.
[04:05:20] <aatch> Goddammit, I still get the resolve errors!
[04:05:25] <sanxiyn> cmr: IIRC perf record -g should tell you where things are called from
[04:05:41] <cmr> sanxiyn: I used -g, just trying to figure out how to see that data :)
[04:05:48] <sanxiyn> Heh
[04:05:48] * cmr hasn't used perf in a long time
[04:06:34] <dbaupp> aatch: does the order of the args to --passes matter? (i.e. --passes "foo bar foo" will run foo twice with bar in between/)
[04:06:41] <aatch> dbaupp, yep
[04:06:42] <cmr> dbaupp: yes
[04:06:50] <dbaupp> cool
[04:06:59] <brson> sanxiyn: I think the fix for #6009 is snapshotted and /*pub*/ on the conditions can be uncommented. I don't know if that will fix the cross-crate ice.
[04:07:01] *** Joins: thomaslee (thomaslee@moz-306D3DF4.hsd1.or.comcast.net)
[04:07:05] *** Joins: z0w0 (zack@moz-B5D18119.lns1.woo.bigpond.net.au)
[04:07:45] <sanxiyn> brson: ok will try then. Thanks
[04:08:09] *** Quits: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu) (Ping timeout)
[04:08:59] <cmr> sanxiyn: looks like it's mostly visit::visit_item_26149::_46695c5c8658758d::_07pre and visit::visit_method_helper_26223::_bd53cbd5c6f1c61::_07pre 
[04:09:52] *** Quits: sam1 (sam@moz-ADDDDFB1.mc.videotron.ca) (Ping timeout)
[04:09:52] *** Quits: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu) (Ping timeout)
[04:09:55] <sanxiyn> Eh
[04:10:07] <sanxiyn> cmr: Is rustc itself built with optimization?
[04:10:08] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[04:10:12] <cmr> sanxiyn: yes
[04:10:24] <sanxiyn> Hm
[04:10:33] <cmr> actually I take that back
[04:10:37] <cmr> it's mostly middle::borrowck::move_data::__extensions__::meth_67671::new::_b0bda54786a63cd0::_07pre
[04:10:38] *** Quits: acrichto (acrichto@moz-17CABEB0.wv.cc.cmu.edu) (Ping timeout)
[04:11:18] <cmr> it's never even called in there though :\
[04:11:48] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:12:45] *** Quits: enticeing (user@B2F7F54B.E4834407.EAAB5301.IP) (Client exited)
[04:13:02] <dbaupp> cmr: inlining may move a call to from_elem in another function into new()
[04:13:35] <sanxiyn> cmr: Must be new... I think move wasn't done in borrowck just a few days ago
[04:13:36] *** Joins: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu)
[04:13:38] *** Joins: sam1 (sam@moz-ADDDDFB1.mc.videotron.ca)
[04:14:39] <sanxiyn> That is, pre-#6784
[04:14:39] *** Joins: acrichto (acrichto@moz-B63D64BD.res.cmu.edu)
[04:15:15] <dbaupp> cmr: from_elem is called 3 times in DataFlowContext::new
[04:15:27] *** Quits: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu) (Ping timeout)
[04:15:49] <dbaupp> (which FlowedMoveData::new calls twice)
[04:18:03] *** Quits: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu) (Quit: leaving)
[04:19:06] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[04:20:00] *** Joins: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu)
[04:23:52] *** Joins: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu)
[04:24:39] *** Quits: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Client exited)
[04:25:10] *** Joins: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu)
[04:29:12] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Ping timeout)
[04:29:39] <cmr> rusti: 2^16
[04:29:40] -rusti- 18
[04:29:48] <cmr> rusti: math::pow(2, 16)
[04:29:50] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/jESN
[04:30:01] <cmr> making me actually look it up...
[04:30:02] <jld> rusti: 1<<16
[04:30:03] -rusti- 65536
[04:30:09] <cmr> yeah that works :)
[04:32:05] <cmr> [0:29:53]~/entropy/opts> time ./from_elem2
[04:32:07] <cmr> ./from_elem2  3.47s user 0.01s system 99% cpu 3.484 total
[04:32:09] <cmr> [0:30:01]~/entropy/opts> time ./from_elem 
[04:32:11] <cmr> ./from_elem  2.10s user 0.01s system 99% cpu 2.112 total
[04:32:15] *** Quits: wizeman (quassel@moz-9C343656.dyn.user.ono.com) (Connection reset by peer)
[04:32:19] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[04:32:22] <cmr> switching from based on from_fn to simple while loop
[04:32:47] <cmr> (2^24 iters of a u8 and u64 constant, made sure it wasn't dropped by DCE)
[04:32:56] *** Joins: wizeman (quassel@moz-9C343656.dyn.user.ono.com)
[04:34:32] *** Quits: jrfeenst (jrfeenst@moz-3265BD65.cpe.norwoodlight.com) (Quit: jrfeenst)
[04:35:10] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[04:37:31] <cmr> And when manually inlining from_fn, ./from_elem  1.37s user 0.01s system 99% cpu 1.388 total
[04:37:43] <cmr> I think calling the closure is probably what's killing it
[04:37:48] *** Quits: z0w0 (zack@moz-B5D18119.lns1.woo.bigpond.net.au) (Connection reset by peer)
[04:38:28] <aatch> we should probably mark closures like that with `inlinehint`
[04:39:25] <aatch> hmm, if its a block fn, then inlinealways might even be appropriate...
[04:39:44] <aatch> or `always_inline` or whatever it's called...
[04:39:48] <cmr> that'd probably be a big win
[04:40:02] <cmr> that sort of pattern using closures like that for loops is *everywhere*
[04:40:33] <aatch> and they are often fairly small
[04:40:45] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[04:41:09] *** Quits: sanxiyn (tinuviel@AE8B10D7.A92E374.57C4C441.IP) (Quit: Bye)
[04:41:59] <cmr> when it finishes building we'll see what the profile says about its actual impact, at least for from_elem
[04:42:01] *** Joins: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net)
[04:42:02] <aatch> and... nevermind. The layout means it's a pointer
[04:42:16] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[04:42:47] <aatch> so I guess we want to mark the structure with invariant.
[04:43:05] * cmr knows next to nothing about LLVM
[04:43:12] *** Joins: tjc (tjc@moz-B867959A.redactedconsulting.com)
[04:43:12] *** ChanServ sets mode: +o tjc
[04:43:37] <cmr> I can't even read the IR, I've been reading asm dumps...
[04:44:10] *** Joins: carter (carter@moz-12C317EF.nyc.res.rr.com)
[04:44:48] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[04:46:32] <dbaupp> do we support arithmetic on SIMD yet?
[04:46:55] *** Joins: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net)
[04:47:39] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Ping timeout)
[04:47:56] <cmr> Yeah, manually inlining vec::from_fn in vec::from_elem moves it to #4 in the profile, rather than #1 (under int_free, _int_malloc (both libc), and tdefl_compress (rustrt)
[04:48:23] <cmr> 2.87% of total time, way down from 14.xx%
[04:48:53] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[04:48:58] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[04:50:46] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[04:53:18] <cmr> And total time is dropped to 12.434 from 17.134
[04:54:47] <cmr> aatch: will you r+ this dirty hack? :)
[04:55:14] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[04:56:13] <cmr> fdr: If you want something nice to do, go through borrowck and figure out why from_elem is a bottleneck and if that can be fixed. see dbaupp's prior messages
[04:56:20] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[04:56:45] *** Quits: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com) (Ping timeout)
[04:58:31] <cmr> aatch: r? https://github.com/mozilla/rust/pull/6876
[04:59:57] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Ping timeout)
[05:02:04] <dbaupp> aatch: do you want more confirmation of rust's new slowness? One of my random number generators has gone from 5s -> 17s :(
[05:02:13] <dbaupp> I'll try with the passes you suggested
[05:02:56] *** Quits: dforsyth (dforsyth@AC76BBB4.5FDB5121.EE6E63A5.IP) (Ping timeout)
[05:03:26] <cmr> dbaupp: it'd be awesome if you could compare and maybe see what is causing the slowdown
[05:03:45] <dbaupp> cmr: compare what?
[05:03:55] <cmr> the generated code of old and new
[05:04:04] <aatch> I'm wondering if it's related to whatever is causing resolve to shit its pants
[05:04:08] <dbaupp> using aatch's new pipeline puts it back at 5s
[05:04:13] <cmr> oh good
[05:04:34] <aatch> because that pipeline breaks resolve, but I don't know why.
[05:04:51] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[05:05:10] <dbaupp> aatch: the new one? :(
[05:05:14] <aatch> yep.
[05:05:56] <aatch> I don't know if it's bad code in resolve, metadata, ebml or that the passes are broken
[05:06:20] *** Joins: dforsyth (dforsyth@AC76BBB4.5FDB5121.EE6E63A5.IP)
[05:06:33] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:06:33] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/tgmUVA
[05:06:33] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:06:36] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:06:37] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[05:06:37] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/mpU7VA
[05:06:37] <ghrust> 13rust/06auto 14c299230 15Corey Richardson: Optimize vec::from_elem with manual inlining (borrowck 1.85x speedup on libstd)
[05:06:37] <ghrust> 13rust/06auto 14c23843c 15bors: auto merge of #6876 : cmr/rust/from_elem_opts, r=Aatch...
[05:06:37] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:07:08] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[05:09:24] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Ping timeout)
[05:09:52] *** Joins: dylukes (dylukes@moz-7B9A0DA0.neo.res.rr.com)
[05:10:10] <dbaupp> cmr: it's possibly something about inlining, since the old pipeline leaves the slowest function in the library, while the new one moves it into the benchmarking executable
[05:11:23] *** Quits: dylukes (dylukes@moz-7B9A0DA0.neo.res.rr.com) (Quit: Computer has gone to sleep.)
[05:11:30] *** Quits: an0nymous (an0nymous@moz-A6B0CE4.tx.res.rr.com) (Ping timeout)
[05:12:14] <dbaupp> actually, I don't think that's true
[05:12:25] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:13:57] <dbaupp> yep, ok, i lied, neither slow nor fast inline
[05:14:48] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[05:16:45] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Ping timeout)
[05:18:02] <dbaupp> cmr: ok, the problem is there is a nested loop, and neither closure gets inlined
[05:18:43] *** Quits: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net) (Quit: eholk)
[05:20:04] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[05:20:30] *** Joins: jack (jack@moz-F1B36F9F.hsd1.nm.comcast.net)
[05:24:48] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Ping timeout)
[05:27:22] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[05:29:21] *** Quits: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP) (Quit: (quit))
[05:30:31] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[05:31:07] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[05:31:17] *** Quits: thomaslee (thomaslee@moz-306D3DF4.hsd1.or.comcast.net) (Connection timed out)
[05:32:07] *** Joins: thomaslee (thomaslee@moz-306D3DF4.hsd1.or.comcast.net)
[05:32:35] *** Parts: terra (Adium@moz-D09C25DF.pool.mediaways.net) ()
[05:32:57] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[05:34:13] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Ping timeout)
[05:35:00] *** Joins: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[05:36:52] *** Quits: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Ping timeout)
[05:36:56] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[05:39:40] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Ping timeout)
[05:41:58] *** Joins: pcwalton (pcwalton@moz-9926F7C9.hsd1.ca.comcast.net)
[05:41:58] *** ChanServ sets mode: +o pcwalton
[05:43:24] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[05:45:43] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Ping timeout)
[05:47:26] *** Quits: pcwalton (pcwalton@moz-9926F7C9.hsd1.ca.comcast.net) (Quit: .)
[05:49:32] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[05:50:52] *** cscottnet is now known as cscottnet_away
[05:53:56] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Ping timeout)
[05:55:01] *** Quits: thomaslee (thomaslee@moz-306D3DF4.hsd1.or.comcast.net) (Connection timed out)
[05:56:16] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:56:25] *** Joins: thomaslee (thomaslee@moz-306D3DF4.hsd1.or.comcast.net)
[05:57:34] *** Quits: thomaslee (thomaslee@moz-306D3DF4.hsd1.or.comcast.net) (Client exited)
[05:59:24] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[06:01:45] *** Joins: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net)
[06:02:06] *** Quits: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[06:02:36] *** Quits: tjc (tjc@moz-B867959A.redactedconsulting.com) (Quit: Places to go, people to annoy)
[06:07:46] *** Quits: thou (thou@moz-1C1CA9F7.fasttrackcomm.net) (Input/output error)
[06:09:33] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[06:09:33] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/mpU7VA
[06:09:33] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[06:12:32] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[06:12:32] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/sn4qCw
[06:12:32] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[06:12:35] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[06:12:35] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/OQbn2g
[06:12:35] <ghrust> 13rust/06auto 14aed53f9 15Alex Crichton: Promote unreachable code to being a lint attribute
[06:12:35] <ghrust> 13rust/06auto 14d01c7d0 15Alex Crichton: Fix a bug with HashMap::consume
[06:12:35] <ghrust> 13rust/06auto 14a25c704 15Alex Crichton: Rewrite deriving(Decodable, Encodable)...
[06:12:38] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[06:12:49] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: Don't tell them I was here...)
[06:13:03] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[06:16:28] *** Quits: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Ping timeout)
[06:21:38] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[06:27:29] *** Joins: cdidd (cdidd@moz-63C6A843.broadband.corbina.ru)
[06:27:57] *** Quits: diamond (Richard@moz-625C0DAF.ks.ok.cox.net) (Connection reset by peer)
[06:28:15] <Eridius> rusti: uint::max(3, 5)
[06:28:17] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/HUAf
[06:28:31] <Eridius> rusti: std::uint::max(3, 5)
[06:28:33] -rusti- 5
[06:28:38] <Eridius> why does uint re-export cmp::max?
[06:32:07] *** Quits: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[06:39:15] *** Quits: carter (carter@moz-12C317EF.nyc.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[06:39:34] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (Connection reset by peer)
[06:42:45] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[06:45:11] *** Joins: berak (chatzilla@3AA63B2.4742BCFA.1A5CC7E5.IP)
[06:48:09] *** Quits: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net) (Quit: adu)
[06:50:42] *** Quits: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp) (Client exited)
[06:51:44] *** Joins: jviereck (Adium@moz-7B4B0A42.dclient.hispeed.ch)
[06:51:54] *** Quits: jst (quassel@2557E599.66715431.D25A875A.IP) (Input/output error)
[06:52:03] *** Joins: jst (quassel@2557E599.66715431.D25A875A.IP)
[06:55:45] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[06:56:10] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[06:57:35] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[06:59:57] *** Quits: sankha93 (Instantbir@7DED7110.5DD63608.8B6C1D65.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[07:00:35] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[07:06:52] *** Joins: z0w0 (zack@moz-B5D18119.lns1.woo.bigpond.net.au)
[07:07:07] *** Quits: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu) (Quit: Leaving)
[07:11:57] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:11:58] *** Joins: pseudoku (quassel@47858BEE.F5D37604.520CDC98.IP)
[07:12:08] <pseudoku> what are upvars?
[07:13:11] <Jesse_> variables in the scope of an outer function, when used in an inner function
[07:14:11] *** Quits: Mowah (Mowah@moz-B9D06A8A.cust.bredbandsbolaget.se) (Ping timeout)
[07:15:32] <Jesse_> i think the term comes from the spidermonkey JS engine, which at various times has optimized various cases (e.g. closures that don't reference upvars, or closures that can't escape)
[07:15:33] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: Don't tell them I was here...)
[07:15:49] <Jesse_> not sure if it has a more specific meaning in rustc
[07:17:59] <pseudoku> Jesse_: thanks
[07:21:34] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[07:22:20] *** Quits: jviereck (Adium@moz-7B4B0A42.dclient.hispeed.ch) (Quit: Leaving.)
[07:24:32] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:24:32] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/OQbn2g
[07:24:32] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[07:27:28] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:27:29] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/qbzlCg
[07:27:29] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[07:27:41] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[07:28:56] *** Joins: jviereck (Adium@moz-7B4B0A42.dclient.hispeed.ch)
[07:31:25] *** Parts: berak (chatzilla@3AA63B2.4742BCFA.1A5CC7E5.IP) ()
[07:34:12] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Client exited)
[07:37:06] *** Joins: Palmik (palmik@moz-5CA3F354.pks.muni.cz)
[07:37:15] *** Quits: Palmik (palmik@moz-5CA3F354.pks.muni.cz) (Quit: Palmik)
[07:37:18] *** Joins: Palmik (palmik@moz-5CA3F354.pks.muni.cz)
[07:38:58] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[07:39:14] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[07:45:04] *** Quits: cdidd (cdidd@moz-63C6A843.broadband.corbina.ru) (Ping timeout)
[07:49:24] *** Joins: cdidd (cdidd@moz-86250B8.broadband.corbina.ru)
[07:55:42] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[07:57:04] *** Quits: jviereck (Adium@moz-7B4B0A42.dclient.hispeed.ch) (Quit: Leaving.)
[07:57:37] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[07:59:41] *** Quits: pseudoku (quassel@47858BEE.F5D37604.520CDC98.IP) (Client exited)
[08:05:01] *** Joins: pyrac (pyrac@moz-C37AAD9B.w92-149.abo.wanadoo.fr)
[08:06:25] *** Joins: doomlord (doomlod@moz-3CF8202D.range81-159.btcentralplus.com)
[08:10:38] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[08:12:38] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:17:48] *** Quits: cdidd (cdidd@moz-86250B8.broadband.corbina.ru) (Ping timeout)
[08:17:59] *** Joins: mflamer (Mibbit@moz-C6ED16AA.hsd1.ca.comcast.net)
[08:19:07] <mflamer> how do you call a static function (constructor) of a impl (not of trait) 
[08:19:10] <mflamer> let topo: GMap<Cell> = GMap<Cell>::new(3);
[08:19:44] <mflamer> with generics
[08:19:49] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[08:20:47] *** Joins: jviereck (Adium@moz-7B4B0A42.dclient.hispeed.ch)
[08:21:28] <mflamer> let topo = GMap::new(3); this gets me this error
[08:21:45] <mflamer> error: cannot determine a type for this local variable: unconstrained type
[08:24:14] <mflamer> GMap<T> is the type. I have an impl with a constructor new<T>(....)  impl<T> GMap<T> { 	pub fn new<T>(dim: uint) -> GMap<T> {
[08:24:53] <mflamer> thanks if anyone is around
[08:25:12] *** Joins: cdidd (cdidd@moz-EDE6E06C.broadband.corbina.ru)
[08:25:51] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[08:26:53] <aatch> mflamer, Cell takes a type parameter
[08:28:16] <mflamer> I'm an idiot, Cell is an enum
[08:28:20] <mflamer> thanks
[08:30:01] *** Quits: jviereck (Adium@moz-7B4B0A42.dclient.hispeed.ch) (Connection reset by peer)
[08:30:01] *** Joins: jviereck1 (Adium@moz-7B4B0A42.dclient.hispeed.ch)
[08:30:07] <mflamer> actually that's not it. enum Cell { 	Vertex, 	Edge, 	Face, 	Solid }
[08:30:44] <mflamer> GMap<Cell> should be a valid type
[08:31:32] *** Quits: mflamer (Mibbit@moz-C6ED16AA.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[08:32:18] *** Joins: mflamer (Mibbit@moz-C6ED16AA.hsd1.ca.comcast.net)
[08:35:33] *** Quits: pyrac (pyrac@moz-C37AAD9B.w92-149.abo.wanadoo.fr) (Quit: pyrac)
[08:36:27] *** Joins: haard (fredrik@moz-C0C16A68.cust.telenor.se)
[08:51:26] <aatch> Why on earth would LICM screw over resolve?
[08:52:55] *** Joins: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net)
[08:54:25] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Ping timeout)
[08:54:56] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[08:56:17] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:59:25] *** Quits: haard (fredrik@moz-C0C16A68.cust.telenor.se) (Ping timeout)
[09:01:10] *** Quits: mflamer (Mibbit@moz-C6ED16AA.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[09:06:20] *** Joins: spider-mario (spidermari@moz-2BC095A6.rev.sfr.net)
[09:06:50] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[09:09:07] *** Joins: EXetoC (ex@moz-C741B177.customer.t3.se)
[09:09:10] *** Quits: EXetoC (ex@moz-C741B177.customer.t3.se) (Quit: EXetoC)
[09:09:35] *** Joins: EXetoC (ex@moz-C741B177.customer.t3.se)
[09:11:15] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[09:16:16] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: zzzZZZzzz)
[09:18:03] *** Joins: SimonSapin (simon@A5049320.3E93794D.61EA6C28.IP)
[09:18:36] *** Joins: Blei (philipp@moz-96D25F7A.cust.bluewin.ch)
[09:33:58] *** Quits: SimonSapin (simon@A5049320.3E93794D.61EA6C28.IP) (Quit: Leaving.)
[09:38:23] *** Quits: wgodwfeh (Mibbit@moz-50CDC61B.org.all.de) (Quit: http://www.mibbit.com ajax IRC Client)
[09:43:43] *** Joins: victorporof (victorporo@10E912A5.8D069E5A.4A6B528C.IP)
[09:46:41] *** Quits: wuwei (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Ping timeout)
[09:52:06] *** Joins: mib_fx9w23 (Mibbit@DB6F4AC5.276ECD55.9BA5B9B3.IP)
[09:53:47] *** Quits: mib_fx9w23 (Mibbit@DB6F4AC5.276ECD55.9BA5B9B3.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:54:46] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[09:55:04] *** Quits: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu) (Ping timeout)
[09:55:58] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[09:56:05] *** Joins: wuwei (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[09:56:59] *** Quits: victorporof (victorporo@10E912A5.8D069E5A.4A6B528C.IP) (Connection reset by peer)
[09:57:09] *** Joins: victorporof (victorporo@10E912A5.8D069E5A.4A6B528C.IP)
[09:58:05] *** Joins: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu)
[09:58:44] *** Quits: z0w0 (zack@moz-B5D18119.lns1.woo.bigpond.net.au) (Quit: Leaving.)
[10:06:39] *** Quits: wuwei (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Input/output error)
[10:08:08] *** Joins: doener (doener@moz-121949B3.unitymediagroup.de)
[10:10:21] *** Joins: Mowah (Mowah@moz-C7674B3E.cust.bredbandsbolaget.se)
[10:10:53] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[10:12:00] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[10:17:16] *** Quits: Blei (philipp@moz-96D25F7A.cust.bluewin.ch) (Quit: WeeChat 0.4.1)
[10:27:59] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[10:28:14] <aatch> And after over 8 hours of experimentation... I still have no idea what in the pipeline breaks resolve
[10:28:38] <aatch> I just know that I have a pipeline that /doesn't/ break it now.
[10:29:43] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[10:31:30] *** Joins: SimonSapin (simon@A5049320.3E93794D.61EA6C28.IP)
[10:32:43] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[10:35:23] <aatch> What might cause a hash table to break?
[10:37:19] *** Quits: brson (brson@E9CDE21E.991753BB.CA4D1600.IP) (Quit: leaving)
[10:40:51] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[10:41:04] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[10:44:59] <doener> hm, passing the bc code from --save-temps through opt -O2 and llc gives way better assembly than rustc -OS
[10:45:26] <aatch> doener, you mean rustc -O?
[10:45:47] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[10:46:41] <doener> aatch: hm? -OS works like -O -S. Gives me the assembly output. Identical to what objdump generates from the binary from rustc -O
[10:46:55] <aatch> Oh, didn't think of that.
[10:48:01] <aatch> Anyway, I just finished fixing the optimization pipeline. Yeah, turns out that our codegen is so bad that some optimizations completely break stuff
[10:48:07] <doener> aatch: https://gist.github.com/dotdash/5689977
[10:50:01] <doener> updated to add test_len as well, which is even worse than my_len is the original code
[10:50:01] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[10:52:27] <aatch> huh, wierd
[10:54:37] <aatch> Well I managed to shrink it a little.
[10:54:47] <doener> each round of inlining add a round of copying from regs to stack and back again. Currently affects e.g. transmute and the intrinsics
[10:55:26] *** Quits: SimonSapin (simon@A5049320.3E93794D.61EA6C28.IP) (Quit: Leaving.)
[10:55:46] <doener> I mostly wonder why that happens at all. I thought that the current pipeline was just a copy of llvm's
[10:55:55] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[10:56:35] *** Joins: SimonSapin (simon@A5049320.3E93794D.61EA6C28.IP)
[10:57:04] <aatch> doener, it's supposed to be. It is not.
[10:57:06] <aatch> mea culpa
[10:58:26] <doener> Ah, ok
[10:59:04] <caitp> how could I have an object in rust whose full type is not necessarily known by it's owner? let foo : *Trait = TraitModule::newForName(name); or something?
[11:01:06] *** Joins: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net)
[11:05:14] *** Quits: acrichto (acrichto@moz-B63D64BD.res.cmu.edu) (Ping timeout)
[11:05:59] <caitp> I am having trouble finding any information on doing this :(
[11:06:37] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[11:07:25] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[11:07:37] *** Quits: SimonSapin (simon@A5049320.3E93794D.61EA6C28.IP) (Quit: Leaving.)
[11:08:01] *** Quits: lerc (quassel@121-74-233-23.telstraclear.net) (Client exited)
[11:10:41] *** Joins: acrichto (acrichto@moz-B63D64BD.res.cmu.edu)
[11:12:48] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[11:15:15] <EXetoC> is this supposed to work? "struct S<'self> { x: &'self [int] } impl<'self> S<'self> { fn new() { let x = ~[1]; S {x: x} } }"
[11:17:01] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[11:17:32] <doener> Should fail, I'd say. x doesn't outlive the body of new()
[11:17:40] <doener> rusti: struct S<'self> { x: &'self [int] } impl<'self> S<'self> { fn  new() { let x = ~[1]; S {x: x} } }
[11:17:42] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/KTHf
[11:18:07] <doener> rusti: struct S<'self> { x: &'self [int] } impl<'self> S<'self> { fn  new() -> S { let x = ~[1]; S {x: x} } }
[11:18:08] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/RXYR
[11:18:19] <aatch> doener, I tried something, it's not the optimizations, exactly, that are the problem.
[11:18:48] <aatch> I decided to see what would happen if I ran the emitted through just llc, and I got the same output
[11:19:00] <aatch> seems like llc does something else.
[11:19:56] <doener> without running it through "opt"?
[11:20:03] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[11:20:32] <aatch> doener, yep
[11:21:14] <EXetoC> doener: right. making a copy works, but not always. I don't really want to use either malloc or the GC heap, but maybe I have to
[11:22:09] <doener> aatch: hm, passing either len.bc or len.opt.bc to just llc still gives me the bad asm
[11:22:23] <aatch> doener, weird.
[11:22:39] <EXetoC> actually, I shouldn't copy things for no reason
[11:22:54] <doener> aatch: this is with llvm 3.2
[11:23:11] <aatch> Still, I'd say that what rustc puts out isn't necessarily indicative of the /actual/ output
[11:23:32] <aatch> doener, same here.
[11:23:42] <aatch> But I have a different pipeline
[11:24:15] *** Joins: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp)
[11:25:22] <EXetoC> another alternative is to allocate at the call site, but that might require a lot of boilerplate
[11:26:38] <doener> EXetoC: I guess I'd need more context to understand your problem. In that example, you're doing malloc and free in new()
[11:28:17] *** Joins: lerc (quassel@moz-598ED764.telstraclear.net)
[11:29:16] <EXetoC> doener: so I guess the member might have to be owned then, but then I need to figure out how to avoid copies.
[11:30:17] *** Joins: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl)
[11:32:11] *** Joins: judder (maradukewa@385DDD8F.206937E4.78E362FE.IP)
[11:32:55] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Connection reset by peer)
[11:34:14] *** Joins: MaikKlein (maik@moz-7BA44035.dip0.t-ipconnect.de)
[11:35:18] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[11:41:52] <EXetoC> doener: well, I actually wanted the member to be owned, without having to make a copy, but it works now that I've re-ordered the statements
[11:42:45] <EXetoC> I don't know if it is strictly necessary in my case though, but it doesn't matter
[11:44:12] <caitp> why does str::from_bytes and str::raw::from_buf_len assert when byte array is not valid utf8?
[11:44:18] <caitp> that seems like the wrong strategy
[11:45:08] <MaikKlein> what will happen if you implement two traits with the same default method?
[11:45:16] <caitp> it would be nice to provide a version that just stops building the string and notifies the caller of the error
[11:47:32] *** Quits: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp) (Client exited)
[11:47:38] *** Joins: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP)
[11:48:04] <dbaupp> caitp: I think the plan is to use a "condition", so that the caller can handle the error when it occurs
[11:48:16] <dbaupp> (or not, if it doesn't want to)
[11:48:28] <caitp> that would be sensible
[11:48:40] <dbaupp> and, for example, substitute characters, or just elide them entirely
[11:49:05] <dbaupp> (I think the main blocker for this is the immaturity of the condition system.)
[11:50:03] *** Joins: jrfeenst (jrfeenst@moz-3265BD65.cpe.norwoodlight.com)
[11:53:42] *** Quits: jviereck1 (Adium@moz-7B4B0A42.dclient.hispeed.ch) (Ping timeout)
[11:55:30] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[11:55:41] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Ping timeout)
[11:57:38] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[11:58:30] *** Parts: judder (maradukewa@385DDD8F.206937E4.78E362FE.IP) ()
[12:07:34] *** Quits: Palmik (palmik@moz-5CA3F354.pks.muni.cz) (Ping timeout)
[12:09:45] <MaikKlein> is there a sleep or wait function somewhere?
[12:10:55] *** Joins: Palmik (palmik@moz-FFAB1EAB.vpn.muni.cz)
[12:11:04] <MaikKlein> ah got it
[12:11:21] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:14:45] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[12:15:48] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[12:18:47] *** Joins: bletch (Mibbit@moz-E89B7C5B.range109-154.btcentralplus.com)
[12:21:16] *** Joins: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp)
[12:25:57] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[12:29:08] <MaikKlein> how do I make a simple loop like this? 
[12:29:16] <MaikKlein> rusti: for 10.times |i|{}
[12:29:18] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ZEJd
[12:30:03] <dbaupp> rusti: for uint::range(0, 3) |i| {println(i.to_str())}
[12:30:03] <MaikKlein> ah with range right?
[12:30:04] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ViLc
[12:30:11] <dbaupp> rusti: for std::uint::range(0, 3) |i| {println(i.to_str())}
[12:30:12] -rusti- 0
[12:30:12] -rusti- 1
[12:30:12] -rusti- 2
[12:30:12] -rusti- ()
[12:30:15] <MaikKlein> thanks
[12:32:10] <aatch> Finally. Done. https://github.com/mozilla/rust/pull/6881
[12:33:03] <dbaupp> aatch: does loop unrolling not help?
[12:33:11] <dbaupp> aatch: also, yaaay :D
[12:33:28] <aatch> huh?
[12:34:07] <dbaupp> aatch: the loop-unroll pass is deleted?
[12:34:19] <aatch> Oh, the second one was intended to be a part of the passes that do bb-vectorize
[12:34:48] <dbaupp> oh, it was there twice
[12:34:51] <dbaupp> I see :)
[12:36:51] <aatch> dbaupp, those 15 changes (-5 +10) represent about 12 hours of work
[12:36:58] <dbaupp> :(
[12:37:12] <dbaupp> that damn mergefuncs!
[12:37:37] <MaikKlein> is it possible to sleep a task do spawn {//sleep} ? I found this http://static.rust-lang.org/doc/std/timer.html#function-sleep but it seems only to work on uv::iotasks
[12:37:58] <aatch> MaikKlein, it is not, sorry
[12:38:07] <dbaupp> did you do the whole thing by hand? :S (or did you have a script to narrow down the options?)
[12:39:01] <aatch> did it by hand. most of the time came from the compile-test-repeat loop
[12:39:23] <dbaupp> nice work! :)
[12:43:37] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[12:47:37] <aatch> Well I'm going to go to bed. My brain is fried.
[12:47:37] *** Quits: victorporof (victorporo@10E912A5.8D069E5A.4A6B528C.IP) (Ping timeout)
[12:48:01] *** aatch is now known as aatch|ohgodtheoptimization
[12:48:23] <dbaupp> aatch|ohgodtheoptimization: heh, sleep well :)
[12:53:46] *** Quits: MaikKlein (maik@moz-7BA44035.dip0.t-ipconnect.de) (Ping timeout)
[12:55:29] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[12:55:58] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[12:57:35] *** Joins: victorporof (victorporo@10E912A5.8D069E5A.4A6B528C.IP)
[12:59:48] *** Quits: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP) (Ping timeout)
[13:05:35] *** Quits: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp) (Client exited)
[13:06:13] *** Quits: jrfeenst (jrfeenst@moz-3265BD65.cpe.norwoodlight.com) (Quit: jrfeenst)
[13:06:35] *** Joins: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp)
[13:06:40] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[13:08:12] *** Quits: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp) (Client exited)
[13:12:04] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:14:01] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:15:03] <strcat> rusti: botsnack
[13:15:04] -rusti- "nom nom"
[13:15:35] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[13:15:36] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/qbzlCg
[13:15:36] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[13:15:37] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[13:15:37] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/N98Ldg
[13:15:37] <ghrust> 13rust/06auto 146e075b6 15James Miller: Better optimization pipeline
[13:15:37] <ghrust> 13rust/06auto 14b8391cc 15bors: auto merge of #6881 : Aatch/rust/new-passes-2, r=thestinger...
[13:15:37] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[13:19:06] <dbaupp> rusti: std::io::read_whole_file_str(&Path("foo.rs"))
[13:19:07] -rusti- line longer than 150 columns, pastebinned: http://sprunge.us/WhDH
[13:23:03] <strcat> rusti: print(std::io::read_whole_file_str(&Path("foo.rs")))
[13:23:04] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/MWMV
[13:23:19] <strcat> rusti: print(std::io::read_whole_file_str(&Path("foo.rs")).get())
[13:23:21] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/TJPU
[13:23:25] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[13:24:17] *** Quits: H4199 (chatzilla@moz-64E556D3.austin.res.rr.com) (Ping timeout)
[13:26:14] <Thiez> aatch|ohgodtheoptimization: pong?
[13:28:43] <dbaupp> Thiez: he's gone to sleep, but it was probably about rustray and speed
[13:28:57] <Jesse_> rusti: ~botsnack
[13:28:58] -rusti- ~"nom nom"
[13:28:59] *** Joins: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp)
[13:29:02] <dbaupp> specifically, compiling with a recent incoming with this invocation https://gist.github.com/Aatch/27a76fb7ba7ebf04840a
[13:29:29] <Jesse_> strcat: \o/
[13:29:37] *** Joins: bernard (Mibbit@moz-BD7D8526.cable.mindspring.com)
[13:32:02] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[13:32:05] <Thiez> dbaupp: thanks, I'll read a few hours of backlog :D
[13:32:26] <dbaupp> hehe, have fun :)
[13:33:33] <bernard> I am getting ICE when compiling the  "incoming" and "auto". is that just me or this is common at this moment?
[13:34:01] <doener> bernard: incoming built fine for me. Linux x86_64
[13:34:03] <dbaupp> bernard: are you compiling the incoming git branch?
[13:34:40] <bernard> yes, I am also in x86_64
[13:34:51] <dbaupp> what OS?
[13:34:58] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[13:34:59] <bernard> arch linux
[13:35:10] <dbaupp> (in theory, incoming should *never* ICE while bootstrapping)
[13:35:12] <caitp> what happened to core::str::to_lower? was that just moved to core::ascii::to_lower to avoid complicated unicode case folding or something?
[13:35:50] *** Joins: pyrac (pyrac@moz-984F61EC.w83-200.abo.wanadoo.fr)
[13:36:07] <bernard> actually i am "lying". i am using wmware with archlinux. does vmware afftect anything?
[13:36:29] <strcat> bernard: you're probably going OOM
[13:36:43] <caitp> "2013-04-22 Moved ascii out of str"
[13:36:50] <caitp> derp :<
[13:36:58] <strcat> you need 2500MiB for stage0 and maybe 1500MiB for stage1 and stage2 (memory usage was cut down a lot since the last snapshot)
[13:37:14] <bernard> "bernard: you're probably going OOM" what is OOM? quite new here:)
[13:37:18] <strcat> out of memory
[13:37:28] <EXetoC> ICEs caused by OOMs? ok
[13:37:28] <strcat> the linker is probably being killed
[13:37:40] *** Joins: MaikKlein (maik@moz-7BA44035.dip0.t-ipconnect.de)
[13:37:53] <dbaupp> EXetoC: yeah, and the error messages are absolutely useless for identifying that it's an OOM
[13:37:54] <strcat> EXetoC: yes because the linker is a separate process
[13:38:06] <strcat> I bet if you enable backtrace it will say the subprocess (ld) failed
[13:38:30] <strcat> anyway that's the peak memory usage
[13:38:34] <strcat> in stage0.
[13:38:56] <strcat> in stage1 the peak may not be there anymore so rustc would usually just be killed
[13:38:58] <bernard> thanks. i see. i allocate 2gb memory for the vm. I will try to give it 4gb then. thanks strcat
[13:39:03] <dbaupp> https://github.com/mozilla/rust/issues/6154
[13:39:37] <dbaupp> (i.e. that backtrace is failing in ld)
[13:40:03] <strcat> we really need a new snapshot.
[13:40:32] <dbaupp> how much does stage1 use now?
[13:41:30] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[13:41:41] <strcat> dbaupp: ~1500MiB maybe
[13:41:47] <strcat> peak
[13:42:00] <dbaupp> back to "normal" then, cool.
[13:42:03] <strcat> dbaupp: I could make a graph
[13:42:22] <strcat> dbaupp: are you on linux?
[13:42:30] <dbaupp> yup
[13:42:42] <dbaupp> it's valgrind --massif, or something right
[13:42:44] <dbaupp> ?
[13:42:44] <strcat> dbaupp: well, want to know how to measure the peak? :)
[13:42:47] <strcat> dbaupp: no, cgroups
[13:42:59] <dbaupp> oh... hehe, your favourite! :)
[13:43:01] <strcat> massif makes it really slow and doesn't really get an accurate picture (may not include subprocesses)
[13:43:18] <dbaupp> sure, how do I get cgroups to work?
[13:43:20] <strcat> dbaupp: does mount -a or findmnt say you have /sys/fs/cgroup/ mounted?
[13:43:33] <strcat> well, or just look with ls ;p
[13:43:37] <dbaupp> nope
[13:43:49] <dbaupp> well, it exists though
[13:44:08] <strcat> dbaupp: are there dirs in it?
[13:44:19] <dbaupp> it's empty
[13:44:28] <strcat> well, mount -t tmpfs cgroup_root /sys/fs/cgroup
[13:44:45] <dbaupp> yup
[13:44:46] <strcat> mkdir /sys/fs/cgroup/memory
[13:45:07] <dbaupp> done
[13:45:13] <strcat> hm
[13:45:32] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[13:45:32] <strcat> dbaupp: is there anything in that dir? forget if it has to be mounted separately
[13:45:53] <dbaupp> in ../memory? nope
[13:46:07] <dbaupp> (where .. != parent)
[13:46:35] <strcat> mount -t cgroup none /sys/fs/cgroup/memory -o memory
[13:46:47] *** Quits: fdr (user@B280A391.27376607.189F3E15.IP) (Client exited)
[13:46:53] <strcat> dbaupp: and then it should have stuff in it
[13:47:25] <dbaupp> erm, "mount: special device none does not exist"
[13:47:28] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[13:47:29] *** Joins: jrfeenst (jrfeenst@moz-3265BD65.cpe.norwoodlight.com)
[13:47:35] <strcat> hrmm
[13:47:49] <dbaupp> (debian, if it's relevant)
[13:48:06] <strcat> dbaupp: might not have support for cgroups or the memory cgroup in the kernel :(
[13:48:24] <dbaupp> :(, yeah, it's only 3.8, i think?
[13:48:37] <strcat> well a 3.8 kernel will have it
[13:48:43] <strcat> but maybe they didn't compile it in
[13:48:44] <strcat> sec
[13:49:19] <strcat> dbaupp: zgrep CGROUP /proc/config.gz
[13:49:28] <strcat> CONFIG_CGROUPS=y
[13:49:35] <dbaupp> doesn't exists
[13:49:49] <strcat> aw
[13:49:54] <strcat> dbaupp: so yeah I guess they didn't enable it
[13:50:05] <dbaupp> i.e. /proc/config.gz doesn't exist
[13:50:11] <dbaupp> :/
[13:50:15] <strcat> oh.
[13:50:22] <strcat> debian is weird? ;p
[13:50:28] <dbaupp> seems so
[13:50:32] <dbaupp> (or arch is weird :P )
[13:50:44] <strcat> Does Debian have /proc/config.gz?
[13:50:46] <strcat>     /proc/config.gz isn't available in Debian, because the config is provided in /boot/config-*, no need for the in-memory variant (Kernel configuration CONFIG_IKCONFIG and CONFIG_IKCONFIG_PROC). See 541489 
[13:50:53] <strcat> dbaupp: oh so... /boot/config*? ;p
[13:50:56] *** Joins: haard (fredrik@moz-C0C16A68.cust.telenor.se)
[13:50:59] * strcat shrugs
[13:51:28] <dbaupp> CONFIG_CGROUPS=y
[13:51:30] <dbaupp> yup
[13:51:42] <strcat> hrmm
[13:52:05] <strcat> dbaupp: oh, umount /sys/fs/cgroup/
[13:52:30] *** Quits: spider-mario (spidermari@moz-2BC095A6.rev.sfr.net) (Ping timeout)
[13:52:35] <strcat> mount -t cgroup cgroup /sys/fs/cgroup
[13:53:01] <dbaupp> done
[13:53:15] <strcat> dbaupp: anything in there now? ;p
[13:53:27] <dbaupp> yay, lots!
[13:53:38] <strcat> dbaupp: a memory dir?
[13:53:52] <dbaupp> nope :(
[13:55:10] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:55:20] <dbaupp> cat /proc/cgroups
[13:55:35] <dbaupp> #subsys_name    hierarchy       num_cgroups     enabled [...] memory  0       1       0 [...]
[13:55:46] <strcat1> dbaupp: I think if you umount it and
[13:55:47] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[13:55:48] <strcat1> mount -t cgroup -o memory cgroup /sys/fs/cgroup
[13:55:50] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[13:55:52] <strcat1> it will work
[13:56:32] <dbaupp> "mount: No such file or directory"
[13:56:40] <strcat1> heh.
[13:56:56] <dbaupp> cd-ing back to home, "mount: special device cgroup does not exist"
[13:57:33] <dbaupp> looks like I might need to set the cgroup_enable=memory kernel param
[13:57:47] <strcat1> dbaupp: ah
[13:57:50] <dbaupp> http://sroselli.blogspot.com.au/2013/03/lxc-and-cgroupmemory-on-debian.html
[13:57:56] <strcat1> weird
[13:58:00] <dbaupp> can I enable them without rebooting?
[13:58:13] <strcat1> dbaupp: I dunno, I've never run into this ;p
[13:58:34] <strcat1> they get mounted already in arch by systemd, so I guess they must be enabled in the kernel by default
[13:58:47] <dbaupp> heh, I'll add it to my grub cfg and try to remember why ;P
[14:01:10] <dbaupp> strcat1: is rusti still running on your laptop?
[14:01:13] <strcat1> dbaupp: yes
[14:01:17] *** strcat1 is now known as strcat
[14:01:29] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:01:38] <strcat> and it's not very eager about detecting disconnection
[14:01:43] <strcat> I should make it send PINGs or something
[14:01:50] <dbaupp> rusti: botsnack
[14:01:51] -rusti- "nom nom"
[14:02:32] <EXetoC> rusti: cats
[14:02:34] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ZGFd
[14:03:11] <strcat> dbaupp: anyway, once it's mounted right
[14:03:19] <strcat> dbaupp: you just 'mkdir /sys/fs/cgroup/memory/foobar'
[14:03:29] <strcat> and then 'echo pid > /sys/fs/cgroup/memory/foobar'
[14:03:32] <strcat> but the easiest way...
[14:03:46] <strcat> is just just start a shell, echo 0 > /sys/fs/cgroup/memory/foobar/tasks'
[14:03:54] <strcat> (0 means the current pid, you could use $$ too... ;p)
[14:03:55] *** Quits: haard (fredrik@moz-C0C16A68.cust.telenor.se) (Ping timeout)
[14:03:59] <strcat> and then run make
[14:04:30] <strcat> and then /sys/fs/cgroup/memory/foobar/memory.max_usage_in_bytes will have the max usage at the end
[14:04:55] <dbaupp> wow, that's amazingly easy
[14:05:00] <strcat> or you can poll memory.usage_in_bytes
[14:05:08] <strcat> it accounts for all subprocesses and other resources
[14:05:41] <dbaupp> cool! when I next reboot I'll have a go at that
[14:06:27] <strcat> dbaupp: anyway rusti does that to limit memory (memory.limit_in_bytes)
[14:06:37] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[14:06:37] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/N98Ldg
[14:06:37] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[14:06:41] <strcat> and then it looks on cgroup.procs at the end sending SIGKILL until there's nothing to kill
[14:07:05] <dbaupp> there's no way to kill a whole group in one go?
[14:07:11] <strcat> dbaupp: not yet
[14:07:15] <strcat> the API isn't really 100% done :(
[14:07:22] <strcat> looping on cgroup.procs does work
[14:07:53] <dbaupp> SIGKILL is faster than spawning a new process, I guess/hope ;)
[14:07:59] <strcat> dbaupp: yeah :)
[14:08:51] <strcat> dbaupp: it's neat though, because it's a tree
[14:08:59] <strcat> so you can mkdir sub-cgroups in a cgroup
[14:09:10] <strcat> the top-level /sys/fs/cgroup/memory/ is the root one for the whole system
[14:10:21] <dbaupp> oh, that is pretty nice. much nicer than juggling VMs and so on
[14:10:25] <EXetoC> I'm in ur cgroups, cgrouping ur cgroups h√∂h√∂
[14:10:47] <dbaupp> heh
[14:10:56] <strcat> dbaupp: anyway, http://i.imgur.com/auBsjNG.png systemd puts services/sessions in them so I already have a bunch around ;p
[14:11:34] <strcat> mostly just to reliably kill services by default
[14:11:57] *** Joins: berak (chatzilla@D47D3D18.4742BCFA.1A5CC7E5.IP)
[14:12:25] <strcat> rusti shows up there as /playpen/$parent_pid
[14:13:01] <strcat> rusti: fn foo() { loop {} } foo()
[14:13:07] -rusti- timeout triggered!
[14:13:32] <strcat> dbaupp: http://i.imgur.com/ZS6PBqb.png there ;p
[14:13:37] <dbaupp> cgroups allows CPU time (and wall time) limits, right?
[14:14:00] <dbaupp> cool :)
[14:14:08] <strcat> dbaupp: not entirely sure how the cpu/io limits work
[14:14:14] <strcat> there's a cpu.shares file with an integer
[14:14:26] <strcat> it might be like 'nice' but for the whole process group
[14:14:46] <caitp> how do you declare a mutable owning pointer?
[14:14:58] <strcat> dbaupp: it does record user/system time of the group though.
[14:15:02] <caitp> or an owning pointer to mutable foo
[14:15:05] <dbaupp> caitp: the variable that owns it determines the mutability
[14:15:21] <strcat> those are the /sys/fs/cgroup/cpu ones
[14:15:27] <strcat> the reason that cgtop thing doesn
[14:15:31] <caitp> but if it's not owned by a variable and is local/
[14:15:35] <dbaupp> rusti: let mut x = ~1; let y = ~1; *x += 1; (x, y)
[14:15:36] -rusti- (~2, ~1)
[14:15:46] <strcat> doesn't list memory for most is because systemd only puts them in a cpu group by default
[14:16:23] <strcat> and it doesn't know playpen's cpu usage since it's just in a memory one right now. ;p
[14:16:36] <dbaupp> strcat: I see, so the functionality/API is still improving/stabilising?
[14:16:42] <strcat> dbaupp: yeah
[14:16:45] <caitp> basically a local function returns an immutable object, but in initializing that object it needs to be mutable
[14:16:51] <caitp> it's not clear how to do this
[14:16:53] <strcat> dbaupp: lots of it is very recent
[14:16:57] <dbaupp> caitp: it can get frozen
[14:17:03] *** cscottnet_away is now known as cscottnet
[14:17:09] <caitp> but it can't be declared mutable in the first place
[14:17:18] <dbaupp> rusti: fn foo() -> int { let mut i = 0; i += 1; i } foo()
[14:17:19] -rusti- 1
[14:17:47] <dbaupp> strcat: it sounds like something that is ridiculously useful for running untrusted code
[14:18:02] <strcat> dbaupp: well alone it's not very useful, but it's useful as part of the toolset
[14:18:12] <strcat> dbaupp: https://github.com/thestinger/playpen here's the thing I made for rusti
[14:18:26] *** Joins: jorendorff (jorendorff@moz-30F4FB9E.hfc.comcastbusiness.net)
[14:18:27] <strcat> seccomp lets you whitelist a set of system calls, and namespaces let you isolate stuff really well
[14:18:35] <dbaupp> caitp: I don't really understand, maybe some code would help? :)
[14:18:43] <strcat> + cgroups to reliably kill it, and limit resources
[14:19:10] <caitp> I've got it now, but it is pretty terrible
[14:19:35] <strcat> dbaupp: it's pretty damn neat though.
[14:19:51] <strcat> dbaupp: for example playpen makes a private mount namespace, so the cache usage of those mounts is limited by the cgroup memory too
[14:19:57] <strcat> including stuff you put in tmpfs
[14:20:23] <dbaupp> so we can't fill your hard disk via rusti?
[14:20:38] <strcat> dbaupp: well it has a read-only root too
[14:20:38] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[14:20:45] <strcat> dbaupp: but you can't make me go oom by filling the tmpfs :)
[14:20:50] <strcat> it only gets 128MiB
[14:20:50] <dbaupp> I guess that solves that :P
[14:21:13] <dbaupp> rusti: std::vec::from_elem(1 << (20 + 8), 0)
[14:21:15] -rusti- application terminated abnormally with signal 9 (Killed)
[14:21:23] <strcat> rusti: print(std::str::from_bytes(std::process_output("ps", [~"ax"])))
[14:21:24] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/CfWK
[14:21:27] <dbaupp> rusti: std::vec::from_elem(1 << (20 + 7), 0)
[14:21:28] -rusti- application terminated abnormally with signal 9 (Killed)
[14:21:29] <strcat> rusti: print(std::str::from_bytes(std::process_output("ps", [~"ax"]).output))
[14:21:30] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/RiNA
[14:21:38] <dbaupp> rusti: std::vec::from_elem(1 << (20 + 6), 0)
[14:21:40] -rusti- application terminated abnormally with signal 9 (Killed)
[14:21:41] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("ps", [~"ax"]).output))
[14:21:42] -rusti-   PID TTY      STAT   TIME COMMAND
[14:21:42] -rusti-     1 ?        Ssl    0:00 ./foo
[14:21:42] -rusti-    14 ?        R      0:00 ps ax
[14:21:42] -rusti- ()
[14:21:47] <strcat> that's from the pid namespace
[14:21:59] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("mount", []).output))
[14:22:00] -rusti- /dev/sda4 on / type ext4 (ro,relatime,commit=15,data=ordered)
[14:22:00] -rusti- none on /proc type proc (rw,nosuid,nodev,noexec,relatime)
[14:22:00] -rusti- none on /tmp type tmpfs (rw,nosuid,nodev,relatime)
[14:22:00] -rusti- none on /home/rust type tmpfs (rw,nosuid,nodev,relatime)
[14:22:00] -rusti- ()
[14:22:03] <strcat> mount namespace
[14:22:03] <dbaupp> rusti: std::vec::from_elem(1 << (20 + 4), 0)
[14:22:05] -rusti- application terminated abnormally with signal 9 (Killed)
[14:22:33] <strcat> the system can't see rusti's mounts (because it marks them as SLAVE) and rusti can't see the system mounts
[14:22:44] <dbaupp> am I doing something wrong, or is there seriously not enough space to allocate a 16 MB vector?
[14:22:44] <strcat> and they go away when the process does
[14:23:11] <dbaupp> strcat: so it's well separated. :)
[14:23:29] <strcat> dbaupp: isn't that more than 16?
[14:23:34] <strcat> 16 * 8 
[14:23:54] <strcat> rusti: std::vec::from_elem(1 << (20 + 4), 0u8)
[14:23:59] -rusti- timeout triggered!
[14:24:03] <dbaupp> oh, right
[14:24:09] <strcat> oh it tried to print it
[14:24:16] <strcat> I guess the kernel write buffer fills
[14:24:18] <strcat> and it blocks
[14:24:32] <dbaupp> rusti: std::vec::from_elem(1 << (20 + 4), 0u8);
[14:24:33] -rusti- ()
[14:24:45] <dbaupp> rusti: std::vec::from_elem(1 << (20 + 6), 0u8);
[14:24:48] -rusti- ()
[14:25:01] <dbaupp> rusti: std::vec::from_elem(0b111 << (20 + 4), 0u8);
[14:25:04] -rusti- ()
[14:25:14] <dbaupp> rusti: std::vec::from_elem(0b1000 << (20 + 4), 0u8);
[14:25:18] -rusti- application terminated abnormally with signal 9 (Killed)
[14:25:36] <dbaupp> cool! memory limits work! :)
[14:26:45] <dbaupp> yay, aatch's latest pass rewrite gained us a whole pile
[14:27:00] <strcat> rusti: 5
[14:27:01] -rusti- 5peak memory usage: 62388KiB
[14:27:16] <strcat> rusti: 5
[14:27:17] -rusti- 5
[14:27:17] -rusti- peak memory usage: 64388KiB
[14:27:21] *** Joins: z0w0 (zack@moz-B5D18119.lns1.woo.bigpond.net.au)
[14:27:32] <dbaupp> rusti: std::vec::from_elem(0b111 << (20 + 4), 0u8);
[14:27:36] -rusti- ()
[14:27:36] -rusti- peak memory usage: 118128KiB
[14:27:50] <strcat>     unsigned long long mem;
[14:27:52] <strcat>     std::ifstream peak(path);
[14:27:54] <strcat>     peak >> mem;
[14:27:56] <strcat>     printf("\npeak memory usage: %lluKiB\n", mem / 1024);
[14:27:58] <strcat> missed
[14:28:00] <strcat>     snprintf(path, PATH_MAX, "/sys/fs/cgroup/memory/playpen/%jd/memory.max_usage_in_bytes", (intmax_t)pid);
[14:28:02] <strcat> anyway
[14:28:04] <strcat> easy ;p
[14:28:37] <cmr> mornin'
[14:28:44] <dbaupp> cmr: evenin'
[14:28:48] <strcat> rusti: let mut xs = std::hashmap::HashMap::new(); xs.insert(5, 5); xs
[14:28:51] -rusti- line longer than 150 columns, pastebinned: http://sprunge.us/DaDT
[14:28:53] <cmr> Heretic!
[14:28:56] *** Parts: berak (chatzilla@D47D3D18.4742BCFA.1A5CC7E5.IP) ()
[14:29:04] <strcat> rusti: let mut xs = std::hashmap::HashMap::new(); xs.insert(5, 5); xs.len()
[14:29:05] -rusti- 1
[14:29:05] -rusti- peak memory usage: 68948KiB
[14:29:12] <dbaupp> cmr: well, strictly, mornin'
[14:29:28] <strcat> rusti: let mut xs = std::hashmap::HashMap::new(); xs.insert(5, 5); let mut ys = std::hashmap::HashMap::new(); ys.insert("foo", "bar")
[14:29:30] -rusti- true
[14:29:30] -rusti- peak memory usage: 75336KiB
[14:29:41] <strcat> silly rustc
[14:29:47] <dbaupp> rusti: let mut xs = std::hashmap::HashMap::new(); xs.insert(5, 5); let mut ys = std::hashmap::HashMap::new(); ys.insert("foo", "bar")
[14:29:49] -rusti- true
[14:29:49] -rusti- peak memory usage: 73132KiB
[14:29:58] <dbaupp> why's it so variable?
[14:30:03] <strcat> dbaupp: cache maybe
[14:30:09] <strcat> well
[14:30:10] <strcat> hmm
[14:30:22] <strcat> I guess it doesn't include cache that's not mlock'ed
[14:30:39] <strcat> dbaupp: rustc is quite random
[14:30:52] <strcat> if I make /dev/urandom /dev/zero it might be less random ;p
[14:31:18] <dbaupp>  /dev/zero is my favourite RNG
[14:31:32] <dbaupp> the speed is amazing! :P
[14:32:03] <strcat> dbaupp: anyway, definitely the best way to measure stuff like that.
[14:32:08] <strcat> only way, really
[14:32:19] <strcat> you didn't used to be able to *really* know what memory usage was
[14:32:22] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[14:32:32] <strcat> since you couldn't really account for shared libs, kernel resources, mlock'ed pages
[14:32:45] <dbaupp> yeah, I'll even be able to remember it (maybe), because it's just so simple!
[14:33:11] <cmr> graydon has a script somewhere that does it for you
[14:33:22] <strcat> cmr: it's pretty easy to get the peak though
[14:33:31] <strcat> mkdir /sys/fs/cgroup/memory/foobar
[14:33:38] <strcat> echo 0 > /sys/fs/cgroup/memory/foobar
[14:33:41] <strcat> make
[14:33:49] <strcat> cat /sys/fs/cgroup/memory/foobar/memory.max_usage_in_bytes
[14:34:06] <strcat> I think graydon is actually monitoring it as memory / time
[14:34:23] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[14:34:42] <strcat> to find the parts of the compile using the most
[14:34:59] <strcat> instead of just a peak by itself
[14:35:08] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[14:35:13] <strcat> rusti: 5 + 5
[14:35:14] -rusti- 10
[14:35:46] <strcat> cpu cgroups have cpuacct.stat with user/system time, etc.
[14:35:55] <caitp> rusti: (false as int)
[14:36:12] <caitp> no? :(
[14:36:18] <cmr> rusti: false as int
[14:36:19] -rusti- 0
[14:37:17] <caitp> do I not get to evaluate code :(
[14:37:22] <caitp> rusti: true as int
[14:37:23] -rusti- 1
[14:37:26] <cmr> you had a ? in front
[14:37:28] <caitp> hm
[14:37:37] <strcat> dbaupp: I ended up learning all of this stuff to make rusti ;p
[14:37:41] <strcat> so it was well worth it
[14:37:44] <cmr> ?rusti: (false as int)
[14:37:58] <dbaupp> strcat: making rusti was worth it, or learning the stuff?
[14:38:01] <strcat> dbaupp: both!
[14:38:07] <dbaupp> heh :)
[14:38:09] *** Quits: Mowah (Mowah@moz-C7674B3E.cust.bredbandsbolaget.se) (Quit: leaving)
[14:38:10] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[14:38:29] <strcat> I started off using lxc but it wasn't very good.
[14:38:39] <caitp> rusti: true ? ~"ternary expressions are allowed" : ~"nope"
[14:38:40] -rusti- foo.rs:10:9: 10:13 error: unknown start of token: 63
[14:38:40] -rusti- foo.rs:10          true ? ~"ternary expressions are allowed" : ~"nope"
[14:38:40] -rusti-                    ^~~~
[14:38:40] -rusti- application terminated with error code 101
[14:38:56] <strcat> caitp: if true { "foo" } else { "bar" }
[14:39:01] <strcat> rusti: if true { "foo" } else { "bar" }
[14:39:02] -rusti- "foo"
[14:39:55] <strcat> rusti: 5
[14:39:57] -rusti- 5
[14:39:57] -rusti- peak memory usage: 60356KiB
[14:41:27] *** Joins: jviereck (Adium@moz-7B4B0A42.dclient.hispeed.ch)
[14:41:54] <strcat> rusti: std::run::process_output("dash", [~"-c", ~"for i in seq 1 10000; do echo bar >> baz; done"]).status
[14:41:55] -rusti- 0
[14:41:55] -rusti- peak memory usage: 60444KiB
[14:42:00] <strcat> rusti: std::run::process_output("dash", [~"-c", ~"for i in seq 1 10000000; do echo bar >> baz; done"]).status
[14:42:01] -rusti- 0
[14:42:01] -rusti- peak memory usage: 60348KiB
[14:42:12] <cmr> strcat: r? https://github.com/mozilla/rust/pull/6826
[14:42:12] <strcat> rusti: std::run::process_output("dash", [~"-c", ~"for i in seq 1 10000000000; do echo bar >> baz; done"]).status
[14:42:13] -rusti- 0
[14:42:13] -rusti- peak memory usage: 60376KiB
[14:42:25] * strcat has a feeling it isn't doing anything
[14:43:10] <strcat> rusti: std::run::process_output("dash", [~"-c", ~"for i in seq 1 10; do echo bar >> baz; done; cat baz"]).status
[14:43:11] -rusti- 0
[14:43:11] -rusti- peak memory usage: 60396KiB
[14:43:17] * strcat shrugs
[14:43:28] <strcat> rusti: std::run::process_output("dash", [~"-c", ~"yes > baz"]).status
[14:43:31] -rusti- 1
[14:43:31] -rusti- peak memory usage: 131072KiB
[14:43:49] <strcat> there, that worked
[14:43:53] <strcat> it hit the memory limit and got an I/O error.
[14:44:12] *** Quits: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp) (Client exited)
[14:44:15] <strcat> rusti: print(str::from_bytes(std::run::process_output("dash", [~"-c", ~"yes > baz"]).error))
[14:44:16] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/fPUC
[14:44:25] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("dash", [~"-c", ~"yes > baz"]).error))
[14:44:28] -rusti- ()
[14:44:28] -rusti- peak memory usage: 131072KiB
[14:44:32] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("dash", [~"-c", ~"yes > baz"]).output))
[14:44:34] -rusti- ()
[14:44:34] -rusti- peak memory usage: 131072KiB
[14:44:37] <strcat> huh.
[14:45:09] <strcat> oh well ;p
[14:45:28] <cmr> strcat: have you done any work with jemalloc?
[14:45:36] <strcat> cmr: yeah I have a branch with it
[14:45:45] <strcat> don't know if it actually ends up using it but...
[14:45:51] <strcat> I statically link it into librustrt
[14:45:55] <dbaupp> cmr: did you see https://github.com/mozilla/rust/pull/6881 ?
[14:46:11] <cmr> dbaupp: I did! :)
[14:46:12] *** Joins: haard (fredrik@moz-C0C16A68.cust.telenor.se)
[14:46:24] <dbaupp> cmr: 12 hrs of aatch's time!
[14:46:47] <dbaupp> 1 hr per modification!
[14:47:05] <cmr> it's scary that mergefunc generates invalid code
[14:47:18] <strcat> ahhhh merge conflict
[14:47:51] *** Quits: jack (jack@moz-F1B36F9F.hsd1.nm.comcast.net) (Quit: Leaving.)
[14:48:35] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[14:48:35] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/XC6PmA
[14:48:35] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[14:48:37] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[14:48:37] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/fYko9Q
[14:48:37] <ghrust> 13rust/06auto 14cf64324 15Corey Richardson: extra::term overhaul
[14:48:37] <ghrust> 13rust/06auto 147281166 15Corey Richardson: Use find_equiv in term
[14:48:37] <ghrust> 13rust/06auto 141f27c63 15Corey Richardson: rustpkg borrowed pointers
[14:48:37] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[14:49:01] <benh> "The fact that Haskell's Int is of unspecified size is disappointing. Yes, you can use more explicit types, but one unspec is too many. I was thinking "No post-Java language should have undefined sizes", then I realized Haskell is actually older than Java..." - john carmack on twitter
[14:49:10] <benh> guess he wouldn't like int/uint(/float?) either
[14:49:59] <dbaupp> benh: well, [ui]{32,64} are "first class"
[14:50:17] *** Quits: Palmik (palmik@moz-FFAB1EAB.vpn.muni.cz) (Ping timeout)
[14:50:17] <cmr> int/uint are of specified size though
[14:50:36] <strcat> benh: int/uint are specified as being able to represent the whole address space in bytes
[14:50:41] *** Joins: Palmik (palmik@moz-FFAB1EAB.vpn.muni.cz)
[14:50:49] <benh> Ah
[14:50:57] <benh> I guess that's better than Haskell's "maybe there's a tagbit I dunno"
[14:51:02] <strcat> they're the same as size_t on all platforms rust is ported to
[14:51:14] <strcat> which is 32-bit or 64-bit
[14:51:59] <strcat> (and size_t is an alias of uintptr_t, which is the same size as intptr_t on all platforms rust is on)
[14:52:20] <strcat> so anyway. there might be a platform out there in theory where intptr_t has to be bigger than uintptr_t or where size_t is tiny but...
[14:52:32] <strcat> rust doesn't run on it anyway ;p
[14:54:48] <cmr> strcat: where's your jemalloc branch?
[14:55:01] <indutny> whoa guys
[14:55:02] <indutny> Assertion failed: (isa<X>(Val) && "cast<Ty>() argument of incompatible type!"), function cast, file /Users/indutny/Code/mozilla/rust/src/llvm/include/llvm/Support/Casting.h, line 231.
[14:55:22] *** Joins: unbracketed (textual@moz-7F0EE151.lsanca.fios.verizon.net)
[14:55:38] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:55:47] * strcat1 hates his router
[14:55:48] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[14:55:51] *** strcat1 is now known as strcat
[14:56:04] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[14:56:17] <dbaupp> indutny: there's 3 open bugs featuring that error message... is the code similar to any of those? :)
[14:56:27] <indutny> let me search :)
[14:56:37] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:56:37] <dbaupp> https://github.com/mozilla/rust/issues/6504, https://github.com/mozilla/rust/issues/5791, and
[14:56:46] <dbaupp> https://github.com/mozilla/rust/issues/1866
[14:57:39] *** Quits: z0w0 (zack@moz-B5D18119.lns1.woo.bigpond.net.au) (Quit: Leaving.)
[14:57:53] <indutny> dbauppit's different
[14:58:07] <indutny> but hard to separate
[14:58:14] <indutny> appears when commenting a couple of lines in a big lib
[14:58:50] <caitp> why is it that a 'return' statement in a closure tries to return from the enclosing function rather than from the closure itself
[14:58:54] <dbaupp> indutny: oh :(
[14:59:33] <dbaupp> caitp: it makes for loops nicer, since break "returns" from the closure there
[14:59:41] <benh> rusti: (|| { return; })()
[14:59:44] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/VJZC
[14:59:52] <dbaupp> (is return even legal in non-for closures?)
[15:00:00] <benh> not that i know of
[15:00:51] *** Quits: jorendorff (jorendorff@moz-30F4FB9E.hfc.comcastbusiness.net) (Quit: jorendorff)
[15:01:49] <caitp> I don't know, it's sort of terrible
[15:02:12] <dbaupp> caitp: what do you mean?
[15:02:21] <caitp> it's not a very agreeable pattern
[15:02:23] <benh> rusti: fn this(f:&fn()){f()} do this { return; }
[15:02:24] *** Joins: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP)
[15:02:24] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/CAAL
[15:02:34] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[15:02:39] *** Quits: haard (fredrik@moz-C0C16A68.cust.telenor.se) (Ping timeout)
[15:03:15] <dbaupp> caitp: well, the only time you can use 'return' in a closure is via the 'for' sugar
[15:03:58] <dbaupp> and it would make short-circuiting loops even less agreeable if return only broke the loop, and didn't return from the enclosing function
[15:04:02] <caitp> that in and of itself is not very agreeable -- what would make sense is for a closure to be what it is, a function with access to things that its enclosing environment has access to. but it should still behave as a function
[15:06:36] <caitp> a closure is not a "loop", these are not the same things even if they are used in loops frequently...
[15:06:38] *** Joins: FrozenCow_ (FrozenCow@moz-B2DF4929.chello.nl)
[15:06:49] *** Quits: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl) (Ping timeout)
[15:06:55] <strcat> cmr: I'll push this jemalloc branch if you want to try it
[15:06:57] <strcat> sec
[15:06:57] *** Joins: spider-mario (spidermari@moz-CDAD7F84.rev.sfr.net)
[15:07:06] <strcat> just dealing with makefile merge fallout
[15:07:07] <dbaupp> I can see how it's annoying. but I guess I personally haven't actually had to fight it much,
[15:07:23] <dbaupp> except, when I do want a closure to return from the enclosing function, and aren't allowed to
[15:07:39] <dbaupp> *that* is annoying.
[15:07:51] <caitp> at least there are obvious ways around that.
[15:07:56] *** Joins: jorendorff (jorendorff@moz-30F4FB9E.hfc.comcastbusiness.net)
[15:08:15] <caitp> like telling to enclosing function to return once control returns to it
[15:08:51] <dbaupp> caitp: there are "obvious" ways around return in a closure: restructure the closure to effectively have one point of return, or promote it to a full fn and leave the closure as a wrapper
[15:08:59] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[15:09:06] <cmr> rusti: [1, 3, 4].each(|i| {return 32})
[15:09:07] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/JAYH
[15:09:21] <cmr> rusti: [1, 3, 4].each(|i| {return true})
[15:09:23] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/OBhL
[15:09:45] *** Quits: cjh (chellmuth@moz-45C21C42.compute-1.amazonaws.com) (Ping timeout)
[15:09:50] <cmr> rusti: for [1, 3, 4].each |i| { return true }
[15:09:51] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/XUFH
[15:10:00] <cmr> that is a weird asymmetry
[15:10:05] *** Quits: passcod (passcod@moz-5BCF5019.passcod.name) (Quit: ZNC - http://znc.in)
[15:10:14] <cmr> I wouldn't mind another keyword for returning specifically from the current closure
[15:10:15] *** Joins: cjh (chellmuth@moz-45C21C42.compute-1.amazonaws.com)
[15:10:27] <dbaupp> cmr: `for` is magic
[15:10:40] <dbaupp> cmr: `do` is plain syntatic suger
[15:10:43] <dbaupp> *sugar
[15:10:43] <benh> cmr: it could be "return"...
[15:11:03] <strcat> cmr: not really asymmetry
[15:11:16] <strcat> it doesn't magically return from the enclosing function in 'for'
[15:11:29] <strcat> it asks the caller to break by returning false, and *then* returns
[15:11:51] <dbaupp> (and actually does it wrong.)
[15:12:00] <strcat> dbaupp: really?
[15:12:19] <dbaupp> rusti: fn foo() -> uint { for 1.times { return break } 0 } foo()
[15:12:20] -rusti- 24792616
[15:12:27] <dbaupp> rusti: fn foo() -> uint { for 1.times { return break } 0 } foo()
[15:12:29] -rusti- 10489384
[15:12:35] <dbaupp> yay pointers
[15:12:38] <cmr> heh
[15:12:51] <dbaupp> rusti: fn foo() -> ~[()] { for 1.times { return break } ~[] } foo()
[15:12:52] <strcat> well that's a pretty weird bug
[15:12:52] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[15:13:05] <caitp> rusti: fn foo() -> ~str { for [1,2,3,4,5].each |derp| { return true; } ~"herp" }
[15:13:06] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/DFjZ
[15:13:19] <dbaupp> https://github.com/mozilla/rust/issues/6675
[15:13:57] <caitp> foo.rs:10:65: 10:69 error: mismatched types: expected `~str` but found `bool` (expected ~str but found bool)
[15:13:57] <caitp> foo.rs:10          fn foo() -> ~str { for [1,2,3,4,5].each |derp| { return true; } ~"herp" }
[15:13:58] <caitp>                                                                            ^~~~
[15:14:06] *** Quits: victorporof (victorporo@10E912A5.8D069E5A.4A6B528C.IP) (Ping timeout)
[15:14:13] <caitp> this is not effectively breaking or continuing the loop
[15:14:21] <caitp> which is what you'd expect, from the implementation of 'each'
[15:14:23] <dbaupp> caitp: nope, it's a type error
[15:14:36] <dbaupp> 'for' is magic!
[15:14:36] <caitp> right, but it shouldn't be
[15:14:41] <caitp> magically terrible
[15:14:43] <cmr> caitp: because 'for ...' is a wrapper for the for loop protocol
[15:15:05] <dbaupp> it makes the closure have type `fn (...) -> ()`
[15:15:27] <dbaupp> and then inserts 'return[from closure] true' at the end
[15:15:28] <strcat> get rid of for, make a new one with an understanding of external iterators ;p
[15:15:42] <dbaupp> and replaces break with 'return[from closure] false'
[15:16:01] <strcat> if you just have to call .next() for each iteration you can't have a weird bug where it doesn't return when you ask for it
[15:16:11] <dbaupp> (and return gets rewritten to 'break' and some trickery to detect this)
[15:16:35] * strcat would like a python-like for loop
[15:16:36] *** Quits: spider-mario (spidermari@moz-CDAD7F84.rev.sfr.net) (Input/output error)
[15:16:37] <strcat> probably too late.
[15:16:49] <caitp> rusti: fn foo() -> ~str { for [1,2,3,4,5].each |derp| { loop; } ~"herp" }
[15:16:49] -rusti- foo.rs:10:32: 10:33 error: unknown start of token: 29
[15:16:49] -rusti- foo.rs:10          fn foo() -> ~str { for [1,2,3,4,5].each |derp| { loop; } ~"herp" }
[15:16:50] -rusti-                                           ^
[15:16:50] -rusti- application terminated with error code 101
[15:17:17] <dbaupp> caitp: I have a feeling you're new to Rust? (not at all a problem, I just had similar issues understanding things like this when I started)
[15:17:28] <dbaupp> rusti: fn foo() -> ~str { for [1,2,3,4,5].each |derp| { loop; } ~"herp" }
[15:17:28] -rusti- foo.rs:10:32: 10:33 error: unknown start of token: 29
[15:17:28] -rusti- foo.rs:10          fn foo() -> ~str { for [1,2,3,4,5].each |derp| { loop; } ~"herp" }
[15:17:28] -rusti-                                           ^
[15:17:28] -rusti- application terminated with error code 101
[15:17:46] <caitp> I've been working with rust off and on since about november
[15:18:00] <strcat> there's an escape code in there
[15:18:05] <strcat> that's why it's upset
[15:18:13] <strcat> \x1d
[15:18:37] <caitp> however this isn't about difficulties, it's about really poor design decisions
[15:18:47] <cmr> rusti: fn foo() -> ~str { for [1, 2, 3, 4, 5].each |derp| { loop; } ~"herp" }
[15:18:49] -rusti- ()
[15:18:50] <cmr> rusti: fn foo() -> ~str { for [1, 2, 3, 4, 5].each |derp| { loop; } ~"herp" } foo()
[15:18:52] -rusti- ~"herp"
[15:19:00] <strcat> caitp: we didn't have external iterators until recently
[15:19:09] <strcat> so the for loop was made for this weird iteration protocol
[15:19:33] <strcat> where your loop is the callee, not the caller
[15:19:39] <strcat> so it can't actually reliably return in the body
[15:19:41] <cmr> caitp: propose a new design :)
[15:19:55] <strcat> for could just keep calling .next() like in python
[15:20:13] *** Quits: jrfeenst (jrfeenst@moz-3265BD65.cpe.norwoodlight.com) (Quit: jrfeenst)
[15:20:17] <caitp> if I proposed a new design, I would piss off all the haskell fans
[15:20:19] <strcat> and if the object doesn't implement Iterator, call .iter() to get one
[15:20:24] <strcat> caitp: what do you mean?
[15:20:27] <caitp> so it probably wouldn't go over well
[15:20:29] <strcat> haskell doesn't have an iteration protocol.
[15:20:37] <strcat> it has lazy data structures, it doesn't need one
[15:20:49] <caitp> for the language as a whole strcat
[15:20:57] <strcat> caitp: what do you mean haskell fans?
[15:21:01] <strcat> why would replacing 'for' piss them off?
[15:21:17] <strcat> haskell doesn't have an equivalent to for/do and doesn't need them
[15:21:30] <caitp> i'm not sure if you've just ignored the "for the language as a whole" thing or what
[15:21:44] <strcat> caitp: a new design 'for the language as a whole'?
[15:22:03] <strcat> or are you just talking about iteration
[15:22:13] *** Quits: igl (igl@moz-8E23CEF5.adsl.alicedsl.de) (Ping timeout)
[15:22:33] <caitp> I've just explicitly stated twice now, that if I were to propose a new design, it would not be limited to just the looping mechanism :p
[15:22:44] <strcat> well I don't know what you mean
[15:23:40] <caitp> it means that there are a lot of design decisions I don't really agree with, some that are just quirky and acceptable, and a small minority which are actually perceived as positive
[15:23:43] *** Joins: igl (igl@moz-D6D18CFE.adsl.alicedsl.de)
[15:23:50] <strcat> caitp: such as?
[15:24:47] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[15:25:44] *** Joins: snearch (snearch@moz-DBC0E338.pool.mediaways.net)
[15:26:02] <doener> cp: cannot create regular file ‚Äòx86_64-unknown-linux-gnu/stage1/bin/rustc‚Äô: Text file busy
[15:26:57] <doener> I think I've never seen that error before... (probably caused by rustc still running in another terminal)
[15:27:10] <caitp> certain oddities of the lexer are pretty quirky, things that are terrible include but are not limited to supposedly supporting inference in a lot of places but demanding explicitness in places where it isn't really needed in others, immutable-by-default, an army of pointer "types" which could be replaced by one or two pointer "types" and some helpers in the core library, and things which are positive is the memory model which absolutely does
[15:27:11] <caitp> not require four explicit pointer "types" to function, especially if the language is as married to the core library as it currently is.
[15:27:20] *** Joins: xazax (xazax@moz-D7592A2A.csoma.elte.hu)
[15:27:49] <caitp> like, there is some good, but there's a lot of poor execution
[15:27:51] <strcat> the parser/lexer are known to be implemented poorly
[15:27:59] <strcat> they will get better, it's not a design decision
[15:28:16] <dbaupp> caitp: it sounds a bit like Rust won't be your favourite language ;)
[15:28:37] *** Joins: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp)
[15:28:53] <caitp> it is unlikely to be, but it's a business relationship not personal
[15:29:01] <dbaupp> but, as far as understand, 3 pointer types are required for Rust's memory model/safety to work (*, & and ~)
[15:29:18] <doener> how would you reduce the number of pointer types without giving up on safety?
[15:29:26] <strcat> dbaupp: well, & and @ have to be language features
[15:29:30] <dbaupp> removing that removes the ability for the compiler to reason about them
[15:29:36] <caitp> @ certainly doesn't have to be a language feature
[15:29:39] <strcat> caitp: it does
[15:29:43] <strcat> caitp: @ is gc
[15:29:47] <caitp> the difference between & and * is kind of imaginary
[15:29:52] <strcat> there's extra::rc for reference counting
[15:29:52] <caitp> a gc does not have to be a language feature
[15:29:58] <strcat> caitp: it does to be a precise gc
[15:29:58] <dbaupp> caitp: yes, but it's got information
[15:30:06] <dbaupp> i.e. & has a lot of information that * doesn't
[15:30:17] <caitp> the core library could do literally all of that without adding extra complexity to the language
[15:30:27] <caitp> and because of the marriage, could even be optimized
[15:30:32] <strcat> caitp: it absolutely needs to be a language feature for precisely finding pointers on the stack and in registers - how else?
[15:30:41] <dbaupp> caitp: marriage of * and & ?
[15:30:50] <caitp> no, the marriage fo the language to the core library
[15:30:57] <strcat> dbaupp: well you can't merge those but * doesn't need to be a language feature
[15:31:10] <strcat> & has to be separate because of the guarantees it provides
[15:31:31] <caitp> perhaps if core were optional, but it currently isn't
[15:31:33] <dbaupp> caitp: and you're right that removing immutable-by-default would annoy the haskell fans :P
[15:31:34] <strcat> ~ could be UniquePtr with a destructor *if you ignore @*
[15:31:38] <dbaupp> caitp: it actually is
[15:31:39] <strcat> caitp: #[no_core]
[15:31:49] <strcat> although it's not called core anymore
[15:32:10] <strcat> the problem with ~ is that if you want to allow putting @ into it
[15:32:23] <dbaupp> caitp: https://github.com/pcwalton/zero.rs and https://github.com/charliesome/rustboot work without core
[15:32:27] <strcat> it has to be recognized by the compiler as allocating memory that could contain @
[15:32:32] <strcat> because there are roots in it
[15:32:50] *** Quits: MaikKlein (maik@moz-7BA44035.dip0.t-ipconnect.de) (Ping timeout)
[15:33:00] <caitp> okay so there's an undocumented attribute that prevents the automatic importing and using? :p
[15:33:18] <dbaupp> caitp: yup, there's lots of undocumented stuff! :P
[15:34:17] <caitp> but even so, garbage collection doesn't need to be built into the language in a way that it requires some weird explicit pointer syntax
[15:34:28] <caitp> FFI in other GC'd languages don't depend on this
[15:34:32] <strcat> caitp: it doesn't have to require syntax but it requires compiler support
[15:34:42] <strcat> caitp: ok but rust has managed and unmanaged memory
[15:34:44] <strcat> it's not about FFI
[15:34:57] <strcat> ~ not containing @ isn't on a heap managed/touched by a gc
[15:35:00] <caitp> FFI seems to be the main reason for using unmanaged memory, or memory managed by someone else
[15:35:05] <strcat> caitp: it's not
[15:35:15] <strcat> the main reason is deterministic, low-latency, fast memory management
[15:35:29] <strcat> you aren't going to do better than jemalloc/tcmalloc with a gc
[15:35:41] <strcat> they are given perfect knowledge of when memory is no longer used
[15:36:07] <strcat> and shared ownership means no static guarantees about mutability
[15:36:22] *** Quits: jorendorff (jorendorff@moz-30F4FB9E.hfc.comcastbusiness.net) (Quit: jorendorff)
[15:36:37] <strcat> you can have dynamic failures like you do in other languages (container modified while iterating over it) that don't exist in rust without @mut
[15:37:08] <strcat> rust doesn't just have & and ~ because of FFI...
[15:37:12] <strcat> it's pretty core to the language
[15:37:38] <strcat> if you just want all memory managed by a garbage collector, rust isn't a good language to use
[15:37:41] *** Joins: jack (jack@moz-1EDECAC0.hsd1.nm.comcast.net)
[15:37:42] <caitp> rust is making pretty heavy use of FFI, and in practice this is where I'm seeing most of the unmanaged memory being used, apart from the compiler itself
[15:38:06] <strcat> caitp: plenty of rust projects will avoid unmanaged memory for latency/performance reasons
[15:38:12] <strcat> avoid managed memory*
[15:38:20] <strcat> and for static guarantees about mutability
[15:38:25] <strcat> no dynamic freezing failures
[15:38:59] <strcat> it really has nothing to do with FFI
[15:39:09] <SiegeLord> I'm allergic to GC's, so I'll be doing my best to only use unmanaged memory
[15:39:09] <strcat> there would be no reason to have borrowed pointers or unique pointers if it did
[15:39:10] <caitp> I think you might have missed the point of what I said
[15:39:55] <dbaupp> caitp: explain it again?
[15:40:12] <caitp> I am not saying that unmanaged memory exists for FFI, I'm saying that in practice, most of the places in rust code that I am seeing it used, are for dealing with memory managed by a different party (eg FFI)
[15:40:32] <strcat> caitp: in which codebase? the compiler is a really crufty codebase
[15:40:38] <strcat> it overuses @ a *lot* and it's a huge perf problem
[15:41:07] <strcat> switching from a hash table using @ chains to one not using them was an easy 35% perf improvement
[15:41:15] <caitp> I am also not saying that I am in dire need of managed memory, what I am saying is that removing the ridiculous syntactic requirements for opting in or out of the GC would be beneficial
[15:41:46] <strcat> caitp: it could be UniquePtr<T> and ManagedPtr<T> instead of ~ and @
[15:41:50] <strcat> they're just supposed to be sugar
[15:41:55] <kimundi> caitp: Rusti philosophy is about making things explicit and non-magic
[15:42:02] <caitp> but unfortunately it's not sugar, they're essentially meaningless tokens
[15:42:09] <EXetoC> SiegeLord: writing real-time code?
[15:42:15] <caitp> they make code harder to read, not easier :p
[15:42:25] <kimundi> caitp: THey are in no way meaningless...
[15:42:25] <dbaupp> caitp: meaningless? they have a lot of meaning
[15:42:35] <strcat> caitp: they make code easier to read when you've used rust for a few hours
[15:42:36] <caitp> a tilde does not have very much meaning, actually
[15:42:38] <SiegeLord> EXetoC, Well, most of my code these days is games and scientific simulations... so I suppose yes at least in the first case
[15:42:42] <strcat> caitp: it has meaning in rust
[15:42:45] <kimundi> caitp: That depends on who reads the code :P
[15:42:53] <strcat> just like the less-than greater-than symbols in generics are given meaning by rust
[15:42:56] <dbaupp> caitp: well, ! doesn't "mean" 'not'
[15:43:10] <strcat> foo<bar, baz> has meaning *in rust*
[15:43:14] <caitp> no, but there's a good history of that operator meaning not at least
[15:43:17] <strcat> does it mean anything in natural language? not really.
[15:43:26] <strcat> caitp: a good history? so C++?
[15:43:44] <caitp> well, C, and perhaps even B
[15:43:57] <caitp> but nevertheless, decades and decades, not to mention mathematics
[15:44:06] <dbaupp> caitp: and there's a good history of arbitrary sigils meaning pointer-related-things
[15:44:17] <strcat> ~ means bitwise negation in C
[15:44:19] <dbaupp> caitp: ! meaning not in mathematics??
[15:44:33] <caitp> yes, depending on what you're writing on
[15:44:41] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[15:44:51] *** Quits: jviereck (Adium@moz-7B4B0A42.dclient.hispeed.ch) (Quit: Leaving.)
[15:45:06] <kimundi> caitp: Name me a way th sqeze more than the default set op sigils out of ascii and I give you an mapping thet doesn
[15:45:12] <caitp> you don't always have access to ‚â†
[15:45:17] <kimundi> .t conflict with history :P
[15:45:26] <dbaupp> caitp: that's just stealing from programming
[15:45:40] <dbaupp> caitp: =/= works too
[15:45:41] <strcat> I would really rather write ~[~Foo] than std::UniqueVector<std::UniquePtr<Foo>>
[15:45:55] <strcat> definitely seems like sugar for commonly used types to me
[15:47:14] <caitp> I think that it can be said that [Foo] is sugary, but ~[~Foo] is a bit more debateable
[15:47:19] <caitp> certainly isn't beautiful
[15:47:20] <EXetoC> std::uv<std::up<Foo>> not so bad now :>
[15:47:48] * doener read the inner one as "stand up"
[15:47:59] <strcat> EXetoC: uv and up already have other meanings
[15:48:08] <strcat> UniqPtr and UniqVec, sure
[15:48:23] <strcat> UPtr, UVec
[15:48:38] <strcat> and then you have
[15:48:40] <strcat> MPtr, MMPtr
[15:49:06] <strcat> RPtr<'lifetime>, MRPtr<'lifetime>
[15:49:12] <strcat> RawPtr
[15:49:23] <strcat> and you need to teach the compiler to support overloading the * operator in a special way
[15:49:35] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[15:49:59] <strcat> *x, *x = 5, &*x, &mut *x all need equivalents
[15:50:12] <EXetoC> j/k
[15:50:18] <strcat> so it can't be a normal function returning a type
[15:50:22] <strcat> EXetoC: yeah, I know you were kidding
[15:50:37] <strcat> but I really don't see how removing the sugar for these things would make them better
[15:50:47] <strcat> &mut x[1]
[15:50:48] <strcat> ->
[15:50:56] <caitp> not requiring you to be explicit makes them better
[15:51:06] <caitp> opt-in to memory management once, infer the rest fo the time
[15:51:14] <caitp> opt out once, infer the rest of the time
[15:51:21] <strcat> caitp: they can't be implicit, the compiler isn't a mind-reader
[15:51:23] <dbaupp> caitp: what if you want a combination?
[15:51:24] <strcat> how will it make a correct program?
[15:51:38] <strcat> ~ has a destructor, it moves
[15:51:44] <strcat> @ doesn't move ownership
[15:52:15] <strcat> it's easy to say it should infer, but *how*
[15:53:41] *** Joins: dylukes (dylukes@moz-7B9A0DA0.neo.res.rr.com)
[15:54:05] <caitp> okay so, you opt-in (or out) once, you graph during compilation things that get a hold of it, if it needs to inform GC that it's hanging on, it is known at this point -- if it needs to figure this out dynamically at run time it can figure that out at runtime for a price
[15:54:26] <caitp> that's a pretty naive way to do it, but it's hard to say it's not doable
[15:55:43] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:55:45] <cmr> It'd be nice if expected failures didn't barf task failure messages all over the test log
[15:55:45] <Thiez> aatch|ohgodtheoptimization: those inline(always) were there when I got it! :p
[15:55:57] <strcat1> caitp: if it's not in fn type signatures it means you can't have libraries
[15:56:06] <dbaupp> Thiez: read the hours of backlog? :P
[15:56:11] <caitp> it could optionally be in fn signatures strcat1
[15:56:14] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[15:56:19] <Thiez> dbaupp: still working on it
[15:56:22] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[15:56:22] <caitp> the point is that it doesn't need to require explicitness
[15:56:29] <caitp> explicit is bad
[15:56:33] <cmr> http://buildbot.rust-lang.org/builders/auto-linux/builds/1531/steps/test/logs/stdio at the end, is it still wanting core, not std?
[15:56:35] <strcat1> caitp: it has semantic meaning
[15:56:41] <Thiez> it's almost 6pm here and I just finished breakfast... slow day :D
[15:56:46] <strcat1> caitp: a function that takes something by-mut-ref and modifies it
[15:56:46] <dbaupp> caitp: I think graydon takes the approach "explicit is good"
[15:57:01] <dbaupp> Thiez: 6pm is a totally reasonable time for breakfast
[15:57:04] <strcat1> caitp: here's one, File
[15:57:08] <strcat1> File::new()
[15:57:12] <strcat1> the file has a destructor closing it.
[15:57:22] <strcat1> or a resource like a db connection
[15:57:23] <Thiez> aatch|ohgodtheoptimization: I don't know what you did with the optimizing, but it WORKS
[15:57:37] <cmr> Thiez: is it back to what it was pre-regression?
[15:57:41] <Thiez> tracing is down to 3.7 seconds, which is better than ever.
[15:57:48] <cmr> oh good! :)
[15:57:59] <Thiez> before the regression it was around 4.7 seconds
[15:58:01] <dbaupp> Thiez: you're using the latest incoming?
[15:58:02] <strcat1> caitp: how do you provide the guarantee that the file is closed at a specific point?
[15:58:23] <strcat1> there are functions that need ownership of the file, others that only need a reference
[15:58:25] *** strcat1 is now known as strcat
[15:58:27] <Thiez> dbaupp: yeah I just recompiled
[15:58:51] <dbaupp> Thiez: cool, just recompiling myself a speedy rustc! :)
[15:59:03] <strcat> caitp: there are many languages with escape analysis, but none of them can compile a complex program without gc
[15:59:05] <Thiez> it's great :)
[15:59:31] <Thiez> I'm thinking the second improvement might be because I replaced the libc fmin/fmax :p
[15:59:34] <dbaupp> caitp: I think the "explicit is good" approach allows the programmer to reason about their program more precisely, without having to reason about the whole compiler stack too
[15:59:37] <Thiez> the one second*
[15:59:43] <strcat> dbaupp: it's not just about it being explicit
[15:59:54] <dbaupp> strcat: I know
[15:59:54] <strcat> there is *no language* that exists that somehow magically infers this all
[16:00:00] <caitp> C++ approach: a destructor is always called at the end of an object's lifetime (the runtime does this when the process dies, for example, although this can't necessarily be guaranteed), lifetime doesn't end at the end of scope if it's just a "reference" and isn't owned, lifetime can be managed via refcounting or other GC mechanisms
[16:00:11] <caitp> there are ways of doing this stuff that does not require terribleness
[16:00:16] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[16:00:20] <strcat> caitp: rust uses the same approach as C++
[16:00:23] <strcat> it's no more explicit in rust
[16:00:28] <strcat> it's just memory safe in rust
[16:00:38] <dbaupp> (and shorter)
[16:00:42] <strcat> rust has destructors, they're called automatically
[16:00:57] <caitp> if the Drop trait is implemented you mean
[16:01:09] <dbaupp> yes
[16:01:17] <strcat> caitp: not just if the Drop trait is implemented, if they contain anything with a destructor
[16:01:19] <strcat> same as C++
[16:02:02] <strcat> C++ doesn't have precise garbage collection available
[16:02:06] *** Joins: spider-mario (spidermari@moz-CDAD7F84.rev.sfr.net)
[16:02:15] <strcat> there are only conservative collectors that stop the whole program and scan the entire address space it has
[16:02:16] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[16:02:23] <caitp> not built into the language, no
[16:02:40] <strcat> caitp: so is there a precise gc for C++?
[16:03:09] <strcat> I don't think it exists
[16:03:09] <caitp> well, how precise it is would depend on use, since it's not built into the language
[16:04:10] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[16:05:01] <caitp> you could certainly provide a cycle-free environment where something dies when it isn't needed anymore, no sooner and no later
[16:05:21] <strcat> caitp: with reference counting, not with a tracing gc
[16:05:23] *** Quits: dylukes (dylukes@moz-7B9A0DA0.neo.res.rr.com) (Quit: Computer has gone to sleep.)
[16:05:57] *** Joins: jorendorff (jorendorff@moz-30F4FB9E.hfc.comcastbusiness.net)
[16:06:16] <strcat> caitp: rust has extra::rc for cycle-free refcounting
[16:06:19] <strcat> not built-in to the language
[16:06:35] <caitp> yes, which is great and all
[16:06:46] *** Joins: jrfeenst (jrfeenst@moz-3265BD65.cpe.norwoodlight.com)
[16:07:06] <strcat> and you can write an equivalent to ~ that's forbidden from containing managed pointers
[16:07:06] <dbaupp> does C++ allow you to guarantee that a ref-counted structure is cycle-free?
[16:07:09] <strcat> dbaupp: no
[16:07:33] <strcat> dbaupp: and anyway it doesn't have a way to protect you from dangling references, use-after-free, etc.
[16:07:35] <caitp> no, it doesn't -- but it will break cycles automatically
[16:07:42] <strcat> caitp: no, it won't magically break them
[16:07:52] <strcat> if you make a cycle with two std::shared_ptrs it will never be freed
[16:08:01] <dbaupp> caitp: "automatically" when the program exits
[16:08:17] <strcat> dbaupp: C++ has a weak_ptr type that doesn't stop the object itself from being freed
[16:08:19] <strcat> basically
[16:08:22] <caitp> I don't have much experience with the STL's implementations of it
[16:08:25] <strcat> shared_ptr + weak_ptr point to 2 allocations
[16:08:30] <strcat> one is the object
[16:08:33] <strcat> the other is the counter
[16:08:43] <strcat> shared_ptr holds onto the object until it dies
[16:08:44] <caitp> however, you can get refcounted cycles to break
[16:08:44] <dbaupp> Rust is essentially designed as C++ with waaaay more static guarantees (right, strcat?), and these require compiler support
[16:08:50] <strcat> if you make cycles with them, it is *never* freed
[16:08:54] <strcat> caitp: not automatically
[16:08:59] <strcat> without tracing
[16:09:07] <caitp> pretty close to automatically yeah
[16:09:23] <strcat> caitp: if you put every single pointer in a vector instead of using a counter
[16:09:31] *** Joins: Blei (philipp@moz-96D25F7A.cust.bluewin.ch)
[16:09:42] <strcat> and every time you remove one, you trace through all of them
[16:10:15] <strcat> so basically, slower than ruby/python for the sake of not teaching the compiler to do actual tracing gc
[16:10:36] <strcat> std::shared_ptr is really slow already
[16:10:41] <caitp> that's not actually required though
[16:10:46] <strcat> caitp: ok so how do you do it
[16:10:49] <caitp> well, its speed is implementation dependent
[16:10:51] <strcat> you have std::shared_ptr graphs
[16:11:02] <strcat> that have some cycles
[16:11:13] <strcat> one shared_ptr somewhere goes out of scope
[16:11:18] <strcat> now the only refs left are cycles
[16:11:19] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:11:20] <strcat> how do you know?
[16:12:02] <strcat> I mean, the C++ committee isn't a bunch of idiots
[16:12:04] <caitp> A holds B and B holds A -- A leaves scope, ref count decreases to 1, it's hold on B dies and so B's refcount decreases to 1 -- A is still alive because of B, but when B leaves scope, A will die
[16:12:26] <strcat> caitp: it doesn't work that way
[16:12:30] <dbaupp> caitp: A holds B, B holds A, C holds A
[16:12:39] <strcat> caitp: the pointers can't see each other
[16:12:47] <strcat> unless you have a data structure somewhere
[16:12:48] <strcat> with all the pointers
[16:12:56] <caitp> the pointers don't really need to see each other
[16:13:02] <benh> I don't understand that example, how does A leave scope if B holds A?
[16:13:20] <strcat> benh: it doesn't, it's not how it works
[16:13:31] <caitp> so, when I say "A" leaves scope, I'm talking about a container which holds object "A" containing a reference count
[16:13:55] <strcat> caitp: ok here's the thing, the C++ committee added std::{shared,weak}_ptr to the stdlib after like 10 years of research/experiments in boost
[16:13:58] <caitp> this does in fact work, you can try it at home
[16:14:01] <dbaupp> caitp: with your model, what happens when C gets dropped in my example?
[16:14:11] <strcat> if there was some magical way to break cycles, do you *really* they think wouldn't have done it?
[16:14:13] <strcat> caitp: it doesn't work
[16:14:17] <strcat> A doesn't leave scope if B holds it
[16:14:18] <caitp> it's not "magic"
[16:14:20] <benh> i think we're not going to get far without code examples
[16:14:20] <strcat> caitp: it is
[16:14:23] <strcat> caitp: B holds A
[16:14:27] <cmr> benh++
[16:14:28] <benh> y'all're being too vague
[16:14:35] <strcat> ok I'll make a code example in C++ then
[16:14:45] <caitp> the container A can leave scope even when B holds a reference to it
[16:14:56] <strcat> caitp: no, it doesn't
[16:15:00] <strcat> that's not how shared_ptrs are
[16:15:06] <strcat> if you hold a shared_ptr, you hold a reference
[16:15:08] <caitp> nobody is talking about shared_ptr except you
[16:15:12] <caitp> and it's not clear why you are o_O
[16:15:17] <strcat> caitp: I am talking about reference counting
[16:15:27] <caitp> a reference count implementation is not required to be shared_ptr
[16:15:37] <strcat> caitp: ok so you have an object A, and object B
[16:15:38] *** Quits: FrozenCow_ (FrozenCow@moz-B2DF4929.chello.nl) (Connection reset by peer)
[16:15:49] <strcat> A1 is a ptr to A, A2 is a ptr to B held in object B, B1 is a ptr to B
[16:16:02] <strcat> and B2 is a ptr to B held in A
[16:16:13] *** Joins: FrozenCow_ (FrozenCow@moz-B2DF4929.chello.nl)
[16:16:13] <strcat> A2 is a ptr to A*
[16:16:16] <benh> mh
[16:16:18] <strcat> ok lets try that again
[16:16:21] <caitp> when you add too many tokens it's hard to follow without a whiteboard ;p
[16:16:29] <strcat> object B [A2]
[16:16:33] *** Joins: thou (thou@moz-1C1CA9F7.fasttrackcomm.net)
[16:16:34] <strcat> object A [B2]
[16:16:41] <strcat> on the stack somewhere
[16:16:43] <strcat> A1 and B2
[16:16:49] <strcat> A1 and B1 *
[16:16:58] <Thiez> shouldn't rust warn about unknown annotations?
[16:16:59] *** Joins: deLta30 (quassel@111B8494.9209D8C2.622A08E2.IP)
[16:17:02] <strcat> so A1 goes out of scope
[16:17:09] <strcat> object A shouldn't be freed, object B references it still
[16:17:13] <Thiez> rusti: #[unknownannotation] fn foo() {} 0
[16:17:14] -rusti- 0
[16:17:32] <dbaupp> Thiez: the way it's structured, it's not really possible
[16:17:35] <cmr> Thiez: Attributes? Maybe, but there's no central way of handling them rigyht now
[16:17:38] <dbaupp> actually it probably is
[16:17:40] <strcat> B1 goes out of scope -> object A and object B reference each other, but since the only remaining references are from cycles, they should be freed
[16:17:54] <dbaupp> if you use an attribute, you mark it as used
[16:18:04] <strcat> if you copy B1 into B3 before B1 goes out of scope, that doesn't happen
[16:18:15] <dbaupp> and then there is a pass very late in compilation that checks that all attributes are "used"
[16:18:18] <strcat> or you could copy out A2 from object B
[16:18:37] *** Quits: unbracketed (textual@moz-7F0EE151.lsanca.fios.verizon.net) (Quit: Computer has gone to sleep.)
[16:18:40] <caitp> ugh, do I need to provide code to show how this is done with reference count implementations, I've done this dozens of times lol
[16:18:42] <benh> no one uses doc comments though, do they ;)
[16:18:44] *** Quits: jack (jack@moz-1EDECAC0.hsd1.nm.comcast.net) (Quit: Leaving.)
[16:18:49] <Thiez> dbaupp: why is that?
[16:18:57] *** Quits: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp) (Client exited)
[16:19:01] <dbaupp> Thiez: what in particular?
[16:19:09] *** Quits: pyrac (pyrac@moz-984F61EC.w83-200.abo.wanadoo.fr) (Quit: pyrac)
[16:19:13] <Thiez> why would it not be possible to warn for unknown annotations?
[16:19:33] <dbaupp> I decided it would be, it probably got lost in the discussion
[16:19:35] <Thiez> (I just noticed I had some #[incline(always)] annotations...)
[16:19:55] <dbaupp> Thiez: enforce those ramps!
[16:19:57] <strcat> caitp: I know how to break cycles with specific instances with reference counting
[16:20:04] <caitp> of course ideally you don't have cycles in refcounted implementations
[16:20:06] <strcat> you cannot do it in general for arbitrary graphs of pointers without tracing
[16:20:15] <dbaupp> Thiez: "if you use an attribute, you mark it as used and then there is a pass very late in compilation that checks that all attributes are "used""
[16:20:16] <Thiez> oh sorry, I thought the next few lines were aimed at someone else and skipped them :)
[16:20:18] <caitp> but when you do, it's fixable
[16:20:29] <Thiez> yes, that is what I had in mind
[16:20:35] <strcat> caitp: it's fixable if you have a data structure of all the pointers or know the *specific* structure
[16:20:46] <caitp> i can't remember why this came up though, what we were talking about is opting in or out of the GC, not refcounting
[16:20:48] <dbaupp> Thiez: feel like implementing it? ;P
[16:20:49] <Thiez> I think I'll create an issue about that if none exists, it could be a nice lint pass
[16:21:19] <strcat> caitp: if you have a reference counting implementation that handles cycles, it is a GC
[16:21:20] <Thiez> dbaupp: once upon a time I would have been 'yay of course', but then I saw the rustc code
[16:21:27] <strcat> caitp: that is what cpython uses
[16:21:39] <strcat> and I don't know how you're going to do it without tracing
[16:21:44] <strcat> cpython uses a tracing cycle collector
[16:21:51] <dbaupp> Thiez: yep :(
[16:21:57] <strcat> firefox uses a tracing cycle collector for reference counted stuff that may have cycles
[16:22:46] <strcat> if you have a way to do reference counting + free cycles without tracing through them, you should probably tell them
[16:23:08] <strcat> not talking about specific data structures with specific known kinds of cycles
[16:23:10] <strcat> *arbitrary* graphs
[16:23:18] <caitp> the strategy is generally to not have cycles, which is complicated in the browser situation esp cross-language stuff
[16:23:28] <caitp> obviously you don't "want" them
[16:23:40] <cmr> "don't have cycles" isn't a viable statement for a programming language to give
[16:23:40] *** Quits: deLta30 (quassel@111B8494.9209D8C2.622A08E2.IP) (Ping timeout)
[16:23:43] <strcat> caitp: ok but they can exist, and you need to guarantee this stuff is gone when a task ends in rust
[16:24:03] <strcat> and you need to guarantee that cycles are freed during memory pressure too
[16:24:05] <strcat> before a task ends
[16:24:16] <caitp> cool, but where does this depend on syntactic explicitness?
[16:24:28] <strcat> caitp: we aren't talking about that right now
[16:24:43] <caitp> at what pointer are you incapable of graphing this stuff without these little tags?
[16:24:44] <strcat> we are talking about whether this can implemented with reference counting and without tracing
[16:24:58] <strcat> caitp: I'm not talking about syntax
[16:25:08] <strcat> I'm talking about why the compiler has to know about managed pointers
[16:25:14] <strcat> whether they are @T or ManagedPtr<T>
[16:25:28] <caitp> knowing about them doesn't require syntactic explicitness
[16:25:35] <strcat> I'm not talking about syntax
[16:25:37] <caitp> at least not everywhere
[16:26:00] <strcat> caitp: ok so 
[16:26:05] <strcat> let x = 5; foo(x)
[16:26:16] <strcat> is that gc'ed?
[16:26:22] <strcat> in a hypothetical language inferring it
[16:26:32] <strcat> let x = 5; foo(&x)
[16:27:59] <strcat> Go infers whether something is stack-allocated or heap-allocated
[16:28:06] <strcat> if it is heap-allocated, it is gc'ed
[16:28:12] <strcat> if you take a reference to it, it is heap-allocated
[16:28:34] <strcat> you could extend that, but I want to know how you'll extend it to the point where you can write something like a red-black tree without gc
[16:28:46] *** Joins: sankha93 (Instantbir@523D78AE.78A899BB.8B6C1D65.IP)
[16:28:57] <strcat> without gc and without *copying* any of the keys/values within the implementation
[16:29:49] *** Joins: deLta30 (quassel@E2D4730E.EB51B13E.622A08E2.IP)
[16:30:00] <strcat> and as a bonus, without whole-program analysis forbidding libraries (but not necessarily required)
[16:30:02] <caitp> so, if you insist on the 'let' type inferrence of rust, then we're going to infer that this is an int, and as a primitive it is allocated on the stack (I bloody hope), and passing by value is going to push a copy to the stack and be cleaned up or "GC"'d when foo finishes, or if passing by pointer, the reference is pushed to the stack and is cleaned up when foo returns (but the original value isn't) -- if the pointer to x is allocated on the 
[16:30:03] <caitp> task heap, then it's the bloody caller's responsibility to make sure the protocol of who kills it is understood and complied with -- if we decide to opt into memory management by declaring it initially as managed, passing it to 'foo' should add this to the graph and GC should behave normally
[16:30:40] <strcat> the reference escapes from foo
[16:31:54] <caitp> what do you mean by escapes, you mean that foo gives it up?
[16:32:12] <strcat> foo puts it in a data structure
[16:32:22] <strcat> it holds onto the reference after the call
[16:32:30] <cmr> rusti: fn f(x: *int) { println("%u", unsafe { x as uint }); } let (x, y, z) = ~1, @2, &3; f(x); f(y); f(z); ~""
[16:32:32] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/cgPL
[16:33:24] <cmr> rusti: fn f(x: *int) { println(fmt!("%u", unsafe { x as uint })); } let x = ~1; let y = @2; let z = &3; f(x); f(y); f(z); ~""
[16:33:26] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/JbbV
[16:35:15] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[16:35:27] *** Quits: FrozenCow_ (FrozenCow@moz-B2DF4929.chello.nl) (Connection reset by peer)
[16:35:48] *** Joins: FrozenCow_ (FrozenCow@moz-B2DF4929.chello.nl)
[16:35:59] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[16:36:05] <caitp> the other thing rust needs is a goto statement.
[16:36:16] <cmr> goto would be nice
[16:37:06] <dbaupp> seriously? what would you use it for?
[16:37:23] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[16:37:44] *** Joins: judder (maradukewa@385DDD8F.206937E4.78E362FE.IP)
[16:38:47] <dbaupp> to be specific, what would one use it for that can't be written in a safer way in Rust already?
[16:39:36] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[16:39:36] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 143ce5390 to 14b8391cc: 02http://git.io/N3iJvQ
[16:39:36] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[16:39:37] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[16:39:38] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/47cj2Q
[16:39:38] <ghrust> 13rust/06auto 141e52eed 15Patrick Walton: librustc: Don't require `pub extern` to make extern functions visible
[16:39:38] <ghrust> 13rust/06auto 145fb2546 15Patrick Walton: Remove all uses of `pub impl`. rs=style
[16:39:38] <ghrust> 13rust/06auto 1444af506 15bors: auto merge of #6871 : pcwalton/rust/de-pub-impl, r=pcwalton
[16:39:40] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[16:39:40] <cmr> I was just thinking about that but I realized destructors and automatic-freeing handle my use cases
[16:40:36] *** Quits: bernard (Mibbit@moz-BD7D8526.cable.mindspring.com) (Quit: http://www.mibbit.com ajax IRC Client)
[16:41:02] <dbaupp> cmr: I've found that and labelled breaks essentially remove the things I'd use goto for in C/++
[16:41:07] <caitp> there's nothing inherently unsafe about them, especially if it's just goto and not longjmp or similar
[16:43:34] <dbaupp> caitp: well, not unsafe so much as non-local reasoning for programmers and compilers
[16:44:19] <SiegeLord> I wonder how badly it'd break the borrow check pass...
[16:44:31] <dbaupp> (and goto would probably end up being very restricted in Rust, because the borrow checker would have to stamp on it *hard*)
[16:45:21] <cmr> Lua has goto, but it's forward-only, and can be desugared into closures afaik
[16:47:14] <caitp> even if goto were severely limited, it would be a way to provide some fall through behaviour without unneeded extra tests in places where return statements or loop continue/break statements can't be used
[16:47:23] <dbaupp> cmr: you can simulate it with `'jump_forward: loop { ... break 'jump_forward; ... } <jumps to here> `
[16:47:32] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:47:59] <strcat> cmr: https://github.com/thestinger/rust/tree/jemalloc I believe that works, at least on linux
[16:48:07] <dbaupp> (with a break as the last statement of the loop too.)
[16:48:29] <strcat> I doubt it works on other platforms
[16:48:49] <cmr> strcat: Thanks :)
[16:49:03] <strcat> anyway it might not, but malloc/free/remalloc/posix_memalign/aligned_alloc/calloc are weak symbols in glibc so they should get overrided
[16:49:11] <strcat> realloc*
[16:53:03] <strcat> cmr: yeah it works
[16:53:07] <cmr> ifeq ($$(CFG_WINDOWSY_$(1)), 1)
[16:53:09] <strcat> easy to tell with src/test/bench/core-map.rs
[16:53:10] <cmr> make makes me want to cry
[16:53:31] <strcat> because it makes search twice as fast
[16:54:02] <strcat> compared to glibc 2.17
[16:55:50] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[16:56:15] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[16:56:24] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:56:48] *** Quits: FrozenCow_ (FrozenCow@moz-B2DF4929.chello.nl) (Connection reset by peer)
[16:57:04] *** Quits: dbaupp (Thunderbir@moz-C6B1454A.lns20.syd7.internode.on.net) (Ping timeout)
[16:57:10] *** Joins: FrozenCow_ (FrozenCow@moz-B2DF4929.chello.nl)
[17:01:43] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[17:03:57] *** Quits: FrozenCow_ (FrozenCow@moz-B2DF4929.chello.nl) (Connection reset by peer)
[17:04:15] *** Joins: blitter (blitter@moz-BA14D5CF.dyn.centurytel.net)
[17:04:22] *** Joins: FrozenCow_ (FrozenCow@moz-B2DF4929.chello.nl)
[17:06:47] *** Joins: mflamer (Mibbit@moz-C6ED16AA.hsd1.ca.comcast.net)
[17:10:22] *** Joins: jack (jack@moz-F1B36F9F.hsd1.nm.comcast.net)
[17:10:47] <strcat> cmr: anyway it needs to be tested on other platforms
[17:11:10] <strcat> we may need to enable the je_ prefix in ./configure and call je_malloc, je_free, etc. on non-linux
[17:11:29] <strcat> it's good to use the malloc/free symbol names because LLVM knows about them
[17:11:44] <strcat> hardcoded
[17:11:55] <joelteon> je is french, isn't it
[17:11:55] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:12:01] <cmr> short for jason evans
[17:12:07] <cmr> principal author of jemalloc
[17:15:19] *** Joins: haard (fredrik@moz-C0C16A68.cust.telenor.se)
[17:18:29] *** Quits: haard (fredrik@moz-C0C16A68.cust.telenor.se) (Quit: Lost terminal)
[17:20:06] *** Joins: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[17:24:05] *** Quits: doener (doener@moz-121949B3.unitymediagroup.de) (Quit: leaving)
[17:26:30] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[17:27:47] *** Quits: jorendorff (jorendorff@moz-30F4FB9E.hfc.comcastbusiness.net) (Quit: jorendorff)
[17:27:52] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: out places)
[17:30:20] <cmr> Why does libextra still want core:: ?
[17:32:12] <caitp> everybody loves core
[17:33:40] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:33:40] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/47cj2Q
[17:33:40] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:33:47] <Thiez> I really liked the name 'core'
[17:34:55] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[17:34:55] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[17:36:53] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[17:37:08] <Yurume> you can bring `core` back by `extern mod core (name="std");`.
[17:38:18] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[17:38:55] *** Quits: FrozenCow_ (FrozenCow@moz-B2DF4929.chello.nl) (Connection reset by peer)
[17:39:44] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[17:40:39] *** Joins: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com)
[17:44:35] <Thiez> that's like cloning your pet dog when it dies.
[17:44:43] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke. It's all a joke.)
[17:44:58] *** Quits: jack (jack@moz-F1B36F9F.hsd1.nm.comcast.net) (Quit: Leaving.)
[17:45:00] <Thiez> it's not quite the same as it used to be :p
[17:45:40] *** Quits: mflamer (Mibbit@moz-C6ED16AA.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[17:47:10] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[17:47:51] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Ping timeout)
[17:48:02] *** Joins: dylukes (dylukes@moz-7B9A0DA0.neo.res.rr.com)
[17:49:49] *** Quits: dylukes (dylukes@moz-7B9A0DA0.neo.res.rr.com) (Ping timeout)
[17:50:05] *** Joins: jorendorff (jorendorff@moz-30F4FB9E.hfc.comcastbusiness.net)
[17:55:43] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[17:55:50] *** Joins: mib_t83mqy (Mibbit@moz-BD7D8526.cable.mindspring.com)
[17:58:46] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[17:59:26] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[17:59:28] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[18:01:50] *** Quits: deLta30 (quassel@E2D4730E.EB51B13E.622A08E2.IP) (Ping timeout)
[18:05:23] *** Joins: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[18:07:03] *** Joins: hjr3 (hradtke@54B05067.8A23C5CC.BCAEBB33.IP)
[18:08:07] *** Quits: igl (igl@moz-D6D18CFE.adsl.alicedsl.de) (Ping timeout)
[18:08:20] *** Joins: igl (igl@moz-26400444.adsl.alicedsl.de)
[18:09:23] *** Joins: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net)
[18:09:50] <huhlig-home> Question, I am feeling stupid regarding one of the concepts in rust. Since there is no such thing as a null reference or null pointer. How do you create a reference/pointer that can be used optionally or initialized after declaration?
[18:10:07] <cmr> huhlig-home, Option<~foo>
[18:10:30] <huhlig-home> cmr, which translates to?
[18:10:47] <cmr> huhlig-home, it is optimized into a nullable pointer :)
[18:10:53] <huhlig-home> ...
[18:11:03] <cmr> you can't use it unsafely though
[18:11:20] <huhlig-home> cmr so rust basically uses elvis operators everywhere
[18:11:30] <huhlig-home> on the symantic side
[18:11:37] <cmr> I don't know what that means
[18:12:20] *** Quits: sankha93 (Instantbir@523D78AE.78A899BB.8B6C1D65.IP) (Ping timeout)
[18:12:37] <huhlig-home> elvis operator ref?.fn() if ref != null then ref.fn()
[18:12:37] <cmr> http://static.rust-lang.org/doc/core/option.html
[18:12:40] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:12:48] <huhlig-home> cmr I am looking at it now
[18:13:21] *** Joins: \n (NDesaulnie@moz-C2B49FFE.hsd1.ca.comcast.net)
[18:13:42] <cmr> huhlig-home, well usually you use pattern matching or o.is_some()/o.is_none() or just plain o.unwrap()
[18:13:52] *** Joins: sankha93 (Instantbir@523D78AE.78A899BB.8B6C1D65.IP)
[18:14:09] *** Quits: jorendorff (jorendorff@moz-30F4FB9E.hfc.comcastbusiness.net) (Quit: jorendorff)
[18:14:49] <\n> Hey I need a hand for the patch I'm working on, does anyone know what super::data refers to here? https://github.com/mozilla/rust/blob/master/src/libcore/comm.rs#L103
[18:14:51] <huhlig-home> unwrap just looks like if ref==nul then do x else do y elif
[18:15:51] <cmr> \n, develop against the incoming branch, master is out of date
[18:16:47] <\n> cmr: holy shit!  Where's libcore?!
[18:17:03] <\n> libstd?
[18:17:06] <cmr> \n, renamed to libstd :)
[18:17:06] <cmr> (std is now extra)
[18:18:06] <cmr> https://github.com/mozilla/rust/blob/incoming/src/libstd/comm.rs#L581
[18:19:43] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Ping timeout)
[18:20:32] <cmr> super is just the mod containing the curernt mod, but I don't know what it's refering to right there
[18:21:42] <xazax> wow, what a historycal coincidence I just realized O.o
[18:23:08] <xazax> in relativistic physics we compare all the speed against the speed of light, which is often denoted by C, and according to our knowledge it is not possible to move faster than C
[18:23:41] <xazax> in programming language benchmarks we compare the languages against C, and it is pretty damn hard to be faster ( but at least possible )
[18:26:03] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[18:26:23] *** Quits: sankha93 (Instantbir@523D78AE.78A899BB.8B6C1D65.IP) (Ping timeout)
[18:28:16] <\n> cmr: it can't be referring to itself?
[18:28:30] *** Joins: jorendorff (jorendorff@moz-30F4FB9E.hfc.comcastbusiness.net)
[18:28:44] <cmr> \n, I don't think so... not sure though, I'm still fairly new :)
[18:28:45] <\n> super isn't client, it's streamp, though, right?
[18:29:15] <cmr> I think so, yeah.
[18:29:36] <cmr> although!
[18:29:42] <cmr> Note the extra block
[18:29:49] <cmr> it might be refering to client::data
[18:29:56] <cmr> I don't know how that works
[18:30:26] *** Joins: sankha93 (Instantbir@AF37D2F8.927D11A.8B6C1D65.IP)
[18:30:42] <\n> so then it would be reffering to itself
[18:30:47] <\n> referring*
[18:31:31] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[18:31:38] <cmr> yes,. but I think that would be infinite recursion
[18:31:41] <cmr> so maybe not :\
[18:33:35] <\n> maybe core::kinds::Owned::data? https://github.com/mozilla/rust/blob/incoming/src/libstd/comm.rs#L551 if there is such a function
[18:34:21] <cmr> it would need to be priv use core::kinds::Owned::* for that, and it doesn't exist in there
[18:34:25] <cmr> https://github.com/mozilla/rust/blob/incoming/src/libstd/kinds.rs
[18:34:28] *** Joins: dylukes (dylukes@moz-7B9A0DA0.neo.res.rr.com)
[18:36:43] <\n> ok thanks.  Any idea of there's an open bug for all the damn unused import and unnecessary unsafe block warnings?  Because that would be super easy for me
[18:37:01] <cmr> \n, there aren't any unused imports or unnecessary unsafe blocks.
[18:37:14] <cmr> the snapshot is just out of date with current unsafe/unused import lint
[18:37:19] <\n> oh
[18:38:05] *** Quits: dylukes (dylukes@moz-7B9A0DA0.neo.res.rr.com) (Quit: Computer has gone to sleep.)
[18:38:12] <jld> Hopefully there'll be a snapshot soon for the for loop type change.
[18:38:16] <\n> I thought the snapshot would only be used for stage0?  I'm seeing warnings for stage1
[18:39:29] <cmr> \n, maybe, what warnings? are they still in stage2?
[18:39:55] <cmr> I went through and cleaned them up just the oter day :s
[18:40:20] <\n> one example: rust/src/librustc/lib/llvm.rs:2042:12: 2044:13 warning: unnecessary `unsafe` block [-W unused-unsafe (default)]
[18:40:42] <\n> cmr: did they not get merged into incoming yet?
[18:40:48] <cmr> \n, they did
[18:41:13] <\n> idk maybe the snapshot gets used for multiple stages
[18:41:14] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[18:42:08] <\n> jld: are the snapshots still being created on a per need basis?  and is tjc still doing them?
[18:42:58] <cmr> \n, that unsafe block is definitely necessary, it might be a bug in the linter
[18:43:02] <cmr> it was rewritten
[18:43:02] <jld> ...wait.  Maybe we have that snapshot already.
[18:43:10] * jld untangles master/incoming confusion.
[18:43:18] <cmr> jld, the for loop protocol change? yes, that has been snapshotted
[18:43:41] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[18:44:26] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[18:45:12] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[18:45:45] <jld> Lately I've spent too little time on Rust and more time dealing with projects where the branch named "master" is meaningful....
[18:49:36] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Connection reset by peer)
[18:51:13] *** Quits: xazax (xazax@moz-D7592A2A.csoma.elte.hu) (Quit: Ex-Chat)
[18:51:30] <cmr> Anyone on OS X mind testing https://github.com/thestinger/rust/tree/jemalloc ?
[18:51:33] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[18:54:08] <caitp> whats the test case?
[18:54:25] <cmr> that it builds and tests pass
[18:54:32] <caitp> ill try it
[18:54:33] <cmr> it uses jemalloc instead of the system malloc
[18:55:28] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[18:56:17] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[18:58:21] <cmr> some paths in mk/rt.mk might need to be modified
[18:58:23] <cmr> I don't know
[18:58:53] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[18:58:56] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[19:00:45] <caitp> well it hasn't died yet
[19:01:35] <caitp> this is only a macbook pro with 8gb of ram, it might take a while before you hear about a failure :u
[19:02:01] <cmr> it the rt builds and gets past stage1 there's a pretty good chance everything is fine
[19:02:43] <caitp> still just building llvm im afraid
[19:02:46] <cmr> ah
[19:06:13] *** Parts: judder (maradukewa@385DDD8F.206937E4.78E362FE.IP) ()
[19:06:47] *** Joins: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[19:09:29] *** Quits: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Client exited)
[19:10:29] <Reiser> Hey, I'm just learning rust, just have a question about some simple code I'm writing. I want to count the number of occurances of each byte in a bytestring.
[19:10:38] <Reiser> This is what I have so far: http://pastie.org/private/i24zw10hyz8erq7tkgxdq
[19:11:05] <Reiser> I don't know Rust too well, I was wondering if there was a better way, the tuple copying for every byte seems really wasteful
[19:11:19] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:12:12] <cmr> Reiser, What version of rust are you using?
[19:12:38] <Reiser> cmr, 0.6, the .tar linked on the rust-lang homepage
[19:13:02] <bytbox>  
[19:13:10] <bytbox> (disregard that)
[19:14:06] <cmr> Reiser, the most obvious change is just using the index of the vector as the byte value
[19:14:17] <cmr> so counts[b] += 1
[19:14:38] <cmr> And let mut counts = vec::with_capacity(bytes.len())
[19:14:39] <Blei> also, i think that code has a bug(?)
[19:14:48] <Blei> match vec::position(counts, |&(a, b)| a == b)
[19:14:53] <Blei> should probably be 
[19:14:54] <Reiser> Oh I'm so stupid they're only 255 values of course
[19:14:57] <Blei> match vec::position(counts, |&(a, _)| a == b)
[19:15:27] <Reiser> Blei: yeah sorry, I was copying it by eye from my laptop to my desktop, the outer b is v on my laptop
[19:15:55] <cmr> errr, let mut counts = vec::from_elem(256, 0), sorry
[19:16:08] <cmr> Reiser, there's std::smallintmap for more generic cases of that though
[19:16:13] <cmr> where you have ints as keys
[19:17:10] <Reiser> I'll check it out, thanks cmr
[19:17:15] <cmr> http://static.rust-lang.org/doc/0.6/std/smallintmap.html
[19:17:31] <cmr> it's basically what you did with ~[(u8, u8)] :)
[19:18:36] <Reiser> Will try it out ;p, thanks again cmr
[19:19:08] *** Joins: orshem (or_shemesh@19491716.F0FDCE77.E3D28531.IP)
[19:21:30] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[19:23:06] *** Quits: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (Ping timeout)
[19:23:14] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[19:23:17] *** Joins: ssbr (ssbr@moz-B9B9415A.s-ip.magma.ca)
[19:23:30] *** Quits: jrfeenst (jrfeenst@moz-3265BD65.cpe.norwoodlight.com) (Quit: jrfeenst)
[19:24:24] *** Joins: RagingDave (RagingDave@moz-683C8043.pools.arcor-ip.net)
[19:25:07] <steven_is_false> Hi! Can anybody help me debug why my application (http://gitorious.org/p-x/p-x) is freezing up under Valgrind? Note: my application only compiles under Blender 2.63.
[19:25:10] *** Joins: jviereck (Adium@moz-340574DC.dclient.hispeed.ch)
[19:25:33] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[19:25:38] <cmr> steven_is_false, how sure are you that it's actually freezing up? valgrind is very slow.
[19:25:41] <steven_is_false> *Sorry, I meant Blender 2.62
[19:25:51] <steven_is_false> cmr: Yes, I'm sure it's freezing up.
[19:25:54] *** Quits: ssbr (ssbr@moz-B9B9415A.s-ip.magma.ca) (Quit: Application borked.)
[19:25:55] <cmr> ok
[19:26:14] *** Joins: SiegeLord (siege@moz-CAF07B4C.hsd1.ma.comcast.net)
[19:26:51] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[19:26:54] <steven_is_false> cmr: If I run some of my tests they work fine.
[19:26:58] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[19:27:00] <steven_is_false> cmr: Although slowly.
[19:27:10] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[19:27:36] <cmr> steven_is_false, I'm not in a place where I can help you more, sorry :(
[19:27:57] <cmr> steven_is_false, it might be worth running it under a debugger and breaking where it freezes (eg in gdb hit ctrl-c)
[19:28:17] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[19:29:51] <steven_is_false> cmr: Yes
[19:30:08] <caitp> cmr: it compiled, just testing now
[19:30:52] *** Quits: xandy (xandy@moz-EA2E101B.eventnet.ccc.de) (Ping timeout)
[19:31:31] <steven_is_false> How does one use vgdb?
[19:31:50] <caitp> whats vgdb?
[19:32:19] *** Joins: jrfeenst (jrfeenst@moz-3265BD65.cpe.norwoodlight.com)
[19:32:29] <steven_is_false> caitp: A command for running Valgrind GDB interop stuff. I assume that it's how one drops into a debugger from Valgrind.
[19:32:43] <caitp> ah
[19:33:02] *** Joins: xandy (xandy@moz-EA2E101B.eventnet.ccc.de)
[19:33:55] <caitp> I haven't used it personally, gdb should break on bad access and stuff which is pretty easy, I'm not sure how helpful it would be to break when a leak is detected at the end of program
[19:34:10] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (Ping timeout)
[19:34:15] <caitp> maybe it is handy
[19:34:30] <steven_is_false> caitp: My program freezes up under Valgrind and I need to debug that.
[19:34:47] <caitp> how are you running it?
[19:34:52] <caitp> and whats your environment?
[19:35:28] <caitp> cmr: 632 passed, 0 failed, 43 ignored -- for stage 1
[19:35:37] <cmr> caitp, sweet! :)
[19:36:10] <caitp> \o/
[19:36:22] <steven_is_false> Hoorah! I got debugging working!
[19:36:43] *** Joins: illissius (illissius@A518C422.3F1C0C4.3AEF08B3.IP)
[19:37:16] <steven_is_false> Hmm, how does one break right now?
[19:37:19] <steven_is_false> In gdb
[19:37:26] <cmr> Should be ctrl-c
[19:37:31] <caitp> ctrl-c on most operating systems
[19:37:53] <steven_is_false> cmr: Right but whats the manual way to do it? Because I'm debugging remotely
[19:38:02] *** Joins: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[19:38:39] <caitp> your terminal likely can send ctrl-c
[19:38:47] *** Quits: xandy (xandy@moz-EA2E101B.eventnet.ccc.de) (Ping timeout)
[19:38:49] <cmr> That... is the manual way? I know of no other way to do it.
[19:39:25] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[19:39:47] <steven_is_false> cmr: In one console there is gdb listening to valgrind, and in the other valgrind is running.
[19:40:00] <sp3d> kill -sigint $pid
[19:40:00] <steven_is_false> So, I can't simply send ctrl-c
[19:40:23] <sp3d> is the same as ^C with PID owning the terminal
[19:41:07] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[19:41:36] <steven_is_false> sp3d: That should work I guess.
[19:42:44] <steven_is_false> Strange, GDB seems to be confused about the number of threads that are running.
[19:42:59] <steven_is_false> It's also confused about the backtrace.
[19:43:16] <caitp> gdb is often confused
[19:43:43] <steven_is_false> caitp: I'm guessing I need to upgrade, and or wait for -Z debug-info to be fixed.
[19:43:44] <caitp> especially for multi-process and multi-threaded programs
[19:44:05] <caitp> (this is why you usually want to debug chromium with --single-process, for instance)
[19:44:07] <cmr> yeah debug-info is busted right now
[19:44:27] <cmr> there's a GSoC person going to start work on it later this month
[19:44:34] *** Quits: jrfeenst (jrfeenst@moz-3265BD65.cpe.norwoodlight.com) (Quit: jrfeenst)
[19:46:08] <steven_is_false> Something I noticed while poking around with GDB. Apparently GDB has an info tasks command for Ada (As opposed to info threads.) I have no idea how complicated that'd be but if it'd be possible to hook into that with Rust that'd be awesome.
[19:46:16] *** Joins: jrfeenst (jrfeenst@moz-3265BD65.cpe.norwoodlight.com)
[19:47:31] *** Quits: sankha93 (Instantbir@AF37D2F8.927D11A.8B6C1D65.IP) (Ping timeout)
[19:47:43] *** Joins: xandy (xandy@moz-EA2E101B.eventnet.ccc.de)
[19:47:46] *** Joins: pyrac (pyrac@moz-984F61EC.w83-200.abo.wanadoo.fr)
[19:48:56] <steven_is_false> How do I backtrace other threads in a stopped process?
[19:49:21] <cmr> thead $x; where, iirc
[19:49:31] <caitp> http://www.delorie.com/gnu/docs/gdb/gdb_25.html
[19:49:39] <steven_is_false> Thank you.
[19:51:26] *** Joins: sankha93 (Instantbir@AF37D2F8.927D11A.8B6C1D65.IP)
[19:54:13] *** Quits: orshem (or_shemesh@19491716.F0FDCE77.E3D28531.IP) (Quit: Leaving)
[19:54:27] *** Joins: heftig_ (heftig@moz-D18DEBBD.dip0.t-ipconnect.de)
[19:55:26] <caitp> i don't suppose there's any way to have some control over the rust test environment other than writing a separate program for testing
[19:55:35] *** Quits: heftig (heftig@moz-744DA51.dip0.t-ipconnect.de) (Ping timeout)
[19:55:53] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[19:55:53] <cmr> caitp, what test environment? rustc --test ?
[19:55:55] <caitp> like, if I want to run a daemon task for all the tests in a given module, and not turn it off
[19:57:27] <caitp> I guess I could wrap multiple tests within a single #[test] and just run daemon once for it
[19:57:35] *** Joins: orshem (or_shemesh@19491716.F0FDCE77.E3D28531.IP)
[19:57:35] <caitp> but that still kind of sucks :p
[19:57:51] <cmr> yeah the test harness is very primitive right now
[19:58:15] * caitp ports gtest to rust
[19:58:34] <cmr> please do!
[19:59:03] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[19:59:58] *** Quits: snearch (snearch@moz-DBC0E338.pool.mediaways.net) (Ping timeout)
[20:01:02] *** Quits: mib_t83mqy (Mibbit@moz-BD7D8526.cable.mindspring.com) (Quit: http://www.mibbit.com ajax IRC Client)
[20:01:13] <illissius> (fyi: https://botbot.me/irc.mozilla.org/rust/ -> 404)
[20:02:03] <cmr> https://botbot.me/mozilla/rust/
[20:02:07] <cmr> nmatsakis, can you update that?
[20:02:55] *** Parts: steven_is_false (user@moz-144077DE.bchsia.telus.net) (ERC Version 5.3 (IRC client for Emacs))
[20:03:14] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[20:03:36] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[20:04:58] <illissius> oh nice. first time i've seen infinite scrolling upwards
[20:05:23] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[20:06:32] <nmatsakis> cmr: eh?
[20:06:54] <nmatsakis> cmr: update what, sorry.
[20:07:13] <nmatsakis> cmr: oh, the web page?
[20:07:51] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[20:09:50] *** Quits: jrfeenst (jrfeenst@moz-3265BD65.cpe.norwoodlight.com) (Quit: jrfeenst)
[20:11:59] *** Joins: tav (tav@moz-196E6F10.sohonet.co.uk)
[20:12:11] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:13:19] <mark_edward> does any have an idea of a good-sized project i could implement in Rust to help familiarize myelf with the languge?
[20:14:30] <Luqman> mark_edward: these could be a good starting point https://github.com/mozilla/rust/issues?labels=E-easy&page=1&state=open
[20:16:51] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[20:16:55] <mark_edward> thanks. i'm not sure I'm ready to try and get involved in the language development though.
[20:17:16] <mark_edward> i only learned about programming 2 years ago, and Rust a few weeks ago
[20:17:34] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Client exited)
[20:17:37] *** Joins: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net)
[20:17:46] <doomlord> perfect time to get into it, no preconceptions
[20:17:57] *** Joins: jrfeenst (jrfeenst@moz-3265BD65.cpe.norwoodlight.com)
[20:18:13] *** Quits: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[20:18:34] <mark_edward> Ok then
[20:18:45] <doomlord> just curious what languages
[20:18:59] <doomlord> (^do you already use)
[20:19:15] <\n> mark_edward: irc client
[20:19:51] *** Joins: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[20:20:00] <mark_edward> primarily C++, C and Java. mostly for schoolwork, but i practice C++ completely on my own
[20:20:09] <mark_edward> i also am ok with Haskell
[20:20:18] <mark_edward> \n: great idea!
[20:20:19] <doomlord> irc client feature request: dynamic windowing for monitoring many potential channels. like what irssi does when you have many channels in the same window, but sorting the lines and splitting between horizontal panes too... (dynamically, according to activity)
[20:20:48] <caitp> potential channels?
[20:20:50] <mark_edward> that sounds a bit... complex
[20:20:56] <mark_edward> and i don't really understand it
[20:21:15] <doomlord> i explained badly; in irssi, you can open many channels interleaved in one window
[20:21:28] <illissius> does rust have gui bindings?
[20:21:33] <\n> sdl
[20:21:43] *** Quits: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Ping timeout)
[20:22:03] <doomlord> ... so you can just watch many conversations... i use that colour coded. however, you could sort the output to put each channel sequantially, and still have it dynamically split screenspace between channels based on  activity.
[20:22:17] <\n> irc is good because the protocol is so simple, and a brainfuck intepreter is good too, because brainfuck is so simple
[20:22:21] <steven_is_false> This is weird, I have 4 threads when I should only have 3. Does Rust have an extra automatic thread?
[20:22:32] <\n> main
[20:22:39] <sp3d> there's a very very early project for gobject-introspection [gtk3] bindings, idk how far along Qt bindings might be
[20:23:20] <doomlord> what gui apis' would be easiest to adapt to rust bindings... most gui apis are tied to a particular languages' class-system? (eg osx stuff revolves around objC, etc..)
[20:23:22] <\n> steven_is_false: unless the runtime creates one, but I can't speak to that
[20:23:59] <steven_is_false> \n: Okay.
[20:24:24] <doomlord> are gui bindings passe. use CLI and web-interfaces :)
[20:24:40] <caitp> well, servo has at least some basic GUI stuff working on osx and windows
[20:24:50] <caitp> not sure what it's using to do this
[20:24:55] <caitp> er
[20:25:00] <caitp> s/windows/x11
[20:25:02] <\n> doomlord++
[20:25:39] <doomlord> One thing that had me thinking of gui bindings though... i would like to write a 3d modeller in rust
[20:26:00] <illissius> doomlord: GTK is plain C and explicitly has easy/easier bindability as a goal, so in that sense it's probably a good candidate
[20:26:22] <mark_edward> what do you do in Rust for global state
[20:26:25] <illissius> but people usually don't like GTK because it sucks and is a pain on OSX (and windows?)
[20:26:36] <orshem> doomlord: go the blender route
[20:26:48] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[20:26:58] <sp3d> illissius: yeah, GTK is no fun on OS X or Windows, despite technically working on both
[20:27:13] <doomlord> orshem , use blenders' internal libraries, wrapped in rust?
[20:27:32] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[20:28:10] <\n> mark_edward: might be better to ask, do I _need_ global state to solve this problem?
[20:28:39] <mark_edward> well i wrote an IRC server in C for class and you needed a global list of channels and clients
[20:29:08] <illissius> this probably isn't gui-specific, but how do people go about preserving safety guarantees when writing bindings? or just make everything `unsafe` and call it a day?
[20:29:11] <doomlord> you just have an "application" object, pass it everywhere.. and improve your code by seperating things out that dont need the whole applicatoin object
[20:29:49] <\n> illissius: unsafe bindings are necessary, as the rust compiler can make no safety garuntees of the called-into C code
[20:30:12] *** Quits: deepdog (deepdog@moz-490E834C.client.mchsi.com) (Quit: Leaving)
[20:30:12] *** Quits: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP) (Ping timeout)
[20:30:16] <illissius> \n: right, but maybe the person writing the bindings can :) but it seems very non-trivial
[20:31:02] <steven_is_false> This is so bizarre, my application seems to be frozen only in the get time system call for Linux.
[20:31:08] <\n> I'm not sure that unsafe blocks actually incur performance penalty?
[20:31:47] <illissius> would be surprised if they do
[20:32:34] <illissius> (very surprised, given that one of the use cases is bypassing dynamic safety checks that have a performance penalty)
[20:33:28] *** Joins: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP)
[20:33:44] <cyndis> unsafe doesn't affect performance. you are supposed to make the functions appear safe to any caller.
[20:34:22] <cyndis> that is: the bindings have a safe function that uses the unsafe api in a safe manner
[20:35:29] <orshem> doomlord: you could. They also implements their own gui based on opengl
[20:35:47] <orshem> and it's all written in c
[20:35:54] <orshem> so easier to bind
[20:36:24] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[20:36:25] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[20:36:59] <cmr> nmatsakis, the link in the topic
[20:37:50] <doomlord> i have the usual NIH itches; implementing my own GUI as i go in GL appeals .... but providing Rust wrappers for existing C code is probably more helpful for the rust community
[20:38:57] *** nmatsakis changes topic to 'http://www.rust-lang.org¬†| ICE to meet you | Tree is OPEN, please be gentle | logs at https://botbot.me/mozilla/rust/ and http://irclog.gr/#browse/irc.mozilla.org/rust'
[20:39:00] <nmatsakis> cmr: oh.
[20:39:05] <nmatsakis> cmr: much easier. :)
[20:39:16] <jld> Yay!  pipe-select.rs fails an asssertion in std::pipes and then hangs!  Now I can actually debug this.
[20:39:33] <cmr> I investigated writing Qt bindings using SMOKE, and it seems very feasible,
[20:39:36] <cmr> ^ illissius 
[20:40:05] <doomlord> whats SMOKE ?
[20:40:11] <cmr> https://github.com/reusee/go-qt
[20:40:22] <cmr> doomlord, Automatic binding system thingy for Qt (and C++ in general)
[20:40:34] <cmr> http://techbase.kde.org/Development/Languages/Smoke
[20:40:50] <illissius> cmr: I investigated writing Qt bindings without SMOKE for Haskell a long time ago but nothing came of it
[20:41:00] <illissius> I didn't like that with SMOKE everything goes through hash tables :)
[20:41:13] <cmr> Yeah, it's not great.
[20:41:22] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[20:41:56] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[20:41:58] *** Quits: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[20:42:04] <doomlord> thinking out loud. rust macros with custom syntax... objC named parameters. could one make a sensible looking/workable interface to objC objects
[20:42:27] *** Joins: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net)
[20:42:45] <cmr> Is windows broken? When running make check-fast on incoming I get "The procedure entry point rust_dbg_extern_identity_TwoDoubles could not be located in the dynamic link library C:\MinGW\msys\1.0\home\cmr\rust2\build\i686-pc-mingw32\stage2\bin\rustc\i686-pc-mingw32\bin\run_pass_stage2-c3ef877b8eb93e5-0.1.dll"
[20:42:59] <cmr> And plain 'ole "check" won't even build
[20:44:01] <doomlord> heh. could we see rust on the microsoft CLR. or rust on the JVM. ("Just"?) 
[20:44:14] <doomlord> not that i'd personally want either
[20:44:48] <cmr> doomlord, probably not, at least not efficiently, given its memory semantics
[20:45:21] <adu> cmr: yes, windows is always broken
[20:45:21] <jld> I've set RUST_LOG=std::pipes, but the debug!s in std::pipes::wait_many aren't printing.
[20:45:38] <doomlord> perhaps a cludgy implementation that actually makes everything GC. (defeating the point of rust itself). or turning ~T into pooled objects perhaps
[20:45:42] <cmr> jld, RUST_LOG=std::pipes=4, maybe?
[20:46:06] <jld> The assert! that's failing is the last one, so they should be being executed.
[20:46:09] <jld> cmr: Nope.
[20:46:44] <steven_is_false> Isn't possible to create a heap out of a char array?
[20:46:59] <cmr> steven_is_false, it is.
[20:47:29] <cmr> but... not the best. I wouldn't use rust if it wasn't native, there are better managed languages out there.
[20:50:31] <steven_is_false> How about Google's native client bytecode?
[20:50:54] <steven_is_false> NVM I was confused about what it did.
[20:51:21] <steven_is_false> So PNaCl isn't developed yet.
[20:51:25] <cmr> that'd be trivial, just swap out the LLVM
[20:52:28] <steven_is_false> There needs to be documentation on rust environment variables.
[20:52:42] <cmr> There needs to be documentation :)
[20:52:44] <steven_is_false> I always forget what the option to set the thread count is.
[20:53:03] *** Joins: MaikKlein (maik@moz-8EF3B6AF.dip0.t-ipconnect.de)
[20:55:56] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[20:59:32] <steven_is_false> I'm not sure how to interpret the messages for the task logging.
[21:00:04] <steven_is_false> For example, I'm getting cryptic messages like this: rust: ~"no data available on &mut {header: {state: Blocked, blocked_task: (0x145d0c0 as *()), buffer: (0x7f236020a3d0 as *())}, payload: None}, going to sleep."
[21:00:30] *** Joins: unbracketed (textual@moz-7F0EE151.lsanca.fios.verizon.net)
[21:00:36] <cmr> That would correspond to fmt!("no data available on %?, going to sleep."
[21:00:43] <cmr> grep the source for parts of that string :)
[21:01:00] <steven_is_false> cmr: Fair enough.
[21:02:24] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[21:02:24] <steven_is_false> cmr: Actually, it was debug!("no data available on %?, going to sleep.", p); not fmt!
[21:02:30] <cmr> ah
[21:02:35] <cmr> right, makes sense
[21:05:31] <steven_is_false> Cool, so my application only goes through a slow blocking path at the very start, and end. That's nice to know (It only gets these messages on the start, and end.)
[21:06:19] <cmr> steven_is_false, you might wait till brson is around, he's the one who does most of the work on tasks and io and stuff
[21:06:28] <cmr> (afaik)
[21:06:33] <steven_is_false> cmr: Fair enough.
[21:06:45] *** Quits: MX80 (MX80@33BECB27.BD35E8FF.2C4394F7.IP) (Ping timeout)
[21:07:11] *** Joins: MX80 (MX80@moz-32BE33CD.dsl.g3telecom.net)
[21:08:47] <adu> I'm having trouble understanding std::getopt
[21:09:11] <steven_is_false> adu: I found looking at the source code for the compiler helped me out.
[21:10:19] <adu> https://github.com/mozilla/rust/tree/master/src/librustc ?
[21:10:22] <cmr> Also looking at the tests for example usage.
[21:10:27] <cmr> adu, https://github.com/mozilla/rust/blob/incoming/src/libextra/getopts.rs
[21:10:28] *** Joins: arete_ (arete@moz-CE1DC602.xen.prgmr.com)
[21:11:33] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[21:11:33] *** Joins: Fliboo (Flibo@moz-40397852.org.aalto.fi)
[21:11:33] *** Joins: CMCL_ (cmcl@moz-8C2E912C.co.uk)
[21:11:33] *** Quits: Voomer_ (Voomer@moz-E97E8EB7.br.br.cox.net) (Connection reset by peer)
[21:11:33] *** Joins: decoder_ (quassel@moz-D7023D7D.own-hero.net)
[21:11:33] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[21:11:33] *** Joins: kroisse_ (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP)
[21:11:33] *** Joins: Voomer_ (Voomer@moz-E97E8EB7.br.br.cox.net)
[21:11:33] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[21:11:33] *** Quits: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP) (Ping timeout)
[21:11:33] *** Quits: Flibo (Flibo@moz-40397852.org.aalto.fi) (Ping timeout)
[21:11:33] *** Quits: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (Ping timeout)
[21:11:33] *** Quits: gmcabrita (uid4474@moz-D8B63698.irccloud.com) (Ping timeout)
[21:11:33] *** Quits: wilfred (uid159@moz-C944F5EC.irccloud.com) (Ping timeout)
[21:11:33] *** Quits: jihyun (uid7128@moz-D8B63698.irccloud.com) (Ping timeout)
[21:11:34] <adu> for example, the docs say "type Result = result::Result<Matches, Fail_>" so to get Matches do I do result[0]?
[21:11:37] *** Quits: jorendorff (jorendorff@moz-30F4FB9E.hfc.comcastbusiness.net) (Ping timeout)
[21:11:47] *** Quits: ivan (ivan@moz-531C3EC9.members.linode.com) (Ping timeout)
[21:11:47] *** Quits: nattofriends (tsutsumi@moz-4CEEC7AA.warosu.org) (Ping timeout)
[21:11:47] *** Quits: AutomatedTester (David@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[21:11:47] *** Quits: cantsin (cantsin@moz-F99612CC.members.linode.com) (Ping timeout)
[21:11:47] *** Quits: btipling (btipling@moz-D51E0AEB.xen.prgmr.com) (Ping timeout)
[21:11:47] *** Quits: hjr3 (hradtke@54B05067.8A23C5CC.BCAEBB33.IP) (Ping timeout)
[21:11:47] *** Quits: dew (Instantbir@moz-66796D51.dhcp.stls.mo.charter.com) (Ping timeout)
[21:11:47] *** Quits: indutny (indutny@moz-49D42D15.c.ircrelay.com) (Ping timeout)
[21:11:47] *** Quits: jrfeenst (jrfeenst@moz-3265BD65.cpe.norwoodlight.com) (Ping timeout)
[21:11:47] *** Quits: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com) (Ping timeout)
[21:11:47] *** Quits: KindOne (KindOne@B2A5C4FE.9C5C45A3.EC6A1518.IP) (Ping timeout)
[21:11:47] *** Quits: jroll (jroll@moz-5989BB9E.members.linode.com) (Ping timeout)
[21:11:47] *** Quits: ircloggr (nodebot@moz-218B8E8E.compute-1.amazonaws.com) (Ping timeout)
[21:11:47] *** Quits: Benvie_ (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP) (Ping timeout)
[21:11:47] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[21:11:47] *** Quits: halorgium (z@moz-7A333983.spork.in) (Ping timeout)
[21:11:47] *** Quits: strmpnk (strmpnk@moz-49D42D15.c.ircrelay.com) (Ping timeout)
[21:11:47] *** Quits: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP) (Ping timeout)
[21:11:47] *** Quits: fzzzy (Donovan@moz-40919DA0.us-west-2.compute.amazonaws.com) (Ping timeout)
[21:11:47] *** Quits: duckinator (nick@moz-74B346B5.mostlyincorrect.info) (Ping timeout)
[21:11:47] *** Quits: erick (erick@E1304535.2A7189BF.BE19388.IP) (Ping timeout)
[21:11:47] *** Quits: rocode (rocode@moz-64C1010D.rocode.net) (Ping timeout)
[21:11:47] *** Quits: Raynes (macro@moz-E5F01CE6.members.linode.com) (Ping timeout)
[21:11:47] *** Quits: santiago (santiago@moz-8ADE82B4.socal.res.rr.com) (Ping timeout)
[21:11:47] *** Quits: sfackler (sfackler@moz-316FE70F.compute-1.amazonaws.com) (Ping timeout)
[21:11:47] *** Quits: stephank (stephank@FE6D378F.A6EC7F74.1E99A072.IP) (Ping timeout)
[21:11:47] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (Ping timeout)
[21:11:47] *** Quits: chee (chee@moz-E5A0DD8.org) (Ping timeout)
[21:11:58] *** Quits: \n (NDesaulnie@moz-C2B49FFE.hsd1.ca.comcast.net) (Ping timeout)
[21:11:58] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[21:11:58] *** Quits: CMCL (cmcl@moz-8C2E912C.co.uk) (Ping timeout)
[21:11:58] *** Quits: unbracketed (textual@moz-7F0EE151.lsanca.fios.verizon.net) (Ping timeout)
[21:11:58] *** Quits: arete (arete@moz-CE1DC602.xen.prgmr.com) (Ping timeout)
[21:12:02] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[21:12:02] *** Quits: decoder (quassel@moz-D7023D7D.own-hero.net) (Ping timeout)
[21:12:02] *** Joins: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[21:12:06] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[21:12:06] *** Quits: [o__o] (~o__o@moz-24EBFAC7.me) (Ping timeout)
[21:12:17] <cmr> adu, it means that std::getopts::Result is an alias for core::result::Result<Matches, Fail_>
[21:12:21] <steven_is_false> adu: Why don't you take a look at the gitorious repository for my application? http://gitorious.org/p-x/p-x/blobs/master/src/pX-x.rs
[21:12:28] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[21:12:33] *** Joins: Benvie (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP)
[21:12:36] *** Joins: \n (NDesaulnie@moz-C2B49FFE.hsd1.ca.comcast.net)
[21:12:36] *** Joins: jrfeenst (jrfeenst@moz-3265BD65.cpe.norwoodlight.com)
[21:12:36] *** Joins: jorendorff (jorendorff@moz-30F4FB9E.hfc.comcastbusiness.net)
[21:12:42] <steven_is_false> Sorry, I meant http://gitorious.org/p-x/p-x/blobs/master/src/main.rs
[21:12:54] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:13:14] <adu> I'm using the posix commands as my set of excercises :) my next assignment is to write "od" in rust
[21:13:26] <cmr> not a bad idea!
[21:13:34] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[21:13:35] *** Joins: KindOne (KindOne@B2A5C4FE.9C5C45A3.EC6A1518.IP)
[21:13:50] <adu> which has a lot of options
[21:14:05] *** Joins: btipling (btipling@moz-D51E0AEB.xen.prgmr.com)
[21:14:06] *** Joins: jroll (jroll@moz-5989BB9E.members.linode.com)
[21:14:28] <adu> and if it's interchangable with bsd od, then I might just give myself an A+
[21:14:31] *** Joins: [o__o] (~o__o@moz-24EBFAC7.me)
[21:15:23] *** Joins: hjr3 (hradtke@54B05067.8A23C5CC.BCAEBB33.IP)
[21:15:26] *** Joins: stephank (stephank@FE6D378F.A6EC7F74.1E99A072.IP)
[21:15:31] *** Joins: fzzzy (Donovan@moz-40919DA0.us-west-2.compute.amazonaws.com)
[21:15:31] *** Joins: chee (chee@moz-E5A0DD8.org)
[21:15:32] *** Joins: kaeso (kaeso@moz-F21FF626.unstable.it)
[21:15:33] *** Joins: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP)
[21:15:33] *** Joins: santiago (santiago@moz-8ADE82B4.socal.res.rr.com)
[21:15:34] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[21:15:36] *** Joins: sfackler (sfackler@moz-316FE70F.compute-1.amazonaws.com)
[21:15:37] *** Joins: indutny (indutny@moz-49D42D15.c.ircrelay.com)
[21:15:38] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[21:15:38] *** Joins: cantsin (cantsin@moz-F99612CC.members.linode.com)
[21:15:39] *** Joins: erick (erick@E1304535.2A7189BF.BE19388.IP)
[21:15:39] *** concrete.mozilla.org sets mode: +R 
[21:15:50] *** Joins: Raynes (macro@moz-E5F01CE6.members.linode.com)
[21:15:58] *** AutomatedTester|AFK is now known as AutomatedTester
[21:16:36] <cmr> adu, while you're at it you should improve the docs or write a wiki/blog article about it, if you find it confusing or inadequate
[21:16:52] *** Quits: cdidd (cdidd@moz-EDE6E06C.broadband.corbina.ru) (Ping timeout)
[21:16:57] *** Quits: Blei (philipp@moz-96D25F7A.cust.bluewin.ch) (Quit: WeeChat 0.4.1)
[21:16:57] <adu> I could put it on my blog: straymindcough.blogspot.com
[21:17:50] <Eridius> hmm, is &int == &mut int not legal?
[21:18:11] <Eridius> rusti: let a = &2; let mut b = &3; a == b
[21:18:16] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/jjAT
[21:18:17] <cmr> rusti, let x = &5; let y = &mut 5; x == y
[21:18:19] <adu> cmr: well, my first question is what's the difference between Rust's Result, and Haskell's Either?
[21:18:37] <Eridius> rusti: let a = &2; let b = &mut 3; a == b
[21:18:39] -rusti- false
[21:18:46] <cmr> adu, I don't know haskell at all, but there is an either in core::either
[21:18:51] <Eridius> hmm, it seems to be failing in assert_eq! though
[21:18:58] *** Quits: SiegeLord (siege@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[21:19:01] <Eridius> adu: Result and Either are the same thing I think
[21:19:09] <cmr> Eridius, assert_eq! does moves and stuff.
[21:19:15] <Eridius> except Result has Ok and Err, and Either has Left and Right
[21:19:20] <cmr> sometimes you need assert!(a == b)
[21:19:31] <Eridius> cmr: the error I'm getting is binary operation == cannot be applied to type `&mut int`
[21:19:42] <Eridius> let a = &2; let b = &mut 3; b == a
[21:19:44] <adu> Eridius: ok, that's what I thought, so they're both fancy pairs
[21:19:47] <Eridius> rusti: let a = &2; let b = &mut 3; b == a
[21:19:49] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/YdHG
[21:19:53] <Eridius> hah!
[21:19:59] <Eridius> you can say a == b, but not b == a
[21:20:01] <Eridius> that's, um, nasty
[21:20:07] *** Quits: Palmik (palmik@moz-FFAB1EAB.vpn.muni.cz) (Quit: Lost terminal)
[21:20:16] <cmr> Eridius, file a bug :p
[21:20:33] *** Joins: tjc (tjc@5071068D.97113E3A.43B20542.IP)
[21:20:33] *** ChanServ sets mode: +o tjc
[21:20:36] *** concrete.mozilla.org sets mode: -R 
[21:20:40] *** Joins: samnardoni (samnardoni@moz-1E43105.range86-162.btcentralplus.com)
[21:20:41] *** Joins: ivan (ivan@moz-531C3EC9.members.linode.com)
[21:20:56] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[21:20:56] *** Joins: strmpnk (strmpnk@moz-49D42D15.c.ircrelay.com)
[21:20:58] *** Joins: nattofriends (tsutsumi@moz-4CEEC7AA.warosu.org)
[21:21:04] <EXetoC> nah, file a bug report
[21:21:08] <cmr> adu, your blog is interesting, definitely bookmarking it for later :)
[21:21:16] <adu> cmr: thanks :)
[21:23:05] *** Quits: jrfeenst (jrfeenst@moz-3265BD65.cpe.norwoodlight.com) (Quit: jrfeenst)
[21:23:44] *** Joins: jrfeenst (jrfeenst@moz-3265BD65.cpe.norwoodlight.com)
[21:24:24] <adu> cmr: my personal favorite article is the divmod one
[21:24:57] <steven_is_false> Logging some of the pseudo-crates segfaults the program. Should I report multiple bugs or just one?
[21:24:58] <cmr> tjc, do you know anything about http://i.imgur.com/PZhmY4A.png ?
[21:25:13] <cmr> steven_is_false, probably just one
[21:25:16] <tjc> cmr: it looks familiar, let me check something
[21:25:29] <steven_is_false> cmr: Okay.
[21:26:13] <cmr> tjc, incoming is completely broken on windows 8 for me (it didn't used to be broken though)
[21:26:29] <tjc> cmr: hmm, I was thinking it was https://github.com/mozilla/rust/issues/3660 but I don't know if it is
[21:27:02] <tjc> cmr: sorry, don't have a Windows setup right now so I can't experiment with it‚Ä¶ filing an issue would be appreciated
[21:27:04] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: WeeChat 0.4.1)
[21:27:28] <jld> Does anyone know why rustc::metadata::decoder::get_item_attrs wouldn't be seeing the attribute I'm adding?
[21:27:44] <jld> Like, do I have to do something special to export #[stuff] into the metadata?
[21:27:44] <tjc> jld: well, obvious question‚Ä¶ is the encoder writing out the attribute?
[21:27:53] <MaikKlein> steven_is_false: have u published your engine yet?
[21:28:06] <jld> tjc: That's an excellent question.  Is there an easy way to get the EBML blob?
[21:28:13] <steven_is_false> MaikKlein: Yep! It's on Gitorious. Let me get you a link.
[21:28:23] <MaikKlein> is it
[21:28:29] <MaikKlein> dllcn
[21:28:30] <tjc> jld: not particularly easy, no‚Ä¶ I'd suggest just looking at the encoder code
[21:28:31] <MaikKlein> or sth like that
[21:28:42] <steven_is_false> MaikKlein: dlfcn is just a supporting library.
[21:28:54] <tjc> IIRC, there's not an easy way to dump out the metadata for debugging because we haven't defined a schema for our metadata
[21:29:40] <steven_is_false> Here's the source: http://gitorious.org/p-x/p-x . It requires Blender 2.62 to compile the assets though (there's one tiny line of code that needs to be changed to support higher versions.)
[21:29:49] <caitp> what would be a nice way of having optional arguments to a function
[21:30:03] <tjc> caitp: well, the usual way is to pass in an Option
[21:30:06] <jld> tjc: Okay, staring harder at encoder.rs worked -- we're not writing attributes in the item_enum case
[21:30:08] <tjc> a little clunky, but you can define wrappers for it
[21:30:11] <tjc> jld: Ok, cool
[21:31:52] <caitp> what you mean like foo(~"argA",None,None,~"argD") or something?
[21:32:14] <cmr> foo(Some(~"argA"), None, ...), yeah
[21:32:28] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[21:32:41] <caitp> but that's not really optional arguments, that's just a way of pretending to support "null" pointers, essentially
[21:33:00] <cmr> What's not optional about that?
[21:33:12] <caitp> well it's not optional if you have to specify them
[21:33:19] <caitp> I'm thinking more like a zipped array or hash map or something
[21:33:44] <caitp> similar to json
[21:33:48] <tjc> caitp: you could maybe write macros to simulate that in particular cases
[21:33:53] <tjc> well, to simulate optional arguments
[21:33:57] <cmr> Having sugar for it would disguise performance costs, I wouldn't be very comfortable with it in the language.
[21:34:01] <tjc> I guess there's nothing stopping you from passing a hash map for it, either
[21:34:12] <cmr> Although default arguments defaulting to None wouldn't be bad
[21:34:54] <MaikKlein> steven_is_false: nice does it work on linux?
[21:35:56] <steven_is_false> MaikKlein: I develop on Linux.
[21:36:47] <MaikKlein> ah nice you also wrote some opengl layer
[21:37:22] <steven_is_false> MaikKlein: Yes but it's very primitive and hacky.
[21:37:40] <steven_is_false> MaikKlein: I hope to make it safer, and simpler in the future though.
[21:40:42] *** aatch|ohgodtheoptimization is now known as aatch
[21:41:10] <MaikKlein> btw is there a way to clone the whole repo on gitorious?
[21:41:12] <MaikKlein> with rust sdl etc
[21:41:19] <caitp> hmm, being able to have default values for struct fields would be nice too
[21:41:50] <steven_is_false> MaikKlein: Just cd into the subrepos, and clone them.
[21:43:54] <aatch> Oh yeah, finally fixed the performance regression: http://huonw.github.io/isrustfastyet/
[21:44:27] <cmr> aatch, Thiez reported that rustray is faster than before with the new pipeline, too.
[21:44:44] <aatch> cmr, I know
[21:45:00] <aatch> (that it's faster, not that he reported it)
[21:45:29] <cmr> by faster than before, I mean pre-regression
[21:45:44] *** Quits: jviereck (Adium@moz-340574DC.dclient.hispeed.ch) (Quit: Leaving.)
[21:46:16] <aatch> cmr, Yep, I know that too. I actually used rustray to help tune the pipeline
[21:46:26] <erickt1> tjc: ping
[21:46:34] <tjc> erickt1: pong
[21:46:37] <Luqman> r? https://github.com/mozilla/rust/pull/6889
[21:46:47] <tjc> erickt1: sorry, haven't looked at your PR yet, I just sat down to work
[21:46:49] <erickt1> tjc:  hey there! did you get a chance to see https://github.com/mozilla/rust/pull/6885
[21:46:58] <erickt1> tjc: no problem :)
[21:47:06] <aatch> on my machine, pre-regression was ~9s, with the new pipeline it's ~7s
[21:47:34] <erickt1> Luqman: can you add a test for https://github.com/mozilla/rust/pull/6889
[21:47:34] <erickt1> ?
[21:48:19] <MaikKlein> steven_is_false: what line do I need to change? is it in ...editor.py?
[21:48:25] <MaikKlein> for blender 2.66a
[21:48:31] <Luqman> erickt1: i wasn't sure how to actually test that the destructor is run
[21:49:30] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[21:49:55] <steven_is_false> MaikKlein: Yes, it's in pX-x_editor.py. The layers member was renamed sometime after 2.62
[21:50:22] <steven_is_false> Sorry, I meant faces
[21:51:40] <tjc> erickt1: left some line comments just now, I'll re-review once you get a chance to address them :-)
[21:51:56] <tjc> erickt: oh wait...
[21:51:56] <erickt1> Luqman: hrm. Is this not testing the bug you are fixing? https://github.com/mozilla/rust/blob/master/src/test/run-pass/newtype-struct-drop-run.rs
[21:52:04] <tjc> erickt1: I didn't see your later commits
[21:52:11] <tjc> you're right, expr_call and expr_field don't need them
[21:52:27] <tjc> erickt: sorry, but could you squash the three syntax: commits into a single commit? I think that would be easier to deal with
[21:52:31] <tjc> erickt1: ^
[21:52:31] <erickt1> tjc: I could squash my commits togehter
[21:52:33] <tjc> cool
[21:52:35] <erickt1> yeah :)
[21:52:35] <tjc> thanks
[21:52:47] <Luqman> erickt1: no, that was a previous bug for newtype structs. This bug is with structs like: struct Foo;
[21:53:21] <erickt1> Luqman: gotcha. Could you do something with thread local storage?
[21:53:26] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[21:54:01] <Luqman> erickt1: ya that could work
[21:54:38] <MaikKlein> steven_is_false: do you also know what I have to change? ... ah i think it was renamed to Polygons
[21:54:39] <erickt1> Luqman: or you could run the destructor in a new task, and have that destructor fail. The main task could then catch and return cleanly, or exit with a failure
[21:54:39] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:54:39] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/ZZVyrw
[21:54:39] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:54:41] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:54:41] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/EsC7bQ
[21:54:41] <ghrust> 13rust/06auto 1464759c9 15Luqman Aden: librustc: Have destructor run for unit-like structs.
[21:54:41] <ghrust> 13rust/06auto 14c35b7b5 15bors: auto merge of #6889 : luqmana/rust/unit-struct-drop, r=catamorphism...
[21:54:42] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:56:12] <MaikKlein> ah yeah it is mesh.polygons now
[21:56:21] *** Quits: pyrac (pyrac@moz-984F61EC.w83-200.abo.wanadoo.fr) (Quit: pyrac)
[21:56:23] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[21:56:47] <steven_is_false> MaikKlein: Thanks!
[21:57:57] <cmr> So, this is exciting. strcat's jemalloc branch passes tests on windows, OS X, and linux :)
[21:58:36] *** Joins: jviereck (Adium@moz-340574DC.dclient.hispeed.ch)
[21:58:42] *** Quits: jviereck (Adium@moz-340574DC.dclient.hispeed.ch) (Client exited)
[21:59:23] <MaikKlein> there is something wrong with the perspective 
[21:59:31] <MaikKlein> or I am just drunk :x
[21:59:37] <thomaslee_> hey folks, I'm seeing code using the 'self lifetime (is that the right name for it?) in type arguments on some traits ... what's that mean, exactly? std::vec::ImmutableVector is one example.
[22:00:24] <steven_is_false> MaikKlein: I guess it's a bit exaggerated but thats so it's easy to tell that it's working.
[22:00:35] <cmr> thomaslee_, It's a lifetime for a pointer itno the "self" object, and is valid for as long as self is.
[22:01:17] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Ping timeout)
[22:01:17] *** Quits: rntz__ (daedalus@moz-7E35218B.cmdnnj.fios.verizon.net) (Ping timeout)
[22:01:26] *** Quits: thou (thou@moz-1C1CA9F7.fasttrackcomm.net) (Ping timeout)
[22:01:26] *** Quits: PeterSP (peter@moz-4DAF5777.bstnma.fios.verizon.net) (Ping timeout)
[22:01:35] *** Quits: blitter (blitter@moz-BA14D5CF.dyn.centurytel.net) (Ping timeout)
[22:01:35] *** Quits: cyndis (cyndis@moz-FA10A1CD.fi) (Ping timeout)
[22:01:35] *** Quits: zheng_li (zheng_li@moz-D6711E9E.xenplanet.org) (Ping timeout)
[22:01:36] *** Joins: cyndis (cyndis@moz-FA10A1CD.fi)
[22:01:36] *** Joins: zheng_li (zheng_li@moz-D6711E9E.xenplanet.org)
[22:01:39] <steven_is_false> MaikKlein: I'm just recompiling with the latest Blender right now. So I'll see if there's a problem.
[22:01:39] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Ping timeout)
[22:01:39] *** Quits: sam1 (sam@moz-ADDDDFB1.mc.videotron.ca) (Ping timeout)
[22:01:39] *** Quits: toddaaro (toddaaro@moz-98F46974.us) (Ping timeout)
[22:01:39] *** Quits: dju (dju@moz-83BD5EC.dmz.me) (Ping timeout)
[22:01:39] *** Quits: jakubw (ubuntu@moz-D137E450.eu-west-1.compute.amazonaws.com) (Ping timeout)
[22:01:39] *** Quits: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP) (Ping timeout)
[22:01:39] *** Quits: tristram (tristram@moz-C498CC41.eu) (Ping timeout)
[22:01:40] *** Joins: jakubw (ubuntu@moz-D137E450.eu-west-1.compute.amazonaws.com)
[22:01:40] *** Joins: h3r3tic (heretic@moz-8BC3B3DB.se)
[22:01:43] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[22:01:43] *** Joins: toddaaro (toddaaro@moz-98F46974.us)
[22:01:46] *** Quits: dan_johnsin (dan_johnsi@6902762D.11B071D.FB9A45AF.IP) (Ping timeout)
[22:01:46] *** Quits: oal (oal@2602D8B5.799888E6.F7A44A1B.IP) (Ping timeout)
[22:01:46] *** Joins: blitter (blitter@moz-BA14D5CF.dyn.centurytel.net)
[22:01:48] *** Joins: thou (thou@moz-1C1CA9F7.fasttrackcomm.net)
[22:01:48] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[22:01:49] *** Quits: benh (ben@moz-4A0366D2.org) (Ping timeout)
[22:01:49] *** Joins: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP)
[22:01:49] *** Joins: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net)
[22:01:49] *** Joins: sam1 (sam@moz-ADDDDFB1.mc.videotron.ca)
[22:01:50] *** Joins: tristram (tristram@moz-C498CC41.eu)
[22:01:51] *** Quits: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP) (Ping timeout)
[22:01:51] *** Joins: benh (ben@moz-4A0366D2.org)
[22:01:51] *** gravel.mozilla.org sets mode: +R 
[22:01:56] *** Joins: dju (dju@moz-83BD5EC.dmz.me)
[22:01:58] *** Quits: teratorn (teratorn@moz-5363C32C.teratorn.org) (Ping timeout)
[22:02:42] <MaikKlein> seems to work
[22:02:50] *** Joins: dew (Instantbir@moz-66796D51.dhcp.stls.mo.charter.com)
[22:02:55] <MaikKlein> can you use blender to load models into opengl?
[22:03:10] <thomaslee_> cmr, think that jives with my intuition -- is it "special" as far as lifetimes go (e.g. like 'static seems to be), or does it just so happen that somebody chose "self" as the name for that lifetime?
[22:03:27] <cmr> thomaslee_, I think it's a special case but I'm not sure.
[22:03:49] <steven_is_false> MaikKlein: Yes, I'm exporting the Blender models into my own format, and then compiling them into my application.
[22:03:57] <steven_is_false> ls
[22:04:09] <thomaslee_> cmr, cool -- thanks!
[22:04:13] <MaikKlein> ah okay
[22:04:22] <aatch> thomaslee_, it is and isn't special
[22:04:46] <thomaslee_> aatch, lol oh?
[22:05:24] <aatch> right now you are only allowed to 'self in structs, traits and impls, but that's an old limitation that will be removed
[22:05:40] <aatch> the name is specific, but the semantics are not
[22:06:47] *** gravel.mozilla.org sets mode: -R 
[22:06:50] *** Joins: PeterSP (peter@moz-4DAF5777.bstnma.fios.verizon.net)
[22:06:59] <cmr> heh, I got what pcwalton was getting with the error: duplicate entry for `start` when building with stage0
[22:07:12] *** Joins: teratorn (teratorn@moz-5363C32C.teratorn.org)
[22:07:46] <thomaslee_> aatch, ah, understood.
[22:08:07] *** Joins: robo (Mibbit@BB4D081C.E4058CC4.27560D6E.IP)
[22:08:08] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[22:13:02] *** Joins: cmr (moznet@F468AD76.B3752F1D.93D630DC.IP)
[22:13:02] *** Joins: Eleeleth (anthony@moz-87BA63DD.me)
[22:13:05] *** Joins: rhelmer (rhelmer@moz-DB4A9C19.scl3.mozilla.com)
[22:13:10] *** Joins: marc (marc@E31B39DA.F9D61A8.416A0103.IP)
[22:13:13] *** Joins: rhodesd (none@3646D136.4C5731DA.F395EA5B.IP)
[22:13:16] *** Joins: erick (erick@E1304535.2A7189BF.BE19388.IP)
[22:13:21] *** Joins: prudhvi (prudhvi@moz-154A460A.supr.io)
[22:13:27] *** Joins: Ralith (ralith@moz-50F3C77.vc.shawcable.net)
[22:13:30] *** Joins: nattofriends (tsutsumi@moz-4CEEC7AA.warosu.org)
[22:13:32] *** Joins: doy (doy@moz-5FE28A32.akrasiac.org)
[22:13:36] *** Joins: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu)
[22:13:37] *** Joins: rbancroft (rumble@moz-4E8E0D7F.cg.shawcable.net)
[22:13:37] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[22:13:37] *** Joins: PeterSP (peter@moz-4DAF5777.bstnma.fios.verizon.net)
[22:13:39] <doomlord> have some macro definitions you could include in C one way, or run through the C preprocessor with another set of defines to generate the rust declarations
[22:13:40] *** Joins: markluffel (markluffel@179F0C2A.5C4C7C24.8354FB35.IP)
[22:13:41] *** Joins: MX80 (MX80@moz-32BE33CD.dsl.g3telecom.net)
[22:13:41] *** Joins: Thiez (thiez@moz-BF669398.student.utwente.nl)
[22:13:53] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[22:13:53] *** Joins: raze (raze@moz-4E6675AF.bredband.comhem.se)
[22:13:58] *** Joins: corecode (2@moz-BCA4C10D.org)
[22:14:00] *** Joins: jj2baile (jon@moz-DCEF6040.csclub.uwaterloo.ca)
[22:14:04] *** Joins: johns (johns@2557E599.66715431.D25A875A.IP)
[22:14:07] *** rhelmer is now known as IRCMonkey10779
[22:14:10] *** Joins: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net)
[22:16:18] *** Quits: orshem (or_shemesh@19491716.F0FDCE77.E3D28531.IP) (Quit: Leaving)
[22:16:32] *** Quits: sankha93 (Instantbir@AF37D2F8.927D11A.8B6C1D65.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[22:17:09] *** Joins: orshem (orshem@19491716.F0FDCE77.E3D28531.IP)
[22:17:43] *** Quits: samnardoni (samnardoni@moz-1E43105.range86-162.btcentralplus.com) (Client exited)
[22:17:50] <robo> @doomlord any sample bindings i can refer?
[22:18:03] *** Joins: samnardoni (samnardoni@moz-1E43105.range86-162.btcentralplus.com)
[22:19:26] <robo> @steven_is_false any example out there i can refr to?
[22:19:30] <doomlord> i haven't tried it, and i'm not sure it would be any better than bindgen
[22:19:40] <erickt1> tjc: I updated https://github.com/mozilla/rust/pull/6885
[22:19:47] <erickt1> tjc: if you got a moment :)
[22:19:51] <tjc> erickt1: ok, looking
[22:19:53] *** Quits: samnardoni (samnardoni@moz-1E43105.range86-162.btcentralplus.com) (Ping timeout)
[22:21:46] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[22:23:58] <tjc> erickt1: fine except for that one XXX comment
[22:24:08] <bjz> Luqman: ping
[22:24:17] <Luqman> bjz: pong
[22:24:20] <steven_is_false> robo: Try looking at the rust-sdl binding.
[22:24:36] <bjz> Luqman: did you manage to fix rray, or shall I?
[22:25:10] <Luqman> bjz: no, i haven't looked at it yet. you can go ahead if you'd like
[22:26:35] *** Joins: jst (quassel@2557E599.66715431.D25A875A.IP)
[22:26:35] <erickt1> tjc: I wasn't quite sure what to do in this case. I could get rid of the XXX, or turn it into a fixme, but I'm not sure what the fix would be
[22:26:35] *** Quits: Eleeleth (anthony@moz-87BA63DD.me) (Ping timeout)
[22:26:35] *** Quits: Caseus (bacon@moz-9F046088.members.linode.com) (Ping timeout)
[22:26:35] *** Quits: jj2baile (jon@moz-DCEF6040.csclub.uwaterloo.ca) (Ping timeout)
[22:26:35] *** Quits: samebchase (samuel@moz-7519FE69.net) (Ping timeout)
[22:26:35] *** Quits: LimeBurst (me@247D1419.D73964AC.27A8748.IP) (Ping timeout)
[22:26:35] *** Joins: Eleeleth (anthony@moz-87BA63DD.me)
[22:26:35] <tjc> erickt1: well, I wasn't sure either! :-)
[22:26:35] *** Quits: kornholi (kornholi@otland.net) (Ping timeout)
[22:26:35] *** Quits: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu) (Ping timeout)
[22:26:35] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[22:26:35] *** Quits: jorendorff (jorendorff@moz-30F4FB9E.hfc.comcastbusiness.net) (Ping timeout)
[22:26:35] *** Quits: [o__o] (~o__o@moz-24EBFAC7.me) (Ping timeout)
[22:26:35] *** Quits: nef (andor@moz-B1384951.neferty.in) (Ping timeout)
[22:26:35] *** Quits: acrichto (acrichto@moz-B63D64BD.res.cmu.edu) (Ping timeout)
[22:26:35] *** Quits: chandler (foo@moz-F990611.mastenbrook.net) (Ping timeout)
[22:26:35] *** Quits: reyre (rick@B2D8AB09.33EE9F8A.1139E686.IP) (Ping timeout)
[22:26:35] *** Quits: dumitru (dgherman@311ED075.DD6131A9.A746F37F.IP) (Ping timeout)
[22:26:35] *** Quits: jroll (jroll@moz-5989BB9E.members.linode.com) (Ping timeout)
[22:26:35] *** Quits: jrfeenst (jrfeenst@moz-3265BD65.cpe.norwoodlight.com) (Ping timeout)
[22:26:35] *** Quits: bstrie (ben@moz-D5A1D0F5.members.linode.com) (Ping timeout)
[22:26:35] *** Quits: sfackler (sfackler@moz-316FE70F.compute-1.amazonaws.com) (Ping timeout)
[22:26:35] *** Quits: ivan (ivan@moz-531C3EC9.members.linode.com) (Ping timeout)
[22:26:35] *** Quits: indutny (indutny@moz-49D42D15.c.ircrelay.com) (Ping timeout)
[22:26:35] *** Quits: strmpnk (strmpnk@moz-49D42D15.c.ircrelay.com) (Ping timeout)
[22:26:35] *** Quits: klutzy (th@BA61F396.8E859986.ECA1BB11.IP) (Ping timeout)
[22:26:35] *** Quits: michaelgreene (michael@DA820AA2.17CD9887.F12515B4.IP) (Ping timeout)
[22:26:35] *** Quits: pascal (pascal@moz-3A678551.pascalj.de) (Ping timeout)
[22:26:35] *** Quits: ruediger (quassel@moz-C9B8D8D0.org) (Ping timeout)
[22:26:35] *** Quits: joshua_ (joshua@moz-45967CBE.emarhavil.com) (Ping timeout)
[22:26:35] *** Quits: james4k (james@moz-726FE3EE.com) (Ping timeout)
[22:26:35] *** Quits: seth (seth@moz-D840E602.dsl.static.sonic.net) (Ping timeout)
[22:26:35] *** Quits: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP) (Ping timeout)
[22:27:22] *** Joins: cmr (moznet@F468AD76.B3752F1D.93D630DC.IP)
[22:27:28] *** tad_ is now known as Tad
[22:27:32] <cmr> What is going on with the server :S
[22:28:42] *** Joins: Reisen (Reisen@moz-253289F.xen.prgmr.com)
[22:29:11] *** Joins: chandler (foo@moz-F990611.mastenbrook.net)
[22:29:39] *** Joins: twm (twm@moz-13417AD3.dsl.static.sonic.net)
[22:30:31] *** Parts: steven_is_false (user@moz-144077DE.bchsia.telus.net) (ERC Version 5.3 (IRC client for Emacs))
[22:31:37] *** concrete.mozilla.org sets mode: -R 
[22:31:38] *** Joins: fairfieldt (fairfieldt@moz-D8998E1C.xen.prgmr.com)
[22:31:44] *** Joins: chandler_ (foo@moz-F990611.mastenbrook.net)
[22:31:51] *** Joins: ldlework (ldlework@6AEB83D1.B92A0FC.176AC772.IP)
[22:31:57] *** Joins: strmpnk (strmpnk@moz-49D42D15.c.ircrelay.com)
[22:32:01] *** Joins: nattofriends (tsutsumi@moz-4CEEC7AA.warosu.org)
[22:32:16] *** Joins: ivan (ivan@moz-531C3EC9.members.linode.com)
[22:32:37] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[22:34:20] *** Quits: MaikKlein (maik@moz-8EF3B6AF.dip0.t-ipconnect.de) (Ping timeout)
[22:35:04] <Tad> cmd, scheduled maintenance 
[22:35:21] <Tad> Don't worry about it, we could be rocky like this for 6 hours
[22:35:44] <cmr> oh good, was worried it was a ddos or something :)
[22:35:57] *** Quits: chandler_ (foo@moz-F990611.mastenbrook.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: twm (twm@moz-13417AD3.dsl.static.sonic.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: strmpnk (strmpnk@moz-49D42D15.c.ircrelay.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: chandler (foo@moz-F990611.mastenbrook.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: fairfieldt (fairfieldt@moz-D8998E1C.xen.prgmr.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: [o__o] (~o__o@moz-24EBFAC7.me) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: ivan (ivan@moz-531C3EC9.members.linode.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: reed (reed@tech.monkey) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: ldlework (ldlework@6AEB83D1.B92A0FC.176AC772.IP) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: dumitru (dgherman@311ED075.DD6131A9.A746F37F.IP) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: mark_edward (quassel@moz-6B90E517.rh.uchicago.edu) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: dew (Instantbir@moz-66796D51.dhcp.stls.mo.charter.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: mcpherrin (mimcpher@moz-345B5EBA.csclub.uwaterloo.ca) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: seth (seth@moz-D840E602.dsl.static.sonic.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: friggle (friggle@moz-A607EAFA.members.linode.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: arete (arete@moz-CE1DC602.xen.prgmr.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: doublec (doublec@moz-4DA4FA7C.cd.pn) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: bstrie (ben@moz-D5A1D0F5.members.linode.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: nattofriends (tsutsumi@moz-4CEEC7AA.warosu.org) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: Reisen (Reisen@moz-253289F.xen.prgmr.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: indutny (indutny@moz-49D42D15.c.ircrelay.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: Eleeleth (anthony@moz-87BA63DD.me) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: jst (quassel@2557E599.66715431.D25A875A.IP) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: johns (johns@2557E599.66715431.D25A875A.IP) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: markluffel (markluffel@179F0C2A.5C4C7C24.8354FB35.IP) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: rbancroft (rumble@moz-4E8E0D7F.cg.shawcable.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: doy (doy@moz-5FE28A32.akrasiac.org) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: MX80 (MX80@moz-32BE33CD.dsl.g3telecom.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: Ralith (ralith@moz-50F3C77.vc.shawcable.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: rhodesd (none@3646D136.4C5731DA.F395EA5B.IP) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: marc (marc@E31B39DA.F9D61A8.416A0103.IP) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: IRCMonkey10779 (rhelmer@moz-DB4A9C19.scl3.mozilla.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: erick (erick@E1304535.2A7189BF.BE19388.IP) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: redline6561 (redline656@moz-714529BD.members.linode.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: noct (quassel@moz-BAA6B280.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: Benvie (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: teratorn (teratorn@moz-5363C32C.teratorn.org) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: sam1 (sam@moz-ADDDDFB1.mc.videotron.ca) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: thou (thou@moz-1C1CA9F7.fasttrackcomm.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: tjc (tjc@5071068D.97113E3A.43B20542.IP) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: santiago (santiago@moz-8ADE82B4.socal.res.rr.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: hjr3 (hradtke@54B05067.8A23C5CC.BCAEBB33.IP) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: Raynes (macro@moz-E5F01CE6.members.linode.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: cantsin (cantsin@moz-F99612CC.members.linode.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: AutomatedTester (David@moz-DB4A9C19.scl3.mozilla.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: fzzzy (Donovan@moz-40919DA0.us-west-2.compute.amazonaws.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: KindOne (KindOne@B2A5C4FE.9C5C45A3.EC6A1518.IP) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: \n (NDesaulnie@moz-C2B49FFE.hsd1.ca.comcast.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: paulproteus (quassel@rose.makesad.us) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: cjh (chellmuth@moz-45C21C42.compute-1.amazonaws.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: dforsyth (dforsyth@AC76BBB4.5FDB5121.EE6E63A5.IP) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: joelteon (joel@moz-82AAB099.rs) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: Jesse_ (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: ziad (ziad@moz-5003F925.members.linode.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: indirect (indirect_m@moz-770AB053.hsd1.ca.comcast.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: jld (jld@moz-B94C75AD.xlerb.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: BigEndian (hurp@moz-1B6DD81E.members.linode.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: yardena (yardena@moz-A95F12B1.members.linode.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: olsonjeffery (pf@moz-9E9CF15C.members.linode.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: Eridius (kevin@moz-533B0DB4.us) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: terje (terje@moz-C0F75C5F.san.res.rr.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: yosemite (sam@moz-8CEAB1B0.dasbistro.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: xenocons (otk@moz-C675529E.members.linode.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: mixi (mixi@moz-DBD8904A.org) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: ski (Stefan@moz-4BB5E0FF.studat.chalmers.se) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: rsaarelm (rsaarelm@moz-D1CB7158.dhcp.inet.fi) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: yong (chatzilla@74DA0C97.4E87ADC2.263D9828.IP) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: kini (kini@moz-92AA953A.members.linode.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: jessicah (jessicah@moz-B8A3AE25.massey.ac.nz) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: eevee (eevee@moz-A20C5AE8.evrt.wa.frontiernet.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: robarnold (rob@moz-59F6B5.hfc.comcastbusiness.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: nonehaxor (nonehaxor@BA9CBAE.4C3B0355.EE6E63A5.IP) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: thomaslee_ (thomaslee@moz-306D3DF4.hsd1.or.comcast.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: madmoose (Hat@moz-E1973371.nerp.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: jyasskin_w (jyasskin@DAF66858.C60FE7DC.4065847B.IP) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: ILyoan (ILyoan@B4104EBB.3CC170B1.1E14B209.IP) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: wting (wting@moz-250C027.csres.utexas.edu) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: ssiloti (steve@moz-4B8C4631.oc.oc.cox.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: zq (p@moz-4A6945B7.de) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: brendanc (brendan@moz-CA4BEC19.cs.ubc.ca) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: jesse99 (jesse99@moz-F226420.hsd1.wa.comcast.net) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: toshok (toshok@moz-67C55A1F.com) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: kalenedrael (wat@moz-DBB6BE74.zagar.us) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: jesse98 (jjones@6251EDC2.15651213.B46B86FA.IP) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: ssalbiz (ssalbiz@moz-DCEF6040.csclub.uwaterloo.ca) (gravel.mozilla.org concrete.mozilla.org)
[22:35:57] *** Quits: Defiler (wilson@moz-5531C57F.wb78.net) (gravel.mozilla.org concrete.mozilla.org)
[22:36:38] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[22:37:40] *** Joins: jesse98 (jjones@6251EDC2.15651213.B46B86FA.IP)
[22:37:40] *** Joins: seth (seth@moz-D840E602.dsl.static.sonic.net)
[22:37:40] *** Joins: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com)
[22:37:40] *** Joins: ivan (ivan@moz-531C3EC9.members.linode.com)
[22:37:40] *** Joins: strmpnk (strmpnk@moz-49D42D15.c.ircrelay.com)
[22:37:40] *** Joins: chandler_ (foo@moz-F990611.mastenbrook.net)
[22:37:40] *** Joins: fairfieldt (fairfieldt@moz-D8998E1C.xen.prgmr.com)
[22:37:40] *** Joins: twm (twm@moz-13417AD3.dsl.static.sonic.net)
[22:37:40] *** Joins: chandler (foo@moz-F990611.mastenbrook.net)
[22:37:40] *** Joins: Reisen (Reisen@moz-253289F.xen.prgmr.com)
[22:37:40] *** Joins: doublec (doublec@moz-4DA4FA7C.cd.pn)
[22:37:40] *** Joins: [o__o] (~o__o@moz-24EBFAC7.me)
[22:37:40] *** Joins: mark_edward (quassel@moz-6B90E517.rh.uchicago.edu)
[22:37:40] *** Joins: mcpherrin (mimcpher@moz-345B5EBA.csclub.uwaterloo.ca)
[22:37:40] *** Joins: friggle (friggle@moz-A607EAFA.members.linode.com)
[22:37:40] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[22:37:40] *** Joins: arete (arete@moz-CE1DC602.xen.prgmr.com)
[22:37:40] *** Joins: bstrie (ben@moz-D5A1D0F5.members.linode.com)
[22:37:40] *** Joins: indutny (indutny@moz-49D42D15.c.ircrelay.com)
[22:37:40] *** Joins: Eleeleth (anthony@moz-87BA63DD.me)
[22:37:40] *** Joins: jst (quassel@2557E599.66715431.D25A875A.IP)
[22:37:40] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[22:37:40] *** Joins: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net)
[22:37:40] *** Joins: MX80 (MX80@moz-32BE33CD.dsl.g3telecom.net)
[22:37:40] *** Joins: markluffel (markluffel@179F0C2A.5C4C7C24.8354FB35.IP)
[22:37:40] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[22:37:40] *** Joins: rbancroft (rumble@moz-4E8E0D7F.cg.shawcable.net)
[22:37:40] *** Joins: doy (doy@moz-5FE28A32.akrasiac.org)
[22:37:40] *** Joins: Ralith (ralith@moz-50F3C77.vc.shawcable.net)
[22:37:40] *** Joins: erick (erick@E1304535.2A7189BF.BE19388.IP)
[22:37:40] *** Joins: rhodesd (none@3646D136.4C5731DA.F395EA5B.IP)
[22:37:40] *** Joins: marc (marc@E31B39DA.F9D61A8.416A0103.IP)
[22:37:40] *** Joins: redline6561 (redline656@moz-714529BD.members.linode.com)
[22:37:40] *** Joins: noct (quassel@moz-BAA6B280.com)
[22:37:40] *** Joins: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net)
[22:37:40] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[22:37:40] *** Joins: Benvie (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP)
[22:37:40] *** Joins: teratorn (teratorn@moz-5363C32C.teratorn.org)
[22:37:40] *** Joins: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net)
[22:37:40] *** Joins: thou (thou@moz-1C1CA9F7.fasttrackcomm.net)
[22:37:40] *** Joins: Raynes (macro@moz-E5F01CE6.members.linode.com)
[22:37:40] *** Joins: cantsin (cantsin@moz-F99612CC.members.linode.com)
[22:37:40] *** Joins: AutomatedTester (David@moz-DB4A9C19.scl3.mozilla.com)
[22:37:40] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[22:37:40] *** Joins: santiago (santiago@moz-8ADE82B4.socal.res.rr.com)
[22:37:40] *** Joins: fzzzy (Donovan@moz-40919DA0.us-west-2.compute.amazonaws.com)
[22:37:40] *** Joins: hjr3 (hradtke@54B05067.8A23C5CC.BCAEBB33.IP)
[22:37:40] *** Joins: KindOne (KindOne@B2A5C4FE.9C5C45A3.EC6A1518.IP)
[22:37:40] *** Joins: \n (NDesaulnie@moz-C2B49FFE.hsd1.ca.comcast.net)
[22:37:40] *** Joins: paulproteus (quassel@rose.makesad.us)
[22:37:40] *** Joins: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[22:37:40] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[22:37:40] *** Joins: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net)
[22:37:40] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[22:37:40] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[22:37:40] *** Joins: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net)
[22:37:40] *** Joins: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[22:37:40] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[22:37:40] *** Joins: cjh (chellmuth@moz-45C21C42.compute-1.amazonaws.com)
[22:37:40] *** Joins: dforsyth (dforsyth@AC76BBB4.5FDB5121.EE6E63A5.IP)
[22:37:40] *** Joins: joelteon (joel@moz-82AAB099.rs)
[22:37:40] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[22:37:40] *** Joins: Jesse_ (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[22:37:40] *** Joins: ziad (ziad@moz-5003F925.members.linode.com)
[22:37:40] *** Joins: indirect (indirect_m@moz-770AB053.hsd1.ca.comcast.net)
[22:37:40] *** Joins: jld (jld@moz-B94C75AD.xlerb.net)
[22:37:40] *** Joins: BigEndian (hurp@moz-1B6DD81E.members.linode.com)
[22:37:40] *** Joins: yardena (yardena@moz-A95F12B1.members.linode.com)
[22:37:40] *** Joins: olsonjeffery (pf@moz-9E9CF15C.members.linode.com)
[22:37:40] *** Joins: Eridius (kevin@moz-533B0DB4.us)
[22:37:40] *** Joins: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[22:37:40] *** Joins: terje (terje@moz-C0F75C5F.san.res.rr.com)
[22:37:40] *** Joins: yosemite (sam@moz-8CEAB1B0.dasbistro.com)
[22:37:40] *** Joins: xenocons (otk@moz-C675529E.members.linode.com)
[22:37:40] *** Joins: mixi (mixi@moz-DBD8904A.org)
[22:37:40] *** Joins: ski (Stefan@moz-4BB5E0FF.studat.chalmers.se)
[22:37:40] *** Joins: rsaarelm (rsaarelm@moz-D1CB7158.dhcp.inet.fi)
[22:37:40] *** Joins: yong (chatzilla@74DA0C97.4E87ADC2.263D9828.IP)
[22:37:40] *** Joins: kini (kini@moz-92AA953A.members.linode.com)
[22:37:40] *** Joins: eevee (eevee@moz-A20C5AE8.evrt.wa.frontiernet.net)
[22:37:40] *** Joins: robarnold (rob@moz-59F6B5.hfc.comcastbusiness.net)
[22:37:40] *** Joins: nonehaxor (nonehaxor@BA9CBAE.4C3B0355.EE6E63A5.IP)
[22:37:40] *** Joins: thomaslee_ (thomaslee@moz-306D3DF4.hsd1.or.comcast.net)
[22:37:40] *** Joins: madmoose (Hat@moz-E1973371.nerp.net)
[22:37:40] *** Joins: jyasskin_w (jyasskin@DAF66858.C60FE7DC.4065847B.IP)
[22:37:40] *** Joins: wting (wting@moz-250C027.csres.utexas.edu)
[22:37:40] *** Joins: ssiloti (steve@moz-4B8C4631.oc.oc.cox.net)
[22:37:40] *** Joins: zq (p@moz-4A6945B7.de)
[22:37:40] *** Joins: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com)
[22:37:40] *** Joins: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com)
[22:37:40] *** Joins: brendanc (brendan@moz-CA4BEC19.cs.ubc.ca)
[22:37:40] *** Joins: jesse99 (jesse99@moz-F226420.hsd1.wa.comcast.net)
[22:37:40] *** Joins: kalenedrael (wat@moz-DBB6BE74.zagar.us)
[22:37:40] *** Joins: ssalbiz (ssalbiz@moz-DCEF6040.csclub.uwaterloo.ca)
[22:37:40] *** Joins: Defiler (wilson@moz-5531C57F.wb78.net)
[22:37:40] *** concrete.mozilla.org sets mode: +o nmatsakis
[22:37:40] *** Quits: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com) (Client exited)
[22:37:51] *** Joins: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com)
[22:37:52] *** Joins: ldlework (ldlework@6AEB83D1.B92A0FC.176AC772.IP)
[22:38:16] *** Joins: jessicah (jessicah@moz-B8A3AE25.massey.ac.nz)
[22:38:28] *** Joins: rhelmer (rhelmer@moz-DB4A9C19.scl3.mozilla.com)
[22:38:38] *** Joins: dumitru (dgherman@311ED075.DD6131A9.A746F37F.IP)
[22:38:38] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[22:38:39] *** Joins: reed (reed@tech.monkey)
[22:38:54] *** Joins: tjc (tjc@5071068D.97113E3A.43B20542.IP)
[22:38:55] *** ChanServ sets mode: +o tjc
[22:38:59] *** Joins: toshok (toshok@moz-67C55A1F.com)
[22:39:01] *** Joins: nattofriends (tsutsumi@moz-4CEEC7AA.warosu.org)
[22:39:04] *** Quits: Tad (Tom@moz-2036EE54.kimsufi.com) (Ping timeout)
[22:39:29] *** rhelmer is now known as IRCMonkey46086
[22:39:35] *** Joins: sam1 (sam@moz-ADDDDFB1.mc.videotron.ca)
[22:39:55] *** Joins: johns (johns@2557E599.66715431.D25A875A.IP)
[22:40:50] *** Joins: ILyoan (ILyoan@B4104EBB.3CC170B1.1E14B209.IP)
[22:41:25] *** Parts: robo (Mibbit@BB4D081C.E4058CC4.27560D6E.IP) ()
[22:42:55] *** Joins: Tad (Tom@moz-2036EE54.kimsufi.com)
[22:43:17] *** Joins: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu)
[22:46:10] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:46:10] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/EsC7bQ
[22:46:10] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:48:38] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:48:38] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/SYxvDQ
[22:48:38] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:48:39] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:48:39] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/D2k9nQ
[22:48:39] <ghrust> 13rust/06auto 14f6fa5b9 15Tom Lee: Reexport static methods on structs & enums.
[22:48:39] <ghrust> 13rust/06auto 144246694 15Tom Lee: Fix a small typo in a comment.
[22:48:39] <ghrust> 13rust/06auto 1424e85ac 15bors: auto merge of #6880 : thomaslee/rust/issue-6745, r=catamorphism...
[22:48:41] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:48:43] *** Joins: webber46 (webber46@moz-27A3779B.cust.bredband2.com)
[22:50:22] *** Quits: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net) (Ping timeout)
[22:50:35] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:51:18] *** Quits: illissius (illissius@A518C422.3F1C0C4.3AEF08B3.IP) (Quit: )
[22:54:23] <thomaslee_> tjc, RE: your OSBridge trip to PDX -- how would you feel about a practice run of your talk on the evening of the 18th? Had a few guys at work indicate interest in a little Rust-y gathering, but if I can set a date in stone I might be able to rustle up more interest outside my little circle before then (pun intended)
[22:54:34] <bjz> Luqman: pushed some shanges
[22:54:49] <bjz> Luqman: still resolve errors with lmath :(
[22:54:52] <nmatsakis> s://github.com/mozilla/rust/pull/6885
[22:55:03] <bjz> Luqman: I think it miht be a bug with resolve
[22:55:07] <tjc> thomaslee_: I'd be keen on that, but ideally I'd do a practice talk a little earlier
[22:55:15] <tjc> thomaslee_: can I get back to you tomorrow about what day I'm getting there?
[22:55:46] <thomaslee_> tjc, of course -- and obviously no pressure.
[22:56:18] <tjc> thomaslee_: sure, will let you know -- have to figure out when my friends I'm housesitting for are coming back, in order to figure out the absolute earliest I can head to Portland, and then figure out when I actually want to head out :-)
[22:57:48] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: gtg, night)
[22:58:20] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Ping timeout)
[22:58:27] *** Quits: chandler_ (foo@moz-F990611.mastenbrook.net) (Quit: leaving)
[22:58:34] <thomaslee_> tjc, no problem! keep me posted.
[22:58:54] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[22:59:28] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[23:00:28] <Luqman> tjc: r? https://github.com/mozilla/rust/pull/6891 test case i missed for the last pull
[23:00:41] <tjc> Luqman: thanks, r+'ed
[23:01:19] *** Quits: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net) (Quit: adu)
[23:01:43] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Ping timeout)
[23:02:21] *** Quits: johns (johns@2557E599.66715431.D25A875A.IP) (Ping timeout)
[23:02:21] *** Quits: jst (quassel@2557E599.66715431.D25A875A.IP) (Ping timeout)
[23:02:27] *** Joins: johns (johns@2557E599.66715431.D25A875A.IP)
[23:02:34] *** Joins: jst (quassel@2557E599.66715431.D25A875A.IP)
[23:02:47] *** Quits: webber46 (webber46@moz-27A3779B.cust.bredband2.com) (Connection reset by peer)
[23:02:48] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[23:04:36] *** Joins: webber46 (webber46@moz-27A3779B.cust.bredband2.com)
[23:05:28] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Ping timeout)
[23:07:08] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[23:07:10] *** Quits: spider-mario (spidermari@moz-CDAD7F84.rev.sfr.net) (Input/output error)
[23:07:38] *** Quits: RagingDave (RagingDave@moz-683C8043.pools.arcor-ip.net) (Quit: Ex-Chat)
[23:11:07] *** Joins: wilfred (uid159@moz-C944F5EC.irccloud.com)
[23:11:08] *** Joins: jihyun (uid7128@moz-D8B63698.irccloud.com)
[23:12:42] *** Joins: gmcabrita (uid4474@moz-D8B63698.irccloud.com)
[23:13:40] *** Joins: SimonSapin (simon@A5049320.3E93794D.61EA6C28.IP)
[23:15:24] *** Quits: cyndis (cyndis@moz-FA10A1CD.fi) (Ping timeout)
[23:16:17] *** Joins: cyndis (cyndis@moz-FA10A1CD.fi)
[23:20:27] *** Jesse_ is now known as Jesse
[23:26:42] *** Quits: johns (johns@2557E599.66715431.D25A875A.IP) (Ping timeout)
[23:26:42] *** Quits: jst (quassel@2557E599.66715431.D25A875A.IP) (Ping timeout)
[23:28:02] *** Joins: jst (quassel@2557E599.66715431.D25A875A.IP)
[23:28:07] *** Joins: johns (johns@2557E599.66715431.D25A875A.IP)
[23:28:39] *** Joins: samnardoni (samnardoni@moz-1E43105.range86-162.btcentralplus.com)
[23:28:57] *** Quits: tjc (tjc@5071068D.97113E3A.43B20542.IP) (Quit: zzzzzzzzzz)
[23:29:29] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[23:30:11] *** Quits: hjr3 (hradtke@54B05067.8A23C5CC.BCAEBB33.IP) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[23:30:24] *** Quits: samnardoni (samnardoni@moz-1E43105.range86-162.btcentralplus.com) (Ping timeout)
[23:30:24] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Connection reset by peer)
[23:30:38] <deepdog> Hey. Has the great renaming been completed on rust/incoming?
[23:32:45] <cmr> deepdog, yes, kinad
[23:32:47] <cmr> *kinda
[23:33:23] <deepdog> cmr: Okay. Does rustc automatically add `extern mod std;` to the top of the file instead of core now?
[23:33:29] <cmr> deepdog, yes.
[23:33:36] <cmr> except, it seems, in libextra
[23:33:42] <cmr> I don't know exactly how that works right now
[23:33:58] <cmr> it still uses the name core, but it does link to libstd
[23:34:06] <deepdog> Because I was trying to use `float::sqrt` and said unresolved name.
[23:34:14] <deepdog> But once I added `extern mod std;` to the top it went away.
[23:34:28] <cmr> THere was a change to the prelude, you need "use std::float;"
[23:35:02] <deepdog> Ah. So float got removed from the prelude?
[23:35:19] <cmr> all of the reexports were
[23:35:28] <cmr> So you need to "use std::vec;" etc now too
[23:35:28] <deepdog> Reexports?
[23:35:57] *** Joins: carter (carter@moz-12C317EF.nyc.res.rr.com)
[23:36:09] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[23:36:19] <deepdog> Cool. Thanks for the help.
[23:36:23] <cmr> https://github.com/pcwalton/rust/commit/1ed09c2e1af573159ae03c4ca3f4930f0ebe7295
[23:36:26] <cmr> Is the commit that did it
[23:36:32] *** Joins: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net)
[23:36:51] <cmr> ctrl-f for "prelude.rs" to see the diff for that file
[23:37:03] *** Quits: lerc (quassel@121-74-233-23.telstraclear.net) (Ping timeout)
[23:37:14] <cmr> oh, seems I can link it directly: https://github.com/pcwalton/rust/commit/1ed09c2e1af573159ae03c4ca3f4930f0ebe7295#L150L72
[23:40:03] *** Joins: tjc (tjc@5071068D.97113E3A.43B20542.IP)
[23:40:03] *** ChanServ sets mode: +o tjc
[23:40:44] *** Quits: webber46 (webber46@moz-27A3779B.cust.bredband2.com) (Quit: webber46)
[23:41:47] <bjz> Luqman: I have to head out for a bit, but would you be able to check out those errors in rray?
[23:41:54] *** Quits: tjc (tjc@5071068D.97113E3A.43B20542.IP) (Ping timeout)
[23:42:17] <bjz> Luqman: I also switched some things over in rray to use map and map_default
[23:42:25] <bjz> ie. for Option handling
[23:43:12] *** Quits: raze (raze@moz-4E6675AF.bredband.comhem.se) (Ping timeout)
[23:44:20] *** Joins: skchrko_ (sk@61A494B3.BA40E8A.AAC02D62.IP)
[23:44:45] *** Joins: raze (raze@moz-4E6675AF.bredband.comhem.se)
[23:45:34] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[23:45:34] *** ChanServ sets mode: +o brson
[23:46:40] *** Quits: raze (raze@moz-4E6675AF.bredband.comhem.se) (Ping timeout)
[23:48:42] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:48:42] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/D2k9nQ
[23:48:42] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:48:54] *** Joins: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net)
[23:50:14] *** Joins: raze (raze@moz-4E6675AF.bredband.comhem.se)
[23:50:41] *** Quits: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net) (Ping timeout)
[23:51:39] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:51:39] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/7ytUmQ
[23:51:39] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:51:42] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:51:42] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/V2XxBw
[23:51:42] <ghrust> 13rust/06auto 14dbd61b3 15Tim Chevalier: rustc: Remove unused import
[23:51:42] <ghrust> 13rust/06auto 141ef207f 15Tim Chevalier: rustc: Improve astconv error message
[23:51:42] <ghrust> 13rust/06auto 14cb05dca 15Tim Chevalier: syntax: Add an each_view_item method on traits
[23:51:44] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:51:57] <mark_edward> if i want to use the latest version of Rust that's still likely not to be broken, which branch of the repo is that?
[23:52:11] <cmr> mark_edward, incoming
[23:52:23] <mark_edward> ok thanks.
[23:52:42] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[23:52:47] <mark_edward> does the repo contain mroe recent docs?
[23:53:14] *** Joins: tjc (tjc@moz-B867959A.redactedconsulting.com)
[23:53:14] *** ChanServ sets mode: +o tjc
[23:53:30] <cmr> no
[23:53:36] *** Quits: raze (raze@moz-4E6675AF.bredband.comhem.se) (Ping timeout)
[23:53:39] <cmr> incoming is literally the latest code
[23:53:53] <mark_edward> oh ok cool.
[23:53:59] <mark_edward> I HAVE TO GO TO THE SOURCE
[23:54:12] <mark_edward> sorry, just wanted to be dramatic
[23:55:02] *** Joins: raze (raze@moz-4E6675AF.bredband.comhem.se)
[23:56:18] <Jesse> is there an anigif for that?
[23:58:16] *** Joins: snearch (snearch@moz-DBC0E338.pool.mediaways.net)
[23:59:38] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
