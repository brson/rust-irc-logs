[00:00:04] <eddyb> cmr: ty_bot propagates
[00:00:08] <eddyb> rusti: loop {}; ()
[00:00:08] <cmr> but found `<generic integer #0>`
[00:00:10] -rusti- pastebinned 10 lines of output: http://ix.io/9RZ
[00:00:11] <cmr> Who fixed that!
[00:00:24] <eddyb> cmr: put it in TWiR
[00:00:38] <eddyb> rusti: loop {} return
[00:00:40] -rusti- pastebinned 10 lines of output: http://ix.io/9RZ
[00:00:42] <jensnockert> bjz: On most processors, enabling exceptions are a per-context thing. So I guess they would be enabled per task.
[00:00:49] <dbaupp> cmr: me!
[00:00:51] <cmr> dbaupp: <3
[00:00:51] <bjz> jensnockert: 754 seems rather reliant on global stuff for exceptions, but I could have misinterpreted
[00:00:52] <eddyb> rusti: loop {} return; ()
[00:00:55] <eddyb> gaaaaah
[00:00:55] -rusti- pastebinned 10 lines of output: http://ix.io/9RZ
[00:01:00] <bjz> jensnockert: oh, that's good
[00:01:02] <eddyb> ty_bot is poison
[00:01:14] <cmr> rusti: fn foo() { loop {} } foo(); 42
[00:01:19] -rusti- timeout triggered!
[00:01:20] <dbaupp> cmr: it's not a brilliant fix :P
[00:01:25] <jensnockert> bjz: On x86 you can flip them on and of by writing to a control register.
[00:01:26] <cmr> dbaupp: it's better than it was.
[00:01:38] <dbaupp> cmr: yup
[00:02:19] <bjz> jensnockert: we probably need a really good test-suite for this kind of stuff
[00:02:35] <eddyb> cmr: that works just like fn foo() {fail!()}, right?
[00:02:53] <cmr> rusti: fn foo() { fail!() } foo(); 42
[00:02:54] <bjz> jensnockert: is it a losing battle to try and get is working consistently across platforms though?
[00:02:54] -rusti- task '<main>' failed at 'explicit failure', <anon>:10
[00:02:55] -rusti- application terminated with error code 101
[00:03:18] <jensnockert> bjz: Depends on what platforms we are talking about, x86, MIPS and ARM should be fine.
[00:03:24] <jensnockert> bjz: GPUs, not so much.
[00:03:43] <bjz> heh
[00:03:48] *** Joins: canhtak (canhtak@moz-6C22A50C.wl.t.ulaval.ca)
[00:04:41] <bjz> jensnockert: we are also think of de-implementing the eq and ordering traits for floats
[00:05:03] <jensnockert> As in, not implementing them for floats?
[00:05:13] <bjz> jensnockert: yeah
[00:05:25] <bjz> jensnockert: like sml does
[00:05:36] <jensnockert> Seems weird, considering they are mostly ordered.
[00:05:38] <cmr> what does sml do?
[00:05:39] <eddyb> so we can have Eq shortcircuit with a reference compare?
[00:05:46] <eddyb> woo \o/
[00:05:47] <cmr> eddyb: still no, float isn't the only op.
[00:05:56] <cmr> *type with non-total ordering
[00:05:58] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:06:02] <bjz> jensnockert: ieee does define a totalOrder fn
[00:06:09] <cmr> if we change eq to require extrinsic total ordering, sure.
[00:07:07] <eddyb> NaN can die
[00:07:36] <cmr> it's not just NaN
[00:08:05] <cmr> SQL null, and basically any type that's going to be dealing with real data.
[00:08:07] <jensnockert> bjz: Yes, but it doesn't really make floats fully ordered.
[00:08:19] <cmr> for example you have two "people" structs.
[00:08:19] <jensnockert> bjz: That's just a neat workaround.
[00:08:20] <bjz> jensnockert: no, agreed
[00:08:29] <cmr> different name, same ID (of some sort)
[00:08:39] <cmr> you want them to compare equal, even if they aren't referentially equal.
[00:08:43] <bjz> http://i.imgur.com/IllBcoO.png
[00:09:08] <strcat> cmr: meh, SQL null is dumb
[00:09:11] <strcat> just normalize the data
[00:09:13] <strcat> misfeature ;p
[00:09:21] <cmr> or handles corresponding to external data; you fetch it on access to compare.
[00:09:27] <bjz> jensnockert: we need a 'HackilyOrd' trait
[00:09:28] <jensnockert> bjz: Your pages must be a lot larger, mine's on page 44. ;)
[00:09:38] <jensnockert> TotalOrder vs. Order trait ;)
[00:09:44] <dbaupp> strcat: eddyb said #llvm said you should ping your patch for review again
[00:09:49] <jensnockert> Didn't someone implement that already?
[00:09:50] <dbaupp> (btw)
[00:10:07] <cmr> (and two subsequent fetches could fetch different things!)
[00:10:10] <eddyb> strcat: oh, yeah, they sound helpful :D
[00:10:25] <bjz> jensnockert: ask strcat on his opinions on std::cmp
[00:10:31] <bjz> :P
[00:10:38] <jensnockert> bjz: Would rather not.
[00:10:42] <bjz> hah!
[00:11:47] <jensnockert> Oh well, as long as they implement < and friends, I don't mind super-much if it doesn't support the trait.
[00:12:00] <jensnockert> The same with == and the other trait.
[00:12:21] <jensnockert> (Or if they support it using totalOrder and bitwise equality)
[00:18:59] <jensnockert> That might even be advantageous for people implementing data structures I guess.
[00:19:43] <bjz> strcat: ^?
[00:22:30] <strcat> nmatsakis: with DST, can ~T be 3 words and &T two? where the dynamic part is just what they have a ptr to
[00:22:36] <strcat> or do both have to be 3 or 2
[00:23:09] <strcat> eddyb: *shrug*, I don't really care about that LLVM patch anymore anyways
[00:23:34] <strcat> eddyb: I care about the mergefunc one which isn't mine, but rather someone who asked me to track down some samples and then fixed it
[00:23:51] <eddyb> strcat: ping that one, if you can. idk
[00:24:01] <eddyb> strcat: and why would you want ~Trait to be 3 words?
[00:24:05] <eddyb> they should all be two
[00:25:44] <strcat> sorry ~[T]
[00:25:45] <strcat> not ~T
[00:25:55] <eddyb> oh. it would be an odd one
[00:26:15] <eddyb> strcat: Rc<[T]> can't be three words
[00:26:31] <eddyb> you need Rc<Vec<T>> for growable + shared
[00:26:40] <strcat> both are immutable ;p
[00:26:53] <eddyb> well, Rc<RefCell<Vec<T>>>
[00:27:09] <strcat> anyway
[00:27:15] <strcat> I just don't know if I should add Vec<T>
[00:27:21] <strcat> or put the work in to replace ~[T]
[00:28:14] <eddyb> strcat: you should. I wanted to mark ~[T] growable methods as #[deprecated], never got to it
[00:28:35] <strcat> by replace ~[T] I mean make it the new representation
[00:28:40] <strcat> rather than having Vec<T>
[00:28:45] <eddyb> you should add Vec<T>, that is
[00:30:36] <eddyb> strcat: to keep the DST invariant, ~[T] needs to have the same repr as Uniq<[T]>, which would use *[T] internally
[00:31:21] <eddyb> maybe that makes no sense, I don't know
[00:32:25] <strcat> just seems so pointless to have a distinction between ~[T] and Vec<[T]>
[00:32:31] <strcat> it's more complex than not having DST
[00:32:52] <eddyb> *Vec<T>
[00:32:54] <cmr> wouldn't ~[T] be Vec<T>, not Vec<[T]>?
[00:33:17] <strcat> cmr: I have no idea what it would be
[00:33:33] <strcat> as soon as someone tells be definitively, I can actually work on landing the new vector representation
[00:33:48] <strcat> I'm not going to spend a bunch of time switching ~[T] to a new representation only to have DST reduce it to 2 words
[00:34:14] <eddyb> that's why I won't do it
[00:34:53] <eddyb> deprecating libstd methods would help us asses the situation
[00:36:27] <eddyb> strcat: immutable data structures would use ~[T], that's a lot of syntax/rustc
[00:36:30] <strcat> you can't deprecate something without a replacement
[00:36:34] <strcat> eddyb: but why?
[00:36:40] <strcat> it's hardly worth having two owned vector types
[00:36:44] <strcat> to save a word
[00:36:49] <strcat> or are you telling me it is?
[00:37:22] <eddyb> strcat: I believe Vec<T> will be rarely required
[00:37:39] <eddyb> maybe &mut ~[T]
[00:37:57] <strcat> overly complicated
[00:38:12] <eddyb> as in, &mut ~[T] arguments might need Vec<T>
[00:38:16] <eddyb> strcat: Rust likes immutable by default. why waste a word :)?
[00:38:21] <strcat> it's not immutable
[00:38:37] <eddyb> well, you know what I mean
[00:38:44] <strcat> we should be throwing away the capacity and getting it back for no reason
[00:38:52] <eddyb> most of the time you're working with slices
[00:38:54] <strcat> and having a separation into 2 awkward types for no reason
[00:39:08] <strcat> eddyb: sure, and rust decides to make life even harder by splitting the capacity out
[00:39:21] <strcat> you can certainly resize ~[T] without the capacity, it'll just be really slow
[00:39:31] <strcat> why do we need both?
[00:39:47] <strcat> to me, it seems like there was a decision that DST was a good thing
[00:39:58] <eddyb> (TM)
[00:40:02] <strcat> and making vectors more complicated is okay
[00:40:12] <strcat> I don't understand what the benefit will be
[00:40:19] <strcat> what does it let you do that you couldn't do before?
[00:40:36] <eddyb> strcat: Rc<RefCell<Trait>>
[00:40:40] <cmr> I don't think the ~[T] etc part of DST are at all decided upon, they were just a suggestion. are they even in the proposal?
[00:40:49] <strcat> eddyb: no, you won't be able to do that afaik
[00:40:53] <eddyb> strcat: why?
[00:41:03] <strcat> eddyb: because RefCell won't support dynamically sized types...
[00:41:11] <eddyb> Rc<Trait> will work, it's explicitly so in DST5
[00:41:15] <strcat> yes
[00:41:17] <eddyb> strcat: why?
[00:41:18] <strcat> Rc<Trait> will work
[00:41:24] <strcat> eddyb: how can RefCell support DST?
[00:41:28] <strcat> RefCell<[T]> alone
[00:41:30] <strcat> how does that work?
[00:41:40] <eddyb> how does RcBox<Trait> work?
[00:41:48] <strcat> an allocation
[00:41:53] <strcat> RefCell doesn't allocate
[00:42:06] <eddyb> you mean indirection?
[00:42:07] *** Quits: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se) (Connection reset by peer)
[00:42:16] <strcat> I mean what I said ;p
[00:42:20] <eddyb> RefCell<int> would be a sized type
[00:42:26] <eddyb> just like RcBox<int>
[00:42:33] <eddyb> RefCell<Trait> would be unsized
[00:42:33] *** Joins: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se)
[00:42:48] <strcat> eddyb: so what is RefCell storing...
[00:42:52] <eddyb> RcBox<RefCell<Trait>> should work (and be an unsized type)
[00:43:09] <eddyb> strcat: see how RcBox works in DST5
[00:43:09] *** Quits: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se) (Connection reset by peer)
[00:43:17] <eddyb> now copy exactly that for RefCell :P
[00:43:25] <strcat> eddyb: it's not possible
[00:43:33] *** Joins: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se)
[00:43:35] <eddyb> it's harder
[00:43:36] <strcat> Rc<Trait> and RcMut<Trait> can certainly work
[00:43:38] <eddyb> far from impossible
[00:43:59] <strcat> eddyb: it's not possible. where is the RefCell
[00:44:07] <strcat> RefCell<Trait>
[00:44:11] <strcat> where are the RefCell fields
[00:44:25] <eddyb> before the inner type's fields
[00:44:27] <eddyb> just like RcBox
[00:44:37] <strcat> eddyb: so RefCell<[T]>
[00:44:39] <strcat> bam, overflow
[00:44:41] <strcat> unsafety
[00:44:45] <eddyb> why?
[00:44:58] <strcat> because you can't just add a field to an allocation and use the existing vector code
[00:45:14] <strcat> anyway
[00:45:16] <strcat> you're telling me that
[00:45:20] <strcat> RefCell<[T]>
[00:45:22] <strcat> is 
[00:45:22] <eddyb> strcat: you can't change the length of a &[T]
[00:45:39] <eddyb> RefCell<[T]> is {refcount, [T]}
[00:45:46] <strcat> { len, cap, ptr } -> |refcell fields|elements|
[00:45:52] <strcat> eddyb: which makes no sense at all
[00:45:56] <strcat> you can't make the allocation bigger
[00:45:58] <eddyb> no capacity
[00:46:01] <strcat> it introduces an overflow hazard
[00:46:03] <eddyb> just length
[00:46:07] <strcat> eddyb: same thing
[00:46:10] <strcat> introduces overflow hazard
[00:46:14] <eddyb> HOW?
[00:46:19] <strcat> think about it...
[00:46:19] <eddyb> you can't change the length
[00:46:22] <strcat> doesn't matter
[00:46:31] <eddyb> you can only allocate it with a certain length
[00:46:41] <strcat> you can put an existing thing in a RefCell
[00:46:41] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[00:46:41] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14271d5c4 to 14d0f6ef0: 02http://git.io/N3iJvQ
[00:46:41] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[00:46:43] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[00:46:43] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/SX6qtg
[00:46:43] <ghrust> 13rust/06auto 14f52bd5e 15Brian Anderson: rustc: Feature gate `log_syntax!`. Closes #11602
[00:46:43] <ghrust> 13rust/06auto 14c0578b4 15bors: auto merge of #11632 : brson/rust/issue-11602, r=huonw
[00:46:43] <strcat> swap it in
[00:46:44] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[00:46:57] <eddyb> &RefCell<[T, ..N]> coerces to &RefCell<[T]>
[00:47:06] <eddyb> the latter is a fat pointer containing N
[00:47:17] <strcat> so I ave an existing vector
[00:47:22] <strcat> I swap it into a RefCell
[00:47:25] <strcat> how exactly does that work?
[00:47:36] <eddyb> how can you swap something into a RefCell?
[00:47:40] <strcat> it can't resize the allocation to put the refcell fields in
[00:47:45] <eddyb> nope, it can't
[00:47:45] <strcat> eddyb: get &mut, swap it in
[00:47:55] <eddyb> strcat: it's &mut [T]
[00:47:59] <strcat> you can swap into &mut
[00:48:08] <eddyb> or do you mean &mut RefCell<[T]>?
[00:48:11] <strcat> no
[00:48:19] <strcat> I mean RefCell has a function returning &mut
[00:48:22] <eddyb> yes
[00:48:24] <eddyb> &mut [T]
[00:48:36] <eddyb> which is a fixed-dynamic-length vector
[00:48:47] <eddyb> s/fixed/non-growable/
[00:49:21] <eddyb> come on, you know more than me :/
[00:51:07] <strcat> eddyb: so where does ~RefCell put the refcell
[00:51:15] <eddyb> on the heap
[00:53:38] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[00:54:07] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[00:55:52] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[00:57:30] <eddyb> strcat: I still don't see any problem with Rc<RefCell<Trait>>
[00:58:15] <eddyb> strcat: I also believe I can implement Objective-C in Rust
[00:58:21] <eddyb> just for kicks
[00:58:44] <eddyb> RWArc<Many> is the missing link
[00:58:52] <eddyb> (I hate Objective-C, for the record)
[01:05:13] *** Joins: lpy (lpy@12172131.F09091A8.1348A864.IP)
[01:07:14] *** kimundi is now known as zz_kimundi
[01:32:46] *** Quits: dbaupp (Thunderbir@moz-54209D42.lns20.syd6.internode.on.net) (Ping timeout)
[01:33:32] *** Joins: dbaupp (Thunderbir@moz-BFB46368.lns20.syd6.internode.on.net)
[01:38:55] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[01:39:25] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[01:53:49] *** Joins: gwty (gwtypc@79FFA4AA.D0E9703E.8A00C703.IP)
[01:57:04] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[02:04:25] *** Quits: lpy (lpy@12172131.F09091A8.1348A864.IP) (Client exited)
[02:06:41] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[02:06:41] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/SX6qtg
[02:06:41] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[02:11:40] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[02:11:40] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/YDi4cA
[02:11:40] <ghrust> 13rust/06auto 1470243e3 15musitdev: Squashed commit of the following:...
[02:11:40] <ghrust> 13rust/06auto 14ba5a2a1 15musitdev: Correct MemWriter inner call to unwrap.
[02:11:40] <ghrust> 13rust/06auto 14b9f5db9 15bors: auto merge of #10801 : musitdev/rust/jsondoc2, r=cmr...
[02:11:42] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[02:15:53] *** Quits: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP) (Ping timeout)
[02:22:20] <cmr> dbaupp: last-minute triage? :p
[02:23:49] <dbaupp> cmr: always
[02:25:33] <brson> re-r? https://github.com/mozilla/rust/pull/11656
[02:33:53] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[02:34:01] *** Quits: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se) (Quit: Ex-Chat)
[02:37:07] <cmr> Anyone have any theories on the sudden increase in contributions?
[02:38:21] <dbaupp> cmr: as in, why the queue is regularly so long?
[02:38:43] <cmr> acrichto: do you mind if I make TCPStream splittable, or do you want to wait for a more well-thought-out path forward?
[02:38:52] <cmr> dbaupp: well no, that's to be expected, but the number of PRs/week is up
[02:39:09] <dbaupp> cmr: compared to?
[02:39:18] <cmr> the past few months.
[02:39:21] <dbaupp> (do you happen to have the data in a CSV format/graph?)
[02:39:36] <cmr> it was at times low 40s, but is now in the low 70s!
[02:39:42] <cmr> no, but I could get that data.
[02:39:48] <nrc> Christmas holidays at universities?
[02:39:49] <cmr> I'm just looking at TWiR
[02:43:04] <acrichto> cmr: I'd like to wait for a more well-thought-out path, not that we won't do that though
[02:44:44] <cmr> acrichto: oh, and that reminds me. do you still want perf traces from the HTTP benchmarks?
[02:45:10] <acrichto> cmr: yeah I'd love them, it makes no sense to me that libgreen is 2x slower. Could you also get traces with RUST_THREADS=1 and without that?
[02:46:27] <cmr> acrichto: sure. I'll do the 8-concurrency test, since that's where the largest difference is.
[02:46:38] <acrichto> cool
[02:47:04] <cmr> .. after I finish twir
[02:47:09] * cmr gets sidetracked
[02:47:58] <dbaupp> 40% of the queue is approved
[02:49:46] * acrichto wants to see the queue under 30
[02:50:09] <cmr> I don't remember the last time that was true.
[02:50:17] <dbaupp> if everything lands (and no-one opens new PRs), that will be true
[02:50:31] <acrichto> I don't think we'll actually get to that point
[02:51:32] <cmr> I think we can.
[02:51:48] <acrichto> bors, get going!
[02:52:25] <dbaupp> cmr: did the try builds for #10460 pass?
[02:53:11] <cmr> dbaupp: no
[02:53:24] <dbaupp> :(
[02:53:30] <cmr> dbaupp: runtime explosions on freebsd and windows.
[02:53:39] <cmr> ran out of time allocated for it.
[03:06:39] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[03:06:39] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/LHwdFA
[03:06:39] <ghrust> 13rust/06auto 14d2e3133 15Dmitry Vasiliev: Add @Spell clusters to Vim syntax file...
[03:06:39] <ghrust> 13rust/06auto 14dbce62c 15bors: auto merge of #11311 : hdima/rust/vim-syntax-spell-check, r=cmr...
[03:06:40] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[03:10:47] <larsberg> acrichto: thanks for all the android servo help - got it :-) http://www.youtube.com/watch?v=RjKYCVFg7Ik
[03:10:53] *** Quits: zz_kimundi (kimundi@moz-EAE0F638.dip0.t-ipconnect.de) (Ping timeout)
[03:11:20] <acrichto> larsberg: that's awesome!
[03:11:48] <cmr> that's a loading time.
[03:11:51] <larsberg> thanks! we've got, umm, some perf work to do :-) And HiDPI mode would be nice so the font doesn't look so tiny...
[03:12:04] <larsberg> cmr: dramatic... effect...
[03:13:06] *** Quits: dbaupp (Thunderbir@moz-BFB46368.lns20.syd6.internode.on.net) (Ping timeout)
[03:14:19] *** Joins: zz_kimundi (kimundi@moz-F79A61BC.dip0.t-ipconnect.de)
[03:14:21] *** zz_kimundi is now known as kimundi
[03:17:17] *** Joins: dbaupp (Thunderbir@moz-A840EB3D.lns20.syd6.internode.on.net)
[03:19:42] <brson> larsberg: very cool
[03:21:20] <dbaupp> r? https://github.com/mozilla/rust/pull/11657
[03:23:55] *** Quits: ktt3ja (ktt3ja@moz-54586A12.washdc.fios.verizon.net) (Quit: Leaving)
[03:25:51] <larsberg> brson: thanks! I'm excited to see it on mobile hardware...
[03:31:35] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[03:31:46] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[03:32:48] <dbaupp> What term do we use for `match <this thing> { ... }`?
[03:33:48] <cmr> I call it the rhs.
[03:33:51] <cmr> I think the manual does too.
[03:33:55] <dbaupp> "matchee"? "condition" (to mirror `if` and `while`)?
[03:33:56] <dbaupp> oh
[03:34:23] <cmr> "rhs" doesn't really make sense since there's no "lhs", but meh.
[03:34:30] <dbaupp> yeah
[03:34:39] <dbaupp> and it's actually on the left of the rest of the match
[03:34:43] <cmr> yup :p
[03:35:23] <dbaupp> manual calls it "head expression"
[03:35:51] <cmr> what a weird name.
[03:36:11] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[03:36:35] <dbaupp> less weird than RHS :P
[03:36:45] <cmr> maybe >_>
[03:40:31] <cmr> acrichto: wait, *YOU* developed Joule?
[03:40:43] <cmr> acrichto: I remember reading all about it when I was visiting CMU!
[03:41:26] <cmr> what a small world.
[03:44:21] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[03:45:00] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[03:46:41] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[03:47:23] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: Leaving)
[03:47:29] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[03:52:26] *** Joins: jsonnull (Thunderbir@E86DD23.582C899D.494A0F8B.IP)
[03:58:57] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[04:08:54] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:22:03] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[04:23:02] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[04:26:36] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[04:26:36] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/LHwdFA
[04:26:36] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[04:28:24] <cmr> acrichto: so I can't get perf traces from rust-http right now since it seems rvalue lifetimes broke it.
[04:31:49] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[04:31:50] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/22jtkQ
[04:31:50] <ghrust> 13rust/06auto 14065f936 15Div Shekhar: doc: Boxes diagram shows enum value inside box.
[04:31:50] <ghrust> 13rust/06auto 148f93d39 15Div Shekhar: doc: add note below diagram about memory layout.
[04:31:50] <ghrust> 13rust/06auto 141a9641b 15bors: auto merge of #11567 : divtxt/rust/master, r=cmr...
[04:31:52] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[04:35:25] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:44:48] <sfackler> cmr: is it the &'static thing?
[04:44:55] <cmr> sfackler: I think so yeah
[04:44:59] <cmr> it's with bytes!()
[04:46:10] <sfackler> there's some weird issues with static lifetime inference in general
[04:46:51] <sfackler> this used to work (I think) but doesn't now: "struct Foo { f: &'static [int] } let a = Foo { f: &'static [10] };"
[04:48:08] <sfackler> ahgh, implicitly copyable structs are :(
[04:53:05] <acrichto> cmr: you know about joule?!
[04:53:22] <cmr> acrichto: yeah!
[04:53:23] <acrichto> cmr: I thought only me an robbie knew what that was
[04:53:26] <cmr> hahah
[04:53:38] <acrichto> (robbie is sitting next to me btw)
[04:53:46] <acrichto> we are both very amused that anyone else on the planet knows what that is
[04:53:51] <cmr> I was actually working on my own lua replacement during that sleeping bag weekend.
[04:54:08] <cmr> There was stuff about it in one of the various miscelennia scattered about while I was waiting for my admission interview.
[04:54:21] <acrichto> where'd you hear about it?
[04:54:27] <acrichto> like what part of the sleeping bag weekend
[04:54:40] <cmr> oh it was right at the end.
[04:54:50] <cmr> I think there was like a senior project portfolio or something?
[04:55:06] <acrichto> aaah I guess that would make sense
[04:55:11] <acrichto> I'm surprised we stood out at all
[04:55:24] * dbaupp hates the edit-compile cycle of adding a lint which causes errors in librustc
[04:55:46] <cmr> keywords: lua, jit, llvm.
[04:55:50] <cmr> it had my interest at that.
[04:56:03] <acrichto> ah that makes sense lol
[04:56:28] <acrichto> cmr: http://www.contrib.andrew.cmu.edu/~acrichto/joule.pdf
[04:56:38] <cmr> ohh shiny
[04:59:28] <sfackler> NaN boxing seems pretty crazy
[04:59:32] <cmr> it does.
[04:59:37] <cmr> I hadn't heard of that technique before.
[05:00:02] <acrichto> nan boxing is insane
[05:00:13] <acrichto> it ended up being like the simplest thing though lol
[05:00:18] <acrichto> gc, so many days working on gc
[05:00:28] <sfackler> what happens to functions that live high in the 64bit address space? "just don't put them there"?
[05:00:40] <acrichto> turns out x86 only has a 48 bit address space
[05:00:45] <acrichto> so nothing ever uses the upper 16 bits
[05:01:01] <acrichto> upper 16 bits are either all 0 or all 1
[05:01:08] <acrichto> and I think that on linux all 1 == the kernel
[05:01:13] <sfackler> oh, I thought the middle chunk of memory was the part that was empty
[05:02:23] <dbaupp> acrichto: I thought x64 had a 48 bit address space and the kernel stole the high bit of that, leaving 47 for applications?
[05:02:48] <cmr> it still uses the full 64-bits for representing pointers.
[05:03:02] <cmr> but normalization requires all the unused bits be 0 or 1 when actually using it as a pointer.
[05:03:44] <acrichto> dbaupp: ah that may be right as well
[05:03:53] <acrichto> I don't think we ever understood it to that level of detail
[05:04:03] <acrichto> we just learned that everything would actually fit into 48 bits
[05:04:13] <cmr> that's how higher-half kernels usually work.
[05:04:20] <cmr> which is every kernel that's actually used.
[05:07:59] *** Joins: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net)
[05:09:31] *** Quits: new_one_afk (new_one@DE471074.940F5E39.B3C0173E.IP) (Quit: leaving)
[05:09:57] *** Quits: Kxepal (Miranda@moz-B7304D9C.pppoe.mtu-net.ru) (Ping timeout)
[05:12:41] *** Joins: Kxepal (Miranda@moz-33C7CDB3.pppoe.mtu-net.ru)
[05:14:42] <strcat> acrichto: x86_64 currently makes use of 48-bit address space
[05:14:58] <strcat> but it could be extended to 64-bit, and it would be backwards compatible with theoretically correct software
[05:15:27] <strcat> and yeah, you lose a bit to distinguish the kernel from userland
[05:15:30] <strcat> so you have 128TiB
[05:15:38] <strcat> try calling mmap a bunch and you'll see that's how far it gets
[05:15:58] <strcat> (assuming you don't hit the arbitrary mapping count limit first, which is kind of obsolete)
[05:22:37] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: Leaving)
[05:23:55] <strcat> seems like for physical memory you get 46-bit max
[05:24:00] <strcat> on linux at least
[05:25:14] *** Quits: blank_na1e (blank_name@E7821509.94CCB18F.53C6B850.IP) (Ping timeout)
[05:25:43] <sfackler> strcat: is SipHash-2-4 a reasonable choice to use with CHD PHF generation?
[05:26:37] <strcat> sfackler: probably not
[05:27:07] <sfackler> too slow?
[05:27:08] <strcat> you don't need the guarantees SipHash provides if you're building a perfect hash function, so it will be needlessly slow
[05:27:11] <strcat> sfackler: yes
[05:27:35] <sfackler> do you know of something better off the top of your head?
[05:27:53] <strcat> well I would look at what cmph does
[05:28:01] <sfackler> the paper seems to use Jenkins' function
[05:28:44] <strcat> sfackler: a major issue with SipHash is that it has an expensive setup and shutdown
[05:30:58] <strcat> like with 64 byte strings it's probably 3-4 cycles per byte
[05:31:05] <sfackler> looks like SpookyHash is supposedly bettern than Jenkins' now. 30 cycle startup and then 1 cycle per byte
[05:31:17] <strcat> but with 4/8 byte? it's going to be huge
[05:32:15] <strcat> the SipHash paper says 2 cycles per byte for the simple C implementation
[05:33:30] <sfackler> looks like SipHash's start up is _way_ more expensive than 30 cycles, so I guess I'll switch to SpookyHash
[05:33:55] <strcat> yeah it's something like 100 cycles just for the startup cost
[05:33:59] <strcat> 80-100
[05:34:08] <strcat> it's ridiculously bad for integers, which we're using it for heavily...
[05:35:55] <strcat> cmr: owned boxes can still contain managed ptrs btw
[05:35:58] <strcat> cmr: it never mattered
[05:36:24] <cmr> strcat: it's going to be hopelessly broken though, isn't it?
[05:36:28] <strcat> cmr: nope
[05:36:36] <strcat> cmr: it was broken before in many cases and fixed now
[05:36:40] <strcat> the headers on ~ were never used
[05:36:42] <strcat> graydon's gc used them
[05:36:43] <cmr> ahhh ok.
[05:36:45] <strcat> but it never landed
[05:36:45] <cmr> let me fix that then.
[05:37:27] *** Joins: blank_name (blank_name@E7821509.94CCB18F.53C6B850.IP)
[05:50:09] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[05:50:34] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[05:51:39] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[05:51:39] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/22jtkQ
[05:51:39] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[05:56:38] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[05:56:38] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/L1IMqw
[05:56:38] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[05:59:11] <dbaupp> acrichto: ping
[05:59:27] <acrichto> dbaupp: pong
[06:00:21] <dbaupp> acrichto: is there an easy way to check if an item is exported from its module? (i.e. more specific than being just exported from the whole crate)
[06:01:18] <acrichto> dbaupp: pub vs not pub?
[06:01:32] <dbaupp> acrichto: basically, yeah
[06:01:48] <sfackler> acrichto: does it make sense that logging doesn't seem to work inside of a dynamically loaded crate?
[06:01:48] <dbaupp> (but including `pub use`'d-ness, and so on.)
[06:01:50] <acrichto> as in, something more than that?
[06:01:59] <acrichto> sfackler: that does indeed make sense
[06:02:13] <dbaupp> I guess pub vs. not is probably close enough for this.
[06:02:15] <acrichto> dbaupp: but pub use'd ness only affects across the crate itself?
[06:02:19] <sfackler> ok
[06:02:33] <acrichto> sfackler: you'd need to iter_crate_map() on the dlopen'd crate map
[06:02:36] <dbaupp> acrichto: can't you have `mod foo { pub use Public = Private; struct Private; }`?
[06:02:52] <acrichto> dbaupp: oh there's a map for that if you want to check just the local module's pub exports
[06:03:10] <acrichto> dbaupp: I think it's like exp_map2 which maps (module node id => ~[reexports])
[06:03:37] <dbaupp> ok, thanks
[06:06:25] <sfackler> acrichto: I just did it myself with os::getenv and span_note :P
[06:06:40] <acrichto> hehe
[06:06:41] <sfackler> it gives more context that way anyways
[06:07:33] <sfackler> wow, I was worried about how long MPHF generation would take, but after removing all of the debug logging I can generate ~200 item tables at a 100% load factor in .004 seconds :D
[06:09:44] <strcat> sfackler: btw for small ones you probably want to do something else
[06:09:48] <strcat> gperf is aimed at small ones
[06:10:35] <sfackler> cool
[06:12:28] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[06:30:27] *** Quits: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net) (Quit: Sharp)
[06:31:38] <sfackler> man, ancient software projects are great
[06:31:40] <sfackler> "When processing large keyword sets it helps greatly to have over 8 megs of RAM."
[06:32:07] <strcat> sfackler: heh, what's that wrong?
[06:33:00] <sfackler> something tells me that most people won't have any problem allocating 8 megs of RAM to gperf :P
[06:34:23] <strcat> er
[06:34:24] <strcat> what's that from*
[06:34:36] <strcat> sfackler: the C code gperf outputs is pretty awful too ;p
[06:34:42] <strcat> it works well though...
[06:35:07] <sfackler> strcat: http://www.gnu.org/software/gperf/manual/gperf.html#Bugs
[06:35:56] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[06:36:19] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[06:39:40] *** Quits: canhtak (canhtak@moz-6C22A50C.wl.t.ulaval.ca) (Quit: canhtak)
[06:50:34] *** Quits: gwty (gwtypc@79FFA4AA.D0E9703E.8A00C703.IP) (Ping timeout)
[07:11:37] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[07:11:38] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/aZHk0Q
[07:11:38] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[07:13:19] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[07:13:29] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[07:16:36] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[07:16:36] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/At56vw
[07:16:36] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[07:19:05] *** Joins: deen_ (deen@moz-DCD53577.dip0.t-ipconnect.de)
[07:19:48] *** Quits: deen (deen@moz-7B78EB6B.dip0.t-ipconnect.de) (Ping timeout)
[07:49:56] <dbaupp> strcat: thanks (you were too quick, I had to force push a little adjustment :P )
[08:04:45] <dbaupp> r? https://github.com/mozilla/rust/pull/11663
[08:07:19] <dbaupp> acrichto: how'd you happen on #11662? isn't the delay be unnoticeable for any reasonable number of parens? (also, that's a pretty weird bug.) 
[08:08:18] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[08:12:30] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[08:12:51] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[08:13:34] *** Joins: gwty (gwtypc@79FFA4AA.D0E9703E.8A00C703.IP)
[08:14:37] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[08:15:54] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[08:28:59] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:29:14] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:29:14] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:32:07] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[08:32:07] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/2HM5lw
[08:32:07] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[08:36:51] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[08:36:52] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/p6524g
[08:36:52] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[08:43:43] *** Joins: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP)
[08:45:02] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:45:03] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:45:16] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:55:50] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[08:58:45] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Client exited)
[09:14:16] *** Joins: doomlord_ (servitor@moz-D9C46C01.range86-184.btcentralplus.com)
[09:30:53] <eddyb> cmr: please tell me you're around. I think I've figured where all the jitter in irsy is from :D
[09:30:56] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[09:31:47] *** flaper87|afk is now known as flaper87
[09:32:03] <eddyb> cmr: randomized hash functions - HashMap is overused and the randomized seeds cause random fill behavior - if you get unlucky, it will use more memory than the average
[09:32:10] <eddyb> dbaupp: ^^ what do you think?
[09:35:42] <eddyb> cmr: if you have time, I would be curious to see 3 consecutive commits, that differ somewhat significantly in memory usage, and don't really touch code (like doc changes), being ran again with deterministic /dev/urandom (if possible) :D
[09:48:43] *** Joins: lpy (lpy@481D06B8.DFDBB866.E99F7FDB.IP)
[09:50:11] <bjz> r? https://github.com/mozilla/rust/pull/11664
[09:52:00] *** Quits: lpy (lpy@481D06B8.DFDBB866.E99F7FDB.IP) (Connection reset by peer)
[09:52:17] *** Joins: lpy (lpy@481D06B8.DFDBB866.E99F7FDB.IP)
[09:54:48] *** Joins: lpy_ (lpy@F9486B15.DFDBB866.E99F7FDB.IP)
[09:54:53] *** Quits: lpy (lpy@481D06B8.DFDBB866.E99F7FDB.IP) (Ping timeout)
[09:56:46] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[09:56:46] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/kuDoTw
[09:56:46] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[09:58:37] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[10:01:51] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[10:01:51] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/FuNeZQ
[10:01:51] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[10:05:36] *** Joins: lpy (lpy@D6988B34.F4539CBC.E99F7FDB.IP)
[10:05:59] *** Quits: lpy_ (lpy@F9486B15.DFDBB866.E99F7FDB.IP) (Ping timeout)
[10:06:08] *** Quits: lpy (lpy@D6988B34.F4539CBC.E99F7FDB.IP) (Quit: Leaving...)
[10:15:11] *** Joins: lpy (lpy@7FD2B9AB.3720F6C5.952560D4.IP)
[10:15:25] *** Quits: lpy (lpy@7FD2B9AB.3720F6C5.952560D4.IP) (Client exited)
[10:15:34] *** Joins: lpy (lpy@7FD2B9AB.3720F6C5.952560D4.IP)
[10:26:52] <eddyb> rebased again :D
[10:27:38] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[10:32:14] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[10:32:35] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[10:34:26] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[10:48:48] *** Quits: gwty (gwtypc@79FFA4AA.D0E9703E.8A00C703.IP) (Ping timeout)
[11:07:09] *** Joins: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se)
[11:09:00] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[11:16:59] <bjz> dbaupp: https://github.com/mozilla/rust/pull/11664
[11:21:39] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[11:21:39] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/kxevrQ
[11:21:39] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[11:24:46] *** Quits: lpy (lpy@7FD2B9AB.3720F6C5.952560D4.IP) (Client exited)
[11:26:40] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[11:26:40] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/z-UJLA
[11:26:40] <ghrust> 13rust/06auto 14ae2a5ec 15Daniel Micay: handle zero-size allocations correctly...
[11:26:40] <ghrust> 13rust/06auto 1432d53ae 15bors: auto merge of #11635 : thestinger/rust/zero-size-alloc, r=alexcrichton...
[11:26:41] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[11:33:13] *** Joins: lpy (lpy@7FD2B9AB.3720F6C5.952560D4.IP)
[11:38:26] <eddyb> strcat: can I force stage0 std (and everything up to including rustc) to not be rebuilt when changing std?
[11:38:58] <strcat> NO_REBUILD=1
[11:39:10] <strcat> make arg, not env var
[11:39:11] <eddyb> strcat: does it work?
[11:39:14] <strcat> sometimes
[11:39:17] <eddyb> :S
[11:39:25] <strcat> eddyb: make target NO_REBUILD=1
[11:39:26] <strcat> so
[11:39:32] <strcat> make check-std-stage1 or something? I forget
[11:39:37] <eddyb> yes, I've used it before. I thought it only works for tests
[11:39:43] <eddyb> strcat: check-stage1-std
[11:44:28] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[11:44:58] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[11:46:46] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[11:52:48] <dbaupp> eddyb: it's weird that they are so stable across runs
[11:53:22] <eddyb> dbaupp: I like SipHash for this
[11:53:26] <dbaupp> eddyb: i.e. I would expect the randomisation to give a more even distribution of memory uses, rather than what seems to be binary
[11:53:44] <eddyb> maybe it's a server with low entropy, idk
[11:54:02] <dbaupp> of course, it could just be a single hashmap that is switch between alloc sizes
[11:54:13] <dbaupp> i.e. it's just at the realloc boundary
[11:54:45] <eddyb> it's relatively early on. ast_map? was your PR merged?
[11:54:49] <dbaupp> but that would imply we have a 100MB (or more) hashmap somewhere in librustc
[11:54:53] <dbaupp> yes, that landed
[11:55:03] <dbaupp> (or in libsyntax)
[11:55:06] <eddyb> dbaupp: we have a lot of hash maps
[11:55:32] <dbaupp> yes, but the memory behaviour suggests it's a single hashmap that's causing this (if it is a hashmap)
[11:55:36] <dbaupp> because there are only 2 levels
[11:56:45] <dbaupp> if there were multiple hashmaps causing wild memory use, then we'd see multiple levels from the combinations of some being large and others being small (with a different number of each for each run)
[11:56:51] <eddyb> http://huonw.github.io/isrustfastyet/mem/#2952685,fb40bdb,bf07c80 zoom in, this is interesting
[11:58:26] <eddyb> parsing noise could be IO
[11:59:27] <eddyb> what is expansion doing that's costly?
[11:59:47] <dbaupp> creating new ASTs
[12:00:06] <eddyb> that doesn't touch hashmaps
[12:00:14] <dbaupp> correct
[12:00:15] <eddyb> maybe @T is more broken than we've thought
[12:00:35] <strcat> get rid of iy then ;p
[12:01:41] <dbaupp> ok, the high mem-use ones seem to all take longer than the low one
[12:02:08] <dbaupp> and they all have a little "start up" slope at the very start, unlike the low mem use ones
[12:02:49] <eddyb> dbaupp: you know what this reminds me?
[12:03:04] <eddyb> a JIT
[12:03:57] <eddyb> strcat: can tons of indirect calls cause randomness? (I don't know much about modern CPU architecture. I've heard about "cache misses" in the past)
[12:04:23] <eddyb> we are doing bad bad things
[12:05:06] <strcat> hash table lookups are usually a cache miss if it's big
[12:05:36] <strcat> since you probably do lookups in some pattern, but it's randomly distributed
[12:06:09] <strcat> eddyb: the CPU does speculative execution, an x86 CPU has 300+ real registers
[12:06:16] <eddyb> yay
[12:06:24] <strcat> it rewrites machine code to uops
[12:06:51] <dbaupp> I would find it hard to believe that small-scale randomness like cache misses (which will balance out to be approximately the same across runs) will give such binary high/low memory use
[12:06:54] <eddyb> dbaupp: oh, wait, what if the ident interner changes the allocation patterns *which in turn* causes random behavior when allocating loads of new objects, later on
[12:07:18] <eddyb> that's a lot of random hashing
[12:07:24] <strcat> eddyb: anyway, if branch prediction fails or there's a cache miss, the pipeline stalls
[12:07:36] <eddyb> strcat: I was thinking more of virtual calls
[12:07:50] <strcat> well virtual calls don't play very well with branch prediction
[12:07:54] <eddyb> there's a lot of nonsense going on in syntax
[12:07:57] <dbaupp> I'm more inclined to believe there are external factors, which we see as long chains of high vs. low because cmr benches in batches
[12:08:22] <eddyb> dbaupp: "turning /dev/urandom off" (if possible) will eliminate a suspect :)
[12:08:49] <eddyb> we shouldn't be using SipHash anyway
[12:08:50] <dbaupp> well, setting it to a constant
[12:09:04] <eddyb> dbaupp: link it to /dev/zero?
[12:09:08] <dbaupp> making it use /dev/zero, yeah
[12:09:37] <eddyb> not on the same machine you use SSL, though :P
[12:10:09] <dbaupp> should be fine, no one will guess you're using /dev/zero for randomness, so it'll be even more secure :P
[12:11:39] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[12:11:39] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1432d53ae to 1453733c8: 02http://git.io/N3iJvQ
[12:11:39] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[12:11:40] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[12:11:40] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/y7rALw
[12:11:40] <ghrust> 13rust/06auto 14fe24dd6 15Alex Crichton: rustuv: Re-work sockaddr glue to not use malloc...
[12:11:40] <ghrust> 13rust/06auto 144487d2e 15bors: auto merge of #11636 : alexcrichton/rust/purge-all-the-c, r=brson...
[12:11:40] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[12:21:34] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[12:31:58] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[12:31:58] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 144487d2e to 1453733c8: 02http://git.io/N3iJvQ
[12:31:58] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[12:34:30] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[12:34:51] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[12:36:43] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[12:44:30] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Connection reset by peer)
[12:46:16] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[13:00:06] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[13:14:53] <bjz> dbaupp: https://github.com/mozilla/rust/pull/11664#issuecomment-32707957
[13:15:34] <dbaupp> bjz: already replied :P
[13:18:21] *** Joins: rca (rcatolino@moz-2FAE8B7B.adsl.proxad.net)
[13:20:46] <bjz> dbaupp: is "Returns `true` if `self` is equivalent to zero." the correct wording?
[13:21:15] <dbaupp> bjz: sounds reasonable, although I'd say "equal" rather than equivalent
[13:21:20] <bjz> ok
[13:21:27] <bjz> yeah, wasn't sure
[13:22:18] <bjz> like, is `*self == 0.0 || *self == -0.0` equality?
[13:23:31] <bjz> dbaupp: but I guess floats are always going to be weird
[13:41:38] <bjz> dbaupp: rebased
[13:45:18] <bjz> dbaupp: oh wait, just gotta get rid of some gunk I missed
[13:45:41] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[13:47:42] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[13:50:08] <bjz> dbaupp: okiedokie, rebased again - that should do it
[13:51:01] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[13:51:38] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[13:51:38] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/joHjhg
[13:51:38] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[13:56:37] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[13:56:37] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/u9sTsQ
[13:56:37] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[14:00:57] *** Quits: rca (rcatolino@moz-2FAE8B7B.adsl.proxad.net) (Ping timeout)
[14:01:45] <bjz> dbaupp: fixed
[14:02:17] <bjz> dbaupp: https://github.com/bjz/rust/commit/f07ac86758d1082bc91b1df9038daabc68f61e6e#diff-df3af786fbf128b98f9747b620108991R323
[14:02:23] <bjz> :P
[14:16:31] <bjz> flaper87: https://github.com/bjz/rust/commit/4af54982b4a4c016eb3abb2bf2b84bc14fa43148#commitcomment-5111612
[14:17:12] <flaper87> bjz: replied
[14:17:46] <flaper87> bjz: it's a small and perhaps pedantic nit. Sorry about that. 
[14:19:55] <bjz> no worries
[14:20:08] <bjz> I could just do: x + 0 = x       forall x âˆˆ Self
[14:20:30] <eddyb> bjz: unicode in comments? :D
[14:20:42] <dbaupp> eddyb: we already have some in our docs :P
[14:20:43] <eddyb> also, forall - isn't it that inverted A?
[14:20:47] <bjz> eddyb: well: x + 0 = x       âˆ€ x âˆˆ Self
[14:20:51] <flaper87> bjz: sounds good!
[14:20:52] <eddyb> bjz: <3
[14:20:56] <bjz> https://github.com/bjz/rust/commit/4af54982b4a4c016eb3abb2bf2b84bc14fa43148#commitcomment-5111585
[14:21:00] <flaper87> bjz: the latest :)
[14:21:03] <flaper87> and thanks!
[14:21:15] <eddyb> wait, haskell uses forall somewhere, doesn't it?
[14:21:36] <dbaupp> for polymophism
[14:21:37] <eddyb> we can go with âˆ€ and - nah it's silly
[14:22:35] <dbaupp> In haskell, their equivalent to a trait object &Trait is `forall TypeClass a => a` (or whatever the exact syntax is)
[14:23:13] <eddyb> dbaupp: is there even a difference between <T: Trait> @T and @Trait in haskell?
[14:25:53] <dbaupp> yes
[14:26:08] <dbaupp> [@Trait] for example
[14:30:25] *** Quits: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se) (Quit: Ex-Chat)
[14:38:58] <bjz> ok, pushed the changes
[14:56:08] <bjz> flaper87: squoooshed
[14:57:10] <flaper87> bjz: awesome, LGTM! Thanks!
[14:57:55] <flaper87> bjz: btw, I also wanted to chat with you about the Real trait. Will you be around in ~30mins ?
[14:58:01] <flaper87> bjz: gotta step out for a bit
[14:58:28] <bjz> I might be, but I'm beginning to feel rather sleepy - 2am here
[14:58:45] <bjz> ping me and I might talk, if not I'm asleep :P
[15:11:42] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[15:11:42] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/xTH3dw
[15:11:42] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[15:16:33] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[15:16:33] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/0qtLWQ
[15:16:34] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[15:16:35] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[15:16:35] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/eudZZg
[15:16:35] <ghrust> 13rust/06auto 14f13086f 15Erick Tryzelaar: Expose platform independent path separators
[15:16:35] <ghrust> 13rust/06auto 1410ba701 15bors: auto merge of #11642 : erickt/rust/path, r=huonw...
[15:16:35] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[15:24:27] <flaper87> bjz: we can talk tomorrow, that's fine! No birds will day for this! :D
[15:24:30] <flaper87> die*
[15:28:45] *** Joins: rca (rcatolino@moz-10E18C17.adsl.proxad.net)
[15:29:23] <bjz> o/
[15:29:56] <bjz> flaper87: how goes ye?
[15:31:14] <bjz> flaper87: re. Real, I'm currently working on a skeleton IEEE754 trait
[15:31:34] <flaper87> bjz: cool, is it in your num-rs repo?
[15:31:42] <flaper87> bjz: or you haven't committed it ?
[15:31:53] <bjz> not yet
[15:32:21] <bjz> I'm thinking it would be debated whether it should go into the std or libnum
[15:33:24] <bjz> by 'working' I mean looking through the spec, adding the appropriate function stubs, and putting the required behaviour into doc comments.
[15:35:10] <bjz> then perhaps I'll make a bunch of unit tests, and use libm functions to plug the holes whilst we work on implementing these things in Rust (which could be a long term project)
[15:37:10] <flaper87> bjz: agreed, what I wanted to say is that it needs some love but if you're already working on that, then fine. I'd love to discuss the impl with you when you have something working. if that's ok! :)
[15:37:20] <bjz> oh awesome
[15:37:35] <bjz> yeah, I will try and post something soon at least
[15:37:42] <bjz> it definitely needs lots of love
[15:38:00] <flaper87> bjz: by something working, I mean some idea or whatsoever, not necessarily fully implemented code
[15:38:25] <bjz> of course
[15:38:35] <flaper87> bjz: cool, thanks :)
[15:39:12] <bjz> I'm wondering if libstd should just expose the stuff that is in the llvm intrinsics
[15:39:22] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:39:45] <bjz> but on the other hand, we don't want our stdlib specification to be beholden to llvm
[15:40:17] <bjz>  /s/we don't/we may not/
[15:43:50] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[15:46:30] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[15:48:21] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[15:53:55] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[15:56:46] *** Joins: canhtak (canhtak@moz-6C22A50C.wl.t.ulaval.ca)
[16:02:08] *** Joins: yuriks (yuriks@8E8458DA.1755AC6C.F6EE4B40.IP)
[16:03:03] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[16:03:22] *** Quits: lpy (lpy@7FD2B9AB.3720F6C5.952560D4.IP) (Quit: Leaving...)
[16:23:44] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[16:26:34] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[16:26:34] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/wjeqyA
[16:26:34] <ghrust> 13rust/06auto 14b3c93b3 15Kevin Ballard: Make WindowsPath::new("C:foo").root_path() return Some("C:")
[16:26:34] <ghrust> 13rust/06auto 148df9ed5 15bors: auto merge of #11643 : kballard/rust/path-root-path, r=erickt
[16:26:35] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[16:26:37] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[16:26:37] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1410ba701 to 145512fb4: 02http://git.io/N3iJvQ
[16:26:37] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[16:34:41] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[16:57:17] *** Joins: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net)
[17:01:10] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[17:01:26] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[17:01:40] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[17:03:21] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[17:04:40] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[17:12:58] <cmr> eddyb: plausible.
[17:13:07] <eddyb> cmr: ohai :D
[17:16:36] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[17:16:37] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 148df9ed5 to 145512fb4: 02http://git.io/N3iJvQ
[17:16:37] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[17:22:53] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[17:23:15] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[17:25:01] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[17:34:01] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[17:36:58] <cmr> eddyb: so you want me to seed rustc with a constant?
[17:37:42] <eddyb> cmr: if you want to do this, sure. here's a testcase I've found: http://huonw.github.io/isrustfastyet/mem/#2952685,fb40bdb,bf07c80
[17:37:45] <cmr> dbaupp: I can't imagine any external factors having an impact on *memory usage*
[17:39:41] <eddyb> with my fmt changes, implementations are responsible for forwarding continuations (I need them for those plural/select things - they interleave arrays of arguments), which sounds dangerous
[17:40:06] <eddyb> hmm, could we force "don't ignore" for an argument in a trait method?
[17:46:48] <cmr> eddyb: so cheap hack: I catted some urandom into a file and wrote an open wrapper that redirects /dev/urandom to there.
[17:47:04] <eddyb> cmr: why not /dev/zero?
[17:47:19] <cmr> because that's probably going to break siphash
[17:47:23] <eddyb> oh, okay
[17:47:29] <cmr> and certainly xorhash, which the runtime uses.
[17:47:34] <cmr> (it needs non-zero seeds)
[17:47:59] <eddyb> FFFF :)?
[17:48:06] <eddyb> if only we had /dev/ones
[17:48:36] <cmr> /dev/{zero_through_255}
[17:48:58] <cmr> any repeating byte pattern!
[17:49:11] <cmr> I'll rebench those once this current batch is finished.
[17:50:29] <eddyb> cmr: thanks :D
[17:50:32] <cmr> np
[17:53:07] *** Parts: deen_ (deen@moz-DCD53577.dip0.t-ipconnect.de) ()
[17:55:00] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[17:55:30] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[17:56:23] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[17:57:14] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[18:01:46] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[18:01:46] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 149eb763a to 145512fb4: 02http://git.io/N3iJvQ
[18:01:46] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[18:01:46] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[18:01:46] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/gW7esw
[18:01:47] <ghrust> 13rust/06auto 141a8a901 15musitdev: Squashed commit of the following:...
[18:01:47] <ghrust> 13rust/06auto 14339946c 15musitdev: extra::json: add documentation and examples
[18:01:47] <ghrust> 13rust/06auto 14aeb5416 15musitdev: extra::json: add documentation and examples
[18:01:49] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[18:14:22] <cmr> eugh. github pages is really bad.
[18:14:34] <cmr> I refreshed the page and got an older version of my content.
[18:19:47] <strcat> The Cloudâ„¢
[18:30:41] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[18:30:41] <ghrust> 01[13rust01] 15cmr pushed 1 new commit to 06try: 02http://git.io/Z_pEuA
[18:30:41] <ghrust> 13rust/06try 1458d4d5c 15Corey Richardson: (empty commit for buildbot?)
[18:30:41] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[18:36:32] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[18:39:53] *** Joins: gwty (gwtypc@E2C142AC.FA920D05.137C914F.IP)
[18:41:55] <flaper87> how does one add an attribute to Rust? What are the bits that should be added / changed ?
[18:42:17] <eddyb> flaper87: you just query it, AFAIK
[18:42:24] <bjz> maybe look at deriving?
[18:42:28] <bjz> dunno
[18:42:33] <eddyb> deriving? sounds complicated
[18:42:38] <flaper87> bjz: you still awake ?
[18:42:40] <flaper87> :D
[18:42:45] <bjz> yeah... :[
[18:42:50] <bjz> can't sleep
[18:43:03] <flaper87> bjz: then code is your friend! 
[18:43:04] <flaper87> :D
[18:43:09] <eddyb> impl<'a, T: str::Str, F: Formatter> String<F> for T {fn fmt(s: &T, f: &mut F, then: |&mut F|) {f.pad(s.as_slice(), then);}}
[18:43:16] <eddyb> ^^ how bad do you guys think it is?
[18:43:24] <flaper87> I just need to add a 'flag' attribute
[18:43:38] <flaper87> I'll take a look at no_freeze
[18:43:39] <cmr> flaper87: you don't need to do anything special to add an attribute.
[18:43:48] <flaper87> cmr: oh, ok
[18:44:03] <cmr> flaper87: although you do need to add it to the attribute list in lint.rs
[18:44:07] <flaper87> mmh, I guess it'll just "appended" to the list of attributes
[18:44:13] <bjz> eddyb: talk to acrichto about the fmt stuff
[18:44:16] <flaper87> cmr: right
[18:44:22] <cmr> and then you check if the attribute is present wherever you need to.
[18:44:23] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[18:44:26] <bjz> eddyb: fmt is his baby :)
[18:44:32] <eddyb> acrichto: like the mess I made out of std::fmt?
[18:44:37] <eddyb> bjz: ouch, better hide now
[18:44:54] <eddyb> once I finish with everything in fmt/mod.rs, I'll gist it
[18:46:38] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[18:46:38] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/MenMLg
[18:46:38] <ghrust> 13rust/06auto 14188167c 15Matthias Einwag: Introduced a chapter that describes how to perform callbacks from C to Rust
[18:46:38] <ghrust> 13rust/06auto 1467d83ac 15Matthias Einwag: Further details on channel idea
[18:46:38] <ghrust> 13rust/06auto 14393191d 15Matthias Einwag: Update guide-ffi.md...
[18:46:40] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[18:47:41] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[18:48:19] <eddyb> let mut buf = [0u8, ..64];
[18:48:35] <eddyb> at least to_str_bytes is using the stack :D
[19:03:17] *** Quits: luz (lucy@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[19:04:04] *** Joins: luz (lucy@moz-CD18B14B.customer.cdi.no)
[19:04:26] <eddyb> acrichto: https://gist.github.com/eddyb/f3ef987ea2d965d598d5 Ctrl+F not(stage0) if you want to see something scary
[19:04:37] *** Quits: luz (lucy@moz-CD18B14B.customer.cdi.no) (Quit: 04â†)
[19:04:57] *** Joins: luz (lucy@moz-CD18B14B.customer.cdi.no)
[19:08:46] *** Quits: luz (lucy@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[19:09:04] *** Joins: luz (lucy@moz-CD18B14B.customer.cdi.no)
[19:13:20] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[19:24:23] *** flaper87 is now known as flaper87|afk
[19:35:08] <bjz> wow, long bors queue
[19:35:19] <bjz> :)
[19:35:46] <cmr> it's longer now than when I went to bed 13 hours ago.
[19:35:56] <bjz> heh
[19:36:11] <bjz> at least it means stuff is happening
[19:36:16] <bjz> well
[19:36:25] <bjz> yeh
[19:41:41] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[19:41:41] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14421655a to 145512fb4: 02http://git.io/N3iJvQ
[19:41:41] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[19:41:42] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[19:41:42] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/yJvkkg
[19:41:42] <ghrust> 13rust/06auto 141a8a901 15musitdev: Squashed commit of the following:...
[19:41:42] <ghrust> 13rust/06auto 14339946c 15musitdev: extra::json: add documentation and examples
[19:41:43] <ghrust> 13rust/06auto 14aeb5416 15musitdev: extra::json: add documentation and examples
[19:41:45] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[19:56:04] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[19:57:35] *** Quits: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net) (Quit: Sharp)
[19:57:55] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[19:59:31] *** Joins: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net)
[20:02:03] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[20:18:35] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[20:27:22] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[20:29:04] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[20:33:48] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[20:48:22] *** Quits: c74d (c74d@moz-E2EAC718.oc.oc.cox.net) (Ping timeout)
[20:48:52] *** Joins: c74d (c74d@moz-E2EAC718.oc.oc.cox.net)
[20:49:40] <bjz> what doe it normally indicate if the formatting checks fail silently?
[20:49:47] <bjz> check: formatting
[20:49:50] <bjz> make: *** [tidy] Error 1
[20:52:17] <bjz> I tried make clean, then make check, but it still failed
[20:52:55] <bjz> also ../configure; make check
[20:54:35] <bjz> here's the full error: https://gist.github.com/bjz/5b53e93319426ad05884
[20:54:47] <bjz> cmr: any ideas?
[21:05:38] *** flaper87|afk is now known as flaper87
[21:09:01] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[21:09:34] <cmr> bjz: 
[21:09:36] <cmr> /Users/brendan/dev/rust/rust/src/libextra/num/bigint.rs:2070: trailing whitespace
[21:09:47] <cmr> I thought I turned off NOTE: printing for exactly this reason :(
[21:11:42] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[21:11:42] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/A_wq6g
[21:11:42] <ghrust> 13rust/06auto 14f13086f 15Erick Tryzelaar: Expose platform independent path separators
[21:11:42] <ghrust> 13rust/06auto 1418061e8 15bors: auto merge of #11642 : erickt/rust/path, r=huonw...
[21:11:42] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[21:11:45] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[21:11:45] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14341d64b to 145512fb4: 02http://git.io/N3iJvQ
[21:11:45] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[21:19:05] *** Joins: doomlord__ (servitor@moz-D9C46C01.range86-184.btcentralplus.com)
[21:19:10] *** Quits: doomlord__ (servitor@moz-D9C46C01.range86-184.btcentralplus.com) (Client exited)
[21:22:30] <cmr> eddyb: new benches for http://huonw.github.io/isrustfastyet/mem/#2952685,fb40bdb,bf07c80 cooking.
[21:24:48] <eddyb> cmr: I guess I'll have to see them tomorrow
[21:49:16] *** Quits: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP) (Ping timeout)
[21:55:31] <bjz> cmr: needs more rainbow and blinking
[22:01:12] *** Quits: rca (rcatolino@moz-10E18C17.adsl.proxad.net) (Ping timeout)
[22:11:49] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[22:17:46] <cmr> package fetching works.
[22:17:51] * cmr makes progress.
[22:22:39] <dbaupp> cmr: on?
[22:22:44] <cmr> dbaupp: cargo-lite
[22:22:55] <dbaupp> hm?
[22:22:57] <cmr> super crappy package manager that Just Works (TM) and doesn't try to be smart.
[22:23:04] <cmr> as an interim shim.
[22:23:27] <cmr> aka "cmr is pissed off at building gl-rs, glfw-rs, and sax-rs for the billionth time"
[22:23:49] <dbaupp> I see
[22:23:58] <bjz> cmr: YES
[22:24:38] <bjz> cmr: exactly why I have been avoiding actual work on my intended projects
[22:24:43] <bjz> :P
[22:36:43] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[22:36:43] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/A_wq6g
[22:36:43] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[22:41:36] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[22:41:36] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/9Rmj4A
[22:41:36] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[22:57:42] <cmr> dbaupp: ping
[22:59:42] <cmr> dbaupp: can you remove your cached copies of the data for http://huonw.github.io/isrustfastyet/mem/#2952685,fb40bdb,bf07c80 ? I've rebenched them with a redirected deterministic /dev/urandom
[23:01:41] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[23:02:46] <cmr> acrichto: ping
[23:05:12] *** Quits: jsonnull (Thunderbir@E86DD23.582C899D.494A0F8B.IP) (Quit: jsonnull)
[23:07:32] <dbaupp> cmr: done
[23:07:52] <cmr> dbaupp: did you notice any change?
[23:07:55] <cmr> (or has it not updated yet)
[23:08:04] <dbaupp> cmr: just running the update now
[23:08:06] <cmr> ok
[23:10:02] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[23:15:05] *** Joins: Craig (Craig@moz-824F7CDF.wi.res.rr.com)
[23:15:25] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[23:15:48] *** Quits: Craig (Craig@moz-824F7CDF.wi.res.rr.com) (Quit: Leaving)
[23:16:53] *** Joins: Craig (Craig@moz-824F7CDF.wi.res.rr.com)
[23:24:44] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[23:26:42] <dbaupp> cmr: I've pushed the update, so it's just dependent on gh pages now
[23:28:51] *** Joins: Craig_ (Craig@moz-824F7CDF.wi.res.rr.com)
[23:30:10] *** Quits: Craig (Craig@moz-824F7CDF.wi.res.rr.com) (Ping timeout)
[23:31:59] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[23:31:59] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/tZLtsA
[23:31:59] <ghrust> 13rust/06auto 14b3c93b3 15Kevin Ballard: Make WindowsPath::new("C:foo").root_path() return Some("C:")
[23:31:59] <ghrust> 13rust/06auto 14f7cc8a6 15bors: auto merge of #11643 : kballard/rust/path-root-path, r=erickt
[23:32:00] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[23:32:01] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[23:32:02] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14bf0043d to 1418061e8: 02http://git.io/N3iJvQ
[23:32:02] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[23:32:12] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[23:34:00] *** Joins: Craig__ (Craig@moz-824F7CDF.wi.res.rr.com)
[23:35:07] *** Quits: Craig_ (Craig@moz-824F7CDF.wi.res.rr.com) (Ping timeout)
[23:35:58] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[23:36:14] <cmr> dbaupp: I don't think I see any difference.
[23:36:55] <dbaupp> cmr: I though 2952 was high before
[23:37:09] <dbaupp> but yeah, I don't see a a fundamental difference either
[23:46:51] *** Quits: Craig__ (Craig@moz-824F7CDF.wi.res.rr.com) (Quit: Craig__)
[23:49:47] *** flaper87 is now known as flaper87|afk
