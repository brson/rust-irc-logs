[00:00:07] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[00:00:37] *** Quits: Coroding (Mibbit@moz-t218dr.sub-70-194-68.myvzw.com) (Quit: http://www.mibbit.com ajax IRC Client)
[00:01:25] <Sgeo> Without unsafe, and without std::mem::swap and std::mem::replace, is it possible for a function that has a &mut T to drop the T?
[00:01:54] *** Quits: errordeveloper (ilya@moz-649.f7i.219.2.IP) (Ping timeout: 121 seconds)
[00:02:05] <Sgeo> It's like the semantics of what it means to have a &mut T changes with the existence of those functions as safe
[00:02:08] <Murarth> Sgeo: Yes, if the function assigns something else into its place.
[00:02:12] <Sgeo> Oh
[00:02:57] <Murarth> The reference will still point to something valid, but what was there may not be the same thing.
[00:03:25] <Sgeo> There's no way to give mutating access without allowing that sort of replacement, is there?
[00:03:35] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[00:03:51] <Murarth> Not that I'm aware of. You'll just have to use the honor system.
[00:04:32] <Murarth> You could have a limited wrapper. i.e. one that doesn't impl DerefMut but just allows access to some methods on the wrapped value.
[00:04:35] *** Joins: ismaelga (ismaelga@moz-50ehf4.rev.vodafone.pt)
[00:04:43] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[00:05:03] *** Joins: ytain (ytain@moz-pr2.aip.175.108.IP)
[00:05:07] *** Joins: errordeveloper (ilya@moz-649.f7i.219.2.IP)
[00:05:26] *** Joins: brson (brson@moz-8uhedf.tmodns.net)
[00:05:26] *** ChanServ sets mode: +ao brson brson
[00:05:30] *** Quits: brson (brson@moz-8uhedf.tmodns.net) (Quit: leaving)
[00:05:45] *** Joins: Izacht13 (Izacht13@moz-oqb.nch.45.199.IP)
[00:07:34] *** Joins: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net)
[00:07:44] *** Joins: ismaelga_ (ismaelga@moz-50ehf4.rev.vodafone.pt)
[00:08:22] *** Quits: ismaelga (ismaelga@moz-50ehf4.rev.vodafone.pt) (Connection closed)
[00:09:23] *** Quits: errordeveloper (ilya@moz-649.f7i.219.2.IP) (Ping timeout: 121 seconds)
[00:11:18] *** bstrie sets mode: +o niconii
[00:11:18] *** Joins: mkpankov (mkpankov@moz-550.0jj.23.84.IP)
[00:11:21] *** Quits: thelink2012 (Mibbit@moz-6pu.8ab.250.191.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:12:06] *** Joins: ismaelga (ismaelga@moz-pgmpv7.rev.vodafone.pt)
[00:12:10] *** Joins: thor (thor@moz-n7n1a4.res.rr.com)
[00:12:15] <RC9> xrl: out of curiousity, what is this graphite you are implementing?
[00:12:44] *** Joins: nedp (nedp@moz-vg6vvt.bigpond.net.au)
[00:14:00] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[00:14:19] <Sgeo> Trying to grasp whether or not there is some subtle difference between T -> T and &mut T -> ()
[00:14:37] <Sgeo> I can convert from the latter to the former easily, at least
[00:14:46] *** Quits: ismaelga_ (ismaelga@moz-50ehf4.rev.vodafone.pt) (Ping timeout: 121 seconds)
[00:15:00] <bluss> they should both be invariant in T right
[00:15:01] *** Quits: Gabriel_7 (Gabriel@moz-j7j5rs.mtgr.92aj.0e35.2a01.IP) (Connection closed)
[00:15:12] <Sgeo> And I think from the former to the latter with some unsafe code and a bit more care than I used when I wrote some code to do so
[00:15:30] *** Quits: GaryOak_ (GaryOak_@moz-etoj16.hfc.comcastbusiness.net) (Connection closed)
[00:18:34] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[00:18:35] *** Quits: achanda (achanda@moz-fr1.spq.217.162.IP) (Connection closed)
[00:18:37] *** Joins: aidanhs (aidanhs@moz-417.5v2.4.81.IP)
[00:18:56] *** Joins: achanda (achanda@moz-fr1.spq.217.162.IP)
[00:20:18] *** Quits: mkpankov (mkpankov@moz-550.0jj.23.84.IP) (Ping timeout: 121 seconds)
[00:20:23] *** Joins: sin8h (Adium@moz-f0u.cn5.51.106.IP)
[00:21:15] *** Joins: orangeshark (erik@moz-74lqvs.44tj.56ot.0306.2602.IP)
[00:22:06] *** Quits: oceanwhit (bzlandfill@moz-a38b1m.ca.comcast.net) (Quit: CGI:IRC)
[00:22:11] *** Joins: nico (nico@moz-08u9pa.dip0.t-ipconnect.de)
[00:22:58] *** Quits: achanda (achanda@moz-fr1.spq.217.162.IP) (Ping timeout: 121 seconds)
[00:23:18] <scott> &mut T -> () is more flexible since you can call it on things you don't own, but only borrowed
[00:24:07] *** Joins: mkpankov (mkpankov@moz-550.0jj.23.84.IP)
[00:24:08] *** Quits: bebijlya (bebijlya@moz-agsqr7.adsl.tpnet.pl) (Quit: kthxbai)
[00:24:09] <BitPuffin> Man
[00:24:14] <BitPuffin> the generics really don't like me
[00:24:22] *** Joins: bebijlya (bebijlya@moz-agsqr7.adsl.tpnet.pl)
[00:25:24] <aidanhs> is there a current syntax for an fixed-size array in a struct?
[00:25:44] <aidanhs> SO suggests something like `struct A { b: [u32, ..3] }` which gives a cryptic syntax error
[00:26:06] <bluss> it's [u32; 3]
[00:26:13] *** Quits: nico (nico@moz-08u9pa.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[00:26:16] <bluss> your example is old
[00:26:38] <xrl> RC9: it's the whisper/carbon/graphite stack you hear about for system monitoring
[00:26:50] <aidanhs> thanks bluss
[00:26:51] <xrl> RC9: whisper is the file format
[00:27:19] *** Joins: Guest67_ (textual@moz-47o.884.171.203.IP)
[00:28:24] <Sgeo> scott, well, there's a way around that
[00:28:41] <Guest67_> Hey! I want an object to store a reference to the object that created it. ie: MyObject { parent: self, } should the type of parent should be something like &mut MyParentType?
[00:28:46] *** Guest67_ is now known as BageDev
[00:28:49] *** Quits: nedp (nedp@moz-vg6vvt.bigpond.net.au) (Connection closed)
[00:29:03] <Sgeo> But I guess that is tricky
[00:29:39] *** Quits: Nextra (Nextra@moz-bvi53u.osnanet.de) (Quit: Leaving)
[00:30:11] <Sgeo> Actually, I don't know if I can protect against panics, hmm
[00:30:14] <RC9> xrl: i see, ty
[00:30:56] *** Quits: santiago (santiago@moz-9rt.sbd.14.107.IP) (Quit: Computer has gone to sleep.)
[00:32:10] *** Joins: dawehner (quassel@moz-tobu60.hsi4.kabel-badenwuerttemberg.de)
[00:33:44] <BageDev> I guess i'm really asking how to do this kind of thing: http://is.gd/pS83m4
[00:34:02] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[00:36:08] *** Joins: errordeveloper (ilya@moz-649.f7i.219.2.IP)
[00:36:27] *** Quits: dawehner (quassel@moz-tobu60.hsi4.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[00:36:58] *** Quits: ndhoule (ndhoule@moz-3eh.5o5.207.67.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[00:36:59] <BitPuffin> I really can't figure out why the struct gets that type :s https://gist.github.com/BitPuffin/38d5bc963f1ff158a583
[00:37:04] *** Parts: insaneinside (user@moz-dgv9mb.customer.broadstripe.net) ("ERC Version 5.3 (IRC client for Emacs)")
[00:37:47] <zaeleus> BageDev: You might have to use reference counting to get shared ownership. See the example: https://doc.rust-lang.org/std/rc/#examples
[00:38:05] <BageDev> Okay, thanks @zaeleus.
[00:39:36] <aatch> BitPuffin, ah, you haven't specified that the results of `T + T` should return T.
[00:40:24] *** Quits: errordeveloper (ilya@moz-649.f7i.219.2.IP) (Ping timeout: 121 seconds)
[00:40:26] *** Quits: zzing (textual@moz-jucm1n.cpe.distributel.net) (Ping timeout: 121 seconds)
[00:40:35] <BitPuffin> aatch: how do I do that?
[00:40:51] <BitPuffin> ah
[00:41:02] <BitPuffin> Add<Output = T> ?
[00:41:29] <aatch> BitPuffin, yep.
[00:41:47] <BageDev> @zaeleus: Would I then have to pass the Rc into the owner object?
[00:41:55] *** Quits: aisrael (aisrael@moz-f6q.anf.108.114.IP) (Client exited)
[00:42:19] <aatch> BageDev, ok, the question is why do you want to do that? What is the problem you are trying to solve here?
[00:42:39] <BitPuffin> aatch: well that's a different error at least: src/math/vector.rs:37:1: 45:2 error: type mismatch resolving `<T as core::ops::Add>::Output == T`:
[00:42:39] *** Quits: sin8h (Adium@moz-f0u.cn5.51.106.IP) (Quit: Leaving.)
[00:42:42] *** Joins: zzing (textual@moz-jucm1n.cpe.distributel.net)
[00:43:11] <aatch> BitPuffin, try `T: Add<T, Output=T>`
[00:43:35] <BageDev> It's probably a architecture problem. I've got a "database". a database has many columns. database creates its columns from database.fetch_column_list(). column need to be able to access the database object that created them so that they can do more SQL queries against it.
[00:43:37] *** Parts: qard (qard@moz-nekdha.vc.shawcable.net) ()
[00:43:39] <BitPuffin> aatch: I figured it out, I just also had to add Output = T for dot and friends
[00:43:41] <BitPuffin> thanks
[00:43:50] <BitPuffin> generics seem to get verbose really quickly :P
[00:43:53] <aatch> BitPuffin, no problem.
[00:44:24] <aatch> BitPuffin, eh, only in cases like these.
[00:44:27] *** Joins: santiago (santiago@moz-ro2mm9.res.rr.com)
[00:44:36] *** Quits: wilfredh (uid159@moz-md9so9.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[00:45:04] *** Joins: kmcguire (kmcguire@moz-bbqf14.res.bhn.net)
[00:45:55] <BitPuffin> alright
[00:46:06] <BitPuffin> it's my only reference case so I can't really argue with that :P
[00:48:18] *** Quits: pavelpenev (quassel@moz-8vs4j7.btc-net.bg) (Connection closed)
[00:48:42] *** Quits: Ralith (ralith@moz-miv.lne.251.63.IP) (Ping timeout: 121 seconds)
[00:49:46] <BageDev> @aatch: I think it's going to _something_ like this: http://is.gd/Z3jKk7
[00:50:23] *** Quits: asQuirreL (asQuirreL@moz-ro1qqu.ox.ac.uk) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:50:48] *** Joins: Rusky (russell@moz-vn1e9f.slkc.qwest.net)
[00:51:02] *** Quits: cjwelborn (cjwelborn@moz-np6hed.al.charter.com) (Ping timeout: 121 seconds)
[00:51:24] *** Joins: cjwelborn (cjwelborn@moz-np6hed.al.charter.com)
[00:51:27] *** Quits: zzing (textual@moz-jucm1n.cpe.distributel.net) (Connection closed)
[00:52:06] *** Joins: Bira (Bira@moz-sq6.nc4.106.187.IP)
[00:53:17] *** Joins: choplin (choplin@moz-m9trof.rev.vmobile.jp)
[00:53:28] *** Joins: saml_ (saml@moz-rkfmct.res.rr.com)
[00:53:30] *** Joins: narann (narann@moz-j49beg.dsl.netrevolution.com)
[00:53:35] *** Joins: asmyers (amyers@moz-jaamq6.1kl3.v890.000a.2601.IP)
[00:54:09] *** Quits: asmyers (amyers@moz-jaamq6.1kl3.v890.000a.2601.IP) (Connection closed)
[00:54:19] *** Joins: asmyers (amyers@moz-jaamq6.1kl3.v890.000a.2601.IP)
[00:54:20] *** Joins: arty (Mibbit@moz-ineiim.il.comcast.net)
[00:54:50] *** Quits: amyers (amyers@moz-3o3dnb.1kl3.v890.000a.2601.IP) (Ping timeout: 121 seconds)
[00:56:34] <zaeleus> BageDev: This is essentially a tree with circular references. From what I've tried before, it's kind of tricky to do in Rust.
[00:56:54] *** Quits: arty (Mibbit@moz-ineiim.il.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:57:06] *** Joins: lenstr (lenstr@moz-ca8.vju.25.171.IP)
[00:57:08] <zaeleus> Rc's are immutable, so you'll have to have another layer of indirection with RefCell for the parent.
[00:57:08] *** Quits: nham (nham@moz-755.bu3.214.98.IP) (Ping timeout: 121 seconds)
[00:57:24] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[00:57:28] <BageDev> I'm kinda hoping I've got a architectural problem tbh, gonna screw with that hope for a bit.
[00:57:32] *** Joins: arty (Mibbit@moz-ineiim.il.comcast.net)
[00:57:55] *** Quits: lenstr (lenstr@moz-ca8.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[00:58:10] *** Joins: lenstr (lenstr@moz-ca8.vju.25.171.IP)
[00:58:57] *** Quits: Fiveside (fiveside@moz-t2eatg.vsp.com) (Ping timeout: 121 seconds)
[00:59:09] *** Quits: lenstr (lenstr@moz-ca8.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[00:59:31] <BitPuffin> How do I constrain T so that it can be converted to and from f64
[00:59:32] *** Joins: tamird (textual@moz-gg3hct.res.rr.com)
[00:59:34] <FreeFull> Keep in mind Rc cycles can't be dropped
[00:59:43] <FreeFull> So you'll get a memory leak, unless you use Weak pointers
[00:59:47] <BageDev> If I had a "DB Connection" style entity, then columns and databases could all refer to that maybe?
[00:59:47] *** Joins: fabianvf (fabianvf@moz-fjqmui.va.comcast.net)
[01:00:10] *** Joins: Stebalien (Stebalien@moz-i00.hrk.38.73.IP)
[01:00:11] <BageDev> then there is no need for columns to reference their parent database
[01:00:17] <BageDev> becomes more like
[01:00:29] *** Joins: kYem (Mibbit@moz-3804mt.as13285.net)
[01:00:33] <BageDev> DB -> Connection, DB -> Column, Column -> Connection
[01:01:34] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[01:01:42] *** Quits: choplin (choplin@moz-m9trof.rev.vmobile.jp) (Connection closed)
[01:01:46] <BitPuffin> or actually
[01:01:48] <BitPuffin> even better
[01:01:58] *** Quits: CustosLimen (CustosLimen@moz-nb664a.mtnbusiness.co.za) (Ping timeout: 121 seconds)
[01:02:00] <BitPuffin> is there a trait for types that have square root?
[01:02:02] *** Quits: kYem (Mibbit@moz-3804mt.as13285.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:02:03] *** Quits: GBGamer (npm@moz-92sbjt.wa.comcast.net) (NickServ (RECOVER command used by npm))
[01:02:03] *** Joins: GBGamer (npm@moz-92sbjt.wa.comcast.net)
[01:02:30] <GBGamer> how does UnsafeCell take DST?
[01:02:38] <GBGamer> I thought it wasn't a pointer?
[01:02:40] *** Joins: npm (npm@moz-92sbjt.wa.comcast.net)
[01:03:31] <Diggsey> UnsafeCell becomes a DST when it contains a DST
[01:03:41] <GBGamer> oh, right, that makes sense
[01:03:45] *** Joins: ssokolow (ssokolow@moz-lnofvo.dsl.teksavvy.com)
[01:03:46] <GBGamer> thanks
[01:03:49] *** Quits: fabianvf (fabianvf@moz-fjqmui.va.comcast.net) (Ping timeout: 121 seconds)
[01:03:52] *** Quits: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au) (Connection closed)
[01:04:06] *** Quits: lyc (lyc@moz-aut.rvo.25.175.IP) (Connection closed)
[01:05:12] *** Joins: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au)
[01:05:19] *** Joins: lyc (lyc@moz-jft.nr8.226.207.IP)
[01:05:39] *** Joins: Pylos (Mibbit@moz-grpqae.mo.charter.com)
[01:07:05] <Pylos> Is it possible to do something like this in Rust: https://github.com/fogleman/nes/blob/master/nes/ines.go#L35
[01:07:13] <Pylos> Where you read binary from a file directly into a rust struct?
[01:07:13] <ssokolow> What method would you guys recommend I use as a Rust equivalent to this Python expression? --> `file_obj.read(6) in ['GIF87a', 'GIF89a']`
[01:07:43] <Diggsey> Pylos: if you specify a representation for the struct using #repr
[01:07:44] *** Quits: eric_lagergren (barsonme@moz-add4ru.fomj.2174.0008.2601.IP) (Ping timeout: 121 seconds)
[01:07:54] <Diggsey> then with some unsafe code it's possible
[01:08:13] *** Joins: Rym_ (y@moz-a44.2as.55.31.IP)
[01:08:27] <FreeFull> ssokolow: Read six bytes, and see if they match one of those two strings?
[01:08:57] <Sgeo> I guess if I restrict myself to T->T guaranteed not to panic then that's equivalent to &mut T -> ()
[01:09:10] <Sgeo> (Assuming unsafe allowed)
[01:09:12] *** Joins: nham (nham@moz-755.bu3.214.98.IP)
[01:09:15] <Pylos> ok.  I must resort to unsafe code then.  So would the idiomatic rust way of handling this just be to read the size of the struct into memory and access that vector as slices?
[01:09:26] <ssokolow> FreeFull: Yes. I can read six bytes using `let mut buf_magic = [0u8; 6];  File::read(&mut buf_magic);` but I then don't know the equivalent to the `in` operator in this case.
[01:09:34] <RC9> dumb question because i need to be captain obvious: are nightlies put together around the same time each day or are they updated multiple times a day, and if so about when
[01:09:47] <GBGamer> RC9: they're updated nightly, afaik
[01:10:16] <ssokolow> s/File::read/fh.read/g (Shoulda just copy-pasted)
[01:10:18] <RC9> alright
[01:10:38] <RC9> i cant even compile rust from source because the bug im dealing with prevents me from compiling anything :(
[01:10:45] * RC9 starts waiting
[01:10:50] <FreeFull> ssokolow: Note that's not guaranteed to read a full six bytes
[01:10:54] <reem> Pylos: Usually you would use more full-featured serialization, like rustc_serialize + bincode
[01:11:02] <Diggsey> Pylos: what you are looking for is serialisation support: there are existing crates that provide this.
[01:11:15] <GBGamer> RC9: what's the bug?
[01:11:35] <GBGamer> Also, you should be able to select an old compiler to rustup to
[01:11:36] <FreeFull> ssokolow: You can do   match buf_magic { b"GIF87a" => { foo() }, b"GIF89a" => { bar() } }
[01:11:36] <ssokolow> FreeFull: Of course. It could be a directory or an empty file. The idea is that, if it's not one of those two strings, then I bail out. If it is, then I know that I've read 6 bytes.
[01:12:07] <FreeFull> Oh, and of course a default case
[01:12:09] <Diggsey> Pylos: they work by having each struct implement a serialise method that recursively serializes its fields, until you're serialising simple primitive types
[01:12:11] *** Quits: veqz (veqz@moz-nvr8g6.209.getinternet.no) (Ping timeout: 121 seconds)
[01:12:12] <FreeFull> Alternatively, two if lets
[01:12:25] <Diggsey> Pylos: that way you can implement the whole thing without resorting to unsafe
[01:12:41] <Sgeo> Wait, can I use if let ... else if let as an alternative to match?
[01:12:42] *** Quits: Rym_ (y@moz-a44.2as.55.31.IP) (Ping timeout: 121 seconds)
[01:12:51] <Sgeo> Except non-exhaustive which makes that actually a bad idea?
[01:12:58] *** Joins: frankmcsherry (frankmcsher@moz-b6fr69.dyn.telefonica.de)
[01:13:09] <ssokolow> FreeFull: Nice, but I think I'd rather have the headers at the top of the file as a constant equalling [b"GIF87a", b"GIF89a"] if possible.
[01:13:15] <Sgeo> Eh, would need to name value several times
[01:13:18] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[01:13:22] <Diggsey> Sgeo: you could do but I can't see a benefit over match
[01:13:30] <Pylos> Diggsey: this is true even if I just want to deserialize?  I have no control over the input file -- these are NES rom files
[01:13:31] <Sgeo> I hate nesting?
[01:13:32] *** Quits: ai (ai@moz-pqofrl.sunline.net.ua) (Quit: Leaving.)
[01:13:38] <BitPuffin> I guess I'll just create a trait Sqrt for now and implement it by hand atm
[01:13:49] *** Joins: Ralith (ralith@moz-tiaj7p.customer.broadstripe.net)
[01:13:58] <ssokolow> FreeFull: (The "constant at the top of the file" being the most important part. I'm not very picky about the representation.)
[01:14:42] <FreeFull> ssokolow: http://doc.rust-lang.org/std/primitive.slice.html#method.contains could work too
[01:14:57] *** Quits: smohan (smohan@moz-m6j.f0d.244.121.IP) (Connection closed)
[01:14:58] *** Joins: smohan (smohan@moz-m6j.f0d.244.121.IP)
[01:15:11] <Diggsey> Pylos: for a specific format, then the easiest way would be to have a stream reader which can read primitive types from a file
[01:15:52] *** Joins: hjr3 (hradtke@moz-dmp.av4.169.69.IP)
[01:16:05] *** Joins: Guest74 (textual@moz-7ai.1eq.237.96.IP)
[01:16:42] *** Joins: zzing (textual@moz-jucm1n.cpe.distributel.net)
[01:16:45] <Diggsey> you can still use the same idea as for serialisation, just make sure that your types read in exactly what is specified by the file format
[01:16:58] <Sgeo> filter by contains then some method that gets the first?
[01:17:00] *** Quits: frankmcsherry (frankmcsher@moz-b6fr69.dyn.telefonica.de) (Ping timeout: 121 seconds)
[01:17:11] *** Quits: thor (thor@moz-n7n1a4.res.rr.com) (Ping timeout: 121 seconds)
[01:17:15] <ssokolow> FreeFull: Except that contains()  expected `&&[u8; 6]`,
[01:17:30] <ssokolow> ...and I'm not sure how to give it anything but `&[u8; 6]`
[01:18:16] <Diggsey> Pylos: this crate has example code for reading from image file formats: https://github.com/PistonDevelopers/image
[01:19:29] <FreeFull> ssokolow: Well, && is just a & to a &
[01:20:08] *** Quits: asmyers (amyers@moz-jaamq6.1kl3.v890.000a.2601.IP) (Ping timeout: 121 seconds)
[01:20:19] <FreeFull> playbot: let buf: [u8; 6] = b"GIF87a"; [b"GIF87a"].contains(&buf)
[01:20:20] -playbot- <anon>:9:28: 9:37 error: mismatched types:
[01:20:21] -playbot-  expected `[u8; 6]`,
[01:20:21] -playbot- output truncated; full output at: http://bit.ly/1Pnwviq
[01:20:35] *** Joins: BossKonaSegway1 (Michael@moz-vp8rf7.res.rr.com)
[01:20:40] <FreeFull> playbot: let buf: [u8; 6] = *b"GIF87a"; [b"GIF87a"].contains(&buf)
[01:20:41] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[01:20:41] -playbot- <anon>:9:61: 9:65 error: mismatched types:
[01:20:42] -playbot-  expected `&&[u8; 6]`,
[01:20:42] -playbot- output truncated; full output at: http://bit.ly/1Ie6ZMg
[01:20:45] <FreeFull> playbot: let buf: [u8; 6] = *b"GIF87a"; [b"GIF87a"].contains(&&buf)
[01:20:47] -playbot- true
[01:20:55] <FreeFull> ssokolow: So just double up on the &
[01:21:11] <FreeFull> Or have * in the constant
[01:21:21] <FreeFull> playbot: let buf: [u8; 6] = *b"GIF87a"; [*b"GIF87a"].contains(&buf)
[01:21:21] *** Quits: Izacht13 (Izacht13@moz-oqb.nch.45.199.IP) (Quit: Leaving)
[01:21:22] -playbot- true
[01:21:55] *** Quits: housl (housl@moz-qnjt4k.ut.comcast.net) (Quit: WeeChat 1.1.1)
[01:22:04] <ssokolow> FreeFull: Ahh. I didn't know that was valid syntax. Thanks.
[01:22:12] <FreeFull> playbot: const FOO: &[[u8;6]] = &[*b"GIF87a"]; let buf: [u8; 6] = *b"GIF87a"; FOO.contains(&buf)
[01:22:13] -playbot- <anon>:9:20: 9:29 error: missing lifetime specifier [E0106]
[01:22:14] -playbot- <anon>:9         const FOO: &[[u8;6]] = &[*b"GIF87a"]; let buf: [u8; 6] = *b"GIF87a"; FOO.contains(&buf)
[01:22:14] -playbot- output truncated; full output at: http://bit.ly/1PnwMBZ
[01:22:20] <FreeFull> playbot: const FOO: &'static [[u8;6]] = &[*b"GIF87a"]; let buf: [u8; 6] = *b"GIF87a"; FOO.contains(&buf)
[01:22:22] *** Joins: tadh (quassel@moz-88tk3f.res.rr.com)
[01:22:22] -playbot- true
[01:22:46] *** Joins: fkaa (tundmatu@moz-501od2.business.telia.com)
[01:23:34] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[01:23:54] <Pylos> Diggsey: thank you, i'll look at those examples
[01:24:05] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[01:24:37] <Pylos> One more question -- there is no such thing as fixed sized arrays, whose size is determined at runtime, right?  I should just use Vec?
[01:24:42] <ssokolow> FreeFull: I need to refresh my memory of what * means. Where in the docs was that?
[01:24:56] *** Quits: hjr3 (hradtke@moz-dmp.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:24:59] <GBGamer> Pylos: not until we get alloca
[01:25:03] <GBGamer> just use Vec
[01:25:11] <FreeFull> ssokolow: * is the dereference operator
[01:25:20] <GBGamer> (maybe Vec::with_capacity() if you know the capacity ahead of time)
[01:25:22] <FreeFull> b"foo" has the type &[u8; 3]
[01:25:40] <FreeFull> And the * strips that & away
[01:26:03] <ssokolow> FreeFull: So it's as I thought. I guess I'm misunderstanding something in the errors I'm getting. One sec.
[01:26:24] *** Quits: zzing (textual@moz-jucm1n.cpe.distributel.net) (Ping timeout: 121 seconds)
[01:26:24] *** Quits: pyon (pyon@moz-v9d.mdl.7.179.IP) (Quit: fix config)
[01:26:44] *** Joins: ndhoule (ndhoule@moz-qlf.50d.255.50.IP)
[01:26:54] *** Joins: yeahnoob (Xanadu@moz-ku8.ugi.122.118.IP)
[01:27:50] *** Joins: pyon (pyon@moz-v9d.mdl.7.179.IP)
[01:28:08] <ssokolow> playbot: const KNOWN_HEADERS: [[u8; 6]] = [b"GIF87a", b"GIF89a"]
[01:28:09] -playbot- <anon>:10:5: 10:6 error: expected one of `.`, `;`, or an operator, found `}`
[01:28:09] -playbot- <anon>:10     });
[01:28:09] -playbot- output truncated; full output at: http://bit.ly/1Ie7QMQ
[01:28:12] <ssokolow> playbot: const KNOWN_HEADERS: [[u8; 6]] = [b"GIF87a", b"GIF89a"];
[01:28:13] -playbot- <anon>:9:43: 9:52 error: mismatched types:
[01:28:13] -playbot-  expected `[u8; 6]`,
[01:28:13] -playbot- output truncated; full output at: http://bit.ly/1PnxsHH
[01:28:24] <ssokolow> playbot: const KNOWN_HEADERS: [[u8; 6]] = [*b"GIF87a", *b"GIF89a"];
[01:28:25] -playbot- <anon>:9:42: 9:66 error: mismatched types:
[01:28:25] -playbot-  expected `[[u8; 6]]`,
[01:28:25] -playbot- output truncated; full output at: http://bit.ly/1Ie7VjG
[01:28:38] <ssokolow> That's where I'm getting stuck.
[01:28:57] <scott> playbot: const KNOWN_HEADERS: [[u8; 6]; 2] = [*b"GIF87a", *b"GIF89a"];
[01:28:58] -playbot- ()
[01:28:59] *** Quits: zzmp (zzmp@moz-ppks81.12ul.lrlq.5500.2604.IP) (A TLS packet with unexpected length was received.)
[01:29:14] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[01:29:14] <scott> [[u8; 6]] is an unsized type (a slice)
[01:29:21] <scott> [T] with T = [u8; 6]
[01:30:14] <ssokolow> scott: I already know that works. I'm wondering why  const FOO: &'static [[u8;6]] = &[*b"GIF87a"]; works for FreeFull when every variation I try (including just adding another element) doesn't work for me.
[01:30:20] <FreeFull> Yeah, my example had &[[u8;6]]
[01:30:42] <FreeFull> ssokolow: Did you miss the &'static?
[01:30:42] *** Joins: sin8h (Adium@moz-49j.3ph.172.122.IP)
[01:30:56] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[01:31:20] *** Quits: ndhoule (ndhoule@moz-qlf.50d.255.50.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:31:32] <ssokolow> *facepalm* I started with the code scott pasted and, in the process of rewriting it, I stripped the lifetime early enough that I didn't realize what I'd done.
[01:32:26] <ssokolow> (And, unlike the errors which led me to that type signature, the later ones didn't suggest that a static lifetime might solve it.)
[01:33:50] *** Quits: mnemnion (mnemnion@moz-kf3boi.ca.comcast.net) (Connection closed)
[01:34:29] *** Joins: khades1 (Thunderbird@moz-u45.3vk.74.212.IP)
[01:34:35] *** Quits: ytain (ytain@moz-pr2.aip.175.108.IP) (Quit: Textual IRC Client: www.textualapp.com)
[01:34:56] *** Quits: khades1 (Thunderbird@moz-u45.3vk.74.212.IP) (Client exited)
[01:36:10] *** Quits: khades (Thunderbird@moz-u45.3vk.74.212.IP) (Ping timeout: 121 seconds)
[01:36:54] *** Joins: popow (Thunderbird@moz-03f.kd0.252.223.IP)
[01:36:59] *** Joins: errordeveloper (ilya@moz-649.f7i.219.2.IP)
[01:38:30] *** Joins: whidgle (Mibbit@moz-6pu.8ab.250.191.IP)
[01:38:35] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:39:05] <whidgle> is there a way to pass a object file to be link in without using the nightly link_args attribute?
[01:39:12] *** Joins: zzing (textual@moz-jucm1n.cpe.distributel.net)
[01:39:57] *** Quits: meh` (meh@moz-2vi7cf.42-151.net24.it) (Ping timeout: 121 seconds)
[01:39:57] *** Quits: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:40:13] <whidgle> note how it's not a library file (.a etc) but a object file (.o), so -l (thus #[link(name(foo))] doesn't work
[01:40:28] *** Quits: Pylos (Mibbit@moz-grpqae.mo.charter.com) (Quit: http://www.mibbit.com ajax IRC Client)
[01:40:40] *** Joins: vidot_j_ (vidot_j@moz-2q9eng.abo.wanadoo.fr)
[01:40:51] <talchas> well, worst case you can turn it into a .a if that works
[01:40:59] *** Joins: stjahns_ (stjahns@moz-9oh245.ed.shawcable.net)
[01:41:04] <GBGamer> whidgle: -l path/to/foo.o?
[01:41:13] *** Quits: errordeveloper (ilya@moz-649.f7i.219.2.IP) (Ping timeout: 121 seconds)
[01:41:16] *** Joins: da-kid (da@moz-s43ro7.dip0.t-ipconnect.de)
[01:42:00] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[01:42:03] <GBGamer> oh sorry.
[01:42:07] <GBGamer> I thought that worked?
[01:42:10] <GBGamer> I remember it working
[01:42:53] <GBGamer> I may have been linking with ld...
[01:43:09] <talchas> you can also do rustc -C link-args=foo.o even in stable I think
[01:43:22] <whidgle> though I need to use cargo :/
[01:43:36] <talchas> (maybe, I just realized I'm running nightly, not beta)
[01:43:57] *** Quits: nyx (nyx@moz-ivelpd.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:44:06] *** Quits: da-kid_ (da@moz-4if042.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[01:44:06] <GBGamer> you can use ld -Bstatic?
[01:44:18] <GBGamer> (on the .o file to turn it into a .a)
[01:44:43] <whidgle> hmm I'm not sure, actually it's not a .o file but a windows .res file
[01:46:31] *** Quits: zzing (textual@moz-jucm1n.cpe.distributel.net) (Connection closed)
[01:46:42] *** Quits: jasonrm (jasonrm@moz-m96h5m.ph.cox.net) (Quit: ZNC - http://znc.in)
[01:46:55] *** Joins: playjax (chatzilla@moz-csjthg.optusnet.com.au)
[01:47:56] *** Joins: Ericson2314 (user@moz-md3.070.16.138.IP)
[01:47:58] *** Quits: Colglazier (uid64399@moz-118bsh.ealing.irccloud.com) (Quit: Connection closed for inactivity)
[01:49:11] *** Joins: gopar (gopar@moz-5039uj.ca.comcast.net)
[01:49:17] *** Joins: Wild_Cat (Max@moz-fa8mvt.dsl.teksavvy.com)
[01:49:36] *** Quits: dmac_ (dmac@moz-4kcd1c.ca.comcast.net) (Ping timeout: 121 seconds)
[01:50:37] *** Quits: dzhulk (Adium@moz-pa7.hki.140.95.IP) (Quit: Leaving.)
[01:51:00] *** Joins: woboats (tatterdemal@moz-a0dnkb.ca.comcast.net)
[01:51:10] *** Quits: stjahns_ (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[01:51:16] *** Quits: Bira (Bira@moz-sq6.nc4.106.187.IP) (Quit: Leaving...)
[01:51:31] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[01:51:53] *** Joins: ismaelga_ (ismaelga@moz-e71qeg.rev.vodafone.pt)
[01:52:02] *** Quits: logan_e (logan_e@moz-ltn.qg3.218.73.IP) (Client exited)
[01:52:28] *** Joins: insaneinside (user@moz-dgv9mb.customer.broadstripe.net)
[01:53:27] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[01:53:36] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[01:54:15] *** Quits: ismaelga (ismaelga@moz-pgmpv7.rev.vodafone.pt) (Ping timeout: 121 seconds)
[01:55:10] *** Joins: zyphrus (David@moz-1a4.urk.98.101.IP)
[01:56:16] *** Joins: panitaliemom (Mibbit@moz-27o.1oe.57.59.IP)
[01:57:31] *** Quits: panitaliemom (Mibbit@moz-27o.1oe.57.59.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:57:51] *** Joins: zzing (textual@moz-jucm1n.cpe.distributel.net)
[01:58:39] <posix4e> GBGamer: what's alloca
[01:58:50] *** Joins: Twinklebear (Twinklebear@moz-ttrcn3.ut.comcast.net)
[01:59:42] *** Joins: lenstr (lenstr@moz-ca8.vju.25.171.IP)
[02:00:19] *** Quits: lenstr (lenstr@moz-ca8.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[02:00:32] *** Joins: lenstr (lenstr@moz-ca8.vju.25.171.IP)
[02:00:49] *** Joins: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net)
[02:01:00] *** Quits: psy (psy@moz-ous.ntd.6.103.IP) (Quit: Leaving)
[02:01:00] <Stebalien> posix4e: A function for allocating variable size arrays on the stack.
[02:01:01] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:01:29] *** Quits: lenstr (lenstr@moz-ca8.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[02:01:40] <posix4e> Neat
[02:01:41] <Stebalien> posix4e: *sorry, variable sized allocations (not necessarily an array).
[02:02:03] <Stebalien> posix4e: See `man 3 alloca`
[02:02:18] *** Joins: Rym_ (y@moz-a44.2as.55.31.IP)
[02:02:21] *** Quits: gingermusketeer (gingermuske@moz-ebb1n4.compute.amazonaws.com) (Connection closed)
[02:02:27] *** Joins: gingermusketeer (gingermuske@moz-d2bnmn.compute.amazonaws.com)
[02:03:21] <reem> posix4e: You can’t do it in rust, since it has to be a compiler intrinsic because it affects the location of variables on the stack. The major downside is that these calculations become dynamic, so if you do let x = 7; the compiler may or may not know the address of x relative to the top of the stack at compile time. 
[02:03:49] <reem> but in rust all stack allocation is compile-time-sized, so the compiler does statically know all those offsets
[02:04:08] *** Joins: davebettin (davebettin@moz-n59707.bhak.dqhm.0007.2601.IP)
[02:04:26] *** Joins: nyx (nyx@moz-ivelpd.res.rr.com)
[02:04:29] <Stebalien> reem: Can't you just put all alloca allocations under fixed-sized allocations?
[02:04:45] *** Quits: zzing (textual@moz-jucm1n.cpe.distributel.net) (Ping timeout: 121 seconds)
[02:05:14] <reem> Stebalien: Not if I do an alloca then make a function call - the variables in the next functions stack frame have dynamic offsets from the top of the stack.
[02:05:30] <reem> They can still be static relative to the top of the stack frame *for each function*
[02:06:05] *** Quits: d_rezzer (chatzilla@moz-t0fmuj.hfc.comcastbusiness.net) (Connection closed)
[02:06:52] *** Quits: Rym_ (y@moz-a44.2as.55.31.IP) (Ping timeout: 121 seconds)
[02:07:06] <Stebalien> reem: Yes but isn't that the same for all non-inlined calls? a calls b calls c will have a different stack versus a calls c.
[02:07:36] *** Joins: fleabay (Mibbit@moz-fdcruo.ip.windstream.net)
[02:07:43] <reem> Stebalien: true, but if you know a calls b calls c you know exactly how much stack space any of those functions need
[02:07:50] <reem> if you introduce alloca this is no longer true
[02:07:51] <Diggsey> reem: Can't it use the base pointer to address variables = no need for dynamic calculation?
[02:08:21] *** Quits: davebettin (davebettin@moz-n59707.bhak.dqhm.0007.2601.IP) (Quit: Leaving)
[02:08:25] <Stebalien> reem: So this causes problems when dynamically expanding the stack?
[02:08:37] *** Joins: v21 (vee@moz-07pghd.asianet.co.th)
[02:08:42] *** Quits: BitPuffin (BitPuffin@moz-vunbu1.dyn.plus.net) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[02:08:51] <reem> To be honest I’m not 100% on all the details, but basically it just introduces dynamic behavior into what can otherwise be a static calculation
[02:09:13] <reem> s/dynamic/run-time, s/static/compile-time/
[02:10:27] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[02:11:10] <Stebalien> reem: It might make function calls slower because the arguments have to be allocated after the alloca allocation.
[02:11:21] <aatch> Alloca used to be a problem because of split-stacks.
[02:11:31] *** Joins: nico (nico@moz-08u9pa.dip0.t-ipconnect.de)
[02:11:52] <aatch> However, use of alloca makes detecting stack overflow even harder.
[02:11:58] <Diggsey> aatch: split-stacks had a function that would ensure a certain amount of stack space was available, couldn't alloca just call that first?
[02:12:41] *** Quits: adjivas (adjivas@moz-t655t6.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[02:12:42] *** Joins: zzing (textual@moz-jucm1n.cpe.distributel.net)
[02:12:52] <aatch> Diggsey, in theory yes, but that complicates things even further.
[02:13:05] *** Quits: vidot_j_ (vidot_j@moz-2q9eng.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[02:13:31] <Stebalien> aatch: Got it. I assume we now just use guard pages.
[02:13:46] *** Joins: jgallagher (john@moz-6ge.dhn.131.24.IP)
[02:14:21] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[02:14:33] <jgallagher> is there a `try!` macro that works with Option instead of Result? (e.g., given a Weak<T>, being able to say `let foo = try_option!(weak.upgrade())`)
[02:14:46] *** Joins: aisrael (aisrael@moz-e32.24v.213.210.IP)
[02:15:22] <Diggsey> jgallagher: I don't think so, but you can convert an Option into a Result IIRC
[02:15:33] *** Quits: nico (nico@moz-08u9pa.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:15:57] <Yurume> jgallagher: .ok_or().
[02:16:02] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[02:16:02] *** ChanServ sets mode: +ao pcwalton pcwalton
[02:16:10] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[02:16:11] <Yurume> (that's really a complement to Diggsey's answer)
[02:16:35] *** Quits: BageDev (textual@moz-47o.884.171.203.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:16:37] <jgallagher> Diggsey: Yurume: ah, interesting. although i don’t actually want to return an error; just a bare return
[02:16:55] <jgallagher> i’m inside a background thread, and if the thing i’m referring to is gone, i just want to give up
[02:16:58] <Diggsey> jgallagher: it's a common pattern to use Result with an empty error type
[02:17:11] <jgallagher> Diggsey: oh, does () impl Error?
[02:17:12] <Diggsey> Result<T, ()>
[02:17:35] <aatch> jgallagher, why not use `if let Some(val) = weak.upgrade() { /* do stuff */ }`?
[02:17:55] <aatch> jgallagher, does this function actually return anything?
[02:17:57] <jgallagher> aatch: then all of /* do stuff */ is indented another level :-/
[02:18:00] <jgallagher> no
[02:18:44] <aatch> jgallagher, well then what about `let foo = if let Some(val) = weak.upgrade() { val } else { return; }`?
[02:19:02] <Diggsey> jgallagher: Result<T,E> doesn't require that E implements Error
[02:19:05] <jgallagher> aatch: that’s similar to what i’m doing now with match
[02:19:28] <aatch> jgallagher, doesn't sound like you need this pattern lots and lots of times in the function.
[02:19:40] <jgallagher> Diggsey: yeah i just realized that :) 
[02:19:50] <jgallagher> aatch: no, but i use this pattern in several different functions
[02:20:22] <aatch> The try macro exists because it's common to have a similar pattern repeated dozens of times in the one function.
[02:20:42] * Sgeo wants ?
[02:20:52] * Diggsey too
[02:21:05] <aatch> I don't. No more lang items!
[02:21:07] * Yurume wants an interrobang
[02:21:19] <jgallagher> aatch: i don’t see how one function has anything to do with it… whether i’m repeating a 3-liner a bunch in one function or a bunch across a file, it’s still better as try!
[02:21:30] *** Quits: zz_kimundi (kimundi@moz-udrtd0.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:21:53] *** Quits: arunmk (arun@moz-vfv9bl.ca.comcast.net) (Client exited)
[02:22:04] <Sgeo> Monad syntax would be nice too
[02:22:27] <aatch> jgallagher, it's more that some functions would end up having more code for handling the Result than actual work.
[02:22:36] *** Joins: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net)
[02:23:04] <Sgeo> Why does the function get to be special anyway? I can't break out of a block in the middle of a function, can I?
[02:23:14] <Diggsey> yes?
[02:23:26] *** Quits: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net) (Client exited)
[02:23:37] * Sgeo wants Racket's let/ec
[02:23:42] <Sgeo> Diggsey, how?
[02:23:48] *** Joins: oceanwhit (bzlandfill@moz-a38b1m.ca.comcast.net)
[02:23:48] *** Joins: zz_kimundi (kimundi@moz-136e94.dip0.t-ipconnect.de)
[02:23:49] <Diggsey> return
[02:23:51] *** Quits: oceanwhit (bzlandfill@moz-a38b1m.ca.comcast.net) (Quit: CGI:IRC)
[02:24:00] <Havvy> Sgeo:  loop { x(); if !y() { break; } z(); break; }
[02:24:03] <huon> Sgeo: one might be able to in future
[02:24:05] <Sgeo> But that leaves the function, what if I only want to leave some block in the function
[02:24:05] *** zz_kimundi is now known as kimundi
[02:24:08] <huon> 'a: { ... braek 'a; ... }
[02:24:12] <huon> *break
[02:24:16] <woboats> Is there any ToString equivalent for &str? ie &'a self -> &'a str?
[02:24:19] <Sgeo> Havvy, that's horrific but ok
[02:24:28] *** Joins: oceanwhit (bzlandfill@moz-a38b1m.ca.comcast.net)
[02:24:28] <Diggsey> huon: that only works with loops doesn't it?
[02:24:33] <jgallagher> Diggsey: i can’t seem to get try! to compile with () for the error case: http://is.gd/qrYRQV
[02:24:40] <oceanwhit> why doesn't this work? http://is.gd/f9xX6C
[02:24:40] *** Joins: rmgk (ragnar@moz-qrjgnv.dyn.telefonica.de)
[02:25:00] <aatch> jgallagher, try! requires the function you use it in returns a Result
[02:25:20] <Havvy> Diggsey:  I so no reason not to disallow break out of block outside of loops, as I can encode that behavior with a loop.
[02:25:33] <jgallagher> aatch: ahh, ok
[02:25:36] <huon> Diggsey: proposed syntax for "one might be able to in future" :)
[02:25:39] <aatch> jgallagher, either use a normal `if let Some(val) { ... }` or make your own macro.
[02:25:40] <Havvy> `break` is basically a structured `goto`.
[02:25:49] *** Quits: playjax (chatzilla@moz-csjthg.optusnet.com.au) (Ping timeout: 121 seconds)
[02:26:06] <Sgeo> jgallagher, bad return type
[02:26:11] <Diggsey> jgallagher: try! returns a Result, you can't use it in a function that returns ()
[02:26:12] *** Quits: akiss (akiss@moz-ulk.jp0.1.195.IP) (Ping timeout: 121 seconds)
[02:26:18] <Sgeo> try!() will attempt to return the error case.
[02:26:20] <Sgeo> http://is.gd/baCxHX
[02:26:22] <Havvy> huon:  How does that behavior deal with blocks that have to evaluate to a type?
[02:26:23] <jgallagher> right, got it
[02:26:24] *** Joins: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net)
[02:26:25] <jgallagher> thanks all
[02:26:42] <Stebalien> oceanwhit: nums.len() returns a usize
[02:26:50] <Havvy> huon:  Or is it only for unit typed blocks?
[02:26:52] <aatch> Oh, btw, I'm pretty sure that SEME regions could make goto feasible with the region checker.
[02:27:30] <GBGamer> aatch: what's a SEME region?
[02:27:34] <aatch> !SEME
[02:27:34] <rustbot> Non-lexical borrow scopes https://github.com/rust-lang/rfcs/issues/811
[02:27:42] <oceanwhit> stebalien, is there a way to make it work? i can't figure it out
[02:27:48] <aatch> GBGamer, ^^
[02:27:52] <GBGamer> ooh that's cool
[02:28:03] <Havvy> aatch:  Yay, first time my bot is helping me out.
[02:28:07] *** Quits: rmgk_ (ragnar@moz-urdr0o.dyn.telefonica.de) (Ping timeout: 121 seconds)
[02:28:27] <huon> Havvy: no idea, purely hypothetically
[02:28:29] <Stebalien> oceanwhit: cast i to a i32, cast nums.len() to a usize, or change addOne to use usize's
[02:28:31] *** Quits: agile (mike@moz-m71dqt.rcsntx.sbcglobal.net) (Connection closed)
[02:28:32] <Diggsey> SEME is old news, what about MEME?!
[02:28:44] <huon> Havvy: I could imagine `break 'a foo;` to return foo, but ()-typed is good too
[02:28:47] <aatch> Of course, whether we support goto is another matter entirely.
[02:29:05] <GBGamer> aatch: don't have any idea why we would
[02:29:11] * Sgeo wants delimited continuations, although they might be worse than goto
[02:29:32] *** Joins: zzmp (zzmp@moz-ppks81.12ul.lrlq.5500.2604.IP)
[02:29:45] <aatch> But if you stop caring about the AST and start focussing on the control-flow instead goto isn't special at all.
[02:29:53] <oceanwhit> stebalien, thank you. is it possible to cast i to i32 at the declaration?
[02:30:02] <Havvy> huon:  break 'b &'a foo;  // Because why not?
[02:30:04] <Diggsey> aatch: would it have to be unsafe though?
[02:30:07] <GBGamer> *shrug*
[02:30:10] *** Quits: amitp (amitp@moz-plc8ig.ca.comcast.net) (Quit: Leaving.)
[02:30:16] <aatch> Diggsey, nope.
[02:30:20] <GBGamer> I just don't really see the point in an RAII language
[02:30:40] <Diggsey> aatch: it would be difficult to make sure things all got initialised precisely once with arbitrary goto...
[02:30:50] <Stebalien> oceanwhit: No. If you want i to start out as an i32, you should probably just cast len: `0..(num.len() as i32)`.
[02:31:10] <Stebalien> oceanwhit: Why are you iterating over `0..len` anyways?
[02:31:22] <aatch> Diggsey, you just restrict the use of goto such that those cases are rejected.
[02:31:24] <Havvy> I still don't actually know any good usage for `goto`.
[02:31:45] <huon> state machines are nice
[02:31:59] <Diggsey> aatch: I can't help but suspect it would get quite complicated to allow sufficiently useful goto...
[02:32:06] <Sgeo> huon, TCO can do state machines
[02:32:10] <Sgeo> I thinkj
[02:32:19] <huon> Sgeo: yes, and so can a loop with a match
[02:32:20] <aatch> Diggsey, basic liveness analysis can tell us whether a variable is definitely initialised at a certain usage point.
[02:32:49] <Diggsey> so you only allow jumping to a place where the liveness set is identical?
[02:33:12] <Havvy> huon:  Would a stateMachine!{} macro also work?
[02:33:28] *** Quits: zzing (textual@moz-jucm1n.cpe.distributel.net) (Connection closed)
[02:33:34] <aatch> Diggsey, I guess? I mean, it's more that the compiler would complain that `foo` might not be initialised and then error out.
[02:33:46] *** Quits: zzmp (zzmp@moz-ppks81.12ul.lrlq.5500.2604.IP) (Ping timeout: 121 seconds)
[02:33:52] <aatch> Diggsey, rather than it making sure that the goto was valid itself.
[02:33:55] <huon> Diggsey: I think one could consider a goto an incoming edge, and would compute the liveness by intersect the liveness sets of all incoming edges
[02:34:02] <oceanwhit> sebalien, ok, is that like a 'nice' way of doing it? And because i have to itereate of a gigantic vector, and if i say for (index, i) in vec.iter().enumerate(), i can't say things like i + 10.
[02:34:19] <huon> Diggsey: e.g. `let a; if foo { a = 1 }` is valid now: a can't be used outside the if since it's not guaranteed to be live
[02:34:19] <oceanwhit> stebalien, ok, is that like a 'nice' way of doing it? And because i have to itereate of a gigantic vector, and if i say for (index, i) in vec.iter().enumerate(), i can't say things like i + 10.
[02:34:25] <huon> Diggsey: similarly with a goto
[02:34:31] <aatch> Diggsey, the only issue with goto is actually destructors.
[02:35:03] <huon> Havvy: maybe, but I've not tried (evidence in favour: one can write a fall-through match macro)
[02:35:42] <aatch> And by "only issue" I mean, "big enough issue to make goto completely untenable".
[02:35:45] <Diggsey> playbot: let a; if (true) { a = 1} else { a = 2 } a
[02:35:46] -playbot- <anon>:9:19: 9:25 warning: unnecessary parentheses around `if` condition, #[warn(unused_parens)] on by default
[02:35:47] -playbot- <anon>:9         let a; if (true) { a = 1} else { a = 2 } a
[02:35:47] -playbot- output truncated; full output at: http://bit.ly/1ckgDBm
[02:35:52] *** Quits: chc4 (chc4@moz-pdo0at.ma.comcast.net) (Quit: AHHHHH BEES)
[02:35:53] <Havvy> Anyways, I'm tired. I might bring this discussion back up tomorrow on Reddit.
[02:36:59] <aatch> Basically, with goto you either have to prevent jumping over destructor calls or figure out some way of calling the destructors on your way out.
[02:37:04] <Havvy> That warning ought to be disabled for playbot.
[02:37:37] *** Joins: ismaelga (ismaelga@moz-op208d.rev.vodafone.pt)
[02:38:03] <Stebalien> oceanwhit: Personally, I'd just use a `while let Some(n) = iter.next() {}` loop and then advance the iterator using `iter.nth(number_to_skip - 1)`.
[02:38:35] *** Quits: jadbaires (jadrian@moz-6u6inc.dsl.telepac.pt) (Ping timeout: 121 seconds)
[02:39:06] <Stebalien> oceanwhit: But it really depends on the situation. In some cases, I might just use a plain `loop {}` and advance the iterator entierly within the loop.
[02:39:34] *** bentley|away is now known as bentley
[02:39:53] <aatch> oceanwhit, there's also the old-fashioned option of just indexing the vector.
[02:39:56] *** Quits: ismaelga_ (ismaelga@moz-e71qeg.rev.vodafone.pt) (Ping timeout: 121 seconds)
[02:39:58] <Stebalien> oceanwhit: But I'm also biased. I hate indexing because I always get it wrong.
[02:40:09] *** Quits: popow (Thunderbird@moz-03f.kd0.252.223.IP) (Ping timeout: 121 seconds)
[02:40:22] *** Joins: kgrandon (Adium@moz-9svgt8.hjek.d045.0009.2601.IP)
[02:40:26] <oceanwhit> stebalien, I see, I'm still getting rust, and the way things are done. Right now I'm just messing around with euler problems
[02:40:45] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[02:40:53] <aatch> Though I'd agree with Stebalien that manually advancing the iterator is a good way to go.
[02:41:31] <oceanwhit> aatch i tried indexing it with for (index, i) in nums.iter().enumerate(), but that makes i some weird type that i cant use i think
[02:41:54] <Stebalien> oceanwhit: Actually, if you're planning on indexing into a vector, why do you need an i32?
[02:43:13] <Stebalien> oceanwhit: I'm guessing that the problem is that nums.iter() yields nums by reference (&i32) so your loop should be `for (index, &i) in nums.iter.enumerate()`.
[02:43:30] <Stebalien> oceanwhit: If you want i by value, that is.
[02:43:34] *** Quits: Stebalien (Stebalien@moz-i00.hrk.38.73.IP) (Quit: leaving)
[02:43:49] *** Joins: Stebalien (Stebalien@moz-i00.hrk.38.73.IP)
[02:43:50] <oceanwhit> stebalien, Ohhh.
[02:44:35] *** Joins: mpiechotka (mpiechotka@moz-ptb6iv.ca.comcast.net)
[02:44:41] <srjek_> Does anyone know what to do with "cfgspec:1:9: 1:16 error: unexpected token: `default`" when trying to build the libc crate on windows?
[02:44:42] <oceanwhit> stebalien, and I shose to use i32 because i wasn't sure what else to do lol
[02:44:45] *** srjek_ is now known as srjek
[02:45:31] <oceanwhit> stebalien, anyway, i guess i got it now, thanks for your help!
[02:45:49] *** Quits: mpiechotka (mpiechotka@moz-ptb6iv.ca.comcast.net) (Client exited)
[02:45:49] *** Quits: whidgle (Mibbit@moz-6pu.8ab.250.191.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:47:13] <Stebalien> oceanwhit: i32 when you have a small number, i64 when you don't know, usize when you're indexing, isize rarely.
[02:47:31] *** Joins: psy (psy@moz-ous.ntd.6.103.IP)
[02:48:06] *** Joins: kazimuth (james@moz-gq4.d17.189.18.IP)
[02:48:17] *** bentley is now known as bentley|away
[02:48:19] <Stebalien> oceanwhit: *usize when you're dealing with anything proportional to the architecture's address space.
[02:49:06] *** Joins: popow (Thunderbird@moz-03f.kd0.252.223.IP)
[02:49:39] <Stebalien> oceanwhit: It's rather confusing. Someone sometime was going to write a rule of thumb for this but I can't find it now.
[02:49:59] *** Joins: bombela (Mibbit@moz-mu0.s74.170.68.IP)
[02:51:27] <seanmonstar> is it possible to change the variant of an enum inside a &mut method? http://is.gd/17hyV7
[02:51:44] *** Joins: brycefisher (chatzilla@moz-2p5.i2o.220.104.IP)
[02:52:25] *** Joins: logan_e (logan_e@moz-ltn.qg3.218.73.IP)
[02:53:28] *** Joins: sp0 (seth@moz-906uqd.internode.on.net)
[02:53:31] <brycefisher> what graph data structures are part of the std lib?
[02:53:38] <aatch> brycefisher, none
[02:53:42] *** Joins: mdinger (mdinger@moz-us59a2.9bf5.ppaa.0306.2602.IP)
[02:53:53] <brycefisher> hahah -- anything I should look at in crates.io?
[02:54:05] *** Joins: Yeti (Mibbit@moz-cb9mg6.ST.HMC.Edu)
[02:54:09] <aatch> brycefisher, petgraph, I think it's called.
[02:54:11] *** Quits: logan_e (logan_e@moz-ltn.qg3.218.73.IP) (Client exited)
[02:54:33] <brycefisher> just out of curiosity, why no graphs in std?
[02:54:53] *** Quits: oceanwhit (bzlandfill@moz-a38b1m.ca.comcast.net) (Quit: CGI:IRC (Ping timeout))
[02:54:56] <aatch> brycefisher, they're complex to do in Rust and not really that common.
[02:54:57] *** Joins: danv (danv@moz-0js00c.iinet.net.au)
[02:55:03] <huon> brycefisher: std is designed to be restricted at least for 1.0
[02:55:07] <aatch> brycefisher, at least, not as a generic container.
[02:55:07] <seanmonstar> are they in std in other languages?
[02:55:12] <huon> in any case, do any languages have a graph in std?
[02:55:31] <brycefisher> none that i know of, but I don't know that many languages
[02:55:40] *** Joins: logan_e (logan_e@moz-ltn.qg3.218.73.IP)
[02:55:44] <aatch> I know a fair few and none come to mind.
[02:56:02] <brycefisher> seems totally reasonable NOT to implement graphs in std imho
[02:56:15] <aatch> Generally you either have an object graph by accident or you have a specific need for a graph.
[02:56:20] *** Quits: nyx (nyx@moz-ivelpd.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:56:30] *** Joins: Rym_ (y@moz-a44.2as.55.31.IP)
[02:56:33] <brycefisher> makes sense -- thanks all!
[02:56:47] *** Quits: kazimuth (james@moz-gq4.d17.189.18.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:56:56] <aatch> Like, I needed to construct a DAG to do dependency resolution in a build script.
[02:58:05] <annodomini> I'm trying to think of a good example to use for my intro to rust talk at a 1.0 release party/meetup.
[02:58:15] <FreeFull> If you never need to remove elements, a vector of indices works well
[02:58:19] *** Joins: zzing (textual@moz-jucm1n.cpe.distributel.net)
[02:58:35] <mdinger> If I do http://is.gd/TUVUOG which is modified from the docs example (http://doc.rust-lang.org/nightly/std/iter/trait.Iterator.html#method.any), `any` doesn't work anymore. `any` doesn't take a reference so I don't see why `x` must be dereferenced. 
[02:58:46] <FreeFull> Making sure the graph is a DAG is trickier though, unless insertion order is guaranteed
[02:58:55] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[02:58:59] <annodomini> There are several people there who haven't tried Rust at all, so I am planning on walking through installing the compiler, writing and running "Hello, World", and then I want a slightly more involved example that will give a bit of a taste of the language and standard library.
[02:59:40] *** Quits: Stebalien (Stebalien@moz-i00.hrk.38.73.IP) (Quit: leaving)
[02:59:46] <seanmonstar> mdinger: .any() passes references, otherwise it would be moving the values out of the array
[03:00:22] <annodomini> I'm thinking maybe something like a simple implementation of one of the standard unix utilities; wc is probably a little too simple, fmt might work but then you get into Unicode width issues, or maybe something like "dc".
[03:00:29] <mdinger> seanmonstar: how do you tell? what do you look for in the docs?
[03:00:44] <aatch> FreeFull, well in my case I was using Python, and a cycles were an error anyway.
[03:00:59] <annodomini> Anyone else have any suggestions for a simple program to walk through to highlight some Rust features, while being able to run on any platform with no other dependencies?
[03:01:02] *** Quits: Rym_ (y@moz-a44.2as.55.31.IP) (Ping timeout: 121 seconds)
[03:01:17] <seanmonstar> mdinger: i believe because that Iterator's Item is &T
[03:01:21] <Yeti> hey folks, anyone know anything about the error "cannot borrow mutably in a '&' reference"? I'm trying to pass mutable data from a reference to a function.
[03:01:34] <aatch> mdinger, in the absence of any other information, a value must be assumed to be move-by-default.
[03:01:39] <huon> Yeti: how are you calling the function/
[03:01:40] <huon> ?
[03:01:54] *** Joins: lenstr (lenstr@moz-ca8.vju.25.171.IP)
[03:02:04] <annodomini> Yeti: Showing a short example would help.
[03:02:21] <aatch> http://play.rust-lang.org/
[03:02:22] <Yeti> one of the arguments to the function is &mut self.game.gl, and i have a reference to self.game
[03:02:33] <Yeti> the actual call is "self.rendering.render(&self, &mut self.game.gl, render_args);"
[03:02:37] <Yeti> not pretty sorry :p
[03:02:39] *** Quits: lenstr (lenstr@moz-ca8.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[03:02:41] <seanmonstar> Yeti: you need a &mut reference to self.game
[03:02:51] *** Joins: lenstr (lenstr@moz-ca8.vju.25.171.IP)
[03:02:55] *** Quits: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[03:02:58] <Yeti> it's of type &'a mut Game
[03:03:01] <Yeti> which should be fine i think?
[03:03:02] <mdinger> aatch: but it didn't move...
[03:03:08] <huon> Yeti: what is `self`?
[03:03:21] <Yeti> a struct called Player
[03:03:21] <aatch> mdinger, what didn't?
[03:03:38] <huon> Yeti: I mean, how's it declared in the method you're calling render in?
[03:03:54] <mdinger> aatch: from the playpen link, the values didn't move into the closure. I have to dereference them
[03:03:59] *** Joins: jyxent (jyxent@moz-jvi.6ig.155.107.IP)
[03:04:13] <Yeti> huon what do you mean exactly? how is Player declared? or the function?
[03:04:15] *** Quits: npm (npm@moz-92sbjt.wa.comcast.net) (Quit: AndroIRC - Android IRC Client ( http://www.androirc.com ))
[03:04:17] *** Quits: lenstr (lenstr@moz-ca8.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[03:04:22] <seanmonstar> Yeti: you can't pass a &self and &mut self.game.gl. whatever render() needs from the first argument (self), try passing just the few properties
[03:04:42] <huon> Yeti: fn something(/* self */, ...) { ... self.rendering.render(...)  ... }
[03:05:08] <aatch> mdinger, you have a [i32; 5] which doesn't implement `IntoIterator` as far as I know.
[03:05:22] <seanmonstar> aatch: it does
[03:05:23] *** Joins: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net)
[03:05:25] <Yeti> huon and seanmonster thanks, i think i might be able to fix it with that
[03:05:26] <seanmonstar> well
[03:05:35] <aatch> mdinger, however, `&[T]` does, and produces &T
[03:05:40] <seanmonstar> aatch: hm, it mayb be derefencing
[03:05:50] <Yeti> i tried dereferencing :/
[03:06:02] <seanmonstar> Yeti: sorry, talking to aat ch
[03:06:10] <huon> Yeti: what's `/* self */` for your "something"?
[03:06:16] *** Joins: if_e1se (uid16886@moz-js7dlj.uxbridge.irccloud.com)
[03:06:38] <aatch> seanmonstar, mdinger, ah, so &[T; 5] implements IntoIterator.
[03:06:43] <huon> Yeti: it *can't* be `&self`: one can't mutate a mutable reference through a shared one.
[03:07:03] *** Joins: p1start (p1start@moz-nftjhe.org)
[03:07:11] <aatch> Still, it produces `&T` values since moving out of a fixed-size vector is tricky in general.
[03:07:13] <Yeti> huon hmm i'm still new to rust and stuff, sorry for being slow on the uptake. 
[03:07:21] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[03:07:35] <aatch> We could implement `IntoIterator` for [T;N] where T:Copy I guess.
[03:08:02] <Diggsey> aatch: why the Copy bound?
[03:08:04] <huon> Yeti: it may be easier to help if you past the whole function you're working on, or even the whole file
[03:08:19] <Yeti> huon sure one sec
[03:08:44] <aatch> Diggsey, because what would mean to have some unknown number of elements moved out of a fixed-size vector?
[03:08:56] <huon> Diggsey: it's not possible to partially move out of an array on the stack atm
[03:09:06] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[03:09:09] <huon> (although T: Clone works too)
[03:09:17] <Yeti> huon here's the code. I think trying to pass &mut self.game.gl in render is superfluous though http://pastebin.com/ASMPdMhG
[03:09:20] <aatch> huon, oh, good point, that works too.
[03:09:27] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[03:09:37] <FreeFull> It is possible to fully move out, but that requires slice patterns
[03:09:46] <FreeFull> And I think those are still feature-gated
[03:09:48] <huon> Yeti: yeah, you'll need `pub fn render(&mut self, ...)`
[03:09:53] <Diggsey> but into_iter consumes self?
[03:10:03] <seanmonstar> Yeti: im thinking something like this is what you need to do http://is.gd/2npfaL
[03:10:11] <huon> FreeFull: doesn't allow the array to continue to be used by-value
[03:10:17] *** Quits: jyxent (jyxent@moz-jvi.6ig.155.107.IP) (Quit: leaving)
[03:10:23] <huon> Diggsey: yes, but it needs to store it internally
[03:10:26] *** Joins: dmac (dmac@moz-2ig65r.ca.comcast.net)
[03:10:29] *** Joins: jyxent (jyxent@moz-jvi.6ig.155.107.IP)
[03:10:34] <huon> and move out as .next() is called
[03:10:37] *** Joins: khades (Thunderbird@moz-ual.b31.186.31.IP)
[03:10:42] <Sgeo> I should try implementing some esolangs in Rust, or something
[03:10:47] <huon> (and presumably would be on the stack: heap allocating would be lame ;P )
[03:10:50] <seanmonstar> Yeti: of course, i made up some stuff, since i don't know what yours does. the point was to not borrow &self and &mut self, since &mut self must be unique
[03:10:50] <FreeFull> huon: Ah, yeah
[03:10:52] <Yeti> huon and seanmonster thx i think i can work through it from here 
[03:10:56] <Yeti> <3
[03:11:09] <Diggsey> huon: so it could be done with unsafe
[03:11:23] <huon> Diggsey: it would be incorrect unsafe
[03:12:04] <mdinger> well, iterator documentation is confusing. .map() takes `|&x|`,  .any() takes `|x|`. Generally I just guess what I need and hopefully it compiles
[03:12:13] *** Joins: stjahns_ (stjahns@moz-9oh245.ed.shawcable.net)
[03:12:14] <huon> basically one needs to have precise control over when destructors of things on the stack run, and we don't really have that now
[03:12:18] <scott> mdinger: the argument is just a pattern
[03:12:18] <huon> AFAIK
[03:12:33] <scott> mdinger: taking |&x| is like doing |tmp| { let &x = tmp; ... }
[03:12:43] *** Quits: zzing (textual@moz-jucm1n.cpe.distributel.net) (Quit: Textual IRC Client: www.textualapp.com)
[03:12:47] <scott> which is the same as |tmp| { let x = *tmp; ... }
[03:12:53] <huon> mdinger: map and any recieve the same type: whatever type the iterator they're called on yields
[03:12:55] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[03:12:56] <scott> I prefer to just take |x| and use *x inside the closure usually
[03:13:02] <scott> I find &x patterns confuse people
[03:13:14] *** Quits: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net) (Client exited)
[03:13:16] <Diggsey> huon: hmm, maybe I'm missing something, but "next()" could keep track of how many elements have been moved out of some internal storage on the stack, and then Drop frees the remaining ones?
[03:13:29] <seanmonstar> mdinger: any() takes Iterator::Item, as does .map(), etc. the docs show FnMut(Self::Item). the iterator you're getting has ::Item = &T
[03:13:35] <aatch> scott, bah, go the opposite direction, destructure values in function arguments!
[03:13:49] <huon> Diggsey: there's an implicit "drop everything" inserted
[03:14:09] <mdinger> where do you find ::Item = &T ?
[03:14:25] <aatch> mdinger, it depends on the specific iterator you have.
[03:14:26] *** Joins: winding-lines (textual@moz-g7k4j8.ca.comcast.net)
[03:14:28] <Diggsey> huon: it could store it on the stack as just a byte array
[03:14:32] <huon> Diggsey: struct Foo { x: [T; n] } implicitly has a destructor `fn drop(&mut self) { for val in self.x { drop(val) } }
[03:14:35] <scott> aatch: sarcasm or no? :p
[03:14:37] <huon> Diggsey: can't get the types to work
[03:14:38] <seanmonstar> mdinger: because [T; 5].into_iter() its alling &[T].into_iter()
[03:14:47] <seanmonstar> erg, is calling*
[03:14:49] <scott> aatch: I like some argument patterns, but not &x in particular
[03:14:53] <aatch> scott, both
[03:14:57] *** Quits: idegen (greg@moz-9c4nle.or.frontiernet.net) (Quit: Leaving.)
[03:15:02] <scott> e.g. |(x, y)| is handy
[03:15:27] <scott> which might be |&(x, y)| in some cases but I'm probably okay with that
[03:15:35] <aatch> scott, ah, but what about `fn foo(Foo { x, ..}: Foo)`?
[03:15:39] <huon> Diggsey: i.e. given a generic [T; n] there's no way to make a byte array with the right properties like size and alignment
[03:15:39] <scott> not a fan
[03:15:47] <scott> do it in the next line if you want that, I say
[03:15:49] <aatch> scott, didn't think so.
[03:15:54] <huon> Diggsey: of course, it's possible to fix them, but the point is we can't do it now
[03:16:10] <aatch> scott, I don't actually do that, function signatures in Rust can get long enough as-is.
[03:16:16] <scott> indeed
[03:16:23] <seanmonstar> so, is it possible to change variants in a &mut method?
[03:16:30] <scott> Haskell has an advantage here since types and values are written on different lines
[03:16:39] <huon> seanmonstar: yes, *self = SomeOtherVariant
[03:16:41] <scott> so it can get away with larger argument patterns cleanly
[03:16:45] <seanmonstar> huon: http://is.gd/17hyV7
[03:16:48] <huon> seanmonstar: of course the normal borrowing/moving rules apply
[03:16:56] <seanmonstar> huon: if the variants wrap a value :D
[03:17:19] <FreeFull> seanmonstar: Option::take(&mut self) is an example
[03:17:57] <seanmonstar> FreeFull: its super close. it uses mem::swap, but i cant, cause i need a value inside the variant to put back inside
[03:18:04] <aatch> seanmonstar, in that example, you've borrowed `self` in that arm by borrowing the contents of the variable.
[03:18:05] <FreeFull> playbot: let mut foo = Some(3); let bar = foo.take(); format!("{} {}", foo, bar)
[03:18:06] -playbot- output truncated; full output at: http://bit.ly/1E70UfF
[03:18:10] <Diggsey> huon: ah, ok, seems like that would be useful, equivalent to C++ aligned_storage
[03:18:26] <seanmonstar> aatch: yea i know. i was fiddling with various ways, that's where i was when i clicked share
[03:18:35] *** Quits: new_one (new_one@moz-r18.up4.42.128.IP) (Quit: WeeChat 1.1.1)
[03:18:56] <Diggsey> huon: actually I thought of a way to do it
[03:19:00] <huon> Diggsey: yeah definitely, although I don't think it's the best way to solve this particular problem
[03:19:16] <huon> Diggsey: instead of just providing more precise control over destructors on the stack
[03:19:36] <huon> Diggsey: (e.g. https://github.com/rust-lang/rfcs/pull/197 )
[03:19:41] <Diggsey> huon: just wrap it in an Option<T>, and then have it set to None all the time, when it's actually storing a Some<T> :P
[03:19:53] <huon> Diggsey: ew
[03:19:56] <calc0000> quick question: got a "cannot convert to a trait object because trait `Factory` is not object-safe"
[03:19:56] <huon> :P
[03:19:57] <calc0000> any tips?
[03:20:12] <mdinger> seanmonstar, aatch, scott: thanks
[03:20:21] <huon> calc0000: http://huonw.github.io/blog/2015/01/object-safety/ for more on object safety
[03:20:21] <seanmonstar> calc0000: some methods on that trait aren't object safe. such as if they return Self
[03:20:25] <Mutabah> calc0000: The trait Factory uses Self or by-value methods
[03:20:26] *** Quits: jeffasinger (jeff@moz-1j1qti.cable.mindspring.com) (Client exited)
[03:20:35] <mdinger> i think i knew &x was a pattern but when you get confused, everything goes out the window
[03:20:40] <calc0000> thanks guys but the only method on the trait is fn produce (&mut self) -> Token
[03:20:53] <Mutabah> calc0000: Does it require any other Traits?
[03:21:01] <huon> calc0000: what's the definition?
[03:21:02] <calc0000> ah that it does: Sync, Send, Clone
[03:21:08] <seanmonstar> calc0000: Clone is it
[03:21:13] <Mutabah> Clone is not object safe
[03:21:38] <calc0000> ah fascinating
[03:21:44] <calc0000> thanks guys saving my butt again :P
[03:22:10] *** Quits: stjahns_ (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[03:22:15] *** Joins: eric_lagergren (barsonme@moz-lr1hrn.wa.comcast.net)
[03:22:20] *** Quits: ismaelga (ismaelga@moz-op208d.rev.vodafone.pt) (Connection closed)
[03:22:31] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[03:24:40] *** Quits: brycefisher (chatzilla@moz-2p5.i2o.220.104.IP) (Quit: ChatZilla 0.9.91.1 [Firefox 39.0a2/20150429232507])
[03:25:59] *** Joins: errordeveloper (ilya@moz-649.f7i.219.2.IP)
[03:26:34] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Ping timeout: 121 seconds)
[03:27:01] <seanmonstar> all my fiddling, seems i need to use unsafe
[03:28:12] <Diggsey> from docs: "impl<Idx> Clone for Range<Idx> where Idx: Clone + Clone + Clone" <- let's make extra sure Idx is Clone!
[03:28:24] <ebfull> lol
[03:28:39] *** Joins: yichoi (yichoi@moz-t0r.chb.167.121.IP)
[03:29:41] *** Quits: saml_ (saml@moz-rkfmct.res.rr.com) (Ping timeout: 121 seconds)
[03:30:16] *** Quits: errordeveloper (ilya@moz-649.f7i.219.2.IP) (Ping timeout: 121 seconds)
[03:30:52] *** Quits: yichoi (yichoi@moz-t0r.chb.167.121.IP) (Connection closed)
[03:31:33] *** Joins: yichoi (yichoi@moz-t0r.chb.167.121.IP)
[03:31:46] *** Joins: choplin (choplin@moz-qkm9un.ap.nuro.jp)
[03:31:59] *** Quits: logan_e (logan_e@moz-ltn.qg3.218.73.IP) (Ping timeout: 121 seconds)
[03:32:35] *** Quits: Outlander (Mr@moz-tiv139.internode.on.net) (Quit: leaving)
[03:33:05] *** Joins: DerisiveLogic (smuxi@moz-g93io6.res.rr.com)
[03:34:00] *** Joins: Verdagon (Verdagon@moz-ff302e.ca.comcast.net)
[03:35:20] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Connection closed)
[03:37:18] *** Quits: v21 (vee@moz-07pghd.asianet.co.th) (Quit: Leaving)
[03:40:07] *** Quits: gekkio (gekkio@moz-gjerka.fi) (A TLS packet with unexpected length was received.)
[03:41:20] *** Quits: cmn (cmn@moz-r1h.buc.47.78.IP) (Connection closed)
[03:42:39] *** Quits: tadh (quassel@moz-88tk3f.res.rr.com) (Ping timeout: 121 seconds)
[03:43:20] *** Joins: tadh (quassel@moz-88tk3f.res.rr.com)
[03:44:02] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[03:44:17] <scott> Diggsey: yeah I opened an issue for that... never saw it tripled though, only doubled
[03:44:18] *** Joins: tiago2 (tiago@moz-heb2nr.dsl.telepac.pt)
[03:44:44] <Diggsey> points to whoever can find a quadruple :P
[03:45:27] <srjek> cargo is trying to pass a --cfg feature="default" flag to rustc, but then rustc throws up. Is that supposed to be like that?
[03:45:38] *** Quits: JeroenDeDauw (JeroenDeDau@moz-62194h.4237.n28a.04f8.2a01.IP) (Ping timeout: 121 seconds)
[03:45:41] *** Joins: dellavg (dellavg@moz-t682jd.retail.telecomitalia.it)
[03:45:41] *** Quits: luks (luks@moz-970ftt.de) (A TLS packet with unexpected length was received.)
[03:45:46] *** Quits: m_khvoinitsky (quassel@moz-bkl6sn.d57a.lq23.04f8.2a01.IP) (Connection closed)
[03:45:58] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Connection closed)
[03:46:25] *** Joins: smerft (Mibbit@moz-hva2qp.tpgi.com.au)
[03:46:28] <scott> this is the issue https://github.com/rust-lang/rust/issues/25022
[03:47:07] *** Quits: tiago1 (tiago@moz-rkleei.dsl.telepac.pt) (Ping timeout: 121 seconds)
[03:47:13] *** Quits: fjh (fjh@moz-mof4p1.62vh.lq23.04f8.2a01.IP) (Quit: ZNC - http://znc.in)
[03:47:35] <scott> I have a theory: one extra Clone bound for each field of that parameter type in the structure
[03:47:53] *** Joins: Guest (textual@moz-rtn.fg7.77.192.IP)
[03:47:55] <scott> Wrapping<T> has one field T and Range<Idx> has two fields Idx
[03:47:57] *** Quits: Guest_ (textual@moz-rtn.fg7.77.192.IP) (Connection closed)
[03:48:28] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[03:49:11] *** Quits: aisrael (aisrael@moz-e32.24v.213.210.IP) (Client exited)
[03:49:18] *** Parts: arty (Mibbit@moz-ineiim.il.comcast.net) ()
[03:49:27] *** Joins: BageDev (BageDevimo@moz-47o.884.171.203.IP)
[03:49:27] *** Joins: fabianvf (fabianvf@moz-fjqmui.va.comcast.net)
[03:49:40] <BageDev> Anyone feel like doing a kinda code-review on a kinda convoluted solution to a problem? I'm after nit-picking and all the rest. http://is.gd/zYmruy
[03:50:04] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[03:50:05] <Diggsey> are there any plans to allow parameterising over traits rather than types?
[03:50:36] *** Joins: Rym_ (y@moz-a44.2as.55.31.IP)
[03:50:52] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[03:51:25] *** Quits: BageDev (BageDevimo@moz-47o.884.171.203.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[03:51:39] <Diggsey> playbot-mini: trait ObjClone<Bounds> : Bounds { fn obj_clone(&self) -> Box<Bounds>; }
[03:51:40] -playbot-mini- <anon>:1:26: 1:32 error: `Bounds` is not a trait
[03:51:40] -playbot-mini- <anon>:1 trait ObjClone<Bounds> : Bounds { fn obj_clone(&self) -> Box<Bounds>; }
[03:51:40] -playbot-mini- output truncated; full output at: http://bit.ly/1Ef544a
[03:52:12] *** Quits: twi (twi@moz-dhvtp3.clients.your-server.de) (A TLS packet with unexpected length was received.)
[03:52:15] <smerft> note: this feature may not be used in the beta release channel error: aborting due to previous error /// when cargo run --example all_widgets /// CONROD
[03:52:34] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[03:52:46] *** Quits: Guest74 (textual@moz-7ai.1eq.237.96.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[03:53:12] <currysoup> Heya - does anyone know why rustc seems to think plugin_map is immutable when i've borrowed it as mutable in here: http://is.gd/JxQ7F8
[03:53:29] *** Quits: fabianvf (fabianvf@moz-fjqmui.va.comcast.net) (Ping timeout: 121 seconds)
[03:54:11] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[03:54:32] <Diggsey> BageDef: looks reasonable to me, although it's difficult to tell without knowing what problem the code is trying to solve :P
[03:54:52] <smerft> any help for poor old me?? D:
[03:55:12] *** Quits: Rym_ (y@moz-a44.2as.55.31.IP) (Ping timeout: 121 seconds)
[03:55:53] <srjek> currysoup: You might be trying to make a reference to a reference
[03:56:33] <niconii> currysoup: right, your argument is already a &mut HashMap, and you're trying to take a &mut &mut HashMap
[03:56:41] *** Quits: narann (narann@moz-j49beg.dsl.netrevolution.com) (Quit: Leaving)
[03:56:53] <currysoup> Huh, i thought things were automatically dereferenced
[03:57:09] <currysoup> That seems to be the issue though - you're right 
[03:57:19] <Diggsey> smerft: I think noone knows rather than noone is willing to help :P
[03:57:19] <currysoup> I guess parameter passing isn't the same as turning -> into .
[03:57:21] <scott> specifically, you get that error message because althought plugin_map's type is &mut HashMap<String, &'static str>, plugin_map itself is immutable
[03:57:33] <scott> ie. you couldn't reassign plugin_map to a new &mut HashMap<String, &'static str> value
[03:57:45] <currysoup> :) thanks a lot everyone
[03:57:50] <niconii> currysoup: might just be checking mutability before it does any auto-deref stuff
[03:57:54] <smerft> Yo /b/ro's I need help to set up l'ConRod
[03:58:06] <Diggsey> oh my bad
[03:58:17] <Diggsey> I read srjek's problem as yours
[03:58:19] *** Joins: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP)
[03:58:20] <currysoup> quite a confusing error message though - not the first time ive had issues with autoderef :P
[03:58:37] *** Joins: gekkio (gekkio@moz-gjerka.fi)
[03:59:01] <Diggsey> smerft: some features are not stable yet, and so can only be used with a nightly build of rust
[03:59:08] *** Quits: orangeshark (erik@moz-74lqvs.44tj.56ot.0306.2602.IP) (Quit: Leaving)
[03:59:39] <smerft> ok, just downloaded the nightly
[03:59:42] <niconii> currysoup: well, the reason for that error message is that you were trying to take a &mut of the actual immutable argument/variable storing the &mut
[03:59:47] *** Joins: m_khvoinitsky (quassel@moz-bkl6sn.d57a.lq23.04f8.2a01.IP)
[04:00:00] <Verdagon> hey fellas
[04:00:02] *** Joins: logan_e (logan_e@moz-ltn.qg3.218.73.IP)
[04:00:05] <Verdagon> ive got a file main.rs
[04:00:10] <Verdagon> which uses macros defined in macros.rs
[04:00:11] <smerft> wassup bae Verdagon
[04:00:16] <Verdagon> lol thx smerft
[04:00:24] <Verdagon> so, i also have a file monotonify.rs
[04:00:29] <Verdagon> which wants to use the macros in macros.rs
[04:00:41] <Verdagon> main.rs can reach into macros.rs by saying:
[04:00:41] <Verdagon> #[macro_use]
[04:00:42] <Verdagon> mod macros;
[04:00:47] <Verdagon> but monotonify can't do that
[04:00:55] <smerft> lik me pl0x
[04:01:01] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[04:01:05] <smerft> hehe
[04:01:06] <Verdagon> "error: cannot declare a new module at this location"
[04:01:17] * Diggsey hopes there was supposed to be an 'e' on the end...
[04:01:23] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[04:01:36] <smerft> i am l'PapaSmurf >:)
[04:01:36] <currysoup> niconii: Yeah - essentially the pointer is immutable even if the contents behind the pointer are mutable ?
[04:02:33] <niconii> currysoup: right, it's like if you had `let plugin_map = &mut x;` -- naturally you can't do `&mut plugin_map` because plugin_map itself is immutable
[04:03:13] *** Joins: oceanwhit (bzlandfill@moz-a38b1m.ca.comcast.net)
[04:03:16] <smerft> Guys I cargo ran conrod, I will report back
[04:03:18] <currysoup> niconii: cool, thanks a lot! As always, I really appreciate how friendly this community is <3
[04:03:55] <niconii> currysoup: (it *is* possible to make an argument mutable, by the way, like `fn f(mut x: i64) { ... }`, it's just that that wasn't the real problem here)
[04:04:15] <niconii> currysoup: yeah, it's pretty great :)
[04:04:27] <smerft> note: /usr/bin/ld: cannot find -lfreetype /usr/bin/ld: cannot find -lXcursor /usr/bin/ld: cannot find -lXxf86vm collect2: ld returned 1 exit status  error: aborting due to previous error Could not compile `conrod`.
[04:04:33] <srjek> Well, I discovered my issue was --feature="default" getting turned into --feature=default by my shell and a wrapper I had around rustc. :/
[04:04:34] <smerft> this is on Nightly
[04:04:37] *** Quits: Wild_Cat (Max@moz-fa8mvt.dsl.teksavvy.com) (Ping timeout: 121 seconds)
[04:04:49] <Sgeo> niconii, how come I can have a &mut as an argument type but don't need to make the argument mut?
[04:04:54] <Sgeo> To use the &mut
[04:05:00] <oceanwhit> is it possible to alter the elements of a vector that your itererating over (within the for)?
[04:05:10] <niconii> Sgeo: because you're not mutating the &mut itself, you're just mutating what it points to
[04:05:25] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Ping timeout: 121 seconds)
[04:05:47] *** Joins: BageDev (BageDevimo@moz-og7.cn8.251.116.IP)
[04:05:47] <currysoup> niconii: Yeah i was going to ask if you end up with C++ Style const madness, only with mut - akin to 'const int* const' - having the reference itself be immutable is nice design (a lot of java linters get upset if you modify a reference since its not obvious to newbies that the semantics are reference-by-value)
[04:06:15] <smerft> Guys, L'Help Me Please
[04:06:37] <Sgeo> So if I own a &mut I can mutate what's behind it, but if I point to a &mut with a & I can't?
[04:06:51] *** Joins: forgottenone (forgottenon@moz-ha6.416.233.176.IP)
[04:06:58] <niconii> smerft: it seems like you're missing certain c libraries which conrod depends on
[04:07:32] <Diggsey> smerft: https://github.com/PistonDevelopers/conrod#dependencies
[04:07:47] <smerft> thanks boys
[04:07:52] <BageDev> Diggsey: I'm basically going to be representing a database as series of Tables (Parent), Columns (Child) and a DB Connection ( Common ). Tables and Columns will need to call common.prepare() from time to time. 
[04:08:02] <niconii> smerft: not a boy, but no problem
[04:08:13] <Sgeo> I mean, you can mutate a RefCell<>'s contents behind a &
[04:08:14] *** Quits: popow (Thunderbird@moz-03f.kd0.252.223.IP) (Ping timeout: 121 seconds)
[04:08:21] <mdinger> is calling s.iter() exactly equivalent to calling &s.into_iter() ?
[04:08:53] *** Quits: yeahnoob (Xanadu@moz-ku8.ugi.122.118.IP) (Ping timeout: 121 seconds)
[04:11:14] *** Joins: frankmcsherry (frankmcsher@moz-b6fr69.dyn.telefonica.de)
[04:12:00] <niconii> Sgeo: hm? no, you can dereference a &&mut to &mut
[04:12:50] <Diggsey> BageDev: it could be reasonable - you could avoid some overhead by having columns be directly owned by the table for example
[04:12:53] <niconii> Sgeo: to maybe clear things up here, behind the scenes, references are numbers denoting places in ram
[04:13:08] <smerft> Guys HELP I can't install freetype. I don't know how to apt-get instaall freetype
[04:13:57] <niconii> Sgeo: so if you have `let mut x = 16; let y = &mut x;`... say x ended up at address 0x1234; y would then, behind the scenes, equal 0x1234
[04:14:23] *** Joins: popow (Thunderbird@moz-03f.kd0.252.223.IP)
[04:14:35] *** Joins: yeahnoob (Xanadu@moz-ku8.ugi.122.118.IP)
[04:14:40] <niconii> Sgeo: you can certainly dereference y to mutate what's at 0x1234, but what you can't do is change what address y points at
[04:14:51] *** Joins: sin8h1 (Adium@moz-49j.3ph.172.122.IP)
[04:15:27] <Sgeo> niconii, http://is.gd/22XgU0
[04:16:21] <niconii> Sgeo: or maybe put another way, after `let mut a = 123; let mut b = 456; let x = &mut a;`, `x = &mut b;` would give you an error
[04:16:44] <insaneinside> erm.  Explain this: "cannot borrow `*self` as immutable because it is also borrowed as mutable" when evaluating function arguments because "previous borrow is" the callee of the function being evaluated.
[04:16:58] <mkomitee> Is there any way in rust to write a setup/cleanup function that runs before/after a test?
[04:17:21] <niconii> Sgeo: hmm, right, might've been mistaken about &&mut
[04:17:32] <mkomitee> … and know that the cleanup function will run, even if the test itself panics?
[04:17:49] <Diggsey> insaneinside: What is the function signature?
[04:17:57] <insaneinside> i.e., we can't evaluate the arguments to this function because we've borrowed the function's callee for the function call before we called the function...?
[04:18:16] *** Quits: sin8h (Adium@moz-49j.3ph.172.122.IP) (Ping timeout: 121 seconds)
[04:18:35] *** Joins: ndhoule (ndhoule@moz-sf7g6k.ca.comcast.net)
[04:18:58] *** Joins: zzmp (zzmp@moz-ppks81.12ul.lrlq.5500.2604.IP)
[04:19:15] *** Quits: cholcombe (chris@moz-eaa6lk.fios.verizon.net) (Ping timeout: 121 seconds)
[04:19:32] <insaneinside> Diggsey: self.<fn (&mut self)>(self.<fn(&self, ...)>(...), ...)
[04:20:05] <Diggsey> wat?
[04:21:00] *** Quits: winding-lines (textual@moz-g7k4j8.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[04:21:12] *** Joins: dstrbad (dstrbad@moz-9mbnrm.dsl.iskon.hr)
[04:21:22] <insaneinside> Diggsey: `self.drop_lines(self.wrap_index(i + j), count)`, where `fn drop_lines(&mut self, ...)` and `fn wrap_index(&self, usize) -> usize`.
[04:21:25] *** Quits: smerft (Mibbit@moz-hva2qp.tpgi.com.au) (Quit: http://www.mibbit.com ajax IRC Client)
[04:21:55] <flaub> heya, i keep seeing the term "Coherence" in various places, can someone give a quick summary of what that means?
[04:22:08] <Diggsey> ah
[04:22:20] <insaneinside> Diggsey: I see no reason that `self` should be borrowed at the time that `wrap_index` is invoked.
[04:22:37] *** Joins: ismaelga (ismaelga@moz-op208d.rev.vodafone.pt)
[04:22:39] <Diggsey> just store the result of wrap_index in a temporary
[04:22:40] <insaneinside> Diggsey: I mean, borrowed for the call to `drop_lines`.
[04:22:47] <Diggsey> and then pass it in
[04:23:00] *** Quits: zzmp (zzmp@moz-ppks81.12ul.lrlq.5500.2604.IP) (Ping timeout: 121 seconds)
[04:23:02] <insaneinside> yeah, but *why* do I have to do that?
[04:23:17] <Diggsey> I think it's just the borrow checker isn't clever enough
[04:23:21] *** Quits: choplin (choplin@moz-qkm9un.ap.nuro.jp) (Connection closed)
[04:23:30] * insaneinside facepalms.
[04:23:36] *** Quits: cjwelborn (cjwelborn@moz-np6hed.al.charter.com) (Quit: sys.exit(1))
[04:23:55] <woboats> Why doesn't x impl Foo? http://is.gd/OWm3HX
[04:24:54] <Mutabah> woboats: it's implemented on a trait object, not for all T: Bar
[04:25:08] <woboats> Oh, I see.
[04:25:10] <niconii> woboats: right, you want impl<T: Bar> Foo for T
[04:25:17] <woboats> yeah, okay
[04:27:02] *** Joins: errordeveloper (ilya@moz-649.f7i.219.2.IP)
[04:27:41] *** Quits: dstrbad (dstrbad@moz-9mbnrm.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[04:28:11] *** Joins: skade (skade@moz-6g5dak.pools.vodafone-ip.de)
[04:28:39] *** Quits: ismaelga (ismaelga@moz-op208d.rev.vodafone.pt) (Ping timeout: 121 seconds)
[04:28:45] *** Joins: choplin (choplin@moz-qkm9un.ap.nuro.jp)
[04:29:14] <flaub> i guess it means "only allow a single impl for a given trait"?
[04:29:49] <insaneinside> oh.
[04:29:55] <insaneinside> flaub: yeah, pretty much.
[04:30:13] <Sgeo> Is there a way to make sure people don't get this wrong?
[04:30:36] <Sgeo> I mean, it keeps happening. Trying to make it fit the way people are trying is clearly a bad idea, but maybe a lint?
[04:30:43] <insaneinside> flaub: conherence rules basically make sure that everything is consistent and plays nice.
[04:31:13] *** Quits: errordeveloper (ilya@moz-649.f7i.219.2.IP) (Ping timeout: 121 seconds)
[04:31:15] <flaub> is coherence required for borrow checking?
[04:31:20] <scott> Sgeo: not sure. there's a fair amount of confusion stemming from trait object types having the exact same name/syntax as their traits
[04:31:34] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[04:31:58] <insaneinside> flaub: Not sure, I'm just a user, not a dev.  And I'm sure someone else has a less hand-wavy explanation. ;)
[04:32:05] <Sgeo> Wonder if someone could make a program that looks innocent under that misunderstanding but in reality does something dangerous
[04:32:30] <aatch> flaub, no. Borrow checking and coherence are unrelated.
[04:32:32] <Sgeo> Coherence and borrow checking are different checks.
[04:32:43] <Sgeo> And no one really knows what the coherence rules should be, I think
[04:32:44] <flaub> insaneinside: thanks :) i'm very new to rust myself, but come from a C++ background doing template metaprogramming
[04:33:08] <insaneinside> Template metaprogramming is the Devil.  It sold my soul.
[04:33:30] <flaub> lol agreed, excited to hopefully be done with it
[04:33:40] <aatch> The way to explain the goal of coherence is with an example:
[04:34:03] *** Joins: amitp (amitp@moz-plc8ig.ca.comcast.net)
[04:34:13] <flaub> it seems sorta like partial specialization vs full specialization
[04:34:23] <aatch> Lets say I have some code that uses a trait from another crate and compiles. All is fine.
[04:34:26] *** Joins: winding-lines (textual@moz-g7k4j8.ca.comcast.net)
[04:34:46] *** Joins: lenstr (lenstr@moz-ca8.vju.25.171.IP)
[04:35:00] <aatch> If I then decide to use another crate, the mere act of linking that crate should not cause any compilation errors in my original code.
[04:35:13] *** Quits: oceanwhit (bzlandfill@moz-a38b1m.ca.comcast.net) (Quit: CGI:IRC)
[04:35:16] <aatch> Coherence makes sure that is possible.
[04:35:27] *** Quits: lenstr (lenstr@moz-ca8.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[04:35:35] *** Joins: oceanwhit (bzlandfill@moz-a38b1m.ca.comcast.net)
[04:35:42] *** Joins: lenstr (lenstr@moz-ca8.vju.25.171.IP)
[04:35:49] <aatch> That's why you can't implement foreign traits on foreign types, if two crates did that, there'd be a conflict.
[04:35:56] <flaub> aatch: thanks, that makes sense i think
[04:36:26] <aatch> The rules for coherence are actually pretty clear for the most part. It's the edge cases that cause issues.
[04:36:40] *** Quits: lenstr (lenstr@moz-ca8.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[04:36:59] <insaneinside> Rust seems to have too many edges.  Like a circle.
[04:37:00] <aatch> Since what constitutes a "local type" or "external type" can get confusing when working with generic types.
[04:37:37] <aatch> Traits are very similar to typeclasses in Haskell and they've struggled with some of these issues for years.
[04:37:41] <flaub> it does indeed look tricky: http://www.wabbo.org/blog/2014/11jul_a_bug_in_rusts_coherence_rules.html 
[04:37:44] *** Joins: cmn (cmn@moz-r1h.buc.47.78.IP)
[04:37:48] <oceanwhit> Can somebody help me figure out how to do this? http://is.gd/f3gXxH
[04:39:02] *** Quits: psy (psy@moz-ous.ntd.6.103.IP) (Ping timeout: 121 seconds)
[04:40:18] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[04:40:22] *** Quits: Gamecubic (cubic@moz-bglmk5.mc.videotron.ca) (Connection closed)
[04:40:36] <aatch> oceanwhit, that is an overly-simplified example.
[04:40:38] *** Quits: gopar (gopar@moz-5039uj.ca.comcast.net) (Quit: Leaving)
[04:40:52] *** Joins: maedhroz (maedhroz@moz-4jk5ho.res.rr.com)
[04:41:13] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[04:41:22] <aatch> oceanwhit, since I'm assuming you don't really want to change the value of the first element of nums to `-1` 10 times.
[04:41:30] *** Joins: matematikaadit (matematikaa@moz-des.b41.67.202.IP)
[04:42:13] <oceanwhit> aatch, Well, i see no reason for me to send you all of my code, that won't exactly happen in the real deal but the idea happens
[04:42:24] *** Quits: mou (donwilliam@moz-lq9kg8.cpe.webspeed.dk) (Connection closed)
[04:42:42] *** Joins: sayan (sayan@moz-ip8.595.51.106.IP)
[04:43:17] <aatch> oceanwhit, what I mean is that the best "fix" for that code is to just do `nums[0] = -1` and not have the loop.
[04:43:27] *** Quits: frankmcsherry (frankmcsher@moz-b6fr69.dyn.telefonica.de) (Connection closed)
[04:43:49] <aatch> oceanwhit, hence over-simplified.
[04:43:49] *** Joins: psy (psy@moz-ous.ntd.6.103.IP)
[04:43:52] <oceanwhit> aatch, the loop is necessary for what I'm doing.
[04:44:20] <aatch> oceanwhit, I'm fine with not seeing literally all your code, but you've reduced the problem into absurdity.
[04:44:24] <oceanwhit> aatch, i cut out a lot of code to narrow it down to this one thing thats breaking
[04:44:46] *** Joins: Rym_ (y@moz-a44.2as.55.31.IP)
[04:45:19] *** Quits: logan_e (logan_e@moz-ltn.qg3.218.73.IP) (Client exited)
[04:45:21] <oceanwhit> aatch heres a better idea http://is.gd/27ICza
[04:46:46] <aatch> oceanwhit, this maybe? http://is.gd/icjZ83
[04:46:47] <Sgeo> That reminds me, would it be reasonable to have an Iterator that emits (&mut ThingThatIteratorWasMadeFrom, &actual_thingy)
[04:46:55] <oceanwhit> aatch, im really just trying to understand why i can't alter an element of a vector im looping over. this illistrates that
[04:47:27] <Sgeo> Or is that something that I should just live with `while let Some(..) blah blah blah`?
[04:47:40] <oceanwhit> aatch, thanks! i knew there had to be a way
[04:47:54] *** Joins: Rusky1 (russell@moz-de0fff.slkc.qwest.net)
[04:47:56] <oceanwhit> sorry for the obscure example
[04:48:23] *** Quits: Rusky (russell@moz-vn1e9f.slkc.qwest.net) (Ping timeout: 121 seconds)
[04:48:27] <srjek> Does racer not handler array indexing yet or is there something wrong with my setup?
[04:48:55] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[04:49:22] *** Quits: Rym_ (y@moz-a44.2as.55.31.IP) (Ping timeout: 121 seconds)
[04:49:23] <aatch> oceanwhit, I get that you want to simplify things, but... saying this as nicely as possible... if you knew what the root problem was, you wouldn't be asking for help here.
[04:50:26] *** Joins: kyeah (Mibbit@moz-9g964n.dyn.grandenetworks.net)
[04:51:19] *** Quits: egrep (egrep@moz-vqao7u.org) (Ping timeout: 121 seconds)
[04:51:31] <aatch> oceanwhit, the problem is that I had to guess what you really wanted. It's not actually clear from a very simple example. I don't know if you need the index for some other purpose or if you simply didn't know about `iter_mut`
[04:51:34] *** Quits: dellavg (dellavg@moz-t682jd.retail.telecomitalia.it) (Ping timeout: 121 seconds)
[04:52:16] *** Quits: kyeah (Mibbit@moz-9g964n.dyn.grandenetworks.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:53:23] <oceanwhit> aatch, i see. I didn't know iter_mut existed. I don't really think this fixed my problem, because I have to be able to change a num[some_number] to something durring the loop. maybe the whole approach is just awful.
[04:53:41] *** Joins: kazimuth (james@moz-n85.696.189.18.IP)
[04:54:07] <aatch> oceanwhit, ok, rather than give us an example that represents the problem, give us an example the represents what you're trying to do.
[04:54:37] <oceanwhit> aatch, ok. . .
[04:55:22] <aatch> !help
[04:55:23] <rustbot> Help is what I like to do! Everyone, welcome to #rust! Please read topics first. On bot usages, I've also sent private messages.
[04:55:31] <woboats> How can you declare that two traits are exclusive?
[04:55:46] <oceanwhit> aatch, for the extremely breif idea, im trying to solve https://projecteuler.net/problem=21
[04:55:47] <aatch> !XY Problem
[04:55:54] <rustbot> is asking about your attempted *solution* rather than your actual *problem*. Please explain the issue in full whenever you ask. More on http://xyproblem.info/
[04:55:58] <aatch> woboats, you don't.
[04:56:10] <aatch> woboats, it's not possible to do that.
[04:56:36] <woboats> aatch, can you declare that a trait is implemented for T where T is not a trait?
[04:56:45] *** Quits: tinaun (tinaun@moz-7l08ds.ct.comcast.net) (*.net *.split)
[04:56:45] *** Quits: passcod (passcod@moz-p68.ijk.131.104.IP) (*.net *.split)
[04:56:45] *** Quits: gbarboza (gbarboza@moz-4cc7e5.com) (*.net *.split)
[04:56:45] *** Quits: jordman (keusej@moz-lou.mm7.236.104.IP) (*.net *.split)
[04:56:45] *** Quits: sully (sully@moz-qhc979.emarhavil.com) (*.net *.split)
[04:56:45] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (*.net *.split)
[04:56:45] *** Quits: jacres (battle@moz-qtb.mc9.170.107.IP) (*.net *.split)
[04:56:45] *** Quits: trevnorris (trevnorris@moz-05k.hi2.243.162.IP) (*.net *.split)
[04:56:45] *** Quits: jevin (jevin@moz-sra.ovp.12.72.IP) (*.net *.split)
[04:56:45] *** Quits: poorman (poorman@moz-sdl0oq.res.rr.com) (*.net *.split)
[04:56:45] *** Quits: WindowsBunny (Peter@moz-prmara.east.verizon.net) (*.net *.split)
[04:56:45] *** Quits: nozaq (nozaq@moz-cqabpf.compute-1.amazonaws.com) (*.net *.split)
[04:56:45] *** Quits: aphistic (aphistic@moz-p8bgbt.erikd.org) (*.net *.split)
[04:56:45] *** Quits: steveklabnik (root@moz-fft.uo8.55.45.IP) (*.net *.split)
[04:56:45] *** Quits: glennpratt (glennpratt@moz-neq2gf.dsl-w.verizon.net) (*.net *.split)
[04:56:45] *** Quits: jonalmeida-mobile (jonathan@moz-5j8.kvb.131.104.IP) (*.net *.split)
[04:56:45] *** Quits: rustbot (havvy@moz-u0e4io.net) (*.net *.split)
[04:56:45] *** Quits: halosghost (halosghost@moz-fvb.hlb.3.192.IP) (*.net *.split)
[04:56:45] *** Quits: uqbar (hrishi@moz-k31.ocr.38.69.IP) (*.net *.split)
[04:56:45] *** Quits: comex (comex@moz-0m1t01.compute-1.amazonaws.com) (*.net *.split)
[04:56:45] *** Quits: hugod (user@moz-885.jmo.24.70.IP) (*.net *.split)
[04:56:45] *** Quits: ebfull (ebfull@moz-2hf06a.co.comcast.net) (*.net *.split)
[04:56:45] *** Quits: dg (dg@moz-ca8.tns.243.162.IP) (*.net *.split)
[04:56:45] *** Quits: zoosha (gmunoz@moz-e0j.3sr.79.167.IP) (*.net *.split)
[04:56:45] *** Quits: pd (pd@moz-31t.42g.236.104.IP) (*.net *.split)
[04:56:45] *** Quits: kemurphy (kemurphy@moz-ke1.ea2.241.192.IP) (*.net *.split)
[04:56:45] *** Quits: wc (wc@moz-ub8cet.rocks) (*.net *.split)
[04:56:45] *** Quits: dormiens (alanjcfs@moz-04u.dnf.241.192.IP) (*.net *.split)
[04:56:45] *** Quits: blank_name (blank_name@moz-5144dk.mi.frontiernet.net) (*.net *.split)
[04:56:45] *** Quits: thewonderidiot (thewonderid@moz-kif.10f.90.69.IP) (*.net *.split)
[04:56:45] *** Quits: posborne (posborne@moz-9hioom.mn.comcast.net) (*.net *.split)
[04:56:45] *** Quits: kazimuth (james@moz-n85.696.189.18.IP) (*.net *.split)
[04:56:45] *** Quits: cgaebel (cgaebel@moz-aq9.qj7.199.198.IP) (*.net *.split)
[04:56:45] *** Quits: basicdays (basicdays@moz-vreeoj.cable.rcn.com) (*.net *.split)
[04:56:45] *** Quits: thiagopnts (mozilla@moz-jrh.mfc.170.107.IP) (*.net *.split)
[04:56:45] *** Quits: bentley|away (Bentley@moz-8e4pg5.mtbentley.us) (*.net *.split)
[04:56:45] *** Quits: tparenti_ (tparenti@moz-7lemro.CC.CMU.EDU) (*.net *.split)
[04:56:45] *** Quits: toshok (toshok@moz-vle008.cat) (*.net *.split)
[04:56:45] *** Quits: tparenti (tparenti@moz-a06jsb.CC.CMU.EDU) (*.net *.split)
[04:56:45] *** Quits: spacepluk (spacepluk@moz-sbuncd.compute-1.amazonaws.com) (*.net *.split)
[04:56:45] *** Quits: zaeleus (zaeleus@moz-r5abra.cpe.cableone.net) (*.net *.split)
[04:56:45] *** Quits: Guest13992 (ali@moz-mvj.5j5.170.107.IP) (*.net *.split)
[04:56:45] *** Quits: zz_robotmayo (robotmayo@moz-kh4.m8t.131.104.IP) (*.net *.split)
[04:56:45] *** Quits: coderanger (Noah@moz-m5ti9s.net) (*.net *.split)
[04:56:45] *** Quits: vodik (simon@moz-86ind4.dedicated.allstream.net) (*.net *.split)
[04:56:45] *** Quits: skelly (hl@moz-2cegm6.org) (*.net *.split)
[04:56:45] *** Quits: brennie (barret@moz-to1.pp6.236.104.IP) (*.net *.split)
[04:56:45] *** Quits: AncientPC (AncientPC@moz-2bvk3b.fios.verizon.net) (*.net *.split)
[04:56:45] *** Quits: zeiris (zeiris@moz-8jbmam.letter.agency) (*.net *.split)
[04:56:45] *** Quits: chickensalad (brandon@moz-ngh.k9n.131.104.IP) (*.net *.split)
[04:56:45] *** Quits: JacobHenner (JH@moz-i7mdmf.ventricle.us) (*.net *.split)
[04:56:45] *** Quits: EsBe (EsBe@moz-tr2dkp.res.rr.com) (*.net *.split)
[04:56:45] *** Quits: benbangert (bbangert@moz-t8r7ci.org) (*.net *.split)
[04:56:45] *** Quits: callahad (callahad@moz-8u66c8.members.linode.com) (*.net *.split)
[04:56:45] *** Quits: JustAPerson (JustAPerson@moz-un628q.moe) (*.net *.split)
[04:56:45] *** Quits: [o__o] ([o__o]@moz-4s2t5k.compute-1.amazonaws.com) (*.net *.split)
[04:56:45] *** Quits: wmoxam (wmoxam@moz-989jil.members.linode.com) (*.net *.split)
[04:56:45] *** Quits: solreaper (Mibbit@moz-mfpu5o.wa.comcast.net) (*.net *.split)
[04:56:45] *** Quits: jgallagher (john@moz-6ge.dhn.131.24.IP) (*.net *.split)
[04:56:45] *** Quits: BossKonaSegway1 (Michael@moz-vp8rf7.res.rr.com) (*.net *.split)
[04:56:45] *** Quits: Ericson2314 (user@moz-md3.070.16.138.IP) (*.net *.split)
[04:56:45] *** Quits: jmorton (jmorton@moz-83s.irv.199.198.IP) (*.net *.split)
[04:56:45] *** Quits: lu324 (lu324___@moz-3v8ljg.dhcp.embarqhsd.net) (*.net *.split)
[04:56:45] *** Quits: isomarcte (isomarcte@moz-vqvrcl.hfc.comcastbusiness.net) (*.net *.split)
[04:56:45] *** Quits: acidx (leandro@moz-9vrtg9.lhc.net.br) (*.net *.split)
[04:56:45] *** Quits: kali (kali@moz-90j6kh.dc0.ghst.net) (*.net *.split)
[04:56:45] *** Quits: marky (jose@moz-n98a4h.org) (*.net *.split)
[04:56:45] *** Quits: iliekturtles (mike@moz-c7hb0v.me.comcast.net) (*.net *.split)
[04:56:45] *** Quits: lyddonb (lyddonb@moz-nek.5jr.236.104.IP) (*.net *.split)
[04:56:45] *** Quits: kwantam (kwantam@moz-1adqok.DYNAPOOL.NYU.EDU) (*.net *.split)
[04:56:45] *** Quits: spwhitt (ident@moz-6eickl.compute-1.amazonaws.com) (*.net *.split)
[04:56:45] *** Quits: dlmanning (dlmanning@moz-en2.j2q.243.162.IP) (*.net *.split)
[04:56:45] *** Quits: jfredett (Adium@moz-a9ilmn.fios.verizon.net) (*.net *.split)
[04:56:45] *** Quits: fleabay (Mibbit@moz-fdcruo.ip.windstream.net) (*.net *.split)
[04:56:45] *** Quits: daurnimator (daurnimator@moz-u94jt8.compute-1.amazonaws.com) (*.net *.split)
[04:56:45] *** Quits: Raven67854 (Raven67854@moz-8fl3ql.unassigned.ntelos.net) (*.net *.split)
[04:56:45] *** Quits: kkus (kkus@moz-fj2.o46.234.165.IP) (*.net *.split)
[04:56:45] *** Quits: zekesonxx (zekesonxx@moz-5o0.9kj.199.198.IP) (*.net *.split)
[04:56:45] *** Quits: DerisiveLogic (smuxi@moz-g93io6.res.rr.com) (*.net *.split)
[04:56:45] *** Quits: michael2 (michael@moz-9vjtig.mo.charter.com) (*.net *.split)
[04:56:45] *** Quits: smckay (steve@moz-bfutgb.va.comcast.net) (*.net *.split)
[04:56:45] *** Quits: dwrensha (chatzilla@moz-46o4hi.pa.comcast.net) (*.net *.split)
[04:56:45] *** Quits: geofft (geofft@moz-vfphq1.mit.edu) (*.net *.split)
[04:56:45] *** Quits: nham (nham@moz-755.bu3.214.98.IP) (*.net *.split)
[04:56:45] *** Quits: KindOne (KindOne@moz-49t.rnq.170.107.IP) (*.net *.split)
[04:56:45] *** Quits: mocx (mocx@moz-9r990q.io) (*.net *.split)
[04:56:45] *** Quits: log0ymxm (log0ymxm@moz-vlu.43m.243.162.IP) (*.net *.split)
[04:56:45] *** Quits: bdawn (bdawn@moz-7qo4l4.mn.comcast.net) (*.net *.split)
[04:56:45] *** Quits: Amaranth (travis@moz-1raqsl.cpe.cableone.net) (*.net *.split)
[04:56:45] *** Quits: Rusky1 (russell@moz-de0fff.slkc.qwest.net) (*.net *.split)
[04:56:45] *** Quits: mordred (mordred@moz-anb.lqf.126.15.IP) (*.net *.split)
[04:56:45] *** Quits: rovar_ (rovar@moz-96effg.dyn.optonline.net) (*.net *.split)
[04:56:45] *** Quits: jpenny (jpenny@moz-atb5kf.ykksnap-america.com) (*.net *.split)
[04:56:45] *** Quits: ra4king (ra4king@moz-iitem7.com) (*.net *.split)
[04:56:45] *** Quits: felixc (felixc@moz-c8ni40.compute-1.amazonaws.com) (*.net *.split)
[04:56:45] *** Quits: minot (minot@moz-r0m4ta.minotstateu.edu) (*.net *.split)
[04:56:45] *** Quits: reed (reed@tech.monkey) (*.net *.split)
[04:56:45] *** Quits: carols10cents (carols10cen@moz-7pm0e0.fios.verizon.net) (*.net *.split)
[04:56:45] *** Quits: dustinm (dustinm@moz-9ms.n6q.68.208.IP) (*.net *.split)
[04:56:45] *** Quits: HappyMan (HappyMan@moz-l920uc.fios.verizon.net) (*.net *.split)
[04:56:45] *** Quits: Esption (Esption@moz-3gitvr.dynamic.tds.net) (*.net *.split)
[04:56:45] *** Quits: saml (saml@moz-0pt9vd.cst.lightpath.net) (*.net *.split)
[04:56:45] *** Quits: Sergio (Sergio@moz-23roph.bz) (*.net *.split)
[04:56:45] *** Quits: lahwran (lahwran@lahwran.net) (*.net *.split)
[04:56:45] *** Quits: tadh (quassel@moz-88tk3f.res.rr.com) (*.net *.split)
[04:56:45] *** Quits: tamird (textual@moz-gg3hct.res.rr.com) (*.net *.split)
[04:56:45] *** Quits: Sgeo (Sgeo@moz-mo8ath.dyn.optonline.net) (*.net *.split)
[04:56:45] *** Quits: jmesmon (ydoc@moz-naocu2.einic.org) (*.net *.split)
[04:56:45] *** Quits: shaw (shaw@moz-dsic97.members.linode.com) (*.net *.split)
[04:56:45] *** Quits: chrisarcand (gilmour@moz-aql.42g.236.104.IP) (*.net *.split)
[04:56:45] *** Quits: robn (robn@moz-lmns4l.static.theplanet.com) (*.net *.split)
[04:56:45] *** Quits: rovar (rovar@moz-6iq.47m.88.38.IP) (*.net *.split)
[04:56:45] *** Quits: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net) (*.net *.split)
[04:56:45] *** Quits: ssokolow (ssokolow@moz-lnofvo.dsl.teksavvy.com) (*.net *.split)
[04:56:45] *** Quits: Lovot (Lovot@moz-1je.00u.73.69.IP) (*.net *.split)
[04:56:45] *** Quits: rntz (rntz@moz-l9e88u.fios.verizon.net) (*.net *.split)
[04:56:45] *** Quits: Cathy (Cathy@moz-42tgij.bc.googleusercontent.com) (*.net *.split)
[04:56:45] *** Quits: edunham (edunham@moz-meu.gm8.131.104.IP) (*.net *.split)
[04:56:45] *** Quits: calc0000 (calc0000@moz-p36.rbp.233.199.IP) (*.net *.split)
[04:56:45] *** Quits: jistone (jistone@moz-u47qar.redhat.com) (*.net *.split)
[04:56:45] *** Quits: drbawb (drbawb@moz-q7c35u.res.rr.com) (*.net *.split)
[04:56:45] *** Quits: tdfischer (tdfischer@hackerbots.net) (*.net *.split)
[04:56:45] *** Quits: Kurufu (Kurufu@moz-pvv8b5.res.rr.com) (*.net *.split)
[04:56:45] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (*.net *.split)
[04:56:45] *** Quits: tristanseifert (tristanseif@moz-r0t7ns.res.rr.com) (*.net *.split)
[04:56:45] *** Quits: frewsxcv (frewsxcv@moz-lr4.h2r.241.192.IP) (*.net *.split)
[04:56:45] *** Quits: gthank (gthank@moz-5sim0m.ga.charter.com) (*.net *.split)
[04:56:45] *** Quits: brandonw (brandonw@moz-36sv6k.ma.charter.com) (*.net *.split)
[04:56:45] *** Quits: darkowlzz|afk (Elite12883@moz-kue6ah.elitebnc.org) (*.net *.split)
[04:56:45] *** Quits: stvc (quassel@moz-knd.mlq.241.192.IP) (*.net *.split)
[04:56:45] *** Quits: k1i (k1i@moz-moheke.k1.io) (*.net *.split)
[04:56:45] *** Quits: Dr-Emann (Dr-Emann@moz-f8hd1t.tvh.ptd.net) (*.net *.split)
[04:56:45] *** Quits: smtudor (smtudor@moz-ijq.d3e.55.45.IP) (*.net *.split)
[04:56:45] *** Quits: cjh (chris@moz-mauc24.net.nz) (*.net *.split)
[04:56:45] *** Quits: awe (awe@moz-vpr.va5.236.104.IP) (*.net *.split)
[04:56:45] *** Quits: commie (quassel@moz-1fm.0p2.50.198.IP) (*.net *.split)
[04:56:45] *** Quits: cwndrws (cwndrws@moz-d5a.khf.236.104.IP) (*.net *.split)
[04:56:45] *** Quits: chimeracoder (chimeracode@moz-g2u.vli.131.104.IP) (*.net *.split)
[04:56:45] *** Quits: burntsushi (burntsushi@moz-t92kn9.ma.charter.com) (*.net *.split)
[04:56:45] *** Quits: jamwt (jamwt@moz-noo6hc.jamwt.com) (*.net *.split)
[04:56:45] *** Quits: jud (jud@moz-6p3qn8.res.rr.com) (*.net *.split)
[04:56:45] *** Quits: tbelaire (tbelaire@moz-e3f93l.csclub.uwaterloo.ca) (*.net *.split)
[04:56:45] *** Quits: Shackra (Jorge@moz-7bh.ng6.177.186.IP) (*.net *.split)
[04:56:45] *** Quits: fengshaun (fengshaun@moz-rf0qk5.cable.teksavvy.com) (*.net *.split)
[04:56:45] *** Quits: pauls (pauls@moz-e5p333.ccs.neu.edu) (*.net *.split)
[04:56:45] *** Quits: bodie (bodie@moz-vs7.tk8.243.162.IP) (*.net *.split)
[04:56:45] *** Quits: pingveno (alevar@moz-v9m50e.members.linode.com) (*.net *.split)
[04:56:45] *** Quits: bstrie (ben@moz-avu3ju.members.linode.com) (*.net *.split)
[04:56:45] *** Quits: sam113101 (sam@moz-5mq5dc.mc.videotron.ca) (*.net *.split)
[04:56:45] *** Quits: lerxst (lerxst@21st.century.schizoid.man) (*.net *.split)
[04:56:45] *** Quits: tjr (trevor@moz-2bkj79.com) (*.net *.split)
[04:56:45] *** Quits: libfud (libfud@moz-p2rb38.eph2.ptd.net) (*.net *.split)
[04:56:45] *** Quits: kmcguire (kmcguire@moz-bbqf14.res.bhn.net) (*.net *.split)
[04:56:45] *** Quits: crazymykl (mikemac@moz-g9k.aj7.6.209.IP) (*.net *.split)
[04:56:54] *** Joins: jevin (jevin@moz-sra.ovp.12.72.IP)
[04:56:59] <aatch> woboats, nope
[04:57:05] *** Joins: fengshaun (fengshaun@moz-rf0qk5.cable.teksavvy.com)
[04:57:05] *** Joins: carols10cents (carols10cen@moz-7pm0e0.fios.verizon.net)
[04:57:05] *** Joins: shaw (shaw@moz-dsic97.members.linode.com)
[04:57:05] *** Joins: AncientPC (AncientPC@moz-2bvk3b.fios.verizon.net)
[04:57:05] *** Joins: felixc (felixc@moz-c8ni40.compute-1.amazonaws.com)
[04:57:05] *** Joins: chimeracoder (chimeracode@moz-g2u.vli.131.104.IP)
[04:57:05] *** Joins: ra4king (ra4king@moz-iitem7.com)
[04:57:05] *** Joins: sully (sully@moz-qhc979.emarhavil.com)
[04:57:05] *** Joins: halosghost (halosghost@moz-fvb.hlb.3.192.IP)
[04:57:05] *** Joins: jordman (keusej@moz-lou.mm7.236.104.IP)
[04:57:05] *** Joins: cwndrws (cwndrws@moz-d5a.khf.236.104.IP)
[04:57:05] *** Joins: gbarboza (gbarboza@moz-4cc7e5.com)
[04:57:05] *** Joins: log0ymxm (log0ymxm@moz-vlu.43m.243.162.IP)
[04:57:05] *** Joins: dg (dg@moz-ca8.tns.243.162.IP)
[04:57:05] *** Joins: tdfischer (tdfischer@hackerbots.net)
[04:57:05] *** Joins: brandonw (brandonw@moz-36sv6k.ma.charter.com)
[04:57:05] *** Joins: sam113101 (sam@moz-5mq5dc.mc.videotron.ca)
[04:57:05] *** Joins: kwantam (kwantam@moz-1adqok.DYNAPOOL.NYU.EDU)
[04:57:05] *** Joins: tbelaire (tbelaire@moz-e3f93l.csclub.uwaterloo.ca)
[04:57:05] *** Joins: thewonderidiot (thewonderid@moz-kif.10f.90.69.IP)
[04:57:05] *** Joins: jamwt (jamwt@moz-noo6hc.jamwt.com)
[04:57:05] *** Joins: EsBe (EsBe@moz-tr2dkp.res.rr.com)
[04:57:05] *** Joins: jmorton (jmorton@moz-83s.irv.199.198.IP)
[04:57:05] *** Joins: jud (jud@moz-6p3qn8.res.rr.com)
[04:57:05] *** Joins: crazymykl (mikemac@moz-g9k.aj7.6.209.IP)
[04:57:05] *** Joins: comex (comex@moz-0m1t01.compute-1.amazonaws.com)
[04:57:05] *** Joins: bentley|away (Bentley@moz-8e4pg5.mtbentley.us)
[04:57:05] *** Joins: pauls (pauls@moz-e5p333.ccs.neu.edu)
[04:57:05] *** Joins: jmesmon (ydoc@moz-naocu2.einic.org)
[04:57:05] *** Joins: Raven67854 (Raven67854@moz-8fl3ql.unassigned.ntelos.net)
[04:57:05] *** Joins: daurnimator (daurnimator@moz-u94jt8.compute-1.amazonaws.com)
[04:57:05] *** Joins: HappyMan (HappyMan@moz-l920uc.fios.verizon.net)
[04:57:05] *** Joins: reed (reed@tech.monkey)
[04:57:05] *** Joins: gthank (gthank@moz-5sim0m.ga.charter.com)
[04:57:05] *** Joins: nozaq (nozaq@moz-cqabpf.compute-1.amazonaws.com)
[04:57:05] *** Joins: Sergio (Sergio@moz-23roph.bz)
[04:57:05] *** Joins: lahwran (lahwran@lahwran.net)
[04:57:05] *** Joins: jistone (jistone@moz-u47qar.redhat.com)
[04:57:05] *** Joins: thiagopnts (mozilla@moz-jrh.mfc.170.107.IP)
[04:57:05] *** Joins: bodie (bodie@moz-vs7.tk8.243.162.IP)
[04:57:05] *** Joins: spwhitt (ident@moz-6eickl.compute-1.amazonaws.com)
[04:57:05] *** Joins: zekesonxx (zekesonxx@moz-5o0.9kj.199.198.IP)
[04:57:05] *** Joins: dlmanning (dlmanning@moz-en2.j2q.243.162.IP)
[04:57:05] *** Joins: kemurphy (kemurphy@moz-ke1.ea2.241.192.IP)
[04:57:05] *** Joins: JustAPerson (JustAPerson@moz-un628q.moe)
[04:57:05] *** Joins: pd (pd@moz-31t.42g.236.104.IP)
[04:57:05] *** Joins: passcod (passcod@moz-p68.ijk.131.104.IP)
[04:57:05] *** Joins: awe (awe@moz-vpr.va5.236.104.IP)
[04:57:05] *** Joins: trevnorris (trevnorris@moz-05k.hi2.243.162.IP)
[04:57:05] *** Joins: callahad (callahad@moz-8u66c8.members.linode.com)
[04:57:05] *** Joins: lyddonb (lyddonb@moz-nek.5jr.236.104.IP)
[04:57:05] *** Joins: tjr (trevor@moz-2bkj79.com)
[04:57:05] *** Joins: Cathy (Cathy@moz-42tgij.bc.googleusercontent.com)
[04:57:05] *** Joins: spacepluk (spacepluk@moz-sbuncd.compute-1.amazonaws.com)
[04:57:05] *** Joins: JacobHenner (JH@moz-i7mdmf.ventricle.us)
[04:57:05] *** Joins: coderanger (Noah@moz-m5ti9s.net)
[04:57:05] *** Joins: cgaebel (cgaebel@moz-aq9.qj7.199.198.IP)
[04:57:05] *** Joins: calc0000 (calc0000@moz-p36.rbp.233.199.IP)
[04:57:05] *** Joins: k1i (k1i@moz-moheke.k1.io)
[04:57:05] *** Joins: toshok (toshok@moz-vle008.cat)
[04:57:05] *** Joins: frewsxcv (frewsxcv@moz-lr4.h2r.241.192.IP)
[04:57:05] *** Joins: zz_robotmayo (robotmayo@moz-kh4.m8t.131.104.IP)
[04:57:05] *** Joins: Amaranth (travis@moz-1raqsl.cpe.cableone.net)
[04:57:05] *** Joins: Rusky1 (russell@moz-de0fff.slkc.qwest.net)
[04:57:05] *** Joins: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net)
[04:57:05] *** Joins: darkowlzz|afk (Elite12883@moz-kue6ah.elitebnc.org)
[04:57:05] *** Joins: bdawn (bdawn@moz-7qo4l4.mn.comcast.net)
[04:57:05] *** Joins: stvc (quassel@moz-knd.mlq.241.192.IP)
[04:57:05] *** Joins: dustinm (dustinm@moz-9ms.n6q.68.208.IP)
[04:57:05] *** Joins: tinaun (tinaun@moz-7l08ds.ct.comcast.net)
[04:57:05] *** Joins: Guest13992 (ali@moz-mvj.5j5.170.107.IP)
[04:57:05] *** Joins: mocx (mocx@moz-9r990q.io)
[04:57:05] *** Joins: aphistic (aphistic@moz-p8bgbt.erikd.org)
[04:57:05] *** Joins: uqbar (hrishi@moz-k31.ocr.38.69.IP)
[04:57:05] *** Joins: edunham (edunham@moz-meu.gm8.131.104.IP)
[04:57:05] *** Joins: cjh (chris@moz-mauc24.net.nz)
[04:57:05] *** Joins: bstrie (ben@moz-avu3ju.members.linode.com)
[04:57:05] *** Joins: skelly (hl@moz-2cegm6.org)
[04:57:05] *** levin.mozilla.org sets mode: +o bstrie
[04:57:05] *** Joins: drbawb (drbawb@moz-q7c35u.res.rr.com)
[04:57:05] *** Joins: chrisarcand (gilmour@moz-aql.42g.236.104.IP)
[04:57:05] *** Joins: acidx (leandro@moz-9vrtg9.lhc.net.br)
[04:57:05] *** Joins: chickensalad (brandon@moz-ngh.k9n.131.104.IP)
[04:57:05] *** Joins: steveklabnik (root@moz-fft.uo8.55.45.IP)
[04:57:05] *** Joins: jonalmeida-mobile (jonathan@moz-5j8.kvb.131.104.IP)
[04:57:05] *** Joins: benbangert (bbangert@moz-t8r7ci.org)
[04:57:05] *** Joins: rntz (rntz@moz-l9e88u.fios.verizon.net)
[04:57:05] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[04:57:05] *** Joins: zoosha (gmunoz@moz-e0j.3sr.79.167.IP)
[04:57:05] *** Joins: blank_name (blank_name@moz-5144dk.mi.frontiernet.net)
[04:57:05] *** Joins: KindOne (KindOne@moz-49t.rnq.170.107.IP)
[04:57:05] *** Joins: kmcguire (kmcguire@moz-bbqf14.res.bhn.net)
[04:57:05] *** Joins: tamird (textual@moz-gg3hct.res.rr.com)
[04:57:05] *** Joins: dwrensha (chatzilla@moz-46o4hi.pa.comcast.net)
[04:57:05] *** Joins: hugod (user@moz-885.jmo.24.70.IP)
[04:57:05] *** Joins: DerisiveLogic (smuxi@moz-g93io6.res.rr.com)
[04:57:05] *** Joins: robn (robn@moz-lmns4l.static.theplanet.com)
[04:57:05] *** Joins: ssokolow (ssokolow@moz-lnofvo.dsl.teksavvy.com)
[04:57:05] *** Joins: kazimuth (james@moz-n85.696.189.18.IP)
[04:57:05] *** Joins: fleabay (Mibbit@moz-fdcruo.ip.windstream.net)
[04:57:05] *** Joins: zaeleus (zaeleus@moz-r5abra.cpe.cableone.net)
[04:57:05] *** Joins: poorman (poorman@moz-sdl0oq.res.rr.com)
[04:57:05] *** Joins: Shackra (Jorge@moz-7bh.ng6.177.186.IP)
[04:57:05] *** Joins: zeiris (zeiris@moz-8jbmam.letter.agency)
[04:57:05] *** Joins: rustbot (havvy@moz-u0e4io.net)
[04:57:05] *** Joins: jgallagher (john@moz-6ge.dhn.131.24.IP)
[04:57:05] *** Joins: mordred (mordred@moz-anb.lqf.126.15.IP)
[04:57:05] *** Joins: saml (saml@moz-0pt9vd.cst.lightpath.net)
[04:57:05] *** Joins: dormiens (alanjcfs@moz-04u.dnf.241.192.IP)
[04:57:05] *** Joins: tparenti (tparenti@moz-a06jsb.CC.CMU.EDU)
[04:57:05] *** Joins: Ericson2314 (user@moz-md3.070.16.138.IP)
[04:57:05] *** Joins: pingveno (alevar@moz-v9m50e.members.linode.com)
[04:57:05] *** Joins: posborne (posborne@moz-9hioom.mn.comcast.net)
[04:57:05] *** Joins: tadh (quassel@moz-88tk3f.res.rr.com)
[04:57:05] *** Joins: kkus (kkus@moz-fj2.o46.234.165.IP)
[04:57:05] *** Joins: nham (nham@moz-755.bu3.214.98.IP)
[04:57:05] *** Joins: Esption (Esption@moz-3gitvr.dynamic.tds.net)
[04:57:05] *** Joins: BossKonaSegway1 (Michael@moz-vp8rf7.res.rr.com)
[04:57:05] *** levin.mozilla.org sets mode: +o steveklabnik
[04:57:05] *** Joins: vodik (simon@moz-86ind4.dedicated.allstream.net)
[04:57:05] *** Joins: wc (wc@moz-ub8cet.rocks)
[04:57:05] *** Joins: tristanseifert (tristanseif@moz-r0t7ns.res.rr.com)
[04:57:05] *** Joins: WindowsBunny (Peter@moz-prmara.east.verizon.net)
[04:57:05] *** Joins: brennie (barret@moz-to1.pp6.236.104.IP)
[04:57:05] *** Joins: commie (quassel@moz-1fm.0p2.50.198.IP)
[04:57:05] *** Joins: smtudor (smtudor@moz-ijq.d3e.55.45.IP)
[04:57:05] *** Joins: glennpratt (glennpratt@moz-neq2gf.dsl-w.verizon.net)
[04:57:05] *** Joins: libfud (libfud@moz-p2rb38.eph2.ptd.net)
[04:57:05] *** Joins: rovar_ (rovar@moz-96effg.dyn.optonline.net)
[04:57:05] *** Joins: jpenny (jpenny@moz-atb5kf.ykksnap-america.com)
[04:57:05] *** Joins: isomarcte (isomarcte@moz-vqvrcl.hfc.comcastbusiness.net)
[04:57:05] *** Joins: burntsushi (burntsushi@moz-t92kn9.ma.charter.com)
[04:57:05] *** Joins: marky (jose@moz-n98a4h.org)
[04:57:05] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[04:57:05] *** Joins: michael2 (michael@moz-9vjtig.mo.charter.com)
[04:57:05] *** Joins: smckay (steve@moz-bfutgb.va.comcast.net)
[04:57:05] *** Joins: geofft (geofft@moz-vfphq1.mit.edu)
[04:57:05] *** Joins: kali (kali@moz-90j6kh.dc0.ghst.net)
[04:57:05] *** Joins: tparenti_ (tparenti@moz-7lemro.CC.CMU.EDU)
[04:57:05] *** Joins: rovar (rovar@moz-6iq.47m.88.38.IP)
[04:57:05] *** Joins: lerxst (lerxst@21st.century.schizoid.man)
[04:57:05] *** Joins: Sgeo (Sgeo@moz-mo8ath.dyn.optonline.net)
[04:57:05] *** Joins: wmoxam (wmoxam@moz-989jil.members.linode.com)
[04:57:05] *** Joins: iliekturtles (mike@moz-c7hb0v.me.comcast.net)
[04:57:05] *** Joins: Lovot (Lovot@moz-1je.00u.73.69.IP)
[04:57:05] *** Joins: ebfull (ebfull@moz-2hf06a.co.comcast.net)
[04:57:05] *** Joins: jacres (battle@moz-qtb.mc9.170.107.IP)
[04:57:05] *** Joins: basicdays (basicdays@moz-vreeoj.cable.rcn.com)
[04:57:05] *** Joins: Kurufu (Kurufu@moz-pvv8b5.res.rr.com)
[04:57:05] *** Joins: minot (minot@moz-r0m4ta.minotstateu.edu)
[04:57:05] *** Joins: [o__o] ([o__o]@moz-4s2t5k.compute-1.amazonaws.com)
[04:57:05] *** Joins: jfredett (Adium@moz-a9ilmn.fios.verizon.net)
[04:57:05] *** Joins: Dr-Emann (Dr-Emann@moz-f8hd1t.tvh.ptd.net)
[04:57:05] *** Joins: solreaper (Mibbit@moz-mfpu5o.wa.comcast.net)
[04:57:05] *** Joins: 557AABEQ2 (jevin@moz-sra.ovp.12.72.IP)
[04:57:05] *** Joins: lu324 (lu324___@moz-3v8ljg.dhcp.embarqhsd.net)
[04:57:09] <woboats> aatch, this makes me sad :(
[04:57:19] *** Quits: Amaranth (travis@moz-1raqsl.cpe.cableone.net) (Connection closed)
[04:57:32] <WindowsBunny> thanks mozilla
[04:57:44] *** Quits: geofft (geofft@moz-vfphq1.mit.edu) (Connection closed)
[04:58:09] *** Quits: poorman (poorman@moz-sdl0oq.res.rr.com) (Ping timeout: 121 seconds)
[04:58:22] <oceanwhit> aatch, so my idea was to create a vector of 10000 elements, numbered from 0 to 9999, and then loop over them where, at times, i would change a value future element (one not came across yet) to -1, so that it knows to skip it when it reaches it.
[04:58:28] <aatch> oceanwhit, well you could always just loop over a range and use indexing directly.
[04:58:35] *** Joins: poorman (poorman@moz-sdl0oq.res.rr.com)
[04:58:53] *** Quits: zaeleus (zaeleus@moz-r5abra.cpe.cableone.net) (Ping timeout: 121 seconds)
[04:59:00] <oceanwhit> aatch, the thing is it has to know not to repeat a number
[04:59:10] <woboats> aatch, and there's no concept of a union of traits either, right? where T: Foo | Bar
[04:59:22] <oceanwhit> aatch, when it finds a pair, it shouldn't try the other number in the pair
[04:59:25] <oceanwhit> if that makes sense
[04:59:27] *** Joins: eichin (sid27120@moz-qnfe1r.uxbridge.irccloud.com)
[04:59:48] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Connection closed)
[04:59:49] <flaub> i guess you could use the slice of the vec so you get random access: http://is.gd/IoMCnw
[04:59:52] <aatch> oceanwhit, sure, but why not just do `for i in (0..10000) { }
[04:59:54] *** Quits: 557AABEQ2 (jevin@moz-sra.ovp.12.72.IP) (Ping timeout: 121 seconds)
[04:59:55] *** Quits: matematikaadit (matematikaa@moz-des.b41.67.202.IP) (Ping timeout: 121 seconds)
[05:00:24] <aatch> woboats, well there's `T: Foo + Bar`
[05:00:45] *** Quits: turtil (turtil@moz-8am.857.98.121.IP) (Ping timeout: 121 seconds)
[05:00:45] <oceanwhit> aatch, i really like that idea actually. what would be a nice way to have it check "oh, i already solved that number, lets skip it."
[05:00:50] <woboats> aatch right but that's rather the opposite of what i meant
[05:01:01] <aatch> woboats, well what would it mean?
[05:01:04] <scott> woboats: you mean something that means "T impls Foo OR T impls Bar"?
[05:01:25] <scott> you couldn't call either Foo or Bar methods on T then, since it wouldn't be guaranteed to impl either one
[05:01:26] <woboats> scott, yes, i know that there's no way to express that because of monomorphization
[05:01:45] <scott> I don't think monomorphization is the issue
[05:01:48] <aatch> woboats, generally when you start thinking of those kinds of things, you've lost of sight of what you're actually trying to do.
[05:01:51] <woboats> well what i really want is negative trait bounds so i can create two exclusive implementations of a trait
[05:01:52] *** Joins: matematikaadit (matematikaa@moz-des.b41.67.202.IP)
[05:02:13] <woboats> aatch, what I'm actually trying to do is impl Foo for T where T: Bar and for T where T: Baz
[05:02:21] *** Quits: DerisiveLogic (smuxi@moz-g93io6.res.rr.com) (A TLS packet with unexpected length was received.)
[05:02:26] <woboats> in two different ways
[05:02:26] *** Joins: DerisiveLogic (smuxi@moz-g93io6.res.rr.com)
[05:02:43] *** Quits: aatch (james@moz-ciignl.bmm3.j08e.e000.2406.IP) (Connection closed)
[05:04:36] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[05:05:00] *** Parts: talchas (user@moz-8ubbgk.ca.comcast.net) ("ERC Version 5.3 (IRC client for Emacs)")
[05:05:03] *** Joins: talchas (user@moz-8ubbgk.ca.comcast.net)
[05:05:13] *** Joins: zaeleus (zaeleus@moz-r5abra.cpe.cableone.net)
[05:05:16] *** Quits: choplin (choplin@moz-qkm9un.ap.nuro.jp) (Connection closed)
[05:07:00] <Sgeo> What if T: Bar+Baz?
[05:07:43] *** Joins: frankmcsherry (frankmcsher@moz-b6fr69.dyn.telefonica.de)
[05:08:33] *** Joins: kushal (kdas@moz-ae6469.202.sitibroadband.in)
[05:08:44] *** Quits: amitp (amitp@moz-plc8ig.ca.comcast.net) (Quit: Leaving.)
[05:09:11] *** Quits: winding-lines (textual@moz-g7k4j8.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[05:09:16] *** Joins: winding-lines (textual@moz-g7k4j8.ca.comcast.net)
[05:09:26] *** Quits: winding-lines (textual@moz-g7k4j8.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[05:10:34] *** Joins: srjek_ (srjek@moz-gg7i72.ece.uic.edu)
[05:10:34] *** Quits: srjek (srjek@moz-gg7i72.ece.uic.edu) (Connection closed)
[05:11:23] *** Quits: oceanwhit (bzlandfill@moz-a38b1m.ca.comcast.net) (Quit: CGI:IRC)
[05:11:32] <woboats> Sgeo, right the underlying problem is that what I /want/ is `trait Bar: !Baz` and `trait Baz: !Bar`
[05:11:32] *** Joins: alonlevy_ (alon@moz-p48.q13.159.94.IP)
[05:11:36] *** Quits: khades (Thunderbird@moz-ual.b31.186.31.IP) (Connection closed)
[05:11:44] <Sgeo> Ah
[05:11:45] *** Quits: frankmcsherry (frankmcsher@moz-b6fr69.dyn.telefonica.de) (Ping timeout: 121 seconds)
[05:11:46] <Sgeo> Me too
[05:12:15] <Sgeo> There was some complaint about that possibility though, that suggests that that won't happen
[05:12:49] <aji> is there a way to use unsafe{} to modify an immutable reference?
[05:13:26] *** Quits: sayan (sayan@moz-ip8.595.51.106.IP) (Ping timeout: 121 seconds)
[05:13:29] *** Joins: KLP (KLP@moz-qdcjho.res.rr.com)
[05:13:32] <aji> i tried just x.blah and (&mut *x).blah
[05:13:54] *** Joins: kamilc__ (kamil@moz-u843uu.play-internet.pl)
[05:14:40] <woboats> aji, there can't be a &mut x within the same scope that there exists a &x.
[05:14:45] *** Quits: if_e1se (uid16886@moz-js7dlj.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[05:14:58] <woboats> You can have interior mutabiltiy though using some kind of Cell or one of the abstractions built on top of Cells.
[05:15:04] <scott> aji: not safely, no (not that unsafe isn't for doing unsafe things, it's for doing things you know are safe but the compiler can't figure out)
[05:15:08] <scott> note that*
[05:15:38] *** Quits: glennpratt (glennpratt@moz-neq2gf.dsl-w.verizon.net) (A TLS packet with unexpected length was received.)
[05:15:43] *** Quits: Diggsey (diggsey@moz-2s5u1v.dsl.pipex.com) (Ping timeout: 121 seconds)
[05:15:44] <aji> i'm working with a bipartite graph data structure, basically
[05:16:00] *** Joins: glennpratt (glennpratt@moz-neq2gf.dsl-w.verizon.net)
[05:16:02] <aji> deletion of an edge needs to delete an entry from both vertices
[05:16:22] <aji> i got it to work with RefCells but i don't really like that so much
[05:17:25] *** Joins: khades (Thunderbird@moz-ual.b31.186.31.IP)
[05:17:31] *** Joins: Luqman (laden@moz-bjmiqc.csclub.uwaterloo.ca)
[05:17:59] *** Joins: GGist (Mibbit@moz-st7v59.wa.comcast.net)
[05:18:34] <woboats> aji, and each arc holds a reference to each vertice, right?
[05:18:42] <woboats> *each vertice it connects, i mean
[05:19:01] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[05:19:27] <aji> yeah, but they're immutable references right now
[05:20:02] *** Quits: glennpratt (glennpratt@moz-neq2gf.dsl-w.verizon.net) (Ping timeout: 121 seconds)
[05:20:34] <woboats> Right, but Rust's borrow-checking rules don't allow a mutable reference to co-exist with any other reference.
[05:20:43] <aji> right
[05:21:22] <woboats> You can use a RefCell like you did, or something like an Rc (which is an abstraction around RefCell), or you can have the arcs not hold those references.
[05:21:26] <aji> i might just redo the whole thing in terms of Rc<RefCell<>> :(
[05:21:38] <aji> woboats: that's certainly another option
[05:21:48] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Ping timeout: 121 seconds)
[05:22:02] *** Quits: niconii (nicole@moz-5gqgia.frgo.qwest.net) (Quit: leaving)
[05:22:04] *** Joins: p1start (p1start@moz-nftjhe.org)
[05:23:35] *** Joins: davebettin (davebettin@moz-n59707.bhak.dqhm.0007.2601.IP)
[05:23:48] *** Joins: mnemnion (mnemnion@moz-kf3boi.ca.comcast.net)
[05:24:08] <aji> refcell just makes me nervous because it can panic
[05:24:18] <aji> not sure why i prefer unsafe to that though
[05:24:20] *** Quits: davebettin (davebettin@moz-n59707.bhak.dqhm.0007.2601.IP) (Quit: Leaving)
[05:25:52] *** Joins: ismaelga (ismaelga@moz-op208d.rev.vodafone.pt)
[05:26:05] *** Quits: wilsonk-laptop (kvirc@moz-a3a.hfa.64.184.IP) (Connection closed)
[05:26:15] *** Joins: hjr3 (hradtke@moz-e235ok.fios.verizon.net)
[05:26:26] <woboats> aji, you should probably use a Mutex instead of a RefCell.
[05:26:31] <mbrubeck> aji: The way to use unsafe code here would be to use raw pointers.
[05:26:45] <aji> woboats: it's not synchronization i'm worried about
[05:27:06] <woboats> aji, then your RefCell won't panic.
[05:27:08] <aji> it's stuff like what if you're iterating over the nodes and one gets deleted as you iter
[05:27:20] <reem> aji: that would come up as a panic with RefCell
[05:27:37] <reem> RefCell works best if all your borrows are “atomic”
[05:27:41] *** Joins: glennpratt (glennpratt@moz-neq2gf.dsl-w.verizon.net)
[05:27:49] <aji> right
[05:27:52] <woboats> But why would one get deleted as you iter if you're not worried about synchronization?
[05:28:14] *** Joins: errordeveloper (ilya@moz-649.f7i.219.2.IP)
[05:28:46] *** Joins: zettablade (zettablade@moz-58u.jiv.125.50.IP)
[05:28:56] <aji> i'm not going to explain it, lol
[05:28:59] <reem> woboats: Rc is not an abstraction around RefCell btw, it’s a different thing; Rc is responsible for sharing and RefCell for dynamic ownership.
[05:29:17] <aji> i've replaced the references in the edges with keys into the node tables
[05:29:18] <reem> dynamic mutability checking*
[05:29:56] *** Quits: ismaelga (ismaelga@moz-op208d.rev.vodafone.pt) (Ping timeout: 121 seconds)
[05:30:11] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[05:30:15] *** Quits: lutter1 (lutter@moz-7v7ueu.PUBLIC.monkeybrains.net) (Quit: Leaving.)
[05:30:43] *** Quits: tadh (quassel@moz-88tk3f.res.rr.com) (Connection closed)
[05:31:13] *** Quits: maedhroz (maedhroz@moz-4jk5ho.res.rr.com) (Connection closed)
[05:31:30] *** Joins: choplin (choplin@moz-fsttq3.t6mc.g9m6.001a.240d.IP)
[05:31:44] *** Quits: glennpratt (glennpratt@moz-neq2gf.dsl-w.verizon.net) (Ping timeout: 121 seconds)
[05:32:29] *** Quits: errordeveloper (ilya@moz-649.f7i.219.2.IP) (Ping timeout: 121 seconds)
[05:32:38] *** Joins: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP)
[05:33:08] *** Joins: nott (nott@moz-to4.06o.57.86.IP)
[05:34:00] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[05:34:04] *** Quits: O01eg (o01eg@moz-bgq.20h.212.176.IP) (Client exited)
[05:35:32] *** Quits: choplin (choplin@moz-fsttq3.t6mc.g9m6.001a.240d.IP) (Ping timeout: 121 seconds)
[05:36:19] *** Quits: Guest (textual@moz-rtn.fg7.77.192.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:36:41] *** Quits: kazimuth (james@moz-n85.696.189.18.IP) (Quit: Textual IRC Client: www.textualapp.com)
[05:36:42] *** Joins: wilsonk-laptop (kvirc@moz-a3a.hfa.64.184.IP)
[05:36:54] *** Quits: hjr3 (hradtke@moz-e235ok.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[05:37:13] *** Joins: lenstr (lenstr@moz-ca8.vju.25.171.IP)
[05:37:49] *** Quits: lenstr (lenstr@moz-ca8.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[05:37:53] *** Joins: lenstr (lenstr@moz-ca8.vju.25.171.IP)
[05:38:56] *** Joins: Rym_ (y@moz-a44.2as.55.31.IP)
[05:39:03] *** Joins: waleed (Mibbit@moz-d0rane.clients.pavlovmedia.com)
[05:39:03] *** Quits: lenstr (lenstr@moz-ca8.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[05:39:15] <waleed> Hello
[05:39:17] <mbrubeck> Yay, I made it onto horse_rust. :) https://twitter.com/horse_rust/status/595761730216681474
[05:39:30] <mbrubeck> Greetings, waleed.
[05:39:31] *** Quits: waleed (Mibbit@moz-d0rane.clients.pavlovmedia.com) (Quit: http://www.mibbit.com ajax IRC Client)
[05:40:06] *** nsm|away is now known as nsm
[05:42:33] *** Joins: mindtree (Mitch@moz-f2f9gh.iprimus.net.au)
[05:42:47] <Yurume> so, who runs horse_rust? :)
[05:43:11] <aaronm04> a horse
[05:43:14] <aaronm04> of courso
[05:43:20] <aaronm04> course*
[05:43:29] *** Quits: Rym_ (y@moz-a44.2as.55.31.IP) (Ping timeout: 121 seconds)
[05:44:25] *** Quits: nott (nott@moz-to4.06o.57.86.IP) (Ping timeout: 121 seconds)
[05:44:34] <Yurume> afaik a dog can use the Internet. can a horse do the same?
[05:45:03] <Yurume> (cf. http://upload.wikimedia.org/wikipedia/en/f/f8/Internet_dog.jpg )
[05:46:16] *** Joins: tomprogrammer (thomas@moz-6ct5hk.tr5r.qept.4dd0.2001.IP)
[05:46:52] *** Quits: forgottenone (forgottenon@moz-ha6.416.233.176.IP) (Quit: Konversation terminated!)
[05:47:51] *** Quits: ellinokon (ellinokon@moz-gh5.r2h.62.178.IP) (A TLS packet with unexpected length was received.)
[05:47:55] *** Joins: ellinokon (ellinokon@moz-gh5.r2h.62.178.IP)
[05:48:24] *** Joins: ascarter_ (ascarter@moz-705hf8.wa.comcast.net)
[05:48:44] *** Quits: dustinm` (dustinm@moz-1c1j82.fu2o.sj0n.5300.2607.IP) (Ping timeout: 121 seconds)
[05:49:02] *** Joins: nico (nico@moz-dalf30.dip0.t-ipconnect.de)
[05:49:09] *** Quits: zxq9 (ceverett@moz-qsm369.mesh.ad.jp) (Quit: Konversation terminated!)
[05:49:19] <kagami> Is this correct analogue of C code: http://is.gd/dSYQZI ? I need to create void pointer, set it to NULL, pass reference to it to FFI and then check its value in Rust code. size(usize) should always be equal to size_of(*void), right?
[05:49:57] <ChrisMorgan> Yurume: me in #rust on 2014-11-01: “(Reasoning: https://twitter.com/horse_rust/status/528385025440366592 + https://hn.algolia.com/#!/all/sort_by_date/prefix/0/rust%200.4%20syntax which suggest the two candidates pcwalton and bstrie with the former matching more closely.)”
[05:50:21] <ChrisMorgan> Yurume: neither has made any comment on the topic
[05:50:46] *** Quits: zettablade (zettablade@moz-58u.jiv.125.50.IP) (Connection closed)
[05:50:47] *** Joins: dstrbad (dstrbad@moz-cqq.5kh.217.31.IP)
[05:50:49] <mbrubeck> kagami: Yes, usize is always pointer-sized.
[05:51:13] <mbrubeck> kagami: But you can use any sort of `*mut T` as a pointer to pass to FFI
[05:51:25] <mbrubeck> kagami: The `libc` crate defines a c_void type for this specific purpose.
[05:51:31] <mbrubeck> or you can use `*mut ()`
[05:51:56] <flaub> i guess i'm slightly confused, if a typesystem is said to be modular, why does it need to be coherent? users have to choose which module to 'use' at the caller anyways, so what's the harm in having two different modules that have an impl of a trait for the same type? it seems like the compiler should concern itself with type resolution in this case rather than trying to be smart and 'check' things for you
[05:52:35] *** Quits: ascarter_ (ascarter@moz-705hf8.wa.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[05:52:45] *** Joins: giucam_ (giucam@moz-iv0nnc.bb.dnainternet.fi)
[05:53:04] *** Quits: nico (nico@moz-dalf30.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[05:53:08] *** Quits: dstrbad (dstrbad@moz-cqq.5kh.217.31.IP) (A TLS packet with unexpected length was received.)
[05:53:15] <kagami> mbrubeck: but C code writes to the point of memory where my value sits. I.e. I pass it &usize and it writes to *usize. If I would use value of variable less than size of pointer, it might overflow it, right? Also, I used c_void, but I don't know how to construct one in Rust code.
[05:53:22] <sfackler> flaub: using a module doesn't bring impls inside of it into scope
[05:53:27] *** Quits: mindtree (Mitch@moz-f2f9gh.iprimus.net.au) (Quit: leaving)
[05:53:34] <Yurume> ChrisMorgan: aha.
[05:53:46] *** Joins: James (quassel@moz-225vcm.range86-148.btcentralplus.com)
[05:54:18] *** Joins: zxq9 (ceverett@moz-qsm369.mesh.ad.jp)
[05:54:58] <sfackler> the trait itself, not the implementations of it, is the thing that's scope matters
[05:55:19] <mbrubeck> kagami: Ah, you want a Rust function that takes an *mut *mut T, or &mut &T
[05:55:33] *** Joins: ascarter_ (ascarter@moz-705hf8.wa.comcast.net)
[05:55:34] <flaub> sfackler: but i need to say 'use' to bring in traits from a module?
[05:55:59] <sfackler> that's the trait itself, not a specific impl of it
[05:56:40] <sfackler> like, you don't say "use std::vec::{the impl of Clone for Vec<T>};", you say "use std::clone::Clone;"
[05:56:48] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[05:57:11] <sfackler> and then calling .clone() on a vec tracks down the single implementation of Clone that applies, if it exists
[05:57:51] <kagami> mbrubeck: yes, C operates with double pointer in fact. But as I can understand, I can emulate *void with just usize, so I pass &usize instead of &&void.
[05:58:07] *** Joins: dawehner (quassel@moz-tobu60.hsi4.kabel-badenwuerttemberg.de)
[05:58:50] <mbrubeck> kagami: Yeah, if you just want to print the pointer as an address, and not dereference it, that works.
[05:59:35] <flaub> seems like in a very large system, it might become untenable to ensure that there will only be a single impl of a given trait over a long time, with 100s of modules potentially in play
[05:59:42] *** Quits: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP) (Quit: 堕入 /dev/null)
[05:59:59] <mbrubeck> flaub: That's what the coherency rules guarantee.
[06:00:21] <mbrubeck> flaub: IIRC, early Rust did not have those rules, and allowed named impls that you could import explicitly
[06:00:27] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[06:00:29] <mbrubeck> and the imports were scoped
[06:00:42] <mbrubeck> So, it's possible
[06:00:42] <flaub> mbrubeck: did that end up being a disaster in some way?
[06:00:54] <mbrubeck> I don't know.
[06:01:20] *** Quits: kmcguire (kmcguire@moz-bbqf14.res.bhn.net) (Ping timeout: 121 seconds)
[06:01:40] *** Joins: hjr3 (hradtke@moz-e235ok.fios.verizon.net)
[06:02:32] *** Quits: dawehner (quassel@moz-tobu60.hsi4.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[06:02:42] *** Quits: hjr3 (hradtke@moz-e235ok.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[06:02:52] <flaub> i guess i'm trying to decide for myself if i like coherency (keeps my code cleaner?) or if it's something i'll have to fight
[06:02:54] *** Quits: Verdagon (Verdagon@moz-ff302e.ca.comcast.net) (Client exited)
[06:03:52] *** Joins: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net)
[06:04:14] <bstrie> flaub: coherency makes it so that link-time failures are impossible, which is a godsend when you have lots of packages
[06:04:17] *** Joins: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se)
[06:04:27] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[06:04:50] *** Quits: mdinger (mdinger@moz-us59a2.9bf5.ppaa.0306.2602.IP) (Quit: Leaving)
[06:04:52] *** Joins: dawehner (quassel@moz-tobu60.hsi4.kabel-badenwuerttemberg.de)
[06:04:58] *** Quits: oldornew (oldornew@moz-369lu1.dynamic.simnet.is) (Ping timeout: 121 seconds)
[06:05:34] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Ping timeout: 121 seconds)
[06:05:36] *** Joins: erz (erz@moz-45hupr.broadband.corbina.ru)
[06:05:39] *** Joins: hjr3 (hradtke@moz-e235ok.fios.verizon.net)
[06:05:50] *** darkowlzz|afk is now known as darkowlzz
[06:05:54] <kagami> mbrubeck: thanks. And if I want to emualte "void *p = null", I can just use "0 as *mut c_void", right?
[06:05:56] *** Joins: oldornew (oldornew@moz-369lu1.dynamic.simnet.is)
[06:07:07] <flaub> does coherency work with dynamic libs too?
[06:07:10] *** Quits: genbattle (genbattle@moz-4v0.gkd.16.182.IP) (Ping timeout: 121 seconds)
[06:07:35] <flaub> there must be some sort of runtime coherency at binding time?
[06:08:01] *** Quits: hjr3 (hradtke@moz-e235ok.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[06:08:27] *** Joins: frankmcsherry (frankmcsher@moz-jna.j5l.19.178.IP)
[06:09:10] *** darkowlzz is now known as darkowlzz|afk
[06:09:34] *** darkowlzz|afk is now known as darkowlzz
[06:10:20] *** Joins: hjr3 (hradtke@moz-e235ok.fios.verizon.net)
[06:10:25] *** Quits: hjr3 (hradtke@moz-e235ok.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[06:10:33] <bstrie> flaub: "runtime coherency at binding time"? afaiu the coherence rules statically prohibit incoherent instances in all cases
[06:10:52] *** Joins: eligreen_ (eli@moz-l60e55.dynamic.jazztel.es)
[06:10:56] *** Quits: eligreen_ (eli@moz-l60e55.dynamic.jazztel.es) (Connection closed)
[06:11:24] *** Joins: timj1 (timj@moz-uknuef.dip0.t-ipconnect.de)
[06:11:51] <frankmcsherry> is NonZero in std anywhere, or just core::nonzero?
[06:11:57] *** Joins: sin8h (Adium@moz-4gl.cvv.51.106.IP)
[06:12:38] <flaub> the entire typesystem state might vary between the time i compile lib1 vs lib2, so it seems like there must be runtime component to find the proper binding for a given call
[06:12:40] *** Quits: timj (timj@moz-f9akel.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[06:12:48] *** Quits: fkaa (tundmatu@moz-501od2.business.telia.com) (RecvQ exceeded)
[06:12:57] *** Joins: Brochacho (alberto@moz-p39.q5h.156.131.IP)
[06:12:58] <flaub> *some runtime component
[06:12:59] <sfackler> dynamic libs are processed the same way static libs are - the compiler still reads metadata from the library
[06:13:09] *** Joins: fkaa (tundmatu@moz-501od2.business.telia.com)
[06:13:24] <flaub> the dynamic linker reads metadata from the library?
[06:13:31] <sfackler> no, the compiler
[06:13:37] *** Quits: sin8h1 (Adium@moz-49j.3ph.172.122.IP) (Ping timeout: 121 seconds)
[06:14:11] <kagami> Also, am I correct: I can't just create space for pointer in Rust like in C "void *p;". I need to create some value at first and then get reference to it "v = 0; let p: *mut c_void = &mut v". Right?
[06:14:15] *** darkowlzz is now known as darkowlzz|afk
[06:14:16] <sfackler> the dynamic linker is the standard system one
[06:14:22] *** Quits: ndhoule (ndhoule@moz-sf7g6k.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[06:14:46] <sfackler> the compiler tracks down the symbol name corresponding to calls of the trait method and the linker tracks that symbol down
[06:14:58] *** Joins: csoriano (csoriano@moz-g6rkdc.net.upcbroadband.cz)
[06:15:03] <swgillespie> kagami: if you want null, you can do std::ptr::null_mut()
[06:15:39] *** Quits: skade (skade@moz-6g5dak.pools.vodafone-ip.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:16:01] *** Joins: ndhoule (ndhoule@moz-sf7g6k.ca.comcast.net)
[06:16:06] <sfackler> but in any case, the coherence checks aren't affected by the existence of other implementations
[06:16:14] *** Joins: jaen (jaen@moz-ifmik2.copit.pl)
[06:16:23] <kagami> swgillespie: but I need to pass that pointer to C code (and it will overwrite it) so it won't work with null_mut(), right?
[06:17:10] *** Quits: jgallagher (john@moz-6ge.dhn.131.24.IP) (Ping timeout: 121 seconds)
[06:17:31] <flaub> i'm probably missing something... if i build lib1 and it decides that a callee is in lib2, and likewise, if i compile lib3 independently that decides that a callee (for the same trait & type) lives in lib4, i can see that both lib1 and lib3 will compile just fine. but now if i place lib1 and lib3 in a directory that an exe does late-binding on, how will the exe know that there should only be a single impl?
[06:18:21] <swgillespie> kagami: oh, you want a pointer from a reference?
[06:18:30] <sfackler> that situation can't exist, since coherence would prohibit an impl of the same trait with the same type from existing in two libs
[06:18:39] <swgillespie> you can do let x = 5; let ptr: *mut i32 = &x, I believe
[06:19:28] *** Quits: purak (purak@moz-qam.l9c.236.88.IP) (Ping timeout: 121 seconds)
[06:19:30] <sfackler> at one of lib2 or lib4 wouldn't compile in the first place
[06:19:31] <flaub> if they are compiled independently, how would they ever know of one another? i guess the key part here is the late-binding piece. i don't even know of rust supports it. 
[06:19:53] <sfackler> *at least one of
[06:20:41] <sfackler> late binding isn't supported afaik
[06:20:56] <swgillespie> kagami: http://is.gd/PccpxX
[06:21:01] <flaub> ok, well that would make sense
[06:21:04] <swgillespie> kagami: if you need a *mut c_void, you can transmute that pointer
[06:22:35] *** Quits: Brochacho (alberto@moz-p39.q5h.156.131.IP) (Client exited)
[06:23:21] *** Joins: dstrbad (dstrbad@moz-pvs.o9k.217.31.IP)
[06:24:00] *** Joins: aatch (james@moz-is4j4r.cable.telstraclear.net)
[06:24:43] <sfackler> I guess it sort of exists in the form of trait objects, but even there those methods are essentially early bound in the location that the trait object is instantiated if that makes sense
[06:26:29] *** Quits: Twinklebear (Twinklebear@moz-ttrcn3.ut.comcast.net) (Quit: Leaving)
[06:26:47] *** Quits: alonlevy_ (alon@moz-p48.q13.159.94.IP) (Ping timeout: 121 seconds)
[06:26:47] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[06:26:50] *** Joins: v21 (vee@moz-m7i.lku.108.158.IP)
[06:26:51] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[06:26:53] *** Joins: jgallagher (john@moz-6ge.dhn.131.24.IP)
[06:27:11] *** Joins: ismaelga (ismaelga@moz-op208d.rev.vodafone.pt)
[06:28:06] <aji> i'm at a design crossroads
[06:28:20] <aji> is HashMap::get_mut() going to be faster than RefCell::borrow_mut()?
[06:28:28] <aji> my instincts say "no"
[06:28:37] *** darkowlzz|afk is now known as darkowlzz
[06:28:56] *** Joins: errordeveloper (ilya@moz-649.f7i.219.2.IP)
[06:28:59] <ChrisMorgan> aji: frankly, why do you care? Do you know without a shadow of doubt that it will matter?
[06:29:22] *** Quits: dawehner (quassel@moz-tobu60.hsi4.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[06:29:26] <aatch> Just a quick clarification, there are no aliasing restrictions on *mut T, correct?
[06:29:31] <bstrie> ChrisMorgan: could save some pain later, I suppose. deciding on using internal mutability is a change that's a pain to make later
[06:29:35] <Mutabah> aatch: Afaik, no
[06:30:06] *** Quits: tomprogrammer (thomas@moz-6ct5hk.tr5r.qept.4dd0.2001.IP) (Quit: WeeChat 1.1.1)
[06:30:13] <kagami> swgillespie: huh, I just realized I was dumb. If I use "let p = ptr::null_mut()" it in fact creates the space for p!
[06:30:14] <aji> ChrisMorgan: yeah, more or less it's just the ease of using a combination of Rc<> and Weak<> over frequent HashMap lookups
[06:30:32] <aatch> Awesome, both pointers point to the same type, so even C-like type aliasing shouldn't apply here.
[06:30:32] <ChrisMorgan> bstrie: aji appears to me to be trying to make decisions based on performance considerations; I’m vaguely hinting at the idea that this *may* not be a good approach.
[06:30:51] *** Quits: giucam_ (giucam@moz-iv0nnc.bb.dnainternet.fi) (Ping timeout: 121 seconds)
[06:30:59] <aji> you're right, performance is factoring into it,
[06:31:14] *** Quits: ismaelga (ismaelga@moz-op208d.rev.vodafone.pt) (Ping timeout: 121 seconds)
[06:31:18] *** Joins: christianwhitfield (christianwh@moz-a38b1m.ca.comcast.net)
[06:31:23] <aji> but the C programmer part of my brain insists that hundreds of HashMap lookups where RefCell borrows could be used instead is just not a good idea
[06:31:28] *** Quits: christianwhitfield (christianwh@moz-a38b1m.ca.comcast.net) (Quit: leaving)
[06:31:35] <aji> but then i don't know
[06:31:44] *** Quits: bebijlya (bebijlya@moz-agsqr7.adsl.tpnet.pl) (Ping timeout: 121 seconds)
[06:32:00] *** Joins: bebijlya (bebijlya@moz-e87cfm.adsl.tpnet.pl)
[06:32:06] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[06:32:22] <JustAPerson> ChrisMorgan: this kind of attitude is offensive for a channel of a "systems" language
[06:32:23] <aatch> API considerations first, then performance ones. Though obviously designing an API that is impossible to make acceptably fast is a bad idea.
[06:32:38] *** Joins: choplin (choplin@moz-fsttq3.t6mc.g9m6.001a.240d.IP)
[06:32:40] <JustAPerson> yes, absolute performance in some cases matters
[06:33:11] *** Quits: errordeveloper (ilya@moz-649.f7i.219.2.IP) (Ping timeout: 121 seconds)
[06:33:12] *** Joins: Rym_ (y@moz-a44.2as.55.31.IP)
[06:33:21] <ChrisMorgan> aji: anyway, RefCell.borrow_mut is just a matter of setting the borrow counter to “writing” (panicking if it is not at zero), and then setting it back to zero on drop
[06:33:56] <ChrisMorgan> JustAPerson: making design decisions based on performance considerations where you are not *certain* of the characteristics is normally a bad idea.
[06:34:20] *** Quits: basicdays (basicdays@moz-vreeoj.cable.rcn.com) (Ping timeout: 121 seconds)
[06:34:28] <ChrisMorgan> Premature optimisation and square roots and all that.
[06:34:33] <aji> that's why i was asking
[06:34:44] <aji> anyway i guess i'll wait and see how much of a problem it really is
[06:35:17] *** Quits: dstrbad (dstrbad@moz-pvs.o9k.217.31.IP) (Connection closed)
[06:35:40] *** Joins: oceanwhit (christianwh@moz-a38b1m.ca.comcast.net)
[06:35:40] <reem> aatch: I thought we applied TBAA but apparently not
[06:35:42] *** Joins: dstrbad (dstrbad@moz-pvs.o9k.217.31.IP)
[06:36:04] <JustAPerson> ChrisMorgan: irrespecctive of "what is normally a bad idea", condescendingly dismissing a question on idealogical basis is not constructive
[06:36:09] <gus> huon: unfortunately Rust 1.0 release+meetup conflicts with OpenStack summit - pity we couldn't get one of them moved ;)
[06:36:26] <huon> gus: sad
[06:36:39] <ChrisMorgan> JustAPerson: I didn’t. I asked a legitimate question.
[06:36:40] *** Quits: choplin (choplin@moz-fsttq3.t6mc.g9m6.001a.240d.IP) (Ping timeout: 121 seconds)
[06:36:55] *** Joins: squiddy (squiddy@moz-md4.pm3.19.178.IP)
[06:36:56] <huon> gus: there might be one in... vancouver(?) you could go to!
[06:37:08] <aatch> reem, we do not. Unless I missed something big (which is possible).
[06:37:17] *** Quits: James (quassel@moz-225vcm.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[06:37:20] *** Joins: andresv (textual@moz-m48tte.sta.estpak.ee)
[06:37:22] <JustAPerson> ChrisMorgan: I would not call your question legitimate.
[06:37:24] *** Joins: SneakySnake (nya@moz-i9is4u.pool.telekom.hu)
[06:37:39] *** Quits: Rym_ (y@moz-a44.2as.55.31.IP) (Ping timeout: 121 seconds)
[06:38:14] <ChrisMorgan> JustAPerson: what I intended was something along the lines of “Why are you asking? You’re probably going about this the wrong way.”
[06:39:06] <aatch> It's similar to the XY problem.
[06:39:23] *** Joins: lenstr (lenstr@moz-ca8.vju.25.171.IP)
[06:40:03] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[06:40:12] *** Quits: lenstr (lenstr@moz-ca8.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[06:40:12] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Quit: ChatZilla 0.9.91.1 [Firefox 37.0.2/20150415140819])
[06:40:23] *** Joins: lenstr (lenstr@moz-ca8.vju.25.171.IP)
[06:40:24] <tomaka> Dammit I look like an idiot again when commenting an RFC
[06:40:45] <tomaka> it's always the same process: I open "this week in rust", check the list of new RFCs
[06:41:21] *** Quits: lenstr (lenstr@moz-ca8.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[06:41:21] <tomaka> click on an interesting one, see that there are already 40 comments here, read that quickly, and comment on something that was already raised earlier
[06:42:02] <tomaka> the fact that RFCs proposals can be modified and force-pushed doesn't help
[06:42:04] *** Joins: areski (areski@moz-aehvq9.user.ono.com)
[06:42:28] <oceanwhit> quit
[06:42:52] *** Joins: ehiggs (ehiggs@moz-pob5cp.ugent.be)
[06:42:58] <tomaka> what do I do? just ignore all RFCs, or spend an hour carefully reading everything? (because it really would take an hour)
[06:42:59] <oceanwhit> sorry mistel
[06:43:26] <tomaka> I'll leaning towards the first one
[06:43:30] <tomaka> the former*
[06:43:36] *** Joins: mvyskocil (mvyskocil@moz-1fo.p0p.7.31.IP)
[06:43:53] *** Quits: oceanwhit (christianwh@moz-a38b1m.ca.comcast.net) (Quit: leaving)
[06:44:00] <tomaka> I wish github had a reddit-like system, where the most interesting points would be on top at the first glance
[06:44:09] *** Joins: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch)
[06:44:43] *** Quits: psy (psy@moz-ous.ntd.6.103.IP) (Ping timeout: 121 seconds)
[06:44:43] *** Quits: dstrbad (dstrbad@moz-pvs.o9k.217.31.IP) (Connection closed)
[06:44:45] *** Quits: njn (chatzilla@moz-gfeqi3.iinet.net.au) (Quit: ChatZilla 0.9.91.1 [Firefox 40.0a1/20150503160042])
[06:44:57] *** Joins: oceanwhit (christianwh@moz-a38b1m.ca.comcast.net)
[06:45:12] *** Joins: dstrbad (dstrbad@moz-pvs.o9k.217.31.IP)
[06:45:21] *** Quits: calp (calp@moz-3g06if.com) (Quit: ZNC - http://znc.in)
[06:45:52] <oceanwhit> how do i raise a number to a power? the docs arn't helping
[06:46:08] <Manishearth> oceanwhit: num::pow or something?
[06:46:13] <scott> int or float?
[06:46:31] <oceanwhit> int, is it different for float?
[06:46:41] *** Quits: ndhoule (ndhoule@moz-sf7g6k.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[06:46:43] *** Joins: calp (calp@moz-3g06if.com)
[06:46:48] <scott> .pow for an int, .powi or .powf for a float base (with an int or float power)
[06:46:49] *** Quits: KLP (KLP@moz-qdcjho.res.rr.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[06:46:53] <oceanwhit> manishearth, im surprised i cant find that in the api docs
[06:46:53] <Manishearth> http://doc.rust-lang.org/std/primitive.f32.html#method.powf
[06:46:56] <Manishearth> http://doc.rust-lang.org/std/primitive.u16.html#method.pow
[06:47:01] <Manishearth> oceanwhit: yes you can
[06:47:03] <Manishearth> I just did
[06:47:05] <scott> http://doc.rust-lang.org/1.0.0-beta.4/std/?search=pow
[06:47:07] <Manishearth> type pow in the search box
[06:47:08] *** Joins: m104ru (m104ru@moz-sje.6lq.205.109.IP)
[06:47:21] <oceanwhit> scott, manishearth, cool thank you
[06:48:34] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:49:24] <Rusky1> is there some way I can convince rust to link a *-sys style library with -Wl,--whole-archive ?
[06:49:31] *** Quits: sin8h (Adium@moz-4gl.cvv.51.106.IP) (Quit: Leaving.)
[06:49:32] *** Rusky1 is now known as Rusky
[06:49:53] *** Quits: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch) (Quit: Leaving.)
[06:50:03] *** Joins: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch)
[06:50:11] *** Joins: giucam_ (giucam@moz-u9jnsc.c665.0nib.2060.2001.IP)
[06:50:16] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[06:50:18] *** Quits: giucam_ (giucam@moz-u9jnsc.c665.0nib.2060.2001.IP) (Connection closed)
[06:50:27] *** Joins: giucam_ (giucam@moz-u9jnsc.c665.0nib.2060.2001.IP)
[06:51:49] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[06:51:54] *** Quits: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch) (Quit: Leaving.)
[06:51:54] *** Joins: sin8h (Adium@moz-4gl.cvv.51.106.IP)
[06:52:19] *** Joins: dustinm` (dustinm@moz-es6jb7.ip-167-114-152.net)
[06:52:23] *** Quits: GGist (Mibbit@moz-st7v59.wa.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:52:55] *** Joins: vks (quassel@moz-b54qc9.fias.uni-frankfurt.de)
[06:52:55] *** Quits: dstrbad (dstrbad@moz-pvs.o9k.217.31.IP) (Connection closed)
[06:53:17] *** Joins: dstrbad (dstrbad@moz-pvs.o9k.217.31.IP)
[06:53:50] *** Quits: kanru (kanru@moz-2hf62a.HINET-IP.hinet.net) (A TLS packet with unexpected length was received.)
[06:54:23] *** Joins: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net)
[06:54:24] *** Joins: twipeD (wipeD@moz-467u0a.dip0.t-ipconnect.de)
[06:55:03] *** srjek_ is now known as srjek
[06:56:08] *** Joins: twi (twi@moz-dhvtp3.clients.your-server.de)
[06:56:08] *** Quits: dstrbad (dstrbad@moz-pvs.o9k.217.31.IP) (Connection closed)
[06:56:31] *** Joins: dstrbad (dstrbad@moz-pvs.o9k.217.31.IP)
[06:56:38] *** Joins: aravindavk (aravinda@moz-5gq.91j.243.117.IP)
[06:56:46] *** Quits: twi (twi@moz-dhvtp3.clients.your-server.de) (A TLS packet with unexpected length was received.)
[06:57:39] *** Quits: Uther (Thunderbird@moz-gssp49.fbx.proxad.net) (Client exited)
[06:58:24] *** Quits: dstrbad (dstrbad@moz-pvs.o9k.217.31.IP) (Connection closed)
[06:58:41] <srjek> Is there a better way of doing this? http://is.gd/hzoLpE
[06:58:46] *** Quits: zimbatm (zimbatm@moz-f37kde.com) (Quit: Bye)
[06:58:51] *** Joins: dstrbad (dstrbad@moz-pvs.o9k.217.31.IP)
[06:59:09] *** Joins: Uther (Thunderbird@moz-gssp49.fbx.proxad.net)
[06:59:30] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[06:59:33] *** Joins: zimbatm (zimbatm@moz-f37kde.com)
[07:00:24] *** Quits: dstrbad (dstrbad@moz-pvs.o9k.217.31.IP) (Connection closed)
[07:00:29] <srjek> I'm trying to create and add an object if it's not found in a Vec, but I seem to be running into a issue with a early return extending a borrow to the end of the function.
[07:00:46] *** Joins: dstrbad (dstrbad@moz-pvs.o9k.217.31.IP)
[07:01:47] *** Quits: aravindavk (aravinda@moz-5gq.91j.243.117.IP) (Connection closed)
[07:01:55] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[07:02:03] *** Joins: aravindavk (aravinda@moz-5gq.91j.243.117.IP)
[07:02:40] *** Quits: dstrbad (dstrbad@moz-pvs.o9k.217.31.IP) (Connection closed)
[07:03:04] *** Joins: dstrbad (dstrbad@moz-pvs.o9k.217.31.IP)
[07:03:10] <flaub> perhaps a VecMap is better along with the entry api?
[07:03:29] *** Quits: Yeti (Mibbit@moz-cb9mg6.ST.HMC.Edu) (Quit: http://www.mibbit.com ajax IRC Client)
[07:04:41] *** Quits: kgrandon (Adium@moz-9svgt8.hjek.d045.0009.2601.IP) (Quit: Leaving.)
[07:05:14] *** Quits: james4k (james@moz-fm2a4v.consolidated.net) (Ping timeout: 121 seconds)
[07:05:20] *** Quits: m104ru (m104ru@moz-sje.6lq.205.109.IP) (Ping timeout: 121 seconds)
[07:05:50] *** Quits: dstrbad (dstrbad@moz-pvs.o9k.217.31.IP) (Connection closed)
[07:05:57] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Ping timeout: 121 seconds)
[07:06:03] *** Joins: alonlevy_ (alon@moz-ofv.tgc.142.37.IP)
[07:06:11] <Mutabah> Well, my hacky linter is coming along nicely
[07:06:13] <srjek> By entry api I assume you mean the VecMap::entry function https://doc.rust-lang.org/std/collections/struct.VecMap.html#method.entry
[07:06:17] *** Joins: dstrbad (dstrbad@moz-pvs.o9k.217.31.IP)
[07:06:23] *** Quits: tno (tomas@moz-dk68m3.7pm2.so41.08a0.2001.IP) (Connection closed)
[07:06:33] <Rusky> is there some way I can convince rust to link a *-sys style library with -Wl,--whole-archive, when it's part of an rlib?
[07:06:35] <srjek> huh...
[07:06:48] <Rusky> it already does if it's part of a binary
[07:06:52] <ChrisMorgan> srjek: http://is.gd/sCpQzO
[07:07:17] *** Joins: skade (skade@moz-4eh.d50.201.212.IP)
[07:07:24] <oceanwhit> is there a better way of saying this? for j in 1..((i as f32).sqrt() as i32)
[07:07:38] <reem> What is TyOverby from github’s nick?
[07:07:44] *** Quits: aravindavk (aravinda@moz-5gq.91j.243.117.IP) (Ping timeout: 121 seconds)
[07:07:45] *** Joins: dawehner (quassel@moz-nfa3eq.eap.uni-tuebingen.de)
[07:07:48] <Rusky> or rather, I need to link an rlib as -Wl,--whole-archive
[07:07:50] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[07:07:52] <ChrisMorgan> srjek: when SEME arrives the problem will be fixed.
[07:07:58] <ChrisMorgan> !SEME
[07:07:58] <rustbot> Non-lexical borrow scopes https://github.com/rust-lang/rfcs/issues/811
[07:08:00] <srjek> ChrisMorgan: That works, thanks
[07:08:11] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[07:08:31] *** Quits: isomarcte (isomarcte@moz-vqvrcl.hfc.comcastbusiness.net) (Ping timeout: 121 seconds)
[07:09:08] *** Quits: dstrbad (dstrbad@moz-pvs.o9k.217.31.IP) (Connection closed)
[07:09:16] <srjek> Yet another thing I'll be waiting for.
[07:09:32] *** Joins: dstrbad (dstrbad@moz-pvs.o9k.217.31.IP)
[07:09:39] *** Joins: laparca (laparca@moz-rgcs06.mgob.kh00.0488.2a01.IP)
[07:09:50] <Mutabah> Is there a good way to make an indent string in rust?
[07:09:53] <ChrisMorgan> srjek: it’s quite possible that you should be using a map of some form with Blah.foo being the key.
[07:09:56] <zaeleus> oceanwhit: There is not.
[07:10:08] <ChrisMorgan> Mutabah: “an indent string”?
[07:10:15] <zaeleus> oceanwhit: I actually did the same when I tried your Euler 21 problem earlier.
[07:10:28] <Mutabah> ChrisMorgan: For logging, to distinguish recursion
[07:10:40] * Mutabah tries {:*s}
[07:10:47] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[07:10:52] <oceanwhit> zaeleus, ah, it just seems goofy, and step-functiony
[07:11:08] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[07:11:13] <ChrisMorgan> Mutabah: if you have something as a string, you could indent every line of it with .replace("\n", "\n    ")…
[07:11:26] *** Parts: insaneinside (user@moz-dgv9mb.customer.broadstripe.net) ("night")
[07:11:38] *** Joins: kanru (kanru@moz-2hf62a.HINET-IP.hinet.net)
[07:11:39] <Mutabah> ChrisMorgan: Nah, for logging - So I know (somehow) how deep in recursion I am, and want to print that many spaces before my log messagfe
[07:11:44] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[07:12:17] *** Quits: dstrbad (dstrbad@moz-pvs.o9k.217.31.IP) (Connection closed)
[07:12:19] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:12:40] *** Joins: dstrbad (dstrbad@moz-pvs.o9k.217.31.IP)
[07:12:52] <ChrisMorgan> Oh, I finally understand what you’re getting at. I don’t know anything better than `for _ in 0..level { try!(write!(f, "    ")); }`.
[07:13:02] <Mutabah> Oh well
[07:13:13] *** Quits: Porkepix_ (Porkepix@moz-e1bv2v.rev.sfr.net) (Quit: My laptop has gone to sleep. ZZZzzz…)
[07:13:18] *** Joins: bjz (bjz@moz-b43.1aa.161.202.IP)
[07:13:36] <reem> You can create a static array of indent strings and index into that, then print with println!(“{}{}”, indents, thing); but that’s a bit ugly too
[07:13:46] <Sgeo> What happens if someone gets an Entry on a VecMap, gets a Vacant, but doesn't insert, if reallocation would have been required for the insert?
[07:13:47] <Mutabah> I'll just make an iterator wrapper
[07:14:17] *** Joins: twi (twi@moz-dhvtp3.clients.your-server.de)
[07:14:18] <ChrisMorgan> Sgeo: .entry() ensures that there is enough spare space.
[07:14:19] *** Quits: twi (twi@moz-dhvtp3.clients.your-server.de) (A TLS packet with unexpected length was received.)
[07:14:39] <ChrisMorgan> So yes, if you don’t intend to insert then .entry() may be less efficient.
[07:14:57] <Sgeo> Oh, VacantEntry isn't just a &mut, it requires an .insert() to get a &mut
[07:15:20] <Sgeo> ChrisMorgan, I misunderstood/misremembered the API as being Vacant(&mut)/Occupied(&mut)
[07:15:25] *** Joins: aravindavk (aravinda@moz-pom.0e8.236.117.IP)
[07:15:27] <flaub> srjek: yeah, checkout http://doc.rust-lang.org/1.0.0-beta.4/std/collections/index.html#entries
[07:15:45] *** Quits: kanru (kanru@moz-2hf62a.HINET-IP.hinet.net) (A TLS packet with unexpected length was received.)
[07:19:20] *** Quits: dstrbad (dstrbad@moz-pvs.o9k.217.31.IP) (Connection closed)
[07:19:46] *** Joins: dstrbad (dstrbad@moz-pvs.o9k.217.31.IP)
[07:20:57] *** Joins: frankmcs_ (frankmcsher@moz-jna.j5l.19.178.IP)
[07:21:04] *** Joins: kanru (kanru@moz-aj9ejj.HINET-IP.hinet.net)
[07:21:14] <frankmcs_> ChrisMorgan: the code looks like it defers the allocation. https://github.com/rust-lang/rust/blob/8871c17b76a1e0ab36ce2bb51008b53f596e5b3c/src/libcollections/vec_map.rs#L670-L679
[07:21:15] *** Joins: twi (twi@moz-dhvtp3.clients.your-server.de)
[07:21:51] *** Quits: frankmcsherry (frankmcsher@moz-jna.j5l.19.178.IP) (Connection closed)
[07:21:59] *** Quits: Shackra (Jorge@moz-7bh.ng6.177.186.IP) (Connection closed)
[07:22:34] *** Quits: moa (Cedric@moz-h3f7lu.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[07:22:49] *** Quits: aravindavk (aravinda@moz-pom.0e8.236.117.IP) (Ping timeout: 121 seconds)
[07:22:50] <ChrisMorgan> srjek: actually, use `let listing = self.listings.iter_mut().position(|c| c.foo == foo);` rather than the .enumerate().find().map() thing.
[07:23:07] *** Joins: munksgaard (munksgaard@moz-1i4.hq0.225.130.IP)
[07:23:30] *** darkowlzz is now known as darkowlzz|afk
[07:23:43] <Sgeo> Wait, Entry is going away?
[07:23:53] <Sgeo> Oh no that's just a method on it
[07:24:05] <srjek> "// FIXME(Gankro): this is basically the dumbest implementation of entry possible, because"... https://github.com/rust-lang/rust/blob/8871c17b76a1e0ab36ce2bb51008b53f596e5b3c/src/libcollections/vec_map.rs#L615
[07:24:07] <ChrisMorgan> Nah, Entry is too cool to go away.
[07:24:13] *** Joins: slomo (slomo@moz-p8m0g2.net)
[07:24:18] <Mutabah> entry is wonderful
[07:24:27] <srjek> HashMap looks like it might have a less-dumb implementation
[07:24:41] <ChrisMorgan> HashMap’s is Serious Business.
[07:24:58] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[07:24:58] *** ChanServ sets mode: +o pnkfelix
[07:25:07] <flaub> Mutabah: how about this? http://is.gd/qyYcgl
[07:25:14] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.5.1)
[07:25:24] *** Quits: twi (twi@moz-dhvtp3.clients.your-server.de) (A TLS packet with unexpected length was received.)
[07:25:27] <Mutabah> flaub: Meh, I hacked up a structure and implemented display on it
[07:25:30] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[07:25:30] *** ChanServ sets mode: +o pnkfelix
[07:25:34] *** Joins: twi (twi@moz-dhvtp3.clients.your-server.de)
[07:25:36] *** Quits: dstrbad (dstrbad@moz-pvs.o9k.217.31.IP) (A TLS packet with unexpected length was received.)
[07:25:36] <Mutabah> I just wanted an existing one if it was avaliable
[07:25:45] *** Joins: tno (tomas@moz-inn5kj.7pm2.so41.08a0.2001.IP)
[07:25:59] <ChrisMorgan> VecMap certainly makes no pretense to intellectual eminence or scholarship sublime.
[07:26:12] *** Quits: twi (twi@moz-dhvtp3.clients.your-server.de) (A TLS packet with unexpected length was received.)
[07:26:29] *** Joins: errordeveloper (ilya@moz-649.f7i.219.2.IP)
[07:26:33] <frankmcs_> I don't get why VecMap is getting a bad rap. T.T
[07:26:45] <Mutabah> frankmcs_: It's a sorted list, right?
[07:26:49] <frankmcs_> It doesn't eagerly allocate, and the Entry impl is just a second array dereference.
[07:27:13] *** Joins: Rym_ (y@moz-a44.2as.55.31.IP)
[07:27:15] <Mutabah> Oh, wait, it's just an optional array
[07:27:17] <frankmcs_> Mutabah: no, it is a Vec<Option<T>>
[07:27:27] <ChrisMorgan> frankmcs_: it’s a basic, dumb structure that works well for certain simple things.
[07:27:28] *** Joins: fabianvf (fabianvf@moz-fjqmui.va.comcast.net)
[07:27:31] *** Joins: tunnuz (tunnuz@moz-meb4uj.net)
[07:27:47] <frankmcs_> ChrisMorgan: its super efficient in lots of cases. just ... wanted to stick up for it.
[07:28:21] *** Quits: bjz (bjz@moz-b43.1aa.161.202.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[07:28:31] *** Joins: aravindavk (aravinda@moz-r02.a0j.200.117.IP)
[07:28:34] * ChrisMorgan wonders how often such cases actually arise—he wouldn’t expect them to be common
[07:28:44] <frankmcs_> I'm looking at one right now.
[07:29:03] *** Quits: DemonOne (Avi@moz-fntb3c.cablep.bezeqint.net) (Ping timeout: 121 seconds)
[07:29:19] <frankmcs_> my VecMap<NonZero<u32>> to find the lead of a linked list for each int, using less than 16 bytes for each key.
[07:29:29] <frankmcs_> fewer*
[07:29:54] *** darkowlzz|afk is now known as darkowlzz
[07:30:05] *** Joins: tigrou3tac (fabien@moz-gdonfo.fbx.proxad.net)
[07:30:21] *** Joins: twi (twi@moz-dhvtp3.clients.your-server.de)
[07:30:33] <ChrisMorgan> Sounds like it could just as easily be a Vec<u32> with zero treated specially if necessary?
[07:30:36] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[07:31:13] <frankmcs_> ChrisMorgan: yeah, and I could write the logic to test the index against .len() on lookup, and I could call it get(&u), and ..
[07:31:29] *** Quits: sin8h (Adium@moz-4gl.cvv.51.106.IP) (Quit: Leaving.)
[07:31:30] *** Quits: fabianvf (fabianvf@moz-fjqmui.va.comcast.net) (Ping timeout: 121 seconds)
[07:31:32] <ChrisMorgan> Sure. The simple little abstraction can be convenient.
[07:31:34] *** Quits: zamabe (zamabe@moz-7mhhto.kslv.dq2b.3c00.2600.IP) (Quit: May a hurricane tear the roof off an IHOP so that waffles may be enjoyed by all!)
[07:31:49] *** Quits: Rym_ (y@moz-a44.2as.55.31.IP) (Ping timeout: 121 seconds)
[07:32:05] <ChrisMorgan> (It can also be rather dangerous as you might forget that .insert(really large number, x) is rather memory-hungry.)
[07:32:13] * ChrisMorgan shrugs
[07:32:29] *** Quits: twi (twi@moz-dhvtp3.clients.your-server.de) (A TLS packet with unexpected length was received.)
[07:32:32] *** Joins: twi (twi@moz-dhvtp3.clients.your-server.de)
[07:32:35] *** Quits: aravindavk (aravinda@moz-r02.a0j.200.117.IP) (Ping timeout: 121 seconds)
[07:32:47] *** Joins: aravindavk (aravinda@moz-r02.a0j.200.117.IP)
[07:32:57] *** Quits: aravindavk (aravinda@moz-r02.a0j.200.117.IP) (Quit: Konversation terminated!)
[07:33:08] *** Joins: aravindavk (aravinda@moz-r02.a0j.200.117.IP)
[07:34:40] *** darkowlzz is now known as darkowlzz|afk
[07:35:11] *** Joins: kmicu (kmicu@moz-uga.edn.218.91.IP)
[07:35:50] *** Quits: areski (areski@moz-aehvq9.user.ono.com) (Ping timeout: 121 seconds)
[07:36:18] *** Quits: rainemak (rainemak@moz-inv26g.gjaa.pi0p.0998.2001.IP) (Ping timeout: 121 seconds)
[07:39:24] *** Quits: arBmind1 (Andreas@moz-u9gf0e.dyn.telefonica.de) (Quit: Leaving.)
[07:39:24] *** Quits: frankmcs_ (frankmcsher@moz-jna.j5l.19.178.IP) (Connection closed)
[07:39:41] *** Quits: oceanwhit (christianwh@moz-a38b1m.ca.comcast.net) (Ping timeout: 121 seconds)
[07:39:42] *** Joins: frankmcsherry (frankmcsher@moz-jna.j5l.19.178.IP)
[07:40:50] *** Joins: mindtree (Mitch@moz-356.4j6.134.203.IP)
[07:40:56] *** Quits: mkpankov (mkpankov@moz-550.0jj.23.84.IP) (Ping timeout: 121 seconds)
[07:41:04] *** Quits: michael2 (michael@moz-9vjtig.mo.charter.com) (Ping timeout: 121 seconds)
[07:41:06] *** Joins: qwerty_nor (Thunderbird@moz-vuo.d5a.248.5.IP)
[07:41:54] *** Joins: lenstr (lenstr@moz-ca8.vju.25.171.IP)
[07:42:30] *** Quits: lenstr (lenstr@moz-ca8.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[07:42:40] *** Joins: zeebo_ (zeebo@moz-qtpltq.ut.vivintwireless.net)
[07:42:41] *** Joins: lenstr (lenstr@moz-ca8.vju.25.171.IP)
[07:42:46] *** Joins: bkircher (bkircher@moz-hrr86t.otris.de)
[07:43:41] *** Quits: lenstr (lenstr@moz-ca8.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[07:44:06] *** Quits: zeebo (zeebo@moz-qtpltq.ut.vivintwireless.net) (Ping timeout: 121 seconds)
[07:45:16] *** Joins: bjz (bjz@moz-b43.1aa.161.202.IP)
[07:46:51] *** Quits: bjz (bjz@moz-b43.1aa.161.202.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[07:48:55] *** Joins: Franciman (francesco@moz-9kg8jb.retail.telecomitalia.it)
[07:49:02] <Franciman> Hello
[07:49:17] <Franciman> How can I fully learn about rust?
[07:49:23] <Mutabah> Read the rust book
[07:49:27] <Franciman> I've seen the book, but it's incomplete
[07:49:55] *** Joins: rainemak (rainemak@moz-6btvus.gjaa.pi0p.0998.2001.IP)
[07:50:05] <AFallingGuy> To first under stand rust from scratch you must create the universe
[07:50:06] <reem> Write a bunch of rust
[07:50:18] <frankmcsherry> Franciman: to learn, you must do.
[07:50:27] <Mutabah> Franciman: Which version of the book? (I think one of the betas had an incomplete version)
[07:50:28] <reem> Really that’s the best/only way to really understand it and internalize the features
[07:51:03] <Mutabah> But as reem said, just get coding :)
[07:51:14] <aatch> I learned Rust by hacking on the compiler!
[07:51:17] <Franciman> Murarth, both beta and nightly, the ones I get from the main page
[07:51:37] <Franciman> but for example, I'd like to know how lifetimes work
[07:51:58] <Mutabah> Franciman: (Mutabah) ah, I was about to ask which chapters were still marked as coming soon
[07:52:16] <Franciman> Mutabah, lol sorry, I autocompleted :/
[07:52:23] <Mutabah> Franciman: It happens a lot, don't worry :D
[07:52:32] <kimundi> Franciman: Afaik many of the chapters that are marked as "coming soon" are in fact partially covered in previos chapters
[07:52:32] <frankmcsherry> I'm a little worried now myself.
[07:52:53] <aatch> Franciman, re: lifetimes, no written document will compete with actually having to work with them.
[07:53:02] <Franciman> anything I've read about lifetimes is just
[07:53:05] <Franciman> add some 'a
[07:53:06] <Franciman> somewhere
[07:53:07] <kimundi> There is a lot of restructuring/rewriting going on, but afaik no exisitng docs should actually have been lost recently
[07:53:10] <aatch> Franciman, they're Rust's version of Monads
[07:53:17] <kimundi> aatch: No ther not
[07:53:31] <frankmcsherry> kimundi: i think he means "they hurt your brain, and then you finally get them"
[07:53:33] <aatch> kimundi, in terms of the fact that we will be forever explaining them.
[07:53:42] <aatch> Not that they are literally monads.
[07:53:52] *** Joins: zmack (zmack@moz-htpein.home.aster.pl)
[07:53:53] <Mutabah> Franciman: In short - They're an annotation showing lifetime relations outside of function bodies
[07:54:23] <frankmcsherry> Franciman: in addition to indicating something is a reference (pointer) you need to state how long you are certain it will be valid for.
[07:54:43] <kimundi> But thats the wrong meme to perpetuate! Saing something is hard to explain just makes it _more_ hard to explain and understand! Self fullfilling prophecy and all. Thats haskells problem with monads
[07:54:57] *** ashgenes1s is now known as ashgenesis
[07:55:01] *** Joins: woof (corgi@moz-h8e.se4.242.193.IP)
[07:55:07] <kimundi> And we _don't_ want to have the same problem with lifetimes
[07:55:13] *** Quits: fmtq (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[07:55:28] <frankmcsherry> they are new and powerful and liberating! They are Rusts goroutines!
[07:55:28] <Franciman> uh, I think I should see some usage of it
[07:56:11] <woof> Hi. When I try to create a directory in my home folder with fs::create_dir("~/boop"); I get this error: No such file or directory (os error 2)'. Anyone know why?
[07:56:30] <frankmcsherry> Franciman: fn get_reference<'a>(bytes: &'a [u8], index: usize) -> &'a u8 { &bytes[index] }
[07:56:32] <Mutabah> Franciman: http://rustbyexample.com/scope/lifetime/struct.html
[07:56:42] <Mutabah> and 
[07:56:44] <Mutabah> http://rustbyexample.com/scope/lifetime.html
[07:56:45] <aatch> woof, `~` doesn't reference your home folder there.
[07:56:46] *** Joins: genbattle (genbattle@moz-ikj3l8.xtra.co.nz)
[07:56:51] <kimundi> Franciman: What a lifetime _is_: The scope for which a variable exists. Eg for code like `let x = 0; { let a = 5; }`, the variable `a` (not its value, not its type) has an unnamed lifetime that starts at the second "let" statement and ends when the block closes
[07:57:01] *** Quits: qrlpx (quassel@moz-n7t.3nb.211.95.IP) (Quit: No Ping reply in 180 seconds.)
[07:57:03] <woof> aatch, How would I target my home folder then?
[07:57:12] <frankmcsherry> Franciman: that function returns a reference to a thing in an array, but to do this with lifetimes it needs to pass information it is promised about the lifetime of the input reference as part of its output reference.
[07:57:13] *** Quits: zmack (zmack@moz-htpein.home.aster.pl) (Connection closed)
[07:57:16] <aatch> woof, '~' is interpreted by your shell in most cases.
[07:57:24] *** Joins: ebel (rory@moz-l1ldq7.hsi4.kabel-badenwuerttemberg.de)
[07:57:32] *** Joins: fmtq (fmtq@moz-d08itp.tpgi.com.au)
[07:57:34] <aatch> woof, use the environment variable in most cases.
[07:57:40] <woof> Alright
[07:57:46] <aatch> woof, though there may be a helper function for it somewhere.
[07:58:00] <kimundi> I think we really should focus explanations of lifetimes in general on where they come from, and not just on generics using them
[07:58:15] *** Joins: qrlpx (quassel@moz-n7t.3nb.211.95.IP)
[07:58:35] <frankmcsherry> kimundi: i think it depends on the learner. lots of people (e.g. me) like to know what problem they are meant to solve.
[07:58:39] <woof> oh yeah, there's a home_dir function
[07:58:50] <kimundi> frankmcsherry: fair point
[07:59:05] <Franciman> oh thanks for all these examples
[07:59:09] <aatch> kimundi, agreed. I think a major sticking point is that the "source" of all lifetimes are actually variables, but that fact is unclear at first.
[07:59:23] <Franciman> I'll look at them carefully, start writing down some code, and see what happens
[07:59:30] <Franciman> thanks a lot for your help
[07:59:36] <aatch> Well, non-static lifetimes.
[08:00:32] *** Joins: mkpankov (mkpankov@moz-4o9.n6u.23.84.IP)
[08:00:35] *** Joins: larhat (Adium@moz-1dkvl5.81.in-addr.arpa)
[08:00:47] *** darkowlzz|afk is now known as darkowlzz
[08:00:55] *** Quits: Kxepal (Miranda@moz-gs3et5.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[08:01:15] *** Joins: arBmind (Andreas@moz-or4srb.adsl.alicedsl.de)
[08:01:35] *** Joins: choplin (choplin@moz-fsttq3.t6mc.g9m6.001a.240d.IP)
[08:02:17] *** Joins: dstrbad (dstrbad@moz-ucs9if.net.t-com.hr)
[08:02:40] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[08:02:45] *** Joins: michael2 (michael@moz-9vjtig.mo.charter.com)
[08:02:48] *** Quits: larhat (Adium@moz-1dkvl5.81.in-addr.arpa) (Quit: Leaving.)
[08:02:49] <kimundi> Franciman: As a follow up to "lifetimes being variables": You could in theory write some Rust code that is only valid to use for a single specific variable in all your source code, but that is very un-useful. So virtually all uses of lifetimes are actually by functions and types that are generic over a possible lifetime, so that you can use them for arbitrary variable scopes
[08:02:50] <Sgeo> Rust keeps reminding me of lenses
[08:02:59] *** Joins: Kxepal (Miranda@moz-k3c9pl.pppoe.mtu-net.ru)
[08:03:02] *** Joins: _bart (bart@moz-hu0dqu.irf.se)
[08:03:19] *** nsm is now known as nsm|away
[08:03:25] <Sgeo> https://hackage.haskell.org/package/lens-3.10/docs/Control-Lens-Iso.html#v:non
[08:03:28] *** Quits: DerisiveLogic (smuxi@moz-g93io6.res.rr.com) (A TLS packet with unexpected length was received.)
[08:03:30] <Franciman> uh I will try 
[08:03:41] *** Joins: fabiand (fabiand@moz-a37gg0.dip0.t-ipconnect.de)
[08:04:02] <Sgeo> Seems similar (but not the same) to using Entry's or_insert(), except Haskell's has a restriction on the map, that it shouldn't contain items with values matching the default
[08:04:30] *** Joins: Guest63 (textual@moz-qfs.570.70.83.IP)
[08:04:45] *** AFallingGuy is now known as FallingAlways
[08:05:00] *** Joins: pavelpenev (quassel@moz-8vs4j7.btc-net.bg)
[08:05:17] *** Joins: sin8h (Adium@moz-4gl.cvv.51.106.IP)
[08:05:37] *** Quits: choplin (choplin@moz-fsttq3.t6mc.g9m6.001a.240d.IP) (Ping timeout: 121 seconds)
[08:06:22] <Sgeo> playbot, let mut m = HashMap::new(); m.entry(5).or_insert_with(|| HashMap::new()).entry(0).or_insert(0)
[08:06:23] -playbot- <anon>:9:21: 9:33 error: failed to resolve. Use of undeclared type or module `HashMap`
[08:06:23] -playbot- <anon>:9         let mut m = HashMap::new(); m.entry(5).or_insert_with(|| HashMap::new()).entry(0).or_insert(0)
[08:06:23] -playbot- output truncated; full output at: http://bit.ly/1bxir8M
[08:06:36] *** Quits: ascarter_ (ascarter@moz-705hf8.wa.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[08:06:42] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Ping timeout: 121 seconds)
[08:07:11] <Sgeo> Except all those are defined by the HashMap itself. Lenses and other optics are independent
[08:07:12] <frankmcsherry> Sgeo: it drives me crazy that or_insert_with() doesn't show you the key. >.<
[08:08:38] <Sgeo> Can I just impl<T> T {}
[08:08:49] <Sgeo> To define methods on every type?
[08:08:57] <frankmcsherry> Sgeo: my understanding from reading the notes is that they bounced around a bit on HashMap (and other collections) due partly to ownership and borrowing. Probably something Haskell gets less tripped up by.
[08:09:24] <aatch> Sgeo, no. You have to use a trait to do that.
[08:09:54] <Sgeo> Oh, but with a trait I can define methods on every type (as long as the trait is in scope)?
[08:11:00] <aatch> Sgeo, correct
[08:11:07] <woof> Eh, what would be the best way to create a directory in my home folder by getting my home folder with home_dir? I can't use format! which I use for most of my string concatenation
[08:11:43] <woof> Something like Path::new(home_dir() + "boop") (obviously not gonna work, pseudocode)
[08:12:04] <Yurume> playbot: std::env::home_dir().unwrap().join("boop")
[08:12:06] -playbot- "/home/rust/boop"
[08:12:14] <woof> Oh, thanks
[08:12:29] <Yurume> note that,
[08:12:33] <Yurume> playbot: std::env::home_dir().unwrap().join("boop/gaah")
[08:12:35] -playbot- "/home/rust/boop/gaah"
[08:12:45] <Yurume> playbot: std::env::home_dir().unwrap().join("/boop/gaah")
[08:12:46] -playbot- "/boop/gaah"
[08:12:50] <Yurume> and so on.
[08:12:56] <woboats> it seems to me that these implementations should not conflict http://is.gd/n2MKNU
[08:13:32] <Yurume> woboats: what if there is a type T which implements both?
[08:14:06] *** Quits: kamilc__ (kamil@moz-u843uu.play-internet.pl) (Quit: Leaving...)
[08:14:15] *** Joins: loyd (loyd@moz-uft.32f.108.213.IP)
[08:14:20] <Franciman> gotta go now. Bye and thanks again!
[08:14:22] *** Joins: weirdo (Mibbit@moz-av4.5dc.15.122.IP)
[08:14:24] *** Quits: Franciman (francesco@moz-9kg8jb.retail.telecomitalia.it) (Quit: Sto andando via)
[08:14:39] <woboats> because you could impl Foo<Bar> and Foo<Baz> for both of them
[08:14:53] <woboats> *for a single type
[08:14:56] <Sgeo> Why does the associated type version conflict? http://is.gd/9Y3YZK
[08:15:33] <weirdo> Hi there, Any one know is there a block reading method for a TcpStream?
[08:15:42] *** Joins: djcb (user@moz-nqdj21.elisa-laajakaista.fi)
[08:15:47] <woboats> I just cannot find a way to express this in Rust's type system
[08:16:16] <Yurume> Sgeo: hmm! it does seem strange in that case.
[08:16:35] <Yurume> at least, however, non-associative-type version should be invalid.
[08:17:02] <huon> woboats: the fact that you *can* implement Foo<Bar> and Foo<Baz> for a single type is exactly why they conflict
[08:17:02] *** Quits: errordeveloper (ilya@moz-649.f7i.219.2.IP) (Ping timeout: 121 seconds)
[08:17:11] *** Quits: erz (erz@moz-45hupr.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzz…)
[08:17:17] <woboats> Yes, I see that now.
[08:17:42] *** Joins: mindcat (mindcat@moz-0h1.tnp.13.183.IP)
[08:17:43] <huon> Sgeo: https://github.com/rust-lang/rust/issues/20400
[08:17:50] *** Joins: ptalbot (ptalbot@moz-1gn7gb.eu0n.jcdj.0660.2001.IP)
[08:18:54] <woboats> huon, more generally, I cannot find a way to express that these two concepts cannot both be embodied in the same entity (in whatever form I try to express this idea).
[08:19:19] <Sgeo> huon, 
[08:19:20] <Sgeo> ty
[08:19:35] <huon> woboats: I believe it may not be possible, other than via #20400 ^
[08:19:36] *** Quits: skade (skade@moz-4eh.d50.201.212.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:19:43] <woboats> :(
[08:20:28] *** Joins: moa (Cedric@moz-ltq9j8.rev.numericable.fr)
[08:20:55] <mindcat> rusti: trait A { const FOO: u8 } struct B<T> (T) impl <T> A for B { const FOO: u8 = 63 } let c = B ("Hello World!"); c.FOO
[08:20:56] -playbot- <anon>:9:19: 9:24 error: expected one of `extern`, `fn`, `type`, or `unsafe`, found `const`
[08:20:56] -playbot- <anon>:9         trait A { const FOO: u8 } struct B<T> (T) impl <T> A for B { const FOO: u8 = 63 } let c = B ("Hello World!"); c.FOO
[08:20:56] -playbot- output truncated; full output at: http://bit.ly/1H0lwfJ
[08:21:01] <mindcat> rusti: trait A { const FOO: u8 } struct B<T> (T) impl <T> A for B { const FOO: u8 = 63 } let c = B ("Hello World!"); c.FOO
[08:21:02] -playbot- <anon>:9:19: 9:24 error: expected one of `extern`, `fn`, `type`, or `unsafe`, found `const`
[08:21:02] -playbot- <anon>:9         trait A { const FOO: u8 } struct B<T> (T) impl <T> A for B { const FOO: u8 = 63 } let c = B ("Hello World!"); c.FOO
[08:21:02] -playbot- output truncated; full output at: http://bit.ly/1H0lwfJ
[08:21:06] <mindcat> huh
[08:21:22] *** Joins: Rym_ (y@moz-a44.2as.55.31.IP)
[08:21:40] <kimundi> mindcat: the nightly migzt not be updated yet
[08:21:47] <kimundi> playbot: VERSION
[08:21:48] -playbot- "rustc 1.0.0-beta.3 (5241bf9c3 2015-04-25) (built 2015-04-25)"
[08:21:58] <kimundi> scratch that, thjis is beta
[08:22:18] <mindcat> rusti: trait A { fn foo() -> u8 } struct B<T> (T) impl <T> A for B { fn foo() -> u8 {63} } let c = B ("Hello World!"); c.foo()
[08:22:18] -playbot- <anon>:9:34: 9:35 error: expected `;` or `{`, found `}`
[08:22:19] -playbot- <anon>:9         trait A { fn foo() -> u8 } struct B<T> (T) impl <T> A for B { fn foo() -> u8 {63} } let c = B ("Hello World!"); c.foo()
[08:22:19] -playbot- output truncated; full output at: http://bit.ly/1H0lB2Y
[08:22:22] <kimundi> so it won't even land in it yet
[08:22:32] <mindcat> rusti: trait A { fn foo() -> u8; } struct B<T> (T) impl <T> A for B { fn foo() -> u8 {63} } let c = B ("Hello World!"); c.foo()
[08:22:32] -playbot- <anon>:9:53: 9:57 error: expected one of `;` or `where`, found `impl`
[08:22:33] -playbot- <anon>:9         trait A { fn foo() -> u8; } struct B<T> (T) impl <T> A for B { fn foo() -> u8 {63} } let c = B ("Hello World!"); c.foo()
[08:22:33] -playbot- output truncated; full output at: http://bit.ly/1bxjyVT
[08:22:37] <mindcat> :S
[08:23:08] *** Quits: woof (corgi@moz-h8e.se4.242.193.IP) (Quit: Leaving)
[08:23:14] <kimundi> rusti: trait A { fn foo() -> u8; } struct B<T> (T); impl <T> A for B { fn foo() -> u8 {63} } let c = B ("Hello World!"); c.foo()
[08:23:15] -playbot- <anon>:9:69: 9:70 error: wrong number of type arguments: expected 1, found 0 [E0243]
[08:23:15] -playbot- <anon>:9         trait A { fn foo() -> u8; } struct B<T> (T); impl <T> A for B { fn foo() -> u8 {63} } let c = B ("Hello World!"); c.foo()
[08:23:15] -playbot- output truncated; full output at: http://bit.ly/1H0lHHR
[08:24:24] <mindcat> rusti: trait A { fn foo() -> u8; } struct B<T> (T); impl <T> A for B<T> { fn foo() -> u8 {63} } let c = B ("Hello World!"); <c as A>::foo()
[08:24:24] -playbot- <anon>:9:127: 9:128 error: use of undeclared type name `c`
[08:24:25] -playbot- <anon>:9         trait A { fn foo() -> u8; } struct B<T> (T); impl <T> A for B<T> { fn foo() -> u8 {63} } let c = B ("Hello World!"); <c as A>::foo()
[08:24:25] -playbot- output truncated; full output at: http://bit.ly/1bxjN3f
[08:25:03] <huon> please private message playbot until it works (or demonstrates what you want)
[08:25:32] *** Joins: skade (skade@moz-4eh.d50.201.212.IP)
[08:25:33] <mindcat> when I don't know variable `c` type what is, how to call `A::foo()`?
[08:25:58] *** Quits: Rym_ (y@moz-a44.2as.55.31.IP) (Ping timeout: 121 seconds)
[08:26:15] <huon> you can't
[08:26:36] <mindcat> huh, "I can't" :S
[08:27:00] <huon> you need to know what type c is to be able to call a static method like `foo`
[08:27:33] <huon> we may have, say, `<typeof(c) as A>::foo()` in future, but we don't have it now
[08:27:43] *** Joins: Ms2ger (Ms2ger@moz-t9m.9ho.190.193.IP)
[08:28:13] *** Joins: sonder (chatzilla@moz-nt8r49.idi.ntnu.no)
[08:28:16] <mindcat> rusti: trait A { fn foo(&self) -> u8; } struct B<T> (T); impl <T> A for B<T> { fn foo(&self) -> u8 {63} } let c = B ("Hello World!"); c.foo()
[08:28:17] -playbot- 63
[08:28:18] *** Joins: ismaelga (ismaelga@moz-op208d.rev.vodafone.pt)
[08:28:21] *** Joins: Nextra (Nextra@moz-h9ccn5.osnanet.de)
[08:28:32] <mindcat> so that is why I have to do like that
[08:29:04] <aji> is there a way with a Vec to assign a value at a position while moving the old value out?
[08:29:05] *** Quits: fengshaun (fengshaun@moz-rf0qk5.cable.teksavvy.com) (Ping timeout: 121 seconds)
[08:29:29] <weirdo> Anyone knwo where i can find block reading method for a TcpStream?  repeat
[08:29:31] *** Quits: fmtq (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[08:29:37] *** Joins: gonzaloserrano (Adium@moz-1nv.3t7.97.62.IP)
[08:29:39] <mindcat> but I want the value are static :S
[08:29:42] <huon> aji: std::mem::replace(&mut your_vec[index], new_element)
[08:29:59] <huon> weirdo: what do you mean by a block reading method?
[08:30:18] <weirdo> just read block if no data
[08:30:20] <frankmcsherry> weirdo: you can probably wrap it in a BufReader, but I'm not sure it does anything particularly clever (e.g. iocp)
[08:30:32] <huon> weirdo: as in, wait until data appears?
[08:30:38] <weirdo> yes
[08:30:45] <huon> I think .read does that already?
[08:30:54] *** Joins: nico (nico@moz-dalf30.dip0.t-ipconnect.de)
[08:31:01] <aatch> TcpStream is blocking by default
[08:31:07] <aji> huon: ah, awesome, thanks
[08:31:09] *** darkowlzz is now known as darkowlzz|afk
[08:31:16] *** Joins: zmack (zmack@moz-1oe.89t.76.82.IP)
[08:32:06] *** Joins: fmtq (fmtq@moz-d08itp.tpgi.com.au)
[08:32:06] <weirdo> stream.read_to_string(&mut data).unwrap() this function return 0 length and not blocked
[08:32:20] *** Quits: ismaelga (ismaelga@moz-op208d.rev.vodafone.pt) (Ping timeout: 121 seconds)
[08:32:39] *** Quits: tunnuz (tunnuz@moz-meb4uj.net) (Connection closed)
[08:33:53] <frankmcsherry> weirdo: docs say it reads all bytes (until EOF). are you closing the stream?
[08:34:06] *** Joins: MaxV (MaxV@moz-1nu.kln.167.83.IP)
[08:34:35] <faern> aji: You could also do push() followed by swap_remove() on the vec
[08:35:15] <aji> faern: that's possible too
[08:35:19] <aji> i do like knowing about replace though :o
[08:35:34] <huon> replace is amazing
[08:35:35] <mindcat> huon: wait, actually we can do it, use compiler plugin. `<typeof!(c) as A>::foo()`
[08:36:09] <huon> mindcat: doesn't work for two reasons: a macro can't be used as a type, and macros (even plugins) don't have access to type information
[08:36:11] *** Joins: oceanwhit (christianwh@moz-a38b1m.ca.comcast.net)
[08:36:44] <mindcat> huon: then what....
[08:37:36] <weirdo> \frankmcsherry i will check it out, thanks!
[08:37:57] <mindcat> great, rust compiler doesn't have powerful plugin system
[08:38:32] *** Quits: dstrbad (dstrbad@moz-ucs9if.net.t-com.hr) (A TLS packet with unexpected length was received.)
[08:38:46] *** Joins: erikj (erikj@moz-1bq7nj.com)
[08:39:42] <faern> I'm unsure about lifetimes together with generics and function pointers. I would be very happy if someone could have a look at http://is.gd/2YyWJ7 and help me out.
[08:40:06] *** Joins: dstrbad (dstrbad@moz-ucs9if.net.t-com.hr)
[08:40:12] <aatch> mindcat, how do you *not* know the type of the variable though?
[08:40:13] *** Quits: Slava_I (slava@moz-a7c.n0g.135.88.IP) (Connection closed)
[08:40:18] *** Quits: oceanwhit (christianwh@moz-a38b1m.ca.comcast.net) (Ping timeout: 121 seconds)
[08:40:53] <mindcat> aatch: be lazy :D
[08:40:55] <aatch> The only time you actually *need* typeof is when the type isn't able to be written down.
[08:41:11] <aatch> Which in rust is only applies to closures.
[08:42:28] <mindcat> rusti: trait A { fn foo() -> u8; } struct B<T> (T); impl <T> A for B<T> { fn foo() -> u8 {63} } let c = B ("Hello World!"); <B as A>::foo()
[08:42:29] -playbot- <anon>:9:127: 9:128 error: wrong number of type arguments: expected 1, found 0 [E0243]
[08:42:29] -playbot- <anon>:9         trait A { fn foo() -> u8; } struct B<T> (T); impl <T> A for B<T> { fn foo() -> u8 {63} } let c = B ("Hello World!"); <B as A>::foo()
[08:42:29] -playbot- output truncated; full output at: http://bit.ly/1H0nQU2
[08:42:57] * mindcat go to play.rust-lang.org
[08:43:12] *** Quits: Zr40 (zr40@moz-92llkv.adsl.xs4all.nl) (Quit: .)
[08:43:25] *** Joins: mkpankov` (mkpankov@moz-c6j.70f.16.195.IP)
[08:43:28] *** Joins: forgottenone (forgottenon@moz-boq.di6.232.176.IP)
[08:43:34] *** [dmp] is now known as dennis
[08:43:37] *** Quits: stl (stl@moz-r3l6lh.broadband.corbina.ru) (Ping timeout: 121 seconds)
[08:44:15] *** Joins: lenstr (lenstr@moz-ca8.vju.25.171.IP)
[08:44:46] <bstrie> faern: when a lifetime is declared on a struct, all references stored in the struct must outlive that lifetime
[08:44:51] *** Quits: lenstr (lenstr@moz-ca8.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[08:45:02] *** Joins: lenstr (lenstr@moz-ca8.vju.25.171.IP)
[08:45:33] <bstrie> faern: lifetimes get erased during the compilation phase, so I don't think they have any effect on fun
[08:45:40] *** dennis is now known as [dmp]
[08:45:46] *** Joins: Slava_I (slava@moz-a7c.n0g.135.88.IP)
[08:46:01] *** Quits: lenstr (lenstr@moz-ca8.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[08:46:25] *** Joins: Rym_ (y@moz-a44.2as.55.31.IP)
[08:46:29] <faern> bstrie: Ok, yes it was the funs I was wondering most about. They should be 'static so. Thanks for the input.
[08:46:45] <aji> yes, all the rust fun happens at compile time
[08:47:07] *** Quits: mkpankov (mkpankov@moz-4o9.n6u.23.84.IP) (Ping timeout: 121 seconds)
[08:47:33] *** Quits: dstrbad (dstrbad@moz-ucs9if.net.t-com.hr) (A TLS packet with unexpected length was received.)
[08:49:38] *** Joins: kngl (Adium@moz-m3a3bq.ipv4.evonet.be)
[08:50:17] <aji> the "collapse all docs" button doesn't seem to work for  me
[08:50:55] <bluss> aji: that's right, it's a bug
[08:51:02] <aji> alright
[08:51:07] <bluss> a fix is in progress I think
[08:52:22] *** Quits: MaxV (MaxV@moz-1nu.kln.167.83.IP) (Quit: Leaving...)
[08:53:19] <frankmcsherry> stupid names... I am trying to figure out how to use Rust and Instruments (on OSX), and all I can find are products to clean scalpels...
[08:53:33] *** Joins: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net)
[08:53:36] *** Joins: wei2912 (wei2912@moz-d1r.aac.156.175.IP)
[08:54:59] *** Quits: andresv (textual@moz-m48tte.sta.estpak.ee) (Quit: My Mac has gone to sleep. ZZZzzz…)
[08:55:25] *** Quits: rootnode (rootnode@moz-go1ut4.ip1.george24.com) (Ping timeout: 121 seconds)
[08:55:36] *** Joins: stl (stl@moz-fg4.kee.15.176.IP)
[08:56:38] <frankmcsherry> is there a breakdown on who uses which platform with Rust? I feel like I'd like an OSX support group...
[08:56:52] <frankmcsherry> like, emotional support, maybe some technical too.
[08:57:15] <aji> i got rustc to hang when trying to do church numerals
[08:57:34] <aji> doubt this is very severe but here's the code anyway http://is.gd/OKpzcS
[08:57:48] *** Joins: tcard (tcard@moz-5eb1g3.staticIP.rima-tde.net)
[08:59:00] <frankmcsherry> aji: it errors for me?
[08:59:35] *** Quits: kvsari (kvsari@moz-fgsnv9.bbtec.net) (Connection closed)
[08:59:40] *** Joins: mkpankov (user@moz-nleeis.partnertech.ru)
[09:00:06] *** Quits: mkpankov` (mkpankov@moz-c6j.70f.16.195.IP) (Quit: Bye)
[09:00:11] <frankmcsherry> aji: I see, not intended to be run. Are you sure it hung? Apparently nested closures are just exponentially something bad.
[09:00:38] <aji> well play.rust-lang.org timed out
[09:00:50] <aji> you're right though it does eventually terminate on my local machine
[09:00:58] *** Joins: laumann (thomas@moz-3v9.hq0.225.130.IP)
[09:01:09] <aji> false alarm
[09:01:33] *** Quits: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se) (Quit: bajs)
[09:02:01] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[09:02:05] *** Joins: dzhulk (Adium@moz-lra.hki.140.95.IP)
[09:02:21] *** Joins: marc_ (uid5324@moz-t3einu.ealing.irccloud.com)
[09:03:25] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[09:03:38] <frankmcsherry> aji: yeah, someone had the excellent program: |||||||||||||||||||||||||x| {}
[09:03:52] <frankmcsherry> aji: takes a while to optimize, apparently.
[09:04:08] <aji> lol
[09:04:50] *** darkowlzz|afk is now known as darkowlzz
[09:05:59] *** Quits: munksgaard (munksgaard@moz-1i4.hq0.225.130.IP) (Ping timeout: 121 seconds)
[09:06:16] *** Joins: lenstr (lenstr@moz-ca8.vju.25.171.IP)
[09:06:28] *** Quits: laumann (thomas@moz-3v9.hq0.225.130.IP) (Ping timeout: 121 seconds)
[09:06:37] <WindowsBunny> frankmcsherry: the breakdown is me using windows and everyone else not using windows
[09:07:04] <frankmcsherry> WindowsBunny: :)
[09:07:11] <frankmcsherry> WindowsBunny: how do you do profiling, then? :)
[09:07:27] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Ping timeout: 121 seconds)
[09:07:28] <WindowsBunny> frankmcsherry: I don't do profiling
[09:07:55] *** Joins: espadrine (tyl@moz-qfr4fg.abo.wanadoo.fr)
[09:08:01] *** Joins: munksgaard (munksgaard@moz-1i4.hq0.225.130.IP)
[09:08:17] <aatch> WindowsBunny, is the hero we didn't ask for and won't take the hint.
[09:08:25] * aatch kids, WindowsBunny is the best
[09:08:27] <WindowsBunny> That said, as soon as Visual Studio + Rust works together better, either via profiling of stuff with dwarf debug info, or via rust getting pdb debug info, then I'll be able to do profiling
[09:08:36] <Ms2ger> WindowsBunny, we still like you :)
[09:09:01] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[09:09:27] <frankmcsherry> WindowsBunny: I came from VS land, and am now hopelessly incompetent wrt all these unix-y tools. =/
[09:09:44] *** Quits: nham (nham@moz-755.bu3.214.98.IP) (Quit: Lost terminal)
[09:09:48] <WindowsBunny> frankmcsherry: Don't worry, that's how I feel every time I have to pull out gdb to get a stacktrace :D
[09:10:09] <frankmcsherry> WindowsBunny: I still haven't used gdb. Pretty nice statement about the language.
[09:10:27] <aatch> If I get bored and have some free time I might raid that clang windows compiler wrapper thing for stuff rustc can use.
[09:10:30] <frankmcsherry> WindowsBunny: I've written a distributed low-latency data-parallel dataflow engine, and don't know how to use a debugger.
[09:10:32] <WindowsBunny> Unfortunately on Windows, when your program panicks, it doesn't emit an actual backtrace
[09:10:38] <WindowsBunny> just a bunch of main main main main main main
[09:11:11] <WindowsBunny> So I have to pull out gdb to break on panicks and get a backtrace, but thats it
[09:11:55] *** Quits: dalarmmst (dalarmmst@moz-mb21j4.bredband.comhem.se) (Ping timeout: 121 seconds)
[09:12:15] *** Quits: munksgaard (munksgaard@moz-1i4.hq0.225.130.IP) (Ping timeout: 121 seconds)
[09:12:34] *** Joins: jviereck (Adium@moz-a4jkal.ethz.ch)
[09:13:30] *** Joins: laumann (thomas@moz-3v9.hq0.225.130.IP)
[09:13:32] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Ping timeout: 121 seconds)
[09:13:34] <WindowsBunny> aatch: compiling the C/C++ bits of rust with clang-cl?
[09:13:36] *** Quits: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[09:13:38] *** Joins: playjax (chatzilla@moz-65af5t.optusnet.com.au)
[09:14:06] *** darkowlzz is now known as darkowlzz|afk
[09:14:17] *** Joins: munksgaard (munksgaard@moz-1i4.hq0.225.130.IP)
[09:14:24] *** Quits: Anupkumar (uid16774@moz-cf8smb.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[09:14:32] *** Joins: CustosLimen (CustosLimen@moz-43o.etd.160.41.IP)
[09:15:57] <aatch> WindowsBunny, no, more seeing what it does to work on windows and seeing what rustc can do on that front too. I know pretty much nothing about it though.
[09:16:41] <WindowsBunny> aatch: Really clang-cl is mostly just matching the msvc C++ ABI and the command line parameter style
[09:17:01] <ehiggs> I held a technical session on monday and had some windows users. does Windows have a built in ssh client yet or do you still need putty?
[09:17:09] *** Joins: asQuirreL (asQuirreL@moz-ro1qqu.ox.ac.uk)
[09:17:09] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[09:17:10] *** Joins: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net)
[09:17:15] *** Quits: dawehner (quassel@moz-nfa3eq.eap.uni-tuebingen.de) (Ping timeout: 121 seconds)
[09:17:40] <WindowsBunny> aatch: However, what we can borrow from clang-cl is debug info and unwinding. In order to support the msvc toolchain those two things need to be figured out
[09:18:00] <aatch> WindowsBunny, yeah, that's more the stuff I was thinking of.
[09:18:27] <woboats> http://is.gd/Povk4h <- The first error seems like an austere restriction against orphan impls, but the second error seems like a bug.
[09:18:28] *** Joins: akiss (akiss@moz-43lncs.uio.no)
[09:18:46] *** Quits: BageDev (BageDevimo@moz-og7.cn8.251.116.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[09:19:18] <woboats> Oh nvm, I didn't realize string was in collections.
[09:19:21] <WindowsBunny> aatch: right now we use libgcc for unwinding, so that has to be switched to pure llvm/win32 funtimes, and also emitting codeview debug info the way clang-cl does so that link.exe can create a PDB for us
[09:19:21] <aatch> WindowsBunny, clang tends to farm as much as it can out to LLVM on that kind of stuff (which isn't a bad thing), so we might be able to use it.
[09:19:42] <WindowsBunny> aatch: ricky26 was working on an msvc branch, you should look at it and see if you can continue
[09:20:07] <WindowsBunny> aatch: https://github.com/rust-lang/rust/compare/master...ricky26:msvc
[09:21:27] *** Joins: c63 (Mibbit@moz-skp.pco.222.149.IP)
[09:21:40] <c63> Quick question, what happened to AdditiveIterator?
[09:23:05] <bluss> implementation of sum changed
[09:23:18] <bluss> it's on the iterator trait now
[09:24:33] *** Joins: graphman (Mibbit@moz-tpq8kl.insa-toulouse.fr)
[09:24:44] *** Joins: erz (erz@moz-8v4.af0.232.213.IP)
[09:25:08] <WindowsBunny> Yeah, since people discovered they can put bounds on individual methods of a trait, Iterator got some large improvements
[09:25:39] <bluss> hehe the discovery might have been linked to its implementation
[09:25:51] <bluss> but yeah traits are much nicer like this
[09:25:58] <bluss> albeit more confusing
[09:26:58] <c63> I agree
[09:27:26] <c63> What about FromError?
[09:27:27] *** Quits: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net) (Quit: Konversation terminated!)
[09:27:40] <bluss> uses the From<> trait now
[09:27:42] *** Joins: glennpratt (glennpratt@moz-neq2gf.dsl-w.verizon.net)
[09:28:07] <faern> How can I create a struct that can contain items with references _shorter_ than the structs lifetime? I express the problem in a simple queue implementation here: http://is.gd/gYZpDD
[09:28:31] <c63> bluss: thanks
[09:28:57] <faern> I'm simply doing something stupid. But I must be able to create a queue contanining items that go out of scope before the queue
[09:29:37] *** Joins: ismaelga (ismaelga@moz-op208d.rev.vodafone.pt)
[09:30:19] *** Joins: gratsukoo (Mibbit@moz-3sup0s.insa-toulouse.fr)
[09:30:58] *** Quits: gratsukoo (Mibbit@moz-3sup0s.insa-toulouse.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[09:31:45] *** Quits: glennpratt (glennpratt@moz-neq2gf.dsl-w.verizon.net) (Ping timeout: 121 seconds)
[09:32:00] *** Quits: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[09:33:10] *** Joins: kamilc__ (kamil@moz-u843uu.play-internet.pl)
[09:33:44] *** Quits: graphman (Mibbit@moz-tpq8kl.insa-toulouse.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[09:33:47] *** kimundi is now known as zz_kimundi
[09:34:40] *** Quits: ismaelga (ismaelga@moz-op208d.rev.vodafone.pt) (Ping timeout: 121 seconds)
[09:35:54] <c63> What about NumCast?
[09:36:16] <reem> faern: You can’t have that, since you could then hold the queue for longer than the data contained in it is valid, thus allowing access to that data after is has gone out of scope.
[09:36:35] *** Quits: cptroot (Mibbit@moz-n169l8.caltech.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[09:36:43] *** Quits: _ixti_ (ixti@moz-i3d.dae.119.188.IP) (Ping timeout: 121 seconds)
[09:36:47] <reem> in fact in &’a T, T must always be valid for at least ‘a
[09:37:02] *** Joins: oceanwhit (christianwh@moz-a38b1m.ca.comcast.net)
[09:37:12] *** Quits: fleabay (Mibbit@moz-fdcruo.ip.windstream.net) (Quit: http://www.mibbit.com ajax IRC Client)
[09:37:28] <bluss> c63: moved to num crate on crates.io
[09:37:58] <faern> reem: Hmm.. I kind of know that. But my original problem is I have a threadpool living for a long time. To this I submit tasks to be executed. The tasks can contain references. With the lifetime annotation like in the queue I posted the tasks must outlive the entire forkpool. That is kind of useless.
[09:38:06] *** Quits: erz (erz@moz-8v4.af0.232.213.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[09:38:51] <reem> frankmcsherry: Right now you cannot do that. You have to use, for instance, ScopedThreadPool from the threadpool crate, but that uses the unstable thread::scoped API (the API which allows you to safely send references across threads).
[09:38:54] *** Quits: mindcat (mindcat@moz-0h1.tnp.13.183.IP) (Connection closed)
[09:39:07] <faern> reem: I didn't mean "I know that" as in you gave bad advice.
[09:39:16] <reem> in #[stable] rust you can only pass Send + ‘static data across threads
[09:39:23] <reem> ah ok :)
[09:39:47] *** Joins: eligreen_ (eli@moz-l60e55.dynamic.jazztel.es)
[09:39:51] *** Quits: eligreen_ (eli@moz-l60e55.dynamic.jazztel.es) (Client exited)
[09:40:01] <frankmcsherry> reem: wut?
[09:40:10] *** Quits: skade (skade@moz-4eh.d50.201.212.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[09:40:12] <frankmcsherry> reem: I can do *anything*.
[09:40:45] <nathan7> frankmcsherry: stable, safe Rust
[09:40:47] <reem> :P
[09:41:00] *** Joins: c0170 (c0170@moz-bb29a4.cambridge.arm.com)
[09:41:09] *** Quits: oceanwhit (christianwh@moz-a38b1m.ca.comcast.net) (Ping timeout: 121 seconds)
[09:42:35] <ehiggs> frankmcsherry: what is differential dataflow?
[09:42:45] <frankmcsherry> ehiggs: its *amazing*
[09:42:49] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[09:42:56] <frankmcsherry> ehiggs: lemme see if I can find a link.
[09:43:00] <ehiggs> i found this; http://research.microsoft.com/apps/pubs/default.aspx?id=176693
[09:43:10] <frankmcsherry> well, probably that, then. :)
[09:43:43] <frankmcsherry> right now: maintaining a connected components computation over a sliding window of 40M graph edges with 500us update latency.
[09:44:10] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[09:44:15] <frankmcsherry> ehiggs: I'm going to attempt a blog post at some point soon, but explaining it is really hard.
[09:44:40] <frankmcsherry> it is a bit easier if you know about Moebius inversion, but ... yeah, not widely taught. =/
[09:45:16] <c63> Why doesn't num re-export `cast`? Seems odd
[09:45:33] *** Quits: jviereck (Adium@moz-a4jkal.ethz.ch) (Quit: Leaving.)
[09:46:26] *** Joins: dawehner (quassel@moz-ipohd2.hsi7.kabel-badenwuerttemberg.de)
[09:46:35] <frankmcsherry> ehiggs: short version: incrementalized data-parallel compute (like streaming map-reduce) except it works within loops too. so you can re-use compute from previous iterative computations to quickly update in response to changed inputs.
[09:46:59] *** Quits: kushal (kdas@moz-ae6469.202.sitibroadband.in) (Ping timeout: 121 seconds)
[09:47:03] *** Joins: skade (skade@moz-4eh.d50.201.212.IP)
[09:47:15] <faern> reem: I see now that ScopedPool has the same restriction as my Queue. Do I have to use unsafe to avoid that requirement?
[09:47:44] *** Quits: dmac (dmac@moz-2ig65r.ca.comcast.net) (Connection closed)
[09:47:59] <reem> faern: That restriction is universal, it’s part of the language. ScopedPool just lets you share non-‘static data. You have to use unsafe to circumvent it, since you can easily cause memory unsafety.
[09:48:04] <ehiggs> frankmcsherry: ok, sounds like something we implemented at my previous place.
[09:48:53] <frankmcsherry> ehiggs: keep reading, then. :)
[09:49:29] *** Quits: xrl (uid1091@moz-f0543s.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[09:49:57] *** Quits: aravindavk (aravinda@moz-r02.a0j.200.117.IP) (Ping timeout: 121 seconds)
[09:52:17] *** Joins: aravindavk (aravinda@moz-8qa.gfm.222.117.IP)
[09:52:28] *** Quits: aravindavk (aravinda@moz-8qa.gfm.222.117.IP) (Quit: Konversation terminated!)
[09:52:55] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[09:54:32] *** Joins: _ixti_ (ixti@moz-i3d.dae.119.188.IP)
[09:56:07] <faern> reem: Ok. Thank you, even if it means my current code is very wrong I finally understand lifetimes and I finally understand why stuff does not work as I want to. :D
[09:56:24] *** Joins: shellac (pldms@moz-c7026f.bris.ac.uk)
[09:56:49] <Ms2ger> faern, \o/
[09:56:59] *** Quits: yeahnoob (Xanadu@moz-ku8.ugi.122.118.IP) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[09:57:20] <reem> Great success!
[09:57:55] *** Quits: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[09:58:10] <frankmcsherry> ehiggs: http://www.frankmcsherry.org/differential/dataflow/2015/04/07/differential.html also talks about it, though ... not my best work.
[09:59:29] *** Joins: timonv1 (timonv@moz-7btgcn.dynamic.ziggo.nl)
[09:59:32] *** Quits: genbattle (genbattle@moz-ikj3l8.xtra.co.nz) (Ping timeout: 121 seconds)
[09:59:34] *** Quits: _ixti_ (ixti@moz-i3d.dae.119.188.IP) (Ping timeout: 121 seconds)
[10:00:21] *** Quits: skade (skade@moz-4eh.d50.201.212.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[10:02:09] *** Joins: c0170_ (c0170@moz-bb29a4.cambridge.arm.com)
[10:02:59] *** Quits: matematikaadit (matematikaa@moz-des.b41.67.202.IP) (Quit: Leaving)
[10:03:12] *** Quits: c0170 (c0170@moz-bb29a4.cambridge.arm.com) (Ping timeout: 121 seconds)
[10:03:19] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[10:03:24] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[10:03:42] *** Joins: aravindavk (aravinda@moz-8qa.gfm.222.117.IP)
[10:03:51] *** zz_kimundi is now known as kimundi
[10:04:10] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[10:05:43] *** Joins: vidot_j_ (vidot_j@moz-2q9eng.abo.wanadoo.fr)
[10:05:49] *** Joins: filsmick (filsmick@moz-tj8j41.abo.wanadoo.fr)
[10:06:07] <filsmick> can you help me understand what the difference between Fn, FnOnce and FnMut is?
[10:06:21] <filsmick> what is FnMut used for?
[10:06:31] <kimundi> filsmick: The difference is in how the closure is allowed to access the environment
[10:06:56] <bluss> filsmick: I'd say FnMut is the most common closure trait to use
[10:06:57] <filsmick> kimundi: oh - Fn gets &, FnOnce moves, and FnMut gets &mut?
[10:07:00] <kimundi> Fn gives access as &Self, FnMut gives access as &mut Self, and FnOnce gives access as Self
[10:07:04] <kimundi> yep
[10:07:13] <filsmick> it's that simple? Great to know, thanks!
[10:07:16] <c63> deriving Copy requires clone?
[10:07:19] <bluss> filsmick: does this explain? http://doc.rust-lang.org/reference.html#closure-types
[10:07:34] <bluss> kimundi's explanation is maybe simpler
[10:07:34] <filsmick> bluss: yes it does
[10:07:51] <filsmick> if I use Fn, I can pass a closure or a function?
[10:07:58] <kimundi> c63: Yes, as Copy is now considered a special case of Clone, and anything that is Clone and Copy should have a Clone impl that just invokes a Copy copy.
[10:08:08] <filsmick> is there a type for functions, but not for closures?
[10:08:12] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Ping timeout: 121 seconds)
[10:08:13] *** AutomatedTester|AFK is now known as AutomatedTester
[10:08:14] <kimundi> yes
[10:08:27] <c63> hm, is it possible to derive Clone?
[10:08:28] <kimundi> fn(i32, String) -> u8 for example
[10:08:31] <bluss> functions implement all three closure traits I think
[10:08:33] <bluss> they should
[10:08:39] <kimundi> c63: yes
[10:09:25] *** Joins: skade (skade@moz-uhpucc.web.vodafone.de)
[10:11:08] <sonder>  /join #cargo
[10:11:38] *** Joins: k1000 (k1000@moz-bodlln.ip-198-50-149.net)
[10:11:44] <c63> Is it now impossible to store a Path in a struct field?
[10:12:09] <bluss> c63: not really but it's important to know that there is both PathBuf and Path
[10:12:14] <bluss> and they are like String and &str
[10:12:31] *** Quits: zyga (zyga@moz-84t.g3u.7.89.IP) (Ping timeout: 121 seconds)
[10:12:59] *** Joins: andresv (textual@moz-m48tte.sta.estpak.ee)
[10:13:10] <nathan7> well, like String and str
[10:13:21] <frankmcsherry> anyone know if this sort of this is on the roadmap to be fixed: http://is.gd/Lw1ce7 or fundamental issue that isn't worth it?
[10:13:24] <nathan7> Path is unsized
[10:14:16] <nathan7> frankmcsherry: that looks like a bug
[10:14:23] <nathan7> frankmcsherry: for<'r, 'r> should never occur
[10:15:14] <frankmcsherry> nathan7: it bites me every few days. there is an issue on github, but .. never sure if anyone reads those.
[10:15:31] <frankmcsherry> nathan7: I recently got a follow-up about one from three months back.
[10:15:56] <nathan7> how many open issues do we even have
[10:16:02] <frankmcsherry> 2k
[10:16:22] <nathan7> wunderbar
[10:16:34] *** Quits: khades (Thunderbird@moz-ual.b31.186.31.IP) (Ping timeout: 121 seconds)
[10:16:43] <kimundi> frankmcsherry: Afaik its a known, non-trivially-fixable but not-inherently-impossible-to-fix kind of issue :P
[10:16:49] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[10:17:49] *** Quits: aravindavk (aravinda@moz-8qa.gfm.222.117.IP) (Ping timeout: 121 seconds)
[10:18:09] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[10:18:42] *** Quits: Dylan16807 (dylan@moz-62uibl.cntmoh.sbcglobal.net) (Ping timeout: 121 seconds)
[10:19:58] *** Joins: Altazimuth (Altazimuth@moz-rb7u6p.skybroadband.com)
[10:20:24] *** Quits: yuja (yuja@moz-07pdo8.pikara.ne.jp) (Ping timeout: 121 seconds)
[10:20:33] <filsmick> rustbot: |_, _, _|
[10:20:41] *** Quits: lenstr (lenstr@moz-ca8.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[10:20:46] *** Joins: Dylan16807 (dylan@moz-62uibl.cntmoh.sbcglobal.net)
[10:20:50] <frankmcsherry> nathan7: I think all HRL lifetime parameters are 'r. Like, you get for<'r, 'r, 'r> for one with three HRLs.
[10:21:08] <frankmcsherry> nathan7: not that they are the same, but that the printing is ...
[10:21:58] <aji> this is ICEing, dunno if it's already been reported: http://is.gd/lIWcxz
[10:22:17] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[10:23:02] <mkpankov> playbot: |_, _, _|
[10:23:02] -playbot- <anon>:10:5: 10:6 error: unexpected token: `}`
[10:23:03] -playbot- <anon>:10     });
[10:23:03] -playbot- output truncated; full output at: http://bit.ly/1FPboVG
[10:23:13] *** Joins: aravindavk (aravinda@moz-08t.qbc.238.117.IP)
[10:23:15] <mkpankov> lol wtf
[10:23:26] <Ms2ger> aji, file an issue, please
[10:23:31] *** Joins: lenstr (lenstr@moz-ca8.vju.25.171.IP)
[10:23:46] <Ms2ger> aji, in the meantime, remove the as Rc<..> cast
[10:24:03] <aji> Ms2ger: yeah, removing the cast works as expected, but i don't like reporting things that have already been reported
[10:24:54] *** Joins: frankmcs_ (frankmcsher@moz-jna.j5l.19.178.IP)
[10:25:53] *** Joins: Hannibal_Smith (nico@moz-l9aupr.retail.telecomitalia.it)
[10:25:53] *** Quits: skade (skade@moz-uhpucc.web.vodafone.de) (Connection closed)
[10:25:54] *** Joins: pnkfelix (pnkfelix@moz-71m.3nd.202.89.IP)
[10:25:54] *** ChanServ sets mode: +o pnkfelix
[10:26:06] *** Quits: frankmcsherry (frankmcsher@moz-jna.j5l.19.178.IP) (Connection closed)
[10:27:18] *** kimundi is now known as zz_kimundi
[10:27:35] *** Joins: TheLemonMan (lemonboy@moz-afr3uv.50-151.net24.it)
[10:28:33] *** Joins: skade (skade@moz-uhpucc.web.vodafone.de)
[10:28:45] *** Joins: drewm1980 (drewm1980@moz-sj0og1.hujf.dasj.1812.2a02.IP)
[10:29:16] *** Quits: zyphrus (David@moz-1a4.urk.98.101.IP) (Ping timeout: 121 seconds)
[10:30:10] *** Quits: v21 (vee@moz-m7i.lku.108.158.IP) (Ping timeout: 121 seconds)
[10:30:24] *** Joins: turtil (turtil@moz-8am.857.98.121.IP)
[10:30:30] *** Quits: aravindavk (aravinda@moz-08t.qbc.238.117.IP) (Ping timeout: 121 seconds)
[10:30:31] <drewm1980> Good morning rustaceans!  Is there some way in rust to make a type alias based on some value?  
[10:31:02] <drewm1980> I am trying to not have to figure out the type of something I'm passing into a nested function.
[10:31:30] <drewm1980> I would use a closure (which has type inference) to do this, but closures don't support recursion.
[10:32:21] <tomaka> You could use a generic?
[10:32:40] <tomaka> if you write `fn foo<T>(_: T) {}` and `foo(a)`, then you don't have to figure out the type of `a`
[10:32:58] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[10:33:06] <drewm1980> tomaka: interesting :)  I will try that!
[10:33:23] *** Quits: vks (quassel@moz-b54qc9.fias.uni-frankfurt.de) (Ping timeout: 121 seconds)
[10:33:24] <aji> alright reported it
[10:34:01] *** Quits: popow (Thunderbird@moz-03f.kd0.252.223.IP) (Connection closed)
[10:34:21] *** Joins: Anupkumar (uid16774@moz-cf8smb.uxbridge.irccloud.com)
[10:35:24] *** Joins: v21 (vee@moz-m7i.lku.108.158.IP)
[10:36:28] *** Joins: erz (erz@moz-8v4.af0.232.213.IP)
[10:37:17] *** Quits: lenstr (lenstr@moz-ca8.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[10:38:01] *** Joins: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP)
[10:38:54] *** Joins: skade_ (skade@moz-u1j.1t9.225.62.IP)
[10:38:55] *** Quits: skade (skade@moz-uhpucc.web.vodafone.de) (Connection closed)
[10:39:47] *** Joins: larhat (Adium@moz-1dkvl5.81.in-addr.arpa)
[10:40:37] *** Quits: erz (erz@moz-8v4.af0.232.213.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[10:40:43] *** Quits: skade_ (skade@moz-u1j.1t9.225.62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[10:41:57] *** Quits: larhat (Adium@moz-1dkvl5.81.in-addr.arpa) (Quit: Leaving.)
[10:42:21] *** Joins: lenstr (lenstr@moz-ca8.vju.25.171.IP)
[10:42:51] <filsmick> how is debug_assert! implemented? 
[10:42:57] *** Quits: sin8h (Adium@moz-4gl.cvv.51.106.IP) (Quit: Leaving.)
[10:42:59] <drewm1980> tomaka: That at least moved my errors into the function, but I still need to call methods, destructure returned values, etc... inside the function.
[10:43:02] <filsmick> I can't find the macro definition
[10:43:25] *** Quits: zxq9 (ceverett@moz-qsm369.mesh.ad.jp) (Quit: Konversation terminated!)
[10:43:37] <tomaka> drewm1980: You can require your "T" to implement certain traits
[10:43:55] <tomaka> for exammple  `fn foo<T>(t: T) where T: Show + Clone + Send {}`
[10:43:58] <Yurume> filsmick: http://doc.rust-lang.org/nightly/std/macro.debug_assert!.html
[10:44:14] <filsmick> Yurume: just found it, but thanks
[10:44:24] <filsmick> if anyone's interested: https://github.com/rust-lang/rust/blob/c897ac04e2ebda378fd9e38f6ec0878ae3a2baf7/src/libcore/macros.rs#L127
[10:44:29] <tomaka> drewm1980: Then you'll be able to use the methods of the traits from inside the function
[10:44:47] <drewm1980> tomaka: So, adding the Iterator bound got me a bit farther, but I still need to match on the values the iterator is returning...
[10:45:11] *** Quits: v21 (vee@moz-m7i.lku.108.158.IP) (Ping timeout: 121 seconds)
[10:45:18] *** Joins: zyga (zyga@moz-84t.g3u.7.89.IP)
[10:45:19] <tomaka> drewm1980: Try `where T: Iterator<Item = u8>` if you want the iterator to produce a list of u8s
[10:45:20] <drewm1980> or rather, the gnarly thing that implements Iterator.  
[10:45:51] *** AutomatedTester is now known as automatedtester|away
[10:45:57] <drewm1980> tomaka: whoa, so that's something like a named generic argument?
[10:46:18] *** Joins: larhat (Adium@moz-1dkvl5.81.in-addr.arpa)
[10:46:24] *** Quits: larhat (Adium@moz-1dkvl5.81.in-addr.arpa) (Quit: Leaving.)
[10:46:29] <tomaka> The Iterator trait has what is called an associated type named "Item"
[10:46:33] <tomaka> http://doc.rust-lang.org/1.0.0-beta.4/std/iter/trait.Iterator.html
[10:46:56] *** Joins: zxq9 (ceverett@moz-qsm369.mesh.ad.jp)
[10:47:37] <drewm1980> tomaka: Ahh, this is the associated types thing...
[10:48:17] <filsmick> there's a beta 4 already?
[10:48:35] <tomaka> apparently yes
[10:48:49] <filsmick> it's available for download! time to read the release notes
[10:49:04] <woboats> Sorry for a big code dump, but does anyone have any idea how this could be made to work: http://is.gd/jJ5XvC
[10:49:35] *** Joins: choplin (choplin@moz-qkm9un.ap.nuro.jp)
[10:50:16] <drewm1980> tomaka: thanks! I'm passing the type checker now!
[10:50:49] *** Parts: jkbbwr (jakob@moz-n8t64u.angrykittens.co.uk) ()
[10:51:20] <filsmick> how can I accept a FnMut with a static bound?
[10:51:55] <bluss> FnMut() -> R + 'static  I think
[10:52:23] <filsmick> it returns a 'static reference? 
[10:52:33] <filsmick> The idea is to only capture 'static data
[10:52:48] <filsmick> function traits are a bit confusing
[10:52:59] <woboats> filsmick, no, it just doesn't return a reference that isn't 'static.
[10:53:07] *** Quits: choplin (choplin@moz-qkm9un.ap.nuro.jp) (Connection closed)
[10:53:21] <filsmick> woboats: oh. But if you don't need to return?
[10:53:40] <woboats> that would return (), which meets the 'static bound
[10:53:47] <filsmick> sorry if this is a stupid question, I'm having trouble with FnMut
[10:54:30] <filsmick> I see, it works, thanks!
[10:54:59] <woboats> The 'static bound is misleading, because owned values meet it.
[10:55:22] <bluss> filsmick: what do you mean by a static bound?
[10:55:26] <filsmick> @tomaka I replied to you on the RFC thread about panic handlers
[10:55:32] <bluss> filsmick: the thing I showed is just like FooTrait + 'static
[10:56:42] <filsmick> I think I don't quite understand 'static.
[10:56:47] <filsmick> When you would want it?
[10:56:47] *** Joins: trigen (MSX@moz-2vj6gq.tweaknet.net)
[10:56:57] <bluss> why did you ask for a static bound :)
[10:57:04] <filsmick> because I was told it may be needed 
[10:57:12] <filsmick> and I'm trying to get a grasp of Fn traits
[10:57:28] *** Joins: khades (Thunderbird@moz-u45.3vk.74.212.IP)
[10:57:36] <bluss> filsmick: lifetimes apply to all traits right, you just want a bound on the types that implement it
[10:57:41] <bluss> say T: Clone + 'static
[10:57:46] <bluss> "no borrowed data in T"
[10:57:56] <bluss> (and I can clone it)
[10:57:56] <filsmick> it's clearer
[10:58:01] *** Joins: BitPuffin (BitPuffin@moz-vunbu1.dyn.plus.net)
[10:58:08] *** Quits: gonzaloserrano (Adium@moz-1nv.3t7.97.62.IP) (Quit: Leaving.)
[10:58:28] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[10:58:30] <filsmick> I'm wondering why 'static would be necessary in a closure that runs right before destructing a thread, not *after*
[10:58:41] <bluss> when do you want it? When you don't want to have to keep track of a borrow
[10:58:49] *** Joins: _ixti_ (ixti@moz-i3d.dae.119.188.IP)
[10:59:02] *** Joins: }ls{ (uhelp@moz-rjl8vs.dip0.t-ipconnect.de)
[10:59:14] <filsmick> bluss: see https://github.com/rust-lang/rfcs/pull/1100#issuecomment-98868503
[10:59:21] *** automatedtester|away is now known as AutomatedTester|AFK
[10:59:34] <bluss> ok yeah some common context would be good
[10:59:39] <filsmick> do you know why he's saying 'static is necessary? 
[10:59:51] <filsmick> I mean, the closure runs almost like an ordinary one
[10:59:57] <filsmick> the data it borrows should still be alive
[11:00:01] *** Joins: arielb1 (Mibbit@moz-cmi.jfj.114.192.IP)
[11:00:04] <filsmick> so why 'static?
[11:00:15] <arielb1> is there a replacement for find_equiv?
[11:00:33] <arielb1> I mean, a way to look up an object with an hash and equality function?
[11:00:43] <woboats> the trait `Sized` is not implemented for the type `Foo + Sized`
[11:00:50] <woboats> ??
[11:01:06] <bluss> filsmick: well first of all, we don't allow non-'static to be sent across threads right now. I think.
[11:01:22] <bluss> woboats: is Foo a trait?
[11:01:29] <woboats> bluss, yes
[11:01:37] <filsmick> bluss: ahhh I'm starting to get it. The *closure* itself would be 'static - right?
[11:01:47] <bluss> filsmick: yes
[11:01:56] <filsmick> bluss: but it could borrow non-'static data
[11:01:57] <bluss> filsmick: I'm not up to speed with exactly why
[11:02:01] <bluss> filsmick: no
[11:02:06] *** Quits: gthank (gthank@moz-5sim0m.ga.charter.com) (Ping timeout: 121 seconds)
[11:02:07] <filsmick> oh? 
[11:02:07] <bluss> filsmick: then the closure isn't static
[11:02:39] <bluss> woboats: well there is no way to make the Foo type sized (where Foo is the name of a trait)
[11:02:54] <woboats> woboats, yeah, I was trying to cheat object safety.
[11:02:57] <bluss> Foo is the object type of a trait and implementors can be different sizes
[11:03:18] <bluss> you've only required that implementors are sized, not of the same size.
[11:03:21] <filsmick> bluss: so this: fn on_panic<F, R>(f: F) where F: FnMut() -> R + 'static  is only accepting a 'static closure?
[11:03:35] *** Joins: rootnode (rootnode@moz-go1ut4.ip1.george24.com)
[11:03:40] <bluss> filsmick: yes but that's just a linguistic affirmation right
[11:03:51] <bluss> filsmick: let's say this is what we mean by static closure
[11:04:05] <bluss> that the value that implements F: FnMut is F: 'static
[11:04:06] <filsmick> bluss: by static closure, I mean I can define the closure in one thread and use it in ten others
[11:04:27] <bluss> oh that's a strange definition
[11:04:28] <filsmick> because it's 'static (and Send, too?)
[11:04:34] <filsmick> a noob definition, I'd say :)
[11:04:45] <bluss> because how lifetimes and threads work out is not yet settled (thread::scoped)
[11:04:49] *** Joins: nyx (nyx@moz-ivelpd.res.rr.com)
[11:04:55] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[11:05:02] *** Quits: frankmcs_ (frankmcsher@moz-jna.j5l.19.178.IP) (Ping timeout: 121 seconds)
[11:05:07] *** Joins: fabianvf (fabianvf@moz-fjqmui.va.comcast.net)
[11:05:15] <aatch> bluss, that's not actually true. The only issue is how to ensure safety.
[11:05:27] *** Quits: Romster (Romster@moz-4g83e8.rev.eftel.com) (Ping timeout: 121 seconds)
[11:05:49] <bluss> I guess
[11:06:03] <bluss> in my mind it pretty much doesn't exist right now
[11:06:34] *** Quits: vidot_j_ (vidot_j@moz-2q9eng.abo.wanadoo.fr) (Connection closed)
[11:06:38] *** Joins: Romster (Romster@moz-4g83e8.rev.eftel.com)
[11:06:46] <aatch> So there's two parts to a closure, the actual function and the environment. The actual closure is just code, the environment is what we care about for pretty much everything else.
[11:06:55] *** Joins: choplin (choplin@moz-qkm9un.ap.nuro.jp)
[11:07:17] *** Quits: Guest63 (textual@moz-qfs.570.70.83.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[11:07:26] <bluss> the function part is always 'static
[11:07:38] <bluss> and Send, for that matter
[11:07:49] <aatch> So 'static and Send are bounds on the *environment*.
[11:07:51] <filsmick> so if it captures nothing
[11:07:54] <filsmick> I can send it between threads
[11:08:00] <aatch> filsmick, yep.
[11:08:14] *** Joins: jadbaires (jadrian@moz-6u6inc.dsl.telepac.pt)
[11:08:22] <bluss> that's a good way to look at it
[11:08:41] <bluss> F: 'static   <- just think of F as the bag of values captured
[11:08:57] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Ping timeout: 121 seconds)
[11:09:04] *** Joins: panicbit (panicbit@moz-r4ks4s.dip0.t-ipconnect.de)
[11:09:09] *** Quits: fabianvf (fabianvf@moz-fjqmui.va.comcast.net) (Ping timeout: 121 seconds)
[11:10:22] <aatch> Well closures pretty much are just structs that implement the Fn* traits.
[11:10:52] *** Joins: jviereck (Adium@moz-v77rgs.ethz.ch)
[11:10:57] <aatch> Hell, you can implement the Fn traits yourself (though it requires a feature gate).
[11:11:01] *** Joins: areski (areski@moz-v09.heo.57.195.IP)
[11:11:44] <bluss> filsmick: since closures just use the trait system now, you can use all your regular rust knowledge
[11:11:51] <bluss> of borrowing and trait objects
[11:12:00] <filsmick> bluss: glad to know that, you've clarified a lot
[11:12:09] <filsmick> I understand a bit better now
[11:12:38] <steveklabnik> http://doc.rust-lang.org/nightly/book/closures.html has all the details ;)
[11:13:03] <filsmick> steveklabnik: was it recently improved?
[11:13:06] *** Quits: BitPuffin (BitPuffin@moz-vunbu1.dyn.plus.net) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[11:13:15] *** Joins: nwin (textual@moz-7jj8l0.pools.vodafone-ip.de)
[11:13:15] <steveklabnik> define 'recent'
[11:13:24] <filsmick> less than three weeks ago
[11:13:37] *** Joins: andre_ (andre@moz-rnd.3qv.76.201.IP)
[11:13:41] <steveklabnik> not in a major way, i don't think. i think it's about six weeks old? maybe?
[11:14:25] <aatch> I really should flick through the book, at least so I can point people at it.
[11:15:03] <steveklabnik> aatch: that'd be great. especially for discovering where it's less than ideal
[11:15:04] <GBGamer> aatch: it's mostly awesome
[11:15:08] <steveklabnik> that's basically what i do
[11:15:16] <GBGamer> except for some stuff at the end which hasn't been updated
[11:15:17] <steveklabnik> try to pay attention in here, if it's something not covered, try to cover it
[11:15:22] *** Quits: _bart (bart@moz-hu0dqu.irf.se) (Quit: leaving)
[11:15:24] <GBGamer> (i.e., ASM)
[11:15:25] <steveklabnik> GBGamer: which end?
[11:15:27] <steveklabnik> ah yeah
[11:15:32] <steveklabnik> ASM got a PR relatively recently
[11:15:38] <GBGamer> that was me :P
[11:15:38] <nathan7> aatch: Though you still can't implement them generically because coherence is screwed :(
[11:15:43] <steveklabnik> :)
[11:15:52] <steveklabnik> inline asm hasn't changed very much over time
[11:16:03] *** Quits: nwin_ (textual@moz-7j2crn.pools.vodafone-ip.de) (Ping timeout: 121 seconds)
[11:16:13] <steveklabnik> but yeah, unstable stuff naturally has worse docs, it happens
[11:16:18] <steveklabnik> i'm really excited to finally be filling in section 3
[11:16:34] <steveklabnik> it's so much easier to do now that everything else has a reasonably full explanation
[11:17:00] <GBGamer> question: would it be possible to make the book a little more sorted?
[11:17:05] <filsmick> steveklabnik: you're doing a wonderful job with the docs
[11:17:10] <steveklabnik> filsmick: thanks
[11:17:10] *** Joins: aravindavk (aravinda@moz-tm0.l2t.236.117.IP)
[11:17:13] <steveklabnik> GBGamer: sorted in what sense?
[11:17:20] <GBGamer> it's really difficult, at least for me, to find anything in chapter 5
[11:17:34] <steveklabnik> so, 5 is organized in two way
[11:17:35] <steveklabnik> s
[11:17:39] <steveklabnik> 1. per feature/semantic
[11:17:41] <GBGamer> everything else fits on one screen, but chapter 5 has 38 subchapters
[11:17:48] <steveklabnik> 2. in an order which builds onto each other
[11:18:02] <nathan7> steveklabnik: take all the characters, sort them alphabetically
[11:18:03] *** Quits: fmtq (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[11:18:08] <steveklabnik> you can reasonably read 5 in order and fully understand the details
[11:18:26] <GBGamer> yeah, but if you're just checking it as a reference, it's difficult
[11:18:27] <steveklabnik> eventually 3 and 4 probably wont be on one screen either. we'll see
[11:18:44] <GBGamer> well then I definitely think we need a search bar
[11:18:48] <steveklabnik> i think a real search would be helpful
[11:18:49] <GBGamer> at some point soon
[11:18:55] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[11:18:59] <steveklabnik> would love to have it, but it needs dev work
[11:19:07] <GBGamer> yeah :/
[11:19:25] <GBGamer> at least when I find the docs, they're very very good
[11:19:29] <GBGamer> :P
[11:19:29] <filsmick> are if cfg!(...) { ... } completely optimized away?
[11:19:36] <filsmick> or is there still a branch
[11:19:39] <GBGamer> filsmick: should be
[11:19:45] *** Quits: woboats (tatterdemal@moz-a0dnkb.ca.comcast.net) (Ping timeout: 121 seconds)
[11:20:02] <GBGamer> I can't see a time where they wouldn't be
[11:20:05] *** Quits: choplin (choplin@moz-qkm9un.ap.nuro.jp) (Connection closed)
[11:20:16] <GBGamer> because it's if true {}/if false {}
[11:21:22] *** Joins: sin8h (Adium@moz-f0u.cn5.51.106.IP)
[11:21:37] *** AutomatedTester|AFK is now known as AutomatedTester
[11:21:39] *** Joins: fmtq (fmtq@moz-d08itp.tpgi.com.au)
[11:21:42] <filsmick> steveklabnik: I submitted an RFC about silent panics, by the way
[11:21:43] <nathan7> wait, we have a cfg! builtin now?
[11:21:58] <filsmick> nathan7: yes, it's a macro http://doc.rust-lang.org/std/macro.cfg!.html
[11:22:01] *** Quits: akiss (akiss@moz-43lncs.uio.no) (Ping timeout: 121 seconds)
[11:22:11] <nathan7> that should save me a bunch of nasty cruft
[11:23:03] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[11:23:11] *** Joins: _1126_ (flume@moz-bio9kd.io)
[11:23:13] *** Joins: frankmcsherry (frankmcsher@moz-jna.j5l.19.178.IP)
[11:23:16] *** Joins: Roba (Mibbit@moz-n05.ctp.31.141.IP)
[11:23:24] <aatch> nathan7, we've had that macro for a long time.
[11:23:57] *** Joins: jeffasinger (jeff@moz-1j1qti.cable.mindspring.com)
[11:24:02] <aatch> filsmick, there's actually code in the compiler to ensure that constant branches are optimised away.
[11:24:17] <filsmick> aatch: that's nice, I'll use cfg! whenever possible then
[11:24:19] *** Joins: mahdi (mahdi@moz-hvj.ahp.244.151.IP)
[11:24:20] *** Quits: _1126 (flume@moz-bio9kd.io) (Connection closed)
[11:24:27] <Roba> Hey, I just have a short question. Where can I find the extra::RWArc function in the actual nightly build?
[11:24:30] *** Joins: kushal (kdas@moz-cbaein.202.sitibroadband.in)
[11:24:44] <aatch> Roba, with a time machine?
[11:24:46] *** Quits: filsmick (filsmick@moz-tj8j41.abo.wanadoo.fr) (Quit: )
[11:24:51] *** Quits: jviereck (Adium@moz-v77rgs.ethz.ch) (Quit: Leaving.)
[11:24:54] *** Joins: vks (quassel@moz-b54qc9.fias.uni-frankfurt.de)
[11:24:55] <steveklabnik> firemole: i saw, been reading
[11:25:07] *** Joins: choplin (choplin@moz-qkm9un.ap.nuro.jp)
[11:25:09] <Roba> yes - I want a concurrency save vector list
[11:25:10] <steveklabnik> Roba: as aatch alludes to, extra:: has been gone for... a year?
[11:25:16] *** bvssvni_ is now known as bvssvni
[11:25:20] <steveklabnik> Roba: in today's Rust, they're split up
[11:25:31] <nathan7> aatch: I didn't know about it!
[11:25:38] <steveklabnik> RWArc was like Arc + ... actually I forget, was it RefCell or Mutex? one of the two
[11:25:59] <aatch> nathan7, it's been around for as long as I can remember, so I'm confident in saying that cfg! has been around for years.
[11:26:02] *** Joins: oceanwhit (christianwh@moz-a38b1m.ca.comcast.net)
[11:26:11] <aatch> steveklabnik, RWLock maybe?
[11:26:20] <nathan7> aatch: that does not affect the veracity of my statement
[11:26:23] <bluss> Rust 0.9 docs http://static.rust-lang.org/doc/0.9/extra/arc/struct.RWArc.html
[11:26:30] <bluss> sounds like rwlock
[11:26:48] <aatch> steveklabnik, though it could be Mutex (I'd be surprised if it had something like RefCell).
[11:26:55] <nathan7> yeah, this is Arc<RWLock<T>>
[11:27:10] *** Joins: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com)
[11:27:16] <Roba> okay thanks guys
[11:27:25] <Roba> I try the Arc<RWLock<T>>
[11:27:36] <GBGamer> our docs have come a very long way since 0.9
[11:27:54] <nathan7> I actually quite like the rustdoc theming from back then
[11:28:02] *** Joins: logan_e (logan_e@moz-ltn.qg3.218.73.IP)
[11:28:18] <steveklabnik> yeah, it's nice in ways
[11:28:18] <aatch> Roba, unless you have high reader contention, a Mutex might be a better choice.
[11:28:19] <nathan7> (admittedly, I'm biased, it gives me nostalgic fuzzies)
[11:28:20] *** Joins: Porkepix (Porkepix@moz-q59.m4a.208.91.IP)
[11:28:20] *** Quits: mahdi (mahdi@moz-hvj.ahp.244.151.IP) (Ping timeout: 121 seconds)
[11:28:31] <GBGamer> I was talking more about the explanations, which are, imho, much worse
[11:28:55] *** Joins: skade (skade@moz-u1j.1t9.225.62.IP)
[11:29:00] <Roba> @aatch but a mutex locks the whole vector for the whole time or?
[11:29:04] *** Quits: choplin (choplin@moz-qkm9un.ap.nuro.jp) (Connection closed)
[11:29:11] <nathan7> GBGamer: well, Rust was a lot more complicated
[11:29:20] *** Quits: nico (nico@moz-dalf30.dip0.t-ipconnect.de) (Connection closed)
[11:29:23] <aatch> Roba, sure, but so does a RWLock. The difference is that RWLock allows for concurrent reads.
[11:29:27] *** Joins: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net)
[11:29:45] <GBGamer> I'm not saying it's terrible or anything, just worse than today's
[11:29:56] <bluss> Roba: feel free to ask about other things you find in old code and want updated
[11:29:59] <GBGamer> and also, super happy that it's less complicated now
[11:30:09] *** Quits: oceanwhit (christianwh@moz-a38b1m.ca.comcast.net) (Ping timeout: 121 seconds)
[11:30:23] *** Joins: Amaranth (travis@moz-1raqsl.cpe.cableone.net)
[11:30:52] <aatch> Roba, however RWLock has to do a lot more work, making it slower than a Mutex in relatively low contention environments.
[11:31:09] <nathan7> wow, libextra was a total trash fire
[11:31:29] <Roba> aatch yeah, but i need to lock and unlock the vector during the lifetime of a task a lot
[11:32:02] <steveklabnik> Roba: might also be worth knowing: rust no longer has tasks, only threads
[11:32:05] <nathan7> when I look at old Rust stuff, I think "why did nathan-back-then ever learn Rust"
[11:32:55] *** Joins: dinfuehr_ (dinfuehr@moz-c25.u8s.112.91.IP)
[11:32:57] *** Quits: dinfuehr_ (dinfuehr@moz-c25.u8s.112.91.IP) (Connection closed)
[11:33:12] <aatch> Roba, if you're locking/unlocking frequently a Mutex might actually be a better choice.
[11:33:15] <Roba> steveklabnik task or thread I simply want to parallise work 
[11:33:18] *** Joins: dinfuehr_ (dinfuehr@moz-c25.u8s.112.91.IP)
[11:33:42] <steveklabnik> Roba: yeah, totally, just letting you know :)
[11:33:48] <Roba> okay, then I try the mutex
[11:34:06] <Roba> steveklabnik thanks for that ;)
[11:34:08] <aatch> Roba, the use case for RWLock is when you have many, many readers and few, infrequent writers.
[11:34:11] *** Quits: aravindavk (aravinda@moz-tm0.l2t.236.117.IP) (Ping timeout: 121 seconds)
[11:34:21] <aji> how much of alloc::boxed has special compiler support, lol
[11:34:33] <aatch> aji, most of it?
[11:34:38] <Roba> aatch okay thank you for that
[11:35:39] *** Quits: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP) (Ping timeout: 121 seconds)
[11:35:40] <aatch> aji, Rust's treatment of `Box` has gotten dumber over time, but it still knows more about it than any other "library" type.
[11:36:31] *** Joins: ytain (ytain@moz-pr2.aip.175.108.IP)
[11:36:48] <aji> interesting
[11:36:50] *** Joins: choplin (choplin@moz-qkm9un.ap.nuro.jp)
[11:37:22] *** Quits: dinfuehr_ (dinfuehr@moz-c25.u8s.112.91.IP) (Ping timeout: 121 seconds)
[11:37:23] <aatch> aji, we're missing a few features to make Box a pure library type.
[11:37:32] <aji> i noticed it uses `box` for all actual allocation
[11:37:47] *** Quits: areski (areski@moz-v09.heo.57.195.IP) (Ping timeout: 121 seconds)
[11:37:47] <aji> but that's about the only compiler-only thing i can see
[11:37:48] *** Joins: Wild_Cat (Max@moz-fa8mvt.dsl.teksavvy.com)
[11:38:01] <GBGamer> there's also DerefMve
[11:38:11] <GBGamer> which is a thing that only box can do
[11:38:23] <Roba> aatch I've just read the mutex documentation again - the Mutex only get unlocked when it's out of scope - that the whole lifetime of a thread
[11:38:55] *** Quits: sin8h (Adium@moz-f0u.cn5.51.106.IP) (Connection closed)
[11:39:03] <Roba> that didn't allow me to make parellise work
[11:39:58] <aatch> Roba, you're either frequently locking and unlocking the vector within a thread, *or* you're locking it for the entire thread. You can't have both.
[11:40:28] *** Joins: Quanttek (quassel@moz-25k96c.6fkd.dvrb.8108.2a02.IP)
[11:41:17] <Roba> Okay how can I lock und unlock the vector frequently?
[11:41:25] *** Joins: areski (areski@moz-v09.heo.57.195.IP)
[11:41:26] <frankmcsherry> Roba: the mutex should be unlocked when the MutexGuard goes out of scope. The Mutex itself does not lock whatever it protects.
[11:41:33] <aatch> Roba, can you show us some code?
[11:42:00] *** Quits: skade (skade@moz-u1j.1t9.225.62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[11:42:19] <mkpankov> at times like this I keep thinking how critical GitHub is for Rust development process
[11:42:28] *** Joins: vmeson (rmacleod@moz-hs5cri.cable.teksavvy.com)
[11:42:55] <frankmcsherry> calling .lock on a Mutex gives you back a MutexGuard (or some failures). You can exclusively access the protected data through the guard for as long as it exists, but once it drops out of scope the lock is released. The Mutex can stay in scope the whole time, though.
[11:43:28] <Roba> aatch, I simply have a list with game objects which i want to manipulate with different tasks
[11:43:41] *** Quits: Porkepix (Porkepix@moz-q59.m4a.208.91.IP) (Quit: My laptop has gone to sleep. ZZZzzz…)
[11:43:45] <Roba> at the same time
[11:44:18] <frankmcsherry> the first example at https://doc.rust-lang.org/std/sync/struct.Mutex.html shows how to do this.
[11:44:57] <frankmcsherry> put a while loop around the body of the spawned thread, and you have multiple tasks acquiring and releasing the mutex.
[11:44:57] *** Joins: mib_a7q38z (Mibbit@moz-osfbc5.iinet.net.au)
[11:45:02] <c63> https://paste.xinu.at/fFX/ what's that supposed to meann?
[11:45:27] <frankmcsherry> whoever wrote that example is a bad person, though.
[11:45:55] <frankmcsherry> Roba: the example is confusing (bad) because they reassign the name "data", which used to be the Mutex, to be the MutexGuard.
[11:46:09] <frankmcsherry> get steveklabnik on phone! 
[11:46:40] <Roba> frankmcsherry thanks for that
[11:46:44] <aatch> c63, that constant is marked unstable.
[11:47:10] <c63> so what is the stable way to get PI?
[11:47:23] *** Quits: areski (areski@moz-v09.heo.57.195.IP) (Ping timeout: 121 seconds)
[11:47:26] <steveklabnik> frankmcsherry: hehe
[11:47:34] <frankmcsherry> steveklabnik: we have an issue!
[11:48:09] <frankmcsherry> I assert that the first example at https://doc.rust-lang.org/std/sync/struct.Mutex.html is confusing, because data is rebound from Mutex to MutexGuard, but the comments talk about important events happening when "data" goes out of scope.
[11:48:16] *** Joins: kieran (kieran@moz-c5gk5j.ihug.co.nz)
[11:48:17] <steveklabnik> c63: PI isn't unstable, just PI_2
[11:48:19] *** Joins: Guest63 (textual@moz-qfs.570.70.83.IP)
[11:48:22] <aatch> c63, getting at PI *is* stable, it's PI_2 that's unstable: http://doc.rust-lang.org/std/f32/consts/index.html
[11:48:50] *** Quits: trigen (MSX@moz-2vj6gq.tweaknet.net) (Connection closed)
[11:48:50] <steveklabnik> frankmcsherry: it's just shadowing. it's talking about the data 3 or 4 lines up
[11:48:56] <bluss> aatch: lol
[11:49:02] <frankmcsherry> steveklabnik: yes, we both understand what is going on.
[11:49:06] <steveklabnik> frankmcsherry: this kind of shadowing is very common when using mutex
[11:49:15] <steveklabnik> i see what you're saying though
[11:49:36] <c63> so FRAC_2_PI is stable, but PI_2 isn't? what's the reasoning behind this?
[11:49:39] *** Joins: asmyers (amyers@moz-f2k.1cm.177.128.IP)
[11:49:48] <frankmcsherry> if "data" were instead "mutex" and "guard" or something like that, mucho less confusiones, je penser.
[11:49:49] *** Quits: tcard (tcard@moz-5eb1g3.staticIP.rima-tde.net) (Client exited)
[11:49:49] <bluss> something about τ I guess
[11:49:56] *** Joins: areski (areski@moz-v09.heo.57.195.IP)
[11:50:23] <steveklabnik> c63: http://doc.rust-lang.org/std/f32/consts/constant.PI_2.html has the reason: "Unstable
[11:50:26] <steveklabnik> : unclear naming convention/usefulness
[11:50:52] <steveklabnik> bluss: we already rejected tau
[11:50:55] <c63> steveklabnik: yeah i see that, but why doesnt the same apply to e.g. FRAC_2_PI
[11:51:12] <c63> PI/2 is unstable, but 2/PI is?
[11:51:13] <steveklabnik> i _do_ know that these constants weren't stable for a while because we wanted to make them associated constants
[11:51:19] <bluss> steveklabnik: yeah but
[11:51:32] <bluss> there are so many π constants
[11:51:33] <steveklabnik> c63: well, i'm not sure if this is the official reason, but you really only need one or the other, no?
[11:51:38] <mkpankov> hahah
[11:51:41] <steveklabnik> ;)
[11:51:43] <kagami> Huh, can't even update registry with cargo while github is offline.
[11:51:58] *** Quits: mib_a7q38z (Mibbit@moz-osfbc5.iinet.net.au) (Quit: http://www.mibbit.com ajax IRC Client)
[11:52:00] <steveklabnik> kagami: yeah, the index is stored there :/
[11:52:07] <c63> steveklabnik: i don't need any of them. in fact
[11:52:21] <mkpankov> Rust community is so tough it discusses stability of Pi
[11:52:22] <steveklabnik> c63: yeah it's true. i'm not sure off the top of my head.
[11:52:23] *** Quits: Guest63 (textual@moz-qfs.570.70.83.IP) (Ping timeout: 121 seconds)
[11:52:37] <mkpankov> I wonder what's next? e? 
[11:52:37] *** Quits: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[11:52:40] <c63> mkpankov: :P
[11:52:45] <aatch> Hmm, I think it might be due to the error of floating point division.
[11:53:23] <aatch> I coincidentally have "The Art of Computer Programming: Volume 2" next to me, which has a nice section on floating-point arithmetic.
[11:53:45] <aatch> So I'm going to double check
[11:53:48] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[11:54:01] <aatch> I know that multiplication has less error than addition/subtraction
[11:54:04] *** Joins: skade (skade@moz-u1j.1t9.225.62.IP)
[11:54:28] *** Quits: choplin (choplin@moz-qkm9un.ap.nuro.jp) (Connection closed)
[11:54:32] *** Joins: Guest63 (textual@moz-qfs.570.70.83.IP)
[11:54:36] *** Joins: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net)
[11:55:09] *** bentley|away is now known as bentley
[11:55:38] *** Quits: skade (skade@moz-u1j.1t9.225.62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[11:55:42] *** Joins: jviereck (Adium@moz-v77rgs.ethz.ch)
[11:55:54] <c63> I still don't unstand why they dropped Float::pi() in favor of the type specific constants
[11:56:11] <huon> std is not trying to do generic numeric programming
[11:56:20] *** Quits: areski (areski@moz-v09.heo.57.195.IP) (Ping timeout: 121 seconds)
[11:56:22] <huon> we tried like, 4, different versions and none felt "right"
[11:56:38] *** Joins: areski (areski@moz-v09.heo.57.195.IP)
[11:56:38] <huon> maybe in future :)
[11:56:54] <aatch> Also, the num crate.
[11:57:19] <huon> aatch: division by 2 is errorless
[11:57:36] <huon> (assuming you're away from the denormals)
[11:57:40] *** Joins: e_svedang (erik@moz-nl3.ldg.228.90.IP)
[11:57:47] <huon> (similarly multiplication assuming you're not near infinity)
[11:58:03] <c63> huon: it's a shame though that you didn't settle for an ergonomic version prior to 1.0
[11:58:22] <pnkfelix> what hypothetical error in floating point division are we discussing?
[11:58:32] <huon> pnkfelix: the PI_2 and FRAC_PI_2 constants
[11:58:37] <pnkfelix> As in, why they exist?
[11:58:46] <frankmcsherry> fp division is just slow.
[11:58:46] <huon> one is unstable, one is not
[11:58:49] <frankmcsherry> no one wants to do that.
[11:59:17] <huon> c63: yes, definitely
[11:59:32] *** Quits: kieran (kieran@moz-c5gk5j.ihug.co.nz) (Ping timeout: 121 seconds)
[11:59:53] *** Joins: skade (skade@moz-u1j.1t9.225.62.IP)
[11:59:54] <huon> c63: although my point is that we don't know an ergonomic version that solves the relevant problems
[11:59:59] *** Joins: erz (erz@moz-45hupr.broadband.corbina.ru)
[12:00:09] <arielb1> is there a replacement for find_equiv?
[12:00:13] <huon> c63: in any case, as aatch says, https://crates.io/crates/num serves that purpose
[12:00:20] <huon> arielb1: just .get now, I think
[12:00:33] <arielb1> huon: that's not enough
[12:00:34] <aatch> I'd rather not have an ergonomic version than be locked into an unergonomic solution.
[12:00:46] <pnkfelix> huon: I suspect its because `PI_2` does not obviously denote its value
[12:00:48] <arielb1> so just copy HashMap
[12:00:54] <pnkfelix> e.g. `PI_2` denotes PI * 2
[12:01:15] *** Quits: skade (skade@moz-u1j.1t9.225.62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[12:01:37] <pnkfelix> but I think c63 above demonstrated why this is unobvious (at least, when c63 said `PI/2`, I assume c63 was referring to the value of PI_2 )
[12:02:03] <huon> pnkfelix: yeah, the stated reason for instability is "unclear naming convention/usefulness"
[12:02:25] *** Quits: smohan (smohan@moz-m6j.f0d.244.121.IP) (Connection closed)
[12:02:26] *** Joins: smohan (smohan@moz-m6j.f0d.244.121.IP)
[12:02:43] <pnkfelix> I would probably just name it TWO_PI, but maybe better to let someone on crates.io do that.
[12:03:11] <huon> it's already there https://crates.io/crates/tau :P
[12:03:38] <aatch> I originally thought that floating-point division may be less accurate, but further investigation suggests that multiplication and division are similarly accurate.
[12:04:03] <arielb1> aatch: PI*2, PI/2 are exact
[12:04:06] <arielb1> in floating point
[12:04:11] <arielb1> I mean, as exact as PI
[12:04:15] *** Joins: akiss (akiss@moz-43lncs.uio.no)
[12:04:27] *** bentley is now known as bentley|away
[12:04:53] *** Joins: tcard (tcard@moz-5eb1g3.staticIP.rima-tde.net)
[12:05:11] *** Quits: playjax (chatzilla@moz-65af5t.optusnet.com.au) (Quit: ChatZilla 0.9.91.1 [Firefox 32.0.1/20140911151253])
[12:05:19] *** Joins: aravindavk (aravinda@moz-5lh.5ks.215.117.IP)
[12:05:26] <arielb1> rusti: use std::f32; (f32::consts::PI*2.)/2. == f32::consts::PI
[12:05:28] -playbot- true
[12:05:35] <arielb1> rusti: use std::f32; (f32::consts::PI*2.)*(1/2.) == f32::consts::PI
[12:05:37] -playbot- <anon>:9:45: 9:49 error: the trait `core::ops::Div<_>` is not implemented for the type `_` [E0277]
[12:05:37] -playbot- <anon>:9         use std::f32; (f32::consts::PI*2.)*(1/2.) == f32::consts::PI
[12:05:37] -playbot- output truncated; full output at: http://bit.ly/1zMfAVb
[12:05:41] <aatch> At least, the algorithm in TACP combines the two since the only difference seems to be whether you divide or multiply the fraction parts. (Not that TACP uses IEEE 754 floats)
[12:05:41] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[12:05:47] <arielb1> rusti: use std::f32; (f32::consts::PI*2.)*(1./2.) == f32::consts::PI
[12:05:49] -playbot- true
[12:06:08] *** Joins: duncan (paul@moz-dst.ms6.225.173.IP)
[12:06:12] <panicbit> TIL: You can match patterns in closure parameters. I've looked in the book and found no mention of that :)
[12:06:24] <nathan7> well, they're bindings, yes
[12:06:50] <bluss> panicbit: in functions too, and only irrefutable patterns
[12:06:52] <nathan7> same syntax as `let`, same syntax as fn parameters
[12:06:57] <panicbit> bluss: Nice :)
[12:07:02] *** Joins: dinfuehr (dominik@moz-b31i9i.highway.telekom.at)
[12:07:02] <panicbit> Sure
[12:07:18] <mkpankov> bluss: if not irrefutable, it's compiler error?
[12:07:22] <nathan7> mkpankov: yep
[12:07:25] <panicbit> But it's not mentioned in the book (i.e. I couldn't find it)
[12:07:27] <mkpankov> good
[12:07:34] <nathan7> playbot: let Some(x) = Some(3);
[12:07:36] -playbot- <anon>:9:13: 9:20 error: refutable pattern in local binding: `None` not covered [E0005]
[12:07:36] -playbot- <anon>:9         let Some(x) = Some(3);
[12:07:36] -playbot- output truncated; full output at: http://bit.ly/1EQ00GS
[12:07:55] <arielb1> aatch: division/multiplication by power of 2 is always exact in FP
[12:07:58] <arielb1> up to overflow
[12:08:19] <arielb1> or denormal
[12:08:21] *** Quits: areski (areski@moz-v09.heo.57.195.IP) (Ping timeout: 121 seconds)
[12:08:27] *** Quits: turtil (turtil@moz-8am.857.98.121.IP) (Ping timeout: 121 seconds)
[12:09:19] <aatch> arielb1, I gathered.
[12:09:43] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Ping timeout: 121 seconds)
[12:10:36] <Roba> Okay guys, here are now some sample code with my problem
[12:10:37] <Roba> https://gist.github.com/Roba1993/76a61de68bcdb7ac75ff
[12:10:56] <Roba> I hope you can help me with the lock / unlock problem
[12:11:17] <c63> What happened to mkdir_recursive?
[12:11:46] <aatch> Roba, put the the requires a lock in it's own scope.
[12:11:51] <frankmcsherry> http://is.gd/bUhltL
[12:12:04] <frankmcsherry> no clue if it works, because it times out, but something like that.
[12:12:26] <bluss> frankmcsherry: sleep is not allowed in the sandbox
[12:12:34] <bluss> no sleeping in the sandbox!
[12:12:45] <frankmcsherry> bluss: shorrry offisher.
[12:12:50] <nathan7> busy-looping is fine though q=
[12:12:53] *** Quits: jviereck (Adium@moz-v77rgs.ethz.ch) (Quit: Leaving.)
[12:13:19] <frankmcsherry> Roba: what is going on in the changed version is that we have explicitly scoped the lifetime of the guard. 
[12:13:30] *** Quits: tigrou3tac (fabien@moz-gdonfo.fbx.proxad.net) (Connection closed)
[12:13:33] *** _1126_ is now known as _1126
[12:13:51] <frankmcsherry> Roba: it is defined in a new subscope, and the guard/lock is released at the end of that scope. When we need it again, we can re-acquire it.
[12:14:01] <Roba> franksmcsherry, I see what you have done -> stupid from me to didn't get that
[12:14:37] <Roba> frankmcsherry thank you very much :)
[12:14:48] <frankmcsherry> Roba: no worries!
[12:15:23] <frankmcsherry> Roba: I think somewhere in the style guide they advise explicitly dropping guards, precisely because of this sort of issue (hard to tell when things are declared "dead").
[12:15:33] *** Quits: asQuirreL (asQuirreL@moz-ro1qqu.ox.ac.uk) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[12:15:50] <frankmcsherry> Roba: so it might have worked if you put drop(data); after the first use of the lock, and then reacquired later on.
[12:16:57] <Roba> frankmcsherry: okay good to know
[12:17:34] *** Joins: dinfuehr_ (dinfuehr@moz-b31i9i.highway.telekom.at)
[12:17:42] *** Joins: tigrou3tac (fabien@moz-gdonfo.fbx.proxad.net)
[12:17:43] *** Quits: e_svedang (erik@moz-nl3.ldg.228.90.IP) (Client exited)
[12:17:51] *** Joins: psy (psy@moz-93g.ntd.6.103.IP)
[12:18:28] *** Quits: logan_e (logan_e@moz-ltn.qg3.218.73.IP) (Client exited)
[12:18:48] *** Joins: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net)
[12:19:29] *** Quits: vks (quassel@moz-b54qc9.fias.uni-frankfurt.de) (Ping timeout: 121 seconds)
[12:19:40] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[12:19:51] <aji> i noticed a lot of the standard library starts things with _
[12:20:12] <aji> does that have an effect? like suppressing "unused foo" warnings?
[12:20:14] *** Joins: Gabriel_7 (Gabriel@moz-2vj54m.mtgr.92aj.0e35.2a01.IP)
[12:21:02] *** Quits: wilsonk-laptop (kvirc@moz-a3a.hfa.64.184.IP) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[12:21:02] *** Quits: Quanttek (quassel@moz-25k96c.6fkd.dvrb.8108.2a02.IP) (Connection closed)
[12:21:14] <bluss> yes
[12:21:35] <bluss> just _ is a bit special, but _ prefix is to allow it be unused
[12:21:59] <bluss> ah but there is another quirk too where you'll see _ and that's for smart pointer internals, for example the struct members of arc
[12:22:03] <bluss> Ar
[12:22:04] <bluss> c
[12:22:24] *** Quits: espadrine (tyl@moz-qfr4fg.abo.wanadoo.fr) (Quit: Konversation terminated!)
[12:23:48] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[12:25:28] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[12:25:58] *** Joins: jarrednicholls (uid19542@moz-s0evcl.uxbridge.irccloud.com)
[12:26:03] <jarrednicholls> Will GA support staged api markers? or is that only meant to be an internal feature of Rust itself?
[12:26:17] *** Quits: untitaker (untitaker@moz-nskdhs.highway.telekom.at) (Ping timeout: 121 seconds)
[12:26:26] <faern> reem: I have some trouble lying about the lifetime for my threadpool. I managed easily with transmute for my queue-example, but It's harder in my real code. If you have time I would be very happy if you could have a look at https://github.com/faern/forkjoin/blob/feature/lifetimecleanup/src/lib.rs .. Around line 427.
[12:26:58] <bluss> jarrednicholls: it's internal for now. What's GA though?
[12:27:10] *** Joins: Quanttek (quassel@moz-25k96c.6fkd.dvrb.8108.2a02.IP)
[12:27:19] *** Quits: dinfuehr_ (dinfuehr@moz-b31i9i.highway.telekom.at) (Connection closed)
[12:27:40] *** Joins: dinfuehr_ (dinfuehr@moz-b31i9i.highway.telekom.at)
[12:27:42] <marc_> frankmcsherry: awesome blog post, I enjoyed it
[12:27:42] *** Joins: BitPuffin (isak@moz-vunbu1.dyn.plus.net)
[12:27:46] <BitPuffin> Hey
[12:27:48] <jarrednicholls> bluss: Rust 1.0 general availability.  I was just wondering if library authors will be able to use the staged API markers for their own use.
[12:27:50] <frankmcsherry> marc_: wait, which one?
[12:27:59] <faern> reem: the schedule take an Arg that the user have to make sure lives longer than the returned Job which is a handle to the calculation. But internally I want to promise the forkpool that it will live longer than the forkpool.
[12:28:02] <marc_> http://www.frankmcsherry.org/serialization/2015/05/04/unsafe-at-any-speed.html
[12:28:07] <frankmcsherry> marc_: but thank you, in either case!
[12:28:07] <BitPuffin> I'm implementing a vector type. I have implemented Mul for Vector with RHS = T. How can I implement mul for T where RHS = Vector
[12:28:08] *** Joins: untitaker (untitaker@moz-lcvhbq.highway.telekom.at)
[12:28:26] <frankmcsherry> ah hooray! i'm glad that you enjoyed it. :D
[12:28:37] <Ms2ger> steveklabnik, your final source for the guessing game still prints the secret number
[12:29:52] <BitPuffin> I tried to do 
[12:29:53] <BitPuffin> impl <T> Mul<Vector2D<T>> for T where T: Mul<Output = T> + Copy {
[12:30:13] <BitPuffin> but then I got error: type parameter `T` must be used as the type parameter for some local type (e.g. `MyStruct<T>`); only traits defined in the current crate can be implemented for a type parameter
[12:30:56] <marc_> Concurrency question: I have a thread A that communicates asynchronously with other threads (B, C, D..) via a mailbox (e.g. a channel). A periodically has no work to do because all of B,C&D are busy generating data it needs to continue. Typically you'd have A wait via a mutex, condvar that B,C/D can use to wake A up. Is there a way to do this *without*
[12:30:56] <marc_> deadlocking all threads if A has a bug (e.g. it holds the mutex forever).
[12:31:08] *** Quits: nwin (textual@moz-7jj8l0.pools.vodafone-ip.de) (Quit: Textual IRC Client: www.textualapp.com)
[12:31:13] <BitPuffin> I want my mul to commute basically
[12:31:14] *** Joins: glennpratt (glennpratt@moz-neq2gf.dsl-w.verizon.net)
[12:31:29] <BitPuffin> a * b = b * a 
[12:31:34] <BitPuffin> but a and b and not the same type
[12:31:42] *** Quits: dinfuehr_ (dinfuehr@moz-b31i9i.highway.telekom.at) (Ping timeout: 121 seconds)
[12:31:47] <arielb1> couldn't HashMap at least expose table in some way
[12:31:47] <arielb1> ?
[12:31:59] <arielb1> I can just copy it through
[12:32:04] *** Joins: trigen (MSX@moz-2vj6gq.tweaknet.net)
[12:32:11] <bluss> BitPuffin: that's reasonable but I'm not sure you can. You could write that impl for specific types instead of T, I think?
[12:32:44] <BitPuffin> bluss: I could but that kind of defeats the point of being generic doesn't it?
[12:32:52] *** Joins: zulmin_ (quassel@moz-k4lnkc.epfl.ch)
[12:33:13] *** Quits: zulmin (quassel@moz-i3mt4v.serverprofi24.net) (Ping timeout: 121 seconds)
[12:33:14] *** Joins: dinfuehr_ (dinfuehr@moz-b31i9i.highway.telekom.at)
[12:34:11] <BitPuffin> in order to use Vector2D<f64> the user now has to impl Mul<Vector2D<f64>> for f64 { type Output = Vector2D<f64>; fn mul(self, rhs: Vector2D<f64>) -> Vector2D<f64> { rhs * self } }
[12:34:14] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[12:34:17] <BitPuffin> which is not very ideal
[12:34:35] *** Joins: marcusklaas (marcus@moz-0ol9oe.chello.nl)
[12:34:40] *** Joins: dstrbad (dstrbad@moz-1dn56t.cable.xnet.hr)
[12:35:04] <marcusklaas> Can anyone give me some pointers on why I'm getting this conflicting implementation error?
[12:35:06] <marcusklaas> https://gist.github.com/marcusklaas/2f9f3a7d4ee78d1ee2d2
[12:35:59] *** Joins: duncan1 (paul@moz-dst.ms6.225.173.IP)
[12:36:26] <bluss> marcusklaas: they conflict because it's a potential conflict
[12:36:37] <marcusklaas> TimeSpec does not implement From<&'
[12:36:37] <bluss> not that Timespec implements FromSql, but it could
[12:36:40] *** Quits: tamird (textual@moz-gg3hct.res.rr.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[12:36:49] <bluss> oh I mean From
[12:36:49] <BitPuffin> bluss: and they also have to do that for div :/
[12:36:52] <marcusklaas> it doesn't implement From<&'a str>
[12:36:53] *** Joins: ismaelga (ismaelga@moz-op208d.rev.vodafone.pt)
[12:36:56] *** Quits: Hannibal_Smith (nico@moz-l9aupr.retail.telecomitalia.it) (Quit: Leaving)
[12:37:04] <bluss> marcusklaas: but it could in the future
[12:37:14] <marcusklaas> uh...
[12:37:17] <marcusklaas> yea?
[12:37:22] <bluss> that's the reasoning as far as I understand
[12:37:27] <marcusklaas> weird..
[12:37:30] <marcusklaas> how do I solve this?
[12:38:33] <frankmcsherry> marc_: doesn't a condvar do the right thing there? It is nicer than a mutex in that sense.
[12:38:54] *** Joins: logan_e (logan_e@moz-ltn.qg3.218.73.IP)
[12:38:55] *** Quits: logan_e (logan_e@moz-ltn.qg3.218.73.IP) (Client exited)
[12:38:58] <frankmcsherry> https://doc.rust-lang.org/std/sync/struct.Condvar.html
[12:39:25] <marcusklaas> ??
[12:40:06] <bluss> marcusklaas: I would say if I knew, maybe someone has a good tip
[12:40:20] <marc_> frankmcsherry: yeah but you have to have a mutex with it, right?
[12:40:23] <marcusklaas> bluss: alright, thanks :-)
[12:40:30] <frankmcsherry> marc_: actually, I should say I have no clue if notify acquires the mutex or is smarter.
[12:40:33] <marc_> At least that's how I remember it
[12:40:44] <marc_> So A could do: lock(); sleep(forever); cvar.wait()
[12:40:46] <BitPuffin> actually no div doesn't commute thankfully
[12:40:52] <marc_> B/C/D now block forever
[12:41:03] *** Quits: mindtree (Mitch@moz-356.4j6.134.203.IP) (Ping timeout: 121 seconds)
[12:41:28] <frankmcsherry> marc_: does that happen? sane condvar implementations wouldn't make notify block; not sure what Rust's does.
[12:42:11] *** Joins: nico (nico@moz-dalf30.dip0.t-ipconnect.de)
[12:43:13] <frankmcsherry> marc_: I'm hopeful that it doesn't block. there is language in the docs about spurious wake-ups, and those (usually) only happen because the signaling side is not tightly synchonized.
[12:43:56] *** Quits: duncan (paul@moz-dst.ms6.225.173.IP) (Connection closed)
[12:44:10] <marc_> Today there is nothing, so yeah it doesn't happen :), but I'm just thinking about risks in a design
[12:44:29] <marc_> Basically, B/C/D have other "clients", so I don't want a bug in A to impact the other clients
[12:44:36] <mkpankov> eh, what's this?     let &(ref lock, ref cvar) = &*pair2;
[12:44:49] <mkpankov> & and then ref? I'm confused
[12:45:02] *** Joins: Ven (Ven@moz-vrb.ddg.5.163.IP)
[12:45:02] <frankmcsherry> mkpankov: those are super important!
[12:45:18] *** Quits: ismaelga (ismaelga@moz-op208d.rev.vodafone.pt) (Connection closed)
[12:45:21] <marc_> e.g. A1 and A2 are both sending them work, A1 stalls while holding the lock, B/C/D complete work destined for A1 and stall, A2's work is starved out
[12:45:33] <mkpankov> what does & do in pattern matching?
[12:46:05] *** AutomatedTester is now known as AutomatedTester|AFK
[12:46:08] <bluss> mkpankov: it should have the same effect as let lock = &pair2.0; let cvar = &pair2.1;
[12:46:21] <marc_> mkpankov: it takes the memory address AFAIK
[12:46:24] <bluss> the latter just has more deref magic because it uses accessors through .
[12:46:31] *** Joins: futile (felix@moz-cmcd12.unity-media.net)
[12:46:44] <bluss> mkpankov: & in a pattern undresses a reference
[12:46:45] <mkpankov> couldn't we write this line as let (ref lock, ref cvar) = *pair; ?
[12:46:51] <bluss> just like (, ) undresses a tuple
[12:47:14] <frankmcsherry> marc_: I'm pretty sure the mutex won't block notify. The working thread holds the MutexGuard while it works (and returns it to the CondVar to wait again), and if you blocked notifying someone running, that would be deranged.
[12:47:24] *** Quits: Ven (Ven@moz-vrb.ddg.5.163.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[12:47:28] <frankmcsherry> mkpankov: that would move out of pair.
[12:47:28] <bluss> mkpankov: I think so. Not sure if &* is needed to force deref first
[12:47:42] *** Quits: dinfuehr_ (dinfuehr@moz-b31i9i.highway.telekom.at) (Connection closed)
[12:47:42] <bluss> frankmcsherry: patterns don't move out unless they do
[12:47:55] <bluss> you know :)
[12:48:02] <frankmcsherry> bluss: oh geez, mine do all the time.
[12:48:03] *** Joins: dinfuehr_ (dinfuehr@moz-b31i9i.highway.telekom.at)
[12:48:07] <mkpankov> bluss: but we move out of pair on the right by dereferencing, no?
[12:48:33] <bluss> dereferencing doesn't necessarily move out
[12:48:47] <bluss> &* takes reference to what's inside that's all
[12:48:48] *** Quits: SneakySnake (nya@moz-i9is4u.pool.telekom.hu) (Connection closed)
[12:48:55] *** Joins: EricSink (Mibbit@moz-tqsar7.il.comcast.net)
[12:49:07] <mkpankov> &* - yes, I'm talking about * in stripped-down version
[12:49:19] <mkpankov>  let (ref lock, ref cvar) = *pair;
[12:49:20] <mkpankov> ^
[12:49:23] *** Joins: IPoAC (franklin@moz-uodqn2.univ-tlse1.fr)
[12:49:41] <mkpankov> (assuming it would work; apparently it wouldn't)
[12:49:45] <bluss> that doesn't move out of pai
[12:49:46] <bluss> r
[12:50:27] <mkpankov> so why take a reference to undress it in a match?..
[12:50:42] <mkpankov> seems I have to play with this code...
[12:50:45] <EricSink> (Just wanted to inject thanks to talchas for the help yesterday.)
[12:50:46] *** Quits: fabiand (fabiand@moz-a37gg0.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[12:50:50] <bluss> playbot: let pair = ("hi".to_string(), 2);  let rpair = &pair;  let (ref s, _) = *rpair; print!("{:?}", s)
[12:50:52] -playbot- "hi"()
[12:51:09] *** Joins: errordeveloper (ilya@moz-8jq.ge6.157.37.IP)
[12:51:21] *** Quits: EricSink (Mibbit@moz-tqsar7.il.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[12:51:47] <bluss> oh that doesn't properly demonstrate we don't move out
[12:51:48] <mkpankov> now I wonder why are those parens there
[12:51:53] *** Quits: Wild_Cat (Max@moz-fa8mvt.dsl.teksavvy.com) (Connection closed)
[12:52:00] <bluss> playbot: let pair = ("hi".to_string(), 2);  { let rpair = &pair;  let (ref s, _) = *rpair;  } pair
[12:52:03] -playbot- ("hi", 2)
[12:52:03] <mkpankov> too many questions I guess :p
[12:52:03] <bluss> that does
[12:52:05] *** Quits: dinfuehr_ (dinfuehr@moz-b31i9i.highway.telekom.at) (Ping timeout: 121 seconds)
[12:52:40] <mkpankov> bluss: thanks
[12:53:29] *** Joins: Ven (Ven@moz-vrb.ddg.5.163.IP)
[12:53:41] *** Joins: espadrine_ (tyl@moz-qfr4fg.abo.wanadoo.fr)
[12:53:50] *** Quits: c63 (Mibbit@moz-skp.pco.222.149.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:55:48] *** Joins: kieran (kieran@moz-c5gk5j.ihug.co.nz)
[12:56:01] *** Joins: tkellen (tkellen@moz-m4s.k2s.232.50.IP)
[12:56:49] *** Joins: oceanwhit (christianwh@moz-a38b1m.ca.comcast.net)
[12:57:34] *** Quits: Ven (Ven@moz-vrb.ddg.5.163.IP) (Ping timeout: 121 seconds)
[12:57:38] <dwrensha> heh, I just did a silly thing. I wanted to contruct a Vec<Rc<RefCell<Option<T>>>>, and I did it like this: `::std::iter::repeat(Rc::new(RefCell::new(None))).take(6).collect();`
[12:58:03] *** Quits: arBmind (Andreas@moz-or4srb.adsl.alicedsl.de) (Connection closed)
[12:58:46] <dwrensha> The result was not what I wanted!
[12:59:24] *** Joins: ismaelga (ismaelga@moz-lmk.cu2.251.188.IP)
[12:59:35] *** Joins: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net)
[12:59:36] *** Joins: JagaJaga (JagaJaga@moz-ua8.hhl.62.178.IP)
[12:59:42] <bluss> it's memory efficient this way
[12:59:53] <mkpankov> speaking of that example with  let &(ref lock, ref cvar) = &*pair;, it does indeed work w/o & /cc bluss
[13:00:00] *** Quits: kieran (kieran@moz-c5gk5j.ihug.co.nz) (Ping timeout: 121 seconds)
[13:00:10] <mkpankov> looks like a remnant of older ages :p
[13:00:11] *** Quits: sp0 (seth@moz-906uqd.internode.on.net) (Quit: Lost terminal)
[13:00:18] *** Joins: jviereck (Adium@moz-v77rgs.ethz.ch)
[13:00:54] *** Joins: idegen (greg@moz-9c4nle.or.frontiernet.net)
[13:00:56] *** Quits: oceanwhit (christianwh@moz-a38b1m.ca.comcast.net) (Ping timeout: 121 seconds)
[13:01:30] *** Quits: errordeveloper (ilya@moz-8jq.ge6.157.37.IP) (Ping timeout: 121 seconds)
[13:02:35] *** Joins: Gamecubic (cubic@moz-bglmk5.mc.videotron.ca)
[13:02:37] *** Quits: ismaelga (ismaelga@moz-lmk.cu2.251.188.IP) (Connection closed)
[13:02:51] *** Joins: fabiand (fabiand@moz-ofln80.dip0.t-ipconnect.de)
[13:03:12] *** Joins: m104ru (m104ru@moz-sje.6lq.205.109.IP)
[13:03:22] *** Joins: ismaelga (ismaelga@moz-lmk.cu2.251.188.IP)
[13:03:35] *** Joins: v21 (vee@moz-07pghd.asianet.co.th)
[13:03:53] *** Joins: tamird (textual@moz-lje.m54.130.157.IP)
[13:04:13] *** AutomatedTester|AFK is now known as AutomatedTester
[13:04:39] *** Quits: jviereck (Adium@moz-v77rgs.ethz.ch) (Quit: Leaving.)
[13:05:13] *** Joins: reedlepee (Mibbit@moz-tfk.16b.76.203.IP)
[13:05:19] <frankmcsherry> dwrensha: I did that once too. :(
[13:05:38] <frankmcsherry> vec![Rc::new(RefCell::new(MyThing))); 256];
[13:06:10] <frankmcsherry> in retrospect, obvious self-fail.
[13:06:21] <dwrensha> ah, so I guess that using the vec! macro like that is equivalent to what I wrote?
[13:06:26] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[13:06:34] <dwrensha> i.e. it implicitly uses clone()
[13:06:50] *** Quits: reedlepee (Mibbit@moz-tfk.16b.76.203.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:06:51] *** Joins: dinfuehr_ (dinfuehr@moz-b31i9i.highway.telekom.at)
[13:07:12] *** Joins: areski (areski@moz-v09.heo.57.195.IP)
[13:07:48] *** Quits: Gabriel_7 (Gabriel@moz-2vj54m.mtgr.92aj.0e35.2a01.IP) (Ping timeout: 121 seconds)
[13:07:49] <arielb1> I want a proper HashInterner
[13:07:58] *** Joins: gonzaloserrano (Adium@moz-1nv.3t7.97.62.IP)
[13:08:10] <arielb1> should I write an RFC?
[13:08:38] *** Joins: dzyp (hiatt@moz-engsmj.web-filings.isupark.net)
[13:08:46] *** Joins: Gabriel_7 (Gabriel@moz-2vj54m.mtgr.92aj.0e35.2a01.IP)
[13:08:56] *** Quits: poorman (poorman@moz-sdl0oq.res.rr.com) (Ping timeout: 121 seconds)
[13:09:20] *** Quits: dinfuehr_ (dinfuehr@moz-b31i9i.highway.telekom.at) (Connection closed)
[13:09:31] *** Joins: logan_e (logan_e@moz-ltn.qg3.218.73.IP)
[13:09:38] <frankmcsherry> arielb1: there are a few random posts here/there about needing one.
[13:09:51] *** Joins: poorman (poorman@moz-sdl0oq.res.rr.com)
[13:10:02] <frankmcsherry> arielb1: I need one, carllerche needs one, hard to get momentum behind it.
[13:10:28] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Ping timeout: 121 seconds)
[13:11:17] *** Quits: m104ru (m104ru@moz-sje.6lq.205.109.IP) (Ping timeout: 121 seconds)
[13:11:30] *** Quits: areski (areski@moz-v09.heo.57.195.IP) (Ping timeout: 121 seconds)
[13:12:25] *** Quits: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net) (Client exited)
[13:12:59] <arielb1> frankmcsherry: could you open a thread on discuss?
[13:13:03] <arielb1> *internals
[13:13:11] <arielb1> first
[13:13:29] *** Quits: panicbit (panicbit@moz-r4ks4s.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[13:13:40] <aatch> What do you mean by "HashInterner" and why would it require an RFC?
[13:13:51] <frankmcsherry> arielb1: check this one out; maybe similar? https://internals.rust-lang.org/t/maps-sets-and-the-value-of-keys/532/7
[13:14:02] <bluss> dwrensha: yes it uses clone
[13:14:14] <arielb1> Rust spends 8%-ish of no-opt time allocating and deallocating Subst when folding
[13:14:18] *** Joins: happy-dude_ (uid62780@moz-jt3517.charlton.irccloud.com)
[13:14:33] <arielb1> that's, well, suboptimal
[13:14:37] *** Quits: RC9 (RCIX@moz-vnmep7.ph.cox.net) (Ping timeout: 121 seconds)
[13:14:50] <arielb1> I mean, allocating and deallocating the VecPerParamSpace
[13:15:16] *** Quits: raph (raph@moz-o75.fg7.77.192.IP) (Quit: Leaving.)
[13:15:23] *** Joins: samnmax (samnmax@moz-1vk.aq9.27.72.IP)
[13:15:31] *** Quits: dstrbad (dstrbad@moz-1dn56t.cable.xnet.hr) (A TLS packet with unexpected length was received.)
[13:16:27] *** Quits: Gabriel_7 (Gabriel@moz-2vj54m.mtgr.92aj.0e35.2a01.IP) (Ping timeout: 121 seconds)
[13:18:19] <bluss> arielb1: ah, but rustc is optimized but while compiling with no opt
[13:18:36] <bluss> arielb1: how do we find something to improve though? Getting into rustc is tough :)
[13:19:51] <arielb1> bluss: ?
[13:20:15] *** Quits: ptalbot (ptalbot@moz-1gn7gb.eu0n.jcdj.0660.2001.IP) (Ping timeout: 121 seconds)
[13:20:22] <arielb1> I'm talking about an optimized rustc compiling with -C opt-level=0
[13:20:25] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[13:20:30] <bluss> right
[13:20:31] *** Quits: nyx (nyx@moz-ivelpd.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[13:20:38] *** Joins: duncan (paul@moz-dst.ms6.225.173.IP)
[13:20:59] <arielb1> we spend 8% of time allocating and deallocating Subst when type-folding
[13:21:18] <arielb1> I mean, in mk_subst
[13:21:18] <waka> bluss: If you want to contribute, check the issues list, there's plenty of things to do
[13:21:20] <arielb1> that's a little wasteful I think
[13:21:34] <bluss> arielb1: do we know how to improve it
[13:21:45] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[13:21:57] <arielb1> bluss: substs are interned
[13:22:01] <bluss> waka: well it might be I'm not so good at compilers. I've never really managed to fix things I wanted in rustc
[13:22:12] <bluss> apart from minor fixes
[13:22:17] *** Joins: dstrbad (dstrbad@moz-1dn56t.cable.xnet.hr)
[13:22:27] <arielb1> that's why most of the Subst-s are dropped
[13:22:51] <arielb1> but we don't need to allocate if we are going to drop the Subst because it is already interned
[13:24:02] *** Joins: Guest74 (textual@moz-lmfinb.fios.verizon.net)
[13:24:12] *** Joins: skade (skade@moz-u1j.1t9.225.62.IP)
[13:24:33] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[13:24:36] <frankmcsherry> arielb1: do you need a new HashMap for this, or just a HashMap<Subst,Subst> to do the interning? 
[13:25:18] <aatch> All we really need is scratch space for constructing substitutions.
[13:25:51] <bluss> the interning already exists
[13:26:14] <aatch> You can't get around the construction of them, since we can't know if it's got an interned equivalent without knowing what "it" actually is.
[13:26:37] <bluss> aatch: ah so this is where find_equiv comes in?
[13:26:44] <frankmcsherry> aatch: right, so. you stage them in scratch space (as noted), then try a .get() to see if you have it already. right?
[13:26:46] *** Quits: tkellen (tkellen@moz-m4s.k2s.232.50.IP) (Client exited)
[13:27:03] *** Quits: duncan (paul@moz-dst.ms6.225.173.IP) (Quit: Leaving.)
[13:27:31] *** Joins: woboats (tatterdemal@moz-a0dnkb.ca.comcast.net)
[13:28:14] *** Joins: agile (mike@moz-m71dqt.rcsntx.sbcglobal.net)
[13:28:44] <arielb1> frankmcsherry: sure
[13:28:45] <aatch> frankmcsherry, yeah. To me, the process is that you try to construct the substitution, which allocates if needed, if it's unique, then the allocation is stored in the interner, if not, the memory is held for the next substitution constructed.
[13:28:49] <frankmcsherry> my personal experience is that you need a pretty big hash table (or expensive Eq) before it beats an unordered list. Rust's HashMaps are pretty .. robust...
[13:29:03] <arielb1> frankmcsherry: list size ~ 1M
[13:29:06] <arielb1> or maybe 100k
[13:29:11] <frankmcsherry> ew. you win this round.
[13:29:14] *** Joins: raph (raph@moz-ga2.780.198.207.IP)
[13:29:30] <bluss> don't want *more* O(n²) ness in rustc
[13:29:59] *** Joins: joel2 (joel@moz-6ampnk.gtri.gatech.edu)
[13:30:51] <arielb1> aatch: the fold is recursive, so we should allocate it on the stack
[13:30:53] <arielb1> same idea through
[13:30:55] <frankmcsherry> I guess I don't know enough about Substs to know if it is easy to pool the backing resources. I've done it for Vec<Vec<Vec<...>>> stuff though, in the columnarization work.
[13:31:10] *** Quits: fabiand (fabiand@moz-ofln80.dip0.t-ipconnect.de) (Quit: Verlassend)
[13:31:16] <arielb1> frankmcsherry: there are 2 arrays
[13:31:24] <arielb1> most of the time of size <8
[13:32:17] *** Joins: mahdi (mahdi@moz-hvj.ahp.244.151.IP)
[13:32:44] <frankmcsherry> I've totally meant to library-up the part of columnar that acts as a recycling bin. For a bunch of types you can have a strongly typed Bin.recycle(elem: T) that re-purposes the heap backing memory. Couldn't sort out the re-alloc interface, though.
[13:32:51] *** Quits: logan_e (logan_e@moz-ltn.qg3.218.73.IP) (Client exited)
[13:33:51] *** Quits: Stylez (Mibbit@moz-60nu73.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[13:34:50] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[13:35:13] *** Quits: qrlpx (quassel@moz-n7t.3nb.211.95.IP) (Ping timeout: 121 seconds)
[13:35:53] *** Joins: qrlpx (quassel@moz-kdqjm3.dip0.t-ipconnect.de)
[13:35:56] *** Joins: e_svedang (erik@moz-qa19e9.eduroam.gu.se)
[13:36:03] *** Quits: arielb1 (Mibbit@moz-cmi.jfj.114.192.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:36:05] <bluss> waka: oh what I actually meant was talking specifically about performance. Wondering about what to specifically fix in rustc with that in mind
[13:36:18] *** Quits: mahdi (mahdi@moz-hvj.ahp.244.151.IP) (Ping timeout: 121 seconds)
[13:36:28] *** Quits: raph (raph@moz-ga2.780.198.207.IP) (Quit: Leaving.)
[13:37:20] *** Joins: errordeveloper (ilya@moz-8jq.ge6.157.37.IP)
[13:37:50] *** Quits: ismaelga (ismaelga@moz-lmk.cu2.251.188.IP) (Connection closed)
[13:37:53] *** Joins: ismaelga (ismaelga@moz-lmk.cu2.251.188.IP)
[13:38:13] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[13:38:46] <Mutabah> Is there a reason why #[allow(improper_ctypes)] doesn't work on a function taking usize?
[13:38:53] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[13:39:58] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[13:39:58] *** ChanServ sets mode: +o jdm
[13:40:05] *** Quits: ismaelga (ismaelga@moz-lmk.cu2.251.188.IP) (Connection closed)
[13:40:29] *** Quits: idegen (greg@moz-9c4nle.or.frontiernet.net) (Connection closed)
[13:40:37] *** Joins: nyx (nyx@moz-7o34ff.albyny.csvoip.net)
[13:41:00] *** Joins: marsel (user@moz-76c.4gi.180.94.IP)
[13:41:10] *** Joins: vidot_j_ (vidot_j@moz-oo4.ci3.5.163.IP)
[13:41:36] *** Quits: akiss (akiss@moz-43lncs.uio.no) (Ping timeout: 121 seconds)
[13:42:00] *** Joins: idegen (greg@moz-9c4nle.or.frontiernet.net)
[13:42:01] *** zz_kimundi is now known as kimundi
[13:42:25] *** Quits: lyc (lyc@moz-jft.nr8.226.207.IP) (Ping timeout: 121 seconds)
[13:42:32] *** Joins: akiss (akiss@moz-43lncs.uio.no)
[13:43:34] *** Quits: andresv (textual@moz-m48tte.sta.estpak.ee) (Quit: My Mac has gone to sleep. ZZZzzz…)
[13:43:41] *** Quits: LRN (LRN@moz-63ipbh.nationalcablenetworks.ru) (Quit: Leaving.)
[13:43:42] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[13:44:31] *** Joins: LRN (LRN@moz-63ipbh.nationalcablenetworks.ru)
[13:45:00] *** Quits: woboats (tatterdemal@moz-a0dnkb.ca.comcast.net) (Ping timeout: 121 seconds)
[13:45:12] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (Quit: Leaving)
[13:45:36] *** Joins: tkellen (tkellen@moz-nt9.hak.245.50.IP)
[13:45:59] *** Joins: minot2 (kkus@moz-baj4jj.74.srtnet.com)
[13:47:07] <GBGamer> Mutabah: what is "improper_ctypes"?
[13:48:14] <Mutabah> GBGamer: A lint that fires when a type isn't properly defined for use with C code
[13:48:16] <Mutabah> (well, for FFI)
[13:48:58] <Mutabah> However, usize is defined as being sizeof(ptr), and is the correct type for places where C would use size_t
[13:49:19] *** Joins: mkpankov` (mkpankov@moz-3ln.70f.16.195.IP)
[13:50:23] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[13:50:32] *** Quits: CustosLimen (CustosLimen@moz-43o.etd.160.41.IP) (Quit: Leaving)
[13:52:46] *** Joins: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net)
[13:53:20] *** Quits: jaen (jaen@moz-ifmik2.copit.pl) (Connection closed)
[13:53:39] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[13:54:06] *** Joins: jophish (jophish@moz-epocft.broadband.tesco.net)
[13:54:16] <GBGamer> Mutabah: but that's not true
[13:54:17] *** Quits: jml (jml@moz-mqpurn.178.in-addr.arpa) (Quit: ZNC - http://znc.in)
[13:54:28] *** Quits: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net) (Client exited)
[13:54:28] <GBGamer> size_t != uintptr_t in all cases
[13:54:54] <GBGamer> A usize == uintptr_t, not size_t
[13:54:54] <Mutabah> ... touche
[13:55:22] <GBGamer> :D
[13:55:28] <Mutabah> anyway, the context is a single register param, and within x86_64 code, I should be able to suppress that warning
[13:55:49] <GBGamer> why not just use u64, if it's on x86_64?
[13:56:03] <Mutabah> Interoperability
[13:56:09] <Mutabah> (it gets used as a usize)
[13:57:13] <GBGamer> is it a C library you have control over?
[13:57:29] <Mutabah> yes
[13:57:40] <GBGamer> you could have that take a uintptr_t?
[13:57:55] <Mutabah> (well, two cases, first is calling a memcpy I wrote, the second is ACPICA)
[13:58:01] *** Joins: vks (quassel@moz-b54qc9.fias.uni-frankfurt.de)
[13:58:09] *** Quits: Guest74 (textual@moz-lmfinb.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[13:58:11] <Mutabah> I _could_ use u32 for the acpica code... but usize fits far better (and fits the ABI)
[13:58:16] <GBGamer> wait, what are you actually doing?
[13:58:24] *** Joins: winterdawn (winterdawn@moz-c6q7p2.dip0.t-ipconnect.de)
[13:58:25] <Mutabah> kernel
[13:58:57] *** Joins: jviereck (Adium@moz-ml99gd.ethz.ch)
[13:59:16] *** Quits: poorman (poorman@moz-sdl0oq.res.rr.com) (Connection closed)
[13:59:26] <GBGamer> you could implement the memcpy in rust...
[13:59:40] <Mutabah> still doesn't change the acpica case
[13:59:44] <GBGamer> I can't think of anything otherwise
[13:59:52] *** Joins: fabiand (fabiand@moz-gg1f1p.dip0.t-ipconnect.de)
[13:59:56] <GBGamer> hrmm
[14:00:03] <GBGamer> that is a very difficult thing
[14:00:05] *** Quits: Roba (Mibbit@moz-n05.ctp.31.141.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:00:22] *** Quits: pnkfelix (pnkfelix@moz-71m.3nd.202.89.IP) (Quit: rcirc on GNU Emacs 24.5.1)
[14:00:35] <GBGamer> maybe create a rust wrapper around acpcia
[14:00:52] <Mutabah> that's pretty much what this is
[14:00:57] * Mutabah just leaves the warning there
[14:01:06] *** Joins: hjr3 (hradtke@moz-e235ok.fios.verizon.net)
[14:01:08] *** Joins: pnkfelix (pnkfelix@moz-6v5.3nd.202.89.IP)
[14:01:08] *** ChanServ sets mode: +o pnkfelix
[14:01:20] <Mutabah> It bothers me that I can't tell rustc to be quiet about this case
[14:01:33] <GBGamer> you could convert inside the wrapper functions
[14:01:50] *** Quits: alonlevy_ (alon@moz-ofv.tgc.142.37.IP) (Ping timeout: 121 seconds)
[14:01:52] <GBGamer> from a usize to a size_t
[14:02:26] <Mutabah> Meh, this works
[14:02:35] <GBGamer> so lazy :P
[14:02:39] <Mutabah> (flagging the extern block works)
[14:02:59] <Mutabah> Yes, too lazy to alter code that would have to have casts everywhere
[14:03:08] <GBGamer> :P
[14:03:14] *** Joins: proc (proc@moz-qkgpmr.dip0.t-ipconnect.de)
[14:03:16] <GBGamer> I keed
[14:03:23] <Mutabah> (it's 10PM, I'm too lazy to change working code just to please a pedantic compiler I know better than)
[14:03:27] *** Joins: dinfuehr_ (dinfuehr@moz-b31i9i.highway.telekom.at)
[14:03:53] <proc> Mutabah: "I know better than" is always a good excuse ;)
[14:04:06] <GBGamer> it is trying to protect you from very old systems which no one uses!
[14:04:14] <Mutabah> proc: Well, in this case I know that ACPI_SIZE is known to be a pointer width
[14:04:24] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[14:04:25] <Mutabah> hence, use usize for ti :)
[14:04:43] *** Quits: dzhulk (Adium@moz-lra.hki.140.95.IP) (Quit: Leaving.)
[14:04:53] *** Joins: kocka (Mibbit@moz-tt0cup.office.bol.com)
[14:04:54] <aatch> Mutabah, not being able to silence the warning is likely a bug. File an issue if there isn't already one open about it.
[14:05:00] <proc> Mutabah: then better go'n sleep & crash the compiler in your dreams
[14:05:13] <proc> there you're having a higher win chance ;)
[14:05:22] <Mutabah> aatch: it slicenced when the attribute was on the wrapping 'extern' block
[14:05:30] <Mutabah> aatch: Not sure if a bug or a quirk
[14:05:34] *** Joins: JosiahOne|Work (Thunderbird@moz-f2hp7h.biz.rr.com)
[14:05:37] *** Joins: jml (jml@moz-mqpurn.178.in-addr.arpa)
[14:06:05] <aatch> Mutabah, good point. Don't know enough about lints to say though.
[14:06:07] *** Joins: Gabriel_7 (Gabriel@moz-2vj54m.mtgr.92aj.0e35.2a01.IP)
[14:06:45] *** Quits: jviereck (Adium@moz-ml99gd.ethz.ch) (Quit: Leaving.)
[14:06:46] *** Joins: jviereck (Adium@moz-jkmt1p.ethz.ch)
[14:06:59] <Mutabah> (yay! Down to 5 distinct warnings in my kernel)
[14:07:09] *** Quits: Quanttek (quassel@moz-25k96c.6fkd.dvrb.8108.2a02.IP) (Ping timeout: 121 seconds)
[14:08:30] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[14:08:40] *** Joins: SneakySnake (nya@moz-i9is4u.pool.telekom.hu)
[14:09:05] *** Joins: d_rezzer (chatzilla@moz-t0fmuj.hfc.comcastbusiness.net)
[14:09:52] *** Joins: dfinninger (dfinninger@moz-6a9v7n.res.rr.com)
[14:11:59] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Quit: Leaving)
[14:12:31] <GBGamer> Mutabah: where is this kernel? I feel like reading some source code
[14:12:34] *** Joins: oceanwhit (christianwh@moz-a38b1m.ca.comcast.net)
[14:12:43] <Mutabah> GBGamer: http://github.com/thepowersgang/rust_os/
[14:12:54] <GBGamer> dannke
[14:14:30] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[14:14:36] *** Quits: munksgaard (munksgaard@moz-1i4.hq0.225.130.IP) (Quit: Lost terminal)
[14:14:43] *** Quits: dfinninger (dfinninger@moz-6a9v7n.res.rr.com) (Connection closed)
[14:15:20] *** Quits: Gabriel_7 (Gabriel@moz-2vj54m.mtgr.92aj.0e35.2a01.IP) (Ping timeout: 121 seconds)
[14:15:57] *** Joins: munksgaard (munksgaard@moz-1i4.hq0.225.130.IP)
[14:16:12] *** Quits: ktakv (ktakv@moz-2igq4u.1984.is) (Quit: quit)
[14:16:41] *** Quits: oceanwhit (christianwh@moz-a38b1m.ca.comcast.net) (Ping timeout: 121 seconds)
[14:16:49] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Connection closed)
[14:16:53] *** Joins: kieran (kieran@moz-c5gk5j.ihug.co.nz)
[14:17:03] *** Joins: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se)
[14:17:20] <Mutabah> GBGamer: It is a kernel, so beware your sanity
[14:17:32] *** Joins: munksgaa1d (munksgaard@moz-1i4.hq0.225.130.IP)
[14:17:35] *** Quits: munksgaa1d (munksgaard@moz-1i4.hq0.225.130.IP) (Quit: leaving)
[14:17:36] <proc> could eat your kids
[14:17:55] <tOkeshu> Mutabah: is it so bad?
[14:18:15] <Mutabah> tOkeshu: Nah, just a general comment on kernels being big confusing projects
[14:18:46] <proc> (and that you prob. shouldn't boot it on your running os, more damage then a program could cause ;) )
[14:18:51] *** Joins: pylos (mmcdole@moz-qt1i7j.members.linode.com)
[14:19:07] <Mutabah> proc: No disk write... yet
[14:19:15] <proc> Mutabah: :D
[14:19:27] *** Quits: winterdawn (winterdawn@moz-c6q7p2.dip0.t-ipconnect.de) (Quit: Leaving)
[14:20:55] *** Quits: kieran (kieran@moz-c5gk5j.ihug.co.nz) (Ping timeout: 121 seconds)
[14:21:06] *** Joins: dschatzberg (dschatz@moz-nk1clf.bu.edu)
[14:21:15] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[14:21:17] *** Joins: ktakv (ktakv@moz-2igq4u.1984.is)
[14:21:19] <GBGamer> you say to me, after my laptop wiped itself :'(
[14:21:28] *** Joins: Kynes (Kynes@moz-j2us35.mit.edu)
[14:21:38] <GBGamer> even normal kernels can destroy stuff
[14:22:05] <GBGamer> (sorry, just felt like complaining)
[14:22:13] <Mutabah> :D
[14:22:21] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[14:24:22] <GBGamer> I lost three days of Let's Build a Compiler (in Rust/x86) :/
[14:25:23] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[14:25:32] *** Joins: larhat (Adium@moz-1dkvl5.81.in-addr.arpa)
[14:25:33] *** Joins: garming (garming@moz-5uejkm.xtra.co.nz)
[14:25:41] <GBGamer> And that's why... you always push your commits
[14:26:20] <garming> anyone know how to solve error: unresolved import `std::prelude::v1::*`. Maybe a missing `extern crate std`?
[14:26:47] <pylos> I'm looking through the docs, and I see the following function signature for std::fs::File's Open: fn open<P: AsRef<Path>>(path: P) -> Result<File>
[14:27:11] <pylos> I was confused by seeing people pass str's into File::Open, think that it only took Path objects
[14:27:34] <pylos> Can someone walk me through that signature?  Open takes a type, P, which has the trait AsRef<Path>, is that right?
[14:27:39] *** Quits: fkaa (tundmatu@moz-501od2.business.telia.com) (RecvQ exceeded)
[14:27:49] *** Joins: fkaa (tundmatu@moz-501od2.business.telia.com)
[14:28:03] <Levans> pylos : yes
[14:28:34] <pylos> So, str implements AsRef<Path>?  The string type knows how to convert itself to Path objects?
[14:29:27] <proc> GBGamer: I've had a defect ram which wiped my complete MFT
[14:29:28] *** Joins: ismaelga (ismaelga@moz-0r94oo.cpe.netcabo.pt)
[14:29:56] <Levans> pylos : yes, you can see a list of types implementing AsRef<Path> here : http://doc.rust-lang.org/std/convert/trait.AsRef.html
[14:30:01] <Levans> at the bottom of the page
[14:30:26] *** Quits: Ms2ger (Ms2ger@moz-t9m.9ho.190.193.IP) (Ping timeout: 121 seconds)
[14:31:17] *** Joins: agarie (agarie@moz-coa.g2h.32.177.IP)
[14:32:27] <pylos> Levans: thanks.. my rust documentation in Dash must be old.. I didn't see any mention of the trait AsRef<Path> when I looked up the str type
[14:32:56] *** Joins: smohan_ (smohan@moz-m6j.f0d.244.121.IP)
[14:33:18] *** Joins: CustosLimen (CustosLimen@moz-43o.etd.160.41.IP)
[14:33:56] <Levans> pylos : these things have been moving quite fast over the last months, that's probably why
[14:34:00] *** JosiahOne|Work is now known as JosiahOne
[14:34:28] *** Quits: mark_edward (mark@moz-dg4mrp.in.comcast.net) (Connection closed)
[14:34:43] *** Quits: larhat (Adium@moz-1dkvl5.81.in-addr.arpa) (Quit: Leaving.)
[14:34:47] *** Joins: scialex (scialex@moz-j5mi8i.cs.brown.edu)
[14:34:59] <JosiahOne> So if I have a bunch of structures with identical fields, is there a way to create a parent struct with them and have the others structs inherit those fields somehow? (Like you can do with traits)
[14:35:21] <steveklabnik> JosiahOne: there's no struct inheritance in rust
[14:35:34] <JosiahOne> Hrm.
[14:35:35] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[14:35:48] *** Joins: larhat (Adium@moz-1dkvl5.81.in-addr.arpa)
[14:35:49] <nathan7> you can cheat with Deref though
[14:36:06] *** Quits: smohan (smohan@moz-m6j.f0d.244.121.IP) (Ping timeout: 121 seconds)
[14:36:09] <steveklabnik> yeah but that's certainly a cheat
[14:36:10] *** Quits: larhat (Adium@moz-1dkvl5.81.in-addr.arpa) (Quit: Leaving.)
[14:36:46] <bluss> well it could be a good idea but it's not scalable
[14:36:52] <bluss> (can only deref to one type)
[14:37:09] <JosiahOne> Hmm yeah, that's not worth it I think.
[14:37:15] *** Joins: colinsurprenant (colin@moz-rmn4e2.169.electronicbox.net)
[14:37:27] <JosiahOne> Just a shame I have to duplicate fields so many times.
[14:37:30] <bluss> there are benefits to splitting out common sub structs anyway though
[14:37:44] *** Joins: lenstr_ (lenstr@moz-h5k.vju.25.171.IP)
[14:37:49] *** Quits: colinsurprenant (colin@moz-rmn4e2.169.electronicbox.net) (Client exited)
[14:39:38] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[14:39:44] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[14:39:53] *** Quits: sonder (chatzilla@moz-nt8r49.idi.ntnu.no) (Ping timeout: 121 seconds)
[14:40:23] *** Quits: lenstr (lenstr@moz-ca8.vju.25.171.IP) (Ping timeout: 121 seconds)
[14:40:33] *** Joins: colinsurprenant (colin@moz-rmn4e2.169.electronicbox.net)
[14:41:36] *** Joins: tadh (quassel@moz-88tk3f.res.rr.com)
[14:42:46] *** Quits: munksgaard (munksgaard@moz-1i4.hq0.225.130.IP) (Ping timeout: 121 seconds)
[14:43:00] <frankmcsherry> ok, my recycler is now in effect!
[14:43:19] <frankmcsherry> allocating Vec<Vec<String>> repeatedly: test allocate_vec_vec_str ... bench:       894 ns/iter (+/- 309)
[14:43:29] <frankmcsherry> same thing with tech: st recycler_vec_vec_str ... bench:       211 ns/iter (+/- 29)
[14:43:34] <proc> vecception
[14:43:46] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Ping timeout: 121 seconds)
[14:44:35] *** Joins: Ms2ger (Ms2ger@moz-t9m.9ho.190.193.IP)
[14:44:51] *** Joins: Guest74 (textual@moz-il1.n6s.204.65.IP)
[14:45:52] <frankmcsherry> JosiahOne: http://en.wikipedia.org/wiki/Composition_over_inheritance
[14:45:55] <FreeFull> Nested Vecs like that are best to be avoided anyway, if possible
[14:46:17] <frankmcsherry> FreeFull: yup, and when not possible, better to go 4x faster.
[14:46:43] *** Joins: amitp (amitp@moz-plc8ig.ca.comcast.net)
[14:46:44] <frankmcsherry> JosiahOne: I think the "Rustic" pattern would be to put those fields in a struct and have each of your struct contain one of these.
[14:46:55] <frankmcsherry> JosiahOne: you can even call the member "base"!
[14:47:23] *** Joins: envi_u (envi@moz-ih5.olo.169.121.IP)
[14:48:45] <ehiggs> JosiahOne: I think you can do this... and people will explain to me why im wrong if im wrong:
[14:48:58] *** Quits: jarrednicholls (uid19542@moz-s0evcl.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[14:49:06] <bluss> frankmcsherry: what does the bench do? (How much do you allocate)
[14:49:35] <ehiggs> trait Base { type Delegate; ... some functions ... } struct BaseData { ... } struct ActualType{ bd: BaseData, ...}
[14:49:37] *** Joins: brycefisher (chatzilla@moz-2p5.i2o.220.104.IP)
[14:49:38] <frankmcsherry> bluss: not much: http://is.gd/dLxuLJ
[14:50:01] *** Joins: killercup (killercup@moz-qj5qhi.dip0.t-ipconnect.de)
[14:50:05] <ehiggs> impl Base for ActualType{ Delegate=BaseData } 
[14:50:20] <bluss> frankmcsherry: does it speed up by just using "test".to_owned() over format!() ?
[14:50:21] <ehiggs> er, or maybe some function in Base trait to find the delegate object
[14:50:30] <frankmcsherry> bluss: lemme try!
[14:50:30] <brycefisher> is it possible to clone() a &RefCell<T>?
[14:50:56] <frankmcsherry> bluss: a bit, yes. allocate_vec_vec_str ... bench:       701 ns/iter (+/- 253)
[14:51:10] *** Joins: larhat (Adium@moz-1dkvl5.81.in-addr.arpa)
[14:51:13] *** Quits: dstrbad (dstrbad@moz-1dn56t.cable.xnet.hr) (A TLS packet with unexpected length was received.)
[14:51:18] <b52> what happened to #[should_fail] for tests?
[14:51:39] <bluss> frankmcsherry: sadly that's an effect. Anyway, recycler looks interesting
[14:51:44] <bluss> b52: should_panic now
[14:51:54] <frankmcsherry> bluss: does String::push_str(&str) do things the best way possible?
[14:51:56] *** Quits: larhat (Adium@moz-1dkvl5.81.in-addr.arpa) (Quit: Leaving.)
[14:52:21] <bluss> probably it uses Vec::push_all apparently
[14:52:25] <JosiahOne> frankmcsherry: Yeah, guess I'll do that. I think I'm trying to c++ify my code too much anyway.
[14:52:58] <frankmcsherry> JosiahOne: I came from C# and had a hard time thinking out how to get my classes back, but (for me at least) composition worked out great. Probably cases where it doesn't, but ... check it out! :D
[14:53:14] *** Quits: hjr3 (hradtke@moz-e235ok.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[14:53:19] <JosiahOne> frankmcsherry: Alright, I will. :)
[14:53:42] *** Quits: skade (skade@moz-u1j.1t9.225.62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[14:54:08] <ehiggs> I stopped using so much inheritence in C++ anyway.
[14:54:10] <frankmcsherry> bluss: I'd share it on PP but, 10% over the max character limit.
[14:54:29] *** Joins: hashmap (Mibbit@moz-nlai2s.pppoe.spdop.ru)
[14:54:30] <bluss> frankmcsherry: umm.. asm of push_str looks messy
[14:54:43] <bluss> frankmcsherry: convert spaces to tabs and you'll make it :D
[14:54:43] <frankmcsherry> bluss: http://pastebin.com/3JWP6K0m that is the whole thing.
[14:54:57] <frankmcsherry> bluss: just written in the past hour
[14:55:02] *** Joins: choplin (choplin@moz-qkm9un.ap.nuro.jp)
[14:55:13] *** Quits: hashmap (Mibbit@moz-nlai2s.pppoe.spdop.ru) (Quit: http://www.mibbit.com ajax IRC Client)
[14:56:12] <frankmcsherry> bluss: not exactly sure how to make the re-allocation interface low-friction, but ... well *shrug*
[14:56:38] <frankmcsherry> maybe some macros so that folks can do vec_r![x, y, z] and they'll re-org into those closures.
[14:57:38] *** Quits: scialex (scialex@moz-j5mi8i.cs.brown.edu) (Quit: Leaving)
[14:58:34] *** Quits: coderanger (Noah@moz-m5ti9s.net) (Ping timeout: 121 seconds)
[14:59:02] *** Joins: coderanger (Noah@moz-m5ti9s.net)
[14:59:04] *** Quits: choplin (choplin@moz-qkm9un.ap.nuro.jp) (Ping timeout: 121 seconds)
[14:59:21] *** Quits: daze (daze@moz-tc29eq.static.zebra.lt) (Ping timeout: 121 seconds)
[14:59:21] *** Quits: mvyskocil (mvyskocil@moz-1fo.p0p.7.31.IP) (Ping timeout: 121 seconds)
[14:59:38] <bluss> add some crazy frankmcsherry sauce to make it recycle all vecs the same
[14:59:45] <frankmcsherry> ...
[14:59:49] <bluss> an empty vector can change element type?
[15:00:03] *** Quits: minot2 (kkus@moz-baj4jj.74.srtnet.com) (Ping timeout: 121 seconds)
[15:00:05] *** Joins: housl (housl@moz-qnjt4k.ut.comcast.net)
[15:00:08] <bluss> maybe that gets into alignment trouble 
[15:00:16] <frankmcsherry> bluss: you could ... sorta. you want to check the sizes and re-assign the capacity (it is in # elements)
[15:00:16] *** Joins: minot2 (kkus@moz-baj4jj.74.srtnet.com)
[15:00:28] *** Quits: Ms2ger (Ms2ger@moz-t9m.9ho.190.193.IP) (Ping timeout: 121 seconds)
[15:00:38] <bluss> yes, that's a tricky part
[15:00:41] <frankmcsherry> bluss: I could look in to how threadlocal! works and if fast enough stash everything there.
[15:00:45] <b52> carllerche: I proposed and implemented CloseTo for your hamcrest lib a few months ago, do you mind telling me why you fixed the CloseTo matcher to f64 only and dropped the close_to_eps function in favor of close_to to requiring the delta explicitly?
[15:01:25] <bluss> frankmcsherry: it's probably not worth it unfortunately
[15:01:43] <frankmcsherry> I'll bench it!
[15:02:01] *** Quits: blank_name (blank_name@moz-5144dk.mi.frontiernet.net) (Ping timeout: 121 seconds)
[15:02:01] *** Quits: c0170_ (c0170@moz-bb29a4.cambridge.arm.com) (Ping timeout: 121 seconds)
[15:03:29] *** Quits: dinfuehr_ (dinfuehr@moz-b31i9i.highway.telekom.at) (Connection closed)
[15:03:50] *** Joins: dinfuehr_ (dinfuehr@moz-b31i9i.highway.telekom.at)
[15:03:54] *** Quits: ehiggs (ehiggs@moz-pob5cp.ugent.be) (Ping timeout: 121 seconds)
[15:04:15] <johnsoft> is there a way to "deconstruct" an Rc if you can guarantee the reference count will be 1 when you want the value?
[15:04:24] *** nsm|away is now known as nsm
[15:04:28] *** Joins: Ms2ger (Ms2ger@moz-t9m.9ho.190.193.IP)
[15:05:11] <mbrubeck> johnsoft: There's http://doc.rust-lang.org/std/rc/struct.Rc.html#method.make_unique though it only gives you &mut T, not T
[15:05:26] <johnsoft> it also requires Clone
[15:05:38] <frankmcsherry> try_unwrap
[15:05:51] <frankmcsherry> http://doc.rust-lang.org/std/rc/fn.try_unwrap.html
[15:06:10] <johnsoft> oh hey, that's it, thanks!
[15:06:21] <johnsoft> it's a free function so I didn't notice it
[15:07:08] <carllerche> b52: who are you on github? IIRC, the tests were broken and I was not familiar enough w/ floats in general, so I got them passing.
[15:07:18] <b52> carllerche: b52
[15:07:25] <GBGamer> why is try_unwrap() a free function?
[15:07:29] <carllerche> b52: where close_to_eps uses a default epsilon?
[15:07:48] <frankmcsherry> johnsoft: yeah, dunno why that is; someone holler if they know.
[15:07:51] <b52> carllerche: https://github.com/carllerche/hamcrest-rust/commit/210bd09ff7bd29b56699ba7f74da36767e34a697
[15:07:52] *** Quits: dinfuehr_ (dinfuehr@moz-b31i9i.highway.telekom.at) (Ping timeout: 121 seconds)
[15:08:19] *** Joins: raph (raph@moz-a0k28f.3v27.vk5s.0000.2620.IP)
[15:08:26] <b52> well, i just tried to compile an old project of mine and basically all tests didnt compile
[15:08:28] <carllerche> it probably broke during rust updates or something, unsure
[15:08:36] <mbrubeck> johnsoft: Oh nice, and there's also http://doc.rust-lang.org/std/rc/fn.is_unique.html
[15:08:47] *** Quits: jeffasinger (jeff@moz-1j1qti.cable.mindspring.com) (Client exited)
[15:09:05] <mbrubeck> GBGamer: "Because smart pointers should avoid having methods" - https://github.com/rust-lang/rust/commit/192a8a5db75802d10a6f3a63ab28600df75ec3d8
[15:09:10] *** Quits: pnkfelix (pnkfelix@moz-6v5.3nd.202.89.IP) (Ping timeout: 121 seconds)
[15:09:14] <frankmcsherry> bluss: ok, I claim that these are pretty similar, ergonomically. thoughts? http://is.gd/yPf6Wu
[15:09:17] <mbrubeck> GBGamer: to avoid naming conflicts with the wrapped type, I assume
[15:09:34] *** Joins: dstrbad (dstrbad@moz-3g901t.dsl.iskon.hr)
[15:09:38] <GBGamer> makes sense
[15:09:39] <carllerche> b52: what is the semantic difference between close_to as implemented there & a delta check?
[15:10:11] <BitPuffin> Hmm
[15:10:17] <BitPuffin> I wanna implement Zero and One
[15:10:19] <johnsoft> so downgrade and make_unique are the odd ones out then
[15:10:21] <BitPuffin> but they're unstable features
[15:10:22] <BitPuffin> :(
[15:10:24] *** Joins: krig (krig@moz-nf73fa.acc.umu.se)
[15:10:27] <BitPuffin> so it's an error
[15:10:38] <mbrubeck> BitPuffin: Use the `num` crate from crates.io
[15:10:46] <b52> carllerche: it doesn't compile due to the changed API and the fact, that the matcher is only implemented for f64
[15:11:03] <frankmcsherry> "I think we should probably change downgrade() and make_unique() into free functions as well, but that's out of scope." -link
[15:11:28] <krig> hey everyone, anyone know if there is an issue# or a way to get panic! to output file/line location in a GCC-compatible format? It'd help to jump to the panic location from an IDE (like emacs)
[15:11:33] <mbrubeck> b52: The `Float` and `NumCast` traits went away, at and least for a time there wasn't a good replacement. I think you could redo it now using https://crates.io/crates/num
[15:11:34] <carllerche> b52: well, the traits from the original impl are gone
[15:11:59] <frankmcsherry> johnsoft: sounds like the free methods came into existence based on the idea that free was good, but the instance methods already existed.
[15:12:09] <b52> mbrubeck: there werent gone, they were just moved
[15:12:26] <dschatzberg> frankmcsherry: the issue is my_ptr.method() has two potential meanings
[15:12:29] <mbrubeck> b52: When I had to update my own project, they hadn't yet landed in the external `num` crate.
[15:12:30] *** Quits: giucam_ (giucam@moz-u9jnsc.c665.0nib.2060.2001.IP) (Ping timeout: 121 seconds)
[15:12:37] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[15:12:48] <johnsoft> frankmcsherry- yeah, looks like you're right
[15:12:51] <krig> right now cargo test prints the location last on the line instead of first for assert!, which emacs doesn't understand
[15:12:54] <frankmcsherry> dschatzberg: right, we were trying to sort out why downgrade() and make_unique() weren't free.
[15:12:55] <carllerche> b52: to a crate?
[15:13:19] <frankmcsherry> dschatzberg: unless you were answering that, sorry.
[15:13:26] <johnsoft> frankmcsherry- the instance methods are both unstable still
[15:13:30] <johnsoft> it's not too late
[15:13:40] <frankmcsherry> johnsoft: they'll probably die then. :)
[15:13:58] <b52> carllerche: yeah, num
[15:13:59] <bluss> frankmcsherry: it looks ok to use absolutely
[15:14:06] <mbrubeck> krig: Can you teach emacs a different format?  I know how to do it for Vim...
[15:14:18] <frankmcsherry> bluss: i just made all the "salvage" into "new" so it parallels things a bit better.
[15:14:33] <dschatzberg> the answer to can you... emacs... ? is almost always yes
[15:14:39] <mbrubeck> :)
[15:14:41] *** Quits: Ms2ger (Ms2ger@moz-t9m.9ho.190.193.IP) (Ping timeout: 121 seconds)
[15:14:41] <krig> mbrubeck: I could, but I'd rather not :)
[15:14:52] <frankmcsherry> ok, off I got!
[15:14:54] <frankmcsherry> go*
[15:14:57] *** Quits: frankmcsherry (frankmcsher@moz-jna.j5l.19.178.IP) (Quit: Leaving...)
[15:15:00] <GBGamer> dschatzberg: although, you cannot play movies
[15:15:02] <mbrubeck> in vim you can just stuff a regex into the 'errorformat' option.
[15:15:05] <GBGamer> (in emacs)
[15:15:10] *** Joins: dfinninger (dfinninger@moz-fe6.5n7.235.207.IP)
[15:15:19] <BitPuffin> mbrubeck: cool
[15:15:21] <mbrubeck> s/regex/format string/
[15:15:26] <krig> GBGamer: I'm pretty sure I've seen emacs play movies...
[15:15:32] <BitPuffin> mbrubeck: do I have to do extern crate num; in every module that'll use it?
[15:15:37] <GBGamer> krig: not emacs itself
[15:15:43] <GBGamer> an external program
[15:15:44] <BitPuffin> and how come I have to use self:: to access it
[15:15:49] <Mutabah> BitPuffin: Just in the root
[15:15:52] <mbrubeck> https://www.gnu.org/software/emms/
[15:16:05] <BitPuffin> Mutabah: ah, so it src/mod.rs ?
[15:16:11] <Mutabah> BitPuffin: Yes
[15:16:15] <BitPuffin> okay thanks
[15:16:17] <GBGamer> emms plays movies in an outside program tho
[15:16:23] *** Quits: futile (felix@moz-cmcd12.unity-media.net) (Quit: WeeChat 1.2-rc1)
[15:16:26] <krig> GBGamer: http://www.emacswiki.org/emacs/Bongo
[15:16:32] *** Joins: davebettin (davebettin@moz-31g9o4.bhak.dqhm.0007.2601.IP)
[15:16:34] <Mutabah> BitPuffin: In moduels other than the crate root, ::num will refer to the num crate
[15:16:51] <GBGamer> well, damn
[15:17:06] <BitPuffin> Mutabah: I see
[15:17:08] <GBGamer> there was just a reddit post asking that exact question, and no one mentioned bongo
[15:17:09] <b52> carllerche: your implementation has a huge flaw, it uses an absolute error rather than a relative one, which means I would have to be compute an error delta matching the magnitude of my numbers, which is not good
[15:17:18] <BitPuffin> Mutabah: :: is just short for self:: isn't it?
[15:17:25] <Mutabah> BitPuffin: Nope
[15:17:27] <BitPuffin> oh
[15:17:31] <BitPuffin> oh
[15:17:34] <BitPuffin> self is the current module?
[15:17:36] <Mutabah> ::name is an absolute path, relative to the crate root
[15:17:38] <kimundi> BitPuffin: yes
[15:17:40] *** Quits: e_svedang (erik@moz-qa19e9.eduroam.gu.se) (Client exited)
[15:17:42] <Mutabah> self:: is the current module
[15:17:48] <Mutabah> and super allows you to refer to the parent module
[15:17:50] <kimundi> BitPuffin: self::foo is identical to foo
[15:18:10] <krig> mbrubeck: there's a lot of tools that understand the GCC error message format, so it'd be nice to be compatible. Maybe not the most crucial feature, sure
[15:18:11] <Mutabah> kimundi: I think there may be a very very subtle difference, but yes
[15:18:21] <mbrubeck> krig: yeah
[15:18:27] *** Quits: brycefisher (chatzilla@moz-2p5.i2o.220.104.IP) (Ping timeout: 121 seconds)
[15:19:11] *** Joins: nano (nano@moz-00j6et.dynamic.kabel-deutschland.de)
[15:19:27] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[15:21:06] <b52> carllerche: I would write a fix and propose a merge request, sounds good?
[15:21:55] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[15:22:37] *** Joins: essem2 (Thunderbird@moz-0g3v4k.biz.rr.com)
[15:23:07] *** Quits: aravindavk (aravinda@moz-5lh.5ks.215.117.IP) (Ping timeout: 121 seconds)
[15:23:13] *** Joins: aravindavk (aravinda@moz-2n7.i8v.248.117.IP)
[15:24:22] *** Quits: raph (raph@moz-a0k28f.3v27.vk5s.0000.2620.IP) (Quit: Leaving.)
[15:24:23] *** Quits: Slava_I (slava@moz-a7c.n0g.135.88.IP) (Ping timeout: 121 seconds)
[15:25:08] <carllerche> b52: sure. Is the epsilon check semantically different to the delta check?
[15:25:27] *** Joins: Diggsey (diggsey@moz-2s5u1v.dsl.pipex.com)
[15:25:45] <b52> carllerche: yes, the previous implementation performed a check on the relative error using an epsilon based threshold
[15:25:52] <b52> carllerche: http://floating-point-gui.de/errors/comparison/
[15:26:03] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[15:27:52] <carllerche> b52: does it make sense for a match with a default epsilon to be an equals_to or is there a reason to check exact equality?
[15:28:08] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[15:28:10] *** Joins: c0170 (c0170@moz-4stj9o.cable.virginm.net)
[15:28:26] <b52> carllerche: i thought about that also and i kinda like the idea, you described something like that in your commit message
[15:28:27] <carllerche> CloseTo should probably always take a delta
[15:28:54] <carllerche> Cool
[15:28:59] *** Joins: blank_name (blank_name@moz-7oq.uca.36.50.IP)
[15:30:01] *** Joins: mindtree (Mitch@moz-356.4j6.134.203.IP)
[15:30:02] *** Joins: Ms2ger (Ms2ger@moz-t9m.9ho.190.193.IP)
[15:31:20] *** Joins: giucam_ (giucam@moz-iv0nnc.bb.dnainternet.fi)
[15:32:45] *** Joins: cholcombe (chris@moz-eaa6lk.fios.verizon.net)
[15:33:43] *** Joins: ndhoule (ndhoule@moz-sf7g6k.ca.comcast.net)
[15:33:56] *** Quits: jophish (jophish@moz-epocft.broadband.tesco.net) (Connection closed)
[15:34:07] *** Quits: fmtq (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[15:35:19] *** Quits: ndhoule (ndhoule@moz-sf7g6k.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[15:35:23] *** Joins: nwin (textual@moz-7jj8l0.pools.vodafone-ip.de)
[15:36:14] *** Quits: TheLemonMan (lemonboy@moz-afr3uv.50-151.net24.it) (Quit: "It's now safe to turn off your computer.")
[15:36:36] *** Joins: fmtq (fmtq@moz-d08itp.tpgi.com.au)
[15:36:42] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[15:37:12] *** Joins: Slava_I (slava@moz-a7c.n0g.135.88.IP)
[15:37:34] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[15:37:49] *** Joins: brson (brson@moz-l8ebtf.sfo1.mozilla.com)
[15:37:49] *** ChanServ sets mode: +ao brson brson
[15:37:58] *** Joins: ndhoule (ndhoule@moz-sf7g6k.ca.comcast.net)
[15:38:01] *** Joins: tomprogrammer (thomas@moz-n9hkjp.tr5r.qept.4dd0.2001.IP)
[15:38:13] *** Joins: jxcl (abliskovsky@moz-o4k.t5t.173.207.IP)
[15:38:15] *** Quits: tcard (tcard@moz-5eb1g3.staticIP.rima-tde.net) (Client exited)
[15:39:21] *** Joins: Shackra (Jorge@moz-7bh.ng6.177.186.IP)
[15:39:47] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[15:40:02] *** Quits: Ms2ger (Ms2ger@moz-t9m.9ho.190.193.IP) (Ping timeout: 121 seconds)
[15:40:13] *** Quits: GBGamer (npm@moz-92sbjt.wa.comcast.net) (Quit: Lost terminal)
[15:41:20] *** Quits: Slava_I (slava@moz-a7c.n0g.135.88.IP) (Ping timeout: 121 seconds)
[15:41:38] *** Quits: CustosLimen (CustosLimen@moz-43o.etd.160.41.IP) (Quit: Leaving)
[15:42:32] *** Joins: e_svedang (erik@moz-qa19e9.eduroam.gu.se)
[15:42:35] *** Joins: Slava_I (slava@moz-a7c.n0g.135.88.IP)
[15:42:51] *** Joins: Fiveside (fiveside@moz-t2eatg.vsp.com)
[15:43:07] *** Quits: Slava_I (slava@moz-a7c.n0g.135.88.IP) (Connection closed)
[15:44:08] *** Quits: wei2912 (wei2912@moz-d1r.aac.156.175.IP) (A TLS packet with unexpected length was received.)
[15:44:13] *** Quits: ndhoule (ndhoule@moz-sf7g6k.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[15:44:53] *** Joins: sp0 (seth@moz-906uqd.internode.on.net)
[15:45:18] *** Quits: laumann (thomas@moz-3v9.hq0.225.130.IP) (Quit: leaving)
[15:45:38] *** Joins: O01eg (o01eg@moz-hpr2gc.ci24.4n8f.2698.2a02.IP)
[15:45:41] *** Joins: ndhoule (ndhoule@moz-sf7g6k.ca.comcast.net)
[15:46:13] *** Joins: dlc (dlc@moz-ijetde.res.rr.com)
[15:46:54] *** Joins: frankmcsherry (frankmcsher@moz-4u8vq8.adsl.alicedsl.de)
[15:47:54] *** Joins: lutter1 (lutter@moz-7v7ueu.PUBLIC.monkeybrains.net)
[15:48:05] *** Quits: blank_name (blank_name@moz-7oq.uca.36.50.IP) (Ping timeout: 121 seconds)
[15:48:19] *** Quits: kocka (Mibbit@moz-tt0cup.office.bol.com) (Quit: http://www.mibbit.com ajax IRC Client)
[15:49:03] *** Joins: blank_name (blank_name@moz-649u30.mi.frontiernet.net)
[15:49:55] *** Quits: joel2 (joel@moz-6ampnk.gtri.gatech.edu) (Quit: WeeChat 1.1.1)
[15:52:16] *** Joins: mooface (Mibbit@moz-tpjl46.co.comcast.net)
[15:52:24] *** Joins: bombless (_@moz-ovk.piv.41.59.IP)
[15:52:25] *** Joins: GaryOak_ (GaryOak_@moz-etoj16.hfc.comcastbusiness.net)
[15:52:30] *** Joins: woboats (tatterdemal@moz-a0dnkb.ca.comcast.net)
[15:52:39] *** Joins: broo (broo@moz-nkfj41.urbanrage.com)
[15:53:07] *** Joins: Slava_I (slava@moz-a7c.n0g.135.88.IP)
[15:53:34] *** Joins: derecho (derecho@moz-8nlhqo.upc-g.chello.nl)
[15:53:39] *** Joins: Douman (Douman@moz-rs7guj.dynamic.mts-nn.ru)
[15:53:59] <derecho> Hi, I'm trying to update some rust code to work with 1.1.0
[15:54:06] <derecho> last time it worked was in 0.11 or 0.12
[15:54:10] <derecho> so there's a lot of small things that changed
[15:54:18] <derecho> I'm currently a bit puzzled by how to access vector elements
[15:54:28] <derecho> I used to use .get() and .get_mut()
[15:54:40] <derecho> .get() now seems to take usize instead of u32, that's easily changed
[15:54:46] <derecho> .get_mut() seems to have disappeared though?
[15:54:47] *** Joins: munksgaard (munksgaard@moz-ob0t16.0.fullrate.dk)
[15:55:07] <derecho> I've also tried used [] but that gives me errors I don't understand haha
[15:55:16] *** Quits: mooface (Mibbit@moz-tpjl46.co.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[15:55:19] *** Quits: akiss (akiss@moz-43lncs.uio.no) (Ping timeout: 121 seconds)
[15:55:26] *** derecho is now known as Derecho
[15:55:45] <Derecho> would anyone be able to tell me what changed? or, how I should be doing it now anyway?
[15:55:50] *** Quits: kngl (Adium@moz-m3a3bq.ipv4.evonet.be) (Ping timeout: 121 seconds)
[15:56:12] <Derecho> oh another difference I noticed is that .get() now returns an Option, which I'd prefer not to have
[15:56:14] <bluss> Derecho: .get and .get_mut still exist and should take usize like before
[15:56:27] <bluss> ah, then use indexing instead.  v[i]
[15:56:28] <Derecho> it was u32 before
[15:56:40] <Derecho> right, I tried using indexing, but that gives me an error
[15:56:42] <Derecho> hang on
[15:56:56] <bluss> it's never been u32, I'm sure
[15:57:29] *** Quits: tkellen (tkellen@moz-nt9.hak.245.50.IP) (Client exited)
[15:57:36] <bluss> so .get and .get_mut are for returning an Option now, indexing if you don't want that
[15:57:52] <bluss> index notation also does slicing
[15:58:26] *** Joins: {AS} (uid45026@moz-srvrrh.uxbridge.irccloud.com)
[15:58:30] <bluss> playbot: let v = vec![1,2,3,4];  print!("{:?} and {:?}", v[0], &v[1..]); ()
[15:58:31] -playbot- 1 and [2, 3, 4]()
[15:58:44] <Derecho> well I used to explicitely cast my value to u32 to get it to work with .get. anyway, that's not the point, usize is fine for me.
[15:59:00] <Derecho> http://s.drk.sc/wZHNW4/  that's what I get when using indexing
[15:59:21] *** Quits: srh (srh@moz-52rs3t.q9f2.utp8.0306.2602.IP) (Ping timeout: 121 seconds)
[15:59:41] <Derecho> (also, does indexing return a mutable or immutable value?)
[15:59:45] *** Joins: ewilazarus (ewilazarus@moz-0bk.f4i.70.141.IP)
[15:59:54] <bluss> depends on context
[16:00:09] <bluss> i.e. it can do both
[16:00:20] *** Quits: zmack (zmack@moz-1oe.89t.76.82.IP) (Connection closed)
[16:00:30] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[16:00:39] <bluss> .get_mut returns Option, so use [...] instead I think
[16:00:43] <Derecho> also code to go with above error: http://s.drk.sc/sA7NDd?guess (line numbers changed)
[16:01:03] <Derecho> I'm currently focusing on my Grid::get function
[16:01:11] *** Joins: basicdays (basicdays@moz-vreeoj.cable.rcn.com)
[16:01:14] <sp0> How would I cast a & pointer to a usize. As in, I want the address...?
[16:01:20] *** Joins: oceanwhit (christianwh@moz-a38b1m.ca.comcast.net)
[16:01:30] *** Quits: ndhoule (ndhoule@moz-sf7g6k.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:01:32] <bluss> Derecho: oh, I see the first error now
[16:01:54] <bluss> Derecho: if you want a reference from indexing use  &foo[index]
[16:02:12] <bluss> playbot: let v = vec![1,2,3,4];  print!("{:?} and {:?}", &v[0], &v[1]); ()
[16:02:14] -playbot- 1 and 2()
[16:02:25] <bluss> (&1 and &2 print the same as 1 and 2)
[16:02:36] *** Quits: jviereck (Adium@moz-jkmt1p.ethz.ch) (Quit: Leaving.)
[16:02:40] *** Joins: jeffasinger (jeff@moz-1j1qti.cable.mindspring.com)
[16:02:41] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:02:47] <bluss> sp0: cast to raw pointer then to usize
[16:03:18] *** Joins: CustosLimen (CustosLimen@moz-43o.etd.160.41.IP)
[16:03:18] <Derecho> ah cheers that seems to stop the errors at my get function
[16:03:27] *** Joins: naerbnic (naerbnic@moz-i9o.rs4.199.12.IP)
[16:03:30] *** Quits: e_svedang (erik@moz-qa19e9.eduroam.gu.se) (Client exited)
[16:03:31] <Derecho> makes sense too I suppose
[16:03:38] <bluss> Derecho: same with the other but with &mut foo[index]
[16:03:56] *** Quits: tadh (quassel@moz-88tk3f.res.rr.com) (Connection closed)
[16:04:15] <Derecho> right, so foo[index] gets a value, &foo[index] a pointer to the value, &mut foo[index] a mutable pointer to the value?
[16:04:29] <Derecho> I assume there would be no such thing as a &mut foo[index] then
[16:04:32] <sp0> bluss: cheers, got it. IS this an unsafe operation? 
[16:04:35] *** Quits: davebettin (davebettin@moz-31g9o4.bhak.dqhm.0007.2601.IP) (Ping timeout: 121 seconds)
[16:04:42] <Derecho> eh wait I buggered that last one up
[16:04:49] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[16:05:00] <Derecho> meant mut foo[index]
[16:05:08] <Derecho> (just to make sure I understand)
[16:05:25] <bluss> sp0: no
[16:05:27] *** Quits: oceanwhit (christianwh@moz-a38b1m.ca.comcast.net) (Ping timeout: 121 seconds)
[16:05:52] <bluss> Derecho: you're right
[16:06:04] <Derecho> ok, thank you.
[16:06:21] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[16:06:25] <sp0> bluss: alright, I would have guessed it was, but it was saying the unsafe block wasn't needed. I suppose there is not dereferencing going on?
[16:06:43] *** Quits: nyx (nyx@moz-7o34ff.albyny.csvoip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:06:59] *** Joins: GyrosOfWar (user@moz-fc2nbj.vie.surfer.at)
[16:07:09] *** Quits: munksgaard (munksgaard@moz-ob0t16.0.fullrate.dk) (Ping timeout: 121 seconds)
[16:07:30] <bluss> sp0: yes you're just looking at the pointer value
[16:07:49] <bluss> sp0: however pointer arithmetic (.offset() method) is unsafe
[16:07:59] <sp0> cool, makes sense
[16:08:00] <bluss> since the caller must guarantee it's in bounds
[16:08:34] <GyrosOfWar> hi, is it normal for the syntex library to take really long to compile?
[16:08:53] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:08:56] <GyrosOfWar> I'm compiling racer right now and it's taking forever
[16:09:06] <sp0> GyrosOfWar: takes a long time for me as well
[16:09:20] *** Quits: bombless (_@moz-ovk.piv.41.59.IP) (Ping timeout: 121 seconds)
[16:09:32] <Derecho> should I also use usize for my own get functions?
[16:09:36] <Derecho> or is that an internal thing?
[16:10:10] *** Joins: larhat (Adium@moz-1dkvl5.81.in-addr.arpa)
[16:11:12] <bluss> use usize if it's related to collection sizes
[16:11:27] <bluss> well it varies but all rusts collections use usize
[16:11:27] *** Quits: GyrosOfWar (user@moz-fc2nbj.vie.surfer.at) (Connection closed)
[16:11:41] <bluss> because they are bounded by available memory
[16:11:44] *** Quits: ebel (rory@moz-l1ldq7.hsi4.kabel-badenwuerttemberg.de) (Quit: Leaving)
[16:12:11] <Derecho> all right, will do that then. should also help me get rid of some ugly casts
[16:13:14] *** AutomatedTester is now known as AutomatedTester|AFK
[16:13:25] *** Joins: dinfuehr_ (dinfuehr@moz-b31i9i.highway.telekom.at)
[16:13:26] *** Joins: pnkfelix (pnkfelix@moz-71m.3nd.202.89.IP)
[16:13:27] *** ChanServ sets mode: +o pnkfelix
[16:13:34] *** Quits: dstrbad (dstrbad@moz-3g901t.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[16:13:39] *** Joins: dstrbad (dstrbad@moz-3g901t.dsl.iskon.hr)
[16:13:44] *** Quits: dstrbad (dstrbad@moz-3g901t.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[16:14:01] *** Quits: duncan1 (paul@moz-dst.ms6.225.173.IP) (Quit: Leaving.)
[16:14:07] *** Quits: envi_u (envi@moz-ih5.olo.169.121.IP) (Ping timeout: 121 seconds)
[16:14:25] *** Joins: JanC__ (janc@moz-1kb413.dsl.scarlet.be)
[16:14:48] *** Joins: duncan (paul@moz-dst.ms6.225.173.IP)
[16:15:03] *** Joins: pnatal (quassel@moz-q9p42c.cpe.netcabo.pt)
[16:15:25] <Derecho> ah just recalled why I was i32 in the first place... after changing everything haha,
[16:15:28] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Connection closed)
[16:15:35] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[16:15:48] *** Quits: garming (garming@moz-5uejkm.xtra.co.nz) (Ping timeout: 121 seconds)
[16:16:22] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[16:16:27] *** Quits: nano (nano@moz-00j6et.dynamic.kabel-deutschland.de) (Connection closed)
[16:16:28] <bluss> oh
[16:16:43] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[16:16:53] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:17:09] *** Joins: tkellen (tkellen@moz-nt9.hak.245.50.IP)
[16:17:13] *** Quits: JanC_ (janc@moz-rdfl93.dsl.scarlet.be) (Ping timeout: 121 seconds)
[16:17:31] *** Quits: dinfuehr_ (dinfuehr@moz-b31i9i.highway.telekom.at) (Ping timeout: 121 seconds)
[16:17:31] <Derecho> I was supporting out of bounds indexes with wraparound
[16:17:41] <Derecho> it's for a game of life you see
[16:17:46] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[16:17:53] *** Joins: veqz (veqz@moz-nvr8g6.209.getinternet.no)
[16:18:11] <Derecho> but, that's only a detail. the major problem was the changes in vector which I should understand now
[16:18:41] *** Joins: kgrandon (Adium@moz-4da4m4.ujol.1ibb.0101.2620.IP)
[16:18:41] <bluss> right for your application using i32 might be better
[16:18:54] <bluss> Derecho: IMO Rust is better than ever
[16:19:02] <bluss> Derecho: lots of changes, but for the better
[16:19:09] *** Quits: tkellen (tkellen@moz-nt9.hak.245.50.IP) (Client exited)
[16:19:22] <bluss> Derecho: and cargo is really easy to use too
[16:19:29] *** Joins: vmesons (rmacleod@moz-hs5cri.cable.teksavvy.com)
[16:19:49] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[16:19:55] <Derecho> yeah, while I'm not too fond on having to now make all these changes, things do seem to have become clearer
[16:20:00] <forgottenone> where is the documentation for ref keyword(or for keywords generally?)
[16:20:07] *** Quits: untitaker (untitaker@moz-lcvhbq.highway.telekom.at) (Ping timeout: 121 seconds)
[16:21:19] <kimundi> forgottenone: that keyword is part of pattern matching
[16:21:22] <bluss> Derecho: one thing you may or may not notice is that debug builds overflow check arithmetic now
[16:21:37] *** Joins: untitaker (untitaker@moz-lcvhbq.highway.telekom.at)
[16:21:44] <bluss> Derecho: so overflow like std::i32::MAX + 1 will panic
[16:21:47] <bluss> in debug mode
[16:22:00] <bluss> playbot: std::i32::MAX + 1 
[16:22:01] -playbot- <anon>:9:9: 9:26 error: attempted to add with overflow
[16:22:02] -playbot- <anon>:9         std::i32::MAX + 1 
[16:22:02] -playbot- output truncated; full output at: http://bit.ly/1FPE0hp
[16:22:08] <forgottenone> kimundi: thanks
[16:22:14] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[16:22:16] <bluss> sad, it doesn't even compile 
[16:22:39] *** Quits: vmeson (rmacleod@moz-hs5cri.cable.teksavvy.com) (Ping timeout: 121 seconds)
[16:22:42] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[16:23:07] <Derecho> hmm. I'm traying to use bool::rand() (that seems to be the new way of generating a random bool?), but I seem to have to import rand::Rand somehow
[16:23:30] <Derecho> use rand::Rand complains about it being missing, yet the docs do seem to cover it
[16:23:32] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[16:23:46] *** Quits: woboats (tatterdemal@moz-a0dnkb.ca.comcast.net) (Ping timeout: 121 seconds)
[16:23:46] <kimundi> rand is a seperate crate
[16:23:49] <Derecho> has it moved out of the regular installation and is it a crate now?
[16:23:51] <Derecho> ah.
[16:24:05] *** Quits: laparca (laparca@moz-rgcs06.mgob.kh00.0488.2a01.IP) (Quit: Leaving.)
[16:24:07] *** Quits: BitPuffin (isak@moz-vunbu1.dyn.plus.net) (Ping timeout: 121 seconds)
[16:24:10] <Derecho> are there more official crates like this now?
[16:24:21] *** Quits: dlc (dlc@moz-ijetde.res.rr.com) (Quit: Leaving)
[16:24:28] *** Joins: new_one (new_one@moz-v3c.7o3.42.128.IP)
[16:25:09] <Derecho> also, isn't it a bit odd to implement traits in something in std:: but depend on a separate crate for it to work?
[16:25:11] *** Joins: JosiahOne1 (Thunderbird@moz-ub5.sco.30.4.IP)
[16:25:27] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[16:26:01] *** Joins: Ms2ger (Ms2ger@moz-t9m.9ho.190.193.IP)
[16:26:14] <FreeFull> bluss: the playbot uses release mode anyway
[16:26:20] *** Joins: gopar (gopar@moz-5039uj.ca.comcast.net)
[16:26:41] *** Quits: JosiahOne (Thunderbird@moz-f2hp7h.biz.rr.com) (Ping timeout: 121 seconds)
[16:26:45] *** Joins: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net)
[16:26:50] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[16:27:01] *** Joins: DerisiveLogic (smuxi@moz-g93io6.res.rr.com)
[16:27:10] *** Joins: ainieco (ainieco@moz-br5.ksd.162.188.IP)
[16:27:15] <ainieco> hello, does rust team plan to stableize feature(alloc) in 1.0?
[16:27:43] *** Joins: jimb (user@moz-09a.i8g.126.207.IP)
[16:27:46] *** Joins: JosiahOne (Thunderbird@moz-f2hp7h.biz.rr.com)
[16:28:01] *** Quits: naerbnic (naerbnic@moz-i9o.rs4.199.12.IP) (Client exited)
[16:29:13] *** Quits: JosiahOne1 (Thunderbird@moz-ub5.sco.30.4.IP) (Ping timeout: 121 seconds)
[16:29:28] *** Joins: Quanttek (quassel@moz-25k96c.6fkd.dvrb.8108.2a02.IP)
[16:29:30] *** Quits: timonv1 (timonv@moz-7btgcn.dynamic.ziggo.nl) (Ping timeout: 121 seconds)
[16:29:45] *** Joins: Gabriel_7 (Gabriel@moz-2vj54m.mtgr.92aj.0e35.2a01.IP)
[16:29:49] *** Quits: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP) (Ping timeout: 121 seconds)
[16:30:23] *** Quits: DerisiveLogic (smuxi@moz-g93io6.res.rr.com) (A TLS packet with unexpected length was received.)
[16:30:24] *** Quits: lenstr_ (lenstr@moz-h5k.vju.25.171.IP) (Connection closed)
[16:30:38] <bluss> FreeFull: oh right..
[16:30:42] *** Joins: Guest (textual@moz-rtn.fg7.77.192.IP)
[16:30:43] *** Joins: lenstr (lenstr@moz-h5k.vju.25.171.IP)
[16:30:44] *** Joins: srh (srh@moz-g3qqf4.public.wayport.net)
[16:30:54] <sp0> bluss: How would I get the address of a slice? Casting from &[T] to *const [T] gives me 'illegal cast; cast from fat pointer'... How do I get just the *const part
[16:30:55] *** Quits: larhat (Adium@moz-1dkvl5.81.in-addr.arpa) (Quit: Leaving.)
[16:30:56] *** Quits: Ralith (ralith@moz-tiaj7p.customer.broadstripe.net) (Ping timeout: 121 seconds)
[16:30:57] <bluss> ainieco: no, the beta is the preview of 1.0 and no big changes are considered
[16:31:02] *** Quits: espadrine_ (tyl@moz-qfr4fg.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[16:31:08] *** Joins: Porkepix_ (Porkepix@moz-71m.3nd.202.89.IP)
[16:31:10] <bluss> sp0: it has a method .as_ptr()
[16:31:19] <sp0> bluss: ah cheers again :D
[16:31:24] <bluss> sp0: if you want the data pointer that is
[16:31:28] <sp0> yep
[16:31:50] *** Quits: CustosLimen (CustosLimen@moz-43o.etd.160.41.IP) (Ping timeout: 121 seconds)
[16:31:52] *** ashgenesis is now known as ashgenes1s
[16:32:04] *** Quits: Porkepix_ (Porkepix@moz-71m.3nd.202.89.IP) (Quit: My laptop has gone to sleep. ZZZzzz…)
[16:32:10] *** Joins: ascarter (ascarter@moz-705hf8.wa.comcast.net)
[16:32:19] <bluss> Derecho: I don't think libstd implements traits from the rand crate
[16:32:28] <bluss> Derecho: it should be all external
[16:32:31] *** Quits: pnkfelix (pnkfelix@moz-71m.3nd.202.89.IP) (Quit: rcirc on GNU Emacs 24.5.1)
[16:32:42] *** Joins: Porkepix_ (Porkepix@moz-71m.3nd.202.89.IP)
[16:32:57] <Derecho> oh that would also be in that crate then. right. makes sense
[16:33:06] *** Joins: m104ru (m104ru@moz-sje.6lq.205.109.IP)
[16:33:20] <Derecho> just having a bit of trouble compiling it, but that's my fault for trying to also support `make` haha
[16:33:39] <ewilazarus> hello guys
[16:34:09] *** Quits: Porkepix_ (Porkepix@moz-71m.3nd.202.89.IP) (Quit: My laptop has gone to sleep. ZZZzzz…)
[16:34:12] *** Parts: ewilazarus (ewilazarus@moz-0bk.f4i.70.141.IP) ("Leaving")
[16:34:14] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[16:34:19] *** Quits: Rym_ (y@moz-a44.2as.55.31.IP) (Ping timeout: 121 seconds)
[16:34:23] *** Joins: ewilazarus (ewilazarus@moz-0bk.f4i.70.141.IP)
[16:34:34] *** Quits: ainieco (ainieco@moz-br5.ksd.162.188.IP) (Quit: leaving)
[16:34:49] *** Joins: eibwen (eibwen@moz-n4tjds.dip0.t-ipconnect.de)
[16:34:52] <ewilazarus> I'm completly new to rust, could someone give me some pointers to where should I begin?
[16:35:34] *** Quits: Gabriel_7 (Gabriel@moz-2vj54m.mtgr.92aj.0e35.2a01.IP) (Ping timeout: 121 seconds)
[16:35:53] <duncan> doc.rust-lang.org/book/
[16:35:56] <duncan> and welcome :)
[16:36:40] *** Joins: SDX2000 (sandeepd@moz-knd.sg7.54.103.IP)
[16:37:14] *** Joins: masterofchess (Icedove@moz-ag828p.dyn.telefonica.de)
[16:38:04] *** Joins: munksgaard (munksgaard@moz-ob0t16.0.fullrate.dk)
[16:38:21] *** Joins: mlsteele (Mibbit@moz-5ikfqn.mit.edu)
[16:38:39] *** Joins: Verdagon (Verdagon@moz-ff302e.ca.comcast.net)
[16:39:10] *** Quits: m104ru (m104ru@moz-sje.6lq.205.109.IP) (Ping timeout: 121 seconds)
[16:39:26] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:39:42] *** Joins: dalarmmst (dalarmmst@moz-mb21j4.bredband.comhem.se)
[16:39:46] <masterofchess> Hi there. Can you guys tell if there is any definition of what Rust understands to be "memory safe"? So, what is it - precisely specified - that Rust guarantees to the programmer in terms of safety and consistency?
[16:40:01] *** Quits: v21 (vee@moz-07pghd.asianet.co.th) (Ping timeout: 121 seconds)
[16:40:05] <ewilazarus> thanks duncan
[16:40:29] *** Joins: niconii (nicole@moz-5gqgia.frgo.qwest.net)
[16:40:32] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[16:40:43] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[16:40:54] *** Quits: aravindavk (aravinda@moz-2n7.i8v.248.117.IP) (Quit: Konversation terminated!)
[16:41:42] <Derecho> how would one go about specifying crate attributes on the commandline of rustc?
[16:41:53] *** Joins: Titi_Alone (Thunderbird@moz-m4mn3h.rev.sfr.net)
[16:41:56] <Derecho> rand requires me to explicitely allow unstable libc functionality
[16:42:16] *** Joins: jack (sid19593@moz-d7cue0.uxbridge.irccloud.com)
[16:42:16] *** ChanServ sets mode: +o jack
[16:42:20] <Titi_Alone> Hello, is there a way to call rustc from rust itself
[16:42:22] <Titi_Alone> *?
[16:42:24] <bluss> Derecho: no it shouldn't need that
[16:42:32] <bluss> Derecho: get libc from crates.io
[16:42:37] <bluss> Derecho: and it will work
[16:42:38] <steveklabnik> masterofchess: http://doc.rust-lang.org/reference.html#unsafety <-
[16:42:43] <Derecho> what, another dependency?
[16:42:57] <bluss> Derecho: https://crates.io/crates/rand
[16:43:02] <bluss> it depends on libc
[16:43:10] <bluss> with cargo this is super easy though
[16:43:17] <mlsteele> I'm trying to convert a decimal string to an i32. I had it working in an older version of rust but just updated. The docs seem to say std::i32::from_str should work. I have use std::i32 and try i32::from_str but the compiler says "type `i32` does not implement any method in scope named `from_str`". Does anyone know what I'm doing wrong?
[16:43:27] <Derecho> yeah that is this: https://github.com/rust-lang/rand   right?
[16:43:28] <steveklabnik> mlsteele: the From trait was generalized
[16:43:33] <steveklabnik> mlsteele: so just from() should work
[16:43:34] <bluss> Derecho: yes
[16:43:36] *** Joins: slurps-mad-rips (slurps-mad-@moz-o2c.uaj.44.17.IP)
[16:43:56] <Derecho> I'll do cargo as well, but I also have a makefile I'd like to get workign again
[16:44:03] <bluss> masterofchess: well this is at last something http://doc.rust-lang.org/nightly/reference.html#behavior-considered-undefined
[16:44:04] *** Joins: naerbnic (naerbnic@moz-i9o.rs4.199.12.IP)
[16:44:04] <Derecho> so I'm compiling rand through rustc
[16:44:22] <Derecho> and then it errors about me needing to add code to allow unstable libc functionality
[16:44:24] <masterofchess> Derecho: i'd missed that - thanks a lot, just reading through it!
[16:44:33] *** Joins: davebettin (davebettin@moz-hde.5e5.136.67.IP)
[16:44:35] <steveklabnik> Derecho: you can cargo build -v to see exactly what output cargo does, which should help with your makefile
[16:44:47] <Derecho> ah I'll try that. thanks steveklabnik 
[16:44:50] <bluss> Derecho: I understand, well there are two libc. If you use the one from cargo it won't error
[16:44:50] <steveklabnik> np
[16:44:51] <frankmcsherry> bluss: https://github.com/frankmcsherry/recycler
[16:44:53] *** Joins: vmeson (rmacleod@moz-hs5cri.cable.teksavvy.com)
[16:44:56] <steveklabnik> though really, most rust users just use cargo, no make
[16:45:02] <masterofchess> bluss: yeah, that looks like a starting point. 
[16:45:20] <Derecho> I might get rid of the makefile later on, but I'd be nice to have it working now. at least just for the sake of it
[16:45:26] <Derecho> it'd*
[16:45:51] <Dabo> Derecho, why not have the makefile just call cargo? 
[16:45:53] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[16:45:54] <mlsteele> steveklabnik: that sounds promising, something like s.to_i32()? That didn't work, is it a problem that my string is a &str?
[16:46:04] <steveklabnik> masterofchess: http://en.wikipedia.org/wiki/Memory_safety <-
[16:46:05] <Dabo> I mean cargo comes with all rust instillations by default anyways
[16:46:05] <steveklabnik> also
[16:46:19] *** Joins: alonlevy_ (alon@moz-gt9.me4.28.5.IP)
[16:46:21] <steveklabnik> mlsteele: no, i mean call the .from() method instead of from_str()
[16:46:23] <Derecho> Dabo: the idea is that the makefile is a replacement for cargo, otherwise it's not adding any value
[16:46:38] <proc> some ideas to fix this ? http://is.gd/YolyXK (also improvements welcome.. )
[16:46:46] *** Joins: Guest_ (textual@moz-e2cv3d.res.rr.com)
[16:46:47] <steveklabnik> mlsteele: what happend was, we used to have a ton of FromFoo traits, but we ended up making a single one: http://doc.rust-lang.org/nightly/std/convert/trait.From.html
[16:46:49] <Derecho> and cargo comes by default with the prebuilt binaries but not the source I think
[16:46:58] <Dabo> Derecho, ah, ok
[16:47:13] <bluss> Derecho: well it will be some extra work to use make
[16:47:20] *** Quits: colinsurprenant (colin@moz-rmn4e2.169.electronicbox.net) (Client exited)
[16:47:21] <Dabo> it will be hard to maintain with the rust ecosystem of having many things in external crates, but I guess if you want to you can do it
[16:47:25] <Derecho> but yeah granted, I could save myself some work and just use only cargo. I'm just interested in seeing both work
[16:47:27] <bluss> Derecho: cargo makes it easy to split crates into subcrates too :)
[16:47:40] *** Quits: vmesons (rmacleod@moz-hs5cri.cable.teksavvy.com) (Ping timeout: 121 seconds)
[16:47:47] <Derecho> subcrates, great. xD
[16:47:53] <Dabo> I mean a lot of what rust has been doing up to 1.0 is moving functionality into external crates, so with a good sized program you will be depending on a lot of things xD
[16:48:00] *** Quits: qwerty_nor (Thunderbird@moz-vuo.d5a.248.5.IP) (Ping timeout: 121 seconds)
[16:48:05] *** Quits: ascarter (ascarter@moz-705hf8.wa.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:48:07] <Derecho> :(
[16:48:36] *** Quits: Guest74 (textual@moz-il1.n6s.204.65.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:48:56] <Derecho> oh damn, Cargo.toml syntax changed too.
[16:49:09] <Dabo> ?
[16:49:34] <Derecho> compared to months (a year?) ago
[16:49:44] <Derecho> so my existing Cargo.toml doesn't work
[16:49:46] *** Quits: JosiahOne (Thunderbird@moz-f2hp7h.biz.rr.com) (Connection closed)
[16:49:49] *** Joins: JosiahOne (Thunderbird@moz-f2hp7h.biz.rr.com)
[16:50:00] *** Joins: nyx (nyx@moz-7o34ff.albyny.csvoip.net)
[16:50:17] *** Joins: Jackneill (Jackneill@moz-7qmpfp.pool.digikabel.hu)
[16:50:25] *** Quits: munksgaard (munksgaard@moz-ob0t16.0.fullrate.dk) (Ping timeout: 121 seconds)
[16:50:57] <mlsteele> steveklabnik: sorry, i'm still confused. i32::from(s) gives "expected `i32` found `&str`"
[16:51:04] *** Parts: danilo (danilo@moz-qhkkt5.yourvserver.net) ()
[16:51:18] <steveklabnik> mlsteele: check it:
[16:51:37] <steveklabnik> playbot: let x: i32 = "42".from(); x
[16:51:39] -playbot- <anon>:9:27: 9:33 error: type `&'static str` does not implement any method in scope named `from`
[16:51:39] -playbot- <anon>:9         let x: i32 = "42".from(); x
[16:51:39] -playbot- output truncated; full output at: http://bit.ly/1zMS7TT
[16:51:52] <steveklabnik> errr, something like that, heh
[16:52:01] *** Quits: vks (quassel@moz-b54qc9.fias.uni-frankfurt.de) (Ping timeout: 121 seconds)
[16:52:06] <FreeFull> playbot: let x: i32 = "42".into(); x
[16:52:08] -playbot- <anon>:9:27: 9:33 error: the trait `core::convert::From<&str>` is not implemented for the type `i32` [E0277]
[16:52:08] -playbot- <anon>:9         let x: i32 = "42".into(); x
[16:52:08] -playbot- output truncated; full output at: http://bit.ly/1KMcQIk
[16:52:18] <proc> steveklabnik: that's why i'm only using from::<T> .. always getting those errors with .from() :P
[16:52:20] <steveklabnik> ahh it doesn't have that impl
[16:52:22] *** pnatal is now known as equalsraf
[16:52:29] <steveklabnik> anyway
[16:52:32] <steveklabnik> the more idiomatic way
[16:52:34] <steveklabnik> is 
[16:52:41] <steveklabnik> playbot: let x: i32 = "42.parse(); x
[16:52:41] -playbot- <anon>:9:22: 11:3 error: unterminated double quote string
[16:52:41] -playbot- <anon>:9         let x: i32 = "42.parse(); x
[16:52:41] -playbot- output truncated; full output at: http://bit.ly/1zMSePh
[16:52:43] <FreeFull> playbot: let x: i32 = "42".parse().unwrap(); x
[16:52:44] -playbot- 42
[16:52:46] *** Joins: Guest67 (textual@moz-rras9m.gwi.net)
[16:52:50] <steveklabnik> playbot: let x: i32 = "42".parse().unwrap(); x
[16:52:51] -playbot- 42
[16:52:54] <steveklabnik> oh FreeFull beat me :)
[16:53:03] <FreeFull> playbot: let x: i32 = "nqn".parse().unwrap(); x
[16:53:05] -playbot- output truncated; full output at: http://bit.ly/1KMcVMf
[16:53:10] <steveklabnik> From is for lossless conversions, now that i'm thinking about it
[16:53:20] <FreeFull> thread '<main>' panicked at 'called `Result::unwrap()` on an `Err` value: ParseIntError { kind: InvalidDigit }', /home/rustbuild/src/rust-buildbot/slave/beta-dist-rustc-linux/build/src/libcore/result.rs:729
[16:53:27] <steveklabnik> just habit of moving from FromFoo to From
[16:53:31] *** Joins: hjr3 (hradtke@moz-dmp.av4.169.69.IP)
[16:53:57] <FreeFull> steveklabnik: I was thinking From should be implemented on the numeric types
[16:54:03] <FreeFull> But that'd be a lot of code
[16:54:32] <proc> trying to write a 2-digit-input str to i64, with leading zeros converter.. and somehow stuck.. http://is.gd/YolyXK
[16:55:03] <proc> .char() also requires me then to use a char as comparative..
[16:55:05] *** Quits: asmyers (amyers@moz-f2k.1cm.177.128.IP) (Connection closed)
[16:55:06] *** Joins: larhat (Adium@moz-tb1ulb.cable.virginm.net)
[16:55:15] *** Joins: asmyers (amyers@moz-f2k.1cm.177.128.IP)
[16:55:32] <mlsteele> steveklabnik: FreeFull: Thanks! Didn't know about parse. On to the next compilation error :)
[16:55:53] *** Quits: sp0 (seth@moz-906uqd.internode.on.net) (Quit: Lost terminal)
[16:56:23] <equalsraf> cheers, what is the most straightforward way to convert an array of 4 u8 that holds a little endian unsigned integer into a primitive u32?
[16:56:57] <equalsraf> other than a transmute or some hand arithmetic
[16:57:19] <Derecho> ok I'm dropping the makefile now that I see what cargo is doing. sort of disappointed the compilation procedure is now abstracted away :(
[16:57:27] *** Joins: munksgaard (munksgaard@moz-ob0t16.0.fullrate.dk)
[16:57:40] <kimundi> equalsraf: I don't know anything apart from those two extremes that would be considered more straight forward
[16:57:50] <steveklabnik> kimundi: equalsraf byteorder crate?
[16:58:06] <steveklabnik> but yeah
[16:58:09] <kimundi> oh, right I guess there are libraries
[16:58:25] *** Joins: Stebalien (Stebalien@moz-o1j.a0q.30.128.IP)
[16:58:35] <kimundi> And those would definitely be the "right" solution :)
[16:58:36] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[16:59:57] *** Quits: zeebo_ (zeebo@moz-qtpltq.ut.vivintwireless.net) (Ping timeout: 121 seconds)
[17:00:09] *** Joins: Ralith (ralith@moz-miv.lne.251.63.IP)
[17:00:14] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Connection closed)
[17:00:19] <FreeFull> steveklabnik: Is there any way to get from i64 to Option<i32> right now in the standard library?
[17:00:19] <equalsraf> checking out byteorder, looks good, thanks
[17:00:54] *** Joins: Rym_ (y@moz-a44.2as.55.31.IP)
[17:01:05] <steveklabnik> FreeFull: hrm. not sure tbh
[17:01:17] *** Joins: tkellen (tkellen@moz-nt9.hak.245.50.IP)
[17:01:27] <mbrubeck> proc: Why not just http://is.gd/fWIxj2 ?
[17:01:46] <proc> mbrubeck: since when does this work ?
[17:01:47] *** Quits: zulmin_ (quassel@moz-k4lnkc.epfl.ch) (Connection closed)
[17:02:07] <proc> mbrubeck: using rust nightly from 20.04
[17:02:09] *** Joins: zulmin (quassel@moz-i3mt4v.serverprofi24.net)
[17:02:21] <Titi_Alone> Is there a way to call rustc from rust itself?
[17:02:24] *** Quits: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[17:02:39] <mbrubeck> proc: It's working on the latest beta and nightly. What's it do on your system?
[17:02:41] <proc> mbrubeck: let's say: I've tried that before..
[17:02:55] <proc> refuses to convert
[17:03:06] *** Joins: zeebo (zeebo@moz-qtpltq.ut.vivintwireless.net)
[17:03:35] <steveklabnik> Titi_Alone: you could use the Command stuff, just like any external process, but we don't have CTFE yet. syntax extensions also sort of do this
[17:04:25] *** Quits: alonlevy_ (alon@moz-gt9.me4.28.5.IP) (Ping timeout: 121 seconds)
[17:04:31] *** Quits: trigen (MSX@moz-2vj6gq.tweaknet.net) (Ping timeout: 121 seconds)
[17:05:16] <frankmcsherry> steveklabnik: how many things do you do at once?
[17:05:34] *** Joins: sayan (sayan@moz-ip8.595.51.106.IP)
[17:05:57] *** Joins: ndhoule (ndhoule@moz-3eh.5o5.207.67.IP)
[17:06:03] <Titi_Alone> Thanks
[17:06:43] <proc> mbrubeck: sec. rechecking it.. I was talking about that with eddyb yesterday, from where my idea about an own function comes..
[17:06:54] *** Quits: mlsteele (Mibbit@moz-5ikfqn.mit.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[17:06:55] <proc> mbrubeck: but I think I've prob. found the real bug
[17:07:01] <mbrubeck> proc: If you do need to strip off a leading zero, maybe http://is.gd/f8NAeE
[17:07:45] <proc> oh, ty
[17:07:49] *** Quits: munksgaard (munksgaard@moz-ob0t16.0.fullrate.dk) (Ping timeout: 121 seconds)
[17:08:17] *** Joins: dzhulk (Adium@moz-rjn.hki.140.95.IP)
[17:09:02] *** Quits: shellac (pldms@moz-c7026f.bris.ac.uk) (Ping timeout: 121 seconds)
[17:09:06] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[17:09:06] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:09:59] *** Quits: JosiahOne (Thunderbird@moz-f2hp7h.biz.rr.com) (Ping timeout: 121 seconds)
[17:10:56] *** Joins: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net)
[17:11:06] *** Joins: JosiahOne (Thunderbird@moz-f2hp7h.biz.rr.com)
[17:12:17] *** Quits: Shackra (Jorge@moz-7bh.ng6.177.186.IP) (Ping timeout: 121 seconds)
[17:12:50] *** Joins: zzmp (zzmp@moz-ppks81.12ul.lrlq.5500.2604.IP)
[17:12:55] *** Quits: Rym_ (y@moz-a44.2as.55.31.IP) (Ping timeout: 121 seconds)
[17:13:12] *** Joins: khades1 (Thunderbird@moz-u45.3vk.74.212.IP)
[17:14:29] *** Joins: dinfuehr_ (dinfuehr@moz-b31i9i.highway.telekom.at)
[17:14:48] *** Quits: dzhulk (Adium@moz-rjn.hki.140.95.IP) (Ping timeout: 121 seconds)
[17:15:03] *** Joins: mlsteele (Mibbit@moz-5ikfqn.mit.edu)
[17:15:06] *** Quits: khades (Thunderbird@moz-u45.3vk.74.212.IP) (Ping timeout: 121 seconds)
[17:15:20] <naerbnic> Which is more idiomatic for an x : Box<A>: &*x or x.deref()?
[17:15:25] <Ms2ger> &*x
[17:15:35] <naerbnic> In all cases?
[17:15:45] *** Quits: Guest63 (textual@moz-qfs.570.70.83.IP) (Ping timeout: 121 seconds)
[17:15:54] <Ms2ger> Yes
[17:16:21] *** Joins: dmac_ (dmac@moz-4kcd1c.ca.comcast.net)
[17:16:26] <steveklabnik> frankmcsherry: far too many :p
[17:16:28] <mlsteele> I'd like to use std::time::duration::Duration. I get "error: use of unstable library feature 'std_misc'". I've spent ten minutes googling and still have no idea how to make the compiler bugger off.
[17:16:33] <steveklabnik> frankmcsherry: been enjoying your posts btw
[17:16:34] <talchas> though you can often do &x and have it convert
[17:16:56] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[17:17:00] *** Quits: zzmp (zzmp@moz-ppks81.12ul.lrlq.5500.2604.IP) (Ping timeout: 121 seconds)
[17:17:07] *** Joins: JosiahOne1 (Thunderbird@moz-ub5.sco.30.4.IP)
[17:17:09] *** Quits: JosiahOne (Thunderbird@moz-f2hp7h.biz.rr.com) (Ping timeout: 121 seconds)
[17:17:20] <frankmcsherry> steveklabnik: hooray. they've largely come out of interesting discussions with folks here. :)
[17:17:20] <mbrubeck> naerbnic: One reason is that Deref isn't in the prelude, so you can't call deref unless you import it.
[17:17:35] <naerbnic> mbrubeck: Ah, that’s a good point
[17:17:42] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[17:18:25] *** Joins: nano (nano@moz-00j6et.dynamic.kabel-deutschland.de)
[17:18:36] *** Quits: dinfuehr_ (dinfuehr@moz-b31i9i.highway.telekom.at) (Ping timeout: 121 seconds)
[17:18:50] *** Quits: marcusklaas (marcus@moz-0ol9oe.chello.nl) (Client exited)
[17:18:57] *** Joins: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net)
[17:19:38] <steveklabnik> mlsteele: Duration is unstable. you cannot use it except on nightly
[17:19:40] *** Joins: JosiahOne (Thunderbird@moz-f2hp7h.biz.rr.com)
[17:20:10] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[17:20:18] *** Joins: Guest74 (textual@moz-il1.n6s.204.65.IP)
[17:20:44] *** Joins: colinsurprenant (colin@moz-rmn4e2.169.electronicbox.net)
[17:20:57] *** Quits: new_one (new_one@moz-v3c.7o3.42.128.IP) (A TLS packet with unexpected length was received.)
[17:21:08] *** Quits: JosiahOne1 (Thunderbird@moz-ub5.sco.30.4.IP) (Ping timeout: 121 seconds)
[17:21:35] *** Quits: nstoddard (nstoddard@moz-urhoua.resnet.purdue.edu) (Ping timeout: 121 seconds)
[17:21:39] <Derecho> right, so closures have also changed significantly it seems
[17:22:00] <Derecho> I've tried moving towards the new format but that gives me errors I don't quite understand.
[17:22:07] <mlsteele> steveklabnik: ... I'm frustrated. I just want to write this program and be done. So my best course of action is to re-install rustc again to a new and more unstable version?
[17:22:11] <Derecho> here's the relevant code that used to work in 0.11 or 0.12 or whatever it was: http://s.drk.sc/pWwjVK?guess
[17:22:40] <Derecho> line 1 in that case is already wrong because apperantly I have to declare a closure parameter differently now
[17:22:51] *** Quits: Verdagon (Verdagon@moz-ff302e.ca.comcast.net) (Client exited)
[17:23:23] *** Joins: dstrbad (dstrbad@moz-3g901t.dsl.iskon.hr)
[17:23:33] *** Quits: essem2 (Thunderbird@moz-0g3v4k.biz.rr.com) (Client exited)
[17:23:41] <niconii> mlsteele: you could use the time crate from crates.io
[17:23:54] *** Quits: vidot_j_ (vidot_j@moz-oo4.ci3.5.163.IP) (Ping timeout: 121 seconds)
[17:23:54] <fkaa> are there any libraries for parsing language syntax (C for example)?
[17:23:58] <niconii> mlsteele: http://doc.rust-lang.org/time/time/index.html
[17:24:06] <Derecho> I've looked at the docs and the most similar approach seems to be declaring it as &Fn(&mut Game), however that results in more errors
[17:24:14] <mbrubeck> fkaa: https://github.com/Geal/nom is one of the more active ones
[17:24:26] <fkaa> nomnom
[17:24:32] <fkaa> looks good
[17:24:35] <mbrubeck> fkaa: There's also rust-peg and parser-combinators
[17:24:49] <Murarth> Derecho: Have you read http://doc.rust-lang.org/nightly/book/closures.html?
[17:24:59] <Derecho> that's what I just said
[17:25:00] <geal> fkaa: if you need help using nom, I'm here to help ;)
[17:25:05] *** Quits: dstrbad (dstrbad@moz-3g901t.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[17:25:08] <fkaa> gotcha
[17:25:29] *** Quits: vmeson (rmacleod@moz-hs5cri.cable.teksavvy.com) (Quit: Konversation terminated!)
[17:25:33] *** Joins: panicbit (panicbit@moz-r4ks4s.dip0.t-ipconnect.de)
[17:25:34] <Murarth> Derecho: This section looks like your use case: http://doc.rust-lang.org/nightly/book/closures.html#taking-closures-as-arguments
[17:25:36] <niconii> mlsteele: probably better to put time = "*" rather than time = "0.1" though
[17:25:52] <Derecho> Murarth: yes that's exactly what I'm looking at
[17:26:16] *** Joins: JosiahOne1 (Thunderbird@moz-ub5.sco.30.4.IP)
[17:26:17] <Derecho> so it appears I should rewrite |&mut Game| as &Fn(&mut Game)
[17:26:26] <Derecho> but that gives me loads of errors
[17:26:29] *** Joins: Zr40 (zr40@moz-92llkv.adsl.xs4all.nl)
[17:26:39] <mbrubeck> Derecho: More typically you would use F where F: Fn(&mut Game)
[17:27:02] <Derecho> really? that one seemed to deviate more from what I had
[17:27:07] <mbrubeck> though both should be possible
[17:27:22] <Derecho> which one should I strive to use?
[17:27:28] <mbrubeck> Derecho: Well, the static dispatch option wasn't possible with the old (boxed) closures.
[17:27:35] *** Joins: dellavg (dellavg@moz-t682jd.retail.telecomitalia.it)
[17:27:40] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Connection closed)
[17:27:44] *** Quits: JosiahOne (Thunderbird@moz-f2hp7h.biz.rr.com) (Ping timeout: 121 seconds)
[17:27:46] <Derecho> the static dispatch one doesn't look very intuitive to me haha
[17:27:56] *** Quits: mlsteele (Mibbit@moz-5ikfqn.mit.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[17:27:57] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[17:28:07] *** Joins: presidentJFK (Mibbit@moz-3ob.7kg.192.66.IP)
[17:28:14] <Derecho> I suppose it is a more verbose one
[17:28:33] <davebettin> Looking for opinions; is Rust a good fit for new a product which requires heavy data transformation/mapping, postgres data storage, and a HTTP API?
[17:28:36] *** dmac_ is now known as dmac
[17:28:50] *** Joins: zelda (Mibbit@moz-i7cb3r.fios.verizon.net)
[17:29:05] *** Quits: zelda (Mibbit@moz-i7cb3r.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[17:29:26] *** chmanchester is now known as chmanchester|afk
[17:30:05] *** Quits: masterofchess (Icedove@moz-ag828p.dyn.telefonica.de) (Client exited)
[17:30:06] <Derecho> trying that static dispatch one now, which gives me different, somewhat more understandable errors
[17:30:40] <mbrubeck> Derecho: What errors do you get (in either case)?
[17:30:53] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[17:32:31] *** Joins: Matthias247 (Miranda@moz-49li60.hsi14.kabel-badenwuerttemberg.de)
[17:32:33] <Derecho> I was looking if I could solve the static dispatch errors without asking, but here you go: http://s.drk.sc/wGI1LT/ . the dynamic dispatch did: http://s.drk.sc/Qr048n/
[17:32:37] <Derecho> mbrubeck: ^
[17:33:14] <mbrubeck> Derecho: You probably need to use FnMut instead of Fn
[17:33:14] *** Quits: Guest67 (textual@moz-rras9m.gwi.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[17:33:28] <mbrubeck> since run_block's closure mutates its environment
[17:33:45] *** Joins: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net)
[17:34:46] <Derecho> hmm *gears in brain grinding*
[17:35:07] *** Joins: trigen (MSX@moz-sgda69.static.versatel.nl)
[17:35:08] <mbrubeck> Derecho: And sprinkle some &mut everywhere: http://is.gd/1CMoLn
[17:35:17] <mbrubeck> in the trait object case
[17:35:38] <ryanhiebert> I'm doing research about coroutines in different languages (Python, Javascript, C++, Go, C#). Go's coroutines are implicitly switched (no need to write await or yield). ISTM that it requires a Runtime, which Rust no longer has (requires?). Did/does Rust have a comparable feature to goroutines?
[17:35:49] *** Joins: dinfuehr_ (dinfuehr@moz-b31i9i.highway.telekom.at)
[17:35:57] <talchas> rust did have green threading, it was removed
[17:36:19] <ryanhiebert> Bad design, or just immature and needs to be on crates.io?
[17:36:23] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Ping timeout: 121 seconds)
[17:36:41] *** Quits: sayan (sayan@moz-ip8.595.51.106.IP) (Ping timeout: 121 seconds)
[17:36:46] *** Quits: hjr3 (hradtke@moz-dmp.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[17:36:47] *** Quits: lenstr (lenstr@moz-h5k.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[17:36:55] *** Joins: hjr3 (hradtke@moz-dmp.av4.169.69.IP)
[17:37:03] *** Joins: lenstr (lenstr@moz-h5k.vju.25.171.IP)
[17:37:16] *** Quits: hjr3 (hradtke@moz-dmp.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[17:37:29] <Derecho> mbrubeck: right so should I go back to trying the dynamic dispatch method again then?
[17:37:48] <Derecho> I'm not really sure what the difference is. I imagine static does more compiletime stuff?
[17:37:55] <talchas> I forget the details, I think some was that enough could be done externally, and rust in general was moving towards low level/low overhead
[17:38:14] *** Quits: lenstr (lenstr@moz-h5k.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[17:38:32] <pyon> Does the unsafe subset of Rust have anything like C's flexible array members?
[17:38:34] *** Joins: lenstr (lenstr@moz-h5k.vju.25.171.IP)
[17:38:39] *** Joins: Racquetball (namestolenw@moz-dnlovt.cpe.twtelecom.net)
[17:38:41] <talchas> and segmented stacks kept having issues, and without that green threads are a lot less exciting
[17:38:52] *** Quits: Kynes (Kynes@moz-j2us35.mit.edu) (Quit: Leaving)
[17:39:32] <talchas> pyon: so you can do struct Foo<T> { x: whatever, y: [T] }, but last I checked you couldn't do struct Foo { y: [u8] }, and using it is generally a complete pain
[17:39:42] <Derecho> ah man, whenever I change something, I get a completely different error that I can't seem to comprehend
[17:39:47] <Derecho> I must be missing something fundamental
[17:39:50] *** Joins: ai (ai@moz-pqofrl.sunline.net.ua)
[17:39:52] <pyon> talchas: It's meant to be dynamically allocated anyway.
[17:39:52] *** Joins: Lurkin (Lurkin@moz-p4efgs.mpls.qwest.net)
[17:40:09] <forgottenone> what is the way to define singly linked list in rust?
[17:40:20] <talchas> pyon: yeah, but things like initializing it were still obnoxious
[17:40:35] <ryanhiebert> So does that mean that Rust and its community think that explicit cooperative multithreads (using yield/async/await) are likely to be a better model?
[17:40:45] <talchas> forgottenone: struct List<T> { Nil, Cons<Box<List<T>> } for example
[17:40:49] *** Quits: moa (Cedric@moz-ltq9j8.rev.numericable.fr) (Ping timeout: 121 seconds)
[17:40:49] *** Joins: abique (abique@moz-alq0r9.ko9f.54u1.0e35.2a01.IP)
[17:41:00] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Connection closed)
[17:41:07] <pyon> talevy: Cons( ... )
[17:41:09] <niconii> enum List<T> rather
[17:41:13] <talchas> er, yeah
[17:41:15] *** Joins: JosiahOne (Thunderbird@moz-f2hp7h.biz.rr.com)
[17:41:16] <pyon> talchas: *
[17:41:19] <pyon> sorry talevy 
[17:41:29] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[17:41:47] *** Quits: JosiahOne1 (Thunderbird@moz-ub5.sco.30.4.IP) (Ping timeout: 121 seconds)
[17:42:10] *** Quits: Rusky (russell@moz-de0fff.slkc.qwest.net) (Quit: Leaving.)
[17:42:12] <talchas> ryanhiebert: I think it's more that /for rust's goals/, native threads are necessary, and you can build green threading on top of them, but not the other way around
[17:42:28] <b52> is there a particular reason that Float lacks min_positive() in correspondance to f32/f64::MIN_POSITIVE?
[17:42:53] <ryanhiebert> talchas: OK, thanks. I've got more research to do, but thanks for a bit of perspective.
[17:43:10] <forgottenone> ok thanks,i saw @ or ~ when searching singly linked list, are they removed
[17:43:12] <Derecho> mbrubeck: why are these extra &mut's thrown in? it makes it look as the closure itself is mutable? that doesn't sound right
[17:43:50] *** Joins: Guest67 (textual@moz-m4uijf.lib.me.us)
[17:43:56] <duncan> forgottenone: yep, long gone
[17:44:09] <bluss> Derecho: well the closure needs to be in a mutable location if it's an FnMut
[17:44:45] <forgottenone> talchas,where is the head in this definition
[17:44:49] <Derecho> I don't know if it's an FnMut or an Fn. getting quite confused now
[17:44:55] *** Joins: alonlevy_ (alon@moz-gt9.me4.28.5.IP)
[17:45:07] <Derecho> the closure is simply typed up as a parameter, not stored anywhere
[17:45:34] <Derecho> I also don't feel like I need to make the closure mutable, I'm not changing it's behaviour
[17:45:42] <Derecho> it's the access it requires that is mutable
[17:45:43] *** Joins: btobolaski (btobolaski@moz-ltbh80.va.comcast.net)
[17:46:03] <talchas> forgottenone: er, that should be enum List<T> { Nil, Cons(T, Box<List<T>) }
[17:46:11] *** Joins: Rusky (russell@moz-mp2nkm.slkc.qwest.net)
[17:46:16] <bluss> Derecho: right, but that's important
[17:46:24] <forgottenone> talchas: oh ok thanks again
[17:46:24] *** Quits: pyon (pyon@moz-v9d.mdl.7.179.IP) (Connection closed)
[17:46:25] *** Joins: hjr3 (hradtke@moz-dmp.av4.169.69.IP)
[17:46:27] <bluss> Derecho: the closure value stores the captures themselves
[17:46:49] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[17:46:50] *** ChanServ sets mode: +o pnkfelix
[17:46:52] <bluss> Derecho: (or the references), either way it needs mut access to that value
[17:46:53] <talchas> in which case you do something like let x = Cons(1, Box::new(Cons(2, Nil))), (assuming "use List::*") etc and the type of x is List<i32>
[17:46:58] <bluss> to be able to mutate capturees
[17:47:03] <Derecho> yeah I can understand it needing mut access
[17:47:07] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[17:47:08] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[17:47:15] *** Joins: glen (Mibbit@moz-eub.k2c.189.12.IP)
[17:47:15] <Derecho> in fact it always had that
[17:47:19] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[17:47:38] *** Quits: SDX2000 (sandeepd@moz-knd.sg7.54.103.IP) (Quit: Konversation terminated!)
[17:47:38] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[17:47:50] <glen> Hello, what trait do I derive to convert a primitive number into an enum?
[17:48:11] <mbrubeck> glen: It was `FromPrimitive` but it was deprecated or something recently...
[17:48:33] <mbrubeck> glen: The trait is in the `num` crate now, but I don't think that supports `derive(FromPrimitive)`?
[17:48:41] <kagami> Why do I need to write "use std" inside submodules? http://is.gd/lSJyjD
[17:48:41] <mbrubeck> Derecho: Here's a simplified version of the generic approach: http://is.gd/TXoYmc
[17:48:47] *** Joins: pyon (pyon@moz-v9d.mdl.7.179.IP)
[17:48:51] <Remram> OMG travis changed their sender address from notifications@ to builds@
[17:49:10] <talchas> kagami: name resolution is relative to the current module, and std is in the crate root
[17:49:12] <Remram> breaking all my setup and letting my software break for 5 days without me knowing
[17:49:23] <talchas> (use statements are always absolute)
[17:49:34] <mbrubeck> kagami: http://is.gd/0LFSgh also works
[17:49:34] <talchas> you can also do ::std::foo if you prefer
[17:49:43] <Derecho> mrbkap: ah that's the static dispatch one right? I see some &muts disappeared compared to your previous paste
[17:49:46] <Derecho> mbrubeck: *
[17:49:49] <mbrubeck> Derecho: Yeah
[17:50:03] <Derecho> so why is it a FnMut actually?
[17:50:07] *** Joins: oceanwhit (christianwh@moz-a38b1m.ca.comcast.net)
[17:50:08] <glen> mbrubeck: So I'm going to have roll my own implementation?
[17:50:17] <mbrubeck> Derecho: Because it needs to mutate its captured environment.
[17:50:21] <Derecho> right.
[17:50:30] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[17:50:35] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[17:50:39] <Derecho> I think I had what you just pasted at a certain moment (in the past 10 minutes I've had many variants)
[17:50:47] <Derecho> let me go back to that as it does look the cleanest
[17:51:18] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[17:51:40] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Ping timeout: 121 seconds)
[17:51:50] <Derecho> error: cannot borrow immutable local variable `draw_closure` as mutable
[17:52:03] <Derecho> that's line 5 in your last paste mbrubeck 
[17:52:47] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[17:52:49] *** Joins: Lee1092 (uid13277@moz-p2e1ii.brockwell.irccloud.com)
[17:53:01] <Derecho> not quite sure what borrowing it thinks is going on here
[17:53:07] <Derecho> I'm just executing it
[17:53:19] <Derecho> neither do I see why the closure itself should be mutable
[17:53:33] <mbrubeck> Did I paste the wrong link? http://is.gd/TXoYmc
[17:53:34] <Derecho> or I'm misunderstanding the error
[17:53:36] *** Quits: glen (Mibbit@moz-eub.k2c.189.12.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:53:39] <mbrubeck> Yes, the closure needs to be mutable.
[17:53:58] <mbrubeck> Behind the scenes, the closure is an anonymous struct that contains the captured environment, and FnMut is implemented on that struct.
[17:53:59] <Derecho> no that's the link I had open.
[17:54:09] <kagami> talchas: mbrubeck: IMO this is strange. I need to re-use a lot of extern creates/submodules in each file... "::mod" syntax is too verbose.
[17:54:14] *** Quits: oceanwhit (christianwh@moz-a38b1m.ca.comcast.net) (Ping timeout: 121 seconds)
[17:54:24] <Derecho> ok so I got that FnMut was for when you want to mutate your captured environment
[17:54:26] <Derecho> I'm using that
[17:54:29] *** Quits: nyx (nyx@moz-7o34ff.albyny.csvoip.net) (Connection closed)
[17:54:32] *** Joins: zokker13 (Mibbit@moz-pnjjum.dip0.t-ipconnect.de)
[17:54:35] <Derecho> but the error is about draw_closure itself
[17:54:43] *** Quits: mkpankov (user@moz-nleeis.partnertech.ru) (Ping timeout: 121 seconds)
[17:55:05] *** Joins: nerdopoly (nerdopoly@moz-ouaagf.range86-143.btcentralplus.com)
[17:55:15] <zokker13> hellow everybody. It seems I've found an annoying 'bug' in the Rust book documentation about Gereics. 
[17:55:17] <mbrubeck> Derecho: My playpen link should have `mut draw_closure: F` in the arguments to run_loop
[17:55:22] <mbrubeck> Derecho: Which should make it happy.
[17:55:32] *** Joins: Savago (Savago@moz-8hd.3b6.246.162.IP)
[17:55:35] <Derecho> right
[17:55:47] <Derecho> just pasted what I had so you could confirm I took things right from your paste: http://s.drk.sc/IMn4Uh?guess
[17:55:55] *** Joins: demelev (Mibbit@moz-5qbmjd.dyn.idknet.com)
[17:55:56] <Derecho> I'll add that mut then, but I don't understand what it's for
[17:55:57] *** Joins: Rym_ (y@moz-a44.2as.55.31.IP)
[17:56:47] <kimundi> Derecho: Its the same mut as in "let foo" vs "let mut foo"
[17:56:53] <Derecho> woa that seems to work. well I still get errors, but a completely different section of the code, and I'm assuming it's unrelated
[17:57:08] <Derecho> kimundi: right, but why does it require the closure itself to be mutable?
[17:57:11] <Derecho> I'm giving it the closure
[17:57:13] <Derecho> it is merely running it
[17:57:14] <kimundi> function arguments are also just variable bindings
[17:57:17] *** Joins: mib_v6emzi (Mibbit@moz-i7cb3r.fios.verizon.net)
[17:57:17] <Derecho> it's not changing it in any way
[17:57:18] <mbrubeck> Derecho: Line 5, `draw_closure(self)` is essentially sugar for `use std::ops::FnMut; FnMut::call_mut(&mut draw_closure, (self,));`
[17:57:34] <demelev> How knows what is metadata contained in libraries? What kind of information metadata represent?
[17:57:39] <mbrubeck> And you can't do `&mut draw_closure` unless `draw_closure` is a mutable location.
[17:57:45] <Derecho> oh right ok that sugar explains it a bit
[17:57:45] *** Joins: nstoddard (nstoddard@moz-urhoua.resnet.purdue.edu)
[17:57:47] <kimundi> Derecho: Running the closure is changing it, since the closure is changing the captures
[17:57:48] *** Quits: brson (brson@moz-l8ebtf.sfo1.mozilla.com) (Ping timeout: 121 seconds)
[17:57:52] *** Quits: kushal (kdas@moz-cbaein.202.sitibroadband.in) (Quit: Leaving)
[17:58:02] <Derecho> kimundi: really?
[17:58:03] *** Joins: dzhulk (Adium@moz-rjn.hki.140.95.IP)
[17:58:05] <Derecho> that..
[17:58:10] <Derecho> that is completely unexpected.
[17:58:18] *** Joins: Porkepix (Porkepix@moz-6v7.qtj.138.157.IP)
[17:58:30] <Derecho> so if the closure changes any of its captures, it's changing itself too?
[17:58:33] <Derecho> that sounds so weird.
[17:58:34] <kimundi> Its the same as any other type with a &mut self method
[17:58:43] <mbrubeck> The captures are "fields" of the closure.
[17:59:10] <Derecho> so the closure is more like an object rather than a function then. oh I suppose the Fn and FnMut types tell me that.
[17:59:12] <Derecho> hmm.
[17:59:12] <kimundi> That is to say, no _actual_ mutation has to happen, but as far as the ztype system is concerned, it _might_ happen.
[17:59:21] <kimundi> exactly
[17:59:26] *** Quits: zcourts (zcourts@moz-7ms809.cable.virginm.net) (Ping timeout: 121 seconds)
[17:59:29] <Derecho> woa
[17:59:30] <mbrubeck> Think about how you'd implement this without closure syntax.  You'd have to move or borrow the captured variables into a mutable struct, and implement a `call` function that takes a mutable reference to that struct...
[17:59:32] <Derecho> I think I understand it now
[17:59:36] *** Joins: Gabriel_7 (Gabriel@moz-2vj54m.mtgr.92aj.0e35.2a01.IP)
[17:59:48] <Derecho> ah but I did have this working *with* closures without having to make it mutable :p
[17:59:52] <Derecho> just that it was 0.11 haaha
[17:59:55] *** Quits: Fiveside (fiveside@moz-t2eatg.vsp.com) (Ping timeout: 121 seconds)
[17:59:58] *** Joins: brson (brson@moz-u3dg2t.sfo1.mozilla.com)
[17:59:58] *** ChanServ sets mode: +ao brson brson
[18:00:06] *** Joins: tadh (quassel@moz-pg51s5.CWRU.Edu)
[18:00:23] <Derecho> well, thank you all very much anyway
[18:00:25] *** Quits: zokker13 (Mibbit@moz-pnjjum.dip0.t-ipconnect.de) (Quit: http://www.mibbit.com ajax IRC Client)
[18:00:26] *** Quits: Rym_ (y@moz-a44.2as.55.31.IP) (Ping timeout: 121 seconds)
[18:00:40] <Derecho> it looks like it's solved (I'll find out when I update the rest of the code)
[18:00:44] <Derecho> and I think I understand
[18:01:02] <Derecho> probably need to let it sink in a bit
[18:01:15] <kimundi> Derecho: let mut a = 5; let mut f = || a += 1; is equivalent to let mut a = 5; struct F { capture1: &mut i32 } impl FnMut for F { fn call_mut(&mut self) { *self.capture1 += 1; } } let mut f = F { capture1: &mut a };
[18:02:41] *** Quits: Guest67 (textual@moz-m4uijf.lib.me.us) (Quit: Textual IRC Client: www.textualapp.com)
[18:02:48] *** Quits: IPoAC (franklin@moz-uodqn2.univ-tlse1.fr) (Quit: WeeChat 1.1.1)
[18:02:50] *** Joins: Fiveside (fiveside@moz-t2eatg.vsp.com)
[18:03:24] <Derecho> yea I would've done 'let f = || a+= 1;' initially
[18:03:45] <Derecho> but that makes sense now that I know what happens on the background
[18:04:45] *** Joins: TheLemonMan (lemonboy@moz-afr3uv.50-151.net24.it)
[18:05:48] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[18:06:00] *** Quits: trigen (MSX@moz-sgda69.static.versatel.nl) (Ping timeout: 121 seconds)
[18:06:52] *** Joins: jaen (jaen@moz-ifmik2.copit.pl)
[18:07:11] *** Quits: dzhulk (Adium@moz-rjn.hki.140.95.IP) (Ping timeout: 121 seconds)
[18:07:25] <Derecho> lol fail! changed to panic!
[18:07:28] <Derecho> that seems rather trivial
[18:08:57] *** Joins: meh (meh@moz-2vi7cf.42-151.net24.it)
[18:09:06] <rillian> I'm having trouble linking rust code into a C++ project. https://github.com/rillian/rust-ffi
[18:09:09] *** Quits: Ms2ger (Ms2ger@moz-t9m.9ho.190.193.IP) (Ping timeout: 121 seconds)
[18:09:33] <rillian> linker can't find the test_rust, despite it being in the .a
[18:09:50] <rillian> any idea what I'm doing wrong?
[18:10:13] <kagami> W-Why I can't write s->v or at least just *s.v instead of (*s).v? It makes the code full of parantheses mess...
[18:11:05] *** Joins: gregburd (uid85367@moz-513f2i.ealing.irccloud.com)
[18:11:18] <bluss> kagami: can't you useu s.v?
[18:11:22] <Dabo> kagami, where are you needing to use (*s).v? just s.v should work 
[18:11:54] <kagami> bluss: Dabo: it doesn't work if s is raw pointer.
[18:12:02] *** bvssvni is now known as bvssvni_
[18:12:11] *** Joins: vidot_j_ (vidot_j@moz-ljv.mv3.5.163.IP)
[18:12:26] *** Joins: mib_rhlvys (Mibbit@moz-5f6pan.biz.rr.com)
[18:12:29] <myname> i am not sure if you should add seperate syntax for raw pointers
[18:12:29] <bluss> aha, yeah those are a special case
[18:13:39] *** Joins: james4k (james@moz-fm2a4v.consolidated.net)
[18:13:42] *** Quits: mkpankov` (mkpankov@moz-3ln.70f.16.195.IP) (Ping timeout: 121 seconds)
[18:13:44] *** Joins: w4ffles (textual@moz-g7g.toe.144.12.IP)
[18:13:51] <Dabo> kagami, ah, ok - is there a specific reason for not working with references the majority of the time?
[18:13:55] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[18:14:00] *** Quits: dawidc__ (dpc@moz-52v2l7.nvidia.com) (Connection closed)
[18:14:00] *** Quits: dpc (dpc@moz-52v2l7.nvidia.com) (Connection closed)
[18:14:00] *** Quits: dpc_ (dpc@moz-52v2l7.nvidia.com) (Connection closed)
[18:14:17] *** Quits: alonlevy_ (alon@moz-gt9.me4.28.5.IP) (Ping timeout: 121 seconds)
[18:14:17] <mbrubeck> rillian: I think you need `pub extern fn`  ... though I tried that and it's still not working for me
[18:14:38] *** Joins: zzmp (zzmp@moz-ppks81.12ul.lrlq.5500.2604.IP)
[18:14:44] <kagami> Dabo: no such reason. I'm just working with C code and need to use raw pointers almost all the time.
[18:15:02] <rillian> mbrubeck: indeed
[18:15:04] *** Quits: zzmp (zzmp@moz-ppks81.12ul.lrlq.5500.2604.IP) (A TLS packet with unexpected length was received.)
[18:15:15] <mbrubeck> rillian: also `extern "C"` in your C++ code
[18:15:25] *** Quits: Uther (Thunderbird@moz-gssp49.fbx.proxad.net) (Client exited)
[18:16:02] *** Joins: Uther (Thunderbird@moz-gssp49.fbx.proxad.net)
[18:16:37] *** Joins: areski (areski@moz-aehvq9.user.ono.com)
[18:16:41] <mbrubeck> rillian: https://github.com/rillian/rust-ffi/compare/master...mbrubeck:master
[18:17:04] *** Joins: vidot_j__ (vidot_j@moz-pi5.mv3.5.163.IP)
[18:17:45] <Dabo> kagami, ah, ok - I'm not entirely sure, but I think the convention is to expose things as references outside of the unsafe code which interacts with C - since dereferencing/using unsafe pointers is inherently unsafe as well
[18:18:05] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[18:18:39] *** Quits: ewilazarus (ewilazarus@moz-0bk.f4i.70.141.IP) (Quit: Leaving)
[18:19:05] <rillian> mbrubeck: aha! thanks much.
[18:19:09] *** Quits: frankmcsherry (frankmcsher@moz-4u8vq8.adsl.alicedsl.de) (Connection closed)
[18:19:19] *** Quits: nico (nico@moz-dalf30.dip0.t-ipconnect.de) (Connection closed)
[18:19:22] *** Joins: andresv (textual@moz-l382a3.cable.starman.ee)
[18:20:02] *** Quits: vidot_j_ (vidot_j@moz-ljv.mv3.5.163.IP) (Ping timeout: 121 seconds)
[18:20:04] *** Joins: vidot_j_ (vidot_j@moz-5tk.l0h.5.163.IP)
[18:21:00] <rillian> do bsds need the additional libraries? doesn't seem necessary on mac or linux.
[18:21:03] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[18:21:10] *** Quits: vidot_j__ (vidot_j@moz-pi5.mv3.5.163.IP) (Ping timeout: 121 seconds)
[18:21:24] <rillian> and it's a pain to parse that out of the rustc output in the makefile
[18:21:52] *** Joins: tcard (tcard@moz-jdrdbk.ddns.jazztel.es)
[18:21:55] * rillian wonders if a 'makedep' mode is in order
[18:22:03] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[18:23:14] *** Quits: gonzaloserrano (Adium@moz-1nv.3t7.97.62.IP) (Quit: Leaving.)
[18:23:31] *** Joins: avikpal (avikpal@moz-bcb.bnc.79.112.IP)
[18:24:15] *** Joins: vmeson (rmacleod@moz-hs5cri.cable.teksavvy.com)
[18:25:03] *** Quits: dinfuehr_ (dinfuehr@moz-b31i9i.highway.telekom.at) (Connection closed)
[18:25:14] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[18:25:24] *** Joins: dinfuehr_ (dinfuehr@moz-b31i9i.highway.telekom.at)
[18:25:46] *** Quits: hjr3 (hradtke@moz-dmp.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[18:25:56] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Quit: Leaving.)
[18:26:14] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[18:26:29] *** Quits: happy-dude_ (uid62780@moz-jt3517.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[18:26:30] <b52> Can't I use `num` in the playpen?
[18:26:32] *** Quits: vmeson (rmacleod@moz-hs5cri.cable.teksavvy.com) (Quit: Konversation terminated!)
[18:27:38] *** Joins: OtterCoder (quassel@moz-t96php.onrq.kn87.100e.2600.IP)
[18:28:41] *** Joins: aepsil0n (eduard@moz-g8ss54.mv2h.pepi.8071.2a02.IP)
[18:28:45] *** Joins: avikpal_ (avikpal@moz-bjc.3l6.233.117.IP)
[18:28:55] <gsingh93> b52 it's not part of the standard library
[18:29:03] *** Quits: nerdopoly (nerdopoly@moz-ouaagf.range86-143.btcentralplus.com) (Ping timeout: 121 seconds)
[18:29:11] <b52> :/
[18:29:28] *** Quits: dinfuehr_ (dinfuehr@moz-b31i9i.highway.telekom.at) (Ping timeout: 121 seconds)
[18:29:29] *** Quits: dinfuehr (dominik@moz-b31i9i.highway.telekom.at) (Ping timeout: 121 seconds)
[18:29:30] *** Joins: alonlevy_ (alon@moz-gt9.me4.28.5.IP)
[18:29:33] *** Quits: avikpal (avikpal@moz-bcb.bnc.79.112.IP) (Ping timeout: 121 seconds)
[18:30:07] <gsingh93> b52: https://github.com/rust-lang/rust-playpen/issues/67
[18:30:53] *** Quits: tkellen (tkellen@moz-nt9.hak.245.50.IP) (Client exited)
[18:31:00] *** Quits: andresv (textual@moz-l382a3.cable.starman.ee) (Quit: My Mac has gone to sleep. ZZZzzz…)
[18:31:09] <OtterCoder> Hello! I'm having a bit of trouble getting Cargo to download a dependency. Here's my Cargo.toml: http://pastebin.com/ensvkE2e
[18:31:14] *** Joins: logan_e (logan_e@moz-ltn.qg3.218.73.IP)
[18:31:17] *** Joins: woboats (tatterdemal@moz-a0dnkb.ca.comcast.net)
[18:31:37] <gsingh93> OtterCoder: you spelled dependencies wrong
[18:31:41] <b52> OtterCoder: type: dependancies
[18:31:58] <OtterCoder> Derf. Sorry.
[18:32:12] <gsingh93> Cargo should have told you something was wrong
[18:32:17] *** Joins: jshs (jshs@moz-86l8mm.dip0.t-ipconnect.de)
[18:32:21] <gsingh93> if not i feel like that's a bug
[18:33:05] <OtterCoder> gsingh93: It mentioned an unused manifest key, but that wasn't obvious to me. 
[18:33:30] *** chmanchester|afk is now known as chmanchester
[18:33:52] *** Joins: hjr3 (hradtke@moz-dmp.av4.169.69.IP)
[18:34:10] <gsingh93> does anyone know if bounds checking is enabled in optimized builds?
[18:34:55] <b52> is there any development in treating literals as generic to allow code such as http://is.gd/psCbeT ?
[18:35:00] <kimundi> gsingh93: it is
[18:35:18] <b52> I asked the same question i think about five months ago, curious if something changed
[18:35:19] <kimundi> gsingh93: bound checking is neccessary for memory safety, so its never disabled
[18:35:27] *** Quits: OtterCoder (quassel@moz-t96php.onrq.kn87.100e.2600.IP) (Connection closed)
[18:35:39] *** Quits: avikpal_ (avikpal@moz-bjc.3l6.233.117.IP) (Ping timeout: 121 seconds)
[18:35:48] *** Joins: moa (Cedric@moz-h3f7lu.abo.wanadoo.fr)
[18:35:51] <rillian> oh, they _are_ required on linux, now that the function is linked
[18:36:02] <gsingh93> kimundi: if v is a vector, should `v[0]` have the same performance as `v.iter().nth(0).unwrap()`
[18:36:13] *** Joins: DrPete (DrPete@moz-7jn.4nb.124.2.IP)
[18:36:14] *** Quits: mib_rhlvys (Mibbit@moz-5f6pan.biz.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[18:36:15] <gsingh93> also, i agree it should be enabled
[18:36:43] *** Quits: logan_e (logan_e@moz-ltn.qg3.218.73.IP) (Client exited)
[18:36:52] <kimundi> gsingh93: in theory both should behave identical after optimizations applied, but I also wouldn't be surprised if the latter is slower
[18:36:53] *** Joins: fizzbooze (bp@moz-no6phj.sm5k.54kg.0101.2620.IP)
[18:36:58] <mbrubeck> b52: That particular code could use the num::FromPrimitive trait. I haven't seen any proposals to add special sugar for FromPrimitive...
[18:37:06] <mbrubeck> (or num::One)
[18:38:18] *** Joins: tkellen (tkellen@moz-nt9.hak.245.50.IP)
[18:38:22] *** Quits: tcard (tcard@moz-jdrdbk.ddns.jazztel.es) (Client exited)
[18:39:06] <gsingh93> should I be putting #[inline] on all my getters? I see that in various libraries and don't know if it's necessary
[18:40:16] *** Quits: silven (quassel@moz-0roor3.priv.bahnhof.se) (Ping timeout: 121 seconds)
[18:40:29] *** Joins: silven (quassel@moz-0roor3.priv.bahnhof.se)
[18:40:46] <kimundi> gsingh93: A function without that attribute will not be inlinable across crate boundaries - so if its public API and would benefit from being inlinable, then you could probably add it. Getters sound like the kind of thing that want it
[18:40:49] *** Quits: alonlevy_ (alon@moz-gt9.me4.28.5.IP) (Ping timeout: 121 seconds)
[18:41:03] *** Quits: fabiand (fabiand@moz-gg1f1p.dip0.t-ipconnect.de) (Quit: Verlassend)
[18:41:18] <gsingh93> kimundi: ok, thanks
[18:41:31] <Derecho> I got a simple question that I can't seem to answer from the docs, this is the last bit to get my code working under 1.1.0 . how do I copy a String?
[18:41:43] *** Quits: Amaranth (travis@moz-1raqsl.cpe.cableone.net) (Ping timeout: 121 seconds)
[18:41:44] <Derecho> so that the original is not borrowed by anything
[18:41:45] *** Quits: panicbit (panicbit@moz-r4ks4s.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[18:41:54] <flan3002> .clone()?
[18:42:08] <Derecho> I tried that, somehow that does an immutable borrow
[18:42:15] <b52> why should I need to call FromPrimitive? i mean 1.0 is basically untyped, but it could represent an f32, f64 and debatable also the integer types, which means it could be treated as of type Float, therefore making the addition legal
[18:42:20] <kimundi> What flan3002 said if you want a second independent String value
[18:42:30] *** Quits: errordeveloper (ilya@moz-8jq.ge6.157.37.IP) (Ping timeout: 121 seconds)
[18:42:46] <kimundi> Derecho: Well, it _needs_ a immutable borrow temporary to do the method call
[18:43:10] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[18:43:13] <Derecho> ok, but then when I want to use the original later on, mutably, I can't
[18:43:31] <Derecho> so it doesn't seem all that temporary
[18:43:38] <kimundi> Derecho: So if you are currently borrowing the String mutably through some other variable, you need to either use _that_ access path to call clone(), or make the borrow end beforehand
[18:43:55] <Derecho> no no, the clone itself isn't erroring
[18:43:59] <Derecho> the very next borrow of the original errors
[18:44:11] *** Joins: tcard (tcard@moz-jdrdbk.ddns.jazztel.es)
[18:44:20] <mbrubeck> b52: But if I implement Float for some custom non-primitive type, then `from(1.0)` might execute arbitrary code.  Which is not to say it's impossible... Rust does allow similar things for operator overloading.
[18:44:41] <kimundi> Derecho: OKay, this now is too complex for a answer without seeing error message and/Or code
[18:44:44] *** Joins: savage884 (dev@moz-39ha0d.com)
[18:44:47] <Derecho> kimundi: ok, hang on.
[18:45:07] <b52> does Rust support sealed traits?
[18:45:24] <savage884> Say I have a macro that uses ordering and I export that macro. Is there a way to ensure the guy consuming that macro doesn't need to add "use std::cmp::ordering" to his file (after decrypting some error messages)?
[18:45:37] *** Quits: tcard (tcard@moz-jdrdbk.ddns.jazztel.es) (Client exited)
[18:45:49] *** Quits: kamilc__ (kamil@moz-u843uu.play-internet.pl) (Quit: Linkinus - http://linkinus.com)
[18:45:57] *** Quits: Guest (textual@moz-rtn.fg7.77.192.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:46:03] <Derecho> kimundi: http://s.drk.sc/jeUxUN?guess line 22
[18:46:16] <mbrubeck> b52: Not explicitly, if I understand correctly. You might be able to simulate it by having a trait bounded on a private trait, or something...
[18:46:27] *** Joins: mirgatroid (Mibbit@moz-1an.tvi.50.65.IP)
[18:46:33] *** Joins: gonzaloserrano (Adium@moz-56v.o7s.231.77.IP)
[18:47:22] <kimundi> Derecho: trim() returns a &str, not a String, and str does not implement Clone, so you get a clone of the & pointer, resulting in a second &str that still borrows the original value
[18:47:46] <Derecho> ah. that explains things.
[18:48:04] <kimundi> Derecho: The clone() call basically does nothing as currently written - removing it would result in exactly the same behavior.
[18:48:06] *** Joins: vidot_j__ (vidot_j@moz-ttv.l0h.5.163.IP)
[18:48:11] *** Joins: qard (qard@moz-nekdha.vc.shawcable.net)
[18:48:23] <Derecho> would .clone().trim() do it?
[18:48:29] <Derecho> given that it then is on a String
[18:48:40] <kimundi> nah, that would not work either
[18:48:41] *** Quits: fmtq (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[18:48:47] <Derecho> indeed it doesn't.
[18:48:50] <Derecho> I thought it would.
[18:49:12] <Derecho> damn it, I like the idea and look of rust but I'm always fighting with comprehending what things do and mean
[18:49:13] <kimundi> 1) trim() is always defined on a &str, so it always returns a &str - the String gets automatically coerced to a &str on method call
[18:49:24] *** Quits: ellinokon (ellinokon@moz-gh5.r2h.62.178.IP) (A TLS packet with unexpected length was received.)
[18:49:27] *** Joins: ellinokon (ellinokon@moz-gh5.r2h.62.178.IP)
[18:49:34] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.5.1)
[18:49:48] *** Quits: JosiahOne (Thunderbird@moz-f2hp7h.biz.rr.com) (Ping timeout: 121 seconds)
[18:49:49] *** Joins: JosiahOne1 (Thunderbird@moz-ub5.sco.30.4.IP)
[18:50:00] <kimundi> 2) The .clone() would create a temporary new String into which that &str would point, but which would go out of scope at the end of that let statement directly, so the &str couldn't even life long enough
[18:50:01] *** Joins: Rym_ (y@moz-a44.2as.55.31.IP)
[18:50:06] <duncan> Derecho: it definitely takes some time to really internalize the borrow checker rules
[18:50:16] *** Quits: srh (srh@moz-g3qqf4.public.wayport.net) (A TLS packet with unexpected length was received.)
[18:50:33] *** Joins: mahdi (mahdi@moz-hvj.ahp.244.151.IP)
[18:50:43] *** Joins: purak (purak@moz-qam.l9c.236.88.IP)
[18:50:51] <Derecho> so String is implicitely cast to str when doing trim()?
[18:50:52] *** Joins: oceanwhit (christianwh@moz-a38b1m.ca.comcast.net)
[18:50:56] *** Joins: fmtq (fmtq@moz-d08itp.tpgi.com.au)
[18:51:07] *** Quits: vidot_j_ (vidot_j@moz-5tk.l0h.5.163.IP) (Ping timeout: 121 seconds)
[18:51:08] <Derecho> I must've misread the docs then, as I saw trim() being implemented for String
[18:51:26] *** Joins: renderful (renderful@moz-atg40s.co.comcast.net)
[18:51:33] <talchas> iirc trim() however returns &str
[18:51:36] <Derecho> nope, the docs say String implements trim().
[18:51:41] <kimundi> Derecho: link?
[18:51:43] <Derecho> it does indeed return a &str talchas 
[18:51:51] <talchas> because rather than allocate and copy the whole string, it just returns a new pointer and length
[18:51:54] <Derecho> http://doc.rust-lang.org/nightly/std/string/struct.String.html
[18:51:56] <mbrubeck> Derecho: It's under this heading http://doc.rust-lang.org/std/string/struct.String.html#deref-methods
[18:52:14] <kimundi> String derefs to str, and deref targets are shown in the docs
[18:52:26] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[18:52:34] <kimundi> string.trim() does String -> &String -> &str internally
[18:53:06] <Derecho> I'm trying to find that being mentioned on the page
[18:53:10] <talchas> I think the ordering might be more String -> str -> &str, but whatever :P
[18:53:17] <talchas> and I'm not actually sure
[18:53:22] <kimundi> Derecho: "Methods from Deref<Target=str>"
[18:53:28] <mbrubeck> Derecho: Anyway... if you want the trimmed string to be cloned, I think `input.trim().to_owned()` should work
[18:53:31] *** Joins: alexherbo2 (alex@moz-m1s.bcu.100.89.IP)
[18:53:34] <Derecho> oh yeah after a few minutes of scrolling I did find that header kimundi 
[18:53:36] <kimundi> talchas: I think you are right actually
[18:53:42] <Derecho> but even with that heading I would not have known to be honest
[18:53:58] <Derecho> and it disappears completely if you use your browser's search for 'trim('
[18:54:04] <talchas> Derecho: yeah, it mostly doesn't matter, which is whole point
[18:54:14] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[18:54:19] <kimundi> Derecho: Might be a bit confusing, but its definitely better than the past situation where String did not show those methods at all :)
[18:54:31] *** Quits: brson (brson@moz-u3dg2t.sfo1.mozilla.com) (Ping timeout: 121 seconds)
[18:54:35] *** Quits: mahdi (mahdi@moz-hvj.ahp.244.151.IP) (Ping timeout: 121 seconds)
[18:54:37] *** Quits: Rym_ (y@moz-a44.2as.55.31.IP) (Ping timeout: 121 seconds)
[18:54:50] *** Quits: JosiahOne1 (Thunderbird@moz-ub5.sco.30.4.IP) (Client exited)
[18:54:59] *** Quits: oceanwhit (christianwh@moz-a38b1m.ca.comcast.net) (Ping timeout: 121 seconds)
[18:54:59] <talchas> Derecho: the issue you're having isn't to do with the fact that's trim is implemented on &str, but that it returns &str
[18:55:23] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Connection closed)
[18:55:28] *** Quits: renderful (renderful@moz-atg40s.co.comcast.net) (Ping timeout: 121 seconds)
[18:55:29] <Derecho> well I'd have done myString.clone().trim() to work around that
[18:55:40] <Derecho> but that doesn't work either apperantly
[18:55:41] <kimundi> Derecho: Anyway, trim()'s doc show that it returns &str - again a bit confusing if you are not used to having two different string types, but its there at least :)
[18:56:01] <Derecho> I suppose it's like string[] and std::string in C++
[18:56:07] <kimundi> Derecho: myString.trim().to_owned() or similar is what you want
[18:56:08] <Derecho> that's not the confusing part
[18:56:16] <Derecho> o..k..
[18:56:18] *** Joins: alonlevy_ (alon@moz-gt9.me4.28.5.IP)
[18:56:25] *** Quits: dawehner (quassel@moz-ipohd2.hsi7.kabel-badenwuerttemberg.de) (Quit: No Ping reply in 180 seconds.)
[18:56:36] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[18:56:37] *** Quits: Titi_Alone (Thunderbird@moz-m4mn3h.rev.sfr.net) (Client exited)
[18:56:47] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[18:56:47] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:56:56] <kimundi> Derecho: BAsicllay just turn the &str borrow you get into a new independent String instead.
[18:57:16] <Derecho> I thought that was what I was trying to do
[18:57:33] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[18:57:35] *** Joins: BitPuffin (isak@moz-vunbu1.dyn.plus.net)
[18:57:40] <Derecho> I'm trying to find to_owned() in the docs now
[18:57:41] *** Joins: dawehner (quassel@moz-ipohd2.hsi7.kabel-badenwuerttemberg.de)
[18:57:41] <kimundi> Derecho: But if that still not works then you likey need to make sure that "input" is no longer borrowed at that point, which might mean crating the clone before the line where you do a &mut borrow of it
[18:57:55] <kimundi> Derecho: Sorry, not sure if to_owned() still exists
[18:58:06] <mbrubeck> http://doc.rust-lang.org/std/primitive.str.html#method.to_owned
[18:58:07] <talchas> Derecho: .clone().trim() would mean that you make a temporary copy that holds a string you point to with trim
[18:58:12] <talchas> but then don't store it anywhere
[18:58:15] <kimundi> playbot: let s: String = "1".to_owned(); s
[18:58:16] -playbot- "1"
[18:58:23] <kimundi> playbot: let s: String = "1".into(); s
[18:58:25] -playbot- "1"
[18:58:29] <Derecho> kimundi: think I found it. returns a String again haha.
[18:58:40] *** Joins: agjacome (agjacome@moz-6073ot.dynamic.jazztel.es)
[18:58:44] <talchas> the thing where let x = &1 is the same as let _hidden = 1; let x = &hidden; isn't done in the general case
[18:58:55] <kimundi> Derecho: See what talchas wrote for the clone().trim() issue
[18:59:02] <Derecho> talchas: but trim returns a string itself
[18:59:06] <Derecho> why do I need the intermediate one?
[18:59:12] <mbrubeck> Derecho: trim() returns a &str
[18:59:18] <mbrubeck> Derecho: to_owned() returns a String
[18:59:27] <kimundi> Derecho: It returns a pointer into the String, the &str after all.
[18:59:29] <Derecho> oh ofcourse there's no actual new memory there.
[18:59:29] <mbrubeck> trim() returns a borrowed slice of the original String/str
[18:59:30] *** Joins: bfrog (tburdick@moz-hpc0jl.il.comcast.net)
[18:59:38] <mbrubeck> to_owned() allocates a new String
[18:59:43] <mbrubeck> and copies the slice into it.
[18:59:43] *** Quits: ismaelga (ismaelga@moz-0r94oo.cpe.netcabo.pt) (Connection closed)
[18:59:46] <bfrog> does rust allow dynamic libraries?
[18:59:49] *** Joins: ismaelga (ismaelga@moz-0r94oo.cpe.netcabo.pt)
[18:59:54] <mbrubeck> bfrog: Yes.
[18:59:55] <Derecho> but given that I now have a reference to part of that intermediate string, should that not prevent it from going out of scope?
[18:59:56] *** Quits: hjr3 (hradtke@moz-dmp.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:00:10] <bfrog> so, is there the equivalent of dlopen then for rust libs in rust programs?
[19:00:13] <talchas> bfrog: (but it doesn't work great with dlopen() stuff)
[19:00:21] <kimundi> bfrog: Theretical yes, but there is no good library/language support for them to have an actual safe interface yet
[19:00:28] <bfrog> aw
[19:00:29] <talchas> bfrog: because the whole lifetime thing doesn't work well
[19:00:33] *** Quits: ismaelga (ismaelga@moz-0r94oo.cpe.netcabo.pt) (Connection closed)
[19:00:54] *** Joins: ismaelga (ismaelga@moz-0r94oo.cpe.netcabo.pt)
[19:00:59] <niconii> Derecho: rust isn't garbage-collected, so references don't keep data alive. something needs to own the data
[19:01:05] <bfrog> ah right... though don't traits define lifetimes?
[19:01:10] <Derecho> I assumed there was a reference count
[19:01:11] <kimundi> Derecho: References do not have active roles - they do not cause thing to live longer
[19:01:13] *** Quits: areski (areski@moz-aehvq9.user.ono.com) (Ping timeout: 121 seconds)
[19:01:31] <Derecho> I thought that was the whole borrowing thing haha
[19:01:31] *** Joins: sproing (Mibbit@moz-m4or9h.pppoe.byfly.by)
[19:01:32] <talchas> you can still call dlopen() and transmute dlsym() results into the correct types, which works... as long as you don't need any types or traits or generic functions from there
[19:01:33] <kimundi> Derecho: references are pure dumb pointers at runtime - zero runtime tracking.
[19:01:34] *** Joins: areski (areski@moz-hk80ce.user.ono.com)
[19:01:41] <niconii> Derecho: there's only a reference count if you explicitly use Rc or Arc; rust uses borrow-checking which is something else altogether
[19:02:04] *** Joins: DerisiveLogic (smuxi@moz-1jqqlg.biz.rr.com)
[19:02:10] <Derecho> ok. and the borrow-checking wouldn't see that I am storing the result of trim()?
[19:02:10] <kimundi> Derecho: The compiler just passively checks them to behave correctly during compilation, and then either errors out or lets the rest continue
[19:02:29] *** Quits: sproing (Mibbit@moz-m4or9h.pppoe.byfly.by) (Quit: http://www.mibbit.com ajax IRC Client)
[19:02:35] *** AutomatedTester|AFK is now known as AutomatedTester
[19:02:43] <talchas> Derecho: if you have a borrow lasting longer than its source data's lifetime, it doesn't extend the source data, it gives you an error
[19:02:46] *** Joins: Shackra (Jorge@moz-7bh.ng6.177.186.IP)
[19:02:50] <kimundi> Derecho: It sees, and complains, because it conflicts with you _also_ wanting to mutate the string it points at at the same time
[19:02:51] *** Quits: alonlevy_ (alon@moz-gt9.me4.28.5.IP) (Ping timeout: 121 seconds)
[19:02:53] <Derecho> talchas: I noticed.
[19:03:04] <Derecho> right
[19:03:06] <Derecho> ok
[19:03:18] <Derecho> I'll take it that this is all intended then
[19:03:23] <Derecho> now to find a way around it
[19:04:11] <Derecho> if I do input.to_owned().trim() I'd be going from String to &str then to String again and back to &str
[19:04:19] <Derecho> also that wouldn't work because that's temporary again?
[19:04:23] <kimundi> yep
[19:04:30] <mbrubeck> Derecho: Right, so you want `input.trim().to_owned()`
[19:04:52] <Derecho> and then .as_str() at the end hahaha
[19:04:56] *** Quits: ismaelga (ismaelga@moz-0r94oo.cpe.netcabo.pt) (Ping timeout: 121 seconds)
[19:05:01] <mbrubeck> You slice out the whitespace, then you copy what remains into a new owned String.
[19:05:05] <Derecho> is it just me or does that look unnecessarily dirty?
[19:05:05] *** Quits: Porkepix (Porkepix@moz-6v7.qtj.138.157.IP) (Quit: My laptop has gone to sleep. ZZZzzz…)
[19:05:27] <jshs> it makes explicit that you allocate memory for the trimmed copy
[19:05:38] *** Parts: duncan (paul@moz-dst.ms6.225.173.IP) ()
[19:05:43] <Derecho> yeah but the added back and forth conversion between String and str
[19:05:44] <kimundi> Derecho: Not sure what you mean with unnecessary.
[19:05:48] *** Quits: kaeluka (kaeluka@moz-tn3lqd.cust.bredbandsbolaget.se) (Client exited)
[19:05:59] *** Quits: naerbnic (naerbnic@moz-i9o.rs4.199.12.IP) (Client exited)
[19:06:10] <Derecho> well, I go from a String to a &str with the trim, then back to a String with the to_owned, and then I need it to be a &str again
[19:06:37] <kimundi> Derecho: Only the str -> String conversion is explicitly needed because thats the onlyx one that is actually expensive. THere is no need for an explicit conversion back to &str
[19:06:50] <Derecho> hm
[19:06:51] <mbrubeck> Yeah, don't do .as_str()
[19:06:58] <kimundi> Derecho: The last step is unnecessary I think
[19:07:06] <jshs> you don't want to add .as_str(), because then you'll have the same issue as before (temporary String doesn't live long enough)
[19:07:13] *** Joins: t4nk906 (bzlandfill@moz-lom.trb.186.1.IP)
[19:07:23] <Derecho> I think the pieces are falling toghether in my brain
[19:07:34] <Derecho> String -> &str isn't a conversion anyway
[19:07:39] *** Quits: t4nk906 (bzlandfill@moz-lom.trb.186.1.IP) (Quit: CGI:IRC)
[19:07:46] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[19:07:53] <kimundi> not a conversion you need to be aware of at least
[19:07:56] <Derecho> somehow I found the .as_slice() method illustrate this clearer
[19:07:57] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[19:08:01] <kimundi> since its practically a no-op
[19:08:08] <Derecho> yeah.
[19:08:39] *** Quits: vidot_j__ (vidot_j@moz-ttv.l0h.5.163.IP) (Connection closed)
[19:08:42] <mbrubeck> Derecho: Unrelated, your code needs to call input.clear() in between each read_line, or it will just append to the previous input.
[19:08:51] <mbrubeck> Derecho: Or better yet, wrap the read_line in a method...
[19:08:59] *** Quits: davebettin (davebettin@moz-hde.5e5.136.67.IP) (Ping timeout: 121 seconds)
[19:08:59] <kimundi> I guess only time will tell if the whole automatic Deref machinery was a good idea for this 
[19:09:06] *** Joins: mjboa (mike@moz-gfdglf.hsi06.unitymediagroup.de)
[19:09:27] <Derecho> read_line doesn't consume anymore?
[19:09:32] *** Joins: cptroot (Mibbit@moz-n169l8.caltech.edu)
[19:09:48] <Derecho> ohh the input it's storing things in
[19:09:49] *** Joins: InfiniteJacuzzi (darren@moz-804egb.dyn.optonline.net)
[19:09:52] <Derecho> why would it append?
[19:10:04] *** Joins: kaeluka (kaeluka@moz-tn3lqd.cust.bredbandsbolaget.se)
[19:10:25] <Derecho> damn. I dunno. with the rest of the code I'd say rust progressed, but now that I'm doing this IO bit.. I don't know.
[19:10:38] <Derecho> read_line used to just return a string to me
[19:10:41] <kimundi> I guess because that allows you to gather multiple lines into one String, which would not be possible if it cleared it on its own
[19:11:02] <Derecho> if you want multiple lines, read_line might be the wrong function?
[19:11:09] <Derecho> it does explicitely say line in single form
[19:11:14] <Derecho> oh well.
[19:11:17] <mbrubeck> like this: http://is.gd/fEYEzd
[19:11:37] *** Quits: mirgatroid (Mibbit@moz-1an.tvi.50.65.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:11:49] <Derecho> hmm.
[19:11:50] *** Quits: dawehner (quassel@moz-ipohd2.hsi7.kabel-badenwuerttemberg.de) (Quit: No Ping reply in 210 seconds.)
[19:11:56] <Derecho> bit disappointing that needs to be done
[19:12:10] <mbrubeck> Derecho: Or `let lines = stdin().lines()` might suit you better.  It even strips off the newlines for you!
[19:12:15] *** Joins: towler (Mibbit@moz-7en4n8.members.linode.com)
[19:12:29] <Derecho> that sounds like I'd have to iterate over it?
[19:12:31] <towler> How to convert i32 to usize?
[19:12:37] <Derecho> 'as usize'
[19:13:04] *** Joins: dawehner (quassel@moz-ipohd2.hsi7.kabel-badenwuerttemberg.de)
[19:13:31] <gleb> what might cause #[derive(Clone)] to silently (without any error messages) fail to implement Clone?
[19:13:36] <Derecho> anyway let's burn that input clearing bridge once we come across it
[19:13:45] *** Joins: munksgaard (munksgaard@moz-ob0t16.0.fullrate.dk)
[19:13:46] <Derecho> I'm still not getting it compiled withh that filename thing
[19:13:53] <kimundi> gleb: if any of the fields does not implement Clone
[19:13:58] <Derecho> I have input.trim().to_owned() now but I'm getting errors
[19:14:08] <mbrubeck> gleb: Silently, as in, the code compiles?
[19:14:16] *** Joins: Lotos (chat@moz-tueupj.dip0.t-ipconnect.de)
[19:14:22] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[19:14:31] <gleb> mbrubeck: it does until I try to invoke clone()
[19:14:40] <talchas> if you have struct Foo<T> { ... } I think the derive is impl<T: Clone> Clone for Foo<T> {}
[19:14:40] *** Quits: Lotos (chat@moz-tueupj.dip0.t-ipconnect.de) (Connection closed)
[19:14:44] <talchas> so T also has to be clone
[19:14:46] *** Quits: Guest74 (textual@moz-il1.n6s.204.65.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[19:14:55] <Derecho> it seems I do really want a &str rather than a String
[19:15:01] <mbrubeck> Derecho: What's the error?
[19:15:14] <gleb> talchas: interesting
[19:15:17] *** Joins: spider-mario (spidermario@moz-coblcf.fbx.proxad.net)
[19:15:24] <Derecho> oh bollocks doesn't live long enough of course
[19:15:34] <Derecho> mbrubeck: sec
[19:15:50] *** Quits: InfiniteJacuzzi (darren@moz-804egb.dyn.optonline.net) (Quit: WeeChat 1.1.1)
[19:15:51] <jshs> Derecho: you keep the String around, and borrow when necessary (happens implicitly for method calls)
[19:16:16] <talchas> gleb: (otherwise when it comes time to clone the T field, it can't)
[19:16:17] <mbrubeck> Derecho: You'll need to change your match to `match &*filename` or equivalent
[19:16:38] <Derecho> http://s.drk.sc/CHoSgO/
[19:16:40] <mbrubeck> or to an if/else
[19:16:41] <talchas> I'm not certain if it works if all the refs are &T or *T
[19:16:45] <Derecho> mbrubeck: ^
[19:16:50] <gleb> talchas: makes sense. in my case that field is PhantomData<T> though =)
[19:17:04] *** Quits: dawehner (quassel@moz-ipohd2.hsi7.kabel-badenwuerttemberg.de) (Quit: No Ping reply in 180 seconds.)
[19:17:14] <Derecho> why do I need to change the match?
[19:17:16] <mbrubeck> Derecho: In both cases, write `&*filename` or `filename.as_str()`
[19:17:27] <Derecho> I thought I was just told that String goes to &str implicitely when requried
[19:17:36] *** Joins: montezuma (Mibbit@moz-qr5.sdu.153.50.IP)
[19:17:38] <mbrubeck> Derecho: Only for method calls
[19:17:41] *** Quits: Lovot (Lovot@moz-1je.00u.73.69.IP) (Quit: Lost terminal)
[19:17:42] <Derecho> ...
[19:17:47] <Derecho> how consistent
[19:18:02] *** Quits: ndhoule (ndhoule@moz-3eh.5o5.207.67.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[19:18:05] *** Quits: montezuma (Mibbit@moz-qr5.sdu.153.50.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:19:03] <towler> find a error,how to correnct this?
[19:19:04] <gleb> talchas: you're correct, it will impl Clone for Foo<T> iff T is Clone. thanks
[19:19:15] *** Joins: detsak (darren@moz-804egb.dyn.optonline.net)
[19:19:16] <towler> http://is.gd/fT80Vg
[19:19:26] *** Joins: frankmcsherry (frankmcsher@moz-4u8vq8.adsl.alicedsl.de)
[19:20:01] *** Quits: khades1 (Thunderbird@moz-u45.3vk.74.212.IP) (Client exited)
[19:20:15] <Derecho> ok as_str apperantly requires an attribute
[19:21:11] <mbrubeck> yeah, sorry - &*filename or &filename[..] are the current ways to do it.
[19:21:23] <mbrubeck> to borrow a slice from a String, that is
[19:21:39] <Derecho> really? I'd say that the more read-friendly method would be the recommended way
[19:21:42] <Derecho> do they even differ?
[19:21:45] *** Quits: areski (areski@moz-hk80ce.user.ono.com) (Ping timeout: 121 seconds)
[19:22:07] *** Joins: areski (areski@moz-fkv1ls.user.ono.com)
[19:22:10] <Derecho> woo it compiles!
[19:22:15] <mbrubeck> No difference for those, though each has more general cases that the other doesn't.
[19:22:30] <Derecho> code's definately not become any cleaner with this update...
[19:23:03] <Derecho> ah yes indeed the input is appended, have yet to fix that :/
[19:23:16] *** Joins: zzmp (zzmp@moz-4ds.959.14.76.IP)
[19:23:25] *** Joins: dawehner (quassel@moz-ipohd2.hsi7.kabel-badenwuerttemberg.de)
[19:23:28] *** Quits: frankmcsherry (frankmcsher@moz-4u8vq8.adsl.alicedsl.de) (Ping timeout: 121 seconds)
[19:23:29] <Derecho> I really liked the older read_line() better
[19:23:31] <Derecho> a lot.
[19:24:13] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[19:24:20] *** Quits: forgottenone (forgottenon@moz-boq.di6.232.176.IP) (Quit: Konversation terminated!)
[19:25:07] *** Joins: dstrbad (dstrbad@moz-3g901t.dsl.iskon.hr)
[19:25:17] *** Quits: agile (mike@moz-m71dqt.rcsntx.sbcglobal.net) (Connection closed)
[19:25:48] *** Quits: mindtree (Mitch@moz-356.4j6.134.203.IP) (Quit: leaving)
[19:25:54] <Derecho> woo works
[19:26:05] *** Joins: shmup (shmup@moz-ucm.ei6.184.192.IP)
[19:26:06] *** Joins: mermi (Mibbit@moz-05i3a1.members.linode.com)
[19:26:35] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Quit: )
[19:27:10] *** Quits: towler (Mibbit@moz-7en4n8.members.linode.com) (Quit: http://www.mibbit.com ajax IRC Client)
[19:27:38] *** Joins: espadrine_ (tyl@moz-l019mn.fbx.proxad.net)
[19:27:39] <bluss> the new version is more powerful, less convenient
[19:27:59] *** Joins: nerdopoly (nerdopoly@moz-ouaagf.range86-143.btcentralplus.com)
[19:28:35] <Derecho> this particular bit wasn't too convenient to begin with, didn't expect it to become worse :p
[19:29:05] <Derecho> I'll look into cleaning up the IO code later. maybe write a lib for it or something
[19:29:19] *** Quits: dstrbad (dstrbad@moz-3g901t.dsl.iskon.hr) (Ping timeout: 121 seconds)
[19:29:50] <Derecho> should anyone find it interesting, these are the changes I have made to get my 0.11 code working on 1.1.0: https://github.com/Derecho/RSLife/commit/9b6a8efb356ff143609011e7c45cdc6740d6704d
[19:30:24] <Derecho> I think main.rs is a bit ugly now, but I am going to cook dinner since I should've done that about 3 hours ago.
[19:30:39] *** Quits: SneakySnake (nya@moz-i9is4u.pool.telekom.hu) (Quit: Leaving)
[19:30:49] <mbrubeck> Just `fn prompt(msg: &str) -> String` seems like it would clean up the main function quite nicely.
[19:30:51] *** Joins: swgilles_ (swgillespie@moz-1i5.3un.220.167.IP)
[19:31:25] <Derecho> yeah that's what I'm thinking of doing
[19:31:29] <bluss> Derecho: interesting
[19:31:30] <Derecho> but I kind of expected not to have to do that
[19:31:36] *** Joins: mou (donwilliam@moz-lq9kg8.cpe.webspeed.dk)
[19:31:46] <bluss> Derecho: I remember we discussed type of indexing changed to usize and I claimed it didn't change
[19:31:52] *** Quits: BitPuffin (isak@moz-vunbu1.dyn.plus.net) (Ping timeout: 121 seconds)
[19:32:03] <bluss> Derecho: it didn't either, uint changed to usize and int to isize. FYI
[19:32:18] *** Joins: Rym_ (y@moz-a44.2as.55.31.IP)
[19:32:23] <Derecho> ahh
[19:32:25] <bluss> just the names of those types changed
[19:32:37] *** bvssvni_ is now known as bvssvni
[19:33:15] *** Joins: willem (willem@moz-facs2s.dynamic.upc.nl)
[19:33:29] *** Joins: alonlevy_ (alon@moz-4jqdpb.telavivmakers.org)
[19:33:31] *** Quits: Jackneill (Jackneill@moz-7qmpfp.pool.digikabel.hu) (Ping timeout: 121 seconds)
[19:33:43] *** Joins: stringy (stringy@moz-5rjdqm.cs.wmich.edu)
[19:34:18] *** Joins: ndhoule (ndhoule@moz-qlf.50d.255.50.IP)
[19:34:21] *** Quits: flaub (flaub@moz-p42j78.customer.broadstripe.net) (Quit: Leaving...)
[19:34:55] *** Quits: swgilles_ (swgillespie@moz-1i5.3un.220.167.IP) (Ping timeout: 121 seconds)
[19:35:26] <bluss> Derecho: cool, so now you're ready for 1.0
[19:35:42] *** Joins: khades (Thunderbird@moz-u45.3vk.74.212.IP)
[19:35:47] <stringy> does anyone have a simple alternative to destructuring slices that is stable in the beta?
[19:38:53] *** Joins: espadrine (tyl@moz-imvc7h.capitainetrain.com)
[19:38:55] *** Quits: fizzbooze (bp@moz-no6phj.sm5k.54kg.0101.2620.IP) (Ping timeout: 121 seconds)
[19:38:59] <bluss> b52: on topic of sealed traits, you can make "unsafe trait"s which at least puts a small barrier to people adding impls
[19:39:11] *** Quits: espadrine_ (tyl@moz-l019mn.fbx.proxad.net) (Ping timeout: 121 seconds)
[19:39:16] *** Joins: Jackneill (Jackneill@moz-5il2ak.pool.digikabel.hu)
[19:39:21] <bluss> unsafe trait is appropriate if you depend on it for unsafe code blocks
[19:39:58] <mermi> what is the meaning of error :no type for local variable.
[19:39:59] *** Quits: tkellen (tkellen@moz-nt9.hak.245.50.IP) (Client exited)
[19:41:34] *** Joins: OtterCoder (quassel@moz-t96php.onrq.kn87.100e.2600.IP)
[19:41:56] *** Joins: dinfuehr (dominik@moz-b31i9i.highway.telekom.at)
[19:42:05] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[19:42:06] *** Quits: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net) (Quit: WeeChat 1.1.1)
[19:42:27] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[19:42:32] *** Quits: Jackneill (Jackneill@moz-5il2ak.pool.digikabel.hu) (Quit: Leaving)
[19:42:41] *** Joins: jviereck (Adium@moz-r772na.dclient.hispeed.ch)
[19:43:11] *** Joins: hjr3 (hradtke@moz-dmp.av4.169.69.IP)
[19:43:13] *** Joins: borman (Mibbit@moz-pmo5i1.pppoe.spdop.ru)
[19:44:56] <Derecho> anyway, thanks guys for helping me out with my questions
[19:44:59] <Derecho> I couldn't have been easy :p
[19:45:45] <Derecho> am now in the kitchen, trying to compile a dinner
[19:45:59] <Derecho> I normally eat about 2.5 hours earlier than now
[19:46:17] *** Joins: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net)
[19:47:43] <OtterCoder> Hi! I'm trying to explore the directory that my exe is in, and I keep getting a 'Sized' error about a '[u8]' type. I know that I have to add ?Sized somewhere, but I'm not sure where... http://pastebin.com/DDFyxBFJ
[19:49:12] *** Joins: gthank (gthank@moz-5sim0m.ga.charter.com)
[19:49:43] *** Quits: nerdopoly (nerdopoly@moz-ouaagf.range86-143.btcentralplus.com) (Quit: leaving)
[19:49:55] *** Quits: fmtq (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[19:49:56] *** Quits: espadrine (tyl@moz-imvc7h.capitainetrain.com) (Ping timeout: 121 seconds)
[19:50:08] *** Joins: espadrine (tyl@moz-l019mn.fbx.proxad.net)
[19:50:11] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[19:50:15] <bstrie> OtterCoder: can you paste the full error?
[19:50:15] *** Quits: savage884 (dev@moz-39ha0d.com) (Quit: leaving)
[19:50:26] <bstrie> OtterCoder: generally you shouldn't need to use ?Sized in your own code
[19:50:28] <bluss> OtterCoder: Path actutally
[19:50:47] <bluss> does it say [u8]? It should tell you about Path I think
[19:50:54] <bluss> Maybe you want to return a PathBuf
[19:51:44] <OtterCoder> http://pastebin.com/gjnszPxy
[19:51:52] <bluss> OtterCoder: Return type must be sized (implicitly, a quite natural requirement(?))
[19:52:09] <talchas> bluss: last I checked it only ever tells you the innermost unsized type
[19:52:22] <talchas> and since Path is in the end a [u8], that's what it says
[19:52:36] *** Joins: fmtq (fmtq@moz-d08itp.tpgi.com.au)
[19:52:42] <bluss> I bet it makes otters sad
[19:52:44] *** Joins: dstrbad (dstrbad@moz-3g901t.dsl.iskon.hr)
[19:52:53] <bluss> otters are really smart animals right
[19:52:54] <OtterCoder> Well, isn't a path naturally unsized?
[19:53:18] <bluss> Path: “A slice of a path (akin to str).”
[19:53:19] <OtterCoder> bluss: Only smart at stacking cups and smashing urchins.
[19:53:41] <talchas> OtterCoder: but it's not part of the compiler, it's implemented as an OsStr, which is a [u8] (on linux at least)
[19:53:43] *** Quits: dfinninger (dfinninger@moz-fe6.5n7.235.207.IP) (Connection closed)
[19:53:53] *** Joins: tkellen (tkellen@moz-nt9.hak.245.50.IP)
[19:54:28] <talchas> and while the compiler should probably tell you that when it says [u8] it means "Path's inner field, which is OsStr, which is unsized because of it's whatever, which is a [u8]"
[19:54:29] <bluss> OtterCoder: I'd use .to_owned on the Path to get a PathBuf to return I think
[19:54:32] *** Joins: Amaranth (travis@moz-1raqsl.cpe.cableone.net)
[19:54:39] <talchas> or at least some set of that
[19:54:44] *** Joins: trigen (MSX@moz-sgda69.static.versatel.nl)
[19:55:01] <bluss> the compiler shouldn't talk about private parts
[19:55:10] *** Joins: grncdr (Adium@moz-m1g.e47.90.95.IP)
[19:55:18] <OtterCoder> Okay... I'll try .to_owned...
[19:55:38] <borman> Hi! I have a question about std::borrow::Borrow interface. It's posted on SO: http://stackoverflow.com/q/30083833/4860094 though I thought I'd also ask here because it touches upon current library design decisions.
[19:55:49] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[19:55:54] *** Quits: alonlevy_ (alon@moz-4jqdpb.telavivmakers.org) (Ping timeout: 121 seconds)
[19:56:51] <borman> It would be especially nice to hear from e.g. aturon because https://github.com/rust-lang/rust/commit/a99e69  :)
[19:56:52] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[19:57:37] *** Joins: zyphrus (David@moz-1a4.urk.98.101.IP)
[19:57:48] *** Joins: Guest67_ (textual@moz-hnq.m3l.124.74.IP)
[19:57:48] <jshs> OtterCoder: since current_exe returns a PathBuf, you can use .pop on that
[19:57:51] <jshs> http://doc.rust-lang.org/std/path/struct.PathBuf.html#method.pop
[19:58:05] <jshs> that would save you an extra allocation
[19:58:15] <OtterCoder> jshs: Thanks!
[19:58:31] *** Quits: timj1 (timj@moz-uknuef.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[19:58:47] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[19:59:22] *** Joins: duesenfranz_ (jona@moz-711djm.tirol.surfer.at)
[20:00:09] <aturon> borman: the short answer is: we'd need higher-kinded types (HKT) to do better here; it should be possible to smoothly "upgrade" to HKT later on, though
[20:00:12] *** Joins: mindtree (Mitch@moz-356.4j6.134.203.IP)
[20:00:22] <aturon> borman: (this is a pattern that's come up a few places in the standard library)
[20:00:34] <bluss> borman: I like your question. That kind of lifetime in a trait hasn't been explored enough IMO
[20:00:48] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[20:00:48] <bluss> borman: but it also has a known bug in the borrow checker right now :)
[20:01:07] *** Quits: Lee1092 (uid13277@moz-p2e1ii.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[20:01:11] <aturon> borman: (lifting the lifetime to the trait level is a way of encoding HKT, but makes it significantly more awkward to use the trait)
[20:01:20] *** Joins: Izacht13 (Izacht13@moz-gee645.atsnmeam.ccmaine.net)
[20:01:35] *** Joins: brson (brson@moz-u3dg2t.sfo1.mozilla.com)
[20:01:35] *** ChanServ sets mode: +ao brson brson
[20:01:37] *** Quits: Stebalien (Stebalien@moz-o1j.a0q.30.128.IP) (Ping timeout: 121 seconds)
[20:01:48] *** Joins: dfinninger (dfinninger@moz-fe6.5n7.235.207.IP)
[20:02:05] *** Quits: twipeD (wipeD@moz-467u0a.dip0.t-ipconnect.de) (Connection closed)
[20:02:33] *** Quits: dfinninger (dfinninger@moz-fe6.5n7.235.207.IP) (Connection closed)
[20:02:35] *** Quits: silven (quassel@moz-0roor3.priv.bahnhof.se) (Ping timeout: 121 seconds)
[20:02:42] *** Joins: silven (quassel@moz-0roor3.priv.bahnhof.se)
[20:03:13] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[20:03:22] *** Quits: detsak (darren@moz-804egb.dyn.optonline.net) (Quit: WeeChat 1.1.1)
[20:03:28] *** Joins: mahdi (mahdi@moz-qd2.8nj.244.151.IP)
[20:03:52] <Shuba> hi, I'd like to know if something changed in lifetime constraints since 1.0.0-beta.1
[20:03:56] <borman> Thank you! In fact I was rather surprised to find a combination of lifetime annotations that would actually compile :)
[20:04:08] <Shuba> I've got some code which basically reduces to
[20:04:25] *** Quits: smohan_ (smohan@moz-m6j.f0d.244.121.IP) (Connection closed)
[20:04:27] *** Joins: smohan (smohan@moz-m6j.f0d.244.121.IP)
[20:04:40] <Shuba> impl<'a> MyTrait for MyType { type Target = MyOtherType<'a>; ...}
[20:04:46] <Shuba> but now I get
[20:04:48] <Shuba> error: the lifetime parameter `'a` is not constrained by the impl trait, self type, or predicates
[20:05:08] *** Joins: ajtulloch (ajtulloch@moz-cee.9o0.201.199.IP)
[20:05:09] *** Quits: kaeluka (kaeluka@moz-tn3lqd.cust.bredbandsbolaget.se) (Client exited)
[20:05:11] <Shuba> but I would not get this error before the beta, or with 1.0.0-beta.1
[20:05:25] *** Quits: presidentJFK (Mibbit@moz-3ob.7kg.192.66.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:06:13] <bluss> Shuba: that was a concious change. We'd have to find it in the issue tracker to find the reason though
[20:06:21] *** Joins: ville (ville@moz-nadkam.elisa-laajakaista.fi)
[20:06:36] *** Quits: jxcl (abliskovsky@moz-o4k.t5t.173.207.IP) (A TLS packet with unexpected length was received.)
[20:07:06] <Shuba> bluss: ok thanks, do you have any hint on keywords so that I can try and find the issue to better understand?
[20:07:23] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[20:07:30] *** Quits: mahdi (mahdi@moz-qd2.8nj.244.151.IP) (Ping timeout: 121 seconds)
[20:07:41] *** Joins: nico (nico@moz-dalf30.dip0.t-ipconnect.de)
[20:08:04] <bluss> https://github.com/rust-lang/rust/pull/24461
[20:08:09] <bluss> knew it was niko
[20:08:23] *** Quits: asmyers (amyers@moz-f2k.1cm.177.128.IP) (Ping timeout: 121 seconds)
[20:08:42] <Shuba> thanks a lot
[20:08:49] *** Joins: genbattle (genbattle@moz-4v0.gkd.16.182.IP)
[20:08:51] *** Quits: tkellen (tkellen@moz-nt9.hak.245.50.IP) (Client exited)
[20:09:07] *** Joins: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net)
[20:09:10] *** Joins: Stebalien (Stebalien@moz-ijf92o.csail.mit.edu)
[20:09:32] *** Parts: qard (qard@moz-nekdha.vc.shawcable.net) ()
[20:09:35] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[20:09:35] *** Joins: tkellen (tkellen@moz-nt9.hak.245.50.IP)
[20:09:56] *** Joins: mkpankov (mkpankov@moz-c70.70f.16.195.IP)
[20:11:25] *** Quits: Shackra (Jorge@moz-7bh.ng6.177.186.IP) (Ping timeout: 121 seconds)
[20:11:28] *** Quits: mkpankov (mkpankov@moz-c70.70f.16.195.IP) (Connection closed)
[20:11:35] *** Joins: mkpankov (mkpankov@moz-hr3.n6u.23.84.IP)
[20:11:43] *** Quits: nico (nico@moz-dalf30.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[20:12:31] *** Joins: jxcl (abliskovsky@moz-o4k.t5t.173.207.IP)
[20:13:28] *** Joins: aaparella (alex@moz-h6i7mq.ucdavis.edu)
[20:13:51] <Douman> guys... small question. Am i doing it wrong? https://github.com/DoumanAsh/collectionScripts/blob/master/rust/copy_files.rs#L38-L42
[20:13:54] *** Quits: andre_ (andre@moz-rnd.3qv.76.201.IP) (Quit: leaving)
[20:14:20] *** Quits: jeffasinger (jeff@moz-1j1qti.cable.mindspring.com) (Client exited)
[20:14:28] <aaparella> In the shared ownership example in the documentation, could the problem be fixed by using references to Car instead of replacing them with Rc<Car>s?
[20:14:32] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[20:14:33] *** Joins: maugzoide (maugzoide@moz-ua3.1qv.43.177.IP)
[20:14:33] *** Quits: maugzoide (maugzoide@moz-ua3.1qv.43.177.IP) (Quit: (null))
[20:15:17] <Douman> i'm putting in hashset files. Find the same file names and then copy it... But i think maybe i would be fine without any allocations of HashSet?
[20:15:21] *** Quits: dstrbad (dstrbad@moz-3g901t.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[20:16:44] <talchas> well, you could definitely just loop over source_files_minus_collect rather than making the second hashset
[20:17:06] <bstrie> aaparella: which example?
[20:17:20] <talchas> and Path is Hash, so you can just use that rather than turning things into Strings
[20:17:23] *** Joins: errordeveloper (ilya@moz-no1.79o.219.2.IP)
[20:17:32] *** Quits: grncdr (Adium@moz-m1g.e47.90.95.IP) (Quit: Leaving.)
[20:17:41] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[20:18:46] <aaparella> bstrie: http://tinyurl.com/ozlc2s5
[20:19:14] <aaparella> I'd think the problem could be fixed by just making the fields in the Wheel struct Car references?
[20:19:41] *** Joins: tcard (tcard@moz-jdrdbk.ddns.jazztel.es)
[20:19:56] *** Joins: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net)
[20:20:00] *** Quits: ai (ai@moz-pqofrl.sunline.net.ua) (Quit: Leaving.)
[20:20:51] *** Joins: frankmcsherry (frankmcsher@moz-4u8vq8.adsl.alicedsl.de)
[20:20:57] *** Quits: zzmp (zzmp@moz-4ds.959.14.76.IP) (A TLS packet with unexpected length was received.)
[20:21:20] *** Quits: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net) (A TLS packet with unexpected length was received.)
[20:21:20] <Douman> talchas: new() returns reference, not value. I'm not sure that i can hash reference :)
[20:21:22] <bstrie> aaparella: I would need to know where in the documentation this appears. for example, it may be that they don't want to discuss putting lifetimes on structs yet
[20:21:38] *** Joins: maurer (maurer@moz-7i6vs5.ECE.CMU.EDU)
[20:21:41] *** Joins: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net)
[20:21:48] <maurer> Anyone using rust on nix? I'm only seeing packages up to alpha.2
[20:22:03] <talchas> Douman: you don't need to call Path::new()
[20:22:20] <talchas> (read_dir returns PathBuf actually, not Path, which also implements Hash) 
[20:22:40] <Douman> oh yes. DirEntry which i can convert to path
[20:22:43] <talchas> you can just do the first map and filter, and make a HashSet<PathBuf>
[20:23:04] <bstrie> aaparella: but if you're just asking if it is possible to do this, the answer is yes: http://is.gd/ciJpfZ
[20:23:50] *** Joins: srh (User@moz-328gfs.q9f2.utp8.0306.2602.IP)
[20:24:23] *** Quits: borman (Mibbit@moz-pmo5i1.pppoe.spdop.ru) (Quit: http://www.mibbit.com ajax IRC Client)
[20:24:27] <aaparella> @bstrie it's in section 5.9, and comes immediately after a discussion on lifetimes
[20:24:47] <aaparella> Not sure why lifetimes would be necessary? 
[20:24:53] *** Quits: frankmcsherry (frankmcsher@moz-4u8vq8.adsl.alicedsl.de) (Ping timeout: 121 seconds)
[20:25:19] *** Quits: tadh (quassel@moz-pg51s5.CWRU.Edu) (Connection closed)
[20:25:43] *** Quits: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net) (Ping timeout: 121 seconds)
[20:25:44] *** Joins: oceanwhit (christianwh@moz-a38b1m.ca.comcast.net)
[20:25:47] <Douman> talchas: thanks
[20:25:49] *** Quits: DerisiveLogic (smuxi@moz-1jqqlg.biz.rr.com) (A TLS packet with unexpected length was received.)
[20:25:52] <GaryOak_> How do I declare a lifetime in `impl MyTrait for CoolStruct` with CoolStruct<'a>
[20:26:07] <mbrubeck> aaparella: You'd need `struct Wheel<'a> { owner: &'a Car }`
[20:26:14] *** Joins: jeffasinger (jeff@moz-1j1qti.cable.mindspring.com)
[20:26:21] <mbrubeck> GaryOak_: impl<'a> MyTrait for CoolStruct<'a>
[20:26:30] <GaryOak_> ahh ok, thank you
[20:26:34] *** Joins: dfinninger (dfinninger@moz-fe6.5n7.235.207.IP)
[20:26:38] <bstrie> aaparella: you can't store a reference in a struct without annotating its lifetime
[20:26:52] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Connection closed)
[20:27:28] <aaparella> Oh, okay. Thanks so much bstrie and mbrubeck :)
[20:28:03] *** Joins: frankmcsherry (frankmcsher@moz-4u8vq8.adsl.alicedsl.de)
[20:28:32] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[20:28:32] *** Quits: dschatzberg (dschatz@moz-nk1clf.bu.edu) (Quit: Leaving)
[20:28:44] *** Joins: jdm (jdm@moz-pdn.m8h.114.24.IP)
[20:28:44] *** ChanServ sets mode: +o jdm
[20:28:48] *** Joins: agile (mike@moz-m71dqt.rcsntx.sbcglobal.net)
[20:29:14] *** Joins: kaeluka (kaeluka@moz-tn3lqd.cust.bredbandsbolaget.se)
[20:29:20] *** Quits: tcard (tcard@moz-jdrdbk.ddns.jazztel.es) (Client exited)
[20:30:02] *** Joins: zcourts (zcourts@moz-7ms809.cable.virginm.net)
[20:30:04] *** Joins: newt (newt@moz-ndk.574.210.81.IP)
[20:30:36] *** Quits: dfinninger (dfinninger@moz-fe6.5n7.235.207.IP) (Ping timeout: 121 seconds)
[20:30:42] *** Joins: Hannibal_Smith (nico@moz-l9aupr.retail.telecomitalia.it)
[20:31:49] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[20:32:12] *** Quits: jviereck (Adium@moz-r772na.dclient.hispeed.ch) (Quit: Leaving.)
[20:33:07] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[20:33:25] *** Joins: mib_51ld7q (Mibbit@moz-nst8np.abo.wanadoo.fr)
[20:34:03] *** Quits: fmtq (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[20:34:11] *** Quits: mib_51ld7q (Mibbit@moz-nst8np.abo.wanadoo.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[20:34:26] *** Joins: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net)
[20:35:22] *** Joins: mr_sticky (Mibbit@moz-pgs0u2.cable.virginm.net)
[20:35:46] *** Quits: giucam_ (giucam@moz-iv0nnc.bb.dnainternet.fi) (Ping timeout: 121 seconds)
[20:36:20] <mr_sticky> Hi all, is it possible to pass struct _types_ around, even add them to collections? My situation: http://is.gd/pT7Um2
[20:36:33] *** Joins: fmtq (fmtq@moz-d08itp.tpgi.com.au)
[20:36:37] *** Quits: sw17ch (sw17ch@moz-h64l8d.wa.comcast.net) (Ping timeout: 121 seconds)
[20:36:37] *** Quits: nano (nano@moz-00j6et.dynamic.kabel-deutschland.de) (Connection closed)
[20:36:54] <bluss> •
[20:36:54] <bluss> (No Spoilers) New additions to the sword collection at the Cushing Library located at Texas A&M: OathKeeper and Jaime Lannister's sword. (imgur.com)
[20:37:09] *** Joins: alonlevy_ (alon@moz-p48.q13.159.94.IP)
[20:37:10] <bluss> oops, sorry, paste mishap.
[20:37:19] <frankmcsherry> bluss: lol
[20:37:29] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[20:37:31] <talchas> mr_sticky: this is what trait objects are for
[20:37:47] <talchas> you can do Vec<Box<Job>>
[20:37:50] <bluss> frankmcsherry: normally irssi saves me because it's too many lines.
[20:37:56] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[20:38:18] <bluss> mr_sticky: did you mean to add structs to your sword collections? :)
[20:38:21] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[20:38:25] <frankmcsherry> bluss: I usually just offer up the "up arrow; enter" mess when confused as to which window is chat and which is build.
[20:38:30] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Connection closed)
[20:38:41] <talchas> (and in fact you might want Vec<Box<Fn()>> rather than make a new trait for it, depending)
[20:38:41] <mr_sticky> talchas: hmm, but does a Box<Job> not still require an instance of a Job-trait struct?
[20:38:50] <talchas> sure, but it's zero size
[20:39:17] <mr_sticky> talchas: yeah I am planning ahead, right now theyre just functions, but one day the might need init() and finalise() or something else
[20:39:25] *** Joins: JKWright (JKWright@moz-sed6c9.biz.rr.com)
[20:39:43] <talchas> now, if you guaranteed they're all zero size, it would be nice to get rid of the Box, since they're all the same size
[20:39:46] *** Quits: jeffasinger (jeff@moz-1j1qti.cable.mindspring.com) (Client exited)
[20:39:51] <talchas> but rust doesn't know that
[20:39:58] *** Joins: dfinninger (dfinninger@moz-fe6.5n7.235.207.IP)
[20:40:02] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[20:40:25] *** Joins: jajm (jajm@moz-uq7dvs.kimsufi.com)
[20:40:35] *** Quits: OtterCoder (quassel@moz-t96php.onrq.kn87.100e.2600.IP) (Ping timeout: 121 seconds)
[20:40:52] <talchas> if you want to cut down on the allocation you can instead make struct Job { execute: fn() }, which is the same thing, only without the malloc
[20:41:02] *** Quits: dinfuehr (dominik@moz-b31i9i.highway.telekom.at) (Client exited)
[20:41:45] <talchas> (rather than have a hidden vtable via Box<Trait>, you just have an explicit struct-of-function-pointers)
[20:41:58] *** Joins: dinfuehr (dinfuehr@moz-b31i9i.highway.telekom.at)
[20:42:35] *** Quits: hjr3 (hradtke@moz-dmp.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:43:59] <mr_sticky> talchas: its more about tidyness in my own mind than a performance issue
[20:44:34] <mr_sticky> talchas: seeing if I can get an example to compile
[20:44:56] <Rusky> is there some way to force rust not to optimize out a symbol?
[20:45:19] *** Quits: aaparella (alex@moz-h6i7mq.ucdavis.edu) (Quit: Lost terminal)
[20:45:20] <Rusky> or alternatively to link a particular rlib with --whole-archive
[20:45:36] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[20:46:05] *** Quits: mindtree (Mitch@moz-356.4j6.134.203.IP) (Ping timeout: 121 seconds)
[20:46:54] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[20:47:07] <mr_sticky> talchas: surely a Vec<Box<Job>> is just a vector of boxed jobs? I want a vector of (possibly boxed if necessary) Job _types_?
[20:47:57] *** Quits: Stebalien (Stebalien@moz-ijf92o.csail.mit.edu) (Ping timeout: 121 seconds)
[20:47:59] <mr_sticky> I might be splitting hairs, but it feels messy to have instances of things which have no non-static state
[20:48:32] *** Joins: tcard (tcard@moz-jdrdbk.ddns.jazztel.es)
[20:48:39] <talchas> you can look up any and typeid, but you can't do anything like what you'd want with them
[20:49:26] *** Joins: OtterCoder (quassel@moz-t96php.onrq.kn87.100e.2600.IP)
[20:49:59] <mbrubeck> and since an empty struct is a type with exactly one (zero-sized) value, there's not much practical distinction between the type and its value...
[20:50:45] <Ralith> of course there is; one is a type, and the other is a value
[20:50:46] <mbrubeck> but the answer to your original question is no, you cannot pass or store types in Rust
[20:50:51] <mr_sticky> mbrubeck: sure, but a value has to have a let, and a name, and a constructor, etc.
[20:51:06] *** Joins: skade (skade@moz-6g5dak.pools.vodafone-ip.de)
[20:51:12] <seanmonstar> hm, seems odd that &str doesn't implement AsRef<[u8]>
[20:51:15] <bstrie> mbrubeck: you can store traits, those are types :P
[20:51:17] <mr_sticky> mbrubeck: which may be more or less the same thing when compiled, but it makes the code a mess
[20:51:27] <reem> Well you can store TypeIds
[20:51:58] * reem hasn’t read the rest of this conversation
[20:52:33] *** Joins: davebettin (davebettin@moz-hde.5e5.136.67.IP)
[20:53:04] *** Quits: zeebo (zeebo@moz-qtpltq.ut.vivintwireless.net) (Ping timeout: 121 seconds)
[20:53:05] *** Quits: elbow_jason (elbow@moz-vj1.qot.30.50.IP) (Connection closed)
[20:53:12] <mbrubeck> Box<Job> won't work for mr_sticky's example because Job isn't object-safe
[20:53:15] *** Joins: elbow_jason (elbow@moz-vj1.qot.30.50.IP)
[20:53:18] <mr_sticky> exactly my question, presented much better: http://www.reddit.com/r/rust/comments/1xz3j2/open_type_switch_in_rust_is_it_possible/
[20:54:47] <mbrubeck> mr_sticky: Is the problem with the "Dynamic dispatch" solution there solved by UFCS?
[20:54:51] *** Joins: akiss (akiss@moz-ulk.jp0.1.195.IP)
[20:55:10] *** Joins: futile (felix@moz-cmcd12.unity-media.net)
[20:55:12] *** Quits: dfinninger (dfinninger@moz-fe6.5n7.235.207.IP) (Connection closed)
[20:56:04] *** Joins: zeebo (zeebo@moz-qtpltq.ut.vivintwireless.net)
[20:56:26] *** Quits: Savago (Savago@moz-8hd.3b6.246.162.IP) (Client exited)
[20:56:34] <mr_sticky> mbrubeck: I think the dynamic dispatch solution will work fine, but it still requires that I make an instance of each job implementor
[20:56:49] *** Quits: djcb (user@moz-nqdj21.elisa-laajakaista.fi) (Connection closed)
[20:57:10] <mbrubeck> http://is.gd/TROZGX
[20:57:11] *** Quits: kgrandon (Adium@moz-4da4m4.ujol.1ibb.0101.2620.IP) (Quit: Leaving.)
[20:57:24] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[20:57:49] <talchas> you can't do that with a vec though, because if you want a vector of items you need... items, not types
[20:57:54] <mbrubeck> Yup.
[20:58:00] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[20:58:00] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:58:02] *** Quits: santiago (santiago@moz-ro2mm9.res.rr.com) (Quit: Computer has gone to sleep.)
[20:58:09] <talchas> and rust doesn't have a super-rich rtti setup
[20:58:11] *** Quits: tcard (tcard@moz-jdrdbk.ddns.jazztel.es) (Client exited)
[20:58:13] *** Quits: trigen (MSX@moz-sgda69.static.versatel.nl) (Ping timeout: 121 seconds)
[20:58:25] *** Joins: dfinninger (dfinninger@moz-fe6.5n7.235.207.IP)
[20:58:32] *** Joins: dstrbad (dstrbad@moz-3g901t.dsl.iskon.hr)
[20:58:39] *** Joins: datalus (Andrew@moz-28gbmi.res.rr.com)
[20:58:46] *** Quits: dstrbad (dstrbad@moz-3g901t.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[20:59:57] <mr_sticky> hmm ok. so say I reduce this to a collection of function/parameter pairs, is there a better solution?
[21:00:25] *** Quits: espadrine (tyl@moz-l019mn.fbx.proxad.net) (Ping timeout: 121 seconds)
[21:00:50] *** Quits: erz (erz@moz-45hupr.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:01:23] *** Quits: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP) (Ping timeout: 121 seconds)
[21:01:26] *** Joins: Savago (Savago@moz-8hd.3b6.246.162.IP)
[21:01:29] <mbrubeck> mr_sticky: So, a value doesn't actually need to have a `let` and a name.
[21:01:30] <mbrubeck> mr_sticky: http://is.gd/UGIUWv
[21:01:45] *** Quits: ndhoule (ndhoule@moz-qlf.50d.255.50.IP) (Ping timeout: 121 seconds)
[21:01:54] *** Quits: Hannibal_Smith (nico@moz-l9aupr.retail.telecomitalia.it) (Quit: Leaving)
[21:02:05] *** Joins: turtil (turtil@moz-8am.857.98.121.IP)
[21:02:06] *** Joins: akiss_ (akiss@moz-ulk.jp0.1.195.IP)
[21:02:41] <mbrubeck> mr_sticky: There *is* a useless self parameter there, though.
[21:02:48] *** Joins: jeffasinger (jeff@moz-1j1qti.cable.mindspring.com)
[21:02:52] *** Joins: RC9 (RCIX@moz-vnmep7.ph.cox.net)
[21:03:08] <mr_sticky> mbrubeck: ahh, thanks that's looking a lot tidier than i had expected to be possible
[21:03:10] *** Joins: hjr3 (hradtke@moz-dmp.av4.169.69.IP)
[21:03:13] *** Quits: tkellen (tkellen@moz-nt9.hak.245.50.IP) (Client exited)
[21:03:19] *** Joins: Stebalien (Stebalien@moz-ijf92o.csail.mit.edu)
[21:03:41] *** Joins: ndhoule (ndhoule@moz-3eh.5o5.207.67.IP)
[21:03:48] *** Quits: eric_lagergren (barsonme@moz-lr1hrn.wa.comcast.net) (Connection closed)
[21:04:09] <mbrubeck> mr_sticky: Even tidier: http://is.gd/jePCv3
[21:04:26] <mbrubeck> well, depending on how allergic to `&` you are :)
[21:05:09] *** Quits: akiss (akiss@moz-ulk.jp0.1.195.IP) (Ping timeout: 121 seconds)
[21:05:38] *** Joins: jbcurtin_ (jbcurtin@moz-sj1.bur.30.4.IP)
[21:06:00] *** Quits: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net) (A TLS packet with unexpected length was received.)
[21:06:05] *** Quits: munksgaard (munksgaard@moz-ob0t16.0.fullrate.dk) (Ping timeout: 121 seconds)
[21:06:08] <Derecho> mbrubeck: cleaned the user IO code up: https://github.com/Derecho/RSLife/blob/master/src/main.rs
[21:06:41] <mbrubeck> Derecho: Nice! :D
[21:06:46] <bluss> mbrubeck: mr_sticky: It can coerce to &Job if you instead tell the type from context
[21:06:47] <talchas> mbrubeck: those &s don't wind up 'static though :(
[21:07:08] *** Quits: jbcurtin (jbcurtin@moz-lskisb.LosAngeles1.Level3.net) (Ping timeout: 121 seconds)
[21:07:09] <mbrubeck> no :(
[21:07:13] *** Joins: new_one (new_one@moz-l3r89t.rice.edu)
[21:07:23] *** Quits: kmicu (kmicu@moz-uga.edn.218.91.IP) (Client exited)
[21:07:38] <bluss> mbrubeck: but writing out [&Job; 2] is ugly too
[21:07:48] <mbrubeck> bluss: oh, nice
[21:07:59] <mbrubeck> bluss: Can make it a slice instead: http://is.gd/UTSyBe
[21:08:16] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[21:08:22] <bluss> that's nice
[21:08:35] *** Quits: skade (skade@moz-6g5dak.pools.vodafone-ip.de) (Connection closed)
[21:08:53] *** Joins: skade (skade@moz-6g5dak.pools.vodafone-ip.de)
[21:09:17] <mr_sticky> thanks for all the help
[21:09:59] <talchas> mbrubeck: hmm, you can make statics to make them &'static if necessary though
[21:10:14] *** Joins: trigen (MSX@moz-sgda69.static.versatel.nl)
[21:10:48] <talchas> and those symbols probably go away
[21:10:53] *** Joins: Guest63 (textual@moz-ttd.2as.255.109.IP)
[21:11:36] *** Quits: proc (proc@moz-qkgpmr.dip0.t-ipconnect.de) (Quit: Gotta eat my pizza)
[21:12:13] *** Joins: sw17ch (sw17ch@moz-h64l8d.wa.comcast.net)
[21:12:47] *** Joins: playjax (chatzilla@moz-r37du9.optusnet.com.au)
[21:13:35] <mbrubeck> Derecho: With some minor tweaks that don't really change anything, but might make it prettier (depending on your taste): https://github.com/mbrubeck/RSLife/blob/master/src/main.rs
[21:13:44] *** Quits: woboats (tatterdemal@moz-a0dnkb.ca.comcast.net) (Ping timeout: 121 seconds)
[21:14:02] *** Joins: ty (ty@moz-cckcil.cs.washington.edu)
[21:14:21] <kagami> Is it possible to use binary or with enum fields? http://is.gd/nxXMJY
[21:14:24] *** Quits: dzyp (hiatt@moz-engsmj.web-filings.isupark.net) (Ping timeout: 121 seconds)
[21:14:41] *** Quits: Andre (beat@moz-4qhdv2.cpe.netcabo.pt) (Connection closed)
[21:14:44] <Derecho> mbrubeck: looking at it now...
[21:14:48] *** Quits: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net) (Client exited)
[21:15:30] <bluss> kagami: you can probably use the bitflags crate instead
[21:15:52] *** nsm is now known as nsm|away
[21:15:53] *** Joins: Layl (Layl@moz-65hqmf.direct-adsl.nl)
[21:15:54] <bluss> kagami: also, custom_derive doesn't mean that it can derive everything unfortunately
[21:16:14] *** Joins: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net)
[21:16:23] *** Quits: Matthias247 (Miranda@moz-49li60.hsi14.kabel-badenwuerttemberg.de) (Connection closed)
[21:16:25] *** Quits: mermi (Mibbit@moz-05i3a1.members.linode.com) (Quit: http://www.mibbit.com ajax IRC Client)
[21:16:26] *** Joins: Andre (beat@moz-4qhdv2.cpe.netcabo.pt)
[21:16:47] <Derecho> ah right, so type inference just works like that huh
[21:16:55] *** Joins: ismaelga (ismaelga@moz-lmk.cu2.251.188.IP)
[21:16:56] <Derecho> I wasn't aware of the Into trait, I'll look into that
[21:17:11] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[21:17:11] <Derecho> and returning the answer is indeed cleaner this way too
[21:17:37] <mbrubeck> Derecho: Pushed a couple more commits just to make main a bit terser.
[21:18:04] *** Quits: ty (ty@moz-cckcil.cs.washington.edu) (Ping timeout: 121 seconds)
[21:18:12] <kagami> bluss: bitflags generates struct and I need enum. Huh, it's a pity that's possible in C and impossible in Rust.
[21:18:31] <bluss> well Rust enums are a bit different
[21:18:45] *** Quits: Stebalien (Stebalien@moz-ijf92o.csail.mit.edu) (Quit: leaving)
[21:18:48] <bluss> do you need an enum?
[21:18:54] *** Joins: asQuirreL (asQuirreL@moz-ro1qqu.ox.ac.uk)
[21:19:04] <kagami> yes
[21:19:06] *** Quits: agarie (agarie@moz-coa.g2h.32.177.IP) (Quit: Leaving...)
[21:19:19] *** Joins: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net)
[21:20:35] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[21:20:35] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[21:20:50] *** Quits: jeffasinger (jeff@moz-1j1qti.cable.mindspring.com) (Client exited)
[21:20:55] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[21:21:16] *** Quits: trigen (MSX@moz-sgda69.static.versatel.nl) (Ping timeout: 121 seconds)
[21:21:24] *** Joins: asmyers (amyers@moz-jaamq6.1kl3.v890.000a.2601.IP)
[21:22:27] *** Quits: OtterCoder (quassel@moz-t96php.onrq.kn87.100e.2600.IP) (Ping timeout: 121 seconds)
[21:23:21] *** Joins: ty (ty@moz-cckcil.cs.washington.edu)
[21:23:34] <kagami> Nvm, just copied some of the fields to constants.
[21:23:42] <Derecho> mbrubeck: hah, most of what you did I didn't know I could get away with that
[21:24:16] <Derecho> do width and height not go out of scope?
[21:24:18] <Derecho> ophh.
[21:24:20] <Derecho> nvm
[21:24:22] <Derecho> I see what's happening.
[21:24:24] *** Quits: hjr3 (hradtke@moz-dmp.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:24:33] *** Quits: gonzaloserrano (Adium@moz-56v.o7s.231.77.IP) (Quit: Leaving.)
[21:24:41] <Derecho> mbrubeck: well, if you make a PR I'll accept it, thanks :)
[21:25:05] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[21:25:19] * Derecho reads up on Into
[21:25:20] *** Joins: dsantiago (santiago@moz-lnsd20.biz.rr.com)
[21:25:21] *** chmanchester is now known as chmanchester|afk
[21:25:52] *** Joins: ascarter_ (ascarter@moz-705hf8.wa.comcast.net)
[21:26:07] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[21:26:08] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[21:26:09] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[21:26:22] <mbrubeck> Derecho: done :)
[21:26:38] *** Joins: presidentJFK (Mibbit@moz-3ob.7kg.192.66.IP)
[21:26:41] *** Quits: ty (ty@moz-cckcil.cs.washington.edu) (Connection closed)
[21:27:04] *** Quits: mr_sticky (Mibbit@moz-pgs0u2.cable.virginm.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:27:53] <mbrubeck> Derecho: Wow, it does pretty well with 100×100 at "infinity" fps (interval 0.0)
[21:28:00] *** Quits: kaeluka (kaeluka@moz-tn3lqd.cust.bredbandsbolaget.se) (Client exited)
[21:28:14] <Derecho> yeah the fps counter is a bit off actually, but I too am pleased with its performance
[21:28:23] <Derecho> for a terminal app
[21:28:36] <Derecho> and the braille makes it very pretty and allows big fields
[21:29:09] *** Quits: pigoz (pigoz@moz-77u.lvo.242.94.IP) (Quit: WeeChat 1.0.1)
[21:29:59] *** Joins: jeffasinger (jeff@moz-1j1qti.cable.mindspring.com)
[21:30:16] <bluss> Derecho: I like it
[21:30:23] <Derecho> :)
[21:30:49] *** Joins: logan_e (logan_e@moz-ltn.qg3.218.73.IP)
[21:31:26] <Derecho> I might try and see if I can do something with X11/OpenGL for it, mainly to learn rust more. performance wise this already suffices for me. I can run it in tmux over ssh without any noticable slowdown
[21:31:33] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[21:32:34] *** Quits: minot2 (kkus@moz-baj4jj.74.srtnet.com) (Connection closed)
[21:32:45] *** Joins: timj (timj@moz-uknuef.dip0.t-ipconnect.de)
[21:32:51] *** Joins: hjr3 (hradtke@moz-dmp.av4.169.69.IP)
[21:33:29] *** Joins: fyl2xp1 (fyl2xp1@moz-ugq0lj.netcologne.de)
[21:33:56] *** Quits: dinfuehr (dinfuehr@moz-b31i9i.highway.telekom.at) (Connection closed)
[21:34:00] *** Joins: dinfuehr (dinfuehr@moz-b31i9i.highway.telekom.at)
[21:34:04] *** Quits: c0170 (c0170@moz-4stj9o.cable.virginm.net) (Ping timeout: 121 seconds)
[21:34:27] *** Quits: Guest67_ (textual@moz-hnq.m3l.124.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:34:37] *** Joins: Guest67_ (textual@moz-hnq.m3l.124.74.IP)
[21:34:49] *** Quits: Guest67_ (textual@moz-hnq.m3l.124.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:34:50] <bluss> Derecho: you can use a guard object to reset the terminal
[21:35:02] *** Quits: Cifram_ (Cifram@moz-l63.9pu.126.76.IP) (Ping timeout: 121 seconds)
[21:35:13] <bluss> something with a destructor I mean
[21:35:16] <Derecho> as in, that'd catch the ctrl+c ?
[21:35:24] *** Quits: dinfuehr (dinfuehr@moz-b31i9i.highway.telekom.at) (Connection closed)
[21:35:34] <Derecho> when I wrote this 10 months ago, signals weren't supported yet
[21:35:38] <bluss> true, it wouldn't
[21:35:45] *** Joins: dinfuehr (dinfuehr@moz-b31i9i.highway.telekom.at)
[21:35:57] *** Joins: esgeh (sg@moz-gd29s8.dyn.telefonica.de)
[21:37:13] <Derecho> ah now I remember why I had a makefile initially
[21:37:17] <Derecho> allowed me to compile with dynamic linking
[21:37:24] <Derecho> now I have a 1.7mb binary haha
[21:37:26] *** Quits: tigrou3tac (fabien@moz-gdonfo.fbx.proxad.net) (Ping timeout: 121 seconds)
[21:37:39] <Derecho> bit large for what it does
[21:37:58] *** Quits: oceanwhit (christianwh@moz-a38b1m.ca.comcast.net) (Ping timeout: 121 seconds)
[21:38:46] <bluss> I get 400K release + strip
[21:39:21] *** Quits: slomo (slomo@moz-p8m0g2.net) (Quit: Ex-Chat)
[21:39:44] <Derecho> release? maybe I need to work on my cargo-fu
[21:39:47] *** Quits: dinfuehr (dinfuehr@moz-b31i9i.highway.telekom.at) (Ping timeout: 121 seconds)
[21:39:51] <Derecho> I only manage to get a debug version out
[21:39:54] <cmr> cargo build --release
[21:39:54] *** Quits: newt (newt@moz-ndk.574.210.81.IP) (Quit: If this were a virus you would be dead now. Fortunately it's not. The Internet is a dangerous place; how's your security?)
[21:40:02] <Derecho> ahh, thank you.
[21:40:03] *** Joins: DemonOne (Avi@moz-ecekj8.red.bezeqint.net)
[21:40:10] <cmr> One of those rare things that is done as easily as it is said ;)
[21:40:32] *** Quits: ismaelga (ismaelga@moz-lmk.cu2.251.188.IP) (Connection closed)
[21:40:46] *** Joins: OtterCoder (quassel@moz-t96php.onrq.kn87.100e.2600.IP)
[21:40:51] <Derecho> yup that's a lot smaller
[21:41:14] *** Quits: akiss_ (akiss@moz-ulk.jp0.1.195.IP) (Ping timeout: 121 seconds)
[21:42:01] *** Joins: akiss (akiss@moz-ulk.jp0.1.195.IP)
[21:42:10] *** Joins: ismaelga (ismaelga@moz-lmk.cu2.251.188.IP)
[21:43:02] <duesenfranz_> does anyone here know how serde serializes enums?
[21:44:17] *** Quits: hjr3 (hradtke@moz-dmp.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:44:20] *** Quits: nstoddard (nstoddard@moz-urhoua.resnet.purdue.edu) (Ping timeout: 121 seconds)
[21:44:54] *** Quits: ndhoule (ndhoule@moz-3eh.5o5.207.67.IP) (Ping timeout: 121 seconds)
[21:45:54] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[21:46:08] *** Quits: w4ffles (textual@moz-g7g.toe.144.12.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:46:08] *** Joins: maximih (maximih@moz-njq1ob.k49b.su5n.2002.2001.IP)
[21:46:29] *** Quits: frankmcsherry (frankmcsher@moz-4u8vq8.adsl.alicedsl.de) (Connection closed)
[21:47:06] *** Quits: TheLemonMan (lemonboy@moz-afr3uv.50-151.net24.it) (Quit: "It's now safe to turn off your computer.")
[21:47:18] *** Joins: ndhoule (ndhoule@moz-qlf.50d.255.50.IP)
[21:47:59] *** Quits: csoriano (csoriano@moz-g6rkdc.net.upcbroadband.cz) (Client exited)
[21:49:42] *** Quits: dsantiago (santiago@moz-lnsd20.biz.rr.com) (Ping timeout: 121 seconds)
[21:49:47] *** Quits: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net) (A TLS packet with unexpected length was received.)
[21:49:57] *** Joins: nstoddard (nstoddard@moz-urhoua.resnet.purdue.edu)
[21:50:30] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[21:50:32] *** Joins: hjr3 (hradtke@moz-dmp.av4.169.69.IP)
[21:51:00] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Ping timeout: 121 seconds)
[21:51:00] *** Quits: zeebo (zeebo@moz-qtpltq.ut.vivintwireless.net) (Ping timeout: 121 seconds)
[21:51:27] *** Quits: killercup (killercup@moz-qj5qhi.dip0.t-ipconnect.de) (Quit: Bye)
[21:51:40] *** Joins: dsantiago (santiago@moz-lnsd20.biz.rr.com)
[21:51:44] *** Quits: hjr3 (hradtke@moz-dmp.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:52:20] *** Quits: ascarter_ (ascarter@moz-705hf8.wa.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:52:58] *** Joins: mcoffee_ (mcoffee@moz-erlnm0.bchsia.telus.net)
[21:53:12] *** Joins: BitPuffin (isak@moz-vunbu1.dyn.plus.net)
[21:53:30] *** Quits: btobolaski (btobolaski@moz-ltbh80.va.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:53:30] <tomprogrammer> duesenfranz_: For json it is serialized as an object, containing the variant name as an field. The value of this field is the data embedded in the variant.
[21:53:33] *** Joins: lov2cod (Adium@moz-k1q32r.o38v.k60l.0119.2620.IP)
[21:53:49] *** Joins: zeebo (zeebo@moz-qtpltq.ut.vivintwireless.net)
[21:54:34] <tomprogrammer> duesenfranz_: But I'm not sure, it's a while since I looked through the code.
[21:54:45] *** Quits: ajtulloch (ajtulloch@moz-cee.9o0.201.199.IP) (A TLS packet with unexpected length was received.)
[21:55:08] <tomprogrammer> duesenfranz_: If you want to discover it, try to look for `visit_enum_{map, seq, unit}` in the serializer.
[21:55:29] *** Quits: jajm (jajm@moz-uq7dvs.kimsufi.com) (Connection closed)
[21:55:48] *** Quits: nwin (textual@moz-7jj8l0.pools.vodafone-ip.de) (Quit: My Mac Mini has gone to sleep. ZZZzzz…)
[21:56:06] *** Joins: micka (micka@moz-bio722.abo.wanadoo.fr)
[21:56:33] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[21:56:38] <OtterCoder> Hmm... I'm using try! on fs operations, and it's complaining that it's expecting '()' when it's getting Result<_,_>...
[21:57:03] *** Joins: nico (nico@moz-dalf30.dip0.t-ipconnect.de)
[21:57:16] *** Joins: ajtulloch (ajtulloch@moz-cee.9o0.201.199.IP)
[21:57:27] *** Quits: larhat (Adium@moz-tb1ulb.cable.virginm.net) (Quit: Leaving.)
[21:57:28] <OtterCoder> For example: let myVar = try!(fs::thingy)
[21:57:43] <bluss> OtterCoder: does the function you use try! in return Result?
[21:58:10] <OtterCoder> Yes. The error is saying it doesn't want Result.
[21:58:35] <bluss> the function you use try! in
[21:58:44] <bluss> hm it sounds like it could be that
[21:58:48] <OtterCoder> Yes. Here. I'll paste it.
[21:58:53] *** Quits: micka (micka@moz-bio722.abo.wanadoo.fr) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[21:58:59] *** Joins: DerisiveLogic (smuxi@moz-1jqqlg.biz.rr.com)
[21:59:18] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[22:00:40] <kagami> rustc complains about #[derive] for structs with raw pointers. Is it a bug or? I have the same behavior as noted here: https://github.com/rust-lang/rust/pull/21362#issuecomment-72787798
[22:00:49] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[22:01:04] <OtterCoder> bluss: http://pastebin.com/e6hw7fvf
[22:01:05] *** Quits: nico (nico@moz-dalf30.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[22:01:11] *** Joins: Guest74 (textual@moz-lmfinb.fios.verizon.net)
[22:01:44] <bluss> OtterCoder: is that try! inside fn main() ?
[22:01:47] *** Joins: micka (micka@moz-bio722.abo.wanadoo.fr)
[22:02:09] <OtterCoder> bluss: Nope.
[22:02:29] *** Quits: micka (micka@moz-bio722.abo.wanadoo.fr) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[22:02:38] <bluss> sounds like your own function has return type ()
[22:03:04] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[22:03:05] <duesenfranz_> tomprogrammer: thanks!! :)
[22:03:06] <OtterCoder> It's a let assignment...
[22:03:26] *** Joins: ctjhoa_ (Mibbit@moz-0oqgv8.fbx.proxad.net)
[22:03:38] *** Joins: micka (micka@moz-bio722.abo.wanadoo.fr)
[22:03:44] <bluss> OtterCoder: pastebin the code and I can point it out :)
[22:03:45] *** Joins: dstrbad (dstrbad@moz-3g901t.dsl.iskon.hr)
[22:03:50] *** Joins: hjr3 (hradtke@moz-dmp.av4.169.69.IP)
[22:04:04] *** Quits: hjr3 (hradtke@moz-dmp.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:04:25] *** Quits: dawehner (quassel@moz-ipohd2.hsi7.kabel-badenwuerttemberg.de) (Quit: No Ping reply in 210 seconds.)
[22:04:26] <tomprogrammer> duesenfranz_: If you want to implement custom handling, this is how I've done it: https://goo.gl/joERDp
[22:05:32] <OtterCoder> bluss: Line 13:  http://pastebin.com/gcvayGDj
[22:05:53] *** Joins: dawehner (quassel@moz-ipohd2.hsi7.kabel-badenwuerttemberg.de)
[22:05:56] <bluss> OtterCoder: this is what I mean, the return type of the function must be Result
[22:06:00] <bluss> OtterCoder:  fn unpack(uris: fs::ReadDir) {  but it is ()
[22:06:25] <bluss> fn unpack(..) -> Result<(), io::Error> for example. Then try is ok
[22:06:39] <bluss> it works by simply returning on error
[22:06:41] <OtterCoder> bluss: Huh, I thought that the semicolon squelched returns...
[22:06:47] <OtterCoder> Oh, derf.
[22:06:53] *** Quits: brendanc (brendan@moz-v9b.spj.162.198.IP) (A TLS packet with unexpected length was received.)
[22:06:54] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[22:07:01] <bluss> OtterCoder: try! is a strange macro, but awfully convenient sometimes
[22:07:16] <OtterCoder> Right, try! returns explicitly from inside the statement.
[22:07:17] *** Parts: fyl2xp1 (fyl2xp1@moz-ugq0lj.netcologne.de) ()
[22:07:22] <simme> is there a command built-in to update rust? or do i have to reinstall nightly every day? :D
[22:07:27] *** Joins: yuja (yuja@moz-07pdo8.pikara.ne.jp)
[22:07:30] <OtterCoder> Thanks bluss!
[22:07:41] *** Quits: spider-mario (spidermario@moz-coblcf.fbx.proxad.net) (Connection closed)
[22:07:48] *** Quits: dstrbad (dstrbad@moz-3g901t.dsl.iskon.hr) (Ping timeout: 121 seconds)
[22:08:00] *** Joins: c0r5um (n0x0ff@moz-75e028.abo.wanadoo.fr)
[22:08:05] <reem> simme: github.com/brson/multirust is pretty good for this
[22:08:08] <bluss> OtterCoder: I'm sorry if it was a bit confusing
[22:08:33] <simme> thanks, reem
[22:08:37] *** Quits: Douman (Douman@moz-rs7guj.dynamic.mts-nn.ru) (Quit: )
[22:08:48] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[22:08:53] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[22:09:08] <OtterCoder> bluss: Nah, I appreciate your patience. I'm horribly new to systems languages in general, and Rust in particular. :)
[22:09:14] *** Quits: Racquetball (namestolenw@moz-dnlovt.cpe.twtelecom.net) (Quit: leaving)
[22:09:17] *** Joins: brendanc (brendan@moz-760v6s.cs.ubc.ca)
[22:09:27] *** Joins: spider-mario (spidermario@moz-coblcf.fbx.proxad.net)
[22:09:48] *** Parts: BossKonaSegway1 (Michael@moz-vp8rf7.res.rr.com) ()
[22:09:57] *** Quits: abique (abique@moz-alq0r9.ko9f.54u1.0e35.2a01.IP) (Quit: Leaving)
[22:09:59] *** Quits: freefall (ff@moz-n4lvbv.enn.lu) (Ping timeout: 121 seconds)
[22:09:59] *** Joins: cursivecode (textual@moz-4u56i9.res.bhn.net)
[22:10:00] *** Quits: zen|merge (quassel@moz-6vk.712.73.109.IP) (Connection closed)
[22:11:01] *** Quits: esgeh (sg@moz-gd29s8.dyn.telefonica.de) (Quit: Leaving.)
[22:11:15] *** Joins: zzing (textual@moz-h2euaq.comm.cgocable.net)
[22:11:39] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:11:54] *** Joins: freefall (ff@moz-i72.nhl.10.176.IP)
[22:11:55] *** Joins: stewartr (bzlandfill@moz-4gf.934.66.171.IP)
[22:12:02] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[22:12:36] *** Quits: ytain (ytain@moz-pr2.aip.175.108.IP) (Quit: Textual IRC Client: www.textualapp.com)
[22:12:40] *** Joins: kgrandon (Adium@moz-4da4m4.ujol.1ibb.0101.2620.IP)
[22:13:07] <ctjhoa_> hi guys, I'm fighting with compiler trying to implement "comm" unix command https://github.com/ctjhoa/coreutils/blob/master/src/comm/comm.rs
[22:13:30] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[22:13:48] *** Joins: munksgaa1d (munksgaard@moz-urnkl5.u.parknet.dk)
[22:13:54] <stewartr> hey, can someone explain to me how std::mem::forget works?
[22:14:03] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[22:14:07] *** Quits: mib_v6emzi (Mibbit@moz-i7cb3r.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:14:15] <jdm> ctjhoa_: what in particular is causing trouble?
[22:14:17] <cmr> stewartr: it causes the destructor of the value to not be run. it's a compiler intrinsic.
[22:14:17] <ctjhoa_> in loop line 70 i read_line which move value out of the scope. how can I avoid that
[22:14:43] *** Quits: JKWright (JKWright@moz-sed6c9.biz.rr.com) (Quit: Be back later ...)
[22:15:29] *** Quits: errordeveloper (ilya@moz-no1.79o.219.2.IP) (Ping timeout: 121 seconds)
[22:15:39] *** Joins: vidot_j__ (vidot_j@moz-v6u.2i3.5.163.IP)
[22:15:50] <stewartr> cmr: okay, but what about this use case. I want to pass in a pointer to a rust struct, dereference that pointer and call one of the structs methods. Then I want to return the result of that method by value, and avoid freeing the struct or any part of it when I'm done.
[22:15:52] *** Joins: fjh (fjh@moz-mof4p1.62vh.lq23.04f8.2a01.IP)
[22:16:12] <stewartr> cmr: can I use std::mem::forget to accomplish this?
[22:16:44] <talchas> you either need more than mem::forget, or don't need it at all
[22:17:02] <cmr> stewartr: yes.
[22:17:03] <ctjhoa_> using na.is_ok() don't move value but every time I try to actually get the content of the line (with ok()) the var "na" is moved out of scope
[22:17:05] <cmr> talchas: what do you mean?
[22:17:37] *** Quits: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:18:06] <talchas> if you want a fn foo(x: &Something) -> Else { x.whatever() }, then if you don't what to free *x, you need to mem::forget wherever the actual owner of *x 
[22:18:17] <talchas> nothing you do in foo() matters
[22:18:26] <cmr> I assume they mean a raw pointer.
[22:18:33] *** bvssvni is now known as bvssvni_
[22:18:38] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:18:39] <stewartr> yes, I'm dealing with raw pointers here
[22:18:45] <talchas> if you are taking *mut Something (or const, whatever), then you don't need to mem::forget it anything at all
[22:19:02] *** Quits: ndhoule (ndhoule@moz-qlf.50d.255.50.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:19:03] <stewartr> talchas: I'm not sure that is true
[22:19:04] <cmr> you do if you do a dereference to call a method.
[22:19:11] <stewartr> yea, exactly
[22:19:20] <cmr> However, you could transmute it to a & or &mut (be careful!) and call the method on that.
[22:19:22] *** Joins: zzmp (zzmp@moz-3j6evs.ca.comcast.net)
[22:19:23] <talchas> (*x).whatever() won't call drop if whatever is fn whatever(&self)
[22:19:25] <cmr> to sidestep the issue.
[22:19:30] *** Quits: willem (willem@moz-facs2s.dynamic.upc.nl) (A TLS packet with unexpected length was received.)
[22:19:34] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[22:19:41] <talchas> if it's whatever(self), it'll drop no matter what
[22:20:11] <stewartr> its andmut self
[22:20:26] <FreeFull> . will autoderef anyway
[22:20:34] <talchas> that's the same as (&self) then
[22:20:36] <stewartr> oh sorry, its actually andself in this case
[22:20:40] *** Joins: willem (willem@moz-facs2s.dynamic.upc.nl)
[22:20:44] <talchas> FreeFull: iirc not for raw pointers
[22:21:31] <FreeFull> Ah, yeah, for raw pointers it won't
[22:21:33] <stewartr> talchas: okay so your claim is that I will never have to worry about my content getting dropped
[22:21:36] <talchas> now, if you copy/move out of the pointer using swap/replace, then yeah, you might want to mem::forget your stack temporary
[22:22:17] <talchas> stewartr: rust will never free a *ptr or drop its contents without you doing something to make it
[22:22:26] <stewartr> talchas: I just want some abstraction that I can trust not to drop my content. Because right now rust keeps freeing my dereferenced pointer 
[22:22:52] <stewartr> talchas: and I feel like I'm manually having to tell rust to not drop every piece of content I touch, which is very error prone
[22:23:18] *** Quits: maximih (maximih@moz-njq1ob.k49b.su5n.2002.2001.IP) (Quit: Leaving...)
[22:23:29] <talchas> that sounds like you're using pointers when you shouldn't or are either doing something wrong or very unusual
[22:23:44] <stewartr> in this case I'm building a python ffi for my program
[22:23:57] <jdm> ctjhoa_: cna you be more specific?
[22:23:58] <stewartr> and right now my design pattern is that I'm wrapping rust structs as python classes
[22:24:17] <stewartr> where the python class gets a void pointer to the struct
[22:24:22] <stewartr> and I wrap each method individually
[22:24:28] *** Joins: ascarter_ (ascarter@moz-705hf8.wa.comcast.net)
[22:24:29] <stewartr> and this is really not working well for me
[22:24:35] <stewartr> but I don't know what the alternative is
[22:24:37] *** Quits: nstoddard (nstoddard@moz-urhoua.resnet.purdue.edu) (Ping timeout: 121 seconds)
[22:24:48] *** Quits: tomprogrammer (thomas@moz-n9hkjp.tr5r.qept.4dd0.2001.IP) (Quit: WeeChat 1.1.1)
[22:25:09] <talchas> ah, if you're trying to allocate stuff and then give it to python to control, then yeah, you're probably doing something unusual :P
[22:25:16] *** Quits: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se) (Quit: bajs)
[22:26:07] <stewartr> yea, it clearly won't scale to do things this way. But I'm hoping that if I do this enough I'll find some nice way to make this abstraction safer
[22:26:15] *** Quits: munksgaa1d (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[22:26:53] *** Quits: cursivecode (textual@moz-4u56i9.res.bhn.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:26:55] <ctjhoa_> jdm ok so the while loop depends on two var "na" & "nb" which are mutable strings set by read_line
[22:27:11] *** Joins: ajtulloc_ (ajtulloch@moz-v4lug4.r0v0.kp93.010d.2620.IP)
[22:27:21] <talchas> if you're willing to use nightly and unstable, there's heap::allocate and such, rather than having to hack one up
[22:27:23] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:27:41] *** Joins: mib_cjwyaa (Mibbit@moz-k1t.6j8.42.24.IP)
[22:28:26] <talchas> if not, there's the unsafe let x: *mut Whatever = mem::transmute(Box::new(whatever))
[22:28:37] *** Joins: Twinklebear (Twinklebear@moz-82o.nvh.110.128.IP)
[22:28:48] <mib_cjwyaa> Hi! I started taking a look at Rust today and I'm currently following the Guessing Game tutorial on the book. My code is exactly what is on the tutorial (I copied and pasted it when I saw the error).
[22:28:55] *** Quits: {AS} (uid45026@moz-srvrrh.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[22:29:01] *** Quits: fkaa (tundmatu@moz-501od2.business.telia.com) (Ping timeout: 121 seconds)
[22:29:09] <stewartr> how would heap::allocate work?
[22:29:23] <talchas> which I think doesn't need any additional mem::forgets, but might be less guaranteed to work than "let boxed = Box::new(whatever); let x = &*boxed as *mut Whatever; mem::forget(boxed);"
[22:29:24] <jdm> ctjhoa_: ok, and what's the error?
[22:29:24] <stewartr> right now I've been using Box::new followed by boxed::into_raw
[22:29:27] <mib_cjwyaa> Whenever I run the program, (btw I f'm only on the first step), my guess will always return 2
[22:29:42] *** Quits: dawehner (quassel@moz-ipohd2.hsi7.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[22:29:52] <talchas> oh, yeah, into_raw exists, I just failed and C-f despite explicitly looking for it
[22:29:53] <ctjhoa_> jdm problem is http://doc.rust-lang.org/nightly/std/io/trait.BufRead.html#method.read_line return Ok(nb_byte) or Err(X). I try to match both cases
[22:30:09] <talchas> into_raw(Box::new(T)) shouldn't cause any drops
[22:30:17] <stewartr> I see, so it seems like I'm not doing thing so awful after all
[22:30:18] *** Quits: ajtulloch (ajtulloch@moz-cee.9o0.201.199.IP) (Ping timeout: 121 seconds)
[22:30:28] *** Joins: fkaa (tundmatu@moz-501od2.business.telia.com)
[22:30:29] <stewartr> I'll just start at a smaller scale I guess
[22:30:40] <stewartr> right now I wrote a bunch of code and started getting segfaults
[22:30:45] <ctjhoa_> jdm because in previous old_io EOF was an Err. so Ok(0) or Err(X) should the same order for me 
[22:30:48] <stewartr> so I'll start being more careful and testing
[22:30:49] <stewartr> but yea
[22:30:50] <talchas> (though into_raw and from_raw are unstable, like heap)
[22:30:59] <stewartr> the issue is not in the allocation of the class
[22:31:07] <stewartr> that works pretty well with into_raw
[22:31:18] <stewartr> the issue is when you are writing the method wrappers
[22:31:22] <jdm> ctjhoa_: oh, I see - I presume na.is_ok() complains because na was moved?
[22:31:22] <stewartr> that you take in this pointer
[22:31:28] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:31:36] <jdm> (since http://doc.servo.org/core/result/enum.Result.html#method.ok is by value, not reference)
[22:31:37] *** Joins: ndhoule (ndhoule@moz-qlf.50d.255.50.IP)
[22:31:38] <stewartr> dereference it, and then call one of its methods
[22:31:39] <ctjhoa_> jdm yeah that's the thing
[22:31:50] <stewartr> all of the sudden, the contents of those methods are on the stack
[22:31:56] <talchas> if you're doing let foo = *x; or ptr::read() or something, that'll be a problem.
[22:32:02] <talchas> (*x).whatever() should work I think
[22:32:24] <stewartr> and I'm afraid if you don't explicitly clean up those contents, and instead just call mem::forget on the base pointer, you'll start dropping those contents
[22:32:33] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[22:32:38] <jdm> ctjhoa_: why not match on (na.is_some(), nb.is_some()), or even (na, nb)?
[22:32:55] <ctjhoa_> jdm as Error is not copyable I can't create a clone of it
[22:33:00] <stewartr> it just gets complicated to understand exactly what rust will drop when
[22:33:08] *** Quits: brson (brson@moz-u3dg2t.sfo1.mozilla.com) (Quit: leaving)
[22:33:16] <BitPuffin> is there an ApproxEq for floats?
[22:33:22] <BitPuffin> maybe in num crate
[22:33:36] <reem> BitPuffin: https://github.com/reem/rust-ordered-float
[22:33:39] <jdm> ctjhoa_: with the latter, your arms become (None, Some(_)), (Some(_), None), (Some(0), Some(_)), (Some(_), Some(0)), _
[22:33:46] <reem> not sure on build status though, tbh
[22:33:51] <BitPuffin> hm
[22:33:57] *** Quits: playjax (chatzilla@moz-r37du9.optusnet.com.au) (Connection closed)
[22:33:58] <mib_cjwyaa> Can anybody help me out?
[22:33:58] *** Quits: ndhoule (ndhoule@moz-qlf.50d.255.50.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:34:00] <BitPuffin> meh I'll just subtract them and see that the result is close to 0
[22:34:03] <ctjhoa_> jdm is_some() don't make the difference between Some(0) and Some(X) where X is > 0
[22:34:22] <reem> BitPuffin: Actually sorry, that’s not approx-equals, it’s just a way to sort NaNs.
[22:34:24] <jdm> ctjhoa_: sure, but you could do the second match without the value being moved by ok()
[22:34:24] *** Quits: Anupkumar (uid16774@moz-cf8smb.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[22:34:32] <talchas> stewartr: it'll drop anything that is on the stack when a scope exits
[22:34:34] <BitPuffin> reem: oh :)
[22:34:42] <ctjhoa_> jdm i'll try
[22:34:43] <reem> BitPuffin: (a - b).abs() < epsilon is probably the easiest way
[22:34:48] <ctjhoa_> jdm thanks
[22:35:03] *** Quits: Quanttek (quassel@moz-25k96c.6fkd.dvrb.8108.2a02.IP) (Ping timeout: 121 seconds)
[22:35:10] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[22:35:12] <talchas> if this is *T or &T, this does nothing. If it's T, that calls T::drop if it implements Drop. If it's Box<T>, it calls Box's drop, which then goes into T's
[22:35:21] <BitPuffin> reem: how do I get epsilon?
[22:35:34] <stewartr> talchas: I see, but hopefully rust won't let you call mem::forget on the base pointer if you have one of it's objects on the stack?
[22:35:36] <jdm> mib_cjwyaa: https://github.com/rust-lang/rust/issues/25147 ?
[22:36:47] *** Joins: ndhoule (ndhoule@moz-qlf.50d.255.50.IP)
[22:36:53] *** Quits: jshs (jshs@moz-86l8mm.dip0.t-ipconnect.de) (Client exited)
[22:37:06] *** Joins: mcanders (carter@moz-nl0.g9o.171.216.IP)
[22:37:09] <talchas> stewartr: if you do let x = (*ptr).x; you've copied, you don't have anything belonging to *ptr
[22:37:23] *** Quits: eibwen (eibwen@moz-n4tjds.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[22:37:30] <talchas> and in general remember mem::forget() is not free(), it's the opposite
[22:37:31] *** Joins: errordeveloper (ilya@moz-no1.79o.219.2.IP)
[22:37:39] <gsingh93> i have an assert that's failing, but when it fails it crashes with SIGILL. does that make any sense?
[22:37:57] <talchas> it's "I'll arrange to call the destructor if it's necessary"
[22:38:12] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[22:38:14] <ctjhoa_> jdm as "na" is a result I can't call is_some or match Some() ?
[22:38:16] <talchas> this doesn't even have anything to do with allocation unless the type is Box<T>
[22:38:22] *** Joins: csherrat_ (textual@moz-bfo.a2h.212.24.IP)
[22:38:37] *** Quits: akiss (akiss@moz-ulk.jp0.1.195.IP) (Ping timeout: 121 seconds)
[22:38:40] <BitPuffin> reem: found it, was searching the wrong lib for it
[22:38:46] *** Quits: logan_e (logan_e@moz-ltn.qg3.218.73.IP) (Client exited)
[22:38:55] *** Quits: drewm1980 (drewm1980@moz-sj0og1.hujf.dasj.1812.2a02.IP) (Ping timeout: 121 seconds)
[22:38:56] <jdm> ctjhoa_: it's the `ok()` that's the problem - it consumes the original value
[22:38:57] <talchas> if you do let x = Foo { big_struct }; mem::forget(x);, you still allocated it on the stack, and it'll still get freed implicitly when your function exits, it just won't /call/ Foo::drop
[22:39:10] *** Joins: nstoddard (nstoddard@moz-k9n.dgb.211.128.IP)
[22:39:39] *** Quits: Guest63 (textual@moz-ttd.2as.255.109.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:39:45] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[22:39:49] <BitPuffin> reem: actually that still fails, I'll go back to 0.00000000001
[22:39:50] <mib_cjwyaa> jdm: That was it. Thanks!
[22:40:14] <reem> BitPuffin: Ya, you don’t actually want the machine epsilon, I just meant “some small value that you choose depending on your domain”
[22:40:20] <BitPuffin> :P
[22:40:23] <BitPuffin> okay
[22:40:23] <BitPuffin> thanks
[22:40:24] *** Quits: csherrat_ (textual@moz-bfo.a2h.212.24.IP) (Quit: Textual IRC Client: www.textualapp.com)
[22:41:02] <ctjhoa_> jdm yeah but how can I unwrap a Result without "ok()" ? don't get it sorry
[22:41:10] <stewartr> talchas: okay, this is starting to make more sense to me
[22:41:15] <reem> ctjhoa_: you just call `unwrap`
[22:41:31] <reem> ctjhoa_: or do you mean *match* on a Result?
[22:41:51] <jdm> ctjhoa_: you can just match on Ok/Err instead of Some/None
[22:42:12] <stewartr> talchas: it's been challenging in part because the borrow checker is so good you don't have to learn much about deallocation rules when staying inside rust. But you really have to undrstand the details when writing this ffi stuff, so it's a lot to learn all at once
[22:42:41] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[22:43:49] *** Joins: hjr3 (hradtke@moz-dmp.av4.169.69.IP)
[22:43:56] *** Quits: mcanders (carter@moz-nl0.g9o.171.216.IP) (Connection closed)
[22:44:25] <ctjhoa_> jdm so I tried with unwrap and with only match(na, nb) same err as before the value is move at the unwrap/match line
[22:44:38] *** Joins: mcanders (carter@moz-nl0.g9o.171.216.IP)
[22:44:48] <jdm> ctjhoa_: you're going to have to be more specific about what changes you made
[22:44:57] *** Joins: Porkepix (Porkepix@moz-e1bv2v.rev.sfr.net)
[22:44:58] *** Quits: micka (micka@moz-bio722.abo.wanadoo.fr) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[22:45:02] <jdm> ctjhoa_: I suggest creating gists with short code snippets
[22:45:06] <jdm> https://gist.github.com/gists
[22:45:07] *** Joins: tadh (quassel@moz-88tk3f.res.rr.com)
[22:45:10] *** Joins: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com)
[22:45:18] *** Quits: mcanders (carter@moz-nl0.g9o.171.216.IP) (Client exited)
[22:45:18] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Quit: Lost terminal)
[22:45:21] *** Quits: futile (felix@moz-cmcd12.unity-media.net) (Quit: WeeChat 1.2-rc1)
[22:45:26] *** Quits: kgrandon (Adium@moz-4da4m4.ujol.1ibb.0101.2620.IP) (Quit: Leaving.)
[22:45:27] *** Joins: mcanders (carter@moz-nl0.g9o.171.216.IP)
[22:46:02] <jimb> What does !Send mean? https://doc.rust-lang.org/std/marker/trait.Send.html
[22:46:07] *** Quits: mcanders (carter@moz-nl0.g9o.171.216.IP) (Client exited)
[22:46:12] <cmr> "not send"
[22:46:17] <jimb> Is that old and I never noticed, or new and I'm behind?
[22:46:26] <cmr> Depends on the timeframe ;)
[22:46:27] <Twinklebear> hey all, I'm stuck on a bit of a lifetime puzzle with some code. I've got a struct with a function that takes a closure and will return whatever it returns essentially. however the closure returns an object with a reference to an object stored by the struct (eg. in a vec). The compiler can't seem to infer the lifetimes and I'm not sure how to tell it them in this case. The error is here: https://bpaste.net/show/239f8727ff51 code links coming.
[22:46:38] <jimb> cmr: Then what does |impl !Send| mean?
[22:46:45] *** Joins: frankmcsherry (frankmcsher@moz-4u8vq8.adsl.alicedsl.de)
[22:46:46] <cmr> jimb: "this type is not Send"
[22:46:56] *** Quits: veqz (veqz@moz-nvr8g6.209.getinternet.no) (Ping timeout: 121 seconds)
[22:47:02] <jimb> cmr: How is that different from... not implementing Send for that type?
[22:47:05] <cmr> jimb: it overrides any builtin trait propagation that applies.
[22:47:13] <Twinklebear> the struct I'm calling: https://github.com/Twinklebear/tray_rust/blob/master/src/geometry/bvh.rs and a type we return a reference too: https://github.com/Twinklebear/tray_rust/blob/master/src/geometry/instance.rs  and the actual call with the error: https://github.com/Twinklebear/tray_rust/blob/master/src/scene.rs#L80
[22:47:14] <cmr> jimb: (which happens for Send, Sync, Copy, etc)
[22:47:21] <cmr> (There may be no etc)
[22:47:31] *** Quits: mib_cjwyaa (Mibbit@moz-k1t.6j8.42.24.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:47:34] * jimb *lightbulb* oooooh
[22:47:43] <cmr> By default, a type is Send if all of its members are Send. impl !Send overrides that.
[22:47:48] <jimb> cmr: So it only makes sense for markers, then?
[22:47:54] <cmr> Pretty much, yeah.
[22:48:14] <kagami> wow: error: internal compiler error note: the compiler unexpectedly panicked. this is a bug.
[22:48:19] * kagami proud of himself
[22:49:35] *** Quits: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net) (Client exited)
[22:49:43] *** Joins: carter_ (carter@moz-nl0.g9o.171.216.IP)
[22:49:51] *** Joins: fkaa_ (tundmatu@moz-501od2.business.telia.com)
[22:49:53] *** Quits: DerisiveLogic (smuxi@moz-1jqqlg.biz.rr.com) (Ping timeout: 121 seconds)
[22:50:00] <ctjhoa_> jdm https://gist.github.com/ctjhoa/2b859ebf7ca201586ac2
[22:51:10] <jdm> ctjhoa_: you probably want (match &na, &nb)
[22:51:13] <jdm> that will stop them being moved
[22:51:45] <jdm> I mean, calling unwrap has the same problem as ok, it consumes the value
[22:51:45] <bluss> Twinklebear: this ref mut and ref in the closure parameters seems wrong
[22:51:50] *** Quits: frankmcsherry (frankmcsher@moz-4u8vq8.adsl.alicedsl.de) (Ping timeout: 121 seconds)
[22:52:19] *** Joins: tyoverby (tyoverby@moz-qo3495.cs.washington.edu)
[22:52:30] *** Quits: jaen (jaen@moz-ifmik2.copit.pl) (Quit: WeeChat 1.1.1)
[22:52:30] <jdm> ctjhoa_: your other choice is `as_ref().unwrap()`, which means you match on &0 instead of 0
[22:52:40] *** Quits: fkaa (tundmatu@moz-501od2.business.telia.com) (Ping timeout: 121 seconds)
[22:53:02] <Twinklebear> bluss, ah I do seem to get the same error without them. But the ref keyword has always kind of confused me some, is there somewhere that explaisn in more detail?
[22:53:14] <Twinklebear> I think the last time i looked at the rust book it wasn't in there but maybe now?
[22:53:57] *** Quits: mjboa (mike@moz-gfdglf.hsi06.unitymediagroup.de) (Quit: leaving)
[22:54:14] <Twinklebear> but the function will take in a &mut to the Ray passed and potentially modify it based on the intersection test with T
[22:54:33] <ctjhoa_> jdm damn you're a genius thanks a lot! So hard to fight those issue
[22:54:39] <jdm> :)
[22:54:45] <carter_> Does anyone know a good/easy way to make two enum variants (ex: Variant1(String) and Variant2(&'a str)) hash to the same thing if they have equivalent str values?  I have a hashmap using a similar enum for keys and I want to avoid allocating strings when .get()ing from it.
[22:55:03] <jdm> ctjhoa_: the trick is that in the docs ok/unwrap have `self` as the first argument, which consumes the value
[22:55:10] <huon> carter_: implement Hash yourself
[22:55:11] *** Joins: orangeshark (erik@moz-shfg20.44tj.56ot.0306.2602.IP)
[22:55:14] <jdm> ctjhoa_: other methods have `&self` as the first argument, which borrows it
[22:55:28] <huon> carter_: or... use http://doc.rust-lang.org/nightly/std/borrow/enum.Cow.html
[22:55:40] <ctjhoa_> jdm sure I will never forget :)
[22:55:54] *** Quits: dfinninger (dfinninger@moz-fe6.5n7.235.207.IP) (Connection closed)
[22:56:49] *** Joins: njn (chatzilla@moz-6gdjm4.iinet.net.au)
[22:56:52] <bluss> Twinklebear: I don't know, maybe someone else knows. I'd remove all uses of ref mut and ref there
[22:57:15] *** Quits: ndhoule (ndhoule@moz-qlf.50d.255.50.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:57:33] *** Quits: loyd (loyd@moz-uft.32f.108.213.IP) (Ping timeout: 121 seconds)
[22:57:49] <carter_> huon: if i were to implement hash, is there a way to get a unique value for each enum variant type?
[22:58:03] *** Quits: errordeveloper (ilya@moz-no1.79o.219.2.IP) (Ping timeout: 121 seconds)
[22:58:16] *** Quits: yichoi (yichoi@moz-t0r.chb.167.121.IP) (Connection closed)
[22:58:20] *** Joins: DerisiveLogic (smuxi@moz-g93io6.res.rr.com)
[22:58:27] *** Joins: loyd (loyd@moz-uft.32f.108.213.IP)
[22:58:32] *** Joins: yichoi (yichoi@moz-t0r.chb.167.121.IP)
[22:58:40] *** Quits: DerisiveLogic (smuxi@moz-g93io6.res.rr.com) (A TLS packet with unexpected length was received.)
[22:58:46] *** Joins: DerisiveLogic (smuxi@moz-g93io6.res.rr.com)
[22:58:58] <ChrisMorgan> carter_: match x { Variant1(..) => 0, Variant2(..) => 1 }?
[22:59:01] *** Joins: errordeveloper (ilya@moz-no1.79o.219.2.IP)
[22:59:07] *** Quits: skade (skade@moz-6g5dak.pools.vodafone-ip.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:59:17] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[22:59:40] *** Joins: saml_ (saml@moz-rkfmct.res.rr.com)
[22:59:59] <carter_> ChrisMorgan: i've actually done that before for serialization.  ill do it if i need to, but its error prone / ugly (in my opinion)
[23:00:32] *** Joins: naerbnic (naerbnic@moz-mol.4ra.239.216.IP)
[23:00:41] <huon> carter_: hm, if you want the same hash, don't you need to not consider which variant?
[23:00:50] *** Joins: fengshaun (fengshaun@moz-rf0qk5.cable.teksavvy.com)
[23:01:33] *** Quits: nstoddard (nstoddard@moz-k9n.dgb.211.128.IP) (Ping timeout: 121 seconds)
[23:01:49] *** Joins: jechochamber (Mibbit@moz-785.qpd.115.17.IP)
[23:02:08] *** Quits: jdm (jdm@moz-pdn.m8h.114.24.IP) (Quit: )
[23:02:30] <carter_> huon: the enum has many different variants (ex: DogString(String), DogStr(&'a str), CatString(String), CatStr(&'b str)) I only want the two Dog strings to be equivalent
[23:02:32] *** Quits: tamird (textual@moz-lje.m54.130.157.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:02:45] <huon> carter_: oh
[23:03:09] *** Quits: lov2cod (Adium@moz-k1q32r.o38v.k60l.0119.2620.IP) (Ping timeout: 121 seconds)
[23:03:11] <bluss> The Cow type may be appropriate anyway
[23:03:12] <reem> carter_: How about using enum { Dog(CowString<‘a>)), Cat(CowString<‘a>) }?
[23:03:17] <huon> carter_: well, it make sense to use `Dog(Cow<'a, str>), Cat(Cow<'a, str>)`
[23:03:21] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Ping timeout: 121 seconds)
[23:03:44] *** Quits: ctjhoa_ (Mibbit@moz-0oqgv8.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:03:45] *** Quits: ismaelga (ismaelga@moz-lmk.cu2.251.188.IP) (Connection closed)
[23:04:06] *** Joins: lov2cod (Adium@moz-40l.ob1.22.8.IP)
[23:04:21] *** Quits: duesenfranz_ (jona@moz-711djm.tirol.surfer.at) (Client exited)
[23:05:36] *** Joins: Shackra (Jorge@moz-7bh.ng6.177.186.IP)
[23:06:06] <mbrubeck> They still wouldn't hash the same if you use #[derive(Hash)] though, right?
[23:06:16] *** Quits: lov2cod (Adium@moz-40l.ob1.22.8.IP) (Quit: Leaving.)
[23:06:25] <mbrubeck> Oh wait, I see
[23:06:28] <mbrubeck> Ignore me. :)
[23:06:33] *** Joins: kgrandon (Adium@moz-6n0hfh.mycingular.net)
[23:06:58] <carter_> huon: that would solve the problem, but im not sure it is good for my needs because I am assuming the "user" does not have direct access to the data used to insert into the map
[23:08:11] <huon> carter_: I don't have a full understanding of your problem, but it seems to me that DogString(s) is basically 100% equivalent to Dog(Cow::Owned(s))
[23:08:14] <bluss> reem: I think the cowstring alias is gone, I just tried to find it
[23:08:28] <huon> (i.e. anything you can do with the former you can do with the later, and vice versa)
[23:09:04] *** Joins: paratr00pr (amiraj@moz-lom.trb.186.1.IP)
[23:09:10] *** Joins: tog (Mibbit@moz-tpjl46.co.comcast.net)
[23:09:16] *** Parts: paratr00pr (amiraj@moz-lom.trb.186.1.IP) ()
[23:09:23] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (A TLS packet with unexpected length was received.)
[23:09:27] *** Joins: paratr00pr (amiraj@moz-lom.trb.186.1.IP)
[23:09:54] *** Joins: panicbit (panicbit@moz-r4ks4s.dip0.t-ipconnect.de)
[23:10:37] *** Quits: tadh (quassel@moz-88tk3f.res.rr.com) (Ping timeout: 121 seconds)
[23:11:03] <Twinklebear> bluss, I put together a self contained example with the same issues: http://is.gd/uHBGlA hopefully this makes it a bit easier to maybe see what's happening?
[23:11:15] *** Quits: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net) (Quit: Konversation terminated!)
[23:12:04] *** Quits: spider-mario (spidermario@moz-coblcf.fbx.proxad.net) (A TLS packet with unexpected length was received.)
[23:12:33] *** Joins: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net)
[23:12:47] *** Parts: paratr00pr (amiraj@moz-lom.trb.186.1.IP) ()
[23:12:51] *** Joins: paratr00pr (amiraj@moz-lom.trb.186.1.IP)
[23:12:56] <Twinklebear> clearly the reference to the `MyObject` within `ResultThing` will live long enough since it refers to an item in the vec but I'm not sure how to tell the compiler this
[23:13:05] *** Quits: Gabriel_7 (Gabriel@moz-2vj54m.mtgr.92aj.0e35.2a01.IP) (Connection closed)
[23:13:45] <carter_> huon: unless I dont understand Cow, it will work for {x = Cow("hi"); hashset.insert(x.clone()); assert(hash_set.contains(x) ==  true)}, but it wont work for {let x = Cow::new("hi"); hash_set.insert(x); ..later in the program without access to x ..; let y = Cow::new("hi"); assert(hash_map.contains(y) == true)} which is what i need
[23:13:54] *** Joins: spider-mario (spidermario@moz-coblcf.fbx.proxad.net)
[23:13:58] <carter_> pardon my pseudo code
[23:14:17] <huon> carter_: I think that should work fine
[23:14:49] <carter_> huon: fair enough.  ill give it a try.  thanks a lot!
[23:15:06] *** Quits: willem (willem@moz-facs2s.dynamic.upc.nl) (Quit: leaving)
[23:15:45] <bluss> Twinklebear: oh that's tricky, maybe I found it. Can you compare the intersect function with the new version? http://is.gd/s4cy4t
[23:15:59] <Lurkin> Yay, I just used rust to implement a driver for a piece of hardware nobody will ever use!
[23:16:03] <bluss> Twinklebear: look at what the lifetime parameter does, it says something about what you give to the closure
[23:16:10] <Lurkin> And it works!
[23:16:17] <carter_> Lurkin: Woo!
[23:16:38] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[23:16:44] *** Quits: jaapz (jaapz@moz-ic0k7q.broekhuizen.nu) (Ping timeout: 121 seconds)
[23:17:04] <bluss> Twinklebear: I did this pretty ad-hoc, but basically, for the closure to be able to return any of the references it is passed in, it needs a lifetime (i.e. it lives longer than just the call itself)
[23:17:11] <paratr00pr> Just started learning Rust.. Must say blown away after reading the Introduction! seems pretty good
[23:17:26] *** Quits: zcourts (zcourts@moz-7ms809.cable.virginm.net) (Client exited)
[23:17:32] <Twinklebear> bluss ah yes that did it! interesting, that explanation does make sense
[23:17:45] *** Joins: jaapz (jaapz@moz-ic0k7q.broekhuizen.nu)
[23:17:50] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[23:17:50] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Connection closed)
[23:17:54] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[23:18:21] <Twinklebear> thanks bluss :D I'll have to read more on lifetimes heh
[23:18:24] *** Quits: colinsurprenant (colin@moz-rmn4e2.169.electronicbox.net) (Client exited)
[23:20:05] *** Joins: GeorgeHahn (George@moz-ir6kj0.nj.comcast.net)
[23:20:09] <bluss> good luck! there's a lot to it, I think
[23:20:41] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[23:20:45] *** Quits: shmup (shmup@moz-ucm.ei6.184.192.IP) (Connection closed)
[23:21:06] *** Joins: shmup (shmup@moz-ucm.ei6.184.192.IP)
[23:21:16] <reem> paratr00pr: Good to hear :) 
[23:21:23] *** Quits: Diggsey (diggsey@moz-2s5u1v.dsl.pipex.com) (Ping timeout: 121 seconds)
[23:22:33] *** Quits: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:22:57] *** Quits: mcoffee_ (mcoffee@moz-erlnm0.bchsia.telus.net) (A TLS packet with unexpected length was received.)
[23:24:14] *** Quits: yichoi (yichoi@moz-t0r.chb.167.121.IP) (Connection closed)
[23:24:52] *** nsm|away is now known as nsm
[23:25:09] *** Joins: woboats (tatterdemal@moz-a0dnkb.ca.comcast.net)
[23:25:38] *** Joins: cursivecode (textual@moz-4u56i9.res.bhn.net)
[23:26:04] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:26:07] *** Joins: dougxxx (dougxxx@moz-507os5.adam.com.au)
[23:26:12] *** Joins: VShell (Shell@moz-hh5bpk.hackr.org.uk)
[23:26:25] *** Quits: dellavg (dellavg@moz-t682jd.retail.telecomitalia.it) (Ping timeout: 121 seconds)
[23:28:04] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[23:28:28] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[23:30:04] *** Quits: hjr3 (hradtke@moz-dmp.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:31:45] *** Joins: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net)
[23:32:12] *** Quits: commandoline (commandolin@moz-s9gqj7.marten-de-vries.nl) (Ping timeout: 121 seconds)
[23:32:33] *** Joins: mark_edward (mark@moz-dg4mrp.in.comcast.net)
[23:32:35] *** Quits: stewartr (bzlandfill@moz-4gf.934.66.171.IP) (Quit: CGI:IRC (Ping timeout))
[23:32:38] *** Quits: ajtulloc_ (ajtulloch@moz-v4lug4.r0v0.kp93.010d.2620.IP) (A TLS packet with unexpected length was received.)
[23:32:41] *** Joins: ndhoule (ndhoule@moz-3eh.5o5.207.67.IP)
[23:33:00] *** Joins: ajtulloch (ajtulloch@moz-v4lug4.r0v0.kp93.010d.2620.IP)
[23:33:19] *** Quits: ajtulloch (ajtulloch@moz-v4lug4.r0v0.kp93.010d.2620.IP) (A TLS packet with unexpected length was received.)
[23:33:41] *** Joins: ajtulloch (ajtulloch@moz-v4lug4.r0v0.kp93.010d.2620.IP)
[23:34:10] *** Joins: Guest67_ (textual@moz-hnq.m3l.124.74.IP)
[23:34:11] *** Joins: chc4 (chc4@moz-pdo0at.ma.comcast.net)
[23:34:26] *** Quits: Guest67_ (textual@moz-hnq.m3l.124.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:34:29] *** Joins: lov2cod (Adium@moz-40l.ob1.22.8.IP)
[23:34:54] *** Joins: ajtulloc_ (ajtulloch@moz-i7m.9o0.201.199.IP)
[23:34:58] *** Quits: ajtulloc_ (ajtulloch@moz-i7m.9o0.201.199.IP) (A TLS packet with unexpected length was received.)
[23:35:17] *** Quits: ajtulloch (ajtulloch@moz-v4lug4.r0v0.kp93.010d.2620.IP) (Connection closed)
[23:35:19] *** Joins: ajtulloch (ajtulloch@moz-ccc8f2.oo8v.kp93.010d.2620.IP)
[23:35:56] *** Quits: cursivecode (textual@moz-4u56i9.res.bhn.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:36:52] *** Quits: errordeveloper (ilya@moz-no1.79o.219.2.IP) (Ping timeout: 121 seconds)
[23:37:21] *** Quits: fkaa_ (tundmatu@moz-501od2.business.telia.com) (Quit: )
[23:37:31] *** Quits: spider-mario (spidermario@moz-coblcf.fbx.proxad.net) (A TLS packet with unexpected length was received.)
[23:37:33] *** Quits: lov2cod (Adium@moz-40l.ob1.22.8.IP) (Quit: Leaving.)
[23:39:00] <carter_> huon: cow worked.  thanks again!
[23:39:47] *** Joins: commandoline (commandolin@moz-s9gqj7.marten-de-vries.nl)
[23:40:23] *** Joins: qrlpx_ (quassel@moz-tt7ass.dip0.t-ipconnect.de)
[23:41:28] *** Joins: lov2cod (Adium@moz-k1q32r.o38v.k60l.0119.2620.IP)
[23:43:12] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[23:43:54] *** Quits: qrlpx (quassel@moz-kdqjm3.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[23:44:21] *** Joins: clee (clee@moz-6215ca.org)
[23:44:38] *** Quits: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net) (Ping timeout: 121 seconds)
[23:44:46] <clee> I'm trying to use the new MetadataExt traits on Linux, but I have nfi what I'm doing
[23:44:49] <clee> I keep getting this warning:
[23:44:57] <clee> src/main.rs:39:66: 39:76 warning: use of deprecated item: use os::platform::fs::MetadataExt extension traits, #[warn(deprecated)] on by default
[23:45:10] <clee> src/main.rs:39                 let m = dir.path().as_path().metadata().unwrap().modified();
[23:45:18] <clee> can anybody cluebat me?
[23:45:47] *** Joins: edu (ed@moz-tfl2qt.cust.tele2.at)
[23:45:54] <clee> I have: 'use std::os::unix::fs::MetadataExt;' already.
[23:45:54] *** Quits: dsantiago (santiago@moz-lnsd20.biz.rr.com) (Ping timeout: 121 seconds)
[23:46:06] <clee> it does not appear to fix the warning.
[23:46:07] *** Joins: aatch (james@moz-ciignl.bmm3.j08e.e000.2406.IP)
[23:46:10] *** Quits: zaeleus (zaeleus@moz-r5abra.cpe.cableone.net) (Quit: Leaving...)
[23:46:42] <OtterCoder> Anyone here who's worked with the image crate?
[23:47:29] *** Quits: asQuirreL (asQuirreL@moz-ro1qqu.ox.ac.uk) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:48:41] *** Joins: santiago (santiago@moz-lnsd20.biz.rr.com)
[23:49:06] *** Quits: lenstr (lenstr@moz-h5k.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[23:49:15] *** Quits: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net) (Client exited)
[23:49:26] <datalus> Any advice on making this sig a little more brief: pub fn start_loop<F1,F2>(&mut self, mut u_callback: F1, mut r_callback: F2) where F1: FnMut(), F2: FnMut()
[23:49:46] <datalus> Maybe a vec of callbacks?
[23:49:47] *** Quits: Twinklebear (Twinklebear@moz-82o.nvh.110.128.IP) (Quit: Leaving)
[23:50:05] <aatch> datalus, that's not too bad a signature.
[23:50:06] *** Quits: chc4 (chc4@moz-pdo0at.ma.comcast.net) (Connection closed)
[23:50:50] <aatch> datalus, what are you trying to do?
[23:50:50] *** Joins: mkpankov` (user@moz-hr3.n6u.23.84.IP)
[23:50:55] *** Joins: chc4 (chc4@moz-pdo0at.ma.comcast.net)
[23:50:58] *** Quits: mkpankov (mkpankov@moz-hr3.n6u.23.84.IP) (Quit: Bye)
[23:51:07] *** Quits: mkpankov` (user@moz-hr3.n6u.23.84.IP) (Quit: ERC Version 5.3 (IRC client for Emacs))
[23:51:08] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[23:51:18] *** Joins: mkpankov (user@moz-hr3.n6u.23.84.IP)
[23:52:22] *** Quits: Raven67854 (Raven67854@moz-8fl3ql.unassigned.ntelos.net) (Quit: Leaving)
[23:53:03] <datalus> Pass in two callbacks that get called at certain points in the main loop
[23:53:19] *** Quits: bfrog (tburdick@moz-hpc0jl.il.comcast.net) (Quit: WeeChat 1.1.1)
[23:53:29] <datalus> Really, I'm just trying to call the callback based on which event: update or render I get back
[23:53:29] <aatch> datalus, ok. So why would you need a vec of them?
[23:53:40] <datalus> Just to make the function signature more brief ;)
[23:53:52] <reem> datalus: The signature you have now is probably best.
[23:54:03] <datalus> ok thanks
[23:54:17] <aatch> datalus, that's a reasonable function signature. When you have to spread it over 5 lines, *then* it's unweildly.
[23:54:31] *** Quits: jeffasinger (jeff@moz-1j1qti.cable.mindspring.com) (Client exited)
[23:54:55] <reem> datalus: One refactor you could make would be to take in a single closure, then pass it an argument which indicates if it should update or render. That way the closure could own data that is used during *both* rendering and updating. On the other hand, it’s a bit less ergonomic if update and render use entirely separate resources.
[23:55:10] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[23:55:14] *** Quits: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net) (A TLS packet with unexpected length was received.)
[23:55:33] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[23:56:26] <aatch> A second option is to use a trait with `update` and `callback` methods. Depending on your situation, it might be even less ergonomic than reem's refactor.
[23:56:42] *** Quits: GeorgeHahn (George@moz-ir6kj0.nj.comcast.net) (Ping timeout: 121 seconds)
[23:56:50] *** Quits: mark_edward (mark@moz-dg4mrp.in.comcast.net) (Ping timeout: 121 seconds)
[23:58:06] *** Joins: mark_edward (mark@moz-dg4mrp.in.comcast.net)
[23:58:57] *** Quits: carter_ (carter@moz-nl0.g9o.171.216.IP) (Quit: leaving)
[23:59:01] *** Joins: yichoi (yichoi@moz-t0r.chb.167.121.IP)
[23:59:14] *** kimundi is now known as zz_kimundi
[23:59:19] *** Joins: mcanders (carter@moz-nl0.g9o.171.216.IP)
[23:59:32] *** Quits: mcanders (carter@moz-nl0.g9o.171.216.IP) (Quit: leaving)
[23:59:36] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Ping timeout: 121 seconds)
[23:59:51] <OtterCoder> I've run into a bit of a snag with the image crate, it's throwing a 'shift operation overflowed' error on jpeg/entropy.rs when I try to resize an image.
