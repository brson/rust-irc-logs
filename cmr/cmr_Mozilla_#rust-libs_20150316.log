[01:09:21] *** Joins: reem (reem@moz-di7pfv.coob.q2h1.0009.2601.IP)
[01:13:42] *** Quits: reem (reem@moz-di7pfv.coob.q2h1.0009.2601.IP) (Connection closed)
[01:34:51] *** kimundi is now known as zz_kimundi
[01:42:47] *** zz_kimundi is now known as kimundi
[02:03:41] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[02:10:13] *** kimundi is now known as zz_kimundi
[02:10:32] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Ping timeout: 121 seconds)
[02:12:25] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[02:18:31] *** Joins: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[02:18:51] *** zz_kimundi is now known as kimundi
[02:32:41] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[02:38:33] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[03:23:20] *** Joins: Gankro (uid71432@moz-sc2bd6.charlton.irccloud.com)
[03:37:02] *** Quits: kimundi (kimundi@moz-2itb6k.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[03:38:20] *** Joins: kimundi (kimundi@moz-vchv39.dip0.t-ipconnect.de)
[03:42:31] *** kimundi is now known as zz_kimundi
[03:51:15] *** zz_kimundi is now known as kimundi
[04:14:25] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[04:19:52] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[04:43:03] *** kimundi is now known as zz_kimundi
[04:43:47] *** zz_kimundi is now known as kimundi
[04:54:36] *** kimundi is now known as zz_kimundi
[05:38:58] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[05:43:26] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Ping timeout: 121 seconds)
[07:45:10] *** Joins: reem (reem@moz-i4oevu.coob.q2h1.0009.2601.IP)
[07:48:31] *** Quits: Gankro (uid71432@moz-sc2bd6.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[07:53:50] *** zz_kimundi is now known as kimundi
[08:04:37] *** Quits: reem (reem@moz-i4oevu.coob.q2h1.0009.2601.IP) (Connection closed)
[08:06:00] *** Quits: acharles (acharles@moz-ulbdcn.ca.comcast.net) (Client exited)
[08:28:34] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[08:44:42] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[08:47:00] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[09:17:34] <SimonSapin> acrichto, aturon: I’m wondering whether having CharExt::to_{upper,lower}case at all in std is a good idea
[09:18:42] <SimonSapin> compared to having them only on str or even Iterator<Item=char>
[09:27:26] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[09:35:03] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Ping timeout: 121 seconds)
[10:04:35] *** Joins: simukis (nagisa@moz-pol184.mif.vu.lt)
[10:04:55] <reem> SimonSapin: The actual merits aside, people do string manipulation like that a lot in blog posts so it helps if it looks good.
[10:05:22] <SimonSapin> reem: like that how?
[10:06:07] <reem> doing a capitalization search/replace or something
[10:06:15] <reem> just as a toy problem to show off the langauge
[10:09:30] <SimonSapin> I don’t understand what capitalization search/replace means, if it’s one thing
[10:12:43] <reem> like "write a program that searches a string for some other string and replaces all instances of it within the search string with its capitalization."
[10:14:37] <huon> I personally haven't seen many blog posts that do that sort of thing
[10:14:49] <huon> also, optimising for blog posts seems... a little misguided :)
[10:15:17] <reem> Ya, that's why I said all merits aside :P
[10:16:25] <SimonSapin> Does capitalization mean only the first letter? How do you define letter?
[10:16:39] <SimonSapin> In Unicode that’s much less obvious than it seems
[10:17:07] <reem> yes, I agree, it's ill-defined and maybe doesn't belong in std
[10:17:49] <reem> someone could easily write another string API in rust by just adding implementations to str and String
[10:33:30] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[11:13:27] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[11:17:37] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[11:18:56] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[11:56:00] *** Quits: simukis (nagisa@moz-pol184.mif.vu.lt) (Ping timeout: 121 seconds)
[12:01:23] *** Joins: simukis (nagisa@moz-pol184.mif.vu.lt)
[12:07:39] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[12:11:53] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[12:52:54] *** Quits: simukis (nagisa@moz-pol184.mif.vu.lt) (Client exited)
[13:01:48] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[13:06:03] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[13:07:26] *** Joins: simukis (nagisa@moz-pol184.mif.vu.lt)
[13:12:45] *** Quits: simukis (nagisa@moz-pol184.mif.vu.lt) (Client exited)
[13:15:02] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Connection closed)
[13:16:23] *** Joins: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[13:32:23] *** Joins: joel2 (joel@moz-6ampnk.gtri.gatech.edu)
[13:55:56] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[14:00:12] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[14:19:19] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[14:23:43] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Ping timeout: 121 seconds)
[14:30:46] *** Joins: Gankro (uid71432@moz-sc2bd6.charlton.irccloud.com)
[14:39:19] *** Joins: nrc|afk (nrc|afk@moz-4bhi2i.xtra.co.nz)
[14:39:22] *** nrc|afk is now known as nrc
[14:44:17] *** Quits: nrc (nrc|afk@moz-4bhi2i.xtra.co.nz) (Ping timeout: 121 seconds)
[14:50:07] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[14:54:19] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[14:59:41] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[15:20:17] *** Joins: rajat (rajat@moz-utq.l4p.189.205.IP)
[15:44:14] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[15:48:30] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[15:57:41] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[16:18:16] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[16:18:16] *** ChanServ sets mode: +qo brson brson
[16:38:22] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[16:42:38] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[16:43:19] *** Joins: nrc (nrc@moz-4bhi2i.xtra.co.nz)
[16:43:20] *** ChanServ sets mode: +qo nrc nrc
[16:44:35] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[16:48:16] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Ping timeout: 121 seconds)
[17:43:47] *** Quits: rajat (rajat@moz-utq.l4p.189.205.IP) (Client exited)
[17:45:28] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (A TLS packet with unexpected length was received.)
[17:53:10] *** Joins: nrc (nrc@moz-4bhi2i.xtra.co.nz)
[17:53:11] *** ChanServ sets mode: +qo nrc nrc
[18:01:59] *** Joins: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com)
[18:34:32] *** Joins: rajat (rajat@moz-av1.l4p.189.205.IP)
[18:58:34] *** Quits: Gankro (uid71432@moz-sc2bd6.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[19:30:10] *** Joins: reem (reem@moz-4ilvor.coob.q2h1.0009.2601.IP)
[19:47:41] <nmatsakis> aturon: ping, so acrichto encountered a problem with the "Reflect uses OIBIT" idea
[20:24:56] *** Quits: reem (reem@moz-4ilvor.coob.q2h1.0009.2601.IP) (Connection closed)
[20:28:40] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[20:41:43] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[21:06:48] <aturon> nmatsakis: pong
[21:16:24] *** Joins: Gankro (uid71432@moz-sc2bd6.charlton.irccloud.com)
[21:27:05] <nmatsakis> aturon: right so if we use OIBIT for Reflect, the problem is that it doesn't work for trait objecrts
[21:27:17] <nmatsakis> in particular: Box<SomeTrait> is not known to impl Reflect
[21:27:21] <nmatsakis> you would need Box<SomeTrait+Reflect>
[21:30:00] <aturon> nmatsakis: hm, i'm not sure how much this actually effects the usage we had in mind
[21:30:08] <nmatsakis> well
[21:30:10] <nmatsakis> one downside is
[21:30:14] <aturon> nmatsakis: iirc the idea was that Reflect was the bound on the type you're downcasting to?
[21:30:16] <nmatsakis> struct Foo { b: Box<Writer+Send> }
[21:30:22] <nmatsakis> no longer implements Reflect either
[21:30:36] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[21:30:48] *** Joins: Rym (y@moz-859.d1r.39.217.IP)
[21:30:54] <nmatsakis> aturon: I think Reflect is used in the type you are converted to/from
[21:31:18] <nmatsakis> I mean, it's absolutely right though
[21:31:23] <nmatsakis> in aprticular
[21:31:28] <nmatsakis> if we ever wanted to allow opting *out* of reflect
[21:31:38] <nmatsakis> conceivably we could have some feature whereby
[21:31:44] <nmatsakis> you specify that the trait cannot be opted out of 
[21:31:50] * nmatsakis contemplates
[21:32:03] <nmatsakis> problem is, if you can't opt out, then why do we need the bound? ;) 
[21:32:08] <aturon> haha
[21:32:16] <nmatsakis> (in particular, the ways that we HAVE to say that, would also make you not need the bound)
[21:32:26] <aturon> well so the bound was wanted so taht the compiler doesn't know that A: Reflect for all A,
[21:32:32] <nmatsakis> right
[21:32:34] <aturon> even though in fact each concrete A has an impl
[21:32:49] <nmatsakis> certainly we could make Reflect a special trait, I wonder how common this is
[21:32:55] <aturon> maybe it would help to sketch the actual downcasting API?
[21:33:03] <nmatsakis> will this ever come up again?
[21:33:03] <aturon> my recollection was that the bound only applied to the target type
[21:33:04] *** Quits: Rym (y@moz-859.d1r.39.217.IP) (Connection closed)
[21:33:10] <nmatsakis> well, does it really matter?
[21:33:18] *** Quits: joel2 (joel@moz-6ampnk.gtri.gatech.edu) (Ping timeout: 121 seconds)
[21:33:26] <aturon> hm, perhaps not
[21:33:26] *** Joins: Rym (y@moz-859.d1r.39.217.IP)
[21:33:39] <aturon> for some reason that seemed less likely to be a boxed trait object
[21:33:49] <nmatsakis> I mean the target type and the source type are the same :)
[21:33:57] <nmatsakis> (or else the downcast fails)
[21:34:09] <aturon> oh sorry
[21:34:16] <aturon> i mean in contrast to Self
[21:34:22] <aturon> from the thing being downcasted from
[21:34:27] <aturon> that's what i mean by "source"
[21:35:28] <nmatsakis> ah
[21:35:42] <nmatsakis> well, i agree because the source type is known to be Box<Any> ;)
[21:35:49] <nmatsakis> or &Any
[21:35:52] <nmatsakis> so it will SURELY have a trait object!
[21:36:28] <aturon> (this is also relevant to Error etc)
[21:36:44] <aturon> (where we don't plan to involve Any due to lack of upcasting)
[21:36:46] <nmatsakis> because it does downcasting
[21:36:53] <aturon> we want it to, yes
[21:37:09] <nmatsakis> so it'd be very easy
[21:37:21] <nmatsakis> to make Reflect a trait well known to the compiler
[21:37:41] <nmatsakis> well I guess
[21:37:42] <aturon> basically the original suggestion?
[21:37:45] <nmatsakis> it'd basically do the same thing as OIBIT
[21:37:55] <nmatsakis> *except* with respect to trait objects
[21:38:15] <aturon> wait, do you actually want to do that
[21:38:24] <nmatsakis> I am wondering the same thing
[21:38:24] <aturon> or does that allow the same parametricity-breaking tricks?
[21:38:47] <nmatsakis> and yet I think it is ok
[21:38:51] <nmatsakis> but I am a bit nervous
[21:38:58] <nmatsakis> in particular,
[21:39:03] <nmatsakis> I think that when you create the trait object,
[21:39:05] <aturon> well, so the question is: can you crate e.g. Box<Any> from something not known to impl Reflect?
[21:39:05] <nmatsakis> you must write an impl
[21:39:21] <nmatsakis> hmm
[21:39:30] <nmatsakis> well, you could I guess
[21:39:39] <nmatsakis> but
[21:39:50] <nmatsakis> the Any would be for the trait object type
[21:40:22] <nmatsakis> which seems harmless
[21:41:14] <aturon> right, so in particular, there's no way to then downcast and figure out the original type, it seems
[21:43:10] <aturon> ok, just to be clear, this is the kind of example we're worried about, right? https://gist.github.com/aturon/9f29e9edae931b87a84d
[21:45:44] <nmatsakis> aturon: indeed
[21:46:13] <aturon> i'm now feeling a little unsure about which proposals actually prevent that
[21:46:27] <nmatsakis> well, the OIBIT-based one certainly does
[21:46:36] <aturon> why?
[21:46:43] <aturon> does Any take Reflect as a super trait?
[21:46:46] <aturon> (in that design?)
[21:46:56] <nmatsakis> I would think so, yes
[21:46:58] <nmatsakis> but also
[21:46:59] <aturon> i.e., i'm imagining that SomeConcreteType is Reflect
[21:47:00] <nmatsakis> even if it didn't
[21:47:12] <nmatsakis> ah, I see. well, anyway, I Was assuming Any took Reflect as a supertrait
[21:47:14] <aturon> ok
[21:47:28] <nmatsakis> in aprticular
[21:47:32] <nmatsakis> the TypeId intrinsic
[21:47:34] <nmatsakis> would require Reflect
[21:47:51] <aturon> ah right
[21:47:58] <aturon> good
[21:48:12] <nmatsakis> well that may not be enough but anyway
[21:48:16] <nmatsakis> yes Any must have Reflect as supertrait
[21:49:40] <aturon> i can't quite see how the non-OIBIT approach would address the problem
[21:49:56] <aturon> unless there were special rules about creating trait objects 
[21:50:01] <aturon> which seems unfortunate
[21:50:30] <nmatsakis> right, I think that the only real difference would be that Reflect is special
[21:50:40] <nmatsakis> basically a lang item
[21:50:44] <nmatsakis> rather than using `..`
[21:50:54] <nmatsakis> this may in fact be the right thing, given the trait object problem
[21:51:31] <aturon> ok
[21:55:42] <sfackler> nmatsakis: did you have a chance to look into the ICEs that the ItertorExt removal PR ran into?
[21:56:01] <nmatsakis> sfackler: no, remind me the issue #
[21:56:17] <sfackler> https://github.com/rust-lang/rust/pull/23300
[21:56:55] *** Quits: Rym (y@moz-859.d1r.39.217.IP) (Connection closed)
[21:57:32] *** Joins: Rym (y@moz-859.d1r.39.217.IP)
[22:01:49] *** Quits: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com) (Connection closed)
[22:02:23] *** Joins: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com)
[22:08:26] *** Quits: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com) (Ping timeout: 121 seconds)
[22:20:41] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[22:37:17] *** Quits: WindowsBunny (Peter@moz-gv8vtu.east.verizon.net) (Connection closed)
[22:37:54] *** Joins: WindowsBunny (Peter@moz-gv8vtu.east.verizon.net)
[22:54:31] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[23:12:16] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Client exited)
[23:22:48] *** Quits: rajat (rajat@moz-av1.l4p.189.205.IP) (Client exited)
