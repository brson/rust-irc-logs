[00:00:59] *** Quits: tikue (tkuehn@961CBB8C.E6CB677E.689607DE.IP) (Ping timeout)
[00:01:29] *** Joins: tikue (tkuehn@961CBB8C.E6CB677E.689607DE.IP)
[00:02:06] <bblum> ecr: check_killed()
[00:02:43] *** Joins: echristo (echristo@4241698A.2E4FD3DD.225F4543.IP)
[00:03:02] <ecr> bblum: thx
[00:03:17] <bblum> what are you looking into?
[00:04:03] <ecr> trying to figure out if we can remove the unkillable around the scheduling in home_for_io since it just sends tasks through the message queues
[00:04:36] <bblum> any reason you need to?
[00:04:41] <bblum> it seems fragile to remove it
[00:05:03] <ecr> well the unkillable is supposed to be temporary until we audit the I/O code interacting with the scheduler
[00:05:05] <bblum> like something else could change somewhere and screw you up
[00:05:09] <bblum> i see, oh, right
[00:05:12] <bblum> you just wanna use finally
[00:05:27] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[00:05:55] *** Quits: msingle (Thunderbir@moz-20675462.nrflva.fios.verizon.net) (Ping timeout)
[00:07:45] *** Quits: echristo (echristo@4241698A.2E4FD3DD.225F4543.IP) (Ping timeout)
[00:08:39] <ecr> oh, so the scheduler checks for task death after running the clean up job?
[00:08:50] <ecr> hm
[00:09:13] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:09:25] <ecr> I wonder if we even need to do anything then
[00:09:26] *** Joins: brendan (brendaneic@moz-795C3335.lightspeed.sntcca.sbcglobal.net)
[00:09:47] *** Quits: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Ping timeout)
[00:11:41] *** Joins: ww (Mibbit@moz-9D1D3E.public.wayport.net)
[00:11:58] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[00:11:59] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[00:12:02] <ecr> GAH! some tests failed on bors brson
[00:12:33] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:13:28] *** Quits: nkoep (nik@moz-79B329C7.pool.mediaways.net) (Client exited)
[00:13:31] <strcat> this error message is strangely wrong :s
[00:13:34] <strcat> /home/strcat/projects/rust/src/librustc/middle/trans/base.rs:223:22: 223:28 error: mismatched types: expected `*middle::ty::t_opaque` but found `&*middle::ty::t_opaque` (expected enum middle::ty::t_opaque but found *-ptr)
[00:14:04] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[00:14:17] *** Quits: brendan (brendaneic@moz-795C3335.lightspeed.sntcca.sbcglobal.net) (Quit: brendan)
[00:14:44] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[00:15:07] <ecr> brson: got an rtassert! failure "unwinding again". looks like it comes from starting to unwind when you're already unwinding. (problem was on bsd-64-opt) I've never run into something like this before
[00:15:09] *** Joins: jdsanders (Adium@moz-8527430D.hlrn.qwest.net)
[00:15:23] *** Quits: tikue (tkuehn@961CBB8C.E6CB677E.689607DE.IP) (Quit: tikue)
[00:15:24] *** Joins: rtm9zc (Mibbit@moz-6CBD7853.hsd1.va.comcast.net)
[00:16:06] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[00:16:06] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 142b2427c to 14a9ac272: 02http://git.io/N3iJvQ
[00:16:06] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[00:16:07] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[00:16:07] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/E7-_3w
[00:16:07] <ghrust> 13rust/06auto 142e38ab3 15SiegeLord: Properly encode/decode structural variants.
[00:16:07] <ghrust> 13rust/06auto 1434bd534 15SiegeLord: Rename encode_struct_field_names to encode_struct_fields to reflect what it actually does
[00:16:07] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[00:16:08] <ghrust> 13rust/06auto 14b5b3047 15SiegeLord: Add a test for cross-crate struct variants
[00:16:10] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[00:16:46] *** Parts: rtm9zc (Mibbit@moz-6CBD7853.hsd1.va.comcast.net) ()
[00:16:58] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[00:17:04] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[00:17:22] *** Joins: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP)
[00:17:48] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[00:17:48] <ghrust> 01[13rust01] 15thestinger 04force-pushed 06try from 14ac82090 to 143433396: 02http://git.io/k471pw
[00:17:48] <ghrust> 13rust/06try 14c319f48 15Daniel Micay: fix handling of function attributes...
[00:17:48] <ghrust> 13rust/06try 143433396 15Daniel Micay: add sret + noalias to the out pointer parameter...
[00:17:48] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[00:20:32] *** Joins: Larry (larryfox@moz-8D6C9B2A.nycmny.fios.verizon.net)
[00:21:32] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[00:23:37] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[00:24:27] *** Joins: victorporof (victorporo@FBDAE982.F9BD9D78.9B1E38F4.IP)
[00:24:45] <kmc> rusti: let x: u8 = 0; x
[00:24:46] -rusti- 0u8
[00:25:53] <luisbg> does anyone know a good document that explains Boxes?
[00:26:05] <luisbg> the tutorial is confusing me about what they are and what's their purpose
[00:26:07] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[00:26:07] <ghrust> 01[13rust01] 15thestinger 04force-pushed 06try from 143433396 to 147d25310: 02http://git.io/k471pw
[00:26:07] <ghrust> 13rust/06try 14ac659e4 15Daniel Micay: fix handling of function attributes...
[00:26:07] <ghrust> 13rust/06try 147d25310 15Daniel Micay: add sret + noalias to the out pointer parameter...
[00:26:08] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[00:26:22] <Luqman> luisbg: boxes as in @/@mut ?
[00:26:27] <strcat> and ~
[00:26:34] <luisbg> yes
[00:26:35] *** Quits: victorporof (victorporo@FBDAE982.F9BD9D78.9B1E38F4.IP) (Ping timeout)
[00:26:49] <cmr> luisbg: http://cmr.github.io/blog/2013/08/13/rust-by-concept/ might be illuminating, but it's not complete.
[00:26:58] <luisbg> both managed and owned, so @ and ~
[00:27:13] <ecr> brson: wat. The problem isn't even in the code I changed. All the modified tests pass or are ignored. I'm going to retry that.
[00:27:27] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[00:27:29] <strcat> luisbg: ~T is like T, except it's always pointer-size and has a destructor to clean up the memory it allocates
[00:27:35] <strcat> it's just a heap allocation
[00:27:55] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[00:28:11] <dcrewi> why isn't there a result.to_opt()?
[00:28:34] <luisbg> strcat, always pointer-size? do you mean always a pointer that gets free'd when out of scope?
[00:28:40] <strcat> luisbg: yes
[00:28:47] <strcat> ~T is a pointer to memory holding T
[00:28:50] <luisbg> strcat, ok! thanks
[00:28:54] <strcat> the *only* reason it exists is to be pointer-size
[00:29:15] <strcat> the only time you actually need ~T is when you're making a recursive data structure
[00:29:19] <luisbg> and to have the actual value in heap memory
[00:29:22] <strcat> otherwise, it's just a performance trade off
[00:29:30] <strcat> luisbg: well that's not needed, except to make a recursive data structure
[00:29:36] <strcat> ~T and T both have value semantics
[00:29:46] <luisbg> strcat, it is introduced in the tutorial before other things, I thought it might be important or very commonly used
[00:29:52] <engla> dcrewi: there will be
[00:29:53] <sfackler> you also need it for ~str and ~[T]
[00:30:07] <strcat> sfackler: that's not ~T
[00:30:12] <strcat> that's just similar syntax
[00:30:12] <Luqman> sfackler: but ~str and ~[T] are a but special
[00:30:31] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:30:33] <luisbg> strcat, what about managed boxes (@) ?
[00:30:59] <cmr> luisbg: GC-managed, exist for cyclical structures or non-obvious ownership trees.
[00:31:03] <strcat> luisbg: well T and ~T have value semantics - they always have a single owner (slot they are in), responsible for destroying them
[00:31:24] <strcat> ownership doesn't pass through @
[00:31:35] <strcat> let x = (~5, @5);
[00:31:47] <strcat> `x` owns the tuple, and the ~, and the 5 inside it
[00:31:59] <strcat> when it goes out of scope, it will free the ~
[00:32:23] <strcat> and if x is mutable, everything it owns is mutable
[00:32:32] <strcat> let mut x = (~5, @5);
[00:32:38] <strcat> the ~5 is mutable, the @5 isn't
[00:32:50] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[00:32:52] <luisbg> @mut
[00:32:56] <strcat> anyway that's just because ~T acts exactly like T (beyond how big they are)
[00:33:22] <strcat> + ~T always has a destructor, but it doesn't act differently than other types with destructors (they move ownership)
[00:33:59] <strcat> luisbg: @ is always immutable, @mut is always mutable - they don't have an owner, so the mutability is part of the type
[00:34:11] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[00:34:19] <rossm> fyi this is an extremely effective discussion/explanation. from my perspective as a mostly newbie
[00:34:26] <luisbg> strcat, so the difference between ~5 and @5 is that one is handled by a destructor and the other by the GC
[00:34:28] <luisbg> ?
[00:34:34] *** Joins: optimusbrine (optimusbri@moz-CF697891.tampfl.fios.verizon.net)
[00:34:47] <strcat> luisbg: and ~T is a regular owned value, inheriting mutability
[00:35:33] <strcat> so, T vs. ~T -> ~T always has a destructor and is pointer size
[00:35:43] <luisbg> how common is the usage of ~ and @ in Rust code?
[00:35:48] <luisbg> strcat, thanks for the explanation :)
[00:35:50] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[00:35:50] <cmr> Both are fairly uncommon.
[00:35:55] <luisbg> that cleared my ideas a lot
[00:36:00] <cmr> ~ is used mostly in ~str and ~[]
[00:36:13] <luisbg> cmr, once I see it in use I will understand the purpose a lot better
[00:36:17] <cmr> @ is considered a code smell, to be avoided if at all possible.
[00:36:19] <luisbg> I understand the concept... the what
[00:36:19] <strcat> cmr: those aren't really ~ though
[00:36:23] <cmr> strcat: right
[00:36:29] <luisbg> or the how. sorry. but not the why as much
[00:36:54] <cmr> The "why" is what "Rust's Memory Management" is supposed to explain
[00:37:14] * strcat wrote that Boxes section in the tutorial ;p
[00:37:29] <strcat> but it's easier to explain something over irc because you have feedback as you go
[00:37:30] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[00:37:32] <cmr> yes
[00:37:36] <strcat> instead of trying to make an explanation for anyone
[00:37:47] <luisbg> strcat, are you interested in feedback on the topic in the tutorial?
[00:37:50] <strcat> yes
[00:38:03] <luisbg> I noticed there is one concept that is used in an explanation before it is itself explained
[00:38:06] <luisbg> let me look back for it
[00:39:47] <luisbg> "A box managed by the garbage collector starts a new ownership tree, and the destructor is called when it is collected."
[00:39:49] <luisbg> In section 8
[00:39:56] <luisbg> when Section 9 is Boxes
[00:40:17] <luisbg> when I read that line, I thought, "what the hell is a box?"
[00:40:37] <strcat> yeah that's a bit of a mess
[00:41:24] <luisbg> my two cent
[00:41:34] <luisbg> so far learning a lot, so it isn't that bad hehe
[00:42:16] <strcat> meh this get_extern_fn thing needs to be rewritten too
[00:42:33] <cmr> you'll ragerefactor all of trans, at this rate
[00:42:41] <cmr> :P
[00:42:50] <strcat> https://github.com/mozilla/rust/commit/c319f48334f19263c5c416de83e4763a0f37298c not that bad
[00:42:54] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[00:42:59] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Quit: Lovot)
[00:43:02] <strcat> this makes it easy to switch rust's ABI too
[00:43:10] <cmr> good to know
[00:43:19] *** Joins: mistery (ghena1986@moz-66537D60.no.no.cox.net)
[00:43:22] <mistery> http://bit.ly/19FkLVd
[00:43:23] *** Parts: mistery (ghena1986@moz-66537D60.no.no.cox.net) ()
[00:44:22] <luisbg> spam in IRC :(
[00:44:25] <ww> is there a coding style for naming internal methods?  like _method1
[00:44:27] <jdm> yep
[00:44:35] <luisbg> jdm, o/
[00:44:36] <jdm> gavin: ^
[00:44:40] <cmr> ww: no.
[00:44:47] <ww> ok
[00:44:48] <strcat> ww: just don't make them public
[00:44:55] <cmr> ww: we have pub/priv for that
[00:45:23] <engla> you can put internal methods in a different impl block. Not sure if that's considered a good style though
[00:45:44] <ww> i have struct and then traits implementing it.  i want to segregate the their name spaces
[00:46:03] <ww> the trait methods can call the internal methods in struct
[00:47:03] <ww> the trait methods are public for others to call
[00:47:06] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[00:47:27] <ww> anyway since there's no convention, i'll just do whatever make sense
[00:47:38] <strcat> ww: you don't need a convention for that
[00:47:42] *** Quits: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com) (Quit: ecr)
[00:47:52] <strcat> leave the 'impl Foo {}' methods as non-pub
[00:47:59] <strcat> and they won't be available outside of the crate
[00:48:13] <strcat> they're private by default
[00:48:39] <strcat> (won't be available outside of the module)*
[00:49:05] <ww> yes, they are private.  as a styling issue, i want to name them differently so that i know where the methods are from since several traits can mix their methods together
[00:49:06] <engla> ww: just put "pub" on the traits that are for external use
[00:49:30] <ww> ok 
[00:49:32] *** Quits: jlw8k_000 (chatzilla@CC859A13.4DB138C4.DDE5D3F6.IP) (Ping timeout)
[00:49:41] <ww> nb question: when i cast a Struct1 to its implementing Trait1 and print out the variable, it shows the result has type: Trait1:Send.  What's that?  Also I can't cast Trait1 back to Struct1 as it claims different types.
[00:50:36] <engla> you erase the type basically when casting to a ~Trait1 object.   ~Trait1:Send is the full type name, the :Send bound is implicit for ~Trait1  (with tilde)
[00:51:01] <engla> ~Trait:X means that it contains something that implements the X bound. Only built-in traits like Send can be X
[00:51:12] *** Quits: heftig (heftig@moz-72BABD74.dip0.t-ipconnect.de) (Ping timeout)
[00:51:13] <strcat> ww: you likely don't want trait objects, but just generic functions/types
[00:52:05] <cmr> ww: we don't have dynamic class casting like java does
[00:52:08] <ww> strcat, i want to return "interface" to the user and not the internal struct
[00:52:12] <cmr> once you castsomething to a trait object, that's what you have.
[00:52:21] <ww> ok, thx cmr
[00:52:33] <strcat> ww: you can make the fields private
[00:53:08] <ww> the generic "interface" can have different implementations.  isn't trait the way to do it?
[00:53:27] <strcat> ww: yes but trait objects aren't the only way to use traits
[00:53:32] <strcat> they are an edge case, really
[00:53:39] <ww> i have a "factory" to create different implementation(struct) based on user parameters
[00:54:05] <ww> i see.  ok. i'll look into the generic type and generic functions.  something new to learn!
[00:54:09] <ww> thanks!
[00:54:10] <strcat> and enums
[00:57:09] *** Joins: msingle (Thunderbir@moz-20675462.nrflva.fios.verizon.net)
[00:57:24] *** Joins: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net)
[00:57:53] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[00:58:09] <luisbg> http://opensourcebridge.org/sessions/970
[00:58:17] <luisbg> is that talk in video somewhere? would love to watch it
[00:58:47] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[00:59:19] <cmr> unfortunately not, at least I haven't seen it yet.
[01:00:18] <ktt3ja> how do I use extra::timer::sleep in Rust 0.7?
[01:00:33] <ktt3ja> it takes an IoTask object, but I don't how to specify one
[01:00:46] <engla> ok I'd love nitpicks on PR https://github.com/mozilla/rust/pull/9108  I'm not sure if it's done yet. I think it's sane, since it's removing a lot of unsafe code. but for some that might be removing lots of optimizations
[01:01:58] *** Joins: heftig (heftig@moz-C3CA52B7.dip0.t-ipconnect.de)
[01:03:51] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[01:04:31] <luisbg> cmr, I emailed the organization asking if they will make videos available online
[01:04:37] <cmr> luisbg: awesome!
[01:05:28] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[01:05:28] <ghrust> 01[13rust01] 15thestinger 04force-pushed 06try from 147d25310 to 1471bebeb: 02http://git.io/k471pw
[01:05:28] <ghrust> 13rust/06try 143f99540 15Daniel Micay: fix handling of function attributes...
[01:05:28] <ghrust> 13rust/06try 1471bebeb 15Daniel Micay: add sret + noalias to the out pointer parameter...
[01:05:28] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[01:08:01] *** Quits: valenting (Thunderbir@BC8F8C4C.4ABED146.FB866788.IP) (Ping timeout)
[01:08:14] *** Joins: jstevans1 (Instantbir@EF49C126.D2312BC6.DDE5D3F6.IP)
[01:08:15] *** Quits: jstevans (Instantbir@EF49C126.D2312BC6.DDE5D3F6.IP) (Connection reset by peer)
[01:09:59] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[01:11:26] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[01:12:45] <ww> strcat: unless i'm mistaken, generic function in rust is type-parameterized function like c++ template function, and generic type is parameterized type.  i don't know whether they would help in my case
[01:12:48] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[01:13:37] <ww> i need to group a set of method together as a set and offers them to the user, but hide the implementation detail.  an "interface" with methods would be perfect.  trait is closest to it.
[01:13:40] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[01:13:53] *** Joins: jstevans (Instantbir@CE9584F1.8878667B.DDE5D3F6.IP)
[01:14:10] <engla> generic functions go hand in hand with traits ww 
[01:14:14] <ww> e.g. trait db {  fn open();  fn close(); fn commit(); }
[01:14:16] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[01:14:19] <engla> you have multiple options
[01:14:46] *** Quits: jstevans1 (Instantbir@EF49C126.D2312BC6.DDE5D3F6.IP) (Ping timeout)
[01:14:50] *** Quits: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:15:44] <ww> engla, you meant to parameterized the trait?  like trait db<T> { fn open(); ... }
[01:15:57] <engla> no, to provide bounds
[01:16:24] *** Quits: jstevans (Instantbir@CE9584F1.8878667B.DDE5D3F6.IP) (Ping timeout)
[01:16:32] <Luqman> fn do_something<T: DB>(x: T) { x.open(); ... x.close(); }
[01:16:43] <Luqman> ww: something like that ^ 
[01:17:07] <engla> fn insert_into<DB: Database>(rec: Record, db: &mut DB) { }
[01:17:08] <ww> ok, i see. 
[01:17:20] <engla> insert_into is a generic function and the type parameter DB has to implement Database
[01:17:51] <ww> that's nice for one function but i want to group a set of functions together to offer them as a bundle
[01:18:10] <ww> won't trait be the way to go?
[01:18:18] <cmr> Can you post some code and where exactly theproblem is?
[01:18:19] <engla> maybe
[01:18:22] <strcat> if they're in a module, they are grouped together
[01:18:40] <strcat> or you could implement them as extension methods on types implementing some trait
[01:19:14] <ww> i do need to maintain some state, like the open connection 
[01:19:24] <ww> so i need a struct to hold the state info
[01:19:44] <ww> module only scope the functions
[01:19:45] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[01:19:47] <cmr> Yes, you impl the trait for the struct, and the methods in the trait would do all of that.
[01:19:56] <ww> ok
[01:21:15] <ww> i hope there are not stupid questions.  i just want to understand different options in rust for implementing solutions
[01:21:47] <ww> but thanks all for the answers.  they are good info
[01:21:55] <cmr> they are not stupid questions
[01:22:12] <ww> :)
[01:22:40] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[01:24:22] *** Joins: jstevans (Instantbir@7FBF0EEA.75B49943.DDE5D3F6.IP)
[01:24:49] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:25:03] *** Joins: victorporof (victorporo@FBDAE982.F9BD9D78.9B1E38F4.IP)
[01:25:19] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:26:12] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[01:26:59] *** Quits: Jesin (Jessin_@moz-32C5E99B.cc.lehigh.edu) (Quit: Leaving)
[01:27:00] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:27:04] *** Quits: victorporof (victorporo@FBDAE982.F9BD9D78.9B1E38F4.IP) (Ping timeout)
[01:27:52] <strcat> that's always a bad sign, nothing broke
[01:28:03] <cmr> heh
[01:29:20] * strcat doesn't really understand why there's an "intrinsic" ABI
[01:29:28] <strcat> but... it's just the regular Rust ABI
[01:30:14] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[01:31:42] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[01:31:57] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[01:32:17] *** Quits: jstevans (Instantbir@7FBF0EEA.75B49943.DDE5D3F6.IP) (Ping timeout)
[01:32:44] *** Joins: jstevans (Instantbir@7FBF0EEA.75B49943.DDE5D3F6.IP)
[01:33:54] <strcat> pcwalton: https://github.com/mozilla/rust/pull/9109 r? I think it should work now
[01:35:08] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[01:35:55] *** Joins: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP)
[01:36:10] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[01:36:10] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 140d9010b to 14a9ac272: 02http://git.io/N3iJvQ
[01:36:10] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[01:36:11] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[01:36:11] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Hj8hjQ
[01:36:11] <ghrust> 13rust/06auto 14ad43613 15Tim Chevalier: rustpkg: Pass command-line arguments to rustc...
[01:36:11] <ghrust> 13rust/06auto 14264474f 15bors: auto merge of #9107 : catamorphism/rust/rustpkg-command-line-flags, r=brson...
[01:36:12] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[01:37:11] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[01:39:39] *** Quits: azakai_ (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:41:43] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[01:42:30] <strcat> cross-crate issues are always the most fun...
[01:52:03] *** Quits: mihneadb (Mihnea@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: Leaving)
[01:55:13] *** Quits: optimusbrine (optimusbri@moz-CF697891.tampfl.fios.verizon.net) (Ping timeout)
[01:55:50] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:57:30] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:58:11] *** Joins: optimusbrine (optimusbri@moz-CF697891.tampfl.fios.verizon.net)
[01:58:28] *** Joins: tjc (tjc@moz-605588F2.tmodns.net)
[01:58:28] *** ChanServ sets mode: +o tjc
[01:58:30] <dwrensha> Hey, can someone confirm a bug I just ran into?
[01:58:32] <dwrensha> https://gist.github.com/dwrensha/ae7fc72c0206b23d2af2
[01:58:48] *** Joins: fabiand_ (fabiand@moz-4E21CCD7.adsl.alicedsl.de)
[01:58:59] *** Joins: ChemicalHarm (Mibbit@moz-3A96C5DD.static.cosmoweb.net)
[01:59:22] *** Quits: fabiand (fabiand@moz-964DA28E.adsl.alicedsl.de) (Ping timeout)
[01:59:36] <erickt1> dwrensha: I can confirm that ICEs are definitely bugs :)
[01:59:42] <cmr> dwrensha: builds for me
[01:59:46] <dwrensha> I'm on a9ac27270f9ce20aaf6424f6de5128351c70659e
[01:59:48] <dwrensha> the latest
[01:59:54] <cmr> /usr/bin/rustc 0.8-pre (54ae280 2013-09-09 13:01:02 -0700)
[01:59:57] *** Quits: msingle (Thunderbir@moz-20675462.nrflva.fios.verizon.net) (Ping timeout)
[02:00:17] <erickt1> dwrensha: jclements recently changed some stuff with macros, maybe he broke/fixed it
[02:00:18] <cmr> Is yours post-hygiene and mine pre-hygiene?
[02:00:49] <dwrensha> Mine is definitely after two jbclements commits
[02:02:09] <strcat> rusti: true | false
[02:02:10] -rusti- true
[02:02:15] <strcat> hrm
[02:02:24] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[02:04:06] <dwrensha> I will file this as an issue
[02:04:13] *** Quits: jstevans (Instantbir@7FBF0EEA.75B49943.DDE5D3F6.IP) (Connection reset by peer)
[02:04:13] *** Joins: jstevans1 (Instantbir@7FBF0EEA.75B49943.DDE5D3F6.IP)
[02:04:16] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[02:04:51] <strcat> rusti: () ^ ()
[02:04:52] -rusti- <anon>:5:9: 5:16 error: binary operation ^ cannot be applied to type `()`
[02:04:52] -rusti- <anon>:5          () ^ ()
[02:04:52] -rusti-                   ^~~~~~~
[02:04:52] -rusti- error: aborting due to previous error
[02:04:52] -rusti- application terminated with error code 101
[02:04:57] *** Quits: jdm (jdm@moz-BBE3ABD.mv.mozilla.com) (Quit: Lost terminal)
[02:05:02] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[02:05:05] *** Quits: lbergstrom (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[02:06:08] *** Quits: tjc (tjc@moz-605588F2.tmodns.net) (Ping timeout)
[02:07:34] <strcat> rusti: (1,) ^ (1,)
[02:07:35] -rusti- <anon>:5:9: 5:20 error: binary operation ^ cannot be applied to type `(<VI0>)`
[02:07:35] -rusti- <anon>:5          (1,) ^ (1,)
[02:07:35] -rusti-                   ^~~~~~~~~~~
[02:07:35] -rusti- error: aborting due to previous error
[02:07:35] -rusti- application terminated with error code 101
[02:09:45] <ww> question: is dns lookup on hostname supported in pre-0.8?
[02:09:54] <cmr> landed last week
[02:09:57] <erickt1> hrm, should a `trait ToOption { fn to_option(self) -> Option<T>; }` take a `self` or `&self`?
[02:09:58] *** Joins: tjc (tjc@260B711F.424CA39E.284344F5.IP)
[02:09:58] *** ChanServ sets mode: +o tjc
[02:10:07] *** Quits: clements (clements@moz-BEE8D50A.dsl.snlo01.pacbell.net) (Quit: Lost terminal)
[02:10:10] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[02:10:14] <cmr> erickt1: to_option takes a self, iirc.
[02:10:20] <cmr> check the other to_foo methods
[02:10:23] *** Quits: jstevans1 (Instantbir@7FBF0EEA.75B49943.DDE5D3F6.IP) (Ping timeout)
[02:10:27] <ww> or i have to use SocketAddr { ip: Ipv4Addr(127, 0, 0, 1), port: 80 } for now
[02:10:30] <cmr> ww: https://github.com/mozilla/rust/pull/9000
[02:10:52] <ww> ok thanks
[02:10:57] <cmr> https://github.com/brson/rust/commit/0948f54e65227a95d386e429f4e1356d7dd3fba7#L1R25 being the relevant function
[02:10:59] <sfackler> I though "into_" was the prefix for conversion methods that consume self?
[02:11:09] <strcat> tjc: : did structural records used to magically have operators defined?
[02:11:11] <cmr> sfackler: oh, you're right
[02:11:24] <erickt1> cmr:	RawPtr::to_option is `fn(&self) -> Option<&T>` though 
[02:11:24] <sfackler> "to_" copies and "as_" borrows
[02:11:32] *** Quits: optimusbrine (optimusbri@moz-CF697891.tampfl.fios.verizon.net) (Ping timeout)
[02:11:39] *** Quits: tjc (tjc@260B711F.424CA39E.284344F5.IP) (Ping timeout)
[02:11:48] <erickt1> ah right, into_
[02:13:13] * strcat is going on a time travel git blame journey for this line
[02:13:22] <strcat> good old structural records and `export`
[02:13:27] <strcat> and modes!
[02:13:30] <strcat> ;p
[02:13:38] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[02:14:28] <erickt1> hrm, RawPtr::to_option is unsafe.
[02:14:32] *** Quits: dddd (chris@moz-B7BAB130.dynamic.tstt.net.tt) (Quit: Ex-Chat)
[02:14:39] <strcat> erickt1: because it can still be dangling
[02:14:43] <erickt1> yeah
[02:14:53] *** Joins: optimusbrine (optimusbri@moz-CF697891.tampfl.fios.verizon.net)
[02:15:11] <erickt1> I suppose it wouldn't make sense for RawPtr to impl my new ToOption traits then
[02:15:17] <strcat> now pre-librustc
[02:15:26] <strcat> I will find out why this line exists...
[02:15:52] *** Joins: tjc (tjc@260B711F.424CA39E.284344F5.IP)
[02:15:52] *** ChanServ sets mode: +o tjc
[02:16:12] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[02:16:12] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14264474f to 14a9ac272: 02http://git.io/N3iJvQ
[02:16:12] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[02:16:14] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[02:16:14] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/le9abw
[02:16:14] <ghrust> 13rust/06auto 14a8d599d 15Daniel Micay: fix handling of function attributes...
[02:16:14] <ghrust> 13rust/06auto 14bc43356 15Daniel Micay: add sret + noalias to the out pointer parameter...
[02:16:14] <ghrust> 13rust/06auto 145c45547 15bors: auto merge of #9109 : thestinger/rust/function, r=pcwalton
[02:16:16] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[02:16:27] <strcat> pre-vectors :s
[02:18:02] <cmr> what line where?
[02:18:05] <cmr> this sounds scary.
[02:18:26] <strcat> trying to figure out why tuples/enums are binopable according to that weird table
[02:18:51] *** Quits: zz_kimundi (kimundi@moz-84DC311F.dip0.t-ipconnect.de) (Ping timeout)
[02:18:57] <strcat> cmr: https://github.com/mozilla/rust/blob/master/src/librustc/middle/ty.rs#L4330
[02:19:07] <strcat> and the line actually putting things in tycat_struct
[02:19:10] <erickt1> would anyone complain if I move ToStr into str.rs?
[02:19:31] <engla> erickt1: the compiler will complain, you'll need to fix deriving
[02:19:35] <strcat> erickt1: fine with me, but I want that trait to die and become a default method on the format trait
[02:19:39] <engla> erickt1: and we need to redesign ToStr
[02:19:53] <strcat> cmr: http://ix.io/7Y1 the table in ye olden days
[02:19:58] <strcat> got super messed up at some point
[02:20:03] <erickt1> strcat: ooh, hrm, I haven't explored the format trait
[02:20:11] <strcat> erickt1: the one used for this
[02:20:15] <strcat> rusti: format!("{}", 5)
[02:20:16] -rusti- ~"5"
[02:20:19] <strcat> it's separate from repr
[02:20:22] <strcat> rusti: format!("{}", 5u)
[02:20:22] -rusti- ~"5"
[02:20:29] <strcat> rusti: format!("{:?}", 5u) /* this is repr */
[02:20:30] -rusti- ~"5u"
[02:20:36] *** Joins: newfprag (brandon@moz-C7AC35F5.mh.shawcable.net)
[02:20:44] *** newfprag is now known as brandon-m-skinner
[02:20:55] <tiffany> how old is rust?
[02:21:05] <strcat> erickt1: it writes out to a writer, so ideally it could be taught about something like a size hint and we could have to_owned_bytes, to_owned_str as default methods
[02:21:06] <tiffany> I discovered it around version 0.3 or so
[02:21:17] <strcat> 0.1 is from something like 2010
[02:21:23] <strcat> but it existed before then
[02:21:31] <strcat> just not publicly I guess
[02:21:34] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[02:21:50] <erickt1> strcat: I think it was in monotone for a while. Dunno if it was public
[02:21:58] <strcat> erickt1: and then in hg, I think
[02:22:07] *** Joins: zz_kimundi (kimundi@moz-232C47CC.dip0.t-ipconnect.de)
[02:22:25] *** zz_kimundi is now known as kimundi
[02:22:44] <strcat> wow, so now I know why that ty thing is called sty
[02:22:52] <strcat> it called to be called struct, before struct was a keyword
[02:23:05] <strcat>         alt get(ty).struct {
[02:23:08] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Quit: Lost terminal)
[02:23:15] <erickt1> strcat: I suppose I'll leave ToStr alone
[02:24:09] <strcat> wow rust was weird back then
[02:24:44] * strcat has learned nothing so far :(
[02:25:25] <engla> erickt1: given that str.rs is near 4000 lines maybe we can find ways to split it up instead
[02:25:29] *** Quits: photex (photex@399640B9.24E301D6.9510F13D.IP) (Ping timeout)
[02:25:32] *** Joins: victorporof (victorporo@FBDAE982.F9BD9D78.9B1E38F4.IP)
[02:25:43] *** Quits: optimusbrine (optimusbri@moz-CF697891.tampfl.fios.verizon.net) (Ping timeout)
[02:26:03] <lkuper> strcat: 0.1 was January 2012
[02:26:14] <strcat> lkuper: heh, nevermind then :)
[02:26:19] *** Joins: photex (photex@399640B9.24E301D6.9510F13D.IP)
[02:26:33] <lkuper> but the project was around for a long time before there was a 0.1
[02:26:38] *** Joins: Don (Mibbit@moz-E6ED1DEA.dsl.bell.ca)
[02:26:41] <strcat> 2010 would be when it switched to git I guess. although graydon told me there were earlier repos
[02:26:47] *** Joins: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[02:27:10] <strcat>     Fail typechecking for bad binop/type combinations
[02:27:13] <cmr> hah
[02:27:14] <strcat> cfaa0f4b91b27abfb3b4fba4d0bb31a5e3da7c89
[02:27:17] <cmr> I had no idea about sty
[02:27:19] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[02:27:21] <strcat> the origin of this stuff
[02:27:33] *** Quits: victorporof (victorporo@FBDAE982.F9BD9D78.9B1E38F4.IP) (Ping timeout)
[02:28:02] <strcat> http://ix.io/7Y2 *shrug*
[02:28:24] <strcat> so I learned nothing
[02:28:29] <strcat> I'll just delete it ;p
[02:28:31] <lkuper> good ol' `alt`
[02:28:50] *** Joins: jstevans (Instantbir@moz-AF7F7BD6.bootp.virginia.edu)
[02:28:54] <strcat>                 [f, f, f, f, t, t, f, f]];/*struct*/
[02:29:02] <strcat> I wonder why struct-like things ever had binops
[02:29:18] <strcat> originally just equality and ordering though....
[02:29:24] *** Joins: msingle (Thunderbir@moz-20675462.nrflva.fios.verizon.net)
[02:29:26] <strcat> at some point they were accidentally given &&, ||, etc.
[02:29:35] <strcat> and then at some point someone added a workaround elsewhere to forbid it
[02:29:43] <strcat> oh
[02:29:52] <strcat> it happened when the table got totally messed up in a reformatting one
[02:29:56] <strcat> and then the rows got confused
[02:30:00] *** Quits: tjc (tjc@260B711F.424CA39E.284344F5.IP) (Quit: zzzzzzzzzz)
[02:30:33] * strcat is done commit archaeology for now
[02:30:42] <cmr> Who is Eric Reed on irc?
[02:30:45] <cmr> ecr?
[02:30:56] <erickt1> engla: we could move it under libstd/str/
[02:31:07] <strcat> cmr: probably
[02:31:18] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[02:31:21] <tikue> does make -j{n} work with rust
[02:31:32] <cmr> tikue: yes
[02:31:37] <tikue> ah wish i'd known :P
[02:31:39] <cmr> but it doesn't do what as much as you want
[02:31:44] <strcat> aha
[02:31:45] <lkuper> tikue: it doesn't help much
[02:31:47] <strcat> the table is ordered wrong
[02:31:48] <tikue> oh
[02:31:50] <erickt1> tikue: it helps compiling llvm, but not libstd/libextra/etc
[02:31:59] <strcat> nmatsakis: I figured out why there's that weird struct line in that binop table :)
[02:31:59] <tikue> ok, well good to know :)
[02:32:11] <cmr> basically the only things parallel are the c++ and the tool libraries (librustpkg etc)
[02:32:21] <strcat> rusti: fn foo() -> ! { fail!() }
[02:32:22] -rusti- ()
[02:32:30] <strcat> rusti: fn foo() -> ! { fail!() } foo() && foo()
[02:32:32] -rusti- pastebinned 11 lines of output: http://ix.io/7Y3
[02:32:45] <strcat> rusti: fn foo() -> ! { fail!() } fn bar() { foo() && foo() }
[02:32:46] -rusti- ()
[02:32:49] <strcat> rusti: fn foo() -> ! { fail!() } fn bar() { foo() ^ foo() }
[02:32:50] -rusti- ()
[02:32:57] <tikue> >_>
[02:32:59] <strcat> but < won't work
[02:33:01] <strcat> rusti: fn foo() -> ! { fail!() } fn bar() { foo() < foo() }
[02:33:07] -rusti- pastebinned 181 lines of output: http://ix.io/7Y4
[02:33:11] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[02:33:21] <strcat> that could be the best error I've ever seen
[02:33:31] <strcat> every single < impl is a candidate ;p
[02:33:45] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[02:33:48] <cmr> ah
[02:33:49] *** Joins: Will_Z (Mibbit@711830E5.2E735A23.DDE5D3F6.IP)
[02:33:51] <cmr> *hah
[02:33:56] <Don> Hey, I'm new to Rust and I'm having issues compiling the latest version. Any tips would be greatly appreciated! ----- make: *** [x86_64-unknown-linux-gnu/stage0/lib/rustc/x86_64-unknown-linux-gnu/lib/libstd.so] Error 137
[02:33:58] <tikue> there should be a limit
[02:34:01] <cmr> What's up with the names, too.
[02:34:12] *** Quits: msingle (Thunderbir@moz-20675462.nrflva.fios.verizon.net) (Quit: msingle)
[02:34:18] <cmr> Don: try `make` again, and paste the whole log.
[02:34:22] <strcat> aw
[02:34:24] <strcat> that failed again.
[02:34:31] <strcat> I don't know what I did wrong ;[
[02:34:32] <engla> the pretty printing of trait methods is better now
[02:34:38] <engla> that's nice
[02:34:43] <Don> Running it again
[02:34:44] <Will_Z> Hi, can someone tell me how to convert a string to vector(u8)?  Thanks a lot!
[02:34:58] <strcat> rusti: "foo".as_bytes()
[02:34:59] -rusti- &[102u8, 111u8, 111u8]
[02:35:06] <strcat> rusti: (~"foo").to_bytes()
[02:35:06] -rusti- <anon>:5:9: 6:5 error: type `~str` does not implement any method in scope named `to_bytes`
[02:35:06] -rusti- <anon>:5          (~"foo").to_bytes()
[02:35:06] -rusti- <anon>:6     };
[02:35:06] -rusti- error: aborting due to previous error
[02:35:06] -rusti- application terminated with error code 101
[02:35:10] <strcat> something bytes
[02:35:11] <sfackler> or ~"foo".into_bytes()
[02:35:17] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[02:35:26] <sfackler> rusti: (~"foo").into_bytes()
[02:35:27] -rusti- ~[102u8, 111u8, 111u8]
[02:35:40] <Don> http://pastebin.com/UzBRRbLW make log
[02:35:57] <cmr> Don: how much memory do you have available?
[02:36:44] <Will_Z> which module is into_bytes() in?
[02:37:09] <sfackler> std::vec
[02:37:10] <cmr> Will_Z: libstd
[02:37:11] <Don> cmr, you're right, that'S the problem
[02:37:13] <cmr> oh, module.
[02:37:31] <sfackler> it's part of OwnedVector iirc
[02:37:43] <Don> Thanks a ton for your help
[02:38:15] <cmr> Don: building rustc requires ~2GiB total
[02:38:28] <Will_Z> I couldn't find it in std::vec
[02:38:31] <cmr> dedicated
[02:38:35] <strcat> cmr: https://github.com/mozilla/rust/pull/9111 r?
[02:38:45] <Don> Yeah, I saw that in the docs and forgot that I only have 1Gb available
[02:41:16] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[02:41:16] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 145c45547 to 14a9ac272: 02http://git.io/N3iJvQ
[02:41:16] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[02:41:22] <strcat> hm
[02:41:36] *** Quits: Don (Mibbit@moz-E6ED1DEA.dsl.bell.ca) (Quit: http://www.mibbit.com ajax IRC Client)
[02:41:50] <strcat> cross-crate calls do work now...
[02:42:01] <strcat> declare void @_ZN3foo16hd120715420f36174v0.0E({ i64*, i64 }* noalias sret, { i64, %tydesc*, i8*, i8*, i8 }*, i64* noalias)
[02:42:11] * strcat wonders what could possibly still be broken
[02:45:30] <Amaranth> wow that's a crazy function name
[02:45:37] <erickt1> engla: what do you think about Option.to_result using () as the error? As in `Option::to_result() -> Result<T, ()>`
[02:45:51] <cmr> Yeah what is upwith all the garbage before the version?
[02:45:54] <cmr> hash?
[02:46:02] <strcat> crate hash?
[02:46:41] <lkuper> that looks like a mangled name
[02:47:01] <cmr> well it is mangled, but there's a lot there besides just the name.
[02:47:09] <Amaranth> Sure it's a mangled name but I can't understand the mangling
[02:47:45] <lkuper> in the technical sense of mangling
[02:47:57] <cmr> name:hash:version, afaik
[02:48:12] <cmr> I think it's a hash of the type signature, though, not the crate.
[02:48:14] <cmr> not sure.
[02:48:27] <strcat> it's the crate hash
[02:48:45] <engla> erickt1: you'd always want to put an error in there, but do you think this is the most flexible way then?
[02:48:55] <engla> erickt1: a more specific one than () I mean
[02:49:08] <strcat> declare void @_ZN3foo16hd120715420f36174v0.0E({ i64*, i64 }* noalias sret, { i64, %tydesc*, i8*, i8*, i8 }*, i64* noalias)
[02:49:09] <strcat> declare void @_ZN3bar16hd120715420f36174v0.0E({ i64*, i64 }* noalias sret, { i64, %tydesc*, i8*, i8*, i8 }*, i64* noalias)
[02:49:11] <strcat> 2 of them
[02:49:13] <cmr> ok
[02:49:21] <erickt1> engla: the main reason why I was thinking this is so I could add a `ToResult` trait that Option implements
[02:49:38] <strcat> cmr: let me change the type in one...
[02:49:44] <erickt1> engla: if I did that, then I can't pass in a closure to make the error value
[02:49:56] <strcat> cmr: oh, I think it's a combination of the type signature + crate
[02:50:10] <strcat> anyway back to figuring out why this segfaults
[02:52:16] <erickt1> engla: if you want to replace the error, you could do "None.to_result().map_err(|_| ~"bad!")`
[02:52:48] *** Joins: optimusbrine (optimusbri@moz-CF697891.tampfl.fios.verizon.net)
[02:53:08] *** Quits: fyolnish (fyolnish@moz-A51F01DB.uqwimax.jp) (Client exited)
[02:53:35] <strcat> hm
[02:53:47] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 23.0.1/20130814063812])
[02:54:01] <engla> probably map_err_move
[02:54:20] <engla> erickt1: I don't know if to result is a great trait :)
[02:55:06] *** Quits: optimusbrine (optimusbri@moz-CF697891.tampfl.fios.verizon.net) (Quit: wifi getting crappy)
[02:56:13] <erickt1> engla: why not? It could be useful to help standardize converting from a complex error type to Result/Option/Either
[02:56:24] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[02:56:52] <ww> question: is there a way to describe vector length constraint in a type declaration?  e.g.  to_array_of_4_u16(s : &str) -> [u16 with len==4], to force returning of [u16] with len of 4
[02:57:02] <engla> ok it's not crazy
[02:57:05] <engla> erickt1: 
[02:57:16] <cmr> ww: not with slices or vectors, but wehave fixed-length vectors for that
[02:57:22] <cmr> [u16, ..4]
[02:57:26] <cmr> is the type
[02:57:29] *** Quits: Will_Z (Mibbit@711830E5.2E735A23.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:57:38] <ww> excellent. thx!
[02:58:26] <cmr> Note that every length is a different type, and it's currently impossible to genericize an implementation over lengths, so you won't have any trait impls of it.
[02:58:31] <cmr> *for it
[02:59:08] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[02:59:09] *** Quits: jstevans (Instantbir@moz-AF7F7BD6.bootp.virginia.edu) (Ping timeout)
[02:59:17] <sfackler> doesn't they borrow to slices?
[02:59:24] <sfackler> *don't
[03:00:36] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[03:00:45] <cmr> yes, but that's trait implementations for the slice, not the fixed-length vector.
[03:03:12] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[03:05:41] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[03:08:58] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[03:09:52] *** Quits: KindOne (KindOne@moz-C99012F.dynamic.ip.windstream.net) (Ping timeout)
[03:12:31] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[03:12:41] *** Parts: jdsanders (Adium@moz-8527430D.hlrn.qwest.net) ()
[03:14:14] *** Joins: KindOne (KindOne@moz-4A7B61AE.dynamic.ip.windstream.net)
[03:15:39] *** Quits: MiguelD (MiguelD@A8F74449.90C84433.1F1B246B.IP) (Quit: KVIrc 4.1.3 Equilibrium http://www.kvirc.net/)
[03:16:13] *** Joins: lex (lex@moz-12347B81.bootp.virginia.edu)
[03:17:02] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[03:20:15] <strcat> acrichto: ping
[03:20:20] <acrichto> strcat: pong
[03:20:58] <strcat> acrichto: do you remember the target needed to cross-compile in the same way as the buildbots?
[03:21:03] <strcat> the snapshot ones
[03:21:26] *** Joins: zws3mb (Mibbit@moz-FB2947AF.hsd1.va.comcast.net)
[03:21:28] <acrichto> to generate the valgrind errors?
[03:21:33] <strcat> yeah
[03:21:43] <acrichto> I think it was H-x86_64 and T-i686
[03:21:50] <acrichto> not sure if other configurations also blew up
[03:22:04] <acrichto> I've got a ubuntu VM with valgrind 3.7 chugging along attempting to test that right now
[03:22:13] <acrichto> my arch VM with valgrind 3.8 passed the tests last night
[03:22:20] <acrichto> although building takes forever :(
[03:22:37] *** Quits: ChemicalHarm (Mibbit@moz-3A96C5DD.static.cosmoweb.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:23:24] <sfackler> acrichto: thoughts? https://github.com/mozilla/rust/pull/9091#discussion_r6284278
[03:24:21] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[03:24:27] <strcat> touch: cannot touch â€˜/rustcâ€™: Permission denied
[03:24:29] <strcat> acrichto: :s
[03:24:38] <acrichto> strcat: :(
[03:24:40] <acrichto> sfackler: looking
[03:24:55] <strcat> what does it need other than ./configure --host-triples=i686-unknown-linux-gnu --build-triple=x86_64-unknown-linux-gnu
[03:24:57] <strcat> ?
[03:25:01] * strcat hasn't cross-compiled rust before
[03:25:50] <ww> is there a way to do pass-thru assert on a function result.  e.g.  let clean_result = call_func().asset(|x| is_ok(x), "asset failed");    where asset would check the result and return it if it's ok, but asset if not.
[03:25:50] <acrichto> strcat: look at the confiure logs of the snapshot bots
[03:25:55] <acrichto> that's where I get my configure lines from
[03:26:02] *** Joins: victorporof (victorporo@FBDAE982.F9BD9D78.9B1E38F4.IP)
[03:26:03] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[03:26:06] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[03:26:19] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[03:26:30] <acrichto> rusti: assert!(true)
[03:26:33] -rusti- ()
[03:26:46] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[03:26:50] <acrichto> ww: currently I don't think that's a thing
[03:27:02] *** Quits: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue)
[03:27:12] <ww> ok, may be a macro can be done for it?
[03:27:42] <acrichto> ww: certainly one can be made
[03:28:03] *** Quits: victorporof (victorporo@FBDAE982.F9BD9D78.9B1E38F4.IP) (Ping timeout)
[03:28:12] <ww> ok thx
[03:28:18] <acrichto> sfackler: were you gonna defer dox for later?
[03:28:27] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[03:29:02] <strcat> acrichto: well, cross-compiling just isn't working at all for me.
[03:29:04] <strcat> make fails early
[03:29:11] <acrichto> strcat: how so?
[03:29:28] <strcat> I configure, and then make fails as it tries to touch /rustc
[03:29:32] <strcat> because something about it is messed up
[03:29:36] <sfackler> acrichto: I have them written now
[03:29:50] <acrichto> sfackler: oh is it just not pushed?
[03:29:54] <sfackler> yeah
[03:29:56] <acrichto> strcat: that seems... weird
[03:30:06] <strcat> acrichto: http://ix.io/7Y6
[03:30:32] <acrichto> strcat: that's a clean master?
[03:30:36] <strcat> yes
[03:30:54] <strcat> let me try one more time
[03:31:24] <acrichto> strcat: how'd you configure?
[03:31:29] *** Quits: Larry (larryfox@moz-8D6C9B2A.nycmny.fios.verizon.net) (Quit: Textual IRC Client: www.textualapp.com)
[03:31:33] <strcat> ./configure --host-triples=i686-unknown-linux-gnu
[03:31:51] <acrichto> weird
[03:32:22] <acrichto> strcat: on osx I appeard to configure with --target-triples instead of --host-triples
[03:32:27] <acrichto> not sure how much of a difference that would make
[03:33:57] <acrichto> sfackler: I had one minor comment, but otherwise looks good tome
[03:33:59] *** Joins: lbergstrom (Adium@moz-7D905691.avante-wifi.mozilla.hq)
[03:34:02] *** Quits: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[03:34:16] <acrichto> sfackler: and yeah I think sometimes I try to impose go's naming conventions in the wrong places...
[03:34:47] <sfackler> yeah, good catch with that. I actualy restructured write to try to avoid double-writes on overflow when possible
[03:34:58] <engla> sfackler: you said the design of the Buffered* was weird, what's weird about it?
[03:35:21] <sfackler> engla: pub type BufferedStream<S> = BufferedReader<BufferedWriter<S>>;
[03:35:27] <sfackler> and having an impl of Writer on Reader
[03:35:42] *** Joins: dlawler (evenodder@moz-C2B9B64C.hsd1.ca.comcast.net)
[03:35:50] <sfackler> being forced to construct BufferedStreams via a free function instead of a method
[03:36:00] <acrichto> sfackler: actually for that, could BufferedStream be a struct?
[03:36:13] <acrichto> and that way you wouldn't need Writer for BufferedReader
[03:36:22] <acrichto> and you could have BufferedStream::new
[03:36:25] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[03:36:26] <engla> You'd still need that if you stack them
[03:36:26] *** Quits: lbergstrom (Adium@moz-7D905691.avante-wifi.mozilla.hq) (Connection reset by peer)
[03:36:32] <engla> stack as in nest
[03:36:33] *** Joins: lbergstrom (Adium@moz-7D905691.avante-wifi.mozilla.hq)
[03:36:47] <acrichto> engla: how so?
[03:36:58] *** Joins: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net)
[03:37:15] <sfackler> engla: you can manually construct the BufferedReader<BufferedWriter>> and avoid the weird impl
[03:37:16] <engla> ok, maybe not if you impl Reader/Writer on the BufferedStream struct
[03:37:32] <strcat> acrichto: host-triples definitely does not work
[03:37:57] <sfackler> i'll see how painful it is to switch over to a struct
[03:38:23] <sfackler> does anyone feel strongly about the default buffer size? I'm using 8k right now, but libuv recommends 64k to maximize throughput
[03:38:28] <strcat> anyway I really just need a 32-bit install to test on, I'll make a chroot
[03:38:32] <strcat> rust's makefile sucks
[03:38:37] <acrichto> strcat: it's like configure is picking up your host triple as the empty string
[03:38:44] <sfackler> but having a default bufferedstream cost 128k seems weird
[03:38:45] <acrichto> sfackler: where does libuv mention that?
[03:39:29] <sfackler> acrichto: https://groups.google.com/forum/#!topic/libuv/oQO1HJAIDdA
[03:39:36] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[03:39:47] <sfackler> apparently 64k allows libuv to drain the kernel's entire buffer every call or something
[03:41:21] <acrichto> sfackler: huh, interesting. I'd be hesitant to declare an opinion one way or another without anything concrete to back it up
[03:41:38] <acrichto> looks like that's advocating 64k for a good reason, and I'm not sure how common a BufferedStream is going to be
[03:41:41] *** Joins: Thad (chatzilla@moz-C35F90AE.tx.res.rr.com)
[03:41:57] <acrichto> I think we could go either way, it's easy to change regardless
[03:42:12] *** Joins: tzakyrie (tzakyrie@moz-57E04ADC.hsd1.va.comcast.net)
[03:42:23] <acrichto> strcat: out of curiosity, what were you fixing in 9109 ?
[03:42:30] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[03:42:33] *** dlawler is now known as evod
[03:42:56] <strcat> acrichto: it says in the commit msg ;p
[03:43:00] <strcat> acrichto: https://github.com/thestinger/rust/commit/a8d599daafb52031e0f63b897e3fc85048b0b4d3
[03:43:09] <acrichto> strcat: oh whoops, was just reading the pull
[03:43:18] *** Parts: tzakyrie (tzakyrie@moz-57E04ADC.hsd1.va.comcast.net) ()
[03:43:19] <strcat> acrichto: was an attempt at fixing it for https://github.com/thestinger/rust/commit/bc433567939df81ff16020826589355b2b98418d to work
[03:43:21] <strcat> but it failed
[03:43:23] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[03:43:37] <ChrisMorgan> acrichto: rust-http needs a BufferedStreamâ€”either that or the ability to split into both a reader and a writer.
[03:43:51] <ww> is it possible to "monkey-patch" the std::vec to add a function?  i want to do the following: [1, 2, 3].map(|x| foo).my_patch_check(|v| {asset(v); v}).fold(...)
[03:44:08] <acrichto> ChrisMorgan: I suppose that you'd be allocating one per connection, right?
[03:44:17] <ChrisMorgan> Correct
[03:44:19] <cmr> ww: implement your own trait containing my_patch_check for whatever map returns
[03:44:30] <cmr> "extension methods", I believe.
[03:44:38] <engla> ww: there is no monkey patching in Rust :-) but plenty of sound options. You should use iterators though instead of .map on a vector
[03:44:41] <acrichto> ChrisMorgan: huh, I suppose that "lightweight tasks" which actually had 128k of buffers behind each wouldn't be that lightweight
[03:44:51] <acrichto> assuming 1 task per connection
[03:45:07] *** Joins: StarLight (StarLight@moz-E5D48285.dynamic.avangarddsl.ru)
[03:45:09] <ww> cmr, ok, i'll check that out. thx
[03:45:12] <cmr> ChrisMorgan: re: rust-http; I asked around in #servo and I'm going to be improving extra::url to support http://url.spec.whatwg.org/
[03:45:27] <cmr> As well as what I personally need for rust-http to be useful for me.
[03:45:33] <ww> engla.  I want to asset on the vec.len, not going over each member
[03:45:39] <ChrisMorgan> I haven't tried measuring performance with adjusting the buffer size.
[03:45:52] <ChrisMorgan> cmr: :-)
[03:45:56] <ww> ^assert
[03:46:03] <cmr> But, it's my bedtime. I'll cc you in the PR.
[03:46:04] <strcat> acrichto: isn't it just each scheduler with those? or no
[03:46:09] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[03:46:09] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/UXM4uQ
[03:46:09] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[03:46:19] <zeuxcg> I'm trying to implement a wrapper around a DB with a cache, and failing to convince borrowck that I know what I'm doing (or maybe I don't know what I'm doing...)
[03:46:31] <acrichto> strcat: I dunno, I thought it was one scheduler per thrad
[03:46:36] <acrichto> os-thread*
[03:46:40] <zeuxcg> Here's the code that I want to write (DB replaced with HashMap for presentation purposes): http://pastebin.com/QShut01Y
[03:47:20] <acrichto> zeuxcg: that's an instance of https://github.com/mozilla/rust/issues/6393
[03:47:25] <strcat> zeuxcg: if you use find, you have an outstanding immutable borrow
[03:47:30] <ChrisMorgan> cmr: at present, the authority-parsing stuff is private; I need to parse an authority in the Request-URI also, so it being public would be good.
[03:47:42] <strcat> zeuxcg: need to hoist it out of the None path for now
[03:47:52] <strcat> it's not aware of match branches as being independent
[03:47:56] <zeuxcg> strcat: I tried rewriting the code by using an early return
[03:48:05] <zeuxcg> i.e. replace first arm in the first match with return
[03:48:09] <zeuxcg> and second arm with None
[03:48:22] <zeuxcg> but it did not help. What other techniques can I use?
[03:48:36] <zeuxcg> I can update the pastebin with the code if that was not clear
[03:48:37] <strcat> hoist your code out of the None branch
[03:48:41] <acrichto> zeuxcg: wait actually nvmd I think that's a legit bug
[03:48:41] <strcat> it won't work in there
[03:48:58] <acrichto> zeuxcg: oh wait nvmd again, I can red
[03:49:00] <acrichto> read*
[03:49:24] <zeuxcg> I tried this: http://pastebin.com/weensKWn
[03:49:33] <zeuxcg> the error is the same
[03:52:23] <Thad> QUESTION:  What or How do we fix https://github.com/mozilla/rust/issues/5878 ??  I get that same rustc.exe crash on Windows 7 when trying to compile with gcc 4.8.1 toolchain, here's right before the crash: http://pastebin.mozilla.org/3022098: 
[03:53:08] <engla> zeuxcg: what about something like  match self.db.find(&key).map_move(|x| (*x).clone()) 
[03:53:10] <zeuxcg> rustc may have a point though...
[03:53:19] <zeuxcg> read() followed by read() would not be safe
[03:53:48] <zeuxcg> engla: self.db is not the problem, I clone the value that I get from there
[03:53:52] <zeuxcg> engla: the problem is self.cache
[03:54:02] <zeuxcg> since I read and write from it in the same function
[03:54:10] <engla> ok duh me
[03:54:25] <acrichto> zeuxcg: the compiler disallows read followed by read for other reasons
[03:54:25] *** Quits: evod (evenodder@moz-C2B9B64C.hsd1.ca.comcast.net) (Quit: evod)
[03:55:09] <acrichto> zeuxcg: that actually looks like a valid definition to me (although I may be missing something)
[03:56:20] <engla> you should try strcat's suggestion
[03:56:22] *** Quits: Thad (chatzilla@moz-C35F90AE.tx.res.rr.com) (Quit: ChatZilla 0.9.90.1 [Firefox 24.0/20130905180733])
[03:59:14] <zeuxcg> engla: I think I did (http://pastebin.com/weensKWn) but it does not help
[03:59:25] <zeuxcg> or maybe I don't understand the suggestion :)
[03:59:43] <engla> you did
[04:02:49] <acrichto> zeuxcg: feel free to open an issue
[04:02:54] <acrichto> it's a nice minimized kase
[04:02:56] <acrichto> case8
[04:04:06] <zeuxcg> I guess I can switch to @-pointers as a workaround
[04:04:15] <zeuxcg> I'll file an issue
[04:04:45] *** Joins: maik (maik@moz-5C3B7002.dip0.t-ipconnect.de)
[04:05:06] <maik> has anyone written an .obj loader yet?
[04:06:00] <engla> zeuxcg: adding an if { } else  around it does work, but that's not nice
[04:06:19] <engla> if self.cache.contains_key() { } ...
[04:08:19] <zeuxcg> good point
[04:08:31] <zeuxcg> aargh, also can't use Option::chain
[04:10:17] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[04:11:14] <strcat> acrichto: just building in achroot
[04:11:16] <strcat> a chroot*
[04:11:18] <strcat> works much better ;p
[04:11:53] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:12:02] <acrichto> strcat: haha, well at least it works
[04:12:27] <strcat> the nice thing about a chroot is that there's no multilib stuff to worry about...
[04:12:36] <sfackler> acrichto: https://github.com/mozilla/rust/pull/9091 r?
[04:12:41] <strcat> cross-compiling always confuses me :(
[04:13:17] <acrichto> I still can't figure out if I like //! or not
[04:13:53] <acrichto> sfackler: aww you didn't write {Read {plural, =1{a byte} other{# bytes}}
[04:14:00] <acrichto> }
[04:14:06] <acrichto> (don't make that change)
[04:14:16] <sfackler> haha
[04:14:39] <acrichto> how to confuse everyone 101
[04:15:42] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Ping timeout)
[04:16:52] <maik> rust uses gyp now?
[04:17:02] <strcat> no
[04:17:04] <strcat> libuv does
[04:17:35] <maik> ah okay
[04:17:41] <acrichto> sfackler: are you sure that read/eof/write/flush aren't infinite loops?
[04:17:46] <acrichto> on BufferedStream
[04:17:56] <sfackler> yeah, I tested them out
[04:18:03] <acrichto> weird
[04:18:21] <sfackler> hnmm
[04:18:23] <sfackler> yeah
[04:18:53] <sfackler> I guess newtype struct autodref happens early?
[04:19:07] <acrichto> sfackler: you may also not need InternalBufferedWriter
[04:19:25] <acrichto> Writer for Buffered stream could look like self.inner.inner.xxx()
[04:19:29] <acrichto> or the other way around
[04:19:31] <sfackler> I used that to avoid exposing the implementation of Reader for BufferedWriter
[04:19:48] <acrichto> oh yeah you definitely don't want to do that
[04:20:16] <acrichto> but write/flush could use self.inner.inner
[04:20:25] <acrichto> while read uses self.inner
[04:20:32] <acrichto> or self
[04:20:46] <sfackler> oops, I am missing a Decorator impl for BufferedStream
[04:20:57] <acrichto> sfackler: ah good point
[04:21:01] <acrichto> also this looks really good to me
[04:26:32] *** Joins: victorporof (victorporo@FBDAE982.F9BD9D78.9B1E38F4.IP)
[04:27:05] <sfackler> acrichto: just pushed a decorator impl and a test to make sure that BufferedStream doesn't end up infinite looping on anything
[04:27:54] *** Joins: lbergstrom1 (Adium@moz-7D905691.avante-wifi.mozilla.hq)
[04:27:54] *** Quits: lbergstrom (Adium@moz-7D905691.avante-wifi.mozilla.hq) (Connection reset by peer)
[04:28:33] *** Quits: victorporof (victorporo@FBDAE982.F9BD9D78.9B1E38F4.IP) (Ping timeout)
[04:29:14] <acrichto> sfackler: could you see if InternalBufferedWriter can be removed?
[04:29:59] <sfackler> It definitely could, but then BufferedWriter would have a magical implementation of Reader if it's wrapping a Stream
[04:30:09] <sfackler> which is not (I think?) good
[04:30:36] <acrichto> sfackler: it should be possible without that
[04:30:51] *** Quits: brandon-m-skinner (brandon@moz-C7AC35F5.mh.shawcable.net) (Quit: Konversation terminated!)
[04:31:07] <acrichto> sfackler: it looks like if you just remove it it should work?
[04:31:10] <sfackler> it wouldn't be able to call any methods on the BufferedReader since BufferedWriter<S> wouldn't implement Reader
[04:31:38] <acrichto> sfackler: ooooh wait yeah nvmd
[04:33:26] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[04:36:08] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[04:36:08] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/XpImqw
[04:36:08] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[04:36:08] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[04:36:09] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/6bZyxQ
[04:36:09] <ghrust> 13rust/06auto 1471f0305 15Steven Fackler: Buffered I/O wrappers...
[04:36:09] <ghrust> 13rust/06auto 14ba9fa89 15bors: auto merge of #9091 : sfackler/rust/buffered, r=alexcrichton...
[04:36:09] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[04:37:22] <maik> rusti, let s = ~"Hello hello"; s.split(' ')
[04:37:24] <sfackler> empty bors queues are great
[04:37:27] <maik> rusti: let s = ~"Hello hello"; s.split(' ')
[04:37:28] -rusti- <anon>:5:33: 6:5 error: type `~str` does not implement any method in scope named `split`
[04:37:28] -rusti- <anon>:5          let s = ~"Hello hello"; s.split(' ')
[04:37:28] -rusti- <anon>:6     };
[04:37:28] -rusti- error: aborting due to previous error
[04:37:28] -rusti- application terminated with error code 101
[04:37:52] *** Quits: ab (alex@BC9D99CC.37C1012D.FE617B51.IP) (Ping timeout)
[04:38:21] <engla> maik: there is split_iter
[04:39:44] <ww> question: is there a way to trim the trailing 0's from the result of str::from_utf8([u8])?  assuming [u8] is fixed length and containing whole bunch trailing 0's
[04:39:55] <maik> rusti: let s = ~"Hello hello"; s.split_iter(' ')
[04:40:02] -rusti- pastebinned 16 lines of output: http://ix.io/7Y8
[04:40:07] <glyc> open Q: has anyone started a web _server_ in rust?
[04:41:00] <strcat> glyc: https://github.com/chris-morgan/rust-http
[04:41:13] *** Quits: sammykim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:41:39] <maik> rusti: let s = ~"Hello hello"; let r = s.split_iter(' ');
[04:41:41] -rusti- <anon>:5:37: 5:38 warning: unused variable: `r` [-W unused-variable (default)]
[04:41:41] -rusti- <anon>:5          let s = ~"Hello hello"; let r = s.split_iter(' ');
[04:41:42] -rusti-                                               ^
[04:41:42] -rusti- ()
[04:42:08] <maik> rusti: let s = ~"Hello hello"; let r = s.split_iter(' '); for x in r { println(x);}
[04:42:08] -rusti- <anon>:5:60: 6:5 error: cannot borrow immutable local variable as mutable
[04:42:08] -rusti- <anon>:5          let s = ~"Hello hello"; let r = s.split_iter(' '); for x in r { println(x);}
[04:42:09] -rusti- <anon>:6     };
[04:42:09] -rusti- error: aborting due to previous error
[04:42:09] -rusti- application terminated with error code 101
[04:43:16] <ww> glyc: i think i've seen couple "http" projects, serving simple files.  not sure how serious they are.
[04:43:31] <maik> rusti: let s = ~"Hello hello"; for x in s.split_iter(' ') { println(x);}
[04:43:33] -rusti- Hello
[04:43:33] -rusti- hello
[04:43:33] -rusti- ()
[04:43:40] <maik> engla, thanks
[04:44:56] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[04:45:18] <engla> rusti: let s = "Hello hello"; s.rsplitn_iter('e', 1).to_owned_vec()
[04:45:19] -rusti- ~["llo", "Hello h"]
[04:45:29] <engla> you can also split reverse or split just a number of times
[04:45:30] <sfackler> welp, turns out TcpStream.flush fails
[04:45:32] <sfackler> r? https://github.com/mozilla/rust/pull/9114
[04:46:43] <engla> it must be left from when it was stubbed out
[04:47:08] <acrichto> sfackler: are you sure it doesn't need a flush?
[04:48:47] <sfackler> looks like: http://nikhilm.github.io/uvbook/filesystem.html#buffers-and-streams
[04:49:49] *** Joins: lbergstrom (Adium@moz-7D905691.avante-wifi.mozilla.hq)
[04:49:49] *** Quits: lbergstrom1 (Adium@moz-7D905691.avante-wifi.mozilla.hq) (Connection reset by peer)
[04:51:07] *** Joins: jstevans (Instantbir@moz-EDC0D7D4.bootp.virginia.edu)
[04:52:07] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[04:54:23] <strcat> (gdb) bt
[04:54:26] <strcat> #0  0x00000000 in ?? ()
[04:54:27] <strcat> #1  0x00000000 in ?? ()
[04:54:29] <strcat> :[
[04:55:20] *** Joins: jdm (jdm@moz-2C5514D1.lightspeed.sntcca.sbcglobal.net)
[04:55:20] *** ChanServ sets mode: +o jdm
[04:58:41] *** Joins: aeqwa (aeqwa@moz-8BDCE0DD.dsl.tropolys.de)
[05:02:18] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[05:02:36] *** Quits: ww (Mibbit@moz-9D1D3E.public.wayport.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:04:58] *** Quits: lbergstrom (Adium@moz-7D905691.avante-wifi.mozilla.hq) (Quit: Leaving.)
[05:07:53] *** Joins: adu (alt@moz-BF2B1AE4.washdc.fios.verizon.net)
[05:10:15] *** Quits: adu (alt@moz-BF2B1AE4.washdc.fios.verizon.net) (Quit: adu)
[05:10:46] *** Joins: adu (alt@moz-BF2B1AE4.washdc.fios.verizon.net)
[05:13:58] <adu> hi
[05:15:44] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[05:16:42] *** Quits: maik (maik@moz-5C3B7002.dip0.t-ipconnect.de) (Client exited)
[05:19:47] <adu> I think I've almost convinced my boss to use Go
[05:20:48] *** Quits: jstevans (Instantbir@moz-EDC0D7D4.bootp.virginia.edu) (Ping timeout)
[05:21:23] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[05:21:55] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:21:58] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:23:00] *** Joins: Shaladdle (anonymous@moz-424BC304.hsd1.pa.comcast.net)
[05:23:35] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[05:25:46] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[05:26:47] *** Quits: Shaladdle (anonymous@moz-424BC304.hsd1.pa.comcast.net) (Quit: Shaladdle)
[05:27:00] *** Joins: victorporof (victorporo@FBDAE982.F9BD9D78.9B1E38F4.IP)
[05:27:28] <Infiltrator> adu: You may be on the incorrect channel...
[05:27:54] <adu> Infiltrator: I am, sorry about that
[05:28:18] <glyc> lol
[05:28:27] <Infiltrator> adu: I also think that most of the folks in here would be unhappy about your previous message.  :P
[05:29:03] *** Quits: victorporof (victorporo@FBDAE982.F9BD9D78.9B1E38F4.IP) (Ping timeout)
[05:29:11] <adu> if you read my blog you might think otherwise
[05:29:24] <adu> my last few posts are all about Rust
[05:29:49] <glyc> btw noticed there was a search for better terminology than 'unwrap'... these came to mind: cede, relinquish, surrender, lend, lease, open
[05:30:24] <adu> I like open
[05:30:51] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Quit: Leaving)
[05:30:57] <acrichto> option.cede!
[05:30:58] <adu> but that's kind of a loaded term with computers
[05:31:02] <engla> hehe glyc why not .take_your_hands_off()
[05:31:12] <glyc> engla: ha!
[05:31:12] <engla> relinquish is fun
[05:31:31] *** Quits: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP) (Ping timeout)
[05:31:35] <adu> relinquish sounds like evil henchman-speak
[05:31:37] *** Joins: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP)
[05:31:42] <glyc> engla: and it has a nice unique shortened version: relinq
[05:32:06] <glyc> although that does seem a bit to close to linq
[05:32:24] <adu> glyc: I think you just invented a unix 4.0 command
[05:32:48] <adu> or 5.0
[05:33:03] <glyc> acrichto: cede is nice and short, and (maybe?) conveys the right invent...
[05:33:26] <adu> 1.0=unix, 2.0=plan9, 3.0=inferno, 4.0=golang
[05:33:26] <acrichto> maybe_secede_from_the_union!()
[05:33:30] <glyc> acrichto: I have to admit I didn't follow the minutes discussion about 'sometimes moves'... ?
[05:33:31] <adu> so unix 5.0
[05:34:20] <engla> glyc: it's better to say that moves sometimes leave their source unconsumed
[05:34:37] <acrichto> in the case of implicitly copyable values
[05:34:39] <engla> it's pervasive, it appears in a lot more places than unrwap
[05:34:45] <glyc> engla: ah, I see.
[05:34:57] <acrichto> rusti: let a = Some(1); a.unwrap(); a.unwrap()
[05:34:58] -rusti- 1
[05:35:03] <strcat> if the type doesn't have a destructor and doesn't contain &mut
[05:35:07] *** Joins: lbergstrom (Adium@moz-7D905691.avante-wifi.mozilla.hq)
[05:35:09] <strcat> or &fn
[05:35:18] <engla> a vec iterator is implicitly copyable.. for example
[05:35:22] <adu> Infiltrator: also, perhaps they don't realize that Go is the gateway drug to Rust
[05:35:26] <engla> it's quite useful
[05:36:04] <strcat> acrichto: really can't figure out this 32-bit issue.
[05:36:04] <glyc> engla: if a move leaves the source unconsumed, then isn't it shared, or @ ?
[05:36:13] <strcat> no
[05:36:17] <acrichto> strcat: is this the sret pull?
[05:36:19] <strcat> acrichto: yes
[05:36:30] <acrichto> is it just a segfault?
[05:36:32] <strcat> glyc: types without destructors/&fn/&mut are implicitly copyable
[05:36:35] <engla> glyc: it's like  < acrichto> in the case of implicitly copyable values
[05:36:42] <strcat> acrichto: it immediately segfaults and the call stack is all screwed up
[05:36:53] <strcat> acrichto: I don't think it even gets to rust_main
[05:37:03] <adu> I am a perfect example that people who use Go get addicted to Rust
[05:37:13] <acrichto> strcat: does it fail on osx 32 bit as well?
[05:37:20] <strcat> acrichto: don't know
[05:37:28] <strcat> no way to check
[05:37:44] <acrichto> the stage1 compiler is built, right?
[05:37:50] <glyc> strcat: when we say 'copyable' are we talking deep-copy-by-value ?
[05:37:58] <acrichto> and then all executables from it die instantly?
[05:38:22] <strcat> glyc: there's only 1 type of copy in rust at a language level
[05:38:31] <glyc> k
[05:38:35] <adu> because people who use Go inevitably want generics, which Go doesn't have but Rust does, which drives the Exodus from Go to Rust 
[05:38:44] <glyc> I assume its deep, yes
[05:38:50] <strcat> a shallow copy
[05:38:54] <glyc> ah
[05:39:00] *** Quits: zws3mb (Mibbit@moz-FB2947AF.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:39:06] <glyc> bitblit the struct
[05:39:09] <strcat> if the type has a destructor, or &mut, or &fn, it moves ownership
[05:39:14] <strcat> glyc: yes
[05:39:45] <strcat> semantically, due to the transfer of ownership, it is a copy of the owned tree of values
[05:40:00] <glyc> strcat: right
[05:40:11] <strcat> but it only has to copy the pointer for things like ~T
[05:40:25] <engla> rusti: let v = [1,2,3]; let it = v.iter(); it.map(|_| 0).to_owned_vec() + it.map(|&x| x).to_owned_vec()   // the vec iterator implicitly copies too
[05:40:26] -rusti- ~[0, 0, 0, 1, 2, 3]
[05:40:31] <strcat> acrichto: anyway no idea how to debug this, really
[05:40:52] <strcat> engla: because it has no destructor, &mut or &fn
[05:40:53] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[05:40:54] <strcat> it's a simple rule
[05:41:10] <engla> yes
[05:41:15] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[05:41:15] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/6bZyxQ
[05:41:15] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[05:41:30] <engla> it's surprising because iterators is the typical thing that you consume
[05:41:32] <strcat> acrichto: I think it could be something wrong in foreign.rs
[05:41:35] <strcat> but I don't know what exactly
[05:41:35] <engla> that gets consumed
[05:41:48] *** Quits: lbergstrom (Adium@moz-7D905691.avante-wifi.mozilla.hq) (Ping timeout)
[05:42:13] <strcat> all this code is hacked together in foreign.rs
[05:42:15] <strcat> :s
[05:42:46] <SimonSapin> rusti: "\x80".as_bytes()
[05:42:46] -rusti- &[194u8, 128u8]
[05:42:57] <SimonSapin> rusti: "\uD800"
[05:42:58] -rusti- <anon>:4:12: 4:13 error: illegal numeric character escape
[05:42:58] -rusti- <anon>:4     let r = {
[05:42:58] -rusti-                      ^
[05:42:58] -rusti- application terminated with error code 101
[05:44:18] <acrichto> strcat: does this die for small crates? like hello world
[05:44:19] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[05:44:19] <engla> rusti: std::str::is_utf8([0xEDu8, 0xA0, 0x80])
[05:44:20] -rusti- false
[05:44:22] <strcat> acrichto: yes
[05:44:27] <strcat> acrichto: it's fine without the runtime
[05:44:35] <strcat> it's something in the runtime, before main
[05:44:35] <glyc> so the exceptions to the move are when you have non ~ owned trees?
[05:44:43] <acrichto> aww I wass hoping it would reproduce with no_std
[05:44:51] <strcat> glyc: there aren't exceptions related to ~
[05:45:08] <strcat> if the type has a destructor (~T does), &fn or &mut it moves ownership
[05:45:21] <strcat> and the copy is as shallow as possible
[05:45:50] <glyc> ok. what are the other cases, when does the move not move ownership?
[05:46:06] <strcat> if it doesn't have a destructor, &fn or &mut
[05:46:09] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[05:46:09] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/A8v55A
[05:46:09] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[05:46:11] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[05:46:11] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/QbtTxQ
[05:46:11] <ghrust> 13rust/06auto 147173b9d 15Jakub: Fix pretty-printing of empty impl items
[05:46:11] <ghrust> 13rust/06auto 148b1fb79 15bors: auto merge of #9061 : jakub-/rust/pretty-print-empty-impl, r=alexcrichton
[05:46:12] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[05:46:16] <strcat> there are no more other cases
[05:46:38] <glyc> okay, so the discussion is only about ~ values, yes?
[05:46:47] <strcat> not talking about ~
[05:46:51] <glyc> sorry
[05:46:51] <strcat> talking about all types in rust
[05:46:55] <glyc> ok
[05:47:32] <strcat> if a type has a destructor, &fn or &mut, it moves ownership rather than copying (the difference being that if it moves, you can't reuse the source)
[05:47:45] <strcat> ~T has no special rules - it simply has a destructor
[05:48:52] <strcat> acrichto: anyway not having any luck ;[
[05:50:03] <glyc> sorry if I'm asking really basic questions. is the subjet about what happens during let a = b; for some type that both a and b share?
[05:50:14] <strcat> yes
[05:50:16] <strcat> or passing by-value
[05:50:21] <strcat> or returning by-value
[05:50:26] <glyc> got it
[05:50:32] <dbaupp> strcat: does it crash if you use #[start] and start it yourself?/is this is easier to manipulate?
[05:50:41] <strcat> dbaupp: no it doesn't crash if I use #[start]
[05:50:45] <strcat> but then I can't find any issues
[05:51:01] <dbaupp> strcat: even if you start the rt yourself?
[05:51:10] <strcat> dbaupp: if I start the rt myself it's going to crash ;p
[05:51:19] <strcat> it crashes somewhere in ther
[05:51:21] <strcat> e
[05:51:32] <strcat> dbaupp: do you have an example of what you want me to try?
[05:51:37] <dbaupp> strcat: yup; but can you use this to examine the crash better?
[05:51:42] <strcat> dbaupp: probably
[05:51:44] <dbaupp> not particularly
[05:52:00] <glyc> and the question concerns optimizing the value transfer by just moving ownership of a pointer to the value instead of copying the value?
[05:52:27] <glyc> or maybe I'm way off
[05:52:41] <acrichto> strcat: I'm trying to fix https://github.com/mozilla/rust/issues/9036 right now, but I may look into that afterwards b/c the removal of the allocas I think would be a pretty good win
[05:52:43] <strcat> rust's only form of copying at a language level is shallow
[05:53:04] <glyc> only shallow copying, ok
[05:53:07] <strcat> acrichto: well it's not just allocas - it makes it write to the retptr
[05:53:37] <acrichto> strcat: oh man that's like what I would expect
[05:53:51] <acrichto> strcat: also my build of master on linux with valgrind 3.7 finally finished, but makes no sense... https://gist.github.com/alexcrichton/6519777
[05:53:54] <strcat> glyc: the built-in copies are shallow, Clone is as deep as necessary to create a new value without moving, DeepClone traverses as deep as possible
[05:54:11] <strcat> acrichto: wat
[05:54:21] <acrichto> yeah
[05:55:06] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[05:55:21] <strcat> one day I'm going to make us not make that extra main function symbol
[05:55:32] * strcat really wants this to work first
[05:55:33] <glyc> strcat: got it
[05:56:08] <strcat> glyc: so for example, the built-in copy will move ownership of ~T (copies the pointer), Clone will allocate a new ~T, and DeepClone will actually allocate a new @T/Rc<T>
[05:56:37] <adu> hi strcat 
[05:56:42] <strcat> hi
[05:56:55] *** Joins: tjc (tjc@moz-6C584174.ipnetworksinc.net)
[05:56:56] *** ChanServ sets mode: +o tjc
[05:57:14] <strcat> dbaupp: well, going to try starting the runtime...
[05:58:44] <glyc> strcat: ok. trying to get back to the naming confusion, as to why does sometimes unwrap do more than one thing
[05:59:12] <strcat> it doesn't really do more than one thing - it takes self by-value, so for some types that moves and for other it doesn't
[05:59:20] *** Joins: ww (Mibbit@moz-DFAED48A.lightspeed.sntcca.sbcglobal.net)
[05:59:22] <glyc> ah
[05:59:35] <strcat> a haskell-like name might be clearer
[06:00:08] <strcat> from_some
[06:00:10] <acrichto> strcat: isn't the default linkage for llvm external?
[06:00:19] <strcat> acrichto: yes that's the issue
[06:00:31] <acrichto> strcat: wait what, what's the issue
[06:00:42] <strcat> acrichto: well lets talk about that later ;P, cause I know how to solve it
[06:00:50] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[06:00:58] <acrichto> strcat: with available_externally on the issue I'm working on?
[06:00:59] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[06:01:09] <strcat> acrichto: oh no, I was talking about something else
[06:01:21] <acrichto> strcat: oh what issue were you talking about?
[06:01:30] <strcat> acrichto: how we create several main symbols
[06:01:32] <strcat> just a minor annoyance
[06:01:35] <acrichto> oh
[06:01:42] <acrichto> but isn't the default linkage external?
[06:01:53] <strcat> yes
[06:02:05] <acrichto> why am I getting undefined references then...
[06:02:16] * strcat shrugs
[06:02:24] <strcat> acrichto: for functions, it's external
[06:02:27] <strcat> maybe for globals it's not
[06:02:31] <strcat> don't know
[06:04:00] <strcat> acrichto: yep segfaults
[06:04:01] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:04:02] <strcat> when I start the runtime
[06:04:04] <strcat> :[
[06:04:15] <strcat> it totally screws up the call stack
[06:04:17] <acrichto> strcat: can you pinpoint where the stack gets corrupted?
[06:04:19] <strcat> nope
[06:04:27] <acrichto> but you have a good starting point, right?
[06:04:30] <strcat> no
[06:04:38] <acrichto> breaking on main doesn't even work?
[06:04:41] <acrichto> like main main not rust main
[06:04:52] <strcat> well I'll do that
[06:05:01] <strcat> acrichto: http://ix.io/7Yc
[06:05:12] <acrichto> that's bad
[06:05:23] <acrichto> unless you wrote an obfuscated executable
[06:05:25] <acrichto> in which case that's good
[06:05:27] <strcat> lol
[06:05:36] <strcat> it goes into rt::start and dies
[06:05:46] <acrichto> but it's good before rt::start?
[06:05:49] <strcat> yes
[06:06:00] <acrichto> I'd try to pinpoint where it gets corrupted as best you can
[06:06:05] <strcat> I really can't ;[
[06:06:12] <acrichto> you can stepi until it's bad?
[06:06:27] <strcat> there are no debug symbols in libstd :s
[06:06:36] <strcat> turning on debugging didn't do it
[06:06:45] <acrichto> that's awful
[06:06:51] <acrichto> you should have symbols though
[06:06:53] <acrichto> like of functions
[06:06:56] <dbaupp> are we at the point that -Z debug-info works for std/extra yet?
[06:07:01] <strcat> acrichto: yeah but I can't step
[06:07:04] <strcat> it doesn't work
[06:07:05] <acrichto> you can stepi
[06:07:13] <acrichto> I've never had step work period
[06:07:25] <strcat> acrichto: it works with -Z debug-info
[06:07:25] <acrichto> although I just inherently don't trust that :P
[06:07:27] <strcat> on linux
[06:07:29] <strcat> ;p
[06:07:35] <acrichto> osx gdb is so old :(
[06:07:56] *** Joins: jstevans (Instantbir@moz-EDC0D7D4.bootp.virginia.edu)
[06:08:57] <strcat> acrichto: can I make stepi go faster? :|
[06:09:04] <acrichto> oh argh if you inline a symbol from crate bar into crate foo the symbol generation uses foo's name/version to generate the hash instead of bar's name/version
[06:09:07] <acrichto> strcat: stepi 100
[06:09:10] <acrichto> 100 instructions
[06:09:11] <strcat> ah there
[06:09:31] <dbaupp> acrichto: fixing that *properly* would be awesome
[06:09:42] <strcat> it's just doing 200000 damn linking things
[06:09:43] <acrichto> dbaupp: yeah it would fix https://github.com/mozilla/rust/issues/9036 very nicely
[06:09:51] <acrichto> strcat: yeah stepi is normally real slow
[06:10:08] <acrichto> strcat: I normally just find a suspicious function and break on most of its instructions, that way when it calls recursively you can just continue
[06:10:09] <strcat> jemalloc doing init stuff
[06:10:11] <strcat> ;p
[06:10:14] <acrichto> yeah skip all that
[06:10:20] <strcat> problem is that I have no call stack
[06:10:21] <acrichto> bt and find the return address and break there
[06:10:23] <acrichto> what
[06:10:23] <strcat> when it dies
[06:10:27] <strcat> I don't mean now
[06:10:29] <strcat> ;p
[06:10:30] <acrichto> oh but you do right now when jemalloc is running
[06:10:33] <strcat> yeah
[06:10:55] <strcat> now I'm in rust
[06:10:57] <strcat> 0xf7b6ec15 in os::getenv::h619696ead38cf8::v0.8$x2dpre ()
[06:11:09] <strcat> stupid linker
[06:11:14] <acrichto> linker?
[06:11:20] <strcat> it's always doing _dl_fixup
[06:11:23] <acrichto> oh lol
[06:11:30] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[06:11:34] <acrichto> there's probably a fancy way to get around that
[06:11:42] <acrichto> I am unaware of such a solution
[06:12:19] <strcat> more jemalloc crap
[06:12:23] <strcat> I want step
[06:12:25] <strcat> ;p
[06:12:43] <strcat> step goes by line...
[06:12:46] <strcat> source code line
[06:12:57] <strcat> 0xf7b9c73a in rt::global_heap::exchange_free::hbf6638d34c91b178::v0.8$x2dpre ()
[06:12:59] <strcat> yay
[06:13:01] <strcat> more dl_fixup
[06:13:23] <acrichto> it's certainly not the most efficient form of debugging
[06:13:26] <acrichto> but at least it's correct :)
[06:13:42] * strcat does stepi 40000 and it's not there yet
[06:14:08] *** Quits: tjc (tjc@moz-6C584174.ipnetworksinc.net) (Ping timeout)
[06:14:08] <strcat> now it's having fun with vectors
[06:14:10] <strcat> so much jemalloc
[06:14:22] <acrichto> turns out cpus can execute a lot of instructions *really* fast
[06:14:26] <strcat> it made a scheduler
[06:14:35] <acrichto> progress!
[06:14:42] <adu> progress!
[06:14:44] <strcat> an RNG
[06:14:52] <strcat> an Arc
[06:14:55] <strcat> ;p
[06:15:22] <strcat> event loop...
[06:17:14] <strcat> acrichto: uh, it's stuck
[06:17:19] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[06:17:35] <strcat> how do I follow a thread with stepi?
[06:17:47] * strcat shrugs
[06:18:27] <acrichto> follow a thread?
[06:18:34] <glyc> strcat: possibly helpful http://lldb.llvm.org/lldb-gdb.html
[06:18:52] <strcat> glyc: ooo
[06:19:05] *** nrc is now known as nrc|afk
[06:19:49] *** Joins: tjc (tjc@moz-605588F2.tmodns.net)
[06:19:50] *** ChanServ sets mode: +o tjc
[06:20:31] <strcat> acrichto: found it
[06:20:34] <glyc> DeepCopy doesn't allocate another ~T, but instead an @T ? hmm... that lost me, naively I expect DeepCopy to return a ~T for some reason
[06:20:47] <strcat> glyc: Clone/DeepClone return the same type
[06:20:54] <strcat> Clone of ~T returns ~T
[06:20:58] <strcat> DeepClone of ~T returns ~T
[06:20:59] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[06:21:02] <strcat> Clone of @T returns @T
[06:21:08] <strcat> DeepClone of @T returns @T
[06:21:12] <strcat> they are just traits
[06:21:17] <dbaupp> rusti: let x = ~@mut @1; x.deep_clone()
[06:21:18] -rusti- ~@mut @1
[06:21:29] <glyc> ok
[06:21:46] <strcat> acrichto: it dies *right* after making the thread
[06:22:05] <acrichto> strcat: interesting...
[06:22:05] <strcat> acrichto: so I assume something is wrong with the addr it passes it pthread_create...
[06:22:09] <glyc> do traits like ~ and @ exist at runtime; i.e. rtti could differentiate?
[06:22:12] <strcat> or it fails to allocate a proper stack
[06:22:19] <acrichto> strcat: which thread dies?
[06:22:27] <strcat> the new one
[06:22:48] <strcat> that's why there's no stack
[06:22:51] <dbaupp> glyc: they aren't traits; they're different pointer types, and yes, they exist
[06:22:53] <acrichto> you don't specify a stack to pthread_create, do you?
[06:22:55] <strcat> it dies immediately on making the thread
[06:23:05] <strcat> acrichto: well to clone, you do
[06:23:11] <strcat> pthread_create calls clone
[06:23:26] <acrichto> strcat: well we're probably not finding a bug in pthreads
[06:23:28] <glyc> dbaupp: thanks for clearing that up
[06:23:32] <strcat> anyway I guess it's from the addr
[06:23:38] <strcat> it passes an invalid fn ptr maybe
[06:23:45] <dbaupp> glyc: @T is pointer -> (gc info, T), ~T is pointer -> T (both heap allocated)
[06:23:50] <acrichto> strcat: maybe these optimizations are being incorrectly applied to extern fns?
[06:24:01] *** Quits: tjc (tjc@moz-605588F2.tmodns.net) (Ping timeout)
[06:24:04] <strcat> acrichto: maybe but I explicitly tried to avoid that
[06:24:20] <acrichto> strcat: where's the new thread created?
[06:24:24] <glyc> dbaupp: got it
[06:24:32] <strcat> acrichto: what do you mean?
[06:24:39] <acrichto> strcat: oh, sync/rust_thread.cpp
[06:24:42] <dbaupp> glyc: (to be strictly correct, ~T where T contains @ is actually pointer -> (gc info, T) too)
[06:24:45] <strcat> #3  0xf7a2b5b2 in rust_thread::start (this=this@entry=0xf6c07460) at /home/rust/rust/src/rt/sync/rust_thread.cpp:54
[06:24:51] <strcat> #4  0xf7a2bfd5 in rust_raw_thread_start (fn=0xffffd3a8) at /home/rust/rust/src/rt/rust_builtin.cpp:410
[06:24:51] *** Quits: aeqwa (aeqwa@moz-8BDCE0DD.dsl.tropolys.de) (Ping timeout)
[06:24:55] <strcat> #5  0xf7be2a9c in rt::thread::Thread::start::substart::hdef8f579bbeb4113pr::v0.8$x2dpre ()
[06:25:11] <glyc> man this mibbit is a pain to copy from (for reference in the morning)... is there a preferred irc interface?
[06:25:20] <strcat> acrichto: that thread actually seems to start fine
[06:25:23] <strcat> it's the next one that dies
[06:25:29] <acrichto> strcat: the 3rd thread?
[06:25:32] <strcat> acrichto: yes!
[06:25:37] <acrichto> odd
[06:25:42] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[06:25:51] *** Joins: evod (Mibbit@moz-C2B9B64C.hsd1.ca.comcast.net)
[06:26:01] <dbaupp> glyc: a proper non-web chat program (many can handle IRC)
[06:26:03] <acrichto> dbaupp: it worked! (using the correct name)
[06:26:12] <strcat> acrichto: the 2nd thread seems to start a 3rd thread right away
[06:26:14] <dbaupp> acrichto: hm?
[06:26:15] <strcat> or something like that
[06:26:21] <acrichto> dbaupp: I now have a fix for https://github.com/mozilla/rust/issues/9036
[06:26:39] <acrichto> strcat: the 2nd starts the 3rd? and you're sure the third thread dies instantly?
[06:26:44] <strcat> acrichto: yes
[06:26:54] <strcat> acrichto: it dies right during/after the syscall
[06:26:55] <acrichto> strcat: so the third thread shouldn't die instantly, it has to execute an instruction which touches the stack
[06:27:07] <acrichto> strcat: you should be able to break on the first instruction run *before* it runs
[06:27:15] <strcat> acrichto: it dies in vsyscall
[06:27:22] <dbaupp> acrichto: oh! \o/ and for e.g. `RUST_LOG=::help rustc` showing `rustc::attr` and `rustc::ebml::reader` (i.e. logging from inlined items from syntax/extra?)
[06:27:31] *** Joins: victorporof (victorporo@FBDAE982.F9BD9D78.9B1E38F4.IP)
[06:27:33] <strcat> acrichto: it dies from an invalid instruction
[06:27:35] <strcat> the fn ptr is invalid
[06:27:36] <acrichto> dbaupp: oh that may not be fixed
[06:27:40] <acrichto> dbaupp: this was more linkage problems
[06:27:45] <dbaupp> acrichto: ah, right
[06:28:03] <acrichto> strcat: oh so if you break on pthread_create, the function pointer passed in is invalid
[06:28:19] <strcat> acrichto: well I haven't checked that specifically
[06:28:22] <acrichto> strcat: also with multiple threads running around they could be tromping each other's stack
[06:29:08] *** Joins: tjc (tjc@moz-605588F2.tmodns.net)
[06:29:08] *** ChanServ sets mode: +o tjc
[06:29:34] *** Quits: victorporof (victorporo@FBDAE982.F9BD9D78.9B1E38F4.IP) (Ping timeout)
[06:29:53] *** Quits: fabiand_ (fabiand@moz-4E21CCD7.adsl.alicedsl.de) (Quit: Verlassend)
[06:30:26] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[06:30:36] <strcat> acrichto: something wrong with the call stack there :s
[06:30:36] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[06:30:49] *** Quits: tjc (tjc@moz-605588F2.tmodns.net) (Ping timeout)
[06:31:04] <acrichto> strcat: how so?
[06:31:33] *** Quits: adu (alt@moz-BF2B1AE4.washdc.fios.verizon.net) (Quit: adu)
[06:33:37] <acrichto> strcat: brb, gtg for a bit
[06:34:33] *** Joins: tjc (tjc@moz-605588F2.tmodns.net)
[06:34:33] *** ChanServ sets mode: +o tjc
[06:34:59] <strcat> acrichto: ok nvm it dies in the 2nd thread.
[06:35:04] *** Joins: fabiand (fabiand@moz-4E21CCD7.adsl.alicedsl.de)
[06:39:20] *** Quits: tjc (tjc@moz-605588F2.tmodns.net) (Quit: zzzzzzzzzz)
[06:39:52] *** Joins: jon (jon@moz-D51AE9DE.swym.se)
[06:40:26] *** Joins: lbergstrom (Adium@moz-7D905691.avante-wifi.mozilla.hq)
[06:42:06] *** Quits: lbergstrom (Adium@moz-7D905691.avante-wifi.mozilla.hq) (Ping timeout)
[06:44:50] *** Quits: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net) (Ping timeout)
[06:47:46] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[06:50:09] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[06:53:07] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[06:53:22] *** Joins: sk (sk@273FD846.E993C7C3.78DD174B.IP)
[06:56:50] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[06:58:39] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[06:58:58] *** Joins: victorporof (victorporo@FBDAE982.F9BD9D78.9B1E38F4.IP)
[07:00:57] *** Joins: robertknight (robertknig@moz-A44C526D.range86-166.btcentralplus.com)
[07:01:11] *** Joins: [squiddy] (squiddy@moz-F61153C0.adsl.alicedsl.de)
[07:01:20] *** Quits: RMF (RMF@moz-1A0DBA5B.dsl.telepac.pt) (Ping timeout)
[07:02:50] *** Quits: jdm (jdm@moz-2C5514D1.lightspeed.sntcca.sbcglobal.net) (Quit: Lost terminal)
[07:04:31] *** Quits: robertknight (robertknig@moz-A44C526D.range86-166.btcentralplus.com) (Ping timeout)
[07:05:20] *** Joins: RMF (RMF@moz-67EE71FF.dsl.telepac.pt)
[07:06:23] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[07:12:39] *** Joins: sigma (sigma@moz-43189A53.range109-151.btcentralplus.com)
[07:13:02] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[07:15:59] *** Quits: sigma (sigma@moz-43189A53.range109-151.btcentralplus.com) (Ping timeout)
[07:16:04] *** Quits: flowsnake_ (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com) (Connection reset by peer)
[07:16:21] *** Joins: ab (alex@BC9D99CC.37C1012D.FE617B51.IP)
[07:20:30] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Quit: Konversation terminated!)
[07:20:48] *** Joins: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com)
[07:21:36] *** Joins: sammykim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[07:21:59] *** Quits: wilsonk-laptop (kvirc@moz-8E86F35A.cg.shawcable.net) (Quit: KVIrc 4.0.4 Insomnia http://www.kvirc.net/)
[07:22:47] *** Quits: sammykim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:23:22] *** Joins: sanxiyn (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[07:23:38] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[07:24:07] <sanxiyn> acrichto: Can you look at #9117?
[07:24:17] <sanxiyn> Re: LLVM upgrade
[07:24:29] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[07:24:30] *** Joins: bent (chatzilla@FC9FC902.ED95B50E.EDDC15BA.IP)
[07:28:00] *** Joins: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net)
[07:29:22] *** flaper87|afk is now known as flaper87
[07:30:47] <acrichto> sanxiyn: cool, I like the idea of cherry-picking for now
[07:30:54] *** Quits: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net) (Ping timeout)
[07:31:24] *** Joins: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net)
[07:32:36] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[07:32:56] <acrichto> sanxiyn: it conflicted :(
[07:34:30] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Input/output error)
[07:34:44] <sanxiyn> acrichto: I can resolve conflict and send a pull request to alexcrichton/llvm
[07:34:53] <sanxiyn> Is that okay?
[07:35:09] <sanxiyn> Eh... to which branch I should send it, by the way?
[07:35:11] <acrichto> sanxiyn: sure, although I just need the hash of the commit in your repo
[07:35:15] <acrichto> umm...
[07:35:24] *** Quits: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP) (Ping timeout)
[07:35:24] * acrichto is totally organized
[07:35:27] <acrichto> rust-llvm-2013-08-28
[07:35:33] <sanxiyn> Hm
[07:35:44] <acrichto> yes, that is correct
[07:35:52] <sanxiyn> acrichto: Okay I will fork, pick, resolve conflict, and tell you hash here
[07:36:01] <acrichto> cool beans
[07:36:09] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[07:36:09] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 148b1fb79 to 14ba9fa89: 02http://git.io/N3iJvQ
[07:36:09] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[07:36:11] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[07:36:11] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/FUKvVw
[07:36:11] <ghrust> 13rust/06auto 1419a6fab 15Alex Crichton: Implement the notion of a "generated unsafe block"...
[07:36:11] <ghrust> 13rust/06auto 1411e9c48 15Alex Crichton: Flag unsafe blocks from format! as compiler-generated
[07:36:11] <ghrust> 13rust/06auto 14ef6a97d 15bors: auto merge of #9013 : alexcrichton/rust/generated-unsafe-blocks, r=sanxiyn...
[07:36:13] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[07:36:14] <Luqman> could be that you need some intermediate commits
[07:37:35] *** Joins: wilsonk-laptop (kvirc@moz-8E86F35A.cg.shawcable.net)
[07:38:37] <sanxiyn> Luqman: It's essentially one line patch. I think I can backport in any case.
[07:38:53] *** Quits: bent (chatzilla@FC9FC902.ED95B50E.EDDC15BA.IP) (Ping timeout)
[07:38:55] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[07:39:34] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[07:40:24] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[07:40:59] *** Joins: lbergstrom (Adium@moz-7D905691.avante-wifi.mozilla.hq)
[07:42:39] *** Quits: lbergstrom (Adium@moz-7D905691.avante-wifi.mozilla.hq) (Ping timeout)
[07:44:40] *** Quits: rfw (rfw@moz-7D453A5B.rfw.name) (Ping timeout)
[07:45:06] *** Joins: rfw (rfw@moz-7D453A5B.rfw.name)
[07:45:37] *** Joins: SingingBoyo (brandon@5A6A55B7.DFA2E3D3.C3C3A9D0.IP)
[07:45:39] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[07:46:03] *** Quits: SingingBoyo (brandon@5A6A55B7.DFA2E3D3.C3C3A9D0.IP) (Quit: Leaving)
[07:46:10] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:46:19] *** Joins: SingingBoyo (brandon@5A6A55B7.DFA2E3D3.C3C3A9D0.IP)
[07:47:01] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[07:47:36] *** Joins: bent (chatzilla@FC9FC902.ED95B50E.EDDC15BA.IP)
[07:47:51] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[07:47:53] <SingingBoyo>  how do I enable debug symbols when building libstd/libextra (and just generally)?
[07:48:08] <acrichto> SingingBoyo: -Z debug-info (although it may cause lots of problems)
[07:48:14] *** Joins: jaen (jaen@FB01674D.56B727FE.4B52F012.IP)
[07:50:19] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Input/output error)
[07:52:07] *** Joins: gavinb (gavinb@4C002C3C.BF1E0B83.3BB1CE94.IP)
[07:52:43] *** Quits: gavinb (gavinb@4C002C3C.BF1E0B83.3BB1CE94.IP) (Quit: gavinb)
[07:53:05] *** Joins: gavinb (gavinb@4C002C3C.BF1E0B83.3BB1CE94.IP)
[07:55:22] *** Joins: fgnrqo[904gi[or (egyptmosle@9CCABDD0.7FD7D7B8.DB9D6342.IP)
[07:58:13] *** Quits: fgnrqo[904gi[or (egyptmosle@9CCABDD0.7FD7D7B8.DB9D6342.IP) (Write error: Broken pipe)
[07:58:44] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[07:58:57] *** Quits: SingingBoyo (brandon@5A6A55B7.DFA2E3D3.C3C3A9D0.IP) (Ping timeout)
[07:59:12] *** Joins: huseby (huseby@moz-633A76FB.static.cust.telenor.com)
[07:59:39] <gavinb> To support std::fmt in a custom type, it suffices to implement the Default trait from std::fmt, right?
[07:59:39] *** Joins: SingingBoyo (brandon@5A6A55B7.DFA2E3D3.C3C3A9D0.IP)
[08:01:32] <acrichto> gavinb: correct
[08:01:51] <acrichto> gavinb: althogh you're welcome to implement any of the other traits to use their corresponding format symbol
[08:02:01] <acrichto> ? doesn't have a corresponding trait though
[08:02:09] <gavinb> Something like: impl<'self> Default for StrChunk<'self> { fn fmt(value: &StrChunk, f: &mut std::fmt::Formatter) { â€¦ ?
[08:02:40] <gavinb> acrichto: cool; well it's not playing ball for me just yet...
[08:02:51] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[08:03:03] <dbaupp> (no user implementable trait for ?, that is.)
[08:03:04] <gavinb> I still get error: failed to find an implementation of trait std::fmt::Default for &StrChunk<'a> with the above impl present
[08:03:36] <acrichto> gavinb: you're passing in &StrChunk, not StrChunk
[08:03:47] <acrichto> format! doesn't move values, so you can pass in *chunk
[08:04:20] <mindcat> I am lazy, and I want import somethings with regex match.
[08:04:56] <gavinb> acrichto: oh, I thought it wasn't seeing the trait because of some lifetime confusion :/
[08:05:55] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[08:06:10] <acrichto> dbaupp: could you take a look at https://github.com/mozilla/rust/pull/9012 ?
[08:06:29] *** Quits: SingingBoyo (brandon@5A6A55B7.DFA2E3D3.C3C3A9D0.IP) (Ping timeout)
[08:06:43] <dbaupp> acrichto: sure (in an hour or two)
[08:06:52] <acrichto> dbaupp: oh no rush at all
[08:10:17] *** Joins: SingingBoyo (brandon@5A6A55B7.DFA2E3D3.C3C3A9D0.IP)
[08:10:29] <SingingBoyo> is there a way to pass options to rustc via make when building the libs?  Need to enable debug macros.
[08:12:15] <Luqman> RUSTC_FLAGS maybe
[08:12:23] <acrichto> SingingBoyo: I'm not sure about after the fact, but you can also configure with --enable-debug
[08:12:54] <gavinb> acrichto: working now, thanks
[08:14:28] <SingingBoyo> acrichto: ah.  are things like this documented somewhere?  I feel like there's a doc page I haven't found and should really know about.
[08:17:14] <dbaupp> SingingBoyo: kinda-not-really
[08:17:27] <dbaupp> ppossibly somewhere in https://github.com/mozilla/rust/wiki/Notes
[08:18:38] <acrichto> gavinb: there are docs for format! at http://static.rust-lang.org/doc/std/fmt.html, and if anything is missing just let me know!
[08:18:45] *** Quits: gavinb (gavinb@4C002C3C.BF1E0B83.3BB1CE94.IP) (Ping timeout)
[08:18:47] <dbaupp> heh, http://quotes.burntelectrons.org/search?query=tag%3A%23rust
[08:19:14] * flaper87 is a bit confused now. https://github.com/mozilla/rust/blob/master/src/libstd/task/mod.rs#L828 https://github.com/mozilla/rust/blob/master/src/libstd/task/mod.rs#L19
[08:19:15] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[08:19:44] <flaper87> so, the docstring in that file says the reverse is not true, meaning, when a parent fails the child will keep running
[08:19:56] <flaper87> but there's a test testing that when parent fails the child does as well
[08:20:02] <acrichto> flaper87: huh, maybe that's why it's ignored
[08:20:17] <acrichto> brson/bblum are two who may know more about that
[08:20:51] <flaper87> acrichto: mmh, I think that will cause a linked failure anyway because the test itself is running in a new scheduler task
[08:21:00] <flaper87> which means it's parent will fail
[08:21:45] <JesseH> How stable is Rust?
[08:22:48] <acrichto> JesseH: sadly not quite, the syntax is getting pretty stable nowadays, but library apis and such are subject to change
[08:23:06] <acrichto> JesseH: rust hasn't yet hit the "backwards compatible" milestone so there's no guarantees about what may compile tomorrow
[08:23:21] <dbaupp> JesseH: if you were to ask that question when building a steel bridge, the answer would be the same.
[08:23:31] <JesseH> ^_^
[08:23:37] <flaper87> dbaupp: lol
[08:24:26] <JesseH> I'm interested in Rust. Don't know why.
[08:24:30] *** Quits: SingingBoyo (brandon@5A6A55B7.DFA2E3D3.C3C3A9D0.IP) (Ping timeout)
[08:24:42] *** Joins: SingingBoyo (brandon@5A6A55B7.DFA2E3D3.C3C3A9D0.IP)
[08:25:31] <JesseH> I'll find out eventually. Just trying to organize the time that might be spent on this before I start.
[08:26:39] <SingingBoyo> JesseH: as long as you're prepared to make lots of fairly trivial changes every now and then you'll be okay
[08:26:46] <SingingBoyo> at least that's what I've found
[08:27:43] <JesseH> I am totally fine with that. I just have a hard time committing to other languages.
[08:27:48] * JesseH crosses fingers
[08:29:00] *** Quits: SingingBoyo (brandon@5A6A55B7.DFA2E3D3.C3C3A9D0.IP) (Ping timeout)
[08:30:04] *** Joins: sanxiyn_ (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[08:30:16] *** Quits: ww (Mibbit@moz-DFAED48A.lightspeed.sntcca.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[08:30:17] *** Joins: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net)
[08:30:17] *** Joins: SingingBoyo (brandon@5A6A55B7.DFA2E3D3.C3C3A9D0.IP)
[08:31:19] <sanxiyn_> acrichto: c9e5eaf86b6f395d811adccb273b67c33e6199f7 at https://github.com/sanxiyn/llvm
[08:31:50] <sanxiyn_> I confirmed the fix working locally
[08:33:46] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[08:34:37] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Quit: Linkinus - http://linkinus.com)
[08:34:52] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[08:35:48] <acrichto> sanxiyn_: excellent
[08:36:03] *** Quits: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net) (Ping timeout)
[08:36:29] <klutzy> wow, >1300 commits between llvm svn and our master?
[08:37:39] <acrichto> ladies and gentlemen, prepare you ccaches
[08:38:05] <acrichto> klutzy: that'd be impressive, we're less than a month old
[08:38:10] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[08:38:15] *** Joins: nkoep (nik@moz-2C4BD527.pool.mediaways.net)
[08:38:56] <acrichto> sanxiyn_: https://github.com/mozilla/rust/pull/9118
[08:41:06] *** Joins: lbergstrom (Adium@moz-7D905691.avante-wifi.mozilla.hq)
[08:41:10] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[08:41:10] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/FUKvVw
[08:41:10] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[08:42:46] *** Quits: lbergstrom (Adium@moz-7D905691.avante-wifi.mozilla.hq) (Ping timeout)
[08:42:56] *** Joins: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net)
[08:43:57] <nathan7> Hey humans, what happened to as_c_str?
[08:44:39] <acrichto> nathan7: to_c_str().with_ref(...)
[08:44:56] <nathan7> What the fuck?
[08:44:59] <dbaupp> nathan7: humans? wrong channel.
[08:45:17] <dbaupp> nathan7: also, .with_c_str is an alias for that
[08:45:36] *** Quits: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net) (Ping timeout)
[08:45:42] <nathan7> AH
[08:45:45] <nathan7> with_c_str, brilliant
[08:46:01] *** Quits: SingingBoyo (brandon@5A6A55B7.DFA2E3D3.C3C3A9D0.IP) (Ping timeout)
[08:46:10] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[08:46:11] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/2wrhpA
[08:46:11] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[08:46:11] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[08:46:11] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/a6iDmA
[08:46:11] <ghrust> 13rust/06auto 148b00004 15Felix S. Klock II: Remove oldvisit.rs (yay!); part of #7081 refactoring.
[08:46:11] <ghrust> 13rust/06auto 14f8cbf41 15bors: auto merge of #9093 : pnkfelix/rust/fsk-remove-oldvisit, r=alexcrichton
[08:46:12] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[08:46:39] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:47:27] <flaper87> dbaupp: lol @ wrong channel
[08:47:30] <flaper87> :D
[08:47:35] <nathan7> Sweet, made a piece of old code work again
[08:47:56] <dbaupp> :D
[08:49:18] <acrichto> our linking situtation is a bit dismal with statics right now...
[08:50:52] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:52:17] <Amaranth> Are rust strings null terminated or do they have an out of band length?
[08:52:28] <Amaranth> Or, for optimization with C interop, both?
[08:53:16] <dbaupp> Amaranth: no; they used to be null terminated as well as pascal style (with length), but the null termination was making things difficult
[08:53:32] <dbaupp> so currently just out-of-band length
[08:53:34] <Amaranth> So that's why as_c_str went away, right?
[08:53:40] <Amaranth> Because that requires a copy now
[08:53:57] <dbaupp> yeah, the convention is as == no allocation
[08:54:18] <dbaupp> (to == copy/allocation, into == move & no allocation)
[08:55:04] <Amaranth> So I guess if people are doing a lot of to/from C string passing they should probably keep a null terminated u8 vector as long as possible for efficiency and only make it a rust string when they absolutely have to
[08:55:37] <dbaupp> there's std::c_str
[08:55:54] <dbaupp> which helps to handle all the nitty-gritty details
[08:56:04] * Amaranth gives up on the specification and opens the source code
[08:56:22] <dbaupp> always the quickest path to the truth
[08:57:46] <dbaupp> std::unstable::raw contains the representations of the various types
[08:57:57] <dbaupp> (well, representations of the representations)
[08:59:24] <dbaupp> acrichto: (I'm slowly reviewing 9012 btw)
[08:59:47] <acrichto> dbaupp: no worries
[09:00:06] <acrichto> dbaupp: it's 2am here and I should sleep, and I won't get around to it till tomorrow night anyway
[09:01:07] <dbaupp> acrichto: I'll have it all reviewed for you to wake up to :)
[09:01:14] <acrichto> lol
[09:01:40] <dbaupp> rusti: format!("{foo_bar}", foo_bar = 1)
[09:01:40] -rusti- <anon>:5:17: 5:28 error: unterminated format string
[09:01:40] -rusti- <anon>:5          format!("{foo_bar}", foo_bar = 1)
[09:01:40] -rusti-                           ^~~~~~~~~~~
[09:01:41] -rusti- error: aborting due to previous error
[09:01:41] -rusti- application terminated with error code 101
[09:01:44] <dbaupp> acrichto: btw^
[09:01:50] <dbaupp> (the underscore)
[09:01:58] <acrichto> y u do dis
[09:02:10] <dbaupp> I'll file a bug about it so you can sleep :P
[09:02:21] <acrichto> clearly libstd should have a dependency on libsyntax
[09:02:34] <dbaupp> definitely
[09:02:42] <acrichto> anyway, sleep now, night
[09:02:47] *** Quits: evod (Mibbit@moz-C2B9B64C.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[09:04:50] <dbaupp> acrichto: https://github.com/mozilla/rust/issues/9119
[09:05:14] *** Joins: ab_ (ab@moz-E6ABCB52.jambit.com)
[09:06:47] *** Joins: SingingBoyo (brandon@193FEFDF.DFA2E3D3.C3C3A9D0.IP)
[09:09:26] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[09:10:12] *** Joins: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net)
[09:10:41] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[09:12:33] *** Quits: SingingBoyo (brandon@193FEFDF.DFA2E3D3.C3C3A9D0.IP) (Ping timeout)
[09:12:38] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[09:13:17] *** Joins: SingingBoyo (brandon@193FEFDF.DFA2E3D3.C3C3A9D0.IP)
[09:13:49] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[09:14:06] *** Quits: [squiddy] (squiddy@moz-F61153C0.adsl.alicedsl.de) (Quit: Leaving)
[09:14:11] *** Quits: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net) (Ping timeout)
[09:16:56] *** Quits: SingingBoyo (brandon@193FEFDF.DFA2E3D3.C3C3A9D0.IP) (Ping timeout)
[09:17:27] *** Joins: SingingBoyo (brandon@193FEFDF.DFA2E3D3.C3C3A9D0.IP)
[09:20:58] *** Joins: squiddy (squiddy@moz-F61153C0.adsl.alicedsl.de)
[09:25:04] *** Quits: SingingBoyo (brandon@193FEFDF.DFA2E3D3.C3C3A9D0.IP) (Ping timeout)
[09:27:58] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[09:35:47] *** Quits: nkoep (nik@moz-2C4BD527.pool.mediaways.net) (Ping timeout)
[09:36:33] *** Quits: jstevans (Instantbir@moz-EDC0D7D4.bootp.virginia.edu) (Ping timeout)
[09:36:38] *** Quits: sanxiyn_ (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:38:59] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[09:41:40] *** Joins: lbergstrom (Adium@moz-7D905691.avante-wifi.mozilla.hq)
[09:43:20] *** Quits: lbergstrom (Adium@moz-7D905691.avante-wifi.mozilla.hq) (Ping timeout)
[09:47:33] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[09:49:45] *** Quits: indirect (indirect_m@moz-22FDA25B.hsd1.ca.comcast.net) (Quit: ZNC - http://znc.in)
[09:49:57] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:50:22] *** Joins: nkoep (nik@moz-A80F12FA.vpn.rwth-aachen.de)
[09:51:09] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[09:51:09] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/a6iDmA
[09:51:09] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[09:52:28] *** Joins: indirect (indirect_m@moz-22FDA25B.hsd1.ca.comcast.net)
[09:53:18] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:56:09] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[09:56:09] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/193u-g
[09:56:09] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[09:56:10] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[09:56:10] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/VY3Fsg
[09:56:10] <ghrust> 13rust/06auto 14d06595c 15Alex Crichton: Backport an LLVM fix to close #9117
[09:56:10] <ghrust> 13rust/06auto 14731ec56 15bors: auto merge of #9118 : alexcrichton/rust/llvm-fix, r=sanxiyn...
[09:56:10] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[09:56:42] *** Joins: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net)
[10:01:06] <kimundi> Amaranth: Also, a null is valid in utf8, so in therory there could be a non-copying version that asserts that the string is null terminated
[10:01:20] <kimundi> rusti: "hello!\x00"
[10:01:21] -rusti- "hello!\x00"
[10:01:41] <kimundi> rusti: println("hello!\x00");
[10:01:42] -rusti- hello!0
[10:01:42] -rusti- ()
[10:01:45] <Amaranth> kimundi: Sure but like dbaupp said that caused problems
[10:01:57] <kimundi> Amaranth: That was a different situation
[10:02:17] <kimundi> A string used to have an _implicit, hidden_ nulll termination byte
[10:02:36] <kimundi> "foo"  would be "foo\0" in memory.
[10:02:40] <Amaranth> Sure
[10:02:45] <kimundi> All string api just hid that fact
[10:03:03] <Amaranth> If it isn't an implicit hidden byte I don't see the point of having it vs [u8]
[10:03:12] <kimundi> An a &str was actually pointing at one byte after it's end
[10:03:49] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[10:03:58] <kimundi> or rather, every &str slice appeared to be one logically one byte shorter than the actual underlying vector slice
[10:04:47] <kimundi> Anyway.... It caused trouble for converting to/from [u8], could cause slight memory unsafety, and was all in all confusing
[10:04:54] *** Quits: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net) (Ping timeout)
[10:05:14] <kimundi> And only existed so that as_c_str could check the last hidden byte and optionally _not_ make a copy
[10:05:47] *** Joins: robo (Mibbit@moz-7DA794C9.nitt.edu)
[10:07:29] <robo> is anyone working on this issue ? https://github.com/Yoric/Mozilla-Student-Projects/issues/35 
[10:07:53] <kimundi> Anyway, the point I wanted to make is, if you have a long string that you want to pass to c as utf8-without-null-but-null-terminated, then you could just push a null to it and work directly with a pointer into it, in theory.
[10:09:32] <kimundi> robo: Well, people are writing things with rust and opengl
[10:11:08] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[10:11:08] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14731ec56 to 14f8cbf41: 02http://git.io/N3iJvQ
[10:11:08] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[10:11:09] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[10:11:09] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/cByWog
[10:11:09] <ghrust> 13rust/06auto 143d735e4 15David Creswick: Generate random BigUints and BigInts
[10:11:09] <ghrust> 13rust/06auto 144339952 15David Creswick: test the correct function (oops)
[10:11:10] <ghrust> 13rust/06auto 1454368af 15David Creswick: Incorporate feedback from huonw...
[10:11:12] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[10:12:54] <Amaranth> robo: Funny, part of my motivation for learning Rust is to see if I can write a 3D game/engine
[10:13:44] <robo> @Amaranth so how's the progress ?
[10:13:59] <Amaranth> I haven't started, still feeling around the language
[10:14:06] <Amaranth> It doesn't look like it'll be that hard though
[10:14:13] <Amaranth> I mean, compared to doing it in C++
[10:14:44] <Amaranth> Of course writing a fully fleshed out 3D game engine is a lot of work
[10:15:38] <mindcat> Amaranth: do you open source? if so, where? :P
[10:15:51] <Amaranth> mindcat: I haven't started anything yet :P
[10:16:06] <mindcat> Amaranth: yea, I know :D
[10:16:16] <Amaranth> I mean, I have a github account
[10:16:22] <robo> @Amaranth yeah i agree but mozilla ported unreal to web along with epic in a few days, so i wanted to knw if there was anything similar going on with rust..
[10:16:24] <Amaranth> But it just has my CraftBukkit work on it
[10:16:35] <Amaranth> robo: That wasn't a port in the same sense
[10:16:58] <mindcat> Amaranth: Hello Minecraft! :P
[10:17:08] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[10:17:10] <Amaranth> I imagine Unreal already has an SDL backend since it seems like when people port to Linux they actually port to SDL
[10:17:29] <Amaranth> So they probably just tweaked that to the parts of SDL emscripten knows about and tada, ported Unreal engine to web
[10:19:01] <Amaranth> mindcat: Hehe, guess you play Minecraft then?
[10:19:55] <mindcat> Amaranth: yea, and Mods. then boring now :P
[10:20:19] <robo> probably.. havnt checked out the bananabread source.
[10:20:19] <robo> @Amaranth have prior experience with any game engines ?
[10:20:33] <Amaranth> robo: Well, if minecraft counts as a game engine :P
[10:20:57] <mindcat> Amaranth: I have a server before, now it is closed.
[10:21:37] <Amaranth> Only real GL project I've worked on though is compiz
[10:21:39] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:23:29] *** Quits: robo (Mibbit@moz-7DA794C9.nitt.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[10:24:01] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[10:24:03] <mindcat> Amaranth: actually, I have a friend, he is minecraft host server owner :D
[10:24:21] *** Joins: robo (Mibbit@moz-7DA794C9.nitt.edu)
[10:26:30] <robo> @Amaranth github repo ?  mine is @deepak1556. if you are planning to write a game engine in rust , would be glad to help.
[10:26:44] *** Joins: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net)
[10:26:44] <Amaranth> Yeah I'm @amaranth
[10:27:19] <mindcat> Amaranth: I don't like Bukkit because it is single threaded :(
[10:27:28] <Amaranth> No it isn't :P
[10:28:28] <Amaranth> Chunk saving compression and saving happens on a different thread, there is a thread pool for chunk loading and decompression, and the per-player connection threads are used for chunk compression to send to clients
[10:28:36] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: bbiab)
[10:28:41] <Amaranth> But sure, the world and entities are single threaded, that's because minecraft
[10:29:02] <Amaranth> Although the Bukkit API would be incompatible with any kind of efficient multithreaded world or entities
[10:29:12] <mindcat> Amaranth: Ok, what about 150+ players in a 32GB memory, E3
[10:29:18] <mindcat> -1230 CPU
[10:29:28] <mindcat> and still lag
[10:29:37] <Amaranth> Sure, because entities :P
[10:29:46] *** Quits: ab_ (ab@moz-E6ABCB52.jambit.com) (Ping timeout)
[10:30:26] <Amaranth> But you could absolutely make an engine that doesn't sacrifice existing minecraft game mechanics, was still single threaded, and worked fine in that scenario
[10:31:06] <Amaranth> Although if you were starting from scratch to do such a thing I don't know why you'd bother leaving it single threaded since design time is the time to make such decisions
[10:32:51] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[10:33:28] *** Quits: nrc|afk (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[10:33:37] <Amaranth> That's actually kind of what I want to do
[10:33:44] <Amaranth> Yet another Minecraft-like game
[10:34:58] <mindcat> Amaranth: https://github.com/nallar/TickThreading seem abandoned :(
[10:35:34] <Amaranth> mindcat: Horrible hack, not a chance of working correctly
[10:35:55] <mindcat> Amaranth: oh
[10:36:02] <Amaranth> And yes, abandoned because he realized he would never get it sorted
[10:36:52] *** Quits: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net) (Connection reset by peer)
[10:38:13] *** Quits: robo (Mibbit@moz-7DA794C9.nitt.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[10:41:42] <JesseH> Amaranth, Will you be using Rust for this?
[10:42:13] *** Joins: lbergstrom (Adium@moz-7D905691.avante-wifi.mozilla.hq)
[10:42:25] <Amaranth> I hope so
[10:42:49] <JesseH> Make sure you link me to the repo once/if you create it.
[10:42:53] <Amaranth> I was going to use Go since I already know it but most of a game engine is going to be calling out to C libraries and Go is _really_ slow for that
[10:43:26] <JesseH> I am more interested in Rust, than Go, for some reason. Mozilla vs Google FIGHT!
[10:43:41] <Amaranth> So then I was going to do C++ since that's where you make a game engine but I decided I'd be more likely to actually do it if there was an interesting twist so in comes Rust
[10:43:53] *** Quits: lbergstrom (Adium@moz-7D905691.avante-wifi.mozilla.hq) (Ping timeout)
[10:44:09] <JesseH> Yep, doing things normally are for normal/average people. ^_^
[10:44:27] <kimundi> Amaranth: I see Rust as the salvation that saves me from needing to learn C++ in that regard ;=
[10:44:27] <JesseH> As long as that isnt an excuse for everything, it should work :/
[10:44:34] <kimundi> ;)*
[10:44:52] <Amaranth> kimundi: You should learn C++ anyway, it is awesome
[10:45:12] <mindcat> Amaranth: NullPointerException
[10:45:13] <JesseH> Blah :P
[10:45:15] <mindcat> :P
[10:45:21] <Amaranth> mindcat: That's Java
[10:45:26] <dbaupp> mindcat: segfault
[10:45:31] <kimundi> I'll wait for the book "C++ for Rust programmers" :P
[10:45:31] <Amaranth> With C++ it's SIGSEGV
[10:45:36] <dbaupp> (if you're lucky)
[10:46:31] <mindcat> when I learning C, I always got "segfault" "core dumped" :(
[10:46:39] <JesseH> I'm afraid to even begin to look if I can use Rust for game development yet. 
[10:46:44] <Amaranth> And then you'll go and compile your program again but turn on the address sanitizer in clang this time and when you run it you'll see exactly where you screwed up
[10:46:55] <Amaranth> And that's if clang didn't tell you at compile time with a warning
[10:47:12] <kimundi> (In all seriously, Using Rust actually taught me many things that would probably make it easy for me now to start learning C++)
[10:47:38] <Amaranth> The only thing that worries be about game development being viable in rust is the overhead of calling out to C
[10:48:00] <kimundi> JesseH: Well, there is a glfw binding, and opengl loader, and a stable-enough language for smaller things.
[10:49:14] <JesseH> Too much headaches already, I need to wait until I have more time.
[10:49:16] <dbaupp> JesseH: there's a *lot* of people experimenting with rust for game dev
[10:49:35] <Amaranth> Part of that was Go silliness that they can improve on but part of it was because of segmented stacks which afaik is the main source of overhead with rust too
[10:49:37] <JesseH> I am too busy productively procrastinating with Khan Academy. :|
[10:49:46] <kimundi> Amaranth: The only overhead for calling out to C in Rust is 1.) Making sure that there is enough stack space (no problem per default on x64 because it uses big task stacks) 2.) Some overhead on writing safe adapters for certain things, though that's highly situational.
[10:49:58] <JesseH> dbaupp, Is there a central hub/site for this? I need to keep up with this sort of thing.
[10:50:02] <dbaupp> JesseH: talk to bjz, sebcrozet and/or jeaye if you're interested (they're the big players)
[10:50:22] <dbaupp> JesseH: #rust, and /r/rust on reddit, basically.
[10:50:47] <JesseH> Is reddit like 4chan, or have I missed my generations contribution to the world?
[10:51:02] <Amaranth> Some parts of reddit are like 4chan
[10:51:04] <Amaranth> Some are amazing
[10:51:05] <dbaupp> um; parts are, but /r/rust is nice :)
[10:51:12] <mindcat> http://www.reddit.com/r/rust/
[10:51:36] <JesseH> I feel like I will see a lot of pictures of cats, and LoL players arguing. :/
[10:51:42] * JesseH clicks to see what is up
[10:52:10] <dbaupp> reddit is designed to be able to keep things separated, fortunately
[10:52:50] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:52:51] <JesseH> Anyone in the Middle Georgia area want to start a rust meetup? :P
[10:53:05] <kimundi> JesseH: reddit is, in principle, a news aggregator: People submit links or write short posts, and people discuss below it in comments. Both comments and submissions get up/down voted by the users. The twist is that there are a bazillion sub-reddits, with own communities/ own subreddit style, nd own rules for what get's posted
[10:53:44] <JesseH> I saw a video recently about how its so perfect and all. 
[10:54:12] <JesseH> I figure it is good for less technical news? 
[10:54:24] * JesseH gazes at his screen, searching for patterns
[10:54:53] <JesseH> http://www.reddit.com/r/rust/comments/1lhnxw/3d_graphics_in_rust/
[10:54:56] <Amaranth> JesseH: Depends on what subreddits you subscribe to
[10:55:13] <mindcat> why std::io::Reader read somethings, then write to a fixed vector? can I use std::rt::io::mem::MemReader for "unlimited" buffer?
[10:56:09] <dbaupp> "note: /usr/bin/ld: final link failed: No space left on device" whoops
[10:56:32] <mindcat> dbaupp: :P
[10:56:41] <kimundi> Small selection: /r/pics is for nice pictures, /r/doctorwho is a Doctor Who fan fan community, In /r/til people write about interesting facts of life they learned that day, /r/askscience has actualy scientist from different disciplines that answer questions, /r/worldnews are the actual worldnews etc
[10:56:42] <JesseH> Forgot to check my rust build...its been waiting for me to type root password for hours.
[10:57:02] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:57:05] <Amaranth> /r/programming for fights with hacker news
[10:57:13] <JesseH> Sounds horrible
[10:57:37] <Amaranth> That's kind of a joke :P
[10:57:45] <kimundi>  /r/gamedev for game deveopers
[10:57:52] <JesseH> Havent watched doctor who since the robot dudes who kept saying exterminate
[10:58:06] <JesseH> Okay, I shall subscribe to gamedev and rust
[10:58:08] <mindcat> JesseH: then you forgot your root password now? :P
[10:58:08] *** Quits: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com) (Connection reset by peer)
[10:58:16] <Amaranth> JesseH: Uh, I suspect they've been doing that since before you were born :D
[10:58:40] <Amaranth> Oh yeah /r/gamedev is pretty cool
[10:58:46] <JesseH> mindcat, nah, its my phone number concatenated with my birth year, in hex
[10:59:12] <kimundi> The main problem is that bigger communities have a tendency to get uncontrollable.
[10:59:29] <JesseH> Amaranth, Oh yeah, I forgot that show was old as hell.
[11:00:08] <JesseH> Faster build than I though. Good stuff
[11:00:27] <mindcat> JesseH: I think google can found your secret :P
[11:00:27] <JesseH> I think I'm going to marry mozilla
[11:00:52] <JesseH> mindcat, You never know. :P I've always wanted to create a tool for internet stalking.
[11:00:55] <JesseH> I might do that.
[11:01:12] * dbaupp isn't sure it's legal to marry corporations anywhere in the world
[11:01:46] <JesseH> dbaupp, It will be one day, and then my true love and I will be one.
[11:02:11] <kimundi> There are really all imaginable facets of community behaviors encapsulated in a subreddit somewhere. There are incredible nice subreddits with high user counts, there are subreddits whose mere reason of existence is to troll each other, there are subreddits that just exists as a meta list for other subreddits, etc...
[11:02:30] <JesseH> Haven't seen someone use the word encapsulated in a sentence in so long.
[11:02:33] <kimundi> Anyway... this is not a reddit channel, I should stop :P
[11:02:35] <JesseH> Too much internet for today ._.
[11:02:39] <kimundi> haha
[11:02:52] * mindcat 0w0
[11:03:05] <JesseH> I have no idea what that is supposed to be :D
[11:03:21] *** Joins: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com)
[11:03:39] <kimundi> Haha I just realized, a reddit irc channel doesn't make much sense, but of course there is a irc subreddit: http://www.reddit.com/r/irc
[11:04:09] <JesseH> I wonder how good Rust will look good on someones resume
[11:04:22] <JesseH> I am sleep, I should stop typing.
[11:04:33] <JesseH> Take the second good out of that sentence. ^_^
[11:05:11] <kimundi> JesseH: Assuming it doesn't die a sudden death for some reason, I'd imagine it will look good in a few more years. Of course, I have no basis for this assumption, so... :P
[11:05:39] <JesseH> Once mozilla starts hiring candidates without degrees ^^
[11:05:51] <JesseH> But by then, I shall have my degree...muwahaha
[11:06:04] <dbaupp> kimundi: we're all just hoping that :P
[11:06:32] <JesseH> I think the best thing to do, to speed things up, is begin using Rust in real world applications. Which I am sure a lot of you are already doing.
[11:06:50] *** Joins: fyolnish (fyolnish@moz-DDBA956E.panda-world.ne.jp)
[11:07:02] <JesseH> Make a web framework....and everyone will be over it :|
[11:07:07] <JesseH> all over it*
[11:08:18] <JesseH> I can't remember that one rust web framework I looked at.
[11:08:20] <JesseH> hmm
[11:08:30] *** Joins: mrordinaire (Mibbit@1A659656.A607747.FD383126.IP)
[11:08:52] <mrordinaire> hi
[11:08:55] <JesseH> hi
[11:09:13] <dbaupp> JesseH: the author of https://github.com/chris-morgan/rust-http has plans for a framework
[11:09:14] <mrordinaire> is there anyone investigating why rusti segfaults?
[11:10:07] <mrordinaire> JesseH: hi :)
[11:10:11] <dbaupp> mrordinaire: probably not
[11:11:22] <JesseH> Step 1 for Rust World Domination : Create an issue in every github repository stating "Rewrite in Rust"
[11:11:42] <mrordinaire> JesseH: I like that :)
[11:11:49] <JesseH> ^^
[11:12:22] <JesseH> Okay, you guys have tempted me, with success. What shall I write today with Rust? 
[11:12:25] * JesseH considers
[11:12:32] <dbaupp> JesseH: you can start opening issues here: https://github.com/mozilla/servo/
[11:12:41] <dbaupp> :P
[11:12:53] <JesseH> :P
[11:12:57] <dbaupp> I heard https://github.com/mozilla/rust/ could do with a rust rewrite too :P
[11:13:20] <JesseH> hue
[11:14:05] <JesseH> I will see how I can contribute once I learn a bit more.
[11:14:46] *** Joins: PsenFilip (PsenFilip@32053F8E.D2316889.368B8D1A.IP)
[11:14:49] <mrordinaire> JesseH: btw, I'm working on a rust regexp engine using the VM approach
[11:15:03] <JesseH> link so I may star please :P
[11:15:08] <JesseH> if you have it in a repo
[11:15:14] <PsenFilip> Hello all
[11:15:19] <mrordinaire> JesseH: github.com/mrordinaire/rust-re
[11:15:22] <JesseH> Hello PsenFilip 
[11:15:46] *** Quits: fyolnish (fyolnish@moz-DDBA956E.panda-world.ne.jp) (Ping timeout)
[11:15:55] *** Joins: robo (Mibbit@moz-7DA794C9.nitt.edu)
[11:16:03] *** Joins: fyolnish (fyolnish@moz-8D060746.openmobile.ne.jp)
[11:16:22] <PsenFilip> Having my first look at Rust
[11:16:28] <JesseH> Awesome
[11:20:29] <JesseH> http://hastebin.com/geseyifida.rs
[11:20:35] <JesseH> My code is broken, and it can't get up.
[11:20:36] <PsenFilip> Jesseh, I really like my first impressions.  (mostly c/c++ background here)
[11:20:55] <JesseH> Good, I hope you stay.
[11:21:02] <dbaupp> rusti: println("hello?");
[11:21:03] -rusti- hello?
[11:21:03] -rusti- ()
[11:22:43] <JesseH> Still can't see my error :D
[11:23:01] <PsenFilip> there isn't any?
[11:23:04] <kimundi> JesseH: Neither can I ? What IS the rror message?
[11:23:30] <JesseH> http://hastebin.com/sokukufuha.sm
[11:23:56] <kimundi> JesseH: Aaah.
[11:24:12] <klutzy> JesseH: you have multiple std modules due to version change
[11:24:14] <kimundi> JesseH: You haven an old libstd in the build dir
[11:24:30] * JesseH barfs
[11:24:36] <JesseH> How do I easily fix this? :D
[11:24:36] <kimundi> JesseH: And we haven'T cleaned the versioning story up enough so that it picks the right one
[11:24:56] <kimundi> rm /usr/local/lib/rustc/i686-unknown-linux-gnu/lib/libstd-4782a756585a81-0.6.so
[11:25:31] <PsenFilip> So I already have a quickie Q: how is the (executable) distribution side of things at the moment? I managed to successf. deploy a simple app pkging dependencies with the final exec. Haven't found any info on it
[11:25:35] <JesseH> Thank you, it works now.
[11:25:42] <kimundi> Wit, the other is 0.7 - Did you build from source or are you using 0.7 ?
[11:25:46] <kimundi> Wait*
[11:26:00] <klutzy> I guess he builded 0.7
[11:26:00] <dbaupp> JesseH: the easiest way to kill it properly would be just to remove that whole directory (i.e. /usr/local/lib/rustc) and `make install` again
[11:26:31] <dbaupp> JesseH: (e.g. if you use the `extra` crate at any point you'll need to do the same rm-ing)
[11:27:12] <kimundi> PsenFilip: rustpkg is currently in deveopment. You will be able to package one or more rust or foreign libraries in a package on, eg, a github repo, and use that directly. It will work similary to go's package manger, except usable in a multi-version environment
[11:27:35] <kimundi> 'make uninstal'l also exists
[11:27:48] <Amaranth> kimundi: go's tools are more about automatically downloading dependencies and compiling
[11:27:52] <dbaupp> PsenFilip: btw, the ecosystem is so new and unstable that distributing apps is still a foreign concept
[11:28:02] <dbaupp> Amaranth: rustpkg will do that too
[11:28:25] <Amaranth> Comparing rustpkg to go's tools makes it sound like that is _all_ it will do
[11:28:53] <dbaupp> ah, I see :)
[11:29:07] <PsenFilip> dbaupp: Yeah I know that is a weird question to ask at the moment. Just wondering what it would look like in the future. I got it, kimundi
[11:29:15] <JesseH> One positive I'm seeing about rust, is it feels more comfortable to type general programs up, than with other languages
[11:29:29] *** Quits: fyolnish (fyolnish@moz-8D060746.openmobile.ne.jp) (Client exited)
[11:29:34] <kimundi> rustpkg will likely grow the ability to generate installer and such, but that's approximately three steps removed from where we are right now development wise :P
[11:30:00] <dbaupp> kimundi: only three steps? how long are your legs?
[11:31:18] <kimundi> well,  major design milestone steps, and for very high values of 'three' ;)
[11:32:03] <dbaupp> heh
[11:33:42] *** Joins: CanhtTak (CanhTak@moz-C058E60A.wl.t.ulaval.ca)
[11:33:44] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[11:33:47] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[11:36:06] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[11:36:06] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/cByWog
[11:36:06] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[11:36:15] *** Joins: six600110 (six600110@moz-2FA48202.neo.res.rr.com)
[11:38:11] *** Joins: lbergstrom (Adium@moz-7D905691.avante-wifi.mozilla.hq)
[11:39:51] *** Quits: lbergstrom (Adium@moz-7D905691.avante-wifi.mozilla.hq) (Ping timeout)
[11:40:47] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Quit: Leaving...)
[11:41:06] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[11:41:06] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/TDDJbg
[11:41:06] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[11:41:08] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[11:41:08] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/e0Ho7Q
[11:41:08] <ghrust> 13rust/06auto 144fd1e31 15Brian Anderson: rustc: Fix cstack lint for default methods. Closes #8753
[11:41:08] <ghrust> 13rust/06auto 14afef4a7 15bors: auto merge of #8796 : brson/rust/cstack, r=catamorphism
[11:41:08] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[11:42:23] *** Parts: robo (Mibbit@moz-7DA794C9.nitt.edu) ()
[11:43:51] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[11:50:01] *** jorendorff_away is now known as jorendorff
[11:55:56] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:57:29] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[12:00:08] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:01:35] *** jorendorff is now known as jorendorff_away
[12:01:40] *** Joins: Cs (Sohbet@15B4007.F2966759.C687B15D.IP)
[12:02:38] *** Quits: Cs (Sohbet@15B4007.F2966759.C687B15D.IP) (Quit: )
[12:05:02] *** Quits: CanhtTak (CanhTak@moz-C058E60A.wl.t.ulaval.ca) (Quit: CanhtTak)
[12:07:27] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[12:13:26] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Input/output error)
[12:14:15] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[12:16:07] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[12:16:07] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14afef4a7 to 145bb8aef: 02http://git.io/N3iJvQ
[12:16:07] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[12:16:08] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[12:16:08] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/iipG4A
[12:16:08] <ghrust> 13rust/06auto 14ad43613 15Tim Chevalier: rustpkg: Pass command-line arguments to rustc...
[12:16:08] <ghrust> 13rust/06auto 14d14bd08 15bors: auto merge of #9107 : catamorphism/rust/rustpkg-command-line-flags, r=brson...
[12:16:08] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[12:18:09] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[12:23:19] *** Joins: msingle (Thunderbir@99C2CA1C.3D69E65D.A6DC652B.IP)
[12:28:24] *** Joins: alex__ (alex@moz-7421D6C9.mc.videotron.ca)
[12:29:16] *** Quits: alex_abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[12:32:20] <kimundi> Anyone using thunderbird with the rust mailing list here?
[12:33:10] <SimonSapin> kimundi: yes
[12:33:13] <dbaupp> I use it as my mail client (incl. for the ml), if that's what you're asking
[12:33:48] <kimundi> I'm allways confused which of the three answer options I have to choose to get a proper mail to the mailing list send
[12:34:32] <dbaupp> reply-list?
[12:35:29] <SimonSapin> that, or reply-all
[12:35:30] <Amaranth> Wait, if I have a project that ends up linking to foo 0.1 and foo 0.2 their symbols won't clash?
[12:35:49] <SimonSapin> itâ€™s more of a convention, not sure which one rust-dev prefers
[12:35:50] <dbaupp> Amaranth: that's the design, I believe
[12:36:12] <Amaranth> That's neat
[12:36:16] <Amaranth> Although it has its downsides
[12:36:35] <kimundi> what's the difference between reply-list and reply-all ?
[12:36:49] <dbaupp> Amaranth: https://botbot.me/mozilla/rust/msg/3792753/ (from a while ago)
[12:37:05] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[12:37:26] <kimundi> Amaranth: what downsides?
[12:37:30] <SimonSapin> kimundi: reply-all adds people involved in CC
[12:37:38] <Amaranth> library A links to library C 0.1 and exposes its types, library B links to library C 0.2 and exposes its types
[12:37:44] <SimonSapin> which is useful if theyâ€™re not subscribed to the list
[12:38:00] <SimonSapin> or if they filter on that
[12:38:00] <Amaranth> I mean this is pretty much always going to be broken
[12:38:07] <kimundi> SimonSapin: So, they would get the mail twice, once per mailing list and once privately?
[12:38:12] <SimonSapin> yes
[12:38:26] <Amaranth> But in C/C++ you could get away with it if C 0.1 and C 0.2 had the same ABI
[12:38:32] <SimonSapin> some clients de-duplicate in that case, but thunderbird doesnâ€™t
[12:38:47] *** Joins: lbergstrom (Adium@moz-7D905691.avante-wifi.mozilla.hq)
[12:40:28] *** Quits: lbergstrom (Adium@moz-7D905691.avante-wifi.mozilla.hq) (Ping timeout)
[12:40:29] <flaper87> bblum: ping
[12:40:40] <kimundi> Someone remind me again, are you supposed to replay at the top or the button of an citation of the mail you're answering? I'm writing mails way to infrequently, so I'm always unsure....
[12:40:51] <flaper87> kimundi: bottom
[12:42:24] <Amaranth> Oh, it does versioned symbols so you can do glibc-like setups, nice
[12:43:14] <Amaranth> Well glibc's is magic so I'm not sure if it's exactly the same but yeah
[12:43:32] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[12:43:42] <dbaupp> Amaranth: there's also https://github.com/mozilla/rust/wiki/Doc-crate-hashes, but I don't think it'll add much
[12:44:00] <dbaupp> acrichto: does https://github.com/mozilla/rust/wiki/Doc-crate-hashes need to be updated for your symbol changes?
[12:44:03] <Amaranth> I think for now I'll just pretend I don't know anything about that part
[12:44:18] <Amaranth> Since I don't think I'll have library inheritance chains to worry about
[12:44:27] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[12:44:39] <cmr> Amaranth: why would library A and B exposing different versions of C be broken?
[12:45:02] <cmr> Those symbols would be versioned with A and B's hash, not C's
[12:45:17] <Amaranth> cmr: Not broken in the sense that it fails to compile or run
[12:45:31] <Amaranth> But you couldn't give A's result to B since they're different types
[12:45:42] <cmr> Ah, yes.
[12:46:00] <cmr> That's just normal type safety though
[12:46:40] *** Quits: msingle (Thunderbir@99C2CA1C.3D69E65D.A6DC652B.IP) (Ping timeout)
[12:47:37] <Amaranth> Yeah I guess even if library C was the same version in both you wouldn't be able to do that, would you?
[12:47:56] <Amaranth> Because the type from C that A exposes would still count as a different type than the one B exposes
[12:47:57] <cmr> nope, unless they are returning C's types, not wrapping them.
[12:48:34] <cmr> If they both return C's types, and they link to different versions of C... not sure what would happen.
[12:49:27] *** Joins: maxli (maxli@moz-87510978.net.uwaterloo.ca)
[12:50:25] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[12:50:55] *** Quits: maxli (maxli@moz-87510978.net.uwaterloo.ca) (Connection reset by peer)
[12:50:58] *** Joins: maxli1 (maxli@moz-87510978.net.uwaterloo.ca)
[12:51:00] <Amaranth> Alright so after going through the tutorial I think I missed something: what is ' used for? The tutorial mentions 'static a few times and from code examples I've seen that it isn't only used on static
[12:51:11] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[12:51:15] <cmr> It's the lifetime syntax.
[12:51:22] <cmr> It explicitly names the lifetime of a borrowed pointer.
[12:51:36] *** maxli1 is now known as maxli
[12:51:52] <Amaranth> OHHH
[12:51:56] <Amaranth> That's really cool
[12:53:37] <Amaranth> And I think the that's the last bit I needed to know in order to read rust code and know what is happening
[12:54:03] <dbaupp> :)
[12:54:33] <dbaupp> cmr: I'm hoping that'll avoid falling asleep for long enough to get that bench-y stuff on github in the next hour or so
[12:54:52] <dbaupp> cmr: (well, what I've got of it)
[12:55:43] <cmr> dbaupp: cool, super thanks!
[12:56:12] *** Quits: maxli (maxli@moz-87510978.net.uwaterloo.ca) (Quit: Leaving.)
[12:56:17] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[12:57:10] <dbaupp> cmr: it's not gonna be calling grease-bench yet
[12:57:19] <dbaupp> and the git2-rs interface will come later
[12:57:25] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[12:59:06] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:59:15] * flaper87 didn't know about git2-rs
[13:00:26] <dbaupp> it's currently very broken
[13:00:40] * dbaupp is having to overhaul the entire thing because of the extern fn changes
[13:03:17] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[13:07:06] <Seldaek> oh I thought for a second this was a libgit rewrite in rust :p
[13:07:12] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[13:07:16] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[13:07:19] *** Joins: aeqwa (aeqwa@moz-88A8BC36.dsl.tropolys.de)
[13:08:22] <dbaupp> Seldaek: is that the sound of a volunteer? :P
[13:08:42] <Seldaek> haha
[13:08:54] <Seldaek> not quite no
[13:08:56] *** jorendorff_away is now known as jorendorff
[13:13:24] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[13:21:01] <kimundi> SimonSapin: I send an email response to your Encoding proposal, but it awaits moderation. You can also read the mail here if you want: https://gist.github.com/Kimundi/30ce1df97dce8d987771
[13:21:06] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[13:21:07] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/iipG4A
[13:21:07] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[13:23:27] <dbaupp> sanxiyn: ping
[13:26:08] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[13:26:08] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/wRWOlw
[13:26:08] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[13:26:10] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[13:26:10] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/GXe1gA
[13:26:10] <ghrust> 13rust/06auto 14382cb50 15Michael Woerister: debuginfo: Wrapped namespace facilities of llvm::DIBuilder
[13:26:10] <ghrust> 13rust/06auto 1493d6328 15Michael Woerister: debuginfo: Support for namespaces (functions only)
[13:26:11] <ghrust> 13rust/06auto 149ab14a9 15Michael Woerister: debuginfo: Support for namespaces for types
[13:26:13] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[13:26:37] <SimonSapin> kimundi: are you not subscribed to the list?
[13:27:18] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[13:27:55] <dbaupp> kimundi: (btw, "associated" :) )
[13:27:58] <kimundi> I'm subscribed, but not registered I think?
[13:28:25] <kimundi> dbaupp: Too late :P
[13:30:00] <SimonSapin> kimundi: Iâ€™ll respond to the list, but I donâ€™t know what Higher Kinded means
[13:30:18] <kimundi> SimonSapin: Ah, it's basically type parameters that cna have type parameters
[13:30:46] <kimundi> fn foo<T>() -> T<uint, ~str>
[13:30:53] <kimundi> Or so
[13:31:19] <kimundi> Hm, I guess explicit hypothetical rust syntax would be something like
[13:31:19] <SimonSapin> Decoder.feed() and .flush() lacking self is a mistake
[13:31:31] <kimundi> fn foo<T<?, ?>>() -> T<uint, ~str>
[13:32:34] <kimundi> SimonSapin: Thought so, but wanted to just note everything, sorry. :)
[13:32:52] *** Quits: aeqwa (aeqwa@moz-88A8BC36.dsl.tropolys.de) (Quit: Lost terminal)
[13:32:59] *** Joins: aeqwa (aeqwa@moz-88A8BC36.dsl.tropolys.de)
[13:33:58] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[13:36:30] <kimundi> HKT, associated types, nice way to give Self type hint for associated functions... All nice to have features on their own, but somehow I get the feeling At least one is needed to make the Encoding traits nice to use.
[13:36:51] <kimundi> (... I sure used nice a lot in that sentence.)
[13:37:04] <dbaupp> nice is a nice word
[13:37:18] <kimundi> indeed
[13:38:32] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[13:39:24] *** Joins: lbergstrom (Adium@moz-7D905691.avante-wifi.mozilla.hq)
[13:41:04] *** Quits: lbergstrom (Adium@moz-7D905691.avante-wifi.mozilla.hq) (Ping timeout)
[13:41:15] <SimonSapin> well, do want encodings before we have associated types?
[13:41:27] <doomlord> fn foo<T,X,Y>(a:T<X>, b:T<X>) -> T<Y>  .. that sort of thing.. would rust need disambiguation hence you writing T<?,?>?
[13:42:54] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[13:43:08] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[13:43:28] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[13:43:30] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[13:43:32] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Input/output error)
[13:43:35] <kimundi> doomlord: I only have a vague idea how higher kinded types work exactly. Just enough to realized that they are what are missing for the problems I had. For my short example: I figured that any higher kinded type syntax we get would not just magically allow tacking type parameters on other type paramters, we'd likely have some kind of annotation for the "holes to fill in"
[13:43:35] <dbaupp> SimonSapin: i think waiting for associated types would push things back a long time
[13:43:41] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[13:43:51] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[13:44:09] <kimundi> The problem is we might end up with a ugly api that works around certain language feutures not existing yet
[13:44:29] <doomlord> interestingly , i never realised C++ can actually do this - i'd never used it
[13:44:31] <kimundi> But at the same time, we can't wait till everything is perfect
[13:44:48] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[13:45:19] <doomlord> i get the impression rust's inbuilt pointer system avoids the need for so much power in the type system (e.g. C++ very few 'inbuilt' features, but a very powerful type system to let you implement smartpointers, vectors etc..)
[13:45:41] *** Joins: lbergstrom (Adium@moz-7D905691.avante-wifi.mozilla.hq)
[13:45:45] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[13:45:46] <kimundi> It actually increases the need somewhat
[13:46:16] <doomlord> perhaps hkts' couold smooth over some of the situations with many pointer types
[13:46:18] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[13:46:23] <dbaupp> yes
[13:46:32] <kimundi> One poroblem I had here was that I endded up with a <'self> type parameter that I couldn't handle properly because of missing higher kinded types
[13:46:51] * dbaupp wishes we could just have real monads already
[13:47:12] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[13:47:32] <doomlord> i'm in 2 minds here, should i play with haskell some more or just get on with enjoying rust 
[13:47:33] <kimundi> trait Encoding<D: Decoder> { fn make_decoder<'self>() -> D<'self> } // <- My problem
[13:48:13] <kimundi> trait Encoding<D: Decoder> { fn make_decoder<'self>(&'self mut ~str) -> D<'self> }
[13:48:14] <SimonSapin> kimundi: trait objects are another work around
[13:48:33] <doomlord> am i imagining this  , i think rust is quite a bit better with const-ness, how that propogates..
[13:48:34] *** Joins: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com)
[13:48:52] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Quit: Lost terminal)
[13:48:55] <doomlord> .. in C++ you often have to write 2 versions of things (const, non const) , i dont think thats so much the case in rust
[13:49:07] <dbaupp> having it by default makes it much nicer
[13:49:16] <kimundi> SimonSapin: Right, but only because they allow you to say "screw the actual types, I work around it dynamically!" :P Which I'd like something like an high performance encoding api to avoid.
[13:49:42] <SimonSapin> but actually, the use case I forgot to mention in my first email is when you donâ€™t know the encoding at compile time and use a "get encoding from label" function that takes a string and returns a &'static Encoding trait object
[13:49:46] <dbaupp> doomlord: play with haskell & enjoy rust
[13:49:57] <dbaupp> doomlord: just do both :P
[13:50:02] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[13:50:07] <kimundi> doomlord: well, we often have three versions for certain things: T, &T and &mut T
[13:50:28] *** Quits: alex__ (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[13:50:28] <doomlord> T and &T is to be expected i think
[13:50:35] <SimonSapin> kimundi: if you do know the encoding at compile time, just use the type that implements Decoder
[13:51:06] <kimundi> SimonSapin: Ah. But trait object would still work for that then. :)
[13:51:59] <SimonSapin> which that?
[13:52:02] *** Joins: alex__ (alex@moz-7421D6C9.mc.videotron.ca)
[13:52:04] <kimundi> SimonSapin: Do you just mean "receive encoding string, dispatch to right impl" ?
[13:52:43] <SimonSapin> yeah, typically the label comes from a Content-Type HTTP header
[13:53:15] <kimundi> In any case you'd have an concrete type implementing the concrete Encoding somewhere, and need to switch on the encoding string, no?
[13:53:41] <SimonSapin> In some cases like Servo, yes
[13:53:47] <kimundi> fn get_encoder(&str) -> ~Encoder // could still be written
[13:54:00] *** Quits: aeqwa (aeqwa@moz-88A8BC36.dsl.tropolys.de) (Quit: Lost terminal)
[13:54:11] <Amaranth> aww, github doesn't say "hardcore forking action" when you fork something anymore
[13:54:21] <kimundi> aww
[13:54:56] <kimundi> No wait, I get what you mean
[13:55:18] <doomlord> if you have an accountname "luke", maybe it could tell you "use the fork luke"
[13:55:24] <SimonSapin> if you know that a particular format always uses UTF-8, you can use UTF8Decoder without the trait
[13:55:26] <kimundi> You couldn't have a new_decoder on a ~Encoding that is implemented with generic types... hmm
[13:55:56] <SimonSapin> generic on what?
[13:55:58] <kimundi> I think that is just part of the general impedance mismatch betwen generic code and trait objects...
[13:56:06] <kimundi> Encoder<D: Decoder>
[13:56:11] <SimonSapin> ugh
[13:56:18] <kimundi> could have a function returning ~Encoder
[13:56:21] <kimundi> couldn't
[13:57:18] <kimundi> SimonSapin: Well, you can't use Utf8Decoder without the trait
[13:57:33] <kimundi> Because Utf8Decoder only implements functions of the trait
[13:57:35] <dbaupp> doomlord: that seems like it would happen for exactly one account :P
[13:58:03] <doomlord> ok luke*
[13:58:05] <SimonSapin> ok, "use the trait", but without trait objects
[13:58:30] <kimundi> Right
[13:58:52] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[13:59:18] <Amaranth> hehe, funny watching the types here change from .NET format to Java format as you guys say them
[13:59:22] <kimundi> In my mind, the Encoding trait from your proposal exists as central hub for giving you the Decoder and Encoder type
[14:00:26] <kimundi> But if it's just for giving you'r the assoziated trait objects, so that you can get them dynamically... That's different than I though it would be used.
[14:02:20] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:06:01] <SimonSapin> or we could just get rid en Encoding entirely
[14:06:07] <kimundi> SimonSapin: You still can have trait objects with a generic Encoding trait though. rather than fn foo(&str) -> ~Encoding; you'd have fn foo(&str) -> (~Decoder, ~Encoder)
[14:06:20] <SimonSapin> I was about to say that :)
[14:06:32] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:06:54] <SimonSapin> well
[14:07:07] <SimonSapin> youâ€™d want the type, rather than an instance
[14:07:16] <kimundi> I think an Encoding trait/type for grouping decoder/encoder construction and default methods together is nice.
[14:07:58] <SimonSapin> and itâ€™s useful to share algorithms between encodings, see SingleByte in rust-encoding
[14:08:09] <kimundi> "youâ€™d want the type, rather than an instance"? Sorry, I don't understand that one :)
[14:09:38] <kimundi> Well, sharing algorithms would just be a case of sorting them in a nice module hierachy and making common functions visible for the right things.
[14:11:36] <SimonSapin> with Decoder as defined in the email, youâ€™re expected to make a new instance for every input
[14:12:04] <SimonSapin> and you shouldnâ€™t have to repeat the string lookup to get a new instance
[14:12:49] *** Quits: PsenFilip (PsenFilip@32053F8E.D2316889.368B8D1A.IP) (Quit: Leaving)
[14:13:40] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[14:15:00] <kimundi> If we make Encoding generic like in my code, we'd need a small helper trait that allows you to dynamically create new instances like in your Encoding trait
[14:16:14] <SimonSapin> I donâ€™t understand how it would work to make it generic
[14:16:21] *** Quits: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Quit: Leaving.)
[14:16:35] <SimonSapin> the point of Encoding it to give you encoders and decoders
[14:16:48] <SimonSapin> with type parameters youâ€™d need to give them to it?
[14:16:49] <kimundi> Right
[14:16:52] <kimundi> No
[14:17:21] <kimundi> type parmaters are just the work around to have assoziated types in this case.
[14:17:41] <kimundi> They get infered
[14:17:49] *** Parts: lex (lex@moz-12347B81.bootp.virginia.edu) ()
[14:17:57] <SimonSapin> I donâ€™t see how that works
[14:18:00] <kimundi> https://gist.github.com/Kimundi/6522973
[14:18:24] *** Joins: pyrac (pyrac@moz-22054CAF.w83-205.abo.wanadoo.fr)
[14:19:21] <kimundi> pro: No need to wrap Decoder in a trait object. Con: No way to get a ~Encoding trait object for dynamically creating ~Decoders
[14:19:33] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Ping timeout)
[14:20:38] <kimundi> Basically, what I'm trying there is to provide the user with the right Decoder and Encoder type based on the Encoding type
[14:20:43] <kimundi> statically
[14:21:09] <kimundi> Sadly that's incopmatibel with the dynamic use case you spoke of
[14:21:41] *** Quits: nkoep (nik@moz-A80F12FA.vpn.rwth-aachen.de) (Ping timeout)
[14:21:47] <kimundi> Unless we add a second DynamicEncoding that you can use for that
[14:23:40] <kimundi> trait Encoder<D: Decoder, E: Encoder> { fn to_dynamic() -> ~DynamicEncoder; fn new_decoder() -> D }; trait DynamicEncoder{fn new_decoder -> ~Decoder }
[14:24:20] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[14:25:01] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:26:52] *** Quits: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net) (Ping timeout)
[14:28:33] <SimonSapin> if you want static dispatch, donâ€™t use Encoding at all
[14:30:13] <kimundi> But then you have to explicitly look for and use the Utf8Decoder and Utf8Encoder, and don't get the convenience decoder(&[u8]) -> &str methods ... Granted the last one could just be a default method on those two types
[14:30:46] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:30:57] <SimonSapin> yes, and yes
[14:31:05] <kimundi> Okay, I get the advantage, I get how to use them statically, but I think the name Encoding is misleading them
[14:31:09] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[14:31:09] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/GXe1gA
[14:31:09] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[14:31:30] <kimundi> DynamicEncodingFactory sounds more correct :P
[14:31:42] <SimonSapin> lolwut?
[14:32:26] <kimundi> What I mean is: I had assumed that Encoding is the big center pies of the Encoding api, but after hearing your explaination, it's actually more a little helper fro a specific use case
[14:32:38] <kimundi> for*
[14:32:41] <SimonSapin> hum, ok
[14:33:20] <SimonSapin> then move it later in the future docs, no need to make up painful names
[14:33:46] <kimundi> (That name was only half serious)
[14:34:12] <jorendorff> so angry i'm in a coffee shop where i can't watch https://air.mozilla.org/intern-presentations-reed/
[14:34:49] <SimonSapin> I still donâ€™t see your email in the list :/
[14:35:03] *** Joins: jgilbert (jgilbert@40BD3B76.2AD327F9.973C8D27.IP)
[14:35:11] <kimundi> SimonSapin: It takes a while... up to a day :P
[14:35:42] <SimonSapin> but why do you need to be moderated any more than I?
[14:36:07] <kimundi> Hell if I know
[14:36:24] <kimundi> SimonSapin: Anyway, there is nothing additional there that isn't in https://gist.github.com/Kimundi/30ce1df97dce8d987771, though
[14:36:49] <kimundi> It's literally just that.
[14:36:52] *** Joins: nkoep (nik@moz-2C4BD527.pool.mediaways.net)
[14:41:03] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[14:42:52] <SimonSapin> yeah, but Iâ€™d like to respond on the list
[14:43:30] <olsonjeffery> SimonSapin: that's a great post, by the way. thanks for writing it up.
[14:44:08] <olsonjeffery> lifthrasiir mentioned being able to (eventually) do the work for rust-encodings, but you might want to go ahead and do a PR for him
[14:44:16] <olsonjeffery> so we can get an idea of how well it works in practice
[14:44:29] <olsonjeffery> and work out the details there, then make a PR to rust to bring the traits over
[14:45:00] <SimonSapin> I had hoped to get consensus and what we want to support or not before doing the work :p
[14:45:13] <SimonSapin> s/and/on/
[14:45:32] <olsonjeffery> i think the answer is "nothing!", for now
[14:45:58] <olsonjeffery> or, rather.. see about moving the impls for from_buf_len() (std::str's utf8 converter at the lowest level)
[14:46:07] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[14:46:07] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/N36J8w
[14:46:07] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[14:46:08] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[14:46:08] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/3sQE0w
[14:46:08] <ghrust> 13rust/06auto 148f31377 15Brandon Sanderson: Update for_expr docs.
[14:46:08] <ghrust> 13rust/06auto 1449eb7bd 15bors: auto merge of #9039 : singingboyo/rust/update-for-expr-docs, r=thestinger...
[14:46:08] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[14:46:55] <olsonjeffery> and perhaps the same for the utf16 stuff
[14:47:30] <olsonjeffery> add the condition raising.. and the users in std::str would just not handle it or fail with some other msg
[14:47:57] *** Joins: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net)
[14:48:37] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:51:06] *** Quits: jaen (jaen@FB01674D.56B727FE.4B52F012.IP) (Ping timeout)
[14:51:09] *** Joins: alex_abreu (alex@moz-7421D6C9.mc.videotron.ca)
[14:51:13] *** Quits: alex__ (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[14:51:19] *** Joins: jstevans (Instantbir@6913ED59.2E735A23.DDE5D3F6.IP)
[14:51:42] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[14:57:23] *** flaper87 is now known as flaper87|afk
[14:59:09] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[15:00:47] *** Quits: bent (chatzilla@FC9FC902.ED95B50E.EDDC15BA.IP) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[15:01:11] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[15:02:05] <Amaranth> Would char foo[32] in C be foo: [c_char, ..32] in rust?
[15:02:28] <strcat> yes
[15:02:38] <klutzy> or [u8, ..32] if you intended it
[15:02:47] <klutzy> or i8 :p
[15:03:06] <Amaranth> Well I'm doing FFI stuff so c_char would be the preferred way, right?
[15:03:15] <strcat> if the API uses c_char
[15:03:28] <strcat> but really, u8 > c_char for storing some bytes
[15:03:36] <strcat> you don't actually want them signed
[15:03:51] <klutzy> C's char is always confusing to me, and I guess you really wants bytes not chars
[15:03:54] <strcat> the sign bit likely isn't meaningful, so sign-extend, etc. are not what you want
[15:04:06] <Amaranth> Well it's a little iffy here but I guess it is meant to be treated as bytes
[15:04:48] <Amaranth> It's SDL_TextEditingEvent but they have this event just because it lets them give you a final stream of utf8 bytes instead of getting a keypress at a time
[15:04:51] <Amaranth> So yeah, u8 then
[15:05:00] <klutzy> then it's the best to use u8 in Rust and uint8_t in C :)
[15:05:18] <klutzy> or typedef unsigned char u8;
[15:05:24] <benh> I never remember what to include to get uint8_t :)
[15:05:25] <doomlord> ^^^ +1
[15:05:38] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:05:49] <klutzy> benh: yes, I actually use typedefs :p
[15:06:11] <strcat> benh: it will be the same thing as 'unsigned char' anyway
[15:06:20] <strcat> because sizeof(char) is always 1
[15:06:31] <benh> what if CHAR_BITS > 8 tho?
[15:06:41] <strcat> POSIX says CHAR_BITS is 8
[15:06:49] <strcat> C doesn't, but no one uses platforms where it's not
[15:07:14] <klutzy> C even doesn't guarantee char is signed or unsigned
[15:07:28] <strcat> yeah but you can use 'signed char' and 'unsigned char'
[15:07:30] <klutzy> it is either signed char or unsigned char, well..
[15:07:33] <klutzy> yep :)
[15:07:36] <nsf> because it's not supposed to be a number
[15:07:38] <nsf> like char in rust
[15:07:48] <benh> isn't char a separate type to both signed char and unsigned char
[15:07:52] <benh> somehow
[15:07:58] <strcat> benh: it can be either, implementation defined
[15:08:05] <strcat> nsf: well rust's char actually works now :P
[15:08:15] <nsf> it's not signed char or unsigned char, it's special indeed
[15:08:15] <strcat> before you could make invalid ones. multiply them, whatever
[15:08:29] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:08:59] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[15:09:04] *** flaper87|afk is now known as flaper87
[15:09:09] <benh> (c++ apparently lets me define all three overloads of )void f(char c) {} void f(unsigned char c) {} void f(signed char c) {} 
[15:09:36] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[15:09:45] <strcat> benh: yeah it's not a typedef
[15:09:55] <strcat> it's just equivalent to one or the other
[15:10:06] <strcat> char16_t/char32_t are also not typedefs in C++
[15:10:41] <benh> is wchar_t a typedef for one of them at least?
[15:10:41] <strcat> but are equivalent to uint_fast16_t/uint_fast32_t
[15:10:46] <strcat> benh: no
[15:10:47] <benh> huh
[15:11:01] <benh> there's too many types, i'm going back to javascript >:[
[15:11:12] <strcat> wchar_t is deprecated anyway
[15:11:49] *** Joins: bent (chatzilla@moz-6F843AD8.static.cust.telenor.com)
[15:11:52] <klutzy> In windows there is TCHAR :P
[15:12:05] <nsf> benh: try lua instead :D
[15:12:19] <klutzy> which turns into wchar_t or char depending on unicode option
[15:12:21] *** Quits: huseby (huseby@moz-633A76FB.static.cust.telenor.com) (Quit: Leaving)
[15:12:27] <benh> array indexing, the mother of all bikesheds
[15:12:40] <Amaranth> Why do you need wchar_t? Surely you're using utf8 :D
[15:13:03] <strcat> Amaranth: windows doesn't support utf-8, or really unicode at all
[15:13:04] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[15:13:05] <benh> windows api calls? :(
[15:13:05] *** jorendorff is now known as jorendorff_away
[15:13:06] <strcat> it still uses ucs2
[15:13:08] <nsf> winapi is broken in that regard
[15:13:08] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:13:09] <klutzy> Amaranth: you should look at windows' unicode api!
[15:13:12] <klutzy> they are scary
[15:13:14] <strcat> and there is some half broken attempt at utf-16
[15:13:14] <bblum> flaper87: pong
[15:13:15] <benh> heh
[15:13:15] * nsf hates unicode in winapi
[15:13:17] <Amaranth> People make windows API calls? :D
[15:13:21] <strcat> but even windows notepad is still ucs2, not utf-16
[15:13:25] <klutzy> Amaranth: I do :p
[15:13:31] <Amaranth> SDL or GTK+ do that for me and I stay far far away
[15:13:44] <benh> I don't think I've written any Windows code at all, really :(
[15:13:53] <klutzy> Amaranth: I'm even doing like this https://github.com/klutzy/win32-rust
[15:13:56] *** jorendorff_away is now known as jorendorff
[15:14:15] <Amaranth> haha
[15:14:45] <flaper87> bblum: question, if a parent task dies, does the child die as well?
[15:15:02] <flaper87> bblum: this is what confused me: https://github.com/mozilla/rust/blob/master/src/libstd/task/mod.rs#L19
[15:15:37] <bblum> flaper87: oh wow that comment is way out of date
[15:15:46] <kimundi> SimonSapin: It developed into kind of a monster, but I have a version of my Encoding code that allows both static and dynamic dispatch: https://gist.github.com/Kimundi/6525049
[15:15:52] <bblum> flaper87: please file a bug saying to remove it
[15:16:28] <bblum> flaper87: the true answer is in http://static.rust-lang.org/doc/tutorial-tasks.html#handling-task-failure
[15:17:45] <SimonSapin> kimundi: looks awfully complicated :/
[15:18:05] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[15:18:30] <flaper87> bblum: will do! I was clear about that until I read that comment. Thanks for clarifying
[15:18:35] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[15:18:59] <kimundi> SimonSapin: Half of it is because of the dummy types to get trait lookup on method calls. But look at the usage in the main function
[15:19:38] <kimundi> SimonSapin: It's also very hackish, that's true :P 
[15:20:12] *** Quits: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP) (Ping timeout)
[15:20:36] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[15:21:53] <kimundi> SimonSapin: Updated a bit with comments
[15:23:12] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[15:23:12] *** ChanServ sets mode: +ao brson brson
[15:26:09] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[15:27:17] *** Joins: CanhtTak (CanhTak@moz-C0B6DFD5.wl.t.ulaval.ca)
[15:30:05] *** Quits: lbergstrom (Adium@moz-7D905691.avante-wifi.mozilla.hq) (Quit: Leaving.)
[15:32:24] <kimundi> (SimonSapin: updated with better comments if things are still unclear)
[15:32:56] <SimonSapin> whatâ€™s wrong with trait objects for dynamic dispatch?
[15:33:20] <kimundi> Nothing, if you need them
[15:33:34] <SimonSapin> I mean, as in my proposal
[15:33:47] <kimundi> But you shouldn't use them unless neccessary because the code can be better optimized
[15:34:33] <engla> SimonSapin: yes the virtual calls can be an optimization hurdle. Maybe it doesn't matter in this case
[15:34:52] <SimonSapin> but you donâ€™t have to use trait objects in my proposal either
[15:35:09] <kimundi> SimonSapin: No, but it creates an inbalance
[15:35:09] <SimonSapin> if you know statically what encoding to use, you donâ€™t need Encoding
[15:35:22] <engla> sounds good
[15:35:29] <kimundi> SimonSapin: In your porposal, it's easier to to do slow dynamic dispatch than to do the fast static one
[15:35:34] <SimonSapin> and the .decode() method could be duplicated on Decoder for convenience
[15:36:25] <SimonSapin> is using UTF8Decoder directly really harder than UTF8.new_decoder()?
[15:36:27] *** Joins: ahal (ahal@FCCEA34F.7672369.D8E68FF6.IP)
[15:36:44] <kimundi> The last gist from make the api for using dynamic dispatch and static dispatch almost identical
[15:36:46] <strcat> why does it need to be an object?
[15:37:26] <SimonSapin> strcat: it only does when you donâ€™t know the encoding at compile time, and choose it based on eg. a Content-Type HTTP header
[15:37:34] <strcat> can't they just be functions with the same signature?
[15:37:45] <engla> strcat: the decoder is stateful so you can call .feed() multiple times
[15:38:46] <kimundi> engla: Not the decoder
[15:39:12] <brson> if anybody is running os x 10.9 this bug is high priority for 0.8: https://github.com/mozilla/rust/issues/6849
[15:40:11] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[15:40:27] <kimundi> strcat: The problem is being able to get an trait object that dynamically allows you to construct ~Decoder and ~Encoder trait objects for situations where you can't decide which encoder to use statically
[15:40:30] * Amaranth makes a note to hold off on upgrading to 10.9
[15:41:14] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[15:41:22] <Amaranth> hmm, if I've got a char* in C that needs to be free'd with a custom function to wrap that in rust would the best approach be a struct wrapper with a drop method?
[15:41:39] <strcat> yes
[15:41:45] <strcat> priv field with the ptr
[15:42:23] <kimundi> strcat: SimonSapin's design visible on the mailing list has the Encoding trait for that. The problem that I see with it is that it makes it easier to end up with dynamic dispatch Encoders and Decoders than with static dispatch Encoders and Decoders
[15:42:34] *** Quits: mrordinaire (Mibbit@1A659656.A607747.FD383126.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:43:19] *** Quits: jstevans (Instantbir@6913ED59.2E735A23.DDE5D3F6.IP) (Ping timeout)
[15:43:41] <kimundi> A hacked around with it and ended up with a design that allows bothn with almost no difference in usage
[15:44:54] <kimundi> let decoder = Utf8.new_decoder(); // static dispatch, decoder has specific type Utf8Decoder
[15:45:17] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[15:45:23] <strcat> so why is Utf8 an object?
[15:45:25] <kimundi> let dyn_decoder = Utf8.to_dynamic().new_decoder() // dynamic dispatch, decoder has specific type ~Decoder
[15:45:56] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:46:01] <kimundi> strcat: For the static dispatch case, that's just an workaround to make the function easier to call
[15:46:09] <kimundi> otherwise it would be 
[15:46:28] <kimundi> let decoder = Encoding::<for Utf8>::new_decoder()
[15:47:00] <strcat> so it could be utf8::Decoder::new() ? rather than a weird object
[15:47:02] *** Joins: miza (miza@moz-4DD51325.home.otenet.gr)
[15:47:19] <kimundi> strcat: In the dynamic case, it's the same reason. We don't have a way to call assoziated functions on an trait object.
[15:47:35] <strcat> I don't see why it would be a trait object
[15:47:51] <strcat> wouldn't you just have utf8::Decoder as a struct, implementing Decoder
[15:47:54] <kimundi> strcat: SimonSapin had a use case for it that motivated his whole design proposal
[15:48:02] <strcat> and as usual you would be able to choose to use static dispatch, or a specific kind of trait object
[15:48:33] <kimundi> fn get_encoding(encoding_label: &str) -> ~DynamicEncoding
[15:49:12] <strcat> so, that doesn't in any way stop you from designing it like regular rust libraries
[15:49:18] <kimundi> You then have a dynamic "handle" for constructing a ~Decoder and ~Encoder at will.
[15:49:25] * strcat shrugs
[15:49:55] <kimundi> strcat: If it's solvable easier, I'd be all for it, just for the record. ;)
[15:50:08] <strcat> it shouldn't need to special case either static or dynamic dispatch
[15:50:14] <brson> nmatsakis: can you respond to this email thread: https://mail.mozilla.org/pipermail/rust-dev/2013-September/005512.html
[15:50:15] <kimundi> Maybe I should take a step back...
[15:50:17] *** Quits: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net) (Ping timeout)
[15:50:18] <strcat> just do it the regular way with a struct impl'ing something, and the caller can choose
[15:50:30] <strcat> we have a Map trait, you can use it as a type bound or a trait object
[15:50:32] <strcat> there's no special case
[15:50:42] <brson> nmatsakis: it looks like a bug to me but it's surprising that it doesn't work
[15:51:07] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[15:51:07] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/3sQE0w
[15:51:07] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[15:51:59] <kimundi> strcat: Basically, this is a workaround for the "can't return Self in an trait object impl" problem, except it's not self but one of two generic types that you want to erase in case of usage as an trait object
[15:53:03] <strcat> I don't see anywhere you have to return Self
[15:53:20] <kimundi> strcat: You can look at what I hacked together here: https://gist.github.com/Kimundi/6525049 - It's crappy and unneccessary complex, but the usage in the main function looks elegant to me.
[15:53:43] <strcat> anyway, doesn't that function have to have an exhaustive list of every decoder if it can map a string to them?
[15:53:46] <kimundi> strcat: Not the specifc "return Self" problem
[15:53:51] <strcat> so an enum is appropriate there, not a trait object
[15:54:15] <strcat> unless it's meant to be pluggable where you can register an encoder
[15:54:22] <kimundi> strcat: That you have SimonSapin :P I'm just relaying his use case here
[15:54:30] <kimundi> "you have to ask"*
[15:54:53] <kimundi> (but yeah, being pluggable would be one situation)
[15:55:44] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[15:56:08] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[15:56:08] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/EB87MQ
[15:56:08] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[15:56:08] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[15:56:08] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/g7nEaA
[15:56:08] <ghrust> 13rust/06auto 144fd1e31 15Brian Anderson: rustc: Fix cstack lint for default methods. Closes #8753
[15:56:08] <ghrust> 13rust/06auto 14d7d45c4 15bors: auto merge of #8796 : brson/rust/cstack, r=catamorphism
[15:56:09] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[15:56:12] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[15:56:15] *** Quits: jgilbert (jgilbert@40BD3B76.2AD327F9.973C8D27.IP) (Connection reset by peer)
[15:56:44] *** Joins: jgilbert (jgilbert@40BD3B76.2AD327F9.973C8D27.IP)
[15:57:18] *** Joins: sinma (sinma@moz-6A11C47C.fbx.proxad.net)
[15:57:24] <sinma> Hello
[15:57:41] <sinma> See http://static.rust-lang.org/doc/std/rand.html
[15:57:45] <sinma> The links are broken
[15:58:29] <sinma> For Struct IsaacRng and Struct Weighted
[15:58:44] *** Quits: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Ping timeout)
[15:59:18] <sinma> In the description, there are Â«[ISAAC algorithm](http://enÂ» and for XorShiftRng (not Weighted sorry) we have Â« [Xorshift random number generator](http://enÂ»
[16:00:54] <SimonSapin> engla: Ideally Decoder and Encoder would be associated types, but we donâ€™t have that yet
[16:01:02] *** Joins: jstevans (Instantbir@F1B2150A.11F57C02.B7830B68.IP)
[16:01:03] <pnkfelix> sinma: The links seem to work for me ...
[16:01:47] <pnkfelix> sinma: that is, I see both of the links that go to wikipedia (the first for ISAAC algorithm, the second for Xorshift)
[16:02:26] <pnkfelix> sinma: oh wait, I was looking in the description itself, not the overview
[16:02:39] <pnkfelix> sinma: I see what you are talking about now
[16:02:52] <sinma> Sry, a bit difficult to explain clearly :p
[16:02:56] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[16:03:33] <pnkfelix> sinma: I suspect its an artfact of the doc generation tool looking for a period to end the first sentence, and it unfortunately matches against the period in the domain name of the url
[16:03:38] <sinma> It cuts at the same place
[16:03:50] <sinma> Yes, thatâ€™s what I thinked
[16:03:55] <pnkfelix> sinma: I'll file a bug.  But I think we're replacing our doc generation tool anyway
[16:04:35] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[16:04:35] *** ChanServ sets mode: +ao brson brson
[16:04:39] <sinma> pnkfelix: thatâ€™s what Iâ€™ve heard
[16:04:54] *** Quits: bent (chatzilla@moz-6F843AD8.static.cust.telenor.com) (Ping timeout)
[16:06:59] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:08:13] <sinma> It seems that I can use Â«NoneÂ» in an enum but itâ€™s a bit buggy, I think itâ€™s normal?
[16:08:26] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[16:08:28] <kimundi> sinma: what do you mean?
[16:08:51] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[16:09:11] *** Joins: bent (chatzilla@moz-6F843AD8.static.cust.telenor.com)
[16:10:31] <cmr> sinma: it shouldn't be buggy, but it might not be exactly what you expect because there is already a `None` in scope from Option in the prelude.
[16:11:01] <sinma> rusti: enum Direction { None, North, East, South, West } print!("{}\n", None as uint)
[16:11:09] -rusti- pastebinned 9 lines of output: http://ix.io/7Yq
[16:11:33] <pnkfelix> sinma: FYI : https://github.com/mozilla/rust/issues/9124
[16:11:57] <sinma> Maybe it should be forbidden to use None as an element of an enum to avoid problems
[16:12:11] <kimundi> sinma: None is just a normal identifier
[16:12:17] <kimundi> sinma: Nothing special
[16:12:17] <sinma> pnkfelix: great
[16:12:38] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[16:12:53] <sinma> kimundi: So why it doesnâ€™t work for my case?
[16:13:45] <sinma> *in my case
[16:13:59] <cmr> pnkfelix: where are you seeing broken links?
[16:14:04] <cmr> Both of them are correct for me.
[16:14:06] <sinma> The error message is a bit ugly
[16:14:12] <pnkfelix> cmr: Its not a broken link.  Its text that shouldn't be there
[16:14:20] <kimundi> sinma: Good question. It confuses None on option with the locally defined None, but I don't see right now how that is possble if you're just using them at this one place
[16:14:22] <sinma> cmr: in the summary
[16:14:33] <kimundi> Maybe a side effect of macro expansion
[16:14:37] <pnkfelix> cmr: "A random number generator that uses the [ISAAC algorithm](http://en"
[16:14:50] <cmr> http://i.imgur.com/BGwcu4g.png
[16:15:07] *** cade is now known as cade_away
[16:15:08] <cmr> OH not in the body.
[16:15:11] <kimundi> what is the command line switch to show macros as pretty printed expansion?
[16:15:12] <cmr> In the table of contents.
[16:15:17] <cmr> kimundi: --pretty expanded
[16:15:43] <sinma> rustc --pretty expanded myfile.rs?
[16:15:47] <kimundi> sinma: Compile you're code with --pretty expanded and paste the result
[16:16:01] <kimundi> I think yes?
[16:16:08] <sinma> ok works
[16:16:49] *** Joins: lbergstrom (Adium@moz-BBE3ABD.mv.mozilla.com)
[16:17:07] <sinma> Where past I my code? With ix?
[16:17:28] <kimundi> do you have an github account?
[16:17:31] <sinma> yes
[16:17:41] *** Quits: pyrac (pyrac@moz-22054CAF.w83-205.abo.wanadoo.fr) (Ping timeout)
[16:17:50] <kimundi> then here: https://gist.github.com/
[16:18:09] <kimundi> if you give a file name like 'foo.rs' it will also syntax higling it
[16:18:39] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Client exited)
[16:18:48] <sinma> https://gist.github.com/sinma/6525999
[16:19:24] *** ahal is now known as ahal|lunch
[16:19:33] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[16:19:45] <sinma> oups, Iâ€™ve changed my code
[16:19:51] <sinma> let me two seconds
[16:20:04] *** Quits: miza (miza@moz-4DD51325.home.otenet.gr) (Input/output error)
[16:20:37] <sinma> kimundi: ok
[16:23:11] *** Joins: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se)
[16:23:58] *** Joins: pyrac (pyrac@moz-22054CAF.w83-205.abo.wanadoo.fr)
[16:24:53] <kimundi> sinma: (takes a while to read...)
[16:26:28] *** Quits: pyrac (pyrac@moz-22054CAF.w83-205.abo.wanadoo.fr) (Connection reset by peer)
[16:26:30] <sinma> kimundi: take your timeâ€¦ Anyway, stop me if Iâ€™m wrong, itâ€™s ambiguous to use None in an enum so maybe itâ€™s better to avoid it?
[16:27:22] <pnkfelix> sinma: Not "ambiguous" â€” you're "just" shadowing a binding.  but still maybe a bad idea?
[16:27:30] *** Joins: scabaloo (student@323F5719.1CA5FEA3.DDE5D3F6.IP)
[16:27:50] <kimundi> sinma: Well, in general you shouldn't be using the name None because it's a standrt library type name that's used everywhere. But that has nothing to do with the problem here. What you wrote should work, the problem is just that the print!() macro expansion causes the None to be confused
[16:28:09] <kimundi> And I'm trying to ffind out why
[16:29:44] *** Joins: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com)
[16:29:52] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[16:29:52] <pnkfelix> rusti: enum D { None, N, S, E, W }; fn f() -> D { None }; fn g(d:D) -> D { match d { None => N, _ => S } }; g(f())
[16:29:53] -rusti- N
[16:29:56] <sinma> Because I try to cast it to an uint, he knows that itâ€™s an enum so _normally_ the compiler doesnâ€™t confuse the two None, right? So itâ€™s still a bad practice
[16:30:57] <cmr> I don't really understand the error or why it happens.
[16:31:06] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[16:31:06] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14d7d45c4 to 1449eb7bd: 02http://git.io/N3iJvQ
[16:31:06] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[16:31:07] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[16:31:07] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/C9wkVA
[16:31:07] <ghrust> 13rust/06auto 14d06595c 15Alex Crichton: Backport an LLVM fix to close #9117
[16:31:07] <ghrust> 13rust/06auto 14b4995f9 15bors: auto merge of #9118 : alexcrichton/rust/llvm-fix, r=sanxiyn...
[16:31:08] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[16:31:46] <kimundi> Okay, I reformated sinma's gist: https://gist.github.com/Kimundi/6526030
[16:32:18] <kimundi> print!() does use a bare 'None' in there, maybe that's what's causing the error
[16:32:23] <ecr> sigh. is there some trick for '@bors retry' that I don't know?
[16:32:36] <cmr> ecr: yes: semicolon
[16:32:38] <cmr> @bors: retry
[16:32:41] <cmr> wait, just colon
[16:32:52] <cmr> kimundi: oh, yes, I see now
[16:33:03] <cmr> acrichto: kimundi: it should be using ::std::option::None
[16:33:26] <acrichto> kimundi: yeah it's being fixed in the format_args!() pull
[16:33:28] <ecr> cmr: thanks. do I put it on the last commit (same as r+) or on the PR?
[16:33:35] <cmr> ecr: on the last commit
[16:33:46] <kimundi> acrichto: Already fixed? great!
[16:34:01] <acrichto> kimundi: soon at least :)
[16:34:07] <kimundi> sinma: ^
[16:34:37] *** Joins: \n (NDesaulnie@moz-BBE3ABD.mv.mozilla.com)
[16:35:00] <\n> Does anyone know where the command line flags are handled?
[16:35:15] <cmr> \n: for rustc?
[16:35:21] <\n> cmr: yes
[16:35:24] <kimundi> \n: extra::getops ?
[16:35:25] <sinma> kimundi: I think the last enum is not necessary to reproduce the bug
[16:35:27] <cmr> src/librustc/driver/driver.rs iirc
[16:35:40] <\n> cool I check both
[16:35:42] <cmr> it might be librustc/rustc.rs
[16:35:48] <cmr> that's where the entry point is
[16:35:52] <kimundi> sinma: It's already solved. It's a bug in print!(), and a bugfix is already on the go
[16:35:54] <cmr> but all of the good stuff happens in driver.
[16:35:59] *** Joins: pyrac (pyrac@moz-22054CAF.w83-205.abo.wanadoo.fr)
[16:36:48] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[16:38:17] <sinma> kimundi: great!
[16:40:07] *** ahal|lunch is now known as ahal
[16:40:31] <scabaloo> hi. i'm trying to get the path from an HTTP Request. 
[16:40:43] <scabaloo> What i did was used split_str_iter
[16:41:01] <scabaloo> and ended up with a path returned as a &str
[16:41:13] <scabaloo> when i called nth(1).get() on that iter
[16:41:29] <scabaloo> buuut... i want to get a ~str instead... 
[16:41:38] <cmr> scabaloo: call to_owned on the &str
[16:46:05] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[16:46:06] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14b4995f9 to 1449eb7bd: 02http://git.io/N3iJvQ
[16:46:06] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[16:46:07] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[16:46:07] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/BCzUDA
[16:46:07] <ghrust> 13rust/06auto 14ee760cf 15Tim Kuehn: Rendezvous stream for synchronous channel messaging
[16:46:07] <ghrust> 13rust/06auto 1407e8c1b 15bors: auto merge of #8908 : tikue/rust/master, r=anasazi...
[16:46:07] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[16:47:19] <luisbg> are Closures like lambda functions?
[16:47:31] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[16:47:32] <cmr> luisbg: depends; what do you think a lambda function is?
[16:47:41] <luisbg> cmr, that is a very good point
[16:47:47] <luisbg> lambda function like in Python
[16:47:47] <strcat> closures are functions with an environment
[16:47:56] <luisbg> strcat, functions with an environment?
[16:48:06] *** Joins: ChrisOei (Adium@moz-2B20A8E8.partechvc.com)
[16:48:12] <strcat> lambdas in python are an alternate syntax for functions, they are the same thing
[16:48:22] <strcat> all python functions can be closures
[16:48:30] <strcat> luisbg: yes, they can capture an environment
[16:48:47] <nmatsakis> brson: regarding that mailing list post, there is an existing bug on this issue
[16:48:53] <nmatsakis> brson: I am looking for it
[16:49:44] <luisbg> strcat, so what is the difference between a function and a closure?
[16:49:56] <luisbg> strcat, sorry if I'm not understanding something "simple"
[16:50:08] <cmr> rusti: let x = 5; let y = || x; y()
[16:50:09] -rusti- 5
[16:50:14] <cmr> luisbg: that's the difference, in rust.
[16:50:17] <strcat> a function is just code, it doesn't have captured variables
[16:50:27] <cmr> You can reference things outside of your scope.
[16:50:49] <kimundi> lambda functions are anonymous functions are functions without name. That's just a difference of naming. Semantically, We have functions that don't capture an environment, and functions that capture an environment, latter go under the name closure (they close over an environment).
[16:51:00] <luisbg> cmr, in Closures you can reference things outside of your scope. ok
[16:51:19] *** Quits: mindcat (mindcat@CFA3850B.9B7EF212.2BCF2E43.IP) (Ping timeout)
[16:51:31] *** Joins: mindcat (mindcat@CFA3850B.9B7EF212.2BCF2E43.IP)
[16:52:02] <kimundi> luisbg: exactly, and in order to do that those references need to be stored somewhere
[16:52:35] <luisbg> normal functions can only see things under their environment/scope. meanwhile closures can capture from outside
[16:52:36] <luisbg> got it
[16:52:39] <luisbg> :)
[16:52:39] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[16:52:47] <luisbg> now I just need to read a few more examples to see how it captures
[16:52:48] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:52:48] <kimundi> that's the environment, basically just a hidden autogenerated struct somewhere where the closure can store or read data from on each call.
[16:52:56] <luisbg> kimundi, cool
[16:52:58] <scabaloo> cmr: thanks
[16:53:03] *** jorendorff is now known as jorendorff_away
[16:53:07] *** Quits: CanhtTak (CanhTak@moz-C0B6DFD5.wl.t.ulaval.ca) (Quit: CanhtTak)
[16:53:22] <luisbg> kimundi, it stores a copy of the data or a reference?
[16:53:35] <luisbg> C functions have said structure with references to the data in the arguments
[16:53:41] <kimundi> luisbg: Depends on closure type and the thing you'Re cpaturing
[16:54:48] <strcat> luisbg: instances of C functions (function pointers) don't have extra state
[16:55:02] <strcat> 'extern fn' in rust is a regular function, without an env
[16:55:19] <strcat> &fn is 2 pointers, one to the function and one to the environment
[16:55:25] <strcat> because each instance has state
[16:55:34] <kimundi> luisbg: right now we have three kinds of closures: &fn, ~fn and @fn. The first one is a stack closure and basically uses &mut references to data. The second two are heap closures, the first can only close over sendable things, while the second one can only close over managed pointers
[16:56:28] *** Joins: jstevans1 (Instantbir@F1B2150A.11F57C02.B7830B68.IP)
[16:56:28] *** Quits: jstevans (Instantbir@F1B2150A.11F57C02.B7830B68.IP) (Connection reset by peer)
[16:56:32] <kimundi> A raw function pointer without an environment has the type 'extern fn', as strcat said.
[16:57:13] <doomlord> to clarify, can you use 'extern fn' for plain function pointers within rust code, not just for interop with C?
[16:57:14] <luisbg> kimundi, interesting!
[16:57:21] <cmr> doomlord: yup
[16:57:23] <kimundi> doomlord: yes
[16:57:37] <cmr> It's part of the ABI
[16:57:44] <cmr> extern "Rust" fn, extern "C" fn, etc
[16:57:48] <cmr> "Rust" is the defaul.t
[16:57:55] <luisbg> kimundi, it feels like a lot of the nature of Rust is to control where and how the memory/data is managed. stack vs heap
[16:58:01] <kimundi> rusti: fn foo() {}; foo
[16:58:02] -rusti- fn()
[16:58:07] *** Joins: jdm (jdm@moz-7B0110AD.mv.mozilla.com)
[16:58:07] *** ChanServ sets mode: +o jdm
[16:58:12] <kimundi> luisbg: pretty much, yeah ;)
[16:58:28] <strcat> the design of closures is a weak point of the language
[16:58:29] <kimundi> luisbg: Side effect of wanting memory safety without garbage collection
[16:58:29] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[16:58:30] <doomlord> luisbg, for me thats why rust is interesting, its a potential C++ alternative.
[16:58:45] <doomlord> its  a defining feature.
[16:58:50] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[16:58:53] <luisbg> kimundi, it feels very compsci! I hope people aren't afraid of these aspects when learning to use the language
[16:59:07] <kimundi> strcat: You mean they should be more like C++ lambdas?
[16:59:11] <cmr> "feels very compsci"? what does that even mean?
[16:59:12] <luisbg> doomlord, +1
[16:59:36] <flaper87> bblum: https://github.com/mozilla/rust/issues/9125
[16:59:46] <strcat> kimundi: yes, you should be able to have unboxed closures and define callable types
[16:59:46] <doomlord> heh you could say its more engineering than science
[16:59:52] <luisbg> cmr, languages like Python or Javascript... you don't need to know much about how memory is managed to code, just need to understand algorithmia
[17:00:05] <kimundi> cmr: "computer science - theoretical stuff you only need at uni and never afterwards" is the intended meaning here I think ;)
[17:00:09] <luisbg> cmr, then C... you can write decent stuff with just understanding types, pointers and algorithmia
[17:00:14] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:00:20] <kimundi> strcat: Agree with you there
[17:00:29] *** jorendorff_away is now known as jorendorff
[17:00:45] <luisbg> cmr, without really knowing if the actual memory pointed to is heap, stack, etc... but it also means you can end up with deadpointers, overflows, and all kinds of nasty things
[17:00:47] <\n> cmr: thanks! https://github.com/manastech/crystal/issues/32#issuecomment-24257081
[17:00:58] <kimundi> strcat: A closure should just be sugar around creating an function trait or so
[17:01:10] <strcat> well it won't be a normal trait
[17:01:15] *** Joins: miza (miza@moz-4DD51325.home.otenet.gr)
[17:01:16] <kimundi> of course not
[17:01:19] <doomlord> |x| is always a fn, not a extern fn, i guess?
[17:01:25] <kimundi> would need to be something special
[17:01:26] <cmr> doomlord: right now, yes.
[17:01:27] <luisbg> doomlord, I think we might be considering engineering and science the same thing (when it relates to computers) :P
[17:01:33] <strcat> doomlord: that can be fixed
[17:01:40] *** Joins: jstevans (Instantbir@70C0DC03.7F21D601.DDE5D3F6.IP)
[17:01:41] <strcat> if you don't capture anything it should be an extern fn
[17:01:41] <luisbg> just an idea of good understanding of what is happening low-level
[17:01:43] <cmr> I, and others, would like to also be an extern fn.
[17:01:50] <doomlord> ok nice
[17:02:08] <kimundi> impl ThisClosure for Fn(uint, uint) -> ~str { ... }
[17:02:20] <luisbg> kimundi, strcat, and doomlord: thanks for explaining this to me
[17:02:21] <kmc> anything built-in to ask the refcount of an Arc (for debugging)? or should I just hack it up with transmute
[17:02:47] *** Joins: jstevans2 (Instantbir@B87ECC31.EBD92228.DDE5D3F6.IP)
[17:03:01] *** Quits: jstevans1 (Instantbir@F1B2150A.11F57C02.B7830B68.IP) (Ping timeout)
[17:03:08] <doomlord> i supppose a lot of the small ||{}'s will get inlined in iterator style code
[17:03:18] <cmr> kmc: you should be able to transmute it to a std::unstable::sync::UnsafeArc
[17:03:52] <kimundi> doomlord: In theory yes, but closures are very inlining resistent
[17:04:07] <doomlord> ouch
[17:04:10] *** Quits: jstevans (Instantbir@70C0DC03.7F21D601.DDE5D3F6.IP) (Ping timeout)
[17:04:14] <kimundi> doomlord: part of the reason we switched away from the old for protocol
[17:04:18] <doomlord> that sounds scary
[17:04:33] <cmr> The new iterators inline quite well, since frequently the environment isn't used.
[17:04:46] <strcat> doomlord: rust's current closures are not ideal, as I said
[17:05:04] <strcat> they always have similar difficulties to devirtualizing/inlining virtual function calls
[17:05:05] <doomlord> i hope this isn't anything intrinsic, right? 
[17:05:06] <cmr> aiui it's whenever your closure captures environment that things get hairy optimization-wise.
[17:05:19] <strcat> doomlord: it is intrinsic, the way they are designed now is not going to fast or flexible
[17:05:19] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[17:05:30] <strcat> fixing it (however it's done) would be a breaking change
[17:05:38] <doomlord> but in the inlining case.. in the non-inline case I can understand it being intrinsic
[17:05:55] <strcat> it has to figure out how to split up the function pointer + state
[17:05:57] *** Joins: jstevans (Instantbir@FED39F68.87CA334A.DDE5D3F6.IP)
[17:06:01] <strcat> it has to prove the function pointer is constant
[17:06:20] <strcat> it has to prove the state always gets created in the same way
[17:06:23] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[17:06:23] *** ChanServ sets mode: +ao dherman dherman
[17:06:36] <strcat> then it has to inline the indirect function call and rip apart the env
[17:06:58] <strcat> compare to a C++11 closure
[17:07:01] <strcat> there is no function pointer
[17:07:17] <strcat> the closure is a unique type (associated with the code), and the state
[17:07:18] *** Quits: jstevans2 (Instantbir@B87ECC31.EBD92228.DDE5D3F6.IP) (Ping timeout)
[17:07:18] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[17:07:47] <strcat> it just has to inline a direct, static function called (with an inline hint by default)
[17:07:53] <strcat> static function call*
[17:07:58] *** Joins: jstevans1 (Instantbir@E9428BFC.7FDDA9B5.B7830B68.IP)
[17:08:46] <strcat> rust's closures are *always* essentially the same as simple trait objects
[17:09:05] <strcat> box header + dynamically sized env, a tydesc for dealing with the env dynamically, and a function ptr
[17:09:16] <strcat> and every single rust function has an env parameter
[17:09:17] *** Quits: jstevans (Instantbir@FED39F68.87CA334A.DDE5D3F6.IP) (Ping timeout)
[17:09:20] <strcat> fn foo() {}
[17:09:22] <strcat> is
[17:09:38] <strcat> define void @_ZN3foo17hc088e0a0709be7104v0.0E({ i64, %tydesc*, i8*, i8*, i8 }*) #4 {
[17:09:48] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[17:09:54] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: ["Textual IRC Client: www.textualapp.com"])
[17:10:02] *** Joins: Florob (Florob@moz-39532932.de)
[17:10:04] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[17:10:06] <strcat> also the environments rely on undefined behaviour, not a great thing ;p
[17:10:19] <strcat> it's undefined behaviour to index more than one byte past that i8
[17:10:24] <doomlord> yikes
[17:10:26] <kmc> :(
[17:10:27] *** Quits: jstevans1 (Instantbir@E9428BFC.7FDDA9B5.B7830B68.IP) (Ping timeout)
[17:10:50] <doomlord> i think i need to look asside at an example to convince me this isn't "just" something potentially fixable with clever code in the compiler
[17:10:58] <strcat> I guess traits rely on a lot of undef behaviour too
[17:11:00] *** Joins: jstevans (Instantbir@25FEE172.8878667B.DDE5D3F6.IP)
[17:11:06] <strcat> doomlord: it really isn't fixable that way
[17:11:08] <strcat> there are semantic issues
[17:11:15] <strcat> there is no unboxed closure type
[17:11:31] *** Joins: igl (igl@moz-36704C12.adsl.alicedsl.de)
[17:11:34] <doomlord> it could be my expectations are spoiled by mature C++ compilers.. the things i've seen it sucessfully inline..
[17:11:41] <kimundi> We want to be able to write static dispatch higher order functions
[17:11:57] <strcat> doomlord: neither clang or rustc is responsible for inlining
[17:11:57] <ecr> brson, olsonjeffery, alexcrichton: https://github.com/mozilla/rust/issues/9126
[17:11:58] <doomlord> yes, that is very important
[17:12:00] <kimundi> fn spawn<F: Fn() -> ()>(f: F) {}
[17:12:06] *** Quits: bent (chatzilla@moz-6F843AD8.static.cust.telenor.com) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[17:12:13] <strcat> doomlord: if you wrote rust-like closures in C++ (std::function) you would have the same overhead
[17:12:22] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:12:32] <strcat> std::function is roughly equivalent to ~fn
[17:12:39] <doomlord> perhaps i should add, the 'things i've seen inline' that were impressive were in GCC+msvc
[17:12:43] <strcat> but &fn is just ~fn without an allocation on the heap - it's still boxed/indirect
[17:13:04] <strcat> doomlord: well you should know that clang is no less capable of a compiler than gcc then
[17:13:06] <strcat> this is not LLVM's fault
[17:13:37] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[17:13:47] <strcat> we can't expect it to compile our closures to good code in every case, we are not generating something fast
[17:14:23] <doomlord> all the elegant chainable iterator magic.. i think this relies on the expectation that it will (eventually) compile the same as if you manually acheive the same result in C
[17:14:37] <kimundi> I feel bad for the rust core devs... More and more small issues are being solved, we're heading in the direction of maybe having an 1.0 release this year, but there are a few HUGE things missing/need to be changed for more consistency/performance/usability etc
[17:14:51] <strcat> doomlord: iterators are the opposite of closures
[17:14:55] <strcat> they are easy to optimize
[17:15:14] <strcat> they're not magic, or high-level, from LLVM's point of view
[17:15:20] <doomlord> but what i'm talking about is the sequences of code working on iterators with blocks for predicates..
[17:15:35] <strcat> doomlord: would be totally fine if they took unboxed closures or extern fn
[17:15:37] <doomlord> things like a loop with an "if" being a .iter().filter().map() .. that sort of thing
[17:15:43] <kimundi> iter.filer(|x| pred(x)) // ?
[17:15:50] <doomlord> yes that sort of thing.
[17:16:09] <doomlord> 'list comprehensions' etc..
[17:16:11] *** Joins: jviereck (Adium@moz-58A87BA7.dip0.t-ipconnect.de)
[17:16:17] <strcat> there are issues with closures *in general*, nothing specific to iterators
[17:16:45] <doomlord> closures that escape ..  i expect them to have more issues
[17:17:14] <strcat> fn foo<T: fn(int) -> bool>(x: &T) -> bool { x(5) }
[17:17:27] <strcat> is what iterators want to be able to do
[17:17:44] <strcat> where the caller can then use an 'extern fn', and have no env in the codegen at all
[17:17:51] <strcat> or use an unboxed closure, and have no indirection
[17:17:57] <strcat> or use &fn/~fn/@fn if they really want
[17:18:00] <doomlord> i'm tring to think of a simple example..
[17:18:06] *** Quits: ChrisOei (Adium@moz-2B20A8E8.partechvc.com) (Quit: Leaving.)
[17:18:47] <strcat> it's a big project to implement something like that, there are semantic issues to work out around mutability and it would be a huge breaking change
[17:18:50] <strcat> so...
[17:18:55] <doomlord> like 'count the number of values in a list below some threshold' ..  let num_above=a.iter().filter(|x|>threshold).len()
[17:19:32] <strcat> doomlord: there's nothing hard to optimize about that with an unboxed closure or extern fn
[17:19:37] <strcat> (constant extern fn)
[17:19:49] <strcat> there are really no issues with LLVM + iterators
[17:19:53] <strcat> it is entirely transparent
[17:20:04] <strcat> what seems hard to optimize to a human, is not relevant
[17:20:06] <doomlord> maybe i'm getting paranoid seeing certain words appearing, missing some details
[17:20:31] <strcat> LLVM sees iterators as a loop with local variables in aggregates
[17:20:42] <strcat> SROA splits up the local aggregates, and then you have the same code as C
[17:20:56] <strcat> they are already low-level, efficient code
[17:21:05] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[17:21:05] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1407e8c1b to 1449eb7bd: 02http://git.io/N3iJvQ
[17:21:05] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[17:21:07] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[17:21:07] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/ucyoWQ
[17:21:07] <ghrust> 13rust/06auto 1473bb4de 15Eric Reed: Forgot to make accept() home for IO
[17:21:07] <ghrust> 13rust/06auto 146840076 15Eric Reed: Make I/O tests use run_in_mt_newsched_task to get more multi-threaded test coverage
[17:21:07] <ghrust> 13rust/06auto 14f711650 15bors: auto merge of #8999 : anasazi/rust/multi-threaded-io-tests, r=brson...
[17:21:07] <doomlord> so these sort of cases.. what i refer to as 'functional style'.. they're ok ?
[17:21:09] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[17:21:19] <strcat> iterators are as efficient as manually writing out the loop
[17:21:20] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[17:21:30] <strcat> they are not hard to optimize
[17:21:35] <strcat> there aren't cases where it will fail to optimize
[17:21:39] <doomlord> i guess i need to look at some examples of what you're talking about exactyle.
[17:22:01] <strcat> how high-level the concepts appear isn't really something LLVM cares about ;p
[17:22:12] <veddan> what was the reasong behind removing the Add trait from *-pointers?
[17:22:22] <kimundi> strcat: I think doomlord refers to the fact that the iterator uses a closure there, while a handwritten loop would not.
[17:22:24] <strcat> veddan: fast pointer arithmetic in LLVM isn't safe
[17:22:38] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[17:22:57] <strcat> so the reasoning was that exposing a slow/safe form of pointer arithmetic isn't useful because it's still just as unsafe in the end, since you're going to deref it
[17:23:16] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[17:23:26] <strcat> kimundi: but that's fine... in a language with fast closures like C++
[17:23:28] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[17:23:35] <strcat> the issue is not with iterators
[17:23:36] <doomlord> in particular the statement "its why we moved from the old for protocol" is what got me panicing
[17:23:37] <veddan> strcat: how is it unsafe (beyond the general unsafety on *-pointers)?
[17:24:02] <strcat> veddan: because in C/C++ and LLVM bytecode, it's undefined behaviour to index more than one byte past the end of an object
[17:24:41] <strcat> veddan: unless you use the unusual safe form of pointer arithmetic, which sacrifices speed for the ability to do that (but you can't deref it if until you're back inside the object, or that's still undef behaviour)
[17:25:17] *** Joins: ofeldt- (ofeldt@moz-91B9AD7D.dip0.t-ipconnect.de)
[17:25:26] <strcat> anyway I don't think it makes sense to expose that
[17:25:31] <erickt> strcat: were you the one driving the iterator conversion? If so, did you have any long term plans on if we should keep around fns like Option.map, or should those be replaced with Option.iter().map().collect()?
[17:25:40] <doomlord> 'unboxed closure' .. definitions of filter etc take &fn().... is that "always easy to optimize" ?
[17:25:47] <veddan> strcat: Ah, I see. I'm using a bunch of pointers (of different types) into an mmap'd file, and .offset is a bit clunky syntax-wise and requires an int arg
[17:25:57] *** Quits: ofeldt (ofeldt@moz-E5D280DA.dip0.t-ipconnect.de) (Ping timeout)
[17:26:00] <strcat> erickt: yes, I did almost all the iterator stuff :P, and no I don't really know what will happen with Option
[17:26:01] <doomlord> &fn  vs ~fn or @fn ?
[17:26:25] *** Quits: eagen (eagen@8737942B.7A99C13A.B7961A98.IP) (Quit: Leaving)
[17:26:30] <strcat> doomlord: none of those is unboxed
[17:26:38] <kimundi> doomlord: The old for protocol had no 'Real' problem with closures. You just had to force inline basically every function that uses/provided one because llvm didn't mange to on its own
[17:26:46] <strcat> rust doesn't have unboxed closures, or a trait associated with a callable type you can use in generics
[17:27:06] <strcat> kimundi: it still failed a lot of the time
[17:27:25] <strcat> migrating away from the old for loops sped up compiles by 20%, after adding up the gains from several commits
[17:27:25] <kimundi> right
[17:27:29] <erickt> strcat: well I'm trying to decide if I want to get rid of them or not. Having to call .iter() and .collect() does seem like a lot of unnecessary work for Option/Result
[17:27:38] <strcat> and pcwalton had added force inline to every function loop body
[17:27:43] <strcat> so it wasn't working anyway
[17:28:09] *** cade_away is now known as cade
[17:28:17] <strcat> erickt: I was only planning on getting rid of them for containers requiring an allocation to create
[17:28:24] <strcat> erickt: like vectors, maps, etc.
[17:28:55] <strcat> since it's not very idiomatic to be creating new containers as temporaries, you want to be mutating them or iterating over them lazily most of the time
[17:29:00] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[17:29:11] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[17:29:23] <strcat> erickt: Option will have to call those things something other than 'map' and 'chain' though
[17:29:24] <kimundi> We still haven't solved the consistency problem on whether an Option should be treated like an container or not.
[17:29:39] <strcat> because Iterable would reserve those names, and Option will be Iterable
[17:29:43] <kimundi> right
[17:29:56] <kimundi> I guess "keeps emantic, change name" is what we want, really
[17:30:32] <erickt> strcat: ah right, I thought there was to be a trait to allow us to skip writing .iter()
[17:30:51] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[17:31:07] <strcat> erickt: problem is that you're going to end up with more people confused about &T from iterators, since it wouldn't be as clear that mut_iter/move_iter are alternatives
[17:31:20] <kimundi> Hm... I'm thinking of something like to_owned_vec for Options...
[17:31:37] <strcat> kimundi: it exists from iterators already
[17:31:47] <kimundi> whicch, I just realized, would just be next() :P
[17:31:58] <strcat> rusti: Some(5).move_iter().chain(range(6, 8)).to_owned_vec()
[17:31:59] -rusti- ~[5, 6, 7]
[17:32:19] <kimundi> strcat: Right, was thinking of iter().pop_one_as_option()
[17:32:22] <strcat> rusti: Some(5).move_iter().chain(range(6, 8)).size_hint()
[17:32:23] -rusti- (1u, None)
[17:32:25] <kimundi> But... that's next() :P
[17:32:40] <strcat> oh right ranges don't have a size hint yet
[17:33:20] <erickt> strcat: hrm, we need more nouns/verbs.
[17:33:23] <kimundi> strcat: (A convenience 'chain a value' and 'start iter from value' pair of functions might be useful?)
[17:33:39] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:33:58] <strcat> kimundi: don't know, maybe
[17:34:01] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[17:34:13] <kimundi> item("hello").chain_item(" world!")
[17:34:25] <strcat> I don't really think it's a common use case
[17:34:30] <strcat> rusti: range(0, 10)
[17:34:30] -rusti- std::iter::Range<int>{state: 0, stop: 10, one: 1}
[17:34:53] <erickt> strcat: I'm just about to add `Option.and_then(self, f: &fn() -> T) -> T { match self { Some(_) => f(), None => None } }`, I could instead just rename chain to and_then to free up that name
[17:35:03] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[17:35:46] <erickt> strcat: or Iterator.chain could be renamed to .join or .concat or something
[17:35:48] <strcat> rusti: Some(5).move_iter()
[17:35:49] -rusti- std::option::OptionIterator<int>{opt: Some(5)}
[17:35:52] <strcat> rusti: Some(5).move_iter().next_back()
[17:35:52] -rusti- Some(5)
[17:35:56] *** Joins: emerson (Icedove@6F3CD6F5.77F4443F.66AE2FF3.IP)
[17:36:21] <strcat> rusti: let mut x = Some(5); let mut ys = [6, 7, 8]; x.mut_iter().chain(ys.mut_iter()).reverse_(); (x, ys)
[17:36:21] -rusti- (Some(8), [7, 6, 5])
[17:36:23] <ecr> is it possible to do impl<A: B> Trait for Type combined with impl<A: B + C> Trait for Type? or will that get confused?
[17:36:47] <strcat> ecr: they will conflict
[17:36:56] <ecr> that's what I thought :(
[17:37:06] <strcat> ecr: we don't have a way to do !C ;p
[17:38:31] *** Quits: jasom (aidenn@moz-5F6FC7B3.sb.sd.cox.net) (Ping timeout)
[17:38:34] <erickt> strcat: I'm starting to like renaming Option.chain to Option.and_then. It'll also be nice to rename Result.chain_err to Result.or_else
[17:39:31] <cmr> \n: fraternizing with the enemy! :P
[17:39:38] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[17:39:54] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[17:39:54] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:40:45] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[17:43:44] *** Joins: DarkSide (dxd@19A6E9E.6E311C6.47FB7864.IP)
[17:44:12] *** Quits: sk (sk@273FD846.E993C7C3.78DD174B.IP) (Quit: Leaving)
[17:44:43] *** Quits: joone_ (joone@moz-6D49DCEA.jf.intel.com) (Ping timeout)
[17:44:46] <kimundi> erickt: Isn't chain and and_then different?
[17:45:07] *** Quits: DarkSide (dxd@19A6E9E.6E311C6.47FB7864.IP) (Quit: irc.webchatterz.com server for linking)
[17:45:13] *** Quits: \n (NDesaulnie@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[17:45:17] *** Joins: joone_ (joone@3CCE8CB5.2160464A.A34EC3BB.IP)
[17:45:31] <erickt> kimundi: right now they are. chain's closure gets the wrapped value, and_then's closure does not
[17:45:49] <kimundi> erickt: And I don't like resulr.or_else... Unlike Option there _is_ an value
[17:46:24] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[17:46:26] *** Joins: \n (NDesaulnie@moz-7B0110AD.mv.mozilla.com)
[17:47:07] <Amaranth> If I have an int is there an easy way to see if an enum has a value that matches?
[17:47:25] <Amaranth> No I guess there wouldn't be
[17:47:37] <kimundi> Amaranth: Not really, treading an enum variant as an intger is an antipattern to begin with
[17:47:44] <Amaranth> kimundi: C code
[17:48:01] <Amaranth> I'll just have fun with cast::transmute and hope for the best
[17:48:13] <erickt> kimundi: well the way I see it is that `Option.or_else(fn() -> Option<T>) -> Option<T>`, whereas `Result.or_else<F>(fn(E) -> Result<T,F>) -> Result<T,F>`
[17:48:14] *** Quits: \n (NDesaulnie@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[17:49:26] <kimundi> Amaranth: Ugh. 
[17:49:46] <Amaranth> kimundi: Well unless I've implemented my enum incorrectly there shouldn't be any way for that to fail
[17:49:48] <kimundi> Amaranth: How about a nice little Foo::from_int() function? :o
[17:50:05] <Amaranth> Eh? And do what?
[17:50:23] <cmr> Amaranth: see https://github.com/erickt/rust-zmq/blob/master/lib.rs#L114 for an example of how to do it safely.
[17:50:42] *** Joins: \n (NDesaulnie@moz-BBE3ABD.mv.mozilla.com)
[17:50:55] <erickt> cmr: Ugh, I really need to finish my enum->int syntax extension...
[17:51:00] <cmr> erickt: yes, please!
[17:51:02] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[17:51:23] <kimundi> Amaranth: In general, enum memory layout is undefined. If you want to convert to/from an integer, you should write functions and methods for that that map an enum variant to each valid value
[17:51:26] <erickt> everyone please stop distracting me with other interesting things to do!
[17:51:30] <cmr> :p
[17:51:36] <kimundi> erickt: haha
[17:51:52] <Amaranth> Dunno why I didn't think of that anyway, I was just converting to the enum then doing that same thing basically but with the enum on the left side
[17:52:00] <Amaranth> I'll just leave that enum out for this part
[17:52:11] <Amaranth> I guess...
[17:53:11] *** Quits: scabaloo (student@323F5719.1CA5FEA3.DDE5D3F6.IP) (Ping timeout)
[17:53:17] *** Quits: squiddy (squiddy@moz-F61153C0.adsl.alicedsl.de) (Input/output error)
[17:53:46] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[17:54:10] *** Joins: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP)
[17:54:37] <kimundi> erickt: I still don't like 'and' and 'or' for Result... The functions itself are fine though. Maybe I need to let it grow on me. I guess it can make sense... It's just an differnt kind of 'and' and 'or' abbreviation
[17:54:53] <cmr> I prefer and and or
[17:55:02] <kimundi> "This value exists _or_ it doesn't"
[17:55:02] <cmr> chain and soforth are meaningless names, to me
[17:55:15] *** Quits: dolphinling (andrew@moz-80A1E448.uvm.edu) (Ping timeout)
[17:55:15] <kimundi> "This operation was successful _or_ it wasn't"
[17:55:26] <kimundi> Yeah, I guess it works after all
[17:55:39] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[17:56:26] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[17:57:38] <kimundi> try_a().or_else(|e| {handle_error(e); try_b()} ).and_then(|result| try_c(result))
[17:58:50] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[17:59:06] <kimundi> erickt: Yeah, also make 'option.chain' the same as 'option.and_then' then
[17:59:26] *** Joins: dolphinling (andrew@moz-80A1E448.uvm.edu)
[18:00:29] *** Joins: riley (riley@8BA43816.9AA11D69.65DDFA89.IP)
[18:01:21] *** Quits: emerson (Icedove@6F3CD6F5.77F4443F.66AE2FF3.IP) (Ping timeout)
[18:01:32] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[18:02:55] *** Quits: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu) (Input/output error)
[18:03:08] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[18:03:26] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[18:04:27] *** Joins: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[18:05:36] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[18:06:25] <olsonjeffery> brson: ping
[18:08:26] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[18:08:27] <tikue> when bors says "some tests failed," is there a way to check which tests actually failed
[18:08:39] <kimundi> tikue: bors posts links to the logs
[18:08:58] <tikue> kimundi: i see the link to buildbot.rust-lang.org
[18:09:02] <tikue> but i don't know how to parse it
[18:09:18] <brson> olsonjeffery: pong
[18:09:20] <kimundi> tikue: hu?
[18:09:29] <erickt> kimundi: great, thanks for the input
[18:09:32] <tikue> i dont know what it means
[18:09:51] <olsonjeffery> brson: random thought: if you were to write a blog post titled "Towards a more pluggable EventLoop, etc" .. what would you put there?
[18:10:09] <kimundi> tikue: it's a link to the buildbot page for that build, there you have to click on the link to the actual logs
[18:10:15] <tikue> ah ok
[18:10:38] *** Joins: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu)
[18:11:43] *** Joins: Palmik (palmik@moz-CC484FDD.tmcz.cz)
[18:12:29] <tikue> ecr: are you anasazi
[18:13:27] <kimundi> erickt: (Also, did you see my comment on the pull request itself?)
[18:13:44] <erickt> kimundi: I did, I'm cleaning it up now
[18:13:54] <kimundi> kay, just wanted to be sure
[18:14:00] *** Parts: \n (NDesaulnie@moz-BBE3ABD.mv.mozilla.com) ()
[18:14:33] *** Joins: deio (chris@moz-B7BAB130.dynamic.tstt.net.tt)
[18:15:05] <brson> olsonjeffery: fixing the ~objects, creating a BasicEventLoop implementation using standard mutexes and condition variables and converting some of the primitive scheduler tests to use it, creating a runtime API for spawning the runtime and/or schedulers with a custom EventLoop, reviewing PausibleIdleCallback to determine if it's too uv-specific
[18:15:54] <brson> olsonjeffery: i'd leave IoFactory out of scope
[18:16:00] <olsonjeffery> that is quite specific, thanks!
[18:16:02] <brson> alternate event loops should just return None
[18:16:30] * olsonjeffery nods
[18:16:34] <ecr> tikue: sure. it looked alright to me
[18:16:54] <ecr> bors disagrees apparently
[18:17:01] <tikue> ecr: i know what tests failed -- i'm rerunning make check on my compy and I'll let you know
[18:17:11] <ecr> alrighty
[18:17:15] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[18:17:24] <cmr> ecr: are you eric reed?
[18:17:30] <ecr> cmr: indeed I am
[18:17:33] <cmr> nice presentation
[18:17:37] <ecr> thanks :)
[18:17:38] <olsonjeffery> brson: could i capture this in a ticket and put it on #4419 ?
[18:17:43] <ecr> too bad the audio cut out
[18:17:45] <tikue> cmr: link?
[18:17:54] <brson> olsonjeffery: yes
[18:17:54] <cmr> it is
[18:17:55] <olsonjeffery> it was a good talk, indeed
[18:18:08] <cmr> tikue: https://air.mozilla.org/intern-presentations-reed/
[18:18:08] <olsonjeffery> i especially appreciated some of the discussion of language features in the context of newrt io
[18:18:13] <tikue> thanks 
[18:18:21] <olsonjeffery> like affine types and TcpListener->TcpAcceptor
[18:18:53] *** Joins: valenting (Thunderbir@BC8F8C4C.4ABED146.FB866788.IP)
[18:19:16] <tikue> huh, why doesn't the talk start at the _beginning_
[18:19:36] *** Joins: Modality (Modality@moz-C8B01F71.static.zebra.lt)
[18:20:37] <ecr> tikue: if I remember right, something messed up in the recording and I started over
[18:20:50] *** Quits: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP) (Ping timeout)
[18:20:51] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[18:20:52] <tikue> ecr: ah ok. 
[18:21:18] <ecr> and then it looks like they decided to drop all that and start in the middle anyway >.<
[18:21:29] <tikue> weird
[18:21:53] * pcwalton grumbles as he rewrites rustdoc
[18:21:54] <pcwalton> the old one
[18:21:57] <ecr> I should really either record my own complete version or write it up for people. maybe I will if there's enough interest.
[18:22:12] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:22:25] <cmr> pcwalton: :(
[18:22:34] <pcwalton> someone rewrote it to use @fn everywhere
[18:22:34] <cmr> ecr: I would appreciate that
[18:22:35] <pcwalton> at some point
[18:22:48] <pcwalton> needs to become @Trait, which makes it way nicer
[18:23:15] <pcwalton> this rewrite will hopefully only last a few weeks :)
[18:23:16] <ecr> cmr: I'm going to be doing a couple weeks of moving starting this weekend. I'll try to get around to it once school starts up again.
[18:23:27] <benh> Was there ever a consensus on reducing/restricting the variety of doc comment forms? :)
[18:23:47] <ecr> benh: I think that discussion only resulted in the birth of 5 more
[18:23:59] <cmr> benh: personally I don't think the syntax should be reduced.
[18:24:01] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[18:24:34] *** Quits: sanxiyn (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:25:18] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[18:25:48] <kmc> I'm trying to debug a deadlock. my OS threads are blocking inside uv__epoll_wait; is there a way to tell what they're waiting for at the Rust level?
[18:25:55] <ecr> cmr: would prefer a write up or a new recording?
[18:26:07] <cmr> ecr: writeup would be fine.
[18:26:13] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[18:26:14] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/ucyoWQ
[18:26:14] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[18:26:31] <cmr> new recording would be really cool if you have the time and motivation, though
[18:27:04] <cmr> brson: do you maintain rust-sdl anymore?
[18:27:35] <benh> cmr: i'm sympathetic to the notion that multiple different doc attrs on the same item should be banned though (except for multiples of the same kind of line doc comment)
[18:27:39] <benh> but it's a bit of a mess :D
[18:28:20] <kimundi> Restricting it to one kind per item seems like a fine compromise
[18:28:32] <cmr> It does.
[18:28:40] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[18:28:41] <kimundi> And setting a rust codebase convention at least
[18:29:03] <kimundi> (/// and //! ftw)
[18:29:29] <benh> I believe /** blah */ ... whitespace, newlines etc /** blah */ still get merged into a single paragraph though which I think is unintuitive, and wouldn't be helped by restricting to a single kind
[18:30:03] <cmr> benh: why wouldyou have multiple doc comment blocks?
[18:30:10] *** Joins: ww (Mibbit@moz-DFAED48A.lightspeed.sntcca.sbcglobal.net)
[18:30:25] <benh> i dunno, maybe for more involved docs
[18:30:28] <kimundi> "Only one doc comment block per item, or only line doc comments of the same kind"
[18:30:50] <kimundi> Actually, let's merge that
[18:31:09] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[18:31:09] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/WmlJJA
[18:31:09] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[18:31:11] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[18:31:11] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/-JQ8gQ
[18:31:11] <ghrust> 13rust/06auto 14dfb04d9 15David Creswick: Convert between BigInts and BigUints
[18:31:11] <ghrust> 13rust/06auto 149bee3d7 15David Creswick: Convert between BigInts, BigUints, ints, and uints...
[18:31:12] <ghrust> 13rust/06auto 14a3e2ea2 15bors: auto merge of #9014 : dcrewi/rust/convert-between-bigints, r=anasazi
[18:31:14] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[18:31:27] <Luqman> cmr: rust-sdl is still updated and AngryLawyer (on github) usually merges them sooner or later if not brson 
[18:31:33] <kimundi> "Only one doc comment block per iterm, either /** */, /*! */ or a block of /// or //! without whitespace between them"
[18:31:49] <cmr> Luqman: ok
[18:31:57] <cmr> The demo aborts, which is why I ask
[18:32:27] <kimundi> (Also, there is still the vague notion that a //< could be useful)
[18:32:40] <benh> kimundi: without blank lines? or would you ban indenting the comments?
[18:32:49] <kimundi> benh: blank line
[18:32:55] <benh> also that sounds like it is part of the lexical syntax
[18:33:01] <kimundi> indenting is fine and would be stupid to forbid
[18:33:26] <kimundi> benh: meaning?
[18:33:26] <Luqman> cmr: there's a pull that might fix that
[18:33:51] <cmr> Luqman: sfacklers? I already merged that locally
[18:33:51] <benh> iirc people weren't too hot on changing the lexical syntax just to accomodate docs
[18:34:01] *** Joins: mihneadb (Mihnea@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:34:06] <kimundi> benh: what change do you mean?
[18:34:26] <ecr> brson: multi-threaded I/O tests made it through bors!
[18:34:26] <benh> Making whitespace/blank lines between /// lines significant
[18:34:35] *** Joins: eagen (eagen@8737942B.7A99C13A.B7961A98.IP)
[18:34:50] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[18:35:12] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:35:32] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[18:35:49] <kimundi> benh: hm... Seems like the only reasonable thing to me though. 
[18:35:56] *** Quits: Palmik (palmik@moz-CC484FDD.tmcz.cz) (Quit: Lost terminal)
[18:36:23] <kimundi> Just allow one doc attribute per item, and let consecutive line comments generate just one doc comment
[18:36:29] <cmr> Luqman: hm, it seems malloc is failing, from the backtrace
[18:36:43] <kimundi> urg
[18:36:56] <cmr> https://gist.github.com/cmr/4922648b016ded13ada9
[18:37:07] * kimundi should stop distracting himself with #rust
[18:38:59] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[18:39:12] <brson> ecr: \o/
[18:40:00] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[18:40:24] *** Joins: eatkinson (eatkinson@EEDFA61C.772DB3ED.90B17E8F.IP)
[18:40:26] <cmr> Eugh, and it ices on my desktop
[18:40:34] <cmr> task <unnamed> failed at 'index out of bounds: the len is 575403 but the index is 575403', /build/rust-git/src/rust/src/libextra/ebml.rs:119
[18:40:44] *** Quits: fabiand (fabiand@moz-4E21CCD7.adsl.alicedsl.de) (Quit: Verlassend)
[18:41:45] <Luqman> cmr: i think pcwalton's "Remove start" change is not exactly right
[18:42:20] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[18:42:43] *** Quits: miza (miza@moz-4DD51325.home.otenet.gr) (Input/output error)
[18:42:56] <zxcdw> is it be or has pcwalton been less active publicly about Rust than before? Haven't seen him talking here, HN or Reddit for "ages" :O
[18:43:04] <pcwalton> I was on vacation last week
[18:43:19] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[18:43:23] <pcwalton> and there's a servo work week going on right now
[18:43:33] *** Joins: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com)
[18:43:58] <pcwalton> also I'm heads down on the @fn removal
[18:44:07] <zxcdw> Ahh! Makes sense :)
[18:44:46] <Luqman> pcwalton: what's the right way to use rust-sdl now since sdl::start is (sorta) gone?
[18:44:55] <pcwalton> Luqman: sprocketnes has an example
[18:45:03] <pcwalton> you need to link against -lSDLmain and then name your entry point SDL_main
[18:45:11] <pcwalton> that's the SDL-approved way
[18:45:14] * cmr updates the demo.
[18:45:41] *** Joins: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP)
[18:46:26] <Luqman> pcwalton: but you can't start the rust runtime that way though since you won't have the crate_map arg?
[18:46:33] <pcwalton> oh, blech
[18:46:38] <pcwalton> yeah, sprocketnes is runtimeless....
[18:46:42] <pcwalton> I hate the crate_map.
[18:46:47] <tiffany> why does SDL like to own main() so much?
[18:46:57] <cmr> How does one link against an arbitrary library?
[18:47:00] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[18:47:18] <erickt> tiffany: SDL needs to guarantee that graphics are done on the main thread
[18:47:26] <olsonjeffery> one does not simply link its way into mordor.
[18:47:34] <erickt> tiffany: I believe that's a requirement for windows
[18:47:41] <Luqman> tiffany: it does some initialization, though i don't know why it can't just use SDL_init
[18:47:43] <tiffany> glfw doesn't require it on windows
[18:48:00] <cmr> I could make my programs runtimeless but I wouldn't enjoy it very much.
[18:48:18] <tiffany> it just assumes you'll always make glfw calls from the same (or possibly main, I don't remember which) thread
[18:48:31] <erickt> tiffany: I think SDL 2.0 added a way to initialize SDL without owning main though
[18:48:37] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[18:49:00] <tiffany> oh right sdl has its own event loop doesn't it
[18:49:00] <cmr> Is there another easy lib that I could use to just get a 2D canvas of a given size to draw on?
[18:49:06] <tiffany> that would explain why it likes to consume the main thread
[18:49:41] <Luqman> tiffany: sure, but that doesn't mean you need to take over main
[18:49:45] <tiffany> cmr: cairo?
[18:50:05] <Luqman> but yea, perhaps it'd be easier to just go with SDL2
[18:50:31] *** jorendorff is now known as jorendorff_away
[18:50:45] <tiffany> is there already a rust cairo binding? its API would probably lend well to rust
[18:51:13] <jdm> tiffany: https://github.com/mozilla-servo/rust-cairo, but it hasn't been updated for some time
[18:53:10] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[18:55:48] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Ping timeout)
[18:56:17] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[18:56:36] <brson> it could be possible to start the runtime without the crate map - all it does is set up logging - though right now it will probably segfault if passed null(). I would rather have the crate map be acessed a different way (maybe crate_map!()) instead of via `start` - then just make `start` some kind of syntax extension. the crate map could also be some kind of weak symbol that std links to
[18:56:53] <ww> can std::rt::io::net::tcp::TcpStream be casted to std::io::ReaderUtil?  since TcpStream has a Reader trait.  i have trouble turning TcpStream into a ReaderUtil
[18:57:36] <Luqman> ww: it's actually a different Reader trait
[18:58:09] <ecr> ww: there's std::rt::io::extensions::ReaderUtil which provides similar functionality for the new io
[18:58:13] <tiffany> what's the crate map for?
[18:58:19] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[18:58:55] <ww> i see thx
[18:59:45] <ecr> ww: sure thing. you can assume that nothing in std::io will work with std::rt::io (and vis versa). they're completely separate.
[18:59:47] *** Quits: eatkinson (eatkinson@EEDFA61C.772DB3ED.90B17E8F.IP) (Quit: eatkinson)
[19:00:05] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[19:00:14] <ecr> ww: we're working on replicating the functionality, so there might be missing pieces occasionally
[19:01:28] *** Joins: aeqwa (aeqwa@moz-88A8BC36.dsl.tropolys.de)
[19:06:08] <nathan7> Hey humans
[19:06:34] *** Quits: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue)
[19:06:49] <ecr> howdy
[19:07:59] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[19:08:05] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:08:32] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[19:09:18] *** Quits: jstevans (Instantbir@25FEE172.8878667B.DDE5D3F6.IP) (Ping timeout)
[19:10:13] *** Quits: tikue_ (quassel@moz-FEADCD38.hsd1.pa.comcast.net) (Ping timeout)
[19:11:43] <nathan7> If I have an extern mod blah;
[19:11:54] <nathan7> What exactly needs to exist in the case that it's a module with no top-level stuff?
[19:12:16] <nathan7> I see blah.rs -> libblah-somehash.so works
[19:12:38] <nathan7> but I have a directory called blah with blah/something.rs, and I want access to blah::something
[19:12:45] <nathan7> so I do extern mod blah; use blah::something;
[19:12:55] <nathan7> Just not sure what compile steps I need to take
[19:13:09] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[19:13:23] <luisbg> is code legibility one of Rust's goals?
[19:13:45] <luisbg> clean and easy to read syntax I mean
[19:13:54] <kimundi> nathan7: extern mod links to an compiled rust library. The .dll/.so/.dylib has to be in an path rustc looks into. You can then access the crate root of that library under the name of the library in your crate root.
[19:13:58] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[19:14:22] <kimundi> nathan7: That's not what extern mod is for
[19:14:33] <benh> petition to rename "extern mod" to "use crate"
[19:14:43] <nathan7> kimundi: It should be separately compiled from the rest of my stuff
[19:14:43] <kimundi> or 'link'
[19:14:45] <ww> luisbg: i assume yes, so far the short time i've used it.  the syntax is pretty easy to use and pretty easy to read
[19:15:05] <kimundi> nathan7: Okay, then you need setup a makefile or so at the moment
[19:15:07] <luisbg> ww, I just found a line in the tutorial that breaks my head
[19:15:11] <nathan7> kimundi: I have a makefile, yes.
[19:15:19] <luisbg> ww, fn mk_appender(suffix: ~str) -> @fn(~str) -> ~str {
[19:15:28] <nathan7> kimundi: I'm just trying to figure out what steps need to be taken to make my blah directory into a compiled artifact.
[19:15:39] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[19:15:39] <kimundi> nathan7: you need to pass the path where the libraries lies with -L to rustc
[19:15:41] <ecr> nathan7, kimundi: maybe he needs blah/mod.rs with "pub mod something" in it?
[19:15:42] <nathan7> kimundi: Goal: use blah::something;
[19:15:46] <luisbg> ww, that double -> is very confusing
[19:15:56] <ww> ~str means a str that's "owned" by the current scope
[19:15:57] *** Quits: valenting (Thunderbir@BC8F8C4C.4ABED146.FB866788.IP) (Ping timeout)
[19:16:07] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[19:16:07] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/jEwD5A
[19:16:07] <ghrust> 13rust/06auto 145478ebb 15Brandon Sanderson: Add with_mem_writer to std::rt::io::mem....
[19:16:07] <ghrust> 13rust/06auto 14c8f69dd 15bors: auto merge of #9038 : singingboyo/rust/with-mem-writer, r=anasazi...
[19:16:08] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[19:16:09] <ecr> nathan7: oh, yeah you need to tell the compiler where to find blah, like kimundi said
[19:16:16] <nathan7> Yeah, I have -L .
[19:16:21] <ww> the fn is returning a fn.  the 2nd fn is the first class func being returned
[19:16:36] *** Joins: tikue (quassel@moz-FEADCD38.hsd1.pa.comcast.net)
[19:16:58] <luisbg> ww, I understood it, but it took me a while to do so
[19:17:21] <ww> it helps sometime to put it into the next line
[19:17:23] <nathan7> ecr: Okay, I now have the pub mod something; in mod.rs
[19:17:28] <ww> like fn()
[19:17:37] <ww>   -> @fn(~str) -> str
[19:17:38] *** Quits: pyrac (pyrac@moz-22054CAF.w83-205.abo.wanadoo.fr) (Quit: pyrac)
[19:17:38] <ww> {
[19:17:44] <kimundi> nathan7: If you have compiled the other crate, it has the name 'blah', and you have an 'extern mod blah;' in your crate root, then 'use blah::something' should work if 'something' is public in 'blah'
[19:17:56] <luisbg> ww, true
[19:17:56] <nathan7> kimundi: How do I compile it?
[19:17:58] <ecr> nathan7: that should expose the something module to anything that uses blah
[19:18:06] <nathan7> kimundi: If I do cd blah && rustc --lib mod.rs I get a libmod
[19:18:10] <nathan7> kimundi: which seems.. a tad off
[19:18:20] <kimundi> nathan7: I though that's what you want?
[19:18:31] <luisbg> ww, I think a lot of these concepts and syntax will fall into place in my head once I start reading/writing code
[19:18:33] <kimundi> or, wait
[19:18:35] <ww> what do you think would improve the readibility?  reduce some of the returned fn declaration?
[19:18:36] <luisbg> ww, thanks for the help :)
[19:18:37] <kimundi> which part is odd
[19:18:59] <nathan7> kimundi: I was expecting to get a libblah-hash-version.so at the same level as the blah folder
[19:19:04] <ww> no problem.  i'll a nb here as well. :)
[19:19:09] <nathan7> kimundi: instead of blah/libmod-hash-version.so
[19:19:23] <luisbg> ww, "a nb" here?
[19:19:28] <ww> newbie
[19:19:44] <kimundi> nathan7: if you compile blah.rs as a library then you will get a libblah, unless you've set an different link name as metadat inside blah.rs
[19:19:49] *** Quits: mythmon (mythmon@moz-AD308AD7.members.linode.com) (Ping timeout)
[19:19:57] <nathan7> kimundi: Yeah
[19:20:05] <kimundi> nathan7: The folder where blah.rs is in has nothing to do with it then
[19:20:08] <nathan7> kimundi: but if I have a blah directory with mod.rs and something.rs
[19:20:21] <luisbg> ww, about fixing readibility... pointers to functions are always messy to read
[19:20:29] <ww> i found it helps to learn by doing a project.  just start developing some simple project and struggle with the syntax for a while to get the hang fo it
[19:20:30] <luisbg> which is probably why some languages don't support them
[19:20:42] <luisbg> ww, what project are you working on?
[19:20:47] *** Joins: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu)
[19:21:13] <kimundi> nathan7: so you want to compile blah/{mod.rs, something.rs} as the library libblah?
[19:21:14] <ecr> luisbg: there's some much better ways to represent higher order functions syntactically, but rust doesn't use them in favor of looking more like C/C++/Java/etc.
[19:21:18] <nathan7> kimundi: Yep
[19:21:23] <ww> i started with a memcached server, then i scaled back and just doing a memcached client
[19:21:30] <luisbg> ecr, +1
[19:22:00] <ecr> luisbg: ML/Haskell is probably the nicest for expressing higher order function types
[19:22:05] <luisbg> ww, cool!
[19:22:21] <luisbg> ww, is it not tempting though to avoid the new concepts Rust introduces and just code it like it was C?
[19:22:33] <ecr> luisbg: at least Rust didn't copy the C/C++/Java convention of return types on the left. imagine that madness with higher order functions
[19:22:54] <ww> there's a lot of things can be done in a memcached client with regarding to key partition, clustering, server fall back that I always wanted in memcached client in other languages but not seeing them, so it's a good opportunity to get it done
[19:22:56] <luisbg> ecr, Rust expresses it C-style on purpose or is it something that hasn't been discussed/thought of?
[19:23:03] <kimundi> nathan7: Well, the convention at that point right now would be to just call mod.rs blah.rs (or lib.rs? Convention is still a bit unclear there) - In any case if the name of the source file is different, you need to set the linkname metadat to "blah" inside of mod.rs. Then you compile mod.rs as your crate root
[19:23:21] <kimundi> nathan7: Have you read http://static.rust-lang.org/doc/tutorial.html#crates-and-the-module-system ?
[19:23:33] *** Joins: emerson (Icedove@6F3CD6F5.77F4443F.66AE2FF3.IP)
[19:23:47] <ww> luisbg, you can code it like C.  get comfortable, and move to some of the new concepts
[19:23:57] <ecr> luisbg: it's intentional. Rust tries to look at least vaguely like C/C++ to not turn off the "languages must have curly braces!" folks right away
[19:23:58] <kimundi> nathan7: 17.9 you can see how to set the metadata
[19:24:02] <ww> it's much easier to learn by leveraging what you know
[19:24:16] <kimundi> At 17.9* - though I recommend reading all
[19:24:32] <luisbg> ecr, curly braces! it must have them
[19:24:51] <ww> i actually prefer rust than haskell because of the syntax
[19:24:56] <luisbg> ecr, curly braces or white-spaces-in-language, those are the two popular options
[19:25:13] <luisbg> ww, cool to hear! :) (that you like Rust over Haskell syntax)
[19:25:14] <ww> and rust's non-religious approach to immutibility
[19:25:21] <luisbg> ww, that is a good point
[19:25:49] <nathan7> kimundi: mhm
[19:26:33] <ecr> luisbg: I'm one of the crazy people that actually likes Haskell's syntax, but Rust is acceptable syntactically. My main gripe is syntax wise is no nesting /* */ comments and having to declare all the type variables up front
[19:26:39] <nathan7> kimundi: Still can't find the crate
[19:27:09] <kimundi> nathan7: you have a libblah ?
[19:27:17] <ww> haskell is too minimalistic.  they removed (), making reading code very difficult.  you have to be a human compiler to dechiper haskell code.  i rather writing easy to read and maintainable code.  
[19:27:17] <engla> kimundi: I've got some actual UTF-8 decoding code if you want to play with it. Or will it use the rust-encodings code anyway?
[19:27:19] <nathan7> kimundi: It's created as blah/libblah...so
[19:27:49] <Luqman> nathan7: as in rustc can't find the crate?
[19:27:49] <nathan7> kimundi: it's not found there, and not found if I move it to the top-level either
[19:27:52] <nathan7> Luqman: yeah
[19:27:54] <kimundi> nathan7: if you're not in ./blah then you have to pass ./blah to rustc
[19:28:02] <nathan7> kimundi: D'OH
[19:28:04] <kimundi> engla: Motivated by my email?
[19:28:16] <Luqman> nathan7: try passing -Lblah to rustc
[19:28:24] <nathan7> Thanks!
[19:28:57] <kimundi> engla: Or rather, what did you mean with the utf8 comment?
[19:29:00] <engla> kimundi: I guess, since you've been putting together an impl
[19:29:37] <engla> kimundi: you got an impl without the actual machinery to decode and handle errors, I mean
[19:29:53] *** Joins: eatkinson (eatkinson@moz-820C988C.airbears.berkeley.edu)
[19:30:02] *** Joins: dherman_ (dherman@moz-BBE3ABD.mv.mozilla.com)
[19:30:09] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[19:30:09] *** dherman_ is now known as dherman
[19:30:46] <kimundi> engla: I've been hacking around with the proposal for organizing the traits and the modules. The actual implementation of the decoding was unimportant for me there :) But If I need an actual implementation there to flesh it out more, i'll ask you. 
[19:30:58] <engla> ok
[19:31:03] *** jorendorff_away is now known as jorendorff
[19:32:01] <engla> hm I think we should put some complete implementations on the table for discussion instead
[19:32:12] <engla> I don't like arguing about unimplemented interfaces
[19:33:02] <engla> discussing is the word
[19:33:06] <engla> not arguing :)
[19:33:39] <kimundi> engla: I agree, but there are many facets to handle. I already completely misunderstood the goal of SimonSapin's email proposal ;)
[19:36:52] <engla> I think you misunderstood .flush
[19:36:57] *** Quits: Modality (Modality@moz-C8B01F71.static.zebra.lt) (Quit: Leaving)
[19:37:14] <engla> it's nothing for a destructor, just to signal end of stream
[19:37:20] <olsonjeffery> yeah. the whole proposal is working from the assumption of taking an approach similar to whats already done in rust-encodings
[19:37:35] <olsonjeffery> with some API tweaks that bother SimonSapin (like the error handling)
[19:39:47] <kimundi> My main objection was the usage of trait objects even if not necessary. But I already discussed all that with SimonSapin, need to write another email/another variance of my code
[19:39:52] *** Quits: eatkinson (eatkinson@moz-820C988C.airbears.berkeley.edu) (Quit: eatkinson)
[19:39:55] <engla> yes ok
[19:40:36] *** Joins: hoverbear (andrew@moz-ED8D5A2F.wireless.uvic.ca)
[19:41:44] <engla> olsonjeffery: ah, but will the author of rust-encodings implement it a subset for libstd?
[19:42:27] *** jdm is now known as jdm|f00ding
[19:42:53] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[19:43:14] <kimundi> (could I get a link to rust-encoding?)
[19:43:49] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[19:43:59] <engla> kimundi: https://github.com/lifthrasiir/rust-encoding
[19:44:10] <kimundi> thanks
[19:45:00] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[19:46:49] <ww> what's the difference between the comment syntax  /// vs // ?
[19:47:06] <engla> ww: /// is a documentation comment
[19:47:33] <engla> ww: /// is used before an item (like a function, struct, or struct member) to give it documentation text
[19:47:47] <ww> i se
[19:48:10] <engla> ww: //! is used *inside* an item to give it documentation text. I think the only proper use of //! is directly first in a file, to document the module
[19:48:54] <engla> ww: also, /// and //! have multiline syntax corresponding, /** */  and /*! */ respectively.
[19:49:31] <ww> thanks
[19:49:36] <engla> ww: and we need someone to reduce the 4 cases into less.. somehow
[19:50:59] <flaper87> hey guys, I started this: https://github.com/FlaPer87/rust-for-real
[19:51:08] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[19:51:13] <flaper87> I'll keep adding more examples of how to use Rust's std
[19:51:27] <flaper87> and keep it updated with latest + tagging for every rust release
[19:51:39] *** Quits: hoverbear (andrew@moz-ED8D5A2F.wireless.uvic.ca) (Quit: hoverbear)
[19:51:51] <engla> that sounds useful
[19:51:53] <flaper87> Just letting everybody know, in case other folks want to help adding examples of libs they're more familiar with
[19:52:24] <ww> sounds sound.  looking forward to it.  good luck
[19:52:52] <luisbg> flaper87, cool! thanks
[19:53:18] <olsonjeffery> flaper87: would be cool to hook it up test automation to build/run against master to keep it current
[19:53:26] <luisbg> flaper87, bookmarked to read soon and for future reference
[19:53:27] <olsonjeffery> this is something ive thought about, for a long time, with the code samples in rustdoc
[19:53:56] <flaper87> olsonjeffery: that's a good idea, I'll do that as well
[19:54:15] <flaper87> I'll add main.rs and stuff to support rustpkg
[19:54:17] <hansjorg> I'm trying out rustpkg for the first time and can't get it working.
[19:54:24] <olsonjeffery> flaper87: that would imply a specific structure to how all of the samples are written
[19:54:36] <olsonjeffery> like do they all use #[test] or a main() fn or what?
[19:54:45] <olsonjeffery> and for stuff like file io, you have resource cleanup and whatnot
[19:55:14] <flaper87> olsonjeffery: yeah, so, the current idea is to have a main in each file so that it is possible to build / run *just that example"
[19:55:26] * olsonjeffery nods
[19:55:56] <hansjorg> I'm trying this: mkdir -p workspace/src;cd workspace/src;git clone http://github.com/brson/rust-sdl.git;cd ..;rustpkg install rust-sdl
[19:56:16] <hansjorg> Which fails with "error: main function not found". Anybody know why?
[19:56:19] <flaper87> plus, create some crates 1 for task, 1 for the whole std, that "join" all mains and create a single executable (not sure if that's possible, perhaps with a macro that collects the whole thing)
[19:59:06] *** Quits: victorporof (victorporo@FBDAE982.F9BD9D78.9B1E38F4.IP) (Quit: victorporof)
[20:00:27] <erickt> hansjorg: unfortunately the best one to ask, tjc, is not online at the moment
[20:00:47] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[20:01:10] <erickt> hansjorg: perhaps `rustpkg install --bin rust-sdl` would work?
[20:01:26] <erickt> hansjorg: oops, `rustpkg install --lib rust-sdl`
[20:01:37] <luisbg> anybody has an idea for a cool small/medium project to develop in Rust (to learn by using)?
[20:01:56] <erickt> hansjorg: most rust libraries aren't actually set up to work with rustpkg yet, so it's not surprising you are running into trouble :(
[20:01:58] <luisbg> develop or port
[20:02:03] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[20:02:18] *** Joins: igl1 (igl@moz-1CD79C0B.adsl.alicedsl.de)
[20:02:21] *** Quits: igl (igl@moz-36704C12.adsl.alicedsl.de) (Ping timeout)
[20:02:36] *** Joins: eholk (eric@moz-F70D5031.hsd1.in.comcast.net)
[20:04:22] <hansjorg> erickt: that gives me this: error: Unrecognized option: 'lib'
[20:04:46] <erickt> hansjorg: are you using 0.7 or rust HEAD?
[20:04:47] *** Joins: eatkinson (eatkinson@moz-6964FF68.airbears2.berkeley.edu)
[20:05:29] <hansjorg> erickt: a current build of HEAD
[20:06:21] *** Joins: cstrahan (cstrahan@DB1CB554.80B5DDE4.2D737EA7.IP)
[20:07:01] <tiffany> is there a library for parsing command line arguments?
[20:07:06] <cmr> extra::getopt
[20:07:09] <cmr> or extra::opt
[20:07:14] <cmr> one of the names :p
[20:07:29] <engla> erickt: ah you are implementing Default finally, nice! Can we also remove the Zero impls for vec?
[20:07:40] <erickt> engla: sure
[20:07:56] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[20:08:22] <engla> but I think all numeric types need to implement Default alongside Zero
[20:08:48] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[20:08:52] *** Joins: wqhcqtyvekb78 (hvbeuveigv@7CACED56.4F90636E.AE56BF34.IP)
[20:08:55] <wqhcqtyvekb78> Do skype,yahoo,other chat and social communication prog (facebook&twitter) spy for  Israel  &   usa  ???
[20:08:56] <wqhcqtyvekb78> Do they record and analyse everything we type on the internet???
[20:08:56] <wqhcqtyvekb78> Ù‡Ù„ ØªØªØ¬Ø³Ø³ Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„Ø´Ø§Øª Ùˆ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹Ù‰ Ù„Ø§Ø³Ø±Ø§Ø¦ÙŠÙ„ Ùˆ Ø§Ù…Ø±ÙŠÙƒØ§ØŸØŸØŸØŸ
[20:08:56] <wqhcqtyvekb78> Do skype,yahoo,other chat and social communication prog (facebook&twitter) spy for  Israel  &   usa  ???
[20:08:56] <wqhcqtyvekb78> Do they record and analyse everything we type on the internet???
[20:08:56] <wqhcqtyvekb78> Ù‡Ù„ ØªØªØ¬Ø³Ø³ Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„Ø´Ø§Øª Ùˆ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹Ù‰ Ù„Ø§Ø³Ø±Ø§Ø¦ÙŠÙ„ Ùˆ Ø§Ù…Ø±ÙŠÙƒØ§ØŸØŸØŸØŸ
[20:08:58] <wqhcqtyvekb78> Do skype,yahoo,other chat and social communication prog (facebook&twitter) spy for  Israel  &   usa  ???
[20:09:00] <wqhcqtyvekb78> Do they record and analyse everything we type on the internet???
[20:09:01] <wqhcqtyvekb78> Ù‡Ù„ ØªØªØ¬Ø³Ø³ Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„Ø´Ø§Øª Ùˆ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹Ù‰ Ù„Ø§Ø³Ø±Ø§Ø¦ÙŠÙ„ Ùˆ Ø§Ù…Ø±ÙŠÙƒØ§ØŸØŸØŸØŸ
[20:09:03] <wqhcqtyvekb78> Do skype,yahoo,other chat and social communication prog (facebook&twitter) spy for  Israel  &   usa  ???
[20:09:05] <wqhcqtyvekb78> Do they record and analyse everything we type on the internet???
[20:09:06] <wqhcqtyvekb78> Ù‡Ù„ ØªØªØ¬Ø³Ø³ Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„Ø´Ø§Øª Ùˆ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹Ù‰ Ù„Ø§Ø³Ø±Ø§Ø¦ÙŠÙ„ Ùˆ Ø§Ù…Ø±ÙŠÙƒØ§ØŸØŸØŸØŸ
[20:09:23] <erickt> brson: please kick ^?
[20:10:19] <erickt> hansjorg: unfortunately I'm not quite sure how to help at this point :( You might need to do it manually
[20:11:29] *** Quits: wqhcqtyvekb78 (hvbeuveigv@7CACED56.4F90636E.AE56BF34.IP) (Excess Flood)
[20:11:41] *** Joins: wqhcqtyvekb78 (hvbeuveigv@7CACED56.4F90636E.AE56BF34.IP)
[20:11:41] *** Quits: wqhcqtyvekb78 (hvbeuveigv@7CACED56.4F90636E.AE56BF34.IP) (Max SendQ exceeded)
[20:11:52] *** Joins: wqhcqtyvekb78 (hvbeuveigv@7CACED56.4F90636E.AE56BF34.IP)
[20:11:52] *** Quits: wqhcqtyvekb78 (hvbeuveigv@7CACED56.4F90636E.AE56BF34.IP) (Max SendQ exceeded)
[20:12:03] *** Joins: wqhcqtyvekb78 (hvbeuveigv@7CACED56.4F90636E.AE56BF34.IP)
[20:12:03] *** Quits: wqhcqtyvekb78 (hvbeuveigv@7CACED56.4F90636E.AE56BF34.IP) (Max SendQ exceeded)
[20:12:08] <hansjorg> erickt: looks like that (passing on --lib) was very recently removed. Going to have to dig a bit deeper, thanks for the pointer
[20:12:18] *** Joins: hoverbear (andrew@moz-ED8D5A2F.wireless.uvic.ca)
[20:12:21] <bheylin_> https://gist.github.com/brianheylin/6529125
[20:12:42] <bheylin_> no compile fail for infinite size recursive structs 
[20:12:47] <Amaranth> Interesting
[20:13:05] <Amaranth> It seems rust-sdl2 is making a broken OS X window even without my changes, this is going to be fun
[20:13:39] <bheylin_> as stated in the tutorial: http://static.rust-lang.org/doc/tutorial.html#boxes
[20:14:42] <cmr> tiffany: cairo is a vector library and while it has functions for bringing in raster data, I'm wondering how good performance actually is; this is for a pong demo of rust.
[20:15:01] <tiffany> cmr: I'm using cairo to do text rendering in my engine
[20:15:44] <cmr> Can't know until I try, I guess.
[20:16:03] <sinma> Hello, I try to use fmt!("({}, {})", x, y); but it donâ€™t work, dunno why
[20:16:06] <cmr> I could probably be using solid rects instead of raster data too
[20:16:20] <cmr> sinma: fmt is the old formatter, it doesn't use that syntax. you want to be using format!
[20:16:22] <Amaranth> afaik cairo is what firefox still uses for rendering at least on some platforms
[20:16:30] <Amaranth> So it must not be that bad :P
[20:16:50] <sinma> cmr: ok
[20:16:56] <Amaranth> Although I do remember them wanting to get rid of it, iirc for skia
[20:17:04] <flaper87> brson: ping
[20:17:12] <cmr> Amaranth: iirc that had to do with stateful vs stateless drawing.
[20:18:12] <cmr> whoa new bugzilla theme on bzo, very nice
[20:18:32] <cmr> *bmo
[20:18:54] *** Quits: hoverbear (andrew@moz-ED8D5A2F.wireless.uvic.ca) (Quit: hoverbear)
[20:19:55] <sinma> If I have a struct, then I impl a new method, how to call new to create the Â«objectÂ»?
[20:20:42] <cmr> rusti: struct Foo {priv a: uint}; impl Foo { fn new() -> Foo { Foo {a: 42} } } format!("{:?}", Foo::new())
[20:20:46] -rusti- ~"main::Foo{a: 42u}"
[20:20:50] <cmr> sinma: like that
[20:21:01] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[20:21:01] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/jEwD5A
[20:21:01] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[20:21:11] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[20:21:53] <sinma> cmr: so, what Â«error: first-class methods are not supportedÂ» means?
[20:22:15] <cmr> sinma: is your `new` taking self?
[20:22:37] <sinma> yes
[20:22:43] <cmr> that would be why.
[20:23:19] <cmr> If you take self, you have a method, and need to call it on an instance of the struct. `fn new()` is an associated function and is scoped by the type name.
[20:24:45] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[20:25:55] *** Joins: hoverbear (andrew@moz-ED8D5A2F.wireless.uvic.ca)
[20:26:00] <Amaranth> d'oh, it seems I needed to make rust start me on the main thread for SDL to work
[20:26:05] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[20:26:06] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/C86vww
[20:26:06] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[20:26:06] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[20:26:06] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/JnAATg
[20:26:06] <ghrust> 13rust/06auto 1420f1584 15Tim Kuehn: Rendezvous stream for synchronous channel messaging
[20:26:06] <ghrust> 13rust/06auto 14f41cdb6 15bors: auto merge of #8908 : tikue/rust/master, r=anasazi...
[20:26:07] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[20:26:07] <sinma> cmr: Iâ€™ve forgotten that the new method is specialâ€¦
[20:26:08] <Amaranth> Which makes sense but I didn't know it didn't do that to start with :D
[20:26:26] <cmr> sinma: it's no more special than any other associated function.
[20:27:24] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[20:27:37] <sinma> cmr: in the sense thatâ€™s itâ€™s not a method
[20:27:48] <cmr> yes
[20:27:57] *** Quits: eagen (eagen@8737942B.7A99C13A.B7961A98.IP) (Client exited)
[20:28:48] <sinma> cmr: unlike other languages
[20:29:09] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[20:30:42] <cmr> Does anyone know if the author of rust-bindgen is on IRC?
[20:31:33] <ww> question: i want a generic function to convert str to number with default value, fn my_to_int<T: FromStr>(s: &str, default_value: T) -> T
[20:32:20] <ww> how do i invoke the appropriate from_str converter by type?  <T>::from_str(s)?
[20:32:42] <cmr> ww: FromStr::from_str(s)
[20:32:45] <engla> ww: from_str::<T>(s)
[20:32:48] <cmr> ww: scoped by the trait name it comes from.
[20:32:53] <cmr> Oh yes, from_str
[20:33:00] <cmr> I added that, you'd think I'd remember it :p
[20:33:01] <engla> rusti: from_str::<int>("28")
[20:33:03] -rusti- Some(28)
[20:33:13] <engla> it's our new member in the prelude family
[20:33:25] <ww> great!  thanks.
[20:33:41] <cmr> nmatsakis: ping
[20:34:17] <engla> cmr: haha yeah I thought it was you!
[20:35:34] <Amaranth> cmr: I tried to make it build earlier with no luck, you having trouble too?
[20:35:48] <cmr> Amaranth: I'm fixing it, I just don't know if it's the correct fix.
[20:35:51] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[20:36:04] <Amaranth> cmr: I applied the same change rust itself did when removing that method
[20:36:07] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[20:36:07] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/EDQ5DA
[20:36:07] <ghrust> 13rust/06auto 14dfb04d9 15David Creswick: Convert between BigInts and BigUints
[20:36:07] <ghrust> 13rust/06auto 149bee3d7 15David Creswick: Convert between BigInts, BigUints, ints, and uints...
[20:36:07] <ghrust> 13rust/06auto 1468d5bb8 15bors: auto merge of #9014 : dcrewi/rust/convert-between-bigints, r=anasazi
[20:36:09] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[20:36:19] <Amaranth> cmr: That made it compile fine but then it failed to link missing a clang symbol
[20:36:57] *** Quits: kimundi (kimundi@moz-232C47CC.dip0.t-ipconnect.de) (Ping timeout)
[20:37:44] *** Joins: kimundi (kimundi@moz-4EC963E4.dip0.t-ipconnect.de)
[20:38:25] *** Joins: miza (miza@moz-4DD51325.home.otenet.gr)
[20:38:39] *** Quits: deio (chris@moz-B7BAB130.dynamic.tstt.net.tt) (Quit: Ex-Chat)
[20:38:49] <cmr> Amaranth: builds fine for me with the fix, do you have a new enough clang?
[20:38:51] <cmr> you need 3.3
[20:39:05] <Amaranth> cmr: I probably just have whatever xcode gave me
[20:39:32] <Amaranth> 3.2svn
[20:39:38] <cmr> ok, so too old
[20:39:46] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[20:40:02] <Amaranth> I feel like this is going to get messy
[20:40:06] <nathan7> How do I get a raw pointer to a value I have?
[20:40:09] <nathan7> (yes, unsafe-land)
[20:40:36] <cmr> rusti: let x = 5u; &x as *uint
[20:40:38] -rusti- (0x7f5c086170f0 as *())
[20:40:47] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[20:41:03] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[20:41:17] <ww> which mod is from_str from?  i got unresolved name when doing: from_str::<int>("28").  i'm using 0.8-pre built couple days back.
[20:41:18] <ecr> rusti: let x = 5u; let y: *uint = &x; unsafe { *y }
[20:41:19] -rusti- 5u
[20:41:36] <ecr> ww: std::prelude
[20:41:44] <cmr> ww: it's in the prelude. the trait and function the prelude references is in std::from_str
[20:41:59] <ww> ok. let me try that
[20:42:31] <cmr> you might need to update, I don't know when it landed.
[20:43:27] <ww> ok.  that might be the problem because i'm already using: use std::from_str; and still have the problem.
[20:43:37] <sfackler> is there a free function version of it now? You may need to call it like FromStr::from_str("28")
[20:43:45] <cmr> sfackler: yes, there is.
[20:43:49] <cmr> it just calls to the trait
[20:43:52] *** Joins: tikue_ (tkuehn@FE643D5D.E2CAEE6E.689607DE.IP)
[20:44:25] *** jdm|f00ding is now known as jdm
[20:44:45] <tikue_> ecr: i have no idea why it's failing. i ran make check on my machine and all tests passed
[20:45:47] *** kimundi is now known as zz_kimundi
[20:46:06] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[20:46:06] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1468d5bb8 to 14c8f69dd: 02http://git.io/N3iJvQ
[20:46:06] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[20:46:07] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[20:46:07] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/fsBo6w
[20:46:07] <ghrust> 13rust/06auto 14412ab49 15Steven Fackler: Don't fail in TcpStream.flush
[20:46:07] <ghrust> 13rust/06auto 14b47214f 15bors: auto merge of #9114 : sfackler/rust/flush-fix, r=brson
[20:46:08] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[20:47:30] *** Joins: CanhtTak (CanhTak@moz-BC539B0D.wl.t.ulaval.ca)
[20:47:36] <brson> flaper87: pong
[20:48:20] <veddan> I have an immutable map with its values in an mmap'd file
[20:48:24] <veddan> I would like to impl std::container::Map on it, but I can't figure out the types
[20:48:33] <veddan> I was thinking I'd expose something like Map<?[u8], ?[u8]> and let higher wrappers handle conversion to proper rust types
[20:48:38] <ecr> tikue_: yeah that's a really unclear error
[20:48:49] <nathan7> brson: in no_std-land, how do I get a raw pointer to a string?
[20:49:00] <flaper87> brson: hey, so, I'm working on recv_timeout https://github.com/mozilla/rust/issues/3015
[20:49:01] <nathan7> brson: (trying to implement str.len here without the stdlib)
[20:49:13] <cmr> nathan7: Why are you avoiding the stdlib?
[20:49:15] <flaper87> brson: I wanted to know wether that should go into the new rt, the old one or both
[20:49:22] <nathan7> cmr: Because I'm in kernelmode.
[20:49:27] <ecr> tikue_: it looks like the most recent one failed because it tried to pull in gyp from a website and the website was down...
[20:49:32] <flaper87> brson: rt/comm.rs, std/comm.rs or both ?
[20:49:42] <flaper87> or separate file w/ different trait ?
[20:49:45] <nathan7> cmr: I'm pretty certain the stdlib doesn't fare well there.
[20:49:49] <tikue_> ecr: ah. then retry? :O)
[20:50:06] <ecr> tikue_: yeah
[20:50:15] <flaper87> I think it makes sense to keep it as part of PortOne impl
[20:50:16] <cmr> nathan7: look at the implementation of length, then. You need to transmute.
[20:50:21] <nathan7> cmr: The only libc-y stuff I have implemented so far is malloc/free
[20:50:21] <cmr> len, rather
[20:50:38] <flaper87> and GenericPort
[20:50:41] <nathan7> aaand transmute seems to be stdlib too :D
[20:50:44] <ecr> tikue_: wait, I might have been looking at the wrong commit
[20:50:48] <cmr> transmute is an intrinsic.
[20:50:57] <nathan7> and thus I get to intrinsics, fun
[20:50:57] <cmr> add it to your zero.rs equivalent.
[20:51:02] <Amaranth> I wonder if homebrew's keg or whatever is going to compile llvm/clang more than once
[20:51:13] <ecr> tikue_: idk. I'll retry it and see what happens
[20:51:13] <benh> cmr: I don't think we merge consecutive line doc comments into one attribute, only multiple doc attributes into one block of markdown text later on?
[20:51:21] <cmr> benh: We already do.
[20:51:27] <nathan7> cmr: intrinsics::transmute(s) as *u8?
[20:51:32] <cmr> benh: And rustc doesn't every do markdown.
[20:51:32] <engla> nathan7: maybe look inside std::unstable::raw  and use that for your impl
[20:51:40] <cmr> *ever
[20:51:42] <nathan7> engla: Yeah, doing that currently
[20:51:47] <engla> nathan7: it has the raw representations of rust types like ~str. Of course that might change
[20:51:57] <tikue_> ecr: ok :\ thank you
[20:51:59] <Amaranth> cmr: Thanks for adding that bit to the bindgen readme btw, it actually took me a couple tries to figure that out
[20:52:06] <doomlord> kernel mode... rust OS ?? :)
[20:52:11] <cmr> nathan7: https://github.com/pcwalton/zero.rs/blob/master/zero.rs#L274
[20:52:18] <nathan7> I dropped zero.rs per pcwalton's recommendation
[20:52:20] <flaper87> mmh, perhaps separate trait that can be impl 
[20:52:22] <doomlord> anyone started such a project on github yet :)
[20:52:34] <nathan7> Ah, cool
[20:52:37] <cmr> doomlord: https://github.com/cmr/cmoss
[20:52:56] <brson> flaper87: std::comm is just a wrapper around rt::comm, and eventually rt::comm should move to std::comm. For send_timeout, I'd rather not couple it directly to the channel implementation, partly because channels are going to be rewritten again. I recommend a seperate trait on GenericChan, maybe defined in rt::io::timer.
[20:53:01] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[20:53:01] <cmr> doomlord: also rustboot and some others
[20:53:02] <nathan7> cmr: actually.. size_of(s) should be the len for non-unicode, no?
[20:53:06] <bstrie> rustos: the freshmaker
[20:53:12] <nathan7> oh wait, no, they're just pointers
[20:53:19] *** zz_kimundi is now known as kimundi
[20:53:29] <engla> nathan7: there is a newer version of zero.rs
[20:53:33] <cmr> nathan7: are you in the OS class?
[20:53:41] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[20:53:42] <flaper87> brson: gotcha
[20:53:43] <nathan7> cmr: Not in any class, just a crazy hobbyist
[20:53:47] <nathan7> engla: Yeah
[20:53:50] <cmr> ok, me too :D
[20:53:57] <flaper87> brson: is there a GH issue for the channels discussion ?
[20:54:03] <flaper87> I'm interested in following that
[20:54:05] <brson> nathan7: You'll need to duplicate the minimal parts of standard that provide that functionality. It shouldn't be too hard to trace through the code and figure out what's involved
[20:54:22] <cmr> doomlord: I haven't gotten to the interesting bits yet.
[20:54:33] <nathan7> brson: Yeah, the compiler gives me a lot of useful info about what I'm missing
[20:54:48] <nathan7> Ah, there we go
[20:54:54] <cmr> Amaranth: wait, how did you see that?
[20:54:57] <brson> flaper87: the issue that demands a rewrite is https://github.com/mozilla/rust/issues/8568?source=cc
[20:55:04] <brson> flaper87: that's the only one i can think of right now
[20:55:08] <JesseH> Anyone reason why I can't "let a = 1; println(a);" ?
[20:55:09] <brson> nathan7: have a meeting just now. bbl
[20:55:11] <doomlord> ok  its a start :)
[20:55:21] <flaper87> brson: danke
[20:55:21] <Amaranth> cmr: I deleted my bindgen changes and was lazy so checked to see if you pushed it before redoing the patch
[20:55:32] <cmr> doomlord: indeed; it was quite a quest to make it to long mode.
[20:55:33] <bstrie> JesseH: println is for strings. try either `println(a.to_str)` or `printfln!(a)`
[20:55:40] <cmr> tons of crazy bugs that never would have happened in rust
[20:55:42] <cmr> but ala
[20:55:44] <nathan7> Hmm, something curious going on here
[20:55:44] <cmr> s
[20:55:44] <Amaranth> cmr: Or, if you prefer, I'm stalking you
[20:55:48] <JesseH> Oh I see, thank you bstrie 
[20:55:53] <nathan7> cmr: I'm just using Pure64 for booting
[20:55:57] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[20:56:00] <nathan7> cmr: Being lazy [=
[20:56:05] <cmr> nathan7: cheater!
[20:56:09] <bstrie> JesseH: er, that first one is `println(a.to_str())`. sorry, I'm learning ruby today...
[20:56:10] <engla> JesseH: use println!  printfln! is the old one and will be removed :)
[20:56:12] <cmr> (and yet I am using grub :p)
[20:56:15] <nathan7> cmr: Hey, I wanted to get to the Rusty parts of it
[20:56:22] <nathan7> implementing multiboot will come later
[20:56:28] <nathan7> then I can switch to GRUB
[20:56:34] <nathan7> and not having a silly FAT16 fs
[20:56:42] <nathan7> str.rs:12:37: 12:46 error: transmute called on types with different sizes: &~str (64 bits) to (*u8,uint) (128 bits)
[20:56:45] <nathan7> Well, that's fun
[20:57:09] <nathan7> Doing the same as https://github.com/pcwalton/zero.rs/blob/master/zero.rs#L113
[20:57:13] <cmr> nathan7: dereference the &~str
[20:57:14] <engla> nathan7: use the repr :)  transmute ~str to ~[u8], then to the repr of vec, and take a pointer to the .data member
[20:57:26] <nathan7> engla: vec is std..
[20:57:29] <engla> nathan7: (*u8, uint) is the repr of a *string slice*
[20:57:32] <engla> nathan7: no
[20:57:39] <engla> nathan7: vec is a built-in type.
[20:57:50] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[20:57:51] <nathan7> engla: most of the vec stuff I see in libstd in the rust source
[20:58:13] <cmr> nathan7: I'm working (slowly) on getting libstd usable in a freestanding environment.
[20:58:26] <cmr> rather than forgoing libstd entirely.
[20:58:35] <nathan7> str.rs:12:47: 12:53 error: cannot move out of dereference of & pointer
[20:58:35] <nathan7> str.rs:12       let (_ptr, len): (*u8, uint) = transmute(*self);
[20:58:36] <nathan7> err, what
[20:58:39] <nathan7> cmr: that'd rock
[20:58:55] <engla> nathan7: that's not the representation of ~str..
[20:59:01] <nathan7> cmr: Would love to work with you on this kind of stuff, but I'm not an OS ninja.
[20:59:10] <cmr> nathan7: neither am I, this is my first os project
[20:59:14] <nathan7> Am I going stark raving mad now or what?
[20:59:16] <nathan7> pub fn str_eq(a: &str, b: &str) -> bool {
[20:59:16] <nathan7>     unsafe {
[20:59:16] <nathan7>         let (aptr, alen): (*u8, uint) = transmute(a);
[20:59:22] <nathan7> That's in zero.rs
[20:59:30] <engla> nathan7: those are string slices, not ~str.
[20:59:40] <nathan7> oh okay
[20:59:42] <cmr> nathan7: &str and ~str are entirely different types
[20:59:51] *** Quits: eatkinson (eatkinson@moz-6964FF68.airbears2.berkeley.edu) (Quit: eatkinson)
[20:59:58] <bstrie> as I said, I'm learning ruby today, and I keep feeling the urge to rebel and put semicolons and empty parens everywhere
[21:00:11] <nathan7> hehe
[21:00:33] <bstrie> dammit rust, why have you made me fear implicitness
[21:00:42] <nathan7> engla: so, transmute to [u8]
[21:00:54] *** Joins: jstevans (Instantbir@87E9DD84.EEDD3B02.DDE5D3F6.IP)
[21:01:01] *** Quits: aeqwa (aeqwa@moz-88A8BC36.dsl.tropolys.de) (Quit: Lost terminal)
[21:01:06] *** Joins: aeqwa (aeqwa@moz-88A8BC36.dsl.tropolys.de)
[21:01:11] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Quit: Leaving)
[21:01:43] <engla> to ~[u8] yes. Then to  *Vec<u8>   where Vec is a struct that looks like Vec in std::unstable::raw
[21:01:49] <engla> you can copy that definition
[21:02:14] <engla> so ~str is just  *Vec<u8>
[21:02:31] <ww> can de-construction work on member variables of self?  for (self.v1, self.v2) = (1, 2), i'm getting error: cannot move out of dereference of & pointer
[21:02:39] <nathan7> Should be able to get the length from a [u8], no?
[21:02:57] <engla> [u8] is not a type, but ~[u8] is. The fill member of Vec<T> yes
[21:02:58] <cmr> nathan7: [u8] doesn't exist as a type.
[21:03:14] *** Joins: jensnockert (jensnocker@moz-18C4287D.wireless.lu.se)
[21:03:32] *** Quits: jensnockert (jensnocker@moz-18C4287D.wireless.lu.se) (Input/output error)
[21:03:34] <nathan7> mhm
[21:03:58] <nathan7> I'm still getting used to having a statically typed language where I can also do raw shit
[21:04:13] <nathan7> (the only statically typed language I've used is Haskell - C doesn't count)
[21:04:51] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[21:06:10] *** Quits: tikue_ (tkuehn@FE643D5D.E2CAEE6E.689607DE.IP) (Ping timeout)
[21:06:37] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[21:06:59] *** Joins: tikue_ (tkuehn@FE643D5D.E2CAEE6E.689607DE.IP)
[21:07:13] <nathan7> error:  requires `exchange_free` lang_item
[21:07:14] <nathan7> whoo, fun.
[21:07:41] <nathan7> So far I just have a watermark allocator, so that's actually not really a thing that needs to do anything.
[21:07:50] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Quit: msingle)
[21:08:18] <cmr> nathan7: you don't need malloc/free if you don't use ~
[21:08:22] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[21:08:33] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[21:10:19] <Amaranth> So I have two copies of libclang (system and homebrew) so to get rustc to use the homebrew one for rust-bindgen I call rustc -L /usr/local/lib bindgen.rs but now I'vs got two of libstd and friends on my path and the compiler bails
[21:10:32] <benh> cmr: where does merging of line comments happen? 
[21:10:56] <cmr> benh: somewhere in libsyntax.
[21:11:53] *** Joins: nrc|afk (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[21:12:36] <Amaranth> alright, rustc --link-args -L/usr/local/lib bindgen.rs took care of it
[21:13:05] <nathan7> cmr: yeah, but bare [] is not a type 
[21:13:16] *** Quits: emerson (Icedove@6F3CD6F5.77F4443F.66AE2FF3.IP) (Quit: emerson)
[21:13:17] <nathan7> cmr: ah, &[u8] works
[21:15:19] *** Joins: SiegeLord (sl@moz-1DF56822.twcny.res.rr.com)
[21:15:41] *** Joins: eholk_ (eholk@moz-F70D5031.hsd1.in.comcast.net)
[21:15:55] *** Quits: sinma (sinma@moz-6A11C47C.fbx.proxad.net) (Ping timeout)
[21:18:29] *** Joins: sinma (sinma@moz-6A11C47C.fbx.proxad.net)
[21:20:35] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[21:20:45] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[21:20:47] *** Quits: hoverbear (andrew@moz-ED8D5A2F.wireless.uvic.ca) (Quit: hoverbear)
[21:21:05] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[21:21:05] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14b47214f to 14c8f69dd: 02http://git.io/N3iJvQ
[21:21:05] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[21:21:08] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[21:21:08] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/iDa3kQ
[21:21:08] <ghrust> 13rust/06auto 14dfb04d9 15David Creswick: Convert between BigInts and BigUints
[21:21:08] <ghrust> 13rust/06auto 149bee3d7 15David Creswick: Convert between BigInts, BigUints, ints, and uints...
[21:21:08] <ghrust> 13rust/06auto 14fa8dc14 15bors: auto merge of #9014 : dcrewi/rust/convert-between-bigints, r=anasazi
[21:21:10] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[21:21:43] <luisbg> is there any graphical toolkit that can be used with Rust?
[21:21:53] <luisbg> I want to implement a small application in Rust but it needs a UI
[21:22:25] <cmr> luisbg: any that expose a C ABI
[21:22:26] <luisbg> what is servo using?
[21:22:40] <luisbg> cmr, so I can use gtk's C ABI?
[21:22:40] <cmr> it isn'
[21:22:42] <cmr> t
[21:22:48] <luisbg> cmr, or do you recommend something different in Linux?
[21:22:51] <luisbg> cmr, it isn't?
[21:23:02] <luisbg> servo has a UI, what are they doing?
[21:23:05] <cmr> luisbg: gtk is a special case, because of gobject. see https://github.com/mzabaluev/grust
[21:23:16] <cmr> Servo doesn't have a UI, it just renders to a window
[21:23:19] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[21:23:24] <luisbg> cmr, yeah, I saw that project a few days ago. hopefully it will be usable soon :)
[21:23:39] <luisbg> cmr, ahhhh! ok ok
[21:23:40] <JesseH> With 'match', will "1 .. 10" be the same as "1..10"?
[21:23:46] <nathan7> engla: Getting really confused here now :(
[21:23:58] <nathan7> engla: let v: &[u8] = transmute(*self);
[21:24:01] <engla> nathan7: :-) I guess it passes
[21:24:02] <cmr> luisbg: http://www.tecgraf.puc-rio.br/iup/ is probably the only real choice.
[21:24:04] <luisbg> JesseH, Rust doesn't consider whitespaces, so I think it is the same
[21:24:07] <tikue_> rusti: match 5 { 1 .. 10 => "wee", _ => ":(" }
[21:24:08] -rusti- "wee"
[21:24:15] * JesseH tests.
[21:24:19] <JesseH> And thank you luisbg 
[21:24:40] <nathan7> engla: Now, I'm guessing that &[u8] looks like { data: *u8, len: uint }
[21:24:50] <Amaranth> cmr: gobject makes for a bit more setup work to make something that can convert the introspection files to rust but after that a lot of libraries basically automatically get bindings
[21:24:57] <engla> nathan7: yes, it's called Slice in repr 
[21:24:58] <cmr> Amaranth: I am aware.
[21:25:00] <nathan7> engla: yep
[21:25:31] <nathan7> engla: let v_struct: &Slice<u8> = transmute(v); //what I'm currently trying - getting a size mismatch here
[21:25:48] *** Quits: six600110 (six600110@moz-2FA48202.neo.res.rr.com) (Connection timed out)
[21:25:54] <cmr> luisbg: http://libagar.org/ also looks promising.
[21:25:55] <JesseH> luisbg, Yep, its the same.
[21:25:57] <nathan7> engla: so I'm guessing that &Slice<u8> is a pointer type because of size
[21:26:08] <luisbg> JesseH, :)
[21:26:10] <luisbg> cmr, thanks!
[21:26:23] <engla> nathan7: it's &T with T = Slice<u8>  so yes it's a pointer to a slice
[21:26:24] *** Joins: six600110 (six600110@moz-2FA48202.neo.res.rr.com)
[21:26:58] <nathan7> engla: So, how do I go from a &[u8] to a Slice<u8> of some form?
[21:27:28] *** Quits: aeqwa (aeqwa@moz-88A8BC36.dsl.tropolys.de) (Quit: Lost terminal)
[21:28:09] *** Joins: gareth0 (gareth0@7C428FA9.3FD5F917.1A294DCF.IP)
[21:28:26] <engla> transmute to Slice<u8>, not to &Slice<u8>
[21:28:49] <nathan7> oh, derp
[21:28:51] <engla> remember, ~[], &[], ~str, &str are special cases
[21:28:57] <nathan7> oh, right
[21:29:02] <nathan7> that crashes the compiler
[21:29:09] <kimundi> Doesn't Slice<u8> have a method that does the transumting for you? If not, it should :P
[21:29:15] <nathan7> task <unnamed> failed at 'called `Option::unwrap()` on a `None` value', /root/rust-git/src/rust/src/libstd/option.rs:301
[21:29:16] <nathan7> fun!
[21:29:34] <kimundi> that's not a crash
[21:29:36] <cmr> kimundi: he's runtimeless
[21:29:52] <nathan7> kimundi: well, an internal compiler error
[21:30:08] <nathan7> an abnormal termination, if you wish
[21:30:11] *** Joins: eatkinson (eatkinson@moz-7DE59818.airbears.berkeley.edu)
[21:30:12] <nathan7> I call that a crash
[21:30:15] *** Quits: etw (john@moz-D871A25B.nyc.res.rr.com) (Ping timeout)
[21:30:15] <engla> yes
[21:30:42] <kimundi> yeah, sorry for being nitpicky :(
[21:31:21] *** Quits: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[21:31:24] <nathan7> I'd be all up in arms in case of an actual segfault q=
[21:31:28] *** Joins: etw (john@moz-D871A25B.nyc.res.rr.com)
[21:31:30] <kimundi> haha
[21:31:51] *** Joins: tjc (tjc@moz-CE0F07BC.lightspeed.sntcca.sbcglobal.net)
[21:31:51] *** ChanServ sets mode: +o tjc
[21:31:56] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[21:32:32] *** Quits: eatkinson (eatkinson@moz-7DE59818.airbears.berkeley.edu) (Quit: eatkinson)
[21:33:59] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[21:34:42] <cmr> rustc only segfaults when using -~ extra-debug-info, usually.
[21:34:45] <cmr> Erm, -Z
[21:34:46] <cmr> not -~
[21:34:50] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Quit: lmandel)
[21:34:56] *** Quits: etw (john@moz-D871A25B.nyc.res.rr.com) (Ping timeout)
[21:35:25] <cmr> Why the heck won't github show rust in my 3-language summary thing :(
[21:35:35] <cmr> It says I'm "    C, Shell, JavaScript"
[21:35:49] <cmr> The only time I use shell is my ghetto build scripts and I haven't touched js in like a year
[21:36:51] *** Quits: ahal (ahal@FCCEA34F.7672369.D8E68FF6.IP) (Connection reset by peer)
[21:37:09] <flaper87> cmr: I was wondering the same thing yday. You've done more rust than me, that's for sure
[21:37:19] *** Joins: eatkinson (eatkinson@moz-7DE59818.airbears.berkeley.edu)
[21:37:56] *** Quits: jstevans (Instantbir@87E9DD84.EEDD3B02.DDE5D3F6.IP) (Ping timeout)
[21:38:14] <acrichto> cmr: my top language is still ruby and I stopped writing ruby like 4 years ago
[21:39:14] <tjc> github thinks Puppet is one of my top 3 languages, and I've never written a word of Puppet
[21:39:45] <acrichto> maybe they just choose 3 random languages when you make an account and assume you never look at them
[21:40:07] <tjc> haha
[21:40:18] *** Joins: Azdle (patrick@moz-8C723B60.hsd1.mn.comcast.net)
[21:40:26] *** Joins: sinma_ (sinma@moz-6A11C47C.fbx.proxad.net)
[21:40:39] <tjc> I aspire to be the person that github thinks I am
[21:41:02] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: night)
[21:41:16] *** Quits: sinma (sinma@moz-6A11C47C.fbx.proxad.net) (Ping timeout)
[21:41:27] *** Quits: eholk_ (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk_)
[21:41:32] *** Quits: eholk (eric@moz-F70D5031.hsd1.in.comcast.net) (Quit: Konversation terminated!)
[21:41:56] <nathan7> It still thinks I write Python, which I have barely written for at least a year
[21:42:24] *** Quits: tikue_ (tkuehn@FE643D5D.E2CAEE6E.689607DE.IP) (Quit: tikue_)
[21:42:34] <ww> cmr: i've updated to the latest master and from_str::<int>("28") works like a charm.  good work!
[21:43:07] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[21:44:12] *** Joins: SingingBoyo (brandon@moz-C4DC0EE7.ubcsecure.wireless.ubc.ca)
[21:47:42] <flaper87> does while moves values into its context?
[21:47:42] *** Quits: jviereck (Adium@moz-58A87BA7.dip0.t-ipconnect.de) (Quit: Leaving.)
[21:47:47] <flaper87> `while`
[21:48:11] *** Joins: tikue_ (tkuehn@FE643D5D.E2CAEE6E.689607DE.IP)
[21:48:42] <tikue_> ecr: you wanna retry that pr?
[21:48:55] *** Quits: eatkinson (eatkinson@moz-7DE59818.airbears.berkeley.edu) (Quit: eatkinson)
[21:50:24] *** Joins: eatkinson (eatkinson@moz-7DE59818.airbears.berkeley.edu)
[21:50:55] <tikue_> oh nvm, i see you already did
[21:51:02] <SingingBoyo> flaper87: don't think so, not completely sure though.
[21:51:25] *** Quits: sinma_ (sinma@moz-6A11C47C.fbx.proxad.net) (Quit: Konversation terminated!)
[21:51:26] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[21:51:40] *** Joins: etw (john@moz-D871A25B.nyc.res.rr.com)
[21:51:56] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[21:51:57] <flaper87> SingingBoyo: I think it does, but I need to confirm that. 
[21:52:30] *** Quits: eatkinson (eatkinson@moz-7DE59818.airbears.berkeley.edu) (Quit: eatkinson)
[21:52:42] <SingingBoyo> rusti: let x = ~2;  let mut i = 0;  while(i<2){i += *x}  x
[21:52:43] -rusti- ~2
[21:53:20] *** Quits: etw (john@moz-D871A25B.nyc.res.rr.com) (Ping timeout)
[21:54:49] <SingingBoyo> flaper87:  It'd move values if needed but it doesn't move things unless it has to, as far as I can tell
[21:55:25] <SingingBoyo> but what do I know, I'm a coffee-deprived second year CS student :D
[21:55:30] *** Joins: etw (john@moz-D871A25B.nyc.res.rr.com)
[21:55:45] <flaper87> SingingBoyo: that makes more sense. I think I've got some code where 'self' is being moved but I don't know exactly why
[21:56:02] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[21:56:02] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14fa8dc14 to 14c8f69dd: 02http://git.io/N3iJvQ
[21:56:03] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[21:56:04] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[21:56:04] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/O0tqBA
[21:56:04] <ghrust> 13rust/06auto 148c5402f 15SiegeLord: Properly encode/decode structural variants.
[21:56:04] <ghrust> 13rust/06auto 147ae4fd7 15SiegeLord: Rename encode_struct_field_names to encode_struct_fields to reflect what it actually does
[21:56:05] <ghrust> 13rust/06auto 1455206d5 15SiegeLord: Add a test for cross-crate struct variants
[21:56:07] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[21:56:46] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[21:57:11] *** Quits: etw (john@moz-D871A25B.nyc.res.rr.com) (Ping timeout)
[21:59:07] *** Quits: SingingBoyo (brandon@moz-C4DC0EE7.ubcsecure.wireless.ubc.ca) (Ping timeout)
[22:00:32] *** Joins: emerson (Icedove@6F3CD6F5.77F4443F.66AE2FF3.IP)
[22:03:42] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[22:03:50] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[22:03:54] * AlisonW looks too to see what github things I use. is shocked to see "Shell, Ruby, JavaScript" - I hate Ruby!
[22:04:06] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[22:04:14] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[22:05:01] *** Joins: SingingBoyo (brandon@moz-C4DC0EE7.ubcsecure.wireless.ubc.ca)
[22:05:12] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:05:21] <ecr> AlisonW: github thinks I write Objective-C, Python, and Emacs Lisp. It would be difficult for it to be more inaccurate.
[22:05:43] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[22:06:02] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[22:06:04] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[22:06:38] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:06:39] <joelteon> what languages are your repos in
[22:06:44] <cmr> Someone should contact github support, because this featuer is clearly broken.
[22:07:01] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[22:07:03] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[22:07:30] <AlisonW> um .. ah, one is ruby, so I guess that is where they've got it from. (and that was because I was thnking of a PHP rewrite)
[22:07:39] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[22:07:55] <ecr> 1 Rust, 2 Haskell, 1 C, 1 Python
[22:08:06] *** Quits: SingingBoyo (brandon@moz-C4DC0EE7.ubcsecure.wireless.ubc.ca) (Ping timeout)
[22:08:08] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:08:22] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[22:10:24] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[22:10:26] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[22:10:26] *** ChanServ sets mode: +ao brson brson
[22:10:48] <AlisonW> if I fork a few of the projects I'm watching it should change ...
[22:15:16] *** Quits: miza (miza@moz-4DD51325.home.otenet.gr) (Input/output error)
[22:15:53] *** Quits: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com) (Ping timeout)
[22:15:59] <doomlord> i noticed this too
[22:16:27] <doomlord> githubs language guesses are a bit random
[22:16:54] <doomlord> although today .. its accurate.
[22:17:05] *** Joins: etw (john@moz-D871A25B.nyc.res.rr.com)
[22:17:43] <Scriptor> it's fairly accurate for me
[22:18:50] *** Quits: tjc (tjc@moz-CE0F07BC.lightspeed.sntcca.sbcglobal.net) (Quit: Places to go, people to annoy)
[22:21:23] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[22:21:54] <flaper87> w00000000000000000000000000t rec_timeout seems to work correctly... Adding more tests
[22:22:10] *** Joins: fyolnish (fyolnish@moz-75A43B1A.uqwimax.jp)
[22:23:09] <ecr> \o/
[22:24:21] *** Joins: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com)
[22:25:04] <cmr> flaper87: awesome!
[22:25:38] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[22:28:32] *** Quits: tikue_ (tkuehn@FE643D5D.E2CAEE6E.689607DE.IP) (Quit: tikue_)
[22:29:06] <flaper87> btw, while working on this, I thought that a try_timeout (i called try_for) could be useful as well: https://gist.github.com/FlaPer87/6530648 
[22:29:09] <flaper87> what do you guys think?
[22:29:20] * flaper87 needs to improve the impl
[22:29:24] <flaper87> that was just for testing
[22:29:33] <cmr> pcwalton: ping
[22:30:34] *** Joins: jstevans (Instantbir@81AD09AA.AA9008B0.DDE5D3F6.IP)
[22:30:40] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Ping timeout)
[22:33:34] <flaper87> cmr: btw, dunno if you saw this before: https://github.com/FlaPer87/rust-for-real
[22:33:48] <flaper87> just wanted to point it out to you, and perhaps share it in TWIR
[22:34:08] <cmr> flaper87: cool, thanks!
[22:35:08] <ww> i have a hard time getting TcpStream casted to ReaderUtil.  
[22:35:08] *** Quits: CanhtTak (CanhTak@moz-BC539B0D.wl.t.ulaval.ca) (Connection reset by peer)
[22:35:11] <ww> let reader = ~stream as ~std::rt::io::extensions::ReaderUtil;
[22:35:31] <ww> got failed to find an implementation of trait std::rt::io::Reader for ~std::rt::io::net::TcpStream
[22:35:47] <ww> ^failed to find an implementation of trait std::rt::io::Reader for ~std::rt::io::net::tcp::TcpStream
[22:36:53] <ww> i see TcpStream implements rt::io::Reader in rt/io/net/tcp.rs
[22:37:12] <ecr> ww: ah, yes, but ~TcpStream isn't TcpStream as far as trait implementations are concerned
[22:37:51] <ecr> it's a little mind boggling, I know
[22:38:36] <ww> ok, so if i turn ~stream back to TcpStream.  I got some other problems.  Let me reproduce it
[22:38:46] <ecr> alright
[22:39:25] <ChrisMorgan> ww: why would you do "as ReaderUtil"? "as Reader" I could understand.
[22:39:52] <ww> actually I want to get to ReaderUtil from TcpStream
[22:40:03] <ww> TcpStream implements Reader
[22:40:06] *** jorendorff is now known as jorendorff_away
[22:40:07] <ecr> you should just be able to call ReaderUtil methods on a TcpStream
[22:40:13] <ecr> as long as ReaderUtil is in scope
[22:40:17] *** Joins: eatkinson (eatkinson@moz-6964FF68.airbears2.berkeley.edu)
[22:40:19] <ecr> no need to cast
[22:40:37] <ww> hmm, i got unresolved name on things like read_line()
[22:40:45] <ChrisMorgan> You need to import ReaderUtil.
[22:40:56] <ww> ok, let me try that
[22:41:19] <ecr> there's also the minor issue of ReaderUtil not implementing read_line()
[22:41:41] <flaper87> kk, gotta get some rest. Will submit the patch tomorrow! 
[22:41:43] * flaper87 waves
[22:41:53] <ecr> cya
[22:41:56] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[22:42:15] *** flaper87 is now known as flaper87|afk
[22:42:30] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[22:42:46] <ww> doh!  haha, that's funny.  test the function that happens to be missing
[22:42:55] <ecr> >.<
[22:43:05] <cmr> heh
[22:43:11] <ecr> like I said, there's a fair chunk of functionality we haven't ported yet
[22:43:54] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:44:04] *** Quits: eatkinson (eatkinson@moz-6964FF68.airbears2.berkeley.edu) (Quit: eatkinson)
[22:44:20] <ecr> read_line is simple enough that you can build your own for now. we'll get to it eventually (or you can add it in yourself :) )
[22:44:34] *** Joins: gavinb (gavinb@DC351F70.3659A0B0.C98315F2.IP)
[22:45:33] <ww> i was hoping to leverage ReaderUtil to avoid re-implementing all the buffered read, etc.
[22:46:09] <ww> anyway, it works now.  I tried read_bytes().  importing ReaderUtil works like a charm.  no need to cast.
[22:46:38] <erickt> cmr: ping
[22:46:41] <cmr> erickt: pong
[22:46:46] <ecr> ww: I think someone just added BufferedReader / BufferedWriter the other day. should be in std::rt::io::buffered.rs
[22:46:54] <ww> old example on std::io::ReaderUtil does cast.  that's why i thought casting is needed.
[22:47:12] <ww> ok, i'll check that out
[22:47:13] <erickt> cmr: re https://github.com/mozilla/rust/pull/9108, by impact are you referring to bounds checking in general, or adding a __builtin_expect-like fn?
[22:47:24] <cmr> erickt: __builtin-expect-like
[22:47:30] <ecr> ww: that's one of the big changes from old io to new io. old io relied on trait objects while new io doesn't. much better performance that way
[22:47:32] <cmr> I was unaware it actually affected generated code in any way.
[22:47:34] <cmr> Does it?
[22:47:38] *** Quits: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Ping timeout)
[22:47:59] <ww> ok
[22:48:28] <erickt> cmr: see http://blog.man7.org/2012/10/how-much-do-builtinexpect-likely-and.html. __builtin_expect can definitely help/hurt performance
[22:48:39] <ecr> ww: trait objects require dynamic dispatch. new io lets you use trait objects if you like, but doesn't mandate it like old io did. you can get away with static dispatch only in new io.
[22:48:56] <ww> ok, good info
[22:48:58] *** Joins: tikue_ (tkuehn@FE643D5D.E2CAEE6E.689607DE.IP)
[22:49:24] <cmr> erickt: this blog post is in the context of gcc
[22:49:37] <cmr> Does llvm do this too?
[22:50:02] <erickt> cmr: yep, llvm's support is described here: http://llvm.org/docs/BranchWeightMetadata.html
[22:50:07] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[22:50:49] <erickt> cmr: I've never used llvm's branch prediction api, so I couldn't tell you how to actually use it though
[22:51:29] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Input/output error)
[22:51:35] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[22:51:35] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[22:51:41] <engla> erickt: we are using CheckedAdd which is using an llvm intrinsic to get the carry bit for overflow, so it should be clear to the compiler what it is branching on
[22:51:44] <engla> if it uses that info
[22:52:03] <erickt> engla: cool
[22:52:26] <cmr> erickt: well, +1 then
[22:52:34] *** Joins: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net)
[22:52:35] <engla> it's an intrinsic  pub fn u64_add_with_overflow(x: u64, y: u64) -> (u64, bool);
[22:52:54] *** Quits: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se) (Client exited)
[22:53:35] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[22:55:04] *** kimundi is now known as zz_kimundi
[22:55:54] <engla> I guess it's going to matter the most inside vec.push() ?
[22:55:59] *** nrc|afk is now known as nrc
[22:58:33] <dbaupp> it's probably not *that* important, since the cost of an allocation will be much larger than microoptimising the branching on the new size
[22:58:50] *** zz_kimundi is now known as kimundi
[22:59:02] <engla> this is about the arithmetic before you decide to allocate
[23:00:11] <engla> I actually wanted to say with the CheckedAdd comment that maybe llvm already has enough information to do branch prediction well
[23:00:13] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[23:00:47] <dbaupp> yeah, that's what I mean, the arithmetic will always be cheaper than the allocation
[23:00:57] *** Joins: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net)
[23:01:06] <cmr> Allocations become exponentially less common as your vector grows, though.
[23:01:21] *** jorendorff_away is now known as jorendorff
[23:01:57] <dbaupp> yeah, but the arithmetic only happens in the case when you know you need to reallocate, so it is becoming equally less common
[23:02:05] <engla> dbaupp: but we do the arithmetic for every vec.push, but the allocation only seldomly
[23:02:10] <dbaupp> engla: really?
[23:02:22] <engla> dbaupp: the new code. https://github.com/mozilla/rust/pull/9108/files#L2R1360
[23:02:22] <dbaupp> ooohh. we need to increase the length
[23:02:25] * dbaupp is stilly
[23:02:27] <dbaupp> *silly
[23:02:28] <dbaupp> :S
[23:03:26] <engla> The check is only needed because in some places we don't check if the allocation succeeds.
[23:03:29] *** Quits: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net) (Ping timeout)
[23:03:46] <engla> so .reserve_additional is written to always reserve more space (or fail!(), or OOM, or whatever malloc does)
[23:04:03] *** Quits: gareth0 (gareth0@7C428FA9.3FD5F917.1A294DCF.IP) (Quit: Leaving)
[23:05:39] *** Joins: echristo (echristo@60A74940.D6CCE4AE.77834EAA.IP)
[23:05:42] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[23:05:44] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[23:05:45] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[23:06:05] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[23:06:05] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/O0tqBA
[23:06:05] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[23:06:35] *** Quits: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[23:08:09] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[23:10:01] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[23:10:54] <dcrewi> what's the best word for "the number of bits this integer uses"?
[23:11:01] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[23:11:01] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/jcaOLg
[23:11:01] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[23:11:02] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[23:11:02] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/ubO83w
[23:11:02] <ghrust> 13rust/06auto 1420f1584 15Tim Kuehn: Rendezvous stream for synchronous channel messaging
[23:11:02] <ghrust> 13rust/06auto 1405b30b1 15bors: auto merge of #8908 : tikue/rust/master, r=anasazi...
[23:11:02] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[23:11:07] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[23:11:46] <cmr> dcrewi: width
[23:11:56] <ecr> dcrewi: https://en.wikipedia.org/wiki/Kolmogorov_complexity
[23:12:41] <dcrewi> I'm looking to apply it to bignums, if that makes a difference
[23:12:59] <dcrewi> n.bit_width() ?
[23:13:23] <dbaupp> bit_length() ?
[23:13:35] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[23:13:43] <ecr> I stand by my previous suggestion
[23:13:53] <cmr> heh
[23:14:08] <dcrewi> n.kolmogorov_complexity() it is
[23:14:11] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:14:40] <engla> bits() -> uint ?
[23:14:43] <cmr> Is that value even computable?
[23:14:50] <ecr> cmr: not in general
[23:14:57] <cmr> Didn't think so
[23:15:02] <engla> rusti: std::num::Primitive::bits(None::<int>)
[23:15:05] -rusti- 64u
[23:15:31] <ecr> (do not really use kolmogorov complexity as the name. literally no one will know what it means)
[23:15:44] <ecr> (even though it's exactly what you're asking for)
[23:15:51] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[23:15:54] <dbaupp> n.estimate_of_kolmogorov_complexity() or n.upper_bound_of_kolmogorov_complexity()?
[23:16:21] <ecr> cmr: but you can't really get more compact for integers. at least not that i'm aware of
[23:17:06] <dbaupp> ecr: presumably you can? since everything can be represented as an integer?
[23:17:16] <dcrewi> powers of two can be hella compressed
[23:17:18] * dbaupp isn't an expert at all
[23:18:05] *** Joins: ChrisOei (c@moz-2B20A8E8.partechvc.com)
[23:18:06] <ecr> dbaupp: if you can represent it, then you can use that size as an upper bound. any more compact representation must be not be bigger than what you already have
[23:18:22] <Jesse> sigh c++ https://bugzilla.mozilla.org/show_bug.cgi?id=906284#c1
[23:18:27] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Quit: Konversation terminated!)
[23:18:40] <ecr> dbaupp: I believe a lower bound is uncomputable, but I'm not entirely sure of that
[23:19:00] <dcrewi> also, what should bit_length() or whatever return for negative BigInts? I'm leaning towards I shouldn't even write that function
[23:19:03] <dbaupp> ecr: right
[23:19:23] <dbaupp> ecr: well, not really, 0 is always a lower bound ;)
[23:19:24] *** Joins: dherman (dherman@moz-7B0110AD.mv.mozilla.com)
[23:19:24] *** ChanServ sets mode: +ao dherman dherman
[23:19:31] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[23:19:45] <dbaupp> dcrewi: (-x).bit_length() == x.bit_length() ?
[23:19:50] <cmr> dcrewi: ceil(log2(v)) + 1?
[23:19:58] <cmr> dbaupp: extra bit for the sign?
[23:20:30] <dcrewi> that is the question
[23:20:54] <dbaupp> cmr: extra bit for BigInt vs BigUint?
[23:21:02] <cmr> dbaupp: I would think so
[23:21:13] <cmr> Not really sure :S
[23:21:13] *** Quits: tikue_ (tkuehn@FE643D5D.E2CAEE6E.689607DE.IP) (Quit: tikue_)
[23:21:20] *** Quits: dherman (dherman@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[23:21:21] *** Quits: gavinb (gavinb@DC351F70.3659A0B0.C98315F2.IP) (Ping timeout)
[23:21:29] <ecr> dbaupp: well, yes I suppose so since that literally just means "some amount of information is required"
[23:21:34] *** Quits: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu) (Input/output error)
[23:21:46] <dbaupp> depends what bit_length is attempting to do: approximation to log2, or amount of memory required to store.
[23:22:35] <ecr> dbaupp: hm, actually my previous statement is only true if it's a strict lower bound (< 0). if it's <= 0, then it means "some, or potentially no, information is required". i'm pretty sure 0 bit entities don't exist though
[23:22:57] <cmr> ecr: I'm pretty sure they can't exist, by definition.
[23:23:06] *** Joins: eatkinson (eatkinson@EEDFA61C.772DB3ED.90B17E8F.IP)
[23:23:25] <ecr> unless... maybe generic type variables count as a 0 bit entity? you don't know anything about them. not even if they really exis
[23:23:48] <ecr> hm
[23:24:18] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[23:25:04] *** Quits: jgilbert (jgilbert@40BD3B76.2AD327F9.973C8D27.IP) (Ping timeout)
[23:27:25] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[23:28:53] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[23:28:53] *** ChanServ sets mode: +ao dherman dherman
[23:31:46] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[23:33:26] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[23:34:07] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[23:37:22] *** Quits: jstevans (Instantbir@81AD09AA.AA9008B0.DDE5D3F6.IP) (Ping timeout)
[23:37:37] <ecr> crap. i've wandering into type madness
[23:37:50] <ecr> so much so I can no longer use tenses properly
[23:40:11] <engla> is there a way to make reserve_at_least simpler:  self.reserve(cmp::max(n, uint::next_power_of_two(n)));   ?  the problem is that next_power_of_two will return 0 if n is larger than 2**63
[23:40:16] <engla> for 64-bit
[23:42:35] <ecr> engla: does next_power_of_two(power_of_two) == power_of_two usually?
[23:42:44] <engla> yes
[23:42:47] <ecr> hm
[23:43:08] <dbaupp> brson: https://github.com/mozilla/rust/pull/9096 r?
[23:44:51] *** Joins: tikue_ (tkuehn@FE643D5D.E2CAEE6E.689607DE.IP)
[23:46:03] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[23:46:03] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1405b30b1 to 147f0d261: 02http://git.io/N3iJvQ
[23:46:03] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[23:46:05] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[23:46:05] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/bmuCbA
[23:46:05] <ghrust> 13rust/06auto 14dfb04d9 15David Creswick: Convert between BigInts and BigUints
[23:46:05] <ghrust> 13rust/06auto 149bee3d7 15David Creswick: Convert between BigInts, BigUints, ints, and uints...
[23:46:06] <ghrust> 13rust/06auto 1491ab8a3 15bors: auto merge of #9014 : dcrewi/rust/convert-between-bigints, r=anasazi
[23:46:08] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[23:46:12] <tikue_> ecr: ok, i'm 100% positive that it's ok now. the problem was that there were references in the tests to sync_stream but it had been renamed to rendezvous. I don't know why it wasn't caught when I ran make check on my machine
[23:47:21] <ecr> engla: if you do cmp(n, next_power_of_two(n)), then that case will be the only time when you'll get n > next_power_of_two(n)). use that as a flag?
[23:47:31] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[23:48:03] *** Quits: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com) (Ping timeout)
[23:48:25] <engla> I think it's a separate case of overflow
[23:48:31] <ecr> tikue_: r+'ed
[23:48:42] <engla> but actually, the next_power_of_two algorithm could be written to use CheckedAdd
[23:48:46] <engla> I can do that.
[23:48:57] <ecr> that would work too
[23:49:46] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[23:49:46] *** Joins: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com)
[23:50:26] <ww> got an internal compiler error.
[23:50:36] <ecr> :(
[23:50:40] <Luqman> ww: a rite of passage :P
[23:50:46] <ww> doing: let tcp_stream = TcpStream::connect(sockAddr);
[23:50:53] <ww> let bstream = BufferedStream::new(tcp_stream);
[23:51:05] <ecr> huh
[23:51:10] <dbaupp> speaking of CheckedAdd, should we have and impl for floating points? 1.0.checked_add(1.0) == Some(2.0) and 1e100.checked_add(1.0) == None (complete loss of precision) and 9e308.checked_add(9e308) == None (overflow) ?
[23:51:12] <ecr> file an issue I guess
[23:51:22] <ww> task <unnamed> failed at 'assertion failed: `(left == right) && (right == left)` (left: `1`, right: `0`)', C:\temp\rust\master\rust\src\librustc\middle\trans\callee.rs:385
[23:51:51] <ww> i was adding those two lines and when compiled, got the ^error^
[23:52:54] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[23:53:21] <dbaupp> rusti: use std::rt::io::*; let tcp = net::tcp::TcpStream::connect(FromStr::from_str("127.0.0.1:1000)); let buf = buffered::BufferedStream::new(tcp);
[23:53:21] -rusti- <anon>:7:16: 7:17 error: unknown start of token: ?
[23:53:22] -rusti- <anon>:7     println!("{:?}", r)
[23:53:22] -rusti-                          ^
[23:53:22] -rusti- application terminated with error code 101
[23:53:29] <dbaupp> rusti: use std::rt::io::*; let tcp = net::tcp::TcpStream::connect(FromStr::from_str("127.0.0.1:1000")); let buf = buffered::BufferedStream::new(tcp);
[23:53:30] *** Joins: Larry (larryfox@26EE99DC.88C61CC9.ECED8BE3.IP)
[23:53:35] -rusti- timeout triggered!
[23:53:35] -rusti- playpen: failed to open /sys/fs/cgroup/memory/playpen/7472/cgroup.procs: No such file or directory
[23:54:38] <ecr> well it compiled
[23:55:15] *** Quits: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com) (Ping timeout)
[23:57:46] <ecr> I think it's dinner time
[23:58:34] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[23:59:16] *** Quits: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com) (Quit: ecr)
[23:59:37] *** Quits: eatkinson (eatkinson@EEDFA61C.772DB3ED.90B17E8F.IP) (Quit: eatkinson)
