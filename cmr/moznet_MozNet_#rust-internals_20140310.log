[00:18:52] *** Quits: luziie (luziie@moz-CD18B14B.customer.cdi.no) (Connection reset by peer)
[00:20:02] *** Joins: luz (lu.cy@moz-CD18B14B.customer.cdi.no)
[00:25:15] *** kimundi is now known as zz_kimundi
[00:29:30] *** Quits: strcat (strcat@moz-61B073BC.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[00:30:36] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[00:30:58] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[00:32:38] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[00:32:51] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[00:33:12] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[00:34:19] *** Quits: luz (lu.cy@moz-CD18B14B.customer.cdi.no) (Quit: 04‚Üê)
[00:36:20] *** Joins: luziie (luziie@moz-CD18B14B.customer.cdi.no)
[00:39:38] *** Quits: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net) (Client exited)
[00:43:05] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[00:44:26] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[01:08:24] *** Joins: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca)
[01:28:57] <klutzy> `make install` seems broken on win32
[01:28:59] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:29:11] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Connection reset by peer)
[01:31:22] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:40:24] *** Quits: rustilite (rustilite@moz-61B073BC.cpe.net.cable.rogers.com) (Client exited)
[01:40:25] *** Quits: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com) (Client exited)
[01:42:40] <brson> klutzy: it definiitely is
[01:42:50] <brson> it should probably just refuse to do anything
[01:44:28] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[01:52:59] *** Quits: doomlord__ (servitor@moz-99BE89EC.range86-184.btcentralplus.com) (Ping timeout)
[01:53:22] *** Joins: doomlord__ (servitor@moz-99BE89EC.range86-184.btcentralplus.com)
[01:53:50] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[01:59:22] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[01:59:30] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[01:59:30] *** ChanServ sets mode: +qo brson brson
[02:03:45] *** japaric1 is now known as japaric
[02:04:17] <klutzy> brson: it worked 1~2 month ago. do you mean `make install` is going to be removed?
[02:07:41] *** Quits: japaric (japaric@8068DEC.4F37C8B4.BFC118EE.IP) (Ping timeout)
[02:10:08] <brson> klutzy: `make install` is not going to be removed, no
[02:10:17] *** Joins: japaric (japaric@BBDB8E25.136396F4.A936879B.IP)
[02:10:34] <brson> i did not realize that it ever worked on windows
[02:12:05] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[02:13:04] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:13:30] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:13:32] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:31:27] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[02:31:48] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[02:33:30] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[03:29:49] *** Joins: erickt__ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:32:11] *** Quits: erickt__ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:37:28] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Connection reset by peer)
[03:50:41] *** Quits: zz_kimundi (kimundi@moz-2289D570.dip0.t-ipconnect.de) (Ping timeout)
[03:54:22] *** Joins: zz_kimundi (kimundi@moz-17FBB277.dip0.t-ipconnect.de)
[03:54:23] *** zz_kimundi is now known as kimundi
[03:59:08] <brson> acrichto: re-r? https://github.com/mozilla/rust/pull/12304
[03:59:14] <brson> i've ignored some tests that don't work on bsd
[03:59:57] *** Quits: japaric (japaric@BBDB8E25.136396F4.A936879B.IP) (Ping timeout)
[04:09:09] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[04:30:21] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[04:30:25] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Quit: Konversation terminated!)
[04:30:32] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[04:34:33] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Connection reset by peer)
[04:35:26] <eddyb> strcat: so this showed up in my github https://github.com/pczarn/code/commit/bea7111b2f3577706e768351fdd46fa7cf0d43a1#commitcomment-5614611
[04:35:30] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[04:36:34] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[04:37:03] <eddyb> strcat: what do you think about a format-like inline assembly?
[04:38:41] *** Quits: intuxicated (intuxicate@A9443CC2.9D1E10BA.3FFBF42F.IP) (Quit: Leaving)
[04:39:18] <eddyb> "we could probably use pandoc's native highlighting capatibilities i.e. Kate" whaa?
[04:39:55] <bstrie> eddyb: `a = 7 -> c` is this normal `format!` syntax?
[04:40:07] <bstrie> I can't imagine what it's doing
[04:40:08] <eddyb> bstrie: it's... odd. I don't even know what it does
[04:40:09] <bstrie> (from that link)
[04:40:40] <eddyb> re: pandoc - I guess someone had the same smart idea as I did, and converted the kate syntax highlighting files to something else
[04:44:59] <eddyb> https://github.com/mozilla/rust/pull/12733 woo less logic in liveness
[04:50:05] <eddyb> https://github.com/mozilla/rust/wiki/Meeting-workweek-2014-03-03 oooh
[04:54:10] <eddyb> nmatsakis: "unsized types are linear and can be passed as arguments" this means we'll get something close to &move T with unsized T :D?
[05:05:34] *** Joins: angdev (uid7041@moz-E77DEB21.irccloud.com)
[05:05:56] <eddyb> https://github.com/rust-lang/rfcs time to move VG there. bleah, technical writing
[05:13:22] <eddyb> nmatsakis: introducing tcx.borrow(), for all your lifetime variance workaround needs
[05:13:49] <eddyb> even if it's not theoretically safe, it's not worse than ty::get(), which hasn't blown up on us yet, so we should be fine
[05:19:55] *** Joins: edwardw (edwardw@ED48E813.BF27AFA4.B9C6B12A.IP)
[05:22:08] <edwardw> bors is paralysed by the offline auto-linux-64-x-android-t
[05:22:48] <eddyb> edwardw: glad to see you removing functionality from liveness
[05:22:55] <eddyb> is there any error left from it?
[05:23:07] <eddyb> can we move some of the warnings to borrowck?
[05:23:16] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Quit: Leaving)
[05:23:17] <edwardw> no, borrowck handles error well
[05:23:27] <edwardw> eddyb: I;m not sure about warnings though
[05:23:32] <edwardw> I'm*
[05:24:30] <edwardw> actually I accidentally removed a warning from it and nmatsakis caught that :)
[05:26:51] <eddyb> add a test if the tests don't include it. or do we test warnings at all?
[05:27:37] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[05:28:23] <edwardw> eddyb: we had, but that test happened to be not very thorough
[05:31:15] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:33:00] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:35:51] <sfackler> how would people feel about allowing attributes on match arms? It'd really only be for #[cfg()]
[05:36:19] *** Quits: brson (brson@6A848D32.C1B840DD.76F66111.IP) (Quit: leaving)
[05:36:46] <eddyb> sfackler: as long as the AST doesn't inflate again
[05:37:07] <sfackler> It'll add a Vec<Attribute> to Arm_
[05:37:59] <sfackler> which will almost always be empty
[05:39:18] <eddyb> where is that Arm_?
[05:39:33] * eddyb can't wait for DST ~[T] to push back the AST size again
[05:39:47] <eddyb> I'm guessing Arm = Spanned<Arm_>
[05:39:59] <eddyb> and in a vector?
[05:40:12] <eddyb> shouldn't be that bad
[05:40:35] <sfackler> turns out it's just Arm
[05:41:05] <eddyb> does this make sense "workaround lifetime variance not recognizing that ctxt<'b> <: ctxt<'a> where 'b <: 'a"?
[05:41:13] <eddyb> from a notational POV
[05:44:21] <sfackler> <: is subtyping?
[05:44:36] <eddyb> I think so
[05:45:46] <sfackler> seems reasonable to me
[05:49:48] *** Quits: mawuli (mawuli@moz-A89BBCE.com.gh) (Connection reset by peer)
[05:58:43] *** Joins: japaric (japaric@11FE3B40.F60EC59D.F29ED47E.IP)
[06:05:43] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[06:06:23] *** Joins: mawuli (mawuli@moz-A89BBCE.com.gh)
[06:07:22] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[06:07:31] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[06:09:11] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[06:09:33] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[06:11:14] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[06:25:03] *** Joins: eibwen (kvirc@moz-BE2B013A.dip0.t-ipconnect.de)
[06:27:53] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[06:40:38] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[06:57:20] <sfackler> ack, does anyone understand pprust?
[06:57:50] * eddyb slowly rises hand
[06:59:05] <eddyb> sfackler: unless you need help with the space breaking magic
[06:59:15] <sfackler> it seems to be adding an extra newline above attributes attached to match arms
[06:59:28] <sfackler> and I have no idea what the hell an ibox or cbox is :P
[06:59:35] <eddyb> look at them
[06:59:47] <eddyb> the answer comes eventually
[07:12:40] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[07:17:30] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[07:24:16] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[07:24:23] <eddyb> I think something funky happens if I pipe the output of rustc through less
[07:24:29] <eddyb> it doesn't finish until I look at the end
[07:31:25] <sfackler> that's just the way pipes work
[07:31:31] <sfackler> they have a fixed size internal buffer
[07:31:42] <sfackler> so rustc's write calls will block until you scroll down
[07:31:57] <strcat> eddyb: less is lazy
[07:32:02] <strcat> it's intended to be that way
[07:32:27] <strcat> if you don't want it, use unbuffer.
[07:32:58] <eddyb> sfackler: oh I see
[07:33:03] <eddyb> I was wondering how that works
[07:34:19] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[07:34:40] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[07:36:20] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[07:43:27] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[07:43:45] <edwardw> question: what's the difference between "let b: ~[&str] = a.lines().collect();" and "let b: Vec<&str> = a.lines().collect();" w.r.t typeck and / or regionck?
[07:44:00] <eddyb> ouch
[07:44:11] <eddyb> edwardw: the latter is causing you problems, isn't it?
[07:44:24] <edwardw> eddyb: actually the former
[07:44:30] <eddyb> huh...
[07:44:33] <edwardw> https://github.com/mozilla/rust/issues/12223
[07:45:04] <eddyb> things like Option<&T> don't get all the variance behavior that &T does
[07:45:11] <eddyb> fixing that is planned
[07:45:22] <eddyb> so maybe in this case too much is allowed?
[07:45:45] <edwardw> k, I'll keep that in mind
[07:46:03] <edwardw> this bug is a ghost
[07:46:59] <eddyb> regionck should link up Vec<&'a str> with the original &'a str
[07:47:09] <eddyb> not sure why ~[&str] doesn't get that....
[07:47:17] <edwardw> so why not ~[&str]?
[07:47:32] <edwardw> yeah, that seems to cause all the trouble
[07:47:47] <eddyb> ohh it's this bug
[07:47:59] <eddyb> rusti: fn foo() -> &str {"foo"} foo()
[07:48:01] -rusti- "foo"
[07:48:37] <eddyb> rusti: let s = ~"foo"; let x: &str = s; drop(s);
[07:48:39] -rusti- pastebinned 8 lines of output: http://sprunge.us/PiYA
[07:48:58] <eddyb> rusti: let s = ~"foo"; let x: Option<&str> = s.as_slice(); drop(s);
[07:48:58] -rusti- <anon>:10:47: 10:59 error: mismatched types: expected `std::option::Option<&str>` but found `&str` (expected enum std::option::Option but found &str)
[07:48:58] -rusti- <anon>:10         let s = ~"foo"; let x: Option<&str> = s.as_slice(); drop(s);
[07:48:58] -rusti-                                                         ^~~~~~~~~~~~
[07:48:58] -rusti- error: aborting due to previous error
[07:49:00] -rusti- application terminated with error code 101
[07:49:06] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[07:49:06] <eddyb> rusti: let s = ~"foo"; let x: Option<&str> = Some(s.as_slice()); drop(s);
[07:49:07] *** Joins: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net)
[07:49:07] *** ChanServ sets mode: +o huon
[07:49:07] *** Quits: eibwen (kvirc@moz-BE2B013A.dip0.t-ipconnect.de) (Ping timeout)
[07:49:07] -rusti- pastebinned 8 lines of output: http://sprunge.us/bgHI
[07:49:23] <eddyb> hmpf
[07:49:59] <edwardw> seems ok here
[07:50:00] <eddyb> edwardw: I dunno... just look for a lack of propagation into T of ~[T] in regionck/inference
[07:50:14] <edwardw> eddyb: sure, ty
[07:50:34] <eddyb> what I meant to say is that it's related to this bug: fn foo() -> &str {"foo"}
[07:50:53] <eddyb> anonymous lifetimes in positions other than function arguments
[07:51:08] <edwardw> k
[07:51:10] <eddyb> inside functions, they should *always* infer, not remain anonymous
[07:51:54] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Connection reset by peer)
[07:52:43] <eddyb> let foo = ~"hello"; let bar: ~[&str] = foo.words().collect(); drop(foo); bar[0]
[07:52:51] <eddyb> rusti: let foo = ~"hello"; let bar: ~[&str] = foo.words().collect(); drop(foo); bar[0]
[07:52:52] -rusti- " \x00\x00\x00\x00"
[07:52:56] <eddyb> haha
[07:53:32] <eddyb> rusti: fn test(foo: &str) -> &str {let bar: ~[&str] = foo.words().collect(); drop(foo); bar[0]} test("foo")
[07:53:33] -rusti- "foo"
[07:53:37] <eddyb> check this out
[07:53:45] <eddyb> edwardw: ^^ now that's interesting
[07:53:51] <edwardw> heh
[07:54:22] <eddyb> but I guess the drop does nothing there
[07:54:35] <eddyb> rusti: fn test(foo: &str) -> &str {let bar: std::vec_ng::Vec<&str> = foo.words().collect(); *bar.get(0)} test("foo")
[07:54:36] -rusti- pastebinned 17 lines of output: http://sprunge.us/bhDN
[07:55:25] <eddyb> rusti: fn test<'a>(foo: &'a str) -> &'a str {let bar: ~[&'a str] = foo.words().collect(); bar[0]} test("foo")
[07:55:26] -rusti- "foo"
[07:55:42] <eddyb> edwardw: what I'm trying to get at is the &'a annotation in bar
[07:55:46] <eddyb> rusti: fn test<'a>(foo: &'a str) -> &'a str {let bar: ~[&str] = foo.words().collect(); bar[0]} test("foo")
[07:55:47] -rusti- "foo"
[07:55:52] <eddyb> so it infers there
[07:55:56] <eddyb> rusti: fn test<'a>(foo: &'a str) -> &str {let bar: ~[&str] = foo.words().collect(); bar[0]} test("foo")
[07:55:57] -rusti- "foo"
[07:55:57] <edwardw> k
[07:56:01] <eddyb> and here
[07:56:05] <eddyb> rusti: fn test<'a>(foo: &'a str) -> &str {let bar: ~[&'a str] = foo.words().collect(); bar[0]} test("foo")
[07:56:05] -rusti- pastebinned 11 lines of output: http://sprunge.us/TiCT
[07:56:16] <eddyb> only now it's doing the right thing
[07:56:25] <eddyb> so yeah, something must not be recursing into ty_vec
[08:00:44] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[08:03:09] *** Quits: luziie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[08:03:22] <edwardw> eddyb: doesn't all last three of your examples do the right thing?
[08:03:37] <edwardw> don't*
[08:03:40] <eddyb> &str in the return type is a bug for sure
[08:03:55] <eddyb> so the last two are both wrong
[08:04:09] <edwardw> k
[08:04:22] <eddyb> the other one is what I would expect, &str inside the function to be inferred to &'a str
[08:05:13] *** Joins: luziie (luziie@moz-CD18B14B.customer.cdi.no)
[08:06:01] *** Quits: edwardw (edwardw@ED48E813.BF27AFA4.B9C6B12A.IP) (Quit: Leaving...)
[08:14:04] *** flaper87|afk is now known as flaper87
[08:19:32] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[08:19:41] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[08:22:15] <huon> whoops, I broke rustdoc's CSS slightly
[08:25:09] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:25:12] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:41:58] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:42:12] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:49:35] *** Joins: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com)
[08:50:47] <eddyb> rusti: -1i32 as u32 as u64
[08:50:48] -rusti- 4294967295u64
[08:50:51] <eddyb> rusti: -1i32 as u64
[08:50:52] -rusti- 18446744073709551615u64
[08:58:30] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[08:58:46] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[08:59:31] *** Joins: jensnock_ (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[09:00:28] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[09:09:01] *** Quits: luziie (luziie@moz-CD18B14B.customer.cdi.no) (Quit: Leaving)
[09:09:16] *** Joins: luziie (luziie@moz-CD18B14B.customer.cdi.no)
[09:12:12] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Connection reset by peer)
[09:13:21] *** Joins: lpy (lpy@F7AFA3.F09091A8.1348A864.IP)
[09:17:43] <eddyb> error: aborting due to 67 previous errors // <3 halving error count
[09:17:57] <eddyb> not that I know what did that
[09:18:59] <flaper87> eddyb: :D
[09:19:19] <eddyb> fn check_item<'a>(ccx: &'a CrateCtxt<'a>, it: &ast::Item) // Sigh
[09:19:40] <eddyb> now I basically have to make everything an alias from Foo<'a> to &'a Foo_<'a>
[09:19:52] <eddyb> because variance
[09:19:57] <eddyb> (and lack thereof)
[09:27:20] <eddyb> nmatsakis: I broke the infer lattice
[09:27:25] * eddyb runs around, arms failing
[09:27:53] <eddyb> transmute, transmute everywhere
[09:32:25] <eddyb> nmatsakis: I wish we had a way to enforcing something like &'a Foo<'a>, by using 'self inside the structure
[09:32:40] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:32:47] <eddyb> so then &'a Foo would mean something inside Foo has lifetime 'a, for all intents and purposes
[09:34:46] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:39:08] *** Quits: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com) (Client exited)
[09:41:23] <nmatsakis> eddyb: type Foo = &'a FooS<'a>
[09:41:39] <nmatsakis> is my usual preerence :)
[09:42:04] <eddyb> S is a little nicer than _, I have to agree
[09:42:21] <eddyb> why can't I supply an explicit lifetime to a function generic over a lifetime?
[09:42:35] <eddyb> error: aborting due to 39 previous errors // so good when you figured out how to kill errors
[09:42:52] <eddyb> nmatsakis: after what I've gone through with this experiment
[09:43:05] <eddyb> I think ty::t can be generic over a lifetime without an usability cost
[09:43:27] <eddyb> most of the time it's passed down so it doesn't need a connection to its tcx
[09:44:02] <eddyb> nmatsakis: an arena makes it safer to work &'a t_box_, but it's invariant :(
[09:44:06] <kimundi> nmatsakis: Btw, if you got time, could you take a look at this? https://github.com/mozilla/rust/pull/12764 :)
[09:44:25] <eddyb> which led to my fun adventures in regionck error land
[09:47:00] <eddyb> nmatsakis: being able to have lifetime params in traits would also make this easier
[09:47:05] <eddyb> but I have neither
[09:50:13] <eddyb> nmatsakis: I like tests so much that I rather flood librustc with lifetime (variance) issues than write them (tests)
[09:50:43] <eddyb> also, 511 lines for 34 errors is a bit excessive
[09:52:52] * eddyb throws a rock at inference
[09:52:53] <eddyb> work, dammit
[09:53:23] <eddyb> -> ctxt_ { // OOOPS
[09:53:39] <eddyb> and this is why I want to deny anonymous lifetimes in return types
[09:54:05] *** Quits: acrichto (acrichto@moz-B63D64BD.res.cmu.edu) (Ping timeout)
[09:54:31] <eddyb> kimundi: you can work on that ^^ after #12764 ;)
[09:54:38] <nmatsakis> there's a bug open on that...
[09:56:06] <eddyb> I wish I had a flag to give me tiny error descriptions
[09:56:22] <kimundi> eddyb: Hah, the only reason I was able to do 12764 was that it was a ten line diff without real code changes :P
[09:56:23] <eddyb> all I care about is that two lifetimes are incompatible. I don't need *twenty* lines for each error
[09:56:42] <eddyb> kimundi: you got lucky with CrateContext already doing the right thing, I guess
[09:56:59] <kimundi> yeah
[09:57:27] <eddyb> ohh I can do /error: in less, that's helpful
[09:57:59] <kimundi> On the one hand, I'm happy it worked so fast. On the other hand, I still understand little about rustcs internals.
[09:58:02] <pnkfelix> eddyb: I will be landing the fix for issue 5121 shortly, if that is what you meant by "lifetime params in traits"
[09:58:12] <eddyb> pnkfelix: <3
[09:58:22] <kimundi> pnkfelix: <33
[09:58:29] <eddyb> that means I might be able to use it to get some neat traits
[09:58:43] * kimundi can work on making string matching generic then
[09:58:50] <eddyb> that don't abuse <'a>(&'a self) -> &'a SomethingElse<'a>
[09:58:51] <pnkfelix> (had to do one last round of rebasing after the ~[T] -> Vec<T> change from the weekend, but it was less painful than I had anticipated)
[10:02:08] <huon> eddyb: why are you returning a 'static thing anyway?
[10:02:15] <eddyb> hmm?
[10:02:20] <eddyb> it's not 'static
[10:02:56] <huon> that's the only way `-> ctxt_` would pass the compiler, if the value ctxt_<'a> inside the function had 'a == 'static.
[10:03:05] <eddyb> it wasn't passing
[10:03:08] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Ping timeout)
[10:03:17] <eddyb> but I thought it was inference screwing up in a different way
[10:03:20] <huon> oh, then what's the problem? ... the compiler fixed it?
[10:03:26] <huon> well, flagged it
[10:03:43] <eddyb> so I was scratching my head, trying to force a function to return the right lifetime
[10:05:13] *** Joins: acrichto (acrichto@moz-B63D64BD.res.cmu.edu)
[10:05:13] *** ChanServ sets mode: +o acrichto
[10:05:17] <eddyb> we also need a lint for lifetimes mentioned only once
[10:05:28] <huon> file a bug
[10:05:38] <eddyb> i.e. where code would be equivalent even if it wasn't generic over lifetimes
[10:07:58] * huon idly wonders if we could make `make tidy` faster by rewriting the python scripts in Rust
[10:10:08] <eddyb> huon: good enough? https://github.com/mozilla/rust/issues/12805
[10:10:29] <huon> seems good to me
[10:14:43] <eddyb> cmr: looks like I can select a whole bunch of tabs and crash them all at once, from Aura chrome :D
[10:16:55] *** Quits: jensnock_ (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Connection reset by peer)
[10:17:14] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[10:26:19] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[10:27:01] *** Quits: lpy (lpy@F7AFA3.F09091A8.1348A864.IP) (Client exited)
[10:27:11] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[10:28:52] *** Joins: lpy (lpy@F7AFA3.F09091A8.1348A864.IP)
[10:38:25] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[10:38:47] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[10:40:29] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[10:49:22] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[10:49:55] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[10:50:55] *** Joins: doener (bs@moz-AA189A5A.unitymedia.biz)
[10:51:24] *** Quits: doener (bs@moz-AA189A5A.unitymedia.biz) (Quit: Changing server)
[10:55:49] *** Quits: acrichto (acrichto@moz-B63D64BD.res.cmu.edu) (Ping timeout)
[10:58:32] *** Quits: mawuli (mawuli@moz-A89BBCE.com.gh) (Client exited)
[10:58:40] <eddyb> error: aborting due to 6 previous errors // aaalmost there
[10:59:54] <flaper87> eddyb: go go go!
[11:08:55] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[11:11:29] <eddyb> error: aborting due to 2 previous errors
[11:11:41] <eddyb> (each taking an entire less screen)
[11:20:32] <eddyb> "pointer has a longer lifetime than the data it references" :(
[11:22:04] <eddyb> nevermind that isn't actually used anywhere
[11:22:40] *** Quits: angdev (uid7041@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[11:22:54] <eddyb> nmatsakis: anti-lifetime-error generic missile fn tcx<'a>(&'a self) -> ty::ctxt<'a> { self.tcx.borrow() }
[11:23:35] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[11:23:42] <eddyb> I had to use 11 or so of those (judging by the privacy errors resulting from borrow not being pub)
[11:25:37] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[11:26:37] <eddyb> nmatsakis: oh dear now the borrowck thinks I want all contexts referencing the tcx to live as long as it... like the trans FunctionContext with its TypedArena
[11:27:14] <eddyb> how about some variance?
[11:27:39] * eddyb brings out the borrow missile
[11:36:06] *** Quits: luziie (luziie@moz-CD18B14B.customer.cdi.no) (Connection reset by peer)
[11:36:53] *** pnkfelix is now known as pnkfelix_
[11:37:30] *** Joins: luziie (luziie@moz-CD18B14B.customer.cdi.no)
[11:38:11] *** pnkfelix_ is now known as pnkfelix
[11:38:17] *** pnkfelix is now known as pnkfelix_
[11:38:29] *** pnkfelix_ is now known as pnkfelix
[11:47:56] <huon> "bors replied 19 hours ago" ... a single build has been "running" for that long
[11:48:00] <huon> https://github.com/mozilla/rust/pull/12733
[11:48:02] <huon> :/
[11:50:04] <nmatsakis> eddyb: it might be better to just wait
[11:50:08] <nmatsakis> until that bug is fixed
[11:50:19] <nmatsakis> nrc has been working on it, though he's on vacation this week
[11:50:29] <eddyb> tcx.borrow() everywhere
[11:50:51] <eddyb> nmatsakis: this is a test anyways, and I want it to be over
[11:50:55] <eddyb> s/test/experiment
[11:51:44] <nmatsakis> what I mean is, I think i'd rather wait a week,
[11:51:52] <nmatsakis> then land some patch full of hokey calls that shouldn't be needed.
[11:51:58] <eddyb> haha no I won't land this
[11:52:03] <eddyb> I just want to see what effect it has
[11:52:12] <eddyb> the nice changes will go in the @ removal PR
[11:52:20] <eddyb> the bad ones will wait
[11:54:23] <nmatsakis> ok
[11:54:28] <huon> eddyb: isn't that caused by using `&'a ctxt<'a>` rather than `&'a ctxt<'b>`?
[11:54:41] * huon doesn't have the full context, though
[11:54:49] <eddyb> you can't do as much with the latter
[11:55:10] <eddyb> the former works as long as it's contravariant
[11:55:19] <eddyb> but in my case, it's invariant so fun commences
[11:56:11] <nmatsakis> eddyb: this...might just be the way it is. tcx has internal mutability, that tends to induce invariance.
[11:56:20] <nmatsakis> I always anticiated tcx being its own distinct lifetime
[11:56:27] <nmatsakis> that gets threaded through everywhere as a 2nd lifetime parameter
[11:56:40] <nmatsakis> in fact, it was one of the motivating examples for having multiple lifetime parameters 
[11:56:47] <eddyb> huh...
[11:57:04] <eddyb> oooh I see
[11:57:20] <eddyb> so if I were to cast tcx to a shorter lifetime
[11:57:37] <eddyb> then I could swap the arena for a shorter one
[11:57:45] <eddyb> but that's not the case here :/
[11:58:03] <eddyb> well, I could still insert interner entries that are shorter than the arena
[11:58:39] <eddyb> but that stuff is private, so it should be safe for it to be contravariant
[11:59:31] <eddyb> nmatsakis: two lifetimes would be fine
[11:59:41] <eddyb> except for things like trans::Block
[11:59:58] <eddyb> you can't specify one lifetime and let the other one be anonymous or anything like that
[12:00:26] <eddyb> error: aborting due to 13 previous errors
[12:02:23] <nmatsakis> eddyb: privacy is not enough, unless we can guarantee that the lifetime never flows into a method or something else as an input, and we don't take that into account (and I don't expect to)
[12:03:02] <nmatsakis> eddyb: there was a plan to permit _ as part of #5121,
[12:03:06] <nmatsakis> though that's not been implemented.
[12:03:12] <nmatsakis> such that you could write Block<_, 'tcx>
[12:03:20] <nmatsakis> or something like that
[12:03:24] <eddyb> that still feels wacky
[12:03:37] <eddyb> but it's better than Block<'a, 'b> every-freaking-where
[12:04:21] *** Joins: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca)
[12:13:14] *** Joins: acrichto (acrichto@moz-B63D64BD.res.cmu.edu)
[12:13:14] *** ChanServ sets mode: +o acrichto
[12:14:09] <nmatsakis> pnkfelix: ping
[12:14:30] <pnkfelix> nmatsakis: pong
[12:14:47] <nmatsakis> pnkfelix: did you ever decide what to do with the PR for #5121
[12:15:02] <pnkfelix> nmatsakis: I'm about to put it up to land it
[12:15:25] <pnkfelix> nmatsakis: I had to rebase it over the pcwalton ~[T] => Vec<T> patches I had landed while in the airport
[12:15:30] <nmatsakis> ah
[12:15:31] <nmatsakis> ok
[12:15:34] <nmatsakis> fun
[12:15:41] <pnkfelix> nmatsakis: it was easier than I had expected
[12:16:03] <pnkfelix> (to rebase 5121.  pcwalton's patches were a bear to rebase, I'm so happy I managed to land them on my first try)
[12:16:26] <pnkfelix> nmatsakis: Anyway, it should land soon, I'm doing a local `make check` run now
[12:20:36] <eddyb> nmatsakis: though, wait. trans' &'a FunctionContext<'a> *is* contravariant
[12:20:52] <eddyb> and it does the same thing I did to tcx
[12:21:21] <eddyb> maybe my problem was putting it in a HashMap, but that's about it
[12:23:58] <eddyb> use std::vec_ng::Vec; struct Foo<'a> {x: &'a Vec<&'a int>} trait Bar {fn bar<'b>(&'b self) -> &'b Foo<'b>;} struct Baz<'a> {y: &'a Foo<'a>} impl<'a> Bar for Baz<'a> {fn bar<'b>(&'b self) -> &'b Foo<'b>{self.y}}
[12:24:08] <eddyb> err
[12:24:11] <eddyb> rusti: use std::vec_ng::Vec; struct Foo<'a> {x: &'a Vec<&'a int>} trait Bar {fn bar<'b>(&'b self) -> &'b Foo<'b>;} struct Baz<'a> {y: &'a Foo<'a>} impl<'a> Bar for Baz<'a> {fn bar<'b>(&'b self) -> &'b Foo<'b>{self.y}}
[12:24:12] -rusti- pastebinned 11 lines of output: http://sprunge.us/TFXi
[12:24:30] <eddyb> rusti: use std::cell::RefCell; struct Foo<'a> {x: &'a RefCell<&'a int>} trait Bar {fn bar<'b>(&'b self) -> &'b Foo<'b>;} struct Baz<'a> {y: &'a Foo<'a>} impl<'a> Bar for Baz<'a> {fn bar<'b>(&'b self) -> &'b Foo<'b>{self.y}}
[12:24:30] -rusti- pastebinned 11 lines of output: http://sprunge.us/NQJF
[12:24:37] <eddyb> hmm, that's also invariant?
[12:24:47] <eddyb> rusti: use std::cell::Cell; struct Foo<'a> {x: &'a Cell<&'a int>} trait Bar {fn bar<'b>(&'b self) -> &'b Foo<'b>;} struct Baz<'a> {y: &'a Foo<'a>} impl<'a> Bar for Baz<'a> {fn bar<'b>(&'b self) -> &'b Foo<'b>{self.y}}
[12:24:47] -rusti- pastebinned 11 lines of output: http://sprunge.us/JbiW
[12:25:01] <eddyb> wait, is everything else right...?
[12:25:15] <eddyb> rusti: use std::cell::Cell; struct Foo<'a> {x: &'a &'a int} trait Bar {fn bar<'b>(&'b self) -> &'b Foo<'b>;} struct Baz<'a> {y: &'a Foo<'a>} impl<'a> Bar for Baz<'a> {fn bar<'b>(&'b self) -> &'b Foo<'b>{self.y}}
[12:25:17] -rusti- pastebinned 7 lines of output: http://sprunge.us/SiAO
[12:25:24] <eddyb> I know something else was wrong, huh
[12:28:21] <eddyb> s/know/new
[12:28:23] <eddyb> *knew even
[12:29:15] <eddyb> nmatsakis: for #12610... I have a vague idea of what I should be testing, but can't form a mental image of concrete tests
[12:29:28] <eddyb> I think I should start by doing auto-deref'd field borrows
[12:29:51] <huon> why borrows? why not just field accesses?
[12:29:57] <nmatsakis> eddyb: I tried to make a fairly conrete list
[12:30:05] <nmatsakis> are there particular entries that are confusing
[12:30:07] <nmatsakis> or just the list itself
[12:30:10] <eddyb> nmatsakis: yeah, no, it's not your fault :P
[12:30:30] <eddyb> huon: that's part of the grab-bag test already
[12:30:38] <eddyb> I need more specific tests, for borrowck and whatnot
[12:30:49] <nmatsakis> I also just wanted to have a similar run-pass test the checks with counters
[12:30:59] <eddyb> right
[12:31:06] <eddyb> nmatsakis: should I implement the privacy behavior? I'm not sure I actually have the information during type checking
[12:31:29] <nmatsakis> eddyb: all the information you need should be present, but we may hvae to do a bit of refactoring. I'm ok with leaving this to a follow on patch
[12:31:40] <nmatsakis> though we should open an issue and write FIXME(#XYZ) in that case
[12:32:00] <eddyb> right. feel free to do that while I fix the last two errors in the arena experiment
[12:32:04] <nmatsakis> I don't mean to remove the privacy pass or anything
[12:32:49] <eddyb> hehe
[12:33:47] <eddyb> so here's something curious... being generic over the lifetime of a borrowed pointer causes it to be borrowed
[12:34:03] <eddyb> for its entire lifetime, in the caller
[12:35:33] <eddyb> time: 1.749 s   borrow checking
[12:35:53] <eddyb> nmatsakis: I feel like I've just cheated past your guard dog
[12:36:20] <eddyb> did we get a snapshot or something? stage0 trans peaks at 1.4GB
[12:36:27] <eddyb> this isn't nice
[12:38:22] <nmatsakis> eddyb: https://github.com/mozilla/rust/issues/12808
[12:38:26] *** Quits: japaric (japaric@11FE3B40.F60EC59D.F29ED47E.IP) (Ping timeout)
[12:38:37] <pnkfelix> is bors broken?
[12:38:46] *** Joins: japaric (japaric@C06D2408.9DD773B3.5C7588CA.IP)
[12:38:56] <eddyb> android is down or something like that
[12:39:01] <eddyb> and bors keeps waiting
[12:40:04] <eddyb> nmatsakis: thanks. turns out lynx isn't that bad on github
[12:40:10] <huon> pnkfelix: https://github.com/mozilla/rust/pull/12733
[12:40:27] <huon> http://buildbot.rust-lang.org/builders/auto-linux-64-x-android-t "status offline"
[12:41:28] * eddyb was wondering what was using all the extra RAM. turns out kdevelop doesn't handle well me opening all the librustc source files ever
[12:42:45] * pnkfelix is again thankful that he landed that Vec patch over the wknd instead of waiting until now
[12:43:35] <eddyb>   time: 11.407 s        running linker
[12:44:16] <eddyb> (what did I press? I forgot I'm in less)
[12:44:20] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[12:44:21] <huon> now we just gotta survive the complains about the ~[...] syntax being removed
[12:44:37] <huon> (well, and do the actual removal.)
[12:44:59] <eddyb> why does it then says "176s linking"?
[12:45:04] <eddyb> s/says/say
[12:45:14] <eddyb> what happens in those almost 3 minutes?
[12:49:47] <eddyb> can I rebuild stage2 librustc without rebuilding stage1 librustc?
[12:50:40] <eddyb> nope :(
[12:51:00] <huon> touch the files back in history, and remove the stage2 librustc .so
[12:51:12] <eddyb> one minute too late
[13:10:51] <eddyb> uhm... is FnvHasher supposed to work at all?
[13:11:36] <eddyb> ohh, using the wrong type in the bound
[13:12:34] <eddyb> huon: I sure hope this works find ./x*/stage{0,1} | xargs touch
[13:12:57] <eddyb> oxidize: x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/libstd
[13:13:04] <eddyb> maybe I should've touched just one thing *sigh*
[13:13:25] * eddyb slaps himself
[13:28:11] *** Quits: lpy (lpy@F7AFA3.F09091A8.1348A864.IP) (Ping timeout)
[13:33:51] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[13:33:58] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:36:20] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:37:31] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[13:39:11] <eddyb> touch ./x*/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/stamp.rustc
[13:39:18] <eddyb> touch ./x*/stage1/lib/rustlib/x86_64-unknown-linux-gnu/lib/stamp.*
[13:39:22] <eddyb> now please work
[13:40:38] <eddyb> (I've also toucehd the rustc binary)
[13:40:50] <eddyb> okay, it starts with stage2 libraries, that's not bad
[13:41:17] <eddyb> may not have done that if I'd touch the rustc binary from stage1/bin/rustc
[13:41:26] <eddyb> english, even
[13:41:32] <flaper87> eddyb: it's always fun to know what's going on on your head :D
[13:42:59] <eddyb> flaper87: I can show you the world - wait, no, I don't have a punchline for that :/
[13:43:12] <flaper87> eddyb: lol 
[13:52:12] <eddyb> "143 files changed  0 comments  1 contributor" hehe, github
[13:58:29] <mrmonday> I'm thinking of factoring out a load of code from libnative/librustuv to somewhere else (there's quite a bit of duplicate code for converting between endianess/sockaddrs and SocketAddrs etc) - where would be the best place to put it?
[14:06:20] <cmr> libnetsupport perhaps?
[14:06:56] <eddyb> cmr, huon, nmatsakis: https://github.com/mozilla/rust/pull/12809 have all the bold!
[14:07:23] <cmr> oh my, the "temporary rebased against" chain is long.
[14:07:31] <eddyb> just 3. record, though
[14:07:52] <eddyb> anyways, that's mostly there as an experiment result, don't expect it to be mergeable this week or anything crazy like that
[14:08:12] <mrmonday> cmr: I'm not sure that there's quite enough being factored out to merit a whole crate - how much would you say there needs to be for it to be worth it?
[14:08:21] <eddyb> I hope it's not the arena's fault that the trans peak goes up to 1.5GB
[14:10:03] <cmr> mrmonday: hm, you could just use a common mod -- #[path="../libnative/netsupport.rs"] mod netsupport;
[14:10:35] <eddyb> such a monumental waste of time
[14:10:56] <eddyb> why do I pick the worst paths to succe^W^Wfailure?
[14:11:04] <mrmonday> cmr: that could work, feels a little hackish though
[14:13:17] *** Joins: edwardw (edwardw@CBC31673.351D1665.B9C6B12A.IP)
[14:27:11] *** Joins: lpy (lpy@54AA05A8.F09091A8.1348A864.IP)
[14:28:38] <kimundi> mrmonday: we have currently seperate crates for one macro each
[14:28:57] <mrmonday> I'll create a new crate then :)
[14:29:08] <mrmonday> what do I need to do with makefiles etc to handle a new crate?
[14:29:09] <kimundi> mrmonday: I think if it truely is duplicated functionality that is more than a few lines of code, a seperate crate is fine
[14:29:10] <eddyb> and then strcat will complain
[14:29:28] <kimundi> eddyb: true :P
[14:29:38] <cmr> it wouldn't be generic
[14:29:48] <kimundi> mrmonday: afaik there is a single place where you need to add a line in the makefiles
[14:29:57] <mrmonday> I'll grep for it, thanks
[14:48:00] <friggle> is there general agreement that it's too late for fixing things like struct initializer syntax? http://www.reddit.com/r/rust/comments/1zr1e6/struct_literal_initializer_syntax/
[14:48:20] <friggle> Nick suggests it's a bit late for far reaching changes like that, but on the other hand a lot of the changes coming out of the workweek don't look small
[14:49:04] <eddyb> none of them suggest what is technically a safety downgrade :P
[14:49:30] <eddyb> someone just mentioned in #rust the move to private-by-default
[14:49:43] <eddyb> that makes it harder to do the wrong thing
[14:50:25] <cmr> friggle: none of the changes in the workweek are petty syntax nibbles either, they're mostly *extensions* to the existing semantics.
[14:52:45] <friggle> cmr: you have a point there :) It just strikes me as a particularly irritating syntax quirk (colons are for types, except in struct literals
[14:53:24] <eddyb> they are for types in the definition
[14:53:47] <eddyb> and say what you want, but JS syntax for arrays & objects is nice
[14:53:56] <cmr> I'd be happy with field=value
[14:54:04] <cmr> eddyb: disagree vehemently.
[14:54:13] <eddyb> :(
[14:54:30] <eddyb> thing is...
[14:54:44] <eddyb> rusti: let mut a = 0; (Some(a = 1), a)
[14:54:45] -rusti- <anon>:10:13: 10:18 warning: value assigned to `a` is never read, #[warn(dead_assignment)] on by default
[14:54:45] -rusti- <anon>:10         let mut a = 0; (Some(a = 1), a)
[14:54:45] -rusti-                       ^~~~~
[14:54:46] -rusti- (Some(()), 1)
[14:55:08] <cmr> yuck.
[14:57:18] <eddyb> I see = as assignments. another quirk from JS is that you can do anything almost anywhere. Rust upgrades that "almost anywhere" to "everywhere"
[14:57:50] <eddyb> but at least Rust doesn't return the value on assignment, so it counteracts some issues
[14:57:53] * eddyb shrugs
[14:59:44] *** Quits: zv (zv@moz-955F83E9.hsd1.ca.comcast.net) (Quit: WeeChat 0.4.2)
[15:17:17] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[15:17:25] *** Joins: intuxicated (intuxicate@E22258E8.457F096E.3FFBF42F.IP)
[15:20:46] *** Joins: zv (zv@moz-955F83E9.hsd1.ca.comcast.net)
[15:26:23] *** Joins: doener (bs@moz-AA189A5A.unitymedia.biz)
[15:26:59] <edwardw> ~[T] is covariant ot contravariant? if the question makes sense
[15:27:05] <edwardw> *or*
[15:27:24] <eddyb> well, for lifetimes contravariant seems to make most sense
[15:28:26] <edwardw> ok, why only lifetime?
[15:29:05] <edwardw> how about other vec_* types?
[15:29:15] <eddyb> I don't know about types
[15:29:33] <eddyb> nmatsakis: ^^?
[15:29:34] <edwardw> k
[15:30:19] <eddyb> I think the problem is inference allowing anonymous lifetimes in places other than function arguments, to survive
[15:31:11] <edwardw> https://github.com/mozilla/rust/blob/master/src/librustc/middle/typeck/infer/combine.rs#L542
[15:31:28] <edwardw> this lines implies ty_vec is covariant, isn't it?
[15:31:32] <edwardw> line*
[15:34:19] *** Quits: intuxicated (intuxicate@E22258E8.457F096E.3FFBF42F.IP) (Quit: Leaving)
[15:34:34] *** Joins: intuxicated (intuxicate@E22258E8.457F096E.3FFBF42F.IP)
[15:34:45] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:34:49] *** Joins: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com)
[15:35:19] <nmatsakis> what is the question exactly?
[15:35:41] <edwardw> ~[T] is covariant ot contravariant?
[15:35:53] <nmatsakis> covariant with respect to T
[15:36:01] <edwardw> k
[15:36:03] <edwardw> ty
[15:36:07] <nmatsakis> &'a T is contravariant with respect to 'a
[15:36:11] <nmatsakis> and covariant with respect to T
[15:36:26] <edwardw> I see
[15:37:08] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:39:45] *** Quits: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com) (Client exited)
[15:42:10] *** Joins: gimpf (gimpf@moz-68A3B308.adsl.highway.telekom.at)
[15:43:27] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[15:43:32] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[15:43:42] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:56:55] *** Joins: mawuli (mawuli@moz-A89BBCE.com.gh)
[16:01:45] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Quit: leaving)
[16:03:44] *** Quits: lpy (lpy@54AA05A8.F09091A8.1348A864.IP) (Client exited)
[16:04:20] *** Joins: lpy (lpy@54AA05A8.F09091A8.1348A864.IP)
[16:05:31] *** Quits: lpy (lpy@54AA05A8.F09091A8.1348A864.IP) (Connection reset by peer)
[16:06:17] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[16:06:17] *** ChanServ sets mode: +ao dherman dherman
[16:08:52] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[16:09:37] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[16:09:56] *** Joins: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca)
[16:13:12] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Ping timeout)
[16:14:23] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[16:15:03] *** Joins: eibwen (kvirc@moz-D4489A0B.dip0.t-ipconnect.de)
[16:19:45] *** Joins: gwty (gwtypc@41F37F1B.DA894D25.CECE23B2.IP)
[16:22:24] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[16:22:24] *** ChanServ sets mode: +o tjc
[16:32:43] *** Joins: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca)
[16:36:31] *** Quits: doener (bs@moz-AA189A5A.unitymedia.biz) (Quit: leaving)
[16:42:02] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[16:42:06] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[16:42:06] *** ChanServ sets mode: +o tjc
[16:44:34] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[16:45:01] <eddyb> this is painful... the latest snapshot fills my RAM. I don't think I can work on anything that require recompiling rustc
[16:45:12] <eddyb> *requires
[16:45:45] <eddyb> and I feel so exhausted for some reason. must be all those lifetimes :(
[16:46:24] <eddyb> note to past self: do not try to use a TypedArena in ty::ctxt. do not even ask why not
[16:50:11] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:51:12] *** Quits: Kxepal (Miranda@moz-2F3DCB10.pppoe.mtu-net.ru) (Ping timeout)
[16:53:24] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Quit: Computer has gone to sleep.)
[16:53:49] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[16:55:30] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[16:55:36] *** Quits: zxcdw (r-a@5F0EDB29.B543C4DE.3933CC16.IP) (Ping timeout)
[16:55:55] *** Joins: Kxepal (Miranda@moz-32367D04.pppoe.mtu-net.ru)
[16:58:13] *** Joins: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca)
[16:58:30] <mrmonday> how is the cyclic dependency between libnative/librustuv and libstd handled? they both depend on things from each other
[16:58:51] <eddyb> do they?
[16:58:56] <eddyb> libstd doesn't need neither of those
[16:59:07] <cmr> mrmonday: rustuv doesn't depend on native, std doesn't depend on rustuv
[16:59:10] <cmr> so, there is no cycle?
[16:59:30] <cmr> and native not on rustuv :p
[16:59:55] <eddyb> technically, we could reimplement uv using libnative
[17:00:12] <cmr> not using native as it exists today.
[17:00:19] <mrmonday> my bad, sorry
[17:04:16] *** Joins: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com)
[17:04:25] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:04:25] *** ChanServ sets mode: +qo brson brson
[17:04:56] <mrmonday> pretty sure the changes I'm about to make will introduce a cycle, hence my confusion :)
[17:05:18] <eddyb> nmatsakis: should I feel like an idiot? all the tests also make sense with fields and they're very easy
[17:05:25] *** Quits: gwty (gwtypc@41F37F1B.DA894D25.CECE23B2.IP) (Ping timeout)
[17:07:27] *** Joins: gwty (gwtypc@80B0E907.F55F423C.BD94A9D5.IP)
[17:08:31] <eddyb> or maybe it feels easy because I've spent all that time getting me hands dirty with lifetimes
[17:10:00] <eddyb> acrichto, brson: is bors still dead?
[17:10:16] <brson> eddyb: how is bors dead?
[17:10:28] <eddyb> s/dead/dead in its tracks
[17:10:35] <eddyb> the android issue
[17:10:49] <brson> i'll go reboot the box
[17:12:04] <acrichto> brson: bors itself may also not be running, last updated a day ago
[17:12:16] <acrichto> oh hm
[17:12:18] <acrichto> I'll check on that
[17:12:22] <acrichto> the box is at least online
[17:12:35] *** Quits: Kxepal (Miranda@moz-32367D04.pppoe.mtu-net.ru) (Quit: Kxepal)
[17:12:55] <eddyb> nmatsakis: huh, I'm missing an error
[17:12:56] *** Joins: Kxepal (Miranda@moz-32367D04.pppoe.mtu-net.ru)
[17:13:29] <eddyb> x: Own<Point>; let _i = &mut x.y;
[17:13:53] <eddyb> there should be an error from the deref_mut method call... I'm guessing I didn't add enough borrowck support?
[17:14:55] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:16:23] <brson> android bot is restarted and bors is running
[17:16:51] <eddyb> brson: thanks :D
[17:22:11] <mrmonday> hmm, don't actually know how to factor out the duplication without a cyclic dependency
[17:24:53] <eddyb> nmatsakis: why does guarantee_adjustments not handle the no autoref case?
[17:24:57] <eddyb> hmm
[17:25:35] <eddyb> no, that's not it
[17:26:15] <mrmonday> I can do it for the basic stuff that's in there at the moment, but if I try to do it with my raw socket stuff to it doens't work
[17:28:40] <mrmonday> bit annoying since all it needs from std is libc :<
[17:29:04] <mrmonday> so crate-wise there's a cyclic dependency otherwise there isn't
[17:40:19] <eddyb> borrowck::check_loans, I think I've got it
[17:41:35] <eddyb> nmatsakis: there is no checking autoderef calls :S
[17:41:42] <eddyb> for no adjustments at all
[17:42:23] <eddyb> wait, no, check_call does nothing
[17:48:29] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[17:48:29] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:48:58] <eddyb> pcwalton: 1.4GB of RAM during trans peak, this is not nice
[17:49:07] <pcwalton> hmm
[17:49:24] <eddyb> we should consider having a temporary solution, maybe with the same representation as the DST ~[T]
[17:57:08] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[17:58:37] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:59:43] *** Quits: edwardw (edwardw@CBC31673.351D1665.B9C6B12A.IP) (Ping timeout)
[18:03:54] *** Joins: edwardw_ (edwardw@CBC31673.351D1665.B9C6B12A.IP)
[18:06:24] *** Quits: mawuli (mawuli@moz-A89BBCE.com.gh) (Ping timeout)
[18:07:13] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[18:07:13] <ghrust> [13rust] 15bors pushed 5 new commits to 06auto: 02http://git.io/YmhQCg
[18:07:13] <ghrust> 13rust/06auto 1432755e9 15Huon Wilson: std: Move rand to librand....
[18:07:13] <ghrust> 13rust/06auto 14e5c25fe 15Huon Wilson: Remove the dependence of std::io::test on rand....
[18:07:13] <ghrust> 13rust/06auto 14b948028 15Huon Wilson: Update users for the std::rand -> librand move.
[18:07:15] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[18:09:54] *** Quits: edwardw_ (edwardw@CBC31673.351D1665.B9C6B12A.IP) (Ping timeout)
[18:10:24] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[18:10:24] *** ChanServ sets mode: +o tjc
[18:11:40] <bstrie> the workweek notes about disallowing taking the addresses of static values is about supporting some optimization, right?
[18:12:13] <cmr> mrmonday: I'm splitting libc from std, let me update that PR.
[18:12:28] <cmr> bstrie: yes, it allows you to merge same-valued statics into a single datum.
[18:15:20] *** Joins: edwardw_ (edwardw@BB690835.D7DB55D8.50B134B9.IP)
[18:15:28] <bstrie> cmr: does that also apply to monomorphized generic functions whose bytecode is identical?
[18:15:39] <cmr> bstrie: that's mergefunc.
[18:15:54] <cmr> different optimization, because it's slower (needs to look at more things)
[18:16:07] <cmr> I think we don't benefit a lot from it atm
[18:16:16] <cmr> strcat: do you know the status of mergefunc atm?
[18:16:24] <bstrie> I thought the difficulty we were having before was the whole issue with taking the address of things
[18:16:30] <bstrie> but I'm hardly an expert
[18:16:32] *** Quits: zv (zv@moz-955F83E9.hsd1.ca.comcast.net) (Ping timeout)
[18:16:37] <cmr> which difficulty?
[18:16:43] <bstrie> with mergefunc
[18:16:49] <bstrie> I just remember vague problems were had
[18:16:53] <cmr> they were llvm bugs.
[18:16:56] <bstrie> ah
[18:20:22] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[18:20:41] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[18:20:41] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:22:00] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[18:22:00] <ghrust> [13rust] 15bors 04force-pushed 06auto from 141d51341 to 1462f1d68: 02http://git.io/N3iJvQ
[18:22:00] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[18:22:01] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[18:22:01] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/hiHudw
[18:22:01] <ghrust> 13rust/06auto 146b034a0 15Douglas Young: Implement hexadecimal floating point literals via a syntax extension...
[18:22:01] <ghrust> 13rust/06auto 1446d14d7 15bors: auto merge of #12652 : rcxdude/rust/hexfloatext, r=alexcrichton...
[18:22:02] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[18:23:22] <cmr> r? https://github.com/mozilla/rust/pull/12526
[18:24:25] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[18:24:25] *** ChanServ sets mode: +ao dherman dherman
[18:32:20] *** Joins: zv (zv@moz-955F83E9.hsd1.ca.comcast.net)
[18:33:27] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[18:34:54] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[18:34:54] *** ChanServ sets mode: +o tjc
[18:37:37] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[18:40:35] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[18:44:27] <cmr> acrichto: that should bounce on mac32 if the hack is still needed.
[18:44:33] <cmr> I hope.
[18:47:51] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:50:12] <acrichto> sounds reasonable
[18:54:25] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:58:25] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:58:25] *** ChanServ sets mode: +qo brson brson
[19:00:15] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[19:00:31] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Ping timeout)
[19:01:00] *** Joins: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca)
[19:02:11] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:03:20] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[19:10:22] *** Joins: Sharp (Sharp@19388942.6B775EBE.DC877F3B.IP)
[19:10:24] *** Quits: Sharp (Sharp@19388942.6B775EBE.DC877F3B.IP) (Quit: Sharp)
[19:12:02] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[19:12:02] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1446d14d7 to 1462f1d68: 02http://git.io/N3iJvQ
[19:12:02] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[19:14:59] <rcxdude> any idea what's with the compile failure here? http://buildbot.rust-lang.org/builders/auto-win-32-opt/builds/4653/steps/test/logs/stdio
[19:15:22] <rcxdude> the file in question does have #[feature(phase)] and runs fine on my machine
[19:16:43] <cmr> rcxdude: is there a semicolon after it?
[19:18:03] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[19:18:40] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[19:19:07] <rcxdude> cmr: yes
[19:27:07] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[19:27:07] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1454a10f2 to 1462f1d68: 02http://git.io/N3iJvQ
[19:27:07] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[19:29:06] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:31:00] *** Quits: jld (jld@moz-B94C75AD.xlerb.net) (Ping timeout)
[19:43:03] *** Quits: gwty (gwtypc@80B0E907.F55F423C.BD94A9D5.IP) (Ping timeout)
[19:44:40] *** Joins: gwty (gwtypc@D786998E.8823652F.CF29F6CE.IP)
[19:47:21] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[19:47:23] *** Joins: jld (jld@moz-B94C75AD.xlerb.net)
[19:49:24] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[19:49:48] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[19:56:57] <eddyb> nmatsakis: I bet we can shave a few hundred MBs by just removing all has_infer types from ty::ctxt
[19:57:11] <eddyb> (assuming something close to perfect like jemalloc)
[19:57:38] *** Joins: aatch (James@moz-B437F499.pocketrent.com)
[19:57:55] <eddyb> nmatsakis: we can even have a separate arena for them, per function
[19:58:22] <eddyb> with vrange, that would be super cheap
[19:59:13] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[19:59:36] <eddyb> strcat: ^^ but that's probably still months away, no?
[20:05:20] <eibwen> does rustc build deterministically? a quick test with short source files makes it look like it does
[20:05:44] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[20:05:51] <cmr> eibwen: it does now.
[20:06:02] <eibwen> nice
[20:06:10] <cmr> or, should.
[20:06:20] <eibwen> is there an issue/pull request/commit I can look into?
[20:06:33] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:07:02] <cmr> the Strict Version Hash one.
[20:07:11] <strcat> cmr: it doesn't always
[20:09:57] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:10:02] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:10:11] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[20:10:11] *** ChanServ sets mode: +qo brson brson
[20:16:50] <aatch> Oooh: http://article.gmane.org/gmane.comp.compilers.llvm.devel/70998
[20:17:59] <cmr> acrichto: why readdir_r?
[20:18:11] <acrichto> apparently readdir isn't threadsafe
[20:18:15] <cmr> why aren't we binding both
[20:18:28] <acrichto> I suppose we could
[20:19:50] <strcat> cmr: readdir uses a global var
[20:19:53] <strcat> for the dirent
[20:20:03] <cmr> yes, sure.
[20:20:39] <aatch> Having optimisation reports like that would certainly make improving our IR output easier.
[20:21:35] *** Quits: japaric (japaric@C06D2408.9DD773B3.5C7588CA.IP) (Ping timeout)
[20:21:40] <eddyb> well... right now I think there's also the issue that we output optimizable IR
[20:21:58] <eddyb> but a lot of it is cruft
[20:22:06] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[20:22:06] *** ChanServ sets mode: +o tjc
[20:22:18] <eddyb> comparing optimizations with and without SROA would be interesting
[20:22:37] <eddyb> right now we're pretty bad without it
[20:22:44] <aatch> eddyb, we'd be dead without SROA
[20:23:04] <eddyb> dat mem2reg
[20:23:39] <cmr> acrichto: r? https://github.com/mozilla/rust/pull/12526
[20:24:01] *** Joins: japaric (japaric@66A5E1DA.D1A0B378.5C7588CA.IP)
[20:24:14] <acrichto> cmr: r=me, but pass it through try first
[20:24:37] <acrichto> you may also want to squash the last two commits into the first
[20:24:41] <aatch> I'm curious to see if we could add a specialised SROA-like pass that handles the most common cases we need it for and run it early.
[20:24:56] <eddyb> aatch: i.e. don't output crappy IR
[20:25:03] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[20:25:03] <ghrust> [13rust] 15cmr 04force-pushed 06try from 14db81497 to 14f7f2f72: 02http://git.io/k471pw
[20:25:03] <ghrust> 13rust/06try 14b204f88 15Corey Richardson: Remove libc from std...
[20:25:03] <ghrust> 13rust/06try 14d6ef0d3 15Corey Richardson: fix fallout from std::libc separation
[20:25:03] <ghrust> 13rust/06try 1442918ed 15Corey Richardson: rt: remove opendir/readdir hack
[20:25:05] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[20:25:11] <cmr> acrichto: probably.
[20:25:13] <eddyb> I've tried to do that already in a PR that's now closed because I had to focus on other things
[20:25:25] <eddyb> and we can still improve a lot
[20:25:51] <aatch> heh, liblibc
[20:26:09] <eddyb> anything without more than one use should be a SSA variable IMO
[20:26:26] <eddyb> but then it's a bit nasty because we take by-value arguments by reference
[20:29:40] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[20:32:47] *** Quits: edwardw_ (edwardw@BB690835.D7DB55D8.50B134B9.IP) (Quit: Leaving...)
[20:36:13] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[20:37:14] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[20:37:14] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/dvPS_g
[20:37:14] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[20:42:10] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[20:42:11] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/ZHTlTA
[20:42:11] <ghrust> 13rust/06auto 14abfde39 15Edward Wang: borrowck: classify expressions as assignees, uses or both...
[20:42:11] <ghrust> 13rust/06auto 14cad7d24 15bors: auto merge of #12733 : edwardw/rust/rw-liveness, r=nikomatsakis...
[20:42:11] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[20:42:19] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[20:42:19] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:46:03] *** Quits: zv (zv@moz-955F83E9.hsd1.ca.comcast.net) (Ping timeout)
[20:55:38] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[20:55:41] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[20:55:41] *** ChanServ sets mode: +o tjc
[21:02:03] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: Textual IRC Client: www.textualapp.com)
[21:03:20] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[21:09:40] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[21:20:09] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:23:59] *** Joins: Jesse_ (jruderman@moz-BBE3ABD.mv.mozilla.com)
[21:24:18] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[21:32:15] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[21:32:37] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[21:33:01] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[21:33:02] *** ChanServ sets mode: +ao dherman dherman
[21:33:38] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[21:34:19] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[21:39:21] <eddyb> almost forgotten https://github.com/mozilla/rust/pull/12770#issuecomment-37237892
[21:39:28] <eddyb> have some cc's
[21:43:10] *** Joins: canhtak (canhtak@moz-9F5D2CD3.wl.t.ulaval.ca)
[21:50:48] <eddyb> pnkfelix, nmatsakis: you've left my curiosity answered :S
[21:51:13] <flaper87> is anyone actually using RefCell's unwrap ?
[21:51:24] <eddyb> doubt it
[21:51:26] <flaper87> it's not being used anywhere.
[21:51:34] <eddyb> whenever you think you need something like that, you really don't
[21:51:35] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[21:51:43] <flaper87> I'm tempted to get rid of it
[21:51:46] <eddyb> do it :D
[21:52:14] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[21:52:16] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[21:52:16] *** ChanServ sets mode: +o tjc
[21:52:19] *** Joins: ecr (chatzilla@moz-FE3DADCC.dhcp4.washington.edu)
[21:52:22] <flaper87> eddyb: reading the method all I could thing was: "Why would anyone..."
[21:52:31] <flaper87> but I'm 99% of the time wrong so...
[21:53:20] <flaper87> s/thing/think/
[21:53:59] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[21:54:06] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:54:13] * flaper87 <3 $ git add -p
[21:55:39] * strcat just uses git commit -p directly
[21:56:21] <flaper87> strcat: hey, now that I know you're here :D
[21:56:31] <flaper87> strcat: any info you'd like to add to: http://github.com/mozilla/rust/issues/7762
[21:56:33] <flaper87> ?
[21:56:36] <eddyb> strcat: so I get my chrome working again... but the Vec changes (at least I think that's the culprit) don't let me compile rustc with chrome open
[21:56:40] <eddyb> even if all the tabs are killed
[21:56:43] <flaper87> I bet it's not fixed but
[21:56:45] <strcat> flaper87: still broken
[21:56:50] <flaper87> strcat: kk
[21:57:00] <strcat> less of an issue if libnative becomes the default
[21:57:05] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[21:57:05] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/ZHTlTA
[21:57:05] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[21:57:07] <eddyb> time: 282.631 s translation // this is always fun
[21:57:31] * flaper87 wish he new more about these things
[21:58:53] *** Joins: bvssvni (Mibbit@moz-E289BB64.bb.online.no)
[21:59:40] <eddyb> you know, I'm complaining about the compilation process.... but I've just wasted like two hours doing nothing, thinking I'll just go to bed >_>
[22:00:09] * eddyb bad Dobby *smarts smacking head against furniture*
[22:01:10] <flaper87> eddyb: FWIW, I was talking about #7762 :D
[22:01:20] <flaper87> but yeah, we can do better
[22:01:22] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[22:01:50] <eddyb> flaper87: it took that long because it was swapping
[22:01:59] <sfackler> downloadmoreram.tk
[22:02:04] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[22:02:04] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/oT1ECg
[22:02:04] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[22:02:04] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[22:02:04] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/mpatYw
[22:02:04] <ghrust> 13rust/06auto 14246d029 15Guillaume Pinot: fix a bug in shootout-reverse-complement, official tests should pass with it...
[22:02:04] <ghrust> 13rust/06auto 1496f5b36 15bors: auto merge of #12765 : TeXitoi/rust/fix-shootout-reverse-complement, r=alexcrichton
[22:02:05] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[22:02:07] <eddyb> ikr
[22:02:40] * flaper87 needs to get more RAM too and probably an ssd
[22:03:00] <eddyb> with rustc? lol no
[22:03:15] <flaper87> working on not so fast laptops is good, though. They remind us we can / should do better
[22:03:26] <eddyb> SSD I mean, you'll shred it
[22:03:38] <strcat> eddyb: not an issue anymore, with even the mediocre SSDs
[22:03:45] <strcat> eddyb: you can do ~80GiB/day for 5 years
[22:03:51] <strcat> (writes)
[22:04:00] <eddyb> strcat: I'm growing old
[22:04:09] <eddyb> before I get a chance to grow a beard. this is crazy
[22:04:23] <strcat> anyway SSDs are sad
[22:04:27] <strcat> they're bounded by sata3 now
[22:04:32] <eddyb> haha
[22:04:33] <strcat> they all do 550MiB/s read/write
[22:04:38] <acrichto> brson: r? https://github.com/mozilla/rust/pull/12556
[22:04:38] <strcat> (sequential)
[22:04:49] <eddyb> sata4 pls
[22:04:52] <strcat> eddyb: meh
[22:04:54] <strcat> sata can die
[22:05:01] <strcat> they can use pcie or something
[22:05:08] <strcat> at least in a laptop without a discrete gpu
[22:05:13] <strcat> otherwise it's wasted
[22:05:19] <sfackler> strcat: you can always buy an SSD that hooks into a PCI slot if you want to spend the big bucks
[22:05:45] <eddyb> terahertz intercom, amirite?
[22:06:10] <sfackler> e.g. http://www.staples.com/office/supplies/StaplesProductDisplay?storeId=10001&catalogIdentifier=2&partNumber=IM1QY9940&langid=-1&cid=PS:GooglePLAs:IM1QY9940&srccode=cii_17588969&cpncode=35-180318875-2
[22:06:16] <sfackler> only $2/GB!!
[22:06:34] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[22:06:50] <eddyb> https://github.com/mozilla/rust/pull/12556 sheesh I remember when I implemented those
[22:09:36] *** Quits: canhtak (canhtak@moz-9F5D2CD3.wl.t.ulaval.ca) (Quit: canhtak)
[22:10:56] <eddyb> nmatsakis: huh... so I implemented borrowck support. and it seems to work - but not for fields
[22:13:00] <eddyb> basically, it allows this to go through fn assign_field1(x: Own<Point>) {x.y = 3;}
[22:13:21] <eddyb> nmatsakis: ^^ does that get copied in some way or another?
[22:14:43] *** Joins: mawuli (mawuli@moz-A89BBCE.com.gh)
[22:16:05] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[22:19:17] <eddyb> nmatsakis: OOOH there's something subtle here, maybe unrelated
[22:20:00] <eddyb> so I was wondering why autoderef shows the right message for assigning a field from an immutable deref when a mutable deref overload exists
[22:20:14] <eddyb> it's because it won't attempt deref_mut calls through &T
[22:25:57] *** Quits: ecr (chatzilla@moz-FE3DADCC.dhcp4.washington.edu) (Ping timeout)
[22:27:33] *** Joins: ecr (chatzilla@moz-FE3DADCC.dhcp4.washington.edu)
[22:30:05] *** Joins: canhtak (canhtak@moz-9F5D2CD3.wl.t.ulaval.ca)
[22:30:28] <eddyb> <anon>:1:86: 1:91 warning: variable does not need to be mutable, #[warn(unused_mut)] on by default
[22:30:39] <eddyb> nmatsakis: hmm, I think this goes deeper
[22:30:58] <eddyb> though the warning could be clueless liveness being clueless
[22:33:19] <eddyb>   %5 = invoke %struct.Point* @"cell::RefMut<'b, T>.DerefMut<T>::deref_mut"(%"struct.std::cell::RefMut<Point>[#1]"* %x)
[22:33:25] <eddyb> so it calls the right method
[22:35:36] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[22:35:58] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[22:36:57] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:39:01] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:39:46] <brson> fyi, for the mv office move this weekend I intend to *ungate* bors on the mac and android bots for several days
[22:40:01] <brson> those physical machines will be moving between offices
[22:44:31] * huon wonders how much firefighting will need to happen
[22:44:52] <eddyb> merge all the backdoors \o/
[22:48:16] *** Quits: gimpf (gimpf@moz-68A3B308.adsl.highway.telekom.at) (Quit: Leaving.)
[22:49:52] <eddyb> nmatsakis: so I think I'll go sleep now (do I have to apologize again for the lack of progress?) - you can take a look at this if you want to https://github.com/mozilla/rust/pull/12610
[22:50:24] <eddyb> I've pushed the commit that adds some borrow checker support but I have no idea what I'm missing to get that error
[22:50:43] <eddyb> (wake up killing errors, go to sleep frustrated that you can't create errors. lovely)
[22:51:53] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[22:52:06] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[22:52:06] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1496f5b36 to 14cad7d24: 02http://git.io/N3iJvQ
[22:52:06] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[22:58:49] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Ping timeout)
[23:00:27] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[23:01:11] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:01:43] <huon> eddyb: btw, by "touch files" I meant touch all the .rs files back in time, not touching the built files
[23:01:53] <eddyb> stamps work
[23:01:58] <huon> oh, ok
[23:07:38] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[23:08:49] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[23:18:28] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[23:19:42] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[23:22:07] *** flaper87 is now known as flaper87|afk
[23:26:33] *** Quits: ecr (chatzilla@moz-FE3DADCC.dhcp4.washington.edu) (Quit: ChatZilla 0.9.90.1 [Firefox 28.0/20140306171728])
[23:26:59] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[23:26:59] <ghrust> [13rust] 15bors 04force-pushed 06auto from 148203948 to 14cad7d24: 02http://git.io/N3iJvQ
[23:26:59] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[23:35:53] *** Quits: canhtak (canhtak@moz-9F5D2CD3.wl.t.ulaval.ca) (Quit: canhtak)
[23:45:51] *** Joins: canhtak (canhtak@moz-9F5D2CD3.wl.t.ulaval.ca)
[23:47:38] <kimundi> nmatsakis: r? https://github.com/mozilla/rust/pull/12764
[23:51:18] *** Joins: Sharp (Sharp@moz-3301C7AB.static-ip.telepacific.net)
[23:57:52] *** Joins: tikue (tkuehn@CB7FC854.FAD414BA.D74CC41D.IP)
