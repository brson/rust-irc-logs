[00:11:43] *** Joins: rlbaker (rlbaker@moz-7F06875C.hfc.comcastbusiness.net)
[00:11:50] *** Quits: rlbaker (rlbaker@moz-7F06875C.hfc.comcastbusiness.net) (Quit: rlbaker)
[00:26:21] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[00:34:21] <klutzy> acrichto: pong
[00:34:54] <acrichto> klutzy: your comment here https://github.com/mozilla/rust/issues/10329#issuecomment-27949813, should libuv be the ones changing their code?
[00:47:13] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[00:49:36] *** Joins: yuriks (yuriks@CE6EF1E.88B480FC.748B6D8D.IP)
[00:55:16] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[00:57:55] *** Joins: geoffhill (geoffhill@moz-738DC0DB.org)
[00:58:05] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[00:58:05] <ghrust> 01[13rust01] 15catamorphism 04force-pushed 06try from 14dc03c8b to 142d890a5: 02http://git.io/k471pw
[00:58:05] <ghrust> 13rust/06try 142d890a5 15Tim Chevalier: rustpkg: Un-ignore test_install_invalid_external and test_install_invalid
[00:58:05] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[01:00:22] <acrichto> brson: r? https://github.com/mozilla/rust/pull/10321 the last 3 commits
[01:01:00] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[01:01:45] <dbaupp> acrichto: can you modify 8 more lines please? (it'll make the total 8888)
[01:02:04] <acrichto> ah I'm so close
[01:02:36] * dbaupp picks up the most important things when he reviews :P
[01:02:42] <acrichto> libuv made themselves a little more ffi-friendly in this version of thoem
[01:03:05] <acrichto> all arguments/return values are no greater than a word (no more structs)
[01:03:21] <dbaupp> speaking of reviews: https://github.com/mozilla/rust/pull/10333 r?
[01:03:27] <dbaupp> acrichto: that's much nicer
[01:04:19] <strcat> dbaupp: it's worse if you have a nice FFI not needing you to hardcode definitions
[01:04:59] <strcat> because it means they switched to PIMPL, so there will be more wrappers with dtors cleaning up all the allocations
[01:05:18] <strcat> stable ABI vs. nice API are directly in conflict ;p
[01:06:06] <strcat> http://code.google.com/p/leveldb/source/browse/include/leveldb/c.h the extreme of ABI stability
[01:06:26] <strcat> they even hide the enums behind opaque pointers
[01:06:36] <strcat> some are bools, behind opaque pointers
[01:06:41] *** Quits: blank_name (blank_name@FAB53C88.7071B2C8.31EC03F3.IP) (Ping timeout)
[01:07:08] *** Joins: blank_name (blank_name@FAB53C88.7071B2C8.31EC03F3.IP)
[01:19:14] <tautologico> so I changed rustc to generate a default "package_id" attribute for lib crates that don't specify it, in order to change extern mod foo(name="bar") to extern mod foo = "bar", but this generates many warnings while compiling rustc about the default package_idâ€¦ so maybe it would be better to specify the package_id for each lib?
[01:21:16] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[01:21:17] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/lf02lQ
[01:21:17] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[01:26:07] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[01:26:12] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[01:26:12] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/zB-5PA
[01:26:12] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[01:26:17] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[01:26:17] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/smlMgw
[01:26:17] <ghrust> 13rust/06auto 14519b86b 15Matt Carberry: Added octal literal support.
[01:26:17] <ghrust> 13rust/06auto 1466abb92 15Matt Carberry: Grammar error and vim syntax highlighting mistake fixed.
[01:26:18] <ghrust> 13rust/06auto 146eba332 15Matt Carberry: Added positive tests for integer literal base interpretation.
[01:26:20] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[01:29:33] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[01:41:12] *** Joins: jeffdb (jeff@moz-ED35AD97.hsd1.ca.comcast.net)
[01:48:10] *** Quits: jeffdb (jeff@moz-ED35AD97.hsd1.ca.comcast.net) (Quit: jeffdb)
[01:48:52] <klutzy> acrichto: sorry; I was offline just after pong
[01:49:34] <klutzy> acrichto: I have an uv fix but I'm not sure if fixing uv is right  https://github.com/klutzy/libuv/commit/0fc1102a1d6a794894d00b12652199ef7b0ea3b7
[01:50:11] <klutzy> acrichto: ideally we can fix mingw or be away from mingw, but it is not practical for now
[01:50:17] <acrichto> klutzy: that's terrifying
[01:50:27] <acrichto> klutzy: so basically libuv doesn't run correctly on win64?
[01:50:32] <acrichto> mingw-w64 that is
[01:51:02] <klutzy> acrichto: I think mingw-w64 works correctly. mingw does not (!)
[01:51:35] <klutzy> acrichto: on the other hand, our downstream fork works well on mingw but not on mingw-w64.
[01:51:49] <acrichto> klutzy: whoa, so do we have failing tests right now on windows because of this?
[01:52:32] <klutzy> acrichto: we are safe for now, but I think if we use upstream uv then it will segfault
[01:52:53] <acrichto> is that because libuv started using this function in the meantime?
[01:53:42] <klutzy> acrichto: yes, they "fixed" swprintf but the fix is not for mingw
[01:53:53] <klutzy> this is testcase for that https://gist.github.com/klutzy/7351873
[01:53:57] <acrichto> hm, ok, then we may need to upstream that
[01:54:42] <acrichto> well I'm attempting to upgrade libuv as part of my uv rewrite
[01:54:51] <acrichto> so I guess if windows starts failing we can try to upstream this patch as well
[01:54:55] <acrichto> and in the meantime pass some extra cflags around
[01:56:28] <klutzy> yes, cflags is a good workaround
[01:58:14] *** Quits: tautologico (lymph@703660AA.CFE755C8.C27E1635.IP) (Quit: tautologico)
[02:00:00] *** Joins: tautologico (lymph@703660AA.CFE755C8.C27E1635.IP)
[02:17:02] *** Quits: [o__o] (~o__o@moz-24EBFAC7.me) (Input/output error)
[02:17:20] *** Joins: [o__o] (~o__o@moz-24EBFAC7.me)
[02:45:46] *** Joins: yuriks_ (yuriks@CE6EF1E.88B480FC.748B6D8D.IP)
[02:45:47] *** Quits: yuriks (yuriks@CE6EF1E.88B480FC.748B6D8D.IP) (Connection reset by peer)
[02:55:07] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[03:11:17] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[03:11:17] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/smlMgw
[03:11:17] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[03:11:38] *** Joins: tikue (tikue_star@moz-FEADCD38.hsd1.pa.comcast.net)
[03:13:44] *** Quits: tikue (tikue_star@moz-FEADCD38.hsd1.pa.comcast.net) (Ping timeout)
[03:16:16] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[03:16:16] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/LpVDAg
[03:16:16] <ghrust> 13rust/06auto 14b95a8c6 15Huon Wilson: std::ascii: Provide a copyless [Ascii] -> str method....
[03:16:16] <ghrust> 13rust/06auto 1427eb85d 15bors: auto merge of #10333 : huonw/rust/ascii, r=alexcrichton...
[03:16:17] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[03:45:04] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[03:47:28] *** Quits: zz_kimundi (kimundi@moz-C83B8CEE.dip0.t-ipconnect.de) (Ping timeout)
[03:49:37] *** Quits: StarLight (StarLight@moz-8EAA71F9.dynamic.avangarddsl.ru) (Ping timeout)
[03:51:02] *** Joins: zz_kimundi (kimundi@moz-E1B6D3ED.dip0.t-ipconnect.de)
[03:51:03] *** zz_kimundi is now known as kimundi
[03:54:04] *** Joins: StarLight (StarLight@moz-121895D8.dynamic.avangarddsl.ru)
[04:04:50] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[04:10:35] *** Quits: lkuper (lkuper@moz-54129201.dhcp-bl.indiana.edu) (Quit: lkuper)
[04:13:06] *** Joins: lkuper (lkuper@moz-54129201.dhcp-bl.indiana.edu)
[04:15:00] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[04:15:00] <ghrust> 01[13rust01] 15alexcrichton 04force-pushed 06try from 142d890a5 to 1420a2017: 02http://git.io/k471pw
[04:15:00] <ghrust> 13rust/06try 14007f79e 15Alex Crichton: uv: Remove lots of uv/C++ wrappers
[04:15:00] <ghrust> 13rust/06try 147727533 15Alex Crichton: uv: Provide a helper fn to Result<(), IoError>
[04:15:01] <ghrust> 13rust/06try 14c52d485 15Alex Crichton: uv: Remove closure-based home_for_io for raii...
[04:15:03] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[04:15:04] *** Quits: lkuper (lkuper@moz-54129201.dhcp-bl.indiana.edu) (Quit: lkuper)
[04:19:07] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[04:20:38] *** Quits: geoffhill (geoffhill@moz-738DC0DB.org) (Quit: )
[04:21:11] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[04:21:11] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/LpVDAg
[04:21:11] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[04:25:41] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[04:26:10] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[04:26:10] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/gCBOZg
[04:26:10] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[04:26:18] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[04:26:18] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/1I1swA
[04:26:18] <ghrust> 13rust/06auto 140a478b4 15Eric Holk: Add ~ to the list of allowable URL characters.
[04:26:18] <ghrust> 13rust/06auto 14d26776a 15bors: auto merge of #10340 : eholk/rust/url, r=brson...
[04:26:19] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[04:32:14] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[04:32:14] <ghrust> 01[13rust01] 15alexcrichton 04force-pushed 06try from 1420a2017 to 14798267a: 02http://git.io/k471pw
[04:32:14] <ghrust> 13rust/06try 14798267a 15Alex Crichton: Another round of test fixes from previous commits
[04:32:14] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[04:37:49] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[04:37:49] <ghrust> 01[13rust01] 15alexcrichton 04force-pushed 06try from 14798267a to 1418bf232: 02http://git.io/k471pw
[04:37:49] <ghrust> 13rust/06try 1418bf232 15Alex Crichton: Another round of test fixes from previous commits
[04:37:49] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[04:40:18] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[04:40:35] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: Textual IRC Client: www.textualapp.com)
[04:43:13] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[05:19:03] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[05:28:11] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[05:36:09] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[05:36:09] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/1I1swA
[05:36:09] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[05:41:08] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[05:41:08] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/7chEMQ
[05:41:08] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[05:41:16] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[05:41:16] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/GGSeIQ
[05:41:16] <ghrust> 13rust/06auto 14e63ffc1 15klutzy: rt: Convert timezone to utf-8 on Windows...
[05:41:16] <ghrust> 13rust/06auto 14fe18fe0 15klutzy: extra::time: Fix test on Windows...
[05:41:16] <ghrust> 13rust/06auto 14075347b 15bors: auto merge of #10281 : klutzy/rust/rt-timezone, r=alexcrichton...
[05:41:18] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[05:42:22] *** Parts: doomlord_ (servitor@moz-4625DF14.range86-184.btcentralplus.com) (Leaving)
[05:48:59] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Client exited)
[06:36:42] *** Joins: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net)
[06:36:42] *** ChanServ sets mode: +ao pcwalton pcwalton
[06:46:10] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[06:46:10] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/GGSeIQ
[06:46:10] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[06:51:12] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[06:51:12] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/NmaVEA
[06:51:12] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[06:51:16] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[06:51:16] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/YGiheQ
[06:51:16] <ghrust> 13rust/06auto 14e6dde28 15niftynif: Added skeleton implementation of a B-tree with a few bells and...
[06:51:16] <ghrust> 13rust/06auto 14058d785 15niftynif: Re-arranging some things in btree.rs to accommodate testing.
[06:51:17] <ghrust> 13rust/06auto 14fbde419 15niftynif: Addressed style concerns in btree.rs and added it to the lib file....
[06:51:19] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[06:54:10] *** Joins: doomlord_ (servitor@moz-4625DF14.range86-184.btcentralplus.com)
[07:01:15] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[07:01:15] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14ad0089b to 14075347b: 02http://git.io/N3iJvQ
[07:01:15] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[07:01:21] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[07:01:21] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Pm9Kzg
[07:01:21] <ghrust> 13rust/06auto 14e6a1f6d 15Carol Willing: Edited comment for docs to show std::io is deleted and replaced by std::rt::io
[07:01:21] <ghrust> 13rust/06auto 14acbcb9e 15bors: auto merge of #10341 : willingc/rust/minor-docfix, r=huonw...
[07:01:22] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[07:10:41] <cmr> acrichto: http://i.imgur.com/arm3Xbu.png
[07:12:05] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[07:13:21] <acrichto> cmr: I recommend using massif
[07:13:23] <acrichto> from valgrind
[07:13:30] <acrichto> last I checked it was actually all llvm
[07:13:36] <acrichto> it may have changed though
[07:13:40] <acrichto> or I may have been reading something wrong
[07:13:49] <cmr> How could llvm be making stuff before trans?
[07:15:32] <cmr> Also memory usage *grows* during configuration. Afaik that should just be *removing* things from the AST?
[07:15:36] <cmr> dbaupp: maybe you know about that?
[07:16:07] <cmr> It could be that it's entirely duplicating those ast trees except the attributes, and it's sticking arounds because they're @-boxes?
[07:16:39] <dbaupp> possibly
[07:17:02] <cmr> I think my next project will be converting @ in syntax to Rc, as much as possible.
[07:18:00] <dbaupp> ... possibly worth waiting for pointer traits, to stave of madness
[07:18:02] <dbaupp> *off
[07:18:22] <cmr> Madness! Pah
[07:18:30] <cmr> I need something to dull the pain of the upcoming finals :p
[07:18:49] <dbaupp> also, the final result of @ -> Rc-with-Pointer directly is likely nicer than @ -> Rc -> Rc-with-Pointer
[07:19:01] *** Quits: tautologico (lymph@703660AA.CFE755C8.C27E1635.IP) (Quit: tautologico)
[07:19:56] <benh> How much of syntax is @ out of necessity rather than out of predating ~ or whatever?
[07:20:13] <cmr> benh: almost all of it, at this point.
[07:20:26] <cmr> There have been various attempts at de-@ing syntax.
[07:20:38] <dbaupp> almost all == predating ~ or whatever, I believe.
[07:20:51] <cmr> Most of them turn into a journey down the rabbithole, only to find that some piece somewhere actually really does depend on shared ownership
[07:20:59] <cmr> And would require vast restructuring of syntax.
[07:21:24] <cmr> So none (or almost none) of it is strictly necessary, if it had been designed without @ in the first place
[07:24:07] <dbaupp> cmr: https://github.com/mozilla/rust/issues/7929 btw.
[07:24:32] <dbaupp> (specifically niko's comment)
[07:24:59] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[07:25:44] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[07:28:11] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[07:29:20] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[07:33:14] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[07:37:16] *** Quits: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net) (Quit: pcwalton)
[07:44:02] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[07:53:03] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[08:06:10] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[08:06:11] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/Pm9Kzg
[08:06:11] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[08:09:25] <cmr> dbaupp: sure, and afaik pcwalton also has ideas on redesigning the AST
[08:10:26] <cmr> I'm more interested in (and capable of) "memshrink: rustc edition", though
[08:10:50] <strcat> fewer evil @
[08:11:14] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[08:11:14] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/eLCu-g
[08:11:14] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[08:11:23] <cmr> they wouldn't be as evil if we actually had a gc that didn't suck ;(
[08:11:59] <strcat> cmr: gc would use waaaaay more memory
[08:12:03] <strcat> so yeah, I think they're evil either way
[08:12:14] <strcat> rustc shouldn't use gc, it already has memory usage issues without it
[08:12:39] <cmr> strcat: only sometimes? we could run collections between passes, and we wouldn't leak cycles anymore.
[08:12:46] <cmr> I don't disagree.
[08:12:56] <cmr> compiler isn't really the place for a gc
[08:12:56] <strcat> yes, we could sparingly use gc
[08:13:04] <strcat> but if you convert all the @ to gc, it's going to be a disaster ;p
[08:13:09] <cmr> Doesn't dmc still just use a bump allocator for everything? :P
[08:13:13] <strcat> yes
[08:13:20] <strcat> LLVM uses small vectors for everything
[08:13:38] <strcat> and also uses bump allocators in some places
[08:15:35] <strcat> meh
[08:15:38] <strcat> I find so many bugs with rust-core
[08:15:42] <strcat> when I try to do *anything* ;p
[08:15:55] <cmr> isn't that the case with _all_ the code you write though
[08:15:57] <cmr> ?
[08:16:23] <strcat> not really
[08:16:51] <strcat> rust has a lot of issues that make it really terrible for freestanding use atm
[08:17:01] <cmr> yeah, it does.
[08:17:04] <strcat> but you'd only run into most of them if you tried improving the stdlib
[08:17:18] <cmr> I gave up cmoss before it even really started because of a bunch of issues :(
[08:20:23] <strcat> cmr: https://github.com/thestinger/rust-core/blob/master/test/thread.rs at least what I made so far works ;p
[08:20:38] * strcat will be evil and do an amend
[08:21:17] <strcat> anyway
[08:21:42] <dbaupp> strcat: can you return Option<~A> ?
[08:21:56] <strcat> dbaupp: that's even more painful!
[08:21:59] <strcat> ;p
[08:22:16] <strcat> dbaupp: if the rust bug is fixed, they don't need to return ~
[08:22:18] <dbaupp> strcat: true... (I wasn't sure what you were optimising for... clearly code appearance.)
[08:22:44] <strcat> well, spawning a thread already allocates something like 200 bytes dynamically ;p
[08:22:48] <strcat> dbaupp: https://github.com/mozilla/rust/issues/10353
[08:22:57] <strcat> if that's fixed, shim can be generic
[08:23:13] <strcat> and then the proc can return A, not ~A
[08:23:20] <strcat> because shim can put it inside ~ itself
[08:24:04] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[08:24:04] <ghrust> 01[13rust01] 15alexcrichton 04force-pushed 06try from 1418bf232 to 1413612e6: 02http://git.io/k471pw
[08:24:04] <ghrust> 13rust/06try 1413612e6 15Alex Crichton: Another round of test fixes from previous commits
[08:24:04] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[08:24:46] <dbaupp> strcat: yeah, that's the nicer solution.
[08:24:54] <strcat> it's really a PITA that I have to do rustc thread.rs --emit-llvm --cfg libc -O -S && clang thread.s -lpthread -lrustrt
[08:24:58] <strcat> and I shouldn't need rustrt
[08:25:14] <strcat> it's from the exception personality, and rust-core doesn't even support unwinding atm >.<
[08:25:19] <strcat> I don't think it will.
[08:25:34] <strcat> (but maybe it will! who knows, it's just a PITA to make stuff exception safe)
[08:26:35] <dbaupp> catch at thread boundaries!
[08:27:27] <strcat> dbaupp: and do what? ;p
[08:27:27] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[08:27:38] <cmr> print a nyan cat to stderr!
[08:28:06] <dbaupp> strcat: cmr speaks the truth
[08:28:14] <strcat> but meh
[08:28:16] <strcat> unwinding.
[08:28:24] * dbaupp is good at useful library design.
[08:28:35] <strcat> so, lets say you have shared memory (MutexArc)
[08:28:46] <strcat> now, lets say you unwind in a task while you're modifying one
[08:28:54] <strcat> bam, exception safety issue ;p
[08:29:07] <strcat> ofc, they get poisoned in the dtor
[08:31:55] <cmr> Ahh, is the problem with cycles in objects with a destructor why many systems just leak in that case?
[08:32:01] <cmr> (eg, python)
[08:33:31] <strcat> cmr: python has a cycle collector
[08:33:42] <strcat> cmr: python doesn't care one bit about correctness though
[08:33:51] <strcat> it has finalizers that might not ever be run
[08:34:04] <strcat> they are there to make python "friendlier" to incorrect code
[08:34:24] <cmr> ... yikes
[08:34:28] <strcat> i.e. if you write code that leaks file descriptors, they *might* not actually leak
[08:34:30] <strcat> unless they do
[08:34:33] <dbaupp> strcat: http://docs.python.org/3/library/gc.html#gc.garbage
[08:34:35] <cmr> context managers ftw? :S
[08:34:49] <strcat> dbaupp: ah
[08:34:51] <dbaupp> "Python doesnâ€™t collect such cycles automatically because, in general, it isnâ€™t possible for Python to guess a safe order in which to run the __del__() methods"
[08:35:31] <cmr> Hah! But you can just set the fields to None to break the cycle, and it won't care.
[08:35:40] <cmr> The wonders of dynamic typing.
[08:35:40] <strcat> which is why we have #[unsafe_destructor] ;[
[08:35:42] <strcat> stupid @
[08:35:51] <dbaupp> cmr: or just del gc.garbage[:] apparently.
[08:36:07] <dbaupp> (oh, wait, that's after breaking cycles...)
[08:44:36] <cmr> Dear lord is rustc+massif slow
[08:45:13] <strcat> cmr: try callgrind
[08:45:15] <strcat> :D
[08:45:26] <cmr> I would *much* rather not
[08:45:30] <strcat> at one point I was writing a chess engine for fun
[08:45:38] <strcat> I gave up because callgrind made it ~2000x slower
[08:45:43] <strcat> and I was too lazy to use anything else
[08:45:45] <cmr> heh
[08:46:26] <strcat> it hates recursion for whatever reason
[08:47:51] <strcat> minimax + alpha-beta pruning as the core algorithm in anything makes callgrind cry
[09:08:35] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[09:16:09] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[09:16:09] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/aRS0cA
[09:16:09] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[09:16:31] <cmr> Eh, only took 10x longer than usual.
[09:18:32] <dbaupp> cmr: run massif on the massif+rustc combo, because that's not nearly slow enough
[09:18:33] <cmr> aaaand I don't have symbols
[09:18:43] <dbaupp> hahaha
[09:18:58] <dbaupp> does -Z debug-info work on the compiler yet?
[09:19:10] <cmr> Yes!
[09:19:22] <cmr> It actually worked on rustc for quite a while, it was libstd it had trouble with.
[09:19:36] <dbaupp> ah
[09:19:49] <dbaupp> does it work on libstd then?
[09:19:52] <cmr> yes
[09:20:03] <dbaupp> and everything else?
[09:20:06] <cmr> yes
[09:20:15] <cmr> presumably it doesn't cause segfaults anymore
[09:20:23] <dbaupp> that's nice
[09:20:42] <dbaupp> so can we -Z debug-info => -g yet?
[09:20:53] <cmr> I really hope we don't name it -g, but yes.
[09:21:09] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[09:21:10] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/vG_liw
[09:21:11] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[09:21:14] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[09:21:14] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/sMpzJw
[09:21:14] <ghrust> 13rust/06auto 143139962 15Alex Crichton: Another round of test fixes from previous commits
[09:21:14] <ghrust> 13rust/06auto 14d63e023 15bors: auto merge of #10321 : alexcrichton/rust/uv-rewrite, r=brson...
[09:21:15] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[09:21:22] <cmr> ideally it'd be -d/--debug
[09:21:32] <dbaupp> --cmr-doesn't-like--g-so-this-is-the-name-for-enabling-debug-info
[09:21:48] <dbaupp> yeah, but is it worth breaking convention just for that?
[09:21:54] <cmr> yes, I really think it is :P
[09:22:05] <cmr> -g makes no sense, and rustc isn't cc
[09:22:49] <dbaupp> debu*g*
[09:22:58] <dbaupp> obviously makes sense :P
[09:23:00] <cmr> -u: deb*u*g
[09:23:27] <dbaupp> `-\ ` debug* *info
[09:23:37] <cmr> hahah
[09:27:16] <strcat> rusti: let string = "foobar"; string.slice(0, 3)
[09:27:17] -rusti- "foo"
[09:27:48] <strcat> rusti: let string = "foobar"; let x: &str = string.slice(0, 3); x
[09:27:49] -rusti- "foo"
[09:36:37] <strcat> dbaupp: https://github.com/mozilla/rust/pull/10354 r?
[09:37:32] <strcat> may needs an amend or two to fix the tests but it's going to take me a while to build that far ;p
[09:38:29] <strcat> will expand it later
[09:38:39] <strcat> just don't want to hear any more confusion about exchange heap nonsense ever again ;p
[09:39:03] <dbaupp> strcat: looking now
[09:39:37] <klutzy> strcat: "because mutating a string may require altering the length." this may need some more explanation
[09:39:45] <klutzy> it's about multibyte charactes, right?
[09:39:54] <strcat> klutzy: yes, but atm I just want to fix what's there
[09:40:09] * strcat is in a bad frame of mind for writing comprehensive docs ;p
[09:40:27] <strcat> it also needs to show mutable string slices
[09:40:31] <strcat> and the full pattern matching syntax
[09:40:41] <strcat> er
[09:40:47] <strcat> there are no mutable string slices!
[09:40:53] <strcat> yay, one fewer thing to document.
[09:40:56] <strcat> ;p
[09:41:25] <dbaupp> strcat: looks fine modulo my comments
[09:46:24] <strcat> rusti: let xs = &mut [1, 2, 3];
[09:46:28] -rusti- <anon>:9:13: 9:15 warning: unused variable: `xs` [-W unused-variable (default)]
[09:46:28] -rusti- <anon>:9          let xs = &mut [1, 2, 3];
[09:46:28] -rusti-                       ^~
[09:46:28] -rusti- ()
[09:46:36] <strcat> rusti: let xs = &mut [1, 2, 3]; xs[0] = 2;
[09:46:37] -rusti- ()
[09:47:13] <strcat> dbaupp: should be good now
[09:47:41] <strcat> I mentioned this in the slice section
[09:47:43] <strcat> Strings are a multi-byte encoding (UTF-8) of
[09:47:45] <strcat> +Unicode code points, so they cannot be freely mutated without the ability to
[09:47:47] <strcat> +alter the length.
[09:48:19] <strcat> (rather than fixed-size, since you could argue fixed-size strings might be useful)
[09:48:40] <strcat> although would the size be in graphemes, code points or bytes? ;p
[09:50:13] <strcat> better pass tests ;[
[09:51:11] <dbaupp> strcat: that looks good
[09:55:24] <strcat> rusti: -0.0 / 0.0
[09:55:25] -rusti- NaN
[09:55:56] <strcat> rusti: (0.0 / 0.0, 2) < (0.0 / 0.0, 2)
[09:55:56] -rusti- false
[09:56:09] <strcat> rusti: (0.0 / 0.0, 2) <= (0.0 / 0.0, 2)
[09:56:10] -rusti- false
[09:56:13] <strcat> rusti: (0.0 / 0.0, 2) >= (0.0 / 0.0, 2)
[09:56:13] -rusti- false
[09:59:37] <dbaupp> hm
[10:00:25] <dbaupp> acrichto: https://github.com/mozilla/rust/pull/10355 r?
[10:02:03] <cmr> dbaupp: I wonder if it should be using the same sort of expansion-stack that macros use to trace where spans came from
[10:03:36] <dbaupp> cmr: I don't think you can pass that to later stages of the compiler
[10:04:12] <dbaupp> i.e. it's going via the spans on the Expr's it's constructing, so we'd need extra fields on that
[10:04:51] <dbaupp> (those errors are generated by typeck, but we're only in expansion for #[deriving].)
[10:07:39] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[10:08:04] <cmr> right
[10:11:12] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[10:11:13] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/9op3HQ
[10:11:13] <ghrust> 13rust/06auto 14eabdc8c 15Brian Anderson: std: Make atomic types non-copyable. Closes #8380
[10:11:13] <ghrust> 13rust/06auto 14bfa80f7 15bors: auto merge of #10344 : brson/rust/atomiccopy, r=alexcrichton...
[10:11:13] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[10:11:14] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[10:11:15] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14d63e023 to 1457d1ed8: 02http://git.io/N3iJvQ
[10:11:15] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[10:14:36] <strcat> wtf
[10:14:45] <strcat> how can my pull request be making a codegen test fail?
[10:18:45] <strcat> dbaupp: remember how to run just the doc tests?
[10:18:56] <strcat> hrm
[10:19:13] <strcat> make check-doc doesn't work ;[
[10:19:26] <strcat> ah, make check-stage2-doc does
[10:20:04] <strcat> dbaupp: it passed!
[10:20:18] <strcat> that's like, the rust I've ever written that compiled right away
[10:20:26] <strcat> (not really, but it feels that way ;p)
[10:20:32] <dbaupp> strcat: that sentence didn't compile :P
[10:20:37] <strcat> er
[10:20:39] <strcat> the first rust ;]
[10:20:44] <strcat> see? broken human brain
[10:20:48] <strcat> rusti: "not like me"
[10:20:50] <dbaupp> so, what's up with the codegen one?
[10:20:51] -rusti- "not like me"
[10:20:56] <dbaupp> haha
[10:21:00] <strcat> dbaupp: dunno
[10:21:21] <strcat> it just hates me
[10:21:43] <strcat> test [codegen] codegen/iterate-over-array.rs                ... metric: clang-codegen-ratio: 0.620253 (+/- 0.001)
[10:21:46] <cmr> is the example getting bigger, so the codesize ratchet is hitting it? or a different codegen test.
[10:21:47] <strcat> task '<main>' failed at 'Some tests failed', /home/strcat/projects/rust/src/compiletest/compiletest.rs:243
[10:21:49] <strcat> /home/strcat/projects/rust/mk/tests.mk:663: recipe for target 'tmp/check-stage2-T-x86_64-unknown-linux-gnu-H-x86_64-unknown-linux-gnu-codegen.ok' failed
[10:22:01] <strcat> [codegen] codegen/iterate-over-array.rs.clang-codegen-ratio: regressed by 4.26%
[10:23:09] *** Joins: ohazi (ohazi@moz-F62F3603.hsd1.ca.comcast.net)
[10:24:38] <strcat> dbaupp: obviously adding docs to the tutorial made rustc worse
[10:24:53] <strcat> docs == bloat
[10:24:59] *** kimundi is now known as zz_kimundi
[10:25:09] <strcat> doctests*
[10:25:24] <dbaupp> rm -rf doc
[10:29:24] <cmr> We need a way to reset those metrics on certain PRs.
[10:31:21] <dbaupp> has anything failed on the bots because of them?
[10:33:27] <strcat> but how can it possibly be failing for me
[10:33:30] <strcat> ;s
[10:33:53] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[10:50:23] *** Parts: ohazi (ohazi@moz-F62F3603.hsd1.ca.comcast.net) (Leaving)
[10:54:27] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[11:09:27] *** zz_kimundi is now known as kimundi
[11:10:52] *** Quits: StarLight (StarLight@moz-121895D8.dynamic.avangarddsl.ru) (Ping timeout)
[11:21:10] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[11:21:10] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/9op3HQ
[11:21:10] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[11:26:11] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[11:26:11] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/7P7jGg
[11:26:11] <ghrust> 13rust/06auto 14d01ba2e 15klutzy: Define WSAPOLLFD only on mingw 4.x...
[11:26:11] <ghrust> 13rust/06auto 1435c3aaf 15bors: auto merge of #10346 : klutzy/rust/mingw64-32-fix, r=alexcrichton...
[11:26:12] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[11:33:40] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[11:36:14] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[11:53:07] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[12:31:11] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[12:31:11] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/7P7jGg
[12:31:11] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[12:31:38] <cmr> bors is on a roll!
[12:36:12] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[12:36:12] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/uCBALg
[12:36:12] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[12:36:17] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[12:36:17] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/MjfHog
[12:36:17] <ghrust> 13rust/06auto 1409257df 15sh8281.kim: fix android timegm
[12:36:17] <ghrust> 13rust/06auto 144ce7d57 15bors: auto merge of #10348 : ksh8281/rust/fix_android_timegm, r=yichoi...
[12:36:17] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[12:59:44] *** Quits: nuts (tii@822A8E7E.6AD15BF5.75D3BBDB.IP) (Ping timeout)
[13:00:35] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[13:00:49] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:01:02] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[13:01:08] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:01:59] *** Joins: nuts (tii@822A8E7E.6AD15BF5.75D3BBDB.IP)
[13:17:24] <pnkfelix> nmatsakis: ping
[13:22:10] *** kimundi is now known as zz_kimundi
[13:29:33] <pnkfelix> nmatsakis: nm
[13:33:37] *** Quits: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net) (Quit: Leaving.)
[13:41:12] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[13:41:12] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/MjfHog
[13:41:12] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[13:46:04] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[13:46:05] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/0ZC5KA
[13:46:05] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[13:46:09] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[13:46:09] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/DeScEA
[13:46:09] <ghrust> 13rust/06auto 14eca52e6 15Daniel Micay: tutorial: rewrite the section vectors/strings...
[13:46:09] <ghrust> 13rust/06auto 149d8dc00 15bors: auto merge of #10354 : thestinger/rust/vector, r=huonw...
[13:46:09] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[13:51:59] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[13:52:11] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:53:22] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[13:53:32] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:30:57] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[14:32:23] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[14:51:06] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[14:51:06] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/DeScEA
[14:51:06] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[14:57:44] *** Joins: lkuper (lkuper@moz-54129201.dhcp-bl.indiana.edu)
[14:59:13] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:00:02] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[15:00:02] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[15:00:47] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[15:02:45] *** strcat1 is now known as strcat
[15:16:19] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:23:38] *** Joins: johanna (chatzilla@1563D1DD.81B50CCB.5DB860A5.IP)
[15:23:58] <johanna> hello hello
[15:24:20] <bstrie> it's a bit sleepy in here until all the mozilla folks get into work
[15:24:58] <johanna> bstrie: no mozillians, oh yes I have 3 hours diff with mountain view
[15:25:58] <bstrie> yeah, basically awake right now is either 1) an east-coaster or 2) a silly aussie/newzealie who is up way too late
[15:26:17] * bstrie waves to bjz
[15:26:45] <johanna> ha ha...
[15:27:01] <bjz> o/
[15:27:09] <bstrie> bjz: go to sleep!!
[15:27:14] <bjz> :[
[15:27:22] <johanna> bstrie: where r u? and bzj in EU?
[15:27:37] <bstrie> east coast
[15:27:38] <bjz> Australia
[15:27:44] <bjz> :[
[15:27:48] <johanna> bjz: WOW
[15:27:54] <bjz> ?
[15:28:00] <johanna> me, in the caribbean...
[15:28:06] <bjz> WOWOOWOWOWOw
[15:28:21] <bstrie> ooh, I don't know if we have any caribbean folks on the map yet
[15:28:31] <bstrie> http://seleniac.org/map/
[15:28:34] <bstrie> you can be the first!
[15:29:06] <johanna> I think so :-P
[15:29:47] <johanna> what a cool map
[15:29:59] <bstrie> don't share it anywhere, that server is silly and small :P
[15:30:04] <bstrie> it's not ready to get slashdotted
[15:30:29] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[15:30:32] <johanna> np :-) I'll keep it seceret 
[15:30:58] <johanna> bstrie: you working on rustc?
[15:31:07] <bstrie> I see that bjz is still narrowly ahead of chrismorgan in the race for rustc impact supremacy
[15:31:17] <bstrie> ...for the melbourne region
[15:31:47] <bstrie> johanna: no I am not smart enough to write compilers!
[15:31:54] <bstrie> here's what I do around here:
[15:31:57] <bstrie> 1) complain loudly
[15:32:12] <bstrie> 2) direct people to where they can get the answers to their questions, while complaining loudly
[15:33:08] <johanna> bstrie: it works cuz im here ;_P
[15:33:21] <bstrie> mission accomplished
[15:34:12] <bjz> ooh, dbaupp has a big bubble on that map
[15:34:26] <johanna> bstrie: what is your opinion the most critical things that need to be fix?
[15:34:35] <johanna> in rustc
[15:34:59] * bjz wonders who lives in brisbane
[15:35:14] <bstrie> johanna: well, all the *most* critical things have a full-time developer working on them, I think
[15:35:21] <bstrie> bjz: you can web-inspect the bubbles to get names
[15:36:01] <bstrie> also, looks like we have a contributor in singapore
[15:36:11] <johanna> any idea how many people working full time on this?
[15:36:17] <bstrie> full-time?
[15:36:36] <bstrie> mozilla has... brson, pcwalton, nmatsakis, tjc, acrichto
[15:37:15] <bstrie> and then samsung has somewhere between two and forty people working on it at any given time
[15:37:19] <bstrie> samsung... is mysterious
[15:37:36] <bstrie> but also many of those people work on servo as well
[15:38:05] <pnkfelix> pnkfelix is on the project as well, though he, like nmatsakis, is splitting his time with another research project at mozilla.
[15:39:30] <bjz> gavin: are you gavinb from Melbourne?
[15:39:47] <johanna> wow, thats quite a lot people
[15:39:59] *** Quits: Kxepal (Miranda@moz-95B10DEC.pppoe.mtu-net.ru) (Ping timeout)
[15:40:31] *** zz_kimundi is now known as kimundi
[15:40:32] <johanna> I thin samsung has big interest in servo
[15:40:46] <bstrie> I think they want to hedge their bets against google
[15:40:47] * nmatsakis doesn't think so
[15:41:04] <johanna> Google go?
[15:41:08] <bstrie> google chrome
[15:41:11] <nmatsakis> always way more work than we have time for ;)
[15:41:13] <bstrie> and google android
[15:41:23] <johanna> mmm
[15:41:53] <bstrie> samsung is one of the only companies with the resources to ship a version of android with alternatives to all the google-provided services
[15:42:09] <johanna> nmatsakis: can I help with any critical thing as a contributor?
[15:42:11] <bstrie> it's in their best interests to not be beholden to google in the long-term
[15:42:50] <johanna> I mean, I woudl like to help where you need it most and not only what I would like to work on :-)
[15:43:07] <bstrie> johanna: what sort of background to you have?
[15:43:12] <bstrie> *do
[15:43:30] *** Joins: Kxepal (Miranda@moz-AE08CD94.pppoe.mtu-net.ru)
[15:44:08] <johanna> developer for 10 years(C#, JAVA, good background in C/C++ but I havent develop in those in a while), Msc in secuirty enngineering from liverpool
[15:44:13] <bstrie> nmatsakis: johanna expressed interest in reviving the fuzzer, are the rust devs interested in actually using it this time? :)
[15:44:27] <bstrie> johanna: ooh, what sort of security engineering
[15:44:46] <johanna> web apps , right now I contribute to OWASP 
[15:45:11] <johanna> also background in C/C++ issues
[15:45:12] <bstrie> neat
[15:45:38] <nmatsakis> bstrie: I imagine so, yes
[15:45:41] <bstrie> I ask because writing crypto in rust is something that we've always avoided, but someday somebody's going to have to investigate it :)
[15:45:54] * nmatsakis shudders to think of all the ICEs
[15:45:55] <johanna> ohhh...
[15:46:06] <nmatsakis> actually i'd prefer to use the fuzzer not to find ICEs, that's like shooting fish in a barrel at this point ;),
[15:46:11] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[15:46:11] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/aexOHQ
[15:46:11] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[15:46:14] <nmatsakis> but rather to see if we can find inputs that type check and crash
[15:46:19] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[15:46:19] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/14SNnw
[15:46:19] <ghrust> 13rust/06auto 148051617 15Alex Crichton: Another round of test fixes from previous commits
[15:46:19] <ghrust> 13rust/06auto 14e6fd5b7 15bors: auto merge of #10321 : alexcrichton/rust/uv-rewrite, r=brson...
[15:46:19] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[15:46:48] <johanna> nmatsakis: I that case , is the fuzzer a bad idea then?
[15:47:41] <pnkfelix> johanna: you mean because it would waste a lot of time generating test inputs that would not type check?
[15:48:33] <pnkfelix> johanna: (I would think that a fuzzer with a filter to ensure that it passed type checker, could be useful, modulo the caveat about wasted effort just mentioned)
[15:48:59] <nmatsakis> I mean, all fuzzers waste a lot of time
[15:49:14] <nmatsakis> johanna: no I don't think it's a bad idea
[15:50:05] <johanna> nmatsakis: what woudl u suggest? I would like to hear about that...
[15:52:55] <nmatsakis> johanna: well basically what pnkfelix said; I'd like to see a fuzzer that produces variants on our tests -- I don't know just what kinds of variants would be useful exactly -- and tries to compile and run them. Anything that fails to compile or which fails gracefully during execution is ignored. Anything which *crashes* during execution is interesting (if there is no unsafe block in the code) and anything which ICEs the compiler *
[15:53:01] <nmatsakis> "ICE" == internal compiler error
[15:53:27] <nmatsakis> johanna: Jesse had a rust fuzzer, we removed it because it became antiquated, he may have opinions
[15:53:44] <nmatsakis> I think this is pretty standard fuzzer behavior though
[15:54:01] <nmatsakis> prob worth waiting till brson and a few others are around to find out if we'd actually *run* it
[15:54:04] <nmatsakis> may be too early
[15:56:19] <pnkfelix> nmatsakis: do you have a build handy of a checkout with your multiple lifetimes patches ?
[15:56:32] <pnkfelix> nmatsakis: I wanted to confirm some behavior I'm seeing with you
[15:57:43] <johanna> nmatsakis: I heard teh fuzzwer dates from version 0.2, seems like obsolete now
[15:58:31] <nmatsakis> pnkfelix: I thnk I do
[15:58:40] <nmatsakis> johanna: yes it's quite old
[15:59:39] <bstrie> the fuzzer was from around 0.2, but it sat around without being used until about 0.6
[15:59:52] <pnkfelix> nmatsakis: okay.  Actually now I'm seeing behavior I expected to see again, so I want to poke a bit more to narrow this down.
[16:05:56] <pnkfelix> nmatsakis: okay, I think I've got an example to show you
[16:06:10] <nmatsakis> pnkfelix: ok
[16:06:29] <johanna> going for lunch
[16:11:51] <pnkfelix> nmatsakis: https://gist.github.com/pnkfelix/7373395
[16:12:14] <pnkfelix> nmatsakis: so the conventions that I'm trying to use are:
[16:12:24] <pnkfelix> for lifetimes, always have: 'short <= 'long
[16:13:03] <pnkfelix> and to always pass along a _where dummy parameter to explicit indicate that
[16:14:13] <pnkfelix> nmatsakis: in this situation, I would imagine (and I thought I had actually observed) that `&'long int` <: `&'short int`
[16:14:17] <nmatsakis> pnkfelix: this is because all type parameters are currently invariant
[16:14:27] <nmatsakis> pnkfelix: #3598
[16:14:48] <pnkfelix> nmatsakis: wait, what?  okay then I'm really misunderstanding the results of your variance.rs pass then
[16:14:53] <nmatsakis> pnkfelix: no you are not
[16:14:59] <nmatsakis> pnkfelix: the variance pass computes the variance of type parameters correctly
[16:15:01] <pnkfelix> nmatsakis: so it computes the variances
[16:15:02] <nmatsakis> pnkfelix: we just do not *use it*
[16:15:05] <pnkfelix> nmatsakis: ah okay
[16:15:06] <nmatsakis> pnkfelix: except for lifetimes
[16:15:10] <nmatsakis> pnkfelix: I preserved current behvaior in this respect
[16:15:47] <pnkfelix> ah i see, you even said so in that ticket you linked.
[16:15:50] <pnkfelix> okay.
[16:16:43] <nmatsakis> pnkfelix: if you look at librustc/middle/typeck/check/infer/combine.rs, and search for fn substs, you'll see what I mean :)
[16:16:58] <nmatsakis> or search for "fn tps", which relates pairs of type parameters
[16:17:35] <pnkfelix> nmatsakis: I see.  My other examples where I was checking subtyping (e.g. relating `&fn(&'short int) -> &'long int` <: `&fn(&'long int) -> &'short int`) I never got around to abstracting out to using type parameters.
[16:17:50] <pnkfelix> nmatsakis: thanks
[16:19:48] <nmatsakis> pnkfelix: np
[16:32:34] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[16:32:34] <ghrust> 01[13rust01] 15alexcrichton 04force-pushed 06try from 1413612e6 to 148051617: 02http://git.io/k471pw
[16:32:34] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[16:36:10] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[16:36:10] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/N_w0nA
[16:36:10] <ghrust> 13rust/06auto 14812ea9e 15Huon Wilson: syntax::ext: Make type errors in deriving point to the field itself....
[16:36:10] <ghrust> 13rust/06auto 14a594a99 15bors: auto merge of #10355 : huonw/rust/deriving-field-spans, r=alexcrichton...
[16:36:11] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[16:45:29] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[16:59:05] *** Quits: lkuper (lkuper@moz-54129201.dhcp-bl.indiana.edu) (Quit: lkuper)
[16:59:10] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[17:02:45] *** Joins: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net)
[17:02:45] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:04:18] <nmatsakis> did people see my mail to rust-dev regarding the size of ast::Expr?
[17:04:29] <nmatsakis> well, it wasn't really regarding that, but it was buried in there
[17:04:39] <nmatsakis> 120 bytes... I think we can do better.
[17:05:01] <nmatsakis> it'd be interesting to have some sort of debug output for helping to diagnosis this sort of thing, like printing out the size of each data structure defined and each variant
[17:05:34] <kimundi> I think a general warning for using to big values in certain contexts would be nice
[17:05:50] <kimundi> Like passing a big struct by value for example
[17:05:58] <nmatsakis> we used to have something like that; it's a weird case, though
[17:06:01] <nmatsakis> for one thing, what's too big?
[17:06:07] <nmatsakis> for another, passing by value isn't necessarily expensive
[17:06:19] <nmatsakis> though of course we could eschew the warning in optimizable cases
[17:06:22] <nmatsakis> and of ocurse we don't optimize right now
[17:06:27] <kimundi> granted, that case has been solved by outpointers long time ago
[17:06:39] <nmatsakis> sometimes at least, it's subtle
[17:06:53] <nmatsakis> of course the best would be to be able to gather a snapshot of what types are allocated at any time
[17:07:10] <nmatsakis> but in lieu of that, it wouldn't be too hard to add something that prints out some data,
[17:07:13] <nmatsakis> or maybe a lint on struct size
[17:07:32] <nmatsakis> oooh, maybe a lint for enums that detects when the disparity between variants is very large
[17:07:34] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[17:07:45] * nmatsakis opens an issue
[17:08:15] <kimundi> that sounds useful
[17:08:58] <nmatsakis> a bit tricky with generics maybe
[17:09:06] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[17:10:52] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[17:11:14] <nmatsakis> https://github.com/mozilla/rust/issues/10362
[17:12:12] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Quit: Leaving...)
[17:15:22] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[17:20:00] <pnkfelix> nmatsakis: is there a way to apply the lint to post-monomorphized types?
[17:21:26] <nmatsakis> pnkfelix: you'd have to observe types that flow through trans I guess
[17:21:30] <nmatsakis> pnkfelix: it's certainly plausible
[17:38:11] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[17:40:25] <acrichto> nmatsakis: ping
[17:43:07] *** Quits: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net) (Quit: pcwalton)
[17:46:13] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[17:46:13] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/N_w0nA
[17:46:13] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[18:06:59] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[18:08:58] *** Joins: geoffhill (geoffhill@moz-738DC0DB.org)
[18:11:39] <gavin> bjz: no
[18:13:29] <nmatsakis> acrichto: pong
[18:13:39] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[18:13:39] *** ChanServ sets mode: +o tjc
[18:15:29] <acrichto> nmatsakis: I think that kernel32 on win32 uses stdcall, but on win64 it uses the C abi, is there a way to encode that in an abi string today?
[18:15:59] <nmatsakis> acrichto: prob not.
[18:16:21] <nmatsakis> acrichto: let me check briefly
[18:16:36] <acrichto> nmatsakis: although you were thinking of removing the AbiSet and making it just one, right?
[18:16:40] <nmatsakis> acrichto: https://github.com/mozilla/rust/issues/10049
[18:17:00] <acrichto> oh hm, I was looking for exactly 'system'
[18:17:16] <nmatsakis> acrichto: yeah right now the code is not set to distingiush based on win32 vs win64
[18:17:22] <nmatsakis> acrichto: it .. wouldn't be too hard to change that
[18:17:32] <acrichto> to add 'system'?
[18:17:39] <nmatsakis> acrichto: yes
[18:17:40] <acrichto> or to allow only one constraint
[18:17:48] <nmatsakis> acrichto: well either, but they can be done independently
[18:18:04] <acrichto> hm ok, I may try to add a 'system' abi
[18:18:14] <nmatsakis> acrichto: it'd be modeled after "C", I imagine -- that is, a 'cross-platform' ABI
[18:18:41] <nmatsakis> acrichto: you'll have to modify AbiSet::for_arch() to take the O/S too, probably
[18:18:56] <acrichto> cool, I'll look into this
[18:19:49] *** Joins: lkuper (lkuper@moz-54129201.dhcp-bl.indiana.edu)
[18:23:37] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:23:37] *** ChanServ sets mode: +qo brson brson
[18:23:57] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[18:26:13] *** Quits: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com) (Quit: leaving)
[18:26:18] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[18:26:18] *** ChanServ sets mode: +o tjc
[18:27:43] *** Joins: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com)
[18:31:07] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[18:35:50] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[18:35:50] <ghrust> 01[13rust01] 15catamorphism 04force-pushed 06try from 148051617 to 1462fc6a9: 02http://git.io/k471pw
[18:35:50] <ghrust> 13rust/06try 1462fc6a9 15Tim Chevalier: rustpkg: Un-ignore test_install_invalid_external and test_install_invalid
[18:35:50] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[18:51:19] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[18:51:19] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/19T0KQ
[18:51:19] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[18:51:23] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[18:51:23] <ghrust> 01[13rust01] 15bors pushed 27 new commits to 06auto: 02http://git.io/eDd1dQ
[18:51:23] <ghrust> 13rust/06auto 14007f79e 15Alex Crichton: uv: Remove lots of uv/C++ wrappers
[18:51:23] <ghrust> 13rust/06auto 147727533 15Alex Crichton: uv: Provide a helper fn to Result<(), IoError>
[18:51:24] <ghrust> 13rust/06auto 14c52d485 15Alex Crichton: uv: Remove closure-based home_for_io for raii...
[18:51:26] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[18:55:37] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[19:00:36] <kimundi> nmatsakis: I finally got around to making a PR for the Result API changes. I'm still unhappy with the fact that Result looses its ability to fail with a proper error message, but I couldn't find a better solution.
[19:00:41] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[19:01:07] <kimundi> (https://github.com/mozilla/rust/pull/10364 if someone is interested)
[19:01:42] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[19:01:42] *** ChanServ sets mode: +o tjc
[19:06:55] *** Joins: sanxiyn (tinuviel@5F1AEB26.A92E374.57C4C441.IP)
[19:10:26] <tikue_> kimundi: do you mean because it's converted to an option first?
[19:11:24] <kimundi> tikue_: That, and res.as_ref() would mean we'd need a impl of ToStr for &T : ToStr, which is not currently the case and causes usability problems
[19:12:05] <kimundi> But the main issue is that converting to Option looses the error type anyway
[19:13:58] <tikue_> hmmm
[19:15:25] <tikue_> kimundi: what is the primary use case for converting from Result to Option with ok() and err()
[19:16:02] * tikue_ goes back to the ML thread
[19:16:27] <sfackler> tikue_: I've needed that every once in a while since something will need an Option<Foo> and some function gives me a Result<Foo, Err>
[19:17:03] <tikue_> sfackler: so presumably in that case you don't really care about the Err message right? otherwise you'd explicitly check first?
[19:17:22] <sfackler> yeah, but it's not a huge pain to just match if you need to go to an Option
[19:17:41] <tikue_> yeah
[19:18:18] <kimundi> tikue_: It's basically so that Result doesn't have to implement all convenience methods of Option itself, _twice_
[19:18:26] <tikue_> you know, it occurs to me that Option is really a subcase of Result
[19:18:48] <tikue_> it seems like it'd have been better to implement all the methods on Result and then have Option special case it rather than reverse
[19:19:01] <kimundi> For example res.ok().expect("foo") and res.err().expect("bar") vs res.expect("foo") and res.err_expect("bar")
[19:19:36] <tikue_> type Option<T> = Result<T, ()>; or something
[19:20:08] <tikue_> (not that I think that's what option should be, just showing that it's a special case)
[19:20:46] <kimundi> Well, 'None' is nicer than Err(()) ;)
[19:21:34] <tikue_> i mean the reason it's the way it is because Option is the commonly used one, not result
[19:21:48] <tikue_> s/is/is is
[19:22:18] <sfackler> Option also serves two roles
[19:22:21] <sfackler> Result<Foo, ()>
[19:22:25] <sfackler> and "nullable Foo"
[19:22:58] <tikue_> yeah
[19:23:11] <sfackler> maybe APIs like FromStr should use Result<Foo, ()> instead of Result<Foo>
[19:23:23] <tikue_> you mean instead of Option<Foo> ?
[19:23:24] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:23:28] <sfackler> er, yeah
[19:23:29] <tikue_> that's wha I'm thinking
[19:23:44] <tikue_> and perhaps just duplicate result and option because option is so common
[19:24:35] <kimundi> If we had generic statics, we might actually reasonably fake an Option with an Result: fn Some<T>(t: t) -> Result<T, ()> and static None<T>: Result<T, ()> = Err(()); :P
[19:24:37] <sfackler> really, FromStr should use Result<Foo, E> and be parameterized over E
[19:25:27] <sfackler> maybe something worth making an RFC issue for
[19:25:38] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[19:26:18] <tikue_> basically I think it's worth having composable results in addition to options
[19:27:43] <tikue_> of course then it comes back to the issue of how to actually represent that, because the Result enum doesn't have a way to flag the variant being composed over
[19:30:19] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[19:44:23] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[19:52:42] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[19:54:26] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[19:58:04] *** Parts: sanxiyn (tinuviel@5F1AEB26.A92E374.57C4C441.IP) (Bye)
[20:01:11] <nmatsakis> kimundi: ok
[20:02:34] *** Joins: steveklabnik (steveklabn@moz-F84F761F.homerun.telia.com)
[20:05:11] <nmatsakis> acrichto: https://github.com/mozilla/rust/pull/10367#issuecomment-28093601
[20:06:49] <acrichto> nmatsakis: cool, thanks!
[20:07:18] <nmatsakis> acrichto: we really should simplify the ABI stuff though; ideally we could then return the OS/Arch constants to librustc....
[20:08:15] <acrichto> nmatsakis: I think that if we remove the "set" idea and leave it as just a one thing, then it should get a whole lot easier
[20:08:43] <nmatsakis> yeah, overdesign on my part. oh well.
[20:09:19] <acrichto> eh, I think we'll live :)
[20:11:15] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[20:11:15] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 145aebbfc to 14a594a99: 02http://git.io/N3iJvQ
[20:11:15] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[20:11:20] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[20:11:20] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/KVakMQ
[20:11:20] <ghrust> 13rust/06auto 1425a995a 15Alex Crichton: Add a "system" ABI...
[20:11:20] <ghrust> 13rust/06auto 1449d592b 15bors: auto merge of #10367 : alexcrichton/rust/system-abi, r=nikomatsakis...
[20:11:20] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[20:27:52] *** Joins: tikue (tikue_star@56941469.92504EB1.689607DE.IP)
[20:31:18] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[20:31:18] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1449d592b to 14a594a99: 02http://git.io/N3iJvQ
[20:31:18] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[20:31:19] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[20:31:19] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/qe_GeQ
[20:31:19] <ghrust> 13rust/06auto 1425a995a 15Alex Crichton: Add a "system" ABI...
[20:31:19] <ghrust> 13rust/06auto 14c16edb1 15bors: auto merge of #10367 : alexcrichton/rust/system-abi, r=nikomatsakis...
[20:31:20] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[20:33:59] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[20:37:36] *** Quits: johanna (chatzilla@1563D1DD.81B50CCB.5DB860A5.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0/20131025151332])
[20:48:17] *** Quits: lkuper (lkuper@moz-54129201.dhcp-bl.indiana.edu) (Ping timeout)
[21:17:29] *** Joins: andrew-d_w (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net)
[21:17:29] *** Quits: andrew-d_w (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net) (Input/output error)
[21:17:44] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[21:17:44] *** ChanServ sets mode: +o tjc
[21:17:50] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[21:18:19] *** Quits: andrew-__ (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[21:19:25] *** Joins: andrew-__ (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[21:20:27] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[21:21:11] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[21:21:11] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:25:21] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[21:31:55] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[21:32:33] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[21:32:33] *** ChanServ sets mode: +o tjc
[21:33:59] <bstrie> reading an article about luajit (http://wiki.luajit.org/Allocation-Sinking-Optimization) and wondering if rust does an optimization mentioned within called "scalar replacement of aggregates"
[21:34:20] <tjc> bstrie: Rust as such doesn't do it. LLVM might, I'm not sure
[21:36:01] *** Quits: steveklabnik (steveklabn@moz-F84F761F.homerun.telia.com) (Ping timeout)
[21:36:09] <Luqman> bstrie: afaik we (i.e llvm) do it 
[21:40:23] *** Joins: steveklabnik (steveklabn@moz-F84F761F.homerun.telia.com)
[21:41:21] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[21:41:21] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14c16edb1 to 14a594a99: 02http://git.io/N3iJvQ
[21:41:21] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[21:41:29] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[21:41:29] <ghrust> 01[13rust01] 15bors pushed 1 new commit to 06auto: 02http://git.io/24PMGw
[21:41:29] <ghrust> 13rust/06auto 14f1a8709 15bors: auto merge of #10369 : catamorphism/rust/issue-9994, r=catamorphism...
[21:41:29] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[21:49:49] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[21:51:23] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[21:51:23] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14f1a8709 to 14a594a99: 02http://git.io/N3iJvQ
[21:51:23] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[21:51:26] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[21:51:26] <ghrust> 01[13rust01] 15bors pushed 1 new commit to 06auto: 02http://git.io/l06mAQ
[21:51:26] <ghrust> 13rust/06auto 14461dca3 15bors: auto merge of #10369 : catamorphism/rust/issue-9994, r=catamorphism...
[21:51:26] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[21:55:12] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[21:59:14] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[21:59:14] *** ChanServ sets mode: +qo brson brson
[22:03:49] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:04:13] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[22:04:13] *** ChanServ sets mode: +qo brson brson
[22:04:44] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[22:08:06] <dbaupp> bstrie: it does, it's one of the reasons why the iterator structs optimise well (the internal counters get split out in to registers, etc.)
[22:08:52] <dbaupp> bstrie: http://llvm.org/docs/doxygen/html/SROA_8cpp.html#details
[22:11:08] *** Quits: tikue (tikue_star@56941469.92504EB1.689607DE.IP) (Ping timeout)
[22:16:28] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[22:16:28] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/qDvyFA
[22:16:28] <ghrust> 13rust/06auto 14ffcbd8d 15Andrei Formiga: Add default 'package_id' link meta for crates (with value equal to 'name')
[22:16:28] <ghrust> 13rust/06auto 14cf24280 15Andrei Formiga: Added default value for package_id attribute when encoding metadata for lib crates
[22:16:28] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[22:16:29] <ghrust> 13rust/06auto 1423387b0 15Andrei Formiga: Added tests for default generation of package_id meta attribute
[22:16:31] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[22:17:39] *** Quits: dbaupp (Thunderbir@moz-DDA7CEB8.lns20.syd6.internode.on.net) (Ping timeout)
[22:23:07] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[22:26:45] <brson> nmatsakis: removing struct deref is going to make the type checker sad - it looks like you were a big fan of the feature
[22:27:38] <pcwalton> nmatsakis: ping
[22:28:04] *** Joins: dbaupp (Thunderbir@moz-DDA7CEB8.lns20.syd6.internode.on.net)
[22:37:31] <cmr> brson: struct deref is going away? presumably for smartptr?
[22:37:45] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:45:00] <pcwalton> cmr: yeah
[22:45:08] <pcwalton> well, probably Deref and MutDeref traits
[22:45:37] *** Joins: jeffdb (jeff@moz-9D2E3B02.hsd1.wa.comcast.net)
[22:48:27] *** Quits: jeffdb (jeff@moz-9D2E3B02.hsd1.wa.comcast.net) (Quit: jeffdb)
[22:50:41] <strcat> pcwalton: MutDeref could probably include moving out, because to be safe it has to be owned
[22:50:59] <pcwalton> strcat: depending on what MutDeref wants to do we probably need a couple of them
[22:51:02] <pcwalton> a couple of those traits
[22:51:51] * strcat is curious whether the linux kernel can just be taught to have a thread pool scheduling mode
[22:52:10] *** kimundi is now known as zz_kimundi
[22:52:18] <strcat> SCHED_THREAD_POOL! ;p
[22:52:39] <cmr> heh
[22:53:19] <strcat> SCHED_FIFO_POOL, maybe
[22:53:23] <strcat> well
[22:53:30] <strcat> it should have higher priority than other stuff
[22:53:37] <bstrie> dbaupp: thanks
[22:57:15] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Connection reset by peer)
[22:59:39] <brson> i've been working on removing conditions and the first three conditions I removed actually seem like pretty good use cases for the feature: handling non-utf8 bytes in strings, nulls in C strings, and nulls in paths
[23:00:41] <brson> although the way the not_utf8 condition works probably isn't the best
[23:01:25] <strcat> brson: could always just take it as a closure parameter
[23:01:40] <strcat> same thing as conditions without the magic TLS part
[23:01:59] <brson> strcat: some of these conditions are buried pretty deep. it would impact a lot of calls
[23:02:33] <brson> though that's a problem - it's not clear which calls may raise a condition
[23:03:23] *** Joins: jeffdb (jeff@moz-9D2E3B02.hsd1.wa.comcast.net)
[23:03:25] <dbaupp> what would the condition do for a non-utf8 byte? splicing in new bytes is hard (e.g. it's impossible for `&[u8] -> &str`, and expensive for `~[u8] -> ~str`.)
[23:04:12] <cmr> I don't think it should handle that extensively.
[23:04:15] <brson> dbaupp: well, right now it just lets you replace the whole string, which seems maximally useless
[23:04:18] <cmr> That'd be the job of our text encoding API
[23:04:38] <brson> just stripping out the bad bytes seems like the obvious thing you would want to do if you're being defensive
[23:04:53] <cmr> Or... returning None? :p
[23:05:25] <strcat> brson: there's a Unicode way of handling it
[23:05:30] <strcat> you replace them with the replacement character
[23:05:58] <strcat> and then UI code can handle the replacement character in a way that makes sense
[23:06:42] <brson> cmr: there are variants of the from_utf8 fn that return None
[23:06:56] <strcat> brson: http://docs.python.org/3.3/howto/unicode.html for example
[23:07:01] <strcat> The errors argument specifies the response when the input string canâ€™t be converted according to the encodingâ€™s rules. Legal values for this argument are 'strict' (raise a UnicodeDecodeError exception), 'replace' (use U+FFFD, REPLACEMENT CHARACTER), or 'ignore' (just leave the character out of the Unicode result). The following examples show the differences:
[23:07:17] <strcat> that seems to be the full set of ways you might handle it
[23:07:36] <strcat> could just be an enum param
[23:07:55] <strcat> (and an alternate API using Option)
[23:13:28] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[23:33:44] <Luqman> acrichto: https://gist.github.com/luqmana/f89d0f1a76618b5e0eaf
[23:46:17] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[23:46:17] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14b5eda9e to 14a594a99: 02http://git.io/N3iJvQ
[23:46:17] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[23:46:27] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[23:46:28] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/YJn1Vw
[23:46:28] <ghrust> 13rust/06auto 140865b4d 15Tomas Sedovic: Implement IterBytes for TypeId
[23:46:28] <ghrust> 13rust/06auto 14f0b5646 15bors: auto merge of #10359 : tomassedovic/rust/typeid-iterbytes, r=pcwalton...
[23:46:28] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[23:47:06] <pcwalton> brson: maybe instead of a condition it can be a task-local flag indicating what to do
[23:47:14] <pcwalton> there's usually a finite set of useful things to do
[23:47:17] <pcwalton> fail, strip them out
[23:51:47] <brson> pcwalton: it's a pretty small step from doing that a few times to using conditions
[23:52:01] <pcwalton> brson: conditions have much worse UI though
[23:52:19] <pcwalton> I can never remember how to use them
[23:52:42] <pcwalton> but I like strcat's idea of the enum param anyway
[23:54:18] <brson> conditions do have a terrible ui
