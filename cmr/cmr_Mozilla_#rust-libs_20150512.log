[00:03:01] *** Quits: Rym (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[00:28:27] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[00:30:20] *** Joins: Rym (y@moz-o80acm.range86-189.btcentralplus.com)
[00:34:27] *** Quits: Rym (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[00:39:53] <Gankro> huon: Do you forsee any serious downside to using SIMD types in bit* collections?
[00:40:43] <huon> Gankro: instability is all
[00:42:18] <Gankro> huon: I'm thinking on making a num-style crate that focuses on primitives as "piles of bits", so that it can be abstracted over. Even if there are tradeoffs then the user could at least pick their poison.
[00:47:52] <huon> oh, another one is making it optimal seems hard
[00:48:16] <huon> (e.g. using 256-bit or even 512-bit vectors would be better on recent platforms)
[00:54:18] <aatch> Depending on the operations, auto-vectorisation might do it automatically.
[00:54:25] <Gankro> huon: Hence parametrizing
[00:54:39] <huon> aatch: it does, if alignment is guaranteed
[00:54:45] <Gankro> BitVec<PileOfBits=u32>
[00:54:59] <huon> aatch: (unfortunately the longer vectors have higher alignment types)
[00:55:01] <huon> Gankro: ah
[00:55:21] <Gankro> Got a slicker platform? Crank it to your favourite simd type
[00:55:35] <huon> Gankro: hm, IMO it'd be preferable to have it choose automatically internally
[00:55:38] <cmr> Gankro: is llvm not autovectorizing well? could the iterators/loops be rewritten to vectorize well?
[00:55:50] <aatch> huon, well it generally has a prologue that handles the unaligned part, then a main vectorized loop and an epilogue that handles the trailing elements.
[00:55:50] <huon> cmr: it's just alignment problems
[00:56:04] <huon> aatch: right, but LLVM isn't doing anything like that in this case
[00:56:51] <huon> Gankro: I can't see a reason to chose smaller-than-maximal backing types
[00:56:53] <Gankro> cmr: I haven't been hearing great things about our vectorization
[00:57:08] <huon> s/our/auto/ :)
[00:57:10] <Gankro> huon: API boundaries, basically
[00:57:22] <huon> Gankro: why does that apply?
[00:57:38] <aatch> We lose vectorisation with non-trivial use of iterators. A big part of that is due to the trusted iterator length issue though.
[00:57:40] <huon> Gankro: it's not like people are going to have APIs interacting across different platforms?
[00:57:49] <Gankro> huon: If I accept or return a BitVec, I need to know the type that is involved at compile time
[00:57:57] <huon> Gankro: yeah, and it is known
[00:57:58] <Gankro> huon: Hmm
[00:58:24] <Gankro> huon: Isn't some of the num types cpu and not platform-specific?
[00:58:55] <Gankro> (effecient support for them, that is)
[00:59:27] <Gankro> huon: Also if parameterizing legitimizes exposing a "blocks" iterator, which is desperately needed
[01:00:45] <huon> Gankro: yes, but, at least with cargo, if you're building an application for a specific CPU you're going to be building all libraries for that CPU
[01:01:09] <huon> what's so useful about a blocks iterator?
[01:02:01] <Gankro> huon: To be able to work with the raw repr for fancy stuff. e.g. we can decouple BitSet without it
[01:02:25] <Gankro> *can't
[01:04:38] <reem> huon: Letâ€™s say I want to find the first unset slot in a BitSet, I can do that a lot faster if I have access to 32, 64, or more bits at a time and can popcnt. Without a blocks iterator this has to be built-in to BitSet.
[01:09:47] <huon> reem: right, I can see functionally that can be implemented more efficiently with it, I just don't know of any concrete use for such functionality
[01:10:08] <huon> (I'm sure there is one, hence asking the question :) )
[01:10:31] <reem> huon: One case I had in an interview question was for an id allocator, to use staggered BitSets to mark taken ids
[01:10:45] <reem> so you have a BitSet that tells you what zones of a larger BitSet have at least one slot available
[01:11:28] <Gankro> huon: Well there's no usage because we don't expose it :)
[01:11:42] <huon> Gankro: that's not what I was asking
[01:11:49] <huon> reem: ah, cool
[01:12:48] <Gankro> huon: Hrm, why are the ops traits impl'd via "magic" for simd? Or at least, why aren't they exposed as regular traits?
[01:13:00] <huon> they're not implemented
[01:13:16] <huon> they get the operators in the same way that normal primitives get them
[01:13:41] <Gankro> huon: u8 still impls Add
[01:13:48] <huon> right, but that's just for generic code
[01:13:53] <huon> look at the impl: it calls + inside
[01:14:04] <Gankro> huon: Yes I'm trying to write generic code :)
[01:14:29] <Gankro> huon: So basically such a change would not be rejected?
[01:14:34] <huon> no
[01:34:04] *** Joins: Rym (y@moz-o80acm.range86-189.btcentralplus.com)
[01:37:33] <Gankro> huon: is the list of magic-traits at https://doc.rust-lang.org/std/simd exhaustive?
[01:37:45] <Gankro> e.g. `Not` is not impl'd
[02:14:24] *** Quits: zz_kimundi (kimundi@moz-krnn6s.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:15:31] *** Joins: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com)
[02:15:43] *** Quits: Rym (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[02:16:04] *** Joins: zz_kimundi (kimundi@moz-ocelec.dip0.t-ipconnect.de)
[02:16:05] *** zz_kimundi is now known as kimundi
[02:38:28] *** Joins: frewsxcv_ (uid86219@moz-dneii9.brockwell.irccloud.com)
[02:41:05] *** Quits: frewsxcv (frewsxcv@moz-lr4.h2r.241.192.IP) (Quit: ZNC - http://znc.in)
[02:41:06] *** frewsxcv_ is now known as frewsxcv
[02:41:15] *** Quits: frewsxcv (uid86219@moz-dneii9.brockwell.irccloud.com) (Quit: )
[02:41:21] *** Joins: frewsxcv (uid86219@moz-dneii9.brockwell.irccloud.com)
[03:09:27] *** Joins: p1start (p1start@moz-nftjhe.org)
[03:25:10] *** Joins: quantheory (quantheory@moz-dsb104.crel.jtvf.0001.2601.IP)
[03:39:09] <Gankro> Hmm huon, thinking about it more I think using SIMD types might harm the more stateful ops
[04:05:37] *** Quits: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com) (Connection closed)
[04:06:10] *** Joins: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com)
[04:34:49] *** Quits: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[04:57:54] *** Quits: quantheory (quantheory@moz-dsb104.crel.jtvf.0001.2601.IP) (Quit: Leaving)
[05:00:52] <Gankro> aturon: your(?) debug/display RFC says Display shouldn't be impl'd for collections because there are Many Ways to display them, while Debug should (because it's useful)/ What about Octal and the more exotic fmt traits?
[05:02:08] *** Joins: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com)
[05:06:22] *** Quits: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[05:13:18] <reem> it would be cool if you could use those to modify the Debug impl to use the special formatter for the inner data
[05:56:17] *** Joins: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com)
[06:00:31] *** Quits: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[06:50:28] *** Joins: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com)
[06:54:42] *** Quits: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[07:01:46] *** Joins: Tobba (Tobba@moz-6oh.7ki.21.217.IP)
[07:19:25] *** Quits: Tobba (Tobba@moz-6oh.7ki.21.217.IP) (Connection closed)
[07:26:33] *** Joins: Tobba (Tobba@moz-6oh.7ki.21.217.IP)
[07:44:36] *** Joins: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com)
[07:48:50] *** Quits: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[08:20:18] *** Quits: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au) (Ping timeout: 121 seconds)
[08:38:45] *** Joins: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com)
[08:43:01] *** Quits: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[09:32:56] *** Joins: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com)
[09:37:09] *** Quits: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[09:49:00] *** Quits: Tobba (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[10:04:20] *** Joins: Tobba (Tobba@moz-6oh.7ki.21.217.IP)
[10:20:32] *** Quits: Tobba (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[10:23:40] *** Joins: Tobba (Tobba@moz-6oh.7ki.21.217.IP)
[10:27:04] *** Joins: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com)
[10:27:57] *** Quits: nrc (nrc@moz-9luh02.xtra.co.nz) (Ping timeout: 121 seconds)
[10:31:20] *** Quits: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[10:37:28] *** Quits: stl (stl@moz-fg4.kee.15.176.IP) (Ping timeout: 121 seconds)
[10:40:58] *** Quits: Tobba (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[10:49:21] *** Joins: Tobba (Tobba@moz-6oh.7ki.21.217.IP)
[10:57:24] *** Joins: ChrisMorgan (ChrisMorgan@moz-mpe2k5.tpgi.com.au)
[10:57:56] *** Joins: stl (stl@moz-h0r.qae.15.176.IP)
[11:00:10] *** Quits: Tobba (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[11:08:06] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[11:21:13] *** Joins: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com)
[11:23:24] *** Joins: pnkfelix (pnkfelix@moz-6v5.3nd.202.89.IP)
[11:23:24] *** ChanServ sets mode: +o pnkfelix
[11:25:29] *** Quits: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[12:15:24] *** Joins: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com)
[12:19:39] *** Quits: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[12:22:24] *** Quits: ChrisMorgan (ChrisMorgan@moz-mpe2k5.tpgi.com.au) (Ping timeout: 121 seconds)
[12:35:41] *** Joins: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au)
[12:51:41] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[12:58:57] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[13:09:34] *** Joins: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com)
[13:13:48] *** Quits: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[13:20:57] *** Joins: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com)
[14:01:39] *** Joins: proc (proc@moz-a7bc7e.dip0.t-ipconnect.de)
[14:48:17] *** Quits: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[14:58:11] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[15:14:26] *** Quits: pnkfelix (pnkfelix@moz-6v5.3nd.202.89.IP) (Ping timeout: 121 seconds)
[15:18:09] *** Joins: killercup (killercup@moz-qj5qhi.dip0.t-ipconnect.de)
[15:24:33] *** Joins: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com)
[17:08:49] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[18:36:38] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[18:36:38] *** ChanServ sets mode: +o pnkfelix
[18:45:04] *** Joins: simukis1 (nagisa@moz-8t068g.static.zebra.lt)
[18:45:09] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Connection closed)
[19:38:10] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.5.1)
[20:03:51] *** Joins: p1start (p1start@moz-nftjhe.org)
[20:05:46] *** Quits: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[20:06:31] *** Joins: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com)
[20:11:04] *** Quits: killercup (killercup@moz-qj5qhi.dip0.t-ipconnect.de) (Quit: Bye)
[20:19:54] *** Joins: nrc (nrc@moz-9luh02.xtra.co.nz)
[20:19:54] *** ChanServ sets mode: +qo nrc nrc
[20:24:59] *** Quits: proc (proc@moz-a7bc7e.dip0.t-ipconnect.de) (Quit: Gotta eat my pizza)
[20:28:10] *** Quits: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[20:36:10] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[20:37:57] *** Joins: blank_na1e (blank_name@moz-9koqv8.mi.frontiernet.net)
[20:39:11] *** Joins: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com)
[20:40:16] *** Quits: blank_name (blank_name@moz-th6.t75.79.172.IP) (Ping timeout: 121 seconds)
[21:06:37] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[21:06:37] *** ChanServ sets mode: +o pnkfelix
[21:54:20] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.5.1)
[22:31:41] *** Joins: acharles (acharles@moz-dvfnah.static.qwest.net)
[22:33:40] *** Quits: acharles (acharles@moz-dvfnah.static.qwest.net) (Client exited)
[22:33:45] *** Joins: acharles (acharles@moz-dvfnah.static.qwest.net)
[22:47:20] <acharles> Anyone know why this fails? https://gist.github.com/ahmedcharles/3ec9559a4887ab18ce8a
[23:50:04] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[23:55:02] *** kimundi is now known as zz_kimundi
[23:57:56] *** Joins: mitsuhiko (mitsuhiko-m@moz-dcduic.srv.pocoo.org)
