[00:00:03] <vmx> aatch: then i don't know what you mean. hints are welcome
[00:01:02] <aatch> Well there's either using the trait as a type via a trait object (~Geometry) or as a bound (T : Geometry).
[00:01:33] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[00:02:03] <aatch> So your `EventPointSchedule` can either have a type parameter, and contain a vector of that parameter (~[T]), or use trait objects.
[00:02:49] <aatch> Functions and methods that work on a parameterised EventPointSchedule should have a bound on T.
[00:03:16] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[00:03:16] *** ChanServ sets mode: +ao dherman dherman
[00:03:36] *** Quits: themgt (themgt@moz-83F07CDA.cm.vtr.net) (Client exited)
[00:03:37] <aatch> Even better, you could make the internal field private and use an constructor method so it will only produce one or the other.
[00:03:48] *** Joins: mrshankly (mrshankly@3EE34383.CE0EEBAE.806C54C8.IP)
[00:03:53] <aatch> (or even any type that implements that trait)
[00:04:20] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[00:04:34] <aatch> impl<T:Geometry> EventPointSchedule<T> { fn new() -> EventPointSchedule<T> { ... } }
[00:06:10] <pcwalton> strcat: the old arena is quite a bit faster than linux malloc
[00:06:15] *** Quits: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Connection reset by peer)
[00:06:18] <pcwalton> I didn't reproduce your findings
[00:06:29] <pcwalton> however, the new arena is much faster than both
[00:09:54] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[00:10:40] <vmx> aatch: thanks. i'm currently trying to implement what you said. not there yet, but soon
[00:10:53] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[00:12:09] <pcwalton> strcat: it's down to 4 ns per allocation for me and I checked the assembler and it's basically close to optimal
[00:12:19] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[00:12:38] <dbaupp> pcwalton: what size allocations?
[00:12:48] <pcwalton> I tested a couple, 12 bytes and 8 bytes
[00:14:00] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[00:15:21] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[00:16:01] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Ping timeout)
[00:16:32] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[00:17:30] *** Quits: sigma1 (sigma@C91C7F36.70518F41.9D18269F.IP) (Ping timeout)
[00:17:44] *** Quits: q66__ (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Client exited)
[00:18:13] *** Quits: alan_andrade (alan_andra@94147F3C.3C8440C4.B7838CA6.IP) (Input/output error)
[00:18:33] <vmx> aatch: omg! this seems to work! i hope it works also in my non mininmal example https://www.friendpaste.com/zQSp1U4kiHmyGMYorauvz
[00:18:38] <vmx> thank you so much
[00:19:12] <pcwalton> dbaupp: 4 ns seems pretty good given that function calls are 2 ns
[00:19:16] <pcwalton> so that's a lot of allocations
[00:19:28] <pcwalton> 250,000,000 allocations/sec
[00:20:19] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[00:22:14] <aatch> vmx, no problem, remember that the call to new() will need to be able to have it's type inferred to work though.
[00:22:30] <aatch> (Like HashMap<K,V>, it can be done from usage)
[00:22:41] <jmgrosen> anyone know why I'd be getting this link error while building rustc? https://gist.github.com/jmgrosen/74be02fb8fce0d0079f3
[00:23:07] <dbaupp> pcwalton: that's rather fast, yes. (I assume that it occasionally has to do a more expensive allocation to get more backing storage?)
[00:23:48] <pcwalton> yup
[00:23:51] <vmx> aatch: this whole thing now feels quite rusty, my previous attempts always felt wrong. i should really blog about that, as blogging is something i could give back to this great community :)
[00:23:55] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Client exited)
[00:24:00] <pcwalton> dbaupp: that's with millions of allocations so it includes the expensive ones.
[00:24:04] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[00:24:05] <pcwalton> it is *not* just a benchmark of the fast path
[00:24:08] <pcwalton> btw it's 13x faster than malloc
[00:24:09] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[00:24:11] *** Joins: z0w0 (zack@moz-3A8F8F5E.lns8.woo.bigpond.net.au)
[00:24:47] *** Quits: kvanb (kvanb@moz-CDB93B52.lnse3.win.bigpond.net.au) (Quit: kvanb)
[00:24:56] <dbaupp> awesome
[00:25:08] <dbaupp> what's the catch?
[00:25:11] <aatch> Presumably the slabs are page-sized ish
[00:25:15] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[00:25:20] <aatch> dbaupp, can't free individual allocations
[00:26:15] *** Quits: luisbg (luisbg@moz-C54443AD.baconseed.org) (Quit: Coyote finally caught me)
[00:26:19] <jadbaires> total beginner's question - tutorial 9.3 References :   regarding an algorithm to compare 2 linked lists "Ownership isn't required to compare the lists, so the function should take references (&T) instead."
[00:26:46] <jadbaires> but at this point I'm still unsure what ownership is required for
[00:27:33] <jadbaires> I (think) I understand what it is meant for, controling the lifespan of a heap allocated object 
[00:27:53] *** jorendorff is now known as jorendorff_away
[00:27:57] <dbaupp> :( extra::treemap is faster than std::trie 
[00:28:10] <aatch> jadbaires, not quite
[00:28:26] <aatch> ownership is the idea that data has an owner.
[00:28:45] <aatch> That ownership can be unique (one owner) or shared (many owners).
[00:29:16] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[00:29:19] <jadbaires> I see, no a simple tuple (1,2) would also have owner(s)
[00:29:25] <jadbaires> s/no/so
[00:29:43] <aatch> It does affect the lifespan of a heap-allocated object, but that's more just a consequence, as it also affects the "lifespan" of stack-allocated objects.
[00:29:44] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[00:29:54] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: Lost terminal)
[00:30:11] <jadbaires> right I see
[00:30:26] <aatch> jadbaires, correct, you don't normally notice, because that is implicitly copyably, so `let a = (1,2); let b = a` copies a into b.
[00:30:37] <jadbaires> got it
[00:30:53] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[00:30:53] *** ChanServ sets mode: +ao brson brson
[00:31:01] <aatch> But with: `let a = (~"foo", ~"bar"); let b = a;` a is 'moved' into b, which makes 'a' unusable.
[00:31:20] <aatch> Because the data has unique ownership.
[00:31:47] <jadbaires> by the way, what do you call ~int  and ~1 ?
[00:32:04] *** Quits: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net) (Quit: Leaving.)
[00:32:06] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[00:32:15] <aatch> jadbaires, owned pointers to an int.
[00:32:16] <kimundi> "unnecessary allocations" :P
[00:32:18] *** Joins: negativezero (negativeze@moz-F0A0BC99.cs.cornell.edu)
[00:32:35] <jadbaires> kimundi: :/
[00:32:36] *** Quits: killerswan (kevin.cant@moz-1F697F7B.uvs.sntcca.sbcglobal.net) (Quit: Leaving)
[00:32:49] <jadbaires> got it
[00:32:51] * kimundi is just joking
[00:32:56] <jadbaires> I know I know
[00:32:57] *** Quits: eholk (eholk@moz-799DA9F.lsanca.fios.verizon.net) (Quit: eholk)
[00:33:09] <aatch> jadbaires, references allow code to access data without requiring ownership of it.
[00:33:34] *** Joins: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net)
[00:33:37] <aatch> The compiler will statically check that the reference doesn't outlive the original data.
[00:33:50] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[00:34:27] <jadbaires> aatch: if the data is mutable could you use such references to mutate it?
[00:34:47] <aatch> jadbaires, yes, you use `&mut` instead of `&`
[00:34:53] *** Joins: pyon (user@BCC41BDF.6C782DF8.1C8C8CE9.IP)
[00:35:03] <ecl3ctic> Question: if I want to do bare-metal memory manipulation, using malloc and casting ints to pointers, how can I go about that in Rust?
[00:35:10] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:35:17] <jadbaires> aatch: right
[00:35:34] <aatch> The difference between them is that you can only have one active '&mut' at a time, whereas you can have multiple active '&' at the same time.
[00:35:37] <steveklabnik> ecl3ctic: unsafe {} ;)
[00:36:03] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[00:36:03] *** ChanServ sets mode: +ao brson brson
[00:36:09] <kimundi> ecl3ctic: call malloc, use raw pointers and cast integers :P - You just need to add a few unsafe { ... } blocks to allow it
[00:36:13] <jadbaires> aatch: very interesting
[00:37:02] <kimundi> malloc is in std::libc I think, and you can just cast *T to uint
[00:37:07] <kimundi> and back
[00:37:09] <jadbaires> aatch: how about at call site, can you tell you're passing your owned pointer to a function that may mutate your date?
[00:37:10] <jadbaires> data
[00:37:17] <ecl3ctic> kimundi: using the 'as' operator?
[00:37:21] <kimundi> yes
[00:37:36] <aatch> jadbaires, if you pass an owned pointer to a function, you are transferring ownership to that function.
[00:37:42] <aatch> It's no longer "your" data.
[00:38:25] <ecl3ctic> kimundi, steveklabnik: alrighty, thanks
[00:39:00] <jadbaires> aatch: confused now... before you said " references allow code to access data without requiring ownership of it."
[00:39:07] *** Joins: dew1 (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[00:39:18] <jadbaires> what am I missing here
[00:39:35] <kimundi> jadbaires: Nothing, its just a misunderstanding
[00:40:00] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[00:40:08] <jadbaires> kimundi: what am I misunderstanding here? :P
[00:40:48] <aatch> ok, so if you have `let a = ~1` then a is an owned pointer, so if I do this: `foo(a)`, and the definition of foo is: `fn foo(i: ~int)` then foo takes ownership of the data.
[00:41:10] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[00:41:38] <jadbaires> yes right, sorry I meant using references
[00:41:42] <aatch> However, if foo is defined as: `fn foo(i: &int)` then the variable is *coerced* to a reference and passed.
[00:41:50] <jadbaires> right
[00:42:01] <kimundi> jadbaires: If you want your owned data of type T be mutated by a function without giving away ownership, the function should take &mut T. Calling such a function then usually involves explicitly borrowing it: let mut foo = ...; mutate(&mut foo);
[00:42:41] <jadbaires> kimundi: ohhh so you also use &mut at call site
[00:43:13] <kimundi> jadbaires: Only if you need it to explicitly construct a mutable reference
[00:43:30] <kimundi> jadbaires: for methods that are defined with &mut self, it happens implicit
[00:43:46] <kimundi> jadbaires: And as dbaupp said, for ~T values it also implicitly coerces
[00:43:47] <jadbaires> makes sense
[00:43:57] * dbaupp said what?
[00:44:04] <aatch> kimundi, um...
[00:44:14] <jadbaires> dbaupp: aatch did
[00:44:15] <kimundi> In general the devs want to at least move away from the mutable ~T -> &mut T coercion
[00:44:18] <brson> here's the new documentation index: http://static.rust-lang.org/doc/master/index.html
[00:44:23] *** Joins: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca)
[00:44:25] <kimundi> err, aatch sorry :P
[00:44:33] <dbaupp> brson: looks good! auto generated?
[00:44:35] <brson> i think I'll remove the community, specialized docs, and presentations sections back to the wiki
[00:44:52] <brson> dbaupp: not auto-generated. just another .md file
[00:45:00] <jadbaires> kimundi: right I can see how making it more explicit can help
[00:45:20] <brson> and also remove the links to the old docs - just link to the docs for the current version
[00:45:35] <jadbaires> to make sure I'm following &mut means I have a reference to data and can use it to mutate said data, right?
[00:46:02] <kimundi> brson: Hm... wouldn'T it make sense to put the master stuff above the 0.9 stuff, instead of below? Most of the time, the point releases will be outdated
[00:46:02] <aatch> jadbaires, correct
[00:46:26] <dbaupp> kimundi: submit a PR! ;)
[00:46:31] <kimundi> jadbaires: In fact, you can _only_ use it to mutate the data, as long as that &mut exists
[00:46:35] *** Joins: synackse (jordyd@7DAC4ACE.77F880E0.D9401097.IP)
[00:46:51] <jadbaires> right
[00:46:56] <brson> kimundi: i'm going to remove the old version docs - just have current version
[00:47:18] <kimundi> brson: I mean the current version: master and 0.9
[00:47:19] <brson> since the doc index is part of the repo i don't think it makes sense to link to docs from another repo
[00:47:30] <brson> kimundi: i mean the same thing
[00:47:38] <brson> it will just say 0.9
[00:47:50] <brson> the master index will say 0.10-pre
[00:47:58] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[00:48:01] <kimundi> ah, okay
[00:48:10] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[00:48:18] *** Quits: geoffhill (geoffhill@moz-738DC0DB.org) (Ping timeout)
[00:48:20] <jadbaires> I'm not entirely sure I get what the lhs of    mutable ~T -> &mut T     is though
[00:48:55] <kimundi> jadbaires: let mut x = ~foo() // a ~T in a mutable location
[00:48:58] <aatch> jadbaires, mutability is based on the mutability of the "slot"
[00:48:59] <jadbaires> I'd read   mut x : ~int    as a pointer that can change 
[00:49:09] *** Quits: synackse (jordyd@7DAC4ACE.77F880E0.D9401097.IP) (Quit: synackse)
[00:49:14] *** Quits: dew1 (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[00:49:25] <aatch> And is inherited
[00:49:33] <ecl3ctic> out of curiosity: are trait impls implemented as virtual functions and regular impls implemented as non-virtual functions?
[00:49:51] <kimundi> ecl3ctic: All are static dispatch
[00:49:56] <sfackler> ecl3ctic: everything is non-virtual except for trait objects (e.g. ~ToStr)
[00:49:56] <aatch> ecl3ctic, virtual calls only happen on trait objects
[00:50:02] <kimundi> ecl3ctic: Only trait _objects_ are dynamic dispatch
[00:50:02] <jadbaires> aatch: kimundi: so it means the pointed data can be changed?
[00:50:14] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[00:50:23] <kimundi> jadbaires: as well as the pointer itself
[00:50:28] <kimundi> for a ~
[00:50:34] <jadbaires> right
[00:50:42] <jadbaires> ok that's how I was reading it
[00:50:48] <ecl3ctic> kimundi, sfackler, aatch: thanks :)
[00:51:38] <jadbaires> is there a way to say, you're a owned pointer that can change to what you point to, but not change any of the data?
[00:52:08] <kimundi> jadbaires: No, but it's also not really needed
[00:52:31] *** Joins: trecer (trecer@C14436A6.F2C0876.7A0AECD4.IP)
[00:52:37] <jadbaires> kimundi: ok, was just wondering 
[00:55:06] <brson> should the primary documentation index have links to a) the wiki, b) reddit, c) irc, d) other external resources?
[00:55:14] *** Quits: vmx (vmx@moz-B19E34C2.pools.arcor-ip.net) (Quit: Leaving)
[00:55:19] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[00:55:54] <Ralith> kimundi: why do you say it's not needed?
[00:56:27] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[00:56:51] <kimundi> Ralith: Hm, actually... "change to what you point to" and "change any of the data" is exactly the same operation for a ~T :P - so its not needed because the distinction does not exist
[00:57:07] <dbaupp> It can be possible
[00:57:32] <dbaupp> would could have, say, `struct Immutable<T> { priv x: T }` that only provides a `-> &T` borrow operation
[00:58:07] *** Quits: espadrine (Thunderbir@moz-6E1AE057.w92-128.abo.wanadoo.fr) (Ping timeout)
[00:58:08] <kimundi> brson: irc yes, reddit sounds good tot, wiki I thought we're trying to move away from?
[00:58:10] <dbaupp> then `mut x: Immutable<~T>` could change which ~T it stored, but not change any of the data
[00:58:43] <brson> kimundi: there's still a lot of info on the wiki though
[00:58:56] <kimundi> dbaupp: Well, sure, but thats not a bare ~T any more :P
[00:59:48] <dbaupp> kimundi: in memory it is :P
[01:00:17] <kimundi> dbaupp: :P
[01:02:00] *** Joins: caryhaynie (Mibbit@7BAAD356.9A4BE3FD.5A42B74E.IP)
[01:03:30] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[01:04:31] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[01:05:03] *** Parts: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) ()
[01:05:47] *** Joins: zmthy (zmthy@moz-EAA7EAA8.dsl.dyn.ihug.co.nz)
[01:05:54] *** Quits: pyon (user@BCC41BDF.6C782DF8.1C8C8CE9.IP) (Client exited)
[01:05:59] *** Joins: pyon (user@BCC41BDF.6C782DF8.1C8C8CE9.IP)
[01:06:58] *** Quits: heftig (heftig@moz-C7FB5085.dip0.t-ipconnect.de) (Ping timeout)
[01:07:49] <caryhaynie> hi #rust, I noticed that when I grabbed the latest master this morning, std::vec::raw::{to_ptr, set_len} seemed to have been removed, which are used extensively by the rust-opengles package. Are there any equivalents for those functions that I can use to get rust-opengles building against master again?
[01:08:25] *** Joins: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca)
[01:08:26] <dbaupp> caryhaynie: they were converted to methods
[01:08:47] <dbaupp> caryhaynie: to_ptr(v) -> v.as_ptr(), and set_len(v, n) -> v.set_len(n)
[01:08:55] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[01:09:04] <aatch> does unsafe work on methods now
[01:09:09] <dbaupp> yes
[01:09:14] <dbaupp> that's worked for ages now :P
[01:10:12] <sfackler> oh, *that's* why they weren't always methods?
[01:10:31] <caryhaynie> dbaupp: ah, awesome. Thanks!
[01:10:50] *** Joins: heftig (heftig@moz-C2A68214.dip0.t-ipconnect.de)
[01:10:50] <aatch> I don't use many unsafe methods, and when I do I use them in unsafe blocks anyway, so I never noticed.
[01:11:18] *** Joins: juszczakn (nick@moz-531BAF0B.dyn.centurytel.net)
[01:11:53] *** Quits: mpiechotka (mpiechotka@moz-399AAD7C.dynamic.mnet-online.de) (Ping timeout)
[01:12:11] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[01:13:18] *** kimundi is now known as zz_kimundi
[01:14:19] *** Joins: bvssvni (Mibbit@moz-CBD76C21.bb.online.no)
[01:14:54] *** Quits: drjeats (drjeats@moz-3D31C6D2.nyc.res.rr.com) (Quit: Computer has gone to sleep.)
[01:14:55] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Client exited)
[01:15:15] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[01:16:37] *** Quits: trecer (trecer@C14436A6.F2C0876.7A0AECD4.IP) (Ping timeout)
[01:16:53] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[01:16:58] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Ping timeout)
[01:18:11] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[01:18:57] *** Quits: ponce (ponce@moz-D65F4148.fbx.proxad.net) (Quit: )
[01:19:00] *** Quits: pyon (user@BCC41BDF.6C782DF8.1C8C8CE9.IP) (Client exited)
[01:19:05] *** Joins: pyon (user@BCC41BDF.6C782DF8.1C8C8CE9.IP)
[01:19:25] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[01:19:42] <brson> anybody want to write up something about the changes to closures here? https://github.com/mozilla/rust/wiki/Doc-detailed-release-notes
[01:20:24] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[01:20:32] <cmr> brson: on it
[01:20:43] <brson> acrichto: could you add something about runtime and I/O? how to switch between native/green, how to duplicate start_on_main_thread functionality, maybe how to do some common I/O tasks?
[01:21:13] <brson> cmr: thanks!
[01:21:24] <brson> anything else for 0.9 that should be explained in depth?
[01:21:26] <acrichto> brson: a tutorial or the release notes? I totally intended to do the release notes before now
[01:21:38] <acrichto> erm, tutorial => guide
[01:22:22] <brson> acrichto: release notes
[01:22:28] <steveklabnik> I'm giving a talk about Rust at Codemash later in the week ;) ;) ;)
[01:22:32] <acrichto> brson: definitely, I'll do that before the day ends
[01:22:37] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[01:22:43] <brson> An I/O tutorial would be *awesome* but too ambitious for 0.9
[01:23:04] <brson> steveklabnik: what day? maybe we can have 0.9 out beforehand
[01:23:17] <steveklabnik> they have the schedule in this dumb iphone app, i can't see
[01:23:22] <steveklabnik> it's either thursday or friday
[01:23:38] <cmr> That reminds me: I'm giving a talk for the bay area meetup this month, is there anything anyone is particularly interested in?
[01:24:07] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:24:10] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[01:24:20] <bstrie> cmr: how to make really good scrambled eggs
[01:24:25] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[01:24:26] *** Quits: juszczakn (nick@moz-531BAF0B.dyn.centurytel.net) (Ping timeout)
[01:24:33] <steveklabnik> woo
[01:24:36] <steveklabnik> when is the meetup this month
[01:24:38] <cmr> bstrie: my scrambled eggs always turn out garbage :(
[01:24:50] <sfackler> aww, I'm going to be out of town this time :(
[01:24:53] <sfackler> steveklabnik: 28th
[01:24:54] <cmr> steveklabnik: 28th
[01:24:57] <bstrie> cmr: try http://www.youtube.com/watch?v=PUP7U5vTMM0
[01:25:01] <steveklabnik> excellent
[01:25:05] <steveklabnik> my birthday is the 25th
[01:25:18] <bstrie> cmr: basically the secret is "more butter than is healthy"
[01:25:25] <bstrie> mind, this is also the secret to all cooking
[01:25:38] <steveklabnik> yes
[01:25:45] <steveklabnik> like, almost a half stick of butter
[01:25:46] <diverse> steveklabnik: happy birthday
[01:25:53] <steveklabnik> thanks!
[01:25:53] <bstrie> diverse: NOT YET
[01:25:59] <steveklabnik> lol
[01:26:15] <dbaupp> cmr: is cmoss in an exhibitable state?
[01:26:20] <cmr> dbaupp: hell no
[01:26:25] <diverse> bstrie: come on, can't I give somebody an early happy birthday?
[01:26:30] <dbaupp> cmr: better get working!
[01:26:31] <bstrie> diverse: no.
[01:26:40] <cmr> bstrie: I can confirm that that is the secret to good mac 'n cheese
[01:26:44] <cmr> dbaupp: yup! :P
[01:27:03] <bstrie> diverse: you're clearly just looking for an excuse to NOT remember to congratulate him when it actually IS his birthday
[01:27:06] <bstrie> you're a monster
[01:27:16] <bstrie> you
[01:27:17] <bstrie> make
[01:27:18] <bstrie> me
[01:27:19] <bstrie> SICK
[01:27:34] <bstrie> j/k happy birthday steve
[01:27:41] <cmr> bstrie: hah he burned his toast
[01:27:45] <cmr> he is clearly a human
[01:27:58] <FreeFull> My birthday is on the 24th
[01:28:01] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[01:28:18] <bstrie> FreeFull: whoa this isn't a birthday contest
[01:28:35] <bvssvni> I had birthday last year
[01:28:40] <bstrie> FreeFull: I've already given out my hapbir for today, you'll have to wrestle it away from steve
[01:28:43] <FreeFull> I had three birthdays last year
[01:28:50] * dbaupp thinks he'll have at least one this year
[01:28:52] <bstrie> I SAID THIS ISN'T A CONTEST
[01:28:54] <cmr> I had *seven*
[01:29:02] <dbaupp> I'll have to consult my diary though
[01:29:03] <bstrie> listen, *everyone* can have a birthday this year
[01:29:07] <bstrie> there's plenty of days to go around
[01:29:12] <bstrie> several dozen at least
[01:29:30] <FreeFull> 365
[01:29:31] <diverse> but only one birthday at most?
[01:30:13] <bvssvni> except for those born at 25th Feb
[01:30:18] <bvssvni> *29th
[01:30:21] <diverse> darn
[01:30:23] * dbaupp blah blah Rust blah blah
[01:30:30] <bstrie> dbaupp: keep it on topic please
[01:30:52] <bvssvni> is 0.9 coming this week?
[01:30:55] <dbaupp> bstrie: sorry
[01:30:56] <bstrie> I think so!
[01:31:00] <cmr> bvssvni: probably!
[01:31:08] <bstrie> we're excited!
[01:31:10] <bstrie> it's exciting.
[01:31:16] <bvssvni> cmr: looking forward to it!
[01:31:20] <steveklabnik> i'm excited
[01:31:25] <steveklabnik> i already updated rust for rubyists
[01:31:26] <bstrie> who said that they were in pittsburgh
[01:31:29] <diverse> happy 0.9 birthday Rust!
[01:31:30] <bstrie> let's have a release party
[01:31:31] * diverse being a monster again
[01:31:32] <steveklabnik> i was
[01:31:35] <bstrie> by which I mean let's go to a bar
[01:31:41] <bstrie> or something
[01:32:00] <steveklabnik> did 0.9 take longer than 0.8 or am i just making that up?
[01:32:08] <bstrie> nah, 0.8 was october
[01:32:10] <diverse> steveklabnik: slightly longer
[01:32:29] <cmr> by about a week or so
[01:32:33] <cmr> hardly noticable :p
[01:32:35] <steveklabnik> so strange
[01:33:00] *** Quits: mleise (marco@moz-850E56A9.pools.arcor-ip.net) (Quit: Leaving.)
[01:33:12] <bvssvni> steveklabnik: if you are giving a talk, please say something about library development (good practices)
[01:33:15] <muricula> Are there do while loops in rust? If so, what do they look like?
[01:33:19] *** Quits: ramitos (ramitos@moz-60679625.socal.res.rr.com) (Ping timeout)
[01:33:22] <diverse> muricula: nope
[01:33:30] <dbaupp> there are, actually
[01:33:33] <dbaupp> kinda
[01:33:34] <steveklabnik> bvssvni: what do you think those practices are?
[01:33:34] <dmz> how do I fulfill Freeze for RefCell?
[01:33:48] <cmr> dmz: you don't, RefCell is never Freeze.
[01:33:51] <muricula> Okay, well what does 'kinda' mean?
[01:34:08] <dmz> cmr: error: instantiating a type parameter with an incompatible type `std::cell::RefCell<space::Node>`, which does not fulfill `Freeze`
[01:34:13] <bvssvni> steveklabnik: inline public static functions for mapping traits that only contain one method
[01:34:21] <cmr> dmz: oh Node needs to be Freeze
[01:34:29] <dbaupp> https://gist.github.com/huonw/daaccdd54e03d02fd296
[01:34:31] <dbaupp> muricula: ^
[01:34:40] <steveklabnik> heheheh
[01:34:48] <dmz> cmr: so that's what I asked, how do I make it Freeze?
[01:34:54] <bvssvni> steveklabnik: https://github.com/bvssvni/rust-empty/wiki/How-to-use-generics-and-traits-in-Rust
[01:34:56] <dbaupp> dmz: you can't
[01:34:59] <cmr> muricula: that `while` should be `loop`?
[01:35:01] <cmr> dmz: http://static.rust-lang.org/doc/master/rust.html#type-kinds
[01:35:10] <cmr> dbaupp: he wants to make Node Freeze, not RefCell
[01:35:17] <dbaupp> oh
[01:35:44] <diverse> dbaupp: what does the `{}` do at the end of the block?
[01:35:56] <cmr> dbaupp: yeah what even is that code? that doesn't look like rust to me :p
[01:36:00] <dbaupp> diverse: it's actually `while condition {}` where condition is `{ ... }`
[01:36:09] <muricula> This language seems just like C at first, and then it just gets bizarre.
[01:36:23] <cmr> Ohhhhh right
[01:36:23] *** Joins: pnathan (Adium@moz-A8921E45.tukw.qwest.net)
[01:36:24] <steveklabnik> bvssvni: thanks
[01:36:29] <dmz> I've spent a day porting my stuff to those Rc and RefCells, and now the last errors I'm getting are about Freeze, which makes me sad, since errors like that I'd like to see *first*
[01:36:40] <diverse> muricula: you are in for quite a ride, enjoy the experience.
[01:36:49] *** Joins: ramitos (ramitos@moz-60679625.socal.res.rr.com)
[01:36:50] <dbaupp> muricula: (my example there is a hack: abusing the fact that {} blocks are expressions.)
[01:37:01] <muricula> diverse: thanks, I'm kinda looking forwards to it.
[01:37:04] <sfackler> dbaupp: that's pretty evil :)
[01:37:23] * dmz is sad
[01:37:40] <dbaupp> sfackler: s/evil/amazing/ :P
[01:37:50] <cmr> Oh the question was *do*-while
[01:38:00] <cmr> I think I'm going to stop IRCing :P
[01:38:18] <sfackler> dmz: you may need to use Rc::from_mut instead of Rc::new
[01:38:26] *** Quits: GeorgeH (George@moz-FB5F2302.hsd1.nj.comcast.net) (Ping timeout)
[01:38:49] <cmr> muricula: it's not really like C at all, so that's a good misconception to clear up real quick-like :)
[01:39:00] <muricula> cmr: I think I just noticed
[01:39:20] <dmz> sdackler: and that works! thank you
[01:39:26] * dmz is happy again
[01:39:33] <muricula> It doesn't help that the tutorial sucks, but seeing as you're not even at 1.0 yet that's kind of excusable, but should still be fixed.
[01:39:43] <cmr> it's being worked on
[01:40:19] <ecl3ctic> there's a fair bit of documentation when you go scrounging, and find out which parts to ignore because they've become outdated and untrue :P
[01:40:45] <cmr> I feel like we're doing pretty well on the outdated aspect, at least for the official docs.
[01:40:51] <cmr> Minus certain aspects of the manual.
[01:41:01] <dbaupp> cmr: as in, we aren't outdated?
[01:41:14] <dmz> instantiating a type parameter with an incompatible type `gr_low::frame::Buffer`, which does not fulfill `Freeze`
[01:41:16] <cmr> dbaupp: the docs aren't, compared to master
[01:41:26] <dmz> hmm from_mut doesn't help in all cases :(
[01:42:06] <ecl3ctic> cmr: I' still see @ and @mut everywhere
[01:42:18] <ecl3ctic> cmr: search for '@' in the manual
[01:42:23] <ecl3ctic> or tutorial
[01:42:53] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[01:43:13] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[01:43:35] *** Joins: GeorgeH (George@moz-FB5F2302.hsd1.nj.comcast.net)
[01:43:50] <kmc> muricula: it's a lot more like C++, in terms of some of the idioms for managing memory  (which we have mostly turned into things the compiler can verify)
[01:44:14] <steveklabnik> yeah, the official docs are sparce but at least accurate
[01:44:40] <kmc> but it's vastly cleaned up from C++ and includes a lot of baseline "what any good programming language in 2014 should have" features that C++ lacks
[01:44:41] <dmz> sfackler: ok, switching to Gc, since it doesn't have Freeze requirement
[01:44:45] <dbaupp> steveklabnik: semi-accurate.
[01:44:53] <comex> /bin/sh: line 1: 17340 Segmentation fault: 11  x86_64-apple-darwin/stage0/bin/rustc --cfg stage0 -O --cfg rtopt --cfg debug -Z no-debug-borrows -Z prefer-dynamic --target=x86_64-apple-darwin -W warnings --out-dir x86_64-apple-darwin/stage0/lib/rustlib/x86_64-apple-darwin/lib /usr/src/rust/src/libgreen/lib.rs
[01:44:56] <diverse> muricula: to help you get a lift in understanding Rust a little better, try understanding some Functional programming concepts, like with pattern matching and Traits, etc. It will take some head banging to sink in the concepts and once you do, you will see the awesomeness that is Rust.
[01:44:56] <comex> eek.
[01:45:14] <cmr> comex: don't build with -jN
[01:45:15] <sfackler> dmz: Rc has constructors for Send and Freeze types and an unsafe constructor for anything
[01:45:35] <comex> cmr: really, rust's makefile is broken in parallel?
[01:45:41] <cmr> comex: https://github.com/mozilla/rust/pull/11355 fixes it
[01:45:51] <cmr> comex: it sometimes breaks, unfortunately.
[01:46:04] <kmc> diverse: I don't really see pattern matching and traits as functional programming features... it just happens that FP-oriented languages had them first, as a result of being generally more advanced ;)
[01:46:08] <dbaupp> muricula, diverse: I'd say the main thing to understand is ownership; "hard" things like moving and lifetimes follow naturally from ownership.
[01:46:14] <comex> thanks
[01:46:55] <kmc> mutability inheriting through ownership is another big one
[01:46:59] <steveklabnik> Dbaupp I haven't seen anything overtly terrible
[01:47:51] <bvssvni> and life time mapping to return values (that got me a wow moment)
[01:49:16] *** Quits: jesse99 (jesse99@moz-8B1E0C5D.hsd1.wa.comcast.net) (Ping timeout)
[01:49:45] <comex> oh, and a question: suppose a struct contains another struct which is generic on lifetime.  is there a way to make it the lifetime of the outer struct?
[01:49:50] <diverse> dbaupp: lifetimes was also a challenging but interesting concept
[01:49:59] <dbaupp> steveklabnik: there's a pile of grammar listings that are completely out dated; never got updated. (But they might not count as overt or terrible.)
[01:50:30] <steveklabnik> Yeah I mean the reference is whatever
[01:50:34] <dbaupp> diverse: I found that it followed quite simply after I understood ownership in Rust :)
[01:51:49] *** Quits: caryhaynie (Mibbit@7BAAD356.9A4BE3FD.5A42B74E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:51:58] <dmz> well that sucks: Gc clone requires T to be Clone as well
[01:52:05] <dmz> is there any way around it?
[01:52:09] <dbaupp> huh?
[01:52:13] <dbaupp> that seems entirely incorrect
[01:52:13] <bvssvni> is there a way to check for inheritance on runtime?
[01:52:26] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[01:52:34] <dbaupp> dmz: oh
[01:52:34] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[01:52:53] <dmz> impl<T: Clone> Clone for Gc<T>
[01:52:55] <dbaupp> dmz: it shouldn't use #[deriving(Clone)]. Feel free to submit a PR removing that an implementing it my hand
[01:53:12] <dbaupp> dmz: https://github.com/mozilla/rust/blob/master/src/libstd/gc.rs#L24
[01:53:20] <diverse> dbaupp: I thought you were talking about named lifetime, my misunderstanding :P
[01:53:45] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[01:53:47] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[01:53:58] <dmz> dbaupp: wouldn't it be better to fix deriving(Clone) to not require T:Clone for @T?
[01:54:24] <cmr> dmz: since @T is going away, no.
[01:54:56] <cmr> though it's still a concern for struct Foo<T> { x: Gc<T> } I think
[01:55:01] <diverse> What's happening with `box` recently?
[01:55:06] <cmr> it's really hard for the macro to do that though.
[01:56:01] <dbaupp> dmz: not possible
[01:56:25] <dbaupp> dmz: (well, possible in a limited context, but it would make #[deriving] far far more complicated)
[01:56:44] <diverse> is this on pause? https://github.com/mozilla/rust/pull/11055
[01:56:46] <cmr> (well I think it'd be possible for @T since the @ is in the AST, but beyond that no)
[01:57:09] <dbaupp> diverse: actually I was talking about named lifetimes: 'a just represents the lifetime of the owner of a value and allows the compiler to stop you using it after the owner has disappeared.
[01:57:38] *** Joins: jesse99 (jesse99@moz-8B1E0C5D.hsd1.wa.comcast.net)
[01:58:37] *** Joins: cheese_cast (raspinudo@moz-FB14AB08.hsd1.ca.comcast.net)
[01:59:34] <bvssvni> does Rust have reflection? can it check for inheritance like 'typeof' in C#?
[02:00:03] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[02:00:28] <cmr> bvssvni: yes we have reflection, but not like that.
[02:00:34] <diverse> dbaupp: so once you transfer ownership, the named lifetime dies?
[02:00:38] <cmr> I don't think there's any inheritance information available at runtime.
[02:00:44] <cmr> However, there is the Any type.
[02:00:52] <aatch> We have little in the way of type-based information at runtime.
[02:00:54] <dbaupp> diverse: yes
[02:01:10] <aatch> Ideally, we'd not actually have reflection for "release" build.
[02:01:13] <aatch> builds*
[02:01:20] <aatch> only for debug builds.
[02:01:30] <ecl3ctic> which is a good thing
[02:01:31] <dbaupp> diverse: (at least, that's a reasonable approximation: you can have lifetimes (i.e. borrows) that stop you being able to transfer ownership.)
[02:04:35] <aatch> The best way to think of lifetimes and ownership is that the compiler guarentees that the data being referenced lasts atleast as long as the reference.
[02:04:57] <aatch> The lifetimes don't 'die' they just end where they always would.
[02:05:23] <aatch> But if it isn't valid, then that's a compiler error.
[02:05:54] <aatch> lifetimes, like types, can't be manipulated via annotation.
[02:06:06] *** Quits: z0w0 (zack@moz-3A8F8F5E.lns8.woo.bigpond.net.au) (Client exited)
[02:06:10] *** Quits: ziad (ziad@B20586FB.BDB3D91.6E370BFC.IP) (Quit: ziad)
[02:07:36] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[02:09:08] <dmz> cmr: thanks for the info
[02:09:10] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[02:09:31] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[02:09:32] <cmr> dmz: sorry it's not good news :(
[02:09:44] <dmz> indeed, I have no workaround so far
[02:09:52] <ecl3ctic> is there a way to prevent initializing a struct without going through a constructor method?
[02:09:58] <cmr> ecl3ctic: add a private field.
[02:10:10] <ecl3ctic> cmr: sounds good to me
[02:10:14] <cmr> even `priv noinit: ()` (a zero-sized field) will do.
[02:10:37] *** Quits: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net) (Quit: Leaving.)
[02:10:40] <dbaupp> `priv noone_but_me_can_make_this_struct: ()`
[02:11:12] <ecl3ctic> cmr, dbaupp: that seems like a nice way to do it
[02:11:18] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[02:12:29] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[02:12:29] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:12:32] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[02:13:56] <ecl3ctic> cmr, dbaupp: oh, but priv is only module-private
[02:14:07] <ecl3ctic> can I be any more strict?
[02:14:25] <dbaupp> what privacy do you need?
[02:14:56] <ecl3ctic> I just want a way to force any struct initialization anywhere to be only through a constructor method
[02:15:04] <cmr> ecl3ctic: well it obeys the standard privacy rules; the current module and all child modules can access privates.
[02:15:06] <ecl3ctic> no {field: val}
[02:15:13] *** Quits: pnathan (Adium@moz-A8921E45.tukw.qwest.net) (Quit: Leaving.)
[02:15:43] <bvssvni> maybe a workaround is to put the struct and constructor in a priv mod and reexport it one level up
[02:15:58] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[02:16:22] <ecl3ctic> it's not a disaster if other code in the same module can circumvent it, I would've just liked it to be more restrictive
[02:16:52] <aatch> ecl3ctic, then don't write code that circumvents it?
[02:17:18] *** Quits: anasyrma (x@moz-DE175E38.caltech.edu) (Ping timeout)
[02:17:21] <ecl3ctic> aatch: I won't :P
[02:17:22] <cmr> aatch: that's not a very good answer. "well don't write memory unsafe programs, dummy!!!"
[02:17:46] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[02:17:55] <ecl3ctic> yeah, it's still nice to have the language force me to remember not to do a regular initialization
[02:18:21] <aatch> cmr, difference is that this is: "Don't do that thing that is harder" vs. "Don't forget to do this, unless this thing happens, but always when this 3rd is true"
[02:18:30] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[02:18:38] <aatch> I almost never to regular initialization.
[02:18:53] <aatch> So seeing it outside of a constructor method is a red flag.
[02:19:28] <cmr> aatch: I agree it's less mild, but I still don't think it's a very satisfying response.
[02:19:35] <cmr> less mild? less severe
[02:19:38] *** Joins: anasyrma (x@moz-DE175E38.caltech.edu)
[02:20:06] <aatch> I think it's different, not just less severe.
[02:20:50] *** Joins: atomical (atomical@moz-7BDC7D9E.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com)
[02:20:51] <aatch> Related, certainly. But I don't think following self-imposed rules is the same.
[02:21:03] <bvssvni> one of my favorite things about Rust is exhaustive check on matches
[02:21:12] *** Quits: atomical (atomical@moz-7BDC7D9E.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com) (Quit: atomical)
[02:21:27] *** Joins: atomical (atomical@moz-7BDC7D9E.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com)
[02:21:28] <bvssvni> I had a large project once where I had to add functionality in many places for each new feature
[02:21:52] <ecl3ctic> oh, and on a related note, is there a standard naming convention for constructors?
[02:21:54] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[02:22:00] <dbaupp> ecl3ctic: Type::new(...)
[02:22:06] <cmr> ecl3ctic: `new`, `from_foo`,
[02:22:39] <cmr> bvssvni: I think the current prevalance of _ when large enums are involved is a nasty antipattern that will hopefully be solved with intelligent tooling
[02:22:46] <cmr> "insert other variants"
[02:23:00] <cmr> I've been bitten by it in libsyntax/rustc
[02:23:13] <bvssvni> and Rust event tells the next thing in the enum I forgot :)
[02:23:27] *** Joins: synackse (jordyd@7DAC4ACE.77F880E0.D9401097.IP)
[02:23:42] <dbaupp> cmr: yeah, I try to list all variants instead of _, but, like, syntax::Expr_ is rather long :P would be nice with tool support
[02:23:53] <aatch> I think if refinements ever happen it would help with that.
[02:24:16] <cmr> that would be super cool
[02:25:45] *** Quits: cheese_cast (raspinudo@moz-FB14AB08.hsd1.ca.comcast.net) (Ping timeout)
[02:25:55] *** Joins: jvoorhis (jvoorhis@moz-E191DB04.ptld.qwest.net)
[02:26:02] <aatch> I also find that normally '_ => ...' is normally written as a failure case. So all it really does is move the error from compile time to runtime (though I agree it's not exactly "good").
[02:26:25] <cmr> it makes my edit-compile-test much less pleasant
[02:26:44] <dmz> cmr: how do I run rust tests? make test?
[02:26:49] <cmr> dmz: make check
[02:26:58] <dmz> ok, thanks
[02:27:02] <cmr> there's a list somewhere on the wiki of useful make targets
[02:27:09] <cmr> I don't know where it is, but it's ther.
[02:27:42] <dmz> too bad it takes so long to compile it...
[02:27:47] *** Quits: jvoorhis (jvoorhis@moz-E191DB04.ptld.qwest.net) (Ping timeout)
[02:27:53] <dbaupp> https://github.com/mozilla/rust/wiki/Note-testsuite has a pile
[02:28:00] *** Joins: cheese_cast (raspinudo@moz-FB14AB08.hsd1.ca.comcast.net)
[02:28:06] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[02:28:24] <dmz> awesome, thanks dbaupp
[02:30:09] <dbaupp> dmz: (if you're hacking on std or extra, NO_REBUILD=1 is the best thing since sliced bread)
[02:30:24] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[02:30:48] <dmz> as in "NO_REBUILD=1 make"?
[02:31:03] <dmz> sorry, got it, in the wiki...
[02:32:09] <dbaupp> make check-stage2-std NO_REBUILD=1
[02:32:35] <dbaupp> you can also just run `rustc --test lib.rs` on the appropriate lib.rs and run the resulting std or extra binary (if your local rustc is new enough)
[02:32:35] <dmz> yeah, found it, thanks
[02:33:46] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[02:34:21] *** jorendorff_away is now known as jorendorff
[02:34:30] *** Joins: kanru (kanru@moz-99690620.hinet-ip.hinet.net)
[02:34:59] *** Quits: jesse99 (jesse99@moz-8B1E0C5D.hsd1.wa.comcast.net) (Ping timeout)
[02:35:20] <a_m0d|home> Could someone give me some help with casting to traits?
[02:35:22] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[02:35:25] *** Joins: bobthenameless (bobthename@moz-A1BB42C4.dhcp.leds.al.charter.com)
[02:35:31] <cmr> a_m0d|home: shoot
[02:35:41] <a_m0d|home> I've made 2 attempts at it in this commit, but neither seems to work:
[02:35:42] <a_m0d|home> https://github.com/am0d/rust-web/commit/5f7ec662f10ce4a271eed4e6bf9b50fd4616e253#diff-06ef4ec00bf75a74353c3b87a372fc86R43
[02:36:04] *** Joins: dg (dg@moz-AF6F3E94.com)
[02:36:09] <a_m0d|home> I've tried using the old method (`as ...`) and without the `as` and still can't seem to satisfy the compiler
[02:36:47] <a_m0d|home> The second, alternative approach is on line 59 in that diff
[02:36:49] <cmr> a_m0d|home: rust version?
[02:37:06] <a_m0d|home> rust-master, pulled about an hour or two ago
[02:38:34] <cmr> it can't possibley work on line 59 since you can't return a borrowed trait object like that.
[02:38:39] <cmr> would be a dangling pointer.
[02:38:47] <a_m0d|home> Ok, fair enough, that's just one attempt I had at it.
[02:38:56] *** Quits: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP) (Ping timeout)
[02:39:03] *** Quits: zheng_li (zheng_li@726F0B40.A7FE7906.4B330583.IP) (Ping timeout)
[02:39:03] *** Joins: pnathan (Adium@moz-A8921E45.tukw.qwest.net)
[02:39:05] <a_m0d|home> I'm in the middle of a refactoring where I would like these methods to all return a common trait
[02:39:16] <a_m0d|home> and just trying to work out how to get that working.
[02:39:46] <a_m0d|home> I'm ok with using an owned pointer to a trait, as long as I can get it working somehow
[02:40:27] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[02:40:27] *** ChanServ sets mode: +ao dherman dherman
[02:40:59] <cmr> It doesn't work for ~TodoIndexView because it's not a &'a V, and Action is only implemented for &'a V
[02:42:15] *** Joins: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP)
[02:42:38] <comex> task 'rustc' failed at 'assertion failed: lib.rlib.is_none()', /usr/src/rust/src/librustc/metadata/loader.rs:191
[02:42:57] <comex> fine, let me try with no --enable-local-rust and -j1 the whole way through
[02:43:31] <cmr> comex: why were you using --enable-local-rust? Was it at the correct commit?
[02:44:01] <a_m0d|home> cmr: Ok, I change the trait implementation, but I still get this:
[02:44:02] <a_m0d|home> https://github.com/am0d/rust-web/commit/2959faa245561b60e99568a99938c28d00f49ec3#commitcomment-4997994
[02:44:16] <a_m0d|home> although the trait may not be implemented correctly yet
[02:44:48] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:44:56] *** Joins: ehsanul (Mibbit@moz-A9E56CFE.hfc.comcastbusiness.net)
[02:45:00] <cmr> a_m0d|home: no it needs to be implemented for V
[02:45:03] <cmr> sorry, was unclear.
[02:45:28] *** Joins: zheng_li (zheng_li@moz-D6711E9E.xenplanet.org)
[02:46:26] <comex> cmr: to save time :P
[02:46:30] *** Quits: eevee (eevee@moz-8DEBFFC9.lv.lv.cox.net) (Ping timeout)
[02:46:54] *** Quits: synackse (jordyd@7DAC4ACE.77F880E0.D9401097.IP) (Quit: synackse)
[02:49:00] *** jorendorff is now known as jorendorff_away
[02:49:29] *** Quits: negativezero (negativeze@moz-F0A0BC99.cs.cornell.edu) (Ping timeout)
[02:49:37] <bstrie> has anyone done any studies
[02:49:51] <bstrie> on the relative frequency of `let` vs `let mut` in rust codebases
[02:50:03] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[02:50:06] <cmr> I did some ad-hoc grepping the other night actually.
[02:50:16] <a_m0d|home> cmr: Okay, I did that, but now I remember why I didn't do that before - I get a "conflicting implementations" error for the `StaticFile` implementation of the trait in StaticController (which is just a stub one at the moment).
[02:50:18] <cmr> let was greater than 50% on everything I looked at
[02:50:22] <a_m0d|home> I now get this output: http://pastebin.mozilla.org/3955561
[02:50:58] <a_m0d|home> StaticController implementation: https://github.com/am0d/rust-web/blob/wip-actions/src/web/static_controller.rs#L19
[02:51:43] <cmr> a_m0d|home: no real way to work around that, unfortunately, besides remove the generic implementation :(
[02:52:31] <Yurume> bstrie: my personal project have 263 `let mut`s out of 943 `let`s.
[02:52:32] <a_m0d|home> Is that a bug, or is that by design?
[02:53:07] <Yurume> has*
[02:53:11] <bstrie> looks like the rust compiler is 5,000 mutable vs 19,000 immutable
[02:53:16] <a_m0d|home> Would I have to implement the `Action` trait for every trait I want it on, rather than just inheriting it
[02:53:26] <Yurume> seems that the ratio is relatively stable
[02:53:28] <bstrie> Yurume: so your codebase appears representative
[02:53:47] <dmz> bstrie: what command did you use?
[02:53:58] <bstrie> dmz: git grep "let " | wc -l
[02:54:28] <bstrie> could probably tighten that up some
[02:54:33] <bstrie> but hell I'm not publishing a paper
[02:55:09] *** Joins: eevee (eevee@moz-8DEBFFC9.lv.lv.cox.net)
[02:55:40] <dmz> ok, 474/2369 for claymore
[02:56:14] <dmz> seems like I got less than avg
[02:56:41] <cmr> bstrie: git grep "let " | grep -v "let mut" | wc -l
[02:56:45] <cmr> you're double-counting let mut
[02:56:46] <bstrie> `git grep " let " | wc -l` (note the leading space) reduces the immutable count by 600 and the mutable count by 100
[02:56:48] *** Joins: fabiand_ (fabiand@moz-F6940DCF.adsl.alicedsl.de)
[02:56:58] <bstrie> bstrie: note that I said 19,000, not 23,000
[02:57:00] <Yurume> I also counted with a leading space
[02:57:12] <bstrie> er, cmr ^
[02:57:31] *** Quits: fabiand (fabiand@moz-1474F0AA.adsl.alicedsl.de) (Ping timeout)
[02:57:48] <dmz> why leading space matters?
[02:58:13] <bstrie> because there are 600 places in the code where a word somewhere just happens to end in "let"
[02:58:23] <dmz> hmm
[02:58:26] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[02:58:29] <bstrie> maybe there's a library about droplets, or platelets
[02:59:24] <dmz> ok, updated numbers: 1758 lets, 467 let muts
[02:59:53] <bstrie> 4:1 appears to be a good estimate
[03:00:13] <bstrie> folks, we just wrote ourselves a research paper
[03:00:14] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[03:00:48] *** Quits: blank_name (blank_name@78B04CD2.66204B68.6D228269.IP) (Ping timeout)
[03:01:09] <dmz> Yurume said 263 *out of* 943, which makes it 263 mut versus 680 immut, which is by far not 1:4...
[03:01:21] *** Joins: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net)
[03:01:38] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[03:02:31] <Yurume> yeah, it's more like 263 vs. 680 to be exact
[03:02:35] <Yurume> i.e. 2.6x
[03:03:07] <bstrie> ah I see
[03:03:12] <bstrie> well good now we have error bars
[03:03:18] <bstrie> our graphs will look even more professional
[03:03:22] <dmz> cmon, Yurume, you can do it! reach 4:1 and bstrie gets a research paper
[03:03:27] <bstrie> btw who wants to volunteer to make some graphs
[03:03:38] <bstrie> hell if you reach 4:1 I'll get tenure
[03:03:41] <bstrie> pls do it
[03:04:09] <Yurume> dmz: lol
[03:04:25] <Yurume> well, no, a paper needs to be realistic ;)
[03:05:02] *** Quits: zmthy (zmthy@moz-EAA7EAA8.dsl.dyn.ihug.co.nz) (Ping timeout)
[03:05:25] <bvssvni> interesting, this compiles but can't be used: https://gist.github.com/bvssvni/8294063
[03:05:40] <dmz> cmr: I do agree these numbers in some sort of a graph would be useful for the community, even though they'll get outdated quickly
[03:05:56] <cmr> I just updated 2 month old code with relative ease
[03:06:12] <cmr> (only some changed imports removing rt::io and changing file::open to File::open)
[03:06:16] <dmz> cmr: you must have a very small code then
[03:06:17] *** Joins: zmthy (zmthy@moz-EAA7EAA8.dsl.dyn.ihug.co.nz)
[03:06:21] <dmz> mine is big
[03:06:25] <cmr> only 95 lines, yeah.
[03:06:27] <cmr> but still
[03:06:29] <cmr> 2 months!
[03:06:30] *** Quits: shammancer (shammancer@389973A5.EBE303D0.DC8692D8.IP) (Quit: Leaving.)
[03:06:33] *** Joins: shammancer (shammancer@389973A5.EBE303D0.DC8692D8.IP)
[03:06:35] <Yurume> bvssvni: that's called a phantom type :)
[03:06:41] <dmz> doh, 95 lines
[03:07:05] <bvssvni> Yurume: didn't know one could create phantom functions as well
[03:07:05] *** Quits: shammancer (shammancer@389973A5.EBE303D0.DC8692D8.IP) (Quit: Leaving.)
[03:07:08] *** Joins: shammancer (shammancer@389973A5.EBE303D0.DC8692D8.IP)
[03:07:10] <dmz> is there a git lines command?
[03:07:25] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[03:07:44] <Yurume> bvssvni: transmute-only arguments?
[03:07:48] *** Quits: bjustin (bjustin@moz-4B914826.hsd1.mn.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[03:07:51] <cmr> bvssvni: it can't be used because you can't construct a value of TodoList
[03:07:54] <Yurume> (slightly joking)
[03:08:09] <cmr> It has no constructors whatsoever.
[03:08:09] <comex> ok, I'm still getting "'assertion failed: lib.rlib.is_none()'" with just "../configure --disable-llvm-assertions && make"
[03:08:10] *** Quits: jadbaires (jadrian@moz-B95FB934.dsl.telepac.pt) (Connection reset by peer)
[03:08:17] *** Joins: jadbaires (jadrian@moz-B95FB934.dsl.telepac.pt)
[03:08:23] <Yurume> rusti: enum Phantom {} std::sys::size_of::<Phantom>()
[03:08:27] <Yurume> (expecting 0)
[03:08:30] <Yurume> hmm...
[03:08:31] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[03:08:31] <bvssvni> cmr: it also can't be used because it never returns a bool
[03:08:39] <cmr> bvssvni: well that too
[03:08:41] <cmr> but unrelated ;p
[03:08:45] <prudhvi> I am trying to compile current master and running into compile problems. Is this a known issue?
[03:08:45] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[03:09:03] <Yurume> yeah, it's 0
[03:09:08] <cmr> comex: can you get a stack trace? gdb, break _Unwind_RaiseException
[03:09:14] *** Quits: jadbaires (jadrian@moz-B95FB934.dsl.telepac.pt) (Quit: Konversation terminated!)
[03:09:20] <Yurume> so one can transmute some singleton struct to the phantom type
[03:09:21] *** Joins: jadbaires (jadrian@moz-B95FB934.dsl.telepac.pt)
[03:09:23] <Yurume> (I think)
[03:09:49] <dmz> prudhvi: no idea, but if you provide some details I bet someone (like cmr) will help you
[03:10:20] <dmz> rust compiled just find for me yesterday and on Jan 2nd at least
[03:11:28] <`achin> prudhvi: if you're building on top of an already-build workarea, try a "make clean" or "make clean-llvm"
[03:12:28] <prudhvi> `achin: i did try both 1. Fresh system 2. on top of 0.8 same problem. https://gist.github.com/supr/8294108
[03:14:34] <a_m0d|home> cmr: Thanks for your help.  I now have this, which I think is as good as I can get for now: https://github.com/am0d/rust-web/blob/master/src/web/todo_controller.rs#L36
[03:14:39] *** Joins: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP)
[03:14:46] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[03:14:59] <cmr> a_m0d|home: sorry I don't have more satisfactory answers
[03:15:14] <a_m0d|home> Not your problem :)
[03:15:55] <dmz> prudhvi: can you check if x86_64-unknown-linux-gnu/stage1/lib/libstd.so got actually copied?
[03:16:54] *** Joins: quibbit (Mibbit@37293110.2954E99C.A862BC76.IP)
[03:17:14] *** Quits: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com) (Ping timeout)
[03:18:09] *** Quits: quibbit (Mibbit@37293110.2954E99C.A862BC76.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:18:14] <dmz> 'static kind still bothers me... since it looks like a lifetime. Didn't anyone propose to have Static instead?
[03:18:44] <cmr> The visual similarity to 'static is a plus to me, since that's exactly what it does: only allows 'statuc
[03:18:58] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[03:18:58] *** ChanServ sets mode: +ao pcwalton pcwalton
[03:19:11] <cmr> I'm opposed to adding more things named Static since it's really a meaningless word.
[03:19:18] <cmr> I think ti used to be called Durable? Maybe that was a different one.
[03:19:27] *** Joins: logicalparadox (logicalpar@7E906627.EDE60785.5A75A172.IP)
[03:19:39] *** Quits: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net) (Quit: Leaving.)
[03:19:42] <dmz> 'static is the only lifetime that can be used in place of a trait, which makes it an exception, which makes the language understanding more difficult
[03:21:09] <bvssvni> dmz: now that you explained it doesn't sound too awful
[03:21:21] *** Joins: negativezero (negativeze@moz-28BCB6CD.cit.cornell.edu)
[03:21:35] <dmz> it reminds me of 'loop' once being used in place for 'continue'. yes, fewer keywords are good, but in the end we have 'continue', because it makes more sense
[03:21:51] <cmr> dmz: it's impossible to not make an exception for it though, it's a very special lifetime. the superlifetime, of which all lifetimes are a subtype.
[03:21:51] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[03:21:54] <brson> is 'ignore' better than 'xfail' for marking broken tests?
[03:22:29] <acrichto> brson: if using the #[test] infrastructure yeah b/c it makes sure they keep compiling
[03:22:56] <o11c> xfail is supposed to mean "you need to install more external programs on this system"
[03:22:57] <brson> acrichto: i mean as a word
[03:23:26] <acrichto> brson: oh hm, I guess I don't really have a preference then
[03:23:28] <brson> which word is best. they both have the same effect, depending on which tool we're running
[03:23:48] <cmr> I prefer ignore
[03:23:55] <cmr> but only slightly
[03:23:59] <cmr> I don't mind xfail
[03:26:50] <o11c> what is "ignore" supposed to mean anyway? I only know the differenence between xfail and kfail
[03:26:54] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[03:27:12] <cmr> o11c: what even are those
[03:27:24] <cmr> ignore means the test's failure or success is ignored
[03:27:34] <cmr> brson: actually I think I lean more towards xfail
[03:27:45] <cmr> "expected failure" feels better to me
[03:27:48] <cmr> thinking on it a bit
[03:28:25] *** Joins: tjc (tjc@F3CCDC5.685D2433.3ADED9A0.IP)
[03:28:25] *** ChanServ sets mode: +o tjc
[03:28:59] <brson> see i always confused about whether 'expected failure' was a synonym for 'should fail'
[03:28:59] <o11c> cmr: kfail means "my program is broken", xfail means "this user's system is broken"
[03:29:07] <cmr> o11c: in what?
[03:29:14] <o11c> kfails should usually be unconditionall, xfails must always be conditional
[03:29:38] *** Joins: jesse99 (jesse99@moz-8B1E0C5D.hsd1.wa.comcast.net)
[03:30:06] <o11c> for example, "if there is no c compiler, xfail"
[03:30:14] <brson> i took ignore from NUnit fwiw
[03:30:21] *** Joins: eholk (eholk@moz-799DA9F.lsanca.fios.verizon.net)
[03:30:22] <cmr> o11c: is this, like, widespread convention?
[03:30:24] *** Quits: tjc (tjc@F3CCDC5.685D2433.3ADED9A0.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[03:30:30] * cmr hasn't heard of it until now
[03:30:52] <o11c> cmr: that's how I read the definitions ... I think it was in some GNU manual
[03:31:22] *** Quits: jesse99 (jesse99@moz-8B1E0C5D.hsd1.wa.comcast.net) (Ping timeout)
[03:31:24] <o11c> I"m sure most people use them without understanding, but I haven't seen anybody *say* they mean something else specifically
[03:31:53] <o11c> http://www.delorie.com/gnu/docs/dejagnu/dejagnu_6.html
[03:32:07] <dmz> hmmm warning: code is never used: `__gcc_personality_v0
[03:32:22] <dmz> I thought we removed the C++ dependency, at least that's what Release notes for 0.9 say
[03:32:25] <cmr> dmz: when building tests? unimportant
[03:32:31] <cmr> __gcc_personality_v0 isn't a C++ dependency.
[03:32:44] <dmz> oh, my bad than
[03:32:55] <dmz> *then
[03:33:04] <o11c> the only other reason I can see you'd use "ignore" would be if the test hasn't been implemented yet, and that should be UNTESTED
[03:33:32] <dmz> cmr: there is a #[cfg(XXX)], but is there a #[cfg(!XXX)]?
[03:33:40] <o11c> though "incomplete" might be better ...
[03:33:41] <cmr> dmz: cfg(not(XXX))
[03:33:44] *** Quits: zz_kimundi (kimundi@moz-9DB60884.dip0.t-ipconnect.de) (Ping timeout)
[03:33:53] *** Quits: ehsanul (Mibbit@moz-A9E56CFE.hfc.comcastbusiness.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:34:00] <dmz> cmr: so __gcc_personality_v0 should be marked as cfg(not(test)) ?
[03:34:27] <cmr> o11c: that reminds me, I found the *one* piece of GNU documentation that says "see man page": groff_mdoc
[03:34:29] <cmr> https://www.gnu.org/software/groff/manual/html_node/mdoc.html
[03:34:37] <cmr> I almost died laughing when I found it
[03:35:01] <cmr> dmz: maybe? probably? not sure.
[03:35:41] <o11c> cmr: lol ... but to be fair, it's a man page about manpages, so ...
[03:35:45] <geomyidae> This is something I've been putting off asking, are fixed size arrays used, like everish?
[03:36:10] <cmr> geomyidae: fairly rarely
[03:36:22] <dmz> geomyidae: I use those
[03:36:32] <cmr> useful for crypto and some other limited circumstances.
[03:36:40] <SiegeLord> I'd use them more if you could irrefutable destructure them
[03:36:43] *** Joins: zz_kimundi (kimundi@moz-32142F5A.dip0.t-ipconnect.de)
[03:36:46] <dmz> the only complaint is that deriving(Clone) fails on them
[03:36:49] <SiegeLord> Like for coordinate pairs or something
[03:37:04] *** zz_kimundi is now known as kimundi
[03:37:11] <geomyidae> Well, I'm considering using them for writing out packet headers
[03:37:30] <geomyidae> since the size of the rawbytes will be known based on values from the structure, or the type of struct.
[03:37:39] *** Joins: zslayton_ (Mibbit@moz-4806B979.nyc.res.rr.com)
[03:37:47] <geomyidae> I can at least make the vec with_capacity. I'm needlessly optimizing, mostly just curious.
[03:38:21] <dmz> "will be known based on values from the structure" that doesn't sound like a compile time thing
[03:38:22] *** Joins: maxli (Instantbir@moz-78AD779D.hsd1.ca.comcast.net)
[03:38:33] <dmz> so I don't see how you intended to use fixed-size arrays there
[03:38:56] * geomyidae nods
[03:39:41] *** Joins: Addle (quassel@93529591.BA907378.971E19F6.IP)
[03:40:57] <brson> i wonder if sometime after 0.9 we could organize some kind of doc sprint foc the now in-tree cheatsheet
[03:43:03] <brson> "rust for c++ programmers" probably deserves to be in tree
[03:43:04] *** Quits: eholk (eholk@moz-799DA9F.lsanca.fios.verizon.net) (Quit: eholk)
[03:43:12] <brson> maybe the rusticon if that's being maintained
[03:43:50] <cmr> the cheatsheet faq?
[03:44:21] *** Joins: eholk (eholk@moz-799DA9F.lsanca.fios.verizon.net)
[03:44:50] *** Joins: int3_ (int3_@8AF0804B.B0A7F729.7DD07FFA.IP)
[03:48:05] *** Joins: kemurphy (kemurphy@3863AC20.C4E71399.9510F13D.IP)
[03:48:17] *** Joins: jdm_ (jdm@moz-AC9499B2.cable.teksavvy.com)
[03:48:34] <prudhvi> dmz: where should the libstd.so be copied to? I just did a clean clone and build. That fails too.
[03:48:55] <dbaupp> isn't the file called `libstd.so` completely empty?
[03:49:36] <dmz> ls x86_64-unknown-linux-gnu/stage0/lib/rustc/x86_64-unknown-linux-gnu/lib/lib*
[03:50:11] <dmz> I'm getting some rust tests failing. I guess it's caused by my changes, is it?
[03:50:35] <prudhvi> i see the file there. But, it is a zero length file
[03:50:49] *** Quits: int3_ (int3_@8AF0804B.B0A7F729.7DD07FFA.IP) (Connection reset by peer)
[03:51:02] *** Joins: int3_ (int3_@C774D06.E57C642C.714E9B1A.IP)
[03:51:19] *** Quits: echristo (echristo@60A74940.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[03:51:29] <dmz> prudhvi: oh well, it was a shot into the darkness. I've got no idea actually.
[03:51:35] <brson> cmr: yes
[03:51:49] <dmz> mine libstd.so is also 0 bytes
[03:52:16] <cmr> dmz: it's supposed to be
[03:52:22] <cmr> I don't remember why, but that's normal
[03:52:44] <dmz> cmr: if something already has a cfg(), how can I combine it with !test?
[03:52:59] <aatch> cmr, so make can track the dependency
[03:53:02] <cmr> dmz: #[cfg(foo, not(test))]
[03:53:13] <aatch> since the filename isn't known ahead-of-time
[03:53:15] <dmz> would that be OR or AND?
[03:53:22] <cmr> and
[03:53:26] *** Quits: jadbaires (jadrian@moz-B95FB934.dsl.telepac.pt) (Ping timeout)
[03:53:33] <cmr> or is #[cfg(foo)] #[cfg(bar)]
[03:53:47] <dmz> cmr: thanks
[03:56:05] <dmz> silly question: are all tests supposed to pass in master?
[03:56:40] <cmr> dmz: not all of them, tests can be marked xfail and they won't be run.
[03:56:55] <cmr> but yes the testsuite must pass for the PR to be merged.
[03:57:02] <dmz> task 'vec::tests::test_tailn_empty' failed at 'assertion failed: start <= end', /mnt/code/claymore/rust/src/libstd/vec.rs:1025
[03:57:14] <dmz> that doesn't sound like xfail
[03:57:17] <cmr> it isn't
[03:57:24] <cmr> if make check fails, it's a legit failure
[03:57:25] *** Quits: eholk (eholk@moz-799DA9F.lsanca.fios.verizon.net) (Quit: eholk)
[03:57:43] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[03:57:54] <dmz> how do I know if this one was expected to fail?
[03:58:24] <cmr> 1. if it caused the test runner to fail, it wasn't expected, 2. look at the source
[03:58:30] <cmr> the test runner will print ... ok
[03:58:34] <cmr> for tests that failed
[03:58:50] <cmr> failure like that is #[should_fail] if it passed
[03:59:22] <cmr> was I doing anything for anyone?
[03:59:37] <dmz> ok, so since I don't see "..ok", it's my fault then...
[03:59:48] <cmr> dmz: echo $? after `make check`
[03:59:52] <cmr> if it's non-0, it failed
[04:00:02] <dmz> it's also stuck after "test vec::tests::test_zip_unzip ... ok"
[04:00:06] <dmz> and CPU load is near-zero
[04:00:14] <dmz> I wonder if that's expected
[04:00:14] <cmr> test_tailn_empty is #[should_fail], you're fine.
[04:00:21] <dmz> ah
[04:00:24] <dmz> hhmm
[04:00:33] <dmz> why didn't it report OK then?.. I'd expect
[04:01:42] <cmr> dmz: https://gist.github.com/cmr/5ff4e0877f13b5886420
[04:01:51] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[04:01:58] <dmz> weird
[04:03:51] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[04:04:05] *** Quits: maxli (Instantbir@moz-78AD779D.hsd1.ca.comcast.net) (Ping timeout)
[04:04:24] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[04:04:25] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[04:04:27] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[04:05:21] <dmz> stdtest is the the one doing the tests? It's been at 0% CPU for the last 5 minutes
[04:06:11] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:06:15] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[04:07:06] *** Joins: pzol (pzol@moz-553BEE64.dynamic.chello.pl)
[04:07:20] <olsonjeffery> probably hanging?
[04:07:34] <dmz> what can I do?
[04:07:58] <dmz> testing rust for the first time, so I don't know what to expect really
[04:08:07] <dbaupp> ctrl-C to kill it
[04:08:23] <dbaupp> or, hook gdb into and see where it is hanging
[04:08:33] <olsonjeffery> yeah, what dbaupp said more or less
[04:08:43] <olsonjeffery> i know there've been some libnative issues lately..
[04:08:46] <dmz> so it's not supposed to hang like that? ok
[04:09:06] <dbaupp> definitely not
[04:09:07] <dmz> should I clean build before the next try?
[04:09:12] <dbaupp> no
[04:09:18] *** Joins: maxli (Instantbir@moz-78AD779D.hsd1.ca.comcast.net)
[04:09:41] <dbaupp> dmz: what platform are you on, btw?
[04:09:45] <dmz> I synced up and then run "make check-stage1-std NO_REBUILD=1"
[04:09:52] *** Quits: jdm_ (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[04:09:57] <dmz> Linux mezon 3.12.6-1-ARCH
[04:10:09] <dmz> x86_64 GNU/Linux
[04:10:09] *** Quits: jdm (jdm@moz-DB4A9C19.scl3.mozilla.com) (Quit: leaving)
[04:10:22] <dbaupp> acrichto: have we been having deadlocks/hangs in stdtest on linux recently?
[04:10:42] <acrichto> dbaupp: not that I know of
[04:11:30] <olsonjeffery> what was that rust-redis hang?
[04:11:38] <olsonjeffery> i saw your response was "ugh i did something really dumb"
[04:12:12] <acrichto> olsonjeffery: https://github.com/mozilla/rust/pull/11334
[04:12:22] <acrichto> "let's fill the whole buffer!"
[04:13:00] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Connection reset by peer)
[04:13:33] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[04:14:55] <olsonjeffery> live and learn
[04:14:57] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[04:15:41] *** Quits: cheese_cast (raspinudo@moz-FB14AB08.hsd1.ca.comcast.net) (Ping timeout)
[04:15:54] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[04:17:26] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[04:17:33] <comex> (fyi, i was being dumb)
[04:18:27] <dmz> oh well, it's zero CPU again after test vec::tests::test_zip_unzip ... ok
[04:18:33] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[04:18:34] <dmz> what's going to be next?
[04:18:44] <dmz> meanwhile, I'll try hooking up gdb to look
[04:19:09] <acrichto> dmz: gdb -p <pid> should attach
[04:19:15] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[04:19:43] <dmz> ptrace: Operation not permitted
[04:19:49] <dmz> dooes it require root?
[04:20:06] <dmz> seems weird, since I compile rust under the same user
[04:20:13] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[04:20:17] <acrichto> gdb may need root
[04:20:26] <acrichto> attaching to an arbitrary process is a scary thing
[04:20:42] <dmz> but it's my process!
[04:21:03] <acrichto> beats me
[04:21:08] <dmz> https://gist.github.com/kvark/8294577
[04:21:13] <dmz> that's what I get
[04:21:22] *** Joins: kvanb (kvanb@moz-CDB93B52.lnse3.win.bigpond.net.au)
[04:21:37] <dbaupp> no rust symbols at all, weird.
[04:21:46] <acrichto> that seems... odd
[04:21:57] <acrichto> I think you attached to the wrong process
[04:22:05] <acrichto> that looks like sh, not stdtest
[04:22:33] <dmz> yeah, sorry
[04:23:16] <dmz> shelve is updated
[04:23:22] <dmz> what thread are we interested in?
[04:23:26] <dmz> *gist is updated
[04:23:36] <dmz> (these P4 habits...)
[04:24:07] <acrichto> can you get a backtrae on all threads?
[04:24:11] <acrichto> thread apply bt all
[04:24:15] <acrichto> or thread apply all bt
[04:24:17] <acrichto> I forget which
[04:25:22] <dmz> gist is updated
[04:25:27] <dmz> (what a useful command!)
[04:26:20] <acrichto> hm, I shoudl have fixed that problem
[04:26:38] <dmz> I synced up maybe an hour ago or so
[04:27:35] <acrichto> that's sad that there are 7 stack frames before you get to the spawned function
[04:27:46] <dbaupp> dmz: did you do a full make after syncing, or just NO_REBUILD=1 directly?
[04:27:55] <dmz> NO_REBUILD=1
[04:27:59] <acrichto> oh that's it
[04:28:06] <dmz> make check-stage1-std NO_REBUILD=1
[04:28:08] <acrichto> that test will deadlock without an updated libst
[04:28:10] <acrichto> libstd*
[04:28:13] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[04:28:14] <acrichto> and it's deadlocking :P
[04:28:16] <dmz> ok, so clean  build it is
[04:28:22] <acrichto> make should work
[04:28:39] <acrichto> good to know the test has a good positive signal!
[04:28:58] <dbaupp> dmz: ah, yeah, forgot to say; you'll want to have done a `make` recently before using NO_REBUILD=1
[04:29:22] <dmz> dbaupp: no need to reconfigure?
[04:31:05] <dmz> 19:07	dmz	so it's not supposed to hang like that? ok 19:08	dmz	should I clean build before the next try? 19:08	dbaupp	definitely not 19:08	dbaupp	no
[04:31:25] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[04:31:37] <dmz> anyways... will report back later on, since rust compile take a while...
[04:31:45] <dmz> thanks everyone for help!
[04:31:50] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[04:31:55] <dbaupp> dmz: I thought you mean `make clean`
[04:31:56] <dbaupp> sorry
[04:31:59] <dmz> np
[04:32:17] <dmz> seeing a special NO_REBUILD I thought that the clean build is the default one
[04:32:33] <dbaupp> dmz: (the make file will rerun configure if it needs to)
[04:32:33] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[04:32:38] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[04:32:45] <dmz> ok, cool
[04:33:19] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[04:33:36] *** Joins: Soler (Soler@moz-93EA8A7.lightspeed.mssnks.sbcglobal.net)
[04:34:17] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[04:34:30] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[04:35:57] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[04:36:09] *** Quits: Soler (Soler@moz-93EA8A7.lightspeed.mssnks.sbcglobal.net) (Ping timeout)
[04:37:43] *** Quits: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca) (Quit: eatkinson)
[04:39:01] <bjz> how would I pass something like "-L/usr/local/Cellar/glfw3/3.0.3/lib -lglfw3 -framework Cocoa -framework OpenGL -framework IOKit -framework CoreFoundation" to rustc?
[04:39:12] <dbaupp> bjz: --link-args="..."
[04:39:44] <bjz> cool
[04:39:49] *** Quits: atomical (atomical@moz-7BDC7D9E.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com) (Quit: atomical)
[04:39:49] <dbaupp> bjz: or use `#[link(name="glfw3")] extern {} #[link(name="Cocoa", kind="framework")] {} ...`
[04:39:50] <sfackler> bjz: you can also move all of the frameworks into #[link] attributes
[04:40:12] *** Joins: atomical (atomical@moz-7BDC7D9E.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com)
[04:40:12] <bjz> dbaupp: I'm generating it using pkg-config
[04:40:12] <dbaupp> bjz: and just pass -L/usr/local/... directly to rustc
[04:40:17] <dbaupp> bjz: oh
[04:40:21] <sfackler> bjz: https://github.com/mozilla/rust/wiki/Doc-detailed-release-notes#linking-native-libraries
[04:40:41] <bjz> sfackler: see above
[04:40:48] *** Joins: magg (magg@E7C99A0E.9441A742.EB08AFC4.IP)
[04:41:08] <bjz> dbaupp: because the name of glfw is different on different platforms
[04:41:29] <bjz> well, with different package managers
[04:41:31] <dbaupp> bjz: #[cfg(target_os="...")] ;P
[04:41:33] <dbaupp> oh
[04:41:35] <dbaupp> that gets harder
[04:41:39] <bjz> yeah
[04:41:47] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[04:41:48] <dbaupp> #[cfg(target_package_manager="apt")]
[04:41:50] <dbaupp> :P
[04:41:50] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[04:41:56] <bjz> -_-
[04:42:07] <bjz> that's a bit brittle, unfortunately
[04:42:22] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[04:42:22] *** vfetwnuncszu is now known as dcrewi
[04:42:23] <dbaupp> and also doesn't work
[04:42:34] <bjz> well, if it did
[04:43:18] <bjz> how do you link to dlls on windows?
[04:43:37] <bjz> http://www.glfw.org/docs/latest/build.html#build_link_win32
[04:44:07] *** Quits: int3_ (int3_@C774D06.E57C642C.714E9B1A.IP) (Client exited)
[04:44:29] *** Joins: int3_ (int3_@moz-68E6A110.pool-182-52.dynamic.totbb.net)
[04:44:49] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[04:44:54] *** Quits: int3_ (int3_@moz-68E6A110.pool-182-52.dynamic.totbb.net) (Connection reset by peer)
[04:45:12] *** Quits: sellout (Adium@moz-76D71F1A.hlrn.qwest.net) (Ping timeout)
[04:45:13] *** Joins: int3_ (int3_@moz-68E6A110.pool-182-52.dynamic.totbb.net)
[04:45:18] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[04:45:51] *** Quits: int3_ (int3_@moz-68E6A110.pool-182-52.dynamic.totbb.net) (Client exited)
[04:46:13] *** Joins: int3_ (int3_@moz-68E6A110.pool-182-52.dynamic.totbb.net)
[04:47:31] *** Quits: ramitos (ramitos@moz-60679625.socal.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[04:47:38] *** Joins: ramitos (ramitos@moz-60679625.socal.res.rr.com)
[04:48:01] *** Quits: int3_ (int3_@moz-68E6A110.pool-182-52.dynamic.totbb.net) (Ping timeout)
[04:48:31] *** Joins: sellout (Adium@moz-76D71F1A.hlrn.qwest.net)
[04:49:18] *** Quits: ramitos (ramitos@moz-60679625.socal.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[04:50:28] <bjz> I want to do the equivalent of `#[link(name="glfw3")]` in --link-args on windows
[04:50:28] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Connection reset by peer)
[04:50:30] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[04:50:37] *** Joins: Soler (Soler@moz-93EA8A7.lightspeed.mssnks.sbcglobal.net)
[04:51:37] *** Quits: Soler (Soler@moz-93EA8A7.lightspeed.mssnks.sbcglobal.net) (Connection reset by peer)
[04:51:39] <bjz> is it just -lglfw3?
[04:51:52] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[04:55:50] *** Quits: zslayton_ (Mibbit@moz-4806B979.nyc.res.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[04:56:03] <magg> where can i see an example on how to use triemap?
[04:56:20] *** Quits: maxli (Instantbir@moz-78AD779D.hsd1.ca.comcast.net) (Quit: maxli)
[04:56:59] <olsonjeffery> magg: there're tests in /src/libstd/trie.rs in the rust tree
[04:57:36] <magg> olsonjeffery: thanks i'll check it out
[04:58:53] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[05:00:29] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[05:01:16] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[05:02:59] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[05:03:56] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[05:04:58] *** Joins: g3xzh_ (g3xzh@moz-76245F0B.red.bezeqint.net)
[05:05:06] *** Quits: g3xzh_ (g3xzh@moz-76245F0B.red.bezeqint.net) (Quit: Leaving)
[05:05:08] *** Quits: pnkfelix (pnkfelix@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Input/output error)
[05:05:20] <ecl3ctic> wait, so structs don't implicitly copy?
[05:05:54] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[05:06:28] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[05:06:58] <dbaupp> ecl3ctic: depends
[05:07:08] <dbaupp> ecl3ctic: if a struct contains values that move, then teh struct also moves
[05:07:28] <dbaupp> ecl3ctic: if a struct contains only Pod types ("plain old data"), then it is Pod itself and so doesn't move
[05:07:51] <dbaupp> (Pod == not moving on when passed around by value == "implicitly copying")
[05:08:15] <ecl3ctic> well, I have a struct which only contains POD
[05:08:16] <ecl3ctic> but
[05:08:17] *** Joins: jesse99 (jesse99@moz-8B1E0C5D.hsd1.wa.comcast.net)
[05:08:24] <ecl3ctic> my uint is sneakily a pointer
[05:08:42] <ecl3ctic> and I call free on destruction
[05:09:06] <ecl3ctic> do structs which implement Drop then also get move semantics?
[05:09:09] <sfackler> 4yes
[05:09:15] <sfackler> er, yes
[05:09:42] <ecl3ctic> is this documented somewhere?
[05:09:49] <dbaupp> yes
[05:09:55] <ecl3ctic> I was surprised (and glad) that my struct was moving
[05:10:05] <ecl3ctic> but I didn't expect it to just magically happen
[05:10:26] <olsonjeffery> sufficiently advanced technology, you mean.
[05:10:45] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[05:10:47] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[05:11:00] <carter> kvanb: soo llvm 3.4 has auto SLP :)
[05:11:11] <dbaupp> olsonjeffery: "sufficiently-advanced-technology-ly happen" doesn't quite have the same ring to it :P
[05:11:18] <carter> kvanb: sooo ghc 7.8 will use it I gues
[05:11:43] <kvanb> haha I thought you already knew
[05:11:55] <kvanb> its one of the reasons I was wondering whether ghc was going to get it
[05:11:58] <carter> oh
[05:12:00] <kvanb> the other day
[05:12:06] <carter> well ghc gets unless it say -fno
[05:12:12] <carter> and ghc doesnt say that
[05:12:20] <carter> i thought you meant explicitly flagging it
[05:12:56] <carter> second half of 2014 may turn into "how can i make llvm  and ncg more awesome for the code haskell makes"
[05:14:10] <Ralith> carter: SLP?
[05:14:22] <carter> the stright line program vectorizer
[05:15:39] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[05:16:10] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[05:16:18] <kvanb> I've been designing another way to deal with closures
[05:16:32] <kvanb> maybe i'm rediscovering what GHC already does, who knows, but I've invented something neat on paper
[05:16:35] *** Quits: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca) (Quit: canhtak)
[05:16:46] <carter> oh
[05:16:49] <carter> whats the approach?
[05:16:49] <kvanb> I've found a way to do *really fast* partial applications
[05:16:53] <kvanb> without needing tags or anything.
[05:16:54] <carter> heh
[05:17:00] <carter> which one?
[05:17:11] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[05:17:12] <kvanb> well my plan is to have closures backwards
[05:17:18] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[05:17:28] <carter> meaning?
[05:17:30] <kvanb> like [arg1 arg2 arg3 fptr meta]
[05:17:36] <carter> vs what?
[05:17:44] <kvanb> and then another closure like ]arg1 arg2 fptr meta]
[05:18:12] <kvanb> and when you partially apply you add sizeof whatever to the pointer from left to right so the person applying can be naive to the closure type
[05:18:20] <kvanb> the last application lands on fptr and can jmp dword ptr
[05:18:26] <carter> oh
[05:18:29] <kvanb> meta is at closure+ and arguemnts are at closure-
[05:18:44] <kvanb> versus having the function pointer at the beginning of the closure and needing helper functions to apply them
[05:19:14] <carter> i thought you mean the space safe environment / fast closure trade off
[05:20:06] *** Joins: claude (Mibbit@moz-1DFF4B3F.tukw.qwest.net)
[05:20:32] <carter> kvanb: theres a hugeeee literature on closure reps and tricks
[05:20:55] <carter> ghc does have a way of handling partially applied closures nicely thogh
[05:21:09] <kvanb> I have to think about laziness
[05:21:17] <kvanb> unfourtunately not everything can be solved using graphs
[05:22:29] <kvanb> One thing I did come up with though, is that the meta portion of closures can have a pointer to the previous level closure (if the current level is a known-scope lambda) so you can avoid copies
[05:22:50] <kvanb> something like mov ebx, [eax+4] and then access eax for the current scope and ebx for the previous scope
[05:23:03] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Quit: ëžœë¤ì€ ì‡ í‡´í–ˆìŠµë‹ˆë‹¤.)
[05:23:16] <geomyidae> Can I request more feedback, api, style, idiomaticness or otherwise https://github.com/colemickens/pcapfe. thanks
[05:23:35] <kvanb> ecx for before that, and you can work all the way up the chain. The GC can collect them as they aren't referenced anymore. All kind of naive, but works on paper.
[05:23:52] <kvanb> I love libpcap
[05:25:03] *** Quits: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP) (Ping timeout)
[05:25:31] <kvanb> GitHub: 12 hours ago wowus open sourced wowus/async-ssl
[05:25:33] <kvanb> 404 not found.
[05:25:43] <kvanb> Oops, looks like someone accidentally opensourced an internal repo and fixed it up quickly
[05:25:52] <dbaupp> geomyidae: https://github.com/colemickens/pcapfe/blob/master/lib.rs#L46 `res.push_all(self.DstMac);`
[05:27:01] <dbaupp> geomyidae: https://github.com/colemickens/pcapfe/blob/master/lib.rs#L81-L94 `let mut res = ~[ ((self.Version as u8) << 4) | self.Ihl as u8, (self.DiffServices as u8) << 6 | (self.Ecn) as u8, ..., self.Checksum as u8];`
[05:27:31] *** Quits: claude (Mibbit@moz-1DFF4B3F.tukw.qwest.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:27:34] <dbaupp> geomyidae: (there are some appends there that could be .push_all's too.)
[05:27:49] <dbaupp> geomyidae: could be a literal too: https://github.com/colemickens/pcapfe/blob/master/lib.rs#L151-L164
[05:27:53] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[05:28:37] <dbaupp> geomyidae: could move https://github.com/colemickens/pcapfe/blob/master/lib.rs#L166-L176 before the initialisation of `res` to put https://github.com/colemickens/pcapfe/blob/master/lib.rs#L178-L186 into the literal as well
[05:28:41] <geomyidae> how about the ip addr matching nastiness?
[05:28:49] <dbaupp> another literal https://github.com/colemickens/pcapfe/blob/master/lib.rs#L205
[05:28:49] <carter> kvanb: one subtley of the "consing" of the envirnoment is space safety
[05:29:12] <geomyidae> yeah, gotcha on the literals
[05:29:15] <dbaupp> geomyidae: where specifically?
[05:29:17] <kvanb> space safety?
[05:29:25] <carter> yes
[05:29:29] <carter> keeping extra variables live
[05:29:46] <kvanb> oic
[05:29:52] <dbaupp> geomyidae: (i.e. which ip addr matching?)
[05:29:54] <carter> vaster to cons it
[05:29:57] <carter> *faster
[05:30:08] <carter> but you lose some space safety if the closure escapes
[05:30:17] <carter> for nonescaping closures its more ok
[05:30:21] <carter> *always ok
[05:30:24] *** Joins: juszczakn (nick@moz-531BAF0B.dyn.centurytel.net)
[05:30:29] <geomyidae> https://github.com/colemickens/pcapfe/blob/master/lib.rs#L97 dbaupp seemed gross to me
[05:30:38] <geomyidae> besides the append->push_all
[05:30:52] <dbaupp> I don't see any way around it
[05:30:59] <kvanb> Yeah actually I was just thinking
[05:31:09] <kvanb> if you have let x = some huge list in whatever \y -> whatever
[05:31:21] <kvanb> by the time it gets into the lambda you dont really want to hold onto the huge list anymore if it's not used.
[05:31:47] <kvanb> my solution doesn't deal with that if the GC is naive and doesn't keep very complex function metadata. :(
[05:32:01] <geomyidae> do we capitalize struct members or no
[05:32:23] <carter> kvanb: honestly i think youre tuning on the wrong scale
[05:32:30] <carter> theres much large impact optimziations you coudl do
[05:32:44] <dbaupp> geomyidae: no, normally `snake_case: ...`
[05:32:53] <kvanb> im working towards designing something that doesn't need or use a stack
[05:33:02] <carter> so it uses a heap?
[05:33:08] <kvanb> everything on heap, yeah
[05:33:12] <carter> so like ghc :)
[05:33:14] <dbaupp> geomyidae: CamelCaseTypes (and enum variants), UPPERCASE_CONSTANTS, snake_case everything else
[05:33:30] <dbaupp> (i.e. functions, module names, local variables, struct fields.)
[05:33:46] <kvanb> no stack at all, rather, even for thunks if I can help it
[05:33:51] <bjz> what does `uname -o` give you on mingw?
[05:34:00] *** Joins: ptc1 (Adium@moz-192425C4.nyc.res.rr.com)
[05:34:05] <kvanb> so you can have infinite tasks without memory constraints
[05:34:12] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Connection reset by peer)
[05:34:16] <carter> kvanb: so like ghc 7.8?
[05:34:26] <kvanb> maybe, I haven't been keeping up to the tech
[05:34:27] <kvanb> :P
[05:34:37] *** Joins: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP)
[05:34:38] <carter> ghc hasn't had a green thread limit in eons
[05:34:45] <kvanb> Oh, I meant
[05:34:49] <carter> though they did drop stack limits by default fo 7.8
[05:34:55] <carter> now its just a heap limit
[05:34:55] <kvanb> does ghc allocate a small C stack for every microthread?
[05:34:59] <carter> no
[05:35:03] <kvanb> or even a shadow stack on the heap?
[05:35:36] <carter> kvanb: C stack != ghc stack
[05:35:48] <carter> C stack in ghc is used for register spilling and ffi calls
[05:35:56] <kvanb> ghc has both, because of ffi ik
[05:36:03] <kvanb> but ghc stack is a shadow stack isn't it?
[05:36:03] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Ping timeout)
[05:36:11] <carter> what do you mean by shadow stack?
[05:36:14] <carter> remind me
[05:36:14] <kvanb> that has a speed advantage, but means each green thread has a small minimum memory overhea
[05:36:25] <kvanb> uh, just a medium sized block of heap for spilling or whatnot
[05:36:34] <kvanb> that the context switcher assigns to each green thread
[05:36:45] <carter> i think you can set the stack chunk size as an RTS option
[05:37:09] <kvanb> okay, so it goes for the performance thing
[05:37:14] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[05:37:17] <kvanb> its always faster to use a stack because theres no overhead requiredi n using one
[05:37:33] <carter> i have no idea what your'e saying
[05:37:40] <carter> ghc stacks are heap allocated
[05:37:56] <kvanb> but if you have 100,000 threads and each has a 8kb stack, you have 1gb of memory just in shadow stack
[05:38:11] <geomyidae> oh I love staticly typed languages and tests :)
[05:38:17] <carter> ok, and what are you doing?
[05:38:22] <kvanb> I'm trying to solve the issue of growing the shadow stack by having none at all
[05:38:39] <kvanb> because for ghc if you allocate a bigger shadow stack you win performance but lose memory if the thread doesn't use it
[05:38:44] <kvanb> if you make the chunks smaller you lose performance
[05:39:02] <carter> kvanb: if you can break that tradeoff please share
[05:39:07] <carter> blog and benchmarks and stuff
[05:39:15] <kvanb> I think its possible using pure CPS to use only slots in the meta part of closures and stuff as stack
[05:39:40] <carter> ghc uses CPS
[05:39:57] <carter> so youre making minimal stack chunks :)
[05:40:17] <carter> you should check out some of the optimizing Scheme compilers
[05:40:23] <carter> T from the late 80s
[05:40:27] <carter> chicken
[05:40:28] <carter> gambit
[05:40:32] <carter> mebe stalin
[05:40:38] <kvanb> heh, funny names
[05:41:08] <carter> nah
[05:41:19] <carter> they're really amazing works of research in the space
[05:41:37] <carter> hell, even SML/NJ had was state of the art at one point
[05:41:50] <carter> most good scheme compilers took CPS very very seriously
[05:42:34] <carter> like, this is classical FP compiler reading (at least for strict langs)
[05:42:39] *** Quits: juszczakn (nick@moz-531BAF0B.dyn.centurytel.net) (Ping timeout)
[05:42:45] <kvanb> come to think of it, bens work with regions could have real applications here
[05:43:17] <kvanb> anyway, have a nice afternoon. going to actually go do something, write some lines :P
[05:43:22] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[05:43:46] <kvanb> I didn't get a reply about my build system rant on the list, so I presume its probably fixed now
[05:43:56] <kvanb> I should try my hand at ghc sometime
[05:43:58] <carter> what build system rant?
[05:44:03] <carter> contribs are welcome
[05:44:12] <kvanb> oh I replied to simons thing about new devs finding it hard to pick up
[05:44:36] <kvanb> by just saying how scary the testsuite and build system were 6 months or so ago
[05:44:41] <dbaupp> kvanb, carter: while interesting, does that discussion have any relevance to Rust?
[05:45:01] <carter> low level RTS bits :)
[05:45:01] <kvanb> dbaupp: :(
[05:45:07] <carter> and compiler design
[05:45:09] <kvanb> this place only gets like 400 messages a day
[05:45:12] <carter> and memory safety 
[05:45:16] <kvanb> I dont think it matters too much, does it?
[05:45:16] <carter> but good point dbaupp  :0
[05:45:17] <carter> :)
[05:45:22] <dbaupp> kvanb: no it doesn't
[05:45:42] <dbaupp> I should've phrased it differently, maybe "does this have possibly applications to Rust?"
[05:45:53] <dbaupp> kvanb: (fwiw, #rust gets far more than 400 messages a day)
[05:46:06] <carter> yes, "why you should write your rts in rust, if you're using llvm as your compiler backend anyways"
[05:46:11] <carter> ooo
[05:46:12] <carter> wait
[05:46:17] <carter> that would mebe yield LTO right?
[05:46:23] <kvanb> yes it would
[05:46:25] <kvanb> maybe GHC should :P
[05:46:26] <carter> oooo
[05:46:27] <kvanb> when its more stable
[05:46:32] <dbaupp> C can get LTO?
[05:46:33] <carter> kvanb: yes, baby steps
[05:46:38] <kvanb> You know, that reminds me, someone rewrote parts of the RT in rust already
[05:46:42] <kvanb> the block allocator or something
[05:46:50] <carter> kvanb: ezyang did an experiment yes
[05:46:50] <dbaupp> GHCs RT?
[05:46:58] <carter> nah, just part of the GC
[05:47:10] <carter> he did figure out an redudant funcal in the gc though
[05:47:10] <dbaupp> still, pretty cool
[05:47:12] <carter> jah
[05:47:16] <kvanb> saw that ticket
[05:47:21] <dbaupp> did the experiment go well?
[05:47:27] <carter> well, it was just one piece
[05:47:43] <carter> i think the fact that it helped him id an extranious funcall in the GC algorithm is pretty nice
[05:47:53] <dbaupp> https://ghc.haskell.org/trac/ghc/ticket/8609 right?
[05:48:04] <carter> yup
[05:48:05] <kvanb> thats the one
[05:49:02] <carter> rust: helping systems researcher grad students clean up industrial grade RTS' since  Dec 31, 2013 3:11:03 PM 
[05:49:33] <dbaupp> heh
[05:51:32] <geomyidae> https://github.com/colemickens/pcapfe/blob/master/lib.rs#L97 dbaupp cleaned up a bit, renamed the struct members too. I have a few other things marked "HELP" that I would appreciate any thoughts on as well if you want to look. thank you!
[05:51:53] *** Quits: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru) (Ping timeout)
[05:53:06] <dbaupp> geomyidae: https://github.com/colemickens/pcapfe/blob/master/lib.rs#L542 does this one mean you want do detect when n is negative and handle it differently?
[05:53:16] <geomyidae> yes
[05:53:33] <dbaupp> `if n >= 0 { Some(n as uint) } else { ... }`?
[05:53:52] <dbaupp> https://github.com/colemickens/pcapfe/blob/master/lib.rs#L547 if pcap_close *must* be called, I'd say yes.
[05:54:20] <geomyidae> LOL, and ok.
[05:54:58] <dbaupp> https://github.com/colemickens/pcapfe/blob/master/lib.rs#L410 probably; at least in to a separate module (or maybe multiple modules)
[05:55:08] <geomyidae> I don't know why I was trying to make it be a match statement so much
[05:55:30] <dbaupp> from_buf does copy
[05:55:50] <kvanb> dbaupp is gunning it.
[05:56:01] <geomyidae> wonderful!
[05:56:14] <kvanb> Don't be stuck on the wrong side in the great lambda war
[05:56:17] <kvanb> we have a lambdacolyte here
[05:56:23] <eddyb> o_O
[05:56:23] <dbaupp> geomyidae: (I just checked the source for that one: http://static.rust-lang.org/doc/master/src/std/home/rustbuild/src/rust-buildbot/slave/doc/build/src/libstd/vec.rs.html#2515-2517 )
[05:57:22] <geomyidae> and then from_buf_raw calls copy_memory. got it.
[05:57:28] <dbaupp> yup
[05:57:50] <dbaupp> hm, that should call copy_nonoverlapping_memory
[05:59:23] <dbaupp> (just as a perf optimisation)
[06:00:27] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Connection reset by peer)
[06:01:07] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[06:02:35] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:02:39] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Quit: DAddYE)
[06:02:45] *** Joins: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru)
[06:04:22] * geomyidae wonders something about two crates in a single dir for rustpkg
[06:04:58] <kvanb> rusts modules feel awkward and confusing for beginners
[06:05:04] <kvanb> 2c from a beginners point of view
[06:05:40] <kvanb> Not so much the way the exports work, but the way the magic files in each directory are automatically imported if they are given certain names and such
[06:07:24] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[06:08:45] <carter> yeah
[06:09:12] *** Quits: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP) (Ping timeout)
[06:09:18] <dbaupp> magic files?
[06:09:26] <dbaupp> i.e. `mod.rs`?
[06:09:29] <kvanb> mod.rs or something, it's been a while
[06:09:30] <kvanb> yeah
[06:09:42] <kvanb> the documentation seemed poor and confusing too
[06:09:48] <kvanb> it took me 20 minutes or so to get it to work
[06:09:57] <carter> modules not being coupled to files, except when they are :)
[06:10:03] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[06:10:08] <carter> eg: can you give a path to a module thats not its prefix name?
[06:10:16] *** Joins: GeorgeH_ (George@moz-FB5F2302.hsd1.nj.comcast.net)
[06:10:24] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[06:10:25] <dbaupp> what do you mean by that?
[06:10:56] *** Parts: ekiara (emk@moz-9B1940E9.tech.co.ke) ()
[06:11:11] <carter> whats the current module lookup alg?
[06:11:32] <carter> in a crate
[06:11:45] <kvanb> TBH the documentation just needs to link to a dummy github directory showing a few different crates with differnet modules and stuff inside
[06:11:57] <kvanb> the textual explanation isn't easy to follow
[06:12:45] *** Joins: cheese_cast (raspinudo@moz-FB14AB08.hsd1.ca.comcast.net)
[06:12:49] <dbaupp> carter: `mod foo;` looks for `foo.rs` or `foo/mod.rs` (error if neither or both exist)
[06:12:57] <carter> yeah
[06:12:57] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[06:13:12] <geomyidae> So, I abandoned rustpkg, wrote a makefile, spits out two separate libs, maybe I'll add my example back in now
[06:13:13] <carter> unless its a local nested module in the current file right?
[06:13:18] <geomyidae> poor rustpkg :(
[06:13:24] <dbaupp> carter: `mod foo { mod baz; }` looks for baz's files inside ./foo/
[06:13:27] <dbaupp> carter: yeah
[06:13:37] <dbaupp> I believe that's the full spec
[06:13:50] <carter> wait
[06:13:51] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[06:13:51] <carter> it does that
[06:14:03] <dbaupp> (with nested mod foo { mod bar { mod baz; } } looking at foo/bar/baz.rs and foo/bar/baz/mod.rs)
[06:14:06] <dbaupp> etc.
[06:14:09] <kvanb> what if you have like foo
[06:14:13] <kvanb> and foo::extra
[06:14:27] <kvanb> if you just do mod foo, does it pull everything in, if mod foo { mod extra; } is in foo.rs
[06:14:29] <carter> mod baz ; is an import?
[06:14:33] <kvanb> and is there a way to stop that?
[06:14:35] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[06:14:40] <carter> i thoguht use was the improt
[06:14:48] <kvanb> oh, now I'm just confused.
[06:14:51] <kvanb> there's use and mod, ofcourse.
[06:14:59] <dbaupp> carter: `mod` is how you load a module into the AST
[06:15:00] <carter> use mod blah
[06:15:08] <carter> oh
[06:15:13] <dbaupp> use is how you reference it from else where
[06:15:19] <carter> ok
[06:15:20] <dbaupp> i.e. `mod` gives a module it's canonical path
[06:15:23] <dbaupp> *its
[06:15:30] <carter> i need some differntial examples of the two
[06:15:33] <dbaupp> kvanb: "stop that", what's that?
[06:16:12] <kvanb> ie, have foo::bar
[06:16:21] <kvanb> I was asking how to only pull in whats in foo and not foo/bar
[06:16:26] <kvanb> but I forgot about use 
[06:16:40] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[06:19:07] <dbaupp> carter: https://gist.github.com/huonw/effa68dbe441b49472b0
[06:19:26] <carter> ohh
[06:19:37] <carter> so use imports a modules lexical contents
[06:19:42] <dbaupp> yes
[06:19:50] <carter> ahhhh
[06:19:56] <carter> so its  module unwrapping 
[06:20:00] <carter> gotcha
[06:20:13] <carter> funny ML / haksell / C / C++ hydrid
[06:20:25] <dbaupp> yeah, it is slightly peculiar
[06:20:44] <kvanb> funny how your hybrid sounds more like hydread in that form
[06:20:54] <carter> you mean a hydra?
[06:21:03] <kvanb> hy-dread
[06:21:04] <carter> kill the c/c++ bit and llvm grows back in its place?
[06:21:06] <kvanb> sure, hydra :P
[06:21:10] <kvanb> lol
[06:21:23] <carter> have you seen the instruction lowering code in llvm for x86?
[06:21:43] <dbaupp> its the most fun thing in the world, right? :P
[06:21:44] *** Quits: heftig (heftig@moz-C2A68214.dip0.t-ipconnect.de) (Quit: Quitting)
[06:21:47] <kvanb> nah I havent looked at llvms internals
[06:21:53] <kvanb> but I can imagine with the amount of peephole it does
[06:22:05] <kvanb> and probably performance hacks to try and get ahead of gcc 4.8 in phoronix benches
[06:22:05] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[06:22:06] *** ChanServ sets mode: +ao dherman dherman
[06:22:06] <kvanb> sounds scary
[06:22:08] <carter> https://github.com/llvm-mirror/llvm/blob/master/lib/Target/X86/X86ISelLowering.cpp 20k LOC
[06:22:09] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[06:22:13] <kvanb> oh lawd
[06:22:34] <carter> 20k LOC c++ module
[06:22:49] <carter> granted, its probably one of the most heavily used modules in llvm
[06:22:52] <carter> o/ dherman 
[06:22:54] <kvanb> okay its basically crashed safari
[06:22:56] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[06:23:03] <kvanb> I'd hate to imagine how MSVC would deal with that
[06:23:08] <carter> https://raw.github.com/llvm-mirror/llvm/master/lib/Target/X86/X86ISelLowering.cpp 
[06:23:11] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[06:23:13] <carter> may load better
[06:23:24] <kvanb> yeah thats much more performant
[06:24:16] <kvanb> you know
[06:24:26] <kvanb> you could match this code like 5:1 with Haskell
[06:24:28] <kvanb> look how simple it is
[06:24:37] <carter> rust would fair well too
[06:24:39] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Connection reset by peer)
[06:24:42] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[06:24:43] <carter> its all cases
[06:25:15] <kvanb> Lol
[06:25:22] <kvanb> I love it when they do like 50 lines of case whatever:
[06:25:32] <kvanb> and then one single function
[06:28:11] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[06:28:13] <kvanb> I feel like a bad person
[06:28:15] <dbaupp> did I just hear that carter and kvanb have volunteered to rewrite LLVM into Rust?
[06:28:26] *** vfetwnuncszu is now known as dcrewi
[06:28:28] <kvanb> in my head I'm going like "Oh no, they should have used Traits/Typeclasses there! That's horrible"
[06:28:33] <kvanb> and then I remembered C++ doesn't have them.
[06:28:36] <kvanb> <.<
[06:28:51] <kvanb> dbaupp: oh lawd no
[06:29:01] <carter> dbaupp: nah, as is i've been pressure into agreeing to write a mini llvm in haskell
[06:29:10] <carter> i have to limit myself osmehwere
[06:29:13] * dbaupp dreams
[06:29:14] <carter> *pressued
[06:29:34] <kvanb> Maybe in the far far future :P
[06:29:34] <dbaupp> it was worth a try anyway :P
[06:30:33] <dbaupp> tomorrow counts as far far future, right?
[06:30:46] *** Quits: pzol (pzol@moz-553BEE64.dynamic.chello.pl) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[06:31:21] <kvanb> bah, failed to come up with a witty back to the future pun
[06:31:41] <dbaupp> unacceptable
[06:31:47] <carter> late 2014 or mid 2015
[06:31:57] <kvanb> some time in 3XXX I reckon
[06:32:01] <carter> yah want rust to be self hosting at some point right
[06:32:04] <carter> :p
[06:32:11] <geomyidae> thank you bunches dbaupp
[06:32:34] <dbaupp> We need a rust OS too, for complete bootstrapping.
[06:32:55] <kvanb> the linux kernel would gain HEAPS from being rebuilt in rust
[06:32:57] <dbaupp> download a snapshot, compile the OS, boot the OS to compile the full compiler.
[06:33:03] <kvanb> linus is an old man and refuses to use C++
[06:33:26] <dbaupp> won't his arguments against C++ apply (in part) to Rust too?
[06:33:35] <kvanb> no, they're pretty dumb
[06:33:56] *** Joins: ekiara (emk@moz-9B1940E9.tech.co.ke)
[06:34:36] <kvanb> http://article.gmane.org/gmane.comp.version-control.git/57918
[06:35:19] <carter> dbaupp: i think the arguments don't apply to rust
[06:35:40] <carter> because the runtime semantics for rust seem a bit simpler than c++
[06:35:49] <kvanb> rust isn't an object model
[06:35:54] <kvanb> its a trait model like Haskell
[06:35:55] <carter> jah
[06:35:57] <carter> whic i like
[06:35:58] <kvanb> I think thats what linus prefers
[06:36:06] <carter> that said, i think they want linux to run on more archs than just those llvm supports
[06:36:36] <dbaupp> yeah, portability would be the big one.
[06:36:40] <kvanb> A guy at my old high school got on phoronix for porting it to the CAS calculator
[06:36:49] <kvanb> it supported wifi through usb and swappable keyboards
[06:36:53] <kvanb> :P
[06:39:26] *** Joins: sunny1304 (Mibbit@29369FA4.3EAE7AC0.6DC151A0.IP)
[06:41:21] *** Quits: sunny1304 (Mibbit@29369FA4.3EAE7AC0.6DC151A0.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:41:36] *** Joins: mib_6oy6ub (Mibbit@29369FA4.3EAE7AC0.6DC151A0.IP)
[06:41:52] *** Quits: mib_6oy6ub (Mibbit@29369FA4.3EAE7AC0.6DC151A0.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:41:58] <kvanb> if someone were to rewrite llvm
[06:41:59] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[06:42:12] *** Quits: magg (magg@E7C99A0E.9441A742.EB08AFC4.IP) (Quit: magg)
[06:42:19] <kvanb> they should make it an explicit memory store model to give people very explicit control over stack/heap
[06:42:22] *** Joins: mindcat (mindcat@A619059E.7EE3DE8.F956842C.IP)
[06:42:24] <kvanb> through alloca or whatever
[06:42:37] <carter> kvanb: that destroys most optimizations 
[06:42:43] <carter> kvanb: just use the ghc calling convention
[06:42:49] <carter> then you can explicitly manage stuff however you want
[06:42:52] <carter> or add your own
[06:43:02] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[06:43:08] <kvanb> ghc calling convention disables stack usage?
[06:43:17] <carter> nah, its just not managed by llvm
[06:43:19] *** Joins: magg (magg@E7C99A0E.9441A742.EB08AFC4.IP)
[06:43:27] <carter> every fun call in ghc calling convention on llvm is tail call
[06:43:41] <carter> ghc generates code to manage it
[06:43:50] <carter> does mean it misses out on some of llvm's optimization tooling
[06:43:54] <carter> but thats usually ok
[06:43:56] *** Joins: sunny1304 (Mibbit@29369FA4.3EAE7AC0.6DC151A0.IP)
[06:43:59] <kvanb> I think thats possible with the fastcc too
[06:44:07] <carter> sure
[06:44:17] <kvanb> except register spills end up on stack so you have to make sure that everything is passed through closures or shadow stack
[06:45:14] <kvanb> I guess you can't use llvm temporaries in any of them because that'll probably make llvm put it on stack
[06:45:23] <kvanb> so you always have to use members of things for assignments
[06:46:04] <kvanb> There's probably no %var = .... stuff in llvm produced by GHC?
[06:46:10] <carter> does nah there is
[06:46:18] <carter> reg spills do go on the c stack
[06:46:23] <sunny1304> hello, can anyone explain how 	let a = ~[~1,~2,~3];   works in rust ??  so far i know array is contigious memory location..... and heap allocation are dynamic...
[06:46:43] <carter> sunny1304: so that an array of pointers to ints 
[06:46:45] <carter> right?
[06:46:52] <sunny1304> yes...
[06:46:55] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: WeeChat 0.4.2)
[06:47:02] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[06:47:13] <kvanb> looks like a boxed vector of boxed ints to me
[06:47:25] <sunny1304> but does heap allocation gurantees contigious allocation ?
[06:47:32] <kvanb> oh, not boxed
[06:47:33] <carter> probalby not
[06:47:34] <kvanb> box is @
[06:47:40] <carter> kvanb: ~ is heap
[06:47:43] <carter> with single owner right?
[06:47:52] <kvanb> I think you can borrow them but im not sure
[06:47:56] <carter> yeah
[06:47:57] <carter> you can
[06:48:03] <carter> sunny1304: depends on th eheap allocator
[06:48:09] * kvanb raises the bat signal and waits for dbaupp's arrival
[06:49:14] <kvanb> does rust differentiate between pure/inpure functions?
[06:49:35] * dbaupp reads backlog
[06:50:01] <sunny1304> ok..thanks, i think i have to dig more....
[06:50:40] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[06:50:42] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[06:50:42] *** ChanServ sets mode: +o tjc
[06:51:04] <dbaupp> kvanb: no (we used to have a `pure` annotation, but it was removed, because it wasn't a very good definition of "pure")
[06:51:19] *** Quits: cheese_cast (raspinudo@moz-FB14AB08.hsd1.ca.comcast.net) (Ping timeout)
[06:51:22] <kvanb> I think effects are a better model
[06:51:22] *** Joins: jackneill (jackneill@moz-A33F8E90.pool.digikabel.hu)
[06:51:34] *** Quits: ptc1 (Adium@moz-192425C4.nyc.res.rr.com) (Quit: Leaving.)
[06:51:42] <dbaupp> https://github.com/mozilla/rust/wiki/Proposal-for-effects
[06:51:43] <kvanb> effects allow some crazy optimizations
[06:51:45] <kvanb> Oh man
[06:51:47] <kvanb> yes
[06:51:48] <kvanb> +1
[06:52:03] <carter> kvanb: read it first :)
[06:52:14] <dbaupp> kvanb: what was I being summoned for, btw?
[06:52:43] <carter> dbaupp: sunny1304  needed halp
[06:52:49] <kvanb> sunny1304's question before carter was awesome and ninjad it
[06:53:10] <kvanb> I dont like this proposal actually
[06:53:16] <kvanb> this wont() stuff is stupid
[06:53:20] <carter> kvanb: hence why i suggested you read it
[06:53:22] <carter> yeah
[06:53:24] <carter> i'm meh on it
[06:53:35] <kvanb> probably a better way to do it
[06:53:36] <carter> you should add a "heres how disciple does it" to the bottom
[06:53:39] <kvanb> like make effectful traits
[06:53:53] <kvanb> and then imply effects based on used traits
[06:53:54] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[06:53:56] <kvanb> or something like that
[06:54:05] *** vfetwnuncszu is now known as dcrewi
[06:54:08] <carter> kvanb: how much disciple code hav eyou written?
[06:54:13] <dbaupp> `fn foo() { println("hi") }` no traits here?
[06:54:14] <kvanb> 600 LOC
[06:54:19] <kvanb> 4% or something like that
[06:54:24] *** Joins: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP)
[06:54:24] <kvanb> oh, actual core
[06:54:26] <kvanb> uh, not much
[06:54:34] *** Parts: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP) ()
[06:54:53] <carter> kvanb: i mean, used it :)
[06:54:55] <carter> so you're ahead of me
[06:55:07] <kvanb> the effects in disciple are really deap
[06:55:09] <kvanb> *deep
[06:55:12] <carter> yeah
[06:55:16] <kvanb> it has Read/Write/Alloc and all that
[06:55:25] <carter> idris does too when you want it
[06:55:37] <carter> idris kinda does it as a add on policy engine though
[06:55:40] <carter> using fancy types
[06:55:41] <kvanb> Read/Write are handy because they unlock a lot of optimizations
[06:56:03] <carter> true
[06:56:23] <carter> types are like reified  validated static analyses
[06:56:35] <kvanb> I had this idea of effect families
[06:56:41] <carter> oh>?
[06:56:49] <kvanb> like IO { System; Console; Network ... }
[06:56:50] <carter> do you have a blog post about it yet?
[06:56:58] <carter> kvanb: have you seen how diris does it?
[06:56:58] <kvanb> nah, I have a lot of ideas I dont usually talk about
[06:57:00] <carter> *dirs
[06:57:03] <kvanb> nope, haven't used idris
[06:57:04] <carter> *idris
[06:57:09] <carter> read the Eff paper 
[06:57:22] <carter> https://edwinb.wordpress.com/2013/03/28/programming-and-reasoning-with-algebraic-effects-and-dependent-types/
[06:58:06] <carter> kvanb: i think rust can't have a good effects model till it has higher kinded types though
[06:58:27] <carter> anything in the mean time is a hack to work around that
[06:58:42] <kvanb> I propose Ruskell
[06:58:48] <kvanb> mwahaha
[06:58:57] *** Joins: Soler (Soler@moz-93EA8A7.lightspeed.mssnks.sbcglobal.net)
[07:00:40] *** Quits: Soler (Soler@moz-93EA8A7.lightspeed.mssnks.sbcglobal.net) (Ping timeout)
[07:02:08] <geomyidae> https://news.ycombinator.com/item?id=7015145 not a mention of rust :o
[07:02:08] <carter> why use rust when you can use ... Steal
[07:02:23] <kvanb> heh, Stainless
[07:02:30] <carter> geomyidae: they mention haskell
[07:02:35] <carter> which has traits and pointers too
[07:02:40] <kvanb> steel has 2 e's, but steal might better represent the nature of the languages features
[07:02:41] <kvanb> hehe
[07:03:13] <carter> kvanb: i can totally write code that segfaults in haskell when i do unsafe ops
[07:03:17] <carter> some of it is really fun
[07:03:20] <carter> *funny
[07:03:36] <dbaupp> geomyidae: the server crashed and lost a pile of previous discussion about that article on HN
[07:03:44] <dbaupp> (which, iirc, did mention Rust.)
[07:03:47] *** Quits: sunny1304 (Mibbit@29369FA4.3EAE7AC0.6DC151A0.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:03:54] <carter> and no one cares about the threads on hn anymore
[07:03:59] <carter> they're all stale
[07:04:27] <dbaupp> geomyidae: and http://www.reddit.com/r/programming/comments/1uhqu0/gos_type_system_is_an_embarrassment/ does mention Rust
[07:04:40] <dbaupp> if you're willing to fight through the hundreds of comments
[07:04:45] * geomyidae should be careful what he wishes for
[07:04:59] <geomyidae> I remember the early threads on go, and the rust ones in /r/programming have gone similarly
[07:05:12] <kvanb> carter: :P I used to be afraid of prims
[07:05:14] <geomyidae> Ive actually seen rust mentioned favorably in /r/golang of all places
[07:05:21] <kvanb> now it's like bread and butter because I dont trust the compiler not to do anything stupid
[07:05:40] <carter> kvanb: you tend to micro focus too much :)
[07:05:50] <carter> you should do it lazily as needed ;)
[07:06:13] <carter> i should crash
[07:06:14] <carter> night all
[07:06:17] <kvanb> night
[07:06:20] <dbaupp> geomyidae: as much as some people make out, there's not really a Rust v Go battle
[07:06:25] <carter> may you have nights free of double free's
[07:06:29] <dbaupp> they're targeted at different things
[07:06:30] <carter> yeah
[07:06:33] <carter> very different htings
[07:06:45] <kvanb> Go sounds like a better php
[07:06:46] <carter> haskell vs go, is a thing, go loses on the axes i care about :)
[07:06:48] <kvanb> but i haven't used it yet
[07:06:50] <carter> kvanb: exactly
[07:07:00] <carter> it mandates more engineering planning than php
[07:07:08] <carter> and has tooling tuned for large teams 
[07:07:09] <luz> I write a lot of go, and I expect to write a lot of rust for different kinds of programs
[07:07:13] <kvanb> php projects that last long enough always turn to shit
[07:07:18] <kvanb> doesnt matter how much engineering you do
[07:07:27] <carter> luz: you may like haskell as a go alternative :)
[07:07:35] <carter> though go is neat in its own way
[07:08:01] <carter> night
[07:08:11] <luz> night
[07:08:30] <kvanb> night
[07:08:35] <dbaupp> night
[07:08:37] *** Quits: FreeFull (freefull@moz-9794470C.as13285.net) (Quit: )
[07:08:41] <kvanb> night :P
[07:09:31] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[07:09:45] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[07:09:52] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[07:10:08] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[07:10:28] *** Quits: klaus (koz@moz-E49E7C4B.hsd1.wa.comcast.net) (Quit: klaus)
[07:10:46] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[07:11:45] *** Joins: juszczakn (nick@moz-531BAF0B.dyn.centurytel.net)
[07:12:06] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[07:12:39] <luz> ls should be a shell builtin to minimize execution time
[07:14:56] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: Textual IRC Client: www.textualapp.com)
[07:15:58] <kvanb> Theres an idea
[07:16:02] <kvanb> rust shell called rush
[07:16:04] <kvanb> it even sounds performant
[07:17:06] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[07:18:54] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[07:19:01] <luz> i use too many zsh features
[07:19:08] <luz> i'll see if i can write a plugin instead
[07:19:22] <eddyb> frish
[07:19:37] <kvanb> o-O
[07:20:10] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[07:20:11] *** Joins: cheese_cast (raspinudo@moz-FB14AB08.hsd1.ca.comcast.net)
[07:20:58] <luz> rash
[07:21:22] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[07:26:29] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[07:26:36] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[07:27:23] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[07:29:50] *** Quits: jld (jld@moz-B94C75AD.xlerb.net) (Ping timeout)
[07:31:54] *** Quits: nealla (nealla@moz-8609DA39.members.linode.com) (Ping timeout)
[07:31:56] *** Joins: benjamin_ (benjamin@moz-8808859.dip0.t-ipconnect.de)
[07:31:56] *** Quits: cantsin (cantsin@moz-F99612CC.members.linode.com) (Ping timeout)
[07:35:36] *** Joins: nealla (nealla@moz-8609DA39.members.linode.com)
[07:36:00] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[07:36:37] *** Joins: cantsin (cantsin@moz-F99612CC.members.linode.com)
[07:38:17] *** Joins: jld (jld@moz-B94C75AD.xlerb.net)
[07:39:26] *** Quits: juszczakn (nick@moz-531BAF0B.dyn.centurytel.net) (Quit: Leaving.)
[07:39:31] <myname> rush +1
[07:42:03] <luz> rush is already used for at least two shells :(
[07:42:50] <Yurume> rustle... is occupied.
[07:43:38] <klutzy> bikesh :p
[07:43:53] <Yurume> grepping for r.*u.*s.*t gives a few candidates: robust, request, roughest etc.
[07:44:06] *** Joins: victorporof (victorporo@5EC92F85.71368607.9B1E38F4.IP)
[07:44:26] <myname> roughest :D
[07:44:29] <luz> http://nellardo.com/lang/haskell/hash/ all the language name plus "sh" ones i can think of have already been done
[07:44:45] <Yurume> rustsh
[07:45:12] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[07:46:30] <bjz> barush
[07:47:12] <dbaupp> crush
[07:47:13] *** Joins: bheylin_ (brianheyli@C709828D.E7BADBF1.B0C2132F.IP)
[07:47:19] <bjz> (Bourne-again rust shell)
[07:47:36] <myname> zrush
[07:48:31] <Yurume> zbrush
[07:48:34] <Yurume> brush
[07:48:35] <luz> `grep -rh '\(^r.*u\|ru\).*sh$' /usr/share/dict | sort | uniq`: http://sprunge.us/XUcN
[07:48:57] <myname> brush :D
[07:48:57] *** Joins: Ferreus (ferreus@moz-B1EB17E5.dip0.t-ipconnect.de)
[07:48:59] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[07:49:36] <bjz> rubbish
[07:49:46] <dbaupp> fRUmpiSH
[07:50:07] <bjz> trumpet fish
[07:50:37] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[07:51:53] <luz> prudish
[07:52:00] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[07:52:22] <luz> found it
[07:53:41] *** Quits: bheylin_ (brianheyli@C709828D.E7BADBF1.B0C2132F.IP) (Ping timeout)
[07:57:22] *** Joins: lenstr (lenstr@88ED11E5.9636F313.7A27613B.IP)
[07:57:40] *** Quits: cheese_cast (raspinudo@moz-FB14AB08.hsd1.ca.comcast.net) (Ping timeout)
[07:57:55] *** Joins: pzol (pzol@322A273C.DEB41A6D.AADC76B.IP)
[07:58:50] *** Joins: recrack (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[07:59:47] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[08:00:28] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[08:00:38] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[08:01:31] *** Quits: DasIch (dasich@moz-5EDA591.de) (Ping timeout)
[08:03:36] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[08:03:40] *** Quits: lenstr (lenstr@88ED11E5.9636F313.7A27613B.IP) (Client exited)
[08:04:02] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[08:08:10] *** Joins: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP)
[08:09:06] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[08:09:12] *** Joins: sk (sk@28D4FD6F.29248532.33B96495.IP)
[08:09:12] *** Joins: Ms2ger (Ms2ger@125CFB8C.2C129564.3773EA9F.IP)
[08:09:40] *** Joins: Soler (Soler@moz-93EA8A7.lightspeed.mssnks.sbcglobal.net)
[08:10:20] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[08:11:22] *** Quits: Soler (Soler@moz-93EA8A7.lightspeed.mssnks.sbcglobal.net) (Ping timeout)
[08:11:24] *** Joins: cheese_cast (raspinudo@moz-FB14AB08.hsd1.ca.comcast.net)
[08:16:27] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[08:16:31] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[08:17:15] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[08:17:36] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[08:19:23] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[08:20:36] *** Joins: z0w0 (zack@moz-176E5D6A.lns10.cha.bigpond.net.au)
[08:21:10] <pzol> hi there, how can I iterate over an enum? or get a vector of all enum values? as in enum Monsters { Orc, Goblin } ??
[08:24:00] *** Joins: Lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net)
[08:24:39] *** Lurk_ is now known as lurk_
[08:24:49] <magg> whats the char for space in rust
[08:25:15] <Ms2ger>  
[08:26:07] <myname> :D
[08:26:50] <magg> >_>
[08:26:52] <myname> i don't quite get the question
[08:27:24] <magg> how to validate a space, like in c or java with ' '
[08:27:38] <myname> ' '?
[08:27:45] <Eridius> magg: ' ' is the char representing ASCII code 32
[08:28:01] <Ms2ger> The char for space is a space
[08:28:06] <magg> kk
[08:28:25] <myname> what makes you think it would be something completely different?
[08:29:17] *** flaper87|afk is now known as flaper87
[08:30:53] *** Quits: bougyman (bougyman@moz-C8C4EF5D.uvs.rcsntx.sbcglobal.net) (Ping timeout)
[08:31:02] *** Quits: Crandom (Crandom__@moz-56264BBC.sx) (Quit: ZNC - http://znc.in)
[08:31:16] *** Joins: deggert (deggert@moz-2C16B246.host.de.colt.net)
[08:31:57] *** Joins: bougyman (bougyman@moz-C8C4EF5D.uvs.rcsntx.sbcglobal.net)
[08:32:11] *** Quits: recrack (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:32:44] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[08:32:53] <magg> just asking
[08:32:58] *** Quits: magg (magg@E7C99A0E.9441A742.EB08AFC4.IP) (Quit: magg)
[08:34:50] *** Joins: benjamin__ (benjamin@moz-6503217C.dip0.t-ipconnect.de)
[08:35:22] *** Quits: benjamin_ (benjamin@moz-8808859.dip0.t-ipconnect.de) (Ping timeout)
[08:35:39] <Yurume> pzol: for now no, you need a list of all enums like [Orc, Goblin] somewhere. there is a related issue: https://github.com/mozilla/rust/issues/5417
[08:36:51] <pzol> Yurume: thanks! that's exactly what I'd need
[08:38:05] *** Quits: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP) (Quit: c-a)
[08:38:21] <myname> pzol: i like your example, what are you doing?
[08:38:35] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[08:38:53] <pzol> myname trying some kind of rogue like console game, just for learning rust ;)
[08:38:57] *** Joins: vgeddes (vincent.ge@moz-4C6314FC.dsl.mweb.co.za)
[08:39:17] <myname> pzol: thought about that, too
[08:39:24] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[08:39:33] *** Joins: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP)
[08:39:39] <myname> how are you doing it atm?
[08:39:58] <pzol> myname the enumeration? 
[08:40:11] <myname> more like the visualisation
[08:40:18] <kvanb> dbaupp: I thought crates were removed
[08:40:24] <kvanb> servo still uses them?
[08:40:26] <kvanb> Is this just cruft?
[08:40:32] <pzol> myname aaaa... like the classic rogue, ascii chars
[08:40:55] <Yurume> pzol: if you are concerned about the integrity of the list, you can use a macro to auto-generate `all()` method.
[08:40:56] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[08:40:59] <myname> pzol: you might consider termbox
[08:41:23] <pzol> Yurume: cool, have any example at hand?
[08:41:32] <myname> i wrote bindings for 0.8, not sure if they still work
[08:41:38] <Yurume> i.e. define_enum!(Monster { Orc, Goblin }) -> enum Monster { Orc, Goblin } impl Monster { pub fn all() -> &'static [Monster] { [Orc, Goblin] } }
[08:41:39] <pzol> myname thx... will have a look at that!
[08:41:58] <Yurume> I don't see any difficulty of writing such macro
[08:42:14] <Yurume> (though there are some issues with 0.8, so you'd better use the master)
[08:42:42] <Yurume> if you are interested, search for "multiple items in macro" in the issue tracker :)
[08:42:48] <pzol> Yurume thanks! will try that!
[08:42:56] <dmz> cmr: you proposed a PR for me, here it is: https://github.com/mozilla/rust/pull/11369
[08:43:53] *** Quits: benjamin__ (benjamin@moz-6503217C.dip0.t-ipconnect.de) (Ping timeout)
[08:44:16] <myname> pzol: do you have some clever idea for your game?
[08:45:20] <pzol> myname nope, not yet, as I said, I'm rather trying to learn some rust, will try some of the stuff from here http://stevelosh.com/blog/2012/07/caves-of-clojure-01/
[08:47:10] <myname> dwarf fortress <3
[08:47:18] <ecl3ctic> I'm going to learn Rust by making a voxel game  :)
[08:47:37] <dmz> there is one BTW, have you checked q^3?
[08:47:51] <dmz> also, what game do you want to create ecl3ctic?
[08:47:59] <ecl3ctic> I already had a bit of stuff implemented in D, so it will be interesting to see how much nicer it turns out in Rust
[08:49:15] <ecl3ctic> dmz: I'm going to try and make a voxel game that is a lot more of a physics toy, with independent voxel objects so you could build vehicles for example
[08:49:34] <dmz> ah, minecraft idea development
[08:50:01] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[08:50:21] <kvanb> boo
[08:50:37] <ecl3ctic> I would say inspired :)
[08:50:52] <ecl3ctic> but I'm mostly just interested in seeing how large scale things can be done
[08:51:03] <kvanb> I'd really like someone to make a MC server in rust
[08:51:10] <kvanb> it'd really put it to production testing
[08:51:15] <dmz> ecl3ctic, pzol: good luck guys! I'll be happy to see more games in rust, preferably in a semi-completed state. You are lucky to jump on the train now so that rust (hopefully) doesn't change to heavily on the way. Also, make sure to check https://github.com/mozilla/rust/wiki/Computer-Graphics-and-Game-Development
[08:51:38] <kvanb> im working on a runtime to game engine in rust
[08:51:39] <kvanb> :)
[08:51:43] <pzol> dmz thanks :)
[08:52:05] <Yurume> and also check #rust-gamedev out ;)
[08:52:09] *** Quits: sk (sk@28D4FD6F.29248532.33B96495.IP) (Quit: Leaving)
[08:52:41] <dmz> kvanb: nice! btw, how are you enjoying the non-conflicting name so far? I like dmz even more than kvark, esp since it's composed from my real name ;)
[08:53:01] <kvanb> I think I've seen you around with dmz before
[08:53:07] <kvanb> either that, or you're impersonating someone else
[08:53:08] <kvanb> XD
[08:53:12] <dmz> doh
[08:53:22] <kvanb> I think theres a dmz in #ghc or #haskell
[08:53:28] <dmz> shoot
[08:53:35] <kvanb> I could be wrong ofcourse
[08:53:37] <dmz> I'm not going to yield that name
[08:53:51] <dmz> anyways, what is the engine you want to create?
[08:54:04] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[08:54:08] <dmz> (sorry, already working on?)
[08:54:12] <kvanb> I was writing a runtime for GameMaker in C++ so that I can convert GM projects to compiled binaries
[08:54:21] <kvanb> Im scrapping the C++ runtime for a Rust runtime
[08:54:29] <Yurume> I was builting an engine for music video games.
[08:54:31] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[08:54:34] <kvanb> its extern-C by default (I think, anyway) and it's more llvm-ey than C++ in general
[08:55:21] <dmz> Yurume: wow, that sounds hot
[08:55:56] <Yurume> dmz: with a multiplatform support (d'oh!)
[08:56:02] <Yurume> which is so painful
[08:56:15] <dmz> what's your repo?
[08:56:26] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[08:56:29] <Yurume> https://github.com/snrs/sonorous
[08:56:51] *** Joins: mpiechotka (mpiechotka@moz-A61AF615.dynamic.mnet-online.de)
[08:57:04] <Yurume> it was originated as an independent implementation of a certain open music video game data format
[08:57:28] <Yurume> in C
[08:57:37] <ecl3ctic> Yurume: you mean music games like Audiosurf?
[08:57:39] <Yurume> and I've rewritten it to Rust over the course of... three months?
[08:58:20] <Yurume> ecl3ctic: rather like Guitar Hero. yeah, I think it's more like a rhythm game (a subgenre of a music game).
[08:58:33] <Yurume> and I seriously suck at making games
[08:58:51] <Yurume> which explains the current state: functional but non-playable. ;)
[08:58:58] <dmz> lol, my thoughts as well
[08:59:05] <ecl3ctic> you should make a Rhythm Heaven
[08:59:12] <ecl3ctic> best music-based game ever
[08:59:19] <Yurume> it's great
[08:59:55] <dmz> I enjoyed the hell out of The Sequence, dunno if it's anywhere close to what you are discussing though
[09:00:05] <Yurume> though I don't own a handheld console so my experience with it is limited (mostly with a friend's one)
[09:00:37] <ecl3ctic> there's Rhythm Heaven Fever for the Wii as well
[09:00:38] *** Quits: deggert (deggert@moz-2C16B246.host.de.colt.net) (Ping timeout)
[09:00:58] <Yurume> same for ordinaly consoles ;)
[09:01:04] <ecl3ctic> haha
[09:01:16] <ecl3ctic> those sort of games can only come out of Nintendo
[09:01:17] <Yurume> though I really enjoy playing arcade machines, which are prevalent in Japan and Korea
[09:02:17] *** Joins: deggert (deggert@moz-2C16B246.host.de.colt.net)
[09:03:54] <ecl3ctic> I've gotta buckle down and do some boring JS work now ;(
[09:05:56] <ecl3ctic> dmz: what is The Sequence? All I find is the terrible board game
[09:06:43] <dmz> http://store.steampowered.com/video/200910
[09:06:47] <dmz> sorry, gtg now
[09:07:21] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[09:07:21] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Quit: csherratt)
[09:08:17] <ecl3ctic> oh that looks really interesting
[09:08:18] <ecl3ctic> see you later
[09:12:00] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[09:12:18] *** Joins: benjamin__ (benjamin@moz-6503217C.dip0.t-ipconnect.de)
[09:13:23] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[09:14:28] *** Quits: deggert (deggert@moz-2C16B246.host.de.colt.net) (Quit: deggert)
[09:15:27] *** Joins: ircloggr (nodebot@moz-218B8E8E.compute-1.amazonaws.com)
[09:16:05] *** Quits: ecl3ctic (Mibbit@578C64B6.F0F44EFA.76AE55C1.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:18:01] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[09:18:43] *** Joins: rca (rcatolino@moz-A87C14FE.adsl.proxad.net)
[09:18:56] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[09:19:34] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[09:19:47] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[09:22:31] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Quit: wilmoore)
[09:23:13] *** Joins: bluegreen (zaphood@moz-73D1EA84.compute.is-1.greenqloud.com)
[09:23:44] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[09:24:34] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[09:26:21] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[09:28:01] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Quit: Leaving...)
[09:30:00] *** Joins: espadrine (Thunderbir@moz-6E1AE057.w92-128.abo.wanadoo.fr)
[09:31:55] <dbaupp> kvanb: "crates were removed?" no, we still call the compilation unit a 'crate', but the .rc file extensions is deprecated
[09:32:52] *** Quits: pnathan (Adium@moz-A8921E45.tukw.qwest.net) (Quit: Leaving.)
[09:35:00] *** Joins: DasIch (dasich@moz-5EDA591.de)
[09:35:16] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[09:38:15] *** Joins: sk (sk@28D4FD6F.29248532.33B96495.IP)
[09:39:02] *** Quits: mindcat (mindcat@A619059E.7EE3DE8.F956842C.IP) (Ping timeout)
[09:39:46] <kvanb> oh okay
[09:40:43] *** Quits: espadrine (Thunderbir@moz-6E1AE057.w92-128.abo.wanadoo.fr) (Ping timeout)
[09:40:44] *** Joins: deggert (deggert@moz-2C16B246.host.de.colt.net)
[09:42:42] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[09:45:07] *** Quits: pzol (pzol@322A273C.DEB41A6D.AADC76B.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[09:52:19] *** Joins: cyndis (cyndis@moz-C4357EA7.kapsi.fi)
[09:56:17] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[09:57:04] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[09:59:06] *** Joins: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP)
[09:59:15] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[09:59:32] *** Joins: nkoep (nik@moz-3CF8826C.pool.mediaways.net)
[10:02:21] *** Joins: mib_2ze43u (Mibbit@moz-D9EDADC8.pppoe.yaroslavl.ru)
[10:02:25] *** Joins: aravindavk (aravinda@moz-BD0CADEE.redhat.com)
[10:03:06] *** Quits: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net) (Ping timeout)
[10:04:08] *** Joins: lbdremy_ (lbdremy@1BDCFE9.F212BE6C.CE5E78F6.IP)
[10:07:26] *** Joins: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net)
[10:07:43] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[10:09:56] *** Quits: mib_2ze43u (Mibbit@moz-D9EDADC8.pppoe.yaroslavl.ru) (Quit: http://www.mibbit.com ajax IRC Client)
[10:10:46] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[10:11:01] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[10:11:28] *** Quits: dmz (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com) (Quit: http://www.mibbit.com ajax IRC Client)
[10:12:35] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[10:14:51] *** Joins: oberstet (quassel@moz-FAD446D9.dynamic.mnet-online.de)
[10:15:21] *** Quits: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP) (Quit: c-a)
[10:16:12] *** Quits: zmthy (zmthy@moz-EAA7EAA8.dsl.dyn.ihug.co.nz) (Ping timeout)
[10:17:59] *** Joins: pzol (pzol@322A273C.DEB41A6D.AADC76B.IP)
[10:18:01] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[10:19:50] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[10:21:21] *** Quits: cheese_cast (raspinudo@moz-FB14AB08.hsd1.ca.comcast.net) (Ping timeout)
[10:23:01] *** Joins: zmthy (zmthy@moz-EAA7EAA8.dsl.dyn.ihug.co.nz)
[10:23:47] *** Quits: fairfieldt (fairfieldt@moz-D8998E1C.xen.prgmr.com) (Ping timeout)
[10:23:47] *** Quits: cantsin (cantsin@moz-F99612CC.members.linode.com) (Ping timeout)
[10:24:08] *** Quits: nealla (nealla@moz-8609DA39.members.linode.com) (Ping timeout)
[10:24:26] *** Quits: zslayton (Mibbit@81EB2473.5F4BC84E.66C78B76.IP) (Ping timeout)
[10:24:34] *** Quits: jld (jld@moz-B94C75AD.xlerb.net) (Ping timeout)
[10:24:53] *** Quits: xoebus (xoebus@moz-A192BC54.xen.prgmr.com) (Ping timeout)
[10:24:53] *** Quits: Eridius (kevin@moz-533B0DB4.us) (Ping timeout)
[10:25:01] *** Quits: nyux (nyux@moz-1CEE0DD2.aiiane.com) (Ping timeout)
[10:25:01] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[10:25:51] *** Quits: zmthy (zmthy@moz-EAA7EAA8.dsl.dyn.ihug.co.nz) (Ping timeout)
[10:27:31] *** Joins: nealla (nealla@moz-8609DA39.members.linode.com)
[10:27:43] <pzol> what happened to the rust command in head?
[10:27:53] <kimundi> got removed
[10:28:11] *** Joins: xoebus (xoebus@moz-A192BC54.xen.prgmr.com)
[10:28:13] *** Joins: Eridius (kevin@moz-533B0DB4.us)
[10:29:36] *** Joins: nyux (nyux@moz-1CEE0DD2.aiiane.com)
[10:29:42] <pzol> kimundi figured that... any easy replacement for 'rust run' ?
[10:29:49] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[10:30:00] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[10:30:08] *** Joins: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com)
[10:30:14] <kimundi> not really: rustc foo.rs && ./foo
[10:30:52] *** Joins: cantsin (cantsin@moz-F99612CC.members.linode.com)
[10:30:55] <pzol> kimundi thx
[10:30:55] *** Joins: fairfieldt (fairfieldt@moz-D8998E1C.xen.prgmr.com)
[10:31:35] *** Quits: mpiechotka (mpiechotka@moz-A61AF615.dynamic.mnet-online.de) (Ping timeout)
[10:32:01] <pzol> can sb point me to where define_enum! is defined? or some examples for that??
[10:32:36] <kimundi> uhm, where is that used?
[10:32:49] <kimundi> I don'T know about a general define_enum! macro
[10:33:13] <pzol> got this example: define_enum!(Monster { Orc, Goblin }) -> enum Monster { Orc, Goblin } impl Monster { pub fn all() -> &'static [Monster] { [Orc, Goblin] } }
[10:33:14] *** Joins: jld (jld@moz-B94C75AD.xlerb.net)
[10:34:11] <kimundi> where did you get that example, and what does it mean?
[10:34:39] <pzol> kimundi what I want is to define an enum an have a function returning all the types (Orc, Goblin) defined in it 
[10:35:21] <kimundi> I'd assume from it that it is about a macro that defined a enum and a impl with a all() method for it - I'm just not clear if said enum definition exists somewhere, or if you need to write it yourself
[10:36:00] *** Quits: KindOne (KindOne@AD0BA1B6.2171A688.34F73994.IP) (Ping timeout)
[10:36:05] <pzol> e.g. Monsters { Orc, Goblin }; for monster in Monsters { println!(":?", monster.to_s()}
[10:36:21] <pzol> looks like it doesn't exist
[10:37:23] <bjz> you'd have to write that yourself
[10:37:51] *** Joins: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:38:08] <bjz> pzol: what is your use case?
[10:38:15] <kimundi> Its easy enough to define on your own: Heres the macro tutorial: http://static.rust-lang.org/doc/master/guide-macros.html ;)
[10:38:25] <bjz> there might be a more ideomatic way to do things
[10:38:54] <pzol> bjz enum  Monsters { Orc, Goblin }; for monster in Monsters { println!("{:?}", monster.to_s()}
[10:39:36] <bjz> enums in rust are a little confusing in their naming - they are not simply single 'tags' like in Java or C, they are full blown sum types
[10:40:05] *** Joins: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca)
[10:40:08] *** Joins: KindOne (KindOne@moz-318F1E02.dynamic.ip.windstream.net)
[10:40:09] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[10:40:18] <bjz> the issue is, you could have something like, `enum A { A1(int), A2(~str) }`
[10:40:19] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[10:40:22] <kimundi> Still, his usecase is possible
[10:40:32] <bjz> how would you define .all() for that?
[10:40:33] *** Joins: zmthy (zmthy@moz-EAA7EAA8.dsl.dyn.ihug.co.nz)
[10:40:54] <kimundi> You wouldn't - this would only work unit-like enum variants
[10:41:08] <bjz> kimundi: it is, I'm just explaining why it's not inbuilt
[10:41:18] <kimundi> Ah, sure
[10:41:36] <kimundi> Sorry
[10:41:54] <bjz> bjz: I think I'm blurring pzol's questions on here with the ones they made on freenode #rust
[10:42:03] <bjz> *kimundi
[10:42:16] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[10:42:51] <bjz> pzol: it might be easier just to define that method yourself, then going to the trouble of defining a macro
[10:43:02] <bjz> pzol: how often are you going to use it?
[10:44:07] <pzol> bjz well... probably not too often, but the code repetition is hurting my eyes .... 
[10:44:29] <bjz> pzol: could you gist an example of what you are doing?
[10:44:33] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[10:44:35] <bjz> there might be a better way
[10:45:58] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Connection reset by peer)
[10:46:10] <pzol> bjz don't have much more... just came up with the example above and wanted to see if that works... seems I'm kind of spoiled working in ruby for the last 4yrs and having good reflection on everything
[10:46:39] <bjz> yeah, Rust is a very different language from Ruby, but stick with it
[10:46:54] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[10:47:25] <pzol> bjz I know... and some stuff is great, other stuff stops you in the tracks for hours, because you can't do what you're used to do, until you change your way of thinking how to solve problems
[10:47:45] <pzol> let's assume I have the enum Monster { Orc, Goblin } and I want to spawn a new random monster.... 
[10:47:55] <bjz> pzol: basically Rust has really horrible reflection :) but it makes up for it in other ways :)
[10:48:02] <bjz> ah
[10:48:13] <pzol> I mean I can define the enum AND a vector  with all the values... but that's code duplication
[10:48:42] <kimundi> Btw, isn't there a enum from/to integer derivable trait?
[10:48:50] *** Joins: Skrylar_ (Skrylar@moz-F692F728.austin.res.rr.com)
[10:48:57] <bjz> kimundi: that's for C-style enums
[10:49:03] <pzol> bjz: yeah, decent reflection is awsome for learning, it can help you around missing  / inacurate documentation, which is a huge problem with rust
[10:49:26] <kimundi> This enum type is technically a c-style enum :P
[10:49:38] <bjz> pzol: it's not really what staticly typed langs excel at though
[10:50:10] <bjz> pzol: there is #[deriving(Rand)] I think
[10:50:21] <pzol> pzol yeah, but C# and java have a decent reflection, even if it's not too speedy
[10:50:45] <bjz> java is really dynamic and jitted
[10:51:30] <eddyb> that "all" is actually quite easy to derive
[10:51:44] <pzol> eddyb how ? :)
[10:52:00] <eddyb> the biggest problem is making sure you don't implement it for "int" by accident
[10:52:22] <eddyb> it work very nicely with nested enums
[10:52:41] <bjz> eddyb: sounds dangerous :P
[10:52:55] <kimundi> Answering the original question: Defining a macro for it would look like this: https://gist.github.com/Kimundi/8297698 - but thats not necessarly the most rustic way to do it, though it wouldn't really be imperformant
[10:54:02] <Skrylar_> bjz: eeh i disagree, *static* reflection is very possible and helpful
[10:54:16] *** Joins: moostik (Icedove@moz-F5DBFF76.w83-202.abo.wanadoo.fr)
[10:54:28] <bjz> Skrylar_: feel free to prove me wrong, I very well might be
[10:54:30] <Skrylar_> especially with a good macro/template system, you can nuke a lot of boilerplate with it (e.g. database objects, packets)
[10:54:45] <pzol> kimundi thx ;)
[10:55:04] <eddyb> Skrylar_: we'll have procedural macros soon :D
[10:55:09] <Skrylar_> bjz: i mentioned before about D's static reflection to have a template analyze a class, retrieve every function of that class which is public, generate a Lua wrapper, and emit the necessary D code for those functions to be bound to a Lua state
[10:55:25] <Skrylar_> Which is the most time consuming part of using Lua in any project, ... a D macro can reduce it to a simple mixin blah!()
[10:55:54] <kimundi> Ideally we should be able to define an attribute that runs at the right time to allow the same stuff
[10:56:00] <eddyb> OMG how did I not see that?
[10:56:18] <eddyb> Skrylar_: that's how I can make a Rust-v8 bridge
[10:56:24] <Skrylar_> eddyb: those don't help without compile-time reflection
[10:57:10] <Skrylar_> eddyb: and since concat_idents! is broken, you can't do it elegantly right now even with retyping the parameters
[10:57:27] *** Joins: mindcat (mindcat@2BB9C671.D38CD150.57E3C596.IP)
[10:58:02] <eddyb> Skrylar_: *procedural* as in, Rust code running on the AST
[10:58:13] <Skrylar_> so, haXe macros
[10:58:35] <eddyb> we already have hygienic pattern-matching macro rules in the language ;)
[10:58:42] <Skrylar_> (they get the AST as an enum, and haxe enums are pretty much the same thing as rust enums)
[10:59:04] <eddyb> yeah, I think I remember that
[10:59:21] <Skrylar_> its a neat language but its a little clunky/irritating to use sometimes
[10:59:23] <bjz> pzol: https://gist.github.com/bjz/63d75082e816ebaddfb5
[10:59:42] <bjz> pzol: example of using #[deriving(Rand)] on enums :)
[10:59:45] <Skrylar_> haxe/windows does this whole haxe-to-C++-to-slow-C++-compile-to-exe :(
[10:59:59] <pzol> bjz Sweet! Thanks a lot!
[11:00:30] <bjz> Skrylar_: yeah, it would be cool to have something like that in Rust
[11:00:54] <bjz> Skrylar_: ie. the D reflection
[11:00:59] <kimundi> bjz: Nice - now if only you could limit the headcount a bit :P
[11:01:03] *** Quits: jackneill (jackneill@moz-A33F8E90.pool.digikabel.hu) (Ping timeout)
[11:01:07] <bjz> kimundi: yeah :(
[11:01:20] <Skrylar_> bjz: if they work like haxe macros as eddyb was suggesting, then you can; especially if you can put your own attributes in
[11:01:20] *** Quits: mindcat (mindcat@2BB9C671.D38CD150.57E3C596.IP) (Ping timeout)
[11:01:21] <bjz> kimundi: need ranged types :(
[11:01:23] <kimundi> Maybe a newtype of u8, with a custom Rand impl?
[11:01:48] <Skrylar_> kimundi: i couldn't get newtypes to work :/ it would let me intermix the integer type with regular numbers :(
[11:01:48] <kimundi> of course range types would be even better
[11:02:12] <kimundi> Skrylar_: hu? That sounds strange
[11:02:22] <bjz> Skrylar_: that's the point, they are different types, no?
[11:02:29] <Skrylar_> bjz: re-read
[11:02:33] <Skrylar_> it *allowed* it
[11:02:40] <kimundi> Code example?
[11:02:44] <bjz> o_O
[11:02:53] <Skrylar_> type IAmAFlag = u8
[11:02:57] <kimundi> maybe just a autoderef gone wrong?
[11:03:01] <bjz> Skrylar_: before or after the removal of derefing?
[11:03:03] <eddyb> that's not a newtype, that's an alias, Skrylar_
[11:03:05] <kimundi> well, thats not a newtype
[11:03:10] <bjz> ohh
[11:03:11] <Skrylar_> eddyb: i couldn't find the syntax for newtypes
[11:03:12] <eddyb> which we should fix
[11:03:19] * bjz hates the `type` keyword
[11:03:19] <eddyb> Skrylar_: struct Foo(uint);
[11:03:24] <kimundi> struct IAmAFlag(u8) // this is a newtype
[11:03:27] <Skrylar_> i wanted to use a newtype to emulate a restricted bit field
[11:03:30] <Skrylar_> flags
[11:03:51] <eddyb> bjz: maybe we should reuse "use" for type aliases or something
[11:04:04] <Skrylar_> i need to write a proper generic for this though, like Qt uses :/
[11:04:05] <bjz> eddyb: I think there are issues around that
[11:04:07] <eddyb> and use "type" instead of "struct"
[11:04:14] <bjz> eddyb: yeah, I wish that
[11:04:23] *** Joins: TisButMe (Mibbit@moz-40861B51.w90-29.abo.wanadoo.fr)
[11:04:24] <Skrylar_> EnumSet in extra "almost" does it, but it doesn't work if you specifically need the enums to have specific bits
[11:04:32] <bjz> eddyb: and merge the enum and struct keywords somehow
[11:04:37] <eddyb> bjz: that will annoy C/C++ people and make others (Haskell?) happy
[11:04:56] <bjz> eddyb: idris has it right when it comes to ADTs
[11:05:05] <eddyb> yeah, well, we're not idris
[11:05:22] <bjz> as in having only one keyword
[11:05:36] <eddyb> Skrylar_: can't you assign values to the enum variants?
[11:05:43] <kimundi> eddyb: Imo the current "use" and "type" have enough overlap that unifiying them would be worthwhile... But the devs responsible for the module system think that would cause problems, which to this day I don't really understand :|
[11:05:49] <Skrylar_> eddyb: that doesn't work for bit masks
[11:06:02] <bjz> kimundi: do we have an issue for it?
[11:06:14] <Skrylar_> eddyb: and EnumSet uses the value as the index (1-N), not the bit
[11:06:14] <eddyb> Skrylar_: riiight. we should do something similar to C++11 about enums
[11:06:35] <Skrylar_> enumset actually does the service of Pascal sets
[11:06:35] <eddyb> Skrylar_: and then allow enums of ranges
[11:06:48] <Skrylar_> which is nice, but i need specific bits to be C-compatible
[11:07:08] <Skrylar_> not that hard to write, i'm just frayed from handfuls of maximally tedious binding to C.. lol
[11:07:23] *** Quits: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca) (Quit: canhtak)
[11:08:13] <kvanb> anyone know how to use Rust with Travis?
[11:08:21] *** Joins: cheese_cast (raspinudo@moz-FB14AB08.hsd1.ca.comcast.net)
[11:08:39] <TisButMe> Does someone have any idea why running rustdoc on this (https://github.com/TisButMe/rust-algo/blob/master/LinkedList/linked_list.rs) doesn't produce any HTML output, only JS+CSS ? Testing rustdoc using the example in the doc works
[11:09:23] <kimundi> bjz: Not sure - I just went through my issue list and didn't find any
[11:09:55] <kvanb> rust-ci, got it!
[11:10:35] <bjz> kvanb
[11:10:41] <kvanb> hi
[11:10:41] <bjz> kvanb: <3 travis
[11:10:48] <kvanb> yeah its cool
[11:10:56] <kvanb> I was afraid the 12.04 LTS thing would mean it'd get like rust 0.1
[11:11:04] <kvanb> but rust-nightly looks awesome
[11:11:08] <bjz> rust-ci automatically check your stuff nightly
[11:11:22] <bjz> make sure you have the .travis.yml
[11:11:25] <kvanb> now I just need a good automatic build system
[11:11:25] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[11:11:28] <kvanb> like cmake
[11:11:33] <bjz> :(
[11:11:33] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[11:11:33] <kvanb> I wonder if someone has written cmake/rust bindings
[11:12:01] <dbaupp> kvanb: https://mail.mozilla.org/pipermail/rust-dev/2014-January/007659.html
[11:12:25] <rca> TisButMe: only the items declared pub are included in the docs.
[11:12:52] <Skrylar_> eddyb: why bother doing releases if they're never supported :)
[11:13:04] <TisButMe> rcs: thanks !
[11:13:14] <bjz> Skrylar_: gives the devs something to work towards
[11:13:19] <kvanb> oh sweet
[11:13:27] <dbaupp> Skrylar_: PR opportunity
[11:13:30] <bjz> Skrylar_: but it should be made more clear that they are snapshots
[11:13:33] * dbaupp shrugs
[11:14:11] <bjz> Skrylar_: but yeah, PR is also important. Doesn't matter how good your lang is if nobody knows about it or uses it.
[11:14:26] <bjz> Skrylar_: I mean, how did you find out about Rust?
[11:15:05] <bjz> I found out on Hacker News when the 0.3 press release was posted
[11:15:21] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[11:15:25] *** Joins: Crandom (Crandom__@moz-56264BBC.sx)
[11:15:26] *** Joins: mindcat (mindcat@3BBA730B.14B01478.F956842C.IP)
[11:15:40] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[11:18:13] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[11:18:53] *** Joins: espadrine (Thunderbir@moz-6E1AE057.w92-128.abo.wanadoo.fr)
[11:19:05] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Connection reset by peer)
[11:19:29] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[11:20:01] *** Quits: lbdremy_ (lbdremy@1BDCFE9.F212BE6C.CE5E78F6.IP) (Ping timeout)
[11:20:35] *** Joins: lbdremy_ (lbdremy@1BDCFE9.F212BE6C.CE5E78F6.IP)
[11:21:11] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[11:22:29] *** Quits: lbdremy_ (lbdremy@1BDCFE9.F212BE6C.CE5E78F6.IP) (Ping timeout)
[11:23:45] <Skrylar_> bjz: through a forum, someone mentioned Rust and nimrod
[11:24:14] <Skrylar_> all though i tend not to find things through hacker news; don't you have to work for one of their sponsored companies to access it normally?
[11:24:35] <lurk_> https://news.ycombinator.com/
[11:25:15] <Skrylar_> oh. never saw the create account button before
[11:25:39] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[11:25:40] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[11:26:08] *** Joins: luisbg (luisbg@moz-C54443AD.baconseed.org)
[11:30:31] <Skrylar_> huh
[11:30:41] <Skrylar_> this article about git destroying someone's data; i've never had it do that
[11:31:23] *** Quits: cheese_cast (raspinudo@moz-FB14AB08.hsd1.ca.comcast.net) (Ping timeout)
[11:32:17] <Skrylar_> oh. thats why. he was trying to merge changes with uncommitted data and it lost the uncommitted data; it didn't actually "destroy" history
[11:32:34] *** Joins: ofeldt- (ofeldt@moz-C61A8C87.dip0.t-ipconnect.de)
[11:32:42] *** Quits: benjamin__ (benjamin@moz-6503217C.dip0.t-ipconnect.de) (Ping timeout)
[11:33:41] *** Quits: ofeldt (ofeldt@moz-5E23FB72.dip0.t-ipconnect.de) (Ping timeout)
[11:34:06] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[11:36:19] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[11:38:19] *** Joins: lbdremy_ (lbdremy@3F60B96D.F212BE6C.CE5E78F6.IP)
[11:41:31] *** Quits: espadrine (Thunderbir@moz-6E1AE057.w92-128.abo.wanadoo.fr) (Ping timeout)
[11:41:34] *** Joins: Gordon (Mibbit@moz-4A19983C.ip227.fastwebnet.it)
[11:42:40] <kvanb> is rustpkg *ready* to be used?
[11:42:54] <kimundi> Don'T think so
[11:44:05] <eddyb> hehe, this is newer than TWiR http://llvmweekly.org/issue/1
[11:44:48] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[11:45:53] <Skrylar_> kvanb: i would say no, because its too bugged to produce .exe's
[11:46:19] *** Quits: bobthenameless (bobthename@moz-A1BB42C4.dhcp.leds.al.charter.com) (Ping timeout)
[11:50:05] *** Joins: patrikstenmark (sid16326@moz-A42E5B7B.irccloud.com)
[11:51:58] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[11:51:59] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[11:53:14] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[11:54:07] <kvanb> a real shame
[11:54:09] *** Quits: darthdeus (darthdeus@62EE3073.3B96A244.4E88690D.IP) (Connection reset by peer)
[11:54:43] *** Joins: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP)
[11:56:16] <kvanb> KokaKiwi: is there an example for using rust-mk?
[11:56:47] *** Quits: Ferreus (ferreus@moz-B1EB17E5.dip0.t-ipconnect.de) (Ping timeout)
[11:59:59] *** Joins: ggherdov_ (sid11402@moz-E77DEB21.irccloud.com)
[12:00:01] *** Joins: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net)
[12:02:07] <kvanb> Actually scratch that
[12:02:16] <kvanb> KokaKiwi: see PM
[12:02:25] *** Joins: bobthenameless (bobthename@moz-A1BB42C4.dhcp.leds.al.charter.com)
[12:02:34] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Ping timeout)
[12:02:58] *** Joins: mib_f2axtv (Mibbit@690570E4.4697114E.DDC6F5D1.IP)
[12:06:28] *** Joins: vmx (vmx@moz-4CE8921D.dip0.t-ipconnect.de)
[12:08:11] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[12:08:24] <Gordon> i find importing modules and names in Rust is confusing
[12:08:39] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Connection reset by peer)
[12:08:50] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[12:09:37] <bjz> Gordon: I don't think you are alone. It's the best its ever been though.
[12:09:51] <dbaupp> Gordon: what is confusing you about it?
[12:10:25] <Gordon> say I have a file called foo.rs, which defines a struct Foo
[12:10:30] <dbaupp> aatch: (is https://github.com/Aatch/OmegaStabilitySoltutions meant to be "...Solutions"? (sorry for stalking, it popped up on my github feed :P ))
[12:11:06] <Gordon> now if I want to make a Foo in a program, I can import it via "mod foo;" which so far is fine
[12:11:41] <Gordon> but writing "foo::Foo" gets old so I want to import the module into the current namespace
[12:11:45] *** Joins: Ferreus (ferreus@moz-DDB805F5.dip0.t-ipconnect.de)
[12:12:25] <Gordon> as it turns out, I have to write "use foo::Foo;" BEFORE "mod foo;" which makes no sense... anything else doesn't compile for me
[12:12:57] <kimundi> Gordon: Its intentional
[12:13:05] <kimundi> Gordon: Though confusing
[12:13:06] <dbaupp> you can write `fn foo() { bar() } fn bar() {}`, imports are the same.
[12:13:35] <TisButMe> I have rewritten a linked list which doesn't use any @pointer, and is generally more up-to-date that the one in extra, should I submit a PR, or are you guys dealing with actually important stuff ?
[12:13:42] <bjz> dbaupp is... spellcheck
[12:13:46] <kimundi> Gordon: First, a important distinction: "mod foo" _declares_ a module, just like struct Foo; declares a type, or fn foo() delcares a function
[12:14:03] <dbaupp> bjz: \o/
[12:14:24] <bjz> dbaupp: can I make a sublime text plugin for you?
[12:14:33] <dbaupp> bjz: s/for/out of/?
[12:14:45] <bjz> l;ihjdaw;lijh;alsf
[12:14:45] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Ping timeout)
[12:14:51] <kimundi> use lines are imports - they allow you to bind another name in your module tree to a local name in the current module
[12:15:05] <Gordon> wouldn't it make more sense to first declare a module, then import its names?
[12:15:41] *** Quits: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP) (Quit: c-a)
[12:15:42] <kimundi> imports get shaddowed by declaration though - if you write "use foo::Bar; struct Bar;", then the local struct definition wins out. That is the reason why use lines go before declarations
[12:17:09] <kimundi> Gordon: You used to be able to write imports and declarations in arbitrary - but it was more confusing because people expected the shadowing to work in declaration order, which it doesn't
[12:17:14] <Gordon> is there a point of importing names of a module, without declaring it?
[12:17:41] <kvanb> I agree its all confusing
[12:17:51] <kimundi> You can'T import something that is not declared - it doesn'T exist
[12:18:10] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[12:18:17] <kvanb> TBH i liked the idea of crates better than what we have now
[12:18:26] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[12:18:31] <kvanb> where there was one file at the top level somewhere that defined the structure of the entire project
[12:18:41] <kvanb> I can see how thats not helpful sometimes though
[12:18:41] <dbaupp> you can still have that
[12:18:44] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[12:19:05] <kvanb> oh, it still works?
[12:19:08] *** Quits: z0w0 (zack@moz-176E5D6A.lns10.cha.bigpond.net.au) (Client exited)
[12:19:11] <kvanb> How does it work. is it just mod.rs at the top level
[12:19:43] <kvanb> is it common practise?
[12:19:44] <rca> kimundi: but extern mod declarations are before imports. it's still a declaration, so shouldn't it come after the imports?
[12:19:49] *** Joins: WebeWizard (Mibbit@moz-7CCD1DAE.ks.ks.cox.net)
[12:19:54] <WebeWizard> Wiiiizzzaaarrrrd
[12:20:30] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[12:21:16] <dbaupp> kvanb: "the crate file" is just the file you run rustc on
[12:21:30] <dbaupp> kvanb: conventionally lib.rs for libraries and bin.rs for executables
[12:22:01] <kimundi> rca extern mod is not a declaration in that sense - more like a  ixture of mod and use
[12:22:11] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[12:22:16] <kvanb> Oh, I think thats awkward
[12:22:24] <kvanb> I dislike how C does that too
[12:22:49] <kimundi> and - agina - because its most useful to have extern mod be shadowed by use, and use be shadowed by declarations, the order has been fixed that way
[12:22:52] <kvanb> it makes no distinction between a "compilable whole project" and a single module, if you get what I mean
[12:23:49] <kvanb> oh well, it's liveable. Time to keep writing my build system & project structure :P
[12:23:52] <kimundi> kvanb: Well, if "compileable whole project" == "tree of modules", then imo it makes sense to reuse its root module for that
[12:24:00] *** Joins: adridu59 (Mibbit@moz-E7A273CD.ac-paris.fr)
[12:25:01] <adridu59> dbaupp: what do you think about the new pointers tutorial?
[12:26:21] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Ping timeout)
[12:26:22] <dbaupp> adridu59: I think it could emphasise ownership w.r.t. references/borrowed pointers a little more
[12:26:29] <adridu59> it looks good imo but maybe it should make it more clear that owned pointers shouldn't be the "default" choice
[12:27:14] <adridu59> I did only read it in diagonal as of now through
[12:27:34] <kvanb> I'm not convinced
[12:27:50] <Gordon> which new tutorial are you talking about?
[12:27:59] <kvanb> oh, not referring to above
[12:28:12] <kvanb> Take for example a library
[12:28:25] <adridu59> Gordon: https://github.com/mozilla/rust/pull/11364/files#diff-2
[12:28:26] <kvanb> you could arbituarily accidentally, or something, rustc some random part of the source tree
[12:29:01] <adridu59> writing style is quite different from other guides too
[12:29:49] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[12:30:03] <adridu59> but it's a good doc otherwise, pointers explanations for beginners is something that's needed imo (the rust class feedback shows it)
[12:30:31] *** Quits: adridu59 (Mibbit@moz-E7A273CD.ac-paris.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[12:33:31] *** kimundi is now known as zz_kimundi
[12:34:36] <Gordon> somebody who doesn't know what pointers are won't learn anything from the tutorial
[12:35:20] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[12:36:49] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[12:38:07] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[12:43:19] *** Quits: bluegreen (zaphood@moz-73D1EA84.compute.is-1.greenqloud.com) (Ping timeout)
[12:44:18] *** Quits: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net) (Quit: Leaving.)
[12:44:56] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[12:46:23] *** Joins: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP)
[12:47:53] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[12:48:25] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[12:49:59] *** Quits: aravindavk (aravinda@moz-BD0CADEE.redhat.com) (Quit: Leaving)
[12:50:51] *** Joins: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net)
[12:53:20] *** Quits: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net) (Quit: Leaving.)
[12:53:28] *** Quits: Ferreus (ferreus@moz-DDB805F5.dip0.t-ipconnect.de) (Ping timeout)
[12:54:23] *** Quits: mib_f2axtv (Mibbit@690570E4.4697114E.DDC6F5D1.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:56:05] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[12:56:26] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[12:58:21] *** Joins: bluegreen (zaphood@EEE9EC9D.10726BB3.8CAEFE8D.IP)
[13:01:12] *** Quits: bobthenameless (bobthename@moz-A1BB42C4.dhcp.leds.al.charter.com) (Ping timeout)
[13:01:56] *** Joins: jadbaires (jadrian@moz-9AE9F7C5.dsl.telepac.pt)
[13:05:46] *** Joins: darthdeus (darthdeus@62EE3073.3B96A244.4E88690D.IP)
[13:09:54] *** Quits: jadbaires (jadrian@moz-9AE9F7C5.dsl.telepac.pt) (Quit: Konversation terminated!)
[13:10:01] *** Joins: jadbaires (jadrian@moz-9AE9F7C5.dsl.telepac.pt)
[13:10:10] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[13:10:47] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[13:11:30] *** Joins: themgt (themgt@moz-83F07CDA.cm.vtr.net)
[13:13:11] *** zz_kimundi is now known as kimundi
[13:13:33] *** Quits: KindOne (KindOne@moz-318F1E02.dynamic.ip.windstream.net) (Ping timeout)
[13:13:37] *** Parts: kvanb (kvanb@moz-CDB93B52.lnse3.win.bigpond.net.au) ()
[13:14:14] *** Joins: KindOne (KindOne@moz-318F1E02.dynamic.ip.windstream.net)
[13:15:53] *** Quits: zmthy (zmthy@moz-EAA7EAA8.dsl.dyn.ihug.co.nz) (Ping timeout)
[13:16:25] *** Joins: dew1 (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[13:16:27] *** Joins: KindTwo (KindOne@moz-318F1E02.dynamic.ip.windstream.net)
[13:16:29] *** Quits: KindOne (KindOne@moz-318F1E02.dynamic.ip.windstream.net) (Connection reset by peer)
[13:17:35] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[13:17:43] *** KindTwo is now known as KindOne
[13:18:10] *** Quits: dew1 (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[13:18:41] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[13:19:10] *** Joins: benjamin__ (benjamin@moz-6503217C.dip0.t-ipconnect.de)
[13:19:18] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[13:19:25] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Connection reset by peer)
[13:19:55] *** Joins: bobthenameless (bobthename@moz-A1BB42C4.dhcp.leds.al.charter.com)
[13:20:14] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[13:21:04] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[13:21:19] *** jorendorff_away is now known as jorendorff
[13:21:20] *** Joins: [squiddy] (squiddy@moz-B6B9C896.adsl.alicedsl.de)
[13:25:08] *** Joins: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP)
[13:27:01] <pzol> I have #[feature(macro_rules)] at the top level of a mod file, still I get `note: add #[feature(macro_rules)] to the crate attributes to enable` (in 0.9)
[13:27:35] <pzol> anybody ideas how to fix that??
[13:27:43] <bstrie> pzol: did you remember to put a semicolon after it
[13:28:00] <bstrie> pzol: the semicolon rules on attributes are dumb and we're changing them
[13:28:17] <pzol> bstrie I didn't thanks!
[13:28:25] <bstrie> so please bear with us until then :P
[13:28:42] <dbaupp> bstrie: is anyone working on the change?
[13:30:04] <Skrylar_> bleh. i hate the weird "&~thing" types
[13:30:18] <bstrie> dbaupp: well... I *think* we're holding off on that change because we want to batch it together with the greater changes to attribute syntax
[13:30:28] <bstrie> dbaupp: which *could* tentatively involve replacing the # with @
[13:30:35] <bstrie> but of course that requires removing @ first
[13:30:38] <dbaupp> bstrie: I meant is anyone working on attribute syntax
[13:30:40] <dbaupp> but ok
[13:30:41] <dbaupp> yeah
[13:31:18] <bstrie> I don't think it would be too hard to do, would just be a parser change
[13:31:52] <dbaupp> in theory, yeah
[13:32:20] <pzol> bstrie how do I put a macro definition in a separate file?
[13:33:03] <bstrie> pzol: you'll have to wait for https://github.com/mozilla/rust/pull/11151 to land :P
[13:33:33] <dbaupp> pzol: you mean in a separate module?
[13:34:07] <pzol> dbaupp yeah
[13:34:14] <pzol> bstrie hmmm :)
[13:34:15] <dbaupp> so `mod foo; ... bar!()` with foo.rs having  `macro_rules! bar ( () => { ... } )`?
[13:34:34] <dbaupp> if you put #[macro_escape] on foo then it will work
[13:36:28] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[13:36:50] *** jorendorff is now known as jorendorff_away
[13:41:21] *** Quits: zootm (calum@moz-150DDDC2.sgyl.cable.virginm.net) (Ping timeout)
[13:41:32] *** Quits: jadbaires (jadrian@moz-9AE9F7C5.dsl.telepac.pt) (Quit: Konversation terminated!)
[13:41:39] *** Joins: jadbaires (jadrian@moz-9AE9F7C5.dsl.telepac.pt)
[13:42:01] *** Quits: jadbaires (jadrian@moz-9AE9F7C5.dsl.telepac.pt) (Quit: Konversation terminated!)
[13:42:08] *** Joins: jadbaires (jadrian@moz-9AE9F7C5.dsl.telepac.pt)
[13:43:09] *** Joins: zootm (calum@moz-150DDDC2.sgyl.cable.virginm.net)
[13:44:49] *** Joins: zmthy (zmthy@moz-EAA7EAA8.dsl.dyn.ihug.co.nz)
[13:44:53] <bstrie> I wonder if such a thing as a "probabilistic bigint" exists
[13:45:14] <bstrie> like a bigint, except it takes a bounded amount of space but only has some approximation of precision
[13:47:36] <Ms2ger> You mean a u64?
[13:48:22] *** Quits: zmthy (zmthy@moz-EAA7EAA8.dsl.dyn.ihug.co.nz) (Ping timeout)
[13:48:48] <Skrylar_> i wonder why you can do let x : &[u8] = foo; where foo is ~[u8], but not &foo or foo as &[u8]
[13:49:02] <Skrylar_> or even &foo as &[u8]
[13:49:29] <lurk_> I think he means arbitrary precision arithmetic
[13:49:38] *** Skrylar_ is now known as skry|zZz
[13:50:55] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[13:50:57] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[13:51:19] <rca> so a u64 that doesn't overflow : precision of 1 until 2^64-1, precision of n-2^64-1 after that. :)
[13:51:35] *** Quits: zootm (calum@moz-150DDDC2.sgyl.cable.virginm.net) (Ping timeout)
[13:51:53] *** Quits: Mowah (Mowah@moz-E62A9639.cust.bredbandsbolaget.se) (Ping timeout)
[13:52:23] *** Joins: zootm (calum@moz-150DDDC2.sgyl.cable.virginm.net)
[13:52:26] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[13:53:18] <bstrie> rca: right, but I'm wondering if we can smooth the curve a bit :P
[13:54:26] <bstrie> I guess it would really be more of a.... ballpark order-of-magnitude counter
[13:54:44] <bstrie> maybe I've just crudely reimagined floating-point numbers
[13:55:37] <dbaupp> bstrie: I think you have
[13:55:56] <bstrie> brilliant. it shall be the topic of my next research paper
[13:56:44] <rca> bstrie: i think you could do something where you shift the power of 2 when your num get bigger, discarding the small ones. Not exaclty like floating point.
[13:56:59] <bstrie> rca: that's sort of what I had in mind, yes
[13:57:26] <rca> you'd need a way to embed the max exponent.
[13:57:50] <rca> which is tricky, since it takes some room in the binary repr, which is fixed size.
[13:57:57] <rca> so you'd end up with a limit...
[13:58:04] <dbaupp> is my life a lie?
[13:58:05] <bstrie> what if the max exponent was itself a probabilistic bigint
[13:58:09] <bstrie> dbaupp: hahahahaha, what
[13:58:31] <dbaupp> I have `use libc::malloc;` and then a few lines lower `malloc(..)` and it's saying the malloc import is unused
[13:58:32] *** Quits: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP) (Quit: c-a)
[13:58:43] *** Quits: zootm (calum@moz-150DDDC2.sgyl.cable.virginm.net) (Ping timeout)
[13:58:44] * dbaupp doesn't know what to believe any more
[13:58:44] <bstrie> delete the line and see what happens
[13:58:56] <bstrie> by which I mean the import
[13:59:23] <bstrie> maybe rust is so smart that it optimizes out the malloc
[13:59:36] <rca> dbaupp: could malloc be defined somewhere else, which shadows the use libc::malloc?
[13:59:49] *** Joins: zootm (calum@moz-150DDDC2.sgyl.cable.virginm.net)
[13:59:56] <dbaupp> what
[13:59:59] <dbaupp> it still compiles
[14:00:08] <dbaupp> malloc is mentioned once in that file
[14:00:15] <dbaupp> let ptr = unsafe { malloc(size) };
[14:00:21] <dbaupp> but apparently that's ok.
[14:00:22] <bstrie> dbaupp: have you considered that your life may be a lie?
[14:00:41] <dbaupp> bstrie: I did
[14:00:52] <dbaupp> I think I've confirmed that it is now :(
[14:01:18] *** Joins: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP)
[14:01:34] <rca> then who has considered that your life is a lie, if you don't exist?
[14:01:41] <rca> can't be you.
[14:01:46] * dbaupp explodes
[14:01:59] <dbaupp> huh, changing it to malloc_xyz still compiles
[14:02:29] <bstrie> does unsafe code.... not check to see if functions are defined??
[14:02:42] <dbaupp> just deleted the `unsafe`... still seems to compile
[14:03:03] <rca> did you recode rustc to just return 0 after the main?
[14:03:08] <bstrie> can you reduce it to literally just a file containing "malloc_xyz()" that still compiles?
[14:03:09] *** Joins: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP)
[14:03:14] <dbaupp> trying
[14:03:24] <bstrie> maybe you've found a backdoor in the rust compiler
[14:04:41] <dbaupp> oooooohhhhh
[14:04:46] * dbaupp is think as two bricks
[14:04:51] <dbaupp> *thick :/
[14:04:54] <bstrie> were you compiling the wrong file
[14:05:23] <dbaupp> no, there was a cfg on the impl block of the method containing the malloc
[14:05:32] <dbaupp> (not *quite* that bad :P )
[14:06:13] <bstrie> dbaupp: ah ok :) then might I suggest https://www.youtube.com/watch?v=M9JEPeeohYs as your ambient coding music of the day?
[14:06:20] <dbaupp> my life is no longer a lie
[14:06:23] * dbaupp phew
[14:06:37] <dbaupp> haha
[14:07:18] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[14:09:53] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[14:10:17] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[14:10:18] *** Joins: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP)
[14:10:39] <WebeWizard> woot. my http server library now supports contextual responses with subcontexts
[14:10:51] <WebeWizard> https://github.com/WebeWizard/libhttpd
[14:11:59] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[14:12:22] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[14:12:42] *** Joins: jhasse (jhass_000@moz-7CEC9A1B.wlan.uni-bremen.de)
[14:13:28] <bstrie> WebeWizard: oh ho, are you challenging rust-http for the crown of BEST RUST HTTP THING
[14:13:59] <WebeWizard> bstrie: not really challenging. In the end, my library may use rust-http as a base
[14:14:07] <dbaupp> WebeWizard: (fwiw, the .rc file extension is deprecated: now one uses lib.rs for the crate root of a library, and bin.rs for the root of a executable)
[14:14:29] <jhasse> dbaupp: not main.rs for an executable?
[14:14:45] <WebeWizard> bstrie: my library is intended to be like Jetty embeddable servers for Java
[14:14:57] <dbaupp> jhasse: oh
[14:14:59] <dbaupp> jhasse: yeah
[14:15:04] * dbaupp misremembered
[14:17:07] <WebeWizard> but i like the rc extension :(
[14:17:40] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[14:17:43] <jhasse> How can I tell `make check` to rerun tests? (without changing the code or recompiling)
[14:18:28] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[14:18:57] <olsonjeffery> WebeWizard: hey i took a quick run through your code the other day when i saw it in TWiR .. are you re-rolling the whole server from scratch w/o rust-http?
[14:19:41] <WebeWizard> olsonejeffery: Until rust-http matures, yes.
[14:19:50] <WebeWizard> olsonjeffery*
[14:19:51] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[14:20:03] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Client exited)
[14:20:12] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[14:20:37] <WebeWizard> it's been almost a month since the server side of rust-http has had a commit
[14:21:38] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[14:21:55] <olsonjeffery> WebeWizard: so you're writing your own reqest parser and building your own responses?
[14:22:04] <olsonjeffery> or is the issue that rust-http doesn't build against master?
[14:22:14] *** jorendorff_away is now known as jorendorff
[14:23:01] <WebeWizard> oslonejeffery: i'm building my own parser and responses, for now.   But let's say when Rust reaches version 1.0, and rust-http reaches a version 1.0, then I may switch to using theirs
[14:23:19] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Ping timeout)
[14:23:59] <dbaupp> (rust-ci says that rust-http builds against master, fwiw.)
[14:24:59] <WebeWizard> sorry olsonjeffery, i keep mispelling your name :(
[14:25:26] <bstrie> WebeWizard: use the tab key!
[14:25:41] <WebeWizard> bstrie: oh snap!
[14:25:41] <bstrie> and if your irc client doesn't support tab-completion, then get a better one :P
[14:25:42] <hansjorg> dbaupp: rust-nightly is a bit stale btw. Build failed last night, but in progress now
[14:25:46] <mletterle> Good morning rustopia
[14:26:07] <WebeWizard> hansjorg: thank you so much for the nightly service. I know a lot of us rely on it.
[14:26:08] <jhasse> "make check-stage2-rustpkg" only executes 3 tests on my machine. What could I be doing wrong? How to execute only rustpkg tests?
[14:26:40] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[14:31:35] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[14:31:35] *** ChanServ sets mode: +ao dherman dherman
[14:33:18] *** Quits: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP) (Ping timeout)
[14:33:46] *** Joins: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP)
[14:35:36] *** Joins: maxli (maxli@moz-78AD779D.hsd1.ca.comcast.net)
[14:36:49] <hansjorg> WebeWizard: happy to help :) Apart from the occasional build failure it runs mostly by itself
[14:38:16] <mletterle> and rust works again. good call yesterday from steveklabnik on resetting ALL THE THINGS o/
[14:39:09] <TisButMe> So, the Index trait allows the use of the [ ] operator to access data, but is there a trait to make something like foo[bar] = x work ?
[14:39:42] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[14:39:57] <TisButMe> or should I return a pointer with the [ ] operator ?
[14:40:12] *** Quits: pzol (pzol@322A273C.DEB41A6D.AADC76B.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[14:40:25] <bstrie> TisButMe: not yet
[14:40:38] <bstrie> er, foo[bar] = x doesn't work yet, I mean
[14:41:27] <bstrie> TisButMe: https://github.com/mozilla/rust/issues/6515
[14:41:30] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[14:42:19] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[14:43:01] <TisButMe> so I have to implement my own method without the [ ] sugar now, right ?
[14:43:25] <bstrie> sounds like it, yes
[14:43:35] <TisButMe> all right, thanks bstrie 
[14:44:46] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[14:45:07] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[14:47:28] *** Joins: zmthy (zmthy@moz-EAA7EAA8.dsl.dyn.ihug.co.nz)
[14:47:45] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[14:49:18] *** Quits: zmthy (zmthy@moz-EAA7EAA8.dsl.dyn.ihug.co.nz) (Ping timeout)
[14:50:13] *** Joins: jakerr (textual@moz-972CAB2C.hsd1.ca.comcast.net)
[14:50:21] *** Quits: jhasse (jhass_000@moz-7CEC9A1B.wlan.uni-bremen.de) (Quit: Verlassend)
[14:50:23] *** Joins: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca)
[14:51:40] *** jakerr is now known as bluehex
[14:51:54] *** Quits: skry|zZz (Skrylar@moz-F692F728.austin.res.rr.com) (Ping timeout)
[14:52:25] *** Joins: Ferreus (ferreus@moz-DDB805F5.dip0.t-ipconnect.de)
[14:52:31] *** Joins: alonlevy (alon@moz-EFB2FE99.red.bezeqint.net)
[14:53:58] *** bluehex is now known as kodafox
[14:54:18] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[14:54:52] *** kodafox is now known as jakerr
[14:55:00] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[14:55:56] *** Parts: jakerr (textual@moz-972CAB2C.hsd1.ca.comcast.net) (Textual IRC Client: www.textualapp.com)
[14:56:28] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[14:56:55] *** Joins: mib_75h1dh (Mibbit@moz-217D7C6E.cust.selfnet.cz)
[14:57:03] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[14:57:04] *** Quits: mib_75h1dh (Mibbit@moz-217D7C6E.cust.selfnet.cz) (Quit: http://www.mibbit.com ajax IRC Client)
[14:57:06] *** Joins: dapz (textual@moz-4E41E4A2.dia.static.qwest.net)
[14:58:21] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[15:00:10] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[15:01:06] *** Quits: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP) (Quit: c-a)
[15:01:58] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Connection reset by peer)
[15:02:02] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Quit: leaving)
[15:02:06] *** Joins: elux (peter@B6F21F4B.1F20BC31.2170E5F.IP)
[15:02:31] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[15:04:49] *** Quits: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP) (Input/output error)
[15:04:53] *** Joins: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP)
[15:05:31] *** Quits: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca) (Quit: eatkinson)
[15:07:05] *** Joins: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca)
[15:07:12] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[15:09:00] *** Joins: jakerr (textual@moz-972CAB2C.hsd1.ca.comcast.net)
[15:09:21] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[15:10:03] *** Quits: dapz (textual@moz-4E41E4A2.dia.static.qwest.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[15:10:09] *** Joins: derek_c (derek@E281FD5.944FF0A8.75BEAC1C.IP)
[15:10:24] *** Joins: adridu59 (Mibbit@moz-E7A273CD.ac-paris.fr)
[15:12:39] *** Quits: atomical (atomical@moz-7BDC7D9E.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com) (Quit: atomical)
[15:15:43] *** Joins: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP)
[15:17:06] *** Joins: AvianFlu_ (AvianFlu@moz-C85C7DB7.dyn.optonline.net)
[15:18:03] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:18:03] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[15:18:15] *** Quits: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP) (Ping timeout)
[15:19:09] *** Joins: hellmage (luyun@234B549D.DDB49528.8395810B.IP)
[15:19:46] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[15:20:23] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[15:20:59] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[15:21:08] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[15:22:03] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[15:23:13] *** Joins: synackse (jordyd@moz-320D2AC8.seg148.ucf.edu)
[15:24:10] *** Quits: derek_c (derek@E281FD5.944FF0A8.75BEAC1C.IP) (Ping timeout)
[15:25:24] *** Joins: pnathan (Adium@moz-A8921E45.tukw.qwest.net)
[15:25:35] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[15:25:37] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[15:25:59] *** kimundi is now known as zz_kimundi
[15:26:13] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[15:27:07] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:27:26] *** Parts: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP) ()
[15:28:13] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[15:29:46] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[15:30:30] *** Quits: oberstet (quassel@moz-FAD446D9.dynamic.mnet-online.de) (Client exited)
[15:31:37] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[15:31:40] *** Quits: adridu59 (Mibbit@moz-E7A273CD.ac-paris.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[15:32:27] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[15:33:39] *** Joins: itdaniher (it@moz-7FAAAB8D.bstnma.fios.verizon.net)
[15:33:40] *** Quits: [squiddy] (squiddy@moz-B6B9C896.adsl.alicedsl.de) (Ping timeout)
[15:33:54] <itdaniher> What's the libnative alternative to `do task::spawn_sched(task::SingleThreaded)`?
[15:34:31] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:34:45] <dbaupp> itdaniher: I think it's http://static.rust-lang.org/doc/master/native/task/fn.spawn.html
[15:34:47] *** Parts: synackse (jordyd@moz-320D2AC8.seg148.ucf.edu) ()
[15:35:03] *** Joins: LinearInterpol (RJones@moz-8A6454A9.ellsworth-hs.ellsworth.k12.me.us)
[15:36:36] *** Joins: bynaryshef (bynaryshef@moz-DCC9E7CE.mem.bellsouth.net)
[15:38:04] *** Quits: LinearInterpol (RJones@moz-8A6454A9.ellsworth-hs.ellsworth.k12.me.us) (Ping timeout)
[15:38:43] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[15:39:20] *** Quits: jakerr (textual@moz-972CAB2C.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[15:39:31] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[15:39:37] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[15:39:44] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[15:40:05] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[15:43:55] *** Joins: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP)
[15:44:02] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[15:46:29] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[15:46:32] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[15:47:13] *** Joins: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP)
[15:48:12] *** Joins: zmthy (zmthy@moz-EAA7EAA8.dsl.dyn.ihug.co.nz)
[15:48:29] <itdaniher> hrm... rustpkg can't seem to find `native` - it's ignoring 'extern mod native' and complaining about native::task
[15:49:49] <sanxiyn> itdaniher: I think you are suffering issue #11243
[15:50:05] *** Quits: zmthy (zmthy@moz-EAA7EAA8.dsl.dyn.ihug.co.nz) (Ping timeout)
[15:50:34] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[15:51:09] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[15:51:41] <itdaniher> ah, looks like. thanks, sanxiyn!
[15:52:01] *** Joins: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net)
[15:52:11] *** Quits: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net) (Connection reset by peer)
[15:53:27] <sanxiyn> (Extremely off topic) Today I learned about http://en.wikipedia.org/wiki/Gate_Tower_Building
[15:53:33] <sanxiyn> Strangeness of the world
[15:54:15] *** Quits: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca) (Quit: eatkinson)
[15:54:42] *** Quits: maxli (maxli@moz-78AD779D.hsd1.ca.comcast.net) (Quit: Leaving.)
[15:55:17] *** Joins: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net)
[15:55:40] *** Joins: maxli (maxli@moz-78AD779D.hsd1.ca.comcast.net)
[15:57:17] *** Quits: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP) (Quit: c-a)
[15:57:21] *** Quits: maxli (maxli@moz-78AD779D.hsd1.ca.comcast.net) (Ping timeout)
[15:57:23] *** Joins: mib_uocz7j (Mibbit@29369FA4.3EAE7AC0.6DC151A0.IP)
[15:58:07] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[15:58:12] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[15:59:55] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[16:00:46] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[16:00:48] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[16:01:00] *** Joins: atomical (atomical@moz-7BDC7D9E.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com)
[16:02:01] <Ms2ger> "The elevator passes through the floors without stopping"
[16:02:08] *** Joins: synackse (jordyd@moz-320D2AC8.seg148.ucf.edu)
[16:02:52] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[16:03:56] *** Joins: nical (Nicolas@87C1F78E.1DE10CA8.D8E68FF6.IP)
[16:04:28] <WebeWizard> next stop. highway floor
[16:04:55] *** Quits: hellmage (luyun@234B549D.DDB49528.8395810B.IP) (Ping timeout)
[16:05:02] <Ms2ger> Actually, highway floor 1, highway floor 2, ... :)
[16:08:05] *** Joins: hellmage (luyun@234B549D.DDB49528.8395810B.IP)
[16:09:53] *** Joins: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net)
[16:10:30] *** Quits: synackse (jordyd@moz-320D2AC8.seg148.ucf.edu) (Quit: synackse)
[16:10:41] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[16:10:41] *** ChanServ sets mode: +ao dherman dherman
[16:11:04] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[16:11:07] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[16:12:17] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[16:12:29] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[16:12:54] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[16:12:55] *** Joins: LinearInterpol (RJones@moz-8A6454A9.ellsworth-hs.ellsworth.k12.me.us)
[16:13:03] *** Quits: hellmage (luyun@234B549D.DDB49528.8395810B.IP) (Ping timeout)
[16:14:49] *** Joins: hellmage (luyun@234B549D.DDB49528.8395810B.IP)
[16:14:56] *** Joins: ianj (ianjneu@C8F413DD.A730D53D.42AD8FB3.IP)
[16:15:07] *** Quits: bynaryshef (bynaryshef@moz-DCC9E7CE.mem.bellsouth.net) (Quit: Leaving)
[16:15:18] *** Quits: nical (Nicolas@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[16:15:57] <eddyb> error: can't find crate for `std` (in compiletest) even after make clean :/
[16:16:57] *** Quits: pnathan (Adium@moz-A8921E45.tukw.qwest.net) (Quit: Leaving.)
[16:17:43] *** Joins: nical (Nicolas@87C1F78E.1DE10CA8.D8E68FF6.IP)
[16:18:02] *** Joins: gwty (gwtypc@D015B940.C0AE0958.71EA9E17.IP)
[16:20:30] *** Joins: mib_jjp8xw (Mibbit@moz-A8183836.hsi3.kabel-badenwuerttemberg.de)
[16:20:53] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[16:21:01] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[16:21:13] *** Joins: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP)
[16:21:23] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[16:22:35] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[16:23:20] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[16:23:23] *** Quits: AvianFlu_ (AvianFlu@moz-C85C7DB7.dyn.optonline.net) (Input/output error)
[16:23:27] *** Parts: mib_jjp8xw (Mibbit@moz-A8183836.hsi3.kabel-badenwuerttemberg.de) ()
[16:24:24] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[16:25:18] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[16:30:47] *** Parts: nical (Nicolas@87C1F78E.1DE10CA8.D8E68FF6.IP) ()
[16:31:52] <acrichto> eddyb: is this stage0?
[16:31:53] *** Joins: FreeFull (freefull@moz-968E0636.as13285.net)
[16:32:03] <acrichto> or checking stage1?
[16:32:15] *** Joins: dgpratt (dpratt71@2F49BEA0.B7D6B72A.4F70D6C7.IP)
[16:33:29] *** Joins: alan_andrade (alan_andra@7BEFF11F.3C8440C4.B7838CA6.IP)
[16:34:14] <eddyb> acrichto: check-stage1
[16:34:32] *** Joins: Kxepal832 (Miranda@moz-CEB0DF31.pppoe.mtu-net.ru)
[16:34:35] <acrichto> eddyb: hm, I think we need a new snapshot
[16:34:52] *** Quits: Kxepal (Miranda@moz-30036DE2.pppoe.mtu-net.ru) (Ping timeout)
[16:34:52] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:35:16] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:35:40] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:35:56] *** Quits: Ferreus (ferreus@moz-DDB805F5.dip0.t-ipconnect.de) (Quit: WeeChat 0.4.2)
[16:35:58] *** Joins: alan_and_ (alan_andra@94147F3C.3C8440C4.B7838CA6.IP)
[16:35:58] *** Joins: Ferreus (ferreus@moz-DDB805F5.dip0.t-ipconnect.de)
[16:36:58] *** Quits: alan_andrade (alan_andra@7BEFF11F.3C8440C4.B7838CA6.IP) (Ping timeout)
[16:36:58] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[16:38:10] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[16:39:47] *** Quits: alan_and_ (alan_andra@94147F3C.3C8440C4.B7838CA6.IP) (Quit: Leaving...)
[16:39:53] *** Joins: alan_andrade (alan_andra@94147F3C.3C8440C4.B7838CA6.IP)
[16:41:28] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[16:42:42] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[16:42:59] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[16:43:11] *** Joins: jhasse (jhass_000@moz-33238F6.ewe-ip-backbone.de)
[16:43:12] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[16:44:12] *** Joins: synackse (jordyd@moz-320D2AC8.seg148.ucf.edu)
[16:44:23] *** Parts: synackse (jordyd@moz-320D2AC8.seg148.ucf.edu) ()
[16:45:23] *** Joins: jakerr (textual@C587E14D.D6CCE4AE.77834EAA.IP)
[16:45:30] *** Parts: ash_ (ash@15DEC023.DFC68827.9C33A531.IP) (Leaving)
[16:45:50] *** Quits: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP) (Quit: Leaving)
[16:45:53] *** Quits: alonlevy (alon@moz-EFB2FE99.red.bezeqint.net) (Ping timeout)
[16:45:56] *** Joins: ash_ (ash@15DEC023.DFC68827.9C33A531.IP)
[16:46:26] *** zz_kimundi is now known as kimundi
[16:46:45] <ash_> is there anything in std for case-insensitive comparisons of str's or char's
[16:47:00] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[16:47:12] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[16:48:55] *** Joins: zmthy (zmthy@moz-EAA7EAA8.dsl.dyn.ihug.co.nz)
[16:50:09] *** Quits: FreeFull (freefull@moz-968E0636.as13285.net) (Ping timeout)
[16:50:24] *** Joins: aravindavk (aravinda@1BA2746B.FC231C47.D5D59AD9.IP)
[16:50:50] *** Quits: zmthy (zmthy@moz-EAA7EAA8.dsl.dyn.ihug.co.nz) (Ping timeout)
[16:51:00] *** Quits: atomical (atomical@moz-7BDC7D9E.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com) (Quit: atomical)
[16:51:08] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Ping timeout)
[16:51:38] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[16:52:10] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[16:52:11] *** Quits: deggert (deggert@moz-2C16B246.host.de.colt.net) (Quit: deggert)
[16:52:31] <kimundi> ash_: Only for the Ascii subset of unicode
[16:52:43] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[16:52:56] *** flaper87 is now known as flaper87|afk
[16:53:08] *** Joins: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP)
[16:53:18] *** Joins: atomical (atomical@moz-7BDC7D9E.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com)
[16:53:56] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[16:53:59] *** Joins: jackneill (jackneill@moz-57D933EE.pool.digikabel.hu)
[16:54:22] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[16:54:22] *** ChanServ sets mode: +ao pcwalton pcwalton
[16:55:54] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[16:57:16] *** Joins: pnkfelix (pnkfelix@moz-C07D5168.p2p.sfo1.mozilla.com)
[16:57:22] *** Joins: deggert (deggert@moz-2C16B246.host.de.colt.net)
[17:00:12] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Connection reset by peer)
[17:00:27] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[17:00:32] *** Joins: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP)
[17:01:57] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[17:02:15] <bstrie> agh, git
[17:02:27] <bstrie> how do I get a remote git branch *without* having to manually merge it
[17:02:32] <bstrie> like, I just want that branch *exactly*
[17:02:50] <bstrie> and I don't want to have to manually revert to whatever commit it was based off of
[17:02:55] <sfackler> just fetch it?
[17:02:57] <bstrie> before merging in the remote branch
[17:03:01] <bstrie> yeah, I've fetched it
[17:03:06] <sfackler> and then check it out
[17:03:06] <bstrie> now where the hell *is* it
[17:03:10] <bstrie> I can't check it out
[17:03:16] <sfackler> remotename/branchname
[17:03:23] *** Joins: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP)
[17:03:31] *** Quits: aravindavk (aravinda@1BA2746B.FC231C47.D5D59AD9.IP) (Ping timeout)
[17:04:01] <bstrie> sfackler: I've done `git fetch https://github.com/alexcrichton/rust.git issue-11372`
[17:04:23] <bstrie> now how do I just look at this damn branch
[17:05:13] <bstrie> I can see that it fetched to something called FETCH-HEAD
[17:05:49] <bstrie> oh blehhhh, that's what I was doing wrong
[17:05:52] <bstrie> it's FETCH_HEAD
[17:05:55] <bstrie> stupid underscore
[17:06:06] *** Joins: blank_name (blank_name@78B04CD2.66204B68.6D228269.IP)
[17:06:09] <bstrie> so I have to check that out manually, and then commit that into a branch or whatever
[17:06:47] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[17:07:05] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[17:07:31] * Ms2ger hates git for that
[17:08:16] <sfackler> you can do git checkout -b branchname FETCH_HEAD
[17:08:39] <bstrie> well I guess that's not too heinous
[17:08:40] <bstrie> thanks
[17:09:31] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[17:11:25] *** Joins: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[17:12:29] *** Joins: AvianFlu_ (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[17:13:07] *** Quits: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Ping timeout)
[17:13:21] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[17:13:28] *** Quits: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP) (Client exited)
[17:13:53] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[17:14:19] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[17:15:01] *** Joins: maxli (maxli@moz-70F9251D.thefacebook.com)
[17:16:33] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:17:40] *** Joins: hoverbear (hoverbear@moz-2789E775.wireless.uvic.ca)
[17:19:48] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[17:20:28] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[17:20:39] *** Quits: LinearInterpol (RJones@moz-8A6454A9.ellsworth-hs.ellsworth.k12.me.us) (Ping timeout)
[17:20:43] *** Quits: hoverbear (hoverbear@moz-2789E775.wireless.uvic.ca) (Quit: Taking a nap.)
[17:21:25] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[17:22:11] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[17:22:13] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[17:23:09] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[17:23:50] *** Quits: bobthenameless (bobthename@moz-A1BB42C4.dhcp.leds.al.charter.com) (Ping timeout)
[17:25:31] *** Quits: deggert (deggert@moz-2C16B246.host.de.colt.net) (Quit: deggert)
[17:26:01] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[17:26:47] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[17:26:51] *** Quits: maxli (maxli@moz-70F9251D.thefacebook.com) (Quit: Leaving.)
[17:27:46] *** Parts: hellmage (luyun@234B549D.DDB49528.8395810B.IP) ()
[17:29:06] *** Joins: g3xzh (g3xzh@moz-76245F0B.red.bezeqint.net)
[17:29:17] *** Quits: sk (sk@28D4FD6F.29248532.33B96495.IP) (Quit: Leaving)
[17:29:30] *** Quits: Ferreus (ferreus@moz-DDB805F5.dip0.t-ipconnect.de) (Ping timeout)
[17:29:31] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:30:26] *** Quits: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[17:30:33] <g3xzh> i have this function fn f1 (x, y) -> (int, int) { return (0,0) }. when i do let (x1,x2) = f(1,1). everything is fine but when i do just (x1,x2) = f(1,1) it tells me that something is missing
[17:30:47] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[17:30:52] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:30:58] <g3xzh> how can i still assign values to variables using this idiom
[17:30:58] <Ms2ger> Yes
[17:31:01] <Ms2ger> A 'let'
[17:31:32] <g3xzh> fine but how can i use this idiom without defining a new variables.
[17:31:44] <g3xzh> *new variables
[17:31:55] <bstrie> g3xzh: you can just redefine the same variables
[17:32:00] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[17:32:03] <bstrie> let x = 2; let x = 3; works
[17:32:19] <g3xzh> yeah but i want in one line assign new values
[17:32:29] <g3xzh> because there is a "if" block
[17:32:55] <g3xzh> wait... i put an example on pastebin
[17:32:57] <bstrie> g3xzh: that would require patterns to be available in arbitrary contexts, which can't be parsed unambiguously
[17:33:03] <bstrie> but I'd still like to see it
[17:33:46] *** Joins: synackse (jordyd@moz-E7A9AB16.seg59.ucf.edu)
[17:34:30] *** Joins: hoverbear (hoverbear@moz-2789E775.wireless.uvic.ca)
[17:34:33] <kimundi> g3xzh: In other words, not possible with this syntax atm - though people would like to see a solution for that
[17:34:55] <bstrie> fie on those people :P
[17:35:43] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[17:36:06] *** Joins: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca)
[17:36:13] <g3xzh> http://pastebin.com/1DPAyY9Z
[17:36:21] <g3xzh> bstrie: http://pastebin.com/1DPAyY9Z
[17:37:26] *** Quits: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP) (Quit: c-a)
[17:37:32] *** Joins: robitex (Mibbit@moz-59832C84.libero.it)
[17:38:14] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[17:39:59] *** Joins: deggert (deggert@moz-2C16B246.host.de.colt.net)
[17:40:02] <g3xzh> kimundi: yep
[17:40:21] *** Quits: mib_uocz7j (Mibbit@29369FA4.3EAE7AC0.6DC151A0.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:40:37] *** Quits: synackse (jordyd@moz-E7A9AB16.seg59.ucf.edu) (Quit: synackse)
[17:42:01] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[17:42:03] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[17:42:05] <robitex> Hello. Why 4.exp2() fail on Rust 0.9 pre (on Ububtu Lucid)?
[17:42:34] <Diamond> rusti: 4.exp2()
[17:42:39] <bstrie> rusti isn't here
[17:42:42] <Diamond> :(
[17:42:47] <bstrie> strcat's laptop is closed
[17:42:48] <bstrie> :P
[17:42:54] <Diamond> lawl?
[17:43:16] *** Joins: bobthenameless (bobthename@moz-A1BB42C4.dhcp.leds.al.charter.com)
[17:43:40] <Diamond> are fixed size arrays special cased, or does rust rely on const prop in llvm?
[17:43:49] <phil_> really?
[17:43:58] <phil_> rusti is on someones laptop?
[17:44:04] <bstrie> yeah
[17:44:08] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[17:44:10] <bstrie> someone needs to donate a server :P
[17:44:20] <phil_> damn
[17:44:28] <phil_> i have a vps
[17:44:34] <bstrie> does it run arch linux
[17:44:38] <phil_> i dont mind using it for that
[17:44:40] <bstrie> because that's what strcat coded rusti for :P
[17:45:05] <phil_> no :(
[17:45:05] <phil_> i think its debian
[17:45:11] <Diamond> i will. I assume strcat has a repo of rusti
[17:45:46] <Diamond> what strcat's gh?
[17:45:57] <bstrie> thestinger
[17:46:45] <Diamond> nope, no rusti
[17:46:56] <SiegeLord> rusti is the simple part
[17:47:04] <SiegeLord> It's the jail that's the complicated bit
[17:47:30] <bstrie> well maybe phil_ doesn't mind letting people run arbitrary code on his server :P
[17:47:36] <sfackler> rusti itself just dumps the text into something like "fn main() { let out = { TEXT }; println!("{:?}", out); }"
[17:47:51] <Diamond> ^ my first guess.
[17:47:54] <SiegeLord> Diamond: https://github.com/thestinger/rust-playpen
[17:47:56] *** Quits: ianj (ianjneu@C8F413DD.A730D53D.42AD8FB3.IP) (Quit: leaving)
[17:48:05] <phil_> whats it written in
[17:49:02] <bstrie> blood
[17:49:40] *** Joins: zmthy (zmthy@moz-EAA7EAA8.dsl.dyn.ihug.co.nz)
[17:49:42] *** Joins: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP)
[17:49:43] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[17:49:55] <bstrie> actually that might be a good name for a programming language
[17:50:07] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[17:50:35] <bstrie> a trifecta of related languages with a focus on interoperability: the systems language (Blood), the application language (Sweat), and the scripting language (Tears)
[17:50:56] <mletterle> OMG
[17:50:58] <mletterle> make this happen
[17:51:19] <bstrie> ok
[17:51:30] <Ms2ger> JS is Tears already
[17:51:33] <bstrie> I'll create the repo, mletterle you start working on everything else
[17:51:33] *** Quits: zmthy (zmthy@moz-EAA7EAA8.dsl.dyn.ihug.co.nz) (Ping timeout)
[17:51:51] *** Quits: bougyman (bougyman@moz-C8C4EF5D.uvs.rcsntx.sbcglobal.net) (Quit: Lost terminal)
[17:51:54] <mletterle> hehe
[17:52:00] <mletterle> OPEN SOURCE 
[17:52:48] <bstrie> though I'll need you to sign this committer's agreement that assigns all copyright to moi
[17:52:55] *** Quits: eevee (eevee@moz-8DEBFFC9.lv.lv.cox.net) (Ping timeout)
[17:53:01] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[17:53:29] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:53:40] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[17:53:40] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[17:53:44] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:53:44] *** ChanServ sets mode: +ao brson brson
[17:54:39] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[17:54:41] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[17:55:53] *** Parts: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP) ()
[17:56:07] *** Joins: ziad (ziad@B20586FB.BDB3D91.6E370BFC.IP)
[17:57:15] *** Joins: eevee (eevee@moz-8DEBFFC9.lv.lv.cox.net)
[17:57:36] <bstrie> brson: thank god, HN is back from its two-day outage. we can finally release
[17:58:09] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[18:00:04] <brson> bstrie: \o/
[18:01:14] <Ms2ger> s/release/troll/? :)
[18:01:28] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[18:02:42] *** Joins: maxli (maxli@moz-70F9251D.thefacebook.com)
[18:03:10] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[18:03:34] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[18:03:55] *** Quits: vmx (vmx@moz-4CE8921D.dip0.t-ipconnect.de) (Ping timeout)
[18:03:55] *** Quits: bobthenameless (bobthename@moz-A1BB42C4.dhcp.leds.al.charter.com) (Ping timeout)
[18:04:09] *** Quits: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net) (Quit: Leaving)
[18:04:17] *** Quits: maxli (maxli@moz-70F9251D.thefacebook.com) (Quit: Leaving.)
[18:05:15] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: WeeChat 0.4.2)
[18:05:26] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[18:05:28] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Ping timeout)
[18:05:51] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[18:06:01] *** Quits: moostik (Icedove@moz-F5DBFF76.w83-202.abo.wanadoo.fr) (Ping timeout)
[18:06:19] <robitex> I understand... exp2() was implemented only for float...
[18:06:43] <bstrie> aha
[18:07:12] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Connection reset by peer)
[18:07:18] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[18:07:26] *** Joins: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[18:08:24] *** Joins: vmx (vmx@moz-4CE8921D.dip0.t-ipconnect.de)
[18:08:31] *** Joins: nif (nif@moz-8181E2AC.oberlin.net)
[18:09:02] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[18:10:03] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[18:10:10] *** Joins: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com)
[18:10:24] <LinearInterpol> I noticed that 3 libraries are missing from the binary installation of Rust on Windows.
[18:10:40] <LinearInterpol> libpthread and 2 others. Is that normal?
[18:10:53] *** Quits: vmx (vmx@moz-4CE8921D.dip0.t-ipconnect.de) (Ping timeout)
[18:11:08] *** Joins: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de)
[18:11:36] <Tobba> argh
[18:11:39] *** Joins: vmx (vmx@moz-4CE8921D.dip0.t-ipconnect.de)
[18:11:47] <Tobba> is there any way to get rustc to not mark functions as internal without making them the entry point
[18:12:20] <sfackler> there might be an attribute for that
[18:12:28] <Tobba> hopefully
[18:12:38] <Tobba> though I dont know why its marking public library functions as internal anyways
[18:12:42] <Tobba> that doesnt make terrible amounts of sense
[18:13:26] <bstrie> LinearInterpol: not sure...
[18:13:31] <bstrie> windows support is a bit lacking
[18:13:38] <Tobba> LinearInterpol: the windows build is turd
[18:13:43] <LinearInterpol> so I've seen. X)
[18:13:48] <Tobba> rename the
[18:13:49] <LinearInterpol> Well, might just have to launch this baby in a VM.
[18:13:53] <Tobba> pthreadGC2.dll or w/e in mingw
[18:13:57] <Tobba> well, copy that to just libpthread-2.dll
[18:13:58] <Tobba> it works fine
[18:14:01] <LinearInterpol> yep.
[18:14:04] <LinearInterpol> it did.
[18:14:04] <Tobba> then downgrade libc++ to some fuckall version
[18:14:06] <LinearInterpol> just wondering.
[18:14:07] <jhasse> LinearInterpol: it's normal
[18:14:09] <Tobba> or libstdc++
[18:14:13] <Tobba> I cant remember
[18:14:29] <Tobba> I've been trying to build my own version of latest rustc
[18:14:35] <Tobba> after it told me to install msys git I just fucking gave up though
[18:14:37] <LinearInterpol> I just found Rust, and.. I'm shocked as to how much better it is than C.
[18:14:42] <Tobba> that thing has rediclous amounts of dependencies
[18:14:48] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Quit: csherratt)
[18:14:51] <jhasse> Tobba: git?
[18:14:57] <Tobba> building rustc needs git
[18:14:58] <Tobba> fuck knows
[18:15:01] <LinearInterpol> For a systems programming language, it's robust and vast enough to cover all of my usage points.
[18:15:04] <cmr> for the submodules
[18:15:08] *** Quits: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca) (Quit: eatkinson)
[18:15:26] <jhasse> Tobba: How can you be a programmer and not use git?
[18:15:26] *** Quits: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net) (Ping timeout)
[18:15:31] <cmr> Tobba: if it's actually publically reachable, it won't be marked as internal.
[18:15:32] *** Joins: bkircher (bkircher@moz-CF71C9E7.adsl.alicedsl.de)
[18:15:47] <Ms2ger> LinearInterpol, well, I dunno, is it hard to be shockingly better than C? :)
[18:15:48] <Tobba> so uh, how would I accomplish that
[18:15:52] <eddyb> LinearInterpol: \o/
[18:16:07] <jhasse> Tobba: you'll use git to clone the repository anyway
[18:16:08] <LinearInterpol> Ms2ger: not entirely. but it's shocking in that it's much better suited for my needs.
[18:16:10] <Tobba> setting the function as pub should make it publicaly reachable no
[18:16:14] <cmr> Tobba: http://static.rust-lang.org/doc/master/rust.html#visibility-and-privacy
[18:16:16] <cmr> no
[18:16:20] <LinearInterpol> usually I end up using C over python, which probably declares that I'm insane.
[18:16:21] <cmr> the module its in needs to be public as well
[18:16:22] <Ms2ger> LinearInterpol, great to hear that :)
[18:16:24] *** Joins: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net)
[18:16:27] <cmr> and so on and so forth up to the crate root
[18:16:28] <Tobba> jhasse: not if you just download a zip off github, or use github for windows
[18:16:28] *** Joins: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP)
[18:16:37] <phil_> oh i cant run rusti on my VPS
[18:16:38] <Tobba> github for windows actually DLs the subrepos too, so
[18:16:46] <Tobba> oh, fuck
[18:16:46] <phil_> i cant get rust working on it :D
[18:16:51] *** Quits: vmx (vmx@moz-4CE8921D.dip0.t-ipconnect.de) (Ping timeout)
[18:17:11] <Tobba> yep that makes sense, thank you
[18:17:22] <LinearInterpol> jhasse: one word: mercurial. :)
[18:17:26] <bstrie> phil_: that's one of the difficulties, yes :P
[18:17:47] <phil_> my vps is only 1 GB
[18:17:54] <phil_> i run out of memory compiling it :(
[18:18:03] <nif> can someone take a look at my PR and tell me what Bors is trying to say here?  I thought I had a working build when I turned it in, but apparently not? https://github.com/mozilla/rust/pull/11263
[18:18:10] <cmr> phil_: which distro is it? there are packages for many: https://github.com/mozilla/rust/wiki/Doc-packages,-editors,-and-other-tools
[18:18:15] <jhasse> LinearInterpol: Well I think mercurial is more popular among people not interested in Rust anyway ;)
[18:18:19] <phil_> cmr: debian
[18:18:22] <LinearInterpol> bahahaha.
[18:18:25] <cmr> phil_: use the ubuntu ppa
[18:18:28] <LinearInterpol> I'll agree to that.
[18:18:33] <Ms2ger> jhasse, yeah, hg is much superior, obviously :)
[18:18:34] <LinearInterpol> though it is my favorite.
[18:18:40] <phil_> are those nightly builds?
[18:18:44] <phil_> oh
[18:18:45] <phil_> sure are
[18:18:56] <phil_> ill give that a shot
[18:18:57] <phil_> thanks cmr
[18:19:00] <phil_> i hadnt seen this
[18:19:09] <cmr> nif: looks like it's just a spurious failure
[18:19:15] <jhasse> Ms2ger: yeah and python is much superior to rust :P
[18:19:18] <cmr> nif: I'll retry it for you
[18:19:31] <Ms2ger> jhasse, for some purposes, I'd say yes, definitely
[18:19:36] <nif> cmr: oh cool, well, thanks.  :)
[18:19:45] <LinearInterpol> pfffff.
[18:19:46] <jhasse> Ms2ger: same goes for git vs. hg ;)
[18:19:48] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[18:20:09] <LinearInterpol> from what I'm looking at, Rust is vastly superior to everything else I've used, and I work in bloody embedded..
[18:20:15] *** Quits: mindcat (mindcat@3BBA730B.14B01478.F956842C.IP) (Ping timeout)
[18:20:29] <cmr> LinearInterpol: well, I wouldn't make that decision so hastily.
[18:20:30] <Tobba> I like how msysgit has checkout windows, commit unix line ending mode as the default in the installer
[18:20:31] <cmr> We still have problems.
[18:20:34] <Tobba> (it breaks everything)
[18:20:44] <LinearInterpol> cmr: That's also kind of what I'm wanting to find out about, the pitfalls.
[18:20:46] <cmr> But we've certainly succeeded in being better than C :)
[18:20:59] <cmr> LinearInterpol: the biggest downsides right now are the incomplete libraries
[18:21:04] <LinearInterpol> oh pff.
[18:21:05] <cmr> but that's just a matter of maturity
[18:21:14] <LinearInterpol> so long as the core language is there.
[18:21:23] <LinearInterpol> I don't even care, I work without the standard anyway! :P
[18:21:23] <rca> phil_: if you're on stable you'll need to upgrade libc6 though.
[18:21:56] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[18:21:57] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[18:21:57] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[18:22:34] <Tobba> though writing really low level code in rust seems to have bad results
[18:22:38] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[18:22:42] <Ms2ger> Tobba, oh?
[18:22:44] *** Joins: mpiechotka (mpiechotka@moz-A61AF615.dynamic.mnet-online.de)
[18:22:44] <LinearInterpol> it does?
[18:22:45] <Tobba> "error: unknown operating system"
[18:22:48] <LinearInterpol> bahahahha.
[18:22:50] *** Joins: vmx (vmx@moz-4CE8921D.dip0.t-ipconnect.de)
[18:22:58] <Tobba> I'M WRITING THE OPERATING SYSTEM YOU LIL' SHIT
[18:23:06] <Ms2ger> Error
[18:23:13] *** Joins: mindcat (mindcat@82CB3EE9.BED0357D.E47F7BFE.IP)
[18:23:22] <LinearInterpol> Error P3BK4C: OS not found.
[18:23:23] <Matthias247> LinearInterpol: I think that strongly depends on the needs. An embedded developer has other needs than a GUI programmer :)
[18:23:29] *** Joins: bobthenameless (bobthename@moz-A1BB42C4.dhcp.leds.al.charter.com)
[18:23:39] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[18:23:40] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[18:23:40] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[18:23:44] <Tobba> + it likes to throw in really platform specific shit, which I realized was due to me not telling it that it shouldent
[18:23:51] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[18:23:59] <cmr> Tobba: it's easiest to just --emit-llvm and use llc
[18:24:02] <Matthias247> LinearInterpol: but I also think Rust will be be very good in this area
[18:24:04] <LinearInterpol> Matthias247: oh definitely, but jesus. to see what this language has to offer, it's like my wet dream.
[18:24:06] <Tobba> yeah thats the idea I guess
[18:24:17] <Ms2ger> LinearInterpol, tmi :)
[18:24:24] <LinearInterpol> lol.
[18:24:29] <jhasse> Tobba: what does "checkout windows, commit unix line ending mode" break?
[18:24:44] <Tobba> if somoene commits a file in windows line endings it can end up converting them to unix
[18:24:45] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[18:24:51] *** Joins: Ferreus (ferreus@moz-83382453.pools.arcor-ip.net)
[18:24:54] <Ms2ger> jhasse, a terrible git design flaw :)
[18:24:55] <Tobba> resulting in git thinking that the entire file got changed
[18:25:02] <Tobba> this gets hilarious if someone has the exact opposite mode on
[18:25:20] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[18:25:43] <Matthias247> I think it only marks the file as changed with +0/-0 changes
[18:25:54] <Matthias247> put a push of that commit will result in nothing
[18:26:14] <Tobba> my experience with it is that if you fuck around with the line endings it'll mark every line you changed the endings on as changed
[18:26:25] <g3xzh> when i do rustc src/libextra/lib.rs it fails
[18:26:33] <g3xzh> but doing make everything works. 
[18:26:42] <g3xzh> why is that?
[18:26:43] <jhasse> Tobba: That's windows fault for using \r\n in the first place
[18:26:50] <Tobba> eh
[18:26:51] <g3xzh> i don't remember having problem with that
[18:27:00] <Tobba> its not really windows fault, its DOSes fault
[18:27:04] <Tobba> which it wasent really either
[18:27:08] <Tobba> to be honest, its backwards compabilitys fault
[18:27:13] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[18:27:13] *** ChanServ sets mode: +o tjc
[18:27:14] <cmr> g3xzh: what's the error? your rustc is probably too new.
[18:27:16] <jhasse> they got change it. OSX did
[18:27:21] <jhasse> *could
[18:27:27] <Tobba> yeah they probably should have
[18:27:31] <Tobba> but it would break a lot of crap
[18:27:32] <Ms2ger> Well, who used pre-unix macs?
[18:27:35] <g3xzh> g3xzh@djz:~/workspace/rust/src/libextra$ rustc lib.rs 
[18:27:35] <g3xzh> time.rs:35:27: 35:35 error: unresolved import: there is no `timespec` in `std::libc`
[18:27:35] <g3xzh> time.rs:35     use std::libc::{c_int, timespec};
[18:27:35] <g3xzh>                                       ^~~~~~~~
[18:27:35] <g3xzh> time.rs:35:27: 35:35 error: failed to resolve import `std::libc::timespec`
[18:27:36] <g3xzh> time.rs:35     use std::libc::{c_int, timespec};
[18:27:37] <Matthias247> I think as long as everybody commits unix endings it's only a cosmetical problem
[18:27:40] <g3xzh>                                       ^~~~~~~~
[18:27:41] <Tobba> didnt pre-unix macs use
[18:27:42] <g3xzh> and so on
[18:27:52] <Ms2ger> Just CR
[18:27:52] <Tobba> \n\r
[18:27:54] <Tobba> oh god
[18:28:04] <Tobba> yep I remember now
[18:28:10] <Tobba> fucking nightmare
[18:28:15] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Quit: )
[18:28:30] <LinearInterpol> How "complete" is rust's core language, exactly? Being in 0.8 it must be friggin' done. o_o
[18:28:31] <Tobba> actually, lets all just blame teletypes
[18:28:33] <cmr> g3xzh: ok, your rustc is too old.
[18:28:40] <g3xzh> hooo right!
[18:28:41] <cmr> LinearInterpol: well we're releasing 0.9 this week
[18:28:45] <g3xzh> i forgot to make install
[18:28:46] <g3xzh> darn
[18:28:47] <LinearInterpol> Oooo :D
[18:28:48] <g3xzh> thanks
[18:29:06] *** Joins: zmthy (zmthy@moz-EAA7EAA8.dsl.dyn.ihug.co.nz)
[18:29:10] <g3xzh> cmr: 10x
[18:29:35] *** Quits: benjamin__ (benjamin@moz-6503217C.dip0.t-ipconnect.de) (Ping timeout)
[18:29:36] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Connection reset by peer)
[18:29:36] <LinearInterpol> cmr: That sounds like it'll be amazing.
[18:29:37] <cmr> LinearInterpol: the language still has a few major changes coming, but they're to relatively obscure parts of the language
[18:29:52] <LinearInterpol> Oh, sweet. Can you give an example or are you too busy?
[18:30:06] <cmr> @T is being removed, and DST is on its way.
[18:30:10] <cmr> http://smallcultfollowing.com/babysteps/blog/2014/01/05/dst-take-5/
[18:30:21] <bstrie> cmr: that means nothing to anyone who hasn't been following the discussion for months :P
[18:30:35] <cmr> The `box` changes (placement new) too
[18:31:00] *** Quits: zmthy (zmthy@moz-EAA7EAA8.dsl.dyn.ihug.co.nz) (Ping timeout)
[18:31:07] <LinearInterpol> Daaaamn.
[18:31:33] *** Joins: pongad (Mibbit@moz-7E8AAD2E.res.gatech.edu)
[18:31:42] <pongad> \msg nickserv identify Darkapi0!
[18:31:48] <eddyb> ouch
[18:31:51] <pongad> Whoops
[18:31:52] <pongad> :D
[18:31:59] <Ms2ger> You may want to change that pass :)
[18:31:59] <Tobba> good job
[18:32:02] <bstrie> hahahaa
[18:32:03] <pongad> Yup!
[18:32:04] <mletterle> We're going to need another password!
[18:32:09] <eddyb> pour cold water on the burned area
[18:32:09] <pongad> Been using TeX too long
[18:32:14] <mletterle> hunter2
[18:32:14] <cmr> pongad: you should enable autoidentify in your client, prevents things like that.
[18:32:19] <LinearInterpol> DST? Daylight Savings Time? Dynamical Systems Theory? Data Storage Technlogy?
[18:32:23] <bstrie> mletterle: *******?
[18:32:23] <pongad> On mibbit xD
[18:32:24] <cmr> LinearInterpol: see the link
[18:32:25] <Ms2ger> mletterle, all stars?
[18:32:32] <mletterle> <3
[18:32:34] <Ms2ger> LinearInterpol, vectors
[18:32:36] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[18:32:38] *** Quits: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP) (Ping timeout)
[18:32:38] <eddyb> cmr: mozilla needs server password identify
[18:32:41] <LinearInterpol> Ahh.
[18:32:41] <cmr> Dynamically Sized Type
[18:32:52] <LinearInterpol> Oh god, this looks juicy.
[18:32:56] <Matthias247> I read the DST post just today - and found it quite complicated :)
[18:33:14] <LinearInterpol> I'm gonna try to convert one of my haskell friends to Rust.
[18:33:15] <cmr> Matthias247: it's pretty simple compared to the other proposals.
[18:33:15] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[18:33:20] <LinearInterpol> The trait system is awesome.
[18:33:26] <Ms2ger> So imagine how bad those were...
[18:33:31] <cmr> LinearInterpol: rust isn't suitable where haskell is :)
[18:33:42] <bstrie> LinearInterpol: haskell people can't be converted :P if you've self-selected for haskell, then rust won't satisfy you
[18:33:48] <LinearInterpol> eh, well, he uses haskell for h obbying stuff.
[18:33:51] <LinearInterpol> *hobbying
[18:33:53] <Ms2ger> Monads!
[18:33:57] * LinearInterpol shudders.
[18:34:07] <LinearInterpol> category theory scares me.
[18:34:16] <Matthias247> what's the reason for DST? Lesser allocations and indirections?
[18:34:22] <eddyb> LinearInterpol: it will be even better when you'll be able to create a Rc<T> and cast it to Rc<Trait> (or any shared smart pointer)
[18:34:30] * LinearInterpol 's head blows up.
[18:34:31] <mletterle> Will Rust 0.9 at least stop the "oh I haven't fetched latest in two days and everything is broken"?
[18:34:32] <cmr> Matthias247: essentially.
[18:34:43] <cmr> mletterle: no?
[18:34:47] <pongad> Question, how do I change my password? :D:D
[18:34:58] <mletterle> Awesome \o/
[18:35:08] <Matthias247> pongad: /msg nickserv help
[18:35:09] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[18:35:13] <cmr> mletterle: the changes aren't slowing down :)
[18:35:16] <bstrie> pongad: just type it into the chat here. whenever you type your password, all that *we* see is *******
[18:35:21] <LinearInterpol> LOL.
[18:35:27] <jhasse> ********
[18:35:31] <jhasse> oh cool really works
[18:35:38] <benh> don't troll :(
[18:35:39] <cmr> that's not very funny
[18:35:52] <LinearInterpol> *********************
[18:35:56] <Ms2ger> It's the only possible answer :)
[18:35:57] <LinearInterpol> wow, it does.
[18:36:02] <tjc> that's a very ******** thing to say
[18:36:04] <Ms2ger> That's a long password
[18:36:13] <bstrie> cmr benh: http://www.bash.org/?244321
[18:36:15] <mletterle> I miss bash.org (yes I know it's still there)
[18:36:17] <LinearInterpol> Ms2ger: Lots of entropy.
[18:36:23] <cmr> bstrie: old
[18:36:34] *** Parts: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP) ()
[18:36:36] <Ms2ger> cmr, no, ancient :)
[18:36:45] <mletterle> now it's all about how typing social security numbers and credit cards only show up as ###-##-####
[18:37:25] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[18:38:14] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[18:38:43] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[18:38:45] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[18:38:56] <bstrie> mletterle: that's because the TLAs all know your actual identity and can map it to your SSN, and also control all the ISPs and thus censor it for your own security
[18:39:02] <tjc> Well, it does
[18:39:05] <tjc> with this one weird old tip
[18:39:25] <mletterle> Ah, the sweet embrace of the state.... mama will keep you happy and warm *sways*
[18:39:26] <bstrie> rust-buildbot: dance
[18:39:28] <rust-buildbot> <(^.^<)
[18:39:29] <rust-buildbot> <(^.^)>
[18:39:30] <rust-buildbot> (>^.^)>
[18:39:30] <rust-buildbot> (7^.^)7
[18:39:32] <rust-buildbot> (>^.^<)
[18:39:36] <LinearInterpol> I love this channel.
[18:39:38] * LinearInterpol stays.
[18:39:58] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[18:40:15] <bstrie> we're all just pent up for the release
[18:40:26] <bstrie> which should be happening any day now
[18:40:26] <LinearInterpol> I'm so excited, and I just can't hide it.
[18:40:36] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[18:40:47] <bstrie> LinearInterpol: please control yourself. you're liking this just a bit too much.
[18:41:00] <tjc> curb your enthusiasm
[18:41:05] <LinearInterpol> just because I'm licking the monitor doesn't mean I have a problem.
[18:41:22] <bstrie> depends on how much mercury it contains, I guess
[18:41:52] <bstrie> so hey ACTUAL rust question, did the io interfaces change again between 0.8 and 0.9?
[18:41:58] *** Quits: bkircher (bkircher@moz-CF71C9E7.adsl.alicedsl.de) (Client exited)
[18:41:59] <pongad> (Finally learned to change the password, that was embarrassing xD)
[18:42:10] <mletterle> that's... an interesting keyboard: http://www.lenovo.com/images/gallery/1060x596/lenovo-laptop-thinkpad-x1-carbon-2-keyboard-3.jpg
[18:42:12] <bstrie> or, did 0.8 just not get rid of oldio?
[18:42:32] <jhasse> mletterle: no physic F-keys
[18:42:37] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[18:43:01] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[18:43:09] <mletterle> Oh god, I just noticed tilde.
[18:43:11] <jhasse> *physical
[18:43:23] <cmr> bstrie: they did change, though it was mostly some renamings and capitalizations and such
[18:44:21] *** Joins: bkircher (bkircher@moz-CF71C9E7.adsl.alicedsl.de)
[18:44:33] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[18:45:24] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[18:46:25] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[18:47:22] <Tobba> is there any way I can make rustc not generate any metadata
[18:47:37] *** Quits: vmx (vmx@moz-4CE8921D.dip0.t-ipconnect.de) (Ping timeout)
[18:47:50] <cmr> no
[18:47:53] <cmr> well
[18:47:57] <cmr> build an executable
[18:48:03] *** Quits: jakerr (textual@C587E14D.D6CCE4AE.77834EAA.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[18:48:10] <cmr> but beyond that, no. metadata are a core part of our compilation model.
[18:48:15] <Matthias247> cmr: I'm not sure if it's worth it. From my reading it sounds more like a niche feature (because you can only use it on special places). And this could lead to many developers not understanding it
[18:48:23] <Tobba> argh
[18:48:28] <LinearInterpol> question.
[18:48:31] <LinearInterpol> 21<kmc>21 LinearInterpol: the @-boxes in Rust aren't actually garbage collected, yet
[18:48:33] <cmr> you can strip it without penalty if you're not going to link to the library.
[18:48:34] <LinearInterpol> ^ is that true?
[18:48:38] <cmr> LinearInterpol: yes
[18:48:47] <LinearInterpol> Ah.
[18:48:47] <cmr> LinearInterpol: they're reference counted without cycle collection
[18:48:52] <LinearInterpol> Yikes.
[18:48:52] <cmr> don't use @, it's going away :)
[18:48:55] <LinearInterpol> hehe.
[18:48:58] <LinearInterpol> in 0.9?
[18:48:58] <Matthias247> and they will totally disappear
[18:49:02] <Tobba> I wanted to avoid building an executable because it forces the stupid main() function stuff on me, I'll see if I can find my binutils cross somewhere and copy over strip
[18:49:05] <cmr> not yet
[18:49:21] <bstrie> Matthias247: DST should be transparent to any developer who doesn't care about making their own smart pointers
[18:49:33] <cmr> Tobba: build an rlib (static lib), unpack and remove the metadata, repack as a .a ?
[18:49:46] <pongad> Wait, so there is no more GC'ed pointer?
[18:49:46] *** Joins: jakerr (bluehex@C587E14D.D6CCE4AE.77834EAA.IP)
[18:49:50] <Matthias247> bstrie: ok. So it's a niche feature which basically allows more efficient smart pointers?
[18:49:52] <cmr> pongad: there's Gc<T>
[18:49:55] <Tobba> I'm outputting LLVM bitcode right now
[18:49:59] <Tobba> I'll just strip it from the resulting elf file
[18:50:14] <pongad> cmr: I need to read the changes more often
[18:50:16] <cmr> Tobba: metadata isn't in the IR?
[18:50:20] <bstrie> Matthias247: it's a niche feature that does two things: 1) allows us to make the language simpler by moving @-pointers out of the language and into the stdlib
[18:50:33] <Tobba> it actually outputs a global containing the metadata into the IR
[18:50:38] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[18:50:47] <cmr> ah
[18:50:48] <bstrie> Matthias247: 2) allows us to make the *other* specialized pointer types in the stdlib (such as Arc) easier to use by adding sugar for them
[18:50:49] *** Joins: vmx (vmx@moz-4CE8921D.dip0.t-ipconnect.de)
[18:50:58] <cmr> --emit-llvm -S and remove it with your text editor!
[18:51:06] <Tobba> hahahaha
[18:51:22] <bstrie> Matthias247: 3) makes it so that users who want to implement their own smart pointers (such as the people writing Servo) can have their pointers feel like first-class language constructs and not shoddy hacks
[18:51:46] <jhasse> bstrie: why do they want to implement their own smart pointers?
[18:51:46] <Tobba> wait... why is my cross compiled binutils strip utility 5MB
[18:51:48] <Tobba> goddamnit mingw
[18:51:53] *** Quits: vgeddes (vincent.ge@moz-4C6314FC.dsl.mweb.co.za) (Input/output error)
[18:52:04] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[18:52:07] <bstrie> jhasse: for integration with GC'd javascript objects in spidermonkey
[18:52:11] <cmr> jhasse: for integrating with the JS garbage collector
[18:52:19] <jhasse> ahh. nice
[18:52:50] <bstrie> ALSO I *think* that DST means that we no longer have to special-case both ~str and ~[T]?
[18:52:51] <jhasse> Will spidermonkey be ported to rust eventually?
[18:52:53] <bstrie> maybe it doesn't
[18:52:56] <bstrie> I'm not sure
[18:53:10] <cmr> jhasse: doubt it
[18:53:15] <cmr> no plans for it
[18:53:21] <Matthias247> bstrie: ah ok. If you use it for smart pointers you have only one allocation for smart pointer data and actual content
[18:53:26] <jhasse> ok
[18:53:29] <bstrie> jhasse: too soon to even speculate about that. too much work
[18:53:43] *** Joins: maxli (maxli@moz-70F9251D.thefacebook.com)
[18:53:47] <bstrie> integrating with spidermonkey sounds like it's going to be pretty painful, but them's the breaks
[18:54:03] <pongad> It seems to me like we should get to 1.0 before start porting it :P
[18:54:08] <LinearInterpol> ^
[18:54:32] <Tobba> hah, got a better idea which isnt as hacky
[18:54:42] <Tobba> I just passed -fdata-sections to llc and told ld to strip unused sections
[18:54:54] <pongad> Or make some kind of code version updater like Go's gofix. It still doesn't solve everything though.
[18:55:23] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[18:55:47] *** Joins: mleise (marco@moz-850E56A9.pools.arcor-ip.net)
[18:56:12] <mindcat> rusti: "This is Impossible!"
[18:56:31] <mindcat> impossible xD
[18:56:57] *** Joins: Blub\w (wry@620605B3.71150E1A.237AE2BA.IP)
[18:57:08] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[18:57:08] <Matthias247> at least you get compiler errors for most things that break :)
[18:57:42] *** Joins: Mowah (Mowah@moz-E62A9639.cust.bredbandsbolaget.se)
[18:57:55] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Ping timeout)
[18:58:25] <Matthias247> I prefer breaking code instead of things that will silently fail after an update (like javascript :)))
[18:58:29] *** Quits: pongad (Mibbit@moz-7E8AAD2E.res.gatech.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[18:58:32] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[18:58:36] *** Joins: pongad (Mibbit@moz-7E8AAD2E.res.gatech.edu)
[18:58:45] <mindcat> :q
[18:58:53] *** Quits: vmx (vmx@moz-4CE8921D.dip0.t-ipconnect.de) (Ping timeout)
[18:59:06] <mindcat> ok.. I should be type /quit
[18:59:10] *** Quits: mindcat (mindcat@82CB3EE9.BED0357D.E47F7BFE.IP) (Quit: leaving)
[18:59:11] *** Quits: gwty (gwtypc@D015B940.C0AE0958.71EA9E17.IP) (Ping timeout)
[18:59:33] *** Joins: vmx (vmx@moz-4CE8921D.dip0.t-ipconnect.de)
[19:00:12] *** Quits: pongad (Mibbit@moz-7E8AAD2E.res.gatech.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[19:00:19] <rca> make check-stage1 fails with 'can't find crate for std', anyone knows what's happening there?
[19:01:22] *** Quits: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[19:02:33] *** Joins: lucian_ (lucian@303F9692.4304AE1E.CE5E78F6.IP)
[19:03:08] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[19:04:05] <jhasse> rca: could be directory change
[19:04:09] <jhasse> rca: try make clean
[19:04:16] *** Quits: lucian_ (lucian@303F9692.4304AE1E.CE5E78F6.IP) (Ping timeout)
[19:04:16] *** Quits: bobthenameless (bobthename@moz-A1BB42C4.dhcp.leds.al.charter.com) (Ping timeout)
[19:04:35] <jhasse> rca: and if that doesn't help: git clean -xdf (removes all files not known to git)
[19:04:40] *** Joins: moostik (Icedove@moz-2E0A4DA6.minet.net)
[19:05:46] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[19:06:43] *** Quits: g3xzh (g3xzh@moz-76245F0B.red.bezeqint.net) (Quit: Leaving)
[19:06:49] *** Joins: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net)
[19:06:57] <luz> writing to stderr with std::fmt is somewhat ugly
[19:07:13] *** Quits: moostik (Icedove@moz-2E0A4DA6.minet.net) (Ping timeout)
[19:07:24] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Ping timeout)
[19:07:29] <cmr> println!(stderr(), "foo") ?
[19:08:01] <cmr> well, writeln
[19:08:17] *** Joins: zmthy (zmthy@moz-EAA7EAA8.dsl.dyn.ihug.co.nz)
[19:08:23] <cmr> writeln!(&mut stderr(), "foo");
[19:08:25] <cmr> that is somewhat ugly
[19:08:33] <cmr> better than it used to be at least!
[19:08:36] *** Parts: jakerr (bluehex@C587E14D.D6CCE4AE.77834EAA.IP) (Textual IRC Client: www.textualapp.com)
[19:09:46] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Quit: Savago)
[19:10:18] <luz> can you shadow macros?
[19:10:43] <pauls> luz: I... don't know.
[19:11:04] <cmr> yes
[19:11:20] <cmr> although I don't know how well it works with scoping...
[19:11:27] <pauls> My best guess is that it will work, but I'm pretty sure it's not something I thought much about or wrote tests for.
[19:11:46] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[19:11:46] *** ChanServ sets mode: +ao dherman dherman
[19:11:48] <cmr> I don't know if it's shadow as much as "override, old one is gone"
[19:12:07] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[19:12:21] <luz> i want my own error!()
[19:13:04] <pauls> cmr: I think it's sort of moot; I don't think macro definitions obey scope anyways.
[19:13:12] <cmr> pauls: right
[19:13:27] <alan_andrade> oh wow, Is pandoc older/newer in the machines that generate the docs in production ?
[19:13:29] <cmr> luz: that should work.
[19:13:35] <cmr> alan_andrade: probably older.
[19:13:40] <pauls> You can do `{ /*define m!*/} m!`, I think.
[19:14:00] <alan_andrade> I get different results in my machine
[19:14:04] <cmr> alan_andrade: do they need an upgrade?
[19:14:30] <alan_andrade> for instance here: http://static.rust-lang.org/doc/master/complement-cheatsheet.html#ffi-foreign-function-interface
[19:14:39] <alan_andrade> It's supposed to render a table
[19:14:53] <alan_andrade> locally it render a table and looks ok
[19:15:05] *** Joins: nobody (nobody@moz-7E09A266.neo.res.rr.com)
[19:15:14] *** Quits: nobody (nobody@moz-7E09A266.neo.res.rr.com) (Quit: Leaving)
[19:17:01] *** Joins: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net)
[19:17:38] *** Quits: lbdremy_ (lbdremy@3F60B96D.F212BE6C.CE5E78F6.IP) (Ping timeout)
[19:18:04] *** Joins: hugoo (hugo@moz-EBFAC749.net.upcbroadband.cz)
[19:18:10] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Ping timeout)
[19:18:28] *** Quits: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net) (Quit: Leaving)
[19:18:38] *** Joins: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net)
[19:19:21] <steveklabnik> alan_andrade: we haven't used pnadoc in a long time
[19:19:22] <steveklabnik> pandoc
[19:19:29] <cmr> steveklabnik: not true
[19:19:33] <steveklabnik> oh?
[19:19:34] <cmr> we use pandoc for the prose documentation
[19:19:35] <steveklabnik> we switched back?
[19:19:38] <cmr> we don't use pandoc in *rustdoc*
[19:19:40] <steveklabnik> ahhhhhhhhhhhhhh
[19:19:45] * steveklabnik updates his mental cache
[19:19:59] <brson> i'd like to switch to rustdoc for everything
[19:20:23] <Matthias247> is there already a websocket library for rust?
[19:20:26] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[19:20:48] <adridu59> alan_andrade: 1.9.1.1
[19:20:52] <brson> alan_andrade: i can possibly update pandoc on the doc builders later. do you know what the minimum version we need is? maybe we should alter configure
[19:21:04] <brson> ... to require the correct version
[19:21:05] <adridu59> alan_andrade: brson checked on one machine and it was 1.9.1.1 iirc
[19:21:06] <alan_andrade> pandoc 1.12.2.1
[19:21:15] *** Quits: zmthy (zmthy@moz-EAA7EAA8.dsl.dyn.ihug.co.nz) (Ping timeout)
[19:21:45] <adridu59> ah, I'm going through the log
[19:22:02] *** Joins: skade (skade@moz-B73EE4D5.pools.arcor-ip.net)
[19:22:30] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[19:22:50] *** Joins: bobthenameless (bobthename@moz-A1BB42C4.dhcp.leds.al.charter.com)
[19:23:23] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[19:24:14] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[19:24:44] *** Quits: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP) (Quit: c-a)
[19:24:44] *** Quits: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net) (Quit: Leaving)
[19:24:53] *** Quits: StarLight (StarLight@moz-9422361.dynamic.avangarddsl.ru) (Ping timeout)
[19:24:54] *** Joins: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net)
[19:25:00] <alan_andrade> brson rustdoc can generate TOC's just as pandoc ?
[19:25:20] <adridu59> --toc-depth was added in pandoc 1.10
[19:25:28] <steveklabnik> Matthias247: not that i'm aware of
[19:25:34] <Matthias247> ok
[19:25:46] <Matthias247> maybe I will try to write one
[19:25:46] <adridu59> rustdoc is meant for code documentation
[19:26:11] <alan_andrade> Then why use for everything ?
[19:26:25] <Tobba> is there any reason to make a module not private?
[19:26:40] <Tobba> when they're private I cant seem to access them externally, making it kinda pointless
[19:26:48] <adridu59> it's a different kind of tool, it parses code and surrounding comments and it shows functions modules etc. with a hierarchy and surrounding comments
[19:26:57] <Matthias247> already have done a full async websocket implementation in C++. Guess with synchronous Rust I/O it would be easier :)
[19:27:05] <adridu59> definitely not meant for raw text doc afaik
[19:27:20] <alan_andrade> hmm, ok.
[19:27:46] <adridu59> but that's ok, pandoc is a pretty good tool
[19:27:58] <alan_andrade> Something that would be nice though, is to test the code blocks from the complementary documentation such as file://localhost/Users/alan/lang/rust/doc/complement-cheatsheet.html#how-do-i-convert-x-to-y
[19:28:11] <alan_andrade> oh damn, hold on
[19:28:12] <Matthias247> :-)
[19:28:24] <alan_andrade> http://static.rust-lang.org/doc/master/complement-cheatsheet.html#how-do-i-convert-x-to-y
[19:28:30] *** Joins: heftig (heftig@moz-C2A68214.dip0.t-ipconnect.de)
[19:28:51] <adridu59> it's possible to do, you just need to it to the tests target
[19:29:05] *** Joins: StarLight (StarLight@moz-C0C91E43.dynamic.avangarddsl.ru)
[19:29:26] <Tobba> oh and, how would you get the length of a string/access each character of it without using the standard library?
[19:29:27] <alan_andrade> yeah, in the same way we do with the tutorials, that are now guides.
[19:29:41] <adridu59> also it looks like syntax highlight does not work with these files?
[19:29:47] <cmr> Tobba: see rust-core
[19:29:52] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[19:29:54] <adridu59> I think it needs ~~~~ instead of ```rust
[19:29:58] <Tobba> oh boy
[19:30:06] <brson> alan_andrade: no. rustdoc will need to be extended
[19:30:13] <alan_andrade> hm, it works locally.
[19:30:18] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[19:30:24] <alan_andrade> brson ahhh, gotcha
[19:30:51] <cmr> Tobba: you'll need a utf8 decoder for a char iterator
[19:30:55] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Ping timeout)
[19:31:18] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[19:31:18] *** ChanServ sets mode: +o tjc
[19:31:22] <Tobba> oh boy
[19:31:22] <adridu59> brson: is some more things to be added to rust before 0.9?
[19:31:30] <adridu59> there*
[19:31:38] <Tobba> this is also why utf8 bugs me
[19:31:49] <Tobba> if you find bad UTF8 sequences in an iterator, what the fuck are you supposed to do
[19:31:53] <cmr> Tobba: so don't use ~str/&str, use byte vectors.
[19:32:08] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Input/output error)
[19:32:08] <Tobba> yeah but the compiler passes me &'static str
[19:32:14] <Tobba> whenever I use constant strings
[19:32:16] <cmr> bytes!("some str")
[19:32:19] *** Quits: dhedlund (dhedlund@moz-81171707.ptld.qwest.net) (Ping timeout)
[19:32:31] <Tobba> fuck that, I'll see what I can do about this
[19:32:40] <brson> adridu59: just https://github.com/mozilla/rust/pull/11364 and some followups to fix the the various obvious issues in the new docs
[19:32:41] <diverse> cmr: from "Reading Old Things" you need to change `simple` to `simply`
[19:32:51] *** Joins: dhedlund (dhedlund@moz-1F634AB5.ptld.qwest.net)
[19:32:54] <cmr> diverse: hey someone who actually reads my blog! hi :)
[19:33:42] <Mathuin> could you give me the URL ?
[19:33:56] <Mathuin> it must be laden with rust stuff
[19:34:02] <cmr> Mathuin: http://cmr.github.io/
[19:34:18] <cmr> yeah I don't blog frequently, but I'm going to start doing so
[19:34:22] <cmr> to improve my writing etc
[19:34:23] *** Joins: dhedlund_ (dhedlund@moz-3DE0CA4A.ptld.qwest.net)
[19:34:28] <Mathuin> you should
[19:34:44] <adridu59> brson: ok; that pointer guide is a good thing to have
[19:34:46] *** Quits: dhedlund (dhedlund@moz-1F634AB5.ptld.qwest.net) (Ping timeout)
[19:34:46] <cmr> diverse: fixed, thanks
[19:34:53] <Mathuin> In fact, I've already stumbled upon Â«This week in gitÂ»
[19:34:55] <Mathuin> *rust
[19:34:58] <diverse> cmr: np
[19:34:59] *** dhedlund_ is now known as dhedlund
[19:36:11] <adridu59> brson: are you planing some changes on the website or just keep like it is and add a link to the doc index?
[19:36:49] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[19:37:04] <adridu59> honestly I think that having libstd doc or tutorial for begineers at hand is a good thign
[19:37:31] *** Quits: dhedlund (dhedlund@moz-3DE0CA4A.ptld.qwest.net) (Ping timeout)
[19:38:18] *** Joins: dhedlund (dhedlund@moz-7094DF93.ptld.qwest.net)
[19:38:21] <brson> adridu59: the website needs to be changed slightly to link to the new doc index. I haven't thought about it much yet
[19:38:47] <brson> either just a link to the index or a link to the tutorial + index
[19:38:55] *** Quits: Liothen (liothen@moz-92B99500.org) (Quit: Textual IRC Client: www.textualapp.com)
[19:39:03] <brson> put master first and 0.9 second this time
[19:39:21] *** Quits: vmx (vmx@moz-4CE8921D.dip0.t-ipconnect.de) (Quit: Leaving)
[19:39:41] <brson> adridu59: do you want to do the website mods for 0.9?
[19:39:41] <adridu59> BTW I had implemented OS detection a while ago; but I'm not sure that it's really important since we only have 2 different packages
[19:39:48] <Gordon> is it intended that I must import std and use std::foo in every file? today I couldn't even compile a program because 'float' was of unknown type and I didn't know to import it from std
[19:39:54] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Client exited)
[19:39:57] <brson> adridu59: not important yet. when we have binaries it will be
[19:40:00] <Ms2ger> float still exists?
[19:40:15] <Gordon> oh, it doesn't exist? well that explains a lot
[19:40:17] *** Joins: gwty (gwtypc@B8540510.B7CA1378.F44414AF.IP)
[19:40:17] <adridu59> brson: what would you want?
[19:40:53] <Ms2ger> Gordon, the float type died, because it meant f64 in rust and f32 in C
[19:41:42] <adridu59> brson: same as posted in the HTML issue? btw this website is really cool: http://golo-lang.org/
[19:41:46] *** Joins: nobody (nobody@moz-7E09A266.neo.res.rr.com)
[19:42:00] <adridu59> (imo)
[19:42:07] <Gordon> back to my other question, is it intended that I must import std and use std::foo in every .rs file?
[19:42:24] <cmr> Gordon: for use, yes.
[19:42:28] <cmr> not sure what you mean by import std
[19:42:42] <Gordon> extern mod std;
[19:42:47] <brson> adridu59: no, nothing that ambitious - we have to do this today. now that we have a documontation index we need the website to link to it somewhere, so that's going to require reorganizing the headers a bit
[19:43:10] *** Quits: bluegreen (zaphood@EEE9EC9D.10726BB3.8CAEFE8D.IP) (Z:lined (dronebot))
[19:43:13] <Matthias247> Gordon: extern mod std; is automatically done for you, you don't have to do it explicitely
[19:43:36] <brson> maybe `Other docs` can just link to the index, and we can have on for master and one for 0.9
[19:43:45] <Matthias247> and use std::prelude is also automatically inserted. So you get all these types without a http://static.rust-lang.org/doc/master/std/prelude/index.html
[19:44:00] <Gordon> not in my rust, at least in files that do not contain the main function
[19:45:04] <adridu59> brson: should point at 0.8 for now I guess? alan_andrade: can you update your PR for that?
[19:45:44] *** Quits: robitex (Mibbit@moz-59832C84.libero.it) (Quit: http://www.mibbit.com ajax IRC Client)
[19:45:56] <brson> adridu59: nah, just go straight to 0.9. will make it live when we do the release
[19:45:58] <cmr> Gordon: I direct you to the module tutorial: http://static.rust-lang.org/doc/master/tutorial.html#crates-and-the-module-system
[19:45:59] <Matthias247> Gordon: it's described here http://static.rust-lang.org/doc/master/tutorial.html#crates-and-the-module-system  in chapter 18.11
[19:46:07] *** Joins: Liothen (liothen@moz-92B99500.org)
[19:46:27] <alan_andrade> alright then, so "Other Docs" will point to index.html
[19:46:39] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Quit: )
[19:47:03] <adridu59> I'm silly, 0.8 doesn't even have it brson: and change the other links too?
[19:47:15] <adridu59> I mean to 0.9
[19:49:14] <nrc> I often hear that "rustc is pretty old, and not really idiomatic Rust". Is there some code that is agreed on to be idiomatic Rust. I.e., good to learn good style from?
[19:49:33] <nrc> And/or (even better) a discussion of why?
[19:49:44] *** Joins: zmthy (zmthy@moz-EAA7EAA8.dsl.dyn.ihug.co.nz)
[19:49:50] <cmr> nrc: the rust-core code is pretty good.
[19:50:25] <nrc> cmr: what exactly do you mean by rust-core?
[19:51:04] <Mathuin> nrc: there was a dcpu16 interpreter which was considered to be idiomatic
[19:51:20] <brson> adridu59: yes, please
[19:51:24] <brson> adridu59: thanks
[19:51:34] *** Quits: zmthy (zmthy@moz-EAA7EAA8.dsl.dyn.ihug.co.nz) (Ping timeout)
[19:51:49] *** Joins: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP)
[19:52:22] <Mathuin> nrc: https://github.com/thestinger/rust-core
[19:53:05] <nrc> cmr, Mathuin: thanks!
[19:53:32] *** flaper87|afk is now known as flaper87
[19:54:26] <alan_andrade> adridu59 https://github.com/graydon/rust-www/pull/19
[19:54:28] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Client exited)
[19:54:49] *** Joins: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP)
[19:54:49] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[19:55:36] *** Quits: nif (nif@moz-8181E2AC.oberlin.net) (Ping timeout)
[19:55:40] *** Quits: jadbaires (jadrian@moz-9AE9F7C5.dsl.telepac.pt) (Quit: Konversation terminated!)
[19:55:46] *** Joins: jadbaires (jadrian@7C3E5A47.7DF3BC65.6119BA41.IP)
[19:55:59] <brson> alan_andrade: thanks. adridu59: sorry, i didn't realize alan was already working on that!
[19:56:16] * brson trying to upgrade pandoc on the doc builder
[19:56:20] <Gordon> what I mean is this: https://gist.github.com/anonymous/9735e415ea99f5947067
[19:56:32] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Ping timeout)
[19:56:43] *** Joins: nif (nif@moz-8181E2AC.oberlin.net)
[19:57:07] <rca> jhasse: the git clean seems to have worked, thanks!
[19:57:57] *** Joins: pzol (pzol@moz-553BEE64.dynamic.chello.pl)
[19:57:57] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Client exited)
[19:58:25] <Gordon> the documentation says that there is no need to declare extern mod std; or use std::prelude::*;
[19:58:29] <luz> wiki page for today's meeting says 01/07/2013
[19:59:02] <brson> luz: can you fix it?
[19:59:19] *** Joins: dhedlund_ (dhedlund@moz-988AE16E.ptld.qwest.net)
[19:59:19] <luz> i don't know if it'll break links
[19:59:20] <cmr> Gordon: the extern mod std is not required at all
[19:59:30] *** Quits: dhedlund (dhedlund@moz-7094DF93.ptld.qwest.net) (Ping timeout)
[19:59:39] *** dhedlund_ is now known as dhedlund
[19:59:42] <brson> it'll break the /r/rust link, but maybe bstrie can repair it
[19:59:52] <Gordon> the example I showed doesn't compile without it
[20:00:00] <cmr> yes it does?
[20:00:11] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[20:00:24] *** Quits: maxli (maxli@moz-70F9251D.thefacebook.com) (Quit: Leaving.)
[20:00:44] <bstrie> brson: what link am I fixing
[20:00:45] <tautologico> is the module you're compiling not at the root?
[20:01:26] *** Joins: dhedlund_ (dhedlund@moz-D5D07BE4.ptld.qwest.net)
[20:01:36] *** Quits: dhedlund (dhedlund@moz-988AE16E.ptld.qwest.net) (Ping timeout)
[20:01:42] <brson> bstrie: today's minutes were posted to the wrong wiki page, so fixing it will break the reddit story
[20:01:46] *** dhedlund_ is now known as dhedlund
[20:02:12] <bstrie> I'd rather just delete the link and resubmit it
[20:02:19] <bstrie> sorry portmanteaufu
[20:02:27] <adridu59> brson: np!
[20:03:37] <jhasse> rca: np :) Glad to hear
[20:03:43] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:03:47] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[20:04:15] <luz> bstrie, should be https://github.com/mozilla/rust/wiki/Meeting-weekly-2014-01-07 now
[20:04:24] <adridu59> alan_andrade: can you place master before 0.9 for all links, also can you create an other docs link for both 0.9 and master?
[20:04:25] <luz> but i linked it on the old page as well
[20:05:30] <alan_andrade> oh yeah , forgot about that one
[20:06:09] <brson> luz: thanks! can you update this linke too https://github.com/mozilla/rust/wiki/Meetings
[20:06:38] *** Quits: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net) (Quit: Leaving.)
[20:06:52] <itdaniher> ais there a clean workaround for #11243, which prevents rustpkg from linking against libnative?
[20:06:56] <adridu59> I find the recent changes in both code and docs really exciting
[20:07:34] <itdaniher> trying to compile libs that need tasks run in their own OS thread
[20:07:48] <Tobba> ugh, trying to implement a length method for the str type
[20:07:50] <Tobba> its not working too well
[20:08:14] <Tobba> I'm trying to do something like impl<'a> &'a str { } but thats not working too well
[20:08:15] <acrichto> itdaniher: you can pass -L to rustpkg manually, but figuring out the path to pass may be difficult
[20:08:24] <acrichto> itdaniher: you can also just build with rustc instead
[20:08:35] <luz> brson, done
[20:08:50] <cmr> Tobba: you need a dummy trait to implement on it
[20:08:55] <Tobba> well fuck
[20:09:22] *** Joins: astropirate (astropirat@moz-13705238.hfc.comcastbusiness.net)
[20:09:35] <cmr> because coherence
[20:09:57] <kimundi> Tobba: Look in libstds str module to see how to implement that stuff for &str
[20:10:03] <itdaniher> rustc still seems to be ignoring my `extern mod native` declaration...
[20:10:22] <Tobba> oh, thats a good idea
[20:10:45] *** Joins: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net)
[20:10:48] *** Quits: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP) (Quit: Konversation terminated!)
[20:10:56] *** Joins: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP)
[20:10:59] <Matthias247> brson: I would advise against blocking channels. I they they can produce deadlocks as easily as mutexes. And I thought Rust was about minimizing such errors
[20:11:02] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[20:11:14] <nif> all tests passed!  woop.
[20:11:22] <kimundi> Tobba: Btw, not sure if your early "what is a utf8 iterator supposed to do with invalid utf8" was meant in general - but in Rust all string slices are guaranteed to contain valid utf8
[20:11:28] *** Joins: zmthy (zmthy@moz-EAA7EAA8.dsl.dyn.ihug.co.nz)
[20:11:43] <Tobba> is that verified when the string is created?
[20:11:50] <kimundi> yes
[20:11:53] <Tobba> ew
[20:12:01] <kimundi> its the reason we have a seperate ~str type at all
[20:12:02] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:12:04] <kimundi> ew?
[20:12:06] <Tobba> fair enough
[20:12:14] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[20:12:15] <Tobba> feels like it could induce a lot of pointless checking though
[20:13:02] <cmr> well it's not checked for string literals, or slices etc.
[20:13:06] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[20:13:07] <cmr> only when creating a str from bytes
[20:13:08] *** Quits: zmthy (zmthy@moz-EAA7EAA8.dsl.dyn.ihug.co.nz) (Ping timeout)
[20:13:09] <kimundi> Well, in cases where it knows the source is utf8 no check is neccessary, and if you know yourself that the source is utf8 you can just use the raw functions to convert
[20:13:20] <brson> nif: \o/
[20:13:31] <kimundi> things like string literals etc are simply generated with valid utf8
[20:13:36] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[20:13:38] <kimundi> no check neccessary
[20:13:51] <itdaniher> ah, there we go. hrmph.
[20:13:56] <brson> should I try to convert the 'borrowed pointer' terminology to 'reference' for 0.9?
[20:14:12] <kimundi> brson: Yes! The ssoner the better
[20:14:25] <cmr> brson: I'd love that
[20:14:37] <steveklabnik> that'd be great
[20:14:43] *** Joins: int3_ (int3_@moz-E7C7BC00.omega80.maxonline.com.sg)
[20:15:17] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[20:15:23] <adridu59> alan_andrade: did you just push? there's no `Other docs` link for 0.9
[20:15:33] *** Quits: int3_ (int3_@moz-E7C7BC00.omega80.maxonline.com.sg) (Client exited)
[20:15:47] <bstrie> brson: I've been meaning to do that for a long time, please make it happen! though I was torn between "reference" and "borrowed reference"
[20:15:53] <Tobba> I still cant get it to work with: impl<'a> dummy for &'a str { }
[20:15:59] <Tobba> it complains about the lifetime specifier
[20:16:18] <cmr> Tobba: what rust version are you using?
[20:16:28] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[20:16:29] <kimundi> Tobba: how is the dummy trait defined?
[20:16:34] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[20:17:10] <Tobba> trait dummy { fn len(&self) -> uint; }
[20:17:24] <Tobba> rustc 0.8
[20:17:30] <cmr> ok that's your problem
[20:17:33] *** Quits: sellout (Adium@moz-76D71F1A.hlrn.qwest.net) (Quit: Leaving.)
[20:17:33] <cmr> s/'a/'self
[20:17:40] <kimundi> Tobba: then replace 'a with 'Self
[20:17:44] <kimundi> err, 'self
[20:17:53] <astropirate> Can I program my submarine in rust?
[20:17:56] <astropirate> or will it sink?
[20:18:19] <Tobba> I dont think rust is a good material to build a submarine with
[20:18:30] <kimundi> astropirate: If your submarine is supported by llvm and has support in rustc, then yes :P
[20:18:44] <Tobba> error: internal compiler error: unexpected failure
[20:18:52] <kimundi> lol
[20:19:00] <Tobba> this is not going terribly well for me
[20:19:08] <alan_andrade> adridu59 my bad, it's there now
[20:19:10] <kimundi> Can you use master?
[20:19:13] <cmr> Tobba: every cent of advice you've gotten in this channel is for rust master
[20:19:15] <Tobba> I'll try and compile it
[20:19:31] <diverse> rust master or wait for 0.9
[20:19:46] <Tobba> I tried to compile it yesterday but 4 dependencies in I just gave up
[20:20:01] <kimundi> linux or windows?
[20:20:05] <Tobba> windows
[20:20:09] <Matthias247> I did it last week in windows. Wasn't too difficult with the guide
[20:20:10] <adridu59> alan_andrade: call you call the first one master and the second one 0.9?
[20:20:15] *** Quits: pzol (pzol@moz-553BEE64.dynamic.chello.pl) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[20:20:15] <kimundi> .... Ltes try the 0.8 route again
[20:20:22] <Tobba> which is why everything is going worse by orders of magnitude
[20:20:27] <Tobba> I'll see if I can compile it
[20:20:40] <Matthias247> Tobba: you used that guide? https://github.com/mozilla/rust/wiki/Note-getting-started-developing-Rust
[20:21:11] <kimundi> Tobba: In all seriousness, that Dummy trait should not cause an ICE on its own
[20:21:18] <Tobba> good idea actually
[20:21:30] <kimundi> could you pastebin a example of the code that causes the error for you?
[20:21:44] <Tobba> I totally ignored that page after it didnt contain anything on actually getting the broken MinGW download to work
[20:21:45] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[20:21:50] <Tobba> I'll just try compiling 0.9 first
[20:21:54] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[20:22:31] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[20:22:47] <kmc> brson: +1 for "reference"
[20:23:03] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[20:23:46] <brson> ok, i'll do the borrowed pointer to reference rename
[20:23:55] <diverse> I like thinking & as 'reference' like in C, so +1 vote from me
[20:24:01] <bstrie> brson: careful with the release, looks like github just made a big change to their webpage hosting
[20:24:17] <bstrie> I feel like this means that rust-lang.org will go down at some point because of misconfiguration
[20:24:23] *** Joins: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP)
[20:24:32] <bstrie> brson: https://github.com/blog/1715-faster-more-awesome-github-pages
[20:24:35] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[20:24:35] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[20:24:37] <Gordon> i also think of &T as reference to a T
[20:24:37] <bjz> +1 for reference
[20:24:44] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[20:24:55] <bjz> we already have `ref` in patterns too
[20:25:04] <bjz> not `brorrow`
[20:25:24] *** Joins: sprog (Mibbit@moz-6ECB0398.bredband.comhem.se)
[20:25:26] *** Joins: dmckeone (dmckeone@moz-7652413D.cg.shawcable.net)
[20:25:32] <Matthias247> I also think reference is better. But on the other hand other language don't require you to dereference a reference (only pointer)
[20:25:59] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[20:26:27] *** Quits: sprog (Mibbit@moz-6ECB0398.bredband.comhem.se) (Quit: http://www.mibbit.com ajax IRC Client)
[20:27:35] <bjz> 'borrowed pointers' just confuses things. It's foreign terminology. makes us seem like we have more pointer types than we actually do.
[20:28:30] <brson> bstrie: i don't think our cname is set up according to their current guidelines
[20:28:39] <bjz> but tehn again, I've argued against going with the 'common terminology' in the past, so that might be a poor argument
[20:29:33] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[20:30:25] <Gordon> borrowed pointer also sounds like something radically different from C++'s reference
[20:30:29] <bstrie> brson: well then be careful, it would be a bad time to break the site :P
[20:30:30] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[20:32:05] <bjz> Gordon: indeed. whilst we have extra semantics regarding lifetimes, and better checks, it's close
[20:32:14] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Ping timeout)
[20:32:29] <bjz> also fits in with the terminology by-ref/by-val
[20:32:36] <strcat> borrowed pointers are first-class values and C++ references aren't
[20:32:47] <strcat> but it doesn't really matter
[20:32:48] <bjz> strcat: true
[20:33:38] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[20:34:07] <alan_andrade> adridu59: I did, but it's fixed.
[20:34:08] *** Joins: mib_hynbwr (Mibbit@moz-FA84AA83.cm-7-5d.dynamic.ziggo.nl)
[20:34:14] <kmc> I like to think of Rust's pointer types as formalizing & checking the rules that are already followed by convention in C++
[20:34:36] <itdaniher> is there a clean way to request termination of all running tasks? "unsafe {libc::funcs::c95::stdlib::exit(1);}" isn't great.
[20:34:37] *** Quits: jackneill (jackneill@moz-57D933EE.pool.digikabel.hu) (Ping timeout)
[20:34:58] * kmc . o O ( asm!("ud2"); )
[20:35:01] * alan_andrade needs to slow down making "fast" changes.
[20:35:05] <kimundi> itdaniher: Its also memory unsafe :P
[20:35:10] <strcat> itdaniher: no, there's no clean way to kill a task
[20:35:19] <strcat> there isn't in most languages
[20:35:20] <adridu59> alan_andrade: sorry for the nit but can you add a `(master)` annotation for consistency on the first Other docs thingy
[20:35:21] <adridu59> ?
[20:35:30] <alan_andrade> of course!
[20:35:45] *** Joins: lbdremy_ (lbdremy@moz-323EC907.dynamic.dsl.as9105.com)
[20:35:51] <adridu59> brson: what release date shall be put for 0.9 on the website?
[20:36:02] *** Quits: mib_hynbwr (Mibbit@moz-FA84AA83.cm-7-5d.dynamic.ziggo.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[20:36:07] <strcat> itdaniher: rust could include 'yield points' where a linked failure can happen as it once did, but you still can't kill a task doing a 3 hour calculation in a loop, only ones calling places with those yield points
[20:36:26] <strcat> and yes exit() is probably memory unsafe due to atexit handlers in libuv
[20:36:38] <strcat> but there's _Exit
[20:36:46] <adridu59> because January 7th seems like a tight timing :p (cc alan_andrade)
[20:37:47] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[20:37:48] <itdaniher> hm, so I guess one solution would be to add a set of ports, one for each task, and if try_recv is True, break?
[20:37:55] <itdaniher> strcat: _Exit?
[20:37:59] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[20:37:59] *** Quits: mpiechotka (mpiechotka@moz-A61AF615.dynamic.mnet-online.de) (Ping timeout)
[20:38:08] <strcat> itdaniher: exit without calling atexit handlers
[20:38:23] <strcat> more unclean, but not going to ever be unsafe
[20:38:31] <itdaniher> hmm
[20:39:05] <itdaniher> atexit handlers include things like Drops, I'd assume?
[20:39:08] <brson> adridu59: january 9th
[20:39:09] <cmr> no
[20:39:23] <cmr> exit won't unwind/call destructors
[20:39:29] <cmr> atexit is a C runtime thing
[20:39:35] * brson lunch
[20:39:40] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[20:39:45] <itdaniher> the kernel ought to free memory allocated by a process on process exit, at least
[20:40:15] <diverse> brson: the 9th as in 0.9? :P
[20:40:15] <nobody> howdy folks, are there known commits of rust and chris-morgan/rust-http that work with each other?
[20:40:24] <strcat> itdaniher: not what atexit handlers are for
[20:40:36] <sfackler> nobody: rust master and rust-http master should
[20:40:38] <nobody> getting tons of errors with both 0.8 and master
[20:40:38] <strcat> an example of a standard atexit handler is flushing stdio buffers
[20:40:44] <itdaniher> gotcha
[20:40:52] <cmr> nobody: what errors on master? it's in CI, it shouldn't ever break.
[20:41:29] <nobody> i'll pull them up, sec
[20:41:44] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[20:42:00] <nobody> side question, is rustpkg in master working? i had to try compiling rust-http by hand
[20:42:17] <cmr> nobody: rust-http is built with make, not rustpkg.
[20:42:18] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[20:42:19] *** Quits: hoverbear (hoverbear@moz-2789E775.wireless.uvic.ca) (Quit: Taking a nap.)
[20:42:26] <cmr> see its readme
[20:42:28] *** Joins: hoverbear (hoverbear@moz-2789E775.wireless.uvic.ca)
[20:42:47] <nobody> so clone, then make
[20:42:48] <Tobba> ugh
[20:42:52] <Tobba> I tried to build master and llvm-tblgen crashed
[20:42:53] <nobody> i did the first half right :P
[20:42:58] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[20:42:59] <Tobba> how did that even happen
[20:43:18] <nobody> here's the first error - src/http/server/response.rs:5:4: 5:10 error: unresolved import. maybe a missing `extern mod buffer`?
[20:43:37] <cmr> nobody: yeah you just need to run make I think
[20:43:51] <Tobba> argh I'll just replace the mingw built tblgen with my own one that doesnt suck
[20:43:53] <adridu59> alan_andrade: brson said January 9th :)
[20:43:55] <cmr> it does some codegen, rust-http isn't complete on its own
[20:43:58] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[20:44:05] <phil_> strcat: i hear rusti is running on your laptop
[20:44:06] <nobody> thought i did, but i'll give it another go, ty
[20:44:11] <diverse> sounds like 'checked' pointers would be better than using 'borrowed', but i like 'reference'
[20:44:19] <strcat> phil_: yes, why?
[20:44:19] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[20:44:32] <phil_> any interest in putting it on a stranger's vps?
[20:44:33] <adridu59> lgtm otherwise
[20:44:46] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[20:45:04] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[20:45:06] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[20:46:02] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[20:46:07] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[20:46:23] <Tobba>   Fault Module Name:	libstdc++-6.dll
[20:46:30] <Tobba> gee wonder why
[20:46:50] <strcat> phil_: well, maybe, but it needs a recent linux kernel
[20:47:01] <phil_> how recent
[20:47:13] <phil_>  3.2.0-4-amd64 #1 SMP Debian 3.2.41-2+deb7u2 x86_64 GNU/Linux
[20:47:23] <phil_> i imagine thats not recent enough
[20:47:24] <Tobba> why would an IRC bot need a recent kernel
[20:47:30] <phil_> debian being a bit behind the times
[20:47:56] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Ping timeout)
[20:47:57] <diverse> phil_: you can always build the latest kernel manually.
[20:48:06] *** Joins: lenstr (lenstr@86F52BF9.9636F313.7A27613B.IP)
[20:48:10] <phil_> i am far, far too lazy for that
[20:48:29] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[20:48:42] <adridu59> diverse: doesn't have the stability guarantees of a maintained debian release; and I think stability is one of the most proeminent reasons for using debian
[20:49:26] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[20:50:50] <strcat> adridu59: debian isn't really very stable as they don't backport bug fixes ;p
[20:50:57] <nobody> cmr- got thee same error
[20:51:02] <diverse> adridu59: if stability is a concern, how about the longterm kernels? Like the 3.10.25 version on kernel.org atm?
[20:51:06] *** Quits: bkircher (bkircher@moz-CF71C9E7.adsl.alicedsl.de) (Quit: Leaving...)
[20:51:07] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[20:51:29] <nobody> ran make all, then cp -r src/http/ ../../Learning/rust-web-stuff/src/http
[20:51:33] <strcat> adridu59: they only backport most important security fixes
[20:51:36] <phil_> i am a bit curious as to why rusti needs a newish kernel though
[20:51:43] <strcat> it's not like RHEL where you get backported fixes
[20:51:46] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[20:51:46] <strcat> phil_: cgroups, namespaces
[20:51:52] <adridu59> I see... I use lubuntu personally these days
[20:51:52] <phil_> ah
[20:51:58] *** Parts: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) ()
[20:51:58] *** Quits: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net) (Ping timeout)
[20:52:03] <adridu59> Arch is cool if you want to reinvent the wheel :p
[20:52:06] <nobody> and http/generated/*.rs seems to have been populated ok
[20:52:09] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[20:52:52] *** Joins: lenstr_ (lenstr@199F009F.9636F313.7A27613B.IP)
[20:52:59] <strcat> phil_: since it doesn't spawn a separate VM for each but needs sandboxing
[20:53:12] <strcat> uses https://github.com/thestinger/playpen
[20:53:17] <phil_> oh, thats a pretty solid idea
[20:53:19] *** Quits: lenstr (lenstr@86F52BF9.9636F313.7A27613B.IP) (Ping timeout)
[20:53:25] <strcat> which I should actually update to include CLONE_NEWUSER which requires 3.12
[20:53:26] <phil_> given that youre executing weird ass code
[20:53:35] <strcat> phil_: yeah
[20:53:40] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[20:53:40] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:53:46] <strcat> for example, it uses the cgroup to kill the process tree after a timeout
[20:53:48] <strcat> and to limit mem usage
[20:54:04] <strcat> uses namespaces for isolation, and seccomp for a syscall whitelist
[20:54:35] <strcat> and the root is read-only so you can spawn 5000 or whatever on the same one (the intent being it can be used for a widely used web app)
[20:54:47] <strcat> without heavyweight copy-on-write like qemu
[20:54:55] <phil_> nice
[20:55:35] <strcat> it's over-engineered for an irc bot but that wasn't really the long-term goal, I'd like to have all the code samples in the rust tutorials be executable/editable
[20:55:55] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Quit: zztr)
[20:56:02] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[20:56:26] <strcat> so having only the overhead of starting up the playpen process, rustc, then the code itself is nice
[20:56:28] <Tobba> ah yes there we go
[20:56:31] <adridu59> some sort of Google AppEngine
[20:56:35] <Tobba> I think rust master is properly building now
[20:56:50] <phil_> i dont think its overengineered tbh
[20:56:57] <adridu59> Tobba: what was wrong?
[20:57:00] <phil_> if youre running arbitrary code from people you dont know
[20:57:02] <Tobba> well
[20:57:04] <Tobba> nicely enough
[20:57:13] <Tobba> the mingw build on the github page requries downgraded libstdc++
[20:57:17] <Tobba> llvm requreis upgraded
[20:57:19] <Tobba> requires*
[20:57:22] <Tobba> otherwise it just crashes
[20:57:29] <strcat> phil_: yeah, I started in lxc but it's not sandboxed enough + mangles the root and needs one per process ;p
[20:57:37] <Tobba> (and this is why I hate mingw builds)
[20:57:43] <phil_> i dunno what lxc is cuz im the best
[20:57:49] <adridu59> Tobba: are you using 0.8 release?
[20:58:01] <Tobba> well I was until I had to break it to get master to work
[20:58:30] <strcat> phil_: lxc/docker are the crappy, but widely used frontends to namespaces ;p
[20:58:40] <phil_> ah
[20:58:59] <diverse> strcat: sounds like playpen is more secure?
[20:59:48] <strcat> playpen is meant to be a secure application sandbox for uncooperative applications, you could allow only read/write/exit if you wanted
[21:00:00] <strcat> with a 2 second timeout and 64MiB memory limit, or whatever
[21:00:50] *** Quits: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net) (Quit: Leaving.)
[21:00:57] *** Joins: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca)
[21:01:47] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[21:01:59] *** Joins: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net)
[21:02:06] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[21:02:16] <adridu59> woa, go has :=
[21:02:22] <Tobba> I wrote make install and it started to rebuild everything
[21:02:26] <Tobba> this is a good makefile
[21:02:52] <bstrie> adridu59: they also have = for assignment, but := turns on the type inference
[21:03:04] <adridu59> that's so 1960 :p
[21:03:09] <eddyb> bstrie: lol
[21:03:28] <strcat> bstrie: it's not really type inference
[21:03:32] <strcat> it's just like C++11 auto or C# var
[21:03:35] <strcat> gets the type from the RHS
[21:03:36] *** Joins: maxli (maxli@moz-70F9251D.thefacebook.com)
[21:03:38] <bstrie> I'm not trying to denigrate! why does everyone go there :\
[21:03:47] <bstrie> strcat: that *is*, technically, type inference :P
[21:03:53] <eddyb> strcat: I want that for Rust statics
[21:03:55] <strcat> bstrie: so, foo(bar()) is type inference?
[21:04:00] <strcat> bstrie: where bar returns int
[21:04:03] <strcat> and foo takes int
[21:04:08] <bstrie> sure why not
[21:04:17] * strcat wouldn't call it type inference
[21:04:31] <strcat> or `var x = bar(); foo(x);'
[21:04:45] *** Quits: jhasse (jhass_000@moz-33238F6.ewe-ip-backbone.de) (Quit: Verlassend)
[21:04:57] <strcat> it's not inferring a type, it's just using bar's type ;p
[21:04:58] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[21:05:21] *** Joins: friggle (friggle@moz-A607EAFA.members.linode.com)
[21:05:36] <strcat> in fact C++ originally had that kind of implicit variable typing but it was dropped before standardization! ;p
[21:05:41] <strcat> then added back over a decade later
[21:05:42] *** Quits: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP) (Ping timeout)
[21:05:47] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[21:05:47] *** ChanServ sets mode: +o jdm
[21:06:15] <strcat> http://www.stroustrup.com/C++11FAQ.html#auto
[21:06:19] *** Joins: sellout (Adium@moz-EB6EF561.hsd1.co.comcast.net)
[21:06:40] *** Joins: khodzha (khodzha@CB710772.EF9FA30D.CA6E2165.IP)
[21:07:08] *** Quits: khodzha1 (khodzha@155D5F78.2AEE264E.CA6E2165.IP) (Ping timeout)
[21:07:10] <Tobba> ah crap
[21:07:17] <Tobba> the build errors without telling me why, thats great
[21:07:39] <diverse> strcat: would 'type deduction' be a better term?
[21:07:55] *** brianloveswords_ is now known as brianloveswords
[21:07:56] * strcat would just say implicit variable types
[21:08:14] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[21:08:16] <adridu59> diverse: I would say type inference is more of type deduction
[21:08:25] <eddyb> diverse: elementary, my dear watson!
[21:08:45] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:08:46] <diverse> rofl
[21:08:50] <Matthias247> Tobba: try to restart it. Had the same problem on Windows. But with 2 restarts it builds. Don't know why
[21:08:56] *** Joins: jhasse (jhasse@moz-33238F6.ewe-ip-backbone.de)
[21:09:15] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[21:09:16] <Tobba> ~mingw~
[21:09:26] <kimundi> ~makefiles~
[21:09:35] <adridu59> next release should be here in 2 days
[21:09:36] <Matthias247> also msys seems to hang once and now and I have to press a key to make it run again
[21:09:42] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[21:09:44] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[21:10:03] <strcat> phil_: http://strcat.zapto.org:8000/
[21:10:19] <kimundi> btw make chkeck-stage1 is broken on the master makefile
[21:10:28] <strcat> phil_: realllly want that on rust-lang.org
[21:10:42] <Tobba> ha yep what the shit
[21:10:48] <Tobba> the build froce, bashed keyboard a few times and it continued
[21:10:50] <Tobba> MAKEFILES
[21:10:51] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[21:11:20] <Matthias247> Tobba: that's what I experienced
[21:12:04] <kimundi> strcat: Hm, that page just shows twp buttons and two dropdown boxes for me, no text field and nothing happens if I click on evaluate
[21:12:17] <strcat> kimundi: js is enabled?
[21:12:22] <kimundi> yes
[21:12:26] <kimundi> current firefox
[21:12:31] <cmr> works for me with current ff
[21:12:35] <Tobba> I run nightly and its fine
[21:12:38] <strcat> works for me locally
[21:12:53] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:13:04] <strcat> kimundi: nothing like requestpolicy or whatever?
[21:13:30] <Matthias247> works here too. Cool
[21:13:31] <strcat> it needs to load ace from http://cdnjs.com/
[21:13:38] <Tobba> I sort of feel like trying to kill strcats server with just banging single bytes to stderr and flushing constantly
[21:13:41] *** Quits: skade (skade@moz-B73EE4D5.pools.arcor-ip.net) (Quit: Textual IRC Client: www.textualapp.com)
[21:13:47] <Tobba> linux is magical with being extremely murderable for some reason
[21:13:58] <Tobba> then again so is everything else, so woo
[21:14:01] <kimundi> strcat: Don't even know what that is :P - I pretty much just have adblock installed
[21:14:07] <kimundi> maybe thats at fault
[21:14:20] * strcat has adblock+ with easylist+easyprivacy and no issues ;p
[21:14:38] <kimundi> lol, same result with chromium - no I really wonder whats going on here
[21:14:51] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[21:14:54] <strcat> kimundi: SPDY blocked by your firewall?
[21:14:58] * strcat shrugs
[21:14:59] <eddyb> kimundi: chrome://net-internals
[21:15:21] <strcat> kimundi: open up the firefox/chrome net developer tools
[21:15:24] <strcat> see if the request occurs
[21:15:27] <strcat> to cloudfront
[21:15:41] <strcat> ctrl-shift-q
[21:15:45] <kmc> is there any clever way to make a newly-spawned thread inherit values for some local_data from its parent?
[21:15:46] <strcat> er
[21:15:50] <kmc> or do I need to wrap every spawn call
[21:16:22] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[21:16:25] <strcat> kmc: afaik you need to wrap them
[21:16:38] <strcat> it doesn't know if they're copyable
[21:16:44] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:16:48] <strcat> and static thread-local data doesn't really work that way either
[21:16:51] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[21:16:53] <kmc> sure
[21:16:59] <strcat> you have static initializers and all threads start as that
[21:17:05] <kmc> it's not the behavior I would want for all thread-local variables
[21:18:09] <kimundi> uhm - To be honest I don't really know what to do here, or how to recognize if things work wrong - need a step by step for either chromium or ff for that stuff :P
[21:18:28] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[21:19:13] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[21:19:16] <strcat> kimundi: open the page in firefox, ctrl-shift-q (open net tools), ctrl-f5 (refresh while ignoring cache)
[21:20:01] <strcat> should be 2 cloudflare requests, one for ace.js and one for mode-rust.js
[21:20:34] * pcwalton puts a watchpoint on the ty ctxt ref count
[21:20:36] <kimundi> strcat: I get two GET request with a green dot :P - one for File / and one for file ace.js
[21:20:47] <kimundi> pcwalton: Gesundheit!
[21:21:03] <strcat> kimundi: and does the ace.js one succeed?
[21:21:05] <eddyb> kimundi: I think I see what you did there >_>
[21:21:28] <eddyb> pcwalton: trying to see if you can remove some RefCells/@?
[21:21:55] <eddyb> ah nvm, the other channel
[21:21:55] <kimundi> strcat: Well, the checkmark between that GET request glows in a positive green...
[21:22:26] <strcat> kimundi: so.... it doesn't load web.css, web.js, etc.?
[21:22:33] *** Joins: mpiechotka (mpiechotka@moz-A61AF615.dynamic.mnet-online.de)
[21:22:59] <kimundi> strcat: I only see two GETs there, so I guess no
[21:23:14] *** Quits: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net) (Ping timeout)
[21:23:14] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[21:23:28] <strcat> kimundi: if you view source, it does have the stylesheet and so on though, right? ;s
[21:23:35] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[21:24:01] <kimundi> stylesheet web.css and so on? yeah thats part of the html source
[21:24:22] * kimundi wonders what exactly he broke in his system
[21:24:25] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[21:24:25] *** ChanServ sets mode: +o tjc
[21:24:47] <pcwalton> eddyb: yeah, trying to remote @
[21:24:48] <pcwalton> remove @
[21:25:13] <eddyb> pcwalton: I think I sneaked a couple of removals as part of the Visitor Disowning
[21:25:14] *** Joins: dogweather (dogweather@moz-4EC23EE5.hsd1.or.comcast.net)
[21:25:18] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[21:25:22] <eddyb> *sneaked in
[21:25:22] *** Joins: kvanb (kvanb@moz-CDB93B52.lnse3.win.bigpond.net.au)
[21:26:20] <strcat> kimundi: *shrug*, I'll go back to playing with fuzzing bittorrent clients
[21:26:39] <Tobba> heh
[21:26:45] <kimundi> he, alright, I'll try reconnecting my router, in case its my ISPs fault :P
[21:27:00] <Tobba> I remember using magnet links to trick ÂµTorrent into downloading files into arbitary locations and open silently
[21:27:12] <Tobba> I couldent get it to work on anyone elses computers though
[21:29:07] *** Quits: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP) (Ping timeout)
[21:29:17] *** Quits: kimundi (kimundi@moz-32142F5A.dip0.t-ipconnect.de) (Ping timeout)
[21:29:29] <kvanb> carter: does ghc have a list of all the GC allocation modes it has somewhere?
[21:29:59] <kvanb> like I'd imagine it has a small allocation mode, a large alloc mode, probably a with { } mode for elastic temporaries
[21:30:00] *** Quits: victorporof (victorporo@5EC92F85.71368607.9B1E38F4.IP) (Quit: victorporof)
[21:30:50] <Jesse> strcat, Tobba: sounds fun
[21:31:50] * strcat is just bored to the point where running applications in valgrind and running a fuzzer against them is appealing
[21:32:30] <strcat> probably a really low chance of me being able to write a proof of concept exploit for most of them ;p
[21:32:44] *** Joins: kimundi (kimundi@moz-AEB542AA.dip0.t-ipconnect.de)
[21:32:46] <strcat> evil NX bit :(
[21:33:11] * strcat did succeed at calling exit(1)
[21:34:22] *** Joins: jeffdb (jeffbelg@moz-ABCAA64B.efi.com)
[21:34:55] <Jesse> good enough for an anti-piracy attack
[21:35:27] <Jesse> "whenever i try to download Avatar, my torrent program disappears"
[21:35:41] <Tobba> strcat: sounds like you got a ROP chain going at least
[21:36:03] <diverse> what would be the difference between using Rc<T> and box(Rc)?
[21:36:08] <kimundi> Okay, given that strcats site works on my roommates laptop, I now know that something in my arch install is horrible broken and/or misconfigured :P
[21:36:09] <Tobba> since torrent programs involve lots of networknig you should be able to ROP a shell
[21:36:33] *** Joins: FreeFull (freefull@moz-12F1414C.as13285.net)
[21:37:07] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[21:37:15] <Jesse> Tobba: what's the connection between "involve lots of networking" and "should be able to ROP a shell"?
[21:37:29] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[21:37:29] <kimundi> diverse: You mean apart from one being a type, and the other a expression for constructing an instance of that type? :P
[21:37:35] <Tobba> lots of networking code
[21:37:54] <Tobba> it all depends really
[21:37:56] *** Quits: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP) (Quit: c-a)
[21:38:19] <Jesse> Tobba: just that there's lots of code, so the chance of a full set of ROP gadgets is high?
[21:38:29] <Tobba> yeah
[21:38:30] <Jesse> i'm not really familiar with ROP
[21:38:37] <Tobba> me neither really
[21:38:40] <kmc> usually libc alone gives you enough gadgets
[21:38:46] <Tobba> networking also means you should get some nice networking gadgets
[21:38:49] <kmc> also you don't need full network code, you just need enough to call mprotect()
[21:38:57] <Tobba> that too
[21:38:57] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[21:39:36] *** Joins: mib_ggdoop (Mibbit@moz-D549C653.adsl.xs4all.nl)
[21:39:37] <strcat> kmc: VirtualProtect*
[21:39:41] <diverse> kimundi: more like I'm trying to understand box's existence
[21:39:46] <kmc> heh sure
[21:39:50] <Tobba> its way easier on windows because of stdcall
[21:40:54] <strcat> Tobba: but if you're on 32-bit, there's not NX bit anyway
[21:40:57] <strcat> no*
[21:40:59] <cmr> diverse: Rc::new will evaluate its argument, pass it to the function, and then store it into its destination, box(Rc) will evaluate the argument and store it intos its destination directly.
[21:41:00] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[21:41:04] <Tobba> oh yeah
[21:41:08] <Tobba> though
[21:41:08] <kmc> strcat: on Windows you mean?
[21:41:12] <Tobba> ASLR might make it a bit of a pain
[21:41:17] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[21:41:26] <strcat> kmc: yes
[21:41:31] <kmc> on 32-bit you don't have that many bits of address space to randomize
[21:41:40] <Tobba> rustc 0.9 (bae091e 2014-01-06 07:26:48 -0800)
[21:41:41] <Tobba> woo
[21:41:42] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[21:41:44] *** Joins: ramitos (ramitos@moz-60679625.socal.res.rr.com)
[21:41:47] <kimundi> diverse: common syntax support for initializing a generic type inplace with the value of an expression
[21:42:02] <kimundi> SUpporting placement new etc
[21:42:38] <kimundi> let x: Gc<int> = box 5;
[21:42:39] *** Joins: vgeddes (vincent.ge@moz-4C6314FC.dsl.mweb.co.za)
[21:43:05] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:43:35] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:43:42] *** Joins: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP)
[21:43:57] <Ms2ger> Offered without comment: "However, a related paper available here - http://ieeexplore.ieee.org/xpl/freeabs_all.jsp?arnumber=5090039 - (don't have the full paper, sorry) concludes that among experienced programmers, CamelCase, not under_score,  is measurably the right thing."
[21:44:23] *** Joins: [squiddy] (squiddy@moz-B6B9C896.adsl.alicedsl.de)
[21:44:45] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[21:44:45] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[21:45:04] <bstrie> Ms2ger: I've seen studies that show the exact opposite, so :P
[21:46:10] <diverse> kimundi & cmr: thanks
[21:46:18] *** Quits: japaric (japaric@5F207A99.A347E168.F4D5766F.IP) (Quit: WeeChat 0.4.2)
[21:46:22] <eevee> haha what
[21:46:24] <eevee> my ass
[21:46:30] *** Quits: fabiand_ (fabiand@moz-F6940DCF.adsl.alicedsl.de) (Quit: Verlassend)
[21:46:35] <eevee> oh naturally i can't see the paper anyway; science is so useful
[21:47:33] <eevee> http://ieeexplore.ieee.org/xpl/articleDetails.jsp?arnumber=5521745
[21:47:37] <eevee> opposite outcome
[21:47:59] *** Quits: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca) (Quit: eatkinson)
[21:48:37] <diverse> eevee: s/science/statistics/
[21:48:41] *** Quits: lenstr_ (lenstr@199F009F.9636F313.7A27613B.IP) (Client exited)
[21:48:41] *** Quits: mib_ggdoop (Mibbit@moz-D549C653.adsl.xs4all.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[21:48:42] *** Quits: joelteon (bzzt@moz-317E8D0C.io) (Quit: I'm out)
[21:48:42] <bstrie> eevee: write a paper on whether or not experienced programmers prefer tabs over whitespace
[21:48:57] <bstrie> (is that like, your job now or something)
[21:49:04] <eevee> apparently
[21:49:40] <eevee> i *am* writing a blog post about it  8)
[21:49:52] *** Joins: japaric (japaric@5F207A99.A347E168.F4D5766F.IP)
[21:50:29] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[21:50:36] <diverse> "Lies, damned lies, and statistics" --Mark Twain
[21:52:40] *** Joins: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca)
[21:52:54] <LinearInterpol> so, just trying to wrap my head around the way rust treats memory.
[21:53:51] <LinearInterpol> Can anybody give me a small explanation so I can compare it to what I've read?
[21:53:59] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[21:54:03] <alan_andrade> How many languages do you guys know that have feedback options in their docs ?
[21:54:09] <LinearInterpol> None.
[21:55:01] <alan_andrade> Me neither
[21:55:15] <astropirate> Qt
[21:55:19] <astropirate> the bestest language ever
[21:55:19] <alan_andrade> I was wondering if Rust can do that.
[21:55:22] <LinearInterpol> This is easily the nicest group of developers I've seen.
[21:55:22] <kimundi> LinearInterpol: What do you want to know?
[21:55:25] <alan_andrade> let me check it out.
[21:55:49] <LinearInterpol> kimundi: Mainly why I'm avoiding @, what ~ does and such. I've only started rust.
[21:56:05] <ziad> LinearInterpol, have you used C++?
[21:56:17] <LinearInterpol> Not as extensively as I would've liked.
[21:56:23] <Matthias247> astropirate: QTs no language :-)
[21:56:29] *** Quits: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP) (Quit: c-a)
[21:56:37] <alan_andrade> astropirate can you send me an example ?
[21:56:47] <astropirate> Matthias247, your propaganda has no affect here
[21:56:55] <astropirate> effect*
[21:57:09] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: Lost terminal)
[21:57:20] <ziad> I suppose `~` is closest to C++'s unique_ptr<T>, while providing certain compile time guarantees (i.e. you can't use it after it has been moved to another owner)
[21:57:30] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[21:57:30] *** ChanServ sets mode: +ao brson brson
[21:57:40] <o11c> Matthias247: yes, it is
[21:57:54] <o11c> well, Qt is; QT is not
[21:58:04] <LinearInterpol> ziad: interesting..
[21:58:40] <ziad> LinearInterpol, `@` is making its way out of the language as it is going to be replaced with Gc<T> (for garbage collection)
[21:58:49] <LinearInterpol> Oh, that explains it.
[21:58:50] <ziad> that's why you should avoid it
[21:58:54] <diverse> o11c: is gtk a language too?
[21:58:57] <Matthias247> o11c: what's the second one?
[21:59:05] *** Quits: astropirate (astropirat@moz-13705238.hfc.comcastbusiness.net) (Quit: Leaving)
[21:59:06] <Matthias247> quicktime?
[21:59:07] <ziad> the language designers opted for a library solution, as opposed to having it built into the language
[21:59:15] <cmr> LinearInterpol: ~T is just malloc with a destructor that frees.
[21:59:15] <LinearInterpol> That's good practice.
[21:59:22] <LinearInterpol> ahhhhh.
[21:59:30] <LinearInterpol> Thank you.
[22:00:35] <LinearInterpol> And the destructor frees the object as soon as it goes out of scope, right? a-la perl?
[22:00:36] *** Quits: ramitos (ramitos@moz-60679625.socal.res.rr.com) (Ping timeout)
[22:00:39] <olsonjeffery> rusti: 1+1
[22:00:40] -rusti- 2
[22:00:49] <kimundi> LinearInterpol: Okay, so all values in Rust that are not plain old data that can be safely memcopied have move semantic per default - which means that if you reassign a value of such a type to a new location, the old one becomes inaccesible: it 'moved'
[22:01:09] <bjz> LinearInterpol: indeed, it frees
[22:01:11] <LinearInterpol> Ahhhh.
[22:01:12] <o11c> Matthias247: quicktime
[22:01:20] *** Quits: hoverbear (hoverbear@moz-2789E775.wireless.uvic.ca) (Quit: Taking a nap.)
[22:01:22] *** Joins: ramitos (ramitos@moz-60679625.socal.res.rr.com)
[22:01:27] <bjz> LinearInterpol: it doesn't implement the Drop trait yet, but it should
[22:01:33] <bjz> ie. ~
[22:01:35] <kimundi> LinearInterpol: The simples example for that is anything boxed in a ~, like for example here: let x = ~5; let y = x; // x can now no longer be used
[22:01:43] <o11c> diverse: I'm not aware that gtk implemented their own language, but Qt definitely did. Sure, it's implemented as a preprocessor for C++, but it *is* a new langauge.
[22:01:56] <LinearInterpol> I see. so assignment == moving, not copying.
[22:02:02] <kimundi> yup
[22:02:04] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[22:02:07] <LinearInterpol> That makes a lot more sense.
[22:02:15] <bjz> LinearInterpol: basically anything with a destructor moves
[22:02:26] <diverse> o11c: color me surprised then.
[22:02:26] <LinearInterpol> Cool. I like that generality.
[22:02:35] <pcwalton> nmatsakis: found a bug in the region checker
[22:02:35] <bjz> LinearInterpol: you have to explicitly clone if you want to reuse it
[22:02:44] <LinearInterpol> via .clone() ?
[22:02:46] <pcwalton> manifested as a segfault with the arena
[22:02:55] <pcwalton> I'll file it, want to make sure it's on your radar
[22:02:59] <bjz> LinearInterpol: (the type might not implement Clone though)
[22:03:01] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:03:02] <Matthias247> o11c: i would have rather say it extends the language than creates a completely new one.
[22:03:06] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[22:03:06] <bjz> LinearInterpol: yep, .clone()
[22:03:21] <LinearInterpol> bjz: So you have to implement Clone for a type?
[22:03:27] <bjz> LinearInterpol: anything without a destructor can implicitly copy, if needed
[22:03:30] <bjz> LinearInterpol: yes
[22:03:34] <LinearInterpol> awesome.
[22:03:40] <Matthias247> o11c: However I although think that idiomatic QT code is so different from other C++ code (like std or boost based) so that you could count it as another language
[22:03:47] <kimundi> LinearInterpol: Yeah - clone is just a library feature: its a trait with a function clone(&self) -> Self
[22:03:59] <bjz> LinearInterpol: well, any Pod I mean
[22:04:03] <LinearInterpol> Niiiice.
[22:04:22] <bjz> LinearInterpol: if it contains things with destructors it doesn't implcitly clone
[22:04:29] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[22:04:30] <olsonjeffery> so i have a question.. in c#, there's the `new()` generic constraint, which says the T has to have a paramless constructor.. usually you use this so you can stub-out T values in whatever context you're using it
[22:04:37] <olsonjeffery> so im trying to do something similar in rust
[22:04:40] <LinearInterpol> bjz: yeah, I'd imagine.
[22:04:52] <geomyidae> oh here's why it's so tricky.
[22:04:54] <olsonjeffery> so i made a trait that has a `fn stub() -> Self;` method on it
[22:05:02] <Matthias247> olsonjeffery: perhapts the Default trait?
[22:05:04] <geomyidae> search for ipv4addr on rust-lang, then try to use that in a use statement ;)
[22:05:07] <jmgrosen> does anyone have any OS X nightlies?
[22:05:10] <bjz> LinearInterpol: to make things easier, you can do #[deriving(Clone)] on a new type if all the fields of the type impl Cloine as well
[22:05:10] <geomyidae> looks like it should work, but it wont
[22:05:14] <Matthias247> olsonjeffery: so that you can call default()
[22:05:20] <kimundi> olsonjeffery: Sounds like the std::default::Default trait
[22:05:34] <olsonjeffery> so how would i invoke that, given only my T?
[22:05:38] <glaebhoerl> there's nothing really special about Qt and I do it as my day job
[22:05:39] <LinearInterpol> bjz: so that assignment == copying?
[22:05:44] <cmr> let x: T = Default::default();
[22:05:50] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:05:51] <olsonjeffery> hm.
[22:05:54] <kimundi> olsonjeffery: let x: T = Default::Default()
[22:05:57] <olsonjeffery> ive done the same thing with a custom trait
[22:05:59] <olsonjeffery> and couldn't get it to work.
[22:06:01] <olsonjeffery> that's interesting.
[22:06:03] <glaebhoerl> they just use a preprocessor because doing it with templates is hard/painful/impossible in C++03 and with ancient compilers, and/or the performance isn't as good
[22:06:10] <bjz> LinearInterpol: I think it would move if it could
[22:06:22] <LinearInterpol> ah.
[22:06:23] <glaebhoerl> but if we're going to consider it technically a new language then it's just a modest extension of C++
[22:06:24] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[22:06:32] <bjz> LinearInterpol: in the optimisation phase, but I'm not sure
[22:06:32] <LinearInterpol> Well, this is a lovely start.
[22:06:42] <olsonjeffery> ah, huh.
[22:06:48] *** Joins: dmz (Mibbit@9A8A5739.49975FB2.AE2D72A6.IP)
[22:06:56] <olsonjeffery> so you invoke the static method on the trait and not the T that has the constraint placed on it?
[22:06:59] <olsonjeffery> that's kind of.. interesting.
[22:07:25] <olsonjeffery> s/constraint/bound/
[22:08:00] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:08:09] <cmr> Does anyone know of a language with nested /* */ comments off the top of their head?
[22:08:21] <cmr> (not rust)
[22:08:30] <bjz> D maybe?
[22:08:32] <Matthias247> I found the default usage also confusing (tried T::default() too). But somehow it works
[22:08:56] <olsonjeffery> yeah, i expected to invoke it on the T
[22:09:12] <bjz> olsonjeffery: yeah, the proposed syntax Is Default::<for T>::default()
[22:09:51] <Tobba> why does a for loop cause the compiler to complain about the Some object missing
[22:10:01] <Tobba> (no_std is the reason its missing, but why would Some be hardcoded)
[22:10:06] <cmr> Tobba: for loop is only for iterators.
[22:10:11] <bjz> olsonjeffery: https://github.com/mozilla/rust/issues/6894 https://github.com/mozilla/rust/issues/8888
[22:10:13] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[22:10:19] <Tobba> yeah I'm gonna try writing a string iterator
[22:10:33] <cmr> rustc --pretty=expanded to see what for turns into
[22:10:41] <pcwalton> nmatsakis: aha, it has to do with variance and Cell
[22:10:53] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[22:10:55] <Ms2ger> cmr, syntax highlighting suggests that TLA+ has nested (* *)
[22:10:58] <strcat> Tobba: atm, for loops are written as desugaring
[22:11:00] <bblum> pcwalton: what is the bug?
[22:11:09] <pcwalton> bblum: made a test case, sec, filing
[22:11:10] <LinearInterpol> What's the reccomended editor for Rust with syntax highlighting? Notepad++ dropped the ball on me. :(
[22:11:14] <pcwalton> it may be fairly simple
[22:11:18] <strcat> Tobba: they just get desugared in the parser to code using Option/Some/None and calling iter()
[22:11:25] <pcwalton> because I think the borrow checker just has to know about variance arising from cell
[22:11:36] <cmr> LinearInterpol: https://github.com/mozilla/rust/wiki/Doc-packages,-editors,-and-other-tools#editors
[22:11:46] <LinearInterpol> Thanks.
[22:11:53] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[22:11:56] *** Quits: shachaf (shachaf@moz-F37E0395.members.linode.com) (Ping timeout)
[22:12:19] <bjz> olsonjeffery: it was going to be brought up in the meeting but it seems there was not enough time. There are some strong feelings against the T::method() syntax - even if some people find it makes more sense - issues with corner cases I think.
[22:12:28] *** Joins: hoverbear (hoverbear@moz-2789E775.wireless.uvic.ca)
[22:12:28] <kimundi> LinearInterpol: Which OS?
[22:12:29] <Tobba> makes sense I guess
[22:12:35] <LinearInterpol> Windows.
[22:12:54] <kimundi> LinearInterpol: Hmm... Install KDE for windows and use Kate! /trollface
[22:12:58] <pcwalton> nmatsakis: bblum: https://github.com/mozilla/rust/issues/11385
[22:13:02] <LinearInterpol> Bahaha.
[22:13:04] <Matthias247> LinearInterpol: save your time on the eclipse plugin. Seems not to work on windows
[22:13:11] <Tobba> where in libstd is Some() defined
[22:13:13] <LinearInterpol> ooo, notepad++.
[22:13:14] <bblum> wow you guys broke 10K issues
[22:13:17] <LinearInterpol> w00t.
[22:13:20] <Tobba> actually lets just check out rust-core for this
[22:13:21] <WebeWizard> I use GEdit
[22:13:24] <WebeWizard> gedit*
[22:13:30] <Tobba> masochist
[22:13:40] <jmgrosen> no OS X nightlies, it seems? :( I can't seem to build it...
[22:14:00] <sfackler> LinearInterpol: std::option
[22:14:14] <Tobba> I was the one who asked that but still
[22:14:32] <WebeWizard> I tried that guy's hackish Rust plugin for EclipseIDE, but it failed in bad ways
[22:14:36] <cmr> enum Option<T> { Some(T), None }
[22:14:40] <sfackler> oh, oops
[22:15:16] <WebeWizard> maybe it's better now
[22:15:22] <Tobba> is there any way I can drop a use statement globally
[22:15:22] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[22:15:29] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[22:15:32] <Tobba> guessing I can put it in the .rc, let me try that
[22:15:34] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[22:15:40] <cmr> no, that won't do it either
[22:15:42] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[22:15:54] <Ms2ger> I hear .rc is deprecated
[22:16:07] <kimundi> Tobba: Nope, use is only for the current module - and using the rc file ending is deprecated since long :P
[22:16:09] <bblum> pcwalton: can that bug not be shown with just an Option?
[22:16:14] <bblum> why not?
[22:16:20] <Tobba> goddamnit
[22:16:24] <pcwalton> bblum: doesn't work because variance makes the region invariant
[22:16:26] <pcwalton> I think what's happening is
[22:16:45] <pcwalton> the region parameter on Foo in the call to f() gets inferred to be 'static
[22:16:55] <pcwalton> because that's the only region that could possibly be valid
[22:17:02] <WebeWizard> I prefer .rc :(
[22:17:13] <pcwalton> and then the call to g() is covariant
[22:17:38] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[22:17:38] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[22:17:39] <pcwalton> because it has to be 'lifetime of h stack frame Foo<'lifetime of h stack frame>
[22:17:42] <bblum> pcwalton: why 'static and not the region of h?
[22:17:45] <pcwalton> but that is wrong because there is *mutation* involved
[22:17:51] <bblum> it seems like the return statement of h is the one that should be illegal
[22:18:02] <Tobba> normally without no_std std stuff is kinda "included" by default though
[22:18:02] <pcwalton> bblum: because that would not be valid as it gets returned
[22:18:09] *** Quits: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Connection reset by peer)
[22:18:10] <pcwalton> well either way there's a conflicting constraint
[22:18:11] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[22:18:12] <Tobba> is there any way I can emulate that so I dont have to type use lib::option everywhere
[22:18:15] <pcwalton> depends on who you blame
[22:18:18] <cmr> Tobba: yes, `use std::prelude::*` is injected by default
[22:18:20] <cmr> Tobba: no.
[22:18:22] <pcwalton> but the constraint gets resolved with covariance
[22:18:26] <pcwalton> which is wrong as there is mutation involved
[22:18:29] <pcwalton> it needs to be invariance
[22:18:30] <Tobba> damnit
[22:18:33] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:18:50] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[22:19:01] <Tobba> it kinda feels like rust has too many hardcoded things
[22:19:12] <LinearInterpol> howso?
[22:19:19] <Tobba> i.e standard library couped too hard with the language itself
[22:19:25] <strcat> Tobba: the for loop implementation atm is a bug
[22:19:31] <strcat> it's intended to be done in a better way
[22:19:32] <bblum> pcwalton: i dunno; it seems like the program should be rejected even if g() had no code inside
[22:19:37] <Tobba> loops arent that bad anyways
[22:19:46] <Tobba> but injecting a use statement with a hardcoded path in every file is uh
[22:19:47] <Tobba> silly
[22:19:51] <strcat> but yes I do agree that it's bad to have the compiler inject std-macros and the prelude to hide issues third party libs can't work around
[22:19:52] <pcwalton> bblum: yes, it should
[22:19:55] <cmr> module, not file.
[22:19:55] <pcwalton> the problem is that Cell is mutable
[22:20:04] <Tobba> yeah
[22:20:12] <pcwalton> if it is immutable there is no problem
[22:20:13] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:20:14] <pcwalton> I think the prelude is fine
[22:20:23] <pcwalton> you can turn it off
[22:20:26] <pcwalton> it makes simple examples easy
[22:20:27] <Tobba> what if you're implementing your own standard lib though
[22:20:31] <pcwalton> then you turn it off
[22:20:36] <pcwalton> or you supply your own prelude
[22:20:40] <bblum> pcwalton: could you not change the & pointers to &mut and get the same effect?
[22:20:41] <Tobba> you can?
[22:20:48] *** Quits: pyon (user@BCC41BDF.6C782DF8.1C8C8CE9.IP) (Ping timeout)
[22:20:52] <Tobba> I mean, without having to type the thing in every file
[22:20:54] *** Joins: pyon (user@BCC41BDF.6C782DF8.1C8C8CE9.IP)
[22:20:59] <pcwalton> you have to type it in every crate
[22:21:06] <Tobba> every module*
[22:21:10] <pcwalton> the alternative is to have 99% of crates have to use std
[22:21:15] *** Quits: nobody (nobody@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[22:21:22] <pcwalton> there should probably be a crate attribute to globally disallow prelude
[22:21:25] <pcwalton> or just have no_std imply that
[22:21:31] <cmr> #[no_prelude];
[22:21:33] <pcwalton> globally disable prelude
[22:21:35] <cmr> no_std also implies it
[22:21:37] <cmr> ah
[22:21:41] <pcwalton> oh, ok
[22:21:54] <Tobba> I thought no_std already did that?
[22:21:58] *** Quits: hoverbear (hoverbear@moz-2789E775.wireless.uvic.ca) (Quit: Taking a nap.)
[22:22:00] <pcwalton> then what's the complaint? :)
[22:22:08] *** Joins: nobody (nobody@moz-7E09A266.neo.res.rr.com)
[22:22:30] <Tobba> actually hold on let me just see if this works
[22:22:35] <pcwalton> maybe we should have a --attrib flag that lets you inject crate attributes on the command line
[22:22:36] <strcat> he's complaining that the compiler relies on hardcoded paths into std or things in the prelude in the standard macros and deriving
[22:22:44] <strcat> and for loops
[22:22:49] <pcwalton> the latter is a bug
[22:22:53] <pcwalton> the standard macros/deriving
[22:22:57] <pcwalton> importable macros should fix it
[22:23:14] <pcwalton> then you can say alias rustfreestandingandpure="rustc --attrib no-std"
[22:23:14] <acrichto> importable macros *will* fix it
[22:23:52] <kimundi> Would it make sense to allow custome preludes?
[22:24:03] <acrichto> rust works perfectly well without libstd, I along with many others have written kernels and such serving as proof-of-concept
[22:24:04] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[22:24:16] <cmr> kimundi: I would like that feature.
[22:24:20] <Tobba> I'm porting my multitasking kernel into Rust for shits n giggles
[22:24:28] *** Quits: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca) (Quit: eatkinson)
[22:24:50] <pcwalton> anyway, I do sympathize with having #[no_std] everywhere but supplying attributes on the command line should be fine
[22:24:55] <pcwalton> more people write userspace code
[22:25:00] <pcwalton> than kernel code
[22:25:13] <acrichto> it is very much planned to have libstd working in kernel code
[22:25:17] <Tobba> I actually just slapped no_std in the crate definition and hoped that would apply globally
[22:25:23] <cmr> it does
[22:25:26] *** Quits: TisButMe (Mibbit@moz-40861B51.w90-29.abo.wanadoo.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[22:25:29] <Tobba> oh
[22:25:36] <bjz> pcwalton: it would be good to remove lots of traits from the prelude too
[22:25:41] <strcat> acrichto: how can you block in low-level kernel code without messing with interrupts?
[22:25:45] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[22:25:47] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:26:01] <strcat> is it just going to use non-ephemeral spin locks? :\
[22:26:03] <Tobba> yeah I dont think many parts of libstd is gonna work in kernel code
[22:26:08] <acrichto> strcat: libstd obviously needs to be modified to work in kernel code, of course we didn't write it to work in kernel code to begin with
[22:26:12] <Tobba> plus having it there would make pre-load environment pure fucking dodgeball
[22:26:22] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:26:23] <Tobba> as anything that relied on anything from the system would crash the shit out of everything
[22:26:24] <strcat> acrichto: so tasks would be in something like libtask?
[22:26:25] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[22:26:26] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[22:26:29] <bjz> pcwalton: I'm hoping that lots of the numeric ones will be able to be removed, and the structure of it all simplified (remove Algebraic, Trigonometric etc..)
[22:26:33] <strcat> and floating point
[22:26:50] *** Quits: dmz (Mibbit@9A8A5739.49975FB2.AE2D72A6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:26:50] <Tobba> (FYI floating point crashes without proper initialization)
[22:26:53] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[22:26:58] <acrichto> strcat: again, libstd is going to have to be stripped down, this is an entire project not a whim
[22:27:12] <strcat> Tobba: well I'm just talking about library floating point rather than the language stuff
[22:27:15] *** Quits: Gordon (Mibbit@moz-4A19983C.ip227.fastwebnet.it) (Quit: http://www.mibbit.com ajax IRC Client)
[22:27:22] <Tobba> I meant that mostly
[22:27:24] <strcat> the language stuff seems pretty easy to disable
[22:27:30] <Tobba> using the standard library in a kernel is uhhhhh
[22:27:35] <kimundi> With static linking, is there still a perfomance hit with splitting up libstd into smaller crates?
[22:27:37] <Tobba> in a kernel you need to know EVERYTHING taking place
[22:27:41] <strcat> kimundi: yes
[22:27:49] <strcat> kimundi: with LTO and mergefunc, no
[22:27:53] <Tobba> if some external library does something expected very bad things will happen
[22:27:55] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[22:27:56] *** ChanServ sets mode: +ao brson brson
[22:27:58] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[22:28:01] <Tobba> s/expected/unexpected
[22:28:10] <acrichto> Tobba: there is no reason that you shouldn't have all intrinsics, options, results, vectors, etc, they all still work in a kernel, you just have to figure out what's different and abstract it
[22:28:10] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[22:28:17] <strcat> kimundi: compile-time hit? probably. the parallelization won't make up for the duplication of all of the generics and inline functions imo
[22:28:20] <acrichto> there is no fundamental reason why libstd cannot work in a kernel
[22:28:30] <Tobba> options, etc are p much fine
[22:28:43] <Tobba> everything like that would work fine
[22:28:50] <strcat> as long as you can disable unwinding
[22:28:54] <acrichto> kimundi: it would be awesome to split things into smaller crates because it's saner dependency management
[22:28:57] <strcat> and have it do something else
[22:29:05] <Tobba> anything that involves allocation of memory, some form of unwinding and possibly just floating point ops is a recipe for disaster
[22:29:22] *** Joins: cdidd (cdidd@moz-12BB9471.broadband.corbina.ru)
[22:29:26] <acrichto> strcat: that is not a fundamental problem, that just means you need to let the kernel define what failure means
[22:29:50] <aatch> Fortunately, idiomatic rust (in my opinion) tries to avoid heap allocation as much as possible.
[22:29:53] <acrichto> Tobba: you just let the kernel define memory allocation, libstd can still use it (what if you want to work with an owned vector)
[22:30:01] *** Joins: Matthias247_ (bzlandfill@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de)
[22:30:02] <WebeWizard> i'm confused. What's the benefit of splitting up std into smaller bits?
[22:30:05] <Tobba> again, you cant predict when it will use it
[22:30:28] <Tobba> in a kernel, you need to know 100% whats going on, standard library kinda tends to be a black box
[22:30:31] <jmgrosen> anyone know why, when linking stage0 rustc, I would get a bunch of undefined C++ symbols that LLVM is trying to use?
[22:30:35] <acrichto> WebeWizard: faster incremental build times, logical dependency management, easier modifications, easier to understand, etc.
[22:30:50] <acrichto> jmgrosen: you may need a 'make clean-llvm' to clean out an old llvm build
[22:30:55] <Tobba> a badly placed malloc can cause nearly untraceable crashes
[22:31:00] <jmgrosen> acrichto: that didn't work :/
[22:31:23] <strcat> acrichto: but won't most of those crates want to use libstd?
[22:31:27] <acrichto> jmgrosen: pastebin configure/make ?
[22:31:30] <strcat> there's not much you can do without libstd
[22:31:49] <strcat> like, I imagine the task lib will be written with libstd
[22:31:54] <strcat> so it's not really a logical dependency tree
[22:31:56] <acrichto> strcat: in splitting things up? of course, this is just a nice goal in general, it's always nice for libstd to not be bloated
[22:32:04] <olsonjeffery> what's the invocation syntax for generic default methods?
[22:32:05] <WebeWizard> acrichto: sounds like it's more a matter of user preference to me.  I prefer my standard libraries to be big and bloated.
[22:32:07] <kimundi> Tobba: which is why we would only recommend using a version of the std lib in a kernel where all those hazzards have been isolated to be completly user controlled, or not being part of the library at all
[22:32:23] <Tobba> that would bring it down to basicaly... Option
[22:32:25] <cmr> olsonjeffery: `let x: T = ....; x.default_method()`
[22:32:29] <acrichto> olsonjeffery: should be something along the lines of foo.bar::<A, B, C>()
[22:32:38] <Tobba> and *some* of the string stuff I guess
[22:32:41] <cmr> Tobba: and result and all the iterators and slices and strings.
[22:32:46] <strcat> kimundi: so no tasks, no floating point, no containers, no channels (they want to block), etc.
[22:32:59] *** Joins: icebattle (icebattle@8A14A542.EBE2EE2B.C7CEC4ED.IP)
[22:33:04] <Tobba> oh yeah and stuff like range() I guess, those are fine
[22:33:24] <jmgrosen> acrichto: this isn't with a cleaned llvm, but I had cleaned it earlier when trying to figure this out (but that history's gone): https://gist.github.com/jmgrosen/359a72b9cb69e821b3b9
[22:33:51] <jmgrosen> (I used ./configure --enable-clang, if that's important; it didn't work without it, either)
[22:33:59] <acrichto> Tobba: so you want to throw away iteration, vector management, string management, result, data structures, intrinsics, crate map logging, tuple methods, numeric extensions, etc?
[22:34:01] <jmgrosen> I'm on Mavericks, as well
[22:34:04] <olsonjeffery> acrichto: im sorry.. i meant a generic static method.. is that not the rust nomenclature?
[22:34:06] <aatch> That's not actually that bad. I mean, the advantage of using the standard library in kernel code is not having to write all that code yourself.
[22:34:16] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[22:34:17] <acrichto> Tobba: almost all of libstd is useful in a kernel (linux is huge!) you just need to implement things a little differently
[22:34:23] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Connection reset by peer)
[22:34:32] <Tobba> acrichto: I'm just saying the standard library is not very suitable for parts of a kernel
[22:34:32] *** Joins: kngl1 (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[22:34:54] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[22:34:55] <Tobba> linux is huge because it has lots and lots of crap that shouldent be inside the kernel anyways
[22:34:59] <acrichto> Tobba: that's just not true, you end up reimplementing everything in a kernel and if you do that they why reimplement anything?
[22:35:02] <Tobba> (depending on ideology on kernel design, anyways)
[22:35:15] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:35:16] <acrichto> we need to design libstd around being usable in a kernel environment
[22:35:23] <acrichto> it's no there right now, but there's no reason it cannot be there
[22:35:41] <Tobba> I mean in the linux kernel, yeah totally you could probably make libstd work in there
[22:35:43] <aatch> I mean, there's all the routines that are just simple algorithm implementations.
[22:35:52] <acrichto> jmgrosen: I've seen that before with an out-of-date llvm installation, are yo usure you just rebuilt llvm?
[22:36:10] <jmgrosen> acrichto: 99% sure, but I'll try it once more just to be sure
[22:36:25] <strcat> aatch: yeah, but a lot is tasks, blocking communication, I/O, etc.
[22:36:27] <acrichto> jmgrosen: I recomment "git clean -fdx"
[22:36:33] <strcat> you can have lock-free concurrent containers
[22:36:36] <strcat> but lock-free means no blocking
[22:36:40] *** Quits: mpiechotka (mpiechotka@moz-A61AF615.dynamic.mnet-online.de) (Ping timeout)
[22:36:44] <acrichto> strcat: you most certainly want inter-task communication in a kernel, it may just manifest itself in other forms
[22:36:47] <Tobba> yeah some stuff isnt suitable at all
[22:36:53] <strcat> if it needs to block, it needs more than a standard library can decide
[22:36:56] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:37:00] <Tobba> in tinier kernels a lot of it is suicide though
[22:37:00] <cmr> strcat: the only io still in libstd is the rtio traits?
[22:37:00] <acrichto> strcat: I probably want to write the kernel mutex, but you most certainly need coordination among kernel threads
[22:37:01] *** Quits: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net) (Quit: Leaving.)
[22:37:03] <strcat> acrichto: yeah, but blocking in a lib meant to be used in a kernel isn't appropriate
[22:37:17] <aatch> strcat, yeah, but there certainly is a subset of libstd that is perfectly workable in kernel.
[22:37:20] <acrichto> strcat: that's also just not true, the kernel just needs to understand what the lib does
[22:37:31] <strcat> acrichto: messing with interrupts in a lib doesn't seem okay
[22:37:45] <strcat> there are points at which it's not going to be okay to touch it
[22:37:52] <acrichto> strcat: you literally can do almost nothing from interrupts, this is why most kernel farm out work in interrupts to kernel threads
[22:38:13] <acrichto> strcat: you cannot even grab locks in an interrupt handler, of course you can't call library code in an interrupt handler but that's because you can't call almost any code in an interrupt handler
[22:38:14] <aatch> I don't think it's fair to say that libstd isn't usable *at all* because some of it doesn't work in a certain context.
[22:38:14] <Tobba> honestly a split between stuff like I/O, tasks etc and other usefullness would be okay
[22:38:19] <strcat> the linux kernel uses spin locks, lock-free data structures and RCU afaik
[22:38:23] <Tobba> the general usefulness could be useful in a kernel, the other stuff most definitely not
[22:38:33] <strcat> I don't think it attempts to have a blocking mutex... is there an OS kernel that does?
[22:38:38] <aatch> Tobba, which has been the general plan for a while.
[22:38:42] <acrichto> strcat: yes, and those can all be implemented in a library, "my kernel has interrupts" does not mean you can't use libstd
[22:38:50] <Tobba> yeah that actually sounds good to me
[22:39:03] <strcat> acrichto: but the APIs don't make sense
[22:39:08] <strcat> blocking recv doesn't make sense
[22:39:18] <acrichto> Tobba: the kernel can already define all of its IO and tasks if you use libstd, that's how libgreenlibnative work
[22:39:19] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:39:25] <strcat> blocking send (on a bounded queue) wouldn't make sense
[22:39:35] <acrichto> strcat: of course, that's why you don't call that code in an interrupt handler
[22:39:56] <acrichto> strcat: if you're the one writing an interrupt handler (or reviewing modifications to one), you're smart enough to know what you can and cannot do
[22:40:11] <aatch> "This function over here is bad for kernels, better throw everything out"
[22:40:32] <Tobba> interrupt handlers isnt really it
[22:40:35] <Tobba> its just, ugh
[22:40:49] <strcat> aatch: I don't like most of the APIs anyway, so why not?
[22:40:53] <Tobba> in my kernel for example, inside the syscall handler you could not use the FPU
[22:40:57] <acrichto> Tobba: if you "just throw out libstd", you're going to find yourself reimplementing almost everything
[22:41:00] <aatch> strcat, that's not relevant though.
[22:41:05] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[22:41:06] <Tobba> because that would corrupt the application state miserably
[22:41:06] *** ChanServ sets mode: +ao brson brson
[22:41:16] <strcat> aatch: seems relevant to me
[22:41:23] <strcat> if you want to handle out-of-memory conditions you need different APIs
[22:41:32] <acrichto> strcat: your personal preference does not mean that libstd is useless, if you prefer a different version then rust certainly allows you to write your own, it does not mean however that libstd is useless everywhere
[22:41:32] <strcat> I've struggled to build usable APIs in rust with that in mind
[22:41:55] * kimundi doesn't understand what all the fuzz is about - the current libstd will not work in a kernel as is, but parts of a refactored future set of libstd crates very well might - in any case nothing is set in stone yet
[22:42:23] <strcat> acrichto: so ~5 is going to return Option<~int>? I don't really think rust is well-suited to a kernel as a language either
[22:42:56] *** Quits: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Ping timeout)
[22:43:21] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[22:43:27] <aatch> I don't think that's fair. By your standards literally only C is suitable for a kernel.
[22:43:30] <strcat> and to handle OOM well, and to conserve memory (rather than tune for performance), you need intrusive data structures
[22:43:40] <acrichto> strcat: again, your opinions are your own, but that does not mean that libstd is utterly useless
[22:43:41] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[22:43:42] <strcat> I've tried to write intrusive data structures in rust
[22:43:49] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Client exited)
[22:43:50] <strcat> you end up needing unsafe across the codebase
[22:44:00] <strcat> and it's harder to get it right than C, because it's more verbose at that low-level
[22:44:07] <strcat> acrichto: not saying it's useless
[22:44:27] <acrichto> that also has nothing to do with rust, that has everything to do with libstd
[22:44:51] <acrichto> it's also not at all more verbose than C
[22:44:54] <acrichto> it's typesafe
[22:45:02] <strcat> at a low-level, it's more verbose than C
[22:45:05] <acrichto> match my_safe_alloc::<Type>() { Some(blob) => {}, None => {} }
[22:45:22] <acrichto> "my code is more verbose" does not mean that rust is more verbose
[22:45:25] <WebeWizard> So, when rust hits version 1.0, and then we beat libstd to a bloody pulp with some mythical kernel hammer, wtf is version 1.1 going to look like?
[22:45:56] <strcat> acrichto: rust doesn't have sugar for pointer arithmetic, it has a strict concept of memory safety based on what certain userland applications desire, and so on
[22:45:58] <acrichto> WebeWizard: these are generally long term visions, libstd will not be frozen for 1.0, but rather there will be "stable portions"
[22:46:10] <strcat> anyway
[22:46:23] *** Quits: dgpratt (dpratt71@2F49BEA0.B7D6B72A.4F70D6C7.IP) (Ping timeout)
[22:46:33] <strcat> intrusive data structures in rust really don't work out
[22:46:47] <strcat> there's no way to make it conform to the safety model without refcounting/gc
[22:46:56] <strcat> and unlike C++ you can't abstract it away well
[22:47:07] <strcat> you need to bubble up the unsafety
[22:47:07] *** Quits: Ferreus (ferreus@moz-83382453.pools.arcor-ip.net) (Quit: WeeChat 0.4.2)
[22:47:37] <acrichto> strcat: if you have a concrete proposal, I would definitely love to see an issue on it
[22:47:53] <olsonjeffery> adventures in generic programming, part 0x4323f
[22:47:57] <acrichto> if you take umbrance to rust, then I wouldn't recommend continual bashing of "god it's awful for use case X" and then never reporting it
[22:48:11] <strcat> I report plenty of things
[22:48:35] <strcat> I don't have to pretend rust is completely great and is a uniform step up from C/C++
[22:48:47] *** Quits: nobody (nobody@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[22:48:49] *** Joins: nobody (nobody@moz-7E09A266.neo.res.rr.com)
[22:49:01] <strcat> or that I think all the decisions it makes are a good idea
[22:49:03] *** Joins: hoverbear (hoverbear@moz-2789E775.wireless.uvic.ca)
[22:49:04] <acrichto> of course, but what you're saying sounds like "rust is fundamentally broken and cannot be used anywhere because of X"
[22:49:11] <strcat> no, I'm not saying that
[22:49:25] *** flaper87 is now known as flaper87|afk
[22:49:56] <Ms2ger> X = "it's alpha software"
[22:50:16] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:50:23] <strcat> Ms2ger: doesn't seem very relevant, not talking about bugs
[22:50:29] <johto> hi. I'm looking at writing a simple network server in Rust. I'm guessing std::io::net is the thing to use? handling errors by trapping conditions seems.. weird
[22:50:33] <jmgrosen> acrichto: same error having cleaned :(
[22:50:37] <strcat> the mechanics of unsafe aren't a bug, it's rust's design
[22:51:05] <acrichto> jmgrosen: what system are you on?
[22:51:10] <Matthias247_> acrichto: If you do support WinXP further, would you emulate CVs on all Windows or use real CVs on >= Vista and emulation on xp? The latter would mean a runtime detection, because otherwise you could not build on Win7 and execute on XP
[22:51:19] <jmgrosen> acrichto: OS X, 10.9
[22:51:23] <strcat> there are a lot of sacrifices made to support the clean separation of safe/unsafe code
[22:51:23] <acrichto> johto: you are correct, and it is a little sad, we plan on removing conditions for something much more ergonomic before 1.0
[22:51:29] <strcat> in performance, expressiveness, etc.
[22:51:36] *** Joins: krdln (Mibbit@moz-7E5A1CD6.dynamic.chello.pl)
[22:51:37] <strcat> in many cases, it's going to be worth it
[22:51:40] <acrichto> jmgrosen: hmm, this does indeed look weird :(
[22:51:45] <strcat> the safety model will map well to the safety model of your application
[22:52:20] <acrichto> Matthias247_: due to cross compilation we couldn't use vista CVs b/c we don't know if windows code is running on XP or not
[22:52:24] <Tobba> I'm hoping the safety of rust will be worth it for a kernel to guarantee safety by anything other than logical errors in setting the CPU state up
[22:52:31] <Tobba> or well, general logical errors
[22:52:36] <acrichto> Matthias247_: althoguh runtime detection sounds interesting (unsure if we'd need it)
[22:52:41] <jmgrosen> acrichto: I'm guess it's something weird with how I have libstdc++ installed
[22:53:04] <strcat> Tobba: you can't encode as much in rust's type system as you can in C++ or D
[22:53:08] <acrichto> jmgrosen: did you install it manually or via some non-normal procedure?
[22:53:15] <strcat> traits present a really clear API, with really clear errors
[22:53:16] <Tobba> well yeah sadly
[22:53:16] *** Quits: [squiddy] (squiddy@moz-B6B9C896.adsl.alicedsl.de) (Quit: Leaving)
[22:53:24] <strcat> but you lose capabilities to get there
[22:53:24] <Tobba> I should be fine though
[22:53:50] <strcat> sum types with exhaustiveness checking are the feature rust offers over most languages there
[22:53:56] <jmgrosen> acrichto: I don't think so, but I might have installed gcc from both homebrew and Xcode or something abnormal like that; Rust was compiling fine for me 2 weeks ago
[22:54:32] <acrichto> jmgrosen: hm that sounds suspicious, I dunno if we pass through --eanble-clang into LLVM
[22:54:35] <strcat> so, when concepts mapping to sum types are common you have benefits
[22:54:48] <ziad> strcat: what can you encode in C++'s type system that you can't in Rust's? Are you referring to template metaprogramming?
[22:55:00] <acrichto> Tobba: I've written a kernel that's just a bare-metal game and the core logic has 0 unsafe blocks (just the fluff around dealing with the hardware), so it's certainly very useful in a kernel for safety
[22:55:08] <Matthias247_> acrichto: This sounds unlucky, because it would force rust on old APIs although MS will also stop support for WinXP
[22:55:08] <strcat> ziad: for example, you can encode units with dimensions into C++'s type system
[22:55:35] <ziad> strcat: that's a C++11 feature right?
[22:55:40] <strcat> no
[22:55:42] <Matthias247_> and Windows Events also have some problems from what I read
[22:55:51] <strcat> ziad: it's not a specific feature
[22:55:57] <strcat> it's something you're able to do with the type system
[22:56:03] <jmgrosen> acrichto: is libc++ supported at all?
[22:56:04] <krdln> strcat: There are plans to make template parametrized over an integer or any other object?
[22:56:08] <ziad> like Matrix<4, 4>?
[22:56:13] <strcat> krdln: not enough
[22:56:14] <pcwalton> krdln: associated constants yes
[22:56:17] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[22:56:21] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[22:56:21] *** ChanServ sets mode: +ao dherman dherman
[22:56:24] <strcat> ok for example
[22:56:34] <pcwalton> also this is the first thing I have heard of when it comes to intrusive data structures, perhaps DST will help?
[22:56:37] <acrichto> Matthias247_: it is true, we currently are unaware of a fundamental blocker other than cvars and that one use case is a little unconvincing
[22:56:41] <strcat> x is 'meter', y is 'second'
[22:56:45] <strcat> x * y * y
[22:56:46] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[22:56:47] <pcwalton> DST allows full variadic stuff
[22:56:50] <pcwalton> err
[22:56:55] <strcat> now you have a type that represents meters/seconds^2
[22:56:58] <pcwalton> full dynamically sized structs with fixed sized headers.
[22:56:59] <ziad> ah I see
[22:57:04] <strcat> and you'll get an error if you pass it to something taking meters/second
[22:57:11] <strcat> but, you didn't write all of these types by hand
[22:57:17] <Ms2ger> You mean Newton/kg
[22:57:20] <strcat> they can all be implicit - you can go to N dimensions of any combination
[22:57:36] <strcat> anyway, traits offer other benefits
[22:57:40] <strcat> it's a trade off
[22:57:43] <krdln> pcwalton: What does you mean by associated constants? Nothing comes to my ming.
[22:57:46] <krdln> mind*
[22:58:14] <strcat> but in some places, you might be willing to have inferior API documentation (unclear requirements, based on the implementation), and inferior error reporting - in order to have more power in what you can express
[22:58:33] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[22:58:41] *** Quits: Ms2ger (Ms2ger@125CFB8C.2C129564.3773EA9F.IP) (Quit: nn)
[22:58:45] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[22:59:14] <pcwalton> krdln: you can get the same effect with Trait Tr { static int X; } â€¦ fn f<T:Tr>() { â€¦ use Tr::X â€¦ }
[22:59:25] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[22:59:43] <kimundi> pcwalton: That seems much more unwieldy though
[23:00:05] <pcwalton> kimundi: we could offer sugar so that "4" as a type parameter is just sugar for a Numeric trait with ::VALUE or something
[23:00:25] <pcwalton> the new Arena is an intrusive data structure and DSTs as proposed by nmatsakis should allow it to be written naturally
[23:00:30] <strcat> pcwalton: the problem with intrusive data structures is that the ownership is really, really unclear to the compiler
[23:00:44] <kimundi> pcwalton: That was just what I was thinking of - have integer literals also represent unit types that implement that trait
[23:00:50] *** Joins: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net)
[23:01:02] <strcat> pcwalton: you can write them with references if they only need to live for 1 scope
[23:01:13] *** Quits: WebeWizard (Mibbit@moz-7CCD1DAE.ks.ks.cox.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:01:15] <strcat> but it really doesn't work for real use cases
[23:01:23] <krdln> pcwalton: where do I give value to such constant? just impl T for Trait { static int X = 42; } ? I thought that traits are only about a functions.
[23:01:24] <pcwalton> the typed arena is a real use case and works fine
[23:01:43] <kimundi> krdln: It is planned to have traits also include constants
[23:01:47] <Matthias247_> acrichto, pcwalton: And regarding your protocol on channels: I would advise against blocking  channels. It's easily prone to deadlocks. Imho to the same extend as mutex use. And rusts goal is to minimize such problems
[23:01:49] <kimundi> krdln: And types
[23:01:53] <strcat> pcwalton: by intrusive data structures I mean objects with linked data structures threaded through them
[23:01:58] <strcat> so your object can be in more than one container
[23:02:00] <strcat> without refcounting
[23:02:14] <strcat> linux kernel containers are mostly intrusive in that way
[23:02:15] <pcwalton> oh, that's impossible to handle safely without ref counting or arenas as far as I know
[23:02:23] <pcwalton> that's just plain unsafe
[23:02:32] <acrichto> Matthias247_: it's certainly a very contentious topic with many *strong* opinions on all sides, it's not clear what our final goal is oging to be just yet
[23:02:41] <krdln> kiundi, pcwalton: so for now there are none analogous construct for c++ template<int x> struct...
[23:02:54] <krdln> kimundi: *
[23:02:57] <kimundi> krdln: No
[23:03:01] <pcwalton> krdln: closest thing you can do is make a trait with get_value() -> int method
[23:03:02] <strcat> Matthias247_: rust has blocking channels, recv blocks - I guess you mean on send?
[23:03:08] <kimundi> krdln: Not at the moment
[23:03:13] <Matthias247_> strcat: yes
[23:03:28] <Matthias247_> blocking on both sides is the problem
[23:03:34] <pcwalton> if we need more sugar for pointer manipulation then we can add that
[23:03:38] <strcat> Matthias247_: all queues are bounded by available resources, anyway
[23:03:55] <pcwalton> boundedness <=/=> blocking
[23:03:56] <pcwalton> on send
[23:04:02] <pcwalton> these are orthogonal design choices
[23:04:09] <Matthias247_> yes
[23:04:12] * olsonjeffery has flashbacks to the unbounded messaging thread
[23:04:12] <strcat> pcwalton: sure, it could overwrite or drop stuff, but that's not going to make sense by default
[23:04:13] <pcwalton> it could equally imply failure, or handing back the value
[23:04:16] *** Quits: sellout (Adium@moz-EB6EF561.hsd1.co.comcast.net) (Quit: Leaving.)
[23:04:26] *** Quits: pyon (user@BCC41BDF.6C782DF8.1C8C8CE9.IP) (Quit: ERC Version 5.3 (IRC client for Emacs))
[23:04:28] <kimundi> krdln: Note that writing a trait with a getter that returns a constant value is pretty much identical to an assoziated constant, provided the functions gets inlines
[23:04:29] <pcwalton> it could also return Option<T> where None == success and Some(T) == you got your value back
[23:04:36] <Matthias247_> but i thought both things are discussed. Introducing bounds or blocking
[23:04:47] <strcat> pcwalton: well, the API I provided is pop -> T (blocks), try_pop (hands back value), pop_timeout (hands back value after timeout)
[23:04:47] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[23:04:51] <strcat> and the same for push
[23:04:54] <strcat> which... seems totally fine
[23:05:03] <strcat> it's high-level, doesn't map to anything incredibly efficient, but whatever
[23:05:14] <strcat> maps to what condition variables provide
[23:05:52] <ercxx> has there been changes to the way enums work? if so are docs up to date?
[23:05:52] <strcat> multiple-consumer/multiple-producer by default with non-blocking and blocking methods is imo what a general stdlib queue should provide
[23:05:57] <sfackler> pcwalton: Result<(), T> may be more clear there
[23:06:02] <pcwalton> sfackler: yeah, either one
[23:06:04] <strcat> and the option of boundedness
[23:06:08] <aatch> clearly the sensible option is address space roulette. If the queue is full, or empty, write random bytes to a random part of memory.
[23:06:14] <kimundi> ercxx: why do you ask?
[23:06:16] <krdln> kimundi: that could be enough, but I want to make about few hundred traits and specifying each by hand would be little painful. But thanks for help
[23:06:42] <strcat> pcwalton: TBB's blocking queue has a default ctor with a bound higher than available memory, so it offers both with one type
[23:06:43] * strcat shrugs
[23:06:51] <kimundi> krdln: Yeah, that would be painful :P - Still, macros might be your friend?
[23:07:04] <ercxx> kimundi: I'm having hard time, maybe I forgot something somewhere. I'll see what kind of mistake I'm making first.
[23:07:11] <aatch> Sure, normally you'd get a segfault, but sometimes you might not, you might get data corruption instead :D
[23:07:19] <Matthias247_> In my experience sporadic deadlocks are the most problematic things to debug. Low performance or high memory usage is easier to find
[23:07:33] <strcat> Matthias247_: unbounded memory usage isn't just high memory usage
[23:07:36] *** Joins: \n (uid15310@moz-31ABA2C0.irccloud.com)
[23:07:53] <\n> how do I convert a Rust ~str to a C string?
[23:07:59] *** Joins: bluegreen (zaphood@moz-49C6A43B.privacyfoundation.ch)
[23:07:59] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Quit: ëžœë¤ì€ ì‡ í‡´í–ˆìŠµë‹ˆë‹¤.)
[23:08:07] <dbaupp> \n: .with_c_str or .to_c_str
[23:08:07] <acrichto> \n: to_c_str() or with_c_str()
[23:08:12] <acrichto> hehe
[23:08:33] <strcat> Matthias247_: can't rely on the OS scheduler to give anything resembling equal time to both a consumer/producer (and that's assuming they go at the same rate per cycle)
[23:08:40] <dbaupp> \n: http://static.rust-lang.org/doc/master/std/c_str/trait.ToCStr.html
[23:08:41] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[23:08:45] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[23:08:49] <strcat> I think it's unlikely you will have a balance
[23:08:55] <\n> ty!
[23:08:57] <strcat> it will either be mostly empty, or have unbounded growth
[23:09:01] <strcat> unless you have external bounding
[23:09:09] <strcat> and isn't that equally as likely to deadlock?
[23:09:33] <dbaupp> \n: (note that you *must* call with_c_str like `string.with_c_str(|ptr| c_call(ptr))`, *not* like `c_call(string.with_c_str(|ptr| ptr))`
[23:09:51] <pcwalton> actually, I don't see why intrusive data structures in the linux kernel sense are not doable safely
[23:09:51] <krdln> kimundi: Last time I used macros, they couldn't generate multiple topdefs (eg.struct definitions). Has it changed?
[23:09:57] <pcwalton> as long as the data structure's lifetime exceeds the object's lifetime
[23:10:08] <kimundi> krdln: It has in fact! That now works
[23:10:11] <pcwalton> (which is trivially satisfied if the data structure's lifetime is 'static, for example -- i.e. a thread-local or global variable)
[23:10:14] <strcat> pcwalton: well, you can do it safely with borrowed ptrs
[23:10:16] <dbaupp> <3 sfackler
[23:10:21] <strcat> pcwalton: it does work, it's just totally inflexible :)
[23:10:28] <krdln> kimundi: yay! :)
[23:10:29] <strcat> and doesn't work when you want links both ways that you may want to modify
[23:10:36] <strcat> or more than 1 container threaded through them
[23:10:43] <pcwalton> sure it does, just make those private to the container logic and trust the container logic
[23:10:47] <Matthias247_> I think it would happen less often than deadlocks. Only when the consumer can't keep up. And it's easier to track
[23:11:03] <\n> dbaupp: from the documentation, what does "Raises the null_byte condition" mean?
[23:11:10] <\n> ie. what is a condition?
[23:11:17] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[23:11:18] <strcat> Matthias247_: scheduling isn't deterministic/reliable
[23:11:19] <pcwalton> you can put the prev/next pointers inside a container-only module and have only the container able to read/write those
[23:11:23] <Matthias247_> deadlocks will only be visible on special timing conditions
[23:11:32] <acrichto> strcat: pcwalton: a shadow type paramter on the link ensures safety, and you can just do the linux kernel trick of macros with field names to go back and forth
[23:11:38] <strcat> Matthias247_: so use 0-length queues like Go in your debug build ;p
[23:11:42] *** Joins: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net)
[23:11:45] <pcwalton> yup, macro hygiene may work
[23:12:00] *** Quits: atomical (atomical@moz-7BDC7D9E.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com) (Quit: atomical)
[23:12:43] *** Quits: maxli (maxli@moz-70F9251D.thefacebook.com) (Quit: Leaving.)
[23:12:47] <Matthias247_> strcat: If would use go I would only use queues with a reasonable length :)
[23:12:57] *** Quits: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net) (Quit: Leaving.)
[23:13:00] <dbaupp> \n: they're actually on the way out, fwiw. in any case http://static.rust-lang.org/doc/master/guide-conditions.html#conditions and http://static.rust-lang.org/doc/master/std/condition/index.html (I don't have time for a full explanation right now)
[23:13:06] <`achin> for your amusingment: http://kingjamesprogramming.tumblr.com/ 
[23:13:16] <strcat> Matthias247_: 0 is a reasonable length as a default, because it aids in writing robust programs
[23:13:47] <strcat> since you're going to find the problems nearly immediately
[23:13:55] <strcat> it's bad for performance, sure
[23:13:58] <Matthias247_> Yes. Where imho that means you build no cycles in your tasks which could cause deadlocks
[23:14:06] <Matthias247_> so it's the same as reasonable mutex use
[23:14:10] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[23:14:10] *** Joins: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net)
[23:14:34] <krdln> What does this compiler error mean? error: failed to find an implementation of trait std::io::Reader for &std::io::Reader<no-bounds>
[23:14:43] <strcat> Matthias247_: well, what's 'reasonable'?
[23:14:49] <strcat> lets say I have a concurrent hash map
[23:15:03] <strcat> if it only exposes find-by-clone and swap, I can't really deadlock
[23:15:15] <strcat> if it exposes find-by-ref, it's incredibly easy to deadlock
[23:15:29] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[23:15:29] <strcat> because find returns a wrapped reference removing a lock in the dtor
[23:15:32] *** Joins: drjeats (drjeats@moz-3D31C6D2.nyc.res.rr.com)
[23:15:35] <Matthias247_> Reasonable is what the export programmer would do
[23:15:46] <Matthias247_> but not everybody is one
[23:16:00] <strcat> so should a concurrent map expose find-by-ref?
[23:16:20] <strcat> even though it means 'let x = map.find(key); let y = map.find(key)' can deadlock if it needs to lock the same lock
[23:16:45] *** Quits: japaric (japaric@5F207A99.A347E168.F4D5766F.IP) (Connection reset by peer)
[23:17:02] <Matthias247_> don't know about the implementation of concurrent maps at the moment :)
[23:17:23] <strcat> Matthias247_: they lock a section of the map, or the entire map
[23:17:30] *** Joins: japaric (japaric@5F207A99.A347E168.F4D5766F.IP)
[23:17:39] <strcat> for insert, find_clone, swap, etc. that means they release it when they return
[23:17:43] *** Quits: nobody (nobody@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[23:17:56] <strcat> but if you want to find a value without a clone/swap (it may not be copyable!), you need to lock beyond the function call
[23:18:03] *** Joins: nobody (nobody@moz-7E09A266.neo.res.rr.com)
[23:18:08] <Matthias247_> yes, that's typically ok. And problems are when you do other things while you still hold the lock
[23:18:09] <strcat> and unlock in the dtor of what you return
[23:18:26] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[23:18:48] <strcat> Matthias247_: let x = map.find(&key); /* locks the map until the `x` reference is dropped */
[23:18:54] <strcat> do you view that as bad?
[23:19:10] <strcat> (well, locks *part* the map, in a good implementation)
[23:19:16] *** Quits: AvianFlu_ (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Ping timeout)
[23:19:17] *** Quits: jhasse (jhasse@moz-33238F6.ewe-ip-backbone.de) (Quit: Verlassend)
[23:19:41] *** Joins: sellout (Adium@moz-76D71F1A.hlrn.qwest.net)
[23:19:45] <aatch> I think at some point the "well, don't do that" argument applies.
[23:19:54] <Matthias247_> basically I would say yes. Although I don't know what Rusts type system could avoid in such cases
[23:20:02] <strcat> Matthias247_: it can't
[23:20:13] <strcat> shared ownership -> no static freezing/mutability checking
[23:20:43] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[23:20:48] <strcat> you could have find take &mut self instead of &self, but you've made life harder and can still hit the issue by accessing the map through another ref
[23:21:12] <Matthias247_> that's what i mean
[23:21:28] <strcat> map and map2 can refer to the same map
[23:21:50] <strcat> let x = map.find(key); let y = map2.find(key2); /* deadlock */
[23:21:58] <kimundi> krdln: It means you tried to pass an trait object to a function that is generic over that trait - which does not work per default because trait objects do not implement their trait
[23:22:01] *** Quits: drjeats (drjeats@moz-3D31C6D2.nyc.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[23:22:09] <strcat> if you did ignore(x) before map2.find, it wouldn't deadlock, since it drops it
[23:22:12] <strcat> easy to forget
[23:22:25] <strcat> and with fine-grained locking, the deadlock might not occur often
[23:22:35] <strcat> (especially with a good hash function)
[23:23:04] <strcat> if the locking is done on 1024 shards lets say, the deadlock chance is the chance that the hashes collide in that 1024 space
[23:23:28] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[23:24:12] <krdln> kimundi: I have function fn doIt(reader : &mut Reader) and I'm trying to pass elements from a &mut[&Reader] vector, by: for r in readers.mut_iter() { doIt(*r); }    I don't know how to make it work.
[23:24:16] <strcat> so should the language only expose find-by-clone/swap? I don't know, seems overly opinionated though
[23:24:20] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[23:24:24] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[23:24:25] *** ChanServ sets mode: +ao pcwalton pcwalton
[23:24:51] <krdln> kimundi: is doIt generic? I don't think so. But maybe I don't know Rust good enough.
[23:25:03] <pcwalton> oh, heh
[23:25:03] <pcwalton> turns out trans is a lot slower if libstd and lib extra are built with optimization off
[23:25:26] <strcat> anyway I'm not sure what the solution is there
[23:25:31] <strcat> using RAII makes it really easy to deadlock
[23:25:41] <strcat> can still deadlock quite easily without it
[23:25:48] <strcat> but it's not as bad
[23:26:04] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[23:26:31] <krdln> kimundi: That error happened when I tried to pass r instead of *r. I added the star becaouse iter wraps in borrowed pointer, i think.
[23:26:50] <Matthias247_> yes. But if you focus on tasks and message passing instead of mutex you will avoid this problem. I thought that was the idea between the light tasks
[23:27:17] <Matthias247_> However in my opinion blocking communication between tasks brings up similar problems
[23:27:19] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[23:27:28] <pcwalton> well, mutexes can be built on message passing
[23:27:28] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[23:27:47] <Tobba> would be very slow though
[23:28:10] <pcwalton> of course
[23:28:16] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[23:28:19] <pcwalton> my point is that message passing wouldn't prevent deadlocks
[23:28:29] <Matthias247_> Sure
[23:28:31] <pcwalton> if you use messages for mutex like patterns you can deadlock just as easily
[23:28:39] <Matthias247_> you can produce deadlocks at system level
[23:28:39] <strcat> Tobba: not necessarily, the fast path could use atomics and the slow path could use message passing
[23:29:13] <Matthias247_> but each layer on which you can avoid them is a good thing
[23:29:16] <Tobba> actually, whats even all the XP talk about, I know vista improved a lot of stuff around it, but still
[23:29:28] <pcwalton> Tobba: XP does not have condition variables, amazingly enough
[23:29:35] *** Joins: richard|s (mindginati@moz-EDC386D7.dyn.cust.vf.net.nz)
[23:29:45] <Matthias247_> Tobba: Vista introduced WinApi calls for Condition Variables
[23:29:50] *** Quits: richard|s (mindginati@moz-EDC386D7.dyn.cust.vf.net.nz) (Quit: brb)
[23:29:56] <strcat> pcwalton: the vista ones are quite crippled though :(
[23:30:05] <pcwalton> not as crippled as no condition variables :)
[23:30:07] <strcat> if we want nice blocking-with-timeout APIs it will block us
[23:30:20] <strcat> because they only take a reltime to sleep and don't tell you how long they slept for when they wake
[23:30:27] <strcat> could just ignore spurious wakeups
[23:30:27] <pcwalton> bummer
[23:30:32] <strcat> on windows
[23:30:39] <strcat> pthread_cond_timedwait takes an absolute time
[23:30:41] <kimundi> krdln: Well, you won'T be able to turn the &Reader elements of the vector into &mut readers
[23:30:43] <krdln> kimundi: Ok, I fixed it by making readers &mut[&mut Reader] instead of &mut[&Reader] (I thought mutability depends on owner only), now I have weird warning: 'variable does not need to be mutable', but when I remove mut, there are errors.
[23:30:50] <Tobba> you could implement your own condition variables using atomics
[23:31:07] <strcat> Tobba: and do what to block? ;p
[23:31:15] <pcwalton> IIRC they don't get the fairness guarantees if you do it yourself in userland
[23:31:23] <Tobba> spin then yield?
[23:31:24] <strcat> the native mutexes/cvars are important because they support fair scheduling and priorities
[23:31:27] <Matthias247_> boost afaik uses a combination of self build muteness and Win32 Events
[23:31:53] <strcat> MSVC++ implements C++11 threads which requires more than win32
[23:32:02] <strcat> since it's basically a pthreads clone
[23:32:15] <strcat> except no rwlocks
[23:32:20] <strcat> because they're silly
[23:32:32] <kimundi> krdln: mutability is inherited from the owner for owned types like ~ - a reference however explicitly does _not_ imply ownership. 6 and &mut are two idfferent types, with different semantics
[23:33:03] <strcat> (they're much more heavyweight so you get more contention on a rwlock than a mutex if you don't have an enormous # of cycles while holding the lock0
[23:33:09] <strcat> s/0/)/
[23:33:27] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[23:33:32] <strcat> like..... iterating over a whole container while holding a lock, but that'd be insane anyway! ;p
[23:33:38] <pcwalton> switching to arenas for trans blocks and removing the refcounting improves trans performance by 2%
[23:33:40] <pcwalton> â€¦ yay
[23:33:42] <krdln> kimundi: ty for clarifying that. But still, there's a warning.
[23:33:45] <ercxx> is there a way of getting an enum's content without matching it against possible types in the enum?
[23:33:48] <strcat> java uses rwlocks because they like the idiom of iterating over concurrent containers, *all the time*
[23:34:06] <dbaupp> pcwalton: would it improve compilation time of librustc?
[23:34:12] <dbaupp> s/would/does/
[23:34:20] <pcwalton> dbaupp: yes, by less than 1%
[23:34:26] <krdln> kimundi: let mut readers : &mut[&mut Reader] = ...; for r in readers.mut_iter() { doIt(*r); }
[23:34:39] <dbaupp> oh
[23:34:42] <dbaupp> I guess that's something
[23:34:57] <jmgrosen> acrichto: I downgraded llvm with homebrew (I was using 3.3svn (not sure what commit), but I'm back on 3.3 now) and now it works (at least, it's gotten to stage2) -- thanks for sort of being a rubber duck! :P
[23:35:03] <Matthias247_> I also use RW locks in my library
[23:35:03] <kimundi> krdln: I think the mutable warning lint is a bit broken in a few edge cases - if it does not compile without a mut, then ignore the warning :P
[23:35:08] <strcat> pcwalton: removing @ should improve perf.... can merge free glue into drop glue, and get rid of take glue
[23:35:17] <Matthias247_> but I don't think it was good :)
[23:35:19] *** Joins: pyon (user@BCC41BDF.6C782DF8.1C8C8CE9.IP)
[23:35:21] <pcwalton> take glue is like 2% of the program
[23:35:29] <pcwalton> iirc
[23:35:32] <strcat> pcwalton: after optimization?
[23:35:37] <strcat> I expect there is a lot pre-optimization
[23:35:37] <pcwalton> before
[23:35:41] * strcat shurgs
[23:35:43] <strcat> shrugs*
[23:35:49] <pcwalton> it'll help
[23:35:53] <pcwalton> I'm not expecting amazing things
[23:36:19] <pcwalton> I think my main strategy for de-@ing will be throwing stuff into TLS
[23:36:31] <pcwalton> for example, the type context need not be reference counted
[23:36:59] <dbaupp> will TLS be faster?
[23:37:17] <pcwalton> eventually, because rustc is statically linked
[23:37:23] <dbaupp> (faster than a sane reference counter like Rc<...>, too?)
[23:37:36] <krdln> kimundi: ty again! I will probably have to rethink once again mutability and ownership.
[23:37:38] <dbaupp> oh, *thread* local storage? not task-LS?
[23:37:57] <Matthias247_> Regarding channels: On inter-process and inter-cpu-communication level async communication is the only way to do it anyway. So if you build a really distributed system you have to tackle these issues anyway
[23:38:19] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[23:38:26] *** Joins: jhasse (jhass_000@moz-33238F6.ewe-ip-backbone.de)
[23:38:39] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[23:38:44] <pcwalton> you should talk to jeff hodges ;)
[23:38:54] <pcwalton> he's extremely opposed to async communication
[23:38:59] <strcat> Matthias247_: pthread mutex and cond vars work between processes, and there are semaphores
[23:39:31] <strcat> and windows mutexes are actually meant to be used inter-process, critical sections are what they call intra-process ones
[23:39:47] <strcat> which is a bit strange for *windows* since it de-emphasizes multi-processing
[23:39:58] <Matthias247_> I know. Implemented IPC for WInCE with Mutexes and Win events. It sucks :)
[23:40:12] <strcat> they love making everything an OS-level object with permissions/ACLs
[23:40:22] <Matthias247_> but if you go up to network communication then async is the only thing left
[23:40:54] <strcat> can still do synchronous network communication
[23:40:56] <strcat> block until timeout
[23:41:21] <strcat> and you can treat a timeout as it failing to work
[23:41:23] *** Quits: krdln (Mibbit@moz-7E5A1CD6.dynamic.chello.pl) (Quit: http://www.mibbit.com ajax IRC Client)
[23:41:34] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Connection reset by peer)
[23:41:46] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[23:42:07] *** Quits: bluegreen (zaphood@moz-49C6A43B.privacyfoundation.ch) (Z:lined (dronebot))
[23:42:08] <Matthias247_> if you da a write on a socket it will return once the data is in the kernel buffer. Not when its on the remote side
[23:43:19] <strcat> Matthias247_: you need application level acknowledgements to know the data was sent anyway
[23:43:30] <Matthias247_> yes
[23:43:46] <strcat> so your send can be synchronous...
[23:43:59] <strcat> send() calls write, then waits until it reads the acknowledgement
[23:44:06] <strcat> not everything is going to be at TCP-level
[23:44:32] *** Joins: zslayton (Mibbit@81EB2473.5F4BC84E.66C78B76.IP)
[23:45:10] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[23:45:33] <Matthias247_> yes, with the wrapper that wraps the asynchronity
[23:45:41] *** Joins: richard|s (mindginati@moz-EDC386D7.dyn.cust.vf.net.nz)
[23:45:51] *** Quits: richard|s (mindginati@moz-EDC386D7.dyn.cust.vf.net.nz) (Quit: brb)
[23:47:10] <jmgrosen> acrichto: yup, it finished compiling!
[23:47:28] * jmgrosen will remember not to mess with llvm in the future (too much)
[23:47:30] <Matthias247_> Most likely all options will have to be implemented to make everyone happy :-)
[23:47:32] <acrichto> jmgrosen: nice!
[23:47:58] <acrichto> pcwalton: btw message-passing mutexes are super fast with any runtime optimizations at all (52x faster than pthreads in my benchmark)
[23:48:09] <jmgrosen> now to play around with rust-protobuf
[23:48:11] <pcwalton> acrichto: wow!
[23:48:18] <pcwalton> ok, all my concerns are gone
[23:48:21] <dbaupp> acrichto: this is just for libgreen, right?
[23:48:25] <acrichto> dbaupp: yeah
[23:48:28] <pcwalton> oh
[23:48:28] <strcat> acrichto: on linux?
[23:48:32] <pcwalton> concerns remain ;)
[23:48:33] <acrichto> strcat: yep
[23:48:34] <pcwalton> for libnative
[23:48:43] <pcwalton> want to make sure they're fast on libnative
[23:48:50] <strcat> acrichto: seems quite odd, then
[23:48:51] <pcwalton> but that is excellent, congratulations
[23:49:04] <strcat> for me a pthread mutex is bounded by the function call and branch on the mutex type
[23:49:12] <acrichto> strcat: https://github.com/mozilla/rust/pull/11325
[23:49:13] <strcat> the actual mutex logic barely shows up in perf
[23:49:39] <strcat> acrichto: but those are rust's mutexes
[23:49:42] <strcat> not actual pthreads
[23:49:44] <strcat> they're wrapped
[23:49:51] <acrichto> strcat: they're all built on pthreads it's the same thing
[23:49:57] <strcat> no, they're not
[23:49:58] <pcwalton> they're lock_and_signal, right?
[23:49:58] <acrichto> you're not going to see a 50x performance difference
[23:50:00] <strcat> they use atomics at the rust level
[23:50:12] <strcat> afaik
[23:50:18] <acrichto> strcat: I invite you to rewrite that in C, If you see a 50x performance improvement I would be amazed
[23:50:28] *** jorendorff is now known as jorendorff_away
[23:50:31] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[23:50:40] <pcwalton> I thought lock_and_signal was much slower than rust's mutexes
[23:50:41] <pcwalton> err
[23:50:43] *** Quits: nobody (nobody@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[23:50:43] <pcwalton> than pthread mutexes
[23:51:15] *** Joins: nobody (nobody@moz-7E09A266.neo.res.rr.com)
[23:51:43] <strcat> can't see why a function call, branch on the mutex type and a single cmpxchg would be slow
[23:51:45] <dbaupp> acrichto: is the benchmark just spawning a number of tasks and incrementing a global inside a lock?
[23:51:50] <acrichto> yep
[23:52:08] <strcat> acrichto: well, I'll make a C version then
[23:52:13] <strcat> one with pthreads and one with TBB
[23:52:13] <pcwalton> uhâ€¦ writing metadata is 28% of trans time
[23:52:14] * strcat shrugs
[23:52:17] <strcat> will throw in an atomic too
[23:52:28] <strcat> keeping in mind that iirc, rust atomics are slow
[23:52:34] <strcat> do we still mark them all volatile?
[23:52:41] <strcat> should be a boolean param to the intrinsic
[23:52:58] *** Quits: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[23:53:16] <pcwalton> 10% of trans time is spent reallocing the metadata buffer
[23:53:24] <pcwalton> maybe we should preallocate that :)
[23:53:37] <strcat> pcwalton: or just switch the vector
[23:53:52] <pcwalton> using Vec<T> is not going to help
[23:53:58] <pcwalton> it's about allocation
[23:54:07] <pcwalton> the time is spent in realloc
[23:54:16] *** Joins: klaus (koz@moz-E49E7C4B.hsd1.wa.comcast.net)
[23:54:35] <strcat> pcwalton: it pushes chunks?
[23:54:41] *** Quits: zslayton (Mibbit@81EB2473.5F4BC84E.66C78B76.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:54:52] <dbaupp> strcat: unless someone address thiez's comment https://github.com/mozilla/rust/issues/11172#issuecomment-31309002 yes, atomics are all volatile
[23:54:56] <pcwalton> you mean switch to a noncontiguous vector?
[23:55:01] *** Joins: maxli (maxli@moz-70F9251D.thefacebook.com)
[23:55:11] <strcat> pcwalton: well I'm just curious what it pushes as one unit
[23:55:21] <pcwalton> ot
[23:55:24] <pcwalton> it's whatever the ebml writer does
[23:55:38] <pcwalton> I think those functions could stand to be inlined too
[23:58:54] <strcat> um, wat, clang reorders the addition outside of the locks ???
[23:59:02] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[23:59:14] <strcat> uhh
[23:59:23] <strcat>         pthread_mutex_lock(&mutex);
[23:59:25] <strcat>         global += 1;
[23:59:27] <strcat>         pthread_mutex_unlock(&mutex);
[23:59:36] <strcat> hm
[23:59:38] <strcat> oh nvm
[23:59:44] <strcat> optimizes out the global
[23:59:49] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
