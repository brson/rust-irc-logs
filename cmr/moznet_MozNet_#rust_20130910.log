[00:00:02] <cmr> oh, you can't do that with borrowed pointers I don't think, it'd require destruction and deallocation, wouldn't it?
[00:00:11] <cmr> maybe it callsthe drop glue anyway
[00:00:18] <cmr> dunno
[00:00:19] *** Joins: clements (clements@moz-BEE8D50A.dsl.snlo01.pacbell.net)
[00:00:19] <ecr> cmr: it could, which is why you can't.
[00:00:21] <tikue> lets find out
[00:00:22] *** Joins: sp3d (a@moz-6F12212B.fidnet.com)
[00:00:37] <ecr> cmr: if right was a ~[], you couldn't push() for instance
[00:00:40] <tikue> oh yeah it gives the error "can't dereference borrowed pointer"
[00:00:46] <cmr> yeah
[00:00:48] <etw> yep
[00:00:58] <tikue> ecr: you can if you do ref mut no?
[00:01:12] <tikue> you just can't do ref mut v => *v = new_vec
[00:01:30] <ecr> I'm not sure, let me play around with it
[00:03:12] <tikue> i'm getting what definitely looks like the wrong error message
[00:03:20] <tikue> enum Foo { Bar(uint) } match Bar(2) { Bar(ref mut two) => *two = 3, _ => (), }
[00:03:28] <tikue> gives the error "unreachable pattern"
[00:05:02] <etw> are you doing the struct enum there?
[00:05:11] <tikue> no
[00:05:13] <ecr> here's an example that works
[00:05:24] <ecr> enum List<A> { Nil, Cons(A, ~List<A>), }
[00:05:39] <ecr> fn main() { let mut ls = Cons(1, ~Cons(2, ~Nill));
[00:05:56] <tikue> this worked for me: enum Foo { Bar(uint) } match Bar(2) { Bar(ref mut two) => *two = 3 }
[00:05:57] <ecr> match ls { Nil => {}, Cons(x, ref mut xs) => *xs = ~Nil, } }
[00:06:00] *** Quits: miza (miza@moz-4DD51325.home.otenet.gr) (Input/output error)
[00:09:27] <etw> hmm, I'll give that a try
[00:09:43] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Quit: Leaving)
[00:10:40] <ecr> etw: I'll put mine up as a gist to give you an example
[00:11:42] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[00:13:02] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[00:13:44] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[00:13:46] *** Joins: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP)
[00:14:26] <ecr> etw: https://gist.github.com/anonymous/5ba44e198ce76eae3ce4 should work
[00:16:29] *** Quits: echristo (echristo@60A74940.D6CCE4AE.77834EAA.IP) (Ping timeout)
[00:18:18] *** Joins: eatkinson (eatkinson@E5442022.772DB3ED.90B17E8F.IP)
[00:19:53] *** Quits: itdaniher (it@moz-6C3ABA7E.bstnma.fios.verizon.net) (Ping timeout)
[00:22:50] *** Quits: ab (alex@BC9D99CC.37C1012D.FE617B51.IP) (Ping timeout)
[00:23:14] <AlisonW> ooh! make finished!
[00:24:11] <ecr> \o/
[00:24:17] *** Joins: itdaniher (it@moz-6C3ABA7E.bstnma.fios.verizon.net)
[00:24:26] *** Quits: eatkinson (eatkinson@E5442022.772DB3ED.90B17E8F.IP) (Quit: eatkinson)
[00:24:37] <ecr> just in time for my PR to make it through. now you can do it all over again!
[00:24:46] <ecr> in 8 minutes
[00:25:18] <AlisonW> nope. ;->
[00:25:37] <AlisonW> now .. bed. and playing with it in the morning instead
[00:27:10] *** Joins: RMF (RMF@moz-1A0DBA5B.dsl.telepac.pt)
[00:28:44] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[00:29:35] *** Joins: ww (Mibbit@moz-9D1D3E.public.wayport.net)
[00:33:44] *** Quits: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com) (Quit: ecr)
[00:36:28] <etw> I get "error: cannot borrow immutable anonymous field as mutable" trying to do the same thing
[00:36:52] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[00:36:52] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/aB993Q
[00:36:52] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[00:37:49] *** Joins: alisdair (textual@BB0336C3.D2943E17.C579BC3E.IP)
[00:38:33] *** Quits: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Ping timeout)
[00:39:18] *** Joins: jstevans (Instantbir@D9C83779.C4F5A14C.DDE5D3F6.IP)
[00:39:52] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[00:40:58] *** Quits: jstevans (Instantbir@D9C83779.C4F5A14C.DDE5D3F6.IP) (Ping timeout)
[00:41:05] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[00:41:05] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/hZptuA
[00:41:05] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[00:41:07] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[00:41:07] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/rOOIWA
[00:41:07] <ghrust> 13rust/06auto 14bb30f04 15Tim Chevalier: workcache: Add the ability to save and load the database......
[00:41:07] <ghrust> 13rust/06auto 1402a0fb9 15Tim Chevalier: rustpkg: Use workcache...
[00:41:07] <ghrust> 13rust/06auto 14ed4859e 15Tim Chevalier: extra: Address review comments from Jack
[00:41:08] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[00:42:43] <etw> not entirely the same, I'm matching Cons(ref mut tail, ~Nil) => *tail = ~Cons(...)
[00:43:01] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[00:43:10] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[00:45:28] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[00:45:47] <tikue> etw: why is Nil in an owned box?
[00:46:06] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Client exited)
[00:47:02] <etw> because the enum def is Cons(~Token, ~Token)
[00:47:21] <etw> I'm trying to match the last item in the list, i.e. Cons(the last item, ~Nil)
[00:48:40] <tikue> etw: what is Token?
[00:48:43] *** Joins: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP)
[00:48:59] <etw> enum Token { Nil, â€¦, Cons(~Token, ~Token) }
[00:50:33] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[00:50:48] *** Quits: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP) (Ping timeout)
[00:51:13] *** Quits: heftig (heftig@moz-5B26914A.dip0.t-ipconnect.de) (Ping timeout)
[00:51:57] *** Joins: heftig (heftig@moz-72BABD74.dip0.t-ipconnect.de)
[00:52:54] <tikue> try **tail = ~Cons(..)
[00:55:07] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:55:25] <tikue> etw: enum Foo { Bar(~uint) } let mut bar = Bar(~2); match bar { Bar(ref mut two) => **two = 3 } bar
[00:55:25] <tikue> [8:54pm] rusti: Bar(~3u)
[00:56:47] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[00:58:04] *** Quits: ozten (ozten@CB167D3E.3778D849.1D6E592A.IP) (Quit: ozten)
[00:59:40] <dcrewi> so putting traits directly in a function signature is pretty much never going to work, right?
[01:00:10] <tjc> dcrewi: you can if the function takes trait objects as arguments (or returns one)
[01:00:21] <dcrewi> you have to use a type parameter, and the function is specialized for a given impl
[01:00:23] *** Quits: cdidd (cdidd@moz-22C6C304.broadband.corbina.ru) (Input/output error)
[01:01:15] <tjc> dcrewi: or, you can use trait objects, but that means using dynamic dispatch
[01:01:50] <dcrewi> I didn't know that was possible, because I've never gotten it to work
[01:01:58] <dcrewi> (dynamic dispatch)
[01:02:36] <tjc> "16.4 Trait objects and dynamic method dispatch" talks about it, in the tutorial; but, there are still some bugs
[01:02:36] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (Client exited)
[01:02:41] <tjc> http://static.rust-lang.org/doc/tutorial.html#generics
[01:02:53] * tjc waves goodnight
[01:03:01] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[01:06:20] *** Joins: cdidd (cdidd@moz-812EAB3.broadband.corbina.ru)
[01:07:21] <etw> can I match against a type and get a reference for an enum? e.g: Cons(_, ref mut rest: ~Nil) ? 
[01:08:54] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:09:37] <pcwalton> etw: yeah
[01:09:48] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[01:10:26] <etw> pcwalton: is that the syntax? I get: "expected `,` but found `:`"
[01:10:42] <pcwalton> ohh, I see
[01:10:44] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[01:10:51] <pcwalton> Cons(_, ref mut rest @ ~Nil)
[01:11:03] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[01:11:03] *** ChanServ sets mode: +ao brson brson
[01:11:16] <ww> is there a way to print the stack trace of the fail! call?
[01:11:29] <pcwalton> break on rust_begin_unwind in gdb and use "bt"
[01:11:31] <pcwalton> is what I do
[01:13:56] <h3r3tic> hey, how do I wrap a C pointer in a struct of some sort with built-in length? kinda like vec::raw::from_buf_raw, but I'd like to avoid the copy
[01:14:54] <engla> what do you mean by built-in length h3r3tic?
[01:15:05] <h3r3tic> I mean I want a struct which has the ptr and the length
[01:15:09] <ww> ok thanks
[01:15:12] <h3r3tic> and it to behave like vec :P
[01:15:32] *** jdm sets mode: -b Yoric!*@*
[01:15:37] *** jdm sets mode: -b AutomatedTester!*@*
[01:15:59] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[01:16:09] <engla> h3r3tic: I suppose you could transmute the pointer and length pair into a vec slice, but it's dirty hack
[01:16:34] <h3r3tic> hah
[01:16:53] <h3r3tic> so I suppose there's no clean way of doing it? :P
[01:17:01] <engla> otherwise std::c_str does what you want but only with strings
[01:17:09] <h3r3tic> mm
[01:17:21] <h3r3tic> yus, I need it for bitmaps :)
[01:18:48] <h3r3tic> but thanks for the pointers!
[01:18:48] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:19:01] *** Quits: io2 (io2@moz-A6202C16.home.otenet.gr) (Quit: )
[01:19:43] <engla> h3r3tic: in std::vec::raw,  pub unsafe fn buf_as_slice
[01:21:48] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[01:21:49] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:22:16] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[01:22:34] <h3r3tic> engla: woooo, thanks! :D
[01:22:52] <engla> this function does exactly what I said
[01:23:03] <engla> except it locks the slice into a closure scope
[01:23:10] <h3r3tic> mm yeah
[01:23:15] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:23:16] <h3r3tic> looks like I should be able to use that :)
[01:23:36] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:25:15] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[01:25:16] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:27:17] *** Quits: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se) (Ping timeout)
[01:27:19] <SiegeLord> Anybody with knowledge or resolve/metadata want to review my PR? I updated it with a test this time: https://github.com/mozilla/rust/pull/9064
[01:27:25] <SiegeLord> *knowledge of
[01:27:59] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[01:28:43] <cmr> A test! Good enough for me to r+
[01:28:54] <cmr> (I did look over it before but didn't feel qualified to r+)
[01:30:20] <riley> Probably a dumb question, but what does r+ stand for?
[01:30:30] <riley> reviewed?
[01:30:36] <cmr> riley: yes, reviewed and approved
[01:30:46] <riley> cmr: cool, thanks
[01:30:56] <cmr> I've also seen `f+` for positive feedback
[01:31:05] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[01:31:05] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 147cc5756 to 14d41b558: 02http://git.io/N3iJvQ
[01:31:05] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[01:31:06] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[01:31:06] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/CXVV3Q
[01:31:06] <ghrust> 13rust/06auto 143452921 15SiegeLord: Properly encode/decode structural variants.
[01:31:06] <ghrust> 13rust/06auto 14ad694d3 15SiegeLord: Rename encode_struct_field_names to encode_struct_fields to reflect what it actually does
[01:31:07] <ghrust> 13rust/06auto 147742072 15SiegeLord: Add a test for cross-crate struct variants
[01:31:09] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[01:31:37] <h3r3tic> engla: yup, works quite well. got the first image loaded via a new freetype binding. cheers!
[01:31:42] <cmr> I think it's a mozilla thing, *shrug*
[01:31:47] <h3r3tic> s/freetype/freeimage/
[01:36:21] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[01:37:28] *** Quits: a__ (a__@moz-25043B93.nycmny.fios.verizon.net) (Ping timeout)
[01:38:48] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:39:53] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[01:40:07] *** Joins: a__ (a__@moz-25043B93.nycmny.fios.verizon.net)
[01:40:12] *** Quits: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com) (Ping timeout)
[01:40:14] <dwrensha> rusti: range(0, 10)
[01:40:28] <engla> dwrensha: you have to privmsg rusti 
[01:40:40] <engla> for some reason
[01:40:41] <dwrensha> how do I do that?
[01:41:02] <engla> either /query or /msg or something else depending on client I guess
[01:41:06] *** Joins: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com)
[01:41:32] <cmr> rusti: 5
[01:41:43] <cmr> strcat: is this intentional?
[01:41:53] <engla> it's not
[01:42:20] <cmr> ok
[01:42:25] <engla> I think it's not. strcat was puzzled
[01:42:47] <engla> cmr: about vec::build, it's really a pattern that's not easy to replace with iterators
[01:43:27] <cmr> engla: does any code use it?
[01:43:36] <cmr> Is it beneficial at all compared to from_fn?
[01:44:02] <cmr> When I looked at its equivalent in at_vec and thought it incredibly... pointless.
[01:44:12] <engla> yes, from_fn uses an count given up front
[01:44:15] <engla> an element count
[01:44:36] <engla> build is used in a few places, but strangely build_sized, build_sized_opt don't have any users
[01:46:29] <engla> I guess most uses could be converted to iterators
[01:46:31] <engla> but not 100%
[01:46:47] *** Joins: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP)
[01:46:55] <ww> nb question: how do i split a string into tokens by a char?  
[01:48:18] <ww> there's a split_char function in http://dl.rust-lang.org/doc/core/files/str-rs.html#trim but http://static.rust-lang.org/doc/core/str.html doesn't have it
[01:48:23] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[01:48:37] <cmr> ww: core no longer exists.
[01:48:40] <engla> the "core" docs are the wrong version I think ww. Which version of Rust are you using?
[01:48:40] <cmr> you're lookingat old docs.
[01:48:49] <cmr> especially http://dl.rust-lang.org/doc/core/files/str-rs.html#trim
[01:48:53] <cmr> that's like, 0.
[01:48:55] <cmr> 3
[01:48:57] <engla> ww: there is a method called .split_iter that splits on characters
[01:49:13] <engla> oh
[01:49:15] *** Joins: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP)
[01:49:20] <ww> i'm using pre-0.8
[01:49:24] <engla> ww: find your docs at http://www.rust-lang.org/
[01:49:34] <engla> Trunk -> Standard in the upper left
[01:49:52] <engla> and don't trust the shady internet rust docs dealers
[01:49:59] <engla> except cmr 
[01:50:03] <ww> ok, so i have to use the iterator version.  there's no split to array or tuple?
[01:50:08] <cmr> yes, Seldaek and I are authorized dealers
[01:50:22] <cmr> ww: you can collect into a vector
[01:50:28] <cmr> but iterators are almost always whatyou want
[01:50:31] <ww> ok i see
[01:50:49] *** Quits: tikue (tkuehn@61D12352.CD72397.689607DE.IP) (Quit: tikue)
[01:50:52] *** Quits: heftig (heftig@moz-72BABD74.dip0.t-ipconnect.de) (Ping timeout)
[01:51:17] *** Quits: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP) (Ping timeout)
[01:52:42] <engla> "ww-hi-- k".split_iter('-').to_owned_vec()   gives ~["ww", "hi", "", " k"]
[01:52:43] *** Joins: heftig (heftig@moz-72BABD74.dip0.t-ipconnect.de)
[01:53:26] <ww> thanks!
[01:54:11] *** Joins: tikue (tkuehn@61D12352.CD72397.689607DE.IP)
[01:55:32] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[01:56:05] <ww> oh god the new doc in http://static.rust-lang.org/doc/std/index.html is so much better and relevant.
[01:57:12] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[01:57:30] *** Quits: lbergstrom1 (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[01:59:34] <engla> cmr: can we remove all but one of the three build functions?
[02:00:30] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[02:00:38] <jmgrosen> rusti: 5
[02:00:41] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[02:00:54] <jmgrosen> rusti: 2
[02:01:00] <jmgrosen> hmmm
[02:01:45] <etw> can I store a function in an enum, something like enum Foo { Bar(&fn()) } 
[02:02:00] <jmgrosen> etw: yeah, but it needs to be &'self fn()
[02:02:12] <jmgrosen> like enum Foo<'self> { Bar(&'self foo()) }
[02:02:22] <jmgrosen> s/foo/fn/
[02:02:32] <jmgrosen> either that, or use ~fn() or @fn()
[02:03:16] <ChrisMorgan> I really wish rustdoc generated docs for std::rt::io, at least at present
[02:04:11] *** Quits: jdm (jdm@moz-BBE3ABD.mv.mozilla.com) (Quit: Lost terminal)
[02:05:17] <engla> locally, can't you remove #[doc(hidden)]; and regenerate the docs
[02:06:04] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[02:06:04] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 140a92ec6 to 14d41b558: 02http://git.io/N3iJvQ
[02:06:04] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[02:06:05] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[02:06:05] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/tPy6Ow
[02:06:05] <ghrust> 13rust/06auto 142a0dd97 15Patrick Walton: librustc: Port writeback to the new API.
[02:06:05] <ghrust> 13rust/06auto 14af259a6 15bors: auto merge of #9086 : pcwalton/rust/writeback-port, r=brson...
[02:06:06] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[02:06:59] <ChrisMorgan> engla: I guess so
[02:07:27] <ChrisMorgan> I have just considered the matter and have decided that I *hate* the example shown at http://www.rust-lang.org/; it's a toy example showing absolutely the wrong way to do it.
[02:08:15] *** Quits: alisdair (textual@BB0336C3.D2943E17.C579BC3E.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[02:08:24] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[02:08:25] *** Quits: boredomist (user@8186917.CC8FA3EE.E3401B6E.IP) (Ping timeout)
[02:08:30] <jmgrosen> ChrisMorgan: besides zipping, (and the old syntax), what would you do differently?
[02:08:37] <etw> if I use ~fn() I get a weird error with deriving Clone: error: mismatched types: expected `~fn:Send(&vm::parser::Token)` but found `&~fn:Send(&vm::parser::Token)` (expected fn but found &-ptr)
[02:09:46] <jmgrosen> etw: I don't think you can clone a ~fn()
[02:10:19] <ChrisMorgan> jmgrosen: manually creating another vector containing just indices? At the very least, I'd use range.
[02:10:42] <cmr> engla: sounds good to me
[02:10:49] <jmgrosen> ChrisMorgan: range wasn't in 0.7
[02:10:54] <jmgrosen> â€¦I don't think
[02:11:00] <jmgrosen> at the least, not in the prelude
[02:11:03] <ChrisMorgan> I think it was, just not in the same spot.
[02:11:15] <josh> this seems like a thing from the docs but the compiler says unrecognized, ideas? extra::base64::CharacterSet::Standard
[02:11:39] <engla> ChrisMorgan: I think the example on the front page should in fact be simpler, so that newcomers are more likely to understand it
[02:11:59] <ChrisMorgan> I'm fine with simpler.
[02:12:02] <jmgrosen> josh: it's just extra::base64::Standard, enum variants are in the same scope as the enums themselves
[02:13:03] <josh> jmgrosen: odd, but that works, thanks
[02:13:11] *** Quits: eevee (eevee@moz-2CC451BF.evrt.wa.frontiernet.net) (Connection reset by peer)
[02:13:36] <mindcat> good morning
[02:14:08] * mindcat don't think it is "morning"
[02:14:19] <tiffany> does rust have a built in way to start threads rather than a task?
[02:16:12] <ChrisMorgan> Incidentally, jmgrosen, for such a convoluted case, I'd be using enumerate() followed by filter_map(), most likely.
[02:16:48] <jmgrosen> tiffany: str::rt::thread::Thread::start(|| println("look ma, my own thread!))
[02:17:02] <jmgrosen> whoops, missed ending quotes :P
[02:17:18] *** Joins: eevee (eevee@moz-2CC451BF.evrt.wa.frontiernet.net)
[02:17:40] <mindcat> rusti: str::rt::thread::Thread::start(|| println("look ma, my own thread!))
[02:18:02] <mindcat> rusti bot down again?
[02:18:44] <engla> you have to privmsg rusti at the moment
[02:18:48] <engla> it works
[02:19:15] <klutzy> seems like pastebin part is problematic
[02:19:18] <mindcat> engla: ok..
[02:19:42] <mindcat> klutzy: then http://paste.ubuntu.com
[02:19:47] *** Quits: zz_kimundi (kimundi@moz-12AAE460.dip0.t-ipconnect.de) (Ping timeout)
[02:19:49] <engla> we have less noise..
[02:19:55] *** Quits: fyolnish (fyolnish@moz-E4E45F5C.uqwimax.jp) (Client exited)
[02:20:11] <klutzy> mindcat: oh, I meant I think rusti doesn't work on calling ix.io
[02:20:50] <mindcat> klutzy: ok...
[02:21:14] <engla> klutzy: rusti is sluggish, but the ix.io pasting works fine too
[02:21:20] <engla> in /query rusti  mode
[02:21:33] <klutzy> engla: interesting!
[02:22:44] <mindcat> engla: can I paste a rust source file to rusti?
[02:23:05] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[02:23:17] *** Joins: zz_kimundi (kimundi@moz-84DC311F.dip0.t-ipconnect.de)
[02:23:36] *** zz_kimundi is now known as kimundi
[02:24:16] * mindcat 
[02:24:41] <engla> I don't think so
[02:24:53] <engla> mindcat: strcat has this webpage http://strcat.zapto.org:8000/
[02:25:08] <mindcat> engla: ok
[02:25:09] <engla> it's an online compiler, you can paste there
[02:27:52] <Amaranth> So an enum is actually two entirely different kinds of types depending on how its defined?
[02:28:17] <engla> hm do you mean how you can have both tuple-like and struct-like variants?
[02:28:47] <engla> by the way, have we considered for the webpage to have two tabs for the "very small taste"  so that the visitor can see both master and Rust 0.7?
[02:29:08] <Amaranth> I mean one kind of enum works exactly like C and the other is something different
[02:29:15] <engla> that too!
[02:29:34] <cmr> Amaranth: it's the same type, represented the same way.
[02:29:41] <cmr> It's always discriminant + data.
[02:29:49] <engla> exactly like C is not correct. You can't use arithmetic
[02:29:58] <mindcat> where can download like this docs? http://seld.be/rustdoc/master/std/index.html
[02:30:02] <cmr> But if you don't have any fields in any of your variants, it's just the descriminant.
[02:30:39] <cmr> mindcat: unfortunately not really available for download yet :(
[02:30:58] <SiegeLord> What did I do wrong here: http://buildbot.rust-lang.org/builders/auto-win-32-nopt-t/builds/469/steps/test/logs/stdio
[02:31:29] <cmr> SiegeLord: did you not mark that crate as aux, and put it in the auxillary directory?
[02:31:52] <cmr> look to another xcrate test for an example
[02:31:57] <mindcat> cmr: well, this docs is better here docs "http://doc.rust-lang.org/doc/0.7/std/index.html"
[02:32:22] <SiegeLord> https://github.com/SiegeLord/rust/commit/774207217507850a42177c69ae5e10ad3b61d1af
[02:32:43] <cmr> SiegeLord: huh, that looks right to me :\
[02:32:49] <engla> cmr: is there any trouble blocking docs for enum methods like for Option in your rustdoc_ng?
[02:32:49] <mindcat> cmr: then I had to try "download" whole docs website.
[02:33:07] <cmr> engla: no, that's a rustdoc_web bug.
[02:33:15] <engla> oh great
[02:33:26] <cmr> ... I think
[02:33:27] * cmr checks
[02:34:08] <engla> and I know I pointed out to Seldaek that all "use" were shown as "pub use" and he fixed it immediately
[02:34:13] <engla> but it's back that way
[02:35:24] <cmr> Ok yeah, it's a rustdoc_web bug.
[02:35:26] <tiffany> uhh.. how do I recompile rust without it doing it from scratch? not run ./configure?
[02:35:40] <cmr> tiffany: what did you change?
[02:35:46] <tiffany> I git pull'd
[02:35:53] <cmr> You have to rebuild from scratch.
[02:36:03] <tiffany> including llvm and stage1?
[02:36:06] <cmr> You could probably just build stage1 and use the stage1 compiler though
[02:36:10] <cmr> If llvm was updated, yes.
[02:36:21] <tiffany> what if it isn't? 
[02:36:38] <cmr> LLVM being rebuilt without LLVM changes?
[02:36:55] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[02:37:04] <tiffany> it apparently takes me a ridiculously long time to build rust
[02:37:06] <ww> nb question: ~["abc", "xyz"] is a vec on the exchange heap where the individual elements are on the stack, right?  whereas ~[~"abc", ~"xyz"] is a vec where both the vec and its elements are in the heap, right?
[02:37:13] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:37:23] <SiegeLord> Maybe Windows doesn't like crates with - in their name
[02:37:32] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[02:37:46] <cmr> ww: no, in that case the elements would be in the read-only sectino of the binary, because it's string literals.
[02:37:50] <cmr> ww: but in the second one, yes.
[02:38:06] <cmr> ww: Also, there's no such thing as an "exchange heap"; we don't really use the concept of multiple heaps anymore.
[02:38:22] <ww> ok, it's just the owned heap
[02:38:23] <cmr> It's all allocated the same, in the same place, it's just the ownership semantics that dictate how they are used.
[02:38:27] <SiegeLord> So far all other examples with - in their name are xfail-fast...
[02:38:33] <cmr> Nope, just the heap.
[02:38:36] <ww> ok
[02:38:41] <SiegeLord> That's kind of obscure... I'll try changing it
[02:38:43] <sp3d> some part of the rustdoc_web javascript makes webkitgtk hang for a couple seconds every time I load a page :(
[02:38:51] <cmr> sp3d: that would be the search engine
[02:39:02] <SiegeLord> cmr: Do you think that might be the issue?
[02:39:10] <cmr> SiegeLord: plausible.
[02:39:34] <cmr> If that doesn't fix it, just whack an xfail-fast on it
[02:39:41] <dcrewi> cmr: and the garbage-collector magically avoids looking at owned references?
[02:40:08] <cmr> dcrewi: it's not magic; it doesn't scan the heap, it knows all managed references when they're created.
[02:40:11] <cmr> aiui
[02:41:53] <engla> ok cmr, that's 3 more free functions in std::vec gone. same_length was added in 2011 to be used as precondition, so its time has passed
[02:42:03] <engla> I'm just pushing all of this into my open std::vec PR
[02:42:10] <cmr> engla: thanks!
[02:42:27] *** Joins: mib_zqa17l (Mibbit@moz-3975260E.gae.googleusercontent.com)
[02:42:33] <ww> ~"abc xyz".split_iter(' ').to_owned_vec() produces ~["abc", "xyz"].  how can it produce the static string literals at runtime?  I thought the static string literals are produced at compile time.
[02:43:01] <sfackler> they're not static strings, they're slices into the original string
[02:43:03] <lkuper> tiffany: it takes a while, particularly if you don't have much RAM available
[02:43:07] <engla> ww: a string slice is a view ("slice") of another string. the slices in the vector point into the same memory as the original string
[02:43:10] <ww> oh ok
[02:43:15] <ww> i see
[02:43:21] <engla> ww: pretty cool huh
[02:43:34] * engla likes slices
[02:43:40] <ww> yeah, ha.  i was trying to figuring out how the memory model work
[02:43:48] <sfackler> TcpStreams aren't buffered, right? Is there a buffered writer deorator anywhere for new rt?
[02:43:49] <tiffany> I have 4gb of ram but I can't do multithreaded builds because my computer overheats
[02:44:05] <cmr> tiffany: only llvm can be built in parallel anyway
[02:44:09] * mindcat try to copy docs website.
[02:44:14] <engla> the llvm build can be cached with ccache
[02:44:23] <lkuper> yeah, multithreading isn't going to help you a whole lot for the rust part of the build
[02:44:29] * cmr hopes the debian guy upstreams our patches, 'cause that'd be awesome
[02:44:31] <tiffany> should I copy the repo to /dev/shm next time?
[02:44:45] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[02:44:46] <cmr> tiffany: nah, it's not really io bound either, since it only reads files once, at the start
[02:45:06] <cmr> for the rust build at least
[02:45:59] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[02:46:03] <lkuper> what is the currently recommended way to debug an ICE?  we don't have ::rt::backtrace anymore; is there a replacement way to get a backtrace?
[02:46:09] <cmr> lkuper: gdb
[02:46:39] <lkuper> heh, okay
[02:46:48] <mib_zqa17l> Hello. I want to translate the following haskell code to rust. objective_function :: Num a => [a] -> a objective_function = foldl (\sum x -> sum + x^2) 0. so I write: 
[02:46:50] <mib_zqa17l> fn objective_function<T: Num>(vec: &[T]) -> T {     vec.iter().fold(0.0, |sum, &x| sum + (x*x)) }
[02:46:57] <mib_zqa17l> but the compiler complain: error: mismatched types: expected `<VF0>` but found `T` (expected floating-point variable but found type parameter) random_search.rs:4     vec.iter().fold(0.0, |sum, &x| sum + (x*x))
[02:47:02] <mib_zqa17l>  mismatched types: expected `T` but found `<VF0>` (expected type parameter but found floating-point variable) random_search.rs:4     vec.iter().fold(0.0, |sum, &x| sum + (x*x)) random_search.rs:5 }
[02:47:06] <mib_zqa17l>  can anybody help?
[02:47:38] *** Quits: feduser (feduser@1FEEBA37.894E1D07.8D466B92.IP) (Quit: Leaving)
[02:48:02] <jmgrosen> mib_zqa17l: you need the `Zero` bound on T, and then use std::num::zero
[02:48:09] <jmgrosen> (instead of 0.0)
[02:48:24] *** Quits: tavoe (tavoe@moz-F85B6108.student.rit.edu) (Quit: Leaving)
[02:48:25] <engla> there are no generic number literals
[02:48:42] <cmr> mib_zqa17l: so the signature of fold on an Iterator<A> is fn fold<B>(..., init: B, f: &fn(B, A) -> B) -> B
[02:48:51] <cmr> Your functoin's signature is T
[02:48:57] <cmr> but it's trying to return a float
[02:49:29] <cmr> Additionally, you're passing a float as the first param, and a closure that returns T, which is that specific error message.
[02:49:45] *** Joins: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP)
[02:49:46] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[02:49:50] * mindcat is copying docs website.
[02:50:26] <cmr> :q
[02:50:42] <mib_zqa17l> Oh, I see. Let me try
[02:51:48] *** Quits: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP) (Ping timeout)
[02:53:19] <jmgrosen> perhaps we should have generic number literals?
[02:53:22] <jmgrosen> at least for 0 and 1
[02:53:51] <cmr> jmgrosen: once we have CTFE I'd like full generic numeric literals.
[02:53:56] <mindcat> when, I can compile rust in my android phone or raspberry pi? I think now unsupport :p
[02:54:06] <jmgrosen> cmr: CTFE?
[02:54:09] <engla> you can use std::num::{one, zero};  so you can use one(), zero() jmgrosen. It's something.
[02:54:16] <cmr> jmgrosen: compile time function execution
[02:54:22] <jmgrosen> engla: yeah, I know, but still :P
[02:54:31] <jmgrosen> cmr: ah, yeah; that would be nice
[02:54:42] <strcat> you have to use from_str atm
[02:54:44] <cmr> jmgrosen: in this instance it'd be the ability to construct the exact structure needed for a given literal at compile time without macros.
[02:54:50] <engla> ok. /me noticed those free functions very recently
[02:55:52] <jmgrosen> do we have a `Num` trait that's something like `Zero + One + Mul<T, T> + Add<T, T> + â€¦`?
[02:56:09] <engla> yes, it's called Num
[02:56:14] <jmgrosen> ah :P
[02:56:16] <lkuper> jmgrosen: how would generic number literals work?  if someone types the literals 0 or 1, you'd want those (and only those) to just be of the Num trait?
[02:56:17] <engla> \o/
[02:56:34] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 23.0.1/20130814063812])
[02:56:44] <cmr> lkuper: I see it as `let x: SomeNumericType = 3.14;`
[02:57:04] <jmgrosen> lkuper: well, until CTFE lands, just replace all instances of `0` or `1` with `std::num::zero()` and `std::num::one()`
[02:57:10] <jmgrosen> would be my idea
[02:57:27] <cmr> I'd rather not add special cases to paper over language inflexibility.
[02:57:36] <lkuper> jmgrosen: hm.  the trouble is that `2` without any other information (say, from type inference) defaults to int
[02:58:03] <lkuper> at least, that's how things used to be -- I'm not sure if it's changed!
[02:58:04] <jmgrosen> lkuper: I didn't say it was pretty :P just convenient
[02:58:15] <cmr> lkuper: that's what it is now too
[02:58:35] <jmgrosen> cmr: I'd rather not either, but it's hard balancing convenience and purity
[02:59:01] <lkuper> yeah, I just worry it would lead to confusion when it comes to every other literal
[02:59:35] <lkuper> i.e., someone whose code behaves a certain way will behave in an unexpectedly different way when they replace 1 with 2
[02:59:55] <strcat> lkuper: https://github.com/mozilla/rust/issues/6023
[02:59:55] <jmgrosen> yeah, I guess it wouldn't work out well in practice
[03:00:20] <strcat> unrelated to this specific thing
[03:00:31] <strcat> https://github.com/mozilla/rust/issues/4169
[03:01:06] <lkuper> strcat: ah. yeah, int was kind of an arbitrary choice
[03:01:37] <strcat> I think because they weren't generic before
[03:03:57] *** Quits: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[03:03:59] <lkuper> it was just what I figured people meant when they wrote an unsuffixed numeric literal
[03:04:01] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[03:04:09] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: G'night everynyan~!)
[03:04:25] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[03:04:43] <lkuper> in fact...*remembers*...it *was* what people meant when they wrote an unsuffixed numeric literal, because if they meant anything else, it would've had a suffix!
[03:04:52] <lkuper> ah, the bad old days.
[03:05:07] <lkuper> so it wasn't arbitrary, it was backwards-compatible.
[03:05:30] <mib_zqa17l> While, I replace 0.0 with zero(). but it still has errors:use std::num::zero;  fn objective_function<T: Num>(vec: &[T]) -> T {     vec.iter().fold(zero(), |sum, &x| sum + (x*x)) }
[03:05:32] <mib_zqa17l> error: the type of this value must be known in this context random_search.rs:4     vec.iter().fold(zero(), |sum, &x| sum + (x*x))
[03:05:32] <jmgrosen> backwards-compatible? since when does rust care about backwards compatibility?
[03:05:38] <mib_zqa17l> error: failed to find an implementation of trait std::num::Zero for [type error] random_search.rs:4     vec.iter().fold(zero(), |sum, &x| sum + (x*x))
[03:06:07] <cmr> mib_zqa17l: <T: Num+Zero> perhaps?
[03:06:09] <lkuper> mib_zqa17l: try adding the typeclass constraint Zero on T
[03:06:14] <lkuper> <T: Num + Zero>
[03:06:37] <lkuper> yeah, what cmr said :)
[03:06:41] <engla> mib_zqa17l: I think you need to specify   zero::<T>(). The type inference isn't as genius as Haskell's
[03:08:05] <mib_zqa17l> <T: Num + Zero> doesn't work: error: attempt to bound type parameter with a nonexistent trait `Zero` random_search.rs:3 fn objective_function<T: Num + Zero>(vec: &[T]) -> T {
[03:08:24] <mib_zqa17l> rust verson rust 0.8-pre
[03:08:29] <engla> Num already includes Zero anyway
[03:08:36] <strcat> jmgrosen: backwards compatible changes are easier to make :P
[03:09:44] <engla> perfering int doesn't seem arbitrary
[03:10:35] <mib_zqa17l> when I use zero::<T>(). The error is : error: cannot move out of dereference of & pointer random_search.rs:4     vec.iter().fold(zero::<T>(), |sum, &x| sum + (x*x))
[03:10:37] <erickt1> hey folks, what do you all think of making Default take a typaram? This would allow us to implement a DefaultHashMap that can have custom Default values without needing to also add DefaultValueHashMap and DefaultWithFnHashMap
[03:10:46] <cmr> mib_zqa17l: yup, that error I can make sense of
[03:11:04] <cmr> mib_zqa17l: you need to do <T: Num+Clone> and instead of &x in your closure, do sum + (x.clone() * x.clone())
[03:11:04] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[03:11:06] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[03:11:06] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/tPy6Ow
[03:11:06] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[03:11:12] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[03:11:22] <cmr> erickt1: so would it return T rather than Self?
[03:11:26] <erickt1> yeah
[03:11:41] <cmr> Seems a bit odd but I don't see any reason not to if it makes code simpler.
[03:11:56] <erickt1> It's a little noisy for the default case though
[03:12:05] <erickt1> err, common case
[03:12:21] <acrichto> strcat: ping
[03:12:25] <strcat> acrichto: pong
[03:12:37] <acrichto> strcat: have you gotten make check with valgrind to work on arch?
[03:12:46] <engla> cmr:  Clone shouldn't be needed I think, since the Mul op will create a new element
[03:12:47] <strcat> acrichto: haven't tried :s
[03:13:00] <acrichto> aww man, I'm getting complaints about it missing x86-linux
[03:13:09] <cmr> mib_zqa17l: I defer to engla, but at the very least you can't have the &x
[03:13:16] <strcat> acrichto: well it did work ages ago when I tried
[03:13:43] <acrichto> strcat: oh, there's no multilib version
[03:14:42] <strcat> oh you're cross-compiling?
[03:14:48] <acrichto> tmp/check-stage2-T-i686-unknown-linux-gnu-H-x86_64-unknown-linux-gnu-rpass.ok
[03:14:51] <acrichto> that target, so yeah
[03:15:03] <acrichto> looks like it's in aur though
[03:15:05] <mib_zqa17l> Finally, It works. Thank you everbody. engla cmr ....
[03:15:13] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[03:16:05] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[03:16:05] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/D7Rh_g
[03:16:05] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[03:16:06] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[03:16:06] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/8ULOKg
[03:16:06] <ghrust> 13rust/06auto 14bb30f04 15Tim Chevalier: workcache: Add the ability to save and load the database......
[03:16:06] <ghrust> 13rust/06auto 1402a0fb9 15Tim Chevalier: rustpkg: Use workcache...
[03:16:06] <ghrust> 13rust/06auto 14ed4859e 15Tim Chevalier: extra: Address review comments from Jack
[03:16:08] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[03:16:22] <lkuper> mib_zqa17l: yay!
[03:16:27] *** Joins: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net)
[03:16:38] <cmr> It'd be super awesome to have a lint for code which is never used within the crate, especially private items.
[03:16:39] <engla> mib_zqa17l: nice. You need to juggle a couple of things, including pointers and whether to copy elements. Since the + and * operators basically create new elements, you shouldn't need Clone though
[03:16:56] <engla> mib_zqa17l: something like   |sum, x| sum + (*x * *x)
[03:16:58] <acrichto> cmr: actually that's totally doable
[03:17:00] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[03:17:06] <erickt1> cmr: ugh, I forgot about https://github.com/mozilla/rust/issues/8888
[03:17:41] *** Joins: anri (solancile@moz-E49E7C4B.hsd1.wa.comcast.net)
[03:17:52] <cmr> acrichto: the context is I'm looking at the removal of each_path and it seems the EachItemContext is now entirely unused
[03:18:17] <acrichto> I'd believe it, we'd probably initially turn up a huge amount of stuff in rustc
[03:18:25] <cmr> yeah
[03:19:01] <acrichto> strcat: you said you built nightly packages of rust, right?
[03:19:06] <strcat> acrichto: yes
[03:19:12] <strcat> [thestinger]
[03:19:14] <strcat> SigLevel = Optional
[03:19:16] <strcat> Server = http://pkgbuild.com/~thestinger/repo/$arch
[03:19:18] <strcat> in pacman.conf
[03:19:22] <cmr> it'd also be cool if such a tool were able to suck in multiple crates (say, all of rustc and its tools) and tell what is unused by all of them.
[03:19:44] <strcat> acrichto: I maintain the rust package in [community] too ;p
[03:19:45] <acrichto> strcat: yay thanks
[03:19:49] <cmr> https://github.com/mozilla/rust/issues/1749 and https://github.com/mozilla/rust/issues/558 are relevant.
[03:20:17] <acrichto> oh man graphviz
[03:20:25] <Eridius> hey folks. anything interesting happen in the past week?
[03:20:40] <cmr> Eridius: Funny, I have a blog *exactly* about that topic :P
[03:20:44] <Eridius> ;:D
[03:20:48] <Eridius> s/;//
[03:20:52] <cmr> http://cmr.github.io/blog/2013/09/07/this-week-in-rust/
[03:21:02] * Eridius just got home from South Korea earlier today, hasn't caught up yet
[03:21:23] <sanxiyn> Eridius: Did you enjoy South Korea? :)
[03:21:27] <Eridius> yep!
[03:21:35] * sanxiyn lives in South Korea
[03:21:42] <strcat> acrichto: you can make a 32-bit chroot pretty trivially too
[03:21:46] <cmr> Conference/convention or personal trip?
[03:21:49] <strcat> might be easier
[03:21:55] <Eridius> sanxiyn: from what little I saw of it, it's a nice place
[03:21:59] <acrichto> strcat: I'm trying to debug why the snapshots are failing
[03:22:07] <strcat> oh those invalid reads
[03:22:09] <acrichto> wanted to get as close as possible
[03:22:15] <acrichto> I want a snapshot :(
[03:22:20] <sanxiyn> Eridius: My complaint: hot in summer and cold in winter
[03:22:27] <strcat> acrichto: the snapshot bots *also* broke again ;p
[03:22:30] <Eridius> yeah. I had to buy shorts just for the trip
[03:22:33] <strcat> need workspaces cleared
[03:22:41] <acrichto> strcat: I re-pushed a few times and it looks like they're all legit failures now
[03:22:45] <Eridius> (I live in San Francisco, where weather is a foreign concept and I wear jeans + t-shirt all year long)
[03:22:47] <strcat> acrichto: ah, good
[03:23:00] <cmr> Eridius: fascinating! I will have to visit sometime
[03:23:04] <acrichto> before one compiles rust, one must compile valgrind
[03:23:10] <SiegeLord> Hmm... make check doesn't check the formatting of tests
[03:23:14] * cmr lives in new england, where weather is a very real concept
[03:23:29] <Eridius> cmr: yeah I grew up in new england. I miss weather
[03:24:23] <cmr> indutny: sorry I didn't get to linearscan.rs today :(
[03:24:41] <cmr> Off to bed; night all.
[03:24:45] <strcat> Eridius: I don't see why, unless you have a thing for rain ;p
[03:24:53] <Eridius> hehe
[03:24:59] <strcat> can't you just be satisfied with your fog vs. no fog
[03:25:15] <Eridius> at least I go back every christmas to visit my parents, so I get a little dose of snow
[03:25:24] <Eridius> also, what is this "no fog" of which you speak? ;)
[03:25:26] * mindcat copy docs website was completed.
[03:25:38] <acrichto> strcat: the valgrind tests pass locally :(
[03:25:42] *** Quits: sanxiyn (tinuviel@AE8B10D7.A92E374.57C4C441.IP) (Quit: Bye)
[03:25:43] <strcat> acrichto: heh
[03:25:58] <strcat> acrichto: well it's valgrind 3.8 in arch and I think the buildbots have 3.7
[03:26:05] <strcat> maybe a false positive they fixed
[03:26:08] <mib_zqa17l> engla: I see.  I just copy the std doc: let a = [1, 2, 3, 4, 5]; a.iter().fold(0, |a, &b| a + b). but the a doesn't passed through borrowed pointer. So I should read the borrowed pointer docs more carefully.
[03:26:17] <acrichto> strcat: hmm, they do have weird stack traces
[03:26:24] <acrichto> (under main)
[03:26:26] <strcat> they should really be upgraded to 3.8
[03:28:05] <engla> mib_zqa17l: there can be errors in the docs. This was from std::iter?
[03:28:05] * mindcat want find telnet library but not exist.
[03:28:12] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[03:28:14] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[03:28:22] <strcat> acrichto: or it could be something weird like a fixed glibc bug :(
[03:28:33] <strcat> it seems to be an atexit handler, if you're talking about the _exit ones
[03:28:53] <acrichto> that would be interesting... attempting a ubuntu vm which may not have 3.8 yet
[03:29:37] <acrichto> the osx builder is also dying
[03:29:43] <acrichto> but when I try to reproduce it dies everywhere
[03:30:06] <mib_zqa17l> engla: yes it's from std::iter
[03:30:50] <mib_zqa17l> engla: but it can compile, the vector and the fold are in same function
[03:31:11] <engla> mib_zqa17l: the example is correct yes
[03:32:17] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[03:32:18] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[03:32:58] <lkuper> "No stack."
[03:33:02] * lkuper shakes tiny fist.
[03:33:28] <mib_zqa17l> engla: Yes, it's correct. because the vector is not borrowed? 
[03:33:55] <engla> mib_zqa17l: your function uses a generic element type T, so it is more complicated
[03:34:09] <engla> mib_zqa17l: if you wrote it in terms of &[T] it would be just as easy as the example
[03:34:18] <engla> in terms of &[int] I mean
[03:35:16] <mib_zqa17l> engla: yes, I tried &[int]. it's easy. but I want simulate haskell. so it's a little wierd
[03:35:34] <acrichto> engla: could you tag permutations_iter with 8624 to revisit once it's closed?
[03:35:43] <strcat> lkuper: heh, where'd you get that error?
[03:35:53] <strcat> o_O
[03:36:02] <lkuper> strcat: from gdb.
[03:36:12] <strcat> lkuper: on OS X?
[03:36:15] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[03:36:22] <engla> acrichto: yes, but the fixing of that hole won't enable a non-cloning solution by itself
[03:36:37] * strcat vaguely remembers something like that
[03:36:37] <acrichto> it won't?
[03:37:00] <mib_zqa17l> engla: I want to make the function more generic. not just for int., but for numbers.
[03:37:01] <engla> no I think it will just disallow this
[03:37:07] <lkuper> strcat: no, linux
[03:37:24] <strcat> oh so not the weird bug I made brson fix for me
[03:37:44] * strcat shrugs
[03:37:51] <acrichto> engla: oh, perhaps not then
[03:38:30] <acrichto> engla: before I r+, could you do some squashing?
[03:38:33] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[03:39:17] <engla> acrichto: sure!
[03:46:06] *** Joins: naq (naq@D5C2D2DF.E4265FCD.E481B5B.IP)
[03:49:13] *** Quits: tikue (tkuehn@61D12352.CD72397.689607DE.IP) (Quit: tikue)
[03:49:25] <SiegeLord> cmr: Can you re-r my PR? https://github.com/mozilla/rust/pull/9064
[03:50:13] *** Joins: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP)
[03:50:44] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[03:51:48] *** Joins: tikue (tkuehn@61D12352.CD72397.689607DE.IP)
[03:52:18] *** Quits: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP) (Ping timeout)
[03:53:35] *** Quits: clements (clements@moz-BEE8D50A.dsl.snlo01.pacbell.net) (Quit: Changing server)
[03:53:35] *** Joins: clements (clements@moz-BEE8D50A.dsl.snlo01.pacbell.net)
[03:55:57] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[03:56:12] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[03:56:28] <engla> acrichto: updated
[03:56:49] <acrichto> engla: thanks!
[03:57:00] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[03:57:03] <acrichto> I had a lot of code from a project using vec::build before I knew how to use rust
[03:57:06] <acrichto> I gotta go change that all now
[03:57:52] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[03:58:29] <engla> vec::build is kind of cool
[03:58:40] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[03:58:52] <acrichto> I prefer the vec.push pattern now
[03:58:55] <acrichto> less indentation
[03:59:19] <engla> the structure is almost the same
[03:59:36] <acrichto> one may have less codegen, but only by a tiny bit
[04:00:05] *** Quits: mib_zqa17l (Mibbit@moz-3975260E.gae.googleusercontent.com) (Quit: http://www.mibbit.com ajax IRC Client)
[04:00:30] <engla> ok thanks for the collaboration on this PR
[04:00:54] <acrichto> np
[04:01:00] <acrichto> the more iterators the better
[04:01:04] <acrichto> (most of the time)
[04:01:19] <acrichto> I've always wanted to make the treemap iterator non-allocating
[04:01:25] <engla> hehe you didn't say that about whatever other iterator I was adding :)
[04:01:29] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[04:01:43] <engla> CharIterator
[04:01:47] <acrichto> maybe it's more of stack closure => iterator always better
[04:01:56] <acrichto> I guess new iterators not so much
[04:02:33] <acrichto> nothing like downloading a ubuntu image at 91k/s
[04:02:56] <engla> can the treemap iterator be converted into a range?
[04:02:59] <olsonjeffery> engla: so, on the topic of string encoding
[04:03:12] <engla> yes
[04:03:29] <engla> (a range -> double ended iterator)
[04:03:35] <olsonjeffery> well, more a commiseration
[04:03:49] <olsonjeffery> im mapping libuv's readdir call
[04:03:56] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[04:04:01] <acrichto> engla: not easily (double ended)
[04:04:32] <olsonjeffery> on success you get a single char* of null-byte delimited relative filenames and an int count of how many entries there are
[04:04:38] <olsonjeffery> so, yeah. good times! string parsing!
[04:04:43] <ww> clarification: when i got a Struct1 implementing a Trait1, to pass Struct1 into a function that expect Trait1, i have to explicitly cast it to Trait1, right?  as in func1(struct1 as Trait1)
[04:04:59] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[04:05:19] <engla> hehe nice. And on many systems, byte vector parsing, it's not necessarily a string
[04:05:29] <acrichto> olsonjeffery: wow I thought that api was like hugely outdated, I didn't know that even existed
[04:05:43] <engla> olsonjeffery: Eridius had changes to make std::path use a byte vector representation
[04:05:55] <olsonjeffery> acrichto: afaik its the state of the art based on libuv's tests
[04:06:16] <olsonjeffery> i guess ill look at the tests that're in uv's libuv
[04:06:18] <acrichto> oh out of date in the sense of the posix/unix/whatnot api
[04:06:27] <acrichto> I have no doubts that if it's what libuv does it's what libuv does
[04:06:28] <olsonjeffery> i think its more portable
[04:06:31] <acrichto> just seems a little janky
[04:06:34] <olsonjeffery> as opposed to a dirent mapping
[04:06:38] <acrichto> but hey, works for me
[04:06:43] <olsonjeffery> well readdir(2) and what's in windows are way way different
[04:06:48] <olsonjeffery> but, yeah.. i like what they did with stat
[04:06:50] <engla> maybe they want to save allocations
[04:06:53] <olsonjeffery> but you can't win em all
[04:07:21] <acrichto> well if you're touching disk allocations don't matter that much
[04:07:44] <strcat> acrichto: I/O doesn
[04:07:50] <strcat> doesn't necessarily touch the disk*
[04:07:56] <klutzy> acrichto: libuv's makefile currently builds .c -> .o in same dir, right?
[04:08:07] <acrichto> klutzy: for windows, not for unix/osx
[04:08:16] <acrichto> strcat: I suppose so yeah
[04:08:19] <klutzy> ah, the windows!
[04:08:33] <acrichto> klutzy: yeah gyp is *not* build for mingw
[04:08:40] <engla> acrichto: sorry to snap back, but so is it actually possible to write the treemap iterator stack without allocations? A fixed size array?
[04:08:54] <strcat> a big one
[04:08:55] <acrichto> klutzy: they have a sweet system for msvc from what I hear, but we can't use that :(
[04:09:03] <strcat> engla: you could figure out the max depth
[04:09:03] <olsonjeffery> someday!
[04:09:07] <acrichto> engla: oh no not at all, I was just saying words :P
[04:09:30] <strcat> it'd be something near 64 on 64-bit
[04:09:46] <acrichto> engla: I do know of two methods to iterate trees without stacks, but one involves modifying/destroying the tree, and the other requires parent pointers
[04:09:52] <acrichto> and I don't think that parent pointers can be done safely
[04:09:56] <jmgrosen> ww: functions can't take traits as arguments, only generic types with trait bounds or pointers to traits
[04:09:59] <engla> Isn't it 2 * log(N)  (2-log) for the rb tree
[04:10:02] <strcat> acrichto: and they make it slow
[04:10:07] <acrichto> yeah :(
[04:10:29] <strcat> engla: it's not perfectly balanced
[04:10:41] <ww> i see.  i thought trait is like interface that can be passed around
[04:10:41] <engla> that's the factor 2
[04:10:58] <strcat> well it's also not a classical rbtree
[04:11:04] <jmgrosen> ww: pointers to traits can be
[04:11:11] <ww> ok
[04:11:17] <klutzy> acrichto: I'm trying to make win64 cross compiler in one source tree, then during win64 rt `make` founds .o files so happily tries to use them
[04:11:29] <klutzy> acrichto: but they are 32-bit, so 64-bit gcc rejects it
[04:12:02] <acrichto> klutzy: oh I had a fix for that, but it cause windows to rebuild the compiler whenever building the test suite
[04:12:22] <acrichto> klutzy: so the libuv.a file is copied to the correct location in $target/rt, but I think after that the libuv workspace needs to be cleaned
[04:12:35] <acrichto> klutzy: and then just not re-built unless a file changes (I think I messed up that part)
[04:12:42] <klutzy> previously I had to checkout libuv in other dir and build manually, but at the time I didn't understand the reason
[04:12:56] <acrichto> sorry about that :(
[04:12:57] *** Quits: mihneadb (Mihnea@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: Leaving)
[04:13:06] <acrichto> let me see if I can whip up a patch
[04:14:01] <acrichto> klutzy: oh haha there's not even a `clean` target in Makefile.mingw, they really don't want you to use that
[04:14:56] <ww> is the compiler smart enough to cast a reference of a struct implementing a trait to a function expecting a trait reference?  i'm finding i have to cast it explicitly with as ~Trait1
[04:16:27] <ww> is that the right way to do it?
[04:17:26] <acrichto> klutzy: see if https://gist.github.com/alexcrichton/6504916 works
[04:17:56] <acrichto> klutzy: that should in theory preserve the dependencies while cleaning the workspace between builds, you just can't run make -jN
[04:18:05] <acrichto> ww: not right now that I know of
[04:18:10] <acrichto> ww: but I think that's vaguely planned
[04:18:30] <jmgrosen> ww: and you might want &Trait1 instead of ~Trait1
[04:18:30] <acrichto> ww: https://github.com/mozilla/rust/pull/5597 was from a loooong time ago
[04:18:47] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:19:09] <ww> ok thanks!  
[04:19:47] <klutzy> acrichto: thanks! I have to apply it now :D
[04:19:52] *** Quits: StarLight (StarLight@moz-2CF73E94.dynamic.avangarddsl.ru) (Ping timeout)
[04:20:39] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: G'night everynyan~!)
[04:20:54] <glyc> does assert! get compiled away for release builds, or is it always present?
[04:21:19] <acrichto> glyc: it's always present currently
[04:21:32] <acrichto> there was talk of a debug_assert!(), but one hasn't been made yet
[04:21:49] <glyc> acrichto: D does assert vs enforce
[04:22:09] <glyc> acrichto: thanks
[04:22:35] <acrichto> glyc: which is which?
[04:22:36] <acrichto> in D
[04:22:55] <acrichto> b/c that's an interesting idea...
[04:23:28] <glyc> acrichto: enforce never gets compiled away.
[04:23:45] <glyc> acrichto: but there is a rich history of assert being on only in debug builds
[04:24:00] <glyc> (for performance)
[04:24:17] *** Joins: StarLight (StarLight@moz-DC75A99E.dynamic.avangarddsl.ru)
[04:24:48] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[04:24:50] <olsonjeffery> a rich and colorful history!
[04:25:01] <glyc> it's hard to grep for the location of the definition of assert!, naturally enough. Does it fail! the local task, or the entire process?
[04:25:18] <strcat> it uses fail!, so it can be recovered from
[04:25:21] <olsonjeffery> assert aborts
[04:25:24] <glyc> olsonjeffery: :-)
[04:25:28] <strcat> olsonjeffery: rtassert does
[04:25:29] <strcat> not assert
[04:25:32] * olsonjeffery defers to strcat
[04:25:41] <strcat> rtassert doesn't exist for users
[04:25:44] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[04:26:01] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[04:26:01] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/8ULOKg
[04:26:01] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[04:30:33] *** Quits: ww (Mibbit@moz-9D1D3E.public.wayport.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:30:34] *** Joins: aeqwa (aeqwa@moz-F6958EFC.dsl.tropolys.de)
[04:31:04] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[04:31:04] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/IJpsiQ
[04:31:04] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[04:31:07] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[04:31:07] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/C19xOw
[04:31:07] <ghrust> 13rust/06auto 146212729 15blake2-ppc: std::vec: Change fn unzip to take an iterator argument...
[04:31:07] <ghrust> 13rust/06auto 14de9546a 15blake2-ppc: std::vec: Replace each_permutation with a new Permutations iterator...
[04:31:08] <ghrust> 13rust/06auto 1477dff93 15blake2-ppc: std::vec: Update module doc text...
[04:31:10] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[04:31:56] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[04:34:35] <glyc> if I have a struct Socket { sc: int }  and a struct Msg { ... } whos lifetime should be a subset of the lifetime of the Socket instance with which it is associated, how would I express that in Rust?
[04:35:54] <sfackler> struct Msg<'self> { socket: &'self Socket, ... } will put a borrowed pointer to the socket in the msg and restrict its lifetime
[04:36:18] <glyc> sfackler: awesome! thanks!
[04:37:12] <glyc> but socket won't be restricted by Msg, in that example?
[04:37:17] <naq> will rust always depend on a runtime that will need to be installed on every system in order for it to be able to run rust programs?
[04:37:54] <strcat> naq: it will support statically linking it
[04:37:55] <naq> will it be possible to link statically?
[04:38:01] <strcat> and you can already choose to not use the runtime
[04:38:04] <jmgrosen> naq: see `rustc -Z static`
[04:38:15] <jmgrosen> â€¦but it's not quite working yet
[04:38:21] <jmgrosen> sort of, though
[04:38:26] <naq> jmgrosen: yes I saw
[04:38:47] <sfackler> glyc: the associated socket will have to live as long as any msg containing a borrowed pointer to it
[04:38:51] <naq> strcat: but statically linked binaries will include the runtime?
[04:39:10] <strcat> naq: if you're using the runtime
[04:39:16] <strcat> you don't have to use it
[04:39:23] <naq> strcat: I understand
[04:39:26] <glyc> sfackler: cool, I just wanted to make sure the msg could be destroyed while the socket kept on being used with other messages
[04:43:54] <olsonjeffery> check-stage0-std broke :(
[04:44:00] <olsonjeffery> maybe i need to update.
[04:45:26] * mindcat think compile rust program to OpenWRT
[04:45:39] *** Quits: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com) (Ping timeout)
[04:45:48] <olsonjeffery> strcat: whats the url for the rust playground website?
[04:46:37] <strcat> http://strcat.zapto.org:8000/
[04:47:03] <olsonjeffery> ty
[04:48:03] <mindcat> rusti: ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"yes"
[04:48:56] <strcat> for some reason rusti doesn't work here anymore
[04:49:23] <mindcat> strcat: ok..
[04:49:31] <strcat> I think it's the channel mode
[04:49:59] <strcat> +T
[04:50:02] <strcat> why is that set?
[04:50:24] <olsonjeffery> bot haters!
[04:50:46] *** Joins: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP)
[04:52:39] *** Joins: jaen (jaen@moz-85817B2C.play-internet.pl)
[04:52:48] *** Quits: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP) (Ping timeout)
[04:53:03] <strcat> maybe it was an accident when someone set +t
[04:53:11] <sfackler> solsonjeffery: check-stage0-* has never worked for me. was it fixed recently?
[04:53:21] <mindcat> "string".trim() is not work for tab chars
[04:53:57] *** Joins: frau (frau@moz-C616DA0A.hsd1.ca.comcast.net)
[04:54:37] <engla> mindcat: it should
[04:54:59] <mindcat> engla: then I try it again
[04:55:22] <engla> note that it's not a modifying method, it returns a new slice
[04:56:32] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[04:57:34] *** Joins: ww (Mibbit@moz-DFAED48A.lightspeed.sntcca.sbcglobal.net)
[04:58:12] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[04:59:02] *** Quits: jroll (jroll@moz-5989BB9E.members.linode.com) (Ping timeout)
[04:59:15] *** Quits: bstrie (ben@moz-D5A1D0F5.members.linode.com) (Ping timeout)
[04:59:17] *** Quits: Caseus (bacon@moz-9F046088.members.linode.com) (Ping timeout)
[04:59:17] *** Quits: doy (doy@moz-AB28F0A5.members.linode.com) (Ping timeout)
[04:59:21] *** Quits: friggle (friggle@moz-A607EAFA.members.linode.com) (Ping timeout)
[04:59:25] *** Quits: dumitru (dgherman@moz-7C253BEB.getcadre.com) (Ping timeout)
[04:59:29] *** Quits: ivan (ivan@moz-531C3EC9.members.linode.com) (Ping timeout)
[04:59:38] *** Quits: petantik (oz@moz-20EC2160.net) (Ping timeout)
[04:59:38] *** Quits: reed (reed@tech.monkey) (Ping timeout)
[04:59:38] *** Quits: bfrog (tburdick@moz-3D8544DC.members.linode.com) (Ping timeout)
[05:00:13] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Quit: Leaving...)
[05:00:21] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[05:00:30] <mindcat> engla: http://paste.ubuntu.com/6086461/
[05:00:32] <mindcat> try it
[05:00:56] *** Joins: bfrog (tburdick@moz-3D8544DC.members.linode.com)
[05:01:02] *** Joins: petantik (oz@moz-20EC2160.net)
[05:01:06] *** Joins: jroll (jroll@moz-5989BB9E.members.linode.com)
[05:01:16] <engla> mindcat: it should only remove the whitespace first on line 2, nothing more
[05:01:24] *** Joins: Caseus (bacon@moz-9F046088.members.linode.com)
[05:01:32] *** Joins: doy (doy@moz-8F23663C.net)
[05:01:34] <engla> and it does
[05:01:54] <engla> I think you want to trim each line
[05:01:56] *** Joins: ivan (ivan@moz-531C3EC9.members.linode.com)
[05:02:03] *** Joins: reed (reed@tech.monkey)
[05:02:04] <mindcat> engla: oh yes
[05:02:29] <engla> for line in a.line_iter() { println(line.trim())}
[05:03:24] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[05:03:48] <mindcat> engla: ok... then this time is work
[05:04:44] *** Joins: bstrie (ben@moz-D5A1D0F5.members.linode.com)
[05:04:45] *** Joins: dumitru (dgherman@moz-7C253BEB.getcadre.com)
[05:05:19] *** Joins: friggle (friggle@moz-A607EAFA.members.linode.com)
[05:06:36] *** Quits: jaen (jaen@moz-85817B2C.play-internet.pl) (Ping timeout)
[05:07:07] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[05:07:59] <clements> sfackler: ping
[05:08:00] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[05:10:10] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[05:10:35] <mindcat> http://paste.ubuntu.com/6086479/ I got "error: internal compiler error: unexpected failure"
[05:10:44] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[05:12:15] <Luqman> mindcat: i'm guess it doesn't like the &'self str
[05:12:31] <Luqman> which should fail in that contex
[05:12:35] <Luqman> context*
[05:12:55] <mindcat> Luqman: ok..
[05:12:56] *** Quits: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP) (Ping timeout)
[05:13:03] <sfackler> clements: pong
[05:13:16] <engla> yes this is invalid use of 'self    let b : &'self str
[05:16:27] <clements> sfackler: time to review a short (six interesting lines) pull request, fixing the bug you reported (9049)? The url: https://github.com/mozilla/rust/pull/9090
[05:16:46] <clements> sfackler: should have asked: do you have review privs?
[05:17:02] <sfackler> nope
[05:17:21] <clements> sfackler: grr... sorry about that.
[05:17:46] <clements> sfackler: thanks for reporting the bug, tho!
[05:18:04] <sfackler> np, thanks for getting a fix out so soon!
[05:21:13] *** Joins: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP)
[05:21:57] <clements> erickt: ping
[05:23:18] <mindcat> let mut a = "abc"; a.slice_from(1 + a.len())
[05:23:32] <mindcat> then I got error :p
[05:23:36] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[05:24:12] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[05:24:25] <sfackler> 1+a.len is past the end of a
[05:24:55] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[05:25:54] *** Quits: cubic_ (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[05:26:22] * mindcat 's fault
[05:27:01] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[05:33:21] <klutzy> acrichto: I had to add three lines (CC=... CXX=... LINK=...) at libuv's $(MAKE) command, but anyway your patch worked well. thanks!
[05:33:25] *** Quits: madmoose (Hat@moz-E1973371.nerp.net) (Ping timeout)
[05:33:41] *** Joins: madmoose (Hat@moz-E1973371.nerp.net)
[05:33:49] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[05:33:50] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[05:33:54] <klutzy> now I don't have to checkout other rust repo just for building cross-rustrt :D
[05:34:34] <acrichto> klutzy: libuv shouldn't use LINK or CXX?
[05:35:34] <acrichto> klutzy: although what'd you set CC to?
[05:35:39] <klutzy> acrichto: we don't pass CXX to libuv, so it sticks with libuv's default setting
[05:36:00] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[05:36:00] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/C19xOw
[05:36:00] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[05:36:10] <acrichto> where does libuv compile C++ though?
[05:36:46] <klutzy> acrichto: ah, yes we don't need CXX I think
[05:36:56] <acrichto> klutzy: also LINK shouldn't be necessary
[05:37:02] <klutzy> I just copied other platform's setting. hmm
[05:37:45] <klutzy> acrichto: anyway we don't pass CC for windows now
[05:37:59] <acrichto> yeah we probably should
[05:38:37] <klutzy> I am doing `make CC_x86_64-w64-mingw32=x86_64-w64-mingw32-gcc CXX_...=...` for w32-w64 cross compiler
[05:39:13] *** Joins: dlawler (evenodder@moz-C2B9B64C.hsd1.ca.comcast.net)
[05:39:22] <klutzy> since our mk/platform.mk assumes x86/x64 is only for native, arm/android/... are only for cross
[05:40:02] *** dlawler is now known as evod
[05:41:05] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[05:41:05] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/IVOIBg
[05:41:05] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[05:41:07] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[05:41:07] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/02ky0g
[05:41:07] <ghrust> 13rust/06auto 145ecd3b4 15blake2-ppc: Add test for issue #8587, about calling nested functions of the same name
[05:41:07] <ghrust> 13rust/06auto 14485446b 15bors: auto merge of #9076 : blake2-ppc/rust/test-for-8585, r=huonw...
[05:41:07] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[05:41:12] <clements> luqmana: ping
[05:41:32] <Luqman> clements: hehe, sorry :P
[05:41:59] <clements> luqman: sorry... anyhow, can you re-review? I made the change you requested.
[05:42:30] <clements> Luqman: hmm... are IRC nicks case sensitive?
[05:42:50] <Luqman> either hilights me
[05:43:02] <Luqman> and r+
[05:43:28] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[05:43:36] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[05:43:41] <clements> Luqman: kthx
[05:43:41] *** Joins: jviereck (Adium@moz-58A87BA7.dip0.t-ipconnect.de)
[05:44:06] *** Quits: huseby (huseby@96211BDE.83CC6402.D9CD682B.IP) (Quit: Leaving)
[05:44:10] <ion> Also, IRC itself considers nicks case-insensitive (in the ISO 646 FI charset).
[05:44:34] <Jesse> which means that on some servers, {}|^ are considered to be the lower case equivalents of the characters []\~
[05:44:46] <ion> There are servers that violate that?
[05:45:00] *** Quits: jviereck (Adium@moz-58A87BA7.dip0.t-ipconnect.de) (Quit: Leaving.)
[05:45:18] <Jesse> i thought so, but i don't remember why i thought so
[05:45:34] <eevee> i'm pretty sure inspircd doesn't respect that
[05:45:52] <Jesse> also, there was a hilarious case-folding bug in old IRCDs (i discovered and exploited it around 1999)
[05:46:03] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[05:46:04] <Jesse> something that couldn't happen in safe rust code, btw
[05:46:05] <klutzy> hmm we don't pass --linker option for std/extra build
[05:47:03] <Jesse> the code had a 256-element table for looking up the lowercase equivalent of a letter. so lowercase['a'] and lowercase['A'] were both 'a'
[05:47:16] <klutzy> so it failed to build win64 std/extra, since it uses "g++.exe" instead of the linker I specified
[05:47:19] <ion> Ok, if they donâ€™t use that charset theyâ€™ll inform the client using 005 CASEMAPPING. I guess thatâ€™s fine.
[05:47:55] <ion> http://www.irc.org/tech_docs/005.html
[05:48:10] <Luqman> gah iso 646 :|
[05:48:47] <Jesse> because char is a signed type, lowercase['Ã…'] actually looked at some memory *before* the table
[05:48:51] <klutzy> there are actually three options for case sensitivity on irc
[05:48:58] <Jesse> which happened to be a license notice
[05:48:58] *** Joins: jviereck (Adium@moz-58A87BA7.dip0.t-ipconnect.de)
[05:49:01] <ion> jesse: nice
[05:49:15] <eevee> Jesse: beautiful
[05:49:20] <Jesse> to make it even better, each server on the network ran a slightly different version of the IRCD
[05:49:31] <klutzy> rfc editors forgot to add a pair (I guess it is ^/~)
[05:49:33] *** Quits: jviereck (Adium@moz-58A87BA7.dip0.t-ipconnect.de) (Quit: Leaving.)
[05:49:39] <Jesse> so one server would think Ã… was 'e' and another would think it was 'g'
[05:49:44] <klutzy> so "strict" option is introduced in implementations
[05:49:54] <Jesse> you could exploit the confusion between servers to get ops in pretty much any channel
[05:50:03] <ion> heh
[05:51:15] *** Joins: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP)
[05:51:50] <klutzy> yes, ~/^ http://www.irc.org/tech_docs/005.html
[05:51:52] <Jesse> i discovered this bug by accident. some people from a non-ASCII three-character channel came to a help channel i was in, telling tales of odd occurrences. i was the only evil person to investigate it.
[05:52:13] <klutzy> "rfc1459: ascii with additional {}|~ the lowercase of []\^.  strict-rfc1459: ascii with additional {}| the lowercase of []\."
[05:52:35] <Jesse> "Note: RFC1459 forgot to mention the ~ and ^ although in all known implementations those are considered equivalent too. "
[05:52:35] <Jesse> doh
[05:53:06] *** Quits: clements (clements@moz-BEE8D50A.dsl.snlo01.pacbell.net) (Ping timeout)
[05:53:17] *** Quits: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP) (Ping timeout)
[05:56:09] <eevee> irc is so terrible
[05:56:21] <eevee> let's reinvent it with json and redis
[05:56:52] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[05:58:03] <joelteon> i mean, irc is pretty bad.
[05:58:13] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Ping timeout)
[05:58:32] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[05:58:51] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[05:59:39] <klutzy> so there will be n+1 chat protocols!
[05:59:49] <joelteon> IRC is the best terrible chat protocol
[05:59:57] <joelteon> i've seen some bad ones
[06:00:07] <Ralith> eevee: not enough xml
[06:00:13] <ion> One of the annoying parts about IRC is that thereâ€™s no standard way to prevent bot loops. We should specify a new command purely for bot messages. Bots wouldnâ€™t be allowed to trigger stuff from human messages, and they would only be allowed to talk using bot messages. We could call the command, say, NOTICE.
[06:00:52] <eevee> madness
[06:01:47] <klutzy> and most irc clients treats NOTICE as special messages, it's a big problem
[06:03:52] *** Quits: veddan (viktor@moz-C79BC80B.csbnet.se) (Ping timeout)
[06:04:09] *** Joins: veddan (viktor@moz-C79BC80B.csbnet.se)
[06:04:26] <ion> If said clients also called the fire department every time someone joins a channel, i wonder if most mIRC users would also shout at people for joining channels instead of doing the five or so mouse clicks to fix the configuration and hopefully filing a bug report? :-)
[06:08:00] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[06:13:50] *** Joins: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP)
[06:14:47] *** Joins: valenting (Thunderbir@BC8F8C4C.4ABED146.FB866788.IP)
[06:16:52] *** Quits: ski (md9slj@moz-862B1C66.studat.chalmers.se) (Client exited)
[06:17:03] *** Joins: ski (md9slj@moz-862B1C66.studat.chalmers.se)
[06:26:25] *** Quits: veddan (viktor@moz-C79BC80B.csbnet.se) (Ping timeout)
[06:26:47] *** Joins: veddan (viktor@moz-C79BC80B.csbnet.se)
[06:26:56] *** Quits: ski (md9slj@moz-862B1C66.studat.chalmers.se) (Ping timeout)
[06:27:14] *** Quits: aeqwa (aeqwa@moz-F6958EFC.dsl.tropolys.de) (Ping timeout)
[06:27:19] *** Joins: ski (md9slj@moz-862B1C66.studat.chalmers.se)
[06:33:58] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[06:34:08] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[06:34:30] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[06:34:32] *** Quits: valenting (Thunderbir@BC8F8C4C.4ABED146.FB866788.IP) (Ping timeout)
[06:40:05] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[06:40:37] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[06:41:41] *** Joins: huseby (huseby@moz-633A76FB.static.cust.telenor.com)
[06:46:01] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[06:46:04] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[06:46:04] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/02ky0g
[06:46:04] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[06:46:32] <zeuxcg> ugh, lifetimes
[06:46:56] <zeuxcg> so I'm trying to write a function that walks an enum using paths
[06:47:11] <zeuxcg> i.e. enum Node { Node(HashMap<~str, Node>) }
[06:47:16] <zeuxcg> that kind of enum
[06:47:18] <zeuxcg> http://pastebin.com/qNA9s0c6
[06:48:05] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[06:48:08] <zeuxcg> I'm... not sure what the problem is here
[06:49:25] <tikue> zeuxcg: the first error is fixed by NBTCompound(ref items)
[06:50:32] <zeuxcg> second error as well, yay
[06:50:39] <zeuxcg> "Patterns that bind variables default to binding to a copy or move of the matched value (depending on the matched value's type). This can be changed to bind to a borrowed pointer by using the ref keyword, or to a mutable borrowed pointer using ref mut."
[06:50:40] <zeuxcg> thanks!
[06:50:59] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[06:50:59] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/l6XpHg
[06:50:59] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[06:51:02] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[06:51:02] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/rMcDqw
[06:51:02] <ghrust> 13rust/06auto 1414ea8b6 15Niko Matsakis: Delay assignment of node ids until after expansion. Ensures that each AST node...
[06:51:02] <ghrust> 13rust/06auto 14019f1fc 15bors: auto merge of #9088 : nikomatsakis/rust/issue-6304-AST-tree-not-DAG, r=catamorphism...
[06:51:02] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[06:51:19] <tikue> zeuxcg: that's a really informative message. where'd you see that?
[06:51:31] <zeuxcg> tikue: that's from the manual
[06:51:35] <tikue> ohhh ok haha
[06:51:44] <zeuxcg> tikue: I wish the compiler errors were like this!
[06:51:45] <zeuxcg> :)
[06:51:46] *** Joins: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP)
[06:52:09] <tikue> also i find it funny that pattern matching is smart enough to know there can only be one branch for enum Foo { Bar } but not smart enough to just let you call methods on Bar directly
[06:53:27] *** Quits: tikue (tkuehn@61D12352.CD72397.689607DE.IP) (Quit: tikue)
[06:53:47] *** Quits: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP) (Ping timeout)
[06:56:47] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[06:56:47] *** ChanServ sets mode: +o pnkfelix
[06:57:11] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[06:58:51] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[06:59:25] *** Joins: Ms2ger (Ms2ger@9C9504FF.4EC82F13.3773EA9F.IP)
[07:02:14] <naq> should I use the format! macro instead of fmt! ?
[07:02:41] <acrichto> naq: fmt! will hopefully be axed once the next snapshot happens, so yes
[07:03:01] <naq> acrichto: alright
[07:04:34] *** Joins: alex_abreu (alex@moz-7421D6C9.mc.videotron.ca)
[07:04:50] *** Quits: alex__ (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[07:09:30] *** Joins: krdln (Mibbit@moz-3B40D57B.icm.edu.pl)
[07:10:14] *** Joins: squiddy (squiddy@moz-D32163A1.adsl.alicedsl.de)
[07:14:22] *** flaper87|afk is now known as flaper87
[07:16:04] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[07:16:04] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14019f1fc to 14485446b: 02http://git.io/N3iJvQ
[07:16:04] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[07:16:05] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[07:16:05] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/KpMRnQ
[07:16:05] <ghrust> 13rust/06auto 1442b1694 15John Clements: ident->name in middle
[07:16:05] <ghrust> 13rust/06auto 1457f7aba 15John Clements: undo cowardly hiding of eq-check...
[07:16:05] <ghrust> 13rust/06auto 14634bddd 15John Clements: added run-pass test for issue #9049
[07:16:07] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[07:21:58] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[07:23:09] *** Joins: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP)
[07:24:38] *** Joins: nkoep (nik@moz-79B329C7.pool.mediaways.net)
[07:28:23] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[07:28:54] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:30:35] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[07:33:17] *** Joins: ab (alex@BC9D99CC.37C1012D.FE617B51.IP)
[07:37:00] *** Joins: sebcrozet (sebcrozet@moz-6DA639AF.w80-13.abo.wanadoo.fr)
[07:37:43] *** Joins: Morph (chatzilla@E622E262.362CC69C.B7830B68.IP)
[07:38:51] *** Quits: Morph (chatzilla@E622E262.362CC69C.B7830B68.IP) (Quit: ChatZilla 0.9.90.1 [Pale Moon 20.3/20130809095639])
[07:39:35] *** Joins: bent (chatzilla@FC9FC902.ED95B50E.EDDC15BA.IP)
[07:51:55] <acrichto> ChrisMorgan: ping
[07:53:54] <Jesse> "it would be a marvelous feat of engineering to install a functioning exploit in a compiler that is being overhauled and changed all the time"
[07:53:55] <Jesse> indeed
[07:54:15] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[07:54:31] <frau> ugh... bindgen + glib = pain
[07:56:46] <dbaupp> Jesse: we'll be watching you very carefully :P
[07:57:11] <Jesse> ;)
[07:57:32] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[07:57:42] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[07:58:58] *** Joins: sk (sk@273FD846.E993C7C3.78DD174B.IP)
[07:59:12] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[07:59:22] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[08:02:49] <tikue_> lol
[08:04:34] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[08:05:11] <ChrisMorgan> acrichto: pong
[08:05:44] <acrichto> ChrisMorgan: I was editing some code in a large file, and when I hit enter in a '//' comment it didn't automatically insert '//' in the line below
[08:05:48] <acrichto> is that intended now?
[08:06:02] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[08:06:02] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 148ad27f2 to 14485446b: 02http://git.io/N3iJvQ
[08:06:02] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[08:06:04] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[08:06:04] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/tVhOVA
[08:06:04] <ghrust> 13rust/06auto 1442b1694 15John Clements: ident->name in middle
[08:06:04] <ghrust> 13rust/06auto 1457f7aba 15John Clements: undo cowardly hiding of eq-check...
[08:06:04] <ghrust> 13rust/06auto 14634bddd 15John Clements: added run-pass test for issue #9049
[08:06:06] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[08:06:10] *** Quits: ww (Mibbit@moz-DFAED48A.lightspeed.sntcca.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[08:07:17] <ChrisMorgan> acrichto: I expect it to automatically insert // below with the default configuration.
[08:07:44] <ChrisMorgan> acrichto: `:set fo?` please
[08:08:11] <acrichto> formatoptions=croqnl
[08:08:16] <acrichto> oh that may have been that j thing
[08:08:21] *** Joins: five (five@moz-993E0FAA.v4.ngi.it)
[08:08:28] <ChrisMorgan> No, this is r, which is there.
[08:08:39] <ChrisMorgan> r is "Automatically insert the current comment leader after hitting <Enter> in Insert mode."
[08:08:52] <acrichto> the file is src/librustc/middle/trans/expr.rs
[08:09:11] <acrichto> ~line 1000
[08:09:45] <ChrisMorgan> Works for me. I presume it is a comment on a line of its own?
[08:09:45] *** Joins: fabiand (fabiand@moz-964DA28E.adsl.alicedsl.de)
[08:09:51] <ChrisMorgan> (g2g, tea time.)
[08:10:09] <acrichto> oh well
[08:15:24] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[08:15:43] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[08:16:42] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[08:16:48] *** Quits: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com) (Connection reset by peer)
[08:17:06] <SingingBoyo> extra::json, you have some nice little bugs don't you.  silly map encoding is silly.
[08:17:19] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:17:24] *** Joins: fabiand_ (fabiand@moz-964DA28E.adsl.alicedsl.de)
[08:21:19] *** Joins: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com)
[08:22:00] *** Quits: evod (evenodder@moz-C2B9B64C.hsd1.ca.comcast.net) (Quit: evod)
[08:27:48] <flaper87> ChrisMorgan: ping
[08:29:34] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[08:29:49] *** Joins: sammykim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[08:31:19] <ChrisMorgan> flaper87: pong
[08:32:15] <flaper87> ChrisMorgan: hey, I was curious if you had a chance to look at https://github.com/flaper87/rust-http/tree/api 
[08:32:19] *** Quits: frau (frau@moz-C616DA0A.hsd1.ca.comcast.net) (Quit: out)
[08:32:26] <flaper87> I'm pretty sure the code could be more "rustier" 
[08:32:55] *** Joins: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp)
[08:33:03] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[08:33:08] <flaper87> this is what the client example looks like now: https://github.com/FlaPer87/rust-http/blob/api/src/examples/client/client.rs
[08:33:21] <ChrisMorgan> GENERAL QUESTION: is code "rusty" or "rustic"?
[08:33:45] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[08:33:51] *** Quits: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp) (Connection reset by peer)
[08:33:52] <flaper87> ChrisMorgan: good question, I keep saying rustier in my head
[08:33:52] <Ms2ger> rustyc
[08:33:54] <flaper87> :P
[08:33:59] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[08:34:23] <flaper87> ChrisMorgan: basically, as is, you just need from line 8 to 13 to do a get
[08:35:05] <flaper87> if we remove blank lines and formatting, the request can be made in 4 lines
[08:35:33] <ChrisMorgan> flaper87: HashMap isn't sufficient to express a querystring. It'll need to be more like ~[(~str, ~str)], really.
[08:35:37] <dbaupp> ChrisMorgan: rustic has better connotations than rusty
[08:36:10] <ChrisMorgan> You see, in a query string, order or parameters *may* be significant, and you *may* have duplicate entries where the duplication has meaning.
[08:36:18] <flaper87> ChrisMorgan: yup, because you can pass the same key twice, I'll change that
[08:37:03] <pnkfelix> Ms2ger: I like "rustyc"
[08:37:12] <ChrisMorgan> flaper87: does requests have fancy handling of the query string like that?
[08:38:21] *** Joins: five1 (five@9500BE4B.C4AAC3ED.10BB00EE.IP)
[08:38:39] <ChrisMorgan> I think the query string probably doesn't actually need fancy handling.
[08:38:52] <flaper87> ChrisMorgan: request gets a dictionary for query params, and if a key's value is a list, then it adds it multiple times
[08:38:55] <flaper87> 1 for each value
[08:39:14] *** Quits: five (five@moz-993E0FAA.v4.ngi.it) (Ping timeout)
[08:39:15] <flaper87> but I think it'd be better to use [(~str, ~str)] in rust-http
[08:39:21] <flaper87> and leave that up to the user
[08:39:37] <ChrisMorgan> Hmm. Of course, in Python you can create such structures much more conveniently than in Rust.
[08:39:46] <flaper87> yup
[08:39:47] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:40:52] *** Quits: five1 (five@9500BE4B.C4AAC3ED.10BB00EE.IP) (Connection reset by peer)
[08:41:02] <ChrisMorgan> I wonder whether it'd be better to leave query string handling to the user, only providing functions to assist.
[08:41:27] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:41:46] <flaper87> ChrisMorgan: mmh, that'd be a bit annoying from a user POV, IMHO
[08:42:20] <ChrisMorgan> I don't know how often people will _need_ to do it that way. Very often putting it directly into the URL will be reasonable.
[08:42:29] <ChrisMorgan> It's also something which might belong in Url.
[08:42:39] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[08:43:21] <Amaranth> Please don't do it automatically at least, if you decide it needs to be in there
[08:43:36] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[08:43:37] <flaper87> ChrisMorgan: well, I agreee that it could belong to URL, but I'd definitely have an abstraction for that
[08:43:46] <Amaranth> Lazy loading or explicitly requesting the conversion okay
[08:44:08] <flaper87> Amaranth: define automatically? If you pass query params, you want them into your URL, don't you?
[08:44:14] *** Quits: nathan7 (nathan@86F860FE.3CD03790.F113998C.IP) (Ping timeout)
[08:44:29] <Amaranth> Oh I thought we were talking about going the other way
[08:44:42] *** Joins: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[08:44:48] <Amaranth> Parsing a query string into some data structure
[08:45:04] <flaper87> Amaranth: ah no no no, that ain't happen :D
[08:45:17] *** Quits: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue)
[08:45:40] <doomlord> does the runtimeless rust idea need any code moved around in the standard libraries .. eg seperating out the libraries into parts that do & dont need the runtime
[08:46:08] *** Joins: nathan7 (nathan@86F860FE.3CD03790.F113998C.IP)
[08:46:41] <Ms2ger> Yes
[08:48:06] <flaper87> ChrisMorgan: re supporting url building, in my experience, it's been very useful to have the library doing that for me. Again, I agree it could belong to Url, though. I didn't think about that.
[08:48:10] <dbaupp> doomlord: depends on exactly how the problem is tackled, but probably
[08:48:19] <flaper87> ChrisMorgan: whatever makes that struct smaller, is good :D
[08:48:44] <doomlord> its quite hard to do that retroactively isn't it, the way module paths work
[08:48:56] <dbaupp> ChrisMorgan: btw, https://github.com/chris-morgan/rust-http/pull/7 ?
[08:48:59] <darkf> is there a way to selectively run tests without adding attributes to them? (something like an env var to whitelist?)
[08:49:04] <ChrisMorgan> dbaupp: sorry, haven't got to it yet...
[08:49:41] <doomlord> its quite hard to do that retroactively right, it seems any code referencing modules must be reworked (paths)
[08:49:50] <doomlord> (oops i repeated)
[08:50:02] <dbaupp> ChrisMorgan: that's ok :)
[08:50:24] <dbaupp> darkf: ./test-runner substring_of_tests_of_interest
[08:50:40] <dbaupp> darkf: or TESTNAME=substring for the rustc tests
[08:50:50] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[08:50:51] <darkf> ah thanks
[08:50:53] <dbaupp> (i.e. make check-stage2-std TESTNAME=substring)
[08:50:58] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[08:52:11] *** Quits: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com) (Ping timeout)
[08:52:15] *** Joins: flowsnake_ (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com)
[08:53:09] *** Joins: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[08:55:43] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[08:57:40] *** Joins: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com)
[08:57:52] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[08:58:05] *** Quits: flowsnake_ (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com) (Ping timeout)
[08:59:32] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[09:03:42] *** Quits: Lovot_ (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[09:04:55] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[09:05:30] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[09:09:34] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[09:11:01] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[09:13:48] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Quit: WeeChat 0.4.1)
[09:14:04] *** Joins: five (five@9500BE4B.C4AAC3ED.10BB00EE.IP)
[09:14:54] *** Quits: five (five@9500BE4B.C4AAC3ED.10BB00EE.IP) (Connection reset by peer)
[09:14:56] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[09:16:01] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[09:16:01] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/tVhOVA
[09:16:01] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[09:20:09] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Quit: WeeChat 0.4.2-rc1)
[09:20:18] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[09:21:00] *** Quits: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com) (Ping timeout)
[09:21:02] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[09:21:02] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/D01cCQ
[09:21:02] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[09:21:04] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[09:21:04] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/10bLrw
[09:21:04] <ghrust> 13rust/06auto 148b00004 15Felix S. Klock II: Remove oldvisit.rs (yay!); part of #7081 refactoring.
[09:21:04] <ghrust> 13rust/06auto 146491484 15bors: auto merge of #9093 : pnkfelix/rust/fsk-remove-oldvisit, r=alexcrichton
[09:21:05] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[09:21:06] *** Joins: flowsnake_ (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com)
[09:21:40] *** Quits: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue)
[09:26:45] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[09:27:02] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[09:29:43] *** Quits: StarLight (StarLight@moz-DC75A99E.dynamic.avangarddsl.ru) (Ping timeout)
[09:34:26] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[09:50:50] *** Quits: nkoep (nik@moz-79B329C7.pool.mediaways.net) (Ping timeout)
[09:53:23] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[09:56:19] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[09:56:45] <dbaupp> pnkfelix: re https://github.com/mozilla/rust/issues/9095, with the new rt, we're currently acting just like plain old C; no stack protection/checks at all.
[09:56:54] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[09:57:11] <dbaupp> (which is likely to be the cause of the segfault/bus error)
[09:58:11] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[09:59:51] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[10:04:19] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[10:04:59] <pnkfelix> dbaupp: Oh I was not aware of that, thanks
[10:05:21] *** Joins: nkoep (nik@moz-A858DAA.vpn.rwth-aachen.de)
[10:06:55] *** Joins: Palmik (palmik@moz-CC484FDD.tmcz.cz)
[10:07:47] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[10:07:51] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[10:09:40] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[10:11:01] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[10:11:01] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 146491484 to 1496da356: 02http://git.io/N3iJvQ
[10:11:01] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[10:11:03] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[10:11:03] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/FQqHLQ
[10:11:03] <ghrust> 13rust/06auto 14a5ad4c3 15Niko Matsakis: Delay assignment of node ids until after expansion. Ensures that each AST node...
[10:11:03] <ghrust> 13rust/06auto 14753d8c2 15bors: auto merge of #9088 : nikomatsakis/rust/issue-6304-AST-tree-not-DAG, r=catamorphism...
[10:11:04] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[10:13:45] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[10:24:27] *** Joins: xandy (xandy@moz-FC5D9C14.unity-media.net)
[10:28:03] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[10:31:33] *** Quits: JesseH (JesseH@moz-2E766C3E.mc.at.cox.net) (Ping timeout)
[10:31:38] *** Joins: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se)
[10:33:33] *** Joins: fyolnish (fyolnish@moz-19294EF7.uqwimax.jp)
[10:36:12] *** Joins: JesseH (JesseH@moz-2E766C3E.mc.at.cox.net)
[10:36:46] *** Quits: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP) (Connection reset by peer)
[10:37:29] *** Quits: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP) (Ping timeout)
[10:41:44] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[10:45:16] *** Quits: AlisonW (AlisonW@moz-7CEB14F7.hari.cable.virginmedia.com) (Ping timeout)
[10:52:37] *** Joins: msingle (Thunderbir@moz-6C414764.openskytelcom.net)
[10:52:37] *** Joins: AlisonW (AlisonW@moz-7CEB14F7.hari.cable.virginmedia.com)
[10:53:09] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[10:53:26] *** Joins: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP)
[10:56:41] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Quit: Leaving...)
[10:58:21] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:58:31] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[11:00:11] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[11:07:46] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[11:08:21] *** Joins: tgummerer (tgummerer@moz-6E222D7F.kthopen.kth.se)
[11:10:19] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[11:10:54] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[11:12:10] *** Quits: tgummerer (tgummerer@moz-6E222D7F.kthopen.kth.se) (Ping timeout)
[11:13:01] <bjz> sebcrozet: beep
[11:14:07] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[11:15:17] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[11:15:45] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[11:15:49] <sebcrozet> bjz: Hi
[11:17:25] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[11:19:03] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[11:20:27] *** Quits: nkoep (nik@moz-A858DAA.vpn.rwth-aachen.de) (Ping timeout)
[11:20:36] <bjz> sebcrozet: did you see that glfw-rs example?
[11:21:02] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[11:21:02] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/FQqHLQ
[11:21:02] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[11:22:04] *** Joins: novabyte (Instantbir@moz-3E0F9699.cable.virginmedia.com)
[11:22:16] <bjz> https://github.com/bjz/glfw-rs/blob/master/src/examples/managed-state/main.rs
[11:23:27] <sebcrozet> bjz: yes. But I dont like the idea of using TLS for that.
[11:23:59] <bjz> could you respond in the issue thread?
[11:26:03] <sebcrozet> bjz: Iâ€™ll try to find an exemple where TLS is not adapted at all first.
[11:26:06] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[11:26:06] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/aDANfQ
[11:26:06] <ghrust> 13rust/06auto 14959d9d6 15Felix S. Klock II: check_loans.rs Visitor refactoring (#7081): unify CheckLoan{Ctxt,Visitor}.
[11:26:06] <ghrust> 13rust/06auto 146724317 15Felix S. Klock II: gather_loans/mod.rs Visitor refactoring (#7081): unify GatherLoan{Ctxt,Visitor}.
[11:26:07] <ghrust> 13rust/06auto 14ed37da2 15Felix S. Klock II: middle/entry.rs Visitor refactoring (#7081): unify Entry{Context,Visitor}.
[11:26:09] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[11:26:45] <sebcrozet> bjz: I think things can go messy if you want, for example, that an user-defined callback is called by the glfw window.
[11:27:34] <bjz> cool, I think it's important to get your feedback
[11:27:59] <bjz> and it would be neat if you could put forward a possible example
[11:29:17] <sebcrozet> bjz: still, not using TLS means doing something uggly too (i-e what I proposed about collecting all events on a RWArc<~[Event]>).
[11:29:25] <bjz> mm
[11:30:08] <sebcrozet> bjz: I dont know which one is faster though.
[11:30:19] <sebcrozet> bjz: TLS does a hashmap lookup right?
[11:30:21] <bjz> maybe jack might have another idea. but its important to look at the ugly so that we know what to improve
[11:31:30] *** Quits: msingle (Thunderbir@moz-6C414764.openskytelcom.net) (Ping timeout)
[11:31:38] <bjz> this is aproblem that other wrapper libs might face too
[11:32:41] <sebcrozet> well, Iâ€™ll write a working minimal example with my ugly sollution; that way people can compare both approaches.
[11:32:50] <dbaupp> sebcrozet: it's actually a vector traversal
[11:33:52] <sebcrozet> dbaupp: ah? So a TLS lookup is O(n), with n the number of stored elements?
[11:34:50] <dbaupp> sebcrozet: the number of things in TLS yeah
[11:34:59] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[11:35:01] *** Joins: nkoep (nik@moz-74327110.vpn.rwth-aachen.de)
[11:35:03] <dbaupp> (at least, it was last time I looked in std::local_data)
[11:36:08] <sebcrozet> dbaupp: Ok. So I guess there is no hashmap there because we assume TLS wont store a lot of things.
[11:38:11] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[11:40:55] <doomlord> viewing C unions in rust - you'd need to cast a pointer manually to the element in question, i guess
[11:43:03] <dbaupp> doomlord: or have helper methods
[11:44:02] <doomlord> https://github.com/rikusalminen/glwt/blob/master/include/GLWT/glwt.h <<< just encountered these people making a glfw replacement which is mobile-oriented
[11:44:19] <doomlord> i notice they have a tagged-union for their events
[11:46:12] <bjz> doomlord: http://www.reddit.com/r/rust/comments/1lpmrx/storing_structsenums_of_structs_more_compactly_in/cc1jbku
[11:46:25] <doomlord> i gather rust is deliberately avoiding  definining a binary layout for tagged unions to allow later optimizations...
[11:46:29] *** Joins: shadower (Mibbit@moz-107AD163.redhat.com)
[11:46:36] <doomlord> and things like nullpointers now
[11:47:29] <dbaupp> yes
[11:47:55] *** Joins: shadower_ (tsedovic@moz-107AD163.redhat.com)
[11:48:02] *** Quits: shadower_ (tsedovic@moz-107AD163.redhat.com) (Quit: leaving)
[11:50:57] *** Quits: shadower (Mibbit@moz-107AD163.redhat.com) (Quit: http://www.mibbit.com ajax IRC Client)
[11:52:15] *** Joins: shadower (tsedovic@moz-107AD163.redhat.com)
[11:54:07] *** Quits: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP) (Input/output error)
[11:55:33] *** Joins: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP)
[12:03:45] <cmr> doomlord: it does make ffi a pain
[12:04:01] <cmr> I think the repr stuff acrichto worked on will help
[12:04:52] <doomlord> maybe a #[...] thing to make a predictabe enum layout would be useful, but i can see why they want to keep optimization options open
[12:04:53] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[12:06:07] <dbaupp> range(1, x).fold(1, |x, y| x * y)
[12:06:09] <dbaupp> <3 iterators
[12:06:32] <cmr> what is that, factorial?
[12:06:35] <dbaupp> yup
[12:07:06] *** Joins: eagen (eagen@8737942B.7A99C13A.B7961A98.IP)
[12:07:23] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[12:07:43] <doomlord> just need currying now :)
[12:09:52] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[12:12:50] <cmr> Am I imagining a change that let you specify the type of the enum discriminant?
[12:13:00] <cmr> All I can find is https://github.com/mozilla/rust/pull/8504
[12:13:28] *** Joins: tgummerer (tgummerer@moz-6E222D7F.kthopen.kth.se)
[12:13:43] <cmr> Oh https://github.com/mozilla/rust/pull/9006
[12:13:50] <cmr> How did I not include that in TWiR!
[12:16:19] *** Quits: tgummerer (tgummerer@moz-6E222D7F.kthopen.kth.se) (Ping timeout)
[12:16:39] <cmr> Ohkjk
[12:16:50] <cmr> It hasn't landed
[12:17:15] *** Quits: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net) (Ping timeout)
[12:19:27] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[12:23:08] <kimundi> doomlord: Your #[] thingy is going in as a PR atm it seems ;)
[12:23:29] <doomlord> nice
[12:23:46] *** Quits: sebcrozet (sebcrozet@moz-6DA639AF.w80-13.abo.wanadoo.fr) (Quit: Gone)
[12:24:56] <doomlord> discriminant might want to be placed differently i suppose  for nice alignment,.. i imagine the discriminants will usually be potentially fewer bits 
[12:28:20] *** Joins: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com)
[12:28:38] <kimundi> doomlord: i guess for more exotic layouts you'd use some kind of macro that generates a union adapter type, rather than trying to allow to specify everything with an attribute
[12:31:36] *** Joins: jaen (jaen@moz-39C3875F.neoplus.adsl.tpnet.pl)
[12:31:48] *** Quits: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[12:32:56] <dbaupp> acrichto: thanks for your symbol work; much nicer! :)
[12:33:17] *** Joins: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com)
[12:35:04] *** Quits: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[12:36:00] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[12:36:00] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/aDANfQ
[12:36:00] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[12:36:02] *** Quits: xandy (xandy@moz-FC5D9C14.unity-media.net) (Client exited)
[12:36:16] *** Joins: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com)
[12:36:57] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[12:38:31] <dbaupp> 	movq	-296(%rbp), %rcx
[12:38:32] <dbaupp> 	incq	%rcx
[12:38:32] <dbaupp> 	movq	%rcx, -296(%rbp)
[12:38:32] <dbaupp> in a tight loop :(
[12:42:34] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[12:46:51] *** Quits: squiddy (squiddy@moz-D32163A1.adsl.alicedsl.de) (Ping timeout)
[12:56:52] *** Joins: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net)
[12:57:16] *** Quits: fyolnish (fyolnish@moz-19294EF7.uqwimax.jp) (Client exited)
[12:59:10] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[13:00:45] <cmr> dbaupp: what's that code correspond to?
[13:00:51] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[13:02:29] *** jorendorff_away is now known as jorendorff
[13:02:48] *** Quits: naq (naq@D5C2D2DF.E4265FCD.E481B5B.IP) (Ping timeout)
[13:03:07] *** Quits: nkoep (nik@moz-74327110.vpn.rwth-aachen.de) (Ping timeout)
[13:03:08] <dbaupp> cmr: vec::from_elem(n, true)
[13:03:44] *** Joins: naq (naq@D5C2D2DF.E4265FCD.E481B5B.IP)
[13:09:28] <dbaupp> Is there anyone on a mac who could test https://github.com/mozilla/rust/issues/7579 for me? :)
[13:14:56] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[13:20:22] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[13:21:44] *** Joins: nkoep (nik@moz-79B329C7.pool.mediaways.net)
[13:23:01] *** Joins: dave1629 (dave@3F630F4E.AFE80CD4.DDE5D3F6.IP)
[13:27:08] *** Quits: Palmik (palmik@moz-CC484FDD.tmcz.cz) (Quit: Lost terminal)
[13:32:24] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[13:34:04] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[13:37:00] <pnkfelix> dbaupp: Same for me on a Mac
[13:38:20] <dbaupp> pnkfelix: same as the original report, or my comment? (thanks)
[13:38:50] <pnkfelix> dbaupp: Same as your comment (though I'm a bit struck by the original bug report, and wondering whether your command sequence, which looks right AFAIK, is actually recreating this bug scenario properly)
[13:39:22] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[13:39:51] <pnkfelix> dbaupp: still, I say we should close it and tell the bug filer to reopen with more details about the directory structure and how to recreate it if they are still seeing the problem.
[13:39:52] *** Joins: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com)
[13:41:47] <kimundi> He, all every pr bors knows about is currently either discussing, stale or bad
[13:41:58] <dbaupp> pnkfelix: done
[13:42:19] <pnkfelix> kimundi: I clearly cannot remember how to tell bors to retry
[13:42:20] * dbaupp urges kimundi to submit a PR that can be pending
[13:42:31] <pnkfelix> kimundi: see e.g. #9093
[13:42:45] <dbaupp> pnkfelix: `@bors: retry` after the r+ (i.e. on the HEAD commit)
[13:44:22] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[13:46:01] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[13:46:01] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/R3uteQ
[13:46:01] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[13:46:02] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[13:46:02] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/AHEZpw
[13:46:02] <ghrust> 13rust/06auto 148b00004 15Felix S. Klock II: Remove oldvisit.rs (yay!); part of #7081 refactoring.
[13:46:02] <ghrust> 13rust/06auto 1453f7ceb 15bors: auto merge of #9093 : pnkfelix/rust/fsk-remove-oldvisit, r=alexcrichton
[13:46:02] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[13:46:15] <pnkfelix> dbaupp: thanks.  one of these days it'll stick
[13:48:04] <dbaupp> pnkfelix: I'm always having to edit the `:` into the comment
[13:48:08] * dbaupp sighs
[13:48:17] <dbaupp> (into my comment, that is)
[13:48:47] <pnkfelix> dbaupp: cLearly bors should be set up to reply back "Did you mean '@bors: retry' ?" :)
[13:49:06] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[13:49:42] <dbaupp> pnkfelix: it's open source now, right?
[13:49:46] <dbaupp> engla: ping
[13:49:53] <pnkfelix> dbaupp: is it?  I don't know where it lives
[13:50:27] <dbaupp> https://github.com/graydon/bors
[13:50:37] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[13:51:22] <dbaupp> I imagine graydon is unlikely to be handling it now, though
[13:51:22] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Connection reset by peer)
[13:51:33] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[13:53:03] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[13:57:06] *** Joins: jstevans (Instantbir@moz-F858E376.bootp.virginia.edu)
[13:57:17] <engla> hi
[13:57:41] <dbaupp> engla: anyway, I'm finally around when you are
[13:57:55] <dbaupp> engla: you were asking about https://github.com/mozilla/rust/issues/8968#issuecomment-24052661 right?
[13:58:05] <engla> yes
[13:58:24] *** Quits: a__ (a__@moz-25043B93.nycmny.fios.verizon.net) (Client exited)
[13:58:33] <dbaupp> i was just demonstrating that "For an iterator interface, arbitrary-length replacements sound much more complicated." isn't too bad
[13:58:39] <engla> we had a lot of discussions about encodings yesterday
[13:58:53] * dbaupp followed loosely
[13:59:28] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[13:59:41] <engla> including the only mandated error handling modes for a decoder by whatwg, is to either insert repl. char or failure
[13:59:45] *** Joins: a__ (a__@moz-25043B93.nycmny.fios.verizon.net)
[14:00:38] <engla> so that would be much simpler
[14:00:41] *** Quits: nkoep (nik@moz-79B329C7.pool.mediaways.net) (Ping timeout)
[14:00:54] <dbaupp> yeah
[14:01:12] <dbaupp> (did anyone bring up https://github.com/mozilla/rust/issues/6164 ?)
[14:01:39] * dbaupp coincidentally got https://github.com/mozilla/rust/issues/4837 for triage
[14:01:44] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[14:01:49] <engla> I think that's the core of it dbaupp 
[14:02:01] <engla> so that we can design a text api for IO
[14:02:05] *** Joins: squiddy (squiddy@moz-D32163A1.adsl.alicedsl.de)
[14:02:09] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten)
[14:02:23] <olsonjeffery> dbaupp: there's not a little in the issue tracker around string encoding
[14:02:28] <dbaupp> engla: which is the core of it?
[14:02:55] <olsonjeffery> i think a good argument has been made for keeping actual string encoding facilities separate from io, at least at the main surface-level
[14:03:05] <engla> dbaupp: I/O
[14:03:21] <olsonjeffery> 64 ?)
[14:03:25] <olsonjeffery> whoops
[14:03:29] <engla> dbaupp: just that an encodings api is needed before a text api for I/O can be designed
[14:03:32] <dbaupp> engla: right; I was just meaning, linked to the/a relevant bug
[14:04:01] <dbaupp> (i.e. 6164 is basically exactly what the discussions were about)
[14:04:02] <olsonjeffery> a data point in favor of conditions for parsing failure, heh.
[14:04:18] <olsonjeffery> i kind of felt like, w/ the whatwg error handling mandate, we'd not be doing that
[14:04:27] <olsonjeffery> but maybe that's something that can happen in from_utf8/16
[14:04:41] <engla> dbaupp: don't know that
[14:05:58] <olsonjeffery> string encoding for IO is one of the "ends" we have, but the encoding story, writ- large, is a "means" and an "end" unto itself
[14:06:02] <dbaupp> pnkfelix: I was just about to close 4837 in favour of 8968 :)
[14:06:27] <pnkfelix> dbaupp: Feel free to switch 'em
[14:06:30] <dbaupp> olsonjeffery: one can regard internal encoding/decoding as IO to/from memory
[14:07:29] <dbaupp> (internal == non-printing/file-writing/socket-sending encoding)
[14:07:34] *** Joins: fyolnish (fyolnish@moz-75827EB.uqwimax.jp)
[14:07:36] <olsonjeffery> dbaupp: i will politely decline to agree with your semantic interpretation for the purpose of this discussion and keep "IO" as meaning dealing with byte-streams to/from process-external sources
[14:07:53] <dbaupp> ok :)
[14:08:08] *** Quits: jaen (jaen@moz-39C3875F.neoplus.adsl.tpnet.pl) (Ping timeout)
[14:09:15] *** Quits: fyolnish (fyolnish@moz-75827EB.uqwimax.jp) (Ping timeout)
[14:09:29] <olsonjeffery> anyways. im not an encodings-person. ive mostly gotten acquainted with the issue in the context of trying to move the story forward.
[14:09:44] <olsonjeffery> it started because engla inquired, to me, about the encoding story because i happen to be "working on IO"
[14:10:32] <olsonjeffery> i plead ignorance, and brson mentioned that getting "something to handle major encodings" into tree is a high priority
[14:11:09] <olsonjeffery> so ive just been collecting opinions and doing a lot of listening to people who confront the issue more than me
[14:11:48] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[14:11:52] <Ms2ger> Why is that a high priority?
[14:11:59] * AlisonW has just come up with a new acronym which seems relevant for some of the bikesheeding discussions. RINCE
[14:12:05] <Ms2ger> It seems like something that would be better handles by the existing library
[14:12:06] <olsonjeffery> beause no one else has really stepped up to "champion the cause", i'm going to try and assemble some kind of concensus
[14:12:38] <olsonjeffery> Ms2ger: i think there's a case to be made for 1) having a well-defined set of encoding traits (based on whats in rust-encoding)
[14:12:40] <AlisonW> Rust Is Not C++ Expressions (ie. we're working on something *new* not just a revision of C/C++
[14:12:46] <olsonjeffery> and 2) bringing rust's existing utf8/utf16 support under the auspice of that
[14:13:03] <olsonjeffery> the "default impls" in std::str are pretty much the whatwg spec in "fail mode" for errors
[14:13:03] <Ms2ger> I'd prefer throwing out any existing utf16 support :)
[14:13:15] *** Joins: maxli (maxli@moz-3643BFA.net.uwaterloo.ca)
[14:13:38] *** Quits: novabyte (Instantbir@moz-3E0F9699.cable.virginmedia.com) (Quit: bye bye)
[14:15:08] *** Joins: nkoep (nik@moz-A858DAA.vpn.rwth-aachen.de)
[14:15:23] <pnkfelix> AlisonW: "Expressions" ?
[14:15:38] <doomlord> could rust theoreticlly  encode the 'array-index or -1' pattern in an enum similar to how it uses a nullptr optimization with options 
[14:15:46] <AlisonW> well ..... I needed something for the "E" ;-0
[14:16:11] <olsonjeffery> Ms2ger: i don't suppose you could rephrase that in a more constructive way? or is that just snark?
[14:16:18] <pnkfelix> RINCH: Rust is not C++ or Haskell
[14:16:25] <olsonjeffery> hee.
[14:16:33] <Ms2ger> Hmm?
[14:16:34] <pnkfelix> sed -e s/or/nor/
[14:16:35] <AlisonW> "or" RINCOH?
[14:16:46] <Ms2ger> Does rust core have any need for utf16 support?
[14:17:00] <AlisonW> utf16 has many pitfalls
[14:17:35] <AlisonW> (as a general thang, not related to rust, per se)
[14:17:50] <pnkfelix> RINCHE: Rust Is Not C++, Haskell, Etc
[14:17:53] <olsonjeffery> a "correctness" argument against utf16 doesn't negate the multiple scenarios wherein servo, and probably many other application domains, would be well-served by core support.
[14:18:14] <olsonjeffery> by utf16 support in the standard library, i should say
[14:19:49] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[14:20:35] <olsonjeffery> but there's certainly a bit of resistance to the idea that encoding traits (or requiring impls for utf8, 16, etc) being in the stdlib is an obvious, neccesary thing.
[14:21:10] <olsonjeffery> so i guess i just want to learn enough to put together a pitch, and make that on the list, and let the larger community of people who aren't on irc discuss it
[14:21:31] <Ms2ger> olsonjeffery, Servo has very little use for real utf-16, as it needs to support unpaired surrogates
[14:21:35] <olsonjeffery> which is probably where the long tail of programmers who deal with encodings are likely to be
[14:22:43] <Ms2ger> (I tend to prefer keeping the language small, and keep this kind of thing in a library)
[14:22:58] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[14:23:18] <dbaupp> is lifthrasiir (author of rust-encoding) on IRC/been part of this most recent discussion?
[14:23:43] <dbaupp> Ms2ger: does Rust's std/extra count as language or library?
[14:24:05] <olsonjeffery> dbaupp: not yet. he's in seoul and ive lurked in #rust-kr, but haven't gotten in touch with him yety
[14:24:16] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[14:24:23] <olsonjeffery> dbaupp: heh. i considered making that point. but we both know what Ms2ger meant.
[14:24:26] *** Quits: sk (sk@273FD846.E993C7C3.78DD174B.IP) (Quit: Leaving)
[14:24:52] <Ms2ger> dbaupp, I don't know
[14:24:54] <dbaupp> (I don't)
[14:25:04] <dbaupp> olsonjeffery: (i was genuinely asking)
[14:25:09] <olsonjeffery> dbaupp: fair enough
[14:25:33] <dbaupp> olsonjeffery: which did you think?
[14:25:34] <olsonjeffery> i take it that "language" meant "std lib" and "library" meant "External community library"
[14:25:52] *** Quits: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se) (Ping timeout)
[14:26:25] <Ms2ger> dbaupp, something in between, I think
[14:26:46] <doomlord> i've always been frustrateed by people talking about a standardlibrary as part of the language in that it almost implies there's only one way to use the language.(eg" in C++, files work like this... ")
[14:26:46] <Ms2ger> dbaupp, those seem to have a privileged position, at least
[14:27:20] <doomlord> (like "std::vector" is how vectors work in c++ and there's no other way ..etc)
[14:27:36] <dbaupp> doomlord: it doesn't hurt to have a well designed one
[14:28:00] <Ms2ger> I'm not going to comment about the design of the C++ STL :)
[14:28:47] <olsonjeffery> stl is a standard library. the stl is bad. therefore, standard libraries are bad.
[14:29:07] <doomlord> it helps sure, its just crazy when people say things like "c++ has reference counting now" .. as if you coulnd't do reference counting before shared_ptr .. etc
[14:29:50] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[14:29:53] <dbaupp> heh, it looks like extra::rl leaks every line that it reads.
[14:29:54] <doomlord> well its hard to please all people, and its easier to ammend or change a library than it is to change a language (compiler /implementation)
[14:29:56] *** Quits: jstevans (Instantbir@moz-F858E376.bootp.virginia.edu) (Ping timeout)
[14:30:10] *** Joins: novabyte (Instantbir@moz-3E0F9699.cable.virginmedia.com)
[14:31:05] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[14:31:46] <Ms2ger> What doomlord said
[14:32:45] <Kelet> Hi, I've been trying for 3-4 hours with many different configurations (including, of course, the suggested config) to compile Rust on Windows. I'm using Master and this is a common error/problem I get: http://pastebin.com/1hUv2u6z
[14:33:00] <Kelet> (That's after ./configure is 'successful')
[14:33:29] <pnkfelix> Kelet: mm.  Try this:
[14:33:50] <pnkfelix> Kelet: make a different directory, e.g. a subdirectory. (I'll call it "objdir")
[14:34:07] <pnkfelix> Kelet: Within objdir, run configure.  (E.g. "../configure")
[14:34:23] <pnkfelix> Kelet: Then see if you can do a build inside objdir
[14:34:38] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[14:34:58] *** Quits: ski (md9slj@t-2020-05.studat.chalmers.se) (Ping timeout)
[14:35:37] <Kelet> pnkfelix, You want me to copy the configure script to the new (empty) subdirectory inside of my rust folder?
[14:35:41] <Kelet> Not following you 100%
[14:36:21] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[14:36:28] <pnkfelix> Kelet: I think you need to run the configure script *from* the Rust checkout
[14:36:40] <pnkfelix> Kelet: As in, leave the configure script where it lies, and write a path to it
[14:36:47] <pnkfelix> Kelet: in the command prompt
[14:36:56] <Kelet> Oh
[14:36:57] <Kelet> gotcha
[14:37:07] <pnkfelix> Kelet: I don't know if any people do builds right immediately in the source tree
[14:37:23] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[14:37:24] <pnkfelix> Kelet: So I don't know if that use-case is meant to be supported in general (let alone on Windows, which does not get as much testing)
[14:37:39] <pnkfelix> Kelet: though IMO we should support that usage
[14:38:02] <Kelet> It's what I've traditionally always done on Unix systems for the past decade or so. ./configure && make && make install more or less.
[14:38:04] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:38:11] <cyndis> i always build rust in the source tree
[14:38:12] <cyndis> works fine
[14:38:16] <cyndis> (on linux)
[14:38:22] <Kelet> anyhow, giving it a try
[14:38:27] <Kelet> although configure takes.. a while
[14:38:28] <olsonjeffery> AlisonW: http://www.reddit.com/r/rust/comments/1m3uoa/overheard_in_rust_rinche/ :)
[14:38:37] <olsonjeffery> thought that was worth keeping for posterity
[14:38:39] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[14:38:42] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[14:38:55] <pnkfelix> Kelet: Oh, don't get me wrong, I do it all the time on some projects.  (One piece of software I worked on for years didn't *support* any other build model.)
[14:39:18] <dbaupp> \o/
[14:39:19] <olsonjeffery> how the RINCHE stole christmas
[14:39:27] * dbaupp has a build of servo, finally
[14:40:09] <AlisonW> My mind will keep working on it in a background process ;-P
[14:40:16] *** Joins: ski (md9slj@moz-862B1C66.studat.chalmers.se)
[14:41:37] <AlisonW> Rust Is Not C++ Everywhere! (it has a bit of Haskell too ...)
[14:42:19] * AlisonW loves it when my brain cycle-steals from my concious thought processes
[14:42:47] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[14:44:23] <Kelet> pnkfelix, Unfortunately, I get the same problem even in a subdirectory.
[14:44:32] <pnkfelix> Kelet: Hmm.  Okay.  I'll fire up my VM
[14:44:36] <engla> So if Rust is not C++, it is C?
[14:44:51] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[14:45:11] <engla> I'm not serious
[14:45:57] <AlisonW> "The 'C' may stand for C, C++. COBOL, or whatever else you'd like it not to be"
[14:46:45] <AlisonW> (I just keep seeing comments of the form "This works like it does in C/C++" all over the place, which seems ... restricting ... somehow.
[14:46:58] <Kelet> pnkfelix, Thanks, I appreciate the help. Actually, I did have a problem which may be related.
[14:47:00] <doomlord> what if you want it to be .. a cleaned up C++ with functional flavour
[14:47:12] *** Quits: veddan (viktor@moz-C79BC80B.csbnet.se) (Ping timeout)
[14:47:13] <Kelet> The 'file' utility does not come installed even though I specifically installed the msys-file package
[14:47:15] *** Quits: nkoep (nik@moz-A858DAA.vpn.rwth-aachen.de) (Ping timeout)
[14:47:20] <AlisonW> (but then I did use a predeccesor of B at college : BCPL
[14:47:31] <Kelet> So I downloaded something off gnu-win32
[14:47:35] <Kelet> maybe it's malfunctioning
[14:47:35] *** Joins: veddan (viktor@moz-C79BC80B.csbnet.se)
[14:47:37] *** Quits: dave1629 (dave@3F630F4E.AFE80CD4.DDE5D3F6.IP) (Quit: dave1629)
[14:47:38] <Kelet> I'll check in a few
[14:48:23] *** Quits: novabyte (Instantbir@moz-3E0F9699.cable.virginmedia.com) (Quit: bye bye)
[14:49:53] *** Joins: clements (clements@moz-BEE8D50A.dsl.snlo01.pacbell.net)
[14:50:04] *** Quits: maxli (maxli@moz-3643BFA.net.uwaterloo.ca) (Quit: Leaving.)
[14:52:28] <kimundi> Re: utf16 - afaik it's needed for windows file paths
[14:52:56] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[14:55:22] *** Quits: krdln (Mibbit@moz-3B40D57B.icm.edu.pl) (Quit: http://www.mibbit.com ajax IRC Client)
[14:55:50] <Kelet> I don't see file being used anywhere in the Makefiles, but i don't seem to have a working copy of 'file' either so it could be a problem (./configure just made sure I had a file executable, not that it worked iirc)
[14:57:13] *** Joins: jstevans (Instantbir@A8E37DBC.BB5A23D8.DDE5D3F6.IP)
[14:59:18] <pnkfelix> meanwhile, everytime acrichto switches the libuv remote in .gitmodules, it seems to break things for me.  Why doesn't git submodule update handle this?
[15:01:26] <pnkfelix> Ah, apparently I'm supposed to run "git submodule sync" instead of "git submodule update" ?
[15:01:30] <kimundi> I think you also need git submodule sync or so. Or call ./configure a few time :P
[15:01:40] *** Quits: jstevans (Instantbir@A8E37DBC.BB5A23D8.DDE5D3F6.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[15:01:46] *** Quits: bent (chatzilla@FC9FC902.ED95B50E.EDDC15BA.IP) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[15:01:54] <kimundi> If I read about other needing to do it, they allways call both variants
[15:02:47] *** Joins: in_class_with_rust (Instantbir@A8E37DBC.BB5A23D8.DDE5D3F6.IP)
[15:02:51] *** Quits: clements (clements@moz-BEE8D50A.dsl.snlo01.pacbell.net) (Ping timeout)
[15:02:53] *** Quits: in_class_with_rust (Instantbir@A8E37DBC.BB5A23D8.DDE5D3F6.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[15:02:58] <pnkfelix> Kelet: FYI it seems like *i* have `file` in my MinGW system.  
[15:04:27] *** Joins: bent (chatzilla@moz-6F843AD8.static.cust.telenor.com)
[15:05:07] * pnkfelix is suspicious that the workcache test is broken.
[15:05:19] <pnkfelix> tjc: ping
[15:05:25] * AlisonW is working through tutorial to see what's up - finds example code doesn't actually work anymore ;-0
[15:05:36] *** Joins: skoizza (Mibbit@5A3CC015.E8B6FA7D.DDE5D3F6.IP)
[15:05:40] <pnkfelix> (tjc isn't here, doh)
[15:05:49] *** Joins: nkoep (nik@moz-79B329C7.pool.mediaways.net)
[15:05:55] <dbaupp> AlisonW: dangers of a fast moving language :)
[15:06:14] <pnkfelix> Hmm, i thought we extracted code and tested it.  Is that only in rust.md, and not the tutorials?
[15:06:24] <AlisonW> yup. though the line it is complaining about would, I'd have thought, not been b0rked
[15:06:41] <AlisonW> line concerned is in loops:
[15:06:43] <AlisonW> println(int::to_str(x))
[15:06:51] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[15:06:57] <AlisonW> 19:21 error: unresolved name `int::to_str`.
[15:07:07] <dbaupp> yup, x.to_str() now
[15:07:13] <pnkfelix> AlisonW: where are you finding the tutorial?
[15:07:21] <AlisonW> http://static.rust-lang.org/doc/0.7/tutorial.html
[15:07:27] <AlisonW> in 4.3
[15:07:29] <dbaupp> pnkfelix: I though we did too
[15:07:31] <pnkfelix> AlisonW: That is is the 0.7 version of the tutorial
[15:07:41] <dbaupp> (oh)
[15:07:43] *** Quits: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP) (Ping timeout)
[15:07:52] <pnkfelix> AlisonW: Start over from here: http://www.rust-lang.org/
[15:07:55] <dbaupp> AlisonW: http://static.rust-lang.org/doc/tutorial.html is for master
[15:07:57] <AlisonW> and the current code is 0.7 so I'd taken it it was the right version ...
[15:08:09] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[15:08:11] <AlisonW> apparently not then. [delete all and start again]
[15:08:23] <pnkfelix> AlisonW: â€¦ are you running using a local build, or a copy of the 0.7 release ?
[15:08:23] <kimundi> Current git is 0.8-pre
[15:08:33] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[15:08:48] <AlisonW> ah ... and as I installed last night (or rather this morning *early* then so am I
[15:08:49] <pnkfelix> AlisonW: Sorry, wrong question: Are you building from git trunk, or from a local build of the 0.7 release tar ball?
[15:09:18] <AlisonW> rust 0.8-pre (54ae280 2013-09-09 13:01:02 -0700)
[15:09:23] <AlisonW> git latest
[15:09:25] <kimundi> We only deal with 0.7 as stable _point in time_, hence the extra docs on the main page and all. But no one involved in development is doing anything with 0.7
[15:09:51] * AlisonW decides easier to just look at the damn code ;-p
[15:10:01] <dbaupp> AlisonW++
[15:10:05] <Amaranth> I understand the importance of getting milestone releases out but honestly considering the state of the language people should probably be sticking close to the latest master so I'm surprised 0.7 is shown so prominently on the website
[15:10:06] <kimundi> Always run git master, allways use trunk docs, but be prepared to just look at the code
[15:10:26] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Quit: Leaving.)
[15:10:45] <kimundi> Yeah, I think the 0.7 release should be an less prominent footnote
[15:10:45] <Amaranth> I got caught up on this too, I had half an 0.7 build compiled before someone told me not to bother and that latest master would be more stable (in the crashing sense) anyway
[15:10:47] <AlisonW> idea had been that tut would let me see quick things ... never trust tutorials, or manuals, or documentation of any sort
[15:11:29] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[15:11:30] <AlisonW> dbaupp: btw, prefer the newer construction by a long way!
[15:11:31] <Amaranth> hehe, I'm still working through the tutorial and half the time on a section I just give up and look at the specification for all the details
[15:11:33] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[15:11:33] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[15:11:40] <pnkfelix> AlisonW: In any case, there is a link for the trunk-version of the tutorial
[15:11:54] <AlisonW> spec-if-ic-ation. . . . um ... no, doesn't make sense
[15:11:55] <kimundi> "If you want to try out rust, clone the git repo and build the current version. (In small text: If you really need something prebuild, there is the last snapshot 07....)"
[15:11:57] <pnkfelix> AlisonW: (i.e. I was not being facetious by pointing you to rust-lang.org; the links live there)
[15:11:57] <dbaupp> AlisonW: the `for` one? it's much nicer
[15:12:05] *** Quits: a__ (a__@moz-25043B93.nycmny.fios.verizon.net) (Client exited)
[15:12:14] <AlisonW> yes, far easier on the eyes and brain
[15:12:19] *** Joins: a__ (a__@moz-25043B93.nycmny.fios.verizon.net)
[15:12:27] <AlisonW> pnkfelix: ta ;-)
[15:12:28] <dbaupp> kimundi: are the non-windows snapshots pre-built?
[15:12:45] <kimundi> No idea actually
[15:13:01] <kimundi> But at least read the new module tutorial ;)
[15:13:17] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[15:13:40] <Kelet> Welp
[15:14:20] * kimundi 's brains just fused 'Kelet' and 'help' to 'kelp' - clearly I'm going insane
[15:14:31] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[15:14:40] <AlisonW> ooh println(x.to_str()); breaks fun - threw ten errors
[15:14:57] *** Quits: fabiand_ (fabiand@moz-964DA28E.adsl.alicedsl.de) (Quit: Verlassend)
[15:15:03] <kimundi> is x per change a number?
[15:15:22] <dbaupp> (a literal integer)
[15:15:23] <AlisonW> a mut
[15:15:36] <kimundi> rusti: 1.to_str()
[15:15:45] <Kelet> Are there any pre-built snapshots/nightlies/weeklies for Windows? I noticed Rust has a buildbot, so it'd be nice for all of us who are too dumb to get the build environment working. I've been playing with Rust for a few weeks on my Linux laptop, and wanted to start a project, but can't get it to build on Windows and the libraries I need to leverage are based on Master/newer builds. Suppose maybe I should try again in a few months.
[15:15:53] <Kelet> Or maybe set up a VM and try it with a clean slate Windows
[15:16:06] <AlisonW> [16:07:07]	dbaupp	yup, x.to_str() now
[15:16:16] *** Quits: veddan (viktor@moz-C79BC80B.csbnet.se) (Client exited)
[15:16:25] <kimundi> AlisonW: SOmething like 1.to_str() will eroor because rustc doesn't know if the number is supoosed to be a uint, int, u8, i16, u32 ....
[15:16:32] <pnkfelix> Kelet: The build seems to work for me.  I'd be a little suspicious about the state of your MinGW installation ?
[15:16:36] <dbaupp> AlisonW: (what are the errors?)
[15:16:59] <Kelet> pnkfelix, I installed MinGW. Checked C, C++, and Msys base. I then did the upgrade <4.6 command (I've tried without that as well). 
[15:17:01] <AlisonW> coming (multi lines)
[15:17:07] <AlisonW> hello.rs:19:10: 19:21 error: multiple applicable methods in scope
[15:17:08] <AlisonW> hello.rs:19             println(x.to_str());
[15:17:10] <AlisonW>                                 ^~~~~~~~~~~
[15:17:11] <AlisonW> hello.rs:19:10: 19:21 note: candidate #1 is `std::int::generated::ToStr$int::to_str`
[15:17:12] <Kelet> pnkfelix, Well, there was one other problem
[15:17:13] <AlisonW> hello.rs:19             println(x.to_str());
[15:17:15] <AlisonW>                                 ^~~~~~~~~~~
[15:17:16] <AlisonW> hello.rs:19:10: 19:21 note: candidate #2 is `std::i8::generated::ToStr$i8::to_str`
[15:17:18] <AlisonW> hello.rs:19             println(x.to_str());
[15:17:19] <AlisonW>                                 ^~~~~~~~~~~
[15:17:20] <Amaranth> eep
[15:17:21] <AlisonW> hello.rs:19:10: 19:21 note: candidate #3 is `std::i16::generated::ToStr$i16::to_str`
[15:17:21] <pnkfelix> Kelet: hmm.  Do you know an easy way for us to compare our MinGW's installations?
[15:17:22] <AlisonW> hello.rs:19             println(x.to_str());
[15:17:24] <AlisonW>                                 ^~~~~~~~~~~
[15:17:25] <AlisonW> hello.rs:19:10: 19:21 note: candidate #4 is `std::i32::generated::ToStr$i32::to_str`
[15:17:27] <AlisonW> hello.rs:19             println(x.to_str());
[15:17:28] <AlisonW>                                 ^~~~~~~~~~~
[15:17:29] <Kelet> MinGW provides mingw32-make, and I had to copy it to make
[15:17:30] <AlisonW> hello.rs:19:10: 19:21 note: candidate #5 is `std::i64::generated::ToStr$i64::to_str`
[15:17:31] <AlisonW> hello.rs:19             println(x.to_str());
[15:17:33] <AlisonW>                                 ^~~~~~~~~~~
[15:17:34] <AlisonW> hello.rs:19:10: 19:21 note: candidate #6 is `std::uint::generated::ToStr$uint::to_str`
[15:17:36] <AlisonW> hello.rs:19             println(x.to_str());
[15:17:37] <AlisonW>                                 ^~~~~~~~~~~
[15:17:38] <Kelet> Because the config file only looked for make, not mingw32-make
[15:17:39] <pnkfelix> Alison: You may want to consider using a pastebin in the future.
[15:17:39] <AlisonW> hello.rs:19:10: 19:21 note: candidate #7 is `std::u8::generated::ToStr$u8::to_str`
[15:17:40] <kimundi> AlisonW: This was a bad idea :P
[15:17:40] <AlisonW> hello.rs:19             println(x.to_str());
[15:17:42] <AlisonW>                                 ^~~~~~~~~~~
[15:17:43] <AlisonW> hello.rs:19:10: 19:21 note: candidate #8 is `std::u16::generated::ToStr$u16::to_str`
[15:17:45] <AlisonW> hello.rs:19             println(x.to_str());
[15:17:46] <AlisonW>                                 ^~~~~~~~~~~
[15:17:48] <AlisonW> hello.rs:19:10: 19:21 note: candidate #9 is `std::u32::generated::ToStr$u32::to_str`
[15:17:48] *** Joins: Kruppe (user@moz-4DDA8AB8.uwaterloo.ca)
[15:17:49] <AlisonW> hello.rs:19             println(x.to_str());
[15:17:50] <Kelet> pnkfelix, Did you have a similar problem?
[15:17:51] <AlisonW>                                 ^~~~~~~~~~~
[15:17:53] <AlisonW> hello.rs:19:10: 19:21 note: candidate #10 is `std::u64::generated::ToStr$u64::to_str`
[15:17:54] <AlisonW> which seems ... 'overkill'
[15:17:56] <AlisonW> ah .. gp ... mea culpa
[15:17:56] <Amaranth> AlisonW: Please use a pastebin service for such long messages
[15:18:13] <Amaranth> AlisonW: Also I'm guessing you just have something like let mut x = 0;
[15:18:16] * AlisonW hangs her head in shame - sorry folks
[15:18:23] <pnkfelix> Kelet: â€¦ not that I can recall?
[15:18:24] <kimundi> AlisonW: Anyway, you have to tell rustc in such situation which type you actually meant
[15:18:35] <kimundi> AlisonW: 1u8.to_str() for example
[15:18:44] <kimundi> AlisonW: Or let x: uint = 1; x.to_str()
[15:18:48] <AlisonW> the example starts with || let mut x = 5;
[15:18:48] <Amaranth> I would have thought it would figure out a type at that point
[15:18:49] <Kelet> pnkfelix, And you just followed the instructions on the wiki for getting started developing with Rust?
[15:18:54] <Kelet> To set up your environment, that is
[15:18:59] <Amaranth> But yeah it seems you need something like let mut x: int = 5;
[15:19:09] <AlisonW> anyway, this isn't a support forum - I'll go back to playing to get up to speed
[15:19:11] <Amaranth> To get it an explicit type since it wasn't able to decide which kind of int you wanted
[15:19:13] <klutzy> AlisonW: x has too many candidates of ToStr because it can be int, uint, u8, ...
[15:19:18] <Amaranth> This isn't a support forum?
[15:19:20] <dbaupp> Amaranth: in theory it defaults to int
[15:19:28] <kimundi> Amaranth: News to me too xD
[15:19:37] <pnkfelix> Kelet: â€¦ I *think* so, but there was almost certainly some mucking about along the way.  That's why I was wondering if there might be an easy way for us to compare the state's of our respective MinGW installations
[15:19:42] *** Joins: jgilbert (jgilbert@moz-67020FBB.mycingular.net)
[15:19:43] <dbaupp> AlisonW: (this is a support forum; the docs aren't good enough for it to *not* be one)
[15:19:46] <Amaranth> dbaupp: Apparently not?
[15:20:00] <dbaupp> Amaranth: yeah; apparently so
[15:20:02] <AlisonW> dbaupp: lol, point
[15:20:17] <Amaranth> AlisonW: So yeah just specific a type for x and you should be good
[15:20:20] <Kelet> pnkfelix, I've tried 3-4 different ways of setting up MinGW. Not sure of a way to compare them. Right now I've basically just installed MSys with gcc/g++/msys base and going from that. No downgrading.
[15:20:26] <Kelet> (I've tried the downgrading too)
[15:20:39] <Kelet> but someone on the bug tracker said the issue with LLVM was fixed thus you can now use newer versions.
[15:20:47] <Kelet> So I figured I'd try the newer version which doesn't help
[15:20:49] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[15:21:08] <Kelet> Do you do ./configure && make from the bash shell provided by msys, or the one provided by git, or do you do it from cmd ?
[15:21:19] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[15:21:27] <AlisonW> works fine if I add :int on there. oddly a previous line qwhich doesn't have a type explicitly added also works fine. investigatimg/testing
[15:21:28] <Amaranth> I guess if you had done more with x before trying to convert it to a string it might have picked a type and not been a problem
[15:21:39] <Amaranth> Weird problem
[15:21:39] *** Joins: jaen (jaen@moz-47C72412.play-internet.pl)
[15:22:50] <AlisonW> oh damn. "0" is different from "0.0" 
[15:22:50] <Amaranth> I wasn't actually aware it kept track of the way the variable was used to infer the type, I thought it was only during the initial assignment
[15:22:52] <pnkfelix> Kelet: I do it from the MinGW /bin/sh shell
[15:23:13] <AlisonW> (in the numerical, not string, sense)
[15:23:54] <dbaupp> Amaranth: no, it does infer backwards (not very well in some cases, e.g. it doesn't appear to infer "through" a match very well)
[15:24:18] *** Joins: jstevans (Instantbir@A8E37DBC.BB5A23D8.DDE5D3F6.IP)
[15:24:28] <pnkfelix> Kelet: or wait.  I did make a wrapper script, to get a correct version of Python onto my PATH
[15:24:38] <Amaranth> AlisonW: Careful, let mut x = 0.0; will give you the same problem. You'll need to specify a float, f32, or f64 still
[15:25:13] <AlisonW> that's what I was playing with had "let mut x:float = 0.0" but later test wasn't = zero
[15:25:24] <AlisonW> not 'wrong' per se, just fun
[15:25:26] <nmatsakis> let mut x = 0.0_f also works
[15:25:32] <nmatsakis> or 0.0_f32 etc
[15:25:49] *** Joins: josh (josh@moz-357ADCEA.hsd1.mn.comcast.net)
[15:25:51] <Amaranth> nmatsakis: Isn't it just 0.0f?
[15:25:52] <pnkfelix> Kelet: Here is a gist for the .bat file I made: https://gist.github.com/pnkfelix/6511050
[15:25:56] <nmatsakis> Amaranth: either.
[15:25:57] <kimundi> Undescores in integrer and float liertals are really convenient
[15:26:03] <nmatsakis> I prefer to use an underscore.
[15:26:03] <pnkfelix> Kelet: but I do not think this is your problem
[15:26:04] <Amaranth> Oh neat
[15:26:10] <kimundi> 1_000_000_u64
[15:26:19] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[15:26:31] <Amaranth> Oh rust just ignores underscores in numeric literals in general?
[15:26:37] <kimundi> yeap
[15:26:44] <kimundi> As long as it doesn't start with one
[15:26:45] <Amaranth> Didn't read that part of the specification :P
[15:26:52] <kimundi> because then it would be an identifier :P
[15:26:58] <pnkfelix> rusti: 0b0010_0100
[15:27:06] <kimundi> let _0 = 0_u;
[15:27:18] <dbaupp> 1._1 doesn't work either
[15:27:20] <engla> rust has binary literals?
[15:27:23] <kimundi> haha
[15:27:31] <dbaupp> engla: yes, binary, hex and decimal
[15:27:33] <pnkfelix> Wow, did strcat actually go ahead and change rusti to stop responding in channel ?
[15:27:34] <kimundi> let u_0 = 0_u;
[15:27:34] <engla> nice
[15:27:41] <engla> death to octal
[15:27:48] <kimundi> pnkfelix: nope, it's a bug
[15:27:57] <kimundi> pnkfelix: Or rather, bad channel mode set
[15:28:12] <kimundi> pnkfelix: Not intentional at least
[15:28:14] *** Joins: dlawler (evenodder@moz-C2B9B64C.hsd1.ca.comcast.net)
[15:28:26] <engla> was it the +T mode?
[15:28:50] <kimundi> What does +T do anyway. Actually, what does any of the modes do anyway?
[15:29:39] <dbaupp> "Notice Block. Doesn't allow users to send notices to the channel."
[15:29:51] <dbaupp> (apparently, http://webtoman.com/opera/panel/ircdmodes.html)
[15:29:57] *** Joins: jdm (jdm@moz-2C5514D1.lightspeed.sntcca.sbcglobal.net)
[15:29:57] *** ChanServ sets mode: +o jdm
[15:29:58] <Ms2ger> T = No NOTICEs allowed in the channel [o]
[15:30:04] <Ms2ger> /helpop CHMODES
[15:30:19] *** Quits: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net) (Ping timeout)
[15:30:25] <Amaranth> helpop? old school
[15:30:39] <kimundi> hm
[15:31:17] <kimundi> Someone wanna reenable it?
[15:31:25] <Ms2ger> jdm?
[15:31:44] <jdm> whoops
[15:31:46] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:31:54] <jdm> what mode are we missing?
[15:32:06] <kimundi> T blocks rusti
[15:32:41] <Ms2ger> We need to remove T :)
[15:32:51] *** jdm sets mode: -T 
[15:33:01] <kimundi> rusti: "yay"
[15:33:02] -rusti- "yay"
[15:33:04] <AlisonW> any chanop can remove the T
[15:33:05] <engla> rusti: "hello world!"
[15:33:06] -rusti- "hello world!"
[15:33:12] <Ms2ger> There we are
[15:33:16] <Amaranth> That reminds me, I need to turn that alert off
[15:33:22] <kimundi> haha
[15:33:35] <Amaranth> Wish my client could turn it off only for rusti
[15:34:03] <Amaranth> Notices are usually used by services on other networks which are nice to get alerts for
[15:34:15] <Amaranth> Oh well
[15:34:30] <kimundi> Amaranth: Funny thing is though, the rusti usecase is exactly what NOTICEs are for ;)
[15:35:40] <AlisonW> has anyone made a Rust plugin for geshi yet?
[15:36:36] *** Quits: skoizza (Mibbit@5A3CC015.E8B6FA7D.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:36:36] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[15:36:50] <dbaupp> https://github.com/mozilla/rust/pull/9096 concurrency advice? (on the pr please, /me is going to bed)
[15:38:05] * AlisonW has answered on question ... https://github.com/astavonin/GeSHi-Rust
[15:39:01] <kimundi> AlisonW: Last change 7 monts ago... The answer might just as well be 'no' ;)
[15:39:21] *** Quits: jaen (jaen@moz-47C72412.play-internet.pl) (Ping timeout)
[15:39:25] <AlisonW> true, but it is something that I can easily update. Will fork ...
[15:39:34] <kimundi> Ah, it's not actually rust code.... That's not that bad
[15:39:50] <AlisonW> code highlighting online, basically
[15:40:04] <kimundi> Definitly need to overhaul the keyword list in there :P
[15:40:14] <AlisonW> actually, last update 23 days ago
[15:40:32] <kimundi> ... do'h
[15:40:36] * kimundi can't read
[15:40:49] <AlisonW> ah .. .but in the code "* 2012/04/07 (0.1)" is latest change in header block
[15:41:13] *** Joins: bent_ (chatzilla@FC9FC902.ED95B50E.EDDC15BA.IP)
[15:41:20] <kimundi> Well, at first glance I see a few not-anymore keywords
[15:41:43] *** Quits: bent (chatzilla@moz-6F843AD8.static.cust.telenor.com) (Ping timeout)
[15:41:50] <kimundi> like copy and move
[15:42:00] *** bent_ is now known as bent
[15:42:07] <kimundi> did we ever have 'empty' ?!?
[15:42:55] <kimundi> seems more like a keyword+some list the longer I read it
[15:42:59] *** bent is now known as IRCMonkey51255
[15:43:08] *** Joins: lbergstrom (Adium@moz-BBE3ABD.mv.mozilla.com)
[15:44:03] *** IRCMonkey51255 is now known as bent
[15:44:34] *** Quits: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net) (Ping timeout)
[15:46:28] *** Quits: jgilbert (jgilbert@moz-67020FBB.mycingular.net) (Quit: Leaving)
[15:50:35] *** Joins: Florob (Florob@moz-39532932.de)
[15:51:35] *** Quits: KindOne (KindOne@moz-8522362F.dynamic.ip.windstream.net) (Ping timeout)
[15:55:30] *** Joins: KindOne (KindOne@moz-C99012F.dynamic.ip.windstream.net)
[15:57:13] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[15:58:46] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[15:59:00] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[16:00:39] *** Joins: dave1629 (dave@AFFCDBA8.7F21D601.DDE5D3F6.IP)
[16:00:57] <olsonjeffery> rusti: "many happy returns"
[16:00:58] -rusti- "many happy returns"
[16:02:44] *** Joins: veddan (viktor@moz-C79BC80B.csbnet.se)
[16:02:53] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[16:05:02] *** Quits: KindOne (KindOne@moz-C99012F.dynamic.ip.windstream.net) (Ping timeout)
[16:05:29] <olsonjeffery> anyone from the core team around?
[16:05:43] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[16:05:46] <pnkfelix> olsonjeffery: For servo, or for rust?
[16:05:51] <olsonjeffery> rust
[16:05:52] *** Joins: CanhTak (jeremy@moz-147142FA.wl.t.ulaval.ca)
[16:05:57] *** Joins: aeqwa (aeqwa@moz-BF4ACB23.dsl.tropolys.de)
[16:05:59] <pnkfelix> olsonjeffery: what is your Q?
[16:06:03] <olsonjeffery> i have something i want to get onto the agenda for a quick discussion at the weekly meeting
[16:06:17] <pnkfelix> olsonjeffery: Okay, what is?
[16:06:24] <pnkfelix> olsonjeffery: (what is it)
[16:06:31] <olsonjeffery> ive spoken with lifthrasiir about getting together a PR to pull the encoding traits into the main rust tree, based on some feedback about impl'ing error modes in the whatwg spec
[16:06:47] <olsonjeffery> we have the prelim API sketched out.. he would do the work in rust-encodings and make a PR to mozilla/rust with the traits
[16:07:05] <olsonjeffery> beachhead established, then we can have a discussion, in the community, about what encodings (if any) to impl in-tree
[16:07:24] *** Joins: fyolnish (fyolnish@moz-A51F01DB.uqwimax.jp)
[16:07:36] <olsonjeffery> this is the proposed API, which is very close to what's already in rust-encodings: http://pastebin.mozilla.org/3010199
[16:07:52] *** Joins: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net)
[16:08:19] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[16:08:24] *** Quits: josh (josh@moz-357ADCEA.hsd1.mn.comcast.net) (Quit: josh)
[16:08:42] <olsonjeffery> that's it, really.
[16:09:04] *** Joins: _1126_ (1126@moz-83D60E55.lileth.net)
[16:09:17] *** Quits: _1126_ (1126@moz-83D60E55.lileth.net) (Quit: leaving)
[16:09:21] *** Joins: KindOne (KindOne@moz-C99012F.dynamic.ip.windstream.net)
[16:09:24] *** Joins: _1126_ (1126@moz-83D60E55.lileth.net)
[16:09:31] <olsonjeffery> there are several peripheral issues, like optimally representing utf16 strings natively in rust, etc, that would influence a general encoding/decoding API
[16:09:42] <kimundi> Hm, are the trait objects in Encoding necessary?
[16:09:52] <olsonjeffery> SimonSapin: ^
[16:10:06] *** Quits: _1126 (1126@moz-83D60E55.lileth.net) (Ping timeout)
[16:10:06] *** Quits: _1126_ (1126@moz-83D60E55.lileth.net) (Quit: leaving)
[16:10:19] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[16:10:21] <pnkfelix> olsonjeffery: I did not keep track of all of the discussion surrounding this.  Why is there so little contextual info being fed back from the error cases? Is that deliberate, or is it just something to be fleshed out later in the API?
[16:10:34] <olsonjeffery> pnkfelix: that's as per the whatwg spec
[16:11:14] *** Joins: jgilbert (jgilbert@moz-67020FBB.mycingular.net)
[16:11:16] <pnkfelix> olsonjeffery: by which you mean this: http://encoding.spec.whatwg.org/ ?
[16:11:19] <engla> olsonjeffery: I'm suggesting that we provide byte offset and the invalid byte(s) when we meet a fatal decoding error
[16:11:39] <olsonjeffery> pnkfelix: yes, specifically http://encoding.spec.whatwg.org/#error-handling-mode
[16:11:49] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[16:12:23] *** Joins: _1126 (1126@moz-83D60E55.lileth.net)
[16:12:28] <olsonjeffery> engla: fair enough.
[16:12:59] <olsonjeffery> pnkfelix: this isn't the final API. as you can see, there're more than a few differences of opinion and things that can be worked out.
[16:13:04] <kimundi> how about enum DecodeErrorHandling { Fatal, Replacement, Custom(&fn(invalid: &[u8]))} or so?
[16:13:18] <olsonjeffery> and im not an "encodings person", at all. im just cat herding on this topic because no one else seems to want to.
[16:13:40] <pnkfelix> olsonjeffery: right.  That leads into the other question, which is, whether this is actually fleshed out enough for discussion at the meeting.  I guess I can at least make sure people present are aware that this is going on
[16:13:44] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[16:13:46] <olsonjeffery> im just trying to figure out if this general approach (pull in high-level traits, defer impls until later) is something worth moving forward with
[16:13:54] *** Quits: squiddy (squiddy@moz-D32163A1.adsl.alicedsl.de) (Ping timeout)
[16:14:02] <olsonjeffery> or if i should just dump everything in front of the community, via rust-dev, and let "something" happen there
[16:14:05] <olsonjeffery> 1) ask the list
[16:14:07] <olsonjeffery> 2) ???
[16:14:11] <olsonjeffery> 3) a PR
[16:15:15] <olsonjeffery> kimundi: that's a good idea. thank you.
[16:16:00] <olsonjeffery> engla: and the same with you.. so it'd go, i gather, in the Err position of the Result<(),()> that is returned now.. what would you suggest, there?
[16:16:09] *** Quits: jstevans (Instantbir@A8E37DBC.BB5A23D8.DDE5D3F6.IP) (Ping timeout)
[16:16:25] <olsonjeffery> and if we provide the offset, couldn't we just do offset + len, instead?
[16:16:47] <engla> you mean that either we provide the total offset or the offset into the current "feed"?
[16:16:48] <olsonjeffery> i guess neither one is particularly more performant to compute/return. six of one, half dozen of the other..
[16:16:51] <kimundi> olsonjeffery: well, offset + len is the same as &[u8], so imo might just directly provide that :P
[16:17:05] <engla> oh olsonjeffery I see
[16:17:17] *** Joins: jstevans (Instantbir@A8E37DBC.BB5A23D8.DDE5D3F6.IP)
[16:17:21] <olsonjeffery> offset from the start of the feed, plus len of bad byte(s)
[16:17:27] <engla> olsonjeffery: to be spartan it could be just the indices into the current feed
[16:17:29] <olsonjeffery> count from offset, i should say
[16:17:34] <kimundi> And imo the offset should only be relative to the current chunk
[16:17:49] <engla> keeping a global count is not hard though
[16:18:05] <kimundi> Cause in th end the Decoder has no idea if the offset it calculates is global consistent?
[16:18:06] <olsonjeffery> kimundi: the API doesn't work on streams, but on discrete vectors of bytes
[16:18:22] *** Quits: dlawler (evenodder@moz-C2B9B64C.hsd1.ca.comcast.net) (Quit: dlawler)
[16:18:34] <kimundi> olsonjeffery: Right. Basically I'm very of rembering state between two feed() calls
[16:18:37] <engla> kimundi: it keeps state, so from the first byte it has seen
[16:18:49] <olsonjeffery> kimundi: that api implies statelessness, i think..
[16:18:50] <engla> ok
[16:19:01] <engla> olsonjeffery: no it does not for multibyte encodings
[16:19:14] *** Joins: dlawler (evenodder@moz-C2B9B64C.hsd1.ca.comcast.net)
[16:19:41] <olsonjeffery> engla: but it seems like, in that case, you would deduce that it failed on the last byte or a byte index that is within encoding_size bytes from the end of the vector
[16:19:42] <engla> olsonjeffery: if a multibyte is incomplete at the end of a feed, you store it in the queue or slop, and resume from there the next feed
[16:19:44] <olsonjeffery> so the caller should infer that
[16:19:53] <engla> or, if flush is called with non-empty slop, you error
[16:19:55] <olsonjeffery> pop the offending bytes off the end, prepend to the next chunk
[16:19:59] <olsonjeffery> and then feed() again
[16:20:21] <engla> so you'd have to feed back the tail of the previous buffer?
[16:20:22] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[16:20:32] <olsonjeffery> oh, yeah. flush. i forgot about that.
[16:20:40] <olsonjeffery> that's definitely the stateful part. heh.
[16:20:46] <engla> it sounds like shifting a lot of work to the caller
[16:20:53] <engla> that should be encapsulated
[16:20:56] * olsonjeffery nods
[16:22:09] <engla> maximum slop needed for UTF-8 is 3 bytes.
[16:22:38] <engla> so it's not a lot
[16:22:43] <olsonjeffery> the price of stateless services is eternal vigilence!
[16:22:53] <olsonjeffery> im being facetious. point taken.
[16:22:57] <pnkfelix> olsonjeffery: okay.  It seems to me like there's clearly work to be done, but I'll just spend a few minutes in the mtg making sure others are aware of the ongoing work, and let them know whom to contact.  The main points of contact here areâ€¦ olsonjeffery, SimonSapin (?) , and â€¦ ?
[16:23:07] <kimundi> I think I identified what makes me suspicious of the current sketch in that paste.
[16:23:48] <olsonjeffery> pnkfelix: + lifthrasiir, the owner of rust-encodings
[16:23:50] <olsonjeffery> and thank you.
[16:23:51] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[16:23:57] *** Quits: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[16:24:23] <olsonjeffery> (and if anyone wants to step up to spearhead this, given my ignorance on this topic, by all means...)
[16:24:26] <kimundi> feed() and flush() aren't methods! Hence my mind keeps treading them as standalone functions that aren't tightly coupled to some state :P 
[16:24:27] *** Quits: dlawler (evenodder@moz-C2B9B64C.hsd1.ca.comcast.net) (Quit: dlawler)
[16:24:42] *** Quits: dave1629 (dave@AFFCDBA8.7F21D601.DDE5D3F6.IP) (Quit: dave1629)
[16:25:10] <kimundi> olsonjeffery: He, if I had time i would. I'm afraid you just stumbled into something where everyone has different opinions :)
[16:25:12] <olsonjeffery> kimundi: good point.
[16:25:49] <pnkfelix> olsonjeffery: I'm not an expert in this area, so I won't be able to champion any one approach over another.  My main experience is seeing first-hand what can go wrong with API's, and end up with something that doesn't compose properly.
[16:26:04] <pnkfelix> olsonjeffery: but I'll pass along the info as best I can
[16:26:40] <kimundi> let e = UTF8Encoder::new(&mut some_vec); for s in read_data() { e.feed(s); }; e.flush();
[16:26:56] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[16:26:56] *** ChanServ sets mode: +ao pcwalton pcwalton
[16:27:09] <pnkfelix> olsonjeffery: how does the interface you pasted compare against the one that SimonSapin sent to rust-dev 40 minutes ago?
[16:27:21] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[16:28:08] <engla> this paste is simon's as well
[16:28:11] <olsonjeffery> yeah
[16:28:16] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[16:28:23] <olsonjeffery> the one in the email is newer and better proofread, afaik (it has methods)
[16:28:30] *** Joins: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se)
[16:28:34] <olsonjeffery> and ty for pointing out this email, i hadn't seen it
[16:28:39] <engla> me neither
[16:28:49] <olsonjeffery> probably its moot to discuss it at the meeting, as simon as brought it before the community
[16:28:52] <olsonjeffery> so let's just go from there
[16:29:10] *** Quits: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se) (Client exited)
[16:30:08] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[16:30:36] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[16:30:36] *** ChanServ sets mode: +ao dherman dherman
[16:30:38] <pnkfelix> olsonjeffery: okay.  He didn't name any names in the email for who is leading this work, but that is okay.
[16:31:18] *** Quits: wting (wting@CB5A13C8.2A6289A6.9510F13D.IP) (Quit: leaving)
[16:31:52] <olsonjeffery> pnkfelix: i wouldn't say im leading anything, i just keep bringing it up over and over :)
[16:32:34] <pnkfelix> olsonjeffery: right.  Sometimes "leader" just means "central points of contact".  And sometimes I guess it means "squeakiest wheel."
[16:33:07] *** Joins: krdln (Mibbit@moz-6F8A8560.dynamic.chello.pl)
[16:34:04] *** Quits: huseby (huseby@moz-633A76FB.static.cust.telenor.com) (Quit: Leaving)
[16:35:37] *** Joins: huseby (huseby@moz-633A76FB.static.cust.telenor.com)
[16:35:56] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[16:37:27] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[16:38:38] *** Quits: jdm (jdm@moz-2C5514D1.lightspeed.sntcca.sbcglobal.net) (Ping timeout)
[16:38:44] *** Joins: miza (miza@moz-4DD51325.home.otenet.gr)
[16:38:54] *** Joins: mib_i86ymk (Mibbit@72AFAE5.FF33B58F.2525DB71.IP)
[16:41:51] *** Joins: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP)
[16:41:59] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[16:42:08] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[16:44:47] *** Joins: echristo (echristo@60A74940.D6CCE4AE.77834EAA.IP)
[16:44:52] *** Quits: huseby (huseby@moz-633A76FB.static.cust.telenor.com) (Quit: Leaving)
[16:47:31] *** Quits: six600110 (six600110@moz-2FA48202.neo.res.rr.com) (Client exited)
[16:48:08] *** Joins: jdm (jdm@moz-BBE3ABD.mv.mozilla.com)
[16:48:08] *** ChanServ sets mode: +o jdm
[16:48:28] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: Leaving)
[16:48:34] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[16:48:56] *** Quits: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP) (Ping timeout)
[16:50:27] *** Joins: mihneadb (Mihnea@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:52:50] *** Joins: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com)
[16:52:59] *** Joins: dave1629 (dave@25EF71AB.3C990DFD.DDE5D3F6.IP)
[16:53:05] *** Quits: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net) (Ping timeout)
[16:53:31] *** Quits: miza (miza@moz-4DD51325.home.otenet.gr) (Input/output error)
[16:53:32] *** Joins: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com)
[16:54:14] *** Joins: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net)
[16:54:18] *** Quits: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net) (Ping timeout)
[16:55:54] *** Joins: wting (wting@4F978BD6.5564A9BA.9510F13D.IP)
[16:56:16] *** Quits: lbergstrom (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[16:56:35] *** Quits: a__ (a__@moz-25043B93.nycmny.fios.verizon.net) (Client exited)
[16:56:47] *** Joins: lbergstrom (Adium@moz-BBE3ABD.mv.mozilla.com)
[16:57:35] *** Joins: a__ (a__@moz-25043B93.nycmny.fios.verizon.net)
[16:57:49] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[16:57:49] *** ChanServ sets mode: +ao brson brson
[16:58:02] <olsonjeffery> SimonSapin: that email is awesome. thank you very much for writing it.
[16:58:57] <olsonjeffery> and based on your earlier pastebin of a version of that API, lifthrasiir agreed to adjust the rust-encodings API along those lines.. and depending on how the current discussion goes, there would be a PR to bring those traits into mozilla/rust
[16:59:40] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[16:59:40] *** ChanServ sets mode: +o tjc
[17:00:08] *** Joins: kauschovar (kauschovar@moz-471C668F.hsd1.ca.comcast.net)
[17:01:56] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[17:01:56] *** ChanServ sets mode: +o pnkfelix
[17:02:10] <pnkfelix> what room for mtg?
[17:02:39] <pnkfelix> brson: ^
[17:02:45] *** Joins: riley (riley@8BA43816.9AA11D69.65DDFA89.IP)
[17:02:59] <pnkfelix> azita: ^
[17:03:19] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[17:03:27] <azita> GIGO
[17:03:36] *** Quits: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net) (Ping timeout)
[17:03:46] <pnkfelix> azita: merci
[17:04:36] <cmr> pnkfelix: would it be possible for me to dial in and listen?
[17:05:40] *** Joins: huseby (huseby@96211BDE.83CC6402.D9CD682B.IP)
[17:08:19] <Kelet> Is there a defined release structure/timing for Rust?
[17:08:23] <Kelet> (How long until 0.8?)
[17:08:29] <kimundi> Kelet all 3 months
[17:08:33] <Kelet> Alright, thanks
[17:08:37] <kimundi> last 2 months ago
[17:08:45] <kimundi> Next month 0.8 :P
[17:09:08] <strcat> Kelet: they are just tagged on master every 3 months at this point
[17:09:22] <strcat> they're not supported stable releases, just milestones
[17:09:48] <strcat> since it gives an opportunity to document stuff via release notes, etc.
[17:09:57] *** Joins: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net)
[17:11:37] *** Quits: mib_i86ymk (Mibbit@72AFAE5.FF33B58F.2525DB71.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:11:59] *** Joins: jlw8k_000 (chatzilla@moz-D7012B80.bootp.virginia.edu)
[17:12:47] <kimundi> SimonSapin, (and olsonjeffery) - I'm looking over the proposed design on rust-dev, and am confused about a few design choices. I'm currently hacking around with it to see if I'm just misunderstanding things, but i think a few things are... odd.
[17:13:07] <Kelet> I can't really tell, because it's mostly in issues that don't have a lot of what I can discern as official feedback but
[17:13:08] <olsonjeffery> kimundi: sure, what up?
[17:13:34] <indutny> hey people
[17:13:41] <Kelet> Is Rust looking to support both MinGW and MSVC or is it all unofficial at this point? It would be nice if it supported both MinGW64 and MSVC.
[17:13:47] <SimonSapin> kimundi: spotty internet here, please write email
[17:13:54] <Kelet> There are issues for all the aforementioned but I can't really tell what's going on in terms of support.
[17:13:59] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:14:05] <SimonSapin> kimundi: itâ€™s a proposal, meant to evolve
[17:14:21] <Kelet> And in terms of Windows the documentation for building it seems outdated on the Wiki although I'm not really sure howso (Although the LLVM issue for <4.6 seems to have been solved).
[17:14:21] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[17:14:32] *** Quits: fyolnish (fyolnish@moz-A51F01DB.uqwimax.jp) (Client exited)
[17:14:38] <kimundi> SimonSapin: Sure, no problem. :)
[17:14:39] <Ralith> Kelet: I'd guess that rust is looking to support whatever contributors are looking to submit support patches for.
[17:14:43] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:14:45] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Connection reset by peer)
[17:14:52] <strcat> Kelet: in the long-term it will likely not use either mingw-w64/msvc but just stick to LLVM's platform
[17:15:08] <Kelet> Well - I mean, in terms of what can compile it.
[17:15:32] <strcat> all it needs from mingw is the linker
[17:15:42] <strcat> because lld isn't mature yet
[17:15:50] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[17:16:05] <Kelet> So for Rust to compile itself all it needs is the linker from mingw, and the rest is self-contained?
[17:16:28] <strcat> it needs a C++ compiler for a bit of the runtime
[17:16:37] <olsonjeffery> the weekly rust meetings are only an hour, right?
[17:16:39] <strcat> but we'll likely end up using libclang again at some point
[17:16:46] <Kelet> Why does Rust need Python, Perl?
[17:17:02] *** Joins: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net)
[17:17:15] <strcat> rust has a few python scripts
[17:17:19] <strcat> it doesn't need perl directly
[17:17:24] <indutny> trying to port linearscan.rs to new rust
[17:17:29] <indutny> having some problems right now
[17:17:29] <indutny> error: expected std::iterator::Iterator<linearscan::graph::IntervalId>, but found std::iterator::Iterator<&linearscan::graph::IntervalId> (expected struct linearscan::graph::IntervalId but found &-ptr)
[17:17:49] <indutny> basically, I'm doing some mapping on vec::VecIterator in my custom methods
[17:17:58] <indutny> and returning iterator::Map to another function
[17:18:05] <indutny> in which I'm trying to iterator on it
[17:18:07] <engla> indutny: the vector iterator uses pointers to the elements, &T if the element type is T
[17:18:09] <indutny> and getting error from the above
[17:18:14] <strcat> it expected an Iterator<T> and found Iterator<&T>
[17:18:18] <indutny> well
[17:18:20] <indutny> the problem is
[17:18:33] <indutny> that this iterator is actually (IntervalId, R, InstrId)
[17:18:41] <indutny> not just (&IntervalId) or whatever
[17:18:42] *** Quits: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net) (Ping timeout)
[17:19:03] <indutny> also, I don't have any type restrictions on variables inside for loop
[17:19:08] <indutny> its just pushing them to the mutable list
[17:19:23] <Kelet> And I guess a basic question, as I'm misunderstanding the pointers. Why do most structs/enums use ~str instead of str? I'm not sure if I see the benefit of this.
[17:19:34] <engla> indutny: pastebin the code maybe? gist.github.com has rust syntax coloring ^^
[17:19:53] <indutny> engla: its there https://github.com/indutny/linearscan.rs
[17:19:53] <strcat> Kelet: str isn't a type
[17:20:01] <Kelet> doh.
[17:20:10] <indutny> engla: you can run `make` in the project's root
[17:20:18] *** Quits: jlw8k_000 (chatzilla@moz-D7012B80.bootp.virginia.edu) (Ping timeout)
[17:20:30] <strcat> Kelet: ~str/@str/&str are not ~T/@T/&T (same with vectors)
[17:20:41] *** Joins: fyolnish (fyolnish@moz-A51F01DB.uqwimax.jp)
[17:21:40] <cmr> Kelet: strings are unsized, so you always need a pointer to them,
[17:22:16] <Kelet> let test: str = "Test"
[17:22:19] <Kelet> that is invalid?
[17:22:24] <cmr> Yes.
[17:22:33] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[17:22:39] <engla> indutny: which source file is it?
[17:22:40] <strcat> "test" is an &'static str
[17:22:49] <indutny> src/linearscan/allocator.rs
[17:22:50] <strcat> (a &str with a static lifetime)
[17:22:51] <indutny> engla: ^
[17:23:59] <Kelet> OK, I didn't realize strings are "implemented with vectors of u8" 
[17:24:03] *** Joins: jmgrosen (jmgrosen@moz-916CF0AA.sd.sd.cox.net)
[17:24:07] <Kelet> I understand now thanks
[17:24:45] *** Joins: ofeldt (ofeldt@moz-E5D280DA.dip0.t-ipconnect.de)
[17:24:57] <indutny> engla: fn iter_active()
[17:25:16] *** Joins: tikue (tkuehn@961CBB8C.E6CB677E.689607DE.IP)
[17:25:17] <kimundi> Kelet: The problem is that most types have a size in bytes known at compile time. However, for a bare str or [T] that is not the case, as they are a dynamically determined amount of bytes somewhere in memory.  Because of that, both ~str and &str are special types that encode the length of the vector they point at in the pointer itself - a &str is literally just (ptr to u8, size)
[17:25:41] *** Quits: ofeldt- (ofeldt@moz-74B39EEE.dip0.t-ipconnect.de) (Ping timeout)
[17:26:09] <strcat> ~str is just a pointer, atm
[17:26:09] <indutny> engla: I think I've figured out the most of it
[17:26:10] <indutny> thanks
[17:26:15] <strcat> although I think that's the wrong perf tradeoff
[17:26:19] <indutny> I was using wrong type for FilterMap
[17:26:30] <engla> ~str and &str could be two separate types implemented in Rust, same with ~[] and &[]. but these have useful language support as it is
[17:26:30] <strcat> + it makes everything more complicated since you have to deal with uint overflow
[17:27:16] <engla> indutny: it's not that easy to get into this code with a quick read sorry :)
[17:27:22] <indutny> np
[17:27:24] <indutny> thank you!
[17:27:34] <indutny> failed to find an implementation of trait std::clone::Clone for extra::smallintmap::SmallIntMap<~extra::smallintmap::SmallIntMap<linearscan::graph::IntervalId>>
[17:27:35] <indutny> btw
[17:27:39] <indutny> can't I clone SmallIntMap?
[17:27:47] *** Quits: echristo (echristo@60A74940.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[17:27:51] <indutny> it looks like it was working a couple of months before
[17:28:09] *** Joins: SingingBoyo (brandon@moz-50CD4DCD.ubcsecure.wireless.ubc.ca)
[17:29:04] <engla> hah, indeed the clone is missing
[17:29:53] *** Quits: SingingBoyo (brandon@moz-50CD4DCD.ubcsecure.wireless.ubc.ca) (Ping timeout)
[17:29:57] *** Joins: eatkinson (eatkinson@E5442022.772DB3ED.90B17E8F.IP)
[17:30:05] <engla> strcat: don't you have to deal with uint overflow anyway?
[17:30:10] <engla> at least to some extent
[17:30:12] <strcat> no
[17:30:13] *** Quits: jmgrosen (jmgrosen@moz-916CF0AA.sd.sd.cox.net) (Ping timeout)
[17:30:18] <strcat> not if you have a data ptr
[17:30:52] <strcat> you only have to deal with it in the allocator that way
[17:31:12] <strcat> atm you have to deal with it in many more places because you have to glue on the header
[17:31:17] <engla> hm. You know my "hazards with overflow" issue? Some of those errors pointed out there would still be an issue
[17:31:20] <engla> yeah
[17:31:29] <engla> maybe I should work on that issue..
[17:31:37] <strcat> alloc<T>(n: uint)
[17:31:39] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[17:31:45] <strcat> can deal with OOM on overflow internally
[17:31:53] *** Joins: jmgrosen (jmgrosen@moz-916CF0AA.sd.sd.cox.net)
[17:31:59] <strcat> like, it can just consider overflow to be OOM
[17:32:28] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[17:32:34] <strcat> if you have some ridiculous # of elements where multiplying by the size overflows uint
[17:32:56] <engla> alloc(self.len() + other.len()); /* proceed as if alloc succeeded, in  reality we had overflow and allocated to size  `2` */
[17:33:04] <Ms2ger> Presumably you wouldn't need to multiply by the size for alloc<T>
[17:33:09] <engla> anyone adding sizes has to handle overflow
[17:33:16] <strcat> engla: you wouldn't ever be adding sizes
[17:33:17] <Ms2ger> But yeah, you're getting overflow anyway
[17:33:27] <engla> strcat: hm, why not?
[17:33:30] <strcat> Ms2ger: alloc<T> would multiply internally
[17:33:33] *** Quits: jmgrosen (jmgrosen@moz-916CF0AA.sd.sd.cox.net) (Ping timeout)
[17:33:42] <strcat> engla: why would you be? you deal with element counts and the block allocator handles it
[17:33:49] <strcat> like C++
[17:34:02] <engla> strcat: I think I'm thinking of the higher layer. Not the allocator, but the code in std::vec
[17:34:10] <engla> it literally does things like my example right now
[17:34:11] <strcat> it wouldn't store bytes
[17:34:14] <strcat> it would store element counts
[17:35:43] *** Joins: jlw8k_000 (chatzilla@B1B861E8.17A0D1EC.B7830B68.IP)
[17:35:57] *** Quits: jgilbert (jgilbert@moz-67020FBB.mycingular.net) (Ping timeout)
[17:35:59] <strcat> engla: it's better for it to always use push than try checking for overflow in all sorts of places
[17:36:04] <engla> here is an example  https://github.com/mozilla/rust/blob/2690b513506dad53d0b86b20f8b73bc420dfb3a2/src/libstd/vec.rs#L1403
[17:36:20] <engla> ironically it has a comment saying "infallible"
[17:36:26] <strcat> engla: well that's an unsafe broken micro-optimization
[17:36:38] <strcat> it's not the normal way of doing it
[17:36:49] <engla> for sure. You can't do much wrong outside unsafe {}
[17:36:56] <engla> but this is what we do right now
[17:36:59] <strcat> the normal way is to reserve (which can overflow, that's fine) and then push a bunch of times
[17:37:04] <engla> and it's a problem that uint overflow is not checked
[17:37:36] *** Joins: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP)
[17:38:00] <engla> strcat: did you know that reserve_at_least overflows even earlier? ^^
[17:38:19] <engla> it rounds up to the next power of two, even if the next higher power of two "is" 0
[17:38:21] *** Quits: tikue (tkuehn@961CBB8C.E6CB677E.689607DE.IP) (Quit: tikue)
[17:38:48] <Ms2ger> Clearly overflow should be checked by default
[17:39:08] <engla> clearly people writing code inside unsafe {  }  should be careful
[17:39:14] <strcat> Ms2ger: and do what if it overflows?
[17:39:18] *** Quits: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP) (Ping timeout)
[17:39:21] <Ms2ger> fail!()?
[17:39:48] <strcat> and then rust would be slower than java :s
[17:39:58] <strcat> and every case of overflow would still be a bug
[17:40:21] <engla> strcat: you just want to move it to be checked in one location
[17:40:46] <strcat> engla: yeah I agree that std::vec is very problematic for several reasons ;p
[17:41:03] <strcat> I just think the header part is unnecessary complication, making it worse
[17:42:28] *** Quits: nkoep (nik@moz-79B329C7.pool.mediaways.net) (Ping timeout)
[17:43:04] <strcat> with { length, capacity, data* } a move is a 3-word copy, but an empty vector doesn't allocate and the overflow cases are simpler (since you mostly have to just check that size * count doesn't overflow, not size * count + header)
[17:43:18] <engla> that's nice
[17:43:38] <strcat> and tbh @[T] is pretty close to useless :P
[17:43:50] <strcat> you need @~[T] to be able to resize
[17:43:58] <strcat> @mut ~[T] *
[17:44:21] <engla> wouldn't this be part of DST if this were to change?
[17:44:31] <strcat> I don't think it should be
[17:44:42] <strcat> imo it doesn't make sense for vectors/strings to be tied closely to ~/@/&
[17:45:11] <engla> do you want Vec to be a library type?
[17:45:22] <strcat> you want a vector you can resize (~[T]), a borrowed slice (&[T]), and gc'ed slices (we don't have this)
[17:45:24] <kimundi> DST: Are not directly related to this: the representation can still remain arbitrary due to monomorpsation
[17:45:40] <engla> ok kimundi
[17:45:46] <strcat> engla: don't care if it's language/library
[17:46:02] <pcwalton> I think checking for overflow is a good idea
[17:46:10] <pcwalton> by default
[17:46:11] <kimundi> he, meant to write 'engla' instead of 'DST' there :)
[17:46:25] <pcwalton> there's a paper by CERN (I think?) showing less than 2% slowdown
[17:46:27] <pcwalton> in gcc
[17:46:35] <pcwalton> "as if infinitely ranged" is the term to google for
[17:46:36] *** Joins: jdsanders (Adium@moz-8527430D.hlrn.qwest.net)
[17:46:55] <kimundi> pcwalton: Sounds like it should at least be tried then. :)
[17:47:02] <strcat> pcwalton: I think it would be much worse than that, due to code size
[17:47:13] <pcwalton> strcat: read the paper
[17:47:26] <pcwalton> :)
[17:47:26] <engla> pcwalton: we just have a couple of overflow + unsafe code bugs in the core types vec and str  https://github.com/mozilla/rust/issues/8742
[17:47:46] <engla> I think it's an argument for less unsafe {} code. Or just auditing it :)
[17:48:06] *** Joins: jclements (jclements@moz-9C0ABCFC.wireless.calpoly.edu)
[17:48:11] <strcat> pcwalton: I would rather just encourage using a python-like bigint by default
[17:48:20] <strcat> because failing on overflow will still be a bug
[17:48:27] <strcat> expanding to a bigint won't be, in most cases
[17:48:43] <Ralith> strcat: re: LLVM's platform: it'll still need a libc, no?
[17:48:43] <pcwalton> it's a bug but not an exploitable one
[17:48:50] <pcwalton> I mean
[17:48:53] <pcwalton> bigints can still OOM
[17:48:56] <strcat> uint for sizes, fixed-size ones for things like crypto/compression, flexible ones expanding to a bigint for application logic
[17:49:41] <cmr> pcwalton: http://www.sei.cmu.edu/reports/10tn008.pdf ?
[17:50:16] *** Quits: jstevans (Instantbir@A8E37DBC.BB5A23D8.DDE5D3F6.IP) (Ping timeout)
[17:50:33] <cmr> 5.58 - 6.96% slowdown depending on optimization level.
[17:50:47] *** Joins: tikue (tkuehn@961CBB8C.E6CB677E.689607DE.IP)
[17:50:54] <strcat> on what kind of workload?
[17:51:03] <cmr> specint2006
[17:51:06] *** Joins: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP)
[17:51:51] * cmr bookmarks the paper
[17:52:04] <engla> how much overhead can we afford when the workload is "computing allocation sizes"  ;-)
[17:52:11] <strcat> enum Integer { Small(uint), Large(BigInt) } + use the checked_* intrinsic-based ones, and expand
[17:52:34] <strcat> engla: well for these we can just use the checked methods, it's not like it's numeric code where you really need operator overloading
[17:52:51] <engla> yes
[17:53:22] <engla> should I try to solve the issues I've linked or do you have anything in mind strcat?
[17:53:37] <strcat> engla: I don't have anything specifically in mind for vec
[17:53:46] <engla> otherwise I'll take your advice and try to boil it down to less unsafe code
[17:53:51] <strcat> it would be good to remove more code and simplify it, yeah :)
[17:54:10] <tikue> how would the lambda calculus be represented in rust? enum Tp<T> { Var(T), Lambda(~Tp, ~Tp), Apply(~Tp, ~Tp) } ??
[17:55:12] *** Quits: jlw8k_000 (chatzilla@B1B861E8.17A0D1EC.B7830B68.IP) (Ping timeout)
[17:56:15] *** Joins: devin909 (Mibbit@moz-49ABA22A.bootp.virginia.edu)
[17:56:33] <tjc> tikue: Lambda(T, ~Tp), no?
[17:56:50] <tikue> tjc: it'd be Var(T) but that can't be represented in an enu
[17:56:50] <devin909> if we have ~[~str] as the return type, how do you dereference the string inside?
[17:56:53] <tikue> enum*
[17:56:58] <tikue> i think?
[17:57:03] *** Joins: nkoep (nik@moz-1B43F595.vpn.rwth-aachen.de)
[17:57:13] <tjc> tikue: why not just T? usually Var means a use, not a definition
[17:57:49] <tikue> hmm
[17:57:51] <ecr> enum LC { Var(~str), Abs(~str, ~LC), App(~LC, ~LC) } i'd think
[17:57:55] <cmr> devin909: you can't dereference a string.
[17:58:00] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[17:58:45] <tjc> ecr: you might want the type to be polymorphic in the binder type, so you could use a ~str or a ~str paired with a unique ID or...
[17:59:03] <tikue> usually it'd just be t ::= x | \x. t | t t
[17:59:03] <ecr> tjc, yeah realized that just after I hit enter
[17:59:28] <tikue> Lambda(T, ~Tp) doesn't look like \x. t to me but there's a good chance i'm just confused :)
[17:59:59] <tikue> e.g. a lambda could take a function as argument
[18:00:06] <tikue> which isn't represented by Lambda(T, ~Tp)
[18:00:23] *** Quits: bent (chatzilla@FC9FC902.ED95B50E.EDDC15BA.IP) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[18:00:31] <ecr> Lambda(T, ~Tp) is \x. t.  The 'x' is 'T' and the 't' is '~Tp'
[18:00:55] <tikue> ecr: the x could be a lambda
[18:00:56] <ecr> Lambda just binds a variable in an expression
[18:00:59] <tikue> yes
[18:01:12] <ecr> the 'x' is just a name
[18:01:14] <tikue> so how would you represent Lambda(x, x 5)
[18:01:25] <ecr> it's not anything until you use the Lambda as the left side of Apply
[18:01:31] <pnkfelix> cmr: (sorry, I  missed your msg, was too busy dialing into mtg.  I think maybe ask brson about this.)
[18:01:56] <Amaranth> Wait, is SmallIntMap really just a wrapper that lets you use an array like it's a map?
[18:01:56] <tikue> ecr: how would you represent ^ if it's Lambda(T, ~Tp)
[18:02:02] <ecr> tikue: do you mean (\x. x) 5?
[18:02:10] <tikue> ecr: no
[18:02:12] <cmr> Amaranth: vector, yes.
[18:02:14] <tikue> i mean \x. x 5
[18:02:35] <ecr> Lambda(x, Apply(Var(x), 5))
[18:02:40] <strcat> Amaranth: otherwise you'd just use std::trie/std::hashmap
[18:02:59] <strcat> mostly depending on whether you need order
[18:03:27] <tikue> ecr: what if x = Lambda(x, x + 5)
[18:03:48] <tikue> T != Tp
[18:04:08] <ecr> tikue: that doesn't make any sense. x doesn't mean anything until you apply a lambda
[18:04:28] <ecr> it's just a name
[18:04:41] <tikue> ecr: i'm saying you try to apply it like this: (\x. x 5)(\x. x + 5)
[18:04:56] <Ms2ger> You rename variables
[18:04:57] <tikue> you'd expect that to return 10
[18:05:12] <Ms2ger> Left as an exercise to the reader
[18:05:32] <tikue> but it'd be a type error if lambda = Lambda(T, ~Tp)
[18:05:37] <ecr> (\x. x 5)(\x. x + 5) => (\x. x + 5) 5 => 5 + 5 => 10. alright, let's translate this
[18:05:38] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[18:05:50] <tikue> because T would have to be an int
[18:06:25] <kimundi> rusti: (|x|x(5u))(|x|x+5u)
[18:06:28] -rusti- pastebinned 8 lines of output: http://ix.io/7Xb
[18:06:29] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[18:06:32] <ecr> lambda calculus does not have a notion of types
[18:06:34] <ecr> that's STLC
[18:06:43] <tikue> but rust does
[18:06:49] <Ms2ger> Sure
[18:06:51] <Ms2ger> So?
[18:06:55] <ecr> sure, but you're encoding LC, not rust
[18:06:56] <tikue> so i'm trying to write it in rust :)
[18:06:58] <Ms2ger> Your type is "any term"
[18:07:01] <kimundi> rusti: (|x:uint|x(5))(|x:uint|x+5)
[18:07:04] -rusti- pastebinned 8 lines of output: http://ix.io/7Xc
[18:07:08] <tikue> Ms2ger: type is any Tp
[18:07:16] <tikue> not any "term"
[18:07:50] <Ms2ger> What's Tp?
[18:07:54] <tikue> enum Tp<T> { Var(T), Lambda(~Tp, ~Tp), Apply(~Tp, ~Tp) } 
[18:08:04] <kimundi> rusti: (|x:fn(uint)->uint|x(5))(|x:uint|x+5)()
[18:08:06] -rusti- pastebinned 6 lines of output: http://ix.io/7Xd
[18:08:29] <ecr> well that's not going to work then. you need term level (var, abs, app) and type (base, arrow) if you want simply types lambda calculus
[18:08:32] <kimundi> rusti: (|x:&fn(uint)->uint|x(5))(|x:uint|x+5)()
[18:08:32] -rusti- <anon>:5:9: 6:5 error: expected function but found `uint`
[18:08:32] <Ms2ger> Huh
[18:08:32] -rusti- <anon>:5          (|x:&fn(uint)->uint|x(5))(|x:uint|x+5)()
[18:08:32] -rusti- <anon>:6     };
[18:08:33] -rusti- error: aborting due to previous error
[18:08:33] -rusti- application terminated with error code 101
[18:09:04] <Ms2ger> The untyped lambda calculus would be...
[18:09:12] <kimundi> rusti: (|x:&fn(uint)->uint|x(5))(|x:uint|x+5) // last try
[18:09:13] -rusti- 10u
[18:09:21] <Ms2ger> What ecr said
[18:09:22] <kimundi> boy does that look ugly :P
[18:09:24] <Ms2ger> enum LC { Var(~str), Abs(~str, ~LC), App(~LC, ~LC) }
[18:10:50] <tikue> Ms2ger: how would you write what kimundi wrote using this?
[18:11:09] <Ms2ger> (\x. x 5)(\x. x + 5)?
[18:11:15] <tikue> yeah
[18:11:22] * Ms2ger looks
[18:12:29] <tikue> ecr: what does abs stand for?
[18:12:36] <Ms2ger> Abstraction
[18:12:38] <tikue> ah
[18:12:54] *** Quits: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk) (Client exited)
[18:14:02] <Ms2ger> App(Abs("x", App(Var("x"), Const(5))), Abs("x", App(App(Var("plus"), Var("x")), Const(5))))
[18:14:04] <Ms2ger> Or something
[18:15:19] <Ms2ger> You'd probably add succ/zero to the language, and use succ(succ(succ(succ(succ(Var("x"))))))
[18:15:27] <tikue> yeah
[18:15:31] <tikue> ok
[18:15:36] <tikue> that looks pretty good 
[18:15:46] <Ms2ger> Oh, and ~ everywhere
[18:15:46] <tikue> i guess i just don't like that using strings is required
[18:15:50] <tikue> haha right
[18:16:10] <Ms2ger> You could use De Bruijn indices!
[18:16:17] <tikue> what's that :P
[18:16:36] <Ms2ger> A way of avoiding strings to name variables
[18:16:56] <engla> restrict variables to one byte, now you can use bytes instead of strings
[18:17:02] <jclements> achrichto: ping
[18:17:27] <Ms2ger> Instead of x, you use the number of abstractions between the place where you use it and the abstraction whose argument you use
[18:17:49] <Ms2ger> \x. \y. x becomes \. \. 1
[18:17:54] <Ms2ger> And \x. \y. y becomes \. \. 0
[18:18:14] <tikue> ah i see
[18:18:32] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[18:18:37] <Ms2ger> It's a fun concept, but you don't want to write code with it :)
[18:18:37] <tikue> what about this
[18:19:23] <jclements> achrichto: thanks for the @bors retry... I see the test that failed, but I don't see why. Any info you can give me?
[18:19:27] <tikue> enum Tp<T> { Var(V), Lambda(V, ~Tp), Apply(~Tp, ~Tp) }  enum V { Tpp(Tp), uint }
[18:19:36] <tikue> would that work?
[18:20:09] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[18:20:20] <strcat> oh so sret is actually useful
[18:20:23] <strcat> memcpyopt uses it
[18:21:37] <acrichto> jclements: which pull?
[18:21:53] *** Quits: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:22:20] <jclements> achrichto: last night on 9090 (iirc), you issued a @bors: retry after my PR apparently failed a test in... fileinput::test::next<mumble>
[18:22:50] <acrichto> jclements: yeah it's sad :( https://github.com/mozilla/rust/issues/9074
[18:23:01] <acrichto> I was trying to look into those flaky tests last night, but not to much avail
[18:23:19] <acrichto> it's a seriuos problem though b/c it's bouncing a fair number of pulls
[18:23:28] <jclements> acrichto: urg... you just almost tricked me into clicking a hyperlink and bringing up a browser while trying to compile librustc....
[18:23:32] <acrichto> and when you conflate that with the random runtime segfaults, lots of @bors: retry seems necessary...
[18:23:51] <acrichto> jclements: oh, it's just an issue about the fileinput tests being flaky
[18:23:52] <kimundi> Hm, I think my hacking around with the Encoding proposal cornered me into needing HKT ...
[18:24:09] <jclements> acrichto: got it. no worries :). thanks for the retry.
[18:24:21] <acrichto> np :), just trying to move things along
[18:25:20] *** Joins: victorporof_ (victorporo@338A6DC2.9CD5E4C4.D111398B.IP)
[18:26:40] *** Quits: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP) (Ping timeout)
[18:26:43] *** Joins: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com)
[18:28:16] *** Quits: dave1629 (dave@25EF71AB.3C990DFD.DDE5D3F6.IP) (Quit: dave1629)
[18:29:55] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[18:30:06] *** Joins: jgilbert (jgilbert@moz-67020FBB.mycingular.net)
[18:30:15] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:30:49] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[18:32:06] <brson> bors's queue is empty
[18:32:27] <cmr> has been a lot
[18:32:45] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[18:32:58] <strcat> brson: when we fix the valgrind issues I think we should turn those bots back on
[18:33:11] <strcat> brson: also... I can't replicate the failures locally :(
[18:33:26] <strcat> I suspect that if you update those bots to valgrind 3.8, the errors will go away
[18:33:35] <strcat> might be false positives they fixed
[18:34:09] <strcat> anyway bors is doing a lot of nothing :P, so it might as well be taking 3x longer again
[18:34:11] *** Joins: miza (miza@moz-4DD51325.home.otenet.gr)
[18:34:58] *** Joins: valenting (Thunderbir@BC8F8C4C.4ABED146.FB866788.IP)
[18:35:03] <brson> strcat: I was able to reproduce it on that specific bot. the commit that introduced it was 7f268128954fef84dcbcb7c9fe77e2a107e0bf69, which is ridiculous
[18:35:10] <brson> mac has its own failures
[18:35:15] <brson> i'll try upgrading valgrind
[18:36:19] *** Quits: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net) (Ping timeout)
[18:36:25] <ecr> tikue: I had to move, did Ms2ger get your lambda calc questions answered?
[18:37:18] *** Quits: devin909 (Mibbit@moz-49ABA22A.bootp.virginia.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[18:37:27] <tikue> ecr: more or less. :) i find using strs to encode information distasteful though :( i'm not sure if there's a way to get it to type check otherwise though
[18:39:02] <ecr> tikue: you should be able to be generic in terms of what you use to identify variables. you really only need equality testing and maybe some other stuff to get substitution correct
[18:39:03] *** Quits: nkoep (nik@moz-1B43F595.vpn.rwth-aachen.de) (Ping timeout)
[18:39:21] <ecr> but strings is pretty common
[18:39:36] <ecr> people seem to like naming their variables for some reason
[18:41:17] <benh> amateurs!
[18:41:26] <strcat> naming variables is too hard
[18:41:33] <tikue> ecr: I think what i'd want is something like Var(V) and enum V { Sum(V, V), uint, Tp } â€¦ or something idk :(
[18:41:50] *** Joins: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net)
[18:43:31] <kimundi> D'oh! 
[18:43:53] * kimundi was trying to find his error for an quarter hour... utf8 != uft8
[18:43:58] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[18:44:18] *** Quits: jdsanders (Adium@moz-8527430D.hlrn.qwest.net) (Quit: Leaving.)
[18:44:21] *** Joins: jviereck (Adium@moz-58A87BA7.dip0.t-ipconnect.de)
[18:44:24] <ecr> tikue: have you read TAPL before?
[18:44:28] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[18:44:31] <ecr> it goes into this in depth
[18:44:35] *** Joins: azakai_ (alon@moz-BBE3ABD.mv.mozilla.com)
[18:44:37] <tikue> ecr: no what is that?
[18:44:44] *** Joins: dave1629 (dave@25EF71AB.3C990DFD.DDE5D3F6.IP)
[18:44:51] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Input/output error)
[18:44:59] <ecr> tikue: https://en.wikipedia.org/wiki/Types_and_Programming_Languages
[18:45:05] * strcat wonders if tagging things with nocapture is ever useful
[18:45:15] <strcat> clang doesn't even bother putting it on the outptr
[18:45:20] *** Joins: fabiand_ (fabiand@moz-964DA28E.adsl.alicedsl.de)
[18:45:24] <strcat> I guess it almost always infers...
[18:45:34] <ecr> tikue: it's pretty much the graduate level PL bible
[18:45:55] <bblum> i have a copy of tapl in my office you can borrow
[18:46:53] <ecr> I *highly* recommend it, especially if you're interested in PL/types/etc.
[18:47:30] <mcpherrin> aww yeah TAPL
[18:47:46] *** victorporof_ is now known as victorporof
[18:47:55] <jclements> tikue: it's heavily slanted toward the static-type world, but I agree that it's the go-to book about that part of PL.
[18:47:59] <jclements> :)
[18:48:30] *** Quits: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net) (Ping timeout)
[18:51:46] <AlisonW> while I remember, the make failure I had last night, details at http://clip.softlib.org/clip/zerCF if anyone wants to be interested ;-p
[18:57:51] <Luqman> AlisonW: i don't see any error, just warnings
[18:58:18] <AlisonW> sorry, I'd meant warnings .. (failed to be perfect)
[18:58:40] <AlisonW> I like clean compiles/makes
[18:58:51] <strcat> jemalloc uses a lot of macros so they end up with spurious warnings
[18:58:55] <AlisonW> which where rust is concerned is prob not a sensible thing
[18:59:00] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[18:59:22] <strcat> their tree data structure is all macros
[18:59:24] *** Joins: nkoep (nik@moz-79B329C7.pool.mediaways.net)
[19:00:24] <tikue> bblum: thank you :3
[19:01:09] *** Quits: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[19:01:11] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[19:01:44] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[19:01:51] <mindcat> 'let a : u8 = 0-1;a' why it is 'FF' not zero or errors?
[19:02:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:02:19] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[19:02:23] <strcat> because that's how arithmetic on fixed-size numbers is defined
[19:02:24] <strcat> it wraps
[19:02:44] <strcat> rusti: 0u8 - 1
[19:02:45] -rusti- 255u8
[19:02:51] <strcat> rusti: 0u8.checked_sub(&1)
[19:02:51] -rusti- None
[19:03:31] <myname> because 255u8 + 1 = 0
[19:03:59] <strcat> with unsigned numbers, it's normal modular arithmetic
[19:04:10] <strcat> two's complement signed integers are a bit weird
[19:04:14] *** Joins: jgilbert_ (jgilbert@40BD3B76.2AD327F9.973C8D27.IP)
[19:04:25] <myname> i don't think so
[19:04:37] <strcat> signed integers can represent the same number of negative and positive integers
[19:04:46] <strcat> so for i8, that's 128 negative and 128 positive
[19:04:49] <strcat> but 0 counts as positive
[19:04:56] *** Quits: jgilbert (jgilbert@moz-67020FBB.mycingular.net) (Ping timeout)
[19:05:00] <strcat> so there's no positive equivalent to the lowest negative integer
[19:05:03] <strcat> that's the weird bit.
[19:05:19] <strcat> rusti: -128u
[19:05:19] -rusti- 18446744073709551488u
[19:05:22] <strcat> rusti: -128u8
[19:05:22] <engla> so it has one weird bit, what are the other 7?
[19:05:22] -rusti- 128u8
[19:05:26] <strcat> rusti: -128u8 * -1
[19:05:26] -rusti- 128u8
[19:05:29] * cmr likes balanced ternary
[19:05:33] <strcat> rusti: -128i8 * -1
[19:05:34] -rusti- -128i8
[19:05:35] <myname> that's why abs(-128i8) is -128 in most cases
[19:05:48] * strcat isn't sure why he wrote u8
[19:06:02] *** Quits: dave1629 (dave@25EF71AB.3C990DFD.DDE5D3F6.IP) (Quit: dave1629)
[19:06:04] *** jgilbert_ is now known as jgilbert
[19:06:07] <strcat> myname: and -128i8 / -1 is undefined behaviour :P
[19:06:14] <strcat> in LLVM's world at least
[19:06:18] <strcat> and C
[19:06:26] <AlisonW> abs of a negative is a negative. hmmn - maths has sure changed since I was at school ;-p
[19:06:30] <strcat> although C doesn't actually have arithmetic like that
[19:06:40] <strcat> anything smaller than an int is promoted to an int to do arithmetic on it
[19:06:45] <strcat> and then converted back
[19:06:49] <strcat> yay C weirdness
[19:07:14] <myname> AlisonW: well, -128 is 10000000, if you make the two's complement it's 01111111 + 1 which is 10000000 which is -128
[19:07:57] <AlisonW> quite, but an ABS should be *positive* - by definition!
[19:08:07] *** Quits: miza (miza@moz-4DD51325.home.otenet.gr) (Input/output error)
[19:08:22] <myname> AlisonW: but there is no 128
[19:08:30] <AlisonW> there is no cake
[19:08:35] <myname> and everything else is just plain wrong
[19:09:32] <engla> rusti: std::num::abs(-128i8)
[19:09:32] -rusti- -128i8
[19:10:10] <myname> abs will most likely be something like if >= 0 then x else -x
[19:10:14] <AlisonW> personally, I'd treat that as an error as mathematically the Absolute of any number is, by definition, positive
[19:10:20] <strcat> anyway I stand by my statement that two's complement integers are weird ;p
[19:10:34] <myname> AlisonW: what would you return??
[19:10:41] <strcat> AlisonW: the only hardware numbers you can expect mathematical behaviour from are unsigned integers
[19:10:42] <AlisonW> (+) 128
[19:10:52] <myname> AlisonW: there is no such thing
[19:10:57] <myname> +128 is 0
[19:10:58] <AlisonW> then NAN
[19:11:00] <strcat> floats and two's complement integers aren't traditional arithmetic
[19:11:06] <strcat> AlisonW: there is no NaN for integers
[19:11:06] <myname> there is no NaN in integers
[19:11:07] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:11:18] <engla> -128 could be NaN for i8 :)
[19:11:22] <strcat> that's just how two's complement integers are defined
[19:11:29] <engla> Na (normal) N
[19:11:30] <AlisonW> then it is a fault as you've exceeded the maximum value for the field type
[19:11:57] *** Joins: jdsanders (Adium@moz-8527430D.hlrn.qwest.net)
[19:12:17] <AlisonW> if someone uses i8 instead of i16 and then the ABS comes back with 'wrong' value, that is something which should be caught as an error
[19:12:38] <strcat> AlisonW: it's how two's complement abs is usually defined
[19:12:52] <strcat> if you don't want this weirdness, avoid floats and fixed-size signed ints
[19:12:54] <AlisonW> in 2' arith then, yes, the two are *equivalent* but they aren't the same in math terms
[19:13:30] <cmr> but this isn't math, it's an approximation of it
[19:13:35] <AlisonW> I just think it has the possibility to become a 'bite me' issue at some point in the future
[19:13:42] <AlisonW> cmr: ;-P
[19:13:44] *** Joins: sebcrozet (sebcrozet@moz-D8879CC3.w80-13.abo.wanadoo.fr)
[19:13:50] <strcat> AlisonW: fixed-size integers are that way in general
[19:13:53] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[19:13:54] <myname> AlisonW: it hasn't been in C for years
[19:14:02] <cmr> if you don't accept all of the things fixnums imply, don't use them
[19:14:10] <AlisonW> (one reason I haven't used C since early 80s)
[19:14:30] <strcat> we need to improve generic int literals so that big integers are not so second-class
[19:14:42] <strcat> they are ridiculously painful to initialize
[19:15:07] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[19:15:18] <myname> how comes?
[19:15:18] <strcat> from_str::<BigInt>("2415315321") is enough to make people not use them when they should ;p
[19:15:36] <myname> indeed
[19:15:53] *** Joins: joone_ (joone@moz-6D49DCEA.jf.intel.com)
[19:16:10] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[19:16:34] <myname> 2415315321b :p
[19:16:43] <engla> from_int is a bit easier to use
[19:16:45] *** Quits: joone (joone@E10A1781.2160464A.A34EC3BB.IP) (Ping timeout)
[19:16:52] *** Quits: sebcrozet (sebcrozet@moz-D8879CC3.w80-13.abo.wanadoo.fr) (Ping timeout)
[19:16:57] <benh> bigint!(2 415 315 321)
[19:17:03] <strcat> engla: but it's not always going to work, because you're only covered up to 32-bit with that
[19:17:18] <AlisonW> (and anyway, RINCE! - Rust Is Not C/C++ Everywhere
[19:17:19] <strcat> it's a big integer for a reason ;p
[19:17:25] <engla> right, it should be from_i64 so you could use all Rust literals
[19:17:42] <strcat> AlisonW: yes, rust will include big integers + a wrapper using a fixnum and expanding to a bigint
[19:17:44] <cmr> Rust numeric literals wouldn't be limited to 64bit with generic numericliterals.
[19:17:51] <strcat> so you can sidestep all of the issues with fixnums
[19:18:03] <strcat> we can't fix floats and fixnums, they are messed up by definition
[19:18:05] <engla> cmr: but right now that's how it is
[19:18:15] <tikue> are big ints equivalent to python's int?
[19:18:32] <cmr> no
[19:18:36] <AlisonW> strcat: then we should create a better definition
[19:18:37] <strcat> tikue: yes, python's int is a fixnum expanding to a bigint transparently (in python3 - in python2 it wasn't transparent)
[19:18:42] <cmr> equivalent to their long
[19:18:43] <strcat> AlisonW: the hardware defines them
[19:18:57] <cmr> AlisonW: Working against the hardware is always a losing proposition
[19:19:10] <myname> i don't see anything wrong with it :p
[19:19:21] * AlisonW nods in sadness
[19:19:21] <strcat> rust is a systems language, so performance is a requirement and it has to do what the hardware does unless it's actually not memory safe
[19:19:55] <strcat> AlisonW: I think the solution is not raising fixnums above the often better alternatives
[19:19:58] *** Joins: sebcrozet (sebcrozet@moz-D8879CC3.w80-13.abo.wanadoo.fr)
[19:20:06] <tikue> strcat: so rust's bigint can get arbitrarily large?
[19:20:18] <strcat> tikue: well you will go out-of-memory before hitting a limit
[19:20:25] <tikue> aweeeesome
[19:20:27] *** Joins: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net)
[19:20:31] <cmr> they're slow though
[19:20:44] <strcat> gmp is the same semantically, but a few orders of magnitude faster in many cases
[19:20:45] <tikue> yeah
[19:20:56] <strcat> I probably need to update my gmp bindings yet again for language changes
[19:20:59] <tikue> good to know they're there though when you need it
[19:22:19] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[19:23:28] <mindcat> rusti: ;;;;;let mut a = 2; do 1024.times{ a = a * 2;};a
[19:23:29] -rusti- 0
[19:24:02] *** Joins: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net)
[19:24:28] <AlisonW> rusti: ;;;;;let mut a = 2; do 1024.times{ a = a * 2;};a
[19:24:29] -rusti- 0
[19:24:35] <AlisonW> rusti: ;;;;;let mut a = 2; do 1024.times{ a = a * 2};a
[19:24:35] -rusti- 0
[19:24:37] <tikue> rusti: let a = &&&&&&&&&&&&&&2; a
[19:24:37] -rusti- <anon>:5:17: 5:19 error: unexpected token: `&&`
[19:24:37] -rusti- <anon>:5          let a = &&&&&&&&&&&&&&2; a
[19:24:37] -rusti-                           ^~
[19:24:37] -rusti- application terminated with error code 101
[19:24:42] <AlisonW> um .. ok
[19:24:55] <tikue> rusti: let a = & & & & & & & & & & & & & &2; a
[19:24:56] <myname> what's the deam with the ;;;;; in the front?
[19:24:59] -rusti- pastebinned 198 lines of output: http://ix.io/7Xq
[19:25:44] <mindcat> rusti: ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;1 + 1
[19:25:45] -rusti- 2
[19:25:50] <mindcat> :p
[19:26:22] <myname> i know some guys at the university who always make ; at the beginning of each line instead of the end
[19:26:28] <strcat> rusti: 2
[19:26:28] -rusti- 2
[19:26:34] <tikue> lol
[19:26:50] <engla> tikue: 198 lines pasted is pretty good
[19:27:02] <tikue> engla: :P
[19:27:15] <cmr> myname: javascript?
[19:27:26] <myname> C
[19:27:26] *** Joins: dave1629 (dave@25EF71AB.3C990DFD.DDE5D3F6.IP)
[19:27:32] <cmr> Huh, haven't seen that in C
[19:27:50] <myname> you can do that
[19:28:00] <cmr> I know youcan do it, I just haven't seen it
[19:28:05] <myname> it's perfectly valid if you care about the last one
[19:28:23] <myname> people do that in javascript?
[19:28:38] <cmr> Fairly commonly
[19:28:46] <myname> sounds ugly
[19:28:51] <myname> why would you do that?
[19:29:03] <cmr> because of ASI
[19:29:09] <myname> huh?
[19:29:16] <tikue> rusti: ;;;;;;"this is how i comment";;;;;; 2u
[19:29:17] -rusti- 2u
[19:29:19] <cmr> automatic semicolon insertion
[19:29:39] <myname> that other one started because gcc said it wanted a ; before printf
[19:29:50] <mindcat> rusti: let ref &@~*@~&@a = 1;a
[19:29:51] -rusti- <anon>:5:13: 5:16 error: expected identifier, found path
[19:29:51] -rusti- <anon>:5          let ref &@~*@~&@a = 1;a
[19:29:51] -rusti-                       ^~~
[19:29:51] -rusti- application terminated with error code 101
[19:29:53] <myname> so they made ;printf(...
[19:30:05] <cmr> http://dailyjs.com/2012/04/19/semicolons/, http://mrjoelkemp.com/2013/02/javascript-the-leading-semicolon/
[19:30:10] <mindcat> rusti: let &@~*@~&@a = 1;a
[19:30:10] -rusti- <anon>:5:16: 5:17 error: unexpected token: `*`
[19:30:10] -rusti- <anon>:5          let &@~*@~&@a = 1;a
[19:30:10] -rusti-                          ^
[19:30:10] -rusti- application terminated with error code 101
[19:30:24] <cmr> it was a thing in nodejs early on, don't know if it still is.
[19:30:29] <cmr> As well as leading comma
[19:31:07] <AlisonW> leading ; just makes a null line of code
[19:31:36] <AlisonW> but only meaningful on first line in any package
[19:32:18] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[19:33:05] *** flaper87 is now known as flaper87|afk
[19:33:10] <strcat> pcwalton: https://github.com/mozilla/rust/pull/9100 r?
[19:33:40] <tikue> rusti: let mut v = ~[1u]; {{{{{{{{"for emphasis";;;;;;;;;; { v.push(2) }}}}}}}}} v
[19:33:41] -rusti- ~[1u, 2u]
[19:33:48] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[19:34:00] *** flaper87|afk is now known as flaper87
[19:34:31] <cmr> strcat: what's up with the removal of allocas? Codegen improvement or better optimization or what?
[19:35:06] <mindcat> ~[2u].push(9999);
[19:35:16] <strcat> cmr: more information for the optimization passes
[19:35:19] <cmr> cool
[19:35:28] <mindcat> rusti:~[2u].push(9999)
[19:35:29] -rusti- <anon>:5:9: 6:5 error: type `[uint, .. 1]` does not implement any method in scope named `push`
[19:35:29] -rusti- <anon>:5         ~[2u].push(9999)
[19:35:29] -rusti- <anon>:6     };
[19:35:29] -rusti- error: aborting due to previous error
[19:35:29] -rusti- application terminated with error code 101
[19:35:34] *** Joins: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net)
[19:35:45] <strcat> cmr: LLVM is just not always as bright as you would expect it to be ;P
[19:36:06] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Client exited)
[19:36:10] <strcat> there are cases where noalias gives it strictly more information than it would otherwise have, but here it should really be able to make the same code with/without it
[19:36:12] <strcat> but it doesn't
[19:36:17] *** Quits: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP) (Quit: victorporof)
[19:36:27] <strcat> unless it's assuming the writes may trap... and memset may not be equivalent
[19:36:33] * strcat won't worry about it
[19:36:39] <strcat> LLVM's problem! :P
[19:37:05] <engla> isn't this an improvement for all code that uses  fn new() -> BigObject {} ?
[19:37:10] <strcat> yes
[19:37:27] <cmr> We always use outpointers, right?
[19:37:27] <engla> nice
[19:37:32] <strcat> cmr: not always
[19:37:49] <strcat> I think we always do for regular structs/tuples/enums
[19:38:07] <strcat> although we shouldn't *always* do it, we should probably decide if a type is immediate based on size
[19:38:23] <cmr> Someone should write some documentation about what a function signature translates into, to better reason about rust
[19:38:38] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[19:38:47] <cmr> I tried figuring it out by picking through trans but couldn't even find where the actual translation happens :\
[19:38:59] <strcat> maybe we can put noalias on the env ptr too, if methods stop abusing it to pass self ;p
[19:39:13] <cmr> the callchain starting at trans_fn didn't seem to be doing much
[19:39:35] <strcat> although maybe that's wrong due to @fn
[19:39:47] *** Quits: dave1629 (dave@25EF71AB.3C990DFD.DDE5D3F6.IP) (Quit: dave1629)
[19:39:55] <strcat> @fn can mutate the environment, right?
[19:40:14] *** Joins: jlw8k_000 (chatzilla@67B68CA0.1CA5FEA3.DDE5D3F6.IP)
[19:40:50] <cmr> rusti: let y = 5; let x: @fn() -> uint = || { y = 6; y}; x(); printfln!(x())
[19:40:51] -rusti- <anon>:5:48: 5:49 error: cannot assign to immutable captured outer variable in a heap closure
[19:41:00] -rusti- <anon>:5          let y = 5; let x: @fn() -> uint = || { y = 6; y}; x(); printfln!(x())
[19:41:00] -rusti-                                                          ^
[19:41:00] -rusti- error: aborting due to previous error
[19:41:00] -rusti- application terminated with error code 101
[19:41:04] <strcat> anyway I've been looking at clang's codebase to find tricks like this ;P
[19:41:32] <cmr> rusti: struct Foo {a: uint}; let mut y = Foo{a: 5}; let x: @fn() -> Foo = || { y.a = 6; y}; x(); printfln!(x())
[19:41:44] -rusti- failed to pastebin 8 lines of output
[19:41:51] <cmr> well that's useful
[19:41:53] <cmr> :p
[19:41:54] <strcat> https://github.com/llvm-mirror/clang/blob/master/lib/CodeGen/CGCall.cpp#L1241
[19:42:14] <strcat> we also need noalias on exchange_malloc's return value
[19:42:20] <strcat> I already put it on all ~ params/returns
[19:42:26] <strcat> but that signature uses * :(
[19:42:32] <mindcat> rusti:let a:@mut ~fn() = @mut || 1;a
[19:42:32] -rusti- <anon>:5:35: 5:36 error: mismatched types: expected `()` but found `<VI0>` (expected () but found integral variable)
[19:42:32] -rusti- <anon>:5         let a:@mut ~fn() = @mut || 1;a
[19:42:33] -rusti-                                             ^
[19:42:33] -rusti- error: aborting due to previous error
[19:42:33] -rusti- application terminated with error code 101
[19:42:38] <kimundi> cmr: At least it tells you how many lines if useful information you won't see!
[19:42:45] <strcat> maybe it should just be special-cased, or maybe there should be an #[unsafe_noalias_return]
[19:42:50] <cmr> "error: mutable variables cannot be implicitly captured"
[19:43:04] <cmr> strcat: it seems @fn cannot mutate their environment
[19:43:15] <strcat> cmr: it could use Cell, though
[19:43:18] <strcat> that counts as mutating
[19:43:25] *** Joins: dave1629 (dave@25EF71AB.3C990DFD.DDE5D3F6.IP)
[19:43:29] <cmr> mm
[19:43:29] <strcat> so env pointers aren't noalias. :(
[19:43:42] <mindcat> rusti:let a:@mut ~fn() = @mut || printfln!(a);a
[19:43:44] -rusti- pastebinned 9 lines of output: http://ix.io/7Xu
[19:43:49] *** Quits: sebcrozet (sebcrozet@moz-D8879CC3.w80-13.abo.wanadoo.fr) (Ping timeout)
[19:43:56] <strcat> since you don't know what the bounds are of the closure or anything like that... hm
[19:44:04] <strcat> although env ptrs in regular functions are unused
[19:44:08] <strcat> but LLVM can figure that out
[19:44:10] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:45:54] *** Joins: sebcrozet (sebcrozet@moz-2517AE39.w80-13.abo.wanadoo.fr)
[19:46:11] <erickt> jclements: very-delayed-pong
[19:46:26] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[19:47:00] <mindcat> rusti:let a:@mut ~fn() -> int = @mut || 1;printfln!(a);a
[19:47:01] -rusti- @mut fn() -> int
[19:47:01] -rusti- @mut fn() -> int
[19:47:33] <mindcat> rusti:let a:@mut ~fn() -> int = @mut || 1;a();a
[19:47:34] -rusti- <anon>:5:44: 5:48 error: expected function but found `@mut ~fn:Send() -> int`
[19:47:34] -rusti- <anon>:5         let a:@mut ~fn() -> int = @mut || 1;a();a
[19:47:34] -rusti-                                                      ^~~~
[19:47:34] -rusti- error: aborting due to previous error
[19:47:34] -rusti- application terminated with error code 101
[19:50:02] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[19:50:13] *** Quits: tikue (tkuehn@961CBB8C.E6CB677E.689607DE.IP) (Quit: tikue)
[19:50:24] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[19:50:50] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[19:51:47] <strcat> now if only I understood what was going wrong in https://github.com/mozilla/rust/issues/9024 :(
[19:52:08] * strcat checks if this fixes it
[19:52:30] <cmr> We *emit* bounds checking for fixed sized arrays?
[19:52:38] <strcat> we have to
[19:52:39] <cmr> I suppose you can index with a variable.
[19:52:43] <strcat> yeah
[19:52:47] <strcat> llvm should optimize it out
[19:52:48] *** Quits: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[19:52:53] <strcat> I think there's some obscure aliasing issue here
[19:53:02] <strcat> it's hard to reason about this stuff
[19:53:26] <strcat> we should likely just update LLVM again soon so we get different bugs ;p
[19:53:31] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[19:53:31] *** ChanServ sets mode: +o tjc
[19:54:16] <flaper87> why are there 2 comm.rs modules? 1) under std/rt and one under std/ 
[19:54:36] <flaper87> they both define basically the same traits
[19:54:53] <cmr> std::rt::comm is newrt, std::comm is oldrt.
[19:55:08] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[19:55:11] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:55:53] <flaper87> cmr: gotcha
[19:56:19] <glyc> Q about mingw32 support: it required non-documented workarounds to build rust on mingw32, and make check shows tons of failures in the test suite. Is win32 unsupported at this point?
[19:56:31] <flaper87> cmr: so, I'm working on recv_timeout, I guess I just need to implement it in the new comm.rs 
[19:56:41] <flaper87> or we're still supporting both ?
[19:56:51] <cmr> glyc: no, but did you see https://github.com/mozilla/rust/wiki/Note-getting-started-developing-Rust#windows ?
[19:57:14] <cmr> flaper87: ask brson or someone, but probably in the newrt, the old code is likely to be tossed
[19:57:25] *** Joins: tikue (tkuehn@961CBB8C.E6CB677E.689607DE.IP)
[19:57:31] <cmr> glyc: also, we only run check-fast, iirc
[19:57:42] *** Quits: sp3d (a@moz-6F12212B.fidnet.com) (Ping timeout)
[19:58:23] <glyc> cmr: yes, you can see I added the workaround (for the libpthreadGC2.dll not found) to that page a few minutes ago, so at least that part is now documented :-)
[19:58:48] <glyc> cmr: but any suggestions for the make check failures? I wonder if I'm not building right. 
[19:59:04] *** Quits: CanhTak (jeremy@moz-147142FA.wl.t.ulaval.ca) (Quit: CanhTak)
[19:59:05] <glyc> cmr: maybe that pthreadGC2.dll is incompatible?
[19:59:08] <cmr> glyc: what are the failures?
[19:59:13] *** Quits: dave1629 (dave@25EF71AB.3C990DFD.DDE5D3F6.IP) (Quit: dave1629)
[19:59:15] <cmr> I thought all the tests were working correctlyat this point
[19:59:36] <glyc> cmr: hang on a sec, I'll make a gist
[19:59:44] *** Joins: squiddy (squiddy@moz-D32163A1.adsl.alicedsl.de)
[19:59:45] <cmr> I have to go now, but bbl
[20:00:00] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[20:00:19] <glyc> cmr: cheers, I'll just file it
[20:00:36] *** Quits: eatkinson (eatkinson@E5442022.772DB3ED.90B17E8F.IP) (Quit: eatkinson)
[20:03:10] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[20:03:12] <strcat> cmr: it seems like llvm just isn't trusting that the sizes are right :\
[20:03:15] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[20:03:36] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[20:04:03] *** Quits: KindOne (KindOne@moz-C99012F.dynamic.ip.windstream.net) (Ping timeout)
[20:04:36] <jclements> erickt: yes, that *was* very delayed. I was just looking for someone to review a Pull Request.  Maybe I'll hit you with the next one :).
[20:04:51] <erickt> jclements: hehe :)
[20:05:07] <acrichto> strcat: I was looking at that issue awhile back, that last memcpy before returning is what kills the optimization
[20:05:11] <acrichto> strcat: not sure why though
[20:05:37] <strcat> how old is our llvm now?
[20:06:01] <acrichto> a little over a month
[20:06:03] <olsonjeffery> old enough to vote
[20:06:15] <acrichto> 8/20/13 was the last llvm commit
[20:06:24] <acrichto> oh so under a month
[20:06:56] *** Joins: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP)
[20:07:31] <strcat> looking through the commits to see if they fixed anything related to it
[20:07:39] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[20:08:10] <strcat> they improved the register allocator a lot :P
[20:08:40] *** Quits: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP) (Ping timeout)
[20:08:47] *** Joins: KindOne (KindOne@moz-C99012F.dynamic.ip.windstream.net)
[20:09:19] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[20:09:40] <olsonjeffery> rusti: fn magic_8ball(_question: &str) -> ~str { ~"yes." } magic_8ball("is a llvm rebuild in my future?")
[20:09:40] -rusti- ~"yes."
[20:10:11] <olsonjeffery> rusti: fn magic_8ball(_question: &str) -> ~str { ~"answer hazy. install ccache and ask again." } magic_8ball("is a llvm rebuild in my future?")
[20:10:11] -rusti- ~"answer hazy. install ccache and ask again."
[20:10:53] <erickt> ha
[20:11:02] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:11:06] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[20:11:06] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1453f7ceb to 14917d3c2: 02http://git.io/N3iJvQ
[20:11:06] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[20:11:06] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[20:11:06] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/vi81FQ
[20:11:06] <ghrust> 13rust/06auto 14a543ed6 15Daniel Micay: add sret + noalias to the out pointer parameter...
[20:11:06] <ghrust> 13rust/06auto 144e895d1 15bors: auto merge of #9100 : thestinger/rust/outptr, r=pcwalton...
[20:11:07] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[20:11:33] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[20:11:42] <pcwalton> strcat: nice catch
[20:11:50] <strcat> :)
[20:12:04] <veddan> df
[20:12:06] <veddan> fg
[20:12:07] <veddan> fg
[20:12:17] <veddan> sory, mistake
[20:12:19] <strcat> pcwalton: eliminates a lot of weird return spaghetti allocas
[20:12:32] <pcwalton> getting rid of allocas is good
[20:13:09] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[20:13:15] <erickt> informal poll: I was going to rename functions like `Option.unwrap_or_default(T)` to free up that name to use the Default trait. What do you all think about the alternative names `.unwrap_or(T)` or `.unwrap_or_else(T)`? The second one I've seen used in the scala collections api
[20:13:21] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[20:13:31] *** Joins: dave1629 (dave@25EF71AB.3C990DFD.DDE5D3F6.IP)
[20:13:45] <erickt> I'm leeaning towards .unwrap_or_else(T) myself
[20:14:03] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[20:14:07] *** Joins: SingingBoyo (brandon@moz-36881B5A.ubcsecure.wireless.ubc.ca)
[20:14:30] *** Quits: dave1629 (dave@25EF71AB.3C990DFD.DDE5D3F6.IP) (Quit: dave1629)
[20:14:32] <erickt> I was also planning on adding .unwrap_or_with(fn() -> T) to allow a fn generate the value
[20:14:36] <engla> erickt: there is a method called Option::or already, fyi
[20:15:18] <erickt> engla: .or() returns an Option<T>, my `.unwrap_or_else(T)` returns a T
[20:15:29] *** Quits: Ms2ger (Ms2ger@9C9504FF.4EC82F13.3773EA9F.IP) (Ping timeout)
[20:15:35] <engla> shouldn't they use the same wording?
[20:15:54] <erickt> engla: so `.unwrap_or()`?
[20:15:59] <engla> yes
[20:16:23] <strcat> acrichto: meh it doesn't make sense to me
[20:16:24] <erickt> I did like that unwrap_or was shorter :)
[20:16:35] <strcat> acrichto: can't see why it thinks that memcpy changes the bounds of the array.....
[20:16:35] <Luqman> strcat: \o/ i've seen soome really redundant alloca/load/store's
[20:16:52] <strcat> Luqman: it makes it store directly to the ret ptr in many cases
[20:16:54] <strcat> nothing huge ;p
[20:16:56] <acrichto> strcat: yeah :(, it may be weird aliasing going on, but I can't imagine how
[20:17:28] <engla> let size = None.unwrap_or(2)   looks ok I think..
[20:17:30] <strcat> wow there are just a ridiculous number of register allocator commits this month
[20:17:36] *** Joins: dave1629 (dave@25EF71AB.3C990DFD.DDE5D3F6.IP)
[20:18:50] <engla> erickt: If you are poking in Option, I have one wishlist item. Just something to conveniently expand an Option to a Result, and the same way convert Result to an Option
[20:19:13] <erickt> engla: that works for me. Any opinion on unwrap_or_with? It feels a little odd, but I do like trying to use the _with suffix when passing in a closure
[20:19:29] <erickt> engla: I think we have a Result.to_option...
[20:19:46] <erickt> engla: oh, I guess not
[20:19:59] <kmc> functions declared within extern { ... } are always considered unsafe?
[20:20:21] <erickt> back in a bit
[20:20:23] <Luqman> kmc: yes
[20:20:36] <kmc> ok, makes some sense
[20:21:52] <glyc> win32 make check issues, https://github.com/mozilla/rust/issues/9102 , did I just misconfigure somehow?  1265 test failures is a bunch.
[20:21:54] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:21:55] *** Joins: brendan_ (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[20:21:56] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[20:21:56] *** brendan_ is now known as brendan
[20:22:08] <strcat> kmc: it'd be nice to have #[safe] for the small subset valid for any inputs though
[20:22:19] <erickt> engla: back
[20:22:26] <strcat> acrichto: so meh, not really any fixes relevant to this
[20:22:48] *** Quits: squiddy (squiddy@moz-D32163A1.adsl.alicedsl.de) (Quit: Leaving)
[20:22:50] <acrichto> strcat: it's probably not too bad
[20:22:52] *** Joins: lex (lex@moz-12347B81.bootp.virginia.edu)
[20:22:57] *** Quits: fabiand_ (fabiand@moz-964DA28E.adsl.alicedsl.de) (Quit: Verlassend)
[20:23:13] <engla> erickt: I'm still thining about .unwrap_or_with, it seems ok
[20:23:21] <erickt> engla: so something like `fn Option<T>.to_result(fn() -> E) -> Result<T, E>`?
[20:23:33] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[20:23:44] *** Parts: lex (lex@moz-12347B81.bootp.virginia.edu) ()
[20:23:45] <erickt> engla: where the closure is called on a None value?
[20:23:50] *** Joins: MiguelD (MiguelD@A8F74449.90C84433.1F1B246B.IP)
[20:23:57] *** Joins: SiegeLord (Mibbit@moz-CAD88D3D.alb.east.verizon.net)
[20:24:11] <kimundi> erickt: Isn't the scala one unwrap_or_else(fn() -> T) ?
[20:24:32] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:24:33] <engla> yes erickt 
[20:24:35] <erickt> kimundi: yeah, it has that style
[20:24:48] <kimundi> I think unwrap_or(T) and unwrap_or_else(|| T) are both fine names and needed operations :)
[20:25:00] <kimundi> In fact, I needed unwrap_or_else a few hours ago
[20:25:14] *** Quits: rossm (rossm@moz-EE3BB1DC.br.br.cox.net) (Quit: )
[20:25:24] <SiegeLord> Yo... can I get another review of this one? https://github.com/mozilla/rust/pull/9064 Thanks!
[20:25:32] <kimundi> No, wait, not exactly unwrap or else, but a related function
[20:25:43] <engla> there is already  .or_zero() and .unwrap_or_zero(),  so .or() and .unwrap_or()  seems to be consistent
[20:25:49] <erickt> kimundi: oh, I didn't consider using _else for the closure variant
[20:25:58] <strcat> one day I'll type my ssh key passphrase without 3-4 tries
[20:26:04] <kimundi> I needed or_else(fn() -> Option<T>), that was it
[20:26:12] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[20:26:22] <SiegeLord> Whoops... my bus is leaving!
[20:26:29] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[20:26:32] *** Quits: SiegeLord (Mibbit@moz-CAD88D3D.alb.east.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:26:34] <kimundi> erickt: "If the first one is None, call the closure. Like an if else."
[20:26:35] <bstrie> strcat: use a ssh key as your ssh keyphrase
[20:26:36] <engla> kimundi: me too, that one. :-)
[20:26:46] <engla> about 20 minutes ago
[20:27:07] <kmc> strcat: yeah; in this case I'm using extern fns just as a way for one bit of Rust code to sneakily call back into another without using that mod (to avoid cross-crate cycles)
[20:27:07] <tikue> kimundi: engla erickt: is that really better than match opt { Some(t) => t, None => { .. } } 
[20:27:16] <kmc> so it should be extern "Rust" and safe, but that doesn't work
[20:27:17] <kimundi> tikue: yeah
[20:27:22] <kmc> however I thought of a better way to do it anyway, so *shrug*
[20:27:22] <tikue> the only reason i see it as being desired is that i go looking for unwrap_or_callback al lthe time
[20:27:27] <tikue> and i'm constantly surprised that i can't find it
[20:27:29] <tikue> it seems so obvious
[20:27:45] <engla> tikue: the or case is when you have None, so if it repeats you have lots of similar cases to propagate the Some(t) value
[20:27:45] <kimundi> some_operation_opt().or_else(|| some_other_operation_opt())
[20:28:16] <tikue> kimundi: or_else? not bad
[20:28:19] * strcat doesn't see why that build failed
[20:28:21] <engla> a.or(b).or(c) is  match a { Some(x) => x, None => match b { Some(x) => x, None => ... 
[20:28:33] <strcat> it's nopt...
[20:28:33] <engla> the repeated Some(x) => x..
[20:28:34] <tikue> engla: that's a really good point. i hadn't thought of that
[20:28:46] <tikue> but wouldn't it actually be
[20:28:46] <kimundi> rusti: FromStr::from_str::<uint>("hello").or(FromStr::from_str::<uint>("45"))
[20:29:03] <tikue> a.or(|| b().or(c))
[20:29:10] <engla> yes tikue you are right
[20:29:13] -rusti- pastebinned 10 lines of output: http://ix.io/7Xz
[20:29:24] <tikue> it's still better, of course
[20:29:42] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[20:30:06] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[20:31:06] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[20:31:06] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 144e895d1 to 14917d3c2: 02http://git.io/N3iJvQ
[20:31:06] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[20:31:08] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[20:31:08] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/iKUFNA
[20:31:08] <ghrust> 13rust/06auto 14a543ed6 15Daniel Micay: add sret + noalias to the out pointer parameter...
[20:31:08] <ghrust> 13rust/06auto 14c5247fd 15bors: auto merge of #9100 : thestinger/rust/outptr, r=pcwalton...
[20:31:09] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[20:32:26] <engla> rusti: from_str::<i8>("-128")
[20:32:27] <erickt> Alrighty, so my plan is to now add `Option.unwrap_or(T) -> T`, `Option.unwrap_or_else(&fn() -> T) -> T`, `Option.to_result(&fn() -> E) -> Result<T, E>`, `Result.to_option() -> Option<T>`
[20:32:27] -rusti- Some(-128i8)
[20:32:40] *** Joins: mib_e9mehi (Mibbit@moz-E06A2221.adsl.highway.telekom.at)
[20:33:13] *** Quits: mib_e9mehi (Mibbit@moz-E06A2221.adsl.highway.telekom.at) (Quit: http://www.mibbit.com ajax IRC Client)
[20:33:51] <erickt> and `Option.or_else(&fn() -> Option<T>) -> Option<T>`, which is the opposite of `Option.chain(&fn() -> Option<T>) -> Option<T>`.
[20:33:59] *** Joins: Ms2ger (Ms2ger@9C9504FF.4EC82F13.3773EA9F.IP)
[20:34:05] <engla> that's nice
[20:34:26] <erickt> this also makes me want to rename `.chain()` to `.and()`
[20:34:40] <tikue> erickt: what does chain do? i can never remember
[20:34:45] <tikue> isn't it like a more flexible map
[20:34:48] <engla> .chain is the >>= :-)
[20:35:15] <erickt> tikue: chain is `match *self { Some(ref x) => f(x), None => None }`
[20:35:21] <engla> which means .chain is the option version of the vector's or iterators .flat_map
[20:35:45] <strcat> I think we could stick noreturn on functions returning !
[20:35:55] <strcat> seems you are allowed to unwind from noreturn fns
[20:35:56] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[20:36:10] <strcat> if only code bloat was easier to fix :P
[20:36:51] <tikue> can you do || break
[20:36:59] <tikue> so opt.unwrap_or_else(|| break)
[20:37:07] <engla> tikue: no
[20:37:11] *** Joins: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP)
[20:37:38] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[20:38:08] <bstrie> "While battling with Microsoft over the Internet" <-- quote from wikipedia's article on javascript
[20:38:10] <tikue> erickt: that's map isn't it?
[20:38:13] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[20:38:19] *** Joins: Florob (Florob@moz-39532932.de)
[20:38:28] <luisbg> how useful would be to read the "Dragon book"
[20:38:29] <luisbg> http://en.wikipedia.org/wiki/Compilers:_Principles,_Techniques,_and_Tools
[20:38:41] <bstrie> luisbg: probably very useful
[20:38:46] <luisbg> to understand how Rust works internally and understand the evolution of the language
[20:38:47] *** Quits: dave1629 (dave@25EF71AB.3C990DFD.DDE5D3F6.IP) (Quit: dave1629)
[20:38:47] <tjc> luisbg: That one is kind of old; I recommend Andrew Appel's _Modern Compiler Implementation in ML_
[20:38:52] <luisbg> maybe contribute to it in the future? :)
[20:38:56] <tikue> rusti: let foo: Option<int> = None; foo.map(|x| x + 1)
[20:39:00] -rusti- None
[20:39:07] <tjc> luisbg: we do a lot of things differently from textbook compilers, and llvm does most of the optimization
[20:39:14] <engla> tikue: map and chain's closure arguments have different signatures.
[20:39:17] <tjc> plus we have a handwritten recursive descent parser and lots of compiler books spend a lot of time on parsing
[20:39:22] <erickt> tikue: map is `fn map(&fn(T) -> U) -> Some(U)`
[20:39:24] <bstrie> luisbg: more contributors would be great!
[20:39:31] <tjc> so while it can't hurt, tbh the best way is to dive into the code and look up specific topics when you need to
[20:39:31] <luisbg> tjc, yes, so I've seen. which is why I wasn't sure if reading a textbook about compilers would be useful or not
[20:39:41] <luisbg> tjc, I will surely learn. but maybe not related information
[20:39:44] <erickt> tikue: oops, Option<U>
[20:39:48] <tjc> luisbg: Benjamin Pierce's _Types and Programming Languages_ would also be helpful for understanding Rust's type system, or parts of it, anyway
[20:39:54] <bstrie> luisbg: it will help from a high level, but won't enable you to just jump in immediately
[20:39:56] <tjc> and it's a very accessible book
[20:39:59] <luisbg> bstrie, I will come back in the future and ask you which areas/tasks need help :P
[20:40:25] <erickt> luisbg: there are plenty of things you can do without needing to read that book
[20:40:38] <tjc> yes -- libraries being high on the list
[20:40:44] <kmc> and _Advanced Types and Programming Languages_ (more of a topics survey) has a chapter on substructural types, which is relevant to Rust too
[20:40:47] <tjc> you don't need to understand compilers to work on libraries. For the most part, anyway
[20:40:51] <tjc> kmc: ATTAPL is kind of scary, though :P
[20:41:17] <luisbg> tjc, I will eventually grow interested in the compiler/language-core
[20:41:23] <luisbg> a question about libraries...
[20:41:36] <erickt> luisbg: you can check out https://github.com/mozilla/rust/issues?labels=E-easy&page=1&state=open or https://github.com/mozilla/rust/issues?labels=I-papercut&page=1&state=open for newbie friendly things
[20:41:42] <luisbg> if Rust is compatible with C, why don't people just link to the C libraries?
[20:41:49] <erickt> luisbg: we do :)
[20:42:05] <tjc> luisbg: we do, but it's not "for free" -- you still have to write Rust bindings, b/c the C type system isn't exactly the same as the Rust type system
[20:42:23] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[20:42:23] <luisbg> is the goal eventually have most libraries in Rust?
[20:42:26] * mindcat can't find out a rust ssh server library.
[20:42:31] <bstrie> luisbg: where feasible, yes
[20:42:32] <kimundi> erickt: ++ on all Option methods you listed
[20:42:37] <luisbg> bstrie, cool! thanks
[20:42:44] <luisbg> erickt, thanks for the links
[20:42:58] <bstrie> luisbg: we expect that low-level rust should be comparable to C in performance for our purposes
[20:43:04] <strcat> also, you can watch all of the videos from https://www.coursera.org/course/compilers even though it's not running atm
[20:43:35] *** Quits: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP) (Ping timeout)
[20:43:40] <Luqman> mindcat: port dropbear :P
[20:43:41] <erickt> kimundi et all: woot, and thanks for the input
[20:43:56] * strcat doesn't understand why they don't the programming tasks + assignments available all the time
[20:44:01] <luisbg> strcat, ooh! they are all in youtube
[20:44:02] <engla> kimundi: you were the initiator of the consistency issue for Option and collections? Option has some serious consistency issues with map and chain. Map is map_move, map, map_mut,  Chain is chain, chain_ref, chain_mut_ref
[20:44:09] *** Quits: Ms2ger (Ms2ger@9C9504FF.4EC82F13.3773EA9F.IP) (Quit: nn)
[20:44:44] <luisbg> strcat, maybe so new students do them in proper time... but yes, they should trust students to not skip forward
[20:44:45] <erickt> engla: thats probably my fault. I did a consistency pass a couple weeks ago
[20:44:55] <tikue> erickt: so chain is just map but you don't have to return an option?
[20:44:56] <mindcat> Luqman: woot! Sorry, I can't! :P
[20:45:06] <strcat> luisbg: well I think it has to do with them wanting groups of students talking on the forums
[20:45:17] <strcat> so they run the classes on a schedule
[20:45:18] <erickt> tikue: yep
[20:45:26] <strcat> but it just seems a bit weird
[20:45:35] <tikue> Some(1).chain(|x| Some(x + 1)) === Some(1).map(|x| x + 1)
[20:45:46] <engla> tikue: map can only transform Nones to None, and Somes to Some. Chain can transfom Somes to None, too
[20:45:46] <strcat> I've been waiting *forever* for part 2 of the cryptography course >.<
[20:46:02] <tikue> engla: or to something other than an option right
[20:46:08] <engla> no
[20:46:10] <strcat> the stanford ones are nice because they generally let you use any language you like
[20:46:11] <flaper87> is this correct? http://pastebin.mozilla.org/3019633 (the comments wrt to print's loop)
[20:46:38] <tikue> ohhh ok, i see now.
[20:46:40] <flaper87> because print keeps going even after the fail. Assuming fail is being called and the task killed
[20:46:51] <flaper87> I think I've got something wrong there
[20:47:10] <luisbg> tikue, I started the cryptography course but couldn't finish it due to a project at work stealing all my time :(
[20:47:12] <luisbg> it was great!
[20:47:14] *** Quits: jpf (jan@moz-A8C26A15.org) (Ping timeout)
[20:47:43] <bstrie> luisbg: crypto eh? do these http://www.matasano.com/articles/crypto-challenges/ in rust!
[20:47:49] <strcat> heh, I guess this actually causes a problem on 32-bit...
[20:47:54] <luisbg> bstrie, :S
[20:47:57] <luisbg> hehehe
[20:48:03] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[20:48:03] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:48:29] * mindcat thinks too hard
[20:48:50] <mcpherrin> bstrie: I started doing those in 0.5 rust and haven't ever gotten around to forward porting my code to finish :(
[20:48:57] <strcat> pcwalton: meh, some weird segfault on 32-bit nopt linux :s
[20:49:08] <strcat> all I can think of is that we hardcode some ABI detail
[20:49:12] <pcwalton> hmm, weird
[20:49:13] <pcwalton> retry?
[20:49:17] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[20:49:17] <kimundi> engla: Wouldn't call me initiator, I just dislike inconsistencies ;) Hmm... I guess short term The more common naming convention is 'foo' for ref, 'foo_mut' for mut ref, and 'foo_move'
[20:49:17] <strcat> I did, failed again
[20:49:19] <pcwalton> weird
[20:49:23] <pcwalton> gotta debug
[20:49:24] <mcpherrin> the #1 thing that stops me writing more rust is my old code being broken
[20:49:25] <flaper87> mmh, don't get it
[20:49:49] <kimundi> engla, erickt: At least, it's the same convention Iterators use... More or less.
[20:49:51] *** Joins: jpf (jan@moz-A8C26A15.org)
[20:49:56] *** Joins: CanhTak (jeremy@moz-26F7B34C.wl.t.ulaval.ca)
[20:50:03] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[20:50:18] *** Joins: gandi (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:50:18] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[20:50:26] <mindcat> rusti: 0 & 1
[20:50:27] -rusti- 0
[20:51:01] <luisbg> bstrie, I was also thinking about doing a bunch of Project Euler challenges in Rust to get more used to the language
[20:51:34] <erickt> kimundi: I'll do another pass at getting Option/Result to match the 'foo' for ref, 'foo_mut' for mut ref, and 'foo_move
[20:51:35] *** Joins: dave1629 (dave@25EF71AB.3C990DFD.DDE5D3F6.IP)
[20:51:44] <engla> kimundi: true (the iterator comparison)
[20:52:13] <mindcat> rusti: 0 | 1
[20:52:23] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[20:52:31] <mindcat> rusti: 0 & 1
[20:52:37] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[20:52:42] <bstrie> haha
[20:52:48] <bstrie> you've blown rusti's mind
[20:53:12] * mindcat 0_0
[20:53:15] <kimundi> erickt: Ah, one thing: On to_result, do you have a type bound for E: ToStr?
[20:53:25] <flaper87> Have you guys hit this issue? https://github.com/mozilla/rust/issues/8051
[20:53:40] <erickt> kimundi: haven't given it much thought yet
[20:54:09] <flaper87> kimundi: got a sec to take a look here? http://pastebin.mozilla.org/3019633
[20:54:11] <kimundi> erickt: Result demands ToStr for the error type everywhere, to enforce good error messages
[20:54:13] <erickt> kimundi: it's easy enough to add
[20:54:17] <erickt> ok
[20:54:23] <mcpherrin> flaper87: I hit that the other day. How old is your compiler?
[20:54:39] <mcpherrin> 'cause a later build fixed it for me
[20:54:40] <flaper87> mcpherrin: rustc 0.8-pre (28d042e 2013-09-06 11:16:12 -0700)
[20:54:50] <flaper87> mcpherrin: host: x86_64-unknown-linux-gnu
[20:54:54] *** Quits: tikue (tkuehn@961CBB8C.E6CB677E.689607DE.IP) (Ping timeout)
[20:55:00] <kimundi> flaper87: What am I looking at?
[20:55:22] *** Joins: tikue (tkuehn@961CBB8C.E6CB677E.689607DE.IP)
[20:55:25] <flaper87> kimundi: Does that look correct? I expected the loop to stop after the fail but it keeps running
[20:55:47] <flaper87> since the task child is linked to the parent, it should fail, shouldn't it ?
[20:55:59] <kimundi> flaper87: I don't know how the default task linking settings work
[20:56:09] <flaper87> kimundi: kk
[20:56:12] <flaper87> thanks :)
[20:56:30] <kimundi> Maybe it fails, but still has an io buffer to empty?
[20:56:44] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:56:50] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:56:52] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Connection reset by peer)
[20:57:14] *** strcat1 is now known as strcat
[20:57:27] * flaper87 tries with some ports
[20:57:56] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Quit: lmandel)
[20:57:57] <jdm> can I match a ~str against &'static str somehow?
[20:58:10] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[20:58:27] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[20:58:42] <tikue> rusti: let mut v = ~[1u]; let b: &mut [uint] = &mut *v; 
[20:58:43] -rusti- <anon>:5:13: 5:14 error: unknown start of token: \x08
[20:58:44] -rusti- <anon>:5          let mut v = ~[1u]; let b: &mut [uint] = &mut *v; 
[20:58:44] -rusti-                       ^
[20:58:44] -rusti- application terminated with error code 101
[20:58:44] *** Quits: krdln (Mibbit@moz-6F8A8560.dynamic.chello.pl) (Ping timeout)
[20:58:57] <mindcat> rusti: 0 | 1
[20:58:59] -rusti- 1
[20:59:02] <kimundi> jdm: borrow the ~str ?
[20:59:14] *** Quits: Eridius (kevin@moz-533B0DB4.us) (Ping timeout)
[20:59:16] *** Quits: balpert (balpert@moz-7E5ED302.members.linode.com) (Ping timeout)
[20:59:21] *** Quits: ziad (ziad@moz-5003F925.members.linode.com) (Ping timeout)
[20:59:28] *** Quits: rfw (rfw@moz-7D453A5B.rfw.name) (Ping timeout)
[20:59:44] *** Quits: shachaf (shachaf@moz-F37E0395.members.linode.com) (Ping timeout)
[20:59:53] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[20:59:55] *** Quits: jld (jld@moz-B94C75AD.xlerb.net) (Ping timeout)
[20:59:56] <mindcat> rusti: ~"55" | "5"
[20:59:57] -rusti- <anon>:5:9: 5:20 error: binary operation | cannot be applied to type `~str`
[20:59:57] -rusti- <anon>:5          ~"55" | "5"
[20:59:57] -rusti-                   ^~~~~~~~~~~
[20:59:57] -rusti- error: aborting due to previous error
[20:59:57] -rusti- application terminated with error code 101
[21:00:07] <jdm> kimundi: expected `&~str` but found `&'static str`
[21:00:11] <jdm> maybe I'm doing something wrong?
[21:00:18] <jdm>             let word = &word.to_ascii_lower();
[21:00:18] <jdm>             modes |= match word {
[21:00:21] <strcat> jdm: .as_slice(), or let it coerce
[21:00:23] <jdm> aha
[21:00:46] *** Quits: BigEndian (hurp@moz-1B6DD81E.members.linode.com) (Ping timeout)
[21:01:01] <ecr> flaper87: I think the problem is that println() doesn't yield to the scheduler at all
[21:01:32] <ecr> when tasks are killed by task failure, they aren't stopped if they're running
[21:01:36] *** Quits: cantsin (cantsin@moz-F99612CC.members.linode.com) (Ping timeout)
[21:01:45] <flaper87> ecr: mmh, good point
[21:01:49] <tikue> what's the preferred idiom for converting ints to floats? `i as float` or `i.to_float()`
[21:01:51] <ecr> instead they block eventually (to do IO or communicate over a channel)
[21:02:08] <ecr> and when they wake up, they check if they've been killed and if so, they stop
[21:02:23] <ecr> println() is part of old io and just calls directly into libc
[21:02:43] <flaper87> ecr: is there a bug for fixing println? :P
[21:02:46] <mindcat> rusti:"è¿™æ˜¯ä¸€ä¸ªæ¢¦".len()
[21:02:47] -rusti- 15u
[21:02:49] * flaper87 will kick its ass
[21:02:51] <flaper87> :D
[21:03:05] *** Joins: shachaf (shachaf@moz-F37E0395.members.linode.com)
[21:03:06] <flaper87> ecr: anyway, what you said makes sense to me
[21:03:12] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Ping timeout)
[21:03:17] *** Joins: cantsin (cantsin@moz-F99612CC.members.linode.com)
[21:03:21] <ecr> flaper87: there's one for figuring out stdin/out/err in new io land
[21:03:21] *** Joins: jld (jld@moz-B94C75AD.xlerb.net)
[21:03:22] *** Joins: BigEndian (hurp@moz-1B6DD81E.members.linode.com)
[21:03:48] *** Joins: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP)
[21:04:16] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[21:04:16] *** ChanServ sets mode: +o tjc
[21:05:29] *** Joins: rossm (rossm@moz-EE3BB1DC.br.br.cox.net)
[21:06:18] <lkuper> brson++ for "Reflections on Trusting Rust"
[21:06:47] *** Joins: krdln (Mibbit@moz-6F8A8560.dynamic.chello.pl)
[21:06:53] <tjc> lkuper: I think pcwalton came up with it first, though :-)
[21:06:59] <strcat> pcwalton: I think the issue is just that we have a totally separate code path for foreign fns
[21:07:01] <strcat> heh
[21:07:42] <strcat> and intrinsics are foreign fns
[21:07:44] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[21:07:56] <tikue> is there a way to use vec.pop() with &mut [T]
[21:07:57] *** Joins: Eridius (kevin@moz-533B0DB4.us)
[21:08:04] *** Joins: balpert (balpert@moz-7E5ED302.members.linode.com)
[21:08:05] <strcat> tikue: no
[21:08:11] <benh> no, but you could make a slice from 0 to len-1
[21:08:16] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[21:08:20] <mindcat> rusti: ((0u32 - 1) /2) as f32 + 0.6677
[21:08:20] -rusti- 2147483688f32
[21:08:20] <tikue> benh: yes, that is what i'm going to do instead
[21:08:23] <lkuper> tjc: ok, pcwalton++
[21:08:38] <ecr> if you pop enough from a vector, will it eventually realloc itself to a smaller one?
[21:08:45] <strcat> ecr: no
[21:08:55] <strcat> ecr: there's a shrink_to_fit method
[21:08:57] <strcat> like C++11
[21:09:23] <ecr> alright. just curious if we mirrored the growth behavior when shrinking :)
[21:10:02] *** Quits: krdln (Mibbit@moz-6F8A8560.dynamic.chello.pl) (Quit: http://www.mibbit.com ajax IRC Client)
[21:10:21] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[21:10:36] *** Quits: jlw8k_000 (chatzilla@67B68CA0.1CA5FEA3.DDE5D3F6.IP) (Ping timeout)
[21:11:40] <tikue> if i wanted to do something like `fn get_and_update_ptr(&mut[T]) -> T` such that it would be called like `loop { get_and_update_ptr(&mut[T]) }`, i'd probably need to create a wrapper struct with an index field?
[21:12:17] <engla> tikue: do you modify the elements?
[21:12:21] <tikue> engla: no
[21:12:43] <tikue> i need to keep track of the last element taken though
[21:12:45] <engla> then you don't need &mut [T]. but a &mut &[T] or something.  like  str::slice_shift_char
[21:12:55] <engla> (it returns the new slice)
[21:13:09] <tikue> i don't want to return the slice though because it convolutes the code :\
[21:13:18] <tikue> it's how i was doing it before but i'm trying to change it
[21:14:04] *** Joins: jlw8k_000 (chatzilla@21154FC1.4DB138C4.DDE5D3F6.IP)
[21:14:30] <mindcat> should I learn C, then I can use C libraryÂ¿
[21:14:39] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: night)
[21:14:40] <engla> rusti: fn f<T:Clone>(slc: &mut &[T]) -> T { let elt = slc[0].clone(); *slc = slc.slice_from(1); elt }   let mut t = &[1,2,3];  f(&mut t); f(&mut t)
[21:14:41] -rusti- 2
[21:15:03] <tikue> oooh i see what you did there!
[21:15:08] <tikue> very clever
[21:15:14] <engla> not sure :)
[21:15:36] <dave1629> whats the best way to extract a substring from a string? (e.g., select the slice from i to j from s)
[21:15:39] <jclements> erickt: ping... got time for a short PR review?
[21:15:54] <erickt> sure
[21:16:32] <jclements> erickt: thanks! here's the URL. https://github.com/mozilla/rust/pull/9103
[21:18:10] *** Quits: huseby (huseby@96211BDE.83CC6402.D9CD682B.IP) (Quit: Leaving)
[21:18:24] <erickt> jclements: r+
[21:18:28] <jclements> erickt: thanks!
[21:20:04] <tikue> engla: so if it can be mutable then &mut ~[T] is the way to go. 
[21:20:19] <tikue> because then i can just do v.pop() to my heart's content!
[21:20:25] <tikue> no slicey wiceys
[21:20:46] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[21:21:11] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[21:21:11] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14c5247fd to 14917d3c2: 02http://git.io/N3iJvQ
[21:21:11] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[21:21:14] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[21:21:14] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/o1PbrA
[21:21:14] <ghrust> 13rust/06auto 14422cf1a 15John Clements: change type of ExprLoop and ExprBreak elts from ident->name....
[21:21:14] <ghrust> 13rust/06auto 14969181b 15John Clements: added test case
[21:21:14] <ghrust> 13rust/06auto 1497f1383 15bors: auto merge of #9103 : jbclements/rust/let-var-hygiene, r=erickt...
[21:21:16] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[21:22:54] *** Quits: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP) (Ping timeout)
[21:23:32] <flaper87> mcpherrin: that issue is blocking me
[21:23:46] <tikue> what is the way to do a docstring inside its function? ///! ?
[21:23:58] <flaper87> any hint about how to debug this issue? https://github.com/mozilla/rust/issues/8051 
[21:24:16] *** Quits: KindOne (KindOne@moz-C99012F.dynamic.ip.windstream.net) (Quit: www.adiirc.com - Free mIRC alternative)
[21:24:19] <cmr> tikue: //!
[21:24:23] <cmr> Or /*!
[21:24:29] <tikue> cmr: thanks :)
[21:24:46] <tikue> cmr: if it's multiline you just put it for each one right?
[21:24:54] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[21:25:05] *** Quits: dave1629 (dave@25EF71AB.3C990DFD.DDE5D3F6.IP) (Quit: dave1629)
[21:25:06] *** Joins: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP)
[21:25:08] <cmr> tikue: yes
[21:25:12] <ecr> brson: o.O the tube-with-homing version passes the stress test (1000 iterators of the TCP tests) w/o crashing when the channel version did not.
[21:25:13] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[21:25:15] <cmr> Please don't use /*!
[21:25:23] <tikue> cmr: i won't, i promise
[21:25:26] <cmr> :)
[21:25:30] <ecr> brson: running the stress test again
[21:25:42] <tikue> is there a standard for inner function docstrings?
[21:25:47] <ecr> brson: (this is the parallel test suite)
[21:25:51] <tikue> do you typically not use docstrings for inner functions?
[21:25:58] <cmr> no, not often used
[21:26:04] <tikue> ok
[21:26:28] <ecr> tikue: not much point if it's internal only. I usually throw a regular comment on there if it's really needed
[21:26:41] <tikue> ecr: yeah sounds good
[21:27:01] <cmr> If you do use them please use //! though, /* is very problematic for stripping the docs out of, needs heurstics that I'm not very comfortable.
[21:27:12] <tikue> i like the idea of having the docstring on the line below the function declaration, but imo it's not quite as aesthetically pleasing. not sure what i'll do
[21:27:16] <strcat> pcwalton: the noalias attributes also weren't being applied cross-crate
[21:27:19] <mcpherrin> flaper87: putting the timer in a mut variable fixes it for me. http://mcpherrin.ca/tmp/7B5
[21:27:23] <pcwalton> ah
[21:27:31] <strcat> pcwalton: so it's from sret changing the ABI slightly
[21:27:40] <ecr> bblum: do you know where the check for a task being killed by linked failure happens?
[21:28:06] * strcat hopes it will work now
[21:28:28] <flaper87> mcpherrin: interesting, I tired to make the Timer instance mutable but the compiler complained
[21:28:54] <flaper87> ecr: libstd/task/spawn.rs IIRC
[21:29:42] <ecr> flaper87, mcpherrin: calling .sleep() on a non-mut timer should be a type error. sleep() takes &mut self.
[21:30:25] <ecr> (the underlying handle could change when we call into libuv, so all the IO stuff takes &mut self)
[21:30:26] <mcpherrin> ecr: right, but instead you get an ICE :P
[21:30:53] <ecr> indeed, but the example in the issue shouldn't compile anyway :P
[21:32:09] *** Quits: jclements (jclements@moz-9C0ABCFC.wireless.calpoly.edu) (Quit: jclements)
[21:32:48] <tikue> for c-like enums, is it acceptable to do enum Foo { Bar, Baz, Far, Faz, }
[21:32:52] <flaper87> ecr: right, but it shouldn't fail when calling maybe_timer.expect("Expected a timer").sleep(1);
[21:32:54] <flaper87> should it?
[21:32:59] <tikue> (i.e. no newlines)
[21:35:23] <brson> ecr: \o/
[21:36:01] <brson> cmr: "don't use /*!" seems problematic, since that's our doc syntax
[21:36:16] <cmr> brson: //! ?
[21:36:28] <ecr> flaper87: hm, maybe you're right. you'll have a Timer after expect. I guess you can give that to &mut? not sure honestly.
[21:36:34] <cmr> It's usable, but to not be awful for rustdoc there needs to be a specified format.
[21:36:43] <ecr> brson: just passed again!
[21:36:52] <tikue> it'd be nice if our /* nested
[21:36:59] <strcat> they used to
[21:37:14] <tjc> graydon wanted it to be easy to write editor modes
[21:37:17] <tjc> hence, no nested /* */
[21:37:27] <flaper87> ecr: I guess I could, but I expected that to happen automagically :P
[21:38:21] <brson> cmr: what's awful about "/*!"? is "/**" also awful?
[21:38:26] <ecr> flaper87: I figured rust would complain about taking a mutable borrow of something immutable, but maybe the borrow checker is smart enough to realize no one else has a reference to it yet
[21:38:28] <cmr> brson: yes
[21:38:32] *** Quits: Kruppe (user@moz-4DDA8AB8.uwaterloo.ca) (Ping timeout)
[21:38:35] <cmr> both of the multiline syntax.
[21:38:53] <tikue> tjc: ah, makes sense 
[21:39:03] <cmr> Some people include nothing on the first line, or the summary, or the summary on the second line. Maybe using extra *, maybe not, varying whitespace, etc.
[21:39:04] <tjc> we do have the ignore!() macro
[21:39:05] <flaper87> ecr: yeah, still, the error message doesn't say much, at least to me
[21:39:08] <tjc> that you can use for commenting out code
[21:39:10] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[21:39:21] <cmr> It's miserable to deal with, and error-prone
[21:39:55] <brson> cmr: it does require heuristics. other document formatters deal with it. old rustdoc had heuristics sfor it
[21:39:55] <cmr> And every time I think I have it right, there's another comment that breaks my code :P
[21:40:30] <ecr> flaper87: either way, it certainly shouldn't be ICEing
[21:41:02] <flaper87> ecr: agreed, I should update the issue
[21:41:35] <tikue> is fixing let (mut a, mut b) = â€¦ difficult?
[21:42:03] *** Joins: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP)
[21:42:08] * strcat realizes how awful this fn declaration stuff is
[21:42:13] <cmr> tikue: the `mut` is only allowed in let and function arguments, so it'd need to bespecial cased.
[21:42:46] <tikue> cmr: it's allowed in pattern matching isn't it?
[21:43:05] <ecr> cmr, tikue: I thought it just involved adding mut to the pattern language?
[21:43:14] <engla> cmr: I think the multiline doc strings are kind of needed for long texts like the doc of std::fmt
[21:43:31] <cmr> engla: I agree they are nice to use, and I prefer them.
[21:43:43] <cmr> we just need to pick a convention, IMO
[21:44:00] *** Quits: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP) (Ping timeout)
[21:44:10] <engla> I had the impression that /// was the dominant convention for functions
[21:44:11] <tikue> cmr: i think mut should be allowed anywhere ref mut is allowed
[21:44:20] <engla> cmr: yes some clean up is neede
[21:44:31] <engla> cmr: do something to simplify
[21:44:48] <ecr> tikue: I think that's the consensus, but no one has got around to doing it yet
[21:44:48] * cmr unifies all of the doc comments to his prefered style
[21:44:58] <cmr> tikue: makessense
[21:45:07] <cmr> maybe it's *just* functino args that are the special case
[21:45:14] <cmr> ref isn't allowed in them, is it?
[21:45:34] <ecr> I don't think so
[21:45:34] *** Quits: jviereck (Adium@moz-58A87BA7.dip0.t-ipconnect.de) (Quit: Leaving.)
[21:45:36] <cmr> rusti: fn foo(ref x: int) { printfln!(x); } foo(4)
[21:45:37] -rusti- &4
[21:45:37] -rusti- ()
[21:45:40] <cmr> huh
[21:45:43] <ecr> oh
[21:45:44] <tikue> cmr: not sure
[21:45:44] <tikue> lol
[21:45:45] <ecr> huh
[21:46:21] <ecr> whichever way it is, the problem is that 'mut x' isn't a pattern and something somewhere isn't actually using patterns.
[21:48:33] *** flaper87 is now known as flaper87|afk
[21:49:34] *** Quits: sebcrozet (sebcrozet@moz-2517AE39.w80-13.abo.wanadoo.fr) (Quit: Gone)
[21:50:00] *** Joins: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net)
[21:50:21] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:50:54] <strcat> meh.
[21:51:15] <strcat> we treat functions as if the function type is the whole thing *everywhere*
[21:51:26] <strcat> it's really not going to be easy to not lose the attributes
[21:52:01] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[21:53:51] <jdsanders> has anyone ever played with the possibility of including links to source on github in the standard library docs?
[21:53:57] <cmr> jdsanders: already done
[21:54:01] <jdsanders> yeah?
[21:54:02] *** Quits: SingingBoyo (brandon@moz-36881B5A.ubcsecure.wireless.ubc.ca) (Ping timeout)
[21:54:04] <cmr> http://seld.be/rustdoc/master/std/hashmap/struct.HashMap.html
[21:54:05] <jdsanders> awesome
[21:54:08] <cmr> See [src] link
[21:54:21] <jdsanders> you just made my week!
[21:55:20] <jdsanders> is the goal of seld.be to be a replacement for static.rust-lang.org/doc/?
[21:55:30] <jdsanders> or perhaps linked to from somewhere?
[21:55:38] <jdsanders> (i'm sure that's already done too and i just haven't seen it...)
[21:55:42] <cmr> No
[21:55:55] <cmr> The goal is forit to replace the docs on rust-lang.org
[21:56:02] <jdsanders> cool cool
[21:56:19] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[21:56:24] <jdsanders> well in the 3 minutes i've been using it, i've decided it's super awesome
[21:56:26] <jdsanders> so sounds good to me
[21:56:29] <cmr> thanks :)
[21:56:34] <cmr> Seldaek: another fan!
[21:58:49] <jdsanders> Seldaek: yep! thanks, works great
[21:59:06] <doomlord> does github support a language speciic source markup plugin ..
[21:59:45] <strcat> it uses pygments
[22:00:02] <tikue> voxpopuli: https://gist.github.com/tikue/e128c88c9f7043f888f8
[22:00:08] *** Quits: gandi (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: I feel so disconnected now	)
[22:01:00] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[22:01:27] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[22:01:51] <ktt3ja> how do I go about accessing Linux kernel API from rust?
[22:02:02] <strcat> which API?
[22:02:04] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[22:03:03] <ktt3ja> err
[22:03:44] <ktt3ja> (I have no idea what I'm asking)
[22:03:53] <ktt3ja> but I want to find out how long the kernel timer interrupt is
[22:04:04] <jdsanders> cmr: is that doc site an open source project somewhere?
[22:04:31] <jdsanders> where I can see what it's doing and perhaps submit pull requests?
[22:05:17] *** Quits: CanhTak (jeremy@moz-26F7B34C.wl.t.ulaval.ca) (Quit: CanhTak)
[22:06:23] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[22:07:58] <tjc> ktt3ja: you'll probably need to write FFI bindings. see http://static.rust-lang.org/doc/tutorial-ffi.html
[22:08:47] *** Joins: sp3d (a@moz-6F12212B.fidnet.com)
[22:09:09] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[22:09:45] <brson> i wonder if we can get rustdoc-ng and rustdoc-web merged for 0.8
[22:11:14] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[22:13:27] <tikue> let's make an early terminating fold
[22:13:35] <tikue> iter().fold_while
[22:13:43] *** Joins: sinma (sinma@moz-6A11C47C.fbx.proxad.net)
[22:13:47] <strcat> tikue: why?
[22:13:55] <strcat> take_while + fold?
[22:14:03] <tikue> strcat: not the same
[22:14:06] <sinma> Hello! Is it possible to declare global variables?
[22:14:24] <strcat> sinma: yes but you can't mutate them in safe code
[22:14:31] <sinma> I canâ€™t use let when Iâ€™m not in a function (I know itâ€™s a design choice)
[22:14:32] <ecr> sinma: static creates a task-local immutable variable
[22:14:54] *** kimundi is now known as zz_kimundi
[22:14:54] <strcat> ecr: well it's not task-local
[22:15:00] <sinma> ecr: how do I use static exactly? static let â€¦ ?
[22:15:16] <strcat> static x: int = 5;
[22:15:17] <ecr> static x: int = 4;
[22:15:22] <sinma> ok, easy
[22:15:25] <erickt> tjc: ping
[22:15:27] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Client exited)
[22:15:33] <tjc> erickt: pong
[22:15:42] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[22:16:06] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[22:16:06] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1497f1383 to 14917d3c2: 02http://git.io/N3iJvQ
[22:16:06] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[22:16:06] <ecr> strcat: really? I thought it was as long as you don't cheat with ARCs.
[22:16:07] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[22:16:08] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/A9V1BA
[22:16:08] <ghrust> 13rust/06auto 14422cf1a 15John Clements: change type of ExprLoop and ExprBreak elts from ident->name....
[22:16:08] <ghrust> 13rust/06auto 14969181b 15John Clements: added test case
[22:16:08] <ghrust> 13rust/06auto 14a9ac272 15bors: auto merge of #9103 : jbclements/rust/let-var-hygiene, r=erickt...
[22:16:09] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[22:16:14] <sinma> Itâ€™s mandatory define the type of the variable with static?
[22:16:18] <erickt> tjc: hey there! so I was wondering if you knew if rustpkg is scheduled to be finished before we hit rust 1.0
[22:16:28] <strcat> ecr: static and static mut are actual global variables
[22:16:35] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[22:16:36] <strcat> that's why reading/writing to static mut is unsafe
[22:16:42] <ecr> sinma: yes. Rust only has local variable type inference, so you need to specify top level types (functions and globals)
[22:16:51] <strcat> std::local_data is task-local storage
[22:16:56] <tjc> erickt: It's hard to answer that question, because Rust 1.0 isn't scheduled :-)
[22:17:01] <erickt> heh
[22:17:08] <tjc> I guess the real question is, is rustpkg a milestone blocker for any of our milestones?
[22:17:10] <sinma> ecr: ok, thx
[22:17:11] <ecr> strcat: ah, ok.
[22:17:14] <ecr> sinma: sure :)
[22:17:51] <tjc> erickt: And as per https://github.com/mozilla/rust/issues/5677 , the answer is yes -- it's on the feature-complete milestone
[22:18:01] <tjc> I don't think we've decided whether or not 1.0 comes before feature-complete
[22:18:07] <tjc> but hopefully that gives you some information :-)
[22:18:17] <erickt> tjc: well I think so :) mainly because I'm leaning towards having libextra (or parts of it) be pulled out of rust proper and into separate dependencies
[22:18:54] *** zz_kimundi is now known as kimundi
[22:19:23] <tjc> erickt: Yes, that's been on our minds
[22:19:39] <erickt> I was chatting with someone a day or two ago about the ugliness of the serialization api, and I just worry about us getting locked into a particular api because we haven't had the bandwidth to modernize everything yet
[22:19:51] <tjc> erickt: building libextra with rustpkg will probably happen after the first community adoption milestone -- see https://github.com/mozilla/rust/wiki/Rustpkg-schedule
[22:20:10] <strcat> erickt: we won't be locked into a specific API at 1.0 unless you've marked it #[stable]
[22:20:23] <erickt> strcat: no way! that's a great idea
[22:20:36] <strcat> erickt: I think dbaupp started implementing that stuff
[22:20:40] <strcat> dunno how far along it is
[22:21:05] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[22:21:27] <erickt> strcat: will #[stable] enforce a stable api?
[22:21:36] <strcat> erickt: well I think that's the idea
[22:21:38] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[22:21:38] *** ChanServ sets mode: +ao dherman dherman
[22:22:01] <strcat> erickt: https://github.com/mozilla/rust/issues/6875
[22:25:52] *** Quits: sinma (sinma@moz-6A11C47C.fbx.proxad.net) (Quit: Konversation terminated!)
[22:27:44] *** Joins: KindOne (KindOne@moz-C99012F.dynamic.ip.windstream.net)
[22:31:58] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[22:36:10] <brson> https://github.com/mozilla/rust/wiki/Meeting-weekly-2013-09-10
[22:36:39] <ecr> brson: I'm going to go ahead and put the multi-threaded IO into bors if that's alright
[22:37:12] *** Quits: jdsanders (Adium@moz-8527430D.hlrn.qwest.net) (Quit: Leaving.)
[22:37:31] *** Joins: jviereck (Adium@moz-58A87BA7.dip0.t-ipconnect.de)
[22:38:32] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[22:41:53] *** Quits: aeqwa (aeqwa@moz-BF4ACB23.dsl.tropolys.de) (Quit: Lost terminal)
[22:42:19] *** Joins: clements (clements@moz-BEE8D50A.dsl.snlo01.pacbell.net)
[22:42:31] *** Joins: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP)
[22:43:50] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Quit: Leaving)
[22:44:34] *** Quits: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP) (Ping timeout)
[22:45:21] *** Quits: pcdummy (pcdummy@moz-CF4CA865.page4me.ch) (Ping timeout)
[22:46:42] <brson> ecr: go for it!
[22:49:18] <dbaupp> brson: https://github.com/mozilla/rust/pull/9096 comments?
[22:49:26] <ecr> brson: now that that's done, I'm going to take a look at optimizing the homing stuff based on what we talked about earlier
[22:49:27] *** Joins: pcdummy (pcdummy@moz-CF4CA865.page4me.ch)
[22:50:23] <brson> ecr: yes, that sounds good. thanks!
[22:50:29] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:51:27] <tikue> i'm getting an ICE in a function, and I know exactly where it happens. but i have _no_ idea why. anyone want to take a look? https://gist.github.com/tikue/acbb7ac6578c244c3cac
[22:52:09] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[22:52:14] <dbaupp> tikue: ICE message/gdb backtrace (from rust_begin_unwind)?
[22:53:17] <tikue> dbaupp: i'll just it, it's incomprehensible to me...
[22:53:55] <tikue> dbaupp: https://gist.github.com/tikue/acbb7ac6578c244c3cac
[22:54:20] *** Quits: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:55:13] *** Quits: jviereck (Adium@moz-58A87BA7.dip0.t-ipconnect.de) (Quit: Leaving.)
[22:55:18] *** Quits: jgilbert (jgilbert@40BD3B76.2AD327F9.973C8D27.IP) (Ping timeout)
[22:56:34] <brson> dbaupp: left a comment
[22:56:39] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[22:56:48] *** Quits: jlw8k_000 (chatzilla@21154FC1.4DB138C4.DDE5D3F6.IP) (Ping timeout)
[22:58:06] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[22:58:14] *** Joins: ziad (ziad@moz-5003F925.members.linode.com)
[22:58:19] *** Joins: coreya (Mibbit@moz-37705B5.hsd1.va.comcast.net)
[22:58:38] <dbaupp> brson: thanks
[22:59:31] *** Quits: coreya (Mibbit@moz-37705B5.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:59:52] *** Joins: rfw (rfw@moz-7D453A5B.rfw.name)
[23:00:54] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:01:30] *** Joins: jlw8k_000 (chatzilla@AC85A52.8878667B.DDE5D3F6.IP)
[23:03:19] *** kimundi is now known as zz_kimundi
[23:08:01] *** Quits: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[23:08:52] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[23:09:51] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[23:09:53] *** Quits: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Connection reset by peer)
[23:10:50] <strcat> pcwalton: are all monomorphized fns bare Rust ABI fns?
[23:10:59] <pcwalton> yes I think so.
[23:11:28] <strcat> I have to go update everything declaring functions to keep around the rust type, for setting these attributes >.<
[23:11:57] <strcat> on the positive side it will make things higher-level-ish
[23:12:02] *** Quits: tikue (tkuehn@961CBB8C.E6CB677E.689607DE.IP) (Ping timeout)
[23:12:57] *** Joins: tikue (tkuehn@961CBB8C.E6CB677E.689607DE.IP)
[23:14:45] *** Joins: Jesin (Jessin_@moz-32C5E99B.cc.lehigh.edu)
[23:15:26] <dbaupp> strcat: you were asking about #[deprecated] etc yesterday; it works except for the things listed here https://github.com/mozilla/rust/issues/6875#ref-issue-18944485
[23:15:41] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[23:16:07] <dbaupp> strcat: (which basically means it works on standalone functions, literal structs & enum variants and possible static methods; but nothing else.)
[23:18:52] <dbaupp> *possibly
[23:21:08] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[23:21:08] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/A9V1BA
[23:21:08] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[23:21:32] *** Quits: tikue (tkuehn@961CBB8C.E6CB677E.689607DE.IP) (Ping timeout)
[23:21:59] *** Joins: tikue (tkuehn@961CBB8C.E6CB677E.689607DE.IP)
[23:26:07] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[23:26:07] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/FkOlOQ
[23:26:07] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[23:26:08] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[23:26:08] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/pvAINw
[23:26:08] <ghrust> 13rust/06auto 1473bb4de 15Eric Reed: Forgot to make accept() home for IO
[23:26:08] <ghrust> 13rust/06auto 146840076 15Eric Reed: Make I/O tests use run_in_mt_newsched_task to get more multi-threaded test coverage
[23:26:08] <ghrust> 13rust/06auto 142b2427c 15bors: auto merge of #8999 : anasazi/rust/multi-threaded-io-tests, r=brson...
[23:26:10] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[23:26:58] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[23:28:39] <ecr> yay! hopefully bors doesn't find anything else that's wrong
[23:28:55] <ecr> I really don't want to wade back into the madness that is multi-threaded un-thread-safe I/O
[23:28:55] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[23:31:12] *** Quits: tikue (tkuehn@961CBB8C.E6CB677E.689607DE.IP) (Quit: tikue)
[23:33:46] *** Joins: tikue (tkuehn@961CBB8C.E6CB677E.689607DE.IP)
[23:34:06] *** Joins: scabaloo (student@2DF259B0.65B70227.DDE5D3F6.IP)
[23:34:13] * strcat wishes we had more tests of this ABI stuff...
[23:34:39] <scabaloo> what's the best way to read a file in and convert it to bytes
[23:34:41] <scabaloo> ?
[23:35:04] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[23:36:14] <engla> would it be safe to add a specialization where the vec::bytes module has a function to get an uninitialized ~[u8] with length = capacity?
[23:36:32] <dbaupp> scabaloo: std::io::read_whole_file(&Path) -> Result<~[u8], ~str>
[23:36:34] <engla> this optimization is used all over the place, so presumably it is safe for ~[u8]
[23:36:46] *** Joins: dddd (chris@moz-B7BAB130.dynamic.tstt.net.tt)
[23:36:49] <erickt> engla: you could just do vec::with_capacity() to do that
[23:36:51] <engla> the elements are uninitialized
[23:36:54] <strcat> engla: no, it's undefined behaviour in LLVM to read uninit memory
[23:36:58] <strcat> afaik
[23:37:09] <strcat> doesn't matter if it seems to work
[23:37:16] <engla> erickt: this would be with_capacity followed by raw::set_len
[23:37:21] *** jorendorff is now known as jorendorff_away
[23:37:27] <engla> strcat: it's used in many places.
[23:37:32] <strcat> but it's not safe
[23:37:57] <dbaupp> it is safe to initialise it straight away though
[23:38:11] <dbaupp> (but we don't have the typesystem required to enforce this, I guess.)
[23:38:13] <engla> right, so it is safe if you know you don't read from it
[23:38:34] <erickt> dbaupp: well, it's "safe" as far as rustc is concerned, but it's not *safe*
[23:38:50] <dbaupp> erickt: I'm not sure I understand?
[23:39:06] <strcat> I'm not sure if undefined reads are just non-deterministic undefined values or undefined behaviour in LLVM
[23:39:27] <dbaupp> erickt: int x[10]; for (int i = 0; i < 10; i++) { x[i] = i } (in C) is safe, right?
[23:39:29] <engla> right now I'm trying to clean up the overflow bugs. I think it will end up with less unsafe code and less special optimizations using copy_memory though
[23:39:37] <engla> so it might be slower
[23:39:44] <erickt> dbaupp: in that until you write an element in each slot of the vec, doing a read could access unitialized memory
[23:40:04] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[23:40:05] <dbaupp> erickt: yeah
[23:40:56] *** Joins: msingle (Thunderbir@moz-20675462.nrflva.fios.verizon.net)
[23:41:25] <erickt> so, doing `let v = unsafe { let v = vec::with_capacity(5); vec::raw::set_len(v, 5); v }` is safe as far as rust is concerned, but if you then read `vec[2]` without writing to `vec[2]` you're doing something dangerous
[23:42:05] <strcat> erickt: well for a primitive type, it will trigger llvm warnings, but it's not necessarily unsafe if LLVM permits it
[23:42:10] <strcat> it's just non-deterministic
[23:42:16] <strcat> and LLVM has a concept of undefined values
[23:42:29] <strcat> they will not behave as normal values
[23:42:35] <erickt> that sad, I'd love for there to be an unsafe fn that abstracted this pattern since I use it all the time for hot paths in c bindings
[23:42:55] <engla> if it's safe it can be a safe function
[23:42:58] <strcat> 'an â€˜undefâ€˜ â€œvariableâ€ can arbitrarily change its value over its â€œlive rangeâ€. This is true because the variable doesnâ€™t actually have a live range. Instead, the value is logically read from arbitrary registers that happen to be around when needed, so the value is not necessarily consistent over time.'
[23:43:06] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[23:43:15] <strcat> it's a concept not existing elsewhere in rust
[23:43:30] <strcat> the values won't just be *arbitrary*, they are allowed to be *different* each time you read them
[23:43:34] <engla> yeah it doesn't sound like a rustic concept
[23:43:48] <strcat> so you could actually check if the value equals zero, then divide by it, and it would be undefined behaviour
[23:43:53] <dbaupp> yeah; I was thinking a POD trait that was for types that can take an bitpattern safely would be useful for this uninit initialisation (presumably such a function could be unsafe and just wrap the with_capacity/set_len)
[23:43:57] <strcat> because it might not equal zero when you check but it can equal zero when you divide
[23:44:04] <dbaupp> *any bitpattern
[23:44:07] <strcat> so really, you don't want to introduce undefined values ;p
[23:44:35] <tjc> brson: r? https://github.com/mozilla/rust/pull/9107
[23:44:38] *** Joins: jstevans (Instantbir@EF49C126.D2312BC6.DDE5D3F6.IP)
[23:45:14] <erickt> hrm. maybe if we had `vec::raw::with_capacity(uint, &fn(*T, uint) -> uint) -> ~[T]`, where the return value of the closure is used to set the vector length
[23:45:40] <erickt> or some better name that I couldn't come up with
[23:46:50] <dbaupp> brson: https://github.com/mozilla/rust/pull/9096 r?
[23:49:30] *** Quits: scabaloo (student@2DF259B0.65B70227.DDE5D3F6.IP) (Ping timeout)
[23:50:50] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[23:51:27] *** Quits: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[23:51:31] *** Quits: tikue (tkuehn@961CBB8C.E6CB677E.689607DE.IP) (Quit: tikue)
[23:53:16] *** Quits: jlw8k_000 (chatzilla@AC85A52.8878667B.DDE5D3F6.IP) (Ping timeout)
[23:53:17] *** Joins: tikue (tkuehn@961CBB8C.E6CB677E.689607DE.IP)
[23:53:52] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[23:54:38] *** Quits: Infiltrator (Infiltrato@4669028E.25A9890C.4B4F1E7A.IP) (Ping timeout)
[23:54:51] *** Joins: Infiltrator (Infiltrato@4669028E.25A9890C.4B4F1E7A.IP)
[23:55:38] *** Joins: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP)
[23:55:52] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: My lid went down)
[23:57:21] *** Quits: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP) (Ping timeout)
[23:57:28] *** Joins: jlw8k_000 (chatzilla@CC859A13.4DB138C4.DDE5D3F6.IP)
