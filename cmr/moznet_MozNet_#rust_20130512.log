[00:00:10] <Jeaye> Can we get that tagged for ICE build on Linux, brson? 
[00:00:40] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[00:03:19] <brson> Jeaye: ok
[00:03:40] <Jeaye> I'm trying to narrow down the code in q3 that cuases it now.
[00:05:10] *** Joins: z0w0 (zack@D1D2DBCB.806EA3ED.2CE63F58.IP)
[00:08:19] *** Quits: mdu (mdu@moz-9962C9F4.rev.numericable.fr) (Quit: mdu)
[00:08:48] *** aatch|bed is now known as aatch
[00:08:58] <aatch> brson, I saw, thanks!
[00:10:56] <ssbr> Jeaye: If you know, would you mind sharing what version of rust I'm supposed to build glfw-rs with? It fails for me on both 0.6 and incoming
[00:11:18] <ssbr> I've been waiting for bjz to come online, but he hasn't been here for the past couple of days :(
[00:11:31] <Jeaye> ssbr: It's stuck between the two right now. I'm working to fix it now, actually.
[00:11:54] <ssbr> Jeaye: that works too. I eagerly await your success! :>
[00:12:17] <Jeaye> Cheers; I'll let you know.
[00:15:00] <z0w0> tjc: can i r+ your rustpkg package ID pull req?
[00:15:42] <EXetoC> ssbr: doesn't fail for me
[00:15:46] <EXetoC> incoming
[00:16:57] <EXetoC> my rust build is a little over a day old though
[00:17:38] <ssbr> mine's from this morning, but it shouldn't matter
[00:17:40] <ssbr> http://bpaste.net/show/mOaRfamIAKAaundpJFVq/
[00:17:54] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[00:18:00] <tjc> z0w0: brson offered to review some of my pull requests, and this is the first one since then, so I wanted to give him a chance to get in the loop :-)
[00:18:03] <ssbr> strangely, adding "use core::task;" to what seems like an appropriate place (inside the relevant macro-generated module) does not actually fix that
[00:18:19] <ssbr> I guess I don't understand one of: {macros, modules, imports}
[00:22:56] *** Quits: Eridius (kevin@moz-415A52F9.members.linode.com) (Quit: leaving)
[00:24:11] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[00:25:55] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[00:26:20] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[00:26:21] *** Joins: Eridius (kevin@moz-533B0DB4.us)
[00:27:07] <EXetoC> ssbr: no wait
[00:27:25] <z0w0> tjc: righto
[00:27:35] <EXetoC> local_data::local_data_set(tls_key, @cbfun)
[00:27:36] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[00:27:38] <EXetoC> do local_data::local_data_get(tls_key).map |&cb| {
[00:27:54] <EXetoC> ssbr: I forgot about that. find the relevant lines, and change to that ^
[00:28:06] <EXetoC> the symbols were moved
[00:28:39] <ssbr> huh.
[00:28:59] <Jeaye> What change is this? o.O
[00:29:44] <EXetoC> ssbr: line 25 and 36 in event.rs
[00:30:13] <Jeaye> EXetoC: Change to what?
[00:31:33] <EXetoC> Jeaye: it's for glfw-rs, because those symbols were moved from task::local_data to local_data
[00:32:10] <Jeaye> EXetoC: I know. I've push access, so I was trying to figure out what needed to be changed so I can update the repo.
[00:32:22] <Jeaye> So it's just not in task anymore?
[00:32:29] <EXetoC> ok
[00:32:56] <EXetoC> change line 25 in event.rs to "local_data::local_data_set(tls_key, @cbfun);"
[00:32:59] <Jeaye> Yeah, builds here. I'll get that into master.
[00:33:10] <EXetoC> ok
[00:33:14] <Jeaye> Thanks, EXetoC
[00:33:52] <ssbr> \m/
[00:33:59] <ssbr> EXetoC: you are a hero!
[00:34:14] <EXetoC> c(:D)
[00:34:43] *** Joins: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net)
[00:35:09] *** Quits: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[00:35:33] <Jeaye> ssbr: You can pull the commit down now
[00:37:04] *** kimundi is now known as zz_kimundi
[00:42:19] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:42:19] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/HKBe3Q
[00:42:19] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:42:39] *** Parts: inolen (Adium@moz-FA2406D8.socal.res.rr.com) ()
[00:45:15] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:45:15] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/ieGtAg
[00:45:15] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:46:16] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[00:46:33] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[00:46:41] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Input/output error)
[00:46:43] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[00:46:44] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[00:48:17] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:48:17] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/ieGtAg
[00:48:17] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:48:19] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:48:19] <ghrust> 01[13rust01] 15bors pushed 9 new commits to 06auto: 02http://git.io/A73fHg
[00:48:19] <ghrust> 13rust/06auto 14d807f00 15Samuel Chase: Add to_str() for HashMaps, and some basic tests as well.
[00:48:19] <ghrust> 13rust/06auto 14fd5a352 15Samuel Chase: Removed test_hashmap() for the time, being. All tests pass with make check.
[00:48:20] <ghrust> 13rust/06auto 143c1e787 15Samuel Chase: All tests, including newly added test_hashmap() pass. The empty Hash Table doesn't need to be mutable.
[00:48:23] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:48:36] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Ping timeout)
[00:49:10] *** Joins: skchrko_ (sk@61A494B3.BA40E8A.AAC02D62.IP)
[00:51:40] *** Quits: z0w0 (zack@D1D2DBCB.806EA3ED.2CE63F58.IP) (Connection reset by peer)
[00:52:29] *** Joins: z0w0 (zack@D1D2DBCB.806EA3ED.2CE63F58.IP)
[00:55:44] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Quit: leaving)
[00:56:40] <tjc> nmatsakis: r? https://github.com/mozilla/rust/pull/6427
[01:03:58] *** Joins: dbaupp (Thunderbir@moz-856B3C14.lns20.syd6.internode.on.net)
[01:05:35] <aatch> rusti: sys::size_of<~u8>()
[01:05:37] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/XXXJ
[01:05:43] <aatch> rusti: sys::size_of::<~u8>()
[01:05:44] <rusti> 8
[01:05:49] <aatch> rusti: sys::size_of::<*u8>()
[01:05:50] <rusti> 8
[01:06:05] <aatch> Ah!, so they are normal-sized
[01:06:08] <aatch> rusti: sys::size_of::<@u8>()
[01:06:10] <rusti> 8
[01:06:15] <aatch> ?
[01:06:29] <strcat> they're all just pointers
[01:06:44] <strcat> but there are headers in @ and ~ boxes (they will go away eventually)
[01:06:57] <aatch> Ahh.
[01:07:27] <strcat> ~ pointers not containing @ don't need headers or gc metadata at all
[01:07:30] <strcat> it's a big waste
[01:08:08] <strcat> anyway graydon is working on it :)
[01:08:29] <aatch> strcat, I know :D.
[01:08:59] <strcat> the gc will store the metadata for managed allocations in an internal data structure
[01:09:07] <strcat> so they can just be removed from *all* boxes
[01:09:24] <strcat> @ will still pay the cost of metadata but normal ~ allocs won't have to
[01:10:35] <strcat> will be nice to have ~(uint, uint) be a 16-byte alloc instead of 64-byte like it is now.
[01:12:04] <aatch> strcat, I'm currently battling Rust to try and test the thread-safety of my data structure.
[01:12:13] <aatch> Any ideas?
[01:12:33] <aatch> I'm pretty sure my test is more buggy than the implementation
[01:12:38] <strcat> heh
[01:13:12] <aatch> It's frustrating...
[01:13:46] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[01:13:46] *** ChanServ sets mode: +o brson
[01:13:51] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[01:14:03] * strcat wants default methods ;p
[01:14:12] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Client exited)
[01:15:10] *** darkf is now known as budyholly
[01:16:33] *** budyholly is now known as darkf
[01:19:11] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[01:19:11] *** ChanServ sets mode: +o brson
[01:23:38] *** Joins: bEcker (Thunderbir@moz-90785708.resnet.ucsc.edu)
[01:24:03] <dbaupp> aatch: progress?
[01:24:23] <dbaupp> or is concurrency still causing explosions? :P
[01:24:53] <aatch> dbaupp, seems to be working
[01:25:27] <dbaupp> wooo :D
[01:25:46] <aatch> I mean, the test still segfaults sometimes, but I think that's a lack of synchronization in the test.
[01:26:20] <aatch> Since it almost always declares the test "passed" before segfaulting.
[01:26:30] <dbaupp> oh, what?
[01:26:40] <dbaupp> how does that work?
[01:26:43] <aatch> Which suggests dangling pointers in the threads
[01:27:03] <aatch> the queue is freed while the "worker" threads are still going.
[01:27:10] <dbaupp> (does valgrind tell you anything useful?)
[01:27:14] <dbaupp> aatch: oh, of course...
[01:27:25] <dbaupp> concurrency is so hard
[01:27:50] <aatch> dbaupp, especially when you have to work around some of Rust's stuff like this.
[01:29:57] *** Quits: bEcker (Thunderbir@moz-90785708.resnet.ucsc.edu) (Ping timeout)
[01:30:19] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:30:19] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 141c08b29 to 1482164a1: 02http://git.io/N3iJvQ
[01:30:19] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:30:22] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:30:23] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/T_CRTQ
[01:30:23] <ghrust> 13rust/06auto 14a9c8668 15Tim Chevalier: rustpkg: Implement URL-like package IDs...
[01:30:23] <ghrust> 13rust/06auto 14a00412c 15bors: auto merge of #6418 : catamorphism/rust/rustpkg, r=brson...
[01:30:23] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:32:37] *** Joins: bEcker (Thunderbir@moz-90785708.resnet.ucsc.edu)
[01:36:15] <strcat> new borrow checker <3
[01:36:45] <aatch> dbaupp, I have encounted the age-old problem of "valgrind makes my program work"
[01:36:56] <strcat> aatch: valgrind makes it single-threaded
[01:37:17] <aatch> strcat, really? Dammit
[01:37:22] <aatch> any way around that?
[01:37:23] <dbaupp> aatch: that's always nice :(
[01:38:01] <strcat> aatch: don't really think so
[01:38:30] <aatch> Hmm, gdb it is!
[01:42:01] <Jesse> do ASan and MSan work with Rust? (as an alternative to Valgrind)
[01:42:09] <strcat> no
[01:42:22] <strcat> they're part of clang (and now gcc)
[01:42:43] <strcat> the compiler generates checks for unsafe features in the language
[01:43:08] <strcat> there are support libraries but they're more part of the frontend than codegen
[01:43:39] <aatch> (gdb is not helpful because it looks like it's happening after a task switch, so my backtrace is like 4 frames and a complaint)
[01:44:18] <aatch> But that means I don't have to worry about it for now, because this won't be used inside tasks.
[01:51:18] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:51:18] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14a00412c to 1482164a1: 02http://git.io/N3iJvQ
[01:51:18] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:51:21] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:51:21] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/iH7Y3g
[01:51:21] <ghrust> 13rust/06auto 144958e9b 15Huon Wilson: Remove core executable
[01:51:21] <ghrust> 13rust/06auto 14f2f10bd 15bors: auto merge of #6420 : huonw/rust/rm-exec, r=thestinger
[01:51:21] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:54:21] * strcat hopes this will make the trie significantly faster ;p
[01:55:23] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[01:56:05] <dbaupp> strcat: ?
[01:56:20] <strcat> adding little vector buckets
[01:56:24] <dbaupp> a patricia/crit-bit trie?
[01:56:30] <strcat> dbaupp: core::trie
[01:56:32] <strcat> it's a radix trie
[01:56:34] <dbaupp> yeah
[01:56:50] <dbaupp> (wasn't there a plan to implement it as a patricia trie?)
[01:56:52] <strcat> I think a patricia trie has path compression (this doesn't yet)
[01:57:05] <strcat> first I want to add the buckets, which makes it a burst trie
[01:57:19] <strcat> and the burst trie paper claims path compression isn't worth it once you do that, so we'll see
[01:57:33] <strcat> anyway no more borrowck issues blocking it
[01:57:34] <strcat> easy now :)
[01:57:35] <dbaupp> is graydon using core::trie in the gc?
[01:57:38] <strcat> yes
[01:57:56] <dbaupp> awesome :D
[01:58:52] <aatch> dbaupp, WorkQueue now has (inefficient) shrinking!
[01:59:25] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[01:59:26] <strcat> hmm
[01:59:35] <strcat> I don't think the swap implementation on the Map trait is right
[01:59:42] <strcat> or wait
[01:59:44] <strcat> nvm it is
[02:00:33] <strcat> trie.rs:55:28: 55:33 error: cannot move out of captured outer variable
[02:00:34] <strcat> trie.rs:55                 return Some(value);
[02:00:36] <strcat>                                        ^~~~~
[02:00:38] <strcat> awww
[02:00:42] <strcat> that's going to be annoying to work around...
[02:01:41] * strcat would rather not make this recursive
[02:02:41] *** Quits: bEcker (Thunderbir@moz-90785708.resnet.ucsc.edu) (Quit: bEcker)
[02:03:17] <strcat> just can't use a for loop
[02:03:20] <strcat> :(
[02:05:42] <dbaupp> strcat: just reading the paper, the burst trie looks fancy
[02:05:55] <strcat> dbaupp: yeah but there's a whole range of stuff you can do
[02:06:07] <strcat> basically, you store suffixes in buckets
[02:06:17] <strcat> the bucket can be a sorted array, unsorted array, tree, whatever
[02:06:28] <strcat> you have a heuristic to burst the buckets when they get too big
[02:06:36] <strcat> and also to merge back into a bucket
[02:06:47] <strcat> the simplest heuristic just being size.
[02:07:02] <strcat> so really, the simplest form is just an unsorted array bursting at something like 8 or 16
[02:07:27] <strcat> instead of what it does now where it "bursts" after there's more than one
[02:08:25] <strcat> anyway the goal is just to make it do less upkeeping work (splitting and merging)
[02:08:45] <dbaupp> yeah, and avoid having too many pointers to follow
[02:09:02] <strcat> yup, reduces the height
[02:09:28] <strcat> it makes the worst-case better
[02:11:31] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Client exited)
[02:11:36] <strcat> we'll see ;p
[02:12:26] <dbaupp> once you get around the move checker
[02:12:34] <strcat> well that was easy
[02:12:38] <strcat> just needed to throw out the for loop
[02:12:56] <strcat> dbaupp: http://ix.io/5AI the current really naive bucket
[02:12:56] <dbaupp> oh, so yes to recursion?
[02:13:05] <strcat> dbaupp: just used 'loop'
[02:13:08] <strcat> I could use 'while'
[02:13:10] <strcat> I guess
[02:13:24] <dbaupp> yup
[02:13:28] <strcat> it just doesn't like the closure
[02:13:44] <strcat> it's smart enough to know that the for loop could be using a buggy function that doesn't actually break ;p
[02:14:11] <dbaupp> does saving vec.len() outside the loop help? instead of recomputing it each time, or is LLVM smart enough for that?
[02:14:23] <strcat> dbaupp: well it doesn't really compute anything
[02:14:27] <strcat> it's just reading a field from the vec box
[02:14:37] <strcat> it will be in the CPU cache so I don't think it matters
[02:14:52] * strcat usually doesn't worry about that stuff
[02:14:57] <strcat> never turns out to matter :)
[02:15:00] <dbaupp> oh, right, it's stored with the pointer, not at the other end
[02:15:07] *** Quits: jack (jack@moz-F1B36F9F.hsd1.nm.comcast.net) (Quit: Leaving.)
[02:15:19] <strcat> dbaupp: well it is actually stored at the other end
[02:15:23] <dbaupp> but that looks pretty good :)
[02:15:33] <dbaupp> strcat: oh, oops
[02:15:35] <strcat> ~[] is 'ptr -> {len,cap,inline_data}
[02:15:49] <dbaupp> ah, of course, ~ not &
[02:16:09] <dbaupp> (plus gc header)
[02:16:53] <strcat> I think an unsorted array will do well
[02:17:27] <strcat> binary search won't actually be faster until it gets really big.... and inserting/removing from a sorted array is O(n) anyway (and moving the data is probably worse than a linear search)
[02:17:41] * strcat already tried using treemap for buckets and it was slower :(
[02:17:59] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: Computer has gone to sleep.)
[02:17:59] *** Quits: skchrko_ (sk@61A494B3.BA40E8A.AAC02D62.IP) (Connection reset by peer)
[02:18:09] *** Joins: skchrko_ (sk@61A494B3.BA40E8A.AAC02D62.IP)
[02:18:19] <dbaupp> what threshold are you using?
[02:18:30] <strcat> for treemap? I tried a bunch
[02:18:39] <strcat> I haven't actually integrating this one yet :)
[02:18:43] <strcat> integrated*
[02:18:46] <dbaupp> for bursting
[02:18:57] <strcat> I'll just start with an arbitrary 16
[02:20:54] <strcat> now the fun part, figuring out how to glue this all together again :)
[02:37:56] <strcat> rustc: /build/rust-incoming-git/src/rust/src/llvm/lib/IR/Instructions.cpp:1084: void llvm::StoreInst::AssertOK(): Assertion `getOperand(0)->getType() == cast<PointerType>(getOperand(1)->getType())->getElementType() && "Ptr must be a pointer to Val type!"' failed.
[02:37:57] <strcat> dammit
[02:38:00] <strcat> :[
[02:40:28] <strcat> while loops everywhere
[02:40:31] <strcat> I guess.
[02:40:36] <strcat> pattern matching doesn't work at all ;p
[02:42:10] <dbaupp> in lets?
[02:42:15] <strcat> yeah
[02:42:20] <dbaupp> yeah
[02:42:22] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[02:42:22] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/iH7Y3g
[02:42:22] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:42:29] <dbaupp> it's annoying
[02:43:08] <dbaupp> (it recently got worse too, you can move out of a struct with a destructor in a let without a warning now.)
[02:43:23] <strcat> dbaupp: well...
[02:43:27] <strcat> you could do worse things before
[02:43:33] <strcat> let &y = &x;
[02:43:35] <strcat> copies *anything*
[02:43:39] <dbaupp> strcat: you can still do them
[02:43:40] <strcat> whether or not it is Copy
[02:43:43] <dbaupp> right?
[02:43:45] <strcat> dbaupp: yes
[02:44:01] <dbaupp> yeah, so that ^ was just something I had to add recently :(
[02:44:03] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[02:44:42] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Quit: leaving)
[02:44:45] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[02:45:19] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[02:45:19] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/FEcttw
[02:45:19] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:45:19] <dbaupp> strcat: speaking of which, could you close the issues mentioned in https://github.com/mozilla/rust/pull/6385 ?
[02:45:19] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Quit: leaving)
[02:45:23] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[02:45:23] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Quit: bytbox)
[02:45:36] <strcat> dbaupp: done :)
[02:45:40] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[02:46:18] <dbaupp> err, oops, I opened one of them... I could've closed it myself
[02:46:24] <dbaupp> haha
[02:47:14] *** Joins: jack (jack@moz-F1B36F9F.hsd1.nm.comcast.net)
[02:48:18] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[02:48:18] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/FEcttw
[02:48:18] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:48:20] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[02:48:20] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/ZHS06A
[02:48:20] <ghrust> 13rust/06auto 14b99f89a 15Tim Chevalier: Warning police
[02:48:20] <ghrust> 13rust/06auto 14d383f46 15Corey Richardson: clean up the last bit of warnings
[02:48:20] <ghrust> 13rust/06auto 14a3c4916 15bors: auto merge of #6423 : cmr/rust/warnings, r=catamorphism
[02:48:22] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:48:56] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Quit: leaving)
[02:52:52] <strcat> nice it almost works!
[02:53:36] <strcat> almost ;p
[02:56:03] * strcat just hasn't implemented iteration
[02:56:06] <strcat> anyway benchmark time
[02:57:30] <strcat> well it works... it's incredibly slow atm :)
[02:57:54] <dbaupp> strcat: yay
[02:58:04] *** Quits: zz_kimundi (kimundi@moz-9D7D84EF.dip0.t-ipconnect.de) (Ping timeout)
[02:58:14] <dbaupp> now it's optimisation time?
[02:58:19] <strcat> yeah
[02:58:32] <strcat> might as well see if it's actually fast before doing iteration
[02:59:43] <strcat> http://ix.io/5AM old numbers
[03:00:02] <dbaupp> what's the old one like?
[03:00:09] <strcat> that's the old one
[03:00:16] <dbaupp> oh
[03:00:24] <strcat> http://ix.io/5AM (old), http://ix.io/5AN (new)
[03:00:29] <strcat> needs to be optimized though.
[03:00:34] <strcat> and it has some bugs making it do extra work
[03:00:52] <strcat> same ballpark which is the important thing.
[03:00:54] <dbaupp> yeah, removing looks pretty bad
[03:01:11] *** Joins: zz_kimundi (kimundi@moz-51380A8A.dip0.t-ipconnect.de)
[03:01:28] *** zz_kimundi is now known as kimundi
[03:05:37] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[03:05:37] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: dylukes)
[03:06:38] <strcat> I don't understand why search is worse :(
[03:06:53] *** Quits: tcsc (tcsc@moz-A838B260.dhcp.nwtn.ct.charter.com) (Quit: bye!)
[03:07:07] *** Joins: tcsc (tcsc@moz-A838B260.dhcp.nwtn.ct.charter.com)
[03:07:31] * strcat debugs a bit
[03:07:52] *** Joins: thelivingdedx_ (thelivingd@moz-9453CC48.austin.res.rr.com)
[03:08:39] <thomaslee> tjc, eyy think I've figured out the rest of the static-methods-on-reexported-traits issue. :)
[03:09:50] <strcat> {map: {root: {count: 1, children: [External({data: ~[{key: 123455, value: ()}, {key: 123456, value: ()}, {key: 123457, value: ()}, {key: 123458, value: ()}]}), Nothing, Nothing, Nothing, Nothing, Nothing, Nothing, Nothing, Nothing, Nothing, Nothing, Nothing, Nothing, Nothing, Nothing, Nothing]}, length: 4}}
[03:09:52] <strcat> well
[03:09:57] <strcat> it definitely makes it more shallow...
[03:10:11] <strcat> maybe I need to bump it up to 256-way
[03:10:31] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[03:11:19] <strcat> nope :(
[03:12:16] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Client exited)
[03:13:41] <aatch> stupid valgrind not knowing about __morestack
[03:13:56] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[03:14:07] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[03:16:51] *** Joins: catpigger (catpig@moz-1662AE50.dip0.t-ipconnect.de)
[03:17:55] *** Quits: catpig (catpig@moz-DB8BBE41.dip0.t-ipconnect.de) (Ping timeout)
[03:22:20] <strcat> dbaupp: meh it's really not doing well :(
[03:23:30] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[03:24:37] <strcat> dbaupp: http://ix.io/5AP (new)
[03:24:51] <strcat> dbaupp: http://ix.io/5AQ (old)
[03:25:07] <strcat> so... faster
[03:25:22] <strcat> but not a huge improvement, and remove is a lot slower for sequential ones
[03:27:13] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[03:29:05] *** Joins: brson (brson@E9CDE21E.991753BB.CA4D1600.IP)
[03:29:05] *** ChanServ sets mode: +o brson
[03:29:09] *** Quits: themgt (themgt@moz-F5F3FFDF.dhcp.gnvl.sc.charter.com) (Quit: themgt)
[03:29:24] *** Quits: brson (brson@E9CDE21E.991753BB.CA4D1600.IP) (Quit: leaving)
[03:29:49] *** Joins: brson (brson@E9CDE21E.991753BB.CA4D1600.IP)
[03:29:49] *** ChanServ sets mode: +o brson
[03:30:00] <dbaupp> strcat: that still pretty good
[03:30:05] <dbaupp> 33% faster for searching
[03:30:44] <aatch> brson, I almost have a working basic queue!
[03:30:48] <dbaupp> and things, in general, are more likely to resemble random integers than sequential numbers, right?
[03:31:02] <tjc> thomaslee: Oops, sorry, was on the phone
[03:31:05] <tjc> but, great!
[03:31:06] <strcat> dbaupp: I think the gc ones will mostly resemble sequential ones
[03:31:12] <dbaupp> strcat: oh, right
[03:31:13] <dbaupp> yes
[03:31:22] <dbaupp> but it's stil faster at insert
[03:31:30] <strcat> remove is terrible though ;p
[03:31:36] <dbaupp> fix it! :P
[03:31:44] <strcat> http://ix.io/5AR what I have atm
[03:32:05] <strcat> made it 256-ary
[03:32:25] <thomaslee> tjc, all good :) putting together a fix now. will @ you on the PR.
[03:32:27] <strcat> I think it's structured a bit wrong.
[03:32:38] <tjc> thomaslee: cool, will look at it tonight or tomorrow
[03:33:00] <dbaupp> strcat: is it the recursion in remove?
[03:33:09] <strcat> dbaupp: it did recursion before
[03:33:21] <strcat> but before it didn't have to do moves in remove.
[03:33:22] <dbaupp> oh
[03:33:23] <strcat> now it does :(
[03:33:36] <strcat> with each level of recursion
[03:33:36] <dbaupp> are't moves (essentially) cost-less?
[03:33:37] <thomaslee> sweet! thanks.
[03:33:39] <strcat> dbaupp: no
[03:33:42] <strcat> they cost a lot
[03:33:53] <strcat> a move is a shallow copy and it zeroes the source
[03:33:56] <dbaupp> oh, so they're not just renaming the item/assigning it's ownership?
[03:33:57] *** Joins: lbonn (lbonn@moz-29C8E1BA.ap-w02.canvas.ne.jp)
[03:34:02] <strcat> dbaupp: nope
[03:34:05] <dbaupp> ah
[03:34:09] <strcat> they are very, very costly atm ;p
[03:34:09] *** Quits: tcsc (tcsc@moz-A838B260.dhcp.nwtn.ct.charter.com) (Quit: bye!)
[03:34:09] <dbaupp> :(
[03:34:19] *** Joins: tcsc (tcsc@moz-A838B260.dhcp.nwtn.ct.charter.com)
[03:34:44] <strcat> C++ moves only have to zero a flag
[03:34:52] <strcat> and they can reuse a ptr as the flag
[03:35:19] <strcat> anyway it does moves to make it borrowck
[03:35:25] <strcat> not because it fundamentally has to move stuff around
[03:35:41] <dbaupp> is that technically impossible in Rust, or just not implemented?
[03:35:49] <strcat> just not implemented
[03:35:55] <strcat> custom destructors -> it makes a drop flag for you
[03:35:59] <aatch> strcat, or you can do what I do and use terrible, terrible code to implement the same thing.
[03:36:03] <strcat> built-in memory management -> it zeroes the whole thing
[03:36:18] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:36:18] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14a3c4916 to 14f2f10bd: 02http://git.io/N3iJvQ
[03:36:18] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:36:18] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:36:18] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/E00_CQ
[03:36:18] <ghrust> 13rust/06auto 1482f963e 15gifnksm: libcore: Change `each_val` to follow new for-loop protocol
[03:36:18] <ghrust> 13rust/06auto 1435e6ce5 15bors: auto merge of #6426 : gifnksm/rust/new-iter, r=catamorphism
[03:36:18] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:36:22] <dbaupp> strcat: put a custom destructor on the Child<T> ?
[03:36:31] <strcat> dbaupp: it will still be zeroing ;p
[03:36:37] <strcat> because it has normal destructors too
[03:36:44] <strcat> and the drop flag is bad
[03:36:48] <strcat> it adds a field
[03:36:53] <strcat> it shouldn't have to in most cases
[03:37:05] <benh> User traits can't add fields, right?
[03:37:15] <aatch> traits can't add fields
[03:37:30] <benh> Drop is a trait! Drop adds a field!
[03:37:30] <strcat> Drop adds a drop flag and checks it for you before calling the destructor
[03:37:35] <dbaupp> benh: nope, Drop is a magical-compiler trait
[03:37:43] <aatch> Drop doesn't count
[03:37:43] <strcat> so
[03:37:53] <strcat> it's pretty terrible for many things
[03:38:05] <strcat> a refcounted ptr for example - you want to use the ptr as the "drop flag" like C++
[03:38:20] <aatch> It is magical compared to the also-magical lang-item traits
[03:39:30] <strcat> I have to find a solution to all of these moves/swaps I end up doing
[03:39:45] <strcat> I don't really want the solution to be writing treemap and the trie with unsafe code...
[03:40:18] <strcat> it's a huge perf hit though ;\
[03:44:34] *** Quits: RMF (RMF@moz-A559AD33.dsl.telepac.pt) (Ping timeout)
[03:44:55] *** Quits: tjc (tjc@A5087023.2354C43D.D8E68FF6.IP) (Quit: zzzzzzzzzz)
[03:46:51] *** Quits: EXetoC (ex@moz-C741B177.customer.t3.se) (Quit: WeeChat 0.4.0)
[03:47:55] *** Joins: RMF (RMF@moz-4EC53CF7.dsl.telepac.pt)
[03:48:27] *** Quits: Jesin (Jessin_@moz-5654D37.washdc.fios.verizon.net) (Ping timeout)
[03:48:31] *** Joins: tjc (tjc@A5087023.2354C43D.D8E68FF6.IP)
[03:48:31] *** ChanServ sets mode: +o tjc
[03:49:21] *** Quits: tjc (tjc@A5087023.2354C43D.D8E68FF6.IP) (Quit: zzzzzzzzzz)
[03:56:19] *** Joins: Jesin (Jessin_@moz-5654D37.washdc.fios.verizon.net)
[03:57:02] *** Joins: barosl (barosl@1E71221E.C81E10FB.7544CABF.IP)
[03:59:43] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[04:04:28] *** Joins: akashj87 (akash@1328043.9EA85462.35E3DDC8.IP)
[04:10:14] *** Parts: judder (maradukewa@DABDEEA3.F2C0D0AC.78E362FE.IP) ()
[04:14:15] *** Quits: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP) (Quit: lmandel)
[04:15:33] <strcat> dbaupp: anyway going to restructure it as a normal trie first....
[04:16:18] <strcat> the root is a TrieNode atm instead of being a Child
[04:22:23] *** Joins: themgt (themgt@moz-692B8AEF.dhcp.gnvl.sc.charter.com)
[04:22:30] *** Quits: themgt (themgt@moz-692B8AEF.dhcp.gnvl.sc.charter.com) (Quit: themgt)
[04:24:07] *** Quits: brson (brson@E9CDE21E.991753BB.CA4D1600.IP) (Ping timeout)
[04:24:40] <strcat> hm
[04:24:45] <strcat> bors appears to have gotten stuck...
[04:25:17] <Luqman> talking the rest of the weekend off
[04:25:34] <strcat> the tests passed ;\
[04:26:05] <cmr> he's our robotic overlord, he can't take vacations!
[04:26:26] *** Quits: heftig (heftig@moz-8FBC8595.dip0.t-ipconnect.de) (Ping timeout)
[04:26:37] <strcat> there he goes.
[04:27:15] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:27:15] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/E00_CQ
[04:27:15] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:27:41] *** Joins: brson (brson@58B3E13.EF2694B5.DFAC6AA7.IP)
[04:27:41] *** ChanServ sets mode: +o brson
[04:27:43] *** Joins: cdidd (cdidd@moz-EBCC8C9A.broadband.corbina.ru)
[04:28:04] *** thelivingdedx_ is now known as thelivingded
[04:28:05] *** Joins: heftig (heftig@moz-B3073D58.dip0.t-ipconnect.de)
[04:30:14] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:30:14] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/2nYQtA
[04:30:14] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:30:19] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:30:19] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/23Eh2w
[04:30:19] <ghrust> 13rust/06auto 14ed41864 15Tim Chevalier: Warning police
[04:30:19] <ghrust> 13rust/06auto 14a279d65 15Corey Richardson: clean up the last bit of warnings
[04:30:19] <ghrust> 13rust/06auto 141f62b23 15bors: auto merge of #6431 : catamorphism/rust/warnings, r=catamorphism...
[04:30:19] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:30:24] *** Quits: thelivingded (thelivingd@moz-9453CC48.austin.res.rr.com) (Quit: Leaving)
[04:34:11] <aatch> work-stealing algorithm: https://gist.github.com/Aatch/5562415 (brson, if you are awake)
[04:35:11] <cmr> / scoping because borrowck
[04:35:18] <aatch> cmr, yep
[04:35:22] <cmr> aatch: is that due to a current limitation?
[04:35:59] <aatch> cmr, kinda. Basically it doesn't check to see if I use the borrow later, it just applies it for the entire block
[04:36:15] <aatch> as limitations go, it's kinda benign
[04:36:34] <aatch> the only reason I hit it is because this is decidedly un-rust code
[04:46:07] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[04:46:47] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[04:51:13] *** Quits: dbaupp (Thunderbir@moz-856B3C14.lns20.syd6.internode.on.net) (Ping timeout)
[04:59:20] *** Joins: inolen (Adium@moz-FA2406D8.socal.res.rr.com)
[04:59:21] *** Joins: igl (igl@moz-FD12F972.adsl.alicedsl.de)
[05:00:00] *** Quits: igl1 (igl@moz-12E538EE.adsl.alicedsl.de) (Ping timeout)
[05:02:28] *** Quits: inolen (Adium@moz-FA2406D8.socal.res.rr.com) (Quit: Leaving.)
[05:06:51] <aatch> Woo, integrated into core, doing a `make check` now
[05:08:43] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[05:09:38] *** Quits: doomlord (doomlod@moz-1D2F91FA.range86-150.btcentralplus.com) (Connection reset by peer)
[05:13:15] <brson> aatch: wow!
[05:13:34] <aatch> brson, good wow?
[05:14:30] <brson> aatch: i'm shocked you got it working so fast
[05:15:36] <aatch> brson, well it's not the best version of the algorithm. I'm doing the relatively slow version of copying the data structure.
[05:15:46] <aatch> I mean the buffer
[05:16:03] <aatch> I'm also not 100% convinced it works completely.
[05:16:43] <aatch> but it doesn't leak so at least theres that.
[05:17:04] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:17:08] <strcat> rusti: 1
[05:17:09] <rusti> 1
[05:17:20] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[05:19:24] *** Joins: inolen (Adium@moz-FA2406D8.socal.res.rr.com)
[05:19:32] <brson> aatch: does the chase lev paper say anything about memory barriers?
[05:19:45] <aatch> brson, nope.
[05:20:05] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:20:07] <aatch> I was thinking about that though.
[05:20:18] <strcat> rusti: core::run::run_program("sync", []);
[05:21:11] *** Joins: an0nymous (an0nymous@moz-A6B0CE4.tx.res.rr.com)
[05:21:39] <strcat> heh the POSIX sync API doesn't report errors
[05:22:16] <aatch> brson, I'm pretty sure that the get can acq and I should probably make the set atomic and use rel
[05:23:46] <aatch> But I was having difficultly getting an atomic set to not segfault (for some reason...)
[05:24:46] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[05:24:49] <brson> aatch: why are top and bottom u64 instead of uint?
[05:25:24] <aatch> brson, because thats the equivalent in the paper and I forgot to change it...
[05:26:32] <Jeaye> heh
[05:27:43] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:27:46] <strcat> rusti: 5
[05:27:47] <rusti> 5
[05:28:38] *** Joins: tjc (tjc@A5087023.2354C43D.D8E68FF6.IP)
[05:28:38] *** ChanServ sets mode: +o tjc
[05:29:07] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[05:30:42] *** Joins: mindginative (mindginati@moz-618C7234.dsl.dyn.ihug.co.nz)
[05:30:46] *** Quits: mindginative (mindginati@moz-618C7234.dsl.dyn.ihug.co.nz) (Quit: mindginative)
[05:31:51] *** Quits: tjc (tjc@A5087023.2354C43D.D8E68FF6.IP) (Quit: Places to go, people to annoy)
[05:33:02] <brson> aatch: nice work
[05:34:07] <aatch> brson, thanks
[05:35:37] *** Joins: steven_is_false (steven@moz-144077DE.bchsia.telus.net)
[05:38:05] *** Parts: steven_is_false (steven@moz-144077DE.bchsia.telus.net) ()
[05:39:15] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:39:15] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/23Eh2w
[05:39:15] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:40:40] *** Joins: steven_is_false (steven@moz-144077DE.bchsia.telus.net)
[05:41:13] <steven_is_false> Hello can anyone help me to figure out when syntax::ast::struct_immutable was taken out of the latest incoming?
[05:41:28] <steven_is_false> I'm trying to fix rust-bindgen.
[05:42:13] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:42:13] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/bd1ixg
[05:42:13] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:42:16] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:42:16] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/knJktA
[05:42:16] <ghrust> 13rust/06auto 14a2b81cc 15gifnksm: libstd: Fix BigUint::is_even
[05:42:16] <ghrust> 13rust/06auto 1436771ef 15bors: auto merge of #6429 : gifnksm/rust/bigint-is_even, r=catamorphism...
[05:42:16] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:42:45] *** Joins: dbaupp (Thunderbir@817BA5B2.DA81F10B.BF84249E.IP)
[05:45:29] *** Quits: dbaupp (Thunderbir@817BA5B2.DA81F10B.BF84249E.IP) (Ping timeout)
[05:47:26] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[05:49:40] <Luqman> steven_is_false: so master still seems to have it
[05:49:53] <aatch> steven_is_false, one of pcwalton's
[05:50:07] <steven_is_false> aatch: Oh thanks!
[05:50:14] *** Joins: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net)
[05:50:26] <Luqman> ah, it was removed since mut on fields is deprecated now
[05:51:30] <aatch> presumably when mutable fields were properly removed (other than parsing and warning)
[05:56:15] *** Quits: blitter (blitter@moz-7C98731E.dyn.centurytel.net) (Quit: Leaving)
[05:59:23] *** Quits: akashj87 (akash@1328043.9EA85462.35E3DDC8.IP) (Ping timeout)
[05:59:24] *** Quits: spaceships (spaceships@moz-8323E7E6.msl-mt.client.bresnan.net) (Quit: leaving)
[05:59:37] *** Joins: akashj87 (akash@942A6E8E.311ED440.35E3DDC8.IP)
[06:00:52] <steven_is_false> So I fixed that problem, and a few others but now I'm dealing with annoying borrowing stuff.
[06:04:15] *** Parts: steven_is_false (steven@moz-144077DE.bchsia.telus.net) ()
[06:17:42] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[06:18:12] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[06:18:12] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Connection reset by peer)
[06:21:24] *** Quits: joshua_ (joshua@moz-45967CBE.emarhavil.com) (Ping timeout)
[06:21:42] *** Quits: sully (sully@moz-45967CBE.emarhavil.com) (Ping timeout)
[06:21:47] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[06:24:25] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[06:26:47] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[06:29:47] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[06:32:57] *** Joins: akashj87_ (akash@20E219FC.7FACFDC5.35E3DDC8.IP)
[06:33:29] *** Quits: akashj87 (akash@942A6E8E.311ED440.35E3DDC8.IP) (Ping timeout)
[06:40:06] *** Joins: akashj87__ (akash@9EDE68B.3BEEE978.35E3DDC8.IP)
[06:40:25] <aatch> Yay, merging in brson's io branch... -.-
[06:40:34] *** Joins: joshua_ (joshua@moz-45967CBE.emarhavil.com)
[06:40:38] *** Quits: akashj87_ (akash@20E219FC.7FACFDC5.35E3DDC8.IP) (Ping timeout)
[06:40:50] *** Quits: bbrittain (ben@moz-632384CB.dr02.roch.ny.frontiernet.net) (Quit: Leaving)
[06:42:21] *** Joins: sully (sully@moz-45967CBE.emarhavil.com)
[06:44:34] *** Joins: akashj87_ (akash@A1017F69.9EA85462.35E3DDC8.IP)
[06:45:12] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[06:45:13] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/knJktA
[06:45:13] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[06:45:18] *** Quits: akashj87__ (akash@9EDE68B.3BEEE978.35E3DDC8.IP) (Ping timeout)
[06:46:02] *** Joins: akashj87__ (akash@15B9D5CA.263188A0.35E3DDC8.IP)
[06:46:47] *** Quits: akashj87_ (akash@A1017F69.9EA85462.35E3DDC8.IP) (Ping timeout)
[06:50:51] *** Quits: twm (twm@moz-13417AD3.dsl.static.sonic.net) (Ping timeout)
[06:54:16] *** Joins: haard (fredrik@moz-6A86987C.dynamic.se.alltele.net)
[06:56:53] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[06:56:57] *** Quits: inolen (Adium@moz-FA2406D8.socal.res.rr.com) (Connection reset by peer)
[06:57:05] *** Joins: inolen (Adium@moz-FA2406D8.socal.res.rr.com)
[06:58:29] *** Joins: akashj87 (akash@CF561113.DCF118FF.35E3DDC8.IP)
[06:58:49] *** Quits: akashj87__ (akash@15B9D5CA.263188A0.35E3DDC8.IP) (Ping timeout)
[07:00:50] *** Joins: akashj87_ (akash@6F4CC64A.5C101765.35E3DDC8.IP)
[07:01:30] *** Quits: akashj87 (akash@CF561113.DCF118FF.35E3DDC8.IP) (Ping timeout)
[07:04:59] *** Quits: akashj87_ (akash@6F4CC64A.5C101765.35E3DDC8.IP) (Ping timeout)
[07:05:09] *** Parts: z0w0 (zack@D1D2DBCB.806EA3ED.2CE63F58.IP) ()
[07:06:08] *** Joins: twm (twm@moz-13417AD3.dsl.static.sonic.net)
[07:07:11] *** Joins: jaen1 (jaen@moz-E0979827.copit.pl)
[07:07:54] *** Quits: jaen (jaen@moz-DF7245BD.play-internet.pl) (Ping timeout)
[07:13:03] *** jaen1 is now known as jaen
[07:15:46] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[07:17:29] *** Quits: haard (fredrik@moz-6A86987C.dynamic.se.alltele.net) (Ping timeout)
[07:23:41] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[07:24:09] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[07:25:03] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[07:30:03] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[07:30:49] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: WeeChat 0.4.0)
[07:32:02] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[07:32:09] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[07:32:35] *** Joins: jviereck (Adium@moz-C4A71F54.dclient.hispeed.ch)
[07:33:49] *** Quits: tcsc (tcsc@moz-A838B260.dhcp.nwtn.ct.charter.com) (Quit: bye!)
[07:33:59] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[07:34:01] *** Joins: tcsc (tcsc@moz-A838B260.dhcp.nwtn.ct.charter.com)
[07:35:37] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[07:36:06] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[07:37:45] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[07:38:14] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[07:39:53] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[07:40:23] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[07:42:04] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[07:42:33] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[07:44:35] *** Joins: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp)
[07:50:08] *** Joins: haard (fredrik@moz-6A86987C.dynamic.se.alltele.net)
[07:50:42] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[07:52:04] *** Quits: haard (fredrik@moz-6A86987C.dynamic.se.alltele.net) (Ping timeout)
[07:57:09] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[07:57:42] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[07:59:00] *** Quits: brson (brson@58B3E13.EF2694B5.DFAC6AA7.IP) (Quit: leaving)
[08:10:34] *** Joins: Libreofficer (Mibbit@5ACC7636.C3AC81A2.906273CD.IP)
[08:11:44] <Libreofficer> Hello folks! Just trying rust, I have a question. What is a must simple way to convert string to number?
[08:12:05] <aatch> rusti: uint::from_str("123")
[08:12:06] <rusti> Some(123)
[08:12:22] <aatch> rusti: uint::from_str("abacus")
[08:12:24] <rusti> None
[08:15:34] <aatch> Libreofficer, that help?
[08:17:34] <Libreofficer> Yes, now I see it. And how I can get int from it?
[08:17:47] <aatch> rusti: int::from_str("123")
[08:17:49] <rusti> Some(123)
[08:18:14] <aatch> rusti: int::from_str("123").unwrap()
[08:18:15] <rusti> 123
[08:18:25] <aatch> rusti: int::from_str("cheesecake").unwrap()
[08:18:26] <rusti> rust: task failed at 'option::unwrap none', /build/rust-incoming-git/src/rust/src/libcore/option.rs:313
[08:18:26] <rusti> rust: domain main @0xc301b0 root task failed
[08:19:14] <aatch> rusti: int::from_str("cheesecake").get_or_default(0)
[08:19:15] <rusti> 0
[08:19:32] <Libreofficer> oh, thanks. Works for me
[08:21:32] <mcpherrin> rusti: match int::from_str("123") { Some(x) => x, None => 0 }
[08:21:33] <rusti> 123
[08:22:19] <Libreofficer> rusti: match int::from_str("nothing here") { Some(x) => x, None => 0 }
[08:22:20] <rusti> 0
[08:22:24] <Libreofficer> nice
[08:22:34] <mcpherrin> You can use pattern matching to handle the failure case or get a value out.  unwrap() fails in the None case, which is often the easy way to ignore errors
[08:27:34] *** Quits: Libreofficer (Mibbit@5ACC7636.C3AC81A2.906273CD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:29:16] *** Quits: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Ping timeout)
[08:29:21] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[08:30:03] *** Joins: Libreofficer (jightuse@5ACC7636.C3AC81A2.906273CD.IP)
[08:32:10] <indutny> aatch: hey man
[08:32:16] <aatch> indutny, hey
[08:32:27] <indutny> I'm so tired of building rustc on osx, is there any official/unofficial binaries? :)
[08:32:37] <aatch> indutny, no idea sorry
[08:32:40] <indutny> ah, ok
[08:32:49] <indutny> np
[08:32:51] <indutny> thank you anyway
[08:38:43] *** Quits: leod (unchi@moz-F5CD5448.net) (Ping timeout)
[08:48:24] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Ping timeout)
[08:50:19] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[08:50:28] <indutny> I think I've finally figured out how to create healthy APIs with rustâ€¦ time to write things :)
[08:50:54] <ssbr> heh
[08:51:15] <ssbr> indutny: you probably can just jump in whenever, and fix the API when you realize your mistakes, as you go :)
[08:51:27] <indutny> I don't like it :)
[08:51:39] <indutny> that's just a habbit of writing code
[08:51:45] <indutny> start with good API and move forward
[08:51:57] <indutny> at least, when writing libs
[08:52:34] <ssbr> Eck. That isn't a great policy.
[08:53:36] <indutny> why?
[08:54:15] <indutny> (I'm not saying its the best, but it works better for me. And resulting API is looking merely good)
[08:55:58] <ssbr> indutny: because it takes a long time to know what a good API looks like.
[08:56:10] <ssbr> if you spend all that time thinking, and none of it coding, you are wasting time.
[08:56:24] <indutny> that's a true
[08:56:37] <indutny> s/true/truth/
[08:56:51] <ssbr> not to say you should jump in without any thought, but you can think as you write. And then when it starts hurting, you notice the pain points and smooth them over, and so on.
[08:57:04] <ssbr> you only really need to think about the API before you make a 1.0 release
[08:57:08] <ssbr> but that's probably years away :)
[08:57:15] <indutny> haha :)
[08:57:20] <indutny> this way you'll never have good APIs
[08:57:25] <ssbr> indutny: no
[08:57:26] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[08:57:28] <indutny> also, another +1 for my approach
[08:57:31] <ssbr> indutny: this way you have _AMAZING_ APIs
[08:57:41] <indutny> if I can't write good apis for lib - I usually don't understand language itself
[08:57:42] <indutny> :)
[08:57:49] <ssbr> indutny: because they are driven by usage, and not what you spent three hours thinking about during your commute
[08:58:22] <indutny> ssbr: driven by usage = driven from outside, your approach = driven from inside
[08:58:36] <indutny> so with my approach I can start writing code that is using library
[08:58:39] <indutny> and then write library itself
[08:58:52] <indutny> and this way I'm always sure that I get what I need in consumer app
[08:59:00] <rsaarelm> Based on my short look into it, Rust sorta does push you towards coming up a nice API up front with the type system. You want to come up with a type layout that communicates the intent of whatever you're trying to build.
[08:59:08] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[08:59:16] <indutny> yes, exactly
[08:59:35] <rsaarelm> And the various initially unfamiliar memory modes make things extra tricky.
[08:59:37] <ssbr> rsaarelm: as opposed to what, the type system of ocaml?
[08:59:37] <indutny> I just spent a lot of time on generic approach with traits, instead of diving in with structures
[09:00:20] <ssbr> indutny: In my experience, and the experience of many software developers with more of it than me, "premature generalization is the root of all evil"
[09:00:30] <ssbr> it's as pure a waste of time as it gets
[09:00:31] <rsaarelm> ssbr: OCaml is pretty much the same. Was thinking of the type system of Java, where it's easier to just start hammering away with the smaller set of type idioms you have at hand.
[09:00:32] <indutny> yeah
[09:00:40] <aatch> ssbr, if it helps, I agree with you.
[09:01:00] <indutny> that's why I'm using structs now :)
[09:01:02] <aatch> Refactoring is generally better than up-front design
[09:01:17] <indutny> its ok if you write binary
[09:01:23] <indutny> like compiler
[09:01:26] <indutny> or browser engine
[09:01:38] <indutny> but for small libraries that are going to be used by people
[09:01:42] <indutny> I like up-front design
[09:01:44] <rsaarelm> A good type system makes refactoring easier too, since a lot of things you need to change after the refactor will reliably fail to compile until you fix them.
[09:01:46] <aatch> indutny, but I write /all/ my code as if it's library code.
[09:02:10] <indutny> well, me too, actually
[09:02:17] <ssbr> every application is just a library and a main function ;)
[09:02:37] <indutny> :)
[09:02:48] <aatch> At my job, I realised that my api wasn't too good, refactored it down to half the size and eliminated a ton of odd behaviour
[09:02:50] <indutny> ok, probably I'm just not mature enough to realize it
[09:03:10] <ssbr> indutny: it's not as if there aren't people that like up-front design
[09:07:01] *** Quits: ssbr (ssbr@A9D9D38C.B6F034AC.72A31D6.IP) (Client exited)
[09:07:04] <indutny> ok, now question about rust :)
[09:07:12] *** Joins: ssbr (ssbr@A9D9D38C.B6F034AC.72A31D6.IP)
[09:07:13] <indutny> ah, nvm
[09:07:13] <indutny> :)
[09:08:54] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.0)
[09:10:18] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: zzzZZZzzz)
[09:23:14] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[09:24:36] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[09:25:56] *** kimundi is now known as zz_kimundi
[09:33:11] *** Joins: judder (maradukewa@DABDEEA3.F2C0D0AC.78E362FE.IP)
[09:35:11] *** Joins: genbattle (quassel@moz-44ABD640.jetstream.xtra.co.nz)
[09:35:52] *** Joins: EXetoC (ex@moz-C741B177.customer.t3.se)
[09:42:00] <Yurumechan> is there any concrete plan on 0.7 release?
[09:42:46] <Yurumechan> I'm now working on a code that is compilable in both 0.6 release and incoming
[09:43:42] <Yurumechan> but it seems that I'm fairly behind the schedule, so if 0.7 is to be released soon then I'd rather target only 0.7
[09:44:15] *** Quits: tcsc (tcsc@moz-A838B260.dhcp.nwtn.ct.charter.com) (Quit: bye!)
[09:46:24] *** Joins: spider-mario (spidermari@moz-2BC095A6.rev.sfr.net)
[09:46:51] *** Joins: leod (unchi@moz-F5CD5448.net)
[09:48:47] *** Quits: leod (unchi@moz-F5CD5448.net) (Ping timeout)
[09:48:58] *** Joins: pyrac (pyrac@moz-B95F505.w92-156.abo.wanadoo.fr)
[09:49:57] <doener> hrm, I wonder why rustc decided not to inline "|_i| copy t" with t being a uint... That turns a mov into a call...
[09:50:46] <indutny> doener: are you compiling with -O
[09:52:02] <doener> indutny: Of course :-) I can't reproduce it with standalone code either, but it happened for the vec::from_elem() calls in DataFlowContext::new() in librustc
[09:52:41] <indutny> well
[09:52:42] <indutny> idk :)
[09:52:50] <doener> it inlined from_elem(), but not from_fn or the closure
[09:55:27] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Client exited)
[09:57:50] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[09:59:34] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[10:17:29] *** Quits: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp) (Client exited)
[10:19:08] *** Quits: pyrac (pyrac@moz-B95F505.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[10:27:45] *** Quits: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net) (Quit: KVIrc 4.0.4 Insomnia http://www.kvirc.net/)
[10:28:33] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[10:32:07] *** Joins: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net)
[10:37:55] *** Joins: haard (fredrik@moz-6A86987C.dynamic.se.alltele.net)
[10:38:55] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[10:40:19] <indutny> hm...
[10:40:24] <indutny> how can I import enum values?
[10:40:45] *** Joins: z0w0 (zack@D1D2DBCB.806EA3ED.2CE63F58.IP)
[10:41:00] *** Joins: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl)
[10:41:01] <aatch> indutny, you need to add them to the use, or refer to them by the path
[10:41:01] <indutny> nvm
[10:41:09] <indutny> I need to make them path
[10:41:10] <indutny> err
[10:41:11] <indutny> pub
[10:41:24] *** Quits: jviereck (Adium@moz-C4A71F54.dclient.hispeed.ch) (Quit: Leaving.)
[10:41:36] <indutny> ah, no
[10:41:39] <indutny> just reexport them
[10:41:41] <indutny> ok, nvm anyway :)
[10:41:42] <indutny> thank you
[10:44:22] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[10:45:56] *** Quits: catpigger (catpig@moz-1662AE50.dip0.t-ipconnect.de) (Quit: Verlassend)
[10:54:09] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[10:58:11] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[11:00:01] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[11:01:03] <z0w0> was str::split really replaced with each_split_$x?
[11:01:46] <z0w0> kind of annoying to work with
[11:06:45] *** Quits: genbattle (quassel@moz-44ABD640.jetstream.xtra.co.nz) (Client exited)
[11:06:52] <indutny> ooh
[11:07:03] <indutny> rust's Sets API is really really small
[11:07:13] <indutny> no substraction
[11:07:19] <indutny> well, I mean
[11:07:33] <indutny> ah, nvm
[11:07:56] <indutny> I'll do it with do it with intersection+difference
[11:08:01] <indutny> though, its not really the best way
[11:12:43] *** Joins: dbaupp (Thunderbir@moz-856B3C14.lns20.syd6.internode.on.net)
[11:14:45] <doener> indutny: isn't difference the result of subtraction?
[11:15:04] <indutny> ah
[11:15:15] <indutny> yeah, I forgot that its not the same as symmetric difference
[11:15:21] <indutny> ok, that's much better then :)
[11:16:13] <indutny> thanks
[11:19:23] <tiffany> how well does rust handle runtime shared library loading (dlsym, etc.)?
[11:19:51] <aatch> tiffany, depending on your point of view, it either handles it find, or not at all
[11:20:12] <aatch> I don't think there is anything stopping you from doing dlopen on a rust crate
[11:20:13] <tiffany> how so?
[11:20:25] <aatch> but you would have to know the mangled names
[11:21:12] <aatch> there's also some odd stuff from cross-crate inlining and similar, but that's not much different from C/C++ in that regard
[11:21:28] <tiffany> how about the rust runtime?
[11:21:42] <tiffany> doesn't that already have issues when rust is used as a library?
[11:22:01] <aatch> tiffany, only if the code requires the runtime.
[11:22:11] <aatch> unfortunately, a lot of the code requires the runtime.
[11:22:53] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[11:25:45] *** Joins: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp)
[11:29:24] <aatch> dbaupp, so I managed to get the WorkQueue stable.
[11:31:05] *** Quits: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp) (Client exited)
[11:31:27] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[11:32:55] <dbaupp> aatch: sweet! with all the unsafe code still?
[11:33:00] <aatch> dbaupp, yep
[11:33:06] <dbaupp> have you talked to brson about it?
[11:33:13] <aatch> dbaupp, a little
[11:33:26] <aatch> I don't seem to intersect well with his times
[11:33:45] <dbaupp> yeah... I've found that too
[11:33:58] <dbaupp> (waking up in the morning is always hard)
[11:34:12] <aatch> dbaupp, yeah, I know
[11:34:21] <dbaupp> does that test still segfault sometimes?
[11:35:14] <aatch> dbaupp, very, very occasionally. I'm pretty sure it's just the lack of synchronization though, because the rate dropped through the floor when I added a sleep at the end of the test
[11:35:20] *** Quits: thou (thou@moz-1C1CA9F7.fasttrackcomm.net) (Input/output error)
[11:36:23] <dbaupp> aha, sounds reasonable
[11:36:53] <aatch> dbaupp, the main reaction from brson was that he was surprised I got it working so quickly
[11:37:16] <dbaupp> cool!
[11:37:52] <dbaupp> it didn't look too complicated from the paper, but only at a higher level... the implementation didn't look trivial at all
[11:38:25] <aatch> dbaupp, yeah, I ended up having to make taking an element from the buffer atomic
[11:38:38] <aatch> And limited it to ~-ptrs
[11:39:02] <aatch> so I could reason about lifetimes better
[11:39:08] <dbaupp> is https://gist.github.com/Aatch/5562415 the current implementation?
[11:39:31] <aatch> dbaupp, nope. I have a branch that is based on brson's io branch here: https://github.com/Aatch/rust/blob/work-steal/src/libcore/rt/work_queue.rs
[11:40:28] * dbaupp reads
[11:40:59] <aatch> I'm now trying to figure out how to do the rest of this damn work-stealing malarky
[11:41:45] <dbaupp> ah, the atomic_xchg in take
[11:42:14] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[11:43:04] <aatch> dbaupp, yeah, I'll analyze it more closely later and see if I can weaken it to something like atomic_xchg_acq
[11:43:48] <dbaupp> does #[ignore(reason="foo")] mean anything special to rustc?
[11:44:03] <aatch> dbaupp, the reason doesn't seem to do anything
[11:44:30] <aatch> but I saw it in other bits of the runtime code.
[11:44:32] <dbaupp> just for humans
[11:44:36] <dbaupp> ?
[11:44:58] <aatch> I guess it could be extracted by the compiler, but I don't think it is atm.
[11:45:25] *** Joins: jviereck (Adium@moz-C4A71F54.dclient.hispeed.ch)
[11:45:29] <dbaupp> yeah
[11:45:52] *** Joins: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp)
[11:49:34] <aatch> dbaupp, the most fun thing about getting it working? Getting the compiler to stop following null ~-ptrs
[11:52:36] <dbaupp> the owned_ptr_val?
[11:53:13] <dbaupp> casting it straight to an uint doesn't work?
[11:53:30] <dbaupp> rusti: let x = ~1; unsafe { x as uint }
[11:53:31] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/OfIf
[11:54:04] <dbaupp> rusti: let x = ~1; unsafe { cast::transmute::<~uint, uint>(x) }
[11:54:05] <rusti> 140139349150016
[11:54:06] <rusti> exchange heap not empty on exit
[11:54:06] <rusti> 1 dangling allocations
[11:54:06] <rusti> Aborted (core dumped)
[11:54:21] <dbaupp> heh
[11:54:28] <aatch> dbaupp, nope, because it takes the pointer
[11:54:43] <dbaupp> yeah, and causes that ^
[11:54:48] <dbaupp> right?
[11:55:07] <aatch> dbaupp, yep
[11:56:41] <aatch> and I couldn't just have &T, because then it would change ~T to &T, and (val of &T) - (val of ~T) = 0x20
[11:57:01] <aatch> Because there is a 32 byte header
[11:57:14] <aatch> so checking for null didn't work either...
[11:57:49] <dbaupp> eurgh
[11:58:20] <dbaupp> that's not very nice... the cost of safety!
[12:00:08] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: bb2m)
[12:00:13] <aatch> dbaupp, yeah...
[12:00:25] <aatch> but it worked out in the end!
[12:01:03] <dbaupp> pretty awesome! :D
[12:01:46] <dbaupp> do you know how much more is required before the new rt can replace the C++ one?
[12:03:11] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[12:03:25] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[12:03:52] <aatch> dbaupp, other than a bit of code for stuff like stack/context switching, libuv integration and some other things, it's actually pretty far along
[12:04:14] <aatch> a lot of what's planned is actually improvements over the old runtime.
[12:04:22] <dbaupp> yay!
[12:04:40] <dbaupp> it's pretty cool that rust will be entirely(?) written in rust
[12:05:03] <aatch> like work stealing, task pinning, being able to run much more of rust with much less of the runtime.
[12:05:07] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[12:05:28] <aatch> Example: the exchange heap is completely independent of the runtime.
[12:05:59] <dbaupp> yeah, since it's just malloc/free
[12:06:24] <aatch> the garbage collector should be able to be started up without requiring a scheduler too, though I think that requires Graydon's new gc
[12:06:43] <dbaupp> so many things to look forward too!
[12:07:25] <aatch> and with the ability to check what context you're running in (bare, task or scheduler) it means you can actually assert when things aren't possible instead of just segfaulting.
[12:07:57] <aatch> Oh, and the new runtime doesn't start a thread at the beginning.
[12:08:12] <aatch> it just starts a scheduler in the main thread.
[12:09:22] <dbaupp> sounds much nicer
[12:13:23] *** Quits: jviereck (Adium@moz-C4A71F54.dclient.hispeed.ch) (Quit: Leaving.)
[12:17:11] <aatch> unfortunately the current state of the code has very little provision for concurrency.
[12:17:27] *** Joins: jviereck (Adium@moz-C4A71F54.dclient.hispeed.ch)
[12:17:53] *** Quits: jviereck (Adium@moz-C4A71F54.dclient.hispeed.ch) (Quit: Leaving.)
[12:18:51] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[12:19:47] <aatch> Also, the segmented stacks implementation should probably be, well, finished
[12:19:52] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[12:33:18] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[12:33:26] *** Quits: dbaupp (Thunderbir@moz-856B3C14.lns20.syd6.internode.on.net) (Quit: dbaupp)
[12:34:56] *** aatch is now known as aatch|bed
[12:36:03] *** Joins: dbaupp (Thunderbir@moz-856B3C14.lns20.syd6.internode.on.net)
[12:36:08] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[12:37:47] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[12:38:52] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Ping timeout)
[12:44:39] *** Quits: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl) (Client exited)
[12:47:28] *** Joins: jviereck (Adium@moz-C4A71F54.dclient.hispeed.ch)
[12:48:26] <engla> nmatsakis: it should be possible to have a directive for opt-in duct typing I think..   For example  a directive on top of a trait, like so:   #[implement(all)] trait Writer { fn write(&mut self, &[u8]); }  would produce local impls for all types that already have the needed methods?
[12:49:32] <engla> quack, err.. *duck
[13:01:24] *** Quits: dbaupp (Thunderbir@moz-856B3C14.lns20.syd6.internode.on.net) (Ping timeout)
[13:01:40] *** Joins: dbaupp (Thunderbir@moz-856B3C14.lns20.syd6.internode.on.net)
[13:02:43] *** Quits: dbaupp (Thunderbir@moz-856B3C14.lns20.syd6.internode.on.net) (Quit: dbaupp)
[13:07:46] *** Joins: tcsc (tcsc@moz-A838B260.dhcp.nwtn.ct.charter.com)
[13:12:48] <rsaarelm> What am I doing wrong here trying to call a method from a trait from inside a module? http://sprunge.us/Pacb
[13:14:35] <cmr> rsaarelm: you need impl Hello for ~Foo, I think
[13:14:38] <cyndis> the Hello trait isn't in scope, you need to do use foo::Hello;
[13:15:03] <cmr> cyndis: the trait needs to be in scope to call methods on an object implementing that trait?
[13:15:12] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[13:15:18] <rsaarelm> Right.
[13:15:23] <cyndis> if that method is in a trait, yes
[13:16:58] <rsaarelm> Aah, the trait needs to be pub too.
[13:17:19] <cyndis> yes, that too
[13:17:39] <rsaarelm> Yeah, I think I tried messing with the use declarations, but they didn't work without the pub.
[13:17:42] <rsaarelm> Thanks.
[13:17:49] <cyndis> glad to help.
[13:18:53] <cyndis> also, you should just return a bare T from constructors
[13:19:06] <cyndis> that way the caller decides how to store it
[13:19:32] <rsaarelm> Gotcha. Was doing that wrong in my actual code too.
[13:19:39] <cmr> Why does the trait need to be in scope to call methods from that trait on objects implementing it?
[13:19:52] <cyndis> and the constructor can be implemented like impl T { fn new() -> T { ... } } so you don't need an enclosing mod
[13:21:23] <rsaarelm> I guess you can have objects have entirely different method sets when used in contexts that bring different traits and implementations into scope with the way things are now.
[13:21:39] <cmr> If you have a Foo, why shouldn't you be able to call any methods on it, that it implements... I can see this dirtying up an API, needing to have additional imports to use a certain object.
[13:22:28] <cyndis> not really sure what the reasons for the current system are
[13:24:57] *** Quits: jviereck (Adium@moz-C4A71F54.dclient.hispeed.ch) (Quit: Leaving.)
[13:25:49] <cyndis> also, nice to see fellow finnish people in here :)
[13:26:10] <EXetoC> not rly
[13:26:18] <EXetoC> am I right, BitPuffin?
[13:26:42] <cyndis> :p
[13:26:42] <BitPuffin> EXetoC: About what?
[13:27:09] <BitPuffin> ah
[13:27:17] <BitPuffin> but we fought with them againts the russians
[13:27:32] <BitPuffin> so we're allies
[13:27:39] <EXetoC> oh
[13:27:42] *** Joins: jviereck (Adium@moz-C4A71F54.dclient.hispeed.ch)
[13:29:46] *** Joins: pyrac (pyrac@moz-B95F505.w92-156.abo.wanadoo.fr)
[13:30:24] <cyndis> i've been trying to spread the good rust message to the new cs students here at helsinki univ. of tech. already managed to get one person to join this channel ;)
[13:33:23] <rsaarelm> Aren't you supposed to call it Aalto university now?
[13:34:04] <cyndis> yes, but nobody likes aalto and hut is easier
[13:34:30] <rsaarelm> HUT does have some history of programming language cluefulness, they used to teach programming 101 with SICP.
[13:35:03] <cyndis> they used, and there's still an advanced version of the course (which i took) which uses sicp
[13:35:11] *** Joins: mdu (mdu@moz-9962C9F4.rev.numericable.fr)
[13:35:36] <cyndis> though i think that's going to be ending soon with aalto consolidating things everywhere
[13:35:42] <cyndis> they are now going to switch to scala
[13:35:50] <bytbox> is there any way to allow a for loop to modify the data being iterated over? I understand I could use map, but I think I want to do it in-place.
[13:36:03] *** Quits: mdu (mdu@moz-9962C9F4.rev.numericable.fr) (Quit: mdu)
[13:36:09] <bytbox> (sorry for the obvious question - I'm new to rust, and still a bit lost)
[13:37:04] <cyndis> there's each_mut that gives you &mut pointers
[13:37:12] <bytbox> cyndis: thanks!
[13:37:45] <cyndis> no problem
[13:38:04] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[13:39:53] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[13:41:44] *** zz_kimundi is now known as kimundi
[13:42:22] *** Joins: berak (chatzilla@EACF97D2.C4D4A1E0.1A5CC7E5.IP)
[13:44:55] *** Joins: hmax (hmax@moz-15514FA1.yandex.net)
[13:47:21] <thiez> is there any way to have 'make' compile rustwrapper.cpp without completely recompiling llvm?
[13:47:58] <cmr> I rarely see llvm recompiled...
[13:48:00] <thiez> (src/rustllvm/RustWrapper.cpp)
[13:50:47] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[13:54:45] <thiez> woohoo it works, never mind :)
[13:56:22] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[14:02:35] <indutny> bytbox: but expect a lot of problems :)
[14:02:43] <indutny> you can borrow mutable pointer only once
[14:02:56] <indutny> and all its derivatives
[14:03:06] <indutny> btw, is it going to change or improve?
[14:03:14] <indutny> I've no idea how it could be fixed
[14:03:18] <indutny> but anyway, better asking
[14:03:23] <bytbox> indutny: doesn't it become mutable again after the "borrower" returns?
[14:03:33] <indutny> well, yes
[14:03:42] <indutny> let me show you example of my concerns
[14:04:16] <bytbox> (I'm not doing anything too complex, so I doubt I'll run into issues - but I'm interested anyway.)
[14:04:23] <indutny> impl S { fn get(&mut self) -> &mut P { return self.ps.find_mut(&1).unwrap(); } }
[14:04:31] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Connection reset by peer)
[14:04:37] <indutny> and suppose you have `s` of type `S`
[14:04:45] <indutny> you can't have two results of s.get() in one scope
[14:05:34] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[14:05:37] <indutny> like: let x = s.get(); let y = s.get();
[14:05:46] <bytbox> I think I understand
[14:05:54] <indutny> yeah, I understand why it doesn't work too
[14:06:01] <indutny> but it makes me feel sad :)
[14:06:21] <indutny> and sometimes because of it I need to clone a lot of stuff
[14:06:25] *** Quits: passcod (passcod@moz-5BCF5019.passcod.name) (Ping timeout)
[14:06:30] <cmr> shouldn't it work if x and y have the same lifetimes? or are &mut unaliasable
[14:06:34] *** Quits: cantsin (cantsin@moz-F99612CC.members.linode.com) (Ping timeout)
[14:06:37] *** Quits: Raynes (macro@moz-E5F01CE6.members.linode.com) (Ping timeout)
[14:06:43] <thiez> I hate to be that 'but can't you just ...?'-guy, but can't you just reuse x? :p
[14:07:02] <indutny> hu?
[14:07:04] <indutny> s/hu/huh/
[14:07:08] *** Joins: passcod (passcod@moz-5BCF5019.passcod.name)
[14:07:12] *** Quits: olsonjeffery (pf@moz-9E9CF15C.members.linode.com) (Ping timeout)
[14:07:13] <indutny> cmr: yes, it should
[14:07:17] <thiez> for your 'let x = s.get ; let y = s.get()'
[14:07:17] *** Joins: Raynes (macro@moz-E5F01CE6.members.linode.com)
[14:07:18] *** Joins: cantsin (cantsin@moz-F99612CC.members.linode.com)
[14:07:19] <indutny> cmr: but mut is unalisable
[14:07:25] *** kimundi is now known as zz_kimundi
[14:07:38] <thiez> why do you want x and y if you already have x?
[14:07:40] <indutny> thiez: ah, no I can't be cause in real life I do .get(0) and .get(1)
[14:07:51] <indutny> so its different things
[14:08:26] <indutny> usually its result of SmallIntMap.get
[14:09:00] <thiez> fair point
[14:09:13] <indutny> yep, so having two things is not really bad
[14:09:27] <indutny> but bad thing is that I can't borrow some pointer from result of .get()
[14:09:35] <indutny> lets say: let x = p.get(0).children;
[14:09:39] <indutny> and let y = p.get(1)
[14:09:40] <indutny> won't work
[14:09:48] <indutny> so to make it work I need to copy children
[14:10:21] <thiez> doesn't that work when p is immutable?
[14:10:23] *** Joins: olsonjeffery (pf@moz-9E9CF15C.members.linode.com)
[14:10:35] <indutny> p is mutable
[14:10:43] <indutny> hm...
[14:10:49] <indutny> may be I don't need to make it mutable
[14:10:53] <indutny> ah, no I need it
[14:10:58] <indutny> because I change result of p.get()
[14:11:02] <indutny> s/result/contents/
[14:11:51] <thiez> you can? I thought .get() returned immutable &
[14:12:07] <indutny> no it isn't, get returns result of find_mut().unwrap()
[14:12:21] <thiez> https://github.com/mozilla/rust/blob/incoming/src/libstd/smallintmap.rs#L212 ?
[14:12:43] <indutny> ok, let me make my github repo public :)
[14:12:55] <thiez> ah, you have a custom smallintmap :p
[14:13:10] <indutny> nooo
[14:13:15] <indutny> I'm wrapping access to it
[14:13:22] <indutny> ah
[14:13:24] <indutny> hm...
[14:14:11] <indutny> no, I can't do it
[14:14:27] <indutny> well, I understand why it happens in this way
[14:14:46] *** Quits: pyrac (pyrac@moz-B95F505.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[14:15:16] <indutny> unfortunatelly, I can't show you the code right now
[14:15:32] <indutny> because github is performing maintenance procedures on my repo right noew
[14:16:18] <indutny> but basically smallintmap.get() won't work too
[14:16:41] <indutny> because smallintmap owns value
[14:16:41] <thiez> I'll take your word for it
[14:16:50] *** Joins: pyrac (pyrac@moz-B95F505.w92-156.abo.wanadoo.fr)
[14:16:51] *** Quits: KindOne (KindOne@moz-FC94EAE7.dynamic.ip.windstream.net) (Ping timeout)
[14:16:52] <indutny> and I can't really move it out
[14:17:11] <indutny> without borrowing reference to hashmap itself
[14:17:30] <indutny> which is exactly what's happening for both .get() and .find_mut()
[14:17:31] <indutny>     fn get<'a>(&'a self, key: &uint) -> &'a V
[14:19:07] <indutny> but basically having two results with same lifetime should not be a problem...
[14:19:24] <indutny> at least if they're immutable
[14:20:07] <indutny> ah
[14:20:12] <indutny> that's because I'm using mutable values
[14:20:59] *** Joins: KindOne (KindOne@moz-2D30BEE8.dynamic.ip.windstream.net)
[14:21:21] <thiez> solved it? :p
[14:22:29] *** Quits: zippity (Mibbit@moz-AB722A1C.mc.videotron.ca) (Quit: http://www.mibbit.com ajax IRC Client)
[14:33:30] *** Quits: spider-mario (spidermari@moz-2BC095A6.rev.sfr.net) (Input/output error)
[14:34:33] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[14:34:50] *** Joins: mwcampbell (matt@moz-52DF570B.ks.ks.cox.net)
[14:35:04] *** Quits: mwcampbell (matt@moz-52DF570B.ks.ks.cox.net) (Quit: Leaving)
[14:36:18] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[14:38:32] <indutny> thiez: nope
[14:38:40] <indutny> thiez: I can't avoid using mutable values
[14:38:52] <indutny> but I realize that problem happens because of safety
[14:39:13] <indutny> I wonder if rust can pickup mutation points
[14:39:25] <indutny> and somehow account them
[14:40:31] *** Parts: berak (chatzilla@EACF97D2.C4D4A1E0.1A5CC7E5.IP) ()
[14:42:33] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Ping timeout)
[14:48:53] *** Quits: haard (fredrik@moz-6A86987C.dynamic.se.alltele.net) (Ping timeout)
[14:49:36] *** Quits: acrichto (acrichto@moz-FE112B96.res.cmu.edu) (Connection reset by peer)
[14:49:51] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[14:50:34] *** Quits: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu) (Ping timeout)
[14:50:57] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[14:51:00] *** Quits: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu) (Ping timeout)
[14:51:17] *** Quits: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu) (Ping timeout)
[14:51:22] *** Quits: z0w0 (zack@D1D2DBCB.806EA3ED.2CE63F58.IP) (Quit: Leaving.)
[14:51:28] *** Joins: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu)
[14:51:36] *** Joins: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu)
[14:54:33] *** Joins: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu)
[14:54:35] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[14:54:58] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[14:55:12] *** Joins: acrichto (acrichto@moz-FE112B96.res.cmu.edu)
[14:56:43] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[14:57:34] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[14:57:46] *** Joins: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net)
[14:58:23] *** Quits: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[15:04:21] *** Joins: victorporof (victorporo@B86E46F.1B500F07.6A4F8DA2.IP)
[15:05:20] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[15:06:00] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[15:08:15] *** Joins: haard (fredrik@moz-6A86987C.dynamic.se.alltele.net)
[15:11:44] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[15:12:01] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[15:16:16] *** Quits: judder (maradukewa@DABDEEA3.F2C0D0AC.78E362FE.IP) (Ping timeout)
[15:19:39] *** Quits: jviereck (Adium@moz-C4A71F54.dclient.hispeed.ch) (Quit: Leaving.)
[15:20:31] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[15:31:35] *** Joins: spaceships (spaceships@moz-8323E7E6.msl-mt.client.bresnan.net)
[15:33:05] *** Joins: vmx (vmx@moz-2AFF1E8D.pools.arcor-ip.net)
[15:35:14] <vmx> hi. i'm new to rust. i'd like to have a function that works on float, f64 and f32. though i need to call a cmath function (frexp). i need to call it with the specific type, e.g. f32:frexp(...). is there any way to make this call generic (perhaps with generics/traits?)?
[15:37:37] <EXetoC> fn bla<T:Float>(f: T)...?
[15:38:17] <EXetoC> just a wild guess. Float is a trait residing in core. I think so anyway
[15:38:25] <EXetoC> bbs
[15:38:38] <engla> there is a Float trait in the development version, but without that function
[15:38:57] <engla> vmx: you can make a trait and implement it for those three types
[15:40:54] <vmx> thanks EXetoC, engla, will try
[15:40:57] <vmx> good that i am on the development version
[15:43:59] <vmx> engla: so i will implement the function three times, just because of this one function call?
[15:45:13] <vmx> engla: oh, i could make frexp a trait
[15:46:44] <bjz> vmx: I was thinking of adding frexp to Float
[15:47:14] <bjz> vmx: would it be useful?
[15:47:46] <vmx> bjz: i currently try to implement a float to rational function. for that i need the frexp
[15:48:04] <bjz> ahh
[15:49:11] <vmx> it's something small i need and that that i feel like i could code in a way that might make it upstream :)
[15:49:40] <vmx> bjz: i think all the cmath functions are useful and should be wrapped
[15:50:18] <bjz> vmx: I've been doing them slowly and in an ideomatic rust style
[15:50:53] <bjz> vmx: we have an issue, up
[15:51:05] <bjz> https://github.com/mozilla/rust/issues/4819
[15:53:35] <vmx> thanks. quite a lot to read
[15:54:00] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Quit: Computer has gone to sleep.)
[15:54:10] <bjz> vmx: sorry
[15:54:16] <bjz> it's evolving
[15:54:52] <vmx> no worries, it's interesting to see discussions in the open and not on some closed forum
[15:55:32] <vmx> i just feel like playing with rust. don't care too much what i actually do. so when i can help out with getting something done, that's even better
[15:56:44] <bjz> vmx: do you have much experience with the mathematics side of things?
[15:57:37] <vmx> bjz: no, i sadly don't. e.g. my float to rational code is based on the python code
[15:57:46] <bjz> ahh ok
[15:57:51] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:58:00] <bjz> there is std::rational btw
[15:59:12] *** Joins: jviereck (Adium@moz-C4A71F54.dclient.hispeed.ch)
[15:59:30] <vmx> yes i know, that's why i'm excited. it just misses a the float to rational funtion
[15:59:35] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[16:00:50] <thiez> recompiling rustc with some new atomic intrinsics, waiting for to go 'boom' :D
[16:01:51] <thiez> editing the compiler would be much easier if the devs didn't prefer the length of variable names to be 2 to 4 characters
[16:02:30] <bjz> thiez: I think they are moving away from that
[16:03:56] *** Joins: Mic92 (Mic92@moz-35FE9196.linuxlovers.at)
[16:04:12] <Mic92> How to correctly reference this ByteReader in a Struct: https://gist.github.com/Mic92/5564007
[16:04:18] <Mic92> Or in other words: How to fix "Illegal anonymous lifetime" errors
[16:06:44] <Mic92> thanks in advance
[16:07:08] <doener> Mic92: append <'self> to MockSocket and BytesReader
[16:08:50] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[16:09:13] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[16:10:38] <vmx> bjz: i read #4819 (the frexp parts). having "decode" sounds good to me
[16:11:28] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[16:11:48] <Mic92> doener, get "unterminated character constant" now: https://gist.github.com/Mic92/5564007 what do I wrong?
[16:12:25] <Mic92> doener, my mistake
[16:12:36] <Mic92> My editor insert a '
[16:14:12] <Mic92> Hopefully the next guy find this solution via google.
[16:17:23] *** Quits: pyrac (pyrac@moz-B95F505.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[16:18:37] <engla> vmx: yup a frexp trait was intended ^^ I guess you already have it by now.
[16:19:13] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Ping timeout)
[16:27:46] <Yurume> rusti: struct A { t: bool } fn main() { let mut a = ~A { t: false }; let f = || { a.t = true; }; let x = a; f(); }
[16:27:47] <rusti> foo.rs:5:103: 5:104 warning: unused variable: `x` [-W unused_variable]
[16:27:47] <rusti> foo.rs:5          struct A { t: bool } fn main() { let mut a = ~A { t: false }; let f = || { a.t = true; }; let x = a; f(); }
[16:27:47] <rusti>                                                                                                                 ^
[16:27:47] <rusti> note: in expansion of fmt!
[16:27:47] <rusti> foo.rs:4:12: 6:7 note: expansion site
[16:28:05] *** Joins: pyrac (pyrac@moz-B95F505.w92-156.abo.wanadoo.fr)
[16:28:18] <Yurume> rusti: struct A { t: bool } let mut a = ~A { t: false }; let f = || { a.t = true; }; let x = a; f(); x.t = false;
[16:28:20] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/jgDc
[16:28:32] <Yurume> rusti: struct A { t: bool } let mut a = ~A { t: false }; let f = || { a.t = true; }; let mut x = a; f(); x.t = false;
[16:28:33] <rusti> Segmentation fault (core dumped)
[16:28:37] <Yurume> yay segfault.
[16:28:53] <Yurume> I'm not sure which issue is related, any idea? ;)
[16:35:00] *** Quits: Jesin (Jessin_@moz-5654D37.washdc.fios.verizon.net) (Ping timeout)
[16:37:01] *** Joins: catpig (catpig@moz-1662AE50.dip0.t-ipconnect.de)
[16:37:01] *** Quits: catpig (catpig@moz-1662AE50.dip0.t-ipconnect.de) (Client exited)
[16:37:56] <thiez> rusti: struct A {t:bool} let mut a = ~A{t:false}; let ff = |a|{||{a.t = true;}}; let f = ff(a); let mut x = a ; f(); x.t = false;
[16:37:57] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/QTSJ
[16:38:30] *** Quits: tcsc (tcsc@moz-A838B260.dhcp.nwtn.ct.charter.com) (Quit: computer sleeping)
[16:38:49] *** Joins: catpig (catpig@moz-1662AE50.dip0.t-ipconnect.de)
[16:39:15] <Mic92> Another quick questions: How to declare global static constants strings?
[16:39:29] <thiez> rusti: struct A {t:bool} let mut a = ~A{t:false}; let ff: &fn(~A)->&fn() = |a|{||{a.t = true;}}; let f = ff(a); let mut x = a ; f(); x.t = false;
[16:39:31] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/CaKQ
[16:40:26] <cyndis> static s: &'static str = "blah";
[16:42:07] <Mic92> Ok. Is there a reason, why I can't functions like len() on this variables?
[16:42:25] <Mic92> o
[16:42:31] <Mic92> my mistake again
[16:47:32] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[16:53:41] <cmr> String constants are by default &'static and constant
[16:54:56] <cmr> String literals, that is.
[16:57:46] *** Joins: cstrahan (cstrahan@moz-8DAF91F6.hsd1.dc.comcast.net)
[17:05:51] *** Quits: jviereck (Adium@moz-C4A71F54.dclient.hispeed.ch) (Quit: Leaving.)
[17:06:36] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[17:07:39] <indutny> hm...
[17:07:40] <indutny> expected `for` closure to return `bool`, but found `()`
[17:07:44] <indutny> bug?
[17:08:12] <cmr> nope
[17:10:01] <cmr> http://static.rust-lang.org/doc/rust.html#for-expressions
[17:10:53] <cmr> hm
[17:10:59] <cmr> that isn't quite what I wanted
[17:11:10] <cmr> trying to find the doc
[17:11:31] <rroels> it's a recent change I believe, since like 2 days ago
[17:11:35] <rroels> broke a lot of my code :p
[17:11:40] <cmr> https://github.com/mozilla/rust/pull/6223
[17:16:03] <rroels> personally I don't understand the reasoning behind this change yet, what's the function of the bool?
[17:16:33] <cmr> rroels: http://smallcultfollowing.com/babysteps/blog/2013/01/16/revised-for-loop-protocol/ explains it farily well I think
[17:18:29] <rroels> thanks
[17:19:01] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Quit: Leaving)
[17:19:31] *** Joins: jaen (jaen@moz-4E0C389.play-internet.pl)
[17:21:06] *** Quits: heftig (heftig@moz-B3073D58.dip0.t-ipconnect.de) (Ping timeout)
[17:22:38] *** Joins: heftig (heftig@moz-B3073D58.dip0.t-ipconnect.de)
[17:25:16] *** Joins: thou (thou@moz-1C1CA9F7.fasttrackcomm.net)
[17:28:22] *** Joins: Jesin (Jessin_@moz-5654D37.washdc.fios.verizon.net)
[17:29:20] *** Quits: heftig (heftig@moz-B3073D58.dip0.t-ipconnect.de) (Ping timeout)
[17:30:07] *** Joins: heftig (heftig@moz-B3073D58.dip0.t-ipconnect.de)
[17:31:57] *** Joins: froystig (froystig@4AB93A85.352137A1.BCED17D.IP)
[17:32:08] *** Quits: victorporof (victorporo@B86E46F.1B500F07.6A4F8DA2.IP) (Quit: victorporof)
[17:33:09] *** Quits: heftig (heftig@moz-B3073D58.dip0.t-ipconnect.de) (Ping timeout)
[17:34:53] *** Joins: heftig (heftig@moz-B3073D58.dip0.t-ipconnect.de)
[17:36:16] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:36:16] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/yB6KXA
[17:36:16] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:36:17] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:36:17] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/WFARJA
[17:36:18] <ghrust> 13rust/06auto 14cdb52c0 15Tim Chevalier: rustc: Don't call type_error_message() with ty_err as the expected type...
[17:36:18] <ghrust> 13rust/06auto 14638b394 15bors: auto merge of #6427 : catamorphism/rust/issue-6319, r=nikomatsakis...
[17:36:18] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:36:40] <Libreofficer> oh, I really like this syntax. Almost python-like compactness
[17:36:50] <Libreofficer> rusti: 	for uint::range(0, 15) |i| { print(fmt!("%? ", i * i)); }
[17:36:51] <rusti> 0 1 4 9 16 25 36 49 64 81 100 121 144 169 196
[17:37:38] *** Quits: heftig (heftig@moz-B3073D58.dip0.t-ipconnect.de) (Ping timeout)
[17:37:57] *** Joins: heftig (heftig@93DBB692.3D2735E2.172227A7.IP)
[17:39:18] <sp3d> python-like temporary array allocation too (afaict how memory usage grows with i*i replaced with i, and a large upper range bound)--is that considered idiomatic rust?
[17:41:26] <cmr> sp3d: how are you measuring memory usage?
[17:43:20] <sp3d> watching conky and listening to my system swap ;)
[17:43:36] <cmr> heh
[17:44:30] *** Joins: jviereck (Adium@moz-C4A71F54.dclient.hispeed.ch)
[17:45:11] <sp3d> http://pastebin.com/bYwM8j7c
[17:46:39] <cmr> memory use stays constant for me, if I pipe it to /dev/null
[17:46:51] <cmr> sure you're not watching your terminal emulator's scrollback explode? :)
[17:58:54] <sp3d> hmmmm, that's actually possible
[17:59:14] <engla> cmr: will the for loop protocol change again, how will it support the .next() iterators?
[17:59:22] <sp3d> I'd been meaning to reconfigure that, I think I set scrollback size to something absurd recently
[17:59:46] <cmr> engla: no idea, I just work here
[18:00:27] <sp3d> hmmm, no, "range" starts moving up the memory-sorted charts in top
[18:00:49] <cmr> sp3d: what version of rust are you using?
[18:00:53] <sp3d> rustc 0.6 (c081ffb 2013-04-30 02:21:37 -0700)
[18:00:59] <engla> hehe
[18:01:04] <sp3d> too old?
[18:01:04] <cmr> mm. might be, then. I'm using latest incoming
[18:01:22] <sp3d> I'll start a build
[18:01:38] <sp3d> (turns out I'd already changed scrollback to something reasonable as well)
[18:03:46] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[18:04:42] <vmx> engla, bjz: implementing decode for Float seems to work fine. thanks! https://www.friendpaste.com/5jfiAvamlmNbzkJOskwlOs
[18:05:33] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:05:34] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:05:57] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:05:58] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:06:20] <engla> vmx: you can make it an independent trait if you want. You don't need to name it Float or inherit Float.
[18:06:22] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:06:23] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:06:25] <engla> just fyi
[18:06:27] <indutny> ok, thank you guys for loop information
[18:06:48] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:06:48] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:06:58] <indutny> the only problem is error message
[18:07:03] <indutny> because it was leading me to the wrong file
[18:07:13] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:07:14] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:07:19] <indutny> or
[18:07:30] <indutny> was saying something unclear
[18:07:37] *** Joins: ljrmorgan (Mibbit@moz-63C2D615.sgyl.cable.virginmedia.com)
[18:07:38] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:07:39] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:07:47] <cmr> Can you make a testcase for it? Might be a bug.
[18:07:57] <indutny> cmr: ah, its probably just me
[18:08:04] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:08:05] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:08:06] <indutny> expected `for` closure to return `bool`, but found `()`
[18:08:19] <indutny> I thought it was talking about body
[18:08:23] <indutny> and was a bit surprised :)
[18:08:30] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:08:30] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:08:36] <cmr> ah
[18:08:54] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:08:54] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:09:19] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:09:20] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:09:40] *** Quits: rfw (rfw@moz-C65A114.rfw.name) (Ping timeout)
[18:09:45] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:09:45] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:10:09] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:10:12] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:10:13] *** Quits: lbonn (lbonn@moz-29C8E1BA.ap-w02.canvas.ne.jp) (Quit: leaving)
[18:10:36] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:10:37] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:11:00] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:11:01] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:11:11] *** Joins: rfw (rfw@moz-C65A114.rfw.name)
[18:11:25] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:11:26] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:11:49] *** zz_kimundi is now known as kimundi
[18:11:50] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:11:51] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:12:16] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:12:18] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:12:43] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:12:44] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:13:09] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:13:10] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:13:36] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:13:38] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:14:03] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:14:04] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:14:28] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:14:28] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:14:38] *** Quits: ljrmorgan (Mibbit@moz-63C2D615.sgyl.cable.virginmedia.com) (Quit: http://www.mibbit.com ajax IRC Client)
[18:14:52] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:14:53] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:15:19] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:15:19] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:15:43] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:15:44] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:15:55] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Ping timeout)
[18:16:08] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:16:09] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:16:21] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:16:34] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:16:35] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:16:59] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:16:59] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:17:25] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:17:25] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:17:49] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:17:49] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:18:14] <cmr> nmatsakis: can you ban zakora (temporarily)?
[18:18:14] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:18:15] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:18:39] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:18:40] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:18:44] <nmatsakis> cmr: ?
[18:19:05] <cmr> you don't see the constant join/quit?
[18:19:06] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:19:08] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:19:16] <nmatsakis> cmr: oh, no. I have those things disabled.
[18:19:32] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:19:33] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:19:58] <EXetoC> join/quit(Max SendQ exceeded) in a loop
[18:19:59] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:19:59] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:20:03] <vmx> engla: thanks. i'm also not sure if the decode should really return a "float" or rather the specific one. i need to check if that's possible
[18:20:24] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:20:25] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:20:34] *** Quits: Diablo-D3 (diablo@moz-6317EE8A.port.east.myfairpoint.net) (Ping timeout)
[18:20:37] <engla> you can use 'Self' as type when defining the trait
[18:20:49] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:20:49] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:20:52] *** Joins: Diablo-D3 (diablo@moz-6317EE8A.port.east.myfairpoint.net)
[18:20:57] <nmatsakis> cmr: ok, I kickban'd him, I'll ... have to remember to unban him in a bit :)
[18:21:14] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:21:15] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:21:22] <nmatsakis> or, never mind.
[18:21:25] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[18:21:39] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:21:39] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:22:03] <EXetoC> annoying client setup
[18:22:04] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:22:04] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:22:29] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:22:30] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:22:52] <nmatsakis> EXetoC: cmr: is it...still a problem?
[18:22:55] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:22:56] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:22:57] <cmr> nmatsakis: yes
[18:23:19] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:23:20] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:23:34] <cmr> I should probably disable join/parts too
[18:23:35] <nmatsakis> EXetoC: cmr: ok, I just added a /ban, hopefully that helps.
[18:23:42] <cmr> but I find that when I do... I miss it
[18:23:44] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:23:45] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:23:49] <nmatsakis> ok, I found I didn't
[18:24:01] <nmatsakis> at least usually not anyway
[18:24:10] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:24:11] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:24:35] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:24:36] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:25:00] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:25:00] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:25:13] <vmx> engla: nice. though it seems that i now need to define the type explicitly. this ends in an error later on: let mut (float_part, _) = value.decode();
[18:25:26] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:25:26] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:25:50] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:25:51] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:26:16] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:26:17] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:26:42] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:26:42] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:27:07] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:27:07] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:27:32] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:27:32] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:27:35] <EXetoC> ah, quit/join filter. retroactive filtering and everything. advanced shit, yo!
[18:27:56] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:27:57] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:28:21] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:28:22] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:28:31] <cmr> oh, my client has a "filter from everyone who hasn't spoken recently"
[18:28:36] <cmr> that's handy
[18:28:46] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:28:46] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:29:11] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:29:12] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:29:36] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:29:37] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:30:00] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:30:01] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:30:15] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:30:15] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/WFARJA
[18:30:15] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:30:26] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:30:27] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:30:33] <engla> vmx: I don't recognize that, did you update the impl sections to change the return types to f32 for f32 etc
[18:30:51] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:30:51] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:30:56] <vmx> engla: sorry didn't updated the paste.
[18:31:16] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:31:17] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:31:41] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:31:41] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:32:06] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:32:06] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:32:31] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:32:32] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:32:52] <vmx> engla: i updated the paste. it also includes the error i get
[18:32:55] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:32:56] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:33:15] <vmx> i also try to find out myself what the problem is
[18:33:21] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:33:21] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:33:45] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:33:46] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:33:46] <EXetoC> zakora: fix your client!!!!! :P
[18:33:54] <EXetoC> ah, too slow
[18:34:11] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:34:11] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:34:27] <engla> vmx: I didn't know that rust does type interference between lines
[18:34:30] <nmatsakis> EXetoC: I take it the "/ban" didn't help... huh.
[18:34:37] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:34:38] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:34:41] <engla> vmx: if you give 'value' a type annotation it'll be ok
[18:34:51] *** Joins: ljrmorgan (Mibbit@moz-63C2D615.sgyl.cable.virginmedia.com)
[18:34:54] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[18:35:03] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:35:04] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:35:09] *** Joins: gareth0 (gareth0@moz-CE2019EE.dynamic.dsl.as9105.com)
[18:35:29] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:35:30] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:35:54] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:35:55] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:36:08] <EXetoC> nmatsakis: NC@moz-8EAF945F.fbx.proxad.net?
[18:36:10] <Jeaye> nmatsakis: /ban NC@moz-8EAF945F.fbx.proxad.net
[18:36:13] <EXetoC> or do you specify the nick?
[18:36:20] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:36:21] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:36:38] * nmatsakis tries again
[18:36:45] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:36:46] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:36:59] <nmatsakis> if that doesn't work, I give up, I gotta run for a bit
[18:37:11] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:37:12] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:37:37] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:37:37] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:38:02] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:38:03] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:38:28] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:38:30] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:38:54] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:38:54] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:39:18] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:39:18] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:39:35] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[18:39:38] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[18:39:44] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:39:45] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:40:10] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:40:10] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:40:35] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:40:36] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:40:52] *** Joins: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se)
[18:41:00] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:41:01] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:41:14] <indutny> so when does [].qsort() appear?
[18:41:22] <indutny> should I "use" something?
[18:41:25] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:41:25] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:41:26] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[18:41:30] <indutny> ah
[18:41:33] <indutny> it needs Copy impl
[18:41:51] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:41:52] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:42:16] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:42:17] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:42:42] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:42:43] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:43:07] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:43:08] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:43:32] <indutny> ah
[18:43:33] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:43:33] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:43:35] <indutny> use std::sort::Sort
[18:43:58] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:43:59] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:44:20] <vmx> engla: i've tried `let mut float_part: f32;`, but now i get: " error: mismatched types: expected `(f32,int)` but found `('a,int)` (expected f32 but found type parameter)"
[18:44:24] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:44:25] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:44:42] *** Quits: jaen (jaen@moz-4E0C389.play-internet.pl) (Ping timeout)
[18:44:50] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:44:51] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:45:13] <vmx> is no one able to ban zakora?
[18:45:18] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:45:18] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:45:43] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:45:43] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:46:09] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:46:10] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:46:36] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:46:36] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:46:45] *** Quits: EXetoC (ex@moz-C741B177.customer.t3.se) (Ping timeout)
[18:47:00] <engla> vmx: your pastebin code worked for me last I tried it. Only needed a type annotation like this: let f: float = 0.2;   f.decode()
[18:47:00] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:47:01] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:47:20] <vmx> let me try again
[18:47:22] <engla> without the :float, it would error. Which is a surprise to me
[18:47:25] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:47:25] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:47:49] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:47:50] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:48:16] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:48:17] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:48:41] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:48:42] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:49:05] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:49:06] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:49:30] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:49:31] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:49:55] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:49:56] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:50:02] <vmx> engla: ok, it works for me. the problem is that in my case the value i want to decode is passed into a function as parameter which uses the float trait (fn as_integer_ratio<T: Float>(value: T). then it doesn't work
[18:50:20] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:50:20] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:50:22] <vmx> so value.decode() will fail
[18:50:37] <engla> what is the error message?
[18:50:46] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:50:46] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[18:50:52] <zq> ye
[18:51:10] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[18:51:10] <engla> also I would not use the name 'Float' and not inherit Float
[18:51:15] *** Joins: jaen (jaen@moz-5C345224.play-internet.pl)
[18:51:28] <engla> trait inheritance is incomplete
[18:51:40] <vmx> ok, i'll change it
[18:52:53] *** Quits: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se) (Quit: webber46)
[18:54:04] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[18:55:51] *** Quits: ljrmorgan (Mibbit@moz-63C2D615.sgyl.cable.virginmedia.com) (Quit: http://www.mibbit.com ajax IRC Client)
[18:57:17] *** zakora was kicked by nmatsakis (nmatsakis)
[18:57:35] <vmx> engla: thanks. i've renamed the trait to `Decode` and it seems to work
[18:59:35] *** Joins: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP)
[19:01:28] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[19:01:40] *** Quits: doener (doener@moz-121949B3.unitymediagroup.de) (Quit: leaving)
[19:02:01] <vmx> engla: when i try to use it as a float for calculations, it breaks again. i've updated the paste with the full code: https://www.friendpaste.com/5jfiAvamlmNbzkJOskwlOs
[19:02:01] <engla> I haven't had luck with trait inheritance and functions. With methods and traits it seems to work as logical (apart from missing checking)
[19:02:39] <engla> you have a loose comma in the trait definition :
[19:02:47] <engla> hope that thing doesn't compile
[19:03:02] <engla> by comma I mean semicolon :
[19:04:00] <vmx> oh, true. no that wasn't the error. it did compile (that part). the error is: ""error: mismatched types: expected `'a` but found `<VF0>` (expected type parameter but found floating-point variable)"
[19:04:25] *** Quits: jaen (jaen@moz-5C345224.play-internet.pl) (Quit: WeeChat 0.4.0)
[19:04:30] *** Joins: jaen (jaen@moz-5C345224.play-internet.pl)
[19:05:09] *** Joins: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[19:07:06] *** Quits: RMF (RMF@moz-4EC53CF7.dsl.telepac.pt) (Ping timeout)
[19:08:36] <vmx> using "myfloat.decode();" directly works
[19:10:15] *** Quits: jaen (jaen@moz-5C345224.play-internet.pl) (Ping timeout)
[19:10:20] *** Joins: RMF (RMF@moz-F61412D.dsl.telepac.pt)
[19:10:23] *** Joins: bheylin (brianheyli@F78BE118.A84841F8.DE877FF9.IP)
[19:10:59] <engla> I don't know how to use literals like 2.0 with a function for "generic float"
[19:14:29] <vmx> so the "generic float" isn't just like a place holder? i thought it would just keep the type i pass in
[19:15:07] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[19:15:18] <engla> it's not a template like C++ where the compiler will try if the template fits after the substitution
[19:15:53] <engla> it will check if the function makes sense using the trait bounds you have specified. So if it's  T: Float + Decode, you can basically just use methods from those traits
[19:17:18] *** Quits: RMF (RMF@moz-F61412D.dsl.telepac.pt) (Quit: Textual IRC Client: www.textualapp.com)
[19:19:26] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[19:19:26] <vmx> engla: ic, thanks for the explanation. so i could use e.g. `.to_f32()` and then go on with that variable
[19:19:53] <engla> maybe NumCast::from(2.0)
[19:20:28] *** Joins: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl)
[19:20:38] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[19:20:41] *** Joins: HOLYCOWBATMAN (Mibbit@moz-AB722A1C.mc.videotron.ca)
[19:21:05] *** Quits: pyrac (pyrac@moz-B95F505.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[19:22:39] *** Joins: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se)
[19:25:07] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (Ping timeout)
[19:26:44] *** Joins: jaen (jaen@moz-5C345224.play-internet.pl)
[19:26:50] *** Joins: pyrac (pyrac@moz-B95F505.w92-156.abo.wanadoo.fr)
[19:30:43] <vmx> "error: use of undeclared module `NumCast"
[19:31:21] <Jeaye> num module?
[19:31:22] <ssbr> vmx: you need to import that trait
[19:31:37] <vmx> hm, i tried that. *tryingharder* :)
[19:33:13] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[19:33:13] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/3hMjAQ
[19:33:13] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[19:35:06] <vmx> oh, i missed the "core::". i'm still a newbie
[19:35:27] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[19:35:28] <vmx> engla: NumCast works!
[19:36:09] <vmx> it still feels a bit weird, though i'm happy as long as it works
[19:38:33] *** Joins: victorporof (victorporo@B86E46F.1B500F07.6A4F8DA2.IP)
[19:39:17] *** Joins: steven_is_false (quassel@moz-B28A481A.vc.shawcable.net)
[19:39:31] <engla> looking back, I called :  comma and then corrected to semicolon.. what's wrong with me  (it's a colon, or I'm really crazy)
[19:39:58] <engla> brain is rust
[19:39:58] <engla> y
[19:40:00] <engla> :-)
[19:41:16] <vmx> oh, it compiles but ends in: "error: internal compiler error: unexpected failure"
[19:42:41] <vmx> time to clean it up for a bug report
[19:43:59] *** Quits: steven_is_false (quassel@moz-B28A481A.vc.shawcable.net) (Ping timeout)
[19:44:46] <cmr> vmx: are you using 0.6, or incoming?
[19:45:04] <vmx> cmr: master
[19:45:24] *** Quits: cstrahan (cstrahan@moz-8DAF91F6.hsd1.dc.comcast.net) (Ping timeout)
[19:45:40] <cmr> vmx: you should use incoming rather than master. master isn't all that frequently updated.
[19:45:57] <vmx> cmr: ok
[19:46:49] <vmx> do i need something like "make supermegaclean" when i switch and recompile, or is a simple "make clean" enough?
[19:47:02] <thiez> you probably don't even need to clean
[19:47:43] * thiez doesn't bother cleaning until stuff starts exploding.
[19:48:37] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[19:48:38] <vmx> ok, cool. will try incoming then (after grabbing some food)
[19:48:39] <cmr> yeah, make clean is unnecessary
[19:49:01] <thiez> vmx: I recommend starting compilation first, then grabbing some food :p
[19:49:37] *** Joins: steven_is_false (quassel@moz-B28A481A.vc.shawcable.net)
[19:50:49] <cmr> nmatsakis: r? https://github.com/mozilla/rust/pull/6400
[19:53:14] *** Joins: cstrahan (cstrahan@moz-8DAF91F6.hsd1.dc.comcast.net)
[19:54:27] *** Quits: steven_is_false (quassel@moz-B28A481A.vc.shawcable.net) (Ping timeout)
[19:54:38] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[19:55:13] *** Quits: jviereck (Adium@moz-C4A71F54.dclient.hispeed.ch) (Quit: Leaving.)
[19:58:49] *** Joins: jviereck (Adium@moz-C4A71F54.dclient.hispeed.ch)
[19:59:01] *** Quits: cstrahan (cstrahan@moz-8DAF91F6.hsd1.dc.comcast.net) (Ping timeout)
[20:00:39] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[20:01:08] *** Quits: jviereck (Adium@moz-C4A71F54.dclient.hispeed.ch) (Quit: Leaving.)
[20:02:14] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Connection reset by peer)
[20:02:20] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[20:04:17] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[20:05:39] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Connection reset by peer)
[20:05:45] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[20:06:11] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:06:11] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14216f720 to 14638b394: 02http://git.io/N3iJvQ
[20:06:11] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:06:12] *** Joins: bEcker (Thunderbir@moz-90785708.resnet.ucsc.edu)
[20:06:16] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:06:16] <ghrust> 01[13rust01] 15bors pushed 10 new commits to 06auto: 02http://git.io/X-ouaA
[20:06:16] <ghrust> 13rust/06auto 14d807f00 15Samuel Chase: Add to_str() for HashMaps, and some basic tests as well.
[20:06:16] <ghrust> 13rust/06auto 14fd5a352 15Samuel Chase: Removed test_hashmap() for the time, being. All tests pass with make check.
[20:06:17] <ghrust> 13rust/06auto 143c1e787 15Samuel Chase: All tests, including newly added test_hashmap() pass. The empty Hash Table doesn't need to be mutable.
[20:06:19] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:06:24] *** Parts: bEcker (Thunderbir@moz-90785708.resnet.ucsc.edu) ()
[20:06:31] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[20:13:53] <thiez> So I notice librustc/middle/trans/build.rs counts for each type of instruction how many it has emitted, is there an easy way to see these numbers?
[20:15:04] *** Joins: lkuper (lkuper@810CB9FD.1C5FF2E6.51B6877.IP)
[20:16:00] <ssbr> Huh, Rust has try-finally. I didn't know that!
[20:16:33] <ssbr> (apparently: `do (|| { ... }).finally { ... }` )
[20:17:53] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[20:18:25] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[20:18:25] *** ChanServ sets mode: +o brson
[20:24:58] *** Quits: pyrac (pyrac@moz-B95F505.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[20:25:53] *** Quits: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp) (Client exited)
[20:28:45] *** Quits: cdidd (cdidd@moz-EBCC8C9A.broadband.corbina.ru) (Ping timeout)
[20:35:27] *** Joins: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org)
[20:37:02] *** Quits: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP) (Quit: lmandel)
[20:40:21] *** Joins: themgt (themgt@moz-F5F3FFDF.dhcp.gnvl.sc.charter.com)
[20:40:33] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[20:41:11] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[20:41:19] *** Joins: mib_ebtqg0 (Mibbit@358A66A1.7CB787F7.83941DEA.IP)
[20:42:27] *** Quits: mib_ebtqg0 (Mibbit@358A66A1.7CB787F7.83941DEA.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:43:45] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Quit: Leaving)
[20:47:07] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[20:49:33] <thiez> So, do we also want the 'relaxed' atomics?
[20:50:11] *** Joins: EXetoC (ex@moz-C741B177.customer.t3.se)
[20:50:30] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[20:51:04] <Jeaye> How can I disable a specific warning in a module?
[20:51:29] <thiez> usually with #[allow_insertsomemagicstringhere]
[20:51:35] <thiez> what is the warning?
[20:52:22] <Jeaye> dead_assignment and unused_mut
[20:52:26] <Jeaye> Due to rustc bugs
[20:52:33] <Jeaye> And it not parsing macros properly.
[20:53:22] <thiez> prepernding _ to a variable name makes unused variable warnings go away, it might also work with dead assignments?
[20:53:30] <thiez> prepending*
[20:53:38] <Jeaye> Ah, that's true.
[20:56:16] <Jeaye> I need a &[u8] from a ~[u8]
[20:57:00] <Jeaye> Well a Some(&[u8]) from a ~[u8] -- I've made this work: Some(cast::transmute((copy image.data, image.data.len())
[20:57:06] <Jeaye> Is there a better way? :|
[20:57:08] <vmx> thiez: yes, i started the compilation before getting food. it's still compiling
[20:57:21] <thiez> I feel your pain :D
[20:57:21] <indutny> by-move pattern bindings may not occur behind @ or & bindings
[20:57:29] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[20:57:29] <indutny> hm...
[20:57:40] <indutny> is there any way to avoid allocating enum in such case:
[20:57:46] *** Quits: bheylin (brianheyli@F78BE118.A84841F8.DE877FF9.IP) (Ping timeout)
[20:57:54] <indutny> enum InternalEnum<K> { User(K), System }
[20:58:11] <indutny> and then: match e { User(K) => K.something(), System => false }
[20:58:19] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[20:58:23] <thiez> indutny: what is the problem with the enum?
[20:58:26] <indutny> well
[20:58:27] <indutny> by-move pattern bindings may not occur behind @ or & bindings
[20:58:33] <indutny> that happens when dealing with it
[20:58:51] <thiez> match e { User(ref K) => k.something, _ => false } ? :)
[20:58:52] <indutny> actually, when trying to pattern-match its value
[20:58:56] <indutny> ah, ref
[20:59:21] <indutny> ok, it works
[20:59:23] <indutny> thank you
[20:59:27] <thiez> that is what it's for, np
[20:59:50] <indutny> so what is it doing?
[20:59:54] <indutny> behind the curtains
[21:00:01] <indutny> (documentation is really short about it)
[21:00:22] <indutny> ah, it'll bind borrowed pointer
[21:00:26] <thiez> well, suppose you have User(8), then the match on User(ref k) creates k = &8
[21:00:31] <indutny> I got it
[21:00:31] <indutny> thanks
[21:00:34] *** Joins: steven_is_false (quassel@moz-144077DE.bchsia.telus.net)
[21:00:36] <indutny> that's nice
[21:00:40] <thiez> yes, quite
[21:00:46] <pascal> What's the best way to do something like: struct MyType {Â current: ~T } where T can be of type A or B?
[21:00:57] <indutny> enum?
[21:00:58] *** Quits: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se) (Quit: webber46)
[21:01:00] <indutny> Either
[21:01:11] <indutny> use either
[21:01:20] *** Quits: victorporof (victorporo@B86E46F.1B500F07.6A4F8DA2.IP) (Quit: victorporof)
[21:02:49] <pascal> oh, cool. I didn't know Either - thanks! And if I have more than two types an enum will be the way to go?
[21:03:25] <thiez> indeed
[21:03:36] *** Joins: bEcker (Thunderbir@moz-90785708.resnet.ucsc.edu)
[21:04:09] *** Parts: bEcker (Thunderbir@moz-90785708.resnet.ucsc.edu) ()
[21:04:52] <thiez> if you look at the definition of Either (src/libcore/either.rs) it should be obvious how to do this
[21:05:43] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[21:06:16] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:06:16] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/X-ouaA
[21:06:16] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:06:18] <ssbr> pascal: if one of the two types is an error, there's also Result (http://static.rust-lang.org/doc/core/result.html)
[21:06:49] *** Quits: gareth0 (gareth0@moz-CE2019EE.dynamic.dsl.as9105.com) (Ping timeout)
[21:06:52] <engla> pascal: enum Json in std::json is an example of that, there's an enum for the types
[21:11:32] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[21:15:14] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:15:14] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/s66mLQ
[21:15:14] <ghrust> 13rust/06auto 14f8fca73 15gareth: Refactor core::run in order to address many of the issues...
[21:15:14] <ghrust> 13rust/06auto 146e50978 15bors: auto merge of #6433 : Dretch/rust/run-refactor, r=brson...
[21:15:15] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:15:51] *** Joins: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp)
[21:16:41] <pascal> So structs in enums aren't implemented at the moment? rust: task failed at 'struct variant kinds unimpl in enum_variants', /Users/pascal/git/rust/src/librustc/middle/ty.rs:4097
[21:17:33] *** Quits: HOLYCOWBATMAN (Mibbit@moz-AB722A1C.mc.videotron.ca) (Quit: http://www.mibbit.com ajax IRC Client)
[21:19:12] *** Joins: cstrahan (cstrahan@moz-4C7E5789.hsd1.dc.comcast.net)
[21:22:11] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Connection reset by peer)
[21:23:41] *** Quits: lkuper (lkuper@810CB9FD.1C5FF2E6.51B6877.IP) (Ping timeout)
[21:24:49] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[21:24:58] <brson> pascal: that's right
[21:29:43] *** Joins: mdu (mdu@moz-9962C9F4.rev.numericable.fr)
[21:29:50] <pascal> okay, I'll just use tuples - thanks
[21:31:56] *** Joins: victorporof (victorporo@B86E46F.1B500F07.6A4F8DA2.IP)
[21:38:25] *** Quits: victorporof (victorporo@B86E46F.1B500F07.6A4F8DA2.IP) (Ping timeout)
[21:42:45] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[21:46:01] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[21:49:52] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[21:49:57] *** Quits: an0nymous (an0nymous@moz-A6B0CE4.tx.res.rr.com) (Ping timeout)
[21:51:00] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Quit: Leaving)
[21:51:19] <sp3d> cmr: cool, rust update makes it run in constant space now afaict
[21:54:51] *** Quits: haard (fredrik@moz-6A86987C.dynamic.se.alltele.net) (Ping timeout)
[21:57:45] <thiez> brson: it looks like you reviewed Luqman's atomic-intrinsics related pull request seven months ago, would you be interested in reviewing mine (#6437)?
[21:58:38] <brson> thiez: yes
[21:58:53] <thiez> thanks :)
[22:01:41] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[22:02:40] <bjz> brson: r? https://github.com/mozilla/rust/pull/6439
[22:05:17] <ssbr> I definitely want static linking to work :(   https://github.com/bjz/glfw-rs/issues/2
[22:05:38] <ssbr> bjz: that issue isn't fixed!
[22:07:05] <bjz> ssbr: it works, but you need dynamic linking. in that sense it's fixed
[22:07:22] *** Joins: victorporof (victorporo@B86E46F.1B500F07.6A4F8DA2.IP)
[22:07:27] <ssbr> bjz: I can't use glfw-rs with the copy of glfw that comes in the debian repositories
[22:07:45] <bjz> ssbr: that's because it uses glfw 3
[22:07:53] <ssbr> bjz: oh, is it?
[22:07:56] <ssbr> what should I be using?
[22:08:02] <bjz> clone it from github.com/glfw/glfw
[22:08:39] <brson> thiez: looks good. I did put one comment there asking why the AtomicLoad builder ever sees an array PointerVal
[22:08:47] <ssbr> bjz: what is the difference between the two?
[22:09:08] <bjz> ssbr: glfw 2.7 hasn't been updated in yonks
[22:09:19] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:09:19] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 146e50978 to 147dc94b8: 02http://git.io/N3iJvQ
[22:09:19] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:09:20] <bjz> ssbr: glfw3 has a much cleaner api
[22:09:23] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:09:23] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/aR7Xmw
[22:09:23] <ghrust> 13rust/06auto 144f8084a 15Brendan Zabarauskas: Make Float::classify matching more clear for f64 and f32
[22:09:23] <ghrust> 13rust/06auto 14830b945 15bors: auto merge of #6439 : bjz/rust/float-classify, r=brson
[22:09:23] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:09:28] <thiez> brson: good point, I copied from the original Load
[22:10:09] <bjz> ssbr: be aware that I've made some modifications to the api to make it more ideomatic. the examples should help
[22:10:38] <ssbr> bjz: I don't know how to use GLFW anyway. I've only used WebGL/Canvas
[22:10:48] * ssbr is looking forward to being able to use geometry shaders
[22:10:54] <bjz> ssbr: I need to add better documentation (the glfw3 ones really put me to shame)
[22:11:29] <ssbr> bjz: the examples seem sufficient for basic usage, anyway. There's enough to make a window and react to keyboard events, and that's all I want right now.
[22:11:36] <bjz> ssbr: https://github.com/bjz/open.gl-tutorials
[22:11:38] <ssbr> (make a window / OpenGL context)
[22:11:46] <ssbr> bjz: yeah, I noticed you ported those. Very sweet :)
[22:11:49] <bjz> ssbr: they might be broken atm though
[22:11:54] *** Parts: Mic92 (Mic92@moz-35FE9196.linuxlovers.at) ()
[22:11:57] <ssbr> open.gl was how I learned webgl
[22:12:10] <ssbr> (also the GLES reference)
[22:12:11] <bjz> ssbr: lmath is currently broken
[22:12:25] <ssbr> bjz: :(
[22:12:35] <bjz> so the examples that use it don't work
[22:12:41] <bjz> but the rest should be fine
[22:13:11] <steven_is_false> brson: You suggested facilities to cast pointers to void pointers for my pull request. Which is best for your uses? Casting to borrowed bointers, casting to owned pointers, or both?
[22:13:21] *** Quits: victorporof (victorporo@B86E46F.1B500F07.6A4F8DA2.IP) (Ping timeout)
[22:13:42] <bjz> brson: any word on the timeframe on pcwalton's thingy? http://www.reddit.com/r/rust/comments/1dgduy/meetingweekly20130430_borrowck_closure_recursion/c9q14yz
[22:14:04] <ssbr> bjz: I'll let you know if I end up making anything cool :)
[22:14:09] <ssbr> thanks for all your help!
[22:14:15] <bjz> brson: would be nice to unbreak lmath, but I know he has a very full whiteboard
[22:14:16] * ssbr gets to work building glfw-rs again
[22:14:32] <bjz> ssbr: let me know if you have any more issues
[22:14:33] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Input/output error)
[22:14:35] <brson> steven_is_false: I most often cast ~ to transfer ownership to unsafe code
[22:14:41] *** Quits: jaen (jaen@moz-5C345224.play-internet.pl) (Ping timeout)
[22:14:44] <steven_is_false> brson: Thank you.
[22:14:52] <brson> steven_is_false: I'll look at that pull again
[22:15:02] <steven_is_false> brson: Thank you.
[22:15:06] <bjz> ssbr: and I always am greatful of pull requests if something needs fixing
[22:15:26] <ssbr> eghhgh. "The Xf86VidMode library and headers were not found", but I have installed x11proto-xf86vidmode-dev
[22:16:54] <brson> steven_is_false: if you would typedef `libc::c_void` as `util::Void` that would complete https://github.com/mozilla/rust/issues/4724
[22:17:31] <ssbr> time to ask #debian
[22:17:47] <brson> bjz: pcwalton's proposal on the mailing list fixes your typedef issues? https://mail.mozilla.org/pipermail/rust-dev/2013-April/003866.html
[22:17:48] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[22:18:11] <bjz> brson: that is correct
[22:18:19] <thiez> brson: I have an update that removes the silly array check.
[22:19:17] <steven_is_false> brson: For a void pointer one would have to cast back so one can call the right destructor right? So casting to a void pointer has to be unsafe in general. Is there a trait for types that don't have destructors?
[22:19:35] <brson> bjz: I haven't heard him say anything further about it
[22:20:18] <bjz> brson: I can see it being useful in std::num too
[22:20:52] <brson> steven_is_false: yes, unsafe in general. there isn't a trait for types without dtors that i can think of
[22:23:28] <bjz> brson: would it be something that could be brought up in the meeting again tomorrow? or are you pressed for time?
[22:24:04] <bjz> brson: as always, lots to do
[22:24:33] <steven_is_false> brson: Would Copy types be sufficient for your purposes?
[22:24:56] <bjz> brson: I would really love to have a nice opengl tutorial out by the release of 0.7
[22:26:00] <brson> bjz: I put it on the agenda https://etherpad.mozilla.org/Meeting-weekly-2013-05-13
[22:26:44] <ssbr> bjz: I compiled and installed GLFW3, building shared libraries, and rebuilt glfw-rs, but I'm still getting similar output as that bug report (undefined reference to <...>)
[22:27:08] <ssbr> when I try to build something that uses glfw-rs
[22:27:26] <brson> steven_is_false: i'm not clear on why you want to avoid dtors. casting to *Void is unsafe, forgetting to run a dtor is also unsafe. are their differences in degrees of unsafety that you are worried about?
[22:28:07] <bjz> ssbr: odd
[22:28:21] *** Joins: judder (maradukewa@DABDEEA3.F2C0D0AC.78E362FE.IP)
[22:28:22] <bjz> ssbr: could you paste/gist the errors?
[22:28:26] <steven_is_false> brson: Casting to ~Void from ~T where T implements Copy is not unsafe because a ~Void can not be dereferenced. It's the difference between downcasting, and upcasting.
[22:28:49] <bjz> ssbr: they are super helpful in these instances
[22:29:01] <brson> steven_is_false: ah. that's not my use case. I am thinking of *Void
[22:29:06] <ssbr> bjz: http://bpaste.net/show/aUdg1vagGcFzHcazSHnL/
[22:29:39] <brson> steven_is_false: upcasting to a generic pointer seems more appropriate for ~Any
[22:29:58] <steven_is_false> brson: In that case  why not use transmute?
[22:30:23] <bjz> ssbr: try uninstalling the debian port
[22:30:36] <steven_is_false> brson: Should all operations on * pointers be unsafe?
[22:30:38] <bjz> and uninstalling/reinstalling glfw
[22:30:56] <brson> steven_is_false: not necessarily. pointer math is safe. dereferencing * is unsafe
[22:31:26] <brson> steven_is_false: transmute is fine, but it's a blunt hammer. I do enough conversion between *c_void that there seems to be a pattern there
[22:31:34] <steven_is_false> brson: So then fn <T : Copy> to_void_pointer (pointer : *T) -> *Void would make sense as a safe operation.
[22:32:08] <brson> steven_is_false: yes, I would call that safe
[22:32:14] <ssbr> bjz: success
[22:32:14] <ssbr> ugh
[22:32:16] <ssbr> I hate linkers
[22:32:20] <ssbr> bjz: thank you
[22:32:29] <steven_is_false> brson: But you need to do that for destructable types to right?
[22:33:11] <ssbr> bjz: complete success. My test program compiles and runs properly :)
[22:33:16] <ssbr> Woooo!
[22:33:31] <brson> steven_is_false: the operations I was specifically thinking of are more like `to_void(T) -> *Void` `from_void(*Void) -> T`. for unique pointers i generally want to consume the ~ when converting to *Void, and always pair that with a conversion the otherway, essentially passing ownership to unsafe code and back
[22:34:13] <brson> if dtors didn't take up space we could even wrap this in a smart pointer *Void that always casts back to the safe type
[22:34:49] *** Joins: jaen (jaen@moz-5C345224.play-internet.pl)
[22:34:51] <brson> although often when I do this conversion it's to share a ~
[22:34:58] <brson> so the dtor solution wouldn't work there
[22:37:43] <steven_is_false> brson: What code most uses libc::c_void? I'll take a look at it, and understand what you want better.
[22:40:04] <brson> steven_is_false: sorry for the vaguery. i'm not even sure what I want. I'll see if i can dig up an example
[22:40:15] <steven_is_false> brson: Thank you!
[22:42:38] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[22:43:21] <brson> steven_is_false: here's an example of the pattern I'm thinking of https://github.com/mozilla/rust/blob/incoming/src/libcore/rt/sched/local_sched.rs#L24
[22:43:46] <brson> steven_is_false: ~Scheduler gets installed into and taken out of TLS by transmuting to an unsafe generic pointer
[22:43:57] <brson> steven_is_false: passing ownership to and from TLS
[22:44:38] *** Quits: rsaarelm (rsaarelm@moz-D1CB7158.dhcp.inet.fi) (Ping timeout)
[22:44:44] *** Quits: steven_is_false (quassel@moz-144077DE.bchsia.telus.net) (Ping timeout)
[22:45:59] *** Parts: judder (maradukewa@DABDEEA3.F2C0D0AC.78E362FE.IP) ()
[22:46:26] <benh> Does that leak if put is called multiple times without take inbetween?
[22:48:02] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[22:48:24] <bjz> ssbr: no worries! glad I could help :)
[22:50:01] *** Joins: rsaarelm (rsaarelm@moz-D1CB7158.dhcp.inet.fi)
[22:51:19] *** Joins: steven_is_false (quassel@moz-144077DE.bchsia.telus.net)
[22:57:55] *** kimundi is now known as zz_kimundi
[23:00:45] <vmx> i get a crash when using NumCast:from(). i tried to make the code as small as possible: https://www.friendpaste.com/2Zs1PhQUAGMV2ChLGM9Zlo
[23:01:03] <vmx> i just wonder if i do something wrong or if i should file a bug
[23:04:22] <brson> how can I tell gdb to run a program forever until it crashes?
[23:04:32] <brson> run a program *repeatedly
[23:05:24] <steven_is_false> vmx: What kind of crash? Is it a fail! type crash or a serious crash?
[23:06:01] <vmx> "error: internal compiler error: unexpected failure"
[23:06:18] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:06:18] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/aR7Xmw
[23:06:18] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:06:20] <steven_is_false> vmx: Oh! The compiler crashes?
[23:06:23] <vmx> "note: the compiler hit an unexpected failure path. this is a bug"
[23:06:33] <vmx> i'd call it serious :)
[23:06:46] <steven_is_false> vmx: If the issue isn't already reported then you should.
[23:07:14] <vmx> i don't have a clue what i should look for when searching for an existing one
[23:07:23] <vmx> no idea what the problem is (i'm new to rust)
[23:08:11] <steven_is_false> vmx: Can you get a backtrace? Set the environment variable RUST_LOG to 1, or rt::backtrace to get more info.
[23:08:30] <steven_is_false> vmx: There's a bunch of different options to get more info about the problem.
[23:08:36] *** Quits: raze (raze@moz-4E6675AF.bredband.comhem.se) (Ping timeout)
[23:08:54] <vmx> i also recompiled with --enable-debug and hoped the backtrace would be more useful, but it didn't get more useful
[23:09:18] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:09:18] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/mDqCiA
[23:09:18] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:09:18] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:09:18] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/quLqFA
[23:09:18] <ghrust> 13rust/06auto 1472c9aab 15Steven Stewart-Gallus: Created utility uninhabited type...
[23:09:18] <ghrust> 13rust/06auto 148d1a09c 15bors: auto merge of #6348 : sstewartgallus/rust/incoming, r=brson...
[23:09:19] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:10:03] <vmx> steven_is_false: that's the output: https://www.friendpaste.com/2Zs1PhQUAGMV2ChLGMIC1M
[23:10:20] <vmx> btw: it's nice that the crash tells you what to do
[23:10:39] <cmr> steven_is_false: what is an uninhabited type exactly?
[23:10:58] <steven_is_false> cmr: It's the set with no members.
[23:11:16] <ssbr> Blegh. I don't suppose there's a nicer way of writing pub struct MyStruct { priv value: T } ? i.e. I want to wrap a value behind a type, in a way that the value can't be read by outside code
[23:11:42] <steven_is_false> cmr: I know set, and types aren't the same thing but how about this. Type theory is a type of Set theory, not niave set theory at all but still a type of set theory.
[23:12:06] *** Joins: victorporof (victorporo@B86E46F.1B500F07.6A4F8DA2.IP)
[23:12:24] <steven_is_false> ssbr: I dislike that there doesn't seem to be a nicer way of doing that.
[23:12:36] *** Quits: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl) (Client exited)
[23:12:38] <steven_is_false> ssbr: If you don't need a destructor maybe you can use an enum?
[23:12:52] <steven_is_false> ssbr: pub enum X { priv X (T) }?
[23:12:54] <cmr> ssbr: can you return a priv struct?
[23:13:00] <ssbr> cmr: I assumed not
[23:13:13] <cmr> I would assume not to, but worth the shot?
[23:14:15] *** Quits: victorporof (victorporo@B86E46F.1B500F07.6A4F8DA2.IP) (Ping timeout)
[23:14:44] <ssbr> OK, actually, I can.
[23:15:47] <vmx> steven_is_false: what are my next steps? just filing a bug and attach this output?
[23:16:09] <ssbr> haha, that works perfectly
[23:16:09] <steven_is_false> vmx: Yes.
[23:16:19] <vmx> k, cool
[23:16:39] <steven_is_false> vmx: Thank you for helping out with the Rust project.
[23:16:39] <cmr> ssbr: KISS applies here, that makes me happy!
[23:16:51] <ssbr> steven_is_false: cmr: the way to do it is "priv struct _MyStruct(T); pub type MyStruct = _MyStruct; pub fn foo(x: T) -> MyStruct { _MyStruct(x) }"
[23:17:04] <vmx> steven_is_false: no worries. this chat has been awesome so far
[23:17:09] <ssbr> so then people can reference your type via MyStruct, but can't investigate the contents of the tuple-struct
[23:17:16] <ssbr> completely absurd :P
[23:17:45] <ssbr> (I don't know if this is _supposed_ to work, but it appears to.)
[23:18:25] <ssbr> cmr: thanks for the suggestion :)
[23:19:50] *** Joins: skippydippy (Mibbit@moz-C28285DA.tmodns.net)
[23:21:41] <vmx> done: https://github.com/mozilla/rust/issues/6440 g'night
[23:24:07] *** Quits: vmx (vmx@moz-2AFF1E8D.pools.arcor-ip.net) (Quit: Leaving)
[23:24:09] <ssbr> What should I use if a function can either return nothing (side effects), or an error? Result<(), ~str> ?
[23:24:26] <steven_is_false> ssbr: Option.
[23:24:46] <steven_is_false> ssbr: Oh wait. Maybe Result <(), ~str> is the best approach.
[23:24:56] <ssbr> steven_is_false: yeah, Option feels a little misleading.
[23:24:56] <steven_is_false> ssbr: That's really tricky
[23:25:19] <ssbr> ack, but Result<(), ~str> doesn't compose nicely with e.g. .chain()
[23:25:45] <ssbr> I know what I'll do. I'll introduce new types that let it return something.
[23:26:16] <ssbr> (so it can be linkProgram : UnlinkedProgram -> Result<Program, ~str> instead of Program -> Result<(), ~str>)
[23:27:00] <EXetoC> Either?
[23:27:25] <steven_is_false> ssbr: You may want to try using phantom types. Program <Unlinked> -> Result <Program <Linked>, ~str> might be a better choice.
[23:28:04] <ssbr> steven_is_false: doesn't that leave the set of states a Program can be in open?
[23:28:23] <ssbr> oh, and it lets you take Program<T>. Hm.
[23:28:33] <steven_is_false> ssbr: Unfortunately, yes one could have the type Program <Whatever> but it'd be uninhabited.
[23:29:19] <fread2281> EXetoC: Either eels like Option
[23:29:59] <ssbr> Either and Option and Result are all pretty related.
[23:30:55] <ssbr> steven_is_false: I guess the only advantages it has is letting me take a program whose linkage status I don't know, and letting me easily specify more statuses?
[23:31:25] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[23:31:41] <steven_is_false> ssbr: Yes. It's not really much of an advantage. If you don't do it I'd recommend doing this alternative.
[23:32:01] <steven_is_false> ssbr: You could do pub mod program { pub struct Unlinked etc...
[23:32:21] <EXetoC> I just fail if the program doesn't link
[23:32:25] <ssbr> I think I'll do it as I was going to before you brought it up.
[23:32:28] <EXetoC> I only have one program though
[23:32:54] <ssbr> EXetoC: that's also an option for early code
[23:32:56] <steven_is_false> ssbr: So for example, one would have link_program : program::Unlinked -> Result <program::Linked, ~str>
[23:33:02] <ssbr> but it's not that much easier
[23:33:16] <ssbr> steven_is_false: ah, yes
[23:33:26] <steven_is_false> EXetoC: I plan on being able to reload the shader program on the fly, so I can't do that.
[23:33:27] <ssbr> namespaces :)
[23:33:52] * ssbr is writing a quick wrapper around coregl so that he doesn't have to deal with error checking and can just use Result::chain everywhere
[23:34:03] <ssbr> at least for the parts I use.
[23:34:04] *** Quits: skippydippy (Mibbit@moz-C28285DA.tmodns.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:35:25] <cyndis> btw you can get opengl errors using ARB_debug_output without having to use glGetError after everything
[23:35:32] <cyndis> also it's much faster
[23:36:08] <steven_is_false> cyndis: Or on mesa one can set the environment variable MESA_DEBUG to 1. I imagine their might be similar alternatives for other platforms.
[23:36:41] <cyndis> might be
[23:36:48] <steven_is_false> As well, one can use tools like apitrace to debug problems.
[23:37:41] <steven_is_false> cyndis: I should still get around to writing the code to use ARB_debug_output though.
[23:37:52] <cyndis> at least with arb_debug_output you can breakpoint the debug callback and get the error location in your code
[23:38:09] <steven_is_false> cyndis: One can breakpoint _mesa_error as well.
[23:38:29] <steven_is_false> cyndis: But ARB_debug_output is more portable.
[23:38:32] <cyndis> ok. i don't have mesa so i haven't researched that :)
[23:39:00] <cyndis> i use arb_debug_output in http://github.com/cyndis/rsmc/ 's main.rs
[23:39:02] <cyndis> it's only a couple of lines
[23:39:34] <steven_is_false> cyndis: I don't think Rust has proper support for calling C function pointers yet.
[23:40:06] <cyndis> well..my code works
[23:40:15] <cyndis> or at least worked at some point, haven't updated it for the most recent incomings
[23:40:54] <cyndis> but it doesn't call C functions pointers, just passes one to glDebugMessageCallback
[23:41:29] <steven_is_false> cyndis: Don't you have to get glDebugMessageCallback as a function pointer because it's an extension?
[23:41:43] <cyndis> glcore seems to include it
[23:41:57] <steven_is_false> cyndis: Oh.
[23:42:06] <cyndis> and if it didn't, i could just use an extern { } block
[23:42:12] <cyndis> which i do for some extension functions
[23:42:26] <cyndis> EXT_direct_state_access specifically
[23:42:56] *** Quits: libertas (libertas@24705417.947171E6.593B3862.IP) (Ping timeout)
[23:43:19] <Jeaye> Does Rust support a static state for implementing singleton patterns?
[23:43:56] <steven_is_false> Jeaye: I think there are plans to implement unsafe mutable globals. I don't know if it is implemented yet.
[23:44:01] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[23:44:12] <steven_is_false> Jeaye: Can you use thread local state instead?
[23:44:39] <Jeaye> cyndis: Speaking of OpenGL speed, I looked over some of your source yesterday. You should be able to get more from rendering using indexed tris or (as I'm doing) am instance-based approach.
[23:45:04] <Jeaye> I see you're using rendering GL_QUADS which is not the most optimal solution.
[23:45:21] <cyndis> yeah, it's not really optimized yet
[23:45:44] <Jeaye> I'm running into perf problems with my voxel rendering. >.<
[23:45:51] *** Joins: Vermeille (Mibbit@574EF439.4D395588.31D22F4.IP)
[23:45:56] <cyndis> what size is your world?
[23:45:58] <Vermeille> Hey guys!
[23:46:25] <cyndis> hey
[23:46:36] <Jeaye> cyndis: 500^3, and I'm rendering about 650K instanced voxels per frame. Hanging around 30 fps for now.
[23:46:46] <Vermeille> I'm new to Rust (just discovered it few hours ago), and, reading some source code, I saw some code like 'static or 'self, that I cannot find documented What is it ?
[23:46:58] <Vermeille> what is this quote operator ?
[23:47:08] <cmr> Vermeille: Named lifetimes, covered in the borrowed pointer tutorial
[23:47:11] <thiez> Jeaye: you wouldn't happen to have a screenshot, would you?
[23:47:20] <Jeaye> Vermeille: http://static.rust-lang.org/doc/0.6/tutorial-borrowed-ptr.html#named-lifetimes
[23:47:35] <cmr> aww, beat me to it
[23:48:13] <Jeaye> thiez: Tons of 'em. :P Here's one of the latests, shown in wireframe https://raw.github.com/Jeaye/q3/master/pics/012_3_wire_color.png
[23:48:44] <Jeaye> That's unfortunately doing some hacky tricks to get nice frame rate. 
[23:49:06] <EXetoC> oh right, that project
[23:49:10] <Vermeille> Hum, thank you !
[23:49:19] <cmr> well isn't that the world of rendering engines, hacks to make it go vroom?
[23:49:23] <cyndis> have you actually tested that instanced rendering is faster?
[23:49:24] <thiez> Jeaye: I love it, awesome.
[23:49:30] <Jeaye> EXetoC: Does it rub you the wrong way? :(
[23:49:43] <cyndis> i mean, logically it would be, but gpu drivers are anything but logical
[23:49:45] <Vermeille> pointers in rust are quite esoteric, especially the ~10 construct. Is that really taking the adress of an rvalue o_o ?
[23:50:00] <cmr> Vermeille: No. It's allocating a new integer.
[23:50:04] <engla> Vermeille: think of it as creating an object
[23:50:09] <engla> it's much simpler
[23:50:10] <bjz> Vermeille: like malloc
[23:50:21] <Vermeille> Scuse me. I meant &10
[23:50:32] <Jeaye> thiez: :) Thanks.
[23:50:38] <Vermeille> Obviously, ~10 is like std::make_unique(10)
[23:50:47] <bjz> Vermeille: that's a pointer on the stack
[23:50:56] <Jeaye> bjz! Welcome back.
[23:51:01] <bjz> Jeaye: hoya
[23:51:16] <bjz> Jeaye: sorry was away for my sister's wedding
[23:51:28] <bjz> Jeaye: thanks for keeping up the housekeeping
[23:51:34] <Jeaye> No worries.
[23:51:54] <Vermeille> So, when I write let a = &10, I push 10 on the stack then take its adress and store it into a ?
[23:52:25] <bjz> Vermeille: I believe so
[23:52:34] <cmr> Vermeille: You might look at the output of "rustc --emit-llvm -S" to see what code it generates
[23:52:55] <Jeaye> That's like saying `int const &a(10);`, isn't it? It's a reference.
[23:52:55] <engla> Vermeille: you can do this in C too,  int *ptr = &(int){10}; (you can take a pointer of a compound literal)
[23:53:04] <Vermeille> Good idea.
[23:53:13] <bjz> rusti: (sys::size_of::<int>(), sys::size_of::<&int>())
[23:53:14] <rusti> (8, 8)
[23:53:22] <Vermeille> Omg. Didn't know.
[23:53:25] <bjz> rusti: (sys::size_of::<u8>(), sys::size_of::<&u8>())
[23:53:25] <rusti> (1, 8)
[23:53:41] <bjz> Vermeille: ^
[23:54:02] <Vermeille> And, last and really stupid question
[23:54:11] <bjz> no silly questions
[23:54:11] <Vermeille> is Rust a native language ?
[23:54:16] <bjz> yah
[23:54:17] <Jeaye> Yes.
[23:54:18] <cmr> Yes.
[23:54:20] <Vermeille> I see that the compiler is built on llvm
[23:54:26] <bjz> like C and C++
[23:54:27] <cmr> It emits LLVM and LLVM does the codegen
[23:54:31] <bjz> indeed
[23:54:31] <Vermeille> Okay.
[23:54:39] <bjz> (and D, Go)_
[23:55:00] <engla> LLVM is not a VM
[23:55:01] <Vermeille> What about emitting only llvm bitcode and use it like the executable?
[23:55:33] <bjz> engla: confusingly :)
[23:55:33] <Vermeille> Is that a good idea ?
[23:55:45] <cmr> That is possible. --emit-llvm leaves a .bc file rather than an object file or executable.
[23:56:09] <cmr> I don't know how useful it would be though.
[23:56:09] <steven_is_false> Vermeille: It's possible to emit portable llvm bitcode but I believe it'd be pretty restricted.
[23:56:29] <cmr> steven_is_false: all llvm bitcode is portable?
[23:56:41] <bjz> Vermeille: there is experimental JIT in llvm, but it's pretty rudimentary. rusti uses it, but it's currently broken
[23:56:55] <steven_is_false> cmr: No. For example, consider C code which uses sizeof.
[23:57:11] <fread2281> rusti: sys::size_of::<vec>()
[23:57:13] <rusti> foo.rs:5:24: 5:27 error: found type name used as a variable
[23:57:13] <rusti> foo.rs:5          sys::size_of::<vec>()
[23:57:13] <rusti>                                  ^~~
[23:57:13] <rusti> note: in expansion of fmt!
[23:57:13] <rusti> foo.rs:4:12: 6:7 note: expansion site
[23:57:18] <fread2281> rusti: sys::size_of::<~vec>()
[23:57:19] <rusti> foo.rs:5:25: 5:28 error: found type name used as a variable
[23:57:19] <rusti> foo.rs:5          sys::size_of::<~vec>()
[23:57:19] <rusti>                                   ^~~
[23:57:19] <rusti> note: in expansion of fmt!
[23:57:19] *** concrete.mozilla.org sets mode: +M 
[23:57:19] <rusti> foo.rs:4:12: 6:7 note: expansion site
[23:57:34] <cmr> steven_is_false: well it's not llvm's fault that the language has certainl compile-time constants
[23:57:47] <cmr> rusti: sys::size_of::<~[u8]>()
[23:57:48] <rusti> 8
[23:57:51] <cmr> rusti: sys::size_of::<[u8]>()
[23:57:53] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/XUWE
[23:58:04] <cmr> rusti: sys::size_of::<&[u8]>()
[23:58:05] <rusti> 16
[23:58:49] <bjz> rusti: (sys::size_of::<[u8, ..3]>(), sys::size_of::<[u8, ..4]>())
[23:58:49] <rusti> (3, 4)
[23:59:11] <bjz> rusti: (sys::size_of::<[u8, ..3]>(), sys::size_of::<[u8, ..4]>(), sys::size_of::<[u8, ..5]>(), sys::size_of::<[u8, ..18]>())
[23:59:12] <rusti> (3, 4, 5, 18)
[23:59:17] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Client exited)
[23:59:35] <bjz> rusti: (sys::size_of::<[uint, ..3]>(), sys::size_of::<[uint, ..4]>(), sys::size_of::<[uint, ..5]>(), sys::size_of::<[uint, ..18]>())
[23:59:36] <rusti> (24, 32, 40, 144)
[23:59:41] <bjz> :)
