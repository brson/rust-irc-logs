[00:32:58] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[00:38:28] *** Joins: brson (brson@moz-u4t.ku8.145.82.IP)
[00:38:29] *** ChanServ sets mode: +ao brson brson
[01:04:04] <Gankro> Anyone have a recommended/preferred method of using multirust to easily use local builds? Right now I'm symlinking nightly::cargo into my build dir, but that seems janky.
[01:08:40] <cmr> Gankro: I believe you can use multirust override --link-local path/to/your/stuff
[01:09:16] <Gankro> cmr: That's what I do
[01:09:23] <Gankro> But it errors out on a missing cargo
[01:09:31] <cmr> Oh, right, I see what you're saying now.
[01:09:48] <cmr> I've previously recommended nrc to just symlink cargo too.
[01:10:02] <Gankro> Alright, as long as that's the recommendation
[01:10:09] <Gankro> Easy enough to make a script for it
[01:10:33] <Gankro> (I'm assuming this current build will clober that link...)
[01:23:08] *** Quits: brson (brson@moz-u4t.ku8.145.82.IP) (Quit: leaving)
[02:48:40] <Gankro> oh sweet the symlink was preserved
[02:48:46] <Gankro> I choose to thank brson for this
[02:48:54] <Gankro> aw he left
[02:49:24] <Gankro> I guess I will thank edunham, since I assume she is mystically making all tooling vaguely better
[02:57:51] <edunham> heh, so far the "better" has been comprised of sticking bandaids on the most egregious SPOFs in the infrastructure, but you're very welcome :)
[03:03:18] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[03:34:51] <Gankro> Doin' god's work right there
[05:48:36] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[05:56:57] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[07:09:05] *** Joins: Tobba (Tobba@moz-6oh.7ki.21.217.IP)
[10:53:56] *** Quits: nrc (nrc@moz-14pjgj.xtra.co.nz) (Ping timeout: 121 seconds)
[11:11:16] *** Joins: nrc (nrc@moz-14pjgj.xtra.co.nz)
[11:11:17] *** ChanServ sets mode: +ao nrc nrc
[11:15:42] *** Quits: nrc (nrc@moz-14pjgj.xtra.co.nz) (Ping timeout: 121 seconds)
[11:47:16] *** Quits: Tobba (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[12:54:24] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[13:27:00] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[13:57:56] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (A TLS packet with unexpected length was received.)
[13:58:24] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[14:01:12] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (A TLS packet with unexpected length was received.)
[14:02:30] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[16:03:35] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (A TLS packet with unexpected length was received.)
[16:08:04] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[17:22:06] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[17:22:06] *** ChanServ sets mode: +ao brson brson
[17:26:33] <acrichto> brson: should the freebsd changes to master.cfg be committed?
[17:28:00] <brson> acrichto: yes
[17:28:23] <acrichto> brson: I chatted with them a bit last night, not much was concluded though I think
[17:30:31] <brson> acrichto: does it look like nothing will come of it? I'm waiting for a gpg key so I can send koobs passwords
[17:30:34] <brson> maybe i should send him a reminder
[17:31:13] <acrichto> brson: I uploaded a cargo snapshot, but it sounded like they wanted to set up like 3 extra snapshot bots for freebsd
[17:31:15] <brson> i wonder if the process of adding 2nd tier slaves could be more self-service
[17:31:21] <brson> potentially really dangerous
[17:31:45] <brson> acrichto: why snapshot bots specifically?
[17:31:49] <brson> that doesn't make sense :)
[17:31:50] <acrichto> not sure...
[17:31:58] <acrichto> I was very confused
[17:32:00] <acrichto> lemme see if I can find the logs
[17:32:29] <acrichto> brson: starts here: https://botbot.me/mozilla/rust-internals/2015-06-02/?msg=40744711&page=1
[17:35:35] *** Joins: mib_sl8fhu (Mibbit@moz-g6k.oht.161.46.IP)
[17:38:19] <brson> acrichto: which bots actually make cargo snaps?
[17:38:45] <acrichto> brson: cargo snapshots are actually just some old nightly
[17:38:52] <acrichto> brson: for better or for worse...
[17:38:57] <brson> ah, no that's good
[17:39:02] <acrichto> so "uploading a snapshot" is just me "putting in a special place"
[17:39:14] <brson> acrichto: oh you have to do something on s3 to make a snap?
[17:39:15] <acrichto> april 17 is the only bitrig and freebsd nightly available now :P
[17:39:23] <brson> not just point a text file at the archives?
[17:39:36] <acrichto> oh nah it's just a .txt pointing at an old date
[17:39:43] <acrichto> https://github.com/rust-lang/cargo/blob/master/src/snapshots.txt
[17:39:48] <brson> seems like we need to figure out how to get community cargo (and maybe rust) nightlies working
[17:40:01] <acrichto> that would be nice yeah
[17:40:08] <acrichto> I've seen awesome work for ARM fly by
[17:40:15] <acrichto> would be sweet to have arm nightlies
[17:40:23] <brson> i can put some time into that this week
[17:40:24] <acrichto> and/or arm releases (e.g. built on the same commit)
[17:41:06] <brson> acrichto: do you think it's worth it to pursue this now?
[17:41:07] <edunham> as in we host builds that others submit to us?
[17:41:11] <brson> seems like deband is increasing
[17:41:15] <brson> edunham: yes
[17:41:21] <brson> *demand
[17:41:43] <brson> we're already hosting bitrig snapshots
[17:41:52] <acrichto> brson: I don't think it's super duper urgent, although I'd like to sit down and start to prioritize this stuff to get a sense
[17:42:01] <acrichto> I feel like we have more higher priority things elsewhere
[17:42:03] <brson> we'll lets talk about it in the mtg today!
[17:42:07] <acrichto> :D
[17:42:20] <edunham> yeah, my goals meeting thing will be a good place to talk about the relative on-fire-ness of all the things
[17:43:37] <edunham> I can imagine a process in which contributors send us community snapshots by PR to something infra-related, we do a quick check to make sure it's something we want to host, and kick off an automatic publication process by merging
[17:44:09] <acrichto> I wonder if we want to upload community snapshots to a different location
[17:44:29] <acrichto> and have some sort of map saying "official triples here, unofficial ones here"
[17:44:32] <edunham> yeah I think at the very least we'd want to link them from a visually distinct section of the site, with a big caveat emptor
[17:44:55] <acrichto> yeah
[17:45:38] <edunham> hosting on a different subdomain would probably also be good to distinguish them... "caution.rust-lang.org"? :P
[17:47:50] <gleb> is anyone actively working on rustdoc? have any plans for its development been outlined?
[17:51:44] <acrichto> gleb: no one is currently actively working on rustdoc, no
[17:52:17] <acrichto> gleb: would be interested in working on it?
[17:52:31] <gleb> yes, I'd like to contribute but not sure where to begin
[17:52:51] <acrichto> gleb: awesome! I'd take a look at the A-rustdoc tag on the rust-lang/rust issue tracker
[17:53:01] <acrichto> there's a whole bunch of those in ranges of varying difficulty
[17:53:09] <acrichto> but it's a great way to see what needs to get done
[17:53:23] <gleb> there seems to be a lot of knowledge that's not been written down
[17:54:21] <acrichto> that... I would definitely agree with :)
[17:54:26] <gleb> and the issues don't tell how it's supposed to evolve
[17:54:26] <acrichto> if you have any questions, feel free to ask in here?
[17:54:39] <acrichto> in terms of design nothing is planned too much for rustdoc
[17:54:45] <acrichto> most of the bugs are related to frontend/rendering issues
[17:56:51] <gleb> does rustdoc have access to all the information rustc has or are there limitations?
[17:56:54] <gleb> e.g. I'm not sure it's possible to list transitive trait implementations currently
[17:57:16] <acrichto> gleb: yeah rustdoc has access to all the analysis of rustc
[17:58:08] <wca> What does r-l want out of "unofficial" builds?  Should they only be maintained by the relevant external project?  From my perspective, I'd prefer to see issues identified and fixed prior to releases.
[17:58:36] <acrichto> wca: I think for now a great starting point is a "best effort" produce nightlies on the same schedule
[17:59:01] <acrichto> wca: the beta periods should be a good time to weed out compat issues and fix them
[17:59:10] <acrichto> cherry-picking compat issues to beta is pretty low-risk
[18:01:13] <wca> "for now"?
[18:02:31] <acrichto> wca: gotta start somewhere!
[18:04:02] <wca> sure :)  it would be nice to understand the issues that distinguish official vs not though.
[18:04:27] <acrichto> wca: we don't have estabilished processes here or anything as this is one of the first
[18:05:15] <wca> fair enough
[18:06:51] <wca> I was hoping my cargo snapshot could be used to kickstart nightly cargo builds for freebsd, like are done for other platforms
[18:09:00] <wca> Rust without cargo is kind of like Ruby without gems...
[18:10:03] <acrichto> wca: yeah you'll need to add some bulid system suport to cargo itself
[18:10:08] <acrichto> so it knows to download the right snapshot
[18:10:15] <acrichto> other than that though it should be just adding a new bot
[18:17:15] <wca> acrichto: Do you have the cargo-dist URL the snapshot is at?
[18:17:25] <wca> acrichto: I assume you put it with the other 2015-04-02 snaps
[18:17:45] <acrichto> wca: yeah it's in the same dir
[18:22:37] *** Joins: Tuba (Tobba@moz-o13d22.bredband.telia.com)
[18:25:35] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[18:55:43] <wca> is there a reason why cargo/src/snapshots.txt doesn't use a triple for the platform?
[18:56:24] <acrichto> wca: one snapshot can bootstrap multiple triples on the platform in theory
[18:56:35] <acrichto> wca: e.g. only one windows snapshot is needed to bootstrap MSVC/GNU (in theory)
[18:56:40] <acrichto> wca: it's mostly just historical though
[18:56:45] <wca> ah.
[19:02:33] <wca> acrichto: seems to me the snapshot files themselves should have the same name as the platform in src/snapshots.txt
[19:02:46] <wca> probably much too late for that though
[19:21:19] *** Joins: nrc (nrc@moz-14pjgj.xtra.co.nz)
[19:21:20] *** ChanServ sets mode: +ao nrc nrc
[19:45:56] <wca> acrichto: looks like that cargo distfile has to be rerolled, dl-snapshot.py expects 'cargo-nightly-<triple>/*' but it has 'cargo-0.2.0-<triple>/*' instead.  :-/
[19:58:42] <wca> acrichto: rerolled version: http://people.freebsd.org/~will/public_distfiles/cargo-nightly-x86_64-unknown-freebsd.tar.gz sha256 de678e858de5d2923cc206b7aa1cc84ddc67be00748160f66fc9b7325409e7c7
[20:04:15] * wca submits cargo pull #1674 for these things
[20:26:07] <acrichto> wca: I uploaded it with the nightly in the filename I think
[20:29:05] <wca> yeah, but the tarball has the 0.2.0 encoded in the leading directory name.
[20:34:07] <acrichto> oh right
[20:34:54] <acrichto> wca: hm the string 'unknown' doesn't show up in the snapshot script at all?
[20:35:02] <acrichto> but the triple for linux is <arch>-unknown-linux-gnu
[20:35:22] <acrichto> oh wait there it is
[20:36:04] <wca> yea
[20:36:15] <acrichto> wca: er, the travis builds failed 
[20:36:19] <acrichto> (linux snapshots couldn't download)
[20:36:41] <wca> weird... they downloaded ok for me, will check.
[20:37:31] <wca> ah, I see why
[20:38:43] *** Tuba is now known as Tobba
[20:42:15] <wca> fix pushed
[20:46:58] <acrichto> wca: thanks!
[20:48:04] <wca> np.  thanks for your help.
[21:13:21] *** Quits: Yurume (Yurume@moz-0t8.piq.68.115.IP) (Ping timeout: 121 seconds)
[21:14:32] *** Joins: Yurume (Yurume@moz-0t8.piq.68.115.IP)
[21:16:58] <wca> that bors is rather nifty, and quite the reference its name is.  :)
[22:13:59] *** Quits: aturon (sid36348@moz-n3h4qj.brockwell.irccloud.com) (Ping timeout: 121 seconds)
[22:19:20] <edunham> acrichto: https://github.com/rust-lang/rust/issues/21239 is the cloudfront issues bug; it hits a lot of people
[22:30:53] *** Joins: SilverKey (SilverKey@moz-b7q751.biz.rr.com)
[22:31:12] *** Quits: SilverKey (SilverKey@moz-b7q751.biz.rr.com) (Quit: Cheerio!)
[22:45:41] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[22:59:46] <edunham> brson: to what do we need to rename the doc.rust-lang.org host?
[23:01:55] <brson> edunham: 'http-proxy' or similar
[23:01:59] <brson> nginx-proxy
[23:04:47] <edunham> hmm, best place to track this stuff... file issues against rust-lang/rust and tag them A-Infrastructure?
[23:07:27] <acrichto> edunham: for now yeah that's where we've been putting the issues
[23:13:34] *** Joins: aturon (sid36348@moz-n3h4qj.brockwell.irccloud.com)
[23:43:10] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
