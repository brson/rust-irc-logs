[00:00:23] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Connection closed)
[00:00:44] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[00:01:23] <LinuxBunny> acrichto, if the relative path is over MAX_PATH length, we _have_ to resolve it ourselves
[00:01:32] *** Quits: blaenk (blaenkdenum@moz-rrtddg.n2pv.fsko.e000.2605.IP) (Ping timeout: 121 seconds)
[00:02:17] *** Joins: tcurdt (tcurdt@moz-qdk4u2.dip0.t-ipconnect.de)
[00:02:43] <o11c> acrichto: the python implementation had a bug at some point
[00:02:56] *** Quits: brson (brson@moz-u3dg2t.sfo1.mozilla.com) (Quit: leaving)
[00:03:10] *** Joins: brson (brson@moz-u3dg2t.sfo1.mozilla.com)
[00:03:11] *** ChanServ sets mode: +o brson
[00:03:42] <LinuxBunny> GetFinalPathNameByHandle is the most definitive answer
[00:03:56] <LinuxBunny> if you can open a handle, then you can most definitely get an absolute canonical path
[00:04:21] <XMPPwocky> LinuxBunny: is that sort of like fstat ?
[00:04:37] <LinuxBunny> it means there needs to be an existing file to open a handle to
[00:04:55] <LinuxBunny> or directory
[00:05:31] <LinuxBunny> but since it depends on being able to open a handle, it won't work for canonicalizing arbitrary paths
[00:05:45] <LinuxBunny> where you simply want a best effort to resolve it as far as possible
[00:05:52] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Ping timeout: 121 seconds)
[00:07:39] *** Joins: zxq9 (ceverett@moz-c1f1em.asahi-net.or.jp)
[00:13:05] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[00:15:57] *** Joins: binkarus (textual@moz-014tff.ca.comcast.net)
[00:17:05] *** Quits: LinuxBunny (Retep998@moz-r1n9v0.east.verizon.net) (Ping timeout: 121 seconds)
[00:19:01] *** Quits: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au) (Ping timeout: 121 seconds)
[00:19:13] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Ping timeout: 121 seconds)
[00:21:50] <bstrie> doener_: reopened
[00:22:16] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Connection closed)
[00:23:02] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[00:25:03] *** Quits: brson (brson@moz-u3dg2t.sfo1.mozilla.com) (Quit: leaving)
[00:25:41] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.92.1)
[00:25:44] *** Quits: ineol (ineol@moz-akt.oi0.185.94.IP) (Client exited)
[00:27:25] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Connection closed)
[00:27:46] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[00:31:02] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[00:31:48] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Ping timeout: 121 seconds)
[00:34:25] <seanmonstar> the amount of bugs filed against hyper that it doesn't compile on nightly... X(
[00:35:09] <reem> aturon acrichto: ^ we could really use #[cfg(nightly)]
[00:35:40] <acrichto> reem: http://internals.rust-lang.org/t/setting-cfg-nightly-on-nightly-by-default/1893/5
[00:35:47] <seanmonstar> reem: i guess for now i could add instructions to the readme, but i wonder if anyone would stop to read it before filing an issue
[00:36:00] <reem> I doubt it
[00:36:41] <reem> acrichto: +1
[00:36:46] <larsberg> seanmonstar: #popularlibraryproblems :-)
[00:36:52] <seanmonstar> larsberg: :D
[00:37:05] <bstrie> seanmonstar: are you still on beta?
[00:37:09] <frewsxcv> could add it to CONTRIBUTING.md
[00:37:20] <frewsxcv> since a link to that gets displayed when filing an issue
[00:37:31] <seanmonstar> frewsxcv: pretty sure that's read even less, considering how many don't follow the commit message guidelines outlined inside :)
[00:37:58] <seanmonstar> bstrie: we build on both, but it requires activating a cargo "feature" to compile on nightly, since thread::spawn api differs
[00:40:01] <bstrie> ah
[00:50:02] *** kimundi is now known as zz_kimundi
[00:53:19] *** Joins: quantheory (quantheory@moz-dsb104.crel.jtvf.0001.2601.IP)
[01:01:38] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[01:02:51] *** Joins: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au)
[01:05:45] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[01:08:03] *** Quits: mjboa (mike@moz-gfdglf.hsi06.unitymediagroup.de) (Quit: Lost terminal)
[01:16:18] *** Quits: ytain (ytain@moz-bps1td.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[01:16:54] *** Quits: tcurdt (tcurdt@moz-qdk4u2.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[01:17:26] *** Joins: tcurdt (tcurdt@moz-6is.f3t.165.46.IP)
[01:22:16] *** Quits: srh (User@moz-cl17cf.q9f2.utp8.0306.2602.IP) (Quit: Leaving)
[01:22:41] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[01:39:41] *** Joins: napolessdf (Mibbit@moz-juv.9o3.252.72.IP)
[01:39:47] *** Joins: LinuxBunny (Retep998@moz-prmara.east.verizon.net)
[01:40:59] <LinuxBunny> sorry acrichto 
[01:41:03] <LinuxBunny> I had a power outage
[01:41:30] <acrichto> LinuxBunny: hehe no worries, I was heading home anyway, thanks for the info though!
[01:45:34] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[01:46:33] <LinuxBunny> acrichto, I will investigate those methods further though
[01:46:42] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[01:46:46] <LinuxBunny> acrichto, I need to research how verbatim paths interact with symbolic links
[01:47:01] <LinuxBunny> acrichto, there's also hard links on windows that I need to figure out how they work
[01:47:21] <acrichto> LinuxBunny: hm ok, thanks!
[01:47:30] <acrichto> LinuxBunny: I suspect that GetFullPathName doesn't follow symlinks
[01:47:34] <acrichto> as none of the docs seem to indicate that
[01:47:44] <acrichto> but GetFinalPathName definitely does b/c CreateFile followed the symlinks
[01:47:50] <acrichto> at least that is my guess
[01:48:49] *** Quits: napolessdf (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:48:52] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[01:49:07] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[01:49:07] *** ChanServ sets mode: +o pcwalton
[01:59:20] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Connection closed)
[01:59:41] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[02:00:20] *** Joins: blaenk (blaenkdenum@moz-ue5qjq.n2pv.fsko.e000.2605.IP)
[02:03:06] <steveklabnik> doener_: we aren't planning on being on a fork as soon as the next release comes out
[02:03:15] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[02:03:18] <steveklabnik> doener_: we can re-open, but i don't know what kind of action would cause the ticket to end up closed
[02:03:43] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Ping timeout: 121 seconds)
[02:03:49] *** Quits: swgillespie (swgillespie@moz-upj.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:03:53] *** Joins: erickt (erickt@moz-pqdaaa.pltn13.pacbell.net)
[02:07:50] <Gankro> Oh we're forking the language at 1.0? Good call. Core team is totally out of control :P
[02:11:20] <steveklabnik> doener_: so, i guess, let me know what action we could take that _would_ close the ticket, and i'm totally happy to re-open it, okay?
[02:19:37] *** Joins: p1start (p1start@moz-nftjhe.org)
[02:21:56] <bstrie> Gankro: this is exactly what strcat was planning when he originally implemented Rc
[02:22:08] <Gankro> bstrie: haha
[02:22:11] <bstrie> unfathomable cunning
[02:23:49] <huon> they were originally implemented in a way that disallowed cycles
[02:23:57] <huon> fwiw.
[02:24:20] *** Quits: erickt (erickt@moz-pqdaaa.pltn13.pacbell.net) (Ping timeout: 121 seconds)
[02:24:29] <aatch> I feel like I'm missing some important context...
[02:24:43] <huon> aatch: https://github.com/rust-lang/rust/issues/24292
[02:25:01] <huon> (basically all discussions comes back to that, atm :P )
[02:25:38] <aatch> Ah, that. Tricky case.
[02:26:02] <LinuxBunny> huon, how did they disallow cycles?
[02:26:14] <aatch> I'm tempted to fall back on "well don't do that then", but it's hardly satifying.
[02:26:21] <huon> LinuxBunny: the old version of the 'static and Send bounds
[02:26:50] <huon> aatch: it might be OK for an external library, but I don't think it's good for std to do that
[02:29:46] <aatch> huon, true, but the variables required for this are pretty specific, you need to have memory safety ensured by a destructor running at the appropriate time, then you need leak the destructor. If it can be fixed, great, but I could live with the hole.
[02:30:05] <aatch> *leak the type
[02:31:53] <barosl> The difficulty around destructors is just amazing
[02:32:34] <aatch> barosl, yeah, the moment I tried to account for them when I was experimenting with an IR things went crazy.
[02:32:40] <barosl> We've got bitten several times because of this... AFAIK C++ has also had some caveats related to destructors, hasn't it?
[02:32:44] *** Quits: tcurdt (tcurdt@moz-6is.f3t.165.46.IP) (Quit: Textual IRC Client: www.textualapp.com)
[02:33:24] <barosl> Trolling: GC for the win!
[02:33:40] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[02:34:11] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[02:34:41] <aatch> The problem with destructors is that they exist in a strange twilight between normal code and magic.
[02:35:04] <barosl> Yeah, they're basically hidden
[02:35:24] *** Quits: zz_kimundi (kimundi@moz-6dpcih.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:35:45] <barosl> (Wait... so is GC.)
[02:37:09] *** Joins: zz_kimundi (kimundi@moz-5jbr1h.dip0.t-ipconnect.de)
[02:37:11] *** zz_kimundi is now known as kimundi
[02:37:26] *** Joins: c74d3 (c74d3a4ebb6@moz-93h43r.mggc.hibn.4404.2002.IP)
[02:38:15] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Ping timeout: 121 seconds)
[02:38:38] <quantheory> I think that one difficulty with destructors in Rust is that they are both the code used for cleanup in normal code, and the only user code run during panics.
[02:39:49] <quantheory> This makes more sense in languages where you can throw an exception and catch it, and that's relatively common. In Rust it's kind of weird to stop a panic on its way up the stack, even though you can technically do it.
[02:41:55] <quantheory> I dunno. I have to think about it more, because lifetimes/ownership and Rust's whole take on safety put a unique spin on it.
[02:42:05] *** c74d3 is now known as c74d
[02:48:39] *** Quits: binkarus (textual@moz-014tff.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:52:45] *** Joins: binkarus (textual@moz-014tff.ca.comcast.net)
[03:00:40] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Connection closed)
[03:03:01] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[03:07:34] <Gankro> aatch: How is it when you ban unwinding?
[03:08:42] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[03:09:26] *** Joins: dpc_ (dpc@moz-t6gr4b.ca.comcast.net)
[03:12:51] <aatch> Gankro, doesn't change much. You can make some more assumptions, since certain edges in the CFG aren't present, but the issue with destructors is ordering.
[03:13:19] <Gankro> aatch: Can you give a simple example?
[03:13:29] <aatch> Gankro, just writing one up now
[03:13:37] <Gankro> aatch: Awesome! :D
[03:13:54] *** Joins: laumann (tarqat@moz-mrph0h.bbtec.net)
[03:17:38] *** Quits: laumann (tarqat@moz-mrph0h.bbtec.net) (Quit: Lost terminal)
[03:17:55] *** Joins: tarQ (tarqat@moz-mrph0h.bbtec.net)
[03:20:11] <aatch> Gankro, https://gist.github.com/Aatch/6b36e84a79b1dcaa9c5c
[03:21:21] <aatch> Fortunately, the compiler catches this case now, since `bar` doesn't live long enough.
[03:21:23] <reem> Isn’t this what unsafe destructor is about?
[03:21:58] <Gankro> aatch: So basically the solution is to force that dtors work as a stack?
[03:24:39] <aatch> Gankro, more like we ensure that we can. It makes the most sense, since it's more common to create objects from bottom up, rather than what I did.
[03:24:55] <Gankro> Right
[03:25:00] <Gankro> So what's the issue with CFG now?
[03:25:13] <Gankro> Or have you jsut not had a chance to revisit since?
[03:25:28] <Gankro> err with IR
[03:25:31] <Gankro> So many accronyms
[03:26:46] <aatch> Gankro, oh, a few important semantics for Rust were still in flux. I think most of them have been solved now. I've just not revisted it since then.
[03:27:36] *** Joins: semarie (semarie@moz-db9nca.tor.ninja)
[03:27:55] <aatch> I think once the arena/allocation story is improved I'll take another stab at it.
[03:28:06] <Gankro> aatch: Bah, why would a compiler need to know semantic details? UB your way to victory :)
[03:28:43] *** Joins: anders (andars@moz-bsldst.sntcca.sbcglobal.net)
[03:29:07] <aatch> Gankro, well the idea was to be able to use Rust-specific semantics to implement Rust-specific optimisations that LLVM can't (at least, not without a massive amount of effort).
[03:31:38] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[03:32:25] <Gankro> Any low-hanging fruit there?
[03:35:02] <aatch> Gankro, not sure. I can't think of anything right now.
[03:36:04] <Gankro> Ah, that's too bad. We're *pretty* similar to C++ so I'd be surprised if there was much LLVM didn't have a knob for.
[03:37:40] *** Quits: dpc_ (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[03:38:32] <aatch> Gankro, it's more being able to strip away abstractions faster than LLVM can. One thing we'd benefit from is being to inline generic functions. So many functions get generated, then removed by LLVM via inlining.
[03:39:24] <Gankro> Ah yeah, sure
[03:39:57] <Gankro> higher-level analysees would be great. Although merging two notions of inline score might be... janky?
[03:40:52] <aatch> Gankro, any higher-level versions of stuff LLVM can do would be pretty coarse and conservative.
[03:41:20] <Gankro> Fair enough
[03:43:42] *** Joins: dpc_ (dpc@moz-t6gr4b.ca.comcast.net)
[03:44:44] <erickt> acrichto / aturon: ping
[03:44:45] *** Quits: blaenk (blaenkdenum@moz-ue5qjq.n2pv.fsko.e000.2605.IP) (Ping timeout: 121 seconds)
[03:45:02] <aatch> Gankro, collections are actually a good example. The `len` method is (or should be) exactly the same for any `T` in Vec<T>. It's also just a single field access so always gets inlined.
[03:45:05] <acrichto> erickt: pong
[03:45:23] <erickt> hi! i got some questions about a few feature flags that are getting used in libsyntax
[03:45:39] <aatch> Gankro, but right now we'll generate a version of the len method for each and every instantiation of `T`.
[03:45:39] <acrichto> sure
[03:45:51] <Gankro> aatch: ouch
[03:45:53] <erickt> I'm laying the groundwork for syntex possibly being able to run on beta/1.0: https://github.com/rust-lang/rust/pull/24487
[03:46:41] <erickt> acrichto: the features I haven't quite been able to get rid of are: collections, core, libc, unicode, path_ext, and str_char
[03:47:03] <erickt> I believe I can substitute libc with the crates.io crate
[03:47:11] <erickt> and I thought I heard unicode might also get pulled out
[03:47:35] <erickt> but the others are kind of tricky
[03:47:52] <acrichto> erickt: hm unicode probably isn't coming out in its current form soon
[03:48:38] <aatch> Gankro, what would be really cool (and would probably be a Master's project or somthing) would be to figure out how to automatically generate a generic/non-generic split in code. Which is fairly common in template-heavy C++
[03:49:07] <acrichto> erickt: str_char is probably removable by just rewriting code to use the char_indices iterator in most places
[03:49:10] <Gankro> aatch: e.g. identify what code is Not Really Generic?
[03:49:16] <acrichto> erickt: path_ext is replacable by just using fs::metadata
[03:49:21] <aatch> Gankro, basically.
[03:49:25] <acrichto> erickt: and collections/core generally aren't necessary for the fiddly bits of libsyntax
[03:49:44] <erickt> acrichto: oh, I thought we didn't expose metadata at all, I guess I misread the code :)
[03:49:47] <Gankro> aatch: One confounding variable is that unspecified layout means that Vec<T> might not actually access that same offset for all T
[03:50:04] <Gankro> for the len field, that is
[03:50:21] <Gankro> But I suppose at the compiler level you can decide if that's true or not
[03:50:38] <aatch> Gankro, fortunately, unspecified just means that you, as a user, can't rely on it. The compiler can, since it defines the layout anyway.
[03:50:48] <erickt> acrichto: I'll see if I can knock out the ones you suggest
[03:51:16] * erickt eyes unicode suspiciously
[03:51:17] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:51:40] <Gankro> aatch: Also you can "do" the inline at a higher level I suppose where offsets haven't even been factored in
[03:51:56] <acrichto> erickt: syntax::ptr may be somewhat difficult to port
[03:52:04] <acrichto> erickt: although I forget how bad it will b
[03:52:05] <erickt> acrichto: all-in-all though it's not *that* much left to do
[03:52:15] <erickt> acrichto: already did syntax::ptr :)
[03:52:21] <acrichto> ah ok
[03:52:22] <erickt> that was the first one
[03:53:13] <erickt> looks like the methods I need from unicode are `.width()`, `.is_xid_start()`, and `.is_xid_continue()`
[03:53:30] <acrichto> erickt: .width() is going away naturally in another PR
[03:53:43] <acrichto> the other ones should move to libsyntax probably (but may want to hold off for now)
[03:53:52] <acrichto> erickt: btw I'm pretty worried about removing the trait object from the pretty printer
[03:53:59] <erickt> acrichto: why's that?
[03:54:03] <acrichto> last time we did that we segfaulted on OSX b/c the linker couldn't handle how big the binary was
[03:54:17] <erickt> lol
[03:54:19] <acrichto> erickt: I think that unsafety of using raw::TraitObject is able to go away now
[03:54:25] <acrichto> it's been quite awhile since that was added
[03:54:33] <acrichto> and it should be able to be done safely now I think
[03:54:53] <erickt> I thought you (or aturon) were against stablizing it because it locked us into a layout of that structure?
[03:55:29] <acrichto> oh you shouldn't need the transmute/unsfae at all
[03:55:34] <acrichto> I think you should be able to express that in totally safe code
[03:56:01] <erickt> oh cool
[03:57:00] <acrichto> erickt: brb
[03:57:03] <erickt> looks like the main things from collections is the use of BitSet, String::from_str, push_all, escape_default, and [].tail
[03:57:06] <erickt> k
[03:57:57] <acrichto> String::from_str == .to_string()
[03:58:00] <acrichto> push_all == extend
[03:58:05] <acrichto> escape_default may have to wait
[03:58:07] *** Quits: pczarn (piotr@moz-9un7t9.izacom.pl) (Ping timeout: 121 seconds)
[03:58:08] <Gankro> huon: should https://github.com/rust-lang/rfcs/pull/197 just be closed at this point? It's been stalled for like a year
[03:58:10] <acrichto> and .tail == &foo[1..]
[03:58:41] <Gankro> (push_all == optimized extend, to be precisely accurate)
[03:59:49] <erickt> Gankro: push_all, extend, and me go a ways back. they don't like me, and I don't like them
[04:00:03] <Gankro> erickt: I... don't disagree
[04:00:28] <Gankro> I've been trying to make `extend` eat push_all, but so much bikeshedding ;_;
[04:00:54] <reem> erickt: If you need raw::TraitObject some of the stablest functionality is exposed in the traitobject crate
[04:01:02] <erickt> acrichto: I'm not sure if you're actually back or just didn't leave, but there's this comment on String::from_str: "needs investigation to see if to_string() can match perf"
[04:01:18] <erickt> acrichto: could we just move that impl to the stable String::from(&str) impl?
[04:01:37] <erickt> reem: cool
[04:02:35] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[04:04:40] <erickt> acrichto: quick benchmark has String::from_str 3 times faster than .to_string()
[04:06:21] <huon> Gankro: no, unless you don't want it in 1.1 or 1.2.
[04:06:39] <huon> Gankro: I intend to push more on it once 1.0 is done
[04:06:44] <Gankro> huon: ok
[04:07:09] <Gankro> acrichto: Under what cirumstances can I not rely on a dtor running in the face of a panic?
[04:07:31] <Gankro> (assuming I don't care what happens if an abort occurs)
[04:08:35] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[04:09:38] <Gankro> Actually... hmm... "leaking is ok" is sort of circularly self-solving
[04:09:39] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[04:09:40] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Connection closed)
[04:10:24] <Gankro> Can't use a panic guard to repair in a bad state? Just set it up so that a panic leaks everything. (e.g. set Vec.len to 0 before starting)
[04:10:44] <scott> what's new in beta.2?
[04:10:54] <scott> if there is any kind of summary
[04:13:46] *** Quits: quantheory (quantheory@moz-dsb104.crel.jtvf.0001.2601.IP) (Quit: Leaving)
[04:14:23] <Gankro> I am going to call this the "pre-poop your pants" pattern.
[04:16:55] <Gankro> huon: Just read through the rng RFC; are you still planning to try to unify gen and gen_range?
[04:19:35] <Gankro> err I guess that's #libs talk
[04:23:08] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[04:27:56] <acrichto> erickt: I highly doubt it actually affects the performance of the compiler, but yes String::from_str is known to be faster than .to_string()
[04:28:07] <acrichto> erickt: adding String::from is definitely plausible, but separating out those kinds of chagnes is probably best
[04:28:27] <acrichto> Gankro: panicking from a dtor is not a good idea and is almost guaranteed to leak something (I believe), but otherwise a panic will free everything
[04:28:28] <erickt> acrichto: already submitted https://github.com/rust-lang/rust/pull/24517 :)
[04:28:39] <acrichto> erickt: aha!
[04:28:40] <acrichto> thanks
[04:28:59] <erickt> :)
[04:30:07] <erickt> acrichto: have any real concerns if I swap push_all with .extend, and map_in_place with, mapping in place? :)
[04:30:14] <erickt> perf wise?
[04:30:48] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Connection closed)
[04:30:49] <acrichto> erickt: they do exist yeah, but it's also really unlikely to actually matter in the compiler
[04:31:02] <acrichto> these would only matter if they're on the hot path, which they're very likely to not be
[04:31:42] *** Quits: c74d (c74d3a4ebb6@moz-93h43r.mggc.hibn.4404.2002.IP) (Connection closed)
[04:32:19] <erickt> I doubt it. I don't really recall ever seeing parsing high on compile times
[04:32:49] <acrichto> lol that's like the fastest thing we have
[04:32:51] *** Joins: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[04:36:17] <Yurume> acrichto: the slowness of general formatting routines made me rethinking about the formatting apparatus. shouldn't we aim for optimizing (say) format!("{} + {} = {}", 3, 4, 5) into mk_fmt_with_cap(20).add_int(3).lit(" + ").add_int(4).lit(" + ").add_int(5).finish() or so?
[04:37:33] <aatch> Yurume, the problem is though, how do you know it's an int?
[04:37:34] <Yurume> that is, multiple fn calls to the same formatter seem to be better than one fn call when it comes to the inlinability and optimizability.
[04:37:59] <Yurume> aatch: just for the illustration. that'd be really be sth like .add_default_with_no_option(4) or so...
[04:38:28] <Yurume> just thinking though, I should tackle on this after shooting this damn flt2dec business down (ugh).
[04:38:41] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[04:39:06] <aatch> Yurume, right, it's just not uncommon for people to forget that type information isn't available to syntax extensions. Just making sure this wasn't one of those cases.
[04:39:10] <Mutabah> aatch: In theory, you could run the format twice
[04:39:26] <Mutabah> aatch: First time counting the alloc size, second time actually allocating+writing
[04:40:01] <Mutabah> However, that could be expensive, depending on the cost of formatting
[04:40:57] <aatch> Mutabah, well, the formatting stuff is designed to avoid unnecessary allocation though.
[04:41:10] <acrichto> Yurume: perhaps yeah, there's a few vectors, but there's only so much we can do in our time frame right now
[04:41:19] <acrichto> Yurume: and it's unclear how much inlining will actually help (or if we want it at all)
[04:41:33] <acrichto> Yurume: e.g. the code-size overhead of format_args! needs to be tiny (as it's used everywhere basically)
[04:42:15] <Yurume> acrichto: I imagine that almost every add_* method has to be uninliable while lit method should be inlinable.
[04:42:41] <Yurume> or, at least, add_type_specific_something should be uninlinable*
[04:43:09] <acrichto> Yurume: perhaps yeah!
[04:43:10] <Yurume> (* so that add_* methods are generic but they quickly redirect to type-specific impls)
[04:43:23] <Yurume> just an idea, do not hold your breath :)
[04:44:06] <acrichto> lol
[04:44:11] <Yurume> I imagine that because float formatting is... huge. estimated 30KBs of code overhead. it would be great to optimize that when float formatting is not used.
[04:44:22] <Yurume> s/code/binary/
[04:44:42] <Yurume> (msvcrt does the similar thing in more weird way)
[04:47:56] *** Quits: binkarus (textual@moz-014tff.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[04:49:03] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[04:52:22] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[04:52:57] <rprichard> Regarding the float formatting... are we sure we have the right behavior regarding -0.0 and Debug's precision?
[04:53:45] <rprichard> thinking of https://github.com/rust-lang/rust/issues/20596 ...
[04:56:28] <rprichard> Regarding formatting generally, there's a RFC suggesting adding size_hint, https://github.com/rust-lang/rfcs/pull/583
[04:58:36] <rprichard> I also have a branch where I've implemented a much smaller and slightly faster format_args! -- https://github.com/rprichard/rust/tree/optarg
[04:59:54] <rprichard> It's not really done yet, though.
[04:59:56] <bstrie> acrichto: to be perfectly clear about the ongoing adropalypse: this unsafety is *only* possible because JoinGuard calls `unsafe` code in its destructor, right?
[05:00:57] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[05:02:19] <bstrie> huon: ^ maybe you're around to answer
[05:04:58] <acrichto> bstrie: well there's a lot of unsafe code around spawning a new thread... aka the call to the ffi boundary
[05:05:15] <acrichto> bstrie: the problem here is that to be memory safe the destructor was required to run
[05:05:22] <acrichto> but rust does not provide the guarantee that it will run all of your destructors
[05:06:10] *** Joins: jevin_ (jevin@moz-sra.ovp.12.72.IP)
[05:06:13] *** Quits: jevin (jevin@moz-sra.ovp.12.72.IP) (Connection closed)
[05:07:41] <bstrie> acrichto: okay, but I want to be 100% clear here: I could not *accidentally* write a destructor that is required to run to enforce memory safety, not without using `unsafe`. is this correct?
[05:07:56] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[05:08:25] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[05:08:33] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[05:09:17] <bstrie> acrichto: basically I want to be reassured that the property "no memory unsafety in code without unsafe" has not been thrown out the window
[05:11:41] <acrichto> bstrie: correct
[05:11:51] <bstrie> okay, thank god
[05:14:45] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[05:15:32] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[05:17:18] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[05:18:27] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Connection closed)
[05:18:48] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[05:19:55] <erickt> acrichto: in case you're interested, I started a tracking bug for all the other feature flag features I need to do: https://github.com/rust-lang/rust/issues/24518
[05:22:50] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Ping timeout: 121 seconds)
[05:24:54] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[05:24:55] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Ping timeout: 121 seconds)
[05:25:12] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[05:30:22] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[05:33:52] *** Joins: marsel (user@moz-j1l.3vh.180.94.IP)
[05:37:58] *** Quits: marsel (user@moz-j1l.3vh.180.94.IP) (Ping timeout: 121 seconds)
[05:39:06] *** Quits: bdero (bran@moz-lbs.91h.47.73.IP) (Ping timeout: 121 seconds)
[05:39:56] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Quit: Leaving)
[05:40:04] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[05:40:32] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[05:41:36] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[05:41:55] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[05:44:12] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Connection closed)
[05:45:42] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[05:47:21] *** Quits: dpc_ (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[05:50:06] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[05:50:26] *** Quits: O01eg (o01eg@moz-tpvf1k.5gmo.4n8f.2698.2a02.IP) (Client exited)
[05:50:51] *** Joins: eerie (eerie@moz-060j2q.red.bezeqint.net)
[05:51:02] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[05:53:06] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Connection closed)
[05:55:28] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[05:55:34] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[05:57:51] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[05:58:19] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[05:58:39] *** Quits: miselin (miselin@moz-c77.igu.11.203.IP) (Ping timeout: 121 seconds)
[05:59:30] *** Quits: aatch (james@moz-4tpcve.pd7t.fvcm.e000.2406.IP) (Connection closed)
[05:59:58] *** Joins: James_ (quassel@moz-olnmts.range86-163.btcentralplus.com)
[06:03:36] *** Quits: barosl (barosl@moz-tmp.qma.67.220.IP) (Quit: Leaving)
[06:04:23] *** Joins: miselin (miselin@moz-c77.igu.11.203.IP)
[06:06:08] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:08:07] *** Quits: eerie (eerie@moz-060j2q.red.bezeqint.net) (Connection closed)
[06:08:28] *** Joins: eerie (eerie@moz-060j2q.red.bezeqint.net)
[06:08:35] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[06:09:31] *** Quits: eerie (eerie@moz-060j2q.red.bezeqint.net) (Connection closed)
[06:09:32] *** Joins: eerie (eerie@moz-060j2q.red.bezeqint.net)
[06:14:35] *** Joins: c0170 (c0170@moz-bb29a4.cambridge.arm.com)
[06:14:56] *** Joins: barosl (barosl@moz-tmp.qma.67.220.IP)
[06:15:33] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[06:21:53] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[06:26:20] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Ping timeout: 121 seconds)
[06:27:59] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[06:29:08] *** Quits: anders (andars@moz-bsldst.sntcca.sbcglobal.net) (Ping timeout: 121 seconds)
[06:32:38] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[06:33:46] *** Joins: squiddy (squiddy@moz-md4.pm3.19.178.IP)
[06:39:59] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[06:41:55] *** Quits: hirschen (hirschen@moz-9j0dnu.h7ls.rebm.810b.2a02.IP) (Ping timeout: 121 seconds)
[06:44:16] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[06:47:15] *** Joins: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP)
[06:48:34] *** Quits: barosl (barosl@moz-tmp.qma.67.220.IP) (Quit: Leaving)
[06:51:03] *** Joins: eerie_ (eerie@moz-060j2q.red.bezeqint.net)
[06:54:37] *** Quits: eerie (eerie@moz-060j2q.red.bezeqint.net) (Ping timeout: 121 seconds)
[06:58:48] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[06:59:16] *** Quits: meteredsection (meteredsect@moz-ersuj2.wa.comcast.net) (Ping timeout: 121 seconds)
[07:00:02] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[07:00:27] *** Joins: aepsil0n (eduard@moz-8h7njb.hsi8.kabel-badenwuerttemberg.de)
[07:02:16] *** Joins: meteredsection (meteredsect@moz-ersuj2.wa.comcast.net)
[07:02:48] *** Quits: eerie_ (eerie@moz-060j2q.red.bezeqint.net) (Connection closed)
[07:04:00] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[07:05:05] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[07:08:44] *** Quits: sav (e@moz-9u3te2.cc) (Ping timeout: 121 seconds)
[07:10:37] *** Joins: sav (e@moz-9u3te2.cc)
[07:14:10] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[07:18:58] *** Quits: sav (e@moz-9u3te2.cc) (Ping timeout: 121 seconds)
[07:19:07] *** Joins: sav (e@moz-9u3te2.cc)
[07:19:20] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[07:21:22] *** Joins: munksgaard (munksgaard@moz-3v9.hq0.225.130.IP)
[07:26:52] *** Joins: bdero (bran@moz-lbs.91h.47.73.IP)
[07:27:19] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[07:27:53] *** Joins: Kxepal832 (Miranda@moz-m9jgok.pppoe.mtu-net.ru)
[07:29:53] *** Quits: Kxepal (Miranda@moz-b1q4s0.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[07:29:57] *** kimundi is now known as zz_kimundi
[07:30:25] *** Quits: sav (e@moz-9u3te2.cc) (Ping timeout: 121 seconds)
[07:30:38] *** Joins: sav (e@moz-9u3te2.cc)
[07:31:23] *** Joins: laumann (thomas@moz-3m6.3kq.109.2.IP)
[07:32:41] *** Joins: barosl (barosl@moz-tmp.qma.67.220.IP)
[07:32:54] *** Quits: sav (e@moz-9u3te2.cc) (Connection closed)
[07:33:08] *** Joins: sav (e@moz-9u3te2.cc)
[07:35:18] *** Quits: sav (e@moz-9u3te2.cc) (Connection closed)
[07:38:38] *** Joins: sav (e@moz-9u3te2.cc)
[07:39:31] *** Joins: binkarus (textual@moz-014tff.ca.comcast.net)
[07:39:34] *** Joins: eerie (eerie@moz-060j2q.red.bezeqint.net)
[07:41:29] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[07:41:51] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[07:44:32] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[07:48:55] *** Quits: Kxepal832 (Miranda@moz-m9jgok.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[07:52:46] *** Joins: dinfuehr (dinfuehr@moz-oqh22l.tuwien.ac.at)
[07:55:06] *** Quits: sav (e@moz-9u3te2.cc) (Ping timeout: 121 seconds)
[07:58:13] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[08:06:57] *** Joins: ineol (ineol@moz-akt.oi0.185.94.IP)
[08:09:55] *** Joins: eerie_ (eerie@moz-060j2q.red.bezeqint.net)
[08:09:55] *** Quits: eerie (eerie@moz-060j2q.red.bezeqint.net) (Connection closed)
[08:14:58] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[08:16:55] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[08:17:26] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[08:18:06] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[08:18:13] *** rkruppe_ is now known as rkruppe
[08:20:26] <Manishearth> acrichto: will we ever provide that guarantee in the future?
[08:20:34] <Manishearth> at least, the guarantee of no memory leaks?
[08:21:26] *** Joins: imperio (Mibbit@moz-aibeqg.fbx.proxad.net)
[08:21:54] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[08:31:17] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[08:33:59] *** Quits: binkarus (textual@moz-014tff.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[08:35:26] *** Quits: eerie_ (eerie@moz-060j2q.red.bezeqint.net) (Connection closed)
[08:35:39] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[08:36:53] *** Quits: bdero (bran@moz-lbs.91h.47.73.IP) (Ping timeout: 121 seconds)
[08:39:34] *** Joins: bjz (bjz@moz-4l6.mjm.52.113.IP)
[08:41:07] *** Joins: eibwen (eibwen@moz-t31rm6.dip0.t-ipconnect.de)
[08:41:23] *** Quits: bjz (bjz@moz-4l6.mjm.52.113.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[08:43:15] *** Joins: bjz (bjz@moz-4l6.mjm.52.113.IP)
[08:44:14] <doener_> steveklabnik: ok. Wasn't aware of the fork going away so soon. In any case we should at least wait for the LLVM patch to land. Upstream might still decide that the patch is wrong and that we must change our codegen instead.
[08:44:50] <doener_> steveklabnik: so closing once it lands would be ok with me
[08:46:01] *** Joins: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr)
[08:52:29] *** Quits: bjz (bjz@moz-4l6.mjm.52.113.IP) (Ping timeout: 121 seconds)
[08:52:43] *** Quits: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP) (Ping timeout: 121 seconds)
[08:53:52] *** Joins: binkarus (textual@moz-014tff.ca.comcast.net)
[08:59:24] *** Joins: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP)
[09:00:52] *** Joins: bluss_ (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[09:02:54] *** Quits: ineol (ineol@moz-akt.oi0.185.94.IP) (Client exited)
[09:03:43] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[09:04:33] *** Quits: c0170 (c0170@moz-bb29a4.cambridge.arm.com) (Ping timeout: 121 seconds)
[09:04:40] *** Joins: eerie (eerie@moz-060j2q.red.bezeqint.net)
[09:05:53] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Ping timeout: 121 seconds)
[09:08:11] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[09:09:24] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[09:09:46] *** Joins: c0170 (c0170@moz-bb29a4.cambridge.arm.com)
[09:11:10] *** Joins: Thorn (Thorn@moz-p3j.20c.107.217.IP)
[09:13:50] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[09:17:38] *** Quits: bluss_ (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[09:17:54] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[09:19:38] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[09:25:19] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[09:29:49] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[09:30:55] *** Joins: anders (andars@moz-bsldst.sntcca.sbcglobal.net)
[09:34:41] *** Joins: eerie_ (eerie@moz-060j2q.red.bezeqint.net)
[09:37:37] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[09:37:43] *** Quits: eerie (eerie@moz-060j2q.red.bezeqint.net) (Ping timeout: 121 seconds)
[09:42:45] *** Quits: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr) (Connection closed)
[09:43:07] *** Joins: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr)
[09:45:35] *** Joins: bombless (_@moz-r9kuss.0v2u.0v40.0da8.2001.IP)
[09:46:44] *** Quits: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr) (Connection closed)
[09:46:45] *** Joins: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr)
[09:46:48] *** Joins: c0170_ (c0170@moz-bb29a4.cambridge.arm.com)
[09:47:27] *** Quits: c0170 (c0170@moz-bb29a4.cambridge.arm.com) (Ping timeout: 121 seconds)
[09:48:49] *** Quits: eerie_ (eerie@moz-060j2q.red.bezeqint.net) (Connection closed)
[09:50:17] *** Joins: eerie (eerie@moz-060j2q.red.bezeqint.net)
[09:52:48] *** zz_kimundi is now known as kimundi
[09:54:25] *** Quits: laumann (thomas@moz-3m6.3kq.109.2.IP) (Ping timeout: 121 seconds)
[09:54:41] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[09:57:56] *** kimundi is now known as zz_kimundi
[09:59:39] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[10:00:43] *** Joins: bdero (bran@moz-mqs.7dh.189.18.IP)
[10:03:24] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[10:04:12] *** Joins: larhat (Adium@moz-8v4.af0.232.213.IP)
[10:05:04] *** Joins: eerie_ (eerie@moz-060j2q.red.bezeqint.net)
[10:08:23] *** Quits: eerie (eerie@moz-060j2q.red.bezeqint.net) (Ping timeout: 121 seconds)
[10:09:20] *** Quits: bdero (bran@moz-mqs.7dh.189.18.IP) (Connection closed)
[10:09:47] *** Joins: bdero (bran@moz-mqs.7dh.189.18.IP)
[10:12:39] *** Joins: veddan (viktor@moz-tgbh88.cust6.csbnet.se)
[10:14:31] *** Quits: eerie_ (eerie@moz-060j2q.red.bezeqint.net) (Connection closed)
[10:16:18] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[10:24:09] *** Quits: dinfuehr (dinfuehr@moz-oqh22l.tuwien.ac.at) (Connection closed)
[10:26:18] *** Joins: eightbitraptor (eightbitrap@moz-dhb5rn.cust-83.exponential-e.net)
[10:29:28] *** Quits: eightbitraptor (eightbitrap@moz-dhb5rn.cust-83.exponential-e.net) (Client exited)
[10:30:01] *** Joins: eightbitraptor (eightbitrap@moz-dhb5rn.cust-83.exponential-e.net)
[10:32:36] <imperio> playbot: let p = 0 as *const u32; println!("{}", unsafe {*p });
[10:32:37] -playbot- 0
[10:32:37] -playbot- ()
[10:32:44] <imperio> is that normal that it doesn't segfault ?
[10:33:38] *** Joins: eightbitraptor_ (eightbitrap@moz-dhb5rn.cust-83.exponential-e.net)
[10:34:04] *** Quits: eightbitraptor (eightbitrap@moz-dhb5rn.cust-83.exponential-e.net) (Ping timeout: 121 seconds)
[10:34:04] *** eightbitraptor_ is now known as eightbitraptor
[10:34:53] *** Quits: eightbitraptor (eightbitrap@moz-dhb5rn.cust-83.exponential-e.net) (Client exited)
[10:36:06] *** Joins: Kxepal (Miranda@moz-gp8deg.pppoe.mtu-net.ru)
[10:36:54] <doener_> imperio: AFAIK LLVM assumes that you do not dereference a null pointer, so that code invokes UB and the compiler is free to do whatever it likes.
[10:37:07] <doener_> imperio: if you run it without optimizations, you get the desired segfault
[10:37:19] <imperio> that's weird
[10:37:29] <imperio> but thanks for the explanation ^^
[10:39:13] <bombless> playbot: unsafe { *(1 as *const u8) }
[10:39:15] -playbot- playpen: application terminated abnormally with signal 4 (Illegal instruction)
[10:39:35] <doener_> imperio: it's often important for optimizations that the compiler makes use of that constraint. For example, inlining might introduce a null check into a function in which the checked pointer is known to be non-null by the programmer but not the compiler. But seeing that the pointer is being dereferenced allows the compiler to also assume that it is non-null and therefore remove the null check.
[10:40:07] <Manishearth> doener_: how did optimizations get it to a 0 though?
[10:40:33] <Mutabah> The compiler is free to violate causaility or eat your laundry if it hits UD
[10:40:37] <Mutabah> *UB
[10:40:40] <Manishearth> hah
[10:40:56] <doener_> hmm, at least I won't have to do the laundry then
[10:41:29] <Mutabah> WHUP! Just hit an ICE
[10:42:56] <imperio> https://github.com/rust-lang/rust/blob/master/src/librustc/middle/check_const.rs#L439 I can't get this error, is that normal ?
[10:43:18] <imperio> never mind, someone found it
[10:43:25] <imperio> playbot: const a : *mut u32 = 42 as *mut u32; const b : u64 = a as u64;
[10:43:26] -playbot- <anon>:9:62: 9:70 error: can not cast a pointer to an integer in constants [E0018]
[10:43:26] -playbot- <anon>:9         const a : *mut u32 = 42 as *mut u32; const b : u64 = a as u64;
[10:43:26] -playbot- output truncated; full output at: http://bit.ly/1Hen18i
[10:43:27] <imperio> (for the record)
[10:44:57] <doener_> Manishearth: that happens in SCCP -- https://github.com/rust-lang/llvm/blob/master/lib/Transforms/Scalar/SCCP.cpp#L1052
[10:45:15] <Manishearth> huh
[10:47:06] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[10:47:29] <doener_> Manishearth: https://github.com/rust-lang/llvm/commit/c76d80342e229a86bf3f780c797e29d197363bc4 -- it's the "we can do whatever" case
[10:49:13] <Tobba|Laptop> undefined behaviour
[10:49:16] <Tobba|Laptop> "because fuck you"
[10:49:37] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[10:49:49] <Manishearth> doener_: btw, is rust 2.0 allowed to break backcompat?
[10:49:53] *** Joins: ytain (ytain@moz-bps1td.dsl.teksavvy.com)
[10:50:13] <doener_> Manishearth: I have no idea
[10:50:34] *** Joins: eightbitraptor (eightbitrap@moz-dhb5rn.cust-83.exponential-e.net)
[10:52:16] *** Quits: ctennis (ctennis@moz-vcpg3c.in.comcast.net) (Quit: Linkinus - http://linkinus.com)
[10:54:01] *** Joins: ctennis (ctennis@moz-vcpg3c.in.comcast.net)
[10:54:04] *** Joins: larhat1 (Adium@moz-8v4.af0.232.213.IP)
[10:54:07] <imperio> playbot: unsafe { const a : *mut u32 = 42 as *mut u32; static b : u64 = a as u64; }
[10:54:09] -playbot- <anon>:9:72: 9:80 error: can not cast a pointer to an integer in statics [E0018]
[10:54:09] -playbot- <anon>:9         unsafe { const a : *mut u32 = 42 as *mut u32; static b : u64 = a as u64; }
[10:54:09] -playbot- output truncated; full output at: http://bit.ly/1HeopHZ
[10:54:10] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[10:54:24] *** Joins: laumann (thomas@moz-3v9.hq0.225.130.IP)
[10:54:36] <imperio> why const and static cannot have a cast on pointer btw ? Is it because of const safety pointer ?
[10:56:14] *** Quits: larhat (Adium@moz-8v4.af0.232.213.IP) (Ping timeout: 121 seconds)
[10:57:15] *** Joins: dinfuehr (dinfuehr@moz-oqh22l.tuwien.ac.at)
[11:00:57] <simukis> imperio: you can’t cast const because its uses are replaced by value in const use locations
[11:01:08] <simukis> so it doesn’t even have a location in memory per se
[11:01:11] <simukis> most of the time
[11:01:44] <imperio> hum...
[11:01:56] *** Quits: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[11:02:00] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[11:02:17] <simukis> as far as statics go, you can easily take reference to it, hence a pointer as well
[11:03:37] *** Joins: marsel (user@moz-5sd.i7e.180.94.IP)
[11:05:56] <imperio> simukis: sorry but I still don't get it. You lost me on your last explanation. I don't see why taking a pointer on a u64 would be problematic (since the static is an u64 after all)
[11:07:07] *** Joins: WindowsBunny (Peter@moz-prmara.east.verizon.net)
[11:07:11] <simukis> you asked why const and static cannot have a cast on pointer. This is ill formed sentence so I interpret it as getting a pointer to the value.
[11:08:00] <simukis> if you want to cast value of static or const to pointer, you can easily do both, but you must cast from `usize`
[11:08:25] <simukis> s/must/should/
[11:08:41] <imperio> simukis: I'm working on this https://github.com/rust-lang/rust/blob/master/src/librustc/middle/check_const.rs#L439
[11:08:44] <simukis> (anyway, this is a bit offtopic for #rust-internals and it should be taken to #rust)
[11:09:04] <imperio> so I'm trying to fully understand why it doesn't work and all to write the long explanation
[11:09:23] *** Quits: dinfuehr (dinfuehr@moz-oqh22l.tuwien.ac.at) (Connection closed)
[11:09:35] <simukis> imperio: did you manage to make yourself a test case which produces this error?
[11:09:54] <imperio> yup, just above
[11:10:08] <imperio> (this one : const a : *mut u32 = 42 as *mut u32; static b : u64 = a as u64;)
[11:10:30] *** Quits: Kingsquee (kingsley@moz-qq7ns6.bchsia.telus.net) (Quit: Konversation terminated!)
[11:11:21] <simukis> hmm, so this is pretty simple one, but the rule is too restrictive.
[11:11:40] <simukis> the thing is that value for statics initialized this way must be known at compile time
[11:12:25] *** Joins: dinfuehr (dinfuehr@moz-oqh22l.tuwien.ac.at)
[11:12:25] <simukis> but if you have a pointer to something, it might be relocated and so on
[11:12:45] <imperio> let b = 0u32; static x : *const u32 = b as *const u32;
[11:12:45] <simukis> that is, you can’t really know the value of pointer in most cases at compile time
[11:12:56] <imperio> playbot: let b = 0u32; static x : *const u32 = b as *const u32;
[11:12:57] -playbot- <anon>:9:47: 9:48 error: attempt to use a non-constant value in a constant
[11:12:57] -playbot- <anon>:9         let b = 0u32; static x : *const u32 = b as *const u32;
[11:12:57] -playbot- output truncated; full output at: http://bit.ly/1Hesxb3
[11:13:06] <imperio> ok
[11:13:12] <imperio> it seems more logical now
[11:13:44] <simukis> your example is one of those that could be computed at compile time, but since this is a rare case, I believe whoever wrote that code didn’t bother to make it work.
[11:14:04] <imperio> the point was to find out how to get the error
[11:14:40] *** Quits: dinfuehr (dinfuehr@moz-oqh22l.tuwien.ac.at) (Connection closed)
[11:16:59] *** Joins: dinfuehr_ (dinfuehr@moz-oqh22l.tuwien.ac.at)
[11:17:07] <imperio> so if I write "static and const value must know the current value which is not possible with a pointer's value", it's good ?
[11:17:17] <imperio> (and thanks for your help by the way)
[11:17:56] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[11:21:03] *** Joins: p1start (p1start@moz-nftjhe.org)
[11:21:14] *** Quits: dinfuehr_ (dinfuehr@moz-oqh22l.tuwien.ac.at) (Connection closed)
[11:21:35] *** Joins: dinfuehr (dinfuehr@moz-oqh22l.tuwien.ac.at)
[11:22:41] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[11:22:48] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[11:23:05] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[11:25:13] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[11:25:37] *** Quits: dinfuehr (dinfuehr@moz-oqh22l.tuwien.ac.at) (Ping timeout: 121 seconds)
[11:32:16] <imperio> http://is.gd/akSCAX why the compiler says he doesn't know the variable "b_" ?
[11:32:26] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[11:32:31] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Connection closed)
[11:33:36] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[11:35:14] <simukis> statics have no access to non-global scopes, even if you define them inside function bodies.
[11:35:34] *** Joins: dinfuehr (dinfuehr@moz-oqh22l.tuwien.ac.at)
[11:35:39] <imperio> simukis: thanks again !
[11:35:50] <simukis> though I think this one really could be improved
[11:36:35] <imperio> I was wondering why rust didn't allow to catch a variable value just like that
[11:38:15] *** Quits: dinfuehr (dinfuehr@moz-oqh22l.tuwien.ac.at) (Connection closed)
[11:45:39] *** Joins: rkruppe (chatzilla@moz-0o88uc.hrz.tu-darmstadt.de)
[11:51:19] *** Quits: eightbitraptor (eightbitrap@moz-dhb5rn.cust-83.exponential-e.net) (Client exited)
[11:54:55] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[12:00:50] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[12:01:07] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[12:01:13] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[12:05:04] *** Joins: eerie (eerie@moz-060j2q.red.bezeqint.net)
[12:05:14] *** Joins: c0170 (c0170@moz-bb29a4.cambridge.arm.com)
[12:05:15] *** Quits: c0170_ (c0170@moz-bb29a4.cambridge.arm.com) (Ping timeout: 121 seconds)
[12:05:31] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[12:09:29] *** Quits: eerie (eerie@moz-060j2q.red.bezeqint.net) (Ping timeout: 121 seconds)
[12:10:13] *** Quits: rkruppe (chatzilla@moz-0o88uc.hrz.tu-darmstadt.de) (Ping timeout: 121 seconds)
[12:11:18] *** Joins: eightbitraptor (eightbitrap@moz-dhb5rn.cust-83.exponential-e.net)
[12:11:28] *** Quits: ctennis (ctennis@moz-vcpg3c.in.comcast.net) (Quit: Leaving...)
[12:13:13] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[12:13:48] *** Joins: rkruppe (chatzilla@moz-0o88uc.hrz.tu-darmstadt.de)
[12:16:30] <SimonSapin> "The build was interrupted to prioritize another pull request" four times in a row is kinda sad
[12:21:22] <bombless> queue-jumping, huh?
[12:23:06] *** Joins: ctennis (ctennis@moz-93imdn.bltnin.sbcglobal.net)
[12:28:01] <Manishearth> SimonSapin: that's probably because of my rollup
[12:28:08] <Manishearth> which probably contains your PR
[12:28:27] *** Joins: pnkfelix (pnkfelix@moz-je0.a5j.80.81.IP)
[12:28:27] *** ChanServ sets mode: +o pnkfelix
[12:28:32] <Manishearth> yep
[12:28:59] <Manishearth> SimonSapin: when the rollup fails, homu moves onto the next PR even if I fix the rollup in a minute
[12:29:35] *** Quits: c0170 (c0170@moz-bb29a4.cambridge.arm.com) (Connection closed)
[12:32:39] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[12:34:52] *** Joins: ineol (ineol@moz-50l.u3o.23.161.IP)
[12:40:46] *** Quits: eightbitraptor (eightbitrap@moz-dhb5rn.cust-83.exponential-e.net) (Client exited)
[12:40:49] *** Joins: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com)
[12:41:09] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[12:41:21] *** Joins: eightbitraptor (eightbitrap@moz-dhb5rn.cust-83.exponential-e.net)
[12:44:14] *** Quits: rkruppe (chatzilla@moz-0o88uc.hrz.tu-darmstadt.de) (Ping timeout: 121 seconds)
[12:45:49] *** Joins: arielb1 (Ariel@moz-r1gm7r.red.bezeqint.net)
[12:46:47] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[12:46:57] *** Joins: rubendv (rubendv@moz-vjuace.oma.be)
[12:48:02] *** Quits: ineol (ineol@moz-50l.u3o.23.161.IP) (Client exited)
[12:49:13] <SimonSapin> makes sense
[12:51:15] *** Joins: ineol (ineol@moz-50l.u3o.23.161.IP)
[12:52:27] *** Joins: proc (proc@moz-i69dec.dip0.t-ipconnect.de)
[12:54:34] *** Quits: anders (andars@moz-bsldst.sntcca.sbcglobal.net) (Ping timeout: 121 seconds)
[12:55:40] *** Joins: kushal (kdas@moz-6bbu0u.dsl.bell.ca)
[12:57:55] *** Joins: pczarn (piotr@moz-9un7t9.izacom.pl)
[12:58:41] *** Quits: ineol (ineol@moz-50l.u3o.23.161.IP) (Client exited)
[13:04:22] *** Joins: dinfuehr (dinfuehr@moz-7g8d0t.public.t-mobile.at)
[13:10:30] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[13:11:58] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[13:12:11] *** zz_kimundi is now known as kimundi
[13:13:05] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[13:13:57] *** Quits: dinfuehr (dinfuehr@moz-7g8d0t.public.t-mobile.at) (Ping timeout: 121 seconds)
[13:14:45] *** Joins: dinfuehr (dinfuehr@moz-7g8d0t.public.t-mobile.at)
[13:16:43] *** Quits: marsel (user@moz-5sd.i7e.180.94.IP) (Ping timeout: 121 seconds)
[13:17:30] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (Quit: Leaving)
[13:20:13] *** Quits: dinfuehr (dinfuehr@moz-7g8d0t.public.t-mobile.at) (Connection closed)
[13:22:02] *** Joins: cdidd__ (cdidd@moz-442hfv.broadband.corbina.ru)
[13:22:26] *** Joins: rkruppe (chatzilla@moz-0o88uc.hrz.tu-darmstadt.de)
[13:23:32] *** Quits: cdidd_ (cdidd@moz-ua43b9.broadband.corbina.ru) (Ping timeout: 121 seconds)
[13:28:37] <nmatsakis> pnkfelix: btw I encountered an interesting problem today
[13:28:51] <nmatsakis> I was fooling around with a (not particularly good) persistent vector impl
[13:28:59] <nmatsakis> and I found that I could quickly run out of stack during drop
[13:29:04] <nmatsakis> because of the deep Rc chains I was creating
[13:29:17] <nmatsakis> I know we have an open issue on this somewhere,
[13:29:25] <nmatsakis> but now that so much of the code is in libraries,
[13:29:33] <nmatsakis> it seems to be (another) problem with the Drop trait we may want to fix someday
[13:29:41] <nmatsakis> it'd be nice to be able to enqueue cleanups
[13:30:00] *** Quits: Desloz (Desloz@moz-a8pj1n.rev.numericable.fr) (Ping timeout: 121 seconds)
[13:31:35] *** Joins: nottc (nottc@moz-md0.0k4.168.66.IP)
[13:31:46] *** Quits: pnkfelix (pnkfelix@moz-je0.a5j.80.81.IP) (NickServ (RECOVER command used by pnkfelix``))
[13:31:47] *** Joins: pnkfelix (pnkfelix@moz-je0.a5j.80.81.IP)
[13:31:47] *** ChanServ sets mode: +o pnkfelix
[13:33:30] <pnkfelix> quick (easy?) r? for last bit of arith-oflo: https://github.com/rust-lang/rust/pull/24500
[13:34:53] *** Joins: curmetrex (Mibbit@moz-juv.9o3.252.72.IP)
[13:34:54] *** Joins: marsel (user@moz-tn7.6r9.234.188.IP)
[13:38:20] *** Joins: ineol (ineol@moz-50l.u3o.23.161.IP)
[13:38:56] <nmatsakis> pnkfelix: https://github.com/rust-lang/rust/pull/24500/files#r28594009 ?
[13:39:00] <nmatsakis> (thoughts on that?)
[13:39:56] <pnkfelix> wait, I don't understand
[13:40:08] <pnkfelix> what do you mean by "original def'n" ?
[13:40:43] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[13:40:55] <pnkfelix> oh wait, are you saying you want to expose the potential panic?
[13:41:14] <nmatsakis> pnkfelix: original def'n means "the stuff indicated by - in the diff"
[13:41:38] <pnkfelix> I was trying to preserve the documented behavior
[13:41:47] <nmatsakis> oh I didnt' read the docs :)
[13:41:52] <pnkfelix> since its been stabilized
[13:41:59] <nmatsakis> yeah, fair enough
[13:42:10] <nmatsakis> that ruins my "legitimately call it a bug fix" POV ;)
[13:42:13] <pnkfelix> yeah the diff *just* cut off the docs
[13:42:33] <nmatsakis> Curse people for being so thorough
[13:42:35] <nmatsakis> ;)
[13:42:50] <nmatsakis> I still... tend to think abs(min_value) should (sometimes) panic though
[13:43:00] <nmatsakis> sigh
[13:43:37] <pnkfelix> I don't object to that
[13:43:40] <pnkfelix> (clearly)
[13:43:41] <nmatsakis> oh I see you commented an hour ago
[13:44:00] <pnkfelix> yeah, because I was rebasing the PR and noticed that was still unresolved
[13:44:28] *** Quits: curmetrex (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:47:55] *** Quits: ineol (ineol@moz-50l.u3o.23.161.IP) (Client exited)
[13:48:48] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[13:52:01] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[13:52:49] *** Joins: ineol (ineol@moz-50l.u3o.23.161.IP)
[13:54:26] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[13:54:26] *** Quits: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr) (Connection closed)
[13:54:48] *** Joins: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr)
[13:55:14] *** Joins: dinfuehr (dinfuehr@moz-8gga84.highway.telekom.at)
[13:55:15] *** Quits: dinfuehr (dinfuehr@moz-8gga84.highway.telekom.at) (Connection closed)
[13:55:36] *** Joins: dinfuehr (dinfuehr@moz-8gga84.highway.telekom.at)
[13:56:26] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[13:57:19] *** Quits: nottc (nottc@moz-md0.0k4.168.66.IP) (Connection closed)
[13:57:20] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Connection closed)
[13:58:05] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[13:59:37] <pnkfelix> yikes, segafult from the rollup
[13:59:38] *** Quits: dinfuehr (dinfuehr@moz-8gga84.highway.telekom.at) (Ping timeout: 121 seconds)
[13:59:52] <pnkfelix> :(
[14:00:19] <nmatsakis> uh...
[14:01:12] <pnkfelix> "isn't this darn language supposed to prevent those?"  ;)
[14:01:34] <Manishearth> pnkfelix: note: I've got an exam now, so feel free to push the fix to the rollup branch
[14:01:37] <Manishearth> on my repo
[14:01:41] <Manishearth> (gave you access)
[14:01:51] <pnkfelix> Manishearth: oh okay, thanks.  We'll see if that actually happens. :)
[14:02:45] <Manishearth> Also, if you are continuing the rollup, might want to re-add gh24464 , gh24428 , and gh24472
[14:02:45] <[o__o]> Emit correct alignment information for loads/store of small aggregates: https://github.com/rust-lang/rust/pull/24472
[14:03:03] <Manishearth> since I removed them after the segfault (but it's probably not their fault)
[14:03:18] <pnkfelix> Manishearth: you removed them after the most recent segfault?
[14:03:38] <Manishearth> no, the one before it
[14:03:42] <pnkfelix> Manishearth: okay.
[14:03:46] <Manishearth> the segfault happens even though I removed them
[14:04:20] <Manishearth> (I removed the unicode one because it touched libserialize, the macos one because mac, and doener_'s one because  it looked like it could cause a segfault :p)
[14:06:02] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[14:07:25] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[14:07:38] *** Joins: dinfuehr (dinfuehr@moz-8gga84.highway.telekom.at)
[14:08:44] *** Quits: dinfuehr (dinfuehr@moz-8gga84.highway.telekom.at) (Connection closed)
[14:08:46] <pnkfelix> I'm unlikely to put anything back; I don't do rollups much, and so when I adopt one, I tend to be very conservative...
[14:08:53] <pnkfelix> (just being honest)
[14:08:56] <Manishearth> ah okay
[14:10:47] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[14:11:42] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[14:13:13] *** Quits: jgallagher (john@moz-6ge.dhn.131.24.IP) (Client exited)
[14:19:32] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[14:23:10] *** Quits: eightbitraptor (eightbitrap@moz-dhb5rn.cust-83.exponential-e.net) (Client exited)
[14:23:48] *** Joins: eightbitraptor (eightbitrap@moz-dhb5rn.cust-83.exponential-e.net)
[14:27:43] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[14:28:59] *** Quits: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com) (Ping timeout: 121 seconds)
[14:35:06] *** Joins: poorman (poorman@moz-sdl0oq.res.rr.com)
[14:35:52] *** Quits: poorman_ (poorman@moz-sdl0oq.res.rr.com) (Ping timeout: 121 seconds)
[14:37:04] *** Quits: rkruppe (chatzilla@moz-0o88uc.hrz.tu-darmstadt.de) (Ping timeout: 121 seconds)
[14:43:35] *** Joins: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net)
[14:46:38] *** Joins: jgallagher (john@moz-d5e8oc.hfc.comcastbusiness.net)
[14:48:12] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[14:52:49] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[14:53:56] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[14:55:05] *** Quits: ineol (ineol@moz-50l.u3o.23.161.IP) (Client exited)
[14:56:28] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[14:56:42] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[14:57:07] *** Quits: larhat1 (Adium@moz-8v4.af0.232.213.IP) (Quit: Leaving.)
[14:58:07] *** Joins: larhat (Adium@moz-8v4.af0.232.213.IP)
[15:00:25] *** Quits: imperio (Mibbit@moz-aibeqg.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[15:01:10] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[15:02:05] <arielb1> why isn't usize FFI-legal?
[15:03:51] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[15:03:54] <mrmonday> it's only a warning, you could use it if you really wanted
[15:04:04] <arielb1> why is it a warning?
[15:04:18] <arielb1> I mean, my C API takes a size_t
[15:04:28] <mrmonday> so you should use libc::size_t
[15:04:31] <arielb1> and that's a usize in Rust
[15:04:36] <arielb1> libc::size_t = u32 or u64
[15:04:39] <arielb1> so I have to cast
[15:04:50] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[15:05:02] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[15:05:05] <arielb1> and/or pollute my program with libc::size_t
[15:14:50] *** Quits: ytain (ytain@moz-bps1td.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[15:17:08] *** Quits: larhat (Adium@moz-8v4.af0.232.213.IP) (Quit: Leaving.)
[15:17:38] <nmatsakis> arielb1: that warning dates from when `size` was called `int`, and it was hence very ripe for confusion
[15:17:42] <nmatsakis> it might not make anymore
[15:17:44] <nmatsakis> *make sense anymore
[15:17:45] *** Joins: ytain (ytain@moz-bps1td.dsl.teksavvy.com)
[15:18:06] <nmatsakis> might be reasonable to say that `usize/size` == `size_t/ssize_t`
[15:18:41] <nmatsakis> though we've kept a pretty strict line between C and Rust types so far
[15:19:33] *** Quits: ytain (ytain@moz-bps1td.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[15:20:02] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[15:22:12] *** Quits: laumann (thomas@moz-3v9.hq0.225.130.IP) (Ping timeout: 121 seconds)
[15:22:43] <nmatsakis> pnkfelix: so... segfaults...
[15:22:46] <nmatsakis> http://buildbot.rust-lang.org/builders/auto-mac-64-nopt-t/builds/4565/steps/compile/logs/stdio <--
[15:22:54] <nmatsakis> pnkfelix: is that what you saw?
[15:23:06] <nmatsakis> (from https://github.com/rust-lang/rust/pull/24461 )
[15:23:25] <nmatsakis> (I don't see this locally, clearly, but i'm on linux, perhaps not fully rebased)
[15:23:44] <pnkfelix> nmatsakis: yes that looks like it
[15:23:48] <nmatsakis> no, it is fully rebased
[15:23:52] <nmatsakis> so it may not be fault of the rollup
[15:24:02] <pnkfelix> nmatsakis: sure
[15:24:06] <pnkfelix> nmatsakis: but still problematic
[15:24:09] <nmatsakis> (unless rollup included that PR I guess)
[15:24:16] <nmatsakis> oh, that wasn't supposed to be a good thing
[15:24:30] <nmatsakis> "ah, shew, at least I ahve NO IDEA what the problem is, rather than knowing it stems from a recent commit"
[15:24:34] <nmatsakis> ;)
[15:24:34] <pnkfelix> i wonder ... if i did a try run against master ...
[15:24:50] <nmatsakis> you're on mac, right? :)
[15:25:09] <nmatsakis> pnkfelix: how consistent is it about being nopt etc? any idea?
[15:25:35] <pnkfelix> nmatsakis: it happens on opt too i think
[15:25:42] <nmatsakis> k
[15:25:47] <pnkfelix> nmatsakis: at least an earlier rollup attempt had a mac segfault on opt
[15:26:01] <nmatsakis> k
[15:27:11] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[15:27:12] *** ChanServ sets mode: +o brson
[15:27:45] *** Joins: ytain (ytain@moz-bps1td.dsl.teksavvy.com)
[15:28:32] *** Quits: munksgaard (munksgaard@moz-3v9.hq0.225.130.IP) (Ping timeout: 121 seconds)
[15:28:47] *** Quits: arielb1 (Ariel@moz-r1gm7r.red.bezeqint.net) (Ping timeout: 121 seconds)
[15:29:37] *** Joins: arielb1 (Ariel@moz-r1gm7r.red.bezeqint.net)
[15:31:10] *** Quits: untitaker (untitaker@moz-0gjtv2.highway.telekom.at) (Ping timeout: 121 seconds)
[15:32:41] *** Joins: untitaker (untitaker@moz-453ssf.highway.telekom.at)
[15:33:14] *** Joins: jshs (jshs@moz-e3h72s.dip0.t-ipconnect.de)
[15:33:16] * WindowsBunny sits on ricky26's head
[15:37:23] *** Joins: ineol (ineol@moz-n0a.jng.23.161.IP)
[15:39:35] *** Joins: O01eg (o01eg@moz-1qlss1.hneu.4n8f.2698.2a02.IP)
[15:41:31] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[15:42:31] *** Joins: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com)
[15:42:50] *** Joins: filsmick_ (filsmick@moz-s1ht48.abo.wanadoo.fr)
[15:43:15] *** Quits: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net) (Client exited)
[15:44:51] *** Quits: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[15:45:54] *** Joins: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net)
[15:46:46] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Quit: )
[15:48:41] *** Joins: hirschen (hirschen@moz-9j0dnu.h7ls.rebm.810b.2a02.IP)
[15:49:02] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[15:52:28] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[15:54:31] *** Quits: eternaleye (eternaleye@moz-7ps.ehi.245.50.IP) (Ping timeout: 121 seconds)
[15:54:56] *** Joins: mib_j72n9s (Mibbit@moz-juv.9o3.252.72.IP)
[15:55:49] *** Quits: mib_j72n9s (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:56:52] *** Joins: eternaleye (eternaleye@moz-7ps.ehi.245.50.IP)
[15:57:11] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[15:59:49] *** Quits: eightbitraptor (eightbitrap@moz-dhb5rn.cust-83.exponential-e.net) (Client exited)
[16:01:31] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[16:04:31] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[16:04:44] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[16:07:03] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[16:07:03] *** ChanServ sets mode: +o brson
[16:11:21] *** Quits: filsmick_ (filsmick@moz-s1ht48.abo.wanadoo.fr) (Connection closed)
[16:11:23] *** Joins: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr)
[16:15:02] *** Joins: mib_7ady0w (Mibbit@moz-5gi.qhm.191.69.IP)
[16:16:13] *** Quits: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr) (Connection closed)
[16:16:34] *** Joins: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr)
[16:17:52] *** Joins: munksgaard (munksgaard@moz-vj4.hq0.225.130.IP)
[16:18:10] *** Joins: pitdicker (pitdicker@moz-328u1s.adsl.online.nl)
[16:21:57] *** Quits: mib_7ady0w (Mibbit@moz-5gi.qhm.191.69.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:23:11] <steveklabnik> doener_: cool :)
[16:23:31] *** Joins: willem (willem@moz-facs2s.dynamic.upc.nl)
[16:24:41] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[16:29:39] *** Quits: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net) (Client exited)
[16:31:58] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[16:32:06] <nmatsakis> pnkfelix: can I see a link to the other segfault/
[16:32:17] <pnkfelix> nmatsakis: sure one sec
[16:32:34] *** Quits: ineol (ineol@moz-n0a.jng.23.161.IP) (Client exited)
[16:32:39] <pnkfelix> nmatsakis: oh look: https://github.com/rust-lang/rust/pull/24524#issuecomment-94021750
[16:32:52] <nmatsakis> ah
[16:33:06] <nmatsakis> acrichto: I hope you're right
[16:33:11] *** Quits: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr) (Connection closed)
[16:33:12] *** Joins: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr)
[16:34:06] <acrichto> nmatsakis: each "segfault" has been testing this commit https://github.com/rust-lang/rust/commit/54d117a38856ff705fdc3be62241ded6d8810f4a
[16:34:23] <acrichto> so presumably something in the rolup is ausing a segfault
[16:34:55] *** Joins: eightbitraptor (eightbitrap@moz-m5kbra.dab.02.net)
[16:37:12] <nmatsakis> acrichto: including the ones on here https://github.com/rust-lang/rust/pull/24461 ?
[16:37:26] <acrichto> nmatsakis: yeah
[16:37:28] <nmatsakis> k
[16:37:30] <acrichto> if you click through to the failing logs
[16:37:35] *** Quits: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr) (Connection closed)
[16:37:35] <acrichto> Got Revision54d117a38856ff705fdc3be62241ded6d8810f4a
[16:37:38] <acrichto> under "Source Stamp"
[16:37:40] <nmatsakis> k
[16:37:42] <acrichto> so it tried to test commit A
[16:37:43] <nmatsakis> I believe you
[16:37:46] <acrichto> but instead tested commit B
[16:37:48] <acrichto> yay buildbot!
[16:37:51] <nmatsakis> oh
[16:37:52] <nmatsakis> I see what you mean
[16:37:56] <nmatsakis> weid
[16:37:56] *** Joins: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr)
[16:37:57] <nmatsakis> *weird
[16:38:12] *** Joins: sagg (sigg@moz-55rvi2.dclient.hispeed.ch)
[16:40:01] <acrichto> nmatsakis: pnkfelix: https://github.com/rust-lang/rust/issues/24531
[16:40:51] * nmatsakis my hero
[16:43:00] *** Quits: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr) (Connection closed)
[16:43:01] *** Joins: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr)
[16:46:12] *** Quits: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr) (Connection closed)
[16:46:33] *** Joins: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr)
[16:47:41] *** Quits: jevin_ (jevin@moz-sra.ovp.12.72.IP) (Quit: Textual IRC Client: www.textualapp.com)
[16:50:33] <nmatsakis> pnkfelix: so aturon and I were just discussing abs()
[16:50:50] <pnkfelix> yep?
[16:50:58] <nmatsakis> we both feel like it seems obvious-- doc comment not withstanding -- that it ought to behave in the same way that -abs would
[16:51:04] <nmatsakis> that is, abs is a "numerical" operation so...
[16:51:17] *** Quits: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP) (Quit: Leaving)
[16:51:18] <nmatsakis> the only sticking point I guess is the stability/documentation
[16:51:24] <steveklabnik> woo
[16:51:26] <nmatsakis> that is, the fact that it is documented to do otherwise
[16:51:32] <steveklabnik> what needs done? :p
[16:51:37] <nmatsakis> just remove some comments
[16:51:39] <nmatsakis> so we can claim that
[16:51:42] <nmatsakis> the behavior was unspecified
[16:51:42] <nmatsakis> ;)
[16:51:58] <nmatsakis> anyway, I sort of feel like we should... just change it. As part of fixing the semantics of -neg we aligned abs
[16:52:06] <pnkfelix> ok
[16:52:14] <nmatsakis> but I'm curious to hear from others why this is terrible :)
[16:52:31] <pnkfelix> well a lot of people seem to be acting like stability means something pre 1.0
[16:52:40] <pnkfelix> i don't exactly understand why
[16:52:59] *** Joins: eerie (eerie@moz-060j2q.red.bezeqint.net)
[16:54:30] <pnkfelix> nmatsakis: can we please nonetheless land checked negation now?
[16:54:35] <pnkfelix> nmatsakis: and open a bug against abs ?
[16:54:58] <pnkfelix> just to save me the trouble of cherry-picking a larger patch to beta channel later?
[16:55:06] <pnkfelix> nmatsakis: (Or has the next beta already been cut?)
[16:55:30] <nmatsakis> ok, I will r+
[16:55:36] <nmatsakis> I'm not sure whether beta has been cut, I suspect so
[16:55:48] <pnkfelix> hmm
[16:55:54] <pnkfelix> well it may not matter so much in that case
[16:55:56] <pnkfelix> but whatev
[16:56:16] *** Joins: imperio (Mibbit@moz-8otf3a.fbx.proxad.net)
[16:56:31] <brson> there is a new beta out
[16:56:44] *** Joins: eightbitraptor_ (eightbitrap@moz-ifpp5s.dab.02.net)
[16:56:44] <brson> but we can do the next soon if needed
[16:57:13] <pnkfelix> brson: well I thought this was the only one that was going to be a mass master->beta merge over
[16:57:25] <pnkfelix> brson: and all future beta channel changes would require cherry-picking
[16:57:35] <nmatsakis> good point, I need to start labeling or tagging or something
[16:57:38] <nmatsakis> did we settle a procedure here?
[16:57:44] <pnkfelix> brson: though maybe in the absence of  documents establishing a procedure
[16:57:55] *** Quits: eightbitraptor (eightbitrap@moz-m5kbra.dab.02.net) (Ping timeout: 121 seconds)
[16:57:55] <pnkfelix> brson: perhaps we should plan for another master->beta merge anyway?
[16:57:59] <pnkfelix> <shrug>
[16:58:00] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[16:58:07] <brson> pnkfelix: it is, yes, but if you want to another right now or soon it's fine
[16:58:25] <nmatsakis> pnkfelix: r+ in any case
[16:58:27] *** eightbitraptor_ is now known as eightbitraptor
[16:58:29] <pnkfelix> nmatsakis: thx
[16:59:28] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[17:00:18] <brson> how should new betas be announced?
[17:00:19] *** Quits: sagg (sigg@moz-55rvi2.dclient.hispeed.ch) (Quit: Leaving)
[17:00:35] *** Joins: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net)
[17:02:18] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[17:03:06] <steveklabnik> someday, having a page like http://emberjs.com/builds/#/beta would be _awesome_
[17:04:22] *** Joins: sagg (sigg@moz-55rvi2.dclient.hispeed.ch)
[17:06:18] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[17:06:30] *** Quits: eightbitraptor (eightbitrap@moz-ifpp5s.dab.02.net) (Ping timeout: 121 seconds)
[17:09:45] <brson> r? https://github.com/rust-lang/rust-www/pull/113
[17:10:12] <brson> perhaps if nmatsakis and pnkfelix get their patches in soon we can do another merge and beta over the weekend?
[17:10:21] <nmatsakis> brson: do we just manually merge that repo? I guess so
[17:10:27] <nmatsakis> up acrichto beat me
[17:10:28] <brson> nmatsakis: yeah
[17:10:57] <pnkfelix> pressures on!
[17:11:00] <acrichto> muahahaha
[17:11:08] *** Quits: hirschen (hirschen@moz-9j0dnu.h7ls.rebm.810b.2a02.IP) (Ping timeout: 121 seconds)
[17:11:22] <pnkfelix> nmatsakis: you ready for some serious rubber stamping?  ;)
[17:11:30] <sfackler> will this beta include a new cargo as well?
[17:11:43] <nmatsakis> pnkfelix: what you got in store? :)
[17:11:49] <brson> sfackler: i think we should, yeah, since acrichto bumped the version
[17:11:53] <sfackler> sweet
[17:12:04] <pnkfelix> nmatsakis: i'm *still* holding out hope for both duplicate label detection and panic("{}")
[17:12:10] <pnkfelix> nmatsakis: both at this point would only be warnings
[17:12:24] *** Joins: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net)
[17:12:25] <pnkfelix> nmatsakis: so maybe they could land at anytime, not sure
[17:12:57] <pnkfelix> nmatsakis: (duplicate label detection will be just a warning due to the brokenness of hygiene w.r.t. label names)
[17:13:01] <nmatsakis> pnkfelix: put another way, I could ask you the same ... seems like my fix for #22779 is starting to work now
[17:13:06] <nmatsakis> er gh22779
[17:13:07] <[o__o]> Borrow checker allows slice lifetime to be extended: https://github.com/rust-lang/rust/issues/22779
[17:13:28] <pnkfelix> nmatsakis: ooh fun
[17:13:41] <pnkfelix> nmatsakis: time for some congressional horse trading.
[17:14:29] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Connection closed)
[17:14:50] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[17:15:23] <brson> i wonder if fx announces beta updates. i'll ask them
[17:15:32] <brson> might be worth at least pointing this one out on users.rlo
[17:15:43] *** Joins: pcwalton (pcwalton@moz-msl7jr.static-ip.telepacific.net)
[17:15:43] *** ChanServ sets mode: +o pcwalton
[17:17:23] *** Joins: zubron (bandenburg@moz-g4s61s.cable.virginm.net)
[17:18:15] <brson> aturon: do you mind if i post a psa to users.rlo saying there's a new beta out? i think it doesn't require a lot of fanfare
[17:18:31] <aturon> brson: please do
[17:18:40] <aturon> (and i agree)
[17:18:52] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Ping timeout: 121 seconds)
[17:19:06] <aturon> brson: might also be a good opportunity to clarify the plan here
[17:19:23] <aturon> (in terms of when we play to stop fastforwarding to master, etc)
[17:19:47] <brson> sure
[17:21:14] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[17:21:18] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[17:22:28] <imperio> acrichto: thx !
[17:23:11] *** Joins: eerie_ (eerie@moz-060j2q.red.bezeqint.net)
[17:23:58] <cmr> Is there a changelog?
[17:24:46] <brson> r? https://github.com/rust-lang/rust-packaging/pull/28
[17:24:51] *** Joins: hirschen (hirschen@moz-d2r.h4e.90.95.IP)
[17:25:39] <brson> cmr: I don't have one, no. In general I don't think we will be able to produce changelogs for individual betas, though it might be especially helpful to do so anyway right now
[17:25:55] <brson> I would expect to have a complete changelog for stable releases
[17:26:01] *** Quits: eerie (eerie@moz-060j2q.red.bezeqint.net) (Ping timeout: 121 seconds)
[17:26:04] *** Quits: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr) (Connection closed)
[17:26:05] *** Joins: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr)
[17:26:19] <brson> Ideally we might write them for the initial beta, so beta testers can see, then maybe update right before the stable promotion?
[17:26:34] <cmr> brson: seems reasonable.
[17:26:39] *** Joins: jevin (jevin@moz-sra.ovp.12.72.IP)
[17:26:43] <cmr> I'm not sure I'd expect a changelog between releases.
[17:26:59] <cmr> (but the beta changelog would be the start of the changelog for the next-release)
[17:27:03] <cmr> (or something like that)
[17:27:03] <brson> right
[17:28:06] <carllerche> Hoping to get some feedback: Should the `nix` crate be renamed? https://github.com/carllerche/nix-rust/issues/76
[17:29:09] <Eridius> "Rust friendly bindings to Posix APIs" why not call it `posix`?
[17:29:13] *** Quits: munksgaard (munksgaard@moz-vj4.hq0.225.130.IP) (Ping timeout: 121 seconds)
[17:29:21] <carllerche> Eridius: already is a lib
[17:29:23] <Eridius> ah
[17:29:28] <carllerche> Eridius: also, the goal is more than posix
[17:29:35] <carllerche> since posix is a standard
[17:29:42] <Eridius> `splatnix` :)
[17:31:34] <simukis> there’s unix APIs that aren’t POSIX as well… so calling it unix or anything in that direction is not technically correct either
[17:32:10] <carllerche> simukis: yep, which is why I originally went with "nix", which has historically meant "unix like"
[17:32:18] <simukis> you could call it posix2008 if you implement 2008th POSIX standard
[17:32:28] <brson> that's a tough call. i'm inclined to keep the name 'nix'. it's potentially confusing, but it's cute and historical precedent is on unix's side. more people know unix than 'nix the package manager'
[17:32:30] <Eridius> I kind of like `splatnix` actually
[17:32:48] <carllerche> brson: I would appreciate a comment on the issue :)
[17:32:54] <brson> lol ok
[17:33:51] <carllerche> thanks :)
[17:39:26] <pnkfelix> rustix
[17:40:25] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Quit: Leaving.)
[17:40:33] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[17:40:35] <simukis> do we actually have bindings that do not use libc as a stepping stone yet?
[17:41:03] *** Joins: simukis1 (nagisa@moz-8t068g.static.zebra.lt)
[17:41:05] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Connection closed)
[17:42:43] <carllerche> simukis1: what would be the reason to not use libc?
[17:42:56] <simukis1> carllerche: dependence on libc.
[17:43:23] *** Quits: arielb1 (Ariel@moz-r1gm7r.red.bezeqint.net) (Quit: Ex-Chat)
[17:43:33] *** Quits: pcwalton (pcwalton@moz-msl7jr.static-ip.telepacific.net) (Client exited)
[17:43:50] <carllerche> simukis1: what are bindings you would want where libc is not available?
[17:44:53] *** simukis1 is now known as simukis
[17:46:23] <WindowsBunny> simukis: I don't need to depend on libc
[17:46:33] <WindowsBunny> simukis: I really only do it to get the basic c_ primitive types
[17:46:43] <WindowsBunny> c_void c_int c_long, etc
[17:47:11] <WindowsBunny> If std exposed those directly *cough cough*, then I wouldn't need to depend on libc
[17:47:16] <simukis> WindowsBunny: good for you. You’re using windows though, so you get nice “bindings” to syscalls via whatever that dll is called.
[17:47:43] <simukis> also note this is about libc library, not rust’s liblibc.
[17:47:48] <WindowsBunny> orite
[17:47:58] <WindowsBunny> well libc is just an extra layer on top of winapi
[17:47:59] <WindowsBunny> :P
[17:48:25] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[17:48:41] <WindowsBunny> libc subsystem on top of win32 subsystem on top of NT subsystem
[17:50:12] <simukis> carllerche: there’s no specific system where libc is not available. I just want rust to not link to libc 😊
[17:50:39] <carllerche> it would be helpful to have a crate dedicated to only type defs
[17:51:14] <WindowsBunny> simukis: My goal on Windows is to get rid of that dependence
[17:51:45] <simukis> notably on unixes you can’t avoid linking to that currently because it at least handles entry point and bindings to all syscalls and whatnot
[17:52:20] <WindowsBunny> hmmmm, we probably might need that entry point
[17:52:27] <nmatsakis> brson: are there any rust/rfcs issues discussing needs for windows?
[17:52:44] <nmatsakis> (or perhaps WindowsBunny?)
[17:52:44] <nmatsakis> :)
[17:52:45] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[17:53:13] *** Joins: eerie (eerie@moz-060j2q.red.bezeqint.net)
[17:53:21] <WindowsBunny> nmatsakis: Right now it's pretty much just me bouncing this stuff in the air
[17:53:31] <WindowsBunny> nmatsakis: I think I recently opened an issue in the rfcs repo
[17:53:33] *** Joins: MacBunny (Mibbit@moz-pfsjh9.or.comcast.net)
[17:53:35] <WindowsBunny> I'll populate it
[17:53:44] <larsberg> nmatsakis: https://github.com/rust-lang/rust/issues/19533 (debug info), https://github.com/rust-lang/rust/issues/12842 (XP support), are two of the three big ones we're tracking in https://github.com/servo/servo/issues/2854
[17:53:45] <nmatsakis> WindowsBunny: ok, link?
[17:53:51] <nmatsakis> larsberg: ah thanks
[17:53:53] <larsberg> nmatsakis: the other being "remove MSYS dependency"
[17:54:01] <larsberg> (which I don't have a # for either)
[17:54:41] <nmatsakis> larsberg: how imp't do you think XP will be for servo etc? I've heard mixed reports
[17:54:54] <nmatsakis> usually people tell me "more users of xp than everything else put together" or something like that
[17:54:59] <nmatsakis> but it's also on the decline?
[17:55:17] <cmr> nmatsakis: probably not as useful for servo as it is for rust components in gecko.
[17:55:26] <nmatsakis> (yes)
[17:55:39] <WindowsBunny> nmatsakis: https://github.com/rust-lang/rfcs/issues/1061
[17:56:17] *** Quits: eerie_ (eerie@moz-060j2q.red.bezeqint.net) (Ping timeout: 121 seconds)
[17:56:37] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[17:56:51] <nmatsakis> WindowsBunny: perfect, thanks.
[17:57:01] *** Quits: MacBunny (Mibbit@moz-pfsjh9.or.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[18:03:21] *** Joins: pauls (pauls@moz-e5p333.ccs.neu.edu)
[18:04:22] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[18:05:46] <larsberg> nmatsakis: Yeah, it's all about Rust in Gecko. Firefox has a gigantic number of users still on XPSP2 (many multiples of other platforms like Linux). It's not something we have to stress about immediately, but if we don't have that support it means that any feature in Firefox built in Rust has to keep around a second C implementation for WinXP.
[18:06:39] <acrichto> aturon: so if I have a path that looks like \\?\C:\foo, is there a way to chop that down to just C:\foo ?
[18:06:52] <larsberg> nmatsakis: We *may* be able to wait it out - Firefox itself is supposedly dropping support for 32-bit Windows, which means XPSP2 https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Build_Instructions/Windows_Prerequisites
[18:07:04] <nmatsakis> larsberg: right. though I imagine that for simple componenents (like maybe an imagine decoder...) it's going to be a lot easier than for more complex things involving stdlib/unwinding/etc more
[18:07:12] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[18:07:26] <nmatsakis> that is, incomplete support may be enough
[18:07:35] <aturon> acrichto: that's a piece of functionality from old_path that hasn't been carried over yet
[18:07:47] <aturon> acrichto: it shouldn't be too hard to do so, using the components iterator
[18:08:05] <acrichto> aturon: unfortunately the iterator only gives me `\\?\C:` as a whole unit
[18:08:14] <acrichto> aturon: as in there's no way to split that component from what I can see
[18:08:15] <aturon> acrichto: you can decompose that
[18:08:15] <nmatsakis> larsberg: anyway, thanks. 
[18:08:38] <acrichto> aturon: hm I guess I could make a whole new path
[18:08:43] <acrichto> aturon: was hoping to slice, but oh well
[18:08:50] *** Joins: avikpal (avikpal@moz-sci.8in.252.117.IP)
[18:08:57] <larsberg> nmatsakis: almost certainly! unwinding across a C FFI boundary is an iffy proposition in any case :-)
[18:09:08] <nmatsakis> larsberg: oh dear me yes
[18:09:11] <aturon> acrichto: https://github.com/rust-lang/rust/blob/master/src/libstd/path.rs#L464-L466 for decomposition
[18:09:26] *** Quits: pnkfelix (pnkfelix@moz-je0.a5j.80.81.IP) (Ping timeout: 121 seconds)
[18:09:27] <aturon> acrichto: but yes, if you want to work with it as a slice, you'll be working against the grain a bit
[18:09:32] <acrichto> ah well
[18:09:50] <aturon> acrichto: but a direct implementation of this functionality within the path module might be able to do it
[18:09:51] <WindowsBunny> In my imaginings both acrichto and aturon are very similar people
[18:10:33] <aturon> WindowsBunny: the handle similarity sometimes causes trouble :P
[18:11:19] <acrichto> lol
[18:13:08] <acrichto> WindowsBunny: looking at https://github.com/rust-lang/rfcs/issues/1061, I believe that we have purged 100% of libc calls for I/O apis from the windows implementation, but is there a way to verify this?
[18:13:48] <WindowsBunny> acrichto: Uh.... purge all the libc calls from liblibc and see if it builds? :P
[18:13:57] <WindowsBunny> Actually, lemme go do that and see how well it works
[18:14:13] <acrichto> WindowsBunny: to some extent we do still call things like memcpy/strlen, although I'm not sure if it's important to remove those
[18:14:41] <WindowsBunny> Actually, I wonder if there's a version of those in WinAPI
[18:14:42] <simukis> acrichto: see whether it links without libc
[18:15:07] <acrichto> simukis: I could verify that on linux, not sure how to do that on windows though...
[18:15:17] <simukis> delete your libc dll 😃
[18:15:30] <simukis> (or replace with an empty one)
[18:15:45] * acrichto wouldn't know where to look
[18:16:02] <WindowsBunny> simukis: It won't link without the CRT
[18:17:27] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[18:17:31] <acrichto> WindowsBunny: so it looks like we bind some stuff like tanh/sinh
[18:17:43] <acrichto> although this also says we cal signal()
[18:17:51] <acrichto> so I could be looking at something that's just bonkers
[18:18:23] *** Quits: bombless (_@moz-r9kuss.0v2u.0v40.0da8.2001.IP) (Connection closed)
[18:18:51] <WindowsBunny> we can replace memcpy with CopyMemory
[18:18:57] <WindowsBunny> which is kernel32
[18:18:59] *** Joins: bombless (_@moz-h37.piv.41.59.IP)
[18:19:27] <WindowsBunny> Which is....
[18:19:31] <WindowsBunny> defined as memcpy Q_Q
[18:19:50] <acrichto> wut
[18:20:18] <WindowsBunny> oh, apparently there is RtlCopyMemory
[18:20:19] <acrichto> some calls to memcpy are also generated by LLVM I believe
[18:20:27] <WindowsBunny> But it's only defined on x64 and arm
[18:20:31] <WindowsBunny> but not x86
[18:20:49] <acrichto> wut
[18:21:30] <barosl> That's interesting
[18:21:40] <barosl> So x86 is already obselete in the Windows API?
[18:22:02] <simukis> Family’s windows machine booted up into your computer was unable to boot dialog… And I was beginning to regain my trust in windows after looking at MSDN multiple times…
[18:23:06] *** Joins: eerie_ (eerie@moz-060j2q.red.bezeqint.net)
[18:23:08] <simukis> </off>
[18:23:34] <WindowsBunny> hmmm
[18:23:59] <WindowsBunny> oh I see
[18:24:19] <WindowsBunny> so memcpy and friends are part of vcruntime
[18:25:03] <simukis> well, they’re C functions after alll
[18:25:22] <simukis> we could as well define our own
[18:25:26] <simukis> in libcore
[18:25:37] <WindowsBunny> We could provide our own implementations of them
[18:26:09] <WindowsBunny> simukis: Really it's just a matter of depending only on libraries provided by windows SDK
[18:26:18] *** Quits: eerie (eerie@moz-060j2q.red.bezeqint.net) (Ping timeout: 121 seconds)
[18:26:41] <WindowsBunny> that way we can use lld to link against the windows SDK, without needing the user to have the full VS thing installed
[18:26:45] <simukis> though it will hardly be as performant as hand-optimised assembly by intel engineers for intel CPUs
[18:27:12] <WindowsBunny> about that...
[18:27:19] <WindowsBunny> VS comes with the source for for memcpy :P
[18:27:24] <WindowsBunny> It's.... a lot of asm
[18:27:43] <simukis> do we even have capability to declare symbols as weak/replaceable?
[18:27:48] <simukis> in rust, I mean
[18:28:14] <nmatsakis> acrichto: was there some kind of bug that caused --enable-debug to also --disable-optimize?
[18:28:21] <simukis> nmatsakis: yes.
[18:28:24] <nmatsakis> ah
[18:28:30] <nmatsakis> that explains why building libstd is taking so long :)
[18:28:40] <WindowsBunny> simukis: Look at this craziness https://gist.github.com/cee59421181fa0908945
[18:29:12] <simukis> oh wow
[18:29:25] <sfackler> yeah, glibc has like 100 versions of memcpy too for small copies
[18:29:32] <sfackler> gottagofast
[18:30:20] <WindowsBunny> I'm not actually sure where the CRT ends and where winapi begins
[18:30:35] <cmr> rep stosb or bust.
[18:30:50] <cmr> (all those older cpus don't matter)
[18:30:52] <WindowsBunny> I'm pretty convinced that WinAPI is built using the CRT, and the CRT is built using WinAPI
[18:30:55] <simukis> WindowsBunny: http://sourceware.org/git/?p=glibc.git;a=blob;f=sysdeps/x86_64/multiarch/memcpy-ssse3.S;hb=HEAD glibc’s
[18:31:13] <WindowsBunny> I legitimately don't know what order Microsoft builds everything in
[18:31:20] <bombless> No wonder adding `debug!` to every parse_* functions cause the compiling takes like 3 times slower.
[18:31:34] <simukis> cmr: I believe rep works all the way back to 8086
[18:32:09] *** Quits: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr) (Connection closed)
[18:32:16] <sfackler> it's slow as hell up to ivy bridge though
[18:32:19] <sfackler> maybe sandy bridge
[18:32:31] *** Joins: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr)
[18:33:05] <sfackler> IIRC glibc will do a rep stosb if the CPU's new enough
[18:33:28] <simukis> nmatsakis: https://github.com/rust-lang/rust/pull/24408, so it should be back to being fast no
[18:33:30] <simukis> now*
[18:34:26] <cmr> simukis: what sfackler said.
[18:34:49] *** Joins: rkruppe (chatzilla@moz-5hi0b4.diu2.0rth.0908.2a02.IP)
[18:34:55] <simukis> cmr: this was in response in --enable-debug nmatsakis’ question
[18:35:10] <simukis> apparently now you must pass in both --enable-optimize and --enable-debug
[18:35:26] <cmr> no I know.
[18:35:30] <cmr> just confirming what sfackler said.
[18:35:50] * simukis loves linear conversations.
[18:40:11] <larsberg> WindowsBunny: If that was an honest question, the WinAPI is built by the Windows team, and the CRT, etc. are built in devdiv and owned by the Visual C++ team (or were, circa-2007). So the dependencies can only go one way (CRT->WinAPI).
[18:40:58] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[18:40:59] *** ChanServ sets mode: +o pcwalton
[18:41:23] <larsberg> WindowsBunny: There's a version of the CRT-ish that ships in Windows, but it's a private fork only for use by the Windows team (raymondc has some of the details here - http://blogs.msdn.com/b/oldnewthing/archive/2014/04/11/10516280.aspx )
[18:42:06] <WindowsBunny> larsberg: And we currently depend on msvcrt.dll :D
[18:42:22] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[18:42:35] * larsberg looks askance at WindowsBunny...
[18:43:20] <larsberg> That is horrifying, but also unsurprising.
[18:43:25] <annodomini> brson: You included the wrong link in http://users.rust-lang.org/t/psa-1-0-0-beta-2-is-out/1019
[18:44:06] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[18:44:15] <WindowsBunny> larsberg: Yep, we link to mingw's msvcrt.lib which directly links to msvcrt.dll
[18:44:47] *** Joins: ineol (ineol@moz-akt.oi0.185.94.IP)
[18:46:52] <WindowsBunny> oh neat
[18:46:56] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[18:47:35] <WindowsBunny> so a bunch of methods like memcpy and strlen are provided by.... ntdllp.lib
[18:48:27] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[18:49:04] *** Quits: darnuria (darnuria@moz-cagds5.kokakiwi.net) (Quit: WeeChat 1.2-dev)
[18:49:12] *** Joins: darnuria (darnuria@moz-cagds5.kokakiwi.net)
[18:50:31] *** Joins: scialex (scialex@moz-j5mi8i.cs.brown.edu)
[18:53:18] *** Joins: eerie (eerie@moz-060j2q.red.bezeqint.net)
[18:53:25] <brson> annodomini: thanks. fixed
[18:53:28] *** Joins: sockmister (Mibbit@moz-juv.9o3.252.72.IP)
[18:55:44] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[18:56:10] *** Quits: eerie_ (eerie@moz-060j2q.red.bezeqint.net) (Ping timeout: 121 seconds)
[18:56:25] <bombless> It seems that to test a parser feature you have to make multiple .rs files since you can only catch one parsing error in one file?
[18:56:53] *** Quits: avikpal (avikpal@moz-sci.8in.252.117.IP) (Connection closed)
[18:56:54] <cmr> bombless: depends on the error, the parser can recover from some.
[18:57:16] <cmr> bombless: in general, yes.
[18:57:21] <Zoxc> cmr: Isn't there work to make it recover for all?
[18:58:10] <bombless> cmr: Guess that's gonna happend in the future, now that parse_* functions begin to return Result instead of panicking.
[18:58:34] *** Joins: avikpal (avikpal@moz-sci.8in.252.117.IP)
[18:58:42] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Quit: WeeChat 1.1.1)
[18:58:48] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[18:59:40] <cmr> bombless: that's not directly related. you still can't continue the parse if it fails.
[18:59:52] <simukis> rust is context dependent
[19:01:28] <Zoxc> cmr: Oh, I was thinking one Rust file calling the parser with snippets
[19:01:46] *** Quits: sockmister (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:01:47] <bombless> Hmm I'm working on a omitting comma thing here https://github.com/rust-lang/rust/issues/20616 . It actually can continue if it fail in this case.
[19:02:41] <kwantam> Anyone here familiar with the mac build boxes? Got a random segfault kind of early in the build and I'm kind of at a loss how to proceed since I don't have a mac on which to try and reproduce.
[19:02:49] <kwantam> http://buildbot.rust-lang.org/builders/auto-mac-64-nopt-t/builds/4564
[19:03:16] <bombless> Now I'm not sure the performance impact of bufferring token::Comma to Parser::last_token. I see I can tweak parse_lifetimes to avoid the bufferring, but that will look unnatural.
[19:07:30] *** Quits: avikpal (avikpal@moz-sci.8in.252.117.IP) (Ping timeout: 121 seconds)
[19:07:43] *** Quits: ineol (ineol@moz-akt.oi0.185.94.IP) (Client exited)
[19:10:13] *** Joins: munksgaa1d (munksgaard@moz-urnkl5.u.parknet.dk)
[19:11:17] *** Quits: eerie (eerie@moz-060j2q.red.bezeqint.net) (Connection closed)
[19:13:12] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[19:13:39] *** Quits: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net) (Client exited)
[19:25:05] *** Joins: eerie (eerie@moz-060j2q.red.bezeqint.net)
[19:26:46] *** Quits: pitdicker (pitdicker@moz-328u1s.adsl.online.nl) (Quit: Ik ga weg)
[19:28:55] <bombless> No way... in compile-fail check, those `//~` behind comments are also checked..
[19:34:35] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[19:38:07] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[19:39:07] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[19:39:51] *** Quits: bdero (bran@moz-mqs.7dh.189.18.IP) (Ping timeout: 121 seconds)
[19:44:04] *** Joins: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net)
[19:45:04] *** Quits: semarie (semarie@moz-db9nca.tor.ninja) (A TLS packet with unexpected length was received.)
[19:54:47] *** Quits: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr) (Connection closed)
[19:54:48] *** Joins: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr)
[19:59:54] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[20:00:51] *** Quits: scialex (scialex@moz-j5mi8i.cs.brown.edu) (Quit: Leaving)
[20:03:54] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[20:04:14] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[20:08:26] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Connection closed)
[20:09:06] <jdm> users.rust-lang.org is 503?
[20:09:45] *** Quits: eerie (eerie@moz-060j2q.red.bezeqint.net) (Connection closed)
[20:11:50] <annodomini> yep, down for me too
[20:11:54] *** Joins: canhtak (jeremy@moz-1a9fh1.luxdsl.pt.lu)
[20:12:15] <annodomini> so is internals
[20:13:11] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[20:15:02] <WindowsBunny> confirmed 503
[20:15:50] <sfackler> looks like discuss is down in general: https://discuss.atom.io/
[20:16:41] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[20:17:08] <jshs> https://twitter.com/discourse/status/589159007371165698
[20:17:18] <bombless> not every discourse http://what.thedailywtf.com/ :P
[20:21:50] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[20:22:32] <annodomini> well, looks like all of the discourse.org hosted instances are down; you can also run your own instance, which it looks like thedailywtf does, and that wouldn’t be affected by the same outage.
[20:23:49] *** Joins: numo16 (Mibbit@moz-ge15hh.hfc.comcastbusiness.net)
[20:25:06] *** Quits: numo16 (Mibbit@moz-ge15hh.hfc.comcastbusiness.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:27:12] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[20:32:27] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[20:34:04] *** Joins: bkearns (Adium@moz-rudtng.static.wiline.com)
[20:37:37] *** Quits: sagg (sigg@moz-55rvi2.dclient.hispeed.ch) (A TLS packet with unexpected length was received.)
[20:41:12] *** Quits: ctennis (ctennis@moz-93imdn.bltnin.sbcglobal.net) (Quit: Leaving...)
[20:41:44] *** Quits: jgallagher (john@moz-d5e8oc.hfc.comcastbusiness.net) (Client exited)
[20:42:59] *** Quits: poorman (poorman@moz-sdl0oq.res.rr.com) (Ping timeout: 121 seconds)
[20:45:05] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[20:45:11] *** Joins: poorman (poorman@moz-sdl0oq.res.rr.com)
[20:48:04] *** Quits: munksgaa1d (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[20:49:46] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Ping timeout: 121 seconds)
[20:54:11] *** Joins: ctennis (ctennis@moz-vcpg3c.in.comcast.net)
[20:54:12] <frewsxcv> does rust use  the hosted discourse instances?
[20:55:42] <steveklabnik> frewsxcv: i believe so, but not 100% sure
[20:55:45] *** Quits: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr) (Quit: )
[20:55:54] <brson> frewsxcv: yes, they are hosted
[20:55:55] * frewsxcv wonders why icons werent loading for him on discourse
[20:56:12] <frewsxcv> (only for the rust related discourses, not other hosted ones)
[20:56:16] <annodomini> internals.rust-lang.org. 1523	IN	CNAME	hosted-vh1.discourse.org.
[20:56:17] <brson> frewsxcv: i've seen problems when http everywhere is enabled
[20:56:25] <brson> *https
[20:56:46] <annodomini> Yeah, you need to disable https everywhere on the users/internals to get icons to work.
[20:57:24] <annodomini> Specifically, you need to disable the “fastly.net” rule
[20:57:25] <frewsxcv> oh nice, there's a password field on an HTTP page
[20:57:52] <annodomini> Yeah, not really ideal; use a throwaway password, or authentica via github
[20:58:32] *** Quits: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net) (Client exited)
[20:59:56] *** Joins: Kingsquee (kingsley@moz-qq7ns6.bchsia.telus.net)
[21:02:09] * frewsxcv thinks it's fairly irresponsible for that to be allowed
[21:02:19] *** Joins: mib_az0gfc (Mibbit@moz-juv.9o3.252.72.IP)
[21:02:37] * frewsxcv knows the teams is busy though
[21:02:58] *** Joins: blaenk (blaenkdenum@moz-rhiccj.n2pv.fsko.e000.2605.IP)
[21:03:32] <blaenk> reem: probably already know, but I think rust-error is broken
[21:03:38] <blaenk> ill file a pr i guess
[21:04:35] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[21:06:47] <blaenk> filed
[21:06:55] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[21:06:59] <reem> blaenk: just merged https://github.com/reem/rust-error/pull/12
[21:07:11] <blaenk> oh psssshh, I should've looked at the prs
[21:07:26] <blaenk> that fix is better too
[21:07:31] <blaenk> can you bump the version?
[21:07:51] <reem> ya
[21:07:53] <blaenk> :)
[21:07:58] <reem> It looks like these changes are only in tests
[21:08:04] <reem> weird that it affects non-test builds
[21:08:09] <blaenk> yeah
[21:08:58] <reem> uploaded
[21:09:03] *** Joins: bdero (bran@moz-lbs.91h.47.73.IP)
[21:09:04] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[21:09:08] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[21:09:57] *** Parts: bdero (bran@moz-lbs.91h.47.73.IP) ()
[21:10:34] <blaenk> aight
[21:11:09] *** Quits: Thorn (Thorn@moz-p3j.20c.107.217.IP) (Quit: Quit)
[21:11:22] *** Joins: bdero1 (bran@moz-216hqv.oo5r.e4su.0006.2601.IP)
[21:11:26] <blaenk> aww now hyper doesn't build, time to track that down cc seanmonstar 
[21:11:57] <blaenk> oh i think its cause of the changes to thread
[21:12:05] <blaenk> JoinHandle has a type param now
[21:12:17] <blaenk> I imagine the type param is the type of the return value
[21:13:01] <blaenk> reem: can you make that fix? or should I attempt it and file a pr
[21:13:12] <brson> fyi i won't be able to do a new regression report until sometime this weekend
[21:13:32] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[21:14:19] *** jdm is now known as jdm|busy
[21:14:38] <blaenk> ohhhh
[21:14:44] <blaenk> it's already fixed, I just have to somehow enable the nightly feature
[21:14:51] <blaenk> that whole nightly feature snuck past me, I have to read up on it
[21:15:40] <blaenk> anyone have a link to something about it?
[21:15:55] <blaenk> I think maybe I can enable that project-wide in my cargo toml, will check
[21:16:39] <aturon> btw, in case people haven't seen it: posted a big RFC about scaling up Rust's governance: https://github.com/rust-lang/rfcs/pull/1068
[21:18:03] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[21:18:24] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[21:18:31] <reem> blaenk: It’s a hyper-specific thing, it’s a cargo feature just called “nightly”
[21:18:33] *** Joins: blaenk_ (blaenkdenum@moz-12e081.res.rr.com)
[21:18:41] <blaenk_> actually the problem is that I depend on hyper indirectly through iron, so I don't think I can propagate that feature to hyper
[21:18:58] <reem> Ya, you’re not the first to hit this problem. If you use the beta everything “just works”
[21:19:16] <blaenk_> alright I'll try using the beta ;(
[21:19:16] <blaenk_> wish we had a better way of managing the divide
[21:19:33] <reem> in the future we’ll probably have #[cfg(nightly)]
[21:19:36] <reem> and that will solve it
[21:19:37] <blaenk_> I wish
[21:19:39] <seanmonstar> There's a suggest cfg on internals that may help
[21:19:43] <seanmonstar> Suggested
[21:19:45] <blaenk_> I kinda wish we could also feature test
[21:19:57] *** Quits: blaenk (blaenkdenum@moz-rhiccj.n2pv.fsko.e000.2605.IP) (Ping timeout: 121 seconds)
[21:20:01] <seanmonstar> blaenk_: comment that on the thread
[21:20:07] <blaenk_> which thread buddy, let me see
[21:20:11] <blaenk_> got disconnected
[21:20:28] <seanmonstar> I don't have link, on mobile
[21:20:34] <blaenk_> ah no problem, on discourse right
[21:20:36] <blaenk_> will look for it
[21:21:02] <seanmonstar> http://internals.rust-lang.org/t/setting-cfg-nightly-on-nightly-by-default/1893
[21:21:25] <blaenk_> aghagh this is a nightmare, I'm being torn apart. some packages aren't 'stable'-ready, but i have to go stable in order to use iron/hyper
[21:21:59] <seanmonstar> Yep, fun times
[21:22:00] *** Joins: p1start (p1start@moz-nftjhe.org)
[21:22:05] <blaenk_> sup p1start 
[21:23:26] *** Quits: jdm|busy (jdm@moz-ilbt2e.cable.teksavvy.com) (Quit: )
[21:23:27] *** Quits: rkruppe (chatzilla@moz-5hi0b4.diu2.0rth.0908.2a02.IP) (Ping timeout: 121 seconds)
[21:23:29] <blaenk_> ugh this is horrrriiblbleleeeeeee
[21:23:31] <blaenk_> worst moment in rust for me
[21:24:22] <brson> blaenk_: why doesn't hyper work on nightly?
[21:24:30] <blaenk_> it does, with the 'nightly' feature
[21:24:37] <blaenk_> but I don't depend on it, I depend on iron
[21:24:41] <blaenk_> so I can't propagate the nightly feature to it
[21:24:47] <blaenk_> I'm gonna try creating a hyper override
[21:24:56] <sfackler> blaenk_: you should be able to add a direct dependency on iron with the feature activated
[21:25:13] <blaenk_> sorry can you elaborate? how do you mean?
[21:25:14] <seanmonstar> brson: because of the joinhandle change, we use a cargo feature to handle it 
[21:25:23] <blaenk_> you mean I edit iron's cargo toml and add in the feature?
[21:25:25] *** Joins: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com)
[21:25:36] <blaenk_> that's what it might come to if that's what you mean
[21:25:41] <sfackler> blaenk_: no, add a dependency on iron to your project with the feature turned on
[21:25:53] <blaenk_> yeah, but that feature won't propagate to hyper afaik
[21:25:54] <blaenk_> I'll try it
[21:25:55] <seanmonstar> brson: so by default it still compiles on beta, and a cargo feature can be used to compile on nightly
[21:26:00] <blaenk_> cause hyper is the one that requires the feature, not iron
[21:26:07] <blaenk_> afaik
[21:26:08] <aturon> seanmonstar: hey, just catching up -- i thought the new beta included the change?
[21:26:17] <seanmonstar> However, it has the problem that blaenk is hitting right now
[21:26:18] *** Quits: canhtak (jeremy@moz-1a9fh1.luxdsl.pt.lu) (Ping timeout: 121 seconds)
[21:26:25] <seanmonstar> aturon: when was this? 
[21:26:28] <seanmonstar> Today? 
[21:26:33] <aturon> seanmonstar: http://users.rust-lang.org/t/psa-1-0-0-beta-2-is-out/1019
[21:26:50] <reem> Ah, we should be able to strip the nightly feature flag now
[21:26:54] <reem> (from hyper)
[21:26:54] <seanmonstar> I haven't read any of my rust mail today 
[21:27:01] *** Joins: canhtak (jeremy@moz-1a9fh1.luxdsl.pt.lu)
[21:27:08] <aturon> seanmonstar: no worries, was just hoping the new beta would fix the bad situation for y'all
[21:27:10] <reem> seanmonstar: nightly and beta are back on the same API
[21:27:15] <blaenk_> phew
[21:27:35] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Ping timeout: 121 seconds)
[21:27:42] <seanmonstar> reem: don't kill it completely 
[21:27:57] <seanmonstar> It's also used to be able to run benchmarks
[21:28:24] <blaenk_> if one of you guys can make that fix (re: joinhandle) and bump the version I would be immensely appreciative
[21:28:46] <blaenk_> or I'll file a pr if you prefer
[21:29:30] <carllerche> Gankro: any plans to add an API to set that allows "popping" a value?
[21:29:33] *** Quits: canhtak (jeremy@moz-1a9fh1.luxdsl.pt.lu) (Client exited)
[21:30:06] <seanmonstar> blaenk_: I'm on mobile for another half hour
[21:30:15] <blaenk_> seanmonstar: ah okay no worries buddy
[21:30:31] <blaenk_> reem are you on it? if not I'll file a pr and run off my fork for now
[21:30:32] <brson> erickt SimonSapin: do you know /u/lambdaburrito's email?
[21:31:16] <bombless> It seems that this compile-fail check "error-pattern:" acts differently with or without --enable-optimize? Any way I run `make check-stage2-cfail` again to make sure.
[21:33:15] <blaenk_> reem: filed pull request
[21:33:27] <blaenk_> that's if my understanding of the fix is correct
[21:33:41] <Manishearth> brson: git show 883bb65 in the rust-lang repo
[21:33:57] <Manishearth> from gh24376
[21:33:57] <[o__o]> Fix for #24374 : https://github.com/rust-lang/rust/pull/24376
[21:34:17] <Manishearth> (to get the email)
[21:35:07] <brson> ah thanks
[21:37:57] <seanmonstar> blaenk_: sigh, github won't let me merge on mobile till the tests pass
[21:38:07] <blaenk_> no worries!
[21:38:29] <blaenk_> I'll let you know when they're done passing, if you're still around and free to merge
[21:41:07] <blaenk_> seanmonstar: thanks!!
[21:41:59] *** Joins: ineol (ineol@moz-akt.oi0.185.94.IP)
[21:42:25] <blaenk_> reem: any change you can bump the version of hyper?
[21:42:28] <blaenk_> chance
[21:42:47] <seanmonstar> I'm bumping
[21:42:53] <blaenk_> :D
[21:43:55] <seanmonstar> Ssh on mah phone :) 
[21:44:11] <blaenk_> haha nice
[21:44:31] <seanmonstar> Ok, published
[21:46:06] *** Quits: binkarus (textual@moz-014tff.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:48:14] <blaenk_> yesss it all builds! thanks a bunch sean
[21:48:19] *** blaenk_ is now known as blaenk
[21:50:19] <seanmonstar> Thanks for the pr
[21:50:48] <blaenk> no problem
[21:59:59] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[22:02:39] <Gankro> carllerche: internals.rust-lang.org/t/maps-sets-and-the-value-of-keys/532/
[22:03:13] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[22:05:09] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[22:05:37] *** Joins: binkarus (textual@moz-014tff.ca.comcast.net)
[22:05:43] <Gankro> carllerche: If you could post your usecase that would help build a robust RFC to that effect
[22:07:45] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[22:09:08] *** Joins: swgillespie (swgillespie@moz-upj.3un.220.167.IP)
[22:11:29] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[22:11:46] <carllerche> Gankro: posted, but not sure how much info you want
[22:12:31] <Gankro> Ideally why it is necessary for <perf>
[22:12:39] <Gankro> in your usecase
[22:18:09] <carllerche> Gankro: done
[22:18:14] <carllerche> hopefully it is clear :)
[22:22:45] *** Joins: chc4 (chc4@moz-mjph4c.ma.comcast.net)
[22:24:49] *** Joins: lfairy (lfairy@moz-vl67ma.ihug.co.nz)
[22:27:37] *** Quits: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net) (Client exited)
[22:30:39] *** Quits: kushal (kdas@moz-6bbu0u.dsl.bell.ca) (Quit: Leaving)
[22:31:26] *** Quits: imperio (Mibbit@moz-8otf3a.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:34:48] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[22:38:01] *** Quits: mib_az0gfc (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:38:09] *** Parts: zubron (bandenburg@moz-g4s61s.cable.virginm.net) ()
[22:39:46] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[22:42:03] *** Joins: canhtak (jeremy@moz-1a9fh1.luxdsl.pt.lu)
[22:42:15] *** Quits: canhtak (jeremy@moz-1a9fh1.luxdsl.pt.lu) (Client exited)
[22:42:46] *** Quits: eibwen (eibwen@moz-t31rm6.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[22:48:19] *** Quits: ineol (ineol@moz-akt.oi0.185.94.IP) (Client exited)
[23:00:36] <erickt> brson: I'm afraid I don't know who lambdaburrito is
[23:01:01] <erickt> brson: oh, the london meetup person
[23:02:06] *** Quits: hirschen (hirschen@moz-d2r.h4e.90.95.IP) (Ping timeout: 121 seconds)
[23:02:08] <erickt> brson: you can contact them through the meetup ui
[23:02:11] <erickt> on http://www.meetup.com/Rust-London-User-Group/
[23:02:18] <brson> erickt: it's cool. i found him
[23:02:40] <erickt> ack! I didn't announce the launch party meetup.
[23:02:48] * erickt does that
[23:03:22] <erickt> brson: when should we open the doors?
[23:03:40] <erickt> 6pm? we had a nice turnout
[23:03:44] <erickt> last time at that time
[23:04:45] <brson> 6pm is good
[23:05:26] <seanmonstar> oh wow, rustdoc now shows all methods of the target of a Deref...
[23:05:39] <seanmonstar> not sure that's what i wanted..
[23:05:49] *** Quits: Kroisse (Kroisse@moz-t75tk5.krois.se) (Quit: Good bye :))
[23:06:28] <erickt> brson: what should I set as the rsvp limit? start with 70 and scale up if we hit a wait limit?
[23:06:39] <lfairy> and the unstable markings are accessible to color blind folks!
[23:07:33] <brson> erickt: let's start at 80
[23:07:55] <brson> erickt: we might use the community space next to the commons to super-charge our attendnance, but i'm worried about the inferiority of that room
[23:11:40] <erickt> brson: also, I was going to invite people to give lightning talks if they want to show off anything nifty rust things
[23:13:09] <erickt> brson: should we try to do a live stream?
[23:13:39] <erickt> if you want to say anything and if we have lightning talks it could be worthwhile
[23:13:49] <brson> erickt: we can do a stream, yeah. i've got it booked
[23:13:53] <erickt> but I expect most of the evening will be party-esque
[23:13:55] <erickt> cool
[23:14:02] <brson> def keep them *lighting* talks though, yeah
[23:15:48] *** Quits: bkearns (Adium@moz-rudtng.static.wiline.com) (Quit: Leaving.)
[23:17:12] *** Joins: blaenk_ (blaenkdenum@moz-12e081.res.rr.com)
[23:17:57] *** Quits: proc (proc@moz-i69dec.dip0.t-ipconnect.de) (Quit: Gotta eat my pizza)
[23:18:04] *** Quits: blaenk (blaenkdenum@moz-12e081.res.rr.com) (Ping timeout: 121 seconds)
[23:18:30] *** Quits: Defaultti (Defaultti@moz-bmdn13.kapsi.fi) (Quit: Quitting.)
[23:18:36] *** Quits: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com) (Ping timeout: 121 seconds)
[23:22:26] *** Joins: Defaultti (Defaultti@moz-bmdn13.kapsi.fi)
[23:24:03] <erickt> brson: just announced a moment ago and we already have 17 folks signed up
[23:24:10] <erickt> wait. 19
[23:25:08] <Eridius> :D
[23:25:14] <Eridius> it says "21 going" on my screen
[23:25:18] <brson> lol
[23:25:19] <Eridius> make that 22
[23:25:25] <brson> i guess i better sign up!
[23:25:29] <mcpherrin> erickt: well I signed up like a week ago
[23:25:58] <erickt> Eridius: we're going to need a bigger boa, err, room!
[23:26:01] <erickt> mcpherrin: cheater
[23:26:15] <mcpherrin> erickt: and others had at the same time
[23:26:40] <erickt> cheaters everywhere!
[23:27:13] *** Quits: aepsil0n (eduard@moz-8h7njb.hsi8.kabel-badenwuerttemberg.de) (Connection closed)
[23:28:29] <mcpherrin> I always sign up for every event on the meetup even if they're TBD so I don't forget ;p
[23:29:03] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[23:29:29] <acrichto> Yurume: ping
[23:35:05] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Quit: )
[23:36:11] <frewsxcv> steveklabnik: ping
[23:36:21] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[23:37:09] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[23:37:21] *** Quits: flaper87 (flaper87@moz-fnn.1e9.132.209.IP) (Ping timeout: 121 seconds)
[23:38:01] <lkuper> The Rust launch party conflicts with !!Con D:
[23:38:07] <mcpherrin> lkuper: oh no!
[23:38:41] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:38:45] <lkuper> well, technically it's the day before !!Con, but I sort of have to be there to set up the day before
[23:41:08] *** Joins: blaenk (blaenkdenum@moz-12e081.res.rr.com)
[23:41:15] <lkuper> OTOH, it's good timing, especially since there's a Rust talk
[23:41:16] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[23:41:53] *** Quits: jshs (jshs@moz-e3h72s.dip0.t-ipconnect.de) (Client exited)
[23:42:24] <frewsxcv> is there a launch party in NYC?
[23:42:36] *** Quits: blaenk_ (blaenkdenum@moz-12e081.res.rr.com) (Ping timeout: 121 seconds)
[23:44:14] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Connection closed)
[23:44:43] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[23:45:08] <carllerche> Is there a release party in PDX?
[23:46:36] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[23:49:08] *** Joins: blaenk_ (blaenkdenum@moz-12e081.res.rr.com)
[23:50:36] *** Quits: blaenk (blaenkdenum@moz-12e081.res.rr.com) (Ping timeout: 121 seconds)
[23:50:53] *** Quits: swgillespie (swgillespie@moz-upj.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:53:30] *** Joins: jgallagher (john@moz-6ge.dhn.131.24.IP)
[23:57:27] <richo> oh man, it conflicts with so many things :(
[23:57:40] <richo> .. I don't suppose there's gunna be one in chicago? That would make my life a lot easier
